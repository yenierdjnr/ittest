{
  "description": "Active Directory Domain Services (AD DS) allows you to create a scalable, secure, and manageable infrastructure for user and resource management, and you can provide support for directory-enabled applications. In these episodes, you will learn how to deploy and maintain Active Directory in both traditional networks and cloud-based solutions.",
  "descriptionMD": "",
  "length": "34024",
  "name": "Working with Active Directory",
  "practiceExam": false,
  "subtitle": "Deploy and maintain Active Directory",
  "tagUrl": "help-desk",
  "topics": [
    {
      "episodes": [
        {
          "description": null,
          "length": "9999",
          "thumbnail": "asdf",
          "thumbnailMed": null,
          "thumbnailSm": null,
          "title": "What is Active Directory",
          "transcript": "",
          "vimeoId": "asdf"
        },
        {
          "description": "Active Directory Domain Services (AD DS) allows you to create a scalable, secure, and manageable infrastructure for user and resource management, and you can provide support for directory-enabled applications. In these episodes, you will learn how to deploy and maintain Active Directory in both traditional networks and cloud-based solutions.",
          "length": "279",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-0-0-overview-121015-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-0-0-overview-121015-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-0-0-overview-121015-1-sm.jpg",
          "title": "Overview",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:07.565\n[MUSIC]\n\n2\n00:00:07.565 --> 00:00:11.838\nHello, we're here to introduce you to an\nexciting new series on Active Directory.\n\n3\n00:00:11.838 --> 00:00:15.283\nActive Directory is one of the more\nimportant concepts that we can learn about\n\n4\n00:00:15.283 --> 00:00:16.292\nas IT professionals.\n\n5\n00:00:16.292 --> 00:00:19.692\nAnd we wanna make sure that everybody has\na good understanding of the foundations\n\n6\n00:00:19.692 --> 00:00:21.690\nand the basics in Active Directory.\n\n7\n00:00:21.690 --> 00:00:24.510\nAnd we've got Mike Rodrick to\nactually help us out here,\n\n8\n00:00:24.510 --> 00:00:26.180\nto show us what we're\ngonna be talking about.\n\n9\n00:00:26.180 --> 00:00:28.360\nSo Mike, what are we gonna be\ncovering here in Active Directory?\n\n10\n00:00:28.360 --> 00:00:30.372\n>> Well,\nwe're gonna cover from A to Z, Ronnie.\n\n11\n00:00:30.372 --> 00:00:33.550\nThis is the place to be if you\nwanna learn about Active Directory.\n\n12\n00:00:33.550 --> 00:00:38.103\nWe're gonna start with the very basics\nof getting Active Directory installed.\n\n13\n00:00:38.103 --> 00:00:41.640\nAnd even just installing Active Directory,\nthere's different ways I can install it.\n\n14\n00:00:41.640 --> 00:00:46.253\nIf we're gonna install it on a full-blown\nserver with a GUI interface or\n\n15\n00:00:46.253 --> 00:00:48.608\nif we're gonna do it on Server Core.\n\n16\n00:00:48.608 --> 00:00:51.136\nWe're gonna take a look at\ncloning Domain Controller,\n\n17\n00:00:51.136 --> 00:00:54.328\nso that we can push domain controllers\nout in a rapid pace if we need to.\n\n18\n00:00:54.328 --> 00:00:57.563\nIf we need to deploy additional\ndomain controllers very quickly,\n\n19\n00:00:57.563 --> 00:01:00.170\nwe are gonna take a look at cloning,\nas well.\n\n20\n00:01:00.170 --> 00:01:01.980\nAnd then we're gonna break\nActive Directory down.\n\n21\n00:01:01.980 --> 00:01:05.785\nLike I said, we're gonna start at the very\nbasics, and kind of work our way through.\n\n22\n00:01:05.785 --> 00:01:08.790\nSo we're gonna learn about\nwhat makes Active Directory.\n\n23\n00:01:08.790 --> 00:01:12.740\nWe'll talk about the database,\nand the SYSVOL folder structure.\n\n24\n00:01:12.740 --> 00:01:17.342\nWe'll talk about organizing Active\nDirectory with organizational units.\n\n25\n00:01:17.342 --> 00:01:19.820\nWe're gonna take a look\nat user accounts and\n\n26\n00:01:19.820 --> 00:01:22.300\ncomputer accounts and\ngetting those created.\n\n27\n00:01:22.300 --> 00:01:26.180\nBecause really, Active Directory again,\nit's as Ronnie said, a very important\n\n28\n00:01:26.180 --> 00:01:29.780\ntopic if you're going to be administering\nan Active Directory network,\n\n29\n00:01:29.780 --> 00:01:33.310\nand almost all enterprises\nare running Active Directory.\n\n30\n00:01:33.310 --> 00:01:37.522\nWe move out of that work group model\nvery early on when we're in that SOHO.\n\n31\n00:01:37.522 --> 00:01:39.502\nWe get more than 10, 15 users,\n\n32\n00:01:39.502 --> 00:01:43.165\nwe're probably gonna be\nimplementing Active Directory.\n\n33\n00:01:43.165 --> 00:01:46.375\nThat's a beautiful thing about Active\nDirectory, it's very, very scalable.\n\n34\n00:01:46.375 --> 00:01:51.037\nIt can go from ten objects to\ntens of thousands of objects, and\n\n35\n00:01:51.037 --> 00:01:53.555\neven more, it scales very well.\n\n36\n00:01:53.555 --> 00:01:57.960\nBut, that brings challenges as we\nstart getting geographically dispersed\n\n37\n00:01:57.960 --> 00:01:59.073\nwith our offices.\n\n38\n00:01:59.073 --> 00:02:01.063\nAnd we've got offices in different cities.\n\n39\n00:02:01.063 --> 00:02:03.945\nNow I've gotta worry about\nreplication with Active Directory,\n\n40\n00:02:03.945 --> 00:02:07.720\nmaking sure that we have a consistent\nstate so we're gonna deal with that.\n\n41\n00:02:07.720 --> 00:02:13.798\nReplication and sites, and replication\nlinks or site links, you name it.\n\n42\n00:02:13.798 --> 00:02:14.959\nI'm trying to think of what else, Ronnie.\n\n43\n00:02:14.959 --> 00:02:19.530\nWe're gonna look at the trust relations\nthat get created in Active Directory.\n\n44\n00:02:19.530 --> 00:02:25.315\nHow to create our own trust if we need to\nset up trust with external organizations.\n\n45\n00:02:25.315 --> 00:02:27.730\nAdding additional domain controllers.\n\n46\n00:02:27.730 --> 00:02:31.810\nAs our forest grows,\nmaybe we go to a multi-domain environment.\n\n47\n00:02:31.810 --> 00:02:33.770\nHow do we add those child domains?\n\n48\n00:02:33.770 --> 00:02:35.970\nWhat if I've got a separate namespace?\n\n49\n00:02:35.970 --> 00:02:41.050\nWe'll throw a little bit of DNS in there\nbecause Active Directory does rely on DNS,\n\n50\n00:02:41.050 --> 00:02:44.480\nbut we're really gonna\nfocus primarily on DNS.\n\n51\n00:02:44.480 --> 00:02:46.664\nWe'll talk a little bit\nabout group policy but\n\n52\n00:02:46.664 --> 00:02:49.976\nthen we've got other shows where\nwe're gonna focus on group policy.\n\n53\n00:02:49.976 --> 00:02:53.936\nThis, again,\nis gonna really focus on Active Directory.\n\n54\n00:02:53.936 --> 00:02:56.652\nWe've gotta make sure we're ready for\ndisasters, right?\n\n55\n00:02:56.652 --> 00:02:59.300\nWe've gotta make sure we're\nbacking up Active Directory.\n\n56\n00:02:59.300 --> 00:03:01.920\nHow do we restore Active Directory?\n\n57\n00:03:01.920 --> 00:03:06.085\nWhat if I've got a deleted object that\nchanges the restoration process of putting\n\n58\n00:03:06.085 --> 00:03:07.062\nthat object back?\n\n59\n00:03:07.062 --> 00:03:09.180\nWe're gonna show you\nhow to do that as well.\n\n60\n00:03:09.180 --> 00:03:11.170\nSo if you do anything\nwith Active Directory,\n\n61\n00:03:11.170 --> 00:03:14.240\nwhether you're the admin\nthat handles everything.\n\n62\n00:03:14.240 --> 00:03:17.840\nOr maybe you've been delegated\na task that you're responsible for\n\n63\n00:03:17.840 --> 00:03:19.670\nresetting user accounts' passwords.\n\n64\n00:03:19.670 --> 00:03:23.270\nAnd we're gonna look at that delegation\nwizard and see how that's done.\n\n65\n00:03:23.270 --> 00:03:26.900\nMaybe you're administering Active\nDirectory but your organization is growing\n\n66\n00:03:26.900 --> 00:03:31.260\nand you need to delegate portions\nof your job out to other people.\n\n67\n00:03:31.260 --> 00:03:33.074\nHow do I do that in a secure fashion?\n\n68\n00:03:33.074 --> 00:03:36.979\nHow do I let the help desk go in and\nreset passwords but not for\n\n69\n00:03:36.979 --> 00:03:40.340\nthe admin accounts, or\nnot create new users.\n\n70\n00:03:40.340 --> 00:03:42.362\nWe're gonna show you how to do that.\n\n71\n00:03:42.362 --> 00:03:45.412\nLike I said, we'll work a little bit\nwith those default group policies,\n\n72\n00:03:45.412 --> 00:03:47.686\ngroups are another thing\nthat we've gotta deal with.\n\n73\n00:03:47.686 --> 00:03:51.122\nHow we create groups within\nActive Directory and\n\n74\n00:03:51.122 --> 00:03:53.813\nassign permissions to those groups.\n\n75\n00:03:53.813 --> 00:03:55.310\nPre-staging computer accounts.\n\n76\n00:03:55.310 --> 00:03:57.630\nI mean, you name it, we're gonna cover it.\n\n77\n00:03:57.630 --> 00:04:01.310\nSo if you need to learn about\nActive Directory, whether it's installing\n\n78\n00:04:01.310 --> 00:04:05.050\nActive Directory or maintaining an\nexisting Active Directory infrastructure.\n\n79\n00:04:05.050 --> 00:04:09.225\nIf you're new to it, or if you've had some\nexperience with it and you wanna brush up\n\n80\n00:04:09.225 --> 00:04:13.122\non your Flexible Single Master Operation\nroles and how to move those around.\n\n81\n00:04:13.122 --> 00:04:17.074\nAnd what to do if one of the domain\ncontrollers that's holding one of those\n\n82\n00:04:17.074 --> 00:04:17.850\nFSMOs fails.\n\n83\n00:04:17.850 --> 00:04:19.570\nHow do I recover from that?\n\n84\n00:04:19.570 --> 00:04:20.980\nWe're gonna show you how.\n\n85\n00:04:20.980 --> 00:04:25.480\nSo, again, if you need to learn about\nActive Directory, this is the place to be.\n\n86\n00:04:25.480 --> 00:04:27.818\nAll right, so we've got some\ngreat episodes coming your way.\n\n87\n00:04:27.818 --> 00:04:31.057\nWe're gonna, again, work with\nActive Directory from top to bottom.\n\n88\n00:04:31.057 --> 00:04:32.019\nHope to see you there.\n\n89\n00:04:32.019 --> 00:04:38.959\n[MUSIC]\n\n",
          "vimeoId": "148636515"
        },
        {
          "description": "In this episode, Ronnie and Mike introduce us to Microsoft’s Active Directory Components.  They describe the purpose of Active Directory in a work environment.  Also, they take time to familiarize us with common terminology used with understandingActive Directory.",
          "length": "2289",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-1-1-active_directory_components-110315-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-1-1-active_directory_components-110315-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-1-1-active_directory_components-110315-1-sm.jpg",
          "title": "Active Directory Components",
          "transcript": "WEBVTT\n\n1\n00:00:00.031 --> 00:00:10.031\n[MUSIC]\n\n2\n00:00:12.231 --> 00:00:15.454\nWelcome to another exciting\nepisode here on IT Pro TV.\n\n3\n00:00:15.454 --> 00:00:19.283\nI'm your host Ronnie Wong and today we're\ntaking a look at understanding active\n\n4\n00:00:19.283 --> 00:00:21.364\ndirectory, and who better to help us than,\n\n5\n00:00:21.364 --> 00:00:24.820\nwell, the kung fu master himself in\nMicrosoft, Mister Mike Roderick.\n\n6\n00:00:24.820 --> 00:00:25.656\nHow's it going, Mike?\n\n7\n00:00:25.656 --> 00:00:27.118\n>> It's going great, Ronnie.\n\n8\n00:00:27.118 --> 00:00:31.284\nI'm excited to be here because Active\nDirectory is one of my favorite topics and\n\n9\n00:00:31.284 --> 00:00:35.326\nwe're gonna take a look at Active\nDirectory from beginning to end throughout\n\n10\n00:00:35.326 --> 00:00:36.399\nthis set of videos.\n\n11\n00:00:36.399 --> 00:00:40.753\nBut we wanna start with some\nterminology and some basic concepts.\n\n12\n00:00:40.753 --> 00:00:43.777\nBecause before we can go and\ninstall Active Directory and\n\n13\n00:00:43.777 --> 00:00:46.990\nconfigure Active Directory and\nreally make it do its thing,\n\n14\n00:00:46.990 --> 00:00:50.025\nwe've gotta have an understanding\nof the terminology.\n\n15\n00:00:50.025 --> 00:00:52.485\nAnd the pieces that make\nup Active Directory.\n\n16\n00:00:52.485 --> 00:00:55.005\nSo that's always a good place to start.\n\n17\n00:00:55.005 --> 00:00:57.665\n>> Now, Mike, I just remembered when\nI first started in working with\n\n18\n00:00:57.665 --> 00:01:00.785\nActive Directory, a lot of times it would\nbe very confusing when I'd start hearing\n\n19\n00:01:00.785 --> 00:01:03.155\nsome of the terms like\nyou're talking about and\n\n20\n00:01:03.155 --> 00:01:05.205\njust not knowing exactly\nwhat it referred to.\n\n21\n00:01:05.205 --> 00:01:06.135\nSo in this episode,\n\n22\n00:01:06.135 --> 00:01:08.735\nwe're actually gonna help us to actually\nunderstand some of those terms.\n\n23\n00:01:08.735 --> 00:01:12.541\nBut before we get started there, let's\njust try and make sure that we understand.\n\n24\n00:01:12.541 --> 00:01:15.164\nMike, what in the world does\nActive Directory do for us?\n\n25\n00:01:15.164 --> 00:01:16.116\nWhy is it that important?\n\n26\n00:01:16.116 --> 00:01:19.198\n>> That's a great question, why do I\nwant to even move to Active Directory?\n\n27\n00:01:19.198 --> 00:01:19.941\nDo we need it?\n\n28\n00:01:19.941 --> 00:01:22.310\nIs it something we want to\nimplement in our network, right?\n\n29\n00:01:22.310 --> 00:01:23.562\nWe don't have it at home.\n\n30\n00:01:23.562 --> 00:01:24.491\nWell, most of us don't.\n\n31\n00:01:24.491 --> 00:01:27.528\n>> [LAUGH]\n>> You probably do, Ronnie, and I know I,\n\n32\n00:01:27.528 --> 00:01:29.856\ndo, but, most normal people don't.\n\n33\n00:01:29.856 --> 00:01:33.314\nIn you small home or office type\nenvironments, your little solos,\n\n34\n00:01:33.314 --> 00:01:36.953\nthey might not have Active Directory\nroutes either, but if we don't,\n\n35\n00:01:36.953 --> 00:01:40.005\nwe're in what we would call\na work-through environment.\n\n36\n00:01:41.090 --> 00:01:41.910\nAnd that's fine.\n\n37\n00:01:41.910 --> 00:01:46.205\nIf you only have two or three, or\nfour or five computers and three or\n\n38\n00:01:46.205 --> 00:01:48.829\nfour users, that might be all you need.\n\n39\n00:01:48.829 --> 00:01:51.708\nYou might not need that extra\ninfrastructure for Active Directory.\n\n40\n00:01:51.708 --> 00:01:54.760\nBut let's take a look at what\nthe limitations of that workgroup\n\n41\n00:01:54.760 --> 00:01:55.690\nenvironment are.\n\n42\n00:01:55.690 --> 00:01:57.405\nSo if we can pull up my screen here.\n\n43\n00:01:57.405 --> 00:01:58.924\nI've got a little drawing and\n\n44\n00:01:58.924 --> 00:02:01.672\nhopefully this is a little\nbit of a refresher for you.\n\n45\n00:02:01.672 --> 00:02:05.564\nAt this point you've probably already been\nthrough your core classes like Aplus.\n\n46\n00:02:05.564 --> 00:02:07.561\nYou've watched those in our library.\n\n47\n00:02:07.561 --> 00:02:11.972\nAnd remember, with a work group\neach Windows machine has its own\n\n48\n00:02:11.972 --> 00:02:14.675\nSecurity Account Manager or SAM file.\n\n49\n00:02:14.675 --> 00:02:18.600\nAnd security is all handled\nlocally on that machine.\n\n50\n00:02:18.600 --> 00:02:21.460\nEach machine is responsible for\nits own security.\n\n51\n00:02:21.460 --> 00:02:24.990\nAnd it doesn't trust any other machine's\nsecurity account manager, right?\n\n52\n00:02:24.990 --> 00:02:28.170\nSo if we've got, let's say this was\na little work group environment.\n\n53\n00:02:28.170 --> 00:02:30.734\nI've got three computers,\nI've got three users.\n\n54\n00:02:30.734 --> 00:02:32.986\nAnd I've got a file server up here.\n\n55\n00:02:32.986 --> 00:02:38.216\nAnd this little database or cylinder thing\nis supposed to represent that local.\n\n56\n00:02:38.216 --> 00:02:39.150\nFile, that local database.\n\n57\n00:02:39.150 --> 00:02:43.780\nAnd when you create new users on those\ncomputers, that's where it's stored.\n\n58\n00:02:43.780 --> 00:02:47.680\nAnd when I go to log into this computer\nover here, well it looks in that local san\n\n59\n00:02:47.680 --> 00:02:52.440\nfile for my user name and my password,\nverifies that I typed in the right\n\n60\n00:02:52.440 --> 00:02:56.950\npassword, and allows me to log on if I've\ngot an account there and that's great.\n\n61\n00:02:56.950 --> 00:02:58.130\nBut now if I try to go and\n\n62\n00:02:58.130 --> 00:03:02.210\nreach out to this file server,\nI'm already authenticated.\n\n63\n00:03:02.210 --> 00:03:04.080\nI've got a token that says who I am.\n\n64\n00:03:04.080 --> 00:03:07.440\nIf I try to present that token to\nthat file server, he's going to say,\n\n65\n00:03:07.440 --> 00:03:11.370\nI don't know,\nI don't trust who did this authentication.\n\n66\n00:03:11.370 --> 00:03:15.998\nI'm not going to trust that because I\ndon't trust that SAM file over there.\n\n67\n00:03:15.998 --> 00:03:18.861\nYou don't have an account\nin this SAM file up here,\n\n68\n00:03:18.861 --> 00:03:22.537\nyou're not going to get access to\nresources on that file server.\n\n69\n00:03:22.537 --> 00:03:25.252\nSo now all of a sudden what\nI have to do in a SoHo,\n\n70\n00:03:25.252 --> 00:03:29.256\nis I have to make a second account for\nyou up here on this file server.\n\n71\n00:03:29.256 --> 00:03:31.137\nIf I have a second user\nwith their computer.\n\n72\n00:03:31.137 --> 00:03:32.879\nThey've got an account on their computer.\n\n73\n00:03:32.879 --> 00:03:36.223\nAgain, I'd have to make another account\nfor them up there on that file server.\n\n74\n00:03:36.223 --> 00:03:38.510\nAnd a third account for that third user.\n\n75\n00:03:38.510 --> 00:03:40.750\nAnd every time I hired somebody else,\n\n76\n00:03:40.750 --> 00:03:43.330\nI'd have to make another account\non that file server for them.\n\n77\n00:03:43.330 --> 00:03:45.920\nAnd then what if we had\na second file server?\n\n78\n00:03:45.920 --> 00:03:47.850\nNow all of a sudden,\nI've gotta make an account for\n\n79\n00:03:47.850 --> 00:03:49.620\neverybody on that machine as well.\n\n80\n00:03:49.620 --> 00:03:53.844\nSo the number of accounts that we have to\nsupport for the small number of users,\n\n81\n00:03:53.844 --> 00:03:56.050\nit starts growing very, very fast.\n\n82\n00:03:56.050 --> 00:03:58.670\nAnd the accounts are separate, right.\n\n83\n00:03:58.670 --> 00:04:02.620\nLet's say on this computer my username\nwas Mike and my password was blue.\n\n84\n00:04:02.620 --> 00:04:06.300\nWell when I initially create that account\nup here, I can also do username Mike and\n\n85\n00:04:06.300 --> 00:04:09.950\npassword blue, and things will\nwork out okay for a little while.\n\n86\n00:04:09.950 --> 00:04:12.689\nBut if I change my password\nhere on this local machine.\n\n87\n00:04:12.689 --> 00:04:15.242\nThat doesn't change the password for\nthe account up here, right?\n\n88\n00:04:15.242 --> 00:04:17.563\nThey're still two separate accounts.\n\n89\n00:04:17.563 --> 00:04:22.488\nSo management of those accounts becomes\na little bit, what's a good word for\n\n90\n00:04:22.488 --> 00:04:24.600\nit Ronnie, cumbersome.\n\n91\n00:04:24.600 --> 00:04:26.050\n>> Cumbersome is actually a good word.\n\n92\n00:04:26.050 --> 00:04:28.870\nAnd Microsoft likes to use\nthe term administrative effort.\n\n93\n00:04:28.870 --> 00:04:30.655\nIt becomes a little bit\nmore taxing on them.\n\n94\n00:04:30.655 --> 00:04:31.685\nAdministrative effort.\n\n95\n00:04:31.685 --> 00:04:35.815\nSo you will see stuff like that when you\nstart having multiple accounts you have to\n\n96\n00:04:35.815 --> 00:04:36.433\ndeal with.\n\n97\n00:04:36.433 --> 00:04:39.627\nThe very fact is, in a small environment,\nit's perfectly fine but\n\n98\n00:04:39.627 --> 00:04:43.102\nwhat happens though is that we tend to\nactually move out to just supporting\n\n99\n00:04:43.102 --> 00:04:46.801\nthose small environments and we start\nheading in to environments where we're\n\n100\n00:04:46.801 --> 00:04:50.806\nsupporting let's say ten to 15 or 20 or\neven thousands of computers at one time.\n\n101\n00:04:50.806 --> 00:04:52.200\nAnd so Mike, when we start doing that,\n\n102\n00:04:52.200 --> 00:04:55.218\nwhere does Active Directory really help\nus to fit in, besides the authentication?\n\n103\n00:04:55.218 --> 00:04:55.922\n>> It does, and\n\n104\n00:04:55.922 --> 00:05:00.154\nthat's the scalability that we're gonna\nget by moving to Active Directory.\n\n105\n00:05:00.154 --> 00:05:02.429\nIn that work group environment,\nwe just don't have it.\n\n106\n00:05:02.429 --> 00:05:04.954\nI think Microsoft likes to\nuse the number ten, and\n\n107\n00:05:04.954 --> 00:05:09.004\nthey'll recommend more than ten users,\nyou should move to Active Directory.\n\n108\n00:05:09.004 --> 00:05:12.621\nNow, of course they wanna sell you\nActive Directory and licensing, but\n\n109\n00:05:12.621 --> 00:05:16.651\nyou will find, let's just do the math for\na second, ten computers, ten users,\n\n110\n00:05:16.651 --> 00:05:19.816\neverybody needs access to every\nother machine on the network.\n\n111\n00:05:19.816 --> 00:05:23.935\nThat's one hundred user accounts that\nI'm managing for those ten users.\n\n112\n00:05:23.935 --> 00:05:28.070\nWell, that's where Active Directory\ncomes in and saves the day.\n\n113\n00:05:28.070 --> 00:05:31.760\nInstead of storing those accounts locally,\nwe're gonna setup Active Directory,\n\n114\n00:05:31.760 --> 00:05:36.680\nwe create what we call a domain controller\nand that domain controller has a database\n\n115\n00:05:36.680 --> 00:05:39.880\nwhere I'm gonna create\nthose user accounts.\n\n116\n00:05:39.880 --> 00:05:42.950\nRather than storing them\nlocally on each machine, we're\n\n117\n00:05:42.950 --> 00:05:47.290\ngonna store them in a centralized location\nup there on that domain controller, and\n\n118\n00:05:47.290 --> 00:05:51.700\nall of the computers that are part of\nmy domain trust the domain controller,\n\n119\n00:05:51.700 --> 00:05:56.185\nso when I go to log on, I'm gonna reach\nout and talk to the domain controller\n\n120\n00:05:56.185 --> 00:05:59.105\ninstead of talking to that\nlocal security account manager.\n\n121\n00:05:59.105 --> 00:06:02.125\nAnd that domain controller is\ngonna verify my username and\n\n122\n00:06:02.125 --> 00:06:03.805\nthat I typed in the right password.\n\n123\n00:06:03.805 --> 00:06:06.975\nAnd he's gonna give me my\naccess token back saying okay,\n\n124\n00:06:06.975 --> 00:06:08.551\nI've verified your identity.\n\n125\n00:06:08.551 --> 00:06:12.585\nAnd because all of the other machines on\nthe network trust the domain controller,\n\n126\n00:06:12.585 --> 00:06:16.080\nwhen I go to that file server now and\nsay, hey here's my access token.\n\n127\n00:06:16.080 --> 00:06:18.070\nI wanna get access to that file.\n\n128\n00:06:18.070 --> 00:06:21.560\nIt says, you're Mike Roderick and the\ndomain controller verified you typed in\n\n129\n00:06:21.560 --> 00:06:24.820\nthe right password, then I don't\nhave to worry about doing it again.\n\n130\n00:06:24.820 --> 00:06:28.815\nI trust the domain controller did its job,\nI trust our domain controller and\n\n131\n00:06:28.815 --> 00:06:33.206\nI'll allow you whatever access the file\naccess control list says you should have.\n\n132\n00:06:33.206 --> 00:06:37.738\nSo we're centralizing that authentication\nprocess making it much easier.\n\n133\n00:06:37.738 --> 00:06:39.594\nNow each user has one account.\n\n134\n00:06:39.594 --> 00:06:41.104\nAnd I can go to any machine.\n\n135\n00:06:41.104 --> 00:06:45.208\nIf I go this machine,\nI can use that same account and log on.\n\n136\n00:06:45.208 --> 00:06:48.280\nBecause it's just gonna reach out on the\nnetwork, talk to the main controller for\n\n137\n00:06:48.280 --> 00:06:49.000\nauthentication.\n\n138\n00:06:49.000 --> 00:06:52.363\nI can go to this machine and\nlog on with that same account.\n\n139\n00:06:52.363 --> 00:06:56.923\nSo one account gives me access to any\nmachine that I have rights to log on\n\n140\n00:06:56.923 --> 00:07:00.109\nto and\nany resource that I should have access to.\n\n141\n00:07:00.109 --> 00:07:03.936\nAnd it's not just the centralization\nof the authentication process,\n\n142\n00:07:03.936 --> 00:07:06.498\nit's also the administration\nside of things.\n\n143\n00:07:06.498 --> 00:07:08.889\nIf we take a look back to\nthat work group environment.\n\n144\n00:07:08.889 --> 00:07:12.414\nEvery Windows machine has its\nown local security police, or\n\n145\n00:07:12.414 --> 00:07:16.045\nits own local policy as well\nas a local security policy.\n\n146\n00:07:16.045 --> 00:07:19.645\nAnd if I wanna make configuration changes,\nwell I can go to the machine and\n\n147\n00:07:19.645 --> 00:07:23.375\nI can open up its registry or I can use\none of its GUIs, and I can make a change.\n\n148\n00:07:23.375 --> 00:07:25.215\nOr, I can use that local policy and\n\n149\n00:07:25.215 --> 00:07:28.083\nI can make a change to that\ncomputers configuration.\n\n150\n00:07:28.083 --> 00:07:30.269\nBut it only applies to that one machine.\n\n151\n00:07:30.269 --> 00:07:34.104\nSo if I have four machines,\nI have to do that same change four times.\n\n152\n00:07:34.104 --> 00:07:36.333\nI have to touch each\none of those machines.\n\n153\n00:07:36.333 --> 00:07:40.646\nAnd as a number of machine grows that\nI need to do this for, that becomes,\n\n154\n00:07:40.646 --> 00:07:44.285\nas Ronnie said,\nthat's a lot of administrative overhead.\n\n155\n00:07:44.285 --> 00:07:46.505\nWe like to say you're going\nto wear out your sneaker net.\n\n156\n00:07:46.505 --> 00:07:49.595\nBecause you're running around\nfrom machine to machine.\n\n157\n00:07:49.595 --> 00:07:51.677\nAnd what are the odds of\nme missing one machine,\n\n158\n00:07:51.677 --> 00:07:54.765\nbecause it was off in the corner in\na cubicle and I didn't see it there.\n\n159\n00:07:54.765 --> 00:07:58.714\nOr somebody had take the laptop home and\nit wasn't there when I went around and\n\n160\n00:07:58.714 --> 00:08:03.030\nmade these changes, now I've possibly got\nmachines that are out of compliance with\n\n161\n00:08:03.030 --> 00:08:05.555\nmy company's policy because\nI forgot to do one.\n\n162\n00:08:05.555 --> 00:08:06.769\nOr I made a typo on one and so\n\n163\n00:08:06.769 --> 00:08:09.685\nnow that policy policy is\ndifferent from everybody else's.\n\n164\n00:08:09.685 --> 00:08:12.495\nSo administratively its a lot of work.\n\n165\n00:08:12.495 --> 00:08:15.075\nAgain, active director to the rescue.\n\n166\n00:08:15.075 --> 00:08:17.401\nI can do a group policy\nat the main level and\n\n167\n00:08:17.401 --> 00:08:21.726\nI can apply those configuration changes\nto all the machines on my network, or\n\n168\n00:08:21.726 --> 00:08:25.851\njust a subset of machines, just\nthe machines in the sales department, or\n\n169\n00:08:25.851 --> 00:08:28.635\nall of the users in\nthe research department.\n\n170\n00:08:28.635 --> 00:08:33.323\nBut we can do it from one central location\nand making the change will once, and\n\n171\n00:08:33.323 --> 00:08:38.085\nas long I do it correctly there, it's\ngoing to be applied to all those machines\n\n172\n00:08:38.085 --> 00:08:42.005\nor all those users correctly every time,\nconsistently right?\n\n173\n00:08:42.005 --> 00:08:46.216\nSo another big advantage of Active\nDirectory is that that centralization of\n\n174\n00:08:46.216 --> 00:08:49.124\nthe administration as well\nas the authentication.\n\n175\n00:08:49.124 --> 00:08:49.697\n>> Now Mike,\n\n176\n00:08:49.697 --> 00:08:54.460\nhow does this idea of Active Directory\nreally help us in things like scalability?\n\n177\n00:08:54.460 --> 00:08:59.140\nLet's say that I start off as a company\nthat's fairly small, about 10 users, and\n\n178\n00:08:59.140 --> 00:09:02.220\nall of the sudden in several months here,\nlet's say I go up to a 1,000 users.\n\n179\n00:09:02.220 --> 00:09:05.540\nHow does this active directory really help\nme out in terms of that administrative\n\n180\n00:09:05.540 --> 00:09:06.590\neffort as well?\n\n181\n00:09:06.590 --> 00:09:09.660\n>> That's the beautiful thing about active\ndirectory is that it scales so well.\n\n182\n00:09:09.660 --> 00:09:11.890\nActive directory could be used in\nan environment with 10 users and\n\n183\n00:09:11.890 --> 00:09:14.930\n10 computers,\nI mean it would handle that just fine.\n\n184\n00:09:14.930 --> 00:09:18.485\nBut it can scale up to hundreds\nof thousands of objects\n\n185\n00:09:18.485 --> 00:09:20.025\nif not millions of objects.\n\n186\n00:09:20.025 --> 00:09:23.415\nWe can have Fortune 500 companies\nrun active directory, right?\n\n187\n00:09:23.415 --> 00:09:28.629\nGlobal enterprises run Active Directory,\nso it can scale from that small tiny\n\n188\n00:09:28.629 --> 00:09:33.685\nshop to a massive enterprise that reaches\naround the world without that much\n\n189\n00:09:33.685 --> 00:09:38.995\nI mean it's relatively easy to work with\nonce you, what's a good way to say it?\n\n190\n00:09:38.995 --> 00:09:43.973\nI don't think the administrative overhead\ndoesn't increase as we make those numbers\n\n191\n00:09:43.973 --> 00:09:45.755\nbigger and bigger and bigger.\n\n192\n00:09:45.755 --> 00:09:51.245\nNow one policy that I created to set\nthe screen saver timeout to ten minutes.\n\n193\n00:09:51.245 --> 00:09:54.155\nWell I can apply that to 10 computers as\n\n194\n00:09:54.155 --> 00:09:56.205\neasily as I can apply that\nto 500,000 computers.\n\n195\n00:09:56.205 --> 00:09:59.395\nThere's no difference on my end, I make\nthe policy, I link it to the OU, and\n\n196\n00:09:59.395 --> 00:10:01.845\nwe'll show you how to do that,\nand I'm done.\n\n197\n00:10:01.845 --> 00:10:04.335\nIt doesn't matter to If there's ten or\n10 million computers.\n\n198\n00:10:04.335 --> 00:10:07.115\n>> Yeah, Mike, I think that I like\nthe fact that what we can do,\n\n199\n00:10:07.115 --> 00:10:08.985\nespecially once we get on\nthat domain controller,\n\n200\n00:10:08.985 --> 00:10:11.455\nright, is that that policy\nis created in one place.\n\n201\n00:10:11.455 --> 00:10:15.155\nAnd regardless of how many sites that I\nhave, it can spread all out through that,\n\n202\n00:10:15.155 --> 00:10:18.185\nthroughout the entire company as well,\nwhether it's global or\n\n203\n00:10:18.185 --> 00:10:21.915\nwhether it's local in one particular area,\nit really does help us out,\n\n204\n00:10:21.915 --> 00:10:24.985\nbecause we're actually only making that\nchange one time if we really need to.\n\n205\n00:10:24.985 --> 00:10:28.595\nJust having a great understanding\nof that is really going to\n\n206\n00:10:28.595 --> 00:10:32.545\nhelp us out at the beginning\nof why we want to set this up,\n\n207\n00:10:32.545 --> 00:10:34.145\nby it's got to be more complex than that.\n\n208\n00:10:34.145 --> 00:10:36.667\nThere's got to be several different\ncomponents that we've got to talk about\n\n209\n00:10:36.667 --> 00:10:39.515\nand we're really going to have a great\nunderstanding of active directory.\n\n210\n00:10:39.515 --> 00:10:40.025\n>> There are.\n\n211\n00:10:40.025 --> 00:10:43.185\nWe've got to understand the different\npieces that make up active directory,\n\n212\n00:10:43.185 --> 00:10:45.145\nbecause just to install active directory,\n\n213\n00:10:45.145 --> 00:10:48.875\nthere are going to be some terms in that\nwizard that you've got to understand.\n\n214\n00:10:48.875 --> 00:10:50.785\nSo before we get into that fun stuff and\n\n215\n00:10:50.785 --> 00:10:53.225\nactually get in there and\nstart playing with active directory and\n\n216\n00:10:53.225 --> 00:10:55.605\nget it all set up, and\nsee all the cool things we can do with it,\n\n217\n00:10:55.605 --> 00:10:58.555\nwe're going to go over some terminology\nto make sure we're familiar with that.\n\n218\n00:10:58.555 --> 00:11:00.945\nSo let's start,\nwe'll take a look at my screen here.\n\n219\n00:11:00.945 --> 00:11:04.195\nAnd really when we look at\nactive directory components,\n\n220\n00:11:04.195 --> 00:11:07.325\nwe can kind of break them down\ninto physical and logical.\n\n221\n00:11:07.325 --> 00:11:09.745\nIt's really not a, sometimes it's\nnot quite black and white and\n\n222\n00:11:09.745 --> 00:11:12.835\nthere's really no reason to do\nthis other than for conversation.\n\n223\n00:11:12.835 --> 00:11:16.735\nLike it's easier to break it up and talk\nabout first the physical components and\n\n224\n00:11:16.735 --> 00:11:18.065\nthen the logical components.\n\n225\n00:11:18.065 --> 00:11:20.235\nAnd if we start with\nthe physical components,\n\n226\n00:11:20.235 --> 00:11:24.335\nthe first thing we're going to have\nis the domain controller itself.\n\n227\n00:11:24.335 --> 00:11:26.755\nThis is a server 2012 R Machine,\n\n228\n00:11:26.755 --> 00:11:31.385\nthat I'm going to add the active\ndirectory domain services role to.\n\n229\n00:11:31.385 --> 00:11:35.375\nWe go and we install that role,\nwe configure that role, and\n\n230\n00:11:35.375 --> 00:11:37.115\nwe've made a Domain Controller.\n\n231\n00:11:37.115 --> 00:11:37.695\nIt's that easy.\n\n232\n00:11:37.695 --> 00:11:41.335\nSo, a Domain Controller is\na server that's hosting\n\n233\n00:11:41.335 --> 00:11:43.945\nthe active directory domain services role.\n\n234\n00:11:43.945 --> 00:11:46.765\nNow, once you install active\ndirectory on that machine,\n\n235\n00:11:46.765 --> 00:11:50.555\nwe get a couple of more components\nthat go with Active Directory.\n\n236\n00:11:50.555 --> 00:11:53.055\nOne being the database, right?\n\n237\n00:11:53.055 --> 00:11:57.025\nThere's a database that stores all of\nthe information for Active Directory.\n\n238\n00:11:57.025 --> 00:12:02.165\nThe user accounts that I create, the\ncomputers that I create, or that I join\n\n239\n00:12:02.165 --> 00:12:06.955\nto the domain group policies, replication\npartners, other domain controllers.\n\n240\n00:12:06.955 --> 00:12:09.115\nAll of that stuff has\nto be stored somewhere.\n\n241\n00:12:09.115 --> 00:12:11.175\nAnd it gets stored in this\nactive directory database.\n\n242\n00:12:11.175 --> 00:12:16.265\nSo, that's a physical file that resides on\nthe hard drive of that domain controller.\n\n243\n00:12:16.265 --> 00:12:21.305\nAnd every domain controller\ngets a copy of that database.\n\n244\n00:12:21.305 --> 00:12:22.690\nThat database is known as NTDS.DIT.\nThat's the name of that.\n\n245\n00:12:22.690 --> 00:12:26.761\nBy default it's located SQL and\nWindows ntds, but\n\n246\n00:12:26.761 --> 00:12:32.545\nwe'll see when we go through the wizard\nthat we an actually change that.\n\n247\n00:12:32.545 --> 00:12:33.915\nWe don't have to leave it there,\n\n248\n00:12:33.915 --> 00:12:36.395\nbut that's where you're\ngoing to find it by default.\n\n249\n00:12:36.395 --> 00:12:39.753\nThe other thing we'll get when\nwe install active directory and\n\n250\n00:12:39.753 --> 00:12:42.994\nmake our domain controller is\nthe SYSVOL folder structure.\n\n251\n00:12:42.994 --> 00:12:48.370\nSo this is a folder just like you would\ncreate if you opened up File Explorer,\n\n252\n00:12:48.370 --> 00:12:53.074\nand within this folder we store\nthings like group policy objects,\n\n253\n00:12:53.074 --> 00:12:55.949\nscripts, and a couple of other things.\n\n254\n00:12:55.949 --> 00:12:56.785\nThey'll get put in here.\n\n255\n00:12:56.785 --> 00:12:59.543\nThings we don't want to\nstore in the database, but\n\n256\n00:12:59.543 --> 00:13:04.135\nstill need all the main controllers to\nhave a copy of get stored in SYSVOL.\n\n257\n00:13:04.135 --> 00:13:08.439\nJust like the database, every domain\ncontroller that I create gets a copy of\n\n258\n00:13:08.439 --> 00:13:10.670\nthat sysvol folder structure as well.\n\n259\n00:13:10.670 --> 00:13:15.067\nSo you've got your domain controller,\nand you've got the database itself,\n\n260\n00:13:15.067 --> 00:13:17.341\nas well as the sysvol folder structure.\n\n261\n00:13:17.341 --> 00:13:21.320\n>> Now Mike, when taking a look at these\ndifferent components here, I do see\n\n262\n00:13:21.320 --> 00:13:25.700\nthat you kind of split it up nicely for us\nwhen you talk of this domain controller.\n\n263\n00:13:25.700 --> 00:13:29.770\nBut the domain controller, that's\na term that Microsoft likes to use for\n\n264\n00:13:29.770 --> 00:13:34.730\ntheir main server that houses this\nActive Directory and allows us to\n\n265\n00:13:34.730 --> 00:13:38.315\ndo that authentication and authorization\nthat Mike was describing for us.\n\n266\n00:13:38.315 --> 00:13:41.435\nNow, you may actually\nrun into other types of,\n\n267\n00:13:41.435 --> 00:13:43.735\nI wouldn't call them authentication\nservers, that are out there.\n\n268\n00:13:43.735 --> 00:13:45.245\nBut you might not hear that term, so\n\n269\n00:13:45.245 --> 00:13:48.575\nwhen we talk about it remember that\nwe're really focusing in on Microsoft.\n\n270\n00:13:48.575 --> 00:13:52.341\nBut you may hear other terms as you go\nonto Linux realms and some different ones.\n\n271\n00:13:52.341 --> 00:13:55.405\nSo just kind of be aware that you might\nhear some of that, but it kind of refers\n\n272\n00:13:55.405 --> 00:14:00.175\nto that same idea of that centralized\nadministration and authentication as well.\n\n273\n00:14:00.175 --> 00:14:03.815\nNow just because we understand at least\nthose components right there that we have,\n\n274\n00:14:03.815 --> 00:14:06.295\nwe still need to actually talk\nabout a few other components.\n\n275\n00:14:06.295 --> 00:14:08.765\nAnd you talked about the difference\nbetween the physical and\n\n276\n00:14:08.765 --> 00:14:09.565\nthe logical as well.\n\n277\n00:14:09.565 --> 00:14:12.415\n>> Absolutely, and let's take a look at\nthat database before we get too far away\n\n278\n00:14:12.415 --> 00:14:15.495\nbut this kind, Ronnie,\nis logical as well as physical.\n\n279\n00:14:15.495 --> 00:14:18.675\nThe file is considered a physical object.\n\n280\n00:14:18.675 --> 00:14:21.248\nBut there is a logical\ndivision within that file.\n\n281\n00:14:21.248 --> 00:14:23.592\nAnd we just want to get these\nterms out to you right now.\n\n282\n00:14:23.592 --> 00:14:28.565\nWe'll talk all about the reasoning\nbetween these as well.\n\n283\n00:14:28.565 --> 00:14:31.805\nBut the database, like I said,\nis a single file, NTDS.dit.\n\n284\n00:14:31.805 --> 00:14:37.285\nBut that database is divided up into\nwhat we call logic vehicle partitions,\n\n285\n00:14:37.285 --> 00:14:42.395\nand three of them by default and we can\neven create additional ones if we need to,\n\n286\n00:14:42.395 --> 00:14:43.915\nand that is another thing we will cover,\n\n287\n00:14:43.915 --> 00:14:45.855\nhow to do that and\nwhy we would want to do that.\n\n288\n00:14:45.855 --> 00:14:47.845\nBut lets talk about\nthe three we get by default,\n\n289\n00:14:47.845 --> 00:14:52.010\nthere is a high level over view here,\nthere is your scheme of partition,\n\n290\n00:14:52.010 --> 00:14:55.650\nthere's your configuration partition,\nand then there's the domain partition.\n\n291\n00:14:55.650 --> 00:15:00.960\nThe schema partition stores\nsomething known as the schema and\n\n292\n00:15:00.960 --> 00:15:04.840\nwe'll define that here in just a second\nbecause that is one of my logical objects.\n\n293\n00:15:04.840 --> 00:15:07.500\nSo the schema partition\ncontains the schema,\n\n294\n00:15:07.500 --> 00:15:10.611\nquick definition because I hate saying\nwe'll tell you what that means later.\n\n295\n00:15:10.611 --> 00:15:11.976\n>> [LAUGH]\n>> It's blueprints for\n\n296\n00:15:11.976 --> 00:15:14.055\nthe objects that I can\ncreate in Active Directory.\n\n297\n00:15:14.055 --> 00:15:16.585\nWe also had the the configuration\npartition, and\n\n298\n00:15:16.585 --> 00:15:20.015\nthis is where we store information\nabout the infrastructure itself,\n\n299\n00:15:20.015 --> 00:15:22.655\nlike what domain controllers you have.\n\n300\n00:15:22.655 --> 00:15:24.667\nWhat domains you have within your forest.\n\n301\n00:15:24.667 --> 00:15:27.537\nMore terms that we're going\nto define in a minute,\n\n302\n00:15:27.537 --> 00:15:31.361\nbut basically information about\nthe topology of your enterprise.\n\n303\n00:15:31.361 --> 00:15:33.591\nAnd then you've got the domain partition.\n\n304\n00:15:33.591 --> 00:15:37.277\nAnd the domain partition is where\nWhere all of the domain specific\n\n305\n00:15:37.277 --> 00:15:38.960\nobjects are gonna be stored.\n\n306\n00:15:38.960 --> 00:15:41.696\nWhen you make a new user account\nthat's where it's going,\n\n307\n00:15:41.696 --> 00:15:43.260\nis in that domain partition.\n\n308\n00:15:43.260 --> 00:15:47.550\nWhen you join a computer to the domain,\nthat computer account that gets\n\n309\n00:15:47.550 --> 00:15:51.030\ncreated is in that domain partition,\nOUs, things like that.\n\n310\n00:15:51.030 --> 00:15:55.310\nAnything that's specific to this domain\ngets stored in the domain partition.\n\n311\n00:15:55.310 --> 00:15:57.970\nAnd we'll talk a little bit more about\nthose partitions, cuz they do have\n\n312\n00:15:57.970 --> 00:16:02.490\nan important role, and we've gotta\nunderstand the way they replicate as well.\n\n313\n00:16:02.490 --> 00:16:07.180\nBut for now we're just gonna say\nwe've got a database called NTDS.DIT.\n\n314\n00:16:07.180 --> 00:16:09.700\nIt's divided up into\nthree logical partitions.\n\n315\n00:16:09.700 --> 00:16:12.298\nThe scheme, the configuration,\nand the domain partition.\n\n316\n00:16:12.298 --> 00:16:16.326\nAnd every domain controller\ngets a copy of that database.\n\n317\n00:16:16.326 --> 00:16:19.420\n>> Now Mike, I also realized something\nbecause I skipped right over and\n\n318\n00:16:19.420 --> 00:16:21.565\ntried to head us in\nthe logical division so far.\n\n319\n00:16:21.565 --> 00:16:24.348\nBut we have another physical\ncomponent that we need to refer to,\n\n320\n00:16:24.348 --> 00:16:25.541\nwhich is the idea of sites.\n\n321\n00:16:25.541 --> 00:16:28.180\n>> We do need to talk about sites and\nI'm going to\n\n322\n00:16:28.180 --> 00:16:32.660\nscale my drawing back just a wee bit so\nI can get it all on one screen here.\n\n323\n00:16:32.660 --> 00:16:38.825\nAnd sites are a little tricky\nto comprehend, I think at first.\n\n324\n00:16:38.825 --> 00:16:40.275\n>> [LAUGH]\n>> But, once you get it,\n\n325\n00:16:40.275 --> 00:16:42.343\nit's like, well that makes sense.\n\n326\n00:16:42.343 --> 00:16:45.268\nBut a site is a.\n\n327\n00:16:45.268 --> 00:16:46.081\nLet's back up.\n>> [LAUGH]\n\n328\n00:16:46.081 --> 00:16:48.101\n>> A domain is a logical thing.\n\n329\n00:16:48.101 --> 00:16:51.770\nWe haven't talked about it yet, but\nwe've mentioned the term domain.\n\n330\n00:16:51.770 --> 00:16:54.220\nIt's a logical structure.\n\n331\n00:16:54.220 --> 00:16:56.130\nMeaning that I can't go and touch it.\n\n332\n00:16:56.130 --> 00:17:00.097\nMy domain might include all the computers\nand users here in this building, or\n\n333\n00:17:00.097 --> 00:17:02.660\nmaybe the three or\nfour buildings here in town, or\n\n334\n00:17:02.660 --> 00:17:05.301\nI might have offices all around the globe,\nright.\n\n335\n00:17:05.301 --> 00:17:07.459\nThey could all be part of the same domain.\n\n336\n00:17:07.459 --> 00:17:10.878\nI could have a user here in Gainesville,\nFlorida and\n\n337\n00:17:10.878 --> 00:17:15.010\nanother one in Tokyo, Japan and\nstill part of the same domain.\n\n338\n00:17:15.010 --> 00:17:18.540\nSo a domain is a logical thing,\nnot a physical thing.\n\n339\n00:17:18.540 --> 00:17:23.213\nBut, let's say I do have an office here\nin Gainesville and one in Tokyo, and\n\n340\n00:17:23.213 --> 00:17:26.221\nI've got domain controllers\nin each location.\n\n341\n00:17:26.221 --> 00:17:30.545\nWhen that user in Tokyo goes to log on,\nthey could talk to the domain controller\n\n342\n00:17:30.545 --> 00:17:33.246\nthere in Tokyo, or\nthe one here in Gainesville.\n\n343\n00:17:33.246 --> 00:17:35.810\nThey're all part of the same domain,\nit doesn't matter.\n\n344\n00:17:35.810 --> 00:17:39.615\nBut wouldn't it make sense to use the\ndomain controller that's right there in\n\n345\n00:17:39.615 --> 00:17:41.586\nthe same physical location as the user?\n\n346\n00:17:41.586 --> 00:17:45.713\nWhy wait for that authentication traffic\nto wrap halfway around the world and\n\n347\n00:17:45.713 --> 00:17:48.389\nthen come back before the user can log on,\nright?\n\n348\n00:17:48.389 --> 00:17:54.525\nSites allow me to define my physical\nboundaries of active directory, right.\n\n349\n00:17:54.525 --> 00:17:57.753\nThey allow me to say all right,\nluck of the drawing here.\n\n350\n00:17:57.753 --> 00:17:58.960\nI've got an office in Gainesville.\n\n351\n00:17:58.960 --> 00:18:00.261\nI've got one in London.\n\n352\n00:18:00.261 --> 00:18:01.723\nI've got one in New York City.\n\n353\n00:18:01.723 --> 00:18:04.640\nAll part of itpro.tv.\n\n354\n00:18:04.640 --> 00:18:07.560\nBut Gainesville is it's own site.\n\n355\n00:18:07.560 --> 00:18:09.480\nLondon is it's own site.\n\n356\n00:18:09.480 --> 00:18:12.230\nNew York City is it's own site.\n\n357\n00:18:12.230 --> 00:18:16.640\nAnd by using sites, another topic\nwe're gonna dive much deeper into.\n\n358\n00:18:16.640 --> 00:18:19.120\nBut two of the big advantages of sites,\n\n359\n00:18:19.120 --> 00:18:23.380\nit allows me to do what we\ncall localization of services.\n\n360\n00:18:23.380 --> 00:18:27.055\nWhere if I'm in Gainesville, I've got\ndomain controllers at each location.\n\n361\n00:18:27.055 --> 00:18:29.167\nGainesville, London, New York City.\n\n362\n00:18:29.167 --> 00:18:31.119\nBut if a user's in the Gainesville office,\n\n363\n00:18:31.119 --> 00:18:33.612\ntalk to the domain controller\nthat's in Gainesville.\n\n364\n00:18:33.612 --> 00:18:35.278\nIf a user's in the Gainesville office,\n\n365\n00:18:35.278 --> 00:18:37.880\ncheck your email with the mail\nserver that's in Gainesville.\n\n366\n00:18:37.880 --> 00:18:40.535\nDon't reach out and\ntalk to the mail server that's in London.\n\n367\n00:18:40.535 --> 00:18:44.005\nEither one of them can answer your\nquestion, but it would make more sense,\n\n368\n00:18:44.005 --> 00:18:46.210\nand it would be faster and\nbetter performance,\n\n369\n00:18:46.210 --> 00:18:49.149\nif you use the one that's in\nthe same physical location as you.\n\n370\n00:18:49.149 --> 00:18:51.716\nSo, there's many different\nsite aware applications,\n\n371\n00:18:51.716 --> 00:18:54.715\nexchange being one of them,\nactive directory being another one.\n\n372\n00:18:54.715 --> 00:18:58.329\nYou know that can take advantage\nof science if we define them,\n\n373\n00:18:58.329 --> 00:19:00.425\nI can now localize those services.\n\n374\n00:19:00.425 --> 00:19:03.685\nSites also allow me to\ncontrol replication.\n\n375\n00:19:03.685 --> 00:19:07.825\nAnother topic that we've gotta spend a lot\nmore time on, but just the high level\n\n376\n00:19:07.825 --> 00:19:11.590\noverview to make it controllers\nhave to share their information.\n\n377\n00:19:11.590 --> 00:19:13.724\nIf I've got multiple domain controllers,\n\n378\n00:19:13.724 --> 00:19:17.529\nif I make a new user account on one of\nthem, the other domain controllers need to\n\n379\n00:19:17.529 --> 00:19:20.197\nknow about that new user\naccount that is just created.\n\n380\n00:19:20.197 --> 00:19:23.258\nSo that's called replication,\nsharing that information.\n\n381\n00:19:23.258 --> 00:19:25.150\nWell they replicate a lot.\n\n382\n00:19:25.150 --> 00:19:28.190\nThey can replicate very fast, but\n\n383\n00:19:28.190 --> 00:19:31.090\nmy bandwidth between here\nin London is limited.\n\n384\n00:19:31.090 --> 00:19:33.610\nAnd I might not want all\nthat replication occurring.\n\n385\n00:19:33.610 --> 00:19:35.410\nThe two domain controllers\nhere in Gainesville,\n\n386\n00:19:35.410 --> 00:19:36.870\nthey can replicate all they want.\n\n387\n00:19:36.870 --> 00:19:40.574\nWe're on a gigabit network, they can\ndo all the replication as fast and\n\n388\n00:19:40.574 --> 00:19:41.882\nas often as they need to.\n\n389\n00:19:41.882 --> 00:19:45.761\nBut when I replicate to that domain\ncontroller in London that's another story.\n\n390\n00:19:45.761 --> 00:19:48.490\nWell if I don't have sights,\nI can't control it.\n\n391\n00:19:48.490 --> 00:19:52.338\nThey'll replicate just like it's here in\nthe same building, they'll just replicate\n\n392\n00:19:52.338 --> 00:19:55.155\nout to London all the time, and\nend up saturating my bandwidth.\n\n393\n00:19:55.155 --> 00:19:58.596\nSo, if I use sites, I can tell\nmy domain controller, hey, look,\n\n394\n00:19:58.596 --> 00:20:02.652\nreplicate here in Gainesville all you\nwant, but only replicate with London in\n\n395\n00:20:02.652 --> 00:20:06.110\nthe middle of the night, or\nevery three hours, or whatever it is.\n\n396\n00:20:06.110 --> 00:20:09.350\nAnd we'll be able to talk about\nthose options as well as we\n\n397\n00:20:09.350 --> 00:20:10.690\ngo through this course.\n\n398\n00:20:10.690 --> 00:20:16.990\nBut so sites allow me to define my\nphysical boundaries of active directory.\n\n399\n00:20:16.990 --> 00:20:22.130\nWhat's a good way to say this, they\nallow me to do the service localization,\n\n400\n00:20:22.130 --> 00:20:24.674\nas well as control that replication.\n\n401\n00:20:24.674 --> 00:20:28.331\nAnd that's most of the that's what I would\ncall the physical components of active\n\n402\n00:20:28.331 --> 00:20:28.917\ndirectory.\n\n403\n00:20:28.917 --> 00:20:32.643\n>> All right so Mike help me to\nunderstand here just briefly again so\n\n404\n00:20:32.643 --> 00:20:34.300\nI don't get this confused.\n\n405\n00:20:34.300 --> 00:20:35.531\nWith sites right?\n\n406\n00:20:35.531 --> 00:20:38.479\nI'm not having to define a domain and\nat each site.\n\n407\n00:20:38.479 --> 00:20:40.801\nI can actually have multiple\nsites in one domain.\n\n408\n00:20:40.801 --> 00:20:42.792\n>> Mm-hm.\n>> But I shouldn't take, let's say,\n\n409\n00:20:42.792 --> 00:20:44.633\nmultiple domains, and put it in one site.\n\n410\n00:20:44.633 --> 00:20:45.446\nIs that what you're saying?\n[LAUGH]\n\n411\n00:20:45.446 --> 00:20:45.980\n>> You know, you can.\n\n412\n00:20:45.980 --> 00:20:47.582\nIt gets a little twisty.\n\n413\n00:20:47.582 --> 00:20:48.324\n>> Right.\n>> But it is allowed.\n\n414\n00:20:48.324 --> 00:20:49.347\n>> Right, okay.\n>> It is allowed.\n\n415\n00:20:49.347 --> 00:20:51.297\nLike, I might have two domains.\n\n416\n00:20:51.297 --> 00:20:55.546\nI met have itpro.tv, and lab.itpro.tv.\n\n417\n00:20:55.546 --> 00:20:58.587\n>> And I might have users\nthat work in this building.\n\n418\n00:20:58.587 --> 00:21:00.315\nSome of them log onto.\n\n419\n00:21:00.315 --> 00:21:05.300\nITPro.tv, others log into lab.itpro.tv and\nso I can actually end\n\n420\n00:21:05.300 --> 00:21:10.460\nup with a site that\ncrosses domain boundaries.\n\n421\n00:21:10.460 --> 00:21:14.360\nIt's a little twisty to try\nto think about that, but\n\n422\n00:21:14.360 --> 00:21:19.730\nthere are times that I might wanna apply\nsettings to a site rather than a domain.\n\n423\n00:21:19.730 --> 00:21:23.645\nLike I said, what if, let's say,\nwe've got that office in London and\n\n424\n00:21:23.645 --> 00:21:26.660\nthey use I'm trying to think\nof a good example Ronnie.\n\n425\n00:21:26.660 --> 00:21:30.355\nMaybe they use, we used to say stuff\nlike tone dialing versus pulse dialing.\n\n426\n00:21:30.355 --> 00:21:31.005\n>> Right.\n[LAUGH]\n\n427\n00:21:31.005 --> 00:21:31.505\n>> Right?\n\n428\n00:21:31.505 --> 00:21:32.122\n[LAUGH] And so\n\n429\n00:21:32.122 --> 00:21:36.014\nobviously that's not much the case\nanymore, but let's say that in London\n\n430\n00:21:36.014 --> 00:21:39.720\nthey use pulse type dialing and\nI need to change those settings no matter\n\n431\n00:21:39.720 --> 00:21:43.611\nwhat the domain they're a part of.\nSome of the people in London are part of\n\n432\n00:21:43.611 --> 00:21:46.991\nlab.itpro.tv.\nSome of them are a part of ITPro.TV.\n\n433\n00:21:46.991 --> 00:21:49.604\nI could apply that setting to the London\n\n434\n00:21:49.604 --> 00:21:54.592\nsite itself and it would apply to all\nusers whether they're in ITPro.TV or\n\n435\n00:21:54.592 --> 00:21:57.930\nLab.ITPro.TV.\nSo the twisty thing, think about is a site\n\n436\n00:21:57.930 --> 00:22:02.940\ncan contain more than one domain but\na domain can only be part.\n\n437\n00:22:02.940 --> 00:22:03.960\nActually that's not true.\n\n438\n00:22:03.960 --> 00:22:04.800\nI take that back.\n\n439\n00:22:04.800 --> 00:22:10.560\nI can have multiple sites in a domain as\nwell as multiple domains in a site yes.\n\n440\n00:22:10.560 --> 00:22:12.990\n>> I didn't mean to take us\noff on that rabbit trail.\n\n441\n00:22:12.990 --> 00:22:14.340\nThat ended up happening.\n\n442\n00:22:14.340 --> 00:22:17.220\nBut the overall idea though\nis remember that for us,\n\n443\n00:22:17.220 --> 00:22:21.351\nwe need to have that terminology fairly\nunderstandable at this point too.\n\n444\n00:22:21.351 --> 00:22:26.087\nSo, the physical components,\nremember the idea of sights, or sites, and\n\n445\n00:22:26.087 --> 00:22:29.640\nof course, the database itself,\nand the small folder.\n\n446\n00:22:29.640 --> 00:22:30.190\nMake sure we understand that, too.\n\n447\n00:22:30.190 --> 00:22:34.690\nNow, we do need to go over some of the\nlogical topics that you're talking about,\n\n448\n00:22:34.690 --> 00:22:37.020\nand let's go over to that big term again.\n\n449\n00:22:37.020 --> 00:22:38.437\nThe term domain.\n\n450\n00:22:38.437 --> 00:22:41.017\nSo the way that you were\ndescribing it Mike,\n\n451\n00:22:41.017 --> 00:22:45.433\nit sounds like a domain is more of\nan administrative boundary that we have.\n\n452\n00:22:45.433 --> 00:22:46.849\nAnd we're actually in control of that.\n\n453\n00:22:46.849 --> 00:22:48.103\nDoes that sound fair?\n\n454\n00:22:48.103 --> 00:22:52.121\n>> It does.\nAnd it's a great way to describe a domain.\n\n455\n00:22:52.121 --> 00:22:55.256\nIt is a, use that term again,\nI like the way you put that.\n\n456\n00:22:55.256 --> 00:22:56.717\n>> [LAUGH]\n>> You okay?\n\n457\n00:22:56.717 --> 00:22:57.739\n>> Yeah sure.\n\n458\n00:22:57.739 --> 00:22:59.110\nNo, no, say it again, I forgot it.\n\n459\n00:22:59.110 --> 00:23:01.268\n>> Administrative boundary.\n\n460\n00:23:01.268 --> 00:23:02.940\nHow's that?\n>> Administrative boundary.\n\n461\n00:23:02.940 --> 00:23:05.320\nThere we go,\nI like the way you put that, yes.\n\n462\n00:23:05.320 --> 00:23:07.220\nBut it is It's an administrative boundary.\n\n463\n00:23:07.220 --> 00:23:09.809\nIt is a logical thing, as I just said.\n\n464\n00:23:09.809 --> 00:23:14.961\nThat domain could encompass this one\nbuilding but I could have offices\n\n465\n00:23:14.961 --> 00:23:20.823\nall around the world and it would still,\ncould still be part of a single domain.\n\n466\n00:23:20.823 --> 00:23:24.827\nThe domain is the Context\nthat we create our objects.\n\n467\n00:23:24.827 --> 00:23:29.182\nWhen we create a user, when we create\na computer account, when we create an OU,\n\n468\n00:23:29.182 --> 00:23:32.050\nwe're doing that all within\nthat domain context.\n\n469\n00:23:32.050 --> 00:23:35.180\nRemember it gets stored in\nthat domain partition in that,\n\n470\n00:23:35.180 --> 00:23:37.260\nActive Directory database.\n\n471\n00:23:37.260 --> 00:23:40.305\nA domain is also a type\nof replication boundary.\n\n472\n00:23:40.305 --> 00:23:46.971\nAs I said, the users that I create\nget stored in that domain partition.\n\n473\n00:23:46.971 --> 00:23:49.150\nAnd if I have three domain controllers.\n\n474\n00:23:49.150 --> 00:23:52.320\nBut when I go to one domain controller,\nand I open up my utilities and I create\n\n475\n00:23:52.320 --> 00:23:56.420\na new user account, it has to replicate\nto the other two domain controllers.\n\n476\n00:23:56.420 --> 00:23:58.390\nBut what if I have a second domain, right?\n\n477\n00:23:58.390 --> 00:24:02.730\nThat user doesn't replicate to those\ndomain controllers in that second domain.\n\n478\n00:24:02.730 --> 00:24:06.350\nSo that domain partition replicates\nto all the domain controllers\n\n479\n00:24:06.350 --> 00:24:07.770\nwithin that boundary.\n\n480\n00:24:07.770 --> 00:24:09.500\nAnd then you'll see they,\nthey use a triangle.\n\n481\n00:24:09.500 --> 00:24:10.960\nIf we take a look at my screen here,\n\n482\n00:24:10.960 --> 00:24:15.255\na triangle is the typical way\nthat will draw out a domain.\n\n483\n00:24:15.255 --> 00:24:19.205\nAnd so that triangle becomes\nthat boundary if you will.\n\n484\n00:24:19.205 --> 00:24:21.895\nSo it's a replication boundary,\n\n485\n00:24:21.895 --> 00:24:25.985\nit's a security boundary of sorts\ndepending on how we're looking at it.\n\n486\n00:24:25.985 --> 00:24:31.905\nOur domain admins, this is gonna be the\nuber account for Active Directory domain.\n\n487\n00:24:31.905 --> 00:24:36.100\nIf you're a Linux person, you can equate\nthis to like that root to count right.\n\n488\n00:24:36.100 --> 00:24:37.478\nThey can do everything.\n\n489\n00:24:37.478 --> 00:24:42.494\nThey have full control over the entire\ndomain, but nothing outside of the domain.\n\n490\n00:24:42.494 --> 00:24:46.382\nIn an Enterprise we're gonna see that\nwe might have more than one domain and\n\n491\n00:24:46.382 --> 00:24:49.720\na lot of people think the domain\nadmin is the account.\n\n492\n00:24:49.720 --> 00:24:54.540\nWell it is within that domain, but he has\nno rights outside of that domain, right.\n\n493\n00:24:54.540 --> 00:24:57.840\nThere's actually another account\nthat we'll talk more about,\n\n494\n00:24:57.840 --> 00:25:01.740\nthe Enterprise admin that has access\nto all domains within my organization.\n\n495\n00:25:01.740 --> 00:25:07.613\nSo the domain, again,\nit's a logical boundary or a logical unit.\n\n496\n00:25:07.613 --> 00:25:11.576\nWe create a domain by installing\nActive Directory on a server.\n\n497\n00:25:11.576 --> 00:25:14.594\nThat's how you set your domain\nup when you first start.\n\n498\n00:25:14.594 --> 00:25:18.320\nAnd it is the context that we\ncreate all of our objects in.\n\n499\n00:25:18.320 --> 00:25:22.574\nOur users and our computers and\nour groups and our printers,\n\n500\n00:25:22.574 --> 00:25:27.338\nand our GPO's, all of that stuff\nis contained within that domain.\n\n501\n00:25:27.338 --> 00:25:30.853\n>> Now Mike, I know that there's a larger\nunit than just a domain just from hearing\n\n502\n00:25:30.853 --> 00:25:31.543\nwhat you said.\n\n503\n00:25:31.543 --> 00:25:34.986\nSo, help us out with this term that we\nalso find in Microsoft that they call\n\n504\n00:25:34.986 --> 00:25:35.497\na Forest.\n\n505\n00:25:35.497 --> 00:25:38.121\n>> A Forest is the entire enterprise,\n\n506\n00:25:38.121 --> 00:25:42.764\nit's everything that's under\none administrative control.\n\n507\n00:25:42.764 --> 00:25:46.863\nWhen you create your very first domain,\nlet's say we were in a SoHo or\n\n508\n00:25:46.863 --> 00:25:51.260\na Work group environment and\ndecide you know what, I've got 11 users.\n\n509\n00:25:51.260 --> 00:25:53.907\nMicrosoft said anything after\nten I've gotta go to a domain.\n\n510\n00:25:53.907 --> 00:25:54.581\nNo I'm just kidding.\n\n511\n00:25:54.581 --> 00:25:55.844\n>> [LAUGH]\n>> But\n\n512\n00:25:55.844 --> 00:25:58.573\nlet's say we decide to move\ninto that domain environment.\n\n513\n00:25:58.573 --> 00:26:03.133\nWell we're gonna take a server and we're\ngonna install Active Directory on it and\n\n514\n00:26:03.133 --> 00:26:05.590\nwe're gonna create our very first domain.\n\n515\n00:26:05.590 --> 00:26:09.660\nAnd when you do that,\nyou're also gonna create you forest and\n\n516\n00:26:09.660 --> 00:26:14.050\nthe forest that I represent with\nthis box around the entire thing.\n\n517\n00:26:14.050 --> 00:26:16.307\nThat is another type of boundary.\n\n518\n00:26:16.307 --> 00:26:19.720\nThis is a definitely a security boundary.\n\n519\n00:26:19.720 --> 00:26:22.890\nWe've got those enterprise\nadmins that I mentioned.\n\n520\n00:26:22.890 --> 00:26:28.821\nThese are the enterprise admins have\nfull control over the entire forest.\n\n521\n00:26:28.821 --> 00:26:31.114\nIf we had more than one domain in here,\n\n522\n00:26:31.114 --> 00:26:34.854\nthey'd have administrative\nrights in all of those domains.\n\n523\n00:26:34.854 --> 00:26:39.282\nSo, the forest is a security boundary and\nthe fact that I've got the enterprise\n\n524\n00:26:39.282 --> 00:26:42.654\nadmins, who can administer\nanything in the entire forest,\n\n525\n00:26:42.654 --> 00:26:46.686\nit's also security boundary in the face\nthat nothing outside the forest\n\n526\n00:26:46.686 --> 00:26:50.885\nhas any access to anything inside\nthe forest without my explicit consent.\n\n527\n00:26:50.885 --> 00:26:52.850\nIn other words, if I don't do anything,\n\n528\n00:26:52.850 --> 00:26:56.684\nnothing outside the Forest is gonna get\naccess to any resources inside of there.\n\n529\n00:26:56.684 --> 00:26:59.200\nSo it's that security\nperimeter that we have.\n\n530\n00:26:59.200 --> 00:27:04.320\nAnd there's some things that are shared\nbetween all of the domains in the Forest.\n\n531\n00:27:04.320 --> 00:27:11.150\nThe Enterprise admin group is located in\nthat very first domain that you create.\n\n532\n00:27:11.150 --> 00:27:11.660\nAll right.\n\n533\n00:27:11.660 --> 00:27:13.568\nAnd they have enterprise-wide rights.\n\n534\n00:27:13.568 --> 00:27:16.856\nMeans they get to have administrative\naccess to all the domains.\n\n535\n00:27:16.856 --> 00:27:21.519\nThe schema, which we're gonna talk about\nin a little bit is also shared by all\n\n536\n00:27:21.519 --> 00:27:22.967\ndomains in the forest.\n\n537\n00:27:22.967 --> 00:27:28.013\nSo on the exam or when you're\nstudying up for this, usually they'll\n\n538\n00:27:28.013 --> 00:27:33.941\ndefine a forest as my enterprise that\nshares common administration and schema.\n\n539\n00:27:33.941 --> 00:27:37.123\nThat's Microsoft's definition for\na forest there.\n\n540\n00:27:37.123 --> 00:27:39.744\n>> Now, Mike,\nwhen we start talking about this idea,\n\n541\n00:27:39.744 --> 00:27:41.365\nhow do we keep it in that forest?\n\n542\n00:27:41.365 --> 00:27:43.720\nWhat happens if, like what you\nwere saying a little bit earlier.\n\n543\n00:27:43.720 --> 00:27:46.810\nWe have itpro.tv and we have lab.itpro.tv.\n\n544\n00:27:46.810 --> 00:27:50.680\nIs that what makes them into that forest\nis that sharing of that domain name?\n\n545\n00:27:50.680 --> 00:27:52.390\n>> Absolutely.\nWell, it's kind of.\n\n546\n00:27:52.390 --> 00:27:53.591\nIt does both, right?\n\n547\n00:27:53.591 --> 00:27:56.075\nSo, let's say as we grow, we decide.\n\n548\n00:27:56.075 --> 00:27:59.450\nI tell you, most organizations,\nthis is all you're going to see.\n\n549\n00:27:59.450 --> 00:28:03.760\nA single domain within that forest and\nthat's all you need.\n\n550\n00:28:03.760 --> 00:28:08.257\nThere's got to be a good reason to start\ngrowing and adding additional domains.\n\n551\n00:28:08.257 --> 00:28:12.863\nWe'll talk about some of those later on,\nbut as I grow,\n\n552\n00:28:12.863 --> 00:28:16.986\nas Ronnie said,\nI might add additional domains.\n\n553\n00:28:16.986 --> 00:28:20.051\nAnd I'll scroll just a little bit so\nwe can see that whole drawing there.\n\n554\n00:28:20.051 --> 00:28:21.910\nSo, we started out with IT Pro.\n\n555\n00:28:21.910 --> 00:28:23.260\nOne thing I didn't mention.\n\n556\n00:28:23.260 --> 00:28:26.351\nYour forced name comes\nfrom that first domain.\n\n557\n00:28:26.351 --> 00:28:30.038\nSo my very first domain was itpro.tv,\n\n558\n00:28:30.038 --> 00:28:34.070\nmy forest then is also known as itpro.tv.\n\n559\n00:28:34.070 --> 00:28:38.462\n[COUGH] That first domain is known\nas my forest root domain, and\n\n560\n00:28:38.462 --> 00:28:41.690\nit is a special domain in the forest.\n\n561\n00:28:41.690 --> 00:28:46.385\nNow as we add additional domains,\nif we create a second domain.\n\n562\n00:28:46.385 --> 00:28:50.015\nAnd we call it lab.itpro.tv.\n\n563\n00:28:50.015 --> 00:28:53.435\nWell, that is what we call\na contiguous name space.\n\n564\n00:28:53.435 --> 00:28:57.899\nNotice how the second domain, what we\nare going to call the child domain,\n\n565\n00:28:57.899 --> 00:29:02.726\ntook it's name lab and just tacked it\nonto the beginning of that parent domain.\n\n566\n00:29:02.726 --> 00:29:09.366\nLab.ITpro.TV, Lab.IT.TV could have\nits own children or child domains.\n\n567\n00:29:09.366 --> 00:29:11.991\nAU.lab.ITpro.TV.\n\n568\n00:29:11.991 --> 00:29:14.613\nEU.lab.ITpro.TV.\n\n569\n00:29:14.613 --> 00:29:17.121\nSo you see how those names\nare building on each other, right?\n\n570\n00:29:17.121 --> 00:29:20.674\nWe just took AU,\ntacked it in the front of its parent.\n\n571\n00:29:20.674 --> 00:29:25.630\nThat's what we call a contiguous\nnamespace and in our forest,\n\n572\n00:29:25.630 --> 00:29:29.010\nthis is known as a domain tree, all right.\n\n573\n00:29:29.010 --> 00:29:30.990\nNow this is a tree, all right?\n\n574\n00:29:30.990 --> 00:29:32.980\nIt's just a tree of one.\n\n575\n00:29:32.980 --> 00:29:36.550\nIt's a short, little, stubby tree,\nright, but it is still a tree.\n\n576\n00:29:36.550 --> 00:29:40.919\nBut those trees can grow and\ngrow as we add more in domains.\n\n577\n00:29:40.919 --> 00:29:43.588\nIf they have a a contiguous name space.\n\n578\n00:29:43.588 --> 00:29:47.400\nNow Ronnie we don't always add\ndomains with the same name like that.\n\n579\n00:29:47.400 --> 00:29:50.260\n>> Okay.\n>> We sometimes we can go with what we\n\n580\n00:29:50.260 --> 00:29:54.150\nhave a situation where we have\nmultiple trees within our forest.\n\n581\n00:29:54.150 --> 00:29:56.163\nThis would be a forest of one tree.\n\n582\n00:29:56.163 --> 00:30:00.297\nThis is a forest of one tree, a short\nlittle stubby tree, and this, we're now\n\n583\n00:30:00.297 --> 00:30:04.515\nstarting to look a little bit more like\na forest because we have multiple trees.\n\n584\n00:30:04.515 --> 00:30:09.006\nAll right, so ITPro.tv,\nlab.ITPro.tv, eu and\n\n585\n00:30:09.006 --> 00:30:14.145\nau .lab, this would be one tree,\ncontiguous name space.\n\n586\n00:30:14.145 --> 00:30:17.870\nContoso.com not a contiguous name space.\n\n587\n00:30:17.870 --> 00:30:19.850\nSeparate tree in my forest.\n\n588\n00:30:19.850 --> 00:30:23.290\nIt could have children, and\nits children could have children,\n\n589\n00:30:23.290 --> 00:30:25.045\nso that tree could grow and grow.\n\n590\n00:30:25.045 --> 00:30:25.840\nnwtraders.com.\n\n591\n00:30:25.840 --> 00:30:27.600\nSeparate name space.\n\n592\n00:30:27.600 --> 00:30:30.460\nSeparate tree within my forest, all right?\n\n593\n00:30:30.460 --> 00:30:32.210\nYou see this a lot with mergers, right?\n\n594\n00:30:32.210 --> 00:30:34.870\nLet's say we just bought NW traders and\n\n595\n00:30:34.870 --> 00:30:39.800\nwe wanna bring their network\nin through our organization.\n\n596\n00:30:39.800 --> 00:30:41.223\nBut I don't wanna lose their name.\n\n597\n00:30:41.223 --> 00:30:43.398\nA lot of people out there in\nthe world know NW traders.\n\n598\n00:30:43.398 --> 00:30:46.445\nThey know and respect that name,\nand if I get rid of it,\n\n599\n00:30:46.445 --> 00:30:48.430\nI lose that brand recognition.\n\n600\n00:30:48.430 --> 00:30:52.822\nSo, I need to bring their domain under\nmy control without losing that brand or\n\n601\n00:30:52.822 --> 00:30:54.250\nthat name recognition.\n\n602\n00:30:54.250 --> 00:30:56.806\nSo I wanna leave it as NW traders.com, so\n\n603\n00:30:56.806 --> 00:31:01.194\nit becomes a separate tree within my\norganization or within my forest.\n\n604\n00:31:01.194 --> 00:31:04.142\n>> Now, Mike.\nOkay I also understand that within\n\n605\n00:31:04.142 --> 00:31:07.670\na domain we do have containers,\nwe have users.\n\n606\n00:31:07.670 --> 00:31:09.420\nAnd we have groups.\n\n607\n00:31:09.420 --> 00:31:14.510\nBut we also have a special object that\nwe call an OU or an organizational unit.\n\n608\n00:31:14.510 --> 00:31:16.510\nWhy would we choose to\nuse something like that?\n\n609\n00:31:16.510 --> 00:31:18.020\n>> You know, OU's are fantastic.\n\n610\n00:31:18.020 --> 00:31:20.070\nOUs are organizational\nunits as Ronnie said.\n\n611\n00:31:20.070 --> 00:31:23.190\nAnd first and foremost they allow\nyou to organize your objects.\n\n612\n00:31:23.190 --> 00:31:24.250\nRight?\n\n613\n00:31:24.250 --> 00:31:25.060\nThink about this.\n\n614\n00:31:25.060 --> 00:31:27.385\nYou've got a My Pictures\nfolder at home and\n\n615\n00:31:27.385 --> 00:31:30.140\nyou don't just dump all\nof your photos in there.\n\n616\n00:31:30.140 --> 00:31:32.322\nYou've got 500, 1000, who knows\nhow many pictures in there, right?\n\n617\n00:31:32.322 --> 00:31:35.704\nTrying to find the picture, you have\nto scroll through this big ol' list.\n\n618\n00:31:35.704 --> 00:31:38.960\nWell, instead, you make folders,\nunderneath your my pictures.\n\n619\n00:31:38.960 --> 00:31:39.950\nYou make sub-folders, right.\n\n620\n00:31:39.950 --> 00:31:41.050\nChristmas 2014.\n\n621\n00:31:41.050 --> 00:31:42.430\nChristmas 2015, what have you.\n\n622\n00:31:42.430 --> 00:31:45.690\nThat's really what we're\ndoing with these whole years.\n\n623\n00:31:45.690 --> 00:31:47.804\nWe're using organizational units, right.\n\n624\n00:31:47.804 --> 00:31:49.291\nThe name kind of tells you.\n\n625\n00:31:49.291 --> 00:31:51.530\nWe're using it to organize your objects.\n\n626\n00:31:51.530 --> 00:31:53.100\nInstead what if I had 10,000 computers?\n\n627\n00:31:54.125 --> 00:31:56.765\nI'm not gonna scroll through\nthis list looking for\n\n628\n00:31:56.765 --> 00:31:59.355\nthat client machine down\nin the Gainesville office.\n\n629\n00:31:59.355 --> 00:32:02.091\nWhat I do is I have an OU\ncalled client computers and\n\n630\n00:32:02.091 --> 00:32:05.685\nthen I can even subdivide that even\nfurther with an OU called GNV.\n\n631\n00:32:05.685 --> 00:32:08.664\nNow I can put the GNV computers in there,\n\n632\n00:32:08.664 --> 00:32:12.295\nmy New York City computers\ngo in the NYC OU.\n\n633\n00:32:12.295 --> 00:32:18.540\nAnd so from that aspect I can\norganize my objects with these OU's.\n\n634\n00:32:18.540 --> 00:32:19.572\nTwo other things.\n\n635\n00:32:19.572 --> 00:32:23.809\nTwo big reasons that we use OU's\nis to apply group policy and\n\n636\n00:32:23.809 --> 00:32:26.624\nto delegate administrative control.\n\n637\n00:32:26.624 --> 00:32:30.627\nIf I have a setting that applies to all\ncomputers, I could create a GPO and\n\n638\n00:32:30.627 --> 00:32:33.990\nlink it here and it would apply\nto everything inside that OU.\n\n639\n00:32:33.990 --> 00:32:37.763\nSo instead of having to attach it\nto a thousand different computers,\n\n640\n00:32:37.763 --> 00:32:42.170\nI could apply that setting once and\nit could apply to everything.\n\n641\n00:32:42.170 --> 00:32:44.039\nBut, because of the way\nI've got it subdivided,\n\n642\n00:32:44.039 --> 00:32:46.410\nwhat if I've got we got a setting\nthat only applies to New York.\n\n643\n00:32:46.410 --> 00:32:49.570\nWell I don't apply it here cause that\nwould affect Gainesville and New York.\n\n644\n00:32:49.570 --> 00:32:53.930\nI can apply it here and it would only\napply to the New York computers.\n\n645\n00:32:53.930 --> 00:32:56.100\nSame thing with delegation\nof administration.\n\n646\n00:32:56.100 --> 00:32:58.830\nIf I have a Help Desk at\nthe corporate office,\n\n647\n00:32:58.830 --> 00:33:01.670\nI might give them administrative\ncontrol at this level.\n\n648\n00:33:01.670 --> 00:33:03.910\nThat would include all client computers.\n\n649\n00:33:03.910 --> 00:33:05.980\nBut New York City has their own help desk.\n\n650\n00:33:05.980 --> 00:33:08.930\nThey need administrative access,\nbut only to the New York computers,\n\n651\n00:33:08.930 --> 00:33:11.320\nnot to the Gainesville computers.\n\n652\n00:33:11.320 --> 00:33:15.180\nSo, I can delegate administrative control\nat that New York City OU level that\n\n653\n00:33:15.180 --> 00:33:19.850\nwould not give them administrative\ncontrol over the Gainesville computers.\n\n654\n00:33:19.850 --> 00:33:21.596\nSo OUs help me organize my objects,\n\n655\n00:33:21.596 --> 00:33:25.450\nas well as delegate administrative control\nand scope or link my group policy.\n\n656\n00:33:25.450 --> 00:33:29.041\n>> Now Mike, we also have that term you\nsaid that we were gonna get back to which\n\n657\n00:33:29.041 --> 00:33:33.172\nis the term schema, so why is this so\nimportant that we're hitting it twice?\n\n658\n00:33:33.172 --> 00:33:35.290\n>> Did I forget about that?\n\n659\n00:33:35.290 --> 00:33:37.113\n>> [LAUGH]\n>> No, I did tell you we were gonna\n\n660\n00:33:37.113 --> 00:33:41.210\ncome back around to it, and the schema\nis a set of blueprints is really what\n\n661\n00:33:41.210 --> 00:33:43.080\nit What you want to think of it as.\n\n662\n00:33:43.080 --> 00:33:47.332\nAn active directory I can create objects\nlike a new user, a new computer,\n\n663\n00:33:47.332 --> 00:33:48.711\na new O.U. All right.\n\n664\n00:33:48.711 --> 00:33:50.964\nWell when I right click new user.\n\n665\n00:33:50.964 --> 00:33:53.726\nHow does active directory\nknow what a new user is.\n\n666\n00:33:53.726 --> 00:33:57.200\nIt's because it's defined in the schema.\n\n667\n00:33:57.200 --> 00:34:00.530\nThe schema says a user is an object and\nit has attributes.\n\n668\n00:34:00.530 --> 00:34:01.860\nThings that describe it.\n\n669\n00:34:01.860 --> 00:34:05.245\nIn fact a user has a first name attribute,\na last name attribute,\n\n670\n00:34:05.245 --> 00:34:09.700\na phone number attribute, a department\nattribute, a password attribute, right?\n\n671\n00:34:09.700 --> 00:34:13.090\nSo when we look at a user in Active\nDirectory we pull up its properties and\n\n672\n00:34:13.090 --> 00:34:17.300\nwe can start filling in all this\ninformation about that user.\n\n673\n00:34:17.300 --> 00:34:21.640\nWe're filling in the attributes,\nthings that describe the object.\n\n674\n00:34:21.640 --> 00:34:23.925\nRonnie's got a different\nfirst name than I do right.\n\n675\n00:34:23.925 --> 00:34:26.655\nWe got two separate accounts\nin active directory.\n\n676\n00:34:26.655 --> 00:34:29.518\nWe can fill in those attributes to\nappropriate describe those objects.\n\n677\n00:34:29.518 --> 00:34:32.257\nAll of that is defined in the schema.\n\n678\n00:34:32.257 --> 00:34:35.045\nIf it's not in the schema,\nyou can't make it.\n\n679\n00:34:35.045 --> 00:34:38.180\nThe only thing you can make in active\ndirectory is to find in the schema.\n\n680\n00:34:38.180 --> 00:34:39.670\nI can modify the schema,\nI can change what a user is.\n\n681\n00:34:39.670 --> 00:34:44.513\nIf I want to track my user's shoe sizes\nbecause I want to give them a free pair of\n\n682\n00:34:44.513 --> 00:34:46.751\nshoes at Christmas as their bonus,\n\n683\n00:34:46.751 --> 00:34:51.773\nwell there is no fee in the active\ndirectory, there's no attribute shoe size.\n\n684\n00:34:51.773 --> 00:34:54.305\nI can actually go into the schema and\nadd it.\n\n685\n00:34:54.305 --> 00:34:57.410\nAnd now I can track shoe size,\nI don't know.\n\n686\n00:34:57.410 --> 00:35:03.820\nBut one thing I want you to remember\nabout the schema is it's forest wide.\n\n687\n00:35:03.820 --> 00:35:06.390\nSo let's say Itpro.tv,\nI wanna track user shoe size.\n\n688\n00:35:06.390 --> 00:35:11.136\nSo I go in and modify the schema to\ninclude the shoe size attribute.\n\n689\n00:35:11.136 --> 00:35:14.726\nWell, in lab.itpro.tv they now\nhave a shoe size attribute,\n\n690\n00:35:14.726 --> 00:35:16.498\nwhether they wanted it or not.\n\n691\n00:35:16.498 --> 00:35:21.054\nSo we've gotta be really careful with\nthe schema, cuz I might make a change that\n\n692\n00:35:21.054 --> 00:35:25.208\nworks great in my domain, but\nbreaks something else in another domain.\n\n693\n00:35:25.208 --> 00:35:26.368\nSo it's important to remember that.\n\n694\n00:35:26.368 --> 00:35:28.400\nThat the schema is a forest-wide thing.\n\n695\n00:35:28.400 --> 00:35:33.380\nIt's not per the domain,\nit's per forest, alright?\n\n696\n00:35:33.380 --> 00:35:37.800\n>> Now Mike, with all this that you're\ntalking about, the very fact is it sounds\n\n697\n00:35:37.800 --> 00:35:42.580\nlike this database can get gigantic and\nit can become very difficult to search,\n\n698\n00:35:42.580 --> 00:35:46.270\neven though we're actually on fairly fast\ncomputers, so there is something that can\n\n699\n00:35:46.270 --> 00:35:48.490\nhelp us to actually make this\nsearch better, isn't there?\n\n700\n00:35:48.490 --> 00:35:50.909\n>> There sure is, and\nthat's known as The global catalog.\n\n701\n00:35:50.909 --> 00:35:54.205\nThe global catalog is basically\nan index for active directory.\n\n702\n00:35:54.205 --> 00:35:58.653\nOne of the things we're going to find\nas we move on through these videos and\n\n703\n00:35:58.653 --> 00:36:03.535\nwe learn about the different partitions\nand the way they replicate, each domain\n\n704\n00:36:03.535 --> 00:36:08.346\nhas its own domain partition and it stores\ninformation about objects that exist\n\n705\n00:36:08.346 --> 00:36:13.050\nin that domain but if I'm in domain A what\nif I want to find a User from domain B.\n\n706\n00:36:13.050 --> 00:36:16.956\nWell if I search active directory,\nit's only going to show me results for\n\n707\n00:36:16.956 --> 00:36:17.530\ndomain A.\n\n708\n00:36:17.530 --> 00:36:19.690\nIt doesn't know anything about domain B.\n\n709\n00:36:19.690 --> 00:36:24.650\nWell a global catalogue has\na copy of all domain partitions.\n\n710\n00:36:24.650 --> 00:36:28.560\nSo now all of a sudden I can\nsearch the global Catalog and\n\n711\n00:36:28.560 --> 00:36:32.970\nI can find objects in domain\na as well as objects in domain.\n\n712\n00:36:32.970 --> 00:36:36.230\nBecause the global catalog's\na special domain controller and\n\n713\n00:36:36.230 --> 00:36:39.730\nhe gets a copy of every\ndomain's domain partition.\n\n714\n00:36:39.730 --> 00:36:43.260\nAnd so it facilitates searches\nacross the entire enterprise.\n\n715\n00:36:43.260 --> 00:36:46.130\nAnd it does make things\na whole lot faster Ronnie.\n\n716\n00:36:46.130 --> 00:36:48.910\n>> So, when we start Start taking a look\nat active directory then trying to\n\n717\n00:36:48.910 --> 00:36:49.830\nunderstand it.\n\n718\n00:36:49.830 --> 00:36:52.310\nWant to at least understand\nthis point right.\n\n719\n00:36:52.310 --> 00:36:55.058\nThe very fact it's active directory\nis very helpful when talking about\n\n720\n00:36:55.058 --> 00:36:57.320\ncentralized administration\nas well as authentication.\n\n721\n00:36:57.320 --> 00:37:01.150\nWe also took a little bit of time\nhere describing the physical.\n\n722\n00:37:01.150 --> 00:37:04.151\nmakeup and the physical components\nof active directory, and\n\n723\n00:37:04.151 --> 00:37:07.266\nlastly we took a look at some of\nthe common terminology that yes,\n\n724\n00:37:07.266 --> 00:37:10.439\nyou do need to at least understand\nas we get started because Mike,\n\n725\n00:37:10.439 --> 00:37:13.960\nwe're going to dive right deeply into\nall these different terms, and so\n\n726\n00:37:13.960 --> 00:37:17.825\nwhen we get down to it, at least having a\nbasic understand now is going to help you\n\n727\n00:37:17.825 --> 00:37:21.380\nas we go on through this series\nof shoes that we'll be doing.\n\n728\n00:37:21.380 --> 00:37:24.270\nBut overall though, that's what we did\ntake a little bit of time to cover.\n\n729\n00:37:24.270 --> 00:37:24.895\nNow Mike,\n\n730\n00:37:24.895 --> 00:37:29.072\nany last words before we we really do\na deep dive into active directory.\n\n731\n00:37:29.072 --> 00:37:31.368\n>> No, if any of that stuff\nis sounding confusing,\n\n732\n00:37:31.368 --> 00:37:33.670\nor you're like,\nwait what does he mean by that?\n\n733\n00:37:33.670 --> 00:37:36.460\nDon't worry, almost all of that is,\nas Ronnie said,\n\n734\n00:37:36.460 --> 00:37:39.798\ngonna be covered in much more depth\nas we go through this course but\n\n735\n00:37:39.798 --> 00:37:44.351\nit's important that we start hearing those\nterms so that as we go through we're like,\n\n736\n00:37:44.351 --> 00:37:48.116\nyeah, I remember that, so just\nfamiliarize yourself with those terms,\n\n737\n00:37:48.116 --> 00:37:51.310\nit'll make the rest of the course\na lot easier to understand.\n\n738\n00:37:51.310 --> 00:37:55.010\n>> All right, so that's a great for\nus to go ahead and end this episode.\n\n739\n00:37:55.010 --> 00:37:57.437\nThank you for watching.\n\n740\n00:37:57.437 --> 00:38:00.190\nSigning off for ITProTV, I'm Ronnie Wong.\n\n741\n00:38:00.190 --> 00:38:01.250\n>> And I'm Mike Rodrick.\n\n742\n00:38:01.250 --> 00:38:07.132\n>> And we'll see you next time.\n\n743\n00:38:07.132 --> 00:38:07.632\n[NOISE]\n\n",
          "vimeoId": "146125830"
        },
        {
          "description": "In this episode, Ronnie and Mike take an look how Active Directory works with multiple domain controllers and domains.  They talk about the domain and forest functional levels.  Along the same lines they introduce the concepts of trust between domains and forests.",
          "length": "2287",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-1-2-ad_functionality-110315-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-1-2-ad_functionality-110315-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-1-2-ad_functionality-110315-1-sm.jpg",
          "title": "AD Functionality",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:12.375 --> 00:00:14.610\n>> Welcome to another great episode,\nhere, on ITPro.\n\n3\n00:00:14.610 --> 00:00:16.365\nIT Pro TV.\nI'm your host Ronnie Wong and\n\n4\n00:00:16.365 --> 00:00:19.493\ntoday we'll be taking a look at\nActive Directory functionality, and\n\n5\n00:00:19.493 --> 00:00:23.217\nwho better to help us than, well, the\nMicrosoft master himself, Mike Roderick.\n\n6\n00:00:23.217 --> 00:00:23.819\nHow's it going, Mike?\n\n7\n00:00:23.819 --> 00:00:24.887\n>> [LAUGH] I'm doing good.\n\n8\n00:00:24.887 --> 00:00:29.535\nI don't know if I've quite mastered\nMicrosoft yet, but working on that.\n\n9\n00:00:29.535 --> 00:00:33.734\nSo yeah, today we're gonna be looking\nat what we call functional levels and\n\n10\n00:00:33.734 --> 00:00:38.240\na couple of other things, but we'll\nstart off with these functional levels.\n\n11\n00:00:38.240 --> 00:00:42.660\nAnd when we talk about functional levels,\nwhat we're looking at are the features\n\n12\n00:00:42.660 --> 00:00:46.060\nthat we get with certain\noperating system versions, right?\n\n13\n00:00:46.060 --> 00:00:49.550\nAs a new version of that\noperating system comes out, well,\n\n14\n00:00:49.550 --> 00:00:51.390\nnew features are made available.\n\n15\n00:00:51.390 --> 00:00:54.961\nThose older operating systems might\nnot understand those features.\n\n16\n00:00:54.961 --> 00:00:57.910\nAnd the same thing holds\ntrue with Active Directory.\n\n17\n00:00:57.910 --> 00:01:02.283\nWhen we go from 2008 to 2012,\nWindows Server 2012,\n\n18\n00:01:02.283 --> 00:01:07.525\nwell, Server 2012 can do some\nthings that 2008 couldn't do.\n\n19\n00:01:07.525 --> 00:01:10.375\nWell, how do we handle that\nin our environments where\n\n20\n00:01:10.375 --> 00:01:12.395\nI've got multiple domain controllers and\n\n21\n00:01:12.395 --> 00:01:15.447\nthey might be running multiple\nversions of the operating system?\n\n22\n00:01:15.447 --> 00:01:19.225\nIf we've got dozens or\nhundreds of domain controllers,\n\n23\n00:01:19.225 --> 00:01:22.700\nthere's a real good chance that I can't\ngo out an upgrade every single one of\n\n24\n00:01:22.700 --> 00:01:24.880\nthem as soon as that new\noperating system comes out.\n\n25\n00:01:24.880 --> 00:01:27.788\nI might have to stage it\nto work my way through it.\n\n26\n00:01:27.788 --> 00:01:30.538\nOr maybe I have to run in that\nmixed environment for some time.\n\n27\n00:01:30.538 --> 00:01:34.729\nSo, I have to make sure that\neverything still continues to work, and\n\n28\n00:01:34.729 --> 00:01:37.854\nthat's where these functions\nlevels help us out.\n\n29\n00:01:37.854 --> 00:01:40.000\nThere's two that we have to worry about.\n\n30\n00:01:40.000 --> 00:01:42.990\nThere's our domain functional\nlevel that looks at the domain.\n\n31\n00:01:42.990 --> 00:01:47.800\nAnd then there's the forest functional\nlevel that applies to the entire forest.\n\n32\n00:01:47.800 --> 00:01:50.930\nAnd let's start with our\ndomain functional level.\n\n33\n00:01:50.930 --> 00:01:54.271\nAs I said, it's really it's\nall based on the OS version.\n\n34\n00:01:54.271 --> 00:01:58.538\nAnd the first thing we need to make sure\nthat we understand is that it's only\n\n35\n00:01:58.538 --> 00:02:03.086\nworried about the version of the operating\nsystem on your domain controllers.\n\n36\n00:02:03.086 --> 00:02:04.664\nIt doesn't matter about your file servers.\n\n37\n00:02:04.664 --> 00:02:09.840\nYou can have a Windows 2000 file server,\nan NT file server, if you wanted to.\n\n38\n00:02:09.840 --> 00:02:12.420\nWe're not concerned with those guys.\n\n39\n00:02:12.420 --> 00:02:16.369\nWe're only talking about what version\nof the operating system is running\n\n40\n00:02:16.369 --> 00:02:17.970\non your domain controllers.\n\n41\n00:02:17.970 --> 00:02:18.643\nAll right?\n\n42\n00:02:18.643 --> 00:02:20.083\nAnd the way these functional levels work.\n\n43\n00:02:20.083 --> 00:02:25.888\nAs far as 2012 R2 goes, there's a few\nsupported domain functional levels.\n\n44\n00:02:25.888 --> 00:02:29.716\nThere's 2003, there's 2008,\n\n45\n00:02:29.716 --> 00:02:33.874\n2008 R2, 2012, and 2012 R2.\n\n46\n00:02:33.874 --> 00:02:37.810\nThose are the different domain functional\nlevels that I can choose from.\n\n47\n00:02:37.810 --> 00:02:42.850\nAnd the way you choose, or what determines\nwhat functional level you're allowed to\n\n48\n00:02:42.850 --> 00:02:48.770\nrun at or is possible is the lowest\ndomain controller version, OS version.\n\n49\n00:02:48.770 --> 00:02:50.880\nSo if you have,\nlet's take a look at my screen here.\n\n50\n00:02:50.880 --> 00:02:53.600\nI've got a domain that has\nthree domain controllers.\n\n51\n00:02:53.600 --> 00:02:56.350\nOne of them is running 2012 R2.\n\n52\n00:02:56.350 --> 00:02:58.850\nOne of them is running 2008 R2.\n\n53\n00:02:58.850 --> 00:03:02.000\nOne of them is still running 2003.\n\n54\n00:03:02.000 --> 00:03:07.700\nSo that means my domain functional\nlevel can only be 2003.\n\n55\n00:03:07.700 --> 00:03:11.565\nI can't go 2008 domain functional level,\n\n56\n00:03:11.565 --> 00:03:15.205\nbecause I still have\na 2003 domain controller.\n\n57\n00:03:15.205 --> 00:03:22.441\nOnce I upgrade this guy,\nlet's say we upgrade it to 2012 R2.\n\n58\n00:03:22.441 --> 00:03:27.452\nWell, now the lowest operating system\non my domain controller in 2008 R2.\n\n59\n00:03:27.452 --> 00:03:35.548\nSo now I can move my domain main\nfunctional level from 2003 to 2008 R2.\n\n60\n00:03:35.548 --> 00:03:39.061\nAnd I can start taking advantage\nof some of the features that\n\n61\n00:03:39.061 --> 00:03:40.964\nare available in 2008 R2.\n\n62\n00:03:40.964 --> 00:03:45.082\nBefore that, when my domain\nfunctional level was still 2003,\n\n63\n00:03:45.082 --> 00:03:50.138\nI couldn't take advantage of any of\nthose new features in 2008 or 2012, or\n\n64\n00:03:50.138 --> 00:03:55.413\n2012 R2, because we still had that 2003\ndomain controller sitting there and\n\n65\n00:03:55.413 --> 00:03:58.257\nhe wouldn't understand those new features.\n\n66\n00:03:58.257 --> 00:04:02.685\nBut once I got rid of him, now I can\nstart raising that domain function level.\n\n67\n00:04:02.685 --> 00:04:08.277\nBut only as high as the lowest operating\nsystem version on my domain controllers.\n\n68\n00:04:08.277 --> 00:04:13.353\nNow, once I go and I upgrade this guy and\nget him to 2012 R2,\n\n69\n00:04:13.353 --> 00:04:18.523\nnow I can go and raise my domain\nfunctional level to 2012 R2,\n\n70\n00:04:18.523 --> 00:04:25.114\nand I can start taking advantage of those\nnew features that came with 2012 R2.\n\n71\n00:04:25.114 --> 00:04:28.210\nSo it's all based on that\nlowest domain controller.\n\n72\n00:04:28.210 --> 00:04:29.730\n>> Now, Mike, I have a question.\n\n73\n00:04:29.730 --> 00:04:34.640\nIf I leave it down at the 2008\nR2 level that you had,\n\n74\n00:04:34.640 --> 00:04:35.920\nis it really gonna hurt anything?\n\n75\n00:04:35.920 --> 00:04:37.570\nIs it something I have to worry about?\n\n76\n00:04:37.570 --> 00:04:40.860\n>> The only thing it's gonna do is prevent\nyou from taking advantage of some of those\n\n77\n00:04:40.860 --> 00:04:41.740\nnew features, right?\n\n78\n00:04:41.740 --> 00:04:43.570\nSo you might choose not to.\n\n79\n00:04:43.570 --> 00:04:46.214\nBecause here's the other thing that\nwe've got to remember about these\n\n80\n00:04:46.214 --> 00:04:47.016\nfunctional levels.\n\n81\n00:04:47.016 --> 00:04:48.594\nOnce I raise this.\n\n82\n00:04:48.594 --> 00:04:50.730\nIn fact,\nlet's go see if I can go back here.\n\n83\n00:04:50.730 --> 00:04:58.870\nLet's go back to when our domain\nfunctional level was 2008 R2, all right?\n\n84\n00:04:58.870 --> 00:05:01.858\nWell, at this point,\nonce I've raised that,\n\n85\n00:05:01.858 --> 00:05:05.978\nI cannot bring in a domain\ncontroller that's running 2003.\n\n86\n00:05:05.978 --> 00:05:09.774\nI cannot even bring in a new\ndomain controller running 2008,\n\n87\n00:05:09.774 --> 00:05:14.618\nbecause my domain functional level is\n2008 R2, that's now the bar, right?\n\n88\n00:05:14.618 --> 00:05:18.871\nThat is the mark, that's the lowest\nversion of the operating system that I can\n\n89\n00:05:18.871 --> 00:05:20.795\nrun on my domain controllers.\n\n90\n00:05:20.795 --> 00:05:23.305\nAnd so,\nyou might think what you need to do.\n\n91\n00:05:23.305 --> 00:05:26.415\nAnd we're going to show you some of the\nthings that you get with these different\n\n92\n00:05:26.415 --> 00:05:28.135\nfunctional levels in just a minute.\n\n93\n00:05:28.135 --> 00:05:32.682\nBut, your thought process has to be,\ndo I need any of those new features?\n\n94\n00:05:32.682 --> 00:05:36.304\nDo I plan on taking advantage\nof any of those new features?\n\n95\n00:05:36.304 --> 00:05:43.509\nIs there a chance that I might need\nto bring in a 2008 domain controller.\n\n96\n00:05:43.509 --> 00:05:45.956\nWhat if I merge networks with\nsome other organization.\n\n97\n00:05:45.956 --> 00:05:50.490\nMaybe we're doing a merger, and\nall their domain controllers are 2003.\n\n98\n00:05:50.490 --> 00:05:52.880\nWell, I can't do it,\nbecause I'm at 2008 R2.\n\n99\n00:05:52.880 --> 00:05:57.168\nI'm now going to have to upgrade all of\nthose domain controllers before I can\n\n100\n00:05:57.168 --> 00:06:00.384\nbring them in,\nbecause I raise that domain controller,\n\n101\n00:06:00.384 --> 00:06:04.745\nor that domain functional level, and\nI set that minimum bar to 2008 R2.\n\n102\n00:06:04.745 --> 00:06:05.953\nSo very good question, Ronnie.\n\n103\n00:06:05.953 --> 00:06:09.267\nWhen you're talking about should\nI raise that functional level,\n\n104\n00:06:09.267 --> 00:06:11.380\ntwo things you've gotta consider.\n\n105\n00:06:11.380 --> 00:06:17.816\nDo I need that functionality and am I\nokay setting that lower bar or that bar?\n\n106\n00:06:17.816 --> 00:06:21.464\nSo let's go ahead and\nI'm going to raise this guy back to 2000,\n\n107\n00:06:21.464 --> 00:06:24.984\nwell I guess it doesn't matter for\nour demo, but 2012 R2 and\n\n108\n00:06:24.984 --> 00:06:28.184\nnow I can raise my domain\nfunction a level to 2012 R2 and\n\n109\n00:06:28.184 --> 00:06:32.240\nat this point I can no longer bring\nin any 2008 R2 domain controllers.\n\n110\n00:06:32.240 --> 00:06:36.223\nI can no longer bring any\n2012 domain controllers.\n\n111\n00:06:36.223 --> 00:06:38.963\nThey would all have to be running 2012 R2.\n\n112\n00:06:38.963 --> 00:06:41.424\nAnd that's our domain functional level.\n\n113\n00:06:41.424 --> 00:06:43.590\n>> Now Mike you made a very good\npoint a little bit earlier.\n\n114\n00:06:43.590 --> 00:06:45.960\nYou talked about different\nfunctional levels as well.\n\n115\n00:06:45.960 --> 00:06:50.000\nYou mentioned domain but then you also\nmentioned Forest functional levels.\n\n116\n00:06:50.000 --> 00:06:53.700\nWell what is the difference and\nwhy do I really have to care?\n\n117\n00:06:53.700 --> 00:06:54.580\n>> It's the same concept.\n\n118\n00:06:54.580 --> 00:06:56.476\nWe have to care for a few reasons.\n\n119\n00:06:56.476 --> 00:06:57.277\nI like that.\n\n120\n00:06:57.277 --> 00:07:01.500\n[LAUGH] But it's the same concept,\nexcept now instead\n\n121\n00:07:01.500 --> 00:07:06.100\nof looking at individual domain\ncontrollers within my domain,\n\n122\n00:07:07.230 --> 00:07:11.290\nI'm looking at the domains\nthemselves within my forest.\n\n123\n00:07:11.290 --> 00:07:13.750\nThis domain here has been raised to 2012,\n\n124\n00:07:13.750 --> 00:07:17.293\nwhich means all its domain\ncontrollers are at least 2012 R2.\n\n125\n00:07:17.293 --> 00:07:22.831\nI might still have other domains that are\nsitting at 2003 domain functional level.\n\n126\n00:07:22.831 --> 00:07:26.163\nAnd another domain that's sitting\nhere at 2008 domain functional level.\n\n127\n00:07:26.163 --> 00:07:27.626\nThey don't have the money.\n\n128\n00:07:27.626 --> 00:07:30.203\nThe resources, the time to\nupgrade those domain controllers.\n\n129\n00:07:30.203 --> 00:07:32.038\nOr maybe the desire or whatever it is.\n\n130\n00:07:32.038 --> 00:07:37.540\nSo my forest, while this domain is\na 2012 R2 domain function level.\n\n131\n00:07:37.540 --> 00:07:42.726\nThe forest itself has to be\na 2003 forest functional level.\n\n132\n00:07:42.726 --> 00:07:45.573\nBecause just like domain functional level,\nit's\n\n133\n00:07:45.573 --> 00:07:50.360\nall based on the lowest version of the\noperating system on my domain controllers.\n\n134\n00:07:50.360 --> 00:07:56.320\nForest functional level is based on\nthe lowest domain functional level.\n\n135\n00:07:56.320 --> 00:08:01.661\nSo if I go to this domain and I upgrade\nall the domain controllers in there to\n\n136\n00:08:01.661 --> 00:08:06.831\n2008 R2 and I raise that domain\nfunctional level to 2008 R2,\n\n137\n00:08:06.831 --> 00:08:12.604\nnow I can actually raise my forest\nto 2008, not 2008 R2 right because I\n\n138\n00:08:12.604 --> 00:08:18.411\nstill have a domain that's sitting\nhere in 2008 domain functional level.\n\n139\n00:08:18.411 --> 00:08:23.313\nAll right, so I'd have to\nupgrade these domain controllers\n\n140\n00:08:23.313 --> 00:08:27.735\nto 2008 R2 and\nraise my domain functional level to\n\n141\n00:08:27.735 --> 00:08:32.665\n2008 R2 before I can upgrade\nmy forest to 2008 R2.\n\n142\n00:08:32.665 --> 00:08:35.825\nAnd notice there's something I\nmentioned in there that might have just\n\n143\n00:08:35.825 --> 00:08:37.185\nslipped on by.\n\n144\n00:08:37.185 --> 00:08:40.225\nIt's not just upgrade\nthe domain controllers.\n\n145\n00:08:40.225 --> 00:08:40.885\nAll right?\n\n146\n00:08:40.885 --> 00:08:44.875\nI could upgrade these domain controllers\nin this domain here to 2012 R2.\n\n147\n00:08:44.875 --> 00:08:47.785\nBut never raise my\ndomain functional level.\n\n148\n00:08:47.785 --> 00:08:49.006\nBecause of what we just talked about.\n\n149\n00:08:49.006 --> 00:08:52.727\nI have a feeling I'm gonna need to\nbring in another domain controller.\n\n150\n00:08:52.727 --> 00:08:57.386\nI know it's running 2008 R2, so even\nthough all my domain controllers are at\n\n151\n00:08:57.386 --> 00:09:02.467\n2012 operating system, I'm gonna leave\nmy domain function level at 2008 R2.\n\n152\n00:09:02.467 --> 00:09:04.975\nI cannot raise the forest past that then,\nright.\n\n153\n00:09:04.975 --> 00:09:07.871\nIt's not looking at\nthe individual domain controllers,\n\n154\n00:09:07.871 --> 00:09:11.440\nit's looking at what the functional\nlevel is for those domains.\n\n155\n00:09:11.440 --> 00:09:13.958\nWhen you go to raise that\nForest functional level.\n\n156\n00:09:13.958 --> 00:09:17.046\nIt looks at those domains and says,\nwhat is your current functional level?\n\n157\n00:09:17.046 --> 00:09:21.988\nAnd even if all their domain controllers\nare 2012 R2 if the domain itself is at\n\n158\n00:09:21.988 --> 00:09:26.079\n2008 R2 that's the lowest bar,\nthat's where I'm gonna be.\n\n159\n00:09:26.079 --> 00:09:29.482\nAnd the same principle holds that\nwe talked about with the domain\n\n160\n00:09:29.482 --> 00:09:30.560\nfunctional level.\n\n161\n00:09:30.560 --> 00:09:32.844\nDo I wanna raise my\nForest functional level?\n\n162\n00:09:32.844 --> 00:09:38.306\nLet's say I've upgraded all my domain\ncontrollers and I've even upgraded\n\n163\n00:09:38.306 --> 00:09:43.781\nI've raised my domain functional level for\nall my domains to 2012 R2.\n\n164\n00:09:43.781 --> 00:09:49.194\nWell at this point I could raise my\nForest functional level to 2012 R2.\n\n165\n00:09:49.194 --> 00:09:50.400\nI don't have to though.\n\n166\n00:09:50.400 --> 00:09:51.026\nIf I do,\n\n167\n00:09:51.026 --> 00:09:56.853\nI'm gonna be able to take advantage\nof those of new features of 2012 R2.\n\n168\n00:09:56.853 --> 00:10:01.640\nBut I will never be able to create another\ndomain or migrate a domain in that's\n\n169\n00:10:01.640 --> 00:10:06.420\nusing 2008 R2 domain controllers\nof 2012 domain controllers.\n\n170\n00:10:06.420 --> 00:10:10.640\nThey would have to be 2012 R2,\nso just like with domains,\n\n171\n00:10:10.640 --> 00:10:14.730\nhow that domain functional\nlevel sets the low bar,\n\n172\n00:10:14.730 --> 00:10:18.240\nthe lowest bar for\nmy domain controller operating systems.\n\n173\n00:10:18.240 --> 00:10:21.440\nThe forest functional level\nsets the lowest bar for\n\n174\n00:10:21.440 --> 00:10:24.930\nmy domain functional\nlevels within my forest.\n\n175\n00:10:24.930 --> 00:10:27.320\nOkay?\nNow, Ronnie asked a good question there,\n\n176\n00:10:27.320 --> 00:10:30.640\nwe talked about why or\nshould I, or should I care.\n\n177\n00:10:30.640 --> 00:10:34.640\nI put a link in the show notes for\neverybody so we can take a look.\n\n178\n00:10:34.640 --> 00:10:37.400\nAnd the answer is sometimes and\nsometimes not.\n\n179\n00:10:37.400 --> 00:10:42.113\n[LAUGH] All right, so if we look, and\nyou guys don't have to memorize these or\n\n180\n00:10:42.113 --> 00:10:43.449\nanything like that.\n\n181\n00:10:43.449 --> 00:10:46.839\nI mean, these sheets are here for\nour reference.\n\n182\n00:10:46.839 --> 00:10:47.816\nBut let's kinda go through here.\n\n183\n00:10:47.816 --> 00:10:51.135\nLike in 2003, was anything gained here?\n\n184\n00:10:51.135 --> 00:10:52.900\nI'm trying to think of\nsome of the big ones.\n\n185\n00:10:52.900 --> 00:10:55.930\nSelective authentication for\nmy forest trust.\n\n186\n00:10:55.930 --> 00:10:57.090\nThat was a nice feature so\n\n187\n00:10:57.090 --> 00:11:01.202\na good reason to go to that\n2003 domain functional level.\n\n188\n00:11:01.202 --> 00:11:07.145\nThe 2008 domain functional level,\nI've got this find password polices.\n\n189\n00:11:07.145 --> 00:11:09.531\nThat was a really nice feature.\n\n190\n00:11:09.531 --> 00:11:13.179\nIf I want to use those, then I'm\ngonna have to make sure all my domain\n\n191\n00:11:13.179 --> 00:11:17.998\ncontrollers are running 2008 and I raise\nthat domain functional level to 2008.\n\n192\n00:11:17.998 --> 00:11:21.667\n2008 R2 didn't bring a whole lot.\n\n193\n00:11:21.667 --> 00:11:25.680\nSo there was some new features,\nauthentication mechanism assurance.\n\n194\n00:11:25.680 --> 00:11:27.990\nAutomatic SPN management.\n\n195\n00:11:27.990 --> 00:11:30.430\nSo if those were important to you,\n\n196\n00:11:30.430 --> 00:11:32.810\nthen this is important and\nyou'd wanna raise that.\n\n197\n00:11:32.810 --> 00:11:35.870\nIf you're not using those features,\nthen even if you've\n\n198\n00:11:35.870 --> 00:11:40.060\nupgraded your domain controllers, maybe\nyou'll leave your domain functional level.\n\n199\n00:11:40.060 --> 00:11:44.021\nI always look at it Ronnie like I wanna\ndo this only if I have to, right?\n\n200\n00:11:44.021 --> 00:11:48.339\nBecause you are limiting yourself and\nyou can't really go back.\n\n201\n00:11:48.339 --> 00:11:49.175\nThat's the other thing.\n\n202\n00:11:49.175 --> 00:11:51.705\n>> [LAUGH]\n>> So if there's no real reason to,\n\n203\n00:11:51.705 --> 00:11:53.540\ndon't do it just because.\n\n204\n00:11:53.540 --> 00:11:55.140\nIt's not like Mount Everest.\n\n205\n00:11:55.140 --> 00:11:57.550\nAll right?\nYou don't raise it just because you can.\n\n206\n00:11:57.550 --> 00:12:00.730\nJust because all your domain\ncontrollers in 2012 are too,\n\n207\n00:12:00.730 --> 00:12:02.970\nlet's raise the domain functional level.\n\n208\n00:12:02.970 --> 00:12:04.824\nNo.\nBecause you're going to limit yourself.\n\n209\n00:12:04.824 --> 00:12:08.771\nBecause as soon as you do that, the boss\nis gonna come to you tomorrow and say hey,\n\n210\n00:12:08.771 --> 00:12:12.778\nyou know what, we need to set up a domain\nwith some 2008 domain controllers for\n\n211\n00:12:12.778 --> 00:12:14.470\nour R&D department.\n\n212\n00:12:14.470 --> 00:12:18.140\nYou're like, well shoot I just raised my,\nyou know, or something's gonna happen.\n\n213\n00:12:18.140 --> 00:12:19.730\nIt's gonna cause some problems.\n\n214\n00:12:19.730 --> 00:12:22.714\nSo only do it if you need to take\nadvantage of those features, and\n\n215\n00:12:22.714 --> 00:12:25.277\nthe same thing goes with\nthe forest functional level.\n\n216\n00:12:25.277 --> 00:12:28.261\nYou'll see some cool features\ncame out as we go up here, but\n\n217\n00:12:28.261 --> 00:12:29.882\nlook at some of these down here.\n\n218\n00:12:29.882 --> 00:12:34.807\n2012 forest functional level, all features\nthat are available in 2008 forest\n\n219\n00:12:34.807 --> 00:12:37.481\nfunctional level but\nno additional features.\n\n220\n00:12:37.481 --> 00:12:39.038\n>> [LAUGH]\n>> No additional features.\n\n221\n00:12:39.038 --> 00:12:42.102\n2012 R2, no additional features.\n\n222\n00:12:42.102 --> 00:12:46.493\nSo the only thing you're doing\nby moving yourself to 2012 R24's\n\n223\n00:12:46.493 --> 00:12:49.859\nfunctional level is making\nsure that you can never have\n\n224\n00:12:49.859 --> 00:12:53.900\na 2008 domain functional level\ndomain in your environment.\n\n225\n00:12:53.900 --> 00:12:57.647\nSo if that's what you're trying to do,\nif you're trying to prevent any down level\n\n226\n00:12:57.647 --> 00:13:00.227\nOS's on your domain controllers fine,\nyou can do that.\n\n227\n00:13:00.227 --> 00:13:04.217\nBut if you're just doing it because,\nprobably not a good idea.\n\n228\n00:13:04.217 --> 00:13:06.985\n>> [LAUGH] Well and\nMike that's a great little rundown for\n\n229\n00:13:06.985 --> 00:13:11.231\nus when it comes down to those different\ndomain functional levels as well as forest\n\n230\n00:13:11.231 --> 00:13:12.360\nfunctional levels.\n\n231\n00:13:12.360 --> 00:13:17.260\nRemember that what we're really trying\nto do right is to ensure that level\n\n232\n00:13:17.260 --> 00:13:19.985\nthat we need so if we do have mixed\noperating systems that's holding\n\n233\n00:13:19.985 --> 00:13:22.745\nour domain controllers,\nthe highest level that we can set it to,\n\n234\n00:13:22.745 --> 00:13:25.665\nof course, is gonna be the oldest\noperating system that we're running.\n\n235\n00:13:25.665 --> 00:13:28.985\nNow the other thing that we also have\nto deal with in Active Directory is\n\n236\n00:13:28.985 --> 00:13:33.025\nwhat Mike was showing us is a lot of times\nwe also work with different domains,\n\n237\n00:13:33.025 --> 00:13:34.985\neven within our forests as well.\n\n238\n00:13:34.985 --> 00:13:37.825\nAnd maybe even sometimes,\nwell, between forests.\n\n239\n00:13:37.825 --> 00:13:39.875\nBut we have to talk\nabout trust levels too.\n\n240\n00:13:39.875 --> 00:13:42.470\nAnd so Mike,\nwhen we talk about trust levels,\n\n241\n00:13:42.470 --> 00:13:45.070\nI know that there's things that\nwe call like transitive trust.\n\n242\n00:13:45.070 --> 00:13:48.092\nThere's also things like one way trust and\ntwo way trust.\n\n243\n00:13:48.092 --> 00:13:51.643\nAnd if there's anything that's gonna get\nme confused is trying to distinguish\n\n244\n00:13:51.643 --> 00:13:53.398\nbetween the three, but Mike knows it.\n\n245\n00:13:53.398 --> 00:13:55.000\nSo help us out Mike.\n\n246\n00:13:55.000 --> 00:13:57.183\n>> I don't know, sometimes I get\nconfused with this stuff as well.\n\n247\n00:13:57.183 --> 00:14:01.800\nIt is a little bit confusing\nis the way we'll put it.\n\n248\n00:14:01.800 --> 00:14:03.440\nBut yes, we've got to worry about trust.\n\n249\n00:14:03.440 --> 00:14:06.650\nRemember when we were talking\nabout word groups and domains and\n\n250\n00:14:06.650 --> 00:14:10.760\na big advantage of going to a domain\nwas that centralized authentication and\n\n251\n00:14:10.760 --> 00:14:15.360\nthat trust that exists between all the\nnodes or all the machines on my network.\n\n252\n00:14:15.360 --> 00:14:19.690\nAnd how they'll trust the authentication\nprocess that's occurring.\n\n253\n00:14:19.690 --> 00:14:22.466\nSo now that user can sign\nonto that computer, and\n\n254\n00:14:22.466 --> 00:14:25.798\nthey can gain access to\nresources throughout the domain.\n\n255\n00:14:25.798 --> 00:14:30.034\nI can give them rights or permissions\nover this file or folder, and because all\n\n256\n00:14:30.034 --> 00:14:34.463\nthe machines in my domain trust the\nauthentication, they'll accept that access\n\n257\n00:14:34.463 --> 00:14:39.630\ntoken and they'll either give them or deny\nthem access, but the trust stops there.\n\n258\n00:14:39.630 --> 00:14:43.330\nNobody outside of my domain is gonna\ntrust my domain controller and\n\n259\n00:14:43.330 --> 00:14:49.660\naccept that authentication token\nunless we configure trusts.\n\n260\n00:14:49.660 --> 00:14:51.650\nNow I say we gotta configure them,\n\n261\n00:14:51.650 --> 00:14:55.720\nthere are several that are created by\ndefault and I'll show you what those are.\n\n262\n00:14:55.720 --> 00:14:58.070\nBut I want you to get that concept first,\nright?\n\n263\n00:14:58.070 --> 00:15:03.020\nWithout the trusts, there would be no\nway to take a user from one domain and\n\n264\n00:15:03.020 --> 00:15:06.380\ngive them access to\nresources in another domain.\n\n265\n00:15:06.380 --> 00:15:09.449\nBecause that domain is a boundary for\nthose trusts, right?\n\n266\n00:15:09.449 --> 00:15:14.255\nThat authentication process is\nall trusted within that domain.\n\n267\n00:15:14.255 --> 00:15:18.241\nNow before those types of trusts that we\ncan create, or the ones that are created\n\n268\n00:15:18.241 --> 00:15:22.100\nautomatically, let's define some\nterms that Ronnie mentioned.\n\n269\n00:15:22.100 --> 00:15:26.800\nWhen we look at a trust, first thing we\nhave to worry about is trust direction.\n\n270\n00:15:26.800 --> 00:15:30.162\nA trust, when we create it,\ncan be one way or two way.\n\n271\n00:15:30.162 --> 00:15:32.327\nLet's take a look at my screen here,\nI got a little drawing.\n\n272\n00:15:32.327 --> 00:15:36.692\nThere's one way trusts and\nthere's two way trusts.\n\n273\n00:15:36.692 --> 00:15:41.088\nAlmost self-explanatory until I\nthrow you a little curve ball here.\n\n274\n00:15:41.088 --> 00:15:43.073\nA one-way trust is just that.\n\n275\n00:15:43.073 --> 00:15:46.324\nThere's trust going in one direction,\nright?\n\n276\n00:15:46.324 --> 00:15:48.640\nA two-way trust,\nthere's trust going in both directions.\n\n277\n00:15:48.640 --> 00:15:49.240\nAll right.\n\n278\n00:15:49.240 --> 00:15:50.980\nWell, what does he mean by trust?\n\n279\n00:15:50.980 --> 00:15:55.185\nWell, we'll call this guy over here,\nin fact let's do this.\n\n280\n00:15:55.185 --> 00:15:58.756\nLet's just call him Domain A over here.\n\n281\n00:15:58.756 --> 00:16:04.792\nAnd we'll call this one\nDomain B over here.\n\n282\n00:16:04.792 --> 00:16:05.337\nAll right?\n\n283\n00:16:05.337 --> 00:16:06.265\nAnd we'll put that B right in\nthe middle of that user's head.\n\n284\n00:16:06.265 --> 00:16:07.235\nAll right?\n\n285\n00:16:07.235 --> 00:16:08.255\nAll right.\n\n286\n00:16:08.255 --> 00:16:11.645\nSo, I've got Domain A and\nI've got Domain B.\n\n287\n00:16:11.645 --> 00:16:13.704\nWell, in this case,\nI'm showing the direct,\n\n288\n00:16:13.704 --> 00:16:15.253\nlook at the direction of the arrow.\n\n289\n00:16:15.253 --> 00:16:18.870\nDomain A trusts Domain B.\n\n290\n00:16:18.870 --> 00:16:21.990\nSo the arrow goes from A to B.\n\n291\n00:16:21.990 --> 00:16:26.820\nAnd what that means is, a user in B\n\n292\n00:16:26.820 --> 00:16:31.810\ncan now be given access\nto resources in Domain A.\n\n293\n00:16:31.810 --> 00:16:36.120\nSo the access goes in the opposite\ndirection of the trust.\n\n294\n00:16:36.120 --> 00:16:39.670\nThat's like saying I trust Ronnie.\n\n295\n00:16:39.670 --> 00:16:42.460\nI'm gonna give Ronnie a key to my house.\n\n296\n00:16:42.460 --> 00:16:45.390\nHe can now go into my house, right?\n\n297\n00:16:45.390 --> 00:16:47.820\nBut I can't get into Ronnie's house.\n\n298\n00:16:47.820 --> 00:16:49.420\nHe didn't say he trusted me.\n\n299\n00:16:49.420 --> 00:16:51.110\nHe didn't give me a key to his house.\n\n300\n00:16:51.110 --> 00:16:52.758\nSo you see how that one way is working?\n\n301\n00:16:52.758 --> 00:16:55.094\nIn this case, A trusts B,\n\n302\n00:16:55.094 --> 00:17:00.420\nwhich means users in B can be\ngiven access to resources in A.\n\n303\n00:17:00.420 --> 00:17:01.885\nBut not vice versa.\n\n304\n00:17:01.885 --> 00:17:03.145\nAll right?\n\n305\n00:17:03.145 --> 00:17:06.015\nSo that arrow of direction\nis very important.\n\n306\n00:17:06.015 --> 00:17:09.575\nIf A trusts B,\nusers in B can access resources in A.\n\n307\n00:17:09.575 --> 00:17:12.725\nIf I do a two way, well, now it's like\nwe swapped keys to houses, right?\n\n308\n00:17:12.725 --> 00:17:15.085\nI can get in Ronnie's house,\nRonnie can get into mine.\n\n309\n00:17:15.085 --> 00:17:19.090\nAnd now, users in A can be\ngiven access to resources in B.\n\n310\n00:17:19.090 --> 00:17:21.560\nUsers in B can be given\naccess to resources in A.\n\n311\n00:17:21.560 --> 00:17:24.000\nThey both trust each other, right?\n\n312\n00:17:24.000 --> 00:17:25.140\nSo you got one way trust.\n\n313\n00:17:25.140 --> 00:17:26.650\nYou got two way trust.\n\n314\n00:17:26.650 --> 00:17:30.603\nAnother concept I want to throw out right\nhere in the beginning is the fact that it\n\n315\n00:17:30.603 --> 00:17:33.490\ndoesn't automatically\ngive them any access.\n\n316\n00:17:33.490 --> 00:17:35.370\nJust because the trust is there,\n\n317\n00:17:35.370 --> 00:17:38.870\nyou still have to specify what\nyou want to allow them to access.\n\n318\n00:17:38.870 --> 00:17:43.350\nThat doesn't mean they just get full\nreign as soon as I create that trust.\n\n319\n00:17:43.350 --> 00:17:46.210\nSo we've got the trust\ndirection to worry about.\n\n320\n00:17:46.210 --> 00:17:49.325\nWe also have to worry about\nsomething know as transitivity.\n\n321\n00:17:49.325 --> 00:17:50.400\nAll right?\n\n322\n00:17:50.400 --> 00:17:55.030\nTransitivity is a funny word, but it's\npretty easy once you all say this, and\n\n323\n00:17:55.030 --> 00:17:57.140\nI think it'll make sense to you.\n\n324\n00:17:57.140 --> 00:18:00.380\nI've got three domains, domain A,\ndomain B, and domain C.\n\n325\n00:18:00.380 --> 00:18:02.370\nAnd I've got some one way trusts set up.\n\n326\n00:18:02.370 --> 00:18:03.535\nA trusts B.\n\n327\n00:18:03.535 --> 00:18:04.955\nAnd B trusts C.\n\n328\n00:18:04.955 --> 00:18:10.780\nIf these are transitive trusts,\nthat means A now trusts C.\n\n329\n00:18:10.780 --> 00:18:14.595\nIt's like saying I trust Ronnie.\n\n330\n00:18:14.595 --> 00:18:15.915\nRonnie trusts Wes.\n\n331\n00:18:15.915 --> 00:18:17.945\nTherefore, I trust Wes.\n\n332\n00:18:17.945 --> 00:18:20.730\nRight?\nI trust that Ronnie wouldn't trust Wes\n\n333\n00:18:20.730 --> 00:18:22.860\nunless he was truly trustworthy.\n\n334\n00:18:22.860 --> 00:18:26.480\nSo I don't have to set up\nan individual trust with Wes.\n\n335\n00:18:26.480 --> 00:18:29.130\nI can just trust him transitively, right?\n\n336\n00:18:29.130 --> 00:18:29.668\nSo that's what that transitive means.\n\n337\n00:18:29.668 --> 00:18:34.110\nIf A trusts B and\nB trusts C, then A trusts C.\n\n338\n00:18:34.110 --> 00:18:35.582\nNow, it's still one way.\n\n339\n00:18:35.582 --> 00:18:37.220\nAll right?\nThese could be two way.\n\n340\n00:18:37.220 --> 00:18:39.890\nI could change these arrows and\nmake them two way.\n\n341\n00:18:39.890 --> 00:18:43.537\nAnd they could also be two\nway transitive trusts.\n\n342\n00:18:43.537 --> 00:18:46.453\nAnd then A would trust B,\nB would trust C, C would trust B,\n\n343\n00:18:46.453 --> 00:18:48.135\nC would trust A, A would trust C.\n\n344\n00:18:48.135 --> 00:18:49.110\nRight?\nIt would be,\n\n345\n00:18:49.110 --> 00:18:51.301\neverybody's just a big happy trust party.\n\n346\n00:18:51.301 --> 00:18:52.360\nAll right?\n\n347\n00:18:52.360 --> 00:18:57.635\nSo, transitivity is whether or\nnot that we can go through the trust,\n\n348\n00:18:57.635 --> 00:19:01.685\nlike A can actually travel all\nthe way through to C here.\n\n349\n00:19:01.685 --> 00:19:04.797\nRemember, though, the user accesses\nis the opposite direction.\n\n350\n00:19:04.797 --> 00:19:11.291\nSo that means users in C can now be\ngiven access to resources in domain A.\n\n351\n00:19:11.291 --> 00:19:14.087\nAll right?\nSo we got one way, two way, and\n\n352\n00:19:14.087 --> 00:19:16.560\nwe got transitive.\n\n353\n00:19:16.560 --> 00:19:20.290\n>> Now, Mike, I also understand, then,\nthat, you talked about the very fact that\n\n354\n00:19:20.290 --> 00:19:24.260\nsometimes trusts are already created for\nus, and this is the operating system\n\n355\n00:19:24.260 --> 00:19:27.280\ntaking care of it, and\nthen we don't have to worry about it.\n\n356\n00:19:27.280 --> 00:19:30.110\nSo if it sets up the trust for us,\nthat's all we have to worry about, right?\n\n357\n00:19:30.110 --> 00:19:31.215\n>> That's it.\nThat's all we need.\n\n358\n00:19:31.215 --> 00:19:33.780\n>> [LAUGH]\n>> It really does do a big part for us.\n\n359\n00:19:33.780 --> 00:19:35.180\nWhen we set up a forest, right?\n\n360\n00:19:35.180 --> 00:19:40.200\nSo, here I've got a little drawing\nof a heavily domained forest,\n\n361\n00:19:40.200 --> 00:19:43.205\na forest that contains many, many domains.\n\n362\n00:19:43.205 --> 00:19:45.955\nAnd as you add those domains,\n\n363\n00:19:45.955 --> 00:19:49.945\nautomatic two-way transitive\ntrusts are going to get created.\n\n364\n00:19:49.945 --> 00:19:52.525\nSo, let's say we start with ITProTV,\nright?\n\n365\n00:19:52.525 --> 00:19:54.535\nThat was our very first domain.\n\n366\n00:19:54.535 --> 00:19:56.085\nThat's that root domain.\n\n367\n00:19:56.085 --> 00:19:57.755\nThere's nothing else.\n\n368\n00:19:57.755 --> 00:20:00.750\nWell, when I add a child domain,\nthere's an automatic\n\n369\n00:20:00.750 --> 00:20:05.570\ntwo way transitive trust created\nbetween parent and child domains.\n\n370\n00:20:05.570 --> 00:20:10.293\nSo, when I added au.lab.itpro.tv\nthere was an automatic\n\n371\n00:20:10.293 --> 00:20:15.208\ntwo-way transitive trust created\nbetween parent and child.\n\n372\n00:20:15.208 --> 00:20:16.005\nSame thing here, right?\n\n373\n00:20:16.005 --> 00:20:17.709\nAutomatic two-way transitive trust.\n\n374\n00:20:17.709 --> 00:20:20.170\nSo remember what we said\nabout transitivity.\n\n375\n00:20:20.170 --> 00:20:26.618\nIf A trusts B and\nB trusts C, then A trusts C.\n\n376\n00:20:26.618 --> 00:20:27.290\nThese are two-way.\n\n377\n00:20:27.290 --> 00:20:29.255\nSo if C trusts B and\nB trusts A, then C trusts A.\n\n378\n00:20:29.255 --> 00:20:30.435\nSo, in other words,\n\n379\n00:20:30.435 --> 00:20:34.275\nall these domains trust all these\nother domains within that tree.\n\n380\n00:20:35.605 --> 00:20:39.555\nThere's also an automatic\ntwo-way transitive trust created\n\n381\n00:20:39.555 --> 00:20:40.595\nbetween tree roots.\n\n382\n00:20:40.595 --> 00:20:44.705\nNow, that's a term I don't think I used\nearlier, so let's define that real quick.\n\n383\n00:20:44.705 --> 00:20:47.135\nRemember what a tree is.\n\n384\n00:20:47.135 --> 00:20:50.370\nWell, the first domain in that\ntree is known as the tree root.\n\n385\n00:20:50.370 --> 00:20:53.313\nSo this guy is the tree root for\nthis tree, but\n\n386\n00:20:53.313 --> 00:20:58.590\nhe's also the forest root because it was\nthe first domain created in the forest.\n\n387\n00:20:58.590 --> 00:21:03.326\nBut any additional trees that we create,\nlike contoso.com, nwtraders.com,\n\n388\n00:21:03.326 --> 00:21:07.925\nthere's an automatic two way transit of\ntrust created between the tree root and\n\n389\n00:21:07.925 --> 00:21:09.060\nthe forest root.\n\n390\n00:21:09.060 --> 00:21:10.610\nAnd then, of course, parent and\n\n391\n00:21:10.610 --> 00:21:14.270\nchild has an automatic two-way\ntransitive trust created.\n\n392\n00:21:14.270 --> 00:21:19.260\nSo in the end, without doing anything,\nwithin my forest\n\n393\n00:21:19.260 --> 00:21:23.771\nall domains trust all other domains\nbecause there's a two-way transitive trust\n\n394\n00:21:23.771 --> 00:21:28.050\ncreated between every parent and child,\nand every tree root and the forest root.\n\n395\n00:21:28.050 --> 00:21:33.870\nSo, out of the box, as you set up active\ndirectory without doing anything else,\n\n396\n00:21:33.870 --> 00:21:37.970\nI can give access from users from one\ndomain to resources in any other domain.\n\n397\n00:21:37.970 --> 00:21:40.880\nAnd that makes it pretty easy to work,\nand that's, again,\n\n398\n00:21:40.880 --> 00:21:42.830\nthat's a big advantage of that forest,\nright?\n\n399\n00:21:42.830 --> 00:21:45.160\nThat's my enterprise network.\n\n400\n00:21:45.160 --> 00:21:49.540\n>> Now, Mike, we also what we call\nexternal trust to help us out here, too.\n\n401\n00:21:49.540 --> 00:21:51.785\nIs that when we start establishing\ntrust between two forests?\n\n402\n00:21:51.785 --> 00:21:54.190\n>> External trust can be.\n\n403\n00:21:55.510 --> 00:22:00.050\nWe have, in fact, before Windows 2000 we\ndidn't have what we call forests trusts.\n\n404\n00:22:00.050 --> 00:22:03.510\nSo, external trusts\nare used in two situations.\n\n405\n00:22:03.510 --> 00:22:05.860\nOne, if you've got an old NT domain\n\n406\n00:22:05.860 --> 00:22:10.840\nthat you need to establish a trust\nrelationship with your forest.\n\n407\n00:22:10.840 --> 00:22:15.000\nThe other is when you want\nindividual domains within forests\n\n408\n00:22:15.000 --> 00:22:19.260\nto trust each other, you can create\nwhat we call an external trust.\n\n409\n00:22:19.260 --> 00:22:22.450\nExternal trusts are non-transitive.\n\n410\n00:22:22.450 --> 00:22:26.100\nThat means if this domain here, all right,\n\n411\n00:22:26.100 --> 00:22:30.810\ntrusts this domain on the right,\nthat doesn't mean just because, don't\n\n412\n00:22:30.810 --> 00:22:34.912\nforget there is a two-way transitive trust\nhere, they can't go across that trust.\n\n413\n00:22:34.912 --> 00:22:35.730\nAll right?\n\n414\n00:22:35.730 --> 00:22:38.280\nExternal trusts are non-transitive.\n\n415\n00:22:38.280 --> 00:22:42.860\nThey can be one way or two ways, so\nI can set it up in both directions.\n\n416\n00:22:42.860 --> 00:22:45.310\nThe other thing we wanna\nbe familiar with with these\n\n417\n00:22:45.310 --> 00:22:49.760\nexternal trusts is something\nknown as SID filtering.\n\n418\n00:22:49.760 --> 00:22:53.063\nThis is a security\nprecaution that's enabled\n\n419\n00:22:53.063 --> 00:22:56.626\nby default on all external\ntrusts that we create.\n\n420\n00:22:56.626 --> 00:22:59.580\nAnd what's happening?\n\n421\n00:22:59.580 --> 00:23:04.109\nWhen you create a trust like this,\nso let's call this domain over here,\n\n422\n00:23:04.109 --> 00:23:07.040\ndomain, we'll just call\nit the left domain.\n\n423\n00:23:07.040 --> 00:23:09.467\n>> [LAUGH]\n>> We'll call this guy over here the right\n\n424\n00:23:09.467 --> 00:23:10.045\ndomain.\n\n425\n00:23:10.045 --> 00:23:11.011\nSo you can see that the arrow\ngoes from left to right.\n\n426\n00:23:11.011 --> 00:23:16.016\nThat means user access\nis from right to left.\n\n427\n00:23:16.016 --> 00:23:17.726\nAll right?\nSo when a user in this domain\n\n428\n00:23:17.726 --> 00:23:22.417\non the right comes across this trust and\ntries to access resources over in that\n\n429\n00:23:22.417 --> 00:23:26.962\ndomain on the left, well, he brings\nalong his access token that was issued\n\n430\n00:23:26.962 --> 00:23:31.248\nto him by his domain Domain controller\nover in his domain on the right.\n\n431\n00:23:31.248 --> 00:23:32.904\nThe trust is saying, hey,\n\n432\n00:23:32.904 --> 00:23:37.018\nyou can trust the authentication\nthat occurs in that other domain.\n\n433\n00:23:37.018 --> 00:23:40.460\nIt's allowing that user to bring\nhis access token with him so\n\n434\n00:23:40.460 --> 00:23:44.657\nthat I can give him access to resources\nover here in the domain on the left.\n\n435\n00:23:44.657 --> 00:23:47.852\nWell, my domain controller is\nnot doing that authentication.\n\n436\n00:23:47.852 --> 00:23:50.340\nIt's just accepting this access token.\n\n437\n00:23:50.340 --> 00:23:54.010\nWhat a malicious person could do,\nis they could fabricate or\n\n438\n00:23:54.010 --> 00:23:58.240\nmodify their access token before\nthey came across that trust.\n\n439\n00:23:58.240 --> 00:24:03.380\nThey could find, remember an access token\nhas the SID of your user account and\n\n440\n00:24:03.380 --> 00:24:05.620\nall of the groups you belong to.\n\n441\n00:24:05.620 --> 00:24:10.430\nWell without too much work they\ncould figure out the SID for\n\n442\n00:24:10.430 --> 00:24:12.400\nmy domains admin group.\n\n443\n00:24:12.400 --> 00:24:12.950\nAll right.\n\n444\n00:24:12.950 --> 00:24:14.274\nOr my administrator group.\n\n445\n00:24:14.274 --> 00:24:17.520\nAnd they could modify their access token,\n\n446\n00:24:17.520 --> 00:24:20.953\nto include the SID of\nmy domain admins group.\n\n447\n00:24:20.953 --> 00:24:22.695\nSo when they come across that trust,\n\n448\n00:24:22.695 --> 00:24:25.990\nmy domain's gonna say you're\na member of the domain admins.\n\n449\n00:24:25.990 --> 00:24:27.620\nYou can have whatever you want.\n\n450\n00:24:27.620 --> 00:24:30.040\nHere.\nLet's just open up the gates right?\n\n451\n00:24:30.040 --> 00:24:32.564\nThat's Something that we\ndon't want to happen.\n\n452\n00:24:32.564 --> 00:24:35.181\nAnd that's where this what's\ncalled SID quarantine or\n\n453\n00:24:35.181 --> 00:24:38.587\nSID filtering depending on which\nbook you're reading comes into play.\n\n454\n00:24:38.587 --> 00:24:43.274\nAnd it's enabled by default,\nit only allows you to\n\n455\n00:24:43.274 --> 00:24:48.297\nbring your SID,\nthere's no what we call SID history.\n\n456\n00:24:48.297 --> 00:24:50.550\nAnd I guess that's something\nwe should define too.\n\n457\n00:24:50.550 --> 00:24:53.195\nSID history, as we migrate domains,\n\n458\n00:24:53.195 --> 00:24:56.507\nsometimes we have to\nchange a user account SID.\n\n459\n00:24:56.507 --> 00:25:01.728\nThe SID, the S-I-D, includes your\ndomain ID as well as your relative ID.\n\n460\n00:25:01.728 --> 00:25:05.856\nAnd if I migrate you to a new domain,\nyou get a new domain ID.\n\n461\n00:25:05.856 --> 00:25:08.341\nThat means your sid is gonna change.\n\n462\n00:25:08.341 --> 00:25:12.670\nWhich means you'd lose access to any\nresources that you used to have access to.\n\n463\n00:25:12.670 --> 00:25:15.230\nSo a way to prevent that is SID history.\n\n464\n00:25:15.230 --> 00:25:16.880\nIt remembers your old SID's.\n\n465\n00:25:16.880 --> 00:25:21.546\nSo when you're going through migration,\nit makes it a much smoother process.\n\n466\n00:25:21.546 --> 00:25:25.669\nBut as I said, the malicious user can\nstart, fabricating these access tokens.\n\n467\n00:25:25.669 --> 00:25:30.659\nAnd they can add additional things to\ntheir SID history that they never should\n\n468\n00:25:30.659 --> 00:25:33.051\nhave had like that domain admin SID.\n\n469\n00:25:33.051 --> 00:25:37.445\nSo, with sid filtering, what it does is\nthat you can bring your current sid and\n\n470\n00:25:37.445 --> 00:25:39.150\nthe groups you belong to.\n\n471\n00:25:39.150 --> 00:25:42.350\nBut I'm going to completely\nignore your SID history.\n\n472\n00:25:42.350 --> 00:25:45.960\nThat way malicious users can't\ntry to pull that trick on us.\n\n473\n00:25:45.960 --> 00:25:48.350\n>> And Mike,\nwe also have access to what we call.\n\n474\n00:25:48.350 --> 00:25:51.570\nRealm trust,\nnow this one I'm completely foreign to.\n\n475\n00:25:51.570 --> 00:25:54.546\n>> Realm trusts are not\nused all that often, but\n\n476\n00:25:54.546 --> 00:25:57.060\nif you need it they're great to have.\n\n477\n00:25:57.060 --> 00:26:01.424\nKerberos is our authentication protocol\nthat we use within Active Directory, but\n\n478\n00:26:01.424 --> 00:26:03.872\nit's not an Active Directory thing, right.\n\n479\n00:26:03.872 --> 00:26:06.891\nOther entities can use Kerberos.\n\n480\n00:26:06.891 --> 00:26:08.330\nYou can have a Linux or a Unix.\n\n481\n00:26:08.330 --> 00:26:11.628\nRealm that uses Kerberus for\nauthentication.\n\n482\n00:26:11.628 --> 00:26:15.210\nWell because they're using Kerberus,\nI can set up a trust with them.\n\n483\n00:26:15.210 --> 00:26:17.800\nIt's just not considered a domain trust or\n\n484\n00:26:17.800 --> 00:26:20.530\na forest trust cause it's\nnot a Microsoft thing.\n\n485\n00:26:20.530 --> 00:26:24.700\nSo those realm trusts are trusts\ncreated between my forest and\n\n486\n00:26:25.710 --> 00:26:27.740\nwhat we call a Kerberus realm.\n\n487\n00:26:27.740 --> 00:26:32.880\nSome other organization that's using\nKerberus as their authentication protocol.\n\n488\n00:26:32.880 --> 00:26:36.750\nThose realm trusts are gonna be\ntransitive or non-transitive.\n\n489\n00:26:36.750 --> 00:26:39.052\nDepends on what you wanna do,\nhow you wanna set it up.\n\n490\n00:26:39.052 --> 00:26:42.303\nThey can be one way or\nthey can be two way.\n\n491\n00:26:42.303 --> 00:26:44.290\n>> Now Mike here's one\nthat I was referring to.\n\n492\n00:26:44.290 --> 00:26:47.890\nThe idea of the, what we call\nthe actual forest stressed itself, and\n\n493\n00:26:47.890 --> 00:26:51.300\nthat is what I was really referring\nto between two forests then.\n\n494\n00:26:51.300 --> 00:26:52.930\n>> Between the entire forest, exactly.\n\n495\n00:26:52.930 --> 00:26:57.041\nYou know, we could set up a external trust\nbetween each domain on one side, and\n\n496\n00:26:57.041 --> 00:26:58.676\neach domain on the other side.\n\n497\n00:26:58.676 --> 00:27:02.442\nAnd you can imagine by the time I\nget drawing, done drawing that,\n\n498\n00:27:02.442 --> 00:27:05.860\nI'd have lines kriss\ncrossing everywhere right.\n\n499\n00:27:05.860 --> 00:27:11.060\nA forest trust is created\nbetween the forests themselves,\n\n500\n00:27:11.060 --> 00:27:12.980\nand it just simplifies the process.\n\n501\n00:27:12.980 --> 00:27:17.320\nIn today's world, this is something,\nI think this came out in,\n\n502\n00:27:17.320 --> 00:27:22.955\nI'm gonna say it started in 2000, but\nwith the, as our organizations changing\n\n503\n00:27:22.955 --> 00:27:28.475\nwe might have a need for separate forests,\nit's not that, it's not super common,\n\n504\n00:27:28.475 --> 00:27:30.363\nI guess, that's a poor way of saying it\n>> [LAUGH]\n\n505\n00:27:30.363 --> 00:27:32.166\n>> You know it's not something you\n\n506\n00:27:32.166 --> 00:27:36.510\nsee everyday but if an organization\nneeds true administrative separation,\n\n507\n00:27:36.510 --> 00:27:38.463\na separate forest is the way to go.\n\n508\n00:27:38.463 --> 00:27:43.293\nNow because we talked, we said we got that\ninner admin account that has full control\n\n509\n00:27:43.293 --> 00:27:45.460\nover the entire forest.\n\n510\n00:27:45.460 --> 00:27:48.890\nSo, I might have industrial or\n\n511\n00:27:48.890 --> 00:27:53.480\ngovernmental regulations that\naren't going to allow that control.\n\n512\n00:27:53.480 --> 00:27:56.880\nThere can't be one person that can be\nin charge of both domains, for example.\n\n513\n00:27:56.880 --> 00:27:58.810\nSo I'd have to split\nthem in separate forests.\n\n514\n00:27:58.810 --> 00:28:01.110\nBut now I want to allow\nresource access across there.\n\n515\n00:28:01.110 --> 00:28:03.990\nThat's where that forest\ntrust comes into play.\n\n516\n00:28:03.990 --> 00:28:07.268\nSo yes you can set up a trust\nbetween separate forests.\n\n517\n00:28:07.268 --> 00:28:11.243\nWhat we wanna understand about\nforest trusts, they can be one way,\n\n518\n00:28:11.243 --> 00:28:12.436\nthey can be two way.\n\n519\n00:28:12.436 --> 00:28:16.945\nThey are transitive in a way, all right?\n\n520\n00:28:16.945 --> 00:28:18.583\n>> [LAUGH]\n>> So Let's clarify that.\n\n521\n00:28:18.583 --> 00:28:23.370\nWhen we set up a forest trust, here I've\ngot ITProTV and I've got fabricam.com and\n\n522\n00:28:23.370 --> 00:28:25.065\nwe've set up a forest trust.\n\n523\n00:28:25.065 --> 00:28:28.601\nAnd you know what, let's just go ahead and\nmake that guy two way as well.\n\n524\n00:28:28.601 --> 00:28:31.504\nSo we'll set up a two way\nforce trust between here.\n\n525\n00:28:31.504 --> 00:28:35.676\nWhat the transitive is referring\nto is that any domain in\n\n526\n00:28:35.676 --> 00:28:40.024\nIT ITProTV can now be given any\nuser in any domain in ITProTV\n\n527\n00:28:40.024 --> 00:28:44.226\ncan now be given access to\nany source in fabricam.com.\n\n528\n00:28:44.226 --> 00:28:49.414\nI don't have to set up individual\ntrust between each domain,\n\n529\n00:28:49.414 --> 00:28:53.519\nso because the forest\nITProTV trusts Fabricam.\n\n530\n00:28:53.519 --> 00:28:57.386\nEvery domain in ITProTV trusts Fabricam.\n\n531\n00:28:57.386 --> 00:28:59.939\nAnd trusts every domain within Fabricam.\n\n532\n00:28:59.939 --> 00:29:01.798\nAnd vice versa if it's two way.\n\n533\n00:29:01.798 --> 00:29:06.485\nEvery domain in Fabricam now\ntrusts every domain in ITProTV.\n\n534\n00:29:06.485 --> 00:29:09.564\ntv.\nSo, that's what I mean by it's transitive,\n\n535\n00:29:09.564 --> 00:29:13.690\nnow let me show you what I mean\nby sort of transitive, alright?\n\n536\n00:29:13.690 --> 00:29:18.265\nWhat I'm gonna do, this is probably\ngonna make it look really ugly, but\n\n537\n00:29:18.265 --> 00:29:21.340\nI'm gonna shrink these\nguys down a little bit and\n\n538\n00:29:21.340 --> 00:29:26.260\nI'm going to grab another one here,\nwe're gonna add a third forest in here.\n\n539\n00:29:26.260 --> 00:29:34.330\nAnd let's just call this one,\nI don't know, northland.com.\n\n540\n00:29:34.330 --> 00:29:35.590\nAll right.\n\n541\n00:29:35.590 --> 00:29:38.310\nOops.\nAnd let's go ahead and\n\n542\n00:29:38.310 --> 00:29:42.999\nset up a little trust\nbetween that guy as well.\n\n543\n00:29:42.999 --> 00:29:49.672\nSo we'll say this forest is also\ngonna trust this forest over here.\n\n544\n00:29:49.672 --> 00:29:50.462\nAll right.\n\n545\n00:29:50.462 --> 00:29:55.117\nSo now all the domains in\nNorthwind trust all the domains in\n\n546\n00:29:55.117 --> 00:29:59.840\nFabricam cuz that is transitive\nbetween those forests.\n\n547\n00:29:59.840 --> 00:30:04.263\nWhat's not gonna happen is Northwind\nis not going to trust itprotv.\n\n548\n00:30:04.263 --> 00:30:07.607\nAnd itprotv is not going\nto trust Northwind.\n\n549\n00:30:07.607 --> 00:30:10.450\nThey are not transitive\nat the forest level.\n\n550\n00:30:10.450 --> 00:30:14.340\nThey are transitive to all the domains\nthat exist within the forest.\n\n551\n00:30:14.340 --> 00:30:22.045\nNow ITProTV could set up their\nown trust with Northwind.\n\n552\n00:30:22.045 --> 00:30:26.300\nRight if they really needed to\ntrust Northwind for some reason.\n\n553\n00:30:26.300 --> 00:30:28.612\nRight, but without this trust,\n\n554\n00:30:28.612 --> 00:30:32.833\nthere's no transit of trust\nacross the forest themselves.\n\n555\n00:30:32.833 --> 00:30:33.969\nSo does that make sense Ronny?\n\n556\n00:30:33.969 --> 00:30:34.960\n>> It does.\n>> And it works?\n\n557\n00:30:34.960 --> 00:30:36.570\nOkay.\nGood, good, good.\n\n558\n00:30:36.570 --> 00:30:39.900\nAnd it's something, you know, cause we\ntalk about the trust being transitive.\n\n559\n00:30:39.900 --> 00:30:42.990\nAnd you think well if A trusts B and\nB trusts C then A trusts C.\n\n560\n00:30:42.990 --> 00:30:45.250\nDon't take it to the forest level though.\n\n561\n00:30:45.250 --> 00:30:46.980\nOnly to the domains within the forest.\n\n562\n00:30:46.980 --> 00:30:47.977\nCause it simplifies things.\n\n563\n00:30:47.977 --> 00:30:52.307\nInstead of having to create dozens of\ntrusts between all the domains in here I\n\n564\n00:30:52.307 --> 00:30:55.569\ncan create one trust between\nthe forest and I can be done.\n\n565\n00:30:55.569 --> 00:30:58.832\nSo it makes it really nice and\neasy administratively.\n\n566\n00:30:58.832 --> 00:31:02.576\n>> Now Mike, we have at least one more to\ntalk about, and this is the confusing one.\n\n567\n00:31:02.576 --> 00:31:04.877\nYou call it a shortcut trust.\n\n568\n00:31:04.877 --> 00:31:08.150\n>> I do, but I wanna point out one more\nthing about these forests, sorry Ronnie.\n\n569\n00:31:08.150 --> 00:31:11.280\nI almost forgot to mention,\nwith the forests,\n\n570\n00:31:11.280 --> 00:31:13.874\nwe can do two types of authentication.\n\n571\n00:31:13.874 --> 00:31:18.890\nSo, when we create this trust between\nthose forests, we can do what's called\n\n572\n00:31:18.890 --> 00:31:24.217\na forest-wide trust, or we can do what we\ncall a selective authentication trust.\n\n573\n00:31:24.217 --> 00:31:28.075\nForest-wide trust means that\nanybody on one side can\n\n574\n00:31:28.075 --> 00:31:32.111\nbe given access to reach any\nresource on the other side.\n\n575\n00:31:32.111 --> 00:31:34.772\nThey're gonna trust that\nidentification process,\n\n576\n00:31:34.772 --> 00:31:36.848\nthat transitivity that we talked about.\n\n577\n00:31:36.848 --> 00:31:41.847\nBut sometimes, that's a little too much,\ncuz what that means is,\n\n578\n00:31:41.847 --> 00:31:47.830\nany user over here in Fabricam can now be\ngiven access to any resource in ITProTV.\n\n579\n00:31:47.830 --> 00:31:49.013\nHere's the other thing.\n\n580\n00:31:49.013 --> 00:31:49.951\nAll of a sudden,\n\n581\n00:31:49.951 --> 00:31:55.051\nall of Fabricam's authenticated users are\nnow part of ITProTV's authenticated users.\n\n582\n00:31:55.051 --> 00:31:59.411\nThere might be resources in ITProTV that\nI wanted to make sure that everybody in\n\n583\n00:31:59.411 --> 00:32:00.611\nITPro had access to.\n\n584\n00:32:00.611 --> 00:32:02.968\nSo I used the authenticated users group.\n\n585\n00:32:02.968 --> 00:32:05.265\nI wasn't thinking about the fact that,\n\n586\n00:32:05.265 --> 00:32:07.994\nthat now includes all\nthe people in Fabricam as well.\n\n587\n00:32:07.994 --> 00:32:09.945\nI didn't mean to do that, right?\n\n588\n00:32:09.945 --> 00:32:14.731\nSo sometimes that forest-wide\nauthentication can be a little\n\n589\n00:32:14.731 --> 00:32:15.910\ntoo generous.\n\n590\n00:32:15.910 --> 00:32:18.211\nThat's where selective\nauthentication comes into play.\n\n591\n00:32:18.211 --> 00:32:23.015\nWe can say, all right, I'm gonna set up a\ntrust, but I'm gonna specify exactly what\n\n592\n00:32:23.015 --> 00:32:26.382\nresources these people can be\ngiven access to, all right?\n\n593\n00:32:26.382 --> 00:32:31.165\nSo you have much more control over\nwhat resources they can access.\n\n594\n00:32:31.165 --> 00:32:35.368\nAgain, keep in mind, just like those\nother trusts, it doesn't give you access.\n\n595\n00:32:35.368 --> 00:32:38.712\nIt just gives you the ability\nto give the access, right?\n\n596\n00:32:38.712 --> 00:32:43.197\nSo forest-wide authentication doesn't\nmean they automatically have access to\n\n597\n00:32:43.197 --> 00:32:47.357\neverything in your forest, but\nit could if you've used that authenticated\n\n598\n00:32:47.357 --> 00:32:50.228\nusers group in a lot of places,\nso keep that in mind.\n\n599\n00:32:50.228 --> 00:32:53.629\nSelective authentication is\ntypically the way you wanna go.\n\n600\n00:32:53.629 --> 00:32:57.468\nA little more work administratively\ncuz once I've setup the trust,\n\n601\n00:32:57.468 --> 00:33:00.525\nI now have to go to each resource and\nallow them access.\n\n602\n00:33:00.525 --> 00:33:03.045\nYou basically do it at the server level.\n\n603\n00:33:03.045 --> 00:33:07.687\nSo if I have three file servers, and\nif I do forest-wide authentication,\n\n604\n00:33:07.687 --> 00:33:12.257\nanother admin could go behind me and\ngive Farbricam to any one of those file\n\n605\n00:33:12.257 --> 00:33:15.222\nservers or\nany resource on those file servers.\n\n606\n00:33:15.222 --> 00:33:19.309\nIf I do selective authentication,\nI can say I'll allow Fabricam to\n\n607\n00:33:19.309 --> 00:33:22.407\naccess file server one,\nbut not two and not three.\n\n608\n00:33:22.407 --> 00:33:26.372\nSo now I can go to any resource on file\nserver one and give Fabricam access, but\n\n609\n00:33:26.372 --> 00:33:28.944\nnot on file server two,\nnot on file server three.\n\n610\n00:33:28.944 --> 00:33:31.638\nSo it's much more control over that.\n\n611\n00:33:31.638 --> 00:33:34.190\nAll right, then we've got,\nRonnie loves these shortcut trusts,\n\n612\n00:33:34.190 --> 00:33:36.002\nI know he's trying to get\nto them really quick.\n\n613\n00:33:36.002 --> 00:33:39.785\nThe shortcut trusts are just that.\n\n614\n00:33:39.785 --> 00:33:41.458\nThey're a shortcut.\n\n615\n00:33:41.458 --> 00:33:48.680\nWe already said that within my forest,\nevery domain trusts every other domain.\n\n616\n00:33:48.680 --> 00:33:53.997\nSo a user in us.contosa.com\ncould be given access\n\n617\n00:33:53.997 --> 00:33:59.324\nto resources in au.lab.itprotv and\nvice versa.\n\n618\n00:33:59.324 --> 00:34:04.747\nA user over in au.lab.itprotv can be given\naccess to resources in us.contoso.com,\n\n619\n00:34:04.747 --> 00:34:07.323\nbecause of the trust that already exist.\n\n620\n00:34:07.323 --> 00:34:12.993\nBut when that user in au goes to access\nthat resource in us.contoso.com,\n\n621\n00:34:12.993 --> 00:34:15.694\nhe's gotta follow the trust path.\n\n622\n00:34:15.694 --> 00:34:18.545\nIn other words, his domain controller,\nwhen he tries to double-click on that\n\n623\n00:34:18.545 --> 00:34:20.894\nresource, his domain controller's\ngonna say, you know what?\n\n624\n00:34:20.894 --> 00:34:24.180\nI can't give you a session token for\nthat, it's not under my control.\n\n625\n00:34:24.180 --> 00:34:26.874\nBut, I have a trust with lab.itprotv,\n\n626\n00:34:26.874 --> 00:34:30.134\nlet me forward you up to\nthat to see what he can do.\n\n627\n00:34:30.134 --> 00:34:32.155\nThis domain controller is\ngonna say the same thing.\n\n628\n00:34:32.155 --> 00:34:34.691\nI can't give you access to that resource,\nbut\n\n629\n00:34:34.691 --> 00:34:37.042\nI have a trust that I\ncan forward you along.\n\n630\n00:34:37.042 --> 00:34:38.378\nAnd then forward him along.\n\n631\n00:34:38.378 --> 00:34:39.782\nAnd then forward him along.\n\n632\n00:34:39.782 --> 00:34:43.969\nAnd eventually the request gets to\nthe domain controller over here\n\n633\n00:34:43.969 --> 00:34:48.094\nin us.contoso.com and\nI can get that access and I'm good to go.\n\n634\n00:34:48.094 --> 00:34:52.400\nBut that can slow\nthe authentication process down.\n\n635\n00:34:52.400 --> 00:34:55.872\nWhat if the domain controllers in itpro.tv\nwere unavailable for some reason?\n\n636\n00:34:55.872 --> 00:34:58.900\nI get forwarded to here,\nI go to get forwarded to here and\n\n637\n00:34:58.900 --> 00:35:02.709\nI would never make it to us.contoso.com\nand I wouldn't get access.\n\n638\n00:35:02.709 --> 00:35:07.179\nJust the process of going through\neach one of these hops takes time.\n\n639\n00:35:07.179 --> 00:35:13.981\nSo if users in au are constantly accessing\nresources over here in us.contosa.com,\n\n640\n00:35:13.981 --> 00:35:17.953\nthen what I can do is I can do a,\nyou know what?\n\n641\n00:35:17.953 --> 00:35:20.518\nI can't put my trust back, Ronnie,\nI deleted that thing, didn't I?\n\n642\n00:35:20.518 --> 00:35:21.597\nThere we go.\n\n643\n00:35:21.597 --> 00:35:24.940\nI can create what's called\na shortcut trust, and\n\n644\n00:35:24.940 --> 00:35:27.495\nit's exactly like the name implies.\n\n645\n00:35:27.495 --> 00:35:31.665\nNow instead of having to follow\nthis trust path all the way around,\n\n646\n00:35:31.665 --> 00:35:33.834\nI can simply go right across here.\n\n647\n00:35:33.834 --> 00:35:37.293\nus directly trusts au.lab.itpro.tv, and\n\n648\n00:35:37.293 --> 00:35:41.646\nmy user can now go this way and\nget access to that resource.\n\n649\n00:35:41.646 --> 00:35:45.872\nNot the user but the authentication\nprocess can go directly over there.\n\n650\n00:35:45.872 --> 00:35:50.624\nSo it's just a way to shortcut that\nauthentication process that could already\n\n651\n00:35:50.624 --> 00:35:51.130\noccur.\n\n652\n00:35:51.130 --> 00:35:56.173\nWe've got the trust there, this speeds\nup the process and those shortcut trusts\n\n653\n00:35:56.173 --> 00:36:01.011\ncan be one way, they can be two way,\nthey can also be transitive, all right?\n\n654\n00:36:01.011 --> 00:36:05.468\nSo you could actually see where a lab\nmight have a quicker time going this way\n\n655\n00:36:05.468 --> 00:36:07.533\nthen around this way, all right?\n\n656\n00:36:07.533 --> 00:36:10.228\nSo that's what we use\nthose shortcut trusts for.\n\n657\n00:36:10.228 --> 00:36:13.359\nLots of different trusts, Ronnie,\nthat we have to be familiar with,\n\n658\n00:36:13.359 --> 00:36:15.173\neach one of them has a specific purpose.\n\n659\n00:36:15.173 --> 00:36:18.509\nWe've got a lot of them that are built\nby default that we already have, and\n\n660\n00:36:18.509 --> 00:36:21.813\nsomething I didn't mention too,\nyou can change those defaults, right?\n\n661\n00:36:21.813 --> 00:36:25.189\nIf we go back to my drawing for\none more second,\n\n662\n00:36:25.189 --> 00:36:30.567\nlet's say that this domain over here\nwas super sensitive R and D, right?\n\n663\n00:36:30.567 --> 00:36:34.642\nDoing research and development and\nI didn't want it to be so easy for\n\n664\n00:36:34.642 --> 00:36:37.729\nother users to gain access\nto resources down here.\n\n665\n00:36:37.729 --> 00:36:39.471\nI can modify that default trust.\n\n666\n00:36:39.471 --> 00:36:40.990\nI could take away the transitivity.\n\n667\n00:36:40.990 --> 00:36:42.791\nI could turn it into a one-way trust.\n\n668\n00:36:42.791 --> 00:36:46.169\nI can remove the trust altogether\nif I really wanted to.\n\n669\n00:36:46.169 --> 00:36:47.411\nSo keep that in mind as well.\n\n670\n00:36:47.411 --> 00:36:51.301\nThose default trusts,\nyou can modify them if you need to.\n\n671\n00:36:51.301 --> 00:36:54.961\n>> So in this episode, right, we took\na look at the basic Active Directory\n\n672\n00:36:54.961 --> 00:36:58.133\nfunctionality where what we did\nwas we talked about the forest\n\n673\n00:36:58.133 --> 00:37:01.249\nfunctional levels as well as\nthe domain functional levels.\n\n674\n00:37:01.249 --> 00:37:05.025\nWe also then talked about the different\ntrusts that we have to have if we\n\n675\n00:37:05.025 --> 00:37:08.737\nare going to be working, well it\nlooks like with multiple domains and\n\n676\n00:37:08.737 --> 00:37:10.479\neven multiple forests as well.\n\n677\n00:37:10.479 --> 00:37:12.151\nAnd this is actually a great time for\n\n678\n00:37:12.151 --> 00:37:15.285\nus because if you're actually\ngetting confused by terminology.\n\n679\n00:37:15.285 --> 00:37:19.278\nWell, Mike actually did help us out\nto understand these types of trust.\n\n680\n00:37:19.278 --> 00:37:22.464\nNow, Mike, I'm gonna assume that we're\ngonna actually be getting into this and\n\n681\n00:37:22.464 --> 00:37:25.385\nactually kinda changing some of these\nthings in future episodes, right?\n\n682\n00:37:25.385 --> 00:37:27.842\n>> Absolutely,\nonce we get Active Directory installed,\n\n683\n00:37:27.842 --> 00:37:30.203\nwe can actually go in and\nlook at some of these trusts.\n\n684\n00:37:30.203 --> 00:37:33.917\nWe'll create some shortcut trust, and\nwe'll have a good time with them.\n\n685\n00:37:33.917 --> 00:37:37.261\n>> So, you're actually staying tuned for\nmore that actually is coming up, so\n\n686\n00:37:37.261 --> 00:37:39.838\nbut at least for right now,\nunderstanding terminology.\n\n687\n00:37:39.838 --> 00:37:43.676\nRealizing that hey, there's a lot more\nbehind it than just installing it and\n\n688\n00:37:43.676 --> 00:37:44.923\nthen just turning it on.\n\n689\n00:37:44.923 --> 00:37:48.580\nThere is a lot of theory behind it, but\nthis is a great kind of review for us.\n\n690\n00:37:48.580 --> 00:37:52.260\nThat's a great place for\nus to end this episode today.\n\n691\n00:37:52.260 --> 00:37:53.838\nThank you for watching.\n\n692\n00:37:53.838 --> 00:37:56.323\nSigning off for ITProTV, I'm Ronnie Wong.\n\n693\n00:37:56.323 --> 00:37:57.379\n>> And I'm Mike Rodrick.\n\n694\n00:37:57.379 --> 00:37:59.620\n>> And we'll see you next time.\n\n695\n00:37:59.620 --> 00:38:06.840\n[MUSIC]\n\n",
          "vimeoId": "146125838"
        },
        {
          "description": "In this episode, Ronnie and Mike get started with installing Active Directory on a Windows Server 2012 R2 machine.  They discuss some of the prerequisites that need to be in place before starting the installation.  Also they show some of the considerations that must be looked at during the installation process.",
          "length": "2159",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-actvedirectory-2-1-installing_active_directory-110415-high.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-actvedirectory-2-1-installing_active_directory-110415-high-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-actvedirectory-2-1-installing_active_directory-110415-high-sm.jpg",
          "title": "Installing Active Directory",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:12.254 --> 00:00:15.381\nWelcome to another exciting\nepisode here on ITPro TV.\n\n3\n00:00:15.381 --> 00:00:16.750\nI'm your host Ronnie Wong.\n\n4\n00:00:16.750 --> 00:00:20.090\nAnd today we'll be taking at\ninstalling Active Directory.\n\n5\n00:00:20.090 --> 00:00:22.129\nAnd who better to help us than well,\nMr. Mike Rodrick?\n\n6\n00:00:22.129 --> 00:00:22.956\nHow's it going Mike?\n\n7\n00:00:22.956 --> 00:00:23.879\n>> It's going great Ronnie.\n\n8\n00:00:23.879 --> 00:00:24.837\nThanks for having me here.\n\n9\n00:00:24.837 --> 00:00:27.837\nWe are gonna be looking, as you said,\nat installing Active Directory.\n\n10\n00:00:27.837 --> 00:00:30.879\nSo, in other episodes,\nwe looked at a lot of the terminology.\n\n11\n00:00:30.879 --> 00:00:33.618\nAnd some of our foundational\nknowledge that we have to have,\n\n12\n00:00:33.618 --> 00:00:36.046\nin order to successfully\ninstall Active Directory.\n\n13\n00:00:36.046 --> 00:00:37.295\nSo, we've got that out of the way.\n\n14\n00:00:37.295 --> 00:00:38.337\nNow we're gonna have the fun.\n\n15\n00:00:38.337 --> 00:00:39.637\nWe're gonna do the fun part,\n\n16\n00:00:39.637 --> 00:00:42.712\nwe're actually gonna install\nActive Directory and create a domain.\n\n17\n00:00:42.712 --> 00:00:45.545\nAnd we'll look at a couple of\ndifferent ways that we can install it.\n\n18\n00:00:45.545 --> 00:00:47.528\nThere are several ways\nwe can install it and\n\n19\n00:00:47.528 --> 00:00:49.963\ndifferent things we might\nbe trying to accomplish.\n\n20\n00:00:49.963 --> 00:00:54.545\nCreating that forest root,\nthat very first domain in our forest, or\n\n21\n00:00:54.545 --> 00:00:56.129\nadding a child domain.\n\n22\n00:00:56.129 --> 00:01:00.912\nWe're adding a second, or third, or fourth\ndomain controller to an existing domain,\n\n23\n00:01:00.912 --> 00:01:03.254\nwe wanna take a look at\nserver core as well.\n\n24\n00:01:03.254 --> 00:01:07.758\nWhat else, creating an additional\ndomain tree within our forest.\n\n25\n00:01:07.758 --> 00:01:10.129\nSo, lots of fun stuff coming your way.\n\n26\n00:01:10.129 --> 00:01:12.879\nSit back, relax, and let's enjoy the ride.\n\n27\n00:01:12.879 --> 00:01:14.853\n[LAUGH]\n>> Remember that when we started\n\n28\n00:01:14.853 --> 00:01:16.514\ninstalling any type of software,\n\n29\n00:01:16.514 --> 00:01:19.046\na lot of times it's very\neasy to just kinda go ahead.\n\n30\n00:01:19.046 --> 00:01:22.629\nI just wanna get started as quickly as\npossible, and we may run into issues.\n\n31\n00:01:22.629 --> 00:01:25.983\nActive Directory is one of those\ntypes of software that we really\n\n32\n00:01:25.983 --> 00:01:29.275\nhave to worry about what are called\ndifferent prerequisites,\n\n33\n00:01:29.275 --> 00:01:31.586\nto make sure that our\nmachine is ready to go.\n\n34\n00:01:31.586 --> 00:01:34.673\nNow Mike,\nI know that since we're doing Server 2012\n\n35\n00:01:34.673 --> 00:01:35.296\nR2-\n>> Mm-Hm.\n\n36\n00:01:35.296 --> 00:01:38.860\n>> At least for me, the only prerequisite\nI'm gonna actually say, that I know,\n\n37\n00:01:38.860 --> 00:01:40.378\nis gonna be Server 2012 R2.\n\n38\n00:01:40.378 --> 00:01:41.671\nIs there more than that?\n\n39\n00:01:41.671 --> 00:01:43.980\n>> [LAUGH] There's a couple of additional\nthings that we wanna check for, but\n\n40\n00:01:43.980 --> 00:01:45.296\nthat is probably the most important one.\n\n41\n00:01:45.296 --> 00:01:50.046\nIf you're gonna install 2012 R2,\nyou definitely need that 2012 R2 Media.\n\n42\n00:01:50.046 --> 00:01:52.421\nSo, that's a good place to start.\n\n43\n00:01:52.421 --> 00:01:56.170\nBut in all seriousness, if I can say that.\n\n44\n00:01:56.170 --> 00:01:58.421\n>> [LAUGH]\n>> Can't be serious around here.\n\n45\n00:01:58.421 --> 00:02:01.234\nThere are some things that you've got\nto check, that you've got to make sure\n\n46\n00:02:01.234 --> 00:02:04.140\nare ready before you really start\nthe active directory installation.\n\n47\n00:02:04.140 --> 00:02:07.730\nIt'll go through some prereq checks as\nwell, towards the end of the wizard,\n\n48\n00:02:07.730 --> 00:02:08.770\nwhich I'll show you.\n\n49\n00:02:08.770 --> 00:02:10.636\nBut for us,\nthe first thing we're gonna do,\n\n50\n00:02:10.636 --> 00:02:12.462\nwe're gonna pretend that we have nothing.\n\n51\n00:02:12.462 --> 00:02:13.421\nI've got a server.\n\n52\n00:02:13.421 --> 00:02:15.921\nI've got 2012 R2 installed on it.\n\n53\n00:02:15.921 --> 00:02:17.420\nI wanna install Active Directory.\n\n54\n00:02:17.420 --> 00:02:22.920\nI wanna create my first domain and set up\nmy forest, and get everything started.\n\n55\n00:02:22.920 --> 00:02:26.088\nSo, what we would do, and\nI'm logged onto my server here.\n\n56\n00:02:26.088 --> 00:02:30.279\nA couple of the things that we're gonna\ncheck, first of all is, you wanna make\n\n57\n00:02:30.279 --> 00:02:34.046\nsure that you've got an NTFS volume,\nwhich you probably already do.\n\n58\n00:02:34.046 --> 00:02:38.188\nBut let's say you were wanting to\nput the database and the log files,\n\n59\n00:02:38.188 --> 00:02:41.117\nsome of those,\nthe sys vol on another volume, or\n\n60\n00:02:41.117 --> 00:02:45.129\nanother physical disk,\nwe talked about that in another episode.\n\n61\n00:02:45.129 --> 00:02:48.583\nYou would need to make sure that\nthat disk, that extra disk or\n\n62\n00:02:48.583 --> 00:02:51.587\nwhatever you were doing,\nwas formatted with NTFS.\n\n63\n00:02:51.587 --> 00:02:54.754\nIt has to be on an NTFS volume,\nso we can control access.\n\n64\n00:02:54.754 --> 00:02:59.237\nWith NTFS, they get the file and folder\nlevel permissions that I need to keep\n\n65\n00:02:59.237 --> 00:03:02.546\nActive Ddirectory,\nthe database, all the contents.\n\n66\n00:03:02.546 --> 00:03:03.754\nI've gotta keep that secure.\n\n67\n00:03:03.754 --> 00:03:07.171\nI've gotta be able to control who can or\ncan't access that information.\n\n68\n00:03:07.171 --> 00:03:11.420\nThat's highly sensitive information,\nso has to be on an NTFS volume.\n\n69\n00:03:11.420 --> 00:03:15.086\nThat's the first one, and\nthat's a pretty easy one.\n\n70\n00:03:15.086 --> 00:03:19.110\nThe next thing we're gonna look\nat is our TCP/IP settings.\n\n71\n00:03:19.110 --> 00:03:21.980\nAnd I'm gonna include their\ncomputer name along with that.\n\n72\n00:03:21.980 --> 00:03:24.187\nAlthough it didn't really\nfall under TCP/IP, but\n\n73\n00:03:24.187 --> 00:03:26.300\nit's something that we wanna check.\n\n74\n00:03:26.300 --> 00:03:30.177\nWhen you install Active Directory,\nchanging the name after the fact,\n\n75\n00:03:30.177 --> 00:03:30.961\nit is tricky.\n\n76\n00:03:30.961 --> 00:03:35.587\nI mean it's not difficult to do but,\nit can break things.\n\n77\n00:03:35.587 --> 00:03:38.547\nAnd it's really better,\nit's not impossible, you can do it.\n\n78\n00:03:38.547 --> 00:03:41.462\nBut it's not a good idea\nif you can avoid it.\n\n79\n00:03:41.462 --> 00:03:43.088\nSo, it's a simple thing.\n\n80\n00:03:43.088 --> 00:03:44.629\nPlan this out ahead of time.\n\n81\n00:03:44.629 --> 00:03:48.880\nCome up with your naming convention that\nyou wanna use throughout your network.\n\n82\n00:03:48.880 --> 00:03:52.962\nIf this is your fist server and your first\ndomain, it's a great place to start.\n\n83\n00:03:52.962 --> 00:03:56.007\nSet that naming convention,\ndecide what you're gonna use for\n\n84\n00:03:56.007 --> 00:03:59.753\nthe rest of your development for\nthat network, and everything will be good.\n\n85\n00:03:59.753 --> 00:04:02.296\nYou won't have to go back and\nworry about changing things later on.\n\n86\n00:04:02.296 --> 00:04:05.879\n>> Now Mike, when you start\ntalking about TCP/IP settings.\n\n87\n00:04:05.879 --> 00:04:08.743\nI know that one of the big\nthings that everyone says is,\n\n88\n00:04:08.743 --> 00:04:11.753\nAll domain controllers should\nhave a static IP address.\n\n89\n00:04:11.753 --> 00:04:16.545\nBut Mike, if I leave it at the obtain\nan IP address automatically,\n\n90\n00:04:16.545 --> 00:04:17.921\nthat should work.\n\n91\n00:04:17.921 --> 00:04:20.587\n>> It's gonna scream at you,\nRonnie, it's not gonna like that.\n\n92\n00:04:20.587 --> 00:04:23.254\nIt really, a lot of things\nare tied to that IP address.\n\n93\n00:04:23.254 --> 00:04:27.546\nIf you're familiar with DNS, you know\nthat, like, SRV records and some of these,\n\n94\n00:04:27.546 --> 00:04:29.546\nthey're gonna be tied back to that IP.\n\n95\n00:04:29.546 --> 00:04:32.255\nAnd if I change that IP address,\nthat can cause problems.\n\n96\n00:04:32.255 --> 00:04:34.170\nIt should re-register.\n\n97\n00:04:34.170 --> 00:04:36.712\nI mean,\nit's not gonna break things permanently.\n\n98\n00:04:36.712 --> 00:04:40.212\nBut again, it's something that\nyou really don't wanna do.\n\n99\n00:04:40.212 --> 00:04:41.296\nAnd it will scream at you.\n\n100\n00:04:41.296 --> 00:04:46.461\nIt's gonna say wait a second,\nyour IP address is dynamically assigned.\n\n101\n00:04:46.461 --> 00:04:48.754\nYou need to fix that before we go on.\n\n102\n00:04:48.754 --> 00:04:52.586\nYou'll see that I'm gonna leave\nmy IPv6 address as dynamic.\n\n103\n00:04:52.586 --> 00:04:56.814\nCuz we're not gonna be worried about\nIPv6 in my little test lab and\n\n104\n00:04:56.814 --> 00:04:58.712\nit'll let me go on with that.\n\n105\n00:04:58.712 --> 00:05:02.879\nBut if I leave that IPv4 address dynamic,\nit's really not gonna like that.\n\n106\n00:05:02.879 --> 00:05:04.629\nSo you can see here,\nI'm on Server Manager.\n\n107\n00:05:04.629 --> 00:05:06.452\nAnd I've gone to local server and\n\n108\n00:05:06.452 --> 00:05:10.629\nI've already set the name of my computer\nto dc01, so that I wanna call it.\n\n109\n00:05:10.629 --> 00:05:15.204\nIn the real world, you should probably use\na little more descriptive names especially\n\n110\n00:05:15.204 --> 00:05:19.340\nif you plan on, even if you don't plan on,\nyou'll probably end up growing and\n\n111\n00:05:19.340 --> 00:05:22.347\nyou add additional offices,\nDC wants a little generic,\n\n112\n00:05:22.347 --> 00:05:24.546\nmost companies will include-\n>> Location.\n\n113\n00:05:24.546 --> 00:05:28.356\n>> A location in there, possibly\na function like I've got dc01 kind of\n\n114\n00:05:28.356 --> 00:05:30.754\nindicates that it's a domain controller.\n\n115\n00:05:30.754 --> 00:05:34.879\nAnd maybe even the operating\nsystem version in that name.\n\n116\n00:05:34.879 --> 00:05:37.754\nSo again,\nsomething that you've gotta think about.\n\n117\n00:05:37.754 --> 00:05:41.546\nCuz as you grow and add more services,\nit's just gonna get more complex.\n\n118\n00:05:41.546 --> 00:05:43.960\nSo, a good naming convention\nwill get you a long way.\n\n119\n00:05:43.960 --> 00:05:45.400\nSo, I've already got the name set.\n\n120\n00:05:45.400 --> 00:05:46.481\nNext thing I can do down here,\n\n121\n00:05:46.481 --> 00:05:48.836\nI can see that I've already got\na statically mapped IP address.\n\n122\n00:05:48.836 --> 00:05:50.713\nLet's take a peek at it real quick.\n\n123\n00:05:50.713 --> 00:05:54.462\nI'm just gonna click on my link here to\nopen up my network adapter's properties.\n\n124\n00:05:54.462 --> 00:06:00.796\nAnd take a look at, oops,\ntake a look at IPv4 here, if it'll let me.\n\n125\n00:06:00.796 --> 00:06:02.336\nIt's thinking about it, there it goes.\n\n126\n00:06:02.336 --> 00:06:04.920\nAnd-\n>> [LAUGH]\n\n127\n00:06:04.920 --> 00:06:06.245\n>> I evidently disabled it,\n\n128\n00:06:06.245 --> 00:06:07.213\nthat's not good.\n\n129\n00:06:07.213 --> 00:06:14.560\nThere I can see I've statically mapped it\nto 10.1.1.200, using a 24-bit subnet mask.\n\n130\n00:06:14.560 --> 00:06:16.270\nAnd look at my DNS server.\n\n131\n00:06:16.270 --> 00:06:18.834\nNotice that I've pointed\nit back to itself,\n\n132\n00:06:18.834 --> 00:06:23.296\nbecause I know when I install Active\nDirectory, I'm also gonna install DNS.\n\n133\n00:06:23.296 --> 00:06:27.398\nAnd when I install Active Directory, and\nany service for that matter, that server\n\n134\n00:06:27.398 --> 00:06:31.046\nneeds to register those SRV records,\nso that other machines can find it.\n\n135\n00:06:31.046 --> 00:06:33.796\nWhen they say hey, I need to log in,\nI need a Kerberos server.\n\n136\n00:06:33.796 --> 00:06:34.754\nThey call up DNS.\n\n137\n00:06:34.754 --> 00:06:36.629\nAnd they look for those SRV records.\n\n138\n00:06:36.629 --> 00:06:41.088\nWell, my DNS server, I mean, excuse me,\nmy domain controller needs to be able to\n\n139\n00:06:41.088 --> 00:06:43.754\ncontact the server and\nregister those records.\n\n140\n00:06:43.754 --> 00:06:45.921\nAnd he's gonna be the DNS server.\n\n141\n00:06:45.921 --> 00:06:48.420\nSo, you just need to register\nwith himself there, so.\n\n142\n00:06:48.420 --> 00:06:51.212\nYou could even use, I see some\npeople putting a loop back here.\n\n143\n00:06:51.212 --> 00:06:54.170\nYou know, do a little 127.0.0.1, and\n\n144\n00:06:54.170 --> 00:06:57.211\nthat would be fine,\nthat would be the same thing.\n\n145\n00:06:57.211 --> 00:07:01.004\nSo, everything is statically mapped,\nI'll go ahead and click OK, and OK.\n\n146\n00:07:01.004 --> 00:07:03.546\nAnd I'll make sure I\nenable that one more time.\n\n147\n00:07:03.546 --> 00:07:06.546\nLittle miss click with the mouse.\n\n148\n00:07:06.546 --> 00:07:09.004\nAnd it's just lagging\nbehind my clicks here.\n\n149\n00:07:09.004 --> 00:07:11.430\nSo there it goes, now it's enabling.\n\n150\n00:07:11.430 --> 00:07:14.470\nAnd we should be good to go and\nI will close that.\n\n151\n00:07:14.470 --> 00:07:18.310\nSo, we've got our name set,\nour TCP/IP information is configured.\n\n152\n00:07:18.310 --> 00:07:21.340\nDNS I mentioned, it's required for\nActive Directory.\n\n153\n00:07:21.340 --> 00:07:23.650\nYou can install DNS along\nwith Active Directory,\n\n154\n00:07:23.650 --> 00:07:26.100\nor you might already have DNS running.\n\n155\n00:07:26.100 --> 00:07:30.150\nMaybe in your work group environment,\nyou had a bind server.\n\n156\n00:07:30.150 --> 00:07:32.463\nSome other DNS platform.\n\n157\n00:07:32.463 --> 00:07:34.836\nIt don't have to be Microsoft.\n\n158\n00:07:34.836 --> 00:07:36.211\nIf you want you can use that.\n\n159\n00:07:36.211 --> 00:07:40.190\nAs long as it can find it when you're\ninstalling Active Directory again, so\n\n160\n00:07:40.190 --> 00:07:41.879\nit can register those records.\n\n161\n00:07:41.879 --> 00:07:44.295\nIf you don't have DNS already,\nthat's fine.\n\n162\n00:07:44.295 --> 00:07:47.128\nWe can install it along\nwith Active Directory.\n\n163\n00:07:47.128 --> 00:07:49.004\nAnd it'll tell me too.\n\n164\n00:07:49.004 --> 00:07:49.518\nSorry about that.\n\n165\n00:07:49.518 --> 00:07:54.500\n>> Now Mike, I know that in previous\nversions of Windows server,\n\n166\n00:07:54.500 --> 00:07:58.458\nwe also had to deal with\nsomething called Adprep.\n\n167\n00:07:58.458 --> 00:07:59.799\n>> Not really, it's pretty cool.\n\n168\n00:07:59.799 --> 00:08:03.280\nThey've stepped up their game here or\nthey've made it a lot easier for us.\n\n169\n00:08:03.280 --> 00:08:07.086\nAnd what Ronnie's referring to there,\nit's a tool called adprep and\n\n170\n00:08:07.086 --> 00:08:11.200\nit's found on the DVD, the source\nfiles for your operating system.\n\n171\n00:08:11.200 --> 00:08:13.749\nAnd when you're setting up\na new domain controller,\n\n172\n00:08:13.749 --> 00:08:17.146\nlet's say that we've been running\nthis business for a little while and\n\n173\n00:08:17.146 --> 00:08:19.654\nwe've got a bunch of\n2003 domain controllers.\n\n174\n00:08:19.654 --> 00:08:24.050\nAnd we're getting ready to install\nour first 2008 domain controller.\n\n175\n00:08:24.050 --> 00:08:25.090\nRemember in other episodes,\n\n176\n00:08:25.090 --> 00:08:27.760\nwe talked about things like\nfunctional levels, right?\n\n177\n00:08:27.760 --> 00:08:30.441\nWell, when I install that\nfirst 2008 domain controller,\n\n178\n00:08:30.441 --> 00:08:33.541\nit's got all those new features\nthat come along with 2008, right?\n\n179\n00:08:33.541 --> 00:08:37.860\nIt does things a little bit differently\nthat 2003 might not understand.\n\n180\n00:08:37.860 --> 00:08:43.530\nSo the adprep allows me to prepare\nthe Active Directory environment for\n\n181\n00:08:43.530 --> 00:08:44.850\nthis new operating system.\n\n182\n00:08:44.850 --> 00:08:49.788\nIt basically goes in and adds new\nclasses and attributes to the schema.\n\n183\n00:08:49.788 --> 00:08:52.953\nIt can prepare group policy for\nsome new settings or\n\n184\n00:08:52.953 --> 00:08:55.390\nconfiguration options within there.\n\n185\n00:08:55.390 --> 00:08:59.118\nAnd we would have to run these in\nthe past, you've run them ahead of time.\n\n186\n00:08:59.118 --> 00:09:00.900\nIf my boss come and told me and said hey,\n\n187\n00:09:00.900 --> 00:09:03.872\nwe're gonna upgrade one of our\ndomain controllers to 2008.\n\n188\n00:09:03.872 --> 00:09:07.843\nWell, before I could do that,\nI'd have to break out that disk,\n\n189\n00:09:07.843 --> 00:09:12.350\nrun adprep forestprep and here I'll\nshow what I'm talking about here.\n\n190\n00:09:12.350 --> 00:09:16.000\nI mounted that disk,\nthe server 2012 disk over here.\n\n191\n00:09:16.000 --> 00:09:19.906\nAnd inside my support, you'll find adprep.\n\n192\n00:09:19.906 --> 00:09:24.863\nAnd if I launch a command\nprompt window here,\n\n193\n00:09:24.863 --> 00:09:28.411\nI could do a little adprep /?.\n\n194\n00:09:28.411 --> 00:09:31.490\nAnd then they might be a little\nbit too small for you guys to see,\n\n195\n00:09:31.490 --> 00:09:34.800\nbut there's adprep /forestprep\nwhich prepares the forest.\n\n196\n00:09:34.800 --> 00:09:38.630\nAnd that's really what modifying the\nschema to support all the new classes and\n\n197\n00:09:38.630 --> 00:09:39.715\nattributes for 2000.\n\n198\n00:09:39.715 --> 00:09:42.644\nAnd in this case for 2012,\nthere is domainprep,\n\n199\n00:09:42.644 --> 00:09:45.185\nwhich is gonna prepare the domain itself.\n\n200\n00:09:45.185 --> 00:09:48.365\nForestprep, you'd run once for\nthe entire forest.\n\n201\n00:09:48.365 --> 00:09:52.541\nDomainprep, you'd run in the domain you're\nadding that new domain controller to.\n\n202\n00:09:52.541 --> 00:09:55.997\nSo if you had another domain that\nwas getting its first 2012 R2\n\n203\n00:09:55.997 --> 00:09:59.590\ndomain controller, you'd run\nadprep /domainprep there as well.\n\n204\n00:09:59.590 --> 00:10:02.380\nBut you wouldn't have to\nrun forestprep again.\n\n205\n00:10:02.380 --> 00:10:05.214\nThere's also adprep /gpprep\nwhich prepares group policy for\n\n206\n00:10:05.214 --> 00:10:07.360\nthis new domain controller\noperating system.\n\n207\n00:10:07.360 --> 00:10:09.499\nAnd then there's rodcprep,\n\n208\n00:10:09.499 --> 00:10:15.497\nwhich sets up all the classes necessary\nto create a read-only domain controller.\n\n209\n00:10:15.497 --> 00:10:17.791\nAnd you still can run these manually.\n\n210\n00:10:17.791 --> 00:10:21.911\nIf you're splitting this job up,\nif I want Ronnie to get everything ready.\n\n211\n00:10:21.911 --> 00:10:24.111\nAnd then I've got somebody else\nthat's gonna come through and\n\n212\n00:10:24.111 --> 00:10:25.600\nactually do the installation.\n\n213\n00:10:25.600 --> 00:10:29.417\nYeah, he could go and run these tools or\nrun these commands, get everything ready.\n\n214\n00:10:29.417 --> 00:10:32.870\nAnd then somebody else comes behind him\nand their job is to actually install.\n\n215\n00:10:32.870 --> 00:10:37.010\nBut the cool thing about 2012 R2 is\nwe don't have to do that anymore.\n\n216\n00:10:37.010 --> 00:10:39.030\nLike I said,\nyou can still do it if you want, but\n\n217\n00:10:39.030 --> 00:10:41.700\nas long as you got the credentials.\n\n218\n00:10:41.700 --> 00:10:47.350\nWhen you install 2012, it will run any\nof those commands it finds necessary.\n\n219\n00:10:47.350 --> 00:10:49.998\nThe key there is to make sure\nyou've got the right credentials.\n\n220\n00:10:49.998 --> 00:10:52.028\nIf you're logged on as a domain admin and\n\n221\n00:10:52.028 --> 00:10:55.084\nyou're adding that first\n2012 R2 domain controller.\n\n222\n00:10:55.084 --> 00:10:59.790\nAnd it finds that forestprep hasn't\nbeen run yet, it's gonna try to run it.\n\n223\n00:10:59.790 --> 00:11:04.150\nAnd you need to be an enterprise admin\nto modify anything that's gonna affect\n\n224\n00:11:04.150 --> 00:11:05.260\nmore than your domain.\n\n225\n00:11:05.260 --> 00:11:08.160\nSo if you're logged on as simply\na domain admin, it's gonna fail.\n\n226\n00:11:08.160 --> 00:11:11.660\nSo you don't have to run it separately,\nyou can just launch the wizard,\n\n227\n00:11:11.660 --> 00:11:13.010\ninstall Active Directory.\n\n228\n00:11:13.010 --> 00:11:14.940\nJust make sure you've got\nthe appropriate credentials.\n\n229\n00:11:14.940 --> 00:11:17.713\nThat your logged on as\na enterprise admin at least for\n\n230\n00:11:17.713 --> 00:11:20.116\nthat first 2012 R2 domain controller.\n\n231\n00:11:20.116 --> 00:11:21.853\n>> Now Mike this is\na little bit of a side, but\n\n232\n00:11:21.853 --> 00:11:23.454\nyou did something really neat there.\n\n233\n00:11:23.454 --> 00:11:25.595\n>> What's that?\n>> What was that little shortcut you did\n\n234\n00:11:25.595 --> 00:11:28.744\nto launch that command line,\ncuz I'm pretty sure that I saw you do it.\n\n235\n00:11:28.744 --> 00:11:30.076\nBut I didn't know what you did and\n\n236\n00:11:30.076 --> 00:11:32.510\nall of a sudden I saw that little\ncommand line light up there.\n\n237\n00:11:32.510 --> 00:11:35.289\nYou've gotta tell us what the heck\nthat is, so that we know.\n\n238\n00:11:35.289 --> 00:11:38.417\n>> That was a trick,\nthat's my own super secret [LAUGH].\n\n239\n00:11:38.417 --> 00:11:38.990\n>> Man.\n\n240\n00:11:38.990 --> 00:11:41.200\n>> Now, it came from a Power Toys.\n\n241\n00:11:41.200 --> 00:11:44.814\nIf anybody goes back far enough and\nremembers installing something called\n\n242\n00:11:44.814 --> 00:11:47.581\nPower Toys on your [INAUDIBLE],\nI think it was Windows XP.\n\n243\n00:11:47.581 --> 00:11:48.153\n>> Easily.\n\n244\n00:11:48.153 --> 00:11:49.950\n[LAUGH]\n>> If not, prior to that.\n\n245\n00:11:49.950 --> 00:11:51.800\nBut it actually included in the shell now.\n\n246\n00:11:51.800 --> 00:11:56.255\nWhat that simply did, if you right-click\non that folder, you'll get a little\n\n247\n00:11:56.255 --> 00:12:00.827\ncontext menu, but if you hold down shift-\n>> And right click on that folder.\n\n248\n00:12:00.827 --> 00:12:04.335\nAnd again my machine is lagging a little\nbit, wait for that menu to pop up.\n\n249\n00:12:04.335 --> 00:12:06.457\n>> [LAUGH]\n>> Maybe.\n\n250\n00:12:06.457 --> 00:12:08.855\nLet's try that one more time,\nI'm gonna Shift+right-click.\n\n251\n00:12:08.855 --> 00:12:12.060\n>> [LAUGH] Yeah,\nsometimes it kinda gets you.\n\n252\n00:12:12.060 --> 00:12:12.784\n>> There it goes.\n\n253\n00:12:12.784 --> 00:12:13.661\n>> There it goes.\n\n254\n00:12:13.661 --> 00:12:15.783\n>> And Open command window here-\n>> There you go.\n\n255\n00:12:15.783 --> 00:12:17.919\n>> I'm gonna have to look\nat my Task Manager and\n\n256\n00:12:17.919 --> 00:12:19.952\nsee why my machine is chugging right now.\n\n257\n00:12:19.952 --> 00:12:21.990\nBut yeah, open command window here and\n\n258\n00:12:21.990 --> 00:12:25.530\nbasically you get a command prompt\nwith that path already in there.\n\n259\n00:12:25.530 --> 00:12:28.058\nJust a timesaver,\ninstead of having to do a cd,\n\n260\n00:12:28.058 --> 00:12:30.700\nchange directory command, so I love that.\n\n261\n00:12:30.700 --> 00:12:33.361\n>> By far this is what,\nI know that it sounds strange but\n\n262\n00:12:33.361 --> 00:12:36.460\nefficiency is one of the keys\nto getting this up and running.\n\n263\n00:12:36.460 --> 00:12:39.285\nAnd so you can actually even save\na little bit of time by doing that.\n\n264\n00:12:39.285 --> 00:12:40.147\nAnd if you're like me,\n\n265\n00:12:40.147 --> 00:12:42.790\nyou're watching the video, what\nthe heck did he do to make that happen?\n\n266\n00:12:42.790 --> 00:12:44.437\n>> [LAUGH]\n>> And then you get frustrated,\n\n267\n00:12:44.437 --> 00:12:47.177\nthen you actually have to post in\nour forums, actually find out, but\n\n268\n00:12:47.177 --> 00:12:48.984\noverall though, it's a great little tool.\n\n269\n00:12:48.984 --> 00:12:51.588\nA great little hint for us, but\nyeah, they show us the adprep,\n\n270\n00:12:51.588 --> 00:12:53.370\nglad to actually be able to see that, too.\n\n271\n00:12:53.370 --> 00:12:54.520\n>> All right, and like I say,\n\n272\n00:12:54.520 --> 00:12:56.870\nyou don't have to run it cuz\nit'll run automatically.\n\n273\n00:12:56.870 --> 00:12:59.905\nAs long as you got the appropriate\ncredentials, you should be fine there.\n\n274\n00:12:59.905 --> 00:13:02.914\nRead-only domain controllers are another\none that are gonna have a pre-req.\n\n275\n00:13:02.914 --> 00:13:06.955\nWe've got other episodes, we're gonna talk\nabout these guys in a lot more detail.\n\n276\n00:13:06.955 --> 00:13:08.538\nBut just understand that for now,\n\n277\n00:13:08.538 --> 00:13:11.120\nif you're setting up\na read-only domain controller.\n\n278\n00:13:11.120 --> 00:13:16.669\nYou need at least one writable domain\ncontroller on your network already.\n\n279\n00:13:16.669 --> 00:13:21.415\nAnd it has to be at least 2008 on\nthat writable domain controller and\n\n280\n00:13:21.415 --> 00:13:24.827\nyour force functional\nlevel needs to be 2003.\n\n281\n00:13:24.827 --> 00:13:28.129\nRemember we talked about raising\nthat force functional level before,\n\n282\n00:13:28.129 --> 00:13:31.870\nit had to make sure it's at least 2003\nbecause that's when we got support for\n\n283\n00:13:31.870 --> 00:13:33.770\nthose read-only domain controllers.\n\n284\n00:13:33.770 --> 00:13:36.830\nAnd last on the list of our pre-reqs is\nto make sure you've got the appropriate\n\n285\n00:13:36.830 --> 00:13:37.380\ncredentials.\n\n286\n00:13:37.380 --> 00:13:41.080\nIf you're just starting, right?\n\n287\n00:13:41.080 --> 00:13:43.611\nYou're creating your\nfirst domain controller,\n\n288\n00:13:43.611 --> 00:13:47.536\nwhich is gonna create your first domain,\nwhich is gonna create your forest.\n\n289\n00:13:47.536 --> 00:13:49.400\nWell, there's nowhere to check for\ncredentials.\n\n290\n00:13:49.400 --> 00:13:53.750\nThe only thing you need to be is logged on\nas the local admin on that server, right?\n\n291\n00:13:53.750 --> 00:13:56.900\nCuz it's not a member of anything,\nthere's nothing there yet.\n\n292\n00:13:56.900 --> 00:14:00.170\nSo as long as you're logged on as\nthe local admin, you're good to go.\n\n293\n00:14:00.170 --> 00:14:04.260\nAnd what'll happen is that local admin\naccount that you're using, that password.\n\n294\n00:14:04.260 --> 00:14:08.416\nWill then become the built-in\ndomain administrator's password.\n\n295\n00:14:08.416 --> 00:14:11.709\nAll right so, make sure you know\nwhat your local admin password is.\n\n296\n00:14:11.709 --> 00:14:15.783\nBecause as soon as that thing reboots, you\ncan't log on with a local account anymore.\n\n297\n00:14:15.783 --> 00:14:18.447\nYou can only log on with\ndomain accounts and\n\n298\n00:14:18.447 --> 00:14:20.970\nyou need to know what that password was.\n\n299\n00:14:20.970 --> 00:14:24.200\nIf you're adding a domain controller\nto an existing domain, well,\n\n300\n00:14:24.200 --> 00:14:27.340\nthen you need to be a domain\nadmin in that domain, all right?\n\n301\n00:14:27.340 --> 00:14:33.787\nIf you're adding a new domain in a forest,\neither a child domain or a separate tree.\n\n302\n00:14:33.787 --> 00:14:37.452\nThen you would need to be an enterprise\nadmin, because now you're making changes\n\n303\n00:14:37.452 --> 00:14:39.790\nat the forest level instead\nof at the domain level.\n\n304\n00:14:39.790 --> 00:14:42.190\nSo lot of things we gotta check Ronnie,\nnot too terribly difficult and\n\n305\n00:14:42.190 --> 00:14:43.710\nmost of the time it's done for us.\n\n306\n00:14:43.710 --> 00:14:49.054\nBut you gotta make sure you're setting\nthose TCP/IP settings, setting your name.\n\n307\n00:14:49.054 --> 00:14:51.587\nAnd something that they don't\nmention that I wanna mention,\n\n308\n00:14:51.587 --> 00:14:52.862\nget all your Windows updates.\n\n309\n00:14:52.862 --> 00:14:55.217\nMake sure you're getting any updates for\n\n310\n00:14:55.217 --> 00:14:58.830\nthat server before you\nstart installing roles.\n\n311\n00:14:58.830 --> 00:15:00.007\n>> So with the installation,\n\n312\n00:15:00.007 --> 00:15:02.623\njust kind of remember that we\ndo have to meet some pre-reqs.\n\n313\n00:15:02.623 --> 00:15:06.893\nAnd Active Directory is such a massive\ntool that we use inside of a domain\n\n314\n00:15:06.893 --> 00:15:07.829\nenvironment.\n\n315\n00:15:07.829 --> 00:15:10.444\nThis is the one that you wanna\nget ready and get right.\n\n316\n00:15:10.444 --> 00:15:12.762\nOnce you actually get that\ninstallation process going and\n\n317\n00:15:12.762 --> 00:15:15.373\nthen you realize that hey,\nsomething's changed at this point.\n\n318\n00:15:15.373 --> 00:15:18.122\nIt's still creating all those objects,\nit's still doing everything and\n\n319\n00:15:18.122 --> 00:15:19.616\nit's actually attaching it that name.\n\n320\n00:15:19.616 --> 00:15:23.550\nAnd so you want to make sure as much\nas you can to streamline that process.\n\n321\n00:15:23.550 --> 00:15:26.928\nSo making sure those pre-reqs are there,\nare gonna be really helpful.\n\n322\n00:15:26.928 --> 00:15:29.921\nNow Mike, let's say that we\nmeet all the pre-reqs and\n\n323\n00:15:29.921 --> 00:15:32.407\nwe are ready to get\nstarted in installation.\n\n324\n00:15:32.407 --> 00:15:34.915\nSo you're gonna actually\nhelp us out by walking this\n\n325\n00:15:34.915 --> 00:15:37.030\nthrough an installation process, right?\n\n326\n00:15:37.030 --> 00:15:38.237\n>> I'm gonna do just that Ronnie.\n\n327\n00:15:38.237 --> 00:15:42.330\nSo let's take a look at my screen here and\nwe'll begin installing Active Directory.\n\n328\n00:15:42.330 --> 00:15:45.366\nSo what I'm gonna do is I'm gonna\nswitch over to my Dashboard and\n\n329\n00:15:45.366 --> 00:15:47.345\nlaunch my Add rules and features wizard.\n\n330\n00:15:47.345 --> 00:15:50.885\nNow installing Active Directory\nis actually a two-part process,\n\n331\n00:15:50.885 --> 00:15:52.623\nwe're gonna install the role and\n\n332\n00:15:52.623 --> 00:15:56.237\nonce the role's installed I still\ndon't have a domain controller.\n\n333\n00:15:56.237 --> 00:16:00.280\nAll the pieces to make a domain controller\nare there, they're gonna be ready.\n\n334\n00:16:00.280 --> 00:16:01.390\nBut you still have to go and\n\n335\n00:16:01.390 --> 00:16:04.720\nconfigure it before it actually\nbecomes a domain controller.\n\n336\n00:16:04.720 --> 00:16:06.204\nSo we'll see how that works here.\n\n337\n00:16:06.204 --> 00:16:08.027\nI'm gonna click Next on my wizard.\n\n338\n00:16:08.027 --> 00:16:10.325\nIt's gonna be role based installation.\n\n339\n00:16:10.325 --> 00:16:14.261\nAnd it is gonna be on a machine named\ndc01 so I continue to click Next.\n\n340\n00:16:14.261 --> 00:16:18.000\nAnd then we get to our first screen\nwhere we have to make a decision.\n\n341\n00:16:18.000 --> 00:16:20.870\nAnd I'm gonna choose\nActive Directory Domain Services.\n\n342\n00:16:20.870 --> 00:16:23.360\nAnd when I choose that,\nit pops up this little window.\n\n343\n00:16:23.360 --> 00:16:27.680\nDo I wanna add features that are required\nfor Active Directory Domain Services?\n\n344\n00:16:27.680 --> 00:16:28.540\nMost likely, right?\n\n345\n00:16:28.540 --> 00:16:29.505\nIt says they're required.\n\n346\n00:16:29.505 --> 00:16:34.100\n[LAUGH] That's gonna include the Active\nDirectory Module for Windows PowerShell.\n\n347\n00:16:34.100 --> 00:16:36.770\nRemember everything is\nPowerShell driven nowadays.\n\n348\n00:16:36.770 --> 00:16:39.922\nAnd in some of the GUI interfaces\nlike the administrative center,\n\n349\n00:16:39.922 --> 00:16:41.440\nwhen you do something in there,\n\n350\n00:16:41.440 --> 00:16:44.665\nit's actually executing a PowerShell\ncommand in the background.\n\n351\n00:16:44.665 --> 00:16:47.324\nSo we need that,\nwe need to have the commands.\n\n352\n00:16:47.324 --> 00:16:50.408\nRemember PowerShell is very modular,\nit doesn't have any command or\n\n353\n00:16:50.408 --> 00:16:52.980\nhave anything to do with\nActive Directory out of the box.\n\n354\n00:16:52.980 --> 00:16:56.340\nSo, we're gonna add\nan additional module that now\n\n355\n00:16:56.340 --> 00:16:59.130\nincludes all of the active\ndirectory commands that I can do.\n\n356\n00:16:59.130 --> 00:17:00.590\nSo that's required.\n\n357\n00:17:00.590 --> 00:17:04.720\nThey also have a couple of tools, the\nactive directory administration center and\n\n358\n00:17:04.720 --> 00:17:06.520\nthe snap-ins and command line tools.\n\n359\n00:17:06.520 --> 00:17:11.160\nThese are things like Active Directory\nusers in computers, Ntdsutil, and\n\n360\n00:17:11.160 --> 00:17:15.060\nother commands that I can use\nto work with Active Directory.\n\n361\n00:17:15.060 --> 00:17:18.730\nI don't have to include those,\nI could uncheck that and\n\n362\n00:17:18.730 --> 00:17:20.650\nall I would get was\nthat PowerShell module.\n\n363\n00:17:20.650 --> 00:17:25.340\nBut this is a GUI machine,\nit's got an interface that I deal with, so\n\n364\n00:17:25.340 --> 00:17:26.680\nI really want those tools there.\n\n365\n00:17:26.680 --> 00:17:29.993\nIf I was on the Core and I was doing\nmost of my administration remotely, but\n\n366\n00:17:29.993 --> 00:17:31.929\nI don't wanna put those on there, right.\n\n367\n00:17:31.929 --> 00:17:35.363\nI mean, that's the whole point of going\nwith core, minimizing that interface,\n\n368\n00:17:35.363 --> 00:17:36.620\nreducing my attack surface.\n\n369\n00:17:36.620 --> 00:17:40.895\nSo on this guy I definitely want,\nso I'm gonna click Add Features and\n\n370\n00:17:40.895 --> 00:17:42.383\nthen I'll click Next.\n\n371\n00:17:42.383 --> 00:17:45.560\nAnd you can even see that it went ahead\nand checked those features for me,\n\n372\n00:17:45.560 --> 00:17:47.600\ngroup policy management.\n\n373\n00:17:47.600 --> 00:17:51.730\nIf I come down here, it's already\nchecked my Remote Server Admin Tools for\n\n374\n00:17:51.730 --> 00:17:53.080\nActive Directory, and\n\n375\n00:17:53.080 --> 00:17:56.060\nthat's because I clicked add features\non that little dialog box previously.\n\n376\n00:17:56.060 --> 00:17:58.990\nSo I'll just go ahead and click Next.\n\n377\n00:17:58.990 --> 00:17:59.990\nAnd Next again.\n\n378\n00:17:59.990 --> 00:18:03.580\nAnd then on my confirmation saying\nyou sure you want to install these?\n\n379\n00:18:03.580 --> 00:18:05.810\nAnd I'll go ahead and click Install.\n\n380\n00:18:05.810 --> 00:18:08.900\n>> Now Mike, I saw that during\nthe role installation, and\n\n381\n00:18:08.900 --> 00:18:11.075\nyou just picked\nActive Directory Directory Services.\n\n382\n00:18:11.075 --> 00:18:12.170\n>> Mm-hm.\n\n383\n00:18:12.170 --> 00:18:13.730\n>> Could I pick more\nthan that one service?\n\n384\n00:18:13.730 --> 00:18:16.090\nIs it a good idea, bad idea,\nwhat do you think?\n\n385\n00:18:16.090 --> 00:18:17.781\n>> You could, it would let you.\n\n386\n00:18:17.781 --> 00:18:20.708\nI kinda like to do them one at a time.\n\n387\n00:18:20.708 --> 00:18:22.855\nI didn't install DNS.\n\n388\n00:18:22.855 --> 00:18:24.120\nYou notice I didn't pick DNS?\n\n389\n00:18:24.120 --> 00:18:26.692\nThat's cuz I know during\nthe configuration wizard,\n\n390\n00:18:26.692 --> 00:18:28.700\nit's gonna ask me if I wanna install DNS.\n\n391\n00:18:30.060 --> 00:18:31.080\nSo, sometimes I do.\n\n392\n00:18:31.080 --> 00:18:36.199\nI have taken member servers and I have\ninstalled DHCP and DNS at the same time.\n\n393\n00:18:36.199 --> 00:18:40.290\nJust, you have to remember to go back and\nconfigure them once you're done.\n\n394\n00:18:40.290 --> 00:18:43.190\nActive directory,\nbeing the special machine it is,\n\n395\n00:18:43.190 --> 00:18:45.196\nI like to kind of just do it on its own.\n\n396\n00:18:45.196 --> 00:18:47.521\nAgain, and this part,\nI'll go ahead and click Install so\n\n397\n00:18:47.521 --> 00:18:49.770\nwe can talk while it's running here.\n\n398\n00:18:49.770 --> 00:18:51.003\nThis part is really not that bad.\n\n399\n00:18:51.003 --> 00:18:55.670\nAll it's doing is unpacking all\nthe files to make a domain controller.\n\n400\n00:18:55.670 --> 00:18:58.680\nIt's not really configuring anything yet.\n\n401\n00:18:58.680 --> 00:19:03.050\nIf you wanted to add another roll at\nthis point, I could see you doing that.\n\n402\n00:19:03.050 --> 00:19:08.080\n[LAUGH] Just remember you gotta at some\npoint go back and configure this stuff.\n\n403\n00:19:08.080 --> 00:19:12.748\n>> Mike, like you, I've always learned\nit like, no, you want to install DNS.\n\n404\n00:19:12.748 --> 00:19:17.168\nOr not DNS, active directory, and then\ngo back and install additional roles and\n\n405\n00:19:17.168 --> 00:19:20.874\nit's just because active directory\nitself takes such a long time.\n\n406\n00:19:20.874 --> 00:19:24.410\nYou start adding in more and\nmore as, it must take even longer.\n\n407\n00:19:24.410 --> 00:19:28.554\nSo even though you can do it,\nwhat we're saying is don't.\n\n408\n00:19:28.554 --> 00:19:30.880\n[LAUGH] It is what we're saying.\n\n409\n00:19:30.880 --> 00:19:33.770\nSo you don't want to do that if\nthis is your first time doing it.\n\n410\n00:19:33.770 --> 00:19:37.320\nGo ahead and just install Active Directory\nand then go back and like Mike said,\n\n411\n00:19:37.320 --> 00:19:40.528\nyou're gonna see if DNS is going to be\nrequested during that installation.\n\n412\n00:19:40.528 --> 00:19:44.290\nBut, like DHCP, if you wanna run that\nas well, and then any other server,\n\n413\n00:19:44.290 --> 00:19:45.780\ndo that after the fact.\n\n414\n00:19:45.780 --> 00:19:49.360\nThat way you're not having to wait so long\nbefore everything does come back up and\n\n415\n00:19:49.360 --> 00:19:52.750\nyou'll be able to kind of modularize\nwhat you're actually doing and\n\n416\n00:19:52.750 --> 00:19:55.240\nfocus in exactly on what needs to be done.\n\n417\n00:19:55.240 --> 00:19:59.640\nI think I installed it, and now you're 35,\n40 minutes into it and you're like,\n\n418\n00:19:59.640 --> 00:20:01.280\nokay it [LAUGH] may have installed it,\nit may not.\n\n419\n00:20:01.280 --> 00:20:03.580\nBut yeah, just focusing on Active\nDirectory I think is a great process.\n\n420\n00:20:03.580 --> 00:20:05.980\n>> Yeah, that way you don't have any\nkind of conflicts or anything like that.\n\n421\n00:20:05.980 --> 00:20:07.340\nAll right, so there it finished.\n\n422\n00:20:07.340 --> 00:20:08.680\nWe can take a look at my screen.\n\n423\n00:20:08.680 --> 00:20:11.330\nSo i said, the roles installed but\nit's not configured.\n\n424\n00:20:11.330 --> 00:20:12.420\nRight here in the middle,\n\n425\n00:20:12.420 --> 00:20:15.890\nI actually have a link to promote\nthis server to a domain controller.\n\n426\n00:20:15.890 --> 00:20:19.320\nThat's gonna launch the active\ndirectory configuration wizard.\n\n427\n00:20:19.320 --> 00:20:23.242\nI can launch it from here, but\nremember, one of the great things about\n\n428\n00:20:23.242 --> 00:20:27.913\nServer Manager is it's modular, or\nit's not modular, these are modal windows.\n\n429\n00:20:27.913 --> 00:20:32.694\nSo I can close that, let that task run\nin the background, do other things, and\n\n430\n00:20:32.694 --> 00:20:34.010\nthen come back to it.\n\n431\n00:20:34.010 --> 00:20:37.190\nWell if I closed it,\nhow do I get back to run that wizard?\n\n432\n00:20:37.190 --> 00:20:39.390\nIt's not DCPromo anymore.\n\n433\n00:20:39.390 --> 00:20:41.940\nIf any of you out there have\nbeen working with server for\n\n434\n00:20:41.940 --> 00:20:45.260\na little while and\nyou remember good old DCPromo, cuz that's\n\n435\n00:20:45.260 --> 00:20:49.200\nwhat I would have used to finish this\ninstallation and actually configure it.\n\n436\n00:20:49.200 --> 00:20:51.130\nIf you try to run that now,\n\n437\n00:20:51.130 --> 00:20:54.480\nyou'll see that it's gonna be\nrelocated to Server Manager.\n\n438\n00:20:54.480 --> 00:20:56.910\nIt's what they call,\nwhat do they call it Ronnie, deprecated?\n\n439\n00:20:56.910 --> 00:20:58.080\n>> It is deprecated, and\n\n440\n00:20:58.080 --> 00:21:00.980\nthat just means that they don't\nreally want you using it in anymore.\n\n441\n00:21:00.980 --> 00:21:04.004\nAnd you hate to say it, unlike certain\nother types of system that you may run\n\n442\n00:21:04.004 --> 00:21:05.636\ninto, I know for example like in Cisco,\n\n443\n00:21:05.636 --> 00:21:08.622\neven though know they say deprecated\nthey still leave the command there.\n\n444\n00:21:08.622 --> 00:21:11.677\nAnd even though you see the command\nthey're just actually telling you,\n\n445\n00:21:11.677 --> 00:21:13.129\nwe don't really want to use it so,\n\n446\n00:21:13.129 --> 00:21:16.500\nthey just give you a nice little message\ninstead telling you, don't use that.\n\n447\n00:21:16.500 --> 00:21:19.210\nUse what we want you to use because\nthey want you to move on from that order\n\n448\n00:21:19.210 --> 00:21:19.718\nof command.\n\n449\n00:21:19.718 --> 00:21:22.998\nSo if you do see commands like that\nwhere you're used to seeing them and\n\n450\n00:21:22.998 --> 00:21:26.392\nnow you're getting that message,\nit's just telling you it's time for\n\n451\n00:21:26.392 --> 00:21:29.672\nyou to move on to the newer stuff,\nand that's what we all have to try and\n\n452\n00:21:29.672 --> 00:21:32.255\ndo to keep up with the newer\nsystems that are out there.\n\n453\n00:21:32.255 --> 00:21:32.870\n>> Exactly.\n\n454\n00:21:32.870 --> 00:21:34.830\nThey left it in there for compatibility.\n\n455\n00:21:34.830 --> 00:21:38.490\nYou might have, in an enterprise,\nif you've got a lot of investment in some\n\n456\n00:21:38.490 --> 00:21:43.790\nautomation, that includes DCPromo as part\nof your automated install of your domain\n\n457\n00:21:43.790 --> 00:21:47.075\ncontrollers and things like that, and then\nI wanna just yank that support from you.\n\n458\n00:21:47.075 --> 00:21:51.050\n[LAUGH] So they've left it in there and\nyou can still use it if you're scripting,\n\n459\n00:21:51.050 --> 00:21:52.300\nright, if you're doing automation.\n\n460\n00:21:52.300 --> 00:21:56.250\nBut what they're telling you is, you\nbetter start migrating over to PowerShell\n\n461\n00:21:56.250 --> 00:21:59.800\nand using that, because that won't bet in\nthe next version of Windows, is from what\n\n462\n00:21:59.800 --> 00:22:03.870\nI've read on Microsoft's sight,\nDCPromo will be gone in the next addition.\n\n463\n00:22:03.870 --> 00:22:06.390\nSo now is the time to\nstart getting your stuff\n\n464\n00:22:06.390 --> 00:22:09.020\nmoved over from the command\nline to PowerShell.\n\n465\n00:22:09.020 --> 00:22:10.450\nAll right, so I closed the windows.\n\n466\n00:22:10.450 --> 00:22:12.610\nSo how do we get back to it,\nwe go to our notifications.\n\n467\n00:22:12.610 --> 00:22:15.720\nI click on this little flag icon up here,\nand there it's telling me, hey we\n\n468\n00:22:15.720 --> 00:22:19.300\ninstalled the roll, but we still have\nsome work to do, you're ready to start?\n\n469\n00:22:19.300 --> 00:22:21.410\nYes I am, and I'll click on that link, and\n\n470\n00:22:21.410 --> 00:22:24.400\nthere's my Active Directory Domain\nService Configuration Wizard.\n\n471\n00:22:24.400 --> 00:22:27.350\nThis is where the real fun comes\nin if you're a geek like me.\n\n472\n00:22:27.350 --> 00:22:29.300\nThis is also where we have to be ready.\n\n473\n00:22:29.300 --> 00:22:32.886\nWe have to have our information\nof what we're trying\n\n474\n00:22:32.886 --> 00:22:36.643\nto do sitting here with us as\nwe go through this Wizard.\n\n475\n00:22:36.643 --> 00:22:38.196\nAnd the first one,\nthere were no decisions to make.\n\n476\n00:22:38.196 --> 00:22:42.820\n[LAUGH] I just clicked Active Directory,\ninclude the tools and next, next,\n\n477\n00:22:42.820 --> 00:22:44.150\nnext, install.\n\n478\n00:22:44.150 --> 00:22:45.730\nNow I've gotta type in some information.\n\n479\n00:22:45.730 --> 00:22:48.090\nI've got to let it know what I'm doing.\n\n480\n00:22:48.090 --> 00:22:50.275\nSo, the first question is,\nwhat am I doing?\n\n481\n00:22:50.275 --> 00:22:52.900\n[LAUGH] Am I creating a brand new forest,\ndo I have nothing?\n\n482\n00:22:52.900 --> 00:22:57.020\nAm I adding a domain controller to\nan existing domain, a second or\n\n483\n00:22:57.020 --> 00:23:00.360\nthird or fourth domain controller\nto a domain that already exists?\n\n484\n00:23:00.360 --> 00:23:04.540\nOr am I adding a new domain to an existing\nforest, either a child domain or\n\n485\n00:23:04.540 --> 00:23:06.520\na new domain tree?\n\n486\n00:23:06.520 --> 00:23:10.560\nIn fact, if I, notice if I say add\na domain controller to an existing domain.\n\n487\n00:23:10.560 --> 00:23:12.020\nWell, what domain are you adding it to?\n\n488\n00:23:12.020 --> 00:23:12.770\nRight?\n\n489\n00:23:12.770 --> 00:23:16.760\nAnd what credentials, you need\na domain admin account in that domain.\n\n490\n00:23:16.760 --> 00:23:19.880\nIf I'm adding a new domain\nto an existing forest,\n\n491\n00:23:19.880 --> 00:23:23.920\nis it gonna be a child domain or\nis it gonna be a new tree?\n\n492\n00:23:23.920 --> 00:23:25.110\nWhat parent do you want?\n\n493\n00:23:25.110 --> 00:23:26.630\nWho's gonna be above it?\n\n494\n00:23:26.630 --> 00:23:31.220\nOr if it's a tree, there wouldn't be\na parent, it would be the forest name and\n\n495\n00:23:31.220 --> 00:23:32.400\na domain name.\n\n496\n00:23:32.400 --> 00:23:33.900\nIf it's a child domain,\nwell, who's the parent?\n\n497\n00:23:33.900 --> 00:23:35.700\nAnd what do you wanna call that domain?\n\n498\n00:23:35.700 --> 00:23:38.390\nBut for us,\nwe're creating a brand new forest.\n\n499\n00:23:38.390 --> 00:23:39.240\nWe have nothing.\n\n500\n00:23:39.240 --> 00:23:43.206\nSo the only thing it needs from me is,\nwhat do you wanna call that root domain,\n\n501\n00:23:43.206 --> 00:23:44.562\nthat forest root domain?\n\n502\n00:23:44.562 --> 00:23:52.019\nAnd I'm gonna call it lab.itpro, oops,\nif I could spell there, itpro.tv.\n\n503\n00:23:52.019 --> 00:23:53.725\nAnd I'll click Next.\n\n504\n00:23:53.725 --> 00:23:59.576\n[COUGH] And it's gonna make sure that\nit's gonna go and check a couple things.\n\n505\n00:23:59.576 --> 00:24:01.430\nHey, can I see DNS on the network?\n\n506\n00:24:01.430 --> 00:24:02.180\nWhat's going on there?\n\n507\n00:24:02.180 --> 00:24:06.440\nAnd it says, well,\nbasically it's telling me I don't find it.\n\n508\n00:24:06.440 --> 00:24:08.040\nDo you wanna install DNS?\n\n509\n00:24:08.040 --> 00:24:11.786\nIf it didn't find it, if I was\nrunning bind or something like that,\n\n510\n00:24:11.786 --> 00:24:16.410\nlet's simply uncheck that and make sure\nI pointed it to those DNS servers.\n\n511\n00:24:16.410 --> 00:24:20.580\nAlso asks me about that forest and\ndomain functional levels,\n\n512\n00:24:20.580 --> 00:24:24.500\ntalked about those in our other episodes,\nI'm gonna leave it on 2012 R2 for\n\n513\n00:24:24.500 --> 00:24:28.820\nboth, and global catalog is checked,\nand I can't uncheck it.\n\n514\n00:24:28.820 --> 00:24:32.587\nYou must have at least one global\ncatalog server in your domain.\n\n515\n00:24:32.587 --> 00:24:38.050\nSince this is the first domain controller,\nthen it has to be a global catalog server.\n\n516\n00:24:38.050 --> 00:24:41.552\nIn the future I can choose to not include\nthe global catalog service on the second,\n\n517\n00:24:41.552 --> 00:24:43.635\nthird or fourth domain controllers.\n\n518\n00:24:43.635 --> 00:24:47.312\nOr I can even move the global catalog\nserver to another to main controller, and\n\n519\n00:24:47.312 --> 00:24:48.326\nremove it from here.\n\n520\n00:24:48.326 --> 00:24:50.745\nBut as long as this is my\nonly domain controller,\n\n521\n00:24:50.745 --> 00:24:53.700\nit must also be my global catalog server.\n\n522\n00:24:53.700 --> 00:24:58.330\nWe have to set that RODC password,\nrest the safe mode password for\n\n523\n00:24:58.330 --> 00:24:59.330\nActive Directory.\n\n524\n00:24:59.330 --> 00:25:04.180\nIf you ever need to start that machine\nin directory service restore mode,\n\n525\n00:25:04.180 --> 00:25:06.390\nthis is the account you're gonna use.\n\n526\n00:25:06.390 --> 00:25:08.300\nThis is the password\nyou're gonna need to know.\n\n527\n00:25:08.300 --> 00:25:11.467\nIf I need to restart the machine but\nActive Directory is broken,\n\n528\n00:25:11.467 --> 00:25:15.000\nI need to log in with an account\nthat's not stored in Active Directory.\n\n529\n00:25:15.000 --> 00:25:18.310\nThis is gonna be the only one\non that domain controller.\n\n530\n00:25:18.310 --> 00:25:22.017\nMake sure you set this to a good long,\nstrong password, cuz I guarantee you,\n\n531\n00:25:22.017 --> 00:25:25.954\nyou're never gonna go back and change\nthis, even that's a horrible practice and\n\n532\n00:25:25.954 --> 00:25:27.910\nmost people don't remember to go back.\n\n533\n00:25:27.910 --> 00:25:31.070\nThey really should, but\nmake it long and strong and\n\n534\n00:25:31.070 --> 00:25:32.069\nmake sure you remember what it is.\n\n535\n00:25:33.560 --> 00:25:36.970\nI'll click Next, and then it tells\nme it cannot create a delegations.\n\n536\n00:25:36.970 --> 00:25:41.854\nThis has to do with DNS and\nI need to know, this is lab.itpro.tv,\n\n537\n00:25:41.854 --> 00:25:46.651\nso what it wants to do is reach out\nto DNS server for itpro.tv, and\n\n538\n00:25:46.651 --> 00:25:50.055\nsay, hey I'm taking\nover responsibility for\n\n539\n00:25:50.055 --> 00:25:54.090\nthe portion of the namespace\ncalled lab.itpro.tv.\n\n540\n00:25:54.090 --> 00:25:55.670\nWell, it can't do that.\n\n541\n00:25:55.670 --> 00:25:59.943\nIt can't find a DNS server for itpro.tv,\nbecause I've got no Internet access\n\n542\n00:25:59.943 --> 00:26:03.215\nhere and I'm not giving it access\nto the rest of the network.\n\n543\n00:26:03.215 --> 00:26:05.440\nSo, in this case, that's fine.\n\n544\n00:26:05.440 --> 00:26:09.140\nIf this was in the real world, and you\nwere expecting to be able to create that\n\n545\n00:26:09.140 --> 00:26:11.860\ndelegation, you need to stop here and\nfigure out why\n\n546\n00:26:11.860 --> 00:26:15.640\nit can't find the authoritative server for\nyour parent name space, all right.\n\n547\n00:26:15.640 --> 00:26:17.460\nI'm gonna go ahead and click Next.\n\n548\n00:26:18.660 --> 00:26:22.700\nIf it does find it, there will be a check\nmark here for create DNS delegation.\n\n549\n00:26:22.700 --> 00:26:27.210\nIt needs a set of credentials that's\nallowed to create a record on that DNS\n\n550\n00:26:27.210 --> 00:26:27.800\nserver.\n\n551\n00:26:27.800 --> 00:26:29.560\nI'll click Next.\n\n552\n00:26:29.560 --> 00:26:32.830\nIt's gonna check and\nmake sure that my NetBIOS name is unique.\n\n553\n00:26:32.830 --> 00:26:37.504\nYour NetBIOS name for\nthat older name resolution protocol.\n\n554\n00:26:37.504 --> 00:26:41.430\nIt's 15 characters or\nless for NetBIOS names.\n\n555\n00:26:41.430 --> 00:26:44.530\nIt's just gonna take my host or\n\n556\n00:26:44.530 --> 00:26:48.820\nmy DNS domain name,\nin my case, lab, and use that.\n\n557\n00:26:48.820 --> 00:26:53.300\nIf my domain name was longer than 15\ncharacters, it would just truncate it and\n\n558\n00:26:53.300 --> 00:26:56.170\nuse the first 15 characters of it for\nmy NetBIOS name.\n\n559\n00:26:56.170 --> 00:26:59.550\nI can also change that if I want to,\nI can change it to something else.\n\n560\n00:26:59.550 --> 00:27:02.266\n>> Now, Mike, speaking of that,\nI've done that before, and\n\n561\n00:27:02.266 --> 00:27:06.105\nthat's where I've also run into issues is\nthat I didn't actually pay attention, so\n\n562\n00:27:06.105 --> 00:27:07.885\nI made it longer than 15 characters.\n\n563\n00:27:07.885 --> 00:27:11.769\nAnd that truncation at the end is what\nreally caused me issues cuz I couldn't\n\n564\n00:27:11.769 --> 00:27:15.300\nremember exactly all the characters\nI needed to put in there.\n\n565\n00:27:15.300 --> 00:27:17.490\nAnd so\nyou do wanna be careful on this one.\n\n566\n00:27:17.490 --> 00:27:20.270\nJust try and make it nice and\nshort, as much as you can,\n\n567\n00:27:20.270 --> 00:27:22.210\nunderneath those eight characters.\n\n568\n00:27:22.210 --> 00:27:24.012\nAnd that will save you so much heartache.\n\n569\n00:27:24.012 --> 00:27:25.072\nYou won't believe it.\n\n570\n00:27:25.072 --> 00:27:26.886\n[LAUGH]\n>> Yeah, cuz most of us still use that\n\n571\n00:27:26.886 --> 00:27:31.289\npre-Windows 2000 log-on, which is your\ndomain name, your NetBIOS domain name,\n\n572\n00:27:31.289 --> 00:27:33.830\nbackslash username that\nyou're logging on with.\n\n573\n00:27:33.830 --> 00:27:37.295\nSo if it had truncated it, and\nyou didn't know what that was anymore,\n\n574\n00:27:37.295 --> 00:27:40.020\nthat could give you a problem\ntrying to log on, right?\n\n575\n00:27:40.020 --> 00:27:43.120\nBut we can always log on,\nadministrator@lab.itpro.tv as well.\n\n576\n00:27:43.120 --> 00:27:50.160\nAll right, I'll click Next on there and\nwe'll wait for my wizard to do its thing.\n\n577\n00:27:50.160 --> 00:27:52.830\nNext thing it's gonna ask\nme is about the paths.\n\n578\n00:27:52.830 --> 00:27:54.740\nWe talked about that database.\n\n579\n00:27:54.740 --> 00:27:59.940\nThe SYSVOL folder, and the log files\nthat are associated with that database.\n\n580\n00:27:59.940 --> 00:28:03.210\nThey need to be located\non that NTFS volume,\n\n581\n00:28:03.210 --> 00:28:05.980\nthe default SQL in Windows NTDS for\nthe database and\n\n582\n00:28:05.980 --> 00:28:10.230\nthe log files, SQL in Windows SYSVOL for\nthat SYSVOL folder structure.\n\n583\n00:28:10.230 --> 00:28:13.170\nI'm just gonna leave them there, if you\nwanted to move them to another drive for\n\n584\n00:28:13.170 --> 00:28:15.990\nperformance reasons, that would be fine.\n\n585\n00:28:15.990 --> 00:28:17.330\nWe'll click Next.\n\n586\n00:28:17.330 --> 00:28:19.610\nAs long as it was formatted NTFS.\n\n587\n00:28:19.610 --> 00:28:20.480\nAnd then here,\n\n588\n00:28:20.480 --> 00:28:24.720\nI get to review all of my choices that\nI made as I went through the wizard.\n\n589\n00:28:24.720 --> 00:28:27.760\nI can see, this is the first\nActive Directory domain controller\n\n590\n00:28:27.760 --> 00:28:28.790\nin a new forest.\n\n591\n00:28:28.790 --> 00:28:32.330\nWhat the name of the domain's gonna be,\nwhat my NetBIOS name is.\n\n592\n00:28:32.330 --> 00:28:35.150\nForest and domain functional levels.\n\n593\n00:28:35.150 --> 00:28:36.390\n>> My additional options,\n\n594\n00:28:36.390 --> 00:28:41.310\nis gonna be a global catalog as well as\na DNS server, I'm not making a delegation.\n\n595\n00:28:41.310 --> 00:28:43.820\nThere's my locations for\nthe database, and log files,\n\n596\n00:28:43.820 --> 00:28:47.520\nand SYSVOL, DNS is gonna be configured,\n\n597\n00:28:47.520 --> 00:28:51.810\nit's gonna be configured to use this\nDNS server as its preferred DNS server.\n\n598\n00:28:51.810 --> 00:28:55.220\nEven though I already did that in\nthe TCP/IP settings, and the password for\n\n599\n00:28:55.220 --> 00:28:59.410\nthe new domain administrator will be the\nsam password of the local administrator of\n\n600\n00:28:59.410 --> 00:29:00.460\nthis computer.\n\n601\n00:29:00.460 --> 00:29:05.280\nSo if I'm happy with everything, I'm good\nto go, I can click Next and I can move on.\n\n602\n00:29:05.280 --> 00:29:07.760\nIf I didn't like any of that,\nif I see that I made a mistake,\n\n603\n00:29:07.760 --> 00:29:11.680\nI can always click previous, and go back.\n\n604\n00:29:11.680 --> 00:29:15.090\nAnother cool option here, Ronnie, is this\nlittle button right over here, right,\n\n605\n00:29:15.090 --> 00:29:17.340\nthis View Script button.\n\n606\n00:29:17.340 --> 00:29:19.250\nIf we're gonna start\nautomating this process,\n\n607\n00:29:19.250 --> 00:29:22.000\nif we wanna roll out\nseveral domain controllers,\n\n608\n00:29:22.000 --> 00:29:26.420\nI might not wanna go through this\nprocess on each and every one of them.\n\n609\n00:29:26.420 --> 00:29:27.640\nWell, I can script it.\n\n610\n00:29:27.640 --> 00:29:29.570\nWe can use PowerShell to do all of this,\nright.\n\n611\n00:29:29.570 --> 00:29:35.090\nEverything that you can do to a computer\ncan be done through PowerShell nowadays.\n\n612\n00:29:35.090 --> 00:29:38.870\nPowerShell is the underlying syntax for\neverything.\n\n613\n00:29:38.870 --> 00:29:42.800\nAnd so it can make it nice and\neasy if we wanna use PowerShell, but\n\n614\n00:29:42.800 --> 00:29:45.003\ntyping all this out in\nPowerShell is no fun.\n\n615\n00:29:45.003 --> 00:29:47.560\nAt least for me, because I type about\n\n616\n00:29:47.560 --> 00:29:51.370\nfive words per minute after I correct\nmy errors, so that's no good.\n\n617\n00:29:51.370 --> 00:29:52.780\nBut, hey, look.\n\n618\n00:29:52.780 --> 00:29:54.250\nIt created a script for me.\n\n619\n00:29:54.250 --> 00:29:57.380\nIt gave me, all of those options\nthat I just chose in that wizard,\n\n620\n00:29:57.380 --> 00:29:58.690\nit now put it in here.\n\n621\n00:29:58.690 --> 00:30:00.378\nCreate DNS delegation, false.\n\n622\n00:30:00.378 --> 00:30:04.754\nDomain mode, domain name,\nNetBIOS domain name,\n\n623\n00:30:04.754 --> 00:30:08.428\nforest mode, install DNS, etc., etc.\n\n624\n00:30:08.428 --> 00:30:13.467\nAll those options are right here so\nI would simply do a little File\n\n625\n00:30:13.467 --> 00:30:18.521\n> Save As and save this as\nan InstallDCE or something like that.\n\n626\n00:30:18.521 --> 00:30:19.124\nClick Save.\n\n627\n00:30:19.124 --> 00:30:20.050\nAnd close and\nthen I can execute this from PowerShell.\n\n628\n00:30:20.050 --> 00:30:22.933\nNow, one thing I'd wanna be careful with.\n\n629\n00:30:22.933 --> 00:30:28.460\nThis particular, think about what\nI chose in the wizard, right.\n\n630\n00:30:28.460 --> 00:30:32.360\nI said a new forest and a new domain,\nthat's what this is gonna do.\n\n631\n00:30:32.360 --> 00:30:35.680\nSo if I run this on another machine,\nit's gonna create a brand new forest and\n\n632\n00:30:35.680 --> 00:30:36.860\na brand new domain.\n\n633\n00:30:36.860 --> 00:30:38.650\nAnd there's definitely\ngonna be some name issues,\n\n634\n00:30:38.650 --> 00:30:40.280\ncuz there's gonna be duplicates, right.\n\n635\n00:30:40.280 --> 00:30:43.620\nSo, what I would do is I would\ngo ahead and save this, but\n\n636\n00:30:43.620 --> 00:30:44.820\nthen I just modify some things.\n\n637\n00:30:44.820 --> 00:30:50.710\nLike if we're gonna make a second domain,\nI'd put in here us.lab.it, oops.\n\n638\n00:30:50.710 --> 00:30:53.067\n>> And I kinda messed up there.\n\n639\n00:30:53.067 --> 00:30:53.747\nus.lab.itpro or whatever.\n\n640\n00:30:53.747 --> 00:30:59.930\nAnd this would be install ADDS domain\ninstead of install ADDS forest.\n\n641\n00:30:59.930 --> 00:31:01.880\nSo, a couple of things I'd have to modify,\nright?\n\n642\n00:31:01.880 --> 00:31:04.860\nBut it's a lot better than\nstarting from scratch.\n\n643\n00:31:04.860 --> 00:31:09.120\nIn fact, you can use this wizard\nto create a script like this and\n\n644\n00:31:09.120 --> 00:31:11.110\nthen never actually finish the script.\n\n645\n00:31:11.110 --> 00:31:14.940\nI could save the script and then cancel\nit out, and then I could give that script\n\n646\n00:31:14.940 --> 00:31:18.100\nto whomever and say, hey, you need to run\nthis when you get your new machine set up.\n\n647\n00:31:18.100 --> 00:31:20.640\nSo you can actually use the wizard\njust to create the script.\n\n648\n00:31:20.640 --> 00:31:24.580\n>> Now Mike, that sounds like a great way\nbecause of what you're talking about,\n\n649\n00:31:24.580 --> 00:31:26.370\nwith multiple domain controllers,\n\n650\n00:31:26.370 --> 00:31:30.100\nit's really easy even with the GUI to not\nremember let's say the NetBIOS name or\n\n651\n00:31:30.100 --> 00:31:33.765\nnot remember some of those different\nsettings that you actually chose.\n\n652\n00:31:33.765 --> 00:31:37.450\nBy scripting it out here, being able\nto hand it out whenever you need to, or\n\n653\n00:31:37.450 --> 00:31:40.330\nput in on a network share where\npeople can get access to it.\n\n654\n00:31:40.330 --> 00:31:45.385\nIt probably makes a very one time, where\nyou don't have to go did I do this right?\n\n655\n00:31:45.385 --> 00:31:49.015\nAnd you go back through that little\nscript there on PowerShell, go back and\n\n656\n00:31:49.015 --> 00:31:51.216\nredo the things that\nMike was talking about.\n\n657\n00:31:51.216 --> 00:31:54.849\nIt can make it very easy, then, for\nanybody to be able to run it, and then,\n\n658\n00:31:54.849 --> 00:31:58.164\nhopefully have less mistakes,\nas they actually have to do things.\n\n659\n00:31:58.164 --> 00:32:00.079\nThat's probably where I\nwould run into issues.\n\n660\n00:32:00.079 --> 00:32:00.670\n>> [LAUGH] Absolutely.\n\n661\n00:32:00.670 --> 00:32:02.470\nAll right, I'll go ahead and\nclick Next on that wizard.\n\n662\n00:32:02.470 --> 00:32:04.746\nIt's gonna go through and\ndo some pre-req checks again.\n\n663\n00:32:04.746 --> 00:32:09.169\nMake sure that everything is ready for\nactive directory installation.\n\n664\n00:32:09.169 --> 00:32:12.756\nSo, let it do its thing.\n\n665\n00:32:12.756 --> 00:32:15.820\nI can see up there at the top,\nI've got an oops.\n\n666\n00:32:15.820 --> 00:32:19.176\nLet's go back there,\na little misclick on the touch pad.\n\n667\n00:32:19.176 --> 00:32:23.193\nReally?\n\n668\n00:32:23.193 --> 00:32:25.753\n>> [LAUGH]\n>> It's gonna make me go through and\n\n669\n00:32:25.753 --> 00:32:26.360\ndo these.\n\n670\n00:32:26.360 --> 00:32:29.200\nLet's just go next,\nnext, next, there we go.\n\n671\n00:32:29.200 --> 00:32:30.850\nIt'll do that pre-req one more time.\n\n672\n00:32:30.850 --> 00:32:32.860\nLittle mis-click with the mouse there.\n\n673\n00:32:32.860 --> 00:32:34.509\nSo, it's gonna run, do these checks.\n\n674\n00:32:35.630 --> 00:32:39.650\nAnd again, what I should see up at the top\nhere is gonna be a green checkmark saying\n\n675\n00:32:39.650 --> 00:32:41.540\nthat I passed all of my\nprerequisite checks.\n\n676\n00:32:41.540 --> 00:32:42.850\nThere we go, successful.\n\n677\n00:32:42.850 --> 00:32:46.840\nDown below, I've got a couple of warnings,\nbut they're not errors, right?\n\n678\n00:32:46.840 --> 00:32:48.120\nSo, it means I can continue.\n\n679\n00:32:48.120 --> 00:32:50.700\nThere might be some things\nthat I wanna look at.\n\n680\n00:32:50.700 --> 00:32:52.820\nAnd in this case, it's nothing important.\n\n681\n00:32:52.820 --> 00:32:55.550\nI already know that I couldn't\ncreate a DNS delegation.\n\n682\n00:32:55.550 --> 00:32:58.154\nI'm not worried about the security\nsettings for Windows NT.\n\n683\n00:32:58.154 --> 00:33:00.601\nI don't need to worry about\nany backwards compatibility.\n\n684\n00:33:00.601 --> 00:33:02.860\nI don't have any NT\nmachines on my network.\n\n685\n00:33:02.860 --> 00:33:04.190\nSo, everything else looks good.\n\n686\n00:33:04.190 --> 00:33:06.590\nI can click Install, and\nwe're off to the races.\n\n687\n00:33:06.590 --> 00:33:07.100\nWe let it go.\n\n688\n00:33:07.100 --> 00:33:10.170\nIt is gonna need to reboot,\nsomething that you've got to keep in mind.\n\n689\n00:33:10.170 --> 00:33:15.450\nYou are gonna have to reboot that server\nin order to complete this configuration.\n\n690\n00:33:15.450 --> 00:33:17.780\nSo, if there were other things\nrunning on this server.\n\n691\n00:33:17.780 --> 00:33:19.310\nIf people on the network were using it for\n\n692\n00:33:19.310 --> 00:33:22.360\nsomething, you might not wanna do\nthis in the middle of the day, or\n\n693\n00:33:22.360 --> 00:33:25.210\nyou might wanna let them know, hey the\nserver's gonna go down for a little bit.\n\n694\n00:33:25.210 --> 00:33:29.090\nI'm gonna reboot it, and when it comes\nback up, it will be a domain controller.\n\n695\n00:33:29.090 --> 00:33:32.230\n>> Now Mike, this seems like a great idea\nin allowing us to actually go through and\n\n696\n00:33:32.230 --> 00:33:33.170\nsee the process.\n\n697\n00:33:33.170 --> 00:33:37.480\nSo, what's happening at this point,\nhopefully Mike will actually confirm this.\n\n698\n00:33:37.480 --> 00:33:39.240\nIs that it's beginning to\nbuild that database and\n\n699\n00:33:39.240 --> 00:33:41.960\nall those partitions we've talked\nabout in a previous episode.\n\n700\n00:33:41.960 --> 00:33:43.250\nGetting everything ready,\n\n701\n00:33:43.250 --> 00:33:46.258\nbut more importantly,\nit's building everything that it needs.\n\n702\n00:33:46.258 --> 00:33:49.770\nSo it's tying it to that name space,\nit's doing everything that it needs here.\n\n703\n00:33:49.770 --> 00:33:55.060\nAnd this becomes an incredibly detailed\ndatabase that really allows you to do that\n\n704\n00:33:55.060 --> 00:33:59.570\nauthentication as well as authorization\nthroughout your entire domain.\n\n705\n00:33:59.570 --> 00:34:02.160\nSo, we've gotta give it some\ntime as it actually finishes and\n\n706\n00:34:02.160 --> 00:34:03.500\ndoes everything that it needs to.\n\n707\n00:34:03.500 --> 00:34:07.360\nBut once it's done, well, it should\nactually end up rebooting on its own and\n\n708\n00:34:07.360 --> 00:34:09.050\nthen come back up as a domain controller.\n\n709\n00:34:09.050 --> 00:34:12.230\nNow Mike, when you and I first\nstarted the Server 2000, Server 2003,\n\n710\n00:34:12.230 --> 00:34:17.200\nthis thing could take, it felt like\nyears at times before it did it.\n\n711\n00:34:17.200 --> 00:34:19.880\nBut Mike's machine, I think,\njust is starting its reboot now.\n\n712\n00:34:19.880 --> 00:34:24.710\nSo, even in just about two or three\nminutes, we were able to actually build\n\n713\n00:34:24.710 --> 00:34:29.150\na brand new domain controller in a brand\nnew forest, and that's pretty darn cool.\n\n714\n00:34:29.150 --> 00:34:32.062\n>> It is, and I know, Ronnie,\nwe're running short on time on this one.\n\n715\n00:34:32.062 --> 00:34:33.951\n>> So\nmaybe we can do that on our next episode.\n\n716\n00:34:33.951 --> 00:34:36.119\nThere are still a couple if\nthings that we need to do.\n\n717\n00:34:36.119 --> 00:34:39.200\nOnce this reboots, and I'm going\nto show you if you want to see it,\n\n718\n00:34:39.200 --> 00:34:40.590\nonce my screen comes up here.\n\n719\n00:34:40.590 --> 00:34:43.750\nYou can see this nice black screen,\nthere it goes, it's coming up.\n\n720\n00:34:43.750 --> 00:34:46.930\nAnd I'll be able to log onto\nthat domain for the first time.\n\n721\n00:34:46.930 --> 00:34:50.050\nThere are some things that I can do\nto verify that the installation went\n\n722\n00:34:50.050 --> 00:34:51.000\nsuccessfully.\n\n723\n00:34:51.000 --> 00:34:53.820\nAnd there's a whole bunch of other\noptions that we can do when it comes\n\n724\n00:34:53.820 --> 00:34:55.490\nto installing an Active Directory.\n\n725\n00:34:55.490 --> 00:35:01.090\n>> Well, the good thing is it looks\nlike we're gonna take it into\n\n726\n00:35:01.090 --> 00:35:02.382\nanother part two for us.\n\n727\n00:35:02.382 --> 00:35:03.290\n>> [LAUGH]\n>> Which is not\n\n728\n00:35:03.290 --> 00:35:05.820\ngonna be a bad idea because\nwe do wanna verify.\n\n729\n00:35:05.820 --> 00:35:07.970\nBut Mike also talked\nabout the very fact that,\n\n730\n00:35:07.970 --> 00:35:11.310\nwe still have to deal with things like\nServer Core installations as well.\n\n731\n00:35:11.310 --> 00:35:14.380\nAnd then even some other\nalternate ones like child domains.\n\n732\n00:35:14.380 --> 00:35:18.110\nYou name it, there's still a lot more\nto come on the installation side.\n\n733\n00:35:18.110 --> 00:35:21.010\nSo do take time,\nmake sure you review this episode again.\n\n734\n00:35:21.010 --> 00:35:23.970\nUnderstand those prerequisites,\nunderstand the walking through the GUI.\n\n735\n00:35:23.970 --> 00:35:26.600\nAnd as easy as it seems just to\nbe able to click through it,\n\n736\n00:35:26.600 --> 00:35:29.790\nyou do wanna pay attention,\nbecause if it's your first time doing it,\n\n737\n00:35:29.790 --> 00:35:32.620\nyou wanna make sure you understand why\nyou're actually having to do the things\n\n738\n00:35:32.620 --> 00:35:34.850\nthat you're doing, and\nthen it should install perfectly fine.\n\n739\n00:35:34.850 --> 00:35:37.630\nYou should be up and going,\nmaybe within a half an hour or so.\n\n740\n00:35:37.630 --> 00:35:38.720\nMaybe a little bit less.\n\n741\n00:35:38.720 --> 00:35:41.300\nAnd you'll have a domain\ncontroller ready to go.\n\n742\n00:35:41.300 --> 00:35:43.670\nBut there is still a lot more\nto go on installing domains, so\n\n743\n00:35:43.670 --> 00:35:46.090\nthis is a great place for\nus to end this episode.\n\n744\n00:35:46.090 --> 00:35:47.760\nSigning off for ITProTV, I'm Ronnie Wong.\n\n745\n00:35:47.760 --> 00:35:48.680\n>> And I'm Mike Rodrick.\n\n746\n00:35:48.680 --> 00:35:50.362\n>> And we'll see you next time.\n\n747\n00:35:50.362 --> 00:35:53.610\n[SOUND]\n\n",
          "vimeoId": "146126014"
        },
        {
          "description": "In this episode, Ronnie and Mike continue the installation process by verifying a successful installation from the GUI install.  They also take some time to show the way to remotely install Active Directory and configure a Domain Controller from Server Manager.",
          "length": "1812",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-actvedirectory-2-1-installing_active_directory_pt2-110415-high.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-actvedirectory-2-1-installing_active_directory_pt2-110415-high-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-actvedirectory-2-1-installing_active_directory_pt2-110415-high-sm.jpg",
          "title": "Installing Active Directory Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:12.080 --> 00:00:15.920\nWelcome to another great\nepisode here on ITProTV.\n\n3\n00:00:15.920 --> 00:00:18.770\nI'm your host, Ronnie Wong, and\ntoday we'll be taking a look at, well,\n\n4\n00:00:18.770 --> 00:00:21.470\nverifying the installation\nof active directory and\n\n5\n00:00:21.470 --> 00:00:25.860\ntalking about alternatives methods to\nalso installing active directory as well.\n\n6\n00:00:25.860 --> 00:00:29.000\nNow, who better to help us to navigate\nthese murky waters than, well,\n\n7\n00:00:29.000 --> 00:00:31.000\nour ship captain, Mike Rodrick.\n\n8\n00:00:31.000 --> 00:00:31.920\nHow's it going, Mike?\n\n9\n00:00:31.920 --> 00:00:33.090\n>> [LAUGH] It's going great, Ronnie.\n\n10\n00:00:33.090 --> 00:00:34.780\nThanks for that intro.\n\n11\n00:00:34.780 --> 00:00:38.350\nIn our previous episode, we went through\nthe process of installing active\n\n12\n00:00:38.350 --> 00:00:40.260\ndirectory, and\nI left you with that cliff hanger, right?\n\n13\n00:00:40.260 --> 00:00:44.846\nThe machine was rebooting, and we never\ngot to see if it actually worked, right?\n\n14\n00:00:44.846 --> 00:00:47.540\n>> [LAUGH]\n>> And that's what we're gonna do now.\n\n15\n00:00:47.540 --> 00:00:51.610\nIf you're going to install active\ndirectory, it's a good idea to go back and\n\n16\n00:00:51.610 --> 00:00:53.010\nmake sure that it succeeded.\n\n17\n00:00:53.010 --> 00:00:53.759\n>> Works.\n>> Yeah,\n\n18\n00:00:53.759 --> 00:00:57.448\n[LAUGH] that it actually works and we can\nuse it, right, do that we can move on.\n\n19\n00:00:57.448 --> 00:01:02.320\nAnd then, as Ronnie said, we're gonna take\na look at some other ways that we can\n\n20\n00:01:02.320 --> 00:01:07.558\ninstall Active Directory, either remotely\nusing PowerShell, and also a little bit\n\n21\n00:01:07.558 --> 00:01:12.930\nabout creating a child domain or separate\ntree in our forest and things like that.\n\n22\n00:01:12.930 --> 00:01:14.700\nSo, let's see what we've got here.\n\n23\n00:01:14.700 --> 00:01:15.880\nSo, if we take a look at my screen,\n\n24\n00:01:15.880 --> 00:01:21.470\nthis is the machine that we finished with\non the last episode, it was rebooting.\n\n25\n00:01:21.470 --> 00:01:23.650\nIt finished the installation\nof Active Directory.\n\n26\n00:01:23.650 --> 00:01:25.500\nIt was in the process of rebooting.\n\n27\n00:01:25.500 --> 00:01:29.500\nRemember, to complete the installation\nthe server must reboot.\n\n28\n00:01:29.500 --> 00:01:32.400\nThere is a way you can\ntell it not to reboot,\n\n29\n00:01:32.400 --> 00:01:35.500\nbut it won't be a domain controller\nuntil you actually reboot it.\n\n30\n00:01:35.500 --> 00:01:37.860\nSo now we're gonna log on,\nand let's see what happens.\n\n31\n00:01:37.860 --> 00:01:43.985\nThe first thing you'll notice is that my\nlogon screen here says, LAB\\Administrator.\n\n32\n00:01:43.985 --> 00:01:46.532\nThat's my first indication\nthat everything went well.\n\n33\n00:01:46.532 --> 00:01:49.742\nIt's saying, hey, you can't logon\nto the local machine anymore.\n\n34\n00:01:49.742 --> 00:01:54.919\nIn fact, if I try to switch user and\ndo other user, and\n\n35\n00:01:54.919 --> 00:02:01.150\ntry to do dc01\\administrator,\nwe should see that it fails.\n\n36\n00:02:01.150 --> 00:02:02.760\nIt's not gonna allow me to do that.\n\n37\n00:02:02.760 --> 00:02:05.380\nYou've got to log on to Active Directory.\n\n38\n00:02:05.380 --> 00:02:09.330\nSo I'm gonna go back and\ndo LAB\\Administrator, and\n\n39\n00:02:09.330 --> 00:02:11.150\nI'll put in my password.\n\n40\n00:02:12.190 --> 00:02:13.220\nAnd there we go.\n\n41\n00:02:13.220 --> 00:02:13.950\nI'm logging in, so\n\n42\n00:02:13.950 --> 00:02:18.550\nthere's indicator number one,\nI'm able to log in as the domain admin.\n\n43\n00:02:18.550 --> 00:02:21.380\nThat's a good indicator that\nActive Directory's working properly.\n\n44\n00:02:21.380 --> 00:02:25.290\nNext thing I'd wanna do, I wanna let\nServer Manager kind of populate here.\n\n45\n00:02:25.290 --> 00:02:26.970\nIt's gotta go out and\n\n46\n00:02:26.970 --> 00:02:30.120\nretrieve its information about\nthe roles that are installed and\n\n47\n00:02:30.120 --> 00:02:33.050\nthe event log summaries and\nthings like that, so it takes it a minute.\n\n48\n00:02:33.050 --> 00:02:37.780\nAnd now that it has, I can see over here,\nin my navigation tree, I can see things\n\n49\n00:02:37.780 --> 00:02:42.350\nlike Active Directory domain services,\nand everything is looking good here.\n\n50\n00:02:42.350 --> 00:02:45.400\nI go down to my event log for\nActive Directory,\n\n51\n00:02:45.400 --> 00:02:47.960\nI don't see anything too\nfar out of the ordinary.\n\n52\n00:02:47.960 --> 00:02:51.475\nHere I can see, could not initialize\nvirtualize domain controller or\n\n53\n00:02:51.475 --> 00:02:54.570\nacknowledge, but I would imagine if\nI looked up a little bit further,\n\n54\n00:02:54.570 --> 00:02:57.030\neventually we'd see a success message.\n\n55\n00:02:57.030 --> 00:02:58.930\nThese are just the errors and\nwarnings, right,\n\n56\n00:02:58.930 --> 00:03:00.670\nbecause this is the summary log file.\n\n57\n00:03:00.670 --> 00:03:04.110\nAnd again, no big fat errors there,\nso I'm probably good to go.\n\n58\n00:03:04.110 --> 00:03:05.850\nI can look and DNS was installed.\n\n59\n00:03:05.850 --> 00:03:07.140\nAll right.\n\n60\n00:03:07.140 --> 00:03:08.670\nEverything looks good there as well.\n\n61\n00:03:08.670 --> 00:03:10.180\nAgain, I've got a warning, but\n\n62\n00:03:10.180 --> 00:03:13.940\nif I go back to my dashboard,\nthis is really what I wanna look at.\n\n63\n00:03:13.940 --> 00:03:16.400\nI've got my green,\nright, across the board.\n\n64\n00:03:16.400 --> 00:03:20.960\nActive directory up and running,\nDNS up and running, so I'm good to go.\n\n65\n00:03:20.960 --> 00:03:25.441\nRemember, those log files are summaries\nof the errors and the warnings.\n\n66\n00:03:25.441 --> 00:03:26.608\nSo, I should be good there.\n\n67\n00:03:26.608 --> 00:03:30.217\nNext thing I could do is I could\nopen up File Explorer, and\n\n68\n00:03:30.217 --> 00:03:32.336\nwe can take a look on that C drive.\n\n69\n00:03:32.336 --> 00:03:38.048\nSince I didn't change the default\nlocations, C: > Windows > NTDS.\n\n70\n00:03:38.048 --> 00:03:41.252\nOops, let's just do that again.\n\n71\n00:03:41.252 --> 00:03:42.256\nI jumped down a little too far.\n\n72\n00:03:42.256 --> 00:03:46.090\nC: > Windows > NTDS, and\nthere's my database and\n\n73\n00:03:46.090 --> 00:03:49.770\nall of those associated log files.\n\n74\n00:03:49.770 --> 00:03:52.425\nIf I go back out, we jump down to SYSVOL.\n\n75\n00:03:54.230 --> 00:03:58.150\nThere's my SYSVOL folder structure,\nand there's my domain lab.itpro.tv.\n\n76\n00:03:58.150 --> 00:04:02.800\nAnd in there I can see my\ndefault policies I got created.\n\n77\n00:04:02.800 --> 00:04:05.250\nSo everything's looking\ngood there as well.\n\n78\n00:04:05.250 --> 00:04:06.620\nI can continue to do some checks.\n\n79\n00:04:06.620 --> 00:04:09.270\nI can take a look and\nmake sure my tools are there.\n\n80\n00:04:09.270 --> 00:04:11.510\nThere's all my Active Directory snap-ins.\n\n81\n00:04:11.510 --> 00:04:14.620\nRemember, those additional\nfeatures that we chose to do?\n\n82\n00:04:14.620 --> 00:04:16.070\nThose are all right there.\n\n83\n00:04:16.070 --> 00:04:18.650\nThere's that Active Directory module for\nWindows PowerShell,\n\n84\n00:04:18.650 --> 00:04:20.560\nand it's able to launch.\n\n85\n00:04:20.560 --> 00:04:22.680\nEverything looks good there.\n\n86\n00:04:22.680 --> 00:04:26.480\nI can launch one of those tools,\nActive Directory users and computers.\n\n87\n00:04:27.540 --> 00:04:29.240\nEverything looks good there.\n\n88\n00:04:29.240 --> 00:04:33.380\nThere's my Active Directory, there's\nmy account for my domain controller.\n\n89\n00:04:33.380 --> 00:04:37.270\nSo, so far, Ronnie,\neverything is passing with flying colors.\n\n90\n00:04:37.270 --> 00:04:40.860\nAnother thing that I might wanna check,\nremember my domain controller is supposed\n\n91\n00:04:40.860 --> 00:04:45.810\nto register SRV records so that other\nmachines can find them when he wants to\n\n92\n00:04:45.810 --> 00:04:50.840\njoin the domain, when they wanna log on,\nso let's take a look at DNS real quick.\n\n93\n00:04:50.840 --> 00:04:56.290\nI'll fire up DNS, I'll expand my way\ndown into my Forward Lookup Zones,\n\n94\n00:04:56.290 --> 00:05:01.350\nand we'll just go up here to my\ndomain controller records for TCP.\n\n95\n00:05:01.350 --> 00:05:04.485\nAnd there I can see is\nbeing hosted by DCO1.\n\n96\n00:05:04.485 --> 00:05:09.860\nLDAP, my lightweight directory\naccess protocol DCO1, right?\n\n97\n00:05:09.860 --> 00:05:14.540\nSo my domain controller i successfully\nregistered those SRV records.\n\n98\n00:05:14.540 --> 00:05:18.170\nIf those didn't, and we'll cover that\na little bit more when we get into DNS or\n\n99\n00:05:18.170 --> 00:05:19.170\nin some other videos.\n\n100\n00:05:19.170 --> 00:05:23.430\nIf those hadn't been created, everything\nmight have been working okay but\n\n101\n00:05:23.430 --> 00:05:25.130\nmaybe it had trouble connecting to DNS.\n\n102\n00:05:25.130 --> 00:05:28.420\nSo that's not, wouldn't be indicator\nthat Active Directory had failed,\n\n103\n00:05:28.420 --> 00:05:32.040\nit would be something I'd want to look\ninto because it is a possibility.\n\n104\n00:05:32.040 --> 00:05:35.831\nSo if we looked into it, and\nyou can always do a net stop,\n\n105\n00:05:35.831 --> 00:05:37.790\nthe net log on service.\n\n106\n00:05:37.790 --> 00:05:40.440\nAnd then net start,\nthe net log on service, and\n\n107\n00:05:40.440 --> 00:05:43.690\nthat should force it to\nre-register those records.\n\n108\n00:05:43.690 --> 00:05:45.000\nMake sure you're TCP IP settings,\n\n109\n00:05:45.000 --> 00:05:49.710\nthat this domain controller\nis using himself for DNS, for\n\n110\n00:05:49.710 --> 00:05:53.440\nhis primary DNS server, cuz that's who\nhe's registering the records with.\n\n111\n00:05:53.440 --> 00:05:56.710\nIf you had it set to something else for\nsome reason, he might have registered\n\n112\n00:05:56.710 --> 00:06:00.310\nthose records on that other DNS server\nwhich isn't gonna help us out here.\n\n113\n00:06:00.310 --> 00:06:04.020\nSo making sure that everything got\ncreated, everything got installed,\n\n114\n00:06:04.020 --> 00:06:05.600\nrecords got created.\n\n115\n00:06:05.600 --> 00:06:07.880\nAt this point,\nwe're pretty much good to go.\n\n116\n00:06:07.880 --> 00:06:10.700\nThe only other real test that we could do\n\n117\n00:06:10.700 --> 00:06:12.950\nwould be to try to join\na computer to the domain, right?\n\n118\n00:06:12.950 --> 00:06:14.950\n>> That would be one\nof the great tests and\n\n119\n00:06:14.950 --> 00:06:17.130\none of the functional tests\nthat we can have, right?\n\n120\n00:06:17.130 --> 00:06:21.050\nMike, verifying that all those structures\nthat needed to be created are there,\n\n121\n00:06:21.050 --> 00:06:23.240\nright, the folders, the database,\n\n122\n00:06:23.240 --> 00:06:27.080\nmaking sure that those records are showing\nup the way that they are in DNS database,\n\n123\n00:06:27.080 --> 00:06:30.910\nall great things, all indications that\neverything is actually a green light.\n\n124\n00:06:30.910 --> 00:06:33.300\nBut the true test is\nabsolutely functionality.\n\n125\n00:06:33.300 --> 00:06:37.490\nSo, if now if we actually take the time to\ntake a computer that's in the work group\n\n126\n00:06:37.490 --> 00:06:42.020\nor any other domain and actually rejoin it\nin our domain, we should see some changes.\n\n127\n00:06:42.020 --> 00:06:44.910\nWe should see some entries happening\ninside of our Active Directory\n\n128\n00:06:44.910 --> 00:06:46.110\nusing the computers as well.\n\n129\n00:06:46.110 --> 00:06:46.930\n>> So let's try it out.\n\n130\n00:06:46.930 --> 00:06:49.510\nLet's switch over to\nthis other server here.\n\n131\n00:06:49.510 --> 00:06:52.190\nAnd I've already got\nsome of it configured.\n\n132\n00:06:52.190 --> 00:06:55.630\nHe's got his name, his svr01, and\nthe one big thing you wanna check,\n\n133\n00:06:55.630 --> 00:07:00.400\nif you're gonna join a computer to\nthe domain, well, it needs to contact\n\n134\n00:07:00.400 --> 00:07:04.060\nthat domain controller, so it can ask,\nhey, is there an account for me?\n\n135\n00:07:04.060 --> 00:07:07.150\nOr if not, can I create\nan account in Active Directory?\n\n136\n00:07:07.150 --> 00:07:09.230\nSo, it needs to be able to\ncontact Active Directory.\n\n137\n00:07:09.230 --> 00:07:11.150\nIt needs to be able to contact\nthat domain controller.\n\n138\n00:07:11.150 --> 00:07:12.650\nHow does it find it?\n\n139\n00:07:12.650 --> 00:07:14.780\nWell, it queries DNS.\n\n140\n00:07:14.780 --> 00:07:19.350\nWhen we go to join the domain, it's gonna\nsay, what domain do you want to join?\n\n141\n00:07:19.350 --> 00:07:21.390\nAnd we're gonna type in lab.itpro.tv.\n\n142\n00:07:21.390 --> 00:07:26.180\nAnd so it's gonna call up DNS and say,\nhey, DNS, what's the IP address for\n\n143\n00:07:26.180 --> 00:07:28.270\nthe domain controller for lab.itpro.tv?\n\n144\n00:07:28.270 --> 00:07:32.950\nDNS is gonna check those SRV records\nthat we just verified were there to\n\n145\n00:07:32.950 --> 00:07:35.970\npoint us in the right direction,\nand we'll be able to join.\n\n146\n00:07:35.970 --> 00:07:38.966\nBut what if my DNS server, I gotta\nmake sure that this guy is pointed to\n\n147\n00:07:38.966 --> 00:07:41.776\nthe correct, and he's not actually,\nthe correct DNS server.\n\n148\n00:07:41.776 --> 00:07:43.480\nLet's do this, Ronnie.\n\n149\n00:07:43.480 --> 00:07:46.660\nLet's see what happens if i\nI have the wrong DNS server.\n\n150\n00:07:46.660 --> 00:07:51.950\nSo let's go to join the domain,\nand we'll change this to domain.\n\n151\n00:07:51.950 --> 00:07:57.885\nAnd we'll say, lab.itpro.tv,\nand I'll click OK.\n\n152\n00:07:57.885 --> 00:08:01.042\nSo now it should be reaching out,\ntalking to a DNS.\n\n153\n00:08:01.042 --> 00:08:04.802\nSaying hey I'm trying to contact\nlab.it.tvdomaincontroller.\n\n154\n00:08:04.802 --> 00:08:05.780\nWhat's his IP address?\n\n155\n00:08:05.780 --> 00:08:10.110\nBut the problem is,\nis my DNS settings are misconfigured.\n\n156\n00:08:10.110 --> 00:08:12.470\nI'm not talking to the right dns server.\n\n157\n00:08:12.470 --> 00:08:15.740\nSo it can't find a domain controller for\nlab.itpro.tv.\n\n158\n00:08:15.740 --> 00:08:19.100\nThis is a very common issue that\nyou will have in the real world.\n\n159\n00:08:19.100 --> 00:08:23.235\nSo what I'm gonna do is I'm simply\ngonna leave this wizard here actually.\n\n160\n00:08:23.235 --> 00:08:26.672\nAnd I'm going to flip over\nto my tcpip settings.\n\n161\n00:08:26.672 --> 00:08:33.916\nAnd I'm going to adjust\nmy tcpip to .2 200.\n\n162\n00:08:33.916 --> 00:08:38.235\nThat is the IP address of that\nnewly created domain controller.\n\n163\n00:08:38.235 --> 00:08:40.141\nOnce I've got that up.\n\n164\n00:08:40.141 --> 00:08:41.772\nI'll flip back over here to the wizard.\n\n165\n00:08:41.772 --> 00:08:43.869\nAnd we'll just click OK, and try it again.\n\n166\n00:08:43.869 --> 00:08:45.549\nAnd bada bing, there you go.\n\n167\n00:08:45.549 --> 00:08:48.452\nNow I know it's found it,\nbecause it's asking me for\n\n168\n00:08:48.452 --> 00:08:50.657\ncredentials to connect to that domain.\n\n169\n00:08:50.657 --> 00:08:57.040\nSo I'll do lab/administrator and\nmy super secret password.\n\n170\n00:08:59.280 --> 00:09:03.274\nAnd hopefully I'll get a welcome\nto the lab.itprotv domain.\n\n171\n00:09:03.274 --> 00:09:06.856\nI'll click OK and OK, and Close.\n\n172\n00:09:06.856 --> 00:09:11.278\nAnd any time you change the work group or\ndomain membership you must restart for\n\n173\n00:09:11.278 --> 00:09:13.250\nthose changes to take affect.\n\n174\n00:09:13.250 --> 00:09:16.705\nSo while that's doing it though, we can\nflip back into the domain controller.\n\n175\n00:09:16.705 --> 00:09:19.890\nI'm simply gonna open up\nActive Directory users and computers.\n\n176\n00:09:19.890 --> 00:09:23.940\nAnd I'll go to that computers container,\ncuz that's the default location.\n\n177\n00:09:23.940 --> 00:09:29.650\nAnd sure enough there's the account for\nSVR01 he is now part of my domain.\n\n178\n00:09:29.650 --> 00:09:33.600\nIf I flip back over here,\nhe's still rebooting.\n\n179\n00:09:33.600 --> 00:09:36.559\nSo we'll give it a second and\nI'll be able to log in to the domain.\n\n180\n00:09:36.559 --> 00:09:40.460\nBut that Ronnie, as you said,\nis the true test, right?\n\n181\n00:09:40.460 --> 00:09:42.500\nMy Active Directory is\nfunctioning properly.\n\n182\n00:09:42.500 --> 00:09:45.760\nI can take a machine and\nI can join it to that domain.\n\n183\n00:09:45.760 --> 00:09:48.850\n>> Yeah, the key here is\nespecially during the join, right?\n\n184\n00:09:48.850 --> 00:09:51.680\nIs to look out for\nthose error messages that pop up.\n\n185\n00:09:51.680 --> 00:09:54.851\nA lot of times if it's not a DNS\nissue it's more like my issue.\n\n186\n00:09:54.851 --> 00:09:58.574\nThe very fact that I tended not to type\nin the administrator's password a lot\n\n187\n00:09:58.574 --> 00:09:59.107\nof times.\n\n188\n00:09:59.107 --> 00:10:01.371\nAnd you will also get\nerrors like that too.\n\n189\n00:10:01.371 --> 00:10:04.696\nBut joining the computer to\nthe domain really does test the true\n\n190\n00:10:04.696 --> 00:10:08.290\nfunctionality of your\nActive Directory domain controller.\n\n191\n00:10:08.290 --> 00:10:11.712\nBecause it actually runs through all those\nthings that Mike was taking about, right?\n\n192\n00:10:11.712 --> 00:10:16.570\nIs creating an actual record in the\ndatabase inside of the Active Directory\n\n193\n00:10:16.570 --> 00:10:17.812\ndatabase itself.\n\n194\n00:10:17.812 --> 00:10:20.622\nIt's actually reaching out and\nusing the DNS that we set up.\n\n195\n00:10:20.622 --> 00:10:22.875\nIt's actually communicating\nwith that domain controller.\n\n196\n00:10:22.875 --> 00:10:24.880\nAnd saying look,\nI need to be able to do this.\n\n197\n00:10:24.880 --> 00:10:28.190\nAnd the domain controller's responding and\ndoing everything that we need to.\n\n198\n00:10:28.190 --> 00:10:30.260\nAnd usually that's the only\nfunctionality test I do.\n\n199\n00:10:30.260 --> 00:10:32.090\nMike showed us a lot more and I'm like,\n\n200\n00:10:32.090 --> 00:10:34.506\nwow, I didn't know I should\ncheck this kind of stuff here.\n\n201\n00:10:34.506 --> 00:10:35.850\n>> [LAUGH]\n>> But every once in a while,\n\n202\n00:10:35.850 --> 00:10:36.680\nit's good to know.\n\n203\n00:10:36.680 --> 00:10:37.210\nRight?\n\n204\n00:10:37.210 --> 00:10:39.011\nBecause that can also\nhelp you out later on,\n\n205\n00:10:39.011 --> 00:10:41.648\nwhen we get into maybe a little\nbit of troubleshooting later on.\n\n206\n00:10:41.648 --> 00:10:44.637\nThat hey, here's some things that just\naren't working when things don't appear\n\n207\n00:10:44.637 --> 00:10:45.770\nwhere they need to be.\n\n208\n00:10:45.770 --> 00:10:49.543\nSo it's nice to at least know those\nthings and verify where they are too.\n\n209\n00:10:49.543 --> 00:10:51.174\nSo Mike, what are you showing us now here?\n\n210\n00:10:51.174 --> 00:10:53.771\n>> All right, well I went ahead and\nlogged into this server,\n\n211\n00:10:53.771 --> 00:10:55.046\nhe is now part of the domain.\n\n212\n00:10:55.046 --> 00:10:59.259\nIf I go take a look at local server\nI should see that server one\n\n213\n00:10:59.259 --> 00:11:01.570\nis now part of lab.itpro.tv.\n\n214\n00:11:01.570 --> 00:11:03.200\nSo everything worked like a charm.\n\n215\n00:11:03.200 --> 00:11:06.450\nSo the next thing I wanna do is I\nwanna install Active Directory again.\n\n216\n00:11:06.450 --> 00:11:09.606\nAnd then I wanna take that server\nthat we just joined to the domain.\n\n217\n00:11:09.606 --> 00:11:14.065\nAnd I wanna make it a second domain\ncontroller in this domain because one\n\n218\n00:11:14.065 --> 00:11:17.190\ndomain controller is never enough, right?\n\n219\n00:11:17.190 --> 00:11:20.300\nYou've got to have at least\ntwo domain controllers for\n\n220\n00:11:20.300 --> 00:11:22.180\nfault tolerance if nothing else.\n\n221\n00:11:22.180 --> 00:11:25.430\nLoad balancing as well,\ndepending on the size of your environment.\n\n222\n00:11:25.430 --> 00:11:28.330\nBut remember, that domain controller\nis in charge of everything.\n\n223\n00:11:28.330 --> 00:11:30.000\nAll security, all log in,\n\n224\n00:11:30.000 --> 00:11:33.080\nall authentication,\ngoes through that domain controller.\n\n225\n00:11:33.080 --> 00:11:34.290\nAccess to resources.\n\n226\n00:11:34.290 --> 00:11:37.480\nYou've got to get service tickets\nissued by these domain controllers.\n\n227\n00:11:37.480 --> 00:11:41.410\nSo if he goes down well now all of\na sudden my users can't log in.\n\n228\n00:11:41.410 --> 00:11:44.475\nIf they were already logged in they\nmight stay logged in for a little while.\n\n229\n00:11:44.475 --> 00:11:48.214\nBut if they try to access resources\nthey're probably gonna get denied.\n\n230\n00:11:48.214 --> 00:11:50.060\nBecause they can't generate a new token.\n\n231\n00:11:50.060 --> 00:11:52.266\nYou're gonna have all\nkind of problems right?\n\n232\n00:11:52.266 --> 00:11:55.080\nSo two domain controllers minimum.\n\n233\n00:11:55.080 --> 00:11:56.965\nSo let's add our second domain controller.\n\n234\n00:11:56.965 --> 00:11:59.539\nWhat we're gonna do with\na little twist here,\n\n235\n00:11:59.539 --> 00:12:03.230\nwe're gonna make things fun like\nwe love to do here at IT Pro TV.\n\n236\n00:12:03.230 --> 00:12:04.574\nI'm not gonna go over here,\nI could do just what we did.\n\n237\n00:12:04.574 --> 00:12:08.710\nI could go to my server 01,\nI could add roles and features.\n\n238\n00:12:08.710 --> 00:12:10.210\nBut that'd be boring.\n\n239\n00:12:10.210 --> 00:12:11.780\nYou've already seen that.\n\n240\n00:12:11.780 --> 00:12:14.120\nIf you haven't, go back and\nwatch our other episode.\n\n241\n00:12:14.120 --> 00:12:16.055\nWhat I'm going to do, it do it from here.\n\n242\n00:12:16.055 --> 00:12:17.217\nI'm gonna do it remotely.\n\n243\n00:12:17.217 --> 00:12:22.053\nWhat if this second machine I want to make\ninto main controller isn't located in my\n\n244\n00:12:22.053 --> 00:12:22.626\noffice?\n\n245\n00:12:22.626 --> 00:12:27.000\nOr I can't, for some reason remote\ninto it and do remote desktop.\n\n246\n00:12:27.000 --> 00:12:28.190\nHow do I do that?\n\n247\n00:12:28.190 --> 00:12:29.450\nWell It's easy.\n\n248\n00:12:29.450 --> 00:12:33.430\nWith server manager we can\nmanage multiple servers.\n\n249\n00:12:33.430 --> 00:12:35.980\nWe can even, if I had additional machines,\n\n250\n00:12:35.980 --> 00:12:40.540\nI could actually install active directory\non three machines at the same time.\n\n251\n00:12:40.540 --> 00:12:42.594\nRight?\nIt's pretty cool stuff.\n\n252\n00:12:42.594 --> 00:12:46.995\nBut what I'll do, first in order to manage\nthat server I'm going to click add server,\n\n253\n00:12:46.995 --> 00:12:49.090\nI right clicked on all servers.\n\n254\n00:12:49.090 --> 00:12:51.080\nAnd I'm choosing ad server.\n\n255\n00:12:51.080 --> 00:12:56.030\nAnd I'll find svr 01 and\nI'll add him to my group, or\n\n256\n00:12:57.140 --> 00:13:01.860\nmy all servers and we'll give it just\na second to populate, and there we go.\n\n257\n00:13:01.860 --> 00:13:04.434\nAnd now I can simply right\nclick on server one ad roll and\n\n258\n00:13:04.434 --> 00:13:07.980\nfeatures ad roll and mike,\nthat's that same wizard.\n\n259\n00:13:07.980 --> 00:13:08.920\nIt is.\n\n260\n00:13:08.920 --> 00:13:10.110\nBut look up here in the top corner.\n\n261\n00:13:10.110 --> 00:13:12.080\nI don't know if you can\nread that on the screen.\n\n262\n00:13:12.080 --> 00:13:19.175\nIt actually says destination\nserver svr o one.lab.itpro.tv.\n\n263\n00:13:19.175 --> 00:13:21.289\nSo I'll just do the same thing that\nwe'll go through this relatively quick.\n\n264\n00:13:21.289 --> 00:13:24.145\nYou've seen this already actually you\nknow what we'll stop at one point.\n\n265\n00:13:24.145 --> 00:13:26.000\nI've got a couple of\nthings I want to show you.\n\n266\n00:13:26.000 --> 00:13:28.843\nAgain, making sure that\nI'm choosing server 01.\n\n267\n00:13:28.843 --> 00:13:32.450\nThat's the one that I want to\ninstall it on I'll click Next.\n\n268\n00:13:32.450 --> 00:13:35.800\nWe'll choose the Active Directory\ndomain services.\n\n269\n00:13:35.800 --> 00:13:37.470\nI'll include all the features.\n\n270\n00:13:37.470 --> 00:13:38.510\nIt has a GUI.\n\n271\n00:13:38.510 --> 00:13:42.143\nSo I probably want to include the\nadministrative tools in case I ever need\n\n272\n00:13:42.143 --> 00:13:45.018\nto log onto that machine and\nwork with Active Directory.\n\n273\n00:13:45.018 --> 00:13:48.222\nI'll click Next and Next, and Next again.\n\n274\n00:13:48.222 --> 00:13:50.390\nAnd then I'll go ahead and click Install.\n\n275\n00:13:50.390 --> 00:13:52.350\nRemember this is just installing the role.\n\n276\n00:13:52.350 --> 00:13:54.963\nIt's not actually configuring\nActive Directory yet.\n\n277\n00:13:54.963 --> 00:13:56.968\nWe still need to go back and do that.\n\n278\n00:13:56.968 --> 00:14:01.277\nAnd that's where I'll stop and show you\na couple options that we didn't look\n\n279\n00:14:01.277 --> 00:14:03.810\nat the first time we ran\nthrough that wizard.\n\n280\n00:14:03.810 --> 00:14:06.008\n>> Now Mike,\nbefore you continue on in that way.\n\n281\n00:14:06.008 --> 00:14:10.490\nWas it essential that we go ahead and\njoin that server into the current\n\n282\n00:14:10.490 --> 00:14:14.677\nActive Directory before we do this for\nthis domain controller?\n\n283\n00:14:14.677 --> 00:14:16.800\nOr could I have left it\nas a Workgroup server?\n\n284\n00:14:16.800 --> 00:14:19.902\n>> To do it this way it's a lot easier if\nhe's a member server because I'm going to\n\n285\n00:14:19.902 --> 00:14:21.503\nbe able to remotely manage it like this.\n\n286\n00:14:21.503 --> 00:14:25.441\nThere are ways that you can manage\nWorkgroup servers, from there.\n\n287\n00:14:25.441 --> 00:14:30.200\nBut you have to change some settings,\nsome configuration, to allow that.\n\n288\n00:14:30.200 --> 00:14:32.902\nBut if they're part of the domain,\nit's so much easier.\n\n289\n00:14:32.902 --> 00:14:34.500\n>> [LAUGH]\n>> So, me, personally.\n\n290\n00:14:34.500 --> 00:14:38.183\nI find it easier just to have somebody,\nwherever that server is.\n\n291\n00:14:38.183 --> 00:14:41.574\nI can walk just about anybody\nthrough joining it to the domain.\n\n292\n00:14:41.574 --> 00:14:44.672\nAnd once I do that, then I can\nremotely manage it all I want, and\n\n293\n00:14:44.672 --> 00:14:45.678\nit's pretty easy.\n\n294\n00:14:45.678 --> 00:14:47.588\nBut could we have gotten\nit done without that?\n\n295\n00:14:47.588 --> 00:14:48.088\nYes.\n>> Okay.\n\n296\n00:14:48.088 --> 00:14:48.675\n>> It is possible.\n\n297\n00:14:48.675 --> 00:14:51.260\nAll right, so there we go.\n\n298\n00:14:51.260 --> 00:14:52.311\nThe wizard finishes.\n\n299\n00:14:52.311 --> 00:14:56.666\nAnd again, I'm just gonna launch that\nActive Directory configuration wizard,\n\n300\n00:14:56.666 --> 00:14:58.380\nthis time I'll click the link.\n\n301\n00:14:58.380 --> 00:15:01.583\nWhat we want to pay attention\nto notice I'm not configuring,\n\n302\n00:15:01.583 --> 00:15:03.376\nI'm logged on to dc01, right?\n\n303\n00:15:03.376 --> 00:15:09.227\nThis wizard is actually pointing the svr01\nso I'm remotely administering that server.\n\n304\n00:15:09.227 --> 00:15:12.021\nAnd we're gonna add a domain\ncontroller to an existing domain.\n\n305\n00:15:12.021 --> 00:15:15.070\nI want that second domain controller for\nfall tolerance.\n\n306\n00:15:15.070 --> 00:15:16.395\nWhat domain are you adding it to?\n\n307\n00:15:16.395 --> 00:15:18.556\nLab.ITPro.Tv.\n\n308\n00:15:18.556 --> 00:15:20.700\nWhat credentials are you gonna use?\n\n309\n00:15:20.700 --> 00:15:22.130\nWell I'll click Change.\n\n310\n00:15:22.130 --> 00:15:23.625\nNow if you were doing this locally.\n\n311\n00:15:23.625 --> 00:15:27.421\nIt'll usually pick up who you're\nlogged on as, and it'll already have,\n\n312\n00:15:27.421 --> 00:15:29.510\nlike in my case, lab/administrator.\n\n313\n00:15:29.510 --> 00:15:31.442\nSince I'm doing this\nremotely it's gonna say.\n\n314\n00:15:31.442 --> 00:15:33.294\nHey, who are you running this as?\n\n315\n00:15:33.294 --> 00:15:34.680\nOr who do you wanna run it as?\n\n316\n00:15:34.680 --> 00:15:36.409\nI'm gonna say Lab Administrator.\n\n317\n00:15:37.550 --> 00:15:42.050\nAnd my super secret password.\n\n318\n00:15:42.050 --> 00:15:42.700\nAnd I'll click OK.\n\n319\n00:15:42.700 --> 00:15:45.200\nNow it's got my credentials,\nI'll click next.\n\n320\n00:15:45.200 --> 00:15:49.017\nRemember I need to be a domain admin\nin order to perform this operation.\n\n321\n00:15:49.017 --> 00:15:53.530\nNow it's checking to see if I have DNS or\nglobal catalog on the network already.\n\n322\n00:15:55.330 --> 00:15:56.413\nAnd we'll let it do its thing.\n\n323\n00:15:56.413 --> 00:15:58.990\nSometimes it takes it a second or\ntwo to get through this page.\n\n324\n00:15:58.990 --> 00:16:01.572\nYou can see it start to\npopulate my steps over there.\n\n325\n00:16:01.572 --> 00:16:04.591\nAnd now notice global catalog,\nI could uncheck that.\n\n326\n00:16:04.591 --> 00:16:06.726\nWhen we installed that\nfirst domain controller.\n\n327\n00:16:06.726 --> 00:16:09.664\nI couldn't, cuz you have to have at\nleast one global catalog server.\n\n328\n00:16:09.664 --> 00:16:13.270\nSince that first domain controller\nis a global catalog server.\n\n329\n00:16:13.270 --> 00:16:16.780\nI don't have to make this second one\na global catalog server, but I'm going to.\n\n330\n00:16:16.780 --> 00:16:18.135\nI'm also gonna include DNS.\n\n331\n00:16:18.135 --> 00:16:21.802\nRemember active directory requires DNS.\n\n332\n00:16:21.802 --> 00:16:25.332\nIt's my opinion that every domain\ncontroller should also run DNS.\n\n333\n00:16:25.332 --> 00:16:27.200\nThat way it's got it\nright there next to it.\n\n334\n00:16:27.200 --> 00:16:30.301\nThere's no latency in networking issues,\nthings like that.\n\n335\n00:16:30.301 --> 00:16:33.141\nThe only thing I have to worry\nabout is the DNS service itself and\n\n336\n00:16:33.141 --> 00:16:34.597\nit keeps things pretty simple.\n\n337\n00:16:34.597 --> 00:16:38.695\nI do have to set a directory\nservice restore mode password.\n\n338\n00:16:41.655 --> 00:16:44.012\nI didn't mention,\nnotice RODC is now available.\n\n339\n00:16:44.012 --> 00:16:45.594\nThat first time we went through it,\n\n340\n00:16:45.594 --> 00:16:48.515\nit wasn't available because it\nwas my first domain controller.\n\n341\n00:16:48.515 --> 00:16:52.255\nAnd you have to have at least one\nwritable domain controller before you can\n\n342\n00:16:52.255 --> 00:16:53.112\ncreate an RODC.\n\n343\n00:16:53.112 --> 00:16:55.329\nNow that I've got a writeable\ndomain controller.\n\n344\n00:16:55.329 --> 00:16:58.580\nI could make this one an RDC,\nbut we'll do that later.\n\n345\n00:16:58.580 --> 00:17:00.228\nSo I set my dsrm password.\n\n346\n00:17:00.228 --> 00:17:01.993\nThat is a local thing, by the way.\n\n347\n00:17:01.993 --> 00:17:05.070\nEach domain controller has\nits own dsrm password.\n\n348\n00:17:05.070 --> 00:17:07.530\nThey don't have to be the same.\n\n349\n00:17:07.530 --> 00:17:09.818\nSo you don't have to\nconfigure them all the same.\n\n350\n00:17:09.818 --> 00:17:12.255\nA lot of times we do though,\njust to simplify things.\n\n351\n00:17:12.255 --> 00:17:17.016\nAgain, make sure it's long, strong,\nand that you change it every so often.\n\n352\n00:17:17.016 --> 00:17:21.532\nNo internet access I can't\nreach the parent DNS server.\n\n353\n00:17:21.532 --> 00:17:24.272\nI'm not worried about that\nwe're gonna click Next.\n\n354\n00:17:24.272 --> 00:17:27.344\nAnd then here's where I've got some\noptions that we didn't look at when we\n\n355\n00:17:27.344 --> 00:17:28.729\nwent through that first wizard.\n\n356\n00:17:28.729 --> 00:17:31.411\nSo let's stop and\ntalk about these for a second.\n\n357\n00:17:31.411 --> 00:17:37.110\nOne is install from media, and\nthe other one is replicate from.\n\n358\n00:17:37.110 --> 00:17:39.072\nWhat the heck are they talking about?\n\n359\n00:17:39.072 --> 00:17:42.326\nI've got a little diagram\nthat I'm gonna show you, or\n\n360\n00:17:42.326 --> 00:17:46.166\nwe're gonna use to make this\na little bit easier to understand.\n\n361\n00:17:46.166 --> 00:17:48.894\nLet's say, let's back up for a second.\n\n362\n00:17:48.894 --> 00:17:52.875\nWhen you install a second, third,\nor fourth domain controller.\n\n363\n00:17:52.875 --> 00:17:55.354\nIt's going to install active directory and\n\n364\n00:17:55.354 --> 00:17:58.506\nthen it needs a copy of that\nactive directory database.\n\n365\n00:17:58.506 --> 00:18:00.689\nYou've already got one domain controller.\n\n366\n00:18:00.689 --> 00:18:04.122\nYou might have already created some\nuser accounts some computer accounts and\n\n367\n00:18:04.122 --> 00:18:04.972\nthings like that.\n\n368\n00:18:04.972 --> 00:18:09.592\nAnd so that second domain controller needs\na copy of that active directory database.\n\n369\n00:18:09.592 --> 00:18:11.044\nAnd it does that through replication.\n\n370\n00:18:11.044 --> 00:18:12.668\nIt goes across the network.\n\n371\n00:18:12.668 --> 00:18:15.370\nIt reaches out and\ntalks to any other domain controller.\n\n372\n00:18:15.370 --> 00:18:17.700\nAnd it says hey,\nI'm a new domain controller.\n\n373\n00:18:17.700 --> 00:18:19.460\nCan I have a copy of the database?\n\n374\n00:18:19.460 --> 00:18:21.900\nCan I have a copy of SYSVOL?\n\n375\n00:18:22.950 --> 00:18:27.200\nWhat if that domain controller I'm setting\nup is over here on the branch office?\n\n376\n00:18:27.200 --> 00:18:30.320\nAnd the other domain controller is\nback here at the corporate office.\n\n377\n00:18:30.320 --> 00:18:33.220\nWell that means it has to\nreplicate that database\n\n378\n00:18:33.220 --> 00:18:38.640\nall the way over to that branch office\nacross my WAN link, which might be slow.\n\n379\n00:18:38.640 --> 00:18:42.135\nI've got users that are working at either\noffice that are using that WAN link for\n\n380\n00:18:42.135 --> 00:18:42.826\nother things.\n\n381\n00:18:42.826 --> 00:18:45.693\nAnd if this is down the road some time,\nright.\n\n382\n00:18:45.693 --> 00:18:48.359\nLet's say our corporate office\nhas been here for years.\n\n383\n00:18:48.359 --> 00:18:50.611\nAnd then we've now opened\nup our first branch office.\n\n384\n00:18:50.611 --> 00:18:54.373\nThat database could be big, have lots of\nusers and lots of computers in there.\n\n385\n00:18:54.373 --> 00:18:57.904\nAnd that could take some time\nreplicating that database across,\n\n386\n00:18:57.904 --> 00:19:00.350\nnot to mention sucking\nup all the bandwidth.\n\n387\n00:19:00.350 --> 00:19:02.127\nSo, what do we do?\n\n388\n00:19:02.127 --> 00:19:05.370\nWell, we can do something\ncalled install from media.\n\n389\n00:19:05.370 --> 00:19:10.710\nAll we're gonna do is we're gonna use\nthat NTDS Utility, or NTDSutil, from\n\n390\n00:19:10.710 --> 00:19:15.390\nthe command prompt to create a special\nbackup of that Active Directory database.\n\n391\n00:19:15.390 --> 00:19:17.610\nIt's called an IFM backup.\n\n392\n00:19:17.610 --> 00:19:19.580\nOnce I've got that backup.\n\n393\n00:19:19.580 --> 00:19:24.080\nI could then use some type\nof removable media like\n\n394\n00:19:24.080 --> 00:19:26.270\na USB hard drive to carry\nthat over to the network.\n\n395\n00:19:26.270 --> 00:19:29.750\nMaybe I ship it over to them, maybe\nit's down the road I jump in my car and\n\n396\n00:19:29.750 --> 00:19:30.980\nI take it to them.\n\n397\n00:19:30.980 --> 00:19:32.790\nWhatever the case may be.\n\n398\n00:19:32.790 --> 00:19:36.970\nOnce that backup gets over to\nthe branch office, I can then copy that\n\n399\n00:19:36.970 --> 00:19:42.280\nbackup off of the removable media onto\nthat new, the machine I want to make.\n\n400\n00:19:42.280 --> 00:19:44.130\nThe domain controller, all right.\n\n401\n00:19:44.130 --> 00:19:46.860\nThen, when I go through\nthe installation process,\n\n402\n00:19:48.340 --> 00:19:51.632\nI can simply tell it\nwhere that back up is.\n\n403\n00:19:51.632 --> 00:19:54.250\nAll right, where did I copy it to?\n\n404\n00:19:54.250 --> 00:19:58.354\nAnd it'll get, it's still gonna make\na new copy of that, but it's kinda weird.\n\n405\n00:19:58.354 --> 00:20:00.221\nIt's not just gonna use that back up.\n\n406\n00:20:00.221 --> 00:20:02.719\nIt's gonna make it's own\ncopy of the database.\n\n407\n00:20:02.719 --> 00:20:06.940\nBut it's gonna make the copy from that\nbackup, which is now a local resource.\n\n408\n00:20:06.940 --> 00:20:09.055\nIt's right there on the same hard drive,\nright.\n\n409\n00:20:09.055 --> 00:20:12.150\nAnd instead of having to\nreplicate it across the network.\n\n410\n00:20:12.150 --> 00:20:15.700\nNow that does not\neliminate all replication,\n\n411\n00:20:15.700 --> 00:20:20.320\nbecause that backup might have\nbeen made an hour ago, a day ago.\n\n412\n00:20:20.320 --> 00:20:21.095\nThere could,\n\n413\n00:20:21.095 --> 00:20:25.244\nthere's most likely some changes to\nthe database Since I made that backup.\n\n414\n00:20:25.244 --> 00:20:28.608\nSo it's gonna do the bulk of the work\nby just importing from this copy\n\n415\n00:20:28.608 --> 00:20:29.564\nfrom this backup.\n\n416\n00:20:29.564 --> 00:20:33.329\nBut any changes that have been made\nsince the backup would still have to be\n\n417\n00:20:33.329 --> 00:20:35.065\nreplicated across the network.\n\n418\n00:20:35.065 --> 00:20:40.149\nIt's gonna be a lot less than replicating\nthe entire active directory database.\n\n419\n00:20:40.149 --> 00:20:45.108\nSo it can really help you out when that\nbranch office has that that poor bandwidth\n\n420\n00:20:45.108 --> 00:20:47.267\nor slow connection out to the WAN.\n\n421\n00:20:47.267 --> 00:20:51.261\nThem other option on that\nscreen was specify source.\n\n422\n00:20:51.261 --> 00:20:56.002\nKind of the same concept, but instead of\nhaving a backup we're going to specify\n\n423\n00:20:56.002 --> 00:21:00.129\nwhich domain controller you're\ngoing to get the information from.\n\n424\n00:21:00.129 --> 00:21:01.960\nLet's take that same scenario, and\n\n425\n00:21:01.960 --> 00:21:05.340\nnow I've already got that domain\ncontrol route the branch office.\n\n426\n00:21:05.340 --> 00:21:07.350\nI did my IFM, my install for media,\n\n427\n00:21:07.350 --> 00:21:10.030\nand I've got my domain control\nright the branch office.\n\n428\n00:21:10.030 --> 00:21:13.920\nNow I'm setting up a second domain\ncontroller at the branch office.\n\n429\n00:21:13.920 --> 00:21:16.170\nWell, it needs a copy of the database.\n\n430\n00:21:16.170 --> 00:21:18.410\nAnd you might think well it's gonna\npull it from this guy right here.\n\n431\n00:21:19.670 --> 00:21:21.930\nNot if you don't tell it to.\n\n432\n00:21:21.930 --> 00:21:25.170\nIt could pull it from any domain\ncontroller that it finds on the network.\n\n433\n00:21:25.170 --> 00:21:28.228\nIt's gonna query dns,\nsay gimme a list of domain controllers.\n\n434\n00:21:28.228 --> 00:21:31.303\nThe first one in the list is\nthe one it's gonna try to contact.\n\n435\n00:21:31.303 --> 00:21:34.253\nAnd that very well could be\nthe one over here at the corporate\n\n436\n00:21:34.253 --> 00:21:35.970\noffice across the LAN link again.\n\n437\n00:21:35.970 --> 00:21:38.153\nSo that option allows me to say.\n\n438\n00:21:38.153 --> 00:21:40.545\nHey, you're gonna become\na new domain controller.\n\n439\n00:21:40.545 --> 00:21:42.727\nYou're gonna need a copy of the database.\n\n440\n00:21:42.727 --> 00:21:45.790\nBut I want you to get\nit from this guy here.\n\n441\n00:21:45.790 --> 00:21:48.500\nThe one that's on that same LAN as you.\n\n442\n00:21:48.500 --> 00:21:51.260\nSo that's what this second option is for.\n\n443\n00:21:51.260 --> 00:21:53.050\nAny domain controller,\n\n444\n00:21:53.050 --> 00:21:56.150\ncuz this would list all your domain\ncontrollers that were in existence.\n\n445\n00:21:56.150 --> 00:21:59.123\nAnd you would just pick the one\nthat you want to replicate from.\n\n446\n00:21:59.123 --> 00:22:03.245\nSo a couple advanced options that you\nmight not find that you use all the time.\n\n447\n00:22:03.245 --> 00:22:07.029\nBut when you're setting up your first\ndomain controllers at the branch office.\n\n448\n00:22:07.029 --> 00:22:10.070\nI tell you that IFM is a fantastic thing.\n\n449\n00:22:10.070 --> 00:22:13.172\nAnd any time you're setting\nup a domain controller and\n\n450\n00:22:13.172 --> 00:22:17.624\nyou want to make sure which domain\ncontroller it's getting the changes from,\n\n451\n00:22:17.624 --> 00:22:21.888\nor a copy of the database from that\nsecond option is what you're gonna use.\n\n452\n00:22:21.888 --> 00:22:23.642\nAll right, so\nwe'll continue on then Ronnie.\n\n453\n00:22:23.642 --> 00:22:26.450\nI think I've talked about that enough.\n\n454\n00:22:26.450 --> 00:22:27.948\nSame stuff we saw in the first wizard.\n\n455\n00:22:27.948 --> 00:22:29.400\nSo I'm just gonna click next.\n\n456\n00:22:29.400 --> 00:22:33.881\nThere's all my choices,\nmake sure I'm happy with that click next.\n\n457\n00:22:33.881 --> 00:22:39.569\nMy pre-req checks should pass except for\nmy warnings about DNS.\n\n458\n00:22:39.569 --> 00:22:43.631\nAnd my intiq compatibility issues and\nthen we'll go ahead and\n\n459\n00:22:43.631 --> 00:22:46.687\nclick install and\nit will begin that process.\n\n460\n00:22:46.687 --> 00:22:50.563\nSo there we go,\nI got the green light up there.\n\n461\n00:22:50.563 --> 00:22:53.220\nWe'll click install, and off we go.\n\n462\n00:22:53.220 --> 00:22:55.287\nAnd remember this is not\nthe machine I'm doing this on.\n\n463\n00:22:55.287 --> 00:22:58.003\nWe're actually doing it\non this machine here.\n\n464\n00:22:58.003 --> 00:23:02.196\nSo if we wait just a second, remember\nwhat I said, to install Active Directory,\n\n465\n00:23:02.196 --> 00:23:03.378\na reboot is required.\n\n466\n00:23:03.378 --> 00:23:06.024\nThis guy's gonna reboot\nhere in just a second.\n\n467\n00:23:06.024 --> 00:23:06.861\nAll right.\n\n468\n00:23:06.861 --> 00:23:08.801\nSo we'll let that run.\n\n469\n00:23:08.801 --> 00:23:10.937\nI know it's like watching paint dry.\n\n470\n00:23:10.937 --> 00:23:12.736\nBut it actually doesn't\ntake all that long.\n\n471\n00:23:12.736 --> 00:23:13.888\n[LAUGH]\n>> And\n\n472\n00:23:13.888 --> 00:23:16.481\nwith the way that we're actually talking\nabout the installation of Active Directory\n\n473\n00:23:16.481 --> 00:23:18.470\nhere, remember that this\nis an alternative method.\n\n474\n00:23:18.470 --> 00:23:19.720\nThe great thing about it, right,\n\n475\n00:23:19.720 --> 00:23:23.770\nis if you do have branch offices where\nyou are not directly located there.\n\n476\n00:23:23.770 --> 00:23:26.370\nJust get somebody to go ahead and\njoin that computer domain.\n\n477\n00:23:26.370 --> 00:23:28.930\nFrom that point,\nonce you have that ready to go and\n\n478\n00:23:28.930 --> 00:23:31.300\nyou need that second domain\ncontroller up and going.\n\n479\n00:23:31.300 --> 00:23:33.930\nNotice that you don't have to actually\nnow get somebody that may not\n\n480\n00:23:33.930 --> 00:23:36.120\nbe familiar with the installation process.\n\n481\n00:23:36.120 --> 00:23:37.755\nYou can now go through\nthat server manager.\n\n482\n00:23:37.755 --> 00:23:40.077\nServer manager gives you\nthat ability to do so.\n\n483\n00:23:40.077 --> 00:23:42.119\n>> And if we can get Titus to pull\nthat screen back up real quick.\n\n484\n00:23:42.119 --> 00:23:43.715\nWe'll see it there.\n\n485\n00:23:43.715 --> 00:23:45.625\nThere it is,\nI didn't mean to cut you off Ronnie.\n\n486\n00:23:45.625 --> 00:23:49.996\nBut it is out, and I wanted to see that\nit is going through that reboot process.\n\n487\n00:23:49.996 --> 00:23:50.812\nAll right, so\n\n488\n00:23:50.812 --> 00:23:55.470\nnowhere you could pretend this server\nwas on the other side of the country.\n\n489\n00:23:55.470 --> 00:23:57.520\nEverything is going along just fine.\n\n490\n00:23:57.520 --> 00:23:59.910\nIt's doing its reboot just\nlike it's supposed to.\n\n491\n00:23:59.910 --> 00:24:03.150\n>> Don't forget of those advanced options\nas well where they really do tend to\n\n492\n00:24:03.150 --> 00:24:04.040\nhelp out.\n\n493\n00:24:04.040 --> 00:24:08.090\nEspecially when you do need that active\ndirectory database copied over, Mike\n\n494\n00:24:08.090 --> 00:24:11.990\nis not telling you an unusual scenario in\nwhich the original domain control might\n\n495\n00:24:11.990 --> 00:24:17.250\nhave actually been up for years, literally\nyears, and now that database is gigantic.\n\n496\n00:24:17.250 --> 00:24:21.682\nTrying to make sure that everything\nis replicated over time,\n\n497\n00:24:21.682 --> 00:24:26.719\nespecially over a slow LAN link\ncan be trying at best, right?\n\n498\n00:24:26.719 --> 00:24:30.542\nAnd so being able to actually do that\ninstall from media sounds like a great\n\n499\n00:24:30.542 --> 00:24:33.450\nopportunity to get things\nrolling a little bit faster.\n\n500\n00:24:33.450 --> 00:24:37.565\nMaking sure, then, that the second domain\ncontroller that you set up may actually be\n\n501\n00:24:37.565 --> 00:24:41.109\neven on the same site or at least closer,\nand maybe even a better bandwidth\n\n502\n00:24:41.109 --> 00:24:44.390\nconnection might be a consideration\nthat we might choose instead.\n\n503\n00:24:44.390 --> 00:24:45.404\nWe're saying hey,\n\n504\n00:24:45.404 --> 00:24:49.531\nlook even though I have that 1.544\nmegabit all the way over to headquarters.\n\n505\n00:24:49.531 --> 00:24:53.471\nWell, there's actually another branch\noffice that we have a nice ten megabit\n\n506\n00:24:53.471 --> 00:24:54.670\nconnection or higher.\n\n507\n00:24:54.670 --> 00:24:57.490\nYou might go, yeah, this is where\nwe need to install from as well.\n\n508\n00:24:57.490 --> 00:25:01.380\nAnd that will get that other\ndomain controller up and\n\n509\n00:25:01.380 --> 00:25:05.560\ngoing much faster, and then you will be\nhappier as people are now actually able to\n\n510\n00:25:05.560 --> 00:25:09.700\njoin the domain a lot quicker than\ngoing across that slow WAN link, too.\n\n511\n00:25:09.700 --> 00:25:11.937\n>> All right,\nlet's take a look at my screen here,\n\n512\n00:25:11.937 --> 00:25:15.339\nI can see the server was successfully\nconfigured as a domain controller.\n\n513\n00:25:15.339 --> 00:25:17.590\nSo I'm gonna go ahead and close that.\n\n514\n00:25:17.590 --> 00:25:18.750\nI'll close that first Wizard.\n\n515\n00:25:18.750 --> 00:25:24.179\nAnd now if we take a look at Active\nDirectory, Active Directory Users and\n\n516\n00:25:24.179 --> 00:25:28.362\nComputers, and\nI take a look at my Domain Controllers,\n\n517\n00:25:28.362 --> 00:25:33.614\nthere's SVR01 listed as a domain\ncontroller and we're good to go.\n\n518\n00:25:33.614 --> 00:25:35.526\nNow that IFM, I will try to show you.\n\n519\n00:25:35.526 --> 00:25:37.623\nLet's see if Ronnie,\nwe'll test my memory here.\n\n520\n00:25:37.623 --> 00:25:39.309\n>> [LAUGH]\n>> It's a been\n\n521\n00:25:39.309 --> 00:25:40.472\na little while since I've done this one.\n\n522\n00:25:40.472 --> 00:25:42.196\nSo I'll open up a command prompt.\n\n523\n00:25:44.704 --> 00:25:48.063\nAnd we'll find out if I remember\nwhat the heck I'm doing.\n\n524\n00:25:48.063 --> 00:25:52.696\nSo we're gonna type in ntdsutil and then\nI'm gonna have to tell it what I'm getting\n\n525\n00:25:52.696 --> 00:25:57.660\nready to work with, because there's things\nlike lightweight directory services, and\n\n526\n00:25:57.660 --> 00:25:59.988\nI've got my active directory services.\n\n527\n00:25:59.988 --> 00:26:06.030\nSo it's activate instance ntds, right?\n\n528\n00:26:06.030 --> 00:26:11.300\nAnd then ifm, and ifm install from media.\n\n529\n00:26:11.300 --> 00:26:14.405\nSo it's gonna be create,\nthen I've got the choice,\n\n530\n00:26:14.405 --> 00:26:18.422\nI'm either gonna use the word sysmall,\nor not use the word sysmall.\n\n531\n00:26:18.422 --> 00:26:22.170\nWhen I make this backup, it's gonna\nbackup the active directory database.\n\n532\n00:26:22.170 --> 00:26:26.310\nDo I wanna include the systole folder\nstructure with this back up that I'm\n\n533\n00:26:26.310 --> 00:26:30.760\ntaking over to the branch office, if I do\ngreat, if I don't that means it's gonna\n\n534\n00:26:30.760 --> 00:26:36.140\nhave to replicate systole across the wam\nbut systole is typically not that big.\n\n535\n00:26:36.140 --> 00:26:39.200\nIt's just my group policies and\nscripts, so leave it in,\n\n536\n00:26:39.200 --> 00:26:41.850\ntake it out 6 dozen of one half\ndozen of the other, right?\n\n537\n00:26:41.850 --> 00:26:47.229\nSo I'll do it, I'll go ahead and\ncreate it with the systole,\n\n538\n00:26:47.229 --> 00:26:52.308\nso systole, whoops, and\nthen it's either full or rodc.\n\n539\n00:26:52.308 --> 00:26:56.094\nWhat the main control that I'm getting\nready to make at the branch office is it\n\n540\n00:26:56.094 --> 00:26:58.481\ngonna be a writable copy\nof active directory, or\n\n541\n00:26:58.481 --> 00:27:01.120\nis it gonna be a read\nonly to main controller.\n\n542\n00:27:01.120 --> 00:27:04.840\nBecause if it's a read only to main\ncontroller it doesn't include passwords.\n\n543\n00:27:04.840 --> 00:27:09.650\nSo it has to know that when it's making\nthat back up not to include the secrets.\n\n544\n00:27:09.650 --> 00:27:13.790\nWe're gonna learn all about RODCs\ncoming up so don't worry about but for\n\n545\n00:27:13.790 --> 00:27:17.780\nnow I need to know, and I'm gonna do full,\nbecause I'm making a writable\n\n546\n00:27:17.780 --> 00:27:22.410\ncopy at the branch office and\nthen where do you wanna store this backup.\n\n547\n00:27:22.410 --> 00:27:27.440\nI made a folder on my C drive called ifm,\n\n548\n00:27:27.440 --> 00:27:32.318\nso it's quickly gonna take a snapshot\n\n549\n00:27:32.318 --> 00:27:37.348\nusing a [INAUDIBLE] gosh golly it's,\n\n550\n00:27:37.348 --> 00:27:40.711\nwow, brain cramp there.\n\n551\n00:27:40.711 --> 00:27:44.062\nBut anyway, it's gonna take a snapshot\nof the active directory database.\n\n552\n00:27:44.062 --> 00:27:45.452\nA point in time image so\n\n553\n00:27:45.452 --> 00:27:49.841\nthat it doesn't have to worry about\nif people are making changes to it,\n\n554\n00:27:49.841 --> 00:27:54.540\nand then it makes the back up based off\nof that snap shot that it just created.\n\n555\n00:27:54.540 --> 00:27:55.560\nAnd that's it, it's done.\n\n556\n00:27:55.560 --> 00:27:58.133\nThere we go.\nBack to my IFM prompt.\n\n557\n00:27:58.133 --> 00:28:02.452\nI'll do a little quit and then quit.\n\n558\n00:28:02.452 --> 00:28:06.494\nAnd if we take a look at c:\\IFM.\n\n559\n00:28:09.884 --> 00:28:11.136\nThere's my back up.\n\n560\n00:28:11.136 --> 00:28:12.960\nThere's my Active Directory database.\n\n561\n00:28:14.000 --> 00:28:17.610\nThere is sysball with\nall those policies and\n\n562\n00:28:17.610 --> 00:28:22.370\nscripts and there's even some registry\nkeys that it's gonna bring along with it.\n\n563\n00:28:22.370 --> 00:28:25.100\nAnd so that's what I would copy\nto that portable hard drive,\n\n564\n00:28:25.100 --> 00:28:26.570\nsend it out to the branch office, and\n\n565\n00:28:26.570 --> 00:28:31.610\nthen they would point to that when they\nare creating that new domain controller.\n\n566\n00:28:31.610 --> 00:28:33.650\nIt's really pretty easy to do, and\n\n567\n00:28:33.650 --> 00:28:36.810\nagain in a low bandwidth situation,\nit's a lifesaver.\n\n568\n00:28:36.810 --> 00:28:38.280\nSounds like a great method for us.\n\n569\n00:28:38.280 --> 00:28:41.430\nAnd Microsoft sounds like that\nthey've taken a little bit of time and\n\n570\n00:28:41.430 --> 00:28:42.800\nput this into consideration,\n\n571\n00:28:42.800 --> 00:28:46.190\nespecially on those locations\nwhere there is that low bandwidth.\n\n572\n00:28:46.190 --> 00:28:49.730\nNow Mike, is there anything else that we\nneed to actually consider at this point as\n\n573\n00:28:49.730 --> 00:28:51.730\nfar as the alternative methods\nthat we have to worry about?\n\n574\n00:28:51.730 --> 00:28:55.326\n>> For this one, no I mean,\nI do wanna go back, Brian, when we can and\n\n575\n00:28:55.326 --> 00:28:58.860\ntake a look at installing\nActive Directory on a core install.\n\n576\n00:28:58.860 --> 00:29:02.160\n>> Okay.\n>> When we install server with out the GUI\n\n577\n00:29:02.160 --> 00:29:03.060\ninterface.\n\n578\n00:29:03.060 --> 00:29:03.590\nNow what do we do?\n\n579\n00:29:03.590 --> 00:29:06.800\nI don't have all those pretty\nlittle wizards that I can click on\n\n580\n00:29:06.800 --> 00:29:10.840\nthat are gonna walk me through\nthe process, but I might wanna use Core\n\n581\n00:29:10.840 --> 00:29:13.750\nas a domain controller because\nit's such a lighter footprint,\n\n582\n00:29:13.750 --> 00:29:16.480\nit doesn't take up as many resources,\nit's more secure.\n\n583\n00:29:16.480 --> 00:29:19.010\nThere's a lot of advantages\nof running Core.\n\n584\n00:29:19.010 --> 00:29:22.550\nSo we really need to know how to\nconfigure one of those as a domain\n\n585\n00:29:22.550 --> 00:29:23.930\ncontroller as well.\n\n586\n00:29:23.930 --> 00:29:24.430\n>> Well Mike,\n\n587\n00:29:24.430 --> 00:29:28.060\nthat actually sounds like a part three\nthat we're gonna be going into as well.\n\n588\n00:29:28.060 --> 00:29:29.340\nWe'll take a look at another method or\n\n589\n00:29:29.340 --> 00:29:32.610\nanother way to actually get\nActive Directory on inside of\n\n590\n00:29:32.610 --> 00:29:36.320\na command line prompt as well,\nand be able to run that too.\n\n591\n00:29:36.320 --> 00:29:39.040\nSo that's a great place for\nus to actually think about all of\n\n592\n00:29:39.040 --> 00:29:41.770\nthose different ways that we can\nget Active Directory installed.\n\n593\n00:29:41.770 --> 00:29:44.740\nWe really take a look of course at\nthe GUI installer in a previous episode\n\n594\n00:29:44.740 --> 00:29:45.350\nand on this one,\n\n595\n00:29:45.350 --> 00:29:48.970\nwe showed you how you can actually install\nActive Directory remotely as well.\n\n596\n00:29:48.970 --> 00:29:51.960\nAnd then Mike also showed us some of\nthe different way that we can get\n\n597\n00:29:51.960 --> 00:29:55.170\nthe information over there a lot more\nefficiently than trying to wait on\n\n598\n00:29:55.170 --> 00:29:55.770\nslow WAN link.\n\n599\n00:29:55.770 --> 00:29:59.840\nBut that's a great place, like I said,\nfor us to end this episode.\n\n600\n00:29:59.840 --> 00:30:02.250\nSigning off for IT Pro TV,\nI'm Ronnie Wong.\n\n601\n00:30:02.250 --> 00:30:02.999\n>> And I'm Mike Roderick.\n\n602\n00:30:02.999 --> 00:30:04.780\n>> And we'll see you next time.\n\n603\n00:30:04.780 --> 00:30:11.690\n>> [MUSIC]\n\n",
          "vimeoId": "146125978"
        },
        {
          "description": "In this episode, Ronnie and Mike show us how to get Active Directory Domain Controllers running on Server Core.  They show the use of Powershell Scripting to install and configure not only an additional domain controller in the same domain but use the scripting to also create a Domain controller in a child domain.",
          "length": "1665",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-actvedirectory-2-1-installing_active_directory_pt3-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-actvedirectory-2-1-installing_active_directory_pt3-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-actvedirectory-2-1-installing_active_directory_pt3-1-sm.jpg",
          "title": "Installing Active Directory Part 3",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:12.637 --> 00:00:15.007\nWelcome to another great\nepisode here on ITProTV.\n\n3\n00:00:15.007 --> 00:00:16.313\nI'm your host, Ronnie Wong.\n\n4\n00:00:16.313 --> 00:00:20.262\nAnd today, we're taking a look at,\nwell, installing active directory.\n\n5\n00:00:20.262 --> 00:00:24.347\nBut on Server Core, and\nthat is what scares me to death.\n\n6\n00:00:24.347 --> 00:00:26.909\nBut the good thing is,\nI have somebody help guide me through it.\n\n7\n00:00:26.909 --> 00:00:28.496\nMr. Mike Rodrick, how's it going?\n\n8\n00:00:28.496 --> 00:00:29.616\n>> It's going great, Ronnie.\n\n9\n00:00:29.616 --> 00:00:32.020\nThanks for having me here.\n\n10\n00:00:32.020 --> 00:00:34.815\nServer Core can be\na little bit intimidating,\n\n11\n00:00:34.815 --> 00:00:37.970\nespecially the first few times you look\nat it, cuz all of a sudden I'm looking at\n\n12\n00:00:37.970 --> 00:00:40.860\na server that doesn't have\na graphical user interface.\n\n13\n00:00:40.860 --> 00:00:44.140\nThere's no handy little wizards to\nhelp me walk through the process.\n\n14\n00:00:44.140 --> 00:00:48.310\nI can't just use my mouse and click\non things, next, next, next, install.\n\n15\n00:00:48.310 --> 00:00:52.020\nI've gotta do everything either from\nthe command line, from PowerShell, or\n\n16\n00:00:52.020 --> 00:00:53.890\nwe can do it remotely.\n\n17\n00:00:53.890 --> 00:00:57.600\nAnd if we do it remotely,\nwe bring back our nice GUI interface and\n\n18\n00:00:57.600 --> 00:00:59.140\nthe ability to click along.\n\n19\n00:00:59.140 --> 00:01:01.420\nSo we're gonna kinda do\na little bit of both here.\n\n20\n00:01:01.420 --> 00:01:04.800\nI'm gonna show you some working\nremotely with server core.\n\n21\n00:01:04.800 --> 00:01:09.110\nAnd then we're gonna run some PowerShell\nscripts to do the bulk of the work\n\n22\n00:01:09.110 --> 00:01:10.820\nof configuring active directory.\n\n23\n00:01:10.820 --> 00:01:11.990\nSo let's get started.\n\n24\n00:01:11.990 --> 00:01:13.927\nAnd I'll show you what\nI've got here first.\n\n25\n00:01:13.927 --> 00:01:16.711\nI have two machines that\nare running server core.\n\n26\n00:01:16.711 --> 00:01:20.010\nI've got core01 and I've got core 02.\n\n27\n00:01:20.010 --> 00:01:23.320\nAnd if you've been with us for\nthe first two parts of this episode,\n\n28\n00:01:23.320 --> 00:01:26.040\nyou know that I've got two domain\ncontrollers already set up.\n\n29\n00:01:26.040 --> 00:01:29.785\nDCO1 is a domain controller\nin lab.itpro.tv, and\n\n30\n00:01:29.785 --> 00:01:36.490\nSVRO1 is gonna be the second\ndomain controller in lab.itpro.tv.\n\n31\n00:01:36.490 --> 00:01:38.350\nAnd what I'm going to do is\nI'm gonna take core 01, and\n\n32\n00:01:38.350 --> 00:01:44.398\nadd it as a third domain controller to an\nexisting domain to ITPro or Lab.ITPro.TV.\n\n33\n00:01:44.398 --> 00:01:48.380\nAnd then I'm gonna take core 2,\nand make it child domain.\n\n34\n00:01:48.380 --> 00:01:51.673\nWe're gonna make us.lab.ITPro.TV.\n\n35\n00:01:51.673 --> 00:01:53.389\nAnd we're gonna do it all from PowerShell.\n\n36\n00:01:53.389 --> 00:01:54.138\n>> Right.\n\n37\n00:01:54.138 --> 00:01:55.492\n>> Hang tight here we go.\n\n38\n00:01:55.492 --> 00:01:57.083\n>> [LAUGH]\n>> All right.\n\n39\n00:01:57.083 --> 00:01:58.342\nSo the first thing I need to do,\n\n40\n00:01:58.342 --> 00:02:01.260\nremember installing Active Directory\nis actually a two part process.\n\n41\n00:02:01.260 --> 00:02:03.810\nFirst you have to install the role itself.\n\n42\n00:02:03.810 --> 00:02:07.660\nThen once the roll is installed, you\nhave to go back and configure the roll.\n\n43\n00:02:07.660 --> 00:02:09.750\nNow I could open up PowerShell.\n\n44\n00:02:09.750 --> 00:02:11.320\nIn fact, you know what,\nlet's do one of them.\n\n45\n00:02:11.320 --> 00:02:16.090\nAll right, go over here, and I'm gonna\ntype in PowerShell, if I could type.\n\n46\n00:02:16.090 --> 00:02:20.440\nAnd we'll launch PowerShell, and\nI know that's a little bit small.\n\n47\n00:02:20.440 --> 00:02:23.690\nLet me bump that up just a wee bit,\n\n48\n00:02:23.690 --> 00:02:25.440\nmake it a little bit easier\non my old eyes, Ronnie.\n\n49\n00:02:25.440 --> 00:02:31.500\nSo we'll change that font size and\nbrighten up that font a little bit.\n\n50\n00:02:31.500 --> 00:02:35.977\nAnd to install a role from PowerShell,\n\n51\n00:02:35.977 --> 00:02:42.632\nit's going to be add-WindowsFeature,\nand there we go.\n\n52\n00:02:42.632 --> 00:02:49.122\nAnd then dash name of the feature\nthat you want to install,\n\n53\n00:02:49.122 --> 00:02:53.369\nin this case ad-domain-services.\n\n54\n00:02:53.369 --> 00:02:57.032\nAnd that's going to go through\nthe process of installing that row.\n\n55\n00:02:57.032 --> 00:02:59.410\nWhile that's running,\nI'm gonna flip back over here.\n\n56\n00:02:59.410 --> 00:03:00.900\nThat was on core 01.\n\n57\n00:03:00.900 --> 00:03:03.690\nAnd if I wanted to do that remotely.\n\n58\n00:03:03.690 --> 00:03:08.110\nIf I didn't have access to that desktop\nlike I did on Core 1, we can simply add\n\n59\n00:03:09.110 --> 00:03:14.050\ncore 2 to server manager\non an existing machine.\n\n60\n00:03:14.050 --> 00:03:17.150\nOnce it reaches out and\ntalks to server manager, or\n\n61\n00:03:17.150 --> 00:03:21.370\nto core 02, make sure we've got\nsome remote administration enabled.\n\n62\n00:03:21.370 --> 00:03:24.200\nI can right click on there,\nadd roles and features.\n\n63\n00:03:24.200 --> 00:03:26.600\nAnd I can just walk through the wizard.\n\n64\n00:03:26.600 --> 00:03:29.994\nMake sure I select core02.\n\n65\n00:03:29.994 --> 00:03:32.597\nAnd we'll do active\ndirectory domain services.\n\n66\n00:03:32.597 --> 00:03:33.711\nWe'll include.\n\n67\n00:03:33.711 --> 00:03:36.132\nActually, on this one, I'm not going\nto include the management tools.\n\n68\n00:03:36.132 --> 00:03:37.672\nIt is a GUI.\n\n69\n00:03:37.672 --> 00:03:41.537\nI mean, it is a core and I don't\nhave that graphical user interface,\n\n70\n00:03:41.537 --> 00:03:43.350\nso I don't really need those.\n\n71\n00:03:43.350 --> 00:03:47.190\nIn fact on the command, when I did that\nPowerShell command, notice I left out\n\n72\n00:03:47.190 --> 00:03:51.790\nthe dash include management tools\nbecause I don't need those on core.\n\n73\n00:03:51.790 --> 00:03:54.960\nI'm gonna be doing all of\nmy administration remotely.\n\n74\n00:03:54.960 --> 00:03:58.740\nSo, I just walk through here and\nwe'll click install.\n\n75\n00:03:58.740 --> 00:04:01.040\nAnd that will go and install the role.\n\n76\n00:04:01.040 --> 00:04:01.850\nGo back over to core01.\n\n77\n00:04:01.850 --> 00:04:06.320\nI can see that my end result exit\ncode was success, so Active Directory\n\n78\n00:04:06.320 --> 00:04:10.930\ndomain services are set for that,\nand the Active Directory module for\n\n79\n00:04:10.930 --> 00:04:15.400\nWindows PowerShell is now installed,\nso we're good to go there.\n\n80\n00:04:15.400 --> 00:04:19.350\nNo reboot is required to install the role.\n\n81\n00:04:19.350 --> 00:04:23.030\nWe'll make sure this guy\nfinishes up successfully.\n\n82\n00:04:23.030 --> 00:04:25.160\nAnd we're going to be\ngood to go there as well.\n\n83\n00:04:25.160 --> 00:04:28.172\nSo now I got two machines that\nhave that role installed and\n\n84\n00:04:28.172 --> 00:04:30.070\nI could launch the wizard, right.\n\n85\n00:04:30.070 --> 00:04:34.766\nWe saw that in part two,\nwhere we did all that remotely.\n\n86\n00:04:34.766 --> 00:04:37.570\nI promoted that server\nto a domain controller.\n\n87\n00:04:37.570 --> 00:04:41.140\nAnd as I said, on this one we're\ngoing to be using Powershelf.\n\n88\n00:04:41.140 --> 00:04:43.060\nSorry, it kinda jumped\nscreens on me there.\n\n89\n00:04:43.060 --> 00:04:45.400\nSo what I'm gonna do is\nwe're gonna use a script.\n\n90\n00:04:45.400 --> 00:04:50.330\nAnd for that child domain, or\nsorry, let's do the replica first.\n\n91\n00:04:50.330 --> 00:04:53.710\nSo if I wanna add a third domain\ncontroller to lab.itpro.tv,\n\n92\n00:04:53.710 --> 00:04:57.870\nwell, I need to, if you think back\nto that wizard that we ran through,\n\n93\n00:04:57.870 --> 00:05:02.560\none of those options is add a domain\ncontroller to an existing domain.\n\n94\n00:05:02.560 --> 00:05:06.300\nWell since I don't have a wizard I have\nto provide all this information for\n\n95\n00:05:06.300 --> 00:05:07.210\nmy script.\n\n96\n00:05:07.210 --> 00:05:12.310\nOr if I'm at PowerShell command it's\ngoing to be import-moduleaddsdeployment.\n\n97\n00:05:12.310 --> 00:05:17.132\nThat's what makes these other commands\nlike install-addsdomaincontroller\n\n98\n00:05:17.132 --> 00:05:18.010\navailable.\n\n99\n00:05:18.010 --> 00:05:20.020\nSo you gotta have that module imported.\n\n100\n00:05:20.020 --> 00:05:24.857\nThen we can run this command\ninstall-addsdomaincontroller-credential,\n\n101\n00:05:24.857 --> 00:05:28.660\nget-credential, that's gonna prompt me for\nthe credentials.\n\n102\n00:05:28.660 --> 00:05:31.700\nI really don't want to store\ncredentials in the script itself,\n\n103\n00:05:31.700 --> 00:05:36.110\nbecause somebody could find that script,\nsee those credentials.\n\n104\n00:05:36.110 --> 00:05:39.650\nThere are ways that you\ncan provide them securely.\n\n105\n00:05:39.650 --> 00:05:43.420\nYou can have an encryptor, you can have\na file that it reaches out and gets, and\n\n106\n00:05:43.420 --> 00:05:45.530\nmaybe that file's in a secure location.\n\n107\n00:05:45.530 --> 00:05:49.597\nThere's ways to add it\nhere as a secure string.\n\n108\n00:05:49.597 --> 00:05:52.242\nI find this to be\nprobably the easiest way.\n\n109\n00:05:52.242 --> 00:05:55.633\nCriticalReplicationOnly false,\nit's gonna go ahead and\n\n110\n00:05:55.633 --> 00:05:58.558\nreplicate the entire\nActive Directory database.\n\n111\n00:05:58.558 --> 00:06:01.618\nIn a situation where you needed\nthat domain controller up and\n\n112\n00:06:01.618 --> 00:06:05.758\nrunning really soon, you could turn that\non and only the things that it absolutely\n\n113\n00:06:05.758 --> 00:06:08.630\nhad to have to be a domain\ncontroller are replicated.\n\n114\n00:06:08.630 --> 00:06:11.838\nAnd then it reboots and it's up and\nrunning and it's a domain controller.\n\n115\n00:06:11.838 --> 00:06:13.748\nIn the meantime, in the background,\n\n116\n00:06:13.748 --> 00:06:17.463\nit's finishing replicating the rest\nof the Active Directory database.\n\n117\n00:06:17.463 --> 00:06:20.239\nWhere do I wanna store the database?\n\n118\n00:06:20.239 --> 00:06:22.650\nWhere do I wanna store the log files?\n\n119\n00:06:22.650 --> 00:06:24.400\nWhere do I wanna store CIS fall?\n\n120\n00:06:24.400 --> 00:06:25.766\nThese should all be very familiar, right?\n\n121\n00:06:25.766 --> 00:06:29.628\nThese are the same options I had to\nconfigure as I went through the wizard.\n\n122\n00:06:29.628 --> 00:06:32.043\nAm I gonna install DNS?\n\n123\n00:06:32.043 --> 00:06:33.690\nAnd I'm going to on this one.\n\n124\n00:06:33.690 --> 00:06:38.149\nWhat name, since you're adding a domain\ncontroller to an existing domain,\n\n125\n00:06:38.149 --> 00:06:42.279\nyou have to tell it what domain\nyou're adding it to, lab.itpro.tv.\n\n126\n00:06:42.279 --> 00:06:45.463\nThese little tick marks out here,\nif you're not familiar with PowerShell\n\n127\n00:06:45.463 --> 00:06:47.952\nscripts, normally this would\nall be on one line, right?\n\n128\n00:06:47.952 --> 00:06:52.834\nInstall-addsDomainController, space\n-credential.\n\n129\n00:06:52.834 --> 00:06:54.738\nIt would all be on one line.\n\n130\n00:06:54.738 --> 00:06:57.918\nVery hard to read and\ndoesn't make it very easy to work with, so\n\n131\n00:06:57.918 --> 00:07:00.980\nthose little tick marks are like\nline continuations there.\n\n132\n00:07:02.290 --> 00:07:03.700\nAll right, so, that's my script.\n\n133\n00:07:03.700 --> 00:07:07.820\nThat's what I wanna run, so\nwhat I'm going to do is first\n\n134\n00:07:07.820 --> 00:07:11.210\nverify that the guy finished, and\nwe did do that, so he's good to go.\n\n135\n00:07:11.210 --> 00:07:16.810\nNow, I'm gonna open up PowerShell,\nand I'm gonna call that script.\n\n136\n00:07:16.810 --> 00:07:19.724\nSo, I'm gonna do invoke-command.\n\n137\n00:07:22.625 --> 00:07:27.635\nAnd -ComputerName core01,\nand then the script\n\n138\n00:07:27.635 --> 00:07:34.042\nthat I wanna run is gonna be c:\\\nI put in a folder called Scripts,\n\n139\n00:07:34.042 --> 00:07:40.120\nand I'm making my replica, and\nI'll go ahead and hit Enter.\n\n140\n00:07:41.320 --> 00:07:44.010\nNow this is going to reach out,\nthe script is local on this\n\n141\n00:07:44.010 --> 00:07:48.550\nmachine that I'm sitting at but it's\ngoing to execute the commands on core 01.\n\n142\n00:07:48.550 --> 00:07:51.660\nThat's what that invoke\ncommand allows me to do.\n\n143\n00:07:51.660 --> 00:07:54.410\nRemember I said get credentials?\n\n144\n00:07:54.410 --> 00:07:56.129\nWell here it is.\nIt's asking me, who are you?\n\n145\n00:07:56.129 --> 00:07:58.254\nDo you have permission to do this?\n\n146\n00:07:58.254 --> 00:08:00.879\nI'll type in administrator.\n\n147\n00:08:00.879 --> 00:08:02.587\nAnd my password.\n\n148\n00:08:05.462 --> 00:08:06.400\nAll right.\n\n149\n00:08:06.400 --> 00:08:10.670\nAnd there's a couple things that\nI didn't provide in that script.\n\n150\n00:08:10.670 --> 00:08:12.680\nOne of them was the safe mode password or\n\n151\n00:08:12.680 --> 00:08:15.140\nthe directory service\nrestore mode password.\n\n152\n00:08:15.140 --> 00:08:18.520\nAgain, there are ways that you\ncan put that in the script and\n\n153\n00:08:18.520 --> 00:08:20.070\ntry to keep it secure.\n\n154\n00:08:20.070 --> 00:08:21.067\nThat's not recommended.\n\n155\n00:08:21.067 --> 00:08:23.289\nAll right?\nBecause somebody could browse,\n\n156\n00:08:23.289 --> 00:08:27.860\nfind that script and find your DSR and\npassword and then reboot the main\n\n157\n00:08:27.860 --> 00:08:33.306\ncontrollers into DSRM and try to log on to\nthem and who knows what they're gonna do.\n\n158\n00:08:33.306 --> 00:08:34.060\nRight?\n\n159\n00:08:34.060 --> 00:08:37.070\nSo we're gonna keep that safe\nby just having it prompt us.\n\n160\n00:08:37.070 --> 00:08:39.240\nSo I'll set that password here.\n\n161\n00:08:39.240 --> 00:08:41.842\nIt is going to make me\ntype it one more time.\n\n162\n00:08:41.842 --> 00:08:46.475\nSo I can make sure there's no typos in\nthere and that's another downside of\n\n163\n00:08:46.475 --> 00:08:51.340\nusing some of those alternate methods is\nit won't prompt you to type it twice.\n\n164\n00:08:51.340 --> 00:08:53.790\nIt only does it once and\nif you make a typo you can't see it.\n\n165\n00:08:53.790 --> 00:08:56.370\nYou don't know cuz all\nyou see is the asterisk.\n\n166\n00:08:56.370 --> 00:09:00.825\nLater on you go to use that password and\nit doesn't work, and you're in trouble.\n\n167\n00:09:00.825 --> 00:09:03.453\n[LAUGH] If you try to reset that password\nyou need to know what the old password\n\n168\n00:09:03.453 --> 00:09:03.962\nwas, right?\n\n169\n00:09:03.962 --> 00:09:05.301\nSo it can be problematic.\n\n170\n00:09:05.301 --> 00:09:10.939\nI'll say yes to all, tells me it's gonna\nbe configured as a domain controller and\n\n171\n00:09:10.939 --> 00:09:14.010\nrestarted when the operation completes.\n\n172\n00:09:14.010 --> 00:09:17.220\nSo there it goes, it's up and running,\nit's all being executed over here.\n\n173\n00:09:17.220 --> 00:09:20.990\nNow on this machine I really\ndon't see any of this going on.\n\n174\n00:09:20.990 --> 00:09:24.290\nWhat I will see is the reboot when it\nfinishes the installation process.\n\n175\n00:09:24.290 --> 00:09:27.028\nAnd just like the wizard\nthat we ran through,\n\n176\n00:09:27.028 --> 00:09:30.860\nyou can see validating environment and\nuser input, all test.\n\n177\n00:09:30.860 --> 00:09:35.532\nSo it still went through those pre req\nchecks to make sure that everything was\n\n178\n00:09:35.532 --> 00:09:39.255\ngood to go and I'm able to make\nthis guy a domain controller,\n\n179\n00:09:39.255 --> 00:09:41.360\nmake sure the role is there.\n\n180\n00:09:41.360 --> 00:09:45.610\nAnd all of that, so now it is\ninstalling my new domain controller.\n\n181\n00:09:45.610 --> 00:09:48.550\nIt's gonna install the group\npolicy management console.\n\n182\n00:09:48.550 --> 00:09:52.505\nThere it's replicating the schema, you'll\nsee it replicating the critical domain,\n\n183\n00:09:52.505 --> 00:09:54.224\nthere goes DNS, securing Kerberos.\n\n184\n00:09:54.224 --> 00:09:56.460\nKind of cool cuz we can watch this go on.\n\n185\n00:09:56.460 --> 00:09:57.210\n>> Right.\n\n186\n00:09:57.210 --> 00:10:01.920\n>> All right and it won't take long for\nthis guy to finish up and\n\n187\n00:10:01.920 --> 00:10:06.280\nit'll reboot that server\n>> And I'll have a new domain controller.\n\n188\n00:10:06.280 --> 00:10:07.450\nSo, there we go.\n\n189\n00:10:07.450 --> 00:10:09.030\nSo I've got status success.\n\n190\n00:10:09.030 --> 00:10:14.720\nNow if I flip over here I can see\nI'm about ready to be signed out and\n\n191\n00:10:14.720 --> 00:10:17.332\nI don't have to click close.\n\n192\n00:10:17.332 --> 00:10:20.503\nIt's gonna sign me out and it is going to\nreboot this machine, but I'll go ahead and\n\n193\n00:10:20.503 --> 00:10:22.785\nclick close so it can speed up\nthe process just a little bit.\n\n194\n00:10:25.770 --> 00:10:28.701\nWe'll let that go.\nAnd it's gonna reboot, in fact,\n\n195\n00:10:28.701 --> 00:10:31.250\nI should already be able to check.\n\n196\n00:10:31.250 --> 00:10:36.419\nIf I come over here and I take a look at\nActive Directory Users and Computers.\n\n197\n00:10:36.419 --> 00:10:41.810\nIf I go into my domain controllers.\n\n198\n00:10:41.810 --> 00:10:46.333\nThere is my third domain controller that\nwe just added to this domain, CORE01.\n\n199\n00:10:46.333 --> 00:10:52.768\nSo now we have added a third\ndomain controller to lab.itpro.tv.\n\n200\n00:10:52.768 --> 00:10:55.718\nAnd again,\nit wasn't that difficult, right?\n\n201\n00:10:55.718 --> 00:11:00.423\nRemember in the previous part, Ronnie,\nwhere we used the wizard itself to\n\n202\n00:11:00.423 --> 00:11:05.360\ngenerate that script and all I had to\ndo is go in and tweak a few values.\n\n203\n00:11:05.360 --> 00:11:05.960\nRight.\n\n204\n00:11:05.960 --> 00:11:09.520\nSo even if Core intimidates you, hopefully\nafter this, you won't be as intimidated.\n\n205\n00:11:09.520 --> 00:11:13.370\n>> Now, Mike, let's talk about\nthis just for a brief moment.\n\n206\n00:11:13.370 --> 00:11:15.893\nIn terms of running Server Core,\n\n207\n00:11:15.893 --> 00:11:20.770\nis there a reason why I should\nchoose Server Core over just a GUI.\n\n208\n00:11:20.770 --> 00:11:21.450\n>> Absolutely.\n\n209\n00:11:21.450 --> 00:11:23.002\nThe Server Core, one,\n\n210\n00:11:23.002 --> 00:11:27.900\nit takes a lot less resources to run\nbecause It doesn't have the GUI.\n\n211\n00:11:27.900 --> 00:11:31.950\nIt doesn't have all of those\nconsoles that it needs to support so\n\n212\n00:11:31.950 --> 00:11:34.125\nresource wise it takes a lot less.\n\n213\n00:11:34.125 --> 00:11:36.373\nSo if we're virtualizing things and\n\n214\n00:11:36.373 --> 00:11:41.232\nwe're trying to run dozens of virtual\nmachines on a physical server each little\n\n215\n00:11:41.232 --> 00:11:44.730\nbit we can save as far as\nresources go means more servers.\n\n216\n00:11:44.730 --> 00:11:46.000\nMore virtual servers that I can create.\n\n217\n00:11:46.000 --> 00:11:50.663\nSo that's a big deal there being able\nto consume less resources The other\n\n218\n00:11:50.663 --> 00:11:53.350\nthing is my security footprint, right?\n\n219\n00:11:53.350 --> 00:11:57.783\nMy attack surface is reduced, because a\nlot of the vulnerabilities that we find in\n\n220\n00:11:57.783 --> 00:12:01.190\nthe Windows Server operating system\nhave to do with the GUIs and\n\n221\n00:12:01.190 --> 00:12:03.000\nthe wizards that exist on there.\n\n222\n00:12:03.000 --> 00:12:06.790\nIf I leave all that out, well,\nI have less Windows updating to do, and\n\n223\n00:12:06.790 --> 00:12:09.440\nI've got less vulnerabilities\nto worry about.\n\n224\n00:12:09.440 --> 00:12:10.620\nAnd I still got to do my Windows updates.\n\n225\n00:12:10.620 --> 00:12:13.390\nBut far fewer vulnerabilities\nwith that server core.\n\n226\n00:12:13.390 --> 00:12:17.118\nSo Microsoft highly recommends\nthat we go with server core.\n\n227\n00:12:17.118 --> 00:12:20.012\nAnd I'll tell you one\nthing that I think Ronnie,\n\n228\n00:12:20.012 --> 00:12:24.740\nI don't know that Microsoft would agree,\nI think it's a security measure just\n\n229\n00:12:24.740 --> 00:12:28.642\nbecause most people don't know\nhow to get around on Server core.\n\n230\n00:12:28.642 --> 00:12:30.280\n[LAUGH] They see that prompt,\nand they go, now what?\n\n231\n00:12:30.280 --> 00:12:31.422\n>> Yeah, I am with you.\n\n232\n00:12:31.422 --> 00:12:36.220\nHaven't actually installed\na Server Core domain controller before.\n\n233\n00:12:36.220 --> 00:12:39.235\nBack in the Early 2008 days on the server.\n\n234\n00:12:39.235 --> 00:12:42.751\nI actually wanna had in and\nwe had to do it all in in the.\n\n235\n00:12:42.751 --> 00:12:44.886\n>> Yeah. [LAUGH] >> As well\nas we have to do with it.\n\n236\n00:12:44.886 --> 00:12:46.336\nSo I didn't have the PowerShell and\n\n237\n00:12:46.336 --> 00:12:49.635\nit took me a long time to actually get it\ndone and that's why I never like doing it.\n\n238\n00:12:49.635 --> 00:12:52.925\nBut this way, it actually seems like\nthere's a lot more user friendly and\n\n239\n00:12:52.925 --> 00:12:55.367\nlooks like it's a lot more\nstream mind in our process,\n\n240\n00:12:55.367 --> 00:12:57.310\nbeing able to do it on the script.\n\n241\n00:12:57.310 --> 00:13:02.470\nLooks like we just have to be able to\nfind that script and we're ready to go.\n\n242\n00:13:02.470 --> 00:13:05.820\nSo, I like the idea a lot\nbetter here in 2012.\n\n243\n00:13:05.820 --> 00:13:06.847\n>> Absolutely.\nNow if I go ahead and\n\n244\n00:13:06.847 --> 00:13:09.320\nlog into this machine,\nagain this is the Core.\n\n245\n00:13:09.320 --> 00:13:12.990\nNotice I'm logging into LAB,\nthe domain, not a local account.\n\n246\n00:13:12.990 --> 00:13:15.593\nIt is now domain controller, although\nit doesn't look a whole lot different.\n\n247\n00:13:15.593 --> 00:13:18.170\n[LAUGH] I'm still looking\nat this guy here.\n\n248\n00:13:18.170 --> 00:13:19.010\nAnd that's okay, though, right?\n\n249\n00:13:19.010 --> 00:13:21.209\nBecause I'm gonna be doing this remotely.\n\n250\n00:13:21.209 --> 00:13:24.890\nRonnie's asking why\nwould I use Server Core?\n\n251\n00:13:24.890 --> 00:13:28.160\nThink about this, you know you need\nat least two domain controllers, but\n\n252\n00:13:28.160 --> 00:13:30.220\nyou don't have a machine to do that with.\n\n253\n00:13:30.220 --> 00:13:34.690\nYou wanna virtualize it and have it\ntake up as few resources as possible.\n\n254\n00:13:34.690 --> 00:13:37.640\nI use Server Core, and that virtual\nmachine can sit there and run.\n\n255\n00:13:37.640 --> 00:13:40.360\nAnd any time I need to\nmanage Active Directory,\n\n256\n00:13:40.360 --> 00:13:43.600\nI'm using my GUI interface\non my full install.\n\n257\n00:13:43.600 --> 00:13:47.920\nThe only time I ever need that Core\nis if that full install fails and\n\n258\n00:13:47.920 --> 00:13:51.100\nI can still remotely manage\nthe core if I need to.\n\n259\n00:13:51.100 --> 00:13:53.889\nI can come in here to server manager and\n\n260\n00:13:53.889 --> 00:13:57.387\nopen up Active Directory users and\ncomputers.\n\n261\n00:13:57.387 --> 00:14:00.392\nWell Mike you're on server one.\n\n262\n00:14:00.392 --> 00:14:01.980\nThat's not fair.\n\n263\n00:14:01.980 --> 00:14:02.860\nOkay let's change.\n\n264\n00:14:02.860 --> 00:14:04.400\nLet's right click.\n\n265\n00:14:04.400 --> 00:14:05.910\nChange the domain controller.\n\n266\n00:14:05.910 --> 00:14:08.830\nAnd choose core 01 and click OK.\n\n267\n00:14:08.830 --> 00:14:11.641\nWell now I'm working with\nthat Core machine and\n\n268\n00:14:11.641 --> 00:14:15.870\nif we expand this out a little bit,\nyou see I'm working with Core 01.\n\n269\n00:14:15.870 --> 00:14:19.171\nSo if I need to work with his,\nmaybe he's not replicating,\n\n270\n00:14:19.171 --> 00:14:23.672\nmaybe I need to check something on him to\nmake sure things are replicating to him.\n\n271\n00:14:23.672 --> 00:14:25.000\nI can still do that.\n\n272\n00:14:25.000 --> 00:14:27.810\nSo even though Core doesn't\nhave a GUI installed on it,\n\n273\n00:14:27.810 --> 00:14:30.420\nI can still use my GUI and\nremotely manage that server.\n\n274\n00:14:30.420 --> 00:14:33.220\nAl right so that gives us that one.\n\n275\n00:14:33.220 --> 00:14:37.820\nThe next thing we wanna do is we wanna\ntake this one that we just joined to\n\n276\n00:14:37.820 --> 00:14:43.300\nthe domain we wanna make that child domain\nand I'm gonna do it remotely as well.\n\n277\n00:14:43.300 --> 00:14:47.780\nSo let's minimize this and we'll let's\nopen up that script and take a look at it.\n\n278\n00:14:47.780 --> 00:14:50.942\nSo it's going to be a little different\nfrom the replica because I'm not\n\n279\n00:14:50.942 --> 00:14:53.950\njust adding a domain controller\nto an existing domain.\n\n280\n00:14:53.950 --> 00:14:55.980\nI'm creating an entire new\ndomain within that forest.\n\n281\n00:14:55.980 --> 00:14:59.846\nSo the command's going to\nbe a little bit different.\n\n282\n00:14:59.846 --> 00:15:04.140\nRemember this one over here was\nInstall-ADDSDomainController.\n\n283\n00:15:04.140 --> 00:15:08.005\nThat's what's telling it you're adding\na domain controller to an existing domain.\n\n284\n00:15:08.005 --> 00:15:10.290\nThis one, install-adds domain, right?\n\n285\n00:15:10.290 --> 00:15:14.950\nCreating a brand new domain,\none that doesn't exist.\n\n286\n00:15:14.950 --> 00:15:18.890\nNo global catalog is false\nbecause I make it a new domain.\n\n287\n00:15:18.890 --> 00:15:20.430\nThat's gonna be the first\ndomain controller.\n\n288\n00:15:20.430 --> 00:15:24.215\nI have to have at least one global\ncatalog server, so e is going to be that.\n\n289\n00:15:24.215 --> 00:15:28.910\nI'm gonna create a DNS delegation.\n\n290\n00:15:28.910 --> 00:15:32.560\nI've gotta make sure that DNS is set\nup properly so that people resolved.\n\n291\n00:15:32.560 --> 00:15:40.391\nI'm gonna create a delegation up in\nthe parent DNS zone for this child domain.\n\n292\n00:15:40.391 --> 00:15:43.669\nWhere am I gonna put the database,\nthe log files, and Sysvol.\n\n293\n00:15:43.669 --> 00:15:45.840\nThe domain mode,\nactually gonna change that.\n\n294\n00:15:45.840 --> 00:15:48.712\nBecause I know that that's going to fail.\n\n295\n00:15:48.712 --> 00:15:54.296\nRemember my forest is actually set at\n2008 or to forest functional level.\n\n296\n00:15:54.296 --> 00:15:58.602\nThat means all new domains\nhave to be at least I'm sorry,\n\n297\n00:15:58.602 --> 00:16:02.471\nmy forest is 2012r2\nforce functional level.\n\n298\n00:16:02.471 --> 00:16:08.369\nSo my any new domains have to be\n2012r2 domain functional level.\n\n299\n00:16:08.369 --> 00:16:13.103\nSo 2012 functional level wouldn't work for\nthis domain so I change it to r2.\n\n300\n00:16:13.103 --> 00:16:14.868\nIt is gonna be a child domain.\n\n301\n00:16:14.868 --> 00:16:20.628\nIf I was making a separate tree,\nthen I would change that to tree domain.\n\n302\n00:16:20.628 --> 00:16:24.210\nA child domain,\nit needs to know who the parent domain is.\n\n303\n00:16:24.210 --> 00:16:27.600\nWhere is it creating it\nwithin that forest structure?\n\n304\n00:16:27.600 --> 00:16:29.566\nWhat's the parent domain?\n\n305\n00:16:29.566 --> 00:16:34.092\nIf I was making a new tree, I would need\nto specify the forest root domain so\n\n306\n00:16:34.092 --> 00:16:37.390\nthat it could make that trust\nback to the forest root.\n\n307\n00:16:37.390 --> 00:16:40.873\nThe new domain name is gonna be us,\n\n308\n00:16:40.873 --> 00:16:45.813\nnotice I'm not typing in us.lab.itpro.tv.\n\n309\n00:16:45.813 --> 00:16:49.973\nIf it's a child domain it knows\nto take this domain's name and\n\n310\n00:16:49.973 --> 00:16:52.460\ntack it onto the parent name.\n\n311\n00:16:52.460 --> 00:16:55.100\nIt already knows the parent name.\n\n312\n00:16:55.100 --> 00:16:57.300\nSo you don't specify that full name here.\n\n313\n00:16:57.300 --> 00:17:02.418\nOtherwise you'd end up with\nus.lab.itprotv.lab.itpro.tv right?\n\n314\n00:17:02.418 --> 00:17:04.300\nThat's not gonna work.\n\n315\n00:17:04.300 --> 00:17:06.460\nSo it just give it that domain name.\n\n316\n00:17:06.460 --> 00:17:07.441\nThe net BIOS name.\n\n317\n00:17:07.441 --> 00:17:09.135\nThe parent domain name and\n\n318\n00:17:09.135 --> 00:17:14.990\nthen where to locate against this small\nthe log files and the database itself.\n\n319\n00:17:14.990 --> 00:17:16.280\nAnd we should be good to go.\n\n320\n00:17:16.280 --> 00:17:17.429\nSo let's try it out.\n\n321\n00:17:17.429 --> 00:17:23.570\nI'll go ahead and save this script and\nwe'll try to execute this script.\n\n322\n00:17:23.570 --> 00:17:26.633\nSo I'm just gonna kind of cheat and\nmodify my last command.\n\n323\n00:17:26.633 --> 00:17:30.112\nWe're gonna change this to CORE02 and\n\n324\n00:17:30.112 --> 00:17:35.890\nthen we're gonna change my\nscript to that child domain.\n\n325\n00:17:35.890 --> 00:17:40.355\nWe'll hit Enter, and\nwe'll have to provide our credentials.\n\n326\n00:17:40.355 --> 00:17:41.090\nWho are you?\n\n327\n00:17:41.090 --> 00:17:43.502\nDo you have permissions\nto do this process?\n\n328\n00:17:43.502 --> 00:17:46.105\nDid I type that right, Ronnie?\n\n329\n00:17:46.105 --> 00:17:47.400\nI think so.\n\n330\n00:17:47.400 --> 00:17:48.050\n>> [LAUGH] I can't see it.\n\n331\n00:17:48.050 --> 00:17:51.020\n>> [LAUGH] I know it is pretty small,\neven on my screen.\n\n332\n00:17:51.020 --> 00:17:54.529\nAnd then it's prompting me for\nthat DSRM password.\n\n333\n00:17:56.280 --> 00:17:59.304\nAnd I hit Tab again so let's retype that.\n\n334\n00:18:05.620 --> 00:18:06.970\nAnd hopefully those matched, yes.\n\n335\n00:18:06.970 --> 00:18:09.420\nAnd then, A for yes to all.\n\n336\n00:18:09.420 --> 00:18:13.980\nAnd it's gonna whir and grind and\ngo through that process and\n\n337\n00:18:13.980 --> 00:18:18.461\nwe should end up with a brand\nnew child domain in our forest.\n\n338\n00:18:18.461 --> 00:18:22.504\nAnd so you start to see the power,\nhopefully, of scripting and\n\n339\n00:18:22.504 --> 00:18:25.720\nmake you want to get in to\nthe world of PowerShell.\n\n340\n00:18:25.720 --> 00:18:30.335\nAnd when you're working with Server Core\nit's almost a must because you don't have\n\n341\n00:18:30.335 --> 00:18:31.252\nthose wizards.\n\n342\n00:18:31.252 --> 00:18:34.610\nYou can do some of it from\nthe command line interface but\n\n343\n00:18:34.610 --> 00:18:37.180\nPowerShell is really where you wanna go.\n\n344\n00:18:37.180 --> 00:18:40.260\nIt is the way we should be\nmanaging our servers now.\n\n345\n00:18:40.260 --> 00:18:41.410\n>> And to say that, right,\n\n346\n00:18:41.410 --> 00:18:45.520\nMike is understating that\nthe very issue in Server 2012.\n\n347\n00:18:45.520 --> 00:18:48.593\nAs well as what's coming up in\nthe newer server additions to,\n\n348\n00:18:48.593 --> 00:18:52.493\nyou have to say it PowerShell is probably\ngonna be more primary and more central\n\n349\n00:18:52.493 --> 00:18:55.940\nto the administrator especially in\neverything that they have to do.\n\n350\n00:18:55.940 --> 00:18:59.020\nThat there is a point where you're just\ngonna have to break down and learn it.\n\n351\n00:18:59.020 --> 00:19:00.076\nThe good thing is,\n\n352\n00:19:00.076 --> 00:19:03.913\nit looks like you can actually do\nit fairly easily, fairly quickly.\n\n353\n00:19:03.913 --> 00:19:07.358\nBut by being able to see some of these\nscripts, and a lot of times inside of that\n\n354\n00:19:07.358 --> 00:19:10.490\nwizard, it even generated\nthe majority of the script for us.\n\n355\n00:19:10.490 --> 00:19:14.830\nIs learning how to manipulate it and\nthen changed out, invoked the command and\n\n356\n00:19:14.830 --> 00:19:15.570\nwe are ready to go.\n\n357\n00:19:15.570 --> 00:19:16.863\nSo, pretty neat.\n\n358\n00:19:16.863 --> 00:19:17.932\n>> It really is.\n\n359\n00:19:17.932 --> 00:19:21.052\nLet's take another look here and I'll\nshow you a couple of things while we're\n\n360\n00:19:21.052 --> 00:19:22.620\nwaiting for this process to finish up.\n\n361\n00:19:22.620 --> 00:19:24.160\nYou can see it actually did finish and\n\n362\n00:19:24.160 --> 00:19:27.330\nit's most likely rebooting\nCORE02 right now.\n\n363\n00:19:27.330 --> 00:19:29.224\nWhen we talk about these scripts,\n\n364\n00:19:29.224 --> 00:19:33.873\nlike Ronnie was saying I'm not gonna throw\nthis script away, I'm gonna save this.\n\n365\n00:19:33.873 --> 00:19:38.200\nIf I need to add another domain controller\nlater on, well I can use this replica\n\n366\n00:19:38.200 --> 00:19:42.738\nscript and I can just change the name of\nthe domain that I'm adding the replica to.\n\n367\n00:19:42.738 --> 00:19:43.890\nIt's that easy.\n\n368\n00:19:43.890 --> 00:19:46.382\nSo just tweak this script a little bit and\n\n369\n00:19:46.382 --> 00:19:50.204\nI can add a second domain\ncontroller to us.lab.itpro.tv.\n\n370\n00:19:50.204 --> 00:19:55.810\nIf I wanna create a second child\ndomain like eu to lab.itpro.tv.\n\n371\n00:19:55.810 --> 00:19:59.362\nFine, just come in here and\nedit a couple of spots in here and\n\n372\n00:19:59.362 --> 00:20:00.794\nuse that script right?\n\n373\n00:20:00.794 --> 00:20:03.440\nThat's the wonderful thing\nabout these scripts.\n\n374\n00:20:03.440 --> 00:20:05.560\nYou save them for\nthings that you have to do repeatedly or\n\n375\n00:20:05.560 --> 00:20:10.380\nif you have to do it on more than one,\nanything I have to do more than three\n\n376\n00:20:10.380 --> 00:20:16.460\ntimes I wanna write a script for it\n[LAUGH] so scripts are fantastic for that.\n\n377\n00:20:16.460 --> 00:20:21.356\nAll right let's try to verify\nthat everything worked here,\n\n378\n00:20:21.356 --> 00:20:26.253\nCORE02 is still rebooting so\nwe'll let that do its thing.\n\n379\n00:20:26.253 --> 00:20:27.220\nGive it just a second.\n\n380\n00:20:27.220 --> 00:20:29.134\nWe already checked on CORE01,\nright Ronnie?\n\n381\n00:20:29.134 --> 00:20:31.140\n>> Right.\n>> I think we verified that he was\n\n382\n00:20:31.140 --> 00:20:31.849\nworking.\n\n383\n00:20:31.849 --> 00:20:37.375\nThere's our success message for CORE02\ninstall so that's going along just fine.\n\n384\n00:20:37.375 --> 00:20:40.700\n>> Yeah, so\nall we really got to do is wait for\n\n385\n00:20:40.700 --> 00:20:43.552\nthis guy to finish rebooting here.\n\n386\n00:20:43.552 --> 00:20:47.701\n>> Now, Mike, while we're waiting on this,\nthe server manager This should not appear\n\n387\n00:20:47.701 --> 00:20:50.220\nas a domain controller\nin our server manager?\n\n388\n00:20:50.220 --> 00:20:54.511\n>> Correct, but you can still remotely\nmanage it, and it is kinda interesting.\n\n389\n00:20:54.511 --> 00:20:55.740\nIt's a good question Ronnie.\n\n390\n00:20:55.740 --> 00:21:00.344\nIn fact, if we go back over here to\nthis is my domain controller from\n\n391\n00:21:00.344 --> 00:21:06.160\nlab.itpro.tv and I look at Active\nDirectory I look at my domain controllers.\n\n392\n00:21:06.160 --> 00:21:10.990\nWell it's not gonna show up here because\nI added it o a different domain.\n\n393\n00:21:10.990 --> 00:21:14.845\nBut he was a member of the domain at\none point before I made him a domain\n\n394\n00:21:14.845 --> 00:21:17.027\ncontroller of us.lab.itpro.tv.\n\n395\n00:21:17.027 --> 00:21:19.211\nAnd notice the account is still there.\n\n396\n00:21:19.211 --> 00:21:23.298\nSomething that just happens and\nI've seen it happen more than once.\n\n397\n00:21:23.298 --> 00:21:25.200\nIt doesn't remove this account.\n\n398\n00:21:25.200 --> 00:21:27.948\nSo this is something that\nI would wanna do manually.\n\n399\n00:21:27.948 --> 00:21:32.236\nAfter I verify that everything worked\nwith that install of Active Directory\n\n400\n00:21:32.236 --> 00:21:33.242\non that machine.\n\n401\n00:21:33.242 --> 00:21:34.651\nSo let's go check here.\n\n402\n00:21:34.651 --> 00:21:36.143\nOops, there he is.\n\n403\n00:21:36.143 --> 00:21:37.265\nHe looks good to go.\n\n404\n00:21:37.265 --> 00:21:38.991\nI'm gonna try to log into it.\n\n405\n00:21:38.991 --> 00:21:41.592\nNot lab anymore, all right?\n\n406\n00:21:41.592 --> 00:21:44.230\nIt would fail,\ncuz he's not a domain controller.\n\n407\n00:21:44.230 --> 00:21:46.866\nHe's a domain controller for\nus.lab.itprotv.\n\n408\n00:21:52.113 --> 00:21:53.555\nAnd there we go.\n\n409\n00:21:53.555 --> 00:21:54.631\nWe are now logged in.\n\n410\n00:21:54.631 --> 00:21:59.331\nAnd we can verify,\nI can come over here, and\n\n411\n00:21:59.331 --> 00:22:04.730\nfrom Active Directory I\ncan switch domains.\n\n412\n00:22:04.730 --> 00:22:08.940\nWe can change this to us.lab.itpro tv,\n\n413\n00:22:08.940 --> 00:22:14.200\nthat child domain and let's just\nverify that I'm not lying to you.\n\n414\n00:22:14.200 --> 00:22:20.090\nThere's cor2.us.lab.itpro.tv and\nI can come in here and expand my way down.\n\n415\n00:22:20.090 --> 00:22:22.889\nThere's my domain controller CORE02.\n\n416\n00:22:22.889 --> 00:22:26.250\nI don't have any other computers\nthat belong to this domain yet.\n\n417\n00:22:26.250 --> 00:22:27.890\nSo everything went perfectly.\n\n418\n00:22:27.890 --> 00:22:33.170\nThe only real thing that I've got to\nworry about, is if I switch back to lab,\n\n419\n00:22:33.170 --> 00:22:36.031\nor excuse me, lab.itpro.\n\n420\n00:22:36.031 --> 00:22:40.953\nOops, lab.itpro.tv, again is that computer\n\n421\n00:22:40.953 --> 00:22:45.641\naccount that got orphaned here for CORE02.\n\n422\n00:22:45.641 --> 00:22:49.030\nSo what all I would do, most likely\nwhat I would do is just disable that.\n\n423\n00:22:49.030 --> 00:22:54.606\nBefore I deleted it just to make sure\nthere's nothing associated with it still,\n\n424\n00:22:54.606 --> 00:22:56.580\nthat's just a habit for me.\n\n425\n00:22:56.580 --> 00:22:59.770\nI typically disable things for\na month before I delete them.\n\n426\n00:22:59.770 --> 00:23:02.320\nIt's just a good habit to be in.\n\n427\n00:23:02.320 --> 00:23:05.965\nI know that I'm good to go because he's\na domain controller for another domain.\n\n428\n00:23:05.965 --> 00:23:08.916\nHe doesn't even care about\nthe account left in this domain,\n\n429\n00:23:08.916 --> 00:23:10.860\nbut still a good idea I think.\n\n430\n00:23:10.860 --> 00:23:13.989\n>> Now Mike, if you take us back to\nthat diagram where you showed us\n\n431\n00:23:13.989 --> 00:23:16.008\nthe parent domain and the child domain.\n\n432\n00:23:16.008 --> 00:23:21.760\nWhat you've done now is now taken a domain\ncontroller and created it down here.\n\n433\n00:23:21.760 --> 00:23:24.037\nSo what we should also\nthen have by default,\n\n434\n00:23:24.037 --> 00:23:26.203\nthere's a default trust between these.\n\n435\n00:23:26.203 --> 00:23:27.975\n>> Absolutely,\ndo you wanna take a look and see?\n\n436\n00:23:27.975 --> 00:23:28.726\n>> Sure.\n\n437\n00:23:28.726 --> 00:23:30.810\n>> Let's peek and see what that did.\n\n438\n00:23:30.810 --> 00:23:31.784\nSo we're gonna go back over here.\n\n439\n00:23:31.784 --> 00:23:33.734\nWe'll use a nice GUI to do that, Ronnie.\n\n440\n00:23:33.734 --> 00:23:34.632\n[LAUGH]\n>> Okay.\n\n441\n00:23:34.632 --> 00:23:37.008\n>> We'll go into\nActive Directory Domains and Trusts.\n\n442\n00:23:37.008 --> 00:23:41.474\nAnd here I can see lab.itpro.tv,\nand I can see us.lab.itpro.tv.\n\n443\n00:23:41.474 --> 00:23:42.457\n>> Nice.\n\n444\n00:23:42.457 --> 00:23:47.246\n>> And if I pull up the Properties\nof this guy, and I go to Trusts,\n\n445\n00:23:47.246 --> 00:23:52.777\nI will see that automatic two-way\ntransitive trust that got created,\n\n446\n00:23:52.777 --> 00:23:54.546\nus.lab is the child.\n\n447\n00:23:54.546 --> 00:23:56.796\nAnd I can see the trust is transitive.\n\n448\n00:23:56.796 --> 00:23:58.337\nAnd it's going in the other direction.\n\n449\n00:23:58.337 --> 00:24:01.045\nDomains trusted by this domain, outgoing.\n\n450\n00:24:01.045 --> 00:24:05.129\nDomains that trust this domain,\nincoming, [LAUGH] right?\n\n451\n00:24:05.129 --> 00:24:08.941\nIf we take a look at US.lab properties,\n\n452\n00:24:11.970 --> 00:24:14.827\nand we go to trust.\n\n453\n00:24:14.827 --> 00:24:16.940\nYeah, and I'm on the wrong domain.\n\n454\n00:24:16.940 --> 00:24:20.492\nI would need to switch over there,\nit's not gonna let me see that,\n\n455\n00:24:20.492 --> 00:24:23.744\ncuz I guess it's not gonna be\nhappy about me looking at that.\n\n456\n00:24:23.744 --> 00:24:29.355\n[LAUGH] Yeah, he's having\ntrouble reaching out right now,\n\n457\n00:24:29.355 --> 00:24:31.620\nbut we would see the other\nside of it right?\n\n458\n00:24:31.620 --> 00:24:35.690\nWe would see the parent trust that exists\nfrom a child back up to the parent.\n\n459\n00:24:35.690 --> 00:24:36.660\nEverything's working.\n\n460\n00:24:36.660 --> 00:24:38.940\nI know it's just an issue with\nthis console refreshing so\n\n461\n00:24:38.940 --> 00:24:40.470\nwe should be good to go there.\n\n462\n00:24:40.470 --> 00:24:44.690\nSo, pretty neat stuff and again,\nall done through PowerShell, and\n\n463\n00:24:44.690 --> 00:24:46.500\npretty easy in the end, right?\n\n464\n00:24:46.500 --> 00:24:48.490\nIt wasn't that bad.\n\n465\n00:24:48.490 --> 00:24:49.655\n>> Yeah, it wasn't that bad now.\n\n466\n00:24:49.655 --> 00:24:52.350\n[LAUGH] Like I said, I just remember\nthe first time when I set it up.\n\n467\n00:24:52.350 --> 00:24:54.850\nAnd it was, like, I know,\nyou do this all through Net SH.\n\n468\n00:24:54.850 --> 00:24:57.070\nAnd I took time, I learned how to do it.\n\n469\n00:24:57.070 --> 00:24:59.105\nAnd it just became more and\nmore of a challenge,\n\n470\n00:24:59.105 --> 00:25:01.740\ncuz I couldn't remember every\nsingle command that I had run.\n\n471\n00:25:01.740 --> 00:25:05.580\nBut now with the idea of being able to do\nthis with PowerShell and the scripting,\n\n472\n00:25:05.580 --> 00:25:08.098\nit looks like it actually\ndoes a lot more now.\n\n473\n00:25:08.098 --> 00:25:08.630\nDon't get me wrong,\n\n474\n00:25:08.630 --> 00:25:11.246\nyou might be saying, Ronnie, they probably\nactually had a way to do it back then.\n\n475\n00:25:11.246 --> 00:25:14.270\n[LAUGH] I'm sure they did it's just that\nI didn't actually figure it out until I\n\n476\n00:25:14.270 --> 00:25:15.100\nfinished it.\n\n477\n00:25:15.100 --> 00:25:18.020\nBut it is amazing about\nhow little resources you\n\n478\n00:25:18.020 --> 00:25:21.524\nreally do need to run A server\ncore operating system and so\n\n479\n00:25:21.524 --> 00:25:24.887\nit really does help minimize\nthose resources as well.\n\n480\n00:25:24.887 --> 00:25:26.940\nSo, when we took a look at\nin this episode, right?\n\n481\n00:25:26.940 --> 00:25:31.039\nWe took a look at setting up of\ncourse both Active Directory and\n\n482\n00:25:31.039 --> 00:25:36.920\na domain controller, and two sever core\nmachines that we had going on there too.\n\n483\n00:25:36.920 --> 00:25:39.610\nWe not only set one up as a replica,\nin other words another or\n\n484\n00:25:39.610 --> 00:25:44.460\na third domain controller in the same\ndomain, Mike also helped us by showing\n\n485\n00:25:44.460 --> 00:25:48.640\nus how we can create a child domain\nusing PowerShell scripting as well.\n\n486\n00:25:48.640 --> 00:25:52.380\nAnd I've never done that, so Mike, thank\nyou for helping us to do that as well.\n\n487\n00:25:52.380 --> 00:25:54.880\nSo I've seen the other one but\nbeing able to do he child domain,\n\n488\n00:25:54.880 --> 00:25:56.350\nthat was pretty darn cool too.\n\n489\n00:25:56.350 --> 00:25:59.050\nWe'll also take a look just briefly,\nright?\n\n490\n00:25:59.050 --> 00:26:03.190\nShowing how we can remotely administer\nthose server more additions as well.\n\n491\n00:26:03.190 --> 00:26:07.180\nIt doesn't mean you have to be able to\nmaster every little bit about PowerShell,\n\n492\n00:26:07.180 --> 00:26:07.810\ndon't get me wrong.\n\n493\n00:26:07.810 --> 00:26:08.580\nIt'd be great if you did.\n\n494\n00:26:08.580 --> 00:26:11.531\nBut at the same time, you can see\nwhere you can use a combination of\n\n495\n00:26:11.531 --> 00:26:15.182\nthe PowerShell scripting as well as the\nserver manager to help manage everything\n\n496\n00:26:15.182 --> 00:26:17.542\nthat you have, for\nwhether it's a child domain, or\n\n497\n00:26:17.542 --> 00:26:21.272\nwhether you're actually in the domain\nitself and those domain controllers too.\n\n498\n00:26:21.272 --> 00:26:24.989\nMike, any last parting words on\nthe server core or on PowerShell?\n\n499\n00:26:24.989 --> 00:26:27.148\n>> I would say,\njust play around with PowerShell.\n\n500\n00:26:27.148 --> 00:26:28.644\nDon't be scared of it.\n\n501\n00:26:28.644 --> 00:26:32.127\nUse our test labs that we give you\nguys access to, and try it out.\n\n502\n00:26:32.127 --> 00:26:37.455\nIf you're studying for a particular exam,\nor something like that, and it tells you\n\n503\n00:26:37.455 --> 00:26:42.645\nthat you can use the GUI to do this, try\nputting the GUI away and using PowerShell.\n\n504\n00:26:42.645 --> 00:26:45.363\nBecause, I guarantee you,\nanything that you can do through the GUI,\n\n505\n00:26:45.363 --> 00:26:46.709\nyou can do it through PowerShell.\n\n506\n00:26:46.709 --> 00:26:49.471\nMicrosoft now, their development process,\n\n507\n00:26:49.471 --> 00:26:52.246\nthey develop the PowerShell\ncommands first.\n\n508\n00:26:52.246 --> 00:26:55.663\n>> And then, and only then,\nif they have time, do they go back and\n\n509\n00:26:55.663 --> 00:26:57.760\nadd a GUI interface and a wizard.\n\n510\n00:26:57.760 --> 00:27:01.480\nThere's things you can do in PowerShell\nthat you can't do in the GUI.\n\n511\n00:27:01.480 --> 00:27:05.340\nLearning PowerShell is gonna\nmake administering servers and\n\n512\n00:27:05.340 --> 00:27:08.770\nadministering Active Directory\na lot easier for you.\n\n513\n00:27:08.770 --> 00:27:11.960\n>> All right, well, thank you, Mike, for\nshowing us how to work with PowerShell\n\n514\n00:27:11.960 --> 00:27:15.490\na little bit more and, of course, even\nServer Core, which again still scares me.\n\n515\n00:27:15.490 --> 00:27:19.020\nEven though I've actually worked with them\na little bit, I still get a little bit,\n\n516\n00:27:19.020 --> 00:27:20.694\nmy typing skills actually are terrible.\n\n517\n00:27:20.694 --> 00:27:22.390\n[LAUGH]\n>> You'll get better at typing, too.\n\n518\n00:27:22.390 --> 00:27:23.020\n>> You will.\n>> Yeah,\n\n519\n00:27:23.020 --> 00:27:25.160\nthat's another great side benefit.\n\n520\n00:27:25.160 --> 00:27:27.614\n>> Yeah, so thank you for\nhelping us out there.\n\n521\n00:27:27.614 --> 00:27:29.828\nThank you for watching this episode.\n\n522\n00:27:29.828 --> 00:27:32.440\nSigning off for ITProTV, I'm Ronnie Wong.\n\n523\n00:27:32.440 --> 00:27:33.516\n>> And I'm Mike Roderick.\n\n524\n00:27:33.516 --> 00:27:35.315\n>> And we'll see you next time.\n\n525\n00:27:35.315 --> 00:27:41.235\n[MUSIC]\n\n",
          "vimeoId": "146125995"
        },
        {
          "description": "In this episode, Ronnie and Mike show how to get started with a Read-only Domain Controller.  They take a look at the prerequisites to making one.  They prestage the computer account using the Wizard.  They install the ADDS role with the RODC option checked.  They also show now make sure that only the necessary password caching is setup as well.  They briefly mention the benefits of using a RODC.",
          "length": "2151",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-2-2-read_only_dc-110515-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-2-2-read_only_dc-110515-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-2-2-read_only_dc-110515-1-sm.jpg",
          "title": "Read-only Domain Controller",
          "transcript": "WEBVTT\n\n1\n00:00:00.047 --> 00:00:10.047\n[MUSIC]\n\n2\n00:00:11.588 --> 00:00:14.973\nWelcome to another exciting\nepisode here on IT pro TV.\n\n3\n00:00:14.973 --> 00:00:16.280\nI'm your host Ronnie Wong and\n\n4\n00:00:16.280 --> 00:00:19.005\ntoday we're taking a look at\nworking with active directory.\n\n5\n00:00:19.005 --> 00:00:22.710\nBut specifically into the area that most\nof us are not going to be familiar with\n\n6\n00:00:22.710 --> 00:00:24.880\n,which is read-only domain controllers.\n\n7\n00:00:24.880 --> 00:00:28.469\nAnd who better to help\nus than Mike Rodrick.\n\n8\n00:00:28.469 --> 00:00:30.474\n>> [LAUGH] It's going great Ronnie.\n\n9\n00:00:30.474 --> 00:00:31.618\nI'm excited to be here and\n\n10\n00:00:31.618 --> 00:00:35.053\nyes we're going to be talking about\ngood old read-only domain controllers.\n\n11\n00:00:35.053 --> 00:00:38.639\nRelatively knew feature,\nbut a really cool feature.\n\n12\n00:00:38.639 --> 00:00:40.201\nAnd if you have the need for\n\n13\n00:00:40.201 --> 00:00:44.177\none of these it's pretty cool that\nMicrosoft makes it available.\n\n14\n00:00:44.177 --> 00:00:48.353\nAnd let's talk about that I guess first\nRonnie, what the heck is a read-only\n\n15\n00:00:48.353 --> 00:00:51.193\ndomain controller and\nwhy the heck would I want one?\n\n16\n00:00:51.193 --> 00:00:53.920\nCuz many of you out there either\none have never seen them, and\n\n17\n00:00:53.920 --> 00:00:56.929\nsome of these businesses might not\never have the need Need for one.\n\n18\n00:00:56.929 --> 00:01:01.557\nBut I'm trying to think of a good way to\nsay that when you do need it Microsoft\n\n19\n00:01:01.557 --> 00:01:03.551\nmakes it really, really easy.\n\n20\n00:01:03.551 --> 00:01:06.047\n>> Yeah, no, Mike I do understand that.\n\n21\n00:01:06.047 --> 00:01:10.107\nSometimes what ends up happening, right,\na lot of times the had a branch officer so\n\n22\n00:01:10.107 --> 00:01:13.425\nsomebody says, you know,\nI think I could just tweak what I need to.\n\n23\n00:01:13.425 --> 00:01:16.817\nThey get access to that domain\ncontroller at the branch office and\n\n24\n00:01:16.817 --> 00:01:20.704\nthey change something and then all of\na sudden something changes and well,\n\n25\n00:01:20.704 --> 00:01:21.642\nsomewhere else.\n\n26\n00:01:21.642 --> 00:01:22.211\nRight?\n\n27\n00:01:22.211 --> 00:01:25.876\nAnd so a situation like that might be a\nperfect example of where we might actually\n\n28\n00:01:25.876 --> 00:01:28.131\nI choose to use a read-only\ndomain controller.\n\n29\n00:01:28.131 --> 00:01:29.096\n>> Absolutely.\n\n30\n00:01:29.096 --> 00:01:33.558\nWhat happens is at these branch offices,\nwe've got smaller satellite offices or\n\n31\n00:01:33.558 --> 00:01:36.145\nwhat have you where I've\ngot users that work and\n\n32\n00:01:36.145 --> 00:01:38.084\nthe users at the corporate office,\n\n33\n00:01:38.084 --> 00:01:42.629\nwe've got our server closet there, we've\ngot most of our infrastructure there.\n\n34\n00:01:42.629 --> 00:01:45.265\nAnd when those users come in in\nthe morning, they go to log on,\n\n35\n00:01:45.265 --> 00:01:48.260\nwell their traffic gets directed up\nthere to that domain controller,\n\n36\n00:01:48.260 --> 00:01:50.512\nit gets authenticated,\neverything's good to go.\n\n37\n00:01:50.512 --> 00:01:52.566\nBut you got these people out\nat the branch office, and\n\n38\n00:01:52.566 --> 00:01:55.548\nwhen they need to authenticate,\nwell there's two or three users out there.\n\n39\n00:01:55.548 --> 00:01:59.721\nAnd when they go to authenticate, their\ntraffic has to go across that WAN link,\n\n40\n00:01:59.721 --> 00:02:04.019\nback to the corporate office, back to that\ndomain controller to be verified, and\n\n41\n00:02:04.019 --> 00:02:05.668\nthen back across the WAN link.\n\n42\n00:02:05.668 --> 00:02:06.971\nSo if that link is slow or\n\n43\n00:02:06.971 --> 00:02:11.094\nunreliable, that means I've got users\nthat can't log on in the morning.\n\n44\n00:02:11.094 --> 00:02:12.798\nOr have intermittent connectivity.\n\n45\n00:02:12.798 --> 00:02:17.426\nIssues having trouble getting access\nto things back at the corporate\n\n46\n00:02:17.426 --> 00:02:21.346\noffice because of that WAN\nlink being slow or unreliable.\n\n47\n00:02:21.346 --> 00:02:22.516\nSo what's our solution?\n\n48\n00:02:22.516 --> 00:02:25.419\nWell, we put a main controller\nout there at the branch office.\n\n49\n00:02:25.419 --> 00:02:28.878\nNow I've got a domain controller out\nthere and when they go to log on,\n\n50\n00:02:28.878 --> 00:02:30.800\nthat log on traffic is staying local.\n\n51\n00:02:30.800 --> 00:02:34.330\nIt's not dependent on that WAN link,\nand that sounds great.\n\n52\n00:02:34.330 --> 00:02:36.715\nHere's the downside of doing that though.\n\n53\n00:02:36.715 --> 00:02:39.260\nThat branch office isn't set up\nlike my corporate office, right?\n\n54\n00:02:39.260 --> 00:02:42.380\nI said, I've got three to five,\nten users out there.\n\n55\n00:02:42.380 --> 00:02:44.260\nThere's no server closet, right?\n\n56\n00:02:44.260 --> 00:02:45.280\nThere's no good physical security.\n\n57\n00:02:45.280 --> 00:02:51.013\nSo when I take that domain controller out\nto that branch office where do I put it?\n\n58\n00:02:51.013 --> 00:02:54.254\nUnder Bob's desk or in the mop closet?\n\n59\n00:02:54.254 --> 00:02:55.673\nI mean, what do I do with this thing?\n\n60\n00:02:55.673 --> 00:02:56.843\nThis is a domain controller.\n\n61\n00:02:56.843 --> 00:02:58.878\nIt's got Active Directory database on it.\n\n62\n00:02:58.878 --> 00:03:00.738\nThat means all of my user accounts,\n\n63\n00:03:00.738 --> 00:03:03.475\nall of my passwords are right\nthere on that machine.\n\n64\n00:03:03.475 --> 00:03:07.629\nSo if somebody can get into that building\nthey could walk out with the hard drives\n\n65\n00:03:07.629 --> 00:03:09.059\nfor my domain controller.\n\n66\n00:03:09.059 --> 00:03:09.716\nOr, worse.\n\n67\n00:03:09.716 --> 00:03:13.587\nVersus Ronnie said, if they could log on\nto that domain controller, they could make\n\n68\n00:03:13.587 --> 00:03:17.423\nchanges to Active Directory that are gonna\nreplicate back to my corporate office.\n\n69\n00:03:17.423 --> 00:03:21.354\nThey start setting up back door accounts,\nor deleting accounts, or\n\n70\n00:03:21.354 --> 00:03:22.589\nwho know what right?\n\n71\n00:03:22.589 --> 00:03:25.463\nSo the problem is, I want to put\na domain controller out there.\n\n72\n00:03:25.463 --> 00:03:27.726\nThey're at these remote offices and\n\n73\n00:03:27.726 --> 00:03:32.183\nI don't have the physical security\nthat I require for a domain control.\n\n74\n00:03:32.183 --> 00:03:34.600\nThat's where read-only\ndomain controls come in.\n\n75\n00:03:34.600 --> 00:03:38.978\nThey fill this void perfectly because\na read-only domain controller,\n\n76\n00:03:38.978 --> 00:03:43.712\nfrom the name you can probably infer that\nit's got a read only copy of the active\n\n77\n00:03:43.712 --> 00:03:45.092\ndirectory database.\n\n78\n00:03:45.092 --> 00:03:47.670\nThat means no changes can be made.\n\n79\n00:03:47.670 --> 00:03:52.150\nNo changes can be made or\nreplicate back to the corporate office.\n\n80\n00:03:52.150 --> 00:03:55.690\nChanges that are made at the corporate\noffice will replicate out to the RODC and\n\n81\n00:03:55.690 --> 00:03:57.450\nthat's what we're gonna call them for\nshort.\n\n82\n00:03:57.450 --> 00:03:59.310\nRODC read only domain controller.\n\n83\n00:03:59.310 --> 00:04:02.005\nBut I can't make any changes\non the RODC itself so\n\n84\n00:04:02.005 --> 00:04:05.424\nthere's no way I can insert bad\ninfo into active directory and\n\n85\n00:04:05.424 --> 00:04:09.060\nhave that replicate throughout\nthe entire network, all right.\n\n86\n00:04:09.060 --> 00:04:13.080\nSo that's one, it eliminates that problem\nof somebody getting onto the domain\n\n87\n00:04:13.080 --> 00:04:16.265\ncontroller and setting up a backdoor\naccount or what have you.\n\n88\n00:04:16.265 --> 00:04:18.388\nThe second issue it deals with as well.\n\n89\n00:04:18.388 --> 00:04:19.378\nThe security problem,\n\n90\n00:04:19.378 --> 00:04:22.009\nthe fact that I don't have good\n[INAUDIBLE] physical security.\n\n91\n00:04:22.009 --> 00:04:25.049\nBecause guess what,\non a read-only domain controller,\n\n92\n00:04:25.049 --> 00:04:29.400\nit's going to have a copy the active\ndirectory database sans the passwords.\n\n93\n00:04:29.400 --> 00:04:31.340\nThere's no secrets stored.\n\n94\n00:04:31.340 --> 00:04:35.310\nWhen it replicates from active directory\nfrom our writable copies out to that\n\n95\n00:04:35.310 --> 00:04:38.683\nbranch office, no passwords\nare included in that replication.\n\n96\n00:04:38.683 --> 00:04:42.066\nSo that read only domain controller\nknows about all these accounts,\n\n97\n00:04:42.066 --> 00:04:44.469\nit doesn't know anybody's password, right?\n\n98\n00:04:44.469 --> 00:04:47.341\nSo if somebody gets access to\nthat domain controller and\n\n99\n00:04:47.341 --> 00:04:51.510\nthey steal those hard drives and take them\nhome, they can work on it all day long.\n\n100\n00:04:51.510 --> 00:04:53.474\nThey're not going to get\nany passwords out of it.\n\n101\n00:04:53.474 --> 00:04:55.054\nBecause there's no passwords on there.\n\n102\n00:04:55.054 --> 00:04:56.680\nThere are no passwords to be had.\n\n103\n00:04:56.680 --> 00:04:59.760\nSo it solves that problem as well.\n\n104\n00:04:59.760 --> 00:05:02.640\nNow, the next question might be,\nwell, wait a second Mike.\n\n105\n00:05:02.640 --> 00:05:07.890\nIf there's no passwords on there, when my\nuser at the branch office goes to log on.\n\n106\n00:05:07.890 --> 00:05:09.212\nHow are they gonna authenticate?\n\n107\n00:05:09.212 --> 00:05:11.054\nHow's it gonna verify their password?\n\n108\n00:05:11.054 --> 00:05:14.468\nWell, we do what's\ncalled password caching.\n\n109\n00:05:14.468 --> 00:05:15.544\nWe can pick and\n\n110\n00:05:15.544 --> 00:05:20.931\nchoose which passwords are allowed\nto be stored out there on that RODC.\n\n111\n00:05:20.931 --> 00:05:25.182\nAnd I can say just the ten people,\njust those users that work at the branch\n\n112\n00:05:25.182 --> 00:05:29.168\noffice, those passwords can be\ncached on the RODC, nothing else.\n\n113\n00:05:29.168 --> 00:05:33.001\nSo worst case scenario if somebody\ndoes get access to that machine and\n\n114\n00:05:33.001 --> 00:05:37.167\ngets access those accounts the only\npasswords they're gonna get are those\n\n115\n00:05:37.167 --> 00:05:41.287\nstandard user accounts for my employees\nout there at that branch office.\n\n116\n00:05:41.287 --> 00:05:41.983\nAll right.\n\n117\n00:05:41.983 --> 00:05:44.455\nSo it's a beautiful, beautiful thing.\n\n118\n00:05:44.455 --> 00:05:46.673\nAnd we're gonna set it up.\n\n119\n00:05:46.673 --> 00:05:48.170\nAnd up in the show.\n\n120\n00:05:48.170 --> 00:05:51.464\nWe're also gonna talk about how we\ncontrol which passwords are allowed to\n\n121\n00:05:51.464 --> 00:05:52.410\ngo out there.\n\n122\n00:05:52.410 --> 00:05:55.390\nHow we prevent certain passwords\nfrom going out there as well.\n\n123\n00:05:55.390 --> 00:05:58.010\nBefore I dive into, well, actually,\nyou know what, let's go ahead and\n\n124\n00:05:58.010 --> 00:06:02.070\nset it up and that way while we're waiting\nfor it, cuz it will take it a little bit\n\n125\n00:06:02.070 --> 00:06:05.640\nof time, I can tell you some other\nreally cool things about these RODCs.\n\n126\n00:06:05.640 --> 00:06:06.160\n>> All right.\n\n127\n00:06:06.160 --> 00:06:08.830\nMike, let's say that you've convinced me.\n\n128\n00:06:08.830 --> 00:06:10.120\nI want to set this up.\n\n129\n00:06:10.120 --> 00:06:13.740\nI want to set up a read\nonly domain controller.\n\n130\n00:06:13.740 --> 00:06:16.440\nIs there a special version\nof Server 2012 that I need?\n\n131\n00:06:16.440 --> 00:06:19.530\nIs there a read only domain controller\nversion that I have to have?\n\n132\n00:06:19.530 --> 00:06:21.568\n>> There's not.\nAnd it's actually pretty easy to do.\n\n133\n00:06:21.568 --> 00:06:23.840\nAnd there's a little\nwizard that we go through.\n\n134\n00:06:23.840 --> 00:06:27.040\nIn fact, if you saw our other episodes\nwhere we're installing active directory,\n\n135\n00:06:27.040 --> 00:06:31.610\nyou'll remember on that active directory\ndomain services configuration wizard\n\n136\n00:06:31.610 --> 00:06:35.600\nhad a check mark for\nDNS Global catalogue, and one for RODC.\n\n137\n00:06:35.600 --> 00:06:38.080\nSo, it's really not too\nterribly difficult.\n\n138\n00:06:38.080 --> 00:06:41.610\nAnd it's, you can do as you said, or as\nI said, with the standard version there.\n\n139\n00:06:41.610 --> 00:06:44.270\nThe only big requirement for\n\n140\n00:06:44.270 --> 00:06:48.400\nRODCs is that your forced\nfunctional level is at least 2003,\n\n141\n00:06:48.400 --> 00:06:53.540\nwhich at this point, most networks should\nbe at that functional level at least.\n\n142\n00:06:53.540 --> 00:06:58.460\nYou also have to have one\nwritable domain controller\n\n143\n00:06:58.460 --> 00:07:03.180\non the network, and\nit has to be at least server 2008, right?\n\n144\n00:07:03.180 --> 00:07:06.980\nMy first domain controller cannot\nbe a read only domain controller\n\n145\n00:07:06.980 --> 00:07:09.180\nbecause it can't make any changes to it,\nright?\n\n146\n00:07:09.180 --> 00:07:13.010\nI can't make any new users,\nI can't set passwords, nothing like that.\n\n147\n00:07:13.010 --> 00:07:14.130\nSo it kind of makes sense.\n\n148\n00:07:14.130 --> 00:07:17.870\nI have to have at least one writeable\ncopy before I can make a read-only, and\n\n149\n00:07:17.870 --> 00:07:23.070\nit does have to be at least 2008\nas far as the writeable copy goes.\n\n150\n00:07:23.070 --> 00:07:23.710\nAll right.\n\n151\n00:07:23.710 --> 00:07:27.310\nSo let's take a look at what it takes to\ncreate a read only domain controller.\n\n152\n00:07:27.310 --> 00:07:33.030\nIn active directory there's actually\na wizard that we're gonna run through.\n\n153\n00:07:33.030 --> 00:07:36.392\nWe're gonna pre-create\nthe active directory,\n\n154\n00:07:36.392 --> 00:07:38.880\nthe computer account for that RODC.\n\n155\n00:07:38.880 --> 00:07:41.870\nNow, the machine that I'm\ngoing to turn into the RODC,\n\n156\n00:07:41.870 --> 00:07:46.630\nI've got a second server here, and\nit's currently a member of my domain.\n\n157\n00:07:46.630 --> 00:07:47.138\nRight?\n\n158\n00:07:47.138 --> 00:07:50.180\nSo, we're gonna say this is\nthe server that's sitting out there\n\n159\n00:07:50.180 --> 00:07:51.135\nat that branch office.\n\n160\n00:07:51.135 --> 00:07:55.890\nCuz, most likely at the branch office,\nthey've got a file server or something.\n\n161\n00:07:55.890 --> 00:07:59.280\nOr we're gonna move a server out there for\nthis purpose.\n\n162\n00:07:59.280 --> 00:08:01.990\nBut, because we're gonna go into active\ndirectory and pre-create the account,\n\n163\n00:08:01.990 --> 00:08:07.630\nthat means there cannot be an account for\nthat machine already in active directory.\n\n164\n00:08:07.630 --> 00:08:08.900\nAnd there is, right?\n\n165\n00:08:08.900 --> 00:08:10.990\nIt's a member server.\n\n166\n00:08:10.990 --> 00:08:14.824\nSo if I take a look at Active Directory\nusers and computers, and we go down to my,\n\n167\n00:08:14.824 --> 00:08:17.480\nsay, servers OU,\nthere's the account for svr01.\n\n168\n00:08:17.480 --> 00:08:23.560\nSo the first thing I need to do is\nunjoin this computer from the domain.\n\n169\n00:08:23.560 --> 00:08:25.360\nSo I'm gonna come in here and\nset it to a workgroup.\n\n170\n00:08:25.360 --> 00:08:26.580\nAnd I'm just gonna call it TEMP.\n\n171\n00:08:26.580 --> 00:08:28.610\nI'll click OK.\n\n172\n00:08:28.610 --> 00:08:31.770\nAnd it reminds me I need\nto know a local admin\n\n173\n00:08:31.770 --> 00:08:34.080\npassword before I unjoin the domain,\nwhich I know.\n\n174\n00:08:34.080 --> 00:08:36.272\nAnd then it's gonna ask me for\n\n175\n00:08:36.272 --> 00:08:41.570\ncredentials to remove this guy from this,\nnot even gonna bother.\n\n176\n00:08:41.570 --> 00:08:43.100\nThere we go.\nAnd we'll restart that guy.\n\n177\n00:08:43.100 --> 00:08:45.900\nAnd now it's no longer part of the domain.\n\n178\n00:08:45.900 --> 00:08:50.760\nBut while that guy's rebooting, I'll\nflip back over to my domain controller.\n\n179\n00:08:50.760 --> 00:08:53.210\nAnd if I refresh this, I should see that\n\n180\n00:08:53.210 --> 00:08:57.630\nthat account is now disabled because I\nunjoined the machine from the domain.\n\n181\n00:08:57.630 --> 00:09:01.880\nAnd I'm simply going to\ndelete that account.\n\n182\n00:09:01.880 --> 00:09:04.040\nNow, normally that's all you have to do,\nRonnie.\n\n183\n00:09:04.040 --> 00:09:05.322\nBut there is one more thing\nthat I like to double check.\n\n184\n00:09:05.322 --> 00:09:08.525\nI've seen it too many times\nsetting these guys up.\n\n185\n00:09:08.525 --> 00:09:13.396\nWhen you remove that computer\nfrom the domain it should clear\n\n186\n00:09:13.396 --> 00:09:15.603\nthe records from it in DNS.\n\n187\n00:09:15.603 --> 00:09:18.192\nWhoops, wrong button there.\n\n188\n00:09:18.192 --> 00:09:21.085\nAnd when I go to join\nit back to the domain,\n\n189\n00:09:21.085 --> 00:09:24.080\nthere can't be any existing DNS records.\n\n190\n00:09:24.080 --> 00:09:26.700\nAnd so, I like to go in there and\njust double check and\n\n191\n00:09:26.700 --> 00:09:28.632\nmake sure those got cleared out.\n\n192\n00:09:28.632 --> 00:09:30.930\nCuz too many times I've been\ngoing through the wizard and\n\n193\n00:09:30.930 --> 00:09:33.205\nI get an error that says\na name duplication.\n\n194\n00:09:33.205 --> 00:09:33.890\n>> [LAUGH]\n>> And I'm like.\n\n195\n00:09:33.890 --> 00:09:35.150\nAnd I have to go do this.\n\n196\n00:09:35.150 --> 00:09:36.638\nSo I just go ahead and\ndo it ahead of time now.\n\n197\n00:09:36.638 --> 00:09:38.907\nAnd I can see svr01 is gone.\n\n198\n00:09:38.907 --> 00:09:40.940\nSo we're good to go there.\n\n199\n00:09:40.940 --> 00:09:43.050\nSo, delete the account\nin active directory.\n\n200\n00:09:43.050 --> 00:09:45.330\nMake sure there's no remnants in DNS for\nthat guy.\n\n201\n00:09:45.330 --> 00:09:48.070\n>> Now, Mike, I did have a question when\nyou talked about deleting the account.\n\n202\n00:09:48.070 --> 00:09:50.540\nIf we just leave it disabled,\nis that okay, or\n\n203\n00:09:50.540 --> 00:09:51.710\ndo you have to delete that account?\n\n204\n00:09:51.710 --> 00:09:55.073\n>> You really need to remove it because\nyou're gonna have a duplicate name issue.\n\n205\n00:09:55.073 --> 00:09:55.610\n>> Okay.\n>> Right?\n\n206\n00:09:55.610 --> 00:09:57.520\nUnless you rename the computer before,\n\n207\n00:09:57.520 --> 00:09:59.780\nmaybe I wanna go ahead and\nrename that machine.\n\n208\n00:09:59.780 --> 00:10:02.800\nNow that I've unjoined the domain,\nI could call it RODC1, you know,\n\n209\n00:10:02.800 --> 00:10:04.000\nor something like that.\n\n210\n00:10:04.000 --> 00:10:06.070\nAnd then it wouldn't cause a problem.\n\n211\n00:10:06.070 --> 00:10:07.430\nI could leave that disabled account.\n\n212\n00:10:07.430 --> 00:10:11.130\nIf you're not gonna change the name\nthough, yeah, remove that account.\n\n213\n00:10:11.130 --> 00:10:11.630\n>> Cool.\n>> All right.\n\n214\n00:10:11.630 --> 00:10:12.530\nSo what we're gonna do is\n\n215\n00:10:12.530 --> 00:10:15.230\nwe're gonna open up active\ndirectory users and computers, and\n\n216\n00:10:15.230 --> 00:10:17.070\nI'm gonna go to my domain controllers OU.\n\n217\n00:10:17.070 --> 00:10:20.583\nAnd I'm gonna right-click on\nthat domain controller's OU.\n\n218\n00:10:20.583 --> 00:10:25.180\nAnd there's my option, pre-create\nread-only domain controller account.\n\n219\n00:10:25.180 --> 00:10:27.028\nThat's gonna launch my wizard,\n\n220\n00:10:27.028 --> 00:10:31.527\nand you'll see that it's just like my\nnormal active directory Install Wizard.\n\n221\n00:10:31.527 --> 00:10:35.425\nI'm gonna click Next on here.\n\n222\n00:10:35.425 --> 00:10:39.040\nI'm already logged on as lab\nadministrator, so it's got my credentials.\n\n223\n00:10:39.040 --> 00:10:41.550\nWe're adding this to lab.itpro.tv.\n\n224\n00:10:41.550 --> 00:10:46.360\nI can't change that because I'm right\nclicking on an OU inside lab.itpro.tv.\n\n225\n00:10:46.360 --> 00:10:49.820\nSo, I couldn't set this up for\na different domain.\n\n226\n00:10:49.820 --> 00:10:50.730\nI'll click Next.\n\n227\n00:10:50.730 --> 00:10:52.390\nAnd then the name of the computer.\n\n228\n00:10:52.390 --> 00:10:54.030\nI would need to know this.\n\n229\n00:10:54.030 --> 00:10:55.988\nIf I had changed it,\nI would have to fill that in here.\n\n230\n00:10:55.988 --> 00:10:58.394\nFor me, that is just svr01.\n\n231\n00:10:58.394 --> 00:11:01.360\nAnd we'll click Next.\n\n232\n00:11:01.360 --> 00:11:03.844\nAnd this is where you\nwould get that error,\n\n233\n00:11:03.844 --> 00:11:06.895\nif the DNS record didn't\nget flushed properly.\n\n234\n00:11:06.895 --> 00:11:10.240\nSo you just need to, if you ever get\nthat error, just go check DNS and\n\n235\n00:11:10.240 --> 00:11:11.314\ndelete that record.\n\n236\n00:11:11.314 --> 00:11:16.235\nI only have one site to choose from,\nso I'll click Next.\n\n237\n00:11:16.235 --> 00:11:19.915\nAnd then it's gonna look a lot like my\nnormal Active Directory installation.\n\n238\n00:11:19.915 --> 00:11:23.575\nDo I want to include DNS?\n\n239\n00:11:25.401 --> 00:11:26.550\nMaking sure, again,\n\n240\n00:11:26.550 --> 00:11:31.040\nit's examining the network to see what\ninfrastructure's already out there.\n\n241\n00:11:31.040 --> 00:11:36.460\nSo we'll give it a second\nto plug along there.\n\n242\n00:11:36.460 --> 00:11:38.690\nThere was something I\nwas gonna say earlier.\n\n243\n00:11:38.690 --> 00:11:39.965\nNow I've lost track.\n\n244\n00:11:39.965 --> 00:11:41.971\nIt'll come back to me\nhere in just a minute.\n\n245\n00:11:41.971 --> 00:11:42.850\nThere we go.\nSo I'm gonna go ahead and\n\n246\n00:11:42.850 --> 00:11:45.485\nmake this guy a DNS server\nto global catalog server.\n\n247\n00:11:45.485 --> 00:11:46.853\nKinda makes sense.\n\n248\n00:11:46.853 --> 00:11:50.918\nI mean, if this RODC is out there at the\nbranch office and we're having, the reason\n\n249\n00:11:50.918 --> 00:11:55.160\nwe're doing this is slower intermittent\nconnectivity back to the corporate office,\n\n250\n00:11:55.160 --> 00:11:58.225\nmight as well go ahead and\nput DNS out there, global catalog.\n\n251\n00:11:58.225 --> 00:11:59.005\nKeep in mind, however,\n\n252\n00:11:59.005 --> 00:12:04.225\nthat global catalogs, that's the domain\npartition of all domains in your forest.\n\n253\n00:12:04.225 --> 00:12:07.585\nSo that could generate a lot of\nreplication traffic out there to that\n\n254\n00:12:07.585 --> 00:12:08.295\nbranch office.\n\n255\n00:12:08.295 --> 00:12:10.665\nAnd again, there we could be\ntalking about a slow LAN link.\n\n256\n00:12:10.665 --> 00:12:13.115\nSo, it is one of those things\nthat you've gotta decide.\n\n257\n00:12:13.115 --> 00:12:15.185\nDo I need that extra replication traffic?\n\n258\n00:12:15.185 --> 00:12:20.360\nThe other thing we gotta to think about\nis if I do active directory integrated\n\n259\n00:12:20.360 --> 00:12:24.740\nzones on a read-only domain controller,\nguess what happens to those DNS zones?\n\n260\n00:12:24.740 --> 00:12:25.800\nThey're read only as well, right?\n\n261\n00:12:25.800 --> 00:12:28.060\nSo, you can still look up queries,\n\n262\n00:12:28.060 --> 00:12:32.800\nyou can just do queries to look up names,\nyou won't be able to make any changes.\n\n263\n00:12:32.800 --> 00:12:34.105\nI'll go ahead and\nclick next on our wizard.\n\n264\n00:12:34.105 --> 00:12:36.650\nIt tells me there's already a DNS server.\n\n265\n00:12:36.650 --> 00:12:39.250\nYou know what,\nlet's just uncheck global catalog.\n\n266\n00:12:39.250 --> 00:12:41.040\nThat way we'll kinda do a real world.\n\n267\n00:12:41.040 --> 00:12:43.402\nWe'll say we don't want a global catalog,\nno I changed my mind.\n\n268\n00:12:43.402 --> 00:12:45.318\n>> [LAUGH]\n>> I can never decide.\n\n269\n00:12:45.318 --> 00:12:47.040\nI'll go ahead and leave it.\n\n270\n00:12:47.040 --> 00:12:50.260\nAnd then here, delegation of RODC\ninstallation and administration.\n\n271\n00:12:50.260 --> 00:12:54.260\nAnother thing that's a little bit\ndifferent from your normal domain\n\n272\n00:12:54.260 --> 00:12:55.350\ncontrollers.\n\n273\n00:12:55.350 --> 00:12:59.480\nNormally, on a domain controller, once\nyou promote it and it becomes a domain\n\n274\n00:12:59.480 --> 00:13:04.410\ncontroller, there's no more local accounts\nstored on that machine except for that\n\n275\n00:13:04.410 --> 00:13:09.730\ndirectory service restore mode account, so\nthat you can go into DSRM, if you need to.\n\n276\n00:13:09.730 --> 00:13:12.890\nWell, I'm getting ready to put\nthis out at the branch office.\n\n277\n00:13:12.890 --> 00:13:16.610\nAnd I need somebody out there to be\nable to finish this process, right?\n\n278\n00:13:16.610 --> 00:13:20.346\nBut I'm not gonna make one of those users\na domain admin so they can do this.\n\n279\n00:13:20.346 --> 00:13:20.959\nSo here's where I can delegate to one\nof those users the ability to finish\n\n280\n00:13:20.959 --> 00:13:21.696\nthe installation process and make that guy\ncomplete the RODC installation process.\n\n281\n00:13:21.696 --> 00:13:26.197\nAnd they will become\n\n282\n00:13:26.197 --> 00:13:34.148\nan administrator on that machine.\n\n283\n00:13:34.148 --> 00:13:36.777\nAnd that's a good thing with these RODCs.\n\n284\n00:13:36.777 --> 00:13:38.864\nLike I said, it's a branch office.\n\n285\n00:13:38.864 --> 00:13:41.091\nThey might have one server out there,\n\n286\n00:13:41.091 --> 00:13:44.374\nand I'm gonna make it\na read-only domain controller.\n\n287\n00:13:44.374 --> 00:13:48.660\nBut they also need a file server,\na print server and things like that.\n\n288\n00:13:48.660 --> 00:13:53.110\nAnd what if I need one of those users\nout there to run Windows updates or\n\n289\n00:13:53.110 --> 00:13:55.090\nclear the print queue?\n\n290\n00:13:55.090 --> 00:13:58.005\nWell, to log on to a domain controller\nyou've got to be in the domain\n\n291\n00:13:58.005 --> 00:14:02.035\nadmins group, the enterprise admins\ngroup or the server operators group.\n\n292\n00:14:02.035 --> 00:14:03.407\nI don't have any IT people out there.\n\n293\n00:14:03.407 --> 00:14:03.945\nAll right?\n\n294\n00:14:03.945 --> 00:14:06.145\nWho's gonna manage that server?\n\n295\n00:14:06.145 --> 00:14:07.515\nI mean, I can do a lot of it remotely.\n\n296\n00:14:07.515 --> 00:14:10.499\nBut what if the WAN link is down, right?\n\n297\n00:14:10.499 --> 00:14:14.101\nThis is how I can allow somebody\nthe ability to log onto that domain\n\n298\n00:14:14.101 --> 00:14:18.424\ncontroller, manage things like the print\nqueue, and create new shares, and\n\n299\n00:14:18.424 --> 00:14:20.978\ndo whatever, but\nnot make him domain admin and\n\n300\n00:14:20.978 --> 00:14:23.829\ngive him any kind of rights\nover active directory.\n\n301\n00:14:23.829 --> 00:14:26.059\nSo, something a little bit different.\n\n302\n00:14:26.059 --> 00:14:28.334\nAnd you And\nyou should really use a group here.\n\n303\n00:14:28.334 --> 00:14:30.319\nI don't have a whole lot of groups.\n\n304\n00:14:30.319 --> 00:14:31.561\nI should have set one up.\n\n305\n00:14:31.561 --> 00:14:32.666\nActually, I've got the help desk.\n\n306\n00:14:32.666 --> 00:14:36.798\nI'll use those guys here.\n\n307\n00:14:36.798 --> 00:14:40.896\nNormally what I would do is I'd\ncreate a group specifically for\n\n308\n00:14:40.896 --> 00:14:42.841\nthis purpose, RODC admins.\n\n309\n00:14:42.841 --> 00:14:44.292\nAnd in fact, you know what?\n\n310\n00:14:44.292 --> 00:14:45.349\nLet's do it the right way, Ronnie.\n\n311\n00:14:45.349 --> 00:14:46.091\n>> Okay.\n\n312\n00:14:46.091 --> 00:14:51.764\n>> If I can, if it'll let me skip here and\n>> Yeah, it's not gonna let me do it.\n\n313\n00:14:51.764 --> 00:14:53.347\nAlright, we're gonna use the help desk for\nnow.\n\n314\n00:14:53.347 --> 00:14:54.085\n>> [LAUGH]\n>> But like I said,\n\n315\n00:14:54.085 --> 00:14:57.825\nnormally I'd create a group just for this\npurpose and then one of those users at\n\n316\n00:14:57.825 --> 00:15:02.105\nthe branch office gets put in that group,\nand that way if they ever leave that\n\n317\n00:15:02.105 --> 00:15:05.355\nbranch office, I can take them out of\nthe group and put somebody else in there.\n\n318\n00:15:05.355 --> 00:15:07.809\nIf I do this to\nan individual user account,\n\n319\n00:15:07.809 --> 00:15:10.750\nthat becomes a little more\nchallenging to manage.\n\n320\n00:15:10.750 --> 00:15:15.710\nSo I'll do the help desk, and\nI'll go ahead and click next.\n\n321\n00:15:15.710 --> 00:15:20.870\nThere's my little summary of my settings,\nI'll click next and then finish.\n\n322\n00:15:20.870 --> 00:15:25.662\nAnd notice I have a new account of\nthe type unoccupied DC account,\n\n323\n00:15:25.662 --> 00:15:28.440\nread only, global catalog.\n\n324\n00:15:28.440 --> 00:15:29.230\nAll right?\n\n325\n00:15:29.230 --> 00:15:32.260\nSo now it is pre-staged,\nand why we're here,\n\n326\n00:15:32.260 --> 00:15:36.910\nI need to add somebody into that group so\nthat we can test that out.\n\n327\n00:15:38.450 --> 00:15:40.510\nAnd I'll find good old Rob's account.\n\n328\n00:15:40.510 --> 00:15:42.510\nThat's an easy one to log in with.\n\n329\n00:15:42.510 --> 00:15:43.100\nThere we go.\n\n330\n00:15:43.100 --> 00:15:44.360\nSo I put Rob in that group.\n\n331\n00:15:44.360 --> 00:15:48.230\n>> We'll pretend Rob is one of my\nusers that works out there at that\n\n332\n00:15:48.230 --> 00:15:50.040\nbranch office.\n\n333\n00:15:50.040 --> 00:15:51.800\nAll right, so at that point,\n\n334\n00:15:51.800 --> 00:15:55.960\nwe're good to go as far as\nactive directory is concerned.\n\n335\n00:15:55.960 --> 00:16:00.870\nNext thing we're gonna do,\nis we're gonna go over to this server.\n\n336\n00:16:00.870 --> 00:16:03.190\nIt's no longer part of the domain, right.\n\n337\n00:16:03.190 --> 00:16:04.330\nAnd I'm going to,\n\n338\n00:16:04.330 --> 00:16:08.820\nthis is out of the branch office,\nI'm gonna log on as that local admin.\n\n339\n00:16:08.820 --> 00:16:11.760\nAnd we're gonna do like we normally\nwould with any other domain\n\n340\n00:16:11.760 --> 00:16:12.560\ncontroller, all right.\n\n341\n00:16:13.740 --> 00:16:16.700\nSo, remember that as we're\ntalking about getting this thing\n\n342\n00:16:16.700 --> 00:16:19.080\ninstalled right here\nat the very beginning.\n\n343\n00:16:19.080 --> 00:16:22.080\nWe need to understand those prerequisites\nthat Mike just talked about.\n\n344\n00:16:22.080 --> 00:16:25.080\nThe very factor we're gonna create\nthat read only domain controller.\n\n345\n00:16:25.080 --> 00:16:29.530\nWe're gonna need that server 2012 machine\nthat is unjoined from the domain.\n\n346\n00:16:29.530 --> 00:16:33.700\nSo that's actually key or\nit might not do what you want it to do.\n\n347\n00:16:33.700 --> 00:16:37.130\nSecondly, we're gonna pre-stage\nthat RODC account as well.\n\n348\n00:16:37.130 --> 00:16:40.715\nAnd remember by doing that, there's a\ncouple of things we need to take care of.\n\n349\n00:16:40.715 --> 00:16:44.045\nOne, if we already have that computer\naccount still in active directory,\n\n350\n00:16:44.045 --> 00:16:47.255\nwanna make sure that it\nis deleted out of there.\n\n351\n00:16:47.255 --> 00:16:51.175\nAnd then secondly, we also want to\nmake sure we check the DNS records.\n\n352\n00:16:51.175 --> 00:16:53.765\nEnsure that all DNS, all of them?\n\n353\n00:16:53.765 --> 00:16:56.473\nAll of them that point to that\nmachine inside the DNS are also\n\n354\n00:16:56.473 --> 00:16:59.343\ngoing to be cleared, and\nthen we can run through that wizard and\n\n355\n00:16:59.343 --> 00:17:01.801\nget that account pre-staged\nthe way that we need to.\n\n356\n00:17:01.801 --> 00:17:06.012\nFrom that point, it's going back and\nactually choosing them whatever method\n\n357\n00:17:06.012 --> 00:17:09.393\nthat you choose to to install\nthe active directory services and\n\n358\n00:17:09.393 --> 00:17:11.716\nthen actually finish the configuration.\n\n359\n00:17:11.716 --> 00:17:15.253\nSo it does take a little bit more time, a\nlittle bit more attention that you have to\n\n360\n00:17:15.253 --> 00:17:18.998\npay to it, or at least when you start the\nprocess, you're gonna get lot of warnings,\n\n361\n00:17:18.998 --> 00:17:21.362\nsaying hey you didn't do this,\nyou didn't do that.\n\n362\n00:17:21.362 --> 00:17:25.701\nI think Mike would also agree when it\ncomes down that she having that account,\n\n363\n00:17:25.701 --> 00:17:29.970\nmake sure you go ahead and create that\naccount so that they can get into it.\n\n364\n00:17:29.970 --> 00:17:34.370\nDon't say it doesn't matter what it is,\nit really does cause if not, you can\n\n365\n00:17:34.370 --> 00:17:38.575\nfind yourself locked up very quickly once\nJoe or whoever it is that you set in there\n\n366\n00:17:38.575 --> 00:17:42.240\ndecides he's leaving, and now you don't\nhave a password to be able to get in so\n\n367\n00:17:42.240 --> 00:17:44.900\njust be aware that these\nare all important things and\n\n368\n00:17:44.900 --> 00:17:47.020\nwe're gonna actually be using\nthis read-only domain controller.\n\n369\n00:17:47.020 --> 00:17:50.390\n>> So I've got that wizard running, and\nwe've seen this in another episode so\n\n370\n00:17:50.390 --> 00:17:51.410\nI'm gonna go pretty quick.\n\n371\n00:17:51.410 --> 00:17:55.540\nI'm just gonna install that active\ndirectory domain services roll.\n\n372\n00:17:55.540 --> 00:17:58.100\nI'll include my management tools,\nmy required features and\n\n373\n00:17:58.100 --> 00:18:01.350\nI'll click all the way through there and\ngo install.\n\n374\n00:18:01.350 --> 00:18:03.625\nAgain nothing different so far, right?\n\n375\n00:18:03.625 --> 00:18:07.795\nJust installing the role and\nthis won't take very long.\n\n376\n00:18:07.795 --> 00:18:11.715\nThen we would be at this point,\nonce this comes back up,\n\n377\n00:18:11.715 --> 00:18:15.735\nwe'll go through that Active Directory\nDomain Services Configuration Wizard and\n\n378\n00:18:15.735 --> 00:18:17.975\nthat's where you'll see\na couple of changes or\n\n379\n00:18:17.975 --> 00:18:21.935\nsome slight differences from what\nwe normally see in that wizard.\n\n380\n00:18:21.935 --> 00:18:23.955\nFor the most part, it's the same though.\n\n381\n00:18:23.955 --> 00:18:26.090\nYou still gotta do the same things.\n\n382\n00:18:26.090 --> 00:18:28.710\nWhere do you want to put SYSVOL?\n\n383\n00:18:28.710 --> 00:18:32.190\nWhere do you want to put the database?\n\n384\n00:18:32.190 --> 00:18:35.440\nWhere do you want to put the log files,\nthings like that?\n\n385\n00:18:35.440 --> 00:18:37.660\nAlthough we've already\nchosen some options,\n\n386\n00:18:37.660 --> 00:18:40.250\nlike we included the DNS and\nglobal catalog.\n\n387\n00:18:40.250 --> 00:18:43.340\n>> Now Mike, let me go ahead and\nask this question since it's right here.\n\n388\n00:18:43.340 --> 00:18:45.350\nWe've got this on a regular\ninstall of Server 2012 R2.\n\n389\n00:18:45.350 --> 00:18:49.630\nCould I do this, let's say,\nif I setup a server core edition.\n\n390\n00:18:49.630 --> 00:18:54.550\nCould I make that a read-only\ndomain controller?\n\n391\n00:18:54.550 --> 00:18:55.490\n>> You can. Yep. >> Okay.\n\n392\n00:18:55.490 --> 00:18:57.670\n>> Server core can do it as well.\n\n393\n00:18:57.670 --> 00:19:00.640\nAll right, so I'll go ahead and\nlaunch that configuration wizard.\n\n394\n00:19:00.640 --> 00:19:04.750\nWe're gonna be adding a domain\ncontroller to an existing domain.\n\n395\n00:19:04.750 --> 00:19:06.680\nThat domain is going to be lab.itpro.tv.\n\n396\n00:19:06.680 --> 00:19:09.360\nBut my credentials I'm gonna change.\n\n397\n00:19:09.360 --> 00:19:12.770\nAnd here, I'm gonna put labs/Rob,\n\n398\n00:19:12.770 --> 00:19:17.560\nbecause Rob is in the help desk who\nI delegated permission to do this.\n\n399\n00:19:17.560 --> 00:19:26.140\nWe'll go ahead and type in his super\nsecret password and we'll click next.\n\n400\n00:19:26.140 --> 00:19:27.410\nAll right, and check it out.\n\n401\n00:19:27.410 --> 00:19:29.910\nA pre-created,\nread only domain controller account that\n\n402\n00:19:29.910 --> 00:19:34.040\nmatches the name of the target server,\nexists in the directory.\n\n403\n00:19:34.040 --> 00:19:37.510\nChoose what or\nwhether to use the existing RDC account,\n\n404\n00:19:37.510 --> 00:19:39.570\nor reinstall this domain controller.\n\n405\n00:19:39.570 --> 00:19:40.740\nSo you see that it says, wait.\n\n406\n00:19:40.740 --> 00:19:44.810\nThere's an account in active directory\nwith the same name as this computer.\n\n407\n00:19:44.810 --> 00:19:46.550\nDo you want me to use this account?\n\n408\n00:19:46.550 --> 00:19:47.110\nYes we do.\n\n409\n00:19:47.110 --> 00:19:48.790\nThat's why we pre-staged it.\n\n410\n00:19:48.790 --> 00:19:54.800\nNotice that DNS, Global catalog, RDC,\nall checked, and I cannot uncheck them.\n\n411\n00:19:54.800 --> 00:20:01.190\nRight, we will type in our DSRM\npassword that we want to set up,\n\n412\n00:20:01.190 --> 00:20:05.670\nwe will click next, and then it is back\nto the normal installation wizard.\n\n413\n00:20:05.670 --> 00:20:08.790\nWe have our options,\nthere are additional options.\n\n414\n00:20:08.790 --> 00:20:12.480\nOur locations for our important files,\nwe get our little summary there.\n\n415\n00:20:12.480 --> 00:20:13.922\nWe'll go ahead and click next.\n\n416\n00:20:13.922 --> 00:20:17.620\nYou could script this out if you wanted\nto set up other RODC's and not have\n\n417\n00:20:17.620 --> 00:20:21.210\nto go through this wizard, and even start\nautomating this process a little a bit.\n\n418\n00:20:21.210 --> 00:20:26.038\nWe'll click next, it's going to\ndo those same pre-req checks,\n\n419\n00:20:26.038 --> 00:20:28.925\nand we'll go ahead and click install.\n\n420\n00:20:28.925 --> 00:20:32.130\nAnd once it finishes,\nit is gonna have to reboot, right,\n\n421\n00:20:32.130 --> 00:20:36.120\nwhen we install Active Directory and\nwe configure it, we reboot it.\n\n422\n00:20:36.120 --> 00:20:40.730\nWhen it comes back up, it's gonna\nbe a read only domain controller.\n\n423\n00:20:40.730 --> 00:20:44.710\n>> All right so Mike, let's go back to\nthat server core thing just for a moment.\n\n424\n00:20:44.710 --> 00:20:49.010\nSo, is there a reason why I might choose\nto launch that server core edition and\n\n425\n00:20:49.010 --> 00:20:50.990\nmake that a read-only\ndomain control instead?\n\n426\n00:20:50.990 --> 00:20:54.540\n>> Well the same reasons we talked about\nwhy we'd run core in the first place.\n\n427\n00:20:54.540 --> 00:20:58.600\nThat server I'm sending out there to\nthe branch office might be one of my older\n\n428\n00:20:58.600 --> 00:21:00.920\nones that I pulled out of my\nrack at the corporate, so\n\n429\n00:21:00.920 --> 00:21:02.610\nit doesn't have as much power.\n\n430\n00:21:02.610 --> 00:21:05.160\nRemember, core uses a lot less resources.\n\n431\n00:21:05.160 --> 00:21:07.920\nIt's also got a smaller\nattack service because\n\n432\n00:21:07.920 --> 00:21:10.420\nof the fact that we don't have the GUI and\nall those wizards.\n\n433\n00:21:10.420 --> 00:21:13.320\nSo we're doing RDCs for\nsecurity reasons, typically.\n\n434\n00:21:13.320 --> 00:21:15.836\nThere's just one more layer of security.\n\n435\n00:21:15.836 --> 00:21:17.630\nLet's make it an RODC.\n\n436\n00:21:17.630 --> 00:21:18.420\nLet's make it core.\n\n437\n00:21:18.420 --> 00:21:22.650\nThat makes it more difficult to work with\nfor the novice or the bad guy, hopefully.\n\n438\n00:21:22.650 --> 00:21:24.490\n>> Difficult would probably\nnot be the word at times.\n\n439\n00:21:24.490 --> 00:21:26.080\nMore than likely almost impossible.\n\n440\n00:21:26.080 --> 00:21:27.310\nNow, don't get me wrong.\n\n441\n00:21:27.310 --> 00:21:31.737\nSomebody that really wants to be able\nto get access to, they probably can,\n\n442\n00:21:31.737 --> 00:21:35.195\nbut most people, at least,\nwill be intimidated by that.\n\n443\n00:21:35.195 --> 00:21:36.878\nAnd with that smaller attack surface and\n\n444\n00:21:36.878 --> 00:21:40.146\nthe very fact that we're using less\nresources means that that machine can also\n\n445\n00:21:40.146 --> 00:21:43.416\nprobably do other resources like you're\ntalking about, the print server and\n\n446\n00:21:43.416 --> 00:21:46.460\nthe file server, and do that a lot\nmore efficiently as well, too.\n\n447\n00:21:46.460 --> 00:21:48.090\nMore exactly.\n\n448\n00:21:48.090 --> 00:21:49.180\nAll right, there it comes.\n\n449\n00:21:49.180 --> 00:21:49.730\nIt's rebooting.\n\n450\n00:21:49.730 --> 00:21:53.590\nLet's go check our Active Directory.\n\n451\n00:21:53.590 --> 00:21:57.300\nCheck on the main controllers and\nI'll refresh that.\n\n452\n00:21:57.300 --> 00:22:00.866\nAnd now you can see I've got no\nmore downward arrow on this VR01.\n\n453\n00:22:00.866 --> 00:22:02.025\nBut no longer says unoccupied.\n\n454\n00:22:02.025 --> 00:22:04.265\nI've got a read only global catalogue.\n\n455\n00:22:04.265 --> 00:22:09.095\nSo we now have a second domain controller\nin our domain, it's sitting out there at\n\n456\n00:22:09.095 --> 00:22:12.995\nthe branch office, and it is read only,\nand it is taking its time to boot up.\n\n457\n00:22:12.995 --> 00:22:17.520\nAll right, now there's a couple of things\nthat we need to learn about these RODCs.\n\n458\n00:22:17.520 --> 00:22:22.090\nWe'll get logged onto it here in just\na second, but once you create that RODC,\n\n459\n00:22:22.090 --> 00:22:24.980\nthe next thing you gotta\ndo is you gotta decide\n\n460\n00:22:24.980 --> 00:22:28.220\nwhat passwords we're gonna\nallow to be cached out there.\n\n461\n00:22:28.220 --> 00:22:32.890\nAnd as I said, most likely the employees,\nthe ones that work at the branch office,\n\n462\n00:22:32.890 --> 00:22:36.970\nyou want their passwords to be cached\nout there, because that way if\n\n463\n00:22:36.970 --> 00:22:40.440\nthe WAN is down they can still\nauthenticate with that RODC there, right?\n\n464\n00:22:40.440 --> 00:22:45.220\nI want to make sure that my important\naccounts are not cached on there.\n\n465\n00:22:45.220 --> 00:22:48.320\nNow just because passwords\naren't cached on that RDC,\n\n466\n00:22:48.320 --> 00:22:50.640\ndoes not mean you can't log on.\n\n467\n00:22:50.640 --> 00:22:53.820\nIf I'm a domain admin and\nI go out there to the branch office and\n\n468\n00:22:53.820 --> 00:22:56.550\nI sit at a computer,\nI'm gonna be able to log on.\n\n469\n00:22:56.550 --> 00:23:00.370\nWhat's gonna happen is my authentication\ntraffic is gonna be sent to that local,\n\n470\n00:23:00.370 --> 00:23:03.830\nthat RODC, the RODC's gonna say\nI don't know your password.\n\n471\n00:23:03.830 --> 00:23:06.550\nAnd he's gonna forward\nthe request across the way and\n\n472\n00:23:06.550 --> 00:23:08.010\nto a writeable copy of Active Directory.\n\n473\n00:23:08.010 --> 00:23:12.990\nIt's gonna come back and say yes or\nno and it'll allow me to log on, but\n\n474\n00:23:12.990 --> 00:23:16.190\nit won't remember my password\nout there at the branch office.\n\n475\n00:23:16.190 --> 00:23:18.410\nSo if I log off and log on again,\n\n476\n00:23:18.410 --> 00:23:22.290\nit's gonna have to again redirect it over\nthere to the corporate office and back.\n\n477\n00:23:22.290 --> 00:23:24.750\nSo I'm gonna make sure that\nthose passwords are never\n\n478\n00:23:24.750 --> 00:23:27.575\ncached because as I said, just because\nyou're password is not cached out there.\n\n479\n00:23:27.575 --> 00:23:28.925\nDoesn't mean you can't log on,\n\n480\n00:23:28.925 --> 00:23:31.585\nit just means that has to go\ncheck with that writable copy.\n\n481\n00:23:31.585 --> 00:23:34.085\nIn fact, my users at the branch office,\n\n482\n00:23:34.085 --> 00:23:37.795\nwhen I first set this up, their\npasswords are not cached out there yet.\n\n483\n00:23:37.795 --> 00:23:42.055\nThat first time when they go to log on,\nit will have to go across the way and\n\n484\n00:23:42.055 --> 00:23:43.543\nverify their password.\n\n485\n00:23:43.543 --> 00:23:48.500\nOnce that happens, then it can cash their\npassword and from then on out it can\n\n486\n00:23:48.500 --> 00:23:51.160\ncheck locally right it won't have\nto go across that WLAN link.\n\n487\n00:23:51.160 --> 00:23:55.330\n>> Mike speaking with that right, I know\nthat there's some times where I've had to\n\n488\n00:23:55.330 --> 00:23:58.380\ndo this I've noticed with group policy and\nthis kind of crossing a little bit.\n\n489\n00:23:58.380 --> 00:24:01.325\nBut sometimes where I've\nhad to log on log back out.\n\n490\n00:24:01.325 --> 00:24:03.155\nOut and log back in before it takes place.\n\n491\n00:24:03.155 --> 00:24:05.745\nWould something like this also end\nup happening with what you were\n\n492\n00:24:05.745 --> 00:24:07.625\njust talking about that first time?\n\n493\n00:24:07.625 --> 00:24:09.877\n>> It shouldn't.\nIt might take a little more time.\n\n494\n00:24:09.877 --> 00:24:12.167\nEspecially if that WAN link,\nif that WAN link is down and\n\n495\n00:24:12.167 --> 00:24:15.384\nyour password hasn't been cached yet,\nyou're not going to be able to log on,\n\n496\n00:24:15.384 --> 00:24:17.755\ncause it's not going to be\nable to verify your password.\n\n497\n00:24:17.755 --> 00:24:19.728\nSo it will have to reach\nout that first time.\n\n498\n00:24:19.728 --> 00:24:22.213\nAny updates or changes to your password or\n\n499\n00:24:22.213 --> 00:24:26.336\nthings like that those will\nautomatically go to that writable copy.\n\n500\n00:24:26.336 --> 00:24:30.018\nBecause the read only domain controller,\nyou can't change your password there,\n\n501\n00:24:30.018 --> 00:24:31.078\nit's a read only copy.\n\n502\n00:24:31.078 --> 00:24:33.445\nAnd it will update\nthe cache of your password,\n\n503\n00:24:33.445 --> 00:24:35.395\nso it knows what your new password is.\n\n504\n00:24:35.395 --> 00:24:38.144\nWhat will happen is you'll\ngo to change your password,\n\n505\n00:24:38.144 --> 00:24:41.943\nit will forward it right on over to\nthe writeable copy and it'll do a request,\n\n506\n00:24:41.943 --> 00:24:44.463\nwhat we call\na Single Object Replication request.\n\n507\n00:24:44.463 --> 00:24:47.752\nAnd it says hey, this person needs\nto talk to a writeable copy so\n\n508\n00:24:47.752 --> 00:24:51.292\nhe can update his password,\nwhen you're done making that change,\n\n509\n00:24:51.292 --> 00:24:53.924\ncan you send it back to me so\nI'll have a copy of it.\n\n510\n00:24:53.924 --> 00:24:56.783\nSo it doesn't fail to\nauthenticate you next time,\n\n511\n00:24:56.783 --> 00:24:58.849\nbecause you changed your password.\n\n512\n00:24:58.849 --> 00:25:00.725\nSo we will know about\nyour password change.\n\n513\n00:25:00.725 --> 00:25:03.685\nAll right, so how do we control,\nwhich passwords are cached out there?\n\n514\n00:25:03.685 --> 00:25:06.387\nThere's really two different\nplaces we're gonna be doing this.\n\n515\n00:25:06.387 --> 00:25:11.305\nEach RODC has its own set of\npassword replication policies.\n\n516\n00:25:11.305 --> 00:25:14.596\nThere's an allow list,\nand there's a deny list.\n\n517\n00:25:14.596 --> 00:25:18.900\nBut there's also a global\nlist in Active Directory.\n\n518\n00:25:18.900 --> 00:25:20.685\nWhat if I had five Have RODCs?\n\n519\n00:25:20.685 --> 00:25:25.005\nAnd I wanna make sure that Ronnie's\npassword isn't cached on any of the RODCs.\n\n520\n00:25:25.005 --> 00:25:30.053\nI could go to each one and\nadd Ronnie's account to that deny list.\n\n521\n00:25:30.053 --> 00:25:34.436\nOr I could do it once in the global\nlist and that would affect all RODCs.\n\n522\n00:25:34.436 --> 00:25:36.135\nAll right, see what I'm saying?\n\n523\n00:25:36.135 --> 00:25:37.934\nSo let's take a look\nat where we see those.\n\n524\n00:25:37.934 --> 00:25:41.051\nIf I go to the properties\nof the RODC itself.\n\n525\n00:25:41.051 --> 00:25:43.265\nSo I right-clicked on that server.\n\n526\n00:25:43.265 --> 00:25:47.103\nChose Properties, and\nI go to Password Replication Policy.\n\n527\n00:25:47.103 --> 00:25:50.598\nHere I can see, these are defaults,\nwe haven't done anything to this yet.\n\n528\n00:25:50.598 --> 00:25:52.579\nRight?\nSo this is all default and\n\n529\n00:25:52.579 --> 00:25:54.592\nwe'll sort it by allow or deny.\n\n530\n00:25:54.592 --> 00:25:58.512\nAnd notice their only one that's\nset to allow is something called\n\n531\n00:25:58.512 --> 00:26:01.221\nthe Allow RODC Password Replication group,\n\n532\n00:26:01.221 --> 00:26:04.015\nthat's the global list\nin Active Directory.\n\n533\n00:26:04.015 --> 00:26:09.237\nSo anybody you add to the global list\nis automatically allowed on all RODCs,\n\n534\n00:26:09.237 --> 00:26:11.585\nbecause of that entry.\n\n535\n00:26:11.585 --> 00:26:14.375\nThese others, Account Operators,\nAdministrators,\n\n536\n00:26:14.375 --> 00:26:18.815\nBackup Operators, Denied RODC,\nthat's the global deny list.\n\n537\n00:26:18.815 --> 00:26:22.896\nServer Operators, by default,\ntheir passwords will not be cached.\n\n538\n00:26:22.896 --> 00:26:26.673\nYou You don't want any administrative\naccounts being cached on the RODC.\n\n539\n00:26:26.673 --> 00:26:27.934\nRight?\nThat's the whole point.\n\n540\n00:26:27.934 --> 00:26:30.786\nSomebody could steal that machine or\nthat hard drive and\n\n541\n00:26:30.786 --> 00:26:33.099\nI don't want them finding those passwords.\n\n542\n00:26:33.099 --> 00:26:37.404\nAll right, so those are the only\nones that are there by default on\n\n543\n00:26:37.404 --> 00:26:40.930\nthe individual\nRODC Password Replication Policy.\n\n544\n00:26:40.930 --> 00:26:43.550\nIf we go take a look at those groups.\n\n545\n00:26:43.550 --> 00:26:46.685\nAll right,\nthey're in this users container.\n\n546\n00:26:46.685 --> 00:26:52.077\nThere's my allowed, and\nnotice there's nobody in here by default.\n\n547\n00:26:52.077 --> 00:26:58.494\nAll right, if I go to the denied there's\na bunch of them in there by default.\n\n548\n00:26:58.494 --> 00:27:02.895\nMy domain admins, my enterprise admins,\nmy schema admins,\n\n549\n00:27:02.895 --> 00:27:07.391\nit's gonna make sure that no\nRODC are those passwords cached.\n\n550\n00:27:07.391 --> 00:27:07.891\nRight?\n\n551\n00:27:07.891 --> 00:27:10.410\nSo those are those global lists.\n\n552\n00:27:10.410 --> 00:27:13.945\nSo if I wanna add somebody,\nlike my corporate help desk.\n\n553\n00:27:13.945 --> 00:27:17.200\nAll right, they might be the ones that run\naround to each one of these locations when\n\n554\n00:27:17.200 --> 00:27:19.605\nthere's a problem and\nthey've gotta fix things.\n\n555\n00:27:19.605 --> 00:27:23.907\nWhen they get out there, I wanna make sure\nthat they can log in, even if that WAN\n\n556\n00:27:23.907 --> 00:27:27.465\nlink is down, I wanna allow their\npassword, maybe to be cached out there.\n\n557\n00:27:27.465 --> 00:27:31.225\nSo I could go to this Allowed,\nand I can go to Members, and\n\n558\n00:27:31.225 --> 00:27:32.845\nI can add that help desk.\n\n559\n00:27:32.845 --> 00:27:35.728\nAll right, and I'll click OK.\n\n560\n00:27:35.728 --> 00:27:38.049\nAnd now they're a member of that group.\n\n561\n00:27:38.049 --> 00:27:43.672\nAnd if you remember back on\nthe properties of that server,\n\n562\n00:27:43.672 --> 00:27:47.130\nthat group is already set to allow.\n\n563\n00:27:47.130 --> 00:27:49.340\nSo now they would be allowed to be cached.\n\n564\n00:27:49.340 --> 00:27:51.616\nWe can also work with this list here.\n\n565\n00:27:51.616 --> 00:27:55.644\nRemember, this list only\naffects this one RODC.\n\n566\n00:27:55.644 --> 00:28:01.235\nIf I click advanced I can\nsee some other neat things.\n\n567\n00:28:01.235 --> 00:28:02.757\nNow let me go back for one second.\n\n568\n00:28:02.757 --> 00:28:05.573\nI can add or\nremove people from here as well.\n\n569\n00:28:05.573 --> 00:28:07.939\nJust for giggles I'll add my account.\n\n570\n00:28:07.939 --> 00:28:10.775\nLet's say I wanna,\nlet's say we wanna deny my account.\n\n571\n00:28:10.775 --> 00:28:17.172\nWe'll say deny, OK,\nfind that account and click OK.\n\n572\n00:28:17.172 --> 00:28:21.172\nAnd now my password,\nWill not be cached on this one RODC.\n\n573\n00:28:21.172 --> 00:28:25.000\nAny other RODCs, they can still\ncache it if I chose to allow it.\n\n574\n00:28:25.000 --> 00:28:28.316\nIt is an implicit deny, so\nyou do have to be allowed.\n\n575\n00:28:28.316 --> 00:28:33.089\nDenying it just ensures that it\nwould never be cached out there.\n\n576\n00:28:33.089 --> 00:28:35.965\nNow this advanced button lets\nme see some pretty neat things.\n\n577\n00:28:35.965 --> 00:28:38.323\nThere's two options on this policy.\n\n578\n00:28:38.323 --> 00:28:40.631\nUsage Tab, there is a drop down list.\n\n579\n00:28:40.631 --> 00:28:41.400\nYou've got one,\n\n580\n00:28:41.400 --> 00:28:44.687\naccounts who's passwords are stored\non this read only domain controller.\n\n581\n00:28:44.687 --> 00:28:50.340\nThese are accounts that have already\nbeen cached out there on that RODC.\n\n582\n00:28:50.340 --> 00:28:53.604\nIt's the Kerberos ticket granting\nticket service as well as\n\n583\n00:28:53.604 --> 00:28:56.172\nthe computer account itself for\nthat machine.\n\n584\n00:28:56.172 --> 00:29:00.506\nThe other drop down list,\naccounts that have been authenticated.\n\n585\n00:29:00.506 --> 00:29:01.630\nAnd there's a difference there.\n\n586\n00:29:01.630 --> 00:29:02.130\nRight?\n\n587\n00:29:02.130 --> 00:29:04.630\nWait, what's the difference\nbetween authenticated and stored?\n\n588\n00:29:04.630 --> 00:29:08.175\nThis would be users that authenticated\nfrom that branch office, but\n\n589\n00:29:08.175 --> 00:29:09.897\ntheir password wasn't cached.\n\n590\n00:29:09.897 --> 00:29:14.433\nAll right, so if my admin went out there\nand logged in, it would authenticated but\n\n591\n00:29:14.433 --> 00:29:18.671\nwould have to across the WAN link to do\nit and it would not cache his password.\n\n592\n00:29:18.671 --> 00:29:19.921\nSo it would be listed here.\n\n593\n00:29:19.921 --> 00:29:24.508\nHey, he actually logged in out there,\nbut I didn't save his password.\n\n594\n00:29:24.508 --> 00:29:27.994\nAll right, there's also a result and\nset a Policy tab, and\n\n595\n00:29:27.994 --> 00:29:29.964\nthis is where you can test it out.\n\n596\n00:29:29.964 --> 00:29:32.722\nWhat would happen if somebody\nwent out there and logged on,\n\n597\n00:29:32.722 --> 00:29:34.888\nwould it catch their password or\nwould it not?\n\n598\n00:29:34.888 --> 00:29:38.353\nSo let's do this,\nlet's test a little bit of this out.\n\n599\n00:29:38.353 --> 00:29:42.895\nWhat we're gonna do is I am going to,\nwhat's a good way to do this?\n\n600\n00:29:42.895 --> 00:29:44.638\nAll right, let's create a group.\n\n601\n00:29:44.638 --> 00:29:51.597\nI've got a group called, let's see\nwhat we got, I've got that Host group.\n\n602\n00:29:51.597 --> 00:29:54.638\nAnd in that host group, I've got nobody.\n\n603\n00:29:54.638 --> 00:29:56.557\nSo let's add somebody.\n\n604\n00:29:56.557 --> 00:29:59.011\nWho do I have?\n\n605\n00:29:59.011 --> 00:30:00.145\nI used my name.\n\n606\n00:30:00.145 --> 00:30:01.675\nLet's do this.\n\n607\n00:30:01.675 --> 00:30:05.750\nWe'll just take, help desk has Rob in it.\n\n608\n00:30:05.750 --> 00:30:07.778\nAnd Rob was one of those guys,\nso we'll do that.\n\n609\n00:30:07.778 --> 00:30:09.028\nWe'll use Help Desk.\n\n610\n00:30:09.028 --> 00:30:12.064\nWe'll say we wanna make sure that\ntheir passwords are cache out there.\n\n611\n00:30:12.064 --> 00:30:15.879\nSo I'm gonna go back over here\nto domain controllers and\n\n612\n00:30:15.879 --> 00:30:18.484\nI'm gonna pull up those properties.\n\n613\n00:30:18.484 --> 00:30:24.034\nAnd I'll go to password\nreplication policy and\n\n614\n00:30:24.034 --> 00:30:26.815\nI will click Advanced.\n\n615\n00:30:26.815 --> 00:30:30.060\nAnd here's another cool thing we can do,\nthis is what I was trying to show you and\n\n616\n00:30:30.060 --> 00:30:31.181\nI went the long way around.\n\n617\n00:30:31.181 --> 00:30:34.098\n>> [LAUGH]\n>> You can pre populate passwords.\n\n618\n00:30:34.098 --> 00:30:36.178\nLike that help desk person.\n\n619\n00:30:36.178 --> 00:30:39.092\nI mean they're gonna go out there and\nfix things when there are problems.\n\n620\n00:30:39.092 --> 00:30:42.018\nWhen they get out there,\ntheir password's allowed to be cached,\n\n621\n00:30:42.018 --> 00:30:43.179\nI added them to that list.\n\n622\n00:30:43.179 --> 00:30:45.861\nBut they've never been out there before.\n\n623\n00:30:45.861 --> 00:30:47.945\nNow there's a problem and\nthey're out there.\n\n624\n00:30:47.945 --> 00:30:51.771\nAnd they go to log on and they can't,\nbecause the WAN link is down.\n\n625\n00:30:51.771 --> 00:30:52.965\nThat's what they're there to fix.\n\n626\n00:30:52.965 --> 00:30:53.519\nRight?\n\n627\n00:30:53.519 --> 00:30:54.895\nSo how are they gonna log in?\n\n628\n00:30:54.895 --> 00:30:57.138\nThey've never logged in out there before,\nthe WAN link is down.\n\n629\n00:30:57.138 --> 00:31:00.349\nIt can't go back to the corporate\noffice to verify their password.\n\n630\n00:31:00.349 --> 00:31:04.775\nThat's where we can prepopulate them,\nwe can go to prepopulate passwords and\n\n631\n00:31:04.775 --> 00:31:05.906\nI can find out.\n\n632\n00:31:05.906 --> 00:31:08.949\nAnd you can't do groups with this,\nonly user accounts.\n\n633\n00:31:08.949 --> 00:31:13.447\nAnd I'll add Rob, it says do you wana\ngo ahead and send this out to the RODC?\n\n634\n00:31:13.447 --> 00:31:19.942\nAnd I'll say yes I do, and I'll click\nOK and we can go ahead and close that.\n\n635\n00:31:19.942 --> 00:31:22.636\nAnd I'm gonna close it up just\nto make sure those kick in.\n\n636\n00:31:22.636 --> 00:31:25.432\nAnd now let's take a look\nat that resultant set tab.\n\n637\n00:31:25.432 --> 00:31:29.672\nIf I go back over to password\nreplication policy and click Advanced.\n\n638\n00:31:29.672 --> 00:31:33.593\nAll right, I can see Rob's\nalready stored on the RODC,\n\n639\n00:31:33.593 --> 00:31:36.941\neven though he's never\nlogged onto that RODC.\n\n640\n00:31:36.941 --> 00:31:38.943\nThat was me pre-populating it.\n\n641\n00:31:38.943 --> 00:31:42.755\nIf I go to result and\nset up policy, I can click Add.\n\n642\n00:31:42.755 --> 00:31:44.493\nAnd let's see, I've got my account.\n\n643\n00:31:44.493 --> 00:31:46.213\nRemember, I denied my account.\n\n644\n00:31:46.213 --> 00:31:47.523\nLet's see what happens.\n\n645\n00:31:47.523 --> 00:31:52.104\nNotice it will not just quite\ncache my account out there.\n\n646\n00:31:52.104 --> 00:31:52.738\nRight?\n\n647\n00:31:52.738 --> 00:31:54.352\nLet's add another one.\n\n648\n00:31:54.352 --> 00:31:58.076\nLet's see, what about the domain admins or\nadministrator.\n\n649\n00:32:01.759 --> 00:32:03.681\nAll right, it's not gonna deny, or\n\n650\n00:32:03.681 --> 00:32:06.297\nit's not gonna allow that\npassword to be cached.\n\n651\n00:32:06.297 --> 00:32:08.343\nAll right, what else?\n\n652\n00:32:08.343 --> 00:32:10.259\nI think that's pretty good.\n\n653\n00:32:10.259 --> 00:32:11.932\nThe only thing we didn't\ndo is log on to this guy.\n\n654\n00:32:11.932 --> 00:32:13.269\nAnd let's do that real quick.\n\n655\n00:32:13.269 --> 00:32:16.347\nI'll log on as the administrator.\n\n656\n00:32:16.347 --> 00:32:18.215\nThat's fine.\n\n657\n00:32:18.215 --> 00:32:22.894\nAll right, so now I'm logged on as\nthe administrator Administrator.\n\n658\n00:32:22.894 --> 00:32:24.719\nDid it cache my password?\n\n659\n00:32:24.719 --> 00:32:26.046\nWell let's find out.\n\n660\n00:32:26.046 --> 00:32:33.346\nWe'll go back over here to Properties\n> Password replication > Advanced.\n\n661\n00:32:33.346 --> 00:32:36.444\nAccounts whose password is stored,\nI don't see administrator.\n\n662\n00:32:36.444 --> 00:32:39.216\nIf I hit that drop down list,\nhave I been authenticated?\n\n663\n00:32:39.216 --> 00:32:42.922\nYes, I have, but\nit didn't save my password.\n\n664\n00:32:42.922 --> 00:32:46.963\nAll right, so a lot to do there with those\nRODCs, the last thing I wanna show you and\n\n665\n00:32:46.963 --> 00:32:49.261\nI know Ronnie's giving\nme that evil eye here.\n\n666\n00:32:49.261 --> 00:32:50.222\n>> [LAUGH]\n>> Is,\n\n667\n00:32:50.222 --> 00:32:53.848\nlet's verify that this guy\nis actually read only.\n\n668\n00:32:53.848 --> 00:32:55.096\nI always like to do this.\n\n669\n00:32:55.096 --> 00:32:58.060\nI'm gonna open up active\ndirectory users and computers.\n\n670\n00:32:58.060 --> 00:33:01.523\nAnd I'm gonna go down here and\nlet's just go to groups and\n\n671\n00:33:01.523 --> 00:33:03.262\nI'll just make a new group.\n\n672\n00:33:03.262 --> 00:33:07.695\nAnd I'll call it my Test group and\nI'll click OK.\n\n673\n00:33:07.695 --> 00:33:09.882\nWait a second Ronnie.\n\n674\n00:33:09.882 --> 00:33:12.131\n>> Yeah, it looks like it made a group.\n\n675\n00:33:12.131 --> 00:33:12.972\n>> It sure did, didn't it?\n\n676\n00:33:12.972 --> 00:33:16.155\nI would have sworn this was\na read only main controller?\n\n677\n00:33:16.155 --> 00:33:16.941\n>> Me too.\n\n678\n00:33:16.941 --> 00:33:19.373\n>> A little trick, a little gotcha here.\n\n679\n00:33:19.373 --> 00:33:23.553\nIf we look closely at this console\nlook at what it's connected to.\n\n680\n00:33:23.553 --> 00:33:28.482\nEven though I'm on the RODC and I open up\nActive Directory, it said, wait a second.\n\n681\n00:33:28.482 --> 00:33:30.802\nMost likely you're gonna\nwanna make some changes.\n\n682\n00:33:30.802 --> 00:33:33.673\nI'm just gonna go ahead and\nconnect to a writeable copy and\n\n683\n00:33:33.673 --> 00:33:35.090\ndidn't bother telling me.\n\n684\n00:33:35.090 --> 00:33:40.236\nIf I switch domain controllers, and\nI force it to connect to the RODC,\n\n685\n00:33:40.236 --> 00:33:44.088\nit's gonna warn me,\nhey dummy, it's a read only.\n\n686\n00:33:44.088 --> 00:33:45.355\nAre you sure you want to?\n\n687\n00:33:45.355 --> 00:33:49.111\nSay yes, I do, and\nnow if I go back down to groups,\n\n688\n00:33:49.111 --> 00:33:51.987\nnotice all my buttons are grayed out.\n\n689\n00:33:51.987 --> 00:33:54.435\nIf I try to right-click I\ndon't have a New option.\n\n690\n00:33:54.435 --> 00:33:56.798\nIt's all gone so\njust be careful with that.\n\n691\n00:33:56.798 --> 00:33:59.473\nI've seen too many people go,\nI set up an RODC.\n\n692\n00:33:59.473 --> 00:34:03.795\nI open up Active Directory and\nI can make new users, reset passwords,\n\n693\n00:34:03.795 --> 00:34:04.976\nwhat's the deal?\n\n694\n00:34:04.976 --> 00:34:07.972\nMake sure you notice where\nyour console is pointed to.\n\n695\n00:34:07.972 --> 00:34:12.692\nIf necessary, point it back to the RODC,\nand you shouldn't see that it's read-only.\n\n696\n00:34:12.692 --> 00:34:15.621\n>> All right Mike,\nthat's actually a lot of information for\n\n697\n00:34:15.621 --> 00:34:18.151\njust setting up a read-only\ndomain controller.\n\n698\n00:34:18.151 --> 00:34:22.069\nBut great information for us, because it\nreally does help out on those situations\n\n699\n00:34:22.069 --> 00:34:25.873\nwhere we can really can't afford to let\nthat Active Directory get out there when\n\n700\n00:34:25.873 --> 00:34:27.917\nwe don't have all the security benefits or\n\n701\n00:34:27.917 --> 00:34:30.975\nall the features that we need at\none of those remote locations.\n\n702\n00:34:30.975 --> 00:34:34.298\nSo, read-only domain\ncontroller is kinda neat.\n\n703\n00:34:34.298 --> 00:34:38.271\nNotice that it really is the same process,\nafter we get those prerequisites set up.\n\n704\n00:34:38.271 --> 00:34:41.202\nAnd then to be able to improve\nthe performance on it.\n\n705\n00:34:41.202 --> 00:34:43.662\nRight?\nMike also showed us how we can actually\n\n706\n00:34:43.662 --> 00:34:47.124\nallow the caching of those passwords or\ndisallow the caching.\n\n707\n00:34:47.124 --> 00:34:50.433\nIn other words, preventing other people\nfrom also getting their passwords also\n\n708\n00:34:50.433 --> 00:34:51.463\nsent out to those sites.\n\n709\n00:34:51.463 --> 00:34:54.851\nAnd so it really does help in performance\na lot of of times and also limits\n\n710\n00:34:54.851 --> 00:34:58.930\nthe amount of information that gets passed\nover that read-only domain controller.\n\n711\n00:34:58.930 --> 00:35:02.696\nMike, any other words on read-only domain\ncontrollers, as far as the setup goes?\n\n712\n00:35:02.696 --> 00:35:05.137\n>> I don't think so,\njust be careful with the,\n\n713\n00:35:05.137 --> 00:35:08.494\nmake sure that the computer\naccount doesn't already exist.\n\n714\n00:35:08.494 --> 00:35:10.056\nThat's usually a big gotcha.\n\n715\n00:35:10.056 --> 00:35:12.818\nYou try to pre-stage that account and\nyou get the error.\n\n716\n00:35:12.818 --> 00:35:14.470\n>> [LAUGH]\n>> Also, check those DNS records,\n\n717\n00:35:14.470 --> 00:35:15.797\ncuz it doesn't really tell you.\n\n718\n00:35:15.797 --> 00:35:19.643\nAnd when you get this error, it's gonna\nsay it's having trouble and if you go look\n\n719\n00:35:19.643 --> 00:35:23.631\nyou'll find that there's some DNS records\nstill for that computer with that name.\n\n720\n00:35:23.631 --> 00:35:26.871\nAnd it can't create those new\nSRV records and those things, so\n\n721\n00:35:26.871 --> 00:35:29.149\njust make sure DNS gets\nflushed out as well.\n\n722\n00:35:29.149 --> 00:35:30.688\n>> All right, that sounds great.\n\n723\n00:35:30.688 --> 00:35:33.930\nThank you again Mike for those demos it\nreally did help us to understand a little\n\n724\n00:35:33.930 --> 00:35:35.608\nbit more, as well as the explanations.\n\n725\n00:35:35.608 --> 00:35:38.760\nBut that's a great place for\nus to go and end this episode.\n\n726\n00:35:38.760 --> 00:35:41.944\nSigning off for ITProTV I'm Ronnie Wong.\n\n727\n00:35:41.944 --> 00:35:42.732\n>> And I'm Mike Roderick.\n\n728\n00:35:42.732 --> 00:35:43.750\n>> And we'll see you next time.\n\n729\n00:35:43.750 --> 00:35:51.000\n[SOUND]\n\n",
          "vimeoId": "146125854"
        },
        {
          "description": "In this episode, Ronnie and Mike take a look at virtualizing Microsoft’s Active Directory.  Even though Active Directory replicates between Domain Controllers, there are times where running a virtualized Domain Controller it’s place, according to the guys.  They discuss the problems that exists where there are single points of failure that cause issues and that virtualizing the AD can help.  Another advantage virtualizing AD gives an organization is the ability to clone the DC and deploy multiple DCs quickly and easily.",
          "length": "2349",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-2-3-ad_virtualization-112515-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-2-3-ad_virtualization-112515-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-2-3-ad_virtualization-112515-1-sm.jpg",
          "title": "AD Virtualization",
          "transcript": "WEBVTT\n\n1\n00:00:00.212 --> 00:00:10.212\n[MUSIC]\n\n2\n00:00:11.712 --> 00:00:15.090\nWelcome to another great\nepisode here on ITProTV.\n\n3\n00:00:15.090 --> 00:00:17.350\nI'm your host, Ronnie Wong, and\n\n4\n00:00:17.350 --> 00:00:20.380\ntoday we're gonna be taking that\nworking with Active Directory.\n\n5\n00:00:20.380 --> 00:00:23.636\nWe're specifically going to be\ntalking about, well, Active Directory\n\n6\n00:00:23.636 --> 00:00:26.796\nvirtualization and all the things\nthat are actually involved in that.\n\n7\n00:00:26.796 --> 00:00:29.421\nAnd who better to help us than Mr.\nMike Rodrick?\n\n8\n00:00:29.421 --> 00:00:33.331\nNow Mike, I've worked with\nvirtualization a little bit, and\n\n9\n00:00:33.331 --> 00:00:37.210\nIs there a reason for\nme to virtualize Active Directory?\n\n10\n00:00:37.210 --> 00:00:38.490\n>> As far as the reasons,\n\n11\n00:00:38.490 --> 00:00:42.340\nI would think they would be the same\nas you would virtualize anything else.\n\n12\n00:00:42.340 --> 00:00:43.964\nWe've learned about virtualization and\n\n13\n00:00:43.964 --> 00:00:45.962\nhow it can help us take\nadvantage of our resources.\n\n14\n00:00:45.962 --> 00:00:50.504\nWe've got that physical machine\nthat has 4 quad core processors and\n\n15\n00:00:50.504 --> 00:00:55.540\n64 gigs of RAM I can't just install\nServer and run DNS on there, right?\n\n16\n00:00:55.540 --> 00:00:58.540\nAnd so we virtualize for several reasons.\n\n17\n00:00:58.540 --> 00:01:01.852\nTo take advantage of our\nhardware that we have available.\n\n18\n00:01:01.852 --> 00:01:05.160\nGosh, it makes packing up\neverything a whole lot easier,\n\n19\n00:01:05.160 --> 00:01:07.230\nit's a very scalable solution.\n\n20\n00:01:07.230 --> 00:01:09.710\nSo when it comes to\nvirtualizing Active Directory,\n\n21\n00:01:09.710 --> 00:01:11.480\nit's really along the same lines.\n\n22\n00:01:11.480 --> 00:01:14.590\nThe same reasons, we wanna be green,\nwe wanna reduce the number of\n\n23\n00:01:14.590 --> 00:01:17.990\nphysical servers that we\nhave in that server closet.\n\n24\n00:01:17.990 --> 00:01:22.370\nThe problem was early on in\nthe virtualization Active Directory\n\n25\n00:01:22.370 --> 00:01:26.490\nwas a little bit special and it didn't\nreally play well with the virtualization.\n\n26\n00:01:26.490 --> 00:01:31.032\nWe could get ourselves in trouble when we\nstarted virtualizing domain controllers.\n\n27\n00:01:31.032 --> 00:01:36.800\nPrimarily because a big advantage of\nvirtualization is snapshot capabilities.\n\n28\n00:01:36.800 --> 00:01:38.830\nWe can take a snapshot\nof a virtual machine or\n\n29\n00:01:38.830 --> 00:01:43.650\na virtual server before we do something\ndrastic to it or make some change.\n\n30\n00:01:43.650 --> 00:01:46.380\nAnd worst case scenario,\nwe can roll back to that snapshot.\n\n31\n00:01:46.380 --> 00:01:49.502\nThe problem is, with Active Directory\nwe've got that Active Directory\n\n32\n00:01:49.502 --> 00:01:52.587\ndatabase and it's replicating with\nthese other domain controllers.\n\n33\n00:01:52.587 --> 00:01:57.400\nAnd they use update sequence numbers and\ntimestamps to keep track of whether they\n\n34\n00:01:57.400 --> 00:02:00.232\nsuccessfully replicated\nwith their partner,\n\n35\n00:02:00.232 --> 00:02:02.796\nwhat changes still need to be replicated.\n\n36\n00:02:02.796 --> 00:02:05.421\nSo we're gonna run into issues there.\n\n37\n00:02:05.421 --> 00:02:06.711\nWhat's the other one?\n\n38\n00:02:06.711 --> 00:02:11.330\nThe big one is the RIDs,\nthe relative identifiers.\n\n39\n00:02:11.330 --> 00:02:16.420\nWe've talked in other episodes about how\nthe RID is the unique part of the SID or\n\n40\n00:02:16.420 --> 00:02:17.860\nthe security identifier.\n\n41\n00:02:17.860 --> 00:02:19.960\nAnd those numbers can never, ever be used.\n\n42\n00:02:19.960 --> 00:02:21.890\nWell, imagine having a domain controller.\n\n43\n00:02:21.890 --> 00:02:26.100\nAnd remember, we've talked about how a\ndomain controller talks to the RID master\n\n44\n00:02:26.100 --> 00:02:28.580\nand says, I need a pool of RIDs,\nso I can create a new object.\n\n45\n00:02:28.580 --> 00:02:29.720\nSo, he gives them ten at a time.\n\n46\n00:02:29.720 --> 00:02:32.750\nAnd let's say he's gone through\nthe first five, all right?\n\n47\n00:02:32.750 --> 00:02:36.295\nSo, the next one up,\nlet's just pretend is 1006.\n\n48\n00:02:36.295 --> 00:02:39.976\nWell then, all of the sudden,\nwe roll it back,\n\n49\n00:02:39.976 --> 00:02:45.803\nwe roll back to a snapshot and when he\ncomes back up online he's forgotten.\n\n50\n00:02:45.803 --> 00:02:49.122\n>> [LAUGH]\n>> That he's already used 1001, 1002,\n\n51\n00:02:49.122 --> 00:02:51.046\n1003, 1004, 1005.\n\n52\n00:02:51.046 --> 00:02:54.980\nAnd so he tries to reuse one of those\nnumbers and that can cause a big problem.\n\n53\n00:02:54.980 --> 00:02:58.370\nSo there were some issues with\nvirtualizing domain controllers.\n\n54\n00:02:58.370 --> 00:03:02.570\nPrimarily, again, it wasn't so much\nthe virtualization that was the problem.\n\n55\n00:03:02.570 --> 00:03:07.445\nIt was the other things that we can do\nwith the rolling back of the snapshots and\n\n56\n00:03:07.445 --> 00:03:10.004\nthings like that that caused a problem.\n\n57\n00:03:10.004 --> 00:03:14.520\nBut with 2012,\nin 2012 R2 it's virtualization aware.\n\n58\n00:03:14.520 --> 00:03:20.270\nWe now have an operating system that\nunderstands that it's a virtual machine.\n\n59\n00:03:20.270 --> 00:03:25.280\nAnd we have a virtualization\nplatform like Hyper-V that\n\n60\n00:03:25.280 --> 00:03:29.430\nuses something called a,\noh what's it called Ronnie?\n\n61\n00:03:29.430 --> 00:03:30.129\nI'm trying to thinking of that name.\n\n62\n00:03:30.129 --> 00:03:33.050\nIt's the generation ID.\n\n63\n00:03:33.050 --> 00:03:35.970\nI think it's the VM generation ID.\n\n64\n00:03:35.970 --> 00:03:37.500\nSorry, a little brain cramp there.\n\n65\n00:03:37.500 --> 00:03:42.440\nThat can help us where, if we have to\nroll back, it can take care of this\n\n66\n00:03:42.440 --> 00:03:46.890\nproblem that we were talking about, and\nI'll explain that here in just a second.\n\n67\n00:03:46.890 --> 00:03:49.860\nSo, when it comes to\nvirtualizing domain controllers,\n\n68\n00:03:49.860 --> 00:03:53.060\nit's really just like virtualizing\nanything else, right?\n\n69\n00:03:53.060 --> 00:03:55.020\nIn fact, all the domain controllers\nthat we use on the shows,\n\n70\n00:03:55.020 --> 00:03:59.940\nthe ones you've seen me use throughout all\nof these episodes, they're virtual, right?\n\n71\n00:03:59.940 --> 00:04:04.230\nSo it's not that it doesn't work or\nanything breaks because I virtualized it.\n\n72\n00:04:04.230 --> 00:04:08.030\nIt's just some considerations\nthat we've got to think about\n\n73\n00:04:08.030 --> 00:04:10.050\nwhen we do decide to virtualize\nour domain controllers.\n\n74\n00:04:10.050 --> 00:04:13.800\nSo their are some best practices\nthat we should follow.\n\n75\n00:04:13.800 --> 00:04:16.240\n>> Right,\nnow before we get started in on that,\n\n76\n00:04:16.240 --> 00:04:20.400\nlet's talk about what we just learned\nhere from Mike briefly, right?\n\n77\n00:04:20.400 --> 00:04:23.570\nVirtualization of\nActive Directory is not really\n\n78\n00:04:23.570 --> 00:04:26.540\nany different than virtualization\nof any other machine that we have.\n\n79\n00:04:26.540 --> 00:04:29.320\nWe're just gonna take that domain\ncontroller and we're gonna virtualize it.\n\n80\n00:04:29.320 --> 00:04:33.800\nThe other thing is, of course, by being\nable to virtualize these different\n\n81\n00:04:33.800 --> 00:04:37.171\nservers, we can run multiple\ncomputers on one machine.\n\n82\n00:04:37.171 --> 00:04:40.379\nAnd that really also helps,\nto be able to highly optimize or\n\n83\n00:04:40.379 --> 00:04:43.260\nto use that hardware\nmuch more effectively.\n\n84\n00:04:43.260 --> 00:04:45.650\nAnd finally, we take a look at\nthe idea of virtualization.\n\n85\n00:04:45.650 --> 00:04:49.100\nIt has a single management for us and\nthat we can actually go in there and\n\n86\n00:04:49.100 --> 00:04:52.143\ncontrol, and we don't have to\nworry about having to identify\n\n87\n00:04:52.143 --> 00:04:54.410\nmultiple different types of hardware.\n\n88\n00:04:54.410 --> 00:04:56.330\nIt really can help us out.\n\n89\n00:04:56.330 --> 00:04:59.595\nNow Mike,\nyou talk about best practices, but\n\n90\n00:04:59.595 --> 00:05:03.962\nare there some disadvantages\nto doing that virtualization?\n\n91\n00:05:03.962 --> 00:05:07.380\nAnd then I think that's where it's gonna\ndovetail into those best practices.\n\n92\n00:05:07.380 --> 00:05:08.510\n>> That's absolutely right.\n\n93\n00:05:08.510 --> 00:05:11.490\nThere are some special\nconsiderations we've gotta make, and\n\n94\n00:05:11.490 --> 00:05:12.618\nyou made some really good points.\n\n95\n00:05:12.618 --> 00:05:15.890\nAnother one that I'll throw in there\nis just the ability to have more domain\n\n96\n00:05:15.890 --> 00:05:16.570\ncontrollers, right?\n\n97\n00:05:16.570 --> 00:05:18.560\nWe've talked about best practices for\n\n98\n00:05:18.560 --> 00:05:22.060\na domain, minimum of two\ndomain controllers per domain.\n\n99\n00:05:22.060 --> 00:05:26.460\nReally it's two domain controllers\nper physical location or per site.\n\n100\n00:05:26.460 --> 00:05:28.254\nWell that means buying\na whole nother server.\n\n101\n00:05:28.254 --> 00:05:31.637\nIf I can virtualize this, it's easy\nto spin up another virtual machine,\n\n102\n00:05:31.637 --> 00:05:35.421\nassuming I've got enough memory and hard\ndrive space to spin up another machine.\n\n103\n00:05:35.421 --> 00:05:39.616\nSo it makes it really easy to have\nadditional domain controllers to give us\n\n104\n00:05:39.616 --> 00:05:43.950\nthat fault tolerance and that load\nbalancing that we'd like to have without\n\n105\n00:05:43.950 --> 00:05:47.944\nthe expense of another physical server,\nmultiple power supplies and\n\n106\n00:05:47.944 --> 00:05:49.046\nthings like that.\n\n107\n00:05:49.046 --> 00:05:52.274\nSo yes, there are some caveats,\nand it really comes back to, and\n\n108\n00:05:52.274 --> 00:05:55.740\nthat's really where the best\npractices kind of come into play.\n\n109\n00:05:55.740 --> 00:05:59.040\nBecause what we've got to think\nabout is single points of failure.\n\n110\n00:05:59.040 --> 00:06:02.910\nThat's the biggest thing we want to\nthink about and it's really easy,\n\n111\n00:06:02.910 --> 00:06:07.220\nwhen we go into virtualization, to\ncreate our own single points of failure.\n\n112\n00:06:07.220 --> 00:06:12.468\nIf we have a single physical host and\nwe put all of our virtual machines on that\n\n113\n00:06:12.468 --> 00:06:17.860\none host, if that physical host fails,\nI don't lose one server, right?\n\n114\n00:06:17.860 --> 00:06:19.365\nI lose all of my servers.\n\n115\n00:06:19.365 --> 00:06:22.410\nSo if I have two domain controllers,\nboth virtualized and\n\n116\n00:06:22.410 --> 00:06:26.710\nthey're both on that same host, if I lose\nthe host, I lose both domain controllers.\n\n117\n00:06:26.710 --> 00:06:27.520\nThat's not good, right?\n\n118\n00:06:27.520 --> 00:06:28.930\nSingle point of failure.\n\n119\n00:06:28.930 --> 00:06:33.130\nSo we want to make sure we're putting\nthese virtualized domain controllers on\n\n120\n00:06:33.130 --> 00:06:38.394\nseparate physical posts, separate\nphysical platforms for virtualization.\n\n121\n00:06:38.394 --> 00:06:39.920\nEliminates that.\n\n122\n00:06:39.920 --> 00:06:42.640\nSeparate physical locations\nwould be ideal, right?\n\n123\n00:06:42.640 --> 00:06:44.900\nBecause think about disasters.\n\n124\n00:06:44.900 --> 00:06:47.990\nSo yes, in my server closet I've\ngot two separate physical hosts,\n\n125\n00:06:47.990 --> 00:06:49.890\na domain controller on each one.\n\n126\n00:06:49.890 --> 00:06:53.620\nBut if my server closet goes up in flames,\nI've lost both physical hosts,\n\n127\n00:06:53.620 --> 00:06:56.330\nwhich means I lost both\ndomain controllers again.\n\n128\n00:06:56.330 --> 00:06:58.860\nSo single point of failure.\n\n129\n00:07:00.120 --> 00:07:04.850\nMost recommendations will say keep at\nleast one physical domain controller.\n\n130\n00:07:04.850 --> 00:07:07.490\nThat way, if something happens\nto my virtualization platform,\n\n131\n00:07:07.490 --> 00:07:11.825\nto the hardware that's being virtualized,\nany of that goes wrong,\n\n132\n00:07:11.825 --> 00:07:15.535\nI've got a physical domain\ncontroller still that I can get to.\n\n133\n00:07:15.535 --> 00:07:18.255\nAnd, Ronnie, you're shaking your head\nlike you've dealt with this one before.\n\n134\n00:07:18.255 --> 00:07:21.605\n>> Mike, there's no doubt I've\nactually dealt with this issue before.\n\n135\n00:07:21.605 --> 00:07:24.545\nWell, just like anybody that's\nactually interested in technology,\n\n136\n00:07:24.545 --> 00:07:28.155\nI jumped right into virtualization,\nhead deep into it.\n\n137\n00:07:28.155 --> 00:07:30.805\nAnd decided one of the very first\nthings I should do as infrastructure\n\n138\n00:07:30.805 --> 00:07:32.475\nis build a domain controller virtualized.\n\n139\n00:07:32.475 --> 00:07:37.630\nWhich was great, it ran perfectly and\nwe thought, hey, this is the way to go.\n\n140\n00:07:37.630 --> 00:07:41.096\nIt runs perfectly until you actually\nend up with things like power outages.\n\n141\n00:07:41.096 --> 00:07:45.714\nAnd now all the sudden the host machine\non that virtualization that you did,\n\n142\n00:07:45.714 --> 00:07:47.444\nit is joined to the domain and\n\n143\n00:07:47.444 --> 00:07:51.004\nnow your virtualized server\ndoesn't come up right away.\n\n144\n00:07:51.004 --> 00:07:55.237\nAnd so we had to learn a little bit of\nthe hard way that we did need a secondary\n\n145\n00:07:55.237 --> 00:07:57.030\nphysical domain controller.\n\n146\n00:07:57.030 --> 00:08:00.780\nAnd these are things that you only learn\nafter experiencing it, don't get me wrong.\n\n147\n00:08:00.780 --> 00:08:04.548\nI bet if I had more experience in\nvirtualization when I jumped into it\n\n148\n00:08:04.548 --> 00:08:07.788\nI might've realized that But\nsometimes you just learn and\n\n149\n00:08:07.788 --> 00:08:09.457\nyou die by it at the same time.\n\n150\n00:08:09.457 --> 00:08:12.510\nAnd then, everything comes back up and\nnow you're ready to go.\n\n151\n00:08:12.510 --> 00:08:14.002\nBut, you do have to take\na little bit of time.\n\n152\n00:08:14.002 --> 00:08:17.745\nBut, this is some of the best things that\nyou can do is understand best practices,\n\n153\n00:08:17.745 --> 00:08:19.680\nespecially with Active Directory.\n\n154\n00:08:19.680 --> 00:08:26.600\nThe changing nature of Active Directory is\nso always constantly changing that way.\n\n155\n00:08:26.600 --> 00:08:29.920\nIt's hard to sit and go I'm just\ngonna take that static snapshot and\n\n156\n00:08:29.920 --> 00:08:32.540\nthen I'll just bring another one up,\nand now everything's changed.\n\n157\n00:08:32.540 --> 00:08:34.210\nIt's not a great idea.\n\n158\n00:08:34.210 --> 00:08:36.330\nSo, having dealt with that frustration,\n\n159\n00:08:36.330 --> 00:08:38.210\nmake sure you pay attention\nto these best practices.\n\n160\n00:08:38.210 --> 00:08:39.500\n>> Learn from Ronnie's mistakes, right?\n\n161\n00:08:39.500 --> 00:08:40.060\n>> Yes.\n\n162\n00:08:40.060 --> 00:08:41.730\n>> And he brings up another great point.\n\n163\n00:08:41.730 --> 00:08:44.500\nIs the host part of my domain?\n\n164\n00:08:44.500 --> 00:08:47.110\nThat's something that you've gotta\nthink about, because if it is, and\n\n165\n00:08:47.110 --> 00:08:48.020\nas Ronny found out.\n\n166\n00:08:48.020 --> 00:08:51.680\nIf the host is part of the domain,\nwell if that host reboots,\n\n167\n00:08:51.680 --> 00:08:54.300\nit's booting up before\nthe virtual machine start,\n\n168\n00:08:54.300 --> 00:08:58.850\nwhich means there is no domain controller\nfor the host to authenticate with, right?\n\n169\n00:08:58.850 --> 00:09:01.570\nYou get in this little circle\nwhere it's not gonna work.\n\n170\n00:09:01.570 --> 00:09:06.810\nSo yes, maintain a physical DC, decide\nwhether or not the host machine should\n\n171\n00:09:06.810 --> 00:09:11.460\neven be a part of your domain or should be\noutside of that, that might be a solution.\n\n172\n00:09:11.460 --> 00:09:12.570\nEspecially if you go into cloud,\n\n173\n00:09:12.570 --> 00:09:15.600\nthings like that, those host\nmachines aren't part of your domain.\n\n174\n00:09:15.600 --> 00:09:18.210\nSo you might end up doing\nthe same thing internally,\n\n175\n00:09:18.210 --> 00:09:21.870\nis not making the host machine\nA part of your domain.\n\n176\n00:09:21.870 --> 00:09:23.230\n>> Good idea.\n\n177\n00:09:23.230 --> 00:09:25.960\n>> Local admin on the host, that's\nanother thing we've got to think about.\n\n178\n00:09:25.960 --> 00:09:30.030\nIf it's not part of my domain, well, I've\ngot a local administrator account that I\n\n179\n00:09:30.030 --> 00:09:33.700\ncan log on to that physical server,\nthe one that's running hyper V.\n\n180\n00:09:33.700 --> 00:09:38.640\nWell, if I can log on as an administrator\non to that physical machine\n\n181\n00:09:38.640 --> 00:09:41.320\nThere's a good chance that I can figure\nout how to get access to the virtual\n\n182\n00:09:41.320 --> 00:09:43.170\nmachines that are running on it, right?\n\n183\n00:09:43.170 --> 00:09:46.980\nAt least I can delete the virtual\nmachine or shut them down or\n\n184\n00:09:46.980 --> 00:09:49.660\ndisconnect their network adapter,\nyou know, things like that.\n\n185\n00:09:49.660 --> 00:09:52.820\nThings that I would do through\nthe Hyper-V interface.\n\n186\n00:09:52.820 --> 00:09:56.600\nSo now all of a sudden you gotta think\nof that local admin account on that\n\n187\n00:09:56.600 --> 00:09:58.610\nphysical host.\n\n188\n00:09:58.610 --> 00:10:02.140\nAs being as security conscious or\nthat's not a good way to say it,\n\n189\n00:10:02.140 --> 00:10:04.980\nbut as important as\nthe domain admin itself.\n\n190\n00:10:04.980 --> 00:10:06.100\nAll right?\n\n191\n00:10:06.100 --> 00:10:08.230\nBecause again,\nif I can log onto that physical host,\n\n192\n00:10:08.230 --> 00:10:10.370\nI can just shut your\ndomain controllers down.\n\n193\n00:10:10.370 --> 00:10:11.720\nDelete their virtual hard drives,\n\n194\n00:10:11.720 --> 00:10:15.620\nI don't even need a domain account\nto ruin your day, all right?\n\n195\n00:10:15.620 --> 00:10:18.510\nSo you've got to worry about\nsecurity on that physical host.\n\n196\n00:10:18.510 --> 00:10:22.700\nAnd treat that local admin account just\nlike you would a domain admin account,\n\n197\n00:10:22.700 --> 00:10:25.510\nthe host itself really\nshouldn't do anything else,\n\n198\n00:10:25.510 --> 00:10:28.620\nthis is more of a performance thing\nthen a security or best practice.\n\n199\n00:10:28.620 --> 00:10:32.820\nBut you don't want the host machine\nthat's hosting all your VMs to\n\n200\n00:10:32.820 --> 00:10:35.930\nbe doing much of anything\nother than hosting VMs.\n\n201\n00:10:35.930 --> 00:10:39.890\nCuz remember it's resources get\ndivided up amongst all the virtual\n\n202\n00:10:39.890 --> 00:10:44.040\nMachines that you're running, so the fewer\nresources that the host is using,\n\n203\n00:10:44.040 --> 00:10:47.090\nthe more I have to give\nto my virtual machines.\n\n204\n00:10:47.090 --> 00:10:51.710\nIf the host machine ever gets busy, then\nthat's gonna affect the performance of\n\n205\n00:10:51.710 --> 00:10:54.000\nall of the virtual machines\nthat are running on it.\n\n206\n00:10:54.000 --> 00:10:55.730\nSo you really wanna\nminimize what it's doing.\n\n207\n00:10:55.730 --> 00:10:59.230\n>> All right, so Mike, what you mean\nby that is to make sure that the host,\n\n208\n00:10:59.230 --> 00:11:02.930\nthe one that's doing the virtualization\n>> Is not running, or we're not actually\n\n209\n00:11:02.930 --> 00:11:06.296\ninstalling another role like DNS, or\nit shouldn't become your web server.\n\n210\n00:11:06.296 --> 00:11:07.301\n>> [LAUGH] Exactly right.\n\n211\n00:11:07.301 --> 00:11:08.060\n>> [LAUGH]\n>> We're just\n\n212\n00:11:08.060 --> 00:11:09.970\ngonna minimize what that guy is doing.\n\n213\n00:11:09.970 --> 00:11:13.380\nSo we don't have any contention for\nany of those resources.\n\n214\n00:11:13.380 --> 00:11:17.750\nAnother thing would be read only domain\ncontrollers might be another good use for\n\n215\n00:11:17.750 --> 00:11:19.240\nthis, and I'm gonna virtualize them.\n\n216\n00:11:20.340 --> 00:11:26.802\nBecause Again, cuz of security, that local\nadmin has access to the Hyper-V platform.\n\n217\n00:11:26.802 --> 00:11:30.570\nWell, if the domain controller that\nyou're virtualizing is read only,\n\n218\n00:11:30.570 --> 00:11:32.530\nthen even if he does figure out\nhow to get access to the VM,\n\n219\n00:11:32.530 --> 00:11:35.500\nhe can't make changes in\nActive Directory or anything like that.\n\n220\n00:11:35.500 --> 00:11:37.450\nSo, that might help a little bit.\n\n221\n00:11:37.450 --> 00:11:40.750\nBut, that doesn't mean all your\nvirtualized domain controllers have to be\n\n222\n00:11:40.750 --> 00:11:41.790\nread only.\n\n223\n00:11:41.790 --> 00:11:45.060\nIt's just another best\npractice you could do.\n\n224\n00:11:45.060 --> 00:11:46.460\nDon't use snapshots, right?\n\n225\n00:11:46.460 --> 00:11:47.660\nThat's the biggest thing.\n\n226\n00:11:47.660 --> 00:11:49.380\nWe cannot use snapshots.\n\n227\n00:11:49.380 --> 00:11:51.340\nIf there's a way, disable it.\n\n228\n00:11:51.340 --> 00:11:54.650\nMake sure you teach all your other\nadmins about the fact that yeah,\n\n229\n00:11:54.650 --> 00:11:57.910\nwe're not gonna use snapshots\non our domain controllers.\n\n230\n00:11:57.910 --> 00:12:03.030\nAlthough I will tell you,\nThat 2012 R2 is virtualization aware.\n\n231\n00:12:03.030 --> 00:12:07.690\nAnd it has some cool features that will\nallow you to roll these machines back.\n\n232\n00:12:07.690 --> 00:12:10.500\nYou can now go back to a snapshot and\n\n233\n00:12:10.500 --> 00:12:15.230\nwhat it'll do is it'll detect that roll\nback and it will wipe our the rid pool so\n\n234\n00:12:15.230 --> 00:12:18.240\nthat it doesn't try to use\nany of those rids again.\n\n235\n00:12:18.240 --> 00:12:21.100\nIt will change its update\nsequence number So\n\n236\n00:12:21.100 --> 00:12:25.440\nthat to the rest of the domain controllers\nit looks like a new domain controller.\n\n237\n00:12:25.440 --> 00:12:28.990\nAnd they'll replicate all changes that\nneed to be made back to that guy.\n\n238\n00:12:28.990 --> 00:12:32.970\nSo, you actually can with 2012 R2,\nuse snapshots on DCs.\n\n239\n00:12:34.020 --> 00:12:36.530\nBut Microsoft added all these features.\n\n240\n00:12:36.530 --> 00:12:39.790\nAnd they'll still tell you, best practice,\ndon't use snapshots, right?\n\n241\n00:12:39.790 --> 00:12:43.740\nSo worst case scenario, you can,\nbut I would avoid them.\n\n242\n00:12:43.740 --> 00:12:47.460\nDisable time synchronization, that's\nanother one that we've gotta worry about.\n\n243\n00:12:47.460 --> 00:12:49.875\nBy default, with most of your\nvirtualization platforms,\n\n244\n00:12:49.875 --> 00:12:54.500\nHyper-V included, the guest machines,\nthe guest operating systems\n\n245\n00:12:54.500 --> 00:12:59.150\nSync their time with the host machine,\nthe Hyper-V platform, right.\n\n246\n00:12:59.150 --> 00:13:02.640\nWell that guy is most likely\nnot part of your domain, so\n\n247\n00:13:02.640 --> 00:13:06.260\nhis time is not synchronized\nwith the PDC emulator and\n\n248\n00:13:06.260 --> 00:13:10.740\nthe rest of the domain and we need those\ndomain controllers to be synchronized.\n\n249\n00:13:10.740 --> 00:13:14.150\nSo if we disable the time synchronization,\nit's a check mark.\n\n250\n00:13:14.150 --> 00:13:17.590\nIn your properties, most of the the time\non your VMs themselves, whether you want\n\n251\n00:13:17.590 --> 00:13:22.682\nthe guest operating system to\nsynchronize with the Hyper-V platform.\n\n252\n00:13:22.682 --> 00:13:23.650\nUncheck that.\n\n253\n00:13:23.650 --> 00:13:27.000\nThe domain controller will still\nsynchronize its time with whichever domain\n\n254\n00:13:27.000 --> 00:13:31.100\ncontroller is running the PDC emulator and\nhe won't bother trying to synchronize\n\n255\n00:13:31.100 --> 00:13:34.270\nWith that host machine, so that keeps\ntime synchronized throughout your domain.\n\n256\n00:13:34.270 --> 00:13:36.950\nSo just a few of the things\nthat you've gotta think about\n\n257\n00:13:36.950 --> 00:13:39.630\nwhen you decide to virtualize\na domain controller.\n\n258\n00:13:39.630 --> 00:13:43.430\nAnd other than that,\nit's pretty straightforward.\n\n259\n00:13:43.430 --> 00:13:45.150\nIt's no different than anything else.\n\n260\n00:13:45.150 --> 00:13:49.300\nI mean, when I make my shows here,\nI create a new virtual machine.\n\n261\n00:13:49.300 --> 00:13:51.040\nI install Server 2012.\n\n262\n00:13:51.040 --> 00:13:53.510\nI'm gonna just go add roles and\nfeatures and install Active Directory.\n\n263\n00:13:53.510 --> 00:13:54.870\nIt's no different.\n\n264\n00:13:54.870 --> 00:13:58.990\nThere's just some things I've gotta keep\nin mind in a production environment so\n\n265\n00:13:58.990 --> 00:14:02.290\nthat it doesn't come back to bite me,\nthe fact that I've virtualized these.\n\n266\n00:14:02.290 --> 00:14:03.050\nAnd in fact, Ronnie,\n\n267\n00:14:03.050 --> 00:14:06.740\nthere's some really cool things I\ncan do because we're virtualizing.\n\n268\n00:14:06.740 --> 00:14:11.380\nAnd with 2012R2, we now have the ability\nto clone domain controllers.\n\n269\n00:14:11.380 --> 00:14:15.000\n>> Why in the world would I choose\nto clone a domain controller?\n\n270\n00:14:15.000 --> 00:14:16.980\nCloning is the latest rage, right?\n\n271\n00:14:16.980 --> 00:14:19.186\nWe all want to have a little,\nbaby Mini-Me, or something.\n\n272\n00:14:19.186 --> 00:14:20.720\n[LAUGH]\n>> [LAUGH] You know, I,\n\n273\n00:14:20.720 --> 00:14:21.880\nI understand that thought.\n\n274\n00:14:21.880 --> 00:14:26.190\nBut if there are issues, right, in which,\nthe, those RIDS that you talked about\n\n275\n00:14:26.190 --> 00:14:29.940\nare gonna change,\nare there issues when we have duplicates?\n\n276\n00:14:29.940 --> 00:14:33.140\n>> There, there definitely would be if you\ndid, but because of this cloning process.\n\n277\n00:14:33.140 --> 00:14:34.250\n>> We don't have to worry about that.\n\n278\n00:14:34.250 --> 00:14:35.010\n>> Okay.\n>> And that's.\n\n279\n00:14:35.010 --> 00:14:35.850\nThat's the cool thing.\n\n280\n00:14:35.850 --> 00:14:39.480\nIt's a new thing for Microsoft that\nthey give us the ability to clone these.\n\n281\n00:14:39.480 --> 00:14:45.060\nCuz in the past, you couldn't when you\nwanted to roll out a new virtual servers.\n\n282\n00:14:45.060 --> 00:14:47.130\nYou could Sysprep a member serve, right?\n\n283\n00:14:47.130 --> 00:14:51.323\nI can run Sysprep on it,\nstrip out all that unique information,\n\n284\n00:14:51.323 --> 00:14:55.672\nboot up a new copy of that drive\nRebuilds the SID or the unique IDs and\n\n285\n00:14:55.672 --> 00:14:57.941\neverything and we're good to go.\n\n286\n00:14:57.941 --> 00:14:59.299\nCan't do that with Active Directory.\n\n287\n00:14:59.299 --> 00:15:01.794\nI can't just Sysprep\na domain controller and\n\n288\n00:15:01.794 --> 00:15:05.022\nthen boot up multiple copies of that guy,\ndoesn't work.\n\n289\n00:15:05.022 --> 00:15:06.799\nBut this cloning process does.\n\n290\n00:15:06.799 --> 00:15:10.628\nAnd there's some technology in\nthe background, some PowerShell commands\n\n291\n00:15:10.628 --> 00:15:13.869\nthat we're gonna run that gives\nus this ability to clone these.\n\n292\n00:15:13.869 --> 00:15:15.040\nIt'll help us.\n\n293\n00:15:15.040 --> 00:15:16.580\nStrip out that information.\n\n294\n00:15:16.580 --> 00:15:19.180\nPrepare that machine to be cloned.\n\n295\n00:15:19.180 --> 00:15:20.220\nAnd then allow us to.\n\n296\n00:15:20.220 --> 00:15:21.380\nAnd why?\n\n297\n00:15:21.380 --> 00:15:24.560\nBecause I can deploy out multiple\ndomain controllers very rapidly.\n\n298\n00:15:24.560 --> 00:15:28.220\nA lot faster than trying\nto spin up new machines or\n\n299\n00:15:28.220 --> 00:15:30.280\ntake a disc to physical machines.\n\n300\n00:15:30.280 --> 00:15:30.920\nAnd things like that.\n\n301\n00:15:30.920 --> 00:15:36.420\nSo it's really all about the ability to\ndeploy out multiple domain controllers.\n\n302\n00:15:36.420 --> 00:15:37.720\nIn a short amount of time.\n\n303\n00:15:37.720 --> 00:15:40.310\nSo, if you don't have that need,\nif you're a small shop and\n\n304\n00:15:40.310 --> 00:15:41.820\nyou've got two domain controllers,\n\n305\n00:15:41.820 --> 00:15:45.950\nthere might not be a need to go through\nthis process and create the clone.\n\n306\n00:15:45.950 --> 00:15:49.590\nBut, that being said, for fall tolerance,\n\n307\n00:15:49.590 --> 00:15:54.400\nmaybe I wanna set up a DC that's ready to\nbe cloned in the event I have a failure.\n\n308\n00:15:54.400 --> 00:15:55.870\nI can just clone a new one out.\n\n309\n00:15:55.870 --> 00:15:59.288\nOr as we grow and we add that branch\noffice, I can clone up a new DC.\n\n310\n00:15:59.288 --> 00:16:03.011\nSo just have to see if it's something\nyou need in your environment.\n\n311\n00:16:03.011 --> 00:16:06.784\nAnd I want to show you guys how to\ngo through This cloning process.\n\n312\n00:16:06.784 --> 00:16:11.373\nCuz it's not terribly difficult but\nit is, I don't want to say clunky, but\n\n313\n00:16:11.373 --> 00:16:16.197\nthere are a few steps that you have to go\nthrough that you just have to be aware of.\n\n314\n00:16:16.197 --> 00:16:18.420\nOnce you're aware of it,\nit's really not that big of a deal.\n\n315\n00:16:18.420 --> 00:16:19.780\nIt's pretty darn easy.\n\n316\n00:16:19.780 --> 00:16:22.970\n>> All right Mike, so\nif we're going to do this,\n\n317\n00:16:22.970 --> 00:16:26.790\nthere's gotta be some special requirements\nthat we've got to actually understand.\n\n318\n00:16:26.790 --> 00:16:28.520\nIt's probably not as easy\nas right-clicking and\n\n319\n00:16:28.520 --> 00:16:31.300\nsaying clone that thing, and\nthen we're ready to go, right?\n\n320\n00:16:31.300 --> 00:16:33.685\n>> Maybe in 2016, but not yet, right?\n\n321\n00:16:33.685 --> 00:16:35.400\n>> [LAUGH]\n>> First thing you have to have is\n\n322\n00:16:35.400 --> 00:16:39.470\na source domain controller, the one you're\ngonna create these copies or clones of.\n\n323\n00:16:39.470 --> 00:16:42.770\nThat needs to be running 2012 or\nlater, right?\n\n324\n00:16:42.770 --> 00:16:45.990\nSo, the domain controller\nhas to be 2012 or later.\n\n325\n00:16:45.990 --> 00:16:47.090\nIt has to be virtualized.\n\n326\n00:16:47.090 --> 00:16:50.140\nThis can not be a physical machine\nthat I'm creating a clone of.\n\n327\n00:16:50.140 --> 00:16:53.808\nSo, it has to be a virtual domain\ncontroller that's running 2012 r2,\n\n328\n00:16:53.808 --> 00:16:55.315\nI'm sorry 2012 or later.\n\n329\n00:16:55.315 --> 00:16:57.794\nIt could be 2012 or 2012 r2,\n\n330\n00:16:57.794 --> 00:17:03.870\nthe virtualization platform has to support\nsomething called VM-Generation ID.\n\n331\n00:17:03.870 --> 00:17:05.310\nI mentioned that earlier.\n\n332\n00:17:05.310 --> 00:17:09.160\nAnd that's how it can detect those\nif we ever we roll something back.\n\n333\n00:17:09.160 --> 00:17:13.895\nBut Hyper-V 3.0 supports VM Generation ID.\n\n334\n00:17:13.895 --> 00:17:17.710\nVM-Sphere, and let me double check, 5.1.\n\n335\n00:17:17.710 --> 00:17:19.290\nYes.\nAlso supports this.\n\n336\n00:17:19.290 --> 00:17:25.140\nSo this is something that even the other\nvirtualization platforms are including so\n\n337\n00:17:25.140 --> 00:17:28.980\nthat we can use their platform and\nstill do cloning of domain controllers.\n\n338\n00:17:28.980 --> 00:17:33.430\nSo Hyper-V 3.0 or VM Sphere 5.1 or\nlater both support it.\n\n339\n00:17:33.430 --> 00:17:36.950\nAnd I'm not sure about some of the other\nplatforms, check their documentation.\n\n340\n00:17:36.950 --> 00:17:40.020\nAll you gotta do is, they're probably\nnot gonna say we support cloning, but\n\n341\n00:17:40.020 --> 00:17:42.690\nsee if they support the VM Generation ID.\n\n342\n00:17:42.690 --> 00:17:46.320\nAnd if the platform you're using\nsupports that, then we can do cloning.\n\n343\n00:17:46.320 --> 00:17:46.890\n>> Nice.\n\n344\n00:17:46.890 --> 00:17:51.220\n>> Other thing that we're gonna need,\nthe PDC emulator role.\n\n345\n00:17:51.220 --> 00:17:55.740\nRemember, that's one of my FSMOs,\nmy Flexible Single Master Operations.\n\n346\n00:17:55.740 --> 00:17:59.670\nThat role needs to be\navailable to the source DC,\n\n347\n00:17:59.670 --> 00:18:04.170\nthe one we're going to be cloning as\nwell as the new clones as they come up.\n\n348\n00:18:04.170 --> 00:18:08.120\nSo in other words, I can't be cloning the\none that's holding the PDC emulator role.\n\n349\n00:18:08.120 --> 00:18:09.970\nAnd that one has to be online and\n\n350\n00:18:09.970 --> 00:18:13.060\naccessible to wherever we're\ndoing this cloning at.\n\n351\n00:18:13.060 --> 00:18:16.903\nSo just make sure you know which domain\ncontrol has the PDC emulator roll and\n\n352\n00:18:16.903 --> 00:18:19.630\nmake sure that it’s online and accessible.\n\n353\n00:18:19.630 --> 00:18:24.190\nAnd that’s really it as far\nas the requirements go,\n\n354\n00:18:24.190 --> 00:18:27.205\nas far as the steps go,\nlet's just go through them.\n\n355\n00:18:27.205 --> 00:18:29.175\nThere's not that many.\n\n356\n00:18:29.175 --> 00:18:33.596\nIt can be a little bit, at least for show\npurposes, a little time consuming here,\n\n357\n00:18:33.596 --> 00:18:36.496\nbut once you get the source\ndomain controller set up.\n\n358\n00:18:36.496 --> 00:18:39.805\nAnd that's what's really cool about this,\nis we're going to take one of my domain\n\n359\n00:18:39.805 --> 00:18:43.595\ncontrollers, and we're going to say this\nis going to be my source for new clones.\n\n360\n00:18:43.595 --> 00:18:47.800\nAnd once I've done that,\nI can clone it as many times as I want.\n\n361\n00:18:47.800 --> 00:18:50.630\nI can leave it in that state, so\nthat anytime I need a new clone,\n\n362\n00:18:50.630 --> 00:18:52.610\nI am just going to clone it, right?\n\n363\n00:18:52.610 --> 00:18:54.780\nSo again,\nonce you go through the initial steps,\n\n364\n00:18:54.780 --> 00:19:00.190\nit really doesn't take that long to start\nrolling out multiple domain controllers.\n\n365\n00:19:00.190 --> 00:19:02.350\nAll right, so\nlet's take a look at my screen here, and\n\n366\n00:19:02.350 --> 00:19:04.530\nwe'll see how we go about this process.\n\n367\n00:19:04.530 --> 00:19:07.070\nI'm on my Hyper-V Manager console.\n\n368\n00:19:07.070 --> 00:19:10.113\nThis is a server that's running 2012 r2.\n\n369\n00:19:10.113 --> 00:19:11.650\nI have two domain controllers.\n\n370\n00:19:11.650 --> 00:19:15.760\nI have dc01 which was my first\ndomain controller in my forest, so\n\n371\n00:19:15.760 --> 00:19:20.122\nit has all 5 FSMOs including\nthat PDC emulator role, and\n\n372\n00:19:20.122 --> 00:19:25.680\nthen I've got another domain controller in\nthe same domain that's called dcsource and\n\n373\n00:19:25.680 --> 00:19:28.140\nthat's gonna be the one\nthat I want to clone.\n\n374\n00:19:29.230 --> 00:19:33.350\nThe first thing we're going to do is\nI'm going to connect over to dc1,\n\n375\n00:19:33.350 --> 00:19:38.470\nmy domain controller that's\nnot being cloned, but\n\n376\n00:19:38.470 --> 00:19:41.110\nreally I could do this from any\ndomain controller, doesn't matter.\n\n377\n00:19:41.110 --> 00:19:45.339\nAnd I need to add the source\ndomain controller to a new\n\n378\n00:19:45.339 --> 00:19:50.256\ngroup that's created in\nActive Directory in 2012 r2.\n\n379\n00:19:50.256 --> 00:19:54.891\nI forgot to mention that force functional\nlevel needs to be 2012 as well,\n\n380\n00:19:54.891 --> 00:19:59.370\ncuz that's where I get,\nthat schema update gives me this group.\n\n381\n00:19:59.370 --> 00:20:02.870\nIn my users group container,\nthere is a group called\n\n382\n00:20:02.870 --> 00:20:09.950\nthe Clonable Domain Controllers, and\nI need to add the server to this.\n\n383\n00:20:09.950 --> 00:20:13.700\nSo I'm gonna click Add,\nand find my dc-source.\n\n384\n00:20:13.700 --> 00:20:16.780\nRemember this guy doesn't look for\ncomputer objects by default so\n\n385\n00:20:16.780 --> 00:20:17.910\nwe'll add that in there.\n\n386\n00:20:19.700 --> 00:20:21.480\nCheck that names, and it finds that guy.\n\n387\n00:20:21.480 --> 00:20:22.740\nAll right?\n\n388\n00:20:22.740 --> 00:20:25.670\nSo I'm adding the one\nthat I plan on cloning\n\n389\n00:20:25.670 --> 00:20:29.180\nto a group called\nClonable Domain Controllers, and\n\n390\n00:20:29.180 --> 00:20:33.170\nthat’s found in my Users\ncontainer in Active Directory.\n\n391\n00:20:33.170 --> 00:20:34.608\nAnd we are good to go there.\n\n392\n00:20:34.608 --> 00:20:37.770\nSo now he’s in that group,\nthe next thing I'm gonna do\n\n393\n00:20:37.770 --> 00:20:41.640\nis flip over to the domain\ncontroller that I want to clone.\n\n394\n00:20:41.640 --> 00:20:44.830\nSo this is going to be,\ndc-source is the name I gave it and\n\n395\n00:20:44.830 --> 00:20:47.810\nwe are going to open up PowerShell.\n\n396\n00:20:47.810 --> 00:20:49.590\nNow, before we can clone this guy,\n\n397\n00:20:49.590 --> 00:20:52.160\nwhat we need to do is see if\nthere's any applications or\n\n398\n00:20:52.160 --> 00:20:57.550\nroles on this machine that don't\nsupport cloning, and there are a few.\n\n399\n00:20:57.550 --> 00:21:02.870\nThese servers maintain a list of allowed\nroles, roles that support cloning,\n\n400\n00:21:02.870 --> 00:21:06.390\nand if it finds anything that's not\nin the list this process will fail.\n\n401\n00:21:06.390 --> 00:21:09.830\nIt'll give you a warning and say,\nhey, you've got some things on here\n\n402\n00:21:09.830 --> 00:21:13.320\nthat I don't think support cloning,\nand you've got a couple choices.\n\n403\n00:21:13.320 --> 00:21:15.730\nYou can find out whether or\nnot they do support cloning.\n\n404\n00:21:15.730 --> 00:21:18.460\nIf it's a third-party application, or\n\n405\n00:21:18.460 --> 00:21:20.560\nsomething you're running on there,\ntalk to them.\n\n406\n00:21:20.560 --> 00:21:21.880\nSee if it supports cloning.\n\n407\n00:21:21.880 --> 00:21:26.670\nIf it does, you can actually add\nit to the list of allowed clonable\n\n408\n00:21:26.670 --> 00:21:30.750\napplications, or remove the application.\n\n409\n00:21:30.750 --> 00:21:32.310\nLike DHCP is actually one of them.\n\n410\n00:21:32.310 --> 00:21:35.590\nIf you're running the DHCP server\nservice and you run this command,\n\n411\n00:21:35.590 --> 00:21:38.370\nit will report back and say hey,\nyou can't clone this guy.\n\n412\n00:21:38.370 --> 00:21:39.490\nIt is running DHCP.\n\n413\n00:21:39.490 --> 00:21:44.000\nYou remove DHCP, run the command again,\nand everything's fine.\n\n414\n00:21:44.000 --> 00:21:47.505\nThe command to check for\nthis is actually, a long one.\n\n415\n00:21:47.505 --> 00:21:51.736\n[LAUGH] A Get-ADDC, and\nI've got to make sure I spell this right.\n\n416\n00:21:51.736 --> 00:21:54.998\nCloningExcludedApplicationsList.\n\n417\n00:21:54.998 --> 00:21:58.208\n>> [LAUGH]\n>> Yeah that's why tab auto-fill is our\n\n418\n00:21:58.208 --> 00:21:58.815\nfriend.\n\n419\n00:21:58.815 --> 00:22:02.196\nGet-ADC, I don't know if I can say this.\n\n420\n00:22:02.196 --> 00:22:12.130\nGet-ADDCCloningExcludedApplicationList and\nthere we go.\n\n421\n00:22:12.130 --> 00:22:14.065\nWe'll just tab auto-fill that guy so\nyou can see it.\n\n422\n00:22:14.065 --> 00:22:20.812\nGet-ADDCCloningExcludedApplicationList.\n\n423\n00:22:20.812 --> 00:22:23.636\nAnd I'll go ahead and run that command.\n\n424\n00:22:23.636 --> 00:22:26.290\nAll right, and\nit's gonna rifle through here.\n\n425\n00:22:26.290 --> 00:22:28.105\nAnd it's gonna, again, scan my machine.\n\n426\n00:22:28.105 --> 00:22:30.110\nIt's got a list that it maintains.\n\n427\n00:22:30.110 --> 00:22:33.930\nAnd there I can see I've\ngot a message that says\n\n428\n00:22:33.930 --> 00:22:36.680\nno excluded applications were detected.\n\n429\n00:22:36.680 --> 00:22:40.070\nIf that came back and said we\ndetected something, you could go and\n\n430\n00:22:40.070 --> 00:22:42.540\nlook at that list and\nactually report it right here.\n\n431\n00:22:42.540 --> 00:22:47.380\nAnd then I have to decide, can I remove\nthose roles before I clone it or\n\n432\n00:22:47.380 --> 00:22:52.800\nare they actually clonable and\nit just doesn't know about it?\n\n433\n00:22:52.800 --> 00:22:57.350\nIf it's a Windows role, this guy is going\nto know whether it's clonable or not.\n\n434\n00:22:57.350 --> 00:23:00.705\nAll right, so once we run that command\nwe determine that there is no roles or\n\n435\n00:23:00.705 --> 00:23:03.900\nanything on here that's going\nto prevent us from cloning this.\n\n436\n00:23:03.900 --> 00:23:07.960\nThe next thing is to create\na clone config file.\n\n437\n00:23:07.960 --> 00:23:09.220\nAnd we do that with another command.\n\n438\n00:23:09.220 --> 00:23:16.970\nIt's going to be New-ADDCCloneConfigFile,\nright?\n\n439\n00:23:16.970 --> 00:23:18.250\nNow what this file is for\n\n440\n00:23:18.250 --> 00:23:22.530\nis when we spin up a new clone, it's gonna\npull the information out of this file.\n\n441\n00:23:22.530 --> 00:23:25.400\nWe can include things like IP address,\nsubnet mask,\n\n442\n00:23:25.400 --> 00:23:30.280\nDNS, name of the server,\nsite that it belongs to.\n\n443\n00:23:30.280 --> 00:23:32.280\nAll of that type of information.\n\n444\n00:23:32.280 --> 00:23:36.750\nSo you type in this command, and then\ndepending on what you want to include,\n\n445\n00:23:36.750 --> 00:23:41.490\nwill include the different parameters such\nas, I'm gonna statically map this guy, so\n\n446\n00:23:41.490 --> 00:23:43.460\nI'm gonna do a -Static.\n\n447\n00:23:43.460 --> 00:23:51.564\nThen I'm gonna do\nan IPv4Address of 10.1.1.220.\n\n448\n00:23:52.590 --> 00:23:57.294\nAnd then we'll do IPv4SubnetMask\n\n449\n00:23:57.294 --> 00:24:02.155\nof 255.255.255.0 for\n\n450\n00:24:02.155 --> 00:24:05.454\nmy little network here.\n\n451\n00:24:05.454 --> 00:24:06.359\nWhat else do we need?\n\n452\n00:24:06.359 --> 00:24:10.514\nWe need a IPv4DefaultGateway.\n\n453\n00:24:10.514 --> 00:24:13.650\nAnd you can really do these in any order.\n\n454\n00:24:13.650 --> 00:24:17.392\n10.1.1.2 is my default gateway.\n\n455\n00:24:17.392 --> 00:24:19.475\nAnd me, mentally, I'm thinking,\n\n456\n00:24:19.475 --> 00:24:23.186\nI'm going through my properties\non my network adapter, right?\n\n457\n00:24:23.186 --> 00:24:26.721\nIP address, subnet mask,\ndefault gateway, DNS servers,\n\n458\n00:24:26.721 --> 00:24:28.810\nthat's how I remember this stuff.\n\n459\n00:24:28.810 --> 00:24:33.950\nSo, I've got IP address, subnet mask,\ndefault gateway, I need my DNS server.\n\n460\n00:24:33.950 --> 00:24:37.688\nSo IPv4, DNS Resolver and\n\n461\n00:24:37.688 --> 00:24:43.760\n10.1.1.200, in that case.\n\n462\n00:24:43.760 --> 00:24:46.440\nAnd then, if I want to give it a name,\nwhich I do,\n\n463\n00:24:46.440 --> 00:24:52.390\nI'm gonna do CloneComputerName,\nand I'm gonna call this guy DCO2.\n\n464\n00:24:54.410 --> 00:24:56.850\nSo that's my command,\nI'll go ahead, and hit Enter.\n\n465\n00:24:58.160 --> 00:24:59.840\nHopefully, I got everything on there.\n\n466\n00:24:59.840 --> 00:25:02.330\nAnd you'll see it's gonna go\nthrough a few different tests, and\n\n467\n00:25:02.330 --> 00:25:05.670\nhopefully we get a lot of green messages,\nall right?\n\n468\n00:25:05.670 --> 00:25:10.300\nSo you see, Passed: The domain controller\nhosting the PDC SFMO is located.\n\n469\n00:25:10.300 --> 00:25:12.515\nSo, remember I said he has to\nbe reachable, It found him.\n\n470\n00:25:12.515 --> 00:25:15.380\nPass: The local domain\ncontroller is a member of\n\n471\n00:25:15.380 --> 00:25:16.760\nthe Cloneable Domain Controllers group.\n\n472\n00:25:16.760 --> 00:25:20.280\nI added him to that group in Active\nDirectory, so, we're good to go there.\n\n473\n00:25:20.280 --> 00:25:22.690\nI've already ran this, so\nI knew it was gonna pass.\n\n474\n00:25:22.690 --> 00:25:24.140\nIf I hadn't run that ahead of time,\n\n475\n00:25:24.140 --> 00:25:28.362\nand there was a role that didn't support\ncloning, it would've failed right there.\n\n476\n00:25:28.362 --> 00:25:32.170\nAnd then I would have to go run that\ncommand to figure out what role it was\n\n477\n00:25:32.170 --> 00:25:36.070\nthat's preventing me from cloning it,\nremove it, or add it to the allowed list,\n\n478\n00:25:36.070 --> 00:25:37.390\nor whatever I need to do.\n\n479\n00:25:37.390 --> 00:25:39.010\nBut it says nothing was found.\n\n480\n00:25:39.010 --> 00:25:41.780\nAnd then, it says no valid clone\nconfig files were found in\n\n481\n00:25:41.780 --> 00:25:43.630\nany of the supported locations.\n\n482\n00:25:43.630 --> 00:25:47.630\nThat's gonna be NTDS,\nwhere the Active Directory database is or\n\n483\n00:25:47.630 --> 00:25:49.920\nthe root of any removable media.\n\n484\n00:25:49.920 --> 00:25:52.575\nIf it finds one file there,\nit won't continue,\n\n485\n00:25:52.575 --> 00:25:54.710\ncuz you can only have one config file.\n\n486\n00:25:54.710 --> 00:25:58.320\nSo, if there was already one, like we ran\nthis command and now wanted to change\n\n487\n00:25:58.320 --> 00:26:02.630\nsomething, I need to remove the original\nfile so I can run this command again.\n\n488\n00:26:02.630 --> 00:26:06.774\nSo everything says it ran, and\nthere you can see where it dumped it,\n\n489\n00:26:06.774 --> 00:26:09.332\nC:\\Windows\\NTDS\\DCCloneConfig.\n\n490\n00:26:09.332 --> 00:26:10.310\nAnd we could go open that up.\n\n491\n00:26:10.310 --> 00:26:14.371\nLet's do notepad\n\n492\n00:26:14.371 --> 00:26:25.207\nC:\\Windows\\NTDS\\DCCloneConfig.xml.\n\n493\n00:26:25.207 --> 00:26:28.313\nAnd here, you can see,\nthere's the name I assigned it,\n\n494\n00:26:28.313 --> 00:26:30.400\nthere's the fact that it's static.\n\n495\n00:26:30.400 --> 00:26:31.740\nThere's the IP address,\n\n496\n00:26:31.740 --> 00:26:35.680\nthe subnet mask, all that information\nthat it provided in that command.\n\n497\n00:26:35.680 --> 00:26:39.590\nSo, once you've got this file,\nyou can see it's a very simple XML file.\n\n498\n00:26:39.590 --> 00:26:42.859\nI could have actually opened up Notepad,\nmade my own XML file,\n\n499\n00:26:42.859 --> 00:26:46.697\nput all this information in there,\nand then put it in the right location.\n\n500\n00:26:46.697 --> 00:26:47.708\nWould I do that?\n\n501\n00:26:47.708 --> 00:26:51.660\nNo [LAUGH] why take a chance\non me making a typo,\n\n502\n00:26:51.660 --> 00:26:57.810\nnot knowing the right XML version or\nclass, or anything like the URI.\n\n503\n00:26:57.810 --> 00:26:58.930\nLet it make it.\n\n504\n00:26:58.930 --> 00:27:01.430\nNow, once I've made one,\nif I want to copy this out and\n\n505\n00:27:01.430 --> 00:27:04.972\nthen modify it in the future for others,\nsure, that might not be a bad idea.\n\n506\n00:27:04.972 --> 00:27:08.400\nAll right, so\nI've got that clone config file created.\n\n507\n00:27:08.400 --> 00:27:11.400\nWe are good to go there.\n\n508\n00:27:11.400 --> 00:27:15.570\nNow, we are going to shut\ndown this domain controller.\n\n509\n00:27:15.570 --> 00:27:20.976\nSo again, this is my source, the one I\nwant to clone, I ran all those commands,\n\n510\n00:27:20.976 --> 00:27:24.873\nit's in the right group, and\nwe're gonna shut it down.\n\n511\n00:27:24.873 --> 00:27:27.160\nSo, we'll power that guy off.\n\n512\n00:27:27.160 --> 00:27:29.210\nAnd I'll go ahead and\nclose my remote desktop window.\n\n513\n00:27:29.210 --> 00:27:34.830\nAnd I can watch it, right here's DC source\nis in the process of shutting down.\n\n514\n00:27:34.830 --> 00:27:35.875\nAnd there it goes.\n\n515\n00:27:35.875 --> 00:27:37.057\nOnce it's shut down,\n\n516\n00:27:37.057 --> 00:27:41.390\nnext thing we're gonna do is we're\ngonna export this virtual machine.\n\n517\n00:27:41.390 --> 00:27:43.350\nSo, I'm gonna go down here and\nlaunch my Export wizard.\n\n518\n00:27:43.350 --> 00:27:46.050\nWe could do this through\nPowerShell as well.\n\n519\n00:27:46.050 --> 00:27:48.160\nI find the GUI a little bit easier on me.\n\n520\n00:27:49.230 --> 00:27:53.660\nSo let me, I've got a folder\nthat I named ExportedVMs.\n\n521\n00:27:53.660 --> 00:27:57.375\nThat's where I'm gonna export\nthis domain controller to.\n\n522\n00:27:57.375 --> 00:27:59.425\nSo, we'll let it go through this process.\n\n523\n00:27:59.425 --> 00:28:01.560\nAll right, so\nit's finished that cloning process.\n\n524\n00:28:01.560 --> 00:28:05.596\nIt shut down and it made that, or I should\nsay, it finished the export process,\n\n525\n00:28:05.596 --> 00:28:07.970\nright, and it was shut down, exported.\n\n526\n00:28:07.970 --> 00:28:12.196\nIf we take a look, nothing too exciting\nto see, but inside my ExportedVMs,\n\n527\n00:28:12.196 --> 00:28:15.697\nthere's a folder for\nthe main controller I just exported, and\n\n528\n00:28:15.697 --> 00:28:18.288\nthere's its hard drive and\nits config files.\n\n529\n00:28:18.288 --> 00:28:22.780\nOne thing I do wanna point out, you wanna\nmake sure you don't have any snapshots.\n\n530\n00:28:22.780 --> 00:28:27.398\nWhen you go to export this machine, before\nyou export it, you wanna shut it down, and\n\n531\n00:28:27.398 --> 00:28:31.331\nif you had any snapshots, you would\nwanna merge those in or delete them.\n\n532\n00:28:31.331 --> 00:28:33.790\nGet rid of those before you\ntry to export this machine,\n\n533\n00:28:33.790 --> 00:28:36.480\ncuz that's gonna cause\nall kinds of problems.\n\n534\n00:28:36.480 --> 00:28:39.747\nNow that process is done, I'm good to go.\n\n535\n00:28:39.747 --> 00:28:45.340\nAny time I wanna whip out a new domain\ncontroller, I can simply import that VM.\n\n536\n00:28:45.340 --> 00:28:49.270\nSo, we're gonna click on\nImport New Virtual Machine over here.\n\n537\n00:28:49.270 --> 00:28:52.060\nAnd I'll click Next,\nand I'm gonna go find,\n\n538\n00:28:52.060 --> 00:28:57.444\nwhere that clonable DC was exported to,\nhaving trouble navigating, there we go.\n\n539\n00:28:57.444 --> 00:29:03.150\nC: > Exported > DC source, and\nall you do is select the folder,\n\n540\n00:29:03.150 --> 00:29:07.170\nand it'll figure out, what machines are in\nthat folder if there was more than one.\n\n541\n00:29:07.170 --> 00:29:10.978\nIt found my domain controller,\nclick Next and\n\n542\n00:29:10.978 --> 00:29:15.774\nhere, copy the virtual machine,\ncreate a new unique ID.\n\n543\n00:29:15.774 --> 00:29:18.370\nThat's what's gonna keep it\nunique from the other ones.\n\n544\n00:29:18.370 --> 00:29:19.280\nI'll click Next.\n\n545\n00:29:20.460 --> 00:29:23.380\nAnd in here, you can also run\ninto a little bit of a glitch.\n\n546\n00:29:23.380 --> 00:29:27.910\nNot a glitch, but it's gonna import it,\nit's gonna have all the same names, right?\n\n547\n00:29:27.910 --> 00:29:32.210\nAs far as the physical files go,\nthe VMC file,\n\n548\n00:29:32.210 --> 00:29:36.470\nthe VHDX files, the file that's\nin Hyper-V, like in my console,\n\n549\n00:29:36.470 --> 00:29:38.810\nwhen I see the names of my\nmachines in that console.\n\n550\n00:29:38.810 --> 00:29:41.940\nRemember those aren't computer names,\nthose are what we named them so\n\n551\n00:29:41.940 --> 00:29:46.350\nwe can tell the difference in the console,\nit's gonna have the same name DC-Source.\n\n552\n00:29:46.350 --> 00:29:49.760\nSo, you might wanna put this in\na different location to prevent that\n\n553\n00:29:49.760 --> 00:29:51.060\nkind of conflict.\n\n554\n00:29:51.060 --> 00:29:53.550\nSo, maybe I'll come in here,\nand in fact, let's do this,\n\n555\n00:29:53.550 --> 00:29:58.390\nlet's make a folder inside\nthat Hyper-V folder.\n\n556\n00:29:58.390 --> 00:30:00.610\nAnd I've already got one there, Clone01.\n\n557\n00:30:00.610 --> 00:30:03.010\nI'm gonna get rid of these guys.\n\n558\n00:30:03.010 --> 00:30:03.510\nOops.\n\n559\n00:30:05.553 --> 00:30:07.376\nOr you know what,\nwe'll just make a new folder.\n\n560\n00:30:07.376 --> 00:30:09.369\nWe'll call this one dco2,\n\n561\n00:30:09.369 --> 00:30:14.030\ncuz that's what we're going to\ncall that new domain controller.\n\n562\n00:30:15.280 --> 00:30:18.670\nSo then, I come over here,\nand I'll put dco2, dco2.\n\n563\n00:30:25.340 --> 00:30:26.830\nSometimes my navigation,\n\n564\n00:30:26.830 --> 00:30:31.360\nI get a little bit quick with that mouse,\nand then dc02 for that.\n\n565\n00:30:32.440 --> 00:30:34.430\nI'll click Next.\n\n566\n00:30:34.430 --> 00:30:37.070\nAnd then maybe I wanna\nmake a subfolder in here.\n\n567\n00:30:37.070 --> 00:30:39.030\nSo, let's browse and see if I've got one.\n\n568\n00:30:39.030 --> 00:30:39.790\nLet's just make one.\n\n569\n00:30:42.959 --> 00:30:43.939\nDc02.\n\n570\n00:30:43.939 --> 00:30:46.750\nAnd again, this is something\nthat you'd wanna think about,\n\n571\n00:30:46.750 --> 00:30:50.940\nfigure out how you wanna do this in your\norganization to keep everything organized.\n\n572\n00:30:50.940 --> 00:30:51.640\nClick Next.\n\n573\n00:30:53.260 --> 00:30:57.510\nThere's my summary, and\nI'll click Finish, and that's it.\n\n574\n00:30:57.510 --> 00:30:59.250\nIt's now gonna create a copy, right?\n\n575\n00:30:59.250 --> 00:31:04.100\nSo, the clone that I exported is not\ngetting moved, it's still gonna be there.\n\n576\n00:31:04.100 --> 00:31:07.073\nIt's copying those VHD files,\nit's gonna boot up and\n\n577\n00:31:07.073 --> 00:31:11.487\nit's gonna read that config file, and\nset the IP address, and change the name.\n\n578\n00:31:11.487 --> 00:31:14.250\nAnd I should have a new domain\ncontroller at that point.\n\n579\n00:31:14.250 --> 00:31:17.420\nAnd if I want another one,\nI can just import that guy again.\n\n580\n00:31:17.420 --> 00:31:18.690\nSomething we do have to think about,\n\n581\n00:31:18.690 --> 00:31:23.040\nremember that config file had an IP\naddress and a name inside there.\n\n582\n00:31:23.040 --> 00:31:24.920\nSo if I go and\nimport that same machine again,\n\n583\n00:31:24.920 --> 00:31:27.402\nit’s gonna use that config file again,\nguess what?\n\n584\n00:31:27.402 --> 00:31:30.795\nI'm gonna have duplicate name and\nduplicate IP address, and\n\n585\n00:31:30.795 --> 00:31:32.005\nthat's not gonna work.\n\n586\n00:31:32.005 --> 00:31:36.495\nRemember, ever since 2003, as long as my\nforced functional level is above 2003,\n\n587\n00:31:36.495 --> 00:31:38.235\nwe can rename domain controllers.\n\n588\n00:31:38.235 --> 00:31:40.545\nWe can change their IP\naddresses if we need to.\n\n589\n00:31:40.545 --> 00:31:43.335\nSo, what you would do is\nyou could clone it again,\n\n590\n00:31:43.335 --> 00:31:44.914\nbut don't connect it to the network.\n\n591\n00:31:44.914 --> 00:31:48.960\nStart it up, and go in and\n\n592\n00:31:48.960 --> 00:31:53.360\nchange the name and change that IP\naddress, then connect it to the network.\n\n593\n00:31:53.360 --> 00:31:55.946\nThe only problem there is it's\nnot gonna be able to reach out,\n\n594\n00:31:55.946 --> 00:31:58.546\nhit that PDC emulator, so\nyou might run into a problem there.\n\n595\n00:31:58.546 --> 00:32:02.167\nWhat I would suggest, and\nI don't see it on too many,\n\n596\n00:32:02.167 --> 00:32:07.154\nif you go out and do some research on\nthis, you don't see a lot of info, but\n\n597\n00:32:07.154 --> 00:32:12.144\nyou can run that clone config file,\nthat New dash ADDC clone config file,\n\n598\n00:32:12.144 --> 00:32:15.240\nand not put in any of those parameters.\n\n599\n00:32:15.240 --> 00:32:18.070\nNot put an IP Address, not put a name.\n\n600\n00:32:18.070 --> 00:32:20.910\nAnd then what it's supposed\nto do is when you import it,\n\n601\n00:32:20.910 --> 00:32:25.760\nit just generates a DHCP address,\nand it generates a random name.\n\n602\n00:32:25.760 --> 00:32:29.400\nAnd I can go in and\nI can rename that domain controller, and\n\n603\n00:32:29.400 --> 00:32:31.480\nI can set a static IP address on it.\n\n604\n00:32:31.480 --> 00:32:38.580\nSo it's if the file itself, that config\nfile, doesn't have any static information.\n\n605\n00:32:38.580 --> 00:32:40.975\nI can import that clone over and\nover and over again, right?\n\n606\n00:32:40.975 --> 00:32:43.272\nAs many times as I need to.\n\n607\n00:32:43.272 --> 00:32:45.664\nAnd there we go, it's done.\n\n608\n00:32:45.664 --> 00:32:48.082\nAnd now I gotta figure\nout which one it is,\n\n609\n00:32:48.082 --> 00:32:50.592\n[LAUGH] because they've got the same name.\n\n610\n00:32:50.592 --> 00:32:53.360\nI'm gonna assume it's the one\nthat's highlighted here.\n\n611\n00:32:53.360 --> 00:32:58.771\nSo I'm going to rename that to dc02.\n\n612\n00:32:58.771 --> 00:33:00.530\nAll right, and\nwe'll go ahead and start it up.\n\n613\n00:33:02.510 --> 00:33:05.483\nAnd we'll connect to it.\n\n614\n00:33:05.483 --> 00:33:08.891\nAnd my resolution's gonna be a little bit\noff on this guy until I can get in and\n\n615\n00:33:08.891 --> 00:33:11.010\nactually change those kinda settings.\n\n616\n00:33:11.010 --> 00:33:12.520\nSo, bear with me there.\n\n617\n00:33:12.520 --> 00:33:16.570\nBut what we should see is, as this boots\nup, we'll see a little message pop up here\n\n618\n00:33:16.570 --> 00:33:20.810\nthat it's going through the configuration\nprocess for this clone.\n\n619\n00:33:20.810 --> 00:33:23.390\nI'll try maximizing this,\nRonnie, and see what we get.\n\n620\n00:33:25.690 --> 00:33:27.176\nSee what our resolution,\nthat's pretty, right?\n\n621\n00:33:27.176 --> 00:33:31.240\nThat nice black screen.\n\n622\n00:33:31.240 --> 00:33:36.117\nI want you guys to see the message.\n\n623\n00:33:36.117 --> 00:33:37.858\nThat might not be the right one Ronnie.\n\n624\n00:33:37.858 --> 00:33:40.934\nLet's check and see here.\n\n625\n00:33:40.934 --> 00:33:44.227\nIt'll tell you how I can verify\nif I started up the clone or\n\n626\n00:33:44.227 --> 00:33:46.080\nthe one that I cloned.\n\n627\n00:33:46.080 --> 00:33:47.288\nI can go into its Settings.\n\n628\n00:33:49.749 --> 00:33:51.670\nAnd I can see where it's located at.\n\n629\n00:33:51.670 --> 00:33:52.940\nThat was actually source.\n\n630\n00:33:52.940 --> 00:33:54.961\nSo I started up the wrong one.\n\n631\n00:33:54.961 --> 00:33:57.096\nLet me rename that.\n\n632\n00:33:57.096 --> 00:34:00.464\nLet me shut this guy down.\n\n633\n00:34:00.464 --> 00:34:03.200\nI would never choose turn off\nin the real world, right?\n\n634\n00:34:03.200 --> 00:34:04.070\nJust for this lab.\n\n635\n00:34:04.070 --> 00:34:07.949\nThis was actually the new one, so\nlet's change this back to source.\n\n636\n00:34:10.851 --> 00:34:13.800\nAnd let's change this to dc02.\n\n637\n00:34:13.800 --> 00:34:15.100\nThis is the one we just made.\n\n638\n00:34:17.260 --> 00:34:19.309\nWe'll verify that by\nlooking at it's Settings.\n\n639\n00:34:20.750 --> 00:34:24.212\nAnd I can see that its hard\ndrive is actually located, oh,\n\n640\n00:34:24.212 --> 00:34:27.050\nmaybe I did that wrong.\n\n641\n00:34:27.050 --> 00:34:28.328\nYeah, that's dc02, right?\n\n642\n00:34:28.328 --> 00:34:30.250\nThat's the one we just cloned.\n\n643\n00:34:30.250 --> 00:34:33.100\nSee how it still has the name DC-source?\n\n644\n00:34:33.100 --> 00:34:35.480\nSo these are all things that\nyou're gonna have to do.\n\n645\n00:34:35.480 --> 00:34:41.060\nManually rename those files and attach\nit back to the VM, if you care, right?\n\n646\n00:34:41.060 --> 00:34:43.880\nIf it's in its' own folder it's\nnot gonna cause any conflicts.\n\n647\n00:34:43.880 --> 00:34:46.598\nSo maybe I shouldn't have\nnamed that DC-source, right?\n\n648\n00:34:46.598 --> 00:34:48.943\nI should've used a more generic name.\n\n649\n00:34:48.943 --> 00:34:52.078\nWe'll go ahead and start this guy up,\nand we'll connect to it.\n\n650\n00:34:55.839 --> 00:34:56.910\nCome on, let me connect.\n\n651\n00:34:58.940 --> 00:35:02.940\nAnd now we get to see\nthe cloning process finish.\n\n652\n00:35:02.940 --> 00:35:06.074\nSo you see what kind of trouble\nyou can run into with the names,\n\n653\n00:35:06.074 --> 00:35:07.955\nyou've gotta be careful with that.\n\n654\n00:35:07.955 --> 00:35:10.310\nPay attention to which\none you're working with.\n\n655\n00:35:10.310 --> 00:35:13.545\nUnlike me, who just grabbed one and\nthought he knew what he was doing.\n\n656\n00:35:13.545 --> 00:35:14.980\n[LAUGH]\n>> All right, Mike,\n\n657\n00:35:14.980 --> 00:35:19.710\nwell that sounds like a lot of\ninformation that we need to pay attention\n\n658\n00:35:19.710 --> 00:35:24.800\nto if we are gonna be thinking about\nvirtualizing our Active Directory, right?\n\n659\n00:35:24.800 --> 00:35:27.558\nSo when we take a look at doing\nthat with our domain controllers,\n\n660\n00:35:27.558 --> 00:35:30.674\nwe're really trying to do the high\noptimization just like the rest of our\n\n661\n00:35:30.674 --> 00:35:32.020\nnetwork is probably going to.\n\n662\n00:35:32.020 --> 00:35:34.999\nAs well maybe take advantage of things\nlike, well, the cloning [INAUDIBLE].\n\n663\n00:35:34.999 --> 00:35:37.043\n>> Ronnie you're muted.\n\n664\n00:35:37.043 --> 00:35:39.086\n>> Oops, figures.\n\n665\n00:35:39.086 --> 00:35:40.061\n>> [INAUDIBLE].\n\n666\n00:35:40.061 --> 00:35:41.199\n>> Yeah.\n\n667\n00:35:41.199 --> 00:35:44.907\n>> And make sure you leave my screen\nup in case any cool messages pop up,\n\n668\n00:35:44.907 --> 00:35:47.654\nleave the screen share\ngoing while Ronnie talks.\n\n669\n00:35:50.254 --> 00:35:50.754\n>> Okay, go ahead.\n\n670\n00:35:52.180 --> 00:35:52.880\n>> All right, Mike, well,\n\n671\n00:35:52.880 --> 00:35:56.840\nthat sounds like a lot of great\ninformation that we need to consider.\n\n672\n00:35:56.840 --> 00:36:00.160\nIf we're gonna be virtualizing\nour Active Directory by\n\n673\n00:36:00.160 --> 00:36:03.710\nusing our virtual machines to\nvirtualize the domain controller.\n\n674\n00:36:03.710 --> 00:36:07.310\nBut as well as actually think about\nthe use of cloning when we need to,\n\n675\n00:36:07.310 --> 00:36:10.560\nto spin up multiple domain\ncontrollers relatively quickly.\n\n676\n00:36:10.560 --> 00:36:11.840\nNow, being able to do that, of course,\n\n677\n00:36:11.840 --> 00:36:14.900\nis something that really does\ntakes a little time to learn.\n\n678\n00:36:14.900 --> 00:36:18.510\nNotice that Mike did type in those\ncommands relatively slowly so\n\n679\n00:36:18.510 --> 00:36:19.650\nthat we could see them.\n\n680\n00:36:19.650 --> 00:36:24.109\nBut Mike is there an easy source that\nthey can go to to find those commands?\n\n681\n00:36:24.109 --> 00:36:24.876\n>> TechNet.\n\n682\n00:36:24.876 --> 00:36:25.386\n>> TechNet.\n\n683\n00:36:25.386 --> 00:36:25.945\n>> I guess would be one.\n\n684\n00:36:25.945 --> 00:36:29.450\nI'll post them up on the show notes as\nwell so you guys can have them there.\n\n685\n00:36:29.450 --> 00:36:32.559\nAnd there, you can see, and we don't\nhave to wait for this process to finish,\n\n686\n00:36:32.559 --> 00:36:33.988\ncuz it is gonna take a little while.\n\n687\n00:36:33.988 --> 00:36:34.871\nIt's at 2%.\n\n688\n00:36:34.871 --> 00:36:37.124\n>> [LAUGH]\n>> But domain controller cloning, oh,\n\n689\n00:36:37.124 --> 00:36:38.261\nit jumped up to 21%.\n\n690\n00:36:38.261 --> 00:36:42.150\nBut now you see it going\nthrough that process, right?\n\n691\n00:36:42.150 --> 00:36:46.593\nSo now it's reading that config file,\nit's setting the IP address, it's setting\n\n692\n00:36:46.593 --> 00:36:50.801\nthe name of the machine and any other\ninformation that might included in there.\n\n693\n00:36:50.801 --> 00:36:52.962\nBut yeah,\nyou can definitely go out to TechNet and\n\n694\n00:36:52.962 --> 00:36:55.030\nyou can get those steps by steps there.\n\n695\n00:36:55.030 --> 00:36:56.770\nYou can watch our episode again.\n\n696\n00:36:56.770 --> 00:37:00.820\nI'll put those in the show notes up there\non the site so you can get them there.\n\n697\n00:37:00.820 --> 00:37:02.910\nIt was really those two commands, right?\n\n698\n00:37:02.910 --> 00:37:10.828\nIt's that get, oh I'm sorry the get dash\nADDC cloning exclude application list.\n\n699\n00:37:10.828 --> 00:37:12.043\nWho's gonna remember that?\n\n700\n00:37:12.043 --> 00:37:13.070\n>> [LAUGH]\n>> And\n\n701\n00:37:13.070 --> 00:37:16.370\nthe new dash ADDC clone config file.\n\n702\n00:37:16.370 --> 00:37:18.600\nThose are the two commands\nI needed to set it up.\n\n703\n00:37:18.600 --> 00:37:20.560\nI added the domain\ncontrollers to the group.\n\n704\n00:37:20.560 --> 00:37:22.047\nClonable to main controllers.\n\n705\n00:37:22.047 --> 00:37:23.673\nI ran those two commands.\n\n706\n00:37:23.673 --> 00:37:24.880\nI shut it down.\n\n707\n00:37:24.880 --> 00:37:26.227\nI exported it.\n\n708\n00:37:26.227 --> 00:37:29.210\nAnd then all I did was import it,\nand I'm done.\n\n709\n00:37:29.210 --> 00:37:33.030\nSo, it might seem like a lot,\nand it is to remember, but\n\n710\n00:37:33.030 --> 00:37:34.830\nthere's really not a lot\nof steps involved.\n\n711\n00:37:34.830 --> 00:37:36.950\nIt's a pretty straight forward process.\n\n712\n00:37:36.950 --> 00:37:40.300\nMike, the only other thing I want to\nemphasize is we're not gonna be able to do\n\n713\n00:37:40.300 --> 00:37:44.740\nthis domain controller cloning\nwith Server 2008, right?\n\n714\n00:37:44.740 --> 00:37:45.554\n>> Correct.\n>> Yeah.\n\n715\n00:37:45.554 --> 00:37:47.853\n>> It is a 2012 only.\n\n716\n00:37:47.853 --> 00:37:52.009\nSo your Hyper-V platform, if you're\nrunning Hyper-V that has to be 2012.\n\n717\n00:37:52.009 --> 00:37:56.020\nOr at least it has to support that VM\ngeneration ID which didn't come out until\n\n718\n00:37:56.020 --> 00:37:57.080\n2012, right?\n\n719\n00:37:57.080 --> 00:38:00.592\nSo if you’re running 2008 Hyper-V or\nHyper-V on a 2008 server?\n\n720\n00:38:00.592 --> 00:38:01.893\nThis isn't going to work for you, right?\n\n721\n00:38:01.893 --> 00:38:03.472\nSo you're gonna have to upgrade your host.\n\n722\n00:38:03.472 --> 00:38:09.360\nOr if you're running vSphere you've\ngotta make sure you're at least 5.1.\n\n723\n00:38:09.360 --> 00:38:14.086\nThe main controller of that,\nyour cloning, has to be running 2012 or\n\n724\n00:38:14.086 --> 00:38:16.613\n2012 R2 to support this process.\n\n725\n00:38:16.613 --> 00:38:19.794\nAnd you can see it's actually\nalmost done here Ronnie.\n\n726\n00:38:19.794 --> 00:38:24.860\nI've got a nice black screen, but\nit just finished, in fact we could check.\n\n727\n00:38:24.860 --> 00:38:29.190\nWhat I could do is flip over to DC one and\n\n728\n00:38:29.190 --> 00:38:34.000\nopen up Active Directory users and\ncomputers, go into my domain controllers.\n\n729\n00:38:34.000 --> 00:38:35.949\nAnd there's my new domain\ncontroller that we just set up.\n\n730\n00:38:37.100 --> 00:38:40.340\nAnd you saw, I mean, what did that take,\nfive minutes, right?\n\n731\n00:38:40.340 --> 00:38:41.600\nTo spin that new one up?\n\n732\n00:38:41.600 --> 00:38:44.460\nSo now, if my boss comes to me and says,\nwe need another domain controller,\n\n733\n00:38:44.460 --> 00:38:48.130\nI can have one up and\nrunning in five minutes.\n\n734\n00:38:48.130 --> 00:38:49.670\nThat's pretty impressive technology.\n\n735\n00:38:49.670 --> 00:38:50.870\n>> That really is.\n\n736\n00:38:50.870 --> 00:38:53.928\nWell, Mike, that sounds like\na great place for us to also go and\n\n737\n00:38:53.928 --> 00:38:55.853\nend this episode on Active Directory.\n\n738\n00:38:55.853 --> 00:38:58.523\nSigning off for ITProTV, I'm Ronnie Wong.\n\n739\n00:38:58.523 --> 00:38:59.289\n>> And I'm Mike Roderick.\n\n740\n00:38:59.289 --> 00:39:00.937\n>> And we'll see you next time.\n\n741\n00:39:00.937 --> 00:39:08.810\n[SOUND]\n\n",
          "vimeoId": "148255464"
        },
        {
          "description": "In this episode, Ronnie and Mike dive into the logical organization, delegation and administrative aspects of working with Active Directory.  They emphasize the logical organization units.  Also the guys take a look at creating OUs using the GUI and using Powershell too.  This is the basic unit used to administer Active Directory.",
          "length": "1931",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-3-1-organizatioinal_units-110515-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-3-1-organizatioinal_units-110515-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-3-1-organizatioinal_units-110515-1-sm.jpg",
          "title": "Organizational Units",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:00.906\n[MUSIC]\n\n2\n00:00:00.906 --> 00:00:07.281\nWelcome to another great\nepisode here on ITProTV.\n\n3\n00:00:07.281 --> 00:00:11.788\nI'm your host Ronnie Wong, and today,\n\n4\n00:00:11.788 --> 00:00:18.350\nwe're taking a look at working\nwith Active Directory.\n\n5\n00:00:18.350 --> 00:00:21.920\nSpecifically though,\ntaking a look at organizational units.\n\n6\n00:00:21.920 --> 00:00:24.870\nAnd who better to help us navigate\nthose murky waters then well,\n\n7\n00:00:24.870 --> 00:00:26.960\nthe Active Directory master himself,\nMike Rodrick.\n\n8\n00:00:26.960 --> 00:00:27.756\nHow's it going?\n\n9\n00:00:27.756 --> 00:00:28.930\n>> It's going great, Ronnie.\n\n10\n00:00:28.930 --> 00:00:29.840\nI'm excited as always.\n\n11\n00:00:29.840 --> 00:00:33.222\nWe're covering Active Directory,\none of my favorite topics.\n\n12\n00:00:33.222 --> 00:00:35.036\n>> [LAUGH]\n>> And in this one, as you said,\n\n13\n00:00:35.036 --> 00:00:38.180\nwe're gonna be talking about\norganizational units, or OUs for short.\n\n14\n00:00:38.180 --> 00:00:40.980\nSo we can shorten that\nup just a little bit.\n\n15\n00:00:40.980 --> 00:00:45.180\nOrganizational units are a key\ncomponent to Active Directory.\n\n16\n00:00:45.180 --> 00:00:50.337\nThey're one of the smaller units that we\nget in Active Directory to work with.\n\n17\n00:00:50.337 --> 00:00:54.146\nAnd I guess the first thing we need to\nunderstand is what the heck we do with\n\n18\n00:00:54.146 --> 00:00:54.840\nthese guys.\n\n19\n00:00:54.840 --> 00:00:57.280\nAnd then we'll take a look at them.\n\n20\n00:00:57.280 --> 00:01:01.221\nWe'll take a look at creating them and\na couple of different ways that we\n\n21\n00:01:01.221 --> 00:01:04.060\ncan actually create them and\nwhy we even want them.\n\n22\n00:01:04.060 --> 00:01:07.230\nAnd let's start there,\nlet's talk about the why first, alright.\n\n23\n00:01:07.230 --> 00:01:10.904\nSo, the Active Directory is\na fantastic service, right, and\n\n24\n00:01:10.904 --> 00:01:13.020\nit's extremely scalable.\n\n25\n00:01:13.020 --> 00:01:17.190\nIt can go from just a few objects\nto hundreds of thousands and\n\n26\n00:01:17.190 --> 00:01:18.860\nmillions of objects.\n\n27\n00:01:18.860 --> 00:01:21.760\nA big Fortune 500 company\nmight have thousands and\n\n28\n00:01:21.760 --> 00:01:25.450\nhundreds of thousands of users and\ncomputers and servers.\n\n29\n00:01:25.450 --> 00:01:29.050\nAll of this information gets stored\nin this Active Directory database so\n\n30\n00:01:29.050 --> 00:01:30.730\nthat we can work with it.\n\n31\n00:01:30.730 --> 00:01:32.702\nBut how do I organize that, right?\n\n32\n00:01:32.702 --> 00:01:37.940\nI don't want a list of 100,000 objects\nthat I have to kind of scroll through.\n\n33\n00:01:37.940 --> 00:01:39.920\nSo, the first job of OUs or\n\n34\n00:01:39.920 --> 00:01:43.830\norganizational units is to do just that,\nto organize our objects.\n\n35\n00:01:43.830 --> 00:01:46.390\nYou guys at home can relate to this.\n\n36\n00:01:46.390 --> 00:01:50.118\nIf you've got your, you go to your\ncomputer at home, and you've got\n\n37\n00:01:50.118 --> 00:01:54.487\nyour My Pictures folder, you don't just\ndump, well, maybe you do, but most of\n\n38\n00:01:54.487 --> 00:01:58.900\nyou probably don't just dump all of your\npictures into that My Pictures folder.\n\n39\n00:01:58.900 --> 00:02:02.365\nSo that you've got hundreds or thousands\nof pictures just loose in there, right?\n\n40\n00:02:02.365 --> 00:02:04.805\nTrying to find one becomes difficult.\n\n41\n00:02:04.805 --> 00:02:10.005\nIf you make sub-folders in there,\nChristmas 2015, New Years 2016,\n\n42\n00:02:10.005 --> 00:02:14.275\nand you organize them a little bit,\nright, with folders,\n\n43\n00:02:14.275 --> 00:02:19.015\nmuch easier to find and to work with when\nyou're looking for a particular picture.\n\n44\n00:02:19.015 --> 00:02:21.176\nIt's the same thing in Active Directory.\n\n45\n00:02:21.176 --> 00:02:23.820\nI don't want this one big\nlist of all of these objects.\n\n46\n00:02:23.820 --> 00:02:25.130\nI wanna be able to go in there and\n\n47\n00:02:25.130 --> 00:02:28.170\nfind that user account that\nworks in the Gainesville office.\n\n48\n00:02:28.170 --> 00:02:32.360\nOr I wanna find that computer account,\nthat laptop up in the New York office.\n\n49\n00:02:32.360 --> 00:02:36.729\nIf I create these OUs just like\nI would folders, I can do that.\n\n50\n00:02:36.729 --> 00:02:42.530\nAnd really, OUs are just like folders for\nActive Directory in that respect.\n\n51\n00:02:42.530 --> 00:02:44.710\nThey allow me to organize these objects.\n\n52\n00:02:44.710 --> 00:02:46.960\nBut they do more than that as well.\n\n53\n00:02:46.960 --> 00:02:51.600\nOn top of organizing my objects,\nanother benefit of OUs is\n\n54\n00:02:51.600 --> 00:02:55.255\nthat I can delegate\nadministrative control, right?\n\n55\n00:02:55.255 --> 00:03:00.765\nIn Active Directory, I might want to\ndole out some responsibility, alright?\n\n56\n00:03:00.765 --> 00:03:04.020\nI wanna give the help desk\nthe ability to reset passwords,\n\n57\n00:03:04.020 --> 00:03:05.665\nbut not for every account.\n\n58\n00:03:05.665 --> 00:03:07.155\nNot like my administrative accounts,\n\n59\n00:03:07.155 --> 00:03:09.685\njust the user accounts in\nthe Gainesville office.\n\n60\n00:03:09.685 --> 00:03:14.285\nOr I wanna let that sales manager\nmanage the sales user accounts.\n\n61\n00:03:14.285 --> 00:03:18.521\nOr I can give that person\nadministrative access over that OU, and\n\n62\n00:03:18.521 --> 00:03:23.850\nI can delegate rights or permissions to\nthat sales manager's group over that OU.\n\n63\n00:03:23.850 --> 00:03:28.346\nSo they could go in there and\nthey could create new user accounts,\n\n64\n00:03:28.346 --> 00:03:33.110\nand they could delete user accounts,\nbut only in that OU, alright?\n\n65\n00:03:33.110 --> 00:03:36.310\nSo those OUs give us the ability\nto delegate these permissions and\n\n66\n00:03:36.310 --> 00:03:38.440\ncontrol where those permissions are.\n\n67\n00:03:38.440 --> 00:03:41.845\nThere's a great delegation wizard\nthat we can use that lets us do that.\n\n68\n00:03:41.845 --> 00:03:43.648\nI'll show you that later.\n\n69\n00:03:43.648 --> 00:03:48.610\nSo you get delegation, organization,\nand then the other one is group policy.\n\n70\n00:03:48.610 --> 00:03:51.550\nThis is,\nOUs are what we link group policy to,\n\n71\n00:03:51.550 --> 00:03:54.810\nor one of the places that\nwe can link group policy.\n\n72\n00:03:54.810 --> 00:03:58.700\nAnd we'll talk, we've got other episodes\nRonnie, that we'll talk much more about\n\n73\n00:03:58.700 --> 00:04:01.840\ngroup policy, and\nwe'll see how we go about linking those.\n\n74\n00:04:01.840 --> 00:04:06.320\nBut just know for now,\nOUs are a way to organize my objects,\n\n75\n00:04:06.320 --> 00:04:11.080\ndelegate administrative control,\nand scope or link group policy.\n\n76\n00:04:11.080 --> 00:04:14.072\n>> Now Mike, you talk about OUs and\nwe understand, or at least I think I\n\n77\n00:04:14.072 --> 00:04:17.275\nunderstand them, but I do know that\nwhen you install Active Directory,\n\n78\n00:04:17.275 --> 00:04:20.870\nI've already seen this especially under\nActive Directory user's computers.\n\n79\n00:04:20.870 --> 00:04:22.281\nThere is already a group or\n\n80\n00:04:22.281 --> 00:04:26.460\nwhat looks like an open position unit\ncalled Computers and one called Users.\n\n81\n00:04:26.460 --> 00:04:29.150\nCan't we just use those instead for\nwhat we're talking about?\n\n82\n00:04:29.150 --> 00:04:30.190\n>> You would think, Ronnie, but\n\n83\n00:04:30.190 --> 00:04:32.120\nthen let's take a look at why\nwe're talking about this.\n\n84\n00:04:32.120 --> 00:04:34.355\nI've got my domain\ncontroller pulled up and\n\n85\n00:04:34.355 --> 00:04:37.035\nI'm gonna open up Active Directory\nusers and computers.\n\n86\n00:04:37.035 --> 00:04:39.925\nAnd what Ronnie's referring to\nthere is say this guy right here.\n\n87\n00:04:39.925 --> 00:04:43.952\nI don't know that you guys can see it on\nthe screen, but when you're doing your\n\n88\n00:04:43.952 --> 00:04:47.249\nlittle labs and you're playing\naround with Active Directory,\n\n89\n00:04:47.249 --> 00:04:49.565\nyou'll get to see it a little bit better.\n\n90\n00:04:49.565 --> 00:04:53.445\nSome of these little folders,\nthey look just like folders.\n\n91\n00:04:53.445 --> 00:04:55.540\nSome of them are just plain old folders.\n\n92\n00:04:55.540 --> 00:04:58.428\nThey don't have,\nthere's like this one here for computers,\n\n93\n00:04:58.428 --> 00:05:00.070\nit just looks like a yellow folder.\n\n94\n00:05:00.070 --> 00:05:03.577\nThis one for\nclient computers though has a little tiny,\n\n95\n00:05:03.577 --> 00:05:07.612\nwell that's supposed to be a little\nbook on top of it, alright.\n\n96\n00:05:07.612 --> 00:05:12.145\nWell, the one with the little book icon,\nthose are organizational units.\n\n97\n00:05:12.145 --> 00:05:16.888\nThe ones that just have that plain yellow\nfolder, those are built in containers.\n\n98\n00:05:16.888 --> 00:05:20.735\nAlright, and\nthere's a big difference between the two.\n\n99\n00:05:20.735 --> 00:05:24.785\nThose built in containers are kind\nof left over from the NT days.\n\n100\n00:05:24.785 --> 00:05:26.535\nThey're still there.\n\n101\n00:05:27.540 --> 00:05:31.720\nThe problem with those containers\nis I cannot create OUs within them,\n\n102\n00:05:31.720 --> 00:05:35.372\nand I cannot link group policy to them,\nand\n\n103\n00:05:35.372 --> 00:05:38.550\nI cannot delegate administrative\ncontrol over, alright?\n\n104\n00:05:38.550 --> 00:05:42.427\nLike I said, they're kinda\nleftover from the old NT days,\n\n105\n00:05:42.427 --> 00:05:46.110\nor most of these are,\nwhereas my OUs have that different icon.\n\n106\n00:05:46.110 --> 00:05:47.194\nThat's how we differentiate.\n\n107\n00:05:47.194 --> 00:05:49.641\nAn OU is actually a type of container,\nright?\n\n108\n00:05:49.641 --> 00:05:51.550\nSo they're both containers.\n\n109\n00:05:51.550 --> 00:05:54.450\nOne of them's just a plain\nold built in container,\n\n110\n00:05:54.450 --> 00:05:59.390\nthe other one is an organizational\nunit that has a lot more capabilities,\n\n111\n00:05:59.390 --> 00:06:02.960\nthat ability to delegate and\nthe ability to link group policy.\n\n112\n00:06:02.960 --> 00:06:06.130\nNow when you first start out, now I've\nalready created a few things in here.\n\n113\n00:06:06.130 --> 00:06:09.050\nBut when you start out,\nall these containers?\n\n114\n00:06:09.050 --> 00:06:11.260\nThese come out of the box, all right?\n\n115\n00:06:11.260 --> 00:06:13.070\nI didn't create any of those.\n\n116\n00:06:13.070 --> 00:06:15.030\nThere's one called built in.\n\n117\n00:06:15.030 --> 00:06:19.730\nIn there, I'm gonna find all those default\ngroups that come with Active Directory.\n\n118\n00:06:19.730 --> 00:06:21.690\nThat's where they store those.\n\n119\n00:06:21.690 --> 00:06:25.180\nThere's another built in\ncontainer called Computers.\n\n120\n00:06:25.180 --> 00:06:29.080\nAnd this is the default location where new\ncomputers that are joined to the domain,\n\n121\n00:06:29.080 --> 00:06:32.290\nthis is where that computer\naccount is going to go.\n\n122\n00:06:32.290 --> 00:06:34.420\nThere's one called\nForeign Security Principles.\n\n123\n00:06:34.420 --> 00:06:38.980\nThis is any security principle that's\nnot part of my Active Directory.\n\n124\n00:06:38.980 --> 00:06:42.220\nI'll tell you I've never used that,\nbut that's what it's for.\n\n125\n00:06:42.220 --> 00:06:44.460\nThere's another one called\nManaged Service Accounts.\n\n126\n00:06:44.460 --> 00:06:46.980\nThis is a relatively new concept.\n\n127\n00:06:46.980 --> 00:06:51.620\nBut we can create Managed Service Accounts\nthat Windows handles\n\n128\n00:06:51.620 --> 00:06:53.160\nchanging the password for.\n\n129\n00:06:53.160 --> 00:06:54.920\nIt's a topic for another day.\n\n130\n00:06:54.920 --> 00:06:56.523\nBut that's what that container's for,\n\n131\n00:06:56.523 --> 00:06:59.702\nthat's where they're gonna go when you\ncreate those managed service accounts.\n\n132\n00:06:59.702 --> 00:07:03.640\nAnd then there's one called Users\nthat has a few more built in groups,\n\n133\n00:07:03.640 --> 00:07:05.930\nas well as a couple important accounts.\n\n134\n00:07:05.930 --> 00:07:08.430\nThe administrator account,\nthat guest account,\n\n135\n00:07:08.430 --> 00:07:11.330\nthose are gonna be found\nin that Users container.\n\n136\n00:07:11.330 --> 00:07:16.411\nThe Users container is also the default\nlocation if you create new users\n\n137\n00:07:16.411 --> 00:07:21.746\nlike from the command line and\nyou don't specify where they're gonna go,\n\n138\n00:07:21.746 --> 00:07:24.810\nthat's where they will end up, alright.\n\n139\n00:07:24.810 --> 00:07:28.024\nOU wise, there is basically,\nif I remember right,\n\n140\n00:07:28.024 --> 00:07:30.590\nthere is one that's created by default.\n\n141\n00:07:30.590 --> 00:07:33.530\nAnd that's my domain controller's OU.\n\n142\n00:07:33.530 --> 00:07:35.470\nThat's the only one we get out of the box.\n\n143\n00:07:35.470 --> 00:07:36.010\nAnd in there,\n\n144\n00:07:36.010 --> 00:07:40.630\nyou're gonna find the computer\naccounts for your domain controllers.\n\n145\n00:07:40.630 --> 00:07:44.010\nThat's the only one you get, and\nthey create that because one,\n\n146\n00:07:44.010 --> 00:07:46.050\nit's a place to put my domain controllers,\nremember,\n\n147\n00:07:46.050 --> 00:07:49.920\nif I'm installing Active Directory,\nI'm creating a domain controller.\n\n148\n00:07:49.920 --> 00:07:53.030\nWell, that account goes into\nthis domain controller's OU, and\n\n149\n00:07:53.030 --> 00:07:58.170\nthen link to the domain controller's OU\nis my default domain controller's policy,\n\n150\n00:07:58.170 --> 00:08:02.540\nwhich is a group policy object\nas some baseline settings for\n\n151\n00:08:02.540 --> 00:08:04.805\nmy domain controllers themselves.\n\n152\n00:08:04.805 --> 00:08:07.730\nAlright, so\nwe got those built in containers, and\n\n153\n00:08:07.730 --> 00:08:09.710\nwe've got OUs that we can create.\n\n154\n00:08:09.710 --> 00:08:12.750\nAnd speaking of create,\nthat's what we're gonna do.\n\n155\n00:08:12.750 --> 00:08:14.820\nWhen we set up Active Directory,\n\n156\n00:08:14.820 --> 00:08:18.870\nwe've gotta decide how do I\nwanna organize my objects.\n\n157\n00:08:18.870 --> 00:08:19.830\nHow do I wanna set this up?\n\n158\n00:08:19.830 --> 00:08:21.730\nAnd it's completely up to you.\n\n159\n00:08:21.730 --> 00:08:24.171\nThere's no right way or wrong way.\n\n160\n00:08:24.171 --> 00:08:28.004\nThere might be less efficient ways and\nmore efficient ways.\n\n161\n00:08:28.004 --> 00:08:29.921\nBut there really isn't a right or wrong.\n\n162\n00:08:29.921 --> 00:08:31.420\nIt's up to you completely.\n\n163\n00:08:31.420 --> 00:08:34.231\nThink back to the My Pictures\ndemo that I was talking about or\n\n164\n00:08:34.231 --> 00:08:35.645\nexample I was talking about.\n\n165\n00:08:35.645 --> 00:08:37.398\nYou might create a folder called,\n\n166\n00:08:37.398 --> 00:08:40.546\nunderneath pictures you might\ncreate one called Christmas.\n\n167\n00:08:40.546 --> 00:08:46.489\nAnd then within there you might create\nfolders called 2013, 2014, 2015.\n\n168\n00:08:46.489 --> 00:08:51.245\nThen you got another top level\nfolder called Fourth of July, and\n\n169\n00:08:51.245 --> 00:08:54.424\nthen 2013, 14, and 15, right.\n\n170\n00:08:54.424 --> 00:08:59.230\nSo you might organize it holiday first,\nand then year underneath there.\n\n171\n00:08:59.230 --> 00:09:01.192\nBut we could just as\neasily flip that around.\n\n172\n00:09:01.192 --> 00:09:04.175\nI could create a top\nlevel folder called 2014.\n\n173\n00:09:04.175 --> 00:09:08.494\nAnd inside there; Fourth of July,\nHalloween, Christmas.\n\n174\n00:09:08.494 --> 00:09:10.758\nAnd then a top level folder called 2015.\n\n175\n00:09:10.758 --> 00:09:14.391\nAnd then fourth of July,\nHalloween Christmas within there.\n\n176\n00:09:14.391 --> 00:09:15.970\nEither way would work.\n\n177\n00:09:15.970 --> 00:09:17.584\nWhich one works better for you?\n\n178\n00:09:17.584 --> 00:09:21.438\nThat's what you're gonna decide with OUs.\n\n179\n00:09:21.438 --> 00:09:22.808\nIn fact, here let's take a look.\n\n180\n00:09:22.808 --> 00:09:23.912\nI've got a drawing here.\n\n181\n00:09:23.912 --> 00:09:27.730\nFor example, for my computers,\nmy client computers.\n\n182\n00:09:27.730 --> 00:09:34.788\nI might decide to go with my location\nfirst, GNV and then New York City, or NYC.\n\n183\n00:09:34.788 --> 00:09:39.410\nAnd underneath that, subdivide it\neven further by desktops and laptops.\n\n184\n00:09:39.410 --> 00:09:42.451\nAnd then the same thing for\nNew York City, all right?\n\n185\n00:09:42.451 --> 00:09:48.334\nIf I do it this way, let's say I have a\nsetting that only applies to Gainesville.\n\n186\n00:09:48.334 --> 00:09:50.952\nWell, I can take a group policy and\n\n187\n00:09:50.952 --> 00:09:54.576\nI could link that policy\nto the Gainesville OU.\n\n188\n00:09:54.576 --> 00:09:57.326\nAnd that's going to inherit\ndown to all the desktops and\n\n189\n00:09:57.326 --> 00:09:58.856\nlaptops within Gainesville.\n\n190\n00:09:58.856 --> 00:10:01.968\nIt's not going to affect any\ncomputers in New York City.\n\n191\n00:10:01.968 --> 00:10:02.966\nGreat.\n\n192\n00:10:02.966 --> 00:10:04.788\nThat's easy to do, right?\n\n193\n00:10:04.788 --> 00:10:09.576\nBut what if I had a setting that affected\nall desktops no matter where they were?\n\n194\n00:10:09.576 --> 00:10:13.515\nWell, now I gotta link it here and\n\n195\n00:10:13.515 --> 00:10:18.597\nI would have to do it again and\nlink it here.\n\n196\n00:10:18.597 --> 00:10:21.324\nSo a little more work.\n\n197\n00:10:21.324 --> 00:10:24.576\nAnd imagine I had 10 locations,\nnot just two.\n\n198\n00:10:24.576 --> 00:10:29.164\nSo if most of my settings are applied\nbased on location, then this might be\n\n199\n00:10:29.164 --> 00:10:34.210\na good way to go, cuz I only have to link\nit to the location, it'll inherit down.\n\n200\n00:10:34.210 --> 00:10:38.064\nIf my settings are typically\ndeployed based on type of computer,\n\n201\n00:10:38.064 --> 00:10:40.803\nthis is a little more\nwork administratively.\n\n202\n00:10:40.803 --> 00:10:42.846\nSo maybe I wanna flip that around.\n\n203\n00:10:42.846 --> 00:10:47.642\nAnd now if I've got a setting that just\napplies to laptops, I can link it here,\n\n204\n00:10:47.642 --> 00:10:52.822\nand it'll affect all laptops whether\nthey're in Gainesville or New York, right?\n\n205\n00:10:52.822 --> 00:10:56.188\nSo it just depends on how you plan\non doing your administration.\n\n206\n00:10:56.188 --> 00:10:57.443\nThis is the planning part.\n\n207\n00:10:57.443 --> 00:11:00.135\nYou can't just walk into Active Directory\nand start creating things.\n\n208\n00:11:00.135 --> 00:11:03.085\nYou need to have an idea\nof how you wanna do it.\n\n209\n00:11:03.085 --> 00:11:06.777\nThe same thing holds true for\nadministration, all right?\n\n210\n00:11:06.777 --> 00:11:12.341\nIf I am going to delegate administrative\npermissions based on location,\n\n211\n00:11:12.341 --> 00:11:15.764\nprimarily, this might\nbe a better way to go.\n\n212\n00:11:15.764 --> 00:11:20.519\nBut if I'm giving out or if I'm delegating\npermissions based on types of computers,\n\n213\n00:11:20.519 --> 00:11:22.181\nI gotta do more work this way.\n\n214\n00:11:22.181 --> 00:11:24.723\nIt would be easier if I did it this way.\n\n215\n00:11:24.723 --> 00:11:28.012\nNow I can give somebody\npermissions over all the desktops,\n\n216\n00:11:28.012 --> 00:11:30.921\nno matter where they are,\njust by linking that one.\n\n217\n00:11:30.921 --> 00:11:33.766\nSo, again, there's no right way or\nwrong way.\n\n218\n00:11:33.766 --> 00:11:38.584\nThere's gonna be better or worse ways for\nyour particular situation, all right?\n\n219\n00:11:38.584 --> 00:11:41.509\nAnd you can nest a user.\n\n220\n00:11:41.509 --> 00:11:42.832\nI went two levels here.\n\n221\n00:11:42.832 --> 00:11:44.306\nYou can go further than that.\n\n222\n00:11:44.306 --> 00:11:49.589\nYou will start running into some path\nlimitations if you make it too deep.\n\n223\n00:11:49.589 --> 00:11:53.919\nMicrosoft, say, two or three is\ntypically as far as we need to go.\n\n224\n00:11:53.919 --> 00:11:57.371\nIf you start going further than that,\nyou're getting down to the point where\n\n225\n00:11:57.371 --> 00:11:59.612\nthere's only one object in each folder,\nright?\n\n226\n00:11:59.612 --> 00:12:04.105\nIf you think about your pictures,\nyou've already got it divided by year,\n\n227\n00:12:04.105 --> 00:12:05.188\nthen by holiday.\n\n228\n00:12:05.188 --> 00:12:08.149\nIf you're trying to subdivide it any more,\nwhat are you going to do?\n\n229\n00:12:08.149 --> 00:12:09.506\nFamily versus friends?\n\n230\n00:12:09.506 --> 00:12:13.744\nAnd even more, mother, father, brother.\n\n231\n00:12:13.744 --> 00:12:17.540\nYou can get a little too far, and\nit really doesn't do you any good.\n\n232\n00:12:17.540 --> 00:12:19.143\nAnd the same thing here.\n\n233\n00:12:19.143 --> 00:12:23.577\nSo, limit it to two or three,\nbut there's not a hard fast rule.\n\n234\n00:12:23.577 --> 00:12:28.317\nYou can pretty much go as far as you need\nto until we run into our path limitation.\n\n235\n00:12:28.317 --> 00:12:31.975\n>> Alright, Mike, let's make sure that we\nreview this because you just went through\n\n236\n00:12:31.975 --> 00:12:34.450\na ton of different things here\n[LAUGH] As we go on through.\n\n237\n00:12:34.450 --> 00:12:38.660\nSo remember that organizational units one\nhelp us to organize our objects that we're\n\n238\n00:12:38.660 --> 00:12:39.306\ngonna have.\n\n239\n00:12:39.306 --> 00:12:41.721\nAnd you might be thinking like,\nI've only got 10 users.\n\n240\n00:12:41.721 --> 00:12:46.245\nThe organization maybe Mike, really as\nsimple as having one OU if we needed to.\n\n241\n00:12:46.245 --> 00:12:46.954\n>> Mm-hm.\n\n242\n00:12:46.954 --> 00:12:50.591\n>> But we could actually be in a large\norganization which we can have hundreds\n\n243\n00:12:50.591 --> 00:12:54.357\nof OUs, possibly even thousands of OUs\ndepending on how you organize them.\n\n244\n00:12:54.357 --> 00:12:56.157\nSo organization is pretty much key.\n\n245\n00:12:56.157 --> 00:12:59.396\nSecondly we can also talk about\nthe idea of delegation right?\n\n246\n00:12:59.396 --> 00:13:04.151\nThe ability to say look, we're actually\ngoing to assign the administrative\n\n247\n00:13:04.151 --> 00:13:07.590\nresponsibility to a group or\nto maybe a single-user and\n\n248\n00:13:07.590 --> 00:13:12.218\ndo it maybe by location are even by\nthe type of computer that Mike showed us.\n\n249\n00:13:12.218 --> 00:13:16.012\nSo it all depends on how your organization\nchooses to actually say who's gonna manage\n\n250\n00:13:16.012 --> 00:13:19.069\nwhat and how that administration's\ngoing to happen, and finally,\n\n251\n00:13:19.069 --> 00:13:20.930\nMike mentioned the idea of group policy.\n\n252\n00:13:20.930 --> 00:13:25.006\nNow, this is the one that you\nsee Mike just glossed over.\n\n253\n00:13:25.006 --> 00:13:26.415\nHe mentioned it, and\n\n254\n00:13:26.415 --> 00:13:31.756\nthe reason why is that there's gonna be\ncomplete other shows on group policies.\n\n255\n00:13:31.756 --> 00:13:34.018\nAnd it is a huge topic unto itself.\n\n256\n00:13:34.018 --> 00:13:38.188\nBut group policy allows us to be able to\ntake that one setting that we need, or\n\n257\n00:13:38.188 --> 00:13:41.186\nthat one piece of information or\npolicy that we need and\n\n258\n00:13:41.186 --> 00:13:43.161\nbe able to apply it where we need to.\n\n259\n00:13:43.161 --> 00:13:46.975\nAnd instead of having to individually\nisolate them, we can apply them to\n\n260\n00:13:46.975 --> 00:13:50.866\nthe entire group or we can actually\napply them just to that individual OU.\n\n261\n00:13:50.866 --> 00:13:54.306\nOUs are normally the recommended or the\nbest practice to be able to do that cuz\n\n262\n00:13:54.306 --> 00:13:58.036\nthat actually says it gets exactly who you\nwant, and that's what we want as well.\n\n263\n00:13:58.036 --> 00:13:59.175\nSo remember that.\n\n264\n00:13:59.175 --> 00:14:01.167\nDelegation, the idea of organization and\n\n265\n00:14:01.167 --> 00:14:04.002\nof course policy Is the reason\nwhy we wanna use these things.\n\n266\n00:14:04.002 --> 00:14:06.687\nBut there's probably a lot more that\nMike's gonna show us now so Mike,\n\n267\n00:14:06.687 --> 00:14:07.779\nwhat else do we have to go on?\n\n268\n00:14:07.779 --> 00:14:11.171\n>> Yeah now that we've got the concept of\nwhat they are, where we're gonna use them,\n\n269\n00:14:11.171 --> 00:14:13.462\nwhy we're gonna use them,\nlet's see how we make them.\n\n270\n00:14:13.462 --> 00:14:13.984\n>> Right.\n\n271\n00:14:13.984 --> 00:14:17.618\n>> Let's dive into active directory here,\nand I've got on my screen,\n\n272\n00:14:17.618 --> 00:14:19.507\nI still have active director open.\n\n273\n00:14:19.507 --> 00:14:24.745\nAnd like I said, to speed up this process,\nbecause I am a painfully slow typer.\n\n274\n00:14:24.745 --> 00:14:26.555\n[LAUGH] I've already created a few.\n\n275\n00:14:26.555 --> 00:14:28.901\nLike I've got my client computers OU.\n\n276\n00:14:28.901 --> 00:14:33.008\nAnd then inside there,\nI've got Gainesville and\n\n277\n00:14:33.008 --> 00:14:35.564\nNew York City, or GNV and NYC.\n\n278\n00:14:35.564 --> 00:14:37.742\nI have my employees OU, and\n\n279\n00:14:37.742 --> 00:14:43.160\nmaybe I've divided it underneath\nby department or job role there.\n\n280\n00:14:43.160 --> 00:14:46.119\nNow and again,\nthink about what I'm trying to do.\n\n281\n00:14:46.119 --> 00:14:49.626\nI might have settings that\napply to all employees.\n\n282\n00:14:49.626 --> 00:14:52.541\nUsing group policy I can link\nthat to the employees OU and\n\n283\n00:14:52.541 --> 00:14:55.154\neverything inside there\nwould get that setting.\n\n284\n00:14:55.154 --> 00:14:59.704\nBut if I didn't subdivide, what if I had\na setting that only applied to hosts?\n\n285\n00:14:59.704 --> 00:15:02.317\nIf all of my employees\nwere in a single OU,\n\n286\n00:15:02.317 --> 00:15:06.291\nhow would I separate out the host\nfrom everybody else, right.\n\n287\n00:15:06.291 --> 00:15:10.167\nBy subdividing this,\nnow I can do all employees, but\n\n288\n00:15:10.167 --> 00:15:13.193\nI can also do just, the host, all right.\n\n289\n00:15:13.193 --> 00:15:18.591\nThat's the thing we've gotta think about\nwhen we're setting this up, all right.\n\n290\n00:15:18.591 --> 00:15:20.413\nAll right, so now let's see.\n\n291\n00:15:20.413 --> 00:15:24.047\nTo create a new OU, well, we could do\nit in active directory right here.\n\n292\n00:15:24.047 --> 00:15:25.232\nIt's pretty straightforward.\n\n293\n00:15:25.232 --> 00:15:29.333\nIf I click on that employee's OU,\nI can right click on it and\n\n294\n00:15:29.333 --> 00:15:32.049\nI can choose new organizational unit.\n\n295\n00:15:32.049 --> 00:15:35.188\nI can also select where\nI want to make it and\n\n296\n00:15:35.188 --> 00:15:38.888\ngo up to the top here and\nchoose the new OU button.\n\n297\n00:15:38.888 --> 00:15:43.916\nEither one is going to launch this new\nobject organizational unit wizard.\n\n298\n00:15:43.916 --> 00:15:48.315\nYou can see for\nOUs it's really pretty simple, right?\n\n299\n00:15:48.315 --> 00:15:51.519\nThere's not a lot of information that\nI had to provide to create an OU.\n\n300\n00:15:51.519 --> 00:15:52.065\nI need a name.\n\n301\n00:15:52.065 --> 00:15:54.445\nAnd let's see what we've\nalready got there.\n\n302\n00:15:54.445 --> 00:15:57.788\nDevelopment host sales,\nwhat else do we need here Ronnie?\n\n303\n00:15:57.788 --> 00:15:58.520\n>> Administration.\n\n304\n00:15:58.520 --> 00:15:59.146\n>> Administration.\n\n305\n00:15:59.146 --> 00:16:01.817\n>> Now that's actually a great point Mike.\n\n306\n00:16:01.817 --> 00:16:06.228\nLet's say by naming this OU here, is there\nany special pattern I have to follow?\n\n307\n00:16:06.228 --> 00:16:09.959\nI know sometimes we talk about making\nsure there's no spaces in the name,\n\n308\n00:16:09.959 --> 00:16:11.054\nanything like that?\n\n309\n00:16:11.054 --> 00:16:13.375\n>> You wanna keep them short,\nsweet, to the point.\n\n310\n00:16:13.375 --> 00:16:15.826\nYou don't wanna make them cryptic,\nall right?\n\n311\n00:16:15.826 --> 00:16:18.137\nI don't wanna use like,\ntwo letter abbreviations and so\n\n312\n00:16:18.137 --> 00:16:20.796\npeople have to have a cheat sheet\nto figure out what that OU is for.\n\n313\n00:16:20.796 --> 00:16:23.907\nSo I like to to use full words.\n\n314\n00:16:23.907 --> 00:16:28.076\nSpace wise, years ago,\ndidn't want any spaces in there at all.\n\n315\n00:16:28.076 --> 00:16:30.199\nNow, you can see my client computers.\n\n316\n00:16:30.199 --> 00:16:31.778\nI have a space in there.\n\n317\n00:16:31.778 --> 00:16:35.515\nIt makes it a little bit easier\nto read and easier to work with.\n\n318\n00:16:35.515 --> 00:16:39.376\nThe one thing youre gonna have to keep in\nmind though, if you put spaces in those\n\n319\n00:16:39.376 --> 00:16:42.888\nnames, any time you're working from\nthe command line or power shell,\n\n320\n00:16:42.888 --> 00:16:46.480\nyou're now gonna have to delimit it,\nright, cuz it's gonna see that.\n\n321\n00:16:46.480 --> 00:16:48.522\nThat space as the end of the word and\n\n322\n00:16:48.522 --> 00:16:51.419\nit doesn't know that\nthe next word goes with it.\n\n323\n00:16:51.419 --> 00:16:54.879\nSo, you gotta put quotes\naround the whole thing to say,\n\n324\n00:16:54.879 --> 00:16:57.321\nclient computers is one word, right?\n\n325\n00:16:57.321 --> 00:17:00.376\nSo, you can say, if you do a lot\nof work from the command line and\n\n326\n00:17:00.376 --> 00:17:04.013\na lot of work from power shell and you\ndon't want to have to put quotes around\n\n327\n00:17:04.013 --> 00:17:06.867\nall these names then,\nmaybe just leave out those spaces.\n\n328\n00:17:06.867 --> 00:17:08.736\n>> Thank you for\nusing that word, delimited.\n\n329\n00:17:08.736 --> 00:17:11.823\nI don't have a clue what that meant but\nI'm glad you said quotes around it.\n\n330\n00:17:11.823 --> 00:17:14.505\nCuz I would have been really\nlost after that point Mike.\n\n331\n00:17:14.505 --> 00:17:16.283\n>> [LAUGH]\n>> So thanks for clearing that.\n\n332\n00:17:16.283 --> 00:17:16.804\n>> No problem.\n\n333\n00:17:16.804 --> 00:17:20.013\nAll right so let's make a new OU.\n\n334\n00:17:20.013 --> 00:17:20.681\nActually we did.\n\n335\n00:17:20.681 --> 00:17:21.760\nWe made one called administration.\n\n336\n00:17:21.760 --> 00:17:23.149\n[LAUGH]\n>> He got me so sidetracked,\n\n337\n00:17:23.149 --> 00:17:23.780\nI forgot what we did.\n\n338\n00:17:23.780 --> 00:17:26.044\nSo pretty easy to create in here.\n\n339\n00:17:26.044 --> 00:17:30.652\nOne of the things you might have noticed,\nwhen I created that new OU there's\n\n340\n00:17:30.652 --> 00:17:34.396\nan option here protect container\nfrom accidental deletion,\n\n341\n00:17:34.396 --> 00:17:36.210\nthat's enabled by default.\n\n342\n00:17:36.210 --> 00:17:38.543\nLet's say I decide I don't\nwant that OU anymore.\n\n343\n00:17:38.543 --> 00:17:42.364\nI right click on it and\nI choose to delete it.\n\n344\n00:17:42.364 --> 00:17:45.265\nAnd it says are you sure\nyou want to delete it?\n\n345\n00:17:45.265 --> 00:17:45.834\nYeah, I'm sure.\n\n346\n00:17:45.834 --> 00:17:48.307\nIt says you don't have permission right?\n\n347\n00:17:48.307 --> 00:17:50.781\nAnd that's all it used to say,\nit was kinda funny.\n\n348\n00:17:50.781 --> 00:17:53.759\nIt said you don't have permissions\nto delete this, and I kept thinking,\n\n349\n00:17:53.759 --> 00:17:54.392\nwait a second.\n\n350\n00:17:54.392 --> 00:17:57.422\nI'm the domain admin,\nwhat do you mean I don't have permissions?\n\n351\n00:17:57.422 --> 00:17:59.722\nNow they've modified the error to include,\nor\n\n352\n00:17:59.722 --> 00:18:02.320\nthis object is protected\nfrom accidental deletion.\n\n353\n00:18:02.320 --> 00:18:06.163\nBecause when that first came out we\nweren't aware of that option in there and\n\n354\n00:18:06.163 --> 00:18:08.217\nI was like, why can't I delete this OU?\n\n355\n00:18:08.217 --> 00:18:11.108\nSo what you would have to do if\nI really wanted to delete it,\n\n356\n00:18:11.108 --> 00:18:13.062\nI've got to pull up its properties,.\n\n357\n00:18:13.062 --> 00:18:15.282\nBut if you just pull up the properties,\n\n358\n00:18:15.282 --> 00:18:17.780\nthere's nowhere in here\nto get rid of that.\n\n359\n00:18:17.780 --> 00:18:21.008\nSo you have to turn on your advanced view.\n\n360\n00:18:21.008 --> 00:18:24.780\nYou have to go up to your view menu,\nchoose advanced features.\n\n361\n00:18:24.780 --> 00:18:28.498\nIt'll reset your active directory view,\n\n362\n00:18:28.498 --> 00:18:32.531\ngo back down to employees, administration.\n\n363\n00:18:32.531 --> 00:18:38.236\nNow if I pull up the properties and\nI go to the object tab which wasn't there\n\n364\n00:18:38.236 --> 00:18:43.954\nbefore, I can now uncheck protect\nthe object from accidental deletion.\n\n365\n00:18:43.954 --> 00:18:49.770\nNow I can right click on that and\nI can choose delete and it should go away.\n\n366\n00:18:49.770 --> 00:18:53.597\n>> Now Mike, that looked intentional so\nit apparently cannot tell the difference\n\n367\n00:18:53.597 --> 00:18:55.952\nbetween accidental and\nintentional deletion.\n\n368\n00:18:55.952 --> 00:18:56.452\n>> It cannot.\n\n369\n00:18:56.452 --> 00:18:57.009\n>> Okay.\n\n370\n00:18:57.009 --> 00:18:59.658\n[LAUGH]\n>> It can, it's a safety check for\n\n371\n00:18:59.658 --> 00:19:02.558\nyou because what if there\nwas users in there, right?\n\n372\n00:19:02.558 --> 00:19:07.317\nIf I delete that OU accidentally and\nthere was a dozen, 20 users in In there.\n\n373\n00:19:07.317 --> 00:19:08.410\nThey're all gone too, now.\n\n374\n00:19:08.410 --> 00:19:12.468\nSo you gotta be really careful, and that's\nwhy that option is turned on by default,\n\n375\n00:19:12.468 --> 00:19:15.840\nso that somebody doesn't go,\nwe're not using that OU any more,\n\n376\n00:19:15.840 --> 00:19:17.316\nright click, delete.\n\n377\n00:19:17.316 --> 00:19:20.407\nSmack, somebody had all\nthese users in there.\n\n378\n00:19:20.407 --> 00:19:21.929\nComputers in there now, they're gone.\n\n379\n00:19:21.929 --> 00:19:23.606\nYou're looking for a backup tape and\n\n380\n00:19:23.606 --> 00:19:25.943\nyou're hoping you can\nrestore that information.\n\n381\n00:19:25.943 --> 00:19:28.195\nSo no good, no bueno.\n\n382\n00:19:28.195 --> 00:19:31.538\n[LAUGH] All right,\nhow else can we create these OUs?\n\n383\n00:19:31.538 --> 00:19:35.893\nWell, we can use good\nold PowerShell Shell.\n\n384\n00:19:35.893 --> 00:19:38.760\nYeah, I'll launch up PowerShell and,\nRonnie, let me bump up my.\n\n385\n00:19:38.760 --> 00:19:39.271\n>> Please do.\n\n386\n00:19:39.271 --> 00:19:40.153\n>> Font for you.\n\n387\n00:19:40.153 --> 00:19:41.476\n[LAUGH] I know you like it when I do that.\n\n388\n00:19:41.476 --> 00:19:42.301\n>> I do.\n\n389\n00:19:42.301 --> 00:19:44.739\n>> So let me get this guy going.\n\n390\n00:19:44.739 --> 00:19:48.477\nJust make it a little bit easier for\nus to see out there in TV land.\n\n391\n00:19:48.477 --> 00:19:50.357\n>> Hopefully make it easier for\nyou to type.\n\n392\n00:19:50.357 --> 00:19:51.438\n[LAUGH]\n>> As well as me, yeah.\n\n393\n00:19:51.438 --> 00:19:53.596\nBecause if you've seen my typing,\nit's painful.\n\n394\n00:19:53.596 --> 00:19:58.081\nAll right, so if I wanna create\na new organizational unit,\n\n395\n00:19:58.081 --> 00:20:02.132\nthe command is simply\nnew-ADOrganizationalunit.\n\n396\n00:20:02.132 --> 00:20:03.916\nAnd, no, I can't type that fast,\n\n397\n00:20:03.916 --> 00:20:06.543\nthat's the good old t ab\nautofill from PowerShell.\n\n398\n00:20:06.543 --> 00:20:07.612\nIt’s a wonderful thing.\n\n399\n00:20:07.612 --> 00:20:10.850\nAll right, so new-ADOrganizationalunit,\n\n400\n00:20:10.850 --> 00:20:15.004\nI have to tell it what I want\nto call it s o -name, all right.\n\n401\n00:20:15.004 --> 00:20:17.503\nAnd let's see Ronnie, let's make one.\n\n402\n00:20:17.503 --> 00:20:20.671\nLet's do that administrator's\nOU again that I just deleted.\n\n403\n00:20:20.671 --> 00:20:23.546\nWe'll say administrators.\n\n404\n00:20:23.546 --> 00:20:25.630\nIf I can spell.\n\n405\n00:20:25.630 --> 00:20:26.421\nRight.\n\n406\n00:20:26.421 --> 00:20:29.297\nThen you've got to tell it\nwhere you want to put it.\n\n407\n00:20:29.297 --> 00:20:35.998\nAnd that's going to be\nwith my -path command.\n\n408\n00:20:35.998 --> 00:20:40.296\nNow the path has to be inputed\nas a distinguished name.\n\n409\n00:20:40.296 --> 00:20:43.885\nThe distinguished name is the path\nof the object in active directory.\n\n410\n00:20:43.885 --> 00:20:49.195\nRemember, if I'm in the active directory\nuser's computer I'm right clicking where I\n\n411\n00:20:49.195 --> 00:20:51.425\nwant to create the OU.\n\n412\n00:20:51.425 --> 00:20:55.045\nI right clicked on employees and\nsaid new OU and I gave it a name.\n\n413\n00:20:55.045 --> 00:20:57.718\nIt didn't ask me for\nwhere because it already knows where.\n\n414\n00:20:57.718 --> 00:21:01.943\nI right clicked on the OU that I wanted\nto make the new OU inside, right?\n\n415\n00:21:01.943 --> 00:21:03.082\nIt's that easy.\n\n416\n00:21:03.082 --> 00:21:08.368\nFrom Powershell Shell though, it has no\nidea where I want to create that new OU.\n\n417\n00:21:08.368 --> 00:21:12.171\nSo I do have to specify this path, and\n\n418\n00:21:12.171 --> 00:21:16.587\nif I want to put it\ninside the employees OU,\n\n419\n00:21:16.587 --> 00:21:21.374\nI'm going to have to OU\nequals employees comma\n\n420\n00:21:21.374 --> 00:21:26.405\ndc equals employee is at\nthe root of my domain, so\n\n421\n00:21:26.405 --> 00:21:32.297\nthere would be DC equals lab\ncomma DC equals ITpro comma,\n\n422\n00:21:32.297 --> 00:21:35.647\nDC equals TV, and end my quote.\n\n423\n00:21:35.647 --> 00:21:39.078\nNow technically I don't have any\nspaces anywhere in there, so\n\n424\n00:21:39.078 --> 00:21:42.767\nI probably could have left the quotes\noff just a good habit to get into\n\n425\n00:21:42.767 --> 00:21:46.000\nis to put quotes around to\ndistinguish names like that.\n\n426\n00:21:46.000 --> 00:21:50.906\nAnd there's another option you can do,\nprotect from accidental deletion.\n\n427\n00:21:50.906 --> 00:21:53.766\nThat little check mark that\nI had when I was in the GUI,\n\n428\n00:21:53.766 --> 00:21:56.499\nwell I've got that option\nfrom power show as well,\n\n429\n00:21:56.499 --> 00:22:00.590\nI've just have to type out that parameter,\nbut it's turned on by default.\n\n430\n00:22:00.590 --> 00:22:06.097\nSo if I want to turn that off I\ncould do a dollar sign false, right?\n\n431\n00:22:06.097 --> 00:22:09.652\nIf I wanted to I could do a dollar\nsign true to turn it on, or\n\n432\n00:22:09.652 --> 00:22:12.035\nI could just leave it out altogether.\n\n433\n00:22:12.035 --> 00:22:16.885\nIt will default to turning that on\nto protect from accidental deletion.\n\n434\n00:22:16.885 --> 00:22:20.575\nSo I go ahead and hit enter, and\nyou know how PowerShell works,\n\n435\n00:22:20.575 --> 00:22:24.485\nno red text is a good thing, so\nif we flip back over to active directory,\n\n436\n00:22:24.485 --> 00:22:29.315\nwe'll see my new, no, where did it go?\n\n437\n00:22:29.315 --> 00:22:33.493\nOne of the things about these MMCs that\nyou have to get used to in Windows is\n\n438\n00:22:33.493 --> 00:22:35.699\nthey don't refresh automatically.\n\n439\n00:22:35.699 --> 00:22:40.297\nI already had this window open and so\nI made that OU, but nothing changed here.\n\n440\n00:22:40.297 --> 00:22:42.155\nI do have to refresh my view.\n\n441\n00:22:42.155 --> 00:22:46.865\nAnd there is my administrator's OU, and\nif we pull up the properties for that guy,\n\n442\n00:22:48.325 --> 00:22:53.245\nwe should see that it is protected\nfrom accidental deletion.\n\n443\n00:22:53.245 --> 00:22:56.455\nSo creating from power shell there,\npretty straight forward.\n\n444\n00:22:56.455 --> 00:22:59.945\nIt's not a difficult command,\nnew-80 organizationalunit.\n\n445\n00:22:59.945 --> 00:23:04.475\nThe biggest challenge is probably\nlearning that distinguish name.\n\n446\n00:23:04.475 --> 00:23:09.415\nAgain, that's really the path to\nthe object in Active Directory backwards,\n\n447\n00:23:09.415 --> 00:23:11.615\nis what a lot of people\nlike to think of if.\n\n448\n00:23:11.615 --> 00:23:16.715\nIf we look back here,\nI'm in a domain called lab.itpro.tv.\n\n449\n00:23:16.715 --> 00:23:21.465\nSo you see each piece of my name\nis its own dc, domain component.\n\n450\n00:23:23.165 --> 00:23:24.485\nSo lab.itprotv?\n\n451\n00:23:24.485 --> 00:23:29.962\ndc equals lab comma,\ndc equals itpro comma, dc equals tv.\n\n452\n00:23:29.962 --> 00:23:34.810\nIf I was in a domain\ncalled us.contoso.com,\n\n453\n00:23:34.810 --> 00:23:38.040\nit would be dc equals us comma,\n\n454\n00:23:38.040 --> 00:23:42.536\nDC post Contoso comma, DC post com right?\n\n455\n00:23:42.536 --> 00:23:46.146\nAnd then if we were down from the domain,\nwhat's next?\n\n456\n00:23:46.146 --> 00:23:49.953\nEmployees and\nthere's my ou equals employees.\n\n457\n00:23:49.953 --> 00:23:51.629\nIf I wanted to make one inside,\n\n458\n00:23:51.629 --> 00:23:55.642\nalright let's find one where we could\ndo a couple levels of nesting here.\n\n459\n00:23:55.642 --> 00:24:00.495\nLet's say I want to make my desktop so\nyou inside that G and VOU.\n\n460\n00:24:00.495 --> 00:24:02.352\nWell let's do this.\n\n461\n00:24:02.352 --> 00:24:07.924\nWe'll type in new, let's clear that\nscreen, give us a little more room here.\n\n462\n00:24:07.924 --> 00:24:12.757\nWe'll say new-ADOrganizationUnit -Name,\n\n463\n00:24:12.757 --> 00:24:17.587\nand we're going to call this one desktops,\nand\n\n464\n00:24:17.587 --> 00:24:22.805\nthen dash path, and\nwe'll put it inside quotes.\n\n465\n00:24:22.805 --> 00:24:27.099\nAnd again I'm going to work\nmy way up from the new OU all\n\n466\n00:24:27.099 --> 00:24:29.588\nthe way back up to that domain.\n\n467\n00:24:29.588 --> 00:24:33.256\nSo if I want to make it inside GNV,\n\n468\n00:24:33.256 --> 00:24:39.025\nOU equals GNV comma GNV is\ninside client computers.\n\n469\n00:24:39.025 --> 00:24:43.223\nSo the next level is O U\nequals client computers.\n\n470\n00:24:43.223 --> 00:24:44.802\nAnd there's a space in there.\n\n471\n00:24:44.802 --> 00:24:47.615\nWe're okay because there's\nquotes around the whole things.\n\n472\n00:24:47.615 --> 00:24:48.725\nO equals client computers.\n\n473\n00:24:48.725 --> 00:24:51.595\nClient computers is at the root, so\n\n474\n00:24:51.595 --> 00:24:56.476\nthen we're right back to that\ndomain component dc equals lab\n\n475\n00:24:56.476 --> 00:25:01.565\ncomma dc equals itpro comma dc\nequals tv end my quote hit enter.\n\n476\n00:25:01.565 --> 00:25:02.866\nNo red text.\n\n477\n00:25:02.866 --> 00:25:07.931\nWe come over here and refresh, and\nthere's my desktop's OU inside GNV,\n\n478\n00:25:07.931 --> 00:25:10.475\nwhich was inside Client Computers.\n\n479\n00:25:10.475 --> 00:25:13.845\nSo, learning those distinguished names,\nyou've got to be familiar with those if\n\n480\n00:25:13.845 --> 00:25:16.915\nyou're going to work with these\nobjects from Power Shell.\n\n481\n00:25:16.915 --> 00:25:20.605\n>> Now Mike, do you think a site\nlike Tech Net, which I can't say,\n\n482\n00:25:20.605 --> 00:25:22.835\nwould help us to be able to learn\nthat syntax a little bit easier?\n\n483\n00:25:22.835 --> 00:25:23.485\n>> Absolutely.\n\n484\n00:25:23.485 --> 00:25:27.465\nJust go ahead and do a link for\nPowerShell or a quick Google search, or\n\n485\n00:25:27.465 --> 00:25:30.385\nI'm sorry, Bing search for PowerShell.\n\n486\n00:25:30.385 --> 00:25:32.275\nThis is a Microsoft show, by the way.\n\n487\n00:25:32.275 --> 00:25:32.895\nSo, yeah.\n\n488\n00:25:32.895 --> 00:25:37.365\nDo a quick search for PowerShell Or\nPower Shell syntax or\n\n489\n00:25:37.365 --> 00:25:41.355\nwith one of the commands\nnew-ad organizational unit.\n\n490\n00:25:41.355 --> 00:25:43.875\nPower Shell, these virtual machines\ndon't have internet access so\n\n491\n00:25:43.875 --> 00:25:46.095\nI don't know if I've\nupdated the help files.\n\n492\n00:25:46.095 --> 00:25:53.615\nBut you can always do a get -help and then\nthe command, new-ADOrganizationalUnit.\n\n493\n00:25:53.615 --> 00:25:56.275\nAnd yeah, I'm going to say no to run it.\n\n494\n00:25:56.275 --> 00:26:00.743\nSo it's going to have limited help\navailable without updating those help\n\n495\n00:26:00.743 --> 00:26:01.255\nfiles.\n\n496\n00:26:01.255 --> 00:26:05.332\nBut it's very good help, shows you\nthe syntax, all the optional commands,\n\n497\n00:26:05.332 --> 00:26:09.535\nand if you update the help files, it'll\nactually give you examples like if this\n\n498\n00:26:09.535 --> 00:26:12.504\nis what you want to do it this way,\nand things like that.\n\n499\n00:26:12.504 --> 00:26:16.995\nSo great help built right\nthere into power shell.\n\n500\n00:26:16.995 --> 00:26:19.835\nAll right Ronny, I think the last\nthing I wanted to show you.\n\n501\n00:26:19.835 --> 00:26:21.605\nWe talked about the,\nwell, a couple things.\n\n502\n00:26:21.605 --> 00:26:24.385\nLet's talk about those\ndefault locations again.\n\n503\n00:26:24.385 --> 00:26:28.215\nWe'll talk more about this\nwhen we get into group policy.\n\n504\n00:26:28.215 --> 00:26:32.790\nBut the default location for computers\nis this computer's container, right?\n\n505\n00:26:32.790 --> 00:26:36.950\nAnd the problem with that is\nthat I can't create sub OUs.\n\n506\n00:26:36.950 --> 00:26:40.400\nNotice my little OU button is grayed out.\n\n507\n00:26:40.400 --> 00:26:44.570\nI can't right click on here and\nchoose new organizational unit.\n\n508\n00:26:44.570 --> 00:26:47.620\nSo I can't divide it up,\nI also can't link group policy here and\n\n509\n00:26:47.620 --> 00:26:50.010\nI can't delegate administrative control.\n\n510\n00:26:50.010 --> 00:26:53.435\nSo I really don't like my new\ncomputer accounts going there.\n\n511\n00:26:53.435 --> 00:26:57.855\nTypically what were going to\ndo is make an OU for them.\n\n512\n00:26:57.855 --> 00:27:03.023\nI have some computers in Gainesville,\nsome in New York, I can't set the default\n\n513\n00:27:03.023 --> 00:27:07.887\nin both locations, but what I could do\nis create a new OU inside here, if I can\n\n514\n00:27:07.887 --> 00:27:12.755\nfind the word OU, and we can just call\nit new clients or something like that.\n\n515\n00:27:15.965 --> 00:27:19.415\nAnd then that's where I want\nall my new computers to go.\n\n516\n00:27:19.415 --> 00:27:20.225\nWhy?\n\n517\n00:27:20.225 --> 00:27:24.995\nBecause I'm going to have policies,\nsettings, that are applied to this client\n\n518\n00:27:24.995 --> 00:27:29.575\ncomputer's OU that affect all computers,\nwhether Gainesville or New York.\n\n519\n00:27:29.575 --> 00:27:34.095\nAnd by putting my new computers in here,\nat least they'll get those settings.\n\n520\n00:27:34.095 --> 00:27:36.945\nThey won't get the settings\nthat are specific to GNV,\n\n521\n00:27:36.945 --> 00:27:41.575\nuntil I move them out of client\ncomputers and into GNV, but it's better\n\n522\n00:27:41.575 --> 00:27:45.833\nthan being in the computer's container\nwhere they're not getting anything, right?\n\n523\n00:27:45.833 --> 00:27:47.775\nSo that's typically\nwhat we're going to do.\n\n524\n00:27:47.775 --> 00:27:53.165\nBut I've got to tell active directory this\nis the new location for Klein Computers.\n\n525\n00:27:53.165 --> 00:27:55.025\nAnd we do that with our command prompt.\n\n526\n00:27:55.025 --> 00:27:56.725\nYou can do this from Power Show as well.\n\n527\n00:27:56.725 --> 00:27:58.775\nI'll go ahead and\nopen up a command prompt.\n\n528\n00:27:58.775 --> 00:28:02.275\nAnd we'll pump up that font,\nsorry Ronnie I've got to adjust that one.\n\n529\n00:28:02.275 --> 00:28:03.085\nOn here as well.\n\n530\n00:28:03.085 --> 00:28:05.775\nLet's do a little font increase.\n\n531\n00:28:05.775 --> 00:28:08.055\nAnd make it a little bit whiter.\n\n532\n00:28:08.055 --> 00:28:11.695\nI don't know why they choose\nthat gray color for our default.\n\n533\n00:28:11.695 --> 00:28:14.223\nSo the command is simply redircmp.\n\n534\n00:28:14.223 --> 00:28:19.874\nNow I always pronounce that as a redircmp,\nredirect computers, right?\n\n535\n00:28:19.874 --> 00:28:22.126\nThat's all you're doing,\nredirect computers.\n\n536\n00:28:22.126 --> 00:28:26.295\nAnd then all I have to do is tell\nit where I want that new one to be.\n\n537\n00:28:26.295 --> 00:28:29.995\nAnother time I've got to understand\nthose distinguished names, right.\n\n538\n00:28:29.995 --> 00:28:32.115\nAny time you're working\nfrom command line or\n\n539\n00:28:32.115 --> 00:28:35.935\npower shell, you've got to be comfortable\nwith those distinguished names.\n\n540\n00:28:35.935 --> 00:28:39.535\nSo I'm going to put it inside,\nOU equals new computers.\n\n541\n00:28:39.535 --> 00:28:40.815\nThere's a space in that.\n\n542\n00:28:40.815 --> 00:28:41.665\nNew clients, sorry.\n\n543\n00:28:42.875 --> 00:28:48.455\nNew clients, comma, that's inside\nan OU called client computers,\n\n544\n00:28:49.475 --> 00:28:54.788\ncomma, which is inside\nmy DC equals lab comma\n\n545\n00:28:54.788 --> 00:29:02.085\nDC equals IT PRO comma DC equals TV and\nmy quote, hit enter,\n\n546\n00:29:02.085 --> 00:29:08.075\nredirection was successful,\nnow computer's are joined to the domain.\n\n547\n00:29:08.075 --> 00:29:11.875\nTheir account will go here,\ninstead of that client computer OU.\n\n548\n00:29:11.875 --> 00:29:16.485\nAnd I still need to move them to\nthe appropriate location when I get\n\n549\n00:29:16.485 --> 00:29:19.845\naround to it, but it's better than having\nthem sit in that computer's container.\n\n550\n00:29:19.845 --> 00:29:21.785\nThat really doesn't do me any good.\n\n551\n00:29:21.785 --> 00:29:22.705\n>> All right, Mike.\n\n552\n00:29:22.705 --> 00:29:25.505\nSo that's a lot of information for\nus to kind of absorb and\n\n553\n00:29:25.505 --> 00:29:26.475\ndigest a little bit here.\n\n554\n00:29:26.475 --> 00:29:29.785\nBut what we just took a look at,\nright, is not only, of course,\n\n555\n00:29:29.785 --> 00:29:33.475\nthe reason why we talk about creating OUs,\nbut\n\n556\n00:29:33.475 --> 00:29:38.135\nalso how to, well not creating OUs,\nabout why we use OUs I should say.\n\n557\n00:29:38.135 --> 00:29:41.655\nBut we also took a look at\ncreating the OUs as well.\n\n558\n00:29:41.655 --> 00:29:43.895\nMike showed you the way\nthat I would do it.\n\n559\n00:29:43.895 --> 00:29:45.995\nJust simply right click and select OU.\n\n560\n00:29:45.995 --> 00:29:48.823\nEven Ronnie Wong can do it, and that\nmeans you of course can do it as well.\n\n561\n00:29:48.823 --> 00:29:53.069\nBut then he also showed us the Power Shell\nway of doing it as well, and\n\n562\n00:29:53.069 --> 00:29:57.689\nthis is something for those of us who\nmight actually need to maybe be able to\n\n563\n00:29:57.689 --> 00:30:01.189\ncreate many OUs and\npoints as well to be able to do that and\n\n564\n00:30:01.189 --> 00:30:05.658\nscript it out do whatever we need to,\nso it's a very powerful method for\n\n565\n00:30:05.658 --> 00:30:10.014\nus to also learn how to do and\nthen lastly we talk about that Redir CMP.\n\n566\n00:30:10.014 --> 00:30:10.734\n>> Yep, yep.\n\n567\n00:30:10.734 --> 00:30:14.516\n>> Yeah, Reader CMP command helps us to\ninstead of when we join a new computer\n\n568\n00:30:14.516 --> 00:30:18.728\ndomain that automatically puts it into\nthat computer's container that we really\n\n569\n00:30:18.728 --> 00:30:20.315\ncan't do anything with.\n\n570\n00:30:20.315 --> 00:30:21.746\nWe can create an OU and then, and\n\n571\n00:30:21.746 --> 00:30:24.087\nwe do have policies that\nneed be applied right away.\n\n572\n00:30:24.087 --> 00:30:25.797\nAnd also they'll fly right there,\n\n573\n00:30:25.797 --> 00:30:29.395\nright away to those brand new computers\nthat will need to be joined as well.\n\n574\n00:30:29.395 --> 00:30:31.392\nSo, it's a great amount of information.\n\n575\n00:30:31.392 --> 00:30:35.754\nOUs are kind of the building blocks that\nwe have of what active directory really\n\n576\n00:30:35.754 --> 00:30:36.625\nhelps us to do.\n\n577\n00:30:36.625 --> 00:30:40.785\nTo take all information,\nlike what Mike describe your organizer.\n\n578\n00:30:40.785 --> 00:30:42.865\nBe able to put the group policy to it.\n\n579\n00:30:42.865 --> 00:30:45.245\nBuild a delegate control and\naccess the way that we want to,\n\n580\n00:30:45.245 --> 00:30:49.365\nand that's really what group policy helps\nus to do is to provide the utmost and\n\n581\n00:30:49.365 --> 00:30:53.555\ncentralized control that we can\nhave throughout our entire domain.\n\n582\n00:30:53.555 --> 00:30:57.795\nAnd Mike, thank you again for\nactually showing us the benefits of using,\n\n583\n00:30:57.795 --> 00:30:58.675\nnot just like me.\n\n584\n00:30:58.675 --> 00:31:02.625\nUsing computers and users and\ntrying to do everything that we need to.\n\n585\n00:31:02.625 --> 00:31:07.055\nHaving it better organized is always going\nto be of course the best benefit for us.\n\n586\n00:31:07.055 --> 00:31:10.345\nSo Mike, any last words here on OUs?\n\n587\n00:31:10.345 --> 00:31:11.875\n>> I can't think of anything.\n\n588\n00:31:11.875 --> 00:31:15.505\nThe only thing I might say is there's\nalso a command to redirect user counts,\n\n589\n00:31:15.505 --> 00:31:17.505\nit's redir user.\n\n590\n00:31:17.505 --> 00:31:18.105\n>> What?\n\n591\n00:31:18.105 --> 00:31:21.205\n>> So yeah,\nit is crazy the way that works.\n\n592\n00:31:21.205 --> 00:31:24.555\nIt is one of those things, that I don't\nuse as often as the computers one,\n\n593\n00:31:24.555 --> 00:31:29.615\nbecause I am usually specifying a path\nwhen I create a user, either by right\n\n594\n00:31:29.615 --> 00:31:34.095\nclicking or if I am using Power Shell to\nimport a CSV file or something like that.\n\n595\n00:31:34.095 --> 00:31:38.015\nI am specifying the path or the OU I want\nto create it in, in the command there.\n\n596\n00:31:38.015 --> 00:31:42.095\nSo I don't have the same need for\nthat default location.\n\n597\n00:31:42.095 --> 00:31:44.825\nRemember, the default location\nis that user's container.\n\n598\n00:31:44.825 --> 00:31:48.485\nBut if you wanted to change it,\nit'd be the same thing, redir user,\n\n599\n00:31:48.485 --> 00:31:52.605\nand then the path to wherever you want\nall new user accounts to be created.\n\n600\n00:31:52.605 --> 00:31:53.935\n>> Sounds excellent.\n\n601\n00:31:53.935 --> 00:31:58.855\nThank you again, Mike, for joining on this\nshow, and thank you for watching today.\n\n602\n00:31:58.855 --> 00:32:00.960\nSigning off for IT pro TV,\nI'm Ronnie Wong.\n\n603\n00:32:00.960 --> 00:32:01.681\n>> And I'm Mike Rodrick.\n\n604\n00:32:01.681 --> 00:32:08.855\n>> And we'll see you next time.\n\n",
          "vimeoId": "146125907"
        },
        {
          "description": "in this episode, Ronnie and Mike take a look at creating and administering user accounts in Active Directory.  These accounts are the primary unique objects that we can use to audit and give permissions to resources to in our Active Directory Domain.  So they take some time to show how to create them using the GUI and using Powershell to add in multiple accounts simultaneously.",
          "length": "2247",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/teckskills-activedirectory-3-2-user_accounts-110515-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/teckskills-activedirectory-3-2-user_accounts-110515-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/teckskills-activedirectory-3-2-user_accounts-110515-1-sm.jpg",
          "title": "User Accounts",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.742 --> 00:00:14.876\nWelcome to another exciting\nepisode here on IT Pro TV.\n\n3\n00:00:14.876 --> 00:00:15.956\nI'm your host Ronnie Wong.\n\n4\n00:00:15.956 --> 00:00:19.296\nAnd today we'll be taking a look\nat working with Active Directory,\n\n5\n00:00:19.296 --> 00:00:21.800\nspecifically talking about user accounts.\n\n6\n00:00:21.800 --> 00:00:25.140\nAnd who better to help us than the Active\nDirectory master himself, Mike Rodrick.\n\n7\n00:00:25.140 --> 00:00:25.950\nHow's it going?\n\n8\n00:00:25.950 --> 00:00:26.850\n>> It's going great.\n\n9\n00:00:26.850 --> 00:00:28.430\nRonnie, I'm excited as\nalways because again,\n\n10\n00:00:28.430 --> 00:00:30.850\nwe're talking about Active Directory.\n\n11\n00:00:30.850 --> 00:00:33.540\nSo, in this episode as you said\ntalking about user accounts and\n\n12\n00:00:33.540 --> 00:00:35.379\nwe'll go through a few different things.\n\n13\n00:00:35.379 --> 00:00:39.086\nFirst off, why we have them, what we use\nthem for, and then we'll take a look\n\n14\n00:00:39.086 --> 00:00:42.704\nat a couple of different ways we can\ngo about creating these user accounts.\n\n15\n00:00:42.704 --> 00:00:47.450\nAnd, Ronnie a big part of our job in\nIT does revolve around dealing with\n\n16\n00:00:47.450 --> 00:00:48.985\nthese user accounts.\n\n17\n00:00:48.985 --> 00:00:52.433\n>> Yeah, there's no doubt that we're\nactually gonna have that idea going on.\n\n18\n00:00:52.433 --> 00:00:56.725\nBut Mike, I can just as simply inside of\nActive Directory under the users here,\n\n19\n00:00:56.725 --> 00:00:59.944\nmake user one, user two,\nuser three, user one thousand.\n\n20\n00:00:59.944 --> 00:01:01.174\nThat would be fine.\n\n21\n00:01:01.174 --> 00:01:02.184\nWouldn't that work?\n>> Absolutely.\n\n22\n00:01:02.184 --> 00:01:03.147\n[LAUGH]\n>> [LAUGH]\n\n23\n00:01:03.147 --> 00:01:04.137\n>> If you can remember who\n\n24\n00:01:04.137 --> 00:01:05.239\neverybody was, right.\n\n25\n00:01:05.239 --> 00:01:08.944\nUsers accounts do play an important\nroll when it comes to security,\n\n26\n00:01:08.944 --> 00:01:12.025\nand that's really one of\nthe big reasons we have them.\n\n27\n00:01:12.025 --> 00:01:15.045\nLet's think about a world without\nuser accounts for a second.\n\n28\n00:01:15.045 --> 00:01:17.595\nA lot of you are probably\nactually familiar with this.\n\n29\n00:01:17.595 --> 00:01:21.515\nHow many of you have a computer that sits\nat home, that's just always logged on?\n\n30\n00:01:21.515 --> 00:01:24.050\nAnd everybody in the in\nthe household uses that computer.\n\n31\n00:01:24.050 --> 00:01:27.330\nAnytime they need to they just sit down,\nthey open up their search engine,\n\n32\n00:01:27.330 --> 00:01:31.630\nthey do whatever it is they wanna do on\nthat machine and then they walk away.\n\n33\n00:01:31.630 --> 00:01:34.770\nAnd that works fine\nuntil you wanna track or\n\n34\n00:01:34.770 --> 00:01:36.305\nyou wanna keep track of who's doing what.\n\n35\n00:01:36.305 --> 00:01:41.005\nWith a system like that,\nyou have no what we call accountability.\n\n36\n00:01:41.005 --> 00:01:46.105\nI can't tell which one of my children\ndeleted that file, or created\n\n37\n00:01:46.105 --> 00:01:50.320\nthat shortcut, or went to that webpage,\nbecause we're all using the same account.\n\n38\n00:01:50.320 --> 00:01:52.340\nThat's why we don't do\nthat in a work place.\n\n39\n00:01:52.340 --> 00:01:56.300\nEverybody has their own account with\nthe password that they only know and\n\n40\n00:01:56.300 --> 00:02:00.090\nthat gives us the ability\nto audit what's going on.\n\n41\n00:02:00.090 --> 00:02:03.940\nI can see that Ronnie logged onto his\nmachine at eight o' five in the morning\n\n42\n00:02:03.940 --> 00:02:08.340\nand that he accessed this file\nat eight 37 in the morning,\n\n43\n00:02:08.340 --> 00:02:13.760\nbecause in my event log it's going to say\nthe account., Ronny Wong read this file.\n\n44\n00:02:13.760 --> 00:02:15.550\nIf he didn't have his own account.\n\n45\n00:02:15.550 --> 00:02:17.270\nIf we just shared an account\namongst everybody.\n\n46\n00:02:17.270 --> 00:02:20.450\nThere'd be no way to\ndifferentiate between people.\n\n47\n00:02:20.450 --> 00:02:23.000\nAlso no way to control\nwhat access they have.\n\n48\n00:02:23.000 --> 00:02:25.430\nHow can I say,\nRonny can write to this file,\n\n49\n00:02:25.430 --> 00:02:29.240\nbut Mike cannot if we're\nusing the same account?\n\n50\n00:02:29.240 --> 00:02:31.160\nYou run into that again at home.\n\n51\n00:02:31.160 --> 00:02:33.990\nHow do you prevent your children\nfrom being on the computer past nine\n\n52\n00:02:33.990 --> 00:02:36.010\no'clock if they don't\nhave their own account.\n\n53\n00:02:36.010 --> 00:02:39.840\nI can't set up those parental controls,\nor do what have you.\n\n54\n00:02:39.840 --> 00:02:43.940\nUser accounts play a couple big roles in\nmaintaining the security of our systems.\n\n55\n00:02:43.940 --> 00:02:48.577\nThey give us the ability to audit, to\nmake sure we can track who's doing what,\n\n56\n00:02:48.577 --> 00:02:53.143\nwhen, and where, as well as control\naccess to prevent them from logging onto\n\n57\n00:02:53.143 --> 00:02:58.161\na particular machine, or to give them just\nread permission over a particular file.\n\n58\n00:02:58.161 --> 00:03:01.927\nThat's really why we\nhave these user accounts.\n\n59\n00:03:01.927 --> 00:03:04.706\n>> Now Mike, what we're trying to\ndo is really make sure that we\n\n60\n00:03:04.706 --> 00:03:07.270\nhave individuality in each\nof those user accounts, but\n\n61\n00:03:07.270 --> 00:03:10.723\nthere are companies that may have\nlet's say, like, 26 John Smith's.\n\n62\n00:03:10.723 --> 00:03:13.879\nWhat in the world is happening here\nin Active Directory that makes those\n\n63\n00:03:13.879 --> 00:03:14.624\nthings unique?\n\n64\n00:03:14.624 --> 00:03:18.733\n>> Well, they had what's known\nas an SID associated with them.\n\n65\n00:03:18.733 --> 00:03:23.238\nWhen you create a user account is\nwhat we call a security principle.\n\n66\n00:03:23.238 --> 00:03:24.212\nAnything.\n\n67\n00:03:24.212 --> 00:03:27.046\nA security principle is any object\nthat I can assign permissions to.\n\n68\n00:03:27.046 --> 00:03:29.995\nA user account is an example\nof a security principle.\n\n69\n00:03:29.995 --> 00:03:35.172\nA computer account, a group, would also\nbe considered a security principle.\n\n70\n00:03:35.172 --> 00:03:39.607\nIn every security principle has\na unique number associated with it.\n\n71\n00:03:39.607 --> 00:03:42.916\nThat's it's security identifier,\nor SID, and\n\n72\n00:03:42.916 --> 00:03:48.524\nthat number is actually made up of two\nnumbers plugged together, or concatenated.\n\n73\n00:03:48.524 --> 00:03:50.403\nRonnie loves when I use\nthose big words there.\n\n74\n00:03:50.403 --> 00:03:51.286\n>> Yeah.\n\n75\n00:03:51.286 --> 00:03:54.931\n>> The first part of the number\nis your domain identifier.\n\n76\n00:03:54.931 --> 00:03:59.441\nAnd every object in your domain\nshares the same domain identifier,\n\n77\n00:03:59.441 --> 00:04:04.359\nmuch like every person in your household\ntypically has the same surname.\n\n78\n00:04:04.359 --> 00:04:08.074\nBut every person in your In your\nhousehold has a unique first name.\n\n79\n00:04:08.074 --> 00:04:10.929\nWe can tell them apart, Jeff Rodrick\nfrom Jean Rodrick from Mike Rodrick.\n\n80\n00:04:10.929 --> 00:04:14.111\nAnd same thing with these SIDs.\n\n81\n00:04:14.111 --> 00:04:16.638\nThey all share a common domain identifier,\nbut\n\n82\n00:04:16.638 --> 00:04:20.590\ntacked onto the end of it is what's\ncalled a relative identifier.\n\n83\n00:04:20.590 --> 00:04:22.800\nAnd that's what makes that number unique.\n\n84\n00:04:22.800 --> 00:04:25.595\nThose relative identifiers are never,\never reused.\n\n85\n00:04:25.595 --> 00:04:30.855\nEvery time we make a new object,\nthe next relative identifier in the list\n\n86\n00:04:30.855 --> 00:04:34.365\nis plugged into the domain identifier and\nthat SID goes with that object.\n\n87\n00:04:34.365 --> 00:04:36.795\nIt's removed from that list\nof relative identifiers.\n\n88\n00:04:36.795 --> 00:04:40.730\nThen the next time you create a new\nobject it just grabs the next RID,\n\n89\n00:04:40.730 --> 00:04:44.598\nrelative identifier that's available,\nplugs it in with a SID and\n\n90\n00:04:44.598 --> 00:04:46.757\nnow that object has a unique number.\n\n91\n00:04:46.757 --> 00:04:50.212\nBut those rids, those relative\nidentifiers are never ever used.\n\n92\n00:04:50.212 --> 00:04:53.702\nAnd Ronnie that's how we keep those\nobject unique because as you said,\n\n93\n00:04:53.702 --> 00:04:56.976\nyou might have more than one\nRonnie Wong working for your company.\n\n94\n00:04:56.976 --> 00:04:57.566\n>> [CROSSTALK].\n\n95\n00:04:57.566 --> 00:04:59.029\n>> [LAUGH].\n\n96\n00:04:59.029 --> 00:05:03.042\n>> Now we do have to worry about log on\nnames, and there are some other things you\n\n97\n00:05:03.042 --> 00:05:06.426\ngot to make sure are unique as well,\nbut the SID is the big thing,\n\n98\n00:05:06.426 --> 00:05:10.020\nthat's what really identifies it\nto the system, to the computer.\n\n99\n00:05:10.020 --> 00:05:12.011\nTo the operating system,\nto the file system.\n\n100\n00:05:12.011 --> 00:05:15.911\nWe like the friendly display names and\nuser names.\n\n101\n00:05:15.911 --> 00:05:17.529\nThe computers really don't care.\n\n102\n00:05:17.529 --> 00:05:19.340\nYour just a number to the computer.\n\n103\n00:05:19.340 --> 00:05:24.188\nS dash one dash five dash nine dash\nblah blah blah blah blah blah blah.\n\n104\n00:05:24.188 --> 00:05:25.277\n>> That's very good. [LAUGH] >>\nA lot of your domain most of your\n\n105\n00:05:25.277 --> 00:05:26.888\ndomain identifiers are going\nto start with that.\n\n106\n00:05:26.888 --> 00:05:29.230\nThere are actually reasons for\neach one of those numbers.\n\n107\n00:05:29.230 --> 00:05:32.009\nThe S means something,\nthe one means something, but\n\n108\n00:05:32.009 --> 00:05:34.618\nwe don't really care about\nany of that right now.\n\n109\n00:05:34.618 --> 00:05:35.825\n>> [LAUGH].\n\n110\n00:05:35.825 --> 00:05:36.725\n>> So don't worry about that.\n\n111\n00:05:36.725 --> 00:05:38.775\n>> So, Michael, when we talk\nabout the idea of user accounts,\n\n112\n00:05:38.775 --> 00:05:41.395\nwhat we're really saying is\nthat everybody, hopefully,\n\n113\n00:05:41.395 --> 00:05:44.390\ninside our active directory, they're\ngoing to end up with one of those SIDs.\n\n114\n00:05:44.390 --> 00:05:46.335\n>> Um-hm.\n>> That's going to help uniquely identify\n\n115\n00:05:46.335 --> 00:05:49.470\nthem so that way we can associate those\npermissions as well as be able to do what\n\n116\n00:05:49.470 --> 00:05:53.110\nwe need to, to keep track of them\nthe where the auditing that we need.\n\n117\n00:05:53.110 --> 00:05:53.680\n>> Exactly.\nIt's\n\n118\n00:05:53.680 --> 00:05:56.270\nusually a part of most\ncompanies on boarding process.\n\n119\n00:05:56.270 --> 00:05:58.300\nAs you hire a new person to work for\nyour company,\n\n120\n00:05:58.300 --> 00:06:02.460\nif their gonna need access to computers or\nto your network your gonna create\n\n121\n00:06:02.460 --> 00:06:06.230\na user account for them,\nyour gonna give them their logon name.\n\n122\n00:06:06.230 --> 00:06:10.420\nUsually most organizations\nwill generate a password for\n\n123\n00:06:10.420 --> 00:06:12.360\nthat account and\nthen tell you what that is.\n\n124\n00:06:12.360 --> 00:06:14.590\nAnd then the first time you log logon.\n\n125\n00:06:14.590 --> 00:06:17.590\nYou'll change that password\nto something only you know.\n\n126\n00:06:17.590 --> 00:06:19.650\nAnd then, from then on out,\nthat is your account.\n\n127\n00:06:19.650 --> 00:06:23.240\nIt's associated with you, and that's how\nyou prove your identity to the network.\n\n128\n00:06:23.240 --> 00:06:26.100\nHow does it know who's\nsitting behind the keyboard?\n\n129\n00:06:26.100 --> 00:06:27.168\nIt can't see you.\n\n130\n00:06:27.168 --> 00:06:27.670\n[LAUGH].\n\n131\n00:06:27.670 --> 00:06:28.496\nEven if you have a camera.\n\n132\n00:06:28.496 --> 00:06:31.455\n>> [LAUGH].\n>> It doesn't know who you are.\n\n133\n00:06:31.455 --> 00:06:36.380\nBy logging on, you're telling the network,\nyou're telling the system who you\n\n134\n00:06:36.380 --> 00:06:40.810\nare because you typed in the right\npassword to go with that account.\n\n135\n00:06:40.810 --> 00:06:42.710\nIt says well that must be Mike,\n\n136\n00:06:42.710 --> 00:06:46.800\nbecause Mike surely didn't share\nhis password with anybody else.\n\n137\n00:06:46.800 --> 00:06:49.630\nAnd I know he didn't write it down and\nleave it laying anywhere.\n\n138\n00:06:49.630 --> 00:06:51.040\nSo that has to be Mike.\n\n139\n00:06:51.040 --> 00:06:52.700\nThat's the only way it knows.\n\n140\n00:06:52.700 --> 00:06:55.380\nThat's why it's so important, I joke, but\n\n141\n00:06:55.380 --> 00:06:58.715\nthat's why it's so important you don't\nshare your password with anybody else.\n\n142\n00:06:58.715 --> 00:07:01.065\nYou don't write it down and\nleave it somewhere for somebody to find.\n\n143\n00:07:01.065 --> 00:07:04.946\nBecause if I find Ronnie's password,\nand I sit down at a machine,\n\n144\n00:07:04.946 --> 00:07:06.624\nI know what his username is.\n\n145\n00:07:06.624 --> 00:07:09.630\nBecause everybody in the company\nis first initial, last name, or\n\n146\n00:07:09.630 --> 00:07:11.196\nwhatever your company might use.\n\n147\n00:07:11.196 --> 00:07:12.924\nIf I find his password, and I.\n\n148\n00:07:12.924 --> 00:07:18.551\nAnd I log on as Ronnie, how can\nthe system tell it's not actually Ronnie?\n\n149\n00:07:18.551 --> 00:07:21.480\nAnd it can't,\nunless you're using biometrics, right?\n\n150\n00:07:21.480 --> 00:07:23.016\nI am now Ronnie.\n\n151\n00:07:23.016 --> 00:07:25.892\nEverything I do will now\nbe traced back to Ronnie.\n\n152\n00:07:25.892 --> 00:07:30.638\nThe log entry is gonna say Ronnie Wong\ndeleted those user accounts at ten\n\n153\n00:07:30.638 --> 00:07:33.180\no'clock in the morning [LAUGH] right?\n\n154\n00:07:33.180 --> 00:07:36.036\nRonnie Wong formatted that drive\nup there on the file server.\n\n155\n00:07:36.036 --> 00:07:36.725\nHa ha.\n\n156\n00:07:36.725 --> 00:07:39.805\n>> [LAUGH] Good thing there's more\nthan one Ronnie Wong that works for\n\n157\n00:07:39.805 --> 00:07:42.221\nyour company then,\ncuz I'd really be in trouble.\n\n158\n00:07:42.221 --> 00:07:44.190\n>> Yeah, hopefully you can pass\nit off that way, [LAUGH] right?\n\n159\n00:07:44.190 --> 00:07:46.450\n[LAUGH] I swear it wasn't me.\n\n160\n00:07:46.450 --> 00:07:50.427\nAll right, so the next thing now that\nwe know what a user account is and\n\n161\n00:07:50.427 --> 00:07:54.078\nwhy we need them, let's see how\nwe can go about creating them.\n\n162\n00:07:54.078 --> 00:07:58.560\nAnd just like everything else,\nthere's more than one way to do it.\n\n163\n00:07:58.560 --> 00:08:00.026\nThere's the easy graphical user interface.\n\n164\n00:08:00.026 --> 00:08:01.930\n>> Yes!\n>> [LAUGH] That Ronnie loves.\n\n165\n00:08:01.930 --> 00:08:06.326\nAnd then, there's the PowerShell interface\nthat you geeks out there really like.\n\n166\n00:08:06.326 --> 00:08:07.179\n>> That Mike Rowe likes.\n\n167\n00:08:07.179 --> 00:08:07.679\n[LAUGH]\n>> Yeah.\n\n168\n00:08:07.679 --> 00:08:09.200\nCuz then you can script it, right?\n\n169\n00:08:09.200 --> 00:08:11.340\nWe could start automating this process.\n\n170\n00:08:11.340 --> 00:08:13.467\nAll right, so\nlet's take a look at my screen here, and\n\n171\n00:08:13.467 --> 00:08:15.008\nI've got Active Directory opened up.\n\n172\n00:08:15.008 --> 00:08:17.868\nAnd I'm gonna simply, to make a new user,\n\n173\n00:08:17.868 --> 00:08:21.530\nI'm gonna figure out where\nI want to create that user.\n\n174\n00:08:21.530 --> 00:08:26.262\nRemember, in another episode, we talked\nabout OUs, organizational units, and\n\n175\n00:08:26.262 --> 00:08:31.005\nhow they organize my objects, so I'm going\nto decide where I want to put this user.\n\n176\n00:08:31.005 --> 00:08:33.905\nI'm going to go into Development now,\ngo down to Production here.\n\n177\n00:08:33.905 --> 00:08:38.364\nAnd I can use my button up at the top,\nI can right-click right out there,\n\n178\n00:08:38.364 --> 00:08:40.778\nI could right-click on the OU itself,\n\n179\n00:08:40.778 --> 00:08:44.535\nall of those will launch the same\nwizard when I go New > User.\n\n180\n00:08:44.535 --> 00:08:45.657\nAll right.\n\n181\n00:08:45.657 --> 00:08:49.240\nAnd we've got to fill in\na few of these attributes.\n\n182\n00:08:49.240 --> 00:08:53.010\nAttributes are things\nthat describe an object.\n\n183\n00:08:53.010 --> 00:08:57.930\nLike if your car would be the object, an\nattribute might be the fact that it's red,\n\n184\n00:08:57.930 --> 00:09:00.971\nthat it's a stick shift,\nthat the tires are bald.\n\n185\n00:09:00.971 --> 00:09:03.200\n>> [LAUGH]\n>> Things like that.\n\n186\n00:09:03.200 --> 00:09:04.429\nThose describe that object.\n\n187\n00:09:04.429 --> 00:09:06.388\nSo, we'll give it a first name.\n\n188\n00:09:06.388 --> 00:09:08.275\nWe're going to call this Titus.\n\n189\n00:09:08.275 --> 00:09:13.250\nAnd then the last name is gonna be\na little Rush, one of my favorite groups.\n\n190\n00:09:13.250 --> 00:09:14.802\nShow you may age there.\n\n191\n00:09:14.802 --> 00:09:19.330\nFor logon, we're a small company,\nwe're just going to use first name.\n\n192\n00:09:19.330 --> 00:09:22.450\nAnd I'll go ahead, and right here,\nsomething we should probably mention,\n\n193\n00:09:22.450 --> 00:09:23.230\na couple of things.\n\n194\n00:09:23.230 --> 00:09:24.840\nAs you saw, I filled in the first name.\n\n195\n00:09:24.840 --> 00:09:26.670\nI filled in the last name.\n\n196\n00:09:26.670 --> 00:09:28.430\nIt took care of the full name for me.\n\n197\n00:09:28.430 --> 00:09:29.460\nRight?\nIt took what I put for\n\n198\n00:09:29.460 --> 00:09:31.580\nthe first name and\nwhat I put for the last name.\n\n199\n00:09:31.580 --> 00:09:36.110\nYou'll see if I change those,\nyou'll see it starts changing down there.\n\n200\n00:09:36.110 --> 00:09:39.850\nSo we'll put that back to Rush.\n\n201\n00:09:39.850 --> 00:09:41.380\nThe User logon name.\n\n202\n00:09:41.380 --> 00:09:45.490\nThis is my UPN, or my user principle name.\n\n203\n00:09:45.490 --> 00:09:49.212\nIt's gonna be the logon name,\n@, and then your DNS suffix,\n\n204\n00:09:49.212 --> 00:09:51.420\ntypically your domain name.\n\n205\n00:09:51.420 --> 00:09:52.970\nThat can be changed.\n\n206\n00:09:52.970 --> 00:09:53.990\nIn a forest.\n\n207\n00:09:53.990 --> 00:09:57.475\nWe've talked about this in other episodes.\n\n208\n00:09:57.475 --> 00:09:59.815\nAnd I've got lots of domains.\n\n209\n00:09:59.815 --> 00:10:03.445\nThe DNF suffix there can get long, right?\n\n210\n00:10:03.445 --> 00:10:07.529\nWhat if you're in\nus.training.lab.itpro.tv?\n\n211\n00:10:07.529 --> 00:10:09.754\nYou don't wanna log in with that,\n\n212\n00:10:09.754 --> 00:10:14.074\ntype in every time you log in\ntitus@us.training.lab.itpro.\n\n213\n00:10:14.074 --> 00:10:15.750\n>> [LAUGH]\n>> That's gonna get old, right?\n\n214\n00:10:15.750 --> 00:10:19.966\nSo you can actually create\nadditionally UPN suffixes,\n\n215\n00:10:19.966 --> 00:10:23.590\nlike nice, short ones, like just itpro.tv.\n\n216\n00:10:23.590 --> 00:10:24.922\nBut then, if I do that,\n\n217\n00:10:24.922 --> 00:10:28.814\nthis username has to be unique\nthroughout my entire forest, right?\n\n218\n00:10:28.814 --> 00:10:32.616\nSo if there's any other Tituses\nanywhere in any of those other domains,\n\n219\n00:10:32.616 --> 00:10:34.310\nthat's gonna cause a problem.\n\n220\n00:10:34.310 --> 00:10:37.210\nSo when your coming up with log on\nnames you've got to come up with\n\n221\n00:10:37.210 --> 00:10:39.479\na strategy that's gonna allow for\nduplication.\n\n222\n00:10:39.479 --> 00:10:42.612\nI have a very common name Mike.\nThere's gonna be more than one Mike, so\n\n223\n00:10:42.612 --> 00:10:46.330\nI cant use that first name\nas a logon name, typically.\n\n224\n00:10:46.330 --> 00:10:51.070\nThat's why you see companies doing weird\nthings like first initial, last name or\n\n225\n00:10:51.070 --> 00:10:56.880\nfirst name, the first two letters of\ntheir last name, things like this.\n\n226\n00:10:56.880 --> 00:11:00.340\nWe've got to be able to differentiate,\nsomehow make them unique.\n\n227\n00:11:00.340 --> 00:11:04.350\nAnd you don't want to have a Mike and\na Mike2, because Mike2's\n\n228\n00:11:04.350 --> 00:11:07.950\nnot going to feel all that special, or\nMike4, or anything like that, right?\n\n229\n00:11:07.950 --> 00:11:10.650\n>> Now Mike, that actually looks\nalmost like an email address.\n\n230\n00:11:10.650 --> 00:11:11.875\nIs that the same thing?\n\n231\n00:11:11.875 --> 00:11:13.260\n>> [COUGH] Excuse me.\n\n232\n00:11:13.260 --> 00:11:16.460\nIt typically is your email\naddress as well, yep.\n\n233\n00:11:16.460 --> 00:11:17.080\n>> Okay.\n>> All right.\n\n234\n00:11:17.080 --> 00:11:21.360\nThen below that, I've got what's\ncalled my pre-Windows 2000 logon.\n\n235\n00:11:21.360 --> 00:11:24.919\nAnd it's just the domain name,\nin this case LAB\\, and\n\n236\n00:11:24.919 --> 00:11:27.210\nthen whatever their logon name is.\n\n237\n00:11:27.210 --> 00:11:32.057\nNotice it changes as I type here,\nI don't have to fill them both in.\n\n238\n00:11:32.057 --> 00:11:36.766\nYou could make it different, but\nthat would be really confusing.\n\n239\n00:11:36.766 --> 00:11:39.530\n>> [LAUGH]\n>> So we don't typically want to do that.\n\n240\n00:11:39.530 --> 00:11:41.870\nSo I'll change that back to Titus.\n\n241\n00:11:41.870 --> 00:11:45.455\nIt's funny the Pre-Windows 2000,\nI mean, think about that Ronnie.\n\n242\n00:11:45.455 --> 00:11:47.366\n>> Pre-Windows 2000?\n>> Pre, I'm not saying Windows 2000,\n\n243\n00:11:47.366 --> 00:11:49.965\nI'm saying pre-Windows 2000,\nthis is back to the Windows NT days.\n\n244\n00:11:49.965 --> 00:11:51.690\nRight?\nAnd believe it or\n\n245\n00:11:51.690 --> 00:11:53.858\nnot, it's still the most\ncommon way within a gate.\n\n246\n00:11:53.858 --> 00:11:54.450\n>> [LAUGH]\n>> [LAUGH] Honestly.\n\n247\n00:11:54.450 --> 00:11:58.590\nYeah, so that's what that is,\nwe'll go ahead and click Next.\n\n248\n00:11:58.590 --> 00:12:01.580\nAnd then I've got to set his password.\n\n249\n00:12:01.580 --> 00:12:04.040\nUsually companies will\n\n250\n00:12:04.040 --> 00:12:08.940\ncreate kind of a generic password that\nthey use when they create new accounts.\n\n251\n00:12:08.940 --> 00:12:13.203\nAnd then what they will do is\nthey'll make sure the user must\n\n252\n00:12:13.203 --> 00:12:15.520\nchange password at next log on.\n\n253\n00:12:15.520 --> 00:12:20.590\nSo it's just a temporary password until\nthat person logs in for the first time.\n\n254\n00:12:20.590 --> 00:12:24.830\nBest practice in most organizations\nis I will disable this account.\n\n255\n00:12:24.830 --> 00:12:27.095\nBecause let's say I'm hiring\nten people on Monday.\n\n256\n00:12:27.095 --> 00:12:29.805\nWell, I'm not waiting until\nMonday to create the accounts.\n\n257\n00:12:29.805 --> 00:12:33.715\nI'm gonna go ahead and make them on Friday\nor Thursday, cuz as soon as HR gives me\n\n258\n00:12:33.715 --> 00:12:37.535\nthat list, hey we got ten more people or\na hundred more people coming in on Monday.\n\n259\n00:12:37.535 --> 00:12:40.195\nI'm not going to wait until Monday\nmorning to try and create those.\n\n260\n00:12:40.195 --> 00:12:42.535\nSo I'm going to create them ahead of time.\n\n261\n00:12:42.535 --> 00:12:44.265\nBut they're going to\nhave a generic password,\n\n262\n00:12:44.265 --> 00:12:46.910\nwhich anybody that's been hired by me.\n\n263\n00:12:46.910 --> 00:12:49.680\nI mean maybe I change that up now and\nagain, but\n\n264\n00:12:49.680 --> 00:12:51.590\nit's not meant to be a super secure thing.\n\n265\n00:12:51.590 --> 00:12:55.400\nSo I guess it depends on\nhow your company does that.\n\n266\n00:12:55.400 --> 00:12:57.240\nThe way I like to handle it,\n\n267\n00:12:57.240 --> 00:13:02.200\nis I use a relatively generic password and\nthen I disable the account.\n\n268\n00:13:02.200 --> 00:13:05.460\nThat way, if an account is disabled,\nit can't be used to logon.\n\n269\n00:13:05.460 --> 00:13:10.730\nAnd then all my accounts are created,\nbut over the weekend they're disabled.\n\n270\n00:13:10.730 --> 00:13:13.810\nBecause Ronnie knows,\nhe's seen that list of new hires.\n\n271\n00:13:13.810 --> 00:13:17.140\nHe knows that our policy is first initial,\nlast name.\n\n272\n00:13:17.140 --> 00:13:18.660\nSo he knows all their usernames.\n\n273\n00:13:18.660 --> 00:13:21.790\nHe remember the generic password\nthat I always use for new hires.\n\n274\n00:13:21.790 --> 00:13:25.460\nSo technically Ronnie could come in,\nand login as one of those\n\n275\n00:13:25.460 --> 00:13:28.500\nnew people over the weekend and\ntry to goof around and do things.\n\n276\n00:13:28.500 --> 00:13:29.960\nAnd it would not be traced back to him.\n\n277\n00:13:29.960 --> 00:13:32.930\nIt would be that account that he borrowed.\n\n278\n00:13:32.930 --> 00:13:34.155\nSo I'll disable the account.\n\n279\n00:13:34.155 --> 00:13:38.505\nAnd then Monday, if that person shows up,\ncuz, heck, out of the 100 people we hired\n\n280\n00:13:38.505 --> 00:13:42.285\nonly 80 of them are gonna show up, I'll\njust enable their account as they come in.\n\n281\n00:13:42.285 --> 00:13:44.535\nThat's part of that on boarding process.\n\n282\n00:13:44.535 --> 00:13:49.355\nSo typically I'll leave that disabled\nuntil they actually show up for work.\n\n283\n00:13:49.355 --> 00:13:53.845\nAnd then they're gonna have to change\ntheir password the first time they log in.\n\n284\n00:13:53.845 --> 00:13:56.575\nYou also have the option\nUser cannot change password.\n\n285\n00:13:56.575 --> 00:13:59.530\nThis is not recommended, right?\n\n286\n00:13:59.530 --> 00:14:02.990\nBecause that means, well,\nlet me take that back.\n\n287\n00:14:02.990 --> 00:14:05.970\nIt depends on what that account is for.\n\n288\n00:14:05.970 --> 00:14:09.030\nNormally we want the user to be\nresponsible for their password.\n\n289\n00:14:09.030 --> 00:14:10.700\nI don't even know their password.\n\n290\n00:14:10.700 --> 00:14:12.965\nI typically don't tell Ronnie, hey,\n\n291\n00:14:12.965 --> 00:14:16.585\nthis is your password and this is what\nyou're gonna use and you can't change it.\n\n292\n00:14:16.585 --> 00:14:19.785\nBecause now, Ronnie says well wait,\nyou know my password,\n\n293\n00:14:19.785 --> 00:14:21.975\nyou can log into my account any time\nyou want, do whatever you want, and\n\n294\n00:14:21.975 --> 00:14:24.165\nit's gonna be blamed on me, right?\n\n295\n00:14:24.165 --> 00:14:28.410\nThere are times though\nthat that option is handy.\n\n296\n00:14:28.410 --> 00:14:32.390\nI used to work in another training\nfacility where we had a generic account.\n\n297\n00:14:32.390 --> 00:14:36.111\nEverybody that came into our school\nlogged on as a user name student and\n\n298\n00:14:36.111 --> 00:14:37.760\nit had a password of password.\n\n299\n00:14:37.760 --> 00:14:39.314\nIt was a training facility,\n\n300\n00:14:39.314 --> 00:14:42.630\nthere was no security necessary\non that side of the network.\n\n301\n00:14:42.630 --> 00:14:43.928\nBut the problem was one day,\n\n302\n00:14:43.928 --> 00:14:47.450\ngoing through class probably,\nwe were talking about changing passwords.\n\n303\n00:14:47.450 --> 00:14:50.860\nOne of my students decides\nto change his password.\n\n304\n00:14:50.860 --> 00:14:54.090\nSo, he does the Ctrl + Alt + Delete,\nchanges the password.\n\n305\n00:14:54.090 --> 00:14:56.490\nWell, now, nobody knows,\nexcept him, what the password is.\n\n306\n00:14:56.490 --> 00:14:58.590\nThat's the account that\neverybody used to log on.\n\n307\n00:14:58.590 --> 00:15:01.804\nSo the next day when students are coming\nin, trying to log on, they're like,\n\n308\n00:15:01.804 --> 00:15:02.988\nthe password isn't right.\n\n309\n00:15:02.988 --> 00:15:07.360\nSo we actually chose User cannot change\npassword on that particular account.\n\n310\n00:15:07.360 --> 00:15:11.142\nKiosk machines where you've got a shared\naccount, libraries, things like that,\n\n311\n00:15:11.142 --> 00:15:14.660\npublic computers where you're gonna\ntell them what the password is.\n\n312\n00:15:14.660 --> 00:15:16.940\nYou don't want somebody\ncoming into your kiosk and\n\n313\n00:15:16.940 --> 00:15:20.420\nchanging all the passwords on\nyou then walking away, right?\n\n314\n00:15:20.420 --> 00:15:21.430\nSo that's what that's for.\n\n315\n00:15:21.430 --> 00:15:25.610\nPassword never expires, definitely\nnot one we wanna use either, right?\n\n316\n00:15:25.610 --> 00:15:27.660\nThere's a reason we change our password,\nand\n\n317\n00:15:27.660 --> 00:15:31.720\nthat's so that the bad guys don't\nhave an eternity to try to break it.\n\n318\n00:15:31.720 --> 00:15:33.970\nWe want to change it every so often.\n\n319\n00:15:33.970 --> 00:15:37.840\nIf I choose Password never expires,\nwell you can just leave that same password\n\n320\n00:15:37.840 --> 00:15:41.180\nforever and that gives the bad guys a long\ntime to try to break your password.\n\n321\n00:15:41.180 --> 00:15:45.380\nSo I'll go ahead and I'm gonna uncheck\nthat, cuz Titus has already showed up for\n\n322\n00:15:45.380 --> 00:15:48.570\nwork so we'll go ahead and\nclick Next and Finish.\n\n323\n00:15:48.570 --> 00:15:52.090\nAnd there we go,\nTitus now has a new user account.\n\n324\n00:15:52.090 --> 00:15:56.800\nNow let's take a look at the,\nwell, actually, before we do that,\n\n325\n00:15:56.800 --> 00:16:00.730\nlet's take a look at another\nway that we can create users.\n\n326\n00:16:00.730 --> 00:16:02.420\nThis is a very manual process.\n\n327\n00:16:02.420 --> 00:16:09.220\nIf I was hiring 10, 20, 50 people,\nwe're talking one at a time, New > User.\n\n328\n00:16:09.220 --> 00:16:11.108\nAnd filling that information in.\n\n329\n00:16:11.108 --> 00:16:11.930\nAnd I will tell you,\n\n330\n00:16:11.930 --> 00:16:14.580\nI can fill them in pretty quick,\ncuz I've done it so many times.\n\n331\n00:16:14.580 --> 00:16:17.050\nYou can Tab, Tab,\nspacebar to hit those check marks.\n\n332\n00:16:17.050 --> 00:16:19.460\nBut if I had to do a 100 of them,\nthere's just no way.\n\n333\n00:16:19.460 --> 00:16:22.190\nSo, we're going to automate that.\n\n334\n00:16:22.190 --> 00:16:24.905\nAnd that's where PowerShell comes in.\n\n335\n00:16:24.905 --> 00:16:29.177\nPowerShell I can make a new user one\nat a time through PowerShell as well.\n\n336\n00:16:29.177 --> 00:16:34.820\nThe command is actually new-aduser and\nthen you gotta fill in the appropriate\n\n337\n00:16:34.820 --> 00:16:39.805\nattributes as well like -samaccountname\nand set their logon name.\n\n338\n00:16:39.805 --> 00:16:42.585\n-displayname and set that.\n\n339\n00:16:42.585 --> 00:16:46.000\n-sn for surname, or\n-surname and -givenname.\n\n340\n00:16:46.000 --> 00:16:50.670\nSo the command actually becomes really\nlong to try to create a user account.\n\n341\n00:16:50.670 --> 00:16:55.800\nSo if you're only creating one account,\nPowerShell is actually the wrong way\n\n342\n00:16:55.800 --> 00:17:00.178\nto go in my opinion, because it's a lot\nmore work than it is to just come in here,\n\n343\n00:17:00.178 --> 00:17:02.290\nright-click New > User,\nand fill out the fields.\n\n344\n00:17:02.290 --> 00:17:04.555\nBut if you've got to create many,\nmany accounts,\n\n345\n00:17:04.555 --> 00:17:09.110\nPoweShell's definitely the way you want to\ngo, because as I said, we can automate it.\n\n346\n00:17:09.110 --> 00:17:11.300\nSo let's take a look at\nhow we would do that.\n\n347\n00:17:11.300 --> 00:17:13.010\nWith PowerShell to automate user creation,\n\n348\n00:17:13.010 --> 00:17:17.366\nwe're gonna use a command\ncalled import -csv.\n\n349\n00:17:17.366 --> 00:17:22.100\nA csv is a comma separated value file.\n\n350\n00:17:22.100 --> 00:17:27.030\nMost organizations what you'll do is\nactually use a spreadsheet, like Excel.\n\n351\n00:17:27.030 --> 00:17:28.080\nAnd these would be my column names.\n\n352\n00:17:28.080 --> 00:17:32.240\nI don't have Excel on this machine,\nso I can't show you that way, but\n\n353\n00:17:32.240 --> 00:17:34.200\nthese might be my column names.\n\n354\n00:17:34.200 --> 00:17:38.214\nLike givenName, surname,\nname, samaccountname,\n\n355\n00:17:38.214 --> 00:17:40.930\ndepartment, path, and password.\n\n356\n00:17:40.930 --> 00:17:44.127\nSo if you can imagine a spreadsheet, and\n\n357\n00:17:44.127 --> 00:17:48.639\nthe top of each one of those\ncolumns has that in there, and\n\n358\n00:17:48.639 --> 00:17:52.940\nthen below that we just fill\nin those values, right?\n\n359\n00:17:52.940 --> 00:17:56.726\nRonnie was his given name,\nWong is his surname.\n\n360\n00:17:56.726 --> 00:17:58.884\nRonnie Wong is his name.\n\n361\n00:17:58.884 --> 00:18:02.105\nRonnie's his samaccountname,\nhis log on name.\n\n362\n00:18:02.105 --> 00:18:04.210\nHosts is his department.\n\n363\n00:18:04.210 --> 00:18:06.885\nYou see how they're lining up?\n\n364\n00:18:06.885 --> 00:18:09.321\ngivenName, and then there's a comma.\n\n365\n00:18:09.321 --> 00:18:12.080\nRonnie, and then there's a comma.\n\n366\n00:18:12.080 --> 00:18:14.030\nAfter that comma what happens?\n\n367\n00:18:14.030 --> 00:18:16.470\nsurname, right?\n\n368\n00:18:16.470 --> 00:18:21.310\nSo that first line defines what\nattributes are gonna be defined in\n\n369\n00:18:21.310 --> 00:18:25.200\nthis file, and\nwhat order they're gonna be in.\n\n370\n00:18:25.200 --> 00:18:29.376\nSo if I wanted to make another user, well,\n\n371\n00:18:29.376 --> 00:18:34.000\ngivenName, Wes, surname, Bryan.\n\n372\n00:18:34.000 --> 00:18:36.630\nname, and because it has space in it,\n\n373\n00:18:36.630 --> 00:18:42.560\nI'm gonna put quotes around it,\nand put Wes Bryan, all right.\n\n374\n00:18:42.560 --> 00:18:46.670\nsamaccountname, that's his logon name,\nI'm gonna put Wes.\n\n375\n00:18:46.670 --> 00:18:48.540\nFor department, I'll put Hosts.\n\n376\n00:18:48.540 --> 00:18:53.184\nFor the path, I'm gonna cheat,\nbecause I already\n\n377\n00:18:53.184 --> 00:18:57.730\nhave one host up here, so\nI'm going to copy this.\n\n378\n00:18:57.730 --> 00:19:00.870\nWe talked about this in another episode,\nright?\n\n379\n00:19:00.870 --> 00:19:05.873\nThat that's the distinguished name, the\npath to the object in Active Directory.\n\n380\n00:19:05.873 --> 00:19:12.577\nAnd then after path comes password, so\nI'll just put a comma and then Pa$$w0rd.\n\n381\n00:19:12.577 --> 00:19:16.316\nSo, you start to see why Why they\ncall it CSV, comma separated values.\n\n382\n00:19:16.316 --> 00:19:18.490\nEach value is separated by a comma.\n\n383\n00:19:18.490 --> 00:19:22.910\nThe first line defines the attribute, and\nthe order that they're going to appear.\n\n384\n00:19:22.910 --> 00:19:27.120\nAnd like I said, if you take out Excel and\nyou did this in columns, it would, one,\n\n385\n00:19:27.120 --> 00:19:28.320\nlook nice and neat.\n\n386\n00:19:28.320 --> 00:19:30.910\nAnd then in Excel or\nany other spreadsheet program,\n\n387\n00:19:30.910 --> 00:19:33.020\nyou can just save it as a CSV file.\n\n388\n00:19:33.020 --> 00:19:37.292\nAnd it will format it just like\nthis that I have on my screen here.\n\n389\n00:19:37.292 --> 00:19:40.301\n>> Now Mike, with this file that\nyou're actually showing us here,\n\n390\n00:19:40.301 --> 00:19:43.816\nthat top line for all the headers and\nthe columns that we're talking about.\n\n391\n00:19:43.816 --> 00:19:45.069\nIs that case-sensitive?\n\n392\n00:19:45.069 --> 00:19:46.230\nDo I have to worry about\nanything like that?\n\n393\n00:19:46.230 --> 00:19:46.869\n>> It's not.\n\n394\n00:19:46.869 --> 00:19:47.403\n>> Okay.\n\n395\n00:19:47.403 --> 00:19:48.007\n>> It's not case sensitive.\n\n396\n00:19:48.007 --> 00:19:49.109\nIt does need to match.\n\n397\n00:19:49.109 --> 00:19:52.575\nWell, depending on how you're\ngonna be going about doing this,\n\n398\n00:19:52.575 --> 00:19:56.307\nit might need to match the actual\nattribute name in active directory.\n\n399\n00:19:56.307 --> 00:19:58.722\nThe way I'm gonna do it,\nit doesn't matter.\n\n400\n00:19:58.722 --> 00:20:03.296\nI could change surname to last name and it\nwould still work, cuz believe it or not,\n\n401\n00:20:03.296 --> 00:20:07.670\nin active directory, your last name is\nnot called last name its not even called\n\n402\n00:20:07.670 --> 00:20:09.484\nsurname its called SN, right?\n\n403\n00:20:09.484 --> 00:20:12.246\nSo its a little bit funky like that.\n\n404\n00:20:12.246 --> 00:20:16.288\nBut using PowerShell to import it I have\na chance to name it whatever I want and\n\n405\n00:20:16.288 --> 00:20:18.318\nI'll show you what I mean in a second.\n\n406\n00:20:18.318 --> 00:20:20.083\nSo if you think about this.\n\n407\n00:20:20.083 --> 00:20:23.983\nIf this was in a spreadsheet my HR person.\n\n408\n00:20:23.983 --> 00:20:27.524\nWho has no idea to work with\nActive Directory can fill this out.\n\n409\n00:20:27.524 --> 00:20:31.761\nThey can put first name, last name,\nwhat they want their log on name to be.\n\n410\n00:20:31.761 --> 00:20:37.461\nWhat they want their department to be,\nwhat they want their name to be.\n\n411\n00:20:37.461 --> 00:20:41.385\nWe can go back in and fill in the path for\nthem, they probably wouldn't know that.\n\n412\n00:20:41.385 --> 00:20:44.345\nAnd what our generic password is gonna be,\nright?\n\n413\n00:20:44.345 --> 00:20:47.797\nAnd just say that, and so\nthe HR person comes to me and say,\n\n414\n00:20:47.797 --> 00:20:52.182\nhey, here's a CSV file with a 100\nusers that we're hiring this week.\n\n415\n00:20:52.182 --> 00:20:54.062\nYou wanna go ahead and\ncreate their accounts.\n\n416\n00:20:54.062 --> 00:20:56.383\nGosh I have to do that one at a time?\n\n417\n00:20:56.383 --> 00:21:01.286\nNo, because they had it on that\nspreadsheet I save it as a CSV file and\n\n418\n00:21:01.286 --> 00:21:04.822\nlet me go ahead and\nsave this guy and clone those.\n\n419\n00:21:04.822 --> 00:21:05.959\nOops, let me save it.\n\n420\n00:21:05.959 --> 00:21:08.150\nLet's make sure.\n\n421\n00:21:08.150 --> 00:21:09.602\nI don't like keyboard\nshortcuts are working today.\n\n422\n00:21:09.602 --> 00:21:12.040\nWe'll save that and we'll close that.\n\n423\n00:21:12.040 --> 00:21:13.003\nAll right.\n\n424\n00:21:13.003 --> 00:21:16.369\nAnd now, I'm gonna take a look\nat my PowerShell script.\n\n425\n00:21:16.369 --> 00:21:19.293\nI saved you guys the pain of\nwatching me typed this out,\n\n426\n00:21:19.293 --> 00:21:21.083\nI've got it all typed out for us.\n\n427\n00:21:21.083 --> 00:21:23.440\nAnd you can see it's a little bit long,\nright?\n\n428\n00:21:23.440 --> 00:21:26.806\nBut, so if I was doing one user,\nthis is not the way to go.\n\n429\n00:21:26.806 --> 00:21:30.788\nBut if I'm doing 100 users,\nthis is definitely the way to go.\n\n430\n00:21:30.788 --> 00:21:35.113\nAll right, so the first part of\nthe command, import dash CSV, and\n\n431\n00:21:35.113 --> 00:21:36.279\nthen the path to.\n\n432\n00:21:36.279 --> 00:21:39.657\nOops, so I'm just gonna change that\naround there and change that back.\n\n433\n00:21:39.657 --> 00:21:45.023\nThe path to where that CSV file is\nlocated, I saved it on my c drive and\n\n434\n00:21:45.023 --> 00:21:50.298\nI named it users, and then there's\na pipe character that says take\n\n435\n00:21:50.298 --> 00:21:55.314\nthe results of that CSV file and\nfeed it in to this next command.\n\n436\n00:21:55.314 --> 00:21:56.614\nThat's what that pipe does.\n\n437\n00:21:56.614 --> 00:21:58.267\nAnd then my command is four each.\n\n438\n00:21:58.267 --> 00:22:03.967\nSo for each line, that you see in\nthat CSV file, do all of this.\n\n439\n00:22:03.967 --> 00:22:07.008\nAnd then go back and\ndo it again for the next line.\n\n440\n00:22:07.008 --> 00:22:09.249\nAnd then go back and\ndo it agian for the next line.\n\n441\n00:22:09.249 --> 00:22:13.382\nSo it doesn't matter if there's 10 lines,\n100 lines, 1000 lines.\n\n442\n00:22:13.382 --> 00:22:16.122\nWith one click of running this script.\n\n443\n00:22:16.122 --> 00:22:18.971\nI could ten users, 100 users, 1,000 users.\n\n444\n00:22:18.971 --> 00:22:19.777\n>> Nice.\n>> So yeah,\n\n445\n00:22:19.777 --> 00:22:21.536\nit took me a minute to\ntype this script up.\n\n446\n00:22:21.536 --> 00:22:23.928\nBut in the end,\nsaves me a lot of time, right?\n\n447\n00:22:23.928 --> 00:22:26.169\nSee Ronnie,\naren't you liking PowerShell now?\n\n448\n00:22:26.169 --> 00:22:27.353\n>> No, not yet.\n\n449\n00:22:27.353 --> 00:22:29.795\n>> [LAUGH]\n>> I probably will after several years or\n\n450\n00:22:29.795 --> 00:22:30.336\ndecades.\n\n451\n00:22:30.336 --> 00:22:32.728\nBut no, it's a great way, right?\n\n452\n00:22:32.728 --> 00:22:37.106\nThat's the key a lot of times that's the\nway we're given the idea of people coming\n\n453\n00:22:37.106 --> 00:22:39.531\nto work especially in large organizations.\n\n454\n00:22:39.531 --> 00:22:42.845\nIt's not always about just centering it\none at a time even though we can do that,\n\n455\n00:22:42.845 --> 00:22:45.033\nbut normally it's going to\nbe something like that.\n\n456\n00:22:45.033 --> 00:22:47.611\nNow Mike if I have that spreadsheet\nyou're talking about from HR.\n\n457\n00:22:47.611 --> 00:22:51.101\nAnd then it includes the other\ninformation like their address,\n\n458\n00:22:51.101 --> 00:22:53.880\nand their phone number,\nand their company phone or\n\n459\n00:22:53.880 --> 00:22:57.711\nwhatever it is we an also use that\nto help populate the account itself.\n\n460\n00:22:57.711 --> 00:22:59.928\nBut if we wanted to ignore it,\nwe'd just leave it out of that sheet.\n\n461\n00:22:59.928 --> 00:23:00.648\nIs that what happens?\n\n462\n00:23:00.648 --> 00:23:01.263\n>> Yep, we could just leave it out.\n\n463\n00:23:01.263 --> 00:23:07.555\nLike in my script here, I don't have the,\nlet's say, -location or -office.\n\n464\n00:23:07.555 --> 00:23:11.153\nSo if that was in the spreadsheet,\nin that CSV file that I created,\n\n465\n00:23:11.153 --> 00:23:14.610\nI'd probably just take that spreadsheet,\nhide that column.\n\n466\n00:23:14.610 --> 00:23:16.800\nAll of them and then save the CSV file.\n\n467\n00:23:16.800 --> 00:23:20.170\nOr I could simply come in here, all those\nattributes could be added to the script.\n\n468\n00:23:20.170 --> 00:23:21.810\nI could make this script even longer.\n\n469\n00:23:21.810 --> 00:23:26.360\nBecause if they're putting phone number in\nthat spreadsheet, might as well go ahead.\n\n470\n00:23:26.360 --> 00:23:29.855\nI don't wanna have to go back later and\nedit each user, and add the phone number.\n\n471\n00:23:29.855 --> 00:23:33.095\nSo I simply come in here and\nadd another line to my script.\n\n472\n00:23:33.095 --> 00:23:36.125\nLet's say dash phone number or\noffice phone,\n\n473\n00:23:36.125 --> 00:23:39.455\nyou can see the different mobile phone or\nhome phone.\n\n474\n00:23:39.455 --> 00:23:43.285\nI had to add that in there and\nthen from that CSV file,\n\n475\n00:23:43.285 --> 00:23:46.780\nbut again don't think I can just add\nit here if its not in the CSV file\n\n476\n00:23:46.780 --> 00:23:49.044\nalready then this is not gonna work right.\n\n477\n00:23:49.044 --> 00:23:53.170\nIts gonna fail I cant find home phone so\nlet me back that right back and\n\n478\n00:23:53.170 --> 00:23:57.720\nabsolutely Ronnie, if they want to put\nmore information in that spreadsheet I\n\n479\n00:23:57.720 --> 00:23:58.456\nthink it would be better.\n\n480\n00:23:58.456 --> 00:24:00.960\nI did for just a few columns for\nthis demo but\n\n481\n00:24:00.960 --> 00:24:06.260\nideally, you'd look at all the attributes\nyou wanna fill in on a user account.\n\n482\n00:24:06.260 --> 00:24:08.210\nAnd you would make their spreadsheet for\nthem.\n\n483\n00:24:08.210 --> 00:24:11.066\nYou say here's all your columns,\nhand them that spreadsheet.\n\n484\n00:24:11.066 --> 00:24:14.022\nAll you got to do is fill the information\nin as you hire these people, and\n\n485\n00:24:14.022 --> 00:24:14.824\ngive it back to me.\n\n486\n00:24:14.824 --> 00:24:17.193\n>> Now Mike if,\nwhat you just mentioned something.\n\n487\n00:24:17.193 --> 00:24:19.976\nI mean I just didn't think about\nit until you mentioned it, but\n\n488\n00:24:19.976 --> 00:24:23.282\nwhat if it was like that where you said,\nhey I've got all of it in there, and\n\n489\n00:24:23.282 --> 00:24:26.030\nsomebody said,\ncan we include in there department now?\n\n490\n00:24:26.030 --> 00:24:27.280\nAnd you just didn't add that in there.\n\n491\n00:24:27.280 --> 00:24:29.490\nDoes this also help you to go back in and\njust,\n\n492\n00:24:29.490 --> 00:24:32.450\nin other words,\nadd additional information?\n\n493\n00:24:32.450 --> 00:24:33.880\n>> Yup, cool.\n>> Exactly, so all I'd have to do, and\n\n494\n00:24:33.880 --> 00:24:35.720\nyou saw how it started to auto-fill for\nme.\n\n495\n00:24:35.720 --> 00:24:41.167\nI'm actually using the Integrated\nScripting Environment for PowerShell,\n\n496\n00:24:41.167 --> 00:24:46.039\nand as I do a dash, I might not know\nwhat is it called for their office?\n\n497\n00:24:46.039 --> 00:24:47.531\nI could just start typing.\n\n498\n00:24:47.531 --> 00:24:49.743\nLook, there is the office\nattribute right there.\n\n499\n00:24:49.743 --> 00:24:51.983\nSo, I hit tab and it fills it in for me.\n\n500\n00:24:51.983 --> 00:24:53.040\nSo, yeah.\n\n501\n00:24:53.040 --> 00:24:57.566\nEasy, easy to add additional\nparameters to this script.\n\n502\n00:24:57.566 --> 00:25:00.141\n>> So you could just go back in\na second time and just add that in, and\n\n503\n00:25:00.141 --> 00:25:03.464\njust run that through, and it might just\npick up that, or would it just read them?\n\n504\n00:25:03.464 --> 00:25:05.150\n>> No, if you had already run it once,\n\n505\n00:25:05.150 --> 00:25:08.874\nnow we're in a little bit of trouble\nbecause accounts already exist, right?\n\n506\n00:25:08.874 --> 00:25:09.535\n>> Right.\n\n507\n00:25:09.535 --> 00:25:12.728\n>> And you can't duplicate the names and\nthings like that.\n\n508\n00:25:12.728 --> 00:25:16.562\nSo if you've already run it, and then they\ncome back to you, and they say, wait,\n\n509\n00:25:16.562 --> 00:25:18.614\nwe forgot to fill in\nthe phone number column.\n\n510\n00:25:18.614 --> 00:25:19.334\nWe wanna do that.\n\n511\n00:25:19.334 --> 00:25:21.911\nYou can still use PowerShell actually.\n\n512\n00:25:21.911 --> 00:25:24.655\nIt's gonna be a little different.\n\n513\n00:25:24.655 --> 00:25:29.612\nThere's a set-ad user that we could\nuse to modify just that one parameter.\n\n514\n00:25:29.612 --> 00:25:30.716\n>> Nice.\n>> So still doable, but\n\n515\n00:25:30.716 --> 00:25:32.220\nnot using this particular script.\n\n516\n00:25:32.220 --> 00:25:33.860\n>> Cool.\n>> All right, so again,\n\n517\n00:25:33.860 --> 00:25:35.796\nthis is gonna rifle through there.\n\n518\n00:25:35.796 --> 00:25:36.794\n>> And it's gonna look.\n\n519\n00:25:36.794 --> 00:25:39.998\nRemember what we call those,\nthat first line in that CSV files?\n\n520\n00:25:39.998 --> 00:25:45.667\nI had given name, surname, name, sam\naccount name, so it's saying, hey normally\n\n521\n00:25:45.667 --> 00:25:51.451\nif you're doing this command from scratch,\nyou'd be typing in something like this.\n\n522\n00:25:51.451 --> 00:25:54.885\nNew-ADUser, right.\n\n523\n00:25:54.885 --> 00:25:57.343\nEnough PS1 that's my actual script.\n\n524\n00:25:57.343 --> 00:26:00.595\nLet's see if I can do\nit without the script.\n\n525\n00:26:00.595 --> 00:26:02.228\nIt really wants to run my script for me.\n\n526\n00:26:02.228 --> 00:26:04.337\n>> It does.\n>> new-ADuser.\n\n527\n00:26:04.337 --> 00:26:05.169\nAll right.\n\n528\n00:26:05.169 --> 00:26:10.570\nAnd then I might do something like\n-Department and I set it to Hosts.\n\n529\n00:26:10.570 --> 00:26:12.950\nAnd then dash, you know, whatever.\n\n530\n00:26:12.950 --> 00:26:17.920\nI would do,\nI forgot where I was going with this.\n\n531\n00:26:17.920 --> 00:26:20.260\nI would add in these\ndifferent attributes and\n\n532\n00:26:20.260 --> 00:26:22.670\nI would have to do it manually\nfrom this line, exactly.\n\n533\n00:26:22.670 --> 00:26:23.877\nAll right.\n\n534\n00:26:23.877 --> 00:26:26.087\nSo, there was a point to that.\n\n535\n00:26:26.087 --> 00:26:27.802\n>> [LAUGH]\n>> But I forgot where I was headed\n\n536\n00:26:27.802 --> 00:26:28.377\nwith that.\n\n537\n00:26:28.377 --> 00:26:31.794\nSo let's go back to my script then.\n\n538\n00:26:31.794 --> 00:26:36.507\nSo we've got our CSV files set up,\nwe've, that's what it was,\n\n539\n00:26:36.507 --> 00:26:39.168\nI was talking about these right here.\n\n540\n00:26:39.168 --> 00:26:44.066\nSo instead of doing -Department and\ntyping in their actual department,\n\n541\n00:26:44.066 --> 00:26:48.365\nI'm saying look in that CSV file for\nsomething called surname.\n\n542\n00:26:48.365 --> 00:26:51.035\nAnd set that equal to this.\n\n543\n00:26:51.035 --> 00:26:55.045\nSo instead of me typing -Surname and\n\n544\n00:26:55.045 --> 00:26:59.265\nhaving to fill it in, it's searching that\nCSV file for something called surname.\n\n545\n00:26:59.265 --> 00:27:02.160\nOr if you take it back to the spreadsheet,\nit's looking for\n\n546\n00:27:02.160 --> 00:27:03.460\nthat column Surname, right?\n\n547\n00:27:03.460 --> 00:27:04.720\nSo it's really, pretty cool.\n\n548\n00:27:04.720 --> 00:27:05.710\nI like it.\n\n549\n00:27:05.710 --> 00:27:07.390\nLet's see if it works, right?\n\n550\n00:27:07.390 --> 00:27:09.180\nAll this talk about it, let's do it.\n\n551\n00:27:09.180 --> 00:27:10.520\nTo run this script,\n\n552\n00:27:10.520 --> 00:27:14.750\nI could either type in the name of the\nscript right down here from PowerShell.\n\n553\n00:27:14.750 --> 00:27:20.461\nBut easy enough, when I'm in the ISE,\njust to click this play button.\n\n554\n00:27:20.461 --> 00:27:24.543\nAnd you can see that it runs the script,\nnew-aduser.ps1.\n\n555\n00:27:24.543 --> 00:27:26.419\nps1 is the extension for the script.\n\n556\n00:27:26.419 --> 00:27:29.211\nNo red text, that's a good thing.\n\n557\n00:27:29.211 --> 00:27:30.543\nLet's see if it works.\n\n558\n00:27:30.543 --> 00:27:33.887\nWe'll go back over to Active Directory,\nand remember Active Directory does not\n\n559\n00:27:33.887 --> 00:27:37.720\nrefresh automatically, so\nI'm gonna have to manually refresh this.\n\n560\n00:27:37.720 --> 00:27:42.790\nAnd now we should see for host,\nwe should have now Ronnie and Wes.\n\n561\n00:27:42.790 --> 00:27:43.970\nAnd there we go.\n\n562\n00:27:43.970 --> 00:27:46.710\nI forgot what else I put in that CSV file.\n\n563\n00:27:46.710 --> 00:27:49.544\nLet's open it up real quick.\n\n564\n00:27:49.544 --> 00:27:52.806\nC: > users.csv.\n\n565\n00:27:52.806 --> 00:27:56.920\nThere should be an account for\nTyler Fink in the Development OU.\n\n566\n00:27:58.040 --> 00:27:59.420\nSo let's see if that showed up.\n\n567\n00:27:59.420 --> 00:28:04.690\nWe'll go to Development, and\nthere's Tyler Fink, all right.\n\n568\n00:28:04.690 --> 00:28:05.876\nAnd it's that easy.\n\n569\n00:28:05.876 --> 00:28:10.082\nSo, again,\nthat was only three accounts, but\n\n570\n00:28:10.082 --> 00:28:14.086\nthink if we had a hundred,\nwe had a thousand.\n\n571\n00:28:14.086 --> 00:28:17.752\nIt would've been that quick,\nit's really pretty impressive stuff.\n\n572\n00:28:17.752 --> 00:28:18.455\n>> It really is.\nMike,\n\n573\n00:28:18.455 --> 00:28:20.985\nnow let's see what we can do though\nnow with the user account and\n\n574\n00:28:20.985 --> 00:28:24.252\nyou talked about some of the different\ncontrols, let's see what we can do here.\n\n575\n00:28:24.252 --> 00:28:28.331\n>> Yeah, let's take a look now that we've\ngot this user account, all of these tabs,\n\n576\n00:28:28.331 --> 00:28:30.840\nthese are all the attributes\nI was talking about.\n\n577\n00:28:30.840 --> 00:28:33.836\nFirst name, last name,\nthings that describe the object.\n\n578\n00:28:33.836 --> 00:28:38.669\nDisplay name, Description, Office,\nTelephone numbers, and it goes on and on.\n\n579\n00:28:38.669 --> 00:28:42.764\nAddress, Account information,\nProfile, Telephone number,\n\n580\n00:28:42.764 --> 00:28:46.189\nOrganization Company,\nManger, Job Title, right,\n\n581\n00:28:46.189 --> 00:28:50.751\nthese are all things that I wanna fill\nout about these user accounts now.\n\n582\n00:28:50.751 --> 00:28:54.855\nI will tell you that a lot of companies\nI've see fill up very few of these, but\n\n583\n00:28:54.855 --> 00:28:58.900\nthe more you fill them out the easier it\nis to work with these objects, right?\n\n584\n00:28:58.900 --> 00:29:02.930\nWhat if I want to find all my users\nthat have a manager of Ronnie Wong?\n\n585\n00:29:02.930 --> 00:29:07.270\nWell if I haven't filled this value out,\nI can't do that.\n\n586\n00:29:07.270 --> 00:29:12.880\nWe've got dynamic access control in\nServer 2012 and Windows 10 and Windows 8.\n\n587\n00:29:12.880 --> 00:29:18.935\nAnd for dynamic access control,\nI can use properties like Department\n\n588\n00:29:18.935 --> 00:29:21.895\nto control what level of\naccess you have to a resource.\n\n589\n00:29:21.895 --> 00:29:25.765\nWell if I don't fill in Department,\nhow can I do that, right?\n\n590\n00:29:25.765 --> 00:29:29.045\nSo the more you fill out on these users,\nthe better it is.\n\n591\n00:29:29.045 --> 00:29:31.865\nYes, it's a little more administrative\nwork, but heck, if you write that\n\n592\n00:29:31.865 --> 00:29:35.505\nPowerShell script and you use your Excel\nspreadsheet, it's really not that bad.\n\n593\n00:29:35.505 --> 00:29:37.760\nHeck, you can have somebody\nelse fill out the spreadsheet,\n\n594\n00:29:37.760 --> 00:29:40.578\nall you're doing is running the script,\nso it's not that bad.\n\n595\n00:29:40.578 --> 00:29:44.780\n[LAUGH] All right, so lots of different\nattributes we can fill in there.\n\n596\n00:29:44.780 --> 00:29:46.520\nThere's things like profile.\n\n597\n00:29:46.520 --> 00:29:48.720\nThere's even some that we don't see.\n\n598\n00:29:48.720 --> 00:29:53.752\nTrying to think Ronnie, we could\nactually turn on our advanced view.\n\n599\n00:29:53.752 --> 00:29:55.627\nAnd this is probably a good\nthing to show you anyway.\n\n600\n00:29:55.627 --> 00:29:59.251\nIf we look at user account\nnotice there's no Security tab.\n\n601\n00:29:59.251 --> 00:30:03.510\nThere's also no Attributes tab.\n\n602\n00:30:03.510 --> 00:30:07.850\nLet's close that, and\nturn on my advanced features.\n\n603\n00:30:07.850 --> 00:30:11.840\nAnd now go back and\nfind one of those accounts.\n\n604\n00:30:11.840 --> 00:30:14.480\nSo we'll grab Titus here and\ndouble-click on that.\n\n605\n00:30:14.480 --> 00:30:18.769\nAnd now you'll see that there's more tabs,\none of them being my,\n\n606\n00:30:18.769 --> 00:30:21.002\nif I can find it, my Security tab.\n\n607\n00:30:21.002 --> 00:30:23.836\nThis is where I can control permissions\nover the user account itself.\n\n608\n00:30:23.836 --> 00:30:26.580\nNot what permissions the user has.\n\n609\n00:30:26.580 --> 00:30:29.110\nPermissions over this user account.\n\n610\n00:30:29.110 --> 00:30:32.090\nCan somebody, can Ronnie come in and\nchange Titus's phone number?\n\n611\n00:30:32.090 --> 00:30:35.520\nThat's the kind of permissions\nthat I'm talking about.\n\n612\n00:30:35.520 --> 00:30:37.252\nThere's also the Attribute Editor tab.\n\n613\n00:30:37.252 --> 00:30:39.978\nIf one of the attributes\nyou're looking for\n\n614\n00:30:39.978 --> 00:30:43.730\ndoesn't show up on one of these tabs,\nyou can come in here and\n\n615\n00:30:43.730 --> 00:30:47.794\nyou can see every attribute that\nyou can fill in on a user account.\n\n616\n00:30:47.794 --> 00:30:51.100\nAs you can see there are a lot of them.\n\n617\n00:30:51.100 --> 00:30:52.860\nSometimes you need to go in there and\n\n618\n00:30:52.860 --> 00:30:57.000\nlook at those attributes to find,\nthe last logon time and things like that.\n\n619\n00:30:57.000 --> 00:30:58.080\nSo there's a lot of attributes.\n\n620\n00:30:58.080 --> 00:30:59.240\nSome of them we fill out.\n\n621\n00:30:59.240 --> 00:31:02.940\nSome of those are system based attributes,\nlike that last logon time, or\n\n622\n00:31:02.940 --> 00:31:05.700\nlast time you changed your password,\nthings like that.\n\n623\n00:31:05.700 --> 00:31:09.340\nThose the system applies\nto that user account.\n\n624\n00:31:09.340 --> 00:31:11.760\nAll right,\nlast thing I think we wanna talk about,\n\n625\n00:31:11.760 --> 00:31:14.710\njust some of the common things\nthat we do with user accounts.\n\n626\n00:31:15.920 --> 00:31:18.560\nResetting passwords is one,\npretty easy to do,\n\n627\n00:31:18.560 --> 00:31:22.920\nyou just right-click on it and\nyou can choose Reset Password from here.\n\n628\n00:31:22.920 --> 00:31:27.510\nIf a user has forgotten their password,\nyou can come in and reset it for them.\n\n629\n00:31:27.510 --> 00:31:30.710\nDisabling account is another\none that we'll do often.\n\n630\n00:31:30.710 --> 00:31:34.860\nAnd if somebody leaves the company,\nwe don't\n\n631\n00:31:34.860 --> 00:31:39.360\nusually delete user accounts because\nassociated with that user account,\n\n632\n00:31:39.360 --> 00:31:41.760\nthat SID, and possibly\na certificate used for encryption.\n\n633\n00:31:41.760 --> 00:31:45.760\nIf I start deleting accounts,\nI could lose access to resources.\n\n634\n00:31:45.760 --> 00:31:49.780\nSo usually we'll disable the account,\nand then I'll create an OU just for\n\n635\n00:31:49.780 --> 00:31:52.190\ndeleted objects and I'll move it there.\n\n636\n00:31:52.190 --> 00:31:54.710\nAnd let it sit there for\nsix months and make sure\n\n637\n00:31:54.710 --> 00:31:58.270\nI don't need that user account for\nanything else before I actually delete it.\n\n638\n00:31:58.270 --> 00:32:00.003\nDisabling it means it can't be used.\n\n639\n00:32:00.003 --> 00:32:03.919\nIf I disable the account, you won't\nbe able to log on using that account.\n\n640\n00:32:03.919 --> 00:32:06.169\nIn fact I'll go ahead and disable Titus.\n\n641\n00:32:06.169 --> 00:32:10.836\nA new thing we have to do is\nunlock accounts sometimes.\n\n642\n00:32:10.836 --> 00:32:13.390\nI'm gonna fire up this client machine.\n\n643\n00:32:13.390 --> 00:32:16.970\nAnd I created a policy on this\ndomain that said if you log on,\n\n644\n00:32:16.970 --> 00:32:21.108\nif you type your password incorrectly\nfive times, it's gonna lock the account.\n\n645\n00:32:21.108 --> 00:32:23.724\nThat way if somebody's trying\nto do password guessing,\n\n646\n00:32:23.724 --> 00:32:25.911\nthey won't be able to\nguess more than 5 times.\n\n647\n00:32:25.911 --> 00:32:32.025\nSo as Rob here, I'm gonna type\nin the password incorrectly,\n\n648\n00:32:32.025 --> 00:32:35.560\nthat's one,two, three, four.\n\n649\n00:32:35.560 --> 00:32:38.596\nAnd on the fifth one it thinks\nabout it for a second, and\n\n650\n00:32:38.596 --> 00:32:43.084\nwe're going to see a little Message pop up\nand I want you guys to see this message,\n\n651\n00:32:43.084 --> 00:32:45.470\nit's gonna lock Rob's account.\n\n652\n00:32:45.470 --> 00:32:49.980\nAnd depending on what the domain settings\nare, it might reset after 30 minutes and\n\n653\n00:32:49.980 --> 00:32:51.360\nRob can try again.\n\n654\n00:32:51.360 --> 00:32:54.720\nOr it might have to be manually\nunlocked by an administrator.\n\n655\n00:32:54.720 --> 00:32:57.372\nAgain, depending on what\nthe organization has decided, so\n\n656\n00:32:57.372 --> 00:33:00.100\nI wanna show you how to\nunlock that account.\n\n657\n00:33:00.100 --> 00:33:03.280\nAnd I also wanna show you\nthe message that pops up here.\n\n658\n00:33:03.280 --> 00:33:04.450\nCuz it's different from,\n\n659\n00:33:04.450 --> 00:33:07.310\nI don't want you to confuse locked\naccount with disabled account.\n\n660\n00:33:07.310 --> 00:33:10.240\nSo there we go.\n\n661\n00:33:10.240 --> 00:33:12.790\nShould, and\nwe'll try it one more time here.\n\n662\n00:33:12.790 --> 00:33:14.860\nAnd it's gonna pop up a little message,\nor it's not.\n\n663\n00:33:14.860 --> 00:33:20.301\nHm, it's thinking about it,\nit's kinda odd.\n\n664\n00:33:22.870 --> 00:33:23.531\nShouldn't be going this far.\n\n665\n00:33:23.531 --> 00:33:25.630\nI set it to five, if I'm not mistaken.\n\n666\n00:33:25.630 --> 00:33:29.130\nAnd there you go, after so after that\nfifth time I can that, that account is,\n\n667\n00:33:29.130 --> 00:33:33.410\nyou see what it says, currently locked\nout and may not be logged on to.\n\n668\n00:33:33.410 --> 00:33:34.840\nSo I'll need to unlock that for Rob.\n\n669\n00:33:34.840 --> 00:33:38.270\nMaybe somebody was trying to\nbreak into his account overnight.\n\n670\n00:33:38.270 --> 00:33:42.037\nNow remember, Titus, it's gonna try\nit again, I want you to cancel.\n\n671\n00:33:42.037 --> 00:33:44.730\n>> [LAUGH]\n>> And then I wanna show you with Titus's\n\n672\n00:33:44.730 --> 00:33:48.220\naccount, his account was not locked,\nhis was disabled.\n\n673\n00:33:48.220 --> 00:33:52.524\nSo if I try to log in as Titus with\nthat super secret password I set,\n\n674\n00:33:52.524 --> 00:33:54.577\nwe'll see what happens here.\n\n675\n00:33:54.577 --> 00:33:58.580\nPretty sure I disabled that account,\nRonnie.\n\n676\n00:33:58.580 --> 00:34:00.700\n>> [LAUGH] We'll find\nout here in a moment.\n\n677\n00:34:00.700 --> 00:34:01.580\n>> I know, right?\n\n678\n00:34:01.580 --> 00:34:05.300\nSo, it's reaching out to Active Directory,\ntrying to verify that password.\n\n679\n00:34:05.300 --> 00:34:08.881\nActive Directory should be saying,\nwhoa, that account has been disabled,\n\n680\n00:34:08.881 --> 00:34:10.100\nyou cannot log on to that.\n\n681\n00:34:10.100 --> 00:34:13.670\nLike I said, we use that when\npeople leave the organization.\n\n682\n00:34:13.670 --> 00:34:15.188\nWe also use it when\nthey leave temporarily,\n\n683\n00:34:15.188 --> 00:34:16.630\nit doesn't have to be a permanent thing.\n\n684\n00:34:16.630 --> 00:34:20.089\nLike, if somebody's going on\nan extended vacation, maternity leave,\n\n685\n00:34:20.089 --> 00:34:23.768\nsabbatical, and they're going to be\ngone for a month, two months, longer,\n\n686\n00:34:23.768 --> 00:34:27.561\nI don't need that account sitting there\nwhere somebody could try to access it and\n\n687\n00:34:27.561 --> 00:34:29.185\nuse it for malicious purposes.\n\n688\n00:34:29.185 --> 00:34:29.965\nI'll disable it.\n\n689\n00:34:29.965 --> 00:34:32.050\nAnd they're going to say,\nyour account has been disabled,\n\n690\n00:34:32.050 --> 00:34:33.970\nplease see your system administrator.\n\n691\n00:34:33.970 --> 00:34:37.940\nSo if we go back over to Active Directory,\nI can see his account's disabled\n\n692\n00:34:37.940 --> 00:34:40.610\nbecause of that little\ndownward pointing black arrow.\n\n693\n00:34:40.610 --> 00:34:43.760\nIf I want to enable that account, I could\nright click it, I could choose it right\n\n694\n00:34:43.760 --> 00:34:48.540\nhere, but I want to show you where\nthat is, because it's kind of hidden.\n\n695\n00:34:48.540 --> 00:34:52.835\nYou go to Account, and then you've\ngot to scroll down a little bit and\n\n696\n00:34:52.835 --> 00:34:55.595\nthere you're going to\nfind account is disabled.\n\n697\n00:34:55.595 --> 00:34:58.495\nAnd now Titus's account is enabled,\nand he'll be able to log on.\n\n698\n00:34:58.495 --> 00:35:01.855\nSo, as far as Rob goes,\nremember his got locked, and so\n\n699\n00:35:01.855 --> 00:35:04.895\nhe's going to call up the help desk and\nsay, hey, I can't log on.\n\n700\n00:35:04.895 --> 00:35:07.065\nIt's telling me my account is locked.\n\n701\n00:35:07.065 --> 00:35:10.974\nWell, all we're going to have to do is\npull up the properties for his account,\n\n702\n00:35:10.974 --> 00:35:14.469\ngo to that account tab, and\nyou'll see right here, Unlock Account,\n\n703\n00:35:14.469 --> 00:35:18.647\nthis account is currently locked out on\nthis Active Directory domain controller.\n\n704\n00:35:18.647 --> 00:35:23.950\nSo I'll choose to unlock it,\nclick okay and now Rob can log on.\n\n705\n00:35:23.950 --> 00:35:24.510\nAnd everybody is happy.\n\n706\n00:35:24.510 --> 00:35:27.975\n>> Now Mike, does it take any time, like,\ndo they have to wait five minutes before\n\n707\n00:35:27.975 --> 00:35:31.020\nor after you unlock their account or\nanything, or is it immediate?\n\n708\n00:35:31.020 --> 00:35:31.710\n>> It's instant.\n\n709\n00:35:31.710 --> 00:35:34.370\nAs soon as they, cuz now, Active Directory\nknows it's unlocked, so you can say,\n\n710\n00:35:34.370 --> 00:35:35.400\nall right, Rob, try it again.\n\n711\n00:35:35.400 --> 00:35:38.988\nAnd it's going to send that request over\nand it's going to see that it's unlocked\n\n712\n00:35:38.988 --> 00:35:42.010\nand allow him to log on,\nassuming he uses the right password.\n\n713\n00:35:42.010 --> 00:35:43.020\n>> Sounds cool.\nWell Mike,\n\n714\n00:35:43.020 --> 00:35:47.580\nthat is a lot of information then on user\naccounts that we have to think about.\n\n715\n00:35:47.580 --> 00:35:51.020\nBut remember it is one of\nthe primary units that we deal with.\n\n716\n00:35:51.020 --> 00:35:53.540\nBecause even as network\nadministrators a lot of times,\n\n717\n00:35:53.540 --> 00:35:57.660\nwell we're really having to deal with\nthis more often than not, right?\n\n718\n00:35:57.660 --> 00:36:01.650\nCreating user accounts, making sure that\nwe understand why we want to use them.\n\n719\n00:36:01.650 --> 00:36:04.490\nMaking sure that we understand,\nof course, the creation of them as well.\n\n720\n00:36:04.490 --> 00:36:06.620\nReally important stuff as well as\nbeing able to manage and administrate.\n\n721\n00:36:06.620 --> 00:36:09.530\nSo there's a lot of different\nthings we can do, but\n\n722\n00:36:09.530 --> 00:36:11.570\nit all begins with this, right?\n\n723\n00:36:11.570 --> 00:36:14.594\nThe more information that we have on our\nusers, the easier it is to be able to\n\n724\n00:36:14.594 --> 00:36:17.674\ntrack them, to be able to give those\npermissions away that Mike described.\n\n725\n00:36:17.674 --> 00:36:18.928\nVery good.\n\n726\n00:36:18.928 --> 00:36:23.586\nThank you, Mike, for helping us to\nunderstand the use of user account, it's\n\n727\n00:36:23.586 --> 00:36:28.540\neven better, I'm gonna get tongue tied on\nthat, but it really does help out here.\n\n728\n00:36:28.540 --> 00:36:31.434\nSo that sounds like a good place for\nus to end this episode,\n\n729\n00:36:31.434 --> 00:36:33.575\nunless there is any closing words, Mike.\n\n730\n00:36:33.575 --> 00:36:36.211\n>> No I don't think so.\n\n731\n00:36:36.211 --> 00:36:37.211\nI was thinking about the question\nyou asked me with the,\n\n732\n00:36:37.211 --> 00:36:38.160\ndoes it occur instantly.?\n\n733\n00:36:38.160 --> 00:36:41.146\nThe only thing I might see there is\na slight delay in replication if you have\n\n734\n00:36:41.146 --> 00:36:43.425\nmore than one domain controller,\nlike most people do.\n\n735\n00:36:43.425 --> 00:36:46.394\nAny type of password changes\nin security like that,\n\n736\n00:36:46.394 --> 00:36:49.410\nthat triggers what we\ncall instant replication.\n\n737\n00:36:49.410 --> 00:36:52.450\nSo it should replicate\nout almost immediately to\n\n738\n00:36:52.450 --> 00:36:53.700\nall the other domain controllers.\n\n739\n00:36:53.700 --> 00:36:56.050\nIf the user, if I told them I\nhad unlocked their account, and\n\n740\n00:36:56.050 --> 00:36:58.880\nthey went to log back in and\nthey said it's still saying locked,\n\n741\n00:36:58.880 --> 00:37:01.240\nI'd probably say count to ten and\ntry it again.\n\n742\n00:37:01.240 --> 00:37:02.460\nIt really shouldn't be that long.\n\n743\n00:37:02.460 --> 00:37:04.830\nUnless we're talking about across sites,\nand\n\n744\n00:37:04.830 --> 00:37:09.070\nI know we haven't really talked about\nthose, we did back in another episode.\n\n745\n00:37:09.070 --> 00:37:11.070\nSo that's just one thing to keep in mind.\n\n746\n00:37:11.070 --> 00:37:12.430\n>> Excellent.\n\n747\n00:37:12.430 --> 00:37:16.520\nWell great place for us to end this\nepisode then, signing off for ITPROTV,\n\n748\n00:37:16.520 --> 00:37:17.480\nI'm Ronnie Wong.\n\n749\n00:37:17.480 --> 00:37:18.834\n>> And I'm Mike Rodrick.\n\n750\n00:37:18.834 --> 00:37:19.472\n>> And we'll see you next time.\n\n751\n00:37:19.472 --> 00:37:24.860\n[MUSIC]\n\n",
          "vimeoId": "146148908"
        },
        {
          "description": "In this episode, Mike and Ronnie take time to look into the use of computer accounts.  Like Users, computers need accounts in Active Directory to establish a trust relationship between the computer and the AD for administration.  They also show how to create the account using pre-staging as well as joining a computer to the domain.  The guys take a little time to show what occurs when the trust relationship is broken and use PowerShell to repair the trust relationship.",
          "length": "1838",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-3-3-computer_accounts-110615-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-3-3-computer_accounts-110615-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-3-3-computer_accounts-110615-1-sm.jpg",
          "title": "Computer Accounts",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:12.361 --> 00:00:15.102\nWelcome to another great\nepisode here on ITPro TV.\n\n3\n00:00:15.102 --> 00:00:16.262\nI'm your host Ronnie Wong.\n\n4\n00:00:16.262 --> 00:00:19.342\nAnd today we're taking a look at\nworking with Active Directory,\n\n5\n00:00:19.342 --> 00:00:21.531\nspecifically looking at computer accounts.\n\n6\n00:00:21.531 --> 00:00:23.899\nNow we've already delved\ninto user accounts.\n\n7\n00:00:23.899 --> 00:00:26.621\nThis time we're taking a look at it but\nwith the help of Mr. Mike Rodrick.\n\n8\n00:00:26.621 --> 00:00:27.600\nHow's it going Mike?\n\n9\n00:00:27.600 --> 00:00:28.710\n>> It's going great Ronnie.\n\n10\n00:00:28.710 --> 00:00:30.880\nI'm glad to be here and\nyou're exactly right,\n\n11\n00:00:30.880 --> 00:00:33.220\nwe're gonna be dealing with\ncomputer accounts today.\n\n12\n00:00:33.220 --> 00:00:35.560\nIt's one of those things that\npeople sometimes don't think about,\n\n13\n00:00:35.560 --> 00:00:39.280\nespecially when they first get into Active\nDirectory, we learn about user accounts.\n\n14\n00:00:39.280 --> 00:00:41.730\nAnd that's what we deal with primarily.\n\n15\n00:00:41.730 --> 00:00:45.520\nUsers need those to log in,\nwe've gotta reset passwords all the time,\n\n16\n00:00:45.520 --> 00:00:47.850\ngotta set all those attributes\non the user accounts.\n\n17\n00:00:47.850 --> 00:00:50.530\nThat's what we use to give\nthem access to resources or\n\n18\n00:00:50.530 --> 00:00:53.580\ndeny them access to resources,\nto audit what they're doing.\n\n19\n00:00:53.580 --> 00:00:57.990\nWhat we don't realize is or sometimes\nwe don't think about is a computer has\n\n20\n00:00:57.990 --> 00:01:00.140\nan account and Active Directory as well,\n\n21\n00:01:00.140 --> 00:01:05.210\nit has to have an object that represents\nthat computer in Active Directory.\n\n22\n00:01:05.210 --> 00:01:09.990\nIn fact, when you join a computer to\nthe domain, that's what you're doing.\n\n23\n00:01:09.990 --> 00:01:14.170\nYou're creating an account for\nthat computer in Active Directory.\n\n24\n00:01:14.170 --> 00:01:16.080\nAnd it's used Ronnie, for\nthe exact same reasons.\n\n25\n00:01:16.080 --> 00:01:18.230\nA computer can be added to groups.\n\n26\n00:01:18.230 --> 00:01:21.650\nIt can be given access or\ndenied access to resources.\n\n27\n00:01:21.650 --> 00:01:22.560\nWe can track.\n\n28\n00:01:22.560 --> 00:01:26.190\nLike if I wanna track Ronnie's log on,\nwhen he's logging on,\n\n29\n00:01:26.190 --> 00:01:30.810\nI can use his log on account,\nbut what about for the computer.\n\n30\n00:01:30.810 --> 00:01:34.540\nWhat if I wanna know what machine he\nwas using when he logged on to access\n\n31\n00:01:34.540 --> 00:01:35.920\nthose resources.\n\n32\n00:01:35.920 --> 00:01:39.250\nThat's where that computer\naccount can come into play.\n\n33\n00:01:40.480 --> 00:01:44.170\nThat's what allows me really to establish\nthat trust with Active Directory and\n\n34\n00:01:44.170 --> 00:01:46.630\nallows my authentication to occur.\n\n35\n00:01:46.630 --> 00:01:48.930\nWhen we look at that computer account.\n\n36\n00:01:48.930 --> 00:01:51.530\nWhen you restart a machine\nthat's part of a domain, right.\n\n37\n00:01:51.530 --> 00:01:54.110\nOr you boot it up, what's happening is\n\n38\n00:01:54.110 --> 00:01:57.650\nthat computer is reaching out to\nActive Directory and it's logging on.\n\n39\n00:01:57.650 --> 00:02:00.930\nJust like you do when you sit\ndown at that machine to log on.\n\n40\n00:02:00.930 --> 00:02:03.360\nWhen you see that little\nspinning cheerio and\n\n41\n00:02:03.360 --> 00:02:05.620\nit says it's applying settings and\nthings like that.\n\n42\n00:02:05.620 --> 00:02:08.860\nWell the computers authenticating\nwith Active Directory and\n\n43\n00:02:08.860 --> 00:02:10.730\nthen it's doing some other\nthings in the background.\n\n44\n00:02:10.730 --> 00:02:13.410\nIt's retrieving group policy and\napplying those.\n\n45\n00:02:13.410 --> 00:02:16.090\nAnd then finally,\nyou come on to your logon screen or\n\n46\n00:02:16.090 --> 00:02:18.180\nyou arrive at your logon screen.\n\n47\n00:02:18.180 --> 00:02:20.680\nIf your computer cannot\nauthenticate with Active Directory,\n\n48\n00:02:20.680 --> 00:02:23.060\nyou're not gonna be able to log in, right?\n\n49\n00:02:23.060 --> 00:02:24.720\nThat has to happen first.\n\n50\n00:02:24.720 --> 00:02:28.482\nThis is why you can't bring your laptop\nfrom home, plug it into your network,\n\n51\n00:02:28.482 --> 00:02:30.540\nand log in with your work account, right?\n\n52\n00:02:30.540 --> 00:02:34.700\nBecause the computer doesn't have\nan account in Active Directory.\n\n53\n00:02:34.700 --> 00:02:39.080\nSo let's first, Ronnie, let's just start\nby taking a look at a computer account.\n\n54\n00:02:39.080 --> 00:02:42.920\nSo on my screen here I've got my\ndomain controller opened up, and\n\n55\n00:02:42.920 --> 00:02:47.120\nI'm gonna navigate into\nActive Directory Users and Computers.\n\n56\n00:02:47.120 --> 00:02:50.260\nIn here, I've got my computer's container.\n\n57\n00:02:50.260 --> 00:02:54.210\nAnd that is a computer account for\nclient 01.\n\n58\n00:02:54.210 --> 00:02:55.910\n>> Now Mike, let me go ahead and\nask this question.\n\n59\n00:02:55.910 --> 00:02:58.330\nBecause even though I know\na little bit about it.\n\n60\n00:02:58.330 --> 00:03:00.580\nOn these computer accounts\nis it just the same way?\n\n61\n00:03:00.580 --> 00:03:04.910\nCan I just manually generate accounts for\ncomputers and that's okay or\n\n62\n00:03:04.910 --> 00:03:07.020\ndo I need to do it a special way?\n\n63\n00:03:07.020 --> 00:03:08.490\n>> No, actually you can.\n\n64\n00:03:08.490 --> 00:03:11.800\nWhen we look at these,\nif I right click right here and\n\n65\n00:03:11.800 --> 00:03:14.740\nchoose New computer is\ngonna be one of my options.\n\n66\n00:03:14.740 --> 00:03:19.550\nAnd this is what we would call\npre-staging a computer account.\n\n67\n00:03:19.550 --> 00:03:22.530\nNormally, in a lot of\nscenarios we don't do this.\n\n68\n00:03:22.530 --> 00:03:24.050\nIt's just a little too much work.\n\n69\n00:03:24.050 --> 00:03:26.060\nWe buy new machines from Dell.\n\n70\n00:03:26.060 --> 00:03:26.940\nThey put them all out.\n\n71\n00:03:26.940 --> 00:03:30.100\nWe got 50 new boxes from Dell and\nwe setup our lab or\n\n72\n00:03:30.100 --> 00:03:32.180\nwherever those machines are going.\n\n73\n00:03:32.180 --> 00:03:35.535\nAnd as we're applying the image we\njoin those machines to the domain.\n\n74\n00:03:35.535 --> 00:03:37.800\nAnd that creates that account for\nan Active Directory.\n\n75\n00:03:37.800 --> 00:03:39.950\nAnd, typically, that's the way we go.\n\n76\n00:03:39.950 --> 00:03:43.180\nBut let's say that I've got a user\nthat wants to bring their laptop and\n\n77\n00:03:43.180 --> 00:03:45.830\nthey wanna start using their\nlaptop as their work computer and\n\n78\n00:03:45.830 --> 00:03:47.570\nthey wanna join it to the domain.\n\n79\n00:03:47.570 --> 00:03:49.080\nWell, they don't have rights and\n\n80\n00:03:49.080 --> 00:03:52.550\nwe're gonna talk about what rights you\nneed to join a computer to the domain.\n\n81\n00:03:52.550 --> 00:03:53.560\nThey most likely don't have those.\n\n82\n00:03:53.560 --> 00:03:57.612\nSo, what I can do as an admin is say, hey,\ntell me what the name of your machine is\n\n83\n00:03:57.612 --> 00:04:00.881\nand they're gonna tell me that\nit's Bob's laptop, right, so\n\n84\n00:04:00.881 --> 00:04:03.722\nI can come in here,\nsay new computer, and I can call it,\n\n85\n00:04:03.722 --> 00:04:06.539\nlet's make it something\nsimpler than Bob's Laptop.\n\n86\n00:04:06.539 --> 00:04:08.443\nLet's call it laptop01.\n\n87\n00:04:08.443 --> 00:04:14.105\nSo I can say laptop01, and I'll click OK.\n\n88\n00:04:14.105 --> 00:04:15.452\nAnd that was it, right.\n\n89\n00:04:15.452 --> 00:04:17.402\nThere's not a lot of\ninformation I need to provide.\n\n90\n00:04:17.402 --> 00:04:19.353\nNow there's an account for it.\n\n91\n00:04:19.353 --> 00:04:22.281\nSo when Heak brings his laptop in,\nin the future,\n\n92\n00:04:22.281 --> 00:04:26.830\nhe can join that computer to the domain,\nand it will already have an account.\n\n93\n00:04:26.830 --> 00:04:30.622\nWhat'll happen is the computer will\nreach out, talk to Active Directory,\n\n94\n00:04:30.622 --> 00:04:32.830\nsay I wanna be a part of the domain.\n\n95\n00:04:32.830 --> 00:04:36.260\nAnd it'll say, wait I've already got\nan account, with the same name as you.\n\n96\n00:04:36.260 --> 00:04:38.060\nYou wanna use that account?\n\n97\n00:04:38.060 --> 00:04:41.350\nYou say yes, and now that machine,\nthat physical device\n\n98\n00:04:41.350 --> 00:04:44.290\nwill be associated with this account\nthat I just made an Active Directory.\n\n99\n00:04:44.290 --> 00:04:48.360\nSo you can definitely pre-stage them and\nwe do that in scenarios when the person\n\n100\n00:04:48.360 --> 00:04:52.180\nthat's gonna be joining the machine to the\ndomain, doesn't have the sufficient rights\n\n101\n00:04:52.180 --> 00:04:55.750\nor privileges to actually create\nthat object in Active Directory.\n\n102\n00:04:55.750 --> 00:04:59.394\n>> Well, Mike, if we could prestage them,\nyou were talking about another method for\n\n103\n00:04:59.394 --> 00:05:02.690\nus to be able to take a look at the way\nthat we can make that computer account.\n\n104\n00:05:02.690 --> 00:05:06.680\nBut we're really talking about the idea\nof joining a computer to the domain.\n\n105\n00:05:06.680 --> 00:05:10.040\nAnd this is one of those skills that\nI would say every IT professional at\n\n106\n00:05:10.040 --> 00:05:11.490\nleast needs to know how to do it.\n\n107\n00:05:11.490 --> 00:05:12.340\n>> Absolutely.\n\n108\n00:05:12.340 --> 00:05:14.261\nIt's gotta be one of those\nfirst things we learn,\n\n109\n00:05:14.261 --> 00:05:15.870\ncuz let's say we set up a domain, right?\n\n110\n00:05:15.870 --> 00:05:18.180\nWe're here learning\nabout Active Directory.\n\n111\n00:05:18.180 --> 00:05:22.250\nWe set up our domain controllers, we\ncreate our domain, we create our forest.\n\n112\n00:05:22.250 --> 00:05:22.950\nWell now what?\n\n113\n00:05:22.950 --> 00:05:24.200\nRight?\nThe next thing is to set up\n\n114\n00:05:24.200 --> 00:05:24.930\nyour infrastructure.\n\n115\n00:05:24.930 --> 00:05:28.380\nGet your servers ready,\nyour file servers, your print servers.\n\n116\n00:05:28.380 --> 00:05:29.800\nGet your client machines ready.\n\n117\n00:05:29.800 --> 00:05:32.490\nAll the workstations that your\nusers are gonna be sitting at.\n\n118\n00:05:32.490 --> 00:05:33.450\nAll of those,\n\n119\n00:05:33.450 --> 00:05:37.820\nthose clients as well as those files\nservers have to be joined by the domain.\n\n120\n00:05:37.820 --> 00:05:41.264\nSo it's definitely essential skill that\nwe're gonna need if we are gonna manage\n\n121\n00:05:41.264 --> 00:05:42.540\nan Active Directory domain.\n\n122\n00:05:42.540 --> 00:05:45.180\nSo let's see how to do it.\n\n123\n00:05:45.180 --> 00:05:45.772\nWe'll go ahead.\n\n124\n00:05:45.772 --> 00:05:50.010\nAnd I've got a machine over,\nthis guy, and if we take a look.\n\n125\n00:05:50.010 --> 00:05:52.630\nAnd I know I go the old\nschool way of doing this.\n\n126\n00:05:52.630 --> 00:05:56.270\nThere's other ways to get here, but\nI like going in to File Explorer,\n\n127\n00:05:56.270 --> 00:06:01.210\nright clicking on My Computer or this PC\nand choosing Properties, but it ends up\n\n128\n00:06:01.210 --> 00:06:05.960\nopening your system, which is under System\nand Security, from the control panel.\n\n129\n00:06:05.960 --> 00:06:07.920\nSo, you could go that way as well.\n\n130\n00:06:07.920 --> 00:06:11.190\nAnd, in here I can see the name of my\ncomputer as well as the fact that it\n\n131\n00:06:11.190 --> 00:06:13.190\ncurrently belongs to a work group.\n\n132\n00:06:13.190 --> 00:06:17.040\nSo, if I wanna join it to the domain,\nthere's a couple things I'm going to need.\n\n133\n00:06:17.040 --> 00:06:21.880\nI'll go ahead and click Change Settings,\nand then I will click the Change button.\n\n134\n00:06:21.880 --> 00:06:23.710\nNow, common mistake.\n\n135\n00:06:23.710 --> 00:06:26.000\nPeople will try to change\nthe name of their computer, and\n\n136\n00:06:26.000 --> 00:06:27.270\nthey'll do it right here.\n\n137\n00:06:27.270 --> 00:06:30.760\nMake sure you know this is\njust the computer description,\n\n138\n00:06:30.760 --> 00:06:35.560\nlike this is my office PC, or this is\nm home theater PC, or what have you.\n\n139\n00:06:35.560 --> 00:06:39.590\nYou click Change, this is where you\ncan change the name of the machine,\n\n140\n00:06:39.590 --> 00:06:42.680\nas well as your domain or\nworkgroup membership.\n\n141\n00:06:42.680 --> 00:06:44.150\nWe're gonna choose to join the domain.\n\n142\n00:06:44.150 --> 00:06:47.910\nSo the first thing I need, well,\nactually the first thing I need.\n\n143\n00:06:47.910 --> 00:06:50.720\nI need to be an Administrator\non this machine.\n\n144\n00:06:50.720 --> 00:06:53.360\nYou've got to be in\nthe local admin's group\n\n145\n00:06:53.360 --> 00:06:56.140\nto change the domain workgroup membership.\n\n146\n00:06:56.140 --> 00:06:57.640\nSo that's first thing.\n\n147\n00:06:57.640 --> 00:07:01.930\nSecond thing, I need to know the name\nof the domain that I wanna join.\n\n148\n00:07:01.930 --> 00:07:04.080\nAnd not just the NetBIOS name.\n\n149\n00:07:04.080 --> 00:07:09.010\nLike my domain here on my lab\nenvironment is lab.itpro.tv.\n\n150\n00:07:09.010 --> 00:07:13.386\nI could type in, just type in lab and\nit would probably work.\n\n151\n00:07:13.386 --> 00:07:14.620\n>> [LAUGH]\n>> Right?\n\n152\n00:07:14.620 --> 00:07:18.410\nBut you really need to get into the habit\nof using that fully qualified domain name,\n\n153\n00:07:18.410 --> 00:07:19.660\nthe DNS name.\n\n154\n00:07:19.660 --> 00:07:23.310\nCuz NetBIOS is eventually\nyou're gonna be going away.\n\n155\n00:07:23.310 --> 00:07:25.284\n>> [LAUGH]\n>> We've been saying that for years, but\n\n156\n00:07:25.284 --> 00:07:26.340\neventually it will.\n\n157\n00:07:26.340 --> 00:07:32.500\nSo you do need to now the name, and\nuse the full name, ITPro.tv in my case.\n\n158\n00:07:32.500 --> 00:07:34.451\nAnd I'll go ahead and click OK.\n\n159\n00:07:34.451 --> 00:07:40.209\nSo I'm a local admin and I know the name\nof the domain that I wanna join.\n\n160\n00:07:40.209 --> 00:07:42.756\n>> Now Mike, right here,\nobviously when we start\n\n161\n00:07:42.756 --> 00:07:46.832\nseeing this where we can join the computer\ndomain It must also mean that I have\n\n162\n00:07:46.832 --> 00:07:50.671\nto be an Active Directory domain admin\nto join computers to the domain.\n\n163\n00:07:50.671 --> 00:07:54.362\n>> You do have to have permissions to\ncreate an object in Active Directory,\n\n164\n00:07:54.362 --> 00:07:56.005\nis really what it comes down to.\n\n165\n00:07:56.005 --> 00:07:59.557\nCuz as I said earlier What we're doing\nwhen we join a computer to the domain is\n\n166\n00:07:59.557 --> 00:08:04.120\nwe're creating a representation, an object\nof that computer in active directory.\n\n167\n00:08:04.120 --> 00:08:08.120\nSo, that's what you need is\nthe permissions to create a new object.\n\n168\n00:08:08.120 --> 00:08:09.070\nDo the domain admins have that?\n\n169\n00:08:09.070 --> 00:08:09.850\nAbsolutely.\n\n170\n00:08:09.850 --> 00:08:12.450\nBut so do the account operators group.\n\n171\n00:08:12.450 --> 00:08:14.790\nThey can make new accounts\nin active directory.\n\n172\n00:08:14.790 --> 00:08:17.100\nYou can delegate permission.\n\n173\n00:08:17.100 --> 00:08:21.800\nRight, you might have a crew, that's\nresponsible for, well, you've got the best\n\n174\n00:08:21.800 --> 00:08:26.130\nfeeling in the world, at least for geeks\nlike me, when that UPS truck pulls and\n\n175\n00:08:26.130 --> 00:08:29.890\nthey're unloading pallets of computers\nthat you just ordered from Dell.\n\n176\n00:08:29.890 --> 00:08:33.180\nWell, it's great, but I don't want\nto be the one that runs around and\n\n177\n00:08:33.180 --> 00:08:34.740\njoins them all to the domain.\n\n178\n00:08:34.740 --> 00:08:38.410\nSo, I can delegate out to somebody\nPermissions to create objects in active\n\n179\n00:08:38.410 --> 00:08:41.950\ndirectory, and I can specify,\nonly computer objects, all right?\n\n180\n00:08:41.950 --> 00:08:45.370\nSo, I can give them the ability\nto join computers to the domain.\n\n181\n00:08:45.370 --> 00:08:47.980\nSo, that's the third thing we need,\nis permissions\n\n182\n00:08:47.980 --> 00:08:52.170\nto create an object in active directory,\nif it's not prestaged, right?\n\n183\n00:08:52.170 --> 00:08:56.260\nWith that laptop that I just did,\nI eliminated that, I went\n\n184\n00:08:56.260 --> 00:09:00.590\nahead as the domain admin and pre created\nthe computer object in active directory.\n\n185\n00:09:00.590 --> 00:09:04.400\nSo, now whoever is joining the computer\nto the domain still needs to be\n\n186\n00:09:04.400 --> 00:09:06.390\nan administrator on the local machine.\n\n187\n00:09:06.390 --> 00:09:09.830\nStill needs to know the name of the domain\nthat they're trying to join, but\n\n188\n00:09:09.830 --> 00:09:12.720\ndoes not need any rights and\nactive directory.\n\n189\n00:09:12.720 --> 00:09:14.360\nBecause the object already exists.\n\n190\n00:09:14.360 --> 00:09:18.050\nSo, it's just gonna match those\nnames up and we'll be good to go.\n\n191\n00:09:18.050 --> 00:09:20.910\nThe fourth thing I wanna\nmake sure we specify is,\n\n192\n00:09:20.910 --> 00:09:22.660\nyour TCP/IP settings have to be correct.\n\n193\n00:09:22.660 --> 00:09:28.190\nAnd in order for this process to occur,\nI've gotta find the domain controller so\n\n194\n00:09:28.190 --> 00:09:32.090\nI can ask it to join the domain,\nsee if there's an account for me.\n\n195\n00:09:32.090 --> 00:09:35.500\nOr create a computer account\nduring that process.\n\n196\n00:09:35.500 --> 00:09:37.600\nWell how do I find the domain controller?\n\n197\n00:09:37.600 --> 00:09:38.940\nI query DNS.\n\n198\n00:09:38.940 --> 00:09:43.375\nI said hey, DNS can you give me the IP\naddress of a domain controller for\n\n199\n00:09:43.375 --> 00:09:45.480\nlab.itpro.itv.\n\n200\n00:09:45.480 --> 00:09:49.550\nWell, if my DNS on my machine,\nmy client machine here,\n\n201\n00:09:49.550 --> 00:09:54.300\nis pointed to say Google's DNS server or\nsomebody at my ISP's DNS server.\n\n202\n00:09:54.300 --> 00:09:57.160\nTheir DNS servers are not gonna\nknow the IP address of my internal\n\n203\n00:09:57.160 --> 00:10:00.200\ndomain controllers so\nthey're going to say, cannot contact.\n\n204\n00:10:00.200 --> 00:10:04.310\nIn fact, you know what, let's take a look\nat that error because it's a really common\n\n205\n00:10:04.310 --> 00:10:08.610\none and we need to be able to spot and it\nand go, oh, I know exactly what's wrong.\n\n206\n00:10:08.610 --> 00:10:13.070\nSo, if I go into my network\nconnections on this machine And\n\n207\n00:10:13.070 --> 00:10:17.060\nI pull up my Properties and\nI'm gonna change the IP address so\n\n208\n00:10:17.060 --> 00:10:21.100\nit's not pointing to the correct,\nin fact, let's make sure.\n\n209\n00:10:21.100 --> 00:10:24.250\nI don't remember if I have\na couple of domain controllers.\n\n210\n00:10:24.250 --> 00:10:27.430\nWe'll point it to something\nI know is not my DNS server.\n\n211\n00:10:27.430 --> 00:10:32.350\nSo, now I'll got to Change Settings and\nI'll tell it I wanna change my domain and\n\n212\n00:10:32.350 --> 00:10:33.830\nworkgroup membership.\n\n213\n00:10:33.830 --> 00:10:35.440\nI wanna join lab.itpro.tv.\n\n214\n00:10:35.440 --> 00:10:36.860\nAnd I'll click OK.\n\n215\n00:10:36.860 --> 00:10:39.640\nAnd right now it's saying\n\n216\n00:10:39.640 --> 00:10:44.050\nokay let me try to find a domain\ncontroller for lab.itpro.tv.\n\n217\n00:10:44.050 --> 00:10:47.060\nAnd it doesn't look like it's\ngonna be successful right?\n\n218\n00:10:47.060 --> 00:10:50.370\nSo, we'll see.\nI want you to see this error message that\n\n219\n00:10:50.370 --> 00:10:51.250\npops up.\n\n220\n00:10:51.250 --> 00:10:52.390\nAnd there you go.\n\n221\n00:10:52.390 --> 00:10:55.950\nAn active directory domain controller for\nthe domain lab.itpro.tv.\n\n222\n00:10:55.950 --> 00:10:57.250\nCould not be contacted.\n\n223\n00:10:57.250 --> 00:10:59.480\nMake sure you typed in the name correctly.\n\n224\n00:10:59.480 --> 00:11:02.530\nYou can click on Details but it's not\ngoing to give you much more information.\n\n225\n00:11:02.530 --> 00:11:05.070\nIt's just going to say go\ncheck your TCP/IP settings.\n\n226\n00:11:06.220 --> 00:11:06.800\nAnd, wow,\n\n227\n00:11:06.800 --> 00:11:09.060\ndidn't think it would lock up my machine\n>> [LAUGH]\n\n228\n00:11:09.060 --> 00:11:09.990\n>> clicking on Details,\n\n229\n00:11:09.990 --> 00:11:11.940\nbut we'll give it a second there.\n\n230\n00:11:11.940 --> 00:11:14.000\nWhile it's doing that, there we go.\n\n231\n00:11:14.000 --> 00:11:17.030\nSo, same here, you know you can\nsee that it was a time out.\n\n232\n00:11:17.030 --> 00:11:18.670\nIt tried and tried and tried but\n\n233\n00:11:18.670 --> 00:11:23.310\nit couldn't find that SRV record to\npoint it to a domain controller.\n\n234\n00:11:23.310 --> 00:11:26.890\nSo, to fix it we're going to go\nback over to my TCP/IP settings.\n\n235\n00:11:26.890 --> 00:11:30.970\nWe'll go network connections,\nand we'll pull\n\n236\n00:11:30.970 --> 00:11:36.170\nup the properties of that network\nadapter and Get my IPV4 properties.\n\n237\n00:11:36.170 --> 00:11:42.970\nSet that back to the actual DNS server for\nlap.itpro.tv.\n\n238\n00:11:42.970 --> 00:11:46.620\nAnd you get that log on or\nthat that authentication dialogue box.\n\n239\n00:11:46.620 --> 00:11:49.790\nAnd that's how you know, okay at least I\nfound the domain controller because now\n\n240\n00:11:49.790 --> 00:11:51.730\nit's asking me, who are you?\n\n241\n00:11:51.730 --> 00:11:53.760\nAm I going to allow you to do this?\n\n242\n00:11:53.760 --> 00:12:01.050\nSo, I'll put in lab actually administrator\nand we'll go ahead and click okay.\n\n243\n00:12:01.050 --> 00:12:04.150\nAnd in a minute I should get a welcome to\nthe lab that IT put in there, there we go.\n\n244\n00:12:04.150 --> 00:12:06.900\nWelcome to the lab that\nIT prevent TV to domain.\n\n245\n00:12:06.900 --> 00:12:08.000\nI click okay.\n\n246\n00:12:08.000 --> 00:12:11.140\nAnytime you change the name\nof the computer or\n\n247\n00:12:11.140 --> 00:12:12.890\nthe work group domain membership.\n\n248\n00:12:12.890 --> 00:12:14.410\nIt is going to require a reboot.\n\n249\n00:12:14.410 --> 00:12:18.980\nSo, we will restart that and while it's\nrebooting we'll flip back over here\n\n250\n00:12:18.980 --> 00:12:23.350\nto active directory and\nif I refresh my computer's container\n\n251\n00:12:24.540 --> 00:12:28.870\nthere's the account that it\njust created for Client two.\n\n252\n00:12:28.870 --> 00:12:31.530\nRight?\nSo, we successfully join that machine to\n\n253\n00:12:31.530 --> 00:12:32.580\nthe domain.\n\n254\n00:12:32.580 --> 00:12:35.830\nNow, Mike one of the things that\nI know that can be done but\n\n255\n00:12:35.830 --> 00:12:39.560\nmaybe a lot of people don't is\nregular domain users though,\n\n256\n00:12:39.560 --> 00:12:42.690\nthey actually still have this ability\neven though they are not administrators?\n\n257\n00:12:42.690 --> 00:12:45.460\n>> They do actually,\nit's a leftover form the old NT days and\n\n258\n00:12:45.460 --> 00:12:47.870\nhonestly I don't know why\nit's still there Ronnie.\n\n259\n00:12:47.870 --> 00:12:52.470\nAnd it's something that most,\neven administrators might not be aware of,\n\n260\n00:12:52.470 --> 00:12:55.820\nand in my opinion,\nwe should probably do away with it.\n\n261\n00:12:55.820 --> 00:12:59.340\nBy default, every authenticated user,\n\n262\n00:12:59.340 --> 00:13:02.820\nanybody that has an account in active\ndirectory, actually gets to add or\n\n263\n00:13:02.820 --> 00:13:07.910\nhas the ability to add up to\nten computers to the domain.\n\n264\n00:13:07.910 --> 00:13:11.630\nNow, way back when,\nbefore security was a concern, right,\n\n265\n00:13:11.630 --> 00:13:13.630\nI mean that's kind of the way it is.\n\n266\n00:13:13.630 --> 00:13:15.830\nYes, any user could bring\nin their machine and\n\n267\n00:13:15.830 --> 00:13:18.700\nthey could join it to\nthe domain if they wanted to.\n\n268\n00:13:18.700 --> 00:13:19.790\nWell, we don't want that, right?\n\n269\n00:13:19.790 --> 00:13:23.860\nI don't know what machines they're\nbringing in, what's on those machines and\n\n270\n00:13:23.860 --> 00:13:27.290\nI don't want them joining it my domain and\nstarting to access resources.\n\n271\n00:13:27.290 --> 00:13:31.860\nSo, let's take a look at where that\nsetting is and how we can do away with it.\n\n272\n00:13:31.860 --> 00:13:35.270\nIf I pull up the properties of my domain.\n\n273\n00:13:35.270 --> 00:13:40.340\nThe first thing you'll notice is\nI don't have a whole lot of tabs.\n\n274\n00:13:40.340 --> 00:13:44.530\nSo, what I need to do is I need to make\nsure I turn on my advanced features.\n\n275\n00:13:44.530 --> 00:13:47.740\nGo to my view menu,\nI choose advanced features, and\n\n276\n00:13:47.740 --> 00:13:52.730\nnow I'm going to pull up the properties of\nmy domain again and I've got my attribute,\n\n277\n00:13:52.730 --> 00:13:55.990\neditor tab, it's where I can\nsee all of those attributes.\n\n278\n00:13:55.990 --> 00:13:57.500\nAnd when I go to that tab.\n\n279\n00:13:57.500 --> 00:14:03.810\nIf I scroll down to the ms section,\nwe're gonna find a setting\n\n280\n00:14:03.810 --> 00:14:08.700\ncalled msDS-MachineAccountQuota,\nand notice that's set to 10.\n\n281\n00:14:08.700 --> 00:14:11.970\nAnd what'll happen is if\na user brings their laptop in,\n\n282\n00:14:11.970 --> 00:14:14.520\nthey can join it to the domain,\nand it'll keep track of that.\n\n283\n00:14:14.520 --> 00:14:18.900\nFor each user, it'll decrement that\nnumber to nine, and then to eight.\n\n284\n00:14:18.900 --> 00:14:21.330\nAnd when they get to zero,\nthey won't be able to add any more.\n\n285\n00:14:21.330 --> 00:14:25.030\nBut, again, it's a per user thing so\nevery single user can do this.\n\n286\n00:14:25.030 --> 00:14:30.560\nAnd so what I typically do is I come\nin here and change that to a zero.\n\n287\n00:14:30.560 --> 00:14:33.230\nNow, I know that only if you're\nin those groups that have that\n\n288\n00:14:33.230 --> 00:14:36.730\nalready have the permission like the\ndomain admins or the account operators Or\n\n289\n00:14:36.730 --> 00:14:40.790\nif I specifically delegate permission\nto you you'll be able to do this.\n\n290\n00:14:40.790 --> 00:14:44.340\nOtherwise, you will not be able\nto add a machine to the domain.\n\n291\n00:14:44.340 --> 00:14:45.720\nSo, a great question, Ronnie, and\n\n292\n00:14:45.720 --> 00:14:48.940\nits something that I said\nthat I think all networks.\n\n293\n00:14:48.940 --> 00:14:53.090\nIf they knew that setting was there,\nthey would probably change it because it's\n\n294\n00:14:53.090 --> 00:14:57.670\na little bit risky saying that any user\ncan bring any machine into my network.\n\n295\n00:14:57.670 --> 00:14:59.560\nAnd join it to the domain,\nnot a good idea.\n\n296\n00:14:59.560 --> 00:15:01.230\nAll right, so we've seen again.\n\n297\n00:15:01.230 --> 00:15:04.150\nI want to make sure that we\nunderstand what it takes to\n\n298\n00:15:04.150 --> 00:15:05.650\njoin a machine to the domain.\n\n299\n00:15:05.650 --> 00:15:08.540\nYou've got to be a local\nadmin on the machine and\n\n300\n00:15:08.540 --> 00:15:12.280\nyour TCP/IP settings have to be configured\nso you can find the domain controller,\n\n301\n00:15:12.280 --> 00:15:15.230\ntalk to the DNS server that domains\nabout the domain controller.\n\n302\n00:15:15.230 --> 00:15:17.970\nThen, you've got to know the name of\nthe domain that you want to join.\n\n303\n00:15:17.970 --> 00:15:21.020\nThe fully qualified to main name\nnot just the net bios to main name.\n\n304\n00:15:21.020 --> 00:15:21.590\nAll right, and\n\n305\n00:15:21.590 --> 00:15:25.150\nthen you gotta have permissions and\ndirectory either by being in one\n\n306\n00:15:25.150 --> 00:15:29.740\nof those groups tha have permissions\nthat have to be delegated to you.\n\n307\n00:15:29.740 --> 00:15:34.500\nOr, an admin can already pre stage\nthat computer account for you and\n\n308\n00:15:34.500 --> 00:15:36.280\nyou can skip that computer\npermissions part.\n\n309\n00:15:36.280 --> 00:15:37.280\nStill need the other stuff.\n\n310\n00:15:37.280 --> 00:15:38.390\nThe TCP IP settings.\n\n311\n00:15:38.390 --> 00:15:40.530\nThe administrator on the local machine.\n\n312\n00:15:40.530 --> 00:15:42.462\nAnd the name of the domain.\n\n313\n00:15:42.462 --> 00:15:45.049\n>> Now, Mike I have a question about\nthose pre stage accounts again.\n\n314\n00:15:45.049 --> 00:15:47.220\nBecause I think you helped us\nto understand a little bit more.\n\n315\n00:15:47.220 --> 00:15:50.020\nBut just a couple of simple\nthings that we may not know.\n\n316\n00:15:50.020 --> 00:15:54.193\nIs the computer name gonna be case\nsensitive if we pre-stage it versus\n\n317\n00:15:54.193 --> 00:15:55.890\nwhat's on the computer?\n\n318\n00:15:55.890 --> 00:15:59.370\n>> It's not actually, it's a great\nquestion and it's not, you see me,\n\n319\n00:15:59.370 --> 00:16:03.085\nI type them in all lower case, and\nthat's just because I'm a lazy typer.\n\n320\n00:16:03.085 --> 00:16:04.532\n>> [LAUGH]\n>> But they're not case sensitive for\n\n321\n00:16:04.532 --> 00:16:05.266\nthose names, no.\n\n322\n00:16:05.266 --> 00:16:07.240\n>> All right, so\nlet me ask a second part then.\n\n323\n00:16:07.240 --> 00:16:08.810\n>> Okay.\n\n324\n00:16:08.810 --> 00:16:12.450\n>> So what has also happened with the\npre-stage though is that the computer name\n\n325\n00:16:12.450 --> 00:16:15.890\nthat we're actually trying to add in,\nit has to be an exact match, right,\n\n326\n00:16:15.890 --> 00:16:19.620\nto the pre-stage name, and that's really\nkey, because if you have instead of\n\n327\n00:16:19.620 --> 00:16:22.960\na zero, you put a o there, then it's\nprobably not gonna find the match, right?\n\n328\n00:16:22.960 --> 00:16:26.180\n>> Absolutely right, Ronnie, you've\ngotta make sure that matches exactly.\n\n329\n00:16:26.180 --> 00:16:29.885\nSo if that user comes to you and says, hey\nI wanna join my computer to my laptop to\n\n330\n00:16:29.885 --> 00:16:33.310\nthe domain and you're okay with that,\nand you say, hey what's the name\n\n331\n00:16:33.310 --> 00:16:37.326\nof your computer and I'll set it up for\nyou, and they go, I think it's laptop02.\n\n332\n00:16:37.326 --> 00:16:42.193\nWell, you might as well tell them find\nout, let me know, because, you're exactly\n\n333\n00:16:42.193 --> 00:16:46.788\nright, if laptop o, the letter o1 comes\ninto my network and tries to join, and\n\n334\n00:16:46.788 --> 00:16:51.246\nit sees there's an account in there for\nlaptop01, it doesn't match, and\n\n335\n00:16:51.246 --> 00:16:55.635\nit doesn't say, hey there's already\nan account with the same name as you,\n\n336\n00:16:55.635 --> 00:16:57.243\nwould you like to use that?\n\n337\n00:16:57.243 --> 00:17:00.820\nIt'll just say you need permissions\nto join this machine to the domain.\n\n338\n00:17:00.820 --> 00:17:04.890\nIt won't tell them that there's a name\nmismatch, right, it doesn't see that,\n\n339\n00:17:04.890 --> 00:17:09.580\nit just says I'm trying to join, there's\nnot an account that is an exact match for\n\n340\n00:17:09.580 --> 00:17:11.740\nme so we're gonna have to create one.\n\n341\n00:17:11.740 --> 00:17:15.400\nYou don't have permissions to create it,\nwe're gonna fail, right,\n\n342\n00:17:15.400 --> 00:17:17.112\nit does have to be an exact match.\n\n343\n00:17:17.112 --> 00:17:19.893\n>> And so if you were a pre-stage\nlet's say this account in OU and\n\n344\n00:17:19.893 --> 00:17:23.371\nyou had policies applied to them, then\nwhen that new account gets created and\n\n345\n00:17:23.371 --> 00:17:27.227\nit's actually not the same match, it ends\nup probably by default in that computer's\n\n346\n00:17:27.227 --> 00:17:30.850\ncontainer, and the policy is not gonna\nmatch and that's what you really want.\n\n347\n00:17:30.850 --> 00:17:33.412\nYou want to keep that security under\ncontrol and so that's why it's very\n\n348\n00:17:33.412 --> 00:17:35.856\nimportant that we actually do make\nsure that we understand that too.\n\n349\n00:17:35.856 --> 00:17:39.810\n>> Yes or just turn that msds\nmachining account to zero.\n\n350\n00:17:39.810 --> 00:17:40.890\n>> That's right.\n\n351\n00:17:40.890 --> 00:17:42.071\n>> And that way if the name doesn't match,\n\n352\n00:17:42.071 --> 00:17:43.473\nthey won't be able to add\nit in the first place.\n\n353\n00:17:43.473 --> 00:17:44.669\n>> Good idea, good idea.\n\n354\n00:17:44.669 --> 00:17:47.592\n>> Or but like Ronnie said,\nthat is definitely an issue, and\n\n355\n00:17:47.592 --> 00:17:50.038\nwe've talked about that in other episodes,\nand\n\n356\n00:17:50.038 --> 00:17:54.274\nwe've got another episode we're gonna talk\nabout group policy, in fact we've got\n\n357\n00:17:54.274 --> 00:17:57.644\na whole course on group policy if\nyou check out our course library.\n\n358\n00:17:57.644 --> 00:18:01.640\nBut definitely being in the right\ncontainer in active directory affects your\n\n359\n00:18:01.640 --> 00:18:05.082\nRSOP, what we call your result and\nset of policies, and if you're\n\n360\n00:18:05.082 --> 00:18:09.137\nnot in the right container, the correct\nsettings aren't gonna be applied and\n\n361\n00:18:09.137 --> 00:18:12.947\nthat could end up being a security\nviolation, it could cause problems for\n\n362\n00:18:12.947 --> 00:18:17.373\nthe user because settings aren't there\nthat they're expecting, so definitely bad\n\n363\n00:18:17.373 --> 00:18:21.490\nday and it's easily fixed, we can move it,\nbut we don't wanna have to deal with\n\n364\n00:18:21.490 --> 00:18:25.535\nthe issues, so let's just make sure\nit's in the right place from the get go.\n\n365\n00:18:25.535 --> 00:18:29.379\n>> Now Mike, with these computer accounts\nwhen we do set them up it didn't seem that\n\n366\n00:18:29.379 --> 00:18:32.580\nthere were as many tabs as what\nwe had inside of user accounts.\n\n367\n00:18:32.580 --> 00:18:34.096\nWhat is the idea then?\n\n368\n00:18:34.096 --> 00:18:36.992\nI also saw that there was a password\nto the computer accounts,\n\n369\n00:18:36.992 --> 00:18:39.458\nhow the heck does my computer\nuse a password, Mike?\n\n370\n00:18:39.458 --> 00:18:43.496\n>> [LAUGH] There is and\nyour password generates a random computer,\n\n371\n00:18:43.496 --> 00:18:46.630\nit's pretty cool if you've never seen it,\nno.\n\n372\n00:18:46.630 --> 00:18:50.539\nYour computer generate when you join\nthat machine to the domain, it ends up\n\n373\n00:18:50.539 --> 00:18:54.573\ngenerating a random character password and\nit stores that password in active\n\n374\n00:18:54.573 --> 00:18:58.916\ndirectory, and so every time you turn that\nmachine on, like I was saying earlier,\n\n375\n00:18:58.916 --> 00:19:03.133\nyou reboot the machine or you turn it on,\nbefore you ever get to the log on screen,\n\n376\n00:19:03.133 --> 00:19:06.423\nyour machine is reaching out\ntalking to the main controller and\n\n377\n00:19:06.423 --> 00:19:08.201\nit's authenticating, right?\n\n378\n00:19:08.201 --> 00:19:11.563\nAnd its got its password and\nit sends it over to active directory and\n\n379\n00:19:11.563 --> 00:19:15.930\nactive directory verifies the password,\nwe just don't have to deal with it.\n\n380\n00:19:15.930 --> 00:19:19.100\nActive directory and the computer\nmanage it in the background, so\n\n381\n00:19:19.100 --> 00:19:21.790\nwe don't see the password,\nwe don't know what it is, but\n\n382\n00:19:21.790 --> 00:19:25.740\nthey do change it, just like we have\nto change our password every so often,\n\n383\n00:19:25.740 --> 00:19:30.870\nthe computers change their password about\nevery 30 days is the current setting for\n\n384\n00:19:30.870 --> 00:19:32.880\nthose computer machines,\nor for the computers.\n\n385\n00:19:32.880 --> 00:19:38.330\nAnd that brings us to a good point because\nwe can have issues with that, right?\n\n386\n00:19:38.330 --> 00:19:43.030\nWhat can happen, just like if you go\nto log on and you forget your password.\n\n387\n00:19:43.030 --> 00:19:45.790\nYou try to type it in,\nit's the wrong password, what happens?\n\n388\n00:19:45.790 --> 00:19:48.014\nYou get denied, right,\nit doesn't let you log on.\n\n389\n00:19:48.014 --> 00:19:51.142\nWhat do you think's gonna happen if\nthe computer tries to send in the wrong\n\n390\n00:19:51.142 --> 00:19:52.520\npassword?\n\n391\n00:19:52.520 --> 00:19:54.440\nIt's not gonna be allowed\nto access the network,\n\n392\n00:19:54.440 --> 00:19:58.190\nyou're never gonna get to log onto\nthe machine because the computer itself\n\n393\n00:19:58.190 --> 00:20:01.630\nisn't gonna be able to log onto\nthe network, to get you that far.\n\n394\n00:20:01.630 --> 00:20:05.360\nAnd that's known as what's\ncalled the trust relationship.\n\n395\n00:20:05.360 --> 00:20:09.318\nWhat happens is when that computer starts\nup, and it verifies its identity with\n\n396\n00:20:09.318 --> 00:20:13.159\nactive directory, it sends over that\npassword, active directory verifies\n\n397\n00:20:13.159 --> 00:20:17.016\nthat password, now they've got the ability\nto create this secure channel.\n\n398\n00:20:17.016 --> 00:20:20.453\nAnd through that secure channel is\nwhere my authentication is going.\n\n399\n00:20:20.453 --> 00:20:25.246\nWhen I go to log on, I've now got\na protected connection back to active\n\n400\n00:20:25.246 --> 00:20:29.160\ndirectory that I can use for\nmy authentication process.\n\n401\n00:20:29.160 --> 00:20:32.920\nIf the computer can't log on,\nit can't establish that trust, it can't\n\n402\n00:20:32.920 --> 00:20:37.640\nestablish that secure computer channel,\nand then I won't be able to log on.\n\n403\n00:20:37.640 --> 00:20:39.920\nSo it's something that\nwe need to be aware of,\n\n404\n00:20:39.920 --> 00:20:44.170\nit doesn't come to bite us too often but\nit can.\n\n405\n00:20:44.170 --> 00:20:46.580\nAnd you might think, well Mike how?\n\n406\n00:20:46.580 --> 00:20:49.070\nHow can the computer\nget the wrong password?\n\n407\n00:20:49.070 --> 00:20:51.550\nIt's changing it, it's all doing\nit in the background, I don't\n\n408\n00:20:51.550 --> 00:20:55.070\nhave anything to do with it, so how can\nit possibly get the wrong password?\n\n409\n00:20:55.070 --> 00:20:56.228\nIt's actually easier than you think.\n\n410\n00:20:56.228 --> 00:21:01.110\nLet's say the computer, we don't know\nwhen it happens, right, I'm not watching\n\n411\n00:21:01.110 --> 00:21:05.252\nthe calendar, I don't know when my\nmachine is changing its password.\n\n412\n00:21:05.252 --> 00:21:09.874\nOn Monday I decide to create a restore\npoint on my machine because I'm getting\n\n413\n00:21:09.874 --> 00:21:12.788\nready to do some major\nconfiguration changes and\n\n414\n00:21:12.788 --> 00:21:17.070\nI want to be able to roll back, so\non Monday I create this restore point.\n\n415\n00:21:17.070 --> 00:21:20.780\nAnd then on Tuesday it\njust happens to be the day\n\n416\n00:21:20.780 --> 00:21:24.030\nthat the computer changes its\npassword with active directory,\n\n417\n00:21:24.030 --> 00:21:28.020\nand then on Wednesday my computer fails,\nsomething goes wrong.\n\n418\n00:21:28.020 --> 00:21:31.640\nSo I roll back to that restore\npoint I created on Monday.\n\n419\n00:21:31.640 --> 00:21:34.548\nWell that was before the computer\nchanged its password, so\n\n420\n00:21:34.548 --> 00:21:36.757\nnow the computer is back\nto its old password,\n\n421\n00:21:36.757 --> 00:21:40.145\nactive directory has its new password\nthat it changed it to, right?\n\n422\n00:21:40.145 --> 00:21:42.094\nBecause it was on Tuesday\nthat it changed it, so\n\n423\n00:21:42.094 --> 00:21:43.996\nnow when that computer\ngoes to authenticate,\n\n424\n00:21:43.996 --> 00:21:47.215\nactive directory's gonna say,\nwait a second, that's the wrong password,\n\n425\n00:21:47.215 --> 00:21:50.840\nI don't trust you, I don't know who you\nare, I'm not gonna allow you to continue.\n\n426\n00:21:50.840 --> 00:21:54.835\nAnd that's when we get the dreaded,\na trust relationship between this\n\n427\n00:21:54.835 --> 00:21:57.825\nworkstation and the domain has failed,\nsee your system administrator.\n\n428\n00:21:57.825 --> 00:21:59.280\n>> [LAUGH]\n>> [LAUGH] All right, and\n\n429\n00:21:59.280 --> 00:22:04.602\nI can show you an example of that,\nif I go back over this client here,\n\n430\n00:22:04.602 --> 00:22:09.230\nI'm currently logged on as a Rob,\nit's part of my domain.\n\n431\n00:22:09.230 --> 00:22:12.620\nAnd I'm gonna fake it,\nthis is a way to intentionally\n\n432\n00:22:12.620 --> 00:22:16.520\nbreak the trust relationship, so\nI'm gonna go and reset this account.\n\n433\n00:22:16.520 --> 00:22:20.000\nThis is actually one of the ways\nyou fix the problem as well,\n\n434\n00:22:20.000 --> 00:22:21.660\nbut first let's see the problem.\n\n435\n00:22:21.660 --> 00:22:24.530\nSo I'll click reset account,\nand I'll say Yes.\n\n436\n00:22:24.530 --> 00:22:26.910\nAnd it says it's successfully reset.\n\n437\n00:22:26.910 --> 00:22:30.450\nAnd what that's doing is it's\nbreaking the relationship\n\n438\n00:22:30.450 --> 00:22:34.910\nbetween the physical computer and\nthe logical object in active directory,\n\n439\n00:22:34.910 --> 00:22:40.222\nthey're no longer mapped to each other,\nright, I'm severing that relationship.\n\n440\n00:22:40.222 --> 00:22:44.848\nSo if I go back over here and\nI log off, [SOUND] and\n\n441\n00:22:44.848 --> 00:22:51.029\nlet me sign out there,\nsorry I like to hum when I'm thinking.\n\n442\n00:22:51.029 --> 00:22:53.566\n>> [LAUGH]\n>> We'll sign off and\n\n443\n00:22:53.566 --> 00:22:58.020\nthen we're gonna try to log back\nin as Rob and see what happens.\n\n444\n00:22:58.020 --> 00:23:02.500\nSo we'll type in his super secret\npassword and there it is, the trust\n\n445\n00:23:02.500 --> 00:23:06.590\nrelationship between this workstation and\nthe primary domain has failed.\n\n446\n00:23:06.590 --> 00:23:11.283\nI can't log on because the computer can no\nlonger establish that secure channel with\n\n447\n00:23:11.283 --> 00:23:12.417\nactive directory.\n\n448\n00:23:12.417 --> 00:23:16.066\n>> So Mike every time that I'm actually\nlogging on to active directory two things\n\n449\n00:23:16.066 --> 00:23:19.604\nare happening right, at least two,\nI'm pretty sure there's more, but,\n\n450\n00:23:19.604 --> 00:23:21.872\n[LAUGH] the user is actually\nauthenticating, but\n\n451\n00:23:21.872 --> 00:23:25.210\nwhat you're saying is the computer\nitself is also authenticating?\n\n452\n00:23:25.210 --> 00:23:27.552\n>> It's authenticating when you\nstart it up or when you restart it.\n\n453\n00:23:27.552 --> 00:23:29.461\n>> Okay.\n>> So if you do that in the morning but\n\n454\n00:23:29.461 --> 00:23:32.633\nyou don't log on until 10 o'clock in\nthe afternoon or in the morning or\n\n455\n00:23:32.633 --> 00:23:36.378\nsomething like that, the computer's\nalready done its authentication, but yeah,\n\n456\n00:23:36.378 --> 00:23:38.978\nevery time you start it up,\nevery time you reboot it, yes,\n\n457\n00:23:38.978 --> 00:23:42.230\nthat computer has to authenticate\nwith an active directory.\n\n458\n00:23:42.230 --> 00:23:43.200\nSo how do we fix it?\n\n459\n00:23:43.200 --> 00:23:45.879\nWell, there's a couple\nof ways you can do it.\n\n460\n00:23:45.879 --> 00:23:50.894\nIf this happened in the real world,\nand I hadn't intentionally broke it,\n\n461\n00:23:50.894 --> 00:23:55.990\nThe first thing I would do is go reset\nthe computer account now because active\n\n462\n00:23:55.990 --> 00:24:00.790\ndirectory still thinks it's mapped\nto the physical machine, right?\n\n463\n00:24:00.790 --> 00:24:04.290\nAgain, if I hadn't intentionally broke it,\nactive directory thinks it's\n\n464\n00:24:04.290 --> 00:24:08.200\nstill matched to that machine, but\nnow that computer can't authenticate it.\n\n465\n00:24:08.200 --> 00:24:12.120\nIt can't except that it can't\nestablish that connection.\n\n466\n00:24:12.120 --> 00:24:15.583\nSo what I need to do, is I need to tell\nactive directory, hey something's wrong.\n\n467\n00:24:15.583 --> 00:24:17.330\nWe're gonna reset it.\n\n468\n00:24:17.330 --> 00:24:19.800\nSo we'll just go in here and\nreset that account.\n\n469\n00:24:21.790 --> 00:24:22.800\nRight.\n\n470\n00:24:22.800 --> 00:24:25.090\nThen we've got to repair this connection.\n\n471\n00:24:25.090 --> 00:24:29.780\nWe're basically telling the computer, hey\ncreate a new password is what we're doing.\n\n472\n00:24:29.780 --> 00:24:32.240\nSo I'm gonna log on as the local admin.\n\n473\n00:24:32.240 --> 00:24:37.030\nThis does get run on the machine\nthat's having the issues.\n\n474\n00:24:37.030 --> 00:24:42.290\nNow I can log on, well I'm not going to be\nable to log in as the lab admin Michael.\n\n475\n00:24:42.290 --> 00:24:47.180\nLet's do local admin and I think my\nlocal account is actually named Mike.\n\n476\n00:24:48.490 --> 00:24:51.980\nSo what I need to do is\nlog on as a local admin\n\n477\n00:24:51.980 --> 00:24:56.350\nif I can remember what\nmy local admin name was.\n\n478\n00:24:58.090 --> 00:25:01.620\nAlright, so we'll log on as the local\nadministrator since I can no longer\n\n479\n00:25:01.620 --> 00:25:03.750\nauthenticate to the domain.\n\n480\n00:25:03.750 --> 00:25:09.185\nSo we'll cheat and do a little dot\nbackslash or you can do client 01,\n\n481\n00:25:09.185 --> 00:25:13.344\nthe name of the computer; Mike and\nI'll log in here.\n\n482\n00:25:13.344 --> 00:25:17.130\nAnd the way we're gonna fix\nit is to use PowerShell.\n\n483\n00:25:17.130 --> 00:25:18.640\nSo I'm gonna launch PowerShell.\n\n484\n00:25:19.710 --> 00:25:22.820\nIt's gonna be mad cause I'm\nnot giving it a chance to\n\n485\n00:25:22.820 --> 00:25:26.530\nfinish loading up before\nI start launching things.\n\n486\n00:25:26.530 --> 00:25:30.338\nAnd the command we're gonna use\nis Test-ComputerSecureChannel.\n\n487\n00:25:30.338 --> 00:25:34.980\nSo do, Test-ComputerSecureChannel, and\nif I just use that command by itself\n\n488\n00:25:34.980 --> 00:25:38.700\nwithout any parameters,\nit just checks the secure channel.\n\n489\n00:25:38.700 --> 00:25:41.120\nAnd you can see the result is false.\n\n490\n00:25:41.120 --> 00:25:46.030\nIt cannot establish that trusted, that\nsecure channel back to Active Directory.\n\n491\n00:25:46.030 --> 00:25:52.110\nSo, we fix it by first making sure we run\nPowershell as an administrator, right?\n\n492\n00:25:52.110 --> 00:25:54.500\nGood old UAC can be\nkicking in on me there, so\n\n493\n00:25:54.500 --> 00:25:57.340\nI'm gonna run Powershell\nas the local admin.\n\n494\n00:25:57.340 --> 00:26:02.070\nRemember, even if you're logged on as a\nlocal admin, you need to make sure you do\n\n495\n00:26:02.070 --> 00:26:07.027\nthe run as, and I'm gonna use that same\ncommand, test-ComputerSecureChannel.\n\n496\n00:26:07.027 --> 00:26:13.190\nThis time I'm going to add a dash\nrepair and also a dash server.\n\n497\n00:26:13.190 --> 00:26:18.440\nAnd you don't have to, the dash server\nwill specify a particular dash controller.\n\n498\n00:26:18.440 --> 00:26:22.340\nOtherwise it will just grab\nthe first domain controller can\n\n499\n00:26:22.340 --> 00:26:24.846\nfind according to DNS.\n\n500\n00:26:24.846 --> 00:26:28.970\nI'll put in dc01.lab.itpro.tv And\n\n501\n00:26:28.970 --> 00:26:32.090\nthen the last thing that need\nto do is a dash credential.\n\n502\n00:26:32.090 --> 00:26:34.010\nRemember, I'm running\nthis as a local admin.\n\n503\n00:26:34.010 --> 00:26:36.190\nI don't have any rights\nin active directory, so\n\n504\n00:26:36.190 --> 00:26:40.590\nhow can I fix that channel\nwith active directory.\n\n505\n00:26:40.590 --> 00:26:44.770\nSo, I'll type in lab\nslash administrator and\n\n506\n00:26:44.770 --> 00:26:46.740\nif I can spell it right, we'll hit enter.\n\n507\n00:26:46.740 --> 00:26:52.580\nAnd it's going to prompt me for\nthat password and there we go.\n\n508\n00:26:52.580 --> 00:26:55.870\nNow it comes back and\nit says false, but that's okay.\n\n509\n00:26:55.870 --> 00:26:56.460\n>> I know.\n\n510\n00:26:56.460 --> 00:26:57.780\n>> Yeah, I understand it.\n\n511\n00:26:57.780 --> 00:26:58.280\n>> Oh, yeah.\n\n512\n00:26:58.280 --> 00:27:00.800\n>> It's trying to trick us there,\nno, what's happening is,\n\n513\n00:27:00.800 --> 00:27:04.890\nI need to reboot this machine because, the\nlast time that the computer started up.\n\n514\n00:27:04.890 --> 00:27:07.380\n>> It was unable to\nestablish that connection.\n\n515\n00:27:07.380 --> 00:27:08.530\nSo it recorded the fact.\n\n516\n00:27:08.530 --> 00:27:09.660\nIt said false.\n\n517\n00:27:09.660 --> 00:27:13.026\nAnd so PowerShell just reading\nthat registry entry there.\n\n518\n00:27:13.026 --> 00:27:20.770\nSo I'll reboot it and then it should do\na little shut down dash R dash T zero.\n\n519\n00:27:20.770 --> 00:27:22.160\nReboot this machine.\n\n520\n00:27:22.160 --> 00:27:25.650\nWhich it'll make an attempt to\nestablish that connection again.\n\n521\n00:27:25.650 --> 00:27:29.610\n>> And it should succeed this time\nbecause we reset the computer account and\n\n522\n00:27:29.610 --> 00:27:34.910\nactive directory, we ran the test\ndash computer secure channel dash\n\n523\n00:27:34.910 --> 00:27:40.470\nrepair on the client that should have\nreestablished that connection, changed\n\n524\n00:27:40.470 --> 00:27:44.660\nit to a new password that both active\ndirectory and the client can agree on.\n\n525\n00:27:44.660 --> 00:27:46.560\n>> And\neverything should be good at this point.\n\n526\n00:27:46.560 --> 00:27:51.010\nSo the true test would be,\ncan I log on with the domain account?\n\n527\n00:27:51.010 --> 00:27:54.510\n>> So while we're actually waiting for\nthat computer to go ahead and\n\n528\n00:27:54.510 --> 00:27:57.570\nreboot, let's just kind of run\nthrough some of the things that we've\n\n529\n00:27:57.570 --> 00:28:00.460\njust talked about here\nin our episode as well.\n\n530\n00:28:00.460 --> 00:28:03.400\nLearning how to computer count is\nessential in active directory, right?\n\n531\n00:28:03.400 --> 00:28:06.610\n>> It will help uniquely identify\nthat particular computer and\n\n532\n00:28:06.610 --> 00:28:10.360\nthat way we can set the controls that\nwe need to, but once that's done,\n\n533\n00:28:10.360 --> 00:28:12.670\nit also establishes that\ntrust relationship so\n\n534\n00:28:12.670 --> 00:28:16.890\nthat now the computer can break, and\nMike showed us how to do that but\n\n535\n00:28:16.890 --> 00:28:20.940\nnow he showed is how to repair it, and now\nwe're about to verify Mike's good work.\n\n536\n00:28:20.940 --> 00:28:21.880\nSo-\n>> Great. We'll see.\n\n537\n00:28:21.880 --> 00:28:23.570\nKeep your fingers crossed, right?\n\n538\n00:28:23.570 --> 00:28:27.660\nI'll log on as Rob\n>> With his super secret password and\n\n539\n00:28:27.660 --> 00:28:31.410\nlogging onto the domain lab there and\nthere we go.\n\n540\n00:28:31.410 --> 00:28:32.724\nIt's going to, pretty sure.\n\n541\n00:28:32.724 --> 00:28:34.496\n>> [LAUGH]\n>> I'm confident.\n\n542\n00:28:34.496 --> 00:28:37.327\nIt's not going to give me that issues.\n\n543\n00:28:37.327 --> 00:28:41.121\nNow, if I wanted to I could\nlaunch up PowerShell again,\n\n544\n00:28:41.121 --> 00:28:44.837\nI could run that test dash\ncomputer secured channel and\n\n545\n00:28:44.837 --> 00:28:49.600\nit should come back as true but\nthe fact that i've logged on a machine is\n\n546\n00:28:49.600 --> 00:28:54.168\nmore than enough proof that I've\nfixed that trust relationship.\n\n547\n00:28:54.168 --> 00:28:57.865\n>> Now, Mike, it seems like we're actually\ntrying to see how important reboots\n\n548\n00:28:57.865 --> 00:29:01.120\nare also in the realm of doing\nwhat we're talking about here.\n\n549\n00:29:01.120 --> 00:29:04.950\nThe very fact is once we actually change\neverything, right, the machine is still\n\n550\n00:29:04.950 --> 00:29:07.590\ncaching some information at times and\nif we didn't do that,\n\n551\n00:29:07.590 --> 00:29:10.420\neven after repair, we would have had\nissues again because it would have\n\n552\n00:29:10.420 --> 00:29:14.210\nstill been sitting there inside of the RAM\nAnd that can also end up happening too.\n\n553\n00:29:14.210 --> 00:29:17.180\nSo remember that for us,\nas far as work stations go,\n\n554\n00:29:17.180 --> 00:29:19.440\nif we want to establish\na trust relationship,\n\n555\n00:29:19.440 --> 00:29:23.130\ninside of an active directory,\nthese computer accounts have to be there.\n\n556\n00:29:23.130 --> 00:29:26.810\nAnd they also of course have to actually\nbe in tune with the active directory.\n\n557\n00:29:26.810 --> 00:29:28.740\nOnce they are out of that,\nwhen they are not done but,\n\n558\n00:29:28.740 --> 00:29:31.320\nwe at least now know how to repair it too.\n\n559\n00:29:31.320 --> 00:29:35.130\nSo, Mike any last words of wisdom as\nfar as dealing with computer accounts\n\n560\n00:29:35.130 --> 00:29:36.110\nin active directory.\n\n561\n00:29:36.110 --> 00:29:37.630\n>> If you see that message run.\n\n562\n00:29:37.630 --> 00:29:39.730\n>> [LAUGH]\n>> [LAUGH] No, it's really not too hard to\n\n563\n00:29:39.730 --> 00:29:41.180\nfix as Ronnie pointed out.\n\n564\n00:29:41.180 --> 00:29:44.430\nYou just need to make sure your You're\nproviding the right credentials, right?\n\n565\n00:29:44.430 --> 00:29:49.270\nI need to run power shell, as the local\nadmin, so that it knows I have rights\n\n566\n00:29:49.270 --> 00:29:53.210\nto do this, but I also have to\nprovide those domain credentials,\n\n567\n00:29:53.210 --> 00:29:57.150\nbecause I'm repairing a connection\nto that object in active directory,\n\n568\n00:29:57.150 --> 00:30:00.510\nand the local admin doesn't have those\nrights or permissions, so making sure you\n\n569\n00:30:00.510 --> 00:30:03.980\napply the right credentials makes\nthat command work pretty smoothly.\n\n570\n00:30:03.980 --> 00:30:08.030\nSounds like a great amount of information\nand don't forget you may want to\n\n571\n00:30:08.030 --> 00:30:11.230\nwatch this episode again because those\ncommands can be a little bit confusing,\n\n572\n00:30:11.230 --> 00:30:13.475\nwhenever I'm dealing with\nPowerShell I'm always confused so.\n\n573\n00:30:13.475 --> 00:30:15.030\n>> [LAUGH]\n>> Don't worry about that but\n\n574\n00:30:15.030 --> 00:30:17.540\njust watch them again,\nmake sure you understand what's happening.\n\n575\n00:30:17.540 --> 00:30:19.310\nThat's a great place for\nus to go and end this episode,\n\n576\n00:30:19.310 --> 00:30:21.470\ntaking a look at computer accounts.\n\n577\n00:30:21.470 --> 00:30:25.420\nThank you for watching, Mike thank you for\njoining us and helping us as well,\n\n578\n00:30:25.420 --> 00:30:29.590\nsigning off for ITproTV I'm Ronnie Long\nand I'm Mike Rodrick and\n\n579\n00:30:30.730 --> 00:30:34.910\nwe'll see you next time.\n\n",
          "vimeoId": "145197705"
        },
        {
          "description": null,
          "length": "9999",
          "thumbnail": "asdf",
          "thumbnailMed": null,
          "thumbnailSm": null,
          "title": "Renames",
          "transcript": "",
          "vimeoId": "asdf"
        },
        {
          "description": "In this episode, Ronnie and Mike take a deep dive in the Active Directory Groups.  They start by describing the use of groups and why we should use them.  Mike shows the creation of groups and some of choices that affect their use in AD.  Then they talk about the nesting strategies when using Groups in Active Directory",
          "length": "1831",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-3-4-groups-110615-high.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-3-4-groups-110615-high-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-3-4-groups-110615-high-sm.jpg",
          "title": "Groups",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:12.479 --> 00:00:15.320\nWelcome to another exiting\nepisode here on ITProTV.\n\n3\n00:00:15.320 --> 00:00:16.290\nI'm your host Ronnie Wong.\n\n4\n00:00:16.290 --> 00:00:19.520\nAnd today we're taking a look at\nworking with active directory.\n\n5\n00:00:19.520 --> 00:00:21.230\nSpecifically taking a look at groups.\n\n6\n00:00:21.230 --> 00:00:24.880\nAnd groups can be fairly confusing but\nto help us along here is my friend Mr.\n\n7\n00:00:24.880 --> 00:00:26.180\nMike Roderick how's it going Mike.\n\n8\n00:00:26.180 --> 00:00:27.915\n>> Oh it's going great Ronnie.\n\n9\n00:00:27.915 --> 00:00:32.025\nI'm glad to be here and and you're\nabsolutely right, groups can at first be\n\n10\n00:00:32.025 --> 00:00:35.885\na little bit overwhelming a little bit\nconfusing especially if you've haven't\n\n11\n00:00:35.885 --> 00:00:40.095\nreally dealt with them before and you read\nsome of these book and they talk about all\n\n12\n00:00:40.095 --> 00:00:44.465\nthese different types of groups and\nstrategies to work with these groups but\n\n13\n00:00:44.465 --> 00:00:48.895\nwe're gonna make it nice and easy and\nsimple hopefully for you guys out there.\n\n14\n00:00:48.895 --> 00:00:52.050\nSo let's first start about talking\nabout what the heck a group is and\n\n15\n00:00:52.050 --> 00:00:52.840\nwhy I need it.\n\n16\n00:00:52.840 --> 00:00:59.080\nWhen we look at assigning permissions\nto objects throughout our network,\n\n17\n00:00:59.080 --> 00:01:03.710\nI've got files, I've got folders,\nand I know I have NTFS permissions.\n\n18\n00:01:03.710 --> 00:01:08.792\nEvery object that's on an NTFS volume has\nan access control list associated with it,\n\n19\n00:01:08.792 --> 00:01:13.120\nand I I can go to that list and I can\nadd users, right, I can add Ronnie Wong,\n\n20\n00:01:13.120 --> 00:01:16.240\nin fact here I'll,\nI'll even show you right.\n\n21\n00:01:16.240 --> 00:01:22.360\nI can come in here to file explorer and\nheck I'll make a new folder here and\n\n22\n00:01:22.360 --> 00:01:27.470\nI'll call it, I don't know,\nreports, and I can\n\n23\n00:01:27.470 --> 00:01:32.520\npull up the properties of that folder and\nI can go to that access control list,\n\n24\n00:01:32.520 --> 00:01:38.240\ntap security tab, and I can click Edit,\nand Add, and I can find Ronnie's account.\n\n25\n00:01:39.510 --> 00:01:43.310\nAnd I can add it in there, and\nnow I can control what permissions he has.\n\n26\n00:01:43.310 --> 00:01:45.850\nAnd that's pretty straight forward, right?\n\n27\n00:01:45.850 --> 00:01:47.930\nBut, as our enterprise grows.\n\n28\n00:01:47.930 --> 00:01:52.500\nAs our network grows,\nas the number of users we have grows and\n\n29\n00:01:52.500 --> 00:01:56.240\ngrows, it becomes a little bit,\nas Ronnie likes to say,\n\n30\n00:01:56.240 --> 00:02:01.860\nit's that administrative overhead\nstarts getting pretty large, right?\n\n31\n00:02:01.860 --> 00:02:03.293\nWhat if I've got 50 Users.\n\n32\n00:02:03.293 --> 00:02:05.521\nI've got 125 sales people.\n\n33\n00:02:05.521 --> 00:02:08.105\nThey all need access to\nthat reports folder.\n\n34\n00:02:08.105 --> 00:02:13.325\nI'm not gonna add 125 individual users one\nat a time to that access control list and\n\n35\n00:02:13.325 --> 00:02:15.340\nassign the permissions.\n\n36\n00:02:15.340 --> 00:02:18.080\nOne, that's way too much work and\nI'm gonna not do.\n\n37\n00:02:18.080 --> 00:02:20.030\nI'm just gonna say whatever.\n\n38\n00:02:20.030 --> 00:02:23.394\nTwo, I might forget somebody,\nmiss somebody, now they don't have\n\n39\n00:02:23.394 --> 00:02:26.816\npermissions over there,\nI might have signed the wrong permissions,\n\n40\n00:02:26.816 --> 00:02:30.702\nthe access control list all of a sudden is\nhuge and trying to scroll through it and\n\n41\n00:02:30.702 --> 00:02:33.851\nfind an individual user and\nverify permissions becomes crazy.\n\n42\n00:02:33.851 --> 00:02:35.035\nAnd not just one folder, right?\n\n43\n00:02:35.035 --> 00:02:38.336\nYou've got to think I've got hundreds or\nthousands or\n\n44\n00:02:38.336 --> 00:02:42.510\nway more resources on my network\nthat I've gotta control access to.\n\n45\n00:02:42.510 --> 00:02:45.280\nSo, that's where groups come in.\n\n46\n00:02:45.280 --> 00:02:52.307\nGroups are a way to collect up users\nthat have the same access requirements.\n\n47\n00:02:52.307 --> 00:02:55.511\nThey're basically a membership list, and\n\n48\n00:02:55.511 --> 00:02:58.721\nyou add your user\naccounts to these groups.\n\n49\n00:02:58.721 --> 00:03:03.794\nAnd once their in that group,\nI can assign the group permissions.\n\n50\n00:03:03.794 --> 00:03:06.650\nAnd then anybody in that\ngroup gets those permissions.\n\n51\n00:03:06.650 --> 00:03:11.360\nAnd if I need to make changes, I can\ndo it by changing the group membership.\n\n52\n00:03:11.360 --> 00:03:14.837\nIf we If I hire 25 new salespeople,\nI can just dump them in that group and\n\n53\n00:03:14.837 --> 00:03:18.771\nthey automatically get all the permissions\nthat have been assigned to the group.\n\n54\n00:03:18.771 --> 00:03:22.393\nIf somebody from sales quits or\nleaves the sales department and\n\n55\n00:03:22.393 --> 00:03:26.913\nno longer needs those same permissions,\nI simply remove them from the group.\n\n56\n00:03:26.913 --> 00:03:29.922\nRight?\nI didn't have to modify any access control\n\n57\n00:03:29.922 --> 00:03:34.420\nlists anywhere, all I'm doing\nis modifying group membership.\n\n58\n00:03:34.420 --> 00:03:37.720\nGroups help us reduce that\nadministrative overhead.\n\n59\n00:03:37.720 --> 00:03:42.890\nThey make it a lot easier for\nus to control access to these resources.\n\n60\n00:03:42.890 --> 00:03:46.990\nNow, next thing I wanna talk about with\ngroups is the fact that they're not\n\n61\n00:03:46.990 --> 00:03:48.580\ncontainers, right?\n\n62\n00:03:48.580 --> 00:03:49.840\nLike we talked about OU's,\n\n63\n00:03:49.840 --> 00:03:53.020\nin other episode's we talked\nabout organization units.\n\n64\n00:03:53.020 --> 00:03:58.370\nThose are container objects, meaning that\nyour user account could be in an OU.\n\n65\n00:03:58.370 --> 00:04:00.090\nBut it can only be in 1 OU.\n\n66\n00:04:00.090 --> 00:04:00.890\nRight?\n\n67\n00:04:00.890 --> 00:04:04.710\nJust like a file in your desk,\nyou can take a piece of paper,\n\n68\n00:04:04.710 --> 00:04:07.990\nyou can put it in one folder but\nyou can't put it in two folders, right?\n\n69\n00:04:07.990 --> 00:04:10.880\nIt's in one or you can take it out of\nthat one and put it in another one.\n\n70\n00:04:10.880 --> 00:04:12.290\nSame thing with OU's.\n\n71\n00:04:12.290 --> 00:04:13.950\nYour account can only reside in one OU.\n\n72\n00:04:13.950 --> 00:04:18.230\nI could move it from one to another but\nit could only be in one.\n\n73\n00:04:18.230 --> 00:04:22.550\nA group is just a membership list,\ntherefore your user account can be\n\n74\n00:04:22.550 --> 00:04:25.530\nin multiple groups,\nas many as I need to put you in.\n\n75\n00:04:25.530 --> 00:04:29.130\nBecause your user account itself\ndoesn't reside in the group,\n\n76\n00:04:29.130 --> 00:04:32.320\nit's just a list of all the members,\nall right?\n\n77\n00:04:32.320 --> 00:04:34.460\nSo they're not containers.\n\n78\n00:04:34.460 --> 00:04:37.780\nThey're really just membership lists.\n\n79\n00:04:37.780 --> 00:04:41.355\nNow, next thing we need to do I\nguess Ronnie is probably take a look\n\n80\n00:04:41.355 --> 00:04:42.790\nat creating some groups.\n\n81\n00:04:42.790 --> 00:04:44.400\nAnd they're pretty straightforward.\n\n82\n00:04:44.400 --> 00:04:48.290\nI'm gonna open up Active Directory,\nUsers and Computers.\n\n83\n00:04:48.290 --> 00:04:52.380\nAnd I created an OU earlier\nthat can hold my groups and\n\n84\n00:04:52.380 --> 00:04:56.260\nI can go up here and\nclick on my little new group button, or\n\n85\n00:04:56.260 --> 00:05:00.590\nI could right click out here,\nand choose new group.\n\n86\n00:05:00.590 --> 00:05:03.760\nEither way launches my new\nobject group dialogue box.\n\n87\n00:05:03.760 --> 00:05:07.370\nAnd the first thing we're gonna do,\nis we're gonna give it a name.\n\n88\n00:05:07.370 --> 00:05:09.470\nAnd we'll call this one something like,\n\n89\n00:05:09.470 --> 00:05:14.310\nI don't know, let's call it marketing,\nif I can spell.\n\n90\n00:05:14.310 --> 00:05:15.511\n>> Now, Mike, let me go and\n\n91\n00:05:15.511 --> 00:05:19.364\nask my standard question that I asked\nespecially about naming things, right?\n\n92\n00:05:19.364 --> 00:05:25.769\nDoes this require us to keep one uniform\nthey like, no space, is it case sensitive?\n\n93\n00:05:25.769 --> 00:05:28.092\nIs that stuff really\nimportant in terms of groups?\n\n94\n00:05:28.092 --> 00:05:31.480\n>> It depends on how OCD you are [LAUGH].\n\n95\n00:05:31.480 --> 00:05:32.250\n>> All right.\n\n96\n00:05:32.250 --> 00:05:32.890\nSo not really, no.\n\n97\n00:05:32.890 --> 00:05:36.830\n>> The names are not case sensitive so\nyou could use all lower case and\n\n98\n00:05:36.830 --> 00:05:40.595\nif I use an upper case letter here like\nI did If you're referencing this from\n\n99\n00:05:40.595 --> 00:05:44.395\na command line or a script,\nyou don't have to make it uppercase.\n\n100\n00:05:44.395 --> 00:05:46.485\nSo it's not case-sensitive\nin that respect.\n\n101\n00:05:46.485 --> 00:05:49.765\nThe spaces, it'll allow you to\nput spaces in the group names.\n\n102\n00:05:49.765 --> 00:05:51.455\nWindows will let you do that.\n\n103\n00:05:51.455 --> 00:05:54.815\nBut, as we've mentioned in other episodes,\nwhen I go to start scripting things,\n\n104\n00:05:54.815 --> 00:05:58.125\nif there's a space in the name I've\ngotta put quotes around that name so\n\n105\n00:05:58.125 --> 00:05:59.935\nit sees it as one word.\n\n106\n00:05:59.935 --> 00:06:04.440\nWhich is why you'll see me do things\nlike this little underscore over here,\n\n107\n00:06:04.440 --> 00:06:08.190\nthat way when I'm writing my scripts\nI don't have to worry about putting\n\n108\n00:06:08.190 --> 00:06:10.317\nquotes around everything\nbecause I'll typically forget.\n\n109\n00:06:10.317 --> 00:06:11.882\n>> [LAUGH]\n>> Until the script fails and\n\n110\n00:06:11.882 --> 00:06:15.695\nthen I'll go figure out why and oh, I\ndidn't put quotes around that darn thing.\n\n111\n00:06:15.695 --> 00:06:19.961\nAll right, so you give it a name and then\nI've got a couple of options down here,\n\n112\n00:06:19.961 --> 00:06:23.800\nI've got what's known as the group\nscope and I've got the group type.\n\n113\n00:06:23.800 --> 00:06:26.700\nLet's start with group type,\nthat is a pretty easy one to deal with.\n\n114\n00:06:26.700 --> 00:06:31.718\nI have two group types here, I've got\nsecurity and I've got distribution.\n\n115\n00:06:31.718 --> 00:06:36.969\nA security group is a security principle,\nin other words when I create that group\n\n116\n00:06:36.969 --> 00:06:41.860\nif I choose security an SID, a security\nidentifier is gonna be generated.\n\n117\n00:06:41.860 --> 00:06:44.042\nAnd assigned to that group.\n\n118\n00:06:44.042 --> 00:06:47.540\nWhich means, I can now use that\ngroup to assign permissions.\n\n119\n00:06:47.540 --> 00:06:50.580\nI can go to an access control list,\nand I can add that group, and\n\n120\n00:06:50.580 --> 00:06:52.580\nI can decide what\npermissions that group has.\n\n121\n00:06:52.580 --> 00:06:59.270\nSo a security group can be used\nto assign permissions, all right?\n\n122\n00:06:59.270 --> 00:07:02.557\nA distribution group when you\ncreate a distribution group,\n\n123\n00:07:02.557 --> 00:07:03.914\nan SID is not generated.\n\n124\n00:07:03.914 --> 00:07:06.353\nWhich means it's not a security principal,\n\n125\n00:07:06.353 --> 00:07:09.820\nwhich means I cannot use\nit to assign permissions.\n\n126\n00:07:09.820 --> 00:07:12.628\nDistribution groups are used for\nemail applications.\n\n127\n00:07:12.628 --> 00:07:17.480\nIf I wanna create a group that contains\nall the employees here at IT Pro TV, and\n\n128\n00:07:17.480 --> 00:07:20.680\nI could create a distribution group and\nI could put all their accounts in there.\n\n129\n00:07:20.680 --> 00:07:22.992\nRemember I'm not actually putting\nthe accounts in there it's just\n\n130\n00:07:22.992 --> 00:07:23.688\na membership list.\n\n131\n00:07:23.688 --> 00:07:27.507\nAnd then if I wanna send an email to\neverybody at IT Pro TV, I can send it to\n\n132\n00:07:27.507 --> 00:07:32.230\nthat distribution group, and everybody\nin that group will get that email.\n\n133\n00:07:32.230 --> 00:07:35.830\nBut I can't use a distribution group for\nassigning permissions.\n\n134\n00:07:35.830 --> 00:07:37.310\nIt's only for emails.\n\n135\n00:07:37.310 --> 00:07:40.450\nSecurity groups, while I can\nuse them to assign permissions,\n\n136\n00:07:40.450 --> 00:07:44.240\nI can also assign an email\naddress a security group.\n\n137\n00:07:44.240 --> 00:07:45.640\nAnd just like a distribution group,\n\n138\n00:07:45.640 --> 00:07:48.990\nif I send an email to that\nsecurity group's email address.\n\n139\n00:07:48.990 --> 00:07:52.060\nEverybody in that group\nwill receive that email.\n\n140\n00:07:52.060 --> 00:07:54.041\nSo security groups can be used for both.\n\n141\n00:07:54.041 --> 00:07:57.637\nI can assign permissions as\nwell as email distribution.\n\n142\n00:07:57.637 --> 00:08:01.962\nDistribution groups can only be used for\nemail distribution.\n\n143\n00:08:01.962 --> 00:08:03.939\nSo I'll tell you that\nnine times out of ten,\n\n144\n00:08:03.939 --> 00:08:06.370\nyou're gonna be creating security groups.\n\n145\n00:08:06.370 --> 00:08:10.366\nThe only time you really create a\ndistribution group is when you never want\n\n146\n00:08:10.366 --> 00:08:13.859\nanybody to accidentally use that\ngroup to assign permissions.\n\n147\n00:08:13.859 --> 00:08:17.124\nBecause I could have a distribution group,\nlike I said,\n\n148\n00:08:17.124 --> 00:08:19.480\nthat contains everybody at IT Pro TV.\n\n149\n00:08:19.480 --> 00:08:21.740\nWhen I'm assigning permissions,\n\n150\n00:08:21.740 --> 00:08:24.900\nnot everybody at IT Pro TV\ngets the same permissions.\n\n151\n00:08:24.900 --> 00:08:29.230\nAnd I don't want somebody accidentally\nusing that group thinking it only contains\n\n152\n00:08:29.230 --> 00:08:31.430\ncertain people from IT Pro Tv.\n\n153\n00:08:31.430 --> 00:08:36.380\nSo I'll tell you personally I've\nrarely used distribution groups.\n\n154\n00:08:36.380 --> 00:08:38.650\nBecause security groups can do both.\n\n155\n00:08:38.650 --> 00:08:39.897\nSo I like using those.\n\n156\n00:08:39.897 --> 00:08:44.339\nBut I will also tell you that I know many\npeople that love distribution groups and\n\n157\n00:08:44.339 --> 00:08:49.000\nthey make tons of them, because they are\nvery Handy for that email functionality.\n\n158\n00:08:49.000 --> 00:08:50.665\n>> Now, Mike,\nwhen we talk about this idea of groups.\n\n159\n00:08:50.665 --> 00:08:52.530\nAnd put users into groups.\n\n160\n00:08:52.530 --> 00:08:57.440\nYou said it generates a SID right,\nbecause it is now a security principle.\n\n161\n00:08:57.440 --> 00:09:01.540\nSo if I already have a security\nprinciple because I'm actually an object\n\n162\n00:09:01.540 --> 00:09:06.010\ninside of Active Directory and now your\ngroup also has a security principle.\n\n163\n00:09:06.010 --> 00:09:09.370\nWhat does it,\ndoes it merge those two things together?\n\n164\n00:09:09.370 --> 00:09:10.190\nWhat happens here?\n\n165\n00:09:10.190 --> 00:09:13.280\n>> It does, when you log on\nyou get an access token and\n\n166\n00:09:13.280 --> 00:09:15.155\nthat access token lists your SID.\n\n167\n00:09:15.155 --> 00:09:20.155\n>> The SID for your user account, as well\nas the SID for any groups you belong to.\n\n168\n00:09:20.155 --> 00:09:24.295\nAnd you can again belong to several groups\nand what happens is when you double click\n\n169\n00:09:24.295 --> 00:09:28.375\non a resource, it's gonna compare your\naccess, it's gonna look at your access\n\n170\n00:09:28.375 --> 00:09:31.199\ntoken and it's gonna look at\nthat access control list.\n\n171\n00:09:31.199 --> 00:09:36.261\nAnd it's gonna say all right there's\nRonnie's SID, nope it's not in the list.\n\n172\n00:09:36.261 --> 00:09:40.850\nHe belongs to the hosts,\nno it's not on the list.\n\n173\n00:09:40.850 --> 00:09:44.724\nHe belongs to the developers as well,\nthere's that SID,\n\n174\n00:09:44.724 --> 00:09:49.796\noh that's in the list, and there's\nwhat permission Ronnie gets, right?\n\n175\n00:09:49.796 --> 00:09:53.313\nSo it's just looking at\nthe SID's Listed in your access token.\n\n176\n00:09:53.313 --> 00:09:57.653\nComparing that to the SID's listed in that\naccess control list in determining what\n\n177\n00:09:57.653 --> 00:09:58.897\npermissions you have.\n\n178\n00:09:58.897 --> 00:10:01.729\nAnd if you happen along to belong, and\nwe've talked about this in other episodes,\n\n179\n00:10:01.729 --> 00:10:03.350\nif you belong to more than one group.\n\n180\n00:10:03.350 --> 00:10:06.380\nLike maybe,\nyou belong to three different groups, and\n\n181\n00:10:06.380 --> 00:10:08.830\nall three of them are in\nthat access control list.\n\n182\n00:10:08.830 --> 00:10:11.440\nYou get all the permissions,\nyou get to add them all up.\n\n183\n00:10:11.440 --> 00:10:15.970\nIf you get read from being in the host\ngroup and you get write from being\n\n184\n00:10:15.970 --> 00:10:19.420\nin the administrator's group you\nget read and write permission.\n\n185\n00:10:19.420 --> 00:10:21.770\nYou get to add them all up,\nthey're cumulative.\n\n186\n00:10:21.770 --> 00:10:25.660\nWe've talked about that\nin our NTFS episodes.\n\n187\n00:10:25.660 --> 00:10:27.830\nAll right, so now back to my group here.\n\n188\n00:10:27.830 --> 00:10:29.690\nWe talked about security groups.\n\n189\n00:10:29.690 --> 00:10:31.250\nWe talked about distribution groups.\n\n190\n00:10:31.250 --> 00:10:32.890\nSo that's the group type.\n\n191\n00:10:32.890 --> 00:10:35.805\nNotice the default is security.\n\n192\n00:10:35.805 --> 00:10:38.850\nOther thing we have to worry\nabout is the group scope and\n\n193\n00:10:38.850 --> 00:10:42.380\nthis is where it can get\na little bit twisty.\n\n194\n00:10:42.380 --> 00:10:45.610\nThe scope determines a couple of things.\n\n195\n00:10:45.610 --> 00:10:50.496\nWho can be a member of that group and\nwhere I can use that group, all right?\n\n196\n00:10:50.496 --> 00:10:53.074\nAnd when I say, whoa wait,\nwhat the heck does that mean?\n\n197\n00:10:53.074 --> 00:10:56.310\nWhat do you mean,\nwho can be in that group?\n\n198\n00:10:56.310 --> 00:10:59.340\nRemember in our enterprise,\nwe can have our single domain, but\n\n199\n00:10:59.340 --> 00:11:01.710\nwe can also have several domains, right.\n\n200\n00:11:01.710 --> 00:11:05.630\nI might have a forest that has many,\nmany domains in it.\n\n201\n00:11:05.630 --> 00:11:09.400\nAnd when I talk about who can be a member,\nI'm talking\n\n202\n00:11:09.400 --> 00:11:14.060\nabout does the user have to be\nin the same domain as the group.\n\n203\n00:11:14.060 --> 00:11:15.400\nSo I go to domain A and\n\n204\n00:11:15.400 --> 00:11:20.690\nI make a group, can I take a user from\ndomain B and put them in that group?\n\n205\n00:11:20.690 --> 00:11:22.640\nThat's what I mean by,\nwho can be a member.\n\n206\n00:11:22.640 --> 00:11:26.540\nAnd as far as where can I use the group.\n\n207\n00:11:26.540 --> 00:11:30.240\nWhat I mean by that is let's say\nI make that group in domain A.\n\n208\n00:11:30.240 --> 00:11:34.820\nCan I go to domain B,\npull up the properties for an object and\n\n209\n00:11:34.820 --> 00:11:38.240\nuse that group, assign that group\npermissions over that object?\n\n210\n00:11:38.240 --> 00:11:42.670\nThat's what I mean by where can I use\nthe group, and so lets go through them.\n\n211\n00:11:42.670 --> 00:11:45.300\nThe domain local group, we call it DL or\n\n212\n00:11:45.300 --> 00:11:49.970\ndomain local group, these you create\nin Active Directory in your domain, and\n\n213\n00:11:49.970 --> 00:11:52.760\nthey can only be used in\nthe domain you create them in.\n\n214\n00:11:52.760 --> 00:11:57.110\nSo, if I create a domain local group in\ndomain A, I can not go to domain B, open\n\n215\n00:11:57.110 --> 00:12:02.627\nup an access control list and try to use\nthat group to assign permissions, right?\n\n216\n00:12:02.627 --> 00:12:07.200\nDomain local,\nit remains local to that domain.\n\n217\n00:12:07.200 --> 00:12:11.900\nAs far as who can be a member, you can\npull members from just that domain.\n\n218\n00:12:13.020 --> 00:12:19.100\nWith global groups, global groups can\nonly contain members from that domain.\n\n219\n00:12:19.100 --> 00:12:22.890\nAs far as assigning permissions,\nit does, we typically don't use them for\n\n220\n00:12:22.890 --> 00:12:24.980\nthis we're gonna come back\nto that in the second.\n\n221\n00:12:24.980 --> 00:12:28.725\nBut global groups can be\nused in other domains, but\n\n222\n00:12:28.725 --> 00:12:34.175\nthey can only contain members from\nthe domain that they are created in.\n\n223\n00:12:34.175 --> 00:12:37.715\nAnd then you've got universal groups,\nand universal groups,\n\n224\n00:12:37.715 --> 00:12:41.080\nthe name universal kind of\nindicates something for you.\n\n225\n00:12:41.080 --> 00:12:43.205\n>> [LAUGH]\n>> I can use them anywhere,\n\n226\n00:12:43.205 --> 00:12:46.625\nand they can contain members\nfrom anywhere, all right.\n\n227\n00:12:46.625 --> 00:12:52.020\nSo domain local is gonna be local to that\ndomain as far as where I can use it.\n\n228\n00:12:52.020 --> 00:12:54.510\nGlobal groups,\nthe big thing to remember about them,\n\n229\n00:12:54.510 --> 00:12:57.920\ncan only contain members from that\ndomain that they're created in.\n\n230\n00:12:57.920 --> 00:13:01.380\nUniversal groups can contain people for\nuser accounts from any domain.\n\n231\n00:13:01.380 --> 00:13:02.960\nOther groups as well, right?\n\n232\n00:13:02.960 --> 00:13:08.200\nWe can nest groups from any domain,\nand they can be used anywhere.\n\n233\n00:13:08.200 --> 00:13:11.130\nAll right, so that's our group types and\nour group scopes.\n\n234\n00:13:11.130 --> 00:13:15.426\nThe next thing we need to\ntalk about how we use them.\n\n235\n00:13:15.426 --> 00:13:19.279\nBecause you might think well, why do we\nhave so many different types of groups?\n\n236\n00:13:19.279 --> 00:13:22.007\nWhy don't we just make one\ntype of group and use it?\n\n237\n00:13:22.007 --> 00:13:27.540\nAnd I'll tell you, I'm not,\nI mean, that's a good idea, right.\n\n238\n00:13:27.540 --> 00:13:31.370\n>> Now the reason is security, right,\nI might need to make groups and\n\n239\n00:13:31.370 --> 00:13:34.870\nI don't want anybody putting users\nfrom other domains in that group.\n\n240\n00:13:34.870 --> 00:13:38.099\nI have used that group to assign\naccess to a resource in my domain and\n\n241\n00:13:38.099 --> 00:13:40.868\nI don't want some enterprise\nadmin coming up behind me,\n\n242\n00:13:40.868 --> 00:13:43.833\ntaking users from another domain and\nput them in that group.\n\n243\n00:13:43.833 --> 00:13:46.979\nWell if I use a global group they can't,\nall right?\n\n244\n00:13:46.979 --> 00:13:50.090\nThe domain local group can only\nbe used to assign permissions.\n\n245\n00:13:50.090 --> 00:13:53.801\nIn that domain, I don't have to worry\nabout anybody taking that group to another\n\n246\n00:13:53.801 --> 00:13:55.777\ndomain and trying to assign permissions.\n\n247\n00:13:55.777 --> 00:13:59.627\nSo there's no way they're gonna try to get\naccess to resources in that other domain,\n\n248\n00:13:59.627 --> 00:14:02.800\nusing that domain local group,\nit's not gonna happen, all right?\n\n249\n00:14:02.800 --> 00:14:05.537\nSo that's really why we have these,\nis security.\n\n250\n00:14:05.537 --> 00:14:07.511\nSo now we need to come up with a strategy.\n\n251\n00:14:07.511 --> 00:14:11.944\nWhen do I use what type of group and\nMicrosoft, of course,\n\n252\n00:14:11.944 --> 00:14:13.670\nhas a strategy for us.\n\n253\n00:14:13.670 --> 00:14:16.986\nAnd we're gonna call it, let me go\nahead and click okay on this group,\n\n254\n00:14:16.986 --> 00:14:18.911\nI was just making that marketing group.\n\n255\n00:14:18.911 --> 00:14:22.369\nWe're gonna call it AGDLP.\n\n256\n00:14:22.369 --> 00:14:29.010\nAnd what that stands for is accounts, A,\nare gonna be put into global groups, G.\n\n257\n00:14:29.010 --> 00:14:34.055\nGlobal groups, then, are gonna be put\ninside domain local groups, DL, and\n\n258\n00:14:34.055 --> 00:14:39.505\nthen the domain local groups are gonna be\ngiven permissions over the resource, P.\n\n259\n00:14:39.505 --> 00:14:46.505\nA into G, G into DL, DL is given\nthe permissions, that's your AGDLP.\n\n260\n00:14:46.505 --> 00:14:49.651\nAnd that's our strategy\nthat we're gonna use to,\n\n261\n00:14:49.651 --> 00:14:54.113\nwell you see I'll show you here in\na second how by using that strategy, it\n\n262\n00:14:54.113 --> 00:14:59.850\ngives us tremendous amounts of flexibility\nand that's really what it comes down to.\n\n263\n00:14:59.850 --> 00:15:02.850\n>> Now Mike I know that that's\nthe way that you and I learned it.\n\n264\n00:15:02.850 --> 00:15:07.290\nBut the very fact is we know that\nMicrosoft started using new terminology,\n\n265\n00:15:07.290 --> 00:15:09.270\nand Mike you might be misleading people.\n\n266\n00:15:09.270 --> 00:15:10.940\n>> I refuse.\nI refuse to move on.\n\n267\n00:15:10.940 --> 00:15:13.170\n>> You know what the new terminology is.\n\n268\n00:15:13.170 --> 00:15:16.310\nSo Mike, help us out,\nwhat is the difference?\n\n269\n00:15:16.310 --> 00:15:19.870\nI know that the new one, they take the A,\nwhich is the accounts, right?\n\n270\n00:15:19.870 --> 00:15:22.950\nAnd they now said now we're\ngonna make an I for identity.\n\n271\n00:15:22.950 --> 00:15:26.290\nOkay, so help us out here and\nthen understand this new structure.\n\n272\n00:15:26.290 --> 00:15:29.677\n>> The new one is,\nthe new acronym that we're gonna use for\n\n273\n00:15:29.677 --> 00:15:32.646\nour group strategy is IGDLA,\ninstead of AGDLP.\n\n274\n00:15:32.646 --> 00:15:37.164\nAnd you're exactly right, what used\nto be accounts is now identities, and\n\n275\n00:15:37.164 --> 00:15:40.423\nthat's because it's a little more general,\nright?\n\n276\n00:15:40.423 --> 00:15:44.030\nWe can do things other than accounts\ncould be put in those global groups.\n\n277\n00:15:44.030 --> 00:15:48.641\nSo that's really why they do that,\nespecially when we start tying in cloud\n\n278\n00:15:48.641 --> 00:15:53.046\nand things like that so, they wanted\nto make it a little more accurate.\n\n279\n00:15:53.046 --> 00:15:58.520\nSo they went to identities\ninstead of accounts.\n\n280\n00:15:58.520 --> 00:16:03.420\nAnd then the last one, the permissions,\nthe p, has been changed to access,\n\n281\n00:16:03.420 --> 00:16:08.010\ncuz that's really what you're\ndoing is giving or denying access.\n\n282\n00:16:08.010 --> 00:16:09.910\nI like the term, again I'm old school.\n\n283\n00:16:09.910 --> 00:16:11.865\nAGDLP is just the way I know it.\n\n284\n00:16:11.865 --> 00:16:15.898\nIGDLA is the exact same thing,\njust different words.\n\n285\n00:16:15.898 --> 00:16:19.328\nSo don't worry about getting confused and\ngoing which one should I use?\n\n286\n00:16:19.328 --> 00:16:22.887\nThey're the exact same thing, it's just in\none of them we are calling them accounts,\n\n287\n00:16:22.887 --> 00:16:24.935\nand the other one we\nare calling them identities,\n\n288\n00:16:24.935 --> 00:16:26.819\nin one of them we're\ncalling it permission.\n\n289\n00:16:26.819 --> 00:16:29.155\nAnd the other one,\nwe're calling it access.\n\n290\n00:16:29.155 --> 00:16:35.131\nAll right, so IGDLA, AGDLP,\nwhichever one you wanna use is fine.\n\n291\n00:16:35.131 --> 00:16:39.735\nAlthough probably if you're taking in\ntime for an exam, IGDLA is probably.\n\n292\n00:16:39.735 --> 00:16:41.781\n>> [LAUGH]\n>> The one you're going to see.\n\n293\n00:16:41.781 --> 00:16:44.584\n>> You know, but Mike,\nyou pretty much emphasize, and\n\n294\n00:16:44.584 --> 00:16:46.591\nthe reason why was the cloud, right?\n\n295\n00:16:46.591 --> 00:16:47.840\nIt is probably what we're going to.\n\n296\n00:16:47.840 --> 00:16:50.610\nAnd because we're not really\ntalking about accounts anymore.\n\n297\n00:16:50.610 --> 00:16:51.990\nAnd the way that the cloud\nends up working,\n\n298\n00:16:51.990 --> 00:16:54.940\nwe're really talking about identities\nregardless of where they are.\n\n299\n00:16:54.940 --> 00:16:57.410\nIt's not just about your\nlocal domain account.\n\n300\n00:16:57.410 --> 00:17:01.420\nIt's all about who the identity is,\nso it makes sense why the change and\n\n301\n00:17:01.420 --> 00:17:03.350\nwhy the emphasis on the change.\n\n302\n00:17:03.350 --> 00:17:08.660\nEven though you and I would still fight\ntooth and nail for old terminology.\n\n303\n00:17:08.660 --> 00:17:12.140\n>> Well you see me, [CROSSTALK] our\nshow notes here, I still put AGDLP and\n\n304\n00:17:12.140 --> 00:17:14.300\nRonnie's like wait, is that still used?\n\n305\n00:17:14.300 --> 00:17:15.660\nI'm like, well, in my world it is.\n\n306\n00:17:15.660 --> 00:17:17.500\n>> That's right.\n>> [LAUGH]\n\n307\n00:17:17.500 --> 00:17:18.126\n>> All right,\n\n308\n00:17:18.126 --> 00:17:22.257\nso now let's talk about that strategy\nitself and how that ends up working, and\n\n309\n00:17:22.257 --> 00:17:24.772\nwhy we should even bother doing it,\nall right?\n\n310\n00:17:24.772 --> 00:17:26.472\nFirst, let's look at global groups.\n\n311\n00:17:26.472 --> 00:17:31.750\nGlobal groups accounts, or sorry,\nidentities go into global groups, right?\n\n312\n00:17:31.750 --> 00:17:34.770\nWe use global groups to\ngather up users that have\n\n313\n00:17:34.770 --> 00:17:36.950\nthe same access requirements, right?\n\n314\n00:17:36.950 --> 00:17:39.051\nThat's really what you want\nto use global groups for.\n\n315\n00:17:39.051 --> 00:17:43.501\nTypically we name global\ngroups based on the role.\n\n316\n00:17:43.501 --> 00:17:48.161\nSo I'll have global groups like hosts,\ndevelopers,\n\n317\n00:17:48.161 --> 00:17:53.650\nmarketers, producers, and\nexecutives, you know whatever.\n\n318\n00:17:53.650 --> 00:17:56.820\nI'm gonna create because I\nhave more than one host.\n\n319\n00:17:56.820 --> 00:18:00.320\nAnd so I wanna be able to\ntreat all the hosts as a unit.\n\n320\n00:18:00.320 --> 00:18:05.260\nSo the global groups are used to\ngather up users that have the same job\n\n321\n00:18:05.260 --> 00:18:09.360\nfunction really, or you can think about\nit as the same access requirements.\n\n322\n00:18:09.360 --> 00:18:13.610\nSo now instead of having 150 salespeople,\nI have one group called sales users, and\n\n323\n00:18:13.610 --> 00:18:14.890\nthat's all I've got, right?\n\n324\n00:18:14.890 --> 00:18:16.580\nSo that makes it a lot easier.\n\n325\n00:18:16.580 --> 00:18:18.200\nSo that's where we start.\n\n326\n00:18:18.200 --> 00:18:19.840\nAccounts go into global groups.\n\n327\n00:18:19.840 --> 00:18:23.930\nGlobal groups are primarily used\nto gather up identities that\n\n328\n00:18:23.930 --> 00:18:28.370\nhave the same job role or\nthe same access requirements, right?\n\n329\n00:18:28.370 --> 00:18:33.691\nDomain local groups are used to\nassign the access level, right?\n\n330\n00:18:33.691 --> 00:18:38.332\nSo we typically name them\nover the resource and\n\n331\n00:18:38.332 --> 00:18:42.266\nthe access that it grants, all right.\n\n332\n00:18:42.266 --> 00:18:44.024\nSo if I have a folder called scripts,\n\n333\n00:18:44.024 --> 00:18:46.881\nI know some people are going to\nneed full control over that.\n\n334\n00:18:46.881 --> 00:18:52.855\nSo I'll create a group called scripts\nunderscore fc for full control.\n\n335\n00:18:52.855 --> 00:18:56.815\nI know other people are gonna need read\nand execute but not write or modify, so\n\n336\n00:18:56.815 --> 00:19:01.880\nI'll create another group\ncalled scripts underscore read.\n\n337\n00:19:01.880 --> 00:19:05.635\nOr re or re rx, you know for read and\nexecute or something like that.\n\n338\n00:19:05.635 --> 00:19:10.970\nAnd then I'll go to the access control\nlist and I'll take that domain local\n\n339\n00:19:10.970 --> 00:19:15.910\ngroup scripts underscore full control and\nI'll assign it full control.\n\n340\n00:19:15.910 --> 00:19:20.320\nAnd I'll take that other group scripts\nunderscore rx, and I'll assign it read and\n\n341\n00:19:20.320 --> 00:19:22.342\nexecute on that access control list.\n\n342\n00:19:22.342 --> 00:19:25.832\nNow, all I have to do is\ntake the global group and\n\n343\n00:19:25.832 --> 00:19:29.072\nput it into the domain local group, right?\n\n344\n00:19:29.072 --> 00:19:33.335\nAnd I can decide what permissions they're\ngonna get by choosing what domain local\n\n345\n00:19:33.335 --> 00:19:34.475\ngroup I put them in.\n\n346\n00:19:34.475 --> 00:19:38.865\nIf I take that global group that\ncontains all of my salespeople and\n\n347\n00:19:38.865 --> 00:19:41.115\nI put it in scripts\nunderscore full control,\n\n348\n00:19:41.115 --> 00:19:45.025\nwell, now everybody in that\nsales group gets full control.\n\n349\n00:19:45.025 --> 00:19:47.465\nIf I take them and\nput them in that rx group,\n\n350\n00:19:47.465 --> 00:19:51.615\nthat scripts underscore rx, then they're\nonly gonna have read and execute.\n\n351\n00:19:51.615 --> 00:19:54.880\nAnd you might think, well, Mike,\ngeez, that's a lot of extra work.\n\n352\n00:19:54.880 --> 00:19:58.580\nWhy don't you just take the sales group\nthat you've got all 150 salespeople in,\n\n353\n00:19:58.580 --> 00:20:01.950\nadd it to the access control list,\nand give them read or\n\n354\n00:20:01.950 --> 00:20:03.760\nfull control or whatever.\n\n355\n00:20:03.760 --> 00:20:06.610\nBecause they're not the only people\nthat need that access, right?\n\n356\n00:20:06.610 --> 00:20:09.370\nThere's other groups of people\nthat also need access to that.\n\n357\n00:20:09.370 --> 00:20:12.550\nAnd again, we start adding multiple\nobjects to that access control list,\n\n358\n00:20:12.550 --> 00:20:15.230\nthere can be dozens of groups\nthat I need to give read and\n\n359\n00:20:15.230 --> 00:20:17.540\nexecute permission over that resource.\n\n360\n00:20:17.540 --> 00:20:21.160\nI don't wanna add dozens of groups\nto that access control list.\n\n361\n00:20:21.160 --> 00:20:22.660\nIt makes it harder to work with.\n\n362\n00:20:22.660 --> 00:20:26.900\nSo if I have one group in the list that\nhas read and execute, now all I have to do\n\n363\n00:20:26.900 --> 00:20:30.814\nis modify that group membership to\ndetermine who actually has read and\n\n364\n00:20:30.814 --> 00:20:31.902\nexecute, right?\n\n365\n00:20:31.902 --> 00:20:35.970\nBecause today only sales needs read and\nexecute.\n\n366\n00:20:35.970 --> 00:20:38.255\nBut next week, my boss comes to me and\nsays, hey, you know what,\n\n367\n00:20:38.255 --> 00:20:41.125\nI want the producers to be able\nto run those scripts as well.\n\n368\n00:20:41.125 --> 00:20:42.775\nAll I have to do is add\nthe producers group.\n\n369\n00:20:42.775 --> 00:20:45.406\nI've already got a global group\nwith all my producers in it.\n\n370\n00:20:45.406 --> 00:20:49.015\nI've already got a domain local group\nthat has read and execute permission.\n\n371\n00:20:49.015 --> 00:20:53.065\nSo when the boss tells me this, all I\nhave to do is take that global group,\n\n372\n00:20:53.065 --> 00:20:56.355\nput it in the domain local group,\nand I'm done, right.\n\n373\n00:20:56.355 --> 00:20:57.360\nIt's that easy.\n\n374\n00:20:57.360 --> 00:20:58.941\nIt gives me that flexibility.\n\n375\n00:20:58.941 --> 00:21:01.978\nIf he comes to me next week and says,\nI don't want sales to be able to run those\n\n376\n00:21:01.978 --> 00:21:04.122\nscripts any more,\nthey keep goofing everything up.\n\n377\n00:21:04.122 --> 00:21:07.528\nAll I have to do is take the sales\nglobal group out of that read and\n\n378\n00:21:07.528 --> 00:21:10.891\nexecute domain local group,\nand again, I'm done, right.\n\n379\n00:21:10.891 --> 00:21:12.322\nSo it's that easy and\n\n380\n00:21:12.322 --> 00:21:16.942\nthat's the power of that following\nthese strategies will give you.\n\n381\n00:21:16.942 --> 00:21:19.745\n>> Now Mike,\nwhen we start talking about this idea,\n\n382\n00:21:19.745 --> 00:21:23.617\nthen we can take multiple groups,\nwhether they're global groups or\n\n383\n00:21:23.617 --> 00:21:27.465\nmaybe even also universal groups,\nand put them into domain local.\n\n384\n00:21:27.465 --> 00:21:28.580\n>> Mm-hm.\n>> All right, excellent.\n\n385\n00:21:28.580 --> 00:21:31.862\n>> Absolutely.\nNow notice that our strategy did not\n\n386\n00:21:31.862 --> 00:21:34.101\ninclude universal groups.\n\n387\n00:21:34.101 --> 00:21:36.581\nThere actually is a strategy\nthat does include that.\n\n388\n00:21:36.581 --> 00:21:40.281\nThat's the AGUDLP.\n\n389\n00:21:40.281 --> 00:21:45.851\n>> [LAUGH]\n>> Or the new one, IGUDLA.\n\n390\n00:21:45.851 --> 00:21:48.588\nBasically we're just taking\nuniversal groups and\n\n391\n00:21:48.588 --> 00:21:53.010\nwe're slipping them in between the global\ngroups and the domain local groups.\n\n392\n00:21:53.010 --> 00:21:56.570\nWhen you wanna do this is when\nyou have multiple domains.\n\n393\n00:21:56.570 --> 00:21:58.300\nBecause remember what I said,\n\n394\n00:21:58.300 --> 00:22:02.250\nglobal groups can only contain\nusers from the same domain.\n\n395\n00:22:02.250 --> 00:22:08.690\nI've got sales users in domain A,\nI also have salespeople in domain B.\n\n396\n00:22:08.690 --> 00:22:13.710\nI've got that global group in domain\nA called sales with all the sales users in\n\n397\n00:22:13.710 --> 00:22:18.890\nit, but I can't take those sales users\nfrom domain B and put them in that group.\n\n398\n00:22:18.890 --> 00:22:21.738\nSo in domain B,\nI've got a global group called sales, and\n\n399\n00:22:21.738 --> 00:22:24.311\nthat contains all the sales\nusers from that domain.\n\n400\n00:22:24.311 --> 00:22:28.230\nBut now I need to give them all\naccess to that scripts folder.\n\n401\n00:22:28.230 --> 00:22:32.540\nWell, I use universal groups to\ngather up my global groups, right.\n\n402\n00:22:32.540 --> 00:22:35.940\nI can take the global groups from\nsales from the two different domains,\n\n403\n00:22:35.940 --> 00:22:37.720\nput them in the universal group.\n\n404\n00:22:37.720 --> 00:22:42.370\nNow that universal group might be\ncalled something like all sales, right?\n\n405\n00:22:42.370 --> 00:22:44.331\nAnd now I can take the all sales and\n\n406\n00:22:44.331 --> 00:22:48.481\ndump it into that domain local group\nthat gives them read and execute.\n\n407\n00:22:48.481 --> 00:22:51.232\nAnd again, you might be thinking,\nwell heck, Mike, that's a lot of work.\n\n408\n00:22:51.232 --> 00:22:52.512\nWhy are you doing all that?\n\n409\n00:22:52.512 --> 00:22:56.704\nBecause next week, next month, we might\nhave two more domains that also have\n\n410\n00:22:56.704 --> 00:23:00.959\nsalespeople in them, that have global\ngroups that are called sales, and all I\n\n411\n00:23:00.959 --> 00:23:05.748\nhave to do is add those two new groups\nto that universal group, and I'm done.\n\n412\n00:23:05.748 --> 00:23:09.680\nRight, and you've gotta think about that\nuniversal group is probably put into\n\n413\n00:23:09.680 --> 00:23:10.990\nseveral domain local groups.\n\n414\n00:23:10.990 --> 00:23:14.872\nThat's not the only resource that they\nneed read permission over, right.\n\n415\n00:23:14.872 --> 00:23:20.206\nSo again, I can change things up by simply\nchanging a single group membership.\n\n416\n00:23:20.206 --> 00:23:21.471\nAs we grow and expand,\n\n417\n00:23:21.471 --> 00:23:25.211\nit doesn't become any more difficult\nto manage the permissions.\n\n418\n00:23:25.211 --> 00:23:29.409\nIf I do this, if I follow this from the\noutset, from the very beginning Beginning\n\n419\n00:23:29.409 --> 00:23:33.485\neven though it might seem like extra\nsteps, I've got two sales people I'm not\n\n420\n00:23:33.485 --> 00:23:37.103\nmaking three different groups to\ngive them access to this resource.\n\n421\n00:23:37.103 --> 00:23:40.363\nYou'll wish you had when you\nhave 2,000 sales, people right?\n\n422\n00:23:40.363 --> 00:23:45.703\nSo if you start this way at the beginning\nit makes your life a whole lot easier.\n\n423\n00:23:45.703 --> 00:23:47.530\nI could show you a little drawing,\n\n424\n00:23:47.530 --> 00:23:51.503\nsometimes talking about this gets\na little bit, it's hard to visualize.\n\n425\n00:23:51.503 --> 00:23:54.785\nSo let's take a look and just make\nsure we're all on the same page here.\n\n426\n00:23:54.785 --> 00:23:59.842\nIf we're gonna to follow that strategy,\nwe're gonna to take all of our developers,\n\n427\n00:23:59.842 --> 00:24:05.385\nright, and we're gonna to add them to\nthat global group called Developers.\n\n428\n00:24:05.385 --> 00:24:10.293\nThen we're going to create a group\ncalled Scripts_FullControl and\n\n429\n00:24:10.293 --> 00:24:13.514\nwe're gonna to assign that access, right.\n\n430\n00:24:13.514 --> 00:24:17.934\nWe'll go down here, and we'll give them\nthat full control over that resource,\n\n431\n00:24:17.934 --> 00:24:21.295\nthat's the permissions we're gonna assign.\n\n432\n00:24:21.295 --> 00:24:26.125\nThen we're gonna take that Developers\nglobal group and we're gonna\n\n433\n00:24:26.125 --> 00:24:31.385\nadd it to this Scripts_FullControl\ndomain local group, right.\n\n434\n00:24:31.385 --> 00:24:34.025\nAnd now the developers have full control.\n\n435\n00:24:34.025 --> 00:24:36.035\nAnd then if my boss comes to me and says,\n\n436\n00:24:36.035 --> 00:24:39.405\nyou know what, the hosts need to be\nable to run those scripts as well,\n\n437\n00:24:39.405 --> 00:24:42.915\nI've already got a global group\nthat contains all my hosts.\n\n438\n00:24:42.915 --> 00:24:46.445\nAll I have to do is add them\nto that group and I'm done.\n\n439\n00:24:46.445 --> 00:24:48.905\nIf they tell me,\nhey the hosts are goofing things up,\n\n440\n00:24:48.905 --> 00:24:51.805\nthey shouldn't run those scripts,\nI can take them out of that global group.\n\n441\n00:24:51.805 --> 00:24:54.475\nI'm sorry,\nout of that domain local group, and\n\n442\n00:24:54.475 --> 00:24:56.805\nthey no longer have the permissions,\nright?\n\n443\n00:24:56.805 --> 00:24:57.855\nSo that's the big advantage.\n\n444\n00:24:57.855 --> 00:24:58.365\nAnd again,\n\n445\n00:24:58.365 --> 00:25:03.095\nuniversal groups are really only\nnecessary if you've got multiple domains.\n\n446\n00:25:03.095 --> 00:25:05.230\nThat's what you want to keep in mind.\n\n447\n00:25:05.230 --> 00:25:08.167\nIf you're doing a single\ndomain in a forest and\n\n448\n00:25:08.167 --> 00:25:13.078\nthere's no plans of ever going to\na multiple domain, that IGDLA is perfect.\n\n449\n00:25:13.078 --> 00:25:16.360\nIf there's a chance you're gonna\ngo to multiple domains, or\n\n450\n00:25:16.360 --> 00:25:20.208\nif you already have multiple domains,\nthen you need to use the universal\n\n451\n00:25:20.208 --> 00:25:24.018\ngroups cuz that allows me to grab\nglobal groups from multiple domains.\n\n452\n00:25:24.018 --> 00:25:29.758\nWe're gonna be following\nIGUDLA in that case.\n\n453\n00:25:29.758 --> 00:25:33.157\n>> All right, Mike, that sounds like\na lot of information for us to try and\n\n454\n00:25:33.157 --> 00:25:33.958\nhave to digest.\n\n455\n00:25:33.958 --> 00:25:38.378\nAnd if you are like me at times you're\nlike, oh my gosh, how could it be so\n\n456\n00:25:38.378 --> 00:25:39.038\ncomplex?\n\n457\n00:25:39.038 --> 00:25:42.278\nIt can be that complex, especially\nas the organization gets larger, and\n\n458\n00:25:42.278 --> 00:25:44.638\nthat's why it's actually\nimportant to use groups.\n\n459\n00:25:44.638 --> 00:25:48.230\nWhen we try and do this with individual\nusers, it can become overwhelming if you\n\n460\n00:25:48.230 --> 00:25:51.838\nhave to manage all the permissions and\neverything else that you have to manage.\n\n461\n00:25:51.838 --> 00:25:55.098\nSo groups are really helpful and\nwe have a little bit more, Mike,\n\n462\n00:25:55.098 --> 00:25:56.418\nwhat else do we have here?\n\n463\n00:25:56.418 --> 00:25:57.071\n>> You know, I just\n\n464\n00:25:57.071 --> 00:25:58.618\nrealized I showed you the drawing but-\n\n465\n00:25:58.618 --> 00:25:59.542\n>> [LAUGH]\n>> I never actually showed you how to do\n\n466\n00:25:59.542 --> 00:26:01.514\nit.\n>> Oh that's true.\n\n467\n00:26:01.514 --> 00:26:04.154\n>> [LAUGH] Right, we've got\ncomputers here, let's do it Mike.\n\n468\n00:26:04.154 --> 00:26:07.387\nSo yeah, let's take a look at, I've got\nActive Directory opened up here and\n\n469\n00:26:07.387 --> 00:26:08.850\nI've got a few different groups.\n\n470\n00:26:08.850 --> 00:26:14.245\nAnd you can see that I've got some\nglobal groups called Developers,\n\n471\n00:26:14.245 --> 00:26:16.954\nHosts, Marketing, Producers.\n\n472\n00:26:16.954 --> 00:26:20.194\nThen I've got some domain local groups.\n\n473\n00:26:20.194 --> 00:26:24.075\nOne of them's called Scripts Full Control,\none of them's called Script Read.\n\n474\n00:26:24.075 --> 00:26:28.625\nAnd then I've got a resource\nover here called Scripts.\n\n475\n00:26:28.625 --> 00:26:31.385\nSo what I'm gonna do is\nI'm gonna right-click,\n\n476\n00:26:31.385 --> 00:26:33.595\nif I can successfully do that.\n\n477\n00:26:33.595 --> 00:26:38.763\nPull up Properties of this folder, go to\nSecurity tab, and I'm gonna click Edit.\n\n478\n00:26:38.763 --> 00:26:42.875\nAnd I'm gonna click Add, and\nI'm gonna find that Scripts group.\n\n479\n00:26:44.425 --> 00:26:48.055\nAnd I'll do the Full Control one\nfirst here, and I'll click OK and\n\n480\n00:26:48.055 --> 00:26:51.025\nI'll give them full control.\n\n481\n00:26:51.025 --> 00:26:57.381\nAnd then I'm gonna add again, and again\nlook for scripts and choose Scripts Read.\n\n482\n00:26:57.381 --> 00:27:01.981\nAnd I'll go ahead and leave them\nwith just good old read and execute.\n\n483\n00:27:01.981 --> 00:27:04.941\nAnd I'll click OK, and I'll click OK.\n\n484\n00:27:04.941 --> 00:27:08.921\nSo as far as the access or the permissions\ngo, I'm good to go on that folder.\n\n485\n00:27:08.921 --> 00:27:11.605\nSo now when the boss comes to me and\nsays hey, you know what,\n\n486\n00:27:11.605 --> 00:27:15.311\nI want the developers to have full control\nover that Scripts folder cuz they need to\n\n487\n00:27:15.311 --> 00:27:17.801\ncreate the scripts, test them,\nrun them, all that.\n\n488\n00:27:17.801 --> 00:27:23.079\nAll I have to do is take the Developers\ngroup and add it to that domain,\n\n489\n00:27:23.079 --> 00:27:26.901\noops, I'm spelling out\nwhat I'm saying there.\n\n490\n00:27:26.901 --> 00:27:30.646\nAdd it to that domain local group,\nscripts, if I can spell,\n\n491\n00:27:30.646 --> 00:27:32.121\nscripts full control.\n\n492\n00:27:35.001 --> 00:27:36.621\nAnd that's it, right?\n\n493\n00:27:36.621 --> 00:27:41.037\nSo now, if we take a look at\nthe members of developers,\n\n494\n00:27:41.037 --> 00:27:44.781\nI've already added\nsomebody I believe here.\n\n495\n00:27:44.781 --> 00:27:47.621\nGo to Members, and I've got Rob in there.\n\n496\n00:27:47.621 --> 00:27:50.879\nSo Rob was added to the global\ngroup called Developers,\n\n497\n00:27:50.879 --> 00:27:52.761\ngathered up all my developers.\n\n498\n00:27:52.761 --> 00:27:58.281\nThe Developers group is a member\nof Scripts Full Control.\n\n499\n00:27:58.281 --> 00:28:03.219\nScripts Full Control has been assigned\nfull control permission over that folder,\n\n500\n00:28:03.219 --> 00:28:03.721\nright.\n\n501\n00:28:03.721 --> 00:28:09.495\nIf I want the hosts to be able\nto execute but not change those,\n\n502\n00:28:09.495 --> 00:28:14.941\nwell then I'll add that Host\ngroup to that Scripts Read.\n\n503\n00:28:14.941 --> 00:28:16.718\nAnd I'll Click OK and OK, and\n\n504\n00:28:16.718 --> 00:28:20.281\nI'll make sure that the Host\ngroup has some members there.\n\n505\n00:28:20.281 --> 00:28:22.001\nRonnie's the member of the Host group.\n\n506\n00:28:22.001 --> 00:28:26.882\nThe Host group is now a member of the\nScripts Read and Scripts Read has read and\n\n507\n00:28:26.882 --> 00:28:29.181\nexecute over that Scripts folder.\n\n508\n00:28:29.181 --> 00:28:32.561\nSo now Ronnie has read and\nexecute over that folder.\n\n509\n00:28:32.561 --> 00:28:37.111\nAnd as I said, the flexibility is the fact\nthat, if the boss comes to me tomorrow and\n\n510\n00:28:37.111 --> 00:28:41.725\nsays, hey you know what, I want the hosts\nto have full control over that.\n\n511\n00:28:41.725 --> 00:28:46.675\nEasy, I just go into the properties of\nthe Host group and I'll take them out of\n\n512\n00:28:46.675 --> 00:28:53.595\nthe Scripts Read and I'll add them\nto the Scripts Full Control group.\n\n513\n00:28:53.595 --> 00:28:56.735\nAnd it's that simple, I'm done, right.\n\n514\n00:28:56.735 --> 00:29:00.043\nI didn't have to modify 20 different\nuser accounts or anything like that.\n\n515\n00:29:00.043 --> 00:29:05.223\nSo by following that strategy, it makes\nmanaging permissions a whole lot easier.\n\n516\n00:29:05.223 --> 00:29:05.772\n>> All right [LAUGH].\n>> And\n\n517\n00:29:05.772 --> 00:29:09.211\ntracking them as well, keeping track\nin the future of who has what.\n\n518\n00:29:09.211 --> 00:29:12.693\n>> Right, so Mike,\nas far as groups go that's\n\n519\n00:29:12.693 --> 00:29:17.411\na incredible rundown of how\ncomplicated it can really get.\n\n520\n00:29:17.411 --> 00:29:21.885\nBut you can see why it's so effective as\nyour organization continues to grow and\n\n521\n00:29:21.885 --> 00:29:23.672\nwhy we really want to use them.\n\n522\n00:29:23.672 --> 00:29:27.103\nIf not, every single group we create,\nevery single user, we'd have to go in and\n\n523\n00:29:27.103 --> 00:29:29.845\nadd them in under permissions on\nevery resource that we want to.\n\n524\n00:29:29.845 --> 00:29:33.334\nBy doing it this way, it actually\nmakes the management a lot easier.\n\n525\n00:29:33.334 --> 00:29:37.314\nAnd that's what we really want in Active\nDirectory, that centralized location where\n\n526\n00:29:37.314 --> 00:29:39.998\nwe can perform the administrative\nduties that we need to.\n\n527\n00:29:39.998 --> 00:29:43.578\nSo, Mike, last words on group,\nreally, last words on group.\n\n528\n00:29:43.578 --> 00:29:46.958\n>> [LAUGH] I think I've talked enough,\nI will hush now.\n\n529\n00:29:46.958 --> 00:29:49.263\n[LAUGH]\n>> [LAUGH] All right, well,\n\n530\n00:29:49.263 --> 00:29:50.094\nthank you again, Mike.\n\n531\n00:29:50.094 --> 00:29:54.279\nThat's a great explanation that really\nhelps us to understand the use of groups\n\n532\n00:29:54.279 --> 00:29:56.690\nin Active Directory a lot better.\n\n533\n00:29:56.690 --> 00:30:00.755\nAnd also, the way that you demonstrated it\nreally hopefully helps cement that in our\n\n534\n00:30:00.755 --> 00:30:03.665\nheads so we can actually use\nthat much more effectively.\n\n535\n00:30:03.665 --> 00:30:07.175\nMake sure you watch this episode again a\nfew times, get those concepts in your head\n\n536\n00:30:07.175 --> 00:30:10.485\ncuz it is gonna be very important as\nyou start managing Active Directory.\n\n537\n00:30:10.485 --> 00:30:12.662\nHaving an underlying\nway to manage them and\n\n538\n00:30:12.662 --> 00:30:15.568\nhaving the proper best practice\nis really gonna to help.\n\n539\n00:30:15.568 --> 00:30:17.748\nWell that's a great place for\nus to end this episode.\n\n540\n00:30:17.748 --> 00:30:21.228\nSigning off for TProTV, I'm Ronnie Wong\n>> And I'm Mike Rodrick.\n\n541\n00:30:21.228 --> 00:30:23.608\n>> And we'll see you next time.\n\n542\n00:30:23.608 --> 00:30:31.080\n[SOUND]\n\n",
          "vimeoId": "145197716"
        },
        {
          "description": "In this episode, Ronnie and Mike talk about the different flexible Single multi-master operations roles exist within an Active Directory Forest and Domains.  The describe what each role does and why It's important to AD operations. The guys even take a look at how to transfer between Domain Controllers and seize roles when necessary.",
          "length": "2045",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-5-2-operations_masters-110615-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-5-2-operations_masters-110615-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-5-2-operations_masters-110615-1-sm.jpg",
          "title": "Operations Masters",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:03.750\n[MUSIC]\n\n2\n00:00:03.750 --> 00:00:12.351\nWelcome to another exciting\nepisode here on ITProTV.\n\n3\n00:00:12.351 --> 00:00:18.888\nI'm your host Ronnie Wong, and today we're\ntaking working with active directory,\n\n4\n00:00:18.888 --> 00:00:23.450\nspecifically about operations\nmasters themselves.\n\n5\n00:00:23.450 --> 00:00:26.870\nAnd who better to help us than\nthe universal operation master himself,\n\n6\n00:00:26.870 --> 00:00:27.490\nMike Rodrick.\n\n7\n00:00:27.490 --> 00:00:28.350\nHow's it going, Mike?\n\n8\n00:00:28.350 --> 00:00:29.140\n>> It's going great.\n\n9\n00:00:29.140 --> 00:00:31.410\nRonnie, I'm excited to be here and\nyou've got it right.\n\n10\n00:00:31.410 --> 00:00:35.180\nWe're going to be talking about\nthose good old operations masters.\n\n11\n00:00:35.180 --> 00:00:39.482\nNow, in other episodes we've talked about\nhow active directory is multi master,\n\n12\n00:00:39.482 --> 00:00:41.730\nmeaning that they're all equal.\n\n13\n00:00:41.730 --> 00:00:45.110\nWay back in the day in the Windows NT\ndays that wasn't the case.\n\n14\n00:00:45.110 --> 00:00:48.940\nYou had what was called\na primary domain controller, and\n\n15\n00:00:48.940 --> 00:00:53.820\nthat was a read, write, copy of the active\ndirectory database and then you had, but\n\n16\n00:00:53.820 --> 00:00:57.130\nyou could only have one primary,\none read, write, copy.\n\n17\n00:00:57.130 --> 00:01:00.120\nThe rest of them were all, if you\nneeded more than one which we did for\n\n18\n00:01:00.120 --> 00:01:01.540\nfall tolerance and load balancing.\n\n19\n00:01:01.540 --> 00:01:05.602\nThe rest of them would be what we called\nback up domain controllers or BDCs and\n\n20\n00:01:05.602 --> 00:01:09.100\nthey would be read only copies of\nthe active directory database.\n\n21\n00:01:09.100 --> 00:01:11.820\nStarting in Windows 2000 or\nServer 2000, that changed.\n\n22\n00:01:11.820 --> 00:01:16.740\nActive directory went to\na multi-master replication model.\n\n23\n00:01:16.740 --> 00:01:20.160\nAnd that meant all domain\ncontrollers were writable.\n\n24\n00:01:20.160 --> 00:01:23.739\nYou go to any domain controller,\nmake a change like a new user account or\n\n25\n00:01:23.739 --> 00:01:27.630\na new group or modify an existing user,\ndidn't matter which one you went to.\n\n26\n00:01:27.630 --> 00:01:29.188\nYou could make that change and\n\n27\n00:01:29.188 --> 00:01:33.250\nthat change would then replicate to\nall of the other domain controllers.\n\n28\n00:01:33.250 --> 00:01:36.040\nThat's a multi master model.\n\n29\n00:01:36.040 --> 00:01:40.136\nBut there are some things in active\ndirectory that, well let me back up,\n\n30\n00:01:40.136 --> 00:01:44.502\nwith a multi master model it works well,\nbut there's a chance for conflict,\n\n31\n00:01:44.502 --> 00:01:46.610\nwhat we call replication conflict.\n\n32\n00:01:46.610 --> 00:01:49.173\nImagine me being on one\ndomain controller and\n\n33\n00:01:49.173 --> 00:01:52.350\nchanging a user's phone\nnumber to 555-1212.\n\n34\n00:01:52.350 --> 00:01:58.117\nRonnie at the same time,\nbeing on a different domain controller and\n\n35\n00:01:58.117 --> 00:02:04.330\nchanging that same user account's\nphone number to 555-1313.\n\n36\n00:02:04.330 --> 00:02:08.180\nSo now I've got two domain controllers\nthat have two different phone numbers for\n\n37\n00:02:08.180 --> 00:02:08.830\nthat same user.\n\n38\n00:02:08.830 --> 00:02:12.960\nAnd when they go to replicate their\nchanges which one do they keep, right?\n\n39\n00:02:12.960 --> 00:02:18.442\nHow do they know which one should be kept\nand which one's gonna be thrown away?\n\n40\n00:02:18.442 --> 00:02:22.340\nWell active directory has some ways to\ndeal with those replication conflicts and\n\n41\n00:02:22.340 --> 00:02:24.980\nwe talked about those when\nwe talked about replication.\n\n42\n00:02:24.980 --> 00:02:27.700\nBut there are some things\nthat are too sensitive.\n\n43\n00:02:27.700 --> 00:02:32.170\nThat I can't take a chance on having\na replication conflict and for\n\n44\n00:02:32.170 --> 00:02:36.830\nthose particular jobs,\nwe're gonna pick one domain controller and\n\n45\n00:02:36.830 --> 00:02:40.088\nsay you're the only one that can do this.\n\n46\n00:02:40.088 --> 00:02:43.340\nThat's the operations masters,\nwhere we take one domain controller and\n\n47\n00:02:43.340 --> 00:02:48.740\nonly that one domain controller Is able\nto perform that particular operation.\n\n48\n00:02:48.740 --> 00:02:49.970\nNobody else can.\n\n49\n00:02:49.970 --> 00:02:53.250\nThat way there's no chance of any\nkind of replication conflict.\n\n50\n00:02:53.250 --> 00:02:57.941\nNext thing that we need to do is we need\nto figure out what those operations master\n\n51\n00:02:57.941 --> 00:02:59.000\nroles are.\n\n52\n00:02:59.000 --> 00:03:01.210\nAnd there's five of them.\n\n53\n00:03:01.210 --> 00:03:03.870\nTwo of them are forced wide.\n\n54\n00:03:03.870 --> 00:03:06.490\nAnd what I mean by that is\nthat there is only one domain\n\n55\n00:03:06.490 --> 00:03:08.720\ncontroller that performs that role.\n\n56\n00:03:08.720 --> 00:03:12.370\nIn the entire forest,\nno matter how many domains you have,\n\n57\n00:03:12.370 --> 00:03:16.290\nno matter how many domain controllers\nin each one of those domains,\n\n58\n00:03:16.290 --> 00:03:20.960\nthere's one domain controller that\ndoes that job in the entire forest.\n\n59\n00:03:20.960 --> 00:03:24.190\nThere's three other roles\nthat are domain wide.\n\n60\n00:03:24.190 --> 00:03:28.046\nThat means within your domain, no matter\nhow many domain controllers you have,\n\n61\n00:03:28.046 --> 00:03:31.690\nonly one domain controller is going to\nperform that duty or that operation.\n\n62\n00:03:31.690 --> 00:03:38.160\nBut a second domain would have its own\ndomain controller that performs that job.\n\n63\n00:03:38.160 --> 00:03:43.380\nSo two roles are forest wide,\nthree roles are domain wide.\n\n64\n00:03:43.380 --> 00:03:47.240\nNow the roles, need to know what they are,\nand what they do.\n\n65\n00:03:47.240 --> 00:03:49.670\nLet's start with the two\nforest-wide roles.\n\n66\n00:03:49.670 --> 00:03:53.720\nThere's the Schema Master, and\nthere's the Domain Naming Master.\n\n67\n00:03:53.720 --> 00:03:56.080\nThe Schema Master,\nremember what the schema is.\n\n68\n00:03:56.080 --> 00:04:01.060\nIt's the set of blueprints that controls\nwhat I can create in Active Directory.\n\n69\n00:04:01.060 --> 00:04:04.572\nWhen I right-click new user\nActive Directory looks at the schema,\n\n70\n00:04:04.572 --> 00:04:05.870\nsays, oh what is a user?\n\n71\n00:04:05.870 --> 00:04:08.240\nHere it defines what a user is.\n\n72\n00:04:08.240 --> 00:04:09.590\nAnd it makes me a new user object.\n\n73\n00:04:09.590 --> 00:04:12.700\nAnd now I can fill in the attributes,\nthe name, and the address, and\n\n74\n00:04:12.700 --> 00:04:14.200\nthe phone number, and the password.\n\n75\n00:04:14.200 --> 00:04:15.580\nAll that good stuff, right?\n\n76\n00:04:15.580 --> 00:04:19.330\nThat's the schema, the blueprints for\nwhat I can create in Active Directory.\n\n77\n00:04:20.550 --> 00:04:25.200\nEvery domain controller in your\nforest has a copy of that schema.\n\n78\n00:04:25.200 --> 00:04:28.210\nThere's one domain controller\nin the entire forest\n\n79\n00:04:28.210 --> 00:04:30.980\nthat has a writable copy of that schema.\n\n80\n00:04:30.980 --> 00:04:34.460\nAnytime anybody from any domain wants\nto make a change to the schema,\n\n81\n00:04:34.460 --> 00:04:37.220\nthey're gonna have to connect\nto that schema master.\n\n82\n00:04:37.220 --> 00:04:42.216\nThey're gonna have to find the domain\ncontroller that holds the writable copy,\n\n83\n00:04:42.216 --> 00:04:46.640\nand that's the only place you can\nmake a change to it, all right.\n\n84\n00:04:46.640 --> 00:04:49.900\nThe domain naming master,\nanother forest wide role,\n\n85\n00:04:49.900 --> 00:04:54.910\nthis one's responsible for verifying that\nthe names of your domains are unique.\n\n86\n00:04:54.910 --> 00:04:56.700\nHe's really got a pretty easy job, Ronnie.\n\n87\n00:04:56.700 --> 00:05:01.410\nWhen you add a new domain to your\nforest it has to have a unique name.\n\n88\n00:05:01.410 --> 00:05:04.265\nWell the domain naming master is the one\nthat keeps track of all the existing\n\n89\n00:05:04.265 --> 00:05:06.730\ndomains, and he'll let you know\nif you can use that name or not.\n\n90\n00:05:06.730 --> 00:05:11.925\nWhen you go through that Active Directory\nConfiguration Wizard, and you type\n\n91\n00:05:11.925 --> 00:05:16.820\nin the name of the child domain or\nthe new tree root domain or what have you.\n\n92\n00:05:16.820 --> 00:05:21.510\nThe wizard will check with the domain\nnaming master to make sure that the name's\n\n93\n00:05:21.510 --> 00:05:22.530\nnot in use.\n\n94\n00:05:22.530 --> 00:05:26.460\nAnytime you remove a domain,\nthe domain naming master's updated.\n\n95\n00:05:26.460 --> 00:05:30.530\nHe doesn't have a terribly difficult\njob because, heck, we don't add or\n\n96\n00:05:30.530 --> 00:05:33.810\nremove domains all that\noften from our forest.\n\n97\n00:05:33.810 --> 00:05:37.440\n>> Now, Mike, you're saying that only one\ndomain controller gets these roles in,\n\n98\n00:05:37.440 --> 00:05:40.650\nhow's that really helpful if that\ndomain controller goes down?\n\n99\n00:05:40.650 --> 00:05:43.300\nThat can sound dangerous.\n\n100\n00:05:43.300 --> 00:05:46.780\n>> It can be, it depends on what\nthe role is, I tell you what Ronnie,\n\n101\n00:05:46.780 --> 00:05:50.060\nlet's finish the, we'll do those domain\nwide rolls, too, we'll list them all, and\n\n102\n00:05:50.060 --> 00:05:53.160\nthen we'll talk about what happens\nwhen one of those guys goes out.\n\n103\n00:05:53.160 --> 00:05:53.948\n>> Right.\n>> Cuz we do have to pay\n\n104\n00:05:53.948 --> 00:05:54.530\nattention to that.\n\n105\n00:05:54.530 --> 00:05:55.650\n>> That's right.\n\n106\n00:05:55.650 --> 00:05:59.260\n>> So the three domain-wide rules\nare gonna be the RID master,\n\n107\n00:05:59.260 --> 00:06:03.750\nthe PDC emulator master, and\nthen the infrastructure master, all right?\n\n108\n00:06:03.750 --> 00:06:06.590\nThe RID master,\nwe've talked about rids before.\n\n109\n00:06:06.590 --> 00:06:08.650\nThe RID is a relative identifier.\n\n110\n00:06:08.650 --> 00:06:12.374\nWe know that every time we create\nan object in Active Directory it gets,\n\n111\n00:06:12.374 --> 00:06:16.797\nif it's a security principle I should say,\nit gets an SID, a security identifier.\n\n112\n00:06:16.797 --> 00:06:21.170\nWhich is made up by the domain identifier\nwhich is shared by all objects in that\n\n113\n00:06:21.170 --> 00:06:21.718\ndomain.\n\n114\n00:06:21.718 --> 00:06:25.830\nAnd then there's a unique number that\ngets plugged into the end of that.\n\n115\n00:06:25.830 --> 00:06:31.820\nThat's the RID, and that makes sure that\nthat object has a unique number, right.\n\n116\n00:06:31.820 --> 00:06:33.630\nWell where do we get that RID?\n\n117\n00:06:33.630 --> 00:06:37.235\nThe RID master's the one that's\nresponsible for generating those, and\n\n118\n00:06:37.235 --> 00:06:41.541\nsince there's only one person responsible\nfor generating it, there's very little or\n\n119\n00:06:41.541 --> 00:06:44.120\nvery no chance that I'm\ngonna ever duplicate a RID.\n\n120\n00:06:44.120 --> 00:06:49.294\nIf two different domain controllers were\ngenerating the rids what if the main\n\n121\n00:06:49.294 --> 00:06:54.625\ncontroller A said, oh, the next RID you\nwant to use is 1432, but some other\n\n122\n00:06:54.625 --> 00:06:59.815\nmain controller making an object said,\nI think the next object is 1432.\n\n123\n00:06:59.815 --> 00:07:02.699\nNow I've got two objects that\nare going to have the same RID, so\n\n124\n00:07:02.699 --> 00:07:05.870\nthey're gonna have the same SID,\nand we can't have a SID conflict.\n\n125\n00:07:05.870 --> 00:07:10.910\nSo that's why only one\nRID master per domain.\n\n126\n00:07:10.910 --> 00:07:15.010\nNow a separate domain has a separate\nRID master responsible for\n\n127\n00:07:15.010 --> 00:07:17.960\nmaking sure that domain's SIDs are unique.\n\n128\n00:07:17.960 --> 00:07:22.280\nSo each domain gets its own RID master,\nit's a domain-wide role.\n\n129\n00:07:22.280 --> 00:07:26.533\nThe infrastructure master\nis responsible for\n\n130\n00:07:26.533 --> 00:07:31.880\ntracking changes to objects\nthat exist in other domains.\n\n131\n00:07:31.880 --> 00:07:34.960\nIt's a really hard one to grasp sometimes.\n\n132\n00:07:34.960 --> 00:07:39.600\nBut remember we talked about\nthings like universal groups, and\n\n133\n00:07:39.600 --> 00:07:45.610\nhow I can take users from one domain and\nput them in a group in another domain?\n\n134\n00:07:45.610 --> 00:07:48.000\nDepending on the group's scope, right?\n\n135\n00:07:48.000 --> 00:07:50.820\nWell, what if I've got\na group in my domain\n\n136\n00:07:50.820 --> 00:07:54.090\nthat has a group from\nanother domain nested in it?\n\n137\n00:07:54.090 --> 00:07:56.300\nAnd then that group's membership changes.\n\n138\n00:07:56.300 --> 00:08:00.780\nOr even if I take users from another\ndomain and add them to that group.\n\n139\n00:08:00.780 --> 00:08:02.852\nAnd then those users get modified.\n\n140\n00:08:02.852 --> 00:08:06.449\nMy domain won't know anything about it\nbecause those objects don't exist in\n\n141\n00:08:06.449 --> 00:08:07.010\nmy domain.\n\n142\n00:08:07.010 --> 00:08:08.620\nThey exist in a separate domain.\n\n143\n00:08:08.620 --> 00:08:11.120\nThe infrastructure master\nis what tracks those.\n\n144\n00:08:11.120 --> 00:08:15.160\nReferences to objects from other domains\nthat are contained in my domain.\n\n145\n00:08:15.160 --> 00:08:19.006\nIt's really a twisty way to say it but\nthat's basically what he does.\n\n146\n00:08:19.006 --> 00:08:23.070\n>> Now Mike you said that one of the other\noperation masters, that PDC emulator.\n\n147\n00:08:23.070 --> 00:08:26.376\nBut you mentioned that that's\nduring the days of Windows NT.\n\n148\n00:08:26.376 --> 00:08:30.660\nWe're on Server 2012,\nwhy do we need a PDC emulator?\n\n149\n00:08:30.660 --> 00:08:32.850\n>> We don't have a PDC, right?\n\n150\n00:08:32.850 --> 00:08:37.129\nBut it's for backwards compatibility,\nfor older applications,\n\n151\n00:08:37.129 --> 00:08:39.920\nway back when there were PDC emulators.\n\n152\n00:08:39.920 --> 00:08:43.850\nAn application, if it needed to make\na change or store its information in\n\n153\n00:08:43.850 --> 00:08:46.530\nActiveDirectory, we might have\nmade an application partition.\n\n154\n00:08:46.530 --> 00:08:49.210\nAnd this application needs\nto store its data there.\n\n155\n00:08:49.210 --> 00:08:53.741\nWell, the application knew to look for\nthe primary domain controller, the PDC.\n\n156\n00:08:53.741 --> 00:08:55.560\nCuz it knew that was\nthe only writable copy.\n\n157\n00:08:55.560 --> 00:08:59.491\nWell, nowadays,\nwe don't have PDCs and BDCs.\n\n158\n00:08:59.491 --> 00:09:04.015\nBut you might have some old application\nthat still looks for that PDC.\n\n159\n00:09:04.015 --> 00:09:10.217\nAnd that's one of the things that\nthe PDC emulator does, is emulate a PDC.\n\n160\n00:09:10.217 --> 00:09:14.185\nSo, if anybody's looking for a PDC he\nsays, oh, by the way, that's me, right?\n\n161\n00:09:14.185 --> 00:09:16.570\n[LAUGH] Even though he's not really a PDC.\n\n162\n00:09:16.570 --> 00:09:21.443\nSo, it's really backwards compatibility\nwith things like 98, [LAUGH] 95,\n\n163\n00:09:21.443 --> 00:09:26.472\n[LAUGH] and Windows NT, not that we should\nhave to worry about that too much anymore.\n\n164\n00:09:26.472 --> 00:09:28.245\nBut that's not the only thing he does.\n\n165\n00:09:28.245 --> 00:09:31.470\nHe also is responsible for\npassword changes.\n\n166\n00:09:31.470 --> 00:09:34.240\nAny time a password gets\nchanged on the network,\n\n167\n00:09:34.240 --> 00:09:38.566\nthe PDCM leader is immediately notified,\nbecause if I change my password,\n\n168\n00:09:38.566 --> 00:09:42.772\nthat change goes to whatever domain\ncontroller I happen to be talking to.\n\n169\n00:09:42.772 --> 00:09:44.313\nIf I log off and log back on,\n\n170\n00:09:44.313 --> 00:09:47.736\nI might end up talking to\na different domain controller, and\n\n171\n00:09:47.736 --> 00:09:52.590\nthat different domain controller might\nnot be aware of my password changing.\n\n172\n00:09:52.590 --> 00:09:55.790\nCuz it hasn't replicated throughout\nall the other domain controllers,\n\n173\n00:09:55.790 --> 00:09:57.300\nand my authentication will fail.\n\n174\n00:09:57.300 --> 00:10:00.950\nSo what happens is when I update my\npassword with one domain controller,\n\n175\n00:10:00.950 --> 00:10:04.150\nhe immediately notifies the PDC\nof that password change.\n\n176\n00:10:04.150 --> 00:10:06.250\nAnd then if i go to log off and\nlog back on and\n\n177\n00:10:06.250 --> 00:10:10.490\ntalk to a different domain controller,\nhe says, wait, that password's not right.\n\n178\n00:10:10.490 --> 00:10:14.150\nLet me check with the PDCM later and see\nif this guy has changed his password and\n\n179\n00:10:14.150 --> 00:10:15.780\nmaybe I just don't have it yet.\n\n180\n00:10:15.780 --> 00:10:17.850\nAnd so that way he can say,\noh he has changed it.\n\n181\n00:10:17.850 --> 00:10:21.113\nCan you go ahead and\nreplicate that over to me real quick, so\n\n182\n00:10:21.113 --> 00:10:23.803\nI can finish authenticating\nthis user account.\n\n183\n00:10:23.803 --> 00:10:27.980\nSo it's a single point for\npassword changes to occur.\n\n184\n00:10:27.980 --> 00:10:32.530\nAnd then another big responsibility for\nthe PDC emulator is time synchronization.\n\n185\n00:10:32.530 --> 00:10:38.380\nTime synchronization's a very important\npart of security within Active Directory.\n\n186\n00:10:38.380 --> 00:10:42.719\nBy default,\nthere's a five minute window basically.\n\n187\n00:10:42.719 --> 00:10:46.676\nIf your clock on your machine is off\nby more than five minutes from what\n\n188\n00:10:46.676 --> 00:10:50.581\nthe domain controller says it is,\nit won't let you authenticate.\n\n189\n00:10:50.581 --> 00:10:54.836\nIt thinks user might be doing some type\nof replay attack or some other malicious\n\n190\n00:10:54.836 --> 00:10:59.032\nattack and it won't let you authenticate\nit, it won't let you do anything.\n\n191\n00:10:59.032 --> 00:11:02.070\nSo clocks in the network\nhave to remain synchronized.\n\n192\n00:11:02.070 --> 00:11:04.630\nWhat's the easiest way to do that?\n\n193\n00:11:04.630 --> 00:11:08.350\nPick one guy and have everybody\nsynchronize their clocks with him.\n\n194\n00:11:08.350 --> 00:11:11.740\nIt doesn't really even matter if that one\nguy's clock is right or not, all right?\n\n195\n00:11:11.740 --> 00:11:15.610\nAs long as everybody's synchronized\nwith him we'll all have the wrong time.\n\n196\n00:11:15.610 --> 00:11:17.120\nSo, they'll all be right?\n\n197\n00:11:17.120 --> 00:11:19.626\nIs that a way to look at it?\n\n198\n00:11:19.626 --> 00:11:23.927\nSo, basically your PC emulator is\nthat time synchronization point.\n\n199\n00:11:23.927 --> 00:11:27.993\nIf you have multiple domains,\nwhat happens is those child domains,\n\n200\n00:11:27.993 --> 00:11:30.950\nthey all sync their time\nwith their PDC emulator.\n\n201\n00:11:30.950 --> 00:11:32.450\nIt's a domain-wide role.\n\n202\n00:11:32.450 --> 00:11:34.710\nEvery domain has its own PDC emulator.\n\n203\n00:11:34.710 --> 00:11:38.760\nSo everybody in that domain\nsynchronizes with that PDC emulator.\n\n204\n00:11:38.760 --> 00:11:42.350\nBut then that child domain's PDC emulator\n\n205\n00:11:42.350 --> 00:11:45.430\nsynchronizes his time with\nthe parent PDC emulator.\n\n206\n00:11:45.430 --> 00:11:49.287\nAnd it goes right up that domain tree\nall the way up to the tree root.\n\n207\n00:11:49.287 --> 00:11:52.803\nWhich would then that PDC\nemulator synchronizes\n\n208\n00:11:52.803 --> 00:11:55.381\nwith the forest root PDC emulator.\n\n209\n00:11:55.381 --> 00:12:02.673\nSo now everybody in the entire\nforest is synchronized.\n\n210\n00:12:02.673 --> 00:12:07.309\nAnd in that forest root PDC emulator\nis given an external time source like\n\n211\n00:12:07.309 --> 00:12:11.034\ntime.microsoft.com or\nan atomic clock of some kind, or\n\n212\n00:12:11.034 --> 00:12:15.986\nsomething like that, if we need to\nsynchronize time with the outside world.\n\n213\n00:12:15.986 --> 00:12:19.781\nSo in the end, everybody in\nthe forest will be synchronized.\n\n214\n00:12:19.781 --> 00:12:24.706\nBut remember, each domain has its own\nPDC emulator, your client machines,\n\n215\n00:12:24.706 --> 00:12:29.876\nyour member servers, all synchronize\ntheir time with their own PDC emulators.\n\n216\n00:12:29.876 --> 00:12:33.126\nAnd it's the PDC emulators that\ndaisy chain up main trees,\n\n217\n00:12:33.126 --> 00:12:35.011\nall the way up to the forest root and\n\n218\n00:12:35.011 --> 00:12:38.890\nthen the forest root is given that\nexternal time synchronization.\n\n219\n00:12:38.890 --> 00:12:41.187\nSo those are the big five rules there.\n\n220\n00:12:41.187 --> 00:12:43.207\n>> All right, now Mike, let's go ahead and\n\n221\n00:12:43.207 --> 00:12:46.516\ntake a look at how in the world we\nsee these particular roles, here.\n\n222\n00:12:46.516 --> 00:12:48.536\nMike, you're gonna show us how we\ncan actually see these, right?\n\n223\n00:12:48.536 --> 00:12:50.278\n>> I am, you know, and\nthat's an important thing.\n\n224\n00:12:50.278 --> 00:12:56.484\nWe've gotta know which ones, which domain\ncontrollers are holding these roles,\n\n225\n00:12:56.484 --> 00:13:01.440\nbecause as Ronnie said earlier\n,what if one of those fails?\n\n226\n00:13:01.440 --> 00:13:05.680\nSo very important you understand which\nmain controllers are holding those roles.\n\n227\n00:13:05.680 --> 00:13:08.440\nAnd the way it's gonna work is when\nyou said you having nothing, and\n\n228\n00:13:08.440 --> 00:13:10.550\nyou create your first root domain.\n\n229\n00:13:10.550 --> 00:13:14.250\nYou create your first domain\ncontroller in your entire enterprise.\n\n230\n00:13:14.250 --> 00:13:17.330\nWell, there's nobody else so\nhe's gonna have all five roles.\n\n231\n00:13:17.330 --> 00:13:20.010\nHe's gonna have two forest-wide roles,\nright?\n\n232\n00:13:20.010 --> 00:13:23.983\nAnd then he's also going to have the three\ndomain-wide roles for that domain.\n\n233\n00:13:23.983 --> 00:13:27.173\nThen if I add other domain\ncontrollers they don't get anything,\n\n234\n00:13:27.173 --> 00:13:29.150\nbecause I already have the role holder.\n\n235\n00:13:29.150 --> 00:13:32.550\nThey're all in that\nfirst domain controller.\n\n236\n00:13:32.550 --> 00:13:37.740\nAs I add additional domains,\nchild domains, other trees, well the first\n\n237\n00:13:37.740 --> 00:13:42.730\ndomain controller for that child domain\nis gonna get the three domain-wide roles.\n\n238\n00:13:42.730 --> 00:13:44.040\nAnd that's where they will be.\n\n239\n00:13:44.040 --> 00:13:46.620\nSo it's really it's that\nfirst domain controller.\n\n240\n00:13:46.620 --> 00:13:49.370\nBut, I can move the rules, right?\n\n241\n00:13:49.370 --> 00:13:52.890\nNow, Microsoft will recommend you\nnever take the forest-wide roles\n\n242\n00:13:52.890 --> 00:13:55.120\nout of the forest root domain.\n\n243\n00:13:55.120 --> 00:13:57.500\nYou could move it to other domain\ncontrollers in the forest root,\n\n244\n00:13:57.500 --> 00:14:01.688\nbut they should always remain\nin that forest root domain.\n\n245\n00:14:01.688 --> 00:14:05.400\nThe domain-wide roles if you want to move\nthem to other domain controllers within\n\n246\n00:14:05.400 --> 00:14:07.970\nthat domain, you definitely can.\n\n247\n00:14:07.970 --> 00:14:09.960\nWhy would you ever want to?\n\n248\n00:14:09.960 --> 00:14:11.090\nPerformance reasons.\n\n249\n00:14:11.090 --> 00:14:14.910\nYou know that PDC emulator role\nis really a pretty busy role.\n\n250\n00:14:14.910 --> 00:14:17.897\nSo I want to make sure that's\non a well-performing or\n\n251\n00:14:17.897 --> 00:14:20.410\na high-performance domain controller.\n\n252\n00:14:20.410 --> 00:14:23.730\nIdeally a domain controller that's\nnot doing a lot of other things.\n\n253\n00:14:23.730 --> 00:14:28.870\nSometimes we like to multitask our servers\nand we install lots of roles on them,\n\n254\n00:14:28.870 --> 00:14:31.880\nalong with Active Directory,\nassuming security works for us.\n\n255\n00:14:31.880 --> 00:14:36.778\nThe PDC emulator should be on one of my\nleast busy domain controllers, right,\n\n256\n00:14:36.778 --> 00:14:39.530\none of my more higher\nperformance domain controllers.\n\n257\n00:14:39.530 --> 00:14:41.870\nCuz that one gets used a lot.\n\n258\n00:14:41.870 --> 00:14:43.200\nThe other roles?\n\n259\n00:14:43.200 --> 00:14:44.140\nWell, you think about it.\n\n260\n00:14:44.140 --> 00:14:47.390\nThe schema master, that's where\nthey make changes to the schema.\n\n261\n00:14:47.390 --> 00:14:49.580\nHow often do I make changes to the schema?\n\n262\n00:14:49.580 --> 00:14:50.740\nRare, right?\n\n263\n00:14:50.740 --> 00:14:54.510\nWhen I install Exchange, that might be\none time, but other than that there's not\n\n264\n00:14:54.510 --> 00:14:58.760\na lot of times we need to manually\ngo in and modify that schema master.\n\n265\n00:14:58.760 --> 00:15:02.540\nSo, just leave it where it is is\ntypically what they're gonna say.\n\n266\n00:15:02.540 --> 00:15:04.850\nFor performance reasons though,\nI can move them.\n\n267\n00:15:04.850 --> 00:15:07.590\nThe other one we want to think\nabout is the infrastructure Master.\n\n268\n00:15:07.590 --> 00:15:12.760\nThe infrastructure master should\nnot be on a global catalog server.\n\n269\n00:15:12.760 --> 00:15:14.860\nThink about what the global\ncatalog server is.\n\n270\n00:15:14.860 --> 00:15:17.410\nIt's an index to all objects\nthroughout my forest.\n\n271\n00:15:17.410 --> 00:15:21.700\nIt has a copy of every\ndomain's domain partition.\n\n272\n00:15:21.700 --> 00:15:26.200\nSo to the global catalog server,\nnothing looks foreign, right?\n\n273\n00:15:26.200 --> 00:15:27.652\nBecause it has a copy of everything.\n\n274\n00:15:27.652 --> 00:15:30.180\nSo nothing looks like it's\ncoming from a different domain.\n\n275\n00:15:30.180 --> 00:15:33.274\nSo if the infrastructure master\nis on the global catalog server,\n\n276\n00:15:33.274 --> 00:15:36.378\nhe doesn't do his job because it\nlooks like everything is local.\n\n277\n00:15:36.378 --> 00:15:40.460\nThere's no foreign references to verify or\ncheck.\n\n278\n00:15:40.460 --> 00:15:43.690\nSo the rule of thumb is put\nyour infrastructure master on\n\n279\n00:15:43.690 --> 00:15:46.880\na domain controller that's\nnot a global catalog server.\n\n280\n00:15:46.880 --> 00:15:51.730\nOr make every domain controller\na global catalog server.\n\n281\n00:15:51.730 --> 00:15:53.605\nThen I don't need\nthe infrastructure master role.\n\n282\n00:15:53.605 --> 00:15:57.291\nThere's nothing, no domain controller has\nto worry about checkign with other domains\n\n283\n00:15:57.291 --> 00:15:59.010\nabout references to objects.\n\n284\n00:15:59.010 --> 00:16:02.293\nBecause they all have a copy of\nall domains domain partitions.\n\n285\n00:16:02.293 --> 00:16:05.903\nThat's not always possible, because\nthat does generate a lot of replication\n\n286\n00:16:05.903 --> 00:16:08.700\ntraffic, but that might be\nthe way your organization goes.\n\n287\n00:16:08.700 --> 00:16:12.930\nIn that case,\nthe infrastructure master rolls his up.\n\n288\n00:16:12.930 --> 00:16:16.830\nI'm not needed, and he doesn't even\nbother doing anything, all right.\n\n289\n00:16:16.830 --> 00:16:20.790\nSo, Ronnie, that's a little bit about\nwhere their gonna be initially and\n\n290\n00:16:20.790 --> 00:16:22.940\nif we wanna move them, we can.\n\n291\n00:16:22.940 --> 00:16:26.620\nBut what if they come into the network\nlate or if they have been moved, and\n\n292\n00:16:26.620 --> 00:16:28.180\nyou don't know where they've been moved?\n\n293\n00:16:28.180 --> 00:16:31.110\nWe need to be able to find these guys,\nright.\n\n294\n00:16:31.110 --> 00:16:33.850\nSo let's look take a look\nat how we can do that.\n\n295\n00:16:33.850 --> 00:16:37.680\nDepending on what the role is,\nis gonna determine what tool you use\n\n296\n00:16:37.680 --> 00:16:40.950\nif you want to do it through the GUI or\nthe graphical user interface.\n\n297\n00:16:40.950 --> 00:16:45.690\nFor the domain wide tools, its gonna be\nactive directory, users and computers.\n\n298\n00:16:45.690 --> 00:16:48.830\nSo all I'm gonna do is right\nclick here on my domain.\n\n299\n00:16:48.830 --> 00:16:54.520\nAnd choose operation master and then I'll\nsee my RID master is currently DC01,\n\n300\n00:16:54.520 --> 00:16:58.530\nmy PDC emulator and\nmy infrastructure master, right?\n\n301\n00:16:58.530 --> 00:17:00.950\nSo I can see the three\ndomain-wide roles there.\n\n302\n00:17:00.950 --> 00:17:05.820\nIf I want to see the forest-wide roles,\nI have to use different tools for\n\n303\n00:17:05.820 --> 00:17:09.910\nthe domain naming master,\nit's actually domains and trusts.\n\n304\n00:17:09.910 --> 00:17:13.630\nAnd you right click on domains and\ntrusts and choose operations master.\n\n305\n00:17:13.630 --> 00:17:15.730\nAnd there's my domain naming master.\n\n306\n00:17:16.760 --> 00:17:21.160\nIf I wanna see the schema master,\nI don't have a tool to do that.\n\n307\n00:17:21.160 --> 00:17:23.020\n>> [LAUGH]\n>> Because the schema is so protected,\n\n308\n00:17:23.020 --> 00:17:25.630\nit's like the registry for\nyour entire enterprise.\n\n309\n00:17:25.630 --> 00:17:28.400\nThey don't give you a tool out of the box,\nor\n\n310\n00:17:28.400 --> 00:17:31.270\nthat's enabled already that you\ncan use to work with the schema.\n\n311\n00:17:31.270 --> 00:17:34.100\nThey don't want you\nmessing with the schema.\n\n312\n00:17:34.100 --> 00:17:37.550\nIt's like messing with\nthe registry on your computer.\n\n313\n00:17:37.550 --> 00:17:40.850\nIt's okay to do if you\nknow what you're doing.\n\n314\n00:17:40.850 --> 00:17:43.860\nSo they make it a little more difficult.\n\n315\n00:17:43.860 --> 00:17:48.190\nSo what we have to do to work with\nthe schema is register the schema snap-in.\n\n316\n00:17:48.190 --> 00:17:53.704\nSo I'm gonna open up a command prompt then\nI'm gonna type in regsvr32 Schmmgmt.dell.\n\n317\n00:17:53.704 --> 00:17:58.010\nSchema management, right, Schmmgmt.dell.\n\n318\n00:17:58.010 --> 00:18:06.330\nI hit enter and it says that the snap\nin was successfully registered.\n\n319\n00:18:06.330 --> 00:18:08.700\nOnce I've registered that,\n\n320\n00:18:08.700 --> 00:18:13.490\nthen I can create my own own\nMicrosoft management console.\n\n321\n00:18:13.490 --> 00:18:15.230\nStart, run, and then C.\n\n322\n00:18:15.230 --> 00:18:20.870\nAnd I can go file, ad remove snap-in,\nand I can find the schema snap-in.\n\n323\n00:18:20.870 --> 00:18:24.580\nI would not have been there,\nhad I not registered it first.\n\n324\n00:18:24.580 --> 00:18:29.160\nI click okay and now I've got my\nactive directory schema console.\n\n325\n00:18:29.160 --> 00:18:34.420\nAnd I can right click that active\ndirectory schema operations master,\n\n326\n00:18:34.420 --> 00:18:36.960\nand it tell me who\nthe current role holder is.\n\n327\n00:18:36.960 --> 00:18:40.710\nAll right, and then what I would\ndo if this was my network.\n\n328\n00:18:40.710 --> 00:18:44.260\nI wanna save this console in\ncase I ever need it again.\n\n329\n00:18:44.260 --> 00:18:50.090\nI call it AD scheme, something like that,\nand I click save, all right.\n\n330\n00:18:50.090 --> 00:18:52.910\nSo that's one way to find them in the GUI.\n\n331\n00:18:52.910 --> 00:18:57.810\nMy new favorite way,\nI'll show you my old favorite way first.\n\n332\n00:18:57.810 --> 00:19:03.560\nOpen up that command prompt again and\nwe used\n\n333\n00:19:03.560 --> 00:19:08.220\nto do a netdom query F-S-M-O, for\nflexible, single, master, operations.\n\n334\n00:19:08.220 --> 00:19:10.070\nSomething I didn't mention\nat the beginning, Ronny.\n\n335\n00:19:10.070 --> 00:19:14.290\nThese things have several names, we call\nthem operations masters on this show.\n\n336\n00:19:14.290 --> 00:19:18.100\nThey are also called FSMOs or\nFlexible Single Master Operations.\n\n337\n00:19:18.100 --> 00:19:22.030\nI have also heard them called\nsingle operations masters,\n\n338\n00:19:22.030 --> 00:19:26.110\npretty much any combination of the words\nflexible, single, operations and masters.\n\n339\n00:19:26.110 --> 00:19:29.650\nI think people will know what you're\ntalking about and there you go.\n\n340\n00:19:29.650 --> 00:19:31.610\nNotice I get all five\nof them in one query,\n\n341\n00:19:31.610 --> 00:19:37.390\na little bit easier than going to three\nseparate tools to find the results.\n\n342\n00:19:37.390 --> 00:19:39.728\nThe other way you can do\nthis is through power shell.\n\n343\n00:19:41.220 --> 00:19:45.907\nAnd you can do a get-adforest and\n\n344\n00:19:45.907 --> 00:19:52.080\nit's gonna tell you who the domain naming\nmaster is as well as the schema master.\n\n345\n00:19:52.080 --> 00:19:59.370\nYou can do a get-addomain and you'll be\nable to find the infrastructure master,\n\n346\n00:19:59.370 --> 00:20:03.700\nthe PDC emulator and the RID master.\n\n347\n00:20:03.700 --> 00:20:07.420\nAnd of course,\nyou can pipe that out into a format list.\n\n348\n00:20:07.420 --> 00:20:11.170\nIn fact, I can show you real quick if\nyou wanted to do a little simpler view.\n\n349\n00:20:11.170 --> 00:20:15.990\nYou can pipe that out into a format\nlist and say I just want to see\n\n350\n00:20:17.110 --> 00:20:20.880\nthe RID master, the PDC emulator.\n\n351\n00:20:20.880 --> 00:20:25.510\nI can't type and talk,\nand the infrastructure\n\n352\n00:20:27.770 --> 00:20:29.870\nmaster, and there you can see.\n\n353\n00:20:29.870 --> 00:20:33.170\nInstead of that big old list of\nall the things about my domain,\n\n354\n00:20:33.170 --> 00:20:35.920\nI just get those three\nmaster roll holders.\n\n355\n00:20:35.920 --> 00:20:41.270\nSo, many different ways you can go and\nfind who those role holders are.\n\n356\n00:20:41.270 --> 00:20:44.200\nAll right now Ron, your next question was,\nwhat if they break?\n\n357\n00:20:44.200 --> 00:20:44.790\n>> That's right.\n\n358\n00:20:44.790 --> 00:20:47.360\n>> All right,\nwhat if one of those things goes down?\n\n359\n00:20:47.360 --> 00:20:51.160\nWe can transfer the role\nto another machine\n\n360\n00:20:51.160 --> 00:20:54.010\nif the current role holder is functioning.\n\n361\n00:20:54.010 --> 00:20:56.560\nLike if we decide hey,\nI'm gonna demote that machine.\n\n362\n00:20:56.560 --> 00:20:59.030\nThat very first domain controller\nthat set up our entire enterprise,\n\n363\n00:20:59.030 --> 00:21:03.400\nthat forest root, that first domain\ncontroller we did that three years ago.\n\n364\n00:21:03.400 --> 00:21:05.180\nThat server's tired,\nwe're gonna retire it.\n\n365\n00:21:05.180 --> 00:21:07.810\nWell, I've gotta get\nthose roles off of him.\n\n366\n00:21:07.810 --> 00:21:12.030\nI can't just demote that domain controller\nand be without a schema master and\n\n367\n00:21:12.030 --> 00:21:13.940\na domain naming master.\n\n368\n00:21:13.940 --> 00:21:16.640\nIt won't let you,\nit'll warn you, trust me.\n\n369\n00:21:16.640 --> 00:21:20.915\nSo I can transfer the role to another\ndomain controller before I demote\n\n370\n00:21:20.915 --> 00:21:26.300\nit management, and it's very easy to\ndo using one of those gooey tools.\n\n371\n00:21:26.300 --> 00:21:30.200\nWe could just transfer, in fact,\nlet's go transfer a role real quick.\n\n372\n00:21:30.200 --> 00:21:32.890\nI'll go back into active\ndirectory users and computers, and\n\n373\n00:21:32.890 --> 00:21:34.790\nI will right click on my domain.\n\n374\n00:21:34.790 --> 00:21:37.050\nAnd I'll choose operations masters.\n\n375\n00:21:37.050 --> 00:21:39.300\nNow, notice what it says here.\n\n376\n00:21:39.300 --> 00:21:44.200\nThe current role holder's DCO1 to transfer\nit to, DC01 this is the same machine.\n\n377\n00:21:44.200 --> 00:21:47.300\nYou can't very well transfer that, right?\n\n378\n00:21:47.300 --> 00:21:50.277\nSo, how do you transfer?\n\n379\n00:21:50.277 --> 00:21:53.708\nYou need to go to the machine\nyou want to transfer it to,\n\n380\n00:21:53.708 --> 00:21:55.582\nnot the current role holder.\n\n381\n00:21:55.582 --> 00:21:58.427\nNow, when I say go to the machine\nthat you want to transfer it to,\n\n382\n00:21:58.427 --> 00:22:00.770\ndoesn't mean you actually\nhave to go to it, right?\n\n383\n00:22:00.770 --> 00:22:03.450\nThat's the beauty of these snap-ins.\n\n384\n00:22:03.450 --> 00:22:06.860\nWhat if I change the focus\nof this snap-in?\n\n385\n00:22:06.860 --> 00:22:09.760\nI go to my target,\nthe one I want to transfer the role to.\n\n386\n00:22:10.830 --> 00:22:14.610\nWell, now I'm working with active\ndirectory on server one, right?\n\n387\n00:22:14.610 --> 00:22:18.870\nAnd so, if I right click on lab.itpro and\n\n388\n00:22:18.870 --> 00:22:21.580\noperations masters,\nnow this is current, its DC01.\n\n389\n00:22:21.580 --> 00:22:24.700\nIf you wanna change it to SVR01,\nclick change.\n\n390\n00:22:24.700 --> 00:22:27.260\nSo I click change, and yes, and okay.\n\n391\n00:22:27.260 --> 00:22:32.740\nIt says it was transferred successfully,\nand now if we go back over here and\n\n392\n00:22:32.740 --> 00:22:36.995\nwe do a little, get-addmo.\n\n393\n00:22:40.974 --> 00:22:45.030\nWe should see that the RID master,\nif I can find it in my list here.\n\n394\n00:22:45.030 --> 00:22:46.050\nDid I miss it Ronnie?\n\n395\n00:22:47.100 --> 00:22:48.450\nWhere'd it go, there he is.\n\n396\n00:22:49.700 --> 00:22:54.690\nThe RID master is, that's why I like that\npiping that out to a table or a list,\n\n397\n00:22:54.690 --> 00:22:56.400\nis now server one.\n\n398\n00:22:56.400 --> 00:23:00.020\nSo we successfully transferred\nthat role over to another machine.\n\n399\n00:23:00.020 --> 00:23:04.390\n>> Now Mike, that works even if\nthe machine that held that role\n\n400\n00:23:04.390 --> 00:23:06.620\nis no longer really accessible?\n\n401\n00:23:06.620 --> 00:23:08.930\n>> No, then we're gonna have a problem,\naren't we?\n\n402\n00:23:08.930 --> 00:23:10.910\nCuz I can't connect to that target and\n\n403\n00:23:10.910 --> 00:23:15.470\ntell it I wanna transfer the role if that\nserver has failed or I shouldn't say that.\n\n404\n00:23:15.470 --> 00:23:19.300\nI can connect to the target, but\nthe original role holder is offline.\n\n405\n00:23:19.300 --> 00:23:24.030\nAnd so I can't just simply transfer\nthe role because I can't contact\n\n406\n00:23:24.030 --> 00:23:25.300\nthe current role holder.\n\n407\n00:23:25.300 --> 00:23:28.690\nHe's failed, then this happens\nif you have a hardware failure.\n\n408\n00:23:28.690 --> 00:23:31.550\nThis is why it's important to know\nwhich domain controllers are your role\n\n409\n00:23:31.550 --> 00:23:35.880\nholders so that if one of those fails,\nyou can do something about it.\n\n410\n00:23:35.880 --> 00:23:39.840\nIn that case, we have to do what is\ncalled seizing the role, all right?\n\n411\n00:23:39.840 --> 00:23:41.450\nNow what's the difference?\n\n412\n00:23:41.450 --> 00:23:45.670\nWell, transferring the role,\nthe current role holder is up and running.\n\n413\n00:23:45.670 --> 00:23:48.080\nThe one you're gonna transfer\nit to is up and running.\n\n414\n00:23:48.080 --> 00:23:49.780\nSo we simply transfer it.\n\n415\n00:23:49.780 --> 00:23:54.700\nThe old role holder knows that\nhe's no longer the role holder.\n\n416\n00:23:54.700 --> 00:23:57.933\nRemember there's a reason these\nare called single operations masters.\n\n417\n00:23:57.933 --> 00:23:59.860\nOnly one of them can exist.\n\n418\n00:23:59.860 --> 00:24:05.472\n>> So, if the machine has failed, and\nI move that role to another machine,\n\n419\n00:24:05.472 --> 00:24:09.650\nwhat if I ever bring\nthat machine back online?\n\n420\n00:24:09.650 --> 00:24:14.440\nHe wasn't online when I transferred it,\nso he would still think he was the role\n\n421\n00:24:14.440 --> 00:24:18.080\nholder even though I've got a new domain\ncontroller performing that function.\n\n422\n00:24:18.080 --> 00:24:21.490\nNow all the sudden I've got two Rid\nmasters, and that can't happen.\n\n423\n00:24:21.490 --> 00:24:26.150\nSo that's why you can't transfer the role\nif the current role holder has failed.\n\n424\n00:24:26.150 --> 00:24:27.970\nYou have to seize the role.\n\n425\n00:24:27.970 --> 00:24:28.570\nAll right?\n\n426\n00:24:28.570 --> 00:24:34.130\nAnd to seize it, we used to use NTDSutil,\nnow we use PowerShell, of course.\n\n427\n00:24:34.130 --> 00:24:35.980\nAnd it's been a while\nsince I've done this, so\n\n428\n00:24:35.980 --> 00:24:38.920\nmake sure I get this command right,\nRonnie.\n\n429\n00:24:38.920 --> 00:24:40.940\nIt's gonna be in, let's see,\nwhich machine I'm on.\n\n430\n00:24:40.940 --> 00:24:45.640\nCurrently I'm on,\nyou know what, let's do this.\n\n431\n00:24:45.640 --> 00:24:48.000\nLet's shut down server one.\n\n432\n00:24:48.000 --> 00:24:49.692\nI'm gonna close active directory.\n\n433\n00:24:49.692 --> 00:24:54.490\nI wanna switch over to server one,\nand we'll pretend we had a failure.\n\n434\n00:24:54.490 --> 00:24:57.060\nHe's, right now,\nit is the RID master, right?\n\n435\n00:24:57.060 --> 00:24:59.270\nI transferred that role over.\n\n436\n00:24:59.270 --> 00:25:04.160\nNow server one has failed, and\nwe're going to seize the role back.\n\n437\n00:25:04.160 --> 00:25:04.790\nRight?\n\n438\n00:25:04.790 --> 00:25:08.470\nSo I'll make sure that guy\nshuts down here all the way.\n\n439\n00:25:08.470 --> 00:25:10.940\nAnd I'll go back over to\nDC1 open up PowerShell and\n\n440\n00:25:10.940 --> 00:25:14.010\nwe'll attempt to seize this roll.\n\n441\n00:25:14.010 --> 00:25:19.323\nSo it's gonna be\nMove-ADDirectoryServerOperationMasterRoll.\n\n442\n00:25:19.323 --> 00:25:20.630\n>> [LAUGH]\n>> What?\n\n443\n00:25:20.630 --> 00:25:22.900\nYeah.\nThat's a really long one.\n\n444\n00:25:22.900 --> 00:25:26.090\nThis is why I love Tab autofill, right?\n\n445\n00:25:26.090 --> 00:25:30.190\nI just tab through the ones\nuntil I find the one I want.\n\n446\n00:25:30.190 --> 00:25:33.470\nSo, ad directory server\noperations masters role.\n\n447\n00:25:33.470 --> 00:25:38.250\nAnd then we're gonna type in\ndash identity, all right, and\n\n448\n00:25:38.250 --> 00:25:44.480\nyou put in your target server,\nthe one you want to seize the role to.\n\n449\n00:25:44.480 --> 00:25:49.150\nIn this case dc01.lab.itpro.tv.\n\n450\n00:25:49.150 --> 00:25:49.910\nAll right.\nAnd\n\n451\n00:25:49.910 --> 00:25:53.790\nthen, which roll am I trying to transfer?\n\n452\n00:25:53.790 --> 00:25:56.290\nSo, operations master roll.\n\n453\n00:25:56.290 --> 00:25:57.850\nAnd I don't get to type in the name.\n\n454\n00:25:57.850 --> 00:25:59.700\nAll right?\nI have to know the code.\n\n455\n00:25:59.700 --> 00:26:04.840\nAnd since there's five rolls and it starts\nwith a zero, it's zero through four.\n\n456\n00:26:04.840 --> 00:26:07.080\nRID Master is one.\n\n457\n00:26:07.080 --> 00:26:09.012\nPDC emulator is actually zero.\n\n458\n00:26:09.012 --> 00:26:10.530\nRID Master is one.\n\n459\n00:26:10.530 --> 00:26:12.160\nInfrastructure master is two.\n\n460\n00:26:12.160 --> 00:26:15.870\nDomain naming master is,\nI'm sorry, schema master is three.\n\n461\n00:26:15.870 --> 00:26:18.480\nAnd then domain naming master is four.\n\n462\n00:26:18.480 --> 00:26:21.370\nAnd I'll put those in the show notes\nin case you didn't memorize all\n\n463\n00:26:21.370 --> 00:26:22.311\nthat as I read them off.\n\n464\n00:26:22.311 --> 00:26:23.853\n>> [LAUGH]\n>> I've got my show notes.\n\n465\n00:26:23.853 --> 00:26:26.320\nI mean, I don't remember\nthe actual code for these, guys.\n\n466\n00:26:26.320 --> 00:26:28.800\nSo the RID Master, again, Ronnie, was one.\n\n467\n00:26:28.800 --> 00:26:30.550\nSo we should be able to type that in.\n\n468\n00:26:30.550 --> 00:26:34.090\nAnd then dash force,\nbecause that's gonna say I\n\n469\n00:26:34.090 --> 00:26:37.872\nknow you can't contact the current\nrole holder, move it anyway.\n\n470\n00:26:37.872 --> 00:26:38.720\nAll right?\n\n471\n00:26:38.720 --> 00:26:41.240\nGo ahead, Enter.\n\n472\n00:26:41.240 --> 00:26:44.365\nAnd it's going to fail because\nI made a typo somewhere.\n\n473\n00:26:44.365 --> 00:26:49.200\nCannot find the record server with\nthe identity DC01.lambda.hpro.tv.\n\n474\n00:26:49.200 --> 00:26:53.570\nYou are dc01.\n\n475\n00:26:53.570 --> 00:26:57.210\nDc01, did I mistype that, Ronnie?\n\n476\n00:26:57.210 --> 00:26:58.610\nDo you see a typo in there?\n\n477\n00:26:58.610 --> 00:27:00.190\n>> I don't.\n\n478\n00:27:00.190 --> 00:27:04.350\n>> Identity dc01.lab.itpro.tv.\n\n479\n00:27:04.350 --> 00:27:05.940\nAll right.\n\n480\n00:27:05.940 --> 00:27:08.290\nLet's do this.\n\n481\n00:27:08.290 --> 00:27:11.273\nWe'll do a little IP configs,\n\n482\n00:27:11.273 --> 00:27:16.220\nwhich I'll just verify\nthat I am lab.itpro.tv.\n\n483\n00:27:18.762 --> 00:27:20.574\nLet's do this.\n\n484\n00:27:20.574 --> 00:27:25.540\nLet's clear screen, and\nwe'll try that command again here.\n\n485\n00:27:27.532 --> 00:27:30.630\nAnd I, what I'm gonna do is\nI'm gonna retype that name.\n\n486\n00:27:30.630 --> 00:27:32.962\nSometimes it gets a little angry with us.\n\n487\n00:27:32.962 --> 00:27:33.760\nAll right.\n\n488\n00:27:33.760 --> 00:27:40.130\nSo, the command we'll use to seize\nthat role is gonna be move dash ad\n\n489\n00:27:40.130 --> 00:27:44.720\ndirectory server operations master role.\n\n490\n00:27:44.720 --> 00:27:47.910\nOne of the longest ones that I know of.\n\n491\n00:27:47.910 --> 00:27:49.226\nThank gosh for tab autofill.\n\n492\n00:27:49.226 --> 00:27:50.044\n>> [LAUGH]\n>> All right?\n\n493\n00:27:50.044 --> 00:27:54.600\nSo we're gonna tell it we're gonna move\none of those operations master roles.\n\n494\n00:27:54.600 --> 00:27:56.850\nAnd we've got to tell it\nwhere we're gonna move it to.\n\n495\n00:27:56.850 --> 00:27:58.190\nSo it's a dash identity.\n\n496\n00:27:58.190 --> 00:28:00.930\nAnd then I'm gonna put\nquotes around my name.\n\n497\n00:28:00.930 --> 00:28:03.870\nI'm gonna move that to dc01.\n\n498\n00:28:03.870 --> 00:28:04.740\nAnd I'll end my quote.\n\n499\n00:28:04.740 --> 00:28:06.140\nSo that's where I wanna move it to, right?\n\n500\n00:28:06.140 --> 00:28:07.870\nServer one is shut down.\n\n501\n00:28:07.870 --> 00:28:13.190\nSo this time I'm gonna move it,\nI wanna seize it back to dc01.\n\n502\n00:28:13.190 --> 00:28:16.180\nAnd then we've gotta tell\nit what role I wanna move.\n\n503\n00:28:16.180 --> 00:28:18.370\nSo it's OperationsMasterRole.\n\n504\n00:28:18.370 --> 00:28:20.110\nAnd you don't use the name.\n\n505\n00:28:20.110 --> 00:28:24.360\nYou have to use the code, zero through\nfour, for the five different roles.\n\n506\n00:28:24.360 --> 00:28:26.280\nZero for your PDC emulator.\n\n507\n00:28:26.280 --> 00:28:28.020\nOne for your RID Master.\n\n508\n00:28:28.020 --> 00:28:29.680\nTwo for your infrastructure.\n\n509\n00:28:29.680 --> 00:28:31.080\n>> Infrastructure master.\n\n510\n00:28:31.080 --> 00:28:32.470\n>> Three for your schema master.\n\n511\n00:28:32.470 --> 00:28:35.120\nFour for that domain naming master.\n\n512\n00:28:35.120 --> 00:28:36.910\nSo, in this case I wanna to seize.\n\n513\n00:28:36.910 --> 00:28:39.820\nRemember, I transferred\nthe RID Master to server one.\n\n514\n00:28:39.820 --> 00:28:42.055\nServer one's now the RID Master.\n\n515\n00:28:42.055 --> 00:28:45.430\nBut he's been, he had a hardware\nfailure is what we're pretending.\n\n516\n00:28:45.430 --> 00:28:47.600\nSo I wanna move it back, but\n\n517\n00:28:47.600 --> 00:28:50.990\nI have to seize it cuz the current\nrole holder is offline.\n\n518\n00:28:50.990 --> 00:28:54.520\nSo, operation master role one,\nand then dash force\n\n519\n00:28:54.520 --> 00:28:58.410\nto say I know you can't contact the\ncurrent role holder, move it back anyway.\n\n520\n00:28:58.410 --> 00:28:59.940\nAll right?\n\n521\n00:28:59.940 --> 00:29:00.780\nSo I hit return.\n\n522\n00:29:00.780 --> 00:29:05.127\nAnd it says do you want to move\nthe role RID Master server dc01.lab?\n\n523\n00:29:05.127 --> 00:29:06.730\nI'll say yes to all.\n\n524\n00:29:06.730 --> 00:29:07.230\nSo, A.\n\n525\n00:29:09.020 --> 00:29:11.320\nAnd it's gonna go ahead and\nseize that role.\n\n526\n00:29:11.320 --> 00:29:14.100\nNow, here's another thing\nthat we've gotta remember.\n\n527\n00:29:14.100 --> 00:29:18.400\nIf you're transferring the role,\nthen the current role holder and\n\n528\n00:29:18.400 --> 00:29:21.520\nthe new role holder are aware\nof the transfer, right?\n\n529\n00:29:21.520 --> 00:29:23.080\nSo the current role holder says,\n\n530\n00:29:23.080 --> 00:29:26.460\nokay, you can have it,\nI'm no longer the role holder.\n\n531\n00:29:26.460 --> 00:29:27.510\nI'm good to go.\n\n532\n00:29:27.510 --> 00:29:29.200\nIf you're seizing the role,\n\n533\n00:29:29.200 --> 00:29:34.680\nthough, the current roll holder has\nfailed and you're gonna move it anyway.\n\n534\n00:29:34.680 --> 00:29:37.458\nIn this case, dc01 is now the RID Master.\n\n535\n00:29:37.458 --> 00:29:42.050\nBut server 01 is unaware of\nthe fact that we seized that roll\n\n536\n00:29:42.050 --> 00:29:43.910\nbecause he's had that hardware failure.\n\n537\n00:29:43.910 --> 00:29:48.140\nSo if I fix him, let's say it was a power\nsupply, and I replace that power supply\n\n538\n00:29:48.140 --> 00:29:52.240\nand I bring him back online,\nnow I've got two RID Masters.\n\n539\n00:29:52.240 --> 00:29:55.070\nAnd these are single master operations for\na reason.\n\n540\n00:29:55.070 --> 00:29:57.280\nI cannot have two RID Masters.\n\n541\n00:29:57.280 --> 00:30:00.250\nSo, the rule is if you\never seize the role,\n\n542\n00:30:00.250 --> 00:30:03.760\ndo not bring the old\nrole holder back online.\n\n543\n00:30:03.760 --> 00:30:07.290\nYou can disconnect him from the network,\npower him up, and\n\n544\n00:30:07.290 --> 00:30:10.130\nthen remove Active Directory from it.\n\n545\n00:30:10.130 --> 00:30:12.490\nRemove any trace so he'll,\nit's like wiping his memory, right?\n\n546\n00:30:12.490 --> 00:30:15.680\nHe'll never remember that\nhe was ever a role holder.\n\n547\n00:30:15.680 --> 00:30:18.630\nThen you can reinstall Active Directory\nand make him a domain controller again.\n\n548\n00:30:18.630 --> 00:30:19.340\nThat's fine.\nHeck,\n\n549\n00:30:19.340 --> 00:30:21.720\nyou can even transfer the role\nback to him if you want,\n\n550\n00:30:21.720 --> 00:30:24.350\nif that was the machine\nyou want that role on.\n\n551\n00:30:24.350 --> 00:30:28.660\nBut just remember, if you seize the role\nyou cannot bring the original role holder\n\n552\n00:30:28.660 --> 00:30:34.390\nback online until you've removed any\ntrace that he was the role holder.\n\n553\n00:30:34.390 --> 00:30:35.920\nAll right?\n\n554\n00:30:35.920 --> 00:30:37.910\nAnd, there we're finished.\n\n555\n00:30:37.910 --> 00:30:43.902\nAnd if we did a git-ad domain,\nthe RID Master should now be dc01.\n\n556\n00:30:43.902 --> 00:30:48.980\nAnd then one other thing I wanna\nmention here is should you seize it?\n\n557\n00:30:48.980 --> 00:30:50.970\nThat's something that we've\ngot to think about, right?\n\n558\n00:30:50.970 --> 00:30:54.240\nLet's say that the machine that\nwas holding the role failed.\n\n559\n00:30:54.240 --> 00:30:57.450\nDo I panic and\nimmediately seize the role, or\n\n560\n00:30:57.450 --> 00:31:00.090\ndo I just wait and\nsee if I can't fix that machine?\n\n561\n00:31:00.090 --> 00:31:01.370\nPower supply will be here tomorrow.\n\n562\n00:31:01.370 --> 00:31:03.700\nI just fix the machine, right?\n\n563\n00:31:03.700 --> 00:31:04.960\nSo what do I do?\n\n564\n00:31:04.960 --> 00:31:05.870\nIt depends on the role.\n\n565\n00:31:05.870 --> 00:31:10.020\nIf it's the Schema Master, how often\ndo you make changes to the schema?\n\n566\n00:31:10.020 --> 00:31:11.550\nThat's what the Schema Master does, right?\n\n567\n00:31:11.550 --> 00:31:13.940\nIt's the writable copy of the schema.\n\n568\n00:31:13.940 --> 00:31:16.930\nSo if he fails,\nI'm really not that worried.\n\n569\n00:31:16.930 --> 00:31:21.400\nUnless I was planning to install Exchange\ntomorrow, then I'm okay with waiting a day\n\n570\n00:31:21.400 --> 00:31:25.000\nor two, bring him back online, and\nnot have to worry about seizing and\n\n571\n00:31:25.000 --> 00:31:27.940\nthen formatting that guy,\nor doing anything crazy.\n\n572\n00:31:27.940 --> 00:31:28.800\nThe domain naming master.\n\n573\n00:31:28.800 --> 00:31:32.740\nHis job is to make sure your names\nof your new domains are unique.\n\n574\n00:31:32.740 --> 00:31:36.230\nHow often do you build new\ndomains at your forest, right?\n\n575\n00:31:36.230 --> 00:31:40.130\nSo if he fails, I can probably\nwait until I get him back online.\n\n576\n00:31:40.130 --> 00:31:43.170\nThe RID Master, however,\nhe generates RIDs and\n\n577\n00:31:43.170 --> 00:31:45.510\nhe issues them out to domain\ncontrollers in blocks of 10.\n\n578\n00:31:45.510 --> 00:31:50.100\nSo as you make new objects, those\ndomain controllers run out of RID, and\n\n579\n00:31:50.100 --> 00:31:52.580\nthey go back to the RID Master and\nsay, hey, I need another block of 10.\n\n580\n00:31:52.580 --> 00:31:57.240\nWell, if the RID Master goes down and then\nthat domain controller runs out of RIDs,\n\n581\n00:31:57.240 --> 00:32:00.060\nI can no longer create new\nobjects until he does.\n\n582\n00:32:00.060 --> 00:32:03.420\nSo you might want to seize that role,\nor you maybe you tell everybody look,\n\n583\n00:32:03.420 --> 00:32:06.590\ndon't make any new objects\nuntil I get him back online.\n\n584\n00:32:06.590 --> 00:32:09.510\nThe infrastructure master,\nprobably not a big deal, either.\n\n585\n00:32:09.510 --> 00:32:11.180\nJust wait and get that guy back online.\n\n586\n00:32:11.180 --> 00:32:13.290\nThe PDC emulator, however,\n\n587\n00:32:13.290 --> 00:32:18.400\nthat's the one that you want to be worried\nabout.s Password changes go through there.\n\n588\n00:32:18.400 --> 00:32:21.220\nTime synchronization goes through there.\n\n589\n00:32:21.220 --> 00:32:25.360\nIf that guy fails, I can't have\nhim offline for very long, right?\n\n590\n00:32:25.360 --> 00:32:28.140\nI don't know when users are trying\nto change their passwords.\n\n591\n00:32:28.140 --> 00:32:30.410\nI need time to remain synchronized.\n\n592\n00:32:30.410 --> 00:32:33.590\nSo if that guy fails,\nI will probably seize that role.\n\n593\n00:32:33.590 --> 00:32:35.750\nAnd than if I ever have to bring that guy,\n\n594\n00:32:35.750 --> 00:32:40.140\nif I ever repair that server,\nI'll make sure that I demote him,\n\n595\n00:32:40.140 --> 00:32:43.510\nremove active directory,\nbefore I connect him back to my network.\n\n596\n00:32:43.510 --> 00:32:45.070\nSo think about what the role is,\n\n597\n00:32:45.070 --> 00:32:49.790\nand whether or not you can wait it out, or\nyou should go ahead and seize that role.\n\n598\n00:32:49.790 --> 00:32:50.760\n>> Excellent, Mike.\n\n599\n00:32:50.760 --> 00:32:54.350\nNow that again is a lot of material when\nwe start talking about active directory.\n\n600\n00:32:54.350 --> 00:32:56.681\nMost of us that end up\ndoing domain admin stuff,\n\n601\n00:32:56.681 --> 00:32:59.256\nwe're probably not gonna\ndo a lot with these roles.\n\n602\n00:32:59.256 --> 00:33:02.452\nBut it is important to understand\nat least the concepts behind them.\n\n603\n00:33:02.452 --> 00:33:04.510\nRemember that there are two\nforced wide roles and\n\n604\n00:33:04.510 --> 00:33:08.325\nthree of three of those domain roles that\nwe have to be aware of, and we really\n\n605\n00:33:08.325 --> 00:33:12.620\nwanna make sure that we pay attention\nwhen things happen that don't go our way,\n\n606\n00:33:12.620 --> 00:33:16.410\nsuch as a server going offline or\na domain controller going offline.\n\n607\n00:33:16.410 --> 00:33:19.730\nIf one of those domain controllers\nis actually having that role,\n\n608\n00:33:19.730 --> 00:33:21.590\nwe might wanna go ahead and seize it.\n\n609\n00:33:21.590 --> 00:33:24.820\nOr, if we know that we're gonna actually\nhave new machines come along, we may\n\n610\n00:33:24.820 --> 00:33:28.660\nchoose to actually transfer that role\nto a better performing machine as well.\n\n611\n00:33:28.660 --> 00:33:30.410\nBut it really depends on your context.\n\n612\n00:33:30.410 --> 00:33:33.390\nBut understanding those roles are really\ngonna be helpful as your domain\n\n613\n00:33:33.390 --> 00:33:34.580\ncontinues to grow.\n\n614\n00:33:34.580 --> 00:33:38.370\nYou gotta remember where these servers\nare gonna be because they are single\n\n615\n00:33:38.370 --> 00:33:42.100\nmaster roles, and\nthat is also a key for us as well.\n\n616\n00:33:42.100 --> 00:33:42.980\nAll right, Mike.\n\n617\n00:33:42.980 --> 00:33:44.710\nThat sounds like a great\nbunch of material.\n\n618\n00:33:44.710 --> 00:33:48.140\nThank you again for actually showing\nus and for helping us to understand how\n\n619\n00:33:48.140 --> 00:33:50.950\nimportant those roles are in\nan active directory domain.\n\n620\n00:33:50.950 --> 00:33:53.300\nThank you for being with us as well.\n\n621\n00:33:53.300 --> 00:33:54.980\nStay tuned for more ITProTV.\n\n622\n00:33:54.980 --> 00:33:56.670\nI'm your host, Ronnie Wong.\n\n623\n00:33:56.670 --> 00:33:57.870\n>> And I'm Mike Roderick.\n\n624\n00:33:57.870 --> 00:33:58.657\n>> See you next time.\n\n625\n00:33:58.657 --> 00:34:05.240\n[MUSIC]\n\n",
          "vimeoId": "145197735"
        },
        {
          "description": "In this episode, Ronnie and Mike dive into Active Directory Permissions.   These permissions are similar to NTFS permissions but provide better control over inheritance of permissions.  They emphasize the best practice when using these permissions and show how the delegation wizard works and how to extend the delegation wizard’s options.  As with any permissions in Windows, they guys emphasize best practices need to apply when working with AD permissions.",
          "length": "1812",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-4-1-permissions-111815-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-4-1-permissions-111815-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-4-1-permissions-111815-1-sm.jpg",
          "title": "AD Permissions",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:01.649\n[MUSIC]\n\n2\n00:00:01.649 --> 00:00:08.195\nWelcome to another exciting\nepisode right here on ITProTV.\n\n3\n00:00:08.195 --> 00:00:12.283\nI'm your host Ronnie Wong and\n\n4\n00:00:12.283 --> 00:00:20.440\ntoday we are going to be\nworking with Active Directory.\n\n5\n00:00:20.440 --> 00:00:23.540\nSpecifically talking about\nActive Directory permissions, and\n\n6\n00:00:23.540 --> 00:00:25.386\nwho's gonna actually help\nus out here is gonna be Mr.\n\n7\n00:00:25.386 --> 00:00:27.570\nMike Rodrick, because we talk about\nActive Directory permissions.\n\n8\n00:00:27.570 --> 00:00:30.310\nThis is his field, this is what he\nloves to, to do, and loves to explain.\n\n9\n00:00:30.310 --> 00:00:35.245\nSo, Mike, when we begin to talk about\nActive Directory permissions, right,\n\n10\n00:00:35.245 --> 00:00:38.265\nwhat we're really wanting\nto do is understand,\n\n11\n00:00:38.265 --> 00:00:41.010\nI know about NTFS\npermissions a little bit.\n\n12\n00:00:41.010 --> 00:00:42.450\nIs it the same thing?\n\n13\n00:00:42.450 --> 00:00:44.871\nOr are we talking about\nsomething different?\n\n14\n00:00:44.871 --> 00:00:46.533\n>> You know Ronnie,\nthat's a great question and\n\n15\n00:00:46.533 --> 00:00:48.290\nit's very similar to NTFS\nwhich is a good thing.\n\n16\n00:00:48.290 --> 00:00:51.373\nBecause if you are already\nfamiliar with NTFS permissions,\n\n17\n00:00:51.373 --> 00:00:55.665\nyou're gonna feel right at home working\nwith Active Directory permissions because\n\n18\n00:00:55.665 --> 00:00:57.430\nthey behave almost identically.\n\n19\n00:00:57.430 --> 00:00:59.202\nWe've got a few extra options and\n\n20\n00:00:59.202 --> 00:01:02.682\ndefinitely a lot of different\npermissions that we can work with,\n\n21\n00:01:02.682 --> 00:01:06.428\nbut other than that, they really do\nwork a lot like NTFS permissions.\n\n22\n00:01:06.428 --> 00:01:09.853\nSo, let's talk about, first thing is we\nneed to understand that everybody has\n\n23\n00:01:09.853 --> 00:01:11.500\naccess to Active Directory, right?\n\n24\n00:01:11.500 --> 00:01:15.640\nEvery user on your network has read\npermission over Active Directory.\n\n25\n00:01:15.640 --> 00:01:18.690\nBecause they need to be able to search\nthe directory, to find a coworker or\n\n26\n00:01:18.690 --> 00:01:20.090\nget their certificate.\n\n27\n00:01:20.090 --> 00:01:24.290\nOr find a printer that they wanna\nprint to, or whatever the case may be.\n\n28\n00:01:24.290 --> 00:01:27.900\nAnybody can actually go in and\nread Active Directory.\n\n29\n00:01:27.900 --> 00:01:31.280\nWhat we wanna talk about today when we\ntalk about these permissions is when we\n\n30\n00:01:31.280 --> 00:01:32.560\nstart delegating, right?\n\n31\n00:01:32.560 --> 00:01:35.590\nWhen we start giving other\npeople the ability to go in and\n\n32\n00:01:35.590 --> 00:01:39.190\nwork with objects in Active Directory,\nright?\n\n33\n00:01:39.190 --> 00:01:42.830\nAs our enterprise grows, and grows,\nand grows, we go from a few dozen\n\n34\n00:01:42.830 --> 00:01:46.190\nobjects to thousands,\nto hundreds of thousands of objects.\n\n35\n00:01:46.190 --> 00:01:48.740\nWe get large Active Directory\nenvironments.\n\n36\n00:01:48.740 --> 00:01:51.090\nAnd we really,\nit becomes more than a one-man job, right?\n\n37\n00:01:51.090 --> 00:01:53.565\nI need to be able to give other people\nthe ability to get in there and\n\n38\n00:01:53.565 --> 00:01:54.600\nwork in Active Directory.\n\n39\n00:01:54.600 --> 00:01:57.984\nAnd that's what we wanna take a look at.\n\n40\n00:01:57.984 --> 00:02:01.630\nI might that take sales OU,\nand I've got a sales manager.\n\n41\n00:02:01.630 --> 00:02:04.510\nAnd the turnover in the sales\ndepartment is a little high.\n\n42\n00:02:04.510 --> 00:02:06.350\nWe've got people coming and\ngoing all the time.\n\n43\n00:02:06.350 --> 00:02:09.842\nAnd every time he hires 50 people,\n30 of them stay, things like that.\n\n44\n00:02:09.842 --> 00:02:13.565\nSomebody's gotta go in and\ncreate all those new accounts, and\n\n45\n00:02:13.565 --> 00:02:17.230\nthen remove the ones that didn't\nshow up or didn't work out.\n\n46\n00:02:17.230 --> 00:02:21.446\nAnd it's a constant daily job,\nor it's a pretty big job.\n\n47\n00:02:21.446 --> 00:02:25.821\nAnd so what I could so, say look, I'm\ngonna give that sales manager the ability\n\n48\n00:02:25.821 --> 00:02:28.590\nto create accounts in Active Directory.\n\n49\n00:02:28.590 --> 00:02:33.120\nOr delete accounts in Active Directory,\nor change passwords on these guys,\n\n50\n00:02:33.120 --> 00:02:33.920\nlike my help desk.\n\n51\n00:02:33.920 --> 00:02:36.710\nI want them to be able\nto change passwords, but\n\n52\n00:02:36.710 --> 00:02:40.680\nI want to do it in a way where\nI can limit what they can do.\n\n53\n00:02:40.680 --> 00:02:43.870\nYeah, that sales manager can create\nnew accounts for sales people,\n\n54\n00:02:43.870 --> 00:02:46.030\nright, in that sales OU.\n\n55\n00:02:46.030 --> 00:02:49.840\nNot in any of the other OUs,\nnot in places that he doesn't need to be.\n\n56\n00:02:49.840 --> 00:02:54.200\nI need that help desk to be able to reset\npasswords before my standard users.\n\n57\n00:02:54.200 --> 00:02:57.040\nI don't want my help desk to\nbe able to reset passwords for\n\n58\n00:02:57.040 --> 00:02:58.340\nthe domain admin account.\n\n59\n00:02:58.340 --> 00:03:00.360\nSo they can reset it to\nsomething that they know and\n\n60\n00:03:00.360 --> 00:03:02.160\nthen they can log on as domain admin.\n\n61\n00:03:02.160 --> 00:03:04.840\nSo you've got to be able to work with\nthese permissions and delegate out these\n\n62\n00:03:04.840 --> 00:03:08.790\npermissions, but do it in a way that we\ncan limit what they have and control it.\n\n63\n00:03:08.790 --> 00:03:09.880\nAnd like I said,\n\n64\n00:03:09.880 --> 00:03:13.900\nit's easy to do we're going to show you\na couple of different ways we can do that.\n\n65\n00:03:13.900 --> 00:03:17.634\nAnd if you're familiar with NTFS,\nyou're halfway there.\n\n66\n00:03:17.634 --> 00:03:20.201\n>> Dealing with NTSF like I said I\nnever really dealt with the idea of\n\n67\n00:03:20.201 --> 00:03:22.360\nActive Directory permissions too much.\n\n68\n00:03:22.360 --> 00:03:24.930\nDo we still have to worry about\nthings like best practices?\n\n69\n00:03:24.930 --> 00:03:26.690\nWe talked about it with NTFS.\n\n70\n00:03:26.690 --> 00:03:30.420\nWe'd rather actually set permissions\non groups rather than individuals.\n\n71\n00:03:30.420 --> 00:03:31.810\nIs that what we also have to do?\n\n72\n00:03:31.810 --> 00:03:32.420\n>> Absolutely.\n\n73\n00:03:32.420 --> 00:03:35.540\nWe really wanna make sure we're\nfollowing those best practices.\n\n74\n00:03:35.540 --> 00:03:38.710\nAnd let's go through a couple of those\nbest practices as we take a look at\n\n75\n00:03:38.710 --> 00:03:39.690\nthese permissions.\n\n76\n00:03:39.690 --> 00:03:42.470\nCuz remember I said there\nare some differences from NTFS.\n\n77\n00:03:42.470 --> 00:03:45.330\nSo first thing I'm gonna do is\nsimply open up Active Directory.\n\n78\n00:03:45.330 --> 00:03:49.990\nSo I'm gonna come in here and launch\nActive directory users and computers.\n\n79\n00:03:49.990 --> 00:03:53.230\nAnd here's my little domain that I have.\n\n80\n00:03:53.230 --> 00:03:58.220\nAnd as we go through here, if I take like,\nlet's look at an account, for example.\n\n81\n00:03:58.220 --> 00:04:01.950\nSo I'll go into this developer's OU,\nand I'll grab an account here.\n\n82\n00:04:01.950 --> 00:04:05.930\nAnd when I pull up the properties for\nthat account,\n\n83\n00:04:05.930 --> 00:04:09.530\nyou'll see that I don't\nhave a Security tab.\n\n84\n00:04:09.530 --> 00:04:10.730\nRemember, just like with NTFS,\n\n85\n00:04:10.730 --> 00:04:13.700\nwe've got that Security tab on\nour files and folders, that's our\n\n86\n00:04:13.700 --> 00:04:17.920\nAccess Control List where we control the\npermissions over those files and folders.\n\n87\n00:04:17.920 --> 00:04:22.310\nIt's the same thing here, but\nyou don't see that tab by default.\n\n88\n00:04:22.310 --> 00:04:26.270\nIn order to see it, I have to\nactually go up to my View menu and\n\n89\n00:04:26.270 --> 00:04:27.780\nturn on my Advanced Features.\n\n90\n00:04:27.780 --> 00:04:32.910\nSoon as I do that, we can navigate\nback down into that same OU,\n\n91\n00:04:32.910 --> 00:04:37.630\nfind that same account, and\nyou'll see I get several additional tabs.\n\n92\n00:04:37.630 --> 00:04:40.500\nOne of them being my Security tab.\n\n93\n00:04:40.500 --> 00:04:45.470\nAnd here is where I can control the\npermissions over this particular object.\n\n94\n00:04:45.470 --> 00:04:48.820\nAnd as we scroll down,\njust like any other access control list,\n\n95\n00:04:48.820 --> 00:04:53.000\nI've got my access control entries or\nmy ACEs that exist here, so\n\n96\n00:04:53.000 --> 00:04:56.480\nI can see that the administrators,\nand what permissions they have.\n\n97\n00:04:56.480 --> 00:05:01.420\nSo that part, just like NTFS,\nI can click Add or Remove to add a user or\n\n98\n00:05:01.420 --> 00:05:05.070\nadd a group, or remove somebody.\n\n99\n00:05:05.070 --> 00:05:08.272\nAnd we can assign permissions.\n\n100\n00:05:08.272 --> 00:05:10.741\nNow, let's just say I wanna go in here and\ngive,\n\n101\n00:05:10.741 --> 00:05:12.980\nwe'll just use Ronnie's account for now.\n\n102\n00:05:12.980 --> 00:05:13.950\nWe'll do little check names.\n\n103\n00:05:13.950 --> 00:05:17.693\nAnd I'm just doing this to\nshow you the permissions,\n\n104\n00:05:17.693 --> 00:05:20.420\nnot to give Ronnie any permissions.\n\n105\n00:05:20.420 --> 00:05:22.640\nI'll explain that in just a second.\n\n106\n00:05:22.640 --> 00:05:25.141\nSo I click Add and then I'm gonna click or\n\n107\n00:05:25.141 --> 00:05:29.349\nscroll down through these permissions\nhere and let's take a look.\n\n108\n00:05:29.349 --> 00:05:32.706\nUnlike NTFS where we have basically full\ncontrol, modify, list folder contents,\n\n109\n00:05:32.706 --> 00:05:34.090\nread, write, read and execute.\n\n110\n00:05:34.090 --> 00:05:36.150\nHere you'll see I have\na few more permissions.\n\n111\n00:05:36.150 --> 00:05:40.880\nAnd I'm trying to see if I\ncan scroll slowly enough.\n\n112\n00:05:40.880 --> 00:05:44.500\nYou can see like Create all child objects,\nDelete child objects,\n\n113\n00:05:44.500 --> 00:05:49.540\nChange password, and\nI'm not gonna read all of these to you,\n\n114\n00:05:49.540 --> 00:05:52.870\nbut you can see the list is pretty long,\nright?\n\n115\n00:05:52.870 --> 00:05:55.180\nAnd that's just on my standard view.\n\n116\n00:05:55.180 --> 00:05:56.210\nIf I click Advanced.\n\n117\n00:05:56.210 --> 00:06:00.119\nAnd then it locks up-\n>> [LAUGH]\n\n118\n00:06:00.119 --> 00:06:01.670\n>> As it thinks about it.\n\n119\n00:06:01.670 --> 00:06:05.280\n[LAUGH] Because there's so many darn\nprovisions that it has to load up.\n\n120\n00:06:05.280 --> 00:06:06.640\nNo, it's slowly pulling that up.\n\n121\n00:06:06.640 --> 00:06:07.590\nWow.\n\n122\n00:06:07.590 --> 00:06:08.240\nTake an assignment.\n\n123\n00:06:08.240 --> 00:06:09.520\nWe get into our advanced view.\n\n124\n00:06:09.520 --> 00:06:10.501\nJust like with NTFS,\n\n125\n00:06:10.501 --> 00:06:14.180\nwe've got that advanced view that\ngives us a more granular control.\n\n126\n00:06:14.180 --> 00:06:18.468\nWhen we look at permissions in\nActive Directory, when we take a look at\n\n127\n00:06:18.468 --> 00:06:23.500\nthe permissions over a particular object,\neach object has attributes, right?\n\n128\n00:06:23.500 --> 00:06:24.800\nThings that describe that object.\n\n129\n00:06:24.800 --> 00:06:28.656\nLike a user account has a first name,\na last name, a phone number, a city,\n\n130\n00:06:28.656 --> 00:06:30.570\na state, a managed by, a password.\n\n131\n00:06:30.570 --> 00:06:32.980\nWell, each of of those is an attribute.\n\n132\n00:06:32.980 --> 00:06:37.010\nYou can actually assign permissions\nover individual attributes.\n\n133\n00:06:37.010 --> 00:06:38.410\n>> Wow.\n>> It gets a little bit-\n\n134\n00:06:38.410 --> 00:06:39.030\n>> Granular.\n\n135\n00:06:39.030 --> 00:06:42.430\n>> Yeah, it does definitely\nget a little bit granular.\n\n136\n00:06:42.430 --> 00:06:43.610\nIf we click Add here, and\n\n137\n00:06:43.610 --> 00:06:46.740\nI apologize I don't know why\nmy machine is going so slow.\n\n138\n00:06:46.740 --> 00:06:49.108\nYou can see by the size of the scroll bar,\n\n139\n00:06:49.108 --> 00:06:52.601\nto get that to light up just let\nme select a principal again.\n\n140\n00:06:52.601 --> 00:06:58.020\nAnd I'm just using Ronnie's\naccount to get things started.\n\n141\n00:06:58.020 --> 00:07:00.800\nYou can see the size of\nthe scroll bar is pretty small.\n\n142\n00:07:00.800 --> 00:07:03.850\nI've got a lot of scrolling that I can do.\n\n143\n00:07:03.850 --> 00:07:07.250\nAnd there's all my standard permissions\nthat we would see in that first page but\n\n144\n00:07:07.250 --> 00:07:10.600\nthen as I go down through here.\n\n145\n00:07:10.600 --> 00:07:14.320\nYou'll see that every attribute\nhas a set of permissions.\n\n146\n00:07:15.490 --> 00:07:19.940\nThe way they arrange, when we talk about\nassigning permissions over these objects,\n\n147\n00:07:19.940 --> 00:07:23.800\nthat you can assign permissions to\nan individual attribute like phone number,\n\n148\n00:07:23.800 --> 00:07:28.710\nhome phone, or work phone, or, sometimes\nthey'll have groups that we can use.\n\n149\n00:07:28.710 --> 00:07:32.030\nAnd it just simplifies\nthe assigning of the permissions.\n\n150\n00:07:32.030 --> 00:07:35.590\nLike here's one,\nwrite phone and mail options.\n\n151\n00:07:35.590 --> 00:07:38.500\nSo if I gave somebody\nthe ability to write phone and\n\n152\n00:07:38.500 --> 00:07:42.740\nmail options, then they could change your\nphone numbers, including your home phone,\n\n153\n00:07:42.740 --> 00:07:44.540\nyour work phone, your mobile phone.\n\n154\n00:07:44.540 --> 00:07:47.370\nThey could do your emails,\nyour alternate email addresses, right,\n\n155\n00:07:47.370 --> 00:07:48.800\nall of those attributes.\n\n156\n00:07:48.800 --> 00:07:52.181\nBut if we scroll down far enough, and I\ndon't know if I can even find it in here,\n\n157\n00:07:52.181 --> 00:07:52.860\nwe could find.\n\n158\n00:07:52.860 --> 00:07:57.005\nLet's see here.\n\n159\n00:07:57.005 --> 00:07:59.212\nAnd I know that's kind of\nblurred on here as I scroll.\n\n160\n00:07:59.212 --> 00:08:02.629\nYou know here's a Write just fax number.\n\n161\n00:08:02.629 --> 00:08:04.647\nRight?\nSo if instead of doing phone and\n\n162\n00:08:04.647 --> 00:08:05.427\nmail options,\n\n163\n00:08:05.427 --> 00:08:09.830\nif I just want you to change the fax\nnumber I can give you that permission.\n\n164\n00:08:09.830 --> 00:08:13.360\nNow Ronny it's not all that common\nthat I give somebody permission\n\n165\n00:08:13.360 --> 00:08:17.960\nto just change their fax number, but\nthe fact that we can do it is important.\n\n166\n00:08:17.960 --> 00:08:21.570\nWell Mike let me understand the concept\nhere because I may be getting a bit lost.\n\n167\n00:08:21.570 --> 00:08:23.400\nSo if you were to assign\nthat permission to me.\n\n168\n00:08:23.400 --> 00:08:27.630\nI don't know why you would but\nthe write, just the fax number.\n\n169\n00:08:27.630 --> 00:08:32.950\nThat means on every group or\nevery single user I could actually go in\n\n170\n00:08:32.950 --> 00:08:36.000\nsince you've delegated that to me and\nI could change their fax number.\n\n171\n00:08:36.000 --> 00:08:36.808\nThat's what we're talking about.\n\n172\n00:08:36.808 --> 00:08:37.482\n>> That's exactly right.\n\n173\n00:08:37.482 --> 00:08:38.617\n>> Okay.\n>> In this case,\n\n174\n00:08:38.617 --> 00:08:40.620\nit would be just Angie's account, right?\n\n175\n00:08:40.620 --> 00:08:45.807\nBecause I'm on the properties of\nthat object and I could check write\n\n176\n00:08:45.807 --> 00:08:51.456\nfax number or write fax number others,\nand that was all you could change.\n\n177\n00:08:51.456 --> 00:08:54.560\nYou could open that account up and you\ncould see all the other attributes, but\n\n178\n00:08:54.560 --> 00:08:56.200\nit wouldn't let you change any of them.\n\n179\n00:08:56.200 --> 00:08:58.460\nThe only one you could change\nwould be that fax number.\n\n180\n00:08:58.460 --> 00:09:01.410\nSo again, not all that common, but hey,\n\n181\n00:09:01.410 --> 00:09:04.460\nmaybe you're gonna hire a temp\nemployee to do some data entry.\n\n182\n00:09:04.460 --> 00:09:08.110\nAnd you need to go through and\nupdate all of the mobile numbers for\n\n183\n00:09:08.110 --> 00:09:09.830\nall of these user accounts.\n\n184\n00:09:09.830 --> 00:09:11.730\nI don't want them changing anything else.\n\n185\n00:09:11.730 --> 00:09:14.540\nAll I want them doing is\nchanging that mobile number.\n\n186\n00:09:14.540 --> 00:09:17.160\nWe want to start keeping track of\nemployee's cell phone numbers or\n\n187\n00:09:17.160 --> 00:09:18.250\nmobile numbers.\n\n188\n00:09:18.250 --> 00:09:18.850\nI can do that.\n\n189\n00:09:18.850 --> 00:09:21.790\nI can give them that permission and\nthat's all they can change.\n\n190\n00:09:21.790 --> 00:09:23.480\nThey can't change anything else.\n\n191\n00:09:23.480 --> 00:09:26.810\nThat's what great about this,\nI can really limit what they can do.\n\n192\n00:09:26.810 --> 00:09:29.420\nSo as I say it's not\nthe most common thing, but\n\n193\n00:09:29.420 --> 00:09:34.230\nthere are gonna be some scenarios when you\nmight need that granular level of control.\n\n194\n00:09:34.230 --> 00:09:36.936\n>> Now, Mike if you were to do this.\n\n195\n00:09:36.936 --> 00:09:39.816\nIf you were to assign that to me, again\nlike I said I don't know why you would.\n\n196\n00:09:39.816 --> 00:09:43.158\nBut if you were to does it take time for\nit to replicate throughout the active\n\n197\n00:09:43.158 --> 00:09:46.330\ndirectory and take place or\nis this almost an immediate change?\n\n198\n00:09:46.330 --> 00:09:47.310\n>> Almost immediate.\n\n199\n00:09:47.310 --> 00:09:50.970\nAnd we're going to talk a little bit\nin other episodes about replication.\n\n200\n00:09:50.970 --> 00:09:55.047\nThat access control, that change that you\nmade to the access control list is going\n\n201\n00:09:55.047 --> 00:09:57.792\nto have to replicate to\nthe other domain controllers.\n\n202\n00:09:57.792 --> 00:10:01.770\nSo there's going to be a period of\ntime where if you happen to remote\n\n203\n00:10:01.770 --> 00:10:04.420\ninto that domain controller\nyou'd have the permission.\n\n204\n00:10:04.420 --> 00:10:07.710\nBut if you remote into a domain\ncontroller in a different site,\n\n205\n00:10:07.710 --> 00:10:10.430\nyou might not have that permission yet,\nso, and it might not see that.\n\n206\n00:10:10.430 --> 00:10:12.500\nSo that is something that\nyou have to take in mind,\n\n207\n00:10:12.500 --> 00:10:16.090\nit might take a little bit for\nthe permission to replicate around.\n\n208\n00:10:16.090 --> 00:10:19.850\nAnd back to those best practices\nthat Ronnie was mentioning.\n\n209\n00:10:19.850 --> 00:10:21.050\nJust like with NTFS,\n\n210\n00:10:21.050 --> 00:10:26.020\nwe want to make sure that we're assigning\npermissions to groups not to users, right?\n\n211\n00:10:26.020 --> 00:10:29.140\nBecause of the ease of administration and\n\n212\n00:10:29.140 --> 00:10:33.270\nbecause it makes it so much easier to\ntroubleshoot and to change, right?\n\n213\n00:10:33.270 --> 00:10:36.870\nIf I assign a permission, right,\nyou saw all those little tiny, you know,\n\n214\n00:10:36.870 --> 00:10:38.505\nthose hundreds of check\nmarks that I had there.\n\n215\n00:10:38.505 --> 00:10:40.450\n>> [LAUGH]\n>> If I take all the time or\n\n216\n00:10:40.450 --> 00:10:43.710\ntake this time to assign that permission\nto Ronnie, you know, picking all\n\n217\n00:10:43.710 --> 00:10:46.850\nthe right check marks so that Ronnie can\ndo whatever he it is he needs to do.\n\n218\n00:10:46.850 --> 00:10:49.290\nWell, what happens when somebody\nelse needs those same permissions?\n\n219\n00:10:49.290 --> 00:10:52.730\nNow I've got to go through that\nwhole process again and figure out\n\n220\n00:10:52.730 --> 00:10:56.650\nwhich permissions I need to assign out of\nthe hundreds of permissions there are.\n\n221\n00:10:56.650 --> 00:10:58.520\nAnd I've gotta do it again.\n\n222\n00:10:58.520 --> 00:11:00.160\nIf I would have done\nthat to a group instead,\n\n223\n00:11:00.160 --> 00:11:03.030\nI could just add this new\nperson to that group.\n\n224\n00:11:03.030 --> 00:11:04.910\nIf Ronnie doesn't need\nthose permissions any more,\n\n225\n00:11:04.910 --> 00:11:08.740\nI can just remove Ronnie from that group\nand he no longer has the permissions.\n\n226\n00:11:08.740 --> 00:11:10.610\nSo just like with NTFS,\n\n227\n00:11:10.610 --> 00:11:14.320\nalways assign permissions to groups,\nnot to individual users.\n\n228\n00:11:14.320 --> 00:11:16.580\nEven if it's just one person, right?\n\n229\n00:11:16.580 --> 00:11:20.680\nCreate a group, put that person in there\nand assign the permissions to the group.\n\n230\n00:11:20.680 --> 00:11:22.680\nThat way in the future if\nsomebody else needs them,\n\n231\n00:11:22.680 --> 00:11:23.580\nyou just add them to the group.\n\n232\n00:11:23.580 --> 00:11:24.780\nIf somebody doesn't need them any longer,\n\n233\n00:11:24.780 --> 00:11:28.510\nyou're just going to take\nthem out of that group.\n\n234\n00:11:28.510 --> 00:11:32.010\nNow, Mike, while you were talking I just\nthought of a question on this that I think\n\n235\n00:11:32.010 --> 00:11:33.380\nmight be helpful.\n\n236\n00:11:33.380 --> 00:11:35.880\nJust like what you're saying, if you\nassign it to me and then you go, look,\n\n237\n00:11:35.880 --> 00:11:38.740\nI'd rather create a group\nwith all those permissions\n\n238\n00:11:38.740 --> 00:11:41.980\nis there something like the resultant\nset of policy that allows us to see.\n\n239\n00:11:41.980 --> 00:11:45.654\nHey, I did assign Ronnie the ability\nto change people's fax numbers.\n\n240\n00:11:45.654 --> 00:11:48.760\n[LAUGH] And\nthat way you're not having to scroll\n\n241\n00:11:48.760 --> 00:11:50.350\nthrough my permission list to do so.\n\n242\n00:11:50.350 --> 00:11:50.890\n>> Yeah, there is.\n\n243\n00:11:50.890 --> 00:11:54.065\nIf you can, and I'll pull up\nthe properties of an OU this time, and\n\n244\n00:11:54.065 --> 00:11:55.500\nthere's that security tab.\n\n245\n00:11:55.500 --> 00:11:57.280\nAnd they're gonna be\na little bit different.\n\n246\n00:11:57.280 --> 00:11:58.600\nThis is an OU, not a user.\n\n247\n00:11:58.600 --> 00:12:01.650\nSo there's not as many permissions,\nbecause an OU doesn't\n\n248\n00:12:01.650 --> 00:12:04.900\nhave phone numbers and fax numbers and\nmanaged by and things like that, right?\n\n249\n00:12:04.900 --> 00:12:07.450\nBut, absolutely,\nif we go into the Advanced tab,\n\n250\n00:12:07.450 --> 00:12:09.820\nwe can still use our effective access.\n\n251\n00:12:09.820 --> 00:12:12.380\nSo if I want to, say, select a user and\n\n252\n00:12:12.380 --> 00:12:18.070\nfind out what permissions Ronnie has\nover this object, I can still do that.\n\n253\n00:12:18.070 --> 00:12:22.410\nAnd it shows you,\nyou can see how long that list is.\n\n254\n00:12:22.410 --> 00:12:24.520\nThere's a lot of permissions to examine.\n\n255\n00:12:24.520 --> 00:12:26.230\nSo it's gonna show me\nexactly what Ronny has.\n\n256\n00:12:26.230 --> 00:12:30.150\nAnd again we really should be\ndoing a group instead of a user.\n\n257\n00:12:30.150 --> 00:12:34.840\nThe other thing that's\na little bit different from\n\n258\n00:12:34.840 --> 00:12:37.670\nNTFS permissions is our ability\nto control the inheritance.\n\n259\n00:12:37.670 --> 00:12:38.750\nRight?\nWith NTFS,\n\n260\n00:12:38.750 --> 00:12:42.980\nwe're always trying to apply the\npermissions at the highest level we can\n\n261\n00:12:42.980 --> 00:12:45.530\nand let inheritance do\nthe bulk of the work.\n\n262\n00:12:45.530 --> 00:12:48.420\nAnd if I've got 100 documents that\nI need to give permissions to to\n\n263\n00:12:48.420 --> 00:12:52.550\nthe sales department, well I want to put\nall those 100 documents in a folder,\n\n264\n00:12:52.550 --> 00:12:55.480\nassign the permissions once\nat the folder level and\n\n265\n00:12:55.480 --> 00:12:59.790\nlet it inherit down into all of\nthe objects inside there, right.\n\n266\n00:12:59.790 --> 00:13:03.310\nAnd the same thing holds true for Active\nDirectory, we've got that inheritance.\n\n267\n00:13:03.310 --> 00:13:05.990\nWe can block inheritance with NTFS.\n\n268\n00:13:05.990 --> 00:13:08.510\nWe can also block inheritance here.\n\n269\n00:13:08.510 --> 00:13:10.170\nBut let me show you if I click Add, and\n\n270\n00:13:10.170 --> 00:13:14.710\nI'm gonna find my,\nlet's do the London help desk or somebody.\n\n271\n00:13:14.710 --> 00:13:17.780\nIf I'm gonna add that London help desk.\n\n272\n00:13:17.780 --> 00:13:22.530\nAnd if I go into Advanced, and\nagain, it's taking its sweet time,\n\n273\n00:13:22.530 --> 00:13:23.840\nI don't know why, pulling up my Advanced.\n\n274\n00:13:23.840 --> 00:13:27.090\nWhat I want to show you is that we've\ngot a little bit more control over\n\n275\n00:13:27.090 --> 00:13:29.680\nhow the permissions actually apply.\n\n276\n00:13:29.680 --> 00:13:33.888\nAnd we got a handy drop down list if\nyou can get to that drop down list.\n\n277\n00:13:33.888 --> 00:13:37.040\n[LAUGH] So\nwe'll give it a second to pull that up.\n\n278\n00:13:37.040 --> 00:13:38.631\n>> While we're waiting though,\n\n279\n00:13:38.631 --> 00:13:42.740\ndo we have something like the command\nline like what we're talking about here.\n\n280\n00:13:42.740 --> 00:13:46.020\nLike GP result or anything that\npulls something up like this?\n\n281\n00:13:46.020 --> 00:13:47.814\n>> I believe you can use or\n\n282\n00:13:47.814 --> 00:13:52.649\nsomething like that if you want to view\nthose permissions from the command prompt.\n\n283\n00:13:52.649 --> 00:13:55.876\n>> [LAUGH]\n>> [LAUGH] [CROSSTALK]\n\n284\n00:13:55.876 --> 00:13:57.012\n>> Good to know, good to know.\n\n285\n00:13:57.012 --> 00:13:59.940\nAll right, so\nthere's my disabled inheritance.\n\n286\n00:13:59.940 --> 00:14:02.690\nThat will work just like our NTFS so\n\n287\n00:14:02.690 --> 00:14:06.060\nI can block permissions\ncoming from a higher level.\n\n288\n00:14:06.060 --> 00:14:08.940\nBut when I go to add a permission,\nand again,\n\n289\n00:14:08.940 --> 00:14:11.350\nI'm gonna use that London help desk here.\n\n290\n00:14:13.280 --> 00:14:16.280\nYou can see I've got Allow or Deny, right?\n\n291\n00:14:16.280 --> 00:14:16.970\nJust like NTFS.\n\n292\n00:14:16.970 --> 00:14:21.540\nBut below this, I've got this drop-down\nlist and you can see it's a large,\n\n293\n00:14:21.540 --> 00:14:22.570\nlarge list, right?\n\n294\n00:14:22.570 --> 00:14:24.877\nAnd I'm not gonna go through\nevery one of them, but\n\n295\n00:14:24.877 --> 00:14:26.926\nthere are a couple of\nthat I want to point out.\n\n296\n00:14:26.926 --> 00:14:31.879\nThis object only, I've right-clicked\non an OU, and pulled up its properties.\n\n297\n00:14:32.940 --> 00:14:34.590\nRight?\nAnd if I say I want\n\n298\n00:14:34.590 --> 00:14:37.440\nto give Ronnie the ability\nto edit this object, but\n\n299\n00:14:37.440 --> 00:14:41.830\nthis object only, then it's not going to\ninherit down to the child objects, right?\n\n300\n00:14:41.830 --> 00:14:44.800\nSo, it's kind of like blocking\ninheritance in a way.\n\n301\n00:14:44.800 --> 00:14:48.160\nYou're just saying, I'm gonna assign\npermissions to Ronnie over this OU,\n\n302\n00:14:48.160 --> 00:14:50.570\nbut nothing inside the OU.\n\n303\n00:14:50.570 --> 00:14:53.350\nRight?\nSometimes we'll do that on accounts.\n\n304\n00:14:53.350 --> 00:14:56.810\nI might give the help desk\nthe ability to work on that account,\n\n305\n00:14:56.810 --> 00:14:58.550\nbut this object only.\n\n306\n00:14:58.550 --> 00:14:59.970\nThis object and descendant objects.\n\n307\n00:14:59.970 --> 00:15:02.120\nThat's my normal behavior, right?\n\n308\n00:15:02.120 --> 00:15:06.860\nGonna assign it here and I want it to\ninherit all the objects inside there.\n\n309\n00:15:06.860 --> 00:15:08.790\nThis one, though,\nis a different one from NTFS.\n\n310\n00:15:08.790 --> 00:15:12.110\nAnd it's pretty cool,\nit's all descendant objects.\n\n311\n00:15:12.110 --> 00:15:16.010\nLet's say I wanna delegate to that\nLondon help desk the ability to,\n\n312\n00:15:16.010 --> 00:15:19.490\nI wanna give them full control over\nthe user accounts inside that OU.\n\n313\n00:15:19.490 --> 00:15:25.360\nBut what I don't want is them to be\nable to mess with the OU itself.\n\n314\n00:15:25.360 --> 00:15:25.890\nRight?\n\n315\n00:15:25.890 --> 00:15:26.780\nThey're not at that level.\n\n316\n00:15:26.780 --> 00:15:27.380\nThey're help desk.\n\n317\n00:15:27.380 --> 00:15:30.590\nI want them to be able to work with\nthose objects inside the OU, but\n\n318\n00:15:30.590 --> 00:15:35.230\nI don't want them to have permissions\nover the OU object itself.\n\n319\n00:15:35.230 --> 00:15:39.760\nWell, I could assign the permissions\ndirectly to the user accounts.\n\n320\n00:15:39.760 --> 00:15:42.750\nNot saying assign them to, but\ngo to the objects in the OU, and\n\n321\n00:15:42.750 --> 00:15:47.030\none at a time give help desk\npermission over those objects in there.\n\n322\n00:15:47.030 --> 00:15:48.921\nThat's not gonna work,\nI wanna use inheritance.\n\n323\n00:15:48.921 --> 00:15:53.230\nSo I can go to the OU, assign the\npermission that I want them to have over\n\n324\n00:15:53.230 --> 00:15:57.045\nthe objects inside the OU, but\nsay only descendent objects.\n\n325\n00:15:57.045 --> 00:16:00.160\nThat way new accounts that get put in\nthere will automatically have permissions\n\n326\n00:16:00.160 --> 00:16:00.680\nover there.\n\n327\n00:16:00.680 --> 00:16:03.671\nBut that OU,\nthey won't have permissions over that.\n\n328\n00:16:03.671 --> 00:16:04.712\nDoes that make sense Ronnie?\n\n329\n00:16:04.712 --> 00:16:06.480\n>> It really does.\n\n330\n00:16:06.480 --> 00:16:08.310\nYeah it seems like this\nis the greatest way for\n\n331\n00:16:08.310 --> 00:16:11.290\nus to make sure that we have\nthe management that we need.\n\n332\n00:16:11.290 --> 00:16:14.350\nBut we also see that there's so\nmuch control.\n\n333\n00:16:14.350 --> 00:16:15.710\n>> This is where I would get confused,\n\n334\n00:16:15.710 --> 00:16:18.620\nMike, is trying to figure out\nexactly what I need to do.\n\n335\n00:16:18.620 --> 00:16:22.490\nIs there a tool inside of Active Directory\nthat will allow me to kinda\n\n336\n00:16:22.490 --> 00:16:23.490\nmake this easier?\n\n337\n00:16:23.490 --> 00:16:24.560\n>> There is, thankfully.\n\n338\n00:16:24.560 --> 00:16:26.180\n>> [LAUGH]\n>> There's a great tool.\n\n339\n00:16:26.180 --> 00:16:28.340\nYou know,\none more thing I'll point out here.\n\n340\n00:16:28.340 --> 00:16:31.940\nYou can do like descend an account object\n>> Or descend a computer object.\n\n341\n00:16:31.940 --> 00:16:36.338\nYou might have an OU that has both user\naccounts and computer accounts in it.\n\n342\n00:16:36.338 --> 00:16:39.350\nAnd I wanna give that help desk\npermissions over the user accounts\n\n343\n00:16:39.350 --> 00:16:39.950\nin that OU.\n\n344\n00:16:39.950 --> 00:16:42.430\nBut not the computer accounts in that OU.\n\n345\n00:16:42.430 --> 00:16:47.200\nSo I can say all descendent\naccount objects, right.\n\n346\n00:16:47.200 --> 00:16:49.110\nOr we can find users or just computer.\n\n347\n00:16:49.110 --> 00:16:53.930\nSo again the level of control\nyou have is fantastic.\n\n348\n00:16:53.930 --> 00:16:56.610\nBut what Ronnie's saying is,\nthis looks like a pain in the butt.\n\n349\n00:16:56.610 --> 00:16:57.123\nAnd it is.\n>> [LAUGH]\n\n350\n00:16:57.123 --> 00:16:59.780\n>> Try to figure out what permissions I\n\n351\n00:16:59.780 --> 00:17:03.240\nneed, I want them to be able to modify or\nreset passwords.\n\n352\n00:17:03.240 --> 00:17:05.260\nWhat permissions do I need to give them?\n\n353\n00:17:05.260 --> 00:17:06.250\n>> I wouldn't have a clue.\n\n354\n00:17:06.250 --> 00:17:08.620\n>> I mean all that MSDS blahblah,\nall that stuff right?\n\n355\n00:17:08.620 --> 00:17:12.000\nHow do I actually know\nwhat permissions they\n\n356\n00:17:12.000 --> 00:17:15.100\nneed to perform the job\nthat I want them to do?\n\n357\n00:17:15.100 --> 00:17:18.230\nLuckily for us,\nthere's a delegation wizard.\n\n358\n00:17:18.230 --> 00:17:19.760\nAnd it's the best thing ever, right?\n\n359\n00:17:19.760 --> 00:17:23.762\nWe can just go through this wizard and say\nthis who I wanna give the permissions to,\n\n360\n00:17:23.762 --> 00:17:26.024\nthis is what permissions\nI want them to have and\n\n361\n00:17:26.024 --> 00:17:29.103\nyou take care of figuring out\nwhat the heck that means, right?\n\n362\n00:17:29.103 --> 00:17:31.600\nLet that wizard do the job for me.\n\n363\n00:17:31.600 --> 00:17:33.378\nAnd let me show you how\nthat guy works here.\n\n364\n00:17:33.378 --> 00:17:37.380\nWhat I wanna do, I've got a couple groups,\nI've got corporate helpdesk and\n\n365\n00:17:37.380 --> 00:17:41.990\nI've got a helpdesk for each location,\nG and V, London, and New York.\n\n366\n00:17:41.990 --> 00:17:45.792\nAnd then I've got a manager's group\nwe're gonna work with as well and\n\n367\n00:17:45.792 --> 00:17:48.320\nwhat I wanna do is\ndelegate some permissions.\n\n368\n00:17:48.320 --> 00:17:53.140\nSo for example for my, let's do,\nwe'll do the employees here.\n\n369\n00:17:53.140 --> 00:17:55.460\nI want them to be able to reset passwords.\n\n370\n00:17:55.460 --> 00:17:57.730\nSo I have a corporate help desk.\n\n371\n00:17:57.730 --> 00:18:01.310\nAnd they should be able to reset\nanybody's password, any of my employees.\n\n372\n00:18:01.310 --> 00:18:03.170\nThey need to be able\nto reset the password.\n\n373\n00:18:03.170 --> 00:18:06.800\nSo I'm gonna go to the employee's\nOU because inside there are all of\n\n374\n00:18:06.800 --> 00:18:08.820\nmy employees' user accounts, right?\n\n375\n00:18:08.820 --> 00:18:10.010\nFor my different locations.\n\n376\n00:18:10.010 --> 00:18:14.070\nYou simply right click on it and\nchoose Delegate Control.\n\n377\n00:18:14.070 --> 00:18:16.130\nAnd it's gonna launch this wizard.\n\n378\n00:18:16.130 --> 00:18:18.610\nAll click next on the wizard.\n\n379\n00:18:18.610 --> 00:18:22.800\nAnd I'll choose who I wanna delegate to,\nI click add and\n\n380\n00:18:22.800 --> 00:18:25.940\nI find my core helpdesk,\nif I can spell that.\n\n381\n00:18:25.940 --> 00:18:29.663\nSo now it knows who I trying\nto assign the permissions to.\n\n382\n00:18:29.663 --> 00:18:30.330\nThen I'll click next.\n\n383\n00:18:30.330 --> 00:18:32.950\nThen I've got to decide\nwhat I wanna give them.\n\n384\n00:18:32.950 --> 00:18:35.270\nWhat permission am I trying to assign?\n\n385\n00:18:35.270 --> 00:18:39.010\nNow the cool thing about this wizard\nis it has this common tasks list.\n\n386\n00:18:39.010 --> 00:18:43.120\nAnd you can see, these are some\ncommon things that we typically\n\n387\n00:18:43.120 --> 00:18:44.700\ndelegate out in Active Directory.\n\n388\n00:18:44.700 --> 00:18:47.560\nLike create, delete, and\nmanage user accounts.\n\n389\n00:18:47.560 --> 00:18:50.570\nReset user and\nforce password change in next log on.\n\n390\n00:18:50.570 --> 00:18:51.370\nAnd things like that.\n\n391\n00:18:51.370 --> 00:18:54.830\nSo let's say, corporate help desk,\nI want them to be able to reset user\n\n392\n00:18:54.830 --> 00:18:57.270\npasswords and\nforce password change add next log on.\n\n393\n00:18:57.270 --> 00:19:01.593\nAnd heck, I'll give corporate help desk\nthe ability to create, delete, and\n\n394\n00:19:01.593 --> 00:19:02.913\nmanage user accounts.\n\n395\n00:19:02.913 --> 00:19:03.727\nWhy not?\n\n396\n00:19:03.727 --> 00:19:04.794\nAnd we'll click next.\n\n397\n00:19:04.794 --> 00:19:06.977\nOops.\nI didn't actually check it.\n\n398\n00:19:06.977 --> 00:19:10.484\nWe'll click next and finish.\n\n399\n00:19:10.484 --> 00:19:11.645\nAnd that's it, right?\n\n400\n00:19:11.645 --> 00:19:13.280\nI mean, it was that easy.\n\n401\n00:19:13.280 --> 00:19:18.010\nIf we wanna go back and look, we can right\nclick on that ou, and pull up properties.\n\n402\n00:19:18.010 --> 00:19:20.110\nThen go to that security tab.\n\n403\n00:19:20.110 --> 00:19:21.870\nAnd there's corporate helpdesk.\n\n404\n00:19:21.870 --> 00:19:22.830\nWhat permissions do they get?\n\n405\n00:19:22.830 --> 00:19:26.830\nIt doesn't show me here because\nit's special permissions or\n\n406\n00:19:26.830 --> 00:19:28.460\nmore granular control.\n\n407\n00:19:28.460 --> 00:19:33.390\nSo I'm gonna have to click advance, and\nthen I'll find my corporate helpdesk.\n\n408\n00:19:33.390 --> 00:19:37.470\nAnd then you can see there is\nthe create delete user objects.\n\n409\n00:19:37.470 --> 00:19:41.980\nThere's the full control over just\nDescendant User objects, right?\n\n410\n00:19:41.980 --> 00:19:45.440\nSo the wizard again figured out what it\nis that it's gonna need to give them, and\n\n411\n00:19:45.440 --> 00:19:46.210\nit assigned them.\n\n412\n00:19:46.210 --> 00:19:47.560\nNow we could go and if we wanted to,\n\n413\n00:19:47.560 --> 00:19:51.520\nwe can click Edit, and we can try to find\nthe actual permissions that it gave them,\n\n414\n00:19:51.520 --> 00:19:55.495\ngo through each one of those check marks,\nbut typically I trust the wizard.\n\n415\n00:19:55.495 --> 00:19:59.330\nI know that it does a pretty good job.\n\n416\n00:19:59.330 --> 00:20:00.680\n>> Now as we take a look at this, Mike,\n\n417\n00:20:00.680 --> 00:20:03.160\nlet's say that I did exactly\nthis that you just did.\n\n418\n00:20:03.160 --> 00:20:07.990\nBut then I realized I did it on\nthe wrong group or the wrong OU.\n\n419\n00:20:07.990 --> 00:20:12.883\nShould I rerun this wizard again to\nget rid of that, or what should I do?\n\n420\n00:20:12.883 --> 00:20:14.261\n>> That's a great question and\n\n421\n00:20:14.261 --> 00:20:16.969\nunfortunately there is no\nundelegate wizard, right.\n\n422\n00:20:16.969 --> 00:20:17.689\n>> [LAUGH] No!\n\n423\n00:20:17.689 --> 00:20:20.460\n>> There's no easy wizard\nto to remove them.\n\n424\n00:20:20.460 --> 00:20:22.873\nYou're gonna have to manually edit.\n\n425\n00:20:22.873 --> 00:20:26.608\nBut if we're doing it groups, we can\njust pull the users out of the group and\n\n426\n00:20:26.608 --> 00:20:29.110\nnobody's gonna get those permissions,\nright?\n\n427\n00:20:29.110 --> 00:20:32.820\n>> The problem is that group is probably\nbeing used for other reasons as well.\n\n428\n00:20:32.820 --> 00:20:35.150\nSo, I might be able to just\nyank them out of the group.\n\n429\n00:20:35.150 --> 00:20:38.840\nBut I could definitely go back to\nthe access control list, and I could find,\n\n430\n00:20:38.840 --> 00:20:42.960\nI might not understand what permissions\nwere assigned but I could find.\n\n431\n00:20:42.960 --> 00:20:44.660\nI know I just delegated\nto court help desk.\n\n432\n00:20:44.660 --> 00:20:47.460\nSo I could just remove them right here and\nsay, all right,\n\n433\n00:20:47.460 --> 00:20:51.310\nthat way I've basically\nundelegated at that point.\n\n434\n00:20:51.310 --> 00:20:55.040\nSo you can definitely go back and\ndo things manually.\n\n435\n00:20:55.040 --> 00:20:58.280\nAnother cool thing about this wizard\nis it's very specific, right?\n\n436\n00:20:58.280 --> 00:21:03.480\nLike if I go to GNV and I'm gonna delegate\ncontrol here to the GNV help desk.\n\n437\n00:21:03.480 --> 00:21:07.379\nI'm gonna click add,\nfind my GNV help desk.\n\n438\n00:21:07.379 --> 00:21:10.863\nAnd I want them to be\nable to reset passwords.\n\n439\n00:21:10.863 --> 00:21:13.250\nI'll click next and finish.\n\n440\n00:21:13.250 --> 00:21:15.460\nBecause I did that over that GNV OU,\n\n441\n00:21:15.460 --> 00:21:19.594\nwe'll see that the GNV help desk\nnow has permissions over this OU.\n\n442\n00:21:19.594 --> 00:21:24.052\nAnd if we wanted to dive into it,\nwe'd say that they had reset passwords.\n\n443\n00:21:24.052 --> 00:21:26.908\nBut what about the London ou, all right?\n\n444\n00:21:26.908 --> 00:21:32.295\nIf we look here There is no GNV help desk.\n\n445\n00:21:32.295 --> 00:21:35.654\nThere is CORV help desk because I\ndid that at the employee's ou and\n\n446\n00:21:35.654 --> 00:21:38.541\nit's inheriting down to all\nthose ou's inside there.\n\n447\n00:21:38.541 --> 00:21:44.340\nBut what I did for the GNV help desk,\nI right clicked on the GNV ou.\n\n448\n00:21:44.340 --> 00:21:47.320\nLondon is not inside there,\nit's not inheriting down.\n\n449\n00:21:47.320 --> 00:21:49.960\nIt's very specific what\nyou right click on, or\n\n450\n00:21:49.960 --> 00:21:53.220\nwhen you run that wizard,\nthat it's over that object, right?\n\n451\n00:21:53.220 --> 00:21:57.220\nIn other words, at this point my\nGainesville helpdesk they couldn't log on\n\n452\n00:21:57.220 --> 00:22:02.640\nand reset passwords for people in\nthe New York OU, or in the users OU, or\n\n453\n00:22:02.640 --> 00:22:07.635\nanything like that just for\nthat GNV OU so it's very, very specific.\n\n454\n00:22:07.635 --> 00:22:11.260\n>> Now, in the same vein that I was\njust asking about removing stuff,\n\n455\n00:22:11.260 --> 00:22:12.720\nwhat if I realize I didn't give enough?\n\n456\n00:22:12.720 --> 00:22:14.680\nCould I just rerun the wizard again or\n\n457\n00:22:14.680 --> 00:22:18.250\nis that gonna kinda destroy the\npermissions I did instead of appending it?\n\n458\n00:22:18.250 --> 00:22:19.370\n>> That's a great question.\n\n459\n00:22:19.370 --> 00:22:21.300\nAnd you can run it again.\n\n460\n00:22:21.300 --> 00:22:23.630\nYou can run it as many\ntimes as you need to,\n\n461\n00:22:23.630 --> 00:22:26.559\nlet's say you notice when\nI gave the Corp Help Desk,\n\n462\n00:22:26.559 --> 00:22:30.970\nI give them the ability to reset passwords\nand full control over user objects.\n\n463\n00:22:30.970 --> 00:22:33.380\nBut I didn't do anything\nabout the computer objects,\n\n464\n00:22:33.380 --> 00:22:36.520\nwhat if there were\ncomputers in there as well?\n\n465\n00:22:36.520 --> 00:22:38.590\nI can simply go back through it and\n\n466\n00:22:38.590 --> 00:22:43.180\nlaunch that delegation wizard and\ngo through it and give it to them again.\n\n467\n00:22:43.180 --> 00:22:47.919\nI could say I wanna do corp help\ndesk again and I'm gonna click next.\n\n468\n00:22:49.050 --> 00:22:53.750\nAnd in this case, there is no common\ntask to work with computer objects.\n\n469\n00:22:53.750 --> 00:22:56.220\nSo now I've gotta create custom task.\n\n470\n00:22:56.220 --> 00:23:00.680\nAnd I'll click,\nI'll choose custom task, and next.\n\n471\n00:23:00.680 --> 00:23:03.080\nAnd then where do I wanna\nsign the permissions,\n\n472\n00:23:03.080 --> 00:23:08.010\nthis folder, existing objects and\nnew objects or only the following objects?\n\n473\n00:23:08.010 --> 00:23:12.800\nAnd I'm gonna choose only the following\nobjects, computer objects and\n\n474\n00:23:12.800 --> 00:23:16.700\nI'll let them create computer objects but\nnot delete computer objects.\n\n475\n00:23:16.700 --> 00:23:20.990\nI'll click next and then I'll\nwanna give them full control, but\n\n476\n00:23:20.990 --> 00:23:24.090\nI could be very specific as you could see.\n\n477\n00:23:24.090 --> 00:23:25.463\nI'll click next and finish.\n\n478\n00:23:25.463 --> 00:23:28.710\nSo, re running that\nwizard is perfectly fine.\n\n479\n00:23:28.710 --> 00:23:32.330\nIn fact, sometimes we have to\ndo that in order to accomplish\n\n480\n00:23:32.330 --> 00:23:34.020\nwhat it is we wanna do.\n\n481\n00:23:34.020 --> 00:23:38.270\nAnother cool thing about that wizard is\nthat it's pulling those common tasks,\n\n482\n00:23:38.270 --> 00:23:41.990\nthere's like 12 of them listed on\nthat tab there, 12 common tasks,\n\n483\n00:23:41.990 --> 00:23:44.000\nyou can actually modify that.\n\n484\n00:23:44.000 --> 00:23:46.760\nThere's a file called delegwiz.inf and\n\n485\n00:23:46.760 --> 00:23:49.620\nthat's where it's pulling\nthose common tasks from.\n\n486\n00:23:49.620 --> 00:23:54.173\nAnd you can go out to Microsoft and\nyou can download a new delegwiz.inf and\n\n487\n00:23:54.173 --> 00:23:56.462\nI've gone ahead and did that for us.\n\n488\n00:23:56.462 --> 00:23:58.712\nLet me show you what I've got here.\n\n489\n00:23:58.712 --> 00:24:03.728\nI downloaded a delegwiz.inf\nfrom Microsoft And\n\n490\n00:24:03.728 --> 00:24:11.186\nit's got 70 new tasks in there, and\nall I have to do is copy that file and\n\n491\n00:24:11.186 --> 00:24:17.450\nthen go to my c colon windows inf and\npaste that file in there.\n\n492\n00:24:17.450 --> 00:24:22.840\nAnd now when I run this\ndelegation wizard again,\n\n493\n00:24:22.840 --> 00:24:26.230\nI'll right click delegate control.\n\n494\n00:24:26.230 --> 00:24:27.540\nI'll click next.\n\n495\n00:24:27.540 --> 00:24:29.560\nAnd I'll just pick any\ngroup here at random.\n\n496\n00:24:29.560 --> 00:24:31.130\nWe'll find my managers group.\n\n497\n00:24:31.130 --> 00:24:32.460\nI'll click next.\n\n498\n00:24:32.460 --> 00:24:34.190\nAnd look at my list now.\n\n499\n00:24:35.640 --> 00:24:38.720\nSo I've got 70 something new\ntasks that I can choose.\n\n500\n00:24:38.720 --> 00:24:43.630\nIn fact, now, computers are a part\nof my common tasks, and\n\n501\n00:24:43.630 --> 00:24:45.650\nI no longer have to do that custom task.\n\n502\n00:24:45.650 --> 00:24:51.269\nYou can actually modify that file yourself\nif you feel comfortable with doing that.\n\n503\n00:24:51.269 --> 00:24:55.530\n[LAUGH] If you go into this inf file,\n\n504\n00:24:55.530 --> 00:24:58.366\nyou'll see that it's just, I say just,\n>> [LAUGH]\n\n505\n00:24:58.366 --> 00:24:59.950\n>> Let's do some word wrap here.\n\n506\n00:25:01.580 --> 00:25:03.409\n>> Yeah I'm gonna feel comfortable.\n\n507\n00:25:03.409 --> 00:25:05.530\n[LAUGH]\n>> Yeah, it's a little difficult to read\n\n508\n00:25:05.530 --> 00:25:09.830\non the screen, but if we really dived down\ninto it we can find each one is called\n\n509\n00:25:09.830 --> 00:25:13.830\na template, and then applies to class,\ndomain, DNS, OU,\n\n510\n00:25:13.830 --> 00:25:16.690\nContainer Description, yeah,\n>> [LAUGH]\n\n511\n00:25:16.690 --> 00:25:19.990\n>> Like I said that's way beyond anything\n\n512\n00:25:19.990 --> 00:25:24.510\nI've really ever needed to do, but\nhey, if you are feeling frisky and\n\n513\n00:25:24.510 --> 00:25:28.800\nyou wanted to, you've got a task that you\nwanna assign to different groups and you\n\n514\n00:25:28.800 --> 00:25:32.690\nalways have to do that custom task every\ntime, heck go in there, reverse engineer\n\n515\n00:25:32.690 --> 00:25:37.650\none of those tasks on that delegwiz.inf\nand make your own common task.\n\n516\n00:25:37.650 --> 00:25:39.500\nAnd it'll actually add it to the list.\n\n517\n00:25:39.500 --> 00:25:44.230\nSo it's cool that it's extensible if\nyou need that type of functionality.\n\n518\n00:25:44.230 --> 00:25:48.320\nSo in the end Ronny, as you see,\nvery similar to NTFS permissions.\n\n519\n00:25:48.320 --> 00:25:52.380\nThere's more permissions, much more\ngranular control because now we're dealing\n\n520\n00:25:52.380 --> 00:25:56.380\nwith not just a file, but an object that\nhas dozens and dozens of attributes.\n\n521\n00:25:56.380 --> 00:25:59.850\nSo we can really get fine\ngrain with that control and\n\n522\n00:25:59.850 --> 00:26:01.980\nthat delegation wizard is going to be key.\n\n523\n00:26:01.980 --> 00:26:06.600\nIt's a fantastic tool to make the\nassigning of the permissions a lot easier.\n\n524\n00:26:06.600 --> 00:26:09.690\n>> And the very fact that the tool\nis accessible also helps too.\n\n525\n00:26:09.690 --> 00:26:12.800\nNow let's make sure that we\nmentioned that path again.\n\n526\n00:26:12.800 --> 00:26:17.930\nYou said what we do is we take that inf\nfile that we download from Microsoft and\n\n527\n00:26:17.930 --> 00:26:19.810\nwe put it in Windows System 32.\n\n528\n00:26:19.810 --> 00:26:21.480\n>> SQL in Windows INF.\n\n529\n00:26:21.480 --> 00:26:22.800\n>> SQL in Windows INF.\n\n530\n00:26:22.800 --> 00:26:27.080\n>> That's where you're gonna find a lot of\nINF files that the operating system uses.\n\n531\n00:26:27.080 --> 00:26:28.530\nYou just dump it in there.\n\n532\n00:26:28.530 --> 00:26:33.320\nBest practice would say go get\nyour current delegwiz.inf,\n\n533\n00:26:33.320 --> 00:26:36.830\ncopy it or rename it .old or\nsomething like that,\n\n534\n00:26:36.830 --> 00:26:40.140\njust in case you got a corrupt copy or\nsomething happened to it.\n\n535\n00:26:40.140 --> 00:26:41.780\nAnd if you're gonna modify it directly,\n\n536\n00:26:41.780 --> 00:26:46.050\ndefinitely copy it or make a copy of it,\nput that somewhere safe.\n\n537\n00:26:46.050 --> 00:26:47.220\nAnd you just dump it in there.\n\n538\n00:26:47.220 --> 00:26:49.910\nAnd it automatically is gonna look for\nthat file name and\n\n539\n00:26:49.910 --> 00:26:51.590\npull that any time you run the wizard.\n\n540\n00:26:51.590 --> 00:26:55.640\nSo if you just replace the one that's\nin there, or rename the old one and\n\n541\n00:26:55.640 --> 00:26:58.120\nput that new one in there,\nit's gonna automatically pick it up,\n\n542\n00:26:58.120 --> 00:27:00.040\nthere's nothing extra you have to do.\n\n543\n00:27:00.040 --> 00:27:02.530\n>> Sounds awesome, and\nwe can understand that the idea of,\n\n544\n00:27:02.530 --> 00:27:05.300\nbehind this,\nof especially assigning permissions,\n\n545\n00:27:05.300 --> 00:27:07.870\nis really gonna be important\nas our organization grows.\n\n546\n00:27:07.870 --> 00:27:12.240\nIf we grow to multiple sites,\neven though I might be able to control it,\n\n547\n00:27:12.240 --> 00:27:15.890\nwhat I need is, of course,\nother people to also be in control of it.\n\n548\n00:27:15.890 --> 00:27:19.880\nSo, what Mike did is actually really help\nus to understand how we could assign those\n\n549\n00:27:19.880 --> 00:27:22.800\npermissions and delegate those,\nwell, to either the individual users.\n\n550\n00:27:22.800 --> 00:27:25.840\nHopefully not, of course,\ngroups as we're gonna work with them, and\n\n551\n00:27:25.840 --> 00:27:27.995\nthen to use that\ndelegation wizard as well.\n\n552\n00:27:27.995 --> 00:27:32.430\nHe showed us also how to make it more\nextensible, in other words filling\n\n553\n00:27:32.430 --> 00:27:37.050\nit out a little bit more than what\nthe base, default install is gonna be.\n\n554\n00:27:37.050 --> 00:27:41.330\nAnd that can actually help you also to\nbe able to assign those permissions even\n\n555\n00:27:41.330 --> 00:27:42.770\nquicker is what we should say too.\n\n556\n00:27:42.770 --> 00:27:45.880\nAll right, Mike as far a best practices or\nanything else for\n\n557\n00:27:45.880 --> 00:27:50.281\npermissions go, any tricks, any secret\nsauce that we have to worry about?\n\n558\n00:27:50.281 --> 00:27:54.320\n>> [LAUGH] No, just take advantage\nof that delegation wizard.\n\n559\n00:27:54.320 --> 00:27:56.400\nIt's an easy way to\napply those permissions,\n\n560\n00:27:56.400 --> 00:27:58.040\nit takes care of everything for you.\n\n561\n00:27:58.040 --> 00:28:01.470\nIf you really want to learn\nwhat permissions are required\n\n562\n00:28:01.470 --> 00:28:05.620\nto reset a password or to modify\na phone number, run the wizard and\n\n563\n00:28:05.620 --> 00:28:07.910\nthen just go back and\nlook at the permissions that it assigned.\n\n564\n00:28:07.910 --> 00:28:11.470\nUse that effective access tab to say,\nnow I see\n\n565\n00:28:11.470 --> 00:28:15.190\nwhat permissions the wizard assigned\nto allow that person to do that job.\n\n566\n00:28:15.190 --> 00:28:17.280\nAnd maybe I can do it\nmanually if I want to.\n\n567\n00:28:17.280 --> 00:28:23.000\nI don't know why I'd want to, but\nyou could do it manually if you wanted.\n\n568\n00:28:23.000 --> 00:28:27.190\nAnd remember, delegation is key to\nstreamlining the administration.\n\n569\n00:28:28.790 --> 00:28:30.380\nUsers are going to lock their accounts up,\n\n570\n00:28:30.380 --> 00:28:33.300\nthey're going to forget\ntheir passwords for example.\n\n571\n00:28:33.300 --> 00:28:36.960\nI don't need them calling up my chief\nIT guys 20 times a day going hey,\n\n572\n00:28:36.960 --> 00:28:38.140\nI locked my account up.\n\n573\n00:28:38.140 --> 00:28:39.896\n>> [LAUGH]\n>> Hey I need my password reset.\n\n574\n00:28:39.896 --> 00:28:41.036\nThat's what we delegate for.\n\n575\n00:28:41.036 --> 00:28:44.220\nWe say all right, we're gonna give\nthis person the ability to do that.\n\n576\n00:28:44.220 --> 00:28:45.770\nThat sales example that I gave you.\n\n577\n00:28:45.770 --> 00:28:50.100\nYou know, that sales manager is\nconstantly creating new accounts or\n\n578\n00:28:50.100 --> 00:28:54.780\nneeding new accounts in active directory\nbecause they're hiring bulk users and\n\n579\n00:28:54.780 --> 00:28:58.190\nthen that half of them don't show up or\nwhat have you.\n\n580\n00:28:58.190 --> 00:29:02.090\nI don't need my guys that are working\non my server administration,\n\n581\n00:29:02.090 --> 00:29:06.030\nthat are managing my servers,\nto have to worry about going in and\n\n582\n00:29:06.030 --> 00:29:08.670\ncreating new accounts or\nmoving accounts all the time.\n\n583\n00:29:08.670 --> 00:29:10.410\nI can delegate that to somebody.\n\n584\n00:29:10.410 --> 00:29:12.570\nHeck, I can delegate that\nto that sales manager.\n\n585\n00:29:12.570 --> 00:29:16.040\nEven though he doesn't know anything\nabout the rest of active directory,\n\n586\n00:29:16.040 --> 00:29:17.030\nI can limit what he can do.\n\n587\n00:29:17.030 --> 00:29:18.160\nSo he can't hurt anything.\n\n588\n00:29:18.160 --> 00:29:22.020\nThe only thing he's going to hurt,\nare those user accounts and that sales OU.\n\n589\n00:29:22.020 --> 00:29:24.810\nSo by using that wizard,\nby delegating these permissions,\n\n590\n00:29:24.810 --> 00:29:28.470\nby taking advantage of the control\nI have over the inheritance,\n\n591\n00:29:28.470 --> 00:29:32.030\nlike this object only and\nthings like that, we can really,\n\n592\n00:29:32.030 --> 00:29:37.510\nreally do a good job of delegating out\njobs to make everybody's life easier.\n\n593\n00:29:37.510 --> 00:29:41.690\nBut controlling it, doing it in a secure\nway where they can't get themselves\n\n594\n00:29:41.690 --> 00:29:44.850\nin trouble, either maliciously or\naccidentally.\n\n595\n00:29:44.850 --> 00:29:47.240\n>> Excellent Mike, that's a great\nsummarization of maintaining and\n\n596\n00:29:47.240 --> 00:29:48.960\nmanaging an active directory as well.\n\n597\n00:29:48.960 --> 00:29:50.890\nAnd thank you again for showing us that.\n\n598\n00:29:50.890 --> 00:29:54.778\nIt actually was incredibly neat to be\nable to see how granular we could get and\n\n599\n00:29:54.778 --> 00:29:58.604\nthat's a great place for us to also end\nthis episode, so thank you again for\n\n600\n00:29:58.604 --> 00:29:59.540\nalso joining us.\n\n601\n00:29:59.540 --> 00:30:01.950\nSigning off for ITPro TV, I'm Ronnie Wong.\n\n602\n00:30:01.950 --> 00:30:02.850\n>> And I'm Mike Roderick.\n\n603\n00:30:02.850 --> 00:30:05.448\n>> And we'll see you next time.\n\n604\n00:30:05.448 --> 00:30:11.950\n[MUSIC]\n\n",
          "vimeoId": "146522471"
        },
        {
          "description": "In this episode, Ronnie and Mike discuss localization of services and controlling replication through AD sites.  They create sites and show how to link them.  They take time to discuss the reasons to use sites and how to create and change them through AD Sites and Services.",
          "length": "1712",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-5-1-sites_and_replication-111815-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-5-1-sites_and_replication-111815-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-5-1-sites_and_replication-111815-1-sm.jpg",
          "title": "AD Sites and Replication",
          "transcript": "WEBVTT\n\n1\n00:00:00.025 --> 00:00:10.025\n[MUSIC]\n\n2\n00:00:12.421 --> 00:00:15.629\nWelcome to another great\nepisode right here on ITProTV.\n\n3\n00:00:15.629 --> 00:00:20.217\nI'm your host Ronnie Wong and today we're\ntaking that working with Active Directory,\n\n4\n00:00:20.217 --> 00:00:24.690\nwe're specifically gonna dive into Active\nDirectory sites as well as replication.\n\n5\n00:00:24.690 --> 00:00:27.090\nAnd who better to help us out than,\nwell, Mr.\n\n6\n00:00:27.090 --> 00:00:30.850\nMike Roderick, he's gonna actually be\nright here to help us out as well.\n\n7\n00:00:30.850 --> 00:00:32.380\nSo, Mike, when we begin and\n\n8\n00:00:32.380 --> 00:00:35.380\nwe start talking about\nthe idea of replication, okay.\n\n9\n00:00:35.380 --> 00:00:38.700\nIf I create an account on\none Active Directory and\n\n10\n00:00:38.700 --> 00:00:40.190\nI have multiple domain controllers,\n\n11\n00:00:40.190 --> 00:00:43.910\ndo I need to actually go and create\nit on every single domain controller?\n\n12\n00:00:43.910 --> 00:00:45.400\n>> Yes you do.\n>> Okay, even better.\n\n13\n00:00:45.400 --> 00:00:46.350\n>> No, I'm just kidding.\n\n14\n00:00:46.350 --> 00:00:48.520\n[LAUGH] You gotta do it 100 times, no.\n\n15\n00:00:48.520 --> 00:00:52.140\nThat's a great question, Ronnie, and\nthat's what replication is all about,\n\n16\n00:00:52.140 --> 00:00:55.032\nis the fact that we're gonna have\nmultiple domain controllers.\n\n17\n00:00:55.032 --> 00:00:59.790\nWe understand as best practice I need\nat least two, if one goes down because\n\n18\n00:00:59.790 --> 00:01:04.410\nthat domain controller is responsible for\nall my security and all my authentication.\n\n19\n00:01:04.410 --> 00:01:07.170\nSo if the domain controller's unavailable,\nusers can't log on.\n\n20\n00:01:07.170 --> 00:01:11.500\nUsers can't get access to resources cuz\nthey need that session token to get,\n\n21\n00:01:11.500 --> 00:01:13.125\nwhen they go to connect\nto that file server.\n\n22\n00:01:13.125 --> 00:01:17.290\nSo we're gonna have at least\ntwo domain controllers and\n\n23\n00:01:17.290 --> 00:01:22.070\nas we grow we're gonna have more for\nfault tolerance, for load balancing, for\n\n24\n00:01:22.070 --> 00:01:24.200\ngeographical locations and\nthings like that.\n\n25\n00:01:24.200 --> 00:01:28.770\nSo, Ronnie's question then, if I go and\nI create a new user account,\n\n26\n00:01:28.770 --> 00:01:30.830\nwell I open up Active Directory Users and\nComputers and\n\n27\n00:01:30.830 --> 00:01:36.070\nI create a new account, it's now stored in\nthat database on that domain controller.\n\n28\n00:01:36.070 --> 00:01:38.200\nWhat about all the other\ndomain controllers,\n\n29\n00:01:38.200 --> 00:01:39.710\nthey don't know about that account yet?\n\n30\n00:01:39.710 --> 00:01:41.070\nAnd when a user goes to log in,\n\n31\n00:01:41.070 --> 00:01:43.780\nyou don't know to which domain\ncontroller they're gonna talk to.\n\n32\n00:01:43.780 --> 00:01:46.460\nThey could talk to any one of\nthose domain controllers and\n\n33\n00:01:46.460 --> 00:01:50.330\nif it doesn't know about their account\nyet, it's not gonna let them log on.\n\n34\n00:01:50.330 --> 00:01:52.780\nSo we've gotta keep that\ninformation synchronized,\n\n35\n00:01:52.780 --> 00:01:57.110\nthat database has to be synchronized\nacross all of those domain controllers.\n\n36\n00:01:57.110 --> 00:02:01.400\nAnd that's what replication is\nall about is a way to replicate\n\n37\n00:02:01.400 --> 00:02:04.810\nchanges to that database to all\nof the other domain controllers.\n\n38\n00:02:04.810 --> 00:02:07.990\nWe've talked before\nabout how that database\n\n39\n00:02:07.990 --> 00:02:11.050\nis actually divided up\ninto logical partitions.\n\n40\n00:02:11.050 --> 00:02:13.287\nSo depending on what we're changing,\n\n41\n00:02:13.287 --> 00:02:17.695\nthat's gonna determine what partition\nis affected, and then that's gonna\n\n42\n00:02:17.695 --> 00:02:22.253\ndetermine which domain controllers are\ngonna need to get a copy of that change.\n\n43\n00:02:22.253 --> 00:02:27.600\nAnd we'll talk a little bit more about\nthat as we go through this episode.\n\n44\n00:02:27.600 --> 00:02:30.066\nFirst, let's talk about just\nthe replication model that\n\n45\n00:02:30.066 --> 00:02:31.129\nActive Directory uses.\n\n46\n00:02:31.129 --> 00:02:36.150\nRemember, Active Directory is\nwhat we call a multi-master with\n\n47\n00:02:36.150 --> 00:02:40.945\nloose conversions is really\nthe way they like to describe it.\n\n48\n00:02:40.945 --> 00:02:42.770\nMulti-master means they're all writable.\n\n49\n00:02:42.770 --> 00:02:47.740\nAll of my domain controllers hold a\nwritable copy of Active Directory, except\n\n50\n00:02:47.740 --> 00:02:52.710\nfor those read only domain controllers,\nthat's our little exception there.\n\n51\n00:02:52.710 --> 00:02:57.230\nBut they're all writable, unlike way\nback in the NT days when I had a single\n\n52\n00:02:57.230 --> 00:03:01.725\nwritable copy,\na primary domain controller and then for\n\n53\n00:03:01.725 --> 00:03:04.390\nfault tolerance and load balancing we\ncreated additional domain controllers that\n\n54\n00:03:04.390 --> 00:03:08.090\nwere known as backup domain controllers,\nand they were read only.\n\n55\n00:03:08.090 --> 00:03:11.240\nThe problem with that system was,\nthere was only one writable copy, and\n\n56\n00:03:11.240 --> 00:03:15.790\nif that writable copy went down,\nthe other copies were read only.\n\n57\n00:03:15.790 --> 00:03:18.910\nAnd so they could still authenticate\nusers, but I couldn't make any changes.\n\n58\n00:03:18.910 --> 00:03:24.380\nI couldn't make any new accounts until\nthat one writable copy came back online.\n\n59\n00:03:24.380 --> 00:03:26.810\nWith multi-master, they're all writable.\n\n60\n00:03:26.810 --> 00:03:31.650\nSo I can go to any domain controller and\nI can make those changes, so\n\n61\n00:03:31.650 --> 00:03:33.280\nthat's a wonderful thing.\n\n62\n00:03:33.280 --> 00:03:38.200\nI don't have to worry about that\none writable copy going down and\n\n63\n00:03:38.200 --> 00:03:42.740\nbasically ceasing all changes at that\npoint until that guy gets back up.\n\n64\n00:03:42.740 --> 00:03:44.160\nSo it's multi-master.\n\n65\n00:03:44.160 --> 00:03:49.280\nIt uses what we call a pull replication\nmodel, it's not a push, right.\n\n66\n00:03:49.280 --> 00:03:52.580\nWhere as a push would be if I make\na change on one domain controller, that\n\n67\n00:03:52.580 --> 00:03:57.500\ndomain controller then pushes that change\nout to the other domain controllers.\n\n68\n00:03:58.820 --> 00:04:02.300\nWe use pull which means I make\na change on one domain controller,\n\n69\n00:04:02.300 --> 00:04:05.250\nthe other domain controllers\nwill get notified of the change,\n\n70\n00:04:05.250 --> 00:04:08.830\nbut it's their responsibility\nto request those changes,\n\n71\n00:04:08.830 --> 00:04:12.520\nto pull those changes to them and\nthat's very advantageous as well.\n\n72\n00:04:12.520 --> 00:04:19.140\nIf I use a push model, it's more\ndifficult to track who's got that change.\n\n73\n00:04:19.140 --> 00:04:23.940\nIf I make a change on domain controller\nand it goes to push that change out to\n\n74\n00:04:23.940 --> 00:04:27.542\nother domain controllers, it doesn't\nknow if they already have that change.\n\n75\n00:04:27.542 --> 00:04:31.690\nWhat if it had pushed to one and\nthen that one pushed it to somebody else,\n\n76\n00:04:31.690 --> 00:04:36.040\nbut the first domain controller goes to\npush it to that third domain controller\n\n77\n00:04:36.040 --> 00:04:38.840\nwho's already got the change from\nthe second domain controller.\n\n78\n00:04:38.840 --> 00:04:41.240\nSo it's not as efficient\nwhere as with pull,\n\n79\n00:04:41.240 --> 00:04:44.140\nyou have much more control over that.\n\n80\n00:04:44.140 --> 00:04:47.390\nIf I need the change, if I get\na notification that there's been a change,\n\n81\n00:04:47.390 --> 00:04:49.420\nif I need it, I can say hey send it to me.\n\n82\n00:04:49.420 --> 00:04:54.120\nOr if I don't need it, if I already got\nthe change from somebody else I don't\n\n83\n00:04:54.120 --> 00:04:59.250\nhave to pull that change anymore right,\nI don't have to pull it again.\n\n84\n00:04:59.250 --> 00:05:02.590\nSo it speeds up the process as well\nas it's a little more efficient, so\n\n85\n00:05:02.590 --> 00:05:03.710\nit's a pull replication.\n\n86\n00:05:03.710 --> 00:05:07.992\nIt also does what we call store and\nforward,\n\n87\n00:05:07.992 --> 00:05:15.420\nmeaning that I can have those changes\nreplicated to one domain controller.\n\n88\n00:05:15.420 --> 00:05:18.311\nIf there's a domain controller\nthat's offline, it's okay,\n\n89\n00:05:18.311 --> 00:05:20.131\nbecause as soon as it comes back online,\n\n90\n00:05:20.131 --> 00:05:23.889\nhe can pull, he can request those changes\nand he'll get everything that he needs.\n\n91\n00:05:25.100 --> 00:05:28.210\nSo it's that store and\nforward concept where\n\n92\n00:05:28.210 --> 00:05:32.690\nI don't have to have everybody online at\nthe same time when there's a change made.\n\n93\n00:05:32.690 --> 00:05:37.010\nIf there's people that are offline, if\nsome of those domain controllers are down,\n\n94\n00:05:37.010 --> 00:05:40.390\nor a WAN link is unavailable\nbetween two locations, that's okay.\n\n95\n00:05:40.390 --> 00:05:45.310\nThey're gonna get that change eventually\nas soon as that link comes back up,\n\n96\n00:05:45.310 --> 00:05:47.660\nthat's that store and forward concept.\n\n97\n00:05:47.660 --> 00:05:51.926\nAnd it's also a state-based\nreplication model,\n\n98\n00:05:51.926 --> 00:05:55.504\nmeaning that each object has attributes.\n\n99\n00:05:55.504 --> 00:05:59.360\nWe've seen that a user account has\ndozens and dozens of attributes.\n\n100\n00:05:59.360 --> 00:06:03.000\nFirst name, last name, phone number,\ncity, state, zip, password,\n\n101\n00:06:03.000 --> 00:06:05.820\nlast logged on date,\nI mean each and every attribute.\n\n102\n00:06:05.820 --> 00:06:09.470\nIt keeps track of changes\nat the attribute level.\n\n103\n00:06:09.470 --> 00:06:14.080\nAnd it actually replicates\nthe changes at that attribute level.\n\n104\n00:06:14.080 --> 00:06:16.080\nSo it doesn't have to\nreplicate an entire object.\n\n105\n00:06:16.080 --> 00:06:20.120\nIf I go to a user account and,\nlet's say I go to Ronnie's account and\n\n106\n00:06:20.120 --> 00:06:21.650\nI change his phone number.\n\n107\n00:06:21.650 --> 00:06:22.380\nHe tells me,\n\n108\n00:06:22.380 --> 00:06:26.870\nhey I've got a new home phone and so\nI go in there and I modify his account,\n\n109\n00:06:26.870 --> 00:06:30.360\nwell when they replicate their just going\nto replicate that changed attribute.\n\n110\n00:06:30.360 --> 00:06:33.350\nThey don't have to replicate\nthe entire object.\n\n111\n00:06:33.350 --> 00:06:36.260\nIt keeps track of each individual\nattribute, it gets what we\n\n112\n00:06:36.260 --> 00:06:40.430\ncall an update sequence number and\nit can keep track of that version there.\n\n113\n00:06:40.430 --> 00:06:43.130\nAlso, if there's multiple\nchanges to the same object and\n\n114\n00:06:43.130 --> 00:06:48.490\nthe same attribute on that same object,\nit only has to replicate that last change.\n\n115\n00:06:48.490 --> 00:06:52.240\nLet's say that one of the domain\ncontrollers was offline for a little bit,\n\n116\n00:06:52.240 --> 00:06:55.360\nwhen he comes back online,\ninstead of having to replicate,\n\n117\n00:06:55.360 --> 00:06:58.890\nlet's say I've changed Ronnie's\nphone number three times.\n\n118\n00:06:58.890 --> 00:07:01.330\nHe told me what his new number was,\nI thought I remembered it,\n\n119\n00:07:01.330 --> 00:07:04.370\nI put it in there, he says that's not it,\nI put a different phone\n\n120\n00:07:04.370 --> 00:07:07.598\nnumber in there so,\nI've updated that attribute several times.\n\n121\n00:07:07.598 --> 00:07:11.130\nWhen that domain controller that\nwasn't available comes back online,\n\n122\n00:07:11.130 --> 00:07:15.430\nhe can look at the latest version that\nhe has, he'll see all of those changes,\n\n123\n00:07:15.430 --> 00:07:17.560\nbut he's just gonna say,\nI want that latest change.\n\n124\n00:07:17.560 --> 00:07:19.570\nAnd that's the only thing\nI have to replicate.\n\n125\n00:07:19.570 --> 00:07:24.940\nI don't have to replicate each change one\nat a time to get to the latest version.\n\n126\n00:07:24.940 --> 00:07:28.712\nThat can skip all those intermediate\nchanges and just go to that last change.\n\n127\n00:07:28.712 --> 00:07:32.430\nOther thing we have to deal with\nis multi-valued attributes.\n\n128\n00:07:32.430 --> 00:07:36.790\nThere are some attributes that\nare multi-valued like group membership.\n\n129\n00:07:36.790 --> 00:07:38.510\nThat's a list of groups\nthat you belong to.\n\n130\n00:07:38.510 --> 00:07:42.542\nYou might belong to one group,\nyou might belong to 20 groups, so\n\n131\n00:07:42.542 --> 00:07:44.712\nit's a multi-valued attribute.\n\n132\n00:07:44.712 --> 00:07:49.577\nIt is going to replicate that entire\nmulti-valued attribute over when\n\n133\n00:07:49.577 --> 00:07:52.586\nit replicates those multi-values there.\n\n134\n00:07:52.586 --> 00:07:56.263\n>> All right Mike, so\nlet me make sure I understand the concept,\n\n135\n00:07:56.263 --> 00:08:00.100\njust to make sure that everything\nis good as we get started here.\n\n136\n00:08:00.100 --> 00:08:04.079\nThe very fact is when we start taking\nthe idea of replication What we're trying\n\n137\n00:08:04.079 --> 00:08:07.393\nto do is, regardless of the number\nof domain controllers I have,\n\n138\n00:08:07.393 --> 00:08:08.920\nI want consistency, right?\n\n139\n00:08:08.920 --> 00:08:12.820\nFrom whatever's actually on one database\nto the next database to the next one on\n\n140\n00:08:12.820 --> 00:08:16.660\nthe different domain controllers, and that\nway, regardless of wherever we might be,\n\n141\n00:08:16.660 --> 00:08:19.100\nwe make sure that we have\nthe same information, and\n\n142\n00:08:19.100 --> 00:08:21.760\nthat's what you're talking about in\nterms of the convergence, right?\n\n143\n00:08:21.760 --> 00:08:22.460\n>> Yes, exactly.\n\n144\n00:08:22.460 --> 00:08:24.390\nHow long is it when we\ntalk about convergence,\n\n145\n00:08:24.390 --> 00:08:25.790\nhow long does it take for that change?\n\n146\n00:08:25.790 --> 00:08:28.320\nTo get out to all of the other domain\n\n147\n00:08:28.320 --> 00:08:30.420\ncontrollers when they're\naware of that change.\n\n148\n00:08:30.420 --> 00:08:32.410\n>> All right, now the other, sorry,\nI didn't mean to interrupt you.\n\n149\n00:08:32.410 --> 00:08:36.040\nBut the other question is when we talk\nabout the idea of convergence then just\n\n150\n00:08:36.040 --> 00:08:39.950\nbriefly here If a domain\ncontroller doesn't update,\n\n151\n00:08:39.950 --> 00:08:43.230\nis there a way that it finally says, look\nI just need that latest information that\n\n152\n00:08:43.230 --> 00:08:45.240\nhappened periodically every 90 minutes?\n\n153\n00:08:45.240 --> 00:08:49.610\nOr does it say, look when we update\nwe just update and that's fine.\n\n154\n00:08:49.610 --> 00:08:51.810\n>> There's really not a time per se.\n\n155\n00:08:51.810 --> 00:08:56.260\nIt's a really fast process, and in order\nto understand or to talk about it.\n\n156\n00:08:56.260 --> 00:08:58.920\nWe're gonna have to look\nat two different things.\n\n157\n00:08:58.920 --> 00:09:02.628\nBecause we've talked about sites,\nright, in other episodes.\n\n158\n00:09:02.628 --> 00:09:06.340\nAnd we're gonna dive into those\na little bit further here.\n\n159\n00:09:06.340 --> 00:09:08.928\nSites are physical representations\nof active directory.\n\n160\n00:09:08.928 --> 00:09:12.410\nActive directory is primarily\na logical structure.\n\n161\n00:09:12.410 --> 00:09:15.050\nI can have offices around the world,\nand all of those users and\n\n162\n00:09:15.050 --> 00:09:17.970\ncomputers can be part of a single domain.\n\n163\n00:09:17.970 --> 00:09:22.320\nBut when we start looking\nat the connection that we\n\n164\n00:09:22.320 --> 00:09:26.360\nhave between those offices, we're\ngonna have a slower connection, right?\n\n165\n00:09:26.360 --> 00:09:31.500\nAnd so when we look at replication,\nwe've gotta look at it as a,\n\n166\n00:09:31.500 --> 00:09:33.400\nwhat's the word I'm looking for?\n\n167\n00:09:33.400 --> 00:09:36.368\nIn trust site replication, so\nreplication within a site.\n\n168\n00:09:36.368 --> 00:09:41.000\nAnd then inter-site replication\nwhich is replication between sites.\n\n169\n00:09:41.000 --> 00:09:45.290\nAnd so that's kind of going roundabout\nto answer your question there Ronnie.\n\n170\n00:09:45.290 --> 00:09:50.370\nAs far as how long it would take to\npropagate a change out, it really depends\n\n171\n00:09:50.370 --> 00:09:54.770\non the structure of my active directory,\nalright, so let's talk about sites for\n\n172\n00:09:54.770 --> 00:09:58.670\na second and then we can compare\ninter-site and intra-site Replication.\n\n173\n00:09:58.670 --> 00:10:00.330\n>> I knew you were getting\nthat at some point, and\n\n174\n00:10:00.330 --> 00:10:01.890\nI don't know what it jumped in my head.\n\n175\n00:10:01.890 --> 00:10:03.130\n>> It was a good question.\n\n176\n00:10:03.130 --> 00:10:03.810\n>> Let's go ahead and\n\n177\n00:10:03.810 --> 00:10:06.530\nsee what happens here, when we start\ntalking about the idea of sites.\n\n178\n00:10:06.530 --> 00:10:09.020\nYou say that it's actually a physical\nrepresentation of the active directory,\n\n179\n00:10:09.020 --> 00:10:10.124\nis that what we're talking about.\n\n180\n00:10:10.124 --> 00:10:10.763\n>> It really is.\n\n181\n00:10:10.763 --> 00:10:12.853\n>> Okay.\n>> It's a way to let active directory to\n\n182\n00:10:12.853 --> 00:10:15.854\nknow what the physical structure is,\nbecause, you know,\n\n183\n00:10:15.854 --> 00:10:20.500\nagain, it see's it as a logical structure,\nit's a domain, and only users are in.\n\n184\n00:10:20.500 --> 00:10:22.580\nThat domain.\nWhen we go into Active Directory Users and\n\n185\n00:10:22.580 --> 00:10:24.770\nComputers, we see the entire domain.\n\n186\n00:10:24.770 --> 00:10:28.500\nNow, we might subdivide it by employees\nand then locations, but again,\n\n187\n00:10:28.500 --> 00:10:30.420\nit's one domain partition.\n\n188\n00:10:30.420 --> 00:10:32.230\nAll those objects are stored in there.\n\n189\n00:10:32.230 --> 00:10:36.740\nSo with sites, I can start letting Active\nDirectory know hey, it is one domain, but\n\n190\n00:10:36.740 --> 00:10:39.340\nthere are different locations.\n\n191\n00:10:39.340 --> 00:10:44.370\nCuz like for example I have, well we've\ngot our office here in Gainesville, right.\n\n192\n00:10:44.370 --> 00:10:46.850\nAnd I've got two domain\ncontrollers sitting here.\n\n193\n00:10:46.850 --> 00:10:49.360\nAnd they have gigabit speed between them.\n\n194\n00:10:49.360 --> 00:10:51.150\nSo they can replicate\nas often as they want.\n\n195\n00:10:51.150 --> 00:10:54.630\nI mean as soon as a change is made they\ncan replicate that over to the other\n\n196\n00:10:54.630 --> 00:10:58.890\ndomain controllers and\nalmost have zero convergence time or\n\n197\n00:10:58.890 --> 00:11:01.070\nvery short convergence time, right.\n\n198\n00:11:01.070 --> 00:11:03.540\nBut what about my office up in New York?\n\n199\n00:11:03.540 --> 00:11:05.510\nThat's going across that WAN link.\n\n200\n00:11:05.510 --> 00:11:09.170\nI don't want every time a change\nis made to trigger replication.\n\n201\n00:11:09.170 --> 00:11:12.380\nI go, and I update Ronnie's account,\nand boom, it's gonna start replicating.\n\n202\n00:11:12.380 --> 00:11:15.370\nAnd then another admin creates a new OU,\nand it's gonna replicate it.\n\n203\n00:11:15.370 --> 00:11:18.560\nAnd then somebody else makes another\nchange, publishes a printer, and\n\n204\n00:11:18.560 --> 00:11:19.308\nit's gonna replicate.\n\n205\n00:11:19.308 --> 00:11:24.080\nAll of a sudden my WAN link is gonna get\nsaturated with its replication traffic.\n\n206\n00:11:24.080 --> 00:11:26.920\nSo we've gotta differentiate that, right?\n\n207\n00:11:26.920 --> 00:11:31.020\nWe've got out replication that\noccurs intersite, within or\n\n208\n00:11:31.020 --> 00:11:32.910\nintrasite sorry within my site.\n\n209\n00:11:32.910 --> 00:11:35.840\nAnd then intersite is\ngonna be between sites.\n\n210\n00:11:35.840 --> 00:11:39.450\nBut without sites, I don't have any way\nof defining that in an active directory.\n\n211\n00:11:39.450 --> 00:11:44.430\nSo sites are gonna allow me to define the\nphysical breakdown of Active Directory.\n\n212\n00:11:44.430 --> 00:11:50.990\nFor example I've got a drawing here I'll\nshow you, I've got a single domain but\n\n213\n00:11:50.990 --> 00:11:55.650\nI might have an office in New York,\nI might have an office In Gainesville,\n\n214\n00:11:55.650 --> 00:11:58.700\nand another one in,\nlet's change one of these guys to London.\n\n215\n00:11:58.700 --> 00:12:03.960\nAnd then since I don't have\ntwo offices in New York.\n\n216\n00:12:03.960 --> 00:12:05.460\nAll right, so\nas you can see like in London,\n\n217\n00:12:05.460 --> 00:12:08.600\ntwo domain controllers, they can\nreplicate as often as they want, right?\n\n218\n00:12:08.600 --> 00:12:09.380\nThey don't care.\n\n219\n00:12:09.380 --> 00:12:13.130\nBut between London and New York,\nthat's a slower WAN link.\n\n220\n00:12:13.130 --> 00:12:14.620\nThat's going across the pond, right?\n\n221\n00:12:14.620 --> 00:12:18.750\nSo I don't want that\nreplicating At that same rate.\n\n222\n00:12:18.750 --> 00:12:22.510\nSo the first thing we gotta do is\nfigure out how to define these sites.\n\n223\n00:12:22.510 --> 00:12:26.510\nHow do we let Active Directory\nknow that London and New York and\n\n224\n00:12:26.510 --> 00:12:29.110\nGainesville are separate\nphysical locations.\n\n225\n00:12:29.110 --> 00:12:34.190\nBy just naming the OUs helps us, right,\nbut it doesn't help active directory.\n\n226\n00:12:34.190 --> 00:12:38.200\nAnd so that's gonna be done through\nactive directory sites And services.\n\n227\n00:12:38.200 --> 00:12:39.190\nSo let's take a look here.\n\n228\n00:12:39.190 --> 00:12:42.560\nI'm gonna open up Active Directory Sites\nand Services, and\n\n229\n00:12:42.560 --> 00:12:45.940\nwe'll wait for that console.\n\n230\n00:12:45.940 --> 00:12:48.920\nSometimes that console takes a minute\nbecause it's gotta read that\n\n231\n00:12:48.920 --> 00:12:53.000\nconfiguration partition and\nget all the information about our sites.\n\n232\n00:12:53.000 --> 00:12:57.060\nWhen we first install Active Directory,\nwe get one site.\n\n233\n00:12:57.060 --> 00:13:01.850\nAnd it's actually named the default first\nsite name, very creative name for it.\n\n234\n00:13:01.850 --> 00:13:05.530\nAnd, everything we do,\njust gets dumped under there.\n\n235\n00:13:05.530 --> 00:13:09.300\nYou've probably seen in this show and\nin other shows that when we've installed\n\n236\n00:13:09.300 --> 00:13:13.960\nactive directory, that I can pick what\nsite I want that command controller to be\n\n237\n00:13:13.960 --> 00:13:18.640\nin but I've never changed it because\nby default you only get One site.\n\n238\n00:13:18.640 --> 00:13:20.810\nSo as you start to grow,\nyou've got to come in here.\n\n239\n00:13:20.810 --> 00:13:22.900\nYou've got to create these new sites.\n\n240\n00:13:22.900 --> 00:13:23.720\nSo what I would do.\n\n241\n00:13:23.720 --> 00:13:27.540\nFor our little example,\nI've got Gainesville, New York and London.\n\n242\n00:13:27.540 --> 00:13:29.954\n>> All right.\n>> So I might come in here and\n\n243\n00:13:29.954 --> 00:13:33.739\njust start by renaming this first one,\nGNB.\n\n244\n00:13:33.739 --> 00:13:34.424\nAll right?\n\n245\n00:13:34.424 --> 00:13:37.560\nThen I can come back in here and\nI can start creating additional sites.\n\n246\n00:13:37.560 --> 00:13:39.579\nI'll say, New Site.\n\n247\n00:13:39.579 --> 00:13:43.142\nAnd I'm gonna call it LON for London.\n\n248\n00:13:43.142 --> 00:13:45.801\nAnd I've gotta pick a site link, right?\n\n249\n00:13:45.801 --> 00:13:49.922\nNow a site link is what links\nthe two sites together.\n\n250\n00:13:49.922 --> 00:13:54.750\nAnd it defines what transport protocol\nwe're gonna use for replication.\n\n251\n00:13:54.750 --> 00:13:57.560\nAnd we'll come back to that concept\nwhen we really start diving\n\n252\n00:13:57.560 --> 00:13:58.710\ninto the replication part.\n\n253\n00:13:58.710 --> 00:14:02.230\n>> Now Mike, before you go a lot\nfurther I saw that you actually changed\n\n254\n00:14:02.230 --> 00:14:03.520\nwhere you right clicked on that.\n\n255\n00:14:03.520 --> 00:14:04.650\nCan you show us that again?\n\n256\n00:14:04.650 --> 00:14:05.700\n>> Absolutely.\n\n257\n00:14:05.700 --> 00:14:07.150\nAnd it's gonna warn me.\n\n258\n00:14:07.150 --> 00:14:09.420\nI'm gonna talk about this here in\na minute, that there are not subnets.\n\n259\n00:14:09.420 --> 00:14:10.890\nI'm gonna click okay.\n\n260\n00:14:10.890 --> 00:14:15.170\nSo the first time I just right clicked\non an existing site and chose to rename.\n\n261\n00:14:15.170 --> 00:14:16.170\n>> Okay.\n>> But then when I wanna creat\n\n262\n00:14:16.170 --> 00:14:19.293\nan additional site\n>> I go up to sites at the top, right\n\n263\n00:14:19.293 --> 00:14:23.833\nclick and then new site and we'll make one\nfor, which one did I make already there?\n\n264\n00:14:23.833 --> 00:14:25.570\n>> I think London.\n\n265\n00:14:25.570 --> 00:14:28.050\n>> London so let's do New York City and\n\n266\n00:14:28.050 --> 00:14:31.900\nagain notice I can't click okay\nuntil I click a site link.\n\n267\n00:14:31.900 --> 00:14:36.290\nYou've got to have some way of linking\nthose two sites together so I can direct\n\n268\n00:14:36.290 --> 00:14:41.120\n>> Can replicate, and I'll click OK for\n\n269\n00:14:41.120 --> 00:14:41.760\nthat one as well.\n\n270\n00:14:41.760 --> 00:14:45.480\nSo now I've got these three sites, right.\n\n271\n00:14:45.480 --> 00:14:47.020\nBut, there really still is no definition,\n\n272\n00:14:47.020 --> 00:14:51.440\nright, it doesn't know what London is and\nwhat New York is and what Gainesville is.\n\n273\n00:14:51.440 --> 00:14:54.970\nIt's all done By subnet address,\nall right.\n\n274\n00:14:54.970 --> 00:14:58.800\nSubnets are how we're gonna\ndefine what our sites are.\n\n275\n00:14:58.800 --> 00:15:03.130\nSo, you have to set up your TCP/IP,\nyour subnets properly in order for\n\n276\n00:15:03.130 --> 00:15:04.220\nthis to work.\n\n277\n00:15:04.220 --> 00:15:05.640\nIf I define a site by subnet.\n\n278\n00:15:05.640 --> 00:15:08.450\nFor example,\nI'm gonna go in here to subnets now.\n\n279\n00:15:08.450 --> 00:15:12.849\nAnd I'm gonna right click on subnet and\nchoose new New Subnet.\n\n280\n00:15:14.370 --> 00:15:19.320\nAnd my prefix, I'm gonna say\n10.1.1.0/24 and I'll say that's\n\n281\n00:15:19.320 --> 00:15:24.150\npart of the Gainesville site and\nI'll click OK.\n\n282\n00:15:24.150 --> 00:15:29.830\nSo now it knows what IPs I'm\nusing in that Gainesville office.\n\n283\n00:15:29.830 --> 00:15:34.390\nAnd then I can go back, and\nhere you just create additional subnet's.\n\n284\n00:15:34.390 --> 00:15:36.830\nI'll do new subnet, and\nwe'll say we do 10.\n\n285\n00:15:36.830 --> 00:15:37.342\n1. 2. 0.\n\n286\n00:15:37.342 --> 00:15:41.694\n/ 24 for my London office.\n\n287\n00:15:41.694 --> 00:15:44.317\nAnd maybe London's bigger,\nwe got more than 1 subnet.\n\n288\n00:15:44.317 --> 00:15:47.463\nWe can add more subnet's to a single site.\n\n289\n00:15:47.463 --> 00:15:52.402\nI can say they use 10.1.2 and\n\n290\n00:15:52.402 --> 00:15:57.854\n10.1.3 .0/24 in London.\n\n291\n00:15:57.854 --> 00:16:00.755\nAnd then I'll add another one for\nthat New York site.\n\n292\n00:16:00.755 --> 00:16:06.777\nWe'll say New subnet And 10.1.4.0 /24.\n\n293\n00:16:06.777 --> 00:16:10.316\nAnd I'll put that in that New York site.\n\n294\n00:16:10.316 --> 00:16:13.370\nSo now, it knows, right.\n\n295\n00:16:13.370 --> 00:16:17.410\nWhen it sees a machine that's got\nthat IP address that's in that 10.1.3\n\n296\n00:16:17.410 --> 00:16:22.900\nsubnet range, it's going to know\nthat's part of the London site.\n\n297\n00:16:22.900 --> 00:16:25.380\nSo, that's how you're gonna\ndefine these sites, and\n\n298\n00:16:25.380 --> 00:16:29.200\ngo back to what I was saying originally,\nthat's why it's gotta be set up properly.\n\n299\n00:16:29.200 --> 00:16:33.280\nIf I have a sub-net that stretches\nacross physical boundaries.\n\n300\n00:16:33.280 --> 00:16:35.110\nWell, now I can't do this, right?\n\n301\n00:16:35.110 --> 00:16:39.070\nBecause if computers here in Gainesville\nare on the 10.1.1 and some of\n\n302\n00:16:39.070 --> 00:16:44.420\nthe computers in New York are also part\nof 10.1.1 sub-net, how can I tell it that\n\n303\n00:16:44.420 --> 00:16:48.470\nthis 10.1.1.1 address is part of New York,\nbut this 10.1.1.1 is part of Gainesville?\n\n304\n00:16:48.470 --> 00:16:50.570\nThere's no way to do that.\n\n305\n00:16:50.570 --> 00:16:53.473\nSo your subnets are how you're\ngonna define your sites,\n\n306\n00:16:53.473 --> 00:16:56.326\nwhich means you've got to\nplan all this out initially.\n\n307\n00:16:56.326 --> 00:16:59.247\nYou've gotta decide what subnet\nranges you're going to use and\n\n308\n00:16:59.247 --> 00:17:01.380\nthe different locations.\n\n309\n00:17:01.380 --> 00:17:03.720\nWhere was I going with that Ronnie?\n\n310\n00:17:03.720 --> 00:17:09.040\nSo, and then you go back and you assign\nthose subnets to the different sites.\n\n311\n00:17:09.040 --> 00:17:13.510\nAll right, so once we've got those subnets\nto find, and now the active directory\n\n312\n00:17:13.510 --> 00:17:17.470\nunderstands what G and V is, and\nwhat London is, and what New York is.\n\n313\n00:17:17.470 --> 00:17:21.310\nWe also need to move our servers\ninto the appropriate location.\n\n314\n00:17:21.310 --> 00:17:24.570\nNow when I say servers I'm only\ntalking about domain controllers.\n\n315\n00:17:24.570 --> 00:17:26.350\nActive directory sites and services, and\n\n316\n00:17:26.350 --> 00:17:30.890\nsites in general, don't care about\nmember servers or anything like that.\n\n317\n00:17:30.890 --> 00:17:32.680\nIt's going to be my domain controller.\n\n318\n00:17:32.680 --> 00:17:37.090\nSo when I look in here the only thing\nI'm gonna see are domain controllers.\n\n319\n00:17:37.090 --> 00:17:40.690\nAnd yes, that server 01 is\nactually running active directory,\n\n320\n00:17:40.690 --> 00:17:43.500\nwhich is why it's showing up in here.\n\n321\n00:17:43.500 --> 00:17:44.390\nAnd we move them.\n\n322\n00:17:44.390 --> 00:17:45.650\nYou can do it a couple ways.\n\n323\n00:17:45.650 --> 00:17:47.380\nI can right-click and move them.\n\n324\n00:17:47.380 --> 00:17:48.590\nI could use move.\n\n325\n00:17:48.590 --> 00:17:50.460\nI can drag and drop these guys, but\n\n326\n00:17:50.460 --> 00:17:56.440\nI'm gonna move Server 01 over to that\nLondon site, and I'll click okay.\n\n327\n00:17:56.440 --> 00:18:01.270\nSo now it knows DC 01 is in Gainesville.\n\n328\n00:18:01.270 --> 00:18:04.430\nDC02 or Server 01 in this case\nwhich was also a domain controller.\n\n329\n00:18:04.430 --> 00:18:06.490\nI should have renamed that.\n\n330\n00:18:06.490 --> 00:18:07.680\nIt is in that London site.\n\n331\n00:18:07.680 --> 00:18:12.630\nAnd that brings me to another good\npoint about sites, all right?\n\n332\n00:18:12.630 --> 00:18:16.953\nWe've said that we use sites to define our\nphysical boundaries in Active Directory.\n\n333\n00:18:16.953 --> 00:18:18.836\nAnd why?\n\n334\n00:18:18.836 --> 00:18:19.730\nWhy do we want to do that?\n\n335\n00:18:19.730 --> 00:18:21.661\nWell, to control that replication.\n\n336\n00:18:21.661 --> 00:18:22.650\nRight.\n\n337\n00:18:22.650 --> 00:18:26.950\nWe're gonna dive more into that, but\nthe intrasite replication where we're\n\n338\n00:18:26.950 --> 00:18:30.090\non that same LAN,\nthat can replicate as often as it wants.\n\n339\n00:18:30.090 --> 00:18:31.170\nI'm okay with that.\n\n340\n00:18:31.170 --> 00:18:34.300\nThat replication between sites,\nthough, from New York to London or\n\n341\n00:18:34.300 --> 00:18:35.660\nto Gainesville to New York.\n\n342\n00:18:35.660 --> 00:18:38.100\nThat I want a little bit more control on.\n\n343\n00:18:38.100 --> 00:18:42.709\nSo we create sites, and now we can control\nthe replication between those sites.\n\n344\n00:18:43.760 --> 00:18:48.990\nThe other thing that sites do for us,\nis they allow me to localize services.\n\n345\n00:18:48.990 --> 00:18:53.780\nWe mentioned earlier, that when you log on\nyou have to talk to a domain controller,\n\n346\n00:18:53.780 --> 00:18:56.105\nand it doesn't matter which domain\ncontroller you talk to, right?\n\n347\n00:18:56.105 --> 00:19:00.080\nThey've all know about your account\nbecause of the replication that occurs.\n\n348\n00:19:00.080 --> 00:19:04.820\nBut, if I'm logging in at the Gainesville\nlocation, do I really wanna wait for\n\n349\n00:19:04.820 --> 00:19:07.810\nmy log on traffic to go\nall the way to London and\n\n350\n00:19:07.810 --> 00:19:09.650\nback before I can log on to the machine?\n\n351\n00:19:09.650 --> 00:19:12.880\nWhen there's a domain controller sitting\nright in here in that server closet over\n\n352\n00:19:12.880 --> 00:19:15.800\nthere with gigabit speeds between me and\nthat domain controller.\n\n353\n00:19:16.930 --> 00:19:20.330\nWell, without sites,\nyou have no control over that process.\n\n354\n00:19:20.330 --> 00:19:24.140\nWhen your user goes to log on, it's gonna\nquery DNS and it's gonna say, hey I need\n\n355\n00:19:24.140 --> 00:19:28.690\nto log on, I need the IP address of\nsomebody that's running LDAP and Kerberos.\n\n356\n00:19:28.690 --> 00:19:32.570\nIt's gonna return a list and the first one\nin the list is the one that computer or\n\n357\n00:19:32.570 --> 00:19:34.230\nthat user is gonna attempt to connect to.\n\n358\n00:19:34.230 --> 00:19:37.660\nAnd that might be a server, that might\na domain controller right here in\n\n359\n00:19:37.660 --> 00:19:39.810\nGainesville, it also might be\na domain controller in London.\n\n360\n00:19:39.810 --> 00:19:41.095\nSo I have no way of controlling that.\n\n361\n00:19:41.095 --> 00:19:46.090\nWith sites, I can, I can say look,\nyou're in the Gainesville site,\n\n362\n00:19:46.090 --> 00:19:50.590\ntalk to a domain controller that's in\nGainesville, it's right there next to you.\n\n363\n00:19:50.590 --> 00:19:53.810\nIf you're up in the London site,\nand you're logging in up there,\n\n364\n00:19:53.810 --> 00:19:57.190\nuse one of the domain controllers\nthat's in that London, or\n\n365\n00:19:57.190 --> 00:19:59.800\nthat, I forget what I said now,\nin that New York site, right?\n\n366\n00:19:59.800 --> 00:20:02.040\nUse the domain controllers close to you.\n\n367\n00:20:02.040 --> 00:20:05.140\nWithout sites, I can't control\nthat process, so it's another big,\n\n368\n00:20:05.140 --> 00:20:06.170\nbig advantage, and\n\n369\n00:20:06.170 --> 00:20:11.190\nin any site aware application,\ncan actually take advantage of that.\n\n370\n00:20:11.190 --> 00:20:13.240\nActive Directory is not the only thing.\n\n371\n00:20:13.240 --> 00:20:14.800\nExchange can do that.\n\n372\n00:20:14.800 --> 00:20:17.590\nWhen I open up Outlook, and\nI want to check my mail, well,\n\n373\n00:20:17.590 --> 00:20:19.970\nwe've got a mailbox server\nhere in Gainesville, but\n\n374\n00:20:19.970 --> 00:20:23.580\nI've also got a mailbox server up in\nNew York, and another one in London.\n\n375\n00:20:23.580 --> 00:20:26.640\nDo I wanna wait for\nOutlook to reach out to London and\n\n376\n00:20:26.640 --> 00:20:29.300\nget my new mails and\ndisplay them in my Outlook?\n\n377\n00:20:29.300 --> 00:20:31.860\nOr would I rather it talk\nto the mailbox server\n\n378\n00:20:31.860 --> 00:20:34.400\nright here in the Gainesville location?\n\n379\n00:20:34.400 --> 00:20:37.940\nExchange is a site-aware application,\nand it can do that.\n\n380\n00:20:37.940 --> 00:20:40.770\nSo any site-aware application\ncan take care of it.\n\n381\n00:20:40.770 --> 00:20:42.940\nAnother one I wanted to mention too,\n\n382\n00:20:42.940 --> 00:20:47.070\nRonnie was the way I laid out these sites,\nit was Gainesville, New York, and London.\n\n383\n00:20:47.070 --> 00:20:50.140\nKeep in mind,\nit doesn't have to be physical locations.\n\n384\n00:20:50.140 --> 00:20:51.840\nWe do like to think of it that way.\n\n385\n00:20:51.840 --> 00:20:53.960\nAnd that's typically what we use it for.\n\n386\n00:20:53.960 --> 00:20:56.550\nBut let's say you've got an office\nbuilding that's, I don't know,\n\n387\n00:20:56.550 --> 00:20:57.130\nten stories high.\n\n388\n00:20:57.130 --> 00:20:57.690\nRight?\n\n389\n00:20:57.690 --> 00:21:00.390\nAnd you've got domain\ncontrollers on each floor.\n\n390\n00:21:00.390 --> 00:21:04.775\nAnd you want the users on the first floor\nto mainly talk to that domain controller\n\n391\n00:21:04.775 --> 00:21:05.894\non the first floor.\n\n392\n00:21:05.894 --> 00:21:07.693\nYou don't want to have to route\nit up to the second floor.\n\n393\n00:21:07.693 --> 00:21:12.309\nWell, if I do different subnets on\neach floor, I can define each one of\n\n394\n00:21:12.309 --> 00:21:17.180\nthose subnets as a separate site, and\nwe can localize services that way.\n\n395\n00:21:17.180 --> 00:21:18.940\nI can say that if you're on floor one,\n\n396\n00:21:18.940 --> 00:21:22.300\nthey talk to the domain controller that's\nright there on floor one, and you don't\n\n397\n00:21:22.300 --> 00:21:25.440\nhave to be routed up through to floor\ntwo or to floor ten or what have you.\n\n398\n00:21:25.440 --> 00:21:30.270\nOr a campus location where I've got\nseparate buildings all on the same campus.\n\n399\n00:21:30.270 --> 00:21:32.880\nI could set each building as its own site,\n\n400\n00:21:32.880 --> 00:21:35.830\nas long as I use different\nsubnets in each building.\n\n401\n00:21:35.830 --> 00:21:40.288\nAnd I could keep that traffic local to\nthat building for a log on traffic.\n\n402\n00:21:40.288 --> 00:21:44.560\nAnd I can control replication\nnow between those buildings.\n\n403\n00:21:44.560 --> 00:21:45.690\nSo, sites are very advantageous.\n\n404\n00:21:45.690 --> 00:21:50.708\nAgain, just a way that we can define the\nphysical layout of our active directory.\n\n405\n00:21:50.708 --> 00:21:54.237\n>> So Mike, it sounds like that once\nwe talk about setting up sites,\n\n406\n00:21:54.237 --> 00:21:58.535\nwe're really trying do this to make sure\nthat we can manage things a lot better,\n\n407\n00:21:58.535 --> 00:22:02.191\nallow for efficiency for our users\nin that site, but also you really\n\n408\n00:22:02.191 --> 00:22:05.877\nmentioned the whole beginning\nright is about replication itself.\n\n409\n00:22:05.877 --> 00:22:10.621\nAnd we had mentioned the term briefly but\nwe had never really got into it, and\n\n410\n00:22:10.621 --> 00:22:14.257\nthat's when you talked about\nintrasites and intersite,\n\n411\n00:22:14.257 --> 00:22:17.470\nso help us out with why\nthe sites help between that.\n\n412\n00:22:17.470 --> 00:22:20.680\n>> Yes it's really just a way that I\ncan And control that replication, and\n\n413\n00:22:20.680 --> 00:22:22.470\nRonny you know, I almost forgot something.\n\n414\n00:22:22.470 --> 00:22:23.840\n>> Okay.\n>> And I want to go back for\n\n415\n00:22:23.840 --> 00:22:25.290\none second into sites and services.\n\n416\n00:22:25.290 --> 00:22:30.160\nBecause we glossed right over that IP\nlink, or that default site link, and\n\n417\n00:22:30.160 --> 00:22:34.820\nI want to check that out as well,\nbecause when we add a site,\n\n418\n00:22:34.820 --> 00:22:38.468\nwe had to choose what site\nlink we wanted to use.\n\n419\n00:22:38.468 --> 00:22:43.000\nAnd I used that default one, the one just\nlike there was that default first site\n\n420\n00:22:43.000 --> 00:22:45.280\nname, there's also a default IP site link.\n\n421\n00:22:45.280 --> 00:22:50.220\nAnd we're gonna learn with replication\nhow these links are built,\n\n422\n00:22:50.220 --> 00:22:54.340\nhow it decides what domain controllers\nare gonna replicate with whom,\n\n423\n00:22:54.340 --> 00:22:57.590\nand the site link that's what\nconnects the sites together.\n\n424\n00:22:57.590 --> 00:23:01.380\nAnd that's where it's gonna to end\nup creating that replication link.\n\n425\n00:23:01.380 --> 00:23:06.354\nWell I've got one site linked so at this\npoint in fact if we go back to my drawing,\n\n426\n00:23:06.354 --> 00:23:09.273\nand let's see what I could use for\na site link.\n\n427\n00:23:09.273 --> 00:23:12.190\nBasically we have have\nsomething like this.\n\n428\n00:23:12.190 --> 00:23:17.060\nAll right, find my little circly icon.\n\n429\n00:23:19.790 --> 00:23:22.470\nChange that to something that\nwill show up a little better.\n\n430\n00:23:23.960 --> 00:23:25.389\nThere it is.\n\n431\n00:23:25.389 --> 00:23:26.783\nWe have this.\n\n432\n00:23:26.783 --> 00:23:31.002\nIf this white circle in fact you know\nwhat, let's change it to something\n\n433\n00:23:31.002 --> 00:23:35.786\na little easier to see there, Ronnie I'm\nhaving trouble with my, there we go.\n\n434\n00:23:35.786 --> 00:23:38.653\n[LAUGH] Not the font let's\nchange the line color.\n\n435\n00:23:38.653 --> 00:23:39.919\nThere we go.\n\n436\n00:23:39.919 --> 00:23:43.019\nSo now this green is gonna\nrepresent that site link,\n\n437\n00:23:43.019 --> 00:23:45.279\nthat default IP site link that I said.\n\n438\n00:23:45.279 --> 00:23:47.020\nSo, shoot.\n\n439\n00:23:47.020 --> 00:23:48.924\nIf I can get that guy.\n\n440\n00:23:48.924 --> 00:23:54.671\nWe have something that looks like this.\n\n441\n00:23:54.671 --> 00:23:59.130\nSo all of my sites are in\nthis one site link.\n\n442\n00:23:59.130 --> 00:24:03.654\nSo, what's gonnna to happen when\nthey look at trying to replicate Or\n\n443\n00:24:03.654 --> 00:24:06.940\nwhen they try to create\nthese replication links.\n\n444\n00:24:06.940 --> 00:24:09.240\nIt can create these replication\nlinks any way it wants.\n\n445\n00:24:09.240 --> 00:24:13.530\nWe might wanna little bit more\ncontrol over that process.\n\n446\n00:24:13.530 --> 00:24:19.110\nSo what we do is we create site links and\nwe add the sites to those site links.\n\n447\n00:24:19.110 --> 00:24:24.209\nFor example, wow, I am really\nstruggling with my drawing today.\n\n448\n00:24:24.209 --> 00:24:27.084\nWe'll grab this little site link here,\nand we're going to squish it up.\n\n449\n00:24:27.084 --> 00:24:35.084\nI might want to make a site\nlink between GNV and New York.\n\n450\n00:24:35.084 --> 00:24:40.220\nAnd then I might want to make another\n\n451\n00:24:40.220 --> 00:24:45.260\none between London and New York.\n\n452\n00:24:45.260 --> 00:24:49.320\nSo now, Gainesville and New York, these\ndomain controllers can replicate with\n\n453\n00:24:49.320 --> 00:24:53.070\neach other and New York and London domain\ncontrollers can replicate across that way.\n\n454\n00:24:53.070 --> 00:24:56.180\nBut, they are not gonna replicate\ndirectly from Gainesville to London.\n\n455\n00:24:56.180 --> 00:24:58.570\nSee how we are controlling\nthat a little bit?\n\n456\n00:24:58.570 --> 00:25:01.542\nSo it's the site links that\nwill allow me to set that up.\n\n457\n00:25:01.542 --> 00:25:05.134\nAnd really what we're doing is we're\ncurtailing where it's allowed to create\n\n458\n00:25:05.134 --> 00:25:06.500\nthese replications.\n\n459\n00:25:06.500 --> 00:25:09.854\nYou're only allowed to create\nbecause we're not manually creating\n\n460\n00:25:09.854 --> 00:25:11.834\nthose replication links, typically.\n\n461\n00:25:11.834 --> 00:25:16.540\nBut we're going to control where it's\nallowed to make those replication links\n\n462\n00:25:16.540 --> 00:25:18.375\nby creating these site links.\n\n463\n00:25:18.375 --> 00:25:21.074\nSo we're gonna define how\nthat's going to work and\n\n464\n00:25:21.074 --> 00:25:24.778\nagain that's done back in that\nActive Directory Sites and Services so\n\n465\n00:25:24.778 --> 00:25:28.059\nwhat I might do over here is I\nmight start by renaming this one.\n\n466\n00:25:29.340 --> 00:25:33.000\nAnd that default one that I get,\nI might call it GNV.\n\n467\n00:25:33.000 --> 00:25:39.126\nI don't know if it will let me use\nmy dash in here, NYC, all right.\n\n468\n00:25:39.126 --> 00:25:43.300\nNow when I first set up the sites, I put\nall three locations in that default site.\n\n469\n00:25:43.300 --> 00:25:46.484\nSo I need to pull up its properties, and\n\n470\n00:25:46.484 --> 00:25:51.417\nthey need to take London out of there,\nand I'll click okay.\n\n471\n00:25:51.417 --> 00:25:55.077\nSo now I've got a site link that's\njust between the Gainesville site and\n\n472\n00:25:55.077 --> 00:25:56.042\nthe New York site.\n\n473\n00:25:56.042 --> 00:26:02.083\nThen I create a new one, new site link,\nand I can name this one NYC-LON,\n\n474\n00:26:02.083 --> 00:26:07.354\nand I'll add the London site,\nand I'll add the New York site.\n\n475\n00:26:08.740 --> 00:26:09.959\nAnd we'll click OK.\n\n476\n00:26:09.959 --> 00:26:14.427\nSo now, I've got the way to control\nthe replication that's occurring between\n\n477\n00:26:14.427 --> 00:26:16.460\nGainesville and New York.\n\n478\n00:26:16.460 --> 00:26:22.850\nAnd control the replication that's\noccurring between New York and London.\n\n479\n00:26:22.850 --> 00:26:25.894\nAnd that's where the site\nlinks are where we are gonna\n\n480\n00:26:25.894 --> 00:26:28.542\nget the ability to\ncontrol that replication.\n\n481\n00:26:28.542 --> 00:26:31.423\nRemember I said the reason we create\nsites is to localize services and\n\n482\n00:26:31.423 --> 00:26:34.070\nto control that replication\nthat's occurring.\n\n483\n00:26:34.070 --> 00:26:35.380\nSite links are how we're gonna do that.\n\n484\n00:26:35.380 --> 00:26:37.350\nIf I go back and look at this site link,\n\n485\n00:26:37.350 --> 00:26:40.350\nand we're gonna dive\ninto the properties here.\n\n486\n00:26:40.350 --> 00:26:45.120\nThis is where we are going to\nbe able to control when and\n\n487\n00:26:45.120 --> 00:26:47.930\nhow often they're allowed\nto do that replication.\n\n488\n00:26:47.930 --> 00:26:51.910\nSo keep that in mind, when you set up\nthese sites, you're gonna get that default\n\n489\n00:26:51.910 --> 00:26:56.110\nIP site link, and all of your sites\nwill end up going into that link.\n\n490\n00:26:56.110 --> 00:26:57.470\nThat might not be what you want.\n\n491\n00:26:57.470 --> 00:27:02.510\nIf you want a little more control,\nsetting it up like I've done here,\n\n492\n00:27:02.510 --> 00:27:04.060\nwhere I can control.\n\n493\n00:27:04.060 --> 00:27:05.562\nCurtail?\nIf I can say that.\n\n494\n00:27:05.562 --> 00:27:08.050\n>> Curtail. [LAUGH] >> Where those\nlinks are being able to be created.\n\n495\n00:27:09.110 --> 00:27:11.970\n>> All right, Mike, the idea of\ncontrolling these links really is helpful.\n\n496\n00:27:11.970 --> 00:27:16.330\nEspecially, let's say that we do have slow\nlinks in between certain areas and we need\n\n497\n00:27:16.330 --> 00:27:19.320\nto make sure that, hey, we're not actually\ngetting bombarded or over that one link,\n\n498\n00:27:19.320 --> 00:27:22.540\neven though we might have two separate\nsites trying to head to New York there.\n\n499\n00:27:22.540 --> 00:27:25.090\nSo we can see where that does\nhelp in the replication.\n\n500\n00:27:25.090 --> 00:27:29.560\nIf we do this type of linking,\nwhat we're talking about, this should also\n\n501\n00:27:29.560 --> 00:27:33.360\nshow up on all the domain controllers\nindicating that at the same time.\n\n502\n00:27:33.360 --> 00:27:37.330\nSo that way there's no confusion of what's\ngonna be happening between those sites.\n\n503\n00:27:37.330 --> 00:27:39.870\nSo Mike, you showed us a lot\nof information on sites.\n\n504\n00:27:39.870 --> 00:27:42.170\nBut I think there's a lot more for\nus to go,\n\n505\n00:27:42.170 --> 00:27:45.990\nas far as replication in sites go,\nwill you come back for a part two?\n\n506\n00:27:45.990 --> 00:27:46.720\n>> Absolutely.\n\n507\n00:27:46.720 --> 00:27:50.380\nBecause we've seen how to set it up,\nbut how does it work,\n\n508\n00:27:50.380 --> 00:27:52.180\nwhat is it doing,\nwe still need to see all that.\n\n509\n00:27:52.180 --> 00:27:55.626\n>> Excellent, so, we do have a lot of\ninformation that we've got to make sure\n\n510\n00:27:55.626 --> 00:27:59.320\nthat we understand here,\nespecially when we're dealing with sites.\n\n511\n00:27:59.320 --> 00:28:01.600\nMost of us, if we've only worked\nin a single-site location,\n\n512\n00:28:01.600 --> 00:28:05.480\nyou're probably now going like I didn't\neven have a clue that there was so\n\n513\n00:28:05.480 --> 00:28:08.380\nmuch to do inside of sites and services\nbut there's a lot more for us to go and\n\n514\n00:28:08.380 --> 00:28:10.410\nthat means we are gonna go back for\na part two.\n\n515\n00:28:10.410 --> 00:28:13.120\nSo thank you, Mike, for showing us\neverything that you showed us here.\n\n516\n00:28:13.120 --> 00:28:17.221\nThank you also for joining us, too, for\nthis show on Active Directory on Sites and\n\n517\n00:28:17.221 --> 00:28:18.001\nReplication.\n\n518\n00:28:18.001 --> 00:28:20.917\nAnd, we're gonna go ahead and\ncall it a day there as well.\n\n519\n00:28:20.917 --> 00:28:24.126\nSo, signing off for\nITPro.TV, I'm Ronnie Wong.\n\n520\n00:28:24.126 --> 00:28:24.959\n>> And I'm Mike Rodrick.\n\n521\n00:28:24.959 --> 00:28:27.085\n>> And we'll see you next time.\n\n522\n00:28:27.085 --> 00:28:32.380\n[MUSIC]\n\n",
          "vimeoId": "146522387"
        },
        {
          "description": "In this episode, Ronnie and Mike take a look into the replication topology within sites and between sites.  Before starting replication, Mike shows how to create a site and then establish the links between sites so that replication can occur.  Then, the guys take a little time to show how DCs are put into sites and how clients use affinity to establish what site they are in.  Also taking a look the protocols used within sites and between sites for replication.",
          "length": "1895",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-5-1-sites_and_replication-pt2-111815-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-5-1-sites_and_replication-pt2-111815-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-5-1-sites_and_replication-pt2-111815-1-sm.jpg",
          "title": "AD Sites and Replication Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:12.408 --> 00:00:15.920\n>> Welcome to another\nexciting episode on ITPro TV.\n\n3\n00:00:15.920 --> 00:00:19.180\nAnd we're picking up on a part two and\nthe reason why, because there was so\n\n4\n00:00:19.180 --> 00:00:21.950\nmuch information in part one,\nit had to spill over into part two.\n\n5\n00:00:21.950 --> 00:00:24.927\nAnd we're going to actually\ncontinue on talking about sites and\n\n6\n00:00:24.927 --> 00:00:26.483\nActive Directory Replication.\n\n7\n00:00:26.483 --> 00:00:30.980\nAnd who better to help us than Mr.\nMike Rodrick Mike, we had really had so\n\n8\n00:00:30.980 --> 00:00:33.980\nmuch information jam packed in\nthere that we really needed to\n\n9\n00:00:33.980 --> 00:00:36.910\ncontinue this because there's no way we\nwere finishing that in that first show.\n\n10\n00:00:36.910 --> 00:00:40.910\n>> No, there's a lot of info that goes\ninto dealing with replication especially\n\n11\n00:00:40.910 --> 00:00:42.980\nwhen we start throwing in cites.\n\n12\n00:00:42.980 --> 00:00:45.400\nThat is a whole nother\nlevel of complexity, right?\n\n13\n00:00:45.400 --> 00:00:48.500\nIf we're a small shop and all of our\nmachines are in this one building and\n\n14\n00:00:48.500 --> 00:00:50.500\nwe're all on gigabyte LAN speeds or\nwhat have you,\n\n15\n00:00:50.500 --> 00:00:55.870\nthere's yeah it's a big difference from\ntrying to replicate across a WAN link or\n\n16\n00:00:55.870 --> 00:00:58.740\na demand dial connection up to New York or\nsomething like that.\n\n17\n00:00:58.740 --> 00:01:03.270\nSo we need to be able to definitely be\nable to differentiate between that.\n\n18\n00:01:03.270 --> 00:01:07.270\nWe had left off,\nwe had defined our sites, we created our,\n\n19\n00:01:07.270 --> 00:01:10.690\nwe renamed that default first site name\nand we created a couple additional sites.\n\n20\n00:01:10.690 --> 00:01:14.800\nWe created some sub net objects and\nwe associated those sub net objects\n\n21\n00:01:14.800 --> 00:01:18.080\nwith the different sites\nwe created because that's\n\n22\n00:01:18.080 --> 00:01:21.910\nhow active directory knows what that site\nis, it's based on that sub net address.\n\n23\n00:01:21.910 --> 00:01:24.450\nThen we also took a look\nat creating site links.\n\n24\n00:01:24.450 --> 00:01:29.800\nWe initially we started out with one\nsite link that encompassed all site but\n\n25\n00:01:29.800 --> 00:01:33.120\nwe said that when we\nset up the replication,\n\n26\n00:01:33.120 --> 00:01:37.520\nit uses that site link to determine\nwho can replicate with whom.\n\n27\n00:01:37.520 --> 00:01:40.400\nSo usually that default site\nlink is not appropriate.\n\n28\n00:01:40.400 --> 00:01:42.820\nWe want to create our own site links so\n\n29\n00:01:42.820 --> 00:01:45.320\nthat we can control where that\nreplication is occurring.\n\n30\n00:01:45.320 --> 00:01:50.200\nAnother example I thought of while we\nwere in that break between episodes.\n\n31\n00:01:50.200 --> 00:01:52.450\nYou might wanna set it\nup more like a hub and\n\n32\n00:01:52.450 --> 00:01:56.490\nspoke design right,\nyour corporate office is in New York and\n\n33\n00:01:56.490 --> 00:02:00.750\nyou've got offices in London and\nLos Angeles and Tokyo and Brisbane right.\n\n34\n00:02:00.750 --> 00:02:05.320\nWell you wanna set up most of the changes\noccur at that corporate office in New York\n\n35\n00:02:05.320 --> 00:02:09.700\nso rather than have one big\nsite link that has everything.\n\n36\n00:02:09.700 --> 00:02:13.710\nYou can set up more like a hub and\nspoke where one side link is New York and\n\n37\n00:02:13.710 --> 00:02:14.730\nLos Angeles.\n\n38\n00:02:14.730 --> 00:02:17.460\nAnother side link is New York and London.\n\n39\n00:02:17.460 --> 00:02:19.760\nAnother side link New York and Brisbane.\n\n40\n00:02:19.760 --> 00:02:22.090\nAnother one, New York and Tokyo.\n\n41\n00:02:22.090 --> 00:02:25.270\nSo you can see how now when\nI make a change in New York,\n\n42\n00:02:25.270 --> 00:02:28.170\nits going to replicate out,\nthe convergence time is going to\n\n43\n00:02:28.170 --> 00:02:32.400\nbe a lot shorter, because it can replicate\ndirectly with all those branch offices.\n\n44\n00:02:32.400 --> 00:02:37.062\nRather than have it set up like a loop,\nwhere I go New York, to Los Angeles,\n\n45\n00:02:37.062 --> 00:02:40.701\nto Brisbane, to Tokyo,\nto London, and back to New York.\n\n46\n00:02:40.701 --> 00:02:42.725\nCuz if everything's in one big site,\n\n47\n00:02:42.725 --> 00:02:46.910\nit really doesn't know the best way to\ndefine those replication topologies.\n\n48\n00:02:46.910 --> 00:02:50.361\nSo creating those site links,\na very important part of it.\n\n49\n00:02:50.361 --> 00:02:53.130\nLetting you help define\nwhere those site links or\n\n50\n00:02:53.130 --> 00:02:55.636\nwhere the replication is allowed to occur.\n\n51\n00:02:55.636 --> 00:02:59.058\n>> Now Mike you had said that earlier\nin that previous episode that when we\n\n52\n00:02:59.058 --> 00:03:02.364\nstart dealing with sites,\nthe only service that really those sites\n\n53\n00:03:02.364 --> 00:03:04.570\nare worried about is\nthe domain controller.\n\n54\n00:03:04.570 --> 00:03:06.670\nBut that brings us a good question though.\n\n55\n00:03:06.670 --> 00:03:09.911\nHow in the world do things like work\nstations understand what sites they're in\n\n56\n00:03:09.911 --> 00:03:12.133\nif the sites only care about\nthe domain controllers?\n\n57\n00:03:12.133 --> 00:03:15.015\n>> That's a great question Ronnie,\nand it's kind of a funny process.\n\n58\n00:03:15.015 --> 00:03:17.130\n[LAUGH] The clients, they need to know.\n\n59\n00:03:17.130 --> 00:03:20.440\nWe said we can use this for\nservice localization.\n\n60\n00:03:20.440 --> 00:03:23.880\nTo where if I'm in the Gainesville office,\nI want to authenticate with a domain\n\n61\n00:03:23.880 --> 00:03:26.780\ncontroller that's also in\nthe Gainesville office.\n\n62\n00:03:26.780 --> 00:03:29.710\nWell how does the client know\nit's in the Gainesville site or\n\n63\n00:03:29.710 --> 00:03:31.381\nthat there's even a site to find?\n\n64\n00:03:31.381 --> 00:03:33.590\nIt doesn't because that's all stored\nin that active directory database.\n\n65\n00:03:33.590 --> 00:03:37.050\nSo what's going to happen, and\nI've got a little drawing here\n\n66\n00:03:37.050 --> 00:03:39.990\nlet's say I've got this laptop\nI'm down in Gainesville visiting.\n\n67\n00:03:39.990 --> 00:03:44.140\nAnd I plug it into the network and\nI go to log in.\n\n68\n00:03:44.140 --> 00:03:47.670\nWell, what's gonna happen is\nthe client's gonna query DNS for\n\n69\n00:03:47.670 --> 00:03:51.000\na list of domain controllers and\nit's gonna retrieve that list and\n\n70\n00:03:51.000 --> 00:03:54.720\nthe first one in the list is the one\nit's gonna attempt to authenticate with.\n\n71\n00:03:54.720 --> 00:03:58.560\nAnd let's say the one that it\nattempts to talk to is in London.\n\n72\n00:03:59.660 --> 00:04:03.200\nWell when that London domain controller\ngets that authentication request,\n\n73\n00:04:03.200 --> 00:04:04.920\nit's gonna say wait a second.\n\n74\n00:04:04.920 --> 00:04:08.971\nI'm looking at your IP address and\nyou're in the Gainesville site.\n\n75\n00:04:08.971 --> 00:04:11.827\nThere are domain controllers\nin the Gainesville site so\n\n76\n00:04:11.827 --> 00:04:14.631\nwhy don't you log on with one\nof those guys down there.\n\n77\n00:04:14.631 --> 00:04:18.004\nSo my traffic actually did go all\nthe way out to London and back but\n\n78\n00:04:18.004 --> 00:04:23.300\nit's telling me no, authentic with one of\nthe domain controllers in Gainesville.\n\n79\n00:04:23.300 --> 00:04:26.291\nThen what happens is my client\nstores that information.\n\n80\n00:04:26.291 --> 00:04:28.810\nHe creates what we call an infinity.\n\n81\n00:04:28.810 --> 00:04:33.160\nHe says I am part of the Gainesville site,\nand so he requeries DNS and\n\n82\n00:04:33.160 --> 00:04:36.310\nsays, give me a list of domain\ncontrollers so I can authentic.\n\n83\n00:04:36.310 --> 00:04:38.710\nBy the way, I'm in the Gainesville site.\n\n84\n00:04:38.710 --> 00:04:43.879\nSo, when DNS responds, it's now going to\nuse that site container in DNS to say,\n\n85\n00:04:43.879 --> 00:04:48.301\nhere's a list of domain controllers\nthat are in the same site as you.\n\n86\n00:04:48.301 --> 00:04:52.301\nAnd now Michael and I can log on using\none of those domain controllers.\n\n87\n00:04:52.301 --> 00:04:53.801\nAnd from then on, it'll remember that.\n\n88\n00:04:53.801 --> 00:04:56.271\nIt stores it in the registry and\nfrom then on out,\n\n89\n00:04:56.271 --> 00:05:00.511\nit will always attempt to authenticate\nwith the main controllers in Gainesville.\n\n90\n00:05:00.511 --> 00:05:02.900\nNow when that client moves.\n\n91\n00:05:02.900 --> 00:05:07.720\nLet's say go up to London to visit well\nI've got that affinity for that Gainsville\n\n92\n00:05:07.720 --> 00:05:12.400\nsite so when I first plug into the network\nand I go to log on it's gonna say give\n\n93\n00:05:12.400 --> 00:05:15.970\nme a list of domain controllers,\nby the way, I'm in the Gainsville site.\n\n94\n00:05:15.970 --> 00:05:19.160\nAnd that Gainsville domain controller\nis going to receive that authentication\n\n95\n00:05:19.160 --> 00:05:22.300\nrequest and go hey,\nlook at your IP address.\n\n96\n00:05:22.300 --> 00:05:25.810\nYou're not in the Gainesville site,\nyou're actually in the London site.\n\n97\n00:05:25.810 --> 00:05:28.330\nThe client's going to\ngo thank you very much.\n\n98\n00:05:28.330 --> 00:05:32.890\nHe's going to update his affinity for\nnow London and he's going to requery DNS,\n\n99\n00:05:32.890 --> 00:05:35.070\nget a list of domain\ncontrollers in London and\n\n100\n00:05:35.070 --> 00:05:38.460\nagain from then on out\nhe has that affinity.\n\n101\n00:05:38.460 --> 00:05:42.661\nHe will remember the fact that he's\nin that London until he moves again.\n\n102\n00:05:42.661 --> 00:05:44.161\nSo it's an interesting\nthing with the clients.\n\n103\n00:05:44.161 --> 00:05:47.201\nThey really don't know\nuntil somebody tells them.\n\n104\n00:05:47.201 --> 00:05:50.417\nAnd then once somebody tells them\nthey'll remember that fact and\n\n105\n00:05:50.417 --> 00:05:54.341\nthey'll keep using it until somebody\ntells them, hey that's no longer true.\n\n106\n00:05:54.341 --> 00:05:57.776\nThey develop that affinity and\nthat's how that site localization or\n\n107\n00:05:57.776 --> 00:06:00.390\nthat service localization\nworks with these sites.\n\n108\n00:06:00.390 --> 00:06:02.901\nAnd it's the same for\nother services as well.\n\n109\n00:06:02.901 --> 00:06:06.805\nIf Exchange, for example, is a site\naware they'll create that infinity and\n\n110\n00:06:06.805 --> 00:06:10.661\nuntil somebody tells them otherwise,\nthey don't do anything different.\n\n111\n00:06:10.661 --> 00:06:14.770\nThey don't look at their IP address and\ngo I'm now in the London site.\n\n112\n00:06:14.770 --> 00:06:15.690\nThey don't know.\n\n113\n00:06:15.690 --> 00:06:18.531\nThat's all in active directory that\nthe main controllers take care of that.\n\n114\n00:06:18.531 --> 00:06:22.520\n>> Well Mike I'm actually glad that\nthe machines can work itself out.\n\n115\n00:06:22.520 --> 00:06:25.840\nI'd hate to actually have to go through\nthe process where every single workstation\n\n116\n00:06:25.840 --> 00:06:28.820\nor client has to be set up with a site\nin the same way that we were just\n\n117\n00:06:28.820 --> 00:06:30.700\ntalking about in the domain controllers.\n\n118\n00:06:30.700 --> 00:06:34.090\nBut that does lead us then to the idea\nof the replication between sites and\n\n119\n00:06:34.090 --> 00:06:37.270\neven within sites that we\nneed to address as well.\n\n120\n00:06:37.270 --> 00:06:38.222\n>> Exactly so let's break it down.\n\n121\n00:06:38.222 --> 00:06:41.150\nWe've got intra-site replication.\n\n122\n00:06:41.150 --> 00:06:43.942\nThat's replication within one of my sites.\n\n123\n00:06:43.942 --> 00:06:46.382\nI've got inter-site replication.\n\n124\n00:06:46.382 --> 00:06:48.942\nReplication between my sites, right?\n\n125\n00:06:48.942 --> 00:06:52.236\nAnd we've already said that we use site,\nwe define sites by high speed,\n\n126\n00:06:52.236 --> 00:06:54.410\nhigh availability connectivity, right?\n\n127\n00:06:54.410 --> 00:06:57.000\nSo, Gainesville,\nall the machines here have good,\n\n128\n00:06:57.000 --> 00:07:02.120\nhigh speed, reliable connectivity\nbetween each other, that's one site.\n\n129\n00:07:02.120 --> 00:07:06.730\nNew York has great connectivity between\nall the machines there in New York.\n\n130\n00:07:06.730 --> 00:07:07.960\nThat's another site.\n\n131\n00:07:07.960 --> 00:07:12.100\nBetween New York and Gainesville,\nnot so high speed, not so reliable.\n\n132\n00:07:12.100 --> 00:07:14.740\nThat's why we created those\nsites in the first place.\n\n133\n00:07:14.740 --> 00:07:18.380\nNow, when we look at\nintra-site replication,\n\n134\n00:07:18.380 --> 00:07:21.250\nreplication within a single site,\nall right?\n\n135\n00:07:21.250 --> 00:07:26.287\nThere's something called the KCC or\nthe Knowledge Consistency Checking that's\n\n136\n00:07:26.287 --> 00:07:31.111\ngoing to set up my replication's apology\nfor that intra-site replication.\n\n137\n00:07:31.111 --> 00:07:34.330\nIt's going to look at my main\ndomain controllers that I have and\n\n138\n00:07:34.330 --> 00:07:38.280\nit's going to set up the best most\nefficient replication pattern.\n\n139\n00:07:38.280 --> 00:07:40.530\nWhich domain controllers\nhave to replicate with who.\n\n140\n00:07:40.530 --> 00:07:43.450\nIt creates what we call\nreplication partners.\n\n141\n00:07:43.450 --> 00:07:47.715\nAnd it sets up what we call\na dual ring [COUGH] topology for\n\n142\n00:07:47.715 --> 00:07:49.952\nthese domain controllers.\n\n143\n00:07:49.952 --> 00:07:52.830\nAnd I've got another drawing\nthat I'll show you here.\n\n144\n00:07:52.830 --> 00:07:56.188\nHe's gonna see, let's say I have,\nthe magic number's actually seven.\n\n145\n00:07:56.188 --> 00:07:59.312\nAnywhere up to seven domain\ncontrollers within that site and\n\n146\n00:07:59.312 --> 00:08:01.648\nit'll create this simple ringed topology.\n\n147\n00:08:01.648 --> 00:08:02.728\nIt's very effective.\n\n148\n00:08:02.728 --> 00:08:09.020\nIf a change occurs here, he'll replicate\nthat to his replication partners.\n\n149\n00:08:09.020 --> 00:08:13.320\nOnce that change replicates to here,\nhe can replicate that out to its chain,\n\n150\n00:08:13.320 --> 00:08:16.080\nsend out a notification and\nso on and so forth.\n\n151\n00:08:16.080 --> 00:08:17.490\nAnd it'll replicate and pretty soon,\n\n152\n00:08:17.490 --> 00:08:21.620\nbefore you know it, all domain\ncontrollers are aware of the change.\n\n153\n00:08:21.620 --> 00:08:26.290\nNow what that KCC does, that Knowledge\nConsistency Checker, is he sets it up so\n\n154\n00:08:26.290 --> 00:08:30.970\nthat there's no more than three hops\nbetween any two domain controllers.\n\n155\n00:08:30.970 --> 00:08:36.790\nSo if we start, and let's change the color\non this guy here, we're gonna start here.\n\n156\n00:08:36.790 --> 00:08:39.040\nSo let's say the change occurs here.\n\n157\n00:08:39.040 --> 00:08:42.430\nWell, I can replicate that change to here,\nthat's one hop.\n\n158\n00:08:42.430 --> 00:08:44.680\nAnd then from there to here,\nthat's two hops.\n\n159\n00:08:44.680 --> 00:08:45.930\nAnd then to here, that's three hops.\n\n160\n00:08:45.930 --> 00:08:49.830\nIf I went the other way,\nI can get to this guy with one hop,\n\n161\n00:08:49.830 --> 00:08:53.730\nthe change can make it to here in two\nhops, can make it to here in three hops.\n\n162\n00:08:53.730 --> 00:08:57.475\nSo with this ring, no domain controller is\nmore than three hops away from any other\n\n163\n00:08:57.475 --> 00:08:58.468\ndomain controller.\n\n164\n00:08:58.468 --> 00:09:03.099\nSo a change can get to any other\ndomain controller within three hops.\n\n165\n00:09:05.420 --> 00:09:11.072\nWhere that changes is if we add one\nmore domain controller, all right.\n\n166\n00:09:11.072 --> 00:09:16.429\nSo let's kinda swap things around here,\nRonnie, we'll reconfigure\n\n167\n00:09:16.429 --> 00:09:21.710\nour links between these guys, and\nadd one more to represent this guy.\n\n168\n00:09:23.260 --> 00:09:25.631\nAnd now we've got a little\nbit of a problem.\n\n169\n00:09:25.631 --> 00:09:29.010\nI can get to here in one,\nI can get to here in two.\n\n170\n00:09:29.010 --> 00:09:30.766\nThree hops, I can make it to there.\n\n171\n00:09:30.766 --> 00:09:32.322\nSo these three guys are covered.\n\n172\n00:09:32.322 --> 00:09:37.790\nThe change started here,\none hop, two hops, three hops.\n\n173\n00:09:37.790 --> 00:09:39.780\nI cannot get to this domain controller,\n\n174\n00:09:39.780 --> 00:09:43.630\nno matter which way I go on that ring, I\ncan't get there in three hops, all right?\n\n175\n00:09:43.630 --> 00:09:47.715\nSo what the KCC is going to do is he's\nactually going to add an additional link.\n\n176\n00:09:47.715 --> 00:09:49.730\nHe's gonna come in here and\nsay you know what,\n\n177\n00:09:49.730 --> 00:09:53.950\nI'm gonna create a little shortcut across\nthis ring, and do something like that.\n\n178\n00:09:53.950 --> 00:09:58.071\nSo now I can get here in one, I can get to\nhere in two, I can get to here in three,\n\n179\n00:09:58.071 --> 00:10:00.812\nor I can even get to here in two,\none, two, right.\n\n180\n00:10:00.812 --> 00:10:05.026\nI can get this guy in one, this guy in\ntwo, this guy in one, this guy in two.\n\n181\n00:10:05.026 --> 00:10:06.349\nSo you see how I did that?\n\n182\n00:10:06.349 --> 00:10:08.344\nIt's gonna rearrange those links so\n\n183\n00:10:08.344 --> 00:10:12.792\nthat there's never any more than three\nhops between any two domain controllers.\n\n184\n00:10:12.792 --> 00:10:14.987\nThat's its job, that's what it does.\n\n185\n00:10:14.987 --> 00:10:18.133\nIt monitors that topology,\nif we add the main controllers.\n\n186\n00:10:18.133 --> 00:10:20.249\nIf one domain controller fails on me,\n\n187\n00:10:20.249 --> 00:10:24.031\nwill now all of sudden it might\nhave to redo that structure, right?\n\n188\n00:10:24.031 --> 00:10:27.937\nIt will rearrange those links so\nthat again, we've got a very reliable,\n\n189\n00:10:27.937 --> 00:10:29.575\nfast replication topology and\n\n190\n00:10:29.575 --> 00:10:33.440\nthere's no more than three hops\nbetween any of two domain controllers.\n\n191\n00:10:33.440 --> 00:10:36.099\n>> Now Mike, is this something\nthat happens periodically or\n\n192\n00:10:36.099 --> 00:10:38.811\nis this the same thing like\nthe pull replication that just,\n\n193\n00:10:38.811 --> 00:10:40.830\nwhenever they request\nit then it will do it?\n\n194\n00:10:40.830 --> 00:10:44.440\n>> It actually runs,\nby default it runs every 15 minutes.\n\n195\n00:10:44.440 --> 00:10:48.311\nSo every 15 minutes it's gonna\nre-analyze that topology and\n\n196\n00:10:48.311 --> 00:10:50.757\nsee if it needs to make any adjustments.\n\n197\n00:10:50.757 --> 00:10:53.317\nNow we can make our own replication links.\n\n198\n00:10:53.317 --> 00:10:56.285\nI can go in Active Directory Sites and\nServices and\n\n199\n00:10:56.285 --> 00:10:59.829\nI can create a manual link\nbetween two domain controllers.\n\n200\n00:10:59.829 --> 00:11:03.834\nBut honestly we don't do that often,\nthere's not a great need to do that.\n\n201\n00:11:03.834 --> 00:11:07.473\nOnly place I've ever really\nneeded to do that was for\n\n202\n00:11:07.473 --> 00:11:12.530\nfault tolerance with my FSMOs,\nmy flexible single master operations.\n\n203\n00:11:12.530 --> 00:11:14.884\nI want the current roll holder and\n\n204\n00:11:14.884 --> 00:11:19.264\nI want the proposed roll holder\nif the current one ever fails.\n\n205\n00:11:19.264 --> 00:11:23.310\nI want them to be direct replication\npartners because that'll minimize\n\n206\n00:11:23.310 --> 00:11:24.115\nthe latency.\n\n207\n00:11:24.115 --> 00:11:26.471\nIf that original role holder fails,\n\n208\n00:11:26.471 --> 00:11:31.107\nI know that the proposed role holder\nis almost up to date exactly with that\n\n209\n00:11:31.107 --> 00:11:35.980\nfailed domain controller because they\nwere direct replication partners.\n\n210\n00:11:35.980 --> 00:11:38.920\nThat's typically the only\ntime I make changes.\n\n211\n00:11:38.920 --> 00:11:40.470\nAnd if you do make changes or\n\n212\n00:11:40.470 --> 00:11:44.260\nif you make your own replication links,\nthe KCC will respect them.\n\n213\n00:11:44.260 --> 00:11:47.595\nIt will not change any links\nthat you've manually created.\n\n214\n00:11:47.595 --> 00:11:49.320\nIt'll redo the other topology so\n\n215\n00:11:49.320 --> 00:11:53.080\nthere's never anymore than three hops\nbetween any two domain controllers.\n\n216\n00:11:53.080 --> 00:11:56.990\nBut it won't mess with any manually\ncreated replication links.\n\n217\n00:11:58.180 --> 00:12:02.039\nNow the between site, and\nlet me back up, one more thing\n\n218\n00:12:02.039 --> 00:12:06.901\nabout the intra-site replication is\nit's based on change notification.\n\n219\n00:12:06.901 --> 00:12:11.525\nMeaning that when a change occurs, that\ndomain controller that took the change,\n\n220\n00:12:11.525 --> 00:12:14.540\nthe one that I was logged\ninto when I made that change,\n\n221\n00:12:14.540 --> 00:12:17.439\nhe's gonna now notify his\nreplication partners.\n\n222\n00:12:17.439 --> 00:12:21.257\nAnd in this case he's got three,\nhe's got one, two,\n\n223\n00:12:21.257 --> 00:12:25.260\nthree partners that he's\ndirectly replicating with.\n\n224\n00:12:25.260 --> 00:12:27.103\nThose are known as his\nreplication partners.\n\n225\n00:12:27.103 --> 00:12:29.065\nAnd he's gonna send out\na change notification.\n\n226\n00:12:29.065 --> 00:12:33.669\nAnd he's gonna do that in 30 seconds,\nwithin 30 seconds he'll\n\n227\n00:12:33.669 --> 00:12:38.618\nreplicate his first, or he'll notify\nhis first replication partner.\n\n228\n00:12:38.618 --> 00:12:43.160\nThen he's gonna wait three seconds,\nand send a change notification to\n\n229\n00:12:43.160 --> 00:12:46.720\na second replication partner,\nthree more seconds to the third.\n\n230\n00:12:46.720 --> 00:12:51.421\nSo he puts a little delay in there,\nhe doesn't notify all of them at once.\n\n231\n00:12:51.421 --> 00:12:54.939\nAnd that is so\nthat they're not all coming back to him.\n\n232\n00:12:54.939 --> 00:12:56.786\nRemember it's a pull replication,\n\n233\n00:12:56.786 --> 00:13:01.400\nas soon as they get that notification\nthey wanna pull that replication to them.\n\n234\n00:13:01.400 --> 00:13:04.850\nThis way not all three of them\nare pulling at the same time, right.\n\n235\n00:13:04.850 --> 00:13:05.637\nPut a little delay in there.\n\n236\n00:13:05.637 --> 00:13:10.644\nThere's a 30 seconds delay before\nthe first partner's notified and\n\n237\n00:13:10.644 --> 00:13:14.310\nthen there's a 3 second delay after that.\n\n238\n00:13:14.310 --> 00:13:18.790\nAnd so if we got a 30 second and then\na 3 second delay, if we think about it,\n\n239\n00:13:18.790 --> 00:13:22.380\nthere's no more than three hops\nbetween any two domain controllers.\n\n240\n00:13:22.380 --> 00:13:25.470\nI mean that means within\na couple of minutes,\n\n241\n00:13:25.470 --> 00:13:27.260\na change is going to have replicated.\n\n242\n00:13:27.260 --> 00:13:30.710\nAny change I make, every other domain\ncontroller within that location,\n\n243\n00:13:30.710 --> 00:13:35.300\nis gonna know about that change within\nminutes, really within seconds.\n\n244\n00:13:35.300 --> 00:13:39.590\nI mean within a minute or so,\neverybody is gonna understand that change.\n\n245\n00:13:39.590 --> 00:13:43.648\nEven if it was the 30 seconds, let's\nsay it took 30 seconds to notify him,\n\n246\n00:13:43.648 --> 00:13:45.813\nanother 30 seconds to notify this one.\n\n247\n00:13:45.813 --> 00:13:49.702\nAnd then, when he notified his replication\npartners there was that 30 second delay.\n\n248\n00:13:49.702 --> 00:13:54.484\nIn the end, a minute and a half\nbefore that change is replicated out,\n\n249\n00:13:54.484 --> 00:13:56.790\nthat's quick, that's fast.\n\n250\n00:13:56.790 --> 00:14:00.650\nBut we're talking intra-site replication,\nwe've got gigabit LAN speeds.\n\n251\n00:14:00.650 --> 00:14:05.593\nI'm not worried about that,\nI want that low convergence time, right,\n\n252\n00:14:05.593 --> 00:14:07.630\nthat very low latency there.\n\n253\n00:14:07.630 --> 00:14:10.712\n>> All right, Mike, so\nwhen we start talking about the idea then,\n\n254\n00:14:10.712 --> 00:14:13.060\nintra-site seems incredibly fast.\n\n255\n00:14:13.060 --> 00:14:16.620\nWhat is really different then\nbetween the intra-site and\n\n256\n00:14:16.620 --> 00:14:19.680\nthe inter-site besides\na little bit of latency?\n\n257\n00:14:19.680 --> 00:14:20.720\n>> And that's a great question.\n\n258\n00:14:20.720 --> 00:14:25.150\nThe inter-site, between sites,\nthis is where we can start controlling it.\n\n259\n00:14:25.150 --> 00:14:27.481\nBecause we've defined our sites and\nwe said,\n\n260\n00:14:27.481 --> 00:14:31.209\nI don't have good high speed connectivity\nbetween these two locations.\n\n261\n00:14:31.209 --> 00:14:35.851\nSo I don't want replication occurring\n30 seconds after a change is made.\n\n262\n00:14:35.851 --> 00:14:36.858\n>> [LAUGH]\n>> And\n\n263\n00:14:36.858 --> 00:14:40.500\nwe've got admins making changes\nto Active Directory all day long.\n\n264\n00:14:40.500 --> 00:14:44.462\nIf every time somebody makes a change to\nActive Directory it triggers replication,\n\n265\n00:14:44.462 --> 00:14:45.856\nthat link between New York and\n\n266\n00:14:45.856 --> 00:14:48.727\nGainesville is gonna be saturated\nwith replicate traffic.\n\n267\n00:14:48.727 --> 00:14:52.383\nEven though we've limited it to\njust replicating the attribute,\n\n268\n00:14:52.383 --> 00:14:54.798\nand only the last change\nto that attribute,\n\n269\n00:14:54.798 --> 00:14:58.330\nthat's still gonna be a lot\nof replication going on.\n\n270\n00:14:58.330 --> 00:14:59.169\nAnd I've got other users.\n\n271\n00:14:59.169 --> 00:15:02.220\nI've got users that are connecting to\nfile servers up there in New York.\n\n272\n00:15:02.220 --> 00:15:05.100\nI need that bandwidth for productivity for\n\n273\n00:15:05.100 --> 00:15:08.658\nmy employees, I can't saturate\nit with replication traffic.\n\n274\n00:15:08.658 --> 00:15:11.380\nSo with inter-site replication things\n\n275\n00:15:11.380 --> 00:15:14.460\nare gonna work a little bit differently,\nall right.\n\n276\n00:15:14.460 --> 00:15:18.310\nThe first thing we'll have to understand\nis that the KCC is gonna call upon\n\n277\n00:15:18.310 --> 00:15:24.910\nsomebody known as the ISTG,\nthe inter-site topology generator.\n\n278\n00:15:24.910 --> 00:15:29.980\nOne domain controller per\nsite is going to be the ISTG.\n\n279\n00:15:29.980 --> 00:15:32.520\nYou don't control this,\nit picks it on it's own.\n\n280\n00:15:32.520 --> 00:15:37.349\nWhereas the KCC keeps track of all\nthe domain controllers that are within\n\n281\n00:15:37.349 --> 00:15:40.358\nthat site,\nit's the ISTG that has that birds\n\n282\n00:15:40.358 --> 00:15:44.022\neye view of the entire domain\nwith the sites included.\n\n283\n00:15:44.022 --> 00:15:47.097\nHe knows about the different\nsites that are out there, and\n\n284\n00:15:47.097 --> 00:15:49.312\nthe site links that connect those sites.\n\n285\n00:15:49.312 --> 00:15:51.807\nAnd so it's gonna tell that the KCC,\n\n286\n00:15:51.807 --> 00:15:56.652\nthe Knowledge Consistency Checker,\nuses the ISTG to figure that out.\n\n287\n00:15:56.652 --> 00:16:00.477\nWhen it's setting up those replication\nlinks it has to say hey, ISTG,\n\n288\n00:16:00.477 --> 00:16:03.793\nHow can I get this replication\nfrom Gainesville to New York and\n\n289\n00:16:03.793 --> 00:16:08.385\nit'll tell you, there's a replicate, there\nis a site link between Gainesville and\n\n290\n00:16:08.385 --> 00:16:12.911\nNew York, there is not a site link between\nGainesville and London, so you can't set\n\n291\n00:16:12.911 --> 00:16:16.912\nup replication between, and let's\npull up my drawing here for a second.\n\n292\n00:16:16.912 --> 00:16:20.761\nYou won't be allowed to set up,\nthese two guys right here.\n\n293\n00:16:20.761 --> 00:16:23.672\nThese two domain controllers,\nthey can't be direct replication partners.\n\n294\n00:16:23.672 --> 00:16:27.150\nThere is no site link\ndirectly connecting then.\n\n295\n00:16:27.150 --> 00:16:29.510\nBut this guy and this guy could be.\n\n296\n00:16:29.510 --> 00:16:32.300\nAlright, let me dump that\nback to the back there.\n\n297\n00:16:32.300 --> 00:16:34.890\nSo it could set up between here and here.\n\n298\n00:16:34.890 --> 00:16:36.750\nNow the other thing that they have to do,\n\n299\n00:16:36.750 --> 00:16:38.790\nis they have to pick what we\ncall a bridge head server.\n\n300\n00:16:38.790 --> 00:16:42.050\nIf I make a change on this domain\ncontroller in Gainesville.\n\n301\n00:16:42.050 --> 00:16:46.620\nThat can replicate to all the other domain\ncontrollers in Gainesville instantly,\n\n302\n00:16:46.620 --> 00:16:47.620\nall right?\n\n303\n00:16:47.620 --> 00:16:51.510\nWhen I replicate across sites,\nI don't need every domain controller in\n\n304\n00:16:51.510 --> 00:16:56.200\nGainesville replicating with every domain\ncontroller in New York City, right?\n\n305\n00:16:56.200 --> 00:16:59.480\nIf I've got five domain controllers here\nand five domain controllers up there in\n\n306\n00:16:59.480 --> 00:17:02.930\nNew York, really what I need is\nthat change to replicate to the,\n\n307\n00:17:02.930 --> 00:17:06.720\nlet's say I make a change in one\ndomain controller in Gainesville,\n\n308\n00:17:06.720 --> 00:17:10.140\nwell through that entrust site\nreplication, all the domain\n\n309\n00:17:10.140 --> 00:17:15.360\ncontrollers in Gainesville are gonna learn\nabout that change, almost instantly.\n\n310\n00:17:15.360 --> 00:17:19.448\nBut then all I need is one domain\ncontroller to send that change up to\n\n311\n00:17:19.448 --> 00:17:20.618\nNew York, right?\n\n312\n00:17:20.618 --> 00:17:24.659\nOnce it gets to New York, then those\nfive domain controllers in New York,\n\n313\n00:17:24.659 --> 00:17:28.437\nthey can use their local LAN speed\nto replicate to all the other domain\n\n314\n00:17:28.437 --> 00:17:29.887\ncontrollers in New York.\n\n315\n00:17:29.887 --> 00:17:30.490\nDoes that make sense?\n\n316\n00:17:30.490 --> 00:17:35.630\nI don't need five domain controllers\ntelling New York about a single change.\n\n317\n00:17:35.630 --> 00:17:37.470\nRight?\nI only that change to get up,\n\n318\n00:17:37.470 --> 00:17:40.860\none domain controller to send\nthat change up there, and\n\n319\n00:17:40.860 --> 00:17:44.230\nthen they can replicate within that site\nusing that speed that they've got there.\n\n320\n00:17:44.230 --> 00:17:47.710\nTo replicate it to the other domain\ncontrollers in New York, right?\n\n321\n00:17:47.710 --> 00:17:48.840\nAnd the same thing for London.\n\n322\n00:17:48.840 --> 00:17:51.370\nI need one domain\ncontroller in New York to\n\n323\n00:17:51.370 --> 00:17:53.440\nsend that change to one\ndomain controller in London.\n\n324\n00:17:53.440 --> 00:17:57.510\nAnd then once the change is in London,\nthey can replicate it using their\n\n325\n00:17:57.510 --> 00:18:00.820\nLAN to all the other domain\ncontrollers that are in London.\n\n326\n00:18:00.820 --> 00:18:04.920\nThat one domain controller,\nfrom each location, that's responsible for\n\n327\n00:18:04.920 --> 00:18:08.860\nreplicating between sites is\nknown as the bridge head server.\n\n328\n00:18:08.860 --> 00:18:13.447\nThe ISTG is gonna pick your bridge head\nserver for you, he's gonna designate one\n\n329\n00:18:13.447 --> 00:18:17.834\nof those domain controllers to be\nresponsible for replicating those links or\n\n330\n00:18:17.834 --> 00:18:22.570\nthose changes to the other sites and\ncreating that replication link.\n\n331\n00:18:22.570 --> 00:18:27.050\nYou can change which one it picks, cuz\nyou really wanna pick a domain controller\n\n332\n00:18:27.050 --> 00:18:31.130\nthat is not doing as much as\nthe other ones, if you can, right?.\n\n333\n00:18:31.130 --> 00:18:35.110\nOr maybe one domain controller has a\nbetter WAN connection than the others, or\n\n334\n00:18:35.110 --> 00:18:38.660\nit's the only one that you've allowed\nto go through the firewall for\n\n335\n00:18:38.660 --> 00:18:40.480\nreplication purposes.\n\n336\n00:18:40.480 --> 00:18:42.790\nSo you can manually choose\nthe bridge head server.\n\n337\n00:18:42.790 --> 00:18:46.130\nThere are some downsides to that, though.\n\n338\n00:18:46.130 --> 00:18:49.020\nIf you let the ISTG and\nthe KCC pick your bridge head server for\n\n339\n00:18:49.020 --> 00:18:52.820\nyou, if that guy ever fails, it can\nimmediately flip it over to a different\n\n340\n00:18:52.820 --> 00:18:55.212\ndomain controller and\ncontinue that replication.\n\n341\n00:18:55.212 --> 00:18:58.820\nRight, if you set a preferred\nbridge head server,\n\n342\n00:18:58.820 --> 00:19:02.820\nif you manually specify this is the one\nI want you to use, it'll respect that.\n\n343\n00:19:02.820 --> 00:19:07.150\nRight, if that guy ever goes down,\nhe's like sorry,\n\n344\n00:19:07.150 --> 00:19:08.396\nthe one you picked wasn't available.\n\n345\n00:19:08.396 --> 00:19:10.902\n>> [LAUGH]\n>> You can specify more than one, you can\n\n346\n00:19:10.902 --> 00:19:15.670\nhave a rollover to that, but now that's\nsomething else that you've got to do.\n\n347\n00:19:15.670 --> 00:19:19.253\nSo keep that in mind, you can set\nthe bridge head server manually, but\n\n348\n00:19:19.253 --> 00:19:23.504\nif you do that, you're gonna wanna set up\na second one, an alternate bridge head,\n\n349\n00:19:23.504 --> 00:19:27.210\ncause if the first bridge head fails and\nyou didn't set up an alternate,\n\n350\n00:19:27.210 --> 00:19:30.294\nit's not gonna roll over to\nany other domain controllers.\n\n351\n00:19:30.294 --> 00:19:32.464\nIt's going to say sorry you told me\nwhich one to use, it's unavailable,\n\n352\n00:19:32.464 --> 00:19:34.214\nI can't replicate now between New York and\nGainesville and\n\n353\n00:19:34.214 --> 00:19:35.232\nthat's going to cause a problem.\n\n354\n00:19:35.232 --> 00:19:41.860\n>> Now Mike, how do we take a look\nat what the KCC is or the ISTG?\n\n355\n00:19:41.860 --> 00:19:43.470\n>> Mm hm.\n>> How do we actually see that?\n\n356\n00:19:43.470 --> 00:19:46.320\nWell, you can't too much,\n[LAUGH] unfortunately.\n\n357\n00:19:46.320 --> 00:19:49.620\nIf we come in here to\nActive Directory Sites and\n\n358\n00:19:49.620 --> 00:19:51.960\nServices, we can see a little bit of it.\n\n359\n00:19:51.960 --> 00:19:56.740\nIf I go to my Gainesville location and\nI expand out my little server and\n\n360\n00:19:56.740 --> 00:20:01.800\nclick on NTDS, here is an automatically\ngenerated link between\n\n361\n00:20:01.800 --> 00:20:06.830\nserver one and\nthe one I've got selected here, DC1.\n\n362\n00:20:06.830 --> 00:20:10.540\nSo this is from,\nserver one back to DC1, right?\n\n363\n00:20:11.730 --> 00:20:18.090\nNow if I go to server one, I can see\nthat there is a link between DC1.\n\n364\n00:20:18.090 --> 00:20:22.850\nNow I've got a very small environment\nhere, I've only got those two servers, but\n\n365\n00:20:22.850 --> 00:20:26.726\nthese automatically generated,\nthese are the ones that the KCC and\n\n366\n00:20:26.726 --> 00:20:30.133\nin combination with the ISTG\nbetween sites is generating.\n\n367\n00:20:30.133 --> 00:20:32.269\nNow, I can trigger replication.\n\n368\n00:20:32.269 --> 00:20:36.726\nI could right click on that and\nI can choose replicate now and\n\n369\n00:20:36.726 --> 00:20:41.469\nit will force that replication\nto occur right now, all right?\n\n370\n00:20:41.469 --> 00:20:45.726\nNow, so the next thing Ronnie that we\nprobably need to hit is this replication\n\n371\n00:20:45.726 --> 00:20:46.324\nprocess.\n\n372\n00:20:46.324 --> 00:20:49.249\nI've already started with my intra site,\nright?\n\n373\n00:20:49.249 --> 00:20:51.489\nInternally, we're talking very fast.\n\n374\n00:20:51.489 --> 00:20:53.324\nChange notification process.\n\n375\n00:20:53.324 --> 00:20:56.447\nAs soon as a change occurs,\nnotify your application partners.\n\n376\n00:20:56.447 --> 00:20:58.231\nWith that little bit of delay, so\n\n377\n00:20:58.231 --> 00:21:01.300\nthey're not all requesting\nthe change at the same time.\n\n378\n00:21:01.300 --> 00:21:02.380\nSo it happens very fast.\n\n379\n00:21:02.380 --> 00:21:03.670\nIt's also not compressed.\n\n380\n00:21:03.670 --> 00:21:04.551\nIt is encrypted.\n\n381\n00:21:04.551 --> 00:21:07.700\nBut it's not compressed,\nbecause with in a site,\n\n382\n00:21:07.700 --> 00:21:12.033\nwe're assuming, high speed,\nhigh availability, connectivity.\n\n383\n00:21:12.033 --> 00:21:16.239\nSo I don't need the overhead of having to\nstop and compress it before I send it,\n\n384\n00:21:16.239 --> 00:21:20.490\nand having to decompress it or\nuncompress it at the receiving end.\n\n385\n00:21:20.490 --> 00:21:21.680\nWe're on gigabit speeds.\n\n386\n00:21:21.680 --> 00:21:24.210\nThat's gonna take longer than just sending\nthe change over in the first place.\n\n387\n00:21:24.210 --> 00:21:25.501\nRight?\nSo it's uncompressed.\n\n388\n00:21:25.501 --> 00:21:30.156\nIt is encrypted, and it occurs very fast.\n\n389\n00:21:30.156 --> 00:21:35.190\nWhen we look at intersite, now we've got\na little bit of a difference here, right?\n\n390\n00:21:35.190 --> 00:21:38.940\nThat's why we set up sites in\nthe first place, to control services,\n\n391\n00:21:38.940 --> 00:21:42.690\nservice localization, and\nto control that replication.\n\n392\n00:21:42.690 --> 00:21:43.770\nSo let's take a look.\n\n393\n00:21:43.770 --> 00:21:46.450\nIf we pull up the Properties.\n\n394\n00:21:46.450 --> 00:21:49.870\nI'm going to go up to my site link\nbetween Gainesville and New York.\n\n395\n00:21:49.870 --> 00:21:51.759\nI'm going to pull up the Properties.\n\n396\n00:21:51.759 --> 00:21:56.759\nAnd on here, I can see two things,\nmy cost, and my replicate every.\n\n397\n00:21:56.759 --> 00:21:58.129\nAll right?\n\n398\n00:21:58.129 --> 00:22:02.200\nThe cost is simply\na metric that we assign.\n\n399\n00:22:02.200 --> 00:22:04.050\nThere might be more than one route and\n\n400\n00:22:04.050 --> 00:22:06.970\nsomething we haven't talked about,\nsite links are transitive.\n\n401\n00:22:06.970 --> 00:22:09.117\nSo, if we go back and\nlook at this drawing,\n\n402\n00:22:09.117 --> 00:22:12.519\neven though I've got a site link\nbetween Gainesville and New York,\n\n403\n00:22:12.519 --> 00:22:16.591\nI've got another site link between\nNew York and London, they're transitive.\n\n404\n00:22:16.591 --> 00:22:21.537\nMeaning that, this guy could end up\nreplicating with a guy in London by going\n\n405\n00:22:21.537 --> 00:22:25.957\nthrough the New York Site,\nthen we can turn that off on these sites.\n\n406\n00:22:25.957 --> 00:22:29.980\nWe can disable transitivity if we want to.\n\n407\n00:22:29.980 --> 00:22:33.920\nTypically, it's a good thing because\nI want them to be able to replicate\n\n408\n00:22:33.920 --> 00:22:36.260\nfrom Gainesville to London.\n\n409\n00:22:36.260 --> 00:22:41.200\nWe can set up a direct site link there, if\nwe wanted the replication to go that way.\n\n410\n00:22:41.200 --> 00:22:46.280\nSo we have a lot of control over how the\nreplicating between sites, create those\n\n411\n00:22:46.280 --> 00:22:50.860\nsite links to say, here's where you're\nlimited to creating those links, right,\n\n412\n00:22:50.860 --> 00:22:55.760\ncan only create them within a site link,\nwe can turn that transitively on or\n\n413\n00:22:55.760 --> 00:22:58.480\noff, to control whether or\nnot they're allowed to bridge.\n\n414\n00:22:58.480 --> 00:23:01.250\nIf you turn the transitively off,\nthen you're going to\n\n415\n00:23:01.250 --> 00:23:04.720\nstart having to create site link\nbridges to connect like Gainesville and\n\n416\n00:23:04.720 --> 00:23:09.040\nLondon, because it won't be able\nto go through that New York site.\n\n417\n00:23:09.040 --> 00:23:11.195\nAnd the cost has to do with that.\n\n418\n00:23:11.195 --> 00:23:13.427\nIf there's more than one route,\n\n419\n00:23:13.427 --> 00:23:17.580\nyou might have more than one\nconnection between two offices.\n\n420\n00:23:17.580 --> 00:23:20.806\nI've got that T1 line or\nsomething like that, but\n\n421\n00:23:20.806 --> 00:23:24.490\nI've got a backup dial-up\nline between those offices.\n\n422\n00:23:24.490 --> 00:23:26.165\nI don't want them to\nuse that dial-up line.\n\n423\n00:23:26.165 --> 00:23:30.230\nRight, let's say, well we could\nprobably draw this out here that,\n\n424\n00:23:30.230 --> 00:23:34.270\nI've got a link here, I've got a link\nhere, but I've also got a link\n\n425\n00:23:34.270 --> 00:23:37.850\nbetween these guys, and we'll just\ncheat and copy and paste this here.\n\n426\n00:23:37.850 --> 00:23:41.830\nI do have a link between Gainesville and\nLondon.\n\n427\n00:23:41.830 --> 00:23:44.588\nAll right,\njust in case New York's unavailable for\n\n428\n00:23:44.588 --> 00:23:47.721\nsome reason, I want replications\nstill to occur here, but\n\n429\n00:23:47.721 --> 00:23:50.428\nI don't want them to\nreplicate normally this way.\n\n430\n00:23:50.428 --> 00:23:52.788\nWell, we can change the cost.\n\n431\n00:23:52.788 --> 00:23:57.928\nI can give this side a cost of 100,\nlet's just do it this way.\n\n432\n00:23:57.928 --> 00:24:01.796\nWe'll say this guy's gonna be 100.\n\n433\n00:24:01.796 --> 00:24:06.456\nAnd let's do white, make that show\nup just a we bit better here.\n\n434\n00:24:06.456 --> 00:24:07.736\nAll right.\n\n435\n00:24:07.736 --> 00:24:12.040\nSo I can assign a cost of 100 to this one.\n\n436\n00:24:12.040 --> 00:24:17.902\nAnd then I can assign a cost\nof 100 to this one here.\n\n437\n00:24:17.902 --> 00:24:22.470\nAnd then I can assign a cost of.\n\n438\n00:24:22.470 --> 00:24:23.130\nLet's see, 500 to this one.\n\n439\n00:24:23.130 --> 00:24:28.453\nSo, now what's gonna\nhappen is it's gonna say,\n\n440\n00:24:28.453 --> 00:24:32.990\nwait, I've got two ways I can go.\n\n441\n00:24:32.990 --> 00:24:34.610\nBut going this way,\nit's gonna cost me 100, 200.\n\n442\n00:24:34.610 --> 00:24:37.360\nYou're gonna add those costs up.\n\n443\n00:24:37.360 --> 00:24:40.060\nIt will cost me 200 to go this way.\n\n444\n00:24:40.060 --> 00:24:43.020\nIt would cost me 500 to go this way,\nright.\n\n445\n00:24:43.020 --> 00:24:48.820\nSo, it's only going to use this 500\nroute if one of these is unavailable.\n\n446\n00:24:48.820 --> 00:24:51.610\nThis might be a very expensive demand\ndialing that you don't want to use and\n\n447\n00:24:51.610 --> 00:24:53.500\nonly if the other links are available.\n\n448\n00:24:53.500 --> 00:24:56.700\nGive it a higher cost it won't use it.\n\n449\n00:24:56.700 --> 00:24:59.400\nAll right,\nunless the other links are available.\n\n450\n00:24:59.400 --> 00:25:00.140\nThen it becomes the only.\n\n451\n00:25:00.140 --> 00:25:01.700\nOnly way to go so, so\n\n452\n00:25:01.700 --> 00:25:06.100\ncost is what allows me to control how they\nchoose to set up those replication links,\n\n453\n00:25:06.100 --> 00:25:11.596\nwithin those site links, I know there's\nsome confusing terminology there honey.\n\n454\n00:25:11.596 --> 00:25:14.140\n[LAUGH]\n>> You know when you started saying all\n\n455\n00:25:14.140 --> 00:25:17.520\nthat stuff, this is where all of a sudden\nthe numbers start rolling over my head,\n\n456\n00:25:17.520 --> 00:25:20.190\nand I'm like\n>> I can't believe this, this is amazing.\n\n457\n00:25:20.190 --> 00:25:23.110\nThat's why you have friends like\nMike Roderick when you have to\n\n458\n00:25:23.110 --> 00:25:27.090\nactually set up sites, but\nyou can see how complex it can get but\n\n459\n00:25:27.090 --> 00:25:28.900\nyou see it's actually essential, right?\n\n460\n00:25:28.900 --> 00:25:33.310\nAnd we keep sending replication traffic\nover those link and we can't control it,\n\n461\n00:25:33.310 --> 00:25:36.140\nwell that's gonna cost us\nmore in the long run, and\n\n462\n00:25:36.140 --> 00:25:38.210\nmay even slow down the way\nthe network works.\n\n463\n00:25:38.210 --> 00:25:41.280\n>> The setting up sites are very\nimportant in what we need to do.\n\n464\n00:25:41.280 --> 00:25:44.440\nNow, Mike a lot of times even though\nwe're now starting to see the theory and\n\n465\n00:25:44.440 --> 00:25:48.400\nunderstand that the idea behind intrasite\nas well as intersite replication,\n\n466\n00:25:48.400 --> 00:25:51.600\nwe need to talk about\nthe protocols a little bit right?\n\n467\n00:25:51.600 --> 00:25:52.140\n>> We do and before we get to the.\n\n468\n00:25:52.140 --> 00:25:52.800\n[CROSSTALK]\n>> Sorry.\n\n469\n00:25:52.800 --> 00:25:55.430\n>> I did skip one thing\nwe got off on costs and\n\n470\n00:25:55.430 --> 00:25:58.470\nI wanna come back to\nthe replicate every option here.\n\n471\n00:25:58.470 --> 00:26:00.340\n>> Remember, the whole reason\nwe set up these sites was to\n\n472\n00:26:00.340 --> 00:26:01.890\ncontrol that replication.\n\n473\n00:26:01.890 --> 00:26:04.120\nWithin a site,\nyou can replicate it all you want.\n\n474\n00:26:04.120 --> 00:26:06.600\nGo for it.\nYou know, change the notification.\n\n475\n00:26:06.600 --> 00:26:09.170\nBetween sites,\nwe don't use change notification.\n\n476\n00:26:09.170 --> 00:26:13.220\nSo, when those bridge head servers\nare replicating with each other,\n\n477\n00:26:13.220 --> 00:26:17.490\nthey don't notify the other partner\nas soon as a change has occurred.\n\n478\n00:26:17.490 --> 00:26:22.795\nSo, instead of doing change notification,\nwe do what we call polling.\n\n479\n00:26:22.795 --> 00:26:25.700\nS,o now, let's say I'm the domain\ncontroller in Gainesville.\n\n480\n00:26:25.700 --> 00:26:28.590\nAnd Ronnie's that bridge head\nserver up there in New York.\n\n481\n00:26:28.590 --> 00:26:32.280\nWell, I've got changes that I\nneed to replicate to New York.\n\n482\n00:26:32.280 --> 00:26:34.540\nI'm not going to notify Ronnie.\n\n483\n00:26:34.540 --> 00:26:36.660\nI'm going to wait until Ronnie asks me.\n\n484\n00:26:36.660 --> 00:26:37.260\nHey, Mike.\n\n485\n00:26:37.260 --> 00:26:39.530\nDo you have any changes\nthat we need to replicate?\n\n486\n00:26:39.530 --> 00:26:40.300\nI do, I've got a lot.\n\n487\n00:26:40.300 --> 00:26:41.230\nThey've been stacking up.\n\n488\n00:26:41.230 --> 00:26:42.750\nGlad you called, right.\n\n489\n00:26:42.750 --> 00:26:46.430\nThat's called polling instead\nof change notification.\n\n490\n00:26:46.430 --> 00:26:50.150\nAnd by default that's every 180 minutes,\nor every three hours.\n\n491\n00:26:50.150 --> 00:26:54.530\nSo, remember we said, within a site\nchanges are gonna replicate to all\n\n492\n00:26:54.530 --> 00:26:57.980\nthe other domain controllers\nwithin a couple minutes.\n\n493\n00:26:57.980 --> 00:27:00.760\nBut that change isn't gonna\nreplicate to New York for\n\n494\n00:27:00.760 --> 00:27:03.010\nanother three hours by default.\n\n495\n00:27:03.010 --> 00:27:03.560\nAll right?\n\n496\n00:27:03.560 --> 00:27:04.360\nNow, you can change that.\n\n497\n00:27:04.360 --> 00:27:07.640\nYou can come in here and\nyou can change the replicate every.\n\n498\n00:27:07.640 --> 00:27:08.740\nYou can say, you know what?\n\n499\n00:27:08.740 --> 00:27:10.260\nLet's replicate every 60 minutes.\n\n500\n00:27:10.260 --> 00:27:13.440\nMaybe three hours is too much latency.\n\n501\n00:27:13.440 --> 00:27:17.800\nWhen I make a change in Gainesville,\nI need New York to have that change,\n\n502\n00:27:17.800 --> 00:27:18.750\nand I don't wanna wait.\n\n503\n00:27:18.750 --> 00:27:20.160\nThree hours.\n\n504\n00:27:20.160 --> 00:27:24.130\nYou can actually drop this all\nthe way down to 15 minutes,\n\n505\n00:27:24.130 --> 00:27:27.220\nthat's as low as you can\ngo with the replicate ever.\n\n506\n00:27:27.220 --> 00:27:30.020\nYou could also change the schedule.\n\n507\n00:27:30.020 --> 00:27:32.330\nRight?\nI don't want any replication occurring.\n\n508\n00:27:32.330 --> 00:27:37.360\nLet's say that we got a maintenance\nwindow that occurs at 8:00 pm.\n\n509\n00:27:37.360 --> 00:27:37.960\nRight?\nWell,\n\n510\n00:27:37.960 --> 00:27:40.250\nit don't want then replicating\nat all between 8 and 10 PM,\n\n511\n00:27:40.250 --> 00:27:44.330\nbecause I've got other things\ngoing on in my network.\n\n512\n00:27:44.330 --> 00:27:46.960\nI can come in here and say,\nall right, you know what?\n\n513\n00:27:46.960 --> 00:27:50.651\nFor, let's say,\nMonday through Friday from 8 PM to\n\n514\n00:27:50.651 --> 00:27:56.010\nmidnight, I don't want any\nreplication through here at all.\n\n515\n00:27:56.010 --> 00:27:58.860\nI guess it gets backups going on or\nsomething else going on.\n\n516\n00:27:58.860 --> 00:28:02.020\nSo, you start to see\nthe difference between intrasite\n\n517\n00:28:02.020 --> 00:28:04.060\nwhere it occurs frequently, you know,\n\n518\n00:28:04.060 --> 00:28:08.280\nquickly, uncompressed, as often as\nthey want, change notification.\n\n519\n00:28:08.280 --> 00:28:11.660\nIntersite, we have all\nthe control we need.\n\n520\n00:28:11.660 --> 00:28:13.540\nWe can control the cost of the site links.\n\n521\n00:28:13.540 --> 00:28:16.610\nWe can control which way they\ncan replicate We can control\n\n522\n00:28:16.610 --> 00:28:19.080\nhow often they replicate\nwith this replicate every,\n\n523\n00:28:19.080 --> 00:28:23.520\nand we can control when they\nreplicate by using that schedule.\n\n524\n00:28:23.520 --> 00:28:29.160\nSo, the replication now between\nsites is under our control.\n\n525\n00:28:29.160 --> 00:28:33.160\nIt's also compressed, so\nwhen we're travelling\n\n526\n00:28:33.160 --> 00:28:36.290\nacross that WAN length it's going\nto compress those changes As well.\n\n527\n00:28:36.290 --> 00:28:40.500\nOr compress that replication so\nthat it is a little bit smaller,\n\n528\n00:28:40.500 --> 00:28:43.100\ntakes up a little bit less bandwidth.\n\n529\n00:28:44.370 --> 00:28:47.650\nAll right, so now back to, so\nthat's I think probably good for\n\n530\n00:28:47.650 --> 00:28:50.200\nthe controlling the replication.\n\n531\n00:28:50.200 --> 00:28:52.460\nThe other thing we do have to worry about,\nas Ronnie mentioned,\n\n532\n00:28:52.460 --> 00:28:54.480\nwas the protocol that we're using.\n\n533\n00:28:54.480 --> 00:28:55.620\nTo replicate.\n\n534\n00:28:55.620 --> 00:28:59.640\nNormal active directory replication\nis gonna go across RPC over IP.\n\n535\n00:28:59.640 --> 00:29:02.950\nSo, your remote procedure\ncall over internet protocol.\n\n536\n00:29:02.950 --> 00:29:04.280\nRPC over IP.\n\n537\n00:29:04.280 --> 00:29:10.550\nThat's gonna be intrasite,\nRPC over IP is always used intrasite.\n\n538\n00:29:12.000 --> 00:29:14.830\nWhen we look at intersite,\nbetween Gainesville and\n\n539\n00:29:14.830 --> 00:29:17.610\nNew York, I can use RPC over IP.\n\n540\n00:29:17.610 --> 00:29:19.675\nOr, I can do SMTP.\n\n541\n00:29:19.675 --> 00:29:26.940\nWe can actually use\nSMTP to replicate this.\n\n542\n00:29:26.940 --> 00:29:30.820\nI'll say, I don't think I\nknow anybody who uses SMTP.\n\n543\n00:29:30.820 --> 00:29:33.259\nThe reason you might use it is because\n\n544\n00:29:34.970 --> 00:29:38.310\nI can't think of any good reason\nto use SMTP to be honest with you.\n\n545\n00:29:38.310 --> 00:29:41.540\nIt does do a little more of the store and\n\n546\n00:29:41.540 --> 00:29:46.250\nforward where the receiving\nend has to be online.\n\n547\n00:29:46.250 --> 00:29:49.960\nIt can go ahead and\nwait until the other guy comes up online.\n\n548\n00:29:49.960 --> 00:29:54.360\nThere's some serious downsides to The SMTP\nreplication for active directory.\n\n549\n00:29:54.360 --> 00:29:56.390\nOne, it can't be used in intrasite.\n\n550\n00:29:56.390 --> 00:29:57.040\nIt's only intersite.\n\n551\n00:29:57.040 --> 00:30:00.650\nTwo, it cannot replicate\nthe domain partition.\n\n552\n00:30:00.650 --> 00:30:05.050\nIt can only replicate the configuration\npartition and the scheme partition.\n\n553\n00:30:05.050 --> 00:30:10.780\nSo, if you've got domain controllers that\nare part of the same domain at either site\n\n554\n00:30:10.780 --> 00:30:12.510\nThey can't replicate the domain partition,\nand\n\n555\n00:30:12.510 --> 00:30:14.020\nthey have to be able replicate that right?\n\n556\n00:30:14.020 --> 00:30:15.490\nLike if you look at my drawing here,\n\n557\n00:30:15.490 --> 00:30:18.030\nI mean these are all\npart of the same domain.\n\n558\n00:30:18.030 --> 00:30:21.400\nSo, if I can't replicate\nthe domain partition across there\n\n559\n00:30:21.400 --> 00:30:23.190\nsmtp is not going to work for me.\n\n560\n00:30:23.190 --> 00:30:28.970\nThe only time you ever use smtp is if\nyou need to replicate between two domain\n\n561\n00:30:28.970 --> 00:30:33.000\nfloors that were in different domains\nacross cuz remember, different domains,\n\n562\n00:30:33.000 --> 00:30:36.630\nthey still share the schema partition and\nthe configuration partition.\n\n563\n00:30:36.630 --> 00:30:40.710\nSo, there is some replication that\noccurs between domain controllers\n\n564\n00:30:40.710 --> 00:30:41.740\nin different domains.\n\n565\n00:30:41.740 --> 00:30:47.755\nBut if they're part of the same domain\nSMTP replication is not gonna work.\n\n566\n00:30:47.755 --> 00:30:50.175\nAnd Ronnie,\nI know we've got more to talk about and\n\n567\n00:30:50.175 --> 00:30:52.535\nI think I've talked a little too long.\n\n568\n00:30:52.535 --> 00:30:54.975\n>> Gracious.\n>> Cuz we still gotta talk about\n\n569\n00:30:54.975 --> 00:30:57.300\nreplication conflicts\n>> As well as,\n\n570\n00:30:57.300 --> 00:31:00.150\nthere was something else\nthat just popped in my head.\n\n571\n00:31:00.150 --> 00:31:02.510\nSo, we got a little bit\nmore to talk about.\n\n572\n00:31:02.510 --> 00:31:04.240\n>> All right.\nWell, actually that sounds like it's\n\n573\n00:31:04.240 --> 00:31:06.320\na great place to go ahead and\nalso end this episode.\n\n574\n00:31:06.320 --> 00:31:08.440\nAnd that means we're gonna have\nto come back for a part three.\n\n575\n00:31:08.440 --> 00:31:10.070\nMike, part three, you ready for it?\n\n576\n00:31:10.070 --> 00:31:10.980\n>> I think so.\n\n577\n00:31:10.980 --> 00:31:12.640\n>> All right.\nSo, we have a part three coming up.\n\n578\n00:31:12.640 --> 00:31:13.530\nBut do take some time and\n\n579\n00:31:13.530 --> 00:31:17.220\nmake sure that you do review the concepts\nof this particular show that we've just\n\n580\n00:31:17.220 --> 00:31:20.170\ndone because there's a lot there\nespecially when we deal with\n\n581\n00:31:20.170 --> 00:31:24.110\nthe idea of sites and now the idea of\nreplication between those sites as well.\n\n582\n00:31:24.110 --> 00:31:27.450\nSo, signing off for\nIT Pro TV I'm Ronnie Wong.\n\n583\n00:31:27.450 --> 00:31:28.560\n>> And I'm Mike Rodrick.\n\n584\n00:31:28.560 --> 00:31:34.490\n>> And we'll see you next time.\n\n",
          "vimeoId": "146522437"
        },
        {
          "description": "in this episode, Ronnie and Mike continue to show more about replication and establish that there are not only inter site and intrusive but also how the AD partitions are replicated as well.  This essentially creates and additional replication topology.  Then, they end up talking about how replication conflicts can happen and the different ways that they do occur between replication partners.",
          "length": "1197",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-5-1-sites_and_replication-pt3-111815-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-5-1-sites_and_replication-pt3-111815-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-5-1-sites_and_replication-pt3-111815-1-sm.jpg",
          "title": "AD Sites and Replication Part 3",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:12.629 --> 00:00:15.796\nWelcome to another exciting\nepisode right here on ITProTV.\n\n3\n00:00:15.796 --> 00:00:17.045\nI'm your host, Ronnie Wong,\n\n4\n00:00:17.045 --> 00:00:20.150\nand today we're talking about\nworking with Active Directory.\n\n5\n00:00:20.150 --> 00:00:23.930\nSpecifically talking about, well now\na part three in terms of sites and\n\n6\n00:00:23.930 --> 00:00:28.680\nActive Directory replication, and we're\nactually continuing to move on cuz there\n\n7\n00:00:28.680 --> 00:00:31.880\nwas so much that we had to cover that\nwe had to spill over onto a part three.\n\n8\n00:00:31.880 --> 00:00:34.560\nAnd who better to help us out\nthen Mister Mike Rodrick?\n\n9\n00:00:34.560 --> 00:00:37.320\nMike, will still have a lot to cover here.\n\n10\n00:00:37.320 --> 00:00:41.960\nSo help us, tell us where we've left off,\nand then help us to pick back up.\n\n11\n00:00:41.960 --> 00:00:45.462\n>> I promised the light there at the end\nof the tunnel, you can see it now.\n\n12\n00:00:45.462 --> 00:00:48.462\nIt's down there,\nit's getting closer and closer.\n\n13\n00:00:48.462 --> 00:00:50.925\nThere really is a lot of information,\nand heck,\n\n14\n00:00:50.925 --> 00:00:54.180\nas I go through here I'm like,\nthere's more we can talk about.\n\n15\n00:00:54.180 --> 00:00:57.560\nBut we were left off with part two,\nwe were talking about replication and\n\n16\n00:00:57.560 --> 00:00:59.320\nthe different protocols.\n\n17\n00:00:59.320 --> 00:01:05.200\nAnd we talked about how IP or RPC over IP,\nin particular, is what we use intra-site.\n\n18\n00:01:05.200 --> 00:01:09.350\nIt's also the prefered method\nto replicate between sites.\n\n19\n00:01:09.350 --> 00:01:14.630\nIt uses a lower speed and it compresses\nit, but it is the prefered method.\n\n20\n00:01:14.630 --> 00:01:19.088\nAnd we said that SMTP could also be\nused to replicate between sites, but\n\n21\n00:01:19.088 --> 00:01:20.962\nit has some major drawbacks.\n\n22\n00:01:20.962 --> 00:01:26.129\nAnd the biggest one being that it\ncannot replicate the domain partition.\n\n23\n00:01:26.129 --> 00:01:27.333\nAnd we need to go back and\n\n24\n00:01:27.333 --> 00:01:30.550\ntake a look at that,\nbecause we haven't mentioned that yet.\n\n25\n00:01:30.550 --> 00:01:32.940\nSo let's talk about that.\n\n26\n00:01:32.940 --> 00:01:37.610\nWe have, in other episodes, talked about\nthe Active Directory database, and\n\n27\n00:01:37.610 --> 00:01:41.040\nhow it's a logically broken up\ninto three partitions, right?\n\n28\n00:01:41.040 --> 00:01:42.150\nAnd let's do a refresher.\n\n29\n00:01:42.150 --> 00:01:43.920\nYou can take a look at my screen here.\n\n30\n00:01:43.920 --> 00:01:46.840\nWe've got the schema partition,\nthe configuration partition, and\n\n31\n00:01:46.840 --> 00:01:49.420\nthe domain partition, right?\n\n32\n00:01:49.420 --> 00:01:53.350\nWell the schema,\nif you remember, is forest wide.\n\n33\n00:01:53.350 --> 00:01:57.900\nThat means every domain controller in\nmy forest, not the domain, I could have\n\n34\n00:01:57.900 --> 00:02:03.310\nmultiple domains in my forest, every\ndomain, they all share the same schema.\n\n35\n00:02:03.310 --> 00:02:04.690\nThere's one schema per forest.\n\n36\n00:02:04.690 --> 00:02:10.370\nThe configuration partition\nstores forest-wide information,\n\n37\n00:02:10.370 --> 00:02:13.860\ntopology about the forest itself,\nwhat domains exist.\n\n38\n00:02:13.860 --> 00:02:15.750\nWhat domain controllers\nare within those domains,\n\n39\n00:02:15.750 --> 00:02:18.180\nand we could have more than one domain,\nright?\n\n40\n00:02:18.180 --> 00:02:21.300\nSo both of those partitions\nare what we call forest wide.\n\n41\n00:02:21.300 --> 00:02:24.070\nThat means every domain\ncontroller in the entire forest,\n\n42\n00:02:24.070 --> 00:02:26.460\nregardless of what domain\nthe domain controller is in,\n\n43\n00:02:26.460 --> 00:02:30.520\nevery domain controller in the entire\nforest gets a copy of those.\n\n44\n00:02:30.520 --> 00:02:34.711\nThe domain partition, however,\nhas domain specific objects.\n\n45\n00:02:34.711 --> 00:02:40.130\nUser accounts, computer accounts, groups,\nprinters, all that fun stuff, right?\n\n46\n00:02:40.130 --> 00:02:44.796\nOnly the domain controllers within that\ndomain get a copy of the domain partition.\n\n47\n00:02:44.796 --> 00:02:46.962\nOther domain controllers\nfrom other domains?\n\n48\n00:02:46.962 --> 00:02:50.145\nThey've got their own domain partition\nwith their users and their computers and\n\n49\n00:02:50.145 --> 00:02:51.190\ntheir printers, right?\n\n50\n00:02:51.190 --> 00:02:54.640\nSo they don't share that\nacross the domain boundary.\n\n51\n00:02:54.640 --> 00:02:57.990\nSo what that means to us is\nthere's more than one replication\n\n52\n00:02:57.990 --> 00:02:59.630\ntopology being setup by the KCC.\n\n53\n00:02:59.630 --> 00:03:03.680\nThe scheme partition has to replicate\nto all the main controllers,\n\n54\n00:03:03.680 --> 00:03:07.030\nregardless of what domain they're in,\nthere's one topology.\n\n55\n00:03:07.030 --> 00:03:11.510\nThe domain partition only replicates\ndomain controllers within that domain.\n\n56\n00:03:11.510 --> 00:03:13.110\nThere's another topology.\n\n57\n00:03:13.110 --> 00:03:17.379\nA second domain has it's own domain\ncontroller with its own domain partition.\n\n58\n00:03:17.379 --> 00:03:18.337\nThere's another topology, right?\n\n59\n00:03:18.337 --> 00:03:21.212\nSo there's really a lot of\nthings going on in here.\n\n60\n00:03:21.212 --> 00:03:25.004\nNow I've got a little drawling right that\nhopefully will either confuse you or-\n\n61\n00:03:25.004 --> 00:03:26.337\n>> [LAUGH]\n\n62\n00:03:26.337 --> 00:03:27.210\n>> Or make you think this is\n\n63\n00:03:27.210 --> 00:03:28.000\nsuppose to be in 3D.\n\n64\n00:03:28.000 --> 00:03:31.058\nIf you break out your little red and\nblue glasses right now.\n\n65\n00:03:31.058 --> 00:03:34.500\nNow, no I'm kidding, it's not 3D.\n\n66\n00:03:34.500 --> 00:03:35.912\nBut it does represent or\n\n67\n00:03:35.912 --> 00:03:40.297\ngive us the ability to see the different\ntopologies that will be created.\n\n68\n00:03:40.297 --> 00:03:42.836\nThis is my forest, right?\n\n69\n00:03:42.836 --> 00:03:43.985\nI've got Domain A, and\n\n70\n00:03:43.985 --> 00:03:47.330\nI probably should have colored\nthe domain controllers themselves.\n\n71\n00:03:47.330 --> 00:03:49.110\nIn fact, you know what, Ronnie?\n\n72\n00:03:49.110 --> 00:03:50.337\nLet's have some real fun.\n\n73\n00:03:50.337 --> 00:03:54.629\nWe'll make these guys blue also,\nall right?\n\n74\n00:03:54.629 --> 00:03:56.212\nCan you still see them if they're blue?\n\n75\n00:03:56.212 --> 00:03:56.879\nI think so.\n\n76\n00:03:56.879 --> 00:03:57.700\n>> Yeah.\nPretty much.\n\n77\n00:03:57.700 --> 00:04:01.605\n>> I don't know if I really like\ndoing that, but you get the idea.\n\n78\n00:04:01.605 --> 00:04:04.310\n>> [LAUGH]\n>> So these guys, all right, one, two,\n\n79\n00:04:04.310 --> 00:04:05.220\nthree, four.\n\n80\n00:04:05.220 --> 00:04:07.230\nThese are from domain A.\n\n81\n00:04:07.230 --> 00:04:12.870\nThese two and these two down at the bottom\nare part of domain B, all right?\n\n82\n00:04:12.870 --> 00:04:16.170\nSo what you see is that the domain\ncontrollers from domain B,\n\n83\n00:04:16.170 --> 00:04:19.740\nthey're the only ones that are replicating\nthat domain B is the main partition,\n\n84\n00:04:19.740 --> 00:04:21.470\nthat's those red arrows there.\n\n85\n00:04:21.470 --> 00:04:26.004\nThe blue arrows represent\ndomain A's domain partition.\n\n86\n00:04:26.004 --> 00:04:30.245\nOnly the domain wholes that are part of\ndomain A, are replicating domain A's,\n\n87\n00:04:30.245 --> 00:04:32.795\ndomain partition, that's a tongue twister.\n\n88\n00:04:32.795 --> 00:04:33.836\n>> It is.\n\n89\n00:04:33.836 --> 00:04:36.976\n>> But the green arrows represent\nthe schema partition and\n\n90\n00:04:36.976 --> 00:04:39.110\nthe configuration partition.\n\n91\n00:04:39.110 --> 00:04:42.710\nAnd notice it doesn't matter\nwhat domain you're a part of.\n\n92\n00:04:42.710 --> 00:04:45.942\nEverybody's a part of that replication\ntopology so it can make that nice,\n\n93\n00:04:45.942 --> 00:04:46.570\nsimple ring.\n\n94\n00:04:46.570 --> 00:04:50.412\nThere's more than seven, so\nthere would a shortcut created there,\n\n95\n00:04:50.412 --> 00:04:54.337\nwe talked about that in a previous\nepisode, but just to visualize it.\n\n96\n00:04:54.337 --> 00:04:58.212\nYou'll see that that replicates to\nall domain controllers in the forest.\n\n97\n00:04:58.212 --> 00:05:02.444\nSo it's something we've got to be aware\nespecially when we start troubleshooting\n\n98\n00:05:02.444 --> 00:05:06.072\nreplication, trying to figure out\nwho's replicating with whom, and\n\n99\n00:05:06.072 --> 00:05:10.001\nwhat that KCC is doing when it's setting\nup those links is understanding that\n\n100\n00:05:10.001 --> 00:05:12.254\nthe partitions replicate independently.\n\n101\n00:05:12.254 --> 00:05:15.470\nWe're not replicating the entire\nActive Directory database.\n\n102\n00:05:15.470 --> 00:05:18.790\nWe're replicating changes\nwithin a particular partition,\n\n103\n00:05:18.790 --> 00:05:21.460\nall the way down to the attribute level.\n\n104\n00:05:21.460 --> 00:05:24.780\nSo when I change the phone number for\nRonnie's account,\n\n105\n00:05:24.780 --> 00:05:28.046\nthat's occurring in the domain\npartition in domain A.\n\n106\n00:05:28.046 --> 00:05:32.455\nSo it's only gonna replicate that change\nto other domain controllers that hold\n\n107\n00:05:32.455 --> 00:05:34.379\na copy of that partition, right?\n\n108\n00:05:34.379 --> 00:05:37.403\nThis domain controller up here\ndoes not have a copy of domain A's\n\n109\n00:05:37.403 --> 00:05:38.870\ndomain partition.\n\n110\n00:05:38.870 --> 00:05:41.720\nSo it's not gonna be part of\nthat replication process.\n\n111\n00:05:41.720 --> 00:05:47.295\nThe other thing I don't have on this\ndrawing would be a global catalog server.\n\n112\n00:05:47.295 --> 00:05:50.609\nRemember what we talked about with\nthe global catalog, that's an index for\n\n113\n00:05:50.609 --> 00:05:51.504\nthe entire forest.\n\n114\n00:05:51.504 --> 00:05:56.421\nA global catalog has a copy of\nevery domain's domain partition.\n\n115\n00:05:56.421 --> 00:05:59.710\nSo that would get that change\nif it occurred, right?\n\n116\n00:05:59.710 --> 00:06:02.580\nHe would receive all changes\nto all domain partitions.\n\n117\n00:06:02.580 --> 00:06:05.950\nSo it's a really complex, I mean, we try\nto draw it out and make it look simple,\n\n118\n00:06:05.950 --> 00:06:09.090\nbut it's a pretty complex thing\nthat this KCC is taking care of.\n\n119\n00:06:09.090 --> 00:06:09.990\nAnd thank gosh, right?\n\n120\n00:06:09.990 --> 00:06:12.920\nI mean, we don't have to\nmanually set up that topology.\n\n121\n00:06:12.920 --> 00:06:15.650\n>> There is no doubt that if I\nhad to manually set this up,\n\n122\n00:06:15.650 --> 00:06:17.950\nI would mess up at least one of those.\n\n123\n00:06:17.950 --> 00:06:19.962\nBut the very fact that it\nknows how to do it, right?\n\n124\n00:06:19.962 --> 00:06:23.326\nIt knows how to actually do\nthe replication between all of those\n\n125\n00:06:23.326 --> 00:06:27.770\ndifferent, the schema, the configuration\nof the domain, really does help us out\n\n126\n00:06:27.770 --> 00:06:31.087\nwithout us having to get involved\nin it is pretty much the key.\n\n127\n00:06:31.087 --> 00:06:33.872\nThe other thing that we have to worry\nabout though then is that there is\n\n128\n00:06:33.872 --> 00:06:35.422\na possibility of conflicts, right?\n\n129\n00:06:35.422 --> 00:06:36.836\n>> Indeed there is.\n\n130\n00:06:36.836 --> 00:06:39.041\nWhen we talk about\nmulti-master replication,\n\n131\n00:06:39.041 --> 00:06:42.170\nwe said that that's one of the great\nthings about Active Directory.\n\n132\n00:06:42.170 --> 00:06:45.700\nWe've got many writable copies, in fact,\nthey're all writable except for\n\n133\n00:06:45.700 --> 00:06:47.570\nthose read-only domain controllers.\n\n134\n00:06:47.570 --> 00:06:50.193\nThat way, if one goes down,\nI can still make changes,\n\n135\n00:06:50.193 --> 00:06:53.171\nI can still create new objects,\ncuz they're all writeable.\n\n136\n00:06:53.171 --> 00:06:57.081\nBut as soon as you introduce\nthis multi-master concept,\n\n137\n00:06:57.081 --> 00:06:59.810\nwe also introduce the risk of conflict.\n\n138\n00:06:59.810 --> 00:07:04.060\nIf there's only writeable copy,\nI really can't have replication conflicts,\n\n139\n00:07:04.060 --> 00:07:07.970\nbecause the only place changes are\noccurring are at that one writeable copy.\n\n140\n00:07:07.970 --> 00:07:10.220\nBut now that I've got more\nthan one writeable copy,\n\n141\n00:07:10.220 --> 00:07:15.330\nI can have two different admins connecting\nto two different domain controllers\n\n142\n00:07:15.330 --> 00:07:19.945\nat the same time, making changes to\nthe same object, to the same attribute.\n\n143\n00:07:19.945 --> 00:07:20.880\n>> Mm-hm.\n\n144\n00:07:20.880 --> 00:07:24.260\n>> Now, when those domain controllers\ntry to replicate that change,\n\n145\n00:07:24.260 --> 00:07:26.570\nwhich one do they keep, right?\n\n146\n00:07:26.570 --> 00:07:28.623\n>> Yeah.\n>> And we think about it this way,\n\n147\n00:07:28.623 --> 00:07:33.420\nI'm on to doman controller one and\nI change Wes's phone number to 555-1212.\n\n148\n00:07:33.420 --> 00:07:36.607\nRonnie's on domain contoller two,\nand at the same time,\n\n149\n00:07:36.607 --> 00:07:39.671\nhe's changing his phone\nnumber to 555-1313.\n\n150\n00:07:39.671 --> 00:07:41.853\nWell, they both notify\nthe replication partners,\n\n151\n00:07:41.853 --> 00:07:43.297\nthey go to replicate that change.\n\n152\n00:07:43.297 --> 00:07:45.296\nHey, Wes' number is 1212.\n\n153\n00:07:45.296 --> 00:07:45.961\nNo, it's not.\n\n154\n00:07:45.961 --> 00:07:48.672\nWes' new number is 1313.\n\n155\n00:07:48.672 --> 00:07:50.171\nWhich one do I keep, right?\n\n156\n00:07:50.171 --> 00:07:52.010\nThat's a replication conflict.\n\n157\n00:07:52.010 --> 00:07:54.840\nThat's one type of replication conflict.\n\n158\n00:07:54.840 --> 00:07:59.750\nAll right, there's actually four different\nthings that can happen with multi-master.\n\n159\n00:07:59.750 --> 00:08:02.920\nSo it's actually a little bit more simple\nthan I probably make it out to be.\n\n160\n00:08:02.920 --> 00:08:05.379\nThere's four types of\nreplication conflicts.\n\n161\n00:08:05.379 --> 00:08:09.726\nThere's the making a change to the same\nobject at the same time on different\n\n162\n00:08:09.726 --> 00:08:11.046\ndomain controllers.\n\n163\n00:08:11.046 --> 00:08:14.046\nNow this is done, again,\nat the attribute level.\n\n164\n00:08:14.046 --> 00:08:17.088\nRemember I said that Active Directory\ndoesn't have to replicate the entire\n\n165\n00:08:17.088 --> 00:08:17.620\npartition.\n\n166\n00:08:17.620 --> 00:08:20.730\nIt doesn't have to replicate\nthe entire object.\n\n167\n00:08:20.730 --> 00:08:23.920\nIt only has to replicate\nthe attribute that's been changed.\n\n168\n00:08:23.920 --> 00:08:29.134\nSo if I change Wes's phone number and\nRonnie changes Wes's e-mail address,\n\n169\n00:08:29.134 --> 00:08:31.590\nthere's no replication conflict.\n\n170\n00:08:31.590 --> 00:08:33.754\nTwo different attributes, right?\n\n171\n00:08:33.754 --> 00:08:37.401\nBoth changes to the same object, but\nthey're changes to the different\n\n172\n00:08:37.401 --> 00:08:40.337\nattributes, so\nthere will be no replication conflict.\n\n173\n00:08:40.337 --> 00:08:43.176\nOne domain controller's saying\nhere's Wes's new phone number,\n\n174\n00:08:43.176 --> 00:08:47.070\nthe other domain controller says and\nhere's Wes's new e-mail address.\n\n175\n00:08:47.070 --> 00:08:49.171\nNo conflict, weŕe all good.\n\n176\n00:08:49.171 --> 00:08:52.786\nBut if we´re changing the same attribute\nat the same time on two different domain\n\n177\n00:08:52.786 --> 00:08:55.087\ncontrollers, that´s when\nthe conflict occurs.\n\n178\n00:08:55.087 --> 00:08:58.087\nActive Directory simply looks\nat time stamp versions.\n\n179\n00:08:58.087 --> 00:09:03.720\nEvery time a change is made,\nthat change is stamped with a few things.\n\n180\n00:09:03.720 --> 00:09:07.520\nThe guet of the originator,\nwhere that change first occurred.\n\n181\n00:09:07.520 --> 00:09:10.049\nRight, because by the time my\ndomain controller gets it or\n\n182\n00:09:10.049 --> 00:09:11.907\nby the time domain controller six gets it,\n\n183\n00:09:11.907 --> 00:09:14.504\nit's been replicated through\nother domain controllers.\n\n184\n00:09:14.504 --> 00:09:18.897\nSo in there is the originating domain\ncontroller from where the change came\n\n185\n00:09:18.897 --> 00:09:22.254\nfrom, as well as the time stamp\nthat the change was done.\n\n186\n00:09:22.254 --> 00:09:27.117\nAnd so when we get that conflict, where\ntwo people changing the same attribute at\n\n187\n00:09:27.117 --> 00:09:31.712\nthe same time, when we get that type\nof conflict, it's done by time stamp.\n\n188\n00:09:31.712 --> 00:09:37.211\nI say the same time, understand that it's\nnot gonna be the exact same time, right?\n\n189\n00:09:37.211 --> 00:09:40.171\nI make the change, at 8:05.\n\n190\n00:09:40.171 --> 00:09:43.129\nRonny makes it at 8:05, and 15 seconds.\n\n191\n00:09:43.129 --> 00:09:46.649\nWe have to start getting down to\nthese really small time frames, and\n\n192\n00:09:46.649 --> 00:09:50.060\nit's kind of hard to comprehend\nas humans sometimes.\n\n193\n00:09:50.060 --> 00:09:54.550\nBut that replication occurs really\nquickly within a site, but not so\n\n194\n00:09:54.550 --> 00:09:56.780\nquickly between sites, right?\n\n195\n00:09:56.780 --> 00:09:58.760\nWe said three hours was the default.\n\n196\n00:09:58.760 --> 00:10:02.440\nSo, if Ronnie's in New York and\nI'm in Gainesville,\n\n197\n00:10:02.440 --> 00:10:05.730\nreal possibility of us changing\nthe same attribute at the same time,\n\n198\n00:10:05.730 --> 00:10:08.230\nright, within that three hour window.\n\n199\n00:10:08.230 --> 00:10:11.810\nNow, when they replicate,\nthe conflict occurs.\n\n200\n00:10:11.810 --> 00:10:13.850\nAnd it just says well which\nchange was done last?\n\n201\n00:10:13.850 --> 00:10:19.129\nWhichever change is done last,\nthat is gonna be the one that went.\n\n202\n00:10:19.129 --> 00:10:21.996\nThe other type of conflict we\ncan run into is really two,\n\n203\n00:10:21.996 --> 00:10:26.088\nremember I said there was four, we're\ngoing to combine two of them right here.\n\n204\n00:10:26.088 --> 00:10:32.547\nEither adding or moving an object\ninto a deleted object, all right?\n\n205\n00:10:32.547 --> 00:10:35.047\nOr what they call under a deleted parent.\n\n206\n00:10:35.047 --> 00:10:38.952\nLet's say that on one domain controller,\n\n207\n00:10:38.952 --> 00:10:43.297\nI'm creating a user\naccount in the host's OU.\n\n208\n00:10:43.297 --> 00:10:48.753\nBut on another domain controller,\nRonnie is deleting the host's OU.\n\n209\n00:10:48.753 --> 00:10:53.426\nWell now, when they replicate,\none of the domain controllers saying,\n\n210\n00:10:53.426 --> 00:10:56.421\nhey here's a new user to\nput in the host's OU.\n\n211\n00:10:56.421 --> 00:10:59.921\nBut another domain controller is telling\neverybody the host OU is no longer.\n\n212\n00:10:59.921 --> 00:11:01.628\nIt's being deleted.\n\n213\n00:11:01.628 --> 00:11:04.660\nWell now I've got this object and\nnowhere to put, right, that new user.\n\n214\n00:11:04.660 --> 00:11:05.330\nWhere does it go?\n\n215\n00:11:05.330 --> 00:11:09.880\nThe OU that I want to put it in\nhas been deleted off of different\n\n216\n00:11:09.880 --> 00:11:10.610\ndomain controller.\n\n217\n00:11:10.610 --> 00:11:14.840\nSo what happens, Active Directory has a\nspecial container called a lost and found.\n\n218\n00:11:14.840 --> 00:11:19.031\nThe object will actually get moved into\nthat container cuz it can't move it,\n\n219\n00:11:19.031 --> 00:11:23.287\nyou can't add it or move it, right,\nbecause the container itself is gone, so\n\n220\n00:11:23.287 --> 00:11:27.045\nit just shoves it into this lost and\nfound, and that's all it can do.\n\n221\n00:11:27.045 --> 00:11:31.331\nIt's gonna be up to us to go in and\nlook at that lost and found container and\n\n222\n00:11:31.331 --> 00:11:36.319\ngo, there's that user count that was\nsupposed to be moved into the host OU, but\n\n223\n00:11:36.319 --> 00:11:37.753\nthe host OU is deleted.\n\n224\n00:11:37.753 --> 00:11:41.502\nWe recreate it,\nwe have a different OU called hosts and\n\n225\n00:11:41.502 --> 00:11:45.587\ndirectors, we're gonna put\nit in there instead, right?\n\n226\n00:11:45.587 --> 00:11:50.138\nSo if you ever try to move an object, or\ncreate a new object in a container, and\n\n227\n00:11:50.138 --> 00:11:54.902\nthat container's going to be moved\nsomewhere else, it's the conflict you're\n\n228\n00:11:54.902 --> 00:11:59.546\ngoing to end up with, and it's solved by\njust putting it in the lost and found.\n\n229\n00:11:59.546 --> 00:12:03.113\nI liken it to the lost and found box\nyou find at a restaurant, you got all\n\n230\n00:12:03.113 --> 00:12:07.129\nthe sweaters and jackets and mittens that\npeople have left all over the place.\n\n231\n00:12:07.129 --> 00:12:08.379\nYou know, that's where that object goes.\n\n232\n00:12:08.379 --> 00:12:11.648\nYou have to go get it and then decide\nwhere you want to put it now that\n\n233\n00:12:11.648 --> 00:12:13.921\nthe original destination has been removed.\n\n234\n00:12:13.921 --> 00:12:15.295\n>> Nice.\n\n235\n00:12:15.295 --> 00:12:19.715\n>> Third type of conflict that we can run\ninto then is going to be the sibling name\n\n236\n00:12:19.715 --> 00:12:20.800\nconflict.\n\n237\n00:12:20.800 --> 00:12:23.462\nI should, let me say,\nfourth type of conflict, right?\n\n238\n00:12:23.462 --> 00:12:25.415\nAdding to a deleted container,\n\n239\n00:12:25.415 --> 00:12:30.421\nmoving to a deleting container is actually\ntwo separate conflicts I can run into.\n\n240\n00:12:30.421 --> 00:12:35.700\nBut sibling name conflicts, this is where\nwe have to look at distinguished names.\n\n241\n00:12:35.700 --> 00:12:39.860\nDistinguished names are what identify\nan object in Active Directory.\n\n242\n00:12:39.860 --> 00:12:41.940\nAnd part of that name is the location,\nright?\n\n243\n00:12:43.060 --> 00:12:46.620\nSo when we look at a distinguished\nname for Ronnie's account,\n\n244\n00:12:46.620 --> 00:12:51.340\nit's gonna be that his name is Ronnie, and\nit's in the OU GNV, which is in the OU\n\n245\n00:12:51.340 --> 00:12:55.930\nemployees, which is in\nthe domain lab.itpro.tv.\n\n246\n00:12:55.930 --> 00:13:00.470\nI can have another Ronnie, with an account\nname Ronnie, if it's in a different OU.\n\n247\n00:13:01.570 --> 00:13:04.810\nBecause the full name is gonna be,\n\n248\n00:13:04.810 --> 00:13:09.963\none of them would be Ronnie\nhosts GNV Lab.ITPro.tv.\n\n249\n00:13:09.963 --> 00:13:16.462\nThe other one would be Ronnie hosts\nNew York employees Lab.ITPro.tv.\n\n250\n00:13:16.462 --> 00:13:17.712\nSo there is no name conflict.\n\n251\n00:13:17.712 --> 00:13:21.789\nEven though they're both named Ronnie,\nthey're in different containers, and\n\n252\n00:13:21.789 --> 00:13:25.880\nsince the different containers are part\nof the name, then there's no conflict.\n\n253\n00:13:25.880 --> 00:13:27.532\nBut, what if that other Ronnie,\n\n254\n00:13:27.532 --> 00:13:30.547\nthe evil twin Ronnie goes from\nNew York down to Gainesville.\n\n255\n00:13:30.547 --> 00:13:34.712\nAnd, we go to move his account into\nthat Gainesville OU, all right?\n\n256\n00:13:34.712 --> 00:13:37.754\nNow, I'm going to have two Ronnies and\nthere's going to be no way to distinguish\n\n257\n00:13:37.754 --> 00:13:40.410\nbetween them because they're\nin the same container.\n\n258\n00:13:40.410 --> 00:13:45.910\nAnd that's not a good thing, I have to\nbe able to uniquely identify these.\n\n259\n00:13:45.910 --> 00:13:48.286\nSo that's that sibling name conflict, and\n\n260\n00:13:48.286 --> 00:13:52.212\nwhat's gonna happen is it's gonna\nadd something to one of their names.\n\n261\n00:13:52.212 --> 00:13:56.466\nIt's gonna add this little special\ncharacter, colon cnf colon and\n\n262\n00:13:56.466 --> 00:14:01.764\nthen a big long, that uniquely\nidentifies the object, because remember,\n\n263\n00:14:01.764 --> 00:14:06.541\nevery object is uniquely identified\nfrom the globally unique identifier,\n\n264\n00:14:06.541 --> 00:14:08.879\nand from that security identifier.\n\n265\n00:14:08.879 --> 00:14:11.474\nBut as far as the names go that\nwe see in Active Directory,\n\n266\n00:14:11.474 --> 00:14:13.379\nthat's where we run into that conflict.\n\n267\n00:14:13.379 --> 00:14:16.902\nSo what Active Directory's gonna do is,\nit's just gonna say, all right,\n\n268\n00:14:16.902 --> 00:14:19.837\ntwo objects, same name,\nno way to distinguish between them.\n\n269\n00:14:19.837 --> 00:14:21.660\nI'm just gonna add something to the name.\n\n270\n00:14:21.660 --> 00:14:23.093\nAnd that way,\nnow I can tell the difference.\n\n271\n00:14:23.093 --> 00:14:27.950\nSo you're gonna go and look at Active\nDirectory and one of them is going to be\n\n272\n00:14:27.950 --> 00:14:33.211\nnamed Ronnie, one of them is going to\nbe named Ronnie*cnf:5342, [SOUND].\n\n273\n00:14:33.211 --> 00:14:34.921\nIt's going to have this really ugly name.\n\n274\n00:14:34.921 --> 00:14:38.129\nAll we have to do is go in and rename it.\n\n275\n00:14:38.129 --> 00:14:41.053\nNow, this is an interesting comment\nbecause you might be saying, well Mike,\n\n276\n00:14:41.053 --> 00:14:42.620\nwhy did he even let you do that?\n\n277\n00:14:42.620 --> 00:14:45.800\nWhy were you even to move Ronnie\naccount into theOUu if there\n\n278\n00:14:45.800 --> 00:14:48.640\nis already a Ronnie in there that\nis going to cause a conflict?\n\n279\n00:14:48.640 --> 00:14:50.970\nIt won't, it wont let you do it.\n\n280\n00:14:50.970 --> 00:14:53.330\nSo how do you end up with that conflict?\n\n281\n00:14:53.330 --> 00:14:57.595\nWhat's gonna happen is maybe Ronnie\nin New York is moving to London and\n\n282\n00:14:57.595 --> 00:15:01.270\nthe Ronnie in Gainesville\nis moving to London.\n\n283\n00:15:01.270 --> 00:15:05.360\nAnd so, two different admins at the same\ntime are moving two different accounts\n\n284\n00:15:05.360 --> 00:15:07.629\nwith the same name into\nthe same container.\n\n285\n00:15:07.629 --> 00:15:11.337\nThey guy up in New York is moving\nRonnie's account to the London OU.\n\n286\n00:15:11.337 --> 00:15:14.797\nThe guy in Gainesville is moving\nRonnie's account into that London OU.\n\n287\n00:15:14.797 --> 00:15:17.351\nBut, they are doing it on\ndifferent domain controllers, so\n\n288\n00:15:17.351 --> 00:15:21.180\nthey're unaware of what the other one is\ndoing until the replication occurs, right?\n\n289\n00:15:21.180 --> 00:15:24.540\nSo once they replicate,\nthat's when they're gonna realize, wait,\n\n290\n00:15:24.540 --> 00:15:25.860\nnow I've got two Ronnies in the same OU.\n\n291\n00:15:25.860 --> 00:15:27.087\nThat can't happen.\n\n292\n00:15:27.087 --> 00:15:28.322\nI'll just rename one of them so\n\n293\n00:15:28.322 --> 00:15:30.421\nthat we can tell the different\nbetween the objects.\n\n294\n00:15:30.421 --> 00:15:34.915\nSo four different real replication\nconflicts we can have occur\n\n295\n00:15:34.915 --> 00:15:39.420\nin Active Directory is going to be the,\nI forgot the first one.\n\n296\n00:15:39.420 --> 00:15:41.910\nThe attribute, right,\ncuz it's done in an attribute level.\n\n297\n00:15:41.910 --> 00:15:43.635\nSo we can have two domains or\n\n298\n00:15:43.635 --> 00:15:47.545\ntwo admins making changes to\nthe same attribute on an object.\n\n299\n00:15:47.545 --> 00:15:52.504\nWe can have add or move an object\ninto a deleted parent container.\n\n300\n00:15:52.504 --> 00:15:54.920\nAnd then we can have\na sibling name conflict.\n\n301\n00:15:54.920 --> 00:15:56.629\nThose are the ones we have to deal with.\n\n302\n00:15:56.629 --> 00:16:00.546\nAnd as you saw, most of Active Directory\nhas a way to do with it on its own.\n\n303\n00:16:00.546 --> 00:16:05.430\nFor the attribute, well, it just uses\nthe last time stamp and uses that one.\n\n304\n00:16:05.430 --> 00:16:08.110\nFor the sibling name,\nit just renames it something else.\n\n305\n00:16:08.110 --> 00:16:09.430\nAnd that way there's no conflict.\n\n306\n00:16:09.430 --> 00:16:14.580\nFor the deleted parent, it just puts it\ninto a special container called a lost and\n\n307\n00:16:14.580 --> 00:16:16.420\nfound, and that's how it deals with it.\n\n308\n00:16:16.420 --> 00:16:21.230\nSo, we don't really, I don't want to say\nwe have to deal with the complex, because\n\n309\n00:16:21.230 --> 00:16:25.140\nsomebody does have to go in and get it out\nof lost and found and put it where it is.\n\n310\n00:16:25.140 --> 00:16:28.818\nSomebody needs to rename that second\nRonnie account to something other then\n\n311\n00:16:28.818 --> 00:16:31.634\nCNF, colon blah, blah,\nblah, blah, blah, right, so\n\n312\n00:16:31.634 --> 00:16:35.671\nit's not that we don´t have to deal with\nthem, but it doesn't stop replication.\n\n313\n00:16:35.671 --> 00:16:38.879\nReplication doesn't cease\nbecause of the conflict, right?\n\n314\n00:16:38.879 --> 00:16:43.260\nActive Directory has ways of dealing with\nthe replication conflicts that occur in\n\n315\n00:16:43.260 --> 00:16:45.045\nthat multi masher environment.\n\n316\n00:16:45.045 --> 00:16:46.087\nIt's a pretty slick system.\n\n317\n00:16:46.087 --> 00:16:47.921\n>> It really is a slick system, Mike.\n\n318\n00:16:47.921 --> 00:16:50.254\nIs there way,\nlet's say like an event viewer.\n\n319\n00:16:50.254 --> 00:16:54.045\nDo we see one of these replication errors,\nor I should say conflicts, happen?\n\n320\n00:16:54.045 --> 00:16:57.630\n>> You can, what you'll do is,\nin fact I can show you a little bit.\n\n321\n00:16:57.630 --> 00:17:01.540\nLike if we go into Active Directory,\nusers and computers.\n\n322\n00:17:01.540 --> 00:17:05.980\nI don't have any replication\nconflicts to show you,\n\n323\n00:17:05.980 --> 00:17:08.170\nbut here's that lost and found container.\n\n324\n00:17:08.170 --> 00:17:14.470\nSo this is where you would see if you had\na deleted parent conflict type thing.\n\n325\n00:17:14.470 --> 00:17:18.100\nI can't really move an object into\nan OU that has the same name,\n\n326\n00:17:18.100 --> 00:17:18.930\ncuz it won't let me.\n\n327\n00:17:18.930 --> 00:17:20.150\nIt'll stop me.\nIt's gonna say,\n\n328\n00:17:20.150 --> 00:17:23.380\nthat's gonna cause a conflict,\nso I'm not even gonna let you.\n\n329\n00:17:23.380 --> 00:17:28.500\nI would need two admins doing it at\nthe same time and they would have\n\n330\n00:17:28.500 --> 00:17:32.430\nto be in different sites really because\nreplication occurs so fast intrasite,\n\n331\n00:17:32.430 --> 00:17:38.470\nit's almost impossible for two people to\nmake a change at the same time like that.\n\n332\n00:17:38.470 --> 00:17:39.421\nIt's too fast.\n\n333\n00:17:39.421 --> 00:17:42.254\nBut there is a log file.\n\n334\n00:17:42.254 --> 00:17:45.620\nYou can go in, and\nyou can look at the Active Directory log.\n\n335\n00:17:45.620 --> 00:17:49.254\nYou can use NTDS Util to pull\nback some events as well.\n\n336\n00:17:49.254 --> 00:17:53.629\nSo, a few different tools you can go and\nlook at that to find those errors.\n\n337\n00:17:53.629 --> 00:17:56.714\n>> Now I understand, because someone like\nme, I might not check those things for\n\n338\n00:17:56.714 --> 00:17:58.129\ndays if I didn't now they existed.\n\n339\n00:17:58.129 --> 00:18:00.379\nAnd then Mike says,\nall you have to do is bring this log up.\n\n340\n00:18:00.379 --> 00:18:03.004\nAnd I'll just go,\nI wish I would have known that a week ago.\n\n341\n00:18:03.004 --> 00:18:05.355\n>> [LAUGH]\n>> Errors start end up happening with\n\n342\n00:18:05.355 --> 00:18:06.671\nthe replication issues.\n\n343\n00:18:06.671 --> 00:18:09.833\nSo, just kind of realize that you do\nhave to deal a lot when you start\n\n344\n00:18:09.833 --> 00:18:11.254\ntalking about replication.\n\n345\n00:18:11.254 --> 00:18:15.961\nAnd the neat thing that Mike just showed\nus here is that we're gonna probably see\n\n346\n00:18:15.961 --> 00:18:20.878\nwith so many people working especially\nbetween sites, there's gonna be more than\n\n347\n00:18:20.878 --> 00:18:25.680\na good chance that replication errors and\nconflicts are gonna end up happening.\n\n348\n00:18:25.680 --> 00:18:28.720\nBut Active Directory is smart enough,\nI guess that's the term you wanna use.\n\n349\n00:18:28.720 --> 00:18:30.986\nThat it can actually fix a lot of that,\nif not,\n\n350\n00:18:30.986 --> 00:18:35.055\nat least give us some way that we're gonna\nbe able to fix it and notify us that, hey,\n\n351\n00:18:35.055 --> 00:18:37.461\nhere is some type of\nconflict that has happened.\n\n352\n00:18:37.461 --> 00:18:39.924\nSo when we're working with multiple sites,\nand\n\n353\n00:18:39.924 --> 00:18:43.420\nwe're working with the idea of\nreplication, it is a complex topic.\n\n354\n00:18:43.420 --> 00:18:47.512\nIt's not the easiest topic in the world,\nbut just take it a little bit at a time,\n\n355\n00:18:47.512 --> 00:18:51.790\nunderstand those pieces and then they'll\nactually start falling into line the way\n\n356\n00:18:51.790 --> 00:18:56.066\nthat they need to, and understanding the\nway that a replication app azure doesn't\n\n357\n00:18:56.066 --> 00:18:58.296\nhappen is gonna become more clear as well.\n\n358\n00:18:58.296 --> 00:19:03.006\nMike, any last words on replication\nissues that we need to be aware of?\n\n359\n00:19:03.006 --> 00:19:04.046\n>> No, I don't think so.\n\n360\n00:19:04.046 --> 00:19:05.844\nYou know, I've gone through a lot,\n\n361\n00:19:05.844 --> 00:19:07.253\nas Ryan said, a lot of-\n>> A lot.\n\n362\n00:19:07.253 --> 00:19:07.921\n>> A lot of information there.\n\n363\n00:19:07.921 --> 00:19:10.462\nI was a little long-winded but,\nagain, it's a big topic, right?\n\n364\n00:19:10.462 --> 00:19:12.257\nWe gotta understand sites,\n\n365\n00:19:12.257 --> 00:19:16.070\nfirst of all cuz then we can\nunderstand the replication, and\n\n366\n00:19:16.070 --> 00:19:21.336\nthe different replication occurs within\nsite, and between sites so a lot of info.\n\n367\n00:19:21.336 --> 00:19:24.891\n>> Yeah, I think that that's actually\none of the keys, right, is once you\n\n368\n00:19:24.891 --> 00:19:28.856\nget the idea of sites down, and then you\ncan actually work with the replication,\n\n369\n00:19:28.856 --> 00:19:31.538\nthen you're gonna see that is two step,\ndon't try and\n\n370\n00:19:31.538 --> 00:19:35.254\nmix it all together one time cuz it's\ngonna be coming much more confusing.\n\n371\n00:19:35.254 --> 00:19:37.432\nAll right, Mike,\nthat sounds like a great place for\n\n372\n00:19:37.432 --> 00:19:38.879\nus to also end this episode, too.\n\n373\n00:19:38.879 --> 00:19:41.546\nThank you again for\nshowing us all that information.\n\n374\n00:19:41.546 --> 00:19:44.379\nThank you also for watching today.\n\n375\n00:19:44.379 --> 00:19:47.087\nSigning off for ITProTV, I'm Ronnie Wong.\n\n376\n00:19:47.087 --> 00:19:47.922\n>> And I'm Mike Roderick.\n\n377\n00:19:47.922 --> 00:19:49.754\n>> And we'll see you next time.\n\n378\n00:19:49.754 --> 00:19:56.120\n[SOUND]\n\n",
          "vimeoId": "146522465"
        },
        {
          "description": "In this episode, Ronnie and Mike take a look at Active Directory Backup.  They discuss why it’s important and when to use it. Replication is not a replacement for backup and can be problematic.  Backups insure that we can have AD in the state we need it. They show how to perform a backup and do both a non-authoritative restore and authoritative restore.",
          "length": "2525",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-ad_backup_and_recovery-111915-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-ad_backup_and_recovery-111915-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-activedirectory/techskills-activedirectory-ad_backup_and_recovery-111915-1-sm.jpg",
          "title": "AD Backup and Restore",
          "transcript": "WEBVTT\n\n1\n00:00:00.121 --> 00:00:10.121\n[MUSIC]\n\n2\n00:00:12.273 --> 00:00:15.393\nWelcome to another exciting\nepisode right here on ITProTV.\n\n3\n00:00:15.393 --> 00:00:16.750\nI'm your host Ronnie Wong, and\n\n4\n00:00:16.750 --> 00:00:19.990\ntoday we're taking a look at\nworking with Active Directory.\n\n5\n00:00:19.990 --> 00:00:23.090\nAnd who better to help us to do\nthat is gonna be Mr. Mike Rodrick.\n\n6\n00:00:23.090 --> 00:00:25.050\nAnd what we're specifically\nlooking at today,\n\n7\n00:00:25.050 --> 00:00:28.080\nthough is gonna be active\ndirectory backup and restore.\n\n8\n00:00:28.080 --> 00:00:30.780\nNow, Mike, when it comes down to\nactive directory backup and restore,\n\n9\n00:00:30.780 --> 00:00:34.410\nit sounds like a great topic, but\nactive directory replicates, so\n\n10\n00:00:34.410 --> 00:00:37.450\nif I have multiple domain\ncontrollers out there.\n\n11\n00:00:37.450 --> 00:00:40.060\nWhy do I need to actually do\nany backup and restore at all?\n\n12\n00:00:40.060 --> 00:00:43.560\n>> That's a great question, Ronnie, and\nthe fact of the matter is we still have to\n\n13\n00:00:43.560 --> 00:00:46.920\nback it up cuz that replication,\nwhile it's a good thing, right?\n\n14\n00:00:46.920 --> 00:00:49.600\nWe know that if I make a change\non one domain controller,\n\n15\n00:00:49.600 --> 00:00:52.910\nit is gonna replicate to all\nmy other domain controllers.\n\n16\n00:00:52.910 --> 00:00:54.552\nSo that's a good thing.\n\n17\n00:00:54.552 --> 00:00:58.230\nThe downside of that is if I do\nsomething wrong in Active Directory,\n\n18\n00:00:58.230 --> 00:01:01.240\nthat's also gonna replicate to all\nthe other domain controllers right?\n\n19\n00:01:01.240 --> 00:01:06.190\nWhat if I go in and I don't know I change\nsome user accounts properties or I\n\n20\n00:01:06.190 --> 00:01:10.740\nremove a user from a whole bunch of groups\nand I didn't mean to do that, right?\n\n21\n00:01:10.740 --> 00:01:13.150\nWell as soon as I do that,\nmake that change,\n\n22\n00:01:13.150 --> 00:01:16.300\nthat change is gonna replicate around\nto all the other domain controllers.\n\n23\n00:01:16.300 --> 00:01:17.580\nNow I've gotta fix my problem.\n\n24\n00:01:17.580 --> 00:01:19.930\nI gotta go put that user\nback in all those groups.\n\n25\n00:01:19.930 --> 00:01:22.590\nI gotta update all those\nproperties on that user account\n\n26\n00:01:22.590 --> 00:01:24.570\nthat I changed mistakenly.\n\n27\n00:01:24.570 --> 00:01:26.510\nDo I remember what they were?\n\n28\n00:01:26.510 --> 00:01:29.510\nSo somehow I gotta be able to get that\nback and that's where that backup and\n\n29\n00:01:29.510 --> 00:01:30.930\nrestore is gonna come in.\n\n30\n00:01:30.930 --> 00:01:33.020\nThe other thing we gotta worry about.\n\n31\n00:01:33.020 --> 00:01:34.610\nIs corrupted objects.\n\n32\n00:01:34.610 --> 00:01:40.130\nIf the database itself becomes corrupt,\nI've gotta fix that domain controller.\n\n33\n00:01:40.130 --> 00:01:42.960\nThis replication from the other domain\ncontrollers isn't gonna help me\n\n34\n00:01:42.960 --> 00:01:44.480\nbecause that particular domain controller,\n\n35\n00:01:44.480 --> 00:01:47.890\nit's copy of the active directory\ndatabase has become corrupt.\n\n36\n00:01:47.890 --> 00:01:51.750\nAnd I really don't wanna have to\nre install and start all over.\n\n37\n00:01:51.750 --> 00:01:55.910\nSo I could just restore it from backup\nto get that thing back up and running.\n\n38\n00:01:55.910 --> 00:01:58.140\nOr what about deleted objects?\n\n39\n00:01:58.140 --> 00:02:01.720\nIf I delete something,\nthe fact that that object has been deleted\n\n40\n00:02:01.720 --> 00:02:03.730\nis gonna replicate to all\nthe other domain controllers.\n\n41\n00:02:03.730 --> 00:02:04.817\nThat's a good thing.\n\n42\n00:02:04.817 --> 00:02:07.090\nBut what if I didn't mean to delete it?\n\n43\n00:02:07.090 --> 00:02:08.950\nNow I've gotta somehow get that back and\n\n44\n00:02:08.950 --> 00:02:11.920\nif it was a user account,\nyou know that's gonna be a pain.\n\n45\n00:02:11.920 --> 00:02:15.100\nWhat if it was an OU that had\ndozens of users in there?\n\n46\n00:02:15.100 --> 00:02:16.350\nEven worse, right?\n\n47\n00:02:16.350 --> 00:02:19.630\nSo having that backup of that Active\nDirectory database gives me that safety\n\n48\n00:02:19.630 --> 00:02:20.730\nnet that I need.\n\n49\n00:02:20.730 --> 00:02:25.840\nTo be able to provide the high\navailability that I want with\n\n50\n00:02:25.840 --> 00:02:30.220\nactive directory, make sure we can recover\nin the event of any types of failures.\n\n51\n00:02:30.220 --> 00:02:33.782\nSo, very important that we're backing\nup that active directory database.\n\n52\n00:02:33.782 --> 00:02:34.460\n>> All right, so Mike,\n\n53\n00:02:34.460 --> 00:02:38.030\nnow that we understand that really,\nthe very fact is backups really do help us\n\n54\n00:02:38.030 --> 00:02:41.190\nto even solve replication problems that\ncould gone, I didn't think about that.\n\n55\n00:02:42.228 --> 00:02:45.840\nIf we wanna start backing up our active\ndirectory, do I need to go and buy some\n\n56\n00:02:45.840 --> 00:02:50.340\nspecial program that just does an active\ndirectory backup to make sure it happens?\n\n57\n00:02:50.340 --> 00:02:52.050\nOr, what can I do?\n\n58\n00:02:52.050 --> 00:02:55.660\n>> Luckily for us there's software there's\napplication built right into the server\n\n59\n00:02:55.660 --> 00:02:58.500\noperating system,\nwe've got Windows server backup.\n\n60\n00:02:58.500 --> 00:03:00.790\nNow we know it's not\nan enterprise level solution.\n\n61\n00:03:00.790 --> 00:03:04.240\nIt's a one machine at a time type thing.\n\n62\n00:03:04.240 --> 00:03:06.400\nBut it's perfect for\ndoing backups like this.\n\n63\n00:03:06.400 --> 00:03:10.850\nAnd in a small shop where I can't afford\nsome enterprise level backup solution,\n\n64\n00:03:10.850 --> 00:03:12.570\nit does what I need it to do.\n\n65\n00:03:12.570 --> 00:03:14.040\nIt's not installed by default.\n\n66\n00:03:14.040 --> 00:03:17.290\nLike all my other roles and\nfeatures, everything's there but\n\n67\n00:03:17.290 --> 00:03:18.490\nit's not actually installed.\n\n68\n00:03:18.490 --> 00:03:20.030\nSo we have to go through our wizard and\n\n69\n00:03:20.030 --> 00:03:23.170\nadd that Windows Server backup\nif we plan to use that.\n\n70\n00:03:23.170 --> 00:03:26.980\nSo let's go ahead and take a look, it just\ntake us a second to get that installed.\n\n71\n00:03:26.980 --> 00:03:29.580\nOn my domain controller here,\nI'm gonna go to add roles and\n\n72\n00:03:29.580 --> 00:03:33.270\nfeatures, and I'll move this wizard up so\nwe can see it a little better.\n\n73\n00:03:33.270 --> 00:03:35.130\nI'll click Next a couple times,\n\n74\n00:03:35.130 --> 00:03:40.470\nit's role based installation,\nit's DC02 is what I'm installing it on.\n\n75\n00:03:40.470 --> 00:03:41.970\nAnd it's not a role.\n\n76\n00:03:41.970 --> 00:03:43.620\nIt's actually a feature.\n\n77\n00:03:43.620 --> 00:03:46.980\nRemember, roles provide\nservices to the entire network.\n\n78\n00:03:46.980 --> 00:03:49.970\nFeatures provide functionality\nto the machine itself.\n\n79\n00:03:49.970 --> 00:03:52.920\nSo Windows server backup is gonna\nbe in here in the features.\n\n80\n00:03:52.920 --> 00:03:57.480\nWay down towards the bottom,\nthere's my good old Windows server backup.\n\n81\n00:03:57.480 --> 00:03:59.119\nAnd I'll go ahead and click next.\n\n82\n00:04:00.180 --> 00:04:01.690\nAnd then install.\n\n83\n00:04:01.690 --> 00:04:03.150\nAnd we'll get that guy installed.\n\n84\n00:04:03.150 --> 00:04:05.400\nOnce we get that installed it´s\ngonna give me a couple of things,\n\n85\n00:04:05.400 --> 00:04:08.940\nit´s gonna give me a gooey,\na little wizard that I can walk through\n\n86\n00:04:08.940 --> 00:04:13.470\nas well as my WB admin which is\nWindows backup administration.\n\n87\n00:04:13.470 --> 00:04:17.700\nWB admin is our command line syntax for\nrunning Windows server backup.\n\n88\n00:04:18.880 --> 00:04:21.840\nSo there we go, it's finished and\nwe'll click close.\n\n89\n00:04:21.840 --> 00:04:26.620\nAnd now if I go up here to my tools menu,\nI should see on my\n\n90\n00:04:26.620 --> 00:04:31.150\nmenu Windows server backup and\nI'll go ahead and launch that guy.\n\n91\n00:04:31.150 --> 00:04:33.710\nAnd so Windows server backup\nis a great little exit,\n\n92\n00:04:33.710 --> 00:04:36.750\na great little backup utility.\n\n93\n00:04:36.750 --> 00:04:41.223\nIt allows me to do several different types\nof backups, I can backup the entire server\n\n94\n00:04:41.223 --> 00:04:44.437\nright and if I do a full server\nbackup on a domain controller,\n\n95\n00:04:44.437 --> 00:04:47.351\nthat is gonna include\nthe active directory database.\n\n96\n00:04:47.351 --> 00:04:50.789\nBut it's nice to have a backup of just\nthat active directory database or\n\n97\n00:04:50.789 --> 00:04:54.574\nmaybe I've got something else that I'm\nusing to backup the entire servers and\n\n98\n00:04:54.574 --> 00:04:57.190\nI wanna use this to\nbackup active directory.\n\n99\n00:04:57.190 --> 00:05:01.630\nSo really, we need to know, how do I back\nup just that active directory database?\n\n100\n00:05:01.630 --> 00:05:05.780\nAnd the easiest way to do it,\nis to do a system state backup.\n\n101\n00:05:05.780 --> 00:05:09.350\nA system state backup on a domain\ncontroller is gonna include several\n\n102\n00:05:09.350 --> 00:05:12.770\nthings, one of them being the active\ndirectory database itself\n\n103\n00:05:12.770 --> 00:05:18.320\nincluding the log files and systole, that\ngo with the active directory database.\n\n104\n00:05:18.320 --> 00:05:20.610\nAlso gonna include the registry,\n\n105\n00:05:20.610 --> 00:05:26.380\nmy system files,\nmy complex database and registration.\n\n106\n00:05:26.380 --> 00:05:28.310\nIf this was a certificate server,\n\n107\n00:05:28.310 --> 00:05:31.920\nthe system save backup would include\nthe certificate services data,\n\n108\n00:05:31.920 --> 00:05:38.140\nas well as if it was IES, it would include\nthe IES metadata not the actual websites.\n\n109\n00:05:38.140 --> 00:05:40.210\nBut information about the websites,\n\n110\n00:05:40.210 --> 00:05:42.540\nhopefully we're not running\nIIS on a domain controller.\n\n111\n00:05:42.540 --> 00:05:44.820\nThat would not be a good idea.\n\n112\n00:05:44.820 --> 00:05:47.700\nBut, just understand that the systems\nsay back up because when we go in and\n\n113\n00:05:47.700 --> 00:05:50.620\nrun the back up, we dont choose\nthe Active Directory database.\n\n114\n00:05:50.620 --> 00:05:51.820\nWe do a system state back up.\n\n115\n00:05:51.820 --> 00:05:57.400\nThat's gonna include everything I need\nto be able to restore Active Directory.\n\n116\n00:05:57.400 --> 00:05:59.910\nAnd again we can do it from the gui, or\n\n117\n00:05:59.910 --> 00:06:03.800\nwe can do it through the command\nprompt with that wp admin.\n\n118\n00:06:03.800 --> 00:06:06.550\nSo I guess the first thing we\nshould do Ronnie is make a backup.\n\n119\n00:06:06.550 --> 00:06:07.680\n>> That sounds like a great idea.\n\n120\n00:06:07.680 --> 00:06:12.090\nNow Micheal, before we get started here\nlet's talk about a little bit of things\n\n121\n00:06:12.090 --> 00:06:15.080\nthat started popping into my mind\nwhen you started talking about this.\n\n122\n00:06:15.080 --> 00:06:17.850\nOne, when we talk about\nthe idea of active directory,\n\n123\n00:06:17.850 --> 00:06:21.270\nwe know that there's a lot of changes\nthat are being made in active directory.\n\n124\n00:06:21.270 --> 00:06:23.890\nSo, backups can get dated very easily.\n\n125\n00:06:23.890 --> 00:06:24.830\nCan't they?\n\n126\n00:06:24.830 --> 00:06:27.470\nSo, is there a best practice\nthat we should follow?\n\n127\n00:06:27.470 --> 00:06:30.740\nSo I'm assuming this, that the more\ndomain control that I have or\n\n128\n00:06:30.740 --> 00:06:34.000\nthe more active it is,\nthe more often I need to make the backups?\n\n129\n00:06:34.000 --> 00:06:36.760\n>> It really is gonna be\non a per business basis.\n\n130\n00:06:36.760 --> 00:06:37.960\n>> Okay.\n>> You're gonna have to look at it and\n\n131\n00:06:37.960 --> 00:06:40.180\nsee how long can I go.\n\n132\n00:06:40.180 --> 00:06:44.710\nIf I'm taking backups once a day and\nsomething happens to Active Directory,\n\n133\n00:06:44.710 --> 00:06:47.690\nthat means I'm gonna have to roll back and\nlose 24 hours.\n\n134\n00:06:47.690 --> 00:06:49.110\n>> Okay.\n>> Worth of changes.\n\n135\n00:06:49.110 --> 00:06:52.700\nMaybe in our environment we don't make\nthat many changes in Active Directory and\n\n136\n00:06:52.700 --> 00:06:54.170\none day is not so bad.\n\n137\n00:06:54.170 --> 00:06:59.000\nIf it's where you make a lot of changes\nto Active Directory all day long,\n\n138\n00:06:59.000 --> 00:07:02.170\nyou might want to increase the frequency\nyou know and do it a little more often.\n\n139\n00:07:02.170 --> 00:07:06.810\nSo it really comes down to how\nmuch data can you afford to lose?\n\n140\n00:07:06.810 --> 00:07:10.760\nSo you look at how many changes are being\nmade to that database on a daily basis or\n\n141\n00:07:10.760 --> 00:07:15.700\nan hourly basis and\nhow easy are those changes to recreate.\n\n142\n00:07:15.700 --> 00:07:17.780\nRight.\nIf I'm making new groups and\n\n143\n00:07:17.780 --> 00:07:22.350\nnew users all the time and\nI have to roll back say six hours,\n\n144\n00:07:22.350 --> 00:07:25.140\nlet's say we do two or\nthree backups a day.\n\n145\n00:07:25.140 --> 00:07:27.110\nDuring that six hours I\nmight have made two or\n\n146\n00:07:27.110 --> 00:07:30.660\nthree user accounts and if I have\nto roll back and lose those two or\n\n147\n00:07:30.660 --> 00:07:33.700\nthree it's not gonna take\nme much to recreate that.\n\n148\n00:07:33.700 --> 00:07:37.940\nIf I'm doing a lot of changes, and\nI have to roll back six hours,\n\n149\n00:07:37.940 --> 00:07:40.730\nthat's a lot of work that I have\nto do to put all that back.\n\n150\n00:07:40.730 --> 00:07:42.890\nMaybe I wanna increase that frequency.\n\n151\n00:07:42.890 --> 00:07:44.670\nYou also have to think about space,\nthough, right?\n\n152\n00:07:44.670 --> 00:07:47.460\nThe more backups that I wanna take,\n\n153\n00:07:47.460 --> 00:07:50.540\nthe more space it's gonna\ntake to hold those backups.\n\n154\n00:07:50.540 --> 00:07:53.680\nHow long do i retain them would\nalso be an issue I have to have.\n\n155\n00:07:53.680 --> 00:07:56.846\nCuz if I'm taking them every\nhour now that means I'm pumping,\n\n156\n00:07:56.846 --> 00:07:58.587\nout if we just do the business day.\n\n157\n00:07:58.587 --> 00:08:01.296\nEight back ups or so a day.\n\n158\n00:08:01.296 --> 00:08:04.585\nAt the end of the week we've\ngot 40 backups sitting there,\n\n159\n00:08:04.585 --> 00:08:07.550\nDo I need to be able to roll\nall the way back to Monday, or\n\n160\n00:08:07.550 --> 00:08:10.180\ndo I just want to keep the eight backups.\n\n161\n00:08:10.180 --> 00:08:12.700\nSo those are kind of things that you got\nto think about when you're planning out\n\n162\n00:08:12.700 --> 00:08:13.900\nyour strategy.\n\n163\n00:08:13.900 --> 00:08:17.550\n>> And the other thing is about the size\nwhen we talk about the backups.\n\n164\n00:08:17.550 --> 00:08:19.120\nAnd you mentioned it briefly there.\n\n165\n00:08:19.120 --> 00:08:23.060\nBut when we think about that the system\nstate can get gigantic can't it?\n\n166\n00:08:23.060 --> 00:08:26.550\n>> If that database, your active\ndirectory database can get rather large.\n\n167\n00:08:26.550 --> 00:08:30.390\nWe can scale active directory\nfrom A few dozen objects to\n\n168\n00:08:30.390 --> 00:08:32.620\nhundreds of thousands of objects.\n\n169\n00:08:32.620 --> 00:08:34.890\nSo, that can get pretty big.\n\n170\n00:08:34.890 --> 00:08:36.830\nIf it's a global catalogue server,\n\n171\n00:08:36.830 --> 00:08:39.790\nthat's another issue we've got to deal\nwith because then that global catalogue\n\n172\n00:08:39.790 --> 00:08:43.400\nserver has a copy of every\ndomain's domain partition.\n\n173\n00:08:43.400 --> 00:08:47.120\nNow, the partial attribute sets,\nso not the entire copy, but still,\n\n174\n00:08:47.120 --> 00:08:49.540\nthat's gonna be a much larger backup.\n\n175\n00:08:49.540 --> 00:08:54.220\nThen it would be on the main controller\nthat wasn't a global catalog server.\n\n176\n00:08:54.220 --> 00:08:56.880\nSo some of the things that you've\ngot to think about when you're\n\n177\n00:08:56.880 --> 00:08:58.350\nsetting all this up.\n\n178\n00:08:58.350 --> 00:09:01.480\n>> So the backup is also going\nto include that global catalog.\n\n179\n00:09:01.480 --> 00:09:05.270\nI can't say it global, Will catalog\nif we run the system stated back-up.\n\n180\n00:09:05.270 --> 00:09:07.980\n>> Exactly, cuz it's gonna be part\nof that active record database so\n\n181\n00:09:07.980 --> 00:09:08.920\nthat will be in there.\n\n182\n00:09:08.920 --> 00:09:09.780\n>> Excellent.\n\n183\n00:09:09.780 --> 00:09:13.630\n>> All right, so let's take a look at\nhow we can do a backup really quick.\n\n184\n00:09:13.630 --> 00:09:17.770\nI'm gonna come here, I'm not gonna go,\nwe got other shows where we talk about\n\n185\n00:09:17.770 --> 00:09:20.150\nhow to schedule a backup,\nhow to set all of this up.\n\n186\n00:09:20.150 --> 00:09:24.350\nSo we're not gonna dive into that, I'm\njust gonna do a quick backup I'm going to\n\n187\n00:09:24.350 --> 00:09:27.820\nsay back up once but obviously this is\nsomething I would want to schedule.\n\n188\n00:09:29.560 --> 00:09:30.610\nHowever I choose to do that.\n\n189\n00:09:30.610 --> 00:09:32.450\nIf I want to do it\nthrough the gooey here or\n\n190\n00:09:32.450 --> 00:09:35.550\nif I want to use W-B admin I could\nwrite a script that did it and\n\n191\n00:09:35.550 --> 00:09:39.980\nthen I could create a scheduled task\nthat ran that script every so often.\n\n192\n00:09:39.980 --> 00:09:44.310\nDepends on what you prefer so\nsince I don't have any scheduled back ups,\n\n193\n00:09:44.310 --> 00:09:46.220\nI'm going to use my different options.\n\n194\n00:09:46.220 --> 00:09:48.100\nAnd I'm going to do a custom, right,\n\n195\n00:09:48.100 --> 00:09:50.590\nbecause I don't want to\nback up the full server.\n\n196\n00:09:50.590 --> 00:09:52.880\nThat's not what this backup is for.\n\n197\n00:09:52.880 --> 00:09:57.570\nSo I'll click next, and\nthen we're going to do add items, and\n\n198\n00:09:57.570 --> 00:10:00.500\nthen here's where I've got my\ncheck mark for system state.\n\n199\n00:10:00.500 --> 00:10:03.620\nNow system state, again,\nis going to include everything I need to.\n\n200\n00:10:04.670 --> 00:10:07.320\nBoot that server up to\ncall critical volumes\n\n201\n00:10:07.320 --> 00:10:09.940\nas well as that active directory database.\n\n202\n00:10:09.940 --> 00:10:11.330\nAnd that's really what I'm after here.\n\n203\n00:10:11.330 --> 00:10:12.850\nI click OK on that.\n\n204\n00:10:13.860 --> 00:10:15.290\nI'll click next.\n\n205\n00:10:15.290 --> 00:10:18.810\nThen I have to tell it where\nI want to store this back-up.\n\n206\n00:10:18.810 --> 00:10:20.870\nI'm going to do a local drive.\n\n207\n00:10:20.870 --> 00:10:22.260\nI'll click Next.\n\n208\n00:10:22.260 --> 00:10:25.160\nAnd, it already sees that I've got\nan extra drive in here that doesn't have\n\n209\n00:10:25.160 --> 00:10:28.200\nanything on it so\nit's gonna grab that, which is fine.\n\n210\n00:10:28.200 --> 00:10:31.850\nWe'll click Next, there's my summary,\n\n211\n00:10:31.850 --> 00:10:35.360\nmake sure that I've picked everything\nI need that I want in that backup.\n\n212\n00:10:35.360 --> 00:10:40.030\nWe're good to go and we click backup and\nit's gonna use that volume shadow service\n\n213\n00:10:40.030 --> 00:10:43.780\nto create a quick snapshot of the database\ncuz there could be changes going on\n\n214\n00:10:43.780 --> 00:10:47.310\nright now right and\nI wanna consistent state on that backup so\n\n215\n00:10:47.310 --> 00:10:50.260\nwe're gonna take a quick snapshot\nusing that volume shadow service and\n\n216\n00:10:50.260 --> 00:10:54.810\nthen we're actually backing up\nthat snapshot that it made right?\n\n217\n00:10:54.810 --> 00:10:58.090\nAnd there it goes you can see it\ncruising through the process here.\n\n218\n00:10:58.090 --> 00:10:59.890\nAnd it shouldn't take too long Ronnie.\n\n219\n00:10:59.890 --> 00:11:02.050\nI've got about a dozen user accounts and\nthree or\n\n220\n00:11:02.050 --> 00:11:04.520\nfour OU's so\nthere's really not a lot to back up.\n\n221\n00:11:04.520 --> 00:11:06.360\nIt's gonna take it longer\nto scan everything and\n\n222\n00:11:06.360 --> 00:11:10.100\nsee what it needs to backup than\nthe actual backup process I would assume.\n\n223\n00:11:10.100 --> 00:11:13.470\n>> But we're also then saying that\nthe converse is also true that if I\n\n224\n00:11:13.470 --> 00:11:16.300\nhave a\n>> A very large active directory database\n\n225\n00:11:16.300 --> 00:11:19.450\nwith thousands of users and\nthousands of computer accounts and\n\n226\n00:11:19.450 --> 00:11:22.340\nall the other things that it's going\nto take considerably longer as well.\n\n227\n00:11:22.340 --> 00:11:24.580\n>> Absolutely, absolutely.\n\n228\n00:11:24.580 --> 00:11:27.730\nSo this is something that you\nobviously wouldn't want to do during\n\n229\n00:11:27.730 --> 00:11:28.740\nproduction hours.\n\n230\n00:11:28.740 --> 00:11:31.630\nWell, I shouldn't say that,\nbecause I might be doing it every hour or\n\n231\n00:11:31.630 --> 00:11:32.280\nsomething like that.\n\n232\n00:11:32.280 --> 00:11:35.820\nBut I would definitely want to, Think\nabout that if I have a small number of\n\n233\n00:11:35.820 --> 00:11:40.680\ndomain controllers and if doing a backup\non one is gonna make that machine busy.\n\n234\n00:11:40.680 --> 00:11:42.480\nIt's not gonna affect active directory,\nright?\n\n235\n00:11:42.480 --> 00:11:45.800\nIt takes that snapshot, and then it's\nmaking the backup of that snapshot.\n\n236\n00:11:45.800 --> 00:11:49.450\nSo this domain controller can still\nbe used to authenticate users,\n\n237\n00:11:49.450 --> 00:11:52.630\nto apply group policy\n>> All of that's still working, but\n\n238\n00:11:52.630 --> 00:11:54.510\nit is taking up system resources, right?\n\n239\n00:11:54.510 --> 00:11:59.760\nSo I've got that processor grinding away\nhere, I've got my drives grinding away,\n\n240\n00:11:59.760 --> 00:12:03.660\nif I'm saving this to a network location,\nI've got network bandwidth being used.\n\n241\n00:12:03.660 --> 00:12:07.880\nSo, it is gonna hurt the performance\nof that domain controller\n\n242\n00:12:07.880 --> 00:12:09.800\nduring this back up process.\n\n243\n00:12:09.800 --> 00:12:13.890\n>> Alright, Mike, so while we're actually\nwaiting on that back up to finish up here,\n\n244\n00:12:13.890 --> 00:12:15.190\n>> I do have a question.\n\n245\n00:12:15.190 --> 00:12:19.040\nIf I am actually running the same\nbackup on active directory, but\n\n246\n00:12:19.040 --> 00:12:21.120\nI still have multiple domain controllers,\nand\n\n247\n00:12:21.120 --> 00:12:24.430\nyou said that while the tool really works\non each particular domain controller,\n\n248\n00:12:24.430 --> 00:12:27.230\nis it essential then that I actually\nback up every domain controller?\n\n249\n00:12:27.230 --> 00:12:29.380\n>> Not really.\nBecause of that replication,\n\n250\n00:12:29.380 --> 00:12:34.050\nI think we can get away with having\na good, 1 good backup active directory\n\n251\n00:12:34.050 --> 00:12:36.510\nYou just gotta think about what's\non that domain controller, right?\n\n252\n00:12:36.510 --> 00:12:39.710\nWe need domain controller, we need\na backup of the domain controllers from\n\n253\n00:12:39.710 --> 00:12:44.070\ndifferent domains because they're gonna\nhave a different partition, right?\n\n254\n00:12:44.070 --> 00:12:47.500\nBut the from the Schema partition,\nwell that's wide.\n\n255\n00:12:47.500 --> 00:12:50.340\nSo, it really wouldn't matter\nwhich domain controller,\n\n256\n00:12:50.340 --> 00:12:52.150\nI think, that you got that from.\n\n257\n00:12:52.150 --> 00:12:56.870\nAlthough, that being said The problem is\nthen you gotta think about the FSMOs,\n\n258\n00:12:56.870 --> 00:12:59.260\nthe Flexible Single Master Operations.\n\n259\n00:12:59.260 --> 00:13:00.900\nThose are specific domain controllers.\n\n260\n00:13:00.900 --> 00:13:04.960\nOnly one domain controller per domain is\nthe PDC emulator and the RID Master and\n\n261\n00:13:04.960 --> 00:13:06.390\nthe infrastructure master.\n\n262\n00:13:06.390 --> 00:13:07.175\nOne domain controller per.\n\n263\n00:13:07.175 --> 00:13:10.285\nForest is the schema master and\nthe domain naming master.\n\n264\n00:13:10.285 --> 00:13:11.895\nSo in the end,\n\n265\n00:13:11.895 --> 00:13:16.485\nyou really probably should do system state\nbackups on all of your domain controllers.\n\n266\n00:13:16.485 --> 00:13:19.425\n[LAUGH] You might, in a small shop,\nlike you said, if you only have\n\n267\n00:13:19.425 --> 00:13:23.085\ntwo domain controllers and one of them's\nholding all the roles, you might be able\n\n268\n00:13:23.085 --> 00:13:27.340\nto get away with just backing up that guy\nbut probably should back them all up.\n\n269\n00:13:27.340 --> 00:13:30.950\nAlright, no actually that's a great thing,\nbecause I was thinking about just for\n\n270\n00:13:30.950 --> 00:13:34.080\na moment, like, well the replication\nshould give us everything that we net, but\n\n271\n00:13:34.080 --> 00:13:39.010\nI didn't think about FSMO roles,\n\n272\n00:13:39.010 --> 00:13:41.610\nand all the other partitions\nthat you were talking about.\n\n273\n00:13:41.610 --> 00:13:43.090\nSo it's a great, at least, tool for\n\n274\n00:13:43.090 --> 00:13:45.190\nus to think about if we do\nhave them separated out.\n\n275\n00:13:45.190 --> 00:13:46.550\n>> Yeah.\nAnd the other thing is,\n\n276\n00:13:46.550 --> 00:13:49.160\nthat system state is gonna\nbe specific to that machine.\n\n277\n00:13:49.160 --> 00:13:50.920\n>> There you go.\n>> And it might be doing other roles and\n\n278\n00:13:50.920 --> 00:13:53.040\nother things or\nhave different volume labels.\n\n279\n00:13:53.040 --> 00:13:57.280\nSo you couldn't take the system\nstate backup from one machine and\n\n280\n00:13:57.280 --> 00:13:58.930\nrestore it on a different machine.\n\n281\n00:13:58.930 --> 00:14:02.775\nSo in the end yeah, back them all up.\n\n282\n00:14:02.775 --> 00:14:03.540\n>> [LAUGH] Okay.\nGood to know.\n\n283\n00:14:03.540 --> 00:14:04.320\n>> It is good to know.\n\n284\n00:14:04.320 --> 00:14:06.010\nThat's a great question.\n\n285\n00:14:06.010 --> 00:14:06.580\nAll right.\n\n286\n00:14:06.580 --> 00:14:08.130\nSo it looks like my backup is finished.\n\n287\n00:14:08.130 --> 00:14:09.440\nSo we pull that screen back up.\n\n288\n00:14:09.440 --> 00:14:12.030\nI'll go ahead and\nclick close on my backup.\n\n289\n00:14:12.030 --> 00:14:16.690\nIf we wanted to, there's not really much\ntoo exciting to see here, but if I open up\n\n290\n00:14:16.690 --> 00:14:21.450\nFile Explorer over there on my S drive I\ncan see there is my Windows Image Backup.\n\n291\n00:14:21.450 --> 00:14:25.440\nDC02 and there's my system state backup.\n\n292\n00:14:25.440 --> 00:14:27.230\nAnd I really don't like diving in here.\n\n293\n00:14:27.230 --> 00:14:29.570\nI don't wanna accidentally change anything\n>> [LAUGH]\n\n294\n00:14:29.570 --> 00:14:31.080\n>> or corrupt anything so\n\n295\n00:14:31.080 --> 00:14:32.150\nwe'll just leave that alone.\n\n296\n00:14:32.150 --> 00:14:34.360\nAll right, so now I've got my backup.\n\n297\n00:14:34.360 --> 00:14:38.220\nNow, if something happens and\nwe need to, we've got that backup and\n\n298\n00:14:38.220 --> 00:14:41.650\nwe can restore Active Directory.\n\n299\n00:14:41.650 --> 00:14:46.320\nBut when it comes time to restore a run\nwe've got a couple of different options.\n\n300\n00:14:46.320 --> 00:14:50.350\nThere's what we would\ncall a normal restore and\n\n301\n00:14:50.350 --> 00:14:54.210\nthere's also something called\nan authoritative restore.\n\n302\n00:14:54.210 --> 00:14:58.680\nSometimes the normal restore is referred\nto as the non-authoritative restore so\n\n303\n00:14:58.680 --> 00:15:02.430\ntwo different types of restores we can\ndo and it depends on the scenario,\n\n304\n00:15:02.430 --> 00:15:04.150\nwhich one you're going to use.\n\n305\n00:15:04.150 --> 00:15:07.860\nWhy you're going to that backup\nin the first place, all right?\n\n306\n00:15:07.860 --> 00:15:10.580\nIf you have a hardware failure,\none of your domain controllers\n\n307\n00:15:10.580 --> 00:15:15.580\nhard drives crashes, all right, well I\ncan simply put a new hard drive in there.\n\n308\n00:15:15.580 --> 00:15:20.030\nTake our that, I have to reinstall my\noperating system, because I didn't do\n\n309\n00:15:20.030 --> 00:15:24.270\na full metal recovery or a bare metal\nrecovery backup, I did a system state.\n\n310\n00:15:24.270 --> 00:15:26.890\nSo I'm gonna have to reinstall\nmy operating system, and\n\n311\n00:15:26.890 --> 00:15:29.930\nthen I can just do my normal restore.\n\n312\n00:15:29.930 --> 00:15:35.810\nAnd what'll happen is, that backup\ncould be from an hour ago, a day ago.\n\n313\n00:15:35.810 --> 00:15:39.350\nSo that domain control, when I restore\nhim, He's gonna be out of date.\n\n314\n00:15:39.350 --> 00:15:42.570\nIt's gonna be an old copy of\nthat Active Directory database.\n\n315\n00:15:42.570 --> 00:15:46.020\nBut that's okay, because as soon\nas I bring him back online,\n\n316\n00:15:46.020 --> 00:15:49.270\nhe's gonna replicate with his replication\npartners and they're gonna catch him up.\n\n317\n00:15:49.270 --> 00:15:51.259\nThey're gonna say wow, you're way behind,\n\n318\n00:15:51.259 --> 00:15:54.170\nhere's all the stuff that's happened\nsince you came back online.\n\n319\n00:15:54.170 --> 00:15:58.091\nCuz to them To the other replication\npartners it's just gonna look like all of\n\n320\n00:15:58.091 --> 00:16:00.745\na sudden he's been on vacation for\na little while and\n\n321\n00:16:00.745 --> 00:16:03.400\nhe's missed out on a lot\nof the replication.\n\n322\n00:16:03.400 --> 00:16:05.000\nSo they're gonna catch him up.\n\n323\n00:16:05.000 --> 00:16:06.400\nSo, easy to do right?\n\n324\n00:16:06.400 --> 00:16:07.970\nYou just restore your domain control.\n\n325\n00:16:07.970 --> 00:16:10.598\nI mean you do your\nActive Directory restore.\n\n326\n00:16:10.598 --> 00:16:14.570\nYou bring him back online and\nthrough normal replication he's\n\n327\n00:16:14.570 --> 00:16:19.010\ngonna be brought up to speed very quickly\n>> Yeah now that sounds like\n\n328\n00:16:19.010 --> 00:16:23.210\nthe reason why we should do it as well,\nthe very fact is that\n\n329\n00:16:23.210 --> 00:16:26.180\nthat particular copy of\nthe Active Directory is gonna get updated.\n\n330\n00:16:26.180 --> 00:16:28.170\nSounds like the best of\nall possible worlds, but\n\n331\n00:16:28.170 --> 00:16:31.330\nyou mentioned that the very fact\nthat we have another scenario.\n\n332\n00:16:31.330 --> 00:16:33.330\nWhy in the world would we choose\nthat other scenario then?\n\n333\n00:16:33.330 --> 00:16:35.160\n>> Well, because of that replication.\n\n334\n00:16:35.160 --> 00:16:37.030\nBecause of the fact that\nreplication's great, but\n\n335\n00:16:37.030 --> 00:16:38.440\nit can also be a hinderance some.\n\n336\n00:16:38.440 --> 00:16:39.640\nI don't want to say, hinderance, but\n\n337\n00:16:39.640 --> 00:16:41.980\nit's something that we've gotta consider,\nright?\n\n338\n00:16:41.980 --> 00:16:46.180\nWhat if I'm restoring,\nnot because I had a hardware failure, but\n\n339\n00:16:46.180 --> 00:16:48.110\nbecause somebody deleted an object.\n\n340\n00:16:48.110 --> 00:16:48.610\nRight?\n\n341\n00:16:48.610 --> 00:16:51.560\nSo, I delete an object off\nof one domain controller.\n\n342\n00:16:51.560 --> 00:16:54.790\nThe fact that that object's deleted\nreplicates to all the other\n\n343\n00:16:54.790 --> 00:16:55.910\ndomain controllers.\n\n344\n00:16:55.910 --> 00:16:57.920\nThen I realize, ooh, that was a mistake.\n\n345\n00:16:57.920 --> 00:16:59.015\nI need to get that object back.\n\n346\n00:16:59.015 --> 00:17:01.290\n>> Mm-hm.\n>> So I go to that one domain controller.\n\n347\n00:17:01.290 --> 00:17:05.760\nI whip out that backup from a couple\nhours ago, before I deleted the object.\n\n348\n00:17:05.760 --> 00:17:07.770\nAnd I do a normal restore on it.\n\n349\n00:17:07.770 --> 00:17:09.190\nAnd everything looks good.\n\n350\n00:17:09.190 --> 00:17:11.340\nThe object is back,\nbecause you know, there it is.\n\n351\n00:17:11.340 --> 00:17:13.030\nIt was back part of my backup.\n\n352\n00:17:13.030 --> 00:17:16.620\nI plug it back into the network and\nguess what's gonna happen?\n\n353\n00:17:16.620 --> 00:17:17.970\nThey are all gonna replicate.\n\n354\n00:17:17.970 --> 00:17:19.690\nThe other domain controllers\nare going to say wait,\n\n355\n00:17:19.690 --> 00:17:21.370\nyou are a couple hours out of date.\n\n356\n00:17:21.370 --> 00:17:22.910\nWe need to update you and\n\n357\n00:17:22.910 --> 00:17:27.000\nthere going to update him to that fact\nthat that object was deleted an hour ago.\n\n358\n00:17:27.000 --> 00:17:28.872\nSo as soon as I restore that object and\n\n359\n00:17:28.872 --> 00:17:32.460\nthen replication occurs the object\nis going to be deleted again.\n\n360\n00:17:32.460 --> 00:17:35.570\nSo that's when we need this\nauthoritative restore.\n\n361\n00:17:35.570 --> 00:17:41.300\nWe have to mark our restored version\nas being the version to keep.\n\n362\n00:17:41.300 --> 00:17:44.320\nIt all goes by time stamp and\nupdate sequence number.\n\n363\n00:17:44.320 --> 00:17:48.140\nAnd when I do that restore,\nthat older backup from a couple hours ago,\n\n364\n00:17:48.140 --> 00:17:50.020\nwell that update sequence number and\n\n365\n00:17:50.020 --> 00:17:54.120\nthat time stamp is older than the ones\nthat the other domain controllers have.\n\n366\n00:17:54.120 --> 00:17:57.350\nWhich is why when they replicate,\nit ends up removing the object again.\n\n367\n00:17:57.350 --> 00:17:59.580\nSo what we're gonna do\nis we're gonna trick it.\n\n368\n00:17:59.580 --> 00:18:01.480\nWe're going to go to that object,\nand we're going to say,\n\n369\n00:18:01.480 --> 00:18:05.370\nhey before you replicate with your\npartners let's increase that number.\n\n370\n00:18:05.370 --> 00:18:06.940\nLet's bump that up so\n\n371\n00:18:06.940 --> 00:18:11.490\nthat your version of the object is higher\nthan all the other domain controllers.\n\n372\n00:18:11.490 --> 00:18:15.300\nYour version will look newer to\nall the other domain controllers.\n\n373\n00:18:15.300 --> 00:18:18.580\nAnd then the replication\nwill now help me out right?\n\n374\n00:18:18.580 --> 00:18:22.610\nIt will make sure that restored object\nis replicated back out to the rest\n\n375\n00:18:22.610 --> 00:18:23.680\nof the domain controllers.\n\n376\n00:18:23.680 --> 00:18:24.910\nThat's what they mean be authoritative.\n\n377\n00:18:24.910 --> 00:18:28.340\nWe're marking this version of that object\n\n378\n00:18:28.340 --> 00:18:30.750\nas the authoritative\nversion of the object.\n\n379\n00:18:30.750 --> 00:18:32.690\nNow it is done on a per object basis.\n\n380\n00:18:32.690 --> 00:18:35.260\nIt's not going to be the entire database.\n\n381\n00:18:35.260 --> 00:18:38.920\nSo it's not hard but\nyou do have to go in and\n\n382\n00:18:38.920 --> 00:18:42.870\nmark each individual object that\nyou want to mark as authoritative.\n\n383\n00:18:42.870 --> 00:18:44.520\nNormally it's not that many.\n\n384\n00:18:44.520 --> 00:18:48.210\nHopefully you're not deleting hundreds\nof objects and then have to go and\n\n385\n00:18:48.210 --> 00:18:51.860\nmark them all as authoritative,\nright, but you might.\n\n386\n00:18:51.860 --> 00:18:52.960\nThere is some cool things we can do.\n\n387\n00:18:52.960 --> 00:18:55.820\nAnd I'll show you Ronnie,\nwe can do a restore object.\n\n388\n00:18:55.820 --> 00:19:00.220\nWe can also do a restore subtree where\nif somebody had deleted an OU and\n\n389\n00:19:00.220 --> 00:19:04.430\nthat OU contained hundreds of objects,\nhundreds of user accounts inside there.\n\n390\n00:19:04.430 --> 00:19:09.800\nInstead of having to mark each object\nas authoritative I can mark the OU and\n\n391\n00:19:09.800 --> 00:19:12.750\nthe subtree, all the things inside it,\nas authoritative and\n\n392\n00:19:12.750 --> 00:19:14.470\nit makes it a little bit easier.\n\n393\n00:19:14.470 --> 00:19:17.150\nSo lets take a look Ronnie\nat the restore process.\n\n394\n00:19:17.150 --> 00:19:20.350\nThe first thing I'm gonna do is\nI've got two domain controllers.\n\n395\n00:19:20.350 --> 00:19:25.260\nAnd we'll just do a normal system\nrestore or Active Directory restore.\n\n396\n00:19:25.260 --> 00:19:29.860\nSo what I'm gonna do is I'm gonna go to\nthe second domain controller over here and\n\n397\n00:19:29.860 --> 00:19:30.900\nI'm gonna make some changes.\n\n398\n00:19:30.900 --> 00:19:35.400\nI'm gonna open up\nActive Directory>Users and Computers.\n\n399\n00:19:35.400 --> 00:19:38.500\nAnd I'm gonna make a new OU.\n\n400\n00:19:40.070 --> 00:19:42.796\nAnd I'll call it After Backup.\n\n401\n00:19:42.796 --> 00:19:47.013\nAnd let's fix that.\n\n402\n00:19:48.170 --> 00:19:49.729\nBoy, can't type today.\n\n403\n00:19:49.729 --> 00:19:52.520\n[LAUGH] I swear English\nis my first language.\n\n404\n00:19:52.520 --> 00:19:54.630\nAll right.\nSo now we've got this OU called\n\n405\n00:19:54.630 --> 00:19:55.790\nafter backup.\n\n406\n00:19:55.790 --> 00:19:59.440\nAnd that OU was created\nafter I made that backup.\n\n407\n00:19:59.440 --> 00:20:01.590\nSo now what we're going to do is\nwe're going to go back over to this\n\n408\n00:20:01.590 --> 00:20:04.530\ndomain controller, and\nI'm going to do a restore.\n\n409\n00:20:04.530 --> 00:20:07.040\nWhich, the backup was done\nbefore that OU was created so\n\n410\n00:20:07.040 --> 00:20:09.640\nthat backup is not going\nto include that OU.\n\n411\n00:20:09.640 --> 00:20:11.660\nBut we should see the normal replication.\n\n412\n00:20:11.660 --> 00:20:15.330\nOnce I bring it back online,\nit should replicate that OU right over.\n\n413\n00:20:15.330 --> 00:20:16.470\nSo let's try it out.\n\n414\n00:20:16.470 --> 00:20:20.290\nWhat I need to do to\nrestore Active Directory,\n\n415\n00:20:20.290 --> 00:20:24.740\nwe need to go into what's called\ndirectory service restore mode.\n\n416\n00:20:24.740 --> 00:20:27.410\nIt's like safe mode for Active Directory.\n\n417\n00:20:27.410 --> 00:20:31.840\nAnd the easiest way to do that,\nat least the way I like to do it,\n\n418\n00:20:31.840 --> 00:20:36.930\nis to add a line to my boot configuration\ndatabase to boot back up into safe mode.\n\n419\n00:20:36.930 --> 00:20:39.790\nEspecially with these virtuals,\nsometimes it can be tricky.\n\n420\n00:20:41.250 --> 00:20:44.130\nExcuse me,\nthese machines reboot so fast now.\n\n421\n00:20:44.130 --> 00:20:47.230\nSometimes it can be difficult to get\ninto those advanced startup options.\n\n422\n00:20:47.230 --> 00:20:52.570\nSo we're gonna do bcdedit /set And\n\n423\n00:20:52.570 --> 00:20:59.090\nI'm gonna call it safe boot, and\nthen I'm gonna set that to dsrepair.\n\n424\n00:20:59.090 --> 00:21:00.220\nAll right.\n\n425\n00:21:00.220 --> 00:21:02.730\nThat's that\nDirectory Service Restore Mode.\n\n426\n00:21:02.730 --> 00:21:04.370\nAnd I hit Enter.\n\n427\n00:21:04.370 --> 00:21:06.520\nAnd now I should be able\nto reboot this machine.\n\n428\n00:21:08.020 --> 00:21:08.520\nWhoops.\n\n429\n00:21:09.860 --> 00:21:11.430\nAnd we'll boot into Safe Mode or\n\n430\n00:21:11.430 --> 00:21:14.990\nDirectory Service Restore Mode\non this domain controller.\n\n431\n00:21:14.990 --> 00:21:17.120\nRemember when you boot into\ndirectory service restore mode,\n\n432\n00:21:17.120 --> 00:21:18.840\nActive Directory is not running.\n\n433\n00:21:18.840 --> 00:21:22.740\nSo the only account that you can log in\nwith is that directory service restore\n\n434\n00:21:22.740 --> 00:21:26.630\nmode account that you created during\nthe promotion of the domain controller.\n\n435\n00:21:26.630 --> 00:21:28.694\nYou have to set that password then so-\n>> So\n\n436\n00:21:28.694 --> 00:21:31.630\nyou remember that you remember\n[LAUGH] Yeah that password there.\n\n437\n00:21:31.630 --> 00:21:36.360\nSo now that we´re actually getting into\nand Mike is there is there any visual\n\n438\n00:21:36.360 --> 00:21:39.430\ncue that tells us that we're in\nthat directory restore mode?\n\n439\n00:21:39.430 --> 00:21:42.310\n>> I'll have to tell that it does not\nlook like it actually went into it.\n\n440\n00:21:42.310 --> 00:21:43.200\n>> All right.\n>> We'll find out here.\n\n441\n00:21:43.200 --> 00:21:44.421\n>> All right.\n[CROSSTALK].\n\n442\n00:21:48.129 --> 00:21:49.560\n>> Yep, there we go.\n\n443\n00:21:49.560 --> 00:21:51.790\nSo it kinda tricks you\nthere at that logon screen.\n\n444\n00:21:51.790 --> 00:21:54.260\n>> Yeah. [LAUGH] >> It looks like you\ncould log on with a domain account\n\n445\n00:21:54.260 --> 00:21:55.850\n>> I probably should have done it to show\n\n446\n00:21:55.850 --> 00:21:58.880\nyou, but it would have failed because\nActive Directory is not available.\n\n447\n00:21:58.880 --> 00:22:00.850\nRight?\nI'm in safe mode.\n\n448\n00:22:00.850 --> 00:22:02.900\nSo, you can see all my\nred flags down here.\n\n449\n00:22:02.900 --> 00:22:05.310\nEverything is, just like safe\nmode on your client machine.\n\n450\n00:22:05.310 --> 00:22:07.230\nMost of your services aren't running,\n\n451\n00:22:07.230 --> 00:22:10.470\nit's loading up just the defaults\nto get the machine up and running.\n\n452\n00:22:10.470 --> 00:22:15.040\nAll right, so now that I'm in that DSRM\nmode, Active Directories not being used,\n\n453\n00:22:15.040 --> 00:22:19.430\nif none of those files are locked\nI should be able to do my restore.\n\n454\n00:22:19.430 --> 00:22:22.128\nLet's go ahead and\nfire up Windows server backup.\n\n455\n00:22:25.712 --> 00:22:30.320\nAnd once this guy loads\nup we're going to click\n\n456\n00:22:30.320 --> 00:22:34.229\nrecover to start the recover process.\n\n457\n00:22:35.540 --> 00:22:39.780\nAnd the back up is stored on this\nmachine locally, so I'll click Next.\n\n458\n00:22:39.780 --> 00:22:42.494\nAnd there I can see I really\nonly have one backup, right?\n\n459\n00:22:42.494 --> 00:22:44.650\nThe one you guys saw me create.\n\n460\n00:22:44.650 --> 00:22:46.290\nI'll click Next.\n\n461\n00:22:46.290 --> 00:22:49.550\nAnd we'll do system state,\nthat's what I wanna restore.\n\n462\n00:22:49.550 --> 00:22:51.320\nI'll click Next.\n\n463\n00:22:51.320 --> 00:22:53.370\nAnd we'll put it right back\nin the original location.\n\n464\n00:22:55.990 --> 00:22:59.770\nAnd it's going to, you notice it says,\noption will cause all replicated content\n\n465\n00:22:59.770 --> 00:23:02.570\non a local server to\nresynchronize after recovery.\n\n466\n00:23:02.570 --> 00:23:04.860\nAnd that's okay,\nwe had a hardware failure.\n\n467\n00:23:04.860 --> 00:23:07.230\nWe know this backup is out of date,\n\n468\n00:23:07.230 --> 00:23:12.000\nI want the replication to bring him\nto current, or bring him up to date.\n\n469\n00:23:12.000 --> 00:23:20.030\nAll right, and we'll go ahead and choose\nto recover, and yes, I want to continue.\n\n470\n00:23:20.030 --> 00:23:22.560\nAnd we'll see how long this takes, Ronnie.\n\n471\n00:23:22.560 --> 00:23:24.540\nIt shouldn't take too long.\n\n472\n00:23:24.540 --> 00:23:28.350\nAnd while this is going, there was that\ncheck mark that I could have checked,\n\n473\n00:23:28.350 --> 00:23:30.280\nautomatically reboot the server.\n\n474\n00:23:30.280 --> 00:23:35.060\nRemember I added a line to my BCD,\nmy boot configuration database.\n\n475\n00:23:35.060 --> 00:23:36.950\nAnd it's gonna go right\nback into safe mode.\n\n476\n00:23:36.950 --> 00:23:41.350\nSo what I need to do before I reboot\nthis guy, is to take that line out so\n\n477\n00:23:41.350 --> 00:23:42.890\nthat it'll boot normally.\n\n478\n00:23:42.890 --> 00:23:46.660\nPlus it'll give me a chance to show\nyou that the backup doesn't include\n\n479\n00:23:46.660 --> 00:23:50.660\nthat OU that was created after\nthe back up was created.\n\n480\n00:23:50.660 --> 00:23:53.421\nSo I'm not gonna automatically\nreboot down here.\n\n481\n00:23:53.421 --> 00:23:56.932\n>> Now if it didn't actually end up\nin this directory restore mode and\n\n482\n00:23:56.932 --> 00:23:59.650\nyou were to try and\ndo this would it have failed?\n\n483\n00:23:59.650 --> 00:24:03.492\n>> Yes, because you can't restore\nActive Directory While Active Directory is\n\n484\n00:24:03.492 --> 00:24:04.030\nrunning.\n\n485\n00:24:04.030 --> 00:24:05.752\n>> Well that actually makes\nsense now that you say it, but\n\n486\n00:24:05.752 --> 00:24:07.387\nit didn't make sense when\nI was thinking about it.\n\n487\n00:24:07.387 --> 00:24:08.620\n>> [LAUGH]\n>> But yeah, when we start taking\n\n488\n00:24:08.620 --> 00:24:09.500\na look at this, right?\n\n489\n00:24:09.500 --> 00:24:12.220\nThis restore mode is actually something\nthat we really need to understand.\n\n490\n00:24:12.220 --> 00:24:15.805\nRemember we're gonna need that\npassword that we We need to hopefully\n\n491\n00:24:15.805 --> 00:24:20.545\nhave written down somewhere or remember so\nthat we can get back into this.\n\n492\n00:24:20.545 --> 00:24:23.775\nBut this restore operation is something\nthat we really have to think about and\n\n493\n00:24:23.775 --> 00:24:26.685\nit is going to be considerable when\nit comes down to what needs to\n\n494\n00:24:26.685 --> 00:24:27.863\nbe done on that point.\n\n495\n00:24:27.863 --> 00:24:30.775\nAnd so let's review again,\nActive Directory,\n\n496\n00:24:30.775 --> 00:24:33.855\nthe non authoritative restore\nis when we just need to\n\n497\n00:24:33.855 --> 00:24:37.590\nget Active Directory back on and then\nallow those replications to sync to it.\n\n498\n00:24:37.590 --> 00:24:39.390\nWe'll talk about doing\nthe authoritative mode.\n\n499\n00:24:39.390 --> 00:24:42.880\nWe're saying, hey,\nhere is the authoritative copy and I want\n\n500\n00:24:42.880 --> 00:24:47.550\nmy stuff to actually kind of sync up or\nreplicate to the others instead, right?\n\n501\n00:24:47.550 --> 00:24:48.080\n>> Exactly.\n\n502\n00:24:48.080 --> 00:24:52.030\nAnd so that authoritative restore,\ntypically we're doing that to\n\n503\n00:24:52.030 --> 00:24:56.660\nrestore a deleted object, to put something\nback that was accidentally removed.\n\n504\n00:24:58.030 --> 00:25:02.110\nAll right, so through the magic of our TV\ntimeout my backup has completed a restore.\n\n505\n00:25:02.110 --> 00:25:05.460\nIt took it about eight to ten\nminutes to do that restore.\n\n506\n00:25:05.460 --> 00:25:07.090\nSo we take a look at my screen.\n\n507\n00:25:07.090 --> 00:25:10.420\nWe've got an interesting\nlittle window that pops up.\n\n508\n00:25:10.420 --> 00:25:12.140\nYou can see it says completed.\n\n509\n00:25:12.140 --> 00:25:14.960\nAnd there's my little message that\ngives me a whole lot of nothing.\n\n510\n00:25:14.960 --> 00:25:18.600\nAnd we just assume that button means okay,\nso we click it.\n\n511\n00:25:18.600 --> 00:25:21.190\nAnd it's going to restart,\n\n512\n00:25:21.190 --> 00:25:24.581\neven though I didn't tell it\nto automatically restart, so.\n\n513\n00:25:24.581 --> 00:25:25.920\n>> [LAUGH]\n>> We'll go ahead and\n\n514\n00:25:25.920 --> 00:25:30.580\nlet this thing restart, it's probably\ngonna come back up into safe mode, or\n\n515\n00:25:30.580 --> 00:25:32.210\nI should say directory\nservice restore mode,\n\n516\n00:25:32.210 --> 00:25:35.580\nbecause I haven't removed that line,\nfrom BCD edit.\n\n517\n00:25:35.580 --> 00:25:37.350\nI set that as the default there.\n\n518\n00:25:37.350 --> 00:25:39.470\nSo let's see what happens on this guy.\n\n519\n00:25:41.030 --> 00:25:44.470\nSo I'll let this reboot and\nwe'll see what comes up.\n\n520\n00:25:45.480 --> 00:25:46.700\nSo what should happen though,\n\n521\n00:25:46.700 --> 00:25:49.540\nwhile we're waiting lets talk\nabout what we want to see.\n\n522\n00:25:49.540 --> 00:25:53.590\nWe want to see that\nthe Active Directory is back.\n\n523\n00:25:53.590 --> 00:25:57.880\nIf we go and look at it we should see\nthat that OU is not there, right?\n\n524\n00:25:57.880 --> 00:26:00.580\nBecause he's not online yet,\nhe's not replicating with anybody and\n\n525\n00:26:00.580 --> 00:26:07.220\nthe backup was created before, the OU\nwas created after I made that backup.\n\n526\n00:26:07.220 --> 00:26:09.400\nSo let's see,\nif I try to log in with a domain account\n\n527\n00:26:10.660 --> 00:26:13.950\nit is gonna let me log in there,\nsystem save,\n\n528\n00:26:13.950 --> 00:26:19.400\nrecovery options started, completed plus\nenter to continue so we'll hit Enter.\n\n529\n00:26:19.400 --> 00:26:21.900\nWhich you can see I'm still\nin that safe mode, so\n\n530\n00:26:21.900 --> 00:26:24.830\nActive Directory is not\nrunning at this point.\n\n531\n00:26:25.860 --> 00:26:27.500\nSo let's go check it out though,\nlet's see if we can,\n\n532\n00:26:27.500 --> 00:26:30.932\nI don't even know if it will let me open\nit up, Ronnie, since it's not running.\n\n533\n00:26:30.932 --> 00:26:34.820\nProbably gonna error out on me,\nnope, it is gonna let me look.\n\n534\n00:26:34.820 --> 00:26:37.360\nSo we'll browse through here and\ntake a look, and you can see.\n\n535\n00:26:39.370 --> 00:26:41.690\nThat OU is there, interesting.\n\n536\n00:26:41.690 --> 00:26:48.133\nSo he's already done his replication and\nhe's already back up to speed.\n\n537\n00:26:48.133 --> 00:26:52.261\nSo, you can see how fast things happen,\nas soon as I get this back online,\n\n538\n00:26:52.261 --> 00:26:55.630\nhe's replicating with\nthat replication partner.\n\n539\n00:26:55.630 --> 00:26:58.270\nThe other domain controller and\nthat OU is back and\n\n540\n00:26:58.270 --> 00:27:00.890\nthat is what we call a normal restore.\n\n541\n00:27:00.890 --> 00:27:06.170\nWe allow them to replicate,\nactually I'm gonna leave that line\n\n542\n00:27:06.170 --> 00:27:10.712\nin BCD edit, because the next thing I\nwant to do is that authoritative restore.\n\n543\n00:27:10.712 --> 00:27:14.840\nWe wanna see how we can mark\nobjects as authoritative.\n\n544\n00:27:14.840 --> 00:27:19.620\nSo what we're gonna do for that,\nis we're gonna delete a couple of things.\n\n545\n00:27:19.620 --> 00:27:22.960\nSo I will, how should we do this?\n\n546\n00:27:22.960 --> 00:27:27.550\nLet's see if it'll let me, if I go Tools,\nActive Directory Users and\n\n547\n00:27:27.550 --> 00:27:32.170\nComputers, I'm actually not sure\nif he's in DSRM right now or not.\n\n548\n00:27:32.170 --> 00:27:33.940\nLet's take a look at my screen.\n\n549\n00:27:33.940 --> 00:27:36.970\nWe are in safe mode, but\nhe is replicating, interesting.\n\n550\n00:27:38.020 --> 00:27:41.370\nSo, we're gonna delete\nI'm gonna go in here and\n\n551\n00:27:41.370 --> 00:27:45.350\nfrom GNV, Developers,\nI'm gonna delete a user account.\n\n552\n00:27:45.350 --> 00:27:48.660\nI'm gonna right-click on that guy and\ndelete it.\n\n553\n00:27:48.660 --> 00:27:52.134\nSo let's remember it was\nRob that we deleted.\n\n554\n00:27:55.446 --> 00:27:57.090\nAll right.\n\n555\n00:27:57.090 --> 00:28:02.980\nAnd we're also gonna delete\nthe entire host's OU out of GNV.\n\n556\n00:28:02.980 --> 00:28:05.640\nSo I'm gonna have to\nallow that to be deleted.\n\n557\n00:28:05.640 --> 00:28:08.260\nLuckily for us,\nit's difficult to delete an OU, right.\n\n558\n00:28:08.260 --> 00:28:12.550\nI have to go in and remove,\nbecause it's protected from deletion.\n\n559\n00:28:12.550 --> 00:28:15.250\nSo if I go Employees, GNV, Hosts, and\n\n560\n00:28:15.250 --> 00:28:19.520\nI pull up those properties,\nI can go to that object tab.\n\n561\n00:28:19.520 --> 00:28:22.200\nAnd I can clear that protect\nfrom maximum deletion.\n\n562\n00:28:22.200 --> 00:28:23.400\nWhich would be a no no, right?\n\n563\n00:28:23.400 --> 00:28:25.610\nI want them to be able to delete that OU,\n\n564\n00:28:25.610 --> 00:28:28.260\nbecause there's user\ncounts inside that OU.\n\n565\n00:28:28.260 --> 00:28:33.780\nSo I right click now, and\nI'll choose Delete, and\n\n566\n00:28:33.780 --> 00:28:37.370\nyes I want to delete\neverything inside that OU.\n\n567\n00:28:37.370 --> 00:28:40.860\nYou can see they really make it\nhard to accidentally do that.\n\n568\n00:28:40.860 --> 00:28:44.820\nNow let's check and see if that's\ngoing to replicate over to my other\n\n569\n00:28:44.820 --> 00:28:48.030\ndomain controllers so\nwe can verify this here.\n\n570\n00:28:48.030 --> 00:28:50.500\nI'll go to Employees and GNV.\n\n571\n00:28:50.500 --> 00:28:55.780\nAnd sure enough, host is gone and\nRob's account is gone.\n\n572\n00:28:55.780 --> 00:29:00.930\nSo my back-up was created\nbefore those guys were deleted.\n\n573\n00:29:00.930 --> 00:29:04.459\nBut if I just do a restore to this domain\ncontroller, to try to get those objects\n\n574\n00:29:04.459 --> 00:29:08.257\nback, then what's gonna happen is that\nother domain controller's gonna tell it,\n\n575\n00:29:08.257 --> 00:29:11.060\nno, your information is old,\nyou need to delete them again.\n\n576\n00:29:11.060 --> 00:29:13.090\nAnd they're just gonna get removed.\n\n577\n00:29:13.090 --> 00:29:16.890\nSo for that,\nwe have to do our authoritative restore.\n\n578\n00:29:16.890 --> 00:29:22.430\nAnd the process is very similar to\na non-authoritative or a normal restore.\n\n579\n00:29:22.430 --> 00:29:27.270\nWhat we're gonna do is we're gonna have\nto go through the restore process again.\n\n580\n00:29:27.270 --> 00:29:33.050\nSo let me fire up\nthe Windows Server back up, and\n\n581\n00:29:33.050 --> 00:29:36.890\nget that guy going.\n\n582\n00:29:39.130 --> 00:29:42.890\nWe'll go and we'll do our restore, and\nwe'll do another TV timeout while this\n\n583\n00:29:42.890 --> 00:29:45.750\nrestore process is going,\nbut we'll get it started.\n\n584\n00:29:45.750 --> 00:29:49.720\nSo I'll go recover,\nbackup is on this domain controller, and\n\n585\n00:29:50.850 --> 00:29:56.070\nI've only got one backup to choose from,\nso we'll do that system state restore, and\n\n586\n00:29:56.070 --> 00:29:57.980\nwe'll put it back in\nthe original location.\n\n587\n00:29:57.980 --> 00:30:00.080\nYou can see I have an option here,\n\n588\n00:30:00.080 --> 00:30:02.990\nperform an authoritative restore\nof the Active Directory files,\n\n589\n00:30:02.990 --> 00:30:08.320\nthis recovery option will reset all\nreplicated content including SYSVOL.\n\n590\n00:30:08.320 --> 00:30:12.300\nSo you could just mark the entire\nthing as authoritative.\n\n591\n00:30:12.300 --> 00:30:16.160\nThat's typically not what we wanna\ndo because changes have occurred\n\n592\n00:30:16.160 --> 00:30:18.040\nto objects that weren't deleted.\n\n593\n00:30:18.040 --> 00:30:20.680\nAnd I don't want those\nchanges being undone, right?\n\n594\n00:30:20.680 --> 00:30:25.080\nThis would be rolling the entire Active\nDirectory back to that point in time.\n\n595\n00:30:25.080 --> 00:30:26.750\nMaybe thatś what you wanna do, right.\n\n596\n00:30:26.750 --> 00:30:30.700\nIn that case that little check\nmark will it allow you to do that.\n\n597\n00:30:30.700 --> 00:30:36.380\nWe don´t want to, so I´m gonna go\nahead and click Next on there, and OK.\n\n598\n00:30:36.380 --> 00:30:39.516\nAnd I´m not gonna check the automatically\nreboot although it seems to wanna do it\n\n599\n00:30:39.516 --> 00:30:40.467\nanyway\n>> [LAUGH]\n\n600\n00:30:40.467 --> 00:30:41.987\n>> And we´ll go ahead and\n\n601\n00:30:41.987 --> 00:30:43.922\nclick recover and then Yes.\n\n602\n00:30:43.922 --> 00:30:47.920\nAll right and we'll let that go and,\nagain, I'm not gonna check that.\n\n603\n00:30:47.920 --> 00:30:50.340\nOne thing I'll show you right\nbefore we take our TV timeout.\n\n604\n00:30:50.340 --> 00:30:52.360\nYou can see the objects\nthat it's restoring.\n\n605\n00:30:52.360 --> 00:30:55.470\nRemember what I said was\na part of system state?\n\n606\n00:30:55.470 --> 00:30:58.670\nYou got your com plus,\nyou've got the registry.\n\n607\n00:30:58.670 --> 00:31:02.610\nNTDS, that's the actual\nActive Directory database.\n\n608\n00:31:02.610 --> 00:31:05.350\nSo all those are part\nof the system restore.\n\n609\n00:31:05.350 --> 00:31:10.160\nMy com plus registrations,\nDFS replication services, as well.\n\n610\n00:31:10.160 --> 00:31:14.200\nWe'll let that go and as soon as\nthat finishes up we'll come back and\n\n611\n00:31:14.200 --> 00:31:18.520\ntake a look at how we mark\nindividual objects as authoritative.\n\n612\n00:31:18.520 --> 00:31:22.530\nAll right so through the magic\nof TV we have come back and\n\n613\n00:31:22.530 --> 00:31:23.910\nmy backup has completed.\n\n614\n00:31:23.910 --> 00:31:27.560\nAgain, took it about ten\nminutes do that restore.\n\n615\n00:31:27.560 --> 00:31:30.640\nThis time it is letting me see that\nlittle message a little bit more and\n\n616\n00:31:30.640 --> 00:31:33.780\nI can see that it says restart not okay.\n\n617\n00:31:33.780 --> 00:31:38.220\nSo I'm not gonna click that, because if I\nrestart it, replication's gonna occur and\n\n618\n00:31:38.220 --> 00:31:40.370\nit's gonna delete that\nobject all over again.\n\n619\n00:31:40.370 --> 00:31:42.760\nIf we look at the other domain controller,\n\n620\n00:31:42.760 --> 00:31:46.190\nhe already knows that those\nobjects were deleted.\n\n621\n00:31:46.190 --> 00:31:50.565\nSo if we take a look at Active Directory,\nI can see that the host OU is gone and\n\n622\n00:31:50.565 --> 00:31:53.212\nRob's account from the developers is gone.\n\n623\n00:31:53.212 --> 00:31:55.926\nSo as soon as I reboot this machine and\nthey replicate,\n\n624\n00:31:55.926 --> 00:31:59.643\nthe backup includes those objects but\nit's going to say no, no, no, your\n\n625\n00:31:59.643 --> 00:32:04.120\ncopies of those objects is old, they were\ndeleted you need to delete those guys.\n\n626\n00:32:04.120 --> 00:32:07.491\nSo I don't want to restart again,\nBefore I restart it,\n\n627\n00:32:07.491 --> 00:32:10.380\nI need to mark those\nobjects as authoritative.\n\n628\n00:32:10.380 --> 00:32:13.899\nSo I'm gonna open up\nan administrative command prompt, and\n\n629\n00:32:13.899 --> 00:32:17.130\nin here I'm gonna go into ntdsutil,\nall right?\n\n630\n00:32:17.130 --> 00:32:22.210\nThat's the utility that we're gonna\nuse to mark these objects, and\n\n631\n00:32:22.210 --> 00:32:25.690\nremember my commands we've\ngotta activate instance\n\n632\n00:32:27.850 --> 00:32:32.530\nNTDS to let it know that I'm working with\nthat current copy of active directory.\n\n633\n00:32:32.530 --> 00:32:35.720\nThen we're gonna switch\ninto the authoritative,\n\n634\n00:32:35.720 --> 00:32:38.050\nI have to sound it out\nwhen I spell it there.\n\n635\n00:32:38.050 --> 00:32:40.164\nAnd I missed it anyway.\n\n636\n00:32:40.164 --> 00:32:44.030\n>> [LAUGH]\n>> There's a 'u' in there somewhere.\n\n637\n00:32:44.030 --> 00:32:44.749\nAuthoritative.\n\n638\n00:32:46.730 --> 00:32:47.280\nRestore.\n\n639\n00:32:48.730 --> 00:32:49.750\nAnd I'll hit Enter.\n\n640\n00:32:49.750 --> 00:32:53.570\nAnd now you can see I'm in that\nauthoritative restore mode for NTDS.\n\n641\n00:32:53.570 --> 00:32:54.210\n>> Nice.\n\n642\n00:32:54.210 --> 00:32:56.910\n>> And then,\ndepending on what I'm trying to do.\n\n643\n00:32:56.910 --> 00:33:02.430\nFor that individual object,\nthat user account, it's restore object.\n\n644\n00:33:04.020 --> 00:33:04.570\nAll right.\nAnd\n\n645\n00:33:04.570 --> 00:33:06.860\nthen the distinguished\nname of that object.\n\n646\n00:33:06.860 --> 00:33:08.410\nYou are going to need to know that.\n\n647\n00:33:08.410 --> 00:33:13.840\nThe distinguished name for Robs account\nwould be CN or common name equals Rob,\n\n648\n00:33:15.520 --> 00:33:20.450\nGary and that account is if I remember\nright he is in the develop OU so\n\n649\n00:33:20.450 --> 00:33:22.620\nOU equals development.\n\n650\n00:33:24.650 --> 00:33:29.550\nComma, OU equals GNV comma,\n\n651\n00:33:29.550 --> 00:33:34.400\nOU equals, not a host, but employees,\n\n652\n00:33:38.000 --> 00:33:42.665\nand then comma DC equals\nlab comma DC equals IT pro.\n\n653\n00:33:42.665 --> 00:33:44.110\n,dc=tv, end my quote.\n\n654\n00:33:44.110 --> 00:33:47.210\nSo remember,\n\n655\n00:33:47.210 --> 00:33:51.740\nyou gotta work with that distinguish name,\nwhich is the path to the object.\n\n656\n00:33:51.740 --> 00:33:55.610\nSo if you read it backwards,\nin the domain lab.itpro.tv,\n\n657\n00:33:55.610 --> 00:33:57.470\nthere's an OU called employees.\n\n658\n00:33:57.470 --> 00:34:00.100\nInside employees,\nthere's an OU called gnv.\n\n659\n00:34:00.100 --> 00:34:02.780\nInside gnv,\nthere's an OU called development\n\n660\n00:34:02.780 --> 00:34:07.370\nInside there I'm gonna find an object\nwith the common name of rob magary.\n\n661\n00:34:07.370 --> 00:34:11.400\nSo we hit enter, and are you sure you\nwanna perform this authoritative restore,\n\n662\n00:34:11.400 --> 00:34:13.010\nwe'll say yes.\n\n663\n00:34:13.010 --> 00:34:16.950\nAnd we'll see that increasing attribute\nversion numbers by 100,000 alright.\n\n664\n00:34:21.920 --> 00:34:23.140\nAnd it didn't like that.\n\n665\n00:34:23.140 --> 00:34:25.600\nWow.\nCould not find an object with a given name\n\n666\n00:34:25.600 --> 00:34:28.440\nDM failed on component.\n\n667\n00:34:28.440 --> 00:34:30.070\nThey spelled development wrong?\n\n668\n00:34:31.680 --> 00:34:32.180\nDevelopment.\n\n669\n00:34:33.840 --> 00:34:35.020\nAuthorative restore failed.\n\n670\n00:34:35.020 --> 00:34:38.670\nLet's just go check, it's developers.\n\n671\n00:34:38.670 --> 00:34:40.050\nThat's why my command failed.\n\n672\n00:34:40.050 --> 00:34:40.820\n>> There we go.\n\n673\n00:34:40.820 --> 00:34:43.280\nAgain that distinguish name will get you.\n\n674\n00:34:43.280 --> 00:34:49.460\nSo let's change that to developers and\ntry that again.\n\n675\n00:34:49.460 --> 00:34:51.720\nYes we want that authoritative restore.\n\n676\n00:34:51.720 --> 00:34:53.940\nAnd there we go, we got success again.\n\n677\n00:34:53.940 --> 00:34:57.340\nIncrease that by 100,000 right.\n\n678\n00:34:59.690 --> 00:35:04.260\nRemember, every time an object gets\nchanged, it increases that number by one.\n\n679\n00:35:04.260 --> 00:35:08.910\nSo it's assuming that there's no way\nsomebody has changed that object 100,000\n\n680\n00:35:08.910 --> 00:35:12.770\ntimes, so this version will\nnow have the highest USN,\n\n681\n00:35:12.770 --> 00:35:15.990\nand then will be replicated back.\n\n682\n00:35:15.990 --> 00:35:17.400\nNow that OU's a little different.\n\n683\n00:35:17.400 --> 00:35:21.130\nI wanna restore that OU and\nall the objects inside that.\n\n684\n00:35:21.130 --> 00:35:25.860\nSo instead of restore object,\nI'm having trouble typing today,\n\n685\n00:35:25.860 --> 00:35:30.420\nrestore subtree is\nthe command we're gonna use.\n\n686\n00:35:30.420 --> 00:35:33.420\nAnd then again the distinguished name for\nthat object so\n\n687\n00:35:33.420 --> 00:35:38.270\nthat's gonna be what O-U\nequals host which was inside\n\n688\n00:35:38.270 --> 00:35:44.420\nthe O-U G and V Which was inside the ou.\n\n689\n00:35:45.750 --> 00:35:46.640\nEmployees.\n\n690\n00:35:48.280 --> 00:35:51.760\nWhich is in the domain\ndc=lab,dc=itpro,dc=tv\" All right,\n\n691\n00:35:51.760 --> 00:35:53.100\nit's the same thing.\n\n692\n00:35:53.100 --> 00:36:00.280\nDoing that distinguish name.\n\n693\n00:36:00.280 --> 00:36:02.220\nI hit enter.\n\n694\n00:36:02.220 --> 00:36:04.130\nYes I'm sure.\n\n695\n00:36:04.130 --> 00:36:08.000\nAnd successfully updated four\nrecords because I had the OU itself\n\n696\n00:36:08.000 --> 00:36:10.650\nas well as three objects inside that OU.\n\n697\n00:36:10.650 --> 00:36:15.020\nSo again it increased those USNs on\nall four of those objects and so\n\n698\n00:36:15.020 --> 00:36:17.460\nyou see how I'd have to do it for\neverything.\n\n699\n00:36:17.460 --> 00:36:18.570\nRight.\n\n700\n00:36:18.570 --> 00:36:21.860\nIf I had multiple objects and I needed\nto do an authoritative restore on, or\n\n701\n00:36:21.860 --> 00:36:25.590\nthere was that check mark in the wizard\nif I wanted to mark the entire version,\n\n702\n00:36:25.590 --> 00:36:28.350\nthis version of active\ndirectory as authoritative.\n\n703\n00:36:28.350 --> 00:36:31.100\nTypically that's not what we want\nthough because then you're rolling\n\n704\n00:36:31.100 --> 00:36:35.040\neverything in active directory back\nto whenever that backup was made.\n\n705\n00:36:35.040 --> 00:36:40.420\nAlright, so now I'll just type in \"quit\"\nto get out of NTDS a couple of times.\n\n706\n00:36:40.420 --> 00:36:45.130\nAnd then what I'm gonna do is I'm gonna\nremove that line from BCD edit, so\n\n707\n00:36:45.130 --> 00:36:51.050\nthat's gonna be BC or from boot\nconfiguration database, \"bcdedit\" and\n\n708\n00:36:51.050 --> 00:36:55.459\nit's gonna be \"/deletevalue safegroups\".\n\n709\n00:36:57.230 --> 00:37:02.260\nAll right, so that means when I restart\nthis machine, it should boot normally.\n\n710\n00:37:02.260 --> 00:37:04.990\nAnd will verify that it\ndoes replicate those\n\n711\n00:37:04.990 --> 00:37:06.930\nobjects back to the other\ndomain controller.\n\n712\n00:37:06.930 --> 00:37:12.750\nSo, we'll do a little shutdown -r -t0 or\n\n713\n00:37:12.750 --> 00:37:15.390\nyou may even be able to\nclick on that little box.\n\n714\n00:37:15.390 --> 00:37:16.240\n>> Yeah.\n>> I could have,\n\n715\n00:37:16.240 --> 00:37:18.490\nI could have gone back to that wizard and\nclicked that box,\n\n716\n00:37:18.490 --> 00:37:20.280\nand that would have restarted it as well.\n\n717\n00:37:20.280 --> 00:37:23.900\nYou can use your start manager, so\nhow ever you want to restart it.\n\n718\n00:37:23.900 --> 00:37:24.960\nLet this guy reboot,\n\n719\n00:37:24.960 --> 00:37:29.330\nit should come back up into normal mode,\nthose objects should be there.\n\n720\n00:37:29.330 --> 00:37:32.620\nAnd they should replicate to\nthose other domain controllers.\n\n721\n00:37:32.620 --> 00:37:36.840\nSo drumroll while we get\nthis guy booted back up.\n\n722\n00:37:36.840 --> 00:37:38.870\n>> Alright Mike, so that process,\n\n723\n00:37:38.870 --> 00:37:42.700\nat least at the end there on the\nauthoritative restore, looks like there's\n\n724\n00:37:42.700 --> 00:37:45.920\na little more administrative effort\nthat we have to put behind it.\n\n725\n00:37:45.920 --> 00:37:50.660\nSo, getting to understand the use\nof those, the distinguished names.\n\n726\n00:37:50.660 --> 00:37:52.290\n>> Mm hm.\n>> See, I'm starting to get it,\n\n727\n00:37:52.290 --> 00:37:53.770\nthe distinguished names,\n\n728\n00:37:53.770 --> 00:37:56.890\nit's gonna be very important if you\nhave to do something like this.\n\n729\n00:37:56.890 --> 00:38:00.730\nBut Mike, is this something that\nwe might have to do super often?\n\n730\n00:38:00.730 --> 00:38:02.120\n>> Hopefully we don't,\n\n731\n00:38:02.120 --> 00:38:06.100\nokay, I mean because you saw how\ntough it was to actually delete that.\n\n732\n00:38:06.100 --> 00:38:09.590\nActive directory has done a lot of\nthings to Try to help us with that.\n\n733\n00:38:09.590 --> 00:38:11.340\nIf we're in 2008 R2 and later,\n\n734\n00:38:11.340 --> 00:38:16.520\nwe've got the Active Directory\nrecycle bin so we can actually\n\n735\n00:38:16.520 --> 00:38:20.160\nrestore objects from there without\never having to do any of this, right.\n\n736\n00:38:20.160 --> 00:38:21.600\nSo there are some other options, Ronnie,\n\n737\n00:38:21.600 --> 00:38:24.360\nthat just should make\nit a little bit easier.\n\n738\n00:38:24.360 --> 00:38:29.480\nThis is our worst case\nscenario type restore.\n\n739\n00:38:29.480 --> 00:38:34.710\nAll right, so it's finishing up\nthat process there hopefully,\n\n740\n00:38:35.850 --> 00:38:38.640\nthey're telling me that\nthe system state completed.\n\n741\n00:38:40.020 --> 00:38:40.880\n>> Hey that looks better.\n\n742\n00:38:40.880 --> 00:38:43.080\n>> And\nnotice we're booting normally now, so\n\n743\n00:38:43.080 --> 00:38:44.999\nserver manager will launch up in a second.\n\n744\n00:38:46.580 --> 00:38:49.150\nAnd we'll open up\nActive Directory Users and Computers.\n\n745\n00:38:49.150 --> 00:38:52.340\nOnce it does, we'll give it just a second,\nit gets really angry if you click\n\n746\n00:38:52.340 --> 00:38:55.890\non things too soon while we got\nthat blue bar flashing up there.\n\n747\n00:38:57.130 --> 00:39:00.490\nThere we go, we go Tools, and\nthen Active Directory Users and Computers.\n\n748\n00:39:01.970 --> 00:39:05.700\nAnd this is when as an IT admin\nyou keep your fingers crossed.\n\n749\n00:39:05.700 --> 00:39:10.080\nI go into GNV and sure enough,\nmy host OU is back as well as all the user\n\n750\n00:39:10.080 --> 00:39:13.420\naccounts inside it and gonna go to\ndevelopers for you, there's Rob.\n\n751\n00:39:13.420 --> 00:39:15.440\nSo you can see,\nyou bring it back online and\n\n752\n00:39:15.440 --> 00:39:17.550\nit didn't automatically delete them again.\n\n753\n00:39:17.550 --> 00:39:20.310\nWe flip it over to the other\ndomain controller and we refresh.\n\n754\n00:39:22.110 --> 00:39:27.310\nWe should see, my host right here is\nback as well as Rob's user account.\n\n755\n00:39:27.310 --> 00:39:31.260\nSo that's how you mark those objects\nas authoritative to make sure that\n\n756\n00:39:31.260 --> 00:39:34.950\nwhen you do your restore,\nthey don't get deleted immediately, right?\n\n757\n00:39:34.950 --> 00:39:38.040\nAs soon as you bring that\nmain controller back online.\n\n758\n00:39:38.040 --> 00:39:41.270\n>> All right Mike, that's a lot\nof information for backing up and\n\n759\n00:39:41.270 --> 00:39:43.240\nrestoring active directory.\n\n760\n00:39:43.240 --> 00:39:46.080\nSo we took a look at,\nwell really quite a bit right,\n\n761\n00:39:46.080 --> 00:39:48.780\nwhere we showed you how to\nback up active directory.\n\n762\n00:39:48.780 --> 00:39:52.760\nAnd then showed why we want to use\nit because remember that even though\n\n763\n00:39:52.760 --> 00:39:56.500\nreplication happens, replication\nprobably can always end up happening so\n\n764\n00:39:56.500 --> 00:39:59.770\nhaving a good back up of active\ndirectories is incredibly important\n\n765\n00:39:59.770 --> 00:40:03.460\nbecause it gives us that ability to say,\nhey look, this machine is now, for\n\n766\n00:40:03.460 --> 00:40:06.870\none reason or another, the machine is\nnot where we need it to be and we need\n\n767\n00:40:06.870 --> 00:40:10.930\nthe active directory to be copied back and\nwe can do a non authoritative restore.\n\n768\n00:40:10.930 --> 00:40:14.500\nAnd then have all those changes replicated\nback to that active directory or\n\n769\n00:40:14.500 --> 00:40:16.700\nif we actually know that\nwe have a good copy and\n\n770\n00:40:16.700 --> 00:40:19.760\nthe rest of my active directory\nis not where it needs to be,\n\n771\n00:40:19.760 --> 00:40:23.570\nwe can do that active directory restore\nthis in authoritative mode and I should be\n\n772\n00:40:23.570 --> 00:40:26.700\nable to bring everything back up to\nstate the way that we want to as well.\n\n773\n00:40:26.700 --> 00:40:32.110\nNow, Mike is there any special sauce,\nany secrets that\n\n774\n00:40:32.110 --> 00:40:35.560\nwe actually need to think about when we\nstart talking about the idea of backups?\n\n775\n00:40:35.560 --> 00:40:38.120\nThe good that thing that\nyou kind of told me is\n\n776\n00:40:38.120 --> 00:40:41.170\nmaking sure the we do it on every\ndomain controller that we possibly can.\n\n777\n00:40:41.170 --> 00:40:43.070\nI think is probably gonna\none of the big keys.\n\n778\n00:40:43.070 --> 00:40:44.260\nThat's the secret.\n\n779\n00:40:44.260 --> 00:40:44.770\n>> You really do.\n\n780\n00:40:44.770 --> 00:40:47.930\nYou gotta do your backups on\nall your domain controllers.\n\n781\n00:40:47.930 --> 00:40:51.110\nAnd then just trying to be safe\nwith active directory right.\n\n782\n00:40:51.110 --> 00:40:52.410\nNot deleting those objects.\n\n783\n00:40:52.410 --> 00:40:53.700\nNot un-checking that.\n\n784\n00:40:53.700 --> 00:40:56.250\nProtect from accidental deletion\nthat's the default on the OUs,\n\n785\n00:40:56.250 --> 00:41:01.490\nit's not the default of user accounts, so\nthey can right click delete very easily.\n\n786\n00:41:01.490 --> 00:41:05.390\nDoing things like turning on that active\ndirectory recycle bin can also help,\n\n787\n00:41:05.390 --> 00:41:10.710\nthat give you the ability to restore it\nwithout having to go through this process,\n\n788\n00:41:10.710 --> 00:41:13.480\nbut it's important that we\nunderstand this process is there so\n\n789\n00:41:13.480 --> 00:41:15.450\nthat if we need to we can.\n\n790\n00:41:15.450 --> 00:41:20.200\nAnd the other big thing is to remember to\ninto that directory service restore mode.\n\n791\n00:41:20.200 --> 00:41:21.800\nSometimes when you've got,\n\n792\n00:41:21.800 --> 00:41:25.370\nyou know nowadays we're remoting into our\nservers to do most of our management.\n\n793\n00:41:25.370 --> 00:41:28.100\nThere could be virtualized or\nout there in the cloud.\n\n794\n00:41:28.100 --> 00:41:32.475\nSo getting into that save mode is not\nas easy as hitting F8 on the keyboard.\n\n795\n00:41:32.475 --> 00:41:34.340\n>> [LAUGH]\n>> And choosing DSRM.\n\n796\n00:41:34.340 --> 00:41:39.230\nSo that BCDedit command set\nthat save boot, DSRepair.\n\n797\n00:41:39.230 --> 00:41:42.370\nThat's an important one to know, that way\nwe can force that domain controller to\n\n798\n00:41:42.370 --> 00:41:45.930\nboot back up in to that\ndirectory's service restore mode.\n\n799\n00:41:45.930 --> 00:41:49.350\n>> Well, thank you again Mike, for\nshowing us all that, it's a lot for\n\n800\n00:41:49.350 --> 00:41:51.530\nus to actually chew on,\nbut it's a great place for\n\n801\n00:41:51.530 --> 00:41:55.460\nus to also end this episode\n>> Thank you also for joining us.\n\n802\n00:41:55.460 --> 00:41:58.060\nSigning off for IT Pro TV,\nI'm Ronnie Wong.\n\n803\n00:41:58.060 --> 00:41:58.840\n>> And I'm Mike Roderick.\n\n804\n00:41:58.840 --> 00:41:59.820\n>> And we'll see you next time.\n\n805\n00:41:59.820 --> 00:42:04.910\n[MUSIC]\n\n",
          "vimeoId": "146522374"
        }
      ],
      "title": "Active Directory"
    }
  ],
  "url": "active-directory",
  "vLab": false
}
