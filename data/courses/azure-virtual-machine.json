{
  "description": "The Microsoft Azure Virtual Machine course covers the foundational knowledge you need to implement an Azure Virtual Machine. The course is geared toward system administrators, who currently have systems in Azure or support local servers and want to transition over to Azure. One should expect to learn how to deploy virtual machines into Windows Azure, different configurations of those servers and how to manage them, the process of how to back up and restore a server and other features in Azure that can be used to supplement a virtual machine.",
  "descriptionMD": "",
  "length": "33247",
  "name": "Azure Virtual Machine",
  "practiceExam": false,
  "subtitle": "Azure VM",
  "tagUrl": "legacy",
  "topics": [
    {
      "episodes": [
        {
          "description": "In this segment, Daniel and Don give a general overview of what you can expect in the upcoming episodes. They cover what the show's about, the target audience, what will be covered overall, and other topics.",
          "length": "366",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-0-0-overview-113015-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-0-0-overview-113015-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-0-0-overview-113015-1-sm.jpg",
          "title": "Overview",
          "transcript": "WEBVTT\n\n1\n00:00:00.025 --> 00:00:04.650\n[SOUND] In this segment,\nwe're gonna go over\n\n2\n00:00:04.650 --> 00:00:09.775\nthe Microsoft Azure Virtual Machine\ncourse that\n\n3\n00:00:09.775 --> 00:00:14.901\nwe're gonna make available\nhere from ITProTV.\n\n4\n00:00:14.901 --> 00:00:18.401\nAnd Don, you're here to help us walk\nthrough what we should actually come to\n\n5\n00:00:18.401 --> 00:00:19.500\nexpect from this show.\n\n6\n00:00:19.500 --> 00:00:20.930\nThere's a lot of cool stuff coming up.\n\n7\n00:00:20.930 --> 00:00:22.590\n>> Yeah, it's a neat one.\n\n8\n00:00:22.590 --> 00:00:26.880\nIn the world of cloud services,\na lot of people have heard of Amazon and\n\n9\n00:00:26.880 --> 00:00:29.970\nEC2 and\neven Google Compute to a lesser extent,\n\n10\n00:00:29.970 --> 00:00:31.700\nsome of the other vendors\nthat are out there.\n\n11\n00:00:31.700 --> 00:00:34.460\nBut Microsoft's Azure has\nreally been gaining steam,\n\n12\n00:00:34.460 --> 00:00:38.780\nand you can do a lot of stuff in Azure,\na lot of database hosting and\n\n13\n00:00:38.780 --> 00:00:40.750\ninstance hosting,\nall sorts of crazy things.\n\n14\n00:00:40.750 --> 00:00:44.773\nBut in this show we're gonna focus\nspecifically on virtual machines.\n\n15\n00:00:44.773 --> 00:00:48.718\nTaking your servers, that in the past\nmight have been physical servers, or even\n\n16\n00:00:48.718 --> 00:00:52.663\nvirtual servers in your own environment,\nand moving them up into the Azure cloud\n\n17\n00:00:52.663 --> 00:00:56.380\nwhere you can start to take advantage\nof a lot of really cool features.\n\n18\n00:00:56.380 --> 00:01:00.840\nAnd just the efficiencies of scale that\nyou get by running in a world-class\n\n19\n00:01:00.840 --> 00:01:02.500\ndata center like one of Microsoft's.\n\n20\n00:01:02.500 --> 00:01:04.860\nAnd I mean it's a really powerful tool.\n\n21\n00:01:04.860 --> 00:01:06.660\nA lot of people are nervous or\n\n22\n00:01:06.660 --> 00:01:10.680\njust don't necessary trust\nmaking that jump into the cloud.\n\n23\n00:01:10.680 --> 00:01:14.360\nAnd so, what we hope to do with this\nshow is take away that nervousness,\n\n24\n00:01:14.360 --> 00:01:16.670\nthat trepidation and\nmake you recognize that, boy,\n\n25\n00:01:16.670 --> 00:01:19.030\nthere's some really good\nstuff to be found there.\n\n26\n00:01:19.030 --> 00:01:23.220\nAnd it's really inexpensive,\nwhich is kind of a benefit in most books.\n\n27\n00:01:23.220 --> 00:01:26.500\nBut we'll get a chance to see that, see\nsome of the cool features, and really just\n\n28\n00:01:26.500 --> 00:01:29.990\njump in there and tackle using Windows\nAzure to support our virtual machines.\n\n29\n00:01:29.990 --> 00:01:32.834\n>> Now Don you're using a lot\nof big words there, and\n\n30\n00:01:32.834 --> 00:01:36.968\nobviously this is probably not for\nthe intro [LAUGH] into IT kinda person,\n\n31\n00:01:36.968 --> 00:01:40.053\nwho is the target audience for\nthis specific course?\n\n32\n00:01:40.053 --> 00:01:42.483\n>> All right, so who we're giving this\ntowards are really gonna be system\n\n33\n00:01:42.483 --> 00:01:43.100\nadmins, right?\n\n34\n00:01:43.100 --> 00:01:47.690\nSo, these are people who either currently\nalready have some systems in Azure.\n\n35\n00:01:47.690 --> 00:01:52.160\nOr support local servers and\nwanna make that jump to Azure.\n\n36\n00:01:52.160 --> 00:01:54.860\nBut the key point is that you're\nalready working with servers.\n\n37\n00:01:54.860 --> 00:01:56.610\nNow, I'm leaving clients out of this.\n\n38\n00:01:56.610 --> 00:01:59.816\nYou can put Windows 7, Windows 8,\nWindows 10 clients in Azure.\n\n39\n00:01:59.816 --> 00:02:01.060\nBut it's not really what it's made for.\n\n40\n00:02:01.060 --> 00:02:02.560\nIt's really made for servers.\n\n41\n00:02:02.560 --> 00:02:06.160\nSo, you need to have some experience\nwith either Linux or Windows as a server\n\n42\n00:02:06.160 --> 00:02:09.730\ndeployed in the environment and kinda be\nsupporting that before you jump into this.\n\n43\n00:02:09.730 --> 00:02:13.110\nIf you don't understand those concepts,\nif you don't have that foundational\n\n44\n00:02:13.110 --> 00:02:16.780\nknowledge, it's really hard to view\nthe difference between virtualizing versus\n\n45\n00:02:16.780 --> 00:02:18.955\nphysical, and it really just\nkind of falls to pieces there.\n\n46\n00:02:18.955 --> 00:02:23.462\nSo,you really should have already kind of\nmade some steps as far as getting your\n\n47\n00:02:23.462 --> 00:02:25.966\nMCSA, or\nat least an MCP in Windows Server.\n\n48\n00:02:25.966 --> 00:02:28.120\nYou've kind of worked\nwith that technology.\n\n49\n00:02:28.120 --> 00:02:29.790\nYou've implemented it out\nthere in the field, and\n\n50\n00:02:29.790 --> 00:02:32.770\nnow you're looking at how you can benefit\nby putting it into a virtual environment.\n\n51\n00:02:32.770 --> 00:02:36.540\nSo, yeah, definitely not the starting\nout type show for somebody.\n\n52\n00:02:36.540 --> 00:02:40.617\nStarting out, if you've never even\ngone to the Microsoft Azure web page,\n\n53\n00:02:40.617 --> 00:02:42.246\nyou'll be fine, all right?\n\n54\n00:02:42.246 --> 00:02:44.070\nBut you gotta have some server experience.\n\n55\n00:02:44.070 --> 00:02:47.130\nYou gotta to understand what that's\nlike to host your own system.\n\n56\n00:02:47.130 --> 00:02:50.160\nTo see about moving that into a virtual\nworld, that's the big difference.\n\n57\n00:02:50.160 --> 00:02:52.992\nBut if you've never even heard of Azure,\nif you've never even heard of AWS,\n\n58\n00:02:52.992 --> 00:02:55.274\nor Google Computer, or whatever,\nyou'll be fine, right?\n\n59\n00:02:55.274 --> 00:02:59.056\nWe are gonna cover it all from the\nbeginning to advanced as we move through\n\n60\n00:02:59.056 --> 00:03:02.020\nusing your virtual machines\nin Microsoft Azure.\n\n61\n00:03:02.020 --> 00:03:02.540\n>> All right Don.\n\n62\n00:03:02.540 --> 00:03:05.600\nNow it's time to dangle\nthe really good bait out there.\n\n63\n00:03:05.600 --> 00:03:06.480\nTell these good folks,\n\n64\n00:03:06.480 --> 00:03:11.710\nwhat are we going to cover, what should\nthey expect to learn in this class?\n\n65\n00:03:11.710 --> 00:03:12.341\n>> All right, so\n\n66\n00:03:12.341 --> 00:03:15.613\nwe're gonna tackle some things that\nI consider really need-to-know.\n\n67\n00:03:15.613 --> 00:03:19.050\nWe're gonna start off with just\na broad introduction to Azure.\n\n68\n00:03:19.050 --> 00:03:21.899\nSo if you have never heard of it,\nwe'll give you that intro.\n\n69\n00:03:21.899 --> 00:03:25.375\nAnd in that one we're gonna talk about\nthings like pricing, which is important.\n\n70\n00:03:25.375 --> 00:03:27.723\nYou gotta understand how this is\nbilled and determine whether or\n\n71\n00:03:27.723 --> 00:03:29.297\nnot you're actually saving money or not.\n\n72\n00:03:29.297 --> 00:03:32.515\nWe're gonna talk about some of\nthe advanced features we get by being\n\n73\n00:03:32.515 --> 00:03:33.030\nin Azure.\n\n74\n00:03:33.030 --> 00:03:37.980\nThe stuff like the heavy redundancy, and\ninfrastructure, network operation center,\n\n75\n00:03:37.980 --> 00:03:40.040\npeople that are super talented.\n\n76\n00:03:40.040 --> 00:03:41.620\nJust tons of advantages of being there.\n\n77\n00:03:41.620 --> 00:03:43.380\nSo we'll get a chance to see those.\n\n78\n00:03:43.380 --> 00:03:47.680\nWe're also gonna take a look at how to\ndeploy virtual machines, be they Linux or\n\n79\n00:03:47.680 --> 00:03:49.370\nWindows, into the Windows Azure.\n\n80\n00:03:49.370 --> 00:03:53.340\nWe'll talk about how to convert a physical\nsystem to move it into a virtual system.\n\n81\n00:03:53.340 --> 00:03:56.380\nIf you've already got servers locally and\nyou wanna move them into Azure,\n\n82\n00:03:56.380 --> 00:03:59.280\nwe'll get a chance to see how to do that,\nand that process.\n\n83\n00:03:59.280 --> 00:04:02.640\nWe'll talk about some of the different\nconfigurations for those servers,\n\n84\n00:04:02.640 --> 00:04:05.220\nthe different ways that we can\nspec them out for performance.\n\n85\n00:04:05.220 --> 00:04:07.520\nAnd once they're up and running,\nwe'll talk about how we can manage them.\n\n86\n00:04:07.520 --> 00:04:11.846\nHow we can make sure they're running just\nfine, staying up, staying in business, and\n\n87\n00:04:11.846 --> 00:04:14.419\nreally leveraging some of\nthe high availability and\n\n88\n00:04:14.419 --> 00:04:17.280\nredundancy features that\nare available in Azure.\n\n89\n00:04:17.280 --> 00:04:19.170\nIt's a very complex network, and\n\n90\n00:04:19.170 --> 00:04:21.430\nit's up to you to make sure\nyou take advantage of it.\n\n91\n00:04:21.430 --> 00:04:24.000\nWe're also gonna talk about\nhow to backup and restore.\n\n92\n00:04:24.000 --> 00:04:25.130\nCuz this is really weird, right?\n\n93\n00:04:25.130 --> 00:04:27.929\nWhen you got a physical server,\nI need to back up that physical server.\n\n94\n00:04:27.929 --> 00:04:30.540\nAnd when it's time to restore I go and\ngrab those tapes.\n\n95\n00:04:30.540 --> 00:04:31.560\nBut when it's all virtual, and\n\n96\n00:04:31.560 --> 00:04:35.420\nit's all up there in the cloud you\ndon't even know the physical server.\n\n97\n00:04:35.420 --> 00:04:36.810\nYou don't even know what it looks like.\n\n98\n00:04:36.810 --> 00:04:39.360\nBut you've got to backup it and\nrestore it, that's just really weird.\n\n99\n00:04:39.360 --> 00:04:42.300\nSo, we're gonna talk about\nhow that process works too.\n\n100\n00:04:42.300 --> 00:04:45.860\nAnd throughout all of that, which sounds\nlike good stuff, but throughout all of\n\n101\n00:04:45.860 --> 00:04:49.660\nthat, we're also gonna be talking about\nsome of the other features in Azure\n\n102\n00:04:49.660 --> 00:04:53.770\nthat we can use to supplement the virtual\nmachines to make them even more robust.\n\n103\n00:04:53.770 --> 00:04:57.040\nSo there's a couple of neat little things,\nlike DNS, that we'll get into.\n\n104\n00:04:57.040 --> 00:05:00.420\nYou can build VM's all day long and\nnot worry about DNS at all.\n\n105\n00:05:00.420 --> 00:05:03.770\nBut sooner or later you're gonna wanna\nattach a host name to a virtual machine,\n\n106\n00:05:03.770 --> 00:05:05.776\nand you'll need to know\na little bit about DNS.\n\n107\n00:05:05.776 --> 00:05:09.030\nSo we'll cover some of that too all\nthroughout the course of the series.\n\n108\n00:05:09.030 --> 00:05:11.300\n>> Sounds very, very cool so far.\n\n109\n00:05:11.300 --> 00:05:14.340\nNow, I know a lot of the shows\nthat we do here at ITProTV,\n\n110\n00:05:14.340 --> 00:05:15.880\nthey're exam oriented, right?\n\n111\n00:05:15.880 --> 00:05:17.620\nThey're working you toward an exam.\n\n112\n00:05:17.620 --> 00:05:20.440\nIs there an exam associated with this?\n\n113\n00:05:20.440 --> 00:05:21.770\n>> Not really, not yet.\n\n114\n00:05:21.770 --> 00:05:25.119\nSo Microsoft is working on several\ndifferent Azure certifications, and\n\n115\n00:05:25.119 --> 00:05:27.613\nthey've got a few of\nthe MCSE-level stuff that does.\n\n116\n00:05:27.613 --> 00:05:30.994\nBut at the lower level, the kinda getting\nstarted like we're gonna be doing, and\n\n117\n00:05:30.994 --> 00:05:32.808\neven some of the advanced\nstuff we get into,\n\n118\n00:05:32.808 --> 00:05:35.180\nthey really don't have an exam\nthat's catered to this.\n\n119\n00:05:35.180 --> 00:05:38.680\nSo this is more of a technical skills\nshow, one that's done for your benefit.\n\n120\n00:05:38.680 --> 00:05:40.760\nJust the knowledge that you\nwant to gain from it, not so\n\n121\n00:05:40.760 --> 00:05:42.590\nmuch based on getting\na certification out of it.\n\n122\n00:05:42.590 --> 00:05:43.910\nStill very valuable knowledge.\n\n123\n00:05:43.910 --> 00:05:44.920\n>> Well awesome stuff Don.\n\n124\n00:05:44.920 --> 00:05:46.770\nI know it sounds like\na really awesome show.\n\n125\n00:05:46.770 --> 00:05:48.918\nI'm looking forward to\ndoing the show with you.\n\n126\n00:05:48.918 --> 00:05:50.530\nAnd hopefully we'll see you guys there.\n\n127\n00:05:50.530 --> 00:05:52.160\nA lot of great content coming up.\n\n128\n00:05:52.160 --> 00:05:53.640\nSo stay tuned and\n\n129\n00:05:53.640 --> 00:05:57.380\njoin us with these new Azure from\nMicrosoft and their virtual machines.\n\n130\n00:05:57.380 --> 00:05:59.470\nAnd we'll see you then.\n\n131\n00:05:59.470 --> 00:06:06.319\n[SOUND]\n\n",
          "vimeoId": "147474253"
        },
        {
          "description": "In this episode, Daniel and Don go over the basics of Microsoft Azure. They start with the very foundational knowledge; things like typical scenarios for why you may want to utilize Azure VMs, as well as some of the benefits of using Azure VMs. Then they move into detail about licensing considerations and pricing specifics so you can make sure you're getting the best bang for your buck.",
          "length": "1968",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-1-1-microsoft_azure_basics-113015-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-1-1-microsoft_azure_basics-113015-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-1-1-microsoft_azure_basics-113015-1-sm.jpg",
          "title": "Microsoft Azure Basics",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:12.181 --> 00:00:14.235\n>> All right, greetings everyone and\n\n3\n00:00:14.235 --> 00:00:17.119\nwelcome to another exciting\nepisode of ITProTV.\n\n4\n00:00:17.119 --> 00:00:20.051\nI'm your host, Daniel Lowrie,\nand in this episode,\n\n5\n00:00:20.051 --> 00:00:24.000\nwe're gonna be taking a look at\nMicrosoft Azure virtual machines.\n\n6\n00:00:24.000 --> 00:00:27.795\nAnd helping us out today in the studio,\njoining us, is none other than Mr.\n\n7\n00:00:27.795 --> 00:00:28.710\nDon Pezet.\n\n8\n00:00:28.710 --> 00:00:29.780\nHow's it going today, Don?\n\n9\n00:00:29.780 --> 00:00:30.820\n>> It is going great Daniel.\n\n10\n00:00:30.820 --> 00:00:32.260\nThanks for having me on the show.\n\n11\n00:00:32.260 --> 00:00:36.765\nAnd for our first episode,\nour inaugural episode for Azure VMs,\n\n12\n00:00:36.765 --> 00:00:41.125\nwhat I wanna do is I wanna\nstart off kind of slow, right.\n\n13\n00:00:41.125 --> 00:00:42.935\nI'm just building up the suspension,\nright?\n\n14\n00:00:42.935 --> 00:00:45.815\nI want to start off with some\nbasics about Windows Azure.\n\n15\n00:00:45.815 --> 00:00:49.475\nI know that a lot of you guys\nwho might be watching this show,\n\n16\n00:00:49.475 --> 00:00:51.975\nhave exposure with Azure,\nthat you've already used it, but\n\n17\n00:00:51.975 --> 00:00:53.875\nsome of you might not,\nmight not have touched it at all.\n\n18\n00:00:53.875 --> 00:00:57.084\nAnd so, I just want to cover some\nbasics as far as what Azure is,\n\n19\n00:00:57.084 --> 00:01:01.204\nwhy we'd want to use it, why we even wanna\ndeploy this stuff in the first place and\n\n20\n00:01:01.204 --> 00:01:02.490\nwhat scenarios.\n\n21\n00:01:02.490 --> 00:01:05.490\nAnd then some of the considerations\nwe have with using it,\n\n22\n00:01:05.490 --> 00:01:07.080\nmost importantly being cost.\n\n23\n00:01:07.080 --> 00:01:09.950\nI wanna talk about how much\nmoney this is gonna cost you,\n\n24\n00:01:09.950 --> 00:01:13.050\nbecause to a lot of people getting\nstarted with Azure, that's a big concern.\n\n25\n00:01:13.050 --> 00:01:15.780\nThey just don't know how expensive this is\ngonna be, so I wanna take some time and\n\n26\n00:01:15.780 --> 00:01:16.985\ntalk about that.\n\n27\n00:01:16.985 --> 00:01:19.650\nNow if you've already been out\nthere working with Azure and\n\n28\n00:01:19.650 --> 00:01:22.510\nyou're just here to learn about the\nvirtual machines, you're not gonna hurt\n\n29\n00:01:22.510 --> 00:01:25.470\nmy feelings if you hit the fast forward\nbutton and jump to episode two.\n\n30\n00:01:25.470 --> 00:01:27.950\nBut, for right now,\nthe basics are kind of important.\n\n31\n00:01:27.950 --> 00:01:30.820\nWe need to make sure we understand how\nAzure works, to make sure it's a right fit\n\n32\n00:01:30.820 --> 00:01:33.606\nfor us because it's not necessarily\na right fit for everybody.\n\n33\n00:01:33.606 --> 00:01:35.138\n>> Speaking of basics, Don,\n\n34\n00:01:35.138 --> 00:01:39.610\nit really does come down to the type of\nscenarios that you might be dealing with.\n\n35\n00:01:39.610 --> 00:01:43.730\nAnd that's why you'd want to jump\nin to a cloud type provider.\n\n36\n00:01:43.730 --> 00:01:45.720\nSo I guess a good place to start with,\n\n37\n00:01:45.720 --> 00:01:49.312\nwhat are some of those types of scenarios\nthat would lend us to go that way?\n\n38\n00:01:49.312 --> 00:01:52.960\n>> All right, well let me give you an\nexample that I know that there have been\n\n39\n00:01:52.960 --> 00:01:56.300\nseveral white papers on this but,\nlet's say you work for an university.\n\n40\n00:01:56.300 --> 00:02:01.710\nAnd at the university, the College of\nMedicine comes to you and says, hey,\n\n41\n00:02:01.710 --> 00:02:06.080\nwe want to sequence the DNA genome for\nbats.\n\n42\n00:02:06.080 --> 00:02:07.820\nOr like I said it wouldn't\nbe College of Medicine,\n\n43\n00:02:07.820 --> 00:02:09.130\nit would be like Veterinary Science.\n\n44\n00:02:09.130 --> 00:02:11.060\nI don't know.\n>> It's a very important topic.\n\n45\n00:02:11.060 --> 00:02:12.990\n>> Well, bats, I guess, I don't know.\n\n46\n00:02:12.990 --> 00:02:16.020\nSo they want to sequence the human genome,\nright.\n\n47\n00:02:16.020 --> 00:02:21.900\nAnd they need thousands of hours of\ncompute cycles to do that, right?\n\n48\n00:02:21.900 --> 00:02:24.990\nNormally, you'd have a mainframe churning\nalong, cranking through this data,\n\n49\n00:02:24.990 --> 00:02:25.580\ndoing a lot of work.\n\n50\n00:02:25.580 --> 00:02:26.360\nAnd so they come to you and\n\n51\n00:02:26.360 --> 00:02:31.660\nthey say, look, we need x amount of\ncomputing power to get this done.\n\n52\n00:02:31.660 --> 00:02:34.190\nWell, when you look at it,\nyou could say, all right.\n\n53\n00:02:34.190 --> 00:02:36.070\nWell, I'm gonna go out and\nbuy 500 servers, and\n\n54\n00:02:36.070 --> 00:02:38.840\nwe're gonna build up a massive cluster,\nand we're gonna let them use it.\n\n55\n00:02:38.840 --> 00:02:40.080\nAnd you can do that, right?\n\n56\n00:02:40.080 --> 00:02:41.990\nIt's the way it's been done in the past.\n\n57\n00:02:41.990 --> 00:02:46.900\nBut, the problem here is what happens when\nthey're done sequencing the human genome?\n\n58\n00:02:46.900 --> 00:02:48.380\nThey're done, they finished, right.\n\n59\n00:02:48.380 --> 00:02:52.050\nThey put out the medical papers,\nget the fame and the glory,\n\n60\n00:02:52.050 --> 00:02:55.680\nand when all that dies down,\nyou're left with 500 servers.\n\n61\n00:02:55.680 --> 00:02:56.415\n>> Garage sale.\n\n62\n00:02:56.415 --> 00:02:58.006\n[LAUGH]\n>> Yeah, well we joke about it,\n\n63\n00:02:58.006 --> 00:03:01.157\nbut I mean that's basically what happens,\nis you end up selling these things for\n\n64\n00:03:01.157 --> 00:03:02.100\npennies on the dollar.\n\n65\n00:03:02.100 --> 00:03:04.310\nYou lose a lot of money on that hardware,\nall right.\n\n66\n00:03:04.310 --> 00:03:05.820\nBut you did get the work done.\n\n67\n00:03:05.820 --> 00:03:08.250\nAlso, what if you said, hey,\n\n68\n00:03:08.250 --> 00:03:12.380\nif I have 500 of these servers,\nI can get the job done in a month.\n\n69\n00:03:12.380 --> 00:03:15.330\nBut if I had 2,000 servers,\nI can get it done in 1 week.\n\n70\n00:03:15.330 --> 00:03:16.990\nWould I rather get it done in one week?\n\n71\n00:03:16.990 --> 00:03:17.910\nWell, that would be nice.\n\n72\n00:03:17.910 --> 00:03:20.440\nBut now I've got to buy 2,000 servers,\nand not just 500.\n\n73\n00:03:20.440 --> 00:03:22.160\nIt's not realistic, right.\n\n74\n00:03:22.160 --> 00:03:24.960\nThose scenarios are scenarios that\nare always a challenge when we're talking\n\n75\n00:03:24.960 --> 00:03:25.830\nabout physical equipment.\n\n76\n00:03:25.830 --> 00:03:27.540\nYou're going out and\nbuying physical servers and\n\n77\n00:03:27.540 --> 00:03:29.090\nimplementing them yourself, right.\n\n78\n00:03:29.090 --> 00:03:33.020\nAnd that's not even taking into account\nthings like supporting all those systems.\n\n79\n00:03:33.020 --> 00:03:37.200\nBut with Windows Azure,\nyou pay as you go, right.\n\n80\n00:03:37.200 --> 00:03:40.159\nAnd I've got to stop calling it Windows\nAzure, I think that's the second time in\n\n81\n00:03:40.159 --> 00:03:43.220\nthe show and I'm rolling two minutes in,\nit's actually called Microsoft Azure.\n\n82\n00:03:43.220 --> 00:03:44.780\nIt was called Windows Azure\nin the beginning, but\n\n83\n00:03:44.780 --> 00:03:48.730\nit does a lot more than just Windows now,\nand so they called it Microsoft Azure.\n\n84\n00:03:48.730 --> 00:03:53.730\nAnd with Microsoft Azure, you pay for\nthe resources you need, so\n\n85\n00:03:53.730 --> 00:03:58.490\nif you need 500 servers for\n1 month, you can get that.\n\n86\n00:03:58.490 --> 00:04:01.340\nAnd at the end of one month,\nyou just shut them all down and\n\n87\n00:04:01.340 --> 00:04:02.860\nnow you're not paying for them anymore.\n\n88\n00:04:02.860 --> 00:04:06.180\nAnd so you paid for them when you\nhad them and that's it, you stop.\n\n89\n00:04:06.180 --> 00:04:08.620\nSo, it's way more economical.\n\n90\n00:04:08.620 --> 00:04:11.300\nAnd then in that scenario I gave you were,\nhey,\n\n91\n00:04:11.300 --> 00:04:16.720\nif it took me 4 weeks with 500 servers,\nwhat about 1 week with 2,000 servers?\n\n92\n00:04:16.720 --> 00:04:18.689\nWell, in Microsoft Azure,\n\n93\n00:04:18.689 --> 00:04:24.199\n1 week with 2,000 servers costs\nthe same as 4 weeks with 500 servers.\n\n94\n00:04:24.199 --> 00:04:25.568\nCosts the same.\n\n95\n00:04:25.568 --> 00:04:28.053\nYou pay for what you use, and\nyou're using the same amount,\n\n96\n00:04:28.053 --> 00:04:29.830\njust over a different time frame, right?\n\n97\n00:04:29.830 --> 00:04:33.320\nAnd so you pay the same,\nyou can get your work done faster.\n\n98\n00:04:33.320 --> 00:04:38.180\nThose are types, that are scenarios where\nMicrosoft Azure really comes in handy,\n\n99\n00:04:38.180 --> 00:04:39.190\nreally, any cloud service.\n\n100\n00:04:39.190 --> 00:04:43.660\nBut Microsoft makes it kind of painless\nbecause it's all built around Windows and\n\n101\n00:04:43.660 --> 00:04:46.310\nLinux, but it's done the Microsoft way and\nmost businesses and\n\n102\n00:04:46.310 --> 00:04:48.330\norganizations are Microsoft environments.\n\n103\n00:04:48.330 --> 00:04:51.850\nSo it's kind of easy, it's friendly,\nthe snap in from one model and\n\n104\n00:04:51.850 --> 00:04:52.920\nsnap in to the other.\n\n105\n00:04:52.920 --> 00:04:56.490\nYou move out of your physical premise\ntype model to the cloud model and\n\n106\n00:04:56.490 --> 00:04:57.560\nit's pretty painless.\n\n107\n00:04:57.560 --> 00:05:01.410\n>> So, kind of a not only pay as you go,\nbut even pay as you grow or\n\n108\n00:05:01.410 --> 00:05:04.490\nshrink depending on what your\nneeds are for the system.\n\n109\n00:05:04.490 --> 00:05:07.270\nSo, that's obviously a huge benefit.\n\n110\n00:05:07.270 --> 00:05:09.440\nIf I don't need those services,\nshut them off, right.\n\n111\n00:05:09.440 --> 00:05:10.980\nAnd if I need more, turn them on.\n\n112\n00:05:10.980 --> 00:05:12.710\n>> And I need more, right?\n\n113\n00:05:12.710 --> 00:05:14.340\nLet's hit on that.\n\n114\n00:05:14.340 --> 00:05:16.060\nThis is the day and age of the startup.\n\n115\n00:05:16.060 --> 00:05:17.600\nSo let's say you have an idea.\n\n116\n00:05:17.600 --> 00:05:21.230\nYou come up with a plan for\na new web service, right.\n\n117\n00:05:21.230 --> 00:05:24.563\nThink of Twitter, Facebook, MySpace.\n\n118\n00:05:24.563 --> 00:05:26.118\n[CROSSTALK] I almost said MySpace.\n\n119\n00:05:26.118 --> 00:05:28.439\n[LAUGH] You know Twitter,\nFacebook, Instagram.\n\n120\n00:05:28.439 --> 00:05:29.590\n>> Friendster.\n\n121\n00:05:29.590 --> 00:05:30.480\n>> Friendster.\n\n122\n00:05:30.480 --> 00:05:33.390\nSomething like that, or\neven Napster for that matter.\n\n123\n00:05:33.390 --> 00:05:35.580\nYou come up with an idea for a service.\n\n124\n00:05:35.580 --> 00:05:38.980\nAnd so you and a buddy, you sit down, you\nwrite the software, you're programming,\n\n125\n00:05:38.980 --> 00:05:42.850\nyou bring it upon a server,\nyou bring it online and people see it.\n\n126\n00:05:42.850 --> 00:05:45.960\nAnd you got 5 people on the server,\nand 10 people on the server, and\n\n127\n00:05:45.960 --> 00:05:49.130\n50 people on the server and\nit's running okay and then it goes viral.\n\n128\n00:05:49.130 --> 00:05:52.909\nSomebody post a YouTube video and\nall of sudden, it's out there, and\n\n129\n00:05:52.909 --> 00:05:55.869\nyou go from 50 users to 50,000 users,\nright?\n\n130\n00:05:55.869 --> 00:05:57.262\nWhat's gonna happen to your server?\n\n131\n00:05:57.262 --> 00:05:58.520\nIt's gonna get overloaded.\n\n132\n00:05:58.520 --> 00:06:01.860\nPeople get page not found, or\ncan't access server, or session time down.\n\n133\n00:06:01.860 --> 00:06:04.730\nIt doesn't work, it's like a denial of\nservice attack in a really bad way.\n\n134\n00:06:04.730 --> 00:06:08.660\nYou're not being attacked, you're losing\ncustomers, right, you're losing exposure.\n\n135\n00:06:08.660 --> 00:06:13.540\nSo with Azure, we have a neat advantage,\nwe don't have over physical servers.\n\n136\n00:06:13.540 --> 00:06:17.520\nWith physical servers,\nif I have five web servers and\n\n137\n00:06:17.520 --> 00:06:20.330\nthey start getting overloaded,\nI need to buy another one.\n\n138\n00:06:20.330 --> 00:06:24.260\nAnd so I call up Dell, or HP, IBM, Lenovo,\n\n139\n00:06:24.260 --> 00:06:27.440\nwhoever it is I'm buying servers from and\nI say, I need to order three more servers.\n\n140\n00:06:27.440 --> 00:06:30.110\nAnd so they send me a quote,\nI get the quote approved, we send it off,\n\n141\n00:06:30.110 --> 00:06:34.120\nthey ship them to me, I get the OS\nset up maybe within two weeks.\n\n142\n00:06:34.120 --> 00:06:36.800\nIf I'm lucky,\nI can get those servers up and running.\n\n143\n00:06:36.800 --> 00:06:38.880\nMaybe I already have\nHyper-V in my environment.\n\n144\n00:06:38.880 --> 00:06:41.640\nAnd so I can just spit out more virtual\nmachines, but I gotta go and do it and\n\n145\n00:06:41.640 --> 00:06:43.960\nconfigure those machines and\nget them up, right?\n\n146\n00:06:43.960 --> 00:06:46.430\nWell, it takes time to react.\n\n147\n00:06:46.430 --> 00:06:50.380\nBut with Azure, we can actually set\nit up to what's called autoscaling.\n\n148\n00:06:50.380 --> 00:06:55.040\nSo that when my server's at 50 users,\nit's just running off of 1 server.\n\n149\n00:06:55.040 --> 00:07:00.220\nBut when 100, 1,000, 2,000 users start\nto pop up, it starts cloning my system,\n\n150\n00:07:00.220 --> 00:07:03.140\nand we end up with 50 servers,\nand then 200 servers, and\n\n151\n00:07:03.140 --> 00:07:06.240\nthen 500 servers to support\nthe load that we're going under.\n\n152\n00:07:06.240 --> 00:07:08.920\nAnd then when things slow down,\nI can start to trim those servers back off\n\n153\n00:07:08.920 --> 00:07:11.630\nagain, so I'm only running\nthe amount of servers that I need.\n\n154\n00:07:11.630 --> 00:07:14.270\nAnd when I start trimming those servers\noff, it's not like I got these unused\n\n155\n00:07:14.270 --> 00:07:17.410\nassets sitting there costing\nme money day after day, right?\n\n156\n00:07:17.410 --> 00:07:20.820\nCuz if I power off a physical server,\nI've already paid for it.\n\n157\n00:07:20.820 --> 00:07:23.810\nDoesn't matter if it's powered on or\npowered off, I'm just saving electricity.\n\n158\n00:07:23.810 --> 00:07:26.410\nBut with a VM, when you power it off,\nyou stop paying for it and\n\n159\n00:07:26.410 --> 00:07:27.630\nyou save money, right?\n\n160\n00:07:27.630 --> 00:07:30.580\nAnd so, that's something that\nis just a huge advantage\n\n161\n00:07:30.580 --> 00:07:32.880\nby using a cloud service\nlike Microsoft Azure.\n\n162\n00:07:32.880 --> 00:07:35.480\n>> Now, one of the things I\nthink of when it comes to,\n\n163\n00:07:35.480 --> 00:07:37.920\nespecially Microsoft operating systems.\n\n164\n00:07:37.920 --> 00:07:40.753\nRight, you have to have a license for\neach one of your seats or per user, or\n\n165\n00:07:40.753 --> 00:07:44.080\nhowever you have licensing set up for\nthe software that you're using.\n\n166\n00:07:44.080 --> 00:07:45.560\nHow does that work inside of Azure?\n\n167\n00:07:45.560 --> 00:07:46.770\nDo I just?\n\n168\n00:07:46.770 --> 00:07:50.850\nI need another Windows server and I spin\nthat up and it's aptly, I don't have to,\n\n169\n00:07:50.850 --> 00:07:53.880\ndo I have to worry about\nlicensing in that sense?\n\n170\n00:07:53.880 --> 00:07:54.958\n>> You do and you don't, right.\n\n171\n00:07:54.958 --> 00:07:57.749\nSo I know this is gonna be\nthe non-committal answer of the day.\n\n172\n00:07:57.749 --> 00:08:02.727\nSo one of the cool things is that when\nyou spin up a virtual machine in Azure.\n\n173\n00:08:02.727 --> 00:08:05.316\nYou tell it what operating system\nit's gonna have and then that's it.\n\n174\n00:08:05.316 --> 00:08:06.543\nYou don't worry about the licensing.\n\n175\n00:08:06.543 --> 00:08:10.300\nSo, from one aspect,\nlicensing is no longer an issue.\n\n176\n00:08:11.520 --> 00:08:14.600\nBut, you do still have to be\naware of it because it's not\n\n177\n00:08:14.600 --> 00:08:15.620\nthat you aren't paying for\n\n178\n00:08:15.620 --> 00:08:18.785\nthe license, it's just that it's factored\ninto the cost of the virtual machine.\n\n179\n00:08:18.785 --> 00:08:19.760\nRight?\n\n180\n00:08:19.760 --> 00:08:24.610\nWhen you bring up a virtual machine\nin Azure, you pay per minute, right?\n\n181\n00:08:24.610 --> 00:08:26.530\nThat's kind of a cool thing.\n\n182\n00:08:26.530 --> 00:08:29.440\nIf you think about it, if I want to buy\na physical server I have to pay for\n\n183\n00:08:29.440 --> 00:08:30.430\nit all up front.\n\n184\n00:08:30.430 --> 00:08:31.570\n100% of it, right?\n\n185\n00:08:31.570 --> 00:08:34.180\nIf it's a $5,000 server,\nI've got to pay $5,000 on day one or\n\n186\n00:08:34.180 --> 00:08:36.260\nthey don't ship me the server.\n\n187\n00:08:36.260 --> 00:08:40.440\nBut with Azure, I could need\na $5,000 server for five minutes.\n\n188\n00:08:40.440 --> 00:08:43.770\nThen I could spin it up and\nI could just pay for the five minutes.\n\n189\n00:08:43.770 --> 00:08:45.180\nAnd when it's done I shut it down and\nthat's it.\n\n190\n00:08:45.180 --> 00:08:47.710\nI only pay for five minutes of usage,\nand that's it.\n\n191\n00:08:47.710 --> 00:08:52.530\nWell, that five minutes has\na per minute fee that we pay.\n\n192\n00:08:52.530 --> 00:08:56.340\nAnd the cost of the operating system\nis factored in to that, right?\n\n193\n00:08:56.340 --> 00:08:58.830\nSo, for the most part we don't\nhave to worry about licensing,\n\n194\n00:08:58.830 --> 00:08:59.770\nwe're already paying for it.\n\n195\n00:08:59.770 --> 00:09:03.770\nWe're just paying for it per minute\nas opposed to a perpetual license\n\n196\n00:09:03.770 --> 00:09:06.300\nwhich is what happens when\nyou buy physical equipment.\n\n197\n00:09:06.300 --> 00:09:09.260\nThe one time that that really doesn't\napply is when we start getting into some\n\n198\n00:09:09.260 --> 00:09:10.940\nof the advanced servers, right.\n\n199\n00:09:10.940 --> 00:09:14.920\nI've got pulled up on my computer here\nthe Virtual Machine's licensing FAQ.\n\n200\n00:09:14.920 --> 00:09:18.500\nAnd Microsoft breaks down a few\nof the scenarios where you might\n\n201\n00:09:18.500 --> 00:09:20.830\nactually have to worry about licensing.\n\n202\n00:09:20.830 --> 00:09:22.230\nSo, as I break this,\n\n203\n00:09:22.230 --> 00:09:25.791\nkind of scroll down through this,\nif I can scroll down through this.\n\n204\n00:09:25.791 --> 00:09:29.900\nYou'll see can I move\na Windows Server 2012 license and\n\n205\n00:09:29.900 --> 00:09:31.700\nimage between Hyper-V and Azure.\n\n206\n00:09:31.700 --> 00:09:34.260\nMaybe I've already got a server\nin my environment, and\n\n207\n00:09:34.260 --> 00:09:36.190\nI want to move it up to Azure.\n\n208\n00:09:36.190 --> 00:09:40.090\nAnd, if we expand that out, you'll see\nhere, Windows Server License's are not\n\n209\n00:09:40.090 --> 00:09:43.020\neligible for License Mobility\nthrough Software Assurance.\n\n210\n00:09:43.020 --> 00:09:45.850\nIn other words,\nyou can't move your own license up.\n\n211\n00:09:45.850 --> 00:09:48.300\nAnd that's because there's already\na license up there, right?\n\n212\n00:09:48.300 --> 00:09:49.500\nThere's already one in place.\n\n213\n00:09:49.500 --> 00:09:50.950\nYou don't need to bring one along.\n\n214\n00:09:50.950 --> 00:09:52.310\nYou have to build you're own image.\n\n215\n00:09:52.310 --> 00:09:55.790\nThere is a way to do it, but\nit's not the recommended way.\n\n216\n00:09:56.920 --> 00:09:59.360\nYou'll see other kind of\nthings in here like does\n\n217\n00:09:59.360 --> 00:10:03.460\na customer need Windows Server CALS to\nconnect to a Window's server image, right?\n\n218\n00:10:03.460 --> 00:10:06.062\nWhen you buy Window's Server it\nnormally comes with either five or\n\n219\n00:10:06.062 --> 00:10:10.090\nten client access licenses, and for every\nclient that connects they need a CAL.\n\n220\n00:10:10.090 --> 00:10:12.350\nAnd you've gotta have the right amount.\n\n221\n00:10:12.350 --> 00:10:14.250\nWell, when you bring up\nan Azure virtual machine,\n\n222\n00:10:14.250 --> 00:10:16.270\nyou don't have to worry about those CALs,\nright?\n\n223\n00:10:16.270 --> 00:10:17.230\nCALs are not required.\n\n224\n00:10:17.230 --> 00:10:18.450\nIt's kinda covered by it.\n\n225\n00:10:18.450 --> 00:10:20.590\nSo that's a license that you\nabsolutely don't have to worry about.\n\n226\n00:10:20.590 --> 00:10:22.550\nIt's already rolled in.\n\n227\n00:10:22.550 --> 00:10:25.195\nThe other thing is, when you start\nbringing up things like Windows Server\n\n228\n00:10:25.195 --> 00:10:28.850\n2012, in Azure it almost always\nbrings up data center edition.\n\n229\n00:10:28.850 --> 00:10:31.620\nWhich means it's got full connectivity,\nthe full feature set,\n\n230\n00:10:31.620 --> 00:10:35.310\nunlimited connections, and it's really\npowerful because what you're paying for\n\n231\n00:10:35.310 --> 00:10:36.910\nis basically to rent the hardware.\n\n232\n00:10:36.910 --> 00:10:40.280\nMicrosoft Azure, at the end of the day,\nis a platform as a service.\n\n233\n00:10:40.280 --> 00:10:43.710\nThey provide the infrastructure,\nwhich is all the hardware underneath,\n\n234\n00:10:43.710 --> 00:10:46.480\nthe networking, the hard drive,\nthe CPUs, the servers,\n\n235\n00:10:46.480 --> 00:10:48.690\nall that good stuff,\nas well as the redundancy,\n\n236\n00:10:48.690 --> 00:10:52.820\nthe battery backups, the power,\nalternate power supplies, and so on.\n\n237\n00:10:52.820 --> 00:10:58.240\nAnd they provide the operating system that\nMicrosoft Windows has already put there.\n\n238\n00:10:58.240 --> 00:11:01.520\nBut it's up to you to kind of support\nthat, and you install your own software.\n\n239\n00:11:01.520 --> 00:11:05.540\nWell, exceptions to that are Microsoft\nsoftware like SQL server and BizTalk.\n\n240\n00:11:05.540 --> 00:11:10.010\nAnd when you want those, you can choose to\nhave those already rolled into the virtual\n\n241\n00:11:10.010 --> 00:11:13.830\nmachine when it spins it up and\nyou pay a larger per minute cost on that.\n\n242\n00:11:13.830 --> 00:11:15.700\nSo you are still paying for the license.\n\n243\n00:11:15.700 --> 00:11:19.050\nYou do still have to pay\nattention to that cost.\n\n244\n00:11:19.050 --> 00:11:23.690\nThe only difference, though, is with SQL,\nBizTalk and a few of the other products,\n\n245\n00:11:23.690 --> 00:11:26.690\nyou can actually bring your\nown license if you want.\n\n246\n00:11:26.690 --> 00:11:29.780\nAnd if you do that, then you're just\npaying the price for the base server,\n\n247\n00:11:29.780 --> 00:11:31.680\nnot the additional software that's on it.\n\n248\n00:11:31.680 --> 00:11:34.850\nSo, that's one scenario we might\nneed to worry about that license.\n\n249\n00:11:34.850 --> 00:11:35.870\n>> All right, Don.\n\n250\n00:11:35.870 --> 00:11:37.120\nSo we're speaking about pricing.\n\n251\n00:11:37.120 --> 00:11:39.520\nWe're kinda different\nour toe into that water.\n\n252\n00:11:39.520 --> 00:11:41.370\nYou've mentioned that\nwe've pay buy minute.\n\n253\n00:11:41.370 --> 00:11:42.920\nAnd so, we start a server.\n\n254\n00:11:42.920 --> 00:11:46.670\nHow ever many minutes we use that server,\nis there any hidden fees or\n\n255\n00:11:46.670 --> 00:11:49.840\nways that I might have to worry\nabout they're gonna get me and\n\n256\n00:11:49.840 --> 00:11:51.780\nhamstring me with some extra charges?\n\n257\n00:11:51.780 --> 00:11:55.750\nHow do I know that what I'm getting\nis actually worth the money?\n\n258\n00:11:55.750 --> 00:11:59.490\n>> So, the cool part here is\nyou do pay for what you use.\n\n259\n00:11:59.490 --> 00:12:01.930\nAnd it's extremely low risk, and\nit is not like you have a contract, right?\n\n260\n00:12:01.930 --> 00:12:03.180\nYou mention hidden fees.\n\n261\n00:12:03.180 --> 00:12:04.270\nI instantly think cell phones.\n\n262\n00:12:04.270 --> 00:12:06.690\nAnd with cell phones you sign\na one-year contract, and\n\n263\n00:12:06.690 --> 00:12:09.720\nif you cancel early you gotta pay\na termination fee and all of that.\n\n264\n00:12:09.720 --> 00:12:12.180\nWith Azure, you just, you sign up.\n\n265\n00:12:12.180 --> 00:12:14.170\nYou do have to attach a credit\ncard to your account because\n\n266\n00:12:14.170 --> 00:12:15.350\nthat's what it's going to bill.\n\n267\n00:12:15.350 --> 00:12:19.450\nAnd when your done, you just turn off all\nyour VMs, delete all your storage, and\n\n268\n00:12:19.450 --> 00:12:21.170\nnow you've got a zero\ndollar bill every month.\n\n269\n00:12:21.170 --> 00:12:21.880\nAnd that's that, right?\n\n270\n00:12:21.880 --> 00:12:24.630\nSo, it really is kinda risk-free\nif you want to get in their,\n\n271\n00:12:24.630 --> 00:12:28.310\ndip your toes in and\ntry it, see how it goes.\n\n272\n00:12:28.310 --> 00:12:30.450\nIt's pretty low risk, right?\n\n273\n00:12:30.450 --> 00:12:33.400\nBut, the big challenge we have,\nand this is where,\n\n274\n00:12:33.400 --> 00:12:36.420\nwhen you're interacting with your CIO,\nyour IT manager, whoever,\n\n275\n00:12:37.660 --> 00:12:42.220\nthe biggest risk as they see it\nare the uncertainties of cost, right?\n\n276\n00:12:42.220 --> 00:12:44.130\nHow do I know how much\nit's gonna to cost me?\n\n277\n00:12:44.130 --> 00:12:48.235\nSure, when I buy a physical server,\nit might cost $8,000 and\n\n278\n00:12:48.235 --> 00:12:51.270\nI've gotta pay $8,000 on day one, right?\n\n279\n00:12:51.270 --> 00:12:56.360\nBut now I know for the life that I\nhave that server, it was 8,000 bucks.\n\n280\n00:12:56.360 --> 00:13:01.150\nAnd we can, what do they call that when\nthey take the cost of a server and\n\n281\n00:13:01.150 --> 00:13:04.280\nthey spread it out over time,\nit's like an accounting term they do.\n\n282\n00:13:04.280 --> 00:13:05.060\n>> Oh, yes.\n\n283\n00:13:05.060 --> 00:13:08.660\n>> They like depreciate or\nwhatever the, and-\n\n284\n00:13:08.660 --> 00:13:09.670\n>> Oh, that's a good question.\n\n285\n00:13:09.670 --> 00:13:11.550\n>> I know, this is where we start\ngetting into accounting stuff.\n\n286\n00:13:11.550 --> 00:13:12.864\nThere's all sorts of stuff.\n\n287\n00:13:12.864 --> 00:13:16.020\nThere's CapEx, or capital expenses and\nall that crazy mess.\n\n288\n00:13:16.020 --> 00:13:20.550\nBut they know what that amount is cuz they\npaid $8,000 on day one and that's it.\n\n289\n00:13:20.550 --> 00:13:24.730\nBut when you spin up a virtual machine,\nwell, the longer it runs,\n\n290\n00:13:24.730 --> 00:13:27.500\nthe more it cost you cuz you're paying for\na minute, right?\n\n291\n00:13:27.500 --> 00:13:29.010\nAnd how long are you gonna run it?\n\n292\n00:13:29.010 --> 00:13:29.991\nAre you gonna run it for six months?\n\n293\n00:13:29.991 --> 00:13:30.775\nAre you gonna run it for year?\n\n294\n00:13:30.775 --> 00:13:32.420\nAre you gonna run it for\na year and a half?\n\n295\n00:13:32.420 --> 00:13:33.950\n>> How much is that gonna cost me?\n\n296\n00:13:33.950 --> 00:13:36.630\nAnd then, if we dial it up, maybe one\nday it starts running low on memory, so\n\n297\n00:13:36.630 --> 00:13:38.020\nwe add some more memory to it.\n\n298\n00:13:38.020 --> 00:13:39.450\nNow we're paying more, right?\n\n299\n00:13:39.450 --> 00:13:43.900\nThe cost of that system becomes\na lot more able to fluctuate.\n\n300\n00:13:43.900 --> 00:13:47.460\nAnd managers, CIOs, accountants,\nthey don't like that.\n\n301\n00:13:47.460 --> 00:13:48.420\nThey like certainty.\n\n302\n00:13:48.420 --> 00:13:50.050\nAnd some of them would\nprefer to go ahead and\n\n303\n00:13:50.050 --> 00:13:52.780\npay more just to not\nhave that uncertainty.\n\n304\n00:13:52.780 --> 00:13:56.730\n>> So, with Microsoft they are very, very\ntransparent about the costs, and they try\n\n305\n00:13:56.730 --> 00:14:00.390\nand make it as easy as possible for you to\nevaluate what this is going to cost and\n\n306\n00:14:00.390 --> 00:14:03.850\nwhat it's going to look like if you decide\nto go with a cloud solution like this.\n\n307\n00:14:03.850 --> 00:14:06.800\nSo, let's talk a little\nbit about that pricing.\n\n308\n00:14:06.800 --> 00:14:10.330\nI've got pulled up right here\nthe virtual machine's pricing page.\n\n309\n00:14:10.330 --> 00:14:12.070\nAnd, I've said it more than once,\n\n310\n00:14:12.070 --> 00:14:15.850\nthat you pay per minute when\nyou run these virtual machines.\n\n311\n00:14:15.850 --> 00:14:18.950\nSo, when we come into the virtual\nmachine pricing page and\n\n312\n00:14:18.950 --> 00:14:22.160\nscroll down a bit,\nit starts to list the servers.\n\n313\n00:14:22.160 --> 00:14:26.140\nAnd then, to make the numbers\na little more understandable,\n\n314\n00:14:26.140 --> 00:14:27.105\nthey list them as per hour.\n\n315\n00:14:27.105 --> 00:14:28.870\nOkay?\nBut it's actually billing per minute.\n\n316\n00:14:28.870 --> 00:14:29.530\nThat's important.\n\n317\n00:14:29.530 --> 00:14:32.690\nBecause, what if I run the server for\n15 minutes?\n\n318\n00:14:32.690 --> 00:14:34.170\n>> I don't have to pay for the whole hour.\n\n319\n00:14:34.170 --> 00:14:35.482\nI just pay for the 15 minutes.\n\n320\n00:14:35.482 --> 00:14:36.170\nAll right?\n\n321\n00:14:36.170 --> 00:14:39.710\nSo, understand they list it here as per\nhour just to make the numbers a little\n\n322\n00:14:39.710 --> 00:14:40.565\nmore reasonable.\n\n323\n00:14:40.565 --> 00:14:44.370\nCuz the numbers are already really small,\nand that's where it gets kinda confusing.\n\n324\n00:14:44.370 --> 00:14:48.590\nSo, for example,\nif I want a single core system, right?\n\n325\n00:14:48.590 --> 00:14:53.342\nA server with just one CPU,\nand 750 megsof RAM, or\n\n326\n00:14:53.342 --> 00:14:57.530\n7.5 gigs, and a 20 gig hard drive.\n\n327\n00:14:57.530 --> 00:14:59.940\nThat's a pretty low end system, right?\n\n328\n00:14:59.940 --> 00:15:01.430\nI mean the real basics.\n\n329\n00:15:01.430 --> 00:15:08.050\nIf I wanted that, it would cost me\napproximately 1.8 cents per hour.\n\n330\n00:15:08.050 --> 00:15:10.300\nSo, less than $0.02 an hour to run that.\n\n331\n00:15:10.300 --> 00:15:10.830\nOkay?\n\n332\n00:15:10.830 --> 00:15:15.406\nIf we do that per minute, I'd have to\ntake $0.018 and divide that by 60, and\n\n333\n00:15:15.406 --> 00:15:19.130\nyou'd up with this super fractional number\nthat doesn't even add up to 1 penny.\n\n334\n00:15:19.130 --> 00:15:21.040\nAnd so,\nthat's why Microsoft puts this as hours.\n\n335\n00:15:21.040 --> 00:15:22.930\nIt just makes it easier to understand.\n\n336\n00:15:22.930 --> 00:15:26.599\nBut if I told you a server was gonna cost\nyou $0.02 an hour, what do you think?\n\n337\n00:15:27.630 --> 00:15:29.050\nThat's next to nothing, right?\n\n338\n00:15:29.050 --> 00:15:30.915\nI mean, that's really, really inexpensive.\n\n339\n00:15:30.915 --> 00:15:33.311\n$0.02 an hour is $0.48 a day.\n\n340\n00:15:33.311 --> 00:15:35.890\nSo, less than $0.50 a day.\n\n341\n00:15:35.890 --> 00:15:39.725\nSay a 30 day month, and you might have,\nwhat is that, 15 bucks a month?\n\n342\n00:15:39.725 --> 00:15:44.100\nYou run it over 12 months, you're talking\nabout $160, $170, something like that.\n\n343\n00:15:44.100 --> 00:15:48.370\nSo, that's how much you're talking\nper year if you run that server.\n\n344\n00:15:48.370 --> 00:15:49.827\n>> That's hardly anything.\n\n345\n00:15:49.827 --> 00:15:55.889\nSo, maybe you need a server that is\ngoing to act as a simple router,\n\n346\n00:15:55.889 --> 00:16:00.993\nor is gonna act as some kind\nof system that runs reports.\n\n347\n00:16:00.993 --> 00:16:02.356\nYou don't need a lot of\nperformance out of it.\n\n348\n00:16:02.356 --> 00:16:03.909\nYou just need a server to do this job.\n\n349\n00:16:03.909 --> 00:16:07.025\nYou can whip up one of these\nreally low end jobs and\n\n350\n00:16:07.025 --> 00:16:09.650\nit can knock it out extremely cheap.\n\n351\n00:16:09.650 --> 00:16:11.370\nIt can even get cheaper in some cases.\n\n352\n00:16:11.370 --> 00:16:12.040\nI'll show you in a minute.\n\n353\n00:16:13.180 --> 00:16:14.790\nBut, odds are we need more.\n\n354\n00:16:15.810 --> 00:16:19.918\nOdds are, we need 1.75 gigs or\n3.5 gigs of RAM.\n\n355\n00:16:19.918 --> 00:16:20.778\nWe need more memory.\n\n356\n00:16:20.778 --> 00:16:21.858\nWe need more hard drive space.\n\n357\n00:16:21.858 --> 00:16:23.830\nWe need more CPUs.\n\n358\n00:16:23.830 --> 00:16:25.920\nAnd so based on your needs,\n\n359\n00:16:25.920 --> 00:16:30.490\nyou can pick a higher tier virtual\nmachine and the cost starts to go up.\n\n360\n00:16:30.490 --> 00:16:33.210\nSo a pretty typical server for me is.\n\n361\n00:16:34.240 --> 00:16:36.030\nLet's see if I can find one.\n\n362\n00:16:36.030 --> 00:16:39.590\nI'll have to go into the special\ntiers to see a typical server for me.\n\n363\n00:16:39.590 --> 00:16:44.130\nBut here, something like this,\ntwo CPU's and seven gigs of RAM.\n\n364\n00:16:44.130 --> 00:16:46.900\nAll right, two CPUs, seven gigs of RAM,\nthis is pretty common for me,\n\n365\n00:16:46.900 --> 00:16:49.740\nthis is one of Microsoft's higher\nperformance servers here, and\n\n366\n00:16:49.740 --> 00:16:51.660\nit's gonna cost me 28 cents per hour.\n\n367\n00:16:52.980 --> 00:16:54.410\nSo if I were to spin that up,\n\n368\n00:16:54.410 --> 00:16:58.770\n28 cents per hour, yeah it's gonna\ncost me $200 to $300 a month.\n\n369\n00:16:58.770 --> 00:17:03.040\nBut, if I work that out over the course of\nthe year, it ends up being $3000 a year.\n\n370\n00:17:03.040 --> 00:17:06.030\nIf a server like that would\nnormally cost me $8,000,\n\n371\n00:17:06.030 --> 00:17:09.240\nthen in three years we\nbasically break even.\n\n372\n00:17:09.240 --> 00:17:11.850\nWell, in three years I'm gonna\nreplace the server anyway.\n\n373\n00:17:11.850 --> 00:17:13.670\nAnd so here, I don't have to\nworry about replacing the server.\n\n374\n00:17:13.670 --> 00:17:15.720\nIt's being replaced on\nthe back end all the time.\n\n375\n00:17:15.720 --> 00:17:16.450\nI don't even notice.\n\n376\n00:17:16.450 --> 00:17:18.280\nMicrosoft does that, we don't even see it.\n\n377\n00:17:18.280 --> 00:17:20.100\nBut we pay for what we use.\n\n378\n00:17:20.100 --> 00:17:22.950\nSo if I need 500 servers, just for\n\n379\n00:17:22.950 --> 00:17:27.450\na month I could spin these up and\nonly pay it for that month.\n\n380\n00:17:27.450 --> 00:17:31.170\nAnd yeah, it might cost me $300 per server\nfor that month, but at the end of the day,\n\n381\n00:17:31.170 --> 00:17:34.200\nI shut them down and\nI don't need them any more.\n\n382\n00:17:34.200 --> 00:17:39.020\nIf I buy an $8000 server and then I turn\naround and sell it on E-bay a month later,\n\n383\n00:17:39.020 --> 00:17:42.230\nI'm gonna lose a lot more than $300.\n\n384\n00:17:42.230 --> 00:17:44.090\nRight, those servers depreciate so fast.\n\n385\n00:17:44.090 --> 00:17:48.090\nYou're lucky to get 75% of their value out\nof them if you sell them one month later.\n\n386\n00:17:48.090 --> 00:17:50.540\nBut here, I can just burn 300 bucks.\n\n387\n00:17:50.540 --> 00:17:52.080\nAnd now I got it, I used it, and\n\n388\n00:17:52.080 --> 00:17:55.230\nI actually end up spending less\nthan if I used physical servers.\n\n389\n00:17:55.230 --> 00:17:56.670\nThat's the real advantage of Azure.\n\n390\n00:17:56.670 --> 00:17:59.000\n>> No real depreciation\nin any kind of value.\n\n391\n00:17:59.000 --> 00:18:02.130\nIt's I'm paying for this,\nI get that no matter what.\n\n392\n00:18:02.130 --> 00:18:03.190\nIt's always the latest and\n\n393\n00:18:03.190 --> 00:18:06.240\ngreatest kind of hardware because\nMicrosoft is taking care of that.\n\n394\n00:18:06.240 --> 00:18:07.050\n>> I don't have to worry about it.\n\n395\n00:18:07.050 --> 00:18:08.750\n>> Yeah, it's not like a house.\n\n396\n00:18:08.750 --> 00:18:09.420\nWith a house,\n\n397\n00:18:09.420 --> 00:18:11.780\nyou wanna buy a house you put the money\nin the house you gain equity.\n\n398\n00:18:11.780 --> 00:18:14.790\nYou don't really get equity in servers,\ncuz after five years you throw them in\n\n399\n00:18:14.790 --> 00:18:17.290\nthe trash,\nthey're not really relevant anymore.\n\n400\n00:18:17.290 --> 00:18:21.160\nSo we're not so much worried about having\na physical ownership of an item, and\n\n401\n00:18:21.160 --> 00:18:24.100\nwith this there's a lot of other\nbenefits that we'll talk about later,\n\n402\n00:18:24.100 --> 00:18:25.380\nthat makes it a worth while.\n\n403\n00:18:25.380 --> 00:18:28.540\nJust be aware that you have\nto choose the resources.\n\n404\n00:18:28.540 --> 00:18:32.520\nIf you need 16 CPUs and\n112 gigs of RAM, you can have it.\n\n405\n00:18:32.520 --> 00:18:33.240\nRight?\n\n406\n00:18:33.240 --> 00:18:36.340\nBut, you're gonna pay for\nit, $2.11 an hour over here.\n\n407\n00:18:36.340 --> 00:18:39.300\nAnd these prices are right now as\nof the taping of this episode.\n\n408\n00:18:39.300 --> 00:18:40.620\nThey go down all the time.\n\n409\n00:18:40.620 --> 00:18:42.370\nThe pricing changes so\nbe sure to to check that.\n\n410\n00:18:42.370 --> 00:18:44.950\nDon't build your budget\naround this episode.\n\n411\n00:18:44.950 --> 00:18:48.000\nMake sure you use Microsoft's website\nto find the latest information.\n\n412\n00:18:48.000 --> 00:18:51.860\nThe cool other thing is you can actually\nchange the specs of the machine\n\n413\n00:18:51.860 --> 00:18:53.040\nwhenever you want.\n\n414\n00:18:53.040 --> 00:18:57.560\nSo I might originally provision it\nas one core and 0.75 gigs of RAM and\n\n415\n00:18:57.560 --> 00:19:01.600\nthen a month later bump it up to\ntwo cores and 3.5 gigs of RAM.\n\n416\n00:19:01.600 --> 00:19:04.500\nAnd a month after that bump\nit back down to one core.\n\n417\n00:19:04.500 --> 00:19:08.710\nYou can go back and forth like that as\nyou need it to take care of peak time.\n\n418\n00:19:08.710 --> 00:19:14.370\nMaybe you're a retail outlet and\nso during the Christmas holidays\n\n419\n00:19:14.370 --> 00:19:18.130\nyou know you're gonna sell more and so\nyou ramp up the hardware on your system.\n\n420\n00:19:18.130 --> 00:19:21.700\nAnd then after the holidays are over\nyou bring it back down, and\n\n421\n00:19:21.700 --> 00:19:23.140\nyou start saving money again.\n\n422\n00:19:23.140 --> 00:19:25.710\nYou can do that with Azure,\nyou can't do that with a physical server.\n\n423\n00:19:25.710 --> 00:19:28.939\nYou can't say, I'm gonna stick 16\nextra gigs of RAM in there now and\n\n424\n00:19:28.939 --> 00:19:30.750\nI'll just pull that RAM out later on.\n\n425\n00:19:30.750 --> 00:19:32.460\nIt doesn't quite work that way, right.\n\n426\n00:19:32.460 --> 00:19:34.860\nSo that's an advantage.\n\n427\n00:19:34.860 --> 00:19:37.500\nAnother thing to be aware of\nis remember how I mentioned\n\n428\n00:19:37.500 --> 00:19:40.890\nthe Windows operating system\nlicense is built into this?\n\n429\n00:19:40.890 --> 00:19:45.510\nIf I scroll up here see how I've got\nWindows and Linux and SQL, BizTalk,\n\n430\n00:19:45.510 --> 00:19:46.860\nSharePoint, Oracle?\n\n431\n00:19:46.860 --> 00:19:49.730\nThese are other licensed products\nwith the exception of Linux.\n\n432\n00:19:49.730 --> 00:19:50.720\nLinux is free.\n\n433\n00:19:50.720 --> 00:19:54.010\nSo if I switch to Linux,\nmy pricing can go down.\n\n434\n00:19:54.010 --> 00:19:56.010\nRight?\nLet's take that expensive server.\n\n435\n00:19:56.010 --> 00:20:02.880\nUnder Windows if I do a, let's take,\nwho do I wanna pick here?\n\n436\n00:20:02.880 --> 00:20:04.610\nLet's go with A4.\n\n437\n00:20:04.610 --> 00:20:08.140\nAn A4 server with Windows,\n8 CPUs, 14 gigs of RAM,\n\n438\n00:20:08.140 --> 00:20:13.210\n240 gigs of hard drive space,\nand it's 61.6 cents per hour.\n\n439\n00:20:13.210 --> 00:20:16.920\nSo, we'll just say 62 cents an hour.\n\n440\n00:20:16.920 --> 00:20:21.809\nIf I switch that to Linux and\nI go back down to that same server,\n\n441\n00:20:23.100 --> 00:20:26.740\nnow it's 37 or 38 cents a minute,\nI mean an hour, sorry.\n\n442\n00:20:26.740 --> 00:20:28.390\nIt just got really expensive.\n\n443\n00:20:28.390 --> 00:20:29.350\n38 cents an hour.\n\n444\n00:20:29.350 --> 00:20:32.810\nI just dropped 25 cents an hour.\n\n445\n00:20:32.810 --> 00:20:34.498\nThat adds up over time, right?\n\n446\n00:20:34.498 --> 00:20:38.450\nThat 25 cents that I just saved that was\nthe Windows operating system license I was\n\n447\n00:20:38.450 --> 00:20:39.710\ntelling you about, right.\n\n448\n00:20:39.710 --> 00:20:42.290\nWhen I go to Linux, it's a free\noperating system in order to pay that.\n\n449\n00:20:42.290 --> 00:20:44.120\nSo when I said you don't have\nto worry about the license,\n\n450\n00:20:44.120 --> 00:20:46.010\nyou don't have to worry about\nit cuz you are paying for it.\n\n451\n00:20:46.010 --> 00:20:48.108\nSo [LAUGH] it's already paid for.\n\n452\n00:20:48.108 --> 00:20:51.540\nThere's other things that can influence\nthe virtual machines that you pick in that\n\n453\n00:20:51.540 --> 00:20:57.150\nprice, right so for example notice\nI'm in this Central US region Right?\n\n454\n00:20:57.150 --> 00:21:00.880\nMicrosoft has many data centers\nlocated around the world.\n\n455\n00:21:00.880 --> 00:21:05.360\nAnd servers can be more or less expensive\ndepending on where the data center is.\n\n456\n00:21:05.360 --> 00:21:05.980\nRight?\n\n457\n00:21:05.980 --> 00:21:08.520\nThe central US,\nif I remember right, is in Iowa.\n\n458\n00:21:08.520 --> 00:21:10.950\nAnd the servers are pretty reasonable.\n\n459\n00:21:10.950 --> 00:21:13.060\nRight?\nLet me go back to Windows here.\n\n460\n00:21:13.060 --> 00:21:16.360\nSo I'm going to do a Windows\nmachine in the Central US and\n\n461\n00:21:16.360 --> 00:21:21.580\nif I take that A4 server,\nwe'll call it 62 cents an hour, right.\n\n462\n00:21:21.580 --> 00:21:24.900\nIf I switch to a different data center,\nlike if I go to US East 2, so\n\n463\n00:21:24.900 --> 00:21:26.360\nI'm going to jump over to that.\n\n464\n00:21:26.360 --> 00:21:29.460\nThat's one of the newer data centers,\nit's got some impressive hardware in it.\n\n465\n00:21:29.460 --> 00:21:33.318\nIf I switch over to US East 2 and\nI go look at that same server.\n\n466\n00:21:33.318 --> 00:21:35.640\nNow it's 59.2 cents an hour, right?\n\n467\n00:21:35.640 --> 00:21:38.670\nIt's actually cheaper, and\nit's a nicer data center.\n\n468\n00:21:38.670 --> 00:21:40.410\nI'd like to pick this one anyway.\n\n469\n00:21:40.410 --> 00:21:42.970\nIt just got a few cents cheaper\nbecause of that data center.\n\n470\n00:21:42.970 --> 00:21:47.150\nWell, if I go somewhere international,\nright, maybe I'll jump all the way to,\n\n471\n00:21:47.150 --> 00:21:49.760\nyou do have to be careful.\n\n472\n00:21:49.760 --> 00:21:52.120\nSome things aren't\nsupported in some regions.\n\n473\n00:21:52.120 --> 00:21:54.350\nLet's go East Asia.\n\n474\n00:21:54.350 --> 00:21:55.910\nThat should be pretty expensive.\n\n475\n00:21:55.910 --> 00:21:59.380\nActually, Southeast Asia will probably be\nthe most expensive but I'll go East Asia.\n\n476\n00:21:59.380 --> 00:22:02.730\nSo if I pick East Asia,\nI'm gonna look for that A4 server and\n\n477\n00:22:02.730 --> 00:22:05.760\nnow I'm at, well, 70 cents an hour, right.\n\n478\n00:22:05.760 --> 00:22:10.440\nSo, depending on where you place the\nserver that's gonna impact your pricing.\n\n479\n00:22:10.440 --> 00:22:13.620\nNow, why would I choose different placing,\n\n480\n00:22:13.620 --> 00:22:14.770\nwhy wouldn't I just go\nwith the cheapest one?\n\n481\n00:22:14.770 --> 00:22:17.470\nWell, you've gotta think\nabout your customers, right?\n\n482\n00:22:17.470 --> 00:22:20.150\nA lot of time it benefits\nto have your server as\n\n483\n00:22:20.150 --> 00:22:22.130\nclose to the customer as possible.\n\n484\n00:22:22.130 --> 00:22:24.990\nSo if I have a lot of customers in China,\nI probably wanna go with\n\n485\n00:22:24.990 --> 00:22:27.700\nthat East Asian data center even\nthough it's more expensive.\n\n486\n00:22:27.700 --> 00:22:32.250\nIf I have more customers in California,\nthat East Asia server is actually not\n\n487\n00:22:32.250 --> 00:22:37.090\nthat far away But I could save some\nmoney by sticking it in US West.\n\n488\n00:22:37.090 --> 00:22:38.520\nAnd then it's gonna be\ncloser to those people and\n\n489\n00:22:38.520 --> 00:22:40.820\nit's gonna cost me less money\nkeeping them geographically close.\n\n490\n00:22:40.820 --> 00:22:43.320\nThat's something really hard\nto do with physical servers.\n\n491\n00:22:43.320 --> 00:22:46.360\nIf you buy a physical server and you want\nit geographically close to your customer,\n\n492\n00:22:46.360 --> 00:22:46.995\nwhat do you have to do?\n\n493\n00:22:46.995 --> 00:22:48.420\nCo-location.\n\n494\n00:22:48.420 --> 00:22:51.790\nYou gotta call around and find somebody\nyou trust that has a data center.\n\n495\n00:22:51.790 --> 00:22:52.799\nIt can be challenging.\n\n496\n00:22:54.470 --> 00:22:57.758\nThere's also some special regions,\nlike these U.S.\n\n497\n00:22:57.758 --> 00:23:01.520\ngovernment Iowa, U.S. government Virginia,\nwhich we're not allowed to use.\n\n498\n00:23:01.520 --> 00:23:05.850\nThose are the ones that are certified just\nfor the United States government, and so\n\n499\n00:23:05.850 --> 00:23:08.800\nif you're a government agency,\nyou can go in and you can use those, and\n\n500\n00:23:08.800 --> 00:23:11.639\nthe pricing will be, it's actually\na little higher if I remember right.\n\n501\n00:23:12.820 --> 00:23:15.670\nLet's go look at U.S.\nGovernment Iowa here.\n\n502\n00:23:15.670 --> 00:23:16.450\nOh.\n\n503\n00:23:16.450 --> 00:23:17.750\nIt's not even gonna show me.\n\n504\n00:23:17.750 --> 00:23:19.020\nSee, you'll find that.\n\n505\n00:23:19.020 --> 00:23:20.630\nSo I gotta contact my Microsoft rep.\n\n506\n00:23:20.630 --> 00:23:22.440\n>> That's our tax dollars hard at work,\nDon.\n\n507\n00:23:22.440 --> 00:23:23.430\n>> Yep.\nThat's right.\n\n508\n00:23:23.430 --> 00:23:25.110\nSo this whole page is dynamic.\n\n509\n00:23:25.110 --> 00:23:27.500\nIt's updating based on\nwhat I'm choosing here.\n\n510\n00:23:27.500 --> 00:23:31.520\nSo when I choose a different region,\nthat long pause, it's not that my\n\n511\n00:23:31.520 --> 00:23:35.060\ninternet connection stinks, it's that it's\nkind of recalculating the whole page.\n\n512\n00:23:35.060 --> 00:23:39.120\nSo, if I go Southeast Asia,\nit's going to pause or recalculate.\n\n513\n00:23:39.120 --> 00:23:41.260\nThe pricing page is\nactually really useful.\n\n514\n00:23:41.260 --> 00:23:45.862\n>> Is there anyway for us to figure out\nexactly what our pricing is going to be\n\n515\n00:23:45.862 --> 00:23:48.057\nbefore we hit that buy now button?\n\n516\n00:23:48.057 --> 00:23:51.387\n>> So yes and no, if this is an all brand\nnew product that you're going to be\n\n517\n00:23:51.387 --> 00:23:54.717\nrolling out and you don't know how\nmany servers you're going to need,\n\n518\n00:23:54.717 --> 00:23:57.068\nthen you don't know how\nmuch it's going to cost.\n\n519\n00:23:57.068 --> 00:23:59.779\nI mean, you just,\nhave to have data, right?\n\n520\n00:23:59.779 --> 00:24:02.745\nBut let's say that it's\nnot an all new project.\n\n521\n00:24:02.745 --> 00:24:06.470\nLet's say you've already got a data\ncenter, you've got 200 servers.\n\n522\n00:24:06.470 --> 00:24:10.400\nAnd you're thinking about moving your\nwhole data center up into the cloud.\n\n523\n00:24:10.400 --> 00:24:12.700\nThere is a way you can find out\nhow much that's gonna cost.\n\n524\n00:24:12.700 --> 00:24:14.450\nMicrosoft has this cool thing,\n\n525\n00:24:14.450 --> 00:24:17.010\nthis guy right here,\nthe Microsoft Pricing Calculator.\n\n526\n00:24:17.010 --> 00:24:21.920\nAnd with the Pricing Calculator,\nyou can jump in here, and you can type in\n\n527\n00:24:21.920 --> 00:24:25.600\nwhat you're gonna be using, and once you\ntell it that, it'll estimate the cost.\n\n528\n00:24:25.600 --> 00:24:29.840\nSo if I go in here to Compute, and I tell\nit that I want to do Virtual Machines,\n\n529\n00:24:30.840 --> 00:24:33.840\nI can come in here and\nstart to add in what I'm gonna do.\n\n530\n00:24:33.840 --> 00:24:36.843\nI'm gonna do some over in,\nwe'll do East US, and\n\n531\n00:24:36.843 --> 00:24:39.497\nI'll tell them that they're Windows VMs.\n\n532\n00:24:39.497 --> 00:24:42.018\nI'm gonna go with the standard tier,\nI'll talk about the basic and\n\n533\n00:24:42.018 --> 00:24:43.931\nstandard tier later, but\nI'll go standard tier.\n\n534\n00:24:43.931 --> 00:24:46.900\nWe'll do, maybe not A0s,\nthose kind of stink.\n\n535\n00:24:46.900 --> 00:24:49.480\nLet's go with A4 that\nI've been talking about.\n\n536\n00:24:49.480 --> 00:24:55.460\nAnd maybe I need 200 of these servers, and\nfor the hours that I'm going to need them.\n\n537\n00:24:55.460 --> 00:24:57.830\nThat's kind of a tricky one there.\n\n538\n00:24:57.830 --> 00:25:01.020\nSo for the hours that I'm gonna need them,\nI might wanna come in and\n\n539\n00:25:01.020 --> 00:25:05.580\nspecify that I need 200 servers for\n24 hours a day.\n\n540\n00:25:05.580 --> 00:25:09.190\nAnd if it's 24 hours a day, that would be,\nI should have picked something easier.\n\n541\n00:25:09.190 --> 00:25:12.253\nWe'll say we had 100 servers.\n\n542\n00:25:12.253 --> 00:25:17.980\n>> [LAUGH]\n>> And we needed them 24 hours a day.\n\n543\n00:25:17.980 --> 00:25:20.611\nNow, well that's not right.\n\n544\n00:25:20.611 --> 00:25:25.495\nSorry, for my hours here, I need to put\nin, it's the amount of hours, well,\n\n545\n00:25:25.495 --> 00:25:30.689\nlike here it's tell me 100 servers that\nare A4's would cost me $72 an hour.\n\n546\n00:25:30.689 --> 00:25:32.430\nIt's just kind of listing\nit per month here.\n\n547\n00:25:32.430 --> 00:25:35.494\nSo basically, I need to say like\n24 hours a day times 31 days,\n\n548\n00:25:35.494 --> 00:25:37.074\nwhich I don't know what that is.\n\n549\n00:25:37.074 --> 00:25:38.235\nDo you know what that is?\n\n550\n00:25:38.235 --> 00:25:41.195\n>> 24 times 31 [CROSSTALK]\nI'm not good at math.\n\n551\n00:25:41.195 --> 00:25:42.808\n[LAUGH]\n>> So 24 times 31,\n\n552\n00:25:42.808 --> 00:25:46.152\noh that was the default when\nI deleted that like a moron.\n\n553\n00:25:46.152 --> 00:25:47.115\nThere we go.\n>> [LAUGH]\n\n554\n00:25:47.115 --> 00:25:48.749\n>> So if I have 100 of these servers,\n\n555\n00:25:48.749 --> 00:25:50.771\nit's gonna cost me $53,000 a month.\n\n556\n00:25:50.771 --> 00:25:56.097\nNow that sounds really expensive,\nbut if you've got 100 servers,\n\n557\n00:25:56.097 --> 00:26:02.590\nif they each cost $8,000,\nthat's $800,000, 50,000 a month.\n\n558\n00:26:02.590 --> 00:26:04.831\nYou divide that up,\nit kind of breaks even after two years.\n\n559\n00:26:04.831 --> 00:26:08.100\nIt all kind of boils down to that.\n\n560\n00:26:08.100 --> 00:26:10.850\nBut you can specify and kind of get\nan idea of what that's gonna to cost.\n\n561\n00:26:10.850 --> 00:26:14.954\nNow this tool's not terribly advanced\nlike I can't specify a bunch of different\n\n562\n00:26:14.954 --> 00:26:15.870\ninstance sizes.\n\n563\n00:26:15.870 --> 00:26:20.838\nSo Microsoft has another tool that, let's\nsee, do I have it open here somewhere?\n\n564\n00:26:20.838 --> 00:26:22.550\nI don't, but I have it downloaded.\n\n565\n00:26:22.550 --> 00:26:27.435\nMicrosoft pool tool out there called,\nI've got it floating here somewhere, here,\n\n566\n00:26:27.435 --> 00:26:30.810\nthe Microsoft Azure Cost Estimator.\n\n567\n00:26:30.810 --> 00:26:32.989\nYou can go to Microsoft site and\ndownload it, it's free,\n\n568\n00:26:32.989 --> 00:26:34.064\nyou load it on your machine.\n\n569\n00:26:34.064 --> 00:26:36.655\nAnd what it will do,\nis it will scan your network.\n\n570\n00:26:36.655 --> 00:26:38.722\nIt'll scan the servers on your network.\n\n571\n00:26:38.722 --> 00:26:42.827\nAnd it will catalog them, how much memory\nthey have, how many cores they have,\n\n572\n00:26:42.827 --> 00:26:44.747\nhow much hard drive space they have.\n\n573\n00:26:44.747 --> 00:26:48.243\nAnd then it will use the exact data\nfrom your actual data center to\n\n574\n00:26:48.243 --> 00:26:52.010\ngenerate a pricing sheet and\ntell you exactly how much it would cost.\n\n575\n00:26:52.010 --> 00:26:56.340\nBecause I might have some servers with\ntwo cores and some with eight cores.\n\n576\n00:26:56.340 --> 00:26:58.610\nI might have some servers with\n20 gigs of hard drive space,\n\n577\n00:26:58.610 --> 00:27:01.480\nI might have some servers with 20\nterabytes of hard drive space.\n\n578\n00:27:01.480 --> 00:27:04.810\nMight have some with 2 gigs of RAM and\nsome with 24 gigs of RAM.\n\n579\n00:27:04.810 --> 00:27:08.021\nSo it's going to figure that out and\ngive me the exact pricing,\n\n580\n00:27:08.021 --> 00:27:11.717\nand while I'm thinking about memory,\nI meant to mention something back\n\n581\n00:27:11.717 --> 00:27:14.640\nhere on one of these pages that I was on,\nwhat page was it?\n\n582\n00:27:14.640 --> 00:27:15.465\nThis one.\n\n583\n00:27:15.465 --> 00:27:20.584\nThese weird memory sizes,\nyou guys might have noticed like 3.5 gigs.\n\n584\n00:27:20.584 --> 00:27:22.348\nWhy doesn't it say 4 gigs?\n\n585\n00:27:22.348 --> 00:27:25.227\nOr 1.75, why doesn't it say 2 gigs?\n\n586\n00:27:25.227 --> 00:27:27.504\n7 gigs, why not 8 gigs of RAM?\n\n587\n00:27:27.504 --> 00:27:32.348\nWhat happened to the nice normal\nmemory sizes that we're used to, 1,\n\n588\n00:27:32.348 --> 00:27:34.863\n2, 4, 8, 16, 32 and so on?\n\n589\n00:27:34.863 --> 00:27:40.984\nWell, what Microsoft's doing is they're\nactually deducting the memory required for\n\n590\n00:27:40.984 --> 00:27:42.340\nthe base OS.\n\n591\n00:27:42.340 --> 00:27:45.300\nThey don't wanna falsely\nadvertise to you that hey,\n\n592\n00:27:45.300 --> 00:27:49.150\nyou get 8 gigs of RAM when the host\nOS is eating a gig of that RAM.\n\n593\n00:27:49.150 --> 00:27:51.100\nAnd so\nyou actually only get 7 gigs usable.\n\n594\n00:27:51.100 --> 00:27:54.536\nSo that's what they're showing here is\nwhat's the usable memory available for\n\n595\n00:27:54.536 --> 00:27:55.153\nyour system.\n\n596\n00:27:55.153 --> 00:27:58.860\nThe minimum system requirements for\nWindows Server is 1 gig of RAM, and\n\n597\n00:27:58.860 --> 00:28:00.819\nthat's why this starts at 0.75.\n\n598\n00:28:00.819 --> 00:28:02.375\nAnd that's the lowest they can go.\n\n599\n00:28:02.375 --> 00:28:05.155\nThey can't go any lower cuz it\nwon't be enough for Windows to run.\n\n600\n00:28:05.155 --> 00:28:08.230\nFor Linux, you could go lower,\nbut I don't think Microsoft does.\n\n601\n00:28:08.230 --> 00:28:10.310\nBut after that,\nthat's why these numbers are offset.\n\n602\n00:28:10.310 --> 00:28:11.990\nIt's the base operating\nsystem meeting those.\n\n603\n00:28:11.990 --> 00:28:13.730\n>> Well, thanks for\nbeing transparent there, Microsoft.\n\n604\n00:28:13.730 --> 00:28:14.640\n>> Eh, they're trying.\n\n605\n00:28:14.640 --> 00:28:15.567\n>> We appreciate the honesty.\n\n606\n00:28:15.567 --> 00:28:16.990\n[LAUGH]\n>> Don,\n\n607\n00:28:16.990 --> 00:28:20.870\nis there any other considerations that\nwe need to take in as a factor before we\n\n608\n00:28:20.870 --> 00:28:23.610\ndive into Azure as\na virtual machine solution?\n\n609\n00:28:23.610 --> 00:28:27.010\n>> Yeah, if you're talking to your CIO,\nyour CTO,\n\n610\n00:28:27.010 --> 00:28:30.460\nwhoever it is,\nit's easy to fixate on these costs.\n\n611\n00:28:30.460 --> 00:28:32.660\nAnd then you do what I did a moment ago,\nand you say well,\n\n612\n00:28:32.660 --> 00:28:37.290\nif a server costs me $8,000 but\nI'm paying $72 a month,\n\n613\n00:28:37.290 --> 00:28:41.570\nat some point, there has to be\na break-even price or whatever.\n\n614\n00:28:41.570 --> 00:28:44.760\nIt's really easy to fall into\nthat habit of comparing this\n\n615\n00:28:44.760 --> 00:28:47.650\nper hour price to what\nthe actual server would cost.\n\n616\n00:28:47.650 --> 00:28:51.110\nBut understand that when you buy a server,\nyou're not just buying a server.\n\n617\n00:28:51.110 --> 00:28:52.580\nThere's more to it.\n\n618\n00:28:52.580 --> 00:28:54.960\nThere's the electricity\nto keep it running.\n\n619\n00:28:54.960 --> 00:28:58.580\nThere's the battery backups to keep\nit up during the power failure.\n\n620\n00:28:58.580 --> 00:29:00.190\nThere's the network bandwidth.\n\n621\n00:29:00.190 --> 00:29:02.578\nThere's redundant network connections,\n\n622\n00:29:02.578 --> 00:29:05.680\nredundant fiber connections\nto a storage area network.\n\n623\n00:29:05.680 --> 00:29:08.500\nIf it has virtualization,\nthere's the host OS and the guest OS.\n\n624\n00:29:08.500 --> 00:29:13.258\nThere's just the maintenance,\nthe software licensing, there's all\n\n625\n00:29:13.258 --> 00:29:18.350\nsorts of other things that go along with\nthe cost of owning a physical server.\n\n626\n00:29:18.350 --> 00:29:22.100\nEven with the physical server, when you\npay that, let's say it's $8,000 and\n\n627\n00:29:22.100 --> 00:29:25.360\nyou buy it on day one, well,\nthe next year rolls around, and\n\n628\n00:29:25.360 --> 00:29:28.520\nyou gotta re-up the warranty, or\nmaybe you get a three year warranty and\n\n629\n00:29:28.520 --> 00:29:30.140\nyou need to go to four or five years.\n\n630\n00:29:30.140 --> 00:29:32.800\nThose are all unsaid costs.\n\n631\n00:29:32.800 --> 00:29:35.350\nCosts that aren't in the base\nprice of that server.\n\n632\n00:29:35.350 --> 00:29:38.620\nThose unsaid costs are a part of this.\n\n633\n00:29:38.620 --> 00:29:41.440\nMicrosoft already has battery\nbackups on all these servers.\n\n634\n00:29:41.440 --> 00:29:45.060\nThey already have redundant generators\nto keep them on in a power failure.\n\n635\n00:29:45.060 --> 00:29:47.690\nThey've already gotten more\nthan one Internet connection.\n\n636\n00:29:47.690 --> 00:29:52.120\nIf a hard drive fails, it's not you, it's\na Microsoft tech who runs over there and\n\n637\n00:29:52.120 --> 00:29:54.080\npops that drive out and puts in a new one.\n\n638\n00:29:54.080 --> 00:29:57.590\nIt's a Microsoft tech that sees\nthere's a problem with your server and\n\n639\n00:29:57.590 --> 00:29:59.610\nmoves your virtual\nmachine to another host.\n\n640\n00:29:59.610 --> 00:30:03.390\nSo you're getting employees,\nyou're getting hardware, you're getting\n\n641\n00:30:03.390 --> 00:30:08.960\nmaintenance, monitoring, all these other\nthings for that small hourly price.\n\n642\n00:30:08.960 --> 00:30:12.670\nAnd when you look at it that way,\nthe Azure cloud is so\n\n643\n00:30:12.670 --> 00:30:18.250\nmuch less expensive than owning physical\nservers that it's hard not to do it.\n\n644\n00:30:18.250 --> 00:30:21.450\nIn fact, there's really only a few\nscenarios I can think of where you\n\n645\n00:30:21.450 --> 00:30:22.670\nwouldn't want to go to a cloud.\n\n646\n00:30:23.740 --> 00:30:25.970\nOne example, data privacy.\n\n647\n00:30:25.970 --> 00:30:27.886\nIf you have a regulation, a law,\n\n648\n00:30:27.886 --> 00:30:31.379\nsomething that says your data\nhas to be completely private,\n\n649\n00:30:31.379 --> 00:30:36.187\nyou might not trust the Azure cloud, you\nmight not trust the Microsoft employees.\n\n650\n00:30:36.187 --> 00:30:39.278\nNow they are certified in a number\nof different regulatory and\n\n651\n00:30:39.278 --> 00:30:42.670\ncompliance standards, so\nthey've got most of it covered.\n\n652\n00:30:42.670 --> 00:30:45.050\nBut there's still some environments\nwhere you just can't use this, so\n\n653\n00:30:45.050 --> 00:30:46.540\nthat might be one scenario.\n\n654\n00:30:46.540 --> 00:30:50.080\nAnother scenario might be that\nyou need specialized hardware.\n\n655\n00:30:50.080 --> 00:30:53.880\nDaniel and I, we used to work together at\nan insurance company years and years back.\n\n656\n00:30:53.880 --> 00:30:55.250\nAnd at that company,\n\n657\n00:30:55.250 --> 00:30:58.190\nwe had a fax server which,\ndo you remember the fax server, Dan?\n\n658\n00:30:58.190 --> 00:30:59.850\n>> Oh, I remember the fax server.\n\n659\n00:30:59.850 --> 00:31:01.477\n>> It was a ray of sunshine, wasn't it?\n\n660\n00:31:01.477 --> 00:31:02.150\n>> It completely was.\n\n661\n00:31:02.150 --> 00:31:04.348\n[LAUGH]\n>> The thing about the fax server is\n\n662\n00:31:04.348 --> 00:31:08.012\nit had this special modem board in\nit that had, is it 8 or 16 ports,\n\n663\n00:31:08.012 --> 00:31:11.697\nsomething crazy on there, so\nthat we could receive all these faxes.\n\n664\n00:31:11.697 --> 00:31:13.650\nWell, I can't virtualize that system.\n\n665\n00:31:13.650 --> 00:31:15.970\nI need that fax board,\nI can't put that in Azure.\n\n666\n00:31:15.970 --> 00:31:18.770\nI'm gonna have to have a physical server\nfor that, there's no way around it.\n\n667\n00:31:18.770 --> 00:31:23.355\nSo there are scenarios where Azure doesn't\nwork, but pricing isn't one of them.\n\n668\n00:31:23.355 --> 00:31:27.781\nAzure always ends up being cheaper than\nyour physical server unless you do really\n\n669\n00:31:27.781 --> 00:31:32.153\nlike white box, build your own,\noff the shelf, non-name brand type server.\n\n670\n00:31:32.153 --> 00:31:34.925\nBut then you have a higher\nmean time between failure, and\n\n671\n00:31:34.925 --> 00:31:38.300\nyou end up losing all that savings\non the support side on the back end.\n\n672\n00:31:38.300 --> 00:31:41.825\nWe've all done it, we've all kind\nof worked in that environment, and\n\n673\n00:31:41.825 --> 00:31:44.486\nit's nice having Microsoft\nworry about that for us.\n\n674\n00:31:44.486 --> 00:31:48.000\n>> Yeah, when you buy a server,\nit's not just buying a box.\n\n675\n00:31:48.000 --> 00:31:50.740\nIt's a lot of things\nthat go along with that.\n\n676\n00:31:50.740 --> 00:31:54.670\nYou gotta pay a guy like me or Don here or\nmaybe yourself, to make sure it's running,\n\n677\n00:31:54.670 --> 00:31:55.670\nit's doing everything.\n\n678\n00:31:55.670 --> 00:31:58.280\nWhen we go into the cloud,\nthat all gets pushed off.\n\n679\n00:31:58.280 --> 00:32:02.032\nWe get to be freed up to do more important\nthings, developing infrastructure,\n\n680\n00:32:02.032 --> 00:32:03.320\nworking support tickets,\n\n681\n00:32:03.320 --> 00:32:06.970\nthings that are much more important\nthan swapping out hard drives and stuff.\n\n682\n00:32:06.970 --> 00:32:07.620\nSo Don,\n\n683\n00:32:07.620 --> 00:32:11.130\nis there anything else we need to cover\nin this show before we close it down?\n\n684\n00:32:11.130 --> 00:32:12.350\n>> That's it for the basics.\n\n685\n00:32:12.350 --> 00:32:16.140\nWe're gonna move on to talking about\nactually creating the VMs, and\n\n686\n00:32:16.140 --> 00:32:19.850\nI know I showed some information up here\nthat I didn't explain in great detail.\n\n687\n00:32:19.850 --> 00:32:21.670\nWe're gonna see that in\nthe upcoming episodes.\n\n688\n00:32:21.670 --> 00:32:23.220\nSo we got a lot more to go into.\n\n689\n00:32:23.220 --> 00:32:25.690\nBut I just wanted to make sure I started\noff with the basics of Azure for\n\n690\n00:32:25.690 --> 00:32:28.430\nthose of you that haven't used it or\naren't familiar with it.\n\n691\n00:32:28.430 --> 00:32:30.207\nIt really is a great system,\nyou'll enjoy it.\n\n692\n00:32:30.207 --> 00:32:31.213\nIt's pretty easy to use and\n\n693\n00:32:31.213 --> 00:32:34.294\ndefinitely something you'll wanna take\nadvantage of out there in the real world.\n\n694\n00:32:34.294 --> 00:32:35.900\n>> That's right, excellent stuff, Don.\n\n695\n00:32:35.900 --> 00:32:37.090\nThanks for joining us today.\n\n696\n00:32:37.090 --> 00:32:39.710\nWe're gonna go ahead and\nsign off for ITProTV.\n\n697\n00:32:39.710 --> 00:32:40.938\nI've been your host, Daniel Lowery.\n\n698\n00:32:40.938 --> 00:32:41.693\n>> And I'm Don Pezet.\n\n699\n00:32:41.693 --> 00:32:42.597\n>> And we'll see you next time.\n\n700\n00:32:42.597 --> 00:32:47.783\n[SOUND]\n\n",
          "vimeoId": "147474268"
        },
        {
          "description": "In this episode, Daniel and Don explore some of the default limits to the Azure Virtual Machines. This includes the default CPU core limits, DNS restrictions, and storage sizes. Then they explain how to push beyond those limits when the need arises. Finally, they explain the differences in Azure VM types. This covers the Basic vs. Standard tiers as well as the A, D/DS, and G/GS series of Virtual Machines.",
          "length": "1925",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-1-2-virtual_machine_types-113015-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-1-2-virtual_machine_types-113015-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-1-2-virtual_machine_types-113015-1-sm.jpg",
          "title": "Virtual Machine Types",
          "transcript": "WEBVTT\n\n1\n00:00:00.246 --> 00:00:10.246\n[MUSIC]\n\n2\n00:00:12.007 --> 00:00:16.830\nAll right, greetings everyone and welcome\nto another great episode of ITProTV.\n\n3\n00:00:16.830 --> 00:00:21.430\nI'm your host Daniel Lowrie and in this\nepisode we're gonna keep taking a look at\n\n4\n00:00:21.430 --> 00:00:25.810\nthe Microsoft Azure Virtual machines that\nare available from, well, Microsoft.\n\n5\n00:00:25.810 --> 00:00:28.870\nAnd who better to help us out with this,\nis none other than my good friend,\n\n6\n00:00:28.870 --> 00:00:30.740\nmy colleague, Mr. Don Pezet.\n\n7\n00:00:30.740 --> 00:00:32.230\nWelcome to the show, Don.\n\n8\n00:00:32.230 --> 00:00:33.520\n>> Thank you.\nThank you for having me, Daniel.\n\n9\n00:00:33.520 --> 00:00:36.350\nGlad to be back on the show and\nready to talk more about virtual machines.\n\n10\n00:00:36.350 --> 00:00:40.810\nWe did a great job in the first\nepisode talking about Azure.\n\n11\n00:00:40.810 --> 00:00:43.220\nAnd completely failing to\ndeploy any virtual machines.\n\n12\n00:00:43.220 --> 00:00:48.180\nSo, in this episode, I want to follow up\nthat amazing performance by talking about\n\n13\n00:00:48.180 --> 00:00:52.350\nthe different considerations we have to\nhave before we actually implement a VM.\n\n14\n00:00:52.350 --> 00:00:55.720\nAnd I imagine we'll totally fail to\ndeploy any VMs this episode, too, but\n\n15\n00:00:55.720 --> 00:00:59.190\nthere is a lot we need to be aware\nof before we even get started.\n\n16\n00:00:59.190 --> 00:01:01.260\nAnd even some of the information\nI showed in the last episode,\n\n17\n00:01:01.260 --> 00:01:04.117\nwe need to revisit and\ngo a little more in-depth on.\n\n18\n00:01:04.117 --> 00:01:08.020\nSo, I want to talk about the different\ntypes of hardware that we end up with.\n\n19\n00:01:08.020 --> 00:01:11.670\nThe different ways of implementing\nthings and the different, in general,\n\n20\n00:01:11.670 --> 00:01:15.480\nconsiderations we need to have before we\nstart rolling out VMs in the network.\n\n21\n00:01:15.480 --> 00:01:16.590\n>> Now that being said, Don.\n\n22\n00:01:16.590 --> 00:01:22.040\nThe word on the street is that these Azure\nVMs, well, they have some limitations.\n\n23\n00:01:22.040 --> 00:01:25.040\nThey're not Almighty,\nomnipotent obnisions?,\n\n24\n00:01:25.040 --> 00:01:28.790\nthey do have some boundaries per say.\n\n25\n00:01:28.790 --> 00:01:30.230\nI guess it would be a good idea for\n\n26\n00:01:30.230 --> 00:01:33.070\nus if we're going to get\ninto the cloud solutions,\n\n27\n00:01:33.070 --> 00:01:37.190\nlike Azure, to know what the boundaries\nare and where those limitations lie.\n\n28\n00:01:37.190 --> 00:01:39.870\n>> Yeah whenever you\ncreate an Azure account\n\n29\n00:01:39.870 --> 00:01:44.360\nthey ask you to fill out the forms, submit\nyour credit card, you're basically buying\n\n30\n00:01:44.360 --> 00:01:47.640\na subscription to Azure\n>> And as part of your subscription\n\n31\n00:01:47.640 --> 00:01:51.990\nthere are certain limits that are in\nplace that aren't immediately obvious.\n\n32\n00:01:51.990 --> 00:01:56.600\nAnd what they do is they create these\nlimits to protect your account.\n\n33\n00:01:56.600 --> 00:01:57.130\nRight?\n\n34\n00:01:57.130 --> 00:01:59.100\nImagine and here's what happens.\n\n35\n00:01:59.100 --> 00:02:01.390\nImagine your username and\nyour password get out somehow.\n\n36\n00:02:01.390 --> 00:02:04.900\nSomebody guesses it, or\nthey run a keylogger on your machine.\n\n37\n00:02:04.900 --> 00:02:06.790\nSomebody could connect your account.\n\n38\n00:02:06.790 --> 00:02:12.440\nThey can spin up 10,000 virtual machines\nand start BitCoin mining on your system\n\n39\n00:02:12.440 --> 00:02:17.180\nand run for hours, days, maybe even weeks\nbefore you notice how high your bill is.\n\n40\n00:02:17.180 --> 00:02:20.610\nRight, that's the risk we have with\nsomething like a cloud service like this.\n\n41\n00:02:20.610 --> 00:02:22.360\nYour account is very sensitive.\n\n42\n00:02:22.360 --> 00:02:25.760\nSo when you sign up a new Azure account,\nMicrosoft\n\n43\n00:02:25.760 --> 00:02:29.020\nputs certain restrictions on there to\nprotect you from that exact scenario.\n\n44\n00:02:29.020 --> 00:02:30.970\nSo that if somebody broke\ninto your account and\n\n45\n00:02:30.970 --> 00:02:35.350\nreally started to ramp up utilization,\nwell, they would be able to,\n\n46\n00:02:35.350 --> 00:02:37.960\nthey'd hit that ceiling,\nhit that and stop.\n\n47\n00:02:37.960 --> 00:02:40.990\nWhen this really becomes a problem is that\nsome people don't know about the limits.\n\n48\n00:02:40.990 --> 00:02:43.370\nAnd so they say, all right I've\ngot 200 servers in my data center,\n\n49\n00:02:43.370 --> 00:02:48.210\nI wanna roll them out and, oh shoot,\nit stopped after just 20 virtual machines.\n\n50\n00:02:48.210 --> 00:02:49.050\nWhat's going on there?\n\n51\n00:02:49.050 --> 00:02:51.010\nRight, and that happens.\n\n52\n00:02:51.010 --> 00:02:54.460\nIt's part of the process unfortunately,\npart of the learning curve.\n\n53\n00:02:54.460 --> 00:02:57.090\nSo before we get in,\nlet's talk about those limits.\n\n54\n00:02:57.090 --> 00:03:00.410\nFirst of I said 20 hours,\nI wasn't making that number up.\n\n55\n00:03:00.410 --> 00:03:01.830\nThat's a real number.\n\n56\n00:03:01.830 --> 00:03:03.255\nYou're limited to 20 cores.\n\n57\n00:03:03.255 --> 00:03:04.409\nYou have what's called a core quota.\n\n58\n00:03:04.409 --> 00:03:07.500\nAnd your core quota is set to 20 by\ndefault, and it's 20 per region.\n\n59\n00:03:07.500 --> 00:03:10.970\nSo if I go into the US East region and\n\n60\n00:03:10.970 --> 00:03:16.030\nI spin up 20 single-core virtual machines,\nI'm at my limit.\n\n61\n00:03:16.030 --> 00:03:18.730\nIf I try to do one more, then I can't.\n\n62\n00:03:18.730 --> 00:03:20.390\nAnd it won't let me spin it up.\n\n63\n00:03:20.390 --> 00:03:21.810\nIf I spin up five.\n\n64\n00:03:21.810 --> 00:03:25.070\nMake sure I get the right fingers up here,\nfive.\n\n65\n00:03:25.070 --> 00:03:27.130\nFour processor systems.\n\n66\n00:03:27.130 --> 00:03:29.030\nI just hit my limit, right?\n\n67\n00:03:29.030 --> 00:03:34.130\nIf I spin up two 8-core and then spin up\nanother 8-core, I'm gonna exceed my limit.\n\n68\n00:03:34.130 --> 00:03:38.370\nSo you get 20 cores is our limit by\ndefault, you can raise it, right?\n\n69\n00:03:38.370 --> 00:03:40.000\nIt's just that's what\nit's set to by default.\n\n70\n00:03:40.000 --> 00:03:41.580\nThat's one limit that we have.\n\n71\n00:03:41.580 --> 00:03:43.680\nWe've also got other limits that\nare kind of spread throughout,\n\n72\n00:03:43.680 --> 00:03:46.010\nsome that apply to Bree VM,\nsome that don't.\n\n73\n00:03:46.010 --> 00:03:49.760\nFor example, DNS, if you host your\nown DNS, then there's no limit.\n\n74\n00:03:49.760 --> 00:03:53.830\nThat's that, but if you start\nputting your DNS servers in Azure.\n\n75\n00:03:53.830 --> 00:03:56.330\nThey limit you to 9 DNS servers.\n\n76\n00:03:56.330 --> 00:04:01.560\nThey limit you to 50 zones, and\nthey limit you to 1,000 records per zone.\n\n77\n00:04:01.560 --> 00:04:04.470\nSo if you have more than a thousand\nservers, you may need more than\n\n78\n00:04:04.470 --> 00:04:08.030\na thousand records, you gonna limit\nthere and again it can be increased,\n\n79\n00:04:08.030 --> 00:04:12.550\nbut that's the default that's what it's\nset to and we gotta plan around that.\n\n80\n00:04:12.550 --> 00:04:15.870\nNow that's a pretty big number so a lot of\npeople aren't going to hit that one, but\n\n81\n00:04:15.870 --> 00:04:16.820\n20 cores?\n\n82\n00:04:16.820 --> 00:04:20.300\nI've hit that with pretty much every\nAzure implementation I've done ever.\n\n83\n00:04:20.300 --> 00:04:21.660\nIt's just so easy.\n\n84\n00:04:21.660 --> 00:04:26.390\nYou spin up a couple of four core systems,\nyou hit that 20 limit real fast.\n\n85\n00:04:26.390 --> 00:04:28.550\nSome of the other ones, storage.\n\n86\n00:04:28.550 --> 00:04:32.950\nWhen you start to create storage, there\nis a limit of 500 terabytes of storage.\n\n87\n00:04:32.950 --> 00:04:36.900\nNow, you might ask yourself, wait\na minute, 500 terabytes that's a lot, but\n\n88\n00:04:36.900 --> 00:04:39.010\nthe more servers you have,\nthe more storage you use,\n\n89\n00:04:39.010 --> 00:04:41.310\nand you start to eat\nthat up pretty quickly.\n\n90\n00:04:41.310 --> 00:04:45.320\n500 terabytes is the limit again\nstopping you from absorbing too much\n\n91\n00:04:45.320 --> 00:04:47.450\nof the system at once.\n\n92\n00:04:47.450 --> 00:04:50.680\nCloud services, we're gonna talk\nmore about cloud services later, but\n\n93\n00:04:50.680 --> 00:04:54.410\nthey're a way that we kind of link\ndifferent virtual machines together, and\n\n94\n00:04:54.410 --> 00:04:56.920\nyou've got a maximum of 20 cloud services.\n\n95\n00:04:56.920 --> 00:05:01.590\nNow I bring that up because when you\nstart creating virtual machines,\n\n96\n00:05:01.590 --> 00:05:06.060\neach VM is place into it's own\nindependent cloud service by default.\n\n97\n00:05:06.060 --> 00:05:09.080\nAnd so,\neven if you get your core quote raised,\n\n98\n00:05:09.080 --> 00:05:12.160\nyou still have that cloud service limit.\n\n99\n00:05:12.160 --> 00:05:14.960\nAnd so at 20 VM's you'll hit that limit\nand you won't be able to spend up anymore,\n\n100\n00:05:14.960 --> 00:05:17.000\neven though you've got available cores.\n\n101\n00:05:17.000 --> 00:05:18.690\nSo we've gotta reach out to Microsoft and\n\n102\n00:05:18.690 --> 00:05:23.260\nhave them raise that, or start to group\nour virtual machines into a cloud service.\n\n103\n00:05:23.260 --> 00:05:25.610\nSo that's kind of another\nimportant one for us.\n\n104\n00:05:25.610 --> 00:05:29.120\n>> Now Don, quick question about\nthe storage and the default limits.\n\n105\n00:05:29.120 --> 00:05:33.280\nOn the previous episode we saw the RAM\nhad those funky numbers on there,\n\n106\n00:05:33.280 --> 00:05:35.550\nlike 7 gigs or 3.5 gigs.\n\n107\n00:05:35.550 --> 00:05:40.440\nIs it the same idea there,\nthat I get 500 terabytes of my storage,\n\n108\n00:05:40.440 --> 00:05:42.050\nthat's not including operating system?\n\n109\n00:05:42.050 --> 00:05:42.610\n>> Yeah, yeah.\n\n110\n00:05:42.610 --> 00:05:43.190\nI'm glad you asked,\n\n111\n00:05:43.190 --> 00:05:45.820\nbecause the storage is really kind\nof weird on these virtual machines.\n\n112\n00:05:45.820 --> 00:05:49.180\nWhen you spin up a virtual machine, it'll\nsay it has like 20 gigs, or 30 gigs of\n\n113\n00:05:49.180 --> 00:05:53.920\nstorage, or whatever, and that's talking\nabout the operating system partition.\n\n114\n00:05:53.920 --> 00:05:56.210\nNow that is the amount space\nthat's available on it, and\n\n115\n00:05:56.210 --> 00:05:58.870\nMicrosoft tells you don't use that space.\n\n116\n00:05:58.870 --> 00:06:01.680\nSo even though you get 20 or\n30 gigs, or 60 gigs, or whatever,\n\n117\n00:06:01.680 --> 00:06:03.260\nyou're not supposed to use it.\n\n118\n00:06:03.260 --> 00:06:04.350\nWhy not?\n\n119\n00:06:04.350 --> 00:06:08.060\nWell the main reason is you can't\ntake a good snapshot of it.\n\n120\n00:06:08.060 --> 00:06:10.390\nThe operating system is up and\nrunning, it's being used.\n\n121\n00:06:10.390 --> 00:06:13.310\nSo what Microsoft wants you to\ndo if you need data storage,\n\n122\n00:06:13.310 --> 00:06:15.300\nyou need to add a second\ndrive onto that server.\n\n123\n00:06:15.300 --> 00:06:18.080\nAnd it's that second drive that starts\nto count towards these limits that I'm\n\n124\n00:06:18.080 --> 00:06:19.420\ntalking about right here.\n\n125\n00:06:19.420 --> 00:06:22.359\nSo you'll have your operating system\ndrive, and your data or storage drive.\n\n126\n00:06:23.390 --> 00:06:27.140\nThat can grow pretty large if you're doing\ndatabases, file servers, other things.\n\n127\n00:06:27.140 --> 00:06:28.120\nIf it's just a web server,\n\n128\n00:06:28.120 --> 00:06:30.970\nyou might be able to fit everything\nyou need in the regular operating\n\n129\n00:06:30.970 --> 00:06:34.920\nsystem partition, but Microsoft recommends\nyou go separate drives on that.\n\n130\n00:06:34.920 --> 00:06:38.440\n>> Okay, now Don you've mentioned that for\nsome reason we hit these limits,\n\n131\n00:06:38.440 --> 00:06:42.590\nwe hit these caps\n>> We are able to push beyond them.\n\n132\n00:06:42.590 --> 00:06:45.882\nIt's probably just not a click\nof a button though, right?\n\n133\n00:06:45.882 --> 00:06:49.220\n>> [LAUGH] If it was just a click of\na button, then the hackers could do it,\n\n134\n00:06:49.220 --> 00:06:49.840\nand all of a sudden,\n\n135\n00:06:49.840 --> 00:06:54.260\nyou have those BitCoin miners, but\nyou do have to get support involved.\n\n136\n00:06:54.260 --> 00:06:56.370\nAnd that's why I say think\nabout this ahead of time.\n\n137\n00:06:56.370 --> 00:06:59.690\nIf I need to spin up 200\nvirtual machines right now,\n\n138\n00:06:59.690 --> 00:07:00.760\n>> And that limit's in place?\n\n139\n00:07:00.760 --> 00:07:01.490\nI'm out of luck.\n\n140\n00:07:01.490 --> 00:07:02.020\nI can't.\n\n141\n00:07:02.020 --> 00:07:03.730\nI can't do it.\nI gotta submit a ticket.\n\n142\n00:07:03.730 --> 00:07:05.130\nI gotta wait for a response.\n\n143\n00:07:05.130 --> 00:07:05.710\nAll right?\n\n144\n00:07:05.710 --> 00:07:11.030\nBut if we plan ahead of time, I know that\nin a week I'm gonna spend up 200 servers.\n\n145\n00:07:11.030 --> 00:07:12.020\nLet me get that limit raise now.\n\n146\n00:07:12.020 --> 00:07:13.010\nAll right?\n\n147\n00:07:13.010 --> 00:07:13.660\nYou can do it.\n\n148\n00:07:13.660 --> 00:07:15.940\nAnd it usually only takes them an hour or\ntwo to raise the limit.\n\n149\n00:07:15.940 --> 00:07:17.490\nIt's not like you gotta wait a long time.\n\n150\n00:07:17.490 --> 00:07:20.560\nBut if you've got a particular downtime\nwindow scheduled or something,\n\n151\n00:07:20.560 --> 00:07:22.780\nyou need to make sure you can\nget the work done in that time.\n\n152\n00:07:22.780 --> 00:07:25.830\nSo let me show you how it's done\ncuz it's not immediately obvious.\n\n153\n00:07:25.830 --> 00:07:29.090\nBasically we have to open a support\nticket, and through the support\n\n154\n00:07:29.090 --> 00:07:31.590\nsystem it's actually got an entry\nin there for raising the limit.\n\n155\n00:07:31.590 --> 00:07:33.350\nI'll show you here on my computer.\n\n156\n00:07:33.350 --> 00:07:37.450\nSo I'm logged in to the Azure Portal here,\nand all the way up here to the top right\n\n157\n00:07:37.450 --> 00:07:42.750\nof the screen, you'll sort of see [LAUGH].\n\n158\n00:07:42.750 --> 00:07:44.500\nIf I can you have to zoom in.\n\n159\n00:07:44.500 --> 00:07:45.160\nThere we go.\n\n160\n00:07:45.160 --> 00:07:46.757\nYou'll see my name up here.\n\n161\n00:07:46.757 --> 00:07:51.253\nAnd if I click on my name,\nthat'll expand out and, right here,\n\n162\n00:07:51.253 --> 00:07:53.767\nwe can contact Microsoft Support.\n\n163\n00:07:53.767 --> 00:07:56.736\nAnd that's what's gonna initiate\nthe support ticket system.\n\n164\n00:07:56.736 --> 00:07:57.994\nAnd when we initiate that,\n\n165\n00:07:57.994 --> 00:08:02.150\nwe can go and open up a support ticket\nspecifically for raising that core quota.\n\n166\n00:08:02.150 --> 00:08:04.880\nSo when I look at this,\nI've got that new support button here.\n\n167\n00:08:04.880 --> 00:08:08.330\nI'm just gonna hit that, and I'll start\nto get all this other junk filling in.\n\n168\n00:08:08.330 --> 00:08:09.550\nThis is really a busy screen.\n\n169\n00:08:09.550 --> 00:08:10.970\nI'm not the biggest fan of it.\n\n170\n00:08:10.970 --> 00:08:12.660\nThey tried to make it look like Windows 8.\n\n171\n00:08:12.660 --> 00:08:15.690\nBut, basically, it asks me for the basics.\n\n172\n00:08:15.690 --> 00:08:19.480\nBasically, that'll be the most\nintelligent sentence in this episode.\n\n173\n00:08:19.480 --> 00:08:22.190\nAnd [LAUGH], it just goes\ndownhill from here, doesn't it?\n\n174\n00:08:22.190 --> 00:08:24.336\nSo then we can choose our issue type.\n\n175\n00:08:24.336 --> 00:08:27.088\nMy issue type is Quota, right?\n\n176\n00:08:27.088 --> 00:08:29.590\nSo there we've got billing,\ntechnical, subscription.\n\n177\n00:08:29.590 --> 00:08:32.120\nBilling, you'll find a lot of websites\nthat tell you to go that route.\n\n178\n00:08:32.120 --> 00:08:33.510\nThat's the old way of doing it.\n\n179\n00:08:33.510 --> 00:08:35.100\nThe new way is to go to Quota.\n\n180\n00:08:35.100 --> 00:08:38.570\nAnd under Quota, you'll see it\nautomatically picked up my subscription.\n\n181\n00:08:38.570 --> 00:08:40.300\nIt's not asking about a service.\n\n182\n00:08:40.300 --> 00:08:43.360\nAnd then it's asking for\na support plan if I've got one.\n\n183\n00:08:43.360 --> 00:08:47.300\nNow, usually you'll have something\nlike Quota support-Included.\n\n184\n00:08:47.300 --> 00:08:50.290\nIt's telling me that I don't have\nto pay for this support ticket.\n\n185\n00:08:50.290 --> 00:08:53.330\nAnd it's not gonna count against\nmy support tickets if I've\n\n186\n00:08:53.330 --> 00:08:55.710\nprepaid through like an Enterprise\nagreement or whatever.\n\n187\n00:08:55.710 --> 00:08:57.250\nThis one's included, free of charge.\n\n188\n00:08:58.350 --> 00:08:59.840\nAll right, when we move forward\n\n189\n00:09:00.960 --> 00:09:03.260\nwe'll be able to specify the rest\nof the information that it needs.\n\n190\n00:09:03.260 --> 00:09:04.420\nOh, I never did choose a service.\n\n191\n00:09:04.420 --> 00:09:05.930\nShoot.\nI'll go ahead and\n\n192\n00:09:05.930 --> 00:09:10.498\nchoose that this is my virtual machines,\nwhich are buried down here.\n\n193\n00:09:10.498 --> 00:09:13.858\nNow when I choose a virtual machine and\nyou know my head's gonna cover up this.\n\n194\n00:09:13.858 --> 00:09:16.064\nLet's pull out a full screen for\na second so\n\n195\n00:09:16.064 --> 00:09:18.980\nwe can see it without my\ngiant noggin in the way.\n\n196\n00:09:18.980 --> 00:09:23.460\nWhen we go to this choose a service, they\nbreak the virtual machines down different\n\n197\n00:09:23.460 --> 00:09:26.990\nways, and it doesn't really matter\nwhich one we choose because the cores\n\n198\n00:09:26.990 --> 00:09:29.160\nare a total quota, independent of OS.\n\n199\n00:09:29.160 --> 00:09:30.700\nBut you wanna pick the one\nyou use the most of.\n\n200\n00:09:30.700 --> 00:09:34.490\nSo like virtual machine running Windows,\nvirtual machine running RedHat, Linux.\n\n201\n00:09:34.490 --> 00:09:37.150\nI'm gonna choose Windows, all right?\n\n202\n00:09:37.150 --> 00:09:39.010\nAnd, now,\nit's got everything that we need.\n\n203\n00:09:39.010 --> 00:09:40.140\nI can click Next.\n\n204\n00:09:40.140 --> 00:09:42.170\nAnd I can go to open up that ticket.\n\n205\n00:09:42.170 --> 00:09:45.660\nAnd the ticket that I want to open up,\nwell, I just need to come in here and\n\n206\n00:09:45.660 --> 00:09:47.200\ntell it what I'm trying to do.\n\n207\n00:09:47.200 --> 00:09:50.460\nI want to increase my\nquota to a certain number.\n\n208\n00:09:50.460 --> 00:09:51.310\nAnd you gotta tell them a number.\n\n209\n00:09:51.310 --> 00:09:52.960\nYou can't say remove the quota.\n\n210\n00:09:52.960 --> 00:09:54.450\nThat's not good enough, right?\n\n211\n00:09:54.450 --> 00:09:58.850\nSo I might tell them that I wanna bump my\ncore quota up to 200 cores cuz I'm about\n\n212\n00:09:58.850 --> 00:10:00.610\nto spin that up.\n\n213\n00:10:00.610 --> 00:10:05.190\nAnd the key thing here is they're gonna\nsend you an email for verification and\n\n214\n00:10:05.190 --> 00:10:09.490\nthat's where if this was a hacker doing\nit you get the email and now you know,\n\n215\n00:10:09.490 --> 00:10:11.790\nrespond real quick say,\nno, no, no, don't do that.\n\n216\n00:10:11.790 --> 00:10:14.120\nThere's a problem,\ngo change your password, right?\n\n217\n00:10:14.120 --> 00:10:16.210\nSo this is that chance to\nkind of cover yourself, but\n\n218\n00:10:16.210 --> 00:10:18.100\nthat core quota is a big deal.\n\n219\n00:10:18.100 --> 00:10:20.900\nIt's gonna get in the way of you\nlaunching a bunch of the apps.\n\n220\n00:10:22.402 --> 00:10:25.770\nAll right so, those are some of\nthe limitations as far as like\n\n221\n00:10:25.770 --> 00:10:29.430\nwhat's being done to our account,\nkind of trimming that back.\n\n222\n00:10:29.430 --> 00:10:31.190\nAnd we can increase them,\nit's not a big deal.\n\n223\n00:10:31.190 --> 00:10:33.870\nThere are a few other things\nwe need to be aware of.\n\n224\n00:10:33.870 --> 00:10:38.150\nI'm gonna call them limitations but\nthey're not really, truly limitation for\n\n225\n00:10:38.150 --> 00:10:42.960\nexample, Windows Azure will only let\nus launch 64-bit virtual machines.\n\n226\n00:10:42.960 --> 00:10:44.980\nSo if you're launching Windows or\n\n227\n00:10:44.980 --> 00:10:49.170\nLinux VMs they gotta be 64-bit,\nnow that's a limit, right?\n\n228\n00:10:49.170 --> 00:10:51.158\nBut not the a common\nsense of a limit like,\n\n229\n00:10:51.158 --> 00:10:54.730\nrunning a 32-bit machine limits\nthe amount of RAM you can have,\n\n230\n00:10:54.730 --> 00:10:57.250\nrunning a 64-bit machine is better so\nwe normally want that,\n\n231\n00:10:57.250 --> 00:11:01.580\nbut maybe you got some particular use\ncase where you need a 32-bit machine.\n\n232\n00:11:01.580 --> 00:11:03.780\nWell then Azure is not right for\nyou, it's not gonna work.\n\n233\n00:11:03.780 --> 00:11:07.450\nThey want you to go 64-bit only, those\nare the only images that they provide.\n\n234\n00:11:07.450 --> 00:11:10.070\nThere actually is a way to make it work,\nbut it's not Microsoft supported.\n\n235\n00:11:10.070 --> 00:11:13.862\nSo, then do some Google searches or\nBing, or whatever.\n\n236\n00:11:13.862 --> 00:11:18.380\n[LAUGH] See what you can find but\nreally, it's 64-Bit only.\n\n237\n00:11:18.380 --> 00:11:22.370\nSome of the other limits Windows Server\nis the primary Operating System.\n\n238\n00:11:22.370 --> 00:11:24.050\nThat's the one they expect you to run.\n\n239\n00:11:24.050 --> 00:11:29.340\nThey only support Windows Server\n2008 R2 with Service Pack one or\n\n240\n00:11:29.340 --> 00:11:31.470\nhigher, you're really, really specific.\n\n241\n00:11:31.470 --> 00:11:36.960\nSo if you need Windows 2008 without R2,\nif you need 2003, they don't support it.\n\n242\n00:11:36.960 --> 00:11:41.632\nIt's gotta be 2008 R2 with\nservice pack one or higher.\n\n243\n00:11:41.632 --> 00:11:46.580\nLinux, I've mentioned a few times that\nwe can actually run Linux in our Azure\n\n244\n00:11:46.580 --> 00:11:50.860\nenvironment, but you can't just\nrun any old version of Linux.\n\n245\n00:11:50.860 --> 00:11:54.903\nSome where in here I've got\nthe Linux Distros, here we go,\n\n246\n00:11:54.903 --> 00:11:56.731\n>> That was the enemy you're talking.\n\n247\n00:11:56.731 --> 00:11:57.880\n[LAUGH]\n>> You know,\n\n248\n00:11:57.880 --> 00:12:01.950\nMicrosoft recognizes that a lot of people\nuse Apache as their web server, and\n\n249\n00:12:01.950 --> 00:12:04.290\nthat Apache is designed to run on Linux.\n\n250\n00:12:04.290 --> 00:12:07.240\nIIS is great, runs on Windows,\nyou can run Apache on Windows,\n\n251\n00:12:07.240 --> 00:12:09.580\nit runs better on Linux, and\nso they do provide that.\n\n252\n00:12:09.580 --> 00:12:11.675\nAnd we saw earlier that\nit's less expensive so\n\n253\n00:12:11.675 --> 00:12:13.780\nyou don't have the base OS cost.\n\n254\n00:12:13.780 --> 00:12:19.150\nBut when we look at it here, they only\nsupport certain distributions of Linux.\n\n255\n00:12:19.150 --> 00:12:21.700\nIf we,\nlet me zoom in on that a little bit.\n\n256\n00:12:21.700 --> 00:12:26.410\nYou'll see Ubuntu, which is a pretty\npopular version of Linux, CentOS,\n\n257\n00:12:26.410 --> 00:12:29.080\nwhich is one of the most popular versions.\n\n258\n00:12:29.080 --> 00:12:30.620\nIt's based on Red Hat.\n\n259\n00:12:30.620 --> 00:12:32.350\nJust in case you're wondering,\n\n260\n00:12:32.350 --> 00:12:36.250\nMicrosoft does not have a really\nfirm partnership with Red Hat yet.\n\n261\n00:12:36.250 --> 00:12:37.340\nThey've been working on it.\n\n262\n00:12:37.340 --> 00:12:41.860\nThere are some Red Hat images\nin the VM gallery that\n\n263\n00:12:41.860 --> 00:12:45.980\nyou can go in and find,\nand bring them down.\n\n264\n00:12:45.980 --> 00:12:49.999\nBut for the most part, they support CentOS\nright now which is built off of Red Hat,\n\n265\n00:12:49.999 --> 00:12:51.920\ncompletely compatible.\n\n266\n00:12:51.920 --> 00:12:55.360\nCoreOS, if any of you guys\nare out there using Docker or\n\n267\n00:12:55.360 --> 00:12:57.710\nRocket, CoreOS is important with those, so\n\n268\n00:12:57.710 --> 00:13:00.920\nyou can get Docker support\nright there by using CoreOS.\n\n269\n00:13:00.920 --> 00:13:04.130\nWe've got Oracle Linux which\nalso is built off of Red Hat,\n\n270\n00:13:04.130 --> 00:13:06.890\nSUSE Linux which is their own independent\nthing that's part of their novel\n\n271\n00:13:06.890 --> 00:13:09.510\npartnership with Microsoft and openSUSE.\n\n272\n00:13:09.510 --> 00:13:12.370\nSo those are the officially\nsupported distros.\n\n273\n00:13:12.370 --> 00:13:13.740\nYou can make your own, and\n\n274\n00:13:13.740 --> 00:13:18.440\nif you go into the VM gallery, you can\nfind like free BSD and even other ones.\n\n275\n00:13:18.440 --> 00:13:20.480\nBut these are the officially\nsupported ones.\n\n276\n00:13:20.480 --> 00:13:24.600\nIf you have a problem with your virtual\nmachine and you're running free BSD, and\n\n277\n00:13:24.600 --> 00:13:27.980\nyou call Microsoft,\nthey're going to say, yes,\n\n278\n00:13:27.980 --> 00:13:30.130\nyou have a problem with\nyour virtual machine.\n\n279\n00:13:30.130 --> 00:13:32.210\nWe wish you the best of luck in fixing it,\nright?\n\n280\n00:13:32.210 --> 00:13:35.090\nBut if you have a problem with CoreOS and\nyou call Microsoft,\n\n281\n00:13:35.090 --> 00:13:37.570\nthey will start troubleshooting,\nthey will work through it.\n\n282\n00:13:37.570 --> 00:13:39.940\nThese are endorsed distributions for them.\n\n283\n00:13:39.940 --> 00:13:47.720\nSo, if you love Linux and you love Red Hat\nwell, you could run Red Hat in Azure.\n\n284\n00:13:47.720 --> 00:13:50.640\nBut you'd be better off running CentOS\nbecause then you're gonna be able\n\n285\n00:13:50.640 --> 00:13:51.830\nto get support from Microsoft.\n\n286\n00:13:51.830 --> 00:13:54.160\nSo, switch it over to CentOS or CoreOS, or\n\n287\n00:13:54.160 --> 00:13:56.920\nwhichever one it is that you want to\nget that implementation done right.\n\n288\n00:13:56.920 --> 00:13:58.740\nSo be aware that, that's a limit also.\n\n289\n00:13:58.740 --> 00:14:01.588\nYou can run other distros but\nthese are the ones that are supported.\n\n290\n00:14:01.588 --> 00:14:05.231\n>> Now Don, I made a joke about them\nbeing in bed with the enemy but\n\n291\n00:14:05.231 --> 00:14:09.156\nit really does make sense on\nMicrosoft's side of the fence to say,\n\n292\n00:14:09.156 --> 00:14:11.628\nwhy don't you pay me to run Linux for you?\n\n293\n00:14:11.628 --> 00:14:14.833\nBecause you're having to pay them\nto spin up a Linux distribution and\n\n294\n00:14:14.833 --> 00:14:18.108\nyou're not having to pay for\nthe license for that, so that's great.\n\n295\n00:14:18.108 --> 00:14:20.621\nAnd you're just giving Microsoft\na little more money, so\n\n296\n00:14:20.621 --> 00:14:24.008\nthey're actually getting a bigger chunk\nof the pie by allowing you to run Linux\n\n297\n00:14:24.008 --> 00:14:26.250\ndistributions on their\nAzure virtual machines.\n\n298\n00:14:26.250 --> 00:14:27.810\n>> Yeah, and they do a good job of it too.\n\n299\n00:14:27.810 --> 00:14:32.080\nThey really have just a great team up\nthere that supports the systems, and\n\n300\n00:14:32.080 --> 00:14:33.000\nthey do a good job.\n\n301\n00:14:33.000 --> 00:14:34.980\nThey're not just doing\nit because they have to.\n\n302\n00:14:34.980 --> 00:14:37.590\nThey're actually doing it because\nthey want to make it better.\n\n303\n00:14:37.590 --> 00:14:41.010\nAll right, a couple of other limitations\nI'll just go through kind of quickly here.\n\n304\n00:14:41.010 --> 00:14:45.430\nEach drive that we create attached to a\nvirtual machine is limited to 127 gigs for\n\n305\n00:14:45.430 --> 00:14:47.020\nthe operating system drive.\n\n306\n00:14:47.020 --> 00:14:49.190\nAnd limited to one terabyte for\ndata drives.\n\n307\n00:14:49.190 --> 00:14:52.798\nYou can have more than one data drive,\nbut it's limited to one terabyte each, so\n\n308\n00:14:52.798 --> 00:14:53.608\nthat's a limit.\n\n309\n00:14:53.608 --> 00:14:58.168\nYour virtual hard drives, your VHDs,\nthey cannot be shared between VMs.\n\n310\n00:14:58.168 --> 00:15:01.162\nIf you wanna use that, there's a different\nservice called Azure Files that you can\n\n311\n00:15:01.162 --> 00:15:03.298\nuse and\nthat'll let you share data between them.\n\n312\n00:15:03.298 --> 00:15:05.320\nBut the VHDs themselves\nhave to be tied to one VM,\n\n313\n00:15:05.320 --> 00:15:07.820\nand one VM only as you build it out.\n\n314\n00:15:07.820 --> 00:15:12.190\nSo if you're doing clusters, you can't\nreally do shared storage with the VHD.\n\n315\n00:15:12.190 --> 00:15:14.380\nYou can do it with iSCSI or\nother solutions.\n\n316\n00:15:14.380 --> 00:15:17.170\nBut you really don't need a cluster\nwhen it's running on top of Azure\n\n317\n00:15:17.170 --> 00:15:17.998\nin the first place.\n\n318\n00:15:17.998 --> 00:15:22.178\nSo usually it just means you need to\nmaybe do a little bit of redesigning.\n\n319\n00:15:22.178 --> 00:15:24.480\nThe network is IPv4 only.\n\n320\n00:15:24.480 --> 00:15:27.270\nSo they don't do IPv6 in Azure just yet.\n\n321\n00:15:27.270 --> 00:15:29.820\nAlthough you can have more than\none network card if you want.\n\n322\n00:15:29.820 --> 00:15:32.250\nThey're all gonna be tied to IPv4.\n\n323\n00:15:32.250 --> 00:15:37.830\nOn the smaller instances, they limit you\nto one network card unlike the basic tier.\n\n324\n00:15:37.830 --> 00:15:40.889\nBut when we get into the standard tier,\nwe'll see we have support for\n\n325\n00:15:40.889 --> 00:15:41.849\nmore network cards.\n\n326\n00:15:41.849 --> 00:15:44.985\nAnd then no multicast or broadcast\ntraffic, everything has to be unicast so\n\n327\n00:15:44.985 --> 00:15:48.709\nif you got any kind of broadcasting stuff,\nyou're trying to do Wake-On-Lan whatever,\n\n328\n00:15:48.709 --> 00:15:51.858\nthat's not gonna work inside of Azure,\nthat's all filtered out, right?\n\n329\n00:15:51.858 --> 00:15:54.403\nBecause they're trying to isolate\nall the customer traffic.\n\n330\n00:15:54.403 --> 00:15:57.743\nAll right, Don, so you kinda mentioned\nthis just a second ago when you were\n\n331\n00:15:57.743 --> 00:16:00.380\ntalking about the Basic Tier and\nthe Standard Tier.\n\n332\n00:16:00.380 --> 00:16:02.780\nThat kinda brings us into the types.\n\n333\n00:16:02.780 --> 00:16:07.320\nWe need to know and we need to understand\nthe different types of Azure virtual\n\n334\n00:16:07.320 --> 00:16:12.070\nmachines that are available to us so\nwe kinda know where we're supposed to go\n\n335\n00:16:12.070 --> 00:16:16.590\nbased on or built upon our environment and\nour needs, right?\n\n336\n00:16:16.590 --> 00:16:20.190\n>> Yeah, and you might have noticed when\nI brought up the pricing page in the,\n\n337\n00:16:20.190 --> 00:16:23.430\nwell I guess it was in the last episode,\nwe kinda saw a little mention in there\n\n338\n00:16:23.430 --> 00:16:26.830\nabout whether we were doing something\non the Basic Tier or the Standard Tier.\n\n339\n00:16:26.830 --> 00:16:28.800\nAnd so\nlike as I look at the pricing page here,\n\n340\n00:16:28.800 --> 00:16:32.900\nsee how it says General\npurpose compute: Basic tier.\n\n341\n00:16:32.900 --> 00:16:37.570\nAnd then as I scroll down,\nGeneral purpose compute: Standard tier.\n\n342\n00:16:37.570 --> 00:16:41.340\nAnd up here I've got, let's do the A4.\n\n343\n00:16:41.340 --> 00:16:45.468\nThat A4 machine I talked about,\n8 cores, 14 GB of RAM,\n\n344\n00:16:45.468 --> 00:16:51.560\n240 GB hard drive, 59.2 cents an hour,\nright, so 60 cents an hour.\n\n345\n00:16:51.560 --> 00:16:56.543\nBut then when I go down to the standard\ntier, that same A4, 8 cores,\n\n346\n00:16:56.543 --> 00:16:59.680\n14 GB of RAM, 605 GB hard drive space.\n\n347\n00:16:59.680 --> 00:17:02.520\nLarger hard drive, 72 cents an hour.\n\n348\n00:17:02.520 --> 00:17:06.450\nIt's just a little bit more expensive.\n\n349\n00:17:06.450 --> 00:17:08.890\nI got more hard drive space out of it,\nso I guess that's why, right?\n\n350\n00:17:08.890 --> 00:17:10.810\nWell, it's actually a little\nbit more than that.\n\n351\n00:17:10.810 --> 00:17:14.790\nThe Basic Tier and the Standard Tier\nare really performance tiers.\n\n352\n00:17:14.790 --> 00:17:16.200\nAnd I made a little table here.\n\n353\n00:17:16.200 --> 00:17:18.617\nI couldn't find a good one on the\nMicrosoft site, so I had to make my own.\n\n354\n00:17:18.617 --> 00:17:21.290\nSo I'm sorry,\nit's not the prettiest table in the world.\n\n355\n00:17:21.290 --> 00:17:23.960\nBut what I did is I\ntook the Basic Tier and\n\n356\n00:17:23.960 --> 00:17:26.910\nI compared that against the Standard Tier,\nall right?\n\n357\n00:17:26.910 --> 00:17:30.100\nIn the Basic Tier there's certain\nfeatures that aren't available.\n\n358\n00:17:30.100 --> 00:17:33.470\nFor example Load Balancing and\nAuto Scaling, right?\n\n359\n00:17:33.470 --> 00:17:36.350\nLoad Balancing is where we distribute\nour customer traffic that cost more\n\n360\n00:17:36.350 --> 00:17:37.960\nthan one server evenly.\n\n361\n00:17:37.960 --> 00:17:41.100\nAnd you can do that in the Standard Tier,\nyou can't do it in the Basic Tier.\n\n362\n00:17:41.100 --> 00:17:45.370\nAuto Scaling is where I say if one server\ngets too busy, spin up a clone of it.\n\n363\n00:17:45.370 --> 00:17:47.238\nAnd if it gets too busy,\nspin up another clone.\n\n364\n00:17:47.238 --> 00:17:47.875\nAuto Scale,\n\n365\n00:17:47.875 --> 00:17:51.520\nright, and it'll do that automatically\nwhich is awesome in the Standard Tier.\n\n366\n00:17:52.760 --> 00:17:55.680\nMultiple network cards, that's\nthe one I mentioned just a second ago.\n\n367\n00:17:55.680 --> 00:17:58.830\nIn the Basic Tier you can only have one,\nIn the Standard Tier you can have\n\n368\n00:17:58.830 --> 00:18:02.058\nmultiple, as many as your\noperating system supports.\n\n369\n00:18:02.058 --> 00:18:05.320\nAnd then Backup/Restore, there's actually\nno backup and restore functionality for\n\n370\n00:18:05.320 --> 00:18:08.470\nthe Basic Tier because they're designed\nto be temporary servers, right?\n\n371\n00:18:08.470 --> 00:18:10.980\nYou're testing something out,\ntrying to do, hey, I saw this on TV,\n\n372\n00:18:10.980 --> 00:18:13.070\nlet me give it a shot, that kind of stuff.\n\n373\n00:18:13.070 --> 00:18:15.710\nBut in the Standard Tier,\nwe have that full backup and restore.\n\n374\n00:18:15.710 --> 00:18:19.260\nNow those reasons right there are usually\nenough to make you go Standard Tier over\n\n375\n00:18:19.260 --> 00:18:23.260\nBasic, but there's a few other things,\nfor example, CPU performance.\n\n376\n00:18:23.260 --> 00:18:25.800\nThe Basic Tier gets reduced CPU.\n\n377\n00:18:25.800 --> 00:18:30.090\nAny virtual machine in the Standard Tier\ngets priority on the CPU over Basic.\n\n378\n00:18:30.090 --> 00:18:34.070\nSo with the basic you might have one core,\nor two cores, or four cores, but\n\n379\n00:18:34.070 --> 00:18:35.250\nyou don't have them 100% of the time.\n\n380\n00:18:35.250 --> 00:18:37.860\nYou're sharing them with\nother virtual machines.\n\n381\n00:18:38.990 --> 00:18:43.980\nAnd then the input output operations per\nsecond, this is for our disk performance,\n\n382\n00:18:43.980 --> 00:18:46.700\nhow much data you can read,\nhow much data you can write per second.\n\n383\n00:18:46.700 --> 00:18:50.890\nAnd you'll see that in\nthe Basic Tier you get 300 IOPS and\n\n384\n00:18:50.890 --> 00:18:52.540\nthe Standard Tier you get 500.\n\n385\n00:18:52.540 --> 00:18:55.910\nSo you get almost double the amount\nof input output operations,\n\n386\n00:18:55.910 --> 00:18:57.859\nwhich means you're gonna get\nbetter disk accessing speed.\n\n387\n00:18:59.040 --> 00:19:00.260\nAnd then Web Sockets.\n\n388\n00:19:00.260 --> 00:19:04.840\nIf you bring up a web server or\nsome kind of web service on a Basic Tier,\n\n389\n00:19:04.840 --> 00:19:08.210\nit can only support 350 concurrent\nconnections, under Standard Tier,\n\n390\n00:19:08.210 --> 00:19:09.580\nit's unlimited, right?\n\n391\n00:19:09.580 --> 00:19:10.930\nThose are the major differences.\n\n392\n00:19:10.930 --> 00:19:13.858\nThere are some other differences if we\nreally wanted to get nit-picky, but\n\n393\n00:19:13.858 --> 00:19:16.420\nthese are the main ones, and\nthese are usually the ones that'll be\n\n394\n00:19:16.420 --> 00:19:18.731\nthe decision-maker of whether\nyou go Basic and Standard.\n\n395\n00:19:18.731 --> 00:19:21.130\nBut, you got us all on the pricing here.\n\n396\n00:19:21.130 --> 00:19:27.862\nIn the scenario of this A4, it was only 3\ncents, or really 2.2 cents an hour more.\n\n397\n00:19:27.862 --> 00:19:32.510\nIt really wasn't much more to do, and\nover time it does add up, I guess,\n\n398\n00:19:32.510 --> 00:19:34.150\nbut it doesn't add up to much.\n\n399\n00:19:34.150 --> 00:19:36.860\nAnd so it makes since to just go\nwith the Standard Tier to get that\n\n400\n00:19:36.860 --> 00:19:37.980\nproper performance.\n\n401\n00:19:37.980 --> 00:19:40.060\nFor me it's the backup and restore part.\n\n402\n00:19:40.060 --> 00:19:44.100\nI kind of need that, and so\nthe Basic Tier is kind of out for me.\n\n403\n00:19:44.100 --> 00:19:46.900\n>> Not a good day when your data's gone.\n\n404\n00:19:46.900 --> 00:19:50.730\nThat's a bad thing, so having\nthe backup and restore, kind of nice.\n\n405\n00:19:50.730 --> 00:19:52.190\nIt's a feature we want.\n\n406\n00:19:52.190 --> 00:19:54.180\n>> So when we create a virtual\nmachine that's one of the first\n\n407\n00:19:54.180 --> 00:19:54.940\ndecisions we have to make.\n\n408\n00:19:54.940 --> 00:19:56.860\nDo I want to go basic or\ndo I wanna go standard?\n\n409\n00:19:56.860 --> 00:19:58.630\nAnd it's usually an easy decision.\n\n410\n00:19:58.630 --> 00:20:00.310\nAfter that we've got more to decide.\n\n411\n00:20:00.310 --> 00:20:03.470\nGoing back to this pricing\npage up here at the top,\n\n412\n00:20:03.470 --> 00:20:08.040\nI had General purpose compute: Basic tier,\nall right?\n\n413\n00:20:08.040 --> 00:20:09.800\nNow Basic Tier,\nI just explained what that meant.\n\n414\n00:20:09.800 --> 00:20:13.190\nBut General purpose compute,\nlet's talk about that, all right?\n\n415\n00:20:13.190 --> 00:20:15.690\nMicrosoft virtual machines\nare assigned a letter\n\n416\n00:20:15.690 --> 00:20:18.570\nthat identifies what they're intended for,\nokay?\n\n417\n00:20:18.570 --> 00:20:21.160\nThe letter A represents\nGeneral purpose compute,\n\n418\n00:20:21.160 --> 00:20:24.040\nand that means that this\nis a pretty average server.\n\n419\n00:20:24.040 --> 00:20:25.570\nIt's designed for the average use.\n\n420\n00:20:25.570 --> 00:20:30.690\nIf you wanna build a web server,\na file server, a image processing server,\n\n421\n00:20:30.690 --> 00:20:35.290\nif you want to build a Minecraft server,\nthese are just general purpose,\n\n422\n00:20:35.290 --> 00:20:36.028\nthese will work for you.\n\n423\n00:20:36.028 --> 00:20:41.750\nThey use SSDs for their temp storage,\nbut they might not use SSD for\n\n424\n00:20:41.750 --> 00:20:44.290\ntheir operating system storage, or they\nmight not use it for the data storage,\n\n425\n00:20:44.290 --> 00:20:46.790\nright, so they might not use\nfully optimized storage.\n\n426\n00:20:46.790 --> 00:20:50.700\nBut they've got pretty good performance,\npretty typical usage.\n\n427\n00:20:50.700 --> 00:20:53.540\nWith Basic tier,\nthat usage is a little bit reduced.\n\n428\n00:20:53.540 --> 00:20:57.070\nWith Standard tier,\nit's running at full performance, okay?\n\n429\n00:20:57.070 --> 00:21:00.620\nNow notice under the Basic tier I have A0\nthrough A4, and the difference between\n\n430\n00:21:00.620 --> 00:21:04.770\neach one is simply how many cores, how\nmuch memory, how much disk space I have.\n\n431\n00:21:04.770 --> 00:21:08.540\nWhen we move to the next tier here,\nthe Standard tier,\n\n432\n00:21:08.540 --> 00:21:12.380\nI have A0 through A4 and 5, 6, and 7.\n\n433\n00:21:12.380 --> 00:21:15.850\nThere's actually more\ntiers here under Standard.\n\n434\n00:21:15.850 --> 00:21:18.520\nAnd the reason is on the back end\nMicrosoft has to provision hardware for\n\n435\n00:21:18.520 --> 00:21:23.360\nthis, and they're just provisioning more\nStandard tier hardware than they are Basic\n\n436\n00:21:23.360 --> 00:21:26.680\ntier hardware, and so\nwe have more levels to pick from.\n\n437\n00:21:26.680 --> 00:21:30.780\nSo that A tells me it's a general\npurpose machine, and then the number\n\n438\n00:21:30.780 --> 00:21:34.790\nafter that just represents how much in\nthe way of resources it has, right.\n\n439\n00:21:34.790 --> 00:21:38.090\nSo for most of us, the A isn't\nwhat we're gonna work with, right?\n\n440\n00:21:38.090 --> 00:21:40.341\nA4 or A5 or whatever it is,\nwe deploy our servers and\n\n441\n00:21:40.341 --> 00:21:42.420\nget them out there in business.\n\n442\n00:21:42.420 --> 00:21:44.140\nBut there's other tiers\nthat are available.\n\n443\n00:21:44.140 --> 00:21:51.620\nIf I scroll down, you'll see next,\nI get the Optimized compute, okay..\n\n444\n00:21:51.620 --> 00:21:53.220\nOptimize compute is the next here.\n\n445\n00:21:53.220 --> 00:21:57.163\nSo we had General purpose comute,\ncomute, compute, whatever it is, and\n\n446\n00:21:57.163 --> 00:21:59.113\nthen we've got Optimized compute.\n\n447\n00:21:59.113 --> 00:22:02.683\nThese are actually almost\nidentical to the A series, right,\n\n448\n00:22:02.683 --> 00:22:07.092\nas far as what's being assigned, but\nit's designed to be faster, right?\n\n449\n00:22:07.092 --> 00:22:10.993\nSo 60% faster than the A series,\nwith an asterisk, right?\n\n450\n00:22:10.993 --> 00:22:12.850\n>> [LAUGH]\n>> Your mileage may vary,\n\n451\n00:22:12.850 --> 00:22:14.580\nbut the point is, it is faster.\n\n452\n00:22:14.580 --> 00:22:18.250\nYou have more memory and local SSD.\n\n453\n00:22:18.250 --> 00:22:20.840\nThese are guaranteed to be using\nsolid state digital drives,\n\n454\n00:22:20.840 --> 00:22:22.750\nwhich are gonna have faster disk I-O.\n\n455\n00:22:22.750 --> 00:22:25.330\nIt also means they're\ngonna be more expensive.\n\n456\n00:22:25.330 --> 00:22:30.330\nIf I look at a D1, for instance,\na D1 has 1 core and 3.5 GB of RAM,\n\n457\n00:22:30.330 --> 00:22:32.560\n13 cents an hour, right?\n\n458\n00:22:32.560 --> 00:22:38.770\nIf I went up here to 1 core, 3.5 GB of\nRAM, I don't even have that choice, right?\n\n459\n00:22:38.770 --> 00:22:40.810\nI have to go to 2 cores, 3.5 GB of RAM,\n\n460\n00:22:40.810 --> 00:22:43.892\nand that's where I'd end up\nat 18 cents an hour here.\n\n461\n00:22:43.892 --> 00:22:46.440\nSo those are kind of the choices\nwe have to make, but\n\n462\n00:22:46.440 --> 00:22:51.070\nit is more expensive down here because\nyou're getting higher performance.\n\n463\n00:22:51.070 --> 00:22:56.730\nNow where the performance really comes\nin is as far as like faster CPU,\n\n464\n00:22:56.730 --> 00:22:59.800\nunder the hood,\nthese are all running on Intel Xeons, and\n\n465\n00:22:59.800 --> 00:23:03.740\nthese will be newer, higher megahertz\nXeons or higher gigahertz Xeons.\n\n466\n00:23:03.740 --> 00:23:07.450\nSo that's where real performance comes in,\nthe SSDs helps also.\n\n467\n00:23:07.450 --> 00:23:12.460\nWhen you provision this, most of these\nare just called Ds, but there are DS.\n\n468\n00:23:12.460 --> 00:23:15.900\nAnd the DS is where you have\nsolid state for the whole thing.\n\n469\n00:23:15.900 --> 00:23:21.160\nWhen you do a regular D, the operating\nsystem is usually still magnetic.\n\n470\n00:23:21.160 --> 00:23:26.160\nThe temp drive will be SSD,\nand the data drives that you\n\n471\n00:23:26.160 --> 00:23:30.640\nadd will be SSD, but the operating system\npartition, itself, may still be magnetic.\n\n472\n00:23:30.640 --> 00:23:34.120\nWhen you do a DS, it's all SSD,\nthe whole shebang.\n\n473\n00:23:34.120 --> 00:23:37.710\nSo DS is just a modified version of D, but\n\n474\n00:23:37.710 --> 00:23:39.510\nthese are designed to give\nyou better performance.\n\n475\n00:23:39.510 --> 00:23:43.830\nSo when CPU performance, and\nmaybe even disk I-O to an extent,\n\n476\n00:23:43.830 --> 00:23:47.500\nis what your need is,\nthe D-Series is what you go to.\n\n477\n00:23:47.500 --> 00:23:51.077\nAnd that was the Optimized compute.\n\n478\n00:23:51.077 --> 00:23:53.547\nThere's one more tier and\nthat's the G-Series.\n\n479\n00:23:53.547 --> 00:23:57.130\nAnd if we go down a little bit further,\nOh shoot, I forgot to mention the V2s.\n\n480\n00:23:57.130 --> 00:23:59.241\nDad gum it, I hate missing these things.\n\n481\n00:23:59.241 --> 00:24:03.570\nWith the D-series,\nthere's D version one and D version two.\n\n482\n00:24:03.570 --> 00:24:05.750\nThe ones I showed you a second ago,\nthose were version one.\n\n483\n00:24:05.750 --> 00:24:06.545\nVersion two,\n\n484\n00:24:06.545 --> 00:24:11.527\nthese are 35% faster than D-series which\nwas already 60% faster than A-series.\n\n485\n00:24:11.527 --> 00:24:13.014\nWe're just getting so fast, right?\n\n486\n00:24:13.014 --> 00:24:15.515\nAnd if you read here it will tell you,\n\n487\n00:24:15.515 --> 00:24:21.492\nthese have the latest 2.4 gigahertz\nIntel Xeon E5-2673 processors, right so\n\n488\n00:24:21.492 --> 00:24:26.820\nthese are higher end processors that can\ngo all the way up to 3.2 gigahertz so\n\n489\n00:24:26.820 --> 00:24:30.078\nif CPU is your concern,\ngo with a v2s, right.\n\n490\n00:24:30.078 --> 00:24:34.370\nIf disk I/O or RAM is your concern, don't\nbother with the v2 you're gonna pay more\n\n491\n00:24:34.370 --> 00:24:36.960\nand you're not gonna get\nbenefit out of it, right?\n\n492\n00:24:36.960 --> 00:24:42.190\nBut if it's compute, if it's CPU that you\nwant, the V2 is that's the way to go.\n\n493\n00:24:42.190 --> 00:24:43.890\nAll right, then,\n\n494\n00:24:43.890 --> 00:24:47.540\nunless they sprung up a new level on\nme on the G series I was talking about.\n\n495\n00:24:47.540 --> 00:24:51.070\nAnd the G series are performance\noptimized compute.\n\n496\n00:24:52.310 --> 00:24:55.110\nThese are the ones that\nare really geared to memory.\n\n497\n00:24:56.150 --> 00:24:59.570\nLatest CPUs is just\nthe best that you can get.\n\n498\n00:24:59.570 --> 00:25:06.500\nMore memory, more local SSD, all Intel\nZion E5s, version 3 is the high end ones.\n\n499\n00:25:06.500 --> 00:25:09.910\nThere is a GS which is\nthe optimized SSD but\n\n500\n00:25:09.910 --> 00:25:14.120\neven the regular G series has SSD in it,\nand these are the most expensive.\n\n501\n00:25:14.120 --> 00:25:18.860\nNotice the lowest model I have,\nthe G1, 2 cores, 28 gigs of RAM, right?\n\n502\n00:25:18.860 --> 00:25:22.200\nThat's a lot of memory for just a single\nserver and it goes up from there\n\n503\n00:25:22.200 --> 00:25:27.216\nas much as 448 gigs of RAM because, well,\nMinecraft takes a lot of memory, right?\n\n504\n00:25:27.216 --> 00:25:28.126\n>> It does that.\n\n505\n00:25:28.126 --> 00:25:31.600\n>> Well, keep in mind that when you deploy\nsomething like a web server, if it starts\n\n506\n00:25:31.600 --> 00:25:35.790\ngetting bogged down, you got two choices,\nyou can scale up or you can scale out.\n\n507\n00:25:35.790 --> 00:25:37.740\nAnd Azure really wants you to scale out.\n\n508\n00:25:37.740 --> 00:25:40.360\nAdd more of the same server, right?\n\n509\n00:25:40.360 --> 00:25:43.096\nBut you can scale up, and\nthis would be the upper limit right here.\n\n510\n00:25:43.096 --> 00:25:45.741\n32 cores, 448 gigs of RAM,\n\n511\n00:25:45.741 --> 00:25:50.750\nthat's the highest you can get\nas of this moment on Azure.\n\n512\n00:25:50.750 --> 00:25:52.650\nBy the time you watch this episode\nthey might have added more.\n\n513\n00:25:52.650 --> 00:25:53.980\nWho knows?\nMemory does get cheaper,\n\n514\n00:25:53.980 --> 00:25:55.540\nbut that's kind of the higher one.\n\n515\n00:25:55.540 --> 00:25:58.570\nAnd it's gonna cost you $8.78 an hour.\n\n516\n00:25:58.570 --> 00:26:03.130\nMaybe I need a Thunder Lizard\ncomputer like that just for a day.\n\n517\n00:26:03.130 --> 00:26:05.520\nAnd so I could do that,\nit would cost me $200.\n\n518\n00:26:05.520 --> 00:26:11.497\nSo for $200 I could have this amazing\nserver that might cost 30 or $40,000.\n\n519\n00:26:11.497 --> 00:26:13.772\nBut I can have it for one day,\nspend that 200 bucks and\n\n520\n00:26:13.772 --> 00:26:16.110\nthen turn it back into Microsoft and\nit's done, right?\n\n521\n00:26:16.110 --> 00:26:17.880\nThat's kind of the really advantage here.\n\n522\n00:26:17.880 --> 00:26:20.151\n>> By Grabthar's hammer, what a savings.\n\n523\n00:26:20.151 --> 00:26:21.472\n[LAUGH]\n>> With great\n\n524\n00:26:21.472 --> 00:26:23.600\npower comes great responsibility.\n\n525\n00:26:23.600 --> 00:26:25.610\nSo it's a lot, and, what the heck is that?\n\n526\n00:26:25.610 --> 00:26:27.930\nIt's a Gibibyte?\n\n527\n00:26:27.930 --> 00:26:28.636\nThat's got to be a typo right?\n\n528\n00:26:28.636 --> 00:26:29.940\n>> Yeah.\n[LAUGH] So, anyhow,\n\n529\n00:26:29.940 --> 00:26:33.952\nit's probably a higher, you know the\nmeasure that I'm just familiar with, but\n\n530\n00:26:33.952 --> 00:26:36.020\nit really does have a lot of performance.\n\n531\n00:26:36.020 --> 00:26:38.160\nSo, let's kind of recap this.\n\n532\n00:26:38.160 --> 00:26:41.310\nWe had to make the decision between\na basic and a standard tier.\n\n533\n00:26:41.310 --> 00:26:43.910\nBasic tier is designed to be temporary,\nlow performance,\n\n534\n00:26:43.910 --> 00:26:45.460\nusually test R and D, right?\n\n535\n00:26:45.460 --> 00:26:47.784\n>> The Ford Pinto [LAUGH].\n\n536\n00:26:47.784 --> 00:26:51.650\n>> If you wanna pretend like you're\ndriving without actually driving.\n\n537\n00:26:51.650 --> 00:26:54.380\nThe standard tier, that's where\nwe get our higher performance.\n\n538\n00:26:54.380 --> 00:26:58.000\nThat's where we really start to get our,\nwhat we expect Azure to be, so\n\n539\n00:26:58.000 --> 00:27:00.180\nmost of us are gonna go all standard tier.\n\n540\n00:27:00.180 --> 00:27:03.150\nThe A series,\nthat's the general compute servers.\n\n541\n00:27:03.150 --> 00:27:04.550\nThose are what most of\nus are gonna use for\n\n542\n00:27:04.550 --> 00:27:07.820\nour servers, unless we need\nthe performance optimized right?\n\n543\n00:27:07.820 --> 00:27:11.150\nIf you need fast, right,\nCPU storage whatever,\n\n544\n00:27:11.150 --> 00:27:15.370\nyou step into the D series,\nthe D series is gonna get you there.\n\n545\n00:27:15.370 --> 00:27:19.879\nBut if you need tons of RAM, if you need\nthe best disk performance possible if\n\n546\n00:27:19.879 --> 00:27:24.747\nyou need the ultimate performance machine,\nthat's where the G series comes in.\n\n547\n00:27:24.747 --> 00:27:26.669\nAnd I'll be honest with you guys,\n\n548\n00:27:26.669 --> 00:27:29.719\nof all the Azure environments\nthat I have worked with,\n\n549\n00:27:29.719 --> 00:27:34.800\nI can't think of one that has a single\nG series server spun up at this moment.\n\n550\n00:27:34.800 --> 00:27:37.850\nThey're typically things that you\nspin up on a particular need not\n\n551\n00:27:37.850 --> 00:27:39.710\nsomething you run for a long time.\n\n552\n00:27:39.710 --> 00:27:43.730\nBecause, it's expensive to run one of\nthese 24 hours a day, 31 days a month,\n\n553\n00:27:43.730 --> 00:27:46.220\n365 days a year, right, it gets expensive.\n\n554\n00:27:46.220 --> 00:27:50.760\nSo instead, you normally run the lower\nend servers, the Ds or the As and\n\n555\n00:27:50.760 --> 00:27:52.140\nyou auto scale.\n\n556\n00:27:52.140 --> 00:27:56.280\nSo you might be running ten As today and\ntwo As tomorrow.\n\n557\n00:27:56.280 --> 00:28:00.600\nVerses one G5 that you run day after day\nafter day, it's just really expensive and\n\n558\n00:28:00.600 --> 00:28:01.930\nyou don't get a lot of flexibility.\n\n559\n00:28:01.930 --> 00:28:04.960\nSo while we have that power,\nit's usually universities,\n\n560\n00:28:04.960 --> 00:28:06.840\npeople that are doing scientific studies.\n\n561\n00:28:06.840 --> 00:28:08.550\nPeople that are doing number crunching.\n\n562\n00:28:08.550 --> 00:28:13.050\nThe US Census or something like\nthat where they have tons and tons,\n\n563\n00:28:13.050 --> 00:28:15.370\nterabytes of data they need processed.\n\n564\n00:28:15.370 --> 00:28:18.530\nThey're the one's who are using these\nG series, not the average person.\n\n565\n00:28:18.530 --> 00:28:20.300\n>> So sticking with our car analogy,\n\n566\n00:28:20.300 --> 00:28:24.670\nwe really do have that A series which\nis more like, but should be Cobalt.\n\n567\n00:28:24.670 --> 00:28:25.205\nSo you know,\n\n568\n00:28:25.205 --> 00:28:28.930\nthat every day driver is going to give you\nthe performance that you're looking for.\n\n569\n00:28:28.930 --> 00:28:30.800\nGeneral, just don't ever\nhave to worry about it,\n\n570\n00:28:30.800 --> 00:28:33.020\nand then you want to move\ninto that more performance,\n\n571\n00:28:33.020 --> 00:28:36.420\nthe D series is gonna be more like\nthe Camaros and the Corvettes.\n\n572\n00:28:36.420 --> 00:28:39.636\nAnd then you've got G which is like\na Ferrari, which is all the bells and\n\n573\n00:28:39.636 --> 00:28:41.470\nwhistles plus the horsepower to spare.\n\n574\n00:28:41.470 --> 00:28:44.905\n>> And that's really it, and you know\nthe neat part about this is you're gonna\n\n575\n00:28:44.905 --> 00:28:48.605\nactually change a virtual machine from\none series to another if you want.\n\n576\n00:28:48.605 --> 00:28:50.255\nNow it does cause some down time, right?\n\n577\n00:28:50.255 --> 00:28:52.675\nThink about if you had\na physical server and\n\n578\n00:28:52.675 --> 00:28:55.615\nyou wanted to upgrade it from 8\ngigs of RAM to 16 gigs of RAM.\n\n579\n00:28:55.615 --> 00:28:57.685\nCould you do it while it was powered on?\n\n580\n00:28:57.685 --> 00:28:59.165\nYou'd have to power it off, right?\n\n581\n00:28:59.165 --> 00:29:01.460\nWell, same thing goes for Azure.\n\n582\n00:29:01.460 --> 00:29:04.070\nYou can change it from one\nseries to another, but\n\n583\n00:29:04.070 --> 00:29:07.450\nit's gonna have to turn off while\nyou do it because on the back end,\n\n584\n00:29:07.450 --> 00:29:09.030\nit's actually moving you\nto different hardware.\n\n585\n00:29:09.030 --> 00:29:11.450\nAnd it's gotta recognize\nthose faster CPUs.\n\n586\n00:29:11.450 --> 00:29:15.180\nIt's gotta recognize that stuff and\nit takes time to do it.\n\n587\n00:29:15.180 --> 00:29:21.130\nSo, if you can afford the down time, then\nyou can have machine spun up as a D1 and\n\n588\n00:29:21.130 --> 00:29:24.970\nthen you can shut it down and\nbring it up as a D8.\n\n589\n00:29:24.970 --> 00:29:27.120\nWait, did I go up higher than what's\nactually supported, is there a D8?\n\n590\n00:29:27.120 --> 00:29:27.850\nYeah, there's a D8.\n\n591\n00:29:27.850 --> 00:29:30.809\nOkay, just trying to make sure I'm not\nmaking stuff, oh, there isn't a D8.\n\n592\n00:29:30.809 --> 00:29:32.249\n>> [LAUGH]\n>> Darn it.\n\n593\n00:29:32.249 --> 00:29:37.910\nSo D11, so I take that D1, I shut it down,\nI turn it back on as a D11, great.\n\n594\n00:29:37.910 --> 00:29:40.310\nOkay, you can do that but\nthere is downtime.\n\n595\n00:29:40.310 --> 00:29:43.680\nIf you don't want downtime,\nthat's where auto scaling comes in.\n\n596\n00:29:43.680 --> 00:29:47.270\nI have one server, and\nI need it to do more work, I clone it,\n\n597\n00:29:47.270 --> 00:29:48.330\nnow I have ten servers.\n\n598\n00:29:48.330 --> 00:29:49.680\nI get my more work done and\n\n599\n00:29:49.680 --> 00:29:52.390\nwhen it's done I shut down nine of\nthose servers, I'm back to one.\n\n600\n00:29:52.390 --> 00:29:54.080\nYou can do that with no downtime.\n\n601\n00:29:54.080 --> 00:29:56.650\nSo scaling out, right, auto scaling,\n\n602\n00:29:56.650 --> 00:29:59.660\nadding more of a server, that's\nthe way to do it, with no down time.\n\n603\n00:29:59.660 --> 00:30:01.780\nThat's the way Microsoft\nwants you to do it.\n\n604\n00:30:01.780 --> 00:30:04.430\nThese guys moving from\none tier to another,\n\n605\n00:30:04.430 --> 00:30:06.730\nit's not particularly user friendly.\n\n606\n00:30:06.730 --> 00:30:08.000\nYou will have down time.\n\n607\n00:30:08.000 --> 00:30:12.760\nSo again, non-mission critical stuff,\nnon-24/7 things, temporary activities,\n\n608\n00:30:12.760 --> 00:30:13.450\ndata processing.\n\n609\n00:30:13.450 --> 00:30:15.510\nThat's really what those\nhigher tiers are designed for.\n\n610\n00:30:15.510 --> 00:30:16.070\n>> Well, awesome.\n\n611\n00:30:16.070 --> 00:30:18.740\nNow hopefully everybody out there,\nand myself included,\n\n612\n00:30:18.740 --> 00:30:22.360\nunderstands a little more about how\nMicrosoft is tiering these things so\n\n613\n00:30:22.360 --> 00:30:24.940\nwe understand the difference\nbetween the basic and the standard.\n\n614\n00:30:24.940 --> 00:30:27.190\nAnd then, of course the As,\nthe Ds, and the Gs.\n\n615\n00:30:27.190 --> 00:30:29.510\nSo we see where the performance lies.\n\n616\n00:30:29.510 --> 00:30:33.530\nWhat's gonna be the best solution for\nwhat I need, and\n\n617\n00:30:33.530 --> 00:30:34.990\nI can pick and choose as necessary.\n\n618\n00:30:34.990 --> 00:30:37.760\nAnd if there are ever changes,\nlike Don said, we just scale it up or\n\n619\n00:30:37.760 --> 00:30:39.645\nscale it out as necessary.\n\n620\n00:30:39.645 --> 00:30:42.470\nDon, any parting words of wisdom for\nour viewers?\n\n621\n00:30:42.470 --> 00:30:43.850\n>> One thing I've forgot\nto mention though,\n\n622\n00:30:43.850 --> 00:30:47.920\nthe whole time I was on that page,\nI was in the US East region.\n\n623\n00:30:47.920 --> 00:30:52.800\nWhen you start moving to other regions,\nwhat you'll find is that not\n\n624\n00:30:52.800 --> 00:30:56.160\nevery instance type is\nsupported in every region.\n\n625\n00:30:56.160 --> 00:31:00.510\nSo, I saw all the way through D14 on mine,\nand then I saw those V2s.\n\n626\n00:31:00.510 --> 00:31:01.700\nYou might go to a data center and\n\n627\n00:31:01.700 --> 00:31:05.630\nfind that it only goes through D12,\nand that there are no V2s, right?\n\n628\n00:31:05.630 --> 00:31:09.750\nAnd that's because Microsoft has to deploy\ndifferent hardware to support those types,\n\n629\n00:31:09.750 --> 00:31:13.080\nthose VM types, and that hardware might\nnot be present in that data center.\n\n630\n00:31:13.080 --> 00:31:17.780\nSo be aware that you won't always\nsee all the types in every region,\n\n631\n00:31:17.780 --> 00:31:19.470\nyou might have to pick different regions.\n\n632\n00:31:19.470 --> 00:31:22.393\nIf you're trying to keep your servers\nclose to a particular customer,\n\n633\n00:31:22.393 --> 00:31:25.608\nat least geographically, some of these\ntypes may not be available to you, and\n\n634\n00:31:25.608 --> 00:31:27.774\nyou're gonna come up with\nsome kind of other means.\n\n635\n00:31:27.774 --> 00:31:32.139\nAnd again that's when you get back to the\nauto scaling model that kinda solves that\n\n636\n00:31:32.139 --> 00:31:35.620\nso just beware not all of VMs\nare available in all regions.\n\n637\n00:31:35.620 --> 00:31:37.390\n>> Important safety tip everyone.\n\n638\n00:31:37.390 --> 00:31:39.050\n[LAUGH] All right, Don, thanks for\n\n639\n00:31:39.050 --> 00:31:42.400\nthose descriptions about\nthis Azure Virtual Machines.\n\n640\n00:31:42.400 --> 00:31:44.900\nIt can get a little confusing if you\ndon't know what you're looking at.\n\n641\n00:31:44.900 --> 00:31:48.100\nDon, you've done a really good job\nhelping us understand the differences\n\n642\n00:31:48.100 --> 00:31:49.680\nbetween the different types and\neverything.\n\n643\n00:31:49.680 --> 00:31:51.000\nThank you so much for that.\n\n644\n00:31:51.000 --> 00:31:52.270\nThank you guys for watching.\n\n645\n00:31:52.270 --> 00:31:53.980\nWe're gonna go ahead and\nsign off for ITProTV.\n\n646\n00:31:53.980 --> 00:31:56.100\nI've been your host Daniel Lowrie.\n\n647\n00:31:56.100 --> 00:31:56.760\n>> And I'm Don Pezet.\n\n648\n00:31:56.760 --> 00:31:58.942\n>> And we'll see you next time.\n\n649\n00:31:58.942 --> 00:32:05.580\n[SOUND]\n\n",
          "vimeoId": "147474281"
        },
        {
          "description": "In this episode, Daniel and Don show you how to create a Microsoft Azure Virtual Machine. The first method they cover for creating a VM is by using the Azure Legacy Portal, taking you step-by-step through the VM creation wizard. Next, they utilize the newer Preview Portal, which is poised to replace the Legacy Portal. Also covered is the topic of a Cloud Service and what that means to the Azure VM user.",
          "length": "1869",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-1-3-creating_virtual_machines-113015-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-1-3-creating_virtual_machines-113015-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-1-3-creating_virtual_machines-113015-1-sm.jpg",
          "title": "Creating Virtual Machines",
          "transcript": "WEBVTT\n\n1\n00:00:00.078 --> 00:00:10.078\n[MUSIC]\n\n2\n00:00:12.143 --> 00:00:17.120\nAll right, greetings everyone, and welcome\nto another fantastic episode of ITProTV.\n\n3\n00:00:17.120 --> 00:00:19.150\nI'm your host, Daniel Lowrie.\n\n4\n00:00:19.150 --> 00:00:22.070\nAnd in today's episode,\nwe're gonna be continuing on with more\n\n5\n00:00:22.070 --> 00:00:26.760\nMicrosoft Azure virtual machine, and who\nbetter to help us continue looking at that\n\n6\n00:00:26.760 --> 00:00:29.140\nis none other than my good friend Mr.\nDon Pezet.\n\n7\n00:00:29.140 --> 00:00:30.930\nDon, welcome to the show,\nhow are you today?\n\n8\n00:00:30.930 --> 00:00:34.240\n>> I am doing great Daniel, and I'm gonna\nmake a commitment to you and the viewers.\n\n9\n00:00:34.240 --> 00:00:35.280\nBy the end of this episode,\n\n10\n00:00:35.280 --> 00:00:38.270\nI swear we will have a virtual\nmachine up and running.\n\n11\n00:00:38.270 --> 00:00:38.970\n>> I don't believe you.\n\n12\n00:00:38.970 --> 00:00:41.905\n>> We've completely failed to\nlaunch what this show is called.\n\n13\n00:00:41.905 --> 00:00:46.570\n[LAUGH] So, it is important, and in this\nepisode, that's what we want to do is we\n\n14\n00:00:46.570 --> 00:00:50.280\nwant to take all the knowledge that\nwe covered in the first two episodes,\n\n15\n00:00:50.280 --> 00:00:54.240\nthe decisions we have to make before\nwe run a VM, all that stuff, and\n\n16\n00:00:54.240 --> 00:00:55.000\nactually use it.\n\n17\n00:00:55.000 --> 00:00:56.205\n>> We gain our credibility.\n\n18\n00:00:56.205 --> 00:00:57.490\n[LAUGH]\n>> Exactly.\n\n19\n00:00:57.490 --> 00:01:02.330\nAt least for a little while,\nuntil we blow our credibility again.\n\n20\n00:01:02.330 --> 00:01:03.620\nSo I want to launch a VM.\n\n21\n00:01:03.620 --> 00:01:08.660\nNow the thing is, cuz it's never so\neasy as let's go create one.\n\n22\n00:01:08.660 --> 00:01:11.330\nIt's actually 2, 3, 4 it's really 5.\n\n23\n00:01:11.330 --> 00:01:12.980\nI always say four.\n\n24\n00:01:12.980 --> 00:01:17.740\nFour different ways to create a virtual\nmachine, and so, let's choose the way\n\n25\n00:01:17.740 --> 00:01:20.250\nthat's right for us, but\nlet's start with the most common, right.\n\n26\n00:01:20.250 --> 00:01:24.030\nMost of us when it comes at time to launch\nour virtual machine, what we're gonna do.\n\n27\n00:01:24.030 --> 00:01:26.210\nThis is where we need to go to\nthe web user interface, right?\n\n28\n00:01:26.210 --> 00:01:30.820\nSo Microsoft Azure has a full web\nbased GUI that we can go in and\n\n29\n00:01:30.820 --> 00:01:33.410\ncreate virtual machines, manage them,\ndo all the things we need.\n\n30\n00:01:33.410 --> 00:01:35.160\nIt's super easy and works great.\n\n31\n00:01:35.160 --> 00:01:37.400\nIt doesn't work so great if you\nwant to spin up 1,000 machines.\n\n32\n00:01:37.400 --> 00:01:41.200\nBut if you want to spin up one or two,\nit takes a few minutes and you're off and\n\n33\n00:01:41.200 --> 00:01:42.170\ngoing, pretty easy to do.\n\n34\n00:01:43.270 --> 00:01:46.220\nThe challenge is not only do they have\n\n35\n00:01:46.220 --> 00:01:49.860\none web based graphical user\ninterface they have two right.\n\n36\n00:01:49.860 --> 00:01:52.840\nTechnically they have three but\nwe'll kind of ignore the third one.\n\n37\n00:01:52.840 --> 00:01:56.060\nMicrosoft has evolved Azure over the years\nand they started originally with\n\n38\n00:01:56.060 --> 00:01:59.660\nthis web interface that was\nall done in Silverlight right.\n\n39\n00:01:59.660 --> 00:02:03.890\nSo if any of you guys used Azure back in\nthe very beginning You had to Silverlight,\n\n40\n00:02:03.890 --> 00:02:04.730\nit was a pain.\n\n41\n00:02:04.730 --> 00:02:06.460\nEven Microsoft decided it was a bad idea,\n\n42\n00:02:06.460 --> 00:02:10.810\nand then you moved away to a new\ninterface that was mostly HTML based.\n\n43\n00:02:10.810 --> 00:02:13.940\n>> You know Don, they issued\na formal apology on that Silverlight\n\n44\n00:02:13.940 --> 00:02:14.900\nbusiness, didn't they?\n\n45\n00:02:14.900 --> 00:02:17.657\n>> [LAUGH] Yeah, you know Silverlight\nwas one of those experiments from\n\n46\n00:02:17.657 --> 00:02:20.321\nMicrosoft that they were trying to\ncompete with Adobe Flash, and then\n\n47\n00:02:20.321 --> 00:02:24.000\nwhen Adobe Flash kind of died they were\n>> Competing with a dead technology.\n\n48\n00:02:24.000 --> 00:02:26.790\nSo they kinda pulled that one back.\n\n49\n00:02:26.790 --> 00:02:30.170\nIn fact, I'm not certain, but I don't\nthink you can even get to that anymore.\n\n50\n00:02:30.170 --> 00:02:31.970\nSo that one's gone.\n\n51\n00:02:31.970 --> 00:02:38.740\nWe have the standard portal, which is\nmostly just HTML, AJAX, or whatever based.\n\n52\n00:02:38.740 --> 00:02:40.950\nIt's just a pretty straightforward\nweb page supported everywhere.\n\n53\n00:02:40.950 --> 00:02:42.940\nAnd it supports all the various\nfeatures of Azure, so\n\n54\n00:02:42.940 --> 00:02:45.150\nthat's what most of us are gonna use, but\n\n55\n00:02:45.150 --> 00:02:49.640\nthe preview portal, the preview portal\nleverages HTML5 pretty heavily.\n\n56\n00:02:49.640 --> 00:02:53.240\nIt looks beautiful,\nyou can jump around and access things.\n\n57\n00:02:53.240 --> 00:02:57.320\nIn a year, year and a half,\nit'll be what all of us use, right?\n\n58\n00:02:57.320 --> 00:03:00.920\nBut today, we don't really use\nthat preview portal that much, and\n\n59\n00:03:00.920 --> 00:03:03.180\nthe reason is it doesn't\nhave all the features yet.\n\n60\n00:03:03.180 --> 00:03:06.500\nThere's a lot of things, like even\nautoscaling and some of the cooler things,\n\n61\n00:03:06.500 --> 00:03:08.370\nthat you can do in the standard portal.\n\n62\n00:03:08.370 --> 00:03:10.450\nNo, you can't do it with\nthe preview portal yet.\n\n63\n00:03:10.450 --> 00:03:11.860\nSo you're welcome to jump in to it.\n\n64\n00:03:11.860 --> 00:03:13.730\nShow you both for\na completeness here in the show.\n\n65\n00:03:13.730 --> 00:03:16.680\nI'll show you both ways,\nbut in real lifeline you're\n\n66\n00:03:16.680 --> 00:03:20.010\npretty much going to use the regular\nportal for most of what you do.\n\n67\n00:03:20.010 --> 00:03:23.730\nSo there are a few other ways\nwe can create virtual machines.\n\n68\n00:03:23.730 --> 00:03:25.980\nFor example there's a rest API,\n\n69\n00:03:25.980 --> 00:03:29.790\nrest EPI is really cool cuz we\ncan have third party software.\n\n70\n00:03:29.790 --> 00:03:33.600\nOr software we route ourselves, that can\nreach out and create virtual machines,\n\n71\n00:03:33.600 --> 00:03:35.950\nremove virtual machines,\npin them up, shut them down,\n\n72\n00:03:35.950 --> 00:03:38.890\ndo all sorts of crazy things\nall from our own software.\n\n73\n00:03:38.890 --> 00:03:43.170\nAnd that allows third party software to\nmanage Microsoft's Azure environment,\n\n74\n00:03:43.170 --> 00:03:48.220\nso there's a lot of systems out there that\nlet you have that third party management.\n\n75\n00:03:48.220 --> 00:03:50.860\nThings like, what is it,\nlike Veeam and a few other guys.\n\n76\n00:03:50.860 --> 00:03:54.450\nThey have software that will integrate\nwith it, and they use the REST API.\n\n77\n00:03:54.450 --> 00:03:58.150\nSo if you don't like Microsoft's UI,\nyour developers can write your own.\n\n78\n00:03:58.150 --> 00:04:01.310\nOr if you want a customized UI just for\nyour environment, for your company, for\n\n79\n00:04:01.310 --> 00:04:04.260\nyour employees, you can write that up and\nuse the API for\n\n80\n00:04:04.260 --> 00:04:05.940\nit, and then there's PowerShell.\n\n81\n00:04:05.940 --> 00:04:08.910\nWe're gonna do a whole show on PowerShell\non how we can get the PowerShell\n\n82\n00:04:08.910 --> 00:04:09.940\ntools loaded.\n\n83\n00:04:09.940 --> 00:04:12.530\nAnd then we can start to create\nvirtual machines using PowerShells.\n\n84\n00:04:12.530 --> 00:04:15.340\nWe'll table that one for\nanother day, but for right now,\n\n85\n00:04:15.340 --> 00:04:16.590\nlet's start with the web UI.\n\n86\n00:04:16.590 --> 00:04:22.150\nNow the standard Microsoft portal\nIs what a lot of us are using,\n\n87\n00:04:22.150 --> 00:04:26.790\nand the way you get to it is you\ngo to manage.windowsazure.com, and\n\n88\n00:04:26.790 --> 00:04:29.190\nI've got it pulled up right\nhere on my computer here.\n\n89\n00:04:29.190 --> 00:04:32.400\nSo you'll see way up here\nmanage.windowsazure.com.\n\n90\n00:04:32.400 --> 00:04:36.100\nAnd when you log in, you'll see a portal\nthat looks like this, and a lot of people\n\n91\n00:04:36.100 --> 00:04:40.770\nsay Don I was perfectly happy with the\nportal before why are they changing it?\n\n92\n00:04:40.770 --> 00:04:42.560\nThere are a few reasons\nwhy they are changing it.\n\n93\n00:04:42.560 --> 00:04:47.430\nThe main reason is this portal\nwas created way back, not in\n\n94\n00:04:47.430 --> 00:04:51.370\nthe very beginning because we had the\nSilverlight garbage, but a while ago and\n\n95\n00:04:51.370 --> 00:04:56.220\nwhen this was created Microsoft only had\nfive or six different services over here.\n\n96\n00:04:56.220 --> 00:04:59.867\nBut over time the amount of\nservices have expanded, and\n\n97\n00:04:59.867 --> 00:05:04.521\nnow if you look at it there is a couple\nof services in here as I scroll, and\n\n98\n00:05:04.521 --> 00:05:07.566\nscroll, and scroll, and\nscroll [CROSSTALK].\n\n99\n00:05:07.566 --> 00:05:08.800\nThere's a lot, right.\n\n100\n00:05:08.800 --> 00:05:11.530\nAzure has become a lot more\nthan it used to be and so\n\n101\n00:05:11.530 --> 00:05:14.760\nwe just have so much data in here,\nthat it's difficult to work with.\n\n102\n00:05:14.760 --> 00:05:20.540\nSo the UI is not really laid in\nthe optimal of manner, and if you're\n\n103\n00:05:20.540 --> 00:05:24.020\nanything like me the little status bar\nthat you have down here at the bottom is\n\n104\n00:05:24.020 --> 00:05:29.030\nreally super mega annoying, and it just,\nit's always there, it's kind of invasive.\n\n105\n00:05:29.030 --> 00:05:29.900\nSo it's annoying.\n\n106\n00:05:29.900 --> 00:05:32.390\nSo the new portal tries to\nsolve a lot of that, and\n\n107\n00:05:32.390 --> 00:05:37.460\nif you wat to go to the new portal, so the\nold portal was manage.windowsazure.com,\n\n108\n00:05:37.460 --> 00:05:42.160\nthe preview portal Is portal.azure.com.\n\n109\n00:05:42.160 --> 00:05:44.720\nSo, different URL, same account.\n\n110\n00:05:44.720 --> 00:05:46.940\nSo, I'm actually logged in with\nthe same account in these two windows.\n\n111\n00:05:46.940 --> 00:05:48.920\nWhen I log in here, I get the new portal.\n\n112\n00:05:48.920 --> 00:05:52.750\nAnd you'll notice that little bar at the\nbottom that I was talking about is gone.\n\n113\n00:05:52.750 --> 00:05:56.030\nAnd on the left side,\nthere's a lot less over here.\n\n114\n00:05:56.030 --> 00:05:58.310\nThey've really dialed it in to\nwhat most people are working with,\n\n115\n00:05:58.310 --> 00:06:00.060\nthe common things.\n\n116\n00:06:00.060 --> 00:06:03.520\nAnd all those services that\nwere listed in the old portal\n\n117\n00:06:03.520 --> 00:06:04.560\nSome of those are pretty rare.\n\n118\n00:06:04.560 --> 00:06:07.100\nAnd so they moved them off\ninto basically sub-folders.\n\n119\n00:06:07.100 --> 00:06:08.490\nOr they're not supported yet.\n\n120\n00:06:08.490 --> 00:06:10.180\nRight?\nCuz this still isn't completely\n\n121\n00:06:10.180 --> 00:06:11.020\nfeature complete.\n\n122\n00:06:11.020 --> 00:06:12.740\nIt's a bit redundant.\n\n123\n00:06:12.740 --> 00:06:15.920\nBut basically I'm seeing the same\ninformation when I look here\n\n124\n00:06:15.920 --> 00:06:16.610\nas I am in the other one.\n\n125\n00:06:16.610 --> 00:06:17.660\nSo you can switch back and\n\n126\n00:06:17.660 --> 00:06:21.040\nforth all you want Just be aware\nthat this is the preview portal.\n\n127\n00:06:21.040 --> 00:06:23.130\nIt's visually very different, but\n\n128\n00:06:23.130 --> 00:06:27.060\neven if I didn't have that I can see\nthat big note right there, PREVIEW.\n\n129\n00:06:27.060 --> 00:06:29.390\nSo it's letting me know\nthat that's where I am and\n\n130\n00:06:29.390 --> 00:06:32.450\nI can switch back to\nthe other portal at any time.\n\n131\n00:06:32.450 --> 00:06:36.610\nSo let's start with the regular portal and\nthen we'll do the preview portal next.\n\n132\n00:06:36.610 --> 00:06:40.220\nIf I wanna create a virtual machine I\nneed to be thinking about a few things in\n\n133\n00:06:40.220 --> 00:06:41.060\nmy already.\n\n134\n00:06:41.060 --> 00:06:45.190\nAnd if I forget about them it'll ask me so\nI kinda remember.\n\n135\n00:06:45.190 --> 00:06:49.270\nBut basically, on the left side here\nif I click on Virtual Machines I'll\n\n136\n00:06:49.270 --> 00:06:51.420\nsee the instances that I have and\n\n137\n00:06:51.420 --> 00:06:54.870\nthen I can work with the instances,\nbut I don't even have to be there.\n\n138\n00:06:54.870 --> 00:06:56.680\nWhat I need is this NEW button.\n\n139\n00:06:56.680 --> 00:07:00.590\nIf I go to Virtual Machines and I click\nNew, it knows that I'm about to create\n\n140\n00:07:00.590 --> 00:07:03.830\na virtual machine and everything\nis kind of set in the right place.\n\n141\n00:07:03.830 --> 00:07:08.480\nBut if I was somewhere else,\nlike under all Items, when I go to New,\n\n142\n00:07:08.480 --> 00:07:11.520\nI just have to tell it what\nit is that I want to create.\n\n143\n00:07:11.520 --> 00:07:15.390\nAnd it's now walking me through a wizard\nwhere I'm able to pick what I need.\n\n144\n00:07:16.970 --> 00:07:19.880\nSo the first thing that I need\nto do is I need to tell it that\n\n145\n00:07:19.880 --> 00:07:21.560\nI'm doing Compute, right?\n\n146\n00:07:21.560 --> 00:07:23.750\nCompute means that I'm gonna be\nlaunching a virtual machine, but\n\n147\n00:07:23.750 --> 00:07:26.250\nthere is more than one\ntype of compute resource.\n\n148\n00:07:26.250 --> 00:07:27.970\nSo when I come over here and\n\n149\n00:07:27.970 --> 00:07:31.300\nstart to look at the other things,\nyou'll see that I can do a web app,\n\n150\n00:07:31.300 --> 00:07:35.450\na virtual machine, a mobile service,\na cloud service, or a batch service.\n\n151\n00:07:35.450 --> 00:07:38.500\nAll right,\nI'm gonna create a virtual machine.\n\n152\n00:07:38.500 --> 00:07:43.930\nSo when I choose that virtual machine, now\nI can do a quick create, or from gallery.\n\n153\n00:07:43.930 --> 00:07:44.810\nRight?\n\n154\n00:07:44.810 --> 00:07:46.160\nWhat the heck does that mean?\n\n155\n00:07:46.160 --> 00:07:47.800\nWell, quick create.\n\n156\n00:07:47.800 --> 00:07:51.150\nMicrosoft just selected,\nI think it's about eight, maybe 12,\n\n157\n00:07:51.150 --> 00:07:54.171\ndifferent virtual machine\ntemplates that most people use.\n\n158\n00:07:54.171 --> 00:07:58.130\nAnd so by choosing that, you can get\nexactly what it is that you want,\n\n159\n00:07:58.130 --> 00:08:01.020\nif it's one of those 12\nmost common templates.\n\n160\n00:08:01.020 --> 00:08:04.099\nBut, if you've got something\nthat's a little more special case,\n\n161\n00:08:04.099 --> 00:08:07.080\nyou can go to From Gallery and\nyou get a lot more choices.\n\n162\n00:08:07.080 --> 00:08:08.330\nWell, let's start with a Quick Create.\n\n163\n00:08:08.330 --> 00:08:10.430\nWe'll come back to\nthe From Gallery in a moment.\n\n164\n00:08:10.430 --> 00:08:13.120\nWhen I choose quick create,\nnow I start to get some\n\n165\n00:08:13.120 --> 00:08:15.900\nother information over here asking\nwhat it is that I wanna do.\n\n166\n00:08:15.900 --> 00:08:20.200\nNow, what I wanna do is I wanna create\na system and I need to give it a name.\n\n167\n00:08:20.200 --> 00:08:24.690\nNow the name that I'm giving it,\nthis is not the name of the server.\n\n168\n00:08:24.690 --> 00:08:26.760\nThis is really confusing\nto a lot of people.\n\n169\n00:08:26.760 --> 00:08:31.926\nThis is the name for\nwhat's called the cloud service.\n\n170\n00:08:31.926 --> 00:08:33.943\nI know I've mentioned\nthese in other episodes,\n\n171\n00:08:33.943 --> 00:08:37.296\nwhen you create a virtual machine by\ndefault that's stuck into a cloud service.\n\n172\n00:08:37.296 --> 00:08:40.681\nAnd the easiest way to think about a cloud\nservice is to think of it as an IP\n\n173\n00:08:40.681 --> 00:08:41.197\naddress.\n\n174\n00:08:41.197 --> 00:08:46.007\nYour virtual machine will have\na private IP address, not a public one.\n\n175\n00:08:46.007 --> 00:08:48.887\nThe public IP address that's\nassigned to it is actually\n\n176\n00:08:48.887 --> 00:08:52.740\nassigned to a cloud service and\nyou have to give it a name.\n\n177\n00:08:52.740 --> 00:08:57.495\nSo, I might call this\nthe itprotv-testfile01 or\n\n178\n00:08:57.495 --> 00:09:01.130\nsomething like that, right.\n\n179\n00:09:01.130 --> 00:09:02.860\nAnd I've gone a little\ntoo long in the name.\n\n180\n00:09:02.860 --> 00:09:04.570\nI'm limited to 15 characters.\n\n181\n00:09:04.570 --> 00:09:08.142\nSo, maybe I'll call it itprotvfile01.\n\n182\n00:09:08.142 --> 00:09:14.090\nAnd that name has to be\nunique across all of Azure.\n\n183\n00:09:14.090 --> 00:09:17.630\nAll the customers that are out there,\nall the people in there has to be unique.\n\n184\n00:09:17.630 --> 00:09:19.030\nAnd so it's gonna check that.\n\n185\n00:09:19.030 --> 00:09:21.550\nI've got a little green checkmark\nhere that lets me know I'm okay.\n\n186\n00:09:21.550 --> 00:09:26.020\nAnd what I'm creating is\nitprotvfile01.cloud app.net.\n\n187\n00:09:26.020 --> 00:09:27.640\nThat's my cloud service.\n\n188\n00:09:27.640 --> 00:09:32.700\nNow, I can have one VM behind that name or\nI can have 100 VMs behind that name.\n\n189\n00:09:32.700 --> 00:09:35.110\nWhat it really is is basically\na public IP that's being mapped to it.\n\n190\n00:09:35.110 --> 00:09:36.720\nThat's the cloud service that I'm making.\n\n191\n00:09:37.950 --> 00:09:39.810\nAnd then I can tell the image that I want.\n\n192\n00:09:39.810 --> 00:09:45.178\nIt's defaulting to Windows Server 2012\nR2 Datacenter, but I can pick from these\n\n193\n00:09:45.178 --> 00:09:50.870\nother ones, Server 2008, Server 2016,\nUbuntu, OpenLogic which is sent to OS.\n\n194\n00:09:50.870 --> 00:09:54.220\nI've got CoreOS, I can pick from\nthe different ones that I need\n\n195\n00:09:54.220 --> 00:09:56.470\nto get them kinda launch in there, right?\n\n196\n00:09:56.470 --> 00:09:58.270\nI'll stick with the Windows Server for\nthis one.\n\n197\n00:09:59.440 --> 00:10:01.330\nThen, the size.\n\n198\n00:10:01.330 --> 00:10:04.290\nAnd this is what we spent our time\ntalking about in the last episode.\n\n199\n00:10:04.290 --> 00:10:09.280\nDo I want an A1, an AA,\na D2, a G whatever?\n\n200\n00:10:09.280 --> 00:10:13.350\nYou've gotta go through and\npick based on the needs of your server.\n\n201\n00:10:13.350 --> 00:10:15.140\nAnd so I've got the As up top.\n\n202\n00:10:15.140 --> 00:10:19.270\nAnd we've got, I guess it's a little\nbit hard to see zoomed in here,\n\n203\n00:10:19.270 --> 00:10:22.770\nbut see how I've got\nthe basic tier right up top?\n\n204\n00:10:22.770 --> 00:10:25.430\nAnd then as I scroll down\nI've got the standard tier.\n\n205\n00:10:25.430 --> 00:10:28.680\nAnd the standard tier goes from\nthe As all the way over to\n\n206\n00:10:28.680 --> 00:10:30.770\nthe 's way down there at the bottom.\n\n207\n00:10:30.770 --> 00:10:32.220\nSo, I need to pick.\n\n208\n00:10:32.220 --> 00:10:34.670\nNow, remember something I\nsaid in the last episode\n\n209\n00:10:34.670 --> 00:10:38.470\nsome of these tiers are not\navailable in some regions.\n\n210\n00:10:38.470 --> 00:10:44.470\nSo, if I see that I'm missing a tier, it\nmight be because of the region down here.\n\n211\n00:10:44.470 --> 00:10:45.950\nAnd you'll see mine's East US.\n\n212\n00:10:45.950 --> 00:10:49.680\nI might need to change that and\npick East US 2, or\n\n213\n00:10:49.680 --> 00:10:52.140\na different region,\nto get the one that I want.\n\n214\n00:10:52.140 --> 00:10:55.270\nAnd then I can come back up here and\nchoose what it is that I'm looking for.\n\n215\n00:10:55.270 --> 00:10:58.800\nI might pick a region that I'm not allowed\nto create VMs in which shouldn't even show\n\n216\n00:10:58.800 --> 00:11:02.310\nup on the list and yeah,\nI don't see anything crazy.\n\n217\n00:11:02.310 --> 00:11:06.260\nBut as I go through and\nstart to pick maybe I pick Southeast Asia.\n\n218\n00:11:07.320 --> 00:11:09.190\nSo, I'll pick that one and\n\n219\n00:11:09.190 --> 00:11:14.700\nnow as I go through to pick my size,\nI just need to be aware of that.\n\n220\n00:11:14.700 --> 00:11:18.760\nThat I may see less sizes\nnow than what I did before.\n\n221\n00:11:18.760 --> 00:11:20.190\nAnd sadly, I wasn't paying attention so\n\n222\n00:11:20.190 --> 00:11:22.270\nI don't know, oops,\nnow I'm gonna screw it all up.\n\n223\n00:11:22.270 --> 00:11:26.130\n[LAUGH] I don't know if I picked\none that's not supported or not.\n\n224\n00:11:26.130 --> 00:11:28.740\nSo, but what I did do is\nclear out my little wizard so\n\n225\n00:11:28.740 --> 00:11:30.240\nlet me kind of redo that again.\n\n226\n00:11:30.240 --> 00:11:35.420\nSo, that was itprotvfile01\nis what we're creating.\n\n227\n00:11:35.420 --> 00:11:37.240\nAnd we'll just stick with the D1 for now.\n\n228\n00:11:37.240 --> 00:11:39.120\nI'm not gonna go crazy on it.\n\n229\n00:11:39.120 --> 00:11:40.680\nThen I need to pick a username.\n\n230\n00:11:40.680 --> 00:11:44.300\nNow, if I'm doing a Windows machine,\n\n231\n00:11:44.300 --> 00:11:46.050\nwe normally think about\nadministrator account.\n\n232\n00:11:46.050 --> 00:11:48.420\nOr if we're doing Linux,\nwe think of a root account.\n\n233\n00:11:48.420 --> 00:11:50.010\nBut you can't use those.\n\n234\n00:11:50.010 --> 00:11:51.980\nIn Linux,\nit will not let you use the root account.\n\n235\n00:11:51.980 --> 00:11:53.870\nIn Windows, it will not let you\nuse the administrator account.\n\n236\n00:11:53.870 --> 00:11:56.320\nThose are disabled by default for\nsecurity reasons.\n\n237\n00:11:56.320 --> 00:11:59.350\nSo, I need to create a user that's going\nto be that first administrator and\n\n238\n00:11:59.350 --> 00:12:01.500\nI need to call it what\never I want it to be.\n\n239\n00:12:01.500 --> 00:12:05.740\nMaybe I want it to be itprotvadmin or\nsomething like that.\n\n240\n00:12:05.740 --> 00:12:08.360\nGive it a username and\nthen you can set the password for\n\n241\n00:12:08.360 --> 00:12:11.408\nwhat you want that to be and\nit needs to be something strong.\n\n242\n00:12:11.408 --> 00:12:14.360\nIf you type something weak\nit'll flag you for that, so\n\n243\n00:12:14.360 --> 00:12:16.560\nI'm gonna put something\nfairly strong in that.\n\n244\n00:12:16.560 --> 00:12:18.230\n>> Will it continue to go on and\n\n245\n00:12:18.230 --> 00:12:22.050\nallow you to make the VM even\nthough you used a weak password?\n\n246\n00:12:22.050 --> 00:12:26.220\n>> No, if I put something weak in here,\nit'll red flag me.\n\n247\n00:12:26.220 --> 00:12:28.940\nAnd so like here I'll use a this one.\n\n248\n00:12:28.940 --> 00:12:32.010\nHere, it's telling me the passwords don't\nmatch in the password I provided is\n\n249\n00:12:32.010 --> 00:12:34.940\ntoo common, it will not let me progress.\n\n250\n00:12:34.940 --> 00:12:40.740\nSo, I need to come up with something\na little more unique which is a you know,\n\n251\n00:12:40.740 --> 00:12:42.720\n1, 2, 3, 4, 5 instead of 1, 2, 3, 4.\n\n252\n00:12:42.720 --> 00:12:44.280\nNow you're secure, Don.\n\n253\n00:12:44.280 --> 00:12:45.420\n>> That's right.\n\n254\n00:12:45.420 --> 00:12:46.210\nThere we go.\n\n255\n00:12:46.210 --> 00:12:49.710\nSo, I'll get those set and\nnow I should be in business.\n\n256\n00:12:49.710 --> 00:12:53.190\nSo, once I've got that set I can create\nthe virtual machine and off we go.\n\n257\n00:12:53.190 --> 00:12:59.300\nI do want to point out one more thing\nwhich is it says Region/Affinity Group.\n\n258\n00:12:59.300 --> 00:13:03.640\nNow I haven't talked about affinity\ngroups and there's a reason for that.\n\n259\n00:13:03.640 --> 00:13:07.080\nAffinity groups are an older technology\nthat you really shouldn't use anymore,\n\n260\n00:13:07.080 --> 00:13:10.380\nMicrosoft's official stance is that\npeople shouldn't use affinity groups.\n\n261\n00:13:10.380 --> 00:13:10.940\nYou might,\n\n262\n00:13:10.940 --> 00:13:16.010\nnotice in mind I actually have an affinity\ngroup here called itprotv-demo-ag.\n\n263\n00:13:16.010 --> 00:13:18.185\nWell, at some point on this account,\n\n264\n00:13:18.185 --> 00:13:20.705\nI created an infinity\ngroup called itprotv-demo.\n\n265\n00:13:20.705 --> 00:13:24.075\nI don't remember doing it but apparently\nI did or maybe somebody else did.\n\n266\n00:13:24.075 --> 00:13:25.555\nMaybe a hacker created that for me.\n\n267\n00:13:25.555 --> 00:13:28.525\nSo, that's the old excuse if something\nis not right, I didn't do it.\n\n268\n00:13:28.525 --> 00:13:29.785\n>> God bless those hackers.\n\n269\n00:13:29.785 --> 00:13:32.005\n>> I'm gonna go and\nhit Create and let this one run.\n\n270\n00:13:32.005 --> 00:13:35.585\nSo, while that's creating,\nwhat's an infinity group?\n\n271\n00:13:35.585 --> 00:13:40.580\nWell, back in the day, in the earlier\ndays of Azure when you spin up a virtual\n\n272\n00:13:40.580 --> 00:13:44.240\nmachine, you don't really know anything\nabout the hardware underneath it.\n\n273\n00:13:44.240 --> 00:13:48.680\nMicrosoft has thousands of physical\nservers in each of their datacenters,\n\n274\n00:13:48.680 --> 00:13:51.700\nand I really don't know anything about\nthe physical server this ended up on.\n\n275\n00:13:51.700 --> 00:13:57.730\nWell, what if I'm spinning up a Web\nfront end and a database back end,\n\n276\n00:13:57.730 --> 00:14:00.420\nand I know the two servers\nare gonna be talking to each other.\n\n277\n00:14:00.420 --> 00:14:05.000\nWell, on the back end, the Web phone\nend might be on one server in one side\n\n278\n00:14:05.000 --> 00:14:08.500\nof the datacenter and the back end,\nthat database, might be\n\n279\n00:14:08.500 --> 00:14:12.690\non a completely separate side of the data\ncenter all the way across the building and\n\n280\n00:14:12.690 --> 00:14:15.960\nI've got a lot of network infrastructure\nto move through to get between the two.\n\n281\n00:14:15.960 --> 00:14:20.720\nSo, what we used to be able to do\nwas to create affinity groups and\n\n282\n00:14:20.720 --> 00:14:25.760\nwhat that would do is make sure\nthat the two servers were on\n\n283\n00:14:25.760 --> 00:14:27.470\nhardware that was very,\nvery close together.\n\n284\n00:14:27.470 --> 00:14:28.400\nNot the same hardware,\n\n285\n00:14:28.400 --> 00:14:31.950\ncuz you don't want them to be\ncompletely a single point of failure.\n\n286\n00:14:31.950 --> 00:14:35.500\nBut it would be multiple servers on\nthe same rack or in a group of racks.\n\n287\n00:14:35.500 --> 00:14:37.190\nMicrosoft has weird terminology for this.\n\n288\n00:14:37.190 --> 00:14:41.512\nTheir servers go in racks and\nevery group of, I think it's 20 or\n\n289\n00:14:41.512 --> 00:14:43.645\n25 racks, is called a stamp.\n\n290\n00:14:43.645 --> 00:14:47.084\nAnd so they would make sure that each\nof your servers were in the same stamp.\n\n291\n00:14:47.084 --> 00:14:51.930\nAnd that meant that you had the absolute\nlowest latency between those servers.\n\n292\n00:14:51.930 --> 00:14:53.580\nNow, that sounds like a good thing, right?\n\n293\n00:14:53.580 --> 00:14:55.640\nBut there were some problems with it.\n\n294\n00:14:55.640 --> 00:14:59.230\nThe biggest problem was that you\nwere now tied to that stamp.\n\n295\n00:14:59.230 --> 00:15:02.930\nWhat if you kept adding more and\nmore servers to that affinity group?\n\n296\n00:15:02.930 --> 00:15:03.860\nAnd, eventually,\n\n297\n00:15:03.860 --> 00:15:07.060\nthere's other customers that are going\nto that affinity group also.\n\n298\n00:15:07.060 --> 00:15:08.820\nWhat if the affinity\ngroup runs out of room?\n\n299\n00:15:08.820 --> 00:15:10.830\nThe stamp is full and that's it.\n\n300\n00:15:10.830 --> 00:15:13.290\nWell, you can't add any more\nservers to the affinity group.\n\n301\n00:15:13.290 --> 00:15:14.050\nThat's it.\n\n302\n00:15:14.050 --> 00:15:17.330\nSo, it limited your ability to scale out.\n\n303\n00:15:17.330 --> 00:15:19.320\nAnd with auto scaling,\nwe really don't want that.\n\n304\n00:15:19.320 --> 00:15:21.170\nWe want to have as much room as possible.\n\n305\n00:15:21.170 --> 00:15:25.200\nAnd so now Microsoft has just tuned and\nupdated the datacenters so\n\n306\n00:15:25.200 --> 00:15:27.360\nthat the affinity groups\naren't necessary anymore.\n\n307\n00:15:27.360 --> 00:15:32.110\nNow, you get really great connectivity,\nhigh speed connections with low latency,\n\n308\n00:15:32.110 --> 00:15:35.400\neven if the servers are in two\ndifferent sides of the datacenter.\n\n309\n00:15:35.400 --> 00:15:38.330\nSo, choosing the right region is enough.\n\n310\n00:15:38.330 --> 00:15:41.370\nBut if you don't believe Microsoft and\nyou really want that affinity group,\n\n311\n00:15:41.370 --> 00:15:42.410\nyou can still do it.\n\n312\n00:15:42.410 --> 00:15:44.010\nYou can still use them.\n\n313\n00:15:44.010 --> 00:15:47.000\nIt's just we don't really see\nthem here like we used to.\n\n314\n00:15:47.000 --> 00:15:51.150\nSo, if you want, let's see if I\ncan remember how to create these.\n\n315\n00:15:51.150 --> 00:15:53.575\nAgain, it's not something you\nshould do but if you jump,\n\n316\n00:15:53.575 --> 00:15:55.171\nI believe it's tied under Networks.\n\n317\n00:15:55.171 --> 00:15:57.158\nIf I jump down, no actually no networks.\n\n318\n00:15:57.158 --> 00:16:01.249\nWell, shoot, where, oh, here we go,\nif we jump down to Settings,\n\n319\n00:16:01.249 --> 00:16:03.730\nYou've got affinity groups right here.\n\n320\n00:16:03.730 --> 00:16:07.284\nAnd when you go into that affinity groups\narea, that's where you can go in and\n\n321\n00:16:07.284 --> 00:16:09.043\nyou can choose to create another one.\n\n322\n00:16:09.043 --> 00:16:14.010\nAnd here's where I just\nfound my little system here.\n\n323\n00:16:14.010 --> 00:16:17.560\nIf I click on it I should see that\naffinity group that I had sitting.\n\n324\n00:16:17.560 --> 00:16:21.542\nYeah, there's that Demo AG that's sitting\nthere that somebody created, probably me.\n\n325\n00:16:21.542 --> 00:16:24.610\n[LAUGH] And so,\nif I wanna add more, I can.\n\n326\n00:16:24.610 --> 00:16:27.240\nYou can just come in here and\nadd, and start to create more.\n\n327\n00:16:27.240 --> 00:16:30.080\nAnd when you create an affinity group\nthe only real choice you have is to pick\n\n328\n00:16:30.080 --> 00:16:31.690\nthe region, right?\n\n329\n00:16:31.690 --> 00:16:33.670\nBut it's gonna take\nthat affinity group and\n\n330\n00:16:33.670 --> 00:16:38.340\nattach it to one of the stamps,\nand then off you'll be able to go.\n\n331\n00:16:38.340 --> 00:16:43.140\nNow the problem here, in addition to\nthe stamp running out of servers,\n\n332\n00:16:43.140 --> 00:16:49.760\nis that the stamp you choose might only\nhave A-series and D-series VM hardware.\n\n333\n00:16:49.760 --> 00:16:54.186\nIt might not have G-series hardware,\nor it might not have D version 2.\n\n334\n00:16:55.210 --> 00:16:57.680\nSo you might be limiting the instant\ntypes you can pick from there too.\n\n335\n00:16:57.680 --> 00:16:59.960\nSo, that's another reason why\nwe don't wanna use these.\n\n336\n00:16:59.960 --> 00:17:03.660\nThe support's still there, but you really\ndon't wanna use it if you don't have to.\n\n337\n00:17:03.660 --> 00:17:06.600\nBut, you still can if you want.\n\n338\n00:17:06.600 --> 00:17:08.740\nNow, I created that virtual machine and\nin the background,\n\n339\n00:17:08.740 --> 00:17:12.770\nit's spinning that up and there it is.\n\n340\n00:17:12.770 --> 00:17:13.410\nI've got it running.\n\n341\n00:17:13.410 --> 00:17:15.410\nIt still says that it's starting or\nprovisioning.\n\n342\n00:17:15.410 --> 00:17:17.450\nIt'll take a little while for\nthat to finish, so\n\n343\n00:17:17.450 --> 00:17:19.320\nI'll give it a moment while it runs.\n\n344\n00:17:19.320 --> 00:17:21.991\nAnd when it's done,\nI'll have it up and running and\n\n345\n00:17:21.991 --> 00:17:26.071\nready to go with the hardware profile\nthat I chose when I specified everything.\n\n346\n00:17:26.071 --> 00:17:28.640\nI did a D1, all right?\n\n347\n00:17:28.640 --> 00:17:32.670\nNow while that's running, I mentioned\nthat it's tied to a cloud service.\n\n348\n00:17:32.670 --> 00:17:37.747\nOn the left side here I can see Cloud\nservices, and if I click on that there's\n\n349\n00:17:37.747 --> 00:17:42.810\nmy itprotvfile01 Cloud service\nthat was created and running.\n\n350\n00:17:42.810 --> 00:17:47.310\nIt's in the east US region, and\nit's got a URL attached to it, so\n\n351\n00:17:47.310 --> 00:17:53.640\nit's up it's doing its job, and that\nserver is a part of that cloud service.\n\n352\n00:17:53.640 --> 00:17:54.980\nSo it's tied in there.\n\n353\n00:17:54.980 --> 00:17:56.740\nThere's not much I can do\nwith the cloud service.\n\n354\n00:17:56.740 --> 00:18:00.070\nIt's really just grouping\nthose servers together, and\n\n355\n00:18:00.070 --> 00:18:01.920\nI may want each server to be individual.\n\n356\n00:18:01.920 --> 00:18:06.190\nIf I want each server to have its\nown IP address, its own public IP,\n\n357\n00:18:06.190 --> 00:18:10.190\nthen I'll want one cloud service for\neach VM and that's the default.\n\n358\n00:18:10.190 --> 00:18:12.380\nBut if I want more than\none server to share an IP,\n\n359\n00:18:12.380 --> 00:18:16.110\nthen I can choose the nested\ninside that same cloud service.\n\n360\n00:18:16.110 --> 00:18:18.640\nNow you have to be careful there because\nif I have two servers that are Web\n\n361\n00:18:18.640 --> 00:18:21.100\nservers, they're both\nlistening on Port 80,\n\n362\n00:18:21.100 --> 00:18:25.240\nbut Port 80 goes into the shared IP,\nwhich one does it go to?\n\n363\n00:18:25.240 --> 00:18:26.410\nIt can only go to one.\n\n364\n00:18:26.410 --> 00:18:28.900\nSo you have to use different port numbers,\nit gets kind of confusing, and\n\n365\n00:18:28.900 --> 00:18:30.440\nthat's where a load\nbalancer is more handy.\n\n366\n00:18:30.440 --> 00:18:31.670\nWe'll see load balancers later on.\n\n367\n00:18:33.210 --> 00:18:37.400\nAll right, now when I created that\nvirtual machine I just chose a quick VM.\n\n368\n00:18:37.400 --> 00:18:39.850\nOne that was already created for me.\n\n369\n00:18:39.850 --> 00:18:43.940\nI can also go to the gallery and you get\na lot of more choices with the gallery.\n\n370\n00:18:43.940 --> 00:18:47.400\nSo if I go back to my virtual machines\nI'm going to choose to create a new one.\n\n371\n00:18:47.400 --> 00:18:48.960\nAnd this time when I go through,\n\n372\n00:18:48.960 --> 00:18:53.010\ninstead of doing the Quick Create I did a\nmoment ago, I'm gonna do the From Gallery.\n\n373\n00:18:53.010 --> 00:18:58.240\nAnd when you choose From Gallery you get a\nwhole new wizard with a lot more choices.\n\n374\n00:18:58.240 --> 00:19:01.640\nAll right,\nthe first thing is it's giving me a list\n\n375\n00:19:01.640 --> 00:19:03.940\nof the different operating\nsystems I can pick from.\n\n376\n00:19:03.940 --> 00:19:07.560\nAnd then inside of those operating\nsystems it gives me different variations.\n\n377\n00:19:07.560 --> 00:19:09.760\nSo if I look over here on the left side,\n\n378\n00:19:09.760 --> 00:19:12.110\nyou'll see where Microsoft\nhas their own category.\n\n379\n00:19:12.110 --> 00:19:13.530\nIt's kind of their product.\n\n380\n00:19:13.530 --> 00:19:17.600\nAnd we can get Windows server by itself or\nWindows server with SharePoint installed\n\n381\n00:19:17.600 --> 00:19:21.360\nor SQL Server installed, Biztalk,\nVisual studio or Dynamics, right.\n\n382\n00:19:21.360 --> 00:19:24.300\nIf you've ever installed SharePoint,\nit takes forever, it's a nightmare,\n\n383\n00:19:24.300 --> 00:19:25.950\nits a real complex setup.\n\n384\n00:19:25.950 --> 00:19:28.700\nHere I can choose to deploy SharePoint\nserver and it's already done.\n\n385\n00:19:28.700 --> 00:19:31.010\nAnd that makes life really easy.\n\n386\n00:19:31.010 --> 00:19:36.280\nI can also do Ubuntu, CoreOS, CentOS,\nSUSE, Oracle, each of the different OSes.\n\n387\n00:19:36.280 --> 00:19:40.620\nAnd when I choose them, so for\nexample if I choose, let's do CoreOS.\n\n388\n00:19:40.620 --> 00:19:45.080\nWhen I choose it, over here I can\ndo CoreOS Alpha, Beta, or Stable.\n\n389\n00:19:45.080 --> 00:19:46.690\nYou'll usually choose Stable.\n\n390\n00:19:46.690 --> 00:19:52.228\nIf I use CentOS, you'll see where I can\npick between the different versions,\n\n391\n00:19:52.228 --> 00:19:54.910\n6.5, 6.7,\n7.0 whichever version it is that I need.\n\n392\n00:19:54.910 --> 00:19:57.680\nIf I choose Windows,\nit's a little more involved.\n\n393\n00:19:57.680 --> 00:20:02.510\nBecause under Windows, I can pick\nbetween Datacenter edition, Essentials.\n\n394\n00:20:02.510 --> 00:20:08.020\nI can do Windows Server 2008 R2, and\npick based on what my needs are for\n\n395\n00:20:08.020 --> 00:20:11.400\nthe individual OS, and\nyou'll see quite a bit in here, all right?\n\n396\n00:20:11.400 --> 00:20:15.270\nNow if you're running a standard\nsubscription on this,\n\n397\n00:20:15.270 --> 00:20:17.250\nthen you'll just see server OSs.\n\n398\n00:20:17.250 --> 00:20:21.359\nIf you're running an MSDN subscription\nlike I am, I've got a developer account,\n\n399\n00:20:21.359 --> 00:20:24.901\nand so when you come in here you'll\nactually see even some desktop OSs.\n\n400\n00:20:24.901 --> 00:20:30.360\nSo, oops, you know I say that, but I don't\nsee any, apparently I don't have it.\n\n401\n00:20:30.360 --> 00:20:31.790\nMaybe I'm not logged in\nwith my MSDN account,\n\n402\n00:20:31.790 --> 00:20:33.770\nI need to see who I've logged in as now.\n\n403\n00:20:33.770 --> 00:20:35.150\nNow I've mixed up my accounts.\n\n404\n00:20:35.150 --> 00:20:37.780\nSo, for me, though,\nI am only seeing Server OSs, and\n\n405\n00:20:37.780 --> 00:20:40.290\nthat's what most of us are gonna see,\nis just server OSs.\n\n406\n00:20:40.290 --> 00:20:43.710\nBut, you can get client OSs if\nyou've got a developer account.\n\n407\n00:20:43.710 --> 00:20:45.950\nMicrosoft doesn't want you\ndoing client OSs in Azure,\n\n408\n00:20:45.950 --> 00:20:47.820\nbecause they're not really designed for\nthat.\n\n409\n00:20:47.820 --> 00:20:49.520\nSo it's really just for developers.\n\n410\n00:20:49.520 --> 00:20:53.830\nBut for me, I see all my servers here\nthat I can pick from and I can deploy.\n\n411\n00:20:53.830 --> 00:20:58.440\nUsually we just do Windows Server 2012\nR2 Data Center, and roll down and\n\n412\n00:20:58.440 --> 00:21:00.690\nget it but you'll see some of\nthe other options right there.\n\n413\n00:21:00.690 --> 00:21:05.420\n>> So there are all still pre-built\nversions of the server operating systems,\n\n414\n00:21:05.420 --> 00:21:10.080\nwhether it be Windows, Linux, whatever\nthe case is but you have a little more\n\n415\n00:21:10.080 --> 00:21:13.440\ncontrol over what it is that you\nwant to go into it from here.\n\n416\n00:21:13.440 --> 00:21:16.110\n>> Yeah, and\nlet's say we want a lot of control.\n\n417\n00:21:16.110 --> 00:21:18.130\nI don't wanna just\ndeploy a Windows server,\n\n418\n00:21:18.130 --> 00:21:21.230\nI wanna deploy it with some custom\nsoftware already loaded on it.\n\n419\n00:21:21.230 --> 00:21:23.210\nWell way down here,\n\n420\n00:21:23.210 --> 00:21:28.310\neasy to overlook, is we've got this spot\nwhere it says My Images and My Disks.\n\n421\n00:21:28.310 --> 00:21:31.218\nYou can actually create\nyour own image locally.\n\n422\n00:21:31.218 --> 00:21:35.860\nGo into Hyper-V, whip up some VHDs and\nupload them here into Azure, and\n\n423\n00:21:35.860 --> 00:21:39.300\nthen from then on whenever you spin\nup a VM you can just go in here and\n\n424\n00:21:39.300 --> 00:21:41.040\ncreate VMs based on your image.\n\n425\n00:21:41.040 --> 00:21:44.400\nThat's how you create OSs that aren't\ndirectly supported by Microsoft, but\n\n426\n00:21:44.400 --> 00:21:47.260\nit's also how you can create OSs that\nare customized to meet your needs.\n\n427\n00:21:47.260 --> 00:21:48.270\nNow, there's other ways to do it.\n\n428\n00:21:48.270 --> 00:21:51.720\nWe'll see it later on in the series\nhow you can create the images right in\n\n429\n00:21:51.720 --> 00:21:53.720\nAzure so\nyou still maintain Microsoft's Support, so\n\n430\n00:21:53.720 --> 00:21:55.610\nthere are a few different options there.\n\n431\n00:21:55.610 --> 00:21:57.970\nAnd, I've got a little MSDN\ncheck marked down here.\n\n432\n00:21:57.970 --> 00:22:01.260\nSo let's turn that, no, yeah I'm not\nlucky with my MSDN account, I guess.\n\n433\n00:22:01.260 --> 00:22:05.350\nSo, that's kind of the negative of having\ntoo many accounts like I do, I guess.\n\n434\n00:22:05.350 --> 00:22:07.650\nYeah, I don't have any images here.\n\n435\n00:22:07.650 --> 00:22:10.420\nSo if I want to do Windows server,\nI choose that and\n\n436\n00:22:10.420 --> 00:22:15.140\nnow as I start to move forward I'll get\na few other choices as we progress, right?\n\n437\n00:22:15.140 --> 00:22:18.337\nIt actually gives us more choices\nthis way than Quick-Create and so\n\n438\n00:22:18.337 --> 00:22:21.592\nsometimes even if I know the template\nis in Quick-Create I'll still\n\n439\n00:22:21.592 --> 00:22:24.361\ndo it this way because I can\ngive it a virtual machine name.\n\n440\n00:22:24.361 --> 00:22:29.075\nI can chose between the basic and\nstandard tier, I can choose D or A or\n\n441\n00:22:29.075 --> 00:22:31.164\nG-series virtual machine.\n\n442\n00:22:31.164 --> 00:22:33.297\nI can pick username and\npassword, that's all normal.\n\n443\n00:22:33.297 --> 00:22:35.581\nBut it's the next few screens\nthat are different, so\n\n444\n00:22:35.581 --> 00:22:37.370\nmaybe I want to create itprotvfile02.\n\n445\n00:22:38.450 --> 00:22:42.560\nAnd I'll do another D1,\nI'll create itprotvadmin,\n\n446\n00:22:42.560 --> 00:22:44.570\nI'll set the same password\nif I can remember it.\n\n447\n00:22:46.660 --> 00:22:49.100\nAnd then as I move forward on this screen,\n\n448\n00:22:50.350 --> 00:22:52.480\nnow it starts to ask\nme additional options.\n\n449\n00:22:52.480 --> 00:22:55.150\nDo I want to create a new cloud service?\n\n450\n00:22:55.150 --> 00:22:57.720\nOr do I wanna join an existing one?\n\n451\n00:22:57.720 --> 00:23:02.440\nRight, so maybe I already have a cloud\nservice created and I wanna join it to it.\n\n452\n00:23:02.440 --> 00:23:05.011\nSo I can put this one inside of file01 and\n\n453\n00:23:05.011 --> 00:23:08.626\nnow I've got file02 that's part of file01,\nright?\n\n454\n00:23:08.626 --> 00:23:11.960\nI can set that affinity group which is\ngreyed out for me now because I'm choosing\n\n455\n00:23:11.960 --> 00:23:15.580\na cloud service, I'm stuck to that\nservice, I can't change this.\n\n456\n00:23:15.580 --> 00:23:18.050\nYou'll see other things like\ndifferent storage accounts.\n\n457\n00:23:18.050 --> 00:23:25.260\nI mentioned that you had a limit of\n500 terabytes for storage in Azure.\n\n458\n00:23:25.260 --> 00:23:26.920\nThat's 500 terabytes per storage account.\n\n459\n00:23:26.920 --> 00:23:29.940\nSo, I could create more storage\naccounts to get, kind of, around that.\n\n460\n00:23:29.940 --> 00:23:31.930\nI can choose an availability set.\n\n461\n00:23:31.930 --> 00:23:33.550\nNow, availability sets are kind of neat.\n\n462\n00:23:33.550 --> 00:23:34.860\nThat's where we set up redundancy.\n\n463\n00:23:34.860 --> 00:23:36.610\nIf one server fails, another takes over.\n\n464\n00:23:36.610 --> 00:23:38.180\nSo, I can specify that.\n\n465\n00:23:38.180 --> 00:23:42.490\nAnd then the end points, I didn't see end\npoints in the other wizard cuz it was\n\n466\n00:23:42.490 --> 00:23:45.421\nquick create,\nI just needed to quickly create a VM.\n\n467\n00:23:45.421 --> 00:23:49.910\nBut if I've got more that one VM nested\ninside of the same Cloud service,\n\n468\n00:23:49.910 --> 00:23:54.030\nI can't have duplicate ports, so\nhere's where I could come in and\n\n469\n00:23:54.030 --> 00:23:58.710\nI could add something, and I could\nmap a public port to a private port.\n\n470\n00:23:58.710 --> 00:24:02.580\nSo maybe the other server is\nrunning a Web server on port 80.\n\n471\n00:24:02.580 --> 00:24:05.787\nHere, I could add a web server on\nport 81 that maps to it and so\n\n472\n00:24:05.787 --> 00:24:08.090\nnow they're not duplicating their ports.\n\n473\n00:24:09.450 --> 00:24:11.550\nYou'll see PowerShell's kind of\nthe only thing enabled by default.\n\n474\n00:24:12.580 --> 00:24:16.610\nAnd then, on the last screen, here's where\nI can choose some pretty neat stuff.\n\n475\n00:24:16.610 --> 00:24:18.640\nI can install what's called the VM Agent.\n\n476\n00:24:18.640 --> 00:24:20.908\nThe VM Agent is what lets Hyper-V,\nI mean not Hyper-V,\n\n477\n00:24:20.908 --> 00:24:22.194\nthat is what's under the hood.\n\n478\n00:24:22.194 --> 00:24:26.471\nBut it's what allows the Azure Management\nCenter to be able to integrate with the VM\n\n479\n00:24:26.471 --> 00:24:30.670\nand to deploy additional software\ninside of it like Puppet and Chef.\n\n480\n00:24:30.670 --> 00:24:32.372\nThose are orchestration software packages.\n\n481\n00:24:32.372 --> 00:24:36.910\nIf you wanna quickly deploy applications\nyou can use Puppet and Chef to do that.\n\n482\n00:24:36.910 --> 00:24:37.870\nYou may use it you may not.\n\n483\n00:24:37.870 --> 00:24:39.259\nYou can do custom scripts if you want.\n\n484\n00:24:39.259 --> 00:24:43.265\nAnd there's some other security\noptions we can deploy,\n\n485\n00:24:43.265 --> 00:24:46.108\nthing like Microsoft Antima, whoops!\n\n486\n00:24:46.108 --> 00:24:47.745\n[LAUGH] We can launch PowerShell.\n\n487\n00:24:47.745 --> 00:24:51.503\nMicrosoft Antimalware,\nEndpoint Protection, Trend Micro, right,\n\n488\n00:24:51.503 --> 00:24:55.430\nyou could choose to deploy those\nin the VMs also if you want.\n\n489\n00:24:55.430 --> 00:24:59.600\n>> So this is kind of nice, you've got\nAzure building your Virtual Machines.\n\n490\n00:24:59.600 --> 00:25:02.360\nThe quick stuff is nice,\nbecause I've gotta get a server up and\n\n491\n00:25:02.360 --> 00:25:05.570\nrunning, got a dev guy, he just needs\nto build something really quickly.\n\n492\n00:25:05.570 --> 00:25:06.390\nBoom, boom, boom.\n\n493\n00:25:06.390 --> 00:25:07.970\nI get a server up and running.\n\n494\n00:25:07.970 --> 00:25:10.990\nWith this, it's a little,\nit's definitely a whole lot more control.\n\n495\n00:25:10.990 --> 00:25:13.720\nI was gonna say a little more control,\nit's actually a whole lot more control.\n\n496\n00:25:13.720 --> 00:25:17.600\nTo even have, I need to keep it\nsecure right out of the gate, right.\n\n497\n00:25:17.600 --> 00:25:20.140\nI have the ability to put\nantivirus software on it.\n\n498\n00:25:20.140 --> 00:25:23.760\nRight, before I even start the thing,\nI know that it's gonna deploy antivirus,\n\n499\n00:25:23.760 --> 00:25:24.440\nit's gonna be up-to-date.\n\n500\n00:25:24.440 --> 00:25:25.930\nIt's gonna be ready to go.\n\n501\n00:25:25.930 --> 00:25:29.560\nThis is probably the way you're gonna\ngo almost all the time, right, Don?\n\n502\n00:25:29.560 --> 00:25:30.500\n>> It is the way I go.\n\n503\n00:25:30.500 --> 00:25:32.960\nI rarely use Quick Create,\nbut don't discount that.\n\n504\n00:25:32.960 --> 00:25:35.580\nYou can still use Quick Create cuz\nmost of the decisions you make\n\n505\n00:25:35.580 --> 00:25:36.780\nyou can change after the fact.\n\n506\n00:25:36.780 --> 00:25:38.800\nI can go back in and\nmove something around.\n\n507\n00:25:38.800 --> 00:25:43.290\nNow, there are somethings you can't change\nlike once I put it into a cloud service,\n\n508\n00:25:43.290 --> 00:25:45.550\nI can't really take it back out\nof that cloud service again,\n\n509\n00:25:45.550 --> 00:25:46.550\nit's kinda stuck there.\n\n510\n00:25:46.550 --> 00:25:48.450\nSo I would have to whip up a new VM.\n\n511\n00:25:48.450 --> 00:25:50.762\nSame thing with affinity groups,\nonce it's in that affinity group,\n\n512\n00:25:50.762 --> 00:25:52.390\nit's kinda hard to move it.\n\n513\n00:25:52.390 --> 00:25:55.450\nSo those things are hard to\nchange your mind on later.\n\n514\n00:25:55.450 --> 00:25:58.350\nBut something like changing\nthe class of the machine or\n\n515\n00:25:58.350 --> 00:26:00.620\nchanging the end points on them we\ncan do all that stuff up to the fact.\n\n516\n00:26:01.930 --> 00:26:05.260\nNow, I just whipped up those virtual\nmachines using the standard portal.\n\n517\n00:26:05.260 --> 00:26:08.300\nLet's run through the preview\nportal real quick.\n\n518\n00:26:08.300 --> 00:26:13.040\nIf I jump over here to the preview portal,\nthe process isn't much different.\n\n519\n00:26:13.040 --> 00:26:16.520\nI've got a nice big New button up here at\nthe top left instead of the bottom left.\n\n520\n00:26:16.520 --> 00:26:19.510\nWe'll overcome the adversity here somehow.\n\n521\n00:26:19.510 --> 00:26:20.850\nBut if I go to New,\n\n522\n00:26:20.850 --> 00:26:23.900\nit's gonna basically kick off a little\nwizard right here in the screen.\n\n523\n00:26:23.900 --> 00:26:26.795\nAnd it's using an HTML5\ndriven interface and, so\n\n524\n00:26:26.795 --> 00:26:31.212\nit's not necessarily the fastest in\nthe world, but it is certainly pretty.\n\n525\n00:26:31.212 --> 00:26:33.610\nAnd so now I can come in and\nI'm in the marketplace.\n\n526\n00:26:33.610 --> 00:26:36.650\nI can search for what I want to do,\nor I can look for\n\n527\n00:26:36.650 --> 00:26:38.530\nwhat it is that I'm trying to launch.\n\n528\n00:26:38.530 --> 00:26:41.950\nI might what to launch\na compute virtual machine.\n\n529\n00:26:41.950 --> 00:26:44.470\nAnd so now, I'm gonna start to see\nthose compute virtual machines here.\n\n530\n00:26:44.470 --> 00:26:49.900\nI've got Windows Server 2016, Ubuntu,\neach of the different components here.\n\n531\n00:26:49.900 --> 00:26:53.920\nAnd most of these are just the common\nthings that people launch.\n\n532\n00:26:53.920 --> 00:26:58.100\nBut I've also got a See all button\nthat will let me see, well,\n\n533\n00:26:58.100 --> 00:26:58.770\nit'll let me see all.\n\n534\n00:26:58.770 --> 00:26:59.960\nIt's kind of what that button does.\n\n535\n00:26:59.960 --> 00:27:03.410\nBut, it'll let me see all the stuff\nout there that isn't necessarily what\n\n536\n00:27:03.410 --> 00:27:05.420\npeople use all the time, right?\n\n537\n00:27:05.420 --> 00:27:08.703\nBut, if I want to kind of recreate\nwhat I did a minute ago I can choose\n\n538\n00:27:08.703 --> 00:27:11.756\nWindows Server 2012 R2 and\nnow the wizard progresses and\n\n539\n00:27:11.756 --> 00:27:14.005\nI can start to pick what\nit is that I want to do.\n\n540\n00:27:14.005 --> 00:27:19.729\nThe classic deployment model or,\nlet me zoom in on that a little bit.\n\n541\n00:27:19.729 --> 00:27:21.831\nOr the resource manager model.\n\n542\n00:27:21.831 --> 00:27:24.663\nNow the resource manager model\ngives us a lot more influence into\n\n543\n00:27:24.663 --> 00:27:26.708\nthe deployment model of\nthe virtual machine,\n\n544\n00:27:26.708 --> 00:27:29.410\nversus the classic model\nthat's pretty straightforward.\n\n545\n00:27:29.410 --> 00:27:33.560\nLet's do the classic one because we'll\ntalk about the resource management later.\n\n546\n00:27:33.560 --> 00:27:37.060\nSo if I go into create on that,\nnow the wizard continues and\n\n547\n00:27:37.060 --> 00:27:40.620\nyou see it's kind of pane after pane\nafter pane as it goes through and\n\n548\n00:27:40.620 --> 00:27:43.630\nstarts prompting for\nthe same information that we saw before.\n\n549\n00:27:43.630 --> 00:27:46.640\nI've got to give it a host name,\na username, a password.\n\n550\n00:27:46.640 --> 00:27:51.290\nI've got to pick the pricing tier,\nI've got to do all those various things\n\n551\n00:27:51.290 --> 00:27:54.950\nthat are a part of creating that new VM.\n\n552\n00:27:54.950 --> 00:27:59.123\nAnd so maybe I'll create Itprotvfile03.\n\n553\n00:27:59.123 --> 00:28:02.722\nAnd I'll it a username itprotvadmin.\n\n554\n00:28:02.722 --> 00:28:07.460\nI'll give it a password which I'm\nstarting to have a hard time remembering.\n\n555\n00:28:08.670 --> 00:28:11.130\nI'll pick that pricing tier.\n\n556\n00:28:11.130 --> 00:28:12.640\nAnd when I choose that,\n\n557\n00:28:12.640 --> 00:28:16.050\nI'll get all my tiers over here in\nthis nice little animated view.\n\n558\n00:28:16.050 --> 00:28:19.060\nI've been doing what, D1s,\nI think, so, I'll stick with D1.\n\n559\n00:28:19.060 --> 00:28:20.830\nOh, actually it try to get me to do a DS.\n\n560\n00:28:21.940 --> 00:28:22.910\nI don't want to do a DS.\n\n561\n00:28:22.910 --> 00:28:24.790\n>> You want to super size that,\nright, Don?\n\n562\n00:28:24.790 --> 00:28:25.309\n>> I know, apparently.\n\n563\n00:28:25.309 --> 00:28:27.955\nSo it's recommending I do a DS.\n\n564\n00:28:27.955 --> 00:28:32.408\nI'm gonna hit View All because I want to\ndo just a regular D1, or as slow as it's\n\n565\n00:28:32.408 --> 00:28:36.410\ngoing here, I might, the wizard would\nbe faster if I just do the DS one.\n\n566\n00:28:36.410 --> 00:28:41.200\nThere we go so, there's the D1,\nI'll pick that one and I'll select it,\n\n567\n00:28:41.200 --> 00:28:44.070\nso now I'll have that D1 chosen here.\n\n568\n00:28:44.070 --> 00:28:46.110\nI can pick network configuration options.\n\n569\n00:28:46.110 --> 00:28:49.310\nI can assign a resource group,\nwhich we haven't seen yet,\n\n570\n00:28:49.310 --> 00:28:52.150\npick my subscriptions and\nall that, and then I can create it.\n\n571\n00:28:52.150 --> 00:28:55.730\nAnd there's an extra little option\ndown here at the bottom where it says\n\n572\n00:28:55.730 --> 00:28:57.200\nPin to dashboard.\n\n573\n00:28:57.200 --> 00:29:01.360\nAnd that way this virtual machine becomes\nreal easy for me to get to later on and\n\n574\n00:29:01.360 --> 00:29:04.692\nspin up more instances like it\nif I need to, pretty easy to do.\n\n575\n00:29:04.692 --> 00:29:08.126\nAll right so I'll go ahead and create\nthat one, and now it's gonna launch that\n\n576\n00:29:08.126 --> 00:29:11.772\nvirtual machine, and I've got this little\nwindow right over here saying creating\n\n577\n00:29:11.772 --> 00:29:14.700\nWindows Server,\nthat's it being pinned to the dashboard.\n\n578\n00:29:14.700 --> 00:29:16.676\nAnd so I can monitor that\nstatus to see when it comes up.\n\n579\n00:29:16.676 --> 00:29:20.630\nIt's all very flashy,\nthe new UI's designed to be easy to use.\n\n580\n00:29:20.630 --> 00:29:21.740\nAnd for the most part it is.\n\n581\n00:29:21.740 --> 00:29:24.080\nIt's a little bit slower\nbecause it is HTML5, but\n\n582\n00:29:24.080 --> 00:29:28.180\nit is easier to kind of get\nfrom point A to point B.\n\n583\n00:29:28.180 --> 00:29:32.410\nAnd if I go over here to my virtual\nmachines, you've got two different views,\n\n584\n00:29:32.410 --> 00:29:35.270\nvirtual machines classic,\nwhich is where we come in and\n\n585\n00:29:35.270 --> 00:29:37.840\nwe just see each of the virtual\nmachines like we're used to.\n\n586\n00:29:37.840 --> 00:29:41.570\nOr regular virtual machines,\nwhich is really the resource monitor view.\n\n587\n00:29:41.570 --> 00:29:44.190\nAnd this one is gonna allow\nus to see virtual machines\n\n588\n00:29:44.190 --> 00:29:46.880\nthrough a relationship that\nwe'll see how to set up later.\n\n589\n00:29:46.880 --> 00:29:50.250\nBecause you might have a web server that's\nuseless without a database server, or\n\n590\n00:29:50.250 --> 00:29:52.470\na database server that's\nuseless without its web server.\n\n591\n00:29:52.470 --> 00:29:53.840\nAnd so you can link those together and\n\n592\n00:29:53.840 --> 00:29:56.970\nyou'll see those represented\nhere in resource groups.\n\n593\n00:29:56.970 --> 00:30:00.150\nBut mine are just classic, and so I see\nthem right here under virtual machines\n\n594\n00:30:00.150 --> 00:30:02.050\nclassic, and\nthere's no resource groups yet.\n\n595\n00:30:02.050 --> 00:30:03.240\nWe'll see those later on.\n\n596\n00:30:03.240 --> 00:30:04.370\n>> Awesome stuff, Don.\n\n597\n00:30:04.370 --> 00:30:08.440\nNow I know we have a few more\nways that we can install or\n\n598\n00:30:08.440 --> 00:30:13.110\ncreate virtual machines using Azure,\nbut our clock has well run out of time.\n\n599\n00:30:13.110 --> 00:30:16.750\nAnd looks like we're gonna have\nto do another episode on that.\n\n600\n00:30:16.750 --> 00:30:19.960\nBut Don, is there anything else we need\nto cover as far as the two ways we've\n\n601\n00:30:19.960 --> 00:30:21.150\nseen so far?\n\n602\n00:30:21.150 --> 00:30:22.280\n>> As far as the portal,\n\n603\n00:30:22.280 --> 00:30:24.380\nI mean that's just a pretty\neasy run through right there.\n\n604\n00:30:24.380 --> 00:30:25.330\nWhipping up the VMs.\n\n605\n00:30:25.330 --> 00:30:27.760\nThere's obviously a lot\nmore that we need to do.\n\n606\n00:30:27.760 --> 00:30:30.430\nWe're gonna talk about a lot of these\nother technologies down the road.\n\n607\n00:30:30.430 --> 00:30:32.490\nWe're going to talk about resource groups,\n\n608\n00:30:32.490 --> 00:30:35.600\nrecovery, all sorts of\nthe things we need to get going.\n\n609\n00:30:35.600 --> 00:30:38.430\nSo all we've seen is\nhow to get the VMs up.\n\n610\n00:30:38.430 --> 00:30:41.137\nWe haven't connected to them yet,\nwe haven't configured them, so\n\n611\n00:30:41.137 --> 00:30:41.984\nstay tuned for that.\n\n612\n00:30:41.984 --> 00:30:44.135\nWe going to get far more in depth on that.\n\n613\n00:30:44.135 --> 00:30:46.555\nWe're also going to take a look on how to\ndo this stuff through the PowerShell too.\n\n614\n00:30:46.555 --> 00:30:47.695\nThat's kind of important.\n\n615\n00:30:47.695 --> 00:30:49.995\nAll coming up in our next set of episodes.\n\n616\n00:30:49.995 --> 00:30:51.505\n>> Awesome.\nWell thank you so much, Don.\n\n617\n00:30:51.505 --> 00:30:53.225\nAnd thank you guys for joining us today.\n\n618\n00:30:53.225 --> 00:30:55.585\nHopefully you'll see it\nin the next episode.\n\n619\n00:30:55.585 --> 00:30:57.665\nAs for this we're going to\nclose it down for ITProTV.\n\n620\n00:30:57.665 --> 00:30:59.515\nI've been your host Daniel Lowrie.\n\n621\n00:30:59.515 --> 00:31:00.535\n>> And I'm Don Pezet.\n\n622\n00:31:00.535 --> 00:31:02.593\n>> See you next time.\n\n623\n00:31:02.593 --> 00:31:08.770\n[MUSIC]\n\n",
          "vimeoId": "147474296"
        },
        {
          "description": "In this episode, Daniel and Don explain how to install and configure PowerShell for Azure. First they walk you through downloading and installing the Azure commands for PowerShell. Then they take you step-by-step through connecting to Azure using PowerShell in multiple different ways. Finally, they show you how to create an Azure Virtual Machine via the PowerShell.",
          "length": "1833",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-1-4-azure_powershell-120115-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-1-4-azure_powershell-120115-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-1-4-azure_powershell-120115-1-sm.jpg",
          "title": "Azure PowerShell",
          "transcript": "WEBVTT\n\n1\n00:00:00.216 --> 00:00:10.216\n[MUSIC]\n\n2\n00:00:12.212 --> 00:00:13.883\nAll right, greetings everyone.\n\n3\n00:00:13.883 --> 00:00:16.845\nWelcome to another great\nepisode of ITProTV.\n\n4\n00:00:16.845 --> 00:00:18.738\nI'm your host Daniel Lowrie, and\n\n5\n00:00:18.738 --> 00:00:23.257\nin this episode we're gonna take a look\nat the Microsoft Azure Virtual Machines.\n\n6\n00:00:23.257 --> 00:00:27.840\nAnd coming into the studio with us today,\njoining us is none other than Mr.\n\n7\n00:00:27.840 --> 00:00:31.280\nDon Pezet to help lend his\nexpertise to this said topic.\n\n8\n00:00:31.280 --> 00:00:33.460\nDon, welcome to the show today,\nhow are you doing?\n\n9\n00:00:33.460 --> 00:00:35.550\n>> I am doing swell Daniel,\nthanks for having me on the show.\n\n10\n00:00:35.550 --> 00:00:38.060\nAnd today we're gonna jump into\na kind of a neat topic here.\n\n11\n00:00:38.060 --> 00:00:41.020\nWe're gonna be taking a look\nat the Azure PowerShell.\n\n12\n00:00:41.020 --> 00:00:44.470\nNow, in a few of our earlier\nepisodes I made comments,\n\n13\n00:00:44.470 --> 00:00:48.010\nI'm not doing a retraction here like,\nwe need to apologize.\n\n14\n00:00:48.010 --> 00:00:52.570\nI made a few comments about how we\ndo a lot of the web UI for Azure.\n\n15\n00:00:52.570 --> 00:00:55.590\nThe Azure portal, the preview portal the\nlegacy portal, they're all great tools for\n\n16\n00:00:55.590 --> 00:00:59.110\ngetting in there and doing stuff, but\nthat you can also use PowerShell.\n\n17\n00:01:00.170 --> 00:01:03.130\nBut the thing is, the PowerShell\ncommandlets are not there by default.\n\n18\n00:01:03.130 --> 00:01:07.730\nWhen you install Windows 7,\nWindows 8, Windows 10, Server 2008,\n\n19\n00:01:07.730 --> 00:01:10.170\nServer 2012, they've all got\nPowerShell built into them.\n\n20\n00:01:10.170 --> 00:01:11.927\nAnd different versions of it, right?\n\n21\n00:01:11.927 --> 00:01:16.137\nYou might have PowerShell 2.0, 3.0,\n4.0, I think, are we up to 5.0 now?\n\n22\n00:01:16.137 --> 00:01:17.636\nI'm pretty sure we've\ngot 5.0 in Windows 10.\n\n23\n00:01:17.636 --> 00:01:18.385\n>> I think so.\n\n24\n00:01:18.385 --> 00:01:21.163\n>> So, you can have any number of\ndifferent versions, but it doesn't matter\n\n25\n00:01:21.163 --> 00:01:24.370\nwhich one you have, they don't have\nthe Azure commandlets built into it.\n\n26\n00:01:24.370 --> 00:01:27.147\nSo, if we wanna use\nthe PowerShell to manage Azure,\n\n27\n00:01:27.147 --> 00:01:31.265\nwe've gotta install that add-on to\nget the PowerShell commandlets there.\n\n28\n00:01:31.265 --> 00:01:33.823\nAnd then we've gotta get it\nconnected to our Azure account so\n\n29\n00:01:33.823 --> 00:01:35.389\nwe can start to work with the system.\n\n30\n00:01:35.389 --> 00:01:38.547\nSo, I wanna walk you guys through that\nprocess, show you how to get it set up,\n\n31\n00:01:38.547 --> 00:01:41.320\nand then maybe we'll create a virtual\nmachine using the PowerShell\n\n32\n00:01:41.320 --> 00:01:44.210\ncuz that's a good time and get the chance\nto kind of see how that works.\n\n33\n00:01:44.210 --> 00:01:45.809\n>> People like the virtual machines Don,\n\n34\n00:01:45.809 --> 00:01:47.800\nit might be why they're watching the show,\nso.\n\n35\n00:01:47.800 --> 00:01:50.966\n[LAUGH] It'll be fun to see you\nactually create it using PowerShell.\n\n36\n00:01:50.966 --> 00:01:55.270\nNow PowerShell comes, like you said,\nwith just about every flavor of Windows,\n\n37\n00:01:55.270 --> 00:01:59.590\nat least in the last what, two or three\niterations of Windows operating system.\n\n38\n00:01:59.590 --> 00:02:02.820\nAnd you're saying I can use that,\nI don't have to install anything special,\n\n39\n00:02:02.820 --> 00:02:06.860\nother than the Azure PowerShell\nstuff that goes into it.\n\n40\n00:02:06.860 --> 00:02:09.534\nBut that PowerShell, the normal one\nthat we have on our Windows machine,\n\n41\n00:02:09.534 --> 00:02:10.710\nthat's what we're gonna use.\n\n42\n00:02:10.710 --> 00:02:12.970\n>> Right, so\nlet's run through that process here.\n\n43\n00:02:12.970 --> 00:02:16.280\nI've got a Windows 7 machine here,\nI normally run Windows 10 now, but\n\n44\n00:02:16.280 --> 00:02:19.820\nI did Windows 7, cuz I wanted to show\nyou guys what the oldest supported OS.\n\n45\n00:02:19.820 --> 00:02:23.790\nSo, I guess technically Vista is still\nsupported, but who runs Vista, right?\n\n46\n00:02:23.790 --> 00:02:26.962\nSo we'll do it with the oldest\nsupported OS that people actually run.\n\n47\n00:02:26.962 --> 00:02:28.181\n>> The creepy Uncle that nobody likes.\n\n48\n00:02:28.181 --> 00:02:30.444\n[LAUGH]\n>> I'm on Windows 7,\n\n49\n00:02:30.444 --> 00:02:34.770\nand if I just do PowerShell, there it is,\nso we've got PowerShell pre-installed.\n\n50\n00:02:34.770 --> 00:02:38.160\nI can launch it, here it is, I can\nstart getting some things done, right?\n\n51\n00:02:38.160 --> 00:02:43.180\nAnd if I do a get-command and\nI look for *azure*.\n\n52\n00:02:43.180 --> 00:02:46.380\nSo I'm looking for\nany command with the word azure in it.\n\n53\n00:02:46.380 --> 00:02:47.420\nI get nothing, right?\n\n54\n00:02:47.420 --> 00:02:48.360\nSo there's none of that.\n\n55\n00:02:48.360 --> 00:02:49.200\nIt's not case sensitive.\n\n56\n00:02:49.200 --> 00:02:51.810\nBut let's just assume for\na moment that it was a capital A.\n\n57\n00:02:51.810 --> 00:02:53.010\nThen we got nothing there, too, right?\n\n58\n00:02:53.010 --> 00:02:56.190\nSo there's no Azure commands built in,\nwe need to add them in.\n\n59\n00:02:56.190 --> 00:02:58.860\nFortunately, Microsoft's\nmade that pretty easy.\n\n60\n00:02:58.860 --> 00:03:02.843\nSo with Windows, we now have this thing\ncalled the Web Platform Installer.\n\n61\n00:03:02.843 --> 00:03:06.172\nAnd it's pretty neat, because if you\nwanna whip up a WordPress website, or\n\n62\n00:03:06.172 --> 00:03:09.761\na Drupal site, or something like that,\nyou don't have to know how to install it,\n\n63\n00:03:09.761 --> 00:03:11.809\nyou can just run this\nWeb Platform Installer.\n\n64\n00:03:11.809 --> 00:03:14.280\nAnd it'll install it and\nhelp you keep those up to date.\n\n65\n00:03:14.280 --> 00:03:18.020\nWell, one of the other things that it\ncan install is the Azure platform.\n\n66\n00:03:18.020 --> 00:03:19.870\nSo it's a little more\nthan just webservers,\n\n67\n00:03:19.870 --> 00:03:21.640\nwhich is kinda what that\nplatform was originally made for.\n\n68\n00:03:21.640 --> 00:03:25.070\nBut it makes it really easy to get\nthe PowerShell updates installed.\n\n69\n00:03:25.070 --> 00:03:28.465\nAnd I would be doing the same\nthing if I were on Windows 10, or\n\n70\n00:03:28.465 --> 00:03:30.545\nWindows 8, or Windows 7,\nit's really the same on all of them.\n\n71\n00:03:30.545 --> 00:03:34.135\nEven on Server, that Web Platform\nInstaller is kinda the way to go.\n\n72\n00:03:34.135 --> 00:03:36.935\nSo what I'm gonna do, is I'm just\ngonna fire up a web browser here,\n\n73\n00:03:36.935 --> 00:03:39.795\nInternet Explorer, and\nI'm just gonna do a quick search for\n\n74\n00:03:39.795 --> 00:03:43.925\nMicrosoft Web Platform Installer.\n\n75\n00:03:43.925 --> 00:03:46.648\nAnd that'll turn up,\nthe Web Platform Installer.\n\n76\n00:03:46.648 --> 00:03:49.200\nAnd then I'm just gonna jump in and\ninstall it.\n\n77\n00:03:49.200 --> 00:03:52.950\nIt's super easy, you just install it with\nall the defaults and you'll be good to go.\n\n78\n00:03:52.950 --> 00:03:55.830\nIf we look at it, it's kind of telling\nyou why you're gonna love this,\n\n79\n00:03:55.830 --> 00:03:57.950\nand they say just all sorts of crazy,\nsilly things.\n\n80\n00:03:57.950 --> 00:04:01.370\nMy favorite is this guy right here.\n\n81\n00:04:01.370 --> 00:04:03.244\nThat it's It's App-tastic.\n\n82\n00:04:03.244 --> 00:04:05.330\n>> [LAUGH]\n>> I don't know what that means, but\n\n83\n00:04:05.330 --> 00:04:06.010\nit's App-tastic.\n\n84\n00:04:06.010 --> 00:04:07.838\n>> It makes all your wildest\ndreams come true Don.\n\n85\n00:04:07.838 --> 00:04:09.307\n>> [LAUGH]\n>> [LAUGH]\n\n86\n00:04:09.307 --> 00:04:10.305\n>> You wouldn't believe it.\n\n87\n00:04:10.305 --> 00:04:11.850\nSo, I'm gonna download and install that.\n\n88\n00:04:11.850 --> 00:04:13.020\nSo I'm just gonna run it.\n\n89\n00:04:13.020 --> 00:04:15.860\nI do need to be admin,\nit's gonna install the platform installer.\n\n90\n00:04:15.860 --> 00:04:18.865\nAnd once it's done, it'll be there,\nI mean it installs super fast.\n\n91\n00:04:18.865 --> 00:04:21.960\nThere's not really much, cuz it's not\nreally installing any actual software\n\n92\n00:04:21.960 --> 00:04:25.340\nhere, it's just installing a UI,\nthat lets you find software.\n\n93\n00:04:25.340 --> 00:04:28.270\nAnd the software I care about\nare the Azure add-ons, and so\n\n94\n00:04:28.270 --> 00:04:30.530\nwe're gonna get that installed.\n\n95\n00:04:30.530 --> 00:04:31.460\nAnd now it's installed.\n\n96\n00:04:31.460 --> 00:04:32.760\nThat was it, all right?\n\n97\n00:04:32.760 --> 00:04:37.030\nThis is the Web Platform Installer, and\nit lets you pick from various products.\n\n98\n00:04:37.030 --> 00:04:40.040\nNow what's gonna come up first\nis what's called the Spotlight.\n\n99\n00:04:40.040 --> 00:04:43.570\nAnd these are whatever products\nare the most popular today.\n\n100\n00:04:43.570 --> 00:04:47.590\nAnd it changes, right now you'll notice\nwhat's the number one popular app?\n\n101\n00:04:47.590 --> 00:04:50.322\nThe Microsoft Azure PowerShell, which\nis exactly what I want for this show,\n\n102\n00:04:50.322 --> 00:04:51.298\nit's rather convenient.\n\n103\n00:04:51.298 --> 00:04:53.721\n>> [LAUGH]\n>> But by the time you watch this episode,\n\n104\n00:04:53.721 --> 00:04:55.966\nthat might not be the coolest\nthing in the world.\n\n105\n00:04:55.966 --> 00:04:57.910\nThere might be other\nthings that are up there.\n\n106\n00:04:57.910 --> 00:04:59.980\nSo you can always use this search up here.\n\n107\n00:04:59.980 --> 00:05:04.190\nAnd if you just type Azure and search for\nit, it'll turn up pretty quick in there,\n\n108\n00:05:04.190 --> 00:05:06.540\nand you'll be able to find\nthe Azure PowerShell.\n\n109\n00:05:06.540 --> 00:05:08.750\nI say that, and as I search for\nit, it's kind of,\n\n110\n00:05:08.750 --> 00:05:11.310\nit might be easier to search for\nPowerShell.\n\n111\n00:05:11.310 --> 00:05:13.980\nLet me search for\nthat instead and there we go.\n\n112\n00:05:13.980 --> 00:05:17.040\nSo we've got like\nMicrosoft Azure PowerShell right here,\n\n113\n00:05:17.040 --> 00:05:18.700\nyou've also got previous versions of it,\n\n114\n00:05:18.700 --> 00:05:21.840\nlike 0.9 is there, but I can come in and\nfind it and install it.\n\n115\n00:05:21.840 --> 00:05:25.177\nSo that's the one that I want, I've got\nit right there and it just, whoops.\n\n116\n00:05:25.177 --> 00:05:27.510\n[LAUGH] We're gonna super zoom in here.\n\n117\n00:05:27.510 --> 00:05:29.564\nBut we just want that one,\nMicrosoft Azure PowerShell.\n\n118\n00:05:29.564 --> 00:05:34.405\nAnd when you've found it, then you hit\nthat nice little Add button over here, and\n\n119\n00:05:34.405 --> 00:05:35.260\nhit Install.\n\n120\n00:05:35.260 --> 00:05:37.970\nNow, you've already got\nPowerShell on your system, so\n\n121\n00:05:37.970 --> 00:05:41.410\nwhat it's doing is really just\nmaking you sign off on a license,\n\n122\n00:05:41.410 --> 00:05:46.070\nwhich I'll accept, and\nthen adding onto your existing PowerShell.\n\n123\n00:05:46.070 --> 00:05:49.850\nSo that's kind of a nice little feature\nthere that we don't have to really\n\n124\n00:05:49.850 --> 00:05:51.780\nput a whole heck of a lot\nof work into this thing.\n\n125\n00:05:51.780 --> 00:05:55.830\nThat it's gonna go in and just get\nthis set up for us, and in business.\n\n126\n00:05:55.830 --> 00:06:00.337\nNow when it's done, it's important to know\nthat we'll actually have what looks like\n\n127\n00:06:00.337 --> 00:06:05.240\ntwo PowerShells on our system, the regular\nPowerShell and the Azure PowerShell.\n\n128\n00:06:05.240 --> 00:06:08.732\nWell the Azure PowerShell is really\njust your regular PowerShell,\n\n129\n00:06:08.732 --> 00:06:11.410\nbut with the Azure add-ons enabled, okay?\n\n130\n00:06:11.410 --> 00:06:14.600\nSo you'll have to make sure you run\nthe correct icon, and I normally bookmark\n\n131\n00:06:14.600 --> 00:06:17.890\nthe right one, or pin it to your taskbar,\nwhatever, so you've always got it.\n\n132\n00:06:17.890 --> 00:06:20.430\nBut now that that's finished,\nlet me show you what this is like.\n\n133\n00:06:20.430 --> 00:06:22.760\nI'm gonna get out of that\nWeb Platform Installer.\n\n134\n00:06:22.760 --> 00:06:27.710\nAnd, I'm gonna close this one, so\nI get some all nice, new, fresh windows.\n\n135\n00:06:28.740 --> 00:06:30.960\nAnd we're gonna be App-tastic,\nit'll be awesome.\n\n136\n00:06:30.960 --> 00:06:32.920\nAll right, so,\nI'm gonna fire up my Start Menu here, and\n\n137\n00:06:32.920 --> 00:06:37.260\nI'm just gonna type in PowerShell, and\nI'll see my PowerShell item right there.\n\n138\n00:06:37.260 --> 00:06:39.640\nAnd if I launch it,\nthis is my regular Powershell.\n\n139\n00:06:39.640 --> 00:06:46.460\nIf I do get-command *azure*,\nnow I see commands, right?\n\n140\n00:06:46.460 --> 00:06:49.202\nSo now I've actually got\nthe Azure commands available,\n\n141\n00:06:49.202 --> 00:06:50.924\nthey're right here that I can use.\n\n142\n00:06:50.924 --> 00:06:54.799\nNow, when I brought up that Start menu,\nyou'll notice, whoops.\n\n143\n00:06:54.799 --> 00:06:57.500\nAs I jump all over the place, here we go.\n\n144\n00:06:57.500 --> 00:07:00.720\nYou'll notice when I launch that, it took\nme right to my user profile and all that.\n\n145\n00:07:00.720 --> 00:07:03.870\nBut when I typed it,\nI typed powershell and\n\n146\n00:07:03.870 --> 00:07:07.395\nin the icons here I actually\nhave more than one, so\n\n147\n00:07:07.395 --> 00:07:13.195\nI've got the Windows PowerShell, and\nthe Microsoft Azure PowerShell, okay.\n\n148\n00:07:13.195 --> 00:07:17.625\nNow when I ran get-command,\nit found even the Azure PowerShell stuff,\n\n149\n00:07:17.625 --> 00:07:20.105\neven though I ran the regular PowerShell.\n\n150\n00:07:20.105 --> 00:07:24.525\nBut there are some commands that don't\nwork quite right unless you actually\n\n151\n00:07:24.525 --> 00:07:26.175\nrun the one that's\nlabeled Azure PowerShell.\n\n152\n00:07:26.175 --> 00:07:28.015\nSo that's what I was saying,\nwe need to pin that.\n\n153\n00:07:28.015 --> 00:07:29.865\nAnd one of those is part\nof the user authentication,\n\n154\n00:07:29.865 --> 00:07:31.680\nwhich is kind of important.\n\n155\n00:07:31.680 --> 00:07:34.180\nSo we need to make sure this\nis the one that we run.\n\n156\n00:07:34.180 --> 00:07:37.370\nThe first time you run it, it's a good\nidea to run it as an administrator,\n\n157\n00:07:37.370 --> 00:07:40.040\nthat way if you customize the window\nit'll save your settings.\n\n158\n00:07:40.040 --> 00:07:41.950\nIf you don't run it as administrator\nit won't save your settings,\n\n159\n00:07:41.950 --> 00:07:43.120\nwhich is a little annoying.\n\n160\n00:07:43.120 --> 00:07:45.120\nBut you'll probably wanna run this one.\n\n161\n00:07:45.120 --> 00:07:47.400\nSo I'm just gonna right-click on it,\nchoose Run as administrator.\n\n162\n00:07:47.400 --> 00:07:50.640\nAnd we'll get that one authorized for\nus, and\n\n163\n00:07:50.640 --> 00:07:55.640\nit's gonna launch, and yeah,\nthe layout's all messed up and stuff.\n\n164\n00:07:55.640 --> 00:07:58.472\nI always have to customize this a bit,\ncuz I can't read the thing,\n\n165\n00:07:58.472 --> 00:08:00.200\nthey pick that microscopic font for us.\n\n166\n00:08:00.200 --> 00:08:03.146\nSo I'm gonna change my font, and\nif I hadn't run this as administrator,\n\n167\n00:08:03.146 --> 00:08:04.440\nit wouldn't save my settings.\n\n168\n00:08:04.440 --> 00:08:06.500\nThat's why I made sure to run it that way.\n\n169\n00:08:06.500 --> 00:08:11.291\nAnd I always have to kinda tweak the sizes\na little bit here to get it just the way\n\n170\n00:08:11.291 --> 00:08:11.820\nI want.\n\n171\n00:08:11.820 --> 00:08:13.845\n>> Everyone has 15-20 vision, Don.\n\n172\n00:08:13.845 --> 00:08:17.780\n>> [LAUGH] I don't wanna stick\na magnifying glass on my monitor.\n\n173\n00:08:17.780 --> 00:08:19.410\nBut now I've got it kind\nof set the way I want, and\n\n174\n00:08:19.410 --> 00:08:24.380\nsince I ran it as an admin,\nI'll be able to kinda let it say that.\n\n175\n00:08:24.380 --> 00:08:26.890\nAnd if I do a get-command and I search for\n\n176\n00:08:26.890 --> 00:08:29.630\nazure, well,\nall those commands are there, right?\n\n177\n00:08:29.630 --> 00:08:31.720\nSo I've got a ton of\nazure commands available.\n\n178\n00:08:31.720 --> 00:08:33.430\nNow we can start to work with the system.\n\n179\n00:08:33.430 --> 00:08:34.710\nThat wasn't so bad, was it, right?\n\n180\n00:08:34.710 --> 00:08:36.230\n>> No, not too bad at all.\n\n181\n00:08:36.230 --> 00:08:38.920\n>> Well the next step is really important.\n\n182\n00:08:38.920 --> 00:08:41.200\nAnd it actually is a little\nbit more challenging.\n\n183\n00:08:41.200 --> 00:08:44.970\nThis is nice, but it's actually useless\nuntil we connect it to our account.\n\n184\n00:08:44.970 --> 00:08:48.300\nSo I've gotta get azure\nconnected up to my account so\n\n185\n00:08:48.300 --> 00:08:51.710\nit knows when I say create a VM,\nwhere to go to create that and so on.\n\n186\n00:08:51.710 --> 00:08:54.700\nSo that's gonna be my next\nstep is taking this and\n\n187\n00:08:54.700 --> 00:08:57.340\ngetting it connected to my Azure account.\n\n188\n00:08:57.340 --> 00:09:00.270\nAll right,\nthere's two ways to get it connected.\n\n189\n00:09:00.270 --> 00:09:06.680\nOne way is that we can actually run\nthe add-Azureaccount commandlet.\n\n190\n00:09:06.680 --> 00:09:07.390\nAll right?\n\n191\n00:09:07.390 --> 00:09:12.190\nAnd what this is gonna do is it's actually\nreach out to Microsoft's website.\n\n192\n00:09:12.190 --> 00:09:18.310\nAnd when it does, it's making sure\nI said okay and authorized it.\n\n193\n00:09:18.310 --> 00:09:22.220\nIt's reaching out to Microsoft's website\nand it's prompting me with a log in, and\n\n194\n00:09:22.220 --> 00:09:25.480\nso now I can log in and\nit'll know me, it'll know my account,\n\n195\n00:09:25.480 --> 00:09:27.380\nit'll connect up and we'll be in business.\n\n196\n00:09:27.380 --> 00:09:28.500\nOkay.\n\n197\n00:09:28.500 --> 00:09:33.265\nBut what if I've got a server that,\nmaybe it has API access out to Azure,\n\n198\n00:09:33.265 --> 00:09:36.646\nbut it doesn't have web access like this,\nright?\n\n199\n00:09:36.646 --> 00:09:38.875\nWell, that's a little bit of a problem,\nit's harder for\n\n200\n00:09:38.875 --> 00:09:41.848\nme to generate this kind of connection,\nright, these connection details.\n\n201\n00:09:41.848 --> 00:09:43.844\nSo instead of instead\nof doing it this way,\n\n202\n00:09:43.844 --> 00:09:46.394\nwhere I actually log in with\na username and a password,\n\n203\n00:09:46.394 --> 00:09:49.680\nthere is another way I can do it which\nis to generate a credential file.\n\n204\n00:09:49.680 --> 00:09:50.424\nAll right.\n\n205\n00:09:50.424 --> 00:09:53.947\nA credential file, it's kind of like\na one-time, well it's not one-time,\n\n206\n00:09:53.947 --> 00:09:56.486\nthough it is a key that you\ncan use to authorize yourself.\n\n207\n00:09:56.486 --> 00:09:59.709\nAnd it's a file that you could copy\nto a server that had limited internet\n\n208\n00:09:59.709 --> 00:10:02.022\nconnectivity or\nvery restricted connectivity and\n\n209\n00:10:02.022 --> 00:10:05.890\nthen you could authorize this connection,\nand let it go off and run from there.\n\n210\n00:10:05.890 --> 00:10:10.320\nSo instead of logging in that way, the\nother way is a little bit more involved.\n\n211\n00:10:10.320 --> 00:10:15.539\nThe command that we run\nis Get-AzurePublish,\n\n212\n00:10:15.539 --> 00:10:20.460\nI can type this, Publishsettings file.\n\n213\n00:10:20.460 --> 00:10:25.360\nWhat it's gonna do,\nis this basically request a file that\n\n214\n00:10:25.360 --> 00:10:29.080\nhas all the settings for our account and\nunderstands what user account we are,\n\n215\n00:10:29.080 --> 00:10:32.900\nwhat subscription ID we have, what data\ncenters were working on and all that.\n\n216\n00:10:32.900 --> 00:10:33.960\nAnd we run it,\n\n217\n00:10:33.960 --> 00:10:38.720\nsee how it's launching me into a web\npage I could do this from my laptop.\n\n218\n00:10:38.720 --> 00:10:39.610\nFrom my desktop.\n\n219\n00:10:39.610 --> 00:10:43.510\nFrom any computer where I was\nlogged into the Azure website.\n\n220\n00:10:43.510 --> 00:10:46.060\nSo I was already logged into\nAzure here in the background.\n\n221\n00:10:46.060 --> 00:10:48.560\nAnd since I was already logged in,\nit took me here, and\n\n222\n00:10:48.560 --> 00:10:52.010\nnow it's letting me\ndownload a Settings file.\n\n223\n00:10:52.010 --> 00:10:56.250\nAnd when I download that file, I can\nsave that to my Desktop, or wherever.\n\n224\n00:10:56.250 --> 00:10:57.590\nI'll just save it right onto the Desktop.\n\n225\n00:10:59.690 --> 00:11:02.010\nAnd now I can take that settings file and\nI can copy it to a USB key.\n\n226\n00:11:02.010 --> 00:11:06.520\nI can take that USB key and take it to\na server with limited connectivity and\n\n227\n00:11:06.520 --> 00:11:10.610\nall I have to do is import that file,\nand now it's connected to my account.\n\n228\n00:11:10.610 --> 00:11:14.650\nI can give that file to somebody else and\nthey can get connected to my account and\n\n229\n00:11:14.650 --> 00:11:16.710\nI didn't have to tell them my password,\nright?\n\n230\n00:11:16.710 --> 00:11:22.180\nThe other way, the add-azure subscription,\nwe have to, sorry, add-azure account.\n\n231\n00:11:22.180 --> 00:11:24.610\nFor that one we have to type\nin our user name and password.\n\n232\n00:11:24.610 --> 00:11:29.940\nWith this one, it's not actually in there,\nit's a private key that's in that file.\n\n233\n00:11:29.940 --> 00:11:31.690\nSo it kinda gets past having\nto enter that password.\n\n234\n00:11:31.690 --> 00:11:33.940\nNow, on a positive side we've got that,\nright.\n\n235\n00:11:33.940 --> 00:11:37.657\nBut on a negative side, what happens if\nsomebody else gets hold of that file?\n\n236\n00:11:37.657 --> 00:11:38.920\n>> Keys to the kingdom.\n\n237\n00:11:38.920 --> 00:11:40.040\n>> That's exactly right.\n\n238\n00:11:40.040 --> 00:11:44.190\nThey could plug that into their computer,\nimport it into their system.\n\n239\n00:11:44.190 --> 00:11:49.270\nAnd now they've got access to your whole\naccount and whatever permissions you have.\n\n240\n00:11:49.270 --> 00:11:52.600\nSo if your user role has full\nadmin access like mine does,\n\n241\n00:11:52.600 --> 00:11:54.360\nthen they could start spinning up VMs.\n\n242\n00:11:54.360 --> 00:11:56.850\nThey could start doing all kinds of\ncrazy stuff from the PowerShell.\n\n243\n00:11:56.850 --> 00:11:59.740\nWhich admittedly is a little harder, but\nit's not impossible, and they can spin\n\n244\n00:11:59.740 --> 00:12:03.200\nthings up and get some action going on,\nso that's a big challenge.\n\n245\n00:12:03.200 --> 00:12:06.470\nWe need to make sure we secure this file,\nand what Microsoft recommends is that you\n\n246\n00:12:06.470 --> 00:12:10.100\ngenerate the file, you go and import it on\nthe other system, and when you're done,\n\n247\n00:12:10.100 --> 00:12:13.400\nyou delete the file,\ndon't keep it around, or lock it up.\n\n248\n00:12:13.400 --> 00:12:15.540\nTreat it like the private\nkey of an SSL certificate.\n\n249\n00:12:15.540 --> 00:12:18.580\nYou don't want that getting out there,\nyou don't want this getting out either.\n\n250\n00:12:18.580 --> 00:12:20.670\nAlright, and\nthey even give me the instructions here.\n\n251\n00:12:20.670 --> 00:12:22.910\nNow I can take that file\nto any of my servers or\n\n252\n00:12:22.910 --> 00:12:25.840\nany workstation that's\nrunning Azure Power Shot.\n\n253\n00:12:25.840 --> 00:12:28.220\nI keep saying server, but\nit could be a work station.\n\n254\n00:12:28.220 --> 00:12:32.900\nAnd then we use the import-azure\npublish settings file and\n\n255\n00:12:32.900 --> 00:12:38.530\nwe specify that file to import it back in,\nand now we'll have that account.\n\n256\n00:12:38.530 --> 00:12:44.800\nSo, for example,\nif I go back to my PowerShell here,\n\n257\n00:12:44.800 --> 00:12:48.910\nI can do an import Azure\npublic settings file, and\n\n258\n00:12:48.910 --> 00:12:54.190\nthen I need to give it the path to\nthe file, right, and this can be a little\n\n259\n00:12:54.190 --> 00:12:58.570\nbit long I suppose,\nI shouldn't have put it on my desktop.\n\n260\n00:12:58.570 --> 00:13:01.640\nWe'll do a little Tab, auto complete here,\nmaybe that will help me.\n\n261\n00:13:01.640 --> 00:13:02.951\n>> That's why they invented it, Don.\n\n262\n00:13:02.951 --> 00:13:03.997\n[LAUGH]\n>> [LAUGH]\n\n263\n00:13:03.997 --> 00:13:05.337\n>> I'm sick of all this typing.\n\n264\n00:13:05.337 --> 00:13:06.445\n>> And what did I call that?\n\n265\n00:13:06.445 --> 00:13:07.436\nThere we go, all right.\n\n266\n00:13:07.436 --> 00:13:10.450\nSo a little Tab, Auto Complete\nkinda helped me along on that one.\n\n267\n00:13:10.450 --> 00:13:14.150\nAnd once I get that punched in.\n\n268\n00:13:14.150 --> 00:13:18.610\nNow I can run that and it's gonna\nimport that, and that's got the key,\n\n269\n00:13:18.610 --> 00:13:22.300\na private key that identifies me,\nand now I'm able to add it and\n\n270\n00:13:22.300 --> 00:13:25.980\nconnect to my account, and I didn't have\nto provide a user name and a password.\n\n271\n00:13:25.980 --> 00:13:30.900\nRight, and if I had limited connectivity,\nmaybe I don't have a web browser installed\n\n272\n00:13:30.900 --> 00:13:34.360\non this machine, I have access to the web,\nI just don't have a web browser.\n\n273\n00:13:34.360 --> 00:13:36.920\nWell, now I could do this and\nmy PowerShell is enabled.\n\n274\n00:13:36.920 --> 00:13:39.060\nReally useful with, like,\nserver core installs,\n\n275\n00:13:39.060 --> 00:13:43.190\nwhere you don't have Internet Explorer,\nso you can't authenticate that way, but\n\n276\n00:13:43.190 --> 00:13:44.960\nyou can do this, and\nyou'll be able to import it in.\n\n277\n00:13:44.960 --> 00:13:47.420\nOnce you're connected, now it's attached.\n\n278\n00:13:47.420 --> 00:13:50.390\nYou see, I'm attached to IT Pro TV demo,\nthat's my account,\n\n279\n00:13:50.390 --> 00:13:52.240\nand now I'm ready to rock.\n\n280\n00:13:53.400 --> 00:13:56.170\nNow, when I say I'm ready to rock,\nwhat does that mean?\n\n281\n00:13:56.170 --> 00:13:58.201\nWell, now the sky is the limits, right?\n\n282\n00:13:58.201 --> 00:14:02.100\nRemember when I did get-command*Azure*.\n\n283\n00:14:02.100 --> 00:14:04.814\nAll those commands that I had.\n\n284\n00:14:04.814 --> 00:14:08.181\n[LAUGH] That's exactly what I wanted.\n\n285\n00:14:08.181 --> 00:14:11.863\nAnyhow, all these commands that we have,\nthey don't really work,\n\n286\n00:14:11.863 --> 00:14:15.920\nuntil you attach them to an account,\napparently typing doesn't read it.\n\n287\n00:14:15.920 --> 00:14:17.370\n[LAUGH] Anyways, all these commands,\n\n288\n00:14:17.370 --> 00:14:19.350\nthey don't work until you're\nattached to an account.\n\n289\n00:14:19.350 --> 00:14:22.030\nNow that I'm attached to an account,\nI can start to do stuff.\n\n290\n00:14:23.180 --> 00:14:24.870\nI can do things like work\nwith my subscription.\n\n291\n00:14:24.870 --> 00:14:26.390\nI can spin up virtual machines.\n\n292\n00:14:26.390 --> 00:14:27.860\nI can create storage.\n\n293\n00:14:27.860 --> 00:14:29.690\nI can do whatever we need.\n\n294\n00:14:29.690 --> 00:14:30.860\nSo this is pretty important.\n\n295\n00:14:30.860 --> 00:14:32.923\nSo let's kind of recap what I've done so\nfar.\n\n296\n00:14:32.923 --> 00:14:35.880\nFirst, I installed the web\nplatform installer.\n\n297\n00:14:35.880 --> 00:14:38.001\nJust went to Microsoft website,\ndownloaded it,\n\n298\n00:14:38.001 --> 00:14:39.875\nit was installed in under a minute, right.\n\n299\n00:14:39.875 --> 00:14:46.110\nThen in the web platform installer I\nadded the PowerShell extensions, okay.\n\n300\n00:14:46.110 --> 00:14:48.510\nThis Windows 7 machine that I'm\none is a pretty stock install.\n\n301\n00:14:48.510 --> 00:14:50.619\nIt's Windows 7 Enterprise but\nthat doesn't really matter.\n\n302\n00:14:50.619 --> 00:14:52.570\nI have done all the Windows updates.\n\n303\n00:14:52.570 --> 00:14:54.610\nThat's really the only\nthing I've changed on it,\n\n304\n00:14:54.610 --> 00:14:56.650\nhaven't really installed\nany other software.\n\n305\n00:14:56.650 --> 00:15:01.440\nThen I install the Azure Power Shell\nadd-ons from the web platform installer.\n\n306\n00:15:01.440 --> 00:15:06.900\nThen, once that was done, we either\nrun the Add-AzureAccount command line,\n\n307\n00:15:06.900 --> 00:15:09.780\nand log in with our username and password.\n\n308\n00:15:09.780 --> 00:15:13.460\nOr we do the import\npublished settings file and\n\n309\n00:15:13.460 --> 00:15:15.800\nbring it in that way to get authenticated.\n\n310\n00:15:15.800 --> 00:15:17.770\nNow it's added, and we should be kicking.\n\n311\n00:15:17.770 --> 00:15:23.720\nSo I should be able to run my\nget-Azure Account which I had, right?\n\n312\n00:15:23.720 --> 00:15:28.650\nAnd I can see that I'm connected to\nan account or Get-AzureSubscription and\n\n313\n00:15:30.430 --> 00:15:32.390\nI can see my subscription, right?\n\n314\n00:15:32.390 --> 00:15:35.320\nAnd so, I am connected,\nI'm working with my account and\n\n315\n00:15:35.320 --> 00:15:40.100\nI can start using all the other commands\nthat are kind of a part of that.\n\n316\n00:15:40.100 --> 00:15:46.800\nSo for example, I might do Get-AzureVM and\nstart to pull this to my virtual machines.\n\n317\n00:15:46.800 --> 00:15:49.930\nAnd it's not gonna ask me for username and\npassword cuz it knows it's me.\n\n318\n00:15:49.930 --> 00:15:50.971\nIt's connected to my account, and\n\n319\n00:15:50.971 --> 00:15:52.540\nit's gonna pull that information,\nalbeit slowly.\n\n320\n00:15:52.540 --> 00:15:53.520\nBut there we go.\n\n321\n00:15:53.520 --> 00:15:58.180\nSo I can see that I've got itprotv.web01,\nfile01, file03, webapp01.\n\n322\n00:15:58.180 --> 00:15:59.800\nAnd they're all there.\n\n323\n00:15:59.800 --> 00:16:00.900\nTwo of them running.\n\n324\n00:16:00.900 --> 00:16:02.640\nTwo of them are stopped.\n\n325\n00:16:02.640 --> 00:16:03.340\nI get my status.\n\n326\n00:16:03.340 --> 00:16:04.640\nI'm working with it from PowerShell.\n\n327\n00:16:04.640 --> 00:16:06.013\n>> Awesome.\nSo obviously,\n\n328\n00:16:06.013 --> 00:16:10.268\nPowerShell is going to be a very helpful\nthing for us to be able to do it.\n\n329\n00:16:10.268 --> 00:16:12.750\nNot that we'll ever not use the portals.\n\n330\n00:16:12.750 --> 00:16:14.190\nObviously, those are nice and easy.\n\n331\n00:16:14.190 --> 00:16:16.370\nWe can go in there and\neasily hit the new button,\n\n332\n00:16:16.370 --> 00:16:18.650\ncreate virtual machines as necessary.\n\n333\n00:16:18.650 --> 00:16:21.680\nBut think about the power of\nusing something like Power Shell.\n\n334\n00:16:21.680 --> 00:16:24.460\nWe can start scripting, we can start\nautomating tasks that are gonna\n\n335\n00:16:24.460 --> 00:16:28.070\nto take a lot of time and effort and\nwe just let the scripts do it for us.\n\n336\n00:16:28.070 --> 00:16:30.180\nThis is where the real benefit comes in.\n\n337\n00:16:30.180 --> 00:16:33.860\nBut now Don, now that we've seen\nhow to connect Azure to PowerShell,\n\n338\n00:16:33.860 --> 00:16:39.680\nwe've got the two working in unison,\n[LAUGH] can we now create a VM?\n\n339\n00:16:39.680 --> 00:16:40.530\n>> Sure, yeah.\n\n340\n00:16:40.530 --> 00:16:43.740\nSo, creating a VM,\nit's It's kind of funny.\n\n341\n00:16:43.740 --> 00:16:46.260\nIt can be easy and it can be hard.\n\n342\n00:16:46.260 --> 00:16:47.050\nRight?\nSo, for example,\n\n343\n00:16:47.050 --> 00:16:50.670\nif I want to whip up a quick and\neasy virtual machine, I've got a nice.\n\n344\n00:16:50.670 --> 00:16:53.060\nHere, let me show you, there's a sample\nscript that Microsoft published.\n\n345\n00:16:53.060 --> 00:16:54.240\nThis guy right here.\n\n346\n00:16:54.240 --> 00:16:57.260\nIt's real easy, I mean,\njust a couple of lines of code here.\n\n347\n00:16:57.260 --> 00:16:57.930\n>> Yeah, just one or two.\n\n348\n00:16:57.930 --> 00:17:00.430\n>> You'll have that virtual machine up and\nrunning in no time.\n\n349\n00:17:00.430 --> 00:17:03.460\nWell it, unfortunately,\nis a little bit of work.\n\n350\n00:17:03.460 --> 00:17:05.140\nLet me show you what all is going on here.\n\n351\n00:17:05.140 --> 00:17:09.020\nSo first off they're creating some\nvariables, right, a set of five variables.\n\n352\n00:17:09.020 --> 00:17:11.790\nThe first one is saying what\noperating system they're installing.\n\n353\n00:17:11.790 --> 00:17:13.951\nWindows Server 2012 R2 Datacenter.\n\n354\n00:17:13.951 --> 00:17:17.890\nAll right, the second variable is\nwhat image they're going to use.\n\n355\n00:17:17.890 --> 00:17:21.260\nNow, the problem here is, Microsoft\nreleases new images all the time.\n\n356\n00:17:21.260 --> 00:17:24.790\nThey update that Windows Server\nimage every month or two, so\n\n357\n00:17:24.790 --> 00:17:26.810\nhow do you know which one to use?\n\n358\n00:17:26.810 --> 00:17:28.760\nWhat they're doing is,\nthey're querying for\n\n359\n00:17:28.760 --> 00:17:34.200\na list of all the VM images that match\nWindows Server 2012 R2 Data Center.\n\n360\n00:17:34.200 --> 00:17:37.620\nAnd what they get back is\ngoing to be an array, and\n\n361\n00:17:37.620 --> 00:17:40.070\nso over here, you'll see they sort it.\n\n362\n00:17:41.100 --> 00:17:45.080\nAnd then after that, they look for\na particular property, the ImageName and\n\n363\n00:17:45.080 --> 00:17:46.310\nthey take the first one.\n\n364\n00:17:46.310 --> 00:17:48.130\nWhich is basically gonna\nreturn the newest one.\n\n365\n00:17:48.130 --> 00:17:51.910\nThat's a lot of work, to find out what's\nthe newest image for Windows Server 2012,\n\n366\n00:17:51.910 --> 00:17:54.400\nbut that's what they're doing, right.\n\n367\n00:17:54.400 --> 00:17:56.660\nThen they create a variable that\nspecifies what the name is gonna be.\n\n368\n00:17:56.660 --> 00:17:59.420\nThey're creating one called AZDC1, right.\n\n369\n00:17:59.420 --> 00:18:01.980\nEither that's a misspelling\nof the rock band or\n\n370\n00:18:01.980 --> 00:18:03.959\nthey're creating a domain\ncontroller in Arizona.\n\n371\n00:18:03.959 --> 00:18:07.678\n[LAUGH] So then we've got VM\nsize equals medium, right?\n\n372\n00:18:07.678 --> 00:18:11.631\nThat's where they're specifying what\nthey're gonna be creating, like an A4 or\n\n373\n00:18:11.631 --> 00:18:15.290\na D2 or whatever, right,\nthey're just specifying medium.\n\n374\n00:18:15.290 --> 00:18:17.700\nAnd then we've got the vm1 here,\n\n375\n00:18:17.700 --> 00:18:20.615\nthis is the actual command that's gonna\nbe created for the configuration, right?\n\n376\n00:18:20.615 --> 00:18:22.930\nNew-AzureVMConfig.\n\n377\n00:18:22.930 --> 00:18:25.870\nThey specified the name,\nthe instance sized and the image to use.\n\n378\n00:18:25.870 --> 00:18:28.460\nRight, that's\nthe configuration to this VM.\n\n379\n00:18:28.460 --> 00:18:30.860\nThey've got to couple that\nwith their credentials.\n\n380\n00:18:30.860 --> 00:18:33.850\nAnd so they're doing the Get-Credential\nto generate that username and password.\n\n381\n00:18:33.850 --> 00:18:36.300\nAnd then they're adding that\nprovisioning configs, so\n\n382\n00:18:36.300 --> 00:18:39.630\nthey'll be able to spin this up,\nthis is giving their User Account rights.\n\n383\n00:18:39.630 --> 00:18:43.438\nThey set what network to use,\nif you've got more than one subnet.\n\n384\n00:18:43.438 --> 00:18:47.330\nAnd they set a static virtual net IP,\nright?\n\n385\n00:18:47.330 --> 00:18:50.190\nNow, notice all of this is really just\nbeing stored in the variables right now,\n\n386\n00:18:50.190 --> 00:18:52.950\nit's not creating a virtual machine yet.\n\n387\n00:18:52.950 --> 00:18:55.010\nThen they specify what\nthe disk size is gonna be,\n\n388\n00:18:55.010 --> 00:19:00.020\nwhat the disk label is going to be, lun\nnumber, they disable caching on the drive.\n\n389\n00:19:00.020 --> 00:19:02.600\nWe'll talk about drive caching\nin the storage modules.\n\n390\n00:19:02.600 --> 00:19:06.950\nThen they kinda get that ready and\npump that into the Add-AzureDataDisk.\n\n391\n00:19:06.950 --> 00:19:11.010\nAnd then they tie it all together\nright down here with New-AzureVM.\n\n392\n00:19:11.010 --> 00:19:13.120\nAnd they make this line look so easy.\n\n393\n00:19:13.120 --> 00:19:15.780\nLike, hey, it's just this one little\nline right here, creates a VM.\n\n394\n00:19:15.780 --> 00:19:18.400\nBut it's feeding from all\nthese variables up here for\n\n395\n00:19:18.400 --> 00:19:20.220\nall the details we've provided.\n\n396\n00:19:20.220 --> 00:19:20.770\nOkay?\n\n397\n00:19:20.770 --> 00:19:26.170\nThis is a very kinda long way to go\nabout creating a virtual machine.\n\n398\n00:19:26.170 --> 00:19:29.610\nBut it gives you full control of\nall the aspects of whipping it up.\n\n399\n00:19:29.610 --> 00:19:34.010\nSo if you wanna script out spinning up a\nVM, this gives you an example here of all\n\n400\n00:19:34.010 --> 00:19:37.590\nthe different things that you can set to\nget it created exactly the way you want.\n\n401\n00:19:39.010 --> 00:19:40.980\nAll that being said,\nyou don't have to do it this way.\n\n402\n00:19:40.980 --> 00:19:43.800\nYou don't have to go crazy\nout the door with it.\n\n403\n00:19:43.800 --> 00:19:47.140\nYou can actually do it really simple,\nin fact, that was Microsoft's example.\n\n404\n00:19:47.140 --> 00:19:50.856\nHere is my example, which I call\nthe quick and dirty VM creation, or\n\n405\n00:19:50.856 --> 00:19:52.238\nthe way that Don does it.\n\n406\n00:19:52.238 --> 00:19:54.016\n[LAUGH] So, when you look at this,\n\n407\n00:19:54.016 --> 00:19:57.780\nthere's really only a small\namount of information they need.\n\n408\n00:19:57.780 --> 00:20:02.650\nThey need to know where the thing's\ngonna go, so an Azure location, and\n\n409\n00:20:02.650 --> 00:20:05.230\nthey need to know an image to use.\n\n410\n00:20:05.230 --> 00:20:05.940\nRight?\n\n411\n00:20:05.940 --> 00:20:09.150\nAnd so you can do New-AzureQuickVM.\n\n412\n00:20:09.150 --> 00:20:10.845\nThere's actually a command for this.\n\n413\n00:20:10.845 --> 00:20:12.065\nNew-AzureVM is the long one.\n\n414\n00:20:12.065 --> 00:20:15.000\nNew-AzureQuickVM assumes\na lot of defaults.\n\n415\n00:20:15.000 --> 00:20:17.260\nAnd then you just have\nto specify InstanceSize,\n\n416\n00:20:17.260 --> 00:20:21.470\na ServiceName and\nthe image that you're gonna use, right?\n\n417\n00:20:21.470 --> 00:20:24.800\nAnd you can pull that image from a\nvariable or you can statically set it, and\n\n418\n00:20:24.800 --> 00:20:26.150\nyou can get it run like that.\n\n419\n00:20:26.150 --> 00:20:28.350\nLet me show you guys\nstatically setting it.\n\n420\n00:20:28.350 --> 00:20:30.040\nAnd we'll just run it\nas a single command so\n\n421\n00:20:30.040 --> 00:20:31.850\nwe don't have any huge\nheadaches like that.\n\n422\n00:20:31.850 --> 00:20:34.370\nLet me resize this so\nmy head doesn't cover any of it up and\n\n423\n00:20:34.370 --> 00:20:35.270\nthen we'll run this command.\n\n424\n00:20:35.270 --> 00:20:39.040\nSo, if I wanna whip up a virtual machine\nand I wanna do it without some giant,\n\n425\n00:20:39.040 --> 00:20:40.790\ncrazy script, right?\n\n426\n00:20:40.790 --> 00:20:45.360\nFirst off, I do need to make sure, you\nhave to have at least one storage account.\n\n427\n00:20:45.360 --> 00:20:48.410\nAnd most people,\nthe way Microsoft provisions your account,\n\n428\n00:20:48.410 --> 00:20:50.810\nyou should have at least\none storage account.\n\n429\n00:20:50.810 --> 00:20:53.780\nIf you've created at\nleast one VM previously,\n\n430\n00:20:53.780 --> 00:20:55.110\nyou will have a storage account.\n\n431\n00:20:55.110 --> 00:20:58.009\nBut just in case somebody's deleted them\nall, you need to make sure you've got it.\n\n432\n00:20:58.009 --> 00:21:04.690\nSo you might need to do just a quick\ncheck like a get-Asurestorageaccount.\n\n433\n00:21:04.690 --> 00:21:07.100\nJust to make sure you've got at least one.\n\n434\n00:21:07.100 --> 00:21:09.240\nAnd if you don't have a storage\naccount you can always create one.\n\n435\n00:21:09.240 --> 00:21:11.060\nLooking at mine,\nit looks like I've actually got several.\n\n436\n00:21:11.060 --> 00:21:12.690\nApparently I've gone crazy with mine.\n\n437\n00:21:12.690 --> 00:21:18.190\nSo, like there's ITProTV file 03 and\nITProTV demo storage and so on.\n\n438\n00:21:18.190 --> 00:21:19.340\nI mean, you have to have at least one.\n\n439\n00:21:19.340 --> 00:21:19.920\nRight?\nThe virtual\n\n440\n00:21:19.920 --> 00:21:21.380\nmachine's gotta be stored somewhere.\n\n441\n00:21:21.380 --> 00:21:22.990\nSo that's kinda where we start.\n\n442\n00:21:22.990 --> 00:21:24.500\nAnd we'll do some storage shows.\n\n443\n00:21:24.500 --> 00:21:26.680\nI'll show you how to create those\naccounts and divvy things up.\n\n444\n00:21:26.680 --> 00:21:27.990\nIt's a good time.\n\n445\n00:21:27.990 --> 00:21:31.100\nBut then, what I wanna do is I wanna\ngo ahead and just spin-up a VM,\n\n446\n00:21:31.100 --> 00:21:33.640\nand if I've already got a storage\naccount it can go right into that.\n\n447\n00:21:33.640 --> 00:21:35.190\nI don't have to do\nanything too crazy there.\n\n448\n00:21:35.190 --> 00:21:37.256\nSo now,\nI'm ready to actually create the VM and\n\n449\n00:21:37.256 --> 00:21:39.850\nbasically we're gonna use\na neat little command for this.\n\n450\n00:21:39.850 --> 00:21:43.160\nWe're gonna say New-AzureQuick, VM, right?\n\n451\n00:21:43.160 --> 00:21:46.020\nNow we have New-AzureVM,\nwhich gives us a ton of options.\n\n452\n00:21:46.020 --> 00:21:48.210\nThat 's the one that we saw\nin the Microsoft script.\n\n453\n00:21:48.210 --> 00:21:52.380\nBut New-AzureQuickVM,\nit requires less information and\n\n454\n00:21:52.380 --> 00:21:53.530\nthat's kind of what I want.\n\n455\n00:21:53.530 --> 00:21:56.540\nSo, the first thing I need to give it\nis I need to tell it that it's gonna be\n\n456\n00:21:56.540 --> 00:22:00.000\na Windows VM and\nnot like LinuxVM or anything.\n\n457\n00:22:00.000 --> 00:22:02.550\nAnd then,\nI need to tell it the InstanceSize,\n\n458\n00:22:02.550 --> 00:22:04.720\nI wanna go ahead and do a Large instance.\n\n459\n00:22:04.720 --> 00:22:08.150\nI could do small or medium and whatever\nsome want, I'll do a large, right?\n\n460\n00:22:08.150 --> 00:22:11.460\nI need to give it a ServiceName and\nthat's the cloud ServiceName,\n\n461\n00:22:11.460 --> 00:22:13.490\nnot the actual VM itself.\n\n462\n00:22:13.490 --> 00:22:16.270\nAnd remember you're gonna have more\nthan one VM in the same cloud service.\n\n463\n00:22:16.270 --> 00:22:19.860\nFor me, let's see,\nlet me go back to my portal here.\n\n464\n00:22:19.860 --> 00:22:21.760\nAnd in my portal, let's see,\n\n465\n00:22:21.760 --> 00:22:27.500\nI'm missing IT Pro TV file 02, so\nlet's say I wanna create that.\n\n466\n00:22:27.500 --> 00:22:32.020\nI can put IT Pro TV file 02 in the same\ncloud service as one of these other ones,\n\n467\n00:22:32.020 --> 00:22:35.410\nmaybe I want them to share an IP, or\nI could give it its own cloud service, and\n\n468\n00:22:35.410 --> 00:22:36.340\nso that's what I'm gonna do.\n\n469\n00:22:36.340 --> 00:22:38.740\nI'll just make one called itprotvfile02.\n\n470\n00:22:38.740 --> 00:22:41.080\nRemember by default in the UI,\nwhen you create a VM,\n\n471\n00:22:41.080 --> 00:22:42.940\nit gets a cloud service\nwith the same name anyway?\n\n472\n00:22:42.940 --> 00:22:46.860\nSo I'm just gonna do the same\nthing here from my PowerShell.\n\n473\n00:22:46.860 --> 00:22:51.000\nSo I'll give it a service\nname of itprotvfile 02.\n\n474\n00:22:51.000 --> 00:22:55.210\nAnd I can always test that name to see\nif it already existed ahead of time but\n\n475\n00:22:55.210 --> 00:22:58.350\nin any case, I'm just gonna try it and\nsee if we get an error.\n\n476\n00:22:58.350 --> 00:22:59.950\nSo that's give my service a name.\n\n477\n00:22:59.950 --> 00:23:05.380\nI can then give the VM a name,\nwhich I'll also call itprotvfile02.\n\n478\n00:23:07.230 --> 00:23:11.220\nAnd from here,\nI just need to give it a image name.\n\n479\n00:23:11.220 --> 00:23:11.959\nSo what image I'm going to use.\n\n480\n00:23:11.959 --> 00:23:16.600\nNow we saw when we ran get dash vm image,\nthere's a ton of images out there.\n\n481\n00:23:16.600 --> 00:23:19.130\nSo I'm just going to jump back and\ncopy it off of one of these guys.\n\n482\n00:23:19.130 --> 00:23:23.790\nSo I'm going to take itprotvfile01, and\nI'm going to pull up its properties\n\n483\n00:23:25.310 --> 00:23:29.720\nand when I dig down in here,\nway down on the bottom,\n\n484\n00:23:30.920 --> 00:23:34.060\nI'm just gonna copy that source\nimage name that this one's using.\n\n485\n00:23:34.060 --> 00:23:37.100\nSo two advantages here, one, I don't\nhave to type it, that's kinda nice.\n\n486\n00:23:37.100 --> 00:23:40.450\nAnd two, I can make sure that I\ncan use the same source image\n\n487\n00:23:40.450 --> 00:23:43.590\nthat I use with the other file servers so\nthey should be comparable.\n\n488\n00:23:43.590 --> 00:23:46.090\nSo there's that source image file name.\n\n489\n00:23:46.090 --> 00:23:47.602\n>> Probably a good idea\nto create a text file or\n\n490\n00:23:47.602 --> 00:23:49.744\nsomething that has all the common\nimage names that's used so\n\n491\n00:23:49.744 --> 00:23:52.150\nyou don't have to parse through there and\ntry to find the right one.\n\n492\n00:23:52.150 --> 00:23:52.970\n>> Yeah, yeah.\n\n493\n00:23:52.970 --> 00:23:54.079\nYou can store them in variables,\n\n494\n00:23:54.079 --> 00:23:55.710\nyou can do all sorts of\nthings if you do this a lot.\n\n495\n00:23:55.710 --> 00:23:59.961\nYeah, but in the Microsoft script,\nwhat did I do with that thing?\n\n496\n00:23:59.961 --> 00:24:03.019\nThe Microsoft script which I've got\nparked around here somewhere, here we go.\n\n497\n00:24:03.019 --> 00:24:06.107\nYou'll see what they did where they\nbasically queried the images so\n\n498\n00:24:06.107 --> 00:24:07.581\nthey always got the newest one.\n\n499\n00:24:07.581 --> 00:24:08.581\nThat's one approach.\n\n500\n00:24:08.581 --> 00:24:10.840\nBut I typically like to\nhave that same image so\n\n501\n00:24:10.840 --> 00:24:12.840\nI know everything's built the same way.\n\n502\n00:24:12.840 --> 00:24:15.276\nSo with this one I've got that image file.\n\n503\n00:24:15.276 --> 00:24:18.104\n[INAUDIBLE]\n\n504\n00:24:18.104 --> 00:24:22.818\nAdmin user name.\n\n505\n00:24:22.818 --> 00:24:26.443\nI'll just do dpezet, it'll be for\nme, and -Password, and\n\n506\n00:24:26.443 --> 00:24:31.198\nI need to come up with some witty password\nthat meets the password requirements.\n\n507\n00:24:31.198 --> 00:24:34.638\nAnd so I might do something like that.\n\n508\n00:24:34.638 --> 00:24:36.478\nAll right, so that's gonna be my password.\n\n509\n00:24:36.478 --> 00:24:38.578\nAnd then let's see,\nwhat else do we need on this thing?\n\n510\n00:24:38.578 --> 00:24:39.509\nA location, right?\n\n511\n00:24:39.509 --> 00:24:46.700\nSo the location for this one is going\nto be East US, like that, all right?\n\n512\n00:24:46.700 --> 00:24:48.820\nAnd that should be it now,\nsome of the problems that can happen,\n\n513\n00:24:48.820 --> 00:24:51.510\nI didn't test that service name ahead\nof time, it could already be in use,\n\n514\n00:24:51.510 --> 00:24:52.750\nwho knows, we'll find out.\n\n515\n00:24:52.750 --> 00:24:54.100\nIf it is, it'll warn me.\n\n516\n00:24:54.100 --> 00:24:56.890\nIt's letting me know there's no\ndeployment found in that service.\n\n517\n00:24:56.890 --> 00:24:59.090\nThat just means there's no\nexisting service in it,\n\n518\n00:24:59.090 --> 00:25:01.210\nwhich makes sense cuz we just made it.\n\n519\n00:25:01.210 --> 00:25:03.320\nIt looks like I got a conflict error.\n\n520\n00:25:03.320 --> 00:25:05.970\nWindows Azure is currently performing\nan operation on this hosted\n\n521\n00:25:05.970 --> 00:25:09.290\nservice that requires exclusive access.\n\n522\n00:25:09.290 --> 00:25:11.540\nWell, now this is kind\nof an interesting one.\n\n523\n00:25:11.540 --> 00:25:15.020\nSo it's spinning this up,\nor trying to spin this up.\n\n524\n00:25:15.020 --> 00:25:16.980\nIt did create something.\n\n525\n00:25:16.980 --> 00:25:20.055\nSee I've got this operation it\nlets me know something succeeded.\n\n526\n00:25:20.055 --> 00:25:23.071\nAnd then I've got that it is currently in\nthe middle of performing an operation.\n\n527\n00:25:24.320 --> 00:25:26.420\nWhat operation is it in the middle\nof performing, I don't know.\n\n528\n00:25:26.420 --> 00:25:28.660\nLet's go take a look at the UI and\nsee if we can find it.\n\n529\n00:25:28.660 --> 00:25:32.110\nI'm probably still spinning up another\nVM or something in the background.\n\n530\n00:25:32.110 --> 00:25:34.820\nSo if I go to my virtual machines,\n\n531\n00:25:34.820 --> 00:25:38.060\nI bet I have one that's spinning up and\nthat'll generate that error.\n\n532\n00:25:38.060 --> 00:25:43.600\nAnd no, checking a bunch of stuff that's\nrunning but nothing is sitting there.\n\n533\n00:25:43.600 --> 00:25:46.550\nIt is possible that I had used that\nserver name somewhere else and\n\n534\n00:25:46.550 --> 00:25:47.960\nthat server isn't fully terminated.\n\n535\n00:25:47.960 --> 00:25:50.448\nLet me switch server names and\nsee if that fixes it.\n\n536\n00:25:50.448 --> 00:25:53.150\nI've got itpprotvweb09 down,\nhere maybe I'll do itpweb08 and\n\n537\n00:25:53.150 --> 00:25:57.550\nsee if we can't have some\nbetter luck with that.\n\n538\n00:25:57.550 --> 00:26:00.550\nSo I'm just gonna take this same\nexact command and just jump back and\n\n539\n00:26:00.550 --> 00:26:01.590\nmodify that.\n\n540\n00:26:01.590 --> 00:26:04.678\nThere's other things that could give us\na problem like the same kind of error.\n\n541\n00:26:04.678 --> 00:26:09.813\nBut it shouldn't be anything too crazy,\nso let's just do web08 and\n\n542\n00:26:09.813 --> 00:26:13.130\nI'll set a service name of itprotvweb08.\n\n543\n00:26:15.720 --> 00:26:18.030\nThere we go.\nAnd we'll give that a churn through.\n\n544\n00:26:18.030 --> 00:26:21.540\nIt's whipping up that new service, I guess\nI could've reused the one we had a minute\n\n545\n00:26:21.540 --> 00:26:24.240\nago, a name is just a name but\nI like to have it named correctly.\n\n546\n00:26:24.240 --> 00:26:26.300\nSo there it goes, it succeeded with that.\n\n547\n00:26:26.300 --> 00:26:28.400\nThat just means it created\nthe cloud service,\n\n548\n00:26:28.400 --> 00:26:30.240\nnow it's creating the VM inside of it.\n\n549\n00:26:30.240 --> 00:26:34.760\nAnd you're gonna notice it freezes,\nit sits here, right.\n\n550\n00:26:34.760 --> 00:26:37.120\nIt takes a while to spin up a VM and\nthat's what it's doing.\n\n551\n00:26:37.120 --> 00:26:40.850\nAnd unlike the web UI, where I can just\nmove on and start doing other things,\n\n552\n00:26:40.850 --> 00:26:43.730\nhere I'm kinda waiting until I get\nfeedback from the website that it's done.\n\n553\n00:26:43.730 --> 00:26:47.660\nNot that it's fully booted up, but\nthat it's at least been provisioned.\n\n554\n00:26:47.660 --> 00:26:50.964\nAnd so it's gonna hold here while it rolls\nthat out, and then as soon as it's done,\n\n555\n00:26:50.964 --> 00:26:52.208\nit'll let me know it's done.\n\n556\n00:26:52.208 --> 00:26:55.873\nBut when I go to the UI,\nit'll actually still be kinda starting and\n\n557\n00:26:55.873 --> 00:26:58.828\nnot quite ready for\nme to remote in and get connected.\n\n558\n00:26:58.828 --> 00:26:59.840\nThere we go.\n\n559\n00:26:59.840 --> 00:27:02.660\nSo, I got the two messages\nthat it succeeded.\n\n560\n00:27:02.660 --> 00:27:05.990\nOne for the cloud service and\none for the VM itself.\n\n561\n00:27:05.990 --> 00:27:08.980\nAnd now that it's done,\nI should be ready to rock.\n\n562\n00:27:08.980 --> 00:27:13.020\nIf I jump in here and\ntake a look at my virtual machines,\n\n563\n00:27:13.020 --> 00:27:17.250\nI should have an itprotvweb08 right there.\n\n564\n00:27:17.250 --> 00:27:18.580\nIt shows that it's starting.\n\n565\n00:27:18.580 --> 00:27:21.170\nIt's in East US, and it's booting up.\n\n566\n00:27:21.170 --> 00:27:24.970\nAnd if I click on it to look at its\nproperties, I can see here the size,\n\n567\n00:27:24.970 --> 00:27:28.230\nit picked a standard A3,\nthat's what large maps to.\n\n568\n00:27:28.230 --> 00:27:28.930\nAnd so it's up.\n\n569\n00:27:28.930 --> 00:27:31.720\nIt's got four cores, seven gigs\nof memory and it's ready to rock.\n\n570\n00:27:32.780 --> 00:27:35.270\nSo whipping up a VM from the PowerShell,\n\n571\n00:27:35.270 --> 00:27:39.010\nnot necessarily the easiest thing on\nthe planet but not that hard either.\n\n572\n00:27:39.010 --> 00:27:41.604\n>> Yeah, still a good tool to\nhave in the toolbox, right,\n\n573\n00:27:41.604 --> 00:27:43.608\nif you do want to be\nable to script this out.\n\n574\n00:27:43.608 --> 00:27:46.328\nCuz even though it took us\na few minutes to type in\n\n575\n00:27:46.328 --> 00:27:50.348\na long string of different things,\nimagine if you have to do 20 VMs.\n\n576\n00:27:50.348 --> 00:27:51.372\nI could just write that in a script.\n\n577\n00:27:51.372 --> 00:27:54.479\nIf I had to go through the portal, that\nwould actually take me quite a bit of time\n\n578\n00:27:54.479 --> 00:27:56.612\nand effort, a lot of clicking,\na lot of name typing.\n\n579\n00:27:56.612 --> 00:27:59.112\nWhere I could script that out and\nlet the script do the work,\n\n580\n00:27:59.112 --> 00:28:01.172\ninstead of me having to sit there and\ndo all that.\n\n581\n00:28:01.172 --> 00:28:04.891\nSo it's a really good idea to be familiar\nwith both of them cuz you never know what\n\n582\n00:28:04.891 --> 00:28:09.270\nenvironment you're going to be in and you\nmight have to employ one versus the other.\n\n583\n00:28:09.270 --> 00:28:12.590\nDon, is there anything else about Azure,\nor at least PowerShell and Azure?\n\n584\n00:28:12.590 --> 00:28:16.340\n>> Just real quick, I mean I got that one\nerror because apparently that name was\n\n585\n00:28:16.340 --> 00:28:18.460\nalready tied up and\nI said I could have tested for\n\n586\n00:28:18.460 --> 00:28:20.070\nthat but I didn't cuz I was being lazy.\n\n587\n00:28:20.070 --> 00:28:22.970\nLet me show you the command for that real\nquick so you can avoid it in the future.\n\n588\n00:28:22.970 --> 00:28:29.656\nThere's actually a PowerShell cmdlet\njust for it called Test-Azurename.\n\n589\n00:28:29.656 --> 00:28:34.662\nTest-Azurename lets us look to see if\nsomething's already in use, and so\n\n590\n00:28:34.662 --> 00:28:39.756\nyou can say like -Service and\nyou can type something like itprotvweb08.\n\n591\n00:28:39.756 --> 00:28:44.750\nAnd when I run that, if it returns true,\nthat means the name's already in use.\n\n592\n00:28:44.750 --> 00:28:46.820\nIf it returns false, it's available.\n\n593\n00:28:46.820 --> 00:28:51.190\nSo, if I do like itprotvweb07,\nI get false, it's available.\n\n594\n00:28:51.190 --> 00:28:54.558\nSo I had picked,\nwhat did I do, itprotvfile02?\n\n595\n00:28:54.558 --> 00:28:59.140\nAnd I got an error on it, and yeah,\nsee how it shows as true for being in use.\n\n596\n00:28:59.140 --> 00:29:01.450\nSo it's in use somewhere inside of Azure.\n\n597\n00:29:01.450 --> 00:29:04.410\nMaybe not on my account, maybe somebody\nelse spun one up with that name,\n\n598\n00:29:04.410 --> 00:29:05.170\nthey can, right?\n\n599\n00:29:05.170 --> 00:29:06.850\nThere's no rule that says you can't.\n\n600\n00:29:06.850 --> 00:29:09.120\nSo maybe somebody else did, and\nthat's why I got that error.\n\n601\n00:29:09.120 --> 00:29:12.010\nIt said it had something that\nreserved exclusive access, so\n\n602\n00:29:12.010 --> 00:29:13.690\nI couldn't get to that machine.\n\n603\n00:29:13.690 --> 00:29:15.820\nI should have tested the name first.\n\n604\n00:29:15.820 --> 00:29:18.600\nIn the web UI, it just gives\nyou a little warning about it.\n\n605\n00:29:18.600 --> 00:29:20.868\nHere in PowerShell it gave me well,\na bit more.\n\n606\n00:29:20.868 --> 00:29:22.068\n>> It gives you the big red death, yeah.\n\n607\n00:29:22.068 --> 00:29:24.615\n[LAUGH]\n>> Yeah, it's all that, so\n\n608\n00:29:24.615 --> 00:29:27.950\nanyhow if you ever want to test that ahead\nof time, you can use Test-AzureName.\n\n609\n00:29:27.950 --> 00:29:31.570\nIf you're writing a script it's kinda nice\nto do this cuz the script can check for\n\n610\n00:29:31.570 --> 00:29:34.010\na true or false return and\nthen take action based on that.\n\n611\n00:29:34.010 --> 00:29:35.340\nSo all in all though,\n\n612\n00:29:35.340 --> 00:29:39.290\nthe command that I ran, it's really just\nmade up of a handful of pieces, right?\n\n613\n00:29:39.290 --> 00:29:43.620\nI set the instance size, the name of\nthe cloud service, the name of the VM,\n\n614\n00:29:43.620 --> 00:29:47.080\nthe image to use, that's what\nmakes the command look so long.\n\n615\n00:29:47.080 --> 00:29:51.348\nThe username and password and then the\nlocation of where I wanted that VM to be.\n\n616\n00:29:51.348 --> 00:29:55.087\nSo after that it spins it up and now I've\ngot a new VM running inside of Azure,\n\n617\n00:29:55.087 --> 00:29:58.360\na VM that everyone who watches this\nepisode knows the password of so\n\n618\n00:29:58.360 --> 00:29:59.948\nI probably need to change that.\n\n619\n00:29:59.948 --> 00:30:04.369\n>> [LAUGH] Well, Don likes to make them\neasy for himself for this show and\n\n620\n00:30:04.369 --> 00:30:06.550\neasy for you, hacker out there.\n\n621\n00:30:06.550 --> 00:30:08.290\nEnjoy that Azure VM [LAUGH].\n\n622\n00:30:08.290 --> 00:30:13.680\nAll right Don, looks like we've cleared\nup yet another show here at ITProTV.\n\n623\n00:30:13.680 --> 00:30:16.130\nI guess it's time for us to sign off.\n\n624\n00:30:16.130 --> 00:30:18.790\nGlad you enjoyed it and\nhope you, what am I doing?\n\n625\n00:30:18.790 --> 00:30:21.500\nI'm rambling on like\na crazy man over here.\n\n626\n00:30:21.500 --> 00:30:24.520\nSigning off for ITProTV,\nI've been your host Daniel Lowery.\n\n627\n00:30:24.520 --> 00:30:25.240\n>> And I'm Don Pezet.\n\n628\n00:30:25.240 --> 00:30:26.452\n>> And we'll see you next time.\n\n629\n00:30:26.452 --> 00:30:32.730\n[SOUND]\n\n",
          "vimeoId": "148667842"
        },
        {
          "description": "In this episode, Daniel and Don walk you through connecting to an Azure Virtual Machine. They start by explaining the default access methods for connecting to both a Windows Server VM (Remote Desktop) and a Linux VM (SSH). Then they explain how to add security to those access methods using the Azure Firewall.",
          "length": "1778",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-1-5-connecting_to_a_vm-120115-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-1-5-connecting_to_a_vm-120115-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-1-5-connecting_to_a_vm-120115-1-sm.jpg",
          "title": "Connecting to a VM",
          "transcript": "WEBVTT\n\n1\n00:00:00.008 --> 00:00:10.008\n[MUSIC]\n\n2\n00:00:12.208 --> 00:00:14.048\nAll right, greetings everyone!\n\n3\n00:00:14.048 --> 00:00:17.028\nAnd welcome to another\nexciting episode of ITProTV.\n\n4\n00:00:17.028 --> 00:00:21.089\nI'm your host Daniel Lowrie and\nin this episode we're continuing on with\n\n5\n00:00:21.089 --> 00:00:24.768\nour Microsoft Azure virtual machines,\nlooking into that topic.\n\n6\n00:00:24.768 --> 00:00:28.329\nAnd joining me on the show today, yet\nagain, to help us peruse through and\n\n7\n00:00:28.329 --> 00:00:31.740\nlearn a little more about it,\nnone other than Mr. Don Pezet himself.\n\n8\n00:00:31.740 --> 00:00:32.550\nHow's it going today, Don?\n\n9\n00:00:32.550 --> 00:00:33.480\nWelcome to the show.\n\n10\n00:00:33.480 --> 00:00:34.600\n>> It is going great, Daniel.\n\n11\n00:00:34.600 --> 00:00:35.420\nThanks for having me.\n\n12\n00:00:35.420 --> 00:00:37.588\nAnd we're gonna be jumping\nright back into Azure VM.\n\n13\n00:00:37.588 --> 00:00:40.465\nAnd we're gonna tackle something that\nsome of you guys have probably asked,\n\n14\n00:00:40.465 --> 00:00:42.068\nif you've been watching all these shows.\n\n15\n00:00:42.068 --> 00:00:46.299\nIs, hey, it's really great that you're\nmaking all these VMs and stuff, but\n\n16\n00:00:46.299 --> 00:00:49.390\nhow do you use them once they're up and\nin place, right?\n\n17\n00:00:49.390 --> 00:00:53.170\nWe've created five or six different\nvirtual machines as the show is going on.\n\n18\n00:00:53.170 --> 00:00:54.750\nI haven't connected to a darn one of them.\n\n19\n00:00:54.750 --> 00:00:56.465\n>> That's not important.\n\n20\n00:00:56.465 --> 00:00:57.180\n[LAUGH]\n>> Sooner or\n\n21\n00:00:57.180 --> 00:00:58.700\nlater they gotta log into the things.\n\n22\n00:00:58.700 --> 00:01:01.530\nSo that's what we're gonna take a look\nat today is once you get one of this VMs\n\n23\n00:01:01.530 --> 00:01:03.970\ncreated up and running,\nhow do you actually get connected and\n\n24\n00:01:03.970 --> 00:01:04.920\nstart to use it?\n\n25\n00:01:04.920 --> 00:01:08.930\n>> Right, so Don, obviously we have quite\na few different types of users out there.\n\n26\n00:01:08.930 --> 00:01:14.550\nMight be using different platforms and\nstill logging into, well Microsoft Azure,\n\n27\n00:01:14.550 --> 00:01:17.947\nso obviously we should\nprobably start with Microsoft.\n\n28\n00:01:17.947 --> 00:01:18.970\n>> Sure.\n>> [LAUGH]\n\n29\n00:01:18.970 --> 00:01:20.510\n>> They would prefer that, wouldn't they?\n\n30\n00:01:20.510 --> 00:01:23.090\nSo let's start with that,\nactually we could start with both,\n\n31\n00:01:23.090 --> 00:01:24.970\nwe'll do them all at the same time.\n\n32\n00:01:24.970 --> 00:01:28.230\nSo, in Azure, when we spin up\nthe VM what are you spinning up?\n\n33\n00:01:28.230 --> 00:01:31.408\nEither Windows or Linux, right,\nthose are our two platforms.\n\n34\n00:01:31.408 --> 00:01:35.782\nAnd for remotely managing the systems,\nthe Windows machines default to\n\n35\n00:01:35.782 --> 00:01:39.088\nRemote Desktop or RDP,\nthe Remote Desktop Protocol.\n\n36\n00:01:39.088 --> 00:01:43.588\nThe Linux machines default to SSH,\nright, the Secure Shell Protocol.\n\n37\n00:01:43.588 --> 00:01:45.388\nNow, that's what they default to.\n\n38\n00:01:45.388 --> 00:01:47.753\nAnd I say that because once\nyou connect the first time,\n\n39\n00:01:47.753 --> 00:01:49.668\nyou can set them up to\nuse whatever you want.\n\n40\n00:01:49.668 --> 00:01:51.730\nMaybe you don't wanna use RDP for Windows.\n\n41\n00:01:51.730 --> 00:01:56.180\nMaybe you wanna use Win RM or PowerShell's\nRemote Management or something like that.\n\n42\n00:01:56.180 --> 00:01:57.530\nMaybe you wanna use the VNC.\n\n43\n00:01:57.530 --> 00:01:59.178\nYou can do that,\nyou can switch, it's up to you.\n\n44\n00:01:59.178 --> 00:02:02.876\nWith Linux, maybe you don't wanna use SSH,\nmaybe you wanna use, I don't know,\n\n45\n00:02:02.876 --> 00:02:03.746\nthat kinda rocks.\n\n46\n00:02:03.746 --> 00:02:04.978\n>> VNC?\n\n47\n00:02:04.978 --> 00:02:06.118\n>> Yeah, what else would you use?\n\n48\n00:02:06.118 --> 00:02:07.238\nYeah, VNC sucks under Linux.\n\n49\n00:02:07.238 --> 00:02:09.378\n>> [LAUGH]\n>> So I mean,\n\n50\n00:02:09.378 --> 00:02:11.838\nwhatever management you wanna use, right?\n\n51\n00:02:11.838 --> 00:02:14.778\nSo, you kinda pick, you get that set up.\n\n52\n00:02:14.778 --> 00:02:19.080\nBut the initial connection,\nthat very first one, it's RDP for\n\n53\n00:02:19.080 --> 00:02:21.290\nWindows and SSH under Linux.\n\n54\n00:02:21.290 --> 00:02:23.580\nThose are kind of the two choices\nwe have when get connected.\n\n55\n00:02:23.580 --> 00:02:25.210\nSo I wanna walk you through that process.\n\n56\n00:02:25.210 --> 00:02:27.302\nSo I'm just gonna spin up\na machine here real quick, and\n\n57\n00:02:27.302 --> 00:02:30.078\nI'll jump into the virtual machine\npanel and I\"m just gonna whip one up.\n\n58\n00:02:30.078 --> 00:02:31.898\nI'll do a Windows one and a Linux one.\n\n59\n00:02:31.898 --> 00:02:35.118\nWe'll start with Windows cuz that's\nwhat Microsoft wants us to do.\n\n60\n00:02:35.118 --> 00:02:38.827\nSo we'll come in here, and\nI'm just gonna look for\n\n61\n00:02:38.827 --> 00:02:42.898\nWindows Server 2012 Datacenter,\nand there we go.\n\n62\n00:02:42.898 --> 00:02:46.703\nSo I'll just whip this guy up here, and\nwhen I create that virtual machine,\n\n63\n00:02:46.703 --> 00:02:48.138\nit asks you a few questions.\n\n64\n00:02:48.138 --> 00:02:49.918\nI'll stick with the classic\ndeployment model.\n\n65\n00:02:49.918 --> 00:02:52.000\nBut one of the most important questions,\n\n66\n00:02:52.000 --> 00:02:55.451\none of the reasons why I'm bothering\nto spin another one of these up,\n\n67\n00:02:55.451 --> 00:02:59.218\nis that when you set it up it asks for\na host name, a user name and a password.\n\n68\n00:02:59.218 --> 00:03:00.638\nI need to know my user name and\na password.\n\n69\n00:03:00.638 --> 00:03:03.987\nWe spun up a few VMs and I don't really\nremember the user names and passwords and\n\n70\n00:03:03.987 --> 00:03:05.578\n[LAUGH] so I'm gonna create a new one.\n\n71\n00:03:05.578 --> 00:03:09.500\nI'll do itprotvweb05.\n\n72\n00:03:10.500 --> 00:03:12.920\nAnd I'll give it a user name of dpezet and\n\n73\n00:03:12.920 --> 00:03:18.750\nI'll give it a nice little password\nthat I can at least pretend to remember.\n\n74\n00:03:18.750 --> 00:03:23.160\nAnd I'll just go with the defaults for all\nthis other stuff, and we'll whip it up.\n\n75\n00:03:23.160 --> 00:03:25.410\nSo I'm gonna go ahead and\nget that created, but\n\n76\n00:03:25.410 --> 00:03:29.240\nthe important part is that I remember\nthe user name and password, right?\n\n77\n00:03:29.240 --> 00:03:32.440\nNow, on a Linux server it's\na little bit different, right?\n\n78\n00:03:32.440 --> 00:03:34.270\nWhen I go to spin up a Linux server, so\n\n79\n00:03:34.270 --> 00:03:39.470\nif I go back into my virtual machines and\nI go to add another one.\n\n80\n00:03:39.470 --> 00:03:42.610\nSo this time I'm gonna come in and\nI'm gonna add a Linux box,\n\n81\n00:03:42.610 --> 00:03:44.120\nmaybe I want to do CoreOS, right?\n\n82\n00:03:44.120 --> 00:03:46.230\nI was talking to Daniel\nabout that earlier,\n\n83\n00:03:46.230 --> 00:03:49.540\nso we're going to whip up\na CoreOS stable machine.\n\n84\n00:03:51.030 --> 00:03:52.580\nThere we go.\n\n85\n00:03:52.580 --> 00:03:55.580\nAnd CoreOS is just a Linux\nvariant that I can deploy.\n\n86\n00:03:55.580 --> 00:03:58.490\nI'll go with that classic deployment\nmodel like I did a moment ago.\n\n87\n00:03:58.490 --> 00:04:02.010\nAnd with Linux they don't let\nyou pick a user name, right.\n\n88\n00:04:02.010 --> 00:04:04.320\nThe user name is, as I say that and\n\n89\n00:04:04.320 --> 00:04:06.130\nthen it's got the User Name field there,\nI forgot.\n\n90\n00:04:06.130 --> 00:04:09.620\nIn the legacy portal they don't\nlet you pick a user name.\n\n91\n00:04:09.620 --> 00:04:13.170\nThey always set it to Azure User,\nright, so it's easy.\n\n92\n00:04:13.170 --> 00:04:16.150\nBut in the preview portal we actually\ncan set a user name now and so\n\n93\n00:04:16.150 --> 00:04:16.915\nit's got that field.\n\n94\n00:04:16.915 --> 00:04:20.240\nAnd again, I need to make sure I\nremember what that user account is.\n\n95\n00:04:20.240 --> 00:04:24.758\nSo I made itprotvweb05 a second ago,\nthis'll be itprotvweb06.\n\n96\n00:04:24.758 --> 00:04:30.298\nAnd for a user name I can stick with Azure\nUser or I can give it, we'll do dpezet.\n\n97\n00:04:30.298 --> 00:04:35.218\nAnd then for the authentication type I\ncan do a password or an SSH public key.\n\n98\n00:04:35.218 --> 00:04:36.740\nThat's pretty important.\n\n99\n00:04:36.740 --> 00:04:40.410\nI can authenticate using a certificate or\na password.\n\n100\n00:04:40.410 --> 00:04:42.930\nCertificates are more secure so\nI can go that route.\n\n101\n00:04:42.930 --> 00:04:45.730\nI usually use that when I'm on Unix and\nLinux systems.\n\n102\n00:04:45.730 --> 00:04:48.870\nA password is a little bit easier\nbecause we don't have to worry about\n\n103\n00:04:48.870 --> 00:04:49.730\ncertificate files.\n\n104\n00:04:49.730 --> 00:04:51.760\nI'm gonna go ahead and\nuse a password for now.\n\n105\n00:04:51.760 --> 00:04:54.830\nYou can always reconfigure this later on\ninside of the virtual machine after your\n\n106\n00:04:54.830 --> 00:04:55.698\ninitial connection.\n\n107\n00:04:55.698 --> 00:05:00.631\nIf I choose to do a public key though,\nI need to download the key right here and\n\n108\n00:05:00.631 --> 00:05:01.798\nI need to keep it.\n\n109\n00:05:01.798 --> 00:05:04.198\nAnd if I lose that key I can't\nconnect to the VM anymore.\n\n110\n00:05:04.198 --> 00:05:08.032\nMicrosoft doesn't have a copy to give back\nto me, right, I'd have to reset it, and\n\n111\n00:05:08.032 --> 00:05:10.150\nthat means relaunching\nthe virtual machine.\n\n112\n00:05:10.150 --> 00:05:14.040\nSo I want to make sure I retain that,\na password's a little bit easier, right?\n\n113\n00:05:14.040 --> 00:05:17.240\nI'll accept the rest of the defaults here\nand I'll let this one get created too.\n\n114\n00:05:17.240 --> 00:05:19.870\nSo now I've got a Linux machine and\n\n115\n00:05:19.870 --> 00:05:22.069\na Windows machine spinning\nup in the background.\n\n116\n00:05:23.300 --> 00:05:27.520\nAnd if I go to my virtual machines,\nthat was itprotvweb05 and itprotvweb06.\n\n117\n00:05:27.520 --> 00:05:31.420\nSo here's itprotvweb05,\nwhich is still starting.\n\n118\n00:05:31.420 --> 00:05:34.750\nAnd web06 isn't showing up yet\nbut it'll pop up in a minute.\n\n119\n00:05:34.750 --> 00:05:39.030\nNow, if I go to web05 and click on it,\nI can see some information that's pretty\n\n120\n00:05:39.030 --> 00:05:41.750\nimportant, things like\nthe virtual IP address.\n\n121\n00:05:41.750 --> 00:05:44.760\nIf I want to get connected to this\nmachine I need to know its address.\n\n122\n00:05:44.760 --> 00:05:46.453\nWell, for a Windows machine,\n\n123\n00:05:46.453 --> 00:05:49.458\nwe're typically gonna use\nRemote Desktop Protocol.\n\n124\n00:05:49.458 --> 00:05:52.583\nAnd I could fire up my\nfavorite RDP client, and\n\n125\n00:05:52.583 --> 00:05:54.998\nI could point it to that IP address.\n\n126\n00:05:54.998 --> 00:05:59.726\nAnd I could log in with the user name and\npassword that I set just a moment ago, and\n\n127\n00:05:59.726 --> 00:06:01.006\nI can get connected.\n\n128\n00:06:01.006 --> 00:06:05.564\nNow, Microsoft makes it even easier than\nthat, if you click on the machine like I\n\n129\n00:06:05.564 --> 00:06:08.526\nhave, you got a nice little\nConnect button up here.\n\n130\n00:06:08.526 --> 00:06:13.079\nAnd if we hit that Connect button,\nwhat that does is that it downloads an RDP\n\n131\n00:06:13.079 --> 00:06:17.996\nconfiguration file that already has all\nthe settings that we need defined in it so\n\n132\n00:06:17.996 --> 00:06:21.660\nthat we don't have to type\nin everything ourselves.\n\n133\n00:06:21.660 --> 00:06:23.440\nSo, for example, if I click on that,\n\n134\n00:06:23.440 --> 00:06:28.580\nit's gonna download this file which I can\njust save to my desktop or save wherever.\n\n135\n00:06:28.580 --> 00:06:32.548\nAnd then if you open it,\nit will open it in your RDP client.\n\n136\n00:06:32.548 --> 00:06:35.952\nAnd so here you'll see it's connecting,\nit's saying I'm seeing a certificate for\n\n137\n00:06:35.952 --> 00:06:38.848\nthe first time which I'm gonna go\nahead and say, not to ask about again.\n\n138\n00:06:38.848 --> 00:06:42.704\nAnd I'll go ahead and connect, and\nit's gonna reach out to that server and,\n\n139\n00:06:42.704 --> 00:06:45.148\neventually I'll get\npresented with a desktop.\n\n140\n00:06:45.148 --> 00:06:48.272\nNow, I say eventually, that server's\nstill booting up in the background, so\n\n141\n00:06:48.272 --> 00:06:50.988\nI am going to have to wait a minute for\nthat to run so I'll let that sit.\n\n142\n00:06:50.988 --> 00:06:56.788\nBut notice what it is trying\nto connect to, itprotvweb05.\n\n143\n00:06:56.788 --> 00:07:00.800\nWhoops, as I kinda screw that up there,\nit failed to connect.\n\n144\n00:07:00.800 --> 00:07:05.340\nBut it said that it was trying to\nconnect to itprovtvweb05.cloudapp.net.\n\n145\n00:07:05.340 --> 00:07:08.100\nThat's the cloud service name\n\n146\n00:07:08.100 --> 00:07:10.810\nthat was assigned to that virtual\nmachine when I created it.\n\n147\n00:07:10.810 --> 00:07:15.120\nAnd it's just connecting on TCP port 3389,\nthe standard RDP port,\n\n148\n00:07:15.120 --> 00:07:18.450\nto reach out just like any\nother server that you set up.\n\n149\n00:07:18.450 --> 00:07:21.710\n>> Now, that IP address,\nthat's coming from the cloud service, Don?\n\n150\n00:07:21.710 --> 00:07:25.200\n>> Yeah, so the cloud service\nis where we assign the IP, and\n\n151\n00:07:25.200 --> 00:07:27.688\nthis cloud, it says this DNS name here.\n\n152\n00:07:27.688 --> 00:07:30.900\nThe virtual machine is created in\nthe cloud service that has the same name.\n\n153\n00:07:30.900 --> 00:07:33.690\nThey don't have to be the same name,\nthey just happen to be here.\n\n154\n00:07:33.690 --> 00:07:35.825\nAnd that's the public IP address.\n\n155\n00:07:35.825 --> 00:07:39.210\nThere'll be a private IP address\nassigned to this machine too, and\n\n156\n00:07:39.210 --> 00:07:40.920\nI just can't get to that\nfrom the outside world.\n\n157\n00:07:40.920 --> 00:07:45.160\nBut you could get to it maybe from\nother VMs in your cloud service.\n\n158\n00:07:45.160 --> 00:07:47.650\nSo that one, let's see, is it done yet?\n\n159\n00:07:47.650 --> 00:07:49.837\nI'm getting impatient here waiting for\nit to start.\n\n160\n00:07:49.837 --> 00:07:53.540\nBut once it's done booting up, we should\nbe able to get connected to it and\n\n161\n00:07:53.540 --> 00:07:56.672\nsee our Windows desktop and\nstart to work with it like normal.\n\n162\n00:07:56.672 --> 00:07:58.879\nYeah, it looks like it's still starting.\n\n163\n00:07:58.879 --> 00:08:02.129\nAnd all right, we're still\ngonna have to wait on that one.\n\n164\n00:08:02.129 --> 00:08:06.220\nitprotvweb06, all right, that's\nthe Linux one, it's also still starting.\n\n165\n00:08:06.220 --> 00:08:09.510\nAnd while we wait on it,\nit's a Linux machine that's booting up.\n\n166\n00:08:09.510 --> 00:08:12.530\nAnd once it's up and\nrunning it's going to enable SSH.\n\n167\n00:08:12.530 --> 00:08:16.890\nNow, SSH uses TCP port 22 to connect,\nand so\n\n168\n00:08:16.890 --> 00:08:19.450\nit's opening that port for\nus to be able to connect to it.\n\n169\n00:08:19.450 --> 00:08:21.450\nAnd it's enabling SSH.\n\n170\n00:08:21.450 --> 00:08:24.670\nNow, Windows does not have\nan SSH client by default.\n\n171\n00:08:24.670 --> 00:08:28.030\nAnd so if we wanna be able to\nconnect to this device via SSH,\n\n172\n00:08:28.030 --> 00:08:30.860\nthen we're gonna have\nto get an SSH client.\n\n173\n00:08:30.860 --> 00:08:33.050\nAnd there's a number of\nones that are out there,\n\n174\n00:08:33.050 --> 00:08:36.250\nI use a program called\nRoyal TS all the time.\n\n175\n00:08:36.250 --> 00:08:38.367\nThere's this other software, though,\n\n176\n00:08:38.367 --> 00:08:42.544\nthe most popular one that's kinda free\nis a program called PuTTY P-U-T-T-Y.\n\n177\n00:08:42.544 --> 00:08:49.022\nPuTTY is a Windows based SSH client and\nit's open source.\n\n178\n00:08:49.022 --> 00:08:52.561\nIt was written by a gentleman that, I\ndon't think he really supports it anymore,\n\n179\n00:08:52.561 --> 00:08:54.200\nbut works great under Windows.\n\n180\n00:08:54.200 --> 00:08:56.070\nAnd you can jump in there, and\nyou can download it right there,\n\n181\n00:08:56.070 --> 00:08:57.720\nthat PuTTY Installer.\n\n182\n00:08:57.720 --> 00:09:00.920\nSo if you just do a Google search for\nP-U-T-T-Y you'll find it.\n\n183\n00:09:00.920 --> 00:09:02.340\nBut that's an alternative.\n\n184\n00:09:02.340 --> 00:09:05.628\nIf you're on a Mac or a Linux box they\ndo have SSH clients built in and so\n\n185\n00:09:05.628 --> 00:09:08.862\nyou can just use it right from\nthe command line and get connected up,\n\n186\n00:09:08.862 --> 00:09:10.192\nno big deal there, right.\n\n187\n00:09:10.192 --> 00:09:13.370\nSo a lot of different ways\nto get connected with SSH.\n\n188\n00:09:13.370 --> 00:09:14.870\nI've installed PuTTY.\n\n189\n00:09:14.870 --> 00:09:18.550\nAnd so, with PuTTY, I can fire that up and\nconnect to a system.\n\n190\n00:09:18.550 --> 00:09:21.384\nAnd the important thing here is, with RDP,\n\n191\n00:09:21.384 --> 00:09:26.410\nI can pick a server, and I had a Connect\nbutton, with the Windows server.\n\n192\n00:09:26.410 --> 00:09:30.080\nWith itvprotvweb06,\nthat's that Linux server that I spun up.\n\n193\n00:09:30.080 --> 00:09:31.230\nAnd, it's up and running already.\n\n194\n00:09:31.230 --> 00:09:32.410\nIt's done.\n\n195\n00:09:32.410 --> 00:09:36.440\nAnd, if I come in here,\nsee how the Connect button is greyed out?\n\n196\n00:09:36.440 --> 00:09:39.980\nIt's grayed out because there's no\nweb based SSH client for me to use.\n\n197\n00:09:39.980 --> 00:09:41.380\nThere's no way for me to connect to it.\n\n198\n00:09:41.380 --> 00:09:44.600\nI'm going to have to connect to it myself.\n\n199\n00:09:44.600 --> 00:09:48.530\nAnd so what I'm gonna do is I'm gonna\ntake that IP address, or the host name,\n\n200\n00:09:48.530 --> 00:09:49.510\neither one.\n\n201\n00:09:49.510 --> 00:09:51.380\nWe'll do the host name, why not?\n\n202\n00:09:51.380 --> 00:09:54.985\nAnd I'm just gonna copy that and\nI'm gonna fire up PuTTY.\n\n203\n00:09:57.075 --> 00:10:00.996\nAnd when I launch PuTTY, I need to give\nit a little bit of information to get\n\n204\n00:10:00.996 --> 00:10:02.463\nconnected to that system.\n\n205\n00:10:02.463 --> 00:10:06.530\nI need to give it a host name,\nso I'll paste that in.\n\n206\n00:10:06.530 --> 00:10:11.780\nAnd then I'm gonna hit Open,\nso it's gonna connect.\n\n207\n00:10:11.780 --> 00:10:14.100\nAnd it's gonna tell me,\nhey I'm seeing this certificate for\n\n208\n00:10:14.100 --> 00:10:16.020\nthe first time just like RDP did.\n\n209\n00:10:16.020 --> 00:10:20.040\nI'll say that it's okay, and now it's\ngonna ask for my log in credentials.\n\n210\n00:10:20.040 --> 00:10:24.300\nSo I need to tell it who I am and\nthat I'm allowed to connect.\n\n211\n00:10:24.300 --> 00:10:26.310\nSo I'm gonna log in as dpezet and\n\n212\n00:10:26.310 --> 00:10:31.740\nI'll punch in my trusty password and\nthere we go.\n\n213\n00:10:31.740 --> 00:10:34.570\nNow I'm logged into that\nLinux box as myself.\n\n214\n00:10:34.570 --> 00:10:37.430\nAnd I can see I'm in CoreOS stable.\n\n215\n00:10:37.430 --> 00:10:40.772\nIf I start to kind of poke\naround on the system,\n\n216\n00:10:40.772 --> 00:10:45.930\nI can see that it's running CoreOS 766.4,\nit's up and running.\n\n217\n00:10:45.930 --> 00:10:48.900\nI can query its up time,\nwhich has been a whopping four minutes,\n\n218\n00:10:48.900 --> 00:10:50.552\nthis is a blazingly stable system.\n\n219\n00:10:50.552 --> 00:10:53.208\nAnd I can start getting to work with it,\ndeploying software,\n\n220\n00:10:53.208 --> 00:10:55.314\ndoing all the different\nthings that I need to do.\n\n221\n00:10:55.314 --> 00:10:57.850\nI'm now connected and I can work with it.\n\n222\n00:10:57.850 --> 00:11:00.170\nFrom here I can start\nadding more user names.\n\n223\n00:11:00.170 --> 00:11:02.870\nI can change the SSH\nport number if I want.\n\n224\n00:11:02.870 --> 00:11:06.730\nI can enable certificate authentication,\ndisable certificate authentication,\n\n225\n00:11:06.730 --> 00:11:08.440\nI can do all sorts of stuff.\n\n226\n00:11:08.440 --> 00:11:10.590\nThis is just the initial connection,\nright?\n\n227\n00:11:10.590 --> 00:11:12.430\nI used SSH and\nI logged in with the user name and\n\n228\n00:11:12.430 --> 00:11:15.304\npassword that was created at the time\nthe virtual machine was spun up.\n\n229\n00:11:17.580 --> 00:11:18.971\nAll right.\nThat's the Linux box,\n\n230\n00:11:18.971 --> 00:11:21.823\nlet's go back to our Windows box to\nsee if it's actually done or not.\n\n231\n00:11:21.823 --> 00:11:27.330\nIt is itprotvweb05 and I think it's done.\n\n232\n00:11:27.330 --> 00:11:30.470\nI get a little status pop up\nthat I ignored a minute ago but\n\n233\n00:11:30.470 --> 00:11:32.250\nyeah the status is running.\n\n234\n00:11:32.250 --> 00:11:36.570\nSo now that the status says running,\nthis machine should be up and good to go.\n\n235\n00:11:36.570 --> 00:11:37.565\nI can click Connect and\n\n236\n00:11:37.565 --> 00:11:42.580\nre-download that RDP file, but\nI saved the RDP file somewhere.\n\n237\n00:11:42.580 --> 00:11:43.718\n>> [LAUGH] Probably downloads.\n\n238\n00:11:43.718 --> 00:11:45.880\n>> Probably on my downloads,\nprobably, there it is.\n\n239\n00:11:45.880 --> 00:11:48.930\nAnd I'm just gonna double click on that\nfile again it's gonna reach out, and\n\n240\n00:11:48.930 --> 00:11:51.010\nthis time, I get the username prompt.\n\n241\n00:11:51.010 --> 00:11:52.889\nAnd so I'm gonna log in as me.\n\n242\n00:11:55.467 --> 00:11:56.987\nI think I typed that right.\n\n243\n00:11:56.987 --> 00:11:58.810\nAnd here's that warning\nabout the certificate.\n\n244\n00:11:58.810 --> 00:12:01.920\nI'm gonna tell it not to ask me again and\ngo ahead and connect up.\n\n245\n00:12:01.920 --> 00:12:05.250\nAnd now, it's remoting into that system.\n\n246\n00:12:05.250 --> 00:12:08.690\nAnd I'm greeted with the Windows\ndesktop for that system.\n\n247\n00:12:08.690 --> 00:12:10.450\nOnce I'm in here, again it's up to me.\n\n248\n00:12:10.450 --> 00:12:12.750\nI could start creating more user accounts.\n\n249\n00:12:12.750 --> 00:12:15.500\nI can disable my user account.\n\n250\n00:12:15.500 --> 00:12:16.600\nI can start setting permissions.\n\n251\n00:12:16.600 --> 00:12:17.850\nI can install software.\n\n252\n00:12:17.850 --> 00:12:20.160\nI can do all the things that I need to do.\n\n253\n00:12:20.160 --> 00:12:22.060\nBecause I'm connected to this machine.\n\n254\n00:12:22.060 --> 00:12:25.880\nAnd it's chosen a really high resolution,\nso I can barely read anything.\n\n255\n00:12:25.880 --> 00:12:27.590\nBut I am connected to the machine.\n\n256\n00:12:27.590 --> 00:12:28.800\nI can now start working with it and\n\n257\n00:12:28.800 --> 00:12:32.850\ndoing all the changes that I need to do\nto get this set up the way that I want.\n\n258\n00:12:32.850 --> 00:12:33.450\nAll right?\n\n259\n00:12:33.450 --> 00:12:35.660\nOnce I'm in here, I'm good to go.\n\n260\n00:12:35.660 --> 00:12:36.490\nI'm ready for action.\n\n261\n00:12:36.490 --> 00:12:38.300\n>> So these are fully blown.\n\n262\n00:12:38.300 --> 00:12:39.320\nThey're fully ready to go.\n\n263\n00:12:39.320 --> 00:12:40.720\nThis turkey is baked.\n\n264\n00:12:40.720 --> 00:12:43.320\nStart serving the mustard,\nand it's ready to rock.\n\n265\n00:12:43.320 --> 00:12:46.840\nYou can, like you said, start dishing\nout services, create users, and\n\n266\n00:12:46.840 --> 00:12:49.570\neither one of these things it was for\nrelatively quick and\n\n267\n00:12:49.570 --> 00:12:52.610\nrelatively painless to get even\nconnected to it to be honest with you.\n\n268\n00:12:52.610 --> 00:12:55.310\nIs there anything else that we\nneed to know about connecting\n\n269\n00:12:55.310 --> 00:12:57.370\nthat we might not see\nfrom the surface level?\n\n270\n00:12:57.370 --> 00:13:00.940\n>> Absolutely, so be aware that\nthe ways that I've connected here,\n\n271\n00:13:00.940 --> 00:13:02.880\nthey're just the defaults,\nthe Microsoft set up, and\n\n272\n00:13:02.880 --> 00:13:05.440\nthen once you've got it you can\nstart to change it however you want.\n\n273\n00:13:05.440 --> 00:13:07.020\nAnd they expect you to do that.\n\n274\n00:13:07.020 --> 00:13:10.930\nThey expect you to secure these a little\nmore than what they're set to right now.\n\n275\n00:13:10.930 --> 00:13:12.450\nLet me explain what I mean by that.\n\n276\n00:13:12.450 --> 00:13:15.270\nSo first off, RDP.\n\n277\n00:13:15.270 --> 00:13:17.240\nRDP uses TCP port 3389.\n\n278\n00:13:17.240 --> 00:13:19.260\nEverybody on the planet knows that.\n\n279\n00:13:19.260 --> 00:13:21.740\nAnd so hackers will run network scans and\nlook for 3389.\n\n280\n00:13:21.740 --> 00:13:27.370\nAnd if they see that port open on\nyour server, what can they do?\n\n281\n00:13:27.370 --> 00:13:29.120\nThey can try and break into it, right?\n\n282\n00:13:29.120 --> 00:13:31.260\nAnd they can try and\nbrute force access it.\n\n283\n00:13:31.260 --> 00:13:34.910\nSo it's a good idea to\nrestrict access to that port.\n\n284\n00:13:34.910 --> 00:13:37.590\nI don't want everybody to be\nable to connect on port 3389,\n\n285\n00:13:37.590 --> 00:13:41.420\nI just want specifically approved people.\n\n286\n00:13:41.420 --> 00:13:44.530\nAnd so I can take, let me disconnect\nfrom this guy real quick, so\n\n287\n00:13:44.530 --> 00:13:46.010\nI'm gonna disconnect.\n\n288\n00:13:46.010 --> 00:13:51.100\nWhat we can do is we can\ngo into our web UI for\n\n289\n00:13:51.100 --> 00:13:54.690\nAzure and\nwe can tighten up security on this server.\n\n290\n00:13:54.690 --> 00:13:59.924\nI'm gonna take the server, and\nso here I am in itprotvweb05,\n\n291\n00:13:59.924 --> 00:14:03.350\nand on the right side we've got all\nthese various settings and things.\n\n292\n00:14:03.350 --> 00:14:08.120\nAnd if I scroll down, one of the settings\nover here is called Endpoints.\n\n293\n00:14:08.120 --> 00:14:13.260\nAnd if I go into Endpoints, what we'll\nsee is that it's already opened up\n\n294\n00:14:13.260 --> 00:14:17.760\nports for the Remote Desktop Protocol and\nfor WinRM.\n\n295\n00:14:17.760 --> 00:14:18.470\nOkay.\n\n296\n00:14:18.470 --> 00:14:21.560\nAnd so those are my remote\nmanagement options, right.\n\n297\n00:14:21.560 --> 00:14:23.870\nRemote Desktop, TCP, port 3389.\n\n298\n00:14:23.870 --> 00:14:24.370\nOkay.\n\n299\n00:14:25.680 --> 00:14:29.240\nAnd if you look at it,\nit has this column called ACL Rules.\n\n300\n00:14:29.240 --> 00:14:32.180\nThat's your access control list and\nright now there's zero rules.\n\n301\n00:14:32.180 --> 00:14:36.050\nAnd what that means is that\nanyone in the entire world\n\n302\n00:14:36.050 --> 00:14:40.600\ncan connect to this server on port 3389\nand get a username and password prompt.\n\n303\n00:14:40.600 --> 00:14:42.440\nAnd start guessing, right.\n\n304\n00:14:42.440 --> 00:14:47.380\nAnd anyone in the entire world can connect\non 5986 and start doing WinRM calls and,\n\n305\n00:14:47.380 --> 00:14:49.900\nagain, try to brute force\nyour username and password.\n\n306\n00:14:49.900 --> 00:14:50.940\nWe don't want that.\n\n307\n00:14:50.940 --> 00:14:54.100\nOn a Linux box it would be the same\nthing but SSH, right, TCP port 22.\n\n308\n00:14:54.100 --> 00:14:57.270\nAnyone in the entire world could\nconnect and start brute forcing,\n\n309\n00:14:57.270 --> 00:14:58.880\ntrying to guess your username and\npassword.\n\n310\n00:14:58.880 --> 00:15:01.700\nAll right, if you're going certificate\nbased authentication, then it's no big\n\n311\n00:15:01.700 --> 00:15:05.060\ndeal, but when you're doing username and\npassword, that's a problem.\n\n312\n00:15:05.060 --> 00:15:06.380\nSo we want to restrict this.\n\n313\n00:15:06.380 --> 00:15:09.670\nAnd the way we restrict it\nis by setting ACL rules.\n\n314\n00:15:09.670 --> 00:15:13.440\nAll right so what we have to do\nis go in and kind of tweak that\n\n315\n00:15:13.440 --> 00:15:17.020\nto control who's going to be allowed\nto access the system and who isn't.\n\n316\n00:15:17.020 --> 00:15:22.060\nSo, I'm gonna click on RDP and\nit's gonna take me in to the RDP settings.\n\n317\n00:15:22.060 --> 00:15:25.140\nAnd then right here at the bottom\nI see access control list.\n\n318\n00:15:25.140 --> 00:15:28.360\nAnd from here,\nI can start to specify, whoop,\n\n319\n00:15:28.360 --> 00:15:30.880\nI can specify that I wanna see my screen.\n\n320\n00:15:30.880 --> 00:15:31.630\nThere we go.\n\n321\n00:15:31.630 --> 00:15:36.461\nI can start to specify who it is that's\nallowed to connect and who isn't, right?\n\n322\n00:15:36.461 --> 00:15:43.073\nSo, I could say for\nexample that I want to punch in that,\n\n323\n00:15:43.073 --> 00:15:50.547\nmaybe this will be item number one,\nwhich I'll say everyone.\n\n324\n00:15:50.547 --> 00:15:51.670\nI want to deny.\n\n325\n00:15:51.670 --> 00:15:59.171\nAnd for the remote subnet,\nI'll just put in Everyone there, okay?\n\n326\n00:15:59.171 --> 00:16:02.110\nSo now I'm denying everyone on the planet.\n\n327\n00:16:02.110 --> 00:16:04.720\nNobody will be able to connect via RDP.\n\n328\n00:16:04.720 --> 00:16:05.835\n>> Well, including you.\n\n329\n00:16:05.835 --> 00:16:07.089\n[LAUGH].\n>> Including myself, yeah, and\n\n330\n00:16:07.089 --> 00:16:08.420\nthat's a bit of a problem, right?\n\n331\n00:16:08.420 --> 00:16:10.490\nSo I probably wanna put in a rule for me.\n\n332\n00:16:10.490 --> 00:16:12.720\nNow the rules are applied in order.\n\n333\n00:16:12.720 --> 00:16:18.200\nSo, if I just leave it like this,\nif I add a second line, the first line\n\n334\n00:16:18.200 --> 00:16:21.520\napplies first and so I get blocked, and so\nthat could be a little bit of a problem.\n\n335\n00:16:21.520 --> 00:16:23.180\nBut I wanna show you guys getting blocked,\nright?\n\n336\n00:16:23.180 --> 00:16:26.730\nSo I'm just gonna put in this entry as,\nit says everyone deny, or\n\n337\n00:16:26.730 --> 00:16:30.060\nI could even add a fake address in here.\n\n338\n00:16:30.060 --> 00:16:36.952\nMaybe I want everyone, it's probably gonna\ngripe at me for doing a duplicate rule.\n\n339\n00:16:36.952 --> 00:16:41.123\nBut I wanna change this, so\nI could say like, I've got some host,\n\n340\n00:16:41.123 --> 00:16:45.072\na computer somewhere, and\nI'm gonna permit it to access, and\n\n341\n00:16:45.072 --> 00:16:48.670\nI'll just say that it's,\nI'll just make up an IP here.\n\n342\n00:16:48.670 --> 00:16:54.001\nI'll do something like 1.1.1.1 or\nsomething like that, right, so.\n\n343\n00:16:57.217 --> 00:16:57.840\nThere.\n\n344\n00:16:57.840 --> 00:17:02.820\nAll right, so basically the way\nthis one reads now is that\n\n345\n00:17:02.820 --> 00:17:05.220\neveryone in the entire world\nis gonna be denied, but\n\n346\n00:17:05.220 --> 00:17:08.520\nif you are 1.1.1.1 you'll be\nallowed to connect, right?\n\n347\n00:17:08.520 --> 00:17:10.560\nI'm approving just that one IP address,\nright?\n\n348\n00:17:10.560 --> 00:17:13.390\nAnd so now if I were to go back,\n\n349\n00:17:13.390 --> 00:17:16.270\nwell I guess I need to save this first\notherwise it doesn't work so well.\n\n350\n00:17:16.270 --> 00:17:19.980\nBut once this is in place,\nnow I've restricted access to that port.\n\n351\n00:17:19.980 --> 00:17:23.720\nNow I could have done this with a firewall\nrule inside the Windows machine couldn't\n\n352\n00:17:23.720 --> 00:17:25.020\nI right?\n\n353\n00:17:25.020 --> 00:17:29.330\nBut remember that sometimes we don't\nnecessarily have that Windows Firewall\n\n354\n00:17:29.330 --> 00:17:30.230\nturned on.\n\n355\n00:17:30.230 --> 00:17:33.930\nOr by the time somebody gets through the\nWindows Firewall the attack has already\n\n356\n00:17:33.930 --> 00:17:34.970\nmade it to the server.\n\n357\n00:17:34.970 --> 00:17:38.520\nBy doing it here I've stopped the attack\nbefore it even gets to the server,\n\n358\n00:17:38.520 --> 00:17:41.230\nso this is like an extra\nlevel of protection.\n\n359\n00:17:41.230 --> 00:17:43.240\nIf somebody's doing a port scan for 3389,\n\n360\n00:17:43.240 --> 00:17:46.850\nthey don't even see it as being\nopened when they hit this.\n\n361\n00:17:46.850 --> 00:17:48.560\nIt just passes right over it.\n\n362\n00:17:48.560 --> 00:17:53.470\nAnd if I go back to my desktop and\ntry and launch this file and try and\n\n363\n00:17:53.470 --> 00:17:58.470\nconnect, I should've gotten a username and\npassword prompt by now, right?\n\n364\n00:17:58.470 --> 00:18:00.310\nI can't even connect.\n\n365\n00:18:00.310 --> 00:18:01.740\nSo, now I'm being blocked.\n\n366\n00:18:01.740 --> 00:18:06.360\nAnd what you should do is, you should\ndetermine what your public IP is.\n\n367\n00:18:06.360 --> 00:18:08.500\nAnd I think I know my public IP,\nbut let's just be sure.\n\n368\n00:18:08.500 --> 00:18:10.988\nI'm gonna go to the good\nold IPChicken.com.\n\n369\n00:18:10.988 --> 00:18:14.690\nIf you can't trust a chicken to\ntell your IP, who can you trust?\n\n370\n00:18:14.690 --> 00:18:18.040\nAnd so here's my IP address,\nthat's my public IP.\n\n371\n00:18:18.040 --> 00:18:22.780\nAnd then I'm gonna jump back here, and\nI'm just gonna add another ACL entry\n\n372\n00:18:22.780 --> 00:18:28.110\nthat is going to basically tell it that,\nwell, I wanna let myself in, right?\n\n373\n00:18:28.110 --> 00:18:30.770\nSo I'm gonna come in here and\npunch in a new one now.\n\n374\n00:18:30.770 --> 00:18:34.220\nI want it to be the first in line, but\nI'm gonna end up with it down here.\n\n375\n00:18:34.220 --> 00:18:36.030\nSo what I'm gonna do is I'm\ngonna give it the number 1,\n\n376\n00:18:36.030 --> 00:18:41.920\neven though the number 1's already in use,\nand I'll call this Don's Laptop.\n\n377\n00:18:41.920 --> 00:18:43.740\nAnd I'm gonna permit me, and actually,\n\n378\n00:18:43.740 --> 00:18:46.969\nI shouldn't call it my laptop cuz\nI'm gonna do the office's IP, right?\n\n379\n00:18:46.969 --> 00:18:50.034\nSo this would be the ITProTV Studios.\n\n380\n00:18:50.034 --> 00:18:54.709\nAnd then the IP address that I got from\nthat website just a moment ago is that IP\n\n381\n00:18:54.709 --> 00:18:56.590\nparticularly, okay?\n\n382\n00:18:56.590 --> 00:18:59.340\nSo, now I'm approving that and I can come\nup here and I can take this host and\n\n383\n00:18:59.340 --> 00:19:02.530\nrenumber it to number 2, and\nrenumber this to number 3.\n\n384\n00:19:02.530 --> 00:19:08.230\nAnd so now, I'm kind of renumbering\nmy list to meet my needs, right?\n\n385\n00:19:08.230 --> 00:19:10.360\nAnd now that that's done.\n\n386\n00:19:10.360 --> 00:19:12.410\n>> Don, do you always have to\nre-number it like that, or\n\n387\n00:19:12.410 --> 00:19:15.830\nwill it automatically change\nthose numbers if we just saved?\n\n388\n00:19:15.830 --> 00:19:16.820\n>> It'll automatically do it.\n\n389\n00:19:16.820 --> 00:19:19.880\nYeah, if you have two of them as number\none, it'll kind of flip them around or\n\n390\n00:19:19.880 --> 00:19:20.920\nreorganize them.\n\n391\n00:19:20.920 --> 00:19:23.790\nI'm just being thorough\nhere cuz it's a short list.\n\n392\n00:19:23.790 --> 00:19:28.260\nSo now when I save it, my IP's back\non the good list again, right?\n\n393\n00:19:28.260 --> 00:19:31.040\nAnd so now I'm able to connect and I don't\nhave to worry about other people scanning.\n\n394\n00:19:31.040 --> 00:19:33.770\nIf somebody scans, if one of you\nguys out there in TV land right now,\n\n395\n00:19:33.770 --> 00:19:37.080\nif you were to scan,\nyou wouldn't even see 3389 open.\n\n396\n00:19:37.080 --> 00:19:41.410\nBut if I come along, the ITProTV Studios,\nwe're in that list and\n\n397\n00:19:41.410 --> 00:19:43.840\nwe'll be allowed to connect,\nright, or at least we should.\n\n398\n00:19:43.840 --> 00:19:49.530\nSo if I test that out again, I'm gonna\njump back here and try and open that file.\n\n399\n00:19:49.530 --> 00:19:52.090\nAnd, assuming that it applied,\nwe should get through.\n\n400\n00:19:53.930 --> 00:19:55.480\nWell, that doesn't seem to be working.\n\n401\n00:19:55.480 --> 00:19:58.260\nSo, it does take a moment for\nthese to apply, and\n\n402\n00:19:58.260 --> 00:19:59.790\nI'm pretty sure I saved, didn't I?\n\n403\n00:20:00.870 --> 00:20:03.360\nYeah, I got a little gray icon there,\nso let me double check.\n\n404\n00:20:03.360 --> 00:20:04.780\nI put that IP address in.\n\n405\n00:20:04.780 --> 00:20:08.049\nNow, when you put the IP address in,\nthere's a few things to double check,\n\n406\n00:20:08.049 --> 00:20:11.730\nlike common mistakes that I make,\ncuz I do make mistakes with this.\n\n407\n00:20:11.730 --> 00:20:16.320\nSometimes I forget to switch to permit and\nI leave it with a deny in there,\n\n408\n00:20:16.320 --> 00:20:17.810\nwhich is always a good time.\n\n409\n00:20:17.810 --> 00:20:19.330\nSo that's one possibility.\n\n410\n00:20:19.330 --> 00:20:23.720\nOther things is if you put the wrong\nsubnet mask in there, like I did this /32.\n\n411\n00:20:23.720 --> 00:20:26.310\nI redid the order, but\n\n412\n00:20:26.310 --> 00:20:30.520\nit did not update the list to show\nthat in effect, which is odd.\n\n413\n00:20:30.520 --> 00:20:33.000\nSo it should have done that,\nand it didn't, so\n\n414\n00:20:33.000 --> 00:20:35.530\nit might not actually be\napplying my order properly.\n\n415\n00:20:35.530 --> 00:20:40.080\nSo let me do a quick refresh here,\n\n416\n00:20:41.630 --> 00:20:43.220\nand make sure that it's\ntaking that into account.\n\n417\n00:20:43.220 --> 00:20:46.870\nSo, if it ever kinda acts up like that,\nyou can just back out of the virtual\n\n418\n00:20:46.870 --> 00:20:50.000\nmachine and then go back into it,\nand make sure that it's reorganized.\n\n419\n00:20:50.000 --> 00:20:53.390\nIf it hasn't, I might just need to\nre-define my rule list, and that'll work.\n\n420\n00:20:53.390 --> 00:20:57.870\nSo, I'm gonna drill down into my\nProperties, not my Properties,\n\n421\n00:20:57.870 --> 00:20:59.750\nI mean my Endpoints.\n\n422\n00:20:59.750 --> 00:21:03.060\nAnother thing while I'm in here\nkinda dinking around with this,\n\n423\n00:21:03.060 --> 00:21:07.360\nthe endpoint, see how it has\na public port and a private port?\n\n424\n00:21:07.360 --> 00:21:09.890\nAnd I didn't really mess with that,\nbut if I have\n\n425\n00:21:09.890 --> 00:21:14.850\nmore than one server in the same Cloud\nservice, then they're sharing a public IP.\n\n426\n00:21:14.850 --> 00:21:16.810\nAnd if I have two servers that\nare looking up port 3389,\n\n427\n00:21:16.810 --> 00:21:19.250\nhow do you know which one to connect to?\n\n428\n00:21:19.250 --> 00:21:20.100\nIt doesn't.\n\n429\n00:21:20.100 --> 00:21:22.440\nSo I might change the public port of one.\n\n430\n00:21:22.440 --> 00:21:26.761\nI might have one be 3389 and\nthe other one be 3390 or 3388, right?\n\n431\n00:21:26.761 --> 00:21:29.187\nAnd now I can specify that\npublic port to connect.\n\n432\n00:21:29.187 --> 00:21:32.340\nAnd that's also how we can change\nthe port to something non-standard.\n\n433\n00:21:32.340 --> 00:21:35.540\nSo for example for\nLinux port 22 is really obvious.\n\n434\n00:21:35.540 --> 00:21:38.684\nI might want to change that to port 50022.\n\n435\n00:21:38.684 --> 00:21:40.630\nAnd so I could modify that for\nthe connectivity.\n\n436\n00:21:41.970 --> 00:21:42.807\nAnd there we go.\n\n437\n00:21:42.807 --> 00:21:45.580\nSo now that I've kinda refreshed\nthat screen, I come over here.\n\n438\n00:21:45.580 --> 00:21:49.520\nAnd I can see the ITProTV Studios\nright here are permitted.\n\n439\n00:21:49.520 --> 00:21:53.610\nAnd so it's moved them, and\nsee my order is now correct?\n\n440\n00:21:53.610 --> 00:21:55.070\nSo ITProTV Studios are first.\n\n441\n00:21:55.070 --> 00:21:57.560\nWe're permitting the IP\nthat I'm sitting behind, or\n\n442\n00:21:57.560 --> 00:21:59.650\nat least the IP I think\nI'm sitting behind.\n\n443\n00:21:59.650 --> 00:22:02.993\nAnd then each of the other lines\nthat I might have chosen to add.\n\n444\n00:22:02.993 --> 00:22:05.026\nNow, I did a /32 on that one.\n\n445\n00:22:05.026 --> 00:22:07.474\nTechnically my subnet\nis bigger than a /32.\n\n446\n00:22:07.474 --> 00:22:11.819\nI think we have a /27, so\nI could put in the right subnet, and so\n\n447\n00:22:11.819 --> 00:22:15.350\nit'll approve that and\nget that one put in.\n\n448\n00:22:15.350 --> 00:22:18.260\nAnd the main reason I'm doing that\nis I just wanna hit Save again and\n\n449\n00:22:18.260 --> 00:22:19.550\nmake sure that updates.\n\n450\n00:22:19.550 --> 00:22:22.660\nSo once that's done,\nnow we should be able to connect.\n\n451\n00:22:22.660 --> 00:22:24.540\nNow, oops, looks like I got a failure.\n\n452\n00:22:24.540 --> 00:22:26.250\nThat failure went by kinda fast,\ndidn't it?\n\n453\n00:22:26.250 --> 00:22:27.560\nFailed to update endpoint.\n\n454\n00:22:27.560 --> 00:22:30.840\nRemote desktop, and it's not giving\nme a lot of explanation there, so\n\n455\n00:22:30.840 --> 00:22:33.030\nlet's click on that and\nsee what our error is.\n\n456\n00:22:33.030 --> 00:22:39.130\nAnd the error is that it failed to update,\nperfect.\n\n457\n00:22:39.130 --> 00:22:40.427\nSo [LAUGH].\n\n458\n00:22:40.427 --> 00:22:41.910\n>> The one thing you wanted it to do?\n\n459\n00:22:41.910 --> 00:22:43.480\n>> I know,\nnot a terribly detailed message.\n\n460\n00:22:43.480 --> 00:22:47.790\nBut that might indicate why my\nconnection failed a moment ago right,\n\n461\n00:22:47.790 --> 00:22:49.700\nif it's not able to\nupdate the the endpoints.\n\n462\n00:22:49.700 --> 00:22:52.050\nSo if that ever happens you can just\ndelete the rules and recreate them.\n\n463\n00:22:52.050 --> 00:22:54.010\nThat's kind of an easy\nway to go about that.\n\n464\n00:22:54.010 --> 00:22:56.330\nLet me just get back in there.\n\n465\n00:22:56.330 --> 00:22:58.890\nAnd see if it actually saves it or not.\n\n466\n00:22:58.890 --> 00:23:01.830\nNow on the Linux box,\nwe can do the same exact thing.\n\n467\n00:23:01.830 --> 00:23:06.410\nYou go to the endpoint for that port\n22 and you just go in and adjust it.\n\n468\n00:23:06.410 --> 00:23:09.680\nYou set it to a different\nport number if you want.\n\n469\n00:23:09.680 --> 00:23:12.820\nYou set it with a different ACL and\nthen you get that in place.\n\n470\n00:23:12.820 --> 00:23:20.250\nNow, the ACL that I'm working with\nhere is the ACL for just RDP.\n\n471\n00:23:20.250 --> 00:23:25.220\nI didn't mess with the ACL for\nWIN-RM, for remote management, right?\n\n472\n00:23:25.220 --> 00:23:26.500\nSo I have to set it for each of these.\n\n473\n00:23:26.500 --> 00:23:29.610\nYou can have different ACLs for\neach protocol,\n\n474\n00:23:29.610 --> 00:23:31.410\nwhich is kind of a nice thing to do.\n\n475\n00:23:31.410 --> 00:23:33.410\nSo you can really kinda\ndial down security.\n\n476\n00:23:33.410 --> 00:23:36.430\nBecause I might have a web server\nI want everybody to get to, but\n\n477\n00:23:36.430 --> 00:23:37.990\nthen RDP really limited.\n\n478\n00:23:37.990 --> 00:23:43.520\nSo each one has its own ACL defined, and\nsure enough, it didn't save that setting.\n\n479\n00:23:43.520 --> 00:23:46.295\nFor whatever reason,\nit just didn't like that.\n\n480\n00:23:46.295 --> 00:23:50.213\nSo, we'll try that again,\njust see if it saves.\n\n481\n00:23:50.213 --> 00:23:52.921\nAnd then while that's running I'll\njust re-attempt the connection.\n\n482\n00:23:52.921 --> 00:23:54.422\nNow, there we go.\n\n483\n00:23:54.422 --> 00:23:56.129\nYep, now it's saved.\n\n484\n00:23:56.129 --> 00:23:59.790\nAnd I'm able to get back into that system.\n\n485\n00:23:59.790 --> 00:24:02.160\nSo that's securing it\nbased on a source IP.\n\n486\n00:24:02.160 --> 00:24:04.940\nNow I don't have to worry about\neverybody in the world getting to it.\n\n487\n00:24:04.940 --> 00:24:06.890\nI mentioned changing the port number.\n\n488\n00:24:06.890 --> 00:24:09.000\nLet's take a look at that Linux box.\n\n489\n00:24:09.000 --> 00:24:13.905\nThe Linux box that I spun\nup was ITProTVWeb06 and so\n\n490\n00:24:13.905 --> 00:24:19.047\nif I jump over to that one,\nand I go into its endpoints.\n\n491\n00:24:19.047 --> 00:24:24.005\nSo I'm just gonna browse in\nhere to endpoints, all right.\n\n492\n00:24:24.005 --> 00:24:27.250\nAnd if I take a look at its endpoints,\n\n493\n00:24:27.250 --> 00:24:32.297\nit just has that SSH TCP 422,\nand that's it, right?\n\n494\n00:24:32.297 --> 00:24:33.917\nAnd so I can take it and\n\n495\n00:24:33.917 --> 00:24:39.910\nwe can apply ACL state just like we did\nto the other one right, same thing.\n\n496\n00:24:39.910 --> 00:24:44.356\nNow for this one, I'm not gonna apply\nan ACL this time but what I am gonna do is\n\n497\n00:24:44.356 --> 00:24:49.381\nI'm gonna take it's Public port and\nI'm gonna change it to 50022, all right?\n\n498\n00:24:49.381 --> 00:24:52.167\nNow the private port I'm leaving at 22,\nand the reason is,\n\n499\n00:24:52.167 --> 00:24:55.383\nI don't wanna have to log into the Linux\nbox and change the service, and\n\n500\n00:24:55.383 --> 00:24:57.110\ntell it to run under a different port.\n\n501\n00:24:57.110 --> 00:24:58.350\nThe service can stay on port 22.\n\n502\n00:24:58.350 --> 00:24:59.880\nI'm fine with that.\n\n503\n00:24:59.880 --> 00:25:03.380\nBut on the public side,\nthe world is gonna see it on 50022, and\n\n504\n00:25:03.380 --> 00:25:04.890\nit's basically gonna nat it, right?\n\n505\n00:25:04.890 --> 00:25:07.500\nNat it and convert it over to port 22,\nand send it on in.\n\n506\n00:25:07.500 --> 00:25:13.490\nAnd so when I save that, I'm now, they\ncall it security through obscurity, right?\n\n507\n00:25:13.490 --> 00:25:19.270\nI'm obscuring the fact that I'm running\nSSH by moving it off to a different port.\n\n508\n00:25:19.270 --> 00:25:21.970\nAnd so we can do that,\ndid I get another error?\n\n509\n00:25:21.970 --> 00:25:23.810\nThis is like error day isn't it?\n\n510\n00:25:23.810 --> 00:25:26.940\nOh that's old errors, we'll ignore those.\n\n511\n00:25:26.940 --> 00:25:30.338\nSo number six here took its application,\nso it's saved.\n\n512\n00:25:30.338 --> 00:25:35.274\nAnd if I go and\nfire up PuTTY again like we did earlier,\n\n513\n00:25:35.274 --> 00:25:41.006\nnow I can go and\nconnect to ITProTVWeb06.cloudApp.net.\n\n514\n00:25:41.006 --> 00:25:46.690\nAnd for the port I'm gonna put in 50022.\n\n515\n00:25:46.690 --> 00:25:50.320\nSo little bit different from what\nwe would do by default right,\n\n516\n00:25:50.320 --> 00:25:52.360\ncuz SSH is normally just on port 22.\n\n517\n00:25:52.360 --> 00:25:55.940\nNow I've got it at 50022 and\nwhen I go and open that.\n\n518\n00:25:57.740 --> 00:25:58.280\nThere we go.\n\n519\n00:25:58.280 --> 00:26:01.600\nI get prompted for the certificate\nbecause it views it as a new host and\n\n520\n00:26:01.600 --> 00:26:04.930\nI can get logged in,\nassuming I can remember my password.\n\n521\n00:26:06.130 --> 00:26:08.230\nAnd now I'm on the system, okay?\n\n522\n00:26:08.230 --> 00:26:12.980\nAnd it thinks that I am\nconnected on port 22 because\n\n523\n00:26:12.980 --> 00:26:14.980\nit doesn't know about the 50022, right?\n\n524\n00:26:14.980 --> 00:26:17.030\nIt's being natted by the system.\n\n525\n00:26:17.030 --> 00:26:18.850\nAnd I get connected, so\nnow I'm a little more secure.\n\n526\n00:26:18.850 --> 00:26:24.580\nSo the moral of the story is, RDP and\nSSH are turned on by default, but we\n\n527\n00:26:24.580 --> 00:26:29.130\ncan change their default port very easily\nwithout even modifying the underlying OS.\n\n528\n00:26:29.130 --> 00:26:33.230\nAnd we can use ACLs to\ncontrol who has that access.\n\n529\n00:26:33.230 --> 00:26:35.580\nSo don't just leave them lying open,\ntighten it up.\n\n530\n00:26:35.580 --> 00:26:37.870\nBut then you've got RDP and\nSSH ready to connect in,\n\n531\n00:26:37.870 --> 00:26:41.480\ndo your work and just use it like\nit would be an on-premises server.\n\n532\n00:26:41.480 --> 00:26:44.589\n>> Awesome, Don, would it be a good\nidea to maybe even blend the two?\n\n533\n00:26:44.589 --> 00:26:47.604\nLike we have the Windows firewall or\nLinux uses IP tables,\n\n534\n00:26:47.604 --> 00:26:49.890\nto use both in conjunction\nwith each other.\n\n535\n00:26:49.890 --> 00:26:53.755\nWould that be beneficial as well, for more\nsecurity, or this is fine, this'll do ya?\n\n536\n00:26:53.755 --> 00:26:55.775\n>> You know,\nthis is the age old question, and\n\n537\n00:26:55.775 --> 00:26:58.296\nyou'll hear different people\nsay different things.\n\n538\n00:26:58.296 --> 00:26:59.550\nAnd I'll tell you guys,\n\n539\n00:26:59.550 --> 00:27:02.964\nI hate having to go to more than one\nplace to troubleshoot a problem.\n\n540\n00:27:02.964 --> 00:27:06.228\nAnd so for me, I usually turn\nthe Windows firewall off and\n\n541\n00:27:06.228 --> 00:27:10.381\nI know some of you were just like [SOUND]\ndid he go, what craziness is this?\n\n542\n00:27:10.381 --> 00:27:15.547\nWell, if you have a single VM\ninside of a single cloud service.\n\n543\n00:27:15.547 --> 00:27:19.598\nAnd you're configuring ACL on that VM for\nall of its endpoints,\n\n544\n00:27:19.598 --> 00:27:22.006\nthen you've already got a firewall.\n\n545\n00:27:22.006 --> 00:27:24.714\nAnd the Windows firewall's not\ngonna do any better of a job.\n\n546\n00:27:24.714 --> 00:27:28.580\nThe only difference really, is if you\nwanna filter outbound traffic, right?\n\n547\n00:27:28.580 --> 00:27:33.090\nThe ACLs that I just defined there were\nfor inbound traffic, not outbound.\n\n548\n00:27:33.090 --> 00:27:35.690\nWell the default Windows firewall\nrules out pretty much everything to go\n\n549\n00:27:35.690 --> 00:27:36.390\nout anyway.\n\n550\n00:27:36.390 --> 00:27:38.850\nSo if you're somebody who\nneeds outbound rules,\n\n551\n00:27:38.850 --> 00:27:40.180\nyeah, keep using the Window firewall.\n\n552\n00:27:40.180 --> 00:27:41.770\nIt'll definitely solve your problem.\n\n553\n00:27:41.770 --> 00:27:45.450\nBut if you're just worried about inbound\ntraffic, which is what most of us are,\n\n554\n00:27:45.450 --> 00:27:49.370\nthen you can disable the Windows\nfirewall and use the azure acl's.\n\n555\n00:27:49.370 --> 00:27:52.794\nAnd that will basically serve as\nyour firewall, and now when you've\n\n556\n00:27:52.794 --> 00:27:56.881\ngot a problem, you've only got one place\nto go, the endpoint ACL is right there.\n\n557\n00:27:56.881 --> 00:27:59.919\nAnd if you've got this tied to a cloud\nservice, now it becomes a little bit\n\n558\n00:27:59.919 --> 00:28:03.740\neasier, it's one set of rules that applies\nto all the machines that are behind it.\n\n559\n00:28:03.740 --> 00:28:06.640\nSo, kind of a nice little\nsystem to have in place there.\n\n560\n00:28:06.640 --> 00:28:08.410\nIt is what I normally do.\n\n561\n00:28:08.410 --> 00:28:11.640\nIn Linux, you got IP tables,\nin Windows you got the Windows firewall,\n\n562\n00:28:11.640 --> 00:28:13.700\nin different OS's you\nhave different solutions.\n\n563\n00:28:13.700 --> 00:28:14.960\nHere we can have one solution.\n\n564\n00:28:14.960 --> 00:28:18.547\nOne software firewall that's configured\nright inside of the Azure UI.\n\n565\n00:28:18.547 --> 00:28:21.390\n>> And then you get consistency\nthroughout all you operating systems.\n\n566\n00:28:21.390 --> 00:28:22.380\nI could be running Windows and\n\n567\n00:28:22.380 --> 00:28:25.600\nLinux and whatever else that\nI have available in Azure.\n\n568\n00:28:25.600 --> 00:28:27.430\nAnd the firewall rules are all\nthe same for everything.\n\n569\n00:28:27.430 --> 00:28:30.900\nI don't have to learn IP tables, and the\nWindows Firewall Advanced features, and\n\n570\n00:28:30.900 --> 00:28:33.200\nall that, to try to get them\nto do the exact same thing.\n\n571\n00:28:33.200 --> 00:28:37.050\nDo it all right there, in\nthe Azure Firewall, makes it easy for us.\n\n572\n00:28:37.050 --> 00:28:39.800\nDon is there anything else we need to\nlet these good people know before we\n\n573\n00:28:39.800 --> 00:28:40.630\npart ways?\n\n574\n00:28:40.630 --> 00:28:42.340\n>> I think that's about it for this one.\n\n575\n00:28:42.340 --> 00:28:45.690\nYou know, just bear in mind that RDP and\nSHH are set up by default.\n\n576\n00:28:45.690 --> 00:28:47.700\nI didn't technically have to do anything.\n\n577\n00:28:47.700 --> 00:28:49.490\nWe just connect right in.\n\n578\n00:28:49.490 --> 00:28:51.910\nWith the Linux one, it's really important\nto remember user name and password.\n\n579\n00:28:51.910 --> 00:28:53.510\nSame thing with the Windows one.\n\n580\n00:28:53.510 --> 00:28:59.050\nIf you created a Linux box in the old\nlegacy portal, the username is Azure User.\n\n581\n00:28:59.050 --> 00:29:00.670\nIt's there by default,\nyou can't change it.\n\n582\n00:29:00.670 --> 00:29:03.130\nIf you do it in the new portal,\nlike I did, you can set a user name.\n\n583\n00:29:03.130 --> 00:29:05.070\nA little bit of a variation there.\n\n584\n00:29:05.070 --> 00:29:08.090\nBut it defaults,\neveryone in the world knows the defaults,\n\n585\n00:29:08.090 --> 00:29:10.220\nso consider changing the port numbers.\n\n586\n00:29:10.220 --> 00:29:12.130\nConsider using ACL's restrict access.\n\n587\n00:29:12.130 --> 00:29:13.040\nIf you're restricting access,\n\n588\n00:29:13.040 --> 00:29:14.720\nyou can leave them with the standard\nport numbers if you want.\n\n589\n00:29:14.720 --> 00:29:17.200\nDoesn't really matter,\nyou're controlling that access\n\n590\n00:29:17.200 --> 00:29:18.285\n>> All right Don, well thanks for\n\n591\n00:29:18.285 --> 00:29:21.695\njoining us today and\ngiving us those explanations on using and\n\n592\n00:29:21.695 --> 00:29:24.725\nconnecting to our VMs in Azure.\n\n593\n00:29:24.725 --> 00:29:27.745\nAnd thank you for watching, we're gonna\ngo ahead and sign off for ITProTV.\n\n594\n00:29:27.745 --> 00:29:29.505\nI've been your host, Daniel Lowry.\n\n595\n00:29:29.505 --> 00:29:30.175\n>> And I'm Don Pezet.\n\n596\n00:29:30.175 --> 00:29:32.005\n>> And we'll see you next time.\n\n597\n00:29:32.005 --> 00:29:37.950\n[MUSIC]\n\n",
          "vimeoId": "148667848"
        },
        {
          "description": "In this episode, Daniel and Don explore how to use Azure to quickly deploy a custom virtual machine \"image\". They start things off by describing the concept of imaging, which is basically taking a picture of a computer's state. Then they use the Azure portal to create an Azure VM image, step-by-step. Finally, they show you how to create a new VM or recreate a VM using the custom image from the Azure portal.",
          "length": "1681",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-1-6-using_vm_images-012116-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-1-6-using_vm_images-012116-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-1-6-using_vm_images-012116-1-sm.jpg",
          "title": "Azure VM Images",
          "transcript": "WEBVTT\n\n1\n00:00:00.038 --> 00:00:10.038\n[MUSIC]\n\n2\n00:00:11.819 --> 00:00:12.719\nAll right.\n\n3\n00:00:12.719 --> 00:00:15.900\nGreetings everyone, and welcome to\nanother great episode of ITProTV.\n\n4\n00:00:15.900 --> 00:00:17.910\nI'm your host Daniel Lowrie, and\n\n5\n00:00:17.910 --> 00:00:22.490\nin today's episode,well, we're continuing\non as your virtual machine series,\n\n6\n00:00:22.490 --> 00:00:27.540\njoining me in the studio today is\nnone other than Mr. Don Pezet.\n\n7\n00:00:27.540 --> 00:00:29.580\n>> Don P world.\n\n8\n00:00:29.580 --> 00:00:32.480\nThanks for having me back, Daniel.\n\n9\n00:00:32.480 --> 00:00:36.760\nIn this episode, we're going to be taking\na look at a couple of different things.\n\n10\n00:00:36.760 --> 00:00:42.280\nMostly, really, I guess in general\njust Azure virtual machine images.\n\n11\n00:00:42.280 --> 00:00:43.690\nYou can use them for so\n\n12\n00:00:43.690 --> 00:00:47.050\nmany different things, I'm getting\nkind of ahead of myself, I guess.\n\n13\n00:00:48.080 --> 00:00:49.970\nIn Azure, we deploy virtual machines, and\n\n14\n00:00:49.970 --> 00:00:53.480\nin this show, I've been deploying a bunch\nof just basic installs of Windows.\n\n15\n00:00:53.480 --> 00:00:57.860\nHere's a Windows server, here's a Linux\nserver and they're just stock installs.\n\n16\n00:00:57.860 --> 00:01:00.970\nWhat good are those when you deploy them?\n\n17\n00:01:00.970 --> 00:01:02.790\nI shouldn't say they're not any good.\n\n18\n00:01:02.790 --> 00:01:04.050\nThey're not configured.\n\n19\n00:01:04.050 --> 00:01:06.060\nSo, if I need a web server and\n\n20\n00:01:06.060 --> 00:01:09.460\nI just deployed one of Microsoft's\ntemplate Windows boxes.\n\n21\n00:01:09.460 --> 00:01:13.140\nI've gotta login, I've gotta configure the\nroles, I've gotta put my website on there.\n\n22\n00:01:13.140 --> 00:01:15.320\nThere's a lot of work I've gotta\ndo to get that system up and\n\n23\n00:01:15.320 --> 00:01:17.550\nrunning the way that we need it.\n\n24\n00:01:17.550 --> 00:01:22.160\nAnd so in this episode, we're gonna take\na look at Azure virtual machine images and\n\n25\n00:01:22.160 --> 00:01:24.290\nhow we can get a machine set\nup just the way we want it,\n\n26\n00:01:24.290 --> 00:01:29.150\nand we can basically create clones of it,\nso that we can deploy much more rapidly.\n\n27\n00:01:29.150 --> 00:01:31.940\nAnd the main reason we do that is for\ndeployment, to speed things up.\n\n28\n00:01:31.940 --> 00:01:34.760\nBut you can also use it for\nbackup and recovery purposes too.\n\n29\n00:01:34.760 --> 00:01:38.220\nSo, there's a couple of different\nways that we can use this.\n\n30\n00:01:38.220 --> 00:01:39.930\nBut at the end of the day,\nit is all the same technology.\n\n31\n00:01:39.930 --> 00:01:42.550\nThat we can create these virtual\nmachine images for reuse.\n\n32\n00:01:42.550 --> 00:01:45.540\nAnd so, that's what we're going to\nsee going forward with this apps.\n\n33\n00:01:45.540 --> 00:01:48.570\n>> Yeah, this is not a new concept,\nby any stretch of the imagination.\n\n34\n00:01:48.570 --> 00:01:51.750\nThis is something that, if you've been\nin the business for any length of time,\n\n35\n00:01:51.750 --> 00:01:55.470\nyou've probably dealt with, or had to\ndo yourself, the creation of images.\n\n36\n00:01:55.470 --> 00:01:58.030\nAnd there's third party\nsoftware that's all over.\n\n37\n00:01:58.030 --> 00:01:59.274\nIt's just rife through the internet.\n\n38\n00:01:59.274 --> 00:02:00.340\n[INAUDIBLE] Find you a good one.\n\n39\n00:02:00.340 --> 00:02:01.940\nAnd use that guide.\n\n40\n00:02:01.940 --> 00:02:03.690\nIt meets all your needs.\n\n41\n00:02:03.690 --> 00:02:06.350\nAnd we've done that for a long,\nlong time, but now that Azure is here and\n\n42\n00:02:06.350 --> 00:02:08.630\nit's part of our world,\nthey said, hey, you know what?\n\n43\n00:02:08.630 --> 00:02:10.340\nWe can jump in that game, too.\n\n44\n00:02:10.340 --> 00:02:13.790\nWhy get some third party to go in when\nwe are already offering it to you.\n\n45\n00:02:13.790 --> 00:02:15.920\nSo Don,\nI'm looking forward to seeing how Azure,\n\n46\n00:02:15.920 --> 00:02:20.330\nand I guess it's a good way to start\nhow does Azure differentiate from\n\n47\n00:02:20.330 --> 00:02:25.510\nthe traditional model of using images and\ncreating images and start there?\n\n48\n00:02:25.510 --> 00:02:30.340\n>> Well, think about Image X,\nSemanic Ghost.\n\n49\n00:02:30.340 --> 00:02:31.480\n>> Alteares.\n\n50\n00:02:31.480 --> 00:02:34.230\n>> Alteares,\nAchronus True Image, those guys.\n\n51\n00:02:34.230 --> 00:02:35.800\nParagon Drive Back Up.\n\n52\n00:02:35.800 --> 00:02:37.540\nThere all great products, right?\n\n53\n00:02:37.540 --> 00:02:40.097\nAnd if I want to take an image\nof a physical with one of those,\n\n54\n00:02:40.097 --> 00:02:43.630\nwhat's step one?\n\n55\n00:02:43.630 --> 00:02:46.200\nI put in a CD or I put in a USB key and\nI reboot the server.\n\n56\n00:02:46.200 --> 00:02:47.770\nRight?\nAnd I take a physical image of\n\n57\n00:02:47.770 --> 00:02:48.810\nthat server.\n\n58\n00:02:48.810 --> 00:02:51.020\nWell, can I do that with Azure VM?\n\n59\n00:02:51.020 --> 00:02:54.140\nIs Microsoft gonna let me walk up and\npop in a CD or maybe I can call them on\n\n60\n00:02:54.140 --> 00:02:56.045\nthe phone, like can you stick\nthis USB key in there for me?\n\n61\n00:02:56.045 --> 00:02:57.070\n>> [LAUGH]\n>> So, we don't really\n\n62\n00:02:57.070 --> 00:02:59.920\nhave a great way to boot up and\nsee the buy-off screen or\n\n63\n00:02:59.920 --> 00:03:02.600\nto see the system without\nthe operating system running.\n\n64\n00:03:02.600 --> 00:03:05.030\nI say we don't have a great way, we don't\nhave any way to do that, all right,\n\n65\n00:03:05.030 --> 00:03:06.510\nthat's not exposed to us.\n\n66\n00:03:06.510 --> 00:03:09.860\nSo, the only backup solution\nthat would work like that for\n\n67\n00:03:09.860 --> 00:03:11.640\na third party system would have\nto be one that was online.\n\n68\n00:03:11.640 --> 00:03:14.250\nAnd you've got ones like\nAcronis True Image and\n\n69\n00:03:14.250 --> 00:03:17.540\nParagon Drive Backup that you can\ninstall right inside of Windows, and\n\n70\n00:03:17.540 --> 00:03:20.420\nit can back up the machine\nwhile it's online.\n\n71\n00:03:20.420 --> 00:03:26.420\nAnd those, they work, but the problem\nbecomes the restore, because you can\n\n72\n00:03:26.420 --> 00:03:29.290\nback them up while their online, but you\ncan't restore them while they're online,\n\n73\n00:03:29.290 --> 00:03:33.050\nso I would still have to boot off of\na disk, which I can't do in Azure.\n\n74\n00:03:33.050 --> 00:03:35.860\nSo, Azure, those products,\nthey just don't work.\n\n75\n00:03:35.860 --> 00:03:39.500\nIt's not that they aren't good, or\nwhatever, because they're great products.\n\n76\n00:03:39.500 --> 00:03:41.120\nWe can't use them in the cloud.\n\n77\n00:03:41.120 --> 00:03:45.090\nSo, Microsoft built a system in where\nthey'll take care of it for you.\n\n78\n00:03:45.090 --> 00:03:49.410\nAnd they just use their image.ex, they use\nthe utilities that we've used as part of\n\n79\n00:03:49.410 --> 00:03:52.050\nthe Windows deployment toolkit for\nyears and years and years.\n\n80\n00:03:52.050 --> 00:03:55.700\nAnd they can take a virtual machine and\nthey can make a copy of it and\n\n81\n00:03:55.700 --> 00:03:59.880\nstore it as an image, and then if I\never want to restore that machine,\n\n82\n00:03:59.880 --> 00:04:01.630\nI can just read deploy the image.\n\n83\n00:04:01.630 --> 00:04:04.860\nOr if I want to clone it and the examples\nI gave at the beginning of the show were,\n\n84\n00:04:06.250 --> 00:04:08.200\nwell let me give you\na few practical examples.\n\n85\n00:04:08.200 --> 00:04:09.840\nMaybe I've got developers and\n\n86\n00:04:09.840 --> 00:04:13.440\nthe developers say hey I'd like to\ntest something out that server, but\n\n87\n00:04:13.440 --> 00:04:15.210\nI don't want them to test it\non the production server.\n\n88\n00:04:15.210 --> 00:04:16.450\nThey might mess something up.\n\n89\n00:04:16.450 --> 00:04:19.220\nSo, I might take an image\nof that production server.\n\n90\n00:04:19.220 --> 00:04:20.770\nAnd, deploy a clone of it.\n\n91\n00:04:20.770 --> 00:04:23.190\nAnd, I can give the clone to the dev team.\n\n92\n00:04:23.190 --> 00:04:23.960\nI can say, here, have at it.\n\n93\n00:04:23.960 --> 00:04:25.750\nIf you screw it up,\nit's no big deal, right?\n\n94\n00:04:25.750 --> 00:04:27.110\nTry whatever you want.\n\n95\n00:04:27.110 --> 00:04:28.300\nThat's one example, right?\n\n96\n00:04:28.300 --> 00:04:30.520\nCreating a dev, or a staging, environment.\n\n97\n00:04:30.520 --> 00:04:34.510\nAnother example might be, I wanna take a\nvirtual machine that's in one region, and\n\n98\n00:04:34.510 --> 00:04:36.280\ndeploy it in a different region.\n\n99\n00:04:36.280 --> 00:04:40.670\nSo, I can take an image of it, and\nthen deploy a new VM in the other region,\n\n100\n00:04:40.670 --> 00:04:42.390\nbased on that image.\n\n101\n00:04:42.390 --> 00:04:43.440\nAnd now, it's in a new region.\n\n102\n00:04:43.440 --> 00:04:45.300\nAnd I just migrated my virtual machine.\n\n103\n00:04:46.920 --> 00:04:48.290\nSo, those are two examples.\n\n104\n00:04:48.290 --> 00:04:50.560\nA few other examples, a load bouncer.\n\n105\n00:04:51.660 --> 00:04:55.830\nSo, when you have a Azure load balancer,\nyou set up a load balancing set.\n\n106\n00:04:55.830 --> 00:04:57.890\nWell, let me show you mine.\n\n107\n00:04:57.890 --> 00:05:03.150\nIf I go into my cloud services, I've got a\ncloud service in here called itprotv-web.\n\n108\n00:05:03.150 --> 00:05:07.810\nAnd if I go into it and\nI go over here to my instances.\n\n109\n00:05:07.810 --> 00:05:09.650\nI've got five instances in there.\n\n110\n00:05:09.650 --> 00:05:10.900\nRight?\nFive web servers\n\n111\n00:05:10.900 --> 00:05:15.240\nthat are inside itprotv-web and\nmy end users are being distributed across,\n\n112\n00:05:15.240 --> 00:05:18.410\nI say end users this is a test environment\nthere's actually nothing on there.\n\n113\n00:05:18.410 --> 00:05:21.430\nBut I have five web servers\nthat are all window servers.\n\n114\n00:05:21.430 --> 00:05:27.700\nThat have the IIS role installed, that\nhave a copy of a website thrown onto them.\n\n115\n00:05:27.700 --> 00:05:30.480\nAnd so, they're all up and ready and\nserving that functionality.\n\n116\n00:05:30.480 --> 00:05:32.740\nRight and they have a couple of\nthe utilities that I've put on there and\n\n117\n00:05:32.740 --> 00:05:34.290\nthey're configured the way that I want.\n\n118\n00:05:34.290 --> 00:05:37.020\nWell, let say that it\nstarts getting busy and\n\n119\n00:05:37.020 --> 00:05:39.130\nfive servers isn't gonna\nbe enough anymore.\n\n120\n00:05:39.130 --> 00:05:42.360\nAnd I need to go to six servers,\nor eight servers, or ten servers.\n\n121\n00:05:42.360 --> 00:05:46.510\nI need to add more servers that\nare configured exactly like these guys.\n\n122\n00:05:46.510 --> 00:05:48.140\nAnd I don't wanna do that by hand.\n\n123\n00:05:48.140 --> 00:05:52.320\nSo, I can take an image of any one of\nthese and then deploy it as itprotv-web06,\n\n124\n00:05:52.320 --> 00:05:56.160\nor web 07, web08 and\nyou deploy each of them afterwards.\n\n125\n00:05:56.160 --> 00:05:58.330\nAnd now, I've got ten servers.\n\n126\n00:05:58.330 --> 00:06:02.350\nSo, I can quickly clone servers for\nload balancers, for availability sets.\n\n127\n00:06:02.350 --> 00:06:07.130\nMaybe I have a single server deployed,\njust itprotv web 101.\n\n128\n00:06:07.130 --> 00:06:12.320\nIt's in an availability set that puts it\non one fault domain and one update domain.\n\n129\n00:06:12.320 --> 00:06:14.900\nIf Microsoft does a physical failure\nthat's server might go offline, and\n\n130\n00:06:14.900 --> 00:06:16.380\nMicrosoft restores it.\n\n131\n00:06:16.380 --> 00:06:19.070\nI might wanna deploy a second copy of it,\nand\n\n132\n00:06:19.070 --> 00:06:22.250\ndo load balancing not for\nperformance, but for reliability.\n\n133\n00:06:22.250 --> 00:06:25.380\nSo, if one fails the other one will be up,\nso I can quickly clone it.\n\n134\n00:06:25.380 --> 00:06:27.650\nSo, images provide all of that, right?\n\n135\n00:06:27.650 --> 00:06:30.010\nThey can back up quite a bit of stuff, and\n\n136\n00:06:30.010 --> 00:06:31.860\nmake it where you can\nquickly duplicate servers.\n\n137\n00:06:33.070 --> 00:06:35.760\nBut, there is a little bit\nwe need to be aware of.\n\n138\n00:06:35.760 --> 00:06:40.830\nWhen you take a backup of one of these\nmachines, when you take an image of it,\n\n139\n00:06:40.830 --> 00:06:43.440\nit actually deletes the original machine.\n\n140\n00:06:43.440 --> 00:06:47.830\nSo, if I take an image of itprotv\nweb01 when it's done making an image,\n\n141\n00:06:47.830 --> 00:06:48.980\nit deletes itprotv web01.\n\n142\n00:06:48.980 --> 00:06:51.900\nNow, I can just turn around and\nredeploy it again, and\n\n143\n00:06:51.900 --> 00:06:54.130\nnow I've got itprotv web01 and\nI've got my image.\n\n144\n00:06:54.130 --> 00:06:56.040\nSo, that's not a big deal.\n\n145\n00:06:56.040 --> 00:06:58.700\nBut for a brief period of\ntime that server is now gone.\n\n146\n00:06:58.700 --> 00:06:59.480\nSo, I need to plan for\n\n147\n00:06:59.480 --> 00:07:02.810\nthat when we take an image it is going\nto destroy the original machine.\n\n148\n00:07:02.810 --> 00:07:05.030\nAll right, so definitely plan for that.\n\n149\n00:07:05.030 --> 00:07:08.820\nThe other thing is, once I've got\nthe image then I can just go and\n\n150\n00:07:08.820 --> 00:07:10.830\nstart deploying and\nwe can go crazy with it.\n\n151\n00:07:10.830 --> 00:07:12.250\nBut we are gonna lose\nthat machine briefly.\n\n152\n00:07:12.250 --> 00:07:15.520\nSo, definitely,\ndefinitely be aware of that.\n\n153\n00:07:15.520 --> 00:07:17.260\nSo, those are some examples\nof how we can use it.\n\n154\n00:07:17.260 --> 00:07:19.410\nThe other thing is when\nI go to redeploy it.\n\n155\n00:07:19.410 --> 00:07:21.660\nThere's some information that\ndoesn't come along with it.\n\n156\n00:07:21.660 --> 00:07:24.610\nMicrosoft assumes that if you're\nrestoring this, it's a clone.\n\n157\n00:07:24.610 --> 00:07:29.070\nAnd you don't wanna have two servers with\nthe same name or the same IP address.\n\n158\n00:07:29.070 --> 00:07:31.540\nThere's settings that you don't\nwant to be the same between them.\n\n159\n00:07:31.540 --> 00:07:34.180\nAnd so those settings,\nthey don't carry over, right.\n\n160\n00:07:34.180 --> 00:07:36.150\nSo, when you read a play,\nyou'll have to give it a name.\n\n161\n00:07:36.150 --> 00:07:38.000\nYou'll have to tell it\nthe virtual machine network.\n\n162\n00:07:38.000 --> 00:07:39.910\nYou'll have to tell it\neach of those resources.\n\n163\n00:07:39.910 --> 00:07:43.060\nAnd if you're using dynamic IPs,\nWhen you restore that machine,\n\n164\n00:07:43.060 --> 00:07:45.830\nwhen you redeploy it,\nits IP address may change.\n\n165\n00:07:45.830 --> 00:07:48.920\nNow, if you've mapped everything\nto a DNS name instead of an IP,\n\n166\n00:07:48.920 --> 00:07:52.720\nthen it won't matter, you won't even\nnotice it just deploys and that's that.\n\n167\n00:07:52.720 --> 00:07:56.055\nBut if you've got something tied\nto a IP that can be problematic.\n\n168\n00:07:56.055 --> 00:07:58.379\nSo, when you restore, you won't\nwant to use the GUI like I'm doing.\n\n169\n00:07:58.379 --> 00:08:02.022\nYou'll want to use the Power Shell, so you\ncan be very specific as to all the various\n\n170\n00:08:02.022 --> 00:08:03.962\nsettings, and kind of throw that in there.\n\n171\n00:08:03.962 --> 00:08:06.795\nSo, just be aware of some\nof those little caveats\n\n172\n00:08:06.795 --> 00:08:08.594\n>> For me, like my load balance set,\n\n173\n00:08:08.594 --> 00:08:10.339\nthey all have a shared end point.\n\n174\n00:08:10.339 --> 00:08:12.944\nThey're all sharing port\n80 from the website and\n\n175\n00:08:12.944 --> 00:08:16.892\nwhen I go to redeploy the image,\nit's not gonna have that port 80 anymore.\n\n176\n00:08:16.892 --> 00:08:20.265\nSo I'm gonna have to go in and tell it\nto have that and then it'll deploy, but\n\n177\n00:08:20.265 --> 00:08:23.613\nthe operating system, its configuration,\nall that stuff will be there.\n\n178\n00:08:23.613 --> 00:08:28.418\nSo let me show you how all this works and\nwe'll get a chance to see this in action.\n\n179\n00:08:28.418 --> 00:08:32.093\nSo let's say that my developers\ncall me up and they say, hey,\n\n180\n00:08:32.093 --> 00:08:34.932\nDon, we wanna test out\nsome new page settings.\n\n181\n00:08:34.932 --> 00:08:37.579\nAnd so,\ncan we mess with one of your servers?\n\n182\n00:08:37.579 --> 00:08:40.272\nAnd I say, well, no, I don't want\nyou messing with one of my servers.\n\n183\n00:08:40.272 --> 00:08:43.673\nHow about I clone one for\nyou and you can mess with that.\n\n184\n00:08:43.673 --> 00:08:46.776\nSo maybe I decide that I'm gonna take\nitprotv-web01 and I'm gonna clone it.\n\n185\n00:08:46.776 --> 00:08:49.574\nNow remember what I said,\nit's gonna destroy that VM.\n\n186\n00:08:49.574 --> 00:08:52.412\nWell, I'm okay with that,\ncuz I got four more up and running and\n\n187\n00:08:52.412 --> 00:08:54.530\nI'm just gonna restore\nit right back in again.\n\n188\n00:08:54.530 --> 00:08:55.832\nSo, it'll be back.\n\n189\n00:08:55.832 --> 00:08:59.252\nBut if I didn't have a backup of that,\nI'd need to say, well,\n\n190\n00:08:59.252 --> 00:09:00.812\nyou're gonna need to wait.\n\n191\n00:09:00.812 --> 00:09:03.272\nAnd tonight at 2 AM, I'll take that image.\n\n192\n00:09:03.272 --> 00:09:06.939\nAnd that way you can schedule it for\nsome downtime, but I'm gonna take\n\n193\n00:09:06.939 --> 00:09:10.808\nitprotv-web01 and the first thing I\nneed to do is I need to shut it down.\n\n194\n00:09:10.808 --> 00:09:13.373\nYou can't take an image of it\nwhile it is up and running.\n\n195\n00:09:13.373 --> 00:09:18.690\nBefore I shut it down, I actually\nneed to do a little bit extra to it.\n\n196\n00:09:18.690 --> 00:09:22.274\nI need to what is called generalizing the\nmachine and Daniel, I know you're familiar\n\n197\n00:09:22.274 --> 00:09:25.330\nwith this with all this third-party\nproducts that I mentioned before.\n\n198\n00:09:25.330 --> 00:09:26.753\nWhen you clone a machine,\n\n199\n00:09:26.753 --> 00:09:29.673\nthere is settings inside\nof windows that are unique.\n\n200\n00:09:29.673 --> 00:09:33.127\nEvery windows server and\nworkstation has a security identifier,\n\n201\n00:09:33.127 --> 00:09:36.347\na SID and you never want to have\ntwo machines with the same SID.\n\n202\n00:09:36.347 --> 00:09:41.199\nSo before I shut this down, I need to\nstrip out that unique information from\n\n203\n00:09:41.199 --> 00:09:43.673\ninside the machine before I image it.\n\n204\n00:09:43.673 --> 00:09:47.815\nIf I just jump in here and\nI go into itprotv-web01,\n\n205\n00:09:47.815 --> 00:09:52.799\nI'll see right down here that\nI've got a Capture button for it.\n\n206\n00:09:52.799 --> 00:09:55.085\nAnd capture, that means create an image.\n\n207\n00:09:55.085 --> 00:09:58.880\nI'm gonna capture an image of this\nmachine and so it's gonna ask me for\n\n208\n00:09:58.880 --> 00:10:02.237\nan Image Name and a Description Label and\nthen I can hit check.\n\n209\n00:10:02.237 --> 00:10:05.093\nNow notice that it's warning me,\nthe virtual machine is not stopped.\n\n210\n00:10:05.093 --> 00:10:08.470\nI need to stop the virtual machine first,\nit can't capture it.\n\n211\n00:10:08.470 --> 00:10:11.461\nAnd then once I stop it,\nif I come back in here and run it,\n\n212\n00:10:11.461 --> 00:10:15.692\nit's actually gonna be a little warning\nhere saying, did you generalize it?\n\n213\n00:10:15.692 --> 00:10:17.802\nWhich I haven't done either, but\nI'm not getting that warning,\n\n214\n00:10:17.802 --> 00:10:19.093\ncuz I've got this other warning still.\n\n215\n00:10:19.093 --> 00:10:23.853\nI need to back out of this and I need\nto take care of those two things first.\n\n216\n00:10:23.853 --> 00:10:28.113\nI need to get connected itprotv-web01,\nso I can generalize it.\n\n217\n00:10:28.113 --> 00:10:30.597\nNow, let's see.\n\n218\n00:10:30.597 --> 00:10:33.533\nSo if I wanna get connected into that,\nI'm gonna go ahead and\n\n219\n00:10:33.533 --> 00:10:37.007\njust remote desktop right into this\nmachine and it's part of a web app.\n\n220\n00:10:37.007 --> 00:10:41.259\nAnd so what I need to do is I need\nto get its public IP address,\n\n221\n00:10:41.259 --> 00:10:44.152\nwhich I'm gonna pull from right here and\n\n222\n00:10:44.152 --> 00:10:49.963\nI also need to get the port number that\nit's running remote desktop protocol on.\n\n223\n00:10:49.963 --> 00:10:51.656\nI will copy that.\n\n224\n00:10:51.656 --> 00:10:52.840\n>> That's a task beyond your skill level.\n\n225\n00:10:52.840 --> 00:10:53.952\n[LAUGH]\n>> I know, hitting copy and paste,\n\n226\n00:10:53.952 --> 00:10:55.138\nthat's gonna be the one\nthat kills me today.\n\n227\n00:10:55.138 --> 00:10:57.360\nSo, I need to look at\nmy endpoints here and\n\n228\n00:10:57.360 --> 00:11:00.293\nsee that it's got remote\ndesktop on port 57799.\n\n229\n00:11:00.293 --> 00:11:04.704\nSo I'm gonna fire up my\nremote desktop client and\n\n230\n00:11:04.704 --> 00:11:09.660\nI'm gonna remote into that one and\ncolon 57799.\n\n231\n00:11:10.870 --> 00:11:13.733\nSo, I'm remoting into that\nparticular machine and\n\n232\n00:11:13.733 --> 00:11:16.020\nI'm just gonna login to my account here.\n\n233\n00:11:16.020 --> 00:11:21.208\nOnce I'm logged in, what I'm going to\nneed to run is a utility called Sysprep.\n\n234\n00:11:21.208 --> 00:11:23.205\nSysprep's been around forever.\n\n235\n00:11:23.205 --> 00:11:27.629\nI used Sysprep under Windows NT 4.0, so\nit's been around since 1997 at least.\n\n236\n00:11:27.629 --> 00:11:32.133\nIt's been around a long time and what\nthe Sysprep utility does is it lets you\n\n237\n00:11:32.133 --> 00:11:35.941\ntake the unique information from\nthe machine and strip it out.\n\n238\n00:11:35.941 --> 00:11:39.810\nNow the problem is once you strip that\ndata out, it kinda destroys the machine,\n\n239\n00:11:39.810 --> 00:11:40.515\ndoesn't it?\n\n240\n00:11:40.515 --> 00:11:43.719\nAnd that's why I said to\nget it to leave our VM.\n\n241\n00:11:43.719 --> 00:11:46.596\nIt just gets recreated the next\ntime it boots up though, so\n\n242\n00:11:46.596 --> 00:11:50.255\nit's not that big of a deal, but I need\nto get in here and I need to run that.\n\n243\n00:11:50.255 --> 00:11:51.555\nSo, I'm gonna run it.\n\n244\n00:11:51.555 --> 00:11:54.106\nLet me get a command prompt open here,\n\n245\n00:11:54.106 --> 00:11:57.232\nbecause Sysprep is not\nin the path by default.\n\n246\n00:11:57.232 --> 00:11:59.763\nSo if I search for sysprep,\nit's not gonna work.\n\n247\n00:11:59.763 --> 00:12:04.639\nSo, I'm gonna open up a command prompt and\nI'm gonna browse into Sysprep.\n\n248\n00:12:04.639 --> 00:12:07.134\nNow sysprep is included with\nWindows server by default.\n\n249\n00:12:07.134 --> 00:12:11.152\nIf you've been working with this stuff for\na long time in older versions of Windows,\n\n250\n00:12:11.152 --> 00:12:12.580\nit wasn't there by default.\n\n251\n00:12:12.580 --> 00:12:15.714\nSo, I need to Just browse and run it.\n\n252\n00:12:15.714 --> 00:12:20.530\nSo it's in C:\\Windows\\System32\\Sysprep\nunless you've moved windows\n\n253\n00:12:20.530 --> 00:12:25.194\nsomewhere else, which I doubt would\never happen, but I'm gonna go ahead and\n\n254\n00:12:25.194 --> 00:12:28.711\nrun Sysprep and then it runs\nthis really simple utility and\n\n255\n00:12:28.711 --> 00:12:31.764\nwe got a couple of choices\nabout what we want to do.\n\n256\n00:12:31.764 --> 00:12:36.320\nWhat I want to do is I want to enter the\nOut-of-Box Experience, which means what\n\n257\n00:12:36.320 --> 00:12:40.610\nyou'd normally see the first time you\nfired up a brand new Windows machine.\n\n258\n00:12:40.610 --> 00:12:43.806\nYou get that little wizard where it\nkind of asks you a few questions,\n\n259\n00:12:43.806 --> 00:12:46.624\nthat's what I wanna do and\nI wanna generalize the machine.\n\n260\n00:12:46.624 --> 00:12:49.364\nTake any unique data on this machine and\nstrip it out.\n\n261\n00:12:49.364 --> 00:12:54.128\nName, IP address, MAC address, it leaves\nsome of that stuff as it gets cleared,\n\n262\n00:12:54.128 --> 00:12:57.247\nanyway, but\nthe security identifier is the big one.\n\n263\n00:12:57.247 --> 00:13:00.245\nIt's gonna strip that out, cuz it's\nspread all throughout your registry,\n\n264\n00:13:00.245 --> 00:13:02.795\nit's gonna clear all that out and\nthen this is really important.\n\n265\n00:13:02.795 --> 00:13:05.652\nWhen it's done generalizing,\nI need it to be able to Shutdown.\n\n266\n00:13:05.652 --> 00:13:10.386\nIf I tell it to reboot, it's going to\ngeneralize, then it's going to reboot and\n\n267\n00:13:10.386 --> 00:13:12.698\nrecreate all its unique information.\n\n268\n00:13:12.698 --> 00:13:15.997\nSo I've basically wasted my time, but I'm\ngonna go ahead and tell it to Shutdown and\n\n269\n00:13:15.997 --> 00:13:17.354\nit's gonna start to generalize.\n\n270\n00:13:17.354 --> 00:13:20.225\nNow it takes a minute,\nbecause it's going through right now and\n\n271\n00:13:20.225 --> 00:13:21.300\npurging the registry.\n\n272\n00:13:21.300 --> 00:13:25.144\nIt's looking for those registry\nentries that are tied to my city and\n\n273\n00:13:25.144 --> 00:13:26.431\nstripping those out.\n\n274\n00:13:26.431 --> 00:13:29.670\nLooking for those unique values and\ngetting rid of those and\n\n275\n00:13:29.670 --> 00:13:33.317\nthen as soon as it's done,\nit'll shut the virtual machine down.\n\n276\n00:13:33.317 --> 00:13:37.577\nAnd once it's shutdown, I'll be able\nto go back to the web portal and\n\n277\n00:13:37.577 --> 00:13:39.864\nI'll be able to capture that image.\n\n278\n00:13:39.864 --> 00:13:42.788\nNow, it'll be shut down and\nit'll be generalized.\n\n279\n00:13:42.788 --> 00:13:44.390\nSo this is kind of step one.\n\n280\n00:13:44.390 --> 00:13:48.804\nNow when it's running, technically\nthe server's still up and doing its job.\n\n281\n00:13:48.804 --> 00:13:52.781\nBut as soon as it's done and it shuts\nit down the server no longer functions,\n\n282\n00:13:52.781 --> 00:13:54.283\nso we just began our outage.\n\n283\n00:13:54.283 --> 00:13:57.023\nSo, our end users are now unable\nto connect to the server.\n\n284\n00:13:57.023 --> 00:14:00.179\nIn my case,\nit was part of a load balance set.\n\n285\n00:14:00.179 --> 00:14:01.549\nSo my end users won't even notice.\n\n286\n00:14:01.549 --> 00:14:03.183\nIt just stops sending\npeople to the server and\n\n287\n00:14:03.183 --> 00:14:05.600\nstarts sending them to the other\nservers and that's it.\n\n288\n00:14:05.600 --> 00:14:07.894\nBut if this is a standalone server,\n\n289\n00:14:07.894 --> 00:14:11.262\nyour outage starts as soon\nas this shutdown starts.\n\n290\n00:14:11.262 --> 00:14:15.047\nAnd so once it's down, we need to get\nthings back up as soon as we can.\n\n291\n00:14:15.047 --> 00:14:17.967\nSo as it's down,\nI'm gonna capture the image and\n\n292\n00:14:17.967 --> 00:14:21.595\nthe first thing I'm gonna do\nis redeploy itprotv-web01.\n\n293\n00:14:21.595 --> 00:14:25.270\nI need to redeploy it from the image,\nso that it's backup and running and\n\n294\n00:14:25.270 --> 00:14:26.667\nI'm not missing a system.\n\n295\n00:14:26.667 --> 00:14:28.675\nIn my load balance setup,\nI probably don't care.\n\n296\n00:14:28.675 --> 00:14:31.080\nIn real life, LAN though,\nI probably would.\n\n297\n00:14:31.080 --> 00:14:33.840\nBut once that's done,\nI'll be left with my own image.\n\n298\n00:14:33.840 --> 00:14:37.257\nAnd when I have my own image,\nI can then just go out and\n\n299\n00:14:37.257 --> 00:14:39.454\ndeploy it as many times as I need.\n\n300\n00:14:39.454 --> 00:14:42.537\nSo if I have a developer who\nwant a copy of that web server,\n\n301\n00:14:42.537 --> 00:14:44.284\nI can quickly just spin one out.\n\n302\n00:14:44.284 --> 00:14:48.055\nThe only negative is the images\ndon't really stay up-to-date.\n\n303\n00:14:48.055 --> 00:14:51.680\nSo if I make some changes to the website\nafter this, my image is now out of date\n\n304\n00:14:51.680 --> 00:14:54.302\nand most people don't like\nto maintain these images.\n\n305\n00:14:54.302 --> 00:15:00.025\nSo we're gonna do another episode,\nit'll be called Azure Custom Scripts.\n\n306\n00:15:00.025 --> 00:15:03.174\nAnd with Azure Custom Scripts,\nyou can actually eliminate the need for\n\n307\n00:15:03.174 --> 00:15:04.077\nimages like these.\n\n308\n00:15:04.077 --> 00:15:05.850\nSo if you've got data\nthat changes frequently,\n\n309\n00:15:05.850 --> 00:15:07.200\nyou don't want to deal with images.\n\n310\n00:15:07.200 --> 00:15:10.695\nWe'll show you in that episode how to\nwork around that, so it's not a problem.\n\n311\n00:15:10.695 --> 00:15:14.341\nBut if you're just wanting to clone\nmachines as kind of a backup,\n\n312\n00:15:14.341 --> 00:15:18.916\nthey don't change very often or maybe\nthey're built to handle change like that,\n\n313\n00:15:18.916 --> 00:15:21.259\nthen the VM images here work really well.\n\n314\n00:15:21.259 --> 00:15:25.754\nAt a minimum, if I know I'm gonna deploy a\nlot of web servers, I create an image that\n\n315\n00:15:25.754 --> 00:15:30.140\nis Windows Server on it that just has\nthe web service's roll already installed.\n\n316\n00:15:30.140 --> 00:15:33.453\nIt takes a little while to install\nthe web service's roll and so\n\n317\n00:15:33.453 --> 00:15:36.953\njust to save me that time,\nevery time I deploy a Window's Server,\n\n318\n00:15:36.953 --> 00:15:39.410\nthis one already has\nthe web server roll on it.\n\n319\n00:15:39.410 --> 00:15:42.322\nI can do that, I can build\nan image that's already got it.\n\n320\n00:15:42.322 --> 00:15:44.330\nSo there goes it.\n\n321\n00:15:44.330 --> 00:15:46.885\nIt just kicked me out of remote desktop,\nso it's shutting down.\n\n322\n00:15:46.885 --> 00:15:49.544\nAnd if I go back to my virtual machines,\nit still shows as running here.\n\n323\n00:15:49.544 --> 00:15:50.696\nSo, I need to wait for\n\n324\n00:15:50.696 --> 00:15:54.988\nthat to actually switch to shutdown before\nI'll be able to capture that image.\n\n325\n00:15:54.988 --> 00:15:57.630\nNow while we're waiting on that,\nlet me show you how the images work.\n\n326\n00:15:57.630 --> 00:16:01.491\nOnce I have an image I\ncan go to New > Compute >\n\n327\n00:16:01.491 --> 00:16:05.160\nVirtual Machine From gallery, alright?\n\n328\n00:16:05.160 --> 00:16:07.504\nNot Quick Create, but from gallery.\n\n329\n00:16:07.504 --> 00:16:10.406\nAnd normally when you go into the gallery,\nit asks you to choose an image and\n\n330\n00:16:10.406 --> 00:16:13.030\nyou just browse and\npick from the images right here.\n\n331\n00:16:13.030 --> 00:16:17.810\nBut way down at the bottom left,\nthere's this my images.\n\n332\n00:16:17.810 --> 00:16:20.110\nAnd when you choose my images,\n\n333\n00:16:20.110 --> 00:16:24.310\nwhat you'll see is a list of\nimages that you've created.\n\n334\n00:16:24.310 --> 00:16:25.500\nSo, here's my test web server.\n\n335\n00:16:25.500 --> 00:16:28.640\nThis is actually what I used to create\nthat load balance set, earlier.\n\n336\n00:16:28.640 --> 00:16:32.470\nSo, this one actually has the test\nweb page, and all of that in here.\n\n337\n00:16:32.470 --> 00:16:33.504\nBut, here's that image.\n\n338\n00:16:33.504 --> 00:16:37.400\nAnd, I can choose that image,\nand I can deploy it.\n\n339\n00:16:37.400 --> 00:16:39.030\nAnd, when I go to deploy it,\n\n340\n00:16:39.030 --> 00:16:41.360\nremember how I said the backup\ndoesn't contain everything?\n\n341\n00:16:41.360 --> 00:16:43.140\nIt's gonna ask me for\nthe things that are missing.\n\n342\n00:16:43.140 --> 00:16:44.200\nAnd, if I'm using PowerShell,\n\n343\n00:16:44.200 --> 00:16:46.570\nI can provide all this in\nthe command line really easy.\n\n344\n00:16:46.570 --> 00:16:49.609\nBut here the GUI you just have to type it,\nright?\n\n345\n00:16:49.609 --> 00:16:53.365\nSo maybe this is going to be\na VM called itprotv-testweb, and\n\n346\n00:16:53.365 --> 00:16:55.170\nI can specify the size.\n\n347\n00:16:55.170 --> 00:16:56.490\nIt can be A1 or I'll go with D1.\n\n348\n00:16:57.820 --> 00:17:02.000\nActually this data center might make me do\na version two so I'll do a version two.\n\n349\n00:17:02.000 --> 00:17:04.180\nI need to give it an administrator\nuser name and password.\n\n350\n00:17:04.180 --> 00:17:07.490\nMicrosoft assumes that you don't want to\nreuse the same name and password on every\n\n351\n00:17:07.490 --> 00:17:11.250\nserver, which is a good practice\nIt's a good practice not to do that.\n\n352\n00:17:11.250 --> 00:17:11.860\n>> Yeah.\n\n353\n00:17:11.860 --> 00:17:14.110\n[LAUGH]\n>> I just want to clarify.\n\n354\n00:17:14.110 --> 00:17:15.230\nSo let me do that.\n\n355\n00:17:15.230 --> 00:17:17.280\nAnd then, I have to specify other things.\n\n356\n00:17:17.280 --> 00:17:20.330\nIs this a part of a cloud service and\nso on.\n\n357\n00:17:20.330 --> 00:17:22.560\nIf this is something I'm deploying for\nmy developers to mess around with,\n\n358\n00:17:22.560 --> 00:17:25.630\nI probably want to create\na new cloud service for it.\n\n359\n00:17:25.630 --> 00:17:27.540\nFor them to mess around with.\n\n360\n00:17:27.540 --> 00:17:30.970\nSo it's gonna create one called\nitprotv testweb, that's fine with me.\n\n361\n00:17:30.970 --> 00:17:34.500\nSame thing with storage groups,\nregions, affinities, and all that,\n\n362\n00:17:34.500 --> 00:17:38.050\nyou can start to specify and start to\nchange it however you need, right.\n\n363\n00:17:38.050 --> 00:17:39.530\nSo however it is that you need it.\n\n364\n00:17:39.530 --> 00:17:42.482\nAnd on this one, it's a web server,\nso I'll give it all port 80.\n\n365\n00:17:44.130 --> 00:17:46.740\nIf this were a load balance set, I would\nhave to define that after the fact.\n\n366\n00:17:46.740 --> 00:17:49.030\nBut this one is not,\nso I'll just add that.\n\n367\n00:17:50.110 --> 00:17:50.940\nAnd then, let's see.\n\n368\n00:17:50.940 --> 00:17:52.460\nThat should be about it.\n\n369\n00:17:53.660 --> 00:17:56.850\nIf I advance to the next screen,\nit's gonna ask me one\n\n370\n00:17:56.850 --> 00:18:01.890\nmore thing, and\nthen we'll be able to deploy this one.\n\n371\n00:18:01.890 --> 00:18:07.090\nSo when it deploys, what we're gonna end\nup with is a duplicate of that service.\n\n372\n00:18:07.090 --> 00:18:08.990\nSo deploying from an image is really easy.\n\n373\n00:18:08.990 --> 00:18:10.560\nAnd I could create one or ten or\n\n374\n00:18:10.560 --> 00:18:15.350\na hundred virtual machines based off\nof this image, as soon as it's done.\n\n375\n00:18:15.350 --> 00:18:16.940\nThere we go.\nFor some reason taking\n\n376\n00:18:16.940 --> 00:18:18.680\nreally long there to advance.\n\n377\n00:18:18.680 --> 00:18:20.650\nSo I'll finish that, and\nthat's gonna deploy.\n\n378\n00:18:20.650 --> 00:18:23.120\nSo now I'm creating a machine\nbased on that image.\n\n379\n00:18:23.120 --> 00:18:27.050\nThere's ITProTV test web, and\nsee how it says starting provisioning?\n\n380\n00:18:27.050 --> 00:18:31.340\nAnd normally if I deploy something like\njust a regular old Windows server, right?\n\n381\n00:18:31.340 --> 00:18:34.040\nSo if I had gone to new, compute,\n\n382\n00:18:34.040 --> 00:18:38.530\nvirtual machine, quick create, and\ncreated a Windows server 2012 machine,\n\n383\n00:18:38.530 --> 00:18:42.330\nit'd be Windows Server 2012, but\nit wouldn't have the IOS roll installed.\n\n384\n00:18:42.330 --> 00:18:45.350\nIt wouldn't have the other features, so\nI'd have to go through that process.\n\n385\n00:18:45.350 --> 00:18:48.690\nBut because I made an image that\nalready has that, I can deploy it,\n\n386\n00:18:48.690 --> 00:18:49.480\nit's already configured.\n\n387\n00:18:49.480 --> 00:18:52.490\nI might still need to log in to\ncustomize things the way I need it, but\n\n388\n00:18:52.490 --> 00:18:54.380\nat least some of that\nlegwork is already done.\n\n389\n00:18:54.380 --> 00:18:58.130\nMaybe you have third party software\nthat you wanna pre-install on\n\n390\n00:18:58.130 --> 00:18:59.270\nall of your machines.\n\n391\n00:18:59.270 --> 00:19:02.360\nSo you bake it into the image,\nand then that's what you deploy.\n\n392\n00:19:02.360 --> 00:19:06.710\nSo, it's really, basically creating like\na template for your virtual machines.\n\n393\n00:19:07.770 --> 00:19:12.710\nHere we do all the legwork at the front,\nand then once we're done its easy,\n\n394\n00:19:12.710 --> 00:19:14.600\nit basically becomes\nlike a printing press.\n\n395\n00:19:14.600 --> 00:19:17.480\nYou just let the machine go and it starts\ncranking out VMs as you need them.\n\n396\n00:19:17.480 --> 00:19:20.580\n>> And if you're doing it from the\nPowerShell you can spawn them in batches\n\n397\n00:19:20.580 --> 00:19:21.370\nof ten, 20, 100.\n\n398\n00:19:21.370 --> 00:19:24.070\nYou can be speeding up\ntons of virtual machines.\n\n399\n00:19:24.070 --> 00:19:27.950\nRemember you do have an artificial quota\nthat Microsoft puts on each region,\n\n400\n00:19:27.950 --> 00:19:31.630\n20 VMs per region, if you need more than\nthat you'll have to contact Microsoft.\n\n401\n00:19:31.630 --> 00:19:36.120\nBut with these images you can deploy tons,\nand really do it pretty quickly.\n\n402\n00:19:36.120 --> 00:19:41.090\nNow ITPro TV Web01 finished shutting down,\nso it's now generalized,\n\n403\n00:19:41.090 --> 00:19:42.600\nthanks to Sysprep.\n\n404\n00:19:42.600 --> 00:19:47.620\nAnd it shut down, so\nthis time if I choose it, and\n\n405\n00:19:47.620 --> 00:19:50.740\nI go into it's dashboard and\nI go to capture.\n\n406\n00:19:50.740 --> 00:19:53.260\nSo I am going to hit that capture\nbutton down at the bottom.\n\n407\n00:19:53.260 --> 00:19:56.420\nI'm doing this in the classic portal,\nin the new portal it's the same way.\n\n408\n00:19:56.420 --> 00:20:00.480\nYou go into the VM, you'll see that\ncapture button right there on the VM.\n\n409\n00:20:01.590 --> 00:20:03.280\nAnd we can give it an image name.\n\n410\n00:20:03.280 --> 00:20:04.900\nSo this one was itprotv-web01.\n\n411\n00:20:04.900 --> 00:20:10.430\nAnd I might wanna call\nthis itprotv-web-lb-node,\n\n412\n00:20:10.430 --> 00:20:13.630\nthis is one of my load bound set nodes.\n\n413\n00:20:13.630 --> 00:20:18.590\nAnd that way I know I can use this for\ncreating any node, not just web01 or\n\n414\n00:20:18.590 --> 00:20:21.400\nsomething, and so I'll give it\na description here so I can remember that.\n\n415\n00:20:22.470 --> 00:20:27.206\nSo this is my standard template for\nload balanced\n\n416\n00:20:27.206 --> 00:20:32.760\nweb front ends, just so\nI can remember what it was.\n\n417\n00:20:32.760 --> 00:20:36.420\nAnd then, I have run Sysprep\non the virtual machine, right?\n\n418\n00:20:36.420 --> 00:20:41.680\nIf I didn't and I take an image of it,\nit's still got all the SIDs,\n\n419\n00:20:41.680 --> 00:20:45.530\nand I'll only be able to use\nit to recreate ITProTV Web 01.\n\n420\n00:20:45.530 --> 00:20:47.340\nYou'll have the same name, the same SID.\n\n421\n00:20:47.340 --> 00:20:49.180\nI'll only be able to use it for that.\n\n422\n00:20:49.180 --> 00:20:52.680\nBut if I check that and say yes,\nI've Sysprep'd it, which I did, now I can\n\n423\n00:20:52.680 --> 00:20:56.510\ndeploy and I can make as many VMs as I\nwant, all based on this original template.\n\n424\n00:20:56.510 --> 00:20:57.770\nAnd it's warning me,\n\n425\n00:20:57.770 --> 00:21:01.850\nthe virtual machine will be deleted\nafter the image is captured.\n\n426\n00:21:01.850 --> 00:21:04.680\nIt is going to destroy my virtual machine.\n\n427\n00:21:04.680 --> 00:21:06.120\nAnd so I'll hit check on that.\n\n428\n00:21:06.120 --> 00:21:08.020\nAnd now it's going to\nstart building that image.\n\n429\n00:21:08.020 --> 00:21:10.840\nYou can see the image that I already had,\nand\n\n430\n00:21:10.840 --> 00:21:15.700\nnow it's creating a new one called itprotv\nweb-lb-node, and it's registering.\n\n431\n00:21:15.700 --> 00:21:18.420\nNow, this process actually\ndoesn't take very long,\n\n432\n00:21:18.420 --> 00:21:19.900\nbecause it's destroying the other VM.\n\n433\n00:21:19.900 --> 00:21:22.390\nWhat it's really doing is just taking\nthe VHEs, taking those hard drives and\n\n434\n00:21:22.390 --> 00:21:22.950\ncopying them.\n\n435\n00:21:22.950 --> 00:21:26.280\nMoving them into the little vault here,\nwhere it stores your images.\n\n436\n00:21:26.280 --> 00:21:28.690\nAnd once that's done,\nit's basically ready to go.\n\n437\n00:21:28.690 --> 00:21:30.920\nSo this process will\nhappen pretty quickly.\n\n438\n00:21:30.920 --> 00:21:33.950\nAnd then once that's done,\nI can now start to deploy it.\n\n439\n00:21:33.950 --> 00:21:38.250\nAnd if I want to deploy it,\nwell I can just go and create new ones.\n\n440\n00:21:38.250 --> 00:21:41.180\nThere's a lot of other people\nthat are doing the same thing.\n\n441\n00:21:41.180 --> 00:21:42.640\nSo if you notice down here at the bottom,\n\n442\n00:21:42.640 --> 00:21:45.490\nI've got this link that\nsays browse VM Depot.\n\n443\n00:21:45.490 --> 00:21:48.450\nAnd if you browse the VM depot,\nwhat you'll find\n\n444\n00:21:48.450 --> 00:21:52.580\nare virtual machine images that\nother third parties have created.\n\n445\n00:21:52.580 --> 00:21:56.520\nOther people like you, they said boy\nit'd be nice if I have this template or\n\n446\n00:21:56.520 --> 00:21:58.710\nthey had some basic\nconfiguration on there.\n\n447\n00:21:58.710 --> 00:22:04.260\nAnd so if I want to deploy something like\nWordPress, I bet I could go in here and\n\n448\n00:22:04.260 --> 00:22:09.080\nfind a image that already had\nWordPress installed on it.\n\n449\n00:22:09.080 --> 00:22:14.710\nAnd sure I might need to login and\ndo some custom plugins or whatever.\n\n450\n00:22:14.710 --> 00:22:17.730\nBut, hey, if I need WordPress 4.2.2,\nhere it is.\n\n451\n00:22:17.730 --> 00:22:20.130\nAnd I can just click it and\ndeploy that image.\n\n452\n00:22:20.130 --> 00:22:25.830\nAnd it's not just a buntu, or Ubuntu,\nit's also got Apache, and PHP,\n\n453\n00:22:25.830 --> 00:22:29.230\nand WordPress, and all the other things\nloaded on it and it's ready to rock.\n\n454\n00:22:29.230 --> 00:22:30.760\nNow there's a little bit of trust here.\n\n455\n00:22:30.760 --> 00:22:33.450\nThis one's made by Bitnami, and\nthey're a company that you can trust.\n\n456\n00:22:33.450 --> 00:22:35.779\nBut some of them are made by Joe Smith.\n\n457\n00:22:35.779 --> 00:22:37.220\n>> [LAUGH]\n>> And\n\n458\n00:22:37.220 --> 00:22:38.670\nyou don't know who Joe Smith is right?\n\n459\n00:22:38.670 --> 00:22:41.090\nSo you've always got to\nevaluate those images.\n\n460\n00:22:41.090 --> 00:22:43.570\nIf you make your own,\nyou know you can trust them.\n\n461\n00:22:43.570 --> 00:22:46.650\nAnd so when you create your own,\nnow you can quickly deploy these.\n\n462\n00:22:46.650 --> 00:22:48.463\n>> Bob's Discount WordPress Images.\n\n463\n00:22:48.463 --> 00:22:49.376\n[LAUGH] I trust him.\n\n464\n00:22:49.376 --> 00:22:50.081\nWholeheartedly.\n\n465\n00:22:50.081 --> 00:22:51.990\n>> Some of them are a little questionable.\n\n466\n00:22:51.990 --> 00:22:52.500\nThere we go.\n\n467\n00:22:52.500 --> 00:22:53.640\nSo I can see mine is done already.\n\n468\n00:22:53.640 --> 00:22:56.900\nSee how it says itprotv-web-lb-node\nis now available?\n\n469\n00:22:56.900 --> 00:22:58.090\nAnd so it's good to go.\n\n470\n00:22:58.090 --> 00:23:02.691\nAnd so if I wanna put itprotv-web-l1\nback again, I can just go into new,\n\n471\n00:23:02.691 --> 00:23:05.480\ncompute, virtual machine, from Gallery.\n\n472\n00:23:05.480 --> 00:23:08.840\nAnd in the gallery,\nI'm gonna choose My Images.\n\n473\n00:23:10.880 --> 00:23:14.980\nAnd I'll be able to pick\nitprotv-web-lb-node, right there.\n\n474\n00:23:14.980 --> 00:23:16.930\nSo I'm gonna deploy that image.\n\n475\n00:23:18.570 --> 00:23:22.510\nAnd I'm gonna put the settings back in for\nitprotv-web01, right?\n\n476\n00:23:22.510 --> 00:23:24.910\nCuz I need to rebuild\nthe machine I destroyed.\n\n477\n00:23:24.910 --> 00:23:28.130\nAnd so I'll pick the various settings for\nwhat I need.\n\n478\n00:23:28.130 --> 00:23:30.950\nI think it was a D1, but I could be wrong.\n\n479\n00:23:30.950 --> 00:23:31.580\nWe'll see.\n\n480\n00:23:32.590 --> 00:23:34.570\nThat's an easy one to\nchange after the fact,\n\n481\n00:23:34.570 --> 00:23:37.030\nyou know if you get the wrong VM size.\n\n482\n00:23:37.030 --> 00:23:42.670\nAnd then I'm going to attach it to\nthat same cloud service, itprotv web.\n\n483\n00:23:44.830 --> 00:23:46.485\nSo that's starting to punch in,\n\n484\n00:23:46.485 --> 00:23:49.211\nand I can put it right back\ninto that availability set.\n\n485\n00:23:49.211 --> 00:23:52.810\nI can't add the end point right now,\nbecause it's part of a load balance set.\n\n486\n00:23:52.810 --> 00:23:55.421\nSo I'll have to add the end point\nafter the virtual machine provisions.\n\n487\n00:23:55.421 --> 00:23:58.776\nThe reality is I don't want it to be\nin the load balance set right anyway,\n\n488\n00:23:58.776 --> 00:24:01.970\ncuz it's gotta finish booting up,\nit's gotta start its services.\n\n489\n00:24:01.970 --> 00:24:04.870\nSo I need it to go through that\nprocess before I put it into the load\n\n490\n00:24:04.870 --> 00:24:06.480\nbalancing pool.\n\n491\n00:24:06.480 --> 00:24:07.380\nSo I'm cool with that.\n\n492\n00:24:07.380 --> 00:24:10.427\n>> Don't want to make it available\nif it's not really available.\n\n493\n00:24:10.427 --> 00:24:11.005\n[LAUGH]\n>> Yeah, you want it\n\n494\n00:24:11.005 --> 00:24:11.753\nactually doing his job.\n\n495\n00:24:11.753 --> 00:24:12.752\n>> Yeah.\n[LAUGH]\n\n496\n00:24:12.752 --> 00:24:13.638\n>> And so we'll finish up and\n\n497\n00:24:13.638 --> 00:24:14.660\nwe'll let that run.\n\n498\n00:24:14.660 --> 00:24:18.880\nSo now it's gonna recreate ITProTV\nweb 01 and as soon as it's done.\n\n499\n00:24:18.880 --> 00:24:20.630\nSo right now it's starting provisioning.\n\n500\n00:24:20.630 --> 00:24:24.120\nAs soon as it shows as Running, I just\nneed to go into the end points and add\n\n501\n00:24:24.120 --> 00:24:28.320\nport 80 back and add at that load balance\nset, and I've now got ITProTV-web 01.\n\n502\n00:24:28.320 --> 00:24:30.520\nBut then for every developer\nthat calls me and says, hey,\n\n503\n00:24:30.520 --> 00:24:32.880\ncan I get a copy of that web site?\n\n504\n00:24:32.880 --> 00:24:35.271\nYou know, get on a server or whatever, I\ncan just clone that out, and I've got it.\n\n505\n00:24:35.271 --> 00:24:38.182\nI've got that VM image\nsitting right there, and\n\n506\n00:24:38.182 --> 00:24:40.454\nI see itprotvtest-testweb is done.\n\n507\n00:24:40.454 --> 00:24:44.520\nSo it's up and running, and if this\nwas just a regular Windows server and\n\n508\n00:24:44.520 --> 00:24:47.845\nI deployed it,\nit would not be running IIS, right?\n\n509\n00:24:47.845 --> 00:24:50.295\nIf I tried to browse to it,\nI wouldn't be able to get to it.\n\n510\n00:24:50.295 --> 00:24:54.625\nIf I just had the IIS role installed,\nI'd see the IIS welcome screen, right?\n\n511\n00:24:54.625 --> 00:24:57.475\nThat blue screen with the people and\nit says, Welcome to IIS.\n\n512\n00:24:57.475 --> 00:25:00.795\nBut on this one,\nit's a copy of my own virtual machine, so\n\n513\n00:25:00.795 --> 00:25:02.465\nit's got my webpage loaded on.\n\n514\n00:25:02.465 --> 00:25:08.440\nAnd I put a little test page on there so I\ncould see what server I was connected to.\n\n515\n00:25:08.440 --> 00:25:12.580\nSo if I go down here and find its name,\nhere's its DNS name, and\n\n516\n00:25:12.580 --> 00:25:16.330\nI'm gonna browse to that location,\nall right.\n\n517\n00:25:16.330 --> 00:25:19.502\nI'm reaching out over the internet\nto get to that server, and\n\n518\n00:25:19.502 --> 00:25:22.737\nwhat I should find is that I'm\nactually able to reach out to it.\n\n519\n00:25:22.737 --> 00:25:23.295\nAnd there we go.\n\n520\n00:25:23.295 --> 00:25:25.243\nInstead of the IIS welcome page,\n\n521\n00:25:25.243 --> 00:25:29.590\nI see my little test page that shows\nI'm connected to itprotv-testweb.\n\n522\n00:25:29.590 --> 00:25:34.140\nAnd here's the local IP address and\nmy IP address as I connect to that system.\n\n523\n00:25:34.140 --> 00:25:37.060\nSo I can see the information,\nand I am up and connected.\n\n524\n00:25:37.060 --> 00:25:42.640\nSo, pretty neat way to\ndeploy pre-built instances.\n\n525\n00:25:42.640 --> 00:25:46.230\nAnd I didn't have to boot off of CDs or\nplug in USB keys,\n\n526\n00:25:46.230 --> 00:25:50.190\nI did it entirely from within Azure,\nso that is an Azure VM image.\n\n527\n00:25:50.190 --> 00:25:53.370\n>> Yeah, and what's cool is Microsoft,\nright, the whole idea of Azure and\n\n528\n00:25:53.370 --> 00:25:57.670\ncloud services as a whole is to\nmake your life a little bit easier,\n\n529\n00:25:57.670 --> 00:26:01.070\nmaybe even save you some money and\nthis is another fantastic way\n\n530\n00:26:01.070 --> 00:26:05.830\nin which they've enabled the cloud to take\nsome of the responsibilities off of us.\n\n531\n00:26:05.830 --> 00:26:08.970\nNot that the physical\nservers ever go away.\n\n532\n00:26:10.950 --> 00:26:13.020\nThey'll always be around,\nat least, in some respect.\n\n533\n00:26:13.020 --> 00:26:15.320\nBut now that we're working in more\nof a cloud-based environment,\n\n534\n00:26:15.320 --> 00:26:17.550\nthey said well, we've got a role,\nwe gotta fill it.\n\n535\n00:26:17.550 --> 00:26:20.870\nThey've done a great job\non being able to deploy,\n\n536\n00:26:20.870 --> 00:26:24.245\nshould I say,\nthese virtual machines as we need them.\n\n537\n00:26:24.245 --> 00:26:25.841\n[NOISE] And it's really, really fast.\n\n538\n00:26:25.841 --> 00:26:28.533\nIt's even faster than doing\nit the traditional way.\n\n539\n00:26:28.533 --> 00:26:33.451\n>> Yeah, and one of the best parts, in my\nopinion, is when you do it the old way,\n\n540\n00:26:33.451 --> 00:26:35.590\nyou gotta buy all that software.\n\n541\n00:26:35.590 --> 00:26:36.961\n>> Mm-hm.\n>> There's licensing fees,\n\n542\n00:26:36.961 --> 00:26:40.170\nyou've gotta keep it up to date,\nyou' gotta have that install media.\n\n543\n00:26:40.170 --> 00:26:43.390\nHere, that imaging system's completely\nfree, it's all built into Microsoft.\n\n544\n00:26:43.390 --> 00:26:45.570\nThe only thing you pay for is the storage.\n\n545\n00:26:45.570 --> 00:26:50.050\nYou do pay a per-gigabyte storage fee for\nstoring the images, which you pay for\n\n546\n00:26:50.050 --> 00:26:52.380\nany virtual machine, right,\nyou always pay for that storage.\n\n547\n00:26:52.380 --> 00:26:56.350\nSo that's the only fee you incur by having\nit, and now you can spin up your machines.\n\n548\n00:26:56.350 --> 00:26:58.740\nIt's a great resource and\nyou don't have to worry about updating it.\n\n549\n00:26:58.740 --> 00:27:00.730\nIt's just part of Azure and it's done.\n\n550\n00:27:00.730 --> 00:27:01.502\n>> All right.\nAnd, Don,\n\n551\n00:27:01.502 --> 00:27:03.245\nis there anything else we need to cover,\n\n552\n00:27:03.245 --> 00:27:05.215\nas far as deploying\nvirtual machine images?\n\n553\n00:27:05.215 --> 00:27:05.886\n>> That's about it [CROSSTALK].\n\n554\n00:27:05.886 --> 00:27:09.367\nNow, I did make that comment earlier\nabout Azure Custom Scripts, and\n\n555\n00:27:09.367 --> 00:27:11.314\nhow you can deploy a virtual machine and\n\n556\n00:27:11.314 --> 00:27:14.360\nhave it self-configure even\nwithout having an image.\n\n557\n00:27:14.360 --> 00:27:18.470\nSo if you've got time, we haven't filmed\nit yet, but we are gonna film an episode\n\n558\n00:27:18.470 --> 00:27:20.990\non Azure Custom Scripts,\nyou'll definitely wanna check that out.\n\n559\n00:27:20.990 --> 00:27:24.890\nCuz then you can just use the Microsoft\nbase images and you can deploy those and\n\n560\n00:27:24.890 --> 00:27:26.370\nhave them customize when they boot up, and\n\n561\n00:27:26.370 --> 00:27:30.060\nthe big advantage there is the Microsoft\nbase images are always up to date.\n\n562\n00:27:30.060 --> 00:27:31.007\nVersus your image,\n\n563\n00:27:31.007 --> 00:27:34.694\nwhich is steadily getting more out of\ndate the longer that you have it, right?\n\n564\n00:27:34.694 --> 00:27:36.876\nSo, pros and cons to the two models.\n\n565\n00:27:36.876 --> 00:27:40.405\nThis was quick and easy, the Azure custom\nscript's a little bit more work, but\n\n566\n00:27:40.405 --> 00:27:42.458\nwe'll get a chance to se\nthat in that episode,\n\n567\n00:27:42.458 --> 00:27:44.690\nso just be aware there\nare more options out there.\n\n568\n00:27:44.690 --> 00:27:47.620\n>> Awesome, well, we look forward to that,\nand we thank you for joining us today.\n\n569\n00:27:47.620 --> 00:27:49.580\nWe're gonna go ahead and\nsign off for ITProTV.\n\n570\n00:27:49.580 --> 00:27:51.520\nI've been your host, Daniel Lowrie.\n\n571\n00:27:51.520 --> 00:27:52.045\n>> And I'm Don Pezet.\n\n572\n00:27:52.045 --> 00:27:54.090\n>> And we'll see you next time.\n\n573\n00:27:54.090 --> 00:27:59.749\n[MUSIC]\n\n",
          "vimeoId": "152756388"
        },
        {
          "description": "In this episode, Daniel and Don walk you through creating custom scripts in PowerShell, to automate custom deployments in Azure. They start by explaining the benefits of custom scripting; benefits like increased speed and flexibility. Then they show you the steps you'll need to take to create a custom script to fit your deployment needs.",
          "length": "1629",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-1-7-azure_custom_scripts-012216--1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-1-7-azure_custom_scripts-012216--1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-1-7-azure_custom_scripts-012216--1-sm.jpg",
          "title": "Azure Custom Scripts",
          "transcript": "WEBVTT\n\n1\n00:00:00.093 --> 00:00:10.093\n[MUSIC]\n\n2\n00:00:11.884 --> 00:00:15.960\nAll right, greetings everyone and welcome\nto another exciting episode of ITProTV.\n\n3\n00:00:15.960 --> 00:00:20.270\nI'm your host Daniel Lowery and today's\nepisode well we are continuing on with our\n\n4\n00:00:20.270 --> 00:00:24.990\nAzure virtual machine series,\njoining me in the studio again today\n\n5\n00:00:24.990 --> 00:00:27.310\nis none other than our\ngood friend Mr.Don Pezet.\n\n6\n00:00:27.310 --> 00:00:29.080\nDon, welcome back to the show sir,\nhow you doing?\n\n7\n00:00:29.080 --> 00:00:30.199\n>> Doing great Daniel, thanks for\n\n8\n00:00:30.199 --> 00:00:33.030\nhaving me back and in this episode we're\ngonna take a look at a pretty neat topic.\n\n9\n00:00:33.030 --> 00:00:37.540\nThis one is Azure custom scripts\nwhich I know what you're thinking,\n\n10\n00:00:37.540 --> 00:00:40.410\ngosh I really just don't want to do\nscripting or anything like that.\n\n11\n00:00:40.410 --> 00:00:45.500\nBut these things are so incredibly useful\nthat you're gonna want to use them.\n\n12\n00:00:45.500 --> 00:00:48.550\nI know that first time I read\nan article on these I really wasn't\n\n13\n00:00:48.550 --> 00:00:50.760\ntoo excited about it,\ncuz I hate working in PowerShell scripts.\n\n14\n00:00:50.760 --> 00:00:52.720\nBut after I figured out\nwhat they could do and\n\n15\n00:00:52.720 --> 00:00:56.748\nhow they could benefit me, they became\nsomething that I use all the time.\n\n16\n00:00:56.748 --> 00:01:01.040\nThey really helped with rapidly deploying\nvirtual machines that are configured\n\n17\n00:01:01.040 --> 00:01:05.180\nexactly the way you need them with\nthe most up to date information.\n\n18\n00:01:05.180 --> 00:01:09.280\nI mentioned that in our last episode where\nwe talked about Azure virtual machine\n\n19\n00:01:09.280 --> 00:01:09.920\nimages.\n\n20\n00:01:09.920 --> 00:01:14.120\nI said how we could create images of\nvirtual machines to deploy them, but from\n\n21\n00:01:14.120 --> 00:01:18.250\nthe moment you create that image, they\nstart getting increasingly out of date.\n\n22\n00:01:18.250 --> 00:01:22.170\nWell, Azure custom scripts are how we\nfix that, how we keep those things up\n\n23\n00:01:22.170 --> 00:01:25.580\nto date without having to reimage our\nmachines over and over and over again.\n\n24\n00:01:25.580 --> 00:01:30.350\nOr maybe even without having to create\na virtual machine at all, right?\n\n25\n00:01:30.350 --> 00:01:34.010\nTo just be able to use a standard image\nand deploy it right out of Microsoft.\n\n26\n00:01:34.010 --> 00:01:35.840\nSo we're gonna take a look\nat how to do that today,\n\n27\n00:01:35.840 --> 00:01:37.340\nsome of the neat stuff you can do.\n\n28\n00:01:37.340 --> 00:01:39.900\nAnd really, sky's the limit with what\nyou can do with a Custom Script,\n\n29\n00:01:39.900 --> 00:01:40.930\nit's pretty impressive.\n\n30\n00:01:40.930 --> 00:01:41.530\n>> Yeah, and now, Don,\n\n31\n00:01:41.530 --> 00:01:45.090\nyou mentioned the fact that scripting\nis definitely big-boy work, right?\n\n32\n00:01:45.090 --> 00:01:46.830\nYou have to get in there and\nfigure all this stuff out.\n\n33\n00:01:46.830 --> 00:01:49.930\nThere's a lot of commands\nyou gotta learn but\n\n34\n00:01:49.930 --> 00:01:53.490\nfrom my experience you tend to\nbuild a library of scripts.\n\n35\n00:01:53.490 --> 00:01:56.520\nOnce you get a script figured out,\nyou put it in your script library.\n\n36\n00:01:56.520 --> 00:01:58.900\nAnd you can go out and\nfind other scripts out on the internet.\n\n37\n00:01:58.900 --> 00:02:01.570\nA lot of good scripters out\nthere that have already done\n\n38\n00:02:01.570 --> 00:02:02.750\na lot of the legwork for you.\n\n39\n00:02:02.750 --> 00:02:05.691\nSo, not to say that learning\nhow to do the scripting, and\n\n40\n00:02:05.691 --> 00:02:08.469\nlearning all the commands\nis not a good thing, it is.\n\n41\n00:02:08.469 --> 00:02:12.842\nBut until you get there, there's a lot\nof good helps out there for you.\n\n42\n00:02:12.842 --> 00:02:16.500\nSo Don you said this is gonna help us and\nit does, it's some very awesome stuff.\n\n43\n00:02:16.500 --> 00:02:21.060\nIt's gonna help us to build an environment\na whole lot quicker, a whole lot easier.\n\n44\n00:02:21.060 --> 00:02:22.221\nSo where do we start with that?\n\n45\n00:02:22.221 --> 00:02:24.514\n>> All right so\nlet's just do a scenario here.\n\n46\n00:02:24.514 --> 00:02:27.549\nNormally I kinda lecture a little bit on\nthe merits of something but you guys know\n\n47\n00:02:27.549 --> 00:02:30.820\nwhat a PowerShell script is so\nI'm not gonna waste your time with that.\n\n48\n00:02:30.820 --> 00:02:34.610\nLet's say that I want to deploy\na virtual machine in Azure and\n\n49\n00:02:34.610 --> 00:02:36.250\nI want it to be a web server.\n\n50\n00:02:36.250 --> 00:02:37.500\nThat's my plan, right?\n\n51\n00:02:37.500 --> 00:02:40.770\nSo I know I'm gonna deploy\na Windows Server 2012 machine, and\n\n52\n00:02:40.770 --> 00:02:43.550\nI know that I want it to be running IIS.\n\n53\n00:02:43.550 --> 00:02:46.320\nAnd maybe I know I'm gonna\nrun an ASP application so\n\n54\n00:02:46.320 --> 00:02:49.470\nI need to install .NET 3.5 or\n.NET 4 or whatever.\n\n55\n00:02:49.470 --> 00:02:53.531\nWell, that means that I'm gonna\ndeploy a virtual machine and then I\n\n56\n00:02:53.531 --> 00:02:58.375\ngotta remote desktop into it, and then\nonce I remote desktop into it from there,\n\n57\n00:02:58.375 --> 00:03:01.175\nI've got to log in,\ngo to the server manager.\n\n58\n00:03:01.175 --> 00:03:04.272\nI've got to do the add remove roles and\nadd the web server role, and\n\n59\n00:03:04.272 --> 00:03:07.482\nthen in the role customization,\nI gotta click off the .NET stuff and\n\n60\n00:03:07.482 --> 00:03:09.221\nnow I gotta let that process happen.\n\n61\n00:03:09.221 --> 00:03:12.540\nWell, that's fine, if I'm just gonna\ndo one, maybe I do that, right?\n\n62\n00:03:12.540 --> 00:03:14.370\nBut what if I need 100 web servers?\n\n63\n00:03:14.370 --> 00:03:16.030\nWhat if i'm about to build\na load balancing farm?\n\n64\n00:03:16.030 --> 00:03:16.880\nI need a ton of these things.\n\n65\n00:03:16.880 --> 00:03:19.950\nI don't wanna have to go through\nthat process every time.\n\n66\n00:03:19.950 --> 00:03:25.220\nWell when you're doing on premises servers\nyou can create auto configuration scripts.\n\n67\n00:03:25.220 --> 00:03:29.320\nYou can use the Windows Auto Config\nstuff where you basically do\n\n68\n00:03:29.320 --> 00:03:33.430\nan unattended answer file so that when\nyou install Windows it knows what to add.\n\n69\n00:03:33.430 --> 00:03:34.010\nAnd that's great.\n\n70\n00:03:34.010 --> 00:03:35.990\nYou can provide that when\nyou boot off the disc.\n\n71\n00:03:35.990 --> 00:03:38.040\nWe can't really do that in Azure can we?\n\n72\n00:03:38.040 --> 00:03:39.400\nSo we got two choices.\n\n73\n00:03:39.400 --> 00:03:42.800\nChoice number one is I can do an image.\n\n74\n00:03:42.800 --> 00:03:45.710\nSo if you watched our imaging episode,\nwe filmed right before this,\n\n75\n00:03:45.710 --> 00:03:48.530\nthat I showed you guys how you\ncan take one virtual machine,\n\n76\n00:03:48.530 --> 00:03:52.370\ncreate it, get it setup exactly the way\nyou want, and take an image of it.\n\n77\n00:03:52.370 --> 00:03:55.210\nAnd then you can deploy that\nimage where ever you want.\n\n78\n00:03:55.210 --> 00:03:57.430\nWell the problem there is I\nhave to create the image first.\n\n79\n00:03:57.430 --> 00:04:00.860\nIf I need a web server right now\nI don't have an image yet, right?\n\n80\n00:04:00.860 --> 00:04:03.670\nAnd so that first machine I'm still\ngonna have to do it manually.\n\n81\n00:04:03.670 --> 00:04:05.440\nWell, not if I script it.\n\n82\n00:04:05.440 --> 00:04:07.520\nRight?\nAnd then the other problem is,\n\n83\n00:04:07.520 --> 00:04:09.690\nif I take that image,\nlet's say it's a web server and\n\n84\n00:04:09.690 --> 00:04:13.610\nI put my website on that virtual\nmachine and I take that image.\n\n85\n00:04:13.610 --> 00:04:15.660\nNow my website's in the image.\n\n86\n00:04:15.660 --> 00:04:17.890\nWhat happens when I update my website?\n\n87\n00:04:17.890 --> 00:04:20.440\nNow, I've gotta go and\nupdate the image also.\n\n88\n00:04:20.440 --> 00:04:22.610\nAnd that's a little bit of\na weakness there with that image.\n\n89\n00:04:22.610 --> 00:04:26.150\nAnd so any time I spin up a new\nvirtual machine based on that image,\n\n90\n00:04:26.150 --> 00:04:28.410\nI've gotta log in to it and\nupdate the web files.\n\n91\n00:04:28.410 --> 00:04:32.740\nOtherwise, I'm serving an outdated copy of\nmy webpage, unless we automate that, too.\n\n92\n00:04:32.740 --> 00:04:34.320\nAnd the custom scripts will do that.\n\n93\n00:04:34.320 --> 00:04:36.190\nSo let's start with a simple example.\n\n94\n00:04:36.190 --> 00:04:39.130\nLet's say that I just want to\ndeploy Windows Server 2012 and\n\n95\n00:04:39.130 --> 00:04:42.640\nI want it to run IIS and have those role\nfeatures enabled but I don't wanna have to\n\n96\n00:04:42.640 --> 00:04:46.000\nlog in to do it, I just want it\nto happen automatically right.\n\n97\n00:04:46.000 --> 00:04:48.160\nWell it's actually a pretty\nstraight forward process.\n\n98\n00:04:48.160 --> 00:04:49.440\nLet me show you here in the Azure portal.\n\n99\n00:04:49.440 --> 00:04:53.260\nSo I'm logged into the new portal and\nI'm just gonna go into virtual machines.\n\n100\n00:04:53.260 --> 00:04:56.340\nNow I'll do a classic virtual machine,\nI'm not going to go crazy with this.\n\n101\n00:04:56.340 --> 00:04:59.160\nAnd I'll just add in a new\nvirtual machine here and\n\n102\n00:04:59.160 --> 00:05:03.220\nwhen I go to add it in, it's gonna ask\nme what kind of virtual machine I want.\n\n103\n00:05:03.220 --> 00:05:06.418\nAnd I'm just gonna choose\na standard Windows Server and\n\n104\n00:05:06.418 --> 00:05:10.717\nwhen it asks which kind,\nI'll pick Windows Server 2012 data center.\n\n105\n00:05:10.717 --> 00:05:12.344\nActually we want R2 data center.\n\n106\n00:05:12.344 --> 00:05:14.257\nThere we go.\n\n107\n00:05:14.257 --> 00:05:16.180\nWhat I'm gonna do, it doesn't really\nmatter if it's R2 or not, but\n\n108\n00:05:16.180 --> 00:05:17.800\nI'm gonna go ahead and choose R2.\n\n109\n00:05:17.800 --> 00:05:21.590\nAnd so I'm gonna pick that virtual\nmachine that I'm gonna be deploying.\n\n110\n00:05:21.590 --> 00:05:24.840\nAnd I'll go ahead and create one and I'm\njust gonna do a classic virtual machine.\n\n111\n00:05:24.840 --> 00:05:26.120\nYou can do resource manager too.\n\n112\n00:05:26.120 --> 00:05:29.200\nThis works either way, it doesn't matter\nwhich one, but I'll do classic for\n\n113\n00:05:29.200 --> 00:05:31.280\nnow cuz it's a little bit faster.\n\n114\n00:05:31.280 --> 00:05:34.890\nNow, normally when I deploy a virtual\nmachine like this, it's gonna ask me for\n\n115\n00:05:34.890 --> 00:05:35.750\nsome settings.\n\n116\n00:05:35.750 --> 00:05:39.437\nSo, I'll call this itprotv, maybe this\nis a website for a developer, so one\n\n117\n00:05:39.437 --> 00:05:43.383\nof my developers said, hey Don, I need a\nWindows server and I need it running IIS.\n\n118\n00:05:43.383 --> 00:05:46.817\nSo this will be itprotv-devweb01 right,\nand\n\n119\n00:05:46.817 --> 00:05:51.730\nI'll give it a user name,\nwhy doesn't it like that name?\n\n120\n00:05:51.730 --> 00:05:52.790\nWhat have I done here?\n\n121\n00:05:52.790 --> 00:05:57.460\nToo many characters, well we'll just\ncall it itprotv-dev01 then, there we go.\n\n122\n00:05:57.460 --> 00:06:00.710\nI'll create a username inside of it and\nyou know,\n\n123\n00:06:00.710 --> 00:06:03.500\nthose are unique values that we\nkind of have to specify anyway.\n\n124\n00:06:03.500 --> 00:06:07.806\nWe'll set a pricing tier for it our other\ninformation, just kind of defining it.\n\n125\n00:06:07.806 --> 00:06:10.830\nIf I want it to be in a resource\ngroup I can throw that in here,\n\n126\n00:06:10.830 --> 00:06:13.500\nI'll just leave it in group.\n\n127\n00:06:13.500 --> 00:06:16.970\nAnd East US 2, and we'll create it.\n\n128\n00:06:16.970 --> 00:06:18.510\nThat's gonna create a virtual machine for\n\n129\n00:06:18.510 --> 00:06:22.340\nme, but it's based on\nthe Windows Server 2012 R2 image and\n\n130\n00:06:22.340 --> 00:06:26.960\nwhen it deploys, it's up to date,\nMicrosoft keeps those images up to date.\n\n131\n00:06:26.960 --> 00:06:28.480\nBut it's not gonna have IIS running.\n\n132\n00:06:28.480 --> 00:06:31.150\nIt's not gonna have the roles and\nfeatures that I want.\n\n133\n00:06:31.150 --> 00:06:33.720\nI'm gonna have to login and do that.\n\n134\n00:06:33.720 --> 00:06:35.240\nBut instead of logging in and doing it,\n\n135\n00:06:35.240 --> 00:06:37.820\nwhat I'm gonna do is I'm\ngonna create a custom script.\n\n136\n00:06:37.820 --> 00:06:41.050\nAnd I can apply the custom script\nto the virtual machine, and\n\n137\n00:06:41.050 --> 00:06:42.300\nit'll configure itself.\n\n138\n00:06:42.300 --> 00:06:44.020\nAnd I never even have to log into that.\n\n139\n00:06:44.020 --> 00:06:45.950\nI that.\nI just apply the script and I'm done.\n\n140\n00:06:45.950 --> 00:06:47.860\nSo let me write a custom script.\n\n141\n00:06:47.860 --> 00:06:49.730\nNow the custom scripts\nare just PowerShell, so\n\n142\n00:06:49.730 --> 00:06:52.980\nif you know how to do something in\nPowerShell, then this is it, right?\n\n143\n00:06:52.980 --> 00:06:54.190\nWe just write it in here and we're done.\n\n144\n00:06:54.190 --> 00:06:58.040\nSo I'm gonna use the PowerShell ISE,\nyou can use Notepad or whatever you want.\n\n145\n00:06:58.040 --> 00:07:00.300\nAnd I'm just gonna write\njust a super simple script.\n\n146\n00:07:00.300 --> 00:07:03.420\nI hope you guys aren't expecting\nsome amazing wizardry here.\n\n147\n00:07:03.420 --> 00:07:05.730\nBut, basically, I'm just gonna come in and\n\n148\n00:07:05.730 --> 00:07:09.600\ntell it that I want to add\nthe web server role, right?\n\n149\n00:07:09.600 --> 00:07:13.220\nSo, I'm gonna come in here and\njust say add Windows feature.\n\n150\n00:07:14.970 --> 00:07:16.848\nWhich, my auto complete\nis working great today.\n\n151\n00:07:16.848 --> 00:07:18.424\n[LAUGH] Anyhow.\n\n152\n00:07:18.424 --> 00:07:20.850\nSo, I'll do add Windows feature.\n\n153\n00:07:20.850 --> 00:07:24.340\nAnd then,\nI'll add the web server role, right.?\n\n154\n00:07:24.340 --> 00:07:27.950\nNow I know this says add Windows feature,\nbut the roles are called features in\n\n155\n00:07:27.950 --> 00:07:30.800\nPowerShell for whatever reason,\nand features are called features,\n\n156\n00:07:30.800 --> 00:07:32.440\nand everything's feature\nin PowerShell I guess.\n\n157\n00:07:32.440 --> 00:07:34.290\nSo we'll say web server.\n\n158\n00:07:34.290 --> 00:07:39.954\nAnd I could stop right there, but\nI'm gonna go a little bit further and\n\n159\n00:07:39.954 --> 00:07:43.225\nadd Web-ASP and maybe Web-Asp-Net.\n\n160\n00:07:43.225 --> 00:07:47.986\nOkay, so I'm gonna bring up IIS and I'm\ngonna bring up the dot net functionality\n\n161\n00:07:47.986 --> 00:07:52.548\ninside of it, right, the ASP dot net\nfunctionality so I can host an ASP page.\n\n162\n00:07:52.548 --> 00:07:56.647\nSo, I'm gonna punch those things in there,\nand that's gonna tell it, hey,\n\n163\n00:07:56.647 --> 00:08:00.870\nbring up the virtual machine Then install\nthis role, install these features and\n\n164\n00:08:00.870 --> 00:08:02.563\nget it up and going, all right.\n\n165\n00:08:02.563 --> 00:08:07.572\nI could then proceed to add whatever else\nI wanted here, adding other features,\n\n166\n00:08:07.572 --> 00:08:11.772\ncopying files, creating user accounts,\nadding firewall rules,\n\n167\n00:08:11.772 --> 00:08:15.640\nremoving firewall rules,\nanything else that I wanted.\n\n168\n00:08:15.640 --> 00:08:19.960\nAny power shell command that you're\nused to you can throw it right in here,\n\n169\n00:08:19.960 --> 00:08:23.360\nassuming the Power Shell\ncommand is supported\n\n170\n00:08:23.360 --> 00:08:26.125\nin a basic install of Windows Server 2012,\nright?\n\n171\n00:08:26.125 --> 00:08:29.370\nCuz remember, there's things that\nwe have to download and install.\n\n172\n00:08:29.370 --> 00:08:34.060\nWhen you deploy a Windows server in Azure,\nit will have all the standard Power Shell\n\n173\n00:08:34.060 --> 00:08:37.760\neditions as well as the Azure Power Shell\neditions on it, but that's it.\n\n174\n00:08:37.760 --> 00:08:40.790\nSo you have anything special,\nyou might need to add those in, and\n\n175\n00:08:40.790 --> 00:08:42.690\ncreate an image that has those in,\nall right.\n\n176\n00:08:42.690 --> 00:08:45.510\nBut I'm just going to do this one and\nI'll save that, and\n\n177\n00:08:45.510 --> 00:08:48.140\nlet me just save that like\non my desktop here, and\n\n178\n00:08:48.140 --> 00:08:54.090\nI'm going to call this installiis.ps1.\n\n179\n00:08:54.090 --> 00:08:57.160\nRight, so just a quick power\nshell script that'll install iis.\n\n180\n00:08:57.160 --> 00:09:00.120\nIt's a good idea to test your script to\nmake sure it that it actually works, but\n\n181\n00:09:00.120 --> 00:09:02.880\nI'm going to throw caution to the wind and\njust deploy it right on my server.\n\n182\n00:09:02.880 --> 00:09:03.580\nOkay.\n\n183\n00:09:03.580 --> 00:09:07.180\nNow, when I take this script I\ncan attach it to the server.\n\n184\n00:09:07.180 --> 00:09:10.710\nAnd when the server deploys, which it's\nalready deploying in the background,\n\n185\n00:09:10.710 --> 00:09:13.330\nit'll just run this script and\nit'll take these actions.\n\n186\n00:09:13.330 --> 00:09:16.965\nAnd if I'm deploying the VM from power\nshell I can do this all at the same\n\n187\n00:09:16.965 --> 00:09:17.640\ntime,right.\n\n188\n00:09:17.640 --> 00:09:20.255\nI've got a Microsoft page here\nwhere they show doing that,\n\n189\n00:09:20.255 --> 00:09:23.050\nit's kind of the hard way, but\nthis is a Microsoft article.\n\n190\n00:09:23.050 --> 00:09:25.690\nI'll put the link to this in\nthe show notes so you guys have it.\n\n191\n00:09:25.690 --> 00:09:29.710\nBut what they show here is\ncreating a virtual machine.\n\n192\n00:09:29.710 --> 00:09:34.240\nSo they're whipping up a virtual machine\nhere and they're applying the script at\n\n193\n00:09:34.240 --> 00:09:38.922\nthe same time so that we deploy a VM and\napply the script all in one fell swoop.\n\n194\n00:09:38.922 --> 00:09:42.490\nThe VM deploys and it ends up exactly\nthe way that we want, all right.\n\n195\n00:09:42.490 --> 00:09:46.030\nBut in mine, I'm kind of do it in two\nsteps because I'm using the GUI, right.\n\n196\n00:09:46.030 --> 00:09:48.820\nSo I came in here and\nI deployed a virtual machine and\n\n197\n00:09:48.820 --> 00:09:53.945\nif I go into my virtual machines, I should\nhave itprotv.dev Dev01, and there it is.\n\n198\n00:09:53.945 --> 00:09:56.695\nAnd when I go to Dev01,\nDev01's done, it's provisioned.\n\n199\n00:09:56.695 --> 00:10:02.405\nIt's a Windows server that's up and\nrunning, but it's not running iis, right?\n\n200\n00:10:02.405 --> 00:10:05.458\nAnd if I were to go into its end points,\nand\n\n201\n00:10:05.458 --> 00:10:11.041\nI am just gonna add in an end point for\nport 80 so that it will be a Web server,\n\n202\n00:10:11.041 --> 00:10:14.740\ncuz kinda need that if\nthat's what I'm gonna do.\n\n203\n00:10:14.740 --> 00:10:21.208\nAnd so, I'll punch that in here and,\nyou know, shoot, I did a well, whatever.\n\n204\n00:10:21.208 --> 00:10:24.930\nSo [LAUGH] I'll go through here and\nprovide this.\n\n205\n00:10:24.930 --> 00:10:27.360\nAnd so we're gonna come in and\njust kinda set up.\n\n206\n00:10:27.360 --> 00:10:28.400\nI shouldn't have used a new portal.\n\n207\n00:10:28.400 --> 00:10:29.890\nI should have used\nthe classic portal on this.\n\n208\n00:10:29.890 --> 00:10:32.360\nLet me do it from there cuz the new\nportal's gonna get a little confused when\n\n209\n00:10:32.360 --> 00:10:33.710\nI do it this way.\n\n210\n00:10:33.710 --> 00:10:36.240\nThe new portal they really want you\nworking with the resource group and\n\n211\n00:10:36.240 --> 00:10:39.610\nnot a cloud service\nlike I was doing there.\n\n212\n00:10:39.610 --> 00:10:41.800\nSo I'll just come and\nadd the endpoint here.\n\n213\n00:10:41.800 --> 00:10:46.900\nAnd when I add the endpoint in,\nit's not even done provisioning is it?\n\n214\n00:10:48.450 --> 00:10:50.850\nShoot, I can't add an endpoint\nuntil it's done provisioning.\n\n215\n00:10:50.850 --> 00:10:52.060\nApparently it's still thinking about it.\n\n216\n00:10:52.060 --> 00:10:53.355\nYeah, still provisioning in progress,\nall right.\n\n217\n00:10:53.355 --> 00:10:56.880\nWell,so that machine is provisioning and\nwhen it's done,\n\n218\n00:10:56.880 --> 00:11:01.390\nI can add a port 80 endpoint, and all I'll\nsee is that it doesn't answer, right?\n\n219\n00:11:01.390 --> 00:11:03.600\nIt's not running IIS, I can't get to it.\n\n220\n00:11:03.600 --> 00:11:07.050\nSo, I need to be running IIS before\nit's actually able to answer anything.\n\n221\n00:11:07.050 --> 00:11:10.240\nSo, what I'm gonna do is I'm gonna take\nthat custom script and I'm gonna apply\n\n222\n00:11:10.240 --> 00:11:13.690\nit to this machine, and I can do that\nright here through the new portal.\n\n223\n00:11:13.690 --> 00:11:14.260\nLet me show you.\n\n224\n00:11:14.260 --> 00:11:17.470\nIt probably won't let me do it while\nit's still provisioning, but If I go and\n\n225\n00:11:17.470 --> 00:11:20.628\nbrowse into that machine,\nso I go into itprotv-dev01.\n\n226\n00:11:20.628 --> 00:11:25.350\nAnd when i go into itprotv-dev01 and\nI look over here and its settings.\n\n227\n00:11:25.350 --> 00:11:28.000\nAs I browse down in the settings,\n\n228\n00:11:28.000 --> 00:11:32.140\nwhat I'm looking for\nis the extensions option, okay.\n\n229\n00:11:32.140 --> 00:11:36.480\nThe custom scripts are an extension that\nkind of adds onto your virtual machines.\n\n230\n00:11:36.480 --> 00:11:39.450\nAnd you'll see, Microsoft already has\none extension installed, the BGinfo,\n\n231\n00:11:39.450 --> 00:11:40.870\nthe background info.\n\n232\n00:11:40.870 --> 00:11:44.060\nThat's what creating the wallpaper on my\nvirtual machine that has the name and\n\n233\n00:11:44.060 --> 00:11:45.740\nthe IP address and\nall the other good data.\n\n234\n00:11:45.740 --> 00:11:48.720\nThat's an extension they've added and\nI can remove that if I don't want it.\n\n235\n00:11:48.720 --> 00:11:51.750\nBut I want to add my custom\nscript as an extension also.\n\n236\n00:11:51.750 --> 00:11:55.070\nSo it's grayed out right now cuz\nthe machine's still provisioning, but\n\n237\n00:11:55.070 --> 00:11:58.060\nall I have to do is hit add and\nit'll tack it on.\n\n238\n00:11:58.060 --> 00:11:59.340\nAnd I'm an impatient man, so\n\n239\n00:11:59.340 --> 00:12:02.180\nlet me just use one of my other virtual\nmachines that already up and running.\n\n240\n00:12:02.180 --> 00:12:05.400\nI've got a machine like\nITProTV Web02 sitting here.\n\n241\n00:12:05.400 --> 00:12:08.240\nAnd, honestly, I can't remember if I\ndidn't install IIS on it, or not so,\n\n242\n00:12:08.240 --> 00:12:10.190\nwe might as well go ahead and redeploy it.\n\n243\n00:12:10.190 --> 00:12:14.530\nAnd, I'll go into its extensions, and\nwhen I go into the extensions for\n\n244\n00:12:14.530 --> 00:12:18.590\nthis machine, I see BGInfo, just like\nthe other one and, I can hit add.\n\n245\n00:12:18.590 --> 00:12:23.100\nAnd, when I go to add that in, I can pick\nfrom all sorts of different extensions.\n\n246\n00:12:23.100 --> 00:12:25.700\nAnd, there's a lot of great ones that are\nout there but the one that I'm looking for\n\n247\n00:12:25.700 --> 00:12:28.040\nis Custom Script by\nthe Microsoft Corporation.\n\n248\n00:12:28.040 --> 00:12:32.460\nAnd when I choose custom script,\nit's just basically gonna say,\n\n249\n00:12:32.460 --> 00:12:34.671\nhey, this is what you can do, hit create.\n\n250\n00:12:34.671 --> 00:12:36.890\n>> [LAUGH]\n>> No option there, right?\n\n251\n00:12:36.890 --> 00:12:41.015\nAnd then, after that,\nwe need to to provide the script.\n\n252\n00:12:41.015 --> 00:12:43.895\nAnd if the script is expecting any\nparameters to be passed to it,\n\n253\n00:12:43.895 --> 00:12:44.905\nwe can provide it here.\n\n254\n00:12:44.905 --> 00:12:47.160\nLike maybe you wanna provide\na host name or something else,\n\n255\n00:12:47.160 --> 00:12:48.975\nyou'd provide that as\nan argument right here.\n\n256\n00:12:48.975 --> 00:12:52.095\nWell my script just adds some roles,\nso I don't have any arguments.\n\n257\n00:12:52.095 --> 00:12:56.195\nI just need to browse and pick my script,\nwhich I saved to my desktop.\n\n258\n00:12:56.195 --> 00:13:01.320\nSo I'm gonna find that install-iis\nscript and I'll open that up.\n\n259\n00:13:01.320 --> 00:13:03.460\nAnd there it is,\nit's copied it up in to Azure.\n\n260\n00:13:03.460 --> 00:13:07.820\nIt's actually going to store that script\nin the storage account so that I can\n\n261\n00:13:07.820 --> 00:13:11.420\nreuse it over and over and over again if\nI want with my other virtual machine.\n\n262\n00:13:11.420 --> 00:13:15.230\nIt's up there in Azure, it's not\nrotting in my workstation to be up.\n\n263\n00:13:15.230 --> 00:13:18.350\nAnd when I say okay,\ntwo things happen, right?\n\n264\n00:13:18.350 --> 00:13:22.000\nFirst off, it attaches that\nscript to the storage account.\n\n265\n00:13:22.000 --> 00:13:24.910\nAnd secondly,\nit runs the script on that server.\n\n266\n00:13:24.910 --> 00:13:28.840\nAnd so now, without even logging into\nthe server, it's running those commands.\n\n267\n00:13:28.840 --> 00:13:32.630\nAnd in my scenario,\nit's gonna be installing IIS, and\n\n268\n00:13:32.630 --> 00:13:36.690\nadding the ASP framework to it, so that\nit'll be able to run ASP.NET applications.\n\n269\n00:13:36.690 --> 00:13:39.000\nI didn't have to log into it,\nit's just done.\n\n270\n00:13:39.000 --> 00:13:43.250\nSo, if I want to deploy a virtual\nmachine with a certain configuration,\n\n271\n00:13:43.250 --> 00:13:44.500\nI can do it this way.\n\n272\n00:13:44.500 --> 00:13:45.330\nNow I know what you're thinking.\n\n273\n00:13:45.330 --> 00:13:46.960\nDon, why not just make an image?\n\n274\n00:13:46.960 --> 00:13:49.080\nRight, cuz I could have done that too.\n\n275\n00:13:49.080 --> 00:13:52.430\nIf I have an image I've got\nto keep the image up to date.\n\n276\n00:13:52.430 --> 00:13:56.550\nIf I use a custom script, Microsoft is\nkeeping their images up to date and\n\n277\n00:13:56.550 --> 00:14:00.230\nthen we just apply a custom script\nto it to set it up the way we want.\n\n278\n00:14:00.230 --> 00:14:02.730\nThe deployment will take\na little bit longer, right,\n\n279\n00:14:02.730 --> 00:14:05.460\ncause you've gotta deploy the VM,\nand then add all the rolls.\n\n280\n00:14:05.460 --> 00:14:09.330\nIt's faster if it's in an image,\nbut I've gotta keep it up to date.\n\n281\n00:14:09.330 --> 00:14:13.390\nSo, what you normally do is try and\nfind a mixture of the two, a good kind of\n\n282\n00:14:13.390 --> 00:14:18.240\nmiddle ground, and usually I do end\nup creating my own images to deploy,\n\n283\n00:14:18.240 --> 00:14:20.550\ncause I wanna bake in\nsome other utilities.\n\n284\n00:14:20.550 --> 00:14:23.320\nAll right, on mine I just got a message\ntelling me that the extension was\n\n285\n00:14:23.320 --> 00:14:26.730\nsuccessfully deployed, and\nthat means that it should have executed.\n\n286\n00:14:26.730 --> 00:14:29.470\nAnd it should be done on that machine,\nright?\n\n287\n00:14:29.470 --> 00:14:30.840\nI'm just gonna click on\nthat little note here, and\n\n288\n00:14:30.840 --> 00:14:33.270\nI can see it successfully\nadded the extension.\n\n289\n00:14:33.270 --> 00:14:38.150\nSo it's there it should be happy, and\nwe should be in business on that one.\n\n290\n00:14:38.150 --> 00:14:40.190\nThe way to tell if it's actually done?\n\n291\n00:14:40.190 --> 00:14:42.900\nWell, I can log into the machine, see if\nit's hosting a website right now, right?\n\n292\n00:14:42.900 --> 00:14:44.300\nSee if it's actually up and running, but\n\n293\n00:14:44.300 --> 00:14:47.960\nif you've tested your script, it'll be\nrunning and it should be good, right?\n\n294\n00:14:47.960 --> 00:14:52.080\nNow, what I like to do is go\na little bit further, okay?\n\n295\n00:14:52.080 --> 00:14:55.600\nI mentioned how I usually create my own\nimage and the reason I create my own image\n\n296\n00:14:55.600 --> 00:14:58.800\nis because there's usually\nother utilities that I want.\n\n297\n00:14:58.800 --> 00:15:01.720\nAnd in the image episode I gave\nan example, actually it wasn't the image\n\n298\n00:15:01.720 --> 00:15:04.670\nepisode, it was the load balancing\nepisode, if you haven't seen that one yet.\n\n299\n00:15:04.670 --> 00:15:08.025\nLet's say I have a load balance farm,\nwhich actually I do, here let me,\n\n300\n00:15:08.025 --> 00:15:10.140\nwe won't go hypothetical, we'll go real.\n\n301\n00:15:10.140 --> 00:15:15.060\nSo I've got a cloud service\ncalled IT PRO TV WEB, right.\n\n302\n00:15:15.060 --> 00:15:17.980\nSo here it is IT PRO TV WEB\nis my cloud service, and\n\n303\n00:15:17.980 --> 00:15:21.950\nin that cloud service,\nI've got two instances, right.\n\n304\n00:15:21.950 --> 00:15:24.807\nSo if I go into that instance\nI've got itprotv-web01 and\n\n305\n00:15:24.807 --> 00:15:28.040\nitprotv-web02, two web servers, all right?\n\n306\n00:15:28.040 --> 00:15:31.041\nAnd my idea is that I wanna load\nbalance across them, load balance for\n\n307\n00:15:31.041 --> 00:15:32.760\nperformance as well as availability.\n\n308\n00:15:32.760 --> 00:15:34.780\nIf one goes down,\nthe other one's still up, right?\n\n309\n00:15:34.780 --> 00:15:39.410\nSo I want load balancing, and if I go into\nitprotv-web02 and look at its endpoints,\n\n310\n00:15:39.410 --> 00:15:43.630\nwell, it doesn't actually have a port 80\nattached to it, so let me add that here.\n\n311\n00:15:43.630 --> 00:15:49.260\nSo I'm gonna attach that to the load\nbalance set, and there we go.\n\n312\n00:15:49.260 --> 00:15:52.668\nAnd so now, I'm load balancing\nbetween those two systems, right,\n\n313\n00:15:52.668 --> 00:15:54.860\nItprotv-web01 and itprotv-web02.\n\n314\n00:15:54.860 --> 00:15:58.390\nWell, let's say that decide I\nwanted to play itprotv-web03.\n\n315\n00:15:58.390 --> 00:15:58.910\nRight?\nI\n\n316\n00:15:58.910 --> 00:16:02.366\nwanna add a new node to this system\nbecause it's just getting too busy.\n\n317\n00:16:02.366 --> 00:16:03.670\nThings are getting busy.\n\n318\n00:16:03.670 --> 00:16:06.260\nIt doesn't have the capacity to\nhandle all my users any more.\n\n319\n00:16:06.260 --> 00:16:07.560\nI wanna add another node.\n\n320\n00:16:07.560 --> 00:16:09.430\nSo when I add another node,\n\n321\n00:16:09.430 --> 00:16:15.360\nI need to add a web server that matches\nitprotv-web01 and web02, right?\n\n322\n00:16:15.360 --> 00:16:16.830\nSame basic configuration.\n\n323\n00:16:16.830 --> 00:16:18.880\nSo I knew I was gonna do\nthat ahead of time so\n\n324\n00:16:18.880 --> 00:16:21.100\nI created an image of those machines.\n\n325\n00:16:21.100 --> 00:16:24.090\nBut, I've made changes to that website.\n\n326\n00:16:24.090 --> 00:16:28.220\nAnd so, over time, I make changes and\nI don't update my image.\n\n327\n00:16:28.220 --> 00:16:33.010\nSo if I deploy a new VM from an image,\nit's not gonna match, right.\n\n328\n00:16:33.010 --> 00:16:37.191\nSo if I go in here, and\nsay I wanna create a new\n\n329\n00:16:37.191 --> 00:16:41.486\nCompute > Virtual Machine > From Gallery.\n\n330\n00:16:41.486 --> 00:16:44.741\nAnd I will go down here to My Images and\n\n331\n00:16:44.741 --> 00:16:49.690\nI'll take that itprotv-web-lb-node,\nall right?\n\n332\n00:16:49.690 --> 00:16:52.680\nI created this image in\nthe Azure VM Images episode.\n\n333\n00:16:52.680 --> 00:16:54.190\nIf you haven't seen that one, watch it.\n\n334\n00:16:54.190 --> 00:16:56.192\nAnd setting up a load balance where\nwe show a load balancing episode,\n\n335\n00:16:56.192 --> 00:16:57.408\nthat's where I actually set this one up.\n\n336\n00:16:57.408 --> 00:17:00.691\nSo if you wanna see how we got to this\npoint definitely check out those two\n\n337\n00:17:00.691 --> 00:17:01.770\nepisodes.\n\n338\n00:17:01.770 --> 00:17:08.162\nBut I'm gonna take this node and I'm\ngonna make it itprotv-web03, all right?\n\n339\n00:17:08.162 --> 00:17:12.550\nAnd so itprotv-web03,\nI'll give it a size, make it a D1.\n\n340\n00:17:12.550 --> 00:17:15.255\nI'll create a user name.\n\n341\n00:17:15.255 --> 00:17:17.145\nAnd we'll start getting it provisioned.\n\n342\n00:17:17.145 --> 00:17:17.915\nAll right.\n\n343\n00:17:17.915 --> 00:17:20.755\nNow, it's gonna employ the same image and\nit's gonna have a copy of the webpage\n\n344\n00:17:20.755 --> 00:17:24.255\nfrom when I took that image,\nwhich was a few days ago, right.\n\n345\n00:17:24.255 --> 00:17:28.027\nSo when this one comes up,\nit's going to be out of date and\n\n346\n00:17:28.027 --> 00:17:29.507\nthat's a problem, right?\n\n347\n00:17:29.507 --> 00:17:30.567\nI don't want it to be out of date.\n\n348\n00:17:30.567 --> 00:17:32.667\nI want it to have a current webpage.\n\n349\n00:17:32.667 --> 00:17:34.297\nSo how do I solve that?\n\n350\n00:17:34.297 --> 00:17:35.529\nWell, the way I solve it,\n\n351\n00:17:35.529 --> 00:17:38.387\nthere's a number of ways to solve\nthis out in real life land.\n\n352\n00:17:38.387 --> 00:17:41.402\nAnd there's people who say store your\nwebpage in a database server and\n\n353\n00:17:41.402 --> 00:17:43.417\nhave your front end just\nsquare the database.\n\n354\n00:17:43.417 --> 00:17:44.347\nThat's cool, fine.\n\n355\n00:17:44.347 --> 00:17:50.170\nBut what I like to do I like to\neither create a GitHub repository\n\n356\n00:17:50.170 --> 00:17:52.680\nor just an Azure Storage account.\n\n357\n00:17:52.680 --> 00:17:55.655\nAnd put your website, If you put it in\nGitHub it's nice because you can track\n\n358\n00:17:55.655 --> 00:17:57.810\nchanges and\nhave your developers can work right in it.\n\n359\n00:17:57.810 --> 00:18:01.365\nYou can have your web servers\npull it right out of Git.\n\n360\n00:18:01.365 --> 00:18:04.725\nOr if you put in Azure Storage account,\nyou can just go and\n\n361\n00:18:04.725 --> 00:18:07.830\ngrab a copy of it when\nyou spin the machine up.\n\n362\n00:18:07.830 --> 00:18:10.330\nAnd I don't wanna dive in to setting\nup a whole Git repository so\n\n363\n00:18:10.330 --> 00:18:13.070\nI'll just show you doing it\nwith an Azure storage account.\n\n364\n00:18:13.070 --> 00:18:15.990\nSo I've got an Azure storage\naccount buried in here somewhere.\n\n365\n00:18:15.990 --> 00:18:18.470\nLet me go to a new portal cuz it'll\nlet me show you the contents.\n\n366\n00:18:18.470 --> 00:18:23.990\nSo if I go into the storage accounts,\nand I go into itprotvdemostorage,\n\n367\n00:18:25.010 --> 00:18:30.510\ninside of my demo storage,\nI've actually got a file, or\n\n368\n00:18:30.510 --> 00:18:33.740\nfolder, or something or\nanother in here, that is my website.\n\n369\n00:18:33.740 --> 00:18:37.990\nSo I've uploaded my website up\nhere into this storage account.\n\n370\n00:18:37.990 --> 00:18:38.670\nThere we go.\n\n371\n00:18:38.670 --> 00:18:40.800\nSo I've got a little\nfolder called website.\n\n372\n00:18:40.800 --> 00:18:43.460\nAnd if were to browse into that folder\nthere's not much in there, right?\n\n373\n00:18:43.460 --> 00:18:44.970\nIt's like default.aspx.\n\n374\n00:18:44.970 --> 00:18:46.580\nBut here's my website, right?\n\n375\n00:18:46.580 --> 00:18:50.080\nAnd so as I develop the website I can just\nkeep uploading files right up into here.\n\n376\n00:18:50.080 --> 00:18:53.980\nAnd whenever I spin up a new VM,\nI can just have a script that says,\n\n377\n00:18:53.980 --> 00:18:55.840\nhey go get a copy of that webpage.\n\n378\n00:18:55.840 --> 00:18:56.520\nAll right.\n\n379\n00:18:56.520 --> 00:18:58.210\nBut because it's an Azure storage account,\n\n380\n00:18:58.210 --> 00:19:01.950\none of the things I need is\na little utility called AZ Copy.\n\n381\n00:19:01.950 --> 00:19:04.860\nAZ Copy is the Azure copy utility.\n\n382\n00:19:04.860 --> 00:19:07.610\nIt's part of the Azure SDK if\nyou have the whole thing, but\n\n383\n00:19:07.610 --> 00:19:12.480\nyou can download just the Azure\ncopy utility if you want it.\n\n384\n00:19:12.480 --> 00:19:20.866\nIt's http://aka.ms/azure.\n\n385\n00:19:20.866 --> 00:19:22.347\nActually I think it's download,\n\n386\n00:19:22.347 --> 00:19:26.100\nhang on I've got this written down let me\nmake sure I give you the right URL here.\n\n387\n00:19:26.100 --> 00:19:30.860\nSo it's download, there it is\nfrom where I typed it before yep.\n\n388\n00:19:30.860 --> 00:19:34.148\nDownloadazcopy that little shortcut\nthat will send you right to it and\n\n389\n00:19:34.148 --> 00:19:35.157\nyou can download it.\n\n390\n00:19:35.157 --> 00:19:39.631\nWell I created an image, and\nI put the AZCopy utility in it, so\n\n391\n00:19:39.631 --> 00:19:42.420\nit's already got AZCopy for me.\n\n392\n00:19:42.420 --> 00:19:43.840\nSo I can write a script,\n\n393\n00:19:43.840 --> 00:19:46.930\nlike this one, that goes a little bit\nfurther than what we've got here.\n\n394\n00:19:46.930 --> 00:19:49.908\nThat says yes, add IIS, I need that.\n\n395\n00:19:49.908 --> 00:19:52.410\nWell, if I've already got an image\nwith IIS, I might not need that.\n\n396\n00:19:52.410 --> 00:19:53.080\nI can leave it off.\n\n397\n00:19:53.080 --> 00:19:56.320\nBut I'm gonna leave it in there anyway\nbecause if IIS is already installed,\n\n398\n00:19:56.320 --> 00:19:57.990\nthis command will just skip past it.\n\n399\n00:19:57.990 --> 00:20:01.574\nBut if for some reason, IIS isn't,\nthis will make sure it installs it.\n\n400\n00:20:01.574 --> 00:20:05.461\nNow if it installs it, you get that\nnice little sample web page for IIS and\n\n401\n00:20:05.461 --> 00:20:07.324\nwe don't necessarily need that.\n\n402\n00:20:07.324 --> 00:20:12.700\nSo I'm gonna do a little remove-item and\nI'm gonna remove\n\n403\n00:20:12.700 --> 00:20:17.754\nc:\\inetpub\\wwwroot\\* and\nI need to do a -recurse\n\n404\n00:20:17.754 --> 00:20:23.360\ncuz Microsoft started adding\nlittle subfolders to that too.\n\n405\n00:20:23.360 --> 00:20:27.090\nSo that's gonna wipe out the sample page\nand just get that out of the way, so\n\n406\n00:20:27.090 --> 00:20:29.150\nI don't have to worry about\nanything crazy there.\n\n407\n00:20:29.150 --> 00:20:34.640\nAll right, next I'm gonna say go\nout to my Azure storage account and\n\n408\n00:20:34.640 --> 00:20:37.360\nget a copy of the latest webpage.\n\n409\n00:20:37.360 --> 00:20:42.221\nSo I'm gonna say AZCopy,\nand then /Source, and\n\n410\n00:20:42.221 --> 00:20:48.012\nmy source is going to be\nhttps://itprotvdemostorage,\n\n411\n00:20:48.012 --> 00:20:51.230\nwhat's my account called?\n\n412\n00:20:51.230 --> 00:20:53.623\nThis is the hard part,\nis remembering what the account's called.\n\n413\n00:20:53.623 --> 00:21:01.150\nMy storage, got itprotvdemostorage1,\nthere we go, /website.\n\n414\n00:21:01.150 --> 00:21:02.690\nSo that's what I want to get.\n\n415\n00:21:02.690 --> 00:21:05.830\nI want to get everything\nin that website container.\n\n416\n00:21:05.830 --> 00:21:12.510\nAnd I wanna send that to a destination\nwhich is gonna be c:\\inetpub, right?\n\n417\n00:21:12.510 --> 00:21:16.580\nSo copy everything from that website\ncontainer, whatever's in there.\n\n418\n00:21:16.580 --> 00:21:18.360\nAnd throw it into inetpub.\n\n419\n00:21:18.360 --> 00:21:18.930\nAll right.\n\n420\n00:21:18.930 --> 00:21:21.040\nAnd I need to give it a little\nbit more information.\n\n421\n00:21:21.040 --> 00:21:23.850\nFor example, the source key,\n\n422\n00:21:23.850 --> 00:21:27.250\nbecause I need an access key to be\nable to get it that data, right?\n\n423\n00:21:27.250 --> 00:21:33.616\nAnd so I need to go back over to Azure\nhere and go to ITProTV demo storage.\n\n424\n00:21:33.616 --> 00:21:36.920\nAnd I went a little too far there.\n\n425\n00:21:36.920 --> 00:21:39.040\nWe can go into my Azure storage and\n\n426\n00:21:39.040 --> 00:21:41.690\nI just need to get the access\nkey off of this storage account.\n\n427\n00:21:41.690 --> 00:21:45.574\nSo I'm gonna go in here and\nfind that access key eventually.\n\n428\n00:21:48.116 --> 00:21:51.600\nAnd I'll just copy it because it's\na long key and I don't wanna type it.\n\n429\n00:21:51.600 --> 00:21:55.010\nAnd I can use the primary or secondary\nconnect, not connect, but access key.\n\n430\n00:21:55.010 --> 00:21:55.910\nI'll just use the primary.\n\n431\n00:21:57.060 --> 00:22:00.040\nLet me copy that,\nprobably have to copy twice.\n\n432\n00:22:01.580 --> 00:22:03.860\nAll right, and then we'll just\nkind of paste that one in here.\n\n433\n00:22:03.860 --> 00:22:07.640\nNice long key for me, and\nthen I need to add a /S.\n\n434\n00:22:07.640 --> 00:22:09.900\nI didn't do any subdirectories\non my website, but\n\n435\n00:22:09.900 --> 00:22:12.750\nif you do /S tells it to be recursive and\nget that.\n\n436\n00:22:12.750 --> 00:22:18.490\nSo now this is going to copy\nthe website and bring it down, right?\n\n437\n00:22:18.490 --> 00:22:22.690\nAnd again, probably want to test this,\nmake sure it works out okay, make sure you\n\n438\n00:22:22.690 --> 00:22:28.200\ncheck it for errors and all, but this will\ninstall IIS, delete the sample pages,\n\n439\n00:22:28.200 --> 00:22:33.410\nand then copy down the latest copy of my\nwebsite and get this system put in place.\n\n440\n00:22:33.410 --> 00:22:37.200\nAnd so I can save that, and now I've got\na script that's a lot more powerful.\n\n441\n00:22:37.200 --> 00:22:41.990\nSo, when I go back here, and\nI go into my Azure portal, and\n\n442\n00:22:41.990 --> 00:22:44.340\nI deploy that new node in to that cluster,\n\n443\n00:22:44.340 --> 00:22:49.860\nwhen I deploy ITProTV-web03 into that load\nbalance cluster, I can apply that script,\n\n444\n00:22:49.860 --> 00:22:54.150\nand I will know it gets\nthe latest copy of the web page.\n\n445\n00:22:54.150 --> 00:22:55.720\nAnd that's really handy.\n\n446\n00:22:55.720 --> 00:23:02.100\nSo, when I went into my virtual machines\nhere, and deployed Web03 a moment ago.\n\n447\n00:23:02.100 --> 00:23:05.590\nThat was based off of an image\nthat might be out of date.\n\n448\n00:23:05.590 --> 00:23:08.610\nAnd so all I've got to do is go in\nhere and attach that extension,\n\n449\n00:23:08.610 --> 00:23:09.790\nlike we did a few moments ago,\n\n450\n00:23:09.790 --> 00:23:14.390\nwe go into extensions, we add the custom\nscript extension, we provide that script.\n\n451\n00:23:14.390 --> 00:23:17.610\nAnd now it's gonna come all the way up\nto date and get that data in place.\n\n452\n00:23:17.610 --> 00:23:19.590\nAnd if you're deploying\nfrom the PowerShell,\n\n453\n00:23:19.590 --> 00:23:20.800\nyou can do it at the same time.\n\n454\n00:23:20.800 --> 00:23:23.740\nDeploy the VM and run the script.\n\n455\n00:23:23.740 --> 00:23:28.200\nAnd now you can rapidly deploy machines\ninto a load balance set like I'm doing,\n\n456\n00:23:28.200 --> 00:23:30.160\nand know that they've\ngot the right config.\n\n457\n00:23:30.160 --> 00:23:34.310\n>> Now Don, that being said, you talked\nearlier about creating an image, right?\n\n458\n00:23:34.310 --> 00:23:38.120\nYou can do this with an image but the\nproblem is that they don't stay up to date\n\n459\n00:23:38.120 --> 00:23:39.820\nand that's why we're going this route.\n\n460\n00:23:39.820 --> 00:23:42.130\nIs there any time where you would\nchoose going with an image?\n\n461\n00:23:42.130 --> 00:23:46.130\nBecause it seems like I can deploy even\nan image-type state without, even if I\n\n462\n00:23:46.130 --> 00:23:49.220\ndon't have to worry about it being\nup-to-date, I could still go this route.\n\n463\n00:23:49.220 --> 00:23:50.853\nIs this the more beneficial way to do it?\n\n464\n00:23:50.853 --> 00:23:55.147\n>> Now, so images are great if you've\ngot a system that you can afford to take\n\n465\n00:23:55.147 --> 00:23:55.777\noffline.\n\n466\n00:23:55.777 --> 00:23:57.635\nRight?\nSo I've got a load balance set here.\n\n467\n00:23:57.635 --> 00:23:59.910\nSo I have three web servers now.\n\n468\n00:23:59.910 --> 00:24:03.096\nSo if I want to take one of those web\nservers offline to update my image,\n\n469\n00:24:03.096 --> 00:24:04.401\nit's not really a big deal.\n\n470\n00:24:04.401 --> 00:24:06.900\nIf you've got the capacity,\nit's not a big deal.\n\n471\n00:24:06.900 --> 00:24:11.250\nBut if this is a critical system where you\ncan't take it offline to make an image,\n\n472\n00:24:11.250 --> 00:24:14.590\ncuz your VM has to shut\ndown to create the image.\n\n473\n00:24:14.590 --> 00:24:19.770\nSo if I can't shut it down, I don't want\nto be constantly updating that image,\n\n474\n00:24:19.770 --> 00:24:21.300\nit becomes a burden.\n\n475\n00:24:21.300 --> 00:24:26.080\nAnd so that's where using a script like\nthis can avoid you from having to do it.\n\n476\n00:24:26.080 --> 00:24:28.950\nAnd here,\nI might not even need an image at all.\n\n477\n00:24:28.950 --> 00:24:32.560\nI might just be able to use Microsoft's\nimages combined with my script, and\n\n478\n00:24:32.560 --> 00:24:34.760\nnow I'm not maintaining images ever.\n\n479\n00:24:34.760 --> 00:24:39.750\nAnd if Microsoft updates their images,\nI can just keep using them, and\n\n480\n00:24:39.750 --> 00:24:41.150\nnow I'm using them with the updates.\n\n481\n00:24:41.150 --> 00:24:44.300\nOr where it gets really cool when\nWindows Server 2012 came out,\n\n482\n00:24:44.300 --> 00:24:46.190\nyou might have written scripts for it.\n\n483\n00:24:46.190 --> 00:24:49.115\nAnd then Windows Server 2012 R2 comes out.\n\n484\n00:24:49.115 --> 00:24:52.650\nI don't have to build all new virtual\nmachines to get R2 cuz Microsoft doesn't\n\n485\n00:24:52.650 --> 00:24:53.980\nlet you upgrade a VM, right?\n\n486\n00:24:53.980 --> 00:24:58.136\nThere's no way to upgrade\nfrom 2012 to 2012 R2 in a VM.\n\n487\n00:24:58.136 --> 00:25:01.210\nAll I have to do us deploy new 2012\nR2 machine and apply my script to it.\n\n488\n00:25:01.210 --> 00:25:04.490\nAnd again, no images, and\nI just changed operating systems.\n\n489\n00:25:04.490 --> 00:25:05.990\nHeck, the script that I wrote, well,\n\n490\n00:25:05.990 --> 00:25:08.330\nit uses AzCopy so\nI guess that's a bit of a problem.\n\n491\n00:25:08.330 --> 00:25:11.840\nBut the add Windows features and\nstuff, that'll work on Server 2008,\n\n492\n00:25:11.840 --> 00:25:13.290\nit'll work on Windows 7, right?\n\n493\n00:25:13.290 --> 00:25:15.800\nI can jump it,\nI think it'll work on Windows 7,\n\n494\n00:25:15.800 --> 00:25:17.015\npretty sure, so-\n>> Don't quote you on that.\n\n495\n00:25:17.015 --> 00:25:18.751\n>> So anyway. [LAUGH] >> [LAUGH]\n>> I might have to test that, but\n\n496\n00:25:18.751 --> 00:25:21.996\nthey've got IIS built into\nthe desktop operating systems.\n\n497\n00:25:21.996 --> 00:25:25.444\nSo you can get some really super\ncrazy flexibility with this stuff and\n\n498\n00:25:25.444 --> 00:25:28.550\nI've seen some people with some\nreally impressive scripts.\n\n499\n00:25:28.550 --> 00:25:32.700\nBut if you combine this with a Git\nrepository where the web pages are being\n\n500\n00:25:32.700 --> 00:25:36.630\nupdated and stuff, it really does give\nyou a great level of flexibility.\n\n501\n00:25:36.630 --> 00:25:39.600\nAnd you can reapply the script\nwhenever you want, right?\n\n502\n00:25:39.600 --> 00:25:41.650\nAny time you reboot the virtual\nmachine it's gonna reapply, but\n\n503\n00:25:41.650 --> 00:25:45.650\nyou can also manually apply it and\nthat can refresh the machine.\n\n504\n00:25:45.650 --> 00:25:48.196\nSo if you know you're pushing\nout a web update right now,\n\n505\n00:25:48.196 --> 00:25:51.320\nI don't wanna have to go and\nupdate all three of my servers.\n\n506\n00:25:51.320 --> 00:25:52.080\nI don't necessarily have to.\n\n507\n00:25:52.080 --> 00:25:55.910\nI could update the Git repository and then\nreapply the script to all three of them.\n\n508\n00:25:55.910 --> 00:25:58.060\nAnd now they're gonna get that latest\ncopy of the webpage and be done.\n\n509\n00:25:58.060 --> 00:26:00.860\nI never have to log into the VMs,\nthat's the really cool part.\n\n510\n00:26:00.860 --> 00:26:04.160\n>> That's the way we do IT\naround here at ITPro TV.\n\n511\n00:26:04.160 --> 00:26:07.070\nReally good stuff, Don, is there anything\nelse that we need to cover as far as\n\n512\n00:26:07.070 --> 00:26:08.800\nusing scripting with Azure?\n\n513\n00:26:08.800 --> 00:26:10.910\n>> No, that's really about it,\nmake sure you troubleshoot your scripts.\n\n514\n00:26:10.910 --> 00:26:13.800\nRun it on a local server on your\nown VM first, run it a few times.\n\n515\n00:26:13.800 --> 00:26:15.788\nMake sure you get all of\nyour requirements down.\n\n516\n00:26:15.788 --> 00:26:17.540\nI used AzCopy, so\n\n517\n00:26:17.540 --> 00:26:20.330\nthat's probably why I'd have to use\nan image here to get that utility.\n\n518\n00:26:20.330 --> 00:26:23.260\nBut I could probably be a little creative\nand make the script download and\n\n519\n00:26:23.260 --> 00:26:25.200\ninstall AzCopy as part of the script.\n\n520\n00:26:25.200 --> 00:26:27.270\nThen I wouldn't even\nneed any image at all.\n\n521\n00:26:27.270 --> 00:26:30.400\nIt's really limited to your\nscripting kung fu at that point.\n\n522\n00:26:30.400 --> 00:26:33.650\nAnd the stronger your kung fu is\nthe better your scripting is and\n\n523\n00:26:33.650 --> 00:26:35.250\nthe more automated you'll get.\n\n524\n00:26:35.250 --> 00:26:38.725\n>> Awesome, well thank you so much Don,\nwho is our resident Kung Fu master.\n\n525\n00:26:38.725 --> 00:26:40.460\n>> [LAUGH]\n>> When it comes to scripting especially\n\n526\n00:26:40.460 --> 00:26:41.480\nin PowerShell.\n\n527\n00:26:41.480 --> 00:26:45.700\nWe thank you for showing us how to do\nthis, letting us know how we can use this\n\n528\n00:26:45.700 --> 00:26:49.630\nto speed up and have the flexibility\nof Azure and scripting together.\n\n529\n00:26:49.630 --> 00:26:51.410\nPowerShell, all good stuff.\n\n530\n00:26:51.410 --> 00:26:55.000\nThat being said, looks like we have\nrounded out yet another episode here.\n\n531\n00:26:55.000 --> 00:26:57.170\nAgain, thank you for joining us and\nthank you for watching.\n\n532\n00:26:57.170 --> 00:26:59.210\nWe're gonna go ahead and\nsign off for ItPro TV.\n\n533\n00:26:59.210 --> 00:27:01.020\nI've been your host, Daniel Lowery.\n\n534\n00:27:01.020 --> 00:27:01.640\n>> And I'm Don Pezet.\n\n535\n00:27:01.640 --> 00:27:03.586\n>> And we'll see you next time.\n\n536\n00:27:03.586 --> 00:27:08.970\n[SOUND]\n\n",
          "vimeoId": "152756385"
        },
        {
          "description": "In this episode, Daniel and Don explore storage management in Microsoft Azure Virtual Machines. They start by explaining Azure's temporary storage connected to your VM. Then they describe the more permanent or persistent storage that can be added to your VMs, known as Fixed Disks. Finally they add persistent disks to a VM.",
          "length": "1782",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-2-1-virtual_machine_storage-120215-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-2-1-virtual_machine_storage-120215-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-2-1-virtual_machine_storage-120215-1-sm.jpg",
          "title": "Virtual Machine Storage",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.745 --> 00:00:17.170\nAll right, greetings everyone, and welcome\nto another exciting episode of ITProTV.\n\n3\n00:00:17.170 --> 00:00:20.230\nI'm your host Daniel Lowery, and\nin today's episode we're gonna be taking\n\n4\n00:00:20.230 --> 00:00:23.360\na look at the Microsoft Azure\nvirtual machines.\n\n5\n00:00:23.360 --> 00:00:26.490\nAnd joining us in the studio to help\nlend his expertise on that topic\n\n6\n00:00:26.490 --> 00:00:28.730\nis none other than my good friend,\nMr. Don Pezet.\n\n7\n00:00:28.730 --> 00:00:29.810\nDon, welcome to the show.\n\n8\n00:00:29.810 --> 00:00:30.740\nHow are you today?\n\n9\n00:00:30.740 --> 00:00:32.550\n>> I am doing swell,\nthanks for having me back.\n\n10\n00:00:32.550 --> 00:00:36.560\nAnd we're gonna be jumping into an area\nthat we've really only kind glanced over\n\n11\n00:00:36.560 --> 00:00:37.380\na little bit.\n\n12\n00:00:37.380 --> 00:00:39.190\nWhich is virtual machine storage, right?\n\n13\n00:00:39.190 --> 00:00:42.440\nWe store a lot of junk in Azure and\nit's got to go somewhere.\n\n14\n00:00:42.440 --> 00:00:45.630\nWe need to understand how it's stored,\nwhere it's stored and some of the neat\n\n15\n00:00:45.630 --> 00:00:50.350\nlittle options we have when it comes to\noperating disks inside of the Azure Cloud.\n\n16\n00:00:50.350 --> 00:00:53.100\nAnd you'll be surprised,\nthere's actually a lot under the hood.\n\n17\n00:00:53.100 --> 00:00:55.920\nA lot of it's hidden, but we need to\nknow about it if we want to get the best\n\n18\n00:00:55.920 --> 00:00:57.460\nperformance out of our\nmachine as possible.\n\n19\n00:00:57.460 --> 00:00:59.970\nSo that's what we're gonna take\na look at in this episode and\n\n20\n00:00:59.970 --> 00:01:02.110\nin the next couple of\nepisodes as we go forward.\n\n21\n00:01:02.110 --> 00:01:05.640\n>> So, Don, it doesn't just stop with hey,\nhere's a storage file,\n\n22\n00:01:05.640 --> 00:01:07.877\njust put it here,\njust put all your stuff here.\n\n23\n00:01:07.877 --> 00:01:08.638\n[LAUGH]\n>> [LAUGH] Well,\n\n24\n00:01:08.638 --> 00:01:10.512\nI guess it sort of does, you know,\n\n25\n00:01:10.512 --> 00:01:14.470\nwith storage you only have to care\nabout it as much as you want to, right?\n\n26\n00:01:14.470 --> 00:01:18.040\nSo if you don't wanna care about storage\nat all, Azure's got you covered, and\n\n27\n00:01:18.040 --> 00:01:22.320\nwhen you spin up a VM, you don't have to\nanswer a single question about storage,\n\n28\n00:01:22.320 --> 00:01:24.500\nit'll just figure it out for you, right?\n\n29\n00:01:24.500 --> 00:01:27.830\nBut it's choosing\na solution that's ideal for\n\n30\n00:01:27.830 --> 00:01:30.320\nmost people, it's not ideal for everyone.\n\n31\n00:01:30.320 --> 00:01:33.370\nAnd you might have special needs\nthat differ from the norm so\n\n32\n00:01:33.370 --> 00:01:35.260\nwe need to understand the options\nthat are available and\n\n33\n00:01:35.260 --> 00:01:37.135\nkind of sort that out as we go forward.\n\n34\n00:01:37.135 --> 00:01:39.310\nAll right,\nlet me show you what I'm talking about cuz\n\n35\n00:01:39.310 --> 00:01:40.440\nthis gets a little confusing.\n\n36\n00:01:40.440 --> 00:01:44.590\nSo when I go into the Azure portal, which\nI've got pulled up here on my laptop, and\n\n37\n00:01:44.590 --> 00:01:45.920\nI create a virtual machine,\n\n38\n00:01:45.920 --> 00:01:49.140\nit doesn't really pester me\nmuch about storage, right?\n\n39\n00:01:49.140 --> 00:01:51.921\nSo I'm gonna go up here to New.\n\n40\n00:01:51.921 --> 00:01:52.890\nI'm gonna try and go up here to New.\n\n41\n00:01:52.890 --> 00:01:54.530\nAnd I'm gonna create\na new virtual machine.\n\n42\n00:01:54.530 --> 00:01:58.450\nAnd maybe I just want to whip up a Windows\nServer 2012 machine like we've been doing.\n\n43\n00:01:58.450 --> 00:02:00.270\nSo I'm gonna whip one of those up.\n\n44\n00:02:00.270 --> 00:02:03.820\nAnd when I go to create it I get\na couple of choices, well, eventually,\n\n45\n00:02:03.820 --> 00:02:06.600\nI get choices,\nas far as how I want it configured, and\n\n46\n00:02:06.600 --> 00:02:08.190\nwe've seen these in other episodes.\n\n47\n00:02:08.190 --> 00:02:11.910\nI've got the whole, what's my host name,\nwhat's my username, so\n\n48\n00:02:11.910 --> 00:02:16.160\nmaybe this is gonna be itprotv-demo4, and\n\n49\n00:02:16.160 --> 00:02:21.340\nI'll give it a username of dpezet, I'll\ngive it a super secure secret password.\n\n50\n00:02:21.340 --> 00:02:24.880\nAnd then I start to pick things\nlike my Pricing Tier, okay.\n\n51\n00:02:24.880 --> 00:02:28.850\nNotice as I go down here,\nOptional Configuration, Network, storage,\n\n52\n00:02:28.850 --> 00:02:30.020\ndiagnostics.\n\n53\n00:02:30.020 --> 00:02:31.690\nI don't have to configure storage.\n\n54\n00:02:31.690 --> 00:02:35.420\nI can just choose to go with the Pricing\nTier, set that, and move on, and\n\n55\n00:02:35.420 --> 00:02:37.871\nI'm done, and I don't worry\nabout storage at all, all right.\n\n56\n00:02:37.871 --> 00:02:42.260\nAnd so if I do that,\nmaybe I don't wanna do a DS1 for my tier,\n\n57\n00:02:42.260 --> 00:02:43.580\nI might choose another one.\n\n58\n00:02:43.580 --> 00:02:47.250\nWhen you pick your pricing tier,\nwhat you're gonna see\n\n59\n00:02:47.250 --> 00:02:51.580\nis that the pricing tier is what dictates\nhow much storage you get, right.\n\n60\n00:02:51.580 --> 00:02:55.110\nSo, here,\nI'm kinda looking at the recommended\n\n61\n00:02:55.110 --> 00:02:57.480\noptions they're giving me the DS1,\nDS11, DS2.\n\n62\n00:02:57.480 --> 00:03:02.370\nNotice how it's recommending DS, right.\n\n63\n00:03:02.370 --> 00:03:07.300\nD1 is a regular instance that would\nhave 1 core and 3.5 gigs of hard drive.\n\n64\n00:03:07.300 --> 00:03:11.200\nDS1 is where we have SSD for\neverything, right.\n\n65\n00:03:11.200 --> 00:03:13.090\nSo we get little variations in there.\n\n66\n00:03:13.090 --> 00:03:17.110\nWhether we have SSD or whether we have\nmagnetic disk for the operating system.\n\n67\n00:03:17.110 --> 00:03:19.710\nYou'll have temp disk which\nare almost always SSD and\n\n68\n00:03:19.710 --> 00:03:22.670\nthen you'll have other data\ndisks which can be SSD also.\n\n69\n00:03:22.670 --> 00:03:24.368\nAnd it tells us right down\nhere what we're getting.\n\n70\n00:03:24.368 --> 00:03:31.860\nI've got 7 gigs of local SSD\nwith a maximum of 3200 IOPS's.\n\n71\n00:03:31.860 --> 00:03:36.850\nThe DS series is optimized for\nperformance, for disk performance.\n\n72\n00:03:36.850 --> 00:03:41.233\nBut if I hit view all, and I start to\npick through some of the other ones that\n\n73\n00:03:41.233 --> 00:03:44.791\nare out there, right,\nLet me find the standard D's here.\n\n74\n00:03:44.791 --> 00:03:50.417\nSo if I do just a D1, a D1 is 1 core,\n3.5 gigs of memory, right,\n\n75\n00:03:50.417 --> 00:03:55.564\njust like we saw in a DS1,\n2 data disks, 2x500 max IOPS.\n\n76\n00:03:55.564 --> 00:03:56.730\nNow, what does that mean?\n\n77\n00:03:56.730 --> 00:04:01.310\nWell, what they're telling me there is,\nI can have up to two data disks, and\n\n78\n00:04:01.310 --> 00:04:05.579\neach one gets 500 input/output\noperations per second.\n\n79\n00:04:06.700 --> 00:04:10.054\nWhich is actually enough for\nmost people doing normal things.\n\n80\n00:04:10.054 --> 00:04:14.402\nBut if you stick a database on\nthere that's doing heavy reads,\n\n81\n00:04:14.402 --> 00:04:18.095\nif you're doing video encoding\nwith a lot of writes,\n\n82\n00:04:18.095 --> 00:04:21.953\nyou'll churn through that\n500 I/Os pretty quick,\n\n83\n00:04:21.953 --> 00:04:28.280\nversus when I looked at the DS up here,\nthe DS1 I had 2 data disks, 3200 IOPS.\n\n84\n00:04:28.280 --> 00:04:29.860\nThat's a lot more.\n\n85\n00:04:29.860 --> 00:04:33.960\nIt's over six times the amount of\ninput/output operations per second, so\n\n86\n00:04:33.960 --> 00:04:35.520\nI get much better disk performance.\n\n87\n00:04:35.520 --> 00:04:38.800\nSo right here is kinda the first\nthing that I'm exposed to.\n\n88\n00:04:38.800 --> 00:04:44.029\nThe other thing that I see is,\nnotice how in a DS1 I can do 2 data disks.\n\n89\n00:04:45.040 --> 00:04:49.020\nBut if I go to a DS2, I can do 4 data\ndisks, on a DS3, I can do 8 data disks.\n\n90\n00:04:49.020 --> 00:04:53.440\nThis is controlling the amount of disks\nI can have on the virtual machine.\n\n91\n00:04:53.440 --> 00:04:57.330\nAnd when I launch this,\nhow many data disks is it gonna have?\n\n92\n00:04:57.330 --> 00:04:59.180\nZero, no data disks,\n\n93\n00:04:59.180 --> 00:05:02.780\nit's gonna have an operating system\ndisk in a temporary drive, right?\n\n94\n00:05:02.780 --> 00:05:06.390\nLet me show you on this other server\nthat I spun up, this guy right here.\n\n95\n00:05:06.390 --> 00:05:10.870\nSo this is a Windows server 2012\nmachine that I spun up before the show.\n\n96\n00:05:10.870 --> 00:05:15.250\nI haven't done a single thing to it, so\nthis is just a default launch, and when it\n\n97\n00:05:15.250 --> 00:05:19.750\ncame up, even without me messing with it,\nit creates the operating system drive,\n\n98\n00:05:19.750 --> 00:05:22.040\notherwise I wouldn't have\nmuch of an operating system.\n\n99\n00:05:22.040 --> 00:05:26.110\nBut then I've got another disk here,\nTemporary Storage.\n\n100\n00:05:26.110 --> 00:05:30.760\nThe image I picked had a 127 gig operating\nsystem drive, and so there it is.\n\n101\n00:05:30.760 --> 00:05:34.460\nAnd then I've got 7 gigs\nof Temporary Storage.\n\n102\n00:05:35.660 --> 00:05:36.610\nWhat's that all about?\n\n103\n00:05:36.610 --> 00:05:40.300\nWe'll I didn't ask for that Microsoft gave\nit to you or gave it to me in this case.\n\n104\n00:05:40.300 --> 00:05:43.780\nEvery virtual machine has a little bit\nof temporary storage available to use.\n\n105\n00:05:43.780 --> 00:05:44.470\nI say a little bit,\n\n106\n00:05:44.470 --> 00:05:47.260\nit's usually a pittance compared to what\nyour operating system drive is, right?\n\n107\n00:05:47.260 --> 00:05:48.640\nJust a small amount.\n\n108\n00:05:48.640 --> 00:05:49.970\nBut it's designed to be very fast.\n\n109\n00:05:49.970 --> 00:05:54.251\nUsually this is on SSD even on\nthe regular D series, not the DS series.\n\n110\n00:05:54.251 --> 00:05:58.194\nSo we get good performance on it and\nit's used for what it's name is implying,\n\n111\n00:05:58.194 --> 00:05:59.900\nTemporary Storage.\n\n112\n00:05:59.900 --> 00:06:03.560\nAnything that you put there,\nyou shouldn't rely on, right?\n\n113\n00:06:03.560 --> 00:06:04.960\nYou should expect it go away.\n\n114\n00:06:04.960 --> 00:06:06.790\nIn fact,\nthe only thing that's on it by default,\n\n115\n00:06:06.790 --> 00:06:08.680\nnotice how I have some data on there?\n\n116\n00:06:08.680 --> 00:06:12.750\nThe only thing that's there by\ndefault is the page file, which,\n\n117\n00:06:12.750 --> 00:06:15.340\nI don't know why I bothered clicking\non that, because I'm not gonna see it.\n\n118\n00:06:15.340 --> 00:06:17.710\nIf we go to a command prompt or\nsomething, we'll see it there.\n\n119\n00:06:19.768 --> 00:06:22.160\nThat page file, so\nif I get to my D drive and\n\n120\n00:06:22.160 --> 00:06:26.380\nI do a dir /a, there's the page\nfile right there, pagefile.sys.\n\n121\n00:06:26.380 --> 00:06:29.490\nThat's what stuck on there because\n\n122\n00:06:29.490 --> 00:06:32.030\nwhat happens if we lose\nthe data in our page file?\n\n123\n00:06:32.030 --> 00:06:32.840\nWho cares?\n\n124\n00:06:32.840 --> 00:06:36.450\nWhat couldn't fit in RAM that\ngot written to the hard drive,\n\n125\n00:06:36.450 --> 00:06:39.630\nwe can lose that it's no big deal,\nyour system would be fine.\n\n126\n00:06:39.630 --> 00:06:43.638\nBut what if I was storing a database\non that D drive and then I reboot and\n\n127\n00:06:43.638 --> 00:06:45.470\nI lose it?\n\n128\n00:06:45.470 --> 00:06:47.070\nActually, I should clarify on that.\n\n129\n00:06:47.070 --> 00:06:49.370\nYou don't necessarily\nloose your data on reboot.\n\n130\n00:06:49.370 --> 00:06:51.092\nYou can put stuff in that temp drive, and\n\n131\n00:06:51.092 --> 00:06:53.735\nit'll probably still be there\nwhen you boot back up, right.\n\n132\n00:06:53.735 --> 00:06:57.843\nHere's the thing, remember in the earlier\nepisodes I talked about how Microsoft\n\n133\n00:06:57.843 --> 00:07:00.010\nbuilds out their data centers.\n\n134\n00:07:00.010 --> 00:07:03.600\nAnd how you have these racks and\nracks of servers.\n\n135\n00:07:03.600 --> 00:07:05.800\nAnd the racks are gathered together\ninto what's called a stamp.\n\n136\n00:07:05.800 --> 00:07:10.390\nAnd there's multiple stamps\nin each region or each zone.\n\n137\n00:07:10.390 --> 00:07:13.330\nAnd so if you go between\nregion to region to region or\n\n138\n00:07:13.330 --> 00:07:17.170\neven zone to zone within the same data\ncenter, you have different stamps.\n\n139\n00:07:17.170 --> 00:07:19.420\nAnd each stamp has their own storage.\n\n140\n00:07:19.420 --> 00:07:24.370\nAnd your temp drive is only existing\nwithin the stamp that your server's\n\n141\n00:07:24.370 --> 00:07:25.460\nin right now.\n\n142\n00:07:25.460 --> 00:07:30.196\nSo if you migrate your server to\nanother set of servers, right.\n\n143\n00:07:30.196 --> 00:07:33.987\nSo maybe I spun this up as DS1, and now I\nwanna bump it up to a DS2, and what that\n\n144\n00:07:33.987 --> 00:07:38.060\nhappens I might get move to another\nstamp that had better availability.\n\n145\n00:07:38.060 --> 00:07:41.510\nWhen I do that, my temp drive\nwill be empty, it'll be gone.\n\n146\n00:07:41.510 --> 00:07:43.160\nThat doesn't get transferred\nwith the server.\n\n147\n00:07:43.160 --> 00:07:46.540\nSo you should only use it for temporary\nstuff, and most people just ignore it.\n\n148\n00:07:46.540 --> 00:07:47.570\nOh, my page file goes there.\n\n149\n00:07:47.570 --> 00:07:49.460\nI'll just leave it be and that's it.\n\n150\n00:07:49.460 --> 00:07:50.160\nThat's kinda how I am.\n\n151\n00:07:50.160 --> 00:07:51.790\nI usually don't put anything in there.\n\n152\n00:07:51.790 --> 00:07:53.852\nBut you can, it's there for you to use.\n\n153\n00:07:53.852 --> 00:07:58.328\nJust know if you ever move your server, or\nif there's a failure on Microsoft's end,\n\n154\n00:07:58.328 --> 00:08:01.386\nand they repair it,\nthat your temp drive will get erased.\n\n155\n00:08:01.386 --> 00:08:04.780\nThat happens fairly, frequently.\n\n156\n00:08:04.780 --> 00:08:05.570\nNot like everyday.\n\n157\n00:08:05.570 --> 00:08:07.578\nBut once a month, every other month.\n\n158\n00:08:07.578 --> 00:08:10.250\nSomething like that, you can expect\nthat drive to just mysteriously be gone.\n\n159\n00:08:10.250 --> 00:08:11.730\nAnd it'll reappear empty.\n\n160\n00:08:11.730 --> 00:08:15.050\n>> So nothing important\ninto this drive right here.\n\n161\n00:08:15.050 --> 00:08:15.740\n>> Right.\n>> Just keep it.\n\n162\n00:08:15.740 --> 00:08:17.940\n>> Yup.\n>> Just standard files.\n\n163\n00:08:17.940 --> 00:08:19.440\n>> Yeah.\nAnd you can put things\n\n164\n00:08:19.440 --> 00:08:20.780\n>> Or put super temporary.\n\n165\n00:08:20.780 --> 00:08:23.300\n>> Yeah.\nLet's see one of Microsoft SQL.\n\n166\n00:08:23.300 --> 00:08:25.060\nSQL, the database server,\n\n167\n00:08:25.060 --> 00:08:28.480\nit has a temporary table that it uses\nwhen it's doing certain calculations.\n\n168\n00:08:28.480 --> 00:08:32.730\nIt'll put some data in there,\nyou use it and then wipe it out, okay.\n\n169\n00:08:32.730 --> 00:08:34.350\nYou can move that temporary\ntable onto that, and\n\n170\n00:08:34.350 --> 00:08:36.630\nthat'll take disk I/O\noff your other disks.\n\n171\n00:08:36.630 --> 00:08:40.680\nAnd if your system reboots, SQL's already\ndumped what's in that table, right.\n\n172\n00:08:40.680 --> 00:08:41.840\nSQL plans for that.\n\n173\n00:08:41.840 --> 00:08:45.070\nSQL expects that table to not\neven exist after a reboot.\n\n174\n00:08:45.070 --> 00:08:46.910\nAnd so it's a perfect place to put it.\n\n175\n00:08:46.910 --> 00:08:49.810\nAnd you can take DiskIO\noff of your other disks.\n\n176\n00:08:49.810 --> 00:08:52.320\nNotice when I was spinning\nup these new machines,\n\n177\n00:08:52.320 --> 00:08:56.080\nwhen I was picking over here,\nit was telling me these IOs.\n\n178\n00:08:56.080 --> 00:09:00.110\nAnd the IOs are for your data disk,\nnot your operating system disk.\n\n179\n00:09:00.110 --> 00:09:03.230\nAnd so if I'm taking stuff off my\ndata disk, that's improving my IOs.\n\n180\n00:09:03.230 --> 00:09:05.270\nYour temp disk doesn't count towards that,\nright?\n\n181\n00:09:05.270 --> 00:09:06.270\nSo it's kind of a nice thing to have.\n\n182\n00:09:07.730 --> 00:09:09.670\nSpeaking of the operating system disk.\n\n183\n00:09:09.670 --> 00:09:11.810\nLooking at this server\nhere that I spun up,\n\n184\n00:09:11.810 --> 00:09:15.650\nmy operating system disk\nis 126 gigs in size.\n\n185\n00:09:15.650 --> 00:09:18.370\nI might be tempted to\nstart putting files there.\n\n186\n00:09:18.370 --> 00:09:19.530\nWhy not just use the C drive?\n\n187\n00:09:19.530 --> 00:09:21.180\nI don't need data disks at all.\n\n188\n00:09:21.180 --> 00:09:27.060\nOkay, well the C drive is heavily tuned\nfor operating system performance.\n\n189\n00:09:27.060 --> 00:09:30.320\nNot for databases,\napplications and other things.\n\n190\n00:09:30.320 --> 00:09:32.140\nMicrosoft doesn't want\nyou to use this drive.\n\n191\n00:09:32.140 --> 00:09:36.073\nYou can, if you want, but if you ever\nhave to do a backup and a restore,\n\n192\n00:09:36.073 --> 00:09:40.545\nthis drive will actually come from the\nimage that you used to deploy it, right,\n\n193\n00:09:40.545 --> 00:09:44.010\nwhich was the Windows Server\n2012 install image.\n\n194\n00:09:44.010 --> 00:09:45.650\nWhich means I'm gonna lose the data there.\n\n195\n00:09:45.650 --> 00:09:48.600\nIf I do a backup and a restore, it's\nactually not gonna contain that data and\n\n196\n00:09:48.600 --> 00:09:49.260\nI'm gonna lose it.\n\n197\n00:09:49.260 --> 00:09:52.110\nSo again,\na place I probably shouldn't put my stuff.\n\n198\n00:09:52.110 --> 00:09:57.350\nSo when I start to spin up these servers\nmy data, needs to go into a data drive.\n\n199\n00:09:57.350 --> 00:10:01.960\nIt needs to go to a separate drive, and\nI don't have any data drives by default.\n\n200\n00:10:01.960 --> 00:10:03.810\nWe need to add them, okay.\n\n201\n00:10:03.810 --> 00:10:08.450\nSo, by default, you get one drive for\nyour operating system that's built from\n\n202\n00:10:08.450 --> 00:10:13.440\nthe image you selected, and a temporary\ndrive that's assigned to your server,\n\n203\n00:10:13.440 --> 00:10:16.660\nwhose size will vary depending\non the size of server you pick.\n\n204\n00:10:16.660 --> 00:10:20.640\nSo this is a D one, or\nmaybe a DS one, I don't remember.\n\n205\n00:10:20.640 --> 00:10:24.050\nAnd it's got eight or\nseven gigs of temporary storage.\n\n206\n00:10:24.050 --> 00:10:28.730\nBut if I'd picked a D2 or a DS2 or\nsomething higher like that, it might\n\n207\n00:10:28.730 --> 00:10:32.610\nhave 16 gigs, or 100 gigs, or whatever,\nbased on the size of server I picked.\n\n208\n00:10:32.610 --> 00:10:34.830\nThough you get more temp storage for each.\n\n209\n00:10:34.830 --> 00:10:35.920\nRight.\n\n210\n00:10:35.920 --> 00:10:39.930\nAfter that, it's up to me to add the data\ndisks to support my applications if I\n\n211\n00:10:39.930 --> 00:10:40.730\neven need them.\n\n212\n00:10:40.730 --> 00:10:42.240\nMaybe I don't need them.\n\n213\n00:10:42.240 --> 00:10:44.060\nMaybe this thing spins up and\nit's got a script.\n\n214\n00:10:44.060 --> 00:10:46.360\nIt just loads the website and\nthat's all it does.\n\n215\n00:10:46.360 --> 00:10:49.760\nI might not need the data disks, but\nif I'm going to be loading applications,\n\n216\n00:10:49.760 --> 00:10:52.280\nstoring data,\nI need to add at least one data disk.\n\n217\n00:10:52.280 --> 00:10:54.500\nAnd fortunately,\nthey make that pretty easy.\n\n218\n00:10:54.500 --> 00:10:57.020\nWhen we do the install,\nwhen we create the image in the beginning.\n\n219\n00:10:58.390 --> 00:11:00.490\nIt doesn't really give me that option.\n\n220\n00:11:00.490 --> 00:11:05.330\nAnd then down here, as I go through my\nselection, I can pick what location\n\n221\n00:11:05.330 --> 00:11:08.470\nit's going to go in, which is kind of\nimportant, we'll see tha tin a second.\n\n222\n00:11:08.470 --> 00:11:11.480\nThen I can do those optional\nconfigurations here,\n\n223\n00:11:11.480 --> 00:11:15.040\nwhere I do the optional\nstorage configuration.\n\n224\n00:11:15.040 --> 00:11:17.910\nIf we look at what's over here for\nthe optional stuff,\n\n225\n00:11:17.910 --> 00:11:21.280\nyou'll start to see all sorts of\nother things kind of in the mix.\n\n226\n00:11:21.280 --> 00:11:24.370\nYou've got your OS settings you can\npick from, your availability set,\n\n227\n00:11:24.370 --> 00:11:29.080\nyour network configuration, the storage\naccount that's gonna store your files, and\n\n228\n00:11:29.080 --> 00:11:31.160\nthat's kind of important too.\n\n229\n00:11:31.160 --> 00:11:35.000\nWhen we start creating drives,\nthey go into a storage account.\n\n230\n00:11:35.000 --> 00:11:37.980\nAnd by default,\nAzure's just kind of handling that for us,\n\n231\n00:11:37.980 --> 00:11:42.460\njust sticking in whatever our last storage\naccount was and we might not want that.\n\n232\n00:11:42.460 --> 00:11:44.510\nWe might want it to go\nto a particular place,\n\n233\n00:11:44.510 --> 00:11:48.680\nbecause storage accounts are tied to a\nregion just like the virtual machines are.\n\n234\n00:11:48.680 --> 00:11:53.550\nAnd the storage accounts are gonna\ndetermine how your operating system,\n\n235\n00:11:53.550 --> 00:11:56.330\ndrives and other data is being replicated,\nall right?\n\n236\n00:11:56.330 --> 00:12:00.820\nWhen you put data in an Azure drive,\nMicrosoft's making copies of it.\n\n237\n00:12:00.820 --> 00:12:02.920\nIf you pick the absolute cheapest,\n\n238\n00:12:02.920 --> 00:12:06.220\nlowest end option,\nyour data's being replicated three times.\n\n239\n00:12:06.220 --> 00:12:08.880\nMicrosoft's storing three\ncopies of your data, right?\n\n240\n00:12:08.880 --> 00:12:11.450\nIf there is a stamp in your region,\n\n241\n00:12:11.450 --> 00:12:13.595\nthat stamp is gonna have at\nleast one copy of your data.\n\n242\n00:12:13.595 --> 00:12:17.675\nAnd then another stamp in that region, is\ngonna have at least one copy of your data,\n\n243\n00:12:17.675 --> 00:12:19.185\nand then one of those stamps\nwill have two copies.\n\n244\n00:12:19.185 --> 00:12:21.905\nSo usually it's the stamp\nyou're in will have two copies.\n\n245\n00:12:21.905 --> 00:12:25.415\nAnd then another stamp will have one copy,\nso that you're redundant within that data\n\n246\n00:12:25.415 --> 00:12:31.205\ncenter, right, within that particular\navailability zone, or availability group.\n\n247\n00:12:31.205 --> 00:12:35.530\nNow If you choose some of\nthe higher cost options,\n\n248\n00:12:35.530 --> 00:12:37.290\nthey'll maintain even more copies.\n\n249\n00:12:37.290 --> 00:12:39.210\nYou could have six copies\nin some scenarios, or\n\n250\n00:12:39.210 --> 00:12:40.750\neven more than you can spin up.\n\n251\n00:12:40.750 --> 00:12:43.380\nAnd your data can be\nreplicated all over the world.\n\n252\n00:12:43.380 --> 00:12:46.150\nThat is your storage account\nthat determines all that.\n\n253\n00:12:46.150 --> 00:12:48.050\nso I'm gonna show you guys storage\naccounts a little bit later.\n\n254\n00:12:48.050 --> 00:12:50.620\nWe'll see those and see some of\nthe different replication models.\n\n255\n00:12:50.620 --> 00:12:52.480\nBut those are all additional\noptions we can choose.\n\n256\n00:12:52.480 --> 00:12:55.120\nNow let's say you spun up a server and\nyou didn't pick any of that.\n\n257\n00:12:55.120 --> 00:12:56.780\nYou just spun it up like I did.\n\n258\n00:12:56.780 --> 00:12:58.110\nWell you can always add\nthem after the fact.\n\n259\n00:12:58.110 --> 00:12:59.720\nLet me show you how that works.\n\n260\n00:12:59.720 --> 00:13:03.550\nSo if I go back here, which I've kind of\nwandered in a little over my head here.\n\n261\n00:13:03.550 --> 00:13:06.036\nLet's get back.\n[LAUGH] It's easy to get lost in all\n\n262\n00:13:06.036 --> 00:13:08.186\nthe screens here inside of the new portal.\n\n263\n00:13:08.186 --> 00:13:10.370\nIf I go down to my virtual machines.\n\n264\n00:13:10.370 --> 00:13:13.810\nAnd I take itprotv demo1,\nthis server right here, right.\n\n265\n00:13:13.810 --> 00:13:16.570\nThat's the server that I'm logged in\nover here, at least I think it is.\n\n266\n00:13:16.570 --> 00:13:19.390\nYeah, they give you that nice little\nwallpaper that tells you what\n\n267\n00:13:19.390 --> 00:13:20.080\nserver you're logged in.\n\n268\n00:13:20.080 --> 00:13:21.320\n>> That's really nice of them.\n\n269\n00:13:21.320 --> 00:13:22.120\n>> Yeah it is.\n\n270\n00:13:22.120 --> 00:13:25.990\nSo I'm logged in to itprotv demo1 here and\nif I go, let me go back to that.\n\n271\n00:13:25.990 --> 00:13:28.480\nI'm gonna give everybody motion\nsickness flipping between machines.\n\n272\n00:13:28.480 --> 00:13:31.870\nIf I go back to this system here,\nlet's go into my Disk Manager,\n\n273\n00:13:31.870 --> 00:13:36.540\nmy Computer Management screen, and\nwe'll see the disks that I have.\n\n274\n00:13:36.540 --> 00:13:40.750\nI expect to see an Operating System Disk,\nand I expect to see that Temporary Disk,\n\n275\n00:13:40.750 --> 00:13:43.480\nwhich I don't wanna really mess with for\nthe most part.\n\n276\n00:13:43.480 --> 00:13:45.340\nBut sure enough, that's what I see, right?\n\n277\n00:13:45.340 --> 00:13:48.470\nI've got Disk 0, Disk 1, and\nthat's what I've got, all right?\n\n278\n00:13:48.470 --> 00:13:51.450\nI can proceed to start adding data disks,\nand\n\n279\n00:13:51.450 --> 00:13:53.000\nadding them on here as additional disks.\n\n280\n00:13:53.000 --> 00:13:55.030\nAnd the cool part is I don't even have\nto take the server offline to do it.\n\n281\n00:13:55.030 --> 00:13:56.180\nI can do it while it's online.\n\n282\n00:13:56.180 --> 00:13:58.800\nI can hot add and\nthrow these disks in there.\n\n283\n00:13:58.800 --> 00:14:01.070\nAnd from the GUI it's\nactually pretty easy.\n\n284\n00:14:01.070 --> 00:14:04.990\nOver here, all I have to do is pick\nthe virtual machine, like I just did.\n\n285\n00:14:04.990 --> 00:14:06.110\nAnd in the virtual machine,\n\n286\n00:14:06.110 --> 00:14:10.640\nover here on the right side,\nwe've got somewhere in here, disks.\n\n287\n00:14:10.640 --> 00:14:11.760\nDid I scroll, I scrolled too far.\n\n288\n00:14:11.760 --> 00:14:13.140\nThere it is, disks.\n\n289\n00:14:13.140 --> 00:14:16.070\nAnd I can go into disks and\nI'll see the disks that I have.\n\n290\n00:14:16.070 --> 00:14:18.380\nThere's the operating system\ndisk that I can't mess with.\n\n291\n00:14:18.380 --> 00:14:21.320\nAnd then there's the temp\ndisk that doesn't show up,\n\n292\n00:14:21.320 --> 00:14:23.080\ncuz I can't really mess with that either.\n\n293\n00:14:23.080 --> 00:14:28.880\nAnd so from here I can attach a new disk,\nor I can attach an existing disk.\n\n294\n00:14:28.880 --> 00:14:33.570\nIf I've uploaded a VHD, or if I'm\ndetaching a disk from one system and\n\n295\n00:14:33.570 --> 00:14:36.490\nthen attaching it to this one, then I\nmight already have an existing disk.\n\n296\n00:14:36.490 --> 00:14:41.320\nBut I can choose to attach a new one,\nand we can add a data disk to it.\n\n297\n00:14:41.320 --> 00:14:42.795\nSo I'm gonna add a data disk, and\n\n298\n00:14:42.795 --> 00:14:45.063\nI'm gonna pick from the sizes\nthat are available,\n\n299\n00:14:45.063 --> 00:14:49.040\nand you'll see from the PowerShell,\nyou can be very specific for the sizes.\n\n300\n00:14:49.040 --> 00:14:52.720\nHere through the web UI,\nI actually only get a couple of choices.\n\n301\n00:14:52.720 --> 00:14:58.030\nYou'll see I've got 128 gigs, 512 gigs,\nand 1023 gigs, basically a terabyte.\n\n302\n00:14:59.260 --> 00:15:01.880\nNow, notice the numbering\nthere is a little weird.\n\n303\n00:15:01.880 --> 00:15:06.890\n128 gigs,\na lot of us see those 127 gig drives\n\n304\n00:15:06.890 --> 00:15:11.190\nthat like VirtualBox or whatever creates\nby default and Hyper-V creates by default.\n\n305\n00:15:11.190 --> 00:15:12.200\nSo, that where that one comes from.\n\n306\n00:15:12.200 --> 00:15:15.530\n512, that's half of a terabyte.\n\n307\n00:15:15.530 --> 00:15:20.600\nBut a terabyte is actually 1024 gigs,\nbut 1023 is the max.\n\n308\n00:15:20.600 --> 00:15:24.928\nAnd that's because there's a little bit of\noverhead created with the storage account,\n\n309\n00:15:24.928 --> 00:15:25.780\nand so they eat that up.\n\n310\n00:15:25.780 --> 00:15:28.620\nAnd it's part of that whole\nredundancy tracking thing, so\n\n311\n00:15:28.620 --> 00:15:30.100\nyou'll lose a little bit of it there.\n\n312\n00:15:30.100 --> 00:15:32.250\nBut a terrabyte space for\nthe biggest that I an add.\n\n313\n00:15:32.250 --> 00:15:33.660\nSo if I wanna stick that on there, I can.\n\n314\n00:15:33.660 --> 00:15:34.940\nOr I'm just gonna do 500.\n\n315\n00:15:34.940 --> 00:15:35.730\nI'm not gonna be greedy.\n\n316\n00:15:37.780 --> 00:15:41.170\nNow when you add a disk,\nit's gonna give it a disk name, right.\n\n317\n00:15:41.170 --> 00:15:42.870\nAnd the name is kinda autogenerated.\n\n318\n00:15:42.870 --> 00:15:45.980\nSo I've got itprotv-demo1,\nthat's my server.\n\n319\n00:15:45.980 --> 00:15:48.685\nAnd then I've got the date right?\n\n320\n00:15:48.685 --> 00:15:51.216\nSo this is December 2nd, 2015 and\n\n321\n00:15:51.216 --> 00:15:55.596\nthen the time kind of attached\nto it 03:07PM and 58 seconds.\n\n322\n00:15:55.596 --> 00:16:00.477\nSo not necessarily the thing I'm\ngonna remember the most, and so\n\n323\n00:16:00.477 --> 00:16:04.851\nI'm gonna call this one\nitprotv-demo1-datadisk1.\n\n324\n00:16:04.851 --> 00:16:08.640\nSo that way I can kinda remember what the\nheck this thing is and it'll be 500 Gigs.\n\n325\n00:16:08.640 --> 00:16:11.350\nNow, the next option I've\ngot here is host caching.\n\n326\n00:16:11.350 --> 00:16:13.310\nThere's three caching modes for the disk.\n\n327\n00:16:14.540 --> 00:16:15.640\nAnd what is caching?\n\n328\n00:16:15.640 --> 00:16:16.490\nWell, when you read and\n\n329\n00:16:16.490 --> 00:16:19.270\nwrite to a disk, the disk is typically\nthe slowest part of your server.\n\n330\n00:16:19.270 --> 00:16:24.080\nYour CPU, your RAM, those things\nare screaming along, disk is slower.\n\n331\n00:16:24.080 --> 00:16:26.670\nWe measure RAM access in nanoseconds.\n\n332\n00:16:26.670 --> 00:16:28.620\nWe measure disk access in milliseconds.\n\n333\n00:16:28.620 --> 00:16:30.610\nSo it's a full order of magnitude off.\n\n334\n00:16:30.610 --> 00:16:34.690\nWell, I can cache disk access to RAM.\n\n335\n00:16:34.690 --> 00:16:37.041\nAnd that way when I go to\nstart reading from the disk,\n\n336\n00:16:37.041 --> 00:16:39.285\nI can take advantage of RAM\nto be able to see that and\n\n337\n00:16:39.285 --> 00:16:42.599\nmaybe access something a little faster\nthan actually going to the disk and\n\n338\n00:16:42.599 --> 00:16:46.253\nI say RAM it's actually kind of in the\nRAID controllers and stuff in the backend.\n\n339\n00:16:46.253 --> 00:16:49.020\nSo, Microsoft lets us configure that.\n\n340\n00:16:51.770 --> 00:16:52.431\nIf I wanna do caching for reads or\n\n341\n00:16:52.431 --> 00:16:56.115\nif I wanna do caching for reads and writes\nor if I don't wanna do caching at all.\n\n342\n00:16:56.115 --> 00:16:59.700\nNow you might ask yourself,\nwhy wouldn't I want to do caching?\n\n343\n00:16:59.700 --> 00:17:02.110\nRead only was the default,\nlet's cache for the reads.\n\n344\n00:17:02.110 --> 00:17:05.230\nAnd that's because writes, you're not\nnormally writing the same data over and\n\n345\n00:17:05.230 --> 00:17:08.890\nover and over again, so there's not\nusually a reason to cache those.\n\n346\n00:17:08.890 --> 00:17:12.710\nReads, it's pretty common for you to read\nthe same data over and over again, so\n\n347\n00:17:12.710 --> 00:17:15.230\nthat makes sense, and so\nMicrosoft turns that one on by default.\n\n348\n00:17:15.230 --> 00:17:17.080\nWhy wouldn't I want that?\n\n349\n00:17:17.080 --> 00:17:19.830\nWhat if my data changes a lot?\n\n350\n00:17:19.830 --> 00:17:22.530\nWhat if this is shared data somehow and\n\n351\n00:17:22.530 --> 00:17:26.890\nI wanna make sure that I always\nconsistently get the correct data?\n\n352\n00:17:26.890 --> 00:17:28.546\nWell, then I might want to turn this off.\n\n353\n00:17:28.546 --> 00:17:31.980\nAnd an example of that would be SQL\ndatabases where they do their own caching,\n\n354\n00:17:31.980 --> 00:17:33.100\nthey do their own caching in RAM.\n\n355\n00:17:33.100 --> 00:17:35.090\nI don't want the disk doing caching for\nme.\n\n356\n00:17:35.090 --> 00:17:38.220\nI wanna make sure that SQL always\ngets the latest and greatest.\n\n357\n00:17:38.220 --> 00:17:39.950\nSo-\n>> I'm seeing a real trend here Don,\n\n358\n00:17:39.950 --> 00:17:43.750\nwith the disk IO whether we're reading,\nor we're writing, or doing something with\n\n359\n00:17:43.750 --> 00:17:48.140\nthe disk for the performance, seems to\nbe trending towards those databases.\n\n360\n00:17:48.140 --> 00:17:49.930\n>> Yeah, yeah it really is.\n\n361\n00:17:49.930 --> 00:17:53.750\nAnd remember that with Azure, we actually\nhave the hosted SQL service that we can\n\n362\n00:17:53.750 --> 00:17:55.520\nuse, where they take care of everything.\n\n363\n00:17:55.520 --> 00:17:59.470\nBut that didn't exist in the early days\nand so in the beginning days of Azure,\n\n364\n00:17:59.470 --> 00:18:01.570\nif you wanted a SQL server you had\nto spin up a Windows server and\n\n365\n00:18:01.570 --> 00:18:04.760\nthen you installed SQL on it and so\na lot of this tuning related to that, but\n\n366\n00:18:04.760 --> 00:18:05.840\nit's not just databases,\n\n367\n00:18:05.840 --> 00:18:10.870\nyou might have scripts, some kind of\nvideo encoding, things like that.\n\n368\n00:18:10.870 --> 00:18:13.209\nThey all kind of have\nthe same benefit from this.\n\n369\n00:18:14.550 --> 00:18:16.460\nWell, I'm gonna leave mine as read only,\nand\n\n370\n00:18:16.460 --> 00:18:18.830\nthen I'm gonna go ahead and\nhit OK to add that one on there.\n\n371\n00:18:18.830 --> 00:18:21.690\nAnd that's gonna create my first\ndata disk for this instance.\n\n372\n00:18:21.690 --> 00:18:24.890\nNow I could start creating more\ndata disks if I need them, right?\n\n373\n00:18:24.890 --> 00:18:27.960\nI probably don't need them, but I can.\n\n374\n00:18:27.960 --> 00:18:29.940\nBut I've got this one made up now so\nI've got one disk.\n\n375\n00:18:29.940 --> 00:18:33.180\nI'm gonna go ahead and attach another\nnew one just so that I can do it.\n\n376\n00:18:33.180 --> 00:18:39.720\nAnd It's grayed out on me right now, and\nthere can be one of two reasons for that.\n\n377\n00:18:39.720 --> 00:18:41.150\nSo one, I may not have waited long enough.\n\n378\n00:18:41.150 --> 00:18:43.600\nSometimes you have to refresh\nthe screen and do it, or\n\n379\n00:18:43.600 --> 00:18:47.540\ntwo, I might have exceeded the amount\nof disks that this instance can have,\n\n380\n00:18:47.540 --> 00:18:48.970\nand for\nmine I just didn't wait long enough.\n\n381\n00:18:48.970 --> 00:18:52.700\nSee there, it just turned back on so\nI've got that option now.\n\n382\n00:18:52.700 --> 00:18:57.280\nBut each instance does have a limit to the\namount of data disks that you can have.\n\n383\n00:18:57.280 --> 00:18:59.420\nRemember, when I was creating that\nVM a second ago, we saw that.\n\n384\n00:18:59.420 --> 00:19:02.020\nIf I chose DS1 I could\nonly have two data disks.\n\n385\n00:19:02.020 --> 00:19:04.860\nBut if went up to some of the higher\nones I could have eight data disks or\n\n386\n00:19:04.860 --> 00:19:05.470\neven more.\n\n387\n00:19:05.470 --> 00:19:07.340\nSome of them support 64 data disks.\n\n388\n00:19:07.340 --> 00:19:08.450\nYou have a ton.\n\n389\n00:19:08.450 --> 00:19:11.240\nIf you go to the G5s or whatever,\nthey have a huge amount.\n\n390\n00:19:11.240 --> 00:19:14.190\n>> Would that be a practical solution for\nsomething like a SAN or\n\n391\n00:19:14.190 --> 00:19:19.590\na NAS where you want storage somewhere\na large array of storage devices,\n\n392\n00:19:19.590 --> 00:19:22.680\nbut not have to work with all the high\nSCSI stuff and things like that.\n\n393\n00:19:22.680 --> 00:19:26.730\n>> You know, there's two real reasons for\ndoing a lot of data disks and\n\n394\n00:19:26.730 --> 00:19:31.140\nthey're both not gonna seem intuitive,\nthey're gonna seem counter-intuitive.\n\n395\n00:19:31.140 --> 00:19:34.230\nThe first reason we might want\na lot of data disks is that\n\n396\n00:19:34.230 --> 00:19:38.070\nMicrosoft has a maximum disk size for\nus, it's one terabyte.\n\n397\n00:19:38.070 --> 00:19:41.850\nSo if I want more than one terrabyte,\nwhat can I do?\n\n398\n00:19:43.120 --> 00:19:44.550\nI gotta add more data disks.\n\n399\n00:19:44.550 --> 00:19:45.838\nYou can add more data disks and\n\n400\n00:19:45.838 --> 00:19:48.380\nthen you can pull them together to\ncreate larger disks if you want.\n\n401\n00:19:48.380 --> 00:19:51.530\nSo if you want a five terrabyte drive,\n\n402\n00:19:51.530 --> 00:19:56.740\nI can have five terrabyte,\nfive one terrabyte disks and\n\n403\n00:19:56.740 --> 00:20:00.180\nthen bond them together to create a five\nterrabyte drive so that's one reason.\n\n404\n00:20:00.180 --> 00:20:04.140\nYou might ask yourself, wait a minute, why\ndoes Microsoft limit me to one terabyte?\n\n405\n00:20:04.140 --> 00:20:07.140\nEven stinking Windows Vista\ncan do more than one terabyte.\n\n406\n00:20:07.140 --> 00:20:08.420\nWhy am I held to that?\n\n407\n00:20:08.420 --> 00:20:10.730\nWell, they do it because of the I/Os.\n\n408\n00:20:10.730 --> 00:20:11.330\nRight?\nRemember,\n\n409\n00:20:11.330 --> 00:20:13.420\nyou have a limited amount\nof I/Os per second.\n\n410\n00:20:13.420 --> 00:20:16.990\nOn a normal one here,\nI would have 500 I/Os per second.\n\n411\n00:20:16.990 --> 00:20:19.020\nWhat if I want more than 500?\n\n412\n00:20:19.020 --> 00:20:21.390\nWell I can go up to the DS series and\nI'd get 3200.\n\n413\n00:20:21.390 --> 00:20:24.800\nWhat if I want more than 3200 though?\n\n414\n00:20:24.800 --> 00:20:28.630\nWhat you can do is you can\nadd more than one disk and\n\n415\n00:20:28.630 --> 00:20:32.567\nthen bond them together and\nthe IOs add together.\n\n416\n00:20:32.567 --> 00:20:36.187\nSo if have 500 IOs for one disk and\n500 IOs for another and\n\n417\n00:20:36.187 --> 00:20:39.230\nI bond them together now\nI have a thousand IOs.\n\n418\n00:20:39.230 --> 00:20:40.700\nThousand IOs per second.\n\n419\n00:20:40.700 --> 00:20:44.800\nAnd so I can create four one\nterabyte drives, I'd have\n\n420\n00:20:44.800 --> 00:20:49.260\nfour terabytes of storage, and I would\nhave 2,000 I/Os per second on that disk.\n\n421\n00:20:49.260 --> 00:20:50.370\nSo it's a way to get around that.\n\n422\n00:20:50.370 --> 00:20:53.620\nSo one, it lets us create larger disks,\nand two,\n\n423\n00:20:53.620 --> 00:20:55.550\nit lets us increase\nthe amount of I/Os we get.\n\n424\n00:20:55.550 --> 00:20:56.880\nSo that's why that limit is there.\n\n425\n00:20:57.910 --> 00:21:01.390\nAll right, I gave you a long answer for\na short question, but that's basically it.\n\n426\n00:21:01.390 --> 00:21:02.840\nSo I'm gonna attach one more disk,\n\n427\n00:21:02.840 --> 00:21:04.810\nwhich I should've done while I was\nrambling on there but I didn't.\n\n428\n00:21:04.810 --> 00:21:09.429\nSo, let me do itprotv -demo1 -datadisk2.\n\n429\n00:21:09.429 --> 00:21:13.390\nAnd we'll do another 500 gig with read\nonly caching and we'll spin that one up.\n\n430\n00:21:14.600 --> 00:21:15.760\nSo I just added two disks.\n\n431\n00:21:15.760 --> 00:21:19.990\nNow, the whole time I was doing that\nI'm still logged into that server,\n\n432\n00:21:19.990 --> 00:21:21.980\nthat server's on,\nusers could be in it and working.\n\n433\n00:21:21.980 --> 00:21:26.010\nAnd in fact, I'm remoted into it\nback here and I didn't even refresh.\n\n434\n00:21:26.010 --> 00:21:27.720\nThe first disk is already showing up.\n\n435\n00:21:27.720 --> 00:21:31.910\nHere's disk two showing up in my\nsystem and if I wait long enough,\n\n436\n00:21:31.910 --> 00:21:34.560\ndisk three will show up here in a moment.\n\n437\n00:21:34.560 --> 00:21:36.460\nAnd they show up as uninitialized.\n\n438\n00:21:36.460 --> 00:21:39.670\nSo I'm gonna have initialize it, I'm gonna\nhave to format it before I can use it and\n\n439\n00:21:39.670 --> 00:21:44.340\nstart to get that stuff set up but once I\ndo, then I'll have access to this disk.\n\n440\n00:21:44.340 --> 00:21:45.260\nAnd oh, there's the other one.\n\n441\n00:21:45.260 --> 00:21:46.050\nJust kinda came in.\n\n442\n00:21:46.050 --> 00:21:47.380\nAnd so it popped in.\n\n443\n00:21:47.380 --> 00:21:50.380\nThis is all happening just live,\nwhile the server's up.\n\n444\n00:21:50.380 --> 00:21:53.390\nIt's like we plugged in a disk,\nit's a hot add and\n\n445\n00:21:53.390 --> 00:21:56.620\nyou can do a hot remove also,\nif we go an detach it and take it off.\n\n446\n00:21:56.620 --> 00:22:00.130\nThat's gonna happen here, it'll just snap\nright off and that'll be the end of it.\n\n447\n00:22:00.130 --> 00:22:02.430\nOkay, so\nI see my operating system drive here.\n\n448\n00:22:02.430 --> 00:22:04.640\nI see my temporary disk here, and\n\n449\n00:22:04.640 --> 00:22:07.860\nI see the new what Microsoft\ncalls the data disks, right?\n\n450\n00:22:07.860 --> 00:22:09.690\nThat's where I'm supposed to put my data,\nand\n\n451\n00:22:09.690 --> 00:22:12.450\nthis is also what we\ncall persistent storage.\n\n452\n00:22:12.450 --> 00:22:14.610\nTemporary storage,\nwe can lose that, right?\n\n453\n00:22:14.610 --> 00:22:15.480\nI already talked about it.\n\n454\n00:22:15.480 --> 00:22:18.390\nIf our server has an underlying failure,\nif we get moved to another stamp,\n\n455\n00:22:18.390 --> 00:22:20.200\nwe lose our temporary storage.\n\n456\n00:22:20.200 --> 00:22:23.180\nBut persistent storage, well it persists.\n\n457\n00:22:23.180 --> 00:22:25.020\nI guess this is where that name came from.\n\n458\n00:22:25.020 --> 00:22:28.100\nSo it's going to follow\nus along in our journey\n\n459\n00:22:28.100 --> 00:22:32.090\nas we move around the other stamps as we\nget sent from one data center to another.\n\n460\n00:22:32.090 --> 00:22:35.530\nThis data gets preserved and it sticks\nwith us and that's what's important.\n\n461\n00:22:35.530 --> 00:22:37.510\nThese are what we need to use.\n\n462\n00:22:37.510 --> 00:22:40.080\nNow something to think about.\n\n463\n00:22:40.080 --> 00:22:44.230\nWhen we deal with storage inside of Azure,\nwe pay for what we use.\n\n464\n00:22:44.230 --> 00:22:44.730\nRight?\n\n465\n00:22:44.730 --> 00:22:47.770\nSo if use 5 gigs of storage,\nI pay for 5 gigs.\n\n466\n00:22:47.770 --> 00:22:50.200\nIf I use 50 gigs of storage,\nI pay for 50 gigs.\n\n467\n00:22:50.200 --> 00:22:54.000\nWell here I just provided for\na 500 gig drive.\n\n468\n00:22:54.000 --> 00:22:56.410\nSo am I not paying for 500 gigs?\n\n469\n00:22:56.410 --> 00:22:57.360\nWell, actually, you're not.\n\n470\n00:22:57.360 --> 00:22:59.700\nIt's gonna be an interesting thing\nthat goes on behind the scenes here.\n\n471\n00:22:59.700 --> 00:23:03.900\nIn Hyper V, you have dynamic disks,\nand you have fixed disks.\n\n472\n00:23:03.900 --> 00:23:04.980\nWith a fixed disk,\n\n473\n00:23:04.980 --> 00:23:10.490\nif I set it on a 500 gig disk, it sets\nout 500 gigs from that very moment.\n\n474\n00:23:10.490 --> 00:23:13.550\nIf I do a dynamic disk,\nwhen I create a 500 gig disk,\n\n475\n00:23:13.550 --> 00:23:15.620\nit actually creates a very small file.\n\n476\n00:23:15.620 --> 00:23:18.340\nAnd I as copy data into it,\nit starts to grow and grow and\n\n477\n00:23:18.340 --> 00:23:19.960\ngrow to reflect the amount\nof data that's in there.\n\n478\n00:23:19.960 --> 00:23:23.480\nNow, that's cool from\na money saving perspective.\n\n479\n00:23:23.480 --> 00:23:26.350\nIt's not so\ncool from a performance perspective.\n\n480\n00:23:26.350 --> 00:23:29.600\nAs a dynamic disk grows,\nit hurts your disk I/O.\n\n481\n00:23:29.600 --> 00:23:33.950\nAnd Microsoft wants to guarantee a certain\nlevel of service with disk I/O, and so\n\n482\n00:23:33.950 --> 00:23:35.020\nthey don't use dynamic discs.\n\n483\n00:23:35.020 --> 00:23:37.250\nThey only use fixed discs.\n\n484\n00:23:37.250 --> 00:23:39.910\nBut at the same time,\nthey don't want you to have to pay for\n\n485\n00:23:39.910 --> 00:23:41.300\nstorage you're not using.\n\n486\n00:23:41.300 --> 00:23:43.070\nAnd so when they provision this disk,\n\n487\n00:23:43.070 --> 00:23:46.380\non the back end it's something\nspecial called a sparse disk.\n\n488\n00:23:46.380 --> 00:23:50.601\nAnd a sparse disk is where it lays out\nthe 500 gigs, it knows it's that size,\n\n489\n00:23:50.601 --> 00:23:52.183\nit's kinda got it reserved.\n\n490\n00:23:52.183 --> 00:23:55.641\nBut you only get billed for\nthe space that you're actually using.\n\n491\n00:23:55.641 --> 00:24:00.409\nSo right now, I just added these two 500\ngig disks But I haven't partitioned them,\n\n492\n00:24:00.409 --> 00:24:02.051\nthey've got no data on them.\n\n493\n00:24:02.051 --> 00:24:04.220\nI'm actually not paying\nanything extra right now.\n\n494\n00:24:04.220 --> 00:24:04.990\nNot a single dime.\n\n495\n00:24:04.990 --> 00:24:07.300\nBecause these aren't actually being used.\n\n496\n00:24:07.300 --> 00:24:10.150\nI need to initialize them, and\nthen I can start to use them.\n\n497\n00:24:10.150 --> 00:24:13.070\nNow, the reason I bring all this\nup is that when I initialize them,\n\n498\n00:24:13.070 --> 00:24:17.620\nhere it's gonna go and initialize the\ndisks, and I can pick MBR, GPT, whatever.\n\n499\n00:24:17.620 --> 00:24:21.530\nThey're gonna initialize, and that's\ngonna drop a partition table on them.\n\n500\n00:24:21.530 --> 00:24:24.870\nAnd even though that partition table is\nempty it does take a little space, so\n\n501\n00:24:24.870 --> 00:24:28.910\nnow I'm paying for a solid,\nprobably five or six megabytes of storage.\n\n502\n00:24:28.910 --> 00:24:32.310\nWhich is negligible, it probably wouldn't\neven make it on your bill, right.\n\n503\n00:24:32.310 --> 00:24:34.380\nAnd then I can start to\ncreate some partitions.\n\n504\n00:24:34.380 --> 00:24:38.920\nAnd so I'll do a new simple volume on this\none, and we'll get that whipped up and\n\n505\n00:24:38.920 --> 00:24:40.600\nI'll just do a 500 gig partition.\n\n506\n00:24:40.600 --> 00:24:44.660\nI'm going to assign a drive letter E,\nand now I can give it a name right.\n\n507\n00:24:44.660 --> 00:24:49.230\nSo I'll call this one Data Disk 1 and\nI can perform a quick format.\n\n508\n00:24:49.230 --> 00:24:51.870\nAll right, so this is where\nthings get a little dicey for\n\n509\n00:24:51.870 --> 00:24:53.980\nus because of that perform\na quick format option.\n\n510\n00:24:53.980 --> 00:24:55.415\nAll right.\nIf I do a quick format it's\n\n511\n00:24:55.415 --> 00:24:57.208\ngonna format that whole drive, right?\n\n512\n00:24:57.208 --> 00:24:58.490\nBut it's gonna do it quickly,\n\n513\n00:24:58.490 --> 00:25:01.600\nand it does it quickly by not\nactually writing to the whole drive.\n\n514\n00:25:01.600 --> 00:25:04.170\nIt only creates the the partition\ntable at the beginning to make\n\n515\n00:25:04.170 --> 00:25:05.100\nsure that it's erased.\n\n516\n00:25:05.100 --> 00:25:06.220\nThat's what you want.\n\n517\n00:25:06.220 --> 00:25:08.420\nOkay, it's going to leave\nthe rest of the drive alone and\n\n518\n00:25:08.420 --> 00:25:10.530\nnow you're only going to pay\nas you fill the disk up.\n\n519\n00:25:10.530 --> 00:25:14.640\nYou'll get the performance of a fixed\ndisk at the cost of a dynamic disk.\n\n520\n00:25:14.640 --> 00:25:16.480\nYou get all the benefits, right?\n\n521\n00:25:16.480 --> 00:25:17.800\nIf you do a quick format.\n\n522\n00:25:17.800 --> 00:25:22.980\nIf I uncheck that and I do a long format,\nIt's gonna write a zero to every sector.\n\n523\n00:25:22.980 --> 00:25:24.140\nNow I'm using the whole disk.\n\n524\n00:25:24.140 --> 00:25:27.900\nAnd now I'm paying for 500 gigs even\nif I'm not using it, all right?\n\n525\n00:25:27.900 --> 00:25:29.860\nSo it's important when you\npartition this stuff out,\n\n526\n00:25:29.860 --> 00:25:32.220\ndon't turn off the quick format.\n\n527\n00:25:32.220 --> 00:25:33.920\nWe don't normally do that, anyway, right?\n\n528\n00:25:33.920 --> 00:25:35.100\n>> There's no real reason, right Don?\n\n529\n00:25:35.100 --> 00:25:38.600\nIf this is a new disk, it doesn't have any\ndata that you need to overwrite anyway,\n\n530\n00:25:38.600 --> 00:25:40.500\nso, the quick format's\nthe way to go on it.\n\n531\n00:25:40.500 --> 00:25:43.990\nI don't know about you but\nI hate sitting there waiting for\n\n532\n00:25:43.990 --> 00:25:46.960\na 500 gigabyte drive to format.\n\n533\n00:25:46.960 --> 00:25:47.980\nThat's just not gonna happen.\n\n534\n00:25:47.980 --> 00:25:50.830\n>> So,\nfunny story I wanna add on to this, is I\n\n535\n00:25:50.830 --> 00:25:54.120\nmade a comment like that on one of our\nother shows, and I had a viewer write in.\n\n536\n00:25:54.120 --> 00:25:56.660\nAnd they told me something really\nimportant, they said, you know,\n\n537\n00:25:56.660 --> 00:25:59.620\nDon, when Microsoft gives\nyou storage in Azure, and\n\n538\n00:25:59.620 --> 00:26:02.490\nit's the same with Amazon and\nRackspace and all the other guys.\n\n539\n00:26:02.490 --> 00:26:05.710\nHe said, you're probably not\nthe first person to get that storage.\n\n540\n00:26:05.710 --> 00:26:07.750\nSomebody else may have had\nthat storage before and\n\n541\n00:26:07.750 --> 00:26:12.520\nso now when you allocate it out, sure\ntheir data's been flagged as deleted but\n\n542\n00:26:12.520 --> 00:26:14.730\nthe data might still be underneath it.\n\n543\n00:26:14.730 --> 00:26:18.200\nAnd so if you want to be\nsure it's actually blank,\n\n544\n00:26:18.200 --> 00:26:21.320\nyou do the long format and\nyeah, you pay for the 500 gigs.\n\n545\n00:26:21.320 --> 00:26:23.410\nAnd I told the viewer,\nI said I understand what your saying,\n\n546\n00:26:23.410 --> 00:26:26.700\nI understand where you're coming from,\nbut I don't think that's right.\n\n547\n00:26:26.700 --> 00:26:30.630\nI'm pretty certain it gets erased and\nso I reached out to a Microsoft rep,\n\n548\n00:26:30.630 --> 00:26:33.006\nI kind of went through a few people and\nwhat I learned was really neat.\n\n549\n00:26:33.006 --> 00:26:36.420\nWhen Microsoft de-provisions a disc,\nso like when I delete this disk\n\n550\n00:26:36.420 --> 00:26:40.370\nafter the show is over, they don't just\nimmediately give it to someone else.\n\n551\n00:26:40.370 --> 00:26:43.140\nThey then take it and\nrun it through a scrub.\n\n552\n00:26:43.140 --> 00:26:46.860\nThey actually do a seven pass DOD\nscrub on the disk before they give it\n\n553\n00:26:46.860 --> 00:26:47.400\nto somebody else.\n\n554\n00:26:47.400 --> 00:26:49.880\nSo, when you get it, it is truly empty.\n\n555\n00:26:49.880 --> 00:26:53.100\nYou might not be the first person\nto be on that physical disk, but\n\n556\n00:26:53.100 --> 00:26:54.420\nthe data on there is blank.\n\n557\n00:26:54.420 --> 00:26:57.600\nAnd so, there is no need to do the full\nformat unless you just feel like paying\n\n558\n00:26:57.600 --> 00:26:59.760\na lot for the disk,\nin which case, more power to you.\n\n559\n00:26:59.760 --> 00:27:03.960\n>> I was getting ready to say, it looks\nlike there's a little more to using Azure,\n\n560\n00:27:03.960 --> 00:27:07.360\nthan it is when you're just a regular\nservers and stuff like that,\n\n561\n00:27:07.360 --> 00:27:09.770\nbut if they're doing that,\nI guess you got nothing to worry about.\n\n562\n00:27:09.770 --> 00:27:12.730\n>> Yeah, Microsoft, they're making\nsure the disks get destroyed when\n\n563\n00:27:12.730 --> 00:27:13.990\nthey're at their end of life.\n\n564\n00:27:13.990 --> 00:27:15.850\nThey make sure they get wiped.\n\n565\n00:27:15.850 --> 00:27:19.650\nThey meet several regulatory compliance\nlevels, and this is how they achieve it.\n\n566\n00:27:19.650 --> 00:27:22.130\nSo they're actually taking care of\na lot of that on the back end for us.\n\n567\n00:27:22.130 --> 00:27:23.230\nSo, all right,\n\n568\n00:27:23.230 --> 00:27:26.180\nwell, we got a chance to see me\nthrowing some disks into the server.\n\n569\n00:27:26.180 --> 00:27:29.120\nWe can take the disks back out again\nif we don't need them anymore.\n\n570\n00:27:29.120 --> 00:27:32.160\nWe can always just jump right\nback into our Azure portal.\n\n571\n00:27:32.160 --> 00:27:34.200\nIf you can say it,\nthen you can get in there, and\n\n572\n00:27:34.200 --> 00:27:36.890\nyou can yank those disks back out\nagain if you're done with them.\n\n573\n00:27:36.890 --> 00:27:40.220\nAnd you can do it all, again, live,\nwhile the server is up and running.\n\n574\n00:27:40.220 --> 00:27:41.360\nThat's the cool part.\n\n575\n00:27:41.360 --> 00:27:43.390\nNow there's more that\nI wanna show you guys.\n\n576\n00:27:43.390 --> 00:27:45.240\nI wanna talk about doing\nthis from the PowerShell,\n\n577\n00:27:45.240 --> 00:27:46.950\ncuz we can do that from there, too.\n\n578\n00:27:46.950 --> 00:27:50.920\nAnd I mentioned how we could bond disks\ntogether to create super disks that were\n\n579\n00:27:50.920 --> 00:27:53.550\nfaster, and bigger, stronger,\nall that good stuff.\n\n580\n00:27:53.550 --> 00:27:54.370\n>> We have the technology.\n\n581\n00:27:54.370 --> 00:27:56.630\n>> That's right,\nthe six million dollar drive.\n\n582\n00:27:56.630 --> 00:27:58.080\nWe can create that.\n\n583\n00:27:58.080 --> 00:28:00.498\nI wanna show that to you, too, but\nI know I'm running short on time.\n\n584\n00:28:00.498 --> 00:28:02.750\nSo, I do wanna mention one more thing.\n\n585\n00:28:02.750 --> 00:28:06.730\nWhen I created these disks, I was just\ngoing with the defaults and that works.\n\n586\n00:28:06.730 --> 00:28:11.440\nYou don't have to know a whole ton\nabout the storage to get it working.\n\n587\n00:28:11.440 --> 00:28:13.290\nBut, if we take the time and\n\n588\n00:28:13.290 --> 00:28:17.820\nlearn a little bit more, there's even\nmore stuff we can do to improve this.\n\n589\n00:28:17.820 --> 00:28:21.840\nWhen I created those disks,\nI picked my instance type.\n\n590\n00:28:21.840 --> 00:28:24.008\nAnd I knew if I went\nwith a D1 versus a DS1,\n\n591\n00:28:24.008 --> 00:28:26.610\nI was gonna get better\ndisk performance with DS1.\n\n592\n00:28:26.610 --> 00:28:27.750\nSo I know there's that.\n\n593\n00:28:27.750 --> 00:28:28.970\nAnd then I start whipping up these disks.\n\n594\n00:28:28.970 --> 00:28:31.430\nAnd I know that if I bond more together\nI can create a super fast disk.\n\n595\n00:28:31.430 --> 00:28:33.440\nAnd that's awesome too, right?\n\n596\n00:28:33.440 --> 00:28:37.120\nBut all of this is residing in\na storage account on the backend.\n\n597\n00:28:37.120 --> 00:28:39.800\nAnd there's things I can\ndo with the storage account\n\n598\n00:28:39.800 --> 00:28:42.410\nthat'll improve performance\non those disks too.\n\n599\n00:28:42.410 --> 00:28:43.950\nAnd if we know all that,\n\n600\n00:28:43.950 --> 00:28:47.360\nyou can really get your money's worth\nout of Azure without paying a ton extra.\n\n601\n00:28:47.360 --> 00:28:50.690\nBut if you don't know, if you just\nset the defaults, it does work.\n\n602\n00:28:50.690 --> 00:28:53.370\nYou don't have to be a rocket scientist\nto get in here and figure out how to get\n\n603\n00:28:53.370 --> 00:28:56.990\nthese things up and going, but\ntake the time to learn the extras right?\n\n604\n00:28:56.990 --> 00:28:59.420\nSo what I covered in this episode\nis really just the basics.\n\n605\n00:28:59.420 --> 00:29:01.210\nI'm throwing on a data disk.\n\n606\n00:29:01.210 --> 00:29:03.700\nNow I've something I can format out and\nstart to use to my system.\n\n607\n00:29:03.700 --> 00:29:05.740\nAnd I used Windows,\nthe same thing for Linux.\n\n608\n00:29:05.740 --> 00:29:08.320\nYou could add those disks on Linux and\nstart to partition those out.\n\n609\n00:29:08.320 --> 00:29:11.830\nI wanna show that too, so\nI guess maybe we'll do that in part two.\n\n610\n00:29:11.830 --> 00:29:14.680\n>> Well Don, you really got my\nappetite wet for that part too, and\n\n611\n00:29:14.680 --> 00:29:17.620\nI'm sure our viewers are ready\nto see that as well.\n\n612\n00:29:17.620 --> 00:29:22.639\nBut, like you said, we're running out of\ntime for this episode, actually it's gone.\n\n613\n00:29:22.639 --> 00:29:24.480\n[LAUGH] That time has long expired, Don.\n\n614\n00:29:24.480 --> 00:29:25.270\nYou love to talk.\n\n615\n00:29:25.270 --> 00:29:26.770\nBut, it's always good stuff.\n\n616\n00:29:26.770 --> 00:29:29.020\nHopefully you guys have enjoyed it and\nhopefully we'll see you on part two.\n\n617\n00:29:29.020 --> 00:29:31.320\nAs for this episode,\nwe're gonna go ahead and call it a day.\n\n618\n00:29:31.320 --> 00:29:34.480\nSigning off for ITProTV,\nI've been your host Daniel Lowrie.\n\n619\n00:29:34.480 --> 00:29:35.930\n>> And I'm Don Pezet.\n>> And we'll see you next time.\n\n620\n00:29:35.930 --> 00:29:42.090\n[MUSIC]\n\n",
          "vimeoId": "148667865"
        },
        {
          "description": "In this episode, Daniel and Don continue to explore storage management in Microsoft Azure Virtual Machines. Picking up where they left off, they add a disk to a VM using Azure PowerShell and then connect a pre-existing disk to a VM. Next they explain the different Storage Account types like L(Locally Redudndant), G(Geo Redundant), R(Read-Access Geo Redundant), P(Premium Locally Redundant), and Z(Zone Redundant). Finally, they cover monitoring your disk performance and setting up alerts.",
          "length": "2088",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-2-1-virtual_machine_storage_pt2-120215-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-2-1-virtual_machine_storage_pt2-120215-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-2-1-virtual_machine_storage_pt2-120215-1-sm.jpg",
          "title": "Virtual Machine Storage Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.028 --> 00:00:10.028\n[MUSIC]\n\n2\n00:00:12.068 --> 00:00:16.708\nAll right, greetings everyone, and welcome\nto another great episode of ITProTV.\n\n3\n00:00:16.708 --> 00:00:19.316\nI'm your host Daniel Lowrie,\nand in this episode,\n\n4\n00:00:19.316 --> 00:00:23.300\nwe're continuing to take a look at\nthe Microsoft Azure virtual machines.\n\n5\n00:00:23.300 --> 00:00:27.760\nAnd joining us yet again to help continue\non this trek is none other than Mr.\n\n6\n00:00:27.760 --> 00:00:29.380\nDon Pezet himself.\n\n7\n00:00:29.380 --> 00:00:31.140\nDon, thank you for\njoining us in the studio today.\n\n8\n00:00:31.140 --> 00:00:31.940\nHow are you?\n\n9\n00:00:31.940 --> 00:00:34.650\n>> It's the least I can do after only\ngetting through half my stuff for\n\n10\n00:00:34.650 --> 00:00:35.234\nthe last episode.\n\n11\n00:00:35.234 --> 00:00:37.890\n[LAUGH] So they get me back for part two,\n\n12\n00:00:37.890 --> 00:00:40.220\nand we're gonna talk a little\nbit more about storage.\n\n13\n00:00:40.220 --> 00:00:42.220\nI actually got a lot more or we're\ngonna talk about some other episodes.\n\n14\n00:00:42.220 --> 00:00:45.410\nBut for this one I want to wrap up\nwhat we were talking about last time.\n\n15\n00:00:45.410 --> 00:00:49.270\nIn part one we got a chance to see how\ndata disks worked inside of Azure.\n\n16\n00:00:49.270 --> 00:00:51.740\nWe saw how to add some to\na virtual machine, and\n\n17\n00:00:51.740 --> 00:00:53.280\nwe did it through the web UI, right?\n\n18\n00:00:53.280 --> 00:00:55.890\nWe didn't do the cool way,\nwhich is through the PowerShell.\n\n19\n00:00:55.890 --> 00:00:59.998\nSo I wanna show you guys how to add\ndata disks from the PowerShell.\n\n20\n00:00:59.998 --> 00:01:03.250\nI also wanna add a data disk to a Linux\nmachine instead of a Windows machine,\n\n21\n00:01:03.250 --> 00:01:06.090\nbecause you might be supporting both,\nand it's really very similar.\n\n22\n00:01:06.090 --> 00:01:11.651\nWe can get them added in, and they just\nshow up live on ad, no big deal there.\n\n23\n00:01:11.651 --> 00:01:14.476\nSo, we're gonna take a look at that, and\njust kinda see where the conversation\n\n24\n00:01:14.476 --> 00:01:16.891\ntakes us, which will probably take\nus beyond our 30 minute mark.\n\n25\n00:01:16.891 --> 00:01:20.332\n>> [LAUGH] Don, you're gonna move\nus into the hacker realm of things,\n\n26\n00:01:20.332 --> 00:01:24.271\nwe're gonna I'm gonna type away at\nthe keyboard and not use a mouse so much.\n\n27\n00:01:24.271 --> 00:01:26.210\n>> Yeah that makes you a hacker I guess?\n\n28\n00:01:26.210 --> 00:01:27.277\n>> That's what the kids say.\n\n29\n00:01:27.277 --> 00:01:29.081\n[LAUGH]\n>> All right, well ladies and\n\n30\n00:01:29.081 --> 00:01:30.330\ngentlemen let's jump back in here.\n\n31\n00:01:30.330 --> 00:01:32.010\nWhere gonna talk about a Linux Box.\n\n32\n00:01:32.010 --> 00:01:34.258\nSo here in my Azure portal,\n\n33\n00:01:34.258 --> 00:01:38.360\nI've got a couple of servers parked\nin my Azure environment right now.\n\n34\n00:01:38.360 --> 00:01:40.880\nSo my Demo1 and Demo2,\nthose are just Windows servers.\n\n35\n00:01:40.880 --> 00:01:43.060\nBut Demo3, that's a Linux server.\n\n36\n00:01:43.060 --> 00:01:45.970\nSo I spun it up with CentOS 7.\n\n37\n00:01:45.970 --> 00:01:47.890\nAnd so it's up and running.\n\n38\n00:01:47.890 --> 00:01:48.970\nIt's kinda doing its thing.\n\n39\n00:01:48.970 --> 00:01:51.420\nIt's apparently resisting\nmy ability to click on it.\n\n40\n00:01:51.420 --> 00:01:52.210\nBut there it is.\n\n41\n00:01:52.210 --> 00:01:53.020\nIt's up and it's running.\n\n42\n00:01:53.020 --> 00:01:54.710\nAnd so it is a Linux box.\n\n43\n00:01:54.710 --> 00:01:56.120\nI can see that right there.\n\n44\n00:01:56.120 --> 00:02:00.500\nAnd as far as disks, it really doesn't\nhave much attached to it right now.\n\n45\n00:02:00.500 --> 00:02:04.020\nSo if I kinda wander into the disk\nconfiguration it's just got what it\n\n46\n00:02:04.020 --> 00:02:05.350\ncame with by default.\n\n47\n00:02:05.350 --> 00:02:10.100\nSo it's got an OS disk, which is only\n30 gigs in size and that's it, right?\n\n48\n00:02:10.100 --> 00:02:15.120\nWell, just like a Windows machine,\nit does actually have temporary disks.\n\n49\n00:02:15.120 --> 00:02:18.060\nLet me jump over to an SSH session here.\n\n50\n00:02:18.060 --> 00:02:19.930\nAnd I'll show you what I mean.\n\n51\n00:02:19.930 --> 00:02:23.700\nIf I do a Fdisk-l to\npull up a list of disks.\n\n52\n00:02:23.700 --> 00:02:26.270\nOops, if I elevate my privileges to do it.\n\n53\n00:02:26.270 --> 00:02:28.630\nThere we go.\nThat'll work a little bit better.\n\n54\n00:02:28.630 --> 00:02:30.770\nGotta be root to do it, there.\n\n55\n00:02:30.770 --> 00:02:33.670\nI can see that I've actually\ngot two disks in this thing.\n\n56\n00:02:33.670 --> 00:02:37.540\nAnd the first one,\nit's just up here, the /dev/sdb, and\n\n57\n00:02:37.540 --> 00:02:40.355\nthen I've got /dev/sta,\nthey're actually kind of backwards.\n\n58\n00:02:40.355 --> 00:02:45.670\n/dev/sda, 32 gigs in size,\nthat's my operating system disk.\n\n59\n00:02:45.670 --> 00:02:50.560\nAnd /dev/sdb is 15 gigs in size,\nthat's my temporary disk.\n\n60\n00:02:50.560 --> 00:02:55.470\nSo just like in Windows,\nI got both an actual OS disk and\n\n61\n00:02:55.470 --> 00:02:57.280\na temp disk that I can use if I want.\n\n62\n00:02:57.280 --> 00:02:59.870\n>> And the same rules apply\nhere as is temporary storage,\n\n63\n00:02:59.870 --> 00:03:03.600\ndon't put the sensitive stuff on\nthat temporary storage, right?\n\n64\n00:03:03.600 --> 00:03:06.860\n>> Yeah, don't put anything on there\nthat you couldn't afford to lose.\n\n65\n00:03:06.860 --> 00:03:08.900\nThat's kind of the rule of thumb on that.\n\n66\n00:03:08.900 --> 00:03:11.740\nAnd if I look at it,\nI'll see here where I got\n\n67\n00:03:11.740 --> 00:03:16.410\nmy 30 gig drive kind of mounted as slash,\nit's in that root folder.\n\n68\n00:03:16.410 --> 00:03:23.018\nBut then I've got /dev/sdb1, there's that\ntemp drive, now onto this /mnt/resource.\n\n69\n00:03:23.018 --> 00:03:24.518\nNow, we have to be careful here,\n\n70\n00:03:24.518 --> 00:03:27.990\nthis is where we can kinda get things\nconfused if we're not careful.\n\n71\n00:03:27.990 --> 00:03:30.720\nThey didn't call it temp like\nthey did on the Windows one.\n\n72\n00:03:30.720 --> 00:03:33.700\nThey just called it a /mnt/resource but\nthat is that temp one.\n\n73\n00:03:33.700 --> 00:03:36.350\nI can see it's 13 gigs in size,\nkind of sitting out there.\n\n74\n00:03:36.350 --> 00:03:39.280\nAnd there's some temp files, system\nstuff that the operating system uses,\n\n75\n00:03:39.280 --> 00:03:42.550\nbut this guy is actually\nthat temporary storage.\n\n76\n00:03:42.550 --> 00:03:44.720\nIf we want persistent storage,\nwe can add it.\n\n77\n00:03:44.720 --> 00:03:48.940\nAnd we can go into the web UI and add it\njust like we did in that last episode for\n\n78\n00:03:48.940 --> 00:03:49.740\na Windows server.\n\n79\n00:03:49.740 --> 00:03:52.530\nThat's nothing too terribly special,\nright?\n\n80\n00:03:52.530 --> 00:03:54.670\nSo I could come in here to the disks for\nthe machine,\n\n81\n00:03:54.670 --> 00:03:57.010\nI could go to Attach New and add one.\n\n82\n00:03:57.010 --> 00:03:58.980\nThat is no fun Drew,\nwe have seen it already.\n\n83\n00:03:58.980 --> 00:04:00.500\nLets do it through\nthe PowerShell this time.\n\n84\n00:04:01.650 --> 00:04:05.570\nAdding it to the PowerShell, it's the same\nfor Windows and Linux, so there's not much\n\n85\n00:04:05.570 --> 00:04:09.000\nof a variation to be seen there, but\nthe commands can be a little confusing.\n\n86\n00:04:09.000 --> 00:04:13.140\nAnd the reason is, when we go\nto add a data disk It's going to\n\n87\n00:04:13.140 --> 00:04:17.880\ndefault to using whatever storage\naccount we're currently attached to.\n\n88\n00:04:17.880 --> 00:04:22.340\nAnd in the web UI, it actually makes sure\nit's attached to the one that's right for\n\n89\n00:04:22.340 --> 00:04:23.840\nyour system.\n\n90\n00:04:23.840 --> 00:04:24.869\nFor the PowerShell it doesn't.\n\n91\n00:04:24.869 --> 00:04:28.360\n[LAUGH] It just uses whatever was there\nfirst, and oftentimes that's not right.\n\n92\n00:04:28.360 --> 00:04:33.220\nNow, what I mean about the storage\naccount is that the data disk you add,\n\n93\n00:04:33.220 --> 00:04:35.710\nIt needs to be created in\nthe same region as your server.\n\n94\n00:04:35.710 --> 00:04:41.950\nSo if my server is in US east 2, then\nmy data disk needs to be in US east 2,\n\n95\n00:04:41.950 --> 00:04:44.850\notherwise my virtual machine's not\nreally gonna connect to it very well.\n\n96\n00:04:44.850 --> 00:04:46.910\nAnd the web UI makes sure that happens.\n\n97\n00:04:46.910 --> 00:04:48.270\nPowerShell doesn't.\n\n98\n00:04:48.270 --> 00:04:51.170\nSo I need to make sure that my\nstorage account is set properly, and\n\n99\n00:04:51.170 --> 00:04:52.760\nunfortunately it doesn't do it by default.\n\n100\n00:04:52.760 --> 00:04:56.300\nSo for example,\nIf I log into PowerShell here and\n\n101\n00:04:56.300 --> 00:05:00.405\nI do a quick Get-AzureAccount.\n\n102\n00:05:01.440 --> 00:05:04.940\nNot that one, get dash Azure Subscription,\nthat's the one I want.\n\n103\n00:05:04.940 --> 00:05:05.590\nWell, or SubNet.\n\n104\n00:05:05.590 --> 00:05:10.590\nYou know, we'll see how many\ncrazy commands I can type.\n\n105\n00:05:10.590 --> 00:05:14.600\nGet-AzureSubscription, there we go.\n\n106\n00:05:14.600 --> 00:05:15.300\nNotice what I've got.\n\n107\n00:05:15.300 --> 00:05:18.910\nNotice that I've got a subscription name,\nITProTV Demo, I'm in the Azure Cloud.\n\n108\n00:05:18.910 --> 00:05:20.450\nThis is my default.\n\n109\n00:05:20.450 --> 00:05:23.420\nCurrentStorageAccountName, nothing.\n\n110\n00:05:23.420 --> 00:05:25.820\nBy default it doesn't\nselect a storage account.\n\n111\n00:05:25.820 --> 00:05:28.660\nAnd so if I try and create an In disks\nright now it's just gonna try and\n\n112\n00:05:28.660 --> 00:05:29.970\ngrab the first one that's available.\n\n113\n00:05:29.970 --> 00:05:32.790\nAnd I can guarantee you it's not going\nto be east US two it's gonna be like\n\n114\n00:05:32.790 --> 00:05:35.750\njust regular east US or\nUS east or whatever it is.\n\n115\n00:05:35.750 --> 00:05:36.920\nSo it's not gonna be right.\n\n116\n00:05:36.920 --> 00:05:39.140\nIt might, I might luck out and it works,\n\n117\n00:05:39.140 --> 00:05:41.530\nbut one thing we need to do is if we're\ngoing to work with the PowerShell.\n\n118\n00:05:41.530 --> 00:05:44.630\nWe need to set a default\nstorage account to use, and\n\n119\n00:05:44.630 --> 00:05:47.380\nI need to pick one that's\nin the right region.\n\n120\n00:05:47.380 --> 00:05:51.580\nAnd so, if I go back to my server here.\n\n121\n00:05:51.580 --> 00:05:54.690\nAnd let me just back up to\nthe server page itself.\n\n122\n00:05:54.690 --> 00:05:57.620\nSo I can see that it is in East US 2.\n\n123\n00:05:57.620 --> 00:06:01.440\nThat's where this one is\ncurrently residing, East US 2.\n\n124\n00:06:01.440 --> 00:06:03.410\nAnd so\nI need to create a disc in East US 2.\n\n125\n00:06:03.410 --> 00:06:06.120\nSo, I'm gonna jump over here\nto my storage accounts.\n\n126\n00:06:07.280 --> 00:06:09.620\nAnd I'm sure I've created\na ton throughout the show.\n\n127\n00:06:09.620 --> 00:06:11.030\nWell, more than a ton.\n\n128\n00:06:11.030 --> 00:06:13.720\nAnd what I'm gonna do is I'm just kind\nof browse through these, and look for\n\n129\n00:06:13.720 --> 00:06:15.500\none that's already in East US 2.\n\n130\n00:06:15.500 --> 00:06:17.400\nSo I've got itprotvdemoone.\n\n131\n00:06:17.400 --> 00:06:21.200\nI've got, actually here,\nthis guy, itprotvdemostorage.\n\n132\n00:06:21.200 --> 00:06:21.920\nThat sounds like a good one.\n\n133\n00:06:21.920 --> 00:06:23.930\nIf I didn't have one,\nI could always create one.\n\n134\n00:06:23.930 --> 00:06:26.100\nAnd I would just need to make sure\nto create it in the region where\n\n135\n00:06:26.100 --> 00:06:26.690\nthe servers are.\n\n136\n00:06:26.690 --> 00:06:30.180\nSo I'm going to use this\nitprotvdemostorage to connect to.\n\n137\n00:06:30.180 --> 00:06:32.610\nSo I'm gonna get back to my PowerShell.\n\n138\n00:06:32.610 --> 00:06:36.660\nAnd in my PowerShell, I'm gonna set\nthat to be my default storage account.\n\n139\n00:06:36.660 --> 00:06:44.080\nSo I'm gonna say,\nset-AzureSubscription, there we go.\n\n140\n00:06:44.080 --> 00:06:46.730\nIt seems kinda counter intuitive to be\ndoing this to the subscription, but\n\n141\n00:06:46.730 --> 00:06:48.920\nthat's where the default account is set.\n\n142\n00:06:48.920 --> 00:06:53.420\nSo then I'll say the subscription name,\nmine is called ITProTV Demo.\n\n143\n00:06:53.420 --> 00:06:56.610\nYours will be called whatever you\ncalled it when you signed up.\n\n144\n00:06:56.610 --> 00:07:01.020\nI'm gonna say -CurrentStorageAccountName.\n\n145\n00:07:01.020 --> 00:07:04.634\nAnd this is where I've set that default\naccount, and I'm gonna say ITProTV\n\n146\n00:07:04.634 --> 00:07:10.350\ndownload storage, and I\"ll press Enter.\n\n147\n00:07:10.350 --> 00:07:12.850\nSo that's gonna go ahead and\nset that as my default storage account.\n\n148\n00:07:12.850 --> 00:07:16.010\nSo now when I do a get\ndash as your subscription,\n\n149\n00:07:16.010 --> 00:07:17.600\nI should see a current\nstorage account name.\n\n150\n00:07:17.600 --> 00:07:18.770\nIt's not showing up right there.\n\n151\n00:07:18.770 --> 00:07:19.930\nLet me format that as a list.\n\n152\n00:07:19.930 --> 00:07:21.750\nIt might just be too long to show up.\n\n153\n00:07:21.750 --> 00:07:23.760\nOh, it was already formatted as a list.\n\n154\n00:07:23.760 --> 00:07:26.420\nWell, either way, it did set,\nI didn't get an error back.\n\n155\n00:07:26.420 --> 00:07:28.730\nIt's just not outputting it\non my screen for some reason.\n\n156\n00:07:28.730 --> 00:07:30.480\nBut once that's set,\n\n157\n00:07:30.480 --> 00:07:33.410\nnow I know that's the storage\naccount that I'm about to work with.\n\n158\n00:07:33.410 --> 00:07:35.680\nSo when I start to create this drive,\nI know that's where it's gonna go, and\n\n159\n00:07:35.680 --> 00:07:36.850\nit's gonna help me avoid errors.\n\n160\n00:07:36.850 --> 00:07:38.930\nIt gonna make sure it's\nin the right region.\n\n161\n00:07:38.930 --> 00:07:43.730\nAll right, so next, I wanna go ahead and\ncreate a disk, and add it to a VM.\n\n162\n00:07:43.730 --> 00:07:46.570\nNow if you go on Microsoft's site,\nthere's a bunch of scripts and\n\n163\n00:07:46.570 --> 00:07:47.790\nall sorts of stuff that can do this.\n\n164\n00:07:47.790 --> 00:07:51.327\nAnd the hard part is, I've gotta get\nthe identifier for the virtual machine, so\n\n165\n00:07:51.327 --> 00:07:53.211\nthat when I create\nthe disk I can attach it.\n\n166\n00:07:53.211 --> 00:07:56.665\nBut there's actually a way we can kinda\nnest some commands together to achieve\n\n167\n00:07:56.665 --> 00:08:00.014\nthat same goal without having to go\nthrough the headache of Actually finding\n\n168\n00:08:00.014 --> 00:08:01.338\nout that server identifier.\n\n169\n00:08:01.338 --> 00:08:06.327\nSo, what I'm gonna do is,\nI'm gonna run get-AzureVM-Name,\n\n170\n00:08:06.327 --> 00:08:09.240\nand I'll put the name of that server.\n\n171\n00:08:09.240 --> 00:08:11.370\nMine's itprotv-demo3, right?\n\n172\n00:08:11.370 --> 00:08:12.910\nThat's that Linux box.\n\n173\n00:08:12.910 --> 00:08:16.930\nAnd then I'm gonna say -servicename and\n\n174\n00:08:16.930 --> 00:08:18.600\nthe name of the cloud\nservice that it's in.\n\n175\n00:08:18.600 --> 00:08:22.040\nIf you haven't messed with it, it's\njust the same as the server name, right?\n\n176\n00:08:22.040 --> 00:08:23.920\nSo mine would be itprotv-demo3,\n\n177\n00:08:23.920 --> 00:08:28.220\nbut if you're using the same cloud\nservice for more than one server,\n\n178\n00:08:28.220 --> 00:08:30.800\nthan these names wouldn't match and\nyou'd have to put that in.\n\n179\n00:08:30.800 --> 00:08:33.860\nNow if I just run that,\nit's going to reach out to Azure and\n\n180\n00:08:33.860 --> 00:08:36.580\nit's going to get the details\nof that server, all right?\n\n181\n00:08:36.580 --> 00:08:37.980\nAnd, I get a little error here,\n\n182\n00:08:37.980 --> 00:08:41.270\ntelling me no deployment found\nin service itprotv-demo3.\n\n183\n00:08:41.270 --> 00:08:44.050\nAnd that means, well, one of two things.\n\n184\n00:08:44.050 --> 00:08:46.120\nEither one, I haven't actually\ndeployed a server in it, or\n\n185\n00:08:46.120 --> 00:08:48.150\nI just haven't configured anything.\n\n186\n00:08:48.150 --> 00:08:49.060\nAnd that's how mine is.\n\n187\n00:08:49.060 --> 00:08:50.080\nI've deployed a server.\n\n188\n00:08:50.080 --> 00:08:53.110\nI haven't configured any special\ndeployment settings in there.\n\n189\n00:08:53.110 --> 00:08:56.610\nWhich means there's no default values\nif I start to throw information\n\n190\n00:08:56.610 --> 00:08:58.760\ninto that cloud service,\nand that's fine with me.\n\n191\n00:08:58.760 --> 00:09:03.090\nSo I am gonna get the details for\nthat server and\n\n192\n00:09:03.090 --> 00:09:06.040\nthen I'm gonna pipe that\ninto another command.\n\n193\n00:09:06.040 --> 00:09:13.044\nAnd the other command that I'm gonna pipe\nthis into is add-azuredatadisk, okay?\n\n194\n00:09:13.044 --> 00:09:18.020\nThe Add-AzureDataDisk is\ngonna add a data disk,\n\n195\n00:09:18.020 --> 00:09:21.530\na persistent disk,\nonto the end of what I've already got.\n\n196\n00:09:21.530 --> 00:09:23.574\nAnd I don't have that disk yet,\n\n197\n00:09:23.574 --> 00:09:27.902\nso I'm gonna do a -CreateNew and\nthen I'll specify the disk size.\n\n198\n00:09:27.902 --> 00:09:32.057\nAnd so, I'll say dash disk size in GB,\nin gigabytes.\n\n199\n00:09:32.057 --> 00:09:33.602\nAnd then I can tell it\nhow big I want it to be.\n\n200\n00:09:33.602 --> 00:09:38.340\nAnd I'll go ahead and do 512 GB just\nlike we saw the default in the web UI.\n\n201\n00:09:38.340 --> 00:09:42.440\nAnd then form here,\nwe can specify a disk label if we want.\n\n202\n00:09:44.030 --> 00:09:46.050\nAnd I can call it whatever it is\nthat I want to call it, right?\n\n203\n00:09:46.050 --> 00:09:50.590\nMaybe I want to call it datadisk1 or\nbackup, or whatever, right?\n\n204\n00:09:50.590 --> 00:09:51.490\nSo I can specify that.\n\n205\n00:09:52.930 --> 00:09:58.070\nThen it's gonna have a logical identifier,\njust like it was on a SCSI bus.\n\n206\n00:09:58.070 --> 00:10:00.290\nAnd the data disks actually\nhave their own SCSI bus.\n\n207\n00:10:00.290 --> 00:10:01.800\nSo your start numbering with 0,\n\n208\n00:10:01.800 --> 00:10:05.330\neach disk you add you can just\ngive it an extra SCSI number.\n\n209\n00:10:05.330 --> 00:10:08.670\nNow depending on the size of your\ninstance, you may be limited.\n\n210\n00:10:08.670 --> 00:10:12.120\nThis instance I picked a D1 and so\nI can only have two data discs.\n\n211\n00:10:12.120 --> 00:10:13.980\nSo I can have LUN 0 and LUN 1.\n\n212\n00:10:13.980 --> 00:10:16.900\nIf I start going beyond that I'll get\nerrors telling me that I've exceeded\n\n213\n00:10:16.900 --> 00:10:21.170\nmy LUN count, even though I know in\nreal life land, LUNs go up to 15 and\n\n214\n00:10:21.170 --> 00:10:22.520\nI should be able to go higher.\n\n215\n00:10:22.520 --> 00:10:25.130\nBut you're artificially limited,\nall right.\n\n216\n00:10:25.130 --> 00:10:27.890\nNow here's the part of the command that I\nalways forget, and the reason why I have\n\n217\n00:10:27.890 --> 00:10:32.810\nthe notes here for me to use is when you\ndo this it tells it to create the disk,\n\n218\n00:10:32.810 --> 00:10:37.120\nbut it doesn't actually like\nrefresh the VM to recognize it.\n\n219\n00:10:37.120 --> 00:10:42.410\nAnd so we need to add one more command\nto the end which is Update-AzureVM.\n\n220\n00:10:42.410 --> 00:10:46.735\nAnd because I'm using the pipe, I don't\nhave to tell it which VM to update,\n\n221\n00:10:46.735 --> 00:10:50.198\nit knows based on the initial\ncommand that I'm piping it in.\n\n222\n00:10:50.198 --> 00:10:52.056\nSo let's kind of rehash all that.\n\n223\n00:10:52.056 --> 00:10:57.560\nI did Get-AzureVM -Name and\nthe name of the VM.\n\n224\n00:10:57.560 --> 00:11:00.490\nThen I did -ServiceName and\nthe name of the cloud service.\n\n225\n00:11:02.050 --> 00:11:06.960\nAfter that, I piped the output\nof that into Add-AzureDataDisk.\n\n226\n00:11:06.960 --> 00:11:10.940\nI told it to create a new\ndisk with a size of 512 gigs.\n\n227\n00:11:10.940 --> 00:11:15.142\nTo give it a label of datadisk1, so\nI can remember what the heck it was, and\n\n228\n00:11:15.142 --> 00:11:17.590\nto assign it the SCSI LUN 0, right.\n\n229\n00:11:17.590 --> 00:11:21.478\nAnd then to update the VM so that it would\nrecognize the changes that were made.\n\n230\n00:11:21.478 --> 00:11:24.888\nAnd assuming I don't have any\nmistakes here, we can run that and\n\n231\n00:11:24.888 --> 00:11:26.420\nit should succeed.\n\n232\n00:11:26.420 --> 00:11:31.390\nNow when I run it I got a warning about\nno deployment found in the service and\n\n233\n00:11:31.390 --> 00:11:32.100\nthen it finished.\n\n234\n00:11:32.100 --> 00:11:34.790\nNow, the problem here is I don't get\na lot of confirmation to let me know if\n\n235\n00:11:34.790 --> 00:11:37.330\nthis worked or not, and so\nit may well have not worked.\n\n236\n00:11:37.330 --> 00:11:40.350\nI might have something that doesn't match,\nI need to double check those names.\n\n237\n00:11:40.350 --> 00:11:44.340\nAnd I could try a different server just\nto see if it works there if I do like,\n\n238\n00:11:45.880 --> 00:11:46.870\nserver one.\n\n239\n00:11:46.870 --> 00:11:48.360\nActually server one's\nalready at it's limited.\n\n240\n00:11:48.360 --> 00:11:50.070\nWell, server one will be a good chance for\n\n241\n00:11:50.070 --> 00:11:52.300\nus to see what it's like\nwhen you hit that limit.\n\n242\n00:11:52.300 --> 00:11:55.800\nAnd so if I run that, oh actually I\ndid LUN 0 again which it already has.\n\n243\n00:11:55.800 --> 00:11:59.210\nSo I got an error here letting\nme know that, here we go,\n\n244\n00:11:59.210 --> 00:12:02.200\na data disk has already been\nassigned to LUN number 0, right?\n\n245\n00:12:02.200 --> 00:12:03.330\nI tried to overlap.\n\n246\n00:12:03.330 --> 00:12:06.320\nAnd so it will warn you when\nyou make a mistake like that.\n\n247\n00:12:06.320 --> 00:12:08.580\nOr if you're trying to\ngo over your LUN count.\n\n248\n00:12:08.580 --> 00:12:11.870\nThat ones already got two systems,\nor two drives attached to it.\n\n249\n00:12:11.870 --> 00:12:16.680\nSo if I try and\nattach this one as LUN 2, right?\n\n250\n00:12:16.680 --> 00:12:19.430\nThen this would be like a third disk and\nI'm pretty sure for\n\n251\n00:12:19.430 --> 00:12:22.090\nthe size that I picked,\nI won't be able to have one that big.\n\n252\n00:12:22.090 --> 00:12:24.090\nSo if I'm adding datadisk3,\n\n253\n00:12:24.090 --> 00:12:29.080\nI should get an error letting me know\nthat I've exceeded my allowed drives.\n\n254\n00:12:29.080 --> 00:12:29.840\nThere we go.\n\n255\n00:12:29.840 --> 00:12:33.670\nAnd here, so\nwe've got this too many disks,\n\n256\n00:12:33.670 --> 00:12:35.520\ntoo many data disks specified for\nthe virtual machine.\n\n257\n00:12:35.520 --> 00:12:37.550\nThe current maximum in it is two, right?\n\n258\n00:12:37.550 --> 00:12:38.770\nSo it'll let you know.\n\n259\n00:12:38.770 --> 00:12:42.120\nNow, on my Linux one I'm going to\nassume that it didn't provision but\n\n260\n00:12:42.120 --> 00:12:44.680\nI can go verify in the web UI, right?\n\n261\n00:12:44.680 --> 00:12:49.048\nSo if I go back here and\nI go to my virtual machines,\n\n262\n00:12:49.048 --> 00:12:52.689\nI can find my Linux box, ITPro TV demo 3.\n\n263\n00:12:52.689 --> 00:12:58.160\nAnd once I go into that,\nover here I can find my discs\n\n264\n00:12:58.160 --> 00:13:03.009\nwhich are buried under\nour little menu here.\n\n265\n00:13:03.009 --> 00:13:05.922\nAnd once I go into the discs I can\nsee if that data just got created and\n\n266\n00:13:05.922 --> 00:13:09.560\nmine failed which means I probably had\nthe wrong Cloud service name right.\n\n267\n00:13:09.560 --> 00:13:12.470\nSo if I go back to the properties of\nmy virtual machine I can come in and\n\n268\n00:13:12.470 --> 00:13:14.470\nI can find the Cloud service name.\n\n269\n00:13:14.470 --> 00:13:16.581\nAnd, yeah, notice my DNS name here.\n\n270\n00:13:16.581 --> 00:13:20.472\nThe DNS name is your cloud service name,\nand\n\n271\n00:13:20.472 --> 00:13:25.741\nmy cloud service name is\nITprotv-demo3-h3xyi44n.\n\n272\n00:13:25.741 --> 00:13:26.738\nJust rolls right off the tongue.\n\n273\n00:13:26.738 --> 00:13:27.470\n>> How did you not get that?\n\n274\n00:13:27.470 --> 00:13:28.556\nSuper easy.\n\n275\n00:13:28.556 --> 00:13:29.057\n>> I know.\nYou know, I must not have been paying\n\n276\n00:13:29.057 --> 00:13:32.414\nattention.\nSo, I'm gonna copy that, because there's\n\n277\n00:13:32.414 --> 00:13:38.462\nno way I'm gonna remember it, and then I'm\ngonna go fix my command to make this work.\n\n278\n00:13:38.462 --> 00:13:40.713\nSo I'm gonna go back to where\njust we ran this part and\n\n279\n00:13:40.713 --> 00:13:42.410\nI'm gonna punch in that service name.\n\n280\n00:13:42.410 --> 00:13:46.970\nNope, good old paste\nfailed me there didn't it.\n\n281\n00:13:46.970 --> 00:13:48.833\nSo let us paste that one in.\n\n282\n00:13:48.833 --> 00:13:52.845\n[LAUGH] Well,\npaste is apparently going to defeat me for\n\n283\n00:13:52.845 --> 00:13:56.435\ntechnologies today so\nmaybe I will type this in.\n\n284\n00:13:56.435 --> 00:14:01.264\nH3XY, and then it was,\nis that an I or a J?\n\n285\n00:14:01.264 --> 00:14:07.370\nI44N, I44N, all right, so\nlet me just run that get Azure command.\n\n286\n00:14:07.370 --> 00:14:09.470\nOp, now we get some data back on that one.\n\n287\n00:14:09.470 --> 00:14:12.430\nSo we know it's actually selecting and\npulling that data.\n\n288\n00:14:12.430 --> 00:14:18.420\nAnd so I can take that, and feed that\nextra bit into this guy right here.\n\n289\n00:14:18.420 --> 00:14:21.820\nSo I'm just gonna come back here and\nupdate my service name.\n\n290\n00:14:21.820 --> 00:14:26.101\nSo I'm gonna be running this on demo3,\nwhich is my Linux box, and\n\n291\n00:14:26.101 --> 00:14:31.466\nI'll update my cloud service name to\nthe nice, easy to remember, generated one.\n\n292\n00:14:31.466 --> 00:14:32.980\nAnd now we're gonna add that disk.\n\n293\n00:14:32.980 --> 00:14:35.510\nNow this may take a moment,\nbecause what it actually has to do,\n\n294\n00:14:35.510 --> 00:14:37.880\nis it has to make sure that it\ncan access the storage account.\n\n295\n00:14:37.880 --> 00:14:41.540\nIt has to create the virtual disk,\nand it's doing a sparse disk, but\n\n296\n00:14:41.540 --> 00:14:43.400\nit's gotta provision it and\nthat takes a moment.\n\n297\n00:14:43.400 --> 00:14:46.200\nAnd once that's done, it's gotta\nattach it to the virtual machine.\n\n298\n00:14:46.200 --> 00:14:49.740\nAnd once that's done,\nit's gotta update the virtual machine so\n\n299\n00:14:49.740 --> 00:14:51.150\nit recognizes the new disk is there.\n\n300\n00:14:51.150 --> 00:14:53.076\nSo it's actually gotta do\na lot in the background.\n\n301\n00:14:53.076 --> 00:14:55.210\nSo, it's gonna take a moment.\n\n302\n00:14:55.210 --> 00:14:59.460\nAnd the larger disc the longer it can\ntake, so a terrabyte disc takes longer\n\n303\n00:14:59.460 --> 00:15:03.140\nthan a 500 gig disc, which takes longer\nthan 128 gigs, so we have to wait.\n\n304\n00:15:03.140 --> 00:15:06.950\nThe cool thing here is, in the Web UI I\ncan only pick from three sizes.\n\n305\n00:15:06.950 --> 00:15:12.050\nBut here in the GUI, I mean in the Power\nShell, I can specify any size that I want.\n\n306\n00:15:12.050 --> 00:15:12.610\nAnd I can go in and\n\n307\n00:15:12.610 --> 00:15:16.760\nI can punch that in, and I just noticed I\ndidn't fix the LUN number but, whatever.\n\n308\n00:15:16.760 --> 00:15:17.630\nAll right, so here it goes.\n\n309\n00:15:17.630 --> 00:15:19.720\nIt looks like it added it, it updated it,\n\n310\n00:15:19.720 --> 00:15:25.010\nI could verify that in the web interface\nif I come in here and look at the disks.\n\n311\n00:15:25.010 --> 00:15:27.620\nAnd sure enough, I see a data disk for\nthat system now.\n\n312\n00:15:27.620 --> 00:15:31.880\nBut the best place to see\nit is to go my SSH session.\n\n313\n00:15:31.880 --> 00:15:37.730\nAnd earlier I did an fdisk-l and I saw\nwhere I had just two disks in here, right?\n\n314\n00:15:37.730 --> 00:15:40.030\nAnd that was all that\nI had on this system.\n\n315\n00:15:40.030 --> 00:15:41.600\nNow I'm going to do an fdisk-l.\n\n316\n00:15:41.600 --> 00:15:43.560\nWell, let me elevate my privileges.\n\n317\n00:15:43.560 --> 00:15:44.080\nI'm forgetting.\n\n318\n00:15:45.700 --> 00:15:48.540\nAnd I should see an extra disk.\n\n319\n00:15:48.540 --> 00:15:50.346\nNow, actually, I don't.\n\n320\n00:15:50.346 --> 00:15:53.271\nWell it depends on our Linux disk.\n\n321\n00:15:53.271 --> 00:15:56.836\nThe Linux disk that you're running may or\nmay not recognize the disk right away.\n\n322\n00:15:56.836 --> 00:16:03.486\nIf this were a sysV init system, it would\nhave recognized that disk right away, but\n\n323\n00:16:03.486 --> 00:16:09.672\nthis is a systemd system, and so systemd\nonly detects hardware at boot time.\n\n324\n00:16:09.672 --> 00:16:12.410\nIt's a little bit of a problem, so\nI'm not picking up the disks, so\n\n325\n00:16:12.410 --> 00:16:15.499\nI need to reboot this server before\nit's gonna see it, it's unfortunate.\n\n326\n00:16:15.499 --> 00:16:18.779\nDifferent Linux distros have\ndifferent features here, but\n\n327\n00:16:18.779 --> 00:16:23.213\nif I give this guy the old reboot-arino,\nonce it reboots, it should see that disk\n\n328\n00:16:23.213 --> 00:16:26.580\nbeing added to it, and\nthen I can format it and start to use it.\n\n329\n00:16:26.580 --> 00:16:28.588\nSo that's one thing we\nneed to be aware of.\n\n330\n00:16:28.588 --> 00:16:30.831\nI should have picked a CentOS 6.5 box or\nsomething,\n\n331\n00:16:30.831 --> 00:16:32.632\nthat would have seen that automatically.\n\n332\n00:16:32.632 --> 00:16:34.250\nBut, we'll give that time and\nit'll come up.\n\n333\n00:16:34.250 --> 00:16:38.416\nSo adding a disk to Linux, not really\nmuch different than adding it to Windows.\n\n334\n00:16:38.416 --> 00:16:40.838\nNow it's available for\nthe system, and we can format it,\n\n335\n00:16:40.838 --> 00:16:42.723\nwe can start to add more disks and\ngive it a go.\n\n336\n00:16:42.723 --> 00:16:44.440\n>> And we can do it through\nthe PowerShell, right.\n\n337\n00:16:44.440 --> 00:16:47.510\nAnd we're not stuck with just one option,\nwe have multiple options.\n\n338\n00:16:47.510 --> 00:16:50.260\nNow, speaking of multiple options,\nDon, I'm watching this, and\n\n339\n00:16:50.260 --> 00:16:53.340\nwe're going through, we're creating disks,\nand that's all well and\n\n340\n00:16:53.340 --> 00:16:56.310\ngood, but\nwhat if I already have a disk, right?\n\n341\n00:16:56.310 --> 00:16:58.080\nI'm in a Windows Server environment,\n\n342\n00:16:58.080 --> 00:17:03.070\nit's probably a very high probability\nthat I'm creating VHDs all day long.\n\n343\n00:17:03.070 --> 00:17:06.220\nAnd I think, you know what, I'm moving\nto the cloud anyway, it's a VHD,\n\n344\n00:17:06.220 --> 00:17:08.890\nit's all virtualized,\nit's all Microsoft stuff.\n\n345\n00:17:08.890 --> 00:17:12.590\nWill that work, will they coincide,\ncan I just say, hey, here's my disk, and\n\n346\n00:17:12.590 --> 00:17:13.920\ninject that in?\n\n347\n00:17:13.920 --> 00:17:14.540\n>> Absolutely, yeah,\n\n348\n00:17:14.540 --> 00:17:17.010\nthere's actually a couple of commands\nthat are available to do that.\n\n349\n00:17:17.010 --> 00:17:21.260\nIf you have a VHD already built,\nthat's all these are, VHDs.\n\n350\n00:17:21.260 --> 00:17:24.930\nNot VHDXs, which are what\nthe Generation 2 Hyper-V uses.\n\n351\n00:17:24.930 --> 00:17:28.140\nBut the older style VHDs that\nGeneration 1 Hypervisor used.\n\n352\n00:17:28.140 --> 00:17:29.640\nOr Hyper-V used.\n\n353\n00:17:29.640 --> 00:17:33.790\nIf you have VHDs, you can actually upload\nthose instead of creating a new blank one.\n\n354\n00:17:33.790 --> 00:17:34.940\nAll of these were blank, right.\n\n355\n00:17:34.940 --> 00:17:36.950\nBut if you've got one that already\nhas data you can set it up.\n\n356\n00:17:36.950 --> 00:17:39.130\nLet me show you that while we're\nwaiting on that Linux box to come up.\n\n357\n00:17:39.130 --> 00:17:43.265\nSo if I go back to the PowerShell, the\ncommand that I really want to be aware of\n\n358\n00:17:43.265 --> 00:17:47.920\nis, we've been using\nthe Add-AzureDataDisk command.\n\n359\n00:17:47.920 --> 00:17:51.270\nThat's what was creating those new disks,\nand I did that -CreateNew.\n\n360\n00:17:51.270 --> 00:17:56.030\nBut you can also use Add-AzureHD,\n\n361\n00:17:56.030 --> 00:18:00.870\nto add a hard drive, sorry,\nAzureVhd, that's the command.\n\n362\n00:18:00.870 --> 00:18:05.100\nTo add a VHD to it, and\nyou can upload one that already exists.\n\n363\n00:18:05.100 --> 00:18:07.420\nSo you can bring one\nin that has that data.\n\n364\n00:18:07.420 --> 00:18:12.602\nLet me do a get-help for\n\n365\n00:18:12.602 --> 00:18:18.840\nAdd-AzureVhd -example.\n\n366\n00:18:18.840 --> 00:18:20.160\nHere we go, so you can see it.\n\n367\n00:18:20.160 --> 00:18:21.820\nSo here they show a couple\nof examples of doing that.\n\n368\n00:18:21.820 --> 00:18:25.380\nSo here they're doing\nAdd-AzureVhd -Destination, and\n\n369\n00:18:25.380 --> 00:18:27.520\nthey're specifying where to send it.\n\n370\n00:18:27.520 --> 00:18:30.600\nNow where they're sending it to,\nis your storage account.\n\n371\n00:18:30.600 --> 00:18:34.638\nEvery storage account has a URL, and\nit'll be whatever you named the storage\n\n372\n00:18:34.638 --> 00:18:38.990\naccount.blob.core.windows.net., all right?\n\n373\n00:18:38.990 --> 00:18:43.594\nAnd then you've got /vhdstore,\nit's a folder where all your VHDs go for\n\n374\n00:18:43.594 --> 00:18:45.510\nthat storage account.\n\n375\n00:18:45.510 --> 00:18:47.270\nAfter that, you name it whatever you want.\n\n376\n00:18:47.270 --> 00:18:51.210\nAnd then you say -LocalFilePath and\nyou specify the file on your system, and\n\n377\n00:18:51.210 --> 00:18:56.130\nthen it'll upload it right into the\nstorage account and make that available.\n\n378\n00:18:56.130 --> 00:18:58.500\nSo Add-AzureVhd.\n\n379\n00:18:58.500 --> 00:19:04.160\nOnce it's up there, then you can use\nthe Add-AzureDataDisk command like we did,\n\n380\n00:19:04.160 --> 00:19:08.350\nbut instead of -CreateNew, you can attach\none that's already existing the section,\n\n381\n00:19:08.350 --> 00:19:09.280\nthe default for that command.\n\n382\n00:19:09.280 --> 00:19:13.548\n-CreateNew, we had to add, to leave\n-CreateNew off, then you can specify\n\n383\n00:19:13.548 --> 00:19:17.949\nthe path to that disk and so we can get\nthat attached by using AddAzureDataDisk or\n\n384\n00:19:17.949 --> 00:19:22.547\neven just Add-AzureDisk, is another one\nthat we can use, actually it's the same\n\n385\n00:19:22.547 --> 00:19:27.105\nsetting nowadays, but you can use those\nand attach it, it's a great way to do it.\n\n386\n00:19:27.105 --> 00:19:30.050\nSo let's take a look at that Linux box\nthat we kind of abandoned earlier and\n\n387\n00:19:30.050 --> 00:19:33.014\nnow that it's rebooted, see if it's\nactually picked up its disk or not.\n\n388\n00:19:33.014 --> 00:19:38.540\nSo I'm just gonna get logged in to\nit here, and do a quick fdisk -l.\n\n389\n00:19:38.540 --> 00:19:42.287\nAnd it's always so much data here,\nlet me just filter that,\n\n390\n00:19:42.287 --> 00:19:44.730\nand look for anything with /dev in it.\n\n391\n00:19:44.730 --> 00:19:45.750\nThere we go.\n\n392\n00:19:45.750 --> 00:19:46.960\nAll right, so if I look at the disk,\n\n393\n00:19:46.960 --> 00:19:50.480\nI can see there's the 32 gig\nOperating System disk that I already had.\n\n394\n00:19:50.480 --> 00:19:56.107\nHere's the 15 gig temp disk, and now I've\ngot a nice, new /dev/sdd right there.\n\n395\n00:19:56.107 --> 00:19:59.134\nThat is 549.8 gigabytes.\n\n396\n00:19:59.134 --> 00:20:00.500\nWait a minute.\n\n397\n00:20:00.500 --> 00:20:04.250\nI told that I wanted 512 gigs and\nit's more well, yeah.\n\n398\n00:20:04.250 --> 00:20:06.420\nThere's different ways of measuring\nthe size of a disk and so\n\n399\n00:20:06.420 --> 00:20:08.380\nLinux is measuring it\na little differently there.\n\n400\n00:20:08.380 --> 00:20:11.070\nSo it's just kinda showing\nup with that different size.\n\n401\n00:20:11.070 --> 00:20:13.930\nBut it's ready for me to jump in there and\nstart partitioning it and using it.\n\n402\n00:20:13.930 --> 00:20:15.740\nIt's got the disk and there it is, right.\n\n403\n00:20:15.740 --> 00:20:18.780\nSo adding a disk to Linux, adding a disk\nto Windows all done the same way,\n\n404\n00:20:18.780 --> 00:20:22.850\nno crazy variations,\nwhich is kind of a nice thing.\n\n405\n00:20:22.850 --> 00:20:26.680\nJust be aware, depending on your Linux\ndistro, you might have to reboot before\n\n406\n00:20:26.680 --> 00:20:30.460\nthat disk shows up, a lot of them\nthough will actually auto detect.\n\n407\n00:20:30.460 --> 00:20:33.390\nLike if I had done Ubuntu machine or\nwhatever, it would have been fine, but\n\n408\n00:20:33.390 --> 00:20:36.150\non this one it just didn't auto detect,\nso I had to do a quick reboot.\n\n409\n00:20:36.150 --> 00:20:39.354\n>> Now Don, [SOUND] here's something I've\nbeen thinking about while we're sitting\n\n410\n00:20:39.354 --> 00:20:40.057\nhere doing this.\n\n411\n00:20:40.057 --> 00:20:43.917\nI don't remember if you mentioned this\nbefore the show or during the show, but\n\n412\n00:20:43.917 --> 00:20:47.897\nwe were talking about how Microsoft, when\nyou created this how it makes multiple\n\n413\n00:20:47.897 --> 00:20:51.830\ncopies of it or at least two copies of it,\nfor making sure that it's there.\n\n414\n00:20:51.830 --> 00:20:55.934\nIf I'm uploading my own disk though,\ndo I have to do the same thing or\n\n415\n00:20:55.934 --> 00:20:57.380\nthey gonna do it for me?\n\n416\n00:20:57.380 --> 00:20:58.335\nHelp me out with that.\n\n417\n00:20:58.335 --> 00:21:02.545\n>> Yeah, so what I said was,\nwhen you have a VHD up in Azure Cloud,\n\n418\n00:21:02.545 --> 00:21:05.655\nMicrosoft stores at least\nthree copies of it.\n\n419\n00:21:05.655 --> 00:21:08.779\nAnd so you'll have two copies in\nthe same stamp as your server and then,\n\n420\n00:21:08.779 --> 00:21:10.550\nyou'll have one copy in another stamp,\n\n421\n00:21:10.550 --> 00:21:13.540\nso it just kinda in a different\narea inside of the data center.\n\n422\n00:21:13.540 --> 00:21:16.480\nSo you've got what's called,\nlocal redundancy, and\n\n423\n00:21:16.480 --> 00:21:17.830\nlocal redundancy is great, right.\n\n424\n00:21:17.830 --> 00:21:20.440\nIf you have a physical hardware failure\non the backend, you don't even see it.\n\n425\n00:21:20.440 --> 00:21:23.360\nMicrosoft just shifts you over and\nyou keep running, and it's no big deal.\n\n426\n00:21:23.360 --> 00:21:26.680\nAs your data is written it's\nbeing written synchronously, so\n\n427\n00:21:26.680 --> 00:21:30.640\nit's being written to all three copies\nat the same time and it works out great.\n\n428\n00:21:30.640 --> 00:21:33.770\nWhen we upload our own VHD,\nit's doing that same thing.\n\n429\n00:21:33.770 --> 00:21:35.400\nIt's writing it to three different places.\n\n430\n00:21:35.400 --> 00:21:36.740\nWe don't have to change\nanything that we do,\n\n431\n00:21:36.740 --> 00:21:39.520\nwe don't even have to tell it,\nit just happens automatically.\n\n432\n00:21:39.520 --> 00:21:41.450\nBut, there's always a but, right?\n\n433\n00:21:41.450 --> 00:21:43.030\nWe can influence it.\n\n434\n00:21:43.030 --> 00:21:45.820\nWe can influence what it's doing,\ncuz there are certain options with it, and\n\n435\n00:21:45.820 --> 00:21:47.030\nlet me show you what I mean.\n\n436\n00:21:47.030 --> 00:21:49.156\nIt's actually the storage\naccount that defines it.\n\n437\n00:21:49.156 --> 00:21:51.217\nSo, remember,\nwhen we went into PowerShell,\n\n438\n00:21:51.217 --> 00:21:54.576\nI set what my default storage account was,\nand so we started uploading that.\n\n439\n00:21:54.576 --> 00:21:56.856\nWell, that storage account has settings,\nand\n\n440\n00:21:56.856 --> 00:21:59.545\nwe determine those when we\ncreate the storage account.\n\n441\n00:21:59.545 --> 00:22:01.975\nLet me show you here in the UI,\nit'll make a little more sense.\n\n442\n00:22:01.975 --> 00:22:05.752\nSo I'm gonna go into my UI,\nI'll go to my storage accounts.\n\n443\n00:22:05.752 --> 00:22:07.742\nAnd I'm gonna create\na new storage account.\n\n444\n00:22:07.742 --> 00:22:09.852\nAnd when I create that\nnew storage account,\n\n445\n00:22:09.852 --> 00:22:11.392\nit's going to ask me some questions.\n\n446\n00:22:11.392 --> 00:22:15.742\nNothing too brain teasing here, but\nsome that are actually kind of important.\n\n447\n00:22:15.742 --> 00:22:16.812\n>> Personal questions.\n\n448\n00:22:16.812 --> 00:22:17.774\n>> Personal questions.\n\n449\n00:22:17.774 --> 00:22:20.538\nIt's gonna really kind of break down\nour relationship with our parents.\n\n450\n00:22:20.538 --> 00:22:23.126\nSo basically when I go in here,\nI need to pick a name.\n\n451\n00:22:23.126 --> 00:22:26.209\nAnd the name does need to be unique\nacross the Azure environment,\n\n452\n00:22:26.209 --> 00:22:28.545\nbecause it's gonna give\nit this URL right here.\n\n453\n00:22:28.545 --> 00:22:32.670\nSomething.core.windows.net, so\nI'll call mine\n\n454\n00:22:32.670 --> 00:22:38.020\nitprotvdemostorage, which is already\ntaken so I'll get red flagged.\n\n455\n00:22:38.020 --> 00:22:40.530\nAnd then I'll just add a 2 to the end\nof it, cuz I'm very creative.\n\n456\n00:22:40.530 --> 00:22:43.650\nSo, itprotvdemostorage2, all right.\n\n457\n00:22:43.650 --> 00:22:46.370\nThen it asks for my Pricing tier.\n\n458\n00:22:46.370 --> 00:22:48.650\nWell, what is our Pricing tier?\n\n459\n00:22:48.650 --> 00:22:52.760\nThis is actually part of what's gonna\ninfluence how our data's being replicated.\n\n460\n00:22:52.760 --> 00:22:56.410\nNow, before I choose that,\nI'm gonna go down just a little bit,\n\n461\n00:22:56.410 --> 00:22:58.280\ncuz right here I've got Location.\n\n462\n00:22:58.280 --> 00:23:02.170\nThere are different features available\nin different locations, and so\n\n463\n00:23:02.170 --> 00:23:06.230\nI hate it when I start changing stuff up\nhere, and then when I choose my location\n\n464\n00:23:06.230 --> 00:23:08.460\nall of a sudden something goes away and\nit messes up my settings.\n\n465\n00:23:08.460 --> 00:23:10.140\nSo I always set the location first.\n\n466\n00:23:10.140 --> 00:23:13.880\nI'm gonna go and click on Location,\nand pick where I want it to go.\n\n467\n00:23:13.880 --> 00:23:15.600\nAnd I wanna go into East US 2.\n\n468\n00:23:15.600 --> 00:23:18.260\nThat's one of the newer data\ncenters that's got a lot of extra\n\n469\n00:23:18.260 --> 00:23:19.570\nhardware buried away in it.\n\n470\n00:23:19.570 --> 00:23:22.150\nAnd so now I've got that East US 2 chosen.\n\n471\n00:23:22.150 --> 00:23:26.650\nNow I'm gonna go back up here to my\nPricing tier, and in the Pricing tier,\n\n472\n00:23:26.650 --> 00:23:32.080\nI can pick between three plans,\nG, L, and R, right?\n\n473\n00:23:32.080 --> 00:23:35.170\nWell, there's actually more\nthan just three plans.\n\n474\n00:23:35.170 --> 00:23:37.440\nThere's five plans that I can think of.\n\n475\n00:23:37.440 --> 00:23:38.970\nThere might be a sixth these days.\n\n476\n00:23:38.970 --> 00:23:41.520\nBut there's five plans that\nI can think of offhand,\n\n477\n00:23:41.520 --> 00:23:43.300\nwe just only see three of them by default.\n\n478\n00:23:43.300 --> 00:23:45.761\nIf I hit View All,\nthey'll all start to show up,\n\n479\n00:23:45.761 --> 00:23:48.050\nwhich is probably why\nit's called View All.\n\n480\n00:23:48.050 --> 00:23:50.824\nBut they'll all start to show up and\nwe can start to see some of the different\n\n481\n00:23:50.824 --> 00:23:53.698\nones that appear, so like, P just\nappeared and Z just appeared, all right?\n\n482\n00:23:53.698 --> 00:23:55.108\nSo, what are each of these?\n\n483\n00:23:55.108 --> 00:23:56.186\nLet me start with L.\n\n484\n00:23:56.186 --> 00:23:58.136\nL is the default, locally redundant.\n\n485\n00:23:58.136 --> 00:23:59.464\nThat's what I was talking\nto you guys about.\n\n486\n00:23:59.464 --> 00:24:02.460\nYou get three local replicas.\n\n487\n00:24:02.460 --> 00:24:06.580\nThree replicas of your data that's being\nstored in that particular data center.\n\n488\n00:24:07.750 --> 00:24:11.680\nAnd this is what we normally expect,\nthere's that 500 max IOPS per disk,\n\n489\n00:24:11.680 --> 00:24:14.845\nyou can have queues, tables, blocks,\nwe'll talk about those later.\n\n490\n00:24:14.845 --> 00:24:16.250\n99.9% up time, right?\n\n491\n00:24:16.250 --> 00:24:18.880\nThis is normal stuff.\n\n492\n00:24:18.880 --> 00:24:23.560\nAnd the cost is $2.40 per 100 gigabytes.\n\n493\n00:24:24.810 --> 00:24:29.070\nSo, that's not a ton of money,\nand it's pretty good storage.\n\n494\n00:24:30.130 --> 00:24:33.180\nBut I can choose to go with some of\nthe other options to get more features.\n\n495\n00:24:33.180 --> 00:24:36.798\nFor example,\nI can choose to go geo-redundant.\n\n496\n00:24:36.798 --> 00:24:39.060\nAnd with geo-redundant,\nlook at this thing.\n\n497\n00:24:39.060 --> 00:24:42.750\nIt's gonna do six copies of my data,\nnot just three.\n\n498\n00:24:42.750 --> 00:24:46.060\nI'll have three local copies in my region,\nand\n\n499\n00:24:46.060 --> 00:24:50.000\nthree more copies in another\nregion somewhere else.\n\n500\n00:24:50.000 --> 00:24:52.450\nSo now,\nMicrosoft's gonna replicate that data.\n\n501\n00:24:52.450 --> 00:24:57.540\nIf I pick East US 2, it might choose\ntop put another copy in US West.\n\n502\n00:24:57.540 --> 00:25:01.430\nOr one of the European locations,\nit'll store it somewhere else.\n\n503\n00:25:01.430 --> 00:25:06.980\nThat way if a whole region fails,\nwe can end up somewhere else and be okay.\n\n504\n00:25:06.980 --> 00:25:09.605\nNow, locally redundant\nis still pretty good.\n\n505\n00:25:09.605 --> 00:25:13.965\nInside of a region,\neach stamp is completely independent.\n\n506\n00:25:13.965 --> 00:25:16.655\nIt's got its own Internet connection,\nits own power, its own generators,\n\n507\n00:25:16.655 --> 00:25:19.315\nits own UPS,\nown network operations center.\n\n508\n00:25:19.315 --> 00:25:20.615\nIt's got own everything.\n\n509\n00:25:20.615 --> 00:25:22.505\nEach little stamp is independent.\n\n510\n00:25:22.505 --> 00:25:27.655\nSo if a stamp fails, I'm redundant to\nanother stamp in that same region,\n\n511\n00:25:27.655 --> 00:25:29.700\nand that's good enough for most people.\n\n512\n00:25:29.700 --> 00:25:33.680\nBut if a whole region were to fail,\nthat's where geo-redundant comes in.\n\n513\n00:25:33.680 --> 00:25:38.810\nWell, geo-redundant is storing more copies\nand so, my head's actually covering it up,\n\n514\n00:25:38.810 --> 00:25:42.380\nbut down here you can see\nwhere it's $2.40 for 100 gigs.\n\n515\n00:25:42.380 --> 00:25:44.190\nNormally it's $4.80 for 100 gigs.\n\n516\n00:25:44.190 --> 00:25:46.970\nAnd this one is twice the cost.\n\n517\n00:25:46.970 --> 00:25:49.298\nYou store twice the copies,\nit's twice the cost.\n\n518\n00:25:49.298 --> 00:25:51.700\nThat makes sense.\n\n519\n00:25:51.700 --> 00:25:55.670\nNow, one thing about the geo-redundant\ncopy is the distributed replica,\n\n520\n00:25:55.670 --> 00:25:56.590\nyou can't touch them.\n\n521\n00:25:56.590 --> 00:25:58.420\nYou're not allowed to use them.\n\n522\n00:25:58.420 --> 00:26:00.240\nThey exist,\nyou can see that they exist, but\n\n523\n00:26:00.240 --> 00:26:02.820\nyou're not allowed to touch them\nunless you fail over to them.\n\n524\n00:26:02.820 --> 00:26:04.770\nWhen you fail over,\nthen you can touch them.\n\n525\n00:26:04.770 --> 00:26:08.410\nSo while there are six copies,\nyou're really only working with three.\n\n526\n00:26:08.410 --> 00:26:11.580\nAnd you write synchronously\nto these three, but\n\n527\n00:26:11.580 --> 00:26:14.050\nyou write asynchronous to these three.\n\n528\n00:26:14.050 --> 00:26:15.540\nTo the remotes, right?\n\n529\n00:26:15.540 --> 00:26:19.230\nIt doesn't want to hold up your rights\nin your main data center while it's\n\n530\n00:26:19.230 --> 00:26:21.900\nwaiting to write somewhere\nelse on the globe.\n\n531\n00:26:21.900 --> 00:26:23.560\nSo it will speed those up.\n\n532\n00:26:23.560 --> 00:26:27.980\nBut it does cost more, if you want\nto take advantage of those replicas.\n\n533\n00:26:27.980 --> 00:26:31.790\nThey do support,\nlet's see it's buried somewhere down here,\n\n534\n00:26:31.790 --> 00:26:35.190\nwhat's called a read access GO replica.\n\n535\n00:26:35.190 --> 00:26:36.270\nThis guy right here in r.\n\n536\n00:26:36.270 --> 00:26:40.430\nAnd with these guys you still have\nthe three and three, right, but\n\n537\n00:26:40.430 --> 00:26:44.410\nIf not,\nyou can actually read from your replicas.\n\n538\n00:26:44.410 --> 00:26:47.450\nSo if you got a database stuck out\nthere you could be running reports\n\n539\n00:26:47.450 --> 00:26:48.710\noff of that read only copy.\n\n540\n00:26:48.710 --> 00:26:51.900\nOr you could be taking your backups\noff that read only copy and\n\n541\n00:26:51.900 --> 00:26:54.000\nnot effecting your production data.\n\n542\n00:26:54.000 --> 00:26:56.310\nBackups actually occur\noff of a replica already,\n\n543\n00:26:56.310 --> 00:26:58.120\nit's just one of the local replicas.\n\n544\n00:26:58.120 --> 00:27:01.950\nSo these let you back it up from\na completely geo located replica.\n\n545\n00:27:01.950 --> 00:27:04.055\nSo you got that option,\nbut there is a cost to it.\n\n546\n00:27:04.055 --> 00:27:06.610\n$6.10 per 100 gigs.\n\n547\n00:27:06.610 --> 00:27:09.600\nSo we went from $2.40 to $4.80,\nnow we go to $6.10, so\n\n548\n00:27:09.600 --> 00:27:14.860\nwe're almost three times the cost of\nthe LRS that we normally have, the local.\n\n549\n00:27:16.100 --> 00:27:20.310\nThen there's two special kinds.\n\n550\n00:27:20.310 --> 00:27:26.750\nThe special replication types,\nwe've got zone redundant.\n\n551\n00:27:26.750 --> 00:27:31.610\nZone redundant is kind of in between L and\nG.\n\n552\n00:27:31.610 --> 00:27:32.690\nL was local.\n\n553\n00:27:32.690 --> 00:27:36.170\nWhere we had three copies stored\nright here in our data center.\n\n554\n00:27:36.170 --> 00:27:38.980\nAnd then, let's see, that was this one, L.\n\n555\n00:27:38.980 --> 00:27:40.850\nAnd then G was where we had six copies.\n\n556\n00:27:40.850 --> 00:27:43.190\nThree in our data center,\nthree somewhere else.\n\n557\n00:27:43.190 --> 00:27:47.010\nZone redundant is where\nwe have three copies\n\n558\n00:27:47.010 --> 00:27:49.350\nin multiple zones in the data center.\n\n559\n00:27:49.350 --> 00:27:53.150\nSo in the data center Microsoft\nhas it divided up by these stamps,\n\n560\n00:27:53.150 --> 00:27:56.560\nthese independent areas and it makes\nsure that we're redundant across those.\n\n561\n00:27:56.560 --> 00:27:58.210\nNow normally we already are.\n\n562\n00:27:58.210 --> 00:28:00.820\nWe've already got one copy of\nthis in one of these other areas.\n\n563\n00:28:00.820 --> 00:28:04.350\nHere they make sure that all three\ncopies are spread out that way.\n\n564\n00:28:04.350 --> 00:28:08.830\nAnd so what's why, if you look at the cost\nof that, it's not that much higher.\n\n565\n00:28:08.830 --> 00:28:12.820\nThe cost on it is only $3.00 versus $2.40,\nnow we're $3.00 not much more cuz it's not\n\n566\n00:28:12.820 --> 00:28:17.380\nreally that much more redundancy, we're\nalready getting some of that redundancy.\n\n567\n00:28:17.380 --> 00:28:20.580\nBut notice this,\nit's only supported for block and blob.\n\n568\n00:28:20.580 --> 00:28:22.560\nIt doesn't work for table and queue.\n\n569\n00:28:22.560 --> 00:28:25.920\nWell, VHDs are stored as block blobs.\n\n570\n00:28:25.920 --> 00:28:29.380\nSo that works for VHDs, doesn't work for\nsome of the other stuff.\n\n571\n00:28:29.380 --> 00:28:31.270\nThis is one of the probably\nleast used though.\n\n572\n00:28:32.930 --> 00:28:37.550\nThe only other one that I\nhaven't talked about is P.\n\n573\n00:28:37.550 --> 00:28:40.490\nAnd P is the premium locally redundant.\n\n574\n00:28:40.490 --> 00:28:45.830\nIt's still locally redundant, just like L,\nbut the difference is the IOs.\n\n575\n00:28:45.830 --> 00:28:50.420\nIn a normal storage account, you've\ngot a max of 5 hundred IOPS per disk.\n\n576\n00:28:50.420 --> 00:28:53.813\nIn a premium it's 5,000.\n\n577\n00:28:53.813 --> 00:28:57.800\nYou get 10 times the IOs on a premium.\n\n578\n00:28:57.800 --> 00:29:01.900\nAnd so if I'm trying to get the best\ndisk performance, I want one of those.\n\n579\n00:29:01.900 --> 00:29:06.980\nSo when I create a storage account,\nI pick between these 5 tiers, which\n\n580\n00:29:06.980 --> 00:29:10.420\none I want based on my needs, and based\non the amount of money I wanna spend.\n\n581\n00:29:10.420 --> 00:29:13.680\nAnd then when I create a blank VHD,\nor when I upload a VHD,\n\n582\n00:29:13.680 --> 00:29:18.180\nwhen I send it into that storage account\nit's gonna take on these properties.\n\n583\n00:29:18.180 --> 00:29:23.890\nSo if we upload Daniels VHD, and I upload\nit into a storage account that was set for\n\n584\n00:29:23.890 --> 00:29:26.480\na premium,\nit's gonna get three copies made,\n\n585\n00:29:26.480 --> 00:29:31.270\nand I'm gonna have 5,000 IOPS's on it,\nand it's gonna scream, right?\n\n586\n00:29:31.270 --> 00:29:34.510\nOr if I upload it into a G,\nthen it's gonna have that characteristic\n\n587\n00:29:34.510 --> 00:29:39.190\nof being stored in two different regions,\nthree copies each, six copies total.\n\n588\n00:29:39.190 --> 00:29:40.270\nWe have to pick.\n\n589\n00:29:40.270 --> 00:29:42.220\nNotice that premium It's $17.92.\n\n590\n00:29:42.220 --> 00:29:46.780\nIt's significantly more expensive\nthan any of the others,\n\n591\n00:29:46.780 --> 00:29:50.740\ncuz you're getting ten\ntimes the disk access.\n\n592\n00:29:50.740 --> 00:29:52.050\n>> It's a very nice feature, though.\n\n593\n00:29:52.050 --> 00:29:54.000\nIt's gonna depend on what\nenvironment you're in.\n\n594\n00:29:54.000 --> 00:29:56.050\nYou gotta figure out what\nyou're gonna go with.\n\n595\n00:29:56.050 --> 00:29:57.640\nSo you really gotta try to break it down.\n\n596\n00:29:57.640 --> 00:30:00.650\nLook at each one of the different\ntiers that they have.\n\n597\n00:30:00.650 --> 00:30:03.600\nAnd try to figure out which one\nis gonna work best for you.\n\n598\n00:30:03.600 --> 00:30:05.960\nNow speaking of trying to figure out\nwhich one is gonna work best for\n\n599\n00:30:05.960 --> 00:30:09.620\nus, we're looking at those IOPS,\nthose disk input/output.\n\n600\n00:30:09.620 --> 00:30:10.870\nIt's a very important thing.\n\n601\n00:30:10.870 --> 00:30:12.620\nWe're talking about storage here.\n\n602\n00:30:12.620 --> 00:30:17.570\nAnd in this day and age of doing\nthings like super big databases or\n\n603\n00:30:17.570 --> 00:30:21.200\nvideo rendering, that kind of stuff,\nhow do I know that I'm getting that, Don?\n\n604\n00:30:21.200 --> 00:30:23.200\nThat's really the question is.\n\n605\n00:30:23.200 --> 00:30:26.170\nHow do I know if need\na 500 versus a 5,000?\n\n606\n00:30:26.170 --> 00:30:29.480\nWhat is there that's gonna\nallow me to see that and\n\n607\n00:30:29.480 --> 00:30:31.440\nthen make my decision accordingly?\n\n608\n00:30:31.440 --> 00:30:35.650\n>> Some people, like database admins, if\nyou go to them they make it their job to\n\n609\n00:30:35.650 --> 00:30:38.340\nknow how many IOs they're generating,\nit's really important.\n\n610\n00:30:38.340 --> 00:30:41.370\nBut that's not something you\ndeal with My recommendation is,\n\n611\n00:30:41.370 --> 00:30:43.460\ndon't start with the premiums,\nstart with the low end.\n\n612\n00:30:43.460 --> 00:30:46.320\nBecause what you can do, is you can\nmonitor for when you're being throttled.\n\n613\n00:30:46.320 --> 00:30:48.730\nWhen you hit your limit you get\nthrottled back and you can monitor for\n\n614\n00:30:48.730 --> 00:30:51.970\nwhen that happens, and that will tell you\nyou need to step up to the next level.\n\n615\n00:30:51.970 --> 00:30:53.720\nAnd it's actually not\nthat hard to monitor.\n\n616\n00:30:53.720 --> 00:30:56.770\nIf we want to do it,\nall we have to do is go into our UI,\n\n617\n00:30:56.770 --> 00:31:01.810\ngo into your storage account, let me just\ngo back to my storage accounts here.\n\n618\n00:31:03.210 --> 00:31:09.040\nAnd I'll pick maybe my ITProTV demo\naccount that we've got from before.\n\n619\n00:31:10.080 --> 00:31:12.180\nI'm just gonna discard\ncreating that new one.\n\n620\n00:31:12.180 --> 00:31:13.780\nSo I'm gonna pick this guy.\n\n621\n00:31:13.780 --> 00:31:17.250\nIt's really wanting me to be aware\nof me discarding those changes.\n\n622\n00:31:17.250 --> 00:31:19.460\nSo I'm gonna go into my\nITProTV demo storage, and\n\n623\n00:31:19.460 --> 00:31:21.380\nso here I can see the account\nthat I've already got.\n\n624\n00:31:21.380 --> 00:31:25.690\nIt's in East US 2, it's available,\nI've already got some data in here.\n\n625\n00:31:25.690 --> 00:31:29.310\nAnd on the right side,\nas I go into my settings over here,\n\n626\n00:31:29.310 --> 00:31:32.720\nwhat I'll see is I've\ngot a monitor section.\n\n627\n00:31:32.720 --> 00:31:36.290\nAnd I can create alert rules,\naudit logs and diagnostics.\n\n628\n00:31:36.290 --> 00:31:39.854\nUnder alerts rules,\nI can create a rule that monitors for\n\n629\n00:31:39.854 --> 00:31:42.536\nwhen I'm being throttled it notifies me.\n\n630\n00:31:42.536 --> 00:31:47.097\nAnd so I can turn this on, and if I never\nget an alert, I can just stay at 500 IOs,\n\n631\n00:31:47.097 --> 00:31:47.970\nI'll be fine.\n\n632\n00:31:47.970 --> 00:31:50.499\nBut if it starts to hit alerts a lot,\nthen I know, eh,\n\n633\n00:31:50.499 --> 00:31:52.032\nmaybe I need to step this one up.\n\n634\n00:31:52.032 --> 00:31:56.644\nAnd I could move it to premium storage or\nI could add a second data disc,\n\n635\n00:31:56.644 --> 00:32:00.645\nbond them together and\ndouble my IOs on that system, right?\n\n636\n00:32:00.645 --> 00:32:03.501\nSo there's different ways to solve that,\nand we'll show that in another episode.\n\n637\n00:32:03.501 --> 00:32:07.758\nBut I'm gonna go in here to Alert rules\nand you'll see I haven't created any,\n\n638\n00:32:07.758 --> 00:32:09.850\nso I've got no alert rules yet.\n\n639\n00:32:09.850 --> 00:32:11.820\nI'll choose to add an alert rule.\n\n640\n00:32:11.820 --> 00:32:16.240\nAnd now, it's gonna start asking me some\nof the settings for this particular alert.\n\n641\n00:32:16.240 --> 00:32:18.760\nSo, it's gonna ask what I'm monitoring.\n\n642\n00:32:18.760 --> 00:32:22.180\nAnd I went into itprotvdemostorage, that's\nwhat it's already got chosen for me.\n\n643\n00:32:22.180 --> 00:32:23.520\nI can give it an alert.\n\n644\n00:32:23.520 --> 00:32:28.674\nI'll call it IOPS Throttling.\n\n645\n00:32:28.674 --> 00:32:32.700\nI can give it a Description if I care for\nthat, and then I can pick a Metric.\n\n646\n00:32:32.700 --> 00:32:36.030\nAnd in my Metric list,\nthere's a lot of stuff in here.\n\n647\n00:32:36.030 --> 00:32:39.860\nAnd the one that I'm looking for\nis not jumping out at me.\n\n648\n00:32:39.860 --> 00:32:42.930\nThere it is, ThrottlingError, okay?\n\n649\n00:32:42.930 --> 00:32:45.160\nI'm gonna monitor for\nthat ThrottlingError.\n\n650\n00:32:45.160 --> 00:32:48.210\nSo when the system generates\na ThrottlingError where I hit my limit,\n\n651\n00:32:48.210 --> 00:32:49.730\nI want it to notify me.\n\n652\n00:32:49.730 --> 00:32:51.760\nAnd so I can tell it that's\nwhat I'm trying to do.\n\n653\n00:32:52.830 --> 00:32:54.700\nAnd then when I create that error,\n\n654\n00:32:54.700 --> 00:32:57.990\nas you scroll down you can see if\nit's greater than a certain amount.\n\n655\n00:32:57.990 --> 00:33:00.950\nAnd normally you want that\nthrottling error to be about 0,\n\n656\n00:33:00.950 --> 00:33:03.760\nwhich you can see mine's\nbeen flatlined at 0.\n\n657\n00:33:03.760 --> 00:33:07.818\nI haven't hit my limit.\n\n658\n00:33:07.818 --> 00:33:11.917\nSo I'll say if the Threshold is 1,\nfor a period of, and\n\n659\n00:33:11.917 --> 00:33:14.284\nthen I just need to say how long.\n\n660\n00:33:14.284 --> 00:33:18.620\nSo if I'm exceeding that for greater\nthan an hour, I want to know about it.\n\n661\n00:33:18.620 --> 00:33:24.070\nAnd I can say email the admins, or I can\nspecify a particular person to email.\n\n662\n00:33:24.070 --> 00:33:26.330\nAnd now it'll let us know if\nwe hit that throttling error.\n\n663\n00:33:26.330 --> 00:33:27.070\nAnd I can say, OK.\n\n664\n00:33:27.070 --> 00:33:28.170\nIt's gonna whip that up.\n\n665\n00:33:28.170 --> 00:33:31.270\nAnd now I've got an alert created.\n\n666\n00:33:31.270 --> 00:33:34.350\nAnd I'm monitoring for\nany IOPS throttling.\n\n667\n00:33:34.350 --> 00:33:38.300\nSo that's kinda cool because\nI can start with a 500 and\n\n668\n00:33:38.300 --> 00:33:41.410\nmaybe that turns out to be fine and\nI don't need to pay the extra money.\n\n669\n00:33:41.410 --> 00:33:44.337\nOr I can see I'm exceeding it so\nI can add one disk, and\n\n670\n00:33:44.337 --> 00:33:45.977\nthen see if I still exceed it.\n\n671\n00:33:45.977 --> 00:33:48.467\nAnd if I do I can add another disk,\nand I can add another and another,\n\n672\n00:33:48.467 --> 00:33:49.760\njust keep going, right?\n\n673\n00:33:49.760 --> 00:33:53.170\nYou can always run Windows performance\nmonitor and check for IOPS's in there too,\n\n674\n00:33:53.170 --> 00:33:54.020\nit will show it.\n\n675\n00:33:54.020 --> 00:33:56.111\nBut monitoring it from here's\na lot more accurate and so\n\n676\n00:33:56.111 --> 00:33:57.634\nthat's why I normally do it right here.\n\n677\n00:33:57.634 --> 00:34:01.315\n>> Awesome, well that's not too difficult,\nit's actually pretty easy to set that up.\n\n678\n00:34:01.315 --> 00:34:04.482\nIs there anything else we need\nto know about the monitoring or\n\n679\n00:34:04.482 --> 00:34:06.667\nthe storage types or anything like that?\n\n680\n00:34:06.667 --> 00:34:07.607\n>> That's it for this.\n\n681\n00:34:07.607 --> 00:34:10.257\nI know I've mentioned a few times\nthat we can add more discs in and\n\n682\n00:34:10.257 --> 00:34:11.162\nbond them together.\n\n683\n00:34:11.162 --> 00:34:14.267\nI wanna show the viewers that, so maybe\nwe'll do another episode on creating what\n\n684\n00:34:14.267 --> 00:34:16.659\nare called storage pools, and\nwe'll get a chance to see that.\n\n685\n00:34:16.659 --> 00:34:19.724\nAnd then there's a few other little\nstorage things we might wrap up in another\n\n686\n00:34:19.724 --> 00:34:22.521\nepisode, but for this one that's\nprobably a good spot for us to stop.\n\n687\n00:34:22.521 --> 00:34:23.299\n>> Well awesome Don.\n\n688\n00:34:23.299 --> 00:34:25.412\nThank you so much for\nthose demonstrations,\n\n689\n00:34:25.412 --> 00:34:28.480\nit's actually very helpful for\nus if we're new to this like I am.\n\n690\n00:34:28.480 --> 00:34:32.220\nI haven't worked with Azure as much\nas Don has, so it is very helpful.\n\n691\n00:34:32.220 --> 00:34:34.460\nThat being said, we're gonna go ahead and\nclose this show down.\n\n692\n00:34:34.460 --> 00:34:35.940\nThank you so much for watching.\n\n693\n00:34:35.940 --> 00:34:39.150\nSigning off for ITProTV,\nI've been your host Daniel Lowry.\n\n694\n00:34:39.150 --> 00:34:39.930\n>> And I'm Don Pezet.\n\n695\n00:34:39.930 --> 00:34:41.302\n>> And we'll see you next time.\n\n696\n00:34:41.302 --> 00:34:47.780\n[SOUND]\n\n",
          "vimeoId": "148667861"
        },
        {
          "description": "In this episode, Don and Daniel explain the concept and application of storage pools with Azure Virtual Machines. They start by creating a storage pool in a Windows environment using Storage Services. Then they jump over into a Linux VM and show you how partition disks using fdisk and then use LVM to group disks together to create a Volume Group and a Logical Volume.",
          "length": "1720",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-2-2-storage_pools-120315-2.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-2-2-storage_pools-120315-2-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-2-2-storage_pools-120315-2-sm.jpg",
          "title": "Storage Pools",
          "transcript": "WEBVTT\n\n1\n00:00:00.129 --> 00:00:10.129\n[MUSIC]\n\n2\n00:00:12.337 --> 00:00:17.087\nAll right, greetings, everyone and welcome\nto another great episode of ITProTV.\n\n3\n00:00:17.087 --> 00:00:18.796\nI'm your host, Daniel Lowrie.\n\n4\n00:00:18.796 --> 00:00:20.111\nAnd in today's episode,\n\n5\n00:00:20.111 --> 00:00:23.780\nwe're gonna be looking at more\nMicrosoft Azure virtual machines.\n\n6\n00:00:23.780 --> 00:00:27.860\nAnd joining us on the show today, none\nother than my good friend, Mr. Don Pezet.\n\n7\n00:00:27.860 --> 00:00:28.504\nDon, welcome to the show.\n\n8\n00:00:28.504 --> 00:00:29.379\nHow are you doing today?\n\n9\n00:00:29.379 --> 00:00:30.597\n>> Doing great, Daniel, thanks for\n\n10\n00:00:30.597 --> 00:00:33.212\nhaving me back on the show, and\nwe're gonna cover some neat stuff today.\n\n11\n00:00:33.212 --> 00:00:35.527\nWe're gonna take a look\nat storage pools and\n\n12\n00:00:35.527 --> 00:00:38.987\ncombining disks on our virtual\nmachinesto create larger disks.\n\n13\n00:00:38.987 --> 00:00:43.958\nIn a previous episode, I made a comment\nabout how when we create data disks in\n\n14\n00:00:43.958 --> 00:00:49.163\nAzure the default is at a limit of 500\nIOPSs, or Input/Outputs Per Second,\n\n15\n00:00:49.163 --> 00:00:52.910\nand I said there was a way we\ncould kinda get around that.\n\n16\n00:00:52.910 --> 00:00:56.656\nWe could take multiple disks and bond them\ntogether to increase that IOPS count,\n\n17\n00:00:56.656 --> 00:00:59.909\nwithout having to go to one of those\nreally expensive high performance\n\n18\n00:00:59.909 --> 00:01:00.587\ndisk arrays.\n\n19\n00:01:00.587 --> 00:01:04.170\nSo I said there was a way to do it,\nbut we didn't actually see it.\n\n20\n00:01:04.170 --> 00:01:07.758\nAnd so in this episode, I wanna take some\ntime and show you guys how that works, and\n\n21\n00:01:07.758 --> 00:01:11.260\nhow we can implement that on Windows and\nLinux virtual machines.\n\n22\n00:01:11.260 --> 00:01:14.450\n>> Well, Don, this is gonna be a lot of\nfun, because getting around limitations,\n\n23\n00:01:14.450 --> 00:01:16.080\nthat's always a great time.\n\n24\n00:01:16.080 --> 00:01:17.400\nAnd using things to our advantage, so\n\n25\n00:01:17.400 --> 00:01:19.670\nit's something that is\ngonna be practical for us.\n\n26\n00:01:19.670 --> 00:01:21.204\nAnd not in just that sense, but\n\n27\n00:01:21.204 --> 00:01:23.921\nin the sense of creating\na storage pool is a great idea.\n\n28\n00:01:23.921 --> 00:01:27.638\nI mean, there are many different ways\nin which this can be implemented, so\n\n29\n00:01:27.638 --> 00:01:31.060\nus being able to know how to do that,\nand work with that inside of Azure\n\n30\n00:01:31.060 --> 00:01:35.060\nis gonna be a really good thing, so I\nguess it takes down to where do we begin?\n\n31\n00:01:35.060 --> 00:01:35.820\nHow do we do this?\n\n32\n00:01:35.820 --> 00:01:36.754\nIs this something done in Azure?\n\n33\n00:01:36.754 --> 00:01:38.253\nIs it done in Windows?\n\n34\n00:01:38.253 --> 00:01:39.586\nHow's this work itself out?\n\n35\n00:01:39.586 --> 00:01:41.803\n>> All right, well it can be done\nin a number of different ways and\n\n36\n00:01:41.803 --> 00:01:42.921\nlet's say money is no object.\n\n37\n00:01:42.921 --> 00:01:45.045\n>> Well with me, it's not.\n\n38\n00:01:45.045 --> 00:01:47.374\n[LAUGH]\n>> If you're fortunate, or you work for\n\n39\n00:01:47.374 --> 00:01:50.470\nthe government, then money is no object,\nand you can spend up whatever you need.\n\n40\n00:01:50.470 --> 00:01:54.385\nFor you, the IOPS limit isn't a big deal,\nbecause when you deploy your storage,\n\n41\n00:01:54.385 --> 00:01:58.305\nyou can always deploy it into a storage\naccount that's got performance optimized\n\n42\n00:01:58.305 --> 00:01:58.837\nstorage.\n\n43\n00:01:58.837 --> 00:02:01.590\nLet's recap that,\nI know we saw it in another episode.\n\n44\n00:02:01.590 --> 00:02:06.050\nI'm logged in to my Azure portal here, and\nwhen I go down to my storage accounts and\n\n45\n00:02:06.050 --> 00:02:08.170\ncreate a new storage account.\n\n46\n00:02:08.170 --> 00:02:10.400\nSo I can just come in here and\nadd a new one.\n\n47\n00:02:10.400 --> 00:02:11.840\nWhen I go to add a storage account,\n\n48\n00:02:11.840 --> 00:02:15.450\nit asks me to pick from the various types\nof storage accounts that are available.\n\n49\n00:02:15.450 --> 00:02:17.578\nAnd if I go in here to the tiers,\nor whatever,\n\n50\n00:02:17.578 --> 00:02:19.879\nI can see the different\ntiers that are out there.\n\n51\n00:02:19.879 --> 00:02:24.368\nAnd when we start kind of browsing through\nthem, there's this one tier that's\n\n52\n00:02:24.368 --> 00:02:29.004\nkind of hidden by default, which is the\nPremium Locally Redundant storage tier.\n\n53\n00:02:29.004 --> 00:02:32.959\nAnd on a normal storage\ntier I've got this limit,\n\n54\n00:02:32.959 --> 00:02:39.379\nthe limit of 500 I/Os per second per disk,\nbut on this one it's 5,000.\n\n55\n00:02:39.379 --> 00:02:45.671\nI could have ten times the I/Os on that\ndisk if I just go with that premium tier.\n\n56\n00:02:45.671 --> 00:02:48.714\nI guess it's kinda hard to see here, but\n\n57\n00:02:48.714 --> 00:02:52.754\nthe normal tier is gonna\ncost us $2.40 per hour.\n\n58\n00:02:52.754 --> 00:02:56.087\nWait, it's not per hour is it?\n\n59\n00:02:56.087 --> 00:02:59.129\nIt's per, shoot, now I've forgotten\nwhat the interval is for it.\n\n60\n00:02:59.129 --> 00:03:00.047\n>> Is it per minute?\n\n61\n00:03:00.047 --> 00:03:02.421\n>> But, no it's not per minute,\nthat would leave us bankrupt.\n\n62\n00:03:02.421 --> 00:03:03.253\n>> [LAUGH] That'd be killing you.\n\n63\n00:03:03.253 --> 00:03:08.171\n>> So, but anyhow $2.40, the premium one,\nif you look at it, is like $19.71.\n\n64\n00:03:08.171 --> 00:03:12.290\nThat's over eight times the cost,\nthat's a lot of money, right?\n\n65\n00:03:12.290 --> 00:03:16.220\nSo not everybody is gonna have\nthat option available for them.\n\n66\n00:03:16.220 --> 00:03:18.171\nSo for the rest of us, what do we do?\n\n67\n00:03:18.171 --> 00:03:19.970\nNow, even if money wasn't an object,\n\n68\n00:03:19.970 --> 00:03:22.212\nthere's still a time where this isn't so\ngood.\n\n69\n00:03:22.212 --> 00:03:28.879\nMaybe I know that my particular\napplication generates 750 I/Os per second.\n\n70\n00:03:28.879 --> 00:03:33.628\nWell, does it make sense that I have to go\nfrom 500 to 5,000 when I just need 750?\n\n71\n00:03:33.628 --> 00:03:36.020\nIt doesn't, and Microsoft knows that.\n\n72\n00:03:36.020 --> 00:03:38.272\nSo they have a technique,\nthis isn't me cheating the system,\n\n73\n00:03:38.272 --> 00:03:40.840\nthis is Microsoft fully acknowledges\nthis is the way to do it.\n\n74\n00:03:40.840 --> 00:03:45.091\nIf I need to get to 1,000 IOPSs or\n2,000 or 5,000,\n\n75\n00:03:45.091 --> 00:03:48.955\nwell 5,000 will get used by this,\nbut anything less,\n\n76\n00:03:48.955 --> 00:03:52.837\nI can spin up more than one data disk and\nbond them together.\n\n77\n00:03:52.837 --> 00:03:55.587\nAnd when you do that,\nyou increase the IOPSs.\n\n78\n00:03:55.587 --> 00:03:59.934\nSo if I need 750, I can take two disks and\nbond them together, and\n\n79\n00:03:59.934 --> 00:04:05.836\nI would get 500 for one disk, 500 for\nthe other, now I get 1,000 IOPSs, right?\n\n80\n00:04:05.836 --> 00:04:10.087\nSo this is how we can get by, if we do\nfour disks we'd end up with 2,000 IOPSs.\n\n81\n00:04:10.087 --> 00:04:14.201\nAnd depending on your\nvirtual machine size,\n\n82\n00:04:14.201 --> 00:04:18.190\nyou can add between 2 and 64 data disks.\n\n83\n00:04:18.190 --> 00:04:19.470\nIf you do just like, a D1,\n\n84\n00:04:19.470 --> 00:04:23.750\nwhich is what I'm using mostly here on the\nshow, I can only add two data disks to it.\n\n85\n00:04:23.750 --> 00:04:28.151\nBut if I'd done a G5,\nI could add 64 data disks, and\n\n86\n00:04:28.151 --> 00:04:32.087\n64 times 500, what is that, 3,200?\n\n87\n00:04:32.087 --> 00:04:32.963\n>> You're asking the wrong guy.\n\n88\n00:04:32.963 --> 00:04:34.837\n[LAUGH]\n>> 32,000?\n\n89\n00:04:34.837 --> 00:04:35.461\n>> That's a lot.\n\n90\n00:04:35.461 --> 00:04:36.300\n>> 32,000?\n\n91\n00:04:36.300 --> 00:04:40.105\nYeah, that's right, 32,000 IOPSs\nall off of these extra data disks,\n\n92\n00:04:40.105 --> 00:04:41.672\nwithout even going to premium.\n\n93\n00:04:41.672 --> 00:04:45.298\nIf I go to premium,\neach of those disks are using 5,000.\n\n94\n00:04:45.298 --> 00:04:48.723\nAnd if I had 64 disks times 5,000,\nI definitely can't do that math,\n\n95\n00:04:48.723 --> 00:04:51.665\nyou're gonna end up with just a huge\namount of I/Os per second and\n\n96\n00:04:51.665 --> 00:04:53.740\nyou really get that disk performance.\n\n97\n00:04:53.740 --> 00:04:56.260\nSo, the functionality\nis there if we need it.\n\n98\n00:04:56.260 --> 00:04:59.810\nWe can have that to jump in and\nreally get the performance gain.\n\n99\n00:04:59.810 --> 00:05:02.750\nBut we just have to implement it,\nand it is done differently.\n\n100\n00:05:02.750 --> 00:05:07.030\nSo what I did is before the show I\ntook two of my virtual machines,\n\n101\n00:05:07.030 --> 00:05:09.830\nI took a Windows machine and\na Linux machine.\n\n102\n00:05:09.830 --> 00:05:13.077\nAnd I'll take this Windows\none first here itprotv-demo1.\n\n103\n00:05:13.077 --> 00:05:16.962\nSo itprotv-demo1,\nit's a Windows virtual machine, it's a D1.\n\n104\n00:05:16.962 --> 00:05:20.700\nAnd what I did is I added two disks to it.\n\n105\n00:05:20.700 --> 00:05:23.960\nSo if I browse into its, oh,\nwait I'm not in my virtual machines,\n\n106\n00:05:23.960 --> 00:05:24.790\nI'm in my cloud services.\n\n107\n00:05:24.790 --> 00:05:26.046\nLet me get back to my virtual machines.\n\n108\n00:05:26.046 --> 00:05:28.421\nIt helps if I'm looking\nat the right object.\n\n109\n00:05:28.421 --> 00:05:31.861\nSo if I go into itprotv-demo1,\nand I pull up its disks,\n\n110\n00:05:31.861 --> 00:05:33.879\nI've added two data disks to it.\n\n111\n00:05:33.879 --> 00:05:37.046\nI haven't actually set them up yet,\nI just added them so they're there.\n\n112\n00:05:37.046 --> 00:05:40.549\nSo, we'll see right here, I've these two\ndata disks sitting here available for\n\n113\n00:05:40.549 --> 00:05:41.171\nthe machine.\n\n114\n00:05:41.171 --> 00:05:45.983\nAnd I did the same thing for my Linux box,\nthe Linux box is my itprotv-demo4.\n\n115\n00:05:45.983 --> 00:05:49.341\nAnd if I go and dig into it and\nI did the same exact thing,\n\n116\n00:05:49.341 --> 00:05:54.378\nI added two 500 gig disks, and what I can\ndo is I can bond those disks together and\n\n117\n00:05:54.378 --> 00:05:57.810\nend up with 1,000 I/Os,\nso that's pretty cool.\n\n118\n00:05:58.870 --> 00:06:00.270\nSo that's what I wanna see.\n\n119\n00:06:00.270 --> 00:06:03.212\nSo to start with,\nlet's kick off on that Windows machine.\n\n120\n00:06:03.212 --> 00:06:06.279\nI'm remoted into that Windows\nmachine right here, and\n\n121\n00:06:06.279 --> 00:06:09.420\nit's got two brand new 500\ngigs disks attached to it.\n\n122\n00:06:09.420 --> 00:06:12.520\nNow it doesn't know that yet,\nI mean, it might.\n\n123\n00:06:12.520 --> 00:06:15.450\nIf you were actually logged into\nthe terminal when you added those disks\n\n124\n00:06:15.450 --> 00:06:17.860\nyou'd see a pop up about\ninitializing the disks.\n\n125\n00:06:17.860 --> 00:06:19.200\nBut I wasn't logged in.\n\n126\n00:06:19.200 --> 00:06:20.883\nSo as far as I'm concerned,\nwhen I browse into this system,\n\n127\n00:06:20.883 --> 00:06:22.010\nI don't know about those extra drives.\n\n128\n00:06:22.010 --> 00:06:28.910\nI see my C drive,\nI see my Temporary drive, and that's it.\n\n129\n00:06:28.910 --> 00:06:34.730\nBut if I go up here in my Server Manager,\ngo to Tools > Computer Management,\n\n130\n00:06:34.730 --> 00:06:37.469\nand then we drive down\ninto our Disk Management,\n\n131\n00:06:38.880 --> 00:06:44.110\nit's gonna find two new\nnon-initialized disks right down here.\n\n132\n00:06:44.110 --> 00:06:47.490\nAnd so\nI can see those disks ready to be used.\n\n133\n00:06:48.610 --> 00:06:51.796\nNow if we need to initialize them, mine\nare actually showing up as initialized.\n\n134\n00:06:51.796 --> 00:06:54.462\nBut if they're not initialized,\nyou can just right click on it and\n\n135\n00:06:54.462 --> 00:06:55.755\nchoose to initialize the disk.\n\n136\n00:06:55.755 --> 00:06:58.462\nBut it'll normally pop up a window and\noffer to initialize it.\n\n137\n00:06:58.462 --> 00:07:01.212\nOnce that's done, they'll show up\njust like mine are doing here.\n\n138\n00:07:01.212 --> 00:07:03.962\nThey've got the two disks, but\nthey don't have a partition on them.\n\n139\n00:07:03.962 --> 00:07:05.379\nSee how they're just blank?\n\n140\n00:07:05.379 --> 00:07:09.421\nI could make one my E drive and\none my F drive, and off I go.\n\n141\n00:07:09.421 --> 00:07:12.462\nI get 500 I/Os on one, 500 on the other.\n\n142\n00:07:12.462 --> 00:07:16.267\nRemember that when I spin up a disk in\nAzure, I have a maximum of 1 TB for\n\n143\n00:07:16.267 --> 00:07:19.840\nthe size, so I could have a 1 TB\ndrive here and a 1 TB drive there.\n\n144\n00:07:19.840 --> 00:07:22.060\nBut what if I need a 5 TB drive?\n\n145\n00:07:22.060 --> 00:07:23.337\nTough luck, you can't do it.\n\n146\n00:07:23.337 --> 00:07:30.087\nOr, we could add five 1 TB drives, bond\nthem together, now I've got a 5 TB drive.\n\n147\n00:07:30.087 --> 00:07:35.240\nAnd I just ended up with 2,500 I/Os,\nbecause I've bonded five drives together.\n\n148\n00:07:35.240 --> 00:07:38.710\nSo that's how we get larger drives and\nit's how we get faster drives.\n\n149\n00:07:38.710 --> 00:07:41.505\nThe trick is bonding them together;\nthere's an old way to do it.\n\n150\n00:07:41.505 --> 00:07:45.516\nThere's software RAID inside of Windows,\nbut software RAID is not really great for\n\n151\n00:07:45.516 --> 00:07:48.297\nperformance, it's not something\nyou want to mess with.\n\n152\n00:07:48.297 --> 00:07:52.019\nSo starting in Windows Server 2012,\nand in Windows 10 also,\n\n153\n00:07:52.019 --> 00:07:53.862\nand I think Windows 8 had it too.\n\n154\n00:07:53.862 --> 00:07:56.884\nWe had this technology\ncalled Storage Spaces, and\n\n155\n00:07:56.884 --> 00:08:01.037\nwhat Storage Spaces allows you to do\nis to bond these drives together.\n\n156\n00:08:01.037 --> 00:08:03.219\nAnd store your data safely.\n\n157\n00:08:03.219 --> 00:08:07.504\nAnd you can do it where you're just taking\nadvantage of the extra size and the extra\n\n158\n00:08:07.504 --> 00:08:11.371\nspeed, but you can also with redundancy\nwhere your data is stored twice.\n\n159\n00:08:11.371 --> 00:08:13.332\nAnd it's not exactly like a mirror or\n\n160\n00:08:13.332 --> 00:08:16.178\nRAID 5 because we can\ncontinually add drives to it and\n\n161\n00:08:16.178 --> 00:08:20.368\nremove drives to it and it'll survive\nthat and rebuild itself and rearrange.\n\n162\n00:08:20.368 --> 00:08:23.828\nBut the important part is it lets\nus span these multiple disks.\n\n163\n00:08:23.828 --> 00:08:24.571\nSo I see my disks.\n\n164\n00:08:24.571 --> 00:08:28.507\nI wanna get them bonded, so I'm gonna jump\nright back to my server manager here.\n\n165\n00:08:28.507 --> 00:08:32.164\nAnd back in the server manager,\nI've got my File and Storage Services.\n\n166\n00:08:32.164 --> 00:08:36.819\nAnd if I drill down into there, I see my\nvolumes, my disks, and my storage pools.\n\n167\n00:08:36.819 --> 00:08:40.603\nAnd if I click on that, I can see that\nI don't actually have much set up.\n\n168\n00:08:40.603 --> 00:08:44.354\nI've got a storage space here where\nit's showing some available disks for\n\n169\n00:08:44.354 --> 00:08:46.268\nme that I can go and start to get set up.\n\n170\n00:08:46.268 --> 00:08:49.658\nIt's seeing those two disks\nthat we just brought in.\n\n171\n00:08:49.658 --> 00:08:52.165\nThose disks aren't formatted or\nanything, but\n\n172\n00:08:52.165 --> 00:08:55.660\nthey're just here and they're ready\nto be used for a storage pool.\n\n173\n00:08:55.660 --> 00:08:59.452\nAnd so if I choose those disks,\nI can go up here to tasks and\n\n174\n00:08:59.452 --> 00:09:04.518\nchoose new storage pool, and it's gonna\nlet me bond those disks together.\n\n175\n00:09:04.518 --> 00:09:07.640\nAnd so as I move through that wizard,\nI can tell it what I'm trying to do.\n\n176\n00:09:07.640 --> 00:09:14.999\nI'm gonna create a storage pool here,\nwhich I'll call it itprotv-pool1.\n\n177\n00:09:14.999 --> 00:09:17.020\nI dont know, I gotta give it a name,\nstorage pool.\n\n178\n00:09:17.020 --> 00:09:21.187\nSo I'm just gonna give it a name, and\nI'll choose that storage space area.\n\n179\n00:09:21.187 --> 00:09:24.684\nI've only got the one set, and then here's\nwhere I can pick the discs that I'm gonna\n\n180\n00:09:24.684 --> 00:09:27.305\nbe involving in this, and\nI'm going to check them all, okay?\n\n181\n00:09:27.305 --> 00:09:29.887\nNow I can add more discs later on, and\n\n182\n00:09:29.887 --> 00:09:33.400\nyou can even take discs out\nof the pool if you want.\n\n183\n00:09:33.400 --> 00:09:36.826\nSo if I start needing more I/Os, I can\njust come and add another disc in here,\n\n184\n00:09:36.826 --> 00:09:40.359\nafter the fact, and I get 500 more I/Os,\nand just keep adding and adding and\n\n185\n00:09:40.359 --> 00:09:41.178\nadding as you go.\n\n186\n00:09:41.178 --> 00:09:43.502\nAnd over here,\nI've got this allocation and\n\n187\n00:09:43.502 --> 00:09:46.878\nyou'll see where I can add it as\nautomatic, hot spare or manual.\n\n188\n00:09:46.878 --> 00:09:49.984\nAnd what that's saying is if we\nchoose to redundancy on these,\n\n189\n00:09:49.984 --> 00:09:53.042\nit's gonna figure out the best\nway to do that automatically.\n\n190\n00:09:53.042 --> 00:09:57.191\nIf I say to make these a hot spare, then\nit's gonna maintain a copy of my data, but\n\n191\n00:09:57.191 --> 00:09:59.705\nit's not actually gonna\nbring the disk active.\n\n192\n00:09:59.705 --> 00:10:00.797\nIt's just gonna sit there waiting.\n\n193\n00:10:00.797 --> 00:10:03.676\nI won't benefit speedwise for that.\n\n194\n00:10:03.676 --> 00:10:06.300\nA hot spare, I'm not actively reading and\nwriting from.\n\n195\n00:10:06.300 --> 00:10:07.519\nIt's just backing up to it.\n\n196\n00:10:07.519 --> 00:10:09.179\nSo I wanna leave these to automatic.\n\n197\n00:10:09.179 --> 00:10:10.972\nI'm choosing the two disks, and\n\n198\n00:10:10.972 --> 00:10:14.762\ndown here at the bottom it says total\nselected capacity one terabyte.\n\n199\n00:10:14.762 --> 00:10:20.997\nI'm combining these two 500 gig\ndrives to create a one terabyte disk.\n\n200\n00:10:20.997 --> 00:10:23.713\nAnd then, on my next screen here, it's\njust giving me the summary of all that.\n\n201\n00:10:23.713 --> 00:10:27.815\nAnd I can hit create and\nit's gonna build it up, and now,\n\n202\n00:10:27.815 --> 00:10:30.133\nI'm gonna have a storage pool.\n\n203\n00:10:30.133 --> 00:10:32.234\nAnd when I close that,\nI can see my storage pool here.\n\n204\n00:10:32.234 --> 00:10:34.382\nIt's one terabyte in size.\n\n205\n00:10:34.382 --> 00:10:37.934\nAnd down at the bottom,\nvirtual disks, nothing.\n\n206\n00:10:37.934 --> 00:10:40.396\nWhat I've created is one virtual disk.\n\n207\n00:10:40.396 --> 00:10:46.199\nI've bonded those disks together to\ncreate one virtual single terabyte drive.\n\n208\n00:10:46.199 --> 00:10:48.998\nAnd so now I can come down here and\nI can create a virtual disk.\n\n209\n00:10:48.998 --> 00:10:50.814\nAnd when I create that virtual disk,\n\n210\n00:10:50.814 --> 00:10:53.932\nhere's where I'm actually gonna\nmake this where I can use it.\n\n211\n00:10:53.932 --> 00:10:56.653\nSo I see that storage pool,\nwhich I can choose, and\n\n212\n00:10:56.653 --> 00:10:58.691\nthen I can give it a virtual disk name.\n\n213\n00:10:58.691 --> 00:11:03.380\nSo I'll just call this my data disk,\nor whatever it is I wanna call it,\n\n214\n00:11:03.380 --> 00:11:05.692\nand then I pick my storage layout.\n\n215\n00:11:05.692 --> 00:11:07.433\nNow, this is kind of important.\n\n216\n00:11:07.433 --> 00:11:10.837\nThe default is,\nI'm just gonna span these disks, and\n\n217\n00:11:10.837 --> 00:11:13.655\nthat's the one where I\nget the IOPS benefit.\n\n218\n00:11:13.655 --> 00:11:16.663\nI can choose to do mirrors and\nparody also, and\n\n219\n00:11:16.663 --> 00:11:20.690\nif I choose those I lose\nthe performance benefit, all right?\n\n220\n00:11:20.690 --> 00:11:22.471\nThe only reason we would do mirrors or\n\n221\n00:11:22.471 --> 00:11:25.636\nparody is if we were trying to get\ndisk redundancy under the hood.\n\n222\n00:11:25.636 --> 00:11:29.908\nRemember, with Microsoft Azure, they're\nalready providing you redundancy under\n\n223\n00:11:29.908 --> 00:11:33.657\nthe hood, so there is absolutely no\nbenefit to choosing mirror or parody.\n\n224\n00:11:33.657 --> 00:11:34.876\nIn fact you're just hurting yourself.\n\n225\n00:11:34.876 --> 00:11:36.617\nYou're losing performance by doing that.\n\n226\n00:11:36.617 --> 00:11:41.447\nSo, when we're doing this in Azure, you\nalways wanna choose to do a simple layout.\n\n227\n00:11:41.447 --> 00:11:42.968\nDon;t worry about redundancy.\n\n228\n00:11:42.968 --> 00:11:46.973\nAzure's already doing\nthe redundancy under the hood.\n\n229\n00:11:46.973 --> 00:11:50.545\nAll right, then I can hit next, and\nwe can choose to do a thin provisioned or\n\n230\n00:11:50.545 --> 00:11:51.187\nfixed disk.\n\n231\n00:11:51.187 --> 00:11:55.639\nIt really doesn't matter, because on\nthe back end, the disks are already fully\n\n232\n00:11:55.639 --> 00:11:59.255\nfixed provisioned, and\nthey're sparsed disks under the hood.\n\n233\n00:11:59.255 --> 00:12:03.794\nSo I can leave that as fixed and\nthen I can specify the size.\n\n234\n00:12:03.794 --> 00:12:05.873\nHow much of this pool do I wanna use?\n\n235\n00:12:05.873 --> 00:12:09.146\nAnd I might wanna use the whole thing, so\nI'll go ahead and just punch that in, or\n\n236\n00:12:09.146 --> 00:12:10.412\nI can just say, maximum size.\n\n237\n00:12:10.412 --> 00:12:11.932\nIt'll probably be easier.\n\n238\n00:12:11.932 --> 00:12:14.672\nAnd then I can hit Next and create it.\n\n239\n00:12:14.672 --> 00:12:20.210\nNow it's making me a one terabyte drive,\nand it's striping across those two disks.\n\n240\n00:12:20.210 --> 00:12:23.297\nAnd so as I write to one disk,\nit's gonna divide it up and\n\n241\n00:12:23.297 --> 00:12:24.956\nwrite to the second one also.\n\n242\n00:12:24.956 --> 00:12:27.975\nThat's where I get my doubled I/O.\n\n243\n00:12:27.975 --> 00:12:31.615\nAnd if I start running low on I/Os,\nI can add a third disk, and\n\n244\n00:12:31.615 --> 00:12:36.171\nnow it's going to span across that too,\nand now I've got 1,500 I/Os.\n\n245\n00:12:36.171 --> 00:12:38.603\nAnd a fourth disk and a fifth disk, and\n\n246\n00:12:38.603 --> 00:12:41.417\nI keep growing it as I\nneed it to compensate.\n\n247\n00:12:41.417 --> 00:12:42.253\nNow I've added the disk.\n\n248\n00:12:42.253 --> 00:12:45.039\nI still need to format it, so\nit popped up another wizard for me here.\n\n249\n00:12:45.039 --> 00:12:49.079\nI'm gonna choose that disk and\nhere I can come in and format it.\n\n250\n00:12:49.079 --> 00:12:53.271\nJust gonna do the full drive, and\nwe'll give it a drive letter e,\n\n251\n00:12:53.271 --> 00:12:54.653\nI'm fine with that.\n\n252\n00:12:54.653 --> 00:12:59.435\nWe'll do NTFS,\nI'll give a name of data disk, and\n\n253\n00:12:59.435 --> 00:13:02.337\nwe'll create it, all right?\n\n254\n00:13:02.337 --> 00:13:05.472\nSo there it goes formatting that disk,\nand as soon as that's done,\n\n255\n00:13:05.472 --> 00:13:08.618\nnow I'm gonna be able to take\nadvantage of the extra IO, all right?\n\n256\n00:13:08.618 --> 00:13:10.591\nSo Windows make this really easy, right?\n\n257\n00:13:10.591 --> 00:13:13.749\nI just had to do a handful of clicks\nhere inside of the storage spaces.\n\n258\n00:13:13.749 --> 00:13:17.649\nNow it's made, and I've got the disk,\nand the cool part is that I can grow it.\n\n259\n00:13:17.649 --> 00:13:19.809\nI can add more to it over time.\n\n260\n00:13:19.809 --> 00:13:22.247\nI've got a one terabyte drive right here.\n\n261\n00:13:22.247 --> 00:13:24.753\nTo an end user,\nit just looks like a one terabyte drive.\n\n262\n00:13:24.753 --> 00:13:26.635\nThey don't know anything special about it.\n\n263\n00:13:26.635 --> 00:13:28.256\nBut we know that on the backend,\n\n264\n00:13:28.256 --> 00:13:31.870\nit's actually two hard drives that\nare being spanned as we write to it.\n\n265\n00:13:31.870 --> 00:13:34.227\nSo we get some extra\nperformance out of that.\n\n266\n00:13:34.227 --> 00:13:37.791\nAnd then if we add more disks later on,\nyou can always just come right in here.\n\n267\n00:13:37.791 --> 00:13:40.104\nYou'll see them down here\nin your physical disks, and\n\n268\n00:13:40.104 --> 00:13:43.387\nyou'll be able to expand out that pool to\nbe able to add to it and grow it right?\n\n269\n00:13:43.387 --> 00:13:46.290\nSo that's how we do it in Windows.\n\n270\n00:13:46.290 --> 00:13:48.495\nNow I want to show you how\nto do it in Linux also.\n\n271\n00:13:48.495 --> 00:13:52.898\nNow in most of the Linux distros, like in\nUbuntu, it has graphical interface and\n\n272\n00:13:52.898 --> 00:13:55.252\nyou can go through\na wizard just like this.\n\n273\n00:13:55.252 --> 00:13:58.609\nUnfortunately in Azure when\nyou spin up a Linux box,\n\n274\n00:13:58.609 --> 00:14:00.986\nwhat kind of access do they give you?\n\n275\n00:14:00.986 --> 00:14:01.833\nSSH.\n\n276\n00:14:01.833 --> 00:14:04.469\nSo by default,\nyou don't have access to the GUI.\n\n277\n00:14:04.469 --> 00:14:07.533\nThere are ways to get it, but\nby default you don't have that.\n\n278\n00:14:07.533 --> 00:14:10.609\nSo, with Linux,\nwe've gotta do it from the command line,\n\n279\n00:14:10.609 --> 00:14:12.525\nwhich is a little bit more involved.\n\n280\n00:14:12.525 --> 00:14:16.111\nSo I'm gonna remote into\nthat Linux box of mine.\n\n281\n00:14:16.111 --> 00:14:16.972\nHere I am.\n\n282\n00:14:16.972 --> 00:14:21.870\nAnd, I wanna show you the same process but\ndoing it right here for Linux.\n\n283\n00:14:21.870 --> 00:14:23.373\nNow, to get this setup,\n\n284\n00:14:23.373 --> 00:14:27.606\nI'm gonna need whats called\nthe LVM: the Logical Volume Manager.\n\n285\n00:14:27.606 --> 00:14:29.603\nIn windows,\nwe have the storage spaces, right?\n\n286\n00:14:29.603 --> 00:14:31.948\nOr storage pools,\nthat made it really easy.\n\n287\n00:14:31.948 --> 00:14:33.527\nIn Linux, you have the LVM.\n\n288\n00:14:33.527 --> 00:14:37.481\nThe LVM may or may not be installed\non your distro by default, so\n\n289\n00:14:37.481 --> 00:14:39.203\nyou may need to install it.\n\n290\n00:14:39.203 --> 00:14:41.683\nAnd if that's the case,\ndepending on the distro you pick,\n\n291\n00:14:41.683 --> 00:14:43.428\nyou'll need to use the utility for that.\n\n292\n00:14:43.428 --> 00:14:48.049\nSo if you use Ubuntu you might use\napt-get, or Debian uses apt get.\n\n293\n00:14:48.049 --> 00:14:50.649\nThis is CentOS, so\nI'm gonna use yum to do it.\n\n294\n00:14:50.649 --> 00:14:57.207\nSo I'll say sudo yum install lvm2*.\n\n295\n00:14:57.207 --> 00:15:01.399\nThe Logical Volume Manager, it's version\n2, it has more than just one package.\n\n296\n00:15:01.399 --> 00:15:05.419\nAnd just by saying lvm2*,\nthat's gonna get all of those packages and\n\n297\n00:15:05.419 --> 00:15:08.446\nI just need to elevate my\nprivileges here real quick.\n\n298\n00:15:08.446 --> 00:15:11.163\nAnd that's gonna bring those and\ninstall them if I don't already have them.\n\n299\n00:15:11.163 --> 00:15:14.947\nI might already have it and\noh, I spelled LVM wrong.\n\n300\n00:15:14.947 --> 00:15:15.644\nHow do you spell LVM?\n\n301\n00:15:15.644 --> 00:15:17.524\n>> [LAUGH] I think there's\na J in there somewhere.\n\n302\n00:15:17.524 --> 00:15:18.419\n>> Yeah, it's a silent J.\n\n303\n00:15:18.419 --> 00:15:19.103\n>> All silent J's.\n\n304\n00:15:19.103 --> 00:15:20.031\n>> There we go.\n\n305\n00:15:20.031 --> 00:15:22.283\nAll right, I can see on mine,\nI've already got it.\n\n306\n00:15:22.283 --> 00:15:25.179\nI've already got LVM installed on mine, so\nI didn't need to do that, but on yours',\n\n307\n00:15:25.179 --> 00:15:26.068\nyou may or may not have it.\n\n308\n00:15:26.068 --> 00:15:27.763\nSo we need to get that installed.\n\n309\n00:15:27.763 --> 00:15:31.795\nOnce the LVM is installed, you might have\nto reboot if you've just installed it, but\n\n310\n00:15:31.795 --> 00:15:34.427\nfor mine, I already had it,\nso I don't have to reboot.\n\n311\n00:15:34.427 --> 00:15:37.165\nAfter this, I can go in and\nstart to create my disks.\n\n312\n00:15:37.165 --> 00:15:40.281\nNow, when I ran through the wizard for\nstorage pools,\n\n313\n00:15:40.281 --> 00:15:42.529\nremember all the steps I went through.\n\n314\n00:15:42.529 --> 00:15:45.361\nI had to create a storage space,\nwhich it kind of already did for me.\n\n315\n00:15:45.361 --> 00:15:47.544\nThen I created a storage\npool inside of it,\n\n316\n00:15:47.544 --> 00:15:50.343\naqnd then I had to create\na virtual disk inside of that.\n\n317\n00:15:50.343 --> 00:15:53.672\nWell, we have to do the same\nbasic thing for LVM.\n\n318\n00:15:53.672 --> 00:15:57.290\nThe first thing I have to do is I have to\ntell LVM that there's these physical disks\n\n319\n00:15:57.290 --> 00:15:58.315\nit's allowed to use.\n\n320\n00:15:58.315 --> 00:16:01.543\nBut the physical disks are here and\nnot necessarily initialized.\n\n321\n00:16:01.543 --> 00:16:05.455\nIf I do a, every command I'm about to do\nneeds to be done as an administrator and\n\n322\n00:16:05.455 --> 00:16:08.740\nI'm gonna get tired of doing this\nsudo stuff over and over again.\n\n323\n00:16:08.740 --> 00:16:12.753\nSo, I'm gonna do a little sudo sh, so I\ncan launch a shell as an administrator and\n\n324\n00:16:12.753 --> 00:16:15.949\nthat way I don't have to elevate\nprivileges every single time.\n\n325\n00:16:15.949 --> 00:16:19.170\nIt really does start to\nget old kind of fast.\n\n326\n00:16:19.170 --> 00:16:23.950\nSo, all right, whoops,\nthat's not exactly what I wanted.\n\n327\n00:16:23.950 --> 00:16:26.610\nSo [LAUGH] thank you Windows Magnifier.\n\n328\n00:16:26.610 --> 00:16:27.520\nSo anyhow,\n\n329\n00:16:27.520 --> 00:16:30.830\nwhat I'm gonna do is I'm gonna basically\nstart by initializing those disks.\n\n330\n00:16:30.830 --> 00:16:35.350\nSo if I do an fdisk -l,\nI can see all the disks that I have.\n\n331\n00:16:35.350 --> 00:16:37.710\nAnd I've got quite a few.\n\n332\n00:16:37.710 --> 00:16:40.660\nBecause of the stuff that I've added and\nthe temp disk and all that.\n\n333\n00:16:40.660 --> 00:16:43.350\nSo I'm gonna just kind of\nfilter that a little bit.\n\n334\n00:16:43.350 --> 00:16:48.880\nAnd so you'll see where I've got sda1,\nsda2, I've got sdc,\n\n335\n00:16:48.880 --> 00:16:53.820\nand sdd, two 500 gig disks that\nare sitting there that I'm not using.\n\n336\n00:16:53.820 --> 00:16:57.820\nSo I need to initialize sdc and sdd, so\n\n337\n00:16:57.820 --> 00:17:01.446\nI'm gonna say fdisk /dev/sdc.\n\n338\n00:17:01.446 --> 00:17:05.489\nAnd I'm going to create a new partition\nwhich'll be a primary partition,\n\n339\n00:17:05.489 --> 00:17:07.500\nlet's do partition number 1 on it.\n\n340\n00:17:07.500 --> 00:17:10.110\nAnd I want it to be the full disk so\nI'm just gonna press Enter both times,\n\n341\n00:17:10.110 --> 00:17:11.710\nthat'll do the whole disk.\n\n342\n00:17:11.710 --> 00:17:13.553\nAnd I'll write that and get out of it.\n\n343\n00:17:13.553 --> 00:17:15.450\nAnd then I'll do the same thing for sdd.\n\n344\n00:17:15.450 --> 00:17:19.076\nSo I'm just gonna initialize this one,\nnew partition and\n\n345\n00:17:19.076 --> 00:17:22.010\nwe'll take the whole disk, all right?\n\n346\n00:17:22.010 --> 00:17:25.670\nSo now I've initialized those two\ndisks and they're ready for use.\n\n347\n00:17:25.670 --> 00:17:28.550\nIf I was in the web UI, or in the UI for\nLinux, it would have done that\n\n348\n00:17:28.550 --> 00:17:31.857\nautomatically for me, but from the command\nline we have to do it ourselves.\n\n349\n00:17:31.857 --> 00:17:34.450\nNow I need to tell LVM that\nit's allowed to do that.\n\n350\n00:17:34.450 --> 00:17:37.897\nAnd you do that by telling it that\nit's got, basically, physical disks.\n\n351\n00:17:37.897 --> 00:17:44.718\nAnd so I need to tell it pvcreate, and\nthen give it the disks to bring in,\n\n352\n00:17:44.718 --> 00:17:49.870\nand so I'm gonna do sdc1 and\n/dev/sdd1, right?\n\n353\n00:17:49.870 --> 00:17:53.323\nThey're partitioned now, so\nit's partition 1 on each one.\n\n354\n00:17:53.323 --> 00:17:55.510\nThat's why I'm adding a 1\nto the end of their names.\n\n355\n00:17:55.510 --> 00:17:58.010\nAnd that's gonna tell the LVM\nthat it's allowed to use it.\n\n356\n00:17:58.010 --> 00:18:02.482\nYou can run pvdisplay to see\nwhat disks are already added.\n\n357\n00:18:02.482 --> 00:18:06.570\nOr, pvscan is one that I like cuz\nit's a little bit more collapsed.\n\n358\n00:18:06.570 --> 00:18:11.935\nSo now I can see those two 512 gig disks\navailable right there, and ready for use.\n\n359\n00:18:11.935 --> 00:18:12.538\nAll right,\n\n360\n00:18:12.538 --> 00:18:17.330\nthen I'm gonna need to create, basically\nwhat's the counterpart to a storage pool.\n\n361\n00:18:17.330 --> 00:18:19.870\nA storage pool is where I\nbonded those disks together and\n\n362\n00:18:19.870 --> 00:18:21.650\nthen I was able to create\na partition in it.\n\n363\n00:18:21.650 --> 00:18:23.920\nSo here I need to create\nwhat's called a volume group.\n\n364\n00:18:23.920 --> 00:18:26.487\nAnd a volume group is what\ncombines these two disks together.\n\n365\n00:18:26.487 --> 00:18:30.150\nSo I can say vgcreate,\nand I can give it a name.\n\n366\n00:18:30.150 --> 00:18:32.300\nI'll just call mine vg1, volume group one.\n\n367\n00:18:32.300 --> 00:18:36.117\nAnd I can specify the two disks that\nI just brought into the LVM, so\n\n368\n00:18:36.117 --> 00:18:40.363\nI'm gonna provide those two right\nthere and that's gonna create vg1.\n\n369\n00:18:40.363 --> 00:18:45.791\nAnd I can do vgdisplay to see that to\nmake sure it actually got created,\n\n370\n00:18:45.791 --> 00:18:49.113\nand I can see right\nhere it's 1 TB in size.\n\n371\n00:18:49.113 --> 00:18:54.847\nThat volume group is like the storage pool\nthat we created over in storage spaces.\n\n372\n00:18:54.847 --> 00:18:59.068\nOnce I had the pool, the next thing that I\nhad to do was to create a volume inside of\n\n373\n00:18:59.068 --> 00:19:01.210\nit, right, that I would be able to use.\n\n374\n00:19:01.210 --> 00:19:07.280\nSo I'm gonna do the LV or logical volume\ncreate, and I need to give it a size.\n\n375\n00:19:07.280 --> 00:19:11.230\nI'll do -L for the size and\nI'm just gonna make mine 998 gigs.\n\n376\n00:19:11.230 --> 00:19:12.550\nI could probably sit down and\n\n377\n00:19:12.550 --> 00:19:15.190\nfigure out exactly what to\nmake it to get it accurate.\n\n378\n00:19:15.190 --> 00:19:17.670\nBut I want it to be a terabyte.\n\n379\n00:19:17.670 --> 00:19:20.087\nI guess I could probably,\nlet's see how close I can get to this one.\n\n380\n00:19:20.087 --> 00:19:23.846\nLike 1,023 GB, we'll try that.\n\n381\n00:19:23.846 --> 00:19:26.920\nIf it complains, I might have to make\nit smaller to get under the limit.\n\n382\n00:19:26.920 --> 00:19:30.477\nAnd then I need to tell it the name,\nand I'll just call mine lv1,\n\n383\n00:19:30.477 --> 00:19:31.842\nfor logical volume one.\n\n384\n00:19:31.842 --> 00:19:35.610\nAnd then I need to tell it the volume\ngroup that it's gonna use, I'll use vg1.\n\n385\n00:19:35.610 --> 00:19:40.110\nAnd, there, I fit under the size limits,\nso now I've got lv1 created.\n\n386\n00:19:40.110 --> 00:19:41.912\nSo now I've got a logical volume,\n\n387\n00:19:41.912 --> 00:19:46.590\nbasically a logical disk that's 1 TB in\nsize that spans those two other disks.\n\n388\n00:19:46.590 --> 00:19:49.980\nNow I just need to format it and\nmount it and it's ready for me to use.\n\n389\n00:19:49.980 --> 00:19:54.861\nSo I can do mkfs and I'm gonna format\n\n390\n00:19:54.861 --> 00:19:59.102\nit ext3/dev/vg1/lv1.\n\n391\n00:19:59.102 --> 00:20:03.440\nSo I'm gonna format logical volume one's,\nthere it goes and it's formatting.\n\n392\n00:20:03.440 --> 00:20:07.631\nNow depending on the size of your disk,\nthis might take a long time, it might go\n\n393\n00:20:07.631 --> 00:20:12.030\nfast, it just kinda depends, but it is\nwriting out and set up those inode tables.\n\n394\n00:20:12.030 --> 00:20:14.860\nNow, for me,\nthat's gonna take a little while and\n\n395\n00:20:14.860 --> 00:20:17.440\nI'm gonna get kind of bored so\nwhile that's running,\n\n396\n00:20:17.440 --> 00:20:21.620\nonce it's done we've now got a valid\npartition on logical volume one.\n\n397\n00:20:21.620 --> 00:20:24.800\nThe only other thing we've got to do\nis go and mount it to a folder and\n\n398\n00:20:24.800 --> 00:20:25.510\nyou're ready to rock.\n\n399\n00:20:25.510 --> 00:20:26.920\nYou've now got that disk created.\n\n400\n00:20:26.920 --> 00:20:30.207\nAnd the cool part about the LVM is,\njust like storage pools,\n\n401\n00:20:30.207 --> 00:20:34.284\nif I would need more disk I/O, I can\nalways add another disk to it later on.\n\n402\n00:20:34.284 --> 00:20:39.289\nI just run through the same basic process,\nadding in the physical volume,\n\n403\n00:20:39.289 --> 00:20:44.120\nadding that disk to the volume group,\nand then moving on from there.\n\n404\n00:20:44.120 --> 00:20:46.250\nYou can add to it and modify it as you go.\n\n405\n00:20:46.250 --> 00:20:48.963\nIf you have access to the GUI\nit's a heck of a lot easier, but\n\n406\n00:20:48.963 --> 00:20:51.149\nfrom the command line,\nthat's basically it.\n\n407\n00:20:51.149 --> 00:20:58.225\nNow, the only other command I would\ndo is mount /dev/vg1/lv1, right?\n\n408\n00:20:58.225 --> 00:21:01.574\nSo I'm gonna mount that, and\nthen mount it to a destination, so\n\n409\n00:21:01.574 --> 00:21:03.950\nsomething like /mnt/data, or whatever.\n\n410\n00:21:03.950 --> 00:21:06.320\nAnd it would be attached and ready to use.\n\n411\n00:21:06.320 --> 00:21:08.170\nBut otherwise, adding these into Linux,\n\n412\n00:21:08.170 --> 00:21:10.960\nsure it's a series of commands\nyou gotta do, but once it's done,\n\n413\n00:21:10.960 --> 00:21:14.360\nyou get the same benefit as we did on\nWindows when we added those extra volumes.\n\n414\n00:21:14.360 --> 00:21:18.692\n>> Now, Don, would you have to add that to\nthe fstab file to make that a permanent\n\n415\n00:21:18.692 --> 00:21:21.836\nmount if you wanted that, or\nwill it just stay that way?\n\n416\n00:21:21.836 --> 00:21:23.900\n>> Yeah, if you just mount\nit with the mount command,\n\n417\n00:21:23.900 --> 00:21:25.590\nthe next time you reboot you'll lose it.\n\n418\n00:21:25.590 --> 00:21:27.060\nNow maybe you don't reboot very often and\n\n419\n00:21:27.060 --> 00:21:30.250\nit's not a bit deal, but odds are your\nsystem will reboot eventually.\n\n420\n00:21:30.250 --> 00:21:32.527\nSo it is a good point to\nput it in the fstab file.\n\n421\n00:21:32.527 --> 00:21:37.180\nSo, depending on your distro, right,\nsome distros get a little weird, but\n\n422\n00:21:37.180 --> 00:21:39.768\nmost of them using a file in /etc/fstab.\n\n423\n00:21:39.768 --> 00:21:41.740\nIt's the file system table.\n\n424\n00:21:41.740 --> 00:21:43.290\nAnd you can go in there and\nyou can edit that and\n\n425\n00:21:43.290 --> 00:21:46.220\nthrow in that value and\nyou'll knock it out.\n\n426\n00:21:46.220 --> 00:21:48.910\nIf you go in and do a search for some of\nthe Linux documentation out there there's\n\n427\n00:21:48.910 --> 00:21:50.560\nplenty of documentation on how it works.\n\n428\n00:21:50.560 --> 00:21:54.320\nBut that'll create a persistent mount, so\nthat it's there when the system reboots.\n\n429\n00:21:54.320 --> 00:21:57.360\nWindows always does that for its mounted\ndisks, but Linux gives you the option.\n\n430\n00:21:57.360 --> 00:21:59.280\nCuz sometimes you might just need it for\na little while.\n\n431\n00:21:59.280 --> 00:22:00.129\nKinda like a CD drive,\n\n432\n00:22:00.129 --> 00:22:02.609\nyou don't necessarily need it to\nbe mounted every time you boot.\n\n433\n00:22:02.609 --> 00:22:04.059\nBut yeah, that'll turn on.\n\n434\n00:22:04.059 --> 00:22:05.630\nYou guys see it's taking awhile.\n\n435\n00:22:05.630 --> 00:22:08.260\nThis is a 1 TB disk,\nimagine if I was creating a 5 TB one,\n\n436\n00:22:08.260 --> 00:22:09.550\nit would take even longer.\n\n437\n00:22:09.550 --> 00:22:11.520\nSo it's just building that out, and\n\n438\n00:22:11.520 --> 00:22:13.630\ngetting the file system set up\nto be able to span across it.\n\n439\n00:22:13.630 --> 00:22:14.810\nIt's not necessarily the fastest.\n\n440\n00:22:14.810 --> 00:22:19.570\nI guess I could have picked a larger inode\nand that would have helped, but whatever.\n\n441\n00:22:19.570 --> 00:22:22.030\n>> Now, Don, I'm sitting here thinking\nabout, this is awesome, right?\n\n442\n00:22:22.030 --> 00:22:26.480\nTo be able to take a bunch of disks,\nI bond them together and then I can create\n\n443\n00:22:26.480 --> 00:22:32.780\nspecified, I guess, sizes of storage\nvolumes out of the pool of disks.\n\n444\n00:22:32.780 --> 00:22:36.068\nBut why wouldn't I just mount\nthe disk at the size that I need and\n\n445\n00:22:36.068 --> 00:22:38.192\nthen if I need another one, mount that.\n\n446\n00:22:38.192 --> 00:22:42.555\nWhat's the advantage of going this way\nover just adding the specified amount of\n\n447\n00:22:42.555 --> 00:22:43.470\ndisk space?\n\n448\n00:22:43.470 --> 00:22:47.748\n>> So well, I mean the real thing is that\nyou have a limit to the amount of space\n\n449\n00:22:47.748 --> 00:22:49.001\nyou can get, right?\n\n450\n00:22:49.001 --> 00:22:52.590\nRemember Azure's holding\nus down to that 1 TB drive.\n\n451\n00:22:52.590 --> 00:22:54.773\nIf I go back to my Azure panel here, and\n\n452\n00:22:54.773 --> 00:22:57.588\nI probably can't add any\nmore disks to this one.\n\n453\n00:22:57.588 --> 00:23:01.364\nLet's see if it'll let me at least\nlaunch the wizard, there we go.\n\n454\n00:23:01.364 --> 00:23:04.635\nI'm gonna get a warning that\nI'm already over my limit for\n\n455\n00:23:04.635 --> 00:23:08.189\nthe amount of volumes at this\nparticular size, cuz I did a D1.\n\n456\n00:23:08.189 --> 00:23:10.675\nI can only have two actual data disks.\n\n457\n00:23:10.675 --> 00:23:15.303\nBut when I go to create it, see I only\nhave up to a terabyte right there, right?\n\n458\n00:23:15.303 --> 00:23:17.112\nNow if I only need 128 gigs of storage,\n\n459\n00:23:17.112 --> 00:23:19.835\nI can start with 128 just\nprovision that and be done.\n\n460\n00:23:19.835 --> 00:23:23.082\nBut if I need something more than\na terabyte they don't give me a choice.\n\n461\n00:23:23.082 --> 00:23:25.711\nIt's not like I can say, well,\nI'll just provision a 2 TB drive, right?\n\n462\n00:23:25.711 --> 00:23:29.705\nSo that's the main thing, if I need\nsomething bigger than a terabyte,\n\n463\n00:23:29.705 --> 00:23:34.249\nor if I want more than 500 I/Os, but\nI'm not ready to go to 5,000 I/Os.\n\n464\n00:23:34.249 --> 00:23:36.878\nThat is a huge jump,\nthat's where we use this.\n\n465\n00:23:36.878 --> 00:23:39.524\nAnd Windows and Linux, it all works\nthe same just different commands,\n\n466\n00:23:39.524 --> 00:23:41.740\ndifferent wizard basically\nthat we run through.\n\n467\n00:23:41.740 --> 00:23:43.452\nOnce it's done,\nyou get advantage of it and\n\n468\n00:23:43.452 --> 00:23:46.430\nyou're able to control it on your end and\nnot have to rely on Microsoft do it.\n\n469\n00:23:46.430 --> 00:23:51.312\n>> Yeah, I guess if I needed more than\nthose 500 I/Os, even though if I had\n\n470\n00:23:51.312 --> 00:23:56.136\nthat 1 TB of storage space that I needed,\nout of adding that disk to my VM.\n\n471\n00:23:56.136 --> 00:23:57.611\nI'm not getting the IOs that I need, so\n\n472\n00:23:57.611 --> 00:23:59.549\ngoing this way would\ndefinitely solve that issue.\n\n473\n00:23:59.549 --> 00:24:03.200\nSo this definitely has some\nadvantages to using this system.\n\n474\n00:24:03.200 --> 00:24:06.580\n>> Yeah, and you know, let's take my\nsystems here where I've D1s spun up, so\n\n475\n00:24:06.580 --> 00:24:08.370\nI can only have two more data disks.\n\n476\n00:24:08.370 --> 00:24:13.320\nWell, if I want to add more,\nI decide hey, I need 1200 IOs and\n\n477\n00:24:13.320 --> 00:24:15.810\nso I need to go to three data disks for\nthat.\n\n478\n00:24:15.810 --> 00:24:17.860\nWell I can't because I'm on a D1.\n\n479\n00:24:17.860 --> 00:24:21.770\nSo I might need to reprovision my VM and\ngo to a D2 or a D3 or\n\n480\n00:24:21.770 --> 00:24:24.350\nsomething higher so I can get more disks.\n\n481\n00:24:24.350 --> 00:24:27.740\nAnd you can do that right, when you reach\nthat point where you have that storage\n\n482\n00:24:27.740 --> 00:24:32.290\nneed, you can bump up to a D2,\nbump up to something higher.\n\n483\n00:24:32.290 --> 00:24:36.520\nAnd when you do, then you'll be able\nto get to that next level on it.\n\n484\n00:24:36.520 --> 00:24:40.150\nNow, just remember that\nyou can't really bump\n\n485\n00:24:40.150 --> 00:24:43.900\nup between the hardware types\nwhile the system is booted up.\n\n486\n00:24:43.900 --> 00:24:47.743\nSo you may need to stop your system and\nshut it down and once it's shut down,\n\n487\n00:24:47.743 --> 00:24:50.820\nyou can go and try to change\nover to that other data type.\n\n488\n00:24:50.820 --> 00:24:53.430\nSo there is down time that's involved.\n\n489\n00:24:53.430 --> 00:24:56.802\nAnd it can take a little while for\nmachines to shut down sometimes, but\n\n490\n00:24:56.802 --> 00:24:59.380\nI'll shut this one down and\nonce that's done.\n\n491\n00:24:59.380 --> 00:25:01.320\nRight now, I'm at a standard DS.\n\n492\n00:25:01.320 --> 00:25:02.700\nI picked a DS one.\n\n493\n00:25:02.700 --> 00:25:07.350\nI'm on the faster SSD,\nbut I'm on a DS one here.\n\n494\n00:25:07.350 --> 00:25:11.810\nAnd once that's done we can jump into our\nsettings for that machine and bump it up\n\n495\n00:25:11.810 --> 00:25:18.140\nto another tier and start to get that\nadditional data access that we can get.\n\n496\n00:25:18.140 --> 00:25:19.490\nSo I'm on that virtual machine here.\n\n497\n00:25:19.490 --> 00:25:24.765\nAnd on the right side I'm just\ngonna try and go down to Size.\n\n498\n00:25:24.765 --> 00:25:29.330\n[LAUGH] If I can get my mouse working,\nI'll go to Size.\n\n499\n00:25:29.330 --> 00:25:34.810\nAnd under Size, now I can switch\nfrom DS1 to one of the other tiers.\n\n500\n00:25:34.810 --> 00:25:35.530\nThere we go.\n\n501\n00:25:35.530 --> 00:25:39.190\nSo I'm on a DS1 standard, and\nsee how it says two data disks, but\n\n502\n00:25:39.190 --> 00:25:41.480\na DS2 can have four data disks.\n\n503\n00:25:41.480 --> 00:25:46.100\nAnd so I can step up to that DS2 and\nselect it, right?\n\n504\n00:25:46.100 --> 00:25:49.330\nAnd it's gonna be more expensive but\nI've got a need.\n\n505\n00:25:49.330 --> 00:25:52.920\nI need more IO, otherwise my customer\nexperience is gonna be slow.\n\n506\n00:25:52.920 --> 00:25:54.650\nSo now I can bump it up to that DS2.\n\n507\n00:25:55.740 --> 00:26:01.350\nAnd once it's up to that DS2,\neventually this will update to show it, or\n\n508\n00:26:01.350 --> 00:26:04.150\nit's still taking effect,\nstill taking effect, so it's resizing it.\n\n509\n00:26:04.150 --> 00:26:05.850\nNow that can take awhile.\n\n510\n00:26:05.850 --> 00:26:09.100\nSometimes it's really fast,\nsometimes you do it and it's just done.\n\n511\n00:26:09.100 --> 00:26:14.030\nIf your server is already in a rack\nthat already has DS2 availability in it,\n\n512\n00:26:14.030 --> 00:26:15.910\nit will happen almost instantly.\n\n513\n00:26:15.910 --> 00:26:18.730\nBut it could be that you happen to\nbe moved to a different rack which\n\n514\n00:26:18.730 --> 00:26:19.780\nis not a big deal.\n\n515\n00:26:19.780 --> 00:26:22.440\nSometimes you have to be moved\nto an entirely different stamp\n\n516\n00:26:22.440 --> 00:26:24.110\nwhich is a big deal, right?\n\n517\n00:26:24.110 --> 00:26:28.160\nSo your stamp that you're in,\nthe 20 or 25 racks, might be full.\n\n518\n00:26:28.160 --> 00:26:29.290\nMight not has DS2's.\n\n519\n00:26:29.290 --> 00:26:32.100\nI might have picked a tier that it just\ndoesn't support in the rack and so\n\n520\n00:26:32.100 --> 00:26:34.920\nthen it's got to move me to a whole\ndifferent stamp and that can take a while.\n\n521\n00:26:34.920 --> 00:26:36.050\nThis one wasn't so bad.\n\n522\n00:26:36.050 --> 00:26:37.460\nBut, I can see that I am now a DS2.\n\n523\n00:26:37.460 --> 00:26:40.760\nAnd if I start that up,\nnow it's gonna fire up and\n\n524\n00:26:40.760 --> 00:26:42.600\nI can start to add more disks into it.\n\n525\n00:26:42.600 --> 00:26:46.230\nAnd now I can get up to four data disks\nand start to gain advantage there.\n\n526\n00:26:46.230 --> 00:26:49.210\nNow, one other thing worth mentioning.\n\n527\n00:26:49.210 --> 00:26:50.860\nLet's say you only need\na one terabyte drive.\n\n528\n00:26:52.020 --> 00:26:55.630\nI might still do two 500 gig drives.\n\n529\n00:26:55.630 --> 00:26:57.820\nKnowing that I could have just\ndone a one terabyte drive, but\n\n530\n00:26:57.820 --> 00:27:01.660\nbecause I get the extra IOs, all right?\n\n531\n00:27:01.660 --> 00:27:05.470\nTwo 500 gig drives will cost you\nthe same as one terabyte drive,\n\n532\n00:27:05.470 --> 00:27:08.160\ncuz you pay per gigabyte that you use,\nright?\n\n533\n00:27:08.160 --> 00:27:10.620\nSo you might as well go ahead and\ndo two 500s.\n\n534\n00:27:10.620 --> 00:27:12.690\nOr if you're doing 128s, right?\n\n535\n00:27:12.690 --> 00:27:15.000\nYou'd go ahead and\njust do, what is it eight?\n\n536\n00:27:15.000 --> 00:27:17.480\n128s to get to that terabyte,\nthis is my amazing math skills here.\n\n537\n00:27:17.480 --> 00:27:18.550\nThat's wrong isn't it?\n\n538\n00:27:18.550 --> 00:27:19.130\nIt's not eight.\n\n539\n00:27:19.130 --> 00:27:19.790\n>> Eight 128s.\n>> Whatever.\n\n540\n00:27:19.790 --> 00:27:22.278\n>> It was close, somewhere around there.\n\n541\n00:27:22.278 --> 00:27:26.420\n>> So anyhow, you can spin a multiple,\nthe problem is to do eight 128s.\n\n542\n00:27:26.420 --> 00:27:29.960\nI'm in a DS2 and I still won't\nhave support for four disks right?\n\n543\n00:27:29.960 --> 00:27:33.550\nSo I have to go up to an even higher tier\nand it starts to get a little expensive.\n\n544\n00:27:33.550 --> 00:27:36.320\nBut now this one can handle more disks and\nI can get that extra space in there.\n\n545\n00:27:36.320 --> 00:27:38.740\nSo pretty good solution all in all.\n\n546\n00:27:38.740 --> 00:27:40.830\n>> And\nMicrosoft says that this is best practice.\n\n547\n00:27:40.830 --> 00:27:42.490\nRight?\nIf you need those IOPS then you\n\n548\n00:27:42.490 --> 00:27:45.280\nstart adding those smaller disks and\nget all the IOPS that you need.\n\n549\n00:27:45.280 --> 00:27:48.700\nYou're still going up to that one\nterabyte limit that they allow for.\n\n550\n00:27:48.700 --> 00:27:50.330\nSo that's nice of them.\n\n551\n00:27:50.330 --> 00:27:52.720\nSay, hey man there's more than\none way to skin this cat.\n\n552\n00:27:52.720 --> 00:27:54.200\n>> Yeah, and that's exactly right.\n\n553\n00:27:54.200 --> 00:27:55.600\nYou just choose the option that works for\n\n554\n00:27:55.600 --> 00:27:58.280\nyou and you can always change\nyour mind later, right?\n\n555\n00:27:58.280 --> 00:28:01.060\nA lot of this stuff's really easy to\nmanipulate and change after the fact.\n\n556\n00:28:01.060 --> 00:28:01.630\n>> Awesome.\n\n557\n00:28:01.630 --> 00:28:03.580\nWell Don,\nthis has been a whole lot of fun and\n\n558\n00:28:03.580 --> 00:28:05.470\na very interesting topic\nto be honest with you.\n\n559\n00:28:05.470 --> 00:28:08.640\nIs there anything else that we need to\nknow about provisioning these drives or\n\n560\n00:28:08.640 --> 00:28:10.190\ncreating the storage spaces?\n\n561\n00:28:10.190 --> 00:28:11.500\n>> That's about it on this one.\n\n562\n00:28:11.500 --> 00:28:14.720\nI do have a little bit more storage\nstuff that I want to talk about about.\n\n563\n00:28:14.720 --> 00:28:16.500\nI want to talk about Azure files\nwhich are pretty cool, but\n\n564\n00:28:16.500 --> 00:28:17.680\nwe'll do that in the next episode.\n\n565\n00:28:17.680 --> 00:28:20.210\nBut as far as these pools,\nthat's pretty much it.\n\n566\n00:28:20.210 --> 00:28:20.960\nIt's good technology.\n\n567\n00:28:20.960 --> 00:28:23.000\nDefinitely something that you'll\nuse out there in the real world.\n\n568\n00:28:23.000 --> 00:28:23.500\n>> Well, awesome.\n\n569\n00:28:23.500 --> 00:28:26.580\nThank you so much for\nshowing us this awesome technology and for\n\n570\n00:28:26.580 --> 00:28:27.520\nbeing on the show.\n\n571\n00:28:27.520 --> 00:28:28.510\nThank you for watching.\n\n572\n00:28:28.510 --> 00:28:30.280\nWe're gonna go ahead and\nsign off for ITProTV.\n\n573\n00:28:30.280 --> 00:28:32.170\nI've been your host, Daniel Lowery.\n\n574\n00:28:32.170 --> 00:28:32.820\n>> And I'm Don Pezet.\n\n575\n00:28:32.820 --> 00:28:33.985\n>> And we'll see you next time.\n\n576\n00:28:33.985 --> 00:28:39.880\n[MUSIC]\n\n",
          "vimeoId": "148667874"
        },
        {
          "description": "In this episode, Don and Daniel explore Microsoft's *Azure Files* as a common network storage solution between Virtual Machines. First they run down some of the basic functions and limitations of Azure Files. Then they walk you through creating an Azure File share using the Azure Portal and by using the PowerShell.",
          "length": "1464",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-2-3-azure_files-120315-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-2-3-azure_files-120315-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-2-3-azure_files-120315-1-sm.jpg",
          "title": "Azure Files",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:12.359 --> 00:00:16.678\nAll right, greetings everyone, and welcome\nto another exciting episode of ITProTV.\n\n3\n00:00:16.678 --> 00:00:19.440\nI'm your host, Daniel Lowrie,\nand in today's episode,\n\n4\n00:00:19.440 --> 00:00:23.098\nwe're gonna continue taking a look at\nMicrosoft's Azure Virtual Machines.\n\n5\n00:00:23.098 --> 00:00:27.486\nAnd joining us again here on the program\nis none other than my good friend\n\n6\n00:00:27.486 --> 00:00:28.373\nMr Don Pezet.\n\n7\n00:00:28.373 --> 00:00:31.309\nDon, thanks for joining us today,\nwelcome to the show, how you doing?\n\n8\n00:00:31.309 --> 00:00:33.353\n>> I am doing great Daniel and\nglad to be back.\n\n9\n00:00:33.353 --> 00:00:36.668\nWe're gonna be talking about some neat\nstuff today because we've seen a lot of\n\n10\n00:00:36.668 --> 00:00:39.343\nAzure storage technologies, and\na lot of it is kinda complex.\n\n11\n00:00:39.343 --> 00:00:42.164\nYou gotta add in disks and\ndo all this management, worry about I/Os.\n\n12\n00:00:42.164 --> 00:00:47.689\nBut sometimes, we just need quick, dirty,\neasy storage available for our machines.\n\n13\n00:00:47.689 --> 00:00:51.682\nAnd there's actually a neat feature built\ninto Azure called Azure Files that we can\n\n14\n00:00:51.682 --> 00:00:54.667\ntake advantage of,\nthat doesn't even require our servers.\n\n15\n00:00:54.667 --> 00:00:55.642\nPretty cool.\n\n16\n00:00:55.642 --> 00:00:56.628\nSo we're gonna take a look at that today.\n\n17\n00:00:56.628 --> 00:00:58.463\n>> The heck you say, Don.\n\n18\n00:00:58.463 --> 00:01:01.968\nI can't imagine having a server but\nI didn't have to really make a server.\n\n19\n00:01:01.968 --> 00:01:02.769\n>> Yeah.\n\n20\n00:01:02.769 --> 00:01:04.662\n>> [LAUGH]\n>> Yeah, this one's easy.\n\n21\n00:01:04.662 --> 00:01:06.933\nOne of the most common scenarios for\n\n22\n00:01:06.933 --> 00:01:10.125\nfiles is what we call like\nthe central file store.\n\n23\n00:01:10.125 --> 00:01:13.088\nSo, at your office you'd probably\nhad a shared files somewhere and\n\n24\n00:01:13.088 --> 00:01:14.548\nit gets mapped to a drive letter.\n\n25\n00:01:14.548 --> 00:01:17.950\nMaybe it's my Z drive.\n\n26\n00:01:17.950 --> 00:01:20.356\nAnd so every employee knows like,\noh, if I wanna share files for\n\n27\n00:01:20.356 --> 00:01:21.664\nother people I'll put in Z drive.\n\n28\n00:01:21.664 --> 00:01:25.304\nWell, we've been creating data disks and\nattaching them to a VM,\n\n29\n00:01:25.304 --> 00:01:27.063\nbut the data disks do not share.\n\n30\n00:01:27.063 --> 00:01:29.802\nThey're only visible\nto that particular VM.\n\n31\n00:01:29.802 --> 00:01:34.027\nAnd sure, in Windows we can share a folder\nout, or in Linux you can set up NFS and\n\n32\n00:01:34.027 --> 00:01:34.807\nshare it out.\n\n33\n00:01:34.807 --> 00:01:37.765\nBut it's actually pretty hard to\nget two VMs to talk to each other,\n\n34\n00:01:37.765 --> 00:01:40.888\ncuz there's a lot of security measures\nin place that isolate the VM's.\n\n35\n00:01:40.888 --> 00:01:44.510\nSo there's not really a great way to\nshare files in between those VMs, right?\n\n36\n00:01:44.510 --> 00:01:48.563\nWell, there's Azure Files,\nwhich actually fills that gap.\n\n37\n00:01:48.563 --> 00:01:52.101\nWhat Azure Files does is,\nit lets us create a shared folder, an SMB,\n\n38\n00:01:52.101 --> 00:01:56.328\na server message block share, just like\nWindows uses for sharing in a workgroup.\n\n39\n00:01:56.328 --> 00:01:58.776\nWe can create a shared folder, and\n\n40\n00:01:58.776 --> 00:02:03.259\nit can be stored directly in Azure and\nnot attached to a server.\n\n41\n00:02:03.259 --> 00:02:07.016\nAnd that means that any of your virtual\nmachines that are in the same region,\n\n42\n00:02:07.016 --> 00:02:10.535\nit is tied to a region, any virtual\nmachine you have that's in that same\n\n43\n00:02:10.535 --> 00:02:14.347\nregion will be able to access that shared\nfolder as if it was stored on an actual\n\n44\n00:02:14.347 --> 00:02:16.725\nserver somewhere,\nexcept there is no server.\n\n45\n00:02:16.725 --> 00:02:18.246\nWe just create the shared folder.\n\n46\n00:02:18.246 --> 00:02:19.605\nAzure takes care of it for us.\n\n47\n00:02:19.605 --> 00:02:21.898\nThat means it is pretty easy to deploy,\nand\n\n48\n00:02:21.898 --> 00:02:26.187\nit's pretty useful cuz I'm not having to\npay for extra CPU cycles or whatever.\n\n49\n00:02:26.187 --> 00:02:29.020\nI just have the storage available,\nand it's shared between my systems.\n\n50\n00:02:29.020 --> 00:02:32.633\nA great example of this might be that you\nhave some third party software that you\n\n51\n00:02:32.633 --> 00:02:34.023\ninstall on all your servers.\n\n52\n00:02:34.023 --> 00:02:36.984\nAnd so every time you spin up a new\nserver, you gotta install the software,\n\n53\n00:02:36.984 --> 00:02:39.533\nbut you don't wanna copy the software\nto the server every time.\n\n54\n00:02:39.533 --> 00:02:42.547\nSo what you could do is you could\nset up an Azure File Share,\n\n55\n00:02:42.547 --> 00:02:46.606\nstick your software in that Azure File\nShare, and now whenever you spin up a new\n\n56\n00:02:46.606 --> 00:02:50.504\nserve,r you can just have it connect\nto that share and load that software.\n\n57\n00:02:50.504 --> 00:02:52.803\nYou can even write a script to do it,\nso it just automatically grabs it and\n\n58\n00:02:52.803 --> 00:02:54.671\ninstalls it right off of that share and\nit's pretty cool.\n\n59\n00:02:54.671 --> 00:02:59.548\nNow using the Legacy portal I guess\nthat's really a bad way to put it.\n\n60\n00:02:59.548 --> 00:03:00.437\nYou couldn't use the Legacy portal,\n\n61\n00:03:00.437 --> 00:03:02.009\nyou had to do everything through\nthe PowerShell on the old system.\n\n62\n00:03:02.009 --> 00:03:05.344\nBut the new preview portal which,\nactually I've gotta stop calling\n\n63\n00:03:05.344 --> 00:03:09.370\nit the preview portal cuz as of just this\nmorning, I'm gonna time this episode, so\n\n64\n00:03:09.370 --> 00:03:12.074\nif you're watching this in the future,\nthis morning,\n\n65\n00:03:12.074 --> 00:03:15.951\nMicrosoft switched the preview portal\nto actually be the official portal now.\n\n66\n00:03:15.951 --> 00:03:19.981\nSo in the new portal, I guess I'll call it\nthat, you can actually create Azure file\n\n67\n00:03:19.981 --> 00:03:23.160\nshares right there in the UI, so\nit's actually really easy now.\n\n68\n00:03:23.160 --> 00:03:25.607\nYou whip them up,\nyou get your machines connected to it, and\n\n69\n00:03:25.607 --> 00:03:27.003\nyou've got a central file share.\n\n70\n00:03:27.003 --> 00:03:27.781\n>> Very cool stuff.\n\n71\n00:03:27.781 --> 00:03:30.520\n>> All right, so\nlet's see how that's done.\n\n72\n00:03:30.520 --> 00:03:32.320\nIt's actually pretty, pretty easy.\n\n73\n00:03:32.320 --> 00:03:35.825\nSo I'm going to jump into my\nportal here and the Azure files,\n\n74\n00:03:35.825 --> 00:03:37.904\nthey're not attached to a server.\n\n75\n00:03:37.904 --> 00:03:40.851\nSo normally I'm used to jumping\ninto like my virtual machines and\n\n76\n00:03:40.851 --> 00:03:41.827\nstarting to do work.\n\n77\n00:03:41.827 --> 00:03:44.103\nI'm actually going to go down\nhere to storage accounts.\n\n78\n00:03:44.103 --> 00:03:48.781\nRight, your Azure file shares\nare stored right in a storage account,\n\n79\n00:03:48.781 --> 00:03:51.249\njust like a VHD for a server would be.\n\n80\n00:03:51.249 --> 00:03:54.174\nAll right, now an important thing here.\n\n81\n00:03:54.174 --> 00:03:58.572\nThe storage account that you use\nhas to be in the same region as\n\n82\n00:03:58.572 --> 00:04:00.909\nthe servers that connect to it.\n\n83\n00:04:00.909 --> 00:04:04.644\nSo if I have a storage account in US West\nand I've got a server in US East,\n\n84\n00:04:04.644 --> 00:04:06.283\nit's not gonna see the share.\n\n85\n00:04:06.283 --> 00:04:09.480\nBut if I have storage account in\nUS East and a server in US East,\n\n86\n00:04:09.480 --> 00:04:13.248\nthey'll be able to see each other,\nright, so I've gotta choose that.\n\n87\n00:04:13.248 --> 00:04:17.055\nIf I look at my servers,\nwhere are my servers here?\n\n88\n00:04:17.055 --> 00:04:20.294\nI've got, I think I've only got one server\npowered on right now, ITProTV demo1.\n\n89\n00:04:20.294 --> 00:04:25.109\nAnd if I look at this guy, I can see\nover here what region it's in and\n\n90\n00:04:25.109 --> 00:04:27.272\nkind of where it's sitting.\n\n91\n00:04:27.272 --> 00:04:28.804\nOr at least I say I can.\n\n92\n00:04:28.804 --> 00:04:31.347\nLet me jump into its properties, and\nwe'll figure out where this guy's parked.\n\n93\n00:04:31.347 --> 00:04:34.829\nAnd hopefully it's in US East 2.\n\n94\n00:04:34.829 --> 00:04:37.047\nThat's where I normally stick my systems,\nI'm sure it is.\n\n95\n00:04:37.047 --> 00:04:38.347\nThere East US 2, all right.\n\n96\n00:04:38.347 --> 00:04:39.389\nSo if I have a storage group\nthat's in East US 2, then,\n\n97\n00:04:39.389 --> 00:04:40.843\nI'll be able to create an Azure File Share\nand we'll be able to connect to it.\n\n98\n00:04:40.843 --> 00:04:47.520\nSo, I'm gonna go under storage accounts,\nand, I'm actually got a ton that\n\n99\n00:04:47.520 --> 00:04:53.097\nare in East US 2 including ITProTV\ndemo1 which is that server.\n\n100\n00:04:53.097 --> 00:04:54.501\nIt's got it's own storage account.\n\n101\n00:04:54.501 --> 00:04:57.224\nSo I could use that, or\nI can use something shared like this one,\n\n102\n00:04:57.224 --> 00:04:58.240\nitprotvdemostorage.\n\n103\n00:04:58.240 --> 00:04:59.563\nIn fact, I'll use that one.\n\n104\n00:04:59.563 --> 00:05:00.782\nIt's in East US 2.\n\n105\n00:05:00.782 --> 00:05:05.065\nWhen you browse into the storage account,\nyou'll see where you can pull up\n\n106\n00:05:05.065 --> 00:05:10.174\nthe settings, and right down here we've\ngot blobs, files, tables and queues, okay?\n\n107\n00:05:10.174 --> 00:05:13.692\nWell, blobs, those are our\nvirtual hard drives, our VHDs.\n\n108\n00:05:13.692 --> 00:05:16.617\nThat's where our server storage is going.\n\n109\n00:05:16.617 --> 00:05:21.066\nBut files, those are files that\nwe can just drop right in and\n\n110\n00:05:21.066 --> 00:05:23.559\nwe can set up an Azure File Share.\n\n111\n00:05:23.559 --> 00:05:25.533\nSo that's basically where\nwe're gonna do that.\n\n112\n00:05:25.533 --> 00:05:30.388\nIf we jump into that, the screen is\ngonna update here real quick, and\n\n113\n00:05:30.388 --> 00:05:35.772\nwe'll start to see the file service and\nsome of the settings are available.\n\n114\n00:05:35.772 --> 00:05:39.579\nAnd if I just scroll down to the bottom,\nhere's my file shares.\n\n115\n00:05:39.579 --> 00:05:42.458\nAnd you'll see I've already got\na few file shares down here.\n\n116\n00:05:42.458 --> 00:05:46.336\nI've got advertising and\nfiles, marketing and so on.\n\n117\n00:05:46.336 --> 00:05:49.802\nAnd those are the ones that I've already\ngot in place that are kind of shared\n\n118\n00:05:49.802 --> 00:05:51.908\nout and And\navailable in this system, okay?\n\n119\n00:05:51.908 --> 00:05:55.090\nAnd so those are folders\nthat are basically shared,\n\n120\n00:05:55.090 --> 00:05:58.572\nand see how each one of them\nhas a quota of five terabytes.\n\n121\n00:05:58.572 --> 00:06:01.911\nRemember when I create a hard drive,\nlike a data disk in Azure,\n\n122\n00:06:01.911 --> 00:06:03.612\nI'm limited to one terrabyte.\n\n123\n00:06:03.612 --> 00:06:07.507\nBut when I create an Azure File Share,\nI've actually got five terabytes, and\n\n124\n00:06:07.507 --> 00:06:09.810\nI didn't have to set up\nmultiple data disks and\n\n125\n00:06:09.810 --> 00:06:12.189\nI didn't have to worry\nabout I/Os all that.\n\n126\n00:06:12.189 --> 00:06:15.289\nI just basically get in here and\ncreate it and there it is.\n\n127\n00:06:15.289 --> 00:06:17.448\nSo kinda neat that we can whip that up.\n\n128\n00:06:17.448 --> 00:06:19.802\nAnd if we look at our properties for this,\n\n129\n00:06:19.802 --> 00:06:22.510\nwe'll start to see our\nfile service endpoint.\n\n130\n00:06:22.510 --> 00:06:25.274\nAnd I'm gonna need some of that\ninformation a little bit later,\n\n131\n00:06:25.274 --> 00:06:28.804\nespecially the keys to be able to access\nthis, cuz that's what it's gonna use for\n\n132\n00:06:28.804 --> 00:06:29.951\na username and password.\n\n133\n00:06:29.951 --> 00:06:32.946\nBecause there's no server, it's not like\nit's joined to your active directory.\n\n134\n00:06:32.946 --> 00:06:36.173\nSo that access this final\nshare I'm gonna need a key.\n\n135\n00:06:36.173 --> 00:06:40.481\nAnd If I click on the key icon up here,\nI'll see the keys that are available for\n\n136\n00:06:40.481 --> 00:06:41.292\nthis system.\n\n137\n00:06:41.292 --> 00:06:43.545\nAnd you've gotta storage account name.\n\n138\n00:06:43.545 --> 00:06:44.404\nI'm gonna need that.\n\n139\n00:06:44.404 --> 00:06:50.479\nAnd I'm gonna need my primary access key\nto be able to get into this storage and\n\n140\n00:06:50.479 --> 00:06:52.171\nbe able to access it.\n\n141\n00:06:52.171 --> 00:06:54.086\nSo, I'm going to have\nto get both of those.\n\n142\n00:06:54.086 --> 00:06:55.386\nBut I'll pull them up when we need them.\n\n143\n00:06:55.386 --> 00:06:57.689\nSo, it's pretty neat that\nwe've got that right here,\n\n144\n00:06:57.689 --> 00:07:00.580\nthat we can just whip these up, and\nyou don't have to whip up a server,\n\n145\n00:07:00.580 --> 00:07:02.305\nwhich is definitely a nice thing to have.\n\n146\n00:07:02.305 --> 00:07:06.935\nAll right, now,\nI'm going to back to my files, and\n\n147\n00:07:06.935 --> 00:07:10.850\nI'm going to back to\nfile shares down here.\n\n148\n00:07:10.850 --> 00:07:14.186\nAnd I'm gonna click on file shares,\nand on the right side,\n\n149\n00:07:14.186 --> 00:07:18.082\nthis is gonna update, and\nhere's where I can add in new file shares.\n\n150\n00:07:18.082 --> 00:07:20.148\nIt's kind of counter-intuitive cuz\nthere's no real button for file shares.\n\n151\n00:07:20.148 --> 00:07:23.341\nYou just have to click on the file share\nwindow, but then I can add a file share.\n\n152\n00:07:23.341 --> 00:07:26.523\nSo let's say I've got somebody in my\nsales department, and they're like, hey,\n\n153\n00:07:26.523 --> 00:07:28.529\nwe need centralized storage for\nour sales reports.\n\n154\n00:07:28.529 --> 00:07:33.649\nSo I can hit add, and\nI can add in a folder called sales.\n\n155\n00:07:33.649 --> 00:07:35.403\nAnd I can pick a quota for it.\n\n156\n00:07:35.403 --> 00:07:38.061\nAnd the quota can be as\nhigh as five terabytes.\n\n157\n00:07:38.061 --> 00:07:39.280\nThat's my limit.\n\n158\n00:07:39.280 --> 00:07:40.545\nIt can be smaller.\n\n159\n00:07:40.545 --> 00:07:42.676\nIf I want to do one terabyte, I can, but\n\n160\n00:07:42.676 --> 00:07:45.340\nI normally just go five\nterabytes because I can.\n\n161\n00:07:45.340 --> 00:07:47.000\nSo I'll put that in there.\n\n162\n00:07:47.000 --> 00:07:47.940\nYou can just go straight with the max.\n\n163\n00:07:47.940 --> 00:07:49.821\nWhat's the max, 5120?\n\n164\n00:07:49.821 --> 00:07:51.968\nWe'll go all out, right, 5120.\n\n165\n00:07:51.968 --> 00:07:53.339\nBecause our sales people are so\nimportant to us!\n\n166\n00:07:53.339 --> 00:07:57.065\nSo [LAUGH] we'll create,\nreally, it's like 100 megs.\n\n167\n00:07:57.065 --> 00:08:00.722\n>> It's all text files\n>> [LAUGH].\n\n168\n00:08:00.722 --> 00:08:02.928\n>> So I'm gonna whip that up, there we go,\nit'll be full of MP3s by tomorrow.\n\n169\n00:08:02.928 --> 00:08:05.973\nSo I've got a sales folder, and\nnow we're in business, right?\n\n170\n00:08:05.973 --> 00:08:07.997\nWell, If I want to get\nconnected to that sales folder,\n\n171\n00:08:07.997 --> 00:08:10.730\nthis is where I'm gonna need that\ninformation to be able to connect to it.\n\n172\n00:08:10.730 --> 00:08:14.960\nSo this storage account was\ncalled ITProTVdemostorage.\n\n173\n00:08:14.960 --> 00:08:18.670\nAnd to get connected I'm\ngoing to need that key.\n\n174\n00:08:18.670 --> 00:08:22.250\nSo I'm gonna go back here and\ncopy that key so I've got it available.\n\n175\n00:08:22.250 --> 00:08:25.800\nThe key is really long so I don't\nwant to have to try and remember it.\n\n176\n00:08:25.800 --> 00:08:27.520\nSo it's nice that I can come in here and\ncopy it,\n\n177\n00:08:27.520 --> 00:08:30.930\nand I know it doesn't look that long, but\nit actually is scrolling off the screen.\n\n178\n00:08:30.930 --> 00:08:31.970\nYou don't see the rest of it.\n\n179\n00:08:31.970 --> 00:08:36.286\nSo I'm just gonna copy that, and we'll see\nit again a little bit later, all right?\n\n180\n00:08:36.286 --> 00:08:40.219\nNow, I can go to any of my\nservers that are in EastUS2 And\n\n181\n00:08:40.219 --> 00:08:43.570\nthey'll be able to see\nthis storage account and\n\n182\n00:08:43.570 --> 00:08:49.460\nthey'll be able to connect to that file\nshare and put data there and access it.\n\n183\n00:08:49.460 --> 00:08:53.450\nSo if I jump over to one of those servers,\nso here's ITProTV demo one,\n\n184\n00:08:53.450 --> 00:08:56.800\nso here's one of those servers\nthat's in that region.\n\n185\n00:08:56.800 --> 00:09:00.210\nAnd if I do something like fire up\nmy folder here and go to network and\n\n186\n00:09:00.210 --> 00:09:03.440\njust start browsing the network,\nI'm not going to see that, right?\n\n187\n00:09:03.440 --> 00:09:05.470\nEven if I turn on my network.\n\n188\n00:09:05.470 --> 00:09:08.290\nHere, let's just,\nwe'll turn on all our discovery, right,\n\n189\n00:09:08.290 --> 00:09:10.110\nI'm going to find all of my work groups.\n\n190\n00:09:10.110 --> 00:09:12.170\nI don't see anything out there, right.\n\n191\n00:09:12.170 --> 00:09:16.930\nAnd that's because in order to access\nthis, I need to be providing that key for\n\n192\n00:09:16.930 --> 00:09:17.640\nauthentication.\n\n193\n00:09:17.640 --> 00:09:20.860\nAnd when I'm just browsing like this,\nI'm not really authenticated, so\n\n194\n00:09:20.860 --> 00:09:24.000\nit's gonna search and now the search\nis done, it didn't find anything.\n\n195\n00:09:24.000 --> 00:09:31.010\nSo, to connect to it I need to drop\nto a command prompt, so I'll do that.\n\n196\n00:09:31.010 --> 00:09:35.800\nAnd in the command prompt we're going to\nconnect to it with the good old trusty net\n\n197\n00:09:35.800 --> 00:09:37.100\nuse command.\n\n198\n00:09:37.100 --> 00:09:40.040\nIf you've been using Windows a long time\nyou'll remember this is how we can map\n\n199\n00:09:40.040 --> 00:09:42.650\nto a net bio shared folder on the network.\n\n200\n00:09:42.650 --> 00:09:46.750\nI think I used this the first time under\nWindows 311 for work groups, right,\n\n201\n00:09:46.750 --> 00:09:48.820\nit's been around a long time.\n\n202\n00:09:48.820 --> 00:09:50.860\nAnd I want to connect\nto that shared storage.\n\n203\n00:09:51.880 --> 00:09:54.960\nNow the shared storage,\nI have to say net use and a drive letter.\n\n204\n00:09:54.960 --> 00:09:56.960\nI'm gonna connect mine to my Xdrive.\n\n205\n00:09:56.960 --> 00:09:58.260\nAnd then I have to do the path to it.\n\n206\n00:09:58.260 --> 00:10:03.380\nAnd normally, I would do \\\\\nfollowed by a server name and\n\n207\n00:10:03.380 --> 00:10:05.990\nfollowed by a folder like that.\n\n208\n00:10:05.990 --> 00:10:09.070\nBut here the server name needs\nto be the endpoint name.\n\n209\n00:10:09.070 --> 00:10:13.430\nAnd the endpoint name was displayed\nin the UI, but I know it.\n\n210\n00:10:13.430 --> 00:10:15.935\nIt's the name of the storage container,\nright,\n\n211\n00:10:15.935 --> 00:10:18.390\nwhich was itprotvdemostorage\nis what mine was.\n\n212\n00:10:19.825 --> 00:10:23.855\nAnd that name has to be unique\nthrough the entire Azure Cloud.\n\n213\n00:10:23.855 --> 00:10:27.355\nSo no other Azure customer\ncan be using that name.\n\n214\n00:10:27.355 --> 00:10:29.735\nSo when I created that,\nthis is a truly unique name.\n\n215\n00:10:29.735 --> 00:10:37.095\nAnd so the rest of the server\nname is .file.core.windows.net.\n\n216\n00:10:37.095 --> 00:10:40.190\nNow Microsoft does change\nthat name from time to time.\n\n217\n00:10:40.190 --> 00:10:43.590\nAnd so back here in your panel when\nyou're looking at your storage,\n\n218\n00:10:43.590 --> 00:10:48.110\nit'll actually tell you,\nif I get back to itprotvdemostorage,\n\n219\n00:10:48.110 --> 00:10:49.890\nit'll tell you if that\nname is any different.\n\n220\n00:10:49.890 --> 00:10:53.510\nYou'll see it in the properties,\nand looking at mine, it's not\n\n221\n00:10:53.510 --> 00:10:56.585\nreally displaying a anything different,\nso I should just be at my default.\n\n222\n00:10:56.585 --> 00:10:59.185\nSo I'm not gonna have to worry about that,\nwhich is good.\n\n223\n00:10:59.185 --> 00:11:03.015\n>> Don, if it does change, do we need\nto then go back, and remap the drive?\n\n224\n00:11:03.015 --> 00:11:04.415\n>> Yeah.\n>> Okay.\n\n225\n00:11:04.415 --> 00:11:08.125\n>> You know, it doesn't change often,\nand so looking here.\n\n226\n00:11:08.125 --> 00:11:10.405\nLet's see, there's my primary,\nmy table, my file, right here.\n\n227\n00:11:10.405 --> 00:11:13.835\nSo, ITProTV demos, well, actually\nmy head's on top of that, isn't it?\n\n228\n00:11:13.835 --> 00:11:15.730\nLet me see if I can't move that.\n\n229\n00:11:17.090 --> 00:11:19.080\nOr if we can go full screen\nyou guys will be able to see\n\n230\n00:11:19.080 --> 00:11:20.360\nthat right under there, there we go.\n\n231\n00:11:20.360 --> 00:11:22.760\nSo here's my primary\nfile service end point.\n\n232\n00:11:22.760 --> 00:11:26.680\nAnd it's got that ITproTV storage\ndemo storage.file.core.windows.net\n\n233\n00:11:26.680 --> 00:11:28.500\nwhich is what I'm typing, so it is right.\n\n234\n00:11:28.500 --> 00:11:32.668\nBut see how some of these other\nones are blob.core, queue.core,\n\n235\n00:11:32.668 --> 00:11:35.400\ntable.core, and those names can change.\n\n236\n00:11:35.400 --> 00:11:36.950\nIt'll be set when your system comes up.\n\n237\n00:11:36.950 --> 00:11:40.290\nThey won't change it after the fact, but\nyou might be creating new ones at home and\n\n238\n00:11:40.290 --> 00:11:41.940\nyours gets something\ndifferent because of that, so\n\n239\n00:11:41.940 --> 00:11:44.260\njust be aware that that can happen.\n\n240\n00:11:44.260 --> 00:11:46.640\nBut if I just back over here, that's mine,\n\n241\n00:11:46.640 --> 00:11:50.570\nso\nitprotvdemostorage.file.core.windows.net.\n\n242\n00:11:50.570 --> 00:11:55.120\nAnd then it's just \\sales,\nis what I name that folder.\n\n243\n00:11:55.120 --> 00:11:58.760\nNow, technically if I press Enter here,\nI'm gonna try and connect, but\n\n244\n00:11:58.760 --> 00:12:02.110\nI need to tell it a user account and\npassword.\n\n245\n00:12:02.110 --> 00:12:07.960\nWell, my user account,\nI need to say /u: followed by a username.\n\n246\n00:12:07.960 --> 00:12:10.490\nBut this isn't on a domain or\nwhatever, so what's my user name?\n\n247\n00:12:10.490 --> 00:12:13.340\nWell, your user name is just\nthe name of your storage account.\n\n248\n00:12:13.340 --> 00:12:16.540\nSo, mine is ITProTV demo storage.\n\n249\n00:12:16.540 --> 00:12:18.880\nSo, it's gonna be the same\nthing typed again.\n\n250\n00:12:18.880 --> 00:12:23.060\nAnd then the very next thing needs\nto be your key, it's your password.\n\n251\n00:12:23.060 --> 00:12:26.230\nAnd that's what I copied earlier cause\nthere was no way I could remember it.\n\n252\n00:12:26.230 --> 00:12:29.760\nAnd so, I'm just gonna paste that in,\nand there's my key.\n\n253\n00:12:29.760 --> 00:12:31.660\nYou see it, it's really long,\n\n254\n00:12:31.660 --> 00:12:35.170\nthis isn't something you're just\ngoing to remember on any given day.\n\n255\n00:12:35.170 --> 00:12:39.855\nWhen I run that, I get command completed\nsuccessfully, and when I go back to my\n\n256\n00:12:39.855 --> 00:12:45.640\nfiles and I go to this PC,\nI now have a sales drive right here.\n\n257\n00:12:45.640 --> 00:12:47.450\nAnd I can browse into it and\n\n258\n00:12:47.450 --> 00:12:52.630\nI can now put up to five TB of data\nin here, and it's shared storage.\n\n259\n00:12:52.630 --> 00:12:55.418\nI can more than one server\nthat can access this.\n\n260\n00:12:55.418 --> 00:12:58.910\nAll right, now, you might be thinking,\nokay, Don, this is cool,\n\n261\n00:12:58.910 --> 00:13:01.020\nbut how the heck am I gonna use this?\n\n262\n00:13:01.020 --> 00:13:04.090\nI gave you one scenario, I could fill\nthis up with my company software.\n\n263\n00:13:04.090 --> 00:13:07.720\nAnd as I spin new servers up they\ncould reach out and grab it, right?\n\n264\n00:13:07.720 --> 00:13:09.630\nBut let me give you another scenario.\n\n265\n00:13:09.630 --> 00:13:11.618\nWe're gonna learn about\nauto-scaling later on.\n\n266\n00:13:11.618 --> 00:13:16.260\nAnd with auto-scaling we basically\nsay if one server gets too busy,\n\n267\n00:13:16.260 --> 00:13:18.430\nthen we can spin up a second server.\n\n268\n00:13:18.430 --> 00:13:21.370\nAnd if it gets too busy, spin off a third,\nand we can scale, scale out,\n\n269\n00:13:21.370 --> 00:13:22.990\nadding more servers to cover the load.\n\n270\n00:13:24.310 --> 00:13:27.150\nWell, what if those\nservers are web servers?\n\n271\n00:13:27.150 --> 00:13:29.540\nThey can have a copy of our webpage,\nright?\n\n272\n00:13:29.540 --> 00:13:32.730\nAnd the webpage needs to be stored\non that server otherwise it doesn't\n\n273\n00:13:32.730 --> 00:13:33.780\nhave access to it.\n\n274\n00:13:33.780 --> 00:13:36.820\nWell when spin up a server it's got\nthe operating system drive which I'm not\n\n275\n00:13:36.820 --> 00:13:37.650\nsupposed to put things on.\n\n276\n00:13:37.650 --> 00:13:41.590\nAnd it's got that temporary drive that's\nempty when I spin up a new server except\n\n277\n00:13:41.590 --> 00:13:42.780\nfor the page file.\n\n278\n00:13:42.780 --> 00:13:47.429\nSo I would need to add a data disk that\nalready had the webpages on there.\n\n279\n00:13:48.650 --> 00:13:52.880\nOr I could have a central share like this,\nand I could put the webpages here.\n\n280\n00:13:52.880 --> 00:13:55.640\nAnd when I spin up a new\nserver it could just grab\n\n281\n00:13:55.640 --> 00:13:58.170\nthe latest copy of\nthe webpages right from here.\n\n282\n00:13:58.170 --> 00:14:01.310\nAnd now every time I wanted to update\nmy website I wouldn't have to go and\n\n283\n00:14:01.310 --> 00:14:04.490\nupdate my server images,\nI could just edit the files right here.\n\n284\n00:14:04.490 --> 00:14:07.590\nThen a new instance would spin up and\nget the latest copy of the webpage.\n\n285\n00:14:07.590 --> 00:14:09.540\nAnd now it's great, it's running fine.\n\n286\n00:14:09.540 --> 00:14:12.490\nAnd if I make a change here,\nI can just go kill off my instances and\n\n287\n00:14:12.490 --> 00:14:13.425\nspin up new ones.\n\n288\n00:14:13.425 --> 00:14:15.740\nSo I get the latest pages and off they go.\n\n289\n00:14:15.740 --> 00:14:20.360\nSo we might have our\npersistent storage here and\n\n290\n00:14:20.360 --> 00:14:24.380\nhave our servers only with\ntemporary storage and that's it.\n\n291\n00:14:24.380 --> 00:14:27.400\nAnd have it where they populate their\ndata from their shared location.\n\n292\n00:14:27.400 --> 00:14:28.750\nIt's a great way to do it, and\n\n293\n00:14:28.750 --> 00:14:32.370\nthese Azure files it's just\nlike your VHDs and other data.\n\n294\n00:14:32.370 --> 00:14:35.320\nThey're stored three times,\nthey're locally redundant.\n\n295\n00:14:35.320 --> 00:14:38.760\nSo, it's stored in three places\nin the same data center.\n\n296\n00:14:38.760 --> 00:14:41.170\nIf they have a hardware failure,\nyou are covered.\n\n297\n00:14:41.170 --> 00:14:44.060\nIt's a great solution and\nI don't need a server spun up to use it.\n\n298\n00:14:44.060 --> 00:14:47.000\n>> So this becomes like\na master copy as it were.\n\n299\n00:14:47.000 --> 00:14:50.630\nIt doesn't matter how many servers that I\nneed or whatever as long as I have this\n\n300\n00:14:50.630 --> 00:14:54.380\none copy that everybody just looks to him\nand says well what am I supposed to have?\n\n301\n00:14:54.380 --> 00:14:57.151\nAnd there it is I don't\nhave to worry about having,\n\n302\n00:14:57.151 --> 00:15:01.148\noh I messed up when I tried to build it\nup on this computer because I mistyped\n\n303\n00:15:01.148 --> 00:15:03.740\nsomething or I did something differently.\n\n304\n00:15:03.740 --> 00:15:06.380\nEverything looks to one spot,\nlowers the chance for\n\n305\n00:15:06.380 --> 00:15:09.540\nus to make some sort of error and\nthat's a really good feature.\n\n306\n00:15:09.540 --> 00:15:13.210\n>> Yeah, it's pretty cool, I've enjoyed\nmessing with it, it's a neat one.\n\n307\n00:15:13.210 --> 00:15:16.850\nNow, what I just did is I did it through\nthe GUI, through the portal, right?\n\n308\n00:15:16.850 --> 00:15:19.630\nBut you can create these\nthrough PowerShell also,\n\n309\n00:15:19.630 --> 00:15:20.920\nyou're not limited to just the portal.\n\n310\n00:15:20.920 --> 00:15:23.500\nLet me jump back to my machine and\n\n311\n00:15:23.500 --> 00:15:28.150\nI'll fire up my Azure PowerShell,\nwhich apparently now has a gigantic font.\n\n312\n00:15:28.150 --> 00:15:29.400\n>> Which it does.\n>> That's awesome.\n\n313\n00:15:29.400 --> 00:15:32.450\nAll right, so even people who are visual\nimpaired like myself can see it.\n\n314\n00:15:32.450 --> 00:15:39.080\nSo if I wanna create a file share here,\nI can do it right from the PowerShell.\n\n315\n00:15:39.080 --> 00:15:41.780\nThe first thing I need to do though, and\nthis is where it gets a little tricky,\n\n316\n00:15:41.780 --> 00:15:44.610\nis I need to be able to\nprovide it credentials, and\n\n317\n00:15:44.610 --> 00:15:46.570\nthe easiest way to do\nthat is with a variable.\n\n318\n00:15:46.570 --> 00:15:49.760\nSo I'm gonna create a variable,\nwhich I'm just gonna call $storage.\n\n319\n00:15:49.760 --> 00:15:51.060\nYou can call it whatever you want, right?\n\n320\n00:15:51.060 --> 00:15:53.743\n$storage is what I'm gonna call mine, and\n\n321\n00:15:53.743 --> 00:15:57.307\nI'm gonna set that equal\nto New-AzureStorageContext.\n\n322\n00:15:57.307 --> 00:15:59.087\nAnd a storage context,\n\n323\n00:15:59.087 --> 00:16:04.430\nthat's your credentials that you're\nusing when you access storage.\n\n324\n00:16:04.430 --> 00:16:07.062\nAnd so\nI'm gonna create some new context, and\n\n325\n00:16:07.062 --> 00:16:11.220\nthe storage account name from\nyou is itprotvdemostorage.\n\n326\n00:16:11.220 --> 00:16:14.250\nAnd then I need to provide it with my key,\nand again,\n\n327\n00:16:14.250 --> 00:16:17.110\nI've got that copied into my clipboard so\nI can throw it in there, right.\n\n328\n00:16:17.110 --> 00:16:21.910\nSo now I've got this variable that I can\ncall that has my user credentials, so\n\n329\n00:16:21.910 --> 00:16:23.910\nthat's gonna make life\na little bit easier for me.\n\n330\n00:16:23.910 --> 00:16:28.748\nAnd from here I can say\nNew-AzureStorageShare and\n\n331\n00:16:28.748 --> 00:16:31.120\nI can create that share.\n\n332\n00:16:31.120 --> 00:16:35.287\nAnd depending on which storage account I'm\nconnected to, I should be connected to\n\n333\n00:16:35.287 --> 00:16:38.501\nITPro TV demo storage since that's\nthe context that I gave it and\n\n334\n00:16:38.501 --> 00:16:40.010\nI can create a share.\n\n335\n00:16:40.010 --> 00:16:42.170\nLet's see who else might need a share?\n\n336\n00:16:42.170 --> 00:16:45.360\nSo maybe our operations\nteam needs a share.\n\n337\n00:16:45.360 --> 00:16:48.374\nIf I go back here to my storage account.\n\n338\n00:16:48.374 --> 00:16:50.160\nSo I'm in ItProtv demo storage.\n\n339\n00:16:50.160 --> 00:16:57.130\nIf I go on the files and I go into my\nshares which I will get to eventually.\n\n340\n00:16:57.130 --> 00:17:01.435\nI can see right now I've got advertising,\nfiles, marketing, and sales.\n\n341\n00:17:01.435 --> 00:17:03.060\nI'm about to add operations.\n\n342\n00:17:04.480 --> 00:17:06.530\nAnd so when I go to add operations,\n\n343\n00:17:06.530 --> 00:17:08.948\nI just need to tell it that\nI'm adding that which is good.\n\n344\n00:17:08.948 --> 00:17:12.810\nAnd then -Context, and\n\n345\n00:17:12.810 --> 00:17:17.680\nI can just provide it that variable that\nI made just a minute ago, $storage, okay.\n\n346\n00:17:17.680 --> 00:17:20.840\nAnd so it's able to pull my\ncredentials from there, reach out, and\n\n347\n00:17:20.840 --> 00:17:22.450\ncreate that share collaborations.\n\n348\n00:17:22.450 --> 00:17:25.850\nIf you're using the legacy Azure Portal,\nthis is how you have to do it.\n\n349\n00:17:25.850 --> 00:17:27.560\nThey didn't have a web UI for it.\n\n350\n00:17:27.560 --> 00:17:31.320\nYou can see your file shares in\nthe portal but you couldn't edit them,\n\n351\n00:17:31.320 --> 00:17:32.520\ncreate new ones and delete them.\n\n352\n00:17:32.520 --> 00:17:34.270\nYou had to do all that\nfrom the PowerShell.\n\n353\n00:17:34.270 --> 00:17:35.620\nFortunately, it's not that hard.\n\n354\n00:17:35.620 --> 00:17:38.930\nWe just had to provide some basic\ncredentials and get that going.\n\n355\n00:17:38.930 --> 00:17:40.550\nBut once it's done, that's created.\n\n356\n00:17:40.550 --> 00:17:43.810\nIf I go back here to my UI,\nsee how it doesn't show up yet?\n\n357\n00:17:43.810 --> 00:17:47.060\nThat's because this portal doesn't\nnecessarily refresh when everything else\n\n358\n00:17:47.060 --> 00:17:48.250\nrefreshes.\n\n359\n00:17:48.250 --> 00:17:53.380\nI might have to close that window to\nget back to where it'll refresh and\n\n360\n00:17:53.380 --> 00:17:54.330\nload that again.\n\n361\n00:17:54.330 --> 00:17:56.170\nSo let me just close that out.\n\n362\n00:17:56.170 --> 00:17:59.350\nAnd I'll pull up my files again and\nit's gonna refresh.\n\n363\n00:17:59.350 --> 00:18:03.640\nAnd, assuming that we did this correctly,\nI should be able to come down here and\n\n364\n00:18:03.640 --> 00:18:05.150\nsee that operations folder.\n\n365\n00:18:05.150 --> 00:18:07.080\nAnd it's still not showing up.\n\n366\n00:18:07.080 --> 00:18:09.220\nIt's kinda tricky to see\nwhen this thing refreshes.\n\n367\n00:18:09.220 --> 00:18:13.870\nBut if I wait long enough, it'll get in\nthere and it'll show up in our files.\n\n368\n00:18:13.870 --> 00:18:17.670\nOr it's possible I was connected to\nthe wrong storage account, right?\n\n369\n00:18:17.670 --> 00:18:20.130\nIf I was connected to a different account\nI might have created it from somewhere\n\n370\n00:18:20.130 --> 00:18:20.680\nelse.\n\n371\n00:18:20.680 --> 00:18:24.270\nSo remember that we can always tell our\nsystem what storage account to use by\n\n372\n00:18:24.270 --> 00:18:27.810\nusing the set-AzureSubscription command.\n\n373\n00:18:27.810 --> 00:18:30.440\nAnd that's where we tell it what\nsubscription we're using, and what\n\n374\n00:18:30.440 --> 00:18:33.720\nstorage account we're using by default,\nso I could have gone to the wrong one.\n\n375\n00:18:33.720 --> 00:18:36.670\nBut once that's created,\nnow it's there, and you can go and\n\n376\n00:18:36.670 --> 00:18:38.895\nyour clients can start to mount to it,\nright?\n\n377\n00:18:38.895 --> 00:18:40.670\nIt tells us the endpoint.\n\n378\n00:18:40.670 --> 00:18:41.990\nHere's the endpoint name.\n\n379\n00:18:41.990 --> 00:18:43.670\nWe've got the folder name.\n\n380\n00:18:43.670 --> 00:18:47.080\nWe already have the key from up here\nto be able to connect to the thing.\n\n381\n00:18:47.080 --> 00:18:49.990\nSo all the information you need\nis right here on this screen.\n\n382\n00:18:49.990 --> 00:18:53.410\nNow, you got to your servers,\nyou connect to it, and you're in business.\n\n383\n00:18:53.410 --> 00:18:54.690\nSo, it's a great way to do it.\n\n384\n00:18:54.690 --> 00:18:55.660\n>> Yeah.\nIt's a very ice feature.\n\n385\n00:18:55.660 --> 00:18:59.070\nWe got this,\nI was gonna say Amazon, Azure.\n\n386\n00:18:59.070 --> 00:19:01.095\nI'm sure they'll love hearing that.\n\n387\n00:19:01.095 --> 00:19:04.980\n[LAUGH] Azure has this file\nservice that's available for us.\n\n388\n00:19:04.980 --> 00:19:07.790\nObviously, we have many different\nway in which we can implement it,\n\n389\n00:19:07.790 --> 00:19:09.410\nwe can use it to our advantage.\n\n390\n00:19:09.410 --> 00:19:13.770\nDon, is there any other ways that\nwe can use this guy to our ends?\n\n391\n00:19:13.770 --> 00:19:17.440\n>> So there's one important piece of\ninformation I've left out here, and\n\n392\n00:19:17.440 --> 00:19:19.870\nsome of you guys have probably\nalready recognized this.\n\n393\n00:19:19.870 --> 00:19:21.730\nI showed you how to create these\nfile shares, and I said, boy,\n\n394\n00:19:21.730 --> 00:19:26.500\nwouldn't it be great if you had X data in\nthere, or Y data, or whatever in there?\n\n395\n00:19:26.500 --> 00:19:30.850\nBut I didn't show you how to get the data\nin, and the honest to goodness answer for\n\n396\n00:19:30.850 --> 00:19:33.970\nyou is, there really isn't a great way\nto get the data into these drives, or\n\n397\n00:19:33.970 --> 00:19:36.120\nat least not one that Microsoft\nprovides immediately.\n\n398\n00:19:36.120 --> 00:19:40.340\nSo what they say is, once you've\ncreated it, you've got a server.\n\n399\n00:19:40.340 --> 00:19:43.870\nJust go over to your server, copy\nthe data in there that you want, right?\n\n400\n00:19:43.870 --> 00:19:46.250\nBut what if your server\ndoesn't have internet access?\n\n401\n00:19:46.250 --> 00:19:48.850\nMaybe, or your remote desktop can do it,\nbut it doesn't have internet access\n\n402\n00:19:48.850 --> 00:19:52.700\nbecause you're trying to protect it,\nsecure, and you want to get data in there.\n\n403\n00:19:52.700 --> 00:19:55.550\nWell, unfortunately they don't\ngive us a great way to do that.\n\n404\n00:19:55.550 --> 00:19:58.907\nThere is a way, but\nit works one file at a time.\n\n405\n00:19:58.907 --> 00:20:00.510\nAnd so you had to write a script to do it.\n\n406\n00:20:00.510 --> 00:20:02.020\nIt's really kind of a hassle.\n\n407\n00:20:02.020 --> 00:20:05.290\nSo this is an area where there's\na lot of third party software\n\n408\n00:20:05.290 --> 00:20:08.050\nproducts out there that\ncould really help out.\n\n409\n00:20:08.050 --> 00:20:13.180\nYou can use whatever one you want, I know\nfor me I use a product called ExpanDrive\n\n410\n00:20:13.180 --> 00:20:17.090\nthat I really like, but one of the ones\nthey mention in Tech Net that they really\n\n411\n00:20:17.090 --> 00:20:22.040\nlike is from a company called\nClumsyLeaf Software and so\n\n412\n00:20:22.040 --> 00:20:25.880\nlet me just go to their website and\nI'll show you the product.\n\n413\n00:20:27.100 --> 00:20:29.790\nThey have a product that's\ncalled CloudXplorer, all right?\n\n414\n00:20:29.790 --> 00:20:32.370\nCloudXplorer, if I remember\nit costs something like $60,\n\n415\n00:20:32.370 --> 00:20:38.580\nit's not outrageously expensive, but what\nit lets you do, is it lets you have a GUI\n\n416\n00:20:38.580 --> 00:20:44.160\nto mount to various types of storage,\nincluding Azure file shares.\n\n417\n00:20:44.160 --> 00:20:45.560\nAnd you can connect up and\n\n418\n00:20:45.560 --> 00:20:50.710\ncopy your data right into it, and\nit actually works really well.\n\n419\n00:20:50.710 --> 00:20:53.990\nIf I install it here real quick,\nbasically, we can fire it up and\n\n420\n00:20:53.990 --> 00:20:56.780\nget connected, and\nyou'll be able to upload your data.\n\n421\n00:20:56.780 --> 00:20:59.820\nSo you can be sitting in your office,\non your Windows 7, Windows 8, whatever,\n\n422\n00:20:59.820 --> 00:21:07.030\nmachine and connect to this as your file\nshare even though you're not in the Cloud.\n\n423\n00:21:07.030 --> 00:21:09.000\nRight?\nRemember how I said you had to be in that\n\n424\n00:21:09.000 --> 00:21:10.565\nregion to see the share?\n\n425\n00:21:10.565 --> 00:21:13.170\nWell, this will let you come in with\nyour storage account credentials and\n\n426\n00:21:13.170 --> 00:21:16.700\nconnect directly to it and then you'll\nhave that graphical user interface and\n\n427\n00:21:16.700 --> 00:21:18.045\nyou kind of see it right here.\n\n428\n00:21:18.045 --> 00:21:21.750\nThat once you connect up, you can just\nstart throwing things into it and\n\n429\n00:21:21.750 --> 00:21:24.760\npopulating that disk and\nnow your servers are able to see it.\n\n430\n00:21:24.760 --> 00:21:27.730\nThe best part about that,\nis you're doing it from client,\n\n431\n00:21:27.730 --> 00:21:30.920\nso that means your servers don't\nhave to go out to the Internet.\n\n432\n00:21:30.920 --> 00:21:35.420\nLet's say that you want it to install,\nmaybe you need to install Java.\n\n433\n00:21:35.420 --> 00:21:36.985\nSo, what do you do?\n\n434\n00:21:36.985 --> 00:21:40.134\nWell, some people will fire up\nInternet Explorer on their server and\n\n435\n00:21:40.134 --> 00:21:44.620\nthey'll go to the Java website and they'll\ngo and download it on their server.\n\n436\n00:21:44.620 --> 00:21:45.146\nAnd what's gonna happen?\n\n437\n00:21:45.146 --> 00:21:47.920\nThey're gonna get that download error\nbecause the server is not trusted.\n\n438\n00:21:47.920 --> 00:21:50.330\nAnd so then,\nyou just add it to your trusted sites.\n\n439\n00:21:50.330 --> 00:21:52.420\nBut do you really trust Java's site?\n\n440\n00:21:52.420 --> 00:21:53.770\nI don't.\n\n441\n00:21:53.770 --> 00:21:55.360\nBut you do it on the server\njust to install Java.\n\n442\n00:21:55.360 --> 00:21:59.390\nWell with this, I can download\nJava on my own client computer and\n\n443\n00:21:59.390 --> 00:22:01.510\nthen upload it right into the file share.\n\n444\n00:22:01.510 --> 00:22:05.000\nAnd now the servers are able to see it and\ninstall Java, and\n\n445\n00:22:05.000 --> 00:22:06.850\nthe servers never had to go online.\n\n446\n00:22:06.850 --> 00:22:08.770\nThey didn't even have to\nhave Internet Explorer.\n\n447\n00:22:08.770 --> 00:22:10.750\nIf it's a core install,\nthey don't have Internet Explorer.\n\n448\n00:22:10.750 --> 00:22:14.210\nAnd so that might, well who wouldn't\ninstall Java on a non-graphical [LAUGH],\n\n449\n00:22:14.210 --> 00:22:17.400\nit doesn't matter, but it's a great\nway to get that data out there.\n\n450\n00:22:17.400 --> 00:22:18.620\nSo third party software like this,\n\n451\n00:22:18.620 --> 00:22:20.770\nthere's a bunch of people\nthat make stuff like that.\n\n452\n00:22:20.770 --> 00:22:24.470\nCloudBerry labs is another one,\nI mentioned ExpanDrive that I use.\n\n453\n00:22:24.470 --> 00:22:26.550\nThere's several others that you can use.\n\n454\n00:22:26.550 --> 00:22:29.520\nAnd there's always the Windows, or\n\n455\n00:22:29.520 --> 00:22:32.460\nMicrosoft, Azure SDK,\nit's software development kit,\n\n456\n00:22:32.460 --> 00:22:36.110\nwhere you can programmatically use the the\nrest API to start pushing files in there.\n\n457\n00:22:36.110 --> 00:22:37.910\nYou can write your own\napplication if you want,\n\n458\n00:22:37.910 --> 00:22:40.770\nwhich is more than likely what these\nthird party providers are doing is just\n\n459\n00:22:40.770 --> 00:22:42.980\nusing that rest API to\nget the data in there.\n\n460\n00:22:42.980 --> 00:22:45.700\n>> Now, Don, is there any other\nsecurities considerations we need to\n\n461\n00:22:45.700 --> 00:22:48.385\ntake into account when we're\nworking with this file system?\n\n462\n00:22:48.385 --> 00:22:50.830\n>> That's the biggest\nlimitation of this file system,\n\n463\n00:22:50.830 --> 00:22:55.100\nis when I have a server that's\na file server and I share a folder,\n\n464\n00:22:55.100 --> 00:22:58.070\nI can set different permissions\non different folders, right?\n\n465\n00:22:58.070 --> 00:23:00.400\nHere, I really can't do that.\n\n466\n00:23:00.400 --> 00:23:04.540\nI can create more than one share and\nhave different keys for each one.\n\n467\n00:23:04.540 --> 00:23:08.730\nAnd you can actually create user accounts\nto a limited extend on them, but\n\n468\n00:23:08.730 --> 00:23:10.190\nit's not very flexible.\n\n469\n00:23:10.190 --> 00:23:11.420\nSo this is really designed for\n\n470\n00:23:11.420 --> 00:23:14.850\nsome common use elements where\nyou just share that one key.\n\n471\n00:23:14.850 --> 00:23:17.140\nIf you need something\nmore advanced than that,\n\n472\n00:23:17.140 --> 00:23:19.130\nthen you do need to spin\nup a real file server.\n\n473\n00:23:19.130 --> 00:23:23.820\nAnd it's not hard to spin up a server 2012\nmachine, enable file services on it and\n\n474\n00:23:23.820 --> 00:23:24.770\nget it going.\n\n475\n00:23:24.770 --> 00:23:29.260\nBut you'll need a full server to do that,\nand that's because you get the extra power\n\n476\n00:23:29.260 --> 00:23:34.400\nof managing the permissions, disk access,\ncompression, encryption, all of that.\n\n477\n00:23:34.400 --> 00:23:36.050\nThis isn't even encrypted, right?\n\n478\n00:23:36.050 --> 00:23:39.100\nIt's just a file share that's stored up\nthere, so it's not really designed for\n\n479\n00:23:39.100 --> 00:23:41.950\nthat sensitive data,\nall things that we need to be aware of.\n\n480\n00:23:41.950 --> 00:23:45.625\n>> Yeah, so keep all company financial\ninformation off of this drive.\n\n481\n00:23:45.625 --> 00:23:49.390\n[LAUGH] All right Don, anything else that\nwe need to cover before we call it a day?\n\n482\n00:23:49.390 --> 00:23:52.100\n>> I think that's about it for\nAzure File Services.\n\n483\n00:23:52.100 --> 00:23:54.220\nThere's a lot more file power.\n\n484\n00:23:54.220 --> 00:23:58.110\nFile power, I guess that'll work,\n[LAUGH] inside of Azure.\n\n485\n00:23:58.110 --> 00:24:00.580\nWe've touched on the main features\nof the main ones that you'll use.\n\n486\n00:24:00.580 --> 00:24:01.460\nThere's plenty of others.\n\n487\n00:24:01.460 --> 00:24:04.040\nBut as far as Azure File,\nit is pretty straightforward.\n\n488\n00:24:04.040 --> 00:24:04.880\nAnd that's about it.\n\n489\n00:24:04.880 --> 00:24:06.330\n>> Awesome.\nWell, thank you so much for that,\n\n490\n00:24:06.330 --> 00:24:07.750\nshowing us how to work with this thing,\n\n491\n00:24:07.750 --> 00:24:11.420\nletting us know that it's actually there,\nand that we can take advantage of it.\n\n492\n00:24:11.420 --> 00:24:13.990\nThat being said, we're going to go\nahead and sign off on this show.\n\n493\n00:24:13.990 --> 00:24:16.810\nFor IT Pro TV, I've been your host,\nDaniel Lowrie.\n\n494\n00:24:16.810 --> 00:24:17.480\n>> And I'm Don Pezet.\n\n495\n00:24:17.480 --> 00:24:19.536\n>> And we'll see you next time.\n\n496\n00:24:19.536 --> 00:24:20.050\n[SOUND]\n\n",
          "vimeoId": "148667884"
        },
        {
          "description": "In this episode, Don and Daniel explain the Cloud Services feature of Microsoft Azure. They begin by explaining exactly what Cloud Services is as well as some of its limitations and implementations. Then they show you how to use the Azure Portal and PowerShell to create Cloud Services for use in your environment.",
          "length": "1797",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-3-1-cloud_service-120415-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-3-1-cloud_service-120415-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-3-1-cloud_service-120415-1-sm.jpg",
          "title": "Cloud Services",
          "transcript": "WEBVTT\n\n1\n00:00:00.254 --> 00:00:10.254\n[MUSIC]\n\n2\n00:00:12.129 --> 00:00:16.980\nAll right, greetings everyone and welcome\nto another exciting episode of ITProTV.\n\n3\n00:00:16.980 --> 00:00:21.100\nI'm your host, Daniel Lowrie, and in this\nepisode we're gonna continue taking a look\n\n4\n00:00:21.100 --> 00:00:24.240\nat the Microsoft Azure virtual machines.\n\n5\n00:00:24.240 --> 00:00:27.120\nAnd joining me in the studio today,\nyou all know him, you all love him,\n\n6\n00:00:27.120 --> 00:00:30.090\nhe's number one in your programs and\nnumber one in your hearts,\n\n7\n00:00:30.090 --> 00:00:30.970\nnone other than Mr Don Pezet.\n\n8\n00:00:30.970 --> 00:00:32.800\nDon, how's it going today?\n\n9\n00:00:32.800 --> 00:00:33.670\nWelcome to the show.\n\n10\n00:00:33.670 --> 00:00:37.880\n>> Well, with such high expectations\nthat I now have to live up to I got to\n\n11\n00:00:37.880 --> 00:00:39.290\ncome up with a better dog and pony show.\n\n12\n00:00:39.290 --> 00:00:39.850\n>> Don't lay an egg.\n[LAUGH]\n\n13\n00:00:39.850 --> 00:00:41.520\n>> In this episode we're\n\n14\n00:00:41.520 --> 00:00:44.770\ngoing to be taking a look at\na pretty important topic.\n\n15\n00:00:44.770 --> 00:00:47.210\nWe're going to take a look\nat cloud services and\n\n16\n00:00:47.210 --> 00:00:48.930\nhow we implement them inside of Azure.\n\n17\n00:00:48.930 --> 00:00:52.580\nHow we can use them to work with our\nvirtual machines and support some of our\n\n18\n00:00:52.580 --> 00:00:56.090\ninfrastructure and why they are such of an\nimportant piece of our Azure deployment.\n\n19\n00:00:57.250 --> 00:00:59.910\nNow, with Cloud services,\nit's one of the things that,\n\n20\n00:00:59.910 --> 00:01:03.080\neven if you don't know about them,\nyou start adding things to Azure and\n\n21\n00:01:03.080 --> 00:01:06.060\nthey can kinda get automatically\ncreated in the background.\n\n22\n00:01:06.060 --> 00:01:09.170\nSo, you might log in and you'll have\na bunch of these services that have\n\n23\n00:01:09.170 --> 00:01:11.250\nalready been made and\nyou didn't even realize it.\n\n24\n00:01:11.250 --> 00:01:13.080\nSo it's pretty easy to implement these,\nbut\n\n25\n00:01:13.080 --> 00:01:14.720\nthere's a lot of power behind them too.\n\n26\n00:01:14.720 --> 00:01:16.440\n>> Now, Don, before you get to far here.\n\n27\n00:01:16.440 --> 00:01:17.760\nI'm hearing you correctly.\n\n28\n00:01:17.760 --> 00:01:20.110\nYou keep saying Cloud services.\n\n29\n00:01:20.110 --> 00:01:24.235\nWhich is a feature inside\nof Azure Cloud Services.\n\n30\n00:01:24.235 --> 00:01:25.470\n>> [LAUGH]\n>> Cloud Service,\n\n31\n00:01:25.470 --> 00:01:27.140\nI'm starting to get confused here, my man.\n\n32\n00:01:27.140 --> 00:01:28.650\n>> Yeah.\n>> Just a tidge.\n\n33\n00:01:28.650 --> 00:01:31.940\n>> I'll tell you way, way back in the day,\nwhich is just a couple of years ago,\n\n34\n00:01:31.940 --> 00:01:34.860\nwhen Azure was first released and\nI started getting involved with it,\n\n35\n00:01:34.860 --> 00:01:37.430\nstarted working with it,\nit really confused me, too.\n\n36\n00:01:37.430 --> 00:01:40.760\nI was like, well isn't Azure\na Cloud Service the whole thing?\n\n37\n00:01:40.760 --> 00:01:44.690\nWell, unfortunately someone at\nMicrosoft decided to create this item,\n\n38\n00:01:44.690 --> 00:01:49.580\nthis entity inside of Azure and they\ndecided to name it a cloud service and\n\n39\n00:01:49.580 --> 00:01:52.460\nwhat they weren't thinking about was how\nmuch confusion that was gonna create.\n\n40\n00:01:52.460 --> 00:01:58.140\nBasically what a cloud service does is it\nlets us group together virtual machines.\n\n41\n00:01:58.140 --> 00:02:01.530\nNormally when you spin up a virtual\nmachine it is completely independent from\n\n42\n00:02:01.530 --> 00:02:03.060\nall of your other VMs.\n\n43\n00:02:03.060 --> 00:02:05.980\nBut sometimes we want to\ngroup them together, right?\n\n44\n00:02:05.980 --> 00:02:10.190\nSo, for example, let's say,\nlet's say you got an online store.\n\n45\n00:02:10.190 --> 00:02:13.760\nAnd so there's a web front end\nthat your end users hit, and\n\n46\n00:02:13.760 --> 00:02:15.040\nthey access the web server.\n\n47\n00:02:15.040 --> 00:02:16.700\nAnd then the web server turns around and\n\n48\n00:02:16.700 --> 00:02:18.600\nthen on the back end it's\ngot a database server.\n\n49\n00:02:18.600 --> 00:02:21.080\nAnd so it's accessing that database and\nreading that information.\n\n50\n00:02:22.190 --> 00:02:26.060\nIf a user searches for a product,\nthey put the search in on the web server,\n\n51\n00:02:26.060 --> 00:02:27.890\nthe web server turns around and\ndoes database lookup.\n\n52\n00:02:28.950 --> 00:02:32.040\nDatabase returns a list of products,\nand we see that on the web server.\n\n53\n00:02:32.040 --> 00:02:32.730\nRight?\n\n54\n00:02:32.730 --> 00:02:34.410\nNow, what happens if\nthe database goes down?\n\n55\n00:02:35.450 --> 00:02:37.160\nWell, all website is basically useless.\n\n56\n00:02:37.160 --> 00:02:40.160\nIf you've got no product database,\npeople can't shop, they can't buy things.\n\n57\n00:02:40.160 --> 00:02:42.020\nSo, it's useless.\n\n58\n00:02:42.020 --> 00:02:45.900\nIf the webserver goes down, your data\nbase is up and nobody can search it,\n\n59\n00:02:45.900 --> 00:02:46.810\nnobody can do purchases.\n\n60\n00:02:46.810 --> 00:02:47.900\nSo, again it's useless.\n\n61\n00:02:47.900 --> 00:02:48.950\nThe two are related.\n\n62\n00:02:48.950 --> 00:02:49.760\nI need them.\n\n63\n00:02:49.760 --> 00:02:53.510\nI need them together so\nit makes sence to group them together so\n\n64\n00:02:53.510 --> 00:02:57.290\nthat I can recognize that they\nare part of the same service and\n\n65\n00:02:57.290 --> 00:03:02.310\nthat service is hosted in the could so\nlets call it a could service.\n\n66\n00:03:02.310 --> 00:03:06.490\nMicrosoft is not referring to their could\nservice of Azure they're referring to\n\n67\n00:03:06.490 --> 00:03:10.320\nyour cloud service of what\nyou're hosting inside of Azure.\n\n68\n00:03:10.320 --> 00:03:13.920\nSo, if I decide to put my\nactive directory up in Azure,\n\n69\n00:03:13.920 --> 00:03:18.330\nthat's one of my cloud services now,\none of the services I've put up there.\n\n70\n00:03:18.330 --> 00:03:20.430\nSo, the terminology is confusing.\n\n71\n00:03:20.430 --> 00:03:22.430\nAnd you can ignore it if you want.\n\n72\n00:03:22.430 --> 00:03:25.280\nIf you want each of your VMs to\nbe independent you can just throw\n\n73\n00:03:25.280 --> 00:03:27.650\nthem in there and\ndon't worry about cloud services at all.\n\n74\n00:03:27.650 --> 00:03:30.760\nEvery virtual machine will\nautomatically be put in a Cloud service\n\n75\n00:03:30.760 --> 00:03:33.550\nwith the same name as a virtual machine.\n\n76\n00:03:33.550 --> 00:03:36.960\nAnd so, it just does that,\nand that's the end of it.\n\n77\n00:03:36.960 --> 00:03:40.280\nBut, if you really want to take\nadvantage of these, it's pretty useful.\n\n78\n00:03:40.280 --> 00:03:41.680\nAnd let me just give you one scenario.\n\n79\n00:03:43.060 --> 00:03:46.350\nI've worked in a lot of environments where\nI've had hundreds of virtual machines\n\n80\n00:03:46.350 --> 00:03:51.360\ninside of Azure and\nas you stop using a server,\n\n81\n00:03:51.360 --> 00:03:54.070\nyou decommission a service,\nyou wanna pull the VM out.\n\n82\n00:03:54.070 --> 00:03:56.850\nAnd so, you'll shut down and terminate or\n\n83\n00:03:56.850 --> 00:03:59.350\ndeallocate a couple of virtual machines,\nget rid of them.\n\n84\n00:03:59.350 --> 00:04:02.350\nAnd then sometimes you leave one or two\nbehind cuz you didn't realize they were\n\n85\n00:04:02.350 --> 00:04:04.360\nrelated, they were a part\nof the same service.\n\n86\n00:04:04.360 --> 00:04:07.480\nBut, if they're grouped together I can\npull it up by the cloud service and\n\n87\n00:04:07.480 --> 00:04:10.700\nI can wipe out that whole cloud service\nand everything that's inside of it.\n\n88\n00:04:10.700 --> 00:04:12.500\nMaking sure that I get\nthe virtual machines and\n\n89\n00:04:12.500 --> 00:04:14.210\ntheir associated disks all together.\n\n90\n00:04:14.210 --> 00:04:17.700\nSo, we're less likely to leave remnants\nbehind and that's pretty handy.\n\n91\n00:04:17.700 --> 00:04:20.310\nThat's one way that we\ncan use a cloud service.\n\n92\n00:04:20.310 --> 00:04:22.810\nThere's other ways that make\nthem really important also.\n\n93\n00:04:22.810 --> 00:04:25.040\nNow, we haven't talked about\nit in the show yet, and\n\n94\n00:04:25.040 --> 00:04:27.230\nwe're not going to talk about\nit in this show either.\n\n95\n00:04:27.230 --> 00:04:31.850\nBut we're gonna learn about later\nhow we can create load balance sets.\n\n96\n00:04:31.850 --> 00:04:35.950\nAnd what a load balance set does, is it\nallows us to take traffic that comes into\n\n97\n00:04:35.950 --> 00:04:40.280\nour system and load balance it across\nmultiple virtual machines, right?\n\n98\n00:04:40.280 --> 00:04:41.680\nAnd to do that,\n\n99\n00:04:41.680 --> 00:04:46.590\nthe easiest way is to put those virtual\nmachines inside of the same Cloud service.\n\n100\n00:04:46.590 --> 00:04:48.850\nNow, why would I do that?\n\n101\n00:04:48.850 --> 00:04:52.870\nWell, a cloud service has\nan IP address assigned to it.\n\n102\n00:04:52.870 --> 00:04:56.460\nAnd when I start sticking virtual\nmachines inside of the cloud service,\n\n103\n00:04:56.460 --> 00:05:01.090\nthe virtual machines are given a private\nIP and they share that public IP.\n\n104\n00:05:02.470 --> 00:05:05.690\nThe cool part there is I can\ndo things like auto scaling.\n\n105\n00:05:05.690 --> 00:05:08.790\nWhere I might have 2 servers in\nthe cloud service or I might\n\n106\n00:05:08.790 --> 00:05:11.510\nhave 20 servers in the cloud service,\nbut they all share that one IP and\n\n107\n00:05:11.510 --> 00:05:15.160\nif I use a load balancer also, it will\ndistribute the traffic across these nodes.\n\n108\n00:05:15.160 --> 00:05:19.270\nAnd we do that all within one cloud\nservice, so that's really handy.\n\n109\n00:05:19.270 --> 00:05:23.130\nNow depending on when you watch\nthis video cloud services might\n\n110\n00:05:23.130 --> 00:05:28.230\nbe really super important to you or\nyou might be saying to yourself right now,\n\n111\n00:05:28.230 --> 00:05:30.330\nisn't this the old way\nthat Azure did this?\n\n112\n00:05:30.330 --> 00:05:30.920\nRight.\n\n113\n00:05:30.920 --> 00:05:33.990\nBecause cloud services are actually\nin the process of being replaced by\n\n114\n00:05:33.990 --> 00:05:35.230\nsomething called a resource group.\n\n115\n00:05:35.230 --> 00:05:37.030\nAnd we're gonna cover resource\ngroups in the next episode.\n\n116\n00:05:37.030 --> 00:05:39.130\nSo, I just want to mention that here,\nif you're wondering right now,\n\n117\n00:05:39.130 --> 00:05:41.910\nwhy doesn't Don talking about resource\ngroups did I get the old video?\n\n118\n00:05:41.910 --> 00:05:48.620\nNow, I want to cover cloud services first\nbecause resource groups are pretty new.\n\n119\n00:05:48.620 --> 00:05:49.790\nThey're out there, they're official.\n\n120\n00:05:49.790 --> 00:05:52.660\nMicrosoft encourages you to\ndo new deployments this way.\n\n121\n00:05:52.660 --> 00:05:55.120\nBut, if you were to go and\nget a job somewhere right now.\n\n122\n00:05:55.120 --> 00:05:59.460\nA place that's already implemented Azure,\nit's going to be all cloud services.\n\n123\n00:05:59.460 --> 00:06:01.120\nPeople haven't moved to resource groups,\nyet.\n\n124\n00:06:01.120 --> 00:06:03.690\nThat's kind a work in progress,\nyou seeing people move that way.\n\n125\n00:06:03.690 --> 00:06:06.810\nTwo years from now everybody\nwill be all resource group.\n\n126\n00:06:06.810 --> 00:06:09.420\nBut right now most people\nare still Cloud services, so\n\n127\n00:06:09.420 --> 00:06:11.500\nit's important that we understand it.\n\n128\n00:06:11.500 --> 00:06:14.730\nSo, I wanna walk you through that process,\nhow we create the Cloud services,\n\n129\n00:06:14.730 --> 00:06:19.380\nhow we get them set up, how they function,\nand just kinda get a chance to see that\n\n130\n00:06:19.380 --> 00:06:23.690\nin Azure,\nall right well let's take a look at this.\n\n131\n00:06:23.690 --> 00:06:27.050\nThe first thing I want to do is I want\nto show you the new Azure portal and\n\n132\n00:06:27.050 --> 00:06:30.020\nthen I'm going to go back\nto the legacy Azure portal.\n\n133\n00:06:30.020 --> 00:06:33.710\nUnder the new Azure portal,\nthey really want to do things\n\n134\n00:06:33.710 --> 00:06:37.480\nthrough what are called resource groups,\nthe new way of doing things and\n\n135\n00:06:37.480 --> 00:06:41.570\nso when I look over here at\nthe left side of my, my little bar.\n\n136\n00:06:41.570 --> 00:06:45.710\nYou'll notice that the very first menu\nitem right after new is resource groups.\n\n137\n00:06:45.710 --> 00:06:48.190\nThat's what they really want me to use.\n\n138\n00:06:48.190 --> 00:06:50.420\nBut as I start looking down the line,\n\n139\n00:06:50.420 --> 00:06:53.120\nway down here towards the bottom\nI find cloud services.\n\n140\n00:06:53.120 --> 00:06:54.630\nRight.\nAnd it's being truncated here but\n\n141\n00:06:54.630 --> 00:06:56.900\nit says cloud services classic.\n\n142\n00:06:56.900 --> 00:06:58.260\nRight, this is the classic way to do.\n\n143\n00:06:58.260 --> 00:07:00.600\nIt's like a classic code\n>> Yeah.\n\n144\n00:07:00.600 --> 00:07:01.980\n>> I don't want new formula\n\n145\n00:07:01.980 --> 00:07:03.350\nI want the classic\n>> So,\n\n146\n00:07:03.350 --> 00:07:07.980\nthis is Cloud services (classic) and\nthat's because Microsoft knows that\n\n147\n00:07:07.980 --> 00:07:11.270\nmost people out there are deployed\nin cloud services right now, and\n\n148\n00:07:11.270 --> 00:07:14.290\nso we still need to be able to manage\nthem here in the new portal, all right.\n\n149\n00:07:14.290 --> 00:07:15.860\nAnd you'll see that in a lot of places.\n\n150\n00:07:15.860 --> 00:07:17.328\nSee how I've got two\nvirtual machines here?\n\n151\n00:07:17.328 --> 00:07:21.758\nVirtual machines (classic) and\nVirtual machines nothing, right.\n\n152\n00:07:21.758 --> 00:07:24.860\nVirtual machines (classic)\n>> Those are ones that\n\n153\n00:07:24.860 --> 00:07:27.260\nare stored in a cloud service.\n\n154\n00:07:27.260 --> 00:07:31.610\nVirtual machines, nothing, those\nare the ones stored in a resource group.\n\n155\n00:07:31.610 --> 00:07:33.990\nSo, we still have full support for both.\n\n156\n00:07:33.990 --> 00:07:35.190\nYou can deploy either one.\n\n157\n00:07:35.190 --> 00:07:37.900\nSo, I just wanted to mentioned that\nwhen we go into the new portal,\n\n158\n00:07:37.900 --> 00:07:39.660\nanytime you're working\nwith cloud services,\n\n159\n00:07:39.660 --> 00:07:42.850\nyou're gonna be working with things that\nhave that little classic tag on the end.\n\n160\n00:07:42.850 --> 00:07:47.460\nNow, if we go to the legacy\nportal that's not the case.\n\n161\n00:07:47.460 --> 00:07:49.059\nWhen you go to the legacy portal,\n\n162\n00:07:49.059 --> 00:07:51.874\nresource groups aren't\nsupported in the legacy portal.\n\n163\n00:07:51.874 --> 00:07:57.246\nSo, when I jump in here, I'm gonna see\nCloud services right here ready to rock.\n\n164\n00:07:57.246 --> 00:08:00.923\nAnd I see virtual machines And\nI'm not gonna see resource groups, and\n\n165\n00:08:00.923 --> 00:08:04.860\nI'm not gonna see any virtual machines\nthat are in those resource groups.\n\n166\n00:08:04.860 --> 00:08:06.340\nThey're completely invisible here.\n\n167\n00:08:06.340 --> 00:08:07.150\nIf I wanna work with those,\n\n168\n00:08:07.150 --> 00:08:10.120\nI've either gotta go to PowerShell,\nor go to the new portal.\n\n169\n00:08:10.120 --> 00:08:13.400\nSo if you're doing a new deployment,\nskip this episode.\n\n170\n00:08:13.400 --> 00:08:15.220\nGo to the Resource group episode,\nwatch that one.\n\n171\n00:08:15.220 --> 00:08:16.872\nThat's where you go for a new deployment.\n\n172\n00:08:16.872 --> 00:08:20.239\nBut if you're supporting an existing\ndeployment, if I can say it,\n\n173\n00:08:20.239 --> 00:08:23.620\nthis is really important because\nit's what you're going to have.\n\n174\n00:08:24.700 --> 00:08:27.460\nAll right, so, how do cloud services work?\n\n175\n00:08:27.460 --> 00:08:30.880\nWell, I can drop right down here\nto that cloud services folder and\n\n176\n00:08:30.880 --> 00:08:32.350\nI can start to create cloud services.\n\n177\n00:08:32.350 --> 00:08:33.941\nYou can see I've already\ngot a few of them in here.\n\n178\n00:08:33.941 --> 00:08:36.790\nAll right,\nwe can create a cloud service and\n\n179\n00:08:36.790 --> 00:08:41.336\nthen start to drop virtual machines\ninto them to group them together.\n\n180\n00:08:41.336 --> 00:08:43.820\nAnd so,\nI can go just go right down here to New.\n\n181\n00:08:43.820 --> 00:08:49.400\nAnd then, it's gonna offer to create\na New Compute, Cloud Service.\n\n182\n00:08:49.400 --> 00:08:51.970\nAnd then I can do a quick create or\ncustom create.\n\n183\n00:08:51.970 --> 00:08:56.090\nAnd if I do a quick create, it's just\ngonna ask for a name, and that's it.\n\n184\n00:08:56.090 --> 00:09:01.760\nNow that name is pretty important,\nthe name is the URL right.\n\n185\n00:09:01.760 --> 00:09:08.550\nThis is the address for the cloud service,\nI know, why is that important to me.\n\n186\n00:09:08.550 --> 00:09:10.810\nWell every cloud service gets a name.\n\n187\n00:09:10.810 --> 00:09:16.830\nAnd when it gets that name, it has to be\nunique across the entire Azure deployment.\n\n188\n00:09:16.830 --> 00:09:19.940\nIf I pick a name that's\nalready in use like Microsoft,\n\n189\n00:09:19.940 --> 00:09:23.910\nokay micorsoft.cloudapp.net,\nsee a little domain right there,\n\n190\n00:09:23.910 --> 00:09:26.230\nthat's the name this cloud\nsource is gonna get.\n\n191\n00:09:26.230 --> 00:09:27.155\nSomebody's already using that.\n\n192\n00:09:27.155 --> 00:09:28.281\nI wonder who?\n\n193\n00:09:28.281 --> 00:09:31.510\nSo we have to pick a name\nthat's truly unique.\n\n194\n00:09:31.510 --> 00:09:33.639\nAnd there are certain limitations,\n\n195\n00:09:33.639 --> 00:09:37.699\nlike it does get mad if you start to\ndo things like entering in a hyphen.\n\n196\n00:09:37.699 --> 00:09:38.953\nSee, it didn't like that.\n\n197\n00:09:38.953 --> 00:09:40.356\nOr underscores, right?\n\n198\n00:09:40.356 --> 00:09:41.193\nIt's not liking that.\n\n199\n00:09:41.193 --> 00:09:43.670\nSo I really need to come up\nwith a truly unique name.\n\n200\n00:09:43.670 --> 00:09:46.850\nSo I might do itprotvdemo.\n\n201\n00:09:48.020 --> 00:09:50.610\nWell I guess that itprotvdemo\nI was gonna add more, but why?\n\n202\n00:09:50.610 --> 00:09:54.230\nSo I got itprotvdemo right there and\nI got a little check mark.\n\n203\n00:09:54.230 --> 00:09:58.020\nNobody's using that one so\nI can have itprotvdemo.cloudapp.net.\n\n204\n00:09:58.020 --> 00:10:02.100\nNow I've mentioned earlier that\ncloudapp is gonna get an IP address,\n\n205\n00:10:02.100 --> 00:10:06.870\nand the IP address is gonna be tied\nto this DNS name right here, okay?\n\n206\n00:10:06.870 --> 00:10:12.040\nThe cool part there is I can start to\nstick servers in this cloud service.\n\n207\n00:10:12.040 --> 00:10:14.590\nAnd then I can go to my DNS, and\n\n208\n00:10:14.590 --> 00:10:20.070\nmaybe I want www.itpro.tv to point\nto this cloud app, all right?\n\n209\n00:10:20.070 --> 00:10:23.560\nSo what I can do is in DNS I can\ncreate a C name, a canonical name,\n\n210\n00:10:23.560 --> 00:10:28.852\nwhich called a DNS alias,\nand I can point www.itpro.tv\n\n211\n00:10:28.852 --> 00:10:33.540\nto itprotvdemo.cloudapp.net.\n\n212\n00:10:33.540 --> 00:10:38.098\nSo whenever somebody does a lookup for\nwww.itpro.tv, it'll resolve\n\n213\n00:10:38.098 --> 00:10:43.080\nitprotvdemo.cloudapp.net and give them\nthe IP address of that cloud app.\n\n214\n00:10:43.080 --> 00:10:48.990\nNow, that's really important because,\nwhat happens if I have a failure in Azure,\n\n215\n00:10:48.990 --> 00:10:51.450\nand I have to failover\nto another data center?\n\n216\n00:10:51.450 --> 00:10:57.240\nI need to failover to one of the different\navailability zones inside of a region.\n\n217\n00:10:57.240 --> 00:11:00.900\nWhen that happens, my IP address\nis very likely going to change.\n\n218\n00:11:00.900 --> 00:11:04.290\nSo I don't wanna map to an IP address,\n\n219\n00:11:04.290 --> 00:11:06.530\nI always wanna map to\na domain name if I can.\n\n220\n00:11:06.530 --> 00:11:10.340\nUse C names if you can, otherwise\nyou start to lose the availability\n\n221\n00:11:10.340 --> 00:11:12.160\nfeatures that are found in Azure.\n\n222\n00:11:12.160 --> 00:11:16.010\nAnd then next I get to pick my Region or\nAffinity Group.\n\n223\n00:11:16.010 --> 00:11:19.310\nNow Affinity Groups have kind of gone\naway, so I really don't use those anymore,\n\n224\n00:11:19.310 --> 00:11:21.260\neven if you are using Cloud Services.\n\n225\n00:11:21.260 --> 00:11:24.040\nAnd the Regions are really what\ntakes care of us on this one.\n\n226\n00:11:24.040 --> 00:11:27.040\nSo when I look at the Regions, I just\nneed to pick where I want to deploy this.\n\n227\n00:11:27.040 --> 00:11:28.710\nI'll go East US for mine.\n\n228\n00:11:30.070 --> 00:11:32.820\nAnd so\nnow I can whip off that resource group.\n\n229\n00:11:32.820 --> 00:11:37.490\nIf I go to Custom Create,\nI'll see the same basic choices right?\n\n230\n00:11:37.490 --> 00:11:41.540\nSo when I go to Custom Create,\nthis one I can give it a URL\n\n231\n00:11:41.540 --> 00:11:46.314\nitprotvdemo.cloudapp.net, I\ncan pick that East US region.\n\n232\n00:11:46.314 --> 00:11:50.500\nI can choose to deploy\na cloud server's package.\n\n233\n00:11:50.500 --> 00:11:51.850\nNow what is that?\n\n234\n00:11:51.850 --> 00:11:56.074\nYou can actually make a XML file that\nidentifies exactly what you want in this\n\n235\n00:11:56.074 --> 00:12:00.298\ncloud service, that can define five\ndifferent virtual machines that I want\n\n236\n00:12:00.298 --> 00:12:04.984\ndeployed, and what image to use, and what\nusername and password to assign to them,\n\n237\n00:12:04.984 --> 00:12:06.385\nand what network to use.\n\n238\n00:12:06.385 --> 00:12:09.265\nAnd that way when you spin\nthose virtual machines up,\n\n239\n00:12:09.265 --> 00:12:13.940\nwhen you spin this cloud service up, it's\nalready got all those resources behind it.\n\n240\n00:12:13.940 --> 00:12:15.780\nIf you're using images that\nalready have your data,\n\n241\n00:12:15.780 --> 00:12:18.375\nyou could be spinning up web servers and\n\n242\n00:12:18.375 --> 00:12:21.270\ndatabase servers at a moment's notice that\nare already prepopulated with your data.\n\n243\n00:12:21.270 --> 00:12:22.860\nIt's really powerful stuff.\n\n244\n00:12:22.860 --> 00:12:24.970\nSo that's where you do a custom create.\n\n245\n00:12:26.730 --> 00:12:29.420\nIf I hit the checkmark there, it's\ngoing to create that cloud service and\n\n246\n00:12:29.420 --> 00:12:32.159\nthere I've got a nice,\nnew cloud service that's up and running.\n\n247\n00:12:33.300 --> 00:12:37.086\nNow if I look at it across the line here,\nnotice that it says that it's created.\n\n248\n00:12:37.086 --> 00:12:41.540\nMy production is blank, right.\n\n249\n00:12:41.540 --> 00:12:45.860\nWhen you create a cloud service,\nif it's an empty cloud service,\n\n250\n00:12:45.860 --> 00:12:48.890\nall you've done is reserve the DNS name.\n\n251\n00:12:48.890 --> 00:12:50.020\nI just reserved that DNS name.\n\n252\n00:12:50.020 --> 00:12:52.710\nIf one of you guys watching the show\ntoday were to go and try and\n\n253\n00:12:52.710 --> 00:12:55.730\ncreate that, and you're to do it right\nnow cuz I'll delete this later, but\n\n254\n00:12:55.730 --> 00:12:59.720\nif you tried it right now,\nthen it will show as being taken, right.\n\n255\n00:12:59.720 --> 00:13:02.100\nThat's all I've done,\nis reserved that name.\n\n256\n00:13:02.100 --> 00:13:04.220\nI don't actually have an IP address yet.\n\n257\n00:13:04.220 --> 00:13:07.448\nI don't have any of those resources on\nthe back end and I'm really not paying\n\n258\n00:13:07.448 --> 00:13:10.437\nanything for this because it's just\nsitting there idle, all right.\n\n259\n00:13:10.437 --> 00:13:15.260\nThe cloud service doesn't actually\ngo active until I spin up at\n\n260\n00:13:15.260 --> 00:13:18.360\nleast one virtual machine inside of it.\n\n261\n00:13:18.360 --> 00:13:19.790\nAnd I don't mean just\nadd a virtual machine,\n\n262\n00:13:19.790 --> 00:13:22.860\nthe virtual machine's gonna be running,\nI've gotta start it up and get in running.\n\n263\n00:13:22.860 --> 00:13:25.670\nAnd as soon as that happens,\nthen this cloud service\n\n264\n00:13:25.670 --> 00:13:30.300\nreally starts to do something,\nit powers on and it gets to work, right.\n\n265\n00:13:30.300 --> 00:13:34.420\nBut as it stands, it's just a place holder\nfor a DNS name right now, the way that\n\n266\n00:13:34.420 --> 00:13:37.620\nI've created it, until I start to\nput some things inside of it, right?\n\n267\n00:13:37.620 --> 00:13:42.460\n>> So Don, other than basically like you\nsaid, reserving that name space, and\n\n268\n00:13:42.460 --> 00:13:43.690\nhaving that available for\n\n269\n00:13:43.690 --> 00:13:48.250\nyourself, is there any real reason\nto create a cloud service this way?\n\n270\n00:13:48.250 --> 00:13:51.430\nOr do like what you were talking about\nearlier, where you said when you create\n\n271\n00:13:51.430 --> 00:13:55.150\na virtual machine, it'll actually create\na cloud service for you, and obviously you\n\n272\n00:13:55.150 --> 00:13:58.460\nprobably gonna start a virtual machine if\nyou created it, and go about that route?\n\n273\n00:13:58.460 --> 00:14:01.788\n>> Yeah, there's different ways\nthat I've been looking at it.\n\n274\n00:14:01.788 --> 00:14:04.831\nIf I spin up a virtual machine\nthat creates a cloud service and\n\n275\n00:14:04.831 --> 00:14:08.072\nthe cloud service will be named\nthe same as the virtual machine.\n\n276\n00:14:08.072 --> 00:14:11.695\nSo if I wanna pick up a name, it's better\nto create ahead of time, that's on thing.\n\n277\n00:14:11.695 --> 00:14:14.201\nThe other thing is, if I'm using\none of those deployment packages,\n\n278\n00:14:14.201 --> 00:14:15.510\nI've gotta do it this way, right?\n\n279\n00:14:15.510 --> 00:14:17.640\nSo those are kind of the scenarios there.\n\n280\n00:14:17.640 --> 00:14:20.030\nOtherwise, if you don't\nreally care about the name,\n\n281\n00:14:20.030 --> 00:14:23.720\ncuz the end users don't see the name,\nyou use a different DNSC name for it.\n\n282\n00:14:23.720 --> 00:14:26.300\nWell, if you don't care about that, then\nyeah, you could just whip up a server.\n\n283\n00:14:26.300 --> 00:14:29.378\nIt'll make one.\nHere, if I do that, let me just jump up,\n\n284\n00:14:29.378 --> 00:14:32.056\nand I'm gonna go to my virtual machines.\n\n285\n00:14:32.056 --> 00:14:34.591\nAnd I'll just whip up\na new server here and\n\n286\n00:14:34.591 --> 00:14:37.360\nlet's just pick something Quick Create.\n\n287\n00:14:37.360 --> 00:14:39.330\nI'm not gonna go too crazy on this.\n\n288\n00:14:39.330 --> 00:14:42.820\nI'll create a server called itprotvdemo1.\n\n289\n00:14:45.010 --> 00:14:49.529\nOr maybe we'll do like a file server,\nso file03.\n\n290\n00:14:49.529 --> 00:14:54.496\nAll right, so itprotvfile03,\nI'll do Windows Server 2012,\n\n291\n00:14:54.496 --> 00:14:57.370\nI'll give it a username and a password.\n\n292\n00:14:58.680 --> 00:15:02.770\nAnd I'll just pick East US for\nthat one and create it, okay.\n\n293\n00:15:02.770 --> 00:15:03.929\nAnd oh,\n[LAUGH] guess I have to type my password.\n\n294\n00:15:03.929 --> 00:15:05.345\n>> Did you confirm that password?\n\n295\n00:15:05.345 --> 00:15:06.980\n>> I cannot confirm it.\n\n296\n00:15:06.980 --> 00:15:09.650\nI can neither confirm nor\ndeny these password allegations.\n\n297\n00:15:09.650 --> 00:15:11.300\nAll right, so I'm gonna spin that up.\n\n298\n00:15:11.300 --> 00:15:16.726\nNow, what I'll see is right here,\nis itprotvfile03.\n\n299\n00:15:16.726 --> 00:15:20.650\nAnd it says start provisioning, right,\nso it's beginning to deploy the server.\n\n300\n00:15:20.650 --> 00:15:23.560\nWhen it deploys the server,\nit's gotta go into a cloud service.\n\n301\n00:15:23.560 --> 00:15:27.150\nAnd so before it even starts deploying\nthe VM, it's gonna turn around and\n\n302\n00:15:27.150 --> 00:15:28.560\ncreate the cloud service.\n\n303\n00:15:28.560 --> 00:15:31.980\nAnd because I did a Quick Create,\nit never asked me for a name, right?\n\n304\n00:15:31.980 --> 00:15:33.370\nIt's just gonna make it.\n\n305\n00:15:33.370 --> 00:15:35.920\nAnd if I go over here to\nmy cloud services, and\n\n306\n00:15:35.920 --> 00:15:38.640\nI look at my list, I don't see it.\n\n307\n00:15:38.640 --> 00:15:40.850\nWell, it's still doing,\nI've gotta wait, right?\n\n308\n00:15:40.850 --> 00:15:46.380\nBut in a moment, I'll see a cloud service\nappear that will be called itprotvfile03.\n\n309\n00:15:46.380 --> 00:15:48.400\nAnd it's just for that one server.\n\n310\n00:15:48.400 --> 00:15:51.990\nAnd by default when you whip\nup virtual machines in Azure,\n\n311\n00:15:51.990 --> 00:15:52.960\nthey're all independent.\n\n312\n00:15:52.960 --> 00:15:54.266\nThey're all isolated from each other.\n\n313\n00:15:54.266 --> 00:15:56.265\nSo this is basically creating\nits own little bubble.\n\n314\n00:15:56.265 --> 00:15:58.245\nYou've got a cloud service for\nthat one virtual machine.\n\n315\n00:15:58.245 --> 00:16:02.166\nIt's in its own little world\nIt has its own public IP.\n\n316\n00:16:02.166 --> 00:16:04.681\nA lot of people make the mistake,\nthey think that,\n\n317\n00:16:04.681 --> 00:16:07.870\nthey think that their server\nhas its own public IP.\n\n318\n00:16:07.870 --> 00:16:09.440\nBy default in Azure,\n\n319\n00:16:09.440 --> 00:16:13.250\nyour server does not have a public IP,\nyour server has a private IP, but\n\n320\n00:16:13.250 --> 00:16:19.290\nit's put in a cloud service, and\nthe cloud service has a public IP.\n\n321\n00:16:19.290 --> 00:16:23.250\nAnd it's a one to one mapping, and so it\nlooks like your server has a public IP but\n\n322\n00:16:23.250 --> 00:16:24.270\nit really doesn't.\n\n323\n00:16:24.270 --> 00:16:27.090\nAnd you can stick more than one server in\nthat cloud service, and now you've got\n\n324\n00:16:27.090 --> 00:16:31.420\nmore than one server with private IPs\nall sharing one public IP, right?\n\n325\n00:16:31.420 --> 00:16:34.290\nSo that's one thing that we need to be\naware of, a little bit different behavior.\n\n326\n00:16:34.290 --> 00:16:35.710\nWhile I'm waiting on that\nother one to spin up,\n\n327\n00:16:35.710 --> 00:16:37.340\nlet me just pull up one\nof these other guys.\n\n328\n00:16:37.340 --> 00:16:39.060\nOh, actually, it showed up,\n\n329\n00:16:39.060 --> 00:16:44.260\nyep, under cloud services I do now\nsee itprotvfile03, it just appeared.\n\n330\n00:16:44.260 --> 00:16:47.870\nIt says that it's created, and\nnotice production still says provisioning.\n\n331\n00:16:47.870 --> 00:16:50.560\nIt knows that I'm provisioning\na virtual machine in here, so\n\n332\n00:16:50.560 --> 00:16:52.210\nit'll be able to become active.\n\n333\n00:16:52.210 --> 00:16:55.370\nAnd if I click on this one,\nlet's go take a look at its settings.\n\n334\n00:16:55.370 --> 00:17:00.610\nIt's showing that one or more instances\nstarting right now, and so it's coming up,\n\n335\n00:17:00.610 --> 00:17:03.720\nand notice all the different\nthings that we kinda see in here.\n\n336\n00:17:03.720 --> 00:17:06.360\nThere's a lot of good information\nabout the cloud service\n\n337\n00:17:06.360 --> 00:17:07.660\nthat we just need to be aware of.\n\n338\n00:17:07.660 --> 00:17:12.630\nBut you'll see in here,\nif I go under Monitor,\n\n339\n00:17:12.630 --> 00:17:15.740\nthat I can actually start to monitor\nthe health of this cloud service.\n\n340\n00:17:15.740 --> 00:17:19.974\nAnd it's showing me, like, CPU percentage,\nand it's showing me CPU percentage for\n\n341\n00:17:19.974 --> 00:17:22.296\nall the virtual machines\nthat are inside of it.\n\n342\n00:17:22.296 --> 00:17:26.129\nNormally when you do monitoring inside\nof Azure, you're just monitoring one VM.\n\n343\n00:17:26.129 --> 00:17:29.132\nBut if I put five VMs in a resource,\nI wanna say resource group,\n\n344\n00:17:29.132 --> 00:17:30.504\ncuz that's what we use now.\n\n345\n00:17:30.504 --> 00:17:35.245\n[LAUGH] But if I put five VMs in a cloud\nservice, I can monitor all of their CPU\n\n346\n00:17:35.245 --> 00:17:40.590\nutilization together, to kind of get\na better handle on how things are going.\n\n347\n00:17:40.590 --> 00:17:43.870\nSo you can look at all of that\nall right from one big place.\n\n348\n00:17:43.870 --> 00:17:44.950\nIt's kinda cool.\n\n349\n00:17:44.950 --> 00:17:47.930\n>> So Don, what might be some of\nthe things that we would need to know?\n\n350\n00:17:47.930 --> 00:17:52.310\nObviously, we see how they work,\nbut whatare some limitations or\n\n351\n00:17:52.310 --> 00:17:55.280\nboundaries that are around\nusing cloud services?\n\n352\n00:17:55.280 --> 00:17:57.440\n>> All right, so\nthere's definitely some limits, and\n\n353\n00:17:57.440 --> 00:18:00.040\nyou'll actually see some of them\nright here on my main screen.\n\n354\n00:18:00.040 --> 00:18:03.050\nWhen I go to the dashboard\nof this cloud service,\n\n355\n00:18:03.050 --> 00:18:05.500\nit's telling me that I'm\nprovisioning an instance.\n\n356\n00:18:05.500 --> 00:18:08.590\nAnd if I scroll down a little bit,\nright here,\n\n357\n00:18:08.590 --> 00:18:12.650\nI've got the usage overview and\nmy number of cores.\n\n358\n00:18:12.650 --> 00:18:18.040\nAnd notice how it says that I'm\ncurrently using one of 20 COREs.\n\n359\n00:18:18.040 --> 00:18:19.340\nI'm limited to 20 cores.\n\n360\n00:18:19.340 --> 00:18:21.690\nI can have 20 VM's in here.\n\n361\n00:18:21.690 --> 00:18:22.950\nAll right?\nNow in reality,\n\n362\n00:18:22.950 --> 00:18:24.050\nI can actually have up to 50.\n\n363\n00:18:24.050 --> 00:18:27.840\nBut there's a core quota limit\nthat Microsoft creates, right?\n\n364\n00:18:27.840 --> 00:18:29.770\nAnd I think I mentioned\nthat in another episode.\n\n365\n00:18:29.770 --> 00:18:31.910\nWhen you buy a new Azure account,\n\n366\n00:18:31.910 --> 00:18:36.110\nMicrosoft puts an artificial limit\non your account of 20 cores.\n\n367\n00:18:36.110 --> 00:18:38.990\nTo stop your account from going\ncrazy if somebody hacks in, or\n\n368\n00:18:38.990 --> 00:18:40.360\nif you misconfigure auto scale,\n\n369\n00:18:40.360 --> 00:18:42.710\nthey don't want you to run broke from\nrunning too many virtual machines.\n\n370\n00:18:42.710 --> 00:18:44.550\nSo, they put this limit of 20 in.\n\n371\n00:18:44.550 --> 00:18:49.780\nWell, if you request your account quota\nto be lifted, they'll lift it but\n\n372\n00:18:49.780 --> 00:18:53.530\nit doesn't apply to your cloud service.\n\n373\n00:18:53.530 --> 00:18:56.940\nSo we still have a limitation here,\nand if we need more VMs than that,\n\n374\n00:18:56.940 --> 00:18:59.840\nI'm going to need to implement more than\none cloud service to get that in place.\n\n375\n00:18:59.840 --> 00:19:01.410\nSo that's one limitation that we have.\n\n376\n00:19:02.490 --> 00:19:05.890\nAnother limitation,\nwhen I created that cloud service,\n\n377\n00:19:05.890 --> 00:19:08.680\nit asked me to pick a region or\naffinity group and\n\n378\n00:19:08.680 --> 00:19:12.480\nthe region is tying this\ncloud service to that region.\n\n379\n00:19:12.480 --> 00:19:18.020\nI cannot have one cloud service that's\npresent in more than one region.\n\n380\n00:19:18.020 --> 00:19:22.700\nSo if I want geo redundancy, if I want\na service to be present in more than one\n\n381\n00:19:22.700 --> 00:19:26.060\nregion, I've gotta deploy a separate\ncloud service in another region,\n\n382\n00:19:26.060 --> 00:19:29.000\nand manage the replication and\nother data there separately, right.\n\n383\n00:19:29.000 --> 00:19:31.050\nSo they're not gonna be\nkinda tied together.\n\n384\n00:19:31.050 --> 00:19:34.000\nSo those are a couple of\nlimitations we need to be aware of.\n\n385\n00:19:34.000 --> 00:19:35.110\nSome other things.\n\n386\n00:19:35.110 --> 00:19:36.680\nRemember that public IP I mentioned?\n\n387\n00:19:37.800 --> 00:19:41.080\nHere I am on the monitor,\nor the dashboard page,\n\n388\n00:19:41.080 --> 00:19:43.890\nfor itprotvfile03 that we just created.\n\n389\n00:19:43.890 --> 00:19:51.680\nIf I scroll down, right here, I can see\nthe Public Virtual IP Address, right?\n\n390\n00:19:51.680 --> 00:19:58.650\nThis is the public IP that was\nassigned to my my cloud service.\n\n391\n00:19:58.650 --> 00:20:01.660\nMy virtual machines inside it\nmight have private IPs, but\n\n392\n00:20:01.660 --> 00:20:05.590\nthis is the public IP that's\nbeing associated with it.\n\n393\n00:20:05.590 --> 00:20:07.940\nIf I shut down all my virtual machines and\n\n394\n00:20:07.940 --> 00:20:13.440\nthey deallocate,\nthen the cloud service goes offline.\n\n395\n00:20:13.440 --> 00:20:16.950\nAnd when the cloud service goes\noffline i'll lose that IP.\n\n396\n00:20:16.950 --> 00:20:20.520\nAnd when I power back on again,\nit can get a new IP address.\n\n397\n00:20:20.520 --> 00:20:25.540\nSo if there's ever a time where I turn\noff all my virtual machine instances,\n\n398\n00:20:25.540 --> 00:20:26.850\nmy IP can change.\n\n399\n00:20:26.850 --> 00:20:30.000\nNow as long as I've been\nmapping DNS to a C name,\n\n400\n00:20:30.000 --> 00:20:34.190\nright, a pointer to this thing's cloud\napp dot net address, then I'm fine.\n\n401\n00:20:34.190 --> 00:20:35.410\nThe IP can change all it wants.\n\n402\n00:20:35.410 --> 00:20:36.210\nRight?\nI'm using a C name.\n\n403\n00:20:36.210 --> 00:20:37.450\nIt'll react to that.\n\n404\n00:20:37.450 --> 00:20:43.120\nBut if I do an a record in DNS and point\nit right to this IP, I need to make sure\n\n405\n00:20:43.120 --> 00:20:47.180\nthat I never shut down all my VMs, because\nI ould potentially lose that address.\n\n406\n00:20:47.180 --> 00:20:50.860\nSo that's another limitation we have,\nis that address is not static.\n\n407\n00:20:50.860 --> 00:20:54.940\nAnd it's not static because Microsoft\nknows that if there's a failure that\n\n408\n00:20:54.940 --> 00:20:58.600\nhappens, they might need to move this\ncloud service off to another stamp, or\n\n409\n00:20:58.600 --> 00:21:01.510\neven another availability\nzone inside of a region.\n\n410\n00:21:01.510 --> 00:21:04.800\nAnd so if that happens,\nthe IP address is gonna change anyway.\n\n411\n00:21:04.800 --> 00:21:07.600\nSo they already know that's gonna\nhappen under certain situations, and\n\n412\n00:21:07.600 --> 00:21:10.770\nthat's why they don't want\nus setting static ones.\n\n413\n00:21:10.770 --> 00:21:13.110\n>> Well Don,\njust because I'm this kinda way, and\n\n414\n00:21:13.110 --> 00:21:17.840\nI know that once in a while you're just\ngonna have to do it the hard way, right?\n\n415\n00:21:17.840 --> 00:21:20.060\nThe hard way, how can we?\n\n416\n00:21:20.060 --> 00:21:24.550\nIt's like a day without sunshine, it's day\nwithout PowerShell in a Microsoft world.\n\n417\n00:21:24.550 --> 00:21:28.370\nHow can we do what we're doing with\ncloud services using the Power Shell?\n\n418\n00:21:28.370 --> 00:21:30.650\n>> All right, so in the Power Shell\nit's actually pretty easy.\n\n419\n00:21:30.650 --> 00:21:33.185\nAnd I think we might have seen\nit in an earlier episode,\n\n420\n00:21:33.185 --> 00:21:36.030\ncuz there's some things where you\nhave to create a cloud service first.\n\n421\n00:21:36.030 --> 00:21:39.730\nIf I drop to my Power Shell though,\nwe got a couple of neat commands.\n\n422\n00:21:39.730 --> 00:21:40.620\nThe first thing is,\n\n423\n00:21:40.620 --> 00:21:43.640\nthe hardest part of creating\na cloud service is creating a name.\n\n424\n00:21:43.640 --> 00:21:46.140\nBecause a lot of the names\nare already in use, right.\n\n425\n00:21:46.140 --> 00:21:50.810\nSo we have a neat command we can run,\nwhich is Test-AzureName.\n\n426\n00:21:50.810 --> 00:21:53.720\nAnd it lets you see if\na name is already in use.\n\n427\n00:21:53.720 --> 00:21:57.490\nSo I could Test-AzureName- Service\nmicrosoft.\n\n428\n00:21:57.490 --> 00:22:00.020\nOkay, is somebody already using microsoft?\n\n429\n00:22:00.020 --> 00:22:04.450\nAnd if I get a True back, That lets\nme know the name's already in use.\n\n430\n00:22:04.450 --> 00:22:06.540\nIf I get a false back, then I can use it.\n\n431\n00:22:06.540 --> 00:22:13.920\nSo for example, I did itprotvfile03,\nand so I can see true, it's in use.\n\n432\n00:22:13.920 --> 00:22:17.640\nIf I do itprotvfile04, I get a false,\nthat one's available, so\n\n433\n00:22:17.640 --> 00:22:20.300\nI just found a name that's available.\n\n434\n00:22:20.300 --> 00:22:24.000\nThen I can say,\nwell if one existed, right.\n\n435\n00:22:24.000 --> 00:22:27.410\nLike itprotvfile03,\nI can use get-azure name and\n\n436\n00:22:27.410 --> 00:22:30.790\nget some data about it and try to find\nout is it mine or is it somebody else's?\n\n437\n00:22:30.790 --> 00:22:32.380\nBut in my case, I wanna whip up a new one.\n\n438\n00:22:32.380 --> 00:22:36.660\nSo, I'm gonna say New-AzureService.\n\n439\n00:22:36.660 --> 00:22:38.550\nAnd then I need to give it a location,\n\n440\n00:22:38.550 --> 00:22:41.410\nbecause these things are tied to a region,\nright?\n\n441\n00:22:41.410 --> 00:22:45.250\nSo, I'll do U.S. East, or\nis it East U.S., I always screw that up.\n\n442\n00:22:45.250 --> 00:22:46.590\n>> I think it's East U.S., I wanna say.\n\n443\n00:22:46.590 --> 00:22:47.110\n>> Okay then, all right.\n\n444\n00:22:47.110 --> 00:22:49.050\nIt's not a big deal then either way.\n\n445\n00:22:49.050 --> 00:22:51.450\nAll right, East U.S., and\nthen I need to give it a game and so\n\n446\n00:22:51.450 --> 00:22:53.800\nI'll do that -serviceName.\n\n447\n00:22:53.800 --> 00:22:56.550\nAnd I'll call this one itprotvfile04,\nright.\n\n448\n00:22:58.070 --> 00:23:00.210\nSo That one's got a name.\n\n449\n00:23:00.210 --> 00:23:02.080\nThere we go, itprotvfile04.\n\n450\n00:23:02.080 --> 00:23:05.580\nAnd I can run that, and\nit's going to reach out to Azure, and\n\n451\n00:23:05.580 --> 00:23:07.260\nit's gonna create that cloud\nservice on my account.\n\n452\n00:23:08.280 --> 00:23:12.310\nOnce that's done, now whenever I\nspin up a new virtual machine, and\n\n453\n00:23:12.310 --> 00:23:16.530\nI know we saw that in a show, you can\nspecify the service name at that time.\n\n454\n00:23:16.530 --> 00:23:19.290\nAnd if you leave it off,\nit just uses the same name as the VM, and\n\n455\n00:23:19.290 --> 00:23:20.790\nit makes a new cloud service.\n\n456\n00:23:20.790 --> 00:23:23.150\nBut I could specify itprotvfile04 now, and\n\n457\n00:23:23.150 --> 00:23:25.410\nit would create that\nvirtual machine in there.\n\n458\n00:23:25.410 --> 00:23:26.850\nAnd you can do that through the UI, too.\n\n459\n00:23:26.850 --> 00:23:31.610\nIf I drop back here, and I go to\ncreate some new virtual machines, and\n\n460\n00:23:31.610 --> 00:23:33.010\nwhen I whip up a new one.\n\n461\n00:23:34.620 --> 00:23:37.490\nSo I'll just go in here to do Compute,\nVirtual Machine.\n\n462\n00:23:37.490 --> 00:23:41.580\nIf I do Quick Create,\nit doesn't let me pick the Cloud service.\n\n463\n00:23:41.580 --> 00:23:42.170\nRight?\n\n464\n00:23:42.170 --> 00:23:43.602\nBut if I do From Gallery,\n\n465\n00:23:43.602 --> 00:23:47.367\nFrom Gallery will give me a lot\nmore options than the other route.\n\n466\n00:23:47.367 --> 00:23:50.912\nSo if I choose to do Windows Server and\nmove forward,\n\n467\n00:23:50.912 --> 00:23:54.791\nnow I can pick my release date,\nmy virtual machine name.\n\n468\n00:23:54.791 --> 00:23:58.456\nSo maybe this one's gonna be\nIT Pro TV File 04 I can choose basic or\n\n469\n00:23:58.456 --> 00:24:00.497\nstandard tier, user name, right.\n\n470\n00:24:00.497 --> 00:24:04.360\nSo far I'm seeing all of the same stuff\nthat I saw when I did Quick Create.\n\n471\n00:24:04.360 --> 00:24:05.600\nNothing too different.\n\n472\n00:24:06.780 --> 00:24:10.647\nBut in a moment,\nwe're gonna see the difference here.\n\n473\n00:24:10.647 --> 00:24:13.080\nCloud service.\n\n474\n00:24:13.080 --> 00:24:17.970\nAnd instead of going with the cloud\nservice where it creates a new one\n\n475\n00:24:17.970 --> 00:24:18.940\nwith the same name.\n\n476\n00:24:18.940 --> 00:24:19.650\nSee how it's doing that?\n\n477\n00:24:19.650 --> 00:24:22.580\nWants to create a cloud\nservice called itprotv-file04.\n\n478\n00:24:22.580 --> 00:24:23.770\nI can drop that down.\n\n479\n00:24:23.770 --> 00:24:25.040\nWhy am I getting a checkmark on that.\n\n480\n00:24:25.040 --> 00:24:26.910\nIt should show it's already in use.\n\n481\n00:24:26.910 --> 00:24:28.050\nOh, it's doing that with a hyphen.\n\n482\n00:24:28.050 --> 00:24:28.770\nI didn't use a hyphen.\n\n483\n00:24:28.770 --> 00:24:33.020\nI didn't think you could use a hyphen, but\napparently it's okay for them to do it.\n\n484\n00:24:33.020 --> 00:24:35.340\nBut I can also come in here and\nchoose an existing one.\n\n485\n00:24:35.340 --> 00:24:37.180\nSo I can choose itprotvfile03.\n\n486\n00:24:38.240 --> 00:24:41.610\nI deployed itprotvfile03 myself, or\n\n487\n00:24:41.610 --> 00:24:44.780\nI did itprotvdemo earlier, right,\nso we could choose that one too.\n\n488\n00:24:44.780 --> 00:24:46.410\nAnd now we're gonna deploy into it.\n\n489\n00:24:46.410 --> 00:24:50.530\nAnd when we do that, it's gonna deploy\ninto that same region here, East US.\n\n490\n00:24:50.530 --> 00:24:54.670\nAnd we've got our storage availability\nsets and all that other good stuff.\n\n491\n00:24:54.670 --> 00:24:58.020\nNow, right down here is where things\nget a little important, right.\n\n492\n00:24:58.020 --> 00:25:01.440\nRemember that I said\nthat a cloud service has\n\n493\n00:25:01.440 --> 00:25:05.740\none public IP that it's basically sharing\nacross all the virtual machines inside it.\n\n494\n00:25:05.740 --> 00:25:10.640\nWell, this machine is authorizing\nremote desktop protocol on port 3389.\n\n495\n00:25:10.640 --> 00:25:15.670\nIf I have another file server in here,\nit's doing remote desktop on port 3389.\n\n496\n00:25:15.670 --> 00:25:18.770\nIf I wanna remote desktop in\nfrom the outside world and\n\n497\n00:25:18.770 --> 00:25:21.830\nI hit that public IP,\nhow does it know who to send it to?\n\n498\n00:25:21.830 --> 00:25:24.130\nAnd the answer is it doesn't, right?\n\n499\n00:25:24.130 --> 00:25:27.130\nSo on the public port,\nsee how it's set to auto?\n\n500\n00:25:27.130 --> 00:25:27.810\nIt's gonna look.\n\n501\n00:25:27.810 --> 00:25:33.630\nAnd if somebody else is already mapped at\n3389, it'll pick a new port at random.\n\n502\n00:25:33.630 --> 00:25:36.910\nBut, I might want to assign that myself,\nso that I know what it is.\n\n503\n00:25:36.910 --> 00:25:38.780\nBut if I have multiple web servers,\nfor example,\n\n504\n00:25:38.780 --> 00:25:43.700\nI might want to have one on Port 80,\none on Port 81, one on Port 82.\n\n505\n00:25:43.700 --> 00:25:46.520\nOtherwise, if I want them\nall to be on Port 80,\n\n506\n00:25:46.520 --> 00:25:48.750\nthen I'll need to configure\na load balance set.\n\n507\n00:25:48.750 --> 00:25:51.870\nAnd a load balance set is where we say\nall right, we have traffic coming in on\n\n508\n00:25:51.870 --> 00:25:55.770\nport 80 and we're gonna spread\nit across these three hosts or\n\n509\n00:25:55.770 --> 00:25:57.400\nfive hosts, or however many, right.\n\n510\n00:25:57.400 --> 00:26:00.810\nBut that's not available by default,\nby default we just come in here and\n\n511\n00:26:00.810 --> 00:26:03.210\nwe can override these and set it.\n\n512\n00:26:03.210 --> 00:26:08.910\nSo maybe this one will be 3390\non the public port Versus 3389.\n\n513\n00:26:08.910 --> 00:26:13.790\nAnd so, if I wanna connect a file\nof three, I can RDP to 3389.\n\n514\n00:26:13.790 --> 00:26:17.080\nBut if I wanna connect to file 04,\n\n515\n00:26:17.080 --> 00:26:21.810\nI can RDP into 3390, and it will translate\nit to 3389 before it hits the server.\n\n516\n00:26:21.810 --> 00:26:27.610\nSo I don't have to change the server, the\nVM It's the cloud services doing that for\n\n517\n00:26:27.610 --> 00:26:30.500\nme, but\nI do that to avoid having a duplicate.\n\n518\n00:26:31.980 --> 00:26:35.430\nThere's other options in here for\ndoing things like auto-scale and stuff.\n\n519\n00:26:35.430 --> 00:26:39.340\nWe'll see those in another episode, but\nI'll just go ahead and complete this.\n\n520\n00:26:39.340 --> 00:26:43.010\nAnd that's gonna deploy that virtual\nmachine into that cloud service.\n\n521\n00:26:43.010 --> 00:26:46.990\nAnd I can have, if they're single-core,\nI can have up to 20 of them in there.\n\n522\n00:26:46.990 --> 00:26:49.020\nIf they're dual-core,\nI am have ten of them in there.\n\n523\n00:26:49.020 --> 00:26:52.430\nAnd if I need more,\nI can either create more cloud services or\n\n524\n00:26:52.430 --> 00:26:55.720\nI can reach out to Microsoft support and\nsee if they can bend that limit for me and\n\n525\n00:26:55.720 --> 00:26:57.110\nthen we can get some more in there.\n\n526\n00:26:57.110 --> 00:27:01.940\nSo that's basically how these cloud\nservices work and how they function.\n\n527\n00:27:01.940 --> 00:27:05.540\nThey're really important because\nthey're creating that public IP.\n\n528\n00:27:05.540 --> 00:27:09.450\nNow, I just wanna add one more thing\non this before we kinda wind down.\n\n529\n00:27:09.450 --> 00:27:12.790\nThat public IP, that's what\nyou're supposed to be using for\n\n530\n00:27:12.790 --> 00:27:15.400\nyour customers to access these resources.\n\n531\n00:27:15.400 --> 00:27:17.570\nBecause it gets a dns name.\n\n532\n00:27:17.570 --> 00:27:21.830\nWhen I go into the dashboard, and\nlet's see if I can get over here.\n\n533\n00:27:21.830 --> 00:27:24.910\nWhen I go into the dashboard and I look at\nthe settings there's that public IP and\n\n534\n00:27:24.910 --> 00:27:26.570\nthere's that DNS name.\n\n535\n00:27:26.570 --> 00:27:29.180\nI can map a See name to\nthat no big deal and\n\n536\n00:27:29.180 --> 00:27:31.370\nnow I've got something that\npeople can access reliably.\n\n537\n00:27:32.570 --> 00:27:36.440\nBut, I can actually go\ninto my virtual machines.\n\n538\n00:27:36.440 --> 00:27:41.420\nAnd in a virtual machine, like if I\njust take itprotv demo 1 here, this guy.\n\n539\n00:27:41.420 --> 00:27:44.300\nYou can create what's\ncalled a per instance IP,\n\n540\n00:27:44.300 --> 00:27:48.480\nan IP address that's designed\njust to this instance.\n\n541\n00:27:48.480 --> 00:27:51.570\nAnd then, that means that this\nguy will have a public IP.\n\n542\n00:27:51.570 --> 00:27:53.840\nAnd when I look at this guy,\nsee over here,\n\n543\n00:27:53.840 --> 00:27:58.680\nI've got this like, public virtual IP or\nVIP address, and it's just empty?\n\n544\n00:27:58.680 --> 00:28:00.440\nThere's no instance IP on it.\n\n545\n00:28:00.440 --> 00:28:03.450\nBy default you don't have an instance\nIP on your virtual machines.\n\n546\n00:28:03.450 --> 00:28:06.690\nThey rely on that resource group for\ntheir public IP.\n\n547\n00:28:06.690 --> 00:28:11.300\nIf you assign one, what happens is,\nit's assigned to that one, but\n\n548\n00:28:11.300 --> 00:28:13.240\nit doesn't get a DNS name.\n\n549\n00:28:13.240 --> 00:28:15.070\nAnd so\nthere's nothing you can map a c name to.\n\n550\n00:28:15.070 --> 00:28:18.720\nYou could map an a record to it, but\nif this server were ever to fail over or\n\n551\n00:28:18.720 --> 00:28:21.520\nhave it's IP changed,\nyour record would break.\n\n552\n00:28:21.520 --> 00:28:25.020\nAnd so Microsoft does that on purpose,\ncuz they don't want you to use that.\n\n553\n00:28:25.020 --> 00:28:26.940\nYou gotta have a specific reason.\n\n554\n00:28:26.940 --> 00:28:30.280\nI might have a five node cluster and\nI've got a specific reason that I need to\n\n555\n00:28:30.280 --> 00:28:34.820\nconnect to node number three, and so\nI go ahead and assign it a public IP.\n\n556\n00:28:34.820 --> 00:28:36.340\nOtherwise, they have private IPs and\n\n557\n00:28:36.340 --> 00:28:40.820\nI can connect via those, and that's how\nI can manage those individual systems.\n\n558\n00:28:40.820 --> 00:28:45.200\nSo just be aware that you can\nassign IPs to individual machines.\n\n559\n00:28:45.200 --> 00:28:47.650\nBut you're really supposed to use\nthe ones on the cloud service,\n\n560\n00:28:47.650 --> 00:28:50.190\ncuz those are the ones\nthat get the DNS name, and\n\n561\n00:28:50.190 --> 00:28:54.840\nthat means we can use them in a redundant\nmanner and not worry about failure.\n\n562\n00:28:54.840 --> 00:28:55.610\n>> Well awesome stuff, Don.\n\n563\n00:28:55.610 --> 00:28:58.200\nI'm understanding cloud\nservices as an important thing.\n\n564\n00:28:58.200 --> 00:29:01.800\nEven though it can be a little bit\nconfusing with the terminology.\n\n565\n00:29:01.800 --> 00:29:04.690\nI know you said you had one last thing\nbefore, but I'll give you another chance,\n\n566\n00:29:04.690 --> 00:29:07.340\ndo you have any other parting words for\nour viewers?\n\n567\n00:29:07.340 --> 00:29:09.160\n>> You know, while I was going\nthrough that configuration,\n\n568\n00:29:09.160 --> 00:29:11.070\nyou might of noticed some of\nthose other tabs in there,\n\n569\n00:29:11.070 --> 00:29:13.780\nthings like\n>> Availability sets, and\n\n570\n00:29:13.780 --> 00:29:16.040\nlow balancing sets, and those things.\n\n571\n00:29:16.040 --> 00:29:19.970\nThose are all dependent on\nhaving a cloud service created.\n\n572\n00:29:19.970 --> 00:29:21.530\nAnd we're gonna see those later on.\n\n573\n00:29:21.530 --> 00:29:23.810\nWe'll do an episode specifically\non load balancing, and\n\n574\n00:29:23.810 --> 00:29:25.550\nan episode specifically\non availability sets.\n\n575\n00:29:25.550 --> 00:29:28.350\nSo, we're gonna see those later on,\nand we'll build on this.\n\n576\n00:29:28.350 --> 00:29:31.360\nBut I wanted to make sure we tackled\nthat basic knowledge we need for\n\n577\n00:29:31.360 --> 00:29:34.340\na cloud service so we understand that so\nwe can add onto it later and\n\n578\n00:29:34.340 --> 00:29:36.160\nit will all kind of make sense and\ngo together.\n\n579\n00:29:36.160 --> 00:29:37.210\n>> Excellent Don, well thank you so\n\n580\n00:29:37.210 --> 00:29:40.610\nmuch for explaining this little\nconfusing topping to us.\n\n581\n00:29:40.610 --> 00:29:42.620\nCuz we're gonna need it down\nthe line obviously we got some\n\n582\n00:29:42.620 --> 00:29:43.840\nshows coming up for that.\n\n583\n00:29:43.840 --> 00:29:46.880\nThank you guys for watching, we're gonna\ngo ahead and sign off for ITProTV.\n\n584\n00:29:46.880 --> 00:29:48.920\nI've been your host Daniel Lowrie.\n\n585\n00:29:48.920 --> 00:29:50.560\n>> And I'm Don Pezet\n>> And we'll see you next time.\n\n586\n00:29:50.560 --> 00:29:56.990\n[MUSIC]\n\n",
          "vimeoId": "148667892"
        },
        {
          "description": "In this episode, Don and Daniel describe Microsoft Azure's *Resource Groups*. They start off by explaining how Resource Groups are replacing Cloud Services as a way to group Azure resources, hence the name. Then they take a look at what Resource Groups can do that Cloud Services cannot. Also talked about are: monitoring, load balancing, and Core Quotas.",
          "length": "1946",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-3-2-resource_groups-120415-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-3-2-resource_groups-120415-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-3-2-resource_groups-120415-1-sm.jpg",
          "title": "Resource Groups",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:12.347 --> 00:00:14.549\nAll right, greetings, everyone, and\n\n3\n00:00:14.549 --> 00:00:17.085\nwelcome to another great\nepisode of IT Pro TV.\n\n4\n00:00:17.085 --> 00:00:18.726\nI'm your host, Daniel Lowrie.\n\n5\n00:00:18.726 --> 00:00:20.123\nAnd in today's episode,\n\n6\n00:00:20.123 --> 00:00:24.340\nwe're gonna continue taking a look\nat Microsoft Azure Virtual Machine.\n\n7\n00:00:24.340 --> 00:00:28.100\nJoining me yet again today is none other\nthan my good friend and colleague Mr.\n\n8\n00:00:28.100 --> 00:00:29.130\nDon Pezet.\n\n9\n00:00:29.130 --> 00:00:31.160\nDon, welcome to the show,\nhow are you doing?\n\n10\n00:00:31.160 --> 00:00:34.250\n>> It is going great, and\nI'm excited about today's show\n\n11\n00:00:34.250 --> 00:00:37.370\nnot because I'm super excited\nabout the technology, which I am.\n\n12\n00:00:37.370 --> 00:00:40.950\nBut more importantly, because today we're\ngoing to be discussing resource groups.\n\n13\n00:00:40.950 --> 00:00:43.660\nAnd in our last episode where we\nwere talking about cloud services,\n\n14\n00:00:43.660 --> 00:00:45.980\nI kept saying resource group over,\nand over, and\n\n15\n00:00:45.980 --> 00:00:47.940\nover again because that's\nwhat we're supposed to use.\n\n16\n00:00:47.940 --> 00:00:50.000\nSo I'm hoping this time,\nhey I'll say resource group.\n\n17\n00:00:50.000 --> 00:00:51.480\nI'm already in that mode.\n\n18\n00:00:51.480 --> 00:00:52.204\nWatch I'll start saying cloud services.\n\n19\n00:00:52.204 --> 00:00:52.784\n>> [CROSSTALK] cloud services.\n\n20\n00:00:52.784 --> 00:00:56.810\n>> [LAUGH] So, anyhow,\nwe got a great one lined up.\n\n21\n00:00:56.810 --> 00:00:58.280\nWe're gonna take a look\nat resource groups.\n\n22\n00:00:58.280 --> 00:01:02.000\nWhat they are, why we use them,\nhow they replaced cloud services,\n\n23\n00:01:02.000 --> 00:01:03.270\ncuz that's kind of important.\n\n24\n00:01:03.270 --> 00:01:07.030\nAnd how they really\nare the way to use Azure now,\n\n25\n00:01:07.030 --> 00:01:09.500\nextremely important to everything\nwe do inside of Azure.\n\n26\n00:01:09.500 --> 00:01:12.660\n>> Well Don I guess the first question\nthat pops into my head when you say that\n\n27\n00:01:12.660 --> 00:01:15.590\nresource groups have\nreplaced cloud services is,\n\n28\n00:01:15.590 --> 00:01:17.720\nis it basically just the same\nthing with a new name?\n\n29\n00:01:17.720 --> 00:01:20.228\nIs it just the same old package\nwith a different label on it?\n\n30\n00:01:20.228 --> 00:01:21.114\n>> Sort of.\n\n31\n00:01:21.114 --> 00:01:22.250\n>> [LAUGH] Well, awesome.\n\n32\n00:01:22.250 --> 00:01:23.211\n>> There you go,\nshortest episode ever, we're done.\n\n33\n00:01:23.211 --> 00:01:26.570\n>> Thanks for the show everybody,\nit was good having you.\n\n34\n00:01:26.570 --> 00:01:31.640\n>> So resource groups are very much\nlike the classic cloud service,\n\n35\n00:01:31.640 --> 00:01:33.840\nexcept resource groups can do a lot more.\n\n36\n00:01:33.840 --> 00:01:36.680\nSo think of them as like,\ncloud services on steroids.\n\n37\n00:01:36.680 --> 00:01:38.030\nWhat was a cloud service?\n\n38\n00:01:38.030 --> 00:01:41.320\nWell it let me take multiple virtual\nmachines and group them together and\n\n39\n00:01:41.320 --> 00:01:42.750\ngive them a shared IP.\n\n40\n00:01:42.750 --> 00:01:45.590\nWell, what can I do with a resource group?\n\n41\n00:01:45.590 --> 00:01:50.630\nI can take multiple virtual machines,\ngroup them together, and share an IP.\n\n42\n00:01:50.630 --> 00:01:51.700\nSo, sounds like the same.\n\n43\n00:01:51.700 --> 00:01:55.680\nSo, feature wise or functionality wise,\nit's a direct replacement.\n\n44\n00:01:55.680 --> 00:01:57.640\nSo you do not need cloud services anymore,\n\n45\n00:01:57.640 --> 00:02:00.350\nyou can jump right to resource\ngroups today, and be just fine.\n\n46\n00:02:01.410 --> 00:02:05.180\nBut beyond that, resource groups\ncan do some really amazing things.\n\n47\n00:02:05.180 --> 00:02:06.250\nI mentioned in cloud services,\n\n48\n00:02:06.250 --> 00:02:10.200\nI said, have you ever had a time when you\ngo to delete a VM and it's part of a group\n\n49\n00:02:10.200 --> 00:02:13.920\nof virtual machines, and\nmaybe leave one or two behind by accident?\n\n50\n00:02:13.920 --> 00:02:16.740\nAnd so now you're paying at least\na storage bill for it, or you might be\n\n51\n00:02:16.740 --> 00:02:19.190\npaying run time for it if it's running,\nand you forgot to shut it down.\n\n52\n00:02:19.190 --> 00:02:21.170\nIt's easy to lose track of that.\n\n53\n00:02:21.170 --> 00:02:23.896\nPutting them all into a cloud service,\nwhen you delete out that cloud\n\n54\n00:02:23.896 --> 00:02:27.500\nservice you can delete all the VMs and\ntheir associated data disks.\n\n55\n00:02:27.500 --> 00:02:31.040\nBut what about all the other\nlittle things that we acquire?\n\n56\n00:02:31.040 --> 00:02:34.130\nThings like virtual networks,\nnetwork interfaces,\n\n57\n00:02:34.130 --> 00:02:38.330\nadditional virtual IPs,\nwhat about all that stuff?\n\n58\n00:02:38.330 --> 00:02:41.925\nWell when you create a cloud service,\nall those other things are stored outside\n\n59\n00:02:41.925 --> 00:02:45.466\nthe cloud service, and they still get\nleft behind, and you still have to go and\n\n60\n00:02:45.466 --> 00:02:47.468\nremember to delete them, which I never do.\n\n61\n00:02:47.468 --> 00:02:50.518\nAnd so my accounts are littered with\nall that extra junk in there that will\n\n62\n00:02:50.518 --> 00:02:52.380\nprobably stay there forever.\n\n63\n00:02:52.380 --> 00:02:55.348\nAt the end of the day, it probably costs\nme an extra $0.12 a month or something,\n\n64\n00:02:55.348 --> 00:02:57.640\nit's probably not a big deal,\nbut it is still there.\n\n65\n00:02:57.640 --> 00:03:01.960\nWell, with a resource group,\nwe can gather those things together too.\n\n66\n00:03:01.960 --> 00:03:05.010\nA resource group can contain\nvirtual networks and subnets.\n\n67\n00:03:05.010 --> 00:03:08.157\nIt can contain network interfaces,\nvirtual IPs.\n\n68\n00:03:08.157 --> 00:03:09.794\nIt can contain DNS names.\n\n69\n00:03:09.794 --> 00:03:14.480\nIt can contain a lot of stuff in addition\nto just the virtual machine itself.\n\n70\n00:03:14.480 --> 00:03:16.721\nAnd the cool part is,\nwhen we delete that resource group,\n\n71\n00:03:16.721 --> 00:03:18.796\nit deletes all those\nindividual components with it.\n\n72\n00:03:18.796 --> 00:03:22.423\nAnd no longer is our account left with\na bunch of clutter and detritus or\n\n73\n00:03:22.423 --> 00:03:24.206\ndetritus or however you say that,\n\n74\n00:03:24.206 --> 00:03:28.460\nfrom all the previous years of running\nvirtual machines like my account here.\n\n75\n00:03:28.460 --> 00:03:31.880\nSo, at some point you just call Microsoft\nand say, can you just delete everything,\n\n76\n00:03:31.880 --> 00:03:35.170\nwipe the whole thing out I'll figure\nit out, we'll do some downtime.\n\n77\n00:03:35.170 --> 00:03:37.180\nBut with resource groups we don't\nhave that problem, so really,\n\n78\n00:03:37.180 --> 00:03:38.700\nreally cool stuff.\n\n79\n00:03:38.700 --> 00:03:43.150\nAll right, so, just to kinda give you\nguys an example of how these work,\n\n80\n00:03:43.150 --> 00:03:45.030\nlet's start with the new Azure portal.\n\n81\n00:03:45.030 --> 00:03:48.550\nSo I'm logged into the new Azure portal,\nnot the legacy portal,\n\n82\n00:03:48.550 --> 00:03:53.830\nbecause legacy portals do not show\nresource groups at all, we don't see them.\n\n83\n00:03:53.830 --> 00:03:56.590\nThey show cloud services,\nnot resource groups.\n\n84\n00:03:56.590 --> 00:03:58.150\nSo when you start working\nwith the resource\n\n85\n00:03:58.150 --> 00:03:59.440\ngroups you're not going to see that.\n\n86\n00:03:59.440 --> 00:04:01.450\nNow, I need to throw out\nanother term here real quick.\n\n87\n00:04:01.450 --> 00:04:06.360\nI don't wanna throw us under too much\njargon today but you're going to hear or\n\n88\n00:04:06.360 --> 00:04:10.270\nsee mentioned in the Azure portal about\nsomething called the resource manager.\n\n89\n00:04:10.270 --> 00:04:10.923\nAll right,\n\n90\n00:04:10.923 --> 00:04:15.307\nthe resource manager is what's actually\ncontrolling these resource groups.\n\n91\n00:04:15.307 --> 00:04:19.183\nAnd so when we deploy a virtual machine,\nit's gonan ask us, do you want to create\n\n92\n00:04:19.183 --> 00:04:22.842\na virtual machine using the classic\nmethod or the resource manager method?\n\n93\n00:04:22.842 --> 00:04:25.760\nAnd the classic method,\nthat's saying let's use a cloud service.\n\n94\n00:04:25.760 --> 00:04:29.820\nAnd the resource manager method,\nthat's saying let's use a resource group.\n\n95\n00:04:29.820 --> 00:04:32.620\nSo that's a big difference when\nwe start to spit out VM's.\n\n96\n00:04:32.620 --> 00:04:33.850\nBut when you create them,\n\n97\n00:04:33.850 --> 00:04:38.650\nyou'll see I've got a resource group\nright here called itprotv-web-demo.\n\n98\n00:04:38.650 --> 00:04:41.929\nAnd that web demo,\nthat's a resource group, and inside of it,\n\n99\n00:04:41.929 --> 00:04:45.842\nI've got two virtual machines,\nitprotv-web-demo1 and web-demo2.\n\n100\n00:04:45.842 --> 00:04:48.560\nThose two virtual machines\nare in this one resource group.\n\n101\n00:04:48.560 --> 00:04:51.850\nI'm using it like a cloud service, right?\n\n102\n00:04:51.850 --> 00:04:56.420\nBut if I go into that resource group,\nI'm just gonna click on it here.\n\n103\n00:04:56.420 --> 00:04:59.190\nI've got ITProTV demo,\nthat's the name of it.\n\n104\n00:04:59.190 --> 00:05:00.140\nAnd down here,\n\n105\n00:05:00.140 --> 00:05:04.910\nI can see resources that are in it,\nand look what I've got in there.\n\n106\n00:05:04.910 --> 00:05:06.110\nI mean, look at that list.\n\n107\n00:05:06.110 --> 00:05:09.520\nI've got some virtual machines,\nsure, cuz why not?\n\n108\n00:05:09.520 --> 00:05:12.480\nBut then after that,\nI've got some other things.\n\n109\n00:05:12.480 --> 00:05:14.860\nI've got a network interface,\ntwo of those.\n\n110\n00:05:14.860 --> 00:05:19.870\nI've got a network security group, a\nshared endpoint security group, and we'll\n\n111\n00:05:19.870 --> 00:05:23.060\nlearn about those in another episode,\nbut just to kind of mention them here.\n\n112\n00:05:23.060 --> 00:05:25.450\nThese replace the old endpoint security.\n\n113\n00:05:25.450 --> 00:05:29.780\nI used to have to configure endpoint\nACLs on each individual VM.\n\n114\n00:05:29.780 --> 00:05:33.970\nNow I can just do one big endpoint ACL for\nthe entire resource group.\n\n115\n00:05:33.970 --> 00:05:35.084\nAnd I could have 1 VM or\n\n116\n00:05:35.084 --> 00:05:37.830\n100 VMs in there and\nthey would all get the same protection.\n\n117\n00:05:39.090 --> 00:05:42.194\nHere you can see where I've\ngot IP addresses, I've got a,\n\n118\n00:05:42.194 --> 00:05:46.200\nwell if I stop messing with my mouse,\nthe pop-up would happen there.\n\n119\n00:05:46.200 --> 00:05:49.120\nHere's the public IP address that's\nassigned to the resource group.\n\n120\n00:05:49.120 --> 00:05:53.100\nBut then I've got individual IP addresses\nhere that I've assigned to virtual\n\n121\n00:05:53.100 --> 00:05:57.120\nmachines inside of it, if I want to\nmanage one of those nodes specifically.\n\n122\n00:05:57.120 --> 00:06:00.940\nAnd beneath that, I've got a virtual\nnetwork and the virtual network has\n\n123\n00:06:00.940 --> 00:06:04.840\nvarious subnets associated with it, and\nthey're all a part of this resource group.\n\n124\n00:06:05.990 --> 00:06:08.360\nNow, when I go to monitor\nthis resource group,\n\n125\n00:06:08.360 --> 00:06:11.830\nI'm monitoring not just my servers but\neach of these other elements inside of it.\n\n126\n00:06:11.830 --> 00:06:15.130\nAnd if I delete this resource group,\nall of these things go with it.\n\n127\n00:06:15.130 --> 00:06:19.463\nAnd if there's ever a fail over where\nMicrosoft has to move me to another stamp\n\n128\n00:06:19.463 --> 00:06:21.072\nor another zone in a region.\n\n129\n00:06:21.072 --> 00:06:25.565\nAll of this stuff is going to\ngo together all along with it,\n\n130\n00:06:25.565 --> 00:06:31.360\nall mapped to a DNS alias that I can\npoint to and provide connectivity with.\n\n131\n00:06:31.360 --> 00:06:36.930\nSo that's part of what resource groups do,\nthey are really powerful, and pretty cool.\n\n132\n00:06:37.960 --> 00:06:40.680\nThe other thing is,\nthere were a lot of limitations that we\n\n133\n00:06:40.680 --> 00:06:44.600\ntalked about with cloud services and\nsome of those limitations are gone.\n\n134\n00:06:44.600 --> 00:06:49.310\nFor example, when I create a cloud\nservice, it's tied to one region, right?\n\n135\n00:06:49.310 --> 00:06:52.920\nSo like here, you will see my\nresource group is tied to East US.\n\n136\n00:06:52.920 --> 00:06:56.650\nAnd that means that I can only put stuff\nin it that's also in East US, right,\n\n137\n00:06:56.650 --> 00:06:58.560\nif I whip up other VMs?\n\n138\n00:06:58.560 --> 00:07:03.640\nWell that was true with a cloud service,\nnot true with a resource group.\n\n139\n00:07:03.640 --> 00:07:05.690\nI can actually have VMs\nin a different region and\n\n140\n00:07:05.690 --> 00:07:08.200\nput them in this resource group right?\n\n141\n00:07:08.200 --> 00:07:09.890\nNow why would I do that?\n\n142\n00:07:09.890 --> 00:07:11.570\nTo group them together for\nmanagement purposes.\n\n143\n00:07:11.570 --> 00:07:16.421\nAnd it's especially handy when you're\ndoing things like, maybe you're\n\n144\n00:07:16.421 --> 00:07:21.590\nload balancing on a SQL cluster that's\ndoing an always on SQL cluster, right?\n\n145\n00:07:21.590 --> 00:07:25.630\nSo, you've got a backup database that's\non, so you run reads against it, and\n\n146\n00:07:25.630 --> 00:07:27.800\nyou want that to be in a different region.\n\n147\n00:07:27.800 --> 00:07:31.200\nBut, it's part of this service, it just\nhappens to be in a different region.\n\n148\n00:07:31.200 --> 00:07:32.970\nWell, now we can actually\ngroup those together and\n\n149\n00:07:32.970 --> 00:07:37.450\nit's still one resource group, even though\nit's spanning more than one region.\n\n150\n00:07:37.450 --> 00:07:40.540\nThe resource group itself\nexists in East US, but\n\n151\n00:07:40.540 --> 00:07:43.740\nI might have certain elements\nthat reside outside of that.\n\n152\n00:07:43.740 --> 00:07:48.396\nAnd as I monitor it, I'm seeing monitoring\nhere that's an aggregate of everything,\n\n153\n00:07:48.396 --> 00:07:50.371\naggregate of my billing or my CPU, or\n\n154\n00:07:50.371 --> 00:07:53.389\nwhatever else that I'm kind\nof watching on this thing.\n\n155\n00:07:53.389 --> 00:07:56.271\nWe can get an aggregate\ncollection of data on that, and\n\n156\n00:07:56.271 --> 00:07:58.839\nwe can tweak that quite a bit,\nset permissions,\n\n157\n00:07:58.839 --> 00:08:03.180\nall sorts of other things based on What it\nis that we need with this resource group.\n\n158\n00:08:03.180 --> 00:08:06.809\n>> Now Don, really quickly because\nprobably a lot of us will be coming from\n\n159\n00:08:06.809 --> 00:08:10.600\ncloud services if we've been using\nAzure for any length of time.\n\n160\n00:08:10.600 --> 00:08:12.390\nNow we have these resource groups.\n\n161\n00:08:12.390 --> 00:08:13.510\nDo they work together?\n\n162\n00:08:13.510 --> 00:08:18.615\nCan I make them work in harmony or can I\nput a cloud service inside of a resource\n\n163\n00:08:18.615 --> 00:08:22.555\ngroup, or what's these crazy ways we\ncan make these things work together?\n\n164\n00:08:22.555 --> 00:08:23.986\n>> So, it's funny you should ask.\n\n165\n00:08:23.986 --> 00:08:25.446\n>> [LAUGH]\n>> You said,\n\n166\n00:08:25.446 --> 00:08:28.610\ncan I put a cloud service\nin a resource group?\n\n167\n00:08:28.610 --> 00:08:31.411\nYou can and the reality is,\nyou already have.\n\n168\n00:08:31.411 --> 00:08:35.990\nWhen Microsoft rolled this out,\nin the background without telling you.\n\n169\n00:08:35.990 --> 00:08:38.060\nThey told you,\nit was on a webpage that nobody read.\n\n170\n00:08:38.060 --> 00:08:40.800\nBut basically what they did is they\ntook all of your cloud services and\n\n171\n00:08:40.800 --> 00:08:42.410\nthey put them in resource groups.\n\n172\n00:08:42.410 --> 00:08:45.530\nAnd so your cloud service is\nalready in a resource group.\n\n173\n00:08:45.530 --> 00:08:47.930\nIt was just created automatically for\nyou with the same name,\n\n174\n00:08:47.930 --> 00:08:49.600\nit just kind of stuck on the back end.\n\n175\n00:08:49.600 --> 00:08:51.760\nAnd so\nthey're fully compatible with each other.\n\n176\n00:08:51.760 --> 00:08:54.260\nThey're kind of basically tied together,\nall right.\n\n177\n00:08:54.260 --> 00:08:58.590\nThe big difference is if we go\nwith a native resource group\n\n178\n00:08:58.590 --> 00:09:01.860\nwe can really get some good stuff going\nthere, a lot of the advanced features.\n\n179\n00:09:01.860 --> 00:09:04.870\nBut if we're still working in the cloud\nservice we lose those advanced features.\n\n180\n00:09:04.870 --> 00:09:07.830\nSo the idea is that you should\nreally move over to these new ones.\n\n181\n00:09:07.830 --> 00:09:12.150\nUnfortunately, you can't really move\na virtual machine from one to the other,\n\n182\n00:09:12.150 --> 00:09:13.280\nit doesn't happen.\n\n183\n00:09:13.280 --> 00:09:16.490\nSo what you have to do is basically\ncreate a new environment.\n\n184\n00:09:16.490 --> 00:09:18.420\nWell if you're dynamically\nprovisioning your servers,\n\n185\n00:09:18.420 --> 00:09:21.010\nyou're just a few clicks away and\nyou're done.\n\n186\n00:09:21.010 --> 00:09:23.530\nBut if you're one of those people\nthat's manually building each server,\n\n187\n00:09:23.530 --> 00:09:24.660\nyou got a lot of customizations.\n\n188\n00:09:24.660 --> 00:09:28.051\nBasically what you have to do is\nback up the VM, blow it away and\n\n189\n00:09:28.051 --> 00:09:32.031\nthen restore it into the new resource\ngroup and if you don't have a back up\n\n190\n00:09:32.031 --> 00:09:35.686\nyou can actually blow away the VM and\njust keep it's hard drives and\n\n191\n00:09:35.686 --> 00:09:39.790\nthen you spin up a new VM that's in\nthe resource group that you want.\n\n192\n00:09:39.790 --> 00:09:41.130\nAnd then you just attach those\nhard drives, to that VM.\n\n193\n00:09:41.130 --> 00:09:44.180\nSo that's how you kind of get around\nto not having to do a backup on it, but\n\n194\n00:09:44.180 --> 00:09:45.205\nits still a bit of work.\n\n195\n00:09:45.205 --> 00:09:47.790\nAnd you do have down time, for\ndoing it, but you should be\n\n196\n00:09:47.790 --> 00:09:50.730\nworking to move over to resource\ngroups at your earliest convenience.\n\n197\n00:09:51.860 --> 00:09:54.570\nAll right, now I showed you guys\na resource group that already existed.\n\n198\n00:09:54.570 --> 00:09:58.430\nLet's show you how to create one of these,\nand kinda get them up on your own.\n\n199\n00:09:58.430 --> 00:10:01.030\nNow, in the Azure Portal,\n\n200\n00:10:01.030 --> 00:10:04.350\nwe usually end up creating resource\ngroups when we spin up a VM.\n\n201\n00:10:04.350 --> 00:10:06.810\nAnd so when you go up here to new, and\n\n202\n00:10:06.810 --> 00:10:09.270\nyou tell it you want to create\na virtual machine, right?\n\n203\n00:10:09.270 --> 00:10:11.890\nSo let's say I want to spin up\na new Windows Server 2012 machine.\n\n204\n00:10:11.890 --> 00:10:16.398\nWell, I can go here to compute and\nbrowse in the marketplace and\n\n205\n00:10:16.398 --> 00:10:22.230\nfind Windows Server 2012 R2 Data Center,\nand I can go to spin it up.\n\n206\n00:10:22.230 --> 00:10:25.260\nAnd when I do that it's\ngonna ask me right here\n\n207\n00:10:25.260 --> 00:10:27.990\nwhich deployment model I wanna pick from.\n\n208\n00:10:27.990 --> 00:10:30.580\nAnd I can pick between classic and\nresource manager.\n\n209\n00:10:30.580 --> 00:10:34.880\nIf I choose classic it's gonna\ncreate a classic virtual machine\n\n210\n00:10:34.880 --> 00:10:36.930\nin a classic cloud service.\n\n211\n00:10:36.930 --> 00:10:42.320\nAnd so on my left menu bar when I see\nway over here cloud services classic and\n\n212\n00:10:42.320 --> 00:10:44.670\nvirtual machines classic,\nthat's where my VM would end up.\n\n213\n00:10:46.020 --> 00:10:50.830\nBut, if I choose to go\nwith the resource manager,\n\n214\n00:10:50.830 --> 00:10:56.210\nnow it's gonna spin up a new virtual\nmachine, one that'll appear in here.\n\n215\n00:10:56.210 --> 00:10:58.230\nAnd it's gonna create a resource group,\n\n216\n00:10:58.230 --> 00:11:03.750\nwhich will appear up here somewhere\n[LAUGH], here under resource groups,\n\n217\n00:11:03.750 --> 00:11:05.950\nand so we won't be in that\nwhole classic stuff anymore.\n\n218\n00:11:05.950 --> 00:11:10.170\nAnd you'll find when you choose resource\nmanager, you get a lot more choices,\n\n219\n00:11:10.170 --> 00:11:12.220\na lot more customization for\nyour virtual machine.\n\n220\n00:11:12.220 --> 00:11:15.260\nSo for example, if I run through this and\nwe start creating it,\n\n221\n00:11:15.260 --> 00:11:19.020\nit's going to ask for\nsome basic settings like a name, username.\n\n222\n00:11:19.020 --> 00:11:21.900\nA resource group name and\na location, right?\n\n223\n00:11:21.900 --> 00:11:28.314\nSo, maybe I wanna create a new file\nserver, so I'll do itprotv-file05.\n\n224\n00:11:28.314 --> 00:11:33.560\nAnd I'll give it my username, and\n\n225\n00:11:33.560 --> 00:11:36.670\nI will, I need to pick an easier password\nthat meets the minimum requirements,\n\n226\n00:11:36.670 --> 00:11:38.230\nbut that'll have to do, all right.\n\n227\n00:11:38.230 --> 00:11:41.270\nAnd then I can pick my subscription,\nmy resource group.\n\n228\n00:11:41.270 --> 00:11:45.570\nIf I give it a new resource group name,\nthen it will just make me a new one or I\n\n229\n00:11:45.570 --> 00:11:50.710\ncan choose select existing and I can pick\na resource group that already exists cuz\n\n230\n00:11:50.710 --> 00:11:54.082\nI can have more than one virtual machine\nlumped into the same resource group.\n\n231\n00:11:54.082 --> 00:12:00.242\nI'm gonna create a new one here so\nI'll call this one itprotv-fileservers.\n\n232\n00:12:00.242 --> 00:12:06.400\nAll right, I get a nice little green check\nmark on that and I'll go ahead and hit OK.\n\n233\n00:12:06.400 --> 00:12:08.560\nAnd that's going to get us moving along.\n\n234\n00:12:08.560 --> 00:12:12.150\nNow that was my basic settings,\nnow I start to pick my size,\n\n235\n00:12:12.150 --> 00:12:13.840\nmy optional features and so on.\n\n236\n00:12:13.840 --> 00:12:15.630\nFor my size, I'll just stick with a DS.\n\n237\n00:12:15.630 --> 00:12:18.470\nI don't want a DS one, I want a, let me\n\n238\n00:12:18.470 --> 00:12:22.060\ngo with just like a regular d one I don't\nwant to pay the storage premium today.\n\n239\n00:12:22.060 --> 00:12:25.320\nI'm being a tightwad, I'll go back and\nforth on these things.\n\n240\n00:12:25.320 --> 00:12:28.470\nAnd there's a D1-V2 boy they really\ndo want you to spend the money.\n\n241\n00:12:28.470 --> 00:12:30.380\nWhere's just the regular D1, there it is.\n\n242\n00:12:30.380 --> 00:12:31.575\nI'm gonna go with a regular D1.\n\n243\n00:12:33.400 --> 00:12:35.130\nAll right so I'll pick that server and\n\n244\n00:12:35.130 --> 00:12:38.830\nnow from my settings here's where we\ncan go for storage, network and so on.\n\n245\n00:12:38.830 --> 00:12:43.560\nNow notice what I'm getting here I\nchose a D1, and it defaulted to premium\n\n246\n00:12:43.560 --> 00:12:47.270\nstorage and D1 doesn't support that so I'm\ngetting a warning, I've gotta fix that.\n\n247\n00:12:47.270 --> 00:12:50.040\nBut now I can start to pick\nthings like my storage account.\n\n248\n00:12:50.040 --> 00:12:54.750\nAnd the storage account can actually be\nassociated with the resource group also.\n\n249\n00:12:54.750 --> 00:12:57.350\nI can pick an existing one or\nI can let it create a new one.\n\n250\n00:12:57.350 --> 00:13:01.490\nIt's wanting to make a new one\ncalled itprotvservers4743.\n\n251\n00:13:01.490 --> 00:13:04.960\nNot necessarily the most intuitive name on\nthe planet, so I might want to come in and\n\n252\n00:13:04.960 --> 00:13:07.930\nassign that a different name and\nwe can do that.\n\n253\n00:13:07.930 --> 00:13:12.490\nSo I might call this my\nitprotvfileservers-sa right?\n\n254\n00:13:12.490 --> 00:13:16.640\nSo it's my storage account and is it\ngonna let me use a hyphen on this one,\n\n255\n00:13:16.640 --> 00:13:19.180\nwell let's see if I get\na green check mark.\n\n256\n00:13:19.180 --> 00:13:21.960\nNope no hyphen on this one,\nso I'll just go ahead and\n\n257\n00:13:21.960 --> 00:13:25.020\nadd sa like that, there we go.\n\n258\n00:13:25.020 --> 00:13:28.740\nAnd I can do a standard local\nredundancy versus geo redundancy and\n\n259\n00:13:28.740 --> 00:13:29.970\nall that other good stuff.\n\n260\n00:13:29.970 --> 00:13:32.860\nSo, we're basically kind of coming through\nand picking what we want on this machine.\n\n261\n00:13:32.860 --> 00:13:34.390\nThe whole point is when this is done,\n\n262\n00:13:34.390 --> 00:13:36.590\nit's all gonna get thrown\ninto this resource group.\n\n263\n00:13:36.590 --> 00:13:38.830\nIt's gonna create a new\nvirtual network for me.\n\n264\n00:13:38.830 --> 00:13:42.540\nSo, it's gonna create one called\nitprotv-fileservers, that's a good name,\n\n265\n00:13:42.540 --> 00:13:43.580\nI'll stick with that.\n\n266\n00:13:43.580 --> 00:13:46.860\nIt's gonna create a subnet and\nthe public IP address.\n\n267\n00:13:46.860 --> 00:13:49.500\nAnd see how all these have red stars,\nthey're all required.\n\n268\n00:13:49.500 --> 00:13:52.020\nAnd that means they're gonna\ngive me default values,\n\n269\n00:13:52.020 --> 00:13:55.650\nso I'm probably okay\nwith what they've got.\n\n270\n00:13:55.650 --> 00:13:57.890\n>> So those values are changeable?\n\n271\n00:13:57.890 --> 00:14:00.460\n>> Yeah, yep, we can change a lot\nof these, but that's subnet, right?\n\n272\n00:14:00.460 --> 00:14:04.270\nAnd we'll talk more about these\nin the networking shows, but\n\n273\n00:14:04.270 --> 00:14:06.500\nfor me, it's using 10.1.0.0/24 for\nthis resource group.\n\n274\n00:14:06.500 --> 00:14:08.600\nMaybe I don't want that,\nmaybe I want something else,\n\n275\n00:14:08.600 --> 00:14:10.470\nand so\nI can pick a different subnet if I want.\n\n276\n00:14:10.470 --> 00:14:13.760\nAnd if I want to create a new virtual\nnetwork or if I already have a virtual\n\n277\n00:14:13.760 --> 00:14:16.220\nnetwork that exists that I want to reuse,\nI can do that.\n\n278\n00:14:16.220 --> 00:14:18.140\nBut I'm just gonna let it create new ones.\n\n279\n00:14:18.140 --> 00:14:21.360\nYou know, it didn't create an IP for\nme for some reason so\n\n280\n00:14:21.360 --> 00:14:23.260\nI'm gonna just add one in here.\n\n281\n00:14:23.260 --> 00:14:27.760\nWhich we'll call itprotv-fileservers,\nwhoops.\n\n282\n00:14:27.760 --> 00:14:30.610\nI'm gonna yell at it, file servers!\n\n283\n00:14:30.610 --> 00:14:31.960\n>> That's right.\n\n284\n00:14:31.960 --> 00:14:32.460\n>> There we go.\n\n285\n00:14:33.810 --> 00:14:37.680\nAnd so we'll get a new public\nIP address associated with this.\n\n286\n00:14:37.680 --> 00:14:40.730\nSo we've got all that,\nand now I can hit okay.\n\n287\n00:14:40.730 --> 00:14:41.690\nAnd then we get our summary,\n\n288\n00:14:41.690 --> 00:14:44.540\nwe're just gonna lay out all\nthe different stuff that we chose.\n\n289\n00:14:44.540 --> 00:14:47.420\nI didn't bother with availability sets,\nthat was actually a little further down on\n\n290\n00:14:47.420 --> 00:14:49.830\nthat screen if I had scrolled down,\nwe'll see those in another show.\n\n291\n00:14:49.830 --> 00:14:52.270\nAnd I'll go ahead and say okay,\nand I'm gonna whip that out.\n\n292\n00:14:52.270 --> 00:14:54.440\nNow, in the background it's gonna\ncreate that resource group,\n\n293\n00:14:54.440 --> 00:14:56.620\nand then it's gonna start creating\nall those other components.\n\n294\n00:14:56.620 --> 00:14:59.459\nAnd putting them all into that\nresource group for us and\n\n295\n00:14:59.459 --> 00:15:03.420\nthat's pretty powerful right,\nnow they're all grouped together.\n\n296\n00:15:03.420 --> 00:15:07.890\nAnd if I delete the resource group,\nthe VM goes away, it's storage goes away.\n\n297\n00:15:07.890 --> 00:15:10.270\nThe IPs, the virtual networks,\nthe security groups,\n\n298\n00:15:10.270 --> 00:15:14.470\nall that stuff goes away, cuz it's\nall being treated as one big service.\n\n299\n00:15:14.470 --> 00:15:18.100\nAnd if there's a failure, and I need to\nfail it over and move it to another stamp\n\n300\n00:15:18.100 --> 00:15:21.840\nor another zone, it knows all\nthe different components to take with it.\n\n301\n00:15:21.840 --> 00:15:24.030\nAnd that's the real power\nof a resource group.\n\n302\n00:15:24.030 --> 00:15:28.080\nWe get better visibility, we can monitor\nall these different elements from one\n\n303\n00:15:28.080 --> 00:15:30.530\nplace they fail over and\nwe can remove them.\n\n304\n00:15:30.530 --> 00:15:35.970\nYou can manage the whole life cycle from\ndeployment to operation to termination\n\n305\n00:15:35.970 --> 00:15:38.450\nall through this one big entity,\nthe resource group.\n\n306\n00:15:38.450 --> 00:15:40.110\nSo it really is a great technology, and\n\n307\n00:15:40.110 --> 00:15:42.580\nit's the way we should be\ndeploying things from now on.\n\n308\n00:15:42.580 --> 00:15:46.830\n>> Awesome, well, obviously these resource\ngroups are a whole lot more powerful.\n\n309\n00:15:46.830 --> 00:15:49.637\nAnd it just makes sense really\nthe way you're laying it out on that,\n\n310\n00:15:49.637 --> 00:15:52.162\nthey would group those things together for\nthose purposes.\n\n311\n00:15:52.162 --> 00:15:53.530\nWhy would I have everything disjointed?\n\n312\n00:15:53.530 --> 00:15:54.889\nAnd it's a good thing they moved to this.\n\n313\n00:15:54.889 --> 00:15:56.352\nWhat else are we missing here?\n\n314\n00:15:56.352 --> 00:15:59.371\nWhat else about resource\ngroups Do we need to know,\n\n315\n00:15:59.371 --> 00:16:02.262\nthat makes them different\nfrom cloud services.\n\n316\n00:16:02.262 --> 00:16:05.382\n>> All right let's talk about the coolest\nthings about resource groups,\n\n317\n00:16:05.382 --> 00:16:06.940\nthe reason you'll want to use it.\n\n318\n00:16:06.940 --> 00:16:10.370\nLet's say that you're a web developer and\nyou're creating an application,\n\n319\n00:16:10.370 --> 00:16:12.470\nI think I mentioned a store front earlier,\n\n320\n00:16:12.470 --> 00:16:17.240\nwhere you might have a load balanced\nweb server front end that auto scales.\n\n321\n00:16:17.240 --> 00:16:20.250\nSo, maybe when you deploy you\ndeploy with two web servers.\n\n322\n00:16:20.250 --> 00:16:22.540\nAnd if they get too busy it spins\nout a third, and then a fourth,\n\n323\n00:16:22.540 --> 00:16:23.100\nand then a fifth.\n\n324\n00:16:23.100 --> 00:16:25.780\nRight, so you got an auto-scaling\nweb server front end.\n\n325\n00:16:25.780 --> 00:16:28.270\nBut at a minimum you're going\nto have two web servers.\n\n326\n00:16:28.270 --> 00:16:31.930\nAnd then on the back end,\nyou've got two SQL databases.\n\n327\n00:16:31.930 --> 00:16:32.720\nRight.\n\n328\n00:16:32.720 --> 00:16:36.080\nMaybe it's like an active or\na read-only copy, or\n\n329\n00:16:36.080 --> 00:16:40.410\njust a mirrored copy of the same database\nor maybe you're doing some kind of.\n\n330\n00:16:40.410 --> 00:16:42.630\nMulti server transactions,\nI don't know, whatever it is.\n\n331\n00:16:42.630 --> 00:16:45.400\nYou might have a read only database for\nyour products and then\n\n332\n00:16:45.400 --> 00:16:48.820\na read write database for your orders,\nor however you want that to be, right?\n\n333\n00:16:48.820 --> 00:16:52.150\nBut you know that your application is\ngonna require those four components.\n\n334\n00:16:52.150 --> 00:16:54.590\nTwo web servers that can auto scale and\n\n335\n00:16:54.590 --> 00:16:58.180\ntwo databases that are running back\nthere with the data you need, all right?\n\n336\n00:16:58.180 --> 00:17:01.780\nNow, whenever you deploy that\napplication you need those four servers.\n\n337\n00:17:01.780 --> 00:17:04.330\nBut you're constantly doing updates and\nchanging things, and\n\n338\n00:17:04.330 --> 00:17:05.770\nyou wanna run through a trial.\n\n339\n00:17:05.770 --> 00:17:07.860\nAnd so you might wanna deploy it,\nsee how it goes, and\n\n340\n00:17:07.860 --> 00:17:10.680\nif it doesn't work out well you just\nblow it away and deploy a new one.\n\n341\n00:17:10.680 --> 00:17:15.490\nWhat we can do is,\nwe can create a customized deployment.\n\n342\n00:17:15.490 --> 00:17:19.640\nA deployment that contains those entities,\nthat contains those four servers.\n\n343\n00:17:19.640 --> 00:17:23.280\nAnd you can roll out multiple\ninstances of that whenever you want.\n\n344\n00:17:23.280 --> 00:17:27.230\nSo, you can create an all new\nresource group basically for\n\n345\n00:17:27.230 --> 00:17:29.000\nany of the various trials\nthat you want to do.\n\n346\n00:17:29.000 --> 00:17:31.170\nAnd Just delete the resource group\nwhen you're done and they're all gone.\n\n347\n00:17:31.170 --> 00:17:32.760\nAnd you continue to spin them up.\n\n348\n00:17:32.760 --> 00:17:37.670\nAnd if we created the deployment file, we\ncan actually automate all of that right?\n\n349\n00:17:37.670 --> 00:17:38.940\nUnfortunately there's a process.\n\n350\n00:17:38.940 --> 00:17:39.860\nIt's not super easy.\n\n351\n00:17:39.860 --> 00:17:42.420\nBut I want to show it to you guys because\nit is the coolest feature of having\n\n352\n00:17:42.420 --> 00:17:43.350\na research group.\n\n353\n00:17:43.350 --> 00:17:47.320\nSo, what I've got on my screen here,\nthis is a JSON file, which\n\n354\n00:17:47.320 --> 00:17:51.040\nI guess if we look at it here, that blue\nis really kind of hard to read, isn't it?\n\n355\n00:17:51.040 --> 00:17:55.290\nLet me switch to like a plain text view,\nso we can just kind of see all of this.\n\n356\n00:17:55.290 --> 00:18:01.350\n>> I was going to say, I think one of our\nviewers is actually asking this question.\n\n357\n00:18:01.350 --> 00:18:02.600\nIt seems like he's leaning that way.\n\n358\n00:18:02.600 --> 00:18:05.800\nHe says can you make\na group as a template?\n\n359\n00:18:05.800 --> 00:18:09.020\nFor the whole set up for another project.\n\n360\n00:18:09.020 --> 00:18:10.200\n>> Yes and no.\n\n361\n00:18:10.200 --> 00:18:13.960\nA great question and\nit's right in line with this.\n\n362\n00:18:13.960 --> 00:18:16.870\nI don't know a way to take\nan existing resource group and\n\n363\n00:18:16.870 --> 00:18:18.960\ngenerate a template based off of it.\n\n364\n00:18:18.960 --> 00:18:19.870\nI don't know of a way to do that.\n\n365\n00:18:19.870 --> 00:18:22.330\nThere might be a way that\nI'm just not familiar with.\n\n366\n00:18:22.330 --> 00:18:24.620\nBut you can create the template yourself,\n\n367\n00:18:24.620 --> 00:18:26.420\nwhich is exactly what I'm about\nto show here on the screen.\n\n368\n00:18:26.420 --> 00:18:29.860\nAnd then, you can deploy it over and\nover and over again to meet your needs.\n\n369\n00:18:29.860 --> 00:18:32.040\nSo, that's pretty much in line.\n\n370\n00:18:32.040 --> 00:18:35.270\nSo, what I've got on my screen right\nhere is one of those templates.\n\n371\n00:18:35.270 --> 00:18:40.370\nAnd what you'll see is\nthat it is a JSON file.\n\n372\n00:18:40.370 --> 00:18:43.970\nAnd it's basically laying out\ninformation about what we want to do.\n\n373\n00:18:43.970 --> 00:18:46.970\nSo, here, you'll see,\nit's defining some variables.\n\n374\n00:18:46.970 --> 00:18:48.490\nWhat is our hosting plan?\n\n375\n00:18:48.490 --> 00:18:51.610\nThe hosting plan is what size\nof the server is it gonna be?\n\n376\n00:18:51.610 --> 00:18:54.310\nIs it gonna be a D 1 or a D 11?\n\n377\n00:18:54.310 --> 00:18:56.940\nIs it a G 5, is it whatever, right?\n\n378\n00:18:56.940 --> 00:18:57.920\nThen we've got our server name.\n\n379\n00:18:57.920 --> 00:18:59.500\nWhat do we want that server to be named?\n\n380\n00:18:59.500 --> 00:19:01.520\nWhat our database name is gonna be.\n\n381\n00:19:01.520 --> 00:19:04.320\nWhat our administrator login and\nadministrator password are going to be.\n\n382\n00:19:04.320 --> 00:19:07.640\nIf you ever spin up a VM these are some of\nthe things that you have to answer in that\n\n383\n00:19:07.640 --> 00:19:08.510\nwizard right.\n\n384\n00:19:08.510 --> 00:19:11.960\nNot the database stuff but\nthe server name, the administrator name.\n\n385\n00:19:11.960 --> 00:19:12.760\nThose you do.\n\n386\n00:19:12.760 --> 00:19:13.540\nAll right.\n\n387\n00:19:13.540 --> 00:19:17.330\nAnd so it's gonna gather those, and\nthen it's gonna start deploying resources.\n\n388\n00:19:17.330 --> 00:19:21.490\nSo, the first thing it's deploying\nhere is a Microsoft sequel server.\n\n389\n00:19:21.490 --> 00:19:24.090\nSo, it's got that server that\nit's gonna be rolling out, and\n\n390\n00:19:24.090 --> 00:19:25.150\nthen it provides that information.\n\n391\n00:19:25.150 --> 00:19:28.880\nThe administrator log in, the password,\nthe resources that are attached to it.\n\n392\n00:19:28.880 --> 00:19:33.530\nSo, here's gonna be a database that's\ngonna be stored in the resource group\n\n393\n00:19:33.530 --> 00:19:34.690\nright there, and\n\n394\n00:19:34.690 --> 00:19:39.670\nwe can see some of the other things,\nsetting the collation for the database.\n\n395\n00:19:39.670 --> 00:19:41.900\nWhen you set up a database,\nyou have to pick the collation,\n\n396\n00:19:41.900 --> 00:19:44.910\nit's next to impossible to change\nthat collation after the fact, so\n\n397\n00:19:44.910 --> 00:19:47.600\nit's important we set that right,\nand they're defining it here.\n\n398\n00:19:47.600 --> 00:19:50.630\nThen as I scroll down,\noh, went a little too far.\n\n399\n00:19:50.630 --> 00:19:53.650\nHere, they're saying allow\nall Windows Azure's IPs,\n\n400\n00:19:53.650 --> 00:19:57.960\nthey're setting up some firewall rules For\nthose SQL servers.\n\n401\n00:19:57.960 --> 00:20:00.950\nAfter that,\nsetting up a Microsoft web server farm.\n\n402\n00:20:00.950 --> 00:20:04.330\nSo, configuring IIS on a web server and\ndeploying it.\n\n403\n00:20:04.330 --> 00:20:07.090\nAnd setting that up here,\nit's doing the free tier, so it's an f1.\n\n404\n00:20:07.090 --> 00:20:12.680\nWe could change that to a d1 or\nwhatever if we know the skew for it.\n\n405\n00:20:12.680 --> 00:20:16.300\nAnd then the number of workers,\nhow many web servers do we need?\n\n406\n00:20:16.300 --> 00:20:18.520\nHere they're just doing one, right?\n\n407\n00:20:18.520 --> 00:20:21.880\nAnd as you look at the rest of this, here\nit's gonna create a Microsoft website.\n\n408\n00:20:21.880 --> 00:20:24.350\nThe IIS site that's gonna be in there.\n\n409\n00:20:24.350 --> 00:20:28.340\nAnd so we can define all of that, and\n\n410\n00:20:28.340 --> 00:20:30.410\nnow it's right here in\nthis configuration file.\n\n411\n00:20:30.410 --> 00:20:34.320\nAnd I can deploy a new resource\ngroup with this configuration file.\n\n412\n00:20:34.320 --> 00:20:36.060\nAnd it's gonna have all\nthose different elements.\n\n413\n00:20:36.060 --> 00:20:37.920\nNow, this one's actually\na lot more simple.\n\n414\n00:20:37.920 --> 00:20:41.340\nIt's really just a database server\nthat also has the website on it.\n\n415\n00:20:41.340 --> 00:20:44.530\nIt's not multiple servers but\nwe can configure it to go that route by\n\n416\n00:20:44.530 --> 00:20:48.870\nadding in things like load balancing and\nauto scaling rather than configuration.\n\n417\n00:20:48.870 --> 00:20:52.190\nAnd then all we have to do\nis fire up our PowerShell,\n\n418\n00:20:52.190 --> 00:20:54.170\nyou do have to use the PowerShell for\nthis piece.\n\n419\n00:20:54.170 --> 00:20:56.210\nAnd then we'll be able to deploy that.\n\n420\n00:20:56.210 --> 00:20:57.450\nNow, the way the PowerShell works for\n\n421\n00:20:57.450 --> 00:21:01.900\nthis, is we basically just have to do\nour new resource group-type options, but\n\n422\n00:21:01.900 --> 00:21:05.010\nwe have to load that configuration\nfile in and provide it to it.\n\n423\n00:21:05.010 --> 00:21:09.700\nSo, I've got that on my desktop I think.\n\n424\n00:21:09.700 --> 00:21:11.200\nIs that where I put that file?\n\n425\n00:21:11.200 --> 00:21:12.790\nYeah, there it is.\nAzuredeploy.json.\n\n426\n00:21:12.790 --> 00:21:16.440\nAnd if I wanna roll that out,\nall I've gotta do is call that, and\n\n427\n00:21:16.440 --> 00:21:17.000\nI'll be able to do it.\n\n428\n00:21:17.000 --> 00:21:21.620\nNow, one problem I might have depending on\nhow long you've been working with Azure,\n\n429\n00:21:21.620 --> 00:21:25.500\nyour power shell might be\nin classic mode already.\n\n430\n00:21:25.500 --> 00:21:27.900\nAnd if it's in classic mode,\nthat's what it's gonna default to.\n\n431\n00:21:27.900 --> 00:21:30.850\nAnd so you might need to switch\nto resource manager mode.\n\n432\n00:21:30.850 --> 00:21:33.780\nAnd the reason I bring that up is because\nI can't remember if I switched this\n\n433\n00:21:33.780 --> 00:21:35.310\none to resource manager mode or not.\n\n434\n00:21:35.310 --> 00:21:36.770\nSo, I may not have switched over to it.\n\n435\n00:21:36.770 --> 00:21:37.820\nIf you're not sure.\n\n436\n00:21:37.820 --> 00:21:44.949\nAll you have to do is run\nLogin-AzureRmAccount.\n\n437\n00:21:44.949 --> 00:21:48.870\nYou're probably already logged in\nwith your Azure account and so\n\n438\n00:21:48.870 --> 00:21:51.640\nthis will just switch you over to\nthe resource manager mode, but\n\n439\n00:21:51.640 --> 00:21:54.350\nif you're not logged in, this will\ntake you a web page which is what I'm\n\n440\n00:21:54.350 --> 00:21:57.160\ngoing to see and\nwe'll get a chance to log in.\n\n441\n00:21:57.160 --> 00:22:00.590\nSo, I'm just going to punch in my\ninformation and once I'm logged in,\n\n442\n00:22:00.590 --> 00:22:04.910\nnow I'm in that resource manager mode and\nwe can start To work with that.\n\n443\n00:22:04.910 --> 00:22:08.080\nSo, I'm just gonna type in my credentials\nhere real quick and get logged in.\n\n444\n00:22:08.080 --> 00:22:11.160\nI don't want to share them with\nthe video public for whatever reason.\n\n445\n00:22:11.160 --> 00:22:12.420\nBut there we go.\n\n446\n00:22:12.420 --> 00:22:15.100\nSo, once you're logged in, you'll get\na little confirmation in your prompt, and\n\n447\n00:22:15.100 --> 00:22:16.570\nyou can see it here on my screen.\n\n448\n00:22:16.570 --> 00:22:19.400\nIt lets me know I'm logged in to\nAzure Cloud, and there's my account,\n\n449\n00:22:19.400 --> 00:22:21.070\nmy tenant ID.\n\n450\n00:22:21.070 --> 00:22:23.900\nAnd now I'm in that resource manager mode.\n\n451\n00:22:23.900 --> 00:22:26.170\nAnd so now I can start deploying things.\n\n452\n00:22:26.170 --> 00:22:27.470\nAnd using that resource manager.\n\n453\n00:22:27.470 --> 00:22:31.370\nSo, I wanna whip up the database,\n\n454\n00:22:31.370 --> 00:22:35.420\nweb server solution that I showed you\nin that Json file just a moment ago.\n\n455\n00:22:35.420 --> 00:22:37.940\nAnd I've got that Json file\nsitting right here on my desktop.\n\n456\n00:22:37.940 --> 00:22:39.890\nThis Azure deploy.Json.\n\n457\n00:22:39.890 --> 00:22:42.328\nSo, I'm gonna call that,\n\n458\n00:22:42.328 --> 00:22:48.680\nI'm gonna say new-AzureRmResourceGroup\nDeployment, right.\n\n459\n00:22:48.680 --> 00:22:50.390\nI'm not just creating\na new resource group,\n\n460\n00:22:50.390 --> 00:22:52.100\nI'm doing a resource group deployment.\n\n461\n00:22:52.100 --> 00:22:54.830\nThat means I've got other stuff that's\ngoing to be coming along with it\n\n462\n00:22:54.830 --> 00:22:55.740\nto populate it.\n\n463\n00:22:55.740 --> 00:23:00.970\nAll right, and then I can give\nit a resource group name and\n\n464\n00:23:00.970 --> 00:23:07.590\nI'm going to call mine itprotvdemodb.\n\n465\n00:23:07.590 --> 00:23:09.130\nAll right.\nI guess I probably should have checked to\n\n466\n00:23:09.130 --> 00:23:10.720\nsee if that was available but\nI'm sure it is.\n\n467\n00:23:10.720 --> 00:23:12.310\nSo, itprotvdemodb.\n\n468\n00:23:12.310 --> 00:23:14.690\nIn fact I'll stick\na five on the end of it.\n\n469\n00:23:14.690 --> 00:23:16.700\n[LAUGH] This is demo db five.\n\n470\n00:23:16.700 --> 00:23:18.270\nAnd you might be doing this, right?\n\n471\n00:23:18.270 --> 00:23:21.710\nThis might be itprotdb Webb app five,\nright?\n\n472\n00:23:21.710 --> 00:23:23.980\nThis might be the fifth time\nyou've deployed the web app.\n\n473\n00:23:23.980 --> 00:23:27.570\nAnd then it's not working right, you make\nsome tweaks, and you deploy web app six or\n\n474\n00:23:27.570 --> 00:23:28.940\nweb app seven, and so on.\n\n475\n00:23:28.940 --> 00:23:30.710\nYou just kinda keep doing\nincrements to track it that way.\n\n476\n00:23:30.710 --> 00:23:33.260\nSo, I'll do web app five.\n\n477\n00:23:33.260 --> 00:23:36.590\nThen I'm gonna do my template file, and\n\n478\n00:23:36.590 --> 00:23:42.160\nthe template file Well that's the JSON\nfile we saw up there earlier.\n\n479\n00:23:42.160 --> 00:23:48.048\nSo, I'm gonna point c colon\nslash users slash down\n\n480\n00:23:48.048 --> 00:23:52.416\nslash desktop slash azure deploy dot JSON.\n\n481\n00:23:52.416 --> 00:23:54.528\nSo, there's that template file,\nI'm just gonna point to it.\n\n482\n00:23:54.528 --> 00:23:56.819\nThat's where it's going to get\nmost of it's configuration.\n\n483\n00:23:56.819 --> 00:24:01.241\nThen I need to tell it The answers\nis to those variables we saw, right?\n\n484\n00:24:01.241 --> 00:24:03.305\nFor example, there was -hostingPlan.\n\n485\n00:24:04.970 --> 00:24:08.590\nAnd I could actually leave these off and\nit would be smart enough to prompt me for\n\n486\n00:24:08.590 --> 00:24:11.590\neach one, but if I'm trying\nto automate this at midnight,\n\n487\n00:24:11.590 --> 00:24:14.780\ndeploy this information for me, than I\nneed to give it the answers to that.\n\n488\n00:24:14.780 --> 00:24:16.310\nThe one I can't do is the password.\n\n489\n00:24:16.310 --> 00:24:17.230\nWell you can.\n\n490\n00:24:17.230 --> 00:24:18.980\nYou can provide it in\nthe script if you want.\n\n491\n00:24:18.980 --> 00:24:20.870\nBut we'll leave it kinda\ndone by hand here.\n\n492\n00:24:20.870 --> 00:24:27.220\nSo I'm going to say -hostingplanname and\nI can call it whatever I want.\n\n493\n00:24:27.220 --> 00:24:30.950\nIn the configuration file it was\nmapped to that F1, that free tier.\n\n494\n00:24:30.950 --> 00:24:32.720\nBut I can call it anything.\n\n495\n00:24:32.720 --> 00:24:34.815\nI can go ITProTV free tier.\n\n496\n00:24:34.815 --> 00:24:37.440\nBut I'm just gonna call it the free tier.\n\n497\n00:24:37.440 --> 00:24:40.486\nAnd then I'll say -serverName, so\n\n498\n00:24:40.486 --> 00:24:45.902\nit's gonna whip up a server and\nI wanna call mine itprotvwebapp.\n\n499\n00:24:45.902 --> 00:24:50.233\nActually I'm starting to get a little long\non that one let's just call it like db5,\n\n500\n00:24:50.233 --> 00:24:52.925\nall right so\nthis will be the fifth database server.\n\n501\n00:24:52.925 --> 00:24:59.162\nAnd then I'll give it a database name,\nwhich I'll call mine testdb5,\n\n502\n00:24:59.162 --> 00:25:02.960\nwhatever it is I want\nto name that database.\n\n503\n00:25:02.960 --> 00:25:06.240\nNow obviously my application's\nprobably expecting a certain name.\n\n504\n00:25:06.240 --> 00:25:07.580\nSo I probably wanna stick with that.\n\n505\n00:25:07.580 --> 00:25:10.620\nBut since I'm making this up as I go,\nI'll just use that name.\n\n506\n00:25:10.620 --> 00:25:13.910\nAnd then lastly, I need to give\nit my administrator login name.\n\n507\n00:25:15.080 --> 00:25:19.680\nAdministrator login,\nwhich I'll just call mine dpezet.\n\n508\n00:25:19.680 --> 00:25:21.040\nNow, I'm gonna leave off the password.\n\n509\n00:25:21.040 --> 00:25:24.850\nI could type it here, but you'd see it\non the screen, which could be fun, but\n\n510\n00:25:24.850 --> 00:25:26.870\nI'll leave it off, and\nit's just gonna prompt me for that.\n\n511\n00:25:26.870 --> 00:25:28.670\nSo, when I run it,\nthere it is, asking me for\n\n512\n00:25:28.670 --> 00:25:31.230\nthe one variable that I didn't provide,\nwhich is that password.\n\n513\n00:25:31.230 --> 00:25:34.020\nSo, now I can get in here and\nI can type it, and\n\n514\n00:25:34.020 --> 00:25:36.140\nI get that nice little start input.\n\n515\n00:25:36.140 --> 00:25:37.690\nNow, when I try to run\nit I got an error and\n\n516\n00:25:37.690 --> 00:25:40.690\nit's telling me here that\nthe resource group is not found.\n\n517\n00:25:40.690 --> 00:25:43.811\nThe resource group itprotvwebapp5\ncould not be found.\n\n518\n00:25:43.811 --> 00:25:49.011\nSo, when I did it, I pointed to a resource\ngroup named called itprotvwebapp5,\n\n519\n00:25:49.011 --> 00:25:53.000\nI probably should have called\nlike a create first and done it.\n\n520\n00:25:53.000 --> 00:25:54.480\nSo, now it's a little bit mad at me.\n\n521\n00:25:54.480 --> 00:25:56.940\nWe can just use the one\nthat I've already got made.\n\n522\n00:25:56.940 --> 00:25:58.790\nWhat was the resource\ngroup that I created?\n\n523\n00:25:58.790 --> 00:26:00.281\nWhere'd that thing go?\n\n524\n00:26:00.281 --> 00:26:03.330\nLet me go into my resource groups.\n\n525\n00:26:03.330 --> 00:26:05.400\nAnd we created one called,\nwas it itprotvdemo?\n\n526\n00:26:05.400 --> 00:26:06.445\nAnd I'll just throw it in that one.\n\n527\n00:26:06.445 --> 00:26:07.835\n>> I think you did, yeah.\n\n528\n00:26:07.835 --> 00:26:09.725\n>> And there we go, itprotvdemo.\n\n529\n00:26:09.725 --> 00:26:10.820\nSo I'll just throw it into that one.\n\n530\n00:26:10.820 --> 00:26:13.900\nIt's in East US and I am okay with that.\n\n531\n00:26:13.900 --> 00:26:18.450\nSo let's kind of rerun this, and\n\n532\n00:26:18.450 --> 00:26:21.750\nwe'll just kind of change to that and\nmy Home button is not working.\n\n533\n00:26:21.750 --> 00:26:23.740\nSo let me just scroll back\nthe old fashioned way.\n\n534\n00:26:23.740 --> 00:26:26.552\nAll right, so\nwe'll throw this one in itprotvdemo.\n\n535\n00:26:26.552 --> 00:26:30.040\nAnd again, we saw creating a resource\ngroup from the PowerShell earlier so\n\n536\n00:26:30.040 --> 00:26:31.290\nI could have just whipped\nit up that way too.\n\n537\n00:26:31.290 --> 00:26:33.610\nBut I'll throw it into that one.\n\n538\n00:26:33.610 --> 00:26:37.760\nAnd, we'll provide that password again.\n\n539\n00:26:37.760 --> 00:26:38.550\nAnd off we go.\n\n540\n00:26:38.550 --> 00:26:44.420\nNow, one thing you're gonna see is when\nyou deploy this way, it takes a long time.\n\n541\n00:26:44.420 --> 00:26:48.910\nAnd the reason is, I'm not just\ndeploying a stock VM anymore, right?\n\n542\n00:26:48.910 --> 00:26:52.320\nI'm creating a resource group or,\nin this case, I've already got it now.\n\n543\n00:26:52.320 --> 00:26:56.270\nI'm creating IP addresses inside of it,\nvirtual networks inside of it.\n\n544\n00:26:56.270 --> 00:26:58.450\nI'm deploying a virtual\nmachine inside of it.\n\n545\n00:26:58.450 --> 00:27:01.930\nI'm configuring a SQL database and\ngiving it a name.\n\n546\n00:27:01.930 --> 00:27:05.210\nThere's a lot of stuff that's\ngoing on in the background and\n\n547\n00:27:05.210 --> 00:27:06.360\nit's gonna take a while.\n\n548\n00:27:06.360 --> 00:27:08.530\nThe more resources that\nare in that resource group,\n\n549\n00:27:08.530 --> 00:27:10.500\nthe longer this is going to take.\n\n550\n00:27:10.500 --> 00:27:12.800\nAnd that's why I mentioned\nautomating this,\n\n551\n00:27:12.800 --> 00:27:15.190\nI might have a developer\nthat's working on an app.\n\n552\n00:27:15.190 --> 00:27:19.180\nAnd they have a sandbox network\nthat they kind of practice on, and\n\n553\n00:27:19.180 --> 00:27:22.360\nevery night at midnight I delete it and\nredeploy it.\n\n554\n00:27:22.360 --> 00:27:23.800\nAnd that way it's fresh and clean,\n\n555\n00:27:23.800 --> 00:27:27.210\nevery morning when they come in they\nhave this nice new sandbox to work with.\n\n556\n00:27:27.210 --> 00:27:30.477\nWell, if there's enough servers in there\nit might take an hour to deploy, so\n\n557\n00:27:30.477 --> 00:27:33.091\nI could schedule that at midnight,\nand then an hour goes by and\n\n558\n00:27:33.091 --> 00:27:34.726\nby 1 AM it's done, it's deployed.\n\n559\n00:27:34.726 --> 00:27:37.092\nEverybody comes into work the next\nmorning, and there it is.\n\n560\n00:27:37.092 --> 00:27:40.860\nA nice fresh clean server set ready for\nthem to go with.\n\n561\n00:27:40.860 --> 00:27:44.351\nIn my case I did just deploy a SQL\nserver with the database, so\n\n562\n00:27:44.351 --> 00:27:47.570\nit'll probably take probably\nsomewhere between 3 and\n\n563\n00:27:47.570 --> 00:27:51.076\n5 minutes to actually get that\nkind of registered in and up.\n\n564\n00:27:51.076 --> 00:27:53.828\nSo I'm not going to sit around and\nwait for that too terribly long.\n\n565\n00:27:53.828 --> 00:27:58.230\nBut if I jump back here and start to\ntake a look at my resource groups,\n\n566\n00:27:58.230 --> 00:28:03.510\nI'll start to see things appearing inside\nof that itprotvdemo resource group.\n\n567\n00:28:03.510 --> 00:28:07.990\nI made this resource group earlier\nfrom the PowerShell, I think.\n\n568\n00:28:07.990 --> 00:28:10.750\nAnd so I didn't really stick\nanything inside of it.\n\n569\n00:28:10.750 --> 00:28:16.701\nAnd if I look now, I can see,\nwell itprotvdb5, there's that database.\n\n570\n00:28:16.701 --> 00:28:19.990\nAnd I've only got one icon which means it\nhasn't actually made the server part yet.\n\n571\n00:28:19.990 --> 00:28:21.220\nSo that's just the database config.\n\n572\n00:28:21.220 --> 00:28:24.223\nIt's really hard to see, but\nthere's a little gray gear on that.\n\n573\n00:28:24.223 --> 00:28:26.810\nIt's getting kinda blurred but\nsee that gray gear?\n\n574\n00:28:26.810 --> 00:28:29.690\nThat gray gear let's me know that this\nis the database kinda config itself, and\n\n575\n00:28:29.690 --> 00:28:32.390\nit's gonna spin that\nactual database up later.\n\n576\n00:28:32.390 --> 00:28:37.289\nThere's the freetier that we created\nthat was mapped to the provision plan,\n\n577\n00:28:37.289 --> 00:28:40.020\nright, the size these\nservers are gonna be.\n\n578\n00:28:40.020 --> 00:28:41.340\nIt's whipped up an example site.\n\n579\n00:28:41.340 --> 00:28:43.100\nI guess that wasn't\nspecified in my config file.\n\n580\n00:28:43.100 --> 00:28:44.800\nSo I had to whip one up for me.\n\n581\n00:28:44.800 --> 00:28:47.340\nAnd we've got the service itself.\n\n582\n00:28:47.340 --> 00:28:49.919\nWe got a couple of different things\nthat are all being spun up in here.\n\n583\n00:28:49.919 --> 00:28:54.082\nWe've got itprotv-file04, I guess that\nI must have put that in there earlier,\n\n584\n00:28:54.082 --> 00:28:56.958\nI moved it in, so\nI will see a new virtual machine appear.\n\n585\n00:28:56.958 --> 00:28:59.541\nBut it's gotta create all\nthe infrastructure first,\n\n586\n00:28:59.541 --> 00:29:02.867\nbefore it can create my new server,\nand what was my new server called?\n\n587\n00:29:02.867 --> 00:29:06.720\nIt was like db5, or something like that.\n\n588\n00:29:06.720 --> 00:29:09.170\nHere, server name itprotv-db5.\n\n589\n00:29:09.170 --> 00:29:14.220\nSo if I keep watching here eventually,\nitprotvdb5, the server will appear.\n\n590\n00:29:14.220 --> 00:29:17.870\nThis is the database, that will have\nthis monitor icon when it does appear.\n\n591\n00:29:17.870 --> 00:29:21.280\nAnd so, if I sit here bored and\nwatch this, eventually it will happen.\n\n592\n00:29:21.280 --> 00:29:24.760\nUnfortunately, I don't get the little\nstatus screen here in the UI because when\n\n593\n00:29:24.760 --> 00:29:27.540\nyou do things in the PowerShell,\nit's separate and you don't see it.\n\n594\n00:29:27.540 --> 00:29:29.060\nBut it will deploy and\nwe'll start to have it.\n\n595\n00:29:29.060 --> 00:29:34.110\nSo, we can rapidly deploy clusters\nof information, and we'll have it.\n\n596\n00:29:34.110 --> 00:29:37.560\nNow one quick word of caution.\n\n597\n00:29:37.560 --> 00:29:40.400\nWhen you deploy this stuff\ninside of a resource group,\n\n598\n00:29:40.400 --> 00:29:44.140\nit's different than when you deploy\nit inside of a cloud service, and\n\n599\n00:29:44.140 --> 00:29:46.430\nit's represented differently in the UI.\n\n600\n00:29:46.430 --> 00:29:52.320\nSo in the UI, I've got virtual machines\nclassic, and virtual machines regular.\n\n601\n00:29:52.320 --> 00:29:55.640\nAnd so now I've got VMs\nspread in between the two.\n\n602\n00:29:55.640 --> 00:29:58.340\nAnd that's something I need to\nbe I need to be wary of, right?\n\n603\n00:29:58.340 --> 00:30:01.300\nIs that when I'm looking inside of one\nset of VMs I'm not necessarily seeing\n\n604\n00:30:01.300 --> 00:30:02.760\nall of the virtual machines on my account.\n\n605\n00:30:02.760 --> 00:30:04.610\nSo when you're monitoring cost and\n\n606\n00:30:04.610 --> 00:30:07.590\nthings of that nature,\nyour stuff starts to get spread out.\n\n607\n00:30:07.590 --> 00:30:11.900\nSo I encourage you make the transition\nto resource groups as soon as you can,\n\n608\n00:30:11.900 --> 00:30:13.680\nand just get out of cloud\nservices altogether,\n\n609\n00:30:13.680 --> 00:30:15.960\nthat way you don't have to go to\ntwo places just to look for things.\n\n610\n00:30:15.960 --> 00:30:20.750\nBut if you look at my account for example,\nif I go here under virtual machines,\n\n611\n00:30:20.750 --> 00:30:23.602\nI only see a couple of VMs.\n\n612\n00:30:23.602 --> 00:30:25.640\nitprotv-file05, web-demo-1, web-demo-2.\n\n613\n00:30:25.640 --> 00:30:30.070\nI still don't see my db5 yet\nbut it'll come up.\n\n614\n00:30:30.070 --> 00:30:32.551\nSo these are ones that were\ndeployed in resource groups, and\n\n615\n00:30:32.551 --> 00:30:36.820\nthen when I go to virtual machines\nclassic, that's where I start to see all\n\n616\n00:30:36.820 --> 00:30:41.200\nthese other ones that I\nmade in the previous model.\n\n617\n00:30:41.200 --> 00:30:43.700\nAnd notice, there's itprotv-file04,\n\n618\n00:30:43.700 --> 00:30:48.710\nwhich I made the old way and actually\nput it inside of a resource group.\n\n619\n00:30:48.710 --> 00:30:52.400\nThat shows how it's kind of\nan old model VM that's been\n\n620\n00:30:52.400 --> 00:30:54.190\nplaced in a resource\ngroup at the same time.\n\n621\n00:30:54.190 --> 00:30:55.500\nSo you can kinda do both.\n\n622\n00:30:55.500 --> 00:30:57.770\nSo really neat stuff, really powerful.\n\n623\n00:30:57.770 --> 00:31:01.330\nOne thing you're gonna want to learn more\nabout, are making those template files.\n\n624\n00:31:01.330 --> 00:31:04.940\nAnd Microsoft has a great website, I'll\nput a link for it in the show notes for\n\n625\n00:31:04.940 --> 00:31:06.050\nthis episode.\n\n626\n00:31:06.050 --> 00:31:09.930\nBut they've got this Authoring Azure\nResource Manager Templates, and\n\n627\n00:31:09.930 --> 00:31:11.000\nit's a great read.\n\n628\n00:31:11.000 --> 00:31:12.110\nThey update this all the time.\n\n629\n00:31:12.110 --> 00:31:14.420\nIt was updated five days ago.\n\n630\n00:31:14.420 --> 00:31:17.190\nSo that's how often\nthey're updating this one.\n\n631\n00:31:17.190 --> 00:31:20.690\nAnd boy, it just has some\nreally great stuff in here on\n\n632\n00:31:20.690 --> 00:31:24.683\nhow to build the template, how to use\nexpressions, variables, resources, and\n\n633\n00:31:24.683 --> 00:31:29.280\njust how we can really whip\nup a custom environment.\n\n634\n00:31:29.280 --> 00:31:33.188\nI was telling Daniel before the show,\nthe stuff you can do with this is amazing.\n\n635\n00:31:33.188 --> 00:31:37.950\nYou can have it deploy and create an\nActive Directory and join the machines to\n\n636\n00:31:37.950 --> 00:31:42.068\nthe domain and have a certain\nconfiguration, all right out of the box.\n\n637\n00:31:42.068 --> 00:31:46.137\nAnd it's really pretty impressive stuff\nif you take the time to learn it.\n\n638\n00:31:46.137 --> 00:31:51.190\n>> Yeah, these resource groups are very,\nvery awesome, very, very powerful.\n\n639\n00:31:51.190 --> 00:31:53.880\nAnd then we have the, well I guess\nit's like a scripting language almost.\n\n640\n00:31:53.880 --> 00:31:56.452\nYou learn that and\nyou are a force to be reckoned with.\n\n641\n00:31:56.452 --> 00:31:58.820\nYou're gonna be able to use\nthis to your utmost benefit.\n\n642\n00:31:58.820 --> 00:32:02.260\nNow, Don, is there anything else that\nwe need to know about them before we\n\n643\n00:32:02.260 --> 00:32:03.470\nclose the show?\n\n644\n00:32:03.470 --> 00:32:06.790\nWell, what we saw here was creating\na resource group, and kinda what they do.\n\n645\n00:32:06.790 --> 00:32:09.870\nWe're gonna work more with them as we\nstart to configure load balancing,\n\n646\n00:32:09.870 --> 00:32:12.860\navailability sets, all those other\nadvanced things that stack on top of them.\n\n647\n00:32:12.860 --> 00:32:15.440\nAnd definitely watch\nthe networking episodes,\n\n648\n00:32:15.440 --> 00:32:17.950\nwhere we'll cover\nthe network security groups.\n\n649\n00:32:17.950 --> 00:32:20.060\nCuz you'll deploy those on\nthe resource group instead of\n\n650\n00:32:20.060 --> 00:32:21.210\non the individual VMs too.\n\n651\n00:32:21.210 --> 00:32:22.500\nThat's another one\nthat's pretty important.\n\n652\n00:32:22.500 --> 00:32:24.960\nSo there's plenty more there.\n\n653\n00:32:24.960 --> 00:32:27.590\nBut as far as the resource groups\nthemselves, that's basically it.\n\n654\n00:32:27.590 --> 00:32:28.590\n>> I see what you're doing there, Don.\n\n655\n00:32:28.590 --> 00:32:30.860\nYou're building\na foundational knowledge for\n\n656\n00:32:30.860 --> 00:32:33.270\nus to build upon as we\nmove through the shows.\n\n657\n00:32:33.270 --> 00:32:34.740\nI'm with you on that one.\n\n658\n00:32:34.740 --> 00:32:36.300\nAll right, Don, well,\nthat being said, thank you so\n\n659\n00:32:36.300 --> 00:32:40.610\nmuch for showing us how to use\nthis option inside of Azure.\n\n660\n00:32:40.610 --> 00:32:43.700\nBut we've ticked down the clock, so\nwe're gonna go ahead and close her down.\n\n661\n00:32:43.700 --> 00:32:44.610\nThanks for watching.\n\n662\n00:32:44.610 --> 00:32:47.560\nSigning off for ITProTV,\nI've been your host, Daniel Lowrie.\n\n663\n00:32:47.560 --> 00:32:48.210\n>> And I'm Don Pezet.\n\n664\n00:32:48.210 --> 00:32:49.723\n>> And we'll see you next time.\n\n665\n00:32:49.723 --> 00:32:55.650\n[MUSIC]\n\n",
          "vimeoId": "148881936"
        },
        {
          "description": "In this episode, Don and Daniel dive into looking at Networking Azure Virtual Machines. They kick things off by defining and describing Virtual Networks(VN), both how they work as well as some of their limitations. Then they jump over to some guidelines to follow when implementing a Virtual Network in Azure. They also cover topics such as DNS in VNs and creating/configuring Network Security Groups which is basically the Azure firewall.",
          "length": "1897",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-3-3-virtual_machine_networking-120415-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-3-3-virtual_machine_networking-120415-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-3-3-virtual_machine_networking-120415-1-sm.jpg",
          "title": "Virtual Machine Networking",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:12.571 --> 00:00:16.914\nAll right, greetings everyone and welcome\nto another exciting episode of ITProTV.\n\n3\n00:00:16.914 --> 00:00:18.744\nI'm your host, Daniel Lowrie, and\n\n4\n00:00:18.744 --> 00:00:22.647\nin today's episode we're gonna continue\ntaking a look at the Microsoft Azure\n\n5\n00:00:22.647 --> 00:00:25.970\nvirtual machines there up inside\nthat Azure cloud service.\n\n6\n00:00:25.970 --> 00:00:27.300\nAnd joining us yet again for\n\n7\n00:00:27.300 --> 00:00:31.810\nanother great episode here on ITProTV is\nmy good friend and colleague Mr Don Pezet.\n\n8\n00:00:31.810 --> 00:00:33.730\nDon, welcome to the show,\nhow's it going today?\n\n9\n00:00:33.730 --> 00:00:36.360\n>> Thanks for having me back, Daniel, and\nI'm excited about today cuz we're gonna be\n\n10\n00:00:36.360 --> 00:00:40.130\ntalking a little bit about virtual\nnetworking inside of Azure.\n\n11\n00:00:40.130 --> 00:00:43.010\nYou've probably noticed as we spun\nthese machines up, a lot of them had IP\n\n12\n00:00:43.010 --> 00:00:46.370\naddresses, they had network connectivity,\nthey got it from somewhere.\n\n13\n00:00:46.370 --> 00:00:51.380\nAnd I've accepted the defaults in darn\nnear every single episode this series.\n\n14\n00:00:51.380 --> 00:00:54.280\nIt's time we took a look at some of\nthe other options that are out there, and\n\n15\n00:00:54.280 --> 00:00:55.730\nthis is the episode for us.\n\n16\n00:00:55.730 --> 00:00:57.151\nThat's what we've got on the plate for\nus today.\n\n17\n00:00:57.151 --> 00:01:00.030\n>> Now Don,\nobviously this is networking, but\n\n18\n00:01:00.030 --> 00:01:05.129\nwe're working inside of the Azure your\nportal, so is it really any different?\n\n19\n00:01:05.129 --> 00:01:08.220\nI mean, networking's networking\nno matter where you go.\n\n20\n00:01:08.220 --> 00:01:10.090\nObviously we've got something\nelse to learn about this.\n\n21\n00:01:10.090 --> 00:01:13.635\n>> Yeah, and well, they're just\nlike physical networks but virtual.\n\n22\n00:01:13.635 --> 00:01:15.910\n>> [LAUGH]\n>> So a lot of the knowledge you guys\n\n23\n00:01:15.910 --> 00:01:18.330\nalready have carries right over\nto the virtual environment.\n\n24\n00:01:18.330 --> 00:01:20.802\nWe can deploy it right here and\nit works great.\n\n25\n00:01:20.802 --> 00:01:24.442\nSo we don't have to do anything too crazy,\nbut there's a lot of little ins and outs,\n\n26\n00:01:24.442 --> 00:01:27.879\nlittle quirks that we've gotta be aware\nof, and so I wanna walk you through that\n\n27\n00:01:27.879 --> 00:01:30.578\nprocess and kinda get that set up and\nsee it in an environment.\n\n28\n00:01:30.578 --> 00:01:34.550\nSo, first off just a couple of little\nthings about virtual networks.\n\n29\n00:01:34.550 --> 00:01:37.180\nWhenever you spin up\na new resource group or\n\n30\n00:01:37.180 --> 00:01:41.040\neven when you spin up a cloud service, you\nalways attach them to a virtual network,\n\n31\n00:01:41.040 --> 00:01:43.700\na network that represents your machines.\n\n32\n00:01:43.700 --> 00:01:46.290\nAnd these are networks that\nkeep you separate from\n\n33\n00:01:46.290 --> 00:01:48.270\nall the other Azure clients\nthat are out there.\n\n34\n00:01:48.270 --> 00:01:53.810\nSo you'll have a private network that's\njust associated with your systems.\n\n35\n00:01:53.810 --> 00:01:57.010\nAnd you may have more than one of these\nnetworks dividing up your machines, and\n\n36\n00:01:57.010 --> 00:02:01.030\nwhen you do that your new networks\nthat you create are kind of isolated\n\n37\n00:02:01.030 --> 00:02:01.970\nfrom each other.\n\n38\n00:02:01.970 --> 00:02:04.850\nAnd Microsoft sets up what's called\na gateway service that allows you to route\n\n39\n00:02:04.850 --> 00:02:05.990\nbetween them, so\n\n40\n00:02:05.990 --> 00:02:09.510\nyou can create multiple subnets just\nlike you might do in a building.\n\n41\n00:02:09.510 --> 00:02:13.530\nI might have five floors in a building and\nI give each floor its own subnet.\n\n42\n00:02:13.530 --> 00:02:17.740\nWell, in my virtual environment in Azure I\nmight create five different subnets,\n\n43\n00:02:17.740 --> 00:02:20.610\nnot to represent physical floors,\nbut to represent something else.\n\n44\n00:02:20.610 --> 00:02:23.740\nI might have servers that\nare exposed to the Internet, and\n\n45\n00:02:23.740 --> 00:02:25.480\nservers that are not\nexposed to the Internet.\n\n46\n00:02:25.480 --> 00:02:29.340\nI might use two different subnets for that\nso I can control traffic between them,\n\n47\n00:02:29.340 --> 00:02:33.090\nand isolate out and protect the ones\nI don't want exposed to the Internet.\n\n48\n00:02:33.090 --> 00:02:35.010\nIt's up to us how we wanna deploy it.\n\n49\n00:02:35.010 --> 00:02:37.890\nAt a minimum, you're gonna have\none virtual network, cuz your VMs\n\n50\n00:02:37.890 --> 00:02:42.070\nhave to go somewhere, but you can create\na really complex topology if you want.\n\n51\n00:02:42.070 --> 00:02:44.108\nYou can really lay out some\nneat stuff in there, all right.\n\n52\n00:02:44.108 --> 00:02:47.630\n>> I was gonna say, just because we have\nan isolated network doesn't mean we don't\n\n53\n00:02:47.630 --> 00:02:49.270\nneed connectivity between them.\n\n54\n00:02:49.270 --> 00:02:53.610\nObviously we do isolation for certain\npurposes as you just let us see, but\n\n55\n00:02:53.610 --> 00:02:57.030\nhow do I get them connected, how do I make\nthem talk and use that functionality?\n\n56\n00:02:57.030 --> 00:02:58.810\n>> Yeah, so when we create these,\n\n57\n00:02:58.810 --> 00:03:02.560\nthe virtual networks are actually attached\nto our subscription, to our account.\n\n58\n00:03:02.560 --> 00:03:05.840\nAnd so what Microsoft does is it looks for\nall of the virtual networks that are tied\n\n59\n00:03:05.840 --> 00:03:07.880\nto your account and\nthey route between them.\n\n60\n00:03:07.880 --> 00:03:10.830\nSo they actually allow routing between\nthose systems, and what we'll see later,\n\n61\n00:03:10.830 --> 00:03:12.700\nwe can actually filter that type of stuff.\n\n62\n00:03:12.700 --> 00:03:16.040\nBut you have connectivity so as you\nstart deploying these virtual subnets,\n\n63\n00:03:16.040 --> 00:03:20.130\nyou just make them up willy-nilly, and\nMicrosoft actually attaches them together.\n\n64\n00:03:20.130 --> 00:03:22.630\nAnd you've got this fully\nrouted multi-network\n\n65\n00:03:22.630 --> 00:03:24.260\nenvironment that's pretty powerful.\n\n66\n00:03:24.260 --> 00:03:28.180\nNow, even if I don't have a specific\nneed for multiple networks,\n\n67\n00:03:28.180 --> 00:03:31.210\nthere are times where I'm gonna\nhave to create them anyway.\n\n68\n00:03:31.210 --> 00:03:34.173\nMainly it's gonna center\naround scalability,\n\n69\n00:03:34.173 --> 00:03:36.780\nvirtual networks are limited to 50 VMs.\n\n70\n00:03:36.780 --> 00:03:40.142\nSo I can have 50 virtual machines in one\nof my virtual networks and if I need more,\n\n71\n00:03:40.142 --> 00:03:42.655\nI'm gonna need to create a second\nvirtual network for that.\n\n72\n00:03:42.655 --> 00:03:47.315\nAnd so I may need many subnets to add up\nto get the full amount of virtual machines\n\n73\n00:03:47.315 --> 00:03:48.440\nthat I want.\n\n74\n00:03:48.440 --> 00:03:50.350\nThat can affect things like auto scaling,\n\n75\n00:03:50.350 --> 00:03:53.200\ncuz what if I wanna auto\nscale more than 50 systems?\n\n76\n00:03:53.200 --> 00:03:54.800\nI'm gonna spin up another subnet.\n\n77\n00:03:54.800 --> 00:03:59.030\nFortunately, I can have one virtual\nnetwork with multiple virtual subnets\n\n78\n00:03:59.030 --> 00:04:01.600\ninside of it, which means I can\nauto scale across all of them.\n\n79\n00:04:01.600 --> 00:04:04.900\nAnd you can grow to a very\nlarge network if you wanted,\n\n80\n00:04:04.900 --> 00:04:06.840\nit's pretty impressive\nwhat's available to us.\n\n81\n00:04:06.840 --> 00:04:08.550\nIt's neat how the system works.\n\n82\n00:04:09.640 --> 00:04:12.805\nAll right, so let's talk a little\nbit about how that system works and\n\n83\n00:04:12.805 --> 00:04:14.210\nkinda some of the stuff that's there.\n\n84\n00:04:14.210 --> 00:04:15.890\nWhat we're gonna do is we're\ngonna go into Azure and\n\n85\n00:04:15.890 --> 00:04:17.210\nwe're gonna create a virtual network.\n\n86\n00:04:17.210 --> 00:04:18.940\nAnd I'll just show you on one of mine.\n\n87\n00:04:20.720 --> 00:04:23.300\nLet's spin up an all new\nresource group here so\n\n88\n00:04:23.300 --> 00:04:24.450\nI'm kinda starting fresh and clean.\n\n89\n00:04:24.450 --> 00:04:27.330\nI've got so much stuff deployed\nfrom all the episodes we've done.\n\n90\n00:04:27.330 --> 00:04:31.800\nI'm gonna add a new resource group and\nI'll just call this as like the ITProTV\n\n91\n00:04:31.800 --> 00:04:37.080\nnet demo or something,\nitprotvnetdemo, all right.\n\n92\n00:04:37.080 --> 00:04:41.110\nAnd I'll put it in US East,\nI won't pin it to my dashboard, all right.\n\n93\n00:04:41.110 --> 00:04:42.860\nSo I'm creating a resource group, and\n\n94\n00:04:42.860 --> 00:04:46.300\nmy resource group is not gonna be very\nflashy or exciting or anything like that.\n\n95\n00:04:46.300 --> 00:04:48.560\nIn fact it's not even show up,\nlet me refresh.\n\n96\n00:04:48.560 --> 00:04:50.625\n[LAUGH] And we'll find that one.\n\n97\n00:04:50.625 --> 00:04:54.655\nBut basically when I whip up that resource\ngroup it doesn't have a lot of stuff\n\n98\n00:04:54.655 --> 00:04:58.933\nin it, all right, which might be a bit of\nan over statement cuz it is technically,\n\n99\n00:04:58.933 --> 00:05:00.440\ncompletely empty, right.\n\n100\n00:05:00.440 --> 00:05:03.230\nSo there's absolutely nothing\nin that resource group.\n\n101\n00:05:03.230 --> 00:05:07.680\nSo if I start throwing virtual machines\nin there, some neat things happen.\n\n102\n00:05:07.680 --> 00:05:10.060\nIf I throw a virtual machine\ninto this empty resource group,\n\n103\n00:05:10.060 --> 00:05:14.300\nthat first virtual machine\nwill create a network for me.\n\n104\n00:05:14.300 --> 00:05:17.590\nIt'll create it and all the settings from\nthat network will be determined by that\n\n105\n00:05:17.590 --> 00:05:20.370\nvery first virtual machine,\nit's basically gonna define it for me.\n\n106\n00:05:20.370 --> 00:05:24.500\nBut if I wanna do it ahead of time,\nI can do it, I can come in here and\n\n107\n00:05:24.500 --> 00:05:27.520\ndefine that virtual network and\nreally get this stuff set up.\n\n108\n00:05:27.520 --> 00:05:30.970\nSo I'm just gonna hit add and\nI'm gonna type virtual network so\n\n109\n00:05:30.970 --> 00:05:33.960\nI can find my virtual\nnetworks here in the gallery.\n\n110\n00:05:33.960 --> 00:05:39.070\nAnd once we've got a virtual network we\ncan start to provide our various settings.\n\n111\n00:05:39.070 --> 00:05:41.590\nAnd it's asking if I want to do classic or\nresource manager model,\n\n112\n00:05:41.590 --> 00:05:45.140\nI'll do the resource manager cuz that's\nreally what we wanna use from now on for\n\n113\n00:05:45.140 --> 00:05:46.120\nour new deployments.\n\n114\n00:05:47.160 --> 00:05:49.460\nNow once I choose that,\nit's gonna let me create it, and\n\n115\n00:05:49.460 --> 00:05:52.780\neven though I chose the resource manager\nmodel, it is actually gonna create\n\n116\n00:05:52.780 --> 00:05:56.850\nthe underlying classic model for this too,\nit gives us backward compatibility.\n\n117\n00:05:56.850 --> 00:06:00.580\nBut it's gonna ask me to\nname my virtual network and\n\n118\n00:06:00.580 --> 00:06:02.840\nto pick an address space for it.\n\n119\n00:06:02.840 --> 00:06:07.480\nSo I'm gonna call this my demo-network,\nright.\n\n120\n00:06:07.480 --> 00:06:09.350\nAnd will it let me do hyphens on this one?\n\n121\n00:06:09.350 --> 00:06:13.180\nI always forget, some of them will let you\ndo hyphens, some don't, this one does.\n\n122\n00:06:13.180 --> 00:06:17.210\nSo I'm gonna give it a name, and\nthen I have to pick an address space.\n\n123\n00:06:17.210 --> 00:06:19.940\nNow, don't confuse this with a subnet,\na lot of people see it, and\n\n124\n00:06:19.940 --> 00:06:21.450\nthey think they're creating a subnet.\n\n125\n00:06:21.450 --> 00:06:23.200\nWhat you're creating is\nyour address space, and\n\n126\n00:06:23.200 --> 00:06:25.750\nyou'll create subnets inside of it.\n\n127\n00:06:25.750 --> 00:06:28.990\nSo we're basically establishing\nthis overall address space, and\n\n128\n00:06:28.990 --> 00:06:32.860\nit's picking by default from\na pretty big network here.\n\n129\n00:06:32.860 --> 00:06:35.750\nMine's 10.3,\nI have to be careful not to overlap.\n\n130\n00:06:35.750 --> 00:06:39.980\nSo if I pick 10.2,\nI'm using that in a different environment.\n\n131\n00:06:39.980 --> 00:06:41.964\nSee it was telling me it's\nin my itprotvdemonet,\n\n132\n00:06:41.964 --> 00:06:44.860\nwhich kinda looks like demon net or\nsomething, I don't know, anyhow.\n\n133\n00:06:44.860 --> 00:06:48.941\nSo I'm overlapping with another network,\nif I do 10.1 we can see that ones in\n\n134\n00:06:48.941 --> 00:06:53.143\nitprotv-fileservers, so I've got to make\nsure I pick one that's not in use, but\n\n135\n00:06:53.143 --> 00:06:56.450\nI have a lot of flexibility here\nas far as what I wanna pick.\n\n136\n00:06:56.450 --> 00:06:59.720\nI could even jump to a completely\ndifferent space, for example,\n\n137\n00:06:59.720 --> 00:07:02.240\nI might want to do 172.16.0.0/16,\nlike that, and\n\n138\n00:07:02.240 --> 00:07:08.310\nsee how it updated to reflect it.\n\n139\n00:07:08.310 --> 00:07:13.030\nI'm creating an address space that's\ngot 65,000 IP addresses in it, so\n\n140\n00:07:13.030 --> 00:07:15.380\nyou can pick from different\nnetworks if you want.\n\n141\n00:07:15.380 --> 00:07:19.040\nYou can give it a name, I'm just gonna\ncall mine default, and this is for\n\n142\n00:07:19.040 --> 00:07:20.050\nthe subnet.\n\n143\n00:07:20.050 --> 00:07:24.990\nThe subnet is inside of that virtual\nnetwork and I'm creating the first one.\n\n144\n00:07:24.990 --> 00:07:29.000\nSo I did a /16 here for my address space.\n\n145\n00:07:29.000 --> 00:07:31.760\nFor my subnet I'm gonna pick\nsomething inside of it.\n\n146\n00:07:31.760 --> 00:07:37.859\nSo my default one might be 172.16.0.0/24,\n\n147\n00:07:37.859 --> 00:07:41.472\nright, which is only 256 IPs.\n\n148\n00:07:41.472 --> 00:07:46.083\nAnd so when I look in here, whoops,\nas I make it all disappear, there we go.\n\n149\n00:07:46.083 --> 00:07:51.163\nIf I look in here,\n[LAUGH] we can see 172.16.0.0/24,\n\n150\n00:07:51.163 --> 00:07:57.347\n256 addresses, this address space exists\ninside of the main address space.\n\n151\n00:07:57.347 --> 00:07:59.022\nSo this is just one subnet.\n\n152\n00:07:59.022 --> 00:08:02.495\nAnd I can go on to start creating more\nbased on that and I'll just leave this\n\n153\n00:08:02.495 --> 00:08:05.980\none called default cuz this is where\nmy VMs are gonna go by default.\n\n154\n00:08:05.980 --> 00:08:10.140\nI might create other ones later on\nthat have more specific purposes,\n\n155\n00:08:10.140 --> 00:08:14.075\nlike database servers, file servers,\nwhatever, as I start to divide them up or\n\n156\n00:08:14.075 --> 00:08:16.950\nthey might be part of an auto\nscaling group or whatever.\n\n157\n00:08:16.950 --> 00:08:19.590\n>> So, the server name is more\nlike a label to let you know\n\n158\n00:08:19.590 --> 00:08:21.590\nexactly what you created that subnet for.\n\n159\n00:08:21.590 --> 00:08:23.550\n>> Absolutely yeah,\nyour virtual machines aren't gonna see it.\n\n160\n00:08:23.550 --> 00:08:24.790\nYour end users aren't gonna see it.\n\n161\n00:08:24.790 --> 00:08:26.820\nIt's really just for\nyou to be able to track in this stuff.\n\n162\n00:08:27.840 --> 00:08:29.380\nSo I'll go ahead and create that.\n\n163\n00:08:29.380 --> 00:08:31.371\nAnd it looks like I got an error,\nwhat's my error say?\n\n164\n00:08:31.371 --> 00:08:33.600\nOh, [LAUGH] I kind of forgot to\ntell it which resource group.\n\n165\n00:08:33.600 --> 00:08:36.340\nIt is important to scroll down to see\nall your options that I did not do.\n\n166\n00:08:36.340 --> 00:08:38.010\nI need to give it a resource group.\n\n167\n00:08:38.010 --> 00:08:40.404\nI wanna put this in\nthe resource group I just made,\n\n168\n00:08:40.404 --> 00:08:43.997\nwhich was I've already forgotten\nthe name of it, because we just made it.\n\n169\n00:08:43.997 --> 00:08:46.635\nBut if I look here it will be in my list.\n\n170\n00:08:46.635 --> 00:08:49.240\nitprotvnetdemo, that's\nthe one that we made.\n\n171\n00:08:49.240 --> 00:08:51.890\nSo, I'll go ahead and\nchoose that one and I'll create it and\n\n172\n00:08:51.890 --> 00:08:53.340\nthat's gonna whip it up.\n\n173\n00:08:53.340 --> 00:08:55.360\nI just made a virtual network.\n\n174\n00:08:55.360 --> 00:08:58.420\nAnd the virtual network\ncontained an address space and\n\n175\n00:08:58.420 --> 00:09:02.260\nin that virtual network I made a subnet.\n\n176\n00:09:02.260 --> 00:09:04.040\nSo now I've got something\nthat can function.\n\n177\n00:09:04.040 --> 00:09:06.190\nNow a virtual network\ndoesn't work by itself.\n\n178\n00:09:06.190 --> 00:09:08.380\nYou've gotta have at least one subnet.\n\n179\n00:09:08.380 --> 00:09:11.454\nSo that's why it had me create\nboth of them at the same time.\n\n180\n00:09:11.454 --> 00:09:14.357\nAnd they usually create pretty quick, but\nI've got my little deployment thing here,\n\n181\n00:09:14.357 --> 00:09:16.420\nletting me know that it's\nstill churning along.\n\n182\n00:09:16.420 --> 00:09:20.760\nWhen it's done,\nI'll be able to go to ITProTV Net Demo.\n\n183\n00:09:20.760 --> 00:09:24.510\nAnd I'll see the virtual\nnetwork show up in here, and\n\n184\n00:09:24.510 --> 00:09:26.830\nI'll now start to have\nsubnets inside of it.\n\n185\n00:09:26.830 --> 00:09:28.530\nSo that's kind of how\nwe get these created.\n\n186\n00:09:28.530 --> 00:09:30.330\nIt's pretty easy to get them created.\n\n187\n00:09:30.330 --> 00:09:33.080\nThe main reason to create them ahead\nof time is that you can pick those\n\n188\n00:09:33.080 --> 00:09:34.090\naddress ranges.\n\n189\n00:09:34.090 --> 00:09:36.410\nAnd now I can deploy VMs and\nthey'll be in that range.\n\n190\n00:09:36.410 --> 00:09:37.120\n>> That's awesome.\n\n191\n00:09:37.120 --> 00:09:40.261\nNow Don, is there any limitations that we\nneed to be aware of when it comes to these\n\n192\n00:09:40.261 --> 00:09:42.000\nvirtual networks?\n\n193\n00:09:42.000 --> 00:09:44.220\n>> There's actually a lot of limitations.\n\n194\n00:09:44.220 --> 00:09:46.360\nIt's almost like the Gremlins movies,\n\n195\n00:09:46.360 --> 00:09:48.110\ndon't feed them after midnight and\nall that.\n\n196\n00:09:48.110 --> 00:09:49.162\n>> A whole list of rules, huh?\n\n197\n00:09:49.162 --> 00:09:49.845\n[LAUGH]\n>> Yeah,\n\n198\n00:09:49.845 --> 00:09:52.181\nthere's a lot of limitations\nto these things.\n\n199\n00:09:52.181 --> 00:09:55.010\nFirst off when I whipped it up\nI picked an address space, and\n\n200\n00:09:55.010 --> 00:09:57.180\nthere's only certain address\nspaces that are supported.\n\n201\n00:09:57.180 --> 00:10:02.680\nI did a /16, what used to be a class B,\nand it gave me 65,000 IPs.\n\n202\n00:10:02.680 --> 00:10:08.510\nYou can create a network that is as\nbig as a /8, which is 16 million IPs.\n\n203\n00:10:08.510 --> 00:10:10.640\nSo I could do a 10., 11., whatever.\n\n204\n00:10:10.640 --> 00:10:11.540\nI should do 11.\n\n205\n00:10:11.540 --> 00:10:14.510\nYou really should be using private IPs for\nthese.\n\n206\n00:10:14.510 --> 00:10:19.525\nPrivate IPs are gonna be 10.something or\n172.16 all\n\n207\n00:10:19.525 --> 00:10:25.704\nthe way through 172.31.something or\n192.168.whatever.\n\n208\n00:10:25.704 --> 00:10:28.537\nThose are the,\nthey call them RFC1918 addresses.\n\n209\n00:10:28.537 --> 00:10:29.454\nThey're the private addresses.\n\n210\n00:10:29.454 --> 00:10:31.580\nThose are the ones you're supposed to use.\n\n211\n00:10:31.580 --> 00:10:36.200\nBut if you own an actual public IP block,\nyou can do a support ticket with\n\n212\n00:10:36.200 --> 00:10:40.930\nMicrosoft and transfer it in and you can\nhost that full public IP block in there.\n\n213\n00:10:40.930 --> 00:10:43.430\nI don't anybody who does that,\nbut you certainly can.\n\n214\n00:10:43.430 --> 00:10:47.350\nMicrosoft will give you free IPs, so\nthere's not really a lot of reason to use\n\n215\n00:10:47.350 --> 00:10:52.260\nyour own, but you can if you really, if\nyou just love your IP, as some people do.\n\n216\n00:10:52.260 --> 00:10:55.990\nBut that's one limitation is that\nthe biggest network we can do is a /8.\n\n217\n00:10:55.990 --> 00:11:00.030\nThe smallest network we can do is a /29,\nwhich is pretty small.\n\n218\n00:11:00.030 --> 00:11:04.260\nThe other limitation is that Microsoft is\ngonna steal a few IPs out of that pool.\n\n219\n00:11:04.260 --> 00:11:08.161\nIf I do a /29,\nthat would normally have four addresses.\n\n220\n00:11:08.161 --> 00:11:09.714\nBut I actually only end up with three and\n\n221\n00:11:09.714 --> 00:11:12.020\nthe reason is steal one to\nuse as a default gateway.\n\n222\n00:11:12.020 --> 00:11:15.800\nYour machines need a default gateway\nto get out so Microsoft steals one.\n\n223\n00:11:15.800 --> 00:11:19.280\nOn the larger networks Microsoft\nwill steal multiple IPs.\n\n224\n00:11:19.280 --> 00:11:22.930\nThree or four in some cases because they\nare giving you redundant gateways and\n\n225\n00:11:22.930 --> 00:11:24.890\nother functions that\ntap into that network.\n\n226\n00:11:24.890 --> 00:11:27.260\nSo, you'll see a few\nof your IPs disappear.\n\n227\n00:11:27.260 --> 00:11:30.800\nIt's never actually the full\namount of IPs like you expect.\n\n228\n00:11:30.800 --> 00:11:37.510\nSome of our other limitations that we\nhave, we've got things like the, oh, you\n\n229\n00:11:37.510 --> 00:11:41.010\nsaw when I created that virtual machine\nnetwork that it picked an address space?\n\n230\n00:11:41.010 --> 00:11:44.700\nI can only have one address space\nin a virtual machine network.\n\n231\n00:11:44.700 --> 00:11:48.480\nSo if I wanna have some\n172.16 addresses and\n\n232\n00:11:48.480 --> 00:11:52.670\nsome 10.addresses I'm gonna need to spin\nup another resource group with another\n\n233\n00:11:52.670 --> 00:11:53.930\nvirtual machine network to support that.\n\n234\n00:11:53.930 --> 00:11:56.460\nI can't have them both in the same group.\n\n235\n00:11:57.650 --> 00:12:02.330\nWe've got a couple other things\nlike the resource groups,\n\n236\n00:12:02.330 --> 00:12:05.530\nthe virtual networks don't\nhave to all be in one region.\n\n237\n00:12:05.530 --> 00:12:09.140\nI could have them in more than one region\nand bring them into the resource group.\n\n238\n00:12:09.140 --> 00:12:11.680\nSo I could create more than\none virtual machine network\n\n239\n00:12:11.680 --> 00:12:14.800\nin each different region all\ntied to one resource group so\n\n240\n00:12:14.800 --> 00:12:17.770\nnow it's one big entity that I\ncan manage a little more easily.\n\n241\n00:12:17.770 --> 00:12:19.710\nAnd if we do that,\nif we're doing geo-redundancy,\n\n242\n00:12:19.710 --> 00:12:23.360\nit's nice to be able to kind of\nspread the networks out that way.\n\n243\n00:12:23.360 --> 00:12:27.770\nLet's see, what else do we want\nto be aware of on that one?\n\n244\n00:12:27.770 --> 00:12:30.330\nWe do need to be careful\nwith the IPs that we assign.\n\n245\n00:12:30.330 --> 00:12:33.950\nMicrosoft expect you to be using DHCP for\nthis as they're dynamic.\n\n246\n00:12:33.950 --> 00:12:37.057\nAnd the reason they do that is they want\nyou to be able to fail over from one area\n\n247\n00:12:37.057 --> 00:12:38.048\nor one zone to another.\n\n248\n00:12:38.048 --> 00:12:43.060\nAnd your IPs can change so, one limitation\nwe have is with a lot of these subnets,\n\n249\n00:12:43.060 --> 00:12:46.912\nwe won't see a DNS name which\nis what we're suppose to map to.\n\n250\n00:12:46.912 --> 00:12:49.631\nThe DNS name is actually attached\nto the resource group, and\n\n251\n00:12:49.631 --> 00:12:52.160\nthat's what you're\nsupposed to be mapping to.\n\n252\n00:12:52.160 --> 00:12:55.990\nIf we start assigning static IPs to our\nworkstations inside of these subnets,\n\n253\n00:12:55.990 --> 00:12:56.990\nit can break failover.\n\n254\n00:12:56.990 --> 00:12:59.790\nIt can make it where you're unable to\nfailover if there's an underlying hardware\n\n255\n00:12:59.790 --> 00:13:00.810\nfailure at Microsoft's end.\n\n256\n00:13:00.810 --> 00:13:03.020\nAnd that means if there is a failure,\nyou'll have to wait for\n\n257\n00:13:03.020 --> 00:13:05.120\nthem to fix it before your\nsystem comes back up.\n\n258\n00:13:05.120 --> 00:13:07.290\nSo even though you can assign static IPs,\n\n259\n00:13:07.290 --> 00:13:09.750\nyou really shouldn't for\nredundancy's sake.\n\n260\n00:13:09.750 --> 00:13:13.020\n>> So Don that's obviously\nkind of a dangerous thing to\n\n261\n00:13:13.020 --> 00:13:14.240\nallow you to do it but you shouldn't.\n\n262\n00:13:14.240 --> 00:13:15.400\nDoes it at least warn you,\n\n263\n00:13:15.400 --> 00:13:18.620\ntell you, hey what you're doing is\nprobably not the best practice?\n\n264\n00:13:18.620 --> 00:13:19.290\n>> Yeah you get that.\n\n265\n00:13:19.290 --> 00:13:22.790\nAs soon as you flip that little\nswitch from dynamic to static,\n\n266\n00:13:22.790 --> 00:13:24.730\nit basically pops up\na little warning message and\n\n267\n00:13:24.730 --> 00:13:28.060\nyou'll see it so that's an important thing\nyou'll see any time you deploy a VM.\n\n268\n00:13:28.060 --> 00:13:31.287\nIn fact, while we're talking about it, why\ndon't I show you guys what that's like?\n\n269\n00:13:31.287 --> 00:13:33.670\nIn my scenario here,\nI created a virtual network.\n\n270\n00:13:33.670 --> 00:13:36.670\nAnd it's finished deploying now,\nso I can see that that's done.\n\n271\n00:13:36.670 --> 00:13:39.238\nIf I go into my resource group, and\n\n272\n00:13:39.238 --> 00:13:44.121\nlet me just kinda refresh my screen\na bit here and get this up here.\n\n273\n00:13:44.121 --> 00:13:46.140\nYou gotta wait for\nit to actually show up on your screen.\n\n274\n00:13:46.140 --> 00:13:49.458\nBut if I pull up that ITProTV net demo,\nand I look in here,\n\n275\n00:13:49.458 --> 00:13:54.246\nI'll now have the virtual network,\nthere it is, demo-network that I created.\n\n276\n00:13:54.246 --> 00:13:58.600\nAnd that's got that 172.16\naddress base attached to it.\n\n277\n00:13:58.600 --> 00:14:03.330\nAnd when it comes up, I'm gonna see what's\ninside of it which is not really anything,\n\n278\n00:14:03.330 --> 00:14:05.530\nI haven't attached any VMs to it yet.\n\n279\n00:14:05.530 --> 00:14:09.300\nBut if I go over here to subnets,\nI can see the subnet that we made earlier.\n\n280\n00:14:09.300 --> 00:14:11.010\nI made that default subnet.\n\n281\n00:14:11.010 --> 00:14:14.432\nSo we've got just one subnet in\nplace right now with 256 IPs.\n\n282\n00:14:14.432 --> 00:14:16.710\nI'm gonna add another one.\n\n283\n00:14:16.710 --> 00:14:21.040\nAnd for this one, I might wanna\ncall this one, my database server.\n\n284\n00:14:21.040 --> 00:14:24.840\nSo I'll call this subnet, dbservers.\n\n285\n00:14:24.840 --> 00:14:31.810\nAnd it's gonna pick for\nme a range inside of the address space.\n\n286\n00:14:31.810 --> 00:14:36.996\nRemember, I already took out\n172.16.0.0/24 as my default.\n\n287\n00:14:36.996 --> 00:14:41.371\nSo it just bumped it to the next one,\n172.16.1.0/24.\n\n288\n00:14:41.371 --> 00:14:43.670\nSo it's bound to set aside 256 addresses.\n\n289\n00:14:43.670 --> 00:14:47.930\nBut if I know I'm gonna\nhave 500 database servers,\n\n290\n00:14:47.930 --> 00:14:49.150\nI might wanna pick something bigger.\n\n291\n00:14:49.150 --> 00:14:52.190\nIf I just wanna use a bigger range of IPs,\nI can designate that.\n\n292\n00:14:52.190 --> 00:14:54.621\nSo I might say 172.16.\n\n293\n00:14:54.621 --> 00:14:57.050\nWell I gotta do my\nsubnetting in my head here.\n\n294\n00:14:57.050 --> 00:15:00.110\nWell let's leave this one as a /24,\nthe next one I'll do a little bit larger.\n\n295\n00:15:00.110 --> 00:15:03.639\nSo these are gonna be my database servers\nand I'll go ahead and say OK to that.\n\n296\n00:15:05.620 --> 00:15:07.410\nAnd then, I could add another subnet.\n\n297\n00:15:07.410 --> 00:15:09.640\nMaybe this one will be for\none of my web servers.\n\n298\n00:15:09.640 --> 00:15:14.180\nAnd I know I'm gonna be auto scaling, and\naddresses will get taken and then let go.\n\n299\n00:15:14.180 --> 00:15:18.130\nAnd know that DHCP's running here, and so\nif I have a lease that's eight days long.\n\n300\n00:15:18.130 --> 00:15:19.450\nI might have a machine\nthat's been gone for\n\n301\n00:15:19.450 --> 00:15:21.100\ndays that's still eating up an address.\n\n302\n00:15:21.100 --> 00:15:23.180\nSo, I might need a bigger address pool.\n\n303\n00:15:23.180 --> 00:15:25.996\nSo, I can come in here and\nI can add another subnet.\n\n304\n00:15:25.996 --> 00:15:31.204\nAnd this time I'll add a subnet\nthat I'll just call webservers and\n\n305\n00:15:31.204 --> 00:15:35.860\nit, oh shoot,\nit hasn't finished the other deployment.\n\n306\n00:15:35.860 --> 00:15:36.830\nIt's gonna gripe at me.\n\n307\n00:15:36.830 --> 00:15:39.000\nSee how it's suggesting\nthe same network again,\n\n308\n00:15:39.000 --> 00:15:41.480\nand that's cuz the other network\nhasn't finished deploying.\n\n309\n00:15:41.480 --> 00:15:43.510\nIf I go up here,\nI'll see it's still running.\n\n310\n00:15:43.510 --> 00:15:45.540\nOh, it says it successfully did it.\n\n311\n00:15:45.540 --> 00:15:46.140\nAll right, you know what?\n\n312\n00:15:46.140 --> 00:15:47.850\nI need to cancel that addition.\n\n313\n00:15:47.850 --> 00:15:51.297\nSo let me just cancel that.\n\n314\n00:15:51.297 --> 00:15:53.401\nOtherwise it's not gonna\nrecognize the overlap and\n\n315\n00:15:53.401 --> 00:15:55.131\nthen I'll get a backend error on this one.\n\n316\n00:15:55.131 --> 00:15:57.544\nSo, I'm gonna go ahead and\nhit Add again and\n\n317\n00:15:57.544 --> 00:16:02.058\nwe'll kinda repeat the process, and\nthis time I'm actually seeing what I want.\n\n318\n00:16:02.058 --> 00:16:05.242\nSee how it's incremented to the next one,\n172.16.2?\n\n319\n00:16:05.242 --> 00:16:06.989\nThat's what I wanted, so\nI'm gonna do web servers.\n\n320\n00:16:06.989 --> 00:16:11.215\nBut I want more addresses than this one,\nso I'm gonna make it a /23.\n\n321\n00:16:11.215 --> 00:16:12.570\nAnd see what it just did?\n\n322\n00:16:12.570 --> 00:16:14.890\nIt bumped up to 512 addresses.\n\n323\n00:16:14.890 --> 00:16:18.070\nSo, now, or\nI guess my head's kind of sick.\n\n324\n00:16:18.070 --> 00:16:19.564\nGiant head.\n\n325\n00:16:19.564 --> 00:16:22.083\nBut there we go.\nSo, 172.16.2.0,\n\n326\n00:16:22.083 --> 00:16:27.406\nall the way through 172.16.3.255,\n512 addresses.\n\n327\n00:16:27.406 --> 00:16:31.618\nSo, I'm gonna create this subnet,\nand it's,\n\n328\n00:16:31.618 --> 00:16:36.156\nwhoa, apparently I've\nzoomed out of control now.\n\n329\n00:16:36.156 --> 00:16:37.114\n>> Passing out the dramamine.\n\n330\n00:16:37.114 --> 00:16:41.072\n>> [LAUGH] I zoomed my web browser for\nsome reason.\n\n331\n00:16:41.072 --> 00:16:42.572\nNot quite sure what happened there,\nbut all right.\n\n332\n00:16:42.572 --> 00:16:45.350\nSo I'm gonna go ahead and\ncreate this one, get it put in there.\n\n333\n00:16:45.350 --> 00:16:47.960\nAnd once it's in place,\n\n334\n00:16:47.960 --> 00:16:52.700\nnow I've got multiple subnets that\nare all in one virtual machine network.\n\n335\n00:16:52.700 --> 00:16:57.020\nSo, that really helps out as far as\nbeing able to divide these machines up.\n\n336\n00:16:57.020 --> 00:17:01.040\nI could put web servers in one and\ndatabase servers in the other, and\n\n337\n00:17:01.040 --> 00:17:04.260\nrouting's already enabled,\nMicrosoft takes care of that for me, and\n\n338\n00:17:04.260 --> 00:17:06.210\nwe can come back and\nkinda filter that access.\n\n339\n00:17:06.210 --> 00:17:09.430\nNow, going back to Daniel's question was,\nif I deploy a virtual machine,\n\n340\n00:17:09.430 --> 00:17:11.480\ncan I give it a static IP,\nwhich we know we can.\n\n341\n00:17:11.480 --> 00:17:13.680\nBut we know we shouldn't, right?\n\n342\n00:17:13.680 --> 00:17:15.320\nSo let me show you what that's like.\n\n343\n00:17:15.320 --> 00:17:19.640\nIf I go and do a, let me just\ngo back to my ITProTV net demo.\n\n344\n00:17:19.640 --> 00:17:22.680\nSo here's my net demo resource group.\n\n345\n00:17:22.680 --> 00:17:24.260\nI'm gonna add a virtual machine to it.\n\n346\n00:17:25.480 --> 00:17:30.780\nAnd when I spin it up I'll just pick\nsomething on the Windows server,\n\n347\n00:17:30.780 --> 00:17:31.460\nnothing special.\n\n348\n00:17:33.270 --> 00:17:34.370\nThere we go.\n\n349\n00:17:34.370 --> 00:17:36.440\nAnd when I go to deploy\nthis virtual machine,\n\n350\n00:17:36.440 --> 00:17:40.490\none of the questions it's gonna\nask me is about the network.\n\n351\n00:17:40.490 --> 00:17:42.760\nSo how do I want to configure\nthe network on this?\n\n352\n00:17:42.760 --> 00:17:47.680\nAnd so I'll have to tell it\nto connect to this demo net.\n\n353\n00:17:47.680 --> 00:17:55.010\nAnd if I leave it be, it's gonna go into\nthe, I'll just call this itprotvnet-demo1.\n\n354\n00:17:55.010 --> 00:17:57.887\nIt's gonna go into that default network,\nand\n\n355\n00:17:57.887 --> 00:18:02.989\nthe default network was 172.16.0.0,\nand we got too many characters.\n\n356\n00:18:02.989 --> 00:18:05.031\nThere we go, gotta get under it.\n\n357\n00:18:05.031 --> 00:18:08.500\nComing up with a server name is one of\nthe harder parts of this whole process.\n\n358\n00:18:08.500 --> 00:18:09.500\nThere we go.\n\n359\n00:18:09.500 --> 00:18:10.780\nAnd so as I create it.\n\n360\n00:18:10.780 --> 00:18:12.620\nLet me just kind of zoom\nin down here a bit.\n\n361\n00:18:12.620 --> 00:18:16.580\nSo as I create it, see how it's asking for\nmy resource group.\n\n362\n00:18:16.580 --> 00:18:19.910\nIt's asking for my location,\nit's asking for that basic stuff.\n\n363\n00:18:19.910 --> 00:18:20.840\nAnd I'll say okay to that.\n\n364\n00:18:20.840 --> 00:18:22.840\nBut then it's gonna ask for\nthe virtual machine size.\n\n365\n00:18:22.840 --> 00:18:24.610\nAnd when I get to the optional features,\n\n366\n00:18:24.610 --> 00:18:27.130\nthat's when I'm gonna be able\nto pick from my network.\n\n367\n00:18:27.130 --> 00:18:32.570\nIf I come in here, I can pick to do a,\nlet's just do a DS1 for now.\n\n368\n00:18:34.100 --> 00:18:34.740\nI'll do a DS1.\n\n369\n00:18:34.740 --> 00:18:36.510\nAnd that's gonna get created.\n\n370\n00:18:36.510 --> 00:18:39.390\nNow, it's gonna go into\nthese optional features, and\n\n371\n00:18:39.390 --> 00:18:41.340\none of the optional\nfeatures is the network.\n\n372\n00:18:41.340 --> 00:18:44.720\nAnd you'll see on the network side I've\npicked my virtual machine network.\n\n373\n00:18:44.720 --> 00:18:47.540\nThat's important because the virtual\nmachine network is tied to a region and\n\n374\n00:18:47.540 --> 00:18:50.170\nthis virtual machine's\ngonna be tied to a region.\n\n375\n00:18:50.170 --> 00:18:53.380\nAnd so I'll pick the network and\nthen I can pick the subnet.\n\n376\n00:18:53.380 --> 00:18:56.630\nAnd it's defaulting to, well, the default.\n\n377\n00:18:56.630 --> 00:18:59.690\nBut if I click on it,\neach of my subnets are going to appear.\n\n378\n00:18:59.690 --> 00:19:03.780\nAnd so if this is gonna be a web server,\nI can put it over in the webserver subnet.\n\n379\n00:19:03.780 --> 00:19:09.849\nAnd now it's going to get its an IP\naddress that's 172.16.2.0/23 right?\n\n380\n00:19:09.849 --> 00:19:14.362\nAnd when I scroll down here,\nI'll see the public IP address and so on.\n\n381\n00:19:14.362 --> 00:19:15.740\nAnd under the public IP address,\n\n382\n00:19:15.740 --> 00:19:20.390\nit's just gonna grab a new one cuz I don't\nhave any IP address on this system yet.\n\n383\n00:19:20.390 --> 00:19:22.390\nSo it's gonna create a new one, and\n\n384\n00:19:22.390 --> 00:19:25.770\nso you'll see it's just gonna give it\nthat name and that's fine with me.\n\n385\n00:19:25.770 --> 00:19:30.800\nNow while I'm doing this it's letting\nme set what network I'm gonna be on but\n\n386\n00:19:30.800 --> 00:19:32.300\nsee how I'm not.\n\n387\n00:19:32.300 --> 00:19:34.050\nYou know I did it again.\n\n388\n00:19:34.050 --> 00:19:35.650\nHow am I doing that?\n\n389\n00:19:35.650 --> 00:19:38.060\nThere's some kind of magic short\ncut here in Internet Explorer,\n\n390\n00:19:38.060 --> 00:19:42.080\nbut basically it's gonna\nlet me go through and\n\n391\n00:19:43.300 --> 00:19:48.520\nspecify this but it's not letting\nme pick a static IP is it, right?\n\n392\n00:19:48.520 --> 00:19:52.420\nI can pick the subnet I wanna be on and\nwhen I pick the subnet\n\n393\n00:19:52.420 --> 00:19:55.490\nthat kind of gets me in a range but\nit's not letting me pick a single IP and\n\n394\n00:19:55.490 --> 00:19:59.320\nthat's because Microsoft knows they\ndon't wanna us to do that, right?\n\n395\n00:19:59.320 --> 00:20:03.640\nBut after I create this machine, I'll see\nit's virtual machine NIC and I can go and\n\n396\n00:20:03.640 --> 00:20:07.475\nI can edit the NIC and\nI can set a static IP,\n\n397\n00:20:07.475 --> 00:20:11.510\nand when I do that, that's when I\ncan start to get in to trouble.\n\n398\n00:20:11.510 --> 00:20:14.440\nRight, because now it's tied to\nsomething it's not using DHCP and\n\n399\n00:20:14.440 --> 00:20:17.310\nfail over becomes a bit of a problem and\nwe should be able see that,\n\n400\n00:20:17.310 --> 00:20:20.290\nlet me pull up like a virtual\nmachine I've already deployed.\n\n401\n00:20:20.290 --> 00:20:20.850\nAnd we'll see that.\n\n402\n00:20:20.850 --> 00:20:22.420\nThe other option is from the PowerShell.\n\n403\n00:20:22.420 --> 00:20:22.960\nWhen you deploy it,\n\n404\n00:20:22.960 --> 00:20:26.580\nyou can statically assign an IP from\nthe PowerShell also, is another way.\n\n405\n00:20:26.580 --> 00:20:28.460\nFrom the PowerShell you don't\nget the warning of, hey,\n\n406\n00:20:28.460 --> 00:20:31.240\nthis is something you shouldn't do.\n\n407\n00:20:31.240 --> 00:20:33.860\nBut it is definitely\nsomething that you can.\n\n408\n00:20:33.860 --> 00:20:37.390\nSo I'm taking this virtual machine and\nI'm just pulling up itprotv-web-demo1.\n\n409\n00:20:37.390 --> 00:20:39.840\nThis is one from one of the other shows.\n\n410\n00:20:39.840 --> 00:20:45.320\nAnd if we take a look at it, when you go\ninto its configuration, one of the things\n\n411\n00:20:45.320 --> 00:20:49.850\nwe have are network interfaces, and\nin the network interfaces it's ultimately\n\n412\n00:20:49.850 --> 00:20:53.118\nthe network interfaces that are tied into\nthese various networks that we have.\n\n413\n00:20:53.118 --> 00:20:57.280\nAnd when you edit those interfaces,\nyou can tweak them, and\n\n414\n00:20:57.280 --> 00:21:00.570\nthis is where you can start to\noverride those IP addresses.\n\n415\n00:21:00.570 --> 00:21:03.160\nAnd this one's up and running and so\nit's not gonna let me mess with that one.\n\n416\n00:21:03.160 --> 00:21:07.120\nBut on the right side here I've\ngot properties and IP addresses.\n\n417\n00:21:07.120 --> 00:21:09.170\nAnd if I keep drilling into that,\n\n418\n00:21:09.170 --> 00:21:13.440\neventually I get down into\nhere where I see the sub net.\n\n419\n00:21:13.440 --> 00:21:15.420\nAnd see how the assignment is dynamic?\n\n420\n00:21:15.420 --> 00:21:16.240\nAnd I can flip to static.\n\n421\n00:21:16.240 --> 00:21:18.640\nAnd when I flip to static,\n\n422\n00:21:18.640 --> 00:21:22.000\nthere's actually not much in the way of\nthe warning other then just being purple.\n\n423\n00:21:22.000 --> 00:21:27.540\nAnd then, we can go through, and\nI can say want this one to be 10.0.0.99.\n\n424\n00:21:27.540 --> 00:21:29.410\nAnd now, it's statically assigned.\n\n425\n00:21:29.410 --> 00:21:35.100\nI will have that IP on this machine and\nif I can get to that save button.\n\n426\n00:21:35.100 --> 00:21:38.560\nThere we go I can save it and now it's\nsuccessfully saved and there we go.\n\n427\n00:21:38.560 --> 00:21:43.300\nSo, not a lot in a way of warning\non that other than in Microsoft's\n\n428\n00:21:43.300 --> 00:21:46.930\ndocumentation and stuff telling us\nhey you really shouldn't do that.\n\n429\n00:21:46.930 --> 00:21:51.380\nIn the old portal you actually would\nget like a little like a modal or\n\n430\n00:21:51.380 --> 00:21:55.020\nwhatever warning box that would appear\nthat would let you know not to do that,\n\n431\n00:21:55.020 --> 00:21:57.250\nbut here I was able to do it and\nit didn't even bother me.\n\n432\n00:21:57.250 --> 00:21:59.488\n>> Little red star,\nabout all you got for that one.\n\n433\n00:21:59.488 --> 00:22:04.510\nNow Don that's, it's all well and good,\nbut sometimes just various reasons arise\n\n434\n00:22:04.510 --> 00:22:09.840\nthat maybe I'll need to move a virtual\nmachine from one virtual network to\n\n435\n00:22:09.840 --> 00:22:13.430\nanother, can I do that, and\nif so, how's that done?\n\n436\n00:22:13.430 --> 00:22:14.300\n>> No.\n\n437\n00:22:14.300 --> 00:22:16.875\n>> Well, thank you for\nanswering that Don, so succinctly.\n\n438\n00:22:16.875 --> 00:22:18.280\n[LAUGH]\n>> Yeah, it's kinda tricky.\n\n439\n00:22:18.280 --> 00:22:21.360\nWhen you deploy a virtual machine\nyou pick a virtual machine network.\n\n440\n00:22:21.360 --> 00:22:24.010\nAnd in the network you\nassign it to a subnet.\n\n441\n00:22:24.010 --> 00:22:25.010\nAnd you can actually go and\n\n442\n00:22:25.010 --> 00:22:27.900\nmove it to another subnet in that virtual\nmachine network whenever you want.\n\n443\n00:22:27.900 --> 00:22:29.760\nYou just edit the VM,\nit's right there in the settings.\n\n444\n00:22:29.760 --> 00:22:31.760\nYou move it from subnet to subnet.\n\n445\n00:22:31.760 --> 00:22:34.760\nBut you can't move it to another\nvirtual machine network.\n\n446\n00:22:34.760 --> 00:22:38.890\nSo when you deploy a VM, the VM network\nyou choose, that's what it's married to.\n\n447\n00:22:38.890 --> 00:22:41.490\nThe subnet, no, but the VM network, yes.\n\n448\n00:22:41.490 --> 00:22:45.015\nSo if I wanna move to another VM network,\nI gotta delete the VM,\n\n449\n00:22:45.015 --> 00:22:48.156\nreserve the hard drives,\notherwise you're screwed.\n\n450\n00:22:48.156 --> 00:22:49.322\nReserve the hard drives.\n\n451\n00:22:49.322 --> 00:22:52.195\nDeploy a new VM in the VM\nnetwork you wanna be in and\n\n452\n00:22:52.195 --> 00:22:54.410\nthen reattach those hard drives.\n\n453\n00:22:54.410 --> 00:22:55.850\nRight?\nOr just back it up, restore or\n\n454\n00:22:55.850 --> 00:22:58.190\njust do a redeployment if you've\ngot it scripted or whatever, but\n\n455\n00:22:58.190 --> 00:22:59.170\nthat's what you gotta do.\n\n456\n00:22:59.170 --> 00:23:03.000\nThere's no easy way to move a virtual\nmachine from one VM network to another.\n\n457\n00:23:03.000 --> 00:23:05.550\nThat's one of the bigger\nlimitations we have.\n\n458\n00:23:05.550 --> 00:23:06.150\n>> Cool.\n\n459\n00:23:06.150 --> 00:23:08.950\nNow what about having\nmultiple IP addresses?\n\n460\n00:23:08.950 --> 00:23:11.880\nThat is something that is very\ncommon in a lot of networks.\n\n461\n00:23:11.880 --> 00:23:12.520\nCan I do that?\n\n462\n00:23:12.520 --> 00:23:13.708\nPlease say yes.\n\n463\n00:23:13.708 --> 00:23:14.265\n>> Sort of.\n\n464\n00:23:14.265 --> 00:23:16.530\n[LAUGHTER] This one's in between.\n\n465\n00:23:16.530 --> 00:23:17.155\n>> Better than no.\n\n466\n00:23:17.155 --> 00:23:19.070\n[LAUGHTER]\n>> So\n\n467\n00:23:19.070 --> 00:23:22.490\nwhat if we need a server\nwith 2 network interfaces?\n\n468\n00:23:22.490 --> 00:23:24.900\nOr 3 or 4, or 8 for that matter.\n\n469\n00:23:24.900 --> 00:23:27.270\nWhy would I need multiple\nnetwork interfaces?\n\n470\n00:23:27.270 --> 00:23:30.480\nNormally we do it to\nthings like redundancy or\n\n471\n00:23:30.480 --> 00:23:32.580\nbonding the NICs to get more bandwidth.\n\n472\n00:23:32.580 --> 00:23:34.460\nBut in a virtual environment\nlike Azure you don't need that,\n\n473\n00:23:34.460 --> 00:23:36.100\nMicrosoft's already doing that for you.\n\n474\n00:23:36.100 --> 00:23:38.760\nSo redundancy and\nbandwidth are taken care of.\n\n475\n00:23:38.760 --> 00:23:43.400\nSo the only other real reason why we\nuse those is if we're doing things like\n\n476\n00:23:43.400 --> 00:23:48.090\nfirewalls, routers, proxy servers,\nweb filters, things like that.\n\n477\n00:23:48.090 --> 00:23:52.557\nWell Microsoft has a limitation\nimplemented on these VMs where you are not\n\n478\n00:23:52.557 --> 00:23:54.946\nallowed to route traffic through a VM.\n\n479\n00:23:54.946 --> 00:23:58.165\nTraffic is not allowed\nto pass through the VM.\n\n480\n00:23:58.165 --> 00:24:02.563\nTraffic can stop at the VM Be\nmessed with and then exit the VM,\n\n481\n00:24:02.563 --> 00:24:04.991\nbut it can't just pass through.\n\n482\n00:24:04.991 --> 00:24:07.520\nSo you can't deploy a router,\nyou can't deploy a firewall,\n\n483\n00:24:07.520 --> 00:24:09.590\nyou can't do something like that.\n\n484\n00:24:09.590 --> 00:24:13.620\nBut, if you really want, if you have\na need for a server that has two NICs,\n\n485\n00:24:13.620 --> 00:24:16.410\nlike maybe you're doing a proxy server,\nproxy servers, you terminate at\n\n486\n00:24:16.410 --> 00:24:19.980\nthe server and then the server turns\naround and accesses your request for you.\n\n487\n00:24:19.980 --> 00:24:23.520\nOr maybe you've got some kind of\ndatabase monitoring system and\n\n488\n00:24:23.520 --> 00:24:26.410\nit needs connections to two different\nnetworks for monitoring, right?\n\n489\n00:24:26.410 --> 00:24:27.650\nNow traffic's not passing through it.\n\n490\n00:24:27.650 --> 00:24:30.230\nIt's just one server that happens\nto be connected to two networks.\n\n491\n00:24:30.230 --> 00:24:32.520\nYou can do that, but\nyou gotta do it from the Power Shell.\n\n492\n00:24:32.520 --> 00:24:34.570\nAnd from the Power Shell,\nyou can go in and you can deploy that.\n\n493\n00:24:34.570 --> 00:24:37.100\nAnd I've got an article here\nfrom Microsoft that kinda walks\n\n494\n00:24:37.100 --> 00:24:37.800\nthrough that process.\n\n495\n00:24:37.800 --> 00:24:42.540\nI'll post the link with the show notes,\nbut basically, he runs through the steps\n\n496\n00:24:42.540 --> 00:24:46.830\nof going in and deploying it, and you'll\nsee there's actually quite a lot to it,\n\n497\n00:24:46.830 --> 00:24:49.830\nright, to getting all the networks\ncreated and getting it deployed.\n\n498\n00:24:49.830 --> 00:24:52.750\nBut the key thing to remember is\nif you need more than one NIC,\n\n499\n00:24:52.750 --> 00:24:58.170\nmost Azure VMs don't support it,\nit depends on the size of the VM.\n\n500\n00:24:58.170 --> 00:25:00.480\nSo for example, I deployed a D1 and\n\n501\n00:25:00.480 --> 00:25:04.360\nif you look a D1 has a maximum\nof one network interface.\n\n502\n00:25:04.360 --> 00:25:08.630\nIf I'd done a D2 or a D4,\nI could have two, four, eight interfaces.\n\n503\n00:25:08.630 --> 00:25:12.065\nSo the more interfaces there is, is really\nall dependent on the size of your VM, and\n\n504\n00:25:12.065 --> 00:25:14.339\nafter that,\nyou've gotta do it from the Power Shell.\n\n505\n00:25:14.339 --> 00:25:16.906\nThere is no UI for implementing\nmore than one network interface,\n\n506\n00:25:16.906 --> 00:25:17.941\nat least not yet, right?\n\n507\n00:25:17.941 --> 00:25:19.580\nThe UI's constantly evolving.\n\n508\n00:25:19.580 --> 00:25:20.996\nWell, right now it's\nactually pretty challenging.\n\n509\n00:25:20.996 --> 00:25:25.390\nSo I'll post a link to this article with\nthe show notes, so you guys have it, but\n\n510\n00:25:25.390 --> 00:25:28.350\njust be aware, creating multiple\nNICs is kind of difficult.\n\n511\n00:25:28.350 --> 00:25:32.320\nThe other thing is,\nif I've already deployed a VM like I did,\n\n512\n00:25:32.320 --> 00:25:35.880\nI deployed a VM in that resource\ngroup with only one NIC.\n\n513\n00:25:35.880 --> 00:25:39.670\nEvery virtual machine in that resource\ngroup now can only have one NIC.\n\n514\n00:25:39.670 --> 00:25:43.680\nAll right, if I deploy my first\nvirtual machine with two NICs,\n\n515\n00:25:43.680 --> 00:25:45.640\nevery virtual machine now\nhas to have two NICs.\n\n516\n00:25:45.640 --> 00:25:48.900\nThat's how it works,\nyou either have none either.\n\n517\n00:25:48.900 --> 00:25:52.070\nThey all can be the same so\nif I have a virtual machine with one NIC\n\n518\n00:25:52.070 --> 00:25:54.130\nin there already that's it\nI can don't multiple NICs.\n\n519\n00:25:54.130 --> 00:25:55.592\nI have to create another resource group.\n\n520\n00:25:55.592 --> 00:25:56.350\nRight?\n\n521\n00:25:56.350 --> 00:25:58.490\nOr if I've already done\none with multiple NICs,\n\n522\n00:25:58.490 --> 00:26:00.010\nthen all of my VMs will\nhave multiple NICs.\n\n523\n00:26:00.010 --> 00:26:02.700\nI can just choose whether or\nnot I want to use them.\n\n524\n00:26:02.700 --> 00:26:05.370\nSo, that's another limitation\nwe have to be aware of there.\n\n525\n00:26:05.370 --> 00:26:09.411\nDefinitely kind of restricts the utility\nof multiple interfaces in the Cloud.\n\n526\n00:26:09.411 --> 00:26:13.780\n>> So, I guess if I wanted to do something\nlike deploy a firewall, an IDS, IPS,\n\n527\n00:26:13.780 --> 00:26:18.240\nsomething like that, I need to just\nstick with the traditional methods then.\n\n528\n00:26:18.240 --> 00:26:19.353\n>> You're just out of luck.\n\n529\n00:26:19.353 --> 00:26:20.890\n>> [LAUGH]\n>> We're not completely\n\n530\n00:26:20.890 --> 00:26:21.440\nout of luck, right?\n\n531\n00:26:21.440 --> 00:26:23.150\nMicrosoft actually gave\nus a really cool tool\n\n532\n00:26:23.150 --> 00:26:25.530\nwith the new Resource Manager environment.\n\n533\n00:26:25.530 --> 00:26:28.510\nWe have network security groups, NSGs.\n\n534\n00:26:28.510 --> 00:26:33.760\nA network security group is basically\na software firewall that's attached to our\n\n535\n00:26:33.760 --> 00:26:34.650\nresource group.\n\n536\n00:26:34.650 --> 00:26:35.560\nSo if you're thinking,\n\n537\n00:26:35.560 --> 00:26:38.780\nboy, I really wished I could have\ndeployed a firewall, you don't have to.\n\n538\n00:26:38.780 --> 00:26:40.480\nYou can just use this\nfirewall that's built in.\n\n539\n00:26:40.480 --> 00:26:44.365\nIt doesn't even count as another VM\nrunning so it's a lot more cost effective.\n\n540\n00:26:44.365 --> 00:26:45.900\nLet me show you how they work.\n\n541\n00:26:45.900 --> 00:26:50.590\nIf I go back to my, let's see,\nI've wandered in the depths unknown here,\n\n542\n00:26:50.590 --> 00:26:52.730\nso let me get back to my demo net.\n\n543\n00:26:52.730 --> 00:26:54.980\nSo I'm gonna jump back\nto resource groups and\n\n544\n00:26:54.980 --> 00:26:58.580\nI'll go and\nfind my demo net here, net demo.\n\n545\n00:26:58.580 --> 00:26:59.430\nThere we go.\n\n546\n00:26:59.430 --> 00:27:04.260\nInside of my resource group,\nI can add a network security group.\n\n547\n00:27:04.260 --> 00:27:08.190\nNow in the old cloud service model,\nyou had endpoint security ACL.\n\n548\n00:27:08.190 --> 00:27:10.850\nAccess control list on\nevery single server.\n\n549\n00:27:10.850 --> 00:27:14.640\nBut in the resource group model,\nwe can create a network security group.\n\n550\n00:27:14.640 --> 00:27:17.160\nIn fact, I've already got one right here,\nit's a little shield that was created\n\n551\n00:27:17.160 --> 00:27:19.730\nduring one of the VM deployments,\napparently.\n\n552\n00:27:19.730 --> 00:27:22.990\nIf it hadn't been created for\nme, which this one did.\n\n553\n00:27:22.990 --> 00:27:26.980\nIf it hadn't been created for me, the way\nyou whip one up is you just go up here to\n\n554\n00:27:26.980 --> 00:27:31.660\nAdd, and then in the search box if\nyou just type network security group.\n\n555\n00:27:32.740 --> 00:27:36.510\nSo I'll just do network security group,\nthere it is, then we can go in and\n\n556\n00:27:36.510 --> 00:27:38.710\nwe can add a network security\ngroup to our system.\n\n557\n00:27:38.710 --> 00:27:42.930\nIt's an official Microsoft networking\noption and they basically kind of\n\n558\n00:27:42.930 --> 00:27:46.960\nlay out all this data right here about\nhow it works, and you hit Create.\n\n559\n00:27:46.960 --> 00:27:48.050\nSee how there's no options?\n\n560\n00:27:48.050 --> 00:27:49.450\nIt's not like I gotta do\na bunch of stuff here.\n\n561\n00:27:49.450 --> 00:27:51.140\nIt just creates it and that's that.\n\n562\n00:27:51.140 --> 00:27:52.800\nI've already got one.\n\n563\n00:27:52.800 --> 00:27:55.970\nAnd if you take a look at that\nNetwork Security Group, what it does is it\n\n564\n00:27:55.970 --> 00:28:00.150\nlets you set up filters for basically\nend points, like the end point ACLs.\n\n565\n00:28:00.150 --> 00:28:05.000\nThis is designed to be a drop in\nreplacement for the end point ACLs so when\n\n566\n00:28:05.000 --> 00:28:10.570\nI go into that security group, here we go,\nI can see I've got this IT Pro TV net demo\n\n567\n00:28:10.570 --> 00:28:14.590\nand it's got inbound and outbound security\nrules that I can use to filter with.\n\n568\n00:28:14.590 --> 00:28:18.960\nIt's associated currently with just one\nnetwork interface and no subnets so\n\n569\n00:28:18.960 --> 00:28:20.860\nI'll probably have to\ntweak that a little bit.\n\n570\n00:28:20.860 --> 00:28:24.310\nOver on the side here we can set\nup the network interfaces and\n\n571\n00:28:24.310 --> 00:28:26.242\nsubnets that it's attached to.\n\n572\n00:28:26.242 --> 00:28:30.629\nRemember how I said our subnets Microsoft\nhas automatically going to enable routing\n\n573\n00:28:30.629 --> 00:28:31.440\nbetween them.\n\n574\n00:28:31.440 --> 00:28:33.360\nI may not want that.\n\n575\n00:28:33.360 --> 00:28:35.240\nSo I can create a network security group.\n\n576\n00:28:35.240 --> 00:28:39.590\nAnd I can associate one subnet with it,\ncan add another network security group and\n\n577\n00:28:39.590 --> 00:28:40.680\nadd a different subnet with it.\n\n578\n00:28:40.680 --> 00:28:42.650\nAnd now I can fill between them.\n\n579\n00:28:42.650 --> 00:28:45.005\nBut otherwise I can just\ncome right through here,\n\n580\n00:28:45.005 --> 00:28:46.585\nI can choose my virtual network.\n\n581\n00:28:46.585 --> 00:28:48.580\nThis is my demo network.\n\n582\n00:28:48.580 --> 00:28:53.660\nAnd then inside of my demo network I can\nchoose the subnet this is associated with.\n\n583\n00:28:53.660 --> 00:28:55.340\nMaybe I'll do my web servers here.\n\n584\n00:28:55.340 --> 00:28:59.250\nAnd I'll get that associated,\nAnd we'll hit OK.\n\n585\n00:28:59.250 --> 00:29:04.160\nThat's one of my only frustrations with\nthe new portals, is that sometimes\n\n586\n00:29:04.160 --> 00:29:06.910\nit's an OK button at the bottom,\nsometimes it's a Save button at the top.\n\n587\n00:29:06.910 --> 00:29:08.520\nIt's not terribly consistent.\n\n588\n00:29:08.520 --> 00:29:11.730\nI guess it's whichever\nprogrammer was at work that day.\n\n589\n00:29:11.730 --> 00:29:15.030\nBut now that I've created that,\nI can come back here to my,\n\n590\n00:29:15.030 --> 00:29:19.540\nlet me go back into my Security Group.\n\n591\n00:29:19.540 --> 00:29:22.245\nAnd gonna set it.\n\n592\n00:29:22.245 --> 00:29:24.660\nI'd like it to refresh, please refresh.\n\n593\n00:29:24.660 --> 00:29:25.955\n>> [LAUGH]\n>> Let me close that blade.\n\n594\n00:29:25.955 --> 00:29:26.937\n>> Pretty please with sugar on top.\n\n595\n00:29:26.937 --> 00:29:27.735\n[LAUGH]\n>> And then I, no I didn't say\n\n596\n00:29:27.735 --> 00:29:28.515\nplease loud enough.\n\n597\n00:29:28.515 --> 00:29:29.305\n>> Simon says in there.\n\n598\n00:29:29.305 --> 00:29:30.995\n>> There we go.\nSo now it's gonna load, and so\n\n599\n00:29:30.995 --> 00:29:34.075\nnow it's got that one\nsubnet associated with it.\n\n600\n00:29:34.075 --> 00:29:36.245\nAnd I could go and\nadd more if I needed to, but\n\n601\n00:29:36.245 --> 00:29:39.640\nit's got that subnet in the network\ninterfaces and once we've got that in\n\n602\n00:29:39.640 --> 00:29:43.740\nplace, on the right side you can start to\ncreate your inbound and outbound rules.\n\n603\n00:29:43.740 --> 00:29:47.070\nAnd this is where you can define\nwho is allowed to connect where.\n\n604\n00:29:47.070 --> 00:29:51.375\nAnd it's configure just like those access\ncontrol lists we used to use on endpoints.\n\n605\n00:29:51.375 --> 00:29:52.705\nIt's done the same way here.\n\n606\n00:29:52.705 --> 00:29:54.695\nSo I've got this one big allow rule for\n3389RDP.\n\n607\n00:29:54.695 --> 00:30:00.095\nBut we can come in and tweak that\nbased on source and destination.\n\n608\n00:30:00.095 --> 00:30:03.365\nSo you can control access\nbetween two different VMs and\n\n609\n00:30:03.365 --> 00:30:04.875\nstart to limit and restrict that.\n\n610\n00:30:04.875 --> 00:30:08.305\nThis is a great firewall solution and\nit's built right into Azure so\n\n611\n00:30:08.305 --> 00:30:10.645\nwe don't have to deploy\na machine to do it.\n\n612\n00:30:10.645 --> 00:30:14.020\nNo whipping up a PFMs or\ncheckpoint firewall or\n\n613\n00:30:14.020 --> 00:30:16.470\nwhatever it is that you wanted to\nplay up in Azure, we don't have it.\n\n614\n00:30:16.470 --> 00:30:20.500\nThose are available, you could do that but\nwe don't usually have to.\n\n615\n00:30:20.500 --> 00:30:21.080\n>> No, it's great.\n\n616\n00:30:21.080 --> 00:30:22.090\nI already supplied some,\n\n617\n00:30:22.090 --> 00:30:26.160\nI don't have to provision another\nvirtual machine to make that happen.\n\n618\n00:30:26.160 --> 00:30:30.020\nSo one less computer I gotta worried\nabout, configure or manage and\n\n619\n00:30:30.020 --> 00:30:34.790\nhaving my storage full and\npay for is obviously the big one.\n\n620\n00:30:34.790 --> 00:30:37.890\nNice feature built in for us there, Don,\nis there anything else that we need to go\n\n621\n00:30:37.890 --> 00:30:41.390\nover when it comes to either security or\njust virtual networks in general?\n\n622\n00:30:41.390 --> 00:30:43.750\n>> I think those are the main things,\nwe've got a lot of flexibility,\n\n623\n00:30:43.750 --> 00:30:46.250\nyou can ignore all of this if you want and\njust deploy your VMs and\n\n624\n00:30:46.250 --> 00:30:49.090\nlet Microsoft auto-assign it,\nthat does work.\n\n625\n00:30:49.090 --> 00:30:51.370\nBut if I want multiple VMs that\nare all on the same network,\n\n626\n00:30:51.370 --> 00:30:54.890\nthey can see each other and communicate\ndirectly, this is a great way to do it,\n\n627\n00:30:54.890 --> 00:30:57.520\nwe can customize those subnets,\nget them put in place,\n\n628\n00:30:57.520 --> 00:31:01.500\nuse network security groups to secure\nthem, and you end up with a really great,\n\n629\n00:31:01.500 --> 00:31:06.230\nsuper flexible environment that can fail\nbetween zones in one of the regions, and\n\n630\n00:31:06.230 --> 00:31:09.780\nyou get high availability, and things\nreally work just very, very smoothly.\n\n631\n00:31:09.780 --> 00:31:11.110\nIt's the way that Microsoft intended it.\n\n632\n00:31:11.110 --> 00:31:13.430\nSo definitely something that\nyou wanna take advantage of.\n\n633\n00:31:13.430 --> 00:31:15.180\n>> Awesome.\nWell, thank you so much for\n\n634\n00:31:15.180 --> 00:31:18.560\nshowing us how to work with these\nvirtual networks and get them deployed\n\n635\n00:31:18.560 --> 00:31:22.030\nIt's something that we might actually\nwanna do as we work through Azure.\n\n636\n00:31:22.030 --> 00:31:24.140\nThat being said, we're gonna go ahead and\nclose down the show.\n\n637\n00:31:24.140 --> 00:31:25.660\nThank you guys so much for watching.\n\n638\n00:31:25.660 --> 00:31:29.090\nSigning off for ITPro TV,\nI've been your host Daniel Lowry.\n\n639\n00:31:29.090 --> 00:31:29.840\n>> And I'm Don Pezet.\n\n640\n00:31:29.840 --> 00:31:31.123\n>> We'll see you next time.\n\n641\n00:31:31.123 --> 00:31:34.061\n[MUSIC]\n\n642\n00:31:34.061 --> 00:31:37.020\n[SOUND]\n\n",
          "vimeoId": "148667901"
        },
        {
          "description": "In this episode, Daniel and Don explain how to use Load Balancing to increase productivity, reliability, and redundancy. They start by explaining the concept of load balancing and then move right into using features in Azure to implement load balancing in a variety of ways. Specific Azure load balancing technologies include DNS round-robin, Azure Traffic Manager, and Azure Load-Balanced Sets.",
          "length": "2145",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-3-4-load_balancing-011816-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-3-4-load_balancing-011816-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-3-4-load_balancing-011816-1-sm.jpg",
          "title": "Load Balancing",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.782 --> 00:00:16.151\nAll right, greetings everyone and welcome\nto another great episode of ITProTV.\n\n3\n00:00:16.151 --> 00:00:18.880\nI'm your host Daniel Lowrie and\nin today's episode,\n\n4\n00:00:18.880 --> 00:00:22.230\nwe are continuing now with our\nAzure virtual machine series.\n\n5\n00:00:22.230 --> 00:00:25.860\nAnd joining me in the studio today\nis our good friend Mr. Don Pezet.\n\n6\n00:00:25.860 --> 00:00:27.770\nDon, welcome to the show,\nhow are you doing today, sir?\n\n7\n00:00:27.770 --> 00:00:28.610\n>> I'm doing great, Daniel.\n\n8\n00:00:28.610 --> 00:00:30.010\nThanks for having me back and\n\n9\n00:00:30.010 --> 00:00:33.080\nready to jump right back into the exciting\nworld of Azure virtual machines.\n\n10\n00:00:33.080 --> 00:00:36.040\nAnd today we're gonna be talking about\nsomething that is kind of important.\n\n11\n00:00:36.040 --> 00:00:39.399\nIt is really,\nload balancing inside of Azure.\n\n12\n00:00:39.399 --> 00:00:43.495\nOne of the cool parts about having your\nvirtual machines up in the Azure Cloud\n\n13\n00:00:43.495 --> 00:00:45.287\nis that you can have one, or ten,\n\n14\n00:00:45.287 --> 00:00:48.690\nor a thousand virtual machines up and\nrunning at the same time.\n\n15\n00:00:48.690 --> 00:00:52.070\nAnd if they're all providing\nthe same service, like all,\n\n16\n00:00:52.070 --> 00:00:55.890\nmaybe it's a hundred web servers that\nall have a copy of your web site, we can\n\n17\n00:00:55.890 --> 00:00:59.056\nbalance traffic across them and there's\na lot of different benefits for that.\n\n18\n00:00:59.056 --> 00:01:03.120\nSo we're gonna talk about why we want to\ndo that and how we can do it, cuz believe\n\n19\n00:01:03.120 --> 00:01:05.910\nit or not, there's actually more than\none way we can do that load balancing.\n\n20\n00:01:05.910 --> 00:01:08.990\nSo we'll get a chance to see that in\naction right here in this episode.\n\n21\n00:01:08.990 --> 00:01:11.710\n>> Yeah Don, I'm really looking\nforward to this because my uncle Bill,\n\n22\n00:01:11.710 --> 00:01:15.200\nhe's got a website and he only has one\nserver and it seems to work just fine.\n\n23\n00:01:15.200 --> 00:01:19.190\nI don't see the whole reason, obviously\nthere's reasons when you get a large\n\n24\n00:01:19.190 --> 00:01:22.360\nenough site, traffic starts to\nreally bog the server down, and\n\n25\n00:01:22.360 --> 00:01:24.405\nthat's when we need to add more servers,\nright?\n\n26\n00:01:24.405 --> 00:01:27.502\n>> Absolutely, one of the biggest\nadvantages we have with Azure is the fact\n\n27\n00:01:27.502 --> 00:01:30.445\nthat you get access not to just one\nof Microsoft's data centers, but\n\n28\n00:01:30.445 --> 00:01:31.633\nall of their data centers.\n\n29\n00:01:31.633 --> 00:01:34.949\nAnd you don't just have to\nhave one virtual machine,\n\n30\n00:01:34.949 --> 00:01:40.260\nyou can spin up two or three or a hundred,\nand that's how you get redundancy.\n\n31\n00:01:40.260 --> 00:01:44.370\nSo if I have one web server and it's\nright here in the building with us and\n\n32\n00:01:44.370 --> 00:01:47.960\nwe lose our power or we lose our Internet\nor whatever that one web server is down.\n\n33\n00:01:47.960 --> 00:01:52.130\nAnd it doesn't matter how much RAM it\nhas or how many power supplies it has.\n\n34\n00:01:52.130 --> 00:01:55.080\nIf that server is down,\nit's not working and that's it, right?\n\n35\n00:01:55.080 --> 00:01:57.920\nWell, I could buy a second server and\nstick it right beside the one here on\n\n36\n00:01:57.920 --> 00:02:01.610\nthe floor, well that's good, if one\nserver fails I've got the other one.\n\n37\n00:02:01.610 --> 00:02:04.810\nThat's great, but I could still lose\npower, I could still lose network,\n\n38\n00:02:04.810 --> 00:02:07.510\nI could still lose those things,\nnow both of my servers go off.\n\n39\n00:02:07.510 --> 00:02:11.820\nSo having servers in more than one data\ncenter, that's even better, right?\n\n40\n00:02:11.820 --> 00:02:16.500\nNow I get geo-redundancy,\nif an entire data center fails, big deal,\n\n41\n00:02:16.500 --> 00:02:19.890\nI've got web servers in other data\ncenters, I use web servers as an example.\n\n42\n00:02:19.890 --> 00:02:23.290\nThese could be email servers,\nfile servers, could be databases,\n\n43\n00:02:23.290 --> 00:02:24.470\nwhatever it is you want.\n\n44\n00:02:24.470 --> 00:02:27.260\nWe want to spread them out geographically.\n\n45\n00:02:27.260 --> 00:02:30.840\nThe big problem is, if we go back\nto the old enterprise model, right,\n\n46\n00:02:30.840 --> 00:02:34.120\nso, I worked for a lot of enterprises\nthat were set up the the old way.\n\n47\n00:02:34.120 --> 00:02:37.820\nWhich is where you had a primary data\ncenter and that was where everything was.\n\n48\n00:02:37.820 --> 00:02:40.080\nAnd then you had a disaster recovery\ncenter somewhere else, right?\n\n49\n00:02:40.080 --> 00:02:43.691\nSo your DR, that was a data\ncenter that had servers in it but\n\n50\n00:02:43.691 --> 00:02:46.590\nthey basically sat there\nidling all the time.\n\n51\n00:02:46.590 --> 00:02:49.980\nAnd you were replicating data to them,\nsending your backups over there, and when\n\n52\n00:02:49.980 --> 00:02:55.130\na failure happened, it was like you'd flip\na switch and turn on that DR location.\n\n53\n00:02:55.130 --> 00:02:58.650\nIt would come up and you'd run from over\nthere, but the whole rest of the time,\n\n54\n00:02:58.650 --> 00:02:59.592\nif you never had a failure,\n\n55\n00:02:59.592 --> 00:03:03.710\nthe DR center just sat there,\njust sat there costing you money, right?\n\n56\n00:03:03.710 --> 00:03:06.890\nCosting you electricity or storage or\nwhatever it is you're paying for\n\n57\n00:03:06.890 --> 00:03:09.900\nthat over there, but for\nthe most part, it didn't do anything.\n\n58\n00:03:09.900 --> 00:03:13.760\nAnd so the negative there is you've got\nto pay a lot for this center that you may\n\n59\n00:03:13.760 --> 00:03:16.890\nnever use, if you never have a failure,\nyou're never going to turn it on, right?\n\n60\n00:03:16.890 --> 00:03:20.510\nAnd then kinda failing over and failing\nback was always a challenge, but with\n\n61\n00:03:20.510 --> 00:03:24.040\nAzure, because it's not our data center,\nwe don't have to pay for that, right?\n\n62\n00:03:24.040 --> 00:03:25.930\nWe pay for our virtual machines,\n\n63\n00:03:25.930 --> 00:03:29.290\nI can have my server spread across\nthese locations and have them be hot.\n\n64\n00:03:29.290 --> 00:03:31.770\nHave them up and running.\n\n65\n00:03:31.770 --> 00:03:33.900\nThe problem there is I need\nto take advantage of it,\n\n66\n00:03:33.900 --> 00:03:37.440\nI need to distribute my end users across\nthese different data centers, but\n\n67\n00:03:37.440 --> 00:03:39.680\nI don't want them to know about it, right?\n\n68\n00:03:39.680 --> 00:03:43.090\nWhen I advertise a link, like itpro.tv,\nwhen you go to our website,\n\n69\n00:03:43.090 --> 00:03:45.210\nITProTV, well, it's one website.\n\n70\n00:03:45.210 --> 00:03:47.770\nIt doesn't matter where you are in\nthe world, you go to this one website,\n\n71\n00:03:47.770 --> 00:03:51.210\nI don't say, oh, if you're in the US,\nyou should go to us.itpro.tv.\n\n72\n00:03:51.210 --> 00:03:54.897\nBut if you're in Europe,\nI want you to go to eu.itpro.tv, and oh,\n\n73\n00:03:54.897 --> 00:03:57.260\nif the US one fails,\njust go over to eu.it.\n\n74\n00:03:57.260 --> 00:03:59.940\nYou don't wanna tell\nthat to your end users.\n\n75\n00:03:59.940 --> 00:04:03.195\nSo we need a way to make this invisible,\nmake it transparent where the users don't\n\n76\n00:04:03.195 --> 00:04:06.423\neven know about it but they're being\nbalanced across more than one data center.\n\n77\n00:04:06.423 --> 00:04:10.475\nOr on a minimum, they're just being\nbalanced across more than one virtual\n\n78\n00:04:10.475 --> 00:04:13.625\nmachine so that if one fails,\nthe other can take over, but\n\n79\n00:04:13.625 --> 00:04:15.968\nalso that I can scale\nout as far as as I want.\n\n80\n00:04:15.968 --> 00:04:19.470\nRemember, in Azure,\nyou've got scaling up versus scaling out.\n\n81\n00:04:19.470 --> 00:04:22.590\nScaling up is where I say I got one\nweb server, like Daniel's example,\n\n82\n00:04:22.590 --> 00:04:24.680\nI got one web server and\nit's got eight gigs of RAM.\n\n83\n00:04:24.680 --> 00:04:27.470\nAnd it starts getting a little busy,\nit starts slowing down.\n\n84\n00:04:27.470 --> 00:04:29.160\nSo I bump it up to 16 gigs of RAM, and\n\n85\n00:04:29.160 --> 00:04:33.180\nthen it starts getting a little slow\nagain so I bump it up to 32 gigs of RAM.\n\n86\n00:04:33.180 --> 00:04:36.788\nThat's scaling up, and in Azure you can do\nthat, you can scale up whenever you want,\n\n87\n00:04:36.788 --> 00:04:38.107\nright, but there's a limit.\n\n88\n00:04:38.107 --> 00:04:41.766\nEventually you hit the highest\nlimit available in Azure, and\n\n89\n00:04:41.766 --> 00:04:42.968\nwhat do you do then?\n\n90\n00:04:42.968 --> 00:04:45.370\nYou're out of luck right?\n\n91\n00:04:45.370 --> 00:04:49.350\nSo the secret to using Azure properly\nis not to get to that point, right?\n\n92\n00:04:49.350 --> 00:04:54.481\nDon't bother with scaling up,\nif you started with a lower end instance,\n\n93\n00:04:54.481 --> 00:04:59.635\nmaybe you have a DS 1 or something,\nright, or just a standard instance.\n\n94\n00:04:59.635 --> 00:05:02.285\nWell, when you start\nrunning low on memory,\n\n95\n00:05:02.285 --> 00:05:07.400\ninstead of increasing the memory on that\none server, add a second server, right?\n\n96\n00:05:07.400 --> 00:05:11.340\nThe cost usually works out to being about\nthe same, but now you've got two servers,\n\n97\n00:05:11.340 --> 00:05:13.300\nyou get redundancy in addition to benefit.\n\n98\n00:05:13.300 --> 00:05:16.370\nAnd then when those start to get\na little slow, you add a third one and\n\n99\n00:05:16.370 --> 00:05:18.830\nthen you add a fourth one, you add\na fifth and you grow and grow and grow.\n\n100\n00:05:18.830 --> 00:05:22.270\nAnd you can do it manually like I'm about\nto show you, or you can do a automatic.\n\n101\n00:05:22.270 --> 00:05:24.020\nWe're gonna have\nan episode on autoscaling,\n\n102\n00:05:24.020 --> 00:05:25.120\nwhere it happens automatically.\n\n103\n00:05:25.120 --> 00:05:29.780\nAnd that's neat, because when we grow\nit manually we add these servers, and\n\n104\n00:05:29.780 --> 00:05:32.490\nwe might be responding to\nsome peak time usage, right?\n\n105\n00:05:32.490 --> 00:05:37.180\nMaybe you work for a retail store, and\nthe holiday season comes around and\n\n106\n00:05:37.180 --> 00:05:41.030\nyou know your servers get busy because\nmore people are shopping for Black Friday,\n\n107\n00:05:41.030 --> 00:05:42.690\nChristmas gifts, stuff like that, right?\n\n108\n00:05:42.690 --> 00:05:46.440\nSo you add more servers, well that's fine\nbut then at the end of the holiday season\n\n109\n00:05:46.440 --> 00:05:48.895\nyou have to remember to take those\nservers away, right, that's manual.\n\n110\n00:05:48.895 --> 00:05:51.060\nWith auto-scaling it\nhappens automatically,\n\n111\n00:05:51.060 --> 00:05:52.490\nit automatically adds more servers and\n\n112\n00:05:52.490 --> 00:05:55.670\nwhen they're no longer needed it takes\nthem away, and you save money, right?\n\n113\n00:05:55.670 --> 00:05:59.470\nBut either way,\nfrom the moment you have two servers\n\n114\n00:05:59.470 --> 00:06:03.350\nyou need some way to balance traffic\nacross those, whether it's manual or\n\n115\n00:06:03.350 --> 00:06:06.350\nautomatic, either way you've\ngotta find a way to balance it.\n\n116\n00:06:06.350 --> 00:06:10.570\nAnd in Azure there's actually three\ndifferent ways that we can provide that,\n\n117\n00:06:10.570 --> 00:06:12.260\neach one has it's pros and cons.\n\n118\n00:06:12.260 --> 00:06:16.120\nSome are easy, some are hard,\nsome cost more money, some are free, but\n\n119\n00:06:16.120 --> 00:06:18.770\nyou've gotta decide which one you use and\noftentimes you'll use more than one.\n\n120\n00:06:18.770 --> 00:06:22.570\nSo in this episode I wanna show you each\nof the different mechanisms that we can\n\n121\n00:06:22.570 --> 00:06:24.320\nuse to balance across those.\n\n122\n00:06:24.320 --> 00:06:28.349\n>> Now Don, using your web server idea,\nthe picture you've painted for us,\n\n123\n00:06:28.349 --> 00:06:31.855\nif I've got multiple web servers, I know\nfor a fact that if I've got a network and\n\n124\n00:06:31.855 --> 00:06:34.685\nI've got computers on them,\nthey have to have unique names.\n\n125\n00:06:34.685 --> 00:06:36.135\nSo that's why you were saying, oh,\n\n126\n00:06:36.135 --> 00:06:40.625\nI don't want to tell you to go\nto us.itpro.tv or eu.itpro.tv.\n\n127\n00:06:40.625 --> 00:06:46.540\nEven though those names are probably\nlegit, how do I say, go to itpro.tv and\n\n128\n00:06:46.540 --> 00:06:49.810\nit goes to one and not the other,\nhow does it know how to do that?\n\n129\n00:06:49.810 --> 00:06:54.040\n>> So, the first way is probably\nthe easiest, it kinda ties to what you\n\n130\n00:06:54.040 --> 00:06:57.610\nare saying which is, it's just doing\nwhat's called DNS round robin, right?\n\n131\n00:06:57.610 --> 00:07:00.140\nWhen somebody comes to your web site,\nso we'll take our site for example,\n\n132\n00:07:00.140 --> 00:07:04.080\nwhen you go to itpro.tv,\nyour computer does a DNS lookup.\n\n133\n00:07:04.080 --> 00:07:07.130\nIt does a lookup against the DNS server,\nand the DNS server says oh,\n\n134\n00:07:07.130 --> 00:07:08.160\nyou wanna get to that website?\n\n135\n00:07:08.160 --> 00:07:10.874\nHere's the IP address that you go to,\nand it provides you an IP, and\n\n136\n00:07:10.874 --> 00:07:12.838\nyou go go that address and\nthat's that, right?\n\n137\n00:07:12.838 --> 00:07:14.417\nAnd it's as simple as that.\n\n138\n00:07:14.417 --> 00:07:20.580\nWell, when you query a DNS server, it\ndoesn't have to return just one address.\n\n139\n00:07:20.580 --> 00:07:24.890\nIt could return more than one address,\nand if it returns more than one address,\n\n140\n00:07:24.890 --> 00:07:26.280\nwhat happens, what do you do?\n\n141\n00:07:26.280 --> 00:07:30.370\nWell DNS servers, by default,\ndo what's called round robin, and\n\n142\n00:07:30.370 --> 00:07:33.860\nso let's say I had three IP\naddresses listed for my website.\n\n143\n00:07:33.860 --> 00:07:37.910\nIt might present address number one to me,\nand then Daniel does a lookup and\n\n144\n00:07:37.910 --> 00:07:40.570\nit presents address number two, and\nthen somebody else does a lookup and\n\n145\n00:07:40.570 --> 00:07:43.070\nit presents address number three,\nall right?\n\n146\n00:07:43.070 --> 00:07:47.141\nThat's not a part of Azure, that's just\na part of DNS, that's how DNS works, so\n\n147\n00:07:47.141 --> 00:07:50.927\nDNS round robining is built into the DNS\ninfrastructure that's out there.\n\n148\n00:07:50.927 --> 00:07:54.578\nSo whether you have Azure or whether you\nhave your own hosted DNS or whatever,\n\n149\n00:07:54.578 --> 00:07:58.860\nit doesn't matter, you just add more\nthan one IP address, For your host name.\n\n150\n00:07:58.860 --> 00:08:00.400\nAnd now you get round robining.\n\n151\n00:08:00.400 --> 00:08:03.160\nNow that's cheap,\nit's free for most people.\n\n152\n00:08:03.160 --> 00:08:05.810\nAll your doing is adding IP\naddresses to your DNS entry.\n\n153\n00:08:05.810 --> 00:08:10.550\nIt's super easy, cuz again, you're just\nadding IP addresses, no big deal, right?\n\n154\n00:08:10.550 --> 00:08:13.280\nThere must be something wrong with\nit if it's cheap and easy, right?\n\n155\n00:08:13.280 --> 00:08:17.690\nWell the thing that's wrong with it, is\nthat it can't sense if a failure occurs.\n\n156\n00:08:17.690 --> 00:08:22.200\nSo if I have three servers and I've got\nall three IPs listed from my host name.\n\n157\n00:08:22.200 --> 00:08:24.900\nWhen people do a lookup,\nthey'll get one of those three.\n\n158\n00:08:24.900 --> 00:08:27.260\nBut what if that one host fails?\n\n159\n00:08:27.260 --> 00:08:29.085\nWell, if I have three servers,\n\n160\n00:08:29.085 --> 00:08:32.270\none-third of my visitors are gonna\nget sent to that bad server.\n\n161\n00:08:32.270 --> 00:08:35.510\nAnd then maybe they'll do the lookup again\nand get one of the other servers, and\n\n162\n00:08:35.510 --> 00:08:36.810\nthen they'll come in, right?\n\n163\n00:08:36.810 --> 00:08:41.260\nBut DNS round robining's biggest problem,\nis that it doesn't see a failure.\n\n164\n00:08:41.260 --> 00:08:43.520\nAnd so for\nmost people it's not suitable to use.\n\n165\n00:08:43.520 --> 00:08:44.880\nWell I should correct that.\n\n166\n00:08:44.880 --> 00:08:47.350\nIt's not suitable to use by itself.\n\n167\n00:08:47.350 --> 00:08:50.460\nWe really need to use it in combination\nwith something that's a little more\n\n168\n00:08:50.460 --> 00:08:52.790\nrobust, something that\ncan detect failures.\n\n169\n00:08:52.790 --> 00:08:55.790\nAnd the other two solutions\nwe're gonna talk about, do that.\n\n170\n00:08:55.790 --> 00:08:58.362\nThey detect those failures, and\nso they become very useful.\n\n171\n00:08:59.530 --> 00:09:01.920\nSo DNS round robining,\nthat's the first way.\n\n172\n00:09:01.920 --> 00:09:04.900\nSomebody does a DNS look up, they get more\nthan one IP address, and that's great.\n\n173\n00:09:04.900 --> 00:09:07.420\nIt's not really part of Azure,\nit's just part of your DNS.\n\n174\n00:09:07.420 --> 00:09:11.470\nSo whoever you host DNS with, just look\nup what their instructions are, and\n\n175\n00:09:11.470 --> 00:09:13.440\nthey'll tell you exactly how to set it up,\nit's not a big deal.\n\n176\n00:09:14.530 --> 00:09:16.939\nBut in Azure, we've got two solutions.\n\n177\n00:09:17.970 --> 00:09:21.830\nThere's what's called\nthe Azure Traffic Manager, and\n\n178\n00:09:21.830 --> 00:09:24.260\nthere's load balance sets, all right.\n\n179\n00:09:24.260 --> 00:09:27.570\nFor most people load balance sets are\ngoing to be the main one that you use, but\n\n180\n00:09:27.570 --> 00:09:31.940\nit's got some limitations, and Azure\nTraffic Manager helps to overcome those.\n\n181\n00:09:31.940 --> 00:09:35.560\nSo, in the early the days when\nMicrosoft was rolling out Azure.\n\n182\n00:09:35.560 --> 00:09:38.100\nTheir first solution was\nthe Azure Traffic Manager.\n\n183\n00:09:38.100 --> 00:09:40.170\nAnd the Azure Traffic Manager\nis very powerful.\n\n184\n00:09:40.170 --> 00:09:43.090\nIt's basically a load balancer that\nyou can deploy in your Azure cloud.\n\n185\n00:09:43.090 --> 00:09:45.990\nIt's not there by default,\nyou have to choose to add it.\n\n186\n00:09:45.990 --> 00:09:50.010\nAnd then once you've added it, you can add\nresources to the Azure Traffic Manager,\n\n187\n00:09:50.010 --> 00:09:51.740\nand those resources can be anywhere.\n\n188\n00:09:51.740 --> 00:09:55.770\nThey can be in any of the data centers\nacross the Azure infrastructure.\n\n189\n00:09:55.770 --> 00:09:58.094\nWhen people go to that website,\n\n190\n00:09:58.094 --> 00:10:00.700\nthey'll automatically get\ndistributed across to those.\n\n191\n00:10:00.700 --> 00:10:04.550\nSo the Azure Traffic Manager is really\ncool, really powerful way doing this.\n\n192\n00:10:04.550 --> 00:10:05.580\nIn fact, it's so powerful.\n\n193\n00:10:05.580 --> 00:10:07.750\nIt's a little bit overkill for\na lot of people.\n\n194\n00:10:07.750 --> 00:10:11.980\nBut if I ever hear about somebody doing\nDNS round robining, I always tell them,\n\n195\n00:10:11.980 --> 00:10:13.220\nhey you should turn that off.\n\n196\n00:10:13.220 --> 00:10:16.110\nAnd instead use Azure Traffic Manager,\nit gives you a little more power,\n\n197\n00:10:16.110 --> 00:10:17.072\na little more intelligence.\n\n198\n00:10:17.072 --> 00:10:20.240\nAll right it's not free, it does cost\na little bit but it's not much, actually,\n\n199\n00:10:20.240 --> 00:10:23.130\nit's a,\nit's a real small amount that they charge.\n\n200\n00:10:23.130 --> 00:10:26.090\nBut with Azure Traffic Manager,\nyou can really start\n\n201\n00:10:26.090 --> 00:10:28.492\nto balance between some systems and\nget some really neat things going on.\n\n202\n00:10:28.492 --> 00:10:31.130\nAll right, let me show you how\nAzure Traffic Manager works.\n\n203\n00:10:31.130 --> 00:10:35.000\nNow You can configure the Azure\ntraffic manager in the new portal or\n\n204\n00:10:35.000 --> 00:10:36.260\nthe old portal.\n\n205\n00:10:36.260 --> 00:10:39.670\nBut I'll tell you Microsoft hasn't fully\n\n206\n00:10:39.670 --> 00:10:41.560\nported all this stuff over\nto the new portal yet.\n\n207\n00:10:41.560 --> 00:10:44.310\nSo if you go into the new interface,\nright.\n\n208\n00:10:44.310 --> 00:10:45.490\nSo if I go to the new Azure portal,\n\n209\n00:10:45.490 --> 00:10:48.450\nthis guy right here,\nI can create an Azure traffic manager.\n\n210\n00:10:48.450 --> 00:10:50.170\nIf I go up here to New.\n\n211\n00:10:50.170 --> 00:10:52.900\nAnd I'll just do a search for\nthe word traffic, it normally turns it up.\n\n212\n00:10:53.980 --> 00:10:55.810\nYou'll go in here and you'll see it.\n\n213\n00:10:55.810 --> 00:10:57.570\nSo there it is the Azure Traffic Manager.\n\n214\n00:10:57.570 --> 00:11:01.550\nBut what's going on is Microsoft is\nreplacing the Azure Traffic Manager with\n\n215\n00:11:01.550 --> 00:11:03.330\nsomething new,\nit is the Traffic Manager Profile.\n\n216\n00:11:03.330 --> 00:11:05.150\nIt gives you a little bit\nmore flexibility, and\n\n217\n00:11:05.150 --> 00:11:07.440\nyou can quickly Deploy\nthese based on a profile.\n\n218\n00:11:07.440 --> 00:11:09.060\nBut they're not done with it yet.\n\n219\n00:11:09.060 --> 00:11:10.960\nSo the product's really,\n\n220\n00:11:10.960 --> 00:11:13.410\nmost people still see a little\npreview parenthesis beside it.\n\n221\n00:11:13.410 --> 00:11:15.360\nI don't have that,\ncuz I've accepted my agreements.\n\n222\n00:11:15.360 --> 00:11:17.790\nBut you'll see where it's\nstill kinda of in preview.\n\n223\n00:11:17.790 --> 00:11:19.900\nSo, that's not the way that\nmost people are gonna go.\n\n224\n00:11:19.900 --> 00:11:22.080\nIf you're working with\nthe Azure Traffic Manager,\n\n225\n00:11:22.080 --> 00:11:24.500\nyou'll need to go back to\nthe classic portal to do that.\n\n226\n00:11:24.500 --> 00:11:28.040\nWe're gonna see that time and\ntime again, with load balance sets,\n\n227\n00:11:28.040 --> 00:11:29.580\nwith availability sets.\n\n228\n00:11:29.580 --> 00:11:32.160\nThey just haven't moved all that\nfunctionality into the new portal yet.\n\n229\n00:11:32.160 --> 00:11:35.010\nThey will, you know, if I record\nthis show again a year from now,\n\n230\n00:11:35.010 --> 00:11:36.280\nI'm sure it'll all be in the new portal.\n\n231\n00:11:36.280 --> 00:11:39.500\nBut for right now,\nwe gotta jump back to our classic portal.\n\n232\n00:11:39.500 --> 00:11:44.170\nAnd in the classic portal, all we have\nto do is go down here to New, and\n\n233\n00:11:44.170 --> 00:11:45.155\nnetwork services.\n\n234\n00:11:45.155 --> 00:11:49.620\nAnd right under network services you'll\nsee the Azure Traffic Manager right there.\n\n235\n00:11:49.620 --> 00:11:53.110\nWhen we configure the Azure Traffic\nManager it doesn't have a ton of options.\n\n236\n00:11:53.110 --> 00:11:54.950\nSo I'm going to do a quick create.\n\n237\n00:11:54.950 --> 00:11:56.920\nIt's going to ask me for a name.\n\n238\n00:11:56.920 --> 00:11:58.870\nNow what I'm going to do\nis if this is a website,\n\n239\n00:11:58.870 --> 00:12:02.270\nso this is a donshouseofhardware.com.\n\n240\n00:12:02.270 --> 00:12:03.950\nAnd you want to go to that website.\n\n241\n00:12:03.950 --> 00:12:08.080\nWell I'm gonna take the website and\npoint it to this DNS Prefix.\n\n242\n00:12:08.080 --> 00:12:09.710\nI'm not gonna point it\nto one of my servers.\n\n243\n00:12:09.710 --> 00:12:11.230\nI'm not gonna point it\nto an individual node.\n\n244\n00:12:11.230 --> 00:12:13.100\nI'm gonna point it to this DNS Prefix.\n\n245\n00:12:13.100 --> 00:12:16.030\nI'm gonna point it to\nthe Azure Traffic Manager.\n\n246\n00:12:16.030 --> 00:12:17.970\nSo I'll create an entry here.\n\n247\n00:12:17.970 --> 00:12:23.230\nSo maybe this will be like\nitprotv Website right?\n\n248\n00:12:23.230 --> 00:12:25.870\nSo this will be our website for\nITProTV and\n\n249\n00:12:25.870 --> 00:12:28.590\nit'll be the ITProTV-trafficmanager.net.\n\n250\n00:12:28.590 --> 00:12:32.880\nNow I don't want my end users to go to\nthat either, hey check us out at ITProTV,\n\n251\n00:12:32.880 --> 00:12:36.630\nour website is\nitprotc-website.trafficmanager.net.\n\n252\n00:12:36.630 --> 00:12:39.130\nDoesn't really roll of the tongue right?\n\n253\n00:12:39.130 --> 00:12:41.460\nSo what we're normally gonna\ndo is that ITProTV, or\n\n254\n00:12:41.460 --> 00:12:46.100\nwhatever your domain is, go into DNS,\nand create a c name record.\n\n255\n00:12:46.100 --> 00:12:48.030\nA canonical name or an alias.\n\n256\n00:12:48.030 --> 00:12:50.600\nAnd that way, when people look up ITProTV,\n\n257\n00:12:50.600 --> 00:12:54.210\nit'll see it's an alias of\nitprotv-website.trafficmanager.net.\n\n258\n00:12:54.210 --> 00:12:56.590\nIt will resolve that, and\nit will get an IP address.\n\n259\n00:12:56.590 --> 00:12:58.510\nIt's important that be dynamic.\n\n260\n00:12:58.510 --> 00:13:01.140\nBecause if Microsoft has to fail\nthis over to another data center,\n\n261\n00:13:01.140 --> 00:13:02.780\nor if they have to change the IP,\nfor some reason.\n\n262\n00:13:02.780 --> 00:13:04.050\nWe don't want it married to an IP.\n\n263\n00:13:04.050 --> 00:13:06.190\nWe want it married to a DNS name.\n\n264\n00:13:06.190 --> 00:13:07.710\nSo that's why we'd use a c name for that.\n\n265\n00:13:09.050 --> 00:13:12.690\nNow, the cool part about this,\nis that I can then\n\n266\n00:13:12.690 --> 00:13:16.627\ncustomize the functionality of how\nthe traffic measure is gonna load balance.\n\n267\n00:13:16.627 --> 00:13:19.750\nBy default, it's gonna ballance\nthe traffic across each\n\n268\n00:13:19.750 --> 00:13:23.354\nof the based on one of the three\ndirect methods right here.\n\n269\n00:13:23.354 --> 00:13:27.600\nI've got performance,\nround robin and failover.\n\n270\n00:13:27.600 --> 00:13:28.240\nOkay.\n\n271\n00:13:28.240 --> 00:13:29.840\nPerformance is the default.\n\n272\n00:13:29.840 --> 00:13:31.730\nAnd performance does\nsomething really neat.\n\n273\n00:13:31.730 --> 00:13:34.640\nWhat it does is it looks\nat the client coming in and\n\n274\n00:13:34.640 --> 00:13:37.040\nit does geo location on their IP address.\n\n275\n00:13:37.040 --> 00:13:38.750\nIt says, where is this person?\n\n276\n00:13:38.750 --> 00:13:39.610\nAre they in the U.S.?\n\n277\n00:13:39.610 --> 00:13:40.290\nAre they in Europe?\n\n278\n00:13:40.290 --> 00:13:41.100\nAre they in Australia?\n\n279\n00:13:41.100 --> 00:13:42.260\nWhere are they?\n\n280\n00:13:42.260 --> 00:13:44.800\nAnd then if they're in Australia and\n\n281\n00:13:44.800 --> 00:13:48.950\nwe've got a node in Australia,\nwe'll send them to that node., All right?\n\n282\n00:13:48.950 --> 00:13:50.270\nBut if we don't have a node in Australia,\n\n283\n00:13:50.270 --> 00:13:52.940\nwe'll send them to whichever\nnode is closest to them.\n\n284\n00:13:52.940 --> 00:13:54.980\nWe're gonna base it on performance.\n\n285\n00:13:54.980 --> 00:13:57.370\nSo, it's not even load balancing.\n\n286\n00:13:57.370 --> 00:13:59.172\nI might have ten servers, and\n\n287\n00:13:59.172 --> 00:14:03.079\nfive of those servers might be\nonly at ten percent utilization.\n\n288\n00:14:03.079 --> 00:14:06.270\nI might have another four servers\nthat are at 30% utilization, and\n\n289\n00:14:06.270 --> 00:14:09.650\nI might have one last server\nthat's at 90% utilization.\n\n290\n00:14:09.650 --> 00:14:12.100\nJust because there were more people\nin that area that were close by.\n\n291\n00:14:12.100 --> 00:14:14.740\nBut if the server gets to be too slow,\n\n292\n00:14:14.740 --> 00:14:16.670\nit'll start balancing people\nout to the other ones, right.\n\n293\n00:14:16.670 --> 00:14:20.960\nIt's uneven balancing, it's trying to\ngive people the best experience possible.\n\n294\n00:14:20.960 --> 00:14:21.900\nAnd that's normally the one we want.\n\n295\n00:14:21.900 --> 00:14:26.020\nAll right, so getting people to\nthe server that's close to them.\n\n296\n00:14:27.140 --> 00:14:29.010\nYou'll see I've got round robin also.\n\n297\n00:14:29.010 --> 00:14:32.450\nNow, round robin is just\nwhat I described earlier.\n\n298\n00:14:32.450 --> 00:14:36.080\nIf I have ten servers, the first\nuser to visit will go to server one.\n\n299\n00:14:36.080 --> 00:14:37.630\nThe second user will go to server two.\n\n300\n00:14:37.630 --> 00:14:40.660\nThe third user will go to server three,\nall the way up to user ten.\n\n301\n00:14:40.660 --> 00:14:42.690\nThe 11th user will go back to server one.\n\n302\n00:14:42.690 --> 00:14:45.640\nAnd it will just round robin,\nrotating through each server.\n\n303\n00:14:45.640 --> 00:14:48.030\nSo how's that any better than DNS?\n\n304\n00:14:48.030 --> 00:14:49.640\nHere it does failure detection.\n\n305\n00:14:49.640 --> 00:14:52.860\nIf a node fails,\nit will stop sending traffic to the node.\n\n306\n00:14:52.860 --> 00:14:54.200\nRight, so that's important, right?\n\n307\n00:14:54.200 --> 00:14:57.400\nThat's the big advantage of Azure Traffic\nManager over just using DNS Round Robin.\n\n308\n00:14:57.400 --> 00:15:00.560\nAnd then lastly we got Failover.\n\n309\n00:15:00.560 --> 00:15:04.200\nFailover is that traditional enterprise\nmodel I talked about earlier.\n\n310\n00:15:04.200 --> 00:15:07.910\nYou've got your main production servers,\nthese are the ones you send to normally.\n\n311\n00:15:07.910 --> 00:15:12.760\nAnd only if they fail will you send to\nthe recovery servers, the back ups.\n\n312\n00:15:12.760 --> 00:15:15.030\nOkay.\nAnd that one, I never use this one.\n\n313\n00:15:15.030 --> 00:15:15.590\nRight.\nI mean,\n\n314\n00:15:15.590 --> 00:15:18.430\nif you wanted to make sure that all your\nclients are going to one data center.\n\n315\n00:15:18.430 --> 00:15:21.460\nMaybe you make troubleshooting easier,\nwherever you could to just route but for\n\n316\n00:15:21.460 --> 00:15:22.890\nmost people it's not what we want.\n\n317\n00:15:22.890 --> 00:15:25.660\nI'm gonna stick mine at performance.\n\n318\n00:15:27.390 --> 00:15:30.450\nAll right, once we've got that set,\nyou can go ahead and create it.\n\n319\n00:15:30.450 --> 00:15:32.370\nSo I'll hit my little\ncreate check mark and\n\n320\n00:15:32.370 --> 00:15:34.950\nit's gonna build up that traffic manager.\n\n321\n00:15:34.950 --> 00:15:38.870\nNow, the traffic manager itself is up and\nrunning and\n\n322\n00:15:38.870 --> 00:15:40.420\nready to receive traffic, right?\n\n323\n00:15:40.420 --> 00:15:45.650\nTraffic can be pointed to this URL,\nITProTVWebsite@trafficmanager.net.\n\n324\n00:15:45.650 --> 00:15:47.930\nPeople will hit that and\nthey'll gain access to it.\n\n325\n00:15:47.930 --> 00:15:49.220\nWeill, sort of.\n\n326\n00:15:49.220 --> 00:15:51.285\nNotice how my status is inactive.\n\n327\n00:15:51.285 --> 00:15:54.480\nIt's kind of hard to load balance when\nit doesn't have any loads inside of it.\n\n328\n00:15:54.480 --> 00:15:56.857\nSo there's a little bit more\nconfiguration that we have to do for\n\n329\n00:15:56.857 --> 00:15:57.700\nthe Traffic Manager.\n\n330\n00:15:57.700 --> 00:16:00.482\nIf you click on the Traffic Manager You'll\nget in here, and\n\n331\n00:16:00.482 --> 00:16:04.460\nthis is the little quick tutorial thing,\nlet me just get rid of that.\n\n332\n00:16:04.460 --> 00:16:07.940\nIf I go to my dashboard, it's gonna show\nhow it's really not handling any traffic\n\n333\n00:16:07.940 --> 00:16:10.360\nright now,\nit's inactive cuz it has no nodes.\n\n334\n00:16:10.360 --> 00:16:12.420\nI've gotta add nodes for\nthis thing to work.\n\n335\n00:16:12.420 --> 00:16:14.180\nAnd we do that by going to Endpoints.\n\n336\n00:16:14.180 --> 00:16:18.740\nAnd if I go to my Endpoints, so\nI'm just clicking on Endpoints right now.\n\n337\n00:16:18.740 --> 00:16:23.300\nAnd see how it says, This Traffic Manager\nprofile does not contain any endpoints?\n\n338\n00:16:23.300 --> 00:16:27.950\nI just need to add some endpoints,\nand tell it what I'm gonna add.\n\n339\n00:16:27.950 --> 00:16:31.200\nAnd so, I might have a Cloud Service,\nor a Web app.\n\n340\n00:16:31.200 --> 00:16:34.216\nAnd I'll pick that Cloud Service or\nWeb app right here, and\n\n341\n00:16:34.216 --> 00:16:35.978\nthen I can add the endpoints to it.\n\n342\n00:16:35.978 --> 00:16:39.258\nNow, I don't currently have any cloud\nservices set up because I wanna do load\n\n343\n00:16:39.258 --> 00:16:42.540\nbalanced-sets here in a minute,\nso I'm kinda holding off on that.\n\n344\n00:16:42.540 --> 00:16:44.900\nBut basically you would just check\noff your endpoints right here.\n\n345\n00:16:44.900 --> 00:16:46.760\nIf I had five endpoints or ten endpoints,\n\n346\n00:16:46.760 --> 00:16:48.200\nI'd check them off, and\nthey'd all be added.\n\n347\n00:16:48.200 --> 00:16:51.820\nNow, keep in mind they have to be in the\nsame Cloud Service, but that makes sense.\n\n348\n00:16:51.820 --> 00:16:53.850\nIf I've got five copies\nof the same web server,\n\n349\n00:16:53.850 --> 00:16:55.760\nthey're gonna be in the same\nCloud Service anyway.\n\n350\n00:16:55.760 --> 00:16:59.119\nRight, you wouldn't wanna add servers from\ndifferent Cloud Services because they'd\n\n351\n00:16:59.119 --> 00:17:00.830\nhave different content on them.\n\n352\n00:17:00.830 --> 00:17:02.440\nBut you would check the endpoints.\n\n353\n00:17:02.440 --> 00:17:04.310\nAnd now if those were five web servers,\n\n354\n00:17:04.310 --> 00:17:07.130\nwe're now load balancing\nacross those five web servers.\n\n355\n00:17:07.130 --> 00:17:09.030\nAfter that, Azure Traffic Manager is done.\n\n356\n00:17:09.030 --> 00:17:12.080\nIt's actually one of the easier things to\nconfigure in here and get up and running.\n\n357\n00:17:12.080 --> 00:17:14.490\nBut it's not suitable for\neverybody, right?\n\n358\n00:17:14.490 --> 00:17:17.270\nBut we can add things in,\nand get back into place.\n\n359\n00:17:17.270 --> 00:17:18.580\nIt does have one little\nlimitation up here.\n\n360\n00:17:18.580 --> 00:17:23.890\nNotice how it says, You can select\nonly web app endpoint for each region?\n\n361\n00:17:23.890 --> 00:17:25.880\nSo, what's that about?\n\n362\n00:17:25.880 --> 00:17:29.426\nIf I wanna have servers\nin more than one region,\n\n363\n00:17:29.426 --> 00:17:32.894\ndon't I kinda loose\nthe functionality here?\n\n364\n00:17:32.894 --> 00:17:35.870\nThey're telling me one web\napp endpoint for each region.\n\n365\n00:17:35.870 --> 00:17:38.500\nWell, they're talking about the Web\napp not the Cloud Service, right, so\n\n366\n00:17:38.500 --> 00:17:39.300\nthere's that.\n\n367\n00:17:39.300 --> 00:17:41.550\nBut even with the Web app,\nthere's a way to get around it.\n\n368\n00:17:41.550 --> 00:17:46.060\nWhat you can do is you can create\none Azure Traffic Manager for\n\n369\n00:17:46.060 --> 00:17:47.850\neach region, right?\n\n370\n00:17:47.850 --> 00:17:49.720\nAnd then you can have\nendpoints in that region.\n\n371\n00:17:49.720 --> 00:17:54.590\nAnd then you can use regular\nold-fashioned DNS round-robinning to\n\n372\n00:17:54.590 --> 00:17:58.220\npoint to the various apps beneath it,\nthe various traffic managers beneath it.\n\n373\n00:17:58.220 --> 00:18:00.920\nYou can combine the technologies to create\n\n374\n00:18:00.920 --> 00:18:02.760\na good solution to get\naround that limitation.\n\n375\n00:18:02.760 --> 00:18:05.430\nBut by default they're just telling\nus we've got that limit of the one\n\n376\n00:18:05.430 --> 00:18:06.396\nweb app per region.\n\n377\n00:18:06.396 --> 00:18:09.470\nFor Cloud Service, a Cloud Service\ncan span more than one region,\n\n378\n00:18:09.470 --> 00:18:10.600\nwe don't have that same limitation.\n\n379\n00:18:11.610 --> 00:18:13.530\nBut once that's done,\nI've got the Traffic Manager,\n\n380\n00:18:13.530 --> 00:18:16.110\nI can re-point my DNS to that,\nand I'm now load balancing.\n\n381\n00:18:17.390 --> 00:18:20.120\nNow this method works, it's effective, but\n\n382\n00:18:20.120 --> 00:18:22.660\nI honestly thought they were gonna kill\nit off when they went to the new portal.\n\n383\n00:18:22.660 --> 00:18:25.760\nI didn't think they were gonna continue\nwith the Traffic Manager but they did.\n\n384\n00:18:25.760 --> 00:18:28.000\nThe reason I didn't they they\nwere going to continue with it,\n\n385\n00:18:28.000 --> 00:18:31.410\nis because we have another technology\navailable called a load-balanced set,\n\n386\n00:18:31.410 --> 00:18:34.830\nthat's a little bit easier to work\nwith and a little bit better.\n\n387\n00:18:34.830 --> 00:18:37.730\nAlthough you lose some of\nthe functionality that we had in the old\n\n388\n00:18:37.730 --> 00:18:40.644\nTraffic Manager so I guess there's\nstill a use for both of them.\n\n389\n00:18:40.644 --> 00:18:44.121\n>> Now, Don, is a load balanced-set\njust basically a repackaging the old\n\n390\n00:18:44.121 --> 00:18:47.436\ntechnology, we're doing the same thing,\njust in a different way?\n\n391\n00:18:47.436 --> 00:18:49.802\nOr is this for something different,\n\n392\n00:18:49.802 --> 00:18:53.290\nlike something that\nthe manager here does not do?\n\n393\n00:18:53.290 --> 00:18:56.500\n>> So, it's a little of both, right,\nit's different in a way, right.\n\n394\n00:18:56.500 --> 00:18:58.760\nWhen I created Traffic Manager like this,\n\n395\n00:18:58.760 --> 00:19:03.512\nit's really designed to load balance\nexternal users coming into my resources.\n\n396\n00:19:03.512 --> 00:19:06.918\nA load balanced-set can load balance for\nexternal users, and\n\n397\n00:19:06.918 --> 00:19:09.740\nit can load balance for internal users.\n\n398\n00:19:09.740 --> 00:19:13.460\nI might have a web farm\nwith 20 web servers, and\n\n399\n00:19:13.460 --> 00:19:15.670\non the back end I've\ngot some SQL databases.\n\n400\n00:19:15.670 --> 00:19:19.470\nMaybe I've got three copies of a SQL\ndatabase that are all read-only.\n\n401\n00:19:19.470 --> 00:19:22.536\nAnd I want those 20 web servers to\nread from the 3 SQL servers, but\n\n402\n00:19:22.536 --> 00:19:25.050\nI wannaload balance across them, right?\n\n403\n00:19:25.050 --> 00:19:29.250\nSo I could use a load-balanced set to\nload balance my own internal traffic.\n\n404\n00:19:29.250 --> 00:19:31.720\nThe Azure Traffic Manager's\nnot really designed for that.\n\n405\n00:19:31.720 --> 00:19:34.760\nYou could make it work, but\nit's not really what it's designed for.\n\n406\n00:19:34.760 --> 00:19:36.800\nSo, in a way we get some\nmore functionality, but\n\n407\n00:19:36.800 --> 00:19:38.370\nwe also lose some functionality.\n\n408\n00:19:38.370 --> 00:19:40.352\nWhen I created that Traffic Manager,\nit let me pick.\n\n409\n00:19:40.352 --> 00:19:44.130\nDid I want round-robin, did I want\nperformance, did I want whatever?\n\n410\n00:19:44.130 --> 00:19:48.180\nWhen I do a load-balanced set, we lose\nthat, we don't have that functionality.\n\n411\n00:19:48.180 --> 00:19:51.195\nAnd so what you may end up doing is\nactually combining Traffic Managers and\n\n412\n00:19:51.195 --> 00:19:53.580\nload-balanced sets to really\nget that availability.\n\n413\n00:19:53.580 --> 00:19:55.350\nI try not to do that, but you can.\n\n414\n00:19:55.350 --> 00:19:57.260\nSo we've got that functionality.\n\n415\n00:19:57.260 --> 00:19:58.620\nLet me show you load-balanced sets.\n\n416\n00:19:58.620 --> 00:20:01.860\nAnd I'm gonna stick with\nthe Azure classic portal.\n\n417\n00:20:01.860 --> 00:20:07.950\nBecause in the new portal,\nthe load-balanced sets really,\n\n418\n00:20:07.950 --> 00:20:11.350\nyou can see the configuration but\nyou can't create it or edit it yet.\n\n419\n00:20:11.350 --> 00:20:13.200\nI'm sure they'll roll\nthat feature out soon but\n\n420\n00:20:13.200 --> 00:20:14.600\nit just hasn't made it over there.\n\n421\n00:20:14.600 --> 00:20:16.130\nSo if I wanna create a load-balanced set,\n\n422\n00:20:16.130 --> 00:20:19.710\nthe way it works is I start by\nwhipping up a server, okay?\n\n423\n00:20:19.710 --> 00:20:21.370\nSo, I don't have any virtual\nmachines right now so\n\n424\n00:20:21.370 --> 00:20:22.350\nI'm gonna create one real quick.\n\n425\n00:20:22.350 --> 00:20:25.000\nLet's say that I want a Linux web server.\n\n426\n00:20:25.000 --> 00:20:29.062\nSo I'm gonna come in here and create one\nand it's gonna ask me for a DNS name.\n\n427\n00:20:29.062 --> 00:20:32.412\nAnd if I just go like this,\nit's gonna create the system and\n\n428\n00:20:32.412 --> 00:20:35.760\nit's not gonna set up a load-balanced set,\nright?\n\n429\n00:20:35.760 --> 00:20:41.700\nSo I need to go to From Gallery so that I\nget all of the advanced options, right?\n\n430\n00:20:41.700 --> 00:20:43.210\nAnd I wanna make a Linux server,\n\n431\n00:20:43.210 --> 00:20:46.540\nI'm just gonna do a CentOS server cuz\nthey spin up a little bit faster.\n\n432\n00:20:46.540 --> 00:20:49.780\nYou can do this with Windows, certainly\nMicrosoft's gonna support that, right?\n\n433\n00:20:49.780 --> 00:20:51.770\nBut I'm just doing this one\ncuz it's a little bit faster.\n\n434\n00:20:51.770 --> 00:20:54.830\nSo I'm gonna whip up a Linux server, and\nI'll give it a virtual machine name.\n\n435\n00:20:54.830 --> 00:20:58.220\nSo maybe I'll call this itprotv-web01.\n\n436\n00:20:58.220 --> 00:21:02.810\nAnd I'll pick a size and a username for\nit, let me assign a password to it so\n\n437\n00:21:02.810 --> 00:21:04.480\nI can get logged into it.\n\n438\n00:21:04.480 --> 00:21:06.664\nThat's always a nice thing to have.\n\n439\n00:21:06.664 --> 00:21:13.410\nAnd let me get that punched in, all right,\nand I didn't get a green check mark,\n\n440\n00:21:13.410 --> 00:21:15.330\nI might have typed the password in wrong,\nlet me try that again.\n\n441\n00:21:16.850 --> 00:21:17.561\nOr I'm just not gonna get\na green check mark today.\n\n442\n00:21:17.561 --> 00:21:18.352\n>> Cuz they just don't give you one, yeah.\n\n443\n00:21:18.352 --> 00:21:19.936\n[LAUGH]\n>> Yeah, I'll deal with that.\n\n444\n00:21:19.936 --> 00:21:22.190\nSo I'll punch in my password\nhere to spin the server up.\n\n445\n00:21:22.190 --> 00:21:24.820\nSo far nothing new,\nnothing out of the ordinary, right?\n\n446\n00:21:24.820 --> 00:21:27.530\nI'm gonna create a cloud service for\nthis, right,\n\n447\n00:21:27.530 --> 00:21:29.540\ncuz I don't have any\ncloud services right now.\n\n448\n00:21:29.540 --> 00:21:34.400\nAnd I'll call it itprotv-web, right,\nI want it to be this website for us.\n\n449\n00:21:34.400 --> 00:21:37.811\nI'll pick a region that I want it to\nbe in, I'll stick it in East US 2.\n\n450\n00:21:37.811 --> 00:21:40.868\nI'll pick a storage account,\nwhich I'll just let it generate one,\n\n451\n00:21:40.868 --> 00:21:42.143\nI don't need a special one.\n\n452\n00:21:42.143 --> 00:21:44.352\nAnd then I've got Availability Set,\nall right?\n\n453\n00:21:44.352 --> 00:21:46.562\nNow, availability sets,\nwe're gonna talk about in another episode.\n\n454\n00:21:46.562 --> 00:21:49.740\nIt's easy to confuse those\nwith load-balanced sets.\n\n455\n00:21:49.740 --> 00:21:52.420\nAvailability sets are for\nhardware redundancy.\n\n456\n00:21:52.420 --> 00:21:55.810\nI want network load balancing and\nso I'm gonna skip past that and\n\n457\n00:21:55.810 --> 00:22:00.390\nI'm gonna add an endpoint of\nHTTP cuz this is a web server.\n\n458\n00:22:00.390 --> 00:22:02.870\nSo there we go,\nI've got that one added in.\n\n459\n00:22:02.870 --> 00:22:05.270\nAll right, now I'll just hit Next on that.\n\n460\n00:22:06.360 --> 00:22:09.628\nAnd once that's done, that should be\nall it needs to create the machine.\n\n461\n00:22:09.628 --> 00:22:10.412\nAll right,\n\n462\n00:22:10.412 --> 00:22:13.030\nand then I just get my confirmation\nscreen where they install the agent.\n\n463\n00:22:13.030 --> 00:22:16.590\nI'll finish that up and it's gonna whip\nup that virtual machine right there.\n\n464\n00:22:16.590 --> 00:22:19.311\nSo there's my first virtual\nmachine coming up, itprotv-web01.\n\n465\n00:22:19.311 --> 00:22:24.520\nIt's a website and it's in that\ncloud service called itprotv-web.\n\n466\n00:22:24.520 --> 00:22:28.688\nRight now, the cloud service, that's what\nactually gets the IP address, right, so\n\n467\n00:22:28.688 --> 00:22:29.727\nit gets to public IP.\n\n468\n00:22:29.727 --> 00:22:34.978\nAnd then on this node I created an\nendpoint that was port 80 for web traffic.\n\n469\n00:22:34.978 --> 00:22:38.606\nSo web traffic being sent to the cloud\nservice will get sent to this virtual\n\n470\n00:22:38.606 --> 00:22:39.143\nmachine.\n\n471\n00:22:39.143 --> 00:22:44.023\nNow by default, if I add a second\ninstance to this cloud service,\n\n472\n00:22:44.023 --> 00:22:47.686\nI can't give it an endpoint of port 80,\ncan I?\n\n473\n00:22:47.686 --> 00:22:52.438\nYou can't have two nodes with the same\nport number cuz the cloud service won't\n\n474\n00:22:52.438 --> 00:22:54.470\nknow who to send it to.\n\n475\n00:22:54.470 --> 00:22:58.370\nWell, that's normally true,\nunless you have a load-balanced set.\n\n476\n00:22:58.370 --> 00:23:00.160\nWhen you have a load-balanced set,\n\n477\n00:23:00.160 --> 00:23:03.393\nnow you can actually have more than\none node with the same port, and\n\n478\n00:23:03.393 --> 00:23:06.769\nthe cloud service will know to\nautomatically balance across those.\n\n479\n00:23:06.769 --> 00:23:08.894\nWhich means, to use a load-balanced set,\n\n480\n00:23:08.894 --> 00:23:11.920\nthe virtual machines do need to\nbe in the same cloud service.\n\n481\n00:23:11.920 --> 00:23:15.412\nRight, I can't balance across nodes\nin a different cloud service, but\n\n482\n00:23:15.412 --> 00:23:18.000\notherwise I'm here and\nI'll be able to add these in.\n\n483\n00:23:19.170 --> 00:23:22.025\nNow let's see if the cloud\nservice is already done.\n\n484\n00:23:22.025 --> 00:23:23.055\nStill no cloud service.\n\n485\n00:23:23.055 --> 00:23:23.835\nSo I've gotta wait for\n\n486\n00:23:23.835 --> 00:23:26.005\nthe cloud service to be created\nbefore I can create the second node,\n\n487\n00:23:26.005 --> 00:23:27.415\ncuz it needs to go in there.\n\n488\n00:23:27.415 --> 00:23:29.215\nIf I don't,\nI won't be able to add them in.\n\n489\n00:23:29.215 --> 00:23:31.525\nSo we'll let that one spin up real quick,\nit doesn't take that long.\n\n490\n00:23:31.525 --> 00:23:33.475\nSee it's kinda provisioning it right now.\n\n491\n00:23:33.475 --> 00:23:35.575\nAnd when it's done I'll\nbe able to add more.\n\n492\n00:23:35.575 --> 00:23:40.175\nAnd, once it's done, what I'll need to\ndo is I'll need to go into that node and\n\n493\n00:23:40.175 --> 00:23:41.895\nI'll need to edit its endpoint.\n\n494\n00:23:41.895 --> 00:23:44.950\nSee how I've already got the endpoint\nright there, and I can't edit it.\n\n495\n00:23:44.950 --> 00:23:49.677\nBut when I edit the endpoint, I'll be able\nto attach that to a load-balanced set.\n\n496\n00:23:49.677 --> 00:23:53.450\nSo here on the endpoint screen,\nI see the protocol, I see the port.\n\n497\n00:23:53.450 --> 00:23:57.653\nAnd if I keep scrolling over,\nLoad-balanced set name, all right?\n\n498\n00:23:57.653 --> 00:23:59.145\nAnd when I created that virtual machine,\n\n499\n00:23:59.145 --> 00:24:01.848\nI didn't specify a load-balanced set\nbecause it didn't ask me, right?\n\n500\n00:24:01.848 --> 00:24:05.300\nSo I'm gonna have to come back in\nafter the fact and add that so\n\n501\n00:24:05.300 --> 00:24:07.010\nit knows it's in a load-balanced set.\n\n502\n00:24:07.010 --> 00:24:11.190\nAnd that's what's gonna allow me to\nhave more than one node with the same\n\n503\n00:24:11.190 --> 00:24:13.900\nport on it so that we'll know to be\nable to load balance across those.\n\n504\n00:24:13.900 --> 00:24:18.020\nSo, let's see if we're in business yet,\nthere we go, all right.\n\n505\n00:24:18.020 --> 00:24:20.350\nSo, now I've got a cloud service\nright here, itprotv-web.\n\n506\n00:24:20.350 --> 00:24:22.260\nIt's created, it's running, so it's happy.\n\n507\n00:24:22.260 --> 00:24:27.100\nAnd, if I go back to my virtual machines,\nthis virtual machine's still starting up.\n\n508\n00:24:27.100 --> 00:24:29.880\nBut let's see if it'll let me edit\nthe endpoint while it's starting.\n\n509\n00:24:29.880 --> 00:24:33.750\nIt probably will, or\nwill not, but that's okay.\n\n510\n00:24:33.750 --> 00:24:36.310\nI can go ahead and add the other node\nwhile I'm waiting on this one to finish\n\n511\n00:24:36.310 --> 00:24:38.040\ncuz the cloud service did get created.\n\n512\n00:24:38.040 --> 00:24:41.000\nSo I'm gonna go back to my\nvirtual machines here and\n\n513\n00:24:41.000 --> 00:24:42.668\nI'm just gonna spin up another VM.\n\n514\n00:24:42.668 --> 00:24:45.980\nAnd when you do load balancing,\n\n515\n00:24:45.980 --> 00:24:47.950\nthe virtual machines don't\nhave to be identical.\n\n516\n00:24:47.950 --> 00:24:50.830\nI could have one that's at a higher\npricing tier than another.\n\n517\n00:24:50.830 --> 00:24:52.630\nThey could even be running\ndifferent operating systems.\n\n518\n00:24:52.630 --> 00:24:55.120\nI could have one running Linux and\none running Windows.\n\n519\n00:24:55.120 --> 00:24:56.080\nIt's not a great idea, but\n\n520\n00:24:56.080 --> 00:24:58.880\nyou can do it because all it's\ndoing is balancing the traffic.\n\n521\n00:24:58.880 --> 00:25:01.550\nIt doesn't really care what\nthe servers themselves are doing.\n\n522\n00:25:01.550 --> 00:25:04.460\nSo I'm gonna go in here to my virtual\nmachine, I'll spin up another one.\n\n523\n00:25:05.620 --> 00:25:11.271\nAnd we'll just do another CentOS box,\nand get that thrown in.\n\n524\n00:25:11.271 --> 00:25:15.935\nAnd the first one I did was itprotv-web01,\nI'll just make this itprotv-web02,\n\n525\n00:25:15.935 --> 00:25:17.770\nthis'll be my second web server.\n\n526\n00:25:17.770 --> 00:25:23.240\nStick with most of the defaults here,\nI will set a password for these guys.\n\n527\n00:25:25.550 --> 00:25:28.550\nAll right, and\nthen as I continue to advance on this one,\n\n528\n00:25:28.550 --> 00:25:29.690\nnow I can pick my cloud service.\n\n529\n00:25:29.690 --> 00:25:30.731\nThis is really important,\n\n530\n00:25:30.731 --> 00:25:33.925\nthey need to be in the same cloud service\nif I'm gonna load balance, right?\n\n531\n00:25:33.925 --> 00:25:37.165\nSo I'm gonna take that and\nmake sure I choose itprotv-web.\n\n532\n00:25:37.165 --> 00:25:41.295\nAnd notice how my cloud service\nDNS name can't be changed and\n\n533\n00:25:41.295 --> 00:25:43.815\nmy region can't be changed.\n\n534\n00:25:43.815 --> 00:25:45.795\nI'm locked into a region, right?\n\n535\n00:25:45.795 --> 00:25:49.800\nMy virtual machine's now tied to one\nregion, where's my regional redundancy?\n\n536\n00:25:49.800 --> 00:25:52.610\nWell, I'm load balancing traffic here.\n\n537\n00:25:52.610 --> 00:25:54.460\nI'm not necessarily getting\nredundancy out of it.\n\n538\n00:25:54.460 --> 00:25:56.980\nSo if I want redundancy between regions,\n\n539\n00:25:56.980 --> 00:25:59.540\nwhat I need to do is create availability\nsets in more than one region.\n\n540\n00:25:59.540 --> 00:26:02.120\nAnd then use DNS round-robinning\nto balance across there.\n\n541\n00:26:02.120 --> 00:26:04.430\nJust like I said with Azure Traffic\nManager, it's kinda the same thing.\n\n542\n00:26:04.430 --> 00:26:07.280\nAzure Traffic Manager actually has some\nadditional features where you can go more\n\n543\n00:26:07.280 --> 00:26:10.120\nthan one region in it so I don't\nnecessarily need DNS round robinning.\n\n544\n00:26:10.120 --> 00:26:12.820\nBut you may need to combine more\nthan one of these to get the actual\n\n545\n00:26:12.820 --> 00:26:14.580\nsolution that you want.\n\n546\n00:26:14.580 --> 00:26:19.140\nBut now I can pick my storage account,\nmy availability sets, and my endpoint.\n\n547\n00:26:19.140 --> 00:26:24.425\nAnd if I try and set an endpoint right\nnow, if I try and do like the HTTP port\n\n548\n00:26:24.425 --> 00:26:29.550\n80, well there's already a node\nin here that has HTTP on port 80.\n\n549\n00:26:29.550 --> 00:26:32.127\nAnd so see how I get the big\nwarning right there, right?\n\n550\n00:26:32.127 --> 00:26:36.310\nIt says there's a conflict, let me see\nif I can get that up on the screen here.\n\n551\n00:26:36.310 --> 00:26:39.750\nThe public port, oh come on, there we go.\n\n552\n00:26:39.750 --> 00:26:40.430\nThe public port and\n\n553\n00:26:40.430 --> 00:26:43.990\nthe protocol conflict with another\nendpoint in the current deployment, right?\n\n554\n00:26:43.990 --> 00:26:45.460\nSomebody else is already using port 80 and\n\n555\n00:26:45.460 --> 00:26:50.880\nthat's because I haven't created\nthe load balancing set yet, right?\n\n556\n00:26:50.880 --> 00:26:52.130\nSo let me just delete that for right now.\n\n557\n00:26:52.130 --> 00:26:55.200\nI'll leave it off, I'll add it in a minute\nand then we'll finish that one up.\n\n558\n00:26:55.200 --> 00:26:57.170\nOkay, so\nnow while that one's is deploying,\n\n559\n00:26:57.170 --> 00:26:59.350\nthe other one should be done, and it is.\n\n560\n00:26:59.350 --> 00:27:03.062\nI can see itprotv1 has a running\nstatus now, or itprotv-web01.\n\n561\n00:27:03.062 --> 00:27:06.476\nAnd if I go and edit that thing and\ngo into its endpoints,\n\n562\n00:27:06.476 --> 00:27:08.930\nI can find the HTTP endpoint.\n\n563\n00:27:08.930 --> 00:27:10.690\nAnd I'm just gonna hit Edit\ndown here at the bottom.\n\n564\n00:27:10.690 --> 00:27:14.720\nAnd when I edit that,\nI've got my standard protocol stuff,\n\n565\n00:27:14.720 --> 00:27:16.220\nI don't want to mess with that.\n\n566\n00:27:16.220 --> 00:27:20.710\nBut here I've got Create a Load-Balanced\nSet, and I'm gonna check that.\n\n567\n00:27:20.710 --> 00:27:22.810\nAnd I guess you don't really see it, but\n\n568\n00:27:22.810 --> 00:27:25.050\nwhat happened is a second\npage appeared down here.\n\n569\n00:27:25.050 --> 00:27:27.178\nIt was one page,\nnow it's gone to two pages,\n\n570\n00:27:27.178 --> 00:27:30.820\nbecause it's gonna have to ask me all\nabout the load-balanced set, right?\n\n571\n00:27:30.820 --> 00:27:34.661\nI need to give it a name, so\nI'll call mine itprotv-web-lb, right,\n\n572\n00:27:34.661 --> 00:27:36.820\nit's my load balancer.\n\n573\n00:27:36.820 --> 00:27:40.480\nAnd then it's TCP port 80, right,\nthis is gonna be a web server.\n\n574\n00:27:40.480 --> 00:27:42.870\nAnd then I need a probe interval.\n\n575\n00:27:42.870 --> 00:27:44.350\nWhat's that about?\n\n576\n00:27:44.350 --> 00:27:48.240\nWell, remember the big fault with DNS\nround-robinning, it doesn't check for\n\n577\n00:27:48.240 --> 00:27:49.050\nfailures.\n\n578\n00:27:49.050 --> 00:27:51.695\nA node could be dead and\nit would still send traffic to that node,\n\n579\n00:27:51.695 --> 00:27:54.160\ncuz it's just rotating\nthrough IP addresses.\n\n580\n00:27:54.160 --> 00:27:58.180\nBut with a load-balanced set, it actually\nmakes sure the server's working.\n\n581\n00:27:58.180 --> 00:28:01.500\nSo it's saying, look,\nif this is port 80, I'm gonna connect to\n\n582\n00:28:01.500 --> 00:28:05.190\nthat node on the back end, every so often,\nat port 80 just to see if it works.\n\n583\n00:28:05.190 --> 00:28:07.960\nAnd if it doesn't work,\nI'll stop sending traffic to it, right?\n\n584\n00:28:07.960 --> 00:28:11.610\nNow, it's not logging into your\nwebsite and running a web app.\n\n585\n00:28:11.610 --> 00:28:13.170\nIt's just saying,\ncan I connect on port 80?\n\n586\n00:28:13.170 --> 00:28:16.890\nIt's not the most scientific of\nconnections, but it's usually good enough.\n\n587\n00:28:16.890 --> 00:28:20.040\nIf the server locks up, if the server\ngets overloaded, if it's too busy,\n\n588\n00:28:20.040 --> 00:28:21.646\nit'll stop responding on port 80.\n\n589\n00:28:21.646 --> 00:28:23.790\nAnd that's how we know not to\nsend more traffic there, right?\n\n590\n00:28:23.790 --> 00:28:26.698\nNow the probe interval is\nhow often it's gonna check,\n\n591\n00:28:26.698 --> 00:28:28.604\nthe default is every 15 seconds.\n\n592\n00:28:28.604 --> 00:28:29.880\nAnd the number of probes,\n\n593\n00:28:29.880 --> 00:28:33.710\nthat's how many probes have to fail\nbefore we stop sending it traffic.\n\n594\n00:28:33.710 --> 00:28:37.100\nIf two probes in a row fail,\nthen we'll stop sending it traffic.\n\n595\n00:28:37.100 --> 00:28:39.312\nWell, 2 times 15 is 30 seconds.\n\n596\n00:28:39.312 --> 00:28:43.130\nSo that means a server could be down for\n30 seconds before we stop sending traffic.\n\n597\n00:28:43.130 --> 00:28:46.390\nThat may be fine, or you might wanna\ngo with something shorter, right?\n\n598\n00:28:46.390 --> 00:28:50.450\nI might wanna lower this down\nto 5 seconds and 2 probes.\n\n599\n00:28:50.450 --> 00:28:51.850\nOr I might wanna make it longer, right?\n\n600\n00:28:51.850 --> 00:28:54.399\nIt's up to you to customize that,\nI'll leave mine at the defaults.\n\n601\n00:28:55.950 --> 00:28:58.220\nAll right, and\nwe can just advance forward.\n\n602\n00:28:58.220 --> 00:29:01.937\nAnd now, that little node,\nit didn't really change.\n\n603\n00:29:01.937 --> 00:29:03.996\nIt's still up and running on port 80,\n\n604\n00:29:03.996 --> 00:29:06.930\nthat's pretty much the same as before,\nright.\n\n605\n00:29:06.930 --> 00:29:09.200\nI guess I'm waiting on that\nload-balanced set to create.\n\n606\n00:29:09.200 --> 00:29:11.980\nIt does take a minute,\nsee how it says updating the endpoint?\n\n607\n00:29:11.980 --> 00:29:15.250\nAnd when it's done, the only thing that's\ngonna be different is that I'll see\n\n608\n00:29:15.250 --> 00:29:18.340\nthis column where it says LOAD-BALANCED\nSET NAME will actually be populated and\n\n609\n00:29:18.340 --> 00:29:19.260\nhave some information in it.\n\n610\n00:29:19.260 --> 00:29:21.270\nAnd I'll know that it's load balancing.\n\n611\n00:29:21.270 --> 00:29:22.310\nAnd as soon as that's done,\n\n612\n00:29:22.310 --> 00:29:27.260\nnow I'll be able to have more than one\nvirtual machine in this resource group.\n\n613\n00:29:27.260 --> 00:29:30.800\nOr I'm sorry, in this [LAUGH]\nshoot,\n\n614\n00:29:30.800 --> 00:29:33.850\nI'm switching my newer terminology\ninstead of the old terminology.\n\n615\n00:29:33.850 --> 00:29:38.150\nIn this cloud service, there we go,\nthat can share that port number and\n\n616\n00:29:38.150 --> 00:29:39.760\nbe able to function, right.\n\n617\n00:29:39.760 --> 00:29:43.310\nSo I'm just gonna give that just\na moment here while it finishes\n\n618\n00:29:43.310 --> 00:29:46.900\nmanaging that endpoint, and there we go.\n\n619\n00:29:46.900 --> 00:29:50.020\nAnd so now my LOAD-BALANCED SET NAME\nis populated.\n\n620\n00:29:50.020 --> 00:29:54.740\nAnd I can go to my other server and\ngo to its endpoints, and\n\n621\n00:29:54.740 --> 00:29:56.550\nI'm gonna add an endpoint\non my other server.\n\n622\n00:29:56.550 --> 00:29:59.970\nRemember, I couldn't add HTTP a moment\nago cuz there was a conflict, right.\n\n623\n00:29:59.970 --> 00:30:03.840\nSo I'm gonna add this time, and when I\ngo to add I get a STAND-ALONE ENDPOINT,\n\n624\n00:30:03.840 --> 00:30:08.782\nthat's the default, or ADD AN ENDPOINT\nTO AN EXISTING LOAD-BALANCED SET.\n\n625\n00:30:08.782 --> 00:30:11.740\nI wanna add it to my\nitprotv-web load balancer.\n\n626\n00:30:11.740 --> 00:30:13.108\nAnd on my next page,\nI see the configuration, and\n\n627\n00:30:13.108 --> 00:30:13.864\nsee how I can't change it?\n\n628\n00:30:13.864 --> 00:30:21.271\nI can't edit this stuff because\nit's tied to the load balancer.\n\n629\n00:30:21.271 --> 00:30:25.146\nAnd so I can come up here and\njust give it a name, I'll call mine HTTP.\n\n630\n00:30:25.146 --> 00:30:27.621\nAnd then you can try and reconfigure it,\nbut see [LAUGH] it says,\n\n631\n00:30:27.621 --> 00:30:30.859\nYou can't reconfigure direct server\nreturn for existing load-balanced sets.\n\n632\n00:30:30.859 --> 00:30:32.436\nWhat is that talking about?\n\n633\n00:30:32.436 --> 00:30:36.134\nWell, RECONFIGURE THE LOAD-BALANCED SET\nsays I wanna redefine it,\n\n634\n00:30:36.134 --> 00:30:37.646\nI wanna change these ports.\n\n635\n00:30:37.646 --> 00:30:39.810\nAnd it will go and change the other ones.\n\n636\n00:30:39.810 --> 00:30:43.460\nENABLE DIRECT SERVER RETURN,\nthis is actually a special feature,\n\n637\n00:30:43.460 --> 00:30:44.590\nit's designed for SQL Server.\n\n638\n00:30:44.590 --> 00:30:47.560\nSo if you're not load balancing for\nSQL, I'm load balancing for\n\n639\n00:30:47.560 --> 00:30:49.230\nweb access here, right?\n\n640\n00:30:49.230 --> 00:30:52.371\nIf you're not load-balancing for SQL, this\noption means absolutely nothing to you,\n\n641\n00:30:52.371 --> 00:30:53.312\nyou don't care about it.\n\n642\n00:30:53.312 --> 00:30:55.570\nRight, it only applies to Microsoft SQL.\n\n643\n00:30:55.570 --> 00:30:58.340\nIn Microsoft SQL,\nthe SQL Server native client,\n\n644\n00:30:58.340 --> 00:31:01.860\nit's actually aware of all the nodes\nthat are behind a load-balanced set.\n\n645\n00:31:01.860 --> 00:31:05.238\nNormally your end users have no\nidea there's more than one node.\n\n646\n00:31:05.238 --> 00:31:07.740\nBut with SQL it always wants\nto make sure that you run your\n\n647\n00:31:07.740 --> 00:31:09.360\nquery on the same server.\n\n648\n00:31:09.360 --> 00:31:11.429\nIt doesn't want you jumping\nservers mid-query, right,\n\n649\n00:31:11.429 --> 00:31:13.000\ncuz you can break a transaction.\n\n650\n00:31:13.000 --> 00:31:15.730\nAnd so it always wants to directly\nconnect to the server that it\n\n651\n00:31:15.730 --> 00:31:16.620\ninitially connected to.\n\n652\n00:31:16.620 --> 00:31:20.260\nSo, you might reach out\nto a random server, but\n\n653\n00:31:20.260 --> 00:31:23.350\nthen that server will tell you, hey,\nin the future just connect directly to me.\n\n654\n00:31:23.350 --> 00:31:26.650\nIt's called direct server return,\nand that's really useful with SQL.\n\n655\n00:31:26.650 --> 00:31:30.200\nBut if you're not using SQL,\nyou don't need that and you won't use it.\n\n656\n00:31:30.200 --> 00:31:34.730\nEven if you are using SQL, unless you're\nusing, it's called the SQL Server AlwaysOn\n\n657\n00:31:34.730 --> 00:31:37.630\nfunctionality, if you're not using that,\nthen this still doesn't do anything.\n\n658\n00:31:37.630 --> 00:31:39.060\nSo most people aren't gonna want it.\n\n659\n00:31:39.060 --> 00:31:42.883\nBut you have to turn it on when you\ncreate the availability set, and\n\n660\n00:31:42.883 --> 00:31:43.980\nI didn't do that.\n\n661\n00:31:43.980 --> 00:31:46.791\nAnd since I didn't turn it on, now I don't\neven have the option to turn it on, right,\n\n662\n00:31:46.791 --> 00:31:47.977\nyou had to do it when it was created.\n\n663\n00:31:47.977 --> 00:31:50.614\n>> You get one shot at that monkey and\nif you don't take advantage of it,\n\n664\n00:31:50.614 --> 00:31:51.396\nit's over for you.\n\n665\n00:31:51.396 --> 00:31:53.804\n>> Yep, now the funny part,\nyou might have noticed this Daniel,\n\n666\n00:31:53.804 --> 00:31:56.540\nthere was no check mark for me to\nturn it on earlier, was there, right?\n\n667\n00:31:56.540 --> 00:31:58.350\nYou have to do it from the PowerShell.\n\n668\n00:31:58.350 --> 00:32:00.460\nBut here they give you\na GUI that isn't useful.\n\n669\n00:32:00.460 --> 00:32:03.598\nSo I don't know why they did that,\nexactly.\n\n670\n00:32:03.598 --> 00:32:05.572\nActually, if we reconfigure it, can we-\n>> They had to rub it in your face.\n\n671\n00:32:05.572 --> 00:32:06.951\n>> No, that doesn't work either.\n\n672\n00:32:06.951 --> 00:32:08.377\nAll right, I'm gonna leave that off.\n\n673\n00:32:08.377 --> 00:32:11.830\n[LAUGH] So anyhow,\nI'll just go ahead and finish that up.\n\n674\n00:32:11.830 --> 00:32:14.605\nAnd instead of complaining,\n\n675\n00:32:14.605 --> 00:32:19.494\nit now let me add HTTP Port\n80 in the load balancer.\n\n676\n00:32:19.494 --> 00:32:21.524\nI now have two nodes in this group,\n\n677\n00:32:21.524 --> 00:32:25.376\nin this cloud service,\nthat are both listening on port 80, and\n\n678\n00:32:25.376 --> 00:32:29.460\nanybody who goes to the cloud service\nwill get balanced across them.\n\n679\n00:32:29.460 --> 00:32:36.245\nSo, if I go to my cloud service and I take\nitprorotv-web, It's got a URL, right?\n\n680\n00:32:36.245 --> 00:32:41.795\nIt's got an address that you can browse to\nwhich actually was on the other screen,\n\n681\n00:32:41.795 --> 00:32:44.699\nbut it's here too somewhere buried away.\n\n682\n00:32:44.699 --> 00:32:45.335\nHere we go.\n\n683\n00:32:45.335 --> 00:32:50.252\nSo here is our public virtual IP\naddress for this cloud service, and\n\n684\n00:32:50.252 --> 00:32:54.754\nI can go and I can set itprotv's\nDNS record to point to this IP.\n\n685\n00:32:54.754 --> 00:32:56.749\nAnd anybody going to this IP on port 80,\n\n686\n00:32:56.749 --> 00:32:58.972\nwill get load bounced\nacross those two nodes.\n\n687\n00:32:58.972 --> 00:33:02.089\nOr I could add a third, a forth,\na fifth, I could add ten, a hundred, and\n\n688\n00:33:02.089 --> 00:33:05.229\npeople would get load bounced across\nall of those and access the website.\n\n689\n00:33:05.229 --> 00:33:07.921\nAnd if one of them went down it\nwould get yanked from the pool.\n\n690\n00:33:07.921 --> 00:33:13.532\nAnd as I look here at my input end point,\nsee how I've got Itprotv-web01 and\n\n691\n00:33:13.532 --> 00:33:17.029\nitprotv-web02, both on port 80, right?\n\n692\n00:33:17.029 --> 00:33:20.880\nSo I've got two of them listing on\nport 80 and they're up and healthy.\n\n693\n00:33:20.880 --> 00:33:26.917\nItprotv-web01 has SSH enabled on port\n22 but itprotv-web02 couldn't use that.\n\n694\n00:33:26.917 --> 00:33:30.672\nThe port was already taken, and so,\nit randomly generated a port for\n\n695\n00:33:30.672 --> 00:33:32.112\nSSH 62343, right?\n\n696\n00:33:32.112 --> 00:33:33.839\nThat's what normally happens,\nthat's not load balancing.\n\n697\n00:33:33.839 --> 00:33:35.799\nWe need to connect\nthe individual node there.\n\n698\n00:33:35.799 --> 00:33:39.754\nPort 80 is being load balanced and\nnow we're in business, right?\n\n699\n00:33:39.754 --> 00:33:41.809\nSo, pretty neat,\nnot that hard to get setup,\n\n700\n00:33:41.809 --> 00:33:43.824\nyou just kinda through\nremember where to go.\n\n701\n00:33:43.824 --> 00:33:46.561\nAnd this functionality will get put\ninto the new Azure portal eventually and\n\n702\n00:33:46.561 --> 00:33:48.028\nthen you'll be able to do it from there.\n\n703\n00:33:48.028 --> 00:33:51.400\nBut for right now,\nit's better to cover it here.\n\n704\n00:33:51.400 --> 00:33:52.688\nIf you wanna do in the new portal,\n\n705\n00:33:52.688 --> 00:33:55.090\nwell you might want to do it for\nresource manager type groups.\n\n706\n00:33:55.090 --> 00:33:58.200\nAnd for that you'll end up having to\ngo to the PowerShell, at least for now.\n\n707\n00:33:58.200 --> 00:34:00.540\nThey'll work it into the UI eventually.\n\n708\n00:34:00.540 --> 00:34:04.013\nBut once it's up and running, it's up,\nit's happy, it's ready to go.\n\n709\n00:34:04.013 --> 00:34:04.951\nNow we're load balancing.\n\n710\n00:34:04.951 --> 00:34:07.305\n>> Obviously there's a lot of\nfunctionality, a lot of power,\n\n711\n00:34:07.305 --> 00:34:09.160\nthat is involved with load balancing.\n\n712\n00:34:09.160 --> 00:34:13.940\nAs your system, your environment grows and\nstarts needing to have\n\n713\n00:34:13.940 --> 00:34:16.920\naccess to more resources,\nload balance is a great way to go.\n\n714\n00:34:16.920 --> 00:34:20.695\nSo when Uncle Bill and his website for,\nhe sells beards for dogs, so\n\n715\n00:34:20.695 --> 00:34:24.086\nobviously that's up and\ncoming, that's blowing up soon.\n\n716\n00:34:24.086 --> 00:34:24.945\n>> [LAUGH]\n>> So\n\n717\n00:34:24.945 --> 00:34:27.026\nhe's gonna need these functionalities.\n\n718\n00:34:27.026 --> 00:34:28.893\n>> Yeah, have him call me\nwhen it's beards for cats.\n\n719\n00:34:28.893 --> 00:34:29.738\n>> Yeah, that's right.\n\n720\n00:34:29.738 --> 00:34:30.467\nAllen's a cat guy.\n\n721\n00:34:30.467 --> 00:34:31.388\n>> That's up and coming in my world.\n\n722\n00:34:31.388 --> 00:34:34.116\n>> [LAUGH]\n>> So anyhow, load balancing,\n\n723\n00:34:34.116 --> 00:34:35.727\nit's pretty easy to turn on.\n\n724\n00:34:35.727 --> 00:34:37.583\nIt doesn't cost a bunch of extra money or\nanything.\n\n725\n00:34:37.583 --> 00:34:39.218\nIt's traffic you're getting anyway, right?\n\n726\n00:34:39.218 --> 00:34:40.644\nSo this factors into that.\n\n727\n00:34:40.644 --> 00:34:43.311\nIt is tied to the cloud service, so\na couple little gotchas in there with\n\n728\n00:34:43.311 --> 00:34:45.900\nthe configuration, but\nit's definitely something you wanna use.\n\n729\n00:34:45.900 --> 00:34:50.049\nAnd if you've got one server with 8 gigs\nof RAM, consider going to two servers with\n\n730\n00:34:50.049 --> 00:34:53.920\n4 gigs of RAM because at a minimum,\nyou wouldn't get anymore performance.\n\n731\n00:34:53.920 --> 00:34:58.216\nSame performance as you got before but\nnow you get some added resiliency.\n\n732\n00:34:58.216 --> 00:35:00.863\nIf one of those nodes goes down,\nat least the other one's still up,\n\n733\n00:35:00.863 --> 00:35:02.170\nyou just run a little bit slower.\n\n734\n00:35:02.170 --> 00:35:03.381\nSo big advantages there.\n\n735\n00:35:03.381 --> 00:35:05.576\nThis is definitely something\nyou'll make use of, and\n\n736\n00:35:05.576 --> 00:35:07.924\none of the big advantages of\nhaving your servers in Azure.\n\n737\n00:35:07.924 --> 00:35:09.229\n>> Awesome.\nWell thank you so much for\n\n738\n00:35:09.229 --> 00:35:10.241\nexplaining this to us Don.\n\n739\n00:35:10.241 --> 00:35:15.195\nIt's obviously something that we are Going\nto eventually need to use if not already\n\n740\n00:35:15.195 --> 00:35:16.480\nand into that water.\n\n741\n00:35:16.480 --> 00:35:18.290\nSo, take advantage of this episode,\n\n742\n00:35:18.290 --> 00:35:20.840\nwatch it a few times cuz I know\nthere's a lot of information in there.\n\n743\n00:35:20.840 --> 00:35:25.416\nSoak that in, let it permeate through the\npores until it becomes a part of you and\n\n744\n00:35:25.416 --> 00:35:30.217\nyou can easily spin up some of these load\nbalancing services available from Azure.\n\n745\n00:35:30.217 --> 00:35:31.817\nAgain, thank you, Don,\nfor explaining this.\n\n746\n00:35:31.817 --> 00:35:34.090\nWe're gonna go ahead and\nsign off for ITPro TV.\n\n747\n00:35:34.090 --> 00:35:35.230\nThank you for watching.\n\n748\n00:35:35.230 --> 00:35:36.516\nI've been your host, Daniel Lowrey.\n\n749\n00:35:36.516 --> 00:35:37.608\n>> And I'm Don Pezet.\n\n750\n00:35:37.608 --> 00:35:38.662\n>> And we'll see you next time.\n\n751\n00:35:38.662 --> 00:35:44.940\n>> [MUSIC]\n\n",
          "vimeoId": "152192398"
        },
        {
          "description": "In this episode, Daniel and Don take a look at Availability Sets in Microsoft Azure. They begin by explaining what an availability set is exactly and why it's important for Azure users. Then they explain the concepts that go along with availability sets, concepts like Fault Domains(FD) and Update Domains(UD). Lastly they show you how to configure Availability Sets for your Virtual Machines in Azure.",
          "length": "1620",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-4-1-availability_sets-011816-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-4-1-availability_sets-011816-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-4-1-availability_sets-011816-1-sm.jpg",
          "title": "Availability Sets",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:12.212 --> 00:00:17.420\nAll right, greetings, everyone and welcome\nto another fantastic episode of ITProTV.\n\n3\n00:00:17.420 --> 00:00:19.600\nI'm your host Daniel Lowrie,\nand in today's episode,\n\n4\n00:00:19.600 --> 00:00:22.980\nwell, we are continuing on with\nour Azure Virtual Machine series.\n\n5\n00:00:22.980 --> 00:00:26.830\nJoining me again in the studio today\nis our good friend, Mr. Don Pezet.\n\n6\n00:00:26.830 --> 00:00:27.880\nDon, welcome back to the show.\n\n7\n00:00:27.880 --> 00:00:29.130\nHow you doing, sir?\n\n8\n00:00:29.130 --> 00:00:31.460\n>> I'm doing great, Daniel,\nthanks for having me back, and\n\n9\n00:00:31.460 --> 00:00:32.962\nI'm ready to jump back into Azure VM.\n\n10\n00:00:32.962 --> 00:00:36.440\nIn this episode, we're gonna talk\nabout a very misunderstood technology.\n\n11\n00:00:36.440 --> 00:00:39.040\nIt's called an availability set, and\n\n12\n00:00:39.040 --> 00:00:41.640\nit's one of the times where\nwe kind of break the rules.\n\n13\n00:00:41.640 --> 00:00:45.030\nHave you ever watched a movie and there'll\nbe an actor or actress in the movie, and\n\n14\n00:00:45.030 --> 00:00:48.020\nall of a sudden they look at the camera,\nthey start talking to you.\n\n15\n00:00:48.020 --> 00:00:50.080\nThey call that breaking the fourth wall.\n\n16\n00:00:50.080 --> 00:00:54.420\nWell, in the Azure cloud,\nall the hardware that's behind the scene,\n\n17\n00:00:54.420 --> 00:00:57.770\nthat's hidden from us,\nwe never see that, until now.\n\n18\n00:00:57.770 --> 00:01:01.220\nThis is the one time we break down\nthat wall and we get a chance to see\n\n19\n00:01:01.220 --> 00:01:05.320\njust a little bit about the hardware\nthat's running under the hood.\n\n20\n00:01:05.320 --> 00:01:08.620\nAnd we need to do that to make\nsure our systems are up and\n\n21\n00:01:08.620 --> 00:01:13.950\nonline as much as possible to maintain\nour availability across our Azure cloud.\n\n22\n00:01:13.950 --> 00:01:16.860\nSo that's what we're gonna get a chance\nto see here today, availability sets.\n\n23\n00:01:16.860 --> 00:01:17.730\nIt's gonna be a good time.\n\n24\n00:01:17.730 --> 00:01:20.200\n>> Yeah, Don, now we were\ndiscussing this before the show,\n\n25\n00:01:20.200 --> 00:01:22.690\nkind of like going over what\nwe were gonna talk about.\n\n26\n00:01:22.690 --> 00:01:26.998\nAnd I wondered, how is this any different,\nI mean, Microsoft is backing up all\n\n27\n00:01:26.998 --> 00:01:31.587\nmy virtual machines, they're making sure\nthat that data is always at least there.\n\n28\n00:01:31.587 --> 00:01:34.463\nThey're not going to lose my data,\nthat would be bad for them,\n\n29\n00:01:34.463 --> 00:01:36.830\nthey would lose a lot\nof business doing that.\n\n30\n00:01:36.830 --> 00:01:41.504\nHow is that any different, or is this\nany different than that, should I say?\n\n31\n00:01:41.504 --> 00:01:44.000\n>> Yeah, so\nMicrosoft is backing up your VMs.\n\n32\n00:01:44.000 --> 00:01:47.577\nThey are storing the backup as\na snapshot in another location, right,\n\n33\n00:01:47.577 --> 00:01:50.860\nin at least another availability zone,\nif not another region.\n\n34\n00:01:50.860 --> 00:01:53.320\nAnd so if there's a hardware failure,\n\n35\n00:01:53.320 --> 00:01:57.675\nif the hard drives that your VM is\nrunning on die, if the whole server dies,\n\n36\n00:01:57.675 --> 00:02:00.290\nthat they can quickly bring\nyou up on another system.\n\n37\n00:02:00.290 --> 00:02:02.030\nHere's the problem.\n\n38\n00:02:02.030 --> 00:02:05.700\nWhen that server dies,\nyou lose what's in RAM.\n\n39\n00:02:05.700 --> 00:02:07.740\nAnd that means when they move\nyou over to another server,\n\n40\n00:02:07.740 --> 00:02:08.980\nthey've got to boot your system up.\n\n41\n00:02:08.980 --> 00:02:11.040\nWell, how long does it take\nyour system to boot up?\n\n42\n00:02:11.040 --> 00:02:12.980\nMight take a minute, minute and\na half, two minutes.\n\n43\n00:02:12.980 --> 00:02:14.970\nIt depends on the size of the instance and\nso\n\n44\n00:02:14.970 --> 00:02:18.130\non, if data has to actually be\npulled from backup, all that stuff.\n\n45\n00:02:18.130 --> 00:02:20.700\nBut it usually comes up\nwithin a few minutes.\n\n46\n00:02:20.700 --> 00:02:25.560\nThe problem here is that Microsoft has\nan SLA, a service-level agreement,\n\n47\n00:02:25.560 --> 00:02:26.790\nwith you the customer.\n\n48\n00:02:26.790 --> 00:02:30.904\nAnd Microsoft's SLA is 99.95%, so\n\n49\n00:02:30.904 --> 00:02:35.712\nthey want to guarantee you 99.95% up time.\n\n50\n00:02:35.712 --> 00:02:40.986\nAnd what that means is that, spread\nout over the course of a year, they're\n\n51\n00:02:40.986 --> 00:02:46.633\npromising that you will have no more than\n4 hours and 22 minutes of down time.\n\n52\n00:02:46.633 --> 00:02:48.360\nOkay, now 4 hours and 22 minutes,\n\n53\n00:02:48.360 --> 00:02:50.880\nthat sounds like a lot,\nI could have quite a bit.\n\n54\n00:02:50.880 --> 00:02:54.930\nBut if you spread that out over months and\ntake it down into individual days,\n\n55\n00:02:54.930 --> 00:02:57.680\nit works out to being\nless than a minute a day.\n\n56\n00:02:57.680 --> 00:03:00.580\nSo you will have less than a minute\nof downtime per day if you kinda\n\n57\n00:03:00.580 --> 00:03:01.950\ncalculate out the SLA.\n\n58\n00:03:01.950 --> 00:03:05.900\nWell, a single reboot can take more\nthan a minute, so there goes the SLA.\n\n59\n00:03:05.900 --> 00:03:08.650\nIf you have a couple of these\nreboots throughout the year,\n\n60\n00:03:08.650 --> 00:03:11.590\nyou can start to eat that\ntime up pretty quickly.\n\n61\n00:03:11.590 --> 00:03:15.100\nSo how does Microsoft\nsafely maintain that SLA?\n\n62\n00:03:15.100 --> 00:03:17.630\nWell, the backup and\nrecovery stuff, that's one way.\n\n63\n00:03:17.630 --> 00:03:19.380\nThey know they can have\nyour server back up and\n\n64\n00:03:19.380 --> 00:03:21.770\ngoing in just a matter of\nminutes in another region.\n\n65\n00:03:21.770 --> 00:03:25.120\nBut wouldn't it be nice if\nthat didn't happen at all?\n\n66\n00:03:25.120 --> 00:03:27.380\nWouldn't it be nice if\nthere was no failure?\n\n67\n00:03:27.380 --> 00:03:30.420\nAnd remember, I keep saying failures,\nit's not necessarily a failure.\n\n68\n00:03:30.420 --> 00:03:34.660\nRemember that your virtual machine is\nrunning on top of Hyper-V servers.\n\n69\n00:03:34.660 --> 00:03:36.890\nIt's running on top of physical servers.\n\n70\n00:03:36.890 --> 00:03:38.540\nAnd those servers have to get updated and\n\n71\n00:03:38.540 --> 00:03:41.050\nthose servers have to\nget rebooted sometimes.\n\n72\n00:03:41.050 --> 00:03:44.180\nAnd when the server reboots,\nwhat happens to the VM?\n\n73\n00:03:44.180 --> 00:03:48.600\nWell, the VM's gotta get shifted off to\nother hardware, or the VM reboots also.\n\n74\n00:03:48.600 --> 00:03:51.320\nThey might do a frozen snapshot so\nthat when the system comes back up,\n\n75\n00:03:51.320 --> 00:03:52.670\nit doesn't know it rebooted.\n\n76\n00:03:52.670 --> 00:03:55.770\nBut for a few moments it was frozen\nwhile the underlying host rebooted.\n\n77\n00:03:55.770 --> 00:04:00.410\nSo, how do we guard against\nthat affecting our VMs?\n\n78\n00:04:00.410 --> 00:04:02.750\nWell if I can't see\nthe hardware underneath,\n\n79\n00:04:02.750 --> 00:04:06.080\nif I have no control over those updates,\nI can't.\n\n80\n00:04:06.080 --> 00:04:08.080\nAnd for most people,\nthat is the case, you can't,\n\n81\n00:04:08.080 --> 00:04:09.546\nthere's nothing you can do about it.\n\n82\n00:04:09.546 --> 00:04:13.470\nExcept, we have one technology called\nan availability set that helps with that.\n\n83\n00:04:13.470 --> 00:04:16.030\nLet me show you a little\ndiagram that I whipped up.\n\n84\n00:04:16.030 --> 00:04:18.885\nIt's one of my amazing little\nart projects that I do and-\n\n85\n00:04:18.885 --> 00:04:20.867\n>> It's real Andy Warhol, [LAUGH].\n\n86\n00:04:20.867 --> 00:04:21.640\n>> It's pretty bad.\n\n87\n00:04:22.910 --> 00:04:27.263\nImagine if you will, [LAUGH] let's set\nthis up like a Twilight Zone episode.\n\n88\n00:04:27.263 --> 00:04:30.940\nThat each of this giant\nrectangles is server rack, okay.\n\n89\n00:04:32.235 --> 00:04:33.796\nSo we're gonna pretend that each\none of these is a server rack.\n\n90\n00:04:33.796 --> 00:04:37.395\nSo I've got FD 0, FD 1, FD 2.\n\n91\n00:04:37.395 --> 00:04:40.655\nThese are what are called fault domains.\n\n92\n00:04:40.655 --> 00:04:42.815\nEach rack is its own fault domain.\n\n93\n00:04:42.815 --> 00:04:48.175\nA fault domain has one source of power and\none source of network.\n\n94\n00:04:48.175 --> 00:04:51.057\nSo it'll have a physical network\nswitch up in the top of the rack, and\n\n95\n00:04:51.057 --> 00:04:54.765\nit'll have some kind of power source\nthat's feeding the whole rack.\n\n96\n00:04:54.765 --> 00:04:59.160\nSo all these servers are getting\ntheir power from the same source.\n\n97\n00:04:59.160 --> 00:05:02.540\nIt's called a fault domain\nbecause if the power for\n\n98\n00:05:02.540 --> 00:05:05.450\nthis rack dies,\nall these servers lose power.\n\n99\n00:05:05.450 --> 00:05:06.440\nOr if the network switch for\n\n100\n00:05:06.440 --> 00:05:09.400\nthis rack dies, all of these\nservers lose network connectivity.\n\n101\n00:05:09.400 --> 00:05:12.820\nSo this is one fault domain, all of\nthese servers are tied to each other.\n\n102\n00:05:14.580 --> 00:05:18.380\nFD 1 is another fault domain,\nand FD 2 is another fault domain.\n\n103\n00:05:18.380 --> 00:05:22.520\nAnd so all of these servers\nare tied to their own fault domain.\n\n104\n00:05:22.520 --> 00:05:26.065\nIf I wanna maintain a high SLA,\nan SLA that doesn't require reboots,\n\n105\n00:05:26.065 --> 00:05:30.630\nright, that doesn't require down time at\nall, where I can have 100% up time, well,\n\n106\n00:05:30.630 --> 00:05:33.740\nthis challenge is on my side,\nlet's put that aside.\n\n107\n00:05:33.740 --> 00:05:36.190\nOn Microsoft's side,\nwe can actually do it.\n\n108\n00:05:36.190 --> 00:05:40.260\nAnd the way you do it is by deploying\none server in Fault Domain 0,\n\n109\n00:05:40.260 --> 00:05:42.830\nand another server in Fault Domain 1.\n\n110\n00:05:42.830 --> 00:05:45.540\nAnd then use a load-balanced set or\n\n111\n00:05:45.540 --> 00:05:48.510\nthe Azure Traffic Manager to\nbalance across the two of them.\n\n112\n00:05:48.510 --> 00:05:51.758\nAnd that way if one fails,\nlet's say Fault Domain 0 goes down,\n\n113\n00:05:51.758 --> 00:05:57.340\nFault Domain 1 is still up and\nrunning and happy.\n\n114\n00:05:57.340 --> 00:06:01.293\nAnd so I can still get to that server and\nthe load-balanced set makes sure that no\n\n115\n00:06:01.293 --> 00:06:03.420\none is getting sent to\nthe bad one anymore.\n\n116\n00:06:03.420 --> 00:06:05.960\nSo now I can survive\nthat hardware failure.\n\n117\n00:06:05.960 --> 00:06:07.470\nAnd it's not where Microsoft said,\n\n118\n00:06:07.470 --> 00:06:11.270\noop, now I gotta restore you over here and\nnow we've gotta go through a reboot.\n\n119\n00:06:11.270 --> 00:06:14.355\nIn this scenario,\nthe machine is already up and running.\n\n120\n00:06:14.355 --> 00:06:17.240\nIt's a hot system, the two are up.\n\n121\n00:06:17.240 --> 00:06:21.040\nIf I have one server with 8 gigs of RAM,\nI can break it into\n\n122\n00:06:21.040 --> 00:06:24.580\ntwo servers with 4 gigs of RAM each and\nput one in each fault domain.\n\n123\n00:06:24.580 --> 00:06:28.820\nAnd now I've got that resiliency so\nif one dies, the other is up and running.\n\n124\n00:06:28.820 --> 00:06:30.960\nThe challenge here is that\nI can't see this hardware.\n\n125\n00:06:30.960 --> 00:06:33.620\nI don't really know what rack\nmy systems are running on.\n\n126\n00:06:33.620 --> 00:06:36.970\nBut Microsoft exposes this to us in\nthe GUI through an availability set.\n\n127\n00:06:36.970 --> 00:06:40.710\nAnd with an availability set,\nthey don't let you pick your fault domain.\n\n128\n00:06:40.710 --> 00:06:44.020\nBut what they do is they assign\nthree fault domains to you.\n\n129\n00:06:44.020 --> 00:06:49.310\nAnd you do this at the resource group,\nor a the cloud service level.\n\n130\n00:06:49.310 --> 00:06:50.970\nSo this isn't done on the VM itself.\n\n131\n00:06:50.970 --> 00:06:52.790\nOn the resource group or\nthe cloud service,\n\n132\n00:06:52.790 --> 00:06:55.570\nit will attach three\nfault domains by default.\n\n133\n00:06:56.590 --> 00:06:59.890\nAnd you can increase that, the maximum,\nI don't remember what the maximum is,\n\n134\n00:06:59.890 --> 00:07:00.490\nI think it's five.\n\n135\n00:07:00.490 --> 00:07:04.790\nI wanna say, shoot, I think I have\nit written around here somewhere.\n\n136\n00:07:04.790 --> 00:07:07.610\nI feel like the maximum is five but don't\ngo quote me on that, I might be wrong.\n\n137\n00:07:07.610 --> 00:07:11.340\nBut they give you three by default which\nis more than enough for most people.\n\n138\n00:07:11.340 --> 00:07:16.320\nSo you get these three fault domains and\nas you create VMs and put them\n\n139\n00:07:16.320 --> 00:07:20.570\nin the availability set, it will make sure\nthey get spread across the fault domains.\n\n140\n00:07:20.570 --> 00:07:23.640\nIf you don't do this, this is what I was\ntrying to tell Daniel before the show.\n\n141\n00:07:23.640 --> 00:07:25.320\nLet's say I don't bother with this,\nright, and\n\n142\n00:07:25.320 --> 00:07:26.724\nI just start creating virtual machines.\n\n143\n00:07:26.724 --> 00:07:29.400\nI don't know where the virtual\nmachines are going.\n\n144\n00:07:29.400 --> 00:07:30.550\nAnd so potentially,\n\n145\n00:07:30.550 --> 00:07:34.420\nI could create two virtual machines\nthat end up in the same fault domain.\n\n146\n00:07:34.420 --> 00:07:35.879\nI just wouldn't know about it,\nit just happens.\n\n147\n00:07:35.879 --> 00:07:38.283\nRight, Microsoft placed them\nin the same fault domain and\n\n148\n00:07:38.283 --> 00:07:40.810\nnow I could lose both\nof them at a same time.\n\n149\n00:07:40.810 --> 00:07:44.180\nBut by creating an availability set and\nattaching that to my resource group or\n\n150\n00:07:44.180 --> 00:07:47.660\nattaching that to my cloud service, it'll\nmake sure those VMs get spread across, and\n\n151\n00:07:47.660 --> 00:07:48.504\nit'll do it evenly.\n\n152\n00:07:48.504 --> 00:07:50.129\nSo as I add more instances,\nit'll spread them out.\n\n153\n00:07:50.129 --> 00:07:52.990\nIf I'm doing auto-scaling, it'll\nauto-scale and spread them out nice and\n\n154\n00:07:52.990 --> 00:07:54.171\neven across the fault domains.\n\n155\n00:07:54.171 --> 00:07:55.836\nNow I get that resiliency.\n\n156\n00:07:55.836 --> 00:07:57.171\nAll right.\n\n157\n00:07:57.171 --> 00:07:58.962\nThe other thing is what's\ncalled an Update Domain.\n\n158\n00:07:58.962 --> 00:08:04.130\nSo, notice each of these servers in here,\nI've labeled them UD 0 through UD 4.\n\n159\n00:08:04.130 --> 00:08:05.230\nRight?\n\n160\n00:08:05.230 --> 00:08:08.940\nWhen you create an Availability Set,\nMicrosoft creates for\n\n161\n00:08:08.940 --> 00:08:11.660\nyou five Update Domains and\nit's adjustable.\n\n162\n00:08:11.660 --> 00:08:14.940\nYou can go up to 20 if you want, but,\nI kinda got lazy in my diagram and\n\n163\n00:08:14.940 --> 00:08:15.900\nstopped at five.\n\n164\n00:08:15.900 --> 00:08:17.810\nFive is the default though so\nI at least did the default.\n\n165\n00:08:18.880 --> 00:08:21.820\nThe Update Domains aren't talking\nabout a fault, they're not talking\n\n166\n00:08:21.820 --> 00:08:24.720\nabout a hard drive failure, they're\njust talking about a Windows update.\n\n167\n00:08:24.720 --> 00:08:26.350\nMaybe they needed to update a driver.\n\n168\n00:08:26.350 --> 00:08:30.230\nMaybe they needed to update the operating\nsystem for the physical host,\n\n169\n00:08:30.230 --> 00:08:34.020\nthe Hyper-V host and when they update it,\nthey need to reboot it.\n\n170\n00:08:34.020 --> 00:08:37.460\nWell, if they reboot it, any of the VM's\nthat are on it are gonna get displaced.\n\n171\n00:08:37.460 --> 00:08:41.880\nAnd that may mean down time or at a\nminimum it's gonna be reduced performance,\n\n172\n00:08:41.880 --> 00:08:43.600\ncuz we gotta flop them over\nto another system, right?\n\n173\n00:08:43.600 --> 00:08:45.050\nMove them to another update domain.\n\n174\n00:08:45.050 --> 00:08:48.590\nSo when we create these VMs it'd be\nnice if they were in different update\n\n175\n00:08:48.590 --> 00:08:50.330\ndomains also.\n\n176\n00:08:50.330 --> 00:08:54.820\nAnd so when you create an availability\nset, it creates three fault domains and\n\n177\n00:08:54.820 --> 00:08:58.140\nit creates five update domains.\n\n178\n00:08:58.140 --> 00:08:59.570\nAnd as you deploy your VM's,\n\n179\n00:08:59.570 --> 00:09:01.750\nit distributes them across\nthe update domains.\n\n180\n00:09:01.750 --> 00:09:04.890\nSo, I won't have the VM spread across\nupdate domains zero through four right\n\n181\n00:09:04.890 --> 00:09:07.930\nhere in one fault domain,\nI'm gonna get it spread out.\n\n182\n00:09:07.930 --> 00:09:11.350\nMy update domain zero might be\nhere in fault domain zero but\n\n183\n00:09:11.350 --> 00:09:14.590\nmy update domain one\nmight be right here also.\n\n184\n00:09:14.590 --> 00:09:17.950\nAnd my update domain two might\nbe over in fault domain one.\n\n185\n00:09:17.950 --> 00:09:21.030\nAnd my update domains three and four, they\nmight be over here and fault domain two,\n\n186\n00:09:21.030 --> 00:09:22.020\nit spreads them out.\n\n187\n00:09:22.020 --> 00:09:24.980\nThen other customers are getting\nspread out across the others,\n\n188\n00:09:24.980 --> 00:09:26.860\nto ensure that you're\nspread out evenly and\n\n189\n00:09:26.860 --> 00:09:31.480\nit's balanced across all the customers\nthat Windows Azure has or Microsoft Azure.\n\n190\n00:09:31.480 --> 00:09:34.700\nSo then we get that balance and\nnow if Microsoft needs to\n\n191\n00:09:34.700 --> 00:09:38.050\nupdate one of those servers and\nthey gotta reboot it for some reason.\n\n192\n00:09:38.050 --> 00:09:42.970\nWell, your client stays up, not your\nclient but your guest operating system.\n\n193\n00:09:42.970 --> 00:09:45.930\nYour virtual machine stays up and\nit can move if need be.\n\n194\n00:09:45.930 --> 00:09:46.940\nNow most of the time,\n\n195\n00:09:46.940 --> 00:09:50.080\nwe don't notice anyway but\nwhat if the update goes bad, right.\n\n196\n00:09:50.080 --> 00:09:51.950\nThat's really what the update\ndomains protect from.\n\n197\n00:09:51.950 --> 00:09:55.090\nIf it goes bad, now they gotta restore\nthat host and when they restore the host,\n\n198\n00:09:55.090 --> 00:09:57.890\nyour machine is down, right,\nor it's gotta reboot.\n\n199\n00:09:57.890 --> 00:10:02.090\nAgain, we can prevent that if we've got\nVM's in more than one update domain.\n\n200\n00:10:02.090 --> 00:10:04.750\nSo an availability set is what\nexposes all of this to us.\n\n201\n00:10:04.750 --> 00:10:08.790\nThis underlying hardware, this stuff that\nwe don't normally have to work with,\n\n202\n00:10:08.790 --> 00:10:12.090\nit will let us at least see that,\nthat's happening and\n\n203\n00:10:12.090 --> 00:10:14.020\nget a balance on it, all right.\n\n204\n00:10:14.020 --> 00:10:16.420\nNow, if this sounds great, cool.\n\n205\n00:10:16.420 --> 00:10:19.220\nIt's actually really easy to set up, it's\none of the easier things to set up but\n\n206\n00:10:19.220 --> 00:10:21.520\na few little caveats\nbefore we get started.\n\n207\n00:10:21.520 --> 00:10:26.930\nFirst off, it is tied to your cloud\nservice or your resource group, right.\n\n208\n00:10:26.930 --> 00:10:30.950\nSo if you're doing single VM,\nsingle resource group or single VM,\n\n209\n00:10:30.950 --> 00:10:33.700\nsingle cloud service,\nthis doesn't work, right?\n\n210\n00:10:33.700 --> 00:10:37.280\nBecause it only balances within\none of those services, so\n\n211\n00:10:37.280 --> 00:10:40.100\nyou've gotta have more than one\nVM in the same cloud service or\n\n212\n00:10:40.100 --> 00:10:41.590\nmore than one VM in\nthe same resource group.\n\n213\n00:10:41.590 --> 00:10:42.950\nAnd you should be doing that anyway.\n\n214\n00:10:42.950 --> 00:10:44.280\nRight, well we've got five web servers,\n\n215\n00:10:44.280 --> 00:10:47.880\nthey should be in the same resource group\nif they all have the same website, right.\n\n216\n00:10:47.880 --> 00:10:49.280\nThey're gonna be redundant for each other.\n\n217\n00:10:49.280 --> 00:10:51.714\nIf it's five web servers\nwith five unique websites,\n\n218\n00:10:51.714 --> 00:10:54.364\nit doesn't make sense to set\nthis up because if one website\n\n219\n00:10:54.364 --> 00:10:58.008\ngoes down versus the other, it really\ndoesn't make that much of a difference.\n\n220\n00:10:58.008 --> 00:11:01.610\nAll right, so\nthat's kinda the basic caveat there.\n\n221\n00:11:01.610 --> 00:11:05.430\nAnd then the other thing is I keep\nsaying this in every episode.\n\n222\n00:11:05.430 --> 00:11:06.710\nIt starts to get a little old.\n\n223\n00:11:06.710 --> 00:11:10.450\nThe new Azure portal hasn't been\nfully updated to support this.\n\n224\n00:11:10.450 --> 00:11:14.320\nIn the new Azure portal,\nwhen I create a virtual machine,\n\n225\n00:11:14.320 --> 00:11:17.380\nI can tell it what\navailability set to be in but\n\n226\n00:11:17.380 --> 00:11:19.770\nif the virtual machine's already created,\nI'm out of luck.\n\n227\n00:11:19.770 --> 00:11:21.490\nCan't change it.\n\n228\n00:11:21.490 --> 00:11:25.510\nIn the classic Azure portal,\nyou can put them in an availability set\n\n229\n00:11:25.510 --> 00:11:29.620\nwhen you create them and you can change\nit after the fact when you want to.\n\n230\n00:11:29.620 --> 00:11:33.240\nIt gives you that ability to change it for\nyour existing VM's, so you might still\n\n231\n00:11:33.240 --> 00:11:36.370\nneed to go back to the classic\nportal to set this up in some cases.\n\n232\n00:11:36.370 --> 00:11:38.030\nJust be aware of that.\n\n233\n00:11:38.030 --> 00:11:38.620\n>> All right, Don.\n\n234\n00:11:38.620 --> 00:11:41.550\nNow, we've talked about this,\nwe understand what we got to do.\n\n235\n00:11:41.550 --> 00:11:42.220\nLet's jump into it,\n\n236\n00:11:42.220 --> 00:11:46.200\nlet's actually assign something to an\navailability set and see how that works.\n\n237\n00:11:46.200 --> 00:11:47.320\n>> Okay, sure.\nSo,\n\n238\n00:11:47.320 --> 00:11:52.700\nlet's just start right here in my Azure\nPortal, and I'm in the new portal, right?\n\n239\n00:11:52.700 --> 00:11:55.740\nAnd in the new portal, if I go to\none of my virtual machines here.\n\n240\n00:11:55.740 --> 00:11:58.120\nSo, I'm gonna jump down\nto my virtual machines.\n\n241\n00:11:58.120 --> 00:12:01.530\nAnd I'll take itprotv web07,\nso this web server.\n\n242\n00:12:01.530 --> 00:12:02.710\nI brought this one up a while back,\n\n243\n00:12:02.710 --> 00:12:04.690\nI actually don't remember when I\nbrought it up, so I've been paying for\n\n244\n00:12:04.690 --> 00:12:05.430\nit for a while, I'm sure.\n\n245\n00:12:05.430 --> 00:12:08.497\n>> That's a nice bill you're\naccruing there [LAUGH].\n\n246\n00:12:08.497 --> 00:12:12.217\n>> So I've got this one up and if I\ntake a look at its right side over here,\n\n247\n00:12:12.217 --> 00:12:15.830\nat its settings, somewhere in\nhere we'll see availability set.\n\n248\n00:12:15.830 --> 00:12:20.030\nAnd when we click on that it's gonna give\nme information about the availability set.\n\n249\n00:12:20.030 --> 00:12:23.720\nAnd I can see I'm in an availability\nset called ITPROTV WEBDEMO.\n\n250\n00:12:23.720 --> 00:12:27.340\nI've got a current fault domain of zero\nand a current update domain of zero.\n\n251\n00:12:27.340 --> 00:12:29.380\nWhich means this is probably the first\nserver that was brought up in\n\n252\n00:12:29.380 --> 00:12:30.190\nthat domain right.\n\n253\n00:12:30.190 --> 00:12:33.600\nBut that's the one it's assigned to and\nsee how I can't change any of that?\n\n254\n00:12:33.600 --> 00:12:36.170\nEven if I click on the name it's just\ngonna show me the availability set,\n\n255\n00:12:36.170 --> 00:12:37.790\nit's not gonna actually\nlet me change anything.\n\n256\n00:12:37.790 --> 00:12:41.050\nNow, when I look at that availability set,\nhere it is, and\n\n257\n00:12:41.050 --> 00:12:44.310\nI can see that it's got three fault\ndomains, five update domains, but\n\n258\n00:12:44.310 --> 00:12:48.340\nit's only got one virtual machine in it\nright now, which is not truly redundant.\n\n259\n00:12:48.340 --> 00:12:50.290\nIn fact, some of these screen\nwill show me an error saying,\n\n260\n00:12:50.290 --> 00:12:54.230\nI can't meet the SLA With the\nconfiguration that I've got, all right?\n\n261\n00:12:54.230 --> 00:12:56.170\nSo with that one,\n\n262\n00:12:56.170 --> 00:13:00.620\nI had assigned it to an availability\nset when I created the virtual machine.\n\n263\n00:13:00.620 --> 00:13:03.480\nWhen I whipped this VM up and\nthrew it into that resource group.\n\n264\n00:13:03.480 --> 00:13:07.220\nSo if I create a new virtual machine,\nlet's just whip up another one here.\n\n265\n00:13:08.470 --> 00:13:15.597\nI'll create a new virtual machine and\nwe'll just do Windows Server and\n\n266\n00:13:15.597 --> 00:13:20.823\nwhen I go to spin this one up, I'm\n\n267\n00:13:20.823 --> 00:13:25.620\ngonna pick to go a Window server and I'm\ngonna do a resource manager deployment.\n\n268\n00:13:25.620 --> 00:13:30.440\nI wanna do a new style of deployment and\nas I spin that up,\n\n269\n00:13:30.440 --> 00:13:32.870\nI'll need to give it some\nbasic settings like a name.\n\n270\n00:13:32.870 --> 00:13:37.690\nAnd so maybe this would be ITProTV-web11,\nand we'll create a user name.\n\n271\n00:13:40.300 --> 00:13:45.890\nWhoops, which I can type better if I don't\nhave my papers in the way, there we go.\n\n272\n00:13:45.890 --> 00:13:48.080\nI'll set my subscription,\nand my resource group,\n\n273\n00:13:48.080 --> 00:13:49.590\nI'm gonna pick that\nexisting resource group.\n\n274\n00:13:49.590 --> 00:13:52.850\nRemember that availability sets\nwork within a cloud service or\n\n275\n00:13:52.850 --> 00:13:53.650\nan availability group.\n\n276\n00:13:53.650 --> 00:13:56.680\nSo you've really gotta pick one of\nthese or the whole thing doesn't work.\n\n277\n00:13:56.680 --> 00:13:58.466\nAnd I'm pretty sure the other\none was itprotv-webdemo, so\n\n278\n00:13:58.466 --> 00:13:59.314\nI'm gonna stick with that.\n\n279\n00:14:01.846 --> 00:14:05.110\nAll right, then I get to pick my size,\nwhich I'll just go with the default,\n\n280\n00:14:05.110 --> 00:14:06.800\nI don't need anything special there.\n\n281\n00:14:06.800 --> 00:14:12.300\nI'll do a d one standard,\nthen under my settings,\n\n282\n00:14:12.300 --> 00:14:15.310\nhere is where I'll have the availability\nset and under my settings,\n\n283\n00:14:15.310 --> 00:14:18.590\nI've got storage, I've got network,\nI've got monitoring and\n\n284\n00:14:18.590 --> 00:14:20.370\naway down here at the bottom,\navailability.\n\n285\n00:14:20.370 --> 00:14:24.630\nAnd when I choose the availability set,\nover here I have the option to\n\n286\n00:14:24.630 --> 00:14:29.740\ncreate a new one or choose none or\nchoose an existing availability set.\n\n287\n00:14:29.740 --> 00:14:32.880\nIf you don't see your\nexisting availability set,\n\n288\n00:14:32.880 --> 00:14:34.400\nyou're in the wrong resource group, right?\n\n289\n00:14:34.400 --> 00:14:37.630\nIt's tied to a resource group, so\nif I create anew resource group,\n\n290\n00:14:37.630 --> 00:14:38.910\nI wouldn't see anything in here.\n\n291\n00:14:38.910 --> 00:14:41.310\nBut I joined one that already\nhad an availability set, so\n\n292\n00:14:41.310 --> 00:14:41.950\nI'm going to choose that.\n\n293\n00:14:41.950 --> 00:14:44.480\nAnd that's what I was talking\nabout with a new azure portal,\n\n294\n00:14:44.480 --> 00:14:48.080\nit'll let me choose this stuff\nwhen I create the VM, but\n\n295\n00:14:48.080 --> 00:14:50.250\nonce the VM is created it's\nkinda locked in, that's it.\n\n296\n00:14:50.250 --> 00:14:53.170\nI'll need to provision a new one or\njump down to PowerShell or\n\n297\n00:14:53.170 --> 00:14:54.660\njump back to my classic.\n\n298\n00:14:54.660 --> 00:14:58.850\nBut if I go back to the classic portal\nit won't see the resource groups,\n\n299\n00:14:58.850 --> 00:15:00.790\nit only sees the crowd services.\n\n300\n00:15:00.790 --> 00:15:04.710\nSo kind of a bit of a catch\n22 on that one, all right so\n\n301\n00:15:04.710 --> 00:15:07.850\nI'm gonna spin that VM up, that should\nbe all the information it needs.\n\n302\n00:15:07.850 --> 00:15:09.400\nAnd when it's done,\n\n303\n00:15:09.400 --> 00:15:13.280\nthis virtual machine is gonna deploy\ninto that same availability set.\n\n304\n00:15:13.280 --> 00:15:16.950\nAnd I should see this one ends up\nin a different fault domain and\n\n305\n00:15:16.950 --> 00:15:20.640\na different update domain at\nleast I hope it does, okay.\n\n306\n00:15:20.640 --> 00:15:22.290\nNow while I'm waiting\non that one to spin up,\n\n307\n00:15:22.290 --> 00:15:23.720\nlet me spin up another virtual machine.\n\n308\n00:15:24.790 --> 00:15:29.567\nSo, I'll do another one, and where's my\nrecent, never, there we go, all right.\n\n309\n00:15:29.567 --> 00:15:31.080\n>> [LAUGH]\n>> I started to complain.\n\n310\n00:15:31.080 --> 00:15:31.670\n>> Where is that?\n\n311\n00:15:31.670 --> 00:15:32.250\nOh, there it is.\n\n312\n00:15:32.250 --> 00:15:33.690\n[LAUGH]\n>> It's cuz I don't scroll down.\n\n313\n00:15:33.690 --> 00:15:36.860\nAll right, I'm gonna create another one,\nand when I create this virtual machine,\n\n314\n00:15:36.860 --> 00:15:39.390\nI'm gonna go a little bit\ndifferent cuz I'm gonna add a new\n\n315\n00:15:40.470 --> 00:15:42.370\navailability set, okay.\n\n316\n00:15:42.370 --> 00:15:48.713\nSo, I'm gonna create itprotvweb12,\nwe give it a password.\n\n317\n00:15:48.713 --> 00:15:51.962\nAnd for the resource group,\nI will choose the same resource.\n\n318\n00:15:51.962 --> 00:15:55.221\nIf you can actually have more than one\navailability set in the same resource\n\n319\n00:15:55.221 --> 00:15:56.630\ngroup, now why would I do that?\n\n320\n00:15:56.630 --> 00:16:01.990\nWell, I might do that if I have\ndatabase servers and web front ends.\n\n321\n00:16:01.990 --> 00:16:04.078\nAnd I want the database servers\nto have one configuration,\n\n322\n00:16:04.078 --> 00:16:05.500\nthe web front instead a different.\n\n323\n00:16:05.500 --> 00:16:07.270\nThey're both in the same resource group,\nbut\n\n324\n00:16:07.270 --> 00:16:09.270\nI might choose different\navailability sets for that.\n\n325\n00:16:09.270 --> 00:16:11.341\nNow, I say that, I've never done that.\n\n326\n00:16:11.341 --> 00:16:13.379\n[LAUGH] But\nyou certainly could do it that way.\n\n327\n00:16:13.379 --> 00:16:14.857\nThat would be the use case scenario.\n\n328\n00:16:14.857 --> 00:16:17.010\nAll right, so I'll go ahead and\nget this one set up.\n\n329\n00:16:18.310 --> 00:16:20.480\nAnd stick with the standard size.\n\n330\n00:16:20.480 --> 00:16:24.830\nThis time, though, when I get to settings,\nI'm gonna create a new availability set.\n\n331\n00:16:24.830 --> 00:16:28.990\nAnd so when I jump down to the bottom of\nthe settings and I go to availability set,\n\n332\n00:16:28.990 --> 00:16:31.830\ninstead of picking an existing one,\nI'm gonna go to Create new.\n\n333\n00:16:31.830 --> 00:16:33.880\nAnd when I go to create new,\n\n334\n00:16:33.880 --> 00:16:37.080\nhere's where we can start to adjust\nsome of these settings, all right?\n\n335\n00:16:37.080 --> 00:16:39.310\nAnd the first part here\nis giving it a name.\n\n336\n00:16:39.310 --> 00:16:42.640\nSo maybe I'll call this itprotv-webdb.\n\n337\n00:16:42.640 --> 00:16:46.410\nAnd here I can pick the update domains.\n\n338\n00:16:46.410 --> 00:16:49.180\nWe've got a default of five.\n\n339\n00:16:49.180 --> 00:16:51.760\nI can take it down, which is crazy talk.\n\n340\n00:16:51.760 --> 00:16:54.800\nOr we can take it all\nthe way up to 20 if we want.\n\n341\n00:16:54.800 --> 00:16:57.060\nDoesn't really matter\nwhich one we choose here.\n\n342\n00:16:57.060 --> 00:16:58.470\nIt just depends on how\nmany servers we have and\n\n343\n00:16:58.470 --> 00:17:00.640\nhow much resiliency we want baked in.\n\n344\n00:17:00.640 --> 00:17:03.730\nFive is pretty much what most people want,\nright?\n\n345\n00:17:03.730 --> 00:17:07.250\nAnd then for Fault domains, earlier I\nsaid I thought the maximum was five.\n\n346\n00:17:07.250 --> 00:17:07.916\nI was wrong.\n\n347\n00:17:07.916 --> 00:17:09.120\n>> [LAUGH]\n>> My head is covering it up,\n\n348\n00:17:09.120 --> 00:17:11.180\ncan we get rid of my head for a second?\n\n349\n00:17:11.180 --> 00:17:14.500\nAnd what you'll see is it's set to\nthree and three is the maximum.\n\n350\n00:17:14.500 --> 00:17:15.980\nI can take it down to two.\n\n351\n00:17:15.980 --> 00:17:18.550\nIf I go down to one,\nI'm wasting my time, right?\n\n352\n00:17:18.550 --> 00:17:20.140\nI might as well not even have these.\n\n353\n00:17:20.140 --> 00:17:22.230\nBut so I can go from two to three.\n\n354\n00:17:22.230 --> 00:17:25.410\nThree is the maximum there But that's it.\n\n355\n00:17:25.410 --> 00:17:27.440\nIt doesn't let me configure\nanything else on this.\n\n356\n00:17:27.440 --> 00:17:28.850\nI can't pick how it's distributed.\n\n357\n00:17:28.850 --> 00:17:30.050\nMicrosoft handles all of that.\n\n358\n00:17:30.050 --> 00:17:34.030\nI can just set how many of these domains\nI want, and then I can say okay, and\n\n359\n00:17:34.030 --> 00:17:34.990\nthen that will create that.\n\n360\n00:17:34.990 --> 00:17:38.170\nSo now we'll have a new availability set.\n\n361\n00:17:38.170 --> 00:17:43.320\nBut now that's spun up, or is spinning up,\nlet me go check out my other VM and\n\n362\n00:17:43.320 --> 00:17:45.450\nsee if it's been thrown into\nan availability set yet.\n\n363\n00:17:45.450 --> 00:17:46.700\nIt might be booting.\n\n364\n00:17:46.700 --> 00:17:49.410\nSo I'm gonna go over here\nto my virtual machines and\n\n365\n00:17:49.410 --> 00:17:52.940\nI'm gonna take ExpoTV web 11, that's\nthe server I spun up a moment ago and\n\n366\n00:17:52.940 --> 00:17:55.490\njoined to the existing availability set.\n\n367\n00:17:55.490 --> 00:17:58.810\nNow when I go into that,\non the right side here,\n\n368\n00:17:58.810 --> 00:18:02.219\nI'm just gonna hunt down for\navailability set.\n\n369\n00:18:04.332 --> 00:18:09.060\nAnd see how my current fault domain\nis 1 and my update domain is 1.\n\n370\n00:18:09.060 --> 00:18:11.620\nThe other server was 0 and 0.\n\n371\n00:18:11.620 --> 00:18:12.800\nThis one's 1 and 1.\n\n372\n00:18:12.800 --> 00:18:17.280\nBut two servers are in different fault\ndomains and different update domains.\n\n373\n00:18:17.280 --> 00:18:20.670\nNow if I create a load balance\nset between these two servers,\n\n374\n00:18:20.670 --> 00:18:24.530\none of these servers could have a fault\ndomain failure or an update domain reboot,\n\n375\n00:18:24.530 --> 00:18:26.880\nand the other servers will still be up.\n\n376\n00:18:26.880 --> 00:18:28.820\nI won't have any downtime.\n\n377\n00:18:28.820 --> 00:18:34.430\nAnd now, maintaining that 99.95% SLA\nis easy, and Microsoft can support us.\n\n378\n00:18:34.430 --> 00:18:36.110\nIf we just have one node, they can't.\n\n379\n00:18:36.110 --> 00:18:39.630\nAnd if you call and complain, like, you\nguys have been down for three hours now!\n\n380\n00:18:39.630 --> 00:18:43.560\nMicrosoft will say, well, you didn't\ndeploy your availability sets right.\n\n381\n00:18:43.560 --> 00:18:45.900\nAnd so\nwe don't have to follow the SLA for you.\n\n382\n00:18:45.900 --> 00:18:49.630\nWe promise an SLA for people who\nfollow the availability set models.\n\n383\n00:18:49.630 --> 00:18:51.300\nIt's really important that we do this.\n\n384\n00:18:51.300 --> 00:18:52.340\nIt just takes a minute.\n\n385\n00:18:52.340 --> 00:18:53.750\nBut you gotta know to do it.\n\n386\n00:18:53.750 --> 00:18:55.130\nRight?\nThat's the important thing there.\n\n387\n00:18:55.130 --> 00:18:57.460\nAnd then remember what I\nsaid about the portals.\n\n388\n00:18:57.460 --> 00:18:58.990\nI just did this through the New Portal.\n\n389\n00:18:58.990 --> 00:18:59.640\nRight?\n\n390\n00:18:59.640 --> 00:19:02.680\nLet's take a journey back in time and\ngo to the classic portal.\n\n391\n00:19:02.680 --> 00:19:03.640\nI say back in time.\n\n392\n00:19:03.640 --> 00:19:06.310\nYou still need the classic portal for\na lot of things, right?.\n\n393\n00:19:06.310 --> 00:19:09.070\nBecause there's plenty of things that\njust haven't quite been ported over.\n\n394\n00:19:09.070 --> 00:19:10.140\nAll right.\n\n395\n00:19:10.140 --> 00:19:14.630\nOver here in the classic\nportal if I go and do New, and\n\n396\n00:19:14.630 --> 00:19:16.050\nwhip up a new virtual machine.\n\n397\n00:19:17.580 --> 00:19:20.710\nIf you do quick create, you actually\ndon't see the options you need.\n\n398\n00:19:20.710 --> 00:19:24.080\nBut if you go through the gallery and\ncreate it from the gallery,\n\n399\n00:19:24.080 --> 00:19:26.090\nthat's where you get all\nyour advanced settings.\n\n400\n00:19:26.090 --> 00:19:27.720\nAnd so\nyou can give a virtual machine a name.\n\n401\n00:19:27.720 --> 00:19:31.790\nSo, this can be itprotv what,\n13 and I'll create a username.\n\n402\n00:19:34.450 --> 00:19:37.440\nYou know, I used to hate the classic\nportal but the more I use the new portal I\n\n403\n00:19:37.440 --> 00:19:39.230\nstart appreciating the classic\nportal a little more.\n\n404\n00:19:39.230 --> 00:19:41.030\nI kind of don't like either portal,\nbut still,\n\n405\n00:19:41.030 --> 00:19:43.230\nwe've gotta make do with what we've got.\n\n406\n00:19:43.230 --> 00:19:46.280\nSo here I can pick my cloud service,\nI can join an existing one or\n\n407\n00:19:46.280 --> 00:19:47.880\nstart a new one if I want.\n\n408\n00:19:47.880 --> 00:19:52.050\nSo there's my cloud service being set, and\nthen right here is my availability set.\n\n409\n00:19:52.050 --> 00:19:54.500\nAnd so I can choose an existing\navailabilities set or\n\n410\n00:19:54.500 --> 00:19:55.360\nI can create a new one.\n\n411\n00:19:55.360 --> 00:19:59.010\nAnd so I don't have one right now,\nso I'm gonna create a new one.\n\n412\n00:19:59.010 --> 00:20:01.800\nNow I'm joining an existing cloud service,\n\n413\n00:20:01.800 --> 00:20:04.160\nthis is a cloud service\ncalled itvprotv-web.\n\n414\n00:20:04.160 --> 00:20:07.830\nBut whatever nodes are in there must not\nbe in the availability set cuz I don't see\n\n415\n00:20:07.830 --> 00:20:09.230\none in the drop down list.\n\n416\n00:20:09.230 --> 00:20:09.740\nRight?\n\n417\n00:20:09.740 --> 00:20:12.530\nSo from here I can chose\nCreate an availability set and\n\n418\n00:20:12.530 --> 00:20:13.910\nI can create a new one.\n\n419\n00:20:13.910 --> 00:20:18.320\nAnd so I'll call this you know itprotv-web\nor whatever name it is I want to give it.\n\n420\n00:20:18.320 --> 00:20:19.080\nOkay?\n\n421\n00:20:19.080 --> 00:20:21.430\nNo other options to be\nspecified here right?\n\n422\n00:20:21.430 --> 00:20:26.020\nSo it's not giving me the chance to\nspecify how many update domains?\n\n423\n00:20:26.020 --> 00:20:27.020\nHow many fault domains?\n\n424\n00:20:27.020 --> 00:20:28.670\nI don't get that functionality.\n\n425\n00:20:28.670 --> 00:20:30.240\nBut I am able to create\nthe availability set.\n\n426\n00:20:30.240 --> 00:20:35.440\nAnd then on the next screen,\noops, it says the cloud\n\n427\n00:20:35.440 --> 00:20:38.370\nservice I've selected does not support\nthe virtual machine size that I picked.\n\n428\n00:20:38.370 --> 00:20:42.060\nAll right, I need to pick a smaller or\na higher virtual machine size.\n\n429\n00:20:42.060 --> 00:20:43.360\nLet me go back here.\n\n430\n00:20:43.360 --> 00:20:44.170\nWhat size did I pick?\n\n431\n00:20:44.170 --> 00:20:44.860\nA D1 core.\n\n432\n00:20:45.990 --> 00:20:48.470\nSo it must be one that's upgraded,\nso I'll go to a D1 v2.\n\n433\n00:20:48.470 --> 00:20:50.580\nI bet that'll make it happy.\n\n434\n00:20:51.830 --> 00:20:54.850\nSo now that I've chosen a different size,\nlet's see if it will be happy with that.\n\n435\n00:20:54.850 --> 00:20:59.900\nI'll go in here and recreate my\navailability set, and we'll move forward.\n\n436\n00:20:59.900 --> 00:21:00.890\nThere we go.\n\n437\n00:21:00.890 --> 00:21:04.170\nAnd now I get my little let's install\nextra stuff screen, which I'll leave be,\n\n438\n00:21:04.170 --> 00:21:05.480\nand we'll finish that one up.\n\n439\n00:21:05.480 --> 00:21:11.150\nSo now, that's deploying the virtual\nmachine in the cloud service.\n\n440\n00:21:11.150 --> 00:21:13.320\nAnd it's creating the availability set.\n\n441\n00:21:13.320 --> 00:21:16.910\nAnd as soon as that availability set is\ndone, the nice part about the old portal\n\n442\n00:21:16.910 --> 00:21:19.480\nis I can go into the cloud service and\nI can take the other\n\n443\n00:21:19.480 --> 00:21:23.100\nnodes in that cloud service, and\nI can add them to that availability.\n\n444\n00:21:23.100 --> 00:21:25.010\nSo that's something we\ncan't do in the new portal.\n\n445\n00:21:25.010 --> 00:21:26.480\nAnd that'll help to make\nsure we redistribute.\n\n446\n00:21:26.480 --> 00:21:30.900\nNow quick word of warning, if you\ntake an existing virtual machine and\n\n447\n00:21:30.900 --> 00:21:34.780\nadd it to an availability set,\nthe odds are,\n\n448\n00:21:34.780 --> 00:21:36.870\nMicrosoft's gonna have\nto move your machine.\n\n449\n00:21:36.870 --> 00:21:38.970\nAnd when they move it,\nit's gonna be a reboot.\n\n450\n00:21:38.970 --> 00:21:40.430\nSo that means you're gonna have downtime.\n\n451\n00:21:40.430 --> 00:21:43.590\nWell, if you just brought up a node,\nthen you should be covered, right?\n\n452\n00:21:43.590 --> 00:21:45.290\nYou have a load balancing set,\nit's covering, and\n\n453\n00:21:45.290 --> 00:21:46.770\nit's okay to reboot these other nodes.\n\n454\n00:21:46.770 --> 00:21:50.150\nBut if you haven't set up a load balancing\nset yet, you'll probably wanna wait.\n\n455\n00:21:50.150 --> 00:21:53.890\nTo configure the availability set,\nand get a load balancing set up first.\n\n456\n00:21:53.890 --> 00:21:57.990\nBecause when you move a virtual\nmachine into an availability set, it,\n\n457\n00:21:57.990 --> 00:22:03.620\nnot always, but, maybe I'm just a lucky\nguy, it seems like it happens to me a lot.\n\n458\n00:22:03.620 --> 00:22:06.320\nIt seems like most of\nthe time it causes a reboot.\n\n459\n00:22:06.320 --> 00:22:07.540\nSo you definitely wanna be aware that.\n\n460\n00:22:07.540 --> 00:22:10.000\nThat it can reboot it when\nyou move availability sets.\n\n461\n00:22:10.000 --> 00:22:13.770\nAnd the reason is,\nis that we're moving between these guys.\n\n462\n00:22:13.770 --> 00:22:15.530\nRight?\nI might be in fault domain zero that says,\n\n463\n00:22:15.530 --> 00:22:18.260\nwhoa, we need to put this VM\nover here in fault domain one.\n\n464\n00:22:18.260 --> 00:22:19.570\nOr you might be in update domain two and\n\n465\n00:22:19.570 --> 00:22:21.700\nit says whoop, nope, we need to\nmove you to update domain three.\n\n466\n00:22:21.700 --> 00:22:23.730\nAnd so\nto do that it's got to reboot your system.\n\n467\n00:22:23.730 --> 00:22:25.710\nSo, that's one of the things that happens.\n\n468\n00:22:25.710 --> 00:22:26.640\nAnd you may see that.\n\n469\n00:22:26.640 --> 00:22:30.642\n>> What Don doesn't know, is they have a\ndedicated employee just to mess with him.\n\n470\n00:22:30.642 --> 00:22:31.650\n[LAUGH]\n>> Yeah, it seems-\n\n471\n00:22:31.650 --> 00:22:32.408\n>> Oh, it's Don again.\n\n472\n00:22:32.408 --> 00:22:34.440\n[LAUGH]\n>> It seems like you should look out.\n\n473\n00:22:34.440 --> 00:22:35.060\n>> Yeah.\n>> I just\n\n474\n00:22:35.060 --> 00:22:36.550\nhappened to be in fault domain one.\n\n475\n00:22:36.550 --> 00:22:39.910\nBut it never happened, well, I shouldn't\nsay never, it has happened before.\n\n476\n00:22:39.910 --> 00:22:42.820\nBut for the most part,\nit seems like it doesn't happen for me.\n\n477\n00:22:42.820 --> 00:22:44.620\nAll right.\nWell, I'm kind of stalling here, because.\n\n478\n00:22:44.620 --> 00:22:46.050\n>> [LAUGH]\n>> I'm letting that virtual machine start.\n\n479\n00:22:46.050 --> 00:22:46.960\nIt's starting up.\n\n480\n00:22:46.960 --> 00:22:49.010\nI don't actually have to wait for\nit to start.\n\n481\n00:22:49.010 --> 00:22:51.100\nI just have to wait for\nit to create the availability set,\n\n482\n00:22:51.100 --> 00:22:53.350\nwhich it very well might have done by now.\n\n483\n00:22:53.350 --> 00:22:54.410\nI can find that out.\n\n484\n00:22:54.410 --> 00:22:56.780\nIf I go into my cloud service.\n\n485\n00:22:56.780 --> 00:23:00.020\nAnd I've only got one cloud service,\nthis ITProTV web.\n\n486\n00:23:00.020 --> 00:23:03.190\nAnd the instance that I just spun up.\n\n487\n00:23:03.190 --> 00:23:04.040\nIt's coming up right?\n\n488\n00:23:04.040 --> 00:23:05.650\nSo I get a big PROVISIONING warning,\none or\n\n489\n00:23:05.650 --> 00:23:08.370\nmore instances are currently\nbeing provisioned.\n\n490\n00:23:08.370 --> 00:23:11.540\nAnd if I go under my INSTANCES I\ncan see that itvprotv web13,\n\n491\n00:23:11.540 --> 00:23:13.190\nthat's the one that's coming up.\n\n492\n00:23:13.190 --> 00:23:16.380\nBut I've already got web01 and\nweb02 they're in here, right?\n\n493\n00:23:16.380 --> 00:23:20.380\nAnd so with these guys I don't know if\nthey're an availability set or not, right?\n\n494\n00:23:20.380 --> 00:23:22.930\nIf I look over here they aren't, right?\n\n495\n00:23:22.930 --> 00:23:25.820\nBecause I can see everybody's\nin update domain 0,\n\n496\n00:23:25.820 --> 00:23:27.910\nand everybody's in fault domain 0.\n\n497\n00:23:27.910 --> 00:23:31.770\nSo, that's the perfect storm for\nblowing my SLA.\n\n498\n00:23:31.770 --> 00:23:35.340\nIf fault domain 0 goes down right now,\nall three of my nodes go down.\n\n499\n00:23:35.340 --> 00:23:37.880\nEven if I have a load balancing\nset it's not gonna help me here.\n\n500\n00:23:37.880 --> 00:23:39.580\nSo, I need to get these\nguys rearranged and\n\n501\n00:23:39.580 --> 00:23:42.280\nit's also a guarantee that\nI'm gonna have a reboot.\n\n502\n00:23:42.280 --> 00:23:43.270\nRight?\nBecause\n\n503\n00:23:43.270 --> 00:23:46.490\nthese guys are all on the same one so when\nI change it's going to have to move them.\n\n504\n00:23:46.490 --> 00:23:47.755\nSo, I just need to be ready for that.\n\n505\n00:23:47.755 --> 00:23:52.951\nSo, If I take somebody\nlike itprotv-web01 and\n\n506\n00:23:52.951 --> 00:23:56.547\ngo into it's old endpoints here.\n\n507\n00:23:56.547 --> 00:24:00.410\nWhat I can do is I can pull it up, or\nnot in Points, I need to go to Configure.\n\n508\n00:24:00.410 --> 00:24:03.290\nAnd under Configure,\nhere I can see the Availability Set.\n\n509\n00:24:03.290 --> 00:24:07.166\nAnd unlike in the new portal where I just\nsee it, here I can actually drop it down,\n\n510\n00:24:07.166 --> 00:24:10.132\nand I can choose that Availability Set\nthat I created, okay?\n\n511\n00:24:10.132 --> 00:24:12.601\nSo here it's telling me that it's\ngonna move it over there, and\n\n512\n00:24:12.601 --> 00:24:15.520\nthat there's already one virtual\nmachine in there, ITPROTV-WEB13.\n\n513\n00:24:15.520 --> 00:24:17.130\nAlthough, it's still booting up, right?\n\n514\n00:24:17.130 --> 00:24:19.980\nSo I'm gonna go ahead and\nhit that and save it.\n\n515\n00:24:19.980 --> 00:24:22.250\nAnd so we'll let that one move in.\n\n516\n00:24:22.250 --> 00:24:23.360\nAnd while we're waiting on that,\n\n517\n00:24:23.360 --> 00:24:26.360\nI'll go to itprotv-web02, and\nI'll do the same thing here.\n\n518\n00:24:26.360 --> 00:24:31.520\nSo I'm gonna move it into ITPROTV-WEB,\nand we'll save that.\n\n519\n00:24:31.520 --> 00:24:35.570\nSo when that happens, those nodes,\nthey're gonna have to reboot, right?\n\n520\n00:24:35.570 --> 00:24:39.360\nSo it's basically going to shut them down\nand reboot them on the other system.\n\n521\n00:24:39.360 --> 00:24:42.700\nOr there are some times with Windows\nwhere it'll do a snapshot and\n\n522\n00:24:42.700 --> 00:24:45.160\nmove the snapshot over, so\nit doesn't show us a reboot.\n\n523\n00:24:45.160 --> 00:24:46.660\nOn Linux it's almost always a reboot,\n\n524\n00:24:46.660 --> 00:24:50.380\nand I guess I should qualify that, as I'm\nusually using Linux servers up in Azure.\n\n525\n00:24:50.380 --> 00:24:51.460\nSo I guess it's good.\n\n526\n00:24:51.460 --> 00:24:52.580\n>> [LAUGH] Is it?\n>> Yeah, oh, whatever.\n\n527\n00:24:52.580 --> 00:24:57.840\nSo now that I've got those in place,\nif I go back to my cloud service, and\n\n528\n00:24:57.840 --> 00:25:02.520\nin my cloud service I wanna\ntake a look at my instances.\n\n529\n00:25:02.520 --> 00:25:04.410\nAnd they're kind of\nmoving around right now,\n\n530\n00:25:04.410 --> 00:25:05.966\nso I'm curious to see what I get here.\n\n531\n00:25:05.966 --> 00:25:09.058\nBut itvprotv-web 01, it's had enough time,\n\n532\n00:25:09.058 --> 00:25:12.382\nit's moved into UPDATE DOMAIN 1,\nFAULT DOMAIN 1.\n\n533\n00:25:12.382 --> 00:25:16.215\nAnd what I should see as soon,\nitprotv-web02 is going to move also.\n\n534\n00:25:16.215 --> 00:25:18.466\nIt looks like it's delayed the move.\n\n535\n00:25:18.466 --> 00:25:21.478\nIt probably recognized that I\ndidn't have another node up yet,\n\n536\n00:25:21.478 --> 00:25:23.640\nor I'm just not waiting long enough.\n\n537\n00:25:23.640 --> 00:25:25.270\nBut eventually it'll move, too.\n\n538\n00:25:25.270 --> 00:25:29.490\nBut now it's starting to balance\nthose out, and now I get Microsoft's\n\n539\n00:25:29.490 --> 00:25:34.850\nfull 99.95% SLA, which is not a great SLA,\nbut it's a good SLA.\n\n540\n00:25:34.850 --> 00:25:37.580\n>> Well, Don, obviously this is a real\ngood thing that we need to be able to\n\n541\n00:25:37.580 --> 00:25:41.100\nunderstand because like you said before,\nif we don't do this,\n\n542\n00:25:41.100 --> 00:25:43.590\nthat SLA gets checked to the window.\n\n543\n00:25:43.590 --> 00:25:46.200\nMicrosoft is gonna say hey,\nyou kinda out of luck there, buddy.\n\n544\n00:25:46.200 --> 00:25:50.890\nYou didn't follow proper procedures so\nwe can't guarantee that level of uptime.\n\n545\n00:25:50.890 --> 00:25:53.840\nSo, it's a really important thing\nthat you understand how this works,\n\n546\n00:25:53.840 --> 00:25:57.290\nthat you're able to do it, so\nthat you can get that SLA.\n\n547\n00:25:57.290 --> 00:25:58.060\nNow, Don, that being said,\n\n548\n00:25:58.060 --> 00:25:59.970\nis there anything else that we\nneed to know about this for\n\n549\n00:25:59.970 --> 00:26:01.420\nthis particular episode?\n\n550\n00:26:01.420 --> 00:26:02.275\n>> That's basically it.\n\n551\n00:26:02.275 --> 00:26:06.110\nThis is one of those little owner's manual\ntype items that you just need to be\n\n552\n00:26:06.110 --> 00:26:07.260\naware of, put it on your checklist,\n\n553\n00:26:07.260 --> 00:26:11.140\nthat when you deploy virtual machines\nmake sure you assign an availability set.\n\n554\n00:26:11.140 --> 00:26:12.520\nAnd if you've already got VMs out there,\n\n555\n00:26:12.520 --> 00:26:14.430\nyou may need to add them\nto an availability set.\n\n556\n00:26:14.430 --> 00:26:17.720\nA lot of people don't realize it,\ndon't know that functionality's there.\n\n557\n00:26:17.720 --> 00:26:21.900\nAnd I guess it's worth mentioning also\nthat if your using Azure Traffic Manager\n\n558\n00:26:21.900 --> 00:26:26.040\nor DNS Round Robining and bouncing across\nresources in different regions, then you\n\n559\n00:26:26.040 --> 00:26:30.410\nmight not care about the FDs and UDs\nbecause if you're in different regions,\n\n560\n00:26:30.410 --> 00:26:33.050\nyou're guaranteed to be\nin separate FDs and UDs.\n\n561\n00:26:33.050 --> 00:26:36.290\nBut if you've got resources\nto deployed in one region,\n\n562\n00:26:36.290 --> 00:26:37.380\nthis is something you need to be aware of.\n\n563\n00:26:37.380 --> 00:26:39.480\nIt's definitely something\nthat you need to configure.\n\n564\n00:26:39.480 --> 00:26:40.540\n>> All right, well, excellent Don.\n\n565\n00:26:40.540 --> 00:26:44.000\nThank you so much for explaining this to\nus, very important topic for us to know.\n\n566\n00:26:44.000 --> 00:26:47.080\nThat's being said, I guess it's time\nto go ahead and close the show.\n\n567\n00:26:47.080 --> 00:26:48.610\nThank you guys so much for watching.\n\n568\n00:26:48.610 --> 00:26:50.400\nWe're gonna go ahead and\nsign off for ITProTV,\n\n569\n00:26:50.400 --> 00:26:52.330\nI've been your host Daniel Lowery.\n\n570\n00:26:52.330 --> 00:26:52.890\n>> And I'm Don Pezet.\n\n571\n00:26:52.890 --> 00:26:54.882\n>> And we'll see you next time.\n\n572\n00:26:54.882 --> 00:27:00.470\n[MUSIC]\n\n",
          "vimeoId": "152192397"
        },
        {
          "description": "In this episode, Daniel and Don explain and demonstrate how to autoscale your Azure Virtual Machine environment. Autoscaling is a great way to make sure that an expected level of performance is being achieved as well as saving you money. Here Don and Daniel show you how to configure autoscaling, which includes setting up triggers(CPU, Queues, and Schedules) and attaching to an Availability Group. They also cover best practices concepts when setting up your autoscaling systems.",
          "length": "2057",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-4-2-autoscaling-012016-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-4-2-autoscaling-012016-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-4-2-autoscaling-012016-1-sm.jpg",
          "title": "Autoscaling",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:12.044 --> 00:00:16.201\nAll right, greetings everyone and welcome\nto another great episode of ITProTV.\n\n3\n00:00:16.201 --> 00:00:20.050\nI'm your host Daniel Lowrie, and\non today's episode well we are continuing\n\n4\n00:00:20.050 --> 00:00:23.530\non that Azure Virtual Machine series that\nwe've been working so hard on, and joining\n\n5\n00:00:23.530 --> 00:00:27.570\nus in the studio again today is none other\nthan our good friend, Mr. Don Pezet.\n\n6\n00:00:27.570 --> 00:00:29.030\nDon, welcome to the show, sir.\n\n7\n00:00:29.030 --> 00:00:29.910\nHow you doing today?\n\n8\n00:00:29.910 --> 00:00:30.940\n>> I am doing great, Daniel.\n\n9\n00:00:30.940 --> 00:00:33.230\nAnd I'm excited to be back into Azure VM,\n\n10\n00:00:33.230 --> 00:00:36.400\nbecause today we're gonna look\nat a technology that I think is\n\n11\n00:00:36.400 --> 00:00:40.150\njust one of the key shining features\nof having our servers up in the cloud.\n\n12\n00:00:40.150 --> 00:00:42.020\nAnd that's auto scaling.\n\n13\n00:00:42.020 --> 00:00:45.720\nWe're gonna take a look at how\nwe can dynamically power up and\n\n14\n00:00:45.720 --> 00:00:49.160\npower down virtual machines\nas we need them, which is\n\n15\n00:00:49.160 --> 00:00:52.570\nreally where we start to get our money's\nworth out of using a cloud service.\n\n16\n00:00:52.570 --> 00:00:55.340\nYou know,\nwe've seen in all of our earlier episodes,\n\n17\n00:00:55.340 --> 00:00:57.380\nthere's a lot of benefits to\nputting our stuff in the cloud.\n\n18\n00:00:57.380 --> 00:01:02.110\nThe multiple data centers, the power and\nnetwork redundancy, the state of\n\n19\n00:01:02.110 --> 00:01:05.170\nthe art network operations center\nthat's monitoring all this equipment.\n\n20\n00:01:05.170 --> 00:01:06.690\nAll of those benefits.\n\n21\n00:01:06.690 --> 00:01:08.880\nBut I think this one, autoscaling,\n\n22\n00:01:08.880 --> 00:01:12.420\nis probably one of the greatest benefits\ncuz it's the one that can save some money.\n\n23\n00:01:12.420 --> 00:01:14.890\nAnd when you're trying to\nsell a service to your CIO or\n\n24\n00:01:14.890 --> 00:01:18.160\nyour IT director,\nusually it's what it boils down to is hey,\n\n25\n00:01:18.160 --> 00:01:21.750\nif I have my stuff on site, I have control\nover it, I know how much it costs.\n\n26\n00:01:21.750 --> 00:01:24.650\nWhen I put it in the cloud there's risk,\nbut if you can show me where it saves\n\n27\n00:01:24.650 --> 00:01:27.610\nmoney, then it's an easy decision,\nlet's get ourselves up in the cloud.\n\n28\n00:01:27.610 --> 00:01:29.540\nSo, that's what we're going\nto take a look at today and\n\n29\n00:01:29.540 --> 00:01:31.380\nyou'll see that it's pretty\neasy to get deployed.\n\n30\n00:01:31.380 --> 00:01:35.280\n>> Yeah, our CIO used to have a motto he\nlived by, he said, I wanna save money,\n\n31\n00:01:35.280 --> 00:01:36.395\nbecause money saving is good.\n\n32\n00:01:36.395 --> 00:01:39.540\n[LAUGH] And you know what,\nI tended to agree with him.\n\n33\n00:01:39.540 --> 00:01:44.960\nThis is a very awesome, actually, beyond\nthe fact it's going to save you money,\n\n34\n00:01:44.960 --> 00:01:47.550\nwhich is obviously a good thing.\n\n35\n00:01:47.550 --> 00:01:52.070\nBut it's just a really cool technology\nto say, hey grow when I need to grow and\n\n36\n00:01:52.070 --> 00:01:54.560\nshrink when I need to shrink and\ndo that for me.\n\n37\n00:01:54.560 --> 00:01:56.520\nI don't wanna have to administrate this.\n\n38\n00:01:56.520 --> 00:01:58.670\nI'm just gonna set it,\nforget it and walk away from it and\n\n39\n00:01:58.670 --> 00:02:02.100\nI know that when I need CPU,\nif I need more, if I need this, that or\n\n40\n00:02:02.100 --> 00:02:04.730\nthe other,\nit's gonna just auto do that for me.\n\n41\n00:02:04.730 --> 00:02:07.200\nNow it comes on the question Don is,\nhow do we do that and\n\n42\n00:02:07.200 --> 00:02:08.370\nthat's what our show is about today,\nright?\n\n43\n00:02:08.370 --> 00:02:09.340\n>> Absolutely, yup.\n\n44\n00:02:09.340 --> 00:02:12.460\nSo let's start off really basic here\nwith just how auto-scaling works,\n\n45\n00:02:12.460 --> 00:02:13.755\nthen we'll see how set it up.\n\n46\n00:02:13.755 --> 00:02:15.530\nKinda understand how it works.\n\n47\n00:02:15.530 --> 00:02:19.090\nNow in our early episodes, if you've been\nwatching them, we covered things like\n\n48\n00:02:19.090 --> 00:02:22.610\nsetting up load balance sets, and\nsetting up availability group.\n\n49\n00:02:22.610 --> 00:02:25.740\nThose are important because when it comes\nto auto-scaling you're gonna need both.\n\n50\n00:02:25.740 --> 00:02:29.070\nAuto scaling doesn't work well by itself,\nin fact, it doesn't work at all by itself.\n\n51\n00:02:29.070 --> 00:02:33.840\nIt has to be combined with an availability\nset and a load balancing set.\n\n52\n00:02:33.840 --> 00:02:36.500\nRight now, remember,\nan availability set, what is that?\n\n53\n00:02:36.500 --> 00:02:40.790\nThat's the different locations of\nhardware in the Microsoft Datacenter.\n\n54\n00:02:40.790 --> 00:02:43.610\nAnd when we start to deploy our hardware\nyou have these fault domains and\n\n55\n00:02:43.610 --> 00:02:45.760\nupdate domains that your stuff\nis getting spread across.\n\n56\n00:02:45.760 --> 00:02:49.470\nIf you're not familiar with these terms,\njump over and check our episode out on\n\n57\n00:02:49.470 --> 00:02:52.880\navailability sets, we did a whole episode\non that, providing that infrastructure.\n\n58\n00:02:52.880 --> 00:02:57.620\nSo once you've got that in place,\nthen you can create a load balancing set.\n\n59\n00:02:57.620 --> 00:03:00.640\nAnd a load balancing set is where\nwe distributed our traffic across\n\n60\n00:03:00.640 --> 00:03:01.600\nmultiple servers.\n\n61\n00:03:01.600 --> 00:03:04.240\nNow, I've got a classic\nDon diagram here and\n\n62\n00:03:04.240 --> 00:03:07.920\nI went to the Salvador Dali School of Art,\nso it's not beautiful or anything.\n\n63\n00:03:07.920 --> 00:03:09.990\nBut I was just trying to demonstrate\nhow we handle the load balancing.\n\n64\n00:03:09.990 --> 00:03:12.180\nAnd you'll see where I've got\nthese three servers over here.\n\n65\n00:03:12.180 --> 00:03:14.720\nThese would be like virtual\nmachines that are up in Azure.\n\n66\n00:03:14.720 --> 00:03:17.530\nAnd my users from the Internet\nare coming in, and\n\n67\n00:03:17.530 --> 00:03:20.030\nI wanna spread that traffic\nacross these three nodes.\n\n68\n00:03:20.030 --> 00:03:24.600\nMaybe I know that my network gets so\nbusy at some points\n\n69\n00:03:24.600 --> 00:03:26.990\nthat I need three virtual machines\nto be able to handle the load,\n\n70\n00:03:26.990 --> 00:03:30.170\nthat one virtual machine couldn't handle\nthe load on its own so I go to three.\n\n71\n00:03:30.170 --> 00:03:32.210\nWell, I need something to\ndistribute that load and\n\n72\n00:03:32.210 --> 00:03:36.750\nthat something is going to either be a\nload balance set or Azure Traffic Manager.\n\n73\n00:03:36.750 --> 00:03:39.980\nOne or the other or you might use a\ncombination of the two depending how many\n\n74\n00:03:39.980 --> 00:03:43.990\nregions you span across, but that's kind\nof a key piece and that's part of Azure.\n\n75\n00:03:43.990 --> 00:03:47.240\nSo, if you haven't watched our episode\non load balance sets definitely\n\n76\n00:03:47.240 --> 00:03:49.280\ncheck that one out,\nwe kinda show how to set that up.\n\n77\n00:03:49.280 --> 00:03:51.790\nBut basically, we're distributing\ntraffic across these three nodes.\n\n78\n00:03:51.790 --> 00:03:53.590\nNow that works great.\n\n79\n00:03:53.590 --> 00:03:57.570\nBut, I know my system needs\nthree servers at peak time.\n\n80\n00:03:58.720 --> 00:04:00.580\nAm I always at peak time?\n\n81\n00:04:00.580 --> 00:04:02.610\nNo.\nSometimes, the system slows down.\n\n82\n00:04:02.610 --> 00:04:04.700\nYou've got these ebbs and flows.\n\n83\n00:04:04.700 --> 00:04:07.110\nIf you deal in like retail for example.\n\n84\n00:04:07.110 --> 00:04:09.670\nYou know the holiday season\nyou get really busy.\n\n85\n00:04:09.670 --> 00:04:12.080\nAnd then during the regular seasons,\nit gets slower.\n\n86\n00:04:12.080 --> 00:04:14.650\nSo you might need more servers at\nsome time and less on the others.\n\n87\n00:04:14.650 --> 00:04:16.700\nNow that, that's not a year model.\n\n88\n00:04:16.700 --> 00:04:18.930\nYou could even go down to\nan individual day, right?\n\n89\n00:04:18.930 --> 00:04:20.770\nYou, you could go to us, ITProTV.\n\n90\n00:04:20.770 --> 00:04:25.140\nOur site gets really busy\nduring the day on weekdays.\n\n91\n00:04:25.140 --> 00:04:29.480\nSo on weekdays, from about eight am\nuntil about eight pm, cause of the,\n\n92\n00:04:29.480 --> 00:04:31.487\nthe US East Coast, West Coast, you know.\n\n93\n00:04:31.487 --> 00:04:33.390\nA lot of our viewers are here in the US.\n\n94\n00:04:33.390 --> 00:04:37.713\nSo we get high traffic from eight am to\neight pm our time, Monday through Friday,\n\n95\n00:04:37.713 --> 00:04:40.828\nthen from eight pm to eight am,\nright, overnight for us,\n\n96\n00:04:40.828 --> 00:04:45.279\nthat's when the rest of the world is awake\nand so we have Australians and people from\n\n97\n00:04:45.279 --> 00:04:49.940\nEngland and all them start jumping in\nthe system, but that's not as many people.\n\n98\n00:04:49.940 --> 00:04:52.260\nHence we don't need as many servers,\nright?\n\n99\n00:04:52.260 --> 00:04:56.300\nAnd then on Saturday and Sunday on the\nweekends, well our traffic really starts\n\n100\n00:04:56.300 --> 00:04:58.520\nto drop down cuz people don't\nlike to study on the weekends.\n\n101\n00:04:58.520 --> 00:05:00.930\nSo we need even less\nservers on the weekends.\n\n102\n00:05:00.930 --> 00:05:04.840\nWell in this model, I've got three servers\nthat are up and I'm paying for all three.\n\n103\n00:05:04.840 --> 00:05:07.290\nAll the time,\nwhether I'm using them or not.\n\n104\n00:05:07.290 --> 00:05:10.510\nWhether I've got enough traffic to\nsaturate all three servers or whether I've\n\n105\n00:05:10.510 --> 00:05:13.790\nonly got enough traffic to saturate\none server, I'm paying for all three.\n\n106\n00:05:13.790 --> 00:05:18.430\nAnd that's because load balance sets\ndon't really pay attention to whether or\n\n107\n00:05:18.430 --> 00:05:20.880\nnot a server actually has to be used,\n\n108\n00:05:20.880 --> 00:05:23.870\nit just wants to make sure that\na server's not getting overused.\n\n109\n00:05:23.870 --> 00:05:27.200\nThat's it, that's what the load balance\nsets in Azure traffic manager do.\n\n110\n00:05:27.200 --> 00:05:32.710\nBut we can combine that with auto scaling\nto start to mirror our utilization.\n\n111\n00:05:32.710 --> 00:05:37.040\nSo let's say on my network, I've got a\nsystem where at midnight things are pretty\n\n112\n00:05:37.040 --> 00:05:41.820\nslow, and then as we get closer to 6 AM,\ntraffic kind of peaks, right.\n\n113\n00:05:41.820 --> 00:05:44.070\nWhatever it is I'm doing,\nthings get kind of busy in the morning.\n\n114\n00:05:44.070 --> 00:05:46.780\nAnd then it slows back down again.\n\n115\n00:05:46.780 --> 00:05:50.370\nAnd then right after lunch, so\nmaybe from noon until about 6PM,\n\n116\n00:05:50.370 --> 00:05:55.050\nthings really start to get busy again and\nthen it trails off at night, right?\n\n117\n00:05:55.050 --> 00:05:57.830\nSo, for\nhalf the day my network's really busy, for\n\n118\n00:05:57.830 --> 00:06:00.050\nanother half of the day\nthe network's really slow.\n\n119\n00:06:00.050 --> 00:06:02.670\nOkay, well the traditional\nmodel is to go out and\n\n120\n00:06:02.670 --> 00:06:04.440\nbuy enough servers to handle your peak.\n\n121\n00:06:04.440 --> 00:06:07.620\nSo let's say it takes me ten\nservers to cover the peak.\n\n122\n00:06:07.620 --> 00:06:09.300\nSo now I've got ten servers.\n\n123\n00:06:09.300 --> 00:06:11.170\nAnd these can be virtual machines,\nit can be physical servers,\n\n124\n00:06:11.170 --> 00:06:11.890\nit doesn't really matter.\n\n125\n00:06:11.890 --> 00:06:13.500\nI've got to have ten to cover it, right.\n\n126\n00:06:13.500 --> 00:06:18.430\nAnd that way my network doesn't get\nslow when I hit one of these peaks, but\n\n127\n00:06:18.430 --> 00:06:19.880\nduring these times.\n\n128\n00:06:19.880 --> 00:06:21.748\nMaybe two or\nthree servers could handle the load and\n\n129\n00:06:21.748 --> 00:06:24.410\nnow I've got seven servers\nsitting there doing nothing.\n\n130\n00:06:24.410 --> 00:06:26.970\nWell, in the old days when I was buying\nphysical servers I didn't have a choice.\n\n131\n00:06:26.970 --> 00:06:29.100\nI had to buy the physical servers and\nyeah, they just sat there and\n\n132\n00:06:29.100 --> 00:06:30.000\ndid nothing during those times.\n\n133\n00:06:30.000 --> 00:06:31.980\nThat was it, it was all I could do.\n\n134\n00:06:31.980 --> 00:06:35.290\nBut in the cloud world,\nthese are just virtual machines.\n\n135\n00:06:35.290 --> 00:06:38.340\nMicrosoft has the hardware on the back\nend and I'm paying for what I use.\n\n136\n00:06:38.340 --> 00:06:41.260\nI'm paying for the time that I've\ngot that machine up and running.\n\n137\n00:06:41.260 --> 00:06:46.020\nSo during this time I could\nshut some servers down right?\n\n138\n00:06:46.020 --> 00:06:48.390\nInstead of having 10 servers I\ncould shut seven of them down and\n\n139\n00:06:48.390 --> 00:06:52.350\ngo down to three servers and\nnow I'm only paying for three servers.\n\n140\n00:06:52.350 --> 00:06:54.880\nAnd then as things get busy\nI can turn them back on.\n\n141\n00:06:54.880 --> 00:06:57.810\nThe problem is,\nI'd have to do that by hand right?\n\n142\n00:06:57.810 --> 00:06:59.610\nAnd if we were talking\nabout a yearly model.\n\n143\n00:06:59.610 --> 00:07:02.460\nHey I know the holiday season is coming\nup, things are going to get busy,\n\n144\n00:07:02.460 --> 00:07:04.030\nyeah give me some turn them on,\nthat's great.\n\n145\n00:07:04.030 --> 00:07:04.750\nRight?\n\n146\n00:07:04.750 --> 00:07:08.910\nBut if I want to do this hour by hour,\nI gotta free up my schedule, right?\n\n147\n00:07:08.910 --> 00:07:10.910\nI gotta just sit here and\nwatch this thing like a hawk and\n\n148\n00:07:10.910 --> 00:07:12.410\nspin these things up as you go.\n\n149\n00:07:12.410 --> 00:07:18.210\nSo what auto scaling does is it makes\nthis happen automatically, right?\n\n150\n00:07:18.210 --> 00:07:22.410\nSo if I need ten servers at my peak,\nit'll give me ten servers at my peak.\n\n151\n00:07:22.410 --> 00:07:26.100\nAnd if I only need two servers,\nit'll shut eight of them down so\n\n152\n00:07:26.100 --> 00:07:29.230\nthat I've only got two up and\nrunning, and then it will grow.\n\n153\n00:07:29.230 --> 00:07:32.500\nAnd it does it on its own, and\nI don't have to worry about it.\n\n154\n00:07:32.500 --> 00:07:36.360\nAnd this can significantly\nreduce your bill with Azure,\n\n155\n00:07:36.360 --> 00:07:41.230\nright, because when you shut those servers\ndown, you still pay for storage, right,\n\n156\n00:07:41.230 --> 00:07:44.580\ncuz the hard drives, they take up space,\nso you are still taking up storage.\n\n157\n00:07:44.580 --> 00:07:46.885\nBut the CPU, the RAM,\nthe network bandwidth,\n\n158\n00:07:46.885 --> 00:07:50.801\nthat all gets returned to Microsoft, and\nthey rent that out to other people and so\n\n159\n00:07:50.801 --> 00:07:53.640\nyou're not paying for\nit anymore you pay for what you use.\n\n160\n00:07:53.640 --> 00:07:58.181\nThis is a big, big, big advantage\nover having your own hardware.\n\n161\n00:07:58.181 --> 00:08:02.693\nWhen you have your own hardware\nyou pay for 100% of it on day one.\n\n162\n00:08:02.693 --> 00:08:06.233\nBut with Azure you just pay for\nwhat you use over time.\n\n163\n00:08:06.233 --> 00:08:10.534\nAnd maybe some day it'll break even\nwith if you had bought your own physical\n\n164\n00:08:10.534 --> 00:08:11.154\nservers.\n\n165\n00:08:11.154 --> 00:08:14.386\nBut usually by that point it's time\nto buy new physical servers and\n\n166\n00:08:14.386 --> 00:08:16.870\nyou end up saving money,\nyou save quite a bit.\n\n167\n00:08:16.870 --> 00:08:19.740\n>> And money saving is good,\nat least that's what I hear and\n\n168\n00:08:19.740 --> 00:08:20.750\nthat's the word on the street.\n\n169\n00:08:20.750 --> 00:08:26.190\nNow Don, the question now becomes, how\ndoes it know That it's time to scale up?\n\n170\n00:08:26.190 --> 00:08:29.470\nHow does it know to add more CPU or\nadd another server or\n\n171\n00:08:29.470 --> 00:08:32.950\ndo any of the things that we need it to do\nto give us the increase in performance.\n\n172\n00:08:32.950 --> 00:08:34.310\n>> Well,\nthat's where we get involved, right.\n\n173\n00:08:34.310 --> 00:08:34.910\nWe have to teach it.\n\n174\n00:08:34.910 --> 00:08:35.535\nWe have to tell it.\n\n175\n00:08:35.535 --> 00:08:37.200\nCuz it's not gonna watch for\nthis stuff by default, right.\n\n176\n00:08:37.200 --> 00:08:41.130\nSo if you want to get auto scaling set up,\nthere's three steps, right?\n\n177\n00:08:41.130 --> 00:08:43.770\nFirst, you've gotta have\nan availability set.\n\n178\n00:08:43.770 --> 00:08:46.060\nRight, this is actually built\noff of the availability set.\n\n179\n00:08:46.060 --> 00:08:47.510\nSo you have to have those, right.\n\n180\n00:08:47.510 --> 00:08:49.770\nIf you haven't defined one,\nthen this isn't gonna work.\n\n181\n00:08:49.770 --> 00:08:53.290\nAnd the availability sets\nare not created by default.\n\n182\n00:08:53.290 --> 00:08:56.460\nWhen you start spinning up your VMs,\nit doesn't put them into a set.\n\n183\n00:08:56.460 --> 00:08:57.760\nSo you gotta make sure you have that.\n\n184\n00:08:57.760 --> 00:09:00.158\nThat's why I say if you haven't\nwatched our availability set episode,\n\n185\n00:09:00.158 --> 00:09:01.229\ncheck that one out, all right?\n\n186\n00:09:01.229 --> 00:09:06.700\nThen two, you've got to have a load\nbalance set or azure traffic manager.\n\n187\n00:09:06.700 --> 00:09:08.352\nCuz if you've got more than one server,\n\n188\n00:09:08.352 --> 00:09:10.499\nhow do your clients know to\nhit more than one server?\n\n189\n00:09:10.499 --> 00:09:13.523\nAnd if you take a server out of the pool\nhow do you know to tell clients not to go\n\n190\n00:09:13.523 --> 00:09:14.980\nto that server anymore?\n\n191\n00:09:14.980 --> 00:09:17.663\nWell the load balance set will\ncontrol that or azure traffic manager.\n\n192\n00:09:17.663 --> 00:09:19.900\nAnd normally it's gonna be\na load balance set, right?\n\n193\n00:09:19.900 --> 00:09:24.180\nSo we need an availability set and\nwe need a load balance set.\n\n194\n00:09:24.180 --> 00:09:28.370\nSo in my environment here let me just\nkind of show you guys on my system.\n\n195\n00:09:28.370 --> 00:09:31.380\nI've already got a couple of servers that\nare up that are in an availability set and\n\n196\n00:09:31.380 --> 00:09:33.250\nthat are in a load balance set.\n\n197\n00:09:33.250 --> 00:09:37.220\nNow I'm going to use the Azure Classic\nportal and, I know what you're saying,\n\n198\n00:09:37.220 --> 00:09:38.400\nwe've got the new portal.\n\n199\n00:09:38.400 --> 00:09:41.200\nIt's out there, it's ready,\nit's not in preview anymore.\n\n200\n00:09:41.200 --> 00:09:41.800\nWell that's great, but\n\n201\n00:09:41.800 --> 00:09:44.240\nthey didn't bother to put auto\nscaling in there in any great amount.\n\n202\n00:09:44.240 --> 00:09:47.370\nSo you can see some auto scaling settings,\nbut you can't really work with it here.\n\n203\n00:09:47.370 --> 00:09:48.670\nSo I'm gonna use the classic portal.\n\n204\n00:09:48.670 --> 00:09:50.250\nAnd eventually they'll update that.\n\n205\n00:09:50.250 --> 00:09:51.910\nI've probably said that\na hundred times in this series.\n\n206\n00:09:51.910 --> 00:09:53.220\nBut eventually they'll update it.\n\n207\n00:09:53.220 --> 00:09:56.440\nBut for now, most of your auto scaling\nwork is either going be done in\n\n208\n00:09:56.440 --> 00:09:58.910\npower shell or from the classic portal.\n\n209\n00:09:58.910 --> 00:10:01.690\nAnd so here in my classic portal,\nI can see I've got a cloud service, right.\n\n210\n00:10:01.690 --> 00:10:04.310\nSo I've got one cloud\nservice called itprotv-web.\n\n211\n00:10:04.310 --> 00:10:08.590\nAnd it's up, it's running, it feels\nlike it's happy, it's in East US 2,\n\n212\n00:10:08.590 --> 00:10:10.120\nhere's its URL.\n\n213\n00:10:10.120 --> 00:10:14.670\nAnd when users go to that URL, I need to\ntell them to basically spread across these\n\n214\n00:10:14.670 --> 00:10:16.240\nservers, I've got five servers.\n\n215\n00:10:16.240 --> 00:10:19.100\nAnd so if I go into ITProTV web and\n\n216\n00:10:19.100 --> 00:10:23.706\nI take a look at the instances that I've\ngot I can see I've got five instances.\n\n217\n00:10:23.706 --> 00:10:27.010\nITProTV Web 01,\nall the way through web 05, right.\n\n218\n00:10:27.010 --> 00:10:33.250\nThey're all up and running, and as I look\nover here, they're in an availability set.\n\n219\n00:10:33.250 --> 00:10:34.750\nAnd so it knew to spread them out.\n\n220\n00:10:34.750 --> 00:10:36.080\nLook at the update domains.\n\n221\n00:10:36.080 --> 00:10:38.480\nEvery one is in a different update domain.\n\n222\n00:10:38.480 --> 00:10:41.300\nWhen you create an availability set,\nyou get five update domains by default.\n\n223\n00:10:41.300 --> 00:10:45.660\nI've got five servers, so I see update\ndomains zero, one, two, three, and four.\n\n224\n00:10:45.660 --> 00:10:49.040\nAnd we get three fault domains by default,\nand for\n\n225\n00:10:49.040 --> 00:10:50.590\nwhatever reason it only used three for me.\n\n226\n00:10:50.590 --> 00:10:51.920\nI guess I don't have enough servers.\n\n227\n00:10:51.920 --> 00:10:54.260\nSo I've got three of them\nin fault domain zero and\n\n228\n00:10:54.260 --> 00:10:57.390\ntwo of them in fault domain one,\nbut different update domains.\n\n229\n00:10:57.390 --> 00:10:59.315\nSo I've got things kind of nice nice and\nbalanced here.\n\n230\n00:10:59.315 --> 00:11:01.925\nIf I lose a fault domain I won't\nlose all of my servers, right.\n\n231\n00:11:01.925 --> 00:11:04.695\nAnd so my system will stay up while\nMicrosoft repairs the damage.\n\n232\n00:11:04.695 --> 00:11:06.735\nRight, so, I've got an availability set.\n\n233\n00:11:06.735 --> 00:11:10.184\nAnd then if I were to take a look\nat any one of these instances,\n\n234\n00:11:10.184 --> 00:11:14.174\nso if I take a look at Itprovtv-web01,\nand I go into its end points,\n\n235\n00:11:14.174 --> 00:11:18.185\nwhen I look at the end points see\nhow it's listening on http port 80?\n\n236\n00:11:18.185 --> 00:11:19.700\nIt's a web server.\n\n237\n00:11:19.700 --> 00:11:23.252\nAnd if I scroll all the way over here\nI'll see it's in a load-balanced\n\n238\n00:11:23.252 --> 00:11:25.320\nset called itprotv-web, right?\n\n239\n00:11:25.320 --> 00:11:27.480\nSo I've got a load-balanced set created,\nand\n\n240\n00:11:27.480 --> 00:11:31.160\nall five of these servers are in that\nload-balanced set for port 80, right?\n\n241\n00:11:31.160 --> 00:11:32.200\nSo my web app is up.\n\n242\n00:11:32.200 --> 00:11:34.340\nAnd you can also see that\nfrom the cloud service.\n\n243\n00:11:34.340 --> 00:11:38.300\nIf I go back to the cloud service screen,\nso I'll just jump back over to that.\n\n244\n00:11:38.300 --> 00:11:43.380\nIn the Dashboard It gives you\na breakdown of all your endpoints.\n\n245\n00:11:43.380 --> 00:11:47.500\nAnd normally you can't have two\nendpoints with the same port number.\n\n246\n00:11:47.500 --> 00:11:51.085\nBut here I can see\nitprotv-web01 on port 80, and\n\n247\n00:11:51.085 --> 00:11:56.540\nitprotv-web02 on port 80,\nitprotv-web03 on port 80, and so on.\n\n248\n00:11:56.540 --> 00:11:59.910\nAnd the only way they can be on the same\nport, is if you're in a load-balanced set.\n\n249\n00:11:59.910 --> 00:12:03.200\nSo I've already done the first two steps,\navailability set, load-balance set.\n\n250\n00:12:04.260 --> 00:12:07.410\nThe next part is to turn on auto-scaling.\n\n251\n00:12:07.410 --> 00:12:10.310\nAnd Microsoft wants you\nto turn on auto-scaling,\n\n252\n00:12:10.310 --> 00:12:12.880\nbecause, they wanna make money, right.\n\n253\n00:12:12.880 --> 00:12:16.960\nSo there's that, making money is good,\nsaving money is good.\n\n254\n00:12:16.960 --> 00:12:17.528\n>> Pays my bills.\n\n255\n00:12:17.528 --> 00:12:19.018\n[LAUGH]\n>> People don't complain when they have\n\n256\n00:12:19.018 --> 00:12:19.840\nextra money.\n\n257\n00:12:19.840 --> 00:12:23.870\nBut at the same time Microsoft knows\nthat if you free up server resources,\n\n258\n00:12:23.870 --> 00:12:25.510\nthey can just rent that\nout to other people.\n\n259\n00:12:25.510 --> 00:12:28.170\nSo they know that they will get their\nmoney either way plus provide a good\n\n260\n00:12:28.170 --> 00:12:29.100\nservice to you.\n\n261\n00:12:29.100 --> 00:12:33.980\nSo the first time you come in to a web\nservice like this, a cloud service.\n\n262\n00:12:33.980 --> 00:12:39.120\nWhen you come into it the little tutorial\nscreen that I skipped a minutes ago,\n\n263\n00:12:39.120 --> 00:12:40.800\nit'll usually have big\nmessage on there like,\n\n264\n00:12:40.800 --> 00:12:43.040\nhey you should really\nconfigure auto scaling.\n\n265\n00:12:43.040 --> 00:12:47.260\nIt can save you up to 60% if\nyou just turn it on, right?\n\n266\n00:12:47.260 --> 00:12:48.940\nSo they kind of inform you of that.\n\n267\n00:12:48.940 --> 00:12:50.000\nHey, you should really turn that on.\n\n268\n00:12:50.000 --> 00:12:54.110\nAnd in fact, right here on the dashboard,\nif I look, there it is.\n\n269\n00:12:54.110 --> 00:12:56.180\nNot even on the tutorial,\nautoscale status.\n\n270\n00:12:56.180 --> 00:12:58.720\nYou need to configure\nthe autoscale service.\n\n271\n00:12:58.720 --> 00:13:01.401\nAutoscale can you save you up to 60,\nI didn't lie, up to 60%,\n\n272\n00:13:01.401 --> 00:13:03.200\nyou'd think I'd seen that message before.\n\n273\n00:13:03.200 --> 00:13:05.865\n>> [LAUGH]\n>> So, they're telling you right here,\n\n274\n00:13:05.865 --> 00:13:07.989\nnot that you want to or you should to.\n\n275\n00:13:07.989 --> 00:13:09.181\nBut you need to,\nyou really need to do this,\n\n276\n00:13:09.181 --> 00:13:10.609\nbecause otherwise you're wasting money,\nright?\n\n277\n00:13:10.609 --> 00:13:13.300\n>> Food, clothing, water, auto-scaling.\n\n278\n00:13:13.300 --> 00:13:16.320\n>> Yeah, yeah, what is it,\nthree things are certain in life?\n\n279\n00:13:16.320 --> 00:13:18.377\nTaxes, death and auto-scaling.\n\n280\n00:13:18.377 --> 00:13:19.428\n[LAUGH]\n>> [LAUGH]\n\n281\n00:13:19.428 --> 00:13:21.203\n>> And this goes not just for Microsoft,\n\n282\n00:13:21.203 --> 00:13:23.035\nif you're doing Amazon Web Services or\n\n283\n00:13:23.035 --> 00:13:25.570\nsomething else you do\nthe same thing there.\n\n284\n00:13:25.570 --> 00:13:28.820\nSo we can configure autoscale\nright here to get this turned on.\n\n285\n00:13:28.820 --> 00:13:32.810\nWe also have a few other ways that you\ncan kinda jump into autoscaling and\n\n286\n00:13:32.810 --> 00:13:33.350\nget it set up.\n\n287\n00:13:33.350 --> 00:13:35.540\nAnd I'm just gonna use\nthe Configure Autoscale link right here.\n\n288\n00:13:36.610 --> 00:13:40.750\nAnd we'll jump in and Daniel's question,\nwhich I've taken a super long time to\n\n289\n00:13:40.750 --> 00:13:45.080\nanswer, was how does it\nknow when to autoscale?\n\n290\n00:13:45.080 --> 00:13:47.840\nAnd first off, it knows not to do it,\ncuz it's not turned on.\n\n291\n00:13:47.840 --> 00:13:48.750\nSo we gotta tell it to do it.\n\n292\n00:13:48.750 --> 00:13:50.040\nAnd then secondly,\n\n293\n00:13:50.040 --> 00:13:54.110\nwe have to tell it when to auto-scale,\nand it's up to us how we wanna do it.\n\n294\n00:13:54.110 --> 00:13:56.070\nThere's three ways that we can do it, and\n\n295\n00:13:56.070 --> 00:14:00.400\nthe first way is right up here at the top,\nwith setting a schedule.\n\n296\n00:14:00.400 --> 00:14:03.010\nI say at the top, and then I point\ndown here at the bottom of the screen.\n\n297\n00:14:03.010 --> 00:14:04.720\nIf I were to scroll down.\n\n298\n00:14:04.720 --> 00:14:07.980\nThe actual top here is telling me\nI should configure autoscaling.\n\n299\n00:14:07.980 --> 00:14:09.230\nThat would be a good idea.\n\n300\n00:14:09.230 --> 00:14:11.910\nAnd then it's telling me if\nI have an availability set.\n\n301\n00:14:11.910 --> 00:14:14.530\nRemember, if I don't have\nan availability set, this doesn't work.\n\n302\n00:14:14.530 --> 00:14:17.710\nAnd so it's telling me yes,\nyou do have an availability set and\n\n303\n00:14:17.710 --> 00:14:19.820\nautoscaling is turned off for it.\n\n304\n00:14:19.820 --> 00:14:22.520\nCuz it's the availability set\nthat does the autoscaling.\n\n305\n00:14:22.520 --> 00:14:24.630\nReally important to remember\nthat these go hand in hand.\n\n306\n00:14:24.630 --> 00:14:27.330\nAnd then if I just have\nan availability set,\n\n307\n00:14:27.330 --> 00:14:29.920\nit'll let me turn this on,\neven without a load balancer.\n\n308\n00:14:29.920 --> 00:14:31.110\nYou can do that.\n\n309\n00:14:31.110 --> 00:14:32.576\nIt doesn't work, but you can do that.\n\n310\n00:14:32.576 --> 00:14:35.283\nAnd to make it really work you've\ngotta have a load balancer so\n\n311\n00:14:35.283 --> 00:14:38.190\nthat your traffic gets\ndistributed across the nodes.\n\n312\n00:14:38.190 --> 00:14:41.090\nOtherwise people don't know\nwhether a node is up or down,\n\n313\n00:14:41.090 --> 00:14:42.240\nthey don't know it hit\nthe different systems.\n\n314\n00:14:42.240 --> 00:14:43.800\nSo you gotta have a load\nbalancer somewhere.\n\n315\n00:14:43.800 --> 00:14:45.610\nIt might not be a load balance set.\n\n316\n00:14:45.610 --> 00:14:49.370\nMaybe you've got some F5 load balancers or\nbig IP boxes or\n\n317\n00:14:49.370 --> 00:14:51.420\nsomething like that that's\nin place that are doing it.\n\n318\n00:14:51.420 --> 00:14:54.410\nOr you've got your own proprietary load\nbalancing system, that's fine too,\n\n319\n00:14:54.410 --> 00:14:55.760\nlike with Microsoft SQL.\n\n320\n00:14:55.760 --> 00:14:58.150\nSQL will do its own load balancing,\nif you let it, so\n\n321\n00:14:58.150 --> 00:14:59.480\nyou wouldn't need a load balance set for\nthat.\n\n322\n00:14:59.480 --> 00:15:02.880\nBut you do need load balancing of\nsome sort for this to really work.\n\n323\n00:15:02.880 --> 00:15:04.580\nAnd then you need that availability set.\n\n324\n00:15:04.580 --> 00:15:05.790\nNo way around that, right?\n\n325\n00:15:05.790 --> 00:15:06.490\nSo it sees mine.\n\n326\n00:15:06.490 --> 00:15:09.290\nI've got five standard D1\ninstances in mine right now.\n\n327\n00:15:09.290 --> 00:15:10.700\nAuto scaling is not on.\n\n328\n00:15:10.700 --> 00:15:12.270\nAuto scale prediction is recommended,\nright?\n\n329\n00:15:12.270 --> 00:15:13.810\nIt recommends that I turn this stuff on.\n\n330\n00:15:13.810 --> 00:15:17.250\nAnd then when I turn it on I can\ntell it to do it on a schedule.\n\n331\n00:15:17.250 --> 00:15:23.570\nIf I know, hey I know my system is busy\nfrom 4 PM to 6 PM, so I wanna scale up.\n\n332\n00:15:23.570 --> 00:15:27.270\nAnd then at 6:00 PM I wanna scale back\ndown again, I can just define a schedule.\n\n333\n00:15:27.270 --> 00:15:32.000\nIf you already know the windows of time\nthat you're gonna need, you can go right\n\n334\n00:15:32.000 --> 00:15:36.350\nover here to set up schedule and times,\nand we can define that schedule.\n\n335\n00:15:36.350 --> 00:15:40.030\nAnd so you come through and you can\ntell it, hey, I've got scale settings,\n\n336\n00:15:40.030 --> 00:15:42.980\nI might have different scale settings for\nday and night, I might not.\n\n337\n00:15:42.980 --> 00:15:43.820\nI can specify that.\n\n338\n00:15:43.820 --> 00:15:46.230\nI might have different scale settings for\nweekdays versus weekends.\n\n339\n00:15:46.230 --> 00:15:50.020\nI know here on IT ProTV we do, different\nneeds on the weekend as a weekday.\n\n340\n00:15:50.020 --> 00:15:53.059\nAnd then we tell it when the day starts,\nwhen the day ends, and\n\n341\n00:15:53.059 --> 00:15:57.050\nwhat specific dates and times we might\nwanna perform scale operations, right?\n\n342\n00:15:57.050 --> 00:16:00.390\nAnd this would be, hey,\nI know the holiday season is coming.\n\n343\n00:16:00.390 --> 00:16:02.817\nI know there's Black Friday\nright after Thanksgiving.\n\n344\n00:16:02.817 --> 00:16:06.985\nAnd so On November 15th,\nas we start getting close to Thanksgiving,\n\n345\n00:16:06.985 --> 00:16:10.750\nwhen those big sales hit,\nI wanna add more servers.\n\n346\n00:16:10.750 --> 00:16:13.990\nAnd then when January 2nd rolls around and\nthe holiday season is over,\n\n347\n00:16:13.990 --> 00:16:16.830\nI wanna get rid of some of those servers\nso I can come in and I can put a specific\n\n348\n00:16:16.830 --> 00:16:21.180\ndate of start and an end and I can tell\nit that's gonna be my schedule and\n\n349\n00:16:21.180 --> 00:16:23.490\nI wanna increase or\ndecrease my server level.\n\n350\n00:16:23.490 --> 00:16:24.070\nOkay?\n\n351\n00:16:24.070 --> 00:16:29.900\nSo I might come in here and create one\ncalled, holiday season, and I'll start it.\n\n352\n00:16:29.900 --> 00:16:36.770\nLet's start it, let's see we'll\ngo forward in time to November\n\n353\n00:16:36.770 --> 00:16:43.340\n15th and you know start time we can\njust start right at the very beginning.\n\n354\n00:16:43.340 --> 00:16:46.190\nJust hours and\nminutes doesn't need seconds.\n\n355\n00:16:46.190 --> 00:16:47.510\nThere we go.\n\n356\n00:16:47.510 --> 00:16:48.730\nOops, still not happy.\n\n357\n00:16:48.730 --> 00:16:49.880\n>> It still hates you.\n\n358\n00:16:49.880 --> 00:16:50.540\n>> What does it need?\n\n359\n00:16:50.540 --> 00:16:51.360\nI need to say AM or PM.\n\n360\n00:16:51.360 --> 00:16:52.370\nSo I guess that would be AM.\n\n361\n00:16:53.430 --> 00:16:55.094\nCome on, really?\n\n362\n00:16:55.094 --> 00:16:57.200\n>> [LAUGH] No space between it, probably.\n\n363\n00:16:57.200 --> 00:16:58.724\n>> All right, you know what, we'll start\nat 1 AM, it'll be happy with that.\n\n364\n00:16:58.724 --> 00:17:02.841\nThere we go.\n[LAUGH] Apparently it doesn't wanna start\n\n365\n00:17:02.841 --> 00:17:04.240\nat midnight.\n\n366\n00:17:04.240 --> 00:17:06.850\nAnd then we'll just say we'll end at, and\n\n367\n00:17:06.850 --> 00:17:10.450\nwe'll go to January 2017,\nand I'll say January 3rd.\n\n368\n00:17:10.450 --> 00:17:11.300\nHoliday seasons are over,\n\n369\n00:17:11.300 --> 00:17:16.090\nmaybe I'm dealing with a lot of returns\nnow, but otherwise, that's that.\n\n370\n00:17:16.090 --> 00:17:17.650\nRight?\nSo, there we go.\n\n371\n00:17:17.650 --> 00:17:21.690\nAnd I can punch in more stuff,\nI can punch in less stuff, it's up to me.\n\n372\n00:17:23.320 --> 00:17:26.140\nAnd now I got that kind of defined.\n\n373\n00:17:26.140 --> 00:17:28.860\nAnd you can add in, again, more things\nto your schedule if you need to, and\n\n374\n00:17:28.860 --> 00:17:30.270\nI'll just check that.\n\n375\n00:17:30.270 --> 00:17:32.598\nAnd so now I've got a schedule featuring.\n\n376\n00:17:32.598 --> 00:17:34.170\n>> A calendar [LAUGH].\n\n377\n00:17:34.170 --> 00:17:36.080\n>> A calendar that's\nnever going to go away.\n\n378\n00:17:36.080 --> 00:17:39.030\nBut once I've got that up I've got this\nedit settings or edit scale settings for\n\n379\n00:17:39.030 --> 00:17:40.200\nschedule, and I can come here in and\n\n380\n00:17:40.200 --> 00:17:44.630\nI can choose holiday season and\nnow it knows when I want to scale.\n\n381\n00:17:44.630 --> 00:17:46.720\nI want to scale during the holiday season.\n\n382\n00:17:46.720 --> 00:17:50.530\nOkay, so I can specify that and\nnow I can come down and\n\n383\n00:17:50.530 --> 00:17:53.020\nI can tell it what I want to do.\n\n384\n00:17:53.020 --> 00:17:55.520\nAnd right down here,\nI define my instance count.\n\n385\n00:17:55.520 --> 00:17:58.800\nAnd so I'm saying, how many instances\ndo I want in the holiday season?\n\n386\n00:17:58.800 --> 00:18:01.680\nRight now, let's say five,\nI've got my max instances, right.\n\n387\n00:18:01.680 --> 00:18:04.120\nSo that's probably what I want\nduring the holiday season.\n\n388\n00:18:04.120 --> 00:18:06.730\nI can then create another schedule for\nthe rest of the year and\n\n389\n00:18:06.730 --> 00:18:10.030\nI can take that one and\ndrop it down to two instances.\n\n390\n00:18:10.030 --> 00:18:10.700\nRight?\nSo\n\n391\n00:18:10.700 --> 00:18:13.210\nnow I can define that\nbased on that schedule.\n\n392\n00:18:13.210 --> 00:18:15.410\nNow, that's one way to go\nabout it based on this,\n\n393\n00:18:15.410 --> 00:18:18.600\nif you know the windows of\ntime when you want to scale.\n\n394\n00:18:18.600 --> 00:18:20.000\nBut what if you don't\nknow the windows of time?\n\n395\n00:18:20.000 --> 00:18:21.370\nOftentimes we don't, right?\n\n396\n00:18:21.370 --> 00:18:23.310\nIf you don't know the windows of time,\n\n397\n00:18:23.310 --> 00:18:26.560\nit's better to have the system\ndetect it for us, right?\n\n398\n00:18:26.560 --> 00:18:29.830\nAnd one way we can do that\nis by tracking a metric.\n\n399\n00:18:29.830 --> 00:18:33.710\nSo up here on my schedule, I'm just gonna\ngo back to no scheduled times, right?\n\n400\n00:18:33.710 --> 00:18:39.480\nAnd I can come in and I can set whether\nI wanna track by CPU or by QUEUE.\n\n401\n00:18:39.480 --> 00:18:42.970\nAnd so these are two neat little things\nthat we can use to track basically what\n\n402\n00:18:42.970 --> 00:18:45.730\nis gonna trigger an autoscale operation.\n\n403\n00:18:45.730 --> 00:18:48.280\nSo, my two metrics, CPU and\nQUEUE, what are those?\n\n404\n00:18:48.280 --> 00:18:50.130\nWell, CPU,\nthat one's kinda obvious, right?\n\n405\n00:18:50.130 --> 00:18:54.120\nProcessor, I can monitor the CPU\nutilization of my instances and\n\n406\n00:18:54.120 --> 00:18:57.060\nI can say if they're\nconsistently over 80%.\n\n407\n00:18:57.060 --> 00:19:02.810\nIf we're over 80% CPU for this period of\ntime spin up another instance, right?\n\n408\n00:19:02.810 --> 00:19:06.770\nOr if they're below 80% for a certain\namount of time take down an instance.\n\n409\n00:19:06.770 --> 00:19:11.720\nNow it can shrink and grow my web farm\nhere based on actual utilization.\n\n410\n00:19:11.720 --> 00:19:15.680\nI don't have to set a schedule, I don't\nhave to study my network utilization and\n\n411\n00:19:15.680 --> 00:19:18.440\nfigure out when my peaks and valleys are,\nI don't have to do all that.\n\n412\n00:19:18.440 --> 00:19:19.690\nIt's on the system, right?\n\n413\n00:19:19.690 --> 00:19:21.670\nCPU utilization is a great\nthing to monitor for\n\n414\n00:19:21.670 --> 00:19:24.140\nthings like web servers cuz\nthey do a lot of CPU activity.\n\n415\n00:19:24.140 --> 00:19:29.730\nThere are some things though where CPU\nactivity isn't really a good monitor like\n\n416\n00:19:29.730 --> 00:19:30.640\ndatabases.\n\n417\n00:19:30.640 --> 00:19:32.600\nRight?\nWhere databases a lot of times\n\n418\n00:19:32.600 --> 00:19:34.930\nis disc style that makes\nall the difference.\n\n419\n00:19:34.930 --> 00:19:36.340\nNot so much CPU activity.\n\n420\n00:19:36.340 --> 00:19:38.980\nIf you're doing Reads off of a date base.\n\n421\n00:19:38.980 --> 00:19:40.650\nThat's not a lot of CPU work.\n\n422\n00:19:40.650 --> 00:19:42.780\nWith reads, it's disc IO.\n\n423\n00:19:42.780 --> 00:19:45.090\nSo CPU is not a great metric for them.\n\n424\n00:19:45.090 --> 00:19:46.490\nBut load balancing and\n\n425\n00:19:46.490 --> 00:19:48.870\nauto scaling with the data base\nis always kind of flaky anyway.\n\n426\n00:19:48.870 --> 00:19:54.170\nBut you've got a different type of\nservice, that relies on auto scaling,\n\n427\n00:19:54.170 --> 00:19:58.060\nbut isn't CPU intensive, that's where the\nsecond metric comes in, which is a queue.\n\n428\n00:19:58.060 --> 00:19:59.980\nNow queues are kind of a strange thing.\n\n429\n00:19:59.980 --> 00:20:01.380\nIf you're a developer,\nyou've worked with these.\n\n430\n00:20:01.380 --> 00:20:03.080\nIf you're not a developer,\nyou probably haven't.\n\n431\n00:20:04.390 --> 00:20:05.620\nThink of a retail outlet.\n\n432\n00:20:05.620 --> 00:20:07.820\nSo you go to their website and\nyou buy something.\n\n433\n00:20:07.820 --> 00:20:10.960\nYou add it to your shopping cart and\nyou hit Order.\n\n434\n00:20:10.960 --> 00:20:11.500\nRight?\n\n435\n00:20:11.500 --> 00:20:13.800\nWell, in the back end,\nwe're writing to a database.\n\n436\n00:20:13.800 --> 00:20:15.910\nSo there's a web application\nthat's involved.\n\n437\n00:20:15.910 --> 00:20:18.600\nYou're placing an order,\nit's writing to a database.\n\n438\n00:20:18.600 --> 00:20:22.230\nBut the odds are you're not\nwriting directly to the database.\n\n439\n00:20:22.230 --> 00:20:25.430\nInstead, you're probably\nwriting to a queue.\n\n440\n00:20:25.430 --> 00:20:28.000\nSo it creates the order and\nit sticks it in a queue.\n\n441\n00:20:28.000 --> 00:20:30.930\nAnd then on the back end,\nsome kind of worker threads\n\n442\n00:20:30.930 --> 00:20:33.910\ngrabs your order from the queue and\napplies it to the database.\n\n443\n00:20:33.910 --> 00:20:35.340\nNow why does it do that?\n\n444\n00:20:35.340 --> 00:20:39.140\nWell, if the database fails,\nwe don't wanna lose our orders.\n\n445\n00:20:39.140 --> 00:20:41.670\nSo the orders sit in the queue, so\nif the database fails, we can always\n\n446\n00:20:41.670 --> 00:20:44.580\nbring the database back up and you could\njust grab everything waiting in the queue.\n\n447\n00:20:44.580 --> 00:20:45.840\nWe don't lose any orders.\n\n448\n00:20:45.840 --> 00:20:48.340\nYou can actually take orders\nwhile the database is down.\n\n449\n00:20:48.340 --> 00:20:51.670\nA lot of stock markets do this,\nwhere they want to process buy and\n\n450\n00:20:51.670 --> 00:20:54.530\nsell orders even if the actual\nexchange has failed.\n\n451\n00:20:54.530 --> 00:20:58.080\nAnd then they que that stuff up and apply\nit when the exchange is back online or\n\n452\n00:20:58.080 --> 00:21:01.250\nmaybe it's just after hours trading and\nit all ques up and applies in the morning.\n\n453\n00:21:01.250 --> 00:21:03.460\nSo those are where queues come in handy.\n\n454\n00:21:03.460 --> 00:21:07.180\nYour application has to be\ndesigned to support that and so\n\n455\n00:21:07.180 --> 00:21:08.980\nthat's why I say it's a developer thing.\n\n456\n00:21:08.980 --> 00:21:11.450\nBut if your developers are using queues,\n\n457\n00:21:11.450 --> 00:21:15.360\nthen what happens is auto scan\nlink can track the queues, and\n\n458\n00:21:15.360 --> 00:21:20.440\nit can say if I have this many\nqueued transactions for each server,\n\n459\n00:21:20.440 --> 00:21:23.690\nlike an average number per server then I\ncan add more servers to handle the queue.\n\n460\n00:21:23.690 --> 00:21:26.700\nNow it's based on the actual transactions\nthat are happening which is perfect.\n\n461\n00:21:26.700 --> 00:21:28.030\nIt's actually the best way to do it.\n\n462\n00:21:28.030 --> 00:21:32.780\nIt's better than CPU because we know how\nmany transactions each VM can handle.\n\n463\n00:21:32.780 --> 00:21:35.410\nAnd we just spin up enough VMs to handle\nthe amount of transactions that we're\n\n464\n00:21:35.410 --> 00:21:36.320\nactually processing.\n\n465\n00:21:36.320 --> 00:21:38.770\nIt really is the most accurate\nway to go about it right.\n\n466\n00:21:38.770 --> 00:21:40.920\nFrom an administrative standpoint,\nlet me just show you guys.\n\n467\n00:21:40.920 --> 00:21:43.640\nI'm gonna jump into the Azure\nportal here real quick.\n\n468\n00:21:43.640 --> 00:21:47.250\nThe way queues work, is queues\nare actually part of a storage account.\n\n469\n00:21:47.250 --> 00:21:51.560\nSo if I jump into a storage account here,\nI'll just take my iTVPro demo storage.\n\n470\n00:21:51.560 --> 00:21:54.450\nA storage account can store\nfour different types of things,\n\n471\n00:21:54.450 --> 00:21:59.550\nit can store blobs, files,\ntables, and queues, right?\n\n472\n00:21:59.550 --> 00:22:02.320\nBlobs, we've used that,\ncuz that's where our VHDs,\n\n473\n00:22:02.320 --> 00:22:04.520\nour virtual hard drives for our VMs go.\n\n474\n00:22:04.520 --> 00:22:08.290\nFiles, we talked about that in\nthe Azure File Share episode.\n\n475\n00:22:08.290 --> 00:22:12.030\nYou can create a shared folder and all\nyour VMs can see it in Azure Files, right?\n\n476\n00:22:12.030 --> 00:22:12.930\nSo that's just kinda it.\n\n477\n00:22:12.930 --> 00:22:15.150\nBoth of these are really just files.\n\n478\n00:22:15.150 --> 00:22:17.890\nBut the other two are different, tables.\n\n479\n00:22:17.890 --> 00:22:22.310\nWell if you jump over to our Azure SQL\nshow we show like doing debugging and\n\n480\n00:22:22.310 --> 00:22:22.820\nauditing.\n\n481\n00:22:22.820 --> 00:22:24.740\nI think we did some in Azure VM also.\n\n482\n00:22:24.740 --> 00:22:28.780\nWhen you do audit logs on your\nVMs they get written to a table.\n\n483\n00:22:28.780 --> 00:22:31.280\nAnd a table at the end of the day is\na file, you can access it that way.\n\n484\n00:22:31.280 --> 00:22:34.150\nBut you can also query against\nit to get data back out and\n\n485\n00:22:34.150 --> 00:22:37.420\nsee what's been happening with\nyour servers or other information.\n\n486\n00:22:37.420 --> 00:22:40.110\nSo, that's a table,\nit's kinda like a mini database.\n\n487\n00:22:40.110 --> 00:22:42.490\nBut the last one is a queue.\n\n488\n00:22:42.490 --> 00:22:46.050\nAnd here, in the GUI,\nin the web portal, queue is useless.\n\n489\n00:22:46.050 --> 00:22:49.770\nI don't even know why icon here, other\nthan to remind us that queues do exist.\n\n490\n00:22:49.770 --> 00:22:53.480\nAnd you can, I think you can\nactually create a queue from here.\n\n491\n00:22:53.480 --> 00:22:54.990\nNo, you can't even create a queue.\n\n492\n00:22:54.990 --> 00:22:56.990\nSo, you really just see\nwhat queues you have.\n\n493\n00:22:56.990 --> 00:22:58.570\nSo, if you need another name of a queue,\n\n494\n00:22:58.570 --> 00:23:00.800\nyou can spot in here\nwhat the queue URL is.\n\n495\n00:23:00.800 --> 00:23:04.790\nBut whoever the developer is when they\nwrite their application they can say\n\n496\n00:23:04.790 --> 00:23:09.450\ndeposit my transactions into this queue,\ninto this storage account, and\n\n497\n00:23:09.450 --> 00:23:11.450\nthe autoscaling can just watch that.\n\n498\n00:23:11.450 --> 00:23:14.760\nAnd we set an average number of\ntransaction that each VM can handle and\n\n499\n00:23:14.760 --> 00:23:17.270\nwhen it gets over that number\nit just adds more servers.\n\n500\n00:23:17.270 --> 00:23:19.990\nSo those are queues and\nthat's kind of how that's processed.\n\n501\n00:23:19.990 --> 00:23:24.120\nSo back here in my autoscale settings\nwhen I want to configure this\n\n502\n00:23:24.120 --> 00:23:26.280\nIt's showing me over here\nhow many instances I've got.\n\n503\n00:23:26.280 --> 00:23:29.400\nI've got five that have been\nrunning throughout this day.\n\n504\n00:23:29.400 --> 00:23:32.880\nCuz you might be going up and down, they\nwant you to see how active this stuff is.\n\n505\n00:23:32.880 --> 00:23:37.220\nI can choose CPU and a bunch of\nnew options appear beneath that.\n\n506\n00:23:37.220 --> 00:23:40.680\nSo down here I can start to set\nthings like my target CPU level.\n\n507\n00:23:40.680 --> 00:23:44.490\nNow you got two levels,\na maximum and a minimum.\n\n508\n00:23:44.490 --> 00:23:48.530\nThe maximum is when we need to scale up\nthe minimum is when we need to scale down.\n\n509\n00:23:48.530 --> 00:23:51.990\nYou might want those to be the same thing.\n\n510\n00:23:51.990 --> 00:23:54.280\nI might wanna set them to 80 and\n80, right?\n\n511\n00:23:54.280 --> 00:23:55.495\nBut usually you want a bit of a gap.\n\n512\n00:23:55.495 --> 00:23:58.914\nBecause if I hit 80% CPU and\nI add an instance, and\n\n513\n00:23:58.914 --> 00:24:02.821\nthen I drop to 79% CPU,\ndo I wanna get rid of an instance?\n\n514\n00:24:02.821 --> 00:24:06.060\nI normally need to wait, so\nit'll probably be right back to 80 again.\n\n515\n00:24:06.060 --> 00:24:08.358\nSo that's why you normally\nset a gap like this.\n\n516\n00:24:08.358 --> 00:24:12.880\nAnd then we tell it how many instances\nto add per scaling operation.\n\n517\n00:24:12.880 --> 00:24:15.180\nAnd so mine's set to one, but\nmaybe I say, you know what?\n\n518\n00:24:15.180 --> 00:24:16.070\nI want to be really safe.\n\n519\n00:24:16.070 --> 00:24:19.730\nSo anytime I hit 80% like this,\nlets just add two instances and\n\n520\n00:24:19.730 --> 00:24:22.050\nnow it's gonna add two more and\nboot them up.\n\n521\n00:24:22.050 --> 00:24:24.020\nOkay, but\nI'll just leave mine at one for now.\n\n522\n00:24:24.020 --> 00:24:26.460\nAnd then this scale up wait time.\n\n523\n00:24:26.460 --> 00:24:30.940\nIf we just scaled up, how long do we wanna\nwait before we even consider scaling down?\n\n524\n00:24:30.940 --> 00:24:32.380\nRemember what I said,\nif we drop down to 79,\n\n525\n00:24:32.380 --> 00:24:34.910\nI don't wanna just immediately set down,\nI wanna wait.\n\n526\n00:24:34.910 --> 00:24:36.210\nSo the default is 20 minutes.\n\n527\n00:24:36.210 --> 00:24:40.400\nAnd if I just added a server I don't\nwanna add another one for 20 minutes, or\n\n528\n00:24:40.400 --> 00:24:42.640\nI don't wanna take one away for\n20 minutes.\n\n529\n00:24:42.640 --> 00:24:44.550\nNow that can be a problem right there.\n\n530\n00:24:44.550 --> 00:24:46.260\nI might want to add one\nshorter than 20 minutes.\n\n531\n00:24:46.260 --> 00:24:49.910\nSo you can take that and adjust it\nall the way down to five minutes.\n\n532\n00:24:49.910 --> 00:24:53.580\nIf I'm worried even more there,\nthat my growth might be so\n\n533\n00:24:53.580 --> 00:24:57.370\nmuch that five minutes, I might have five\nminutes of bad performance on the site.\n\n534\n00:24:57.370 --> 00:25:00.270\nThen I need to make sure that I scale\nup by two instances instead of one.\n\n535\n00:25:00.270 --> 00:25:03.340\nAnd that way I can get more performance\nout of each scale operation.\n\n536\n00:25:03.340 --> 00:25:05.970\nBut five minutes is the lowest that\nyou can do here through the portal.\n\n537\n00:25:05.970 --> 00:25:09.080\nNow Don, I'm just, the first thing that\ncomes to my mind when I'm looking at this\n\n538\n00:25:09.080 --> 00:25:12.470\nis obviously,\nwe want more traffic to our site.\n\n539\n00:25:12.470 --> 00:25:14.120\nIf we got a website up,\nI want more traffic to it,\n\n540\n00:25:14.120 --> 00:25:16.350\nbecause the more traffic I'm getting,\nthe more money I'm making.\n\n541\n00:25:16.350 --> 00:25:17.080\nSo it's a good thing.\n\n542\n00:25:17.080 --> 00:25:21.810\nI can see where this would, it's gonna\nadd servers as the traffic increases.\n\n543\n00:25:21.810 --> 00:25:25.186\nWhat if I get targeted for\nlike a distributed analysis attack?\n\n544\n00:25:25.186 --> 00:25:28.290\nAnd my auto scaling goes through the roof,\nand now my bill is gargantuan,\n\n545\n00:25:28.290 --> 00:25:30.080\nplus my site's probably having trouble.\n\n546\n00:25:30.080 --> 00:25:33.160\n>> So you actually control the maximum,\nright?\n\n547\n00:25:33.160 --> 00:25:35.960\nNow it's basically controlled\nby how many VMs you\n\n548\n00:25:35.960 --> 00:25:37.040\nhave in the the availability group.\n\n549\n00:25:37.040 --> 00:25:39.490\nI have five VMs in my availability group.\n\n550\n00:25:39.490 --> 00:25:40.730\nThat means five's my maximum.\n\n551\n00:25:40.730 --> 00:25:43.600\nI can't add any more than five\nVMs cuz they don't exist, right?\n\n552\n00:25:43.600 --> 00:25:46.100\nIt's not spitting out virtual\nmachines that don't exist.\n\n553\n00:25:46.100 --> 00:25:48.360\nSo you've already determined the maximum.\n\n554\n00:25:48.360 --> 00:25:49.680\nMy max is five.\n\n555\n00:25:49.680 --> 00:25:52.800\nIf I get hit with a denial of service,\nI'll grow to those five and\n\n556\n00:25:52.800 --> 00:25:54.410\nthen my site will go down, right?\n\n557\n00:25:54.410 --> 00:25:56.140\nWhich may not be ideal and\n\n558\n00:25:56.140 --> 00:26:00.010\nthat's where we want to make sure\nwe have more in other regions.\n\n559\n00:26:00.010 --> 00:26:02.550\nAnd that way the denial of service\nmight take down one of my regions, but\n\n560\n00:26:02.550 --> 00:26:03.830\nI've got other regions that are up.\n\n561\n00:26:03.830 --> 00:26:05.900\nAnd we can use Azure Traffic Manager\nto balance across\n\n562\n00:26:05.900 --> 00:26:07.080\nall those different regions so.\n\n563\n00:26:07.080 --> 00:26:10.630\nWe combine our technologies\nto create that solution, yup.\n\n564\n00:26:10.630 --> 00:26:12.890\nAnd the next part here is just scale down,\nwhen do I scale down?\n\n565\n00:26:12.890 --> 00:26:16.012\nAnd do I scale down by one instance or\ntwo or how ever many?\n\n566\n00:26:16.012 --> 00:26:19.820\nI might choose to scale up\nby two instances at a time,\n\n567\n00:26:19.820 --> 00:26:23.380\nbut scale down by one, slowly scale down.\n\n568\n00:26:23.380 --> 00:26:24.790\nFast scale up right?\n\n569\n00:26:24.790 --> 00:26:25.880\nThat's usually what we want.\n\n570\n00:26:25.880 --> 00:26:29.410\nWe want to react quickly, but\nkind of step down slowly.\n\n571\n00:26:29.410 --> 00:26:32.510\nSo I can set that and\nset its interval to whatever I want.\n\n572\n00:26:32.510 --> 00:26:34.870\nMaybe I'll go 20, ten minutes on that one.\n\n573\n00:26:34.870 --> 00:26:38.360\nAll right so now I'm scaling by CPU and\nthat works out great.\n\n574\n00:26:38.360 --> 00:26:41.580\nAll right I'm going to go ahead and save\nthat, so it'll have time to turn it on.\n\n575\n00:26:41.580 --> 00:26:44.900\nNow while it's working on that,\nthe other option was queues, and\n\n576\n00:26:44.900 --> 00:26:48.260\nas soon as this refreshes,\nthere we go, I can choose queue.\n\n577\n00:26:48.260 --> 00:26:51.070\nAnd you'll see you the queue\nsettings are a lot different.\n\n578\n00:26:51.070 --> 00:26:54.790\nBecause on the queue settings,\nwe don't necessarily have to pay attention\n\n579\n00:26:54.790 --> 00:26:58.280\nto time ranges so much,\nbecause it's just watching the queue.\n\n580\n00:26:58.280 --> 00:27:01.450\nI mean, we still have the same thing down\nhere, right, SCALE UP BY, SCALE DOWN BY,\n\n581\n00:27:01.450 --> 00:27:02.640\nand the times.\n\n582\n00:27:02.640 --> 00:27:05.350\nBut on the CPU side,\nit can react much more quickly.\n\n583\n00:27:05.350 --> 00:27:09.070\nSo, here you can start to define\nyour instance range, right,\n\n584\n00:27:09.070 --> 00:27:12.470\nhow many instances you want, as few as\none, as many as five, that's my default,\n\n585\n00:27:12.470 --> 00:27:13.640\nbut I could change that.\n\n586\n00:27:13.640 --> 00:27:15.310\nMaybe I want as few as two.\n\n587\n00:27:15.310 --> 00:27:19.160\nI never want to drop below two\ninstances because of redundancy.\n\n588\n00:27:19.160 --> 00:27:20.390\nRight.\nI always want to have two up and\n\n589\n00:27:20.390 --> 00:27:22.020\ngoing just in case one fails.\n\n590\n00:27:22.020 --> 00:27:22.700\nRight.\n\n591\n00:27:22.700 --> 00:27:26.044\nAnd then I can save\nthe storage account and\n\n592\n00:27:26.044 --> 00:27:28.690\nthe queqe name inside of\nthat storage account.\n\n593\n00:27:28.690 --> 00:27:30.170\nI don't have any que's so\nI can't pick one.\n\n594\n00:27:30.170 --> 00:27:31.840\nBut if I had a que I could pick it here.\n\n595\n00:27:31.840 --> 00:27:34.740\nAnd then you would specify\nthat the target per machine.\n\n596\n00:27:34.740 --> 00:27:35.610\nNow the default is 2,000.\n\n597\n00:27:35.610 --> 00:27:39.130\nCan one of your virtual machines\nhandle 2,000 queued items?\n\n598\n00:27:39.130 --> 00:27:41.090\nI don't know.\n\n599\n00:27:41.090 --> 00:27:42.530\nIt depends on your application.\n\n600\n00:27:42.530 --> 00:27:45.590\nRight?\nThe more complex your application is,\n\n601\n00:27:45.590 --> 00:27:49.310\nthe less queued items each virtual\nmachine can handle simultaneously.\n\n602\n00:27:49.310 --> 00:27:50.520\nSo the default here is 2,000.\n\n603\n00:27:50.520 --> 00:27:52.250\nThat may or may not be good for you.\n\n604\n00:27:52.250 --> 00:27:55.140\nYou have to gauge your\napplication to see what you need.\n\n605\n00:27:55.140 --> 00:27:58.500\nBut what this is going to\nsay is if I one VM, and\n\n606\n00:27:58.500 --> 00:28:00.500\nI've got 2,000 transactions I'm fine.\n\n607\n00:28:01.500 --> 00:28:06.340\nAnd I've got two as my minimum up here, so\nif I have 4,000 transactions, I'm fine.\n\n608\n00:28:06.340 --> 00:28:12.190\nBut if I go to 5,000 transactions, that's\nan average of 2,500 transactions per node,\n\n609\n00:28:12.190 --> 00:28:15.270\nthat's over this limit,\nit'll add another node, right?\n\n610\n00:28:15.270 --> 00:28:19.120\nIt'll make sure that I always have\nenough nodes to handle the amount\n\n611\n00:28:19.120 --> 00:28:21.750\nof queued items in that queue.\n\n612\n00:28:21.750 --> 00:28:24.060\nand spin up by that or\nspin down by that, and\n\n613\n00:28:24.060 --> 00:28:26.530\nthen it uses the times\ndown here to measure that.\n\n614\n00:28:26.530 --> 00:28:29.890\nAll right, queues really are the best way,\nbut it does involve developer support.\n\n615\n00:28:29.890 --> 00:28:32.650\nCPU is nice because you don't need\nto get the developers involved.\n\n616\n00:28:32.650 --> 00:28:34.390\nJust track the CPU utilization.\n\n617\n00:28:34.390 --> 00:28:37.210\nBut in a non-CPU case that\ndoesn't work out so well.\n\n618\n00:28:37.210 --> 00:28:40.940\nAll right, I'm gonna discard those\nchanges, and I just wanna stick with CPU.\n\n619\n00:28:40.940 --> 00:28:44.310\nSo my settings right now\nare monitoring the server.\n\n620\n00:28:44.310 --> 00:28:46.140\nI've got an instance range of one to five.\n\n621\n00:28:46.140 --> 00:28:48.110\nYou know,\nmaybe I'll bump that up to two here also.\n\n622\n00:28:48.110 --> 00:28:51.590\nI wanna make sure that I've always\ngot at least two, all right?\n\n623\n00:28:51.590 --> 00:28:53.130\nIt's just good practice there.\n\n624\n00:28:53.130 --> 00:28:54.330\nBut I can have as many as five.\n\n625\n00:28:55.400 --> 00:29:00.566\nAnd I'm gonna watch the system, and\nif I'm running it over 80% CPU for\n\n626\n00:29:00.566 --> 00:29:02.890\nfive minutes, then I'll scale up.\n\n627\n00:29:02.890 --> 00:29:06.751\nI'll add two more nodes, and\nif I'm running below 60% CPU,\n\n628\n00:29:06.751 --> 00:29:09.396\nfor ten minutes, I'll go down by one node,\n\n629\n00:29:09.396 --> 00:29:13.270\nand then ten more minutes I'll\ndrop by another one and so on.\n\n630\n00:29:13.270 --> 00:29:15.150\nBut I'll never drop below two nodes.\n\n631\n00:29:15.150 --> 00:29:15.780\nOkay.\n\n632\n00:29:15.780 --> 00:29:19.370\nNow, before I set this up, I had five\nweb servers, and they were all up and\n\n633\n00:29:19.370 --> 00:29:20.370\nonline, right?\n\n634\n00:29:20.370 --> 00:29:21.350\nThey were all started.\n\n635\n00:29:21.350 --> 00:29:23.950\nNow that I've got this in place,\n\n636\n00:29:23.950 --> 00:29:27.980\nwhat should happen is I should\ndrop down to two, right?\n\n637\n00:29:27.980 --> 00:29:31.550\nThat threshold that I defined just\na moment ago, as soon as that's done.\n\n638\n00:29:31.550 --> 00:29:35.050\nSo when I defined this, I said right here,\nmy instance range starts at two and\n\n639\n00:29:35.050 --> 00:29:36.140\ngoes as high as five.\n\n640\n00:29:36.140 --> 00:29:38.260\nMy web server's doing\nabsolutely nothing right now.\n\n641\n00:29:38.260 --> 00:29:42.430\nSo I should be at two nodes, and\nthen it'll start to add more, or\n\n642\n00:29:42.430 --> 00:29:43.720\nit might be shutting one down,\n\n643\n00:29:43.720 --> 00:29:46.760\nor whatever, it starts to react, but\nmine shouldn't be shutting down.\n\n644\n00:29:46.760 --> 00:29:50.930\nIn fact, if I jump over to my instances,\nlet's just take a look, and sure enough,\n\n645\n00:29:50.930 --> 00:29:52.660\nI've got one guy running.\n\n646\n00:29:52.660 --> 00:29:57.410\nI've got one guy stopped and de-allocated,\nand three more that are running.\n\n647\n00:29:57.410 --> 00:29:58.380\nWhy do I have four running?\n\n648\n00:29:59.410 --> 00:30:03.680\nWhen I told it to step down only\nby one node every ten minutes, and\n\n649\n00:30:03.680 --> 00:30:07.580\nthis episode's only a thirty\nminute episode so it stopped one.\n\n650\n00:30:07.580 --> 00:30:10.800\nIf we wait around for ten more\nminutes it'll stop another one, and\n\n651\n00:30:10.800 --> 00:30:13.720\nthen another one until\nthere's only two left, right?\n\n652\n00:30:13.720 --> 00:30:16.840\nSo it's already scaling for me,\nit's already shut one down and\n\n653\n00:30:16.840 --> 00:30:18.040\nit's starting to work through the others.\n\n654\n00:30:18.040 --> 00:30:22.110\nAnd when it says deallocated, that means\nthat the virtual machine still exists, but\n\n655\n00:30:22.110 --> 00:30:25.070\nit's not consuming RAM,\nit's not consuming CPU.\n\n656\n00:30:25.070 --> 00:30:28.580\nA lot of people don't realize this,\nif you log into your virtual machine and\n\n657\n00:30:28.580 --> 00:30:29.410\nyou just start and shut down.\n\n658\n00:30:29.410 --> 00:30:31.790\nAnd you shut it down,\nit will stay stopped here.\n\n659\n00:30:31.790 --> 00:30:32.820\nBut it won't say deallocated.\n\n660\n00:30:32.820 --> 00:30:35.450\nAnd that means you're still\nreserving the CPU and RAM.\n\n661\n00:30:35.450 --> 00:30:37.680\nYou're still paying the per minute fee,\neven though you shut it down.\n\n662\n00:30:38.770 --> 00:30:42.230\nDeallocated means it shut down and\n\n663\n00:30:42.230 --> 00:30:46.870\nyou gave the RAM and CPU and all that\nback to Microsoft user paying storage.\n\n664\n00:30:46.870 --> 00:30:50.110\nAnd so now I'm paying storage for\nthat node.\n\n665\n00:30:50.110 --> 00:30:53.675\nHere is the only caveat I need to throw\nin there, the one word of warning.\n\n666\n00:30:54.770 --> 00:30:56.340\nThis is a web farm.\n\n667\n00:30:56.340 --> 00:30:57.540\nI'm load balancing across it.\n\n668\n00:30:57.540 --> 00:31:00.540\nWhen users come to visit my web app\nthey're getting distributed across these\n\n669\n00:31:00.540 --> 00:31:01.470\nfive instances.\n\n670\n00:31:02.830 --> 00:31:05.150\nWhat if I wanna make\na change to my website?\n\n671\n00:31:05.150 --> 00:31:07.380\nWell, I got five copies\nof the website here, but\n\n672\n00:31:07.380 --> 00:31:08.660\nsome of my notes are gonna be stopped.\n\n673\n00:31:10.140 --> 00:31:12.700\nI need to update them, so\nI need to turn them on, boot them up?\n\n674\n00:31:12.700 --> 00:31:15.880\nYes, you need to start them up,\ngo in there and edit the website.\n\n675\n00:31:15.880 --> 00:31:17.700\nAnd so that can be a bit of a challenge,\nright?\n\n676\n00:31:17.700 --> 00:31:19.100\nEspecially if your website changes a lot.\n\n677\n00:31:19.100 --> 00:31:21.860\nYou're constantly having to spin\nup your nodes, update the website.\n\n678\n00:31:21.860 --> 00:31:22.940\nI got five.\n\n679\n00:31:22.940 --> 00:31:23.690\nImagine if you had 100.\n\n680\n00:31:23.690 --> 00:31:27.360\nI mean,\nimagine if this is a really big farm.\n\n681\n00:31:27.360 --> 00:31:30.310\nWell, what's gonna happen is,\nyou're not gonna wanna deal with that.\n\n682\n00:31:30.310 --> 00:31:31.830\nAnd I had to pre-provision these machines.\n\n683\n00:31:31.830 --> 00:31:32.800\nI had to create five.\n\n684\n00:31:32.800 --> 00:31:34.280\nWhat if I had to create 100?\n\n685\n00:31:34.280 --> 00:31:36.280\nWell, we'd go to the PowerShell\nfirst off and spin that up.\n\n686\n00:31:36.280 --> 00:31:39.280\nAnd you can create your own image that's\nalready set up the way you want, but\n\n687\n00:31:39.280 --> 00:31:42.550\nthat doesn't help you with your machine\ngetting out of date, all right?\n\n688\n00:31:42.550 --> 00:31:45.630\nSo there's another technology that,\nI'll include a link for\n\n689\n00:31:45.630 --> 00:31:50.020\nthis in the show,\nwhat's called the Custom Script extension.\n\n690\n00:31:50.020 --> 00:31:51.830\nWhen you spin up a virtual\nmachine in Azure,\n\n691\n00:31:51.830 --> 00:31:54.650\nit asks if you wanna\ninstall the Azure Agent.\n\n692\n00:31:54.650 --> 00:31:59.380\nAnd one part of the Azure Agent,\nIs the custom script extension.\n\n693\n00:31:59.380 --> 00:32:02.760\nAnd what that does is\nlet you write a script.\n\n694\n00:32:02.760 --> 00:32:04.230\nIt's a PowerShell script.\n\n695\n00:32:04.230 --> 00:32:06.920\nAnd you can store it in a storage account.\n\n696\n00:32:06.920 --> 00:32:09.140\nAnd you can assign it to\nyour virtual machines,\n\n697\n00:32:09.140 --> 00:32:12.530\nso that when your virtual machines\nboot up, they run the script.\n\n698\n00:32:12.530 --> 00:32:15.800\nAnd so I can have my web servers all\ndefined, so that when they boot up,\n\n699\n00:32:15.800 --> 00:32:19.200\nit runs a script, and reaches out and\ngets the latest copy of the webpage.\n\n700\n00:32:19.200 --> 00:32:24.050\nSo that machine could've been off for six\nmonths, and then as soon as it spins up,\n\n701\n00:32:24.050 --> 00:32:27.640\nit runs Windows Update,\nit goes in and it grabs those files.\n\n702\n00:32:28.650 --> 00:32:30.990\nOr maybe I provision\nthe machine as I need it.\n\n703\n00:32:30.990 --> 00:32:33.690\nAnd so I could have it where I just\ngrab Microsoft's default image, so\n\n704\n00:32:33.690 --> 00:32:35.110\nit would already be up to date.\n\n705\n00:32:35.110 --> 00:32:37.360\nAnd then it runs a script that\ncustomizes it to match my needs.\n\n706\n00:32:37.360 --> 00:32:41.240\nInstalls IIS, adds the webpages,\nand then it comes up.\n\n707\n00:32:41.240 --> 00:32:42.730\nBut that way,\nyour machines are always up to date.\n\n708\n00:32:42.730 --> 00:32:46.130\nSo you'll normally wanna combine auto\nscaling with custom script extension.\n\n709\n00:32:46.130 --> 00:32:49.400\nAnd that's important to make sure that\nyour machines are running the latest copy\n\n710\n00:32:49.400 --> 00:32:50.500\nof your website and updates.\n\n711\n00:32:50.500 --> 00:32:51.830\nSo I'll include,\n\n712\n00:32:51.830 --> 00:32:56.840\nthis is a great article that runs down\nhow the custom script extension works.\n\n713\n00:32:56.840 --> 00:33:00.130\nAnd even gives you some sample\nscripts that you can deploy.\n\n714\n00:33:00.130 --> 00:33:04.370\nAnd what you'll see is they're basically\ncreating a script, and then assigning it\n\n715\n00:33:04.370 --> 00:33:08.790\nto a virtual machine right here, so\nthat it'll run when the machine boots up.\n\n716\n00:33:08.790 --> 00:33:11.300\nAnd any time the machine reboots or\nboots up it will run the script,\n\n717\n00:33:11.300 --> 00:33:13.740\nit will grab the latest copy of the page,\nand now it's up to date.\n\n718\n00:33:13.740 --> 00:33:16.320\nAnd then it can shut down, and\nI don't have to worry about it.\n\n719\n00:33:16.320 --> 00:33:18.570\nSo that's kind of another side of this,\nand like I said,\n\n720\n00:33:18.570 --> 00:33:20.920\nI'll put this link in the show notes.\n\n721\n00:33:20.920 --> 00:33:21.690\nExcellent stuff Dan.\n\n722\n00:33:21.690 --> 00:33:23.600\nObviously auto scaling is going to do,\n\n723\n00:33:23.600 --> 00:33:25.510\nwell one thing it's gonna\nsave us some money.\n\n724\n00:33:25.510 --> 00:33:26.460\nWe always like that.\n\n725\n00:33:26.460 --> 00:33:30.960\nBut the ability to say, I'm having more\nof the, higher than the normal traffic.\n\n726\n00:33:30.960 --> 00:33:33.510\nGo ahead and auto ramp up for\nme, go ahead and\n\n727\n00:33:33.510 --> 00:33:36.450\nadd more servers, add more CPU\nwhatever it is that you needed to do\n\n728\n00:33:36.450 --> 00:33:39.780\nto get that back to\na normal performance level.\n\n729\n00:33:39.780 --> 00:33:43.200\nThat is going to be a godsend for\nus as administrators, and\n\n730\n00:33:43.200 --> 00:33:46.610\nour customers' experience is not\ngonna suffer from degradation.\n\n731\n00:33:46.610 --> 00:33:49.130\nDon, is there anything else that we need\nto cover in this episode when is comes\n\n732\n00:33:49.130 --> 00:33:50.150\nto autoscaling?\n\n733\n00:33:50.150 --> 00:33:50.740\n>> That's basically it.\n\n734\n00:33:50.740 --> 00:33:52.270\nJust remember, do it.\n\n735\n00:33:52.270 --> 00:33:55.010\nRight, it's there, it's a feature, you can\nturn on autoscale and does not cost you\n\n736\n00:33:55.010 --> 00:33:58.452\na dime extra and it saves you money,\nyou definitely wanna do it.\n\n737\n00:33:58.452 --> 00:34:00.640\n>> All right well thank you so\nmuch for this explanation Don,\n\n738\n00:34:00.640 --> 00:34:02.910\nand I'm sure our audience\nis thanking you as well.\n\n739\n00:34:02.910 --> 00:34:06.230\nAnd we thank you for joining us today,\nwe're gonna go ahead and sign off for\n\n740\n00:34:06.230 --> 00:34:08.860\nIT PRO tv\n>> I've been your host, Daniel Lowry.\n\n741\n00:34:08.860 --> 00:34:09.640\n>> And I'm Don Pizet.\n\n742\n00:34:09.640 --> 00:34:10.967\n>> And we'll see you next time.\n\n743\n00:34:10.967 --> 00:34:16.989\n[MUSIC]\n\n",
          "vimeoId": "152469613"
        },
        {
          "description": "In this episode, Daniel and Don discuss backup and recovery options available in an Azure VM environment. They begin by covering the basic topics of disaster recovery and backup best practices and concepts, then go over the technologies that are typically used to perform backup operations; specifically Microsoft System Center Orchestrator, Azure Site Recovery, and Azure Backup. Finally, they show you how to use Azure Backup to take and restore machine.",
          "length": "1682",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-4-3-backup_and_restore-012116-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-4-3-backup_and_restore-012116-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-azurevm/techskills-azurevm-4-3-backup_and_restore-012116-1-sm.jpg",
          "title": "Backup and Restore",
          "transcript": "WEBVTT\n\n1\n00:00:00.064 --> 00:00:10.064\n[MUSIC]\n\n2\n00:00:11.645 --> 00:00:16.852\nAll right, greetings everyone and welcome\nto another exciting episode of ITProTV.\n\n3\n00:00:16.852 --> 00:00:18.619\nI'm your host, Daniel Lowrie, and\n\n4\n00:00:18.619 --> 00:00:22.750\nin today's episode we are continuing on\nwith our Azure Virtual Machine series.\n\n5\n00:00:22.750 --> 00:00:24.780\nAnd joining us in the studio today is,\nyou know him,\n\n6\n00:00:24.780 --> 00:00:27.040\nyou love him, he's our good friend,\nMr. Don Pezet.\n\n7\n00:00:27.040 --> 00:00:29.170\nDon, welcome back to the show,\nhow are you doing today, sir?\n\n8\n00:00:29.170 --> 00:00:31.370\n>> I'm doing great Daniel,\nthanks for having me back and\n\n9\n00:00:31.370 --> 00:00:34.070\nready to jump right back into\nthe world of Azure Virtual Machines.\n\n10\n00:00:34.070 --> 00:00:38.490\nToday we want take a look at backup and\nrestore options in Microsoft Azure.\n\n11\n00:00:38.490 --> 00:00:41.120\nAnd we're gonna talk about\na couple things too.\n\n12\n00:00:41.120 --> 00:00:44.770\nAs far as like backing up and\nrestoring virtual machines in Azure,\n\n13\n00:00:44.770 --> 00:00:46.420\nthere's not really all\nthat much you need to do.\n\n14\n00:00:46.420 --> 00:00:48.740\nYou can take images of\na machine if you want.\n\n15\n00:00:48.740 --> 00:00:51.260\nMicrosoft's kind of replicating\nyour data on the back end,\n\n16\n00:00:51.260 --> 00:00:53.380\nyou just need to back up\nyour individual data.\n\n17\n00:00:53.380 --> 00:00:57.010\nSo, a lot of what we talk about is\ngoing to apply, that'll work just fine.\n\n18\n00:00:57.010 --> 00:01:01.190\nBut, we also may choose to back up\nsystems that we have on premises\n\n19\n00:01:01.190 --> 00:01:03.120\nthat aren't even virtual\nmachines up in Azure.\n\n20\n00:01:03.120 --> 00:01:05.040\nWe just want to back up to Azure and\nhave them available.\n\n21\n00:01:05.040 --> 00:01:08.180\nSo, we've got a couple of different\napproaches we can take this and\n\n22\n00:01:08.180 --> 00:01:12.080\nfortunately with Microsoft,\nthe options really work for all the above.\n\n23\n00:01:12.080 --> 00:01:14.680\nSo, you'll see a lot of\nexamples on Microsoft's site.\n\n24\n00:01:14.680 --> 00:01:16.661\nWhere they'll reference\na back up product for\n\n25\n00:01:16.661 --> 00:01:19.280\nbacking up an on-premises\ndevice into the cloud.\n\n26\n00:01:19.280 --> 00:01:22.238\nBut it works for\nbacking up your virtual machines also.\n\n27\n00:01:22.238 --> 00:01:24.506\nAnd so, we're going to take\na look at some of those options,\n\n28\n00:01:24.506 --> 00:01:26.340\nsome of the various features\nthat are out there.\n\n29\n00:01:26.340 --> 00:01:28.240\nAnd what we can use, what we can do.\n\n30\n00:01:28.240 --> 00:01:32.140\nAnd just see which one fits in your model,\ncuz there's a lot of choices.\n\n31\n00:01:32.140 --> 00:01:36.040\n>> Yeah, this should be a very episode\nbecause, if you have an environment at\n\n32\n00:01:36.040 --> 00:01:39.950\nall, a disaster recovery plan is\nsomething that is a necessity.\n\n33\n00:01:39.950 --> 00:01:42.741\nThis isn't like an afterthought,\nwhen we get around to it,\n\n34\n00:01:42.741 --> 00:01:46.690\nwe'll probably do something about backups,\nin case we lose some data.\n\n35\n00:01:46.690 --> 00:01:50.250\nThink about how sensitive and\nhow important your data is to you and\n\n36\n00:01:50.250 --> 00:01:52.010\nwhat you would do if you lost it.\n\n37\n00:01:52.010 --> 00:01:54.900\nYou would probably freak out,\nwig out, and rightfully so.\n\n38\n00:01:54.900 --> 00:01:57.690\nWe'd all be running around\nlike our head was on fire.\n\n39\n00:01:57.690 --> 00:01:59.700\nSo Don, you're going to help us say hey,\n\n40\n00:01:59.700 --> 00:02:03.710\nnow that Azure is a part of our\nenvironment, how do we dive into that?\n\n41\n00:02:03.710 --> 00:02:05.170\nHow do we start using Azure?\n\n42\n00:02:05.170 --> 00:02:09.452\nWhat is their backup utilities and\ndisaster recovery utilities?\n\n43\n00:02:09.452 --> 00:02:13.640\nAnd really, what's the best place to\nbegin with Azure and backing up things?\n\n44\n00:02:13.640 --> 00:02:16.980\n>> All right, so the first thing we need\nto think about is, when we talk about back\n\n45\n00:02:16.980 --> 00:02:22.990\nup, there's this difference between\nhigh availability and redundancy.\n\n46\n00:02:22.990 --> 00:02:25.150\nOr high availability and resiliency.\n\n47\n00:02:25.150 --> 00:02:28.020\nSo, when we talk about\nhigh availability or HA.\n\n48\n00:02:28.020 --> 00:02:31.680\nThat's making sure that if a fault\never occurs on my network,\n\n49\n00:02:31.680 --> 00:02:32.990\nthat the end users never notice it.\n\n50\n00:02:32.990 --> 00:02:34.060\nThat my servers stay up.\n\n51\n00:02:34.060 --> 00:02:36.785\nRight, if I have a web server and\nthe web server fails,\n\n52\n00:02:36.785 --> 00:02:40.140\npeople can't get to my website,\nthey notice it, right?\n\n53\n00:02:40.140 --> 00:02:41.220\nIf I want high availability,\n\n54\n00:02:41.220 --> 00:02:44.550\nI need to make sure that when that web\nserver fails, I still have my website up.\n\n55\n00:02:44.550 --> 00:02:46.380\nNow how do I achieve that?\n\n56\n00:02:46.380 --> 00:02:47.410\nMore web servers, right?\n\n57\n00:02:47.410 --> 00:02:49.730\nIf I had a second web server,\na third web server.\n\n58\n00:02:49.730 --> 00:02:52.860\nWhen the first one fails,\nthe other two are up and running, and\n\n59\n00:02:52.860 --> 00:02:54.390\nthe end users just go\nto the other servers.\n\n60\n00:02:54.390 --> 00:02:55.560\nSo, they don't notice a failure, right?\n\n61\n00:02:55.560 --> 00:02:56.970\nThat's high availability, right?\n\n62\n00:02:56.970 --> 00:02:58.390\nThat gives us protection.\n\n63\n00:02:58.390 --> 00:02:59.660\nAnd if you want to learn how to do that,\n\n64\n00:02:59.660 --> 00:03:04.180\nwe've got shows that'll cover load\nbalance sets, high availability sets, and\n\n65\n00:03:04.180 --> 00:03:07.440\na few other things that you combine\nto create that environment.\n\n66\n00:03:07.440 --> 00:03:12.015\nBut those are not a replacement for\nbackups.\n\n67\n00:03:12.015 --> 00:03:13.930\nBackups are really important because,\n\n68\n00:03:13.930 --> 00:03:17.550\nwhat happens if I've got three web\nservers that all have my website.\n\n69\n00:03:17.550 --> 00:03:20.253\nAnd I'm replicating between them,\nright, cuz if I update my website,\n\n70\n00:03:20.253 --> 00:03:21.950\nI want to update it on all of them.\n\n71\n00:03:21.950 --> 00:03:24.802\nIf I log into one of those servers and\nI delete the website by accident,\n\n72\n00:03:24.802 --> 00:03:28.180\nit's gonna replicate that and\ndelete from the others, right?\n\n73\n00:03:28.180 --> 00:03:31.851\nSo, I need to be able to go and\nrestore data from the past.\n\n74\n00:03:31.851 --> 00:03:33.844\nI need to restore and\nrecover that information.\n\n75\n00:03:33.844 --> 00:03:34.704\nSo, how can I do that?\n\n76\n00:03:34.704 --> 00:03:37.549\nHow can I recover data from the past?\n\n77\n00:03:37.549 --> 00:03:40.749\nWell, there's a few different\ntools that we've got, and\n\n78\n00:03:40.749 --> 00:03:44.790\nreally it kinda runs the gamut\nbased on how much control you want.\n\n79\n00:03:44.790 --> 00:03:46.840\nNow, Microsoft is backing up your server.\n\n80\n00:03:46.840 --> 00:03:49.500\nThey're backing up your Azure VM's,\nyou don't even have to configure,\n\n81\n00:03:49.500 --> 00:03:51.320\nyou don't even see it,\nit's invisible to you.\n\n82\n00:03:51.320 --> 00:03:54.416\nAnd, if there's a hardware failure on the\nbackend where they're not able to recover\n\n83\n00:03:54.416 --> 00:03:56.786\nthe drives, they'll restore\nthat backup and it's automatic.\n\n84\n00:03:56.786 --> 00:04:00.610\nSo, we don't interact with that at all.\n\n85\n00:04:00.610 --> 00:04:03.370\nBut we can't go back in time.\n\n86\n00:04:03.370 --> 00:04:06.940\nWe can't go back days or\nweeks or months or whatever.\n\n87\n00:04:06.940 --> 00:04:10.470\nWe're kind of limited to that most\nrecent backup that Microsoft has and\n\n88\n00:04:10.470 --> 00:04:12.020\nwe don't even get to see that,\nthey do it, right?\n\n89\n00:04:12.020 --> 00:04:16.150\nWe can't even trigger that restore if\nwe want, it's entirely up to Microsoft.\n\n90\n00:04:16.150 --> 00:04:20.570\nSo, if we want to be able to restore\ndata from the past, what can we do?\n\n91\n00:04:20.570 --> 00:04:24.450\nWell, you can leverage all of the tools\nthat are built into your operating system.\n\n92\n00:04:24.450 --> 00:04:28.120\nSo in Microsoft Windows, we have\nthings like Volume Shadow Copy, right,\n\n93\n00:04:28.120 --> 00:04:30.300\nthe previous versions utility.\n\n94\n00:04:30.300 --> 00:04:34.730\nAnd you can turn that on in Windows,\nand that'll let you roll back changes,\n\n95\n00:04:34.730 --> 00:04:37.030\nrestore files that have been gone for\na little while.\n\n96\n00:04:37.030 --> 00:04:41.550\nThere's the system restore points,\nthose work inside of Azure also.\n\n97\n00:04:41.550 --> 00:04:45.140\nAnd so you can roll back to restore\npoints to undo changes that you've made.\n\n98\n00:04:45.140 --> 00:04:50.210\nSo, don't overlook the same utilities\nthat you're already making use\n\n99\n00:04:50.210 --> 00:04:52.200\nof in your on-premises servers.\n\n100\n00:04:52.200 --> 00:04:55.697\nYou can use those in Azure too, and now\nif somebody accidentally deletes a file,\n\n101\n00:04:55.697 --> 00:04:58.650\nI don't need some crazy,\nspecial Azure service.\n\n102\n00:04:58.650 --> 00:05:02.570\nI just go into the previous versions tab\nand I restore a file, just like normal.\n\n103\n00:05:02.570 --> 00:05:06.990\nSo, all that stuff from your regular\nsystems applies right inside of Azure VM.\n\n104\n00:05:06.990 --> 00:05:10.240\nRight, but\nI do want to go a step further and\n\n105\n00:05:10.240 --> 00:05:12.975\nhighlight some of the other backup and\nrestore options.\n\n106\n00:05:12.975 --> 00:05:15.550\nCuz some of them are neat, some of\nthem do give you some extra powers,\n\n107\n00:05:15.550 --> 00:05:16.300\nsome superpowers.\n\n108\n00:05:16.300 --> 00:05:20.015\nAnd so, I wanna show you guys those and\nkind of walk you through what's available.\n\n109\n00:05:20.015 --> 00:05:24.505\nAnd before I do that, the way you select\nwhich one of these is going to work.\n\n110\n00:05:24.505 --> 00:05:26.875\nSo, I'm going to show you three or\nfour different solutions.\n\n111\n00:05:26.875 --> 00:05:28.045\nHow do you know which one is right for\nyou?\n\n112\n00:05:28.045 --> 00:05:32.515\nRight, there's a couple of concepts you\nneed to be aware of to pick the right one.\n\n113\n00:05:32.515 --> 00:05:35.282\nAnd the first one that I want to talk\nto you about is one you'll see in\n\n114\n00:05:35.282 --> 00:05:38.302\nMicrosoft Technet articles all the time,\nwhich are two backup and\n\n115\n00:05:38.302 --> 00:05:40.562\nrecovery terms, RPO and RTO.\n\n116\n00:05:41.632 --> 00:05:44.702\nRPO is recovery point objective.\n\n117\n00:05:44.702 --> 00:05:46.382\nAnd the recovery point objective,\n\n118\n00:05:46.382 --> 00:05:50.832\nis how much data you can afford\nto lose when you have a failure.\n\n119\n00:05:51.842 --> 00:05:54.622\nThe example I always give is,\nlet's say I've got a server and\n\n120\n00:05:54.622 --> 00:05:59.010\nit's up in Azure, and\nI take a backup of it, once a day.\n\n121\n00:05:59.010 --> 00:06:02.470\nSo everyday at midnight I take a backup,\nright?\n\n122\n00:06:02.470 --> 00:06:05.420\nAnd the idea is that if I have a failure,\nI can just restore to that backup,\n\n123\n00:06:05.420 --> 00:06:07.370\nand it's backed up every single day,\nonce a day.\n\n124\n00:06:07.370 --> 00:06:10.650\nSo, I know that I'm not going to\nlose a whole lot of changes, right?\n\n125\n00:06:10.650 --> 00:06:12.840\nWell, let's quantify that.\n\n126\n00:06:12.840 --> 00:06:15.630\nIf I have a failure that happens at 10 AM.\n\n127\n00:06:16.670 --> 00:06:20.370\nI'm backing-up everyday at midnight and\nI have a failure at 10 AM.\n\n128\n00:06:20.370 --> 00:06:22.690\nWell, what did I actually lose there?\n\n129\n00:06:22.690 --> 00:06:26.390\nI lost everything that\nhappened after midnight.\n\n130\n00:06:26.390 --> 00:06:28.977\nSo, from midnight to 10 AM,\nwhen the failure happened,\n\n131\n00:06:28.977 --> 00:06:31.206\nany change that was entered\ninto that time, I just lost.\n\n132\n00:06:31.206 --> 00:06:34.872\nNow if it's a web server, it's not\na big deal, if it's a database server,\n\n133\n00:06:34.872 --> 00:06:36.270\nthat is a big deal.\n\n134\n00:06:36.270 --> 00:06:38.940\nThat could be ten hours worth\nof financial transactions.\n\n135\n00:06:38.940 --> 00:06:41.490\nThat could be ten hours worth\nof patient medical records.\n\n136\n00:06:41.490 --> 00:06:44.990\nThat could be all sorts of sensitive\ndata that I don't want to lose.\n\n137\n00:06:44.990 --> 00:06:46.270\nSo, your recovery point objective,\n\n138\n00:06:46.270 --> 00:06:48.700\nyour RPO is how much data\nyou can afford to lose.\n\n139\n00:06:48.700 --> 00:06:50.290\nAnd usually the IT guy can't answer that.\n\n140\n00:06:50.290 --> 00:06:53.225\nWe normally have to go up to\nthe executives and talk to them.\n\n141\n00:06:53.225 --> 00:06:55.670\nAnd they'll say well,\nthey'll always say zero.\n\n142\n00:06:55.670 --> 00:06:57.270\nWe can't afford to lose anything,\n\n143\n00:06:57.270 --> 00:06:59.940\nuntil you tell them how much it costs\nto make sure you never lose anything.\n\n144\n00:06:59.940 --> 00:07:03.265\nAnd then they say well actually,\nwe can lose a little bit more.\n\n145\n00:07:03.265 --> 00:07:06.569\n>> These are the guys with the 50 gig\ndeleted items bin in their Outlook, so\n\n146\n00:07:06.569 --> 00:07:09.406\nthey really mean that they don't\nwant to lose anything [LAUGH].\n\n147\n00:07:09.406 --> 00:07:12.876\n>> Yeah and there's a financial\ncost to any of that, right.\n\n148\n00:07:12.876 --> 00:07:16.446\nSo, most businesses though will\nestablish a certain period of time and\n\n149\n00:07:16.446 --> 00:07:17.822\nyours might be 24 hours.\n\n150\n00:07:17.822 --> 00:07:21.330\nIt might be 3 hours,\nit might be 15 minutes, it just depends.\n\n151\n00:07:21.330 --> 00:07:23.201\nAnd so, the back up solution you pick,\n\n152\n00:07:23.201 --> 00:07:26.060\nyou need to think about how often\nit can back up your system.\n\n153\n00:07:26.060 --> 00:07:30.570\nHow up-to-date can it keep you,\nto ensure that you don't lose data.\n\n154\n00:07:30.570 --> 00:07:33.980\nOr lose more data than you can afford\nto lose, that recovery point objective.\n\n155\n00:07:33.980 --> 00:07:36.380\nAnd recovery time objective, RTO.\n\n156\n00:07:36.380 --> 00:07:38.096\nHow long would it take you to restore?\n\n157\n00:07:38.096 --> 00:07:41.056\nSo, if you do have a failure,\nif that system is completely dead.\n\n158\n00:07:41.056 --> 00:07:45.543\nWhat's it going to take for you to restore\nand get back to 100% operation, right?\n\n159\n00:07:45.543 --> 00:07:50.090\nSo, the recovery time objective,\nyou might only have minutes.\n\n160\n00:07:50.090 --> 00:07:53.059\nIf I need to get that system\nback online in just minutes,\n\n161\n00:07:53.059 --> 00:07:56.421\nthen restoring from a tape backup\nisn't really gonna happen.\n\n162\n00:07:56.421 --> 00:07:59.005\nBecause, you can barely even\nload a tape in in a minute.\n\n163\n00:07:59.005 --> 00:08:01.961\nIt takes even longer to\nrestore data from that, so.\n\n164\n00:08:01.961 --> 00:08:04.047\nWe need a solution that's very fast.\n\n165\n00:08:04.047 --> 00:08:06.675\nIf you can have a day, or\nthree days, or whatever,\n\n166\n00:08:06.675 --> 00:08:09.340\nyou have a lot more options\nthat are out there.\n\n167\n00:08:09.340 --> 00:08:14.270\nSo be thinking of RPO and RTO as we go\nthrough and do our disaster recovery kind\n\n168\n00:08:14.270 --> 00:08:16.910\nof solutions, and\nwhich one might work for you.\n\n169\n00:08:16.910 --> 00:08:21.410\nThe other thing to think about is when\nyou're gonna use these backups, right?\n\n170\n00:08:21.410 --> 00:08:24.440\nWe might take backups all the time, but\nwhen you actually restore them, and\n\n171\n00:08:24.440 --> 00:08:26.700\nthere's really just a few scenarios,\nright.\n\n172\n00:08:26.700 --> 00:08:31.500\nThere might be a planned event,\nwhere I might need to use these restores.\n\n173\n00:08:31.500 --> 00:08:33.130\nSomething that I know is coming up.\n\n174\n00:08:33.130 --> 00:08:36.990\nAnd for planned events,\nit's usually testing.\n\n175\n00:08:36.990 --> 00:08:38.490\nRight.\nI wanna test my backups and\n\n176\n00:08:38.490 --> 00:08:39.320\nmake sure they function.\n\n177\n00:08:39.320 --> 00:08:41.410\nSo that would be an example\nof planned event.\n\n178\n00:08:41.410 --> 00:08:44.760\nBut another example might be,\nmaybe you're migrating your data center\n\n179\n00:08:44.760 --> 00:08:48.510\nfrom on premises systems to Azure VM's,\nright?\n\n180\n00:08:48.510 --> 00:08:52.390\nI want to convert this file server\nI've got right here in the building,\n\n181\n00:08:52.390 --> 00:08:53.790\ninto an Azure VM.\n\n182\n00:08:53.790 --> 00:08:56.350\nAnd so\nI take a back up of that file server, and\n\n183\n00:08:56.350 --> 00:08:58.550\nI restore it into an Azure VM, right?\n\n184\n00:08:58.550 --> 00:09:02.300\nI just migrate it up to Azure and\nthat's a planned restore event.\n\n185\n00:09:02.300 --> 00:09:05.410\nA test would be another kind of event\nthat we kind of, we know is coming.\n\n186\n00:09:05.410 --> 00:09:07.540\nWe just wanna test it, make sure it works.\n\n187\n00:09:07.540 --> 00:09:10.540\nAfter that are the ones that set\naround true disasters, right.\n\n188\n00:09:10.540 --> 00:09:15.170\nSo for example, let's say I've got a bunch\nof azure VMs that are all deployed\n\n189\n00:09:15.170 --> 00:09:19.140\nin the East US 2 Data Center\nwith Microsoft, right.\n\n190\n00:09:19.140 --> 00:09:22.340\nAnd the East US 2 Data Center\nit's up near Washington DC.\n\n191\n00:09:22.340 --> 00:09:26.940\nAnd I'm watching the news and\nI hear about this category\n\n192\n00:09:26.940 --> 00:09:31.570\nfive hurricane that is gonna slam\ninto Washington DC next week.\n\n193\n00:09:31.570 --> 00:09:34.700\nOkay, we usually know when a hurricane's\ncoming, you can see that mapped out, so\n\n194\n00:09:34.700 --> 00:09:35.380\nI know it's coming.\n\n195\n00:09:35.380 --> 00:09:39.896\nWell, I might say, [SOUND], let me move\nsome of these virtual machines out of\n\n196\n00:09:39.896 --> 00:09:42.448\nEast US 2, and move them somewhere else.\n\n197\n00:09:42.448 --> 00:09:43.280\nRight?\n\n198\n00:09:43.280 --> 00:09:46.750\nWell there's not really an easy\nway to move a virtual machine.\n\n199\n00:09:46.750 --> 00:09:51.290\nWhat you need to do, is to back it up and\nrestore it into another region, right?\n\n200\n00:09:51.290 --> 00:09:55.700\nIf it's something like SQL, you can set up\na replica, and then you flip the replicas.\n\n201\n00:09:55.700 --> 00:09:57.540\nBut if you've got a domain controller.\n\n202\n00:09:57.540 --> 00:09:59.420\nThere's no real easy way to just\ngrab a domain controller and\n\n203\n00:09:59.420 --> 00:10:00.830\nmove it to another region, right?\n\n204\n00:10:00.830 --> 00:10:03.290\nSo we need to back it up, and\nthen restore it in another region.\n\n205\n00:10:03.290 --> 00:10:04.730\nAnd that you can do, right?\n\n206\n00:10:04.730 --> 00:10:08.960\nSo that is one where we know that\ndanger is coming, and so we plan, and\n\n207\n00:10:08.960 --> 00:10:10.230\nwe're proactive, right?\n\n208\n00:10:10.230 --> 00:10:12.880\nWe're using the restore\nbefore the disaster happens.\n\n209\n00:10:12.880 --> 00:10:14.840\nThe last option would be like reactive.\n\n210\n00:10:14.840 --> 00:10:18.010\nRight, it's an unanticipated event,\n\n211\n00:10:18.010 --> 00:10:20.180\nlike an earthquake,\nan earthquake hits Washington, DC.\n\n212\n00:10:20.180 --> 00:10:23.210\nI don't know if they get\nearthquakes there or not.\n\n213\n00:10:23.210 --> 00:10:24.265\n>> I think they do actually.\n\n214\n00:10:24.265 --> 00:10:25.779\n[CROSSTALK]\n>> So they get an earthquake and\n\n215\n00:10:25.779 --> 00:10:28.270\nMicrosoft's data center goes down.\n\n216\n00:10:28.270 --> 00:10:31.270\nWell, we didn't see that coming,\nso we can go into a restore.\n\n217\n00:10:31.270 --> 00:10:34.630\nWell, fortunately, Microsoft will\ntake care of that one for us.\n\n218\n00:10:34.630 --> 00:10:35.750\nIf they have a failure and\n\n219\n00:10:35.750 --> 00:10:38.980\ntheir data center goes down, they'll\nactually do the restore for us, right?\n\n220\n00:10:38.980 --> 00:10:41.550\nCuz they are doing a back up,\nwe don't have to worry about it.\n\n221\n00:10:41.550 --> 00:10:43.140\nSo that's kind of a nice part of Azure,\n\n222\n00:10:43.140 --> 00:10:46.780\nversus if it's our on-premises equipment,\nthen we're like, let's go get those tapes,\n\n223\n00:10:46.780 --> 00:10:49.140\nlet's get to work and\nstart restoring things.\n\n224\n00:10:49.140 --> 00:10:50.840\nAnd so we've gotta kind of plan from that.\n\n225\n00:10:50.840 --> 00:10:53.870\nSo just be aware of those three different\nscenarios, as we think about the RPO and\n\n226\n00:10:53.870 --> 00:10:55.900\nRTO, and then we apply to those scenarios.\n\n227\n00:10:55.900 --> 00:10:59.090\nAnd we look at each of these different\nsolutions, they each have their pros and\n\n228\n00:10:59.090 --> 00:11:02.420\ncons some are really complex,\nsome are really easy.\n\n229\n00:11:02.420 --> 00:11:05.620\nIt's just up to you to pick the one\nthat actually works for your needs.\n\n230\n00:11:05.620 --> 00:11:09.220\n>> Now Don,\nhow does replication fit into all this?\n\n231\n00:11:09.220 --> 00:11:10.805\nWe understand backing up, right?\n\n232\n00:11:10.805 --> 00:11:14.640\nI'm actually taking the data,\nI'm putting it on some sort of media, or\n\n233\n00:11:14.640 --> 00:11:19.000\nI'm storing it somewhere But replication\nis, it's a different concept right?\n\n234\n00:11:19.000 --> 00:11:22.120\n>> Yeah, you know replication will\nprotect you from a lot of things.\n\n235\n00:11:22.120 --> 00:11:23.220\nI mentioned SQL a minute ago.\n\n236\n00:11:23.220 --> 00:11:26.830\nRight, I might have a SQL database\ndeployed in, in one region.\n\n237\n00:11:26.830 --> 00:11:29.680\nAnd then I maintain a replica\nof it in another region.\n\n238\n00:11:29.680 --> 00:11:31.170\nOr active directory domain controllers.\n\n239\n00:11:31.170 --> 00:11:32.820\nRight, we would do DCs.\n\n240\n00:11:32.820 --> 00:11:34.710\nI might have an Azure VM in East US 2.\n\n241\n00:11:34.710 --> 00:11:36.750\nThat's an active directory\ndomain controller.\n\n242\n00:11:36.750 --> 00:11:41.440\nAnd I might have another\nAzure VM over in West U.S.,\n\n243\n00:11:41.440 --> 00:11:44.800\nthat's also a domain controller and\nthey're replicating between each other.\n\n244\n00:11:44.800 --> 00:11:45.340\nRight?\n\n245\n00:11:45.340 --> 00:11:47.930\nIf I lose one, the other's still up.\n\n246\n00:11:47.930 --> 00:11:48.560\nI'm safe.\n\n247\n00:11:48.560 --> 00:11:51.430\nNow I could use Azure AD too,\nbut just for the example here.\n\n248\n00:11:51.430 --> 00:11:52.660\nWe're using.\n\n249\n00:11:52.660 --> 00:11:55.340\nSo if one fails I've got the other one,\nI'm safe, right?\n\n250\n00:11:55.340 --> 00:11:59.829\nBut if I delete a user\nfrom the one in East U.S.\n\n251\n00:11:59.829 --> 00:12:03.910\ntwo, it's gonna replicate that and\ndelete that on West U.S. also.\n\n252\n00:12:03.910 --> 00:12:06.600\nSo it didn't save me from\nthat accidental deletion.\n\n253\n00:12:06.600 --> 00:12:10.290\nReplication saves you from physical\ndisasters, server disasters,\n\n254\n00:12:10.290 --> 00:12:12.550\nnetwork connection type issues,\nstuff like that.\n\n255\n00:12:12.550 --> 00:12:15.000\nIt doesn't save you from human disasters,\nright?\n\n256\n00:12:15.000 --> 00:12:18.685\nI make a mistake, I apply a bad service\npack, I do something like that,\n\n257\n00:12:18.685 --> 00:12:23.545\nto down this system, a lot of those\nchanges will replicate to the other side,\n\n258\n00:12:23.545 --> 00:12:24.825\nand that becomes a problem.\n\n259\n00:12:24.825 --> 00:12:27.755\nMaybe not bad service pack,\nbecause the other system,\n\n260\n00:12:27.755 --> 00:12:29.645\nif I haven't applied the service\nback there, it would be fine.\n\n261\n00:12:29.645 --> 00:12:31.385\n>> Like a database change or something.\n\n262\n00:12:31.385 --> 00:12:32.045\n>> Yeah.\nAnd\n\n263\n00:12:32.045 --> 00:12:35.835\nyou see that where maybe the database\ngets upgraded to a new schema, and\n\n264\n00:12:35.835 --> 00:12:38.635\nit starts replicating that schema to the\nother side, and it really hoses things up.\n\n265\n00:12:38.635 --> 00:12:40.940\nSo that can happen and\nreplication does that.\n\n266\n00:12:40.940 --> 00:12:44.510\nSo replication is great,\nbecause you get instant fail over, right?\n\n267\n00:12:44.510 --> 00:12:48.980\nSo, great for high availability, but\nit's not a replacement for backups.\n\n268\n00:12:48.980 --> 00:12:50.420\nYou'll still wanna backup.\n\n269\n00:12:50.420 --> 00:12:54.410\nBut if you were to deploy Azure SQL,\nwhich we did a whole series on Azure SQL.\n\n270\n00:12:54.410 --> 00:12:56.680\nIf you haven't watched those,\nit's worth checking out.\n\n271\n00:12:56.680 --> 00:12:59.730\nBut Microsoft does backups for\nyou for Azure SQL, so\n\n272\n00:12:59.730 --> 00:13:01.300\nyou can restore them specifically for\n\n273\n00:13:01.300 --> 00:13:04.390\nthat reason, cuz they know replication\nis not a substitute for that.\n\n274\n00:13:04.390 --> 00:13:08.330\nBut on the VMs, they kinda leave it up to\nus, it's up to us to get that set up and\n\n275\n00:13:08.330 --> 00:13:09.790\nwe got a ton of solutions for it.\n\n276\n00:13:10.790 --> 00:13:13.210\nAll right so\nlet's take a look at some of these.\n\n277\n00:13:13.210 --> 00:13:16.650\nLet's start with the 600 pound gorilla,\n\n278\n00:13:16.650 --> 00:13:20.700\nall right, the gigantic hammer for\ntapping in that little tack nail.\n\n279\n00:13:20.700 --> 00:13:24.100\nIf I wanna have a extremely robust,\n\n280\n00:13:24.100 --> 00:13:29.080\nvery powerful environment for backing\nup and restoring virtual machines, and\n\n281\n00:13:29.080 --> 00:13:32.800\nthese would be VMs in Azure,\nor VMs on premises, or both.\n\n282\n00:13:32.800 --> 00:13:35.920\nI can have a hybrid environment, right,\nwhere my cloud is private and public, and\n\n283\n00:13:35.920 --> 00:13:37.480\nit's spread across a whole environment.\n\n284\n00:13:37.480 --> 00:13:39.630\nIf I wanna do that,\n\n285\n00:13:39.630 --> 00:13:44.330\nthere's a software package from Microsoft\ncalled the System Center Orchestrator.\n\n286\n00:13:44.330 --> 00:13:46.370\nSystem Center Orchestrator,\nit's one of the pieces,\n\n287\n00:13:46.370 --> 00:13:49.170\none of the components in\nSystem Center 2012 R2, right.\n\n288\n00:13:49.170 --> 00:13:52.640\nSo if we install System Center 2012,\nyou've got all these different components.\n\n289\n00:13:52.640 --> 00:13:55.750\nOperations manager,\nconfiguration manager, and so on.\n\n290\n00:13:55.750 --> 00:13:58.780\nAnd Orchestrator is one of those,\nand when you look at it here,\n\n291\n00:13:58.780 --> 00:14:03.460\nsee how it says it's a workflow\nmanagement solution for the data center.\n\n292\n00:14:03.460 --> 00:14:05.460\nNot backup and restore.\n\n293\n00:14:05.460 --> 00:14:10.210\nWorkflow automation, Visual Runbook\nauthoring, cross-platform workflow\n\n294\n00:14:10.210 --> 00:14:13.325\nintegration, not really anything\nhere about backup and restore.\n\n295\n00:14:13.325 --> 00:14:14.030\n>> [LAUGH]\n>> Right?\n\n296\n00:14:14.030 --> 00:14:16.870\nAnd if I look down here,\ndata protection manager.\n\n297\n00:14:16.870 --> 00:14:19.480\nSystem center data protection manager\nspecifically is for backup and\n\n298\n00:14:19.480 --> 00:14:20.250\nrestore, right?\n\n299\n00:14:20.250 --> 00:14:21.750\nThat's what it does.\n\n300\n00:14:21.750 --> 00:14:24.520\nAnd centralized backup for\nVMs and applications.\n\n301\n00:14:24.520 --> 00:14:27.400\nArchiving backup data to Azure,\nthat's what it does.\n\n302\n00:14:27.400 --> 00:14:31.405\nBut SCDPM is really designed to back\nup on-premises equipment, right, your\n\n303\n00:14:31.405 --> 00:14:35.680\non-premises storage backing up to storage\neither there or up in the Azure cloud.\n\n304\n00:14:35.680 --> 00:14:38.380\nBut with System Center Orchestrator,\n\n305\n00:14:38.380 --> 00:14:43.140\nwhat you can do is you can back\nup entire virtual machines.\n\n306\n00:14:43.140 --> 00:14:49.930\nYou can take an entire VM and\nexport it and deploy it up into Azure.\n\n307\n00:14:49.930 --> 00:14:53.550\nNow to do that, you have to write\nwhat's called a Runbook, and\n\n308\n00:14:53.550 --> 00:14:56.360\na Runbook is basically\na very complex script.\n\n309\n00:14:56.360 --> 00:15:00.850\nThat says, I've got a website, and\nI can get the copies of the files for\n\n310\n00:15:00.850 --> 00:15:02.400\nthe website right here.\n\n311\n00:15:02.400 --> 00:15:07.400\nAnd if I ever have a failure like in one\nregion, I can fire up a Runbook that will\n\n312\n00:15:07.400 --> 00:15:12.380\nrecreate all my web servers in another\nregion and deploy the website on to it.\n\n313\n00:15:12.380 --> 00:15:15.640\nOr deploy a web app, or any of the other\nweb services that we have that might\n\n314\n00:15:15.640 --> 00:15:18.030\nbeyond the standard virtual machine.\n\n315\n00:15:18.030 --> 00:15:19.570\nSystems and Orchestrator can do that.\n\n316\n00:15:19.570 --> 00:15:22.900\nIt can deploy entire\nenvironments in seconds.\n\n317\n00:15:22.900 --> 00:15:25.520\nSo you could have just\nlost a thousand servers.\n\n318\n00:15:25.520 --> 00:15:27.398\nAnd if you've written the Runbooks for it.\n\n319\n00:15:27.398 --> 00:15:32.360\nIt could re-deploy, and build all\nthousand of those servers in a very short\n\n320\n00:15:32.360 --> 00:15:36.820\nperiod of time, in another region, and you\ncan be up and running very, very quickly.\n\n321\n00:15:36.820 --> 00:15:41.280\nSystem Center Orchestrator, if you\never get a chance to see it in action,\n\n322\n00:15:41.280 --> 00:15:42.130\nit's like magic.\n\n323\n00:15:42.130 --> 00:15:44.940\nI mean it is really as close\nto IT magic as you can get.\n\n324\n00:15:44.940 --> 00:15:47.680\nBut there's so\nmuch work that goes into it.\n\n325\n00:15:47.680 --> 00:15:50.490\nIt is impressive, and\nlet me just show you an example.\n\n326\n00:15:50.490 --> 00:15:53.586\nSo here I've pulled up\nan article from Microsoft,\n\n327\n00:15:53.586 --> 00:15:57.337\nthis is automation-orchestration for\nHyper-V Replicas.\n\n328\n00:15:57.337 --> 00:16:02.170\nSo I've got a Hyper-V virtual machine, and\nthat means it can be a virtual machine on\n\n329\n00:16:02.170 --> 00:16:06.185\npremise, in my own Hyper-V deployment Or\nthis could be an Azure VM and\n\n330\n00:16:06.185 --> 00:16:11.480\nI want to automate having a copy of that\nand deploying it somewhere else, right?\n\n331\n00:16:11.480 --> 00:16:12.940\nSo it's a pretty powerful product.\n\n332\n00:16:12.940 --> 00:16:14.150\nIt just takes a lot of work, right?\n\n333\n00:16:14.150 --> 00:16:17.460\nA lot of back end work to get in there and\nget those scripts written, and\n\n334\n00:16:17.460 --> 00:16:18.490\nget that ready for deployment.\n\n335\n00:16:18.490 --> 00:16:23.020\nBut very powerful for deploying entire\nAzure environments very quickly, and\n\n336\n00:16:23.020 --> 00:16:25.530\ndefinitely a solution that's out there,\nall right?\n\n337\n00:16:25.530 --> 00:16:29.380\nSo if you've got the resources\nto do that is wonderful.\n\n338\n00:16:29.380 --> 00:16:32.070\nBut let's say you don't have the resources\nto do that, cuz it is a lot of work.\n\n339\n00:16:32.070 --> 00:16:32.630\nRight?\nSo\n\n340\n00:16:32.630 --> 00:16:34.090\nthere is another product from Microsoft,\n\n341\n00:16:34.090 --> 00:16:37.370\nwhich is what's called\nAzure Site Recovery.\n\n342\n00:16:37.370 --> 00:16:38.830\nNow, Azure Site Recovery,\n\n343\n00:16:38.830 --> 00:16:41.440\nit's actually taken on a few\ndifferent roles over the years.\n\n344\n00:16:41.440 --> 00:16:43.350\nLet me show you the website here.\n\n345\n00:16:43.350 --> 00:16:48.220\nOriginally, it was designed so you\ncould backup your on premises equipment\n\n346\n00:16:48.220 --> 00:16:51.530\nto Azure, and\nthen if you ever needed to restore,\n\n347\n00:16:51.530 --> 00:16:55.660\nit would restore as Azure VMs,\ninstead of physical servers.\n\n348\n00:16:55.660 --> 00:16:57.620\nSo, instead of having to\nhave a DR site somewhere,\n\n349\n00:16:57.620 --> 00:17:00.520\nyou could back up all your\non-premises stuff right into Azure.\n\n350\n00:17:00.520 --> 00:17:03.120\nYou can actually use it to back\nup Azure machines, too, though.\n\n351\n00:17:03.120 --> 00:17:04.570\nIt's kinda interesting the way that works.\n\n352\n00:17:04.570 --> 00:17:07.800\nAnd, so, you can be backing up\nan Azure deployment in one region, so\n\n353\n00:17:07.800 --> 00:17:10.860\nyou could quickly restore it in\nanother region if you wanted.\n\n354\n00:17:10.860 --> 00:17:14.800\nNotice what it says right here,\norchestrated recovery when needed.\n\n355\n00:17:14.800 --> 00:17:16.930\nThe nice thing about Azure Site Recovery,\n\n356\n00:17:16.930 --> 00:17:22.130\nis it builds those run books\nfrom System Center Orchestrator.\n\n357\n00:17:22.130 --> 00:17:23.610\nIt builds them for you.\n\n358\n00:17:23.610 --> 00:17:27.340\nNow they can only know so much about your\nproduct, but they basically build them.\n\n359\n00:17:27.340 --> 00:17:29.810\nAnd it creates a really neat environment.\n\n360\n00:17:29.810 --> 00:17:30.850\nThe cool part about this,\n\n361\n00:17:30.850 --> 00:17:34.530\nI've actually used Azure Site Recovery\nto migrate people to Azure before.\n\n362\n00:17:34.530 --> 00:17:37.180\nWhere you deploy it on their\non-premises equipment.\n\n363\n00:17:37.180 --> 00:17:40.020\nYou get it all set for doing backups,\nyou get everything configured.\n\n364\n00:17:40.020 --> 00:17:43.170\nNow they're all being backed up to Azure,\nand then one day you say, you know what?\n\n365\n00:17:44.190 --> 00:17:47.370\nIt's time to move to the cloud, and\nyou flip a switch, and you say restore.\n\n366\n00:17:47.370 --> 00:17:49.980\nAnd it brings all\nthe services up in Azure,\n\n367\n00:17:49.980 --> 00:17:52.200\nit shuts down all the ones\nthat are on premises.\n\n368\n00:17:52.200 --> 00:17:53.960\nAnd now you've got\na cloud enabled company.\n\n369\n00:17:53.960 --> 00:17:56.940\nSo you can actually use this like\na migration tool, it's pretty neat.\n\n370\n00:17:56.940 --> 00:17:59.160\nThe only negative about\nAzure site recovery,\n\n371\n00:17:59.160 --> 00:18:01.180\nis it does require a management server.\n\n372\n00:18:01.180 --> 00:18:03.790\nI've got to deploy an on-premises\nmanagement server,\n\n373\n00:18:03.790 --> 00:18:08.200\nthat's handling the back-ups of that,\nand then moving them up in Azure.\n\n374\n00:18:08.200 --> 00:18:09.930\nIf I wanna use this in the Azure cloud,\n\n375\n00:18:09.930 --> 00:18:12.280\nI still have to have\na management server somewhere.\n\n376\n00:18:12.280 --> 00:18:13.690\nAnd you can put it in Azure if you want.\n\n377\n00:18:13.690 --> 00:18:15.690\nBut you'd still have to\nkinda go that route.\n\n378\n00:18:15.690 --> 00:18:17.300\nSo it another option that's available for\nMicrosoft.\n\n379\n00:18:17.300 --> 00:18:18.240\nYou can definitely use that one.\n\n380\n00:18:18.240 --> 00:18:19.080\nAll right.\n\n381\n00:18:19.080 --> 00:18:21.270\nAnd it does take some work.\n\n382\n00:18:21.270 --> 00:18:24.880\nSo here's a Microsoft document that\nshows setting up Azure Site Recovery for\n\n383\n00:18:24.880 --> 00:18:26.170\na VMware environment.\n\n384\n00:18:26.170 --> 00:18:28.270\nMaybe I've got VMware locally.\n\n385\n00:18:28.270 --> 00:18:31.350\nAnd I want to migrate up to Azure,\nwhich is running on HyperV.\n\n386\n00:18:31.350 --> 00:18:33.330\nWell, it can handle that.\n\n387\n00:18:33.330 --> 00:18:35.900\nThe thing is like this article,\nI make fun of this article.\n\n388\n00:18:35.900 --> 00:18:38.810\nIf you notice, there's 12 steps,\n12 simple steps.\n\n389\n00:18:38.810 --> 00:18:42.110\n>> Step one is migrate to HyperV.\n\n390\n00:18:42.110 --> 00:18:43.920\nRight.\n[LAUGH] The dirty V.\n\n391\n00:18:43.920 --> 00:18:45.050\n>> It's not that bad.\n\n392\n00:18:45.050 --> 00:18:48.570\nYou know, if you look at it and think\nabout the 12 steps that you have to do.\n\n393\n00:18:48.570 --> 00:18:50.690\nUntil you actually start to read this.\n\n394\n00:18:50.690 --> 00:18:54.570\nAnd let me tell you,\nthey are 12 serious steps.\n\n395\n00:18:54.570 --> 00:18:57.350\nIt is a lot of work to get deployed.\n\n396\n00:18:57.350 --> 00:19:01.930\nBut, much like the System Center\nOrchestrator, once it's done,\n\n397\n00:19:01.930 --> 00:19:03.330\nit's darn near magic.\n\n398\n00:19:03.330 --> 00:19:05.190\nI mean,\nyou're backing up one environment and\n\n399\n00:19:05.190 --> 00:19:07.770\nrestoring to a completely\ndifferent type of environment.\n\n400\n00:19:07.770 --> 00:19:08.740\nIt's impressive stuff.\n\n401\n00:19:08.740 --> 00:19:11.900\nAnd I'll post the links to\nthis page with the show notes.\n\n402\n00:19:11.900 --> 00:19:13.826\nDon't try and jot all that down.\n\n403\n00:19:13.826 --> 00:19:14.336\n[LAUGH]\n>> [LAUGH]\n\n404\n00:19:14.336 --> 00:19:15.350\n>> Don't hurt your hands.\n\n405\n00:19:15.350 --> 00:19:17.580\nBut I'll put the links\nwith the show notes.\n\n406\n00:19:17.580 --> 00:19:20.300\nBut yeah, that definitely\nanother option right there.\n\n407\n00:19:20.300 --> 00:19:23.440\nReally powerful, especially if you're\nstill gonna hang on to some on-premises\n\n408\n00:19:23.440 --> 00:19:25.060\nequipment, which a lot of people do.\n\n409\n00:19:25.060 --> 00:19:27.090\nAzure Sight Recovery can do that, but\n\n410\n00:19:27.090 --> 00:19:31.820\nMicrosoft realized early on that Azure\nSight Recovery is still hard to deploy.\n\n411\n00:19:31.820 --> 00:19:33.340\nYou have to have a management server and\nso\n\n412\n00:19:33.340 --> 00:19:37.940\non, so they deployed another\nsolution called Azure Backup.\n\n413\n00:19:37.940 --> 00:19:42.660\nAzure Backup is a lot more like\nthe traditional backup that we're used to.\n\n414\n00:19:42.660 --> 00:19:46.120\nYou can run Azure back up\nas an agent on your server.\n\n415\n00:19:46.120 --> 00:19:50.100\nAnd the server can be a VM in Azure, or\nit can be a physical machine in your\n\n416\n00:19:50.100 --> 00:19:52.220\nenvironment, or even a virtual\nmachine in your environment.\n\n417\n00:19:52.220 --> 00:19:55.500\nYou basically run a back up agent, kind of\nlike you would with Symantec Backup Exec,\n\n418\n00:19:55.500 --> 00:19:56.890\nor Arcserve, Commvault, or\n\n419\n00:19:56.890 --> 00:20:00.130\nany of those other guys out there,\nyou run an agent on your machine.\n\n420\n00:20:00.130 --> 00:20:01.480\nAnd then you schedule a back up.\n\n421\n00:20:01.480 --> 00:20:05.440\nAnd you tell it to back up once an hour,\nonce a day, every 15 minutes,\n\n422\n00:20:05.440 --> 00:20:06.850\nwhatever it is you want.\n\n423\n00:20:06.850 --> 00:20:09.510\nAnd the only difference\nis it runs a backup and\n\n424\n00:20:09.510 --> 00:20:12.640\nstores it in a backup vault in Azure.\n\n425\n00:20:12.640 --> 00:20:14.520\nAnd so it's very simple.\n\n426\n00:20:14.520 --> 00:20:17.950\nThe only negative with Azure Backup,\nwas that when it was originally deployed,\n\n427\n00:20:17.950 --> 00:20:20.140\nit could only backup files and folders.\n\n428\n00:20:20.140 --> 00:20:24.270\nSo if you had file data you wanted\nto backup, it worked great, right?\n\n429\n00:20:24.270 --> 00:20:25.950\nBut what if you had a database?\n\n430\n00:20:25.950 --> 00:20:28.790\nWhat if you had Microsoft Exchange?\n\n431\n00:20:28.790 --> 00:20:31.110\nWell, it wasn't aware of those.\n\n432\n00:20:31.110 --> 00:20:33.890\nAnd see, you have to set up some\nother kind of backup first, and\n\n433\n00:20:33.890 --> 00:20:36.050\nthen have Azure back\nup your back up files.\n\n434\n00:20:36.050 --> 00:20:38.010\nGets a little redundant, right?\n\n435\n00:20:38.010 --> 00:20:40.610\nSo they just pushed out,\na couple of months ago,\n\n436\n00:20:40.610 --> 00:20:45.530\na new update that introduced app\nawareness into Azure Backup.\n\n437\n00:20:45.530 --> 00:20:47.790\nAnd so, now it recognizes SQL.\n\n438\n00:20:47.790 --> 00:20:50.490\nNow if it's a VM that's being backed up,\n\n439\n00:20:50.490 --> 00:20:53.740\nit can back up the whole\nthing into a system image.\n\n440\n00:20:53.740 --> 00:20:57.010\nAnd so, now I can grab copies of\nthose machines while they're online,\n\n441\n00:20:57.010 --> 00:20:59.810\nwithout taking them offline,\nand back that up to Azure.\n\n442\n00:20:59.810 --> 00:21:02.350\nOr if it's already in Azure,\nbasically making a clone in Azure.\n\n443\n00:21:02.350 --> 00:21:04.930\nAnd that way I can have fail over and\nrestore there.\n\n444\n00:21:04.930 --> 00:21:09.570\nAnd Azure backup is really easy to get\nset up, because it is agent driven.\n\n445\n00:21:09.570 --> 00:21:13.290\nYou basically get into your portal, and\n\n446\n00:21:13.290 --> 00:21:16.860\none of the first things you have\nto do is create a back up vault.\n\n447\n00:21:16.860 --> 00:21:19.210\nAnd once you have a back up vault,\nthat's where your back ups starting to go,\n\n448\n00:21:19.210 --> 00:21:22.160\nthen you just need to install\nthe agent into your machines, and\n\n449\n00:21:22.160 --> 00:21:23.680\nyou can start doing the back up.\n\n450\n00:21:23.680 --> 00:21:25.960\nSo for example if I go down here to new.\n\n451\n00:21:25.960 --> 00:21:27.980\nAnd data services.\n\n452\n00:21:27.980 --> 00:21:29.820\nAnd recovery service.\n\n453\n00:21:29.820 --> 00:21:30.940\nAnd I do a backup vault.\n\n454\n00:21:30.940 --> 00:21:33.430\nHere's the site recovery vault if\nI want to do Azure site recovery.\n\n455\n00:21:33.430 --> 00:21:35.100\nBut I want to do a backup vault.\n\n456\n00:21:35.100 --> 00:21:36.750\nAnd when you create a backup vault.\n\n457\n00:21:36.750 --> 00:21:38.910\nThis is for setting up Azure backup.\n\n458\n00:21:38.910 --> 00:21:40.090\nAnd I can give it a name.\n\n459\n00:21:40.090 --> 00:21:46.000\nSo I might call this Switch V backup 01 or\nsomething like that.\n\n460\n00:21:46.000 --> 00:21:47.950\nAnd I can pick what region\nI want to store it in.\n\n461\n00:21:47.950 --> 00:21:49.230\nI'll store it in East U.S. 2.\n\n462\n00:21:49.230 --> 00:21:51.710\nAnd I'm gonna create that vault.\n\n463\n00:21:51.710 --> 00:21:55.270\nAnd a vault is just a storage\nrepository for backups.\n\n464\n00:21:55.270 --> 00:21:57.360\nAnd now when I run my backups,\nthey'll go in there.\n\n465\n00:21:57.360 --> 00:21:59.760\nAnd I've already got one that\nI created a few days ago.\n\n466\n00:21:59.760 --> 00:22:00.930\nLet's see if I can find it.\n\n467\n00:22:00.930 --> 00:22:04.880\n>> So, Don, does this replace something\nlike a SAN or tape backup system?\n\n468\n00:22:04.880 --> 00:22:08.040\nNow it just goes into these backup vaults?\n\n469\n00:22:08.040 --> 00:22:10.760\n>> So it may or may not replace a SAN,\ndepending on how you use it.\n\n470\n00:22:10.760 --> 00:22:12.700\nIt could definitely replace tape backups,\nright?\n\n471\n00:22:12.700 --> 00:22:14.880\nThat we're effectively backing\nup to a vault up here.\n\n472\n00:22:14.880 --> 00:22:18.740\nNow you might have data retention\npolicies that you're concerned about,\n\n473\n00:22:18.740 --> 00:22:20.910\nthat you'd have to kind of negotiate here.\n\n474\n00:22:20.910 --> 00:22:23.210\nSo you might choose to have tapes around.\n\n475\n00:22:23.210 --> 00:22:25.970\nBut if I wanted to do a restore,\nI'd go here to the backup vault.\n\n476\n00:22:25.970 --> 00:22:29.200\nI wouldn't necessarily go to tape,\nunless I absolutely had to.\n\n477\n00:22:29.200 --> 00:22:30.790\nAnd apparently,\nI skipped over somewhere in here,\n\n478\n00:22:30.790 --> 00:22:33.760\nI've got my recovery\nservices little menu item.\n\n479\n00:22:33.760 --> 00:22:35.930\nThere it is, skipped right past it.\n\n480\n00:22:35.930 --> 00:22:39.550\nSo I can find the vault that I just made,\nthe itprotv backup 01 right here.\n\n481\n00:22:39.550 --> 00:22:40.530\nIt's still creating.\n\n482\n00:22:40.530 --> 00:22:41.630\nIt just finished.\n\n483\n00:22:41.630 --> 00:22:45.340\nAnd once it's done,\nI can start backing up to it.\n\n484\n00:22:45.340 --> 00:22:49.190\nThe way you back up to it, is you can\nset your on premises system to back up.\n\n485\n00:22:49.190 --> 00:22:52.660\nAnd notice in my quick start here,\nit says on-premise workloads.\n\n486\n00:22:52.660 --> 00:22:54.270\nHere's what you need to do.\n\n487\n00:22:54.270 --> 00:22:55.580\nDownload your vault credentials.\n\n488\n00:22:55.580 --> 00:22:57.790\nThere's an encryption key that's used.\n\n489\n00:22:57.790 --> 00:23:00.020\nAnd then install the agent.\n\n490\n00:23:00.020 --> 00:23:04.300\nAnd there's the Azure back up that we can\ninstall, the original agent right here for\n\n491\n00:23:04.300 --> 00:23:06.990\nWindows Server or\nSystem Center Data Protection Manager.\n\n492\n00:23:06.990 --> 00:23:10.010\nand there's the Microsoft Azure\nBackup Server for Applications,\n\n493\n00:23:10.010 --> 00:23:15.290\nthat's the new one, that's SQL aware,\nExchange aware, active directory aware.\n\n494\n00:23:15.290 --> 00:23:18.730\nIt can actually back up an entire\nVM if it's running on hyper V, so\n\n495\n00:23:18.730 --> 00:23:22.060\nit really gets some advanced\nfunctionality there with that new agent.\n\n496\n00:23:22.060 --> 00:23:24.730\nOr I can install the other agent.\n\n497\n00:23:24.730 --> 00:23:28.470\nAnd just back up files and folders and\nget those backed up, right?\n\n498\n00:23:28.470 --> 00:23:32.200\nAnd when you install it, it just asks\nto provide the credential file, and\n\n499\n00:23:32.200 --> 00:23:33.870\nthen after that it's just like\nsetting up a regular backup.\n\n500\n00:23:33.870 --> 00:23:36.280\nYou pick what you want to backup, and\nyou set your time and your schedule, and\n\n501\n00:23:36.280 --> 00:23:37.680\nit backs up into Azure.\n\n502\n00:23:37.680 --> 00:23:42.670\nWhen you want to restore, you just create\na new VM, you put this agent on there,\n\n503\n00:23:42.670 --> 00:23:45.350\nand you choose the restore option on it,\nand you pick what you want to restore, and\n\n504\n00:23:45.350 --> 00:23:46.220\nit'll bring it back in.\n\n505\n00:23:46.220 --> 00:23:47.850\nAnd so you can bring it right back up.\n\n506\n00:23:47.850 --> 00:23:48.720\nNo problem.\nAnd\n\n507\n00:23:48.720 --> 00:23:52.230\nif I scroll down a bit,\nProtect your Azure Virtual Machines.\n\n508\n00:23:52.230 --> 00:23:55.240\nSo not just on-premises, but\nwe can do Azure right here.\n\n509\n00:23:55.240 --> 00:23:57.460\nIt'll discover the Virtual Machines for\nus.\n\n510\n00:23:57.460 --> 00:24:00.462\nAnd we don't have to install the agent,\ncuz technically it's already there.\n\n511\n00:24:00.462 --> 00:24:03.420\nMicrosoft is using this for\ntheir backups, right?\n\n512\n00:24:03.420 --> 00:24:06.301\nSo I just need to register the Virtual\nMachines that I wanna back up and\n\n513\n00:24:06.301 --> 00:24:09.047\nThat doesn't mean pay extra,\nalthough you'd pay for storage.\n\n514\n00:24:09.047 --> 00:24:12.320\nIt just means register it here with\nthe system, so it knows to back it up.\n\n515\n00:24:12.320 --> 00:24:14.560\nAnd then it'll start to\nprotect those machines.\n\n516\n00:24:14.560 --> 00:24:17.910\nSo, Azure backup, super easy to use.\n\n517\n00:24:17.910 --> 00:24:20.880\nAnd I used to tell\npeople that it wasn't so\n\n518\n00:24:20.880 --> 00:24:23.160\ngreat cuz you could only back up files and\nfolders.\n\n519\n00:24:23.160 --> 00:24:27.040\nBut now that it can backup entire VMs and\nit's SQL and Exchange aware,\n\n520\n00:24:27.040 --> 00:24:29.120\nActive Directory aware, now it's great.\n\n521\n00:24:29.120 --> 00:24:32.010\nAnd in fact, for most small and\nmedium businesses,\n\n522\n00:24:32.010 --> 00:24:37.510\nI usually don't even mention System Center\nOrchestrator or Azure Site Backup anymore.\n\n523\n00:24:37.510 --> 00:24:38.678\nJust because they're so\n\n524\n00:24:38.678 --> 00:24:41.578\ncomplex and this is so\nmuch more simple, it really works out.\n\n525\n00:24:41.578 --> 00:24:44.771\nBut if you're a large organization\nwith a complex deployment,\n\n526\n00:24:44.771 --> 00:24:46.990\nyou might need the complex features.\n\n527\n00:24:46.990 --> 00:24:51.040\nSo for me when I go to choose these,\nmy first choice is Azure Backup,\n\n528\n00:24:51.040 --> 00:24:51.960\nif I can go that route.\n\n529\n00:24:51.960 --> 00:24:55.370\nCuz it's easy to deploy, quick to\nimplement and you're in business, right?\n\n530\n00:24:55.370 --> 00:24:57.200\nSo that's the one I go to first.\n\n531\n00:24:57.200 --> 00:25:00.520\nBut if I have a custom need,\nthen I go to Azure Site Backup.\n\n532\n00:25:00.520 --> 00:25:02.100\nThat's next, right?\n\n533\n00:25:02.100 --> 00:25:04.910\nAnd only in the most complex\nof environments do I go to\n\n534\n00:25:04.910 --> 00:25:08.800\nSystem Center Orchestrator just\nbecause you need staff to manage that.\n\n535\n00:25:08.800 --> 00:25:10.750\nIt's that kind of a project.\n\n536\n00:25:10.750 --> 00:25:14.040\nBut that is another option,\nit's out there.\n\n537\n00:25:14.040 --> 00:25:16.750\n>> No reason to make it more difficult\nthan it already is, right Don?\n\n538\n00:25:16.750 --> 00:25:19.391\n>> Yeah, and you certainly can\nwith System Center Orchestrator.\n\n539\n00:25:19.391 --> 00:25:25.500\nNow, those are the main options from\nMicrosoft, but there's more out there.\n\n540\n00:25:25.500 --> 00:25:28.090\nThere are tons of companies out\nthere on the Internet that have\n\n541\n00:25:28.090 --> 00:25:32.620\nthird party backup and restore solutions\nthat are Azure integrated that work great.\n\n542\n00:25:32.620 --> 00:25:33.970\nAnd you're welcome to use those too.\n\n543\n00:25:33.970 --> 00:25:36.380\nEspecially if it integrates with\nsome system you've already got or\n\n544\n00:25:36.380 --> 00:25:38.390\nsomething you're just used to already.\n\n545\n00:25:38.390 --> 00:25:39.560\nYou might as well use it.\n\n546\n00:25:39.560 --> 00:25:42.730\nAnd you've even got things like the\nWindows Server backup inside of your VMs.\n\n547\n00:25:42.730 --> 00:25:45.210\nYou can use, if you're running Linux\nboxes you get all sorts of stuff\n\n548\n00:25:45.210 --> 00:25:46.090\nthat you can use.\n\n549\n00:25:46.090 --> 00:25:49.090\nSo don't feel like you're\npigeonholed in these solutions.\n\n550\n00:25:49.090 --> 00:25:51.309\nBut these are kind of nice cuz\nit is integrated in Azure and\n\n551\n00:25:51.309 --> 00:25:53.910\nif you have a problem,\nyou got one person you can call, right?\n\n552\n00:25:53.910 --> 00:25:56.116\nCall up Microsoft and\nthey'll help you with it.\n\n553\n00:25:56.116 --> 00:25:57.896\nAs helpful as they get at least, so.\n\n554\n00:25:57.896 --> 00:25:59.475\n>> [LAUGH]\n>> So that's there, but\n\n555\n00:25:59.475 --> 00:26:01.407\nthose are basically the backup\noptions that we have and\n\n556\n00:26:01.407 --> 00:26:04.320\nI just wanted to make sure you guys\nknew what products were out there.\n\n557\n00:26:04.320 --> 00:26:08.340\nAnd give them a shot, see which ones\nsuits your needs and get in there and\n\n558\n00:26:08.340 --> 00:26:09.630\nwork with that.\n\n559\n00:26:09.630 --> 00:26:14.220\nTo basically create a safer more stable\nenvironment where you can sleep at night.\n\n560\n00:26:14.220 --> 00:26:16.179\nKnowing that if a disaster happens,\nI've got good,\n\n561\n00:26:16.179 --> 00:26:18.586\ncurrent data that I can restore and\neverything's gonna be fine.\n\n562\n00:26:18.586 --> 00:26:21.933\n>> Yeah, that Azure backup's probably\ngonna be a really good thing,\n\n563\n00:26:21.933 --> 00:26:24.350\neven if you have a larger,\nmore complex system.\n\n564\n00:26:24.350 --> 00:26:27.785\nYou may just want to get your\nfeet wet by using Azure Backup in\n\n565\n00:26:27.785 --> 00:26:32.930\nlearning the systems and then maybe\nmigrating to something more complex later.\n\n566\n00:26:32.930 --> 00:26:36.610\nI know that we used Semantic, right?\n\n567\n00:26:36.610 --> 00:26:38.270\nSemantic was a great product.\n\n568\n00:26:38.270 --> 00:26:40.470\nBut if I'm moving to Azure and\nthey offer this for\n\n569\n00:26:40.470 --> 00:26:42.430\nme, I'm probably gonna jump right there.\n\n570\n00:26:42.430 --> 00:26:44.240\nBecause I kind of\nunderstand the concepts and\n\n571\n00:26:44.240 --> 00:26:46.160\nthe workflow seems to be quite similar.\n\n572\n00:26:46.160 --> 00:26:49.220\nDon, is there anything else about\nbacking up disaster recovery for\n\n573\n00:26:49.220 --> 00:26:50.920\nthis episode that we need to cover?\n\n574\n00:26:50.920 --> 00:26:52.920\n>> The only other thing I\nwanna throw out here and\n\n575\n00:26:52.920 --> 00:26:55.250\nI don't wanna get too specific\non it though, it's just billing.\n\n576\n00:26:55.250 --> 00:26:57.060\nRemember with Microsoft,\nwith these backup solutions,\n\n577\n00:26:57.060 --> 00:27:00.230\nthe backup solutions are actually free,\nmost of them.\n\n578\n00:27:00.230 --> 00:27:03.800\nSo what you're paying for\nis bandwidth and storage, right?\n\n579\n00:27:03.800 --> 00:27:04.880\nThe more backups you store,\n\n580\n00:27:04.880 --> 00:27:08.130\nthe more storage you have to pay and\nthen the bandwidth, right?\n\n581\n00:27:08.130 --> 00:27:11.400\nMicrosoft doesn't normally charge for\ndata going into Azure, but they charge for\n\n582\n00:27:11.400 --> 00:27:12.310\ngetting it back out.\n\n583\n00:27:12.310 --> 00:27:14.450\nSo when you go to do a restore,\nthere's gonna be a charge.\n\n584\n00:27:14.450 --> 00:27:17.760\nNow I've never encountered a CIO or\n\n585\n00:27:17.760 --> 00:27:21.905\nIT director who batted an eye at\npaying money during a restore, right?\n\n586\n00:27:21.905 --> 00:27:24.990\nBecause that's when they'll approve\nany budget item when it's a restore.\n\n587\n00:27:24.990 --> 00:27:26.960\nBut you do wanna track the storage and\n\n588\n00:27:26.960 --> 00:27:29.400\nknow that this is gonna\ncost you money each month.\n\n589\n00:27:29.400 --> 00:27:33.330\nJust like those physical tapes you keep\nat a tape library, each tape costs money.\n\n590\n00:27:33.330 --> 00:27:36.410\nStorage up in Azure costs money too,\nso just be aware of that and\n\n591\n00:27:36.410 --> 00:27:37.630\nfactor it into your budget.\n\n592\n00:27:37.630 --> 00:27:38.230\n>> Excellent stuff.\n\n593\n00:27:38.230 --> 00:27:41.470\nWell Don, thank you for joining us\ntoday and explaining these concepts and\n\n594\n00:27:41.470 --> 00:27:45.520\ntheories to us and walking through some of\nthat [INAUDIBLE] with that Azure Backup.\n\n595\n00:27:45.520 --> 00:27:48.645\nAnd thank you guys for joining us today\nas well, we're gonna go ahead and\n\n596\n00:27:48.645 --> 00:27:49.628\nsign off for ITProTV.\n\n597\n00:27:49.628 --> 00:27:51.170\nI've been your host Daniel Lowrie.\n\n598\n00:27:51.170 --> 00:27:51.900\n>> And I'm Don Pezet.\n\n599\n00:27:51.900 --> 00:27:54.088\n>> And we'll see you next time.\n\n600\n00:27:54.088 --> 00:28:01.680\n[MUSIC]\n\n",
          "vimeoId": "152756389"
        }
      ],
      "title": "Azure Virtual Machine"
    }
  ],
  "url": "azure-virtual-machine",
  "vLab": false
}
