{
  "description": "September 24, 2016 is the last day for this exam. CCNA Overview The Cisco Certified Network Associate (CCNA) is the most well known Cisco certification path. It takes the general networking theory from the CCENT certification and applies it in real world scenarios. It moves beyond configuring individual devices into more complex territory often requiring the configuration of numerous devices to create a robust and optimized network. While studying for this certification, you will revisit the routing and switching topics from the CCENT in more depth as you learn about and implement the advanced features of each technology.",
  "descriptionMD": "",
  "length": "71087",
  "name": "CCNA Routing and Switching",
  "practiceExam": true,
  "subtitle": "Cisco Certified Network Associate",
  "tagUrl": "legacy",
  "topics": [
    {
      "episodes": [
        {
          "description": "CCNA Overview The Cisco Certified Network Associate (CCNA) is the most well known Cisco certification path. It takes the general networking theory from the CCENT certification and applies it in real world scenarios. It moves beyond configuring individual devices into more complex territory often requiring the configuration of numerous devices to create a robust and optimized network. While studying for this certification, you will revisit the routing and switching topics from the CCENT in more depth as you learn about and implement the advanced features of each technology.",
          "length": "567",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/ccna-0-0-overview-112514.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/ccna-0-0-overview-112514-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/ccna-0-0-overview-112514-sm.jpg",
          "title": "Overview of CCNA Routing and Switching",
          "transcript": "1\n00:00:00,000 --> 00:00:07,311\n[MUSIC]\n\n2\n00:00:07,311 --> 00:00:10,622\nThe Cisco Certified Network Associate,\nor CCNA,\n\n3\n00:00:10,622 --> 00:00:15,520\nis one of the most well-known\ncertifications in IT networking.\n\n4\n00:00:15,520 --> 00:00:20,060\nIt's designed to demonstrate that you\nhave a intermediate level of knowledge\n\n5\n00:00:20,060 --> 00:00:23,680\nwith Cisco equipment, particularly\ntheir routers, and their switches.\n\n6\n00:00:23,680 --> 00:00:27,550\nNow there are multiple versions\nof the CCNA, and for this\n\n7\n00:00:27,550 --> 00:00:32,400\nparticular ITProTV show, we're talking\nabout the CCNA routing and switching.\n\n8\n00:00:32,400 --> 00:00:34,030\nFocus is on routers and switches.\n\n9\n00:00:34,030 --> 00:00:37,880\nThere's also the CCNA security,\nwhich focuses on the ASA firewalls,\n\n10\n00:00:37,880 --> 00:00:41,670\nand several other variations that focus on\nother things, like wireless, and voice,\n\n11\n00:00:41,670 --> 00:00:43,770\nservice provider equipment and so on.\n\n12\n00:00:43,770 --> 00:00:45,180\nBut the CCNA routing and\n\n13\n00:00:45,180 --> 00:00:49,880\nswitching, that's the one most\npeople think of when they say, CCNA.\n\n14\n00:00:49,880 --> 00:00:53,620\nThe certification's designed to show\nthat you understand how to take Cisco\n\n15\n00:00:53,620 --> 00:00:58,330\nrouters and Cisco switches from\na factory default configuration, and\n\n16\n00:00:58,330 --> 00:01:00,950\nget them configured in\nsmall to medium networks.\n\n17\n00:01:00,950 --> 00:01:05,600\nWe're talking about networks that range\nin size from 10 to 100 routers or\n\n18\n00:01:05,600 --> 00:01:07,440\n10 to 100 switches.\n\n19\n00:01:07,440 --> 00:01:12,040\nIn mixed environments, a headquarters and\nbranch offices, that type of situation.\n\n20\n00:01:12,040 --> 00:01:16,460\nAnd there are various technologies we need\nto configure that go beyond just a basic\n\n21\n00:01:16,460 --> 00:01:20,210\nrouter configuration like what you might\nhave in a small office or home office.\n\n22\n00:01:20,210 --> 00:01:25,000\nThere's also some advanced functionality\nthe routers and switches can do that move\n\n23\n00:01:25,000 --> 00:01:30,040\nbeyond basic functionality, and start to\nget our switches acting more like routers,\n\n24\n00:01:30,040 --> 00:01:33,700\nor our routers performing functions\nthat traditional routers don't even do.\n\n25\n00:01:33,700 --> 00:01:36,380\nSo, really interesting\nstuff that's out there.\n\n26\n00:01:36,380 --> 00:01:39,620\nCCNA is one of the more rewarding\ncertifications I find in that you\n\n27\n00:01:39,620 --> 00:01:41,560\njust learn a lot of cool\nstuff that you can do.\n\n28\n00:01:41,560 --> 00:01:44,670\nSo it's a good time, and\nit's a fun certification to get.\n\n29\n00:01:44,670 --> 00:01:47,430\nIt's one of the favorite ones\nthat I've gotten over the years.\n\n30\n00:01:47,430 --> 00:01:51,320\nNow, if you want to pursue this CCNA,\nthere's a few things we need to remember.\n\n31\n00:01:51,320 --> 00:01:55,910\nFirst off, it is expected that\nyou already have the CCENT.\n\n32\n00:01:55,910 --> 00:01:59,200\nThe Cisco Certified Entry\nNetwork Technician.\n\n33\n00:01:59,200 --> 00:02:02,080\nSo if you're just getting\nstarted with Cisco,\n\n34\n00:02:02,080 --> 00:02:05,510\nyou should probably jump over to\nthe CCENT show and start there.\n\n35\n00:02:05,510 --> 00:02:08,780\nThat's designed for people that have not\nworked with Cisco equipment before and\n\n36\n00:02:08,780 --> 00:02:10,540\nare just getting started.\n\n37\n00:02:10,540 --> 00:02:13,650\nBut if you've already got some experience\nwith Cisco equipment, if you've set up\n\n38\n00:02:13,650 --> 00:02:17,005\na few routers and switches,\nyou've already got that basic knowledge.\n\n39\n00:02:17,005 --> 00:02:20,270\nAnd you'll find that the CCENT\nmight be a little boring or\n\n40\n00:02:20,270 --> 00:02:22,830\nbeneath your knowledge level,\nbecause you've already done it.\n\n41\n00:02:22,830 --> 00:02:26,480\nAnd for you,\nyou can start right here in the CCNA.\n\n42\n00:02:26,480 --> 00:02:31,250\nJust understand that Cisco will assume\nyou have the knowledge of the CCENT.\n\n43\n00:02:31,250 --> 00:02:34,370\nSo I encourage you just to read over the\noutline for that exam, and just make sure\n\n44\n00:02:34,370 --> 00:02:38,250\nyou don't see anything in there that\njumps out at you as new or unexpected.\n\n45\n00:02:38,250 --> 00:02:41,585\nIf you see anything, maybe you just watch\nthose particular episodes of the CCENT.\n\n46\n00:02:42,730 --> 00:02:46,520\nSo, there are two different ways\nto get the CCNA routing and\n\n47\n00:02:46,520 --> 00:02:48,020\nswitching certification.\n\n48\n00:02:48,020 --> 00:02:51,890\nAnd it all comes down to whether\nyou have that CCENT or not.\n\n49\n00:02:51,890 --> 00:02:52,420\nAlright.\n\n50\n00:02:52,420 --> 00:02:53,780\nLet me show you what I mean.\n\n51\n00:02:53,780 --> 00:02:56,700\nHere's the Cisco webpage for\nthe CCNA routing and switching.\n\n52\n00:02:56,700 --> 00:02:58,580\nAnd you'll see it's\na mid-tier certification.\n\n53\n00:02:58,580 --> 00:03:02,240\nIt's above the CCENT, but\nnot at the professional level of a CCENP.\n\n54\n00:03:02,240 --> 00:03:07,770\nAnd for the exams,\nthere's two different exam scenarios.\n\n55\n00:03:07,770 --> 00:03:11,600\nIf you already have\nthe CCENT certification,\n\n56\n00:03:11,600 --> 00:03:13,690\nthat's this exam right here, the 100-101.\n\n57\n00:03:13,690 --> 00:03:18,820\nSo if you've completed that certification,\nthen you just need to do\n\n58\n00:03:18,820 --> 00:03:23,880\nthe 200-101 exam, or the ICND2 exam,\nand that will get you your CCNA.\n\n59\n00:03:24,980 --> 00:03:30,000\nIf you don't have your CCENT,\nthen you'll do the 200-120 exam.\n\n60\n00:03:30,000 --> 00:03:31,920\nThis guy right here.\n\n61\n00:03:31,920 --> 00:03:36,500\nAnd it's made up of questions\ndrawn from both exams,\n\n62\n00:03:36,500 --> 00:03:40,310\ndrawn from the 100-101 and the 200-101.\n\n63\n00:03:40,310 --> 00:03:44,140\nSo it's called a composite exam,\nit just combines them together.\n\n64\n00:03:45,180 --> 00:03:50,630\nNow, the composite exam is the same\ncost as adding these two together.\n\n65\n00:03:50,630 --> 00:03:53,690\nSo you don't save money by doing that,\nyou just save time.\n\n66\n00:03:53,690 --> 00:03:55,790\nThe exam, well, it takes time.\n\n67\n00:03:55,790 --> 00:03:58,020\nIt takes you going down to\nthe testing center and taking it.\n\n68\n00:03:58,020 --> 00:03:59,960\nSo, two exams versus one exam.\n\n69\n00:03:59,960 --> 00:04:01,830\nIt's just all about how\nmuch time you have.\n\n70\n00:04:01,830 --> 00:04:05,610\nPersonally, I encourage people\nto complete the CCENT first.\n\n71\n00:04:05,610 --> 00:04:09,220\nBut, while I do encourage people\nto do that, I didn't do it myself.\n\n72\n00:04:09,220 --> 00:04:12,640\nThe CCENT wasn't when I\ngot certified originally.\n\n73\n00:04:12,640 --> 00:04:15,690\nBut even today, I've never gone\nback to do it because, well,\n\n74\n00:04:15,690 --> 00:04:18,620\nonce you have the advanced\ncertifications you don't really need it.\n\n75\n00:04:18,620 --> 00:04:21,740\nBut it is great if you're getting\nstarted out because it gives you a nice\n\n76\n00:04:21,740 --> 00:04:23,620\neasy entry point into the certification.\n\n77\n00:04:24,850 --> 00:04:28,110\nNow the exam itself covers\na wide range of topics.\n\n78\n00:04:28,110 --> 00:04:31,400\nIt covers everything in the CCENT outline,\nand\n\n79\n00:04:31,400 --> 00:04:34,030\nthen it goes beyond that with\nthe advanced functionality.\n\n80\n00:04:34,030 --> 00:04:38,010\nAnd you're really just getting to larger\nnetworks in the CCNA side, and so\n\n81\n00:04:38,010 --> 00:04:41,500\nit's really working with\nthe same stuff from CCENT,\n\n82\n00:04:41,500 --> 00:04:43,820\njust making it a little more complex.\n\n83\n00:04:43,820 --> 00:04:44,860\nLet's look at the actual exam.\n\n84\n00:04:46,020 --> 00:04:52,150\nThe exam is between 50 and 60 questions,\nand it is only 75 minutes long.\n\n85\n00:04:52,150 --> 00:04:55,530\nNow that sounds like you get\nabout a minute per question,\n\n86\n00:04:55,530 --> 00:05:00,030\nwhich is enough for\na multiple choice question I suppose.\n\n87\n00:05:00,030 --> 00:05:02,600\nBut, you don't really have\na lot of time to dally.\n\n88\n00:05:02,600 --> 00:05:04,300\nYou need to know the right answer.\n\n89\n00:05:04,300 --> 00:05:06,690\nYou read the question, and you answer it.\n\n90\n00:05:06,690 --> 00:05:09,310\nYou don't sit there and think,\nwell let me see, is it like this?\n\n91\n00:05:09,310 --> 00:05:10,240\nIs it like that?\n\n92\n00:05:10,240 --> 00:05:13,865\nThey don't give you enough time to try and\nextrapolate an answer on your own.\n\n93\n00:05:13,865 --> 00:05:16,030\nYou gotta know it and move on.\n\n94\n00:05:16,030 --> 00:05:19,160\nThe other thing that makes it more\nchallenging is they're not just multiple\n\n95\n00:05:19,160 --> 00:05:20,000\nchoice questions.\n\n96\n00:05:20,000 --> 00:05:24,290\nYou'll see drag and drop questions,\nand you'll see stimulation questions.\n\n97\n00:05:24,290 --> 00:05:26,830\nOnes where they give you\na simulated set of routers or\n\n98\n00:05:26,830 --> 00:05:28,430\na stimulated set of switches.\n\n99\n00:05:28,430 --> 00:05:30,210\nAnd you have to troubleshoot or\n\n100\n00:05:30,210 --> 00:05:32,780\nconfigure some functionality\nthat they've described to you.\n\n101\n00:05:32,780 --> 00:05:34,740\nSo you've actually got to get in there and\ndo some work.\n\n102\n00:05:34,740 --> 00:05:36,700\nThose questions take some time.\n\n103\n00:05:36,700 --> 00:05:39,270\nAnd if you spend too long doing those,\n\n104\n00:05:39,270 --> 00:05:42,120\nyou might not be able to get to\nall the questions on the exam.\n\n105\n00:05:42,120 --> 00:05:46,310\nSo it is very important that you study,\nthat you practice, and\n\n106\n00:05:46,310 --> 00:05:48,450\nthat you're ready when you go\ninto that testing booth so\n\n107\n00:05:48,450 --> 00:05:50,169\nyou know the content\nthey're going to be asking.\n\n108\n00:05:51,670 --> 00:05:55,400\nThe exam is proctored through Pearson VUE,\nwhich is an international company.\n\n109\n00:05:55,400 --> 00:05:58,650\nThey have testing centers\nlocated all around the world and\n\n110\n00:05:58,650 --> 00:06:00,650\nmore than likely have one near you.\n\n111\n00:06:00,650 --> 00:06:04,080\nYou can find out by going to\nwww.pearsonvue.com/cisco.\n\n112\n00:06:04,080 --> 00:06:08,860\nThat'll take you to\ntheir page where you can\n\n113\n00:06:10,030 --> 00:06:13,970\ncheck for\na testing center that's nearest to you.\n\n114\n00:06:13,970 --> 00:06:17,230\nYou can register for the exam,\npay for it, go and take the exam.\n\n115\n00:06:17,230 --> 00:06:20,480\nAnd then when you pass,\nyou'll receive you'r CCNA certification.\n\n116\n00:06:20,480 --> 00:06:23,410\nNow the exam topics themselves,\n\n117\n00:06:23,410 --> 00:06:27,350\nI'll just scroll down here a little bit,\nare divided up into five areas.\n\n118\n00:06:27,350 --> 00:06:28,610\nWe start with switching.\n\n119\n00:06:28,610 --> 00:06:33,130\nThere's a lot of switching technologies\nthat didn't get addressed in\n\n120\n00:06:33,130 --> 00:06:34,380\nthe CCENT certification.\n\n121\n00:06:34,380 --> 00:06:38,770\nSo in CCENT, for example, we talked about\nspanning tree protocol a little bit.\n\n122\n00:06:38,770 --> 00:06:42,350\nAnd so we'll see more advanced\nspanning tree protocol here.\n\n123\n00:06:42,350 --> 00:06:44,480\nAs well as VLAN trunking protocol and\n\n124\n00:06:44,480 --> 00:06:48,310\nother technologies related to\nmore advanced functionality.\n\n125\n00:06:48,310 --> 00:06:51,480\nYou'll also get your first\nintroduction to layer three switching,\n\n126\n00:06:51,480 --> 00:06:53,510\nwhich are switches that act like routers.\n\n127\n00:06:53,510 --> 00:06:55,390\nAnd that's pretty neat stuff\ncuz we're seeing more and\n\n128\n00:06:55,390 --> 00:06:57,660\nmore of those out in the real world.\n\n129\n00:06:57,660 --> 00:06:59,070\nThen we go into routing.\n\n130\n00:06:59,070 --> 00:07:03,510\nAnd notice the routing and switching\ncombined makes up almost 50% of the exam.\n\n131\n00:07:03,510 --> 00:07:06,880\nSo about half of the exam is made\nup of practical configurations.\n\n132\n00:07:06,880 --> 00:07:09,660\nAnd on the routing side we start moving\ninto advanced routing protocols.\n\n133\n00:07:09,660 --> 00:07:14,770\nThings like EIGRP and OSPF, and\ngetting a chance to see how they work,\n\n134\n00:07:14,770 --> 00:07:16,890\nand how they optimize your network and\nmake decisions.\n\n135\n00:07:18,100 --> 00:07:19,530\nThen, we get into IP services.\n\n136\n00:07:19,530 --> 00:07:23,440\nNow, IP services makes up a smaller\nportion of the exam because, well,\n\n137\n00:07:23,440 --> 00:07:25,580\na lot of it was covered in CCENT.\n\n138\n00:07:25,580 --> 00:07:30,190\nBut the other IP services have kind\nof been shifted off to the CCNA\n\n139\n00:07:30,190 --> 00:07:33,620\nsecurity certification or\nwireless service provider.\n\n140\n00:07:33,620 --> 00:07:36,590\nSo they've kind of been moved over\nto those other certifications.\n\n141\n00:07:36,590 --> 00:07:39,350\nSo here it's more of a informational,\nyou know, making sure we\n\n142\n00:07:39,350 --> 00:07:42,280\nunderstand what are some of the different\nIP services that are available.\n\n143\n00:07:43,320 --> 00:07:44,380\nThen we got troubleshooting,\n\n144\n00:07:44,380 --> 00:07:47,750\nand make troubleshooting makes\nup one-third of the exam.\n\n145\n00:07:47,750 --> 00:07:51,890\nA big chunk of the exam\non just how to figure out\n\n146\n00:07:51,890 --> 00:07:55,890\nwhy something isn't working the way\nthat it should, and how to correct it.\n\n147\n00:07:55,890 --> 00:07:59,320\nAnd then we wrap it talking about wide\narea network, or WAN technologies.\n\n148\n00:07:59,320 --> 00:08:04,560\nWe get a chance to see things like frame\nrelay, get a little introduction on MPLS.\n\n149\n00:08:04,560 --> 00:08:07,180\nAnd a couple of the other\ntechnologies you might see out there\n\n150\n00:08:07,180 --> 00:08:08,780\nas you get connected to the Internet, or\n\n151\n00:08:08,780 --> 00:08:11,830\nat least get long distance connections\nbetween different locations.\n\n152\n00:08:11,830 --> 00:08:15,180\nSo, good information, definitely\nthings that we want to know, and\n\n153\n00:08:15,180 --> 00:08:19,655\nit's all gearing us up to be able\nto configure medium size network.\n\n154\n00:08:19,655 --> 00:08:24,500\nNetworks with a headquarters, the branch\noffices, with 10 to a 100 devices,\n\n155\n00:08:24,500 --> 00:08:28,520\nrouters and switches that are out there,\nand a pretty good size network.\n\n156\n00:08:28,520 --> 00:08:31,120\nSo, it's a great certification to get.\n\n157\n00:08:31,120 --> 00:08:34,050\nThis is normally the certification\nthat people target\n\n158\n00:08:34,050 --> 00:08:38,200\nwhen they're ready to go out there and\nget their first network administrator job.\n\n159\n00:08:38,200 --> 00:08:41,310\nPrior to this a lot of people\nwill have more generic type jobs,\n\n160\n00:08:41,310 --> 00:08:44,790\njobs where you're part system admin,\npart network admin.\n\n161\n00:08:44,790 --> 00:08:46,840\nBut once we start going all network,\n\n162\n00:08:46,840 --> 00:08:49,220\nCCNA is usually the first\nstep that gets us there.\n\n163\n00:08:49,220 --> 00:08:53,800\nSo it is a great certification, and\none that I really enjoyed myself.\n\n164\n00:08:53,800 --> 00:08:56,900\nWell if that sounds like something you\nwanna do, then you're in the right place.\n\n165\n00:08:56,900 --> 00:09:01,080\nStay tuned, we've got our CCNA\nepisodes coming up in just a moment.\n\n166\n00:09:01,080 --> 00:09:03,770\nIf, on the other hand,\nyou aren't in the right place,\n\n167\n00:09:03,770 --> 00:09:07,200\nif you wanna go check out the CCENT first,\ndefinitely do so.\n\n168\n00:09:07,200 --> 00:09:09,580\nIt's all part of your\nITProTV subscription, so\n\n169\n00:09:09,580 --> 00:09:12,380\njust jump right over there and\nwatch it, right?\n\n170\n00:09:12,380 --> 00:09:16,250\nSo for those of you that need to do that,\ngo ahead, no hard feelings there.\n\n171\n00:09:16,250 --> 00:09:19,160\nBut for those of you that are sticking\nwith me, well, stay tuned.\n\n172\n00:09:19,160 --> 00:09:21,436\nWe've got episodes coming up next.\n\n173\n00:09:21,436 --> 00:09:27,679\n[MUSIC]\n\n",
          "vimeoId": "112925840"
        }
      ],
      "title": "Overview of CCNA Routing and Switching (200-101)"
    },
    {
      "episodes": [
        {
          "description": "In this episode Ronnie and Don describe loop prevention on Cisco switches. They describe how Spanning Tree Protocol (IEEE 802.1d), Per VLAN Spanning Tree Protocol, Rapid Spanning Tree Protocol (IEEE 802.1w) operate and how it makes its decisions for loop prevention. They also demonstrate configuration of each protocol.\r\n",
          "length": "5730",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/001-Switching-Technologies.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/001-Switching-Technologies-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/001-Switching-Technologies-sm.jpg",
          "title": "Switching Technologies",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC].\n\n2\n00:00:15,382 --> 00:00:22,917\n[NOISE].\n\n3\n00:00:22,917 --> 00:00:33,853\n[MUSIC].\n\n4\n00:00:33,853 --> 00:00:37,070\nAll right, good morning, good afternoon,\nand good evening and welcome back.\n\n5\n00:00:37,070 --> 00:00:40,920\nTo another episode of ITProTV, I'm your\nhost Don Pezet today with Mr. Ronnie Wong!\n\n6\n00:00:40,920 --> 00:00:41,860\nHow's it going, Ronnie?\n\n7\n00:00:41,860 --> 00:00:44,320\n>> I am doing so well, it's amazing.\n\n8\n00:00:44,320 --> 00:00:47,482\nCuz I'm doing better than\nAlec Baldwin on MSNBC now.\n\n9\n00:00:47,482 --> 00:00:48,420\n[LAUGH].\n\n10\n00:00:48,420 --> 00:00:49,810\n>> [LAUGH].\n\n11\n00:00:49,810 --> 00:00:51,345\n>> Oh, he's not on anymore.\n\n12\n00:00:51,345 --> 00:00:52,240\n[LAUGH].\n>> I was about to say,\n\n13\n00:00:52,240 --> 00:00:53,835\nhe's gotta be on some channel.\n\n14\n00:00:53,835 --> 00:00:55,410\n[LAUGH] Is that where actors go to die?\n\n15\n00:00:55,410 --> 00:00:56,024\nThey end up on CSPAN.\n\n16\n00:00:56,024 --> 00:00:56,950\n[LAUGH].\n>> No, no, no,\n\n17\n00:00:56,950 --> 00:01:00,230\nyou don't remember that he thought\nhe actually could do news and\n\n18\n00:01:00,230 --> 00:01:01,350\nthen he apparently.\n\n19\n00:01:01,350 --> 00:01:02,350\n>> Did he really?\n>> Yes.\n\n20\n00:01:02,350 --> 00:01:03,960\nI apparently am behind on this one.\n\n21\n00:01:03,960 --> 00:01:08,705\n>> Apparently you can't\nwithout some type of slur.\n\n22\n00:01:08,705 --> 00:01:10,480\n[LAUGH] So, he is now fired.\n\n23\n00:01:10,480 --> 00:01:11,420\nSuspended, suspended.\n\n24\n00:01:11,420 --> 00:01:12,520\n>> On a paid leave of absence?\n\n25\n00:01:12,520 --> 00:01:13,910\n>> Yes, paid leave of absence.\n\n26\n00:01:13,910 --> 00:01:16,200\n>> Sadly, probably still higher\ncompensated than we are.\n\n27\n00:01:16,200 --> 00:01:16,770\n>> Exactly.\n\n28\n00:01:18,070 --> 00:01:19,610\n>> Alright, well.\n\n29\n00:01:19,610 --> 00:01:22,760\n>> Unfortunately, we don't have\nan Alec Baldwin level of entertainment for\n\n30\n00:01:22,760 --> 00:01:25,930\nyou today, but we do have something close,\nbecause we are launching,\n\n31\n00:01:25,930 --> 00:01:32,370\nthis is our first CCNA episode,\nthe certified Cisco network associate.\n\n32\n00:01:32,370 --> 00:01:33,790\nIf I can get my terms right.\n\n33\n00:01:33,790 --> 00:01:34,330\n>> [LAUGH].\n>> So\n\n34\n00:01:34,330 --> 00:01:38,780\nthis is our first episode preparing for\nthe 200-101 ICND2 exam.\n\n35\n00:01:38,780 --> 00:01:42,820\nWe had a little debate about that\nbefore the show the other day.\n\n36\n00:01:42,820 --> 00:01:45,220\n>> Yeah. [LAUGH]. >> They are actually\ncalling it the ICND2 exam now.\n\n37\n00:01:45,220 --> 00:01:48,830\nSo that's what we're going to be starting\nwith today, we're going to be jumping in.\n\n38\n00:01:48,830 --> 00:01:54,020\nMost of you have already watched\nthe CCENT episodes, that whole series.\n\n39\n00:01:54,020 --> 00:01:58,430\nand now we are going to go back and start\nto rehash some of the stuff we covered in\n\n40\n00:01:58,430 --> 00:02:00,720\nthe CCENT show and go more in depth.\n\n41\n00:02:00,720 --> 00:02:03,910\n>> Yeah.\nThe idea now is, we are going to take some\n\n42\n00:02:03,910 --> 00:02:07,310\nof the basic concepts in terms\nof just configuring a router and\n\n43\n00:02:07,310 --> 00:02:09,140\na switch to make it work.\n\n44\n00:02:09,140 --> 00:02:11,500\nWe're not going to be talking about\noptimizing it a little bit better.\n\n45\n00:02:11,500 --> 00:02:14,300\nWe're going to be talking about what\nhappens when we start adding in more\n\n46\n00:02:14,300 --> 00:02:17,240\ndevices Into the network itself and\n\n47\n00:02:17,240 --> 00:02:19,770\nthen we're gonna also have to take\na look at some of the problems\n\n48\n00:02:19,770 --> 00:02:22,910\nthat actually end up happening\nwhen that stuff starts to happen.\n\n49\n00:02:22,910 --> 00:02:25,850\nSo we'll be doing more\ntroubleshooting in this particular\n\n50\n00:02:25,850 --> 00:02:27,490\nseries of shows that we have.\n\n51\n00:02:27,490 --> 00:02:31,750\nWe'll be getting into some in\ndepth configurations here.\n\n52\n00:02:31,750 --> 00:02:35,540\nFor us and you'll see this,\nit's going to be a lot of fun.\n\n53\n00:02:35,540 --> 00:02:36,630\n>> Absolutely, yep.\n\n54\n00:02:36,630 --> 00:02:41,410\nSo for our show today, we're going\nto be focusing on switches, right?\n\n55\n00:02:41,410 --> 00:02:46,190\nNow the ICME 2 exam, it is\npredominantly a router exam, you know?\n\n56\n00:02:46,190 --> 00:02:49,210\nI know it's a CCNA routing and\nswitching but there's always so\n\n57\n00:02:49,210 --> 00:02:50,880\nmuch you can do it later to.\n\n58\n00:02:50,880 --> 00:02:52,760\nSo we got to a little bit.\n\n59\n00:02:52,760 --> 00:02:54,820\nIt's probably just gonna be this ep?\n\n60\n00:02:54,820 --> 00:02:56,610\nDo you think about two\nepisodes on this one?\n\n61\n00:02:56,610 --> 00:02:58,844\n>> Yeah maybe.\nIt depends on how much we get into in\n\n62\n00:02:58,844 --> 00:03:00,357\nterms of how much [CROSSTALK].\n\n63\n00:03:00,357 --> 00:03:02,293\n>> How much we start rambling.\n\n64\n00:03:02,293 --> 00:03:03,990\n>> [LAUGH] That's it, ramble.\n\n65\n00:03:03,990 --> 00:03:04,510\n>> So.\n\n66\n00:03:04,510 --> 00:03:05,040\n>> Yeah.\n\n67\n00:03:05,040 --> 00:03:05,560\n>> Nah, nah.\n\n68\n00:03:05,560 --> 00:03:07,020\nYou know we get carried\naway with technology.\n\n69\n00:03:07,020 --> 00:03:08,530\n>> That's right.\n\n70\n00:03:08,530 --> 00:03:10,130\n>> So yeah, so\nwe do have some good switching stuff.\n\n71\n00:03:10,130 --> 00:03:12,800\nWe'll attack it all here in\nthe first two episodes, definitely.\n\n72\n00:03:12,800 --> 00:03:15,330\nAnd then after that it's\nall routing from there.\n\n73\n00:03:15,330 --> 00:03:18,470\nSo one of the things Ronnie mentioned,\nI think is great.\n\n74\n00:03:18,470 --> 00:03:20,960\nWhich is that we're gonna talk about\n\n75\n00:03:20,960 --> 00:03:24,660\nsome of the problems that can arise\nas our network gets more complex.\n\n76\n00:03:24,660 --> 00:03:31,320\nIn the CCENT content you're really\nlooking at 1 router, 1 or 2 switches.\n\n77\n00:03:31,320 --> 00:03:33,120\nThere's not a whole lot of room for error.\n\n78\n00:03:33,120 --> 00:03:33,850\nRight?\n\n79\n00:03:33,850 --> 00:03:37,130\nBut now we're going to start looking at\nenvironments that have more switches or\n\n80\n00:03:37,130 --> 00:03:40,130\nmore routers and actually have\na decent bit of room for error.\n\n81\n00:03:40,130 --> 00:03:43,400\nA lot of places you can make mistakes and\nproblems can erupt.\n\n82\n00:03:43,400 --> 00:03:46,815\nAnd that's the very first thing\nthat we're going to start with.\n\n83\n00:03:46,815 --> 00:03:51,820\nWe're going to start with yeah, every\nonce in a while when we think that we're\n\n84\n00:03:51,820 --> 00:03:55,610\nputting up multiple devices, we always\ncome up with this good idea, right?\n\n85\n00:03:55,610 --> 00:03:59,900\nHey, what if we could setup\nthe idea of redundancy here, okay?\n\n86\n00:03:59,900 --> 00:04:03,930\nSo, instead of just having one switch and\nrealizing the failure that one switch\n\n87\n00:04:03,930 --> 00:04:08,620\nwould bring us down, I say, what if we\nconnect multiple switches together and\n\n88\n00:04:08,620 --> 00:04:12,440\nwhen we do so we're like hey,\nthat's exactly what we needed to do and\n\n89\n00:04:12,440 --> 00:04:14,910\nall of a sudden other things start\nhappening on our network too.\n\n90\n00:04:14,910 --> 00:04:17,800\nSo we'll take a look at that,\nespecially about loop prevention day.\n\n91\n00:04:17,800 --> 00:04:21,490\nThat's really the top key for\nus right here.\n\n92\n00:04:21,490 --> 00:04:25,610\n>> Yeah, so for example,\nI've got a little drawing here and.\n\n93\n00:04:25,610 --> 00:04:28,020\n>> And basically I've got 3\nswitches thrown out here.\n\n94\n00:04:28,020 --> 00:04:30,040\nSwitch 1, switch 2, switch 3.\n\n95\n00:04:30,040 --> 00:04:32,400\nAnd, switch 1 is kind of like my core.\n\n96\n00:04:32,400 --> 00:04:32,925\nRight?\n>> Hm-mm.\n\n97\n00:04:32,925 --> 00:04:35,225\n>> Things are run back to switch 1.\n\n98\n00:04:35,225 --> 00:04:37,750\nAnd the way it's laid out right now,\n\n99\n00:04:37,750 --> 00:04:39,590\nif I have a cable failure, right?\n\n100\n00:04:39,590 --> 00:04:42,480\nSo, for example, if I've got a.\n\n101\n00:04:42,480 --> 00:04:47,275\n>> Let's say that I've got a PC over here,\nright, so here's a PC.\n\n102\n00:04:47,275 --> 00:04:49,310\n>> Oh, nice.\n>> Actually we'll make it a laptop.\n\n103\n00:04:49,310 --> 00:04:50,490\n>> Nice.\n>> So it's a laptop.\n\n104\n00:04:50,490 --> 00:04:51,030\n>> I like it.\n>> And\n\n105\n00:04:51,030 --> 00:04:53,320\nmaybe I got another laptop over here.\n\n106\n00:04:54,720 --> 00:04:56,040\nthis one's even better.\n\n107\n00:04:56,040 --> 00:04:57,010\n>> Yes.\n\n108\n00:04:57,010 --> 00:04:59,640\n>> Looking like kindergarten laptops.\n\n109\n00:04:59,640 --> 00:05:03,310\nSo anyhow I've got a PC plugged\ninto this switch here and\n\n110\n00:05:03,310 --> 00:05:05,800\nI've got a PC plugged\ninto this switch here.\n\n111\n00:05:05,800 --> 00:05:09,300\nIf I have a failure, if for\nexample, this cable were to fail.\n\n112\n00:05:09,300 --> 00:05:12,270\nSomebody trips over it,\nthe cable breaks, whatever.\n\n113\n00:05:12,270 --> 00:05:16,540\nSwitch 3 becomes isolated and\nwhen that happens,\n\n114\n00:05:16,540 --> 00:05:20,860\nour first PC is no longer able\nto talk to the second PC right?\n\n115\n00:05:20,860 --> 00:05:22,550\nOur network is broken.\n\n116\n00:05:22,550 --> 00:05:27,370\nSo, you might say to yourself,\nwell wait a minute, if I've got 3 switches\n\n117\n00:05:27,370 --> 00:05:32,880\nwhy not just run a cable between switch 2\nand switch 3 to create a triangle right?\n\n118\n00:05:32,880 --> 00:05:36,730\nSo, I've got a circular path\nin between all my systems.\n\n119\n00:05:36,730 --> 00:05:39,010\nSo, let me just throw a line in here.\n\n120\n00:05:39,010 --> 00:05:41,310\nOops, not a green line.\n\n121\n00:05:41,310 --> 00:05:43,820\nLet me throw a network cable\nhere between my switches.\n\n122\n00:05:43,820 --> 00:05:46,220\nSo, it'd be pretty easy for\nus to get a cable and\n\n123\n00:05:46,220 --> 00:05:48,700\njust kind of run it between\nthe switches like this.\n\n124\n00:05:48,700 --> 00:05:51,410\nAnd you make it a crossover cable.\n\n125\n00:05:51,410 --> 00:05:54,660\nBecause if you switch the switch\nit's got to be crossover.\n\n126\n00:05:54,660 --> 00:05:56,630\nAnd when we get that fired in there,\n\n127\n00:05:56,630 --> 00:06:01,900\nif I can get it all the way in\nthe background, once we get in there.\n\n128\n00:06:01,900 --> 00:06:06,190\nNow, if one link fails,\nI can just go the other way around.\n\n129\n00:06:06,190 --> 00:06:11,350\nSo if this link fails right here\nMy PC can just go like that, right?\n\n130\n00:06:11,350 --> 00:06:12,120\nEverything's great.\n\n131\n00:06:12,120 --> 00:06:13,364\n>> Right, yeah.\n\n132\n00:06:13,364 --> 00:06:15,520\n>> Well, in theory yes.\n\n133\n00:06:15,520 --> 00:06:16,540\nAll right.\n\n134\n00:06:16,540 --> 00:06:21,020\nBut there's a slight problem with this\ntopology when the network is helping.\n\n135\n00:06:21,020 --> 00:06:21,820\n>> Yeah.\n\n136\n00:06:21,820 --> 00:06:25,420\nWhen we start having\nmultiple links like this\n\n137\n00:06:25,420 --> 00:06:29,780\nwe can end up in really one of 3\ndifferent problems that end up happening,\n\n138\n00:06:29,780 --> 00:06:33,200\nwhen we set up the idea of switches and\nwhat we call a redundant apology.\n\n139\n00:06:33,200 --> 00:06:37,510\nAnd the first thing is,\nwe need to be able to prevent loops.\n\n140\n00:06:37,510 --> 00:06:41,390\nBut the other thing is we do have\n3 problems that end up happening.\n\n141\n00:06:41,390 --> 00:06:42,960\nUsually when we talk about it,\n\n142\n00:06:42,960 --> 00:06:46,560\nwe talk about the idea of broadcast\nstorms, we talk about the idea here of\n\n143\n00:06:46,560 --> 00:06:50,030\nsending multiple copies of the same\nframe across the network, and\n\n144\n00:06:50,030 --> 00:06:53,460\nwe also talk about the idea of MAC\naddress table instabilities as well.\n\n145\n00:06:53,460 --> 00:06:56,930\nAnd so all 3 of those are big\nproblems that can happen.\n\n146\n00:06:56,930 --> 00:06:59,590\nIf we're not paying attention okay.\n\n147\n00:06:59,590 --> 00:07:05,270\n>> So let's tackle the first one which is\na frame being delivered multiple times.\n\n148\n00:07:05,270 --> 00:07:05,850\nAlright.\n\n149\n00:07:05,850 --> 00:07:07,417\nSo, if switch, not switch,\n\n150\n00:07:07,417 --> 00:07:11,260\nif this PC down here at the bottom\nleft which doesn't really have a name.\n\n151\n00:07:11,260 --> 00:07:11,850\nLet's give it a name.\n\n152\n00:07:11,850 --> 00:07:14,670\nSo this is gonna be PCA down here.\n\n153\n00:07:14,670 --> 00:07:19,910\nAnd, so I'll just stick that in there, and\nthen we'll have, maybe, PCB over here.\n\n154\n00:07:19,910 --> 00:07:24,350\nWe move through the alphabet\nuntil we get to PCP and\n\n155\n00:07:24,350 --> 00:07:27,630\nthen that's when the real fun starts,\nall right.\n\n156\n00:07:27,630 --> 00:07:28,190\nSo, anyhow,\n\n157\n00:07:28,190 --> 00:07:33,085\nif PCA is trying to talk to PCB, then,\nwhen it goes to communicate its got.\n\n158\n00:07:33,085 --> 00:07:35,230\n2 paths to get there, right.\n\n159\n00:07:35,230 --> 00:07:37,790\nAnd, a layer two frame,\nwhat are we going to do?\n\n160\n00:07:37,790 --> 00:07:40,480\nWhen we go and try and find that other\nmachine we're going to set up an ARP\n\n161\n00:07:40,480 --> 00:07:43,270\nbroadcast and say hey,\nwho's got the MAC address for this IP?\n\n162\n00:07:43,270 --> 00:07:46,870\nPCB is going to reply back.\n\n163\n00:07:46,870 --> 00:07:51,070\nAnd, you know, a broadcast,\nby nature, goes out every port.\n\n164\n00:07:51,070 --> 00:07:52,330\nThat's what it does.\n\n165\n00:07:52,330 --> 00:07:55,190\nSo when PCB goes to respond.\n\n166\n00:07:55,190 --> 00:07:56,252\nThat's not what I wanted.\n\n167\n00:07:56,252 --> 00:08:01,336\nGoes to respond back to these messages,\nit's gonna flood out every port.\n\n168\n00:08:01,336 --> 00:08:03,206\nWhich means it gonna go out this port.\n\n169\n00:08:03,206 --> 00:08:05,609\nAnd it's gonna go out this port.\n\n170\n00:08:05,609 --> 00:08:08,367\nAnd then switch one is gonna\nrepeat that out of every port,\n\n171\n00:08:08,367 --> 00:08:10,070\nit's gonna go out this way.\n\n172\n00:08:10,070 --> 00:08:16,610\nAnd at the end of the day, PC A is going\nto receive two copies of that response.\n\n173\n00:08:16,610 --> 00:08:18,550\nNow for\nour broadcast that's not a big deal.\n\n174\n00:08:19,620 --> 00:08:22,590\nBut for like a VPN connection.\n\n175\n00:08:22,590 --> 00:08:28,930\nIf this is IPsec or L2TP, they do,\nshoot, what do they call it?\n\n176\n00:08:28,930 --> 00:08:32,440\nIt's kind of fancy name, I can't remember.\n\n177\n00:08:32,440 --> 00:08:34,760\nBut anyhow, they do get packet protection.\n\n178\n00:08:34,760 --> 00:08:38,019\nThe idea is that somebody could\nintercept the packet, try and\n\n179\n00:08:38,019 --> 00:08:40,346\nmodify it, and retransmit it on a network.\n\n180\n00:08:40,346 --> 00:08:43,364\nAnd it creates like a delay and\nyou get a second copy of that packet.\n\n181\n00:08:43,364 --> 00:08:44,860\nThat was being sent along.\n\n182\n00:08:44,860 --> 00:08:49,370\nWell, if this is an IPsec session,\nthat's gonna set off an alarm and\n\n183\n00:08:49,370 --> 00:08:51,300\nif it happens enough it'll\ndrop the connection.\n\n184\n00:08:51,300 --> 00:08:56,110\nSo, it'll break some secure\ncommunications at a minimum though.\n\n185\n00:08:56,110 --> 00:08:57,488\nBest case scenario,\n\n186\n00:08:57,488 --> 00:09:02,090\nPC A is gonna throw away 50% of\nthe frames it receives as duplicates.\n\n187\n00:09:02,090 --> 00:09:05,440\nSo it's wasting time processing\nframes that it didn't need to.\n\n188\n00:09:05,440 --> 00:09:06,820\n>> Yep.\n\n189\n00:09:06,820 --> 00:09:09,610\nSo that idea of the duplication\nof the packets is one of the big\n\n190\n00:09:09,610 --> 00:09:10,470\nproblems that we have.\n\n191\n00:09:10,470 --> 00:09:13,541\nBut the other one like we said, is the\nidea of something like a broadcast storm\n\n192\n00:09:13,541 --> 00:09:15,667\nor mac address table and\n[INAUDIBLE] what do those two,\n\n193\n00:09:15,667 --> 00:09:18,924\nis there a particular order-\n>> Let's do mac address instability first\n\n194\n00:09:18,924 --> 00:09:21,585\ncuz its easier and\nthen mostly because my drawing for\n\n195\n00:09:21,585 --> 00:09:23,780\nbroadcast storms turns into a total mess.\n\n196\n00:09:23,780 --> 00:09:24,437\n>> Oh yeah [LAUGH]\n>> So\n\n197\n00:09:24,437 --> 00:09:25,910\nwe'll start with the neat stuff first.\n\n198\n00:09:26,960 --> 00:09:29,740\nEvery switch is tracking the mac address.\n\n199\n00:09:29,740 --> 00:09:32,600\nWhat port a mac address is on.\n\n200\n00:09:32,600 --> 00:09:36,350\nSo let's just for a moment pretend\nthat this cable is not here.\n\n201\n00:09:37,660 --> 00:09:40,499\nWell, PC B, when it communicates out,\n\n202\n00:09:40,499 --> 00:09:43,848\nswitch 3 is gonna remember\nwhat port it's on.\n\n203\n00:09:43,848 --> 00:09:47,544\nBut when it communicates\nto the rest of the network,\n\n204\n00:09:47,544 --> 00:09:51,243\nswitch 1 is gonna remember\nthat it's on Fa0/2.\n\n205\n00:09:51,243 --> 00:09:57,260\nAnd then as it communicates across,\nswitch 2 will remember that it's on Fa0/2.\n\n206\n00:09:57,260 --> 00:10:04,499\nSo when PC A goes to talk to PC B,\nswitch 2 will know to send it out Fa0/2,\n\n207\n00:10:04,499 --> 00:10:09,360\nand switch 1 will know to send it out\nit's Fa0/2 to get to the right switch.\n\n208\n00:10:09,360 --> 00:10:10,613\nThey have that Mac address table.\n\n209\n00:10:10,613 --> 00:10:15,140\nBut if that cable is there,\n\n210\n00:10:16,340 --> 00:10:19,760\nnow we start to see something\nreally interesting.\n\n211\n00:10:19,760 --> 00:10:26,310\nEvery time PC B talks,\none message would be sent this way and\n\n212\n00:10:26,310 --> 00:10:31,540\nthen a little bit behind it,\nthe message sent this way would arrive.\n\n213\n00:10:31,540 --> 00:10:36,130\nSo switch 2 is gonna see PC B on two\ndifferent ports, port 1 and port 2.\n\n214\n00:10:36,130 --> 00:10:38,150\nAnd it's gonna go with\nthe most recent one,\n\n215\n00:10:38,150 --> 00:10:40,840\ncuz it assumes you unplugged the machine,\nplugged it in somewhere else.\n\n216\n00:10:40,840 --> 00:10:44,280\nSo every time a frame\ncomes along in Fa0/1,\n\n217\n00:10:44,280 --> 00:10:47,960\nthe MAC address gets updated to reflect\nthat, and then the frame comes right\n\n218\n00:10:47,960 --> 00:10:52,270\nbehind it on Fa0/2, the MAC address\ntable has to overwrite and change.\n\n219\n00:10:52,270 --> 00:10:55,610\nThe MAC address table's now\nconstantly being updated\n\n220\n00:10:55,610 --> 00:10:57,830\nwhich creates a performance\nburden on the switch.\n\n221\n00:10:57,830 --> 00:11:02,300\n>> Yep, when that switch has to\nconstantly adjust that MAC address table,\n\n222\n00:11:02,300 --> 00:11:04,860\neverything calls something\non the Cisco network.\n\n223\n00:11:04,860 --> 00:11:07,210\nSo somewhere we've got\nto pay the price for it.\n\n224\n00:11:07,210 --> 00:11:10,440\nAnd again, that's a big problem\nin this particular typology.\n\n225\n00:11:10,440 --> 00:11:12,920\nWhich leads us to the last big problem\n>> [LAUGH]\n\n226\n00:11:12,920 --> 00:11:14,690\n>> Which is the really big one.\n\n227\n00:11:14,690 --> 00:11:19,690\n>> So the first two problems,\nthose cause some quirky behavior,\n\n228\n00:11:19,690 --> 00:11:21,650\nmaybe some slow performance.\n\n229\n00:11:21,650 --> 00:11:25,330\nBut the bulk of the functionality\non your system is still gonna work.\n\n230\n00:11:25,330 --> 00:11:27,730\nBut this last one is the one\nthat'll actually break things.\n\n231\n00:11:27,730 --> 00:11:29,150\n>> Yeah.\n\n232\n00:11:29,150 --> 00:11:33,500\n>> If PC B sends out a broadcast,\nwhat's gonna happen?\n\n233\n00:11:33,500 --> 00:11:38,320\nThe broadcast is gonna be sent out,\nevery port, unswitch 3,\n\n234\n00:11:38,320 --> 00:11:43,240\nlet me use two different colors here, so\nthe broadcast is gonna be sent like this.\n\n235\n00:11:43,240 --> 00:11:47,650\nWell, switch 1 is gonna perpetuate\nthe broadcast, and switch 2.\n\n236\n00:11:47,650 --> 00:11:51,789\nSo it's gonna continue to send\nthe broadcast out like this.\n\n237\n00:11:51,789 --> 00:11:57,460\nWell, now switch 1 receives\nthe broadcast and it forwards it along.\n\n238\n00:11:57,460 --> 00:12:00,960\nAnd then you see what happens here,\n\n239\n00:12:00,960 --> 00:12:05,950\nit just continues on over and\nover and over again.\n\n240\n00:12:05,950 --> 00:12:08,598\nThe same thing is gonna happen\nwith this green broadcast.\n\n241\n00:12:08,598 --> 00:12:12,530\nBecause it's gonna get sent out down here\nto the PC, but it's also gonna get sent\n\n242\n00:12:12,530 --> 00:12:18,540\nback around over and over, and over,\nand over again, just like this.\n\n243\n00:12:18,540 --> 00:12:23,010\nIt's gonna continue repeating over and\nover, and over again forever.\n\n244\n00:12:23,010 --> 00:12:23,940\nIt never stops.\n\n245\n00:12:23,940 --> 00:12:28,810\nIn layer three packets, when we go through\nrouters, we have a little value it's\n\n246\n00:12:28,810 --> 00:12:32,270\ncalled a time to live value, and\nwith every router you pass through,\n\n247\n00:12:32,270 --> 00:12:35,190\nit decrements by one, and\nif you get stuck in a loop like this,\n\n248\n00:12:35,190 --> 00:12:38,450\neventually the time lived of each\nwill equal zero and it gets removed.\n\n249\n00:12:38,450 --> 00:12:42,630\nBut in layer two, in a layer two frame,\nthere is no time to live.\n\n250\n00:12:42,630 --> 00:12:44,500\n>> Yep.\n>> These frames will circle\n\n251\n00:12:44,500 --> 00:12:45,790\naround forever.\n\n252\n00:12:45,790 --> 00:12:48,475\nAnd this is just one broadcast.\n\n253\n00:12:48,475 --> 00:12:51,630\n>> [LAUGH] And multiple devices\nbroadcast all at the same time.\n\n254\n00:12:51,630 --> 00:12:54,930\n>> Yeah, so you know PC A,\nPC B I might have 100 other machines,\n\n255\n00:12:54,930 --> 00:12:56,600\nthey all start to generate broadcasts.\n\n256\n00:12:56,600 --> 00:12:59,990\nAs more and\nmore broadcasts are generated, more and\n\n257\n00:12:59,990 --> 00:13:04,050\nmore frames start looping around in this\nnetwork and it gets worse and worse, and\n\n258\n00:13:04,050 --> 00:13:07,590\nworse, the network starts getting\nslower and slower, and slower.\n\n259\n00:13:07,590 --> 00:13:10,050\nUntil the network completely halts.\n\n260\n00:13:10,050 --> 00:13:16,180\nAnd the only way to fix it is to\neither find the loop and remove it or\n\n261\n00:13:16,180 --> 00:13:20,230\npower off all of your switches and\npower them on but\n\n262\n00:13:20,230 --> 00:13:23,700\nthen it's just a matter of time\nbefore the problem comes back again.\n\n263\n00:13:23,700 --> 00:13:27,580\nSo really the only solution is to\ngo find the loop and remove it.\n\n264\n00:13:27,580 --> 00:13:29,930\nOtherwise, your network's\ngonna slow to a crawl.\n\n265\n00:13:29,930 --> 00:13:33,430\nOn a small network,\nit could take hours or days.\n\n266\n00:13:33,430 --> 00:13:36,890\nOn a big network, it usually only takes\nminutes for the network to crash.\n\n267\n00:13:37,990 --> 00:13:40,940\n>> Now the nice thing about this is\nthat even though those are problems that\n\n268\n00:13:40,940 --> 00:13:42,980\nexist in a redundant topology for us.\n\n269\n00:13:44,090 --> 00:13:46,460\nWe do have a way to be\nable to take care of this.\n\n270\n00:13:46,460 --> 00:13:51,330\nAnd the good thing is, by default,\nCisco switches actually do this for\n\n271\n00:13:51,330 --> 00:13:56,628\nus by implementing something that\nwe call spanning tree protocol.\n\n272\n00:13:56,628 --> 00:14:00,475\nSpanning tree protocol for\nus is about preventing\n\n273\n00:14:02,535 --> 00:14:04,775\nloops inside the switching network.\n\n274\n00:14:04,775 --> 00:14:07,902\nKind of preventing loops.\n\n275\n00:14:07,902 --> 00:14:11,008\n>> We get so\nused to calling it spanning tree protocol,\n\n276\n00:14:11,008 --> 00:14:15,400\nit's a standard protocol that's out there,\nany vendor can support it.\n\n277\n00:14:15,400 --> 00:14:20,903\nIt's 802.1d, or\nIEEE 802.1d loop prevention.\n\n278\n00:14:20,903 --> 00:14:25,695\nAnd so that we almost always say loop\nprevention, but it's a protocol that\n\n279\n00:14:25,695 --> 00:14:30,408\nruns in the background, and it hunts\ndown these loops and it stops them for\n\n280\n00:14:30,408 --> 00:14:32,862\nus so we don't have to worry about it.\n\n281\n00:14:32,862 --> 00:14:35,625\nSo let me write that here on the side so\nwe can kinda remember the name of it.\n\n282\n00:14:35,625 --> 00:14:42,502\nSo it's IEEE 802.1D Loop Prevention and\n\n283\n00:14:42,502 --> 00:14:48,849\nthe actual protocol\nitself is called STP or\n\n284\n00:14:48,849 --> 00:14:53,310\nSpanning Tree Protocol.\n\n285\n00:14:53,310 --> 00:14:55,070\nSo that's the technology.\n\n286\n00:14:55,070 --> 00:14:59,040\nIt's turned on by default\non Cisco routers.\n\n287\n00:14:59,040 --> 00:15:01,150\nSo on Cisco switches.\n\n288\n00:15:01,150 --> 00:15:03,050\nThis is a layer two technology.\n\n289\n00:15:03,050 --> 00:15:07,160\nSo, on a Cisco switch, if these three guys\nright here were Cisco switches, and there\n\n290\n00:15:07,160 --> 00:15:12,490\nwas a loop detected, it would actually fix\nit and not allow the loop to be created.\n\n291\n00:15:12,490 --> 00:15:16,550\nBut if these were those cheapie, like\n$50 switches you buy down at Best Buy,\n\n292\n00:15:16,550 --> 00:15:18,200\nthey don't have spanning tree protocol,\nand\n\n293\n00:15:18,200 --> 00:15:23,630\nif you ran those like this it would create\na loop and the network would die out.\n\n294\n00:15:23,630 --> 00:15:27,140\n>> So we've got to take a look\nat the idea of the switches and\n\n295\n00:15:27,140 --> 00:15:29,320\nhow spanning tree actually works now too.\n\n296\n00:15:29,320 --> 00:15:33,995\nEven though it's turned on by default,\nI don't generally have to worry about it.\n\n297\n00:15:33,995 --> 00:15:39,045\nThey do expect you to know the background\nof spanning tree, how it does,\n\n298\n00:15:39,045 --> 00:15:43,055\nwhat it does, and it does,\nagain, have some cost to it.\n\n299\n00:15:43,055 --> 00:15:47,285\nSo we'll actually talk about the different\naspects of it, how long it takes.\n\n300\n00:15:47,285 --> 00:15:50,815\nWe'll take a look at how it actually\ncomes to the decisions that it comes to.\n\n301\n00:15:50,815 --> 00:15:52,495\nSo we're about to dive\ninto some deep stuff here,\n\n302\n00:15:52,495 --> 00:15:54,670\nthat a lot of people can get confused by.\n\n303\n00:15:54,670 --> 00:15:57,540\n>> So let's go real high level first.\n\n304\n00:15:57,540 --> 00:16:01,304\nSpanning tree protocol, it's just a way\nfor the switches to talk each other.\n\n305\n00:16:01,304 --> 00:16:04,670\nSo when you have two switches,\nlike switch 1 and switch 2,\n\n306\n00:16:04,670 --> 00:16:09,032\nthat are running spanning tree protocol,\nwhen you Plug them into each other.\n\n307\n00:16:09,032 --> 00:16:13,471\nWhen you run that uplink they see each\nother and more importantly they know\n\n308\n00:16:13,471 --> 00:16:18,430\nthat it's a switch on the other end and\nthey know there's a possibility of a loop.\n\n309\n00:16:18,430 --> 00:16:22,770\nAnd when we bring this third switch\nin they're able to talk to it and\n\n310\n00:16:22,770 --> 00:16:27,060\nthey can say, all right look,\nwhen I look I see that there's a loop.\n\n311\n00:16:27,060 --> 00:16:31,190\nSo, they're able to detect it because\nthey're aware of the other switches.\n\n312\n00:16:31,190 --> 00:16:35,540\nThen when they detect it,\nthe switches talk amongst each other, and\n\n313\n00:16:35,540 --> 00:16:40,590\nthey decide, they basically vote,\non a port to turn off.\n\n314\n00:16:40,590 --> 00:16:44,150\nAnd so they'll find a port and\nthey'll say, for\n\n315\n00:16:44,150 --> 00:16:46,210\nexample, maybe it's this one here.\n\n316\n00:16:46,210 --> 00:16:48,670\nAnd they'll say let's turn that port off.\n\n317\n00:16:48,670 --> 00:16:52,350\nAnd when they turn that port off,\nthat stops the loop.\n\n318\n00:16:52,350 --> 00:16:54,140\nIt blocks the loop.\n\n319\n00:16:54,140 --> 00:16:57,090\nBut the cool thing is if\nthere's ever a real failure,\n\n320\n00:16:57,090 --> 00:17:00,060\nlike let's say this link right\nhere were to really fail.\n\n321\n00:17:00,060 --> 00:17:03,160\nWhen it fails,\nspanning tree protocol will see that, and\n\n322\n00:17:03,160 --> 00:17:07,160\nit'll bring this other port back on\nline because the loop is now gone.\n\n323\n00:17:07,160 --> 00:17:10,180\nIt brings it up and off you go.\n\n324\n00:17:10,180 --> 00:17:12,990\nSo that's at a high level what its doing.\n\n325\n00:17:12,990 --> 00:17:16,270\nSo it does provide us redundancy and\n\n326\n00:17:16,270 --> 00:17:20,308\nto a degree failover, but\nit's not high availability.\n\n327\n00:17:20,308 --> 00:17:22,190\nRonnie mentioned time.\n\n328\n00:17:22,190 --> 00:17:26,320\nSo the way this whole mechanism\nworks is on a series of timers and\n\n329\n00:17:26,320 --> 00:17:28,820\nit generally takes spanning tree protocol\n\n330\n00:17:30,330 --> 00:17:34,900\nabout 30 seconds to detect that a loop\nis gone and to correct for it, and\n\n331\n00:17:34,900 --> 00:17:38,850\nit can take as long as 90 seconds in\nsome environments to do the failover.\n\n332\n00:17:38,850 --> 00:17:41,280\nSo if there's a failure on the network,\n\n333\n00:17:41,280 --> 00:17:43,630\nit's not gonna be invisible\nto your end users.\n\n334\n00:17:43,630 --> 00:17:47,030\n30 seconds is long enough for\njust about any application to time out.\n\n335\n00:17:47,030 --> 00:17:50,890\nSo they're going to have a brief outage.\n\n336\n00:17:50,890 --> 00:17:55,540\nBut the problem will fix itself pretty\nshortly, within say a minute and\n\n337\n00:17:55,540 --> 00:17:57,410\na half the other link will come back up.\n\n338\n00:17:57,410 --> 00:17:58,600\nNow your network is operational.\n\n339\n00:17:58,600 --> 00:18:01,392\nSo you get redundancy but\nnot high availability.\n\n340\n00:18:04,703 --> 00:18:10,097\nSo Ronnie, let's get into the basics and\nby the end of this episode,\n\n341\n00:18:10,097 --> 00:18:15,960\nwe're gonna learn about four different\ntypes of spanning tree protocol.\n\n342\n00:18:17,860 --> 00:18:19,390\nReally five.\n\n343\n00:18:19,390 --> 00:18:20,396\nDo we need to go to all five?\n\n344\n00:18:20,396 --> 00:18:24,030\n>> Rapid spanning tree,\nPer-VLAN span tree, and multiple.\n\n345\n00:18:25,330 --> 00:18:26,358\n>> Yeah, so we need to do all five.\n\n346\n00:18:26,358 --> 00:18:27,320\n>> [LAUGH]\n>> So\n\n347\n00:18:27,320 --> 00:18:30,270\nwe're gonna see five different\nvariations of spanning tree protocol.\n\n348\n00:18:31,690 --> 00:18:33,580\nIt sounds intimidating.\n\n349\n00:18:33,580 --> 00:18:37,390\nIt's a lot to get through, but really,\nall five of them work the same way.\n\n350\n00:18:37,390 --> 00:18:40,670\nThere's just little variations\non them that kind of adjust it.\n\n351\n00:18:40,670 --> 00:18:43,290\nSo let's start with the official standard,\n\n352\n00:18:43,290 --> 00:18:48,080\njust the IEEE 802.1D,\nthe basic form of spanning tree protocol.\n\n353\n00:18:49,130 --> 00:18:53,740\n>> We have multiple switches with\nspanning tree protocol turned on,\n\n354\n00:18:53,740 --> 00:18:56,000\nwe have what we call different\ninstances of spanning tree.\n\n355\n00:18:56,000 --> 00:18:59,510\nIn other words, how many times is\nspanning tree actually running\n\n356\n00:18:59,510 --> 00:19:01,770\nwhen you have all those switches together.\n\n357\n00:19:01,770 --> 00:19:05,620\nThe first one, the initial one for\nus is one instance of spanning tree\n\n358\n00:19:05,620 --> 00:19:08,530\nbetween all the switches\nthat we actually have.\n\n359\n00:19:08,530 --> 00:19:13,930\nNow when we begin here, Don talked about\nthis idea of what has to happen first.\n\n360\n00:19:15,090 --> 00:19:16,240\nWhen we go through it.\n\n361\n00:19:16,240 --> 00:19:20,740\nSo remember when Don talked about the idea\nof the switches having kind of an election\n\n362\n00:19:20,740 --> 00:19:21,770\nprocess.\n\n363\n00:19:21,770 --> 00:19:25,684\nOne of the very first things that has\nto happen is that we have to find,\n\n364\n00:19:25,684 --> 00:19:29,000\nthe technical terminology\nis the root bridge.\n\n365\n00:19:29,000 --> 00:19:32,850\nNow, why call it a root bridge\nwe're working with switches Don.\n\n366\n00:19:32,850 --> 00:19:35,020\n>> Yeah, this is all old technologies.\n\n367\n00:19:35,020 --> 00:19:38,390\nOur early switches,\nthe original the two port switches,\n\n368\n00:19:38,390 --> 00:19:39,490\nthey weren't switches back then.\n\n369\n00:19:39,490 --> 00:19:40,850\nThey were just bridges.\n\n370\n00:19:40,850 --> 00:19:44,800\nAnd these technology is very old,\nthey came back in the bridge days.\n\n371\n00:19:44,800 --> 00:19:47,050\nSo you'll see that terminology a lot.\n\n372\n00:19:47,050 --> 00:19:50,740\nOne of your switches will have to\nget elected as the head honcho,\n\n373\n00:19:50,740 --> 00:19:51,960\nthe big cheese.\n\n374\n00:19:51,960 --> 00:19:55,310\nAnd they call it the root bridge\nin spanning tree protocol.\n\n375\n00:19:55,310 --> 00:19:57,560\nContinuing with that bridge thing,\n\n376\n00:19:57,560 --> 00:19:59,620\nI mentioned how the switches\ntalk to each other.\n\n377\n00:19:59,620 --> 00:20:01,340\nThey gotta talk to each other.\n\n378\n00:20:01,340 --> 00:20:02,660\nThe key component for\n\n379\n00:20:02,660 --> 00:20:06,900\nthat is something called a BPDU,\na bridge protocol data unit.\n\n380\n00:20:06,900 --> 00:20:10,720\nLet me write that on my diagram so\nwe can remember that one.\n\n381\n00:20:10,720 --> 00:20:13,650\n>> The bridge protocol data\nunit is the first exchange\n\n382\n00:20:13,650 --> 00:20:17,870\nof information between the switches when\nthey actually start trying to sense.\n\n383\n00:20:17,870 --> 00:20:20,730\nWhether or\nnot there is a switch on the other side.\n\n384\n00:20:20,730 --> 00:20:25,490\nWhen one switch send a BPDU,\nthe other side sends one too.\n\n385\n00:20:25,490 --> 00:20:30,650\nNow, there are other devices that we may\nplug in that aren't gonna send any BPDUs,\n\n386\n00:20:30,650 --> 00:20:33,210\nwhich allows that switch to go,\nhey, that guy isn't a switch so\n\n387\n00:20:33,210 --> 00:20:35,170\nI'm not gonna have to worry about him so\nmuch.\n\n388\n00:20:35,170 --> 00:20:35,915\n>> Now, we do have to be careful,\n\n389\n00:20:35,915 --> 00:20:41,520\ncuz it switches that support spanning\ntree protocol that will send BPDU.\n\n390\n00:20:41,520 --> 00:20:44,840\nIf you buy a switch that doesn't\nsupport spanning tree protocol,\n\n391\n00:20:44,840 --> 00:20:49,600\nit's not gonna send BPDUs either which\nis gonna make it effectively invisible.\n\n392\n00:20:49,600 --> 00:20:52,500\nNow, that doesn't mean that\nit will still allow loops.\n\n393\n00:20:52,500 --> 00:20:55,040\nSpanning tree switch will\nstill protect from a loop.\n\n394\n00:20:55,040 --> 00:20:58,990\nAs long as you just have one spanning tree\nswitch and it's involved in the loop,\n\n395\n00:20:58,990 --> 00:21:00,720\nit can fix it.\n\n396\n00:21:00,720 --> 00:21:04,000\nBut, typically, you want all of\nyour switches to support it.\n\n397\n00:21:04,000 --> 00:21:05,600\nWhen these switches fire up.\n\n398\n00:21:05,600 --> 00:21:07,900\nWhen they get turned on\nin the very beginning,\n\n399\n00:21:07,900 --> 00:21:11,290\nthey start to send each other BPDUs.\n\n400\n00:21:11,290 --> 00:21:17,960\nThey see each other, and somebody has\nto get elected as the root bridge.\n\n401\n00:21:17,960 --> 00:21:23,494\nSo, behind us, and in hindsight I'm\ngonna unplug these, there we go.\n\n402\n00:21:23,494 --> 00:21:28,073\nSo what's gonna happen is when you first\nfire up one of these, [LAUGH] I've got\n\n403\n00:21:28,073 --> 00:21:33,022\nthree switches behind this here so I can\ndemonstrate the whole process to you guys.\n\n404\n00:21:33,022 --> 00:21:38,606\nSo when we first fire up a new switch or\nwhatever, it's gotta go through and\n\n405\n00:21:38,606 --> 00:21:45,170\ndo some detection and find the switches\nand look and kind of create the sypology.\n\n406\n00:21:45,170 --> 00:21:47,360\nSo what I'm doing is this diagram.\n\n407\n00:21:47,360 --> 00:21:48,710\nLet's go back to my diagram.\n\n408\n00:21:48,710 --> 00:21:50,460\nThis is what we actually have behind us.\n\n409\n00:21:50,460 --> 00:21:53,480\nWe've got switch one,\nswitch two and switch three.\n\n410\n00:21:53,480 --> 00:21:57,720\nWe've got cables run between them and\nI've labeled them the same way here.\n\n411\n00:21:57,720 --> 00:22:00,660\nOur switch one is a Cisco 3550.\n\n412\n00:22:00,660 --> 00:22:06,070\nOur switch two and switch three are Cisco\n3560s, so we've got a mixture of switches\n\n413\n00:22:06,070 --> 00:22:12,000\nhere and basically right now\nI've these two cables run.\n\n414\n00:22:12,000 --> 00:22:15,840\nI don't have this cable down here, the\ncable between switch two and switch three.\n\n415\n00:22:15,840 --> 00:22:22,550\nI'm leaving that one out while I\nconnect everything else in there.\n\n416\n00:22:22,550 --> 00:22:23,070\nTo create,\n\n417\n00:22:23,070 --> 00:22:26,640\nbasically what we've got here on the\ndiagram minus this cable on the bottom.\n\n418\n00:22:26,640 --> 00:22:31,020\nSo, I'm just gonna scratch this cable,\nI'm gonna try and scratch this cable out.\n\n419\n00:22:31,020 --> 00:22:31,980\nThere we go.\n\n420\n00:22:31,980 --> 00:22:34,069\nSo that's basically what I have\nsitting right behind me right now.\n\n421\n00:22:35,390 --> 00:22:40,360\nWhen I plugged these cables in, the\nswitches start to send BPDUs to each other\n\n422\n00:22:40,360 --> 00:22:42,700\nand there's two things they're doing.\n\n423\n00:22:42,700 --> 00:22:43,963\nOne, they're looking for a loop.\n\n424\n00:22:43,963 --> 00:22:51,510\nAnd two, they're trying to elect a route\nbridge, somebody to be in charge.\n\n425\n00:22:51,510 --> 00:22:54,080\nSo that's all happening automatically.\n\n426\n00:22:54,080 --> 00:22:56,200\nAnd when we plug those ports in,\n\n427\n00:22:56,200 --> 00:23:01,350\nthe switches assume by default\nthat there might be a loop.\n\n428\n00:23:02,580 --> 00:23:07,020\nAnd so when you plug a port in, you plug\na cable into a switch that's running\n\n429\n00:23:07,020 --> 00:23:11,500\nspanning tree,\nthe initial connection is not gonna work.\n\n430\n00:23:11,500 --> 00:23:14,430\nWhen you plug in,\nyou're not on the network right away.\n\n431\n00:23:14,430 --> 00:23:16,470\nIt has to go through a couple of phases.\n\n432\n00:23:17,510 --> 00:23:20,540\nAnd we'll see these phases kind\nof as we go through all this,\n\n433\n00:23:20,540 --> 00:23:22,050\nbut let's lay them out here.\n\n434\n00:23:22,050 --> 00:23:25,174\nSo we've got blocking,\n\n435\n00:23:25,174 --> 00:23:30,118\nlistening, learning, forwarding.\n\n436\n00:23:30,118 --> 00:23:34,960\nSo, a port that has nothing\nplugged into it, or\n\n437\n00:23:34,960 --> 00:23:38,320\na port that has a loop,\nis considered to be blocking.\n\n438\n00:23:39,470 --> 00:23:41,780\nNo traffic is allowed over the port.\n\n439\n00:23:41,780 --> 00:23:48,010\nBut when you first plug a cable in,\nit transitions into the listening phase.\n\n440\n00:23:48,010 --> 00:23:50,950\nThe switches are gonna listen and\nthey're listening out for BPDUs.\n\n441\n00:23:50,950 --> 00:23:53,830\nThey're saying,\ndid somebody just plug in a switch?\n\n442\n00:23:53,830 --> 00:23:56,547\nOr did they plug in a PC or\nrouter or whatever.\n\n443\n00:23:56,547 --> 00:24:02,108\nIf they see a BPDU, a bridge protocol data\nunit while they're in the listening phase,\n\n444\n00:24:02,108 --> 00:24:06,774\nit'll know it's a switch, but\nit's not allowing traffic to flow yet.\n\n445\n00:24:06,774 --> 00:24:10,686\nSo if a loop was created,\nit's already stopped the loop.\n\n446\n00:24:10,686 --> 00:24:16,830\nIf it's not a switch,\nthen it goes into the learning phase.\n\n447\n00:24:16,830 --> 00:24:21,140\nAnd it starts paying attention to\nwhat Mac address are on that port.\n\n448\n00:24:21,140 --> 00:24:22,610\nRight?\nThose need to go into the Mac\n\n449\n00:24:22,610 --> 00:24:25,820\naddress table to make it nice,\nand efficient, and so on.\n\n450\n00:24:25,820 --> 00:24:31,000\nAnd only once its completed that, does it\nactually move into the forwarding phase,\n\n451\n00:24:31,000 --> 00:24:34,820\nwhere it's now allowing traffic\nto flow across the connection.\n\n452\n00:24:34,820 --> 00:24:35,430\nAll right?\n\n453\n00:24:35,430 --> 00:24:39,610\nSo, in the first three phases,\nno traffic is allowed to flow.\n\n454\n00:24:40,800 --> 00:24:45,410\nThe listening and learning phases\nby default, are 15 seconds each.\n\n455\n00:24:45,410 --> 00:24:48,910\nAnd that means that you spend 30\nseconds in listening and learning.\n\n456\n00:24:48,910 --> 00:24:53,105\nWhen you first plug that cable in,\nyou can't talk for 30 seconds.\n\n457\n00:24:53,105 --> 00:24:55,659\n[CROSSTALK] Sorry.\n\n458\n00:24:55,659 --> 00:24:58,872\n>> Here's where Don was talking\nabout that time earlier here,\n\n459\n00:24:58,872 --> 00:25:03,530\nwhere it does take a little bit of time\nfor the switches to kind of settle down.\n\n460\n00:25:03,530 --> 00:25:06,350\nWhen we turn on a switch by default and\nwe plug things in,\n\n461\n00:25:06,350 --> 00:25:11,240\nit has to go through this on every single\nport that it has because it's assuming\n\n462\n00:25:11,240 --> 00:25:13,450\nthat, there could be\nanother switch attached.\n\n463\n00:25:13,450 --> 00:25:15,730\nAnd we've got to go\nthrough this to prevent,\n\n464\n00:25:15,730 --> 00:25:18,580\nthe ideas that loops happening for us.\n\n465\n00:25:18,580 --> 00:25:23,110\nSo, remember that these two phases for\nus really can take about 15 seconds each.\n\n466\n00:25:24,170 --> 00:25:25,810\nSometimes it can take up to 50 seconds,\n\n467\n00:25:25,810 --> 00:25:30,460\nthere’s what they call a maximum age\ntimer that’s also there as well.\n\n468\n00:25:30,460 --> 00:25:33,200\nSo, depending on the situation there,\nit could take up to 50 seconds but,\n\n469\n00:25:33,200 --> 00:25:35,920\ngenerally about 30 seconds is what\nwe'll end up seeing here too.\n\n470\n00:25:36,940 --> 00:25:40,290\n>> All right, so, I'm connecting\nyou to switch one real quick.\n\n471\n00:25:40,290 --> 00:25:41,500\nAnd, it's almost time for break, so\n\n472\n00:25:41,500 --> 00:25:43,990\nI just wanna do Due to\nthe quick interaction of it.\n\n473\n00:25:43,990 --> 00:25:45,758\nBut I'm logged in to switch 1, and\n\n474\n00:25:45,758 --> 00:25:49,160\nswitch 1 is the one that's at\nthe apex of my connection here.\n\n475\n00:25:49,160 --> 00:25:52,040\nSo, it's got connections to switch 2 and\nswitch 3.\n\n476\n00:25:52,040 --> 00:25:56,590\nAnd when those switches plugged in,\nwell these are Cisco switches so\n\n477\n00:25:56,590 --> 00:25:58,690\nthey run Cisco discovery protocols, CDP.\n\n478\n00:25:58,690 --> 00:26:05,330\nAnd if I do a show CDP, [LAUGH]\neventually I'll see those other switches.\n\n479\n00:26:05,330 --> 00:26:08,870\nIt may actually be turned off on them,\nbut I'll have to see.\n\n480\n00:26:08,870 --> 00:26:13,640\nIt's enabled on this one, but it may\nbe turned off on the other switches.\n\n481\n00:26:13,640 --> 00:26:19,810\nBut we should see those,\ncuz I do have those ports are up.\n\n482\n00:26:19,810 --> 00:26:23,500\nPorts 1 and 2 are up, so we should\nbe seeing the other switches here.\n\n483\n00:26:23,500 --> 00:26:27,200\nBut even if CEP doesn't see them,\nSpanning Tree will, right?\n\n484\n00:26:27,200 --> 00:26:28,640\nThe other switches\nare running Spanning Tree,\n\n485\n00:26:28,640 --> 00:26:31,690\nwe are too, so we should be getting BPDUs.\n\n486\n00:26:31,690 --> 00:26:38,640\nAnd if I do a show spanning-tree I can\ntake a look at that status, all right?\n\n487\n00:26:38,640 --> 00:26:43,410\nNow, on switch 1,\nport one runs to switch 2.\n\n488\n00:26:43,410 --> 00:26:44,320\nAnd so\n\n489\n00:26:44,320 --> 00:26:48,880\nI can see right here, that it is currently\nin the forwarding state, all right?\n\n490\n00:26:48,880 --> 00:26:52,130\nSo, it is forwarding traffic,\nallowing it to pass over the line.\n\n491\n00:26:52,130 --> 00:26:57,656\nAnd Fa0/2, that one is the connection to\nswitch 3, and it is in a forwarding state.\n\n492\n00:26:57,656 --> 00:27:01,387\nSo, it saw the other device\non the other end, and\n\n493\n00:27:01,387 --> 00:27:04,667\nit decided that this is a good connection.\n\n494\n00:27:04,667 --> 00:27:05,288\nIt's not a loop.\n\n495\n00:27:05,288 --> 00:27:06,647\nI'm gonna leave it forwarding.\n\n496\n00:27:06,647 --> 00:27:08,411\nIf a loop had been found.\n\n497\n00:27:08,411 --> 00:27:10,233\nIt would go into blocking, right?\n\n498\n00:27:10,233 --> 00:27:10,872\n>> Right.\n\n499\n00:27:10,872 --> 00:27:12,022\n>> And it would block that.\n\n500\n00:27:12,022 --> 00:27:14,053\nAnd here, I can create a loop\nreal quick just to do it.\n\n501\n00:27:14,053 --> 00:27:17,757\nAssuming this is the good cable.\n\n502\n00:27:17,757 --> 00:27:20,290\nWe had a bad cable back here earlier,\nthere we go, all right?\n\n503\n00:27:20,290 --> 00:27:25,620\nSo, I'm creating a loop between Port 9 and\n10, all right?\n\n504\n00:27:25,620 --> 00:27:29,200\nSo, I took a crossover cable and\nI plugged one end into Port 9,\n\n505\n00:27:29,200 --> 00:27:33,960\nand one end into Port 10, and so\nthat's gonna create a loop on this switch,\n\n506\n00:27:35,020 --> 00:27:37,380\nand if I look here, there it is.\n\n507\n00:27:37,380 --> 00:27:37,990\n>> Blocked it already.\n\n508\n00:27:37,990 --> 00:27:40,760\n>> I can see nine is still in\nthe listening phase, right?\n\n509\n00:27:40,760 --> 00:27:42,060\nSee how it's got listening.\n\n510\n00:27:42,060 --> 00:27:45,070\nIt's gonna take 30 seconds to\ngo from listening, to learning,\n\n511\n00:27:45,070 --> 00:27:49,260\nto forwarding but\nPort 10 is already gone into blocking.\n\n512\n00:27:49,260 --> 00:27:52,620\nSo, see how it's got a BLK there letting\nme know that it's blocking that loop.\n\n513\n00:27:52,620 --> 00:27:54,430\nSo even though, I did something dumb and\n\n514\n00:27:54,430 --> 00:27:59,960\nI plugged two ends of the cable into the\nsame switch, it's protecting me from that.\n\n515\n00:27:59,960 --> 00:28:02,440\nIt's already blocking it and\nit's preventing it.\n\n516\n00:28:02,440 --> 00:28:04,410\nAnd it's Spanning Tree Protocol\nthat did that.\n\n517\n00:28:04,410 --> 00:28:06,840\nNow, what configuration\ncommands did I issue?\n\n518\n00:28:07,890 --> 00:28:09,518\n>> And the shows empty.\n\n519\n00:28:09,518 --> 00:28:11,010\n>> None.\nI didn't issue any config.\n\n520\n00:28:11,010 --> 00:28:12,700\nI'm not even in config.\n\n521\n00:28:12,700 --> 00:28:17,320\n>> Spanning Tree Protocol is turned on,\nand operational right out of the box.\n\n522\n00:28:17,320 --> 00:28:18,929\nSo, what do you have to do to set this up?\n\n523\n00:28:18,929 --> 00:28:19,625\n>> Nothing.\n\n524\n00:28:19,625 --> 00:28:20,820\n>> Nothing right?\n\n525\n00:28:20,820 --> 00:28:22,980\nNow, there's some tuning we can do.\n\n526\n00:28:22,980 --> 00:28:25,500\nWe can tweak it make it look\nmore efficient and stuff..\n\n527\n00:28:25,500 --> 00:28:30,420\nBut, by default spanning tree is\nalready running, already in place.\n\n528\n00:28:30,420 --> 00:28:32,340\nAs long as you don't dink with it,\n\n529\n00:28:32,340 --> 00:28:37,530\nyou cannot loop a Cisco\nswitch in its default config.\n\n530\n00:28:37,530 --> 00:28:40,170\nWhen we get back from the switch, we'll\ntalk about what we see in the information\n\n531\n00:28:40,170 --> 00:28:44,580\nin the upper half of that where we\ntake a look at the different outputs.\n\n532\n00:28:44,580 --> 00:28:48,460\nFrom our show spanning tree, and\nhow it started to do the loop prevention.\n\n533\n00:28:48,460 --> 00:28:50,350\n>> Yeah, when we get that, it figures out,\n\n534\n00:28:50,350 --> 00:28:53,330\nwhat port to shut off to\nprevent a loop and stuff?\n\n535\n00:28:53,330 --> 00:28:57,070\nWe need to know, absolutely for\nthe exam, how it decides that,\n\n536\n00:28:57,070 --> 00:29:00,830\nhow it decides what port to shut off\nversus what port to leave on, and so on?\n\n537\n00:29:00,830 --> 00:29:03,510\nSo, when we get back we'll talk about,\nhow it makes that decision?\n\n538\n00:29:03,510 --> 00:29:07,050\nAnd how it elects somebody\nas the route bridge,\n\n539\n00:29:07,050 --> 00:29:08,530\nwho's gonna be that king of the pile?\n\n540\n00:29:08,530 --> 00:29:12,760\nSo, but for right now that's actually\na pretty good stopping point.\n\n541\n00:29:12,760 --> 00:29:14,410\nWhat do you think Ronnie?\n\n542\n00:29:14,410 --> 00:29:15,760\n>> Yep.\n>> All right, well, ladies and gentleman,\n\n543\n00:29:15,760 --> 00:29:16,380\nstay tuned.\n\n544\n00:29:16,380 --> 00:29:19,192\nWhen we get back,\nmore loop excitement after this.\n\n545\n00:29:19,192 --> 00:29:27,112\n[MUSIC]\n\n546\n00:29:27,112 --> 00:29:29,680\nAll right, welcome back everybody.\n\n547\n00:29:29,680 --> 00:29:31,830\nSo, what we wanna start with here,\n\n548\n00:29:31,830 --> 00:29:36,390\nis we wanna show you guys the active\nloop prevention in our current typology,\n\n549\n00:29:36,390 --> 00:29:38,280\nand then we're gonna take\na look at how it worked.\n\n550\n00:29:38,280 --> 00:29:39,500\nHow it did what it did?\n\n551\n00:29:39,500 --> 00:29:42,120\nSo, let's go back to my drawing for\na second.\n\n552\n00:29:42,120 --> 00:29:45,380\nSo, here's the drawing of the three\nswitches that I've got behind me.\n\n553\n00:29:45,380 --> 00:29:49,660\nAnd I've currently pulled this cable\nright here, this Fa0/1 to Fa0/2 cable.\n\n554\n00:29:49,660 --> 00:29:54,480\nSo, when I look at this switch topology,\neverything's happy and healthy.\n\n555\n00:29:54,480 --> 00:29:57,510\nEverybody's up and\nlet me just show that real quick.\n\n556\n00:29:57,510 --> 00:30:00,400\nSo, I'm connected into switch 1 here, and\n\n557\n00:30:00,400 --> 00:30:05,420\nif I do a show spanning, and\nthe full command, it shows spanning tree.\n\n558\n00:30:05,420 --> 00:30:08,860\nYou can do show span or whatever.\n\n559\n00:30:08,860 --> 00:30:13,260\nBut, I can see ports 1 and\n2 on this switch are both forwarding.\n\n560\n00:30:13,260 --> 00:30:14,390\nSo that's these guys right here.\n\n561\n00:30:14,390 --> 00:30:17,790\nPort 1 and 2, they're both forwarding and\nthey're happy, all right?\n\n562\n00:30:17,790 --> 00:30:19,126\nNow let me take a look at switch 2.\n\n563\n00:30:22,727 --> 00:30:26,130\nAnd let's see if I can\nremember my password.\n\n564\n00:30:28,480 --> 00:30:32,100\nAnd on switch 2, I've only got port two\nplugged in, and I can see that it's\n\n565\n00:30:32,100 --> 00:30:36,810\nforwarding and happy if I go back here,\nswitch 2, port 2, it's up and it's happy.\n\n566\n00:30:36,810 --> 00:30:38,379\nAnd now let me take a look at switch 3.\n\n567\n00:30:45,737 --> 00:30:50,217\nAnd we'll look at it and\nit's got port 1, which is forwarding and\n\n568\n00:30:50,217 --> 00:30:53,130\nhappy and if I go back here that's port 1.\n\n569\n00:30:53,130 --> 00:30:56,070\nSo, I'm gonna plug in\nthis cable right here.\n\n570\n00:30:56,070 --> 00:30:56,844\nPort 1 to port 2.\n\n571\n00:30:56,844 --> 00:30:59,369\nAnd we'll see what excitement happens,\nall right?\n\n572\n00:30:59,369 --> 00:31:03,514\nSo it's port 1 on switch\n3 to port 2 on switch 2.\n\n573\n00:31:03,514 --> 00:31:07,420\nI've already got something in.\n\n574\n00:31:07,420 --> 00:31:09,490\nI'm sorry, I'm reading it wrong.\n\n575\n00:31:09,490 --> 00:31:13,380\nPort 2 on switch 3,\ngoing back to port 1 on switch 2.\n\n576\n00:31:13,380 --> 00:31:14,040\nThere we go.\n\n577\n00:31:14,040 --> 00:31:15,610\nAll right.\n\n578\n00:31:15,610 --> 00:31:16,610\nSo, I'm plugging those in.\n\n579\n00:31:16,610 --> 00:31:20,180\nNow, switch 1 is up here.\n\n580\n00:31:20,180 --> 00:31:22,160\nBoth of it's ports were happy.\n\n581\n00:31:22,160 --> 00:31:25,700\nSwitch 2 and switch 3,\nthey just had the one port that was happy.\n\n582\n00:31:25,700 --> 00:31:28,400\nI'm gonna give it a moment here while\nit goes through it's phases, right?\n\n583\n00:31:28,400 --> 00:31:31,070\n30 seconds.\nIt's gotta do listening and learning,\n\n584\n00:31:31,070 --> 00:31:32,880\nwhile it detects the loop.\n\n585\n00:31:32,880 --> 00:31:34,940\nAnd at the end of the day,\n\n586\n00:31:34,940 --> 00:31:39,770\nit should see that there is a loop present\nand then it's gonna make a decision.\n\n587\n00:31:39,770 --> 00:31:44,660\nAnd that decision's gonna be to turn\nan interface off somewhere, right?\n\n588\n00:31:44,660 --> 00:31:45,980\nI've got six to choose from.\n\n589\n00:31:45,980 --> 00:31:47,283\n>> Yeah.\n>> It can turn off any one\n\n590\n00:31:47,283 --> 00:31:50,010\nof these six interfaces,\nto stop the loop, right?\n\n591\n00:31:50,010 --> 00:31:54,640\nIt could stop one of these new ones, but\nit could stop one over here, one up here,\n\n592\n00:31:54,640 --> 00:31:55,700\none over here right?\n\n593\n00:31:55,700 --> 00:31:56,990\n>> Mm-hm.\n>> How does it pick?\n\n594\n00:31:56,990 --> 00:31:59,308\nWell, there's a lot involved, right?\n\n595\n00:31:59,308 --> 00:32:03,545\nAnd, just to kind of gloss over it now,\ncuz we'll go into more detail later.\n\n596\n00:32:03,545 --> 00:32:04,264\n>> Mm-hm.\n\n597\n00:32:04,264 --> 00:32:07,573\n>> For example,\nthese might be 100 megabit connections.\n\n598\n00:32:07,573 --> 00:32:10,876\nBut this new connection,\nmight be a gigabit connection.\n\n599\n00:32:10,876 --> 00:32:12,874\nIf it's a gigabit we don't\nwanna shut that off,\n\n600\n00:32:12,874 --> 00:32:14,790\nwhen it's better than the other lines.\n\n601\n00:32:14,790 --> 00:32:16,450\nSo spanning tree has\nto be pretty advanced,\n\n602\n00:32:16,450 --> 00:32:18,829\nit has to think about all these\ndifferent characteristics.\n\n603\n00:32:20,400 --> 00:32:23,830\nAll right, so it should be about happy,\nlet's go and take a look.\n\n604\n00:32:23,830 --> 00:32:29,160\nI'm gonna start on switch 1, if I can\nfigure out where switch 1 is, there, and\n\n605\n00:32:29,160 --> 00:32:34,830\nI'll do a show spanning-tree, and\nnothing's really changed here, right?\n\n606\n00:32:34,830 --> 00:32:37,660\nSo all forwarding, all happy-\n>> Still good, yeah.\n\n607\n00:32:37,660 --> 00:32:39,190\n>> And let's go take a look at switch 2.\n\n608\n00:32:39,190 --> 00:32:44,090\nAll right, and here we go.\n\n609\n00:32:44,090 --> 00:32:44,780\n>> There you go.\n\n610\n00:32:44,780 --> 00:32:49,480\n>> Switch 2, I've got one port\nforwarding and one port blocking.\n\n611\n00:32:49,480 --> 00:32:54,650\nIt found the loop and\nit stopped it by blocking that connection.\n\n612\n00:32:54,650 --> 00:32:56,743\nIf I look at switch 3, this is where\nthings get really interesting-\n\n613\n00:32:59,162 --> 00:33:03,055\nHere both are forwarding and happy.\n\n614\n00:33:03,055 --> 00:33:04,210\n>> Mm-hm.\n\n615\n00:33:04,210 --> 00:33:04,990\n>> Okay.\n\n616\n00:33:04,990 --> 00:33:10,260\nSo if I go back to my diagram\nwhat happened was switch 2,\n\n617\n00:33:10,260 --> 00:33:12,258\nshut off port number 1.\n\n618\n00:33:12,258 --> 00:33:15,810\nSo switch 2,\nbasically looked at our topology and\n\n619\n00:33:15,810 --> 00:33:20,570\nsaid the best thing to do is to turn that\nport off right there, and there we go.\n\n620\n00:33:20,570 --> 00:33:22,310\n>> Now, it seems logical.\n\n621\n00:33:22,310 --> 00:33:25,130\nWe can see that it actually worked here.\n\n622\n00:33:25,130 --> 00:33:27,670\nEven so, as a CCNA, okay,\n\n623\n00:33:27,670 --> 00:33:33,070\nin routing in switching, you need to know\nwhy it chose that particular port, okay?\n\n624\n00:33:33,070 --> 00:33:35,890\nSo we're gonna go through\nthe logic in how the switching,\n\n625\n00:33:35,890 --> 00:33:38,710\nhow the spanning tree actually\nended up doing what it did.\n\n626\n00:33:38,710 --> 00:33:41,140\nSo, you have a clear\nunderstanding of how this works.\n\n627\n00:33:41,140 --> 00:33:45,634\nDon't put it past them on the ICND2 exam\nto put a diagram like this, and say,\n\n628\n00:33:45,634 --> 00:33:48,486\nhow do you know that this\nis the port it should be?\n\n629\n00:33:48,486 --> 00:33:49,066\n>> Right.\n\n630\n00:33:49,066 --> 00:33:51,155\n>> Or which port would get.\n\n631\n00:33:51,155 --> 00:33:52,328\nPredict which port.\n\n632\n00:33:52,328 --> 00:33:53,094\n>> Cuz you can.\n\n633\n00:33:53,094 --> 00:33:56,977\nIt's actually not very hard,\nbut predict which port.\n\n634\n00:33:56,977 --> 00:33:58,780\nSo, let's start really high level.\n\n635\n00:33:58,780 --> 00:33:59,740\nWith a simple concept.\n\n636\n00:33:59,740 --> 00:34:03,980\nWhich is why did it only shut\noff one end of the cable, right?\n\n637\n00:34:03,980 --> 00:34:05,320\nWhy not shut off the entire link?\n\n638\n00:34:05,320 --> 00:34:06,780\nIt only shut off one end.\n\n639\n00:34:06,780 --> 00:34:07,880\nThis side, right?\n\n640\n00:34:07,880 --> 00:34:09,780\nSwitch 3 didn't shut off its port.\n\n641\n00:34:09,780 --> 00:34:10,777\n>> Yeah.\n>> Switch 3 thinks,\n\n642\n00:34:10,777 --> 00:34:13,140\nthat both of its ports\nare forwarding happy.\n\n643\n00:34:13,140 --> 00:34:16,220\nIf somebody is plugged into switch 2,\nand they broadcast.\n\n644\n00:34:16,220 --> 00:34:17,940\nSo if a broadcast comes into switch 2,\n\n645\n00:34:17,940 --> 00:34:22,240\nit is not going to go out this port,\ncuz it's off.\n\n646\n00:34:22,240 --> 00:34:25,440\nBut it's gonna go up here,\nit's gonna go down to switch 3,\n\n647\n00:34:25,440 --> 00:34:29,900\nand it's even gonna cross this link and\nit's gonna stop right there.\n\n648\n00:34:29,900 --> 00:34:32,770\nWhy would switch 3 even\nsend data out that port?\n\n649\n00:34:34,230 --> 00:34:37,750\nWell, this is one of the things\nthat I kinda hinted at earlier.\n\n650\n00:34:37,750 --> 00:34:40,710\nWhich is with Spanning Tree Protocol,\n\n651\n00:34:40,710 --> 00:34:45,570\nit knows that while there's a loop right\nnow, the loop might not always be there.\n\n652\n00:34:46,810 --> 00:34:51,420\nIf we have a failure, if a cable fails\non my network, this cable right here,\n\n653\n00:34:51,420 --> 00:34:53,490\nif it fails, okay?\n\n654\n00:34:53,490 --> 00:34:55,510\nDo I still have a loop?\n\n655\n00:34:55,510 --> 00:34:57,210\nNo, the loop is gone.\n\n656\n00:34:57,210 --> 00:35:01,320\nI had to have a connection here to switch\n3 up to switch 1, I no longer have a loop.\n\n657\n00:35:02,420 --> 00:35:07,260\nSo when switch 2 loses its\nconnection there, the loop is gone,\n\n658\n00:35:07,260 --> 00:35:10,715\nbut switch 3 might now be aware of that,\nright?\n\n659\n00:35:10,715 --> 00:35:14,475\nSo, what has to happen here\nis switch 2 is listening,\n\n660\n00:35:14,475 --> 00:35:16,835\nand trying to detect this loop occurring.\n\n661\n00:35:16,835 --> 00:35:22,225\nAnd it still sees frames\ncoming from switch 3,\n\n662\n00:35:22,225 --> 00:35:26,575\nso it knows this is a valid cuz\nit sees data coming off of it.\n\n663\n00:35:26,575 --> 00:35:27,285\nAnd so it says,\n\n664\n00:35:27,285 --> 00:35:32,405\nwhen I lose this connection,\nI can turn this other connection back on.\n\n665\n00:35:33,440 --> 00:35:36,700\nAnd now I can communicate and\nI'm happy, all right?\n\n666\n00:35:36,700 --> 00:35:39,520\nIf both ends of that\ncable were turned off.\n\n667\n00:35:41,020 --> 00:35:45,630\nWhen switch 2 lost this connection,\nit wouldn't see anything coming over\n\n668\n00:35:45,630 --> 00:35:50,590\nthis cable, it wouldn't know that that was\na valid alternate path to take, right?\n\n669\n00:35:50,590 --> 00:35:55,540\nSo by turning off just one end of the\ncable, we still know that link is valid,\n\n670\n00:35:55,540 --> 00:35:58,230\nthat it can work, that we can use\nit in the event of a failure.\n\n671\n00:35:58,230 --> 00:36:02,290\n>> Right.\n>> All right, so\n\n672\n00:36:02,290 --> 00:36:07,410\nlet's take a look and figure out,\nhow it knew which port to turn off.\n\n673\n00:36:07,410 --> 00:36:09,480\nHow did it know which port to shut off?\n\n674\n00:36:09,480 --> 00:36:12,400\n>> Yeah,\nwhen we begin to take a look at this,\n\n675\n00:36:12,400 --> 00:36:17,110\nwe go through this idea that spanning tree\nalgorithm and Spanning Tree Protocol.\n\n676\n00:36:17,110 --> 00:36:21,050\nAnd when we're running Spanning Tree,\nwe have to first decide on several things,\n\n677\n00:36:21,050 --> 00:36:23,970\nbut the very first one is\nthe route bridge, okay?\n\n678\n00:36:23,970 --> 00:36:26,280\nSo Don,\nhow do we determine the route bridge?\n\n679\n00:36:26,280 --> 00:36:29,240\n>> All right, so\nthe route bridge is the head honcho.\n\n680\n00:36:29,240 --> 00:36:31,030\nIt's the person who's in charge,\nand it always reminds me,\n\n681\n00:36:31,030 --> 00:36:32,360\nyou ever see that movie,\nhistory of the world?\n\n682\n00:36:32,360 --> 00:36:33,950\n>> Yeah.\n>> You have Mel Brooks, and he was like,\n\n683\n00:36:33,950 --> 00:36:35,680\nit's good to be the king, right?\n\n684\n00:36:35,680 --> 00:36:37,060\n>> That's how the route bridge is.\n\n685\n00:36:37,060 --> 00:36:39,230\nThe route bridge is infallible.\n\n686\n00:36:39,230 --> 00:36:42,110\nCan't make mistakes,\nit's good to be the kind.\n\n687\n00:36:42,110 --> 00:36:46,020\nSo, the route bridge will never\nshut off any of it's ports.\n\n688\n00:36:46,020 --> 00:36:48,670\nWith one exception,\nif you run a cable from one port,\n\n689\n00:36:48,670 --> 00:36:51,350\nright back to another port on\nthe route bridge that'll do it.\n\n690\n00:36:51,350 --> 00:36:55,620\nBut, in any other scenario the route\nbridge never shuts off a port.\n\n691\n00:36:55,620 --> 00:36:58,838\nInstead, it's up to somebody\nelse to shut off a port.\n\n692\n00:36:58,838 --> 00:37:02,300\nSo the route bridge serves that\nhealthy portion of the core that\n\n693\n00:37:02,300 --> 00:37:06,230\nevery other switch can say, all right,\nI at least know that guy's name.\n\n694\n00:37:06,230 --> 00:37:08,284\n>> Yeah.\n>> Now let's fix things based on that.\n\n695\n00:37:08,284 --> 00:37:10,510\nSo somebody has to become the route.\n\n696\n00:37:10,510 --> 00:37:14,240\nAnd there's an actual election\nthat occurs among'st the switches.\n\n697\n00:37:14,240 --> 00:37:19,990\nAnd the primary criteria that's used is\nsomething that's called the priority.\n\n698\n00:37:19,990 --> 00:37:20,620\nAll right?\n\n699\n00:37:20,620 --> 00:37:23,882\nEvery switch has a priority\nvalue assigned to it, and\n\n700\n00:37:23,882 --> 00:37:28,303\nthe lower the priority value the more\nlikely you are to become route, and\n\n701\n00:37:28,303 --> 00:37:31,949\nthe higher the priority value\nthe less likely, all right?\n\n702\n00:37:31,949 --> 00:37:33,545\nThink of it as like a race.\n\n703\n00:37:33,545 --> 00:37:36,199\nIn this race there are,\n\n704\n00:37:36,199 --> 00:37:42,310\npotentially 65.535 contestants, all right?\n\n705\n00:37:42,310 --> 00:37:48,253\nAnd whoever's in first place is gonna\nwin and whoever's in 65,535th place.\n\n706\n00:37:48,253 --> 00:37:48,890\n>> Is never gonna win.\n\n707\n00:37:48,890 --> 00:37:49,390\n>> Is gonna lose.\n\n708\n00:37:49,390 --> 00:37:49,913\n>> Yep.\n\n709\n00:37:49,913 --> 00:37:55,207\n>> So, when you buy a Cisco switch,\nthey have a priority assigned to them.\n\n710\n00:37:55,207 --> 00:38:00,558\nAnd the default priority is 32,768.\n\n711\n00:38:00,558 --> 00:38:02,080\nIt's a weird number, yeah.\n\n712\n00:38:02,080 --> 00:38:07,770\n32,768.\n\n713\n00:38:07,770 --> 00:38:10,554\nNow that seems like a really weird number.\n\n714\n00:38:10,554 --> 00:38:13,210\n>> [LAUGH]\n>> You wanna memorize it if you can.\n\n715\n00:38:13,210 --> 00:38:15,060\n>> That's right.\n>> Absolutely memorize this number.\n\n716\n00:38:15,060 --> 00:38:20,501\nIt's halfway between 0 and 65,535.\n\n717\n00:38:20,501 --> 00:38:23,620\nThe midpoint of that number is 32,768,\n\n718\n00:38:23,620 --> 00:38:29,050\nand when you buy a Cisco switch,\nthat's its default priority, all right?\n\n719\n00:38:29,050 --> 00:38:32,650\nSo, if I wanna manually pick\nwho's gonna be the route,\n\n720\n00:38:32,650 --> 00:38:36,910\nall I have to do is take that switch,\nand lower its priority number right?\n\n721\n00:38:36,910 --> 00:38:41,860\nLower it to 1, or 100,\nor 700, or whatever, and\n\n722\n00:38:41,860 --> 00:38:43,260\nthen it will become the route.\n\n723\n00:38:44,620 --> 00:38:48,601\nBut by default, all these switches\nare set to 30,768, we haven't changed it.\n\n724\n00:38:48,601 --> 00:38:49,810\nI haven't, have you, Ronnie?\n\n725\n00:38:49,810 --> 00:38:52,242\n>> Nope.\n>> [LAUGH] So we haven't changed it.\n\n726\n00:38:52,242 --> 00:38:54,395\nSo it's a tie.\n\n727\n00:38:54,395 --> 00:38:54,940\n>> Yeah.\n\n728\n00:38:54,940 --> 00:38:55,777\n>> We've got a three way tie.\n\n729\n00:38:55,777 --> 00:38:58,832\n>> The nice thing about this three\nway tie is that spanning tree,\n\n730\n00:38:58,832 --> 00:39:01,552\nwhoever actually figured it out,\nwas fairly genius.\n\n731\n00:39:01,552 --> 00:39:04,738\n>> [LAUGH]\n>> They put in this process of kind of\n\n732\n00:39:04,738 --> 00:39:06,290\na flow chart right?\n\n733\n00:39:06,290 --> 00:39:10,160\nThe idea is, if it's a tie here,\nhere's a tiebreaker.\n\n734\n00:39:10,160 --> 00:39:14,820\nAnd it actually continues to go, it's\nkind of amazing at how detailed it gets.\n\n735\n00:39:14,820 --> 00:39:17,240\nSo, there's a tie breaker\nin the idea of this.\n\n736\n00:39:17,240 --> 00:39:20,070\nIf all the priorities are the same,\nthen we go for\n\n737\n00:39:20,070 --> 00:39:25,420\nthe lowest MAC address on\nthe actual switches itself.\n\n738\n00:39:25,420 --> 00:39:28,370\n>> Yeah, they figured priority,\nyou gotta set that, but\n\n739\n00:39:28,370 --> 00:39:32,590\na MAC address, you have to have it,\nand every switch has to be unique.\n\n740\n00:39:32,590 --> 00:39:35,090\nSo the MAC address gets\nused as the tie breaker.\n\n741\n00:39:35,090 --> 00:39:38,630\nAnd it's a hexadecimal number, so it's\nhard for us to think of it sometimes, but\n\n742\n00:39:38,630 --> 00:39:41,980\nthere's higher numbers and\nlower numbers even in hexadecimal.\n\n743\n00:39:41,980 --> 00:39:45,160\nAnd the lower number MAC\naddress is going to win, so\n\n744\n00:39:45,160 --> 00:39:49,270\nour three switches, they looked at\neach other, and they said, all right?\n\n745\n00:39:49,270 --> 00:39:50,425\nWho's got the lowest MAC address?\n\n746\n00:39:50,425 --> 00:39:53,730\nWell, I didn't really pay attention,\nwhen I made this diagram,\n\n747\n00:39:53,730 --> 00:40:00,440\nto what the MAC addresses were, so let's\ngo and find them and we'll kinda add that.\n\n748\n00:40:00,440 --> 00:40:01,457\nWhat, actually, let me do this.\n\n749\n00:40:01,457 --> 00:40:04,499\nWe can write it above or below these guys.\n\n750\n00:40:04,499 --> 00:40:07,472\nSo, let me get some of these values.\n\n751\n00:40:07,472 --> 00:40:08,958\nSo, for switch 2.\n\n752\n00:40:08,958 --> 00:40:12,118\n>> We're gonna have a MAC address and\na priority and\n\n753\n00:40:12,118 --> 00:40:14,900\nactually let me change the order of those.\n\n754\n00:40:14,900 --> 00:40:18,160\nPriority is the primary one.\n\n755\n00:40:19,770 --> 00:40:23,270\nSo, on each of these switches we\ncan do a show spanning tree and\n\n756\n00:40:23,270 --> 00:40:24,460\nwe can see those values.\n\n757\n00:40:24,460 --> 00:40:28,011\nSo with switch two,\ni can see here for my bridge id,\n\n758\n00:40:28,011 --> 00:40:32,030\nI've got my priority right here, 32,768.\n\n759\n00:40:32,030 --> 00:40:33,780\nAnd here's my MAC address.\n\n760\n00:40:33,780 --> 00:40:34,870\nI'm gonna add that to my slide.\n\n761\n00:40:39,529 --> 00:40:41,160\nThere we go.\n\n762\n00:40:41,160 --> 00:40:45,038\nAnd then I'm just just gonna do that\nwith my other two switches also.\n\n763\n00:40:47,494 --> 00:40:48,938\nSo switch three.\n\n764\n00:40:53,245 --> 00:40:56,250\nEvery switch has a MAC address, right.\n\n765\n00:40:56,250 --> 00:41:00,440\nThat's not, that's the one I need.\n\n766\n00:41:00,440 --> 00:41:03,616\nEvery switch has a MAC address,\nwe don't normally think about it because,\n\n767\n00:41:03,616 --> 00:41:06,495\nyour switches or layer two devices,\nthey're switching traffic but\n\n768\n00:41:06,495 --> 00:41:08,001\nthey do have their own MAC address.\n\n769\n00:41:09,993 --> 00:41:12,373\nAnd let me just get this one last.\n\n770\n00:41:12,373 --> 00:41:16,380\n>> Now, I wanted to point out something\nwhile Don's actually copying this over.\n\n771\n00:41:16,380 --> 00:41:19,300\nHe pointed out the term, bridge ID.\n\n772\n00:41:19,300 --> 00:41:22,610\nThe combination of the priority and\n\n773\n00:41:22,610 --> 00:41:26,300\nthe MAC address is what we\nconsider the bridge ID.\n\n774\n00:41:26,300 --> 00:41:28,330\nAnd so a lot of times on the exam,\n\n775\n00:41:28,330 --> 00:41:32,890\neven though it's really based on the\npriority number itself at the beginning,\n\n776\n00:41:32,890 --> 00:41:36,640\nthey might ask you about which of the\nfollowing makes this decision for the root\n\n777\n00:41:36,640 --> 00:41:42,550\nbridge, and you might see the term\nlowest BID or lowest B-I-D, Bridge ID.\n\n778\n00:41:42,550 --> 00:41:46,790\nWhich means take a look at a combination\nof both here, and make that decision.\n\n779\n00:41:46,790 --> 00:41:48,560\n>> Yeah.\nAnd you can kind of see it here when they\n\n780\n00:41:48,560 --> 00:41:50,170\nshow the bridge id.\n\n781\n00:41:50,170 --> 00:41:54,650\nThe bridge id technically is\nthe priority plus the MAC address.\n\n782\n00:41:54,650 --> 00:41:56,060\nSo, it's the two numbers combines.\n\n783\n00:41:56,060 --> 00:41:59,985\nThey don't write it that way in the output\ncuz it wouldn't make a lot of sense to us.\n\n784\n00:41:59,985 --> 00:42:03,370\n>> [LAUGH]\n>> But, they separate it out for us here.\n\n785\n00:42:03,370 --> 00:42:04,580\nSo, all right.\n\n786\n00:42:04,580 --> 00:42:07,490\nSo now I've got those MAC\naddresses in priorities.\n\n787\n00:42:07,490 --> 00:42:12,410\nAll three switches have priority\nof 32,768 three way tie right?\n\n788\n00:42:12,410 --> 00:42:13,940\nBut then it went to the MAC addresses,\nright.\n\n789\n00:42:13,940 --> 00:42:15,130\nAnd look at these MAC addresses.\n\n790\n00:42:15,130 --> 00:42:17,800\nAll three of them start with 00.\n\n791\n00:42:17,800 --> 00:42:20,290\nSo, the first two you'll..\n\n792\n00:42:20,290 --> 00:42:23,890\nAnd then updates, but\nthe first two hexidecimal values is zeros.\n\n793\n00:42:23,890 --> 00:42:26,852\nAnd then the third value,\nI've got a zero up here.\n\n794\n00:42:26,852 --> 00:42:30,180\nI've got a one here, and\nI've got a one here.\n\n795\n00:42:30,180 --> 00:42:31,420\nThat zero.\n\n796\n00:42:31,420 --> 00:42:32,720\nThis one starts with three zeros.\n\n797\n00:42:32,720 --> 00:42:34,130\nThat's the lowest.\n\n798\n00:42:34,130 --> 00:42:37,360\nThis switch should be the root bridge.\n\n799\n00:42:37,360 --> 00:42:38,200\nAll right.\n\n800\n00:42:38,200 --> 00:42:41,490\nAnd we can verify that with our\nshow spanning tree command.\n\n801\n00:42:41,490 --> 00:42:42,930\nThat on this one.\n\n802\n00:42:42,930 --> 00:42:45,490\nSee how I've got that\nbridge ID right here.\n\n803\n00:42:45,490 --> 00:42:48,850\nAnd then there's that MAC address for\nthis switch.\n\n804\n00:42:48,850 --> 00:42:53,420\nAnd then for the root ID cuz every\nswitch has to know who the root is, and\n\n805\n00:42:53,420 --> 00:42:58,210\nI can see right here this message,\nthis bridge is the root, all right.\n\n806\n00:42:58,210 --> 00:42:59,635\nEven if we didn't have that message.\n\n807\n00:42:59,635 --> 00:43:00,930\n>> [LAUGH]\n>> The MAC address for\n\n808\n00:43:00,930 --> 00:43:04,620\nthe root is our MAC address, right.\n\n809\n00:43:04,620 --> 00:43:09,790\nWhereas if I look at somebody else,\nhere's our MAC address on switch three.\n\n810\n00:43:09,790 --> 00:43:11,240\nHere's the MAC address on the root bridge.\n\n811\n00:43:11,240 --> 00:43:12,670\nI can tell that it's somebody else.\n\n812\n00:43:12,670 --> 00:43:13,970\nI'm not the root.\n\n813\n00:43:13,970 --> 00:43:15,160\n>> Yup.\n\n814\n00:43:15,160 --> 00:43:16,530\n>> All right.\n\n815\n00:43:16,530 --> 00:43:21,640\nSo in this case, the MAC address was\nthe tie breaker and switch one won out.\n\n816\n00:43:21,640 --> 00:43:22,200\nRight.\n\n817\n00:43:22,200 --> 00:43:23,910\nNow there is a slight problem here.\n\n818\n00:43:25,400 --> 00:43:26,280\nMAC addresses.\n\n819\n00:43:26,280 --> 00:43:30,880\nIf you're relying on MAC addresses,\nMAC addresses are issued in order.\n\n820\n00:43:30,880 --> 00:43:35,720\nSo when Cisco started building switches,\nthey had a particular ranges of MAC\n\n821\n00:43:35,720 --> 00:43:38,240\naddresses and they used them\nover time until they ran out.\n\n822\n00:43:38,240 --> 00:43:42,200\nAnd then they got another pool\nof MAC addresses and so on.\n\n823\n00:43:42,200 --> 00:43:44,830\nThe switches they get new\nranges of MAC address.\n\n824\n00:43:44,830 --> 00:43:48,220\nBut the new ranges are always higher.\n\n825\n00:43:48,220 --> 00:43:52,280\nSo your older switches\nare typically gonna have a lower\n\n826\n00:43:52,280 --> 00:43:54,380\nMAC address then your newer switches.\n\n827\n00:43:54,380 --> 00:43:56,470\nAnd that's a real problem.\n\n828\n00:43:56,470 --> 00:44:00,232\nCuz you might have an eight year\nold switch and you got this nice,\n\n829\n00:44:00,232 --> 00:44:05,259\nbrand new 6500u, you've got a $70,000\nswitch, and it's not the root.\n\n830\n00:44:05,259 --> 00:44:07,930\n>> And the problem is very simple.\n\n831\n00:44:07,930 --> 00:44:11,064\nWith the idea of becoming\nthis root bridge, right.\n\n832\n00:44:11,064 --> 00:44:15,410\nAll data has to flow\nthrough that root bridge.\n\n833\n00:44:15,410 --> 00:44:18,630\nSo an older device may\nactually have to churn harder,\n\n834\n00:44:18,630 --> 00:44:19,790\nmay have to work a lot harder.\n\n835\n00:44:19,790 --> 00:44:24,390\nThat CPU is getting taxed\nout just by the way that\n\n836\n00:44:24,390 --> 00:44:28,440\ndata has to flow through this,\ninstead of sending it through that newer,\n\n837\n00:44:28,440 --> 00:44:32,350\nfaster, stronger PC, or CPU, I said PC\n>> [LAUGH]\n\n838\n00:44:32,350 --> 00:44:34,634\n>> CPU then what we'd normally have.\n\n839\n00:44:34,634 --> 00:44:37,380\n>> Yeah.\n>> So that's why being able to change\n\n840\n00:44:37,380 --> 00:44:40,170\nthe priority number could\nactually be huge for us.\n\n841\n00:44:40,170 --> 00:44:43,160\n>> And that's the reason why I\nwanted us to have a 3550 back here.\n\n842\n00:44:43,160 --> 00:44:46,680\nThe exam using 3560,\nright, so switch two and\n\n843\n00:44:46,680 --> 00:44:50,740\nswitch three are both Cisco 3560s\nthe same switch you'll see on the exam.\n\n844\n00:44:50,740 --> 00:44:55,165\nBut the switch one up here is\na 3550 it's the last generation.\n\n845\n00:44:55,165 --> 00:44:57,220\nRight.\nSo, this switch up here is probably four\n\n846\n00:44:57,220 --> 00:45:00,440\nyears old whereas the two on\nthe bottom are only about a year old.\n\n847\n00:45:00,440 --> 00:45:04,450\nSo, I mean they made 3560 for\nawhile though.\n\n848\n00:45:04,450 --> 00:45:06,970\nBut anyhow, so\nswitch one in our case became the root..\n\n849\n00:45:06,970 --> 00:45:09,400\nEven though it's our older switch.Right.\n\n850\n00:45:09,400 --> 00:45:10,560\nSo we might not want that.\n\n851\n00:45:10,560 --> 00:45:11,740\nWe might not care.\n\n852\n00:45:11,740 --> 00:45:12,260\nWho cares?\n\n853\n00:45:12,260 --> 00:45:13,270\nIt works.\n\n854\n00:45:13,270 --> 00:45:14,990\nSo you might be fine with that.\n\n855\n00:45:14,990 --> 00:45:18,770\nBut sometimes we may want to\ninfluence who becomes the root, and\n\n856\n00:45:18,770 --> 00:45:20,840\nthat's where the priority value comes in.\n\n857\n00:45:20,840 --> 00:45:22,880\nWe can change that priority value and\n\n858\n00:45:22,880 --> 00:45:27,142\nthat, in effect, lets us hand pick\nwho the route is going to be.\n\n859\n00:45:27,142 --> 00:45:27,930\n>> Right, yeah.\n\n860\n00:45:27,930 --> 00:45:29,760\nSo when we actually have this, right,\n\n861\n00:45:29,760 --> 00:45:34,520\na lot of times you have to be able to\nuse that show spanning-tree command\n\n862\n00:45:34,520 --> 00:45:40,080\nto determine that lower priority number,\nor the MAC address between through.\n\n863\n00:45:40,080 --> 00:45:43,404\nAgain, on the exam it's not uncommon that\nthey give you a simulation like this for\n\n864\n00:45:43,404 --> 00:45:44,278\nyou to work through.\n\n865\n00:45:44,278 --> 00:45:46,785\nSo make sure you know these\nshow commands very well.\n\n866\n00:45:46,785 --> 00:45:53,260\n>> All right, so let's put that one in\nthe back of our mind, changing the route.\n\n867\n00:45:53,260 --> 00:45:54,700\n>> Yep.\n>> So what I wanna do is,\n\n868\n00:45:54,700 --> 00:45:58,670\nwe now know who's the root, and\nwe know why they're the root.\n\n869\n00:45:58,670 --> 00:46:01,555\nNow, I wanna look at how that\ninfluences what port got shut off.\n\n870\n00:46:01,555 --> 00:46:02,930\n>> Right.\n>> After we're done with that\n\n871\n00:46:02,930 --> 00:46:05,960\nwe'll come back and we'll change the root\nand see how that effects everything.\n\n872\n00:46:05,960 --> 00:46:07,900\nSo, we'll kind of go full circle.\n\n873\n00:46:07,900 --> 00:46:08,820\nWe'll create a loop.\n\n874\n00:46:08,820 --> 00:46:09,725\n>> That's right, we will.\n\n875\n00:46:09,725 --> 00:46:12,210\n>> [LAUGH] All right.\n\n876\n00:46:12,210 --> 00:46:15,830\nSo, now that we know who's the root,\nwhat does this mean for us.\n\n877\n00:46:15,830 --> 00:46:16,510\nWell,\n>> Here's\n\n878\n00:46:16,510 --> 00:46:19,800\nwhere things start to get a little\nconfusing on the memorization side.\n\n879\n00:46:19,800 --> 00:46:24,730\nWhen we mention the different states\na port could be in, right, so\n\n880\n00:46:24,730 --> 00:46:25,950\nlet me just add that here.\n\n881\n00:46:25,950 --> 00:46:28,560\nSpanning Tree Port States.\n\n882\n00:46:28,560 --> 00:46:32,110\nAll right, so these are some of the states\nthat we're gonna see our ports in,\n\n883\n00:46:32,110 --> 00:46:34,940\nblocking, listening, learning,\nlet me just add a line here.\n\n884\n00:46:34,940 --> 00:46:35,440\nThere we go.\n\n885\n00:46:37,150 --> 00:46:38,030\nAll artsy.\n\n886\n00:46:38,030 --> 00:46:39,310\nSo blocking, listening,\n\n887\n00:46:39,310 --> 00:46:43,800\nlearning, forwarding,right, those are the\nstates that a port can be in, all right.\n\n888\n00:46:43,800 --> 00:46:46,490\nBut the ports also have\na different name assigned to them.\n\n889\n00:46:46,490 --> 00:46:49,380\nAnd you might have noticed it\nhere in the show spanning tree.\n\n890\n00:46:49,380 --> 00:46:51,570\nSo we've got our states, right.\n\n891\n00:46:51,570 --> 00:46:53,930\nLike forwarding, listening,\nlearning, blocking, but\n\n892\n00:46:53,930 --> 00:46:56,780\nthere's also this roll over here right.\n\n893\n00:46:56,780 --> 00:46:58,800\nAnd see how we've got like designated.\n\n894\n00:46:58,800 --> 00:47:01,040\nIt was what DESG stands for.\n\n895\n00:47:01,040 --> 00:47:04,210\nSo, there are spanning tree roles also.\n\n896\n00:47:04,210 --> 00:47:05,890\nSo let's add that to our list.\n\n897\n00:47:05,890 --> 00:47:12,550\nSo stp port roles and for the roles\nwe've got a few different ones right.\n\n898\n00:47:12,550 --> 00:47:18,600\nSo, we've got our root ports,\nI'm gonna run out of room, aren't I?\n\n899\n00:47:18,600 --> 00:47:19,370\nDesignated..\n\n900\n00:47:21,125 --> 00:47:25,540\n[LAUGH]\nI'm just going to say root\n\n901\n00:47:25,540 --> 00:47:30,310\ndesignated and non-designated.\n\n902\n00:47:30,310 --> 00:47:33,970\nAnd there's one more you guys\nprobably saw which was alternate.\n\n903\n00:47:33,970 --> 00:47:36,710\nBut let's hold off on alternate\nbecause it's actually not\n\n904\n00:47:36,710 --> 00:47:38,600\npart of the normal standard.\n\n905\n00:47:38,600 --> 00:47:40,820\nSo let me just kind of\nmove this off to the side.\n\n906\n00:47:40,820 --> 00:47:41,560\nThere we go.\n\n907\n00:47:41,560 --> 00:47:42,460\nAll right.\n\n908\n00:47:42,460 --> 00:47:45,100\nSo these are the three we\nare going to see normally, right.\n\n909\n00:47:45,100 --> 00:47:47,690\nRoot designated, non designated.\n\n910\n00:47:47,690 --> 00:47:50,687\n>> And on the exam when you take a look\nat this, they may go out and mark but\n\n911\n00:47:50,687 --> 00:47:51,888\nthey may abbreviate them.\n\n912\n00:47:51,888 --> 00:47:56,255\nRP for Root Port, DP for\nDesignated Port, and NDP for\n\n913\n00:47:56,255 --> 00:47:59,764\nthe idea of Non-Designated Port as well.\n\n914\n00:47:59,764 --> 00:48:04,297\nSo, sometimes I don't have enough room\njust like on Don's diagram we also see\n\n915\n00:48:04,297 --> 00:48:08,691\nthat- On the exam as well, so do pay\nattention to those, and if they show you\n\n916\n00:48:08,691 --> 00:48:12,744\nthat here's is port and they want\nyou to mark a non-designated port,\n\n917\n00:48:12,744 --> 00:48:15,311\nthey may want you to be able to do that,\ntoo.\n\n918\n00:48:15,311 --> 00:48:16,830\n>> There we go.\n\n919\n00:48:16,830 --> 00:48:17,770\nWe've got enough room.\n\n920\n00:48:17,770 --> 00:48:18,975\nI'll squeeze it in there.\n\n921\n00:48:18,975 --> 00:48:22,850\nAnd, all the other ones, they have,\nthey have abbreviations also.\n\n922\n00:48:22,850 --> 00:48:23,360\n>> Right.\n\n923\n00:48:23,360 --> 00:48:27,030\n>> So you've got blocking, listening,\n\n924\n00:48:28,960 --> 00:48:32,560\nlearning, and forwarding, right.\n\n925\n00:48:32,560 --> 00:48:35,253\nSo those are all,\nthis diagram is starting to be.\n\n926\n00:48:35,253 --> 00:48:36,600\n>> [LAUGH]\n>> Full information,\n\n927\n00:48:36,600 --> 00:48:39,630\nI need to put this one in our notes.\n\n928\n00:48:39,630 --> 00:48:43,930\nI'll put this slide, this drawing,\nwhatever it is I've done, all put it on\n\n929\n00:48:43,930 --> 00:48:48,010\nthe webpage with the show so that it's\nright there and you guys can get it.\n\n930\n00:48:48,010 --> 00:48:52,890\n>> So on the route port itself,\nthe key to remember is that once we\n\n931\n00:48:52,890 --> 00:48:57,430\nreport on the root bridge itself,\nthe key to remembering on terms on\n\n932\n00:48:57,430 --> 00:49:02,330\nthe port states itself is that a root port\nwill always, as we mentioned earlier here,\n\n933\n00:49:02,330 --> 00:49:06,970\ntheir ports will be in,\na forwarding state for us.\n\n934\n00:49:06,970 --> 00:49:09,830\n>> Yep, and a forwarding port,\none that's forwarding traffic,\n\n935\n00:49:09,830 --> 00:49:12,390\nis considered to be designated.\n\n936\n00:49:12,390 --> 00:49:14,740\nIt's designated to forward traffic, right?\n\n937\n00:49:14,740 --> 00:49:16,840\nSo that's what we'll\nnormally see on a root.\n\n938\n00:49:16,840 --> 00:49:19,760\nWhen we look on a root bridge,\nthe root bridge says, hey,\n\n939\n00:49:19,760 --> 00:49:21,260\nit's good to be the king.\n\n940\n00:49:21,260 --> 00:49:22,970\nNone of my ports are a loop.\n\n941\n00:49:22,970 --> 00:49:24,030\nI don't make mistakes.\n\n942\n00:49:24,030 --> 00:49:26,010\nIf there's a mistake,\nit's somebody else's problem,\n\n943\n00:49:26,010 --> 00:49:30,180\nso all of my stuff is going to be\nforwarding, if I look at switch one, when\n\n944\n00:49:31,750 --> 00:49:36,450\nwe did that shows Spanning Tree\nthis bridge is the route and\n\n945\n00:49:36,450 --> 00:49:40,480\nall of it's ports\nare designated forwarding.\n\n946\n00:49:40,480 --> 00:49:43,145\nThat's what we expect to\nsee on a root bridge.\n\n947\n00:49:43,145 --> 00:49:44,095\n>> Right?\n\n948\n00:49:44,095 --> 00:49:45,305\n>> The one exception.\n\n949\n00:49:45,305 --> 00:49:46,007\n>> Yeah.\n\n950\n00:49:46,007 --> 00:49:49,274\n>> Would be if we had a cable that ran\nout of port right back into another port,\n\n951\n00:49:49,274 --> 00:49:49,925\non the root.\n\n952\n00:49:49,925 --> 00:49:50,875\nThen it has to deal with it.\n\n953\n00:49:50,875 --> 00:49:51,805\n>> Yeah.\n>> It has to say, wait a minute,\n\n954\n00:49:51,805 --> 00:49:52,925\nthis is weird.\n\n955\n00:49:52,925 --> 00:49:56,185\n>> So, so far we've actually been able to\nidentify in several ways the root bridge.\n\n956\n00:49:56,185 --> 00:49:56,720\nRight?\n\n957\n00:49:56,720 --> 00:49:58,920\nYou can see right here in the output,\nright at the top,\n\n958\n00:49:58,920 --> 00:50:01,490\nthe root idea says this is the root.\n\n959\n00:50:01,490 --> 00:50:04,725\nHopefully we can read, and\nthat's not gonna throw us in any way.\n\n960\n00:50:04,725 --> 00:50:05,550\n>> [LAUGH]\n>> Or,\n\n961\n00:50:05,550 --> 00:50:09,980\nwe can take a look at the idea of the root\nID in terms of what we see there, and\n\n962\n00:50:09,980 --> 00:50:10,690\nthe bridge ID.\n\n963\n00:50:10,690 --> 00:50:13,690\nIf they match,\nwe know that's also the root bridge.\n\n964\n00:50:13,690 --> 00:50:18,510\nBut what if, on an output, they just show\nyou the idea of the ports themselves?\n\n965\n00:50:18,510 --> 00:50:19,459\n>> But that's it.\n\n966\n00:50:19,459 --> 00:50:25,280\nIs the idea that they're always in\nfording state on that root bridge.\n\n967\n00:50:25,280 --> 00:50:28,590\n>> So that's the root bridge, right?\n\n968\n00:50:28,590 --> 00:50:30,180\nWhat about the other guys?\n\n969\n00:50:30,180 --> 00:50:32,880\nWell, the other guys, aren't the root.\n\n970\n00:50:32,880 --> 00:50:35,710\nSo they say, okay, we're not the King, so\n\n971\n00:50:35,710 --> 00:50:38,910\nwe're not infallible,\nwe might make a mistake.\n\n972\n00:50:38,910 --> 00:50:40,780\nThey start to do some planning.\n\n973\n00:50:40,780 --> 00:50:44,720\nThe first thing they do is they say,\nall right, if I look at all of my ports,\n\n974\n00:50:44,720 --> 00:50:48,910\nwhich one is the closest to the route.\n\n975\n00:50:48,910 --> 00:50:52,060\nOkay, the root bridge\nis sending out BPDUs.\n\n976\n00:50:52,060 --> 00:50:54,770\nAnd Ronnie, do you remember\nthe timers at every ten seconds?\n\n977\n00:50:54,770 --> 00:50:56,950\n>> Yes, every ten seconds on BPDU.\n\n978\n00:50:56,950 --> 00:51:00,515\n>> All right, so the route bridge is\nsending out a BPDU every ten seconds.\n\n979\n00:51:00,515 --> 00:51:04,020\nSo every ten seconds\nit's sending out a BPDU.\n\n980\n00:51:05,460 --> 00:51:08,390\nWhen a switch receives a BPDU,\n\n981\n00:51:08,390 --> 00:51:12,070\nit then has to forward it along\nto any downstream switches.\n\n982\n00:51:12,070 --> 00:51:16,110\nSo, switch three, when it receives\nthe BPDU from the root, it is\n\n983\n00:51:16,110 --> 00:51:21,450\nforwarding it along, slightly modified,\nbut forwarding it along to switch two.\n\n984\n00:51:21,450 --> 00:51:26,830\nSo, switch two is gonna receive\nthe root bridge BPDUs twice.\n\n985\n00:51:26,830 --> 00:51:30,480\nSo it knows, right off, hey I've got\ntwo different ways to get to the root.\n\n986\n00:51:31,752 --> 00:51:35,520\nIts gonna look at the BPDU and\nthere's some information stored in there.\n\n987\n00:51:35,520 --> 00:51:39,510\nWe'll talk about it after the break, the\nway that its able to make the decision,\n\n988\n00:51:39,510 --> 00:51:42,810\nbut there's some information there that\nit'll use to look at it will say okay,\n\n989\n00:51:42,810 --> 00:51:48,590\none of these ports is closer or faster or\nbetter for me to get to the root.\n\n990\n00:51:48,590 --> 00:51:49,750\nAnd so it's gonna look at it.\n\n991\n00:51:49,750 --> 00:51:53,167\nAnd it's more than likely\nhere gonna say that Fa0/2.\n\n992\n00:51:53,167 --> 00:51:55,970\nThis port is closer to the root.\n\n993\n00:51:55,970 --> 00:51:56,520\n>> Right.\n>> And\n\n994\n00:51:56,520 --> 00:52:01,600\nso it's gonna flag that port,\nas a root port.\n\n995\n00:52:01,600 --> 00:52:06,260\nSo Fa0/2 isn't just Fa0/2 anymore.\n\n996\n00:52:06,260 --> 00:52:11,640\nNow it's going to be a root port,\nokay and the root port,\n\n997\n00:52:11,640 --> 00:52:17,530\nthe one that's the closest to the root,\nit is always going to be forwarding, okay?\n\n998\n00:52:17,530 --> 00:52:19,900\nIt's a root port the fast\nway to get to the root.\n\n999\n00:52:19,900 --> 00:52:22,810\nSo I'm gonna need to forward traffic\non it so I can communicate to the root.\n\n1000\n00:52:24,590 --> 00:52:27,450\n>> Same thing will also happen\nover on switch three as well,\n\n1001\n00:52:27,450 --> 00:52:31,080\nis that it too will have to decide\nif it's not gonna be the root\n\n1002\n00:52:31,080 --> 00:52:34,150\nbridge itself\n>> It will also receive the BPDUs\n\n1003\n00:52:34,150 --> 00:52:36,510\nfrom the root bridge as well\nas from switch number two.\n\n1004\n00:52:36,510 --> 00:52:40,830\nIt'll go oh, I'm not the king, so\nI gotta actually figure out who is.\n\n1005\n00:52:40,830 --> 00:52:44,630\nAnd once they decide that, then they will\ngo into that idea of trying to figure out\n\n1006\n00:52:44,630 --> 00:52:48,500\nthe root port which is the lowest cost\nleading back to, the re-bridge and\n\n1007\n00:52:48,500 --> 00:52:50,690\nwe'll get into that term a little\nbit later on in our next segment.\n\n1008\n00:52:51,710 --> 00:52:54,400\n>> So, switch one,\ndesignated port forwarding,\n\n1009\n00:52:54,400 --> 00:52:55,570\ndesignated port forwarding right.\n\n1010\n00:52:55,570 --> 00:52:57,890\nEvery things designated\nits all forwarding.\n\n1011\n00:52:57,890 --> 00:53:00,680\nOn switch two and\nswitch three they find they're root port,\n\n1012\n00:53:00,680 --> 00:53:03,370\nand they're forwarding on that, okay.\n\n1013\n00:53:03,370 --> 00:53:07,950\nEvery other port is going\nto be one of two things.\n\n1014\n00:53:07,950 --> 00:53:11,610\nIt's either gonna be a designated or\nnon-designated port.\n\n1015\n00:53:11,610 --> 00:53:13,720\nDesignated means it's\nallowed to forward traffic.\n\n1016\n00:53:13,720 --> 00:53:19,490\nNon-designated means there's a loop and\nwe're gonna be blocking on that port.\n\n1017\n00:53:19,490 --> 00:53:22,050\nSo we need to talk about\nhow it figures that out.\n\n1018\n00:53:22,050 --> 00:53:25,770\nBut, looking at the clock,\nit is right at our break point.\n\n1019\n00:53:25,770 --> 00:53:27,090\nWhy don't we stop here.\n\n1020\n00:53:27,090 --> 00:53:29,390\nWhen we get back,\nwe'll look at that last cable so\n\n1021\n00:53:29,390 --> 00:53:31,810\nwe can figure out what's gonna happen,\nand go from there.\n\n1022\n00:53:31,810 --> 00:53:34,960\nYou got anything else to throw\nin before break, Ronnie?\n\n1023\n00:53:34,960 --> 00:53:36,470\n>> Nope.\nWe're ready to actually figure\n\n1024\n00:53:36,470 --> 00:53:38,330\nout how the heck do we\nchoose that last port.\n\n1025\n00:53:38,330 --> 00:53:40,200\n>> All right, well ladies and\ngentlemen let's stay tuned.\n\n1026\n00:53:40,200 --> 00:53:41,720\nWe're leaving you with a cliffhanger here.\n\n1027\n00:53:41,720 --> 00:53:43,110\n>> That's right.\n>> How we figure that\n\n1028\n00:53:43,110 --> 00:53:44,419\n>> I know you're on the edge of your\n\n1029\n00:53:44,419 --> 00:53:46,316\nseats, but we'll keep that suspense going.\n\n1030\n00:53:46,316 --> 00:53:47,704\nStay tuned, we'll be back after this.\n\n1031\n00:53:47,704 --> 00:53:51,580\n[SOUND] All right,\n\n1032\n00:53:51,580 --> 00:53:57,269\nwelcome back everybody.\n\n1033\n00:53:57,269 --> 00:54:01,724\nSo we left off talking about how\nour ports are either designated or\n\n1034\n00:54:01,724 --> 00:54:04,880\nforwarding and all that good stuff.\n\n1035\n00:54:04,880 --> 00:54:09,340\nAnd now we're just gonna take a look at\nthe actual cable that created our problem,\n\n1036\n00:54:09,340 --> 00:54:12,880\nand how it picks which end is\ngonna get knocked off, all right.\n\n1037\n00:54:12,880 --> 00:54:15,130\nNow let's go back to my diagram here.\n\n1038\n00:54:15,130 --> 00:54:20,260\nSo our switch two and switch three,\nthey already have root ports, all right.\n\n1039\n00:54:20,260 --> 00:54:23,210\nThe switches pretty much assume that\nthe rest of their ports are going to\n\n1040\n00:54:23,210 --> 00:54:23,880\nbe designated.\n\n1041\n00:54:23,880 --> 00:54:28,320\nDesignated ports will be forwarding\ntraffic, so we kinda expect to see that\n\n1042\n00:54:29,480 --> 00:54:35,046\nbut, when a loop is detected somebody's\ngonna have to shut off a port.\n\n1043\n00:54:35,046 --> 00:54:39,890\nSo FA0/1 and FA0/2 are the only\ntwo ports that are left,\n\n1044\n00:54:39,890 --> 00:54:44,160\none of them is gonna be a designated\nport that is forwarding.\n\n1045\n00:54:44,160 --> 00:54:48,680\nThe other one is gonna be a non-designated\nport that is blocking to stop the loop,\n\n1046\n00:54:48,680 --> 00:54:51,710\nbut which is which?\n\n1047\n00:54:51,710 --> 00:54:56,630\nWhat happens is, the exact opposite\nof the election from before.\n\n1048\n00:54:56,630 --> 00:55:00,280\nRemember, we had the election,\nwhoever had the lowest priority or\n\n1049\n00:55:00,280 --> 00:55:02,570\nthe lowest MAC address,\nthey were the winner.\n\n1050\n00:55:02,570 --> 00:55:04,480\nThey became the route.\n\n1051\n00:55:04,480 --> 00:55:06,630\nWell when it comes to blocking a port,\n\n1052\n00:55:06,630 --> 00:55:09,320\nwe're trying to figure\nout the biggest loser.\n\n1053\n00:55:09,320 --> 00:55:13,130\nWho has the highest priority or\nthe highest MAC address?\n\n1054\n00:55:13,130 --> 00:55:15,890\nWhoever that is, is the biggest loser and\n\n1055\n00:55:15,890 --> 00:55:19,100\nthey're the ones that have to\nshut off a port, all right?\n\n1056\n00:55:19,100 --> 00:55:23,650\nSo these two switches,\nthey both have the same priority, 32,768.\n\n1057\n00:55:23,650 --> 00:55:26,464\nSo that's a top it comes\ndown to MAC address,\n\n1058\n00:55:26,464 --> 00:55:31,352\nwhoever has the highest MAC address,\nthe biggest loser, the one that is least\n\n1059\n00:55:31,352 --> 00:55:36,480\nlikely to become the route, they're\nthe ones that have to block a port.\n\n1060\n00:55:36,480 --> 00:55:40,520\nIf I start looking at this MAC address,\nI've got 0018 on both sides, so\n\n1061\n00:55:40,520 --> 00:55:41,580\nthat's a tie.\n\n1062\n00:55:41,580 --> 00:55:44,331\nAnd then 19 and 19, so that's a tie.\n\n1063\n00:55:44,331 --> 00:55:48,403\nAnd the next digit is a seven here,\nand a six here, so\n\n1064\n00:55:48,403 --> 00:55:53,507\nthe six is lower than the seven,\nswitch two is the biggest loser.\n\n1065\n00:55:53,507 --> 00:55:56,757\nAnd that means it's gonna\nbe up to switch two.\n\n1066\n00:55:56,757 --> 00:56:00,171\n>> To shut off a port and stop the loop.\n\n1067\n00:56:00,171 --> 00:56:00,937\n>> Yep.\n\n1068\n00:56:00,937 --> 00:56:02,598\nOnce we have that loop stopped,\n\n1069\n00:56:02,598 --> 00:56:07,030\nthe other side is gonna be designated\nthat designated port on that segment.\n\n1070\n00:56:07,030 --> 00:56:11,750\nAnd so that actually helps us to bring\nback the topology we started off with.\n\n1071\n00:56:11,750 --> 00:56:14,500\nSo it's always in that particular\nconfiguration first, right.\n\n1072\n00:56:14,500 --> 00:56:18,700\nWe determine, first of all,\nthe root bridge itself.\n\n1073\n00:56:18,700 --> 00:56:21,500\nOnce we determine that\nparticular root bridge,\n\n1074\n00:56:21,500 --> 00:56:27,300\nall the other non-root bridges in that\ntopology will have to pick a root port.\n\n1075\n00:56:27,300 --> 00:56:31,892\nAnd then this final process of the segment\nthat we have, that's left over,\n\n1076\n00:56:31,892 --> 00:56:36,771\nwe actually have to determine the idea of\nthat blocking port that we call NDP now,\n\n1077\n00:56:36,771 --> 00:56:39,744\nNon-Designated Port and\nthe Designated Port.\n\n1078\n00:56:39,744 --> 00:56:43,348\nAnd that will help us to prevent the idea\nof the broadcast storms we were talking\n\n1079\n00:56:43,348 --> 00:56:44,130\nabout earlier.\n\n1080\n00:56:44,130 --> 00:56:47,020\nIt will help us to prevent the MAC\naddress table instabilities,\n\n1081\n00:56:47,020 --> 00:56:51,030\nas well the multiple copies of the frame\nfrom going across the entire network.\n\n1082\n00:56:52,140 --> 00:56:53,640\n>> Now these values aren't set in stone.\n\n1083\n00:56:53,640 --> 00:56:54,950\n>> Yep.\n>> They can change.\n\n1084\n00:56:54,950 --> 00:56:56,810\nThere's a couple of things\nthat can cause a change.\n\n1085\n00:56:56,810 --> 00:57:00,150\nFor example,\nif I have a link failure, right.\n\n1086\n00:57:00,150 --> 00:57:04,450\nSo if this link fails, this cable,\nsomebody unplugs it, they trip over it,\n\n1087\n00:57:04,450 --> 00:57:07,250\nwhatever, something causes\nthat cable to fail, right.\n\n1088\n00:57:07,250 --> 00:57:08,790\nWhen that happens,\n\n1089\n00:57:08,790 --> 00:57:14,000\nwe're not longer receiving the root\nBPDUs that were coming from here, right.\n\n1090\n00:57:14,000 --> 00:57:19,750\nSo we were getting root BPDUs now\nwe're not, which means that this port,\n\n1091\n00:57:19,750 --> 00:57:23,370\nis no longer a root port,\nright, a root port forwarding.\n\n1092\n00:57:23,370 --> 00:57:26,620\nSo we have to find some other\nway to get to the root.\n\n1093\n00:57:26,620 --> 00:57:29,560\nAnd so, when that happens it starts\nlooking at its port, the only other port\n\n1094\n00:57:29,560 --> 00:57:33,290\nit's got is this guy right here,\nthis non-designated blocking port.\n\n1095\n00:57:33,290 --> 00:57:35,960\nAnd so it says okay,\ntime to turn that one on.\n\n1096\n00:57:35,960 --> 00:57:40,250\nThis one becomes a root port and\nit begins forwarding.\n\n1097\n00:57:40,250 --> 00:57:43,155\nThis one stays a designated\nport forwarding.\n\n1098\n00:57:43,155 --> 00:57:46,540\nCuz it's up, it's not the closest\nto the root for this switch, but\n\n1099\n00:57:46,540 --> 00:57:48,810\nit is the closest to the route for\nswitch number 2, and\n\n1100\n00:57:48,810 --> 00:57:50,820\nit would start flowing\nits traffic that way.\n\n1101\n00:57:50,820 --> 00:57:53,504\nSo a link failure can change everything,\n\n1102\n00:57:53,504 --> 00:57:57,414\ncan cause the entire topology to change,\nto be able to heal,\n\n1103\n00:57:57,414 --> 00:58:01,882\nto get around that link failure and\nget us connected back to the root.\n\n1104\n00:58:01,882 --> 00:58:05,446\nAll right, the other thing that\ncould change is who the root is.\n\n1105\n00:58:05,446 --> 00:58:06,292\n>> Right.\n>> Right?\n\n1106\n00:58:06,292 --> 00:58:09,890\nIf the root changes, then things\nare gonna really start to change.\n\n1107\n00:58:09,890 --> 00:58:13,065\nSo let me do this really quick,\nbefore we start changing it,\n\n1108\n00:58:13,065 --> 00:58:16,510\nI'm gonna just dump this out into\nMicrosoft Paint or something.\n\n1109\n00:58:17,810 --> 00:58:20,235\nAnd all right, I'll sort this out later.\n\n1110\n00:58:20,235 --> 00:58:25,183\n[LAUGH] So\nthis was our first STP example, and\n\n1111\n00:58:25,183 --> 00:58:30,410\nI wanna have that to post\non the website later.\n\n1112\n00:58:30,410 --> 00:58:31,310\nAll right.\n\n1113\n00:58:31,310 --> 00:58:35,090\nSo let's say that we\ndecide to change the root.\n\n1114\n00:58:35,090 --> 00:58:38,510\nSo this topology right here is\nexactly what we have behind us.\n\n1115\n00:58:38,510 --> 00:58:41,250\nThe switches are behaving that way and\n\n1116\n00:58:41,250 --> 00:58:44,260\nI wanna change it and\nmake switch 3 the root.\n\n1117\n00:58:44,260 --> 00:58:48,235\nIf switch 3 becomes the root,\nthings are going to change, right.\n\n1118\n00:58:48,235 --> 00:58:51,905\nThe topology is going to\nadjust to correct for that.\n\n1119\n00:58:51,905 --> 00:58:53,528\nSo let's work through that Ronnie,\nwhat do you think?\n\n1120\n00:58:53,528 --> 00:58:54,747\n>> Sure, yup.\n\n1121\n00:58:54,747 --> 00:58:56,315\nSo, what can we do?\n\n1122\n00:58:56,315 --> 00:58:59,099\nWell, we could just turn off switch\nnumber 1 I guess, we could do that.\n\n1123\n00:58:59,099 --> 00:59:00,539\n>> [LAUGH]\n>> We don't wanna do that.\n\n1124\n00:59:01,750 --> 00:59:04,280\nFor us, let's say that what\nends up happening is what?\n\n1125\n00:59:04,280 --> 00:59:07,140\nIs that we can just simply\ngo to switch number 3, and\n\n1126\n00:59:07,140 --> 00:59:09,165\nperhaps change a priority, right?\n\n1127\n00:59:09,165 --> 00:59:13,637\n>> Yeah, if we change the priority, and\nI'm gonna show you guys the IEEE standard\n\n1128\n00:59:13,637 --> 00:59:17,900\nway, it's a little different in\nCisco world but with the standard.\n\n1129\n00:59:17,900 --> 00:59:20,410\nIf I change this priority down to 32,767,\nright, or\n\n1130\n00:59:20,410 --> 00:59:26,280\nif I just drop it all the way down to 1 or\nsomething like that, right?\n\n1131\n00:59:26,280 --> 00:59:30,418\nIf I drop its priority,\nit's now going to win the election.\n\n1132\n00:59:30,418 --> 00:59:32,520\n>> Right.\n>> It doesn't matter about MAC addresses\n\n1133\n00:59:32,520 --> 00:59:34,320\nanymore, cuz priority's the first thing.\n\n1134\n00:59:34,320 --> 00:59:36,060\nSo when its priority becomes 1,\n\n1135\n00:59:36,060 --> 00:59:40,370\nit's now beating the other guys, and\nit's now going to become the root.\n\n1136\n00:59:40,370 --> 00:59:44,570\nSo all of its ports will\nchange into designated ports\n\n1137\n00:59:44,570 --> 00:59:46,510\nthat are forwarding, okay.\n\n1138\n00:59:46,510 --> 00:59:51,030\nAnd the other switches out there are now\ngonna need to take corrective actions.\n\n1139\n00:59:51,030 --> 00:59:56,060\nSo for switch 1,\nit now has to calculate out a root port,\n\n1140\n00:59:56,060 --> 00:59:58,840\nwhich would be the port\nclosest to the root.\n\n1141\n00:59:58,840 --> 01:00:02,770\nAnd switch 2 would so the same thing,\nit would have to calculate out root port.\n\n1142\n01:00:02,770 --> 01:00:07,880\nSo this port that was blocking would\nnow become forwarding, all right.\n\n1143\n01:00:07,880 --> 01:00:12,080\nAnd then on the back end,\nthese guys are gonna change, right.\n\n1144\n01:00:12,080 --> 01:00:15,990\nIt's gonna try and make them designated\nports that are forwarding, but\n\n1145\n01:00:15,990 --> 01:00:16,758\nthere's a loop.\n\n1146\n01:00:16,758 --> 01:00:17,321\n>> Right.\n>> So\n\n1147\n01:00:17,321 --> 01:00:20,240\nit'll see the root BPDU is\npassing through, right.\n\n1148\n01:00:20,240 --> 01:00:26,762\nBecause the root BPDUs are going\nlike this and like this.\n\n1149\n01:00:26,762 --> 01:00:31,520\nSo they see that, they know there's a loop\nand so they've gotta calculate that out.\n\n1150\n01:00:31,520 --> 01:00:34,950\nIt's gonna be based on priority first,\nbut we've got a tie.\n\n1151\n01:00:34,950 --> 01:00:36,290\nAnd then MAC address.\n\n1152\n01:00:36,290 --> 01:00:39,550\nAnd we already know that switch 1 has\na better MAC address than switch 2.\n\n1153\n01:00:39,550 --> 01:00:42,730\nSwitch 2 is still the biggest loser, so\n\n1154\n01:00:42,730 --> 01:00:46,540\nit's gonna have to take\naction to solve the problem.\n\n1155\n01:00:46,540 --> 01:00:52,544\nAnd so its port that I flagged\nas a designated port forwarding\n\n1156\n01:00:52,544 --> 01:00:58,682\nis actually gonna be a non-designated\nport blocking there.\n\n1157\n01:00:58,682 --> 01:01:00,396\nAnd at the end of the day,\n\n1158\n01:01:00,396 --> 01:01:05,500\nthis is now the port that's getting\nshut off to prevent the loop, right.\n\n1159\n01:01:05,500 --> 01:01:08,866\nSo just changing the root changes our\ntopology and changes our traffic flow.\n\n1160\n01:01:12,509 --> 01:01:15,288\nAll right, there's another thing that can\ninfluence these decisions that we were\n\n1161\n01:01:15,288 --> 01:01:16,620\ntalking about during the break.\n\n1162\n01:01:16,620 --> 01:01:19,950\nWhich is the bandwidth of the lines, okay.\n\n1163\n01:01:19,950 --> 01:01:24,508\nEverything that we've done so far has\nbeen assuming that everything is equal,\n\n1164\n01:01:24,508 --> 01:01:27,170\nthat all links are created equal,\nall right?\n\n1165\n01:01:27,170 --> 01:01:29,760\nBut, all links aren't created equal.\n\n1166\n01:01:29,760 --> 01:01:34,130\nThere are variations and things that\nchange the way that our links work.\n\n1167\n01:01:34,130 --> 01:01:38,680\nFor example, let's add a little more\ndetail to our connections, okay.\n\n1168\n01:01:38,680 --> 01:01:43,520\nSo, I did all of these ports as Fa0/1,\nFa whatever.\n\n1169\n01:01:43,520 --> 01:01:45,690\nSo, they're Fast Ethernet,\nthey're 100MB lines.\n\n1170\n01:01:45,690 --> 01:01:46,351\n>> Right.\n\n1171\n01:01:46,351 --> 01:01:49,320\n>> Okay, but, what if they weren't?\n\n1172\n01:01:49,320 --> 01:01:55,982\nWhat if this was actually\na gigabit connection, all right?\n\n1173\n01:01:55,982 --> 01:02:02,507\nAnd maybe this was a gigabit connection,\nand this one, and this one.\n\n1174\n01:02:05,468 --> 01:02:10,058\nAll right, so I've got gig connections\nbetween switch 1 and switch 2, and\n\n1175\n01:02:10,058 --> 01:02:11,549\nswitch 1 and switch 3.\n\n1176\n01:02:11,549 --> 01:02:16,478\nBut I've only got 100MB connection\nbetween switch 2 and switch 3, all right.\n\n1177\n01:02:16,478 --> 01:02:20,552\nWell, the bandwidth of the line is\nactually put inside of the BPDU,\n\n1178\n01:02:20,552 --> 01:02:25,427\nit's one of the values inside the BPDU\nthat shift between switches, all right.\n\n1179\n01:02:25,427 --> 01:02:29,040\nBut it doesn't just say bandwidth,\nright, it says something different.\n\n1180\n01:02:29,040 --> 01:02:30,480\n>> Yeah.\n\n1181\n01:02:30,480 --> 01:02:35,300\n>> So, what's actually in there is\nwhat's called the path cost, all right.\n\n1182\n01:02:35,300 --> 01:02:38,650\nThe cost is a number that's based on\nbandwidth and it's kind of tricky.\n\n1183\n01:02:38,650 --> 01:02:41,190\nThis is what we were talking\nabout during the break.\n\n1184\n01:02:41,190 --> 01:02:44,594\nThe IEEE, right,\nthe guys who defined 802.1D,\n\n1185\n01:02:44,594 --> 01:02:48,089\nthey don't actually have\nan official number, right.\n\n1186\n01:02:48,089 --> 01:02:49,520\n>> Yeah.\n>> So I pulled this up during the break.\n\n1187\n01:02:49,520 --> 01:02:53,573\nThis is the IEEE 802.1D standard,\nthe official standard.\n\n1188\n01:02:53,573 --> 01:02:58,960\nAnd what they give you is a series\nof recommendations, all right.\n\n1189\n01:02:58,960 --> 01:03:02,680\nThese are what they recommend you use for\nthe costs.\n\n1190\n01:03:02,680 --> 01:03:07,160\nBut at the end of the day it's up to\nthe vendors, Cisco, Juniper, HP, 3Com,\n\n1191\n01:03:07,160 --> 01:03:09,910\nwhoever, they can pick\nwhatever numbers they want.\n\n1192\n01:03:09,910 --> 01:03:11,810\nThey don't even have to pick\nin these recommendations,\n\n1193\n01:03:11,810 --> 01:03:13,800\nthey can do whatever the heck they want.\n\n1194\n01:03:13,800 --> 01:03:16,810\nThe problem is, if vendor A, Cisco,\n\n1195\n01:03:16,810 --> 01:03:20,870\nuses one set of values, and Juniper\nuses a different set of values, and\n\n1196\n01:03:20,870 --> 01:03:23,039\n3Com uses a different one,\nyou can start to get some problems.\n\n1197\n01:03:24,450 --> 01:03:28,630\nSo if you're all Cisco or all Juniper or\nwhatever, you don't worry about it much,\n\n1198\n01:03:28,630 --> 01:03:29,380\nit just works, right.\n\n1199\n01:03:29,380 --> 01:03:33,188\nBut if you're mixing vendors you may need\nto go in and manually set these cost\n\n1200\n01:03:33,188 --> 01:03:36,895\nvalues so that you know it's the same\nacross all your equipment, right.\n\n1201\n01:03:36,895 --> 01:03:41,655\nCisco doesn't have like\na super official table, but\n\n1202\n01:03:41,655 --> 01:03:46,636\nI pulled up here somewhere,\nwhat did I do, there we go.\n\n1203\n01:03:46,636 --> 01:03:50,595\nThese are all the default values for\na Cisco configuration.\n\n1204\n01:03:50,595 --> 01:03:55,090\nAnd so they're showing the default\nswitch priority of 32,768, right.\n\n1205\n01:03:56,460 --> 01:04:00,190\nAnd right here,\nI can see the default line costs.\n\n1206\n01:04:00,190 --> 01:04:03,359\nA 10-megabit line has a cost of 100,\n\n1207\n01:04:03,359 --> 01:04:09,350\n100-megabit line has a cost of 19 and\na 1-gigabit line has a cost of four.\n\n1208\n01:04:09,350 --> 01:04:13,548\nSo, if I go back and I look at my diagram,\n\n1209\n01:04:13,548 --> 01:04:17,391\nif I want to add the costs into these.\n\n1210\n01:04:17,391 --> 01:04:20,735\nThe cost for\n\n1211\n01:04:20,735 --> 01:04:26,090\na gig line is four.\n\n1212\n01:04:26,090 --> 01:04:30,350\nAnd I've got two gig lines, right?\n\n1213\n01:04:30,350 --> 01:04:31,440\nThat's not the only one.\n\n1214\n01:04:31,440 --> 01:04:35,340\nSo I've got this one over here,\nthat also has a cost of four.\n\n1215\n01:04:35,340 --> 01:04:39,690\nAnd then I've got my one down here at\nthe bottom, which is one 100 megabit.\n\n1216\n01:04:39,690 --> 01:04:44,010\nAnd so\nit's gonna actually have a cost of 19.\n\n1217\n01:04:44,010 --> 01:04:45,700\nAnd think of it in terms of money.\n\n1218\n01:04:45,700 --> 01:04:50,760\nThe less something costs in money\nthe better the better option it is,\n\n1219\n01:04:50,760 --> 01:04:52,370\nwell, it might be crap.\n\n1220\n01:04:52,370 --> 01:04:55,600\nWho knows.\nBut the idea is that if I can spend $4 to\n\n1221\n01:04:55,600 --> 01:04:58,190\nget somewhere, that's better than\npaying $19 to get somewhere,\n\n1222\n01:04:58,190 --> 01:05:00,190\nespecially when it's the same designation,\nright?\n\n1223\n01:05:00,190 --> 01:05:02,290\nIt doesn't matter which path I take.\n\n1224\n01:05:02,290 --> 01:05:06,200\n>> For us this is important and when\ndeciding that a non designated port, or\n\n1225\n01:05:06,200 --> 01:05:07,570\na designated port, here.\n\n1226\n01:05:07,570 --> 01:05:11,650\nIt's always about the lowest cost\nback to the route bridge itself.\n\n1227\n01:05:11,650 --> 01:05:15,860\nSo even when we actually took a look at\nthe route port between those non-route\n\n1228\n01:05:15,860 --> 01:05:18,990\nbridges, the lowest cost\ncoming back is really the key.\n\n1229\n01:05:18,990 --> 01:05:22,647\nSo now, Don,\nhere's how it changes our topology, right?\n\n1230\n01:05:22,647 --> 01:05:25,490\n>> Yeah, when we calculate our route port.\n\n1231\n01:05:25,490 --> 01:05:28,350\nSwitch two has to figure\nout the route port.\n\n1232\n01:05:28,350 --> 01:05:31,710\nIt knows that switch three\nis the route right now.\n\n1233\n01:05:31,710 --> 01:05:35,250\nSo switch two has to figure out of its two\nports which is the best one to get there.\n\n1234\n01:05:35,250 --> 01:05:38,692\nWell, when switch three\nsends out its BPDU,\n\n1235\n01:05:38,692 --> 01:05:43,778\nthis BPDU comes into switch two on\na port that's got a cost of 19.\n\n1236\n01:05:43,778 --> 01:05:46,515\nSo it says, all right,\nhere's one way to get to the route and\n\n1237\n01:05:46,515 --> 01:05:47,655\nit's got a cost of 19.\n\n1238\n01:05:47,655 --> 01:05:48,572\nAll right.\n\n1239\n01:05:48,572 --> 01:05:54,700\nThe other way though, it comes up here\ninto switch one with a cost of four.\n\n1240\n01:05:54,700 --> 01:05:59,700\nSwitch one forwards it along\nwith that cost of four, so\n\n1241\n01:05:59,700 --> 01:06:04,800\nwhen switch two receives it, it's\nreceiving it already with a cost of four,\n\n1242\n01:06:04,800 --> 01:06:07,860\non a line with a cost of four,\nso now it's got a cost of eight.\n\n1243\n01:06:07,860 --> 01:06:09,430\nIt's an aggregate number.\n\n1244\n01:06:09,430 --> 01:06:12,470\nIt add's up each link along the way.\n\n1245\n01:06:12,470 --> 01:06:14,610\nSo, just like Ronnie said,\nwe got a choice.\n\n1246\n01:06:14,610 --> 01:06:18,380\nCost of eight versus a cost of 19,\nwhich one is better?\n\n1247\n01:06:18,380 --> 01:06:23,860\n>> And so in this instance switch\nnumber two would pick gigabit 02 to\n\n1248\n01:06:23,860 --> 01:06:27,880\nactually become our root port\nat that particular point and\n\n1249\n01:06:27,880 --> 01:06:30,790\nthen that means that F A zero slash one..\n\n1250\n01:06:30,790 --> 01:06:34,840\nWill now change and become our blocking\nport, or our non-designated port.\n\n1251\n01:06:34,840 --> 01:06:38,010\nWell, we're not at that point yet\nbut I guess we can.\n\n1252\n01:06:38,010 --> 01:06:39,130\nYep, for us.\n\n1253\n01:06:39,130 --> 01:06:39,700\n>> Yep.\n\n1254\n01:06:39,700 --> 01:06:41,472\n>> On this one.\n[NOISE] So yeah, so\n\n1255\n01:06:41,472 --> 01:06:46,124\neven though we've got a direct\ncable running right to the root,\n\n1256\n01:06:46,124 --> 01:06:51,466\nwe might still block it if we know\nthere's a better connection out there,\n\n1257\n01:06:51,466 --> 01:06:55,430\na good connection vs this\n100 megabit connection,\n\n1258\n01:06:55,430 --> 01:06:58,558\nso all little things that kinda factor in.\n\n1259\n01:06:58,558 --> 01:07:01,250\nAnd do we have to configure this?\n\n1260\n01:07:01,250 --> 01:07:02,300\nAbsolutely not.\n\n1261\n01:07:02,300 --> 01:07:04,300\nThe defaults are all there.\n\n1262\n01:07:04,300 --> 01:07:06,240\nIt works the way that it's laid out.\n\n1263\n01:07:06,240 --> 01:07:08,400\nIf you're dealing with multiple vendors,\nyou might have to get in and\n\n1264\n01:07:08,400 --> 01:07:09,120\nmanipulate it.\n\n1265\n01:07:09,120 --> 01:07:11,600\nFor those of you that go\non to do like the CCMP,\n\n1266\n01:07:11,600 --> 01:07:13,750\nyou'll start to see those manipulations.\n\n1267\n01:07:13,750 --> 01:07:15,190\nOn the CCNA exam, you won't.\n\n1268\n01:07:15,190 --> 01:07:18,230\nThey assume that it's gonna\nbe all Cisco equipment so\n\n1269\n01:07:18,230 --> 01:07:19,810\nyou don't really have to\ngo adjust these values.\n\n1270\n01:07:19,810 --> 01:07:21,830\nBut you do have to know\nthey're there right?\n\n1271\n01:07:21,830 --> 01:07:25,460\nIf they give you a topology and say,\nwhich port is going to be shut off,\n\n1272\n01:07:25,460 --> 01:07:27,470\nyou need to be paying\nattention to who's the route?\n\n1273\n01:07:27,470 --> 01:07:29,490\nSo, the priorities on the mac addresses.\n\n1274\n01:07:29,490 --> 01:07:31,950\nAnd then the cost of the lines,\nthe bandwidth.\n\n1275\n01:07:31,950 --> 01:07:36,570\nKnowing that we're going to pick the best\nbandwidth length over a crummy one.\n\n1276\n01:07:36,570 --> 01:07:40,070\n>> And don't put it past them on\nthe simulation to make you verify\n\n1277\n01:07:40,070 --> 01:07:42,350\nthat this is actually\ngonna be the truth here.\n\n1278\n01:07:42,350 --> 01:07:46,010\nSo they may just show you a topology and\nask you to go ahead and figure it out.\n\n1279\n01:07:46,010 --> 01:07:48,680\nBy getting in and\ndoing the simulations here,\n\n1280\n01:07:48,680 --> 01:07:52,060\nin terms of doing the show spanning tree\nso that you can see what's going on.\n\n1281\n01:07:52,060 --> 01:07:54,920\nAnd then, picking the actual\nproper port that we need to.\n\n1282\n01:07:54,920 --> 01:07:56,720\n>> Now, let's go a little more complex,\nRonnie.\n\n1283\n01:07:56,720 --> 01:07:59,700\n>> Sure.\n>> Let's say, cuz we can,\n\n1284\n01:07:59,700 --> 01:08:01,810\nthat this link over here\nbetween switch two and\n\n1285\n01:08:01,810 --> 01:08:05,420\nswitch three, let's say that\nit's actually 100 megabit also.\n\n1286\n01:08:05,420 --> 01:08:08,210\n>> Okay.\n>> Okay, so instead of GI,\n\n1287\n01:08:08,210 --> 01:08:10,400\nwe're gonna put it back to FA.\n\n1288\n01:08:10,400 --> 01:08:12,430\nAll right.\n\n1289\n01:08:12,430 --> 01:08:14,410\nSo they're just fast Ethernet lines.\n\n1290\n01:08:14,410 --> 01:08:16,680\nAnd that means it's cost\nis gonna go back up to 19.\n\n1291\n01:08:16,680 --> 01:08:18,000\n>> Yep.\n>> All right,\n\n1292\n01:08:18,000 --> 01:08:22,383\nnow, switch two has two\npaths to the route.\n\n1293\n01:08:22,383 --> 01:08:23,348\nAll right.\n\n1294\n01:08:23,348 --> 01:08:29,390\nOn switch two, one of the ports is fast\nEthernet, and one of the ports is gigabit.\n\n1295\n01:08:29,390 --> 01:08:31,160\nSo 100 megabit versus gigabit.\n\n1296\n01:08:31,160 --> 01:08:34,410\nSo from switch two,\nhow do it know which one to pick?\n\n1297\n01:08:34,410 --> 01:08:38,470\nIf it was just based on its own ports,\nit might make the wrong decision here.\n\n1298\n01:08:38,470 --> 01:08:42,040\nIt might choose,\nthis gigabit link even though downstream,\n\n1299\n01:08:42,040 --> 01:08:44,050\nit's got a 100 megabit link down there.\n\n1300\n01:08:44,050 --> 01:08:48,901\nBut because the cost is an aggregate\nvalue cuz it adds up with each hop along\n\n1301\n01:08:48,901 --> 01:08:53,910\nthe way not truly hops but we can call\nthem that the bottom link here would have\n\n1302\n01:08:53,910 --> 01:08:58,626\na cost of 19 the top link would have\n19 plus four it would have a cost.\n\n1303\n01:08:58,626 --> 01:09:02,374\nOf 23, 23 versus 19 it would\npick this bottom link,\n\n1304\n01:09:02,374 --> 01:09:07,660\neven though it's a 100 megabit line\nversus that gig line locally right there.\n\n1305\n01:09:09,110 --> 01:09:13,010\n>> Now when we face this on the exam, one\nof the things I recommend, even though you\n\n1306\n01:09:13,010 --> 01:09:17,260\ndon't have a lot of time, at least\nif you can see the diagram it helps.\n\n1307\n01:09:17,260 --> 01:09:17,760\nBut go ahead and\n\n1308\n01:09:17,760 --> 01:09:22,610\nmake sure you know those port costs that\nCisco generally uses, right off the bat,\n\n1309\n01:09:22,610 --> 01:09:26,140\ncuz they may just show you the interfaces\nand you're not exactly sure.\n\n1310\n01:09:26,140 --> 01:09:29,334\nGo ahead and make a little tiny diagram\nand go okay, these are gonna be four and\n\n1311\n01:09:29,334 --> 01:09:30,377\nthese are gonna be 19.\n\n1312\n01:09:30,377 --> 01:09:32,339\nThat will help you out right away.\n\n1313\n01:09:32,339 --> 01:09:35,773\nYou don't have to draw the full typology\ncuz it'd be right there in front of you,\n\n1314\n01:09:35,773 --> 01:09:39,020\nbut you do need to at least pay attention\nto that so you can pick the right one.\n\n1315\n01:09:40,050 --> 01:09:41,460\n>> Yep, absolutely.\n\n1316\n01:09:41,460 --> 01:09:43,570\nLet's do some of the things\nthat are involved.\n\n1317\n01:09:43,570 --> 01:09:45,610\nThat's what's all going\non in the background.\n\n1318\n01:09:45,610 --> 01:09:48,990\nAnd our switches really did that\nautomatically as they moved through.\n\n1319\n01:09:50,090 --> 01:09:56,010\nNow, everything that we've been talking\nabout so far has been, based on 802.1D,\n\n1320\n01:09:56,010 --> 01:10:01,090\nthe IEEE official standard\nSpanning Tree Protocol.\n\n1321\n01:10:01,090 --> 01:10:02,385\n>> But Cisco doesn't use that.\n\n1322\n01:10:02,385 --> 01:10:05,040\n[LAUGH]\n>> Cisco doesn't actually use that.\n\n1323\n01:10:05,040 --> 01:10:09,080\nSo in the early days, when Spanning Tree\nwas originally being designed and\n\n1324\n01:10:09,080 --> 01:10:10,550\ndeveloped, Cisco was involved in it.\n\n1325\n01:10:10,550 --> 01:10:12,830\nThey're the market leader\nof networking stuff.\n\n1326\n01:10:12,830 --> 01:10:16,240\nAnd they said, all right, hey,\nthat's good, but you know what?\n\n1327\n01:10:16,240 --> 01:10:19,550\nOur switches support VLANs.\n\n1328\n01:10:19,550 --> 01:10:20,300\n>> Okay?\n\n1329\n01:10:20,300 --> 01:10:24,550\nAnd with VLANs, just because you have a\nlink between a switch doesn't necessarily\n\n1330\n01:10:24,550 --> 01:10:25,600\nmean there's a loop, right?\n\n1331\n01:10:25,600 --> 01:10:27,030\nLet's go back to my diagram.\n\n1332\n01:10:27,030 --> 01:10:31,490\nIf this link right here\nwas on VLAN two and\n\n1333\n01:10:31,490 --> 01:10:36,320\nthis link down here was on VLAN one,\ndo I have a loop, no?\n\n1334\n01:10:36,320 --> 01:10:38,130\nThey're two different VLANs right?\n\n1335\n01:10:38,130 --> 01:10:41,380\nSo you're not having a loop there.\n\n1336\n01:10:41,380 --> 01:10:46,180\nCisco said if I just run one\ninstance of spanning tree,\n\n1337\n01:10:46,180 --> 01:10:48,885\nit may look like I have\na loop when I don't.\n\n1338\n01:10:48,885 --> 01:10:49,575\nAll right.\n\n1339\n01:10:49,575 --> 01:10:53,025\nWe need spanning tree\nprotocol to be VLAN aware,\n\n1340\n01:10:53,025 --> 01:10:56,935\nwe want to run more than\none copy of spanning tree.\n\n1341\n01:10:56,935 --> 01:11:02,365\nWe want to run one copy of spanning tree\nfor every VLAN present on our switch.\n\n1342\n01:11:02,365 --> 01:11:03,961\nRight.\n>> So Cisco came out with their own\n\n1343\n01:11:03,961 --> 01:11:06,328\nproprietary version of it,\nessentially is what they did.\n\n1344\n01:11:06,328 --> 01:11:09,050\n>> Yeah, and it's a good idea, it's smart.\n\n1345\n01:11:09,050 --> 01:11:11,560\nBut at the time it was a little\nbit ahead of it's time, right?\n\n1346\n01:11:11,560 --> 01:11:12,120\n>> Yeah.\n>> So\n\n1347\n01:11:12,120 --> 01:11:15,285\nthe I EEE said,\nwell most people don't support VLANs.\n\n1348\n01:11:15,285 --> 01:11:18,040\n>> [LAUGH]\n>> And even if they did, most switches\n\n1349\n01:11:18,040 --> 01:11:21,410\ndon't have the processor power in them to\nbe able to handle more than one instance.\n\n1350\n01:11:21,410 --> 01:11:21,980\n>> Right.\n\n1351\n01:11:21,980 --> 01:11:22,900\n>> So we don't want to do it.\n\n1352\n01:11:22,900 --> 01:11:23,410\n>> Yeah.\n\n1353\n01:11:23,410 --> 01:11:26,145\n>> And Cisco said, well it's not our\nfault other people's stuff is crap.\n\n1354\n01:11:26,145 --> 01:11:27,610\n>> [LAUGH]\n>> We make good equipment.\n\n1355\n01:11:27,610 --> 01:11:28,140\n>> That's right.\n\n1356\n01:11:28,140 --> 01:11:31,260\n>> Our processors can handle it and\nwe want to run more than one copy of\n\n1357\n01:11:31,260 --> 01:11:34,348\nSpanning Tree, and so the IEEE said,\nwell good luck with that.\n\n1358\n01:11:34,348 --> 01:11:39,751\nWe are not gonna ratify that, so 802.one\nD is one instance of spanning tree for\n\n1359\n01:11:39,751 --> 01:11:42,414\nthe entire switch regardless of VLANs,\n\n1360\n01:11:42,414 --> 01:11:46,119\nand if you're using VLANs,\nit can make bad decisions.\n\n1361\n01:11:46,119 --> 01:11:48,999\nIt can block what looks like a loop\nwhen it actually isn't a loop.\n\n1362\n01:11:48,999 --> 01:11:54,944\nSo Cisco instead\n>> Created what they called PVSTP.\n\n1363\n01:11:54,944 --> 01:11:58,288\n>> [LAUGH]\n>> PVSV, let me add that our list.\n\n1364\n01:11:58,288 --> 01:12:01,299\nAt the bottom of the screen\nhere I had written I tripple E\n\n1365\n01:12:01,299 --> 01:12:04,398\n802.1D Loop Prevention\nSpanning Tree Protocol.\n\n1366\n01:12:04,398 --> 01:12:05,070\nRight.\n\n1367\n01:12:05,070 --> 01:12:09,295\nCisco's implementation\nis a little different.\n\n1368\n01:12:09,295 --> 01:12:12,918\n[CROSSTALK] Per VLAN so\nyou're running one copy for each vlan.\n\n1369\n01:12:12,918 --> 01:12:16,539\nPer VLAN spanning tree plus\nis what it's actually called.\n\n1370\n01:12:16,539 --> 01:12:17,220\nSo let me.\n\n1371\n01:12:17,220 --> 01:12:19,380\nWhere's my text tool,\nlet me write that here.\n\n1372\n01:12:19,380 --> 01:12:23,513\nSo we have PVST plus which is\n\n1373\n01:12:23,513 --> 01:12:28,737\nPer VLAN spanning tree protocol.\n\n1374\n01:12:31,475 --> 01:12:35,999\nAnd I know it looks like I left the p\noff of the n like PVST plus but\n\n1375\n01:12:35,999 --> 01:12:40,060\nthat's how Cisco writes it\nthey just do PVST plus.\n\n1376\n01:12:40,060 --> 01:12:42,835\nSo Per VLAN spanning tree plus.\n\n1377\n01:12:42,835 --> 01:12:44,065\nRight.\nThat's their upgrade.\n\n1378\n01:12:44,065 --> 01:12:46,360\n>> [LAUGH]\n>> And the neat thing about it is what\n\n1379\n01:12:46,360 --> 01:12:52,685\nthey do is they run one\ncopy of I triple E,\n\n1380\n01:12:52,685 --> 01:12:58,770\n802.1d standardized spanning tree\nprotocol for each VLAN on the switch.\n\n1381\n01:12:58,770 --> 01:13:03,270\nWhich means it is 100%\ncompatible with the standard.\n\n1382\n01:13:03,270 --> 01:13:08,009\nSo if you go out and you buy a switch\nthat's running 802.1d standard, and you\n\n1383\n01:13:08,009 --> 01:13:12,699\nplug it into a Cisco switch that's running\nPVST plus, they will work just fine.\n\n1384\n01:13:12,699 --> 01:13:15,380\nThey'll communicate.\nThey'll be happy.\n\n1385\n01:13:15,380 --> 01:13:19,740\nBut in between Cisco switches,\nthey're gonna make smarter decisions.\n\n1386\n01:13:19,740 --> 01:13:22,910\nThey're gonna recognize\nwhen VLANs are involved and\n\n1387\n01:13:22,910 --> 01:13:26,640\nnot block loops that don't exist, not shut\noff lines that shouldn't be shut off,\n\n1388\n01:13:26,640 --> 01:13:28,250\nso they're much more intelligent.\n\n1389\n01:13:29,312 --> 01:13:30,980\nAll right, the only negative is,\n\n1390\n01:13:30,980 --> 01:13:33,720\nyou are running more than\none copy of spanning tree.\n\n1391\n01:13:33,720 --> 01:13:35,960\nIt's like running the same\nprogram more than once.\n\n1392\n01:13:35,960 --> 01:13:37,960\nIf you've got the memory\nit's not big deal.\n\n1393\n01:13:37,960 --> 01:13:39,680\nAnd Cisco switches do.\n\n1394\n01:13:39,680 --> 01:13:41,615\nThird party switches a lot of times dont.\n\n1395\n01:13:41,615 --> 01:13:42,559\n>> Right.\n\n1396\n01:13:42,559 --> 01:13:47,340\n>> All right, so when I did a show\nspanning dash tree command earlier.\n\n1397\n01:13:47,340 --> 01:13:49,010\nLet me go back to some of these switches.\n\n1398\n01:13:49,010 --> 01:13:51,340\nWhen we ran show spanning dash tree.\n\n1399\n01:13:51,340 --> 01:13:52,140\nAll right.\n\n1400\n01:13:52,140 --> 01:13:53,600\nNotice what is says here.\n\n1401\n01:13:53,600 --> 01:13:56,870\nSpanning tree enabled,\nprotocol I triple E.\n\n1402\n01:13:56,870 --> 01:13:57,630\nAll right.\n\n1403\n01:13:58,830 --> 01:14:04,139\nThat's letting me know that spanning tree\nis running in I triple E 802.1d mode.\n\n1404\n01:14:04,139 --> 01:14:04,859\nAll right.\n\n1405\n01:14:04,859 --> 01:14:08,133\nAnd when you buy a Cisco switch,\nhow many VLANs does it have?\n\n1406\n01:14:08,133 --> 01:14:10,558\n[CROSSTALK]\n>> VLAN 1, so\n\n1407\n01:14:10,558 --> 01:14:15,226\nall the ports in VLAN 1 were running\none copy of spanning tree protocol,\n\n1408\n01:14:15,226 --> 01:14:19,970\nas far as we're concerned this is 802.1d,\nbut on the exam be aware,\n\n1409\n01:14:19,970 --> 01:14:25,080\nthis is not actually 802.1d\n>> This is Per VLAN spanning tree.\n\n1410\n01:14:25,080 --> 01:14:25,860\nAnd does that show?\n\n1411\n01:14:25,860 --> 01:14:28,280\nI don't think that shows up in the config,\ndoes it?\n\n1412\n01:14:28,280 --> 01:14:29,600\n>> Yes, I think it does.\n\n1413\n01:14:29,600 --> 01:14:30,950\n>> Oh yes it does, right there.\n\n1414\n01:14:30,950 --> 01:14:34,267\nSo in the config, spanning-tree mode PVST,\n\n1415\n01:14:34,267 --> 01:14:39,570\nright there letting us know, and\nthen see, I left that P off on the end.\n\n1416\n01:14:39,570 --> 01:14:40,736\nI'm not crazy.\n\n1417\n01:14:40,736 --> 01:14:43,701\n>> [LAUGH]\n>> That is letting us know that we\n\n1418\n01:14:43,701 --> 01:14:46,837\nare running in Per VLAN Spanning Tree.\n\n1419\n01:14:46,837 --> 01:14:47,920\n>> Yeah.\n>> Now, we don't see it,\n\n1420\n01:14:47,920 --> 01:14:49,410\ncuz we only have one VLAN, right.\n\n1421\n01:14:49,410 --> 01:14:51,600\nLet's say, let's say we add a VLAN.\n\n1422\n01:14:51,600 --> 01:14:52,370\nWhat switch am I on?\n\n1423\n01:14:52,370 --> 01:14:53,780\nNumber one.\n\n1424\n01:14:53,780 --> 01:14:57,090\nSo let's take port number 12 here.\n\n1425\n01:14:57,090 --> 01:15:01,460\n[COUGH] I'm gonna take port number 12 and\njust stick it into a different VLAN.\n\n1426\n01:15:01,460 --> 01:15:07,670\nOh, hang on a minute,\nthat's not a true loop back.\n\n1427\n01:15:07,670 --> 01:15:12,180\nLet's go into fa0/12, and\n\n1428\n01:15:12,180 --> 01:15:18,533\nI'll just say, Switch port access VLAN 2.\n\n1429\n01:15:18,533 --> 01:15:22,148\nAlright, so it just created another\nVLAN and this port is in it but\n\n1430\n01:15:22,148 --> 01:15:27,140\nunless I give it a link light or something\nit's not gonna come up and be happy is it?\n\n1431\n01:15:27,140 --> 01:15:29,510\nYou got an extra cable\nyou can stick in that?\n\n1432\n01:15:29,510 --> 01:15:31,310\n>> You know, I was looking for my-\n>> You know what?\n\n1433\n01:15:31,310 --> 01:15:32,300\nIt's not a loop.\n\n1434\n01:15:32,300 --> 01:15:35,040\nI could run one of\nthe loopback cables in there.\n\n1435\n01:15:35,040 --> 01:15:35,810\nLet's do that.\nHere.\n\n1436\n01:15:35,810 --> 01:15:36,556\nI'm gonna break this loop.\n\n1437\n01:15:42,179 --> 01:15:42,841\nThere.\n\n1438\n01:15:42,841 --> 01:15:45,130\nThat'll bring it up.\n\n1439\n01:15:45,130 --> 01:15:49,220\nAlright, so that one's in there and that\nport will come up here in just a moment.\n\n1440\n01:15:49,220 --> 01:15:52,169\nBut if I do a show of VLAN,\nI can see VLAN two and\n\n1441\n01:15:52,169 --> 01:15:55,920\nport number 12 is not in there just yet\nbut it will soon.\n\n1442\n01:15:55,920 --> 01:15:58,930\nIt's doing its loop Detection,\nand all that.\n\n1443\n01:15:58,930 --> 01:16:00,830\nBut, actually, hang on a second.\n\n1444\n01:16:00,830 --> 01:16:03,986\nLet's get into that and\nmake sure it's not trying to trunk.\n\n1445\n01:16:12,007 --> 01:16:13,452\nI'm just gonna reset that port real quick.\n\n1446\n01:16:16,761 --> 01:16:17,527\nAll right.\nSo,\n\n1447\n01:16:17,527 --> 01:16:23,150\nwhen that Switch port comes\nup It will be in VLAN two.\n\n1448\n01:16:23,150 --> 01:16:23,925\nThere it is.\n\n1449\n01:16:23,925 --> 01:16:29,070\nFa0/12 is in VLAN two so\nI've now got an active second VLAN and\n\n1450\n01:16:29,070 --> 01:16:33,930\nwhen I run show spanning-tree,\nhere's my VLAN 1 output,\n\n1451\n01:16:33,930 --> 01:16:37,000\njust like before, but\nsee I've got a more tab now?\n\n1452\n01:16:37,000 --> 01:16:37,880\nOr, not tab.\n\n1453\n01:16:37,880 --> 01:16:39,340\nBut prompt, whatever.\n\n1454\n01:16:39,340 --> 01:16:43,960\nWhen I move forward,\nhere's my spanning tree output for VLAN 2.\n\n1455\n01:16:43,960 --> 01:16:50,280\nI'm running a second copy\nof spanning tree IEEE.21D.\n\n1456\n01:16:50,280 --> 01:16:50,953\nBut I'm running from VLAN two.\n\n1457\n01:16:53,519 --> 01:16:57,779\nAll right, so it's now tracking loops and\nduplicates and all that stuff based on\n\n1458\n01:16:57,779 --> 01:17:01,770\nthis second port, so it's doing\na lot more intelligent stuff here.\n\n1459\n01:17:01,770 --> 01:17:03,870\nJust trying to track that and\nkeep track of it.\n\n1460\n01:17:03,870 --> 01:17:06,860\nNow if I don't have any\nactive ports in a VLAN, so\n\n1461\n01:17:06,860 --> 01:17:09,200\nthat's why I was plugging in\nthis cable in the background.\n\n1462\n01:17:09,200 --> 01:17:10,820\nIf I take this port out.\n\n1463\n01:17:10,820 --> 01:17:14,305\nIf there's no active ports in the VLAN,\nthe VLAN goes offline.\n\n1464\n01:17:14,305 --> 01:17:14,810\n>> [LAUGH]\n>> And\n\n1465\n01:17:14,810 --> 01:17:17,610\nthe Spanning Tree instance\nport will go offline also.\n\n1466\n01:17:17,610 --> 01:17:21,110\nNo sense running Spanning Tree if\nthere's no active port in there, right.\n\n1467\n01:17:21,110 --> 01:17:26,510\nAnd that should happen fairly quickly,\nthere's VLAN 1 and\n\n1468\n01:17:26,510 --> 01:17:31,690\noh, you know what I've got a trunk port\nand the trunk port is carrying VLAN 2 so\n\n1469\n01:17:31,690 --> 01:17:35,626\nit's gonna stay up so I actually didn't\nhave to run that cable after all.\n\n1470\n01:17:35,626 --> 01:17:36,529\n[LAUGH]\n>> There we go.\n\n1471\n01:17:36,529 --> 01:17:40,344\nAll right, so remember I mentioned there\nwere five different modes of Spanning Tree\n\n1472\n01:17:40,344 --> 01:17:41,700\nat the beginning of the show.\n\n1473\n01:17:41,700 --> 01:17:46,140\nWell, it's really not that\nbad because 802.1d and\n\n1474\n01:17:46,140 --> 01:17:50,500\nPer VLAN Spanning Tree Plus,\nPVST plus, are really the same thing,\n\n1475\n01:17:50,500 --> 01:17:56,510\nyou're just running more than one\ncopy of 802.1d under PVST plus.\n\n1476\n01:17:56,510 --> 01:17:59,800\n>> Now Don, when we talk about\nthe idea of more Spanning Tree modes,\n\n1477\n01:18:00,920 --> 01:18:03,320\nwe actually have this proprietary version.\n\n1478\n01:18:03,320 --> 01:18:07,640\nBut then we realize and the IEEE said,\nlook, 30 seconds too long, right?\n\n1479\n01:18:07,640 --> 01:18:08,750\n>> Yep.\n>> Yeah.\n\n1480\n01:18:08,750 --> 01:18:13,740\n>> So, there is a replacement for\nSpanning 801.2d and\n\n1481\n01:18:13,740 --> 01:18:18,022\nthat is 802.1w,\nrapid Spanning Tree Protocol.\n\n1482\n01:18:18,022 --> 01:18:20,830\n>> [LAUGH]\n>> It was a revisit that they did to try\n\n1483\n01:18:20,830 --> 01:18:25,400\nand make the protocol faster and\nit's what we'll wanna run in\n\n1484\n01:18:25,400 --> 01:18:28,570\na lot of cases cuz it is much much\nmore quick in making its decision.\n\n1485\n01:18:28,570 --> 01:18:31,620\nBut looking at the clock we\nare right up on break time.\n\n1486\n01:18:31,620 --> 01:18:34,170\nSo, why don't we stop here.\n\n1487\n01:18:34,170 --> 01:18:36,460\nWhen we get back,\nI wanna do a demonstration.\n\n1488\n01:18:36,460 --> 01:18:37,708\n>> Okay.\n>> I want to show how long it takes to\n\n1489\n01:18:37,708 --> 01:18:38,950\nfail over a regular Spanning Tree.\n\n1490\n01:18:38,950 --> 01:18:40,744\n>> Oh yeah.\n>> Then we'll show them rapid, so\n\n1491\n01:18:40,744 --> 01:18:43,210\nthey can see the blazing\nexcitement of rapid!\n\n1492\n01:18:43,210 --> 01:18:44,030\n>> Sounds great.\n\n1493\n01:18:44,030 --> 01:18:45,660\nThat's right.\n>> So, ladies and gentlemen stay tuned.\n\n1494\n01:18:45,660 --> 01:18:47,127\nWhen we get back, rapid spanning tree!\n\n1495\n01:18:47,127 --> 01:18:54,900\n[MUSIC]\n\n1496\n01:18:54,900 --> 01:18:56,322\nAll right, welcome back everybody.\n\n1497\n01:18:56,322 --> 01:19:01,580\nSo 802.1d, Spanning Tree Protocol,\nbeen around a long time.\n\n1498\n01:19:01,580 --> 01:19:06,101\nIt's main flaw really has just been how\nlong it takes to recognize a problem and\n\n1499\n01:19:06,101 --> 01:19:07,980\nfail over from it, right.\n\n1500\n01:19:07,980 --> 01:19:10,690\nSo I mentioned at the beginning of\nthe show it can take 30 seconds,\n\n1501\n01:19:10,690 --> 01:19:13,100\nit can take 90 seconds,\nit takes a little while.\n\n1502\n01:19:13,100 --> 01:19:15,456\nSo I wanted to show you guys that, and\n\n1503\n01:19:15,456 --> 01:19:19,948\nthen we're gonna convert our switches\nover into the newer standard.\n\n1504\n01:19:19,948 --> 01:19:20,615\nRight?\n>> Yeah.\n\n1505\n01:19:20,615 --> 01:19:26,810\n>> So the IEEE passed 802.1w\nrapid Spanning Tree Protocol.\n\n1506\n01:19:26,810 --> 01:19:28,980\nAnd, like it's name implies,\nit's just a lot faster.\n\n1507\n01:19:28,980 --> 01:19:30,170\n>> Yeah.\n>> It makes that decision much more\n\n1508\n01:19:30,170 --> 01:19:32,490\nquickly, which is better for us.\n\n1509\n01:19:32,490 --> 01:19:35,542\nAll right, so going back to my diagram for\na second, we've got a loop.\n\n1510\n01:19:35,542 --> 01:19:39,080\nAll right, and the loop is between switch\none, switch two, and switch three.\n\n1511\n01:19:39,080 --> 01:19:41,682\nAnd it's already shut off\na port to correct that.\n\n1512\n01:19:41,682 --> 01:19:46,032\nAnd if I take a look at switch two,\nwhich I've buried here somewhere in\n\n1513\n01:19:46,032 --> 01:19:50,528\nmy multitude of windows that are open-\nIf I take a look at switch two, and\n\n1514\n01:19:50,528 --> 01:19:55,322\nI'll just do a show spanning-tree,\nwhich I'll spell right, there we go,\n\n1515\n01:19:55,322 --> 01:20:01,280\nI can see how it's got fa0/2 as its root\nport, fa0/1 as its blocking port, right?\n\n1516\n01:20:01,280 --> 01:20:05,990\nNow, if we were running\nthe true 802.1D standard,\n\n1517\n01:20:05,990 --> 01:20:10,430\nthis would roll,\nwould be a non-designated port.\n\n1518\n01:20:10,430 --> 01:20:14,490\nBut Cisco switches track this\nwhole idea of an alternate, so\n\n1519\n01:20:14,490 --> 01:20:17,580\nthat this is a alternate path to\nfollow and that's not on the standard.\n\n1520\n01:20:17,580 --> 01:20:18,970\nBut we are gonna talk\nabout it in a minute.\n\n1521\n01:20:20,160 --> 01:20:22,880\nIt knows, that it can get to\nits destination by going this\n\n1522\n01:20:22,880 --> 01:20:26,100\nother way in the event that\na problem occurs, right?\n\n1523\n01:20:26,100 --> 01:20:31,550\nIf something happens to fa0/2, like if I\nwere to reach back here and unplug it,\n\n1524\n01:20:32,740 --> 01:20:37,870\nwhen I do that,\nit knows that a issue has occurred,\n\n1525\n01:20:37,870 --> 01:20:42,220\nand actually I've just gotten locked out\nof the switch cuz that was my connection.\n\n1526\n01:20:42,220 --> 01:20:44,996\nMy connection to the switch\nwas through fa0/2.\n\n1527\n01:20:44,996 --> 01:20:48,430\nFa0/1 is still being blocked so\nI can't get in it.\n\n1528\n01:20:48,430 --> 01:20:51,950\nAnd I'm watching on the switch back here,\nits got a little orange light, and\n\n1529\n01:20:51,950 --> 01:20:55,630\nas long as that light stays orange\nthat means that port is blocking.\n\n1530\n01:20:55,630 --> 01:21:00,680\nAnd so I basically just have to sit here\nand watch and wait until it comes back up.\n\n1531\n01:21:00,680 --> 01:21:04,510\nAnd I'll see it come it back cuz\nI'll be able to ping it and.\n\n1532\n01:21:06,030 --> 01:21:06,770\nThere we go.\n\n1533\n01:21:06,770 --> 01:21:10,690\nI'm just gonna start a continual ping, and\nthe light actually just flipped to green,\n\n1534\n01:21:10,690 --> 01:21:14,230\nso any time now I should be able\nto get back in, there we go.\n\n1535\n01:21:14,230 --> 01:21:15,940\nSo how long did that take though,\n\n1536\n01:21:15,940 --> 01:21:21,530\nfrom when I first entered the command to\nwhen I was finally able to ping it again?\n\n1537\n01:21:21,530 --> 01:21:24,700\nIt didn't seem like a full,\nwell it probably was a full 30 seconds.\n\n1538\n01:21:24,700 --> 01:21:28,050\nSo it was at least 30 seconds,\nit may have been longer.\n\n1539\n01:21:28,050 --> 01:21:32,790\nBut that's kind of an idea of how long\nthat takes, it does take a little while.\n\n1540\n01:21:32,790 --> 01:21:36,530\n>> And Don if you go back to that\nswitch two, you can actually see that\n\n1541\n01:21:36,530 --> 01:21:41,410\nthe timer right there on the bridge ID,\non the hello time and the max age time and\n\n1542\n01:21:41,410 --> 01:21:46,090\nthen that four delay and stuff, that's\nactually what helps us to know about\n\n1543\n01:21:46,090 --> 01:21:50,460\nthe timing that it might take for\nus to be able to get through there,\n\n1544\n01:21:50,460 --> 01:21:53,120\nwhen it actually goes through the,\ndifferent port states again.\n\n1545\n01:21:54,230 --> 01:21:59,980\n>> Yeah, and I kind of want to, redo that\nexample so we can see exactly how long,\n\n1546\n01:21:59,980 --> 01:22:04,620\nlike if I had a continual ping running, we\ncould have seen the exact amount of time\n\n1547\n01:22:04,620 --> 01:22:09,100\nthat it took, I'm gonna bring that second\nlink up, and it's gonna flip back.\n\n1548\n01:22:09,100 --> 01:22:12,670\nOnce you bring that second link up,\nit's gonna correct it.\n\n1549\n01:22:14,760 --> 01:22:17,040\nSo here it's flipping back\nover here to the other one.\n\n1550\n01:22:17,040 --> 01:22:19,940\nAnd just flipping back over\nis gonna take a few moments.\n\n1551\n01:22:19,940 --> 01:22:21,960\nYou see me just dropping pings here.\n\n1552\n01:22:21,960 --> 01:22:24,960\nThis is not a quick and\ninstantaneous thing.\n\n1553\n01:22:24,960 --> 01:22:27,180\nYour end users will notice this.\n\n1554\n01:22:27,180 --> 01:22:30,310\nYour applications will time out,\nlike my as the sage client or\n\n1555\n01:22:30,310 --> 01:22:32,390\nTelnet client back here just did.\n\n1556\n01:22:32,390 --> 01:22:36,240\nAnd so we're losing data,\nwhile it flips back over to that line.\n\n1557\n01:22:36,240 --> 01:22:41,360\nNow if you are at home it's\nthe middle of the night by the time\n\n1558\n01:22:41,360 --> 01:22:46,420\nsomebody finds the on call list and\nwakes you up it's already fixed itself.\n\n1559\n01:22:46,420 --> 01:22:48,940\nSo it's a good protocol\ndon't get me wrong.\n\n1560\n01:22:48,940 --> 01:22:52,082\nIt takes 30 seconds to fix it or\nit takes a minute to fix it, big deal.\n\n1561\n01:22:52,082 --> 01:22:55,120\n>> Well at home, no real big deal but\nin a data center or\n\n1562\n01:22:55,120 --> 01:22:59,644\nin something like that which requires\nthe idea of high availability for us,\n\n1563\n01:22:59,644 --> 01:23:03,050\nthis could be more time than\nwe're willing to deal with.\n\n1564\n01:23:03,050 --> 01:23:04,840\n>> Exactly.\n\n1565\n01:23:04,840 --> 01:23:07,680\nIn that case,\nwe want something faster, and\n\n1566\n01:23:07,680 --> 01:23:12,830\nthat that's where 802.1w\nRapid Spanning Tree protocol comes in.\n\n1567\n01:23:12,830 --> 01:23:13,630\nOkay.\n\n1568\n01:23:13,630 --> 01:23:18,980\nRapid Spanning Tree protocol\ntracks a alternate line, okay?\n\n1569\n01:23:18,980 --> 01:23:23,430\nIt says, I know my root port,\nand here's second place.\n\n1570\n01:23:23,430 --> 01:23:25,200\nSecond place is my alternate.\n\n1571\n01:23:25,200 --> 01:23:29,810\nAnd if my root port ever drops, I will\nimmediately flip over to the alternate,\n\n1572\n01:23:29,810 --> 01:23:32,640\nno listening and learning, that's\nthe 30 second delay we're seeing here,\n\n1573\n01:23:32,640 --> 01:23:35,260\nwe'll just jump right over and do it.\n\n1574\n01:23:35,260 --> 01:23:41,580\nSo Rapid Spanning Tree protocol just makes\nfaster decisions and if I look at my page\n\n1575\n01:23:41,580 --> 01:23:46,640\nhere, so this is from Cisco's website, I'm\njust pulling up their official standard.\n\n1576\n01:23:46,640 --> 01:23:51,380\nUnder 802.1D, we had blocking,\nlistening, learning and forwarding.\n\n1577\n01:23:51,380 --> 01:23:54,830\nThey list disabled which is an unplugged\nport, I don't really count that one.\n\n1578\n01:23:54,830 --> 01:23:57,930\n>> Yeah.\n>> But, blocking, listening, learning and\n\n1579\n01:23:57,930 --> 01:23:59,820\nforwarding, under 802.1W, blocking and\n\n1580\n01:23:59,820 --> 01:24:03,650\nlistening are, they're combined and\ndisabled really.\n\n1581\n01:24:03,650 --> 01:24:09,290\nSo all three of those get combined into\none port state, discarding, right.\n\n1582\n01:24:09,290 --> 01:24:13,150\nAnd then it listens to see if there's a\nloop and then flips to forwarding, right?\n\n1583\n01:24:13,150 --> 01:24:15,090\nSo those are our stages.\n\n1584\n01:24:15,090 --> 01:24:19,510\nWe're faster there just because,\nwe're combining phases together and\n\n1585\n01:24:19,510 --> 01:24:21,000\nshrinking that time.\n\n1586\n01:24:21,000 --> 01:24:24,970\nBut the other thing is,\nin addition to a root port, and\n\n1587\n01:24:24,970 --> 01:24:30,070\nin addition to a designated port\nwe now have an alternate port.\n\n1588\n01:24:30,070 --> 01:24:33,340\nIt tracks who the other\nroute would be to get\n\n1589\n01:24:33,340 --> 01:24:34,840\nto the root bridge in\nthe event of a failure.\n\n1590\n01:24:35,890 --> 01:24:36,760\nAll right?\n\n1591\n01:24:36,760 --> 01:24:41,620\nNow, just like with 802.1D, Cisco said\nhey, we should really run it once for\n\n1592\n01:24:41,620 --> 01:24:43,780\neach VLAN, and the IEEE said no.\n\n1593\n01:24:43,780 --> 01:24:49,810\nSo you have, Official 802.1D and\nthen you have per VLAN span tree plus,\n\n1594\n01:24:49,810 --> 01:24:56,800\nwith rapid you've got rapid or RSTP, Rapid\nSpanning Tree plus, which is 802.1D and\n\n1595\n01:24:56,800 --> 01:25:02,730\nnow you have per VLAN Rapid Spanning Tree\nplus so PVRST plus right?\n\n1596\n01:25:02,730 --> 01:25:06,510\nSo this is our four modes it's really\njust two types of spanning tree,\n\n1597\n01:25:06,510 --> 01:25:10,900\njust whether you're running it\nonce per VLAN or once in total.\n\n1598\n01:25:10,900 --> 01:25:13,713\n>> It actually sounds like the comes\nup with stuff and it's discussed as eh,\n\n1599\n01:25:13,713 --> 01:25:14,545\nwe'll make it better.\n\n1600\n01:25:14,545 --> 01:25:15,141\n>> Yeah well make it better.\n\n1601\n01:25:15,141 --> 01:25:15,676\n>> We'll go our own way.\n\n1602\n01:25:15,676 --> 01:25:17,650\n>> Yeah we'll go our own way.\n\n1603\n01:25:17,650 --> 01:25:21,530\n>> So that's what's happening here and\nthis is really easy to do.\n\n1604\n01:25:21,530 --> 01:25:24,590\nNot every switch supports\nrapid spanning tree.\n\n1605\n01:25:24,590 --> 01:25:27,850\nAnd the rule of thumb is that you want all\nyour switches running the same type of\n\n1606\n01:25:27,850 --> 01:25:28,690\nSpanning Tree.\n\n1607\n01:25:28,690 --> 01:25:29,950\nThey're backwards compatible.\n\n1608\n01:25:29,950 --> 01:25:34,000\nRapid Spanning Tree protocol is compatible\nwith regular Spanning Tree protocol.\n\n1609\n01:25:34,000 --> 01:25:38,160\nBut, to get the best effect you'd like to\nhave all your switches running the same.\n\n1610\n01:25:38,160 --> 01:25:40,940\nAll three of our switches support it so\nit'd be pretty easy for\n\n1611\n01:25:40,940 --> 01:25:44,540\nme to go through and switch them to rapid.\n\n1612\n01:25:44,540 --> 01:25:52,388\nThe way we do that, Is by saying\nSpanning-Tree mode rapid-PVST.\n\n1613\n01:25:52,388 --> 01:25:55,899\nAll right, so I'm just gonna go\nthrough and flip each one of them,\n\n1614\n01:25:55,899 --> 01:25:59,427\nI've got to reconnect to this one\nsince I got disconnected earlier\n\n1615\n01:26:08,446 --> 01:26:11,133\nAnd the last one is gonna be switch one.\n\n1616\n01:26:17,267 --> 01:26:17,860\nAll right.\n\n1617\n01:26:17,860 --> 01:26:25,150\nNow as I flip those over,\nnotice we might drop a packet.\n\n1618\n01:26:25,150 --> 01:26:25,830\nOkay?\n\n1619\n01:26:25,830 --> 01:26:28,670\nThat's because it's having\nto recalculate the topology.\n\n1620\n01:26:28,670 --> 01:26:30,420\nIt's redoing the election,\n\n1621\n01:26:30,420 --> 01:26:33,810\nit's redoing a lot of stuff\nwhile it gets itself sorted out.\n\n1622\n01:26:33,810 --> 01:26:34,450\nOkay?\n\n1623\n01:26:34,450 --> 01:26:37,100\nSo I have to give it a moment\nwhile it stabilizes.\n\n1624\n01:26:37,100 --> 01:26:39,735\nThis is not something that you\nwant to issue in production.\n\n1625\n01:26:39,735 --> 01:26:42,010\n>> [LAUGH]\n>> If you do it in production,\n\n1626\n01:26:42,010 --> 01:26:44,520\nyou should go one Switch at a time,\nnot the way I did it.\n\n1627\n01:26:44,520 --> 01:26:45,860\nI did all of them at once,\n\n1628\n01:26:45,860 --> 01:26:49,100\nwhich is gonna cause a little outage\nhere while it shorts itself out.\n\n1629\n01:26:49,100 --> 01:26:54,260\nNow the outage could take the full 802.1.D\ntime, which is what we just saw, but once\n\n1630\n01:26:54,260 --> 01:27:00,260\nthat's done, now it's up, it's running,\nand we're running Rapid Spanning Tree.\n\n1631\n01:27:00,260 --> 01:27:02,588\nIf I take a look at,\nwho is our trouble switch, switch two.\n\n1632\n01:27:08,045 --> 01:27:11,640\nNow when I take a look at it and\nI run a show Spanning Tree.\n\n1633\n01:27:11,640 --> 01:27:14,230\nSee how it shows Spanning Tree\nenabled protocol\n\n1634\n01:27:14,230 --> 01:27:18,300\nRSTP that means 802.1W\nthe Rapid Spanning Tree.\n\n1635\n01:27:18,300 --> 01:27:20,510\nAnd it's running one copy for each VLAN.\n\n1636\n01:27:20,510 --> 01:27:25,370\nSo it's actually per VLAN,\nrapid spanning tree.\n\n1637\n01:27:25,370 --> 01:27:28,320\nAnd if I look down here I've\ngot a root forwarding port and\n\n1638\n01:27:28,320 --> 01:27:29,790\nan alternate blocking port.\n\n1639\n01:27:29,790 --> 01:27:35,430\nThat alternate terminology under normal\nSpanning Tree didn't really mean anything.\n\n1640\n01:27:35,430 --> 01:27:38,970\nBut under rapid,\nit takes on an all new meaning, okay?\n\n1641\n01:27:38,970 --> 01:27:43,596\nIt means that this port is ready to go at\na moment's notice if we have a failure.\n\n1642\n01:27:43,596 --> 01:27:47,246\nSo earlier what I did is I\nunplugged port number two, and\n\n1643\n01:27:47,246 --> 01:27:50,756\nwe watched these pings,\nthat's not what we wanted.\n\n1644\n01:27:50,756 --> 01:27:55,160\nWe watched these pings back here\nto see what happened, okay?\n\n1645\n01:27:55,160 --> 01:28:00,590\nSo what I'm gonna do is I'm gonna\nunplug port number two again and\n\n1646\n01:28:00,590 --> 01:28:01,470\nwe'll watch what happens.\n\n1647\n01:28:01,470 --> 01:28:04,200\nEverything should be nice and\nstable at this point.\n\n1648\n01:28:04,200 --> 01:28:06,401\nAnd so I'm gonna unplug port number two.\n\n1649\n01:28:06,401 --> 01:28:07,345\nThere it goes.\n\n1650\n01:28:07,345 --> 01:28:09,747\nSo port number two is gonna go down.\n\n1651\n01:28:09,747 --> 01:28:11,490\nSo there it goes.\n\n1652\n01:28:11,490 --> 01:28:15,330\nAnd the alternate port\nis going to kick in.\n\n1653\n01:28:15,330 --> 01:28:16,120\nAll right?\n\n1654\n01:28:16,120 --> 01:28:17,190\nIt's actually all ready done.\n\n1655\n01:28:17,190 --> 01:28:18,640\n>> Yep.\n>> So, looking at the switch,\n\n1656\n01:28:18,640 --> 01:28:20,050\nI've all ready got a green light.\n\n1657\n01:28:20,050 --> 01:28:21,480\nHow many pings did I lose?\n\n1658\n01:28:21,480 --> 01:28:22,480\n>> Not a single one this time.\n\n1659\n01:28:22,480 --> 01:28:23,380\n>> None at all.\n\n1660\n01:28:23,380 --> 01:28:26,790\nIn fact, if you look,\nright here you can see the latency.\n\n1661\n01:28:26,790 --> 01:28:31,280\nSee on my, I was getting like seven\nmilliseconds, six milliseconds on average.\n\n1662\n01:28:31,280 --> 01:28:33,530\nAll of a sudden it jumped\nto 11 milliseconds.\n\n1663\n01:28:33,530 --> 01:28:34,070\n>> Yep.\n>> And\n\n1664\n01:28:34,070 --> 01:28:38,825\nthen right back down again\nwhen I did the break command.\n\n1665\n01:28:38,825 --> 01:28:39,570\n>> [LAUGH]\n>> So,\n\n1666\n01:28:39,570 --> 01:28:44,080\nwe have Rapid Spanning Tree Protocol,\ndoes it live up to its name?\n\n1667\n01:28:44,080 --> 01:28:44,580\n>> Oh, yeah.\n\n1668\n01:28:44,580 --> 01:28:45,980\n>> Absolutely.\n\n1669\n01:28:45,980 --> 01:28:49,470\nThis is the type of technology we need if\nwe are going for high availability and\n\n1670\n01:28:49,470 --> 01:28:52,080\nthings, because you get\nnext to no down time.\n\n1671\n01:28:52,080 --> 01:28:52,580\nRight?\n>> Yeah.\n\n1672\n01:28:52,580 --> 01:28:55,097\n>> It just [INAUDIBLE] most programs won't\n\n1673\n01:28:55,097 --> 01:28:56,780\neven notice, right?\n\n1674\n01:28:56,780 --> 01:28:58,500\nMy Telnet session here,\n\n1675\n01:28:58,500 --> 01:29:02,150\nit stayed active, versus last time\nwhen it actually got disconnected.\n\n1676\n01:29:02,150 --> 01:29:03,640\nI'm still in the switch and running happy.\n\n1677\n01:29:03,640 --> 01:29:06,940\n>> Yeah, and even though the real\naspect of what we just saw there,\n\n1678\n01:29:06,940 --> 01:29:09,100\nwe really didn't have any drops at all.\n\n1679\n01:29:09,100 --> 01:29:13,190\nThey talk about us being able to\ndo this in less than ten seconds.\n\n1680\n01:29:13,190 --> 01:29:17,740\nI think they don't want people to\nover-expect or something like that.\n\n1681\n01:29:17,740 --> 01:29:20,690\nBut that's what they normally say, is\nthat when you want Spanning Tree to occur\n\n1682\n01:29:20,690 --> 01:29:25,220\nless than 10 seconds,\ninstead of the 30 to 90 seconds or so.\n\n1683\n01:29:25,220 --> 01:29:27,770\nYou might choose this idea\nof Rapid Spanning Tree.\n\n1684\n01:29:27,770 --> 01:29:29,330\n>> So I just failed it back over.\n\n1685\n01:29:29,330 --> 01:29:30,640\nSo now it's back over to the main link.\n\n1686\n01:29:30,640 --> 01:29:33,860\nThen you'll see it jumped up to\nabout 14 milliseconds there again\n\n1687\n01:29:33,860 --> 01:29:35,270\n>> But flipped over very, very fast.\n\n1688\n01:29:35,270 --> 01:29:37,620\nThat's the glory of\nRapid Spanning Tree Protocol.\n\n1689\n01:29:37,620 --> 01:29:41,380\nIf your hardware supports it, and your\ndevices aren't already over-attached or\n\n1690\n01:29:41,380 --> 01:29:43,030\nanything, it's an awesome thing to run.\n\n1691\n01:29:43,030 --> 01:29:45,100\nIt really does make a big difference.\n\n1692\n01:29:45,100 --> 01:29:49,000\nAll right, and the primary cause of that\n\n1693\n01:29:49,000 --> 01:29:53,930\nis that we're combining some of these\nphases so that those go by faster.\n\n1694\n01:29:53,930 --> 01:29:55,670\nAnd then we're tracking\nthat alternate port.\n\n1695\n01:29:55,670 --> 01:29:56,405\nThat's the big thing.\n\n1696\n01:29:56,405 --> 01:29:59,550\nAnd it's a very simple change\nwith Rapid Spanning Tree, and\n\n1697\n01:29:59,550 --> 01:30:01,410\nthat's what takes care of it.\n\n1698\n01:30:01,410 --> 01:30:04,070\nThat's 802.1W,\nRapid Spanning Tree Protocol.\n\n1699\n01:30:04,070 --> 01:30:07,950\n>> Make sure you do know those particular\ndesignations as well for the exam.\n\n1700\n01:30:07,950 --> 01:30:10,420\nSo don't put it past Cisco just\nto ask you a simple question,\n\n1701\n01:30:10,420 --> 01:30:11,989\nRapid Spanning Tree is also known as.\n\n1702\n01:30:13,230 --> 01:30:16,100\nMake sure you pay attention to that.\n\n1703\n01:30:16,100 --> 01:30:17,090\n>> Alright now\n>> [COUGH]\n\n1704\n01:30:17,090 --> 01:30:17,700\n>> we still have a lot\n\n1705\n01:30:17,700 --> 01:30:18,200\nmore\n>> Right.\n\n1706\n01:30:18,200 --> 01:30:19,210\n>> configuration on this stuff.\n\n1707\n01:30:19,210 --> 01:30:20,650\nWe never did actually change who\n\n1708\n01:30:20,650 --> 01:30:21,190\nthe root was.\n>> Right [LAUGH]\n\n1709\n01:30:21,190 --> 01:30:21,690\n>> And stuff.\n\n1710\n01:30:21,690 --> 01:30:22,610\nSo we'll have to do that in\n\n1711\n01:30:22,610 --> 01:30:24,710\nthe next episode.\nWe've also got some cool stuff with\n\n1712\n01:30:24,710 --> 01:30:26,960\nthe Ethernet channel we'll do in the,\nin the episode.\n\n1713\n01:30:26,960 --> 01:30:29,040\nBut one last thing I want to mention,\n\n1714\n01:30:29,040 --> 01:30:32,670\nI said there were five different\ntypes of Spanning Tree Protocols.\n\n1715\n01:30:32,670 --> 01:30:35,890\nSo let me bring up my notepad window\nhere so we can track each one of them.\n\n1716\n01:30:35,890 --> 01:30:40,721\nSo there's IEEE 802.1D\n\n1717\n01:30:40,721 --> 01:30:45,370\nSpanning -Tree Protocol.\n\n1718\n01:30:45,370 --> 01:30:47,120\nThat's the official one.\n\n1719\n01:30:47,120 --> 01:30:50,485\nAnd then we had PVST+,\n\n1720\n01:30:50,485 --> 01:30:56,049\nwhich was Per-VLAN Spanning -Tree.\n\n1721\n01:30:56,049 --> 01:30:58,428\nAnd, this one is Cisco Proprietary.\n\n1722\n01:31:01,430 --> 01:31:06,140\nI think, that's how you spell proprietary.\n\n1723\n01:31:06,140 --> 01:31:07,566\nAll right,and then,\nwe got to see IEEE 802.1.\n\n1724\n01:31:07,566 --> 01:31:16,190\nW Rapid Spanning-Tree Protocol and\n\n1725\n01:31:16,190 --> 01:31:22,040\nCisco's version of it, PVRST+ Per-VLAN\n\n1726\n01:31:22,040 --> 01:31:29,830\nRapid Spanning-Tree which\nis Cisco proprietary.\n\n1727\n01:31:29,830 --> 01:31:35,590\nAnd it's proprietary but it is fully\ncompatible with the other standards.\n\n1728\n01:31:35,590 --> 01:31:38,040\nThe last one that I wanna talk about.\n\n1729\n01:31:38,040 --> 01:31:40,490\nI don't remember the 802 number for it.\n\n1730\n01:31:40,490 --> 01:31:41,880\nDo you?\nFor MST?\n\n1731\n01:31:41,880 --> 01:31:42,580\n>> I don't.\n\n1732\n01:31:42,580 --> 01:31:47,530\n>> So, we've got MST,\nwhich is Multiple Spanning tree\n\n1733\n01:31:49,310 --> 01:31:52,540\nand if you could look that up,\nI can't remember the 802 number for it.\n\n1734\n01:31:52,540 --> 01:31:57,530\nIt's an IEEE standard 802.1?\n\n1735\n01:31:57,530 --> 01:32:03,060\nMST and what it does is this is where\nthe IEEE finally said okay, all right.\n\n1736\n01:32:03,060 --> 01:32:04,290\nWe see what you're saying Cisco.\n\n1737\n01:32:04,290 --> 01:32:08,200\nWe understand that you want to run\nmore than one copy of spanning tree.\n\n1738\n01:32:08,200 --> 01:32:12,080\nMore and more vendors are supporting\nVLANs, hardware is advanced enough\n\n1739\n01:32:12,080 --> 01:32:14,690\nthat people can run more than\none copy of spanning tree, but\n\n1740\n01:32:14,690 --> 01:32:19,780\nwe still don't agree that you need\nto run one copy for each VLAN.\n\n1741\n01:32:19,780 --> 01:32:24,541\nSo instead We're gonna put that at\nthe controlled end users, 802.1S,\n\n1742\n01:32:24,541 --> 01:32:29,000\n802.1S there we go M S T.\n\n1743\n01:32:29,000 --> 01:32:31,440\nSo what they said is let's be in the know.\n\n1744\n01:32:31,440 --> 01:32:37,450\nWe're gonna do multiple spanning tree,\nand with MST, you can define manually how\n\n1745\n01:32:37,450 --> 01:32:42,660\nmany copies a spanning tree you wanna run\nand then you assign your VLANs to them.\n\n1746\n01:32:42,660 --> 01:32:46,230\nNow, this is cool because\nif i have five VLANs and\n\n1747\n01:32:46,230 --> 01:32:51,050\nall five VLANs have the same topology,\nthey all go to the same switches.\n\n1748\n01:32:51,050 --> 01:32:56,530\nI can run just one copy of spanning tree,\nand it'll handle all five VLANs.\n\n1749\n01:32:56,530 --> 01:33:00,990\nBut if I have a sixth VLAN that has a\ndifferent topology, I can leave it be and\n\n1750\n01:33:00,990 --> 01:33:03,120\nput it in its own MST instance.\n\n1751\n01:33:03,120 --> 01:33:04,240\nAnd now it'll have its own.\n\n1752\n01:33:04,240 --> 01:33:05,730\nIt'll make smart decisions.\n\n1753\n01:33:05,730 --> 01:33:07,380\nIt's a good middle of the road.\n\n1754\n01:33:07,380 --> 01:33:12,110\nIt bridges the gap between Ciscos vision,\nand the IEEEs vision.\n\n1755\n01:33:12,110 --> 01:33:14,670\nThe problem is MST's\na little bit intensive.\n\n1756\n01:33:14,670 --> 01:33:17,590\nOnly the mid range and\nhigher end switches support it.\n\n1757\n01:33:17,590 --> 01:33:21,180\nSo if you get like lower end\nswitches sometimes don't MST,\n\n1758\n01:33:21,180 --> 01:33:22,050\nit's just not an option.\n\n1759\n01:33:23,110 --> 01:33:27,340\nFor the CCNA exam,\nyou're not expected to configure MST.\n\n1760\n01:33:27,340 --> 01:33:30,700\nThey save that for the CCMP stuff,\nbut you do need to be aware of it.\n\n1761\n01:33:30,700 --> 01:33:31,620\nKnow that it exists.\n\n1762\n01:33:33,972 --> 01:33:39,440\nAlright, so Ronnie,\nI think that's about all I've got.\n\n1763\n01:33:39,440 --> 01:33:43,200\nCan you think of anything else we need to\nthrow in just for our general overview?\n\n1764\n01:33:43,200 --> 01:33:46,770\n>> Nope, just as we kind fo end this\nparticular segment here since we're\n\n1765\n01:33:46,770 --> 01:33:47,970\ngoing to move on to some.\n\n1766\n01:33:49,390 --> 01:33:50,060\n>> In the next show,\n\n1767\n01:33:50,060 --> 01:33:54,100\nwhich we'll actually film this afternoon,\nin our next show we'll show\n\n1768\n01:33:54,100 --> 01:33:58,880\nhow to configure some of this stuff as\nfar as tweaking spanning trees operation.\n\n1769\n01:33:58,880 --> 01:34:02,850\nInfluencing who's gonna become the root\nbridge, and changing priorities.\n\n1770\n01:34:02,850 --> 01:34:04,610\nSo we'll get a chance to see that, and\n\n1771\n01:34:04,610 --> 01:34:10,310\nwe're also gonna show some EtherChannel\nstuff, how to bond links together.\n\n1772\n01:34:10,310 --> 01:34:12,220\nSo it might look like a loop,\nbut once it's bonded,\n\n1773\n01:34:12,220 --> 01:34:13,340\nit becomes a single connection.\n\n1774\n01:34:13,340 --> 01:34:15,000\nSo we'll get to see some of that.\n\n1775\n01:34:15,000 --> 01:34:16,076\nWhich is all really good stuff.\n\n1776\n01:34:16,076 --> 01:34:16,950\n>> Yeah.\n\n1777\n01:34:16,950 --> 01:34:21,050\nSo I think we've done pretty good today in\nterms of covering what we needed to do.\n\n1778\n01:34:21,050 --> 01:34:23,670\n>> Alright well ladies and gentlemen\nI hope you guys enjoyed the show.\n\n1779\n01:34:23,670 --> 01:34:27,235\nAs always if you have any questions\nlive during the show you can go to\n\n1780\n01:34:27,235 --> 01:34:31,210\nITPro.tv/live, you can post your\nquestions in our chat room.\n\n1781\n01:34:31,210 --> 01:34:34,540\nAnd we will answer them during the show,\nwe monitor that.\n\n1782\n01:34:34,540 --> 01:34:38,690\nIf you have questions after the show,\nyou can go to our newly upgraded.\n\n1783\n01:34:38,690 --> 01:34:42,200\nI just put the upgrade in this weekend,\nour newly upgraded Q and A section.\n\n1784\n01:34:42,200 --> 01:34:46,220\nAt the top of every page on ITProTV\nthere's a link that says Q and A.\n\n1785\n01:34:46,220 --> 01:34:47,740\nYou can go in there and\npost your questions.\n\n1786\n01:34:47,740 --> 01:34:49,230\nWe monitor and answer them.\n\n1787\n01:34:49,230 --> 01:34:50,925\nAnswer them to the best\nof our ability at least.\n\n1788\n01:34:50,925 --> 01:34:53,010\n>> [LAUGH]\n>> I do not know next week's winning\n\n1789\n01:34:53,010 --> 01:34:55,390\nlottery numbers just to save\nyou guys time on that question.\n\n1790\n01:34:55,390 --> 01:34:56,570\nBut you can post them there.\n\n1791\n01:34:56,570 --> 01:34:57,740\nWe get your answers.\n\n1792\n01:34:57,740 --> 01:35:01,680\nAnd make sure that you're ready,\nthat you actually understand the topics.\n\n1793\n01:35:01,680 --> 01:35:03,740\nDefinitely let us know if\nyou have any questions.\n\n1794\n01:35:03,740 --> 01:35:05,300\nTake advantage of that resource.\n\n1795\n01:35:06,450 --> 01:35:09,998\nAlright, well signing of for Itprotv,\nI'm Don Pezet and I'm Ronnie Wong and\n\n1796\n01:35:09,998 --> 01:35:11,195\nwe'll see you next time.\n\n1797\n01:35:11,195 --> 01:35:21,195\n[MUSIC]\n\n1798\n01:35:23,634 --> 01:35:30,130\n[SOUND]\n[SOUND]\n\n",
          "vimeoId": "79782059"
        },
        {
          "description": "In this episode Ronnie and Don conclude with configuring Spanning Tree Protocol by demonstrating the way to manually elect the Root Bridge. They also describe and configure the different methods of EtherChannel (LACP, PAgP).",
          "length": "5021",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/002-Switching-Technologies-Pt-2.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/002-Switching-Technologies-Pt-2-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/002-Switching-Technologies-Pt-2-sm.jpg",
          "title": "Switching Technologies Part 2",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:13,888 --> 00:00:22,150\n[SOUND]\n\n3\n00:00:22,150 --> 00:00:32,150\n[MUSIC]\n\n4\n00:00:33,271 --> 00:00:34,050\nAll right.\nGood morning,\n\n5\n00:00:34,050 --> 00:00:35,021\ngood afternoon, and good evening.\n\n6\n00:00:35,021 --> 00:00:37,471\nWelcome back!\nTo another episode of IT Pro TV.\n\n7\n00:00:37,471 --> 00:00:39,881\nI'm your host Don Pezet today with Mr.\nRonnie Wong.\n\n8\n00:00:39,881 --> 00:00:41,010\nHow's it going Ronnie?\n\n9\n00:00:41,010 --> 00:00:42,060\n>> I am doing well today.\n\n10\n00:00:42,060 --> 00:00:47,870\nWe are ready for\nanother exciting episode of our CCNA.\n\n11\n00:00:47,870 --> 00:00:48,370\nYeah.\n>> Yep.\n\n12\n00:00:48,370 --> 00:00:50,490\nSo for those of you that tuned in this\n\n13\n00:00:50,490 --> 00:00:54,940\nmorning, Ronnie and I did broke open\nthe topic of spanning tree protocol, and\n\n14\n00:00:54,940 --> 00:00:56,398\nwe did a whole episode on that.\n\n15\n00:00:56,398 --> 00:01:00,280\nSo much spanning tree excitement that\nwe weren't able to get through it all.\n\n16\n00:01:00,280 --> 00:01:02,885\nSo today is part deux, right?\n\n17\n00:01:02,885 --> 00:01:07,100\nSpanning tree part two\nof electric boogaloo.\n\n18\n00:01:07,100 --> 00:01:10,040\nShould be just as good\nas the original movie.\n\n19\n00:01:10,040 --> 00:01:11,110\nBreaking part 2.\n\n20\n00:01:11,110 --> 00:01:13,314\n>> Yes, yeah.\n[LAUGH]\n\n21\n00:01:13,314 --> 00:01:13,848\n>> No.\n\n22\n00:01:13,848 --> 00:01:14,371\nShould be better.\n\n23\n00:01:14,371 --> 00:01:17,715\n>> Every time they say part two,\nI always think of worst movie title ever,\n\n24\n00:01:17,715 --> 00:01:19,368\nbreaking two electric boogaloo.\n\n25\n00:01:19,368 --> 00:01:20,090\n>> That's right.\n\n26\n00:01:20,090 --> 00:01:23,030\n>> Anyhow, so we're going to\ntackle spanning tree protocol.\n\n27\n00:01:23,030 --> 00:01:26,410\nIn the last episode we did a lot\nof concept and theory, right?\n\n28\n00:01:26,410 --> 00:01:28,849\nHow spanning tree works and so on.\n\n29\n00:01:28,849 --> 00:01:32,480\nThe reality of is it is that\nspanning tree is already turned on,\n\n30\n00:01:32,480 --> 00:01:35,380\nit's running on your switch,\nyou don't really have to configure it.\n\n31\n00:01:35,380 --> 00:01:38,970\nBut in this episode,\nwe want to cover how you configure it if\n\n32\n00:01:38,970 --> 00:01:41,350\nyou fall into one of those scenarios\nwhere you actually have to do it.\n\n33\n00:01:41,350 --> 00:01:41,980\n>> Right.\n\n34\n00:01:41,980 --> 00:01:42,610\nYeah.\n\n35\n00:01:42,610 --> 00:01:45,290\nSo for us, remember we actually\ntalked about the why and\n\n36\n00:01:45,290 --> 00:01:46,280\nwe also talked about the how.\n\n37\n00:01:46,280 --> 00:01:49,030\nAnd so this particular episode\nis gonna focus in on that,\n\n38\n00:01:49,030 --> 00:01:50,710\nas well as some other topics.\n\n39\n00:01:50,710 --> 00:01:51,640\nWe do need to address,\n\n40\n00:01:51,640 --> 00:01:56,430\nespecially when we start using switches in\nthis redundant topology that we'll have.\n\n41\n00:01:56,430 --> 00:01:59,660\n>> Yup, so I still have my\nlittle drawing from earlier,\n\n42\n00:01:59,660 --> 00:02:02,582\nfrom last episode so\nlet's pull that guy up.\n\n43\n00:02:02,582 --> 00:02:05,980\nAll right, so here is kinda\nwhat we were working with and\n\n44\n00:02:05,980 --> 00:02:11,280\nwe had started throwing out some scenarios\nhere, gigabit or not gigabit, or whatever.\n\n45\n00:02:11,280 --> 00:02:15,610\nAnd so, in our topology, it's actually\nnot gigabit, it's all just fast ethernet.\n\n46\n00:02:15,610 --> 00:02:17,830\nWhich means they're 100\nmegabit connections.\n\n47\n00:02:17,830 --> 00:02:22,620\nAnd that's important to us because that's\ngonna influence the path choices, right?\n\n48\n00:02:22,620 --> 00:02:24,040\nBecause of the costs.\n\n49\n00:02:24,040 --> 00:02:28,570\nSo if I reset all of this kinda\nback to what our main topology is,\n\n50\n00:02:29,980 --> 00:02:33,870\nwell, what we experienced\nwhen we first fired this up.\n\n51\n00:02:33,870 --> 00:02:35,670\nSo we've got the three switches back here.\n\n52\n00:02:35,670 --> 00:02:40,320\nSwitch one has the lowest MAC address,\nso it became the route bridge and\n\n53\n00:02:40,320 --> 00:02:43,370\nthen switch two and switch three\nwere tagging along for the ride,\n\n54\n00:02:43,370 --> 00:02:48,130\nswitch two ended up having to block\na port to prevent a loop, right?\n\n55\n00:02:48,130 --> 00:02:50,230\nSo that's what was happening\nright out of the box.\n\n56\n00:02:50,230 --> 00:02:52,373\nAnd I mentioned in that show,\n\n57\n00:02:52,373 --> 00:02:57,106\nI said that one of our problems is\nthat switch one is an old switch.\n\n58\n00:02:57,106 --> 00:02:59,024\nIt's a Cisco 3550,\n\n59\n00:02:59,024 --> 00:03:05,060\nthe older switches have lower MAC\naddresses than the newer switches, right?\n\n60\n00:03:05,060 --> 00:03:07,950\nSo anyway you have to think about\nthe order they're manufactured in.\n\n61\n00:03:07,950 --> 00:03:10,980\nSo when Cisco manufactures\na switch in 2010,\n\n62\n00:03:10,980 --> 00:03:14,575\nthey've got got a pool of Mac\naddresses that they're using.\n\n63\n00:03:14,575 --> 00:03:17,235\nThey're assigning them to switches\nas they manufacture them.\n\n64\n00:03:17,235 --> 00:03:22,225\nWhen they run out, so let's say 2012 rolls\naround and they ran out of MAC addresses,\n\n65\n00:03:22,225 --> 00:03:26,785\nthey get a new pool, which is going\nto be a higher range of addresses.\n\n66\n00:03:26,785 --> 00:03:29,725\nAnd that's exactly what we're seeing\nhere with our physical equipment.\n\n67\n00:03:29,725 --> 00:03:36,240\nOur 3550, which is an older switch,\nhas a MAC address that starts with 000d.\n\n68\n00:03:36,240 --> 00:03:42,560\nOur 3560s, these other two switches,\nhave newer MAC addresses with 0018.\n\n69\n00:03:42,560 --> 00:03:47,280\nBecause they've got that higher MAC\naddress, they are not becoming the route.\n\n70\n00:03:47,280 --> 00:03:52,870\nSo switch one is the route\nin our topology right now.\n\n71\n00:03:52,870 --> 00:03:56,640\n>> We changed the priority number here in\nthe first episode where all of a sudden,\n\n72\n00:03:56,640 --> 00:04:00,930\nswitch number three became our\nactual root at this point.\n\n73\n00:04:00,930 --> 00:04:02,100\n>> Oh shoot.\nYou know what?\n\n74\n00:04:02,100 --> 00:04:03,400\nWe changed it in the slide.\n\n75\n00:04:03,400 --> 00:04:05,231\nWe never actually did it on the switch.\n\n76\n00:04:05,231 --> 00:04:06,644\n[CROSSTALK]\n>> We were talking about\n\n77\n00:04:06,644 --> 00:04:07,242\nthe idea of configuring it.\n\n78\n00:04:07,242 --> 00:04:09,901\nSo we're going to be doing that\nthis configure episode as well.\n\n79\n00:04:09,901 --> 00:04:15,090\nDon, I think those costs\nare supposed to be 19 as well.\n\n80\n00:04:15,090 --> 00:04:16,010\n>> Oh.\n>> Yeah.\n\n81\n00:04:16,010 --> 00:04:18,570\nJust in case,\nI don't want to confuse anybody here.\n\n82\n00:04:18,570 --> 00:04:19,200\nThat's right.\n\n83\n00:04:19,200 --> 00:04:21,670\n>> So, yep.\n>> A gigabit line has a cost of four,\n\n84\n00:04:21,670 --> 00:04:23,170\na 100 megabit line has a cost of 19.\n\n85\n00:04:23,170 --> 00:04:27,068\nAnd then the default\npriority on a Cisco switch.\n\n86\n00:04:27,068 --> 00:04:28,531\n>> Yep.\n\n87\n00:04:28,531 --> 00:04:30,934\n>> Is 32,768, that's what\nthey're set at from the factory.\n\n88\n00:04:30,934 --> 00:04:31,514\n>> Right.\n\n89\n00:04:31,514 --> 00:04:32,990\nYep.\n\n90\n00:04:32,990 --> 00:04:36,550\n>> So here's the basic topology we'll be\nusing when we begin our configuration here\n\n91\n00:04:36,550 --> 00:04:40,210\nin this [INAUDIBLE]\nunits as we get started.\n\n92\n00:04:40,210 --> 00:04:44,470\n>> All right, now,\nwhen we go to change who's the root.\n\n93\n00:04:44,470 --> 00:04:44,970\nRight?\n\n94\n00:04:44,970 --> 00:04:47,510\nSo I want switch two to be the root.\n\n95\n00:04:47,510 --> 00:04:48,030\nAll right.\n\n96\n00:04:48,030 --> 00:04:49,630\nIt's never gonna happen on its own.\n\n97\n00:04:49,630 --> 00:04:53,140\nBecause switch two's MAC address\nis higher than the other two guys.\n\n98\n00:04:53,140 --> 00:04:53,730\nRight?\n\n99\n00:04:53,730 --> 00:04:54,910\nAnd let's just recap that.\n\n100\n00:04:54,910 --> 00:04:58,170\nRight?\nIf I look at the first three digits,\n\n101\n00:04:58,170 --> 00:05:01,240\n000 up top, 001 down here.\n\n102\n00:05:01,240 --> 00:05:02,310\nWhoops.\n\n103\n00:05:02,310 --> 00:05:03,929\nAnd well that's not what I wanted.\n\n104\n00:05:03,929 --> 00:05:09,570\nThere we go.\n\n105\n00:05:09,570 --> 00:05:10,570\nAnd 001 down here, right?.\n\n106\n00:05:10,570 --> 00:05:12,970\nSo, 000 is the lowest.\n\n107\n00:05:12,970 --> 00:05:14,620\nThis guys gonna be root.\n\n108\n00:05:14,620 --> 00:05:18,000\nAnd then if I continue on,\nI've got 001819,\n\n109\n00:05:18,000 --> 00:05:21,170\nwhich is the same between\nthese two switches down here.\n\n110\n00:05:21,170 --> 00:05:24,990\nAnd then after 19 I've got 6E and 77.\n\n111\n00:05:24,990 --> 00:05:27,910\n6E is lower than 77,\n\n112\n00:05:27,910 --> 00:05:31,860\nso switch three is the next lowest and\nswitch two is the highest.\n\n113\n00:05:31,860 --> 00:05:33,650\nSwitch two is the biggest loser.\n\n114\n00:05:33,650 --> 00:05:36,680\nSo, the only time that switch\ntwo would become route-\n\n115\n00:05:36,680 --> 00:05:37,770\n>> Is if we change it.\n\n116\n00:05:37,770 --> 00:05:40,378\n>> Or if we powered off all the other\nswitches which would kind of\n\n117\n00:05:40,378 --> 00:05:41,307\ndefeat the purpose.\n\n118\n00:05:41,307 --> 00:05:42,305\n>> Right.\n\n119\n00:05:42,305 --> 00:05:44,090\n[LAUGH]\n>> So, we're gonna have to change it.\n\n120\n00:05:44,090 --> 00:05:48,212\nNow, in yesterday's episode, or\nthis morning's, or whatever,\n\n121\n00:05:48,212 --> 00:05:53,114\nI just picked an arbitrary number to\nchange the priority to, and in 802.1D,\n\n122\n00:05:53,114 --> 00:05:57,325\nin the official Spanning Tree\nprotocol standard, that's how it is.\n\n123\n00:05:57,325 --> 00:06:02,311\nCisco says, or not Cisco,\nthe IEEE says you can change the priority\n\n124\n00:06:02,311 --> 00:06:07,297\nnumber to whatever you want, but\nremember how we said that Cisco's\n\n125\n00:06:07,297 --> 00:06:12,832\nimplementation of Spanning Tree Protocol\nis different than the IEEE's.\n\n126\n00:06:12,832 --> 00:06:18,180\nCisco's implementation of\nSpanning Tree Protocol says that\n\n127\n00:06:18,180 --> 00:06:24,840\nwe run one copy of Spanning Tree for\neach VLAN on our network, all right?\n\n128\n00:06:24,840 --> 00:06:29,500\nSo when a switch sends out BPDUs,\nit's not just sending out a single BPDU.\n\n129\n00:06:29,500 --> 00:06:33,070\nIt's sending out a BPDU on VLAN 1 and\nVLAN 2 and VLAN 3, and\n\n130\n00:06:33,070 --> 00:06:35,360\nwhat ever other VLANs it is that\nyou support in your network.\n\n131\n00:06:35,360 --> 00:06:39,120\nIf you have ten VLANs,\nit's sending out different BPDUs.\n\n132\n00:06:39,120 --> 00:06:43,080\nSo how do the switches know\none VPDU from another.\n\n133\n00:06:43,080 --> 00:06:46,500\nHow do they know which\nVLAN these VPDUs apply to?\n\n134\n00:06:46,500 --> 00:06:51,330\nAnd the way a Cisco switch handles that\nis by modifying that priority value,\n\n135\n00:06:51,330 --> 00:06:52,450\nall right?\n\n136\n00:06:52,450 --> 00:06:59,810\nCisco said all right, the priority value\ncan be any number between 1 and 65535.\n\n137\n00:06:59,810 --> 00:07:07,280\nAnd so they said to themselves, do we\nreally need 65,000 different priorities?\n\n138\n00:07:07,280 --> 00:07:09,070\nNormally you just need like three, right?\n\n139\n00:07:09,070 --> 00:07:13,150\nYou need who's the root,\nwho is the back up.\n\n140\n00:07:13,150 --> 00:07:15,470\nWho is the secondary root.\n\n141\n00:07:15,470 --> 00:07:16,990\nAnd then, who is everybody else?\n\n142\n00:07:16,990 --> 00:07:18,990\nRight?\nYou really just need three.\n\n143\n00:07:18,990 --> 00:07:20,430\nBut in the standard we have 65,000 and\n\n144\n00:07:20,430 --> 00:07:24,155\nthat's because we have 16\nbits to store that value in.\n\n145\n00:07:24,155 --> 00:07:26,962\nRight?\nA 16 bit number can give you anything from\n\n146\n00:07:26,962 --> 00:07:28,345\n1 to 65,535.\n\n147\n00:07:28,345 --> 00:07:32,300\nSo what Cisco did is they said,\nyou know what?\n\n148\n00:07:32,300 --> 00:07:34,620\nWe're gonna steal some of those bits.\n\n149\n00:07:34,620 --> 00:07:38,230\nWe're gonna steal some bits\naway from the priority, and\n\n150\n00:07:38,230 --> 00:07:40,362\nuse that to identify the VLAN number.\n\n151\n00:07:40,362 --> 00:07:43,750\nAll right, and the way it works is like\nthis, let me fire up my trusty notepad.\n\n152\n00:07:46,678 --> 00:07:47,948\nAll right, so, sorry that's one\nof my little show notes here,\n\n153\n00:07:47,948 --> 00:07:48,592\nlet me get those off the screen.\n\n154\n00:07:48,592 --> 00:07:53,236\nAll right, so now that they're secret\nwe're gonna talk about all of them but\n\n155\n00:07:53,236 --> 00:07:55,540\njust so they're out of the way.\n\n156\n00:07:55,540 --> 00:07:59,435\nSo when we talk about the spanning\ntree protocol priority.\n\n157\n00:07:59,435 --> 00:08:00,179\nAll right?\n\n158\n00:08:00,179 --> 00:08:03,479\nIt is a 16 Bit number,\nwhich means in binary,\n\n159\n00:08:03,479 --> 00:08:08,400\nif I were to write it out,\nI'd have 16 Bits to work with, right?\n\n160\n00:08:08,400 --> 00:08:10,490\nSo for example, let's see.\n\n161\n00:08:10,490 --> 00:08:11,275\nOne, two, three, four.\n\n162\n00:08:11,275 --> 00:08:14,187\n[SOUND] There we go.\n\n163\n00:08:14,187 --> 00:08:18,550\n16 Bits, all right?\n\n164\n00:08:18,550 --> 00:08:21,580\nAnd the default of 32,768\nis right in the middle.\n\n165\n00:08:21,580 --> 00:08:23,720\nIt's actually just\na little off the middle.\n\n166\n00:08:23,720 --> 00:08:25,770\nIt would be that right there, all right?\n\n167\n00:08:25,770 --> 00:08:26,950\nThat's 32,768.\n\n168\n00:08:26,950 --> 00:08:31,616\nYou'll see by that changing that\nfirst bit from a zero to a one,\n\n169\n00:08:31,616 --> 00:08:36,585\nwould become 32,000,\nactually it'd become much higher.\n\n170\n00:08:36,585 --> 00:08:40,990\n65,534 would be the number that I've got\nhere, but leaving it at zero it's always\n\n171\n00:08:40,990 --> 00:08:48,270\ngonna be a number less than 32768 or\nseven or yeah eight.\n\n172\n00:08:48,270 --> 00:08:53,300\nSo what Cisco said was goodness\n\n173\n00:08:53,300 --> 00:08:58,660\nthat is entirely too many bits to\nhave available just for priority.\n\n174\n00:08:58,660 --> 00:09:03,600\nSo, why don't we take some of them and\ngive them over to the VLAN number and\n\n175\n00:09:03,600 --> 00:09:05,170\nthat's exactly what they did.\n\n176\n00:09:05,170 --> 00:09:08,910\nThey said, really we only need so\nmany bits.\n\n177\n00:09:08,910 --> 00:09:11,920\nSo they stole,\n\n178\n00:09:11,920 --> 00:09:17,540\nlet's see, they stole a total of 12 bits.\n\n179\n00:09:17,540 --> 00:09:25,200\nThey stole basically all these bits\ndown here to use to identify the VLAN,\n\n180\n00:09:25,200 --> 00:09:30,980\nleaving only the first four\nbits to identify the actual.\n\n181\n00:09:30,980 --> 00:09:31,480\n>> Priority.\n\n182\n00:09:32,640 --> 00:09:34,900\n>> The actual priority,\nyeah, thank you Ronnie.\n\n183\n00:09:34,900 --> 00:09:35,716\n>> Yep.\n[LAUGH]\n\n184\n00:09:35,716 --> 00:09:37,236\n>> So with 12 bits,\n\n185\n00:09:37,236 --> 00:09:41,747\nyou can write a number from one to 4,090,\n>> 96.\n\n186\n00:09:41,747 --> 00:09:42,327\n>> Is it 96?\n\n187\n00:09:42,327 --> 00:09:43,267\n>> Mm-hm.\n>> Okay.\n\n188\n00:09:43,267 --> 00:09:44,020\nSo from one to 4,096.\n\n189\n00:09:44,020 --> 00:09:46,750\nSo when you look at a Cisco switch,\n\n190\n00:09:46,750 --> 00:09:50,480\nwhen you assign VLANs, you'll normally see\nwhere it's got a limit, and the limit,\n\n191\n00:09:50,480 --> 00:09:54,990\nit's normally one to 4,094, they leave\na little extra for some other identifiers.\n\n192\n00:09:54,990 --> 00:09:58,610\nBut, so you can have one to\n4,094 as your VLAN number.\n\n193\n00:09:58,610 --> 00:10:01,780\nI've never seen a switch that supported\nnumbers higher than 4,094, and\n\n194\n00:10:01,780 --> 00:10:05,870\nthis is the reason because we only have so\nmuch room for those.\n\n195\n00:10:06,870 --> 00:10:13,780\nThat left four bits remaining for\nthe actual priority.\n\n196\n00:10:13,780 --> 00:10:17,770\nSo if we write it out,\nyou're really got like this,\n\n197\n00:10:17,770 --> 00:10:22,720\nand this could get really boring I\nguess if I try to write them all out.\n\n198\n00:10:22,720 --> 00:10:23,790\nThere's only so many.\n\n199\n00:10:23,790 --> 00:10:24,842\n>> 16 combinations.\n\n200\n00:10:27,617 --> 00:10:30,100\nI'm already getting bored.\n\n201\n00:10:30,100 --> 00:10:34,360\nSo, there's basically 16 combinations and\nyou'll see these four bits actually give\n\n202\n00:10:34,360 --> 00:10:36,750\nyou plenty of room for\nwhat we're trying to achieve.\n\n203\n00:10:36,750 --> 00:10:41,750\nBut the key thing is, if we remember that\nthe other 12 bits are part of the VLAN\n\n204\n00:10:41,750 --> 00:10:46,790\nnumber, then only these four bits\napply when it comes to priority.\n\n205\n00:10:46,790 --> 00:10:49,150\nSo on a Cisco switch,\n\n206\n00:10:49,150 --> 00:10:53,240\nyou can't just assign your\npriority to any number you want.\n\n207\n00:10:53,240 --> 00:10:56,770\nYou can't make it 32,767 or 32,765.\n\n208\n00:10:56,770 --> 00:11:00,380\nIt has to be done in\nthese increments here,\n\n209\n00:11:00,380 --> 00:11:04,270\nwhich are actually increments of 4096.\n\n210\n00:11:04,270 --> 00:11:10,820\nSo priority really on a Cisco switch\nstarts with zero and then 4096.\n\n211\n00:11:10,820 --> 00:11:16,410\nAnd then 8192 and\nthen continues up like that.\n\n212\n00:11:16,410 --> 00:11:21,700\nAll the way to 32768 and it continues on.\n\n213\n00:11:21,700 --> 00:11:22,410\nAnd really,\n\n214\n00:11:22,410 --> 00:11:25,710\nif I fire up the windows calculator\nbecause I can't do this in my head.\n\n215\n00:11:25,710 --> 00:11:26,320\nI'll go crazy.\n\n216\n00:11:33,030 --> 00:11:37,020\nSo there's 8192 and\nI'm just adding 4096 each time.\n\n217\n00:11:37,020 --> 00:11:41,720\nSo we get to 12288.\n\n218\n00:11:41,720 --> 00:11:44,810\nSee, it's a good thing I'm\nnot doing this in my head.\n\n219\n00:11:44,810 --> 00:11:45,330\n>> Yep.\n\n220\n00:11:45,330 --> 00:11:49,000\n>> And then we just kinda keep going\nlike that and incrementing each time.\n\n221\n00:11:49,000 --> 00:11:54,520\nAnd some of these numbers will look\nfamiliar to you from RAM numbers, right?\n\n222\n00:11:54,520 --> 00:11:57,750\nSo if you have 16 gigs of RAM,\nyou've really got 16,384 megs of RAM.\n\n223\n00:11:57,750 --> 00:12:00,680\nSome of you guys have\nprobably seen that as\n\n224\n00:12:00,680 --> 00:12:02,620\nyou upgraded your computers or whatever.\n\n225\n00:12:02,620 --> 00:12:03,620\nAnd it just continues on.\n\n226\n00:12:03,620 --> 00:12:07,990\nNow, the reason I'm highlighting this\nextremely boring piece of knowledge is\n\n227\n00:12:07,990 --> 00:12:13,740\nthat when we go to adjust our priority\nwe can't just pick any random number.\n\n228\n00:12:13,740 --> 00:12:17,420\nWe're really limited to these 16 numbers.\n\n229\n00:12:17,420 --> 00:12:18,160\nThat didn't work out right.\n\n230\n00:12:20,810 --> 00:12:22,226\nAnd also the number one.\n\n231\n00:12:22,226 --> 00:12:26,959\n>> [LAUGH]\n>> And\n\n232\n00:12:26,959 --> 00:12:31,500\nthen that, plus 28,672.\n\n233\n00:12:31,500 --> 00:12:36,860\nAll right, so [LAUGH]\nmy bad typing aside.\n\n234\n00:12:36,860 --> 00:12:37,700\nThere we go.\n\n235\n00:12:37,700 --> 00:12:40,040\nAll right.\nSo those are the lower half\n\n236\n00:12:40,040 --> 00:12:44,050\nof the numbers, and\nthen it continues all the way up, right.\n\n237\n00:12:44,050 --> 00:12:46,750\nJust keep counting as we go\n\n238\n00:12:52,400 --> 00:13:00,010\nall the way up to 65,536 so\nit just continues to go on.\n\n239\n00:13:00,010 --> 00:13:01,890\nAll right, let me just stop here.\n\n240\n00:13:01,890 --> 00:13:03,870\nMy calculator skills\nare definitely lacking but\n\n241\n00:13:03,870 --> 00:13:05,310\nit goes all the way up to the top.\n\n242\n00:13:05,310 --> 00:13:08,760\nAll the way up to 65,536, right?\n\n243\n00:13:08,760 --> 00:13:12,350\nSo, when we assign our priority we\nhave to pick from these numbers.\n\n244\n00:13:12,350 --> 00:13:12,930\nIf we try and\n\n245\n00:13:12,930 --> 00:13:17,150\nassign a priority of something else It's\ngonna get angry at us and that's because\n\n246\n00:13:17,150 --> 00:13:23,280\nanything else would start to overlap with\nthe bits that are assigned to the VLAN.\n\n247\n00:13:23,280 --> 00:13:27,950\nIf I were to write this out with\nletters instead where p equals\n\n248\n00:13:29,290 --> 00:13:34,480\npriority and v equals VLAN ID,\n\n249\n00:13:34,480 --> 00:13:40,890\nwhen we look at the priority field on a\nCisco switch, the first four are priority\n\n250\n00:13:40,890 --> 00:13:46,930\nand then the remaining\ntwelve are the VLAN ID.\n\n251\n00:13:46,930 --> 00:13:51,970\nIt's all shipped as one 16 bit number and\nour switches have to split it apart.\n\n252\n00:13:53,780 --> 00:13:56,720\nNow, it sounds really complex here, but\nlet's look at it on an actual switch, and\n\n253\n00:13:56,720 --> 00:13:57,780\nit's even, it's easier.\n\n254\n00:14:00,550 --> 00:14:01,090\nAll right.\n\n255\n00:14:01,090 --> 00:14:06,429\nThis switch, let me give it like a port,\n[SOUND] hang on, do we have,\n\n256\n00:14:06,429 --> 00:14:11,205\ndo we have, we just have,\nwe have two VLANs, there we go, so\n\n257\n00:14:11,205 --> 00:14:16,300\nwe've got VLAN 1 and VLAN 2, so\nif I do a show spanning-tree.\n\n258\n00:14:16,300 --> 00:14:16,890\nRight?\n\n259\n00:14:16,890 --> 00:14:20,310\n>> Yeah, there we go.\n>> Here is VLAN 1's information.\n\n260\n00:14:20,310 --> 00:14:25,853\nNotice right here I've\ngot my priority is 32768.\n\n261\n00:14:25,853 --> 00:14:31,640\nMy system ID extension or\nmy extended system ID is a one.\n\n262\n00:14:31,640 --> 00:14:34,170\nThat means my priority is 32,768.\n\n263\n00:14:34,170 --> 00:14:36,710\nMy VLAN number is one.\n\n264\n00:14:36,710 --> 00:14:41,964\nIf we combine them together, it's 32,769.\n\n265\n00:14:41,964 --> 00:14:42,710\nRight?\n\n266\n00:14:42,710 --> 00:14:49,060\nThat is my combined bridge ID,\nfor this particular system.\n\n267\n00:14:49,060 --> 00:14:50,590\nThat's the number that is handing out.\n\n268\n00:14:50,590 --> 00:14:53,010\nCalling it priority for\nany non Cisco switch,\n\n269\n00:14:53,010 --> 00:14:55,090\nthey will just view that as priority.\n\n270\n00:14:55,090 --> 00:15:00,790\nBut on a Cisco switch it will\nactually know that it is for VLAN 1.\n\n271\n00:15:00,790 --> 00:15:06,440\nNow VLAN 2, if I come down here,\nI can see my priority is 32,768.\n\n272\n00:15:06,440 --> 00:15:10,540\nMy extended system ID is two,\nso my priority is 32770.\n\n273\n00:15:10,540 --> 00:15:13,050\nJust one higher, right?\n\n274\n00:15:13,050 --> 00:15:15,720\nAnd if create a VLAN like VLAN.\n\n275\n00:15:15,720 --> 00:15:17,250\nWell let's go crazy, right?\n\n276\n00:15:17,250 --> 00:15:18,970\nSo if I go VLAN 312.\n\n277\n00:15:18,970 --> 00:15:20,900\nActually, let's do 3012, right?\n\n278\n00:15:20,900 --> 00:15:27,580\nSo I'm creating VLAN,\nlet's just call this my demo.\n\n279\n00:15:27,580 --> 00:15:28,280\nAll right.\n\n280\n00:15:28,280 --> 00:15:30,730\nSo I just create a VLAN 3012.\n\n281\n00:15:30,730 --> 00:15:35,430\nAnd, VTP [LAUGH] is getting angry with me.\n\n282\n00:15:35,430 --> 00:15:39,200\nThe VLAN trunking protocol,\nit's very old and\n\n283\n00:15:39,200 --> 00:15:42,620\nin version one, it only supports\nup to VLAN number 1022, 1024.\n\n284\n00:15:42,620 --> 00:15:48,350\nSo it's griping at me there so\nI'm just gonna bump that up.\n\n285\n00:15:48,350 --> 00:15:51,898\n[SOUND]\nAnd\n\n286\n00:15:51,898 --> 00:15:57,666\nextend a VLAN.\n\n287\n00:15:57,666 --> 00:15:59,940\nHang on, did we not flip into version 2?\n\n288\n00:16:01,620 --> 00:16:03,809\nVTP version, running VTP2.\n\n289\n00:16:03,809 --> 00:16:07,410\nWhy is it upset about that?\n\n290\n00:16:07,410 --> 00:16:11,320\nSo if you look here at VTP,\nsee how I've got configured version, or\n\n291\n00:16:11,320 --> 00:16:12,860\nthat's my revision, sorry.\n\n292\n00:16:12,860 --> 00:16:15,840\nMy VTP version here, running VTP2.\n\n293\n00:16:15,840 --> 00:16:19,380\nMaximum number of VLAN's\nsupported locally,1005.\n\n294\n00:16:19,380 --> 00:16:25,300\nThat's why it's griping, picking a number\ntoo high but I flipped into version two.\n\n295\n00:16:25,300 --> 00:16:27,910\nI wonder why it's not happy about that.\n\n296\n00:16:27,910 --> 00:16:29,680\nSee, VTP V2 mode enabled.\n\n297\n00:16:31,020 --> 00:16:33,310\n>> Maybe a switch thing for us.\n\n298\n00:16:33,310 --> 00:16:33,810\n>> Yeah.\n\n299\n00:16:35,140 --> 00:16:40,699\nAnd, wonder if I put it in transparent,\nif it'll get happy about that.\n\n300\n00:16:40,699 --> 00:16:41,977\nMode.\n\n301\n00:16:41,977 --> 00:16:44,790\n>> [LAUGH].\n\n302\n00:16:44,790 --> 00:16:47,150\n>> My poor type, what?\n\n303\n00:16:47,150 --> 00:16:48,350\nI had to spell that right too?\n\n304\n00:16:48,350 --> 00:16:48,850\nThere we go.\n\n305\n00:16:52,090 --> 00:16:55,880\nDemands I type everything correctly.\n\n306\n00:16:55,880 --> 00:16:57,200\n>> There you go.\n\n307\n00:16:57,200 --> 00:16:58,590\n>> Alright, yeah,\nwe got happy in transparent mode.\n\n308\n00:16:58,590 --> 00:16:59,330\n>> Yep.\n\n309\n00:16:59,330 --> 00:17:01,350\n>> All right, so there, now I should have.\n\n310\n00:17:01,350 --> 00:17:03,610\nThere it is, VLAN 3,012, right there.\n\n311\n00:17:03,610 --> 00:17:06,530\nSo I've got a VLAN in place,\nso it's happy.\n\n312\n00:17:06,530 --> 00:17:09,513\nAnd if I do a show spanning-tree now.\n\n313\n00:17:09,513 --> 00:17:10,230\nAlright?\n\n314\n00:17:10,230 --> 00:17:16,780\nThere's VLAN one, here's VLAN 2 and\nthen here's VLAN 3012.\n\n315\n00:17:16,780 --> 00:17:23,480\nNotice my extended system ID is 3012,\nmy priority is 35,780.\n\n316\n00:17:23,480 --> 00:17:27,490\nAnd now if I were to\nfire up my calculator.\n\n317\n00:17:27,490 --> 00:17:28,049\nRight?\n\n318\n00:17:28,049 --> 00:17:32,747\nI'm just going to put in 35,780 and\nif I subtract 3,012,\n\n319\n00:17:32,747 --> 00:17:36,070\nthe VLAN number, I'm left with 32,768.\n\n320\n00:17:36,070 --> 00:17:36,577\nRight?\n\n321\n00:17:36,577 --> 00:17:40,460\nAnd how did it know that\n3,012 was the number?\n\n322\n00:17:40,460 --> 00:17:46,131\nWell if I take 35,780,\nor actually lets go,\n\n323\n00:17:46,131 --> 00:17:49,924\nlet's go programmer style.\n\n324\n00:17:49,924 --> 00:17:55,250\n35,780 and we convert that into binary.\n\n325\n00:17:55,250 --> 00:17:58,095\nRight?\nAnd then we just copy that.\n\n326\n00:17:58,095 --> 00:18:00,645\nI'll take that back to\nmy Notepad Window here.\n\n327\n00:18:00,645 --> 00:18:05,940\nSo 35,780 equals that, right?\n\n328\n00:18:05,940 --> 00:18:07,256\nAnd then remember my.\n\n329\n00:18:10,316 --> 00:18:15,320\nPriority, or let's just call it my format.\n\n330\n00:18:17,490 --> 00:18:19,910\nThe format is that, right?\n\n331\n00:18:19,910 --> 00:18:25,710\nSo, really just these first\nfour bits become my priority,\n\n332\n00:18:25,710 --> 00:18:28,300\nand the whole rest of\nit becomes the VLAN ID.\n\n333\n00:18:28,300 --> 00:18:31,570\nAnd so,\nI can like just the whole rest of this and\n\n334\n00:18:31,570 --> 00:18:35,220\nthrow that into the calculator and\nconvert that back to decimal.\n\n335\n00:18:35,220 --> 00:18:36,190\nAnd there it is, 3012.\n\n336\n00:18:36,190 --> 00:18:38,450\nSo that's how it's able to\nfigure that out, right?\n\n337\n00:18:38,450 --> 00:18:41,820\nIt's able to extract that and\nfigure out that\n\n338\n00:18:45,520 --> 00:18:50,460\nand so here, I'll just put like the x's\nthere because we didn't use that.\n\n339\n00:18:50,460 --> 00:18:53,670\nAnd then 32,768 equals and then it would\n\n340\n00:18:55,310 --> 00:18:57,600\nbasically have x's for\nthe whole rest of it, right.\n\n341\n00:18:57,600 --> 00:18:59,910\nThat's the two parts of that number.\n\n342\n00:18:59,910 --> 00:19:03,080\nSo we just have to remember that if I want\nto force somebody to become the root,\n\n343\n00:19:03,080 --> 00:19:05,480\nI'm going to have to do a little math,\nright?\n\n344\n00:19:05,480 --> 00:19:07,040\nBecause there's only certain numbers,\n\n345\n00:19:07,040 --> 00:19:09,930\nthese numbers right here that\nare really allowed for me to punch in.\n\n346\n00:19:12,440 --> 00:19:13,170\nAll right.\n\n347\n00:19:13,170 --> 00:19:16,100\nNow if you'll like Ronnie, and\nyou've got a mind like a steel trap,\n\n348\n00:19:16,100 --> 00:19:18,475\nyou've got these numbers memorized, okay?\n\n349\n00:19:18,475 --> 00:19:20,356\n>> [LAUGH] That's it.\n\n350\n00:19:20,356 --> 00:19:23,280\n>> So, when you want to make\nsomebody the root, you can go in and\n\n351\n00:19:23,280 --> 00:19:25,040\nmanually put them in.\n\n352\n00:19:25,040 --> 00:19:29,680\nIf you're like me, and your mind is not\nlike a steel trap, Cisco has your back.\n\n353\n00:19:29,680 --> 00:19:31,980\nSo, there's two ways to\nchange the priority.\n\n354\n00:19:31,980 --> 00:19:34,630\nThere's one way where we\nmanually put the number in.\n\n355\n00:19:34,630 --> 00:19:39,040\nThere's another way where we put\nin like a shortcut alias, and\n\n356\n00:19:39,040 --> 00:19:40,720\nCisco does the math for us.\n\n357\n00:19:40,720 --> 00:19:41,647\nAll right, so let's take a look at those.\n\n358\n00:19:45,665 --> 00:19:46,900\nAll right.\n\n359\n00:19:46,900 --> 00:19:51,410\nNow I already know in my topology\nthat switch one is the root, right?\n\n360\n00:19:51,410 --> 00:19:54,440\nAnd when I look on switch one here,\nI get that little message,\n\n361\n00:19:54,440 --> 00:19:57,520\nthis bridge is indeed the root.\n\n362\n00:19:57,520 --> 00:19:58,260\nOkay.\n\n363\n00:19:58,260 --> 00:20:00,590\nSo let's say that I want to\nmake switch two the root.\n\n364\n00:20:00,590 --> 00:20:03,000\nSwitch two is the least\nlikely to become the root.\n\n365\n00:20:04,080 --> 00:20:04,860\nI want to force it.\n\n366\n00:20:04,860 --> 00:20:05,660\n>> Right.\n\n367\n00:20:05,660 --> 00:20:09,280\n>> All I have to do is change its\npriority to be lower than anybody else.\n\n368\n00:20:09,280 --> 00:20:10,340\nAnd it'll become the root.\n\n369\n00:20:10,340 --> 00:20:11,180\nRight.\nSo I'm going to\n\n370\n00:20:11,180 --> 00:20:12,570\njump over to switch two and do that.\n\n371\n00:20:14,760 --> 00:20:19,850\nNow, it's done on a per switch,\nper VLAN basis.\n\n372\n00:20:19,850 --> 00:20:25,640\nSo I need to do this for each VLAN\nthat I want this to be the root for.\n\n373\n00:20:25,640 --> 00:20:28,310\nYou can have different root for\ndifferent VLANs.\n\n374\n00:20:28,310 --> 00:20:33,100\nFor example, I might want to have\nswitch two be the root for VLAN two and\n\n375\n00:20:33,100 --> 00:20:35,840\nswitch three be the root for VLAN three.\n\n376\n00:20:35,840 --> 00:20:37,484\nAnd switch one be the root for VLAN one.\n\n377\n00:20:37,484 --> 00:20:38,188\nRight?\n\n378\n00:20:38,188 --> 00:20:39,884\nYou can do that.\n\n379\n00:20:39,884 --> 00:20:40,590\nRight?\n\n380\n00:20:40,590 --> 00:20:42,952\nBut let's start simple and\nwe'll work up to that.\n\n381\n00:20:42,952 --> 00:20:43,640\nAll right?\n\n382\n00:20:43,640 --> 00:20:44,500\nSo just real simple.\n\n383\n00:20:44,500 --> 00:20:46,692\nI want to make switch two the root for\neverything.\n\n384\n00:20:46,692 --> 00:20:48,430\nAll right?\n\n385\n00:20:48,430 --> 00:20:51,384\nSo all I have to do is do a Spanning-Tree.\n\n386\n00:20:51,384 --> 00:20:54,880\nAnd you'll see you got a series\nof commands that are in there and\n\n387\n00:20:54,880 --> 00:20:58,855\nit's in these commands that we can start\nto modify whether we're the route.\n\n388\n00:20:58,855 --> 00:21:01,940\nRight?\nIt is done for each VLAN.\n\n389\n00:21:01,940 --> 00:21:06,640\nSo, you can do them one at a time or\nyou can do them by range, okay?\n\n390\n00:21:06,640 --> 00:21:09,740\nIf you want to do them all,\nyou just say 1-4094, all right?\n\n391\n00:21:09,740 --> 00:21:14,390\nThat's going to get them all.\n\n392\n00:21:14,390 --> 00:21:17,450\nBut if you just want to do a single VLAN,\nyou could put in here, one or\n\n393\n00:21:17,450 --> 00:21:18,530\ntwo or whatever.\n\n394\n00:21:18,530 --> 00:21:20,220\nI'll do the whole thing, okay?\n\n395\n00:21:21,432 --> 00:21:26,410\nAnd then, we specify that we\nwant to change the priority, and\n\n396\n00:21:26,410 --> 00:21:28,030\nwhat we want that priority number to be.\n\n397\n00:21:28,030 --> 00:21:29,110\nAnd see how it warns us?\n\n398\n00:21:29,110 --> 00:21:32,944\n>> Yeah.\n>> Needs to be an increment of 4,096.\n\n399\n00:21:32,944 --> 00:21:34,060\nAll right.\n\n400\n00:21:34,060 --> 00:21:36,060\nI know that everybody else is 32,768.\n\n401\n00:21:36,060 --> 00:21:39,540\nSo I'm going to pick something really low.\n\n402\n00:21:39,540 --> 00:21:41,491\nI'm going to pick 4,096.\n\n403\n00:21:41,491 --> 00:21:42,360\nAll right?\n\n404\n00:21:42,360 --> 00:21:46,850\nWhen I set that, I now have a lower\npriority than everyone else.\n\n405\n00:21:46,850 --> 00:21:49,530\nSo the next time an election occurs,\nI'm gonna win.\n\n406\n00:21:49,530 --> 00:21:50,630\nAll right?\n\n407\n00:21:50,630 --> 00:21:51,530\nWhen does that election occur?\n\n408\n00:21:51,530 --> 00:21:52,779\nIt should have already happened.\n\n409\n00:21:55,454 --> 00:21:57,040\nAnd it has.\n\n410\n00:21:57,040 --> 00:22:00,010\nSo I just did a show spanning tree and.\n\n411\n00:22:00,010 --> 00:22:00,740\n>> There it is.\n\n412\n00:22:00,740 --> 00:22:01,580\nThis bridge is root.\n\n413\n00:22:01,580 --> 00:22:02,190\n>> We root.\n\n414\n00:22:02,190 --> 00:22:05,410\n>> Yep.\nAnd notice that it actually does say for\n\n415\n00:22:05,410 --> 00:22:07,170\nvlan 1 right now.\n\n416\n00:22:07,170 --> 00:22:10,490\nSo on all three other switches\nin VLAN one was running,\n\n417\n00:22:10,490 --> 00:22:14,550\nnow this has been elected\nas the root bridge for us.\n\n418\n00:22:14,550 --> 00:22:18,070\nSo affecting this is actually really\nhelpful in that environment where we\n\n419\n00:22:18,070 --> 00:22:20,670\nneed a switch with more power\n\n420\n00:22:20,670 --> 00:22:23,490\nthat will actually be able to handle\nall the traffic going through it.\n\n421\n00:22:23,490 --> 00:22:27,570\nRemember that for us, the root bridge\nis where all data has to flow through.\n\n422\n00:22:27,570 --> 00:22:30,300\nAnd so this is why it's going to become\nmore critical when we start actually doing\n\n423\n00:22:30,300 --> 00:22:33,650\nthe per VLAN, and be able to divide\nthat traffic up a little bit more.\n\n424\n00:22:34,690 --> 00:22:37,130\n>> Yup.\nSo if we were to revisit our diagram,\n\n425\n00:22:37,130 --> 00:22:39,250\nnow that switch two is the root.\n\n426\n00:22:39,250 --> 00:22:42,840\nAll of its ports are going to\nbecome designated forwarding ports.\n\n427\n00:22:42,840 --> 00:22:43,740\nBecause it's the route,\n\n428\n00:22:43,740 --> 00:22:47,220\nand it's gonna be up to switch one and\nswitch three to shut off a port.\n\n429\n00:22:47,220 --> 00:22:49,510\nWe already know that switch one\nhas the lowest MAC address, so\n\n430\n00:22:49,510 --> 00:22:51,270\nswitch three has a higher MAC address.\n\n431\n00:22:51,270 --> 00:22:55,750\nIt'll have to shut off a port, and so what\nshould have happened was when that ran\n\n432\n00:22:55,750 --> 00:22:58,540\nswitch three should have transitioned\nto this port right here,\n\n433\n00:22:58,540 --> 00:22:59,990\ninto a blocking port, right.\n\n434\n00:22:59,990 --> 00:23:01,770\nBecause you've got switch two.\n\n435\n00:23:01,770 --> 00:23:03,280\nThat would be a root port.\n\n436\n00:23:03,280 --> 00:23:04,920\nThat would be a root port.\n\n437\n00:23:04,920 --> 00:23:10,020\nThis one would become a designated port\nand this guy right here would get shut\n\n438\n00:23:10,020 --> 00:23:15,190\noff as a non-designated blocking port.\n\n439\n00:23:15,190 --> 00:23:21,130\nNow I mentioned that we might want to set\ndifferent routes for different VLANs.\n\n440\n00:23:21,130 --> 00:23:22,530\nWhy would we want to do that?\n\n441\n00:23:22,530 --> 00:23:24,590\nWell, here's the problem.\n\n442\n00:23:24,590 --> 00:23:25,965\nNot so much a problem, the opportunity.\n\n443\n00:23:25,965 --> 00:23:26,750\nRight?\n\n444\n00:23:26,750 --> 00:23:29,909\nIs we've got redundant connections\nbetween these switches.\n\n445\n00:23:31,950 --> 00:23:36,920\nIf the link between switch two and\nswitch one were to fail,\n\n446\n00:23:36,920 --> 00:23:41,090\nthen this link over here would come up and\nwe'd have fail over.\n\n447\n00:23:41,090 --> 00:23:44,060\nBut as long as that\nfirst link was healthy,\n\n448\n00:23:44,060 --> 00:23:45,900\nthe second link would never come up.\n\n449\n00:23:45,900 --> 00:23:48,975\nAnd so this second cable,\nthis cable right here,\n\n450\n00:23:48,975 --> 00:23:53,674\nwould never get used and it would be\nsitting there not Pushing any real data.\n\n451\n00:23:53,674 --> 00:23:57,050\nWouldn't it be nice if we could\ndo some load distribution.\n\n452\n00:23:57,050 --> 00:24:00,490\nSpread our band width\nconsumption across these lines.\n\n453\n00:24:00,490 --> 00:24:04,004\nYou can when you have multiple routes.\n\n454\n00:24:04,004 --> 00:24:04,821\n>> Yep.\n\n455\n00:24:04,821 --> 00:24:09,420\n>> So for example let's say\nI have vlan's one and two.\n\n456\n00:24:09,420 --> 00:24:10,210\nOkay?\n\n457\n00:24:10,210 --> 00:24:11,780\nIf switch two is the route for\n\n458\n00:24:11,780 --> 00:24:15,980\nboth, then that other link is gonna\nget shut off just like I said.\n\n459\n00:24:15,980 --> 00:24:21,330\nBut let's say that switch\ntwo is the root for VLAN 1.\n\n460\n00:24:21,330 --> 00:24:26,126\nAnd let's say that switch\n3 is the root for VLAN 2.\n\n461\n00:24:26,126 --> 00:24:26,630\nOkay?\n\n462\n00:24:26,630 --> 00:24:32,500\nWell, with switch 2,\nit's basically going to have\n\n463\n00:24:32,500 --> 00:24:37,150\nroot ports that are going to come\nout like this, so this is VLAN 1.\n\n464\n00:24:37,150 --> 00:24:40,290\nAnd the loop will have to be\nblocked on this other link,\n\n465\n00:24:40,290 --> 00:24:42,050\nthe link between switch 1 and switch 3.\n\n466\n00:24:42,050 --> 00:24:44,290\nThis link right here, okay?\n\n467\n00:24:44,290 --> 00:24:45,950\nSo these two guys, take a look at it.\n\n468\n00:24:45,950 --> 00:24:48,020\nSwitch 3 has the worst MAC address.\n\n469\n00:24:48,020 --> 00:24:52,160\nSo for VLAN 1,\nthat port will get shut off right there.\n\n470\n00:24:52,160 --> 00:24:54,270\nAll right?\nSo this is what my VLAN 1 topology\n\n471\n00:24:54,270 --> 00:24:57,610\nwould look like with switch\n2 as the root for VLAN 1.\n\n472\n00:24:57,610 --> 00:25:02,600\nIf switch 3 is the root for\nVLAN 2, root for\n\n473\n00:25:02,600 --> 00:25:07,579\nanother VLAN, well, it'll have its\nroot ports that come out like this.\n\n474\n00:25:09,340 --> 00:25:10,290\nRight?\n\n475\n00:25:10,290 --> 00:25:12,370\nAnd then it's the link\nbetween switch 1 and\n\n476\n00:25:12,370 --> 00:25:15,560\nswitch 2 that has to block\npart of the connection.\n\n477\n00:25:15,560 --> 00:25:17,890\nSwitch 2 has the worst Mac address so\n\n478\n00:25:17,890 --> 00:25:20,040\nit will be this link right\nhere that gets blocked.\n\n479\n00:25:20,040 --> 00:25:23,060\nSee how it's a different decision for\neach VLAN.\n\n480\n00:25:23,060 --> 00:25:27,790\nAnd at the end of the day, this link\nright here will carry VLAN 1 traffic.\n\n481\n00:25:27,790 --> 00:25:30,690\nThis link right here will\ncarry VLAN 2 traffic.\n\n482\n00:25:30,690 --> 00:25:33,550\nSo now, we're distributing,\nkind of load balancing,\n\n483\n00:25:33,550 --> 00:25:35,850\ndepending on the traffic on the VLAN.\n\n484\n00:25:35,850 --> 00:25:37,860\nSome VLAN traffic going over one link.\n\n485\n00:25:37,860 --> 00:25:39,590\nSome VLAN traffic going over another link.\n\n486\n00:25:39,590 --> 00:25:42,270\nThat's the advantage of\nhaving multiple routes.\n\n487\n00:25:45,830 --> 00:25:47,360\n>> Are we ready to get into configuration,\nor are we?\n\n488\n00:25:47,360 --> 00:25:51,300\n>> Yeah, so\nthe configuration I did back here,\n\n489\n00:25:51,300 --> 00:25:54,100\nI took switch 2 and\nI issued this command right here.\n\n490\n00:25:54,100 --> 00:25:57,423\nSet up for every VLAN Priority 4096.\n\n491\n00:25:57,423 --> 00:25:59,629\nAll right?\n\n492\n00:25:59,629 --> 00:26:04,735\nIf I didn't know the math,\nif I didn't know the numbers or\n\n493\n00:26:04,735 --> 00:26:07,495\nwhatever, there was another way\nI could have done it, right?\n\n494\n00:26:07,495 --> 00:26:09,400\nSo I'm just gonna put it back.\n\n495\n00:26:09,400 --> 00:26:10,470\nI'm putting it back to the way it was.\n\n496\n00:26:14,830 --> 00:26:15,600\nThere we go.\n\n497\n00:26:15,600 --> 00:26:17,740\nAll right, the default is 32,768.\n\n498\n00:26:17,740 --> 00:26:20,540\nSo when I put that command in,\n\n499\n00:26:20,540 --> 00:26:24,670\nthe command actually disappears from\nconfig because you don't need it anymore.\n\n500\n00:26:26,070 --> 00:26:32,250\nBut what I could have done was instead\nof saying priority in a number,\n\n501\n00:26:32,250 --> 00:26:35,520\nI could have said root, right?\n\n502\n00:26:35,520 --> 00:26:40,060\nUse an alias, and there you can say\nroot primary or root secondary.\n\n503\n00:26:41,070 --> 00:26:44,870\nRoot primary will change it to\na number to make you the root, and\n\n504\n00:26:44,870 --> 00:26:48,260\nroot secondary will change it to\na number to make you basically a backup.\n\n505\n00:26:48,260 --> 00:26:54,825\nAnd so I could say,\nspanning-tree VLAN one root primary.\n\n506\n00:26:54,825 --> 00:26:58,338\nRight?\nThat's going to make me the root for\n\n507\n00:26:58,338 --> 00:26:59,250\nVLAN one.\n\n508\n00:27:00,280 --> 00:27:04,750\nAnd I can say, VLAN two root secondary.\n\n509\n00:27:07,590 --> 00:27:12,370\n>> Now the idea of us configuring it\nthis way allows us then to actually\n\n510\n00:27:12,370 --> 00:27:15,630\nensure that all VLAN one traffic\nwill held through switch two.\n\n511\n00:27:15,630 --> 00:27:21,070\nBut then if something happens to\nthe route bridge or VLAN two though,\n\n512\n00:27:21,070 --> 00:27:24,770\nthis will now also become\nthe actual route, the primary or\n\n513\n00:27:26,100 --> 00:27:31,100\nroute bridge for VLAN two as well.\n\n514\n00:27:31,100 --> 00:27:34,370\nSo having this secondary configuration\nis one of the good reasons why\n\n515\n00:27:34,370 --> 00:27:35,005\nwe wanna do that.\n\n516\n00:27:35,005 --> 00:27:37,610\n>> Yap.\nAnd if we take a look at what our config\n\n517\n00:27:37,610 --> 00:27:43,590\nlooks like, I'm just gonna do\na show spanning-tree, all right?\n\n518\n00:27:43,590 --> 00:27:46,860\nHere on VLAN0001,\nI see that I did become the root.\n\n519\n00:27:46,860 --> 00:27:51,220\nAnd that my priority was set to 24,576.\n\n520\n00:27:51,220 --> 00:27:51,997\nIt's actually right here.\n\n521\n00:27:51,997 --> 00:27:54,856\nI didn't have to come up\nwith that number though,\n\n522\n00:27:54,856 --> 00:27:58,070\nalthough if I go back to my\nnotes it's in there, right.\n\n523\n00:27:58,070 --> 00:27:59,184\nThere's 24,576.\n\n524\n00:27:59,184 --> 00:28:03,990\nIt took 32,768 and\nit went down two increments.\n\n525\n00:28:03,990 --> 00:28:06,960\nIt went down one increment of 4,096 and\nthen a second.\n\n526\n00:28:06,960 --> 00:28:12,960\nAnd the reason it went down two Is because\nthe secondary command only goes down one.\n\n527\n00:28:12,960 --> 00:28:16,750\nSo if I come back here so\non VLAN one I had 32.\n\n528\n00:28:16,750 --> 00:28:18,720\nI don't have any ports on VLAN 2.\n\n529\n00:28:18,720 --> 00:28:19,527\nLet me get one real quick.\n\n530\n00:28:26,074 --> 00:28:27,049\nThere we go.\n\n531\n00:28:27,049 --> 00:28:28,176\nLet's try that again.\n\n532\n00:28:28,176 --> 00:28:33,483\nSo, now when I look at it All right,\n\n533\n00:28:33,483 --> 00:28:37,770\nthere's VLAN one and\nI've got that priority of 24,576.\n\n534\n00:28:37,770 --> 00:28:42,900\nHere's VLAN two,\nmy priority is 28,672, right?\n\n535\n00:28:42,900 --> 00:28:50,780\nSo you've got 32,768 right beneath it,\n28,672, right beneath that, 24,576.\n\n536\n00:28:50,780 --> 00:28:54,610\nSo those commands that I put in,\nthese two right here.\n\n537\n00:28:56,510 --> 00:29:01,270\nThis one and that one.\n\n538\n00:29:01,270 --> 00:29:02,150\nThose two.\n\n539\n00:29:02,150 --> 00:29:04,784\nThey're just alias' alia's for\nthose numbers so\n\n540\n00:29:04,784 --> 00:29:06,632\nI don't have to remember the math.\n\n541\n00:29:06,632 --> 00:29:07,132\n>> All right.\n\n542\n00:29:07,132 --> 00:29:11,330\nAnd when we configure it on one, we wanna\nconfigure of course the other side for\n\n543\n00:29:11,330 --> 00:29:12,960\nredundancy as well.\n\n544\n00:29:12,960 --> 00:29:15,740\nSo, don't just configure it on one,\nI guess you could but\n\n545\n00:29:15,740 --> 00:29:21,150\nputting in the spanning tree for\nthe primary on VLAN 2.\n\n546\n00:29:21,150 --> 00:29:22,840\nAnd is also going to be helpful for\nus too.\n\n547\n00:29:22,840 --> 00:29:25,720\n>> So, on the other switch and what I\nalways end up doing because I get to be\n\n548\n00:29:25,720 --> 00:29:29,290\na lazy typer here is I kind of copy and\npast the commands and\n\n549\n00:29:29,290 --> 00:29:30,910\nI'm just going to change the VLANs around.\n\n550\n00:29:30,910 --> 00:29:34,710\nSo, on the other switch,\nI'll make it the route for VLAN 2 and\n\n551\n00:29:34,710 --> 00:29:38,730\nI'll make it the secondary for VLAN 1,\nassuming those VLANs are present.\n\n552\n00:29:38,730 --> 00:29:40,810\nI might have to modify that a little bit.\n\n553\n00:29:40,810 --> 00:29:44,168\nSo let me jump over to switch three,\nand we'll get that set there also.\n\n554\n00:29:48,741 --> 00:29:52,350\nAll right, so it does not have VLAN's\ntwo and three, so I'll create those.\n\n555\n00:29:54,910 --> 00:29:58,420\nApparently VTP is,\nit's my trunks that are messed up.\n\n556\n00:29:58,420 --> 00:30:00,570\nWe haven't actually set up our trunks yet.\n\n557\n00:30:00,570 --> 00:30:04,749\nAll right, so now if I go in here and just\npaste those two commands in, this guy will\n\n558\n00:30:04,749 --> 00:30:08,647\nbecome the route for VLAN two, but\nit will become the back-up for VLAN one.\n\n559\n00:30:12,188 --> 00:30:14,790\nAnd apparently not happened yet.\n\n560\n00:30:14,790 --> 00:30:16,220\nWe'll have to give it a moment.\n\n561\n00:30:16,220 --> 00:30:17,700\n>> No.\nVLAN two, we should be able to.\n\n562\n00:30:17,700 --> 00:30:19,300\n>> Oh.\nI got it backwards, don't I.\n\n563\n00:30:19,300 --> 00:30:22,000\nSo VLAN one does have its proper priority.\n\n564\n00:30:22,000 --> 00:30:25,490\nAnd then, VLAN two, yup,\nwe've already become the root and\n\n565\n00:30:25,490 --> 00:30:27,100\nwe've got that even lower priority.\n\n566\n00:30:28,150 --> 00:30:33,020\n>> So, Don, if we were to shut off,\nlet's say, the port to switch number two.\n\n567\n00:30:33,020 --> 00:30:37,860\nIn theory this should now become also the\nroot bridge for VLAN number one, right?\n\n568\n00:30:37,860 --> 00:30:42,350\n>> Yeah, so switch two is the root,\nand if something were to happen to it,\n\n569\n00:30:42,350 --> 00:30:45,880\nlike if I were to reach back here and\nunplug switch two's cables.\n\n570\n00:30:45,880 --> 00:30:48,070\nWhich, we've got these two cables here.\n\n571\n00:30:48,070 --> 00:30:50,740\nOh, if I do it,\nI'm going to lose my connection.\n\n572\n00:30:50,740 --> 00:30:51,990\nOh no I'm not.\n\n573\n00:30:51,990 --> 00:30:52,800\nYep.\n\n574\n00:30:52,800 --> 00:30:58,910\nSo if I pull these guys there, so\nswitch two just went completely offline,\n\n575\n00:30:58,910 --> 00:31:01,140\nand\n>> Did we lose our connection?\n\n576\n00:31:01,140 --> 00:31:07,700\n>> Well, I'm going to lose my\nconnection for a second because rapid.\n\n577\n00:31:07,700 --> 00:31:10,660\nWe didn't configure rapid\nspanning-tree on all of them, so\n\n578\n00:31:10,660 --> 00:31:13,160\nnow I've got to wait for\nregular spanning-tree to kick in.\n\n579\n00:31:13,160 --> 00:31:18,140\nSo, in the episode this morning\nwe did rapid spanning-tree,\n\n580\n00:31:18,140 --> 00:31:19,820\nwhich is very fast failover.\n\n581\n00:31:19,820 --> 00:31:23,610\nBut we didn't set it up on all of\nthe switches, and this particular is,\n\n582\n00:31:23,610 --> 00:31:25,879\nI believe, still running,\nactually, we can double check.\n\n583\n00:31:27,810 --> 00:31:32,150\nIt is, oh, no, it says it's running rapid,\nit just didn't fail over very fast.\n\n584\n00:31:32,150 --> 00:31:35,180\nSo, just let me see if I can restart.\n\n585\n00:31:35,180 --> 00:31:35,720\nYep, there we go.\n\n586\n00:31:37,940 --> 00:31:40,355\nAll right, so it should be the root for\nall of them now,\n\n587\n00:31:40,355 --> 00:31:44,315\nor a t least v-lane one and v-lane two,\nand I can see it is the root for VLAN one.\n\n588\n00:31:44,315 --> 00:31:48,637\nEven when that high priority number\nthat was picked up and were the root for\n\n589\n00:31:48,637 --> 00:31:49,271\nVLAN two.\n\n590\n00:31:49,271 --> 00:31:54,972\nSo, we picked not only the winner But\nthe second place would take the back up.\n\n591\n00:31:54,972 --> 00:31:58,630\n>> By having this redundant\nconfiguration it really does help.\n\n592\n00:31:58,630 --> 00:32:02,220\nFirst of all, to spread out load, but\nsecondly to provide for that redundancy in\n\n593\n00:32:02,220 --> 00:32:05,562\ncase we do have a failure of a link\nbetween one of our root bridges.\n\n594\n00:32:06,935 --> 00:32:09,595\n>> All right, well, Ronnie,\nlet's stop here and take a break.\n\n595\n00:32:09,595 --> 00:32:11,120\n>> Okay.\n>> When we get back we've got some\n\n596\n00:32:11,120 --> 00:32:14,356\nmore spanning-tree protocol stuff to\nhit on, and we haven't even gotten into\n\n597\n00:32:14,356 --> 00:32:17,417\nlike link aggregation and all that good\nstuff, so we have some more there.\n\n598\n00:32:17,417 --> 00:32:21,573\nBut for right now let's stop,\nwe'll take a break, when we get back,\n\n599\n00:32:21,573 --> 00:32:23,770\nmore spanning-tree, after this.\n\n600\n00:32:23,770 --> 00:32:30,742\n[MUSIC]\n\n601\n00:32:30,742 --> 00:32:33,640\n[SOUND]\n>> All right, welcome back everybody.\n\n602\n00:32:33,640 --> 00:32:37,070\nSo we just got done taking\na look at adjusting the switch\n\n603\n00:32:37,070 --> 00:32:40,610\npriority to influence who\nbecomes the root, and\n\n604\n00:32:40,610 --> 00:32:43,290\nwhat we're gonna tackle next is\nsomething kinda interesting.\n\n605\n00:32:44,330 --> 00:32:47,560\nSpanning Tree Protocol on\na Cisco switch is turned on for\n\n606\n00:32:47,560 --> 00:32:49,990\nevery single port by default.\n\n607\n00:32:51,530 --> 00:32:54,080\nThat can cause some little problems.\n\n608\n00:32:54,080 --> 00:32:58,540\nIf you have an appliance like a network\nprinter or whatever, and it's set for\n\n609\n00:32:58,540 --> 00:33:03,610\nDHCP, when you plug it into\nthe port on the switch, the first\n\n610\n00:33:03,610 --> 00:33:06,850\nthing the switch is gonna do is it's gonna\ngo into listening and learning mode.\n\n611\n00:33:07,880 --> 00:33:13,080\nThat means for 30 seconds that port\nis not going to be allowed to talk.\n\n612\n00:33:13,080 --> 00:33:13,950\nFor 30 seconds.\n\n613\n00:33:13,950 --> 00:33:18,310\nNow, most systems like Windows, they take\nlonger than 30 seconds to boot anyway,\n\n614\n00:33:18,310 --> 00:33:19,700\nyou never notice.\n\n615\n00:33:19,700 --> 00:33:21,190\nBut on a network printer,\n\n616\n00:33:21,190 --> 00:33:25,460\nit may try three times to get a DHCP\naddress in that 30 second window.\n\n617\n00:33:25,460 --> 00:33:27,970\nNot get one and then give up, right?\n\n618\n00:33:27,970 --> 00:33:30,540\nAnd so you may have a device that's not\nable to communicate on the network.\n\n619\n00:33:30,540 --> 00:33:31,100\nIt should be able to.\n\n620\n00:33:31,100 --> 00:33:35,620\n>> One of the first things that we can\ndo then is we can use some commands\n\n621\n00:33:35,620 --> 00:33:38,860\nthat actually will allow\nus to block the idea of VPD\n\n622\n00:33:40,000 --> 00:33:42,010\nuse from actually having to be issued out.\n\n623\n00:33:42,010 --> 00:33:44,669\nThose ports in which we have what\nwe call access types of devices.\n\n624\n00:33:46,440 --> 00:33:49,918\n>> Yeah, there's a simple setting,\nit's called PortFast.\n\n625\n00:33:49,918 --> 00:33:53,650\nAnd with PortFast, we can give\nthe port the benefit of the doubt.\n\n626\n00:33:53,650 --> 00:33:55,915\nThe default for\nspanning tree is not to be trusting.\n\n627\n00:33:55,915 --> 00:34:00,000\nThen if somebody plugs in and\nit immediately holds them down.\n\n628\n00:34:00,000 --> 00:34:04,580\nAnd it says, I'm gonna wait 30 seconds\nbefore I trust you enough to let you talk.\n\n629\n00:34:04,580 --> 00:34:06,580\nIt's all about distrust.\n\n630\n00:34:06,580 --> 00:34:08,440\nBut with PortFast, we do the opposite.\n\n631\n00:34:08,440 --> 00:34:11,470\nWe say, instead,\ngive the port the benefit of the doubt.\n\n632\n00:34:11,470 --> 00:34:15,520\nLet it come up immediately,\nbut watch it for BPDUs.\n\n633\n00:34:15,520 --> 00:34:19,870\nIf you see any BPDUs transition back\ninto listening and learning and\n\n634\n00:34:19,870 --> 00:34:20,820\ndo loop detection.\n\n635\n00:34:20,820 --> 00:34:23,470\nThat's what PortFast does.\n\n636\n00:34:23,470 --> 00:34:27,070\nSo if you've got trunk ports, ports that\nyou know are gonna be plugged into other\n\n637\n00:34:27,070 --> 00:34:29,690\nswitches, you do not\nwant PortFast on those.\n\n638\n00:34:29,690 --> 00:34:31,040\nThat's not what it's for.\n\n639\n00:34:31,040 --> 00:34:35,668\nBut if you've got ports that you know\nare access ports, that you know a laptop,\n\n640\n00:34:35,668 --> 00:34:40,712\na desktop, a printer, or a router, if you\nknow that's gonna be plugged in there, you\n\n641\n00:34:40,712 --> 00:34:45,370\ncan turn on PortFast mode and that will\nmake the port come up much, much faster.\n\n642\n00:34:45,370 --> 00:34:47,310\nSo let's take a look at an example.\n\n643\n00:34:47,310 --> 00:34:50,360\nSo here I am on switch one, and\n\n644\n00:34:50,360 --> 00:34:56,245\nif I take a quick look here,\nlet me look at port 11.\n\n645\n00:34:57,570 --> 00:35:02,190\nLet's see,\nI want to show IP interface brief.\n\n646\n00:35:02,190 --> 00:35:04,880\nAnd I want to include, there we go.\n\n647\n00:35:04,880 --> 00:35:06,640\nPort 11 on this switch is currently down.\n\n648\n00:35:07,810 --> 00:35:15,540\nSo if I take a look at the spanning\ntree output, there is no output for\n\n649\n00:35:15,540 --> 00:35:18,540\nport 11, because spanning tree doesn't\nrun on ports that are turned off.\n\n650\n00:35:19,940 --> 00:35:27,940\nBut what I'm gonna do is, I'm gonna plug\nin a device into port 11 on this switch.\n\n651\n00:35:27,940 --> 00:35:30,590\nAnd when I plug it in,\nthe port's gonna come up, and\n\n652\n00:35:30,590 --> 00:35:33,280\nspanning tree will start running\non that port immediately.\n\n653\n00:35:33,280 --> 00:35:36,140\nBut the port's gonna go through\nlistening and learning and for\n\n654\n00:35:36,140 --> 00:35:38,210\n30 seconds that port is\nnot gonna be able talk.\n\n655\n00:35:38,210 --> 00:35:40,750\nSo let me just plug this\nin to port number 11.\n\n656\n00:35:40,750 --> 00:35:43,940\n>> Yap.\n>> And that's gonna come up.\n\n657\n00:35:43,940 --> 00:35:47,850\nAnd so if I do like a show IP interface\nbrief, see how it went to up down?\n\n658\n00:35:47,850 --> 00:35:50,360\nAnd now it's in up, up.\n\n659\n00:35:50,360 --> 00:35:51,920\nBut if I do a show spanning tree,\n\n660\n00:35:51,920 --> 00:35:56,380\nsee how I'm blocking and\nactually I shouldn't be blocking.\n\n661\n00:35:56,380 --> 00:35:57,830\nI should be listening and learning.\n\n662\n00:35:57,830 --> 00:35:58,330\nWhy?\n\n663\n00:36:00,830 --> 00:36:02,854\nOh, there we go.\n\n664\n00:36:02,854 --> 00:36:04,090\nI'm being impatient.\n\n665\n00:36:04,090 --> 00:36:05,350\nSo it was listening.\n\n666\n00:36:05,350 --> 00:36:06,190\nNow it's learning and\n\n667\n00:36:06,190 --> 00:36:08,980\nI'm just sitting here running\nthe same command over and over again.\n\n668\n00:36:08,980 --> 00:36:11,480\nFor 15 seconds it's gonna be learning.\n\n669\n00:36:13,715 --> 00:36:14,515\nOh, you know what?\n\n670\n00:36:14,515 --> 00:36:17,075\nI forgot, we're in rapid mode.\n\n671\n00:36:17,075 --> 00:36:19,855\nIn rapid mode you don't have listening.\n\n672\n00:36:19,855 --> 00:36:23,185\nListening is merged with discarding and\nit's showing as blocking.\n\n673\n00:36:23,185 --> 00:36:25,405\nThat's why we're showing as blocking,\nforgot about that.\n\n674\n00:36:25,405 --> 00:36:28,205\nAnd then when straight into learning and\nthen in affording.\n\n675\n00:36:28,205 --> 00:36:30,055\nSo that's why the little\nface is different.\n\n676\n00:36:30,055 --> 00:36:31,825\nBut you see how it was held down.\n\n677\n00:36:31,825 --> 00:36:35,620\nIt was not allowed to talk until right\nthere when it flipped over to affording.\n\n678\n00:36:35,620 --> 00:36:37,990\nNow the port's allowed to talk and\nit's happy.\n\n679\n00:36:39,030 --> 00:36:42,280\nIf I had just plugged in a switch and\ncreated a loop, it would have found it.\n\n680\n00:36:42,280 --> 00:36:44,020\nThe loop never would\nhave come on the network.\n\n681\n00:36:45,080 --> 00:36:46,730\nBut if I plugged in a laptop,\n\n682\n00:36:46,730 --> 00:36:49,240\nthen all I really did was\ncreate 30 seconds of annoyance.\n\n683\n00:36:50,440 --> 00:36:52,730\nSo we can turn on PortFast to fix that.\n\n684\n00:36:54,220 --> 00:36:58,550\n>> The configuration for PortFast is us\ngetting into the interface itself, and\n\n685\n00:36:58,550 --> 00:37:01,970\nthen using the idea of our\nspanning tree configuration here.\n\n686\n00:37:03,320 --> 00:37:05,890\nAnd notice it gives us this nice warning.\n\n687\n00:37:05,890 --> 00:37:06,820\nThe warning just tells us,\n\n688\n00:37:06,820 --> 00:37:12,020\nhey look if this is a trunk, I'm not\ngonna be happy and it can cause loops.\n\n689\n00:37:12,020 --> 00:37:14,770\nBut if everything is an access\nport everything will be good.\n\n690\n00:37:14,770 --> 00:37:18,460\nAnd so most of them automatically give you\nat least this much unless you know it's\n\n691\n00:37:18,460 --> 00:37:22,690\nonly gonna apply if it is actually\nconfigured as an access port anyways.\n\n692\n00:37:23,890 --> 00:37:25,640\n>> So I just unplugged that system.\n\n693\n00:37:25,640 --> 00:37:30,751\nSo I unplugged that port and\nif I do a show IP\n\n694\n00:37:30,751 --> 00:37:36,770\ninterface brief, and I'll include 0/11.\n\n695\n00:37:36,770 --> 00:37:38,194\nI can see the port is down down.\n\n696\n00:37:42,198 --> 00:37:45,413\nAnd I can see there is no spanning\ntree running in that port right now,\n\n697\n00:37:45,413 --> 00:37:46,420\ncuz it's just down.\n\n698\n00:37:48,070 --> 00:37:53,520\nBut if I plug it in, I'm gonna see\na message about the port coming up.\n\n699\n00:37:53,520 --> 00:37:55,700\nI'll wait until I get the message\nabout it coming up, there it goes.\n\n700\n00:37:56,870 --> 00:37:59,000\nAnd if I start to watch it, see that?\n\n701\n00:37:59,000 --> 00:38:02,830\nRight away it's already\ngone to forwarding, okay?\n\n702\n00:38:02,830 --> 00:38:06,810\nNow it's possible the cable I plugged\nin creates a loop, and if that happens,\n\n703\n00:38:06,810 --> 00:38:09,475\nit'll detect it and then block it out.\n\n704\n00:38:09,475 --> 00:38:11,900\nAnd do I have enough cables?\n\n705\n00:38:13,580 --> 00:38:14,500\nCan we simulate that?\n\n706\n00:38:14,500 --> 00:38:15,090\nI think we can.\n\n707\n00:38:15,090 --> 00:38:17,810\nI think we have enough crossover cables\nlaying around here to be able to do\n\n708\n00:38:17,810 --> 00:38:18,640\nsome damage.\n\n709\n00:38:18,640 --> 00:38:22,320\nSo let's see for\nexample if I do introduce a loop.\n\n710\n00:38:22,320 --> 00:38:25,680\nSo there's a common misconception\nout there on the internet.\n\n711\n00:38:25,680 --> 00:38:29,652\nAnd I've actually had this from\ninstructors who taught me back in the day\n\n712\n00:38:29,652 --> 00:38:33,180\nwhere they taught me and they said hey,\nwhen you turn on PortFast,\n\n713\n00:38:33,180 --> 00:38:36,790\nyou are disabling spanning tree on\nthe port, and that's just not true.\n\n714\n00:38:37,970 --> 00:38:41,510\nPortFast doesn't turn off spanning tree.\n\n715\n00:38:41,510 --> 00:38:43,976\nIt just makes it trust\nto the port by default.\n\n716\n00:38:43,976 --> 00:38:46,380\nIf you get even one BPDU on that port,\n\n717\n00:38:46,380 --> 00:38:49,010\nit'll immediately flip back\nto listening and learning.\n\n718\n00:38:49,010 --> 00:38:53,640\nAnd you'll go through those phases just\nlike normal and it'll block the loop.\n\n719\n00:38:53,640 --> 00:38:54,630\nIt will block it.\n\n720\n00:38:54,630 --> 00:38:57,200\nIt doesn't disable, so\njust be aware of that.\n\n721\n00:38:57,200 --> 00:38:59,540\nAnd what I'm gonna do is I am\ngonna create a loop on this one.\n\n722\n00:38:59,540 --> 00:39:01,580\nSo I'm gonna take that\nport back down again.\n\n723\n00:39:03,900 --> 00:39:06,780\nAnd let me steal a cable from\none of these other switches.\n\n724\n00:39:06,780 --> 00:39:07,550\nWho can I steal?\n\n725\n00:39:07,550 --> 00:39:08,279\nHow about this one?\n\n726\n00:39:12,350 --> 00:39:14,100\nSo that was port 11, right?\n\n727\n00:39:14,100 --> 00:39:18,550\nSo, I'm gonna create a loop\nbetween some of my other ports.\n\n728\n00:39:18,550 --> 00:39:22,550\nSo, I'm plugging in port,\nwhat port number is that, Ronnie?\n\n729\n00:39:22,550 --> 00:39:23,470\nNine.\n\n730\n00:39:23,470 --> 00:39:25,420\nSo I just brought up port number nine.\n\n731\n00:39:25,420 --> 00:39:29,280\nNow I don't really care about nine but\nnine's gonna help me create my loop here.\n\n732\n00:39:29,280 --> 00:39:33,640\nSo if I take a look at the interface,\ninterface nine is up.\n\n733\n00:39:33,640 --> 00:39:38,190\nAnd if I look at spanning tree it is\nblocking but I just need to wait for\n\n734\n00:39:38,190 --> 00:39:39,520\nit to come up.\n\n735\n00:39:39,520 --> 00:39:43,513\nSo it's gotta go through a whole listening\nand learning and all that good stuff.\n\n736\n00:39:43,513 --> 00:39:47,721\nSo we'll give it a moment\nhere while it does that.\n\n737\n00:39:47,721 --> 00:39:49,517\nAnd then, what I'm gonna do is,\n\n738\n00:39:49,517 --> 00:39:52,610\nI've now got port nine running\nto this switch behind me.\n\n739\n00:39:52,610 --> 00:39:56,080\nIt's a third party switch,\nactually a Linksys switch, so\n\n740\n00:39:56,080 --> 00:39:58,060\nI guess in a way it's made by Cisco.\n\n741\n00:39:58,060 --> 00:40:02,770\nAnd it's a cheapy home type switch,\nso it's not running spanning tree.\n\n742\n00:40:02,770 --> 00:40:06,470\nSo there we go, it just came up and\nit's healthy on port number nine.\n\n743\n00:40:06,470 --> 00:40:11,125\nNow I'm gonna run a crossover cable\nto plug it in to port number 11,\n\n744\n00:40:11,125 --> 00:40:12,930\ncreating a loop, right?\n\n745\n00:40:12,930 --> 00:40:14,260\nSo we'll go ahead and plug that in.\n\n746\n00:40:17,153 --> 00:40:20,970\nAnd then I'm gonna watch port number 11.\n\n747\n00:40:22,131 --> 00:40:24,771\nAll right, so 11 is now up.\n\n748\n00:40:24,771 --> 00:40:28,442\nAnd if I look at 11, it's showing up for\nall three VLANs now,\n\n749\n00:40:28,442 --> 00:40:30,810\nthat's why I'm seeing it three times.\n\n750\n00:40:30,810 --> 00:40:32,630\nVLAN one, two and three.\n\n751\n00:40:32,630 --> 00:40:38,650\nAnd as I look at it, they've all\ngone into blocking, and it should.\n\n752\n00:40:38,650 --> 00:40:42,978\nIf it's going to, it should've\ngone into listening mode by now.\n\n753\n00:40:42,978 --> 00:40:47,925\nBut it has not, which means Spanning Tree\nhas detected and is blocking it.\n\n754\n00:40:47,925 --> 00:40:53,025\nNow, with PortFast, if it truly\ndisabled Spanning Tree Protocol,\n\n755\n00:40:53,025 --> 00:40:56,755\nI wouldn't even see the port in the list,\nbetter yet see it as blocking.\n\n756\n00:40:56,755 --> 00:40:59,895\nThis shows me that\nthe instant it saw the BPDUs,\n\n757\n00:40:59,895 --> 00:41:02,400\nit immediately flipped it to blocking.\n\n758\n00:41:02,400 --> 00:41:05,130\nAnd now it's stopping it\nbecause it did create a loop.\n\n759\n00:41:05,130 --> 00:41:05,960\nThe loop is blocked.\n\n760\n00:41:05,960 --> 00:41:06,460\n>> Yep.\n\n761\n00:41:07,780 --> 00:41:10,432\nSo this is one of the more effective\ncommands that we do put in.\n\n762\n00:41:10,432 --> 00:41:14,216\nA lot of times when I configure\naccess ports, I go ahead and\n\n763\n00:41:14,216 --> 00:41:16,940\nI put in Spanning Tree PortFast anyways.\n\n764\n00:41:16,940 --> 00:41:19,840\nThat way,\nI know that I'm just gonna go ahead and\n\n765\n00:41:19,840 --> 00:41:22,810\nallow any access devices\ngetting plugged into it to\n\n766\n00:41:22,810 --> 00:41:25,720\nautomatically go from the blocking\nto the forwarding immediately.\n\n767\n00:41:25,720 --> 00:41:26,400\n>> Yep.\n\n768\n00:41:26,400 --> 00:41:30,004\nNow, if you know your port,\nlike if you've got a 48 port switch,\n\n769\n00:41:30,004 --> 00:41:32,290\nlike my switch two down here is 48 ports.\n\n770\n00:41:32,290 --> 00:41:33,110\nWhere is switch two?\n\n771\n00:41:33,110 --> 00:41:34,250\nHere, all right.\n\n772\n00:41:34,250 --> 00:41:37,503\nSwitch two is 48 ports,\nif I look at the whole configuration,\n\n773\n00:41:37,503 --> 00:41:39,720\nyou know it says 48 ports.\n\n774\n00:41:39,720 --> 00:41:42,660\nIf I know it's gonna be all\nworkstations plugged in here,\n\n775\n00:41:42,660 --> 00:41:45,360\nthere's two ways I can configure PortFast.\n\n776\n00:41:45,360 --> 00:41:50,695\nIf I wanna have control of\nit on a port by port basis,\n\n777\n00:41:50,695 --> 00:41:53,560\nyou can do a range command.\n\n778\n00:41:53,560 --> 00:41:58,932\nYou can say interface range fa0/1- 48.\n\n779\n00:41:58,932 --> 00:42:03,290\nAnd then spanning-tree portfast, right?\n\n780\n00:42:03,290 --> 00:42:05,290\nAnd that'll turn it on for all 48 ports.\n\n781\n00:42:05,290 --> 00:42:09,354\nIt'll be an individual command\non each interface, all right?\n\n782\n00:42:09,354 --> 00:42:12,109\nBut, if you want it on all of them\n>> Global.\n\n783\n00:42:12,109 --> 00:42:13,970\n>> It's better to do it globally.\n\n784\n00:42:13,970 --> 00:42:14,830\nExactly right Ronnie.\n\n785\n00:42:16,880 --> 00:42:20,882\n>> So from the global command,\nyou just simply run the same command here,\n\n786\n00:42:20,882 --> 00:42:23,170\nspanning-tree portfast.\n\n787\n00:42:23,170 --> 00:42:25,470\nAnd the key word at the end is default.\n\n788\n00:42:25,470 --> 00:42:28,939\nThat automatically turns it on for\nevery single port on that switch.\n\n789\n00:42:28,939 --> 00:42:30,923\nAnd but Don, what if I need to take it,\n\n790\n00:42:30,923 --> 00:42:33,785\nin other words what if I hook\nanother switch into this?\n\n791\n00:42:33,785 --> 00:42:34,305\n>> All right?\n\n792\n00:42:34,305 --> 00:42:35,870\n>> Since it's in default mode.\n\n793\n00:42:35,870 --> 00:42:36,450\n>> Great example.\n\n794\n00:42:36,450 --> 00:42:40,190\nSo port one and two on this switch,\nI've got uplinked to the other switches.\n\n795\n00:42:40,190 --> 00:42:43,970\nSo I know port one and\ntwo are gonna be pushing BPDUs.\n\n796\n00:42:43,970 --> 00:42:46,680\nSo I may want to turn it off for\nthose two.\n\n797\n00:42:46,680 --> 00:42:51,125\nAnd since it's just two, it's easier for\nme to do a range command.\n\n798\n00:42:51,125 --> 00:42:55,230\n[LAUGH] It's easier if I could type,\nnot like a moron.\n\n799\n00:42:55,230 --> 00:42:55,890\nThere we go.\n\n800\n00:42:55,890 --> 00:43:00,780\nAnd I can say, no spanning-tree portfast,\n\n801\n00:43:00,780 --> 00:43:04,260\nwhich just turns it off for\nthose two ports.\n\n802\n00:43:04,260 --> 00:43:06,290\nEvery other port has it turned on.\n\n803\n00:43:06,290 --> 00:43:07,960\nThese two have it turned off.\n\n804\n00:43:07,960 --> 00:43:09,870\n>> Right.\n>> All right.\n\n805\n00:43:09,870 --> 00:43:10,390\n>> Yeah.\n\n806\n00:43:10,390 --> 00:43:14,137\n>> So the way I look at it is,\nif I'm gonna have it turned on for\n\n807\n00:43:14,137 --> 00:43:19,123\nmore ports than I'm gonna have it turned\noff, I'll use the global command.\n\n808\n00:43:19,123 --> 00:43:20,730\nI'll turn it on for all of them.\n\n809\n00:43:20,730 --> 00:43:25,400\nIf I'm gonna have it turned off on more\nports than I'm gonna have it turned on,\n\n810\n00:43:25,400 --> 00:43:28,090\nthen I'll turn it on manually\non the interface, right?\n\n811\n00:43:28,090 --> 00:43:33,190\nSo whichever one it is you're doing less\nof, you do on the interface typically.\n\n812\n00:43:33,190 --> 00:43:35,300\nAll right, so either solution works.\n\n813\n00:43:35,300 --> 00:43:36,920\nIt's a great way to get that set up.\n\n814\n00:43:36,920 --> 00:43:40,619\nPortFast makes it where those clients\nplug in, they immediately come up, and\n\n815\n00:43:40,619 --> 00:43:41,525\nthere is no delay.\n\n816\n00:43:41,525 --> 00:43:43,870\nBut you still have loop protection.\n\n817\n00:43:43,870 --> 00:43:49,220\nYou've still got that insurance when\na loop could potentially be built up.\n\n818\n00:43:49,220 --> 00:43:49,720\n>> Yep.\n\n819\n00:43:51,410 --> 00:43:54,601\n>> All right, so we're looking at there,\nI should probably remove this loop.\n\n820\n00:43:54,601 --> 00:43:55,897\n>> [LAUGH]\n>> You know,\n\n821\n00:43:55,897 --> 00:43:58,894\ninstead of leaving that running for\ntoo long.\n\n822\n00:43:58,894 --> 00:44:01,830\nAll right so\nthat's Spanning Tree PortFast.\n\n823\n00:44:01,830 --> 00:44:06,270\nThere is also Spanning Tree UplinkFast,\n\n824\n00:44:06,270 --> 00:44:10,890\nwhich is designed for where you're\nuplinking between one switch and another.\n\n825\n00:44:10,890 --> 00:44:12,770\nPersonally I never use it.\n\n826\n00:44:12,770 --> 00:44:14,100\nRonnie do you?\n\n827\n00:44:14,100 --> 00:44:15,890\nYeah, and it's the same idea.\n\n828\n00:44:15,890 --> 00:44:20,630\nWhen you plug an uplink in,\nit's an uplink.\n\n829\n00:44:20,630 --> 00:44:21,336\nYou manually set it.\n\n830\n00:44:21,336 --> 00:44:22,050\nYou know it's there.\n\n831\n00:44:22,050 --> 00:44:23,024\nYou know it's not a loop.\n\n832\n00:44:23,024 --> 00:44:26,513\nAnd you can do UplinkFast\nto have it come up quickly.\n\n833\n00:44:26,513 --> 00:44:29,820\nBut then to watch for the loop, and\nif loop occurs, it'll still fix it.\n\n834\n00:44:29,820 --> 00:44:32,310\nIf there's no loop, you don't get a delay.\n\n835\n00:44:32,310 --> 00:44:34,170\nUsually your uplinks are really stable,\nthough.\n\n836\n00:44:34,170 --> 00:44:36,550\nIt's not like you're adding and\nremoving these cables on a daily basis.\n\n837\n00:44:36,550 --> 00:44:38,990\nSo, I don't see a lot of utility for that.\n\n838\n00:44:38,990 --> 00:44:40,070\n>> Yeah.\n\n839\n00:44:40,070 --> 00:44:43,067\nThe other one I just wanna mention, cuz I\nthink I mentioned it wrong earlier, okay.\n\n840\n00:44:43,067 --> 00:44:43,948\n>> Uh-oh.\n\n841\n00:44:43,948 --> 00:44:48,467\n>> Is I said that it stops BPDUs from\ncoming into a particular port, and\n\n842\n00:44:48,467 --> 00:44:50,950\nthat is actually the BPDU guard.\n\n843\n00:44:50,950 --> 00:44:56,610\nAnd I don't know why my mind linked\nPortFast in with BPDU guard, but it did.\n\n844\n00:44:56,610 --> 00:44:59,290\nWe don't really get into that\nin this particular level.\n\n845\n00:44:59,290 --> 00:45:01,480\nAt the CCMP, you get into it a lot more.\n\n846\n00:45:01,480 --> 00:45:02,550\nBut that idea and\n\n847\n00:45:02,550 --> 00:45:07,020\nthat description is, if a BPDU does come\nin on access port, it just blocks it.\n\n848\n00:45:07,020 --> 00:45:07,949\n>> Yeah and it's really cool.\n\n849\n00:45:07,949 --> 00:45:09,571\n>> Yeah, really nice.\n>> And I mean we can show them real quick\n\n850\n00:45:09,571 --> 00:45:10,890\njust so they can get an example.\n\n851\n00:45:10,890 --> 00:45:15,411\nSo, I created a loop on fa0/9 and fa0/11,\n\n852\n00:45:15,411 --> 00:45:19,190\nwas that the loop that I created earlier.\n\n853\n00:45:19,190 --> 00:45:23,779\nThat you can get in here and\nif you do a spanning-tree ?,\n\n854\n00:45:23,779 --> 00:45:27,040\nyou'll see BPDU Guard and BPDU Filter.\n\n855\n00:45:28,060 --> 00:45:31,750\nBPDU filter just says,\nif I see a BPDU in here, just delete it.\n\n856\n00:45:31,750 --> 00:45:34,560\nIt just deletes any BPDU that it sees and\nthat's it.\n\n857\n00:45:34,560 --> 00:45:38,780\nBut if you do bpduguard,\nit's a lot more aggressive.\n\n858\n00:45:38,780 --> 00:45:41,165\nIt says if you see a BPDU,\n\n859\n00:45:41,165 --> 00:45:45,670\ndon't just do loop detection,\ndon't hold it down or anything.\n\n860\n00:45:45,670 --> 00:45:48,600\nShut the port off, just turn it off right?\n\n861\n00:45:48,600 --> 00:45:49,836\nAnd that's really handy.\n\n862\n00:45:49,836 --> 00:45:52,930\nThere are a number of attacks that\nare out there that a hacker can\n\n863\n00:45:52,930 --> 00:45:57,100\nperform if they bring their own\nswitch in and plug into your network.\n\n864\n00:45:57,100 --> 00:46:00,868\nThis says, hey, if somebody plugs\na switch in, shut that port off.\n\n865\n00:46:00,868 --> 00:46:02,490\nSo I'm gonna turn that on.\n\n866\n00:46:02,490 --> 00:46:05,100\nSo that is now on for ports 9 and 11.\n\n867\n00:46:05,100 --> 00:46:08,205\nAnd if I repeat my little\nexample here from earlier,\n\n868\n00:46:08,205 --> 00:46:10,260\nI'm gonna plug in one end of this.\n\n869\n00:46:10,260 --> 00:46:13,106\nNow, this is a el cheapo switch, right?\n\n870\n00:46:13,106 --> 00:46:14,895\n>> This is like a $50 switch\nthat I'm plugging in here.\n\n871\n00:46:14,895 --> 00:46:16,766\n>> [LAUGH]\n>> So,\n\n872\n00:46:16,766 --> 00:46:19,260\nit doesn't do Spanning Tree Protocol.\n\n873\n00:46:19,260 --> 00:46:21,240\nIt doesn't do BPDUs.\n\n874\n00:46:21,240 --> 00:46:28,474\nSo when I plug it in,\nthat port should come up.\n\n875\n00:46:28,474 --> 00:46:32,339\nSo I just plugged into 0/9.\n\n876\n00:46:32,339 --> 00:46:33,912\nOh, it's showing down.\n\n877\n00:46:33,912 --> 00:46:37,008\nMaybe it does send BPDUs.\n\n878\n00:46:37,008 --> 00:46:38,761\nIt may have already triggered it, yeah.\n\n879\n00:46:44,929 --> 00:46:46,170\nLet's see.\n\n880\n00:46:51,541 --> 00:46:53,144\nThat's not what I want.\n\n881\n00:47:00,520 --> 00:47:01,790\nAm I on the right switch?\n\n882\n00:47:01,790 --> 00:47:02,890\nI'm not on the right switch,\nthat's my problem.\n\n883\n00:47:02,890 --> 00:47:04,120\n>> There it is, it's up now.\n\n884\n00:47:04,120 --> 00:47:05,172\n>> No, I'm on the wrong switch.\n\n885\n00:47:05,172 --> 00:47:05,980\n>> Yeah.\n>> [LAUGH] So\n\n886\n00:47:05,980 --> 00:47:08,227\nI just configured that on switch two.\n\n887\n00:47:08,227 --> 00:47:08,860\n>> [LAUGH]\n>> So\n\n888\n00:47:08,860 --> 00:47:10,570\nlet me get that and\nplug it into the right one.\n\n889\n00:47:10,570 --> 00:47:12,260\nThat would explain what's going on there.\n\n890\n00:47:12,260 --> 00:47:15,410\nOkay, so\nI just plugged it in here on this one.\n\n891\n00:47:15,410 --> 00:47:19,050\nAnd if I look,\nthis should be coming up now.\n\n892\n00:47:19,050 --> 00:47:20,820\n>> What port did we issue that on?\n\n893\n00:47:22,740 --> 00:47:24,390\n>> Didn't I do the configuration\nright here on switch two, or\n\n894\n00:47:24,390 --> 00:47:25,600\ndid I get myself confused?\n\n895\n00:47:25,600 --> 00:47:26,489\n>> I don't know.\n\n896\n00:47:26,489 --> 00:47:27,827\n[LAUGH]\n>> [LAUGH]\n\n897\n00:47:30,220 --> 00:47:31,460\n>> Yeah, we can find out real quick.\n\n898\n00:47:31,460 --> 00:47:33,280\n>> Yep.\n>> All right, here it is.\n\n899\n00:47:33,280 --> 00:47:37,155\nSo I set BPDU Guard on ports 9 and\n11 on switch 2, so\n\n900\n00:47:37,155 --> 00:47:40,616\nI am plugged into switch 2 on port 12 or\n13.\n\n901\n00:47:40,616 --> 00:47:45,015\n[LAUGH] I can't count,\nnine, there we go, okay.\n\n902\n00:47:45,015 --> 00:47:47,197\n>> [LAUGH]\n>> So now.\n\n903\n00:47:47,197 --> 00:47:50,454\nIf we do that.\n\n904\n00:47:50,454 --> 00:47:51,540\nThere we go.\nOkay.\n\n905\n00:47:51,540 --> 00:47:55,850\nSo Port 9 came up and this is\na like I said, it's a cheap switch.\n\n906\n00:47:55,850 --> 00:47:57,680\nIt's not pushing BPDUs so\n\n907\n00:47:57,680 --> 00:48:03,100\nit shouldn't have set off any kind\nof alarm or anything like that.\n\n908\n00:48:03,100 --> 00:48:05,170\nAnd, I'm just gonna double check there.\n\n909\n00:48:05,170 --> 00:48:06,360\nAnd, yep.\nIt's forwarding.\n\n910\n00:48:06,360 --> 00:48:07,080\nIt's up.\n\n911\n00:48:07,080 --> 00:48:08,000\nRight?\n\n912\n00:48:08,000 --> 00:48:10,800\nIf it was pushing BPU's we would\ndetect that and it would be a problem.\n\n913\n00:48:10,800 --> 00:48:14,517\nNow I've got my switch uplinked\nto this cheapy switch.\n\n914\n00:48:14,517 --> 00:48:20,570\nNow, I'm gonna run my cheapy switch\nback into our Cisco switch on portal 11,\n\n915\n00:48:20,570 --> 00:48:25,250\nwhich means any BPU the Sysco\nswitch sends out, is gonna pass\n\n916\n00:48:25,250 --> 00:48:29,050\nthrough the cheapy switch and come out\nthe other side, creating the loop.\n\n917\n00:48:29,050 --> 00:48:32,540\nAnd so we should start to see our own.\n\n918\n00:48:32,540 --> 00:48:33,550\n>> And it should be down.\n\n919\n00:48:33,550 --> 00:48:37,400\n>> It actually did, so\nI got a down down on 9 and\n\n920\n00:48:37,400 --> 00:48:43,460\na up up on 11, but it was 9 that set\noff the alarm for the BP to use.\n\n921\n00:48:43,460 --> 00:48:49,279\nAnd so now it is down, and\nif I do a show interface, FA0/9,\n\n922\n00:48:49,279 --> 00:48:54,300\nnotice here that it is down down-\n>> And error disabled.\n\n923\n00:48:54,300 --> 00:48:57,170\n>> Yup.\nError disabled means the switch shut it\n\n924\n00:48:57,170 --> 00:48:59,530\noff for a security violation, right?\n\n925\n00:48:59,530 --> 00:49:02,470\nAnd I must not have had\nterminal monitor turned on but\n\n926\n00:49:02,470 --> 00:49:06,690\nif I look in the log,\nI should be able to find in here.\n\n927\n00:49:06,690 --> 00:49:08,890\n>> And there it is, bpduguard.\n\n928\n00:49:08,890 --> 00:49:10,180\n>> Yep, there we go.\n\n929\n00:49:10,180 --> 00:49:12,220\nActually it starts right here, doesn't it?\n\n930\n00:49:12,220 --> 00:49:13,545\n>> Yeah.\n>> So, right there I can see\n\n931\n00:49:13,545 --> 00:49:16,070\nSPANTREE-2_BLOCK_BPDUGUARD.\n\n932\n00:49:16,070 --> 00:49:19,950\nReceived BPDU on port 9\nwith BPDUGUARD enabled.\n\n933\n00:49:19,950 --> 00:49:20,725\nDisabling the port.\n\n934\n00:49:20,725 --> 00:49:21,460\n>> Mm-hm.\n>> All right, so\n\n935\n00:49:21,460 --> 00:49:22,580\na great great level of security.\n\n936\n00:49:22,580 --> 00:49:23,870\n>> Right.\n>> Great way to prevent those rogue\n\n937\n00:49:23,870 --> 00:49:25,526\nswitches from making it on the network.\n\n938\n00:49:25,526 --> 00:49:28,454\nAll right.\n\n939\n00:49:28,454 --> 00:49:30,640\nSo all right.\n\n940\n00:49:30,640 --> 00:49:32,950\nSo I've got something else that\nI wanna talk about, Ronnie.\n\n941\n00:49:32,950 --> 00:49:35,640\n>> Okay.\n>> But we probably can't get it in\n\n942\n00:49:35,640 --> 00:49:36,310\nbefore the break.\n\n943\n00:49:36,310 --> 00:49:41,620\nSo the other thing that I wanna talk\nabout is sometimes we wanna loop and\n\n944\n00:49:41,620 --> 00:49:46,350\nwe want it for good reasons, and so we\nmight wanna have multiple connections to\n\n945\n00:49:46,350 --> 00:49:49,820\nget like, increased bandwidth or whatever,\nwhich spanning tree doesn't really allow.\n\n946\n00:49:49,820 --> 00:49:51,430\nSo I wanna talk about another technology.\n\n947\n00:49:51,430 --> 00:49:53,550\nBut let's save that one for\nafter the break.\n\n948\n00:49:54,700 --> 00:49:57,470\nAside from that,\nI think we've covered our bases for\n\n949\n00:49:57,470 --> 00:49:59,270\nwhat's on the CCNA exam for Spanning Tree.\n\n950\n00:49:59,270 --> 00:50:00,960\nCan you think of anything\nelse to throw in?\n\n951\n00:50:00,960 --> 00:50:02,190\n>> Nope.\nJust remember that\n\n952\n00:50:02,190 --> 00:50:04,100\nyou've gotta practice these commands,\nokay?\n\n953\n00:50:04,100 --> 00:50:05,900\nThere's no other way around it.\n\n954\n00:50:05,900 --> 00:50:07,110\nIf you don't know these commands,\n\n955\n00:50:07,110 --> 00:50:09,720\nmake sure that you actually do\nunderstand the difference between\n\n956\n00:50:09,720 --> 00:50:14,940\nPortfast a global configuration, and\nPortFast per interface here, okay?\n\n957\n00:50:14,940 --> 00:50:19,970\nUnderstand why we would actually put\nPortFast on only access ports as well.\n\n958\n00:50:19,970 --> 00:50:22,580\nSo make sure you understand\nwhat's going on here.\n\n959\n00:50:22,580 --> 00:50:26,640\nSo again, practice is the key is\nwhat we want to be able to do here.\n\n960\n00:50:26,640 --> 00:50:31,400\n>> Yep, and I'm just kinda running\nthrough here on my screen some of\n\n961\n00:50:31,400 --> 00:50:33,440\nthe different commands we've seen.\n\n962\n00:50:34,660 --> 00:50:36,400\nAnd so\n\n963\n00:50:36,400 --> 00:50:40,950\nthese are some of the ones that we've\nseen as far as like our global commands.\n\n964\n00:50:40,950 --> 00:50:42,550\nLet me just put here.\n\n965\n00:50:42,550 --> 00:50:45,290\nThese are globals.\n\n966\n00:50:45,290 --> 00:50:46,350\nWhat else did we do?\n\n967\n00:50:46,350 --> 00:50:50,860\nWe did like spanning-free\nportfast default, right?\n\n968\n00:50:50,860 --> 00:50:54,740\nAnd then on the interface, the interface.\n\n969\n00:50:54,740 --> 00:50:59,130\nOn the interface we did\nspinning-tree portfast.\n\n970\n00:50:59,130 --> 00:51:04,170\nYou know just for completeness, let me\nadd that in with no in the beginning.\n\n971\n00:51:04,170 --> 00:51:11,520\nWe also saw spanning-tree\nbpduguard enable.\n\n972\n00:51:11,520 --> 00:51:13,570\nAnd what else do we do?\n\n973\n00:51:13,570 --> 00:51:14,467\nI think that's probably about it?\n\n974\n00:51:14,467 --> 00:51:15,228\nRight?\n>> Yup. I think so.\n\n975\n00:51:15,228 --> 00:51:18,590\n>> So being in normal mode\nas well as rapid PVST,\n\n976\n00:51:18,590 --> 00:51:23,719\nchoosing who the root and\nthe secondary are, setting the priority,\n\n977\n00:51:23,719 --> 00:51:25,411\nnot a lot of commands.\n\n978\n00:51:25,411 --> 00:51:26,071\n>> Nope.\n>> Right.\n\n979\n00:51:26,071 --> 00:51:27,850\nBecause spanning tree protocol really\n\n980\n00:51:27,850 --> 00:51:32,650\ndoes work kind of, just out of the box,\nand is already configured,\n\n981\n00:51:34,060 --> 00:51:41,120\nso, you know, we have like show\nspanning-tree, show spanning-tree vLan 1,\n\n982\n00:51:41,120 --> 00:51:46,290\nshow spanning-tree vLan brief.\n\n983\n00:51:46,290 --> 00:51:48,260\nThat kind of trims off\nsome of the extra data.\n\n984\n00:51:48,260 --> 00:51:51,460\nSo this is some show commands that we use,\nand\n\n985\n00:51:51,460 --> 00:51:54,610\nI usually apply various filters\nto find exactly what I want.\n\n986\n00:51:54,610 --> 00:52:02,800\nSo, like you guys saw me doing, where I\nwould pipe that to include like 0/11.\n\n987\n00:52:02,800 --> 00:52:06,750\nAnd I would say,\njust show me the status of that one port.\n\n988\n00:52:06,750 --> 00:52:08,830\nAnd I do the same thing\nwith spanning tree.\n\n989\n00:52:12,100 --> 00:52:14,430\nSo I can see just\ninformation on that port.\n\n990\n00:52:14,430 --> 00:52:15,200\nThose are handy.\n\n991\n00:52:15,200 --> 00:52:16,610\nSaves you some time.\n\n992\n00:52:17,770 --> 00:52:20,980\nThey may or may not work on the exam\nbecause the exam simulator is not\n\n993\n00:52:20,980 --> 00:52:21,950\nvery powerful.\n\n994\n00:52:21,950 --> 00:52:24,190\nBut on the real equipment,\nthose work great and\n\n995\n00:52:24,190 --> 00:52:27,540\nit does save you from having to peruse\nyour config for a ton of stuff.\n\n996\n00:52:27,540 --> 00:52:30,785\nI'll also do show running-config,\n\n997\n00:52:30,785 --> 00:52:35,410\nincluding spanning-tree,\nto see your spanning configuration.\n\n998\n00:52:35,410 --> 00:52:42,420\nSo if I go back to switch 1, which I\nleft parked around here somewhere, and\n\n999\n00:52:42,420 --> 00:52:47,190\nI usually abbreviate it a good bit more,\nbut I'll write it all the way out here.\n\n1000\n00:52:49,030 --> 00:52:49,780\nThere we go.\n\n1001\n00:52:49,780 --> 00:52:54,180\nSo I can see, this one's in Rapid, that\nat least one port is set for PortFast,\n\n1002\n00:52:54,180 --> 00:52:55,860\nso you can kind of start to see that.\n\n1003\n00:52:55,860 --> 00:52:58,480\nAnd you can even get really\npowerful with this stuff, and\n\n1004\n00:52:58,480 --> 00:53:01,760\nyou say,\ninclude when there's an interface command.\n\n1005\n00:53:01,760 --> 00:53:06,820\nAnd so now I can see that it's actually\nFA0/11 that has port fast turned on, so.\n\n1006\n00:53:06,820 --> 00:53:07,670\n>> Yeah.\n\n1007\n00:53:07,670 --> 00:53:10,630\n>> So, you know, neat stuff you can\ndo with the command line filters\n\n1008\n00:53:10,630 --> 00:53:11,995\nto find the data you're looking for.\n\n1009\n00:53:11,995 --> 00:53:14,660\n>> And\nthey do call it out on the exams too.\n\n1010\n00:53:14,660 --> 00:53:15,230\n>> Yep, absolutely.\n\n1011\n00:53:15,230 --> 00:53:16,680\n>> So\nmake sure you pay attention there as well.\n\n1012\n00:53:18,002 --> 00:53:20,640\nAll right, well Ronnie let's stop here and\ntake a break.\n\n1013\n00:53:20,640 --> 00:53:24,623\nWhen we get back, we're gonna talk about\nways that we can make spanning tree\n\n1014\n00:53:24,623 --> 00:53:28,357\nbehave a little bit for us when we do\nwant to have multiple connections,\n\n1015\n00:53:28,357 --> 00:53:30,306\n[COUGH] excuse me, between a switch.\n\n1016\n00:53:30,306 --> 00:53:33,812\nAll right ladies and gentlemen stay tuned,\nwe'll be back in a few minutes.\n\n1017\n00:53:33,812 --> 00:53:41,311\n[MUSIC]\n\n1018\n00:53:41,311 --> 00:53:43,440\nAll right, welcome back everybody.\n\n1019\n00:53:43,440 --> 00:53:48,110\nSo, I hinted at something else\nthat I wanted to talk about,\n\n1020\n00:53:48,110 --> 00:53:50,300\nand now it is that time, right?\n\n1021\n00:53:50,300 --> 00:53:55,630\nSo there are times when we will want to\nrun multiple cables between a switch,\n\n1022\n00:53:55,630 --> 00:53:58,020\nand not have it detect as a loop.\n\n1023\n00:53:58,020 --> 00:54:00,730\nLet me just show you what\nI'm talking about, right?\n\n1024\n00:54:01,800 --> 00:54:05,370\nWe've got all sorts of stuff kind of\nmessed around on these switches now.\n\n1025\n00:54:05,370 --> 00:54:12,280\nBut if I go back onto switch one here,\nswitch one is no longer the root for\n\n1026\n00:54:12,280 --> 00:54:16,590\nany of the vLans, cuz we made switch\none and switch two the roots, right?\n\n1027\n00:54:16,590 --> 00:54:19,780\nAnd if I take a couple of cables.\n\n1028\n00:54:19,780 --> 00:54:25,500\nI'll pull some, I'll just pull\nsome random cables out of here and\n\n1029\n00:54:25,500 --> 00:54:27,530\nkind of move some things around.\n\n1030\n00:54:29,680 --> 00:54:32,510\nSo, here I am on switch one and\nlet's say for\n\n1031\n00:54:32,510 --> 00:54:36,690\nexample that I wanna uplink\nswitch one to switch two.\n\n1032\n00:54:36,690 --> 00:54:37,410\nRight?\n\n1033\n00:54:37,410 --> 00:54:38,620\nWell, switch one and\n\n1034\n00:54:38,620 --> 00:54:42,850\nswitch two already have a link on, what\nis it, port one there I think that runs.\n\n1035\n00:54:42,850 --> 00:54:43,890\nYeah, port one.\n\n1036\n00:54:43,890 --> 00:54:45,390\nAnd it's up and it's happy.\n\n1037\n00:54:45,390 --> 00:54:47,950\nThat's the uplink between the switches,\nright?\n\n1038\n00:54:47,950 --> 00:54:52,230\nBut what If I'm bottlenecking\non that link, right?\n\n1039\n00:54:52,230 --> 00:54:56,220\nI get a lot of excessive traffic, and\n\n1040\n00:54:56,220 --> 00:54:59,040\nit's exceeding the bandwidth of\nthat one link between the switches.\n\n1041\n00:54:59,040 --> 00:55:02,560\nWell I might wanna run more than one\ncable between those switches, not for\n\n1042\n00:55:02,560 --> 00:55:05,180\nredundancy, but to try and\nget more bandwidth, right?\n\n1043\n00:55:05,180 --> 00:55:06,310\nI want more bandwidth.\n\n1044\n00:55:06,310 --> 00:55:09,880\nWell, by default the switch won't let\nus do that, so for example, if I run,\n\n1045\n00:55:09,880 --> 00:55:14,270\nI'm gonna run from ports,\nlet's do like ports 13 and 14.\n\n1046\n00:55:14,270 --> 00:55:19,823\nI'm gonna go from 13 and\n14 on switch one to 13 and\n\n1047\n00:55:19,823 --> 00:55:25,635\n14 on switch two,\nwhich would be this one and this one.\n\n1048\n00:55:25,635 --> 00:55:29,697\n>> [SOUND]\n>> All right, so 13 and\n\n1049\n00:55:29,697 --> 00:55:34,450\n14 on switch one are now gonna be\nrun to 13 and 14 on switch two.\n\n1050\n00:55:34,450 --> 00:55:39,720\nNow, because I ran two cables from\none switch to another switch,\n\n1051\n00:55:39,720 --> 00:55:40,740\nthat's a loop, right?\n\n1052\n00:55:40,740 --> 00:55:43,670\nI've created a circle\nbetween the two switches.\n\n1053\n00:55:43,670 --> 00:55:46,690\nSpanning tree is not going to\nbe too happy about that, is it?\n\n1054\n00:55:46,690 --> 00:55:48,384\n>> So one thing that we can do,\n\n1055\n00:55:48,384 --> 00:55:51,865\nis that we can set up what we\ncall link aggregation here.\n\n1056\n00:55:51,865 --> 00:55:53,735\nWhere we can take multiple ports and\n\n1057\n00:55:53,735 --> 00:55:57,786\nlink them together by running those\ndifferent connections together and then\n\n1058\n00:55:57,786 --> 00:56:03,210\nuse the entire bandwidth between those two\nports so that we can get better bandwidth.\n\n1059\n00:56:03,210 --> 00:56:06,876\n>> And I can see already,\n[CROSSTALK] I forgot, so\n\n1060\n00:56:06,876 --> 00:56:11,858\nport 1 is already an uplink\nbetween switch 1 and switch 2, so\n\n1061\n00:56:11,858 --> 00:56:16,848\nboth the cables that we added\nare treated as a loop in this case.\n\n1062\n00:56:16,848 --> 00:56:21,718\nSo their blocking dead in the water that's\nthe end of that, and so they're shut off.\n\n1063\n00:56:21,718 --> 00:56:24,417\nSo, these two cables that I've plugged\nin there, they're both shut off.\n\n1064\n00:56:24,417 --> 00:56:28,936\nWell, like Ronnie said,\nwe can bond them together and\n\n1065\n00:56:28,936 --> 00:56:32,965\ninstead of having a single\n100 megabit line,\n\n1066\n00:56:32,965 --> 00:56:36,665\nI can make a single 200 megabit line.\n\n1067\n00:56:36,665 --> 00:56:39,340\nCisco switches support something\ncalled etherchannel, and\n\n1068\n00:56:39,340 --> 00:56:43,090\netherchannel is where we just combine\nmultiple cables together to form\n\n1069\n00:56:43,090 --> 00:56:46,280\none common connection,\none virtual connection.\n\n1070\n00:56:46,280 --> 00:56:48,810\nIt's port bonding and\nit is very very simple.\n\n1071\n00:56:48,810 --> 00:56:50,270\nA few things to throw out here.\n\n1072\n00:56:50,270 --> 00:56:53,560\nThat terminology, EtherChannel,\nthat's Cisco proprietary.\n\n1073\n00:56:53,560 --> 00:56:57,630\nThere's two modes it can operate in,\none which is proprietary and\n\n1074\n00:56:57,630 --> 00:56:59,300\none which is an open standard.\n\n1075\n00:56:59,300 --> 00:57:01,490\nSo, we're gonna see both of them here.\n\n1076\n00:57:01,490 --> 00:57:05,570\nThe other thing is, when it combines\nthese connections together,\n\n1077\n00:57:05,570 --> 00:57:07,600\nit's merging them for\nall intents and purposes, so\n\n1078\n00:57:07,600 --> 00:57:11,830\nthe configuration on the interfaces\nneeds to be basically the same.\n\n1079\n00:57:11,830 --> 00:57:13,120\nIt needs to be identical.\n\n1080\n00:57:13,120 --> 00:57:16,480\nIf you merge connections that aren't\nidentical, you'll have a lot of problems.\n\n1081\n00:57:16,480 --> 00:57:17,940\nAnd that brings me to my third point.\n\n1082\n00:57:17,940 --> 00:57:19,780\nWhich is the bandwidth.\n\n1083\n00:57:19,780 --> 00:57:24,440\nYou cannot bond gigabit and\nfast ethernet connections.\n\n1084\n00:57:24,440 --> 00:57:25,800\nThey need to be the same.\n\n1085\n00:57:25,800 --> 00:57:29,540\nSo, if you've got up to eight\nfast ethernet connections or\n\n1086\n00:57:29,540 --> 00:57:30,810\nup to eight gigabit connections,\n\n1087\n00:57:30,810 --> 00:57:34,850\nyou can bond them together to create an\n800 megabit or an 8 gigabyte connection.\n\n1088\n00:57:34,850 --> 00:57:37,545\nAnd it even works with a ten gig\ninterface, you can do up to eight,\n\n1089\n00:57:37,545 --> 00:57:40,644\nten gig interfaces for an 80 gigabyte\nconnection which is pretty sweet.\n\n1090\n00:57:40,644 --> 00:57:44,460\n[LAUGH] Never seen that, but\nit's gotta be pretty darn fast.\n\n1091\n00:57:44,460 --> 00:57:48,590\n>> Gotta have some big pocketbooks these\ndays to do it, but it can be done.\n\n1092\n00:57:48,590 --> 00:57:53,070\n>> So when we take a look at the idea of\nthe Etherchannel, and the two different\n\n1093\n00:57:53,070 --> 00:57:56,600\ntypes of port aggregation that we can do,\nthere's two varieties.\n\n1094\n00:57:56,600 --> 00:57:59,430\nWell, as we mentioned,\nthere's a proprietary version, and\n\n1095\n00:57:59,430 --> 00:58:00,870\nthen there's open standard.\n\n1096\n00:58:00,870 --> 00:58:01,500\nIs that what we call?\n\n1097\n00:58:01,500 --> 00:58:02,884\nOpen standard version?\n[INAUDIBLE]\n\n1098\n00:58:02,884 --> 00:58:03,488\n>> It is an open standard.\n\n1099\n00:58:03,488 --> 00:58:05,319\nYeah.\n>> So one is called LACP.\n\n1100\n00:58:05,319 --> 00:58:06,949\nThat's the way we normally refer to it.\n\n1101\n00:58:06,949 --> 00:58:07,449\n>> Mm-hm.\n\n1102\n00:58:07,449 --> 00:58:08,181\n>> Link Aggregation.\n\n1103\n00:58:08,181 --> 00:58:09,220\n>> Control Protocol.\n\n1104\n00:58:09,220 --> 00:58:10,410\n>> Control Protocol.\n\n1105\n00:58:10,410 --> 00:58:15,090\n>> And the other one is PAgP,\nor PadP when we do that, and\n\n1106\n00:58:15,090 --> 00:58:19,740\nthat one is the port aggregation protocol\n>> Yeah let me write these out,\n\n1107\n00:58:19,740 --> 00:58:21,390\nI forget them myself, right?\n\n1108\n00:58:21,390 --> 00:58:26,610\nSo link aggregation protocol,\nlink aggregation and control protocol..\n\n1109\n00:58:26,610 --> 00:58:30,610\nThat is an open standard, right?\n\n1110\n00:58:30,610 --> 00:58:36,400\nAnd then PAgP, and the G is\nlowercase because it's not really-\n\n1111\n00:58:36,400 --> 00:58:38,440\n>> It's Port aggregation.\n\n1112\n00:58:38,440 --> 00:58:40,380\nOr AG for Aggregation for us.\n\n1113\n00:58:40,380 --> 00:58:43,690\n>> And it is a Cisco Proprietary.\n\n1114\n00:58:45,340 --> 00:58:46,970\nIt's not really standard or anything.\n\n1115\n00:58:46,970 --> 00:58:49,290\nAnd then, there's just like,\nraw ether channel,\n\n1116\n00:58:49,290 --> 00:58:52,710\nwhich is the really old Cisco standard\nthat nobody really does anymore.\n\n1117\n00:58:52,710 --> 00:58:56,820\nBut the term Etherchannel, today, is\nused kind of to encompass both of these.\n\n1118\n00:58:56,820 --> 00:58:59,590\nAnd so when we set this up,\nwe really just have to pick,\n\n1119\n00:58:59,590 --> 00:59:02,310\ndo you wanna do the open standard, or\ndo you wanna do Cisco proprietary?\n\n1120\n00:59:02,310 --> 00:59:05,820\nAnd there's not really any benefit,\nanymore, to the Cisco proprietary one.\n\n1121\n00:59:05,820 --> 00:59:08,650\nThere used to be, but\nLACP is very powerful now, and\n\n1122\n00:59:08,650 --> 00:59:10,700\nit's pretty much the only one that I use.\n\n1123\n00:59:10,700 --> 00:59:11,600\n>> Yeah.\n\n1124\n00:59:11,600 --> 00:59:14,190\nNow, we might be saying,\nwell, why would I do that?\n\n1125\n00:59:14,190 --> 00:59:17,280\nIt's because you may be\nconnecting to other switches.\n\n1126\n00:59:17,280 --> 00:59:19,630\nSo learning this one is probably\nthe one you're gonna see.\n\n1127\n00:59:19,630 --> 00:59:22,880\nNow the strange thing\nabout the configuration in\n\n1128\n00:59:22,880 --> 00:59:26,030\nthis is that the configurations\nare not really that different\n\n1129\n00:59:26,030 --> 00:59:27,570\nuntil we get to see some keywords.\n\n1130\n00:59:27,570 --> 00:59:29,450\nAnd so we'll see that when we get into it.\n\n1131\n00:59:29,450 --> 00:59:31,360\n>> Yeah.\nWhen you configure link aggregation,\n\n1132\n00:59:31,360 --> 00:59:35,230\nwhen you configure either of these, it's a\nlot like dynamic trunking protocol, right?\n\n1133\n00:59:35,230 --> 00:59:38,280\nSo remember, with dynamic\ntrunking protocol, we said like,\n\n1134\n00:59:38,280 --> 00:59:43,355\nswitch port trunk mode auto,\nor desirable, or\n\n1135\n00:59:43,355 --> 00:59:47,735\nin each of those terms determine\nwhether we would try and build a trunk.\n\n1136\n00:59:47,735 --> 00:59:50,655\nOr we would only build a trunk\nif somebody else asked us.\n\n1137\n00:59:50,655 --> 00:59:52,855\nThat's how these are.\n\n1138\n00:59:52,855 --> 00:59:57,892\nWe have to define whether or\nnot we want to become a trunk or not.\n\n1139\n00:59:57,892 --> 00:59:59,802\nAnd so, let's take a look at those.\n\n1140\n00:59:59,802 --> 01:00:03,512\nSo, the first thing I need to do is I\nneed to take a look at my switch port\n\n1141\n01:00:03,512 --> 01:00:08,440\nconfiguration, so I'm gonna say,\nlet's start with port 13.\n\n1142\n01:00:08,440 --> 01:00:10,400\nSo if I look at port 13 right now,\n\n1143\n01:00:10,400 --> 01:00:13,680\nI've got it set switch port\nmode dynamic desirable.\n\n1144\n01:00:13,680 --> 01:00:17,670\nThis is a 3550, and so\nthat's kind of it's default.\n\n1145\n01:00:17,670 --> 01:00:19,990\nAnd 14 is set the same way.\n\n1146\n01:00:19,990 --> 01:00:23,440\nSo these guys, they're just set right\nnow where they do dynamic trunking.\n\n1147\n01:00:23,440 --> 01:00:26,730\nThey are both set the same,\nI can configure them however we need.\n\n1148\n01:00:26,730 --> 01:00:31,480\nBut I'll just start with port 13.\n\n1149\n01:00:31,480 --> 01:00:34,320\nFirst off, I want to make sure\nthat this guy is the trunk.\n\n1150\n01:00:34,320 --> 01:00:35,630\nI always want at the trunk.\n\n1151\n01:00:35,630 --> 01:00:41,893\nSo I'm gonna say switchport\ntrunk encapsulation .1q,\n\n1152\n01:00:41,893 --> 01:00:44,592\nswitchport mode trunk.\n\n1153\n01:00:44,592 --> 01:00:49,581\nAnd switchport nonegotiate.\n\n1154\n01:00:49,581 --> 01:00:50,700\nAll right.\n\n1155\n01:00:50,700 --> 01:00:55,070\nSo just issuing a couple of commands\nthere a force this port into trunking.\n\n1156\n01:00:55,070 --> 01:00:58,930\nNow, you do not have to\ntrunk to do either channel.\n\n1157\n01:00:58,930 --> 01:01:02,440\nYou can do either channel with access\nmode ports also, but we don't normally.\n\n1158\n01:01:02,440 --> 01:01:04,980\nNormally you do it with a trunk\nbecause that's where you\n\n1159\n01:01:04,980 --> 01:01:09,530\nreally need the bandwidth, the fact that a\nsingle PC only has 100 megabit connection,\n\n1160\n01:01:09,530 --> 01:01:13,820\nthat's not a big deal, but when your trunk\nbetween switches only has 100 megabit,\n\n1161\n01:01:13,820 --> 01:01:18,410\nthat's a bottleneck, so it is normally\na trunk that we're working with, and if I\n\n1162\n01:01:18,410 --> 01:01:24,220\ntake a look at that interface, so now it's\nbasically just hardset as a trunk, okay?\n\n1163\n01:01:24,220 --> 01:01:27,700\nAnd if I want to bond in port 14,\n\n1164\n01:01:27,700 --> 01:01:31,520\nI probably need to make sure that\nport 14 has the same configuration.\n\n1165\n01:01:31,520 --> 01:01:33,980\nSo normally we use the range command so\n\n1166\n01:01:33,980 --> 01:01:38,220\nthat we make sure that we're supplying\nthe same commands to each interface.\n\n1167\n01:01:38,220 --> 01:01:42,065\nBut I'll do it separate here just so\nwe can actually see it.\n\n1168\n01:01:42,065 --> 01:01:42,795\nRight there.\n\n1169\n01:01:42,795 --> 01:01:43,410\nOkay.\n\n1170\n01:01:43,410 --> 01:01:47,995\nNext, I need to set up my bond.\n\n1171\n01:01:47,995 --> 01:01:49,945\nSo I'm gonna bond these two together.\n\n1172\n01:01:49,945 --> 01:01:54,591\nAnd we do that with the-\n>> Channel.\n\n1173\n01:01:54,591 --> 01:01:56,060\n>> With the channel group command.\n\n1174\n01:01:56,060 --> 01:01:56,590\nThere we go.\n\n1175\n01:01:56,590 --> 01:01:57,220\nThank you, Ronnie.\n\n1176\n01:01:58,680 --> 01:02:02,460\nChannel groups are just\nclusters of connections, right?\n\n1177\n01:02:02,460 --> 01:02:04,400\nAnd different switches\nhave different support for\n\n1178\n01:02:04,400 --> 01:02:06,620\nhow many channel groups they can support.\n\n1179\n01:02:06,620 --> 01:02:08,870\nI've seen some that\nsupport as few as four and\n\n1180\n01:02:08,870 --> 01:02:11,120\nI've seen others that support hundreds.\n\n1181\n01:02:11,120 --> 01:02:12,730\nThis particular switch supports 64.\n\n1182\n01:02:12,730 --> 01:02:16,680\nSo I'll just call this channel group one,\nand\n\n1183\n01:02:16,680 --> 01:02:22,040\nthen I say mode and here's the term\nthat's gonna really make the difference.\n\n1184\n01:02:22,040 --> 01:02:24,770\nIt's going to define which one we use.\n\n1185\n01:02:24,770 --> 01:02:26,740\nAll right, and if you look at these,\n\n1186\n01:02:26,740 --> 01:02:32,070\nI'm gonna add these to the notes,\ncuz it's something that's handy to have.\n\n1187\n01:02:32,070 --> 01:02:37,075\nSo, basically what we're doing,\nis we are coming in here and saying,\n\n1188\n01:02:37,075 --> 01:02:41,690\nchannel-group and a number, mode and\n\n1189\n01:02:41,690 --> 01:02:46,940\nthen what we specify next is what's\ngoing to determine what we're doing.\n\n1190\n01:02:46,940 --> 01:02:51,730\nAnd if we take a look at these,\nlike active and auto and so on.\n\n1191\n01:02:51,730 --> 01:02:56,180\nEach one pertains to a slightly\ndifferent configuration and\n\n1192\n01:02:56,180 --> 01:03:00,990\nlet me divide these up\ninto a more logical sense.\n\n1193\n01:03:00,990 --> 01:03:05,190\nSo, let's start with LACP\nsince it's the most common.\n\n1194\n01:03:05,190 --> 01:03:08,529\nWith LACP, if you wanna configure\nit there's really two commands.\n\n1195\n01:03:10,920 --> 01:03:16,750\nThe first one is channel group and\na number mode active.\n\n1196\n01:03:16,750 --> 01:03:21,380\nActive says this port will\nrun LACP no matter what.\n\n1197\n01:03:21,380 --> 01:03:24,349\nNo matter what, we're gonna run\nthe Link Aggregation and Control Protocol.\n\n1198\n01:03:25,620 --> 01:03:32,440\nIf we say passive, that says if the other\nside asks us, we'll go ahead and do.\n\n1199\n01:03:32,440 --> 01:03:35,920\nBut if they don't ask,\nwe're just going to be a normal port.\n\n1200\n01:03:35,920 --> 01:03:38,360\nWe're not going to do\nany bonding whatsoever.\n\n1201\n01:03:38,360 --> 01:03:39,140\n>> Yup.\n\n1202\n01:03:39,140 --> 01:03:42,120\nAnd then there's the PagP\nthat we have as well.\n\n1203\n01:03:42,120 --> 01:03:44,990\nAnd notice that the two\ndifferent commands here.\n\n1204\n01:03:44,990 --> 01:03:48,970\nThe one, of course, that actually is\nset to the desirable is the same way.\n\n1205\n01:03:48,970 --> 01:03:54,138\nIt is saying, I am going to use PAgP, and\nthen, if you set the other side to auto,\n\n1206\n01:03:54,138 --> 01:03:57,334\nit'll say,\nonly if the other side is using that.\n\n1207\n01:03:57,334 --> 01:03:58,182\nAre we gonna do this?\n\n1208\n01:03:58,182 --> 01:04:01,459\nMake sure you pay attention\nin the syntax here.\n\n1209\n01:04:01,459 --> 01:04:05,761\nIf they ask you to set LACP, make sure you\npay attention to the key words active and\n\n1210\n01:04:05,761 --> 01:04:06,790\npassive.\n\n1211\n01:04:06,790 --> 01:04:11,674\nIf they say set PAgP, pay attention\nto the words auto and desirable.\n\n1212\n01:04:11,674 --> 01:04:14,678\nIs gonna make a difference,\nwhen we take a look at that.\n\n1213\n01:04:14,678 --> 01:04:16,641\n>> Yep.\nSo, a little bit of.\n\n1214\n01:04:16,641 --> 01:04:22,954\n[CROSSTALK] Basically, that word is\nwhat determines that difference.\n\n1215\n01:04:22,954 --> 01:04:24,940\nAnd if you're going LACP versus PAgP.\n\n1216\n01:04:24,940 --> 01:04:26,437\nNow, I've said it in other episodes.\n\n1217\n01:04:26,437 --> 01:04:28,642\n>> Mm-hm.\n>> I hate dynamic stuff.\n\n1218\n01:04:28,642 --> 01:04:30,780\n>> [LAUGH]\n>> I always statically assign things.\n\n1219\n01:04:30,780 --> 01:04:33,856\n>> Yeah.\n>> And so for me, since I usually do LACP.\n\n1220\n01:04:33,856 --> 01:04:35,027\n>> Yeah.\n>> This is the only command,\n\n1221\n01:04:35,027 --> 01:04:36,341\nI really need in production right here.\n\n1222\n01:04:36,341 --> 01:04:37,117\n>> Right.\n>> Mode active,\n\n1223\n01:04:37,117 --> 01:04:38,813\nthat's gonna make it do LACP and\nthat's the end of it.\n\n1224\n01:04:38,813 --> 01:04:39,471\n>> Mm-hm.\n>> But,\n\n1225\n01:04:39,471 --> 01:04:42,759\nif you wanted auto detect,\nyou could with the passive commands.\n\n1226\n01:04:42,759 --> 01:04:45,050\nOr if you were doing PAgP.\n\n1227\n01:04:45,050 --> 01:04:50,110\nAuto would do that detection,\ndesirable would force it on.\n\n1228\n01:04:50,110 --> 01:04:55,090\nAnd that's a little bit different\nthan like with trunking.\n\n1229\n01:04:55,090 --> 01:04:59,250\nCuz with trunking, if you said DTP to\nAuto, it's gonna try and trunk, but\n\n1230\n01:04:59,250 --> 01:05:00,970\nif the trunk fails, what does it do?\n\n1231\n01:05:00,970 --> 01:05:02,155\nFalls back to access.\n\n1232\n01:05:02,155 --> 01:05:04,100\n>> Yeah.\n>> With PAgP, you set it to auto,\n\n1233\n01:05:04,100 --> 01:05:08,450\nit's gonna try and aggregate, and\nif it fails, it's still gonna aggregate.\n\n1234\n01:05:08,450 --> 01:05:11,780\nForget you, it's still gonna do it, so\na little bit different than trunking.\n\n1235\n01:05:11,780 --> 01:05:14,720\n>> Now, we haven't mentioned that first\none that you actually have up there, Don,\n\n1236\n01:05:14,720 --> 01:05:16,840\nthat's the old one that you\nwere talking about, right?\n\n1237\n01:05:16,840 --> 01:05:17,450\n>> That's the old one.\n\n1238\n01:05:17,450 --> 01:05:19,650\nIt does raw bonding,\nit's not very efficient,\n\n1239\n01:05:19,650 --> 01:05:23,400\nit doesn't do the greatest load balancing\nin the world, but their support.\n\n1240\n01:05:23,400 --> 01:05:25,460\nFor backwards compatibility,\nif you have old equipment.\n\n1241\n01:05:25,460 --> 01:05:29,200\nAnd by old, the first time I configured\nraw Etherchannel was in 1999.\n\n1242\n01:05:29,200 --> 01:05:32,480\nIt was 14 years ago, or 15 years ago.\n\n1243\n01:05:32,480 --> 01:05:35,150\nI don't know, it was a long time ago.\n\n1244\n01:05:35,150 --> 01:05:38,870\nSo it's been around a long time, and\nit's not the way that you want to go, but\n\n1245\n01:05:38,870 --> 01:05:40,320\nsupport is still there.\n\n1246\n01:05:40,320 --> 01:05:45,010\nYou just say channel group and\na number, mode on, and that'll\n\n1247\n01:05:45,010 --> 01:05:49,870\nflip it on without any of the additive\nfeatures that you get in LACP and PAgP.\n\n1248\n01:05:49,870 --> 01:05:52,760\nWhich are much better at\nhandling ports coming in, and\n\n1249\n01:05:52,760 --> 01:05:54,680\ncoming out of the bond on the fly.\n\n1250\n01:05:54,680 --> 01:05:56,740\n>> Now,\nif you're new to this configuration,\n\n1251\n01:05:56,740 --> 01:06:00,950\none of the things that can kind\nof get you on the syntax side.\n\n1252\n01:06:00,950 --> 01:06:05,980\n>> Is by accidentally doing\nsomething like Channel\n\n1253\n01:06:05,980 --> 01:06:10,980\ngroup 1,\nmode active on they're not combinable.\n\n1254\n01:06:10,980 --> 01:06:12,440\n>> Compatible?\n\n1255\n01:06:12,440 --> 01:06:15,000\n>> Yeah, they're not compatible,\nso don't mix the two up.\n\n1256\n01:06:15,000 --> 01:06:16,700\nDon't add the two together.\n\n1257\n01:06:16,700 --> 01:06:19,310\nVery easy to see and go,\nyeah, I wanna turn it on,\n\n1258\n01:06:19,310 --> 01:06:22,610\nand thinking that that's\nthe proper configuration, here.\n\n1259\n01:06:22,610 --> 01:06:24,920\n>> But remember, this is actually good for\n\n1260\n01:06:24,920 --> 01:06:27,590\nus to make sure that we keep distinct and\nclear.\n\n1261\n01:06:27,590 --> 01:06:32,180\nThey're not again compatible on this\nsense here, nor can we switch them.\n\n1262\n01:06:32,180 --> 01:06:35,710\nOn one side I don't wanna\ndo the idea of mode active,\n\n1263\n01:06:35,710 --> 01:06:38,129\nand on the other side the mode auto.\n\n1264\n01:06:38,129 --> 01:06:39,222\nIt doesn't work that way either.\n\n1265\n01:06:39,222 --> 01:06:39,742\n>> Yep.\n\n1266\n01:06:39,742 --> 01:06:40,567\n>> Yep.\n>> All right.\n\n1267\n01:06:40,567 --> 01:06:42,734\nSo, let's have some fun here, Ronnie.\n\n1268\n01:06:42,734 --> 01:06:47,240\nI've got ports 13 and\n14 run between switch one and switch two.\n\n1269\n01:06:47,240 --> 01:06:52,480\nLet's take switch 2, and think I'm just\ngonna disconnect switch 3 altogether.\n\n1270\n01:06:52,480 --> 01:06:53,852\nWe'll get him kinda out of the mix.\n\n1271\n01:06:53,852 --> 01:06:57,110\nBut actually,\nI guess I can do that right now, so\n\n1272\n01:06:57,110 --> 01:06:59,460\nI don't confuse myself with\nall these connections.\n\n1273\n01:06:59,460 --> 01:07:01,640\nSo, we'll configure that out.\n\n1274\n01:07:01,640 --> 01:07:06,030\nI'm gonna configure switch\n2 to do LACP passive.\n\n1275\n01:07:06,030 --> 01:07:08,380\nIf somebody asks it,\nit will build up a connection but\n\n1276\n01:07:08,380 --> 01:07:10,320\notherwise it's not gonna mess around.\n\n1277\n01:07:10,320 --> 01:07:12,860\nAnd then we'll set switch 1 to be active.\n\n1278\n01:07:12,860 --> 01:07:15,290\nEnforce it, so if you have passive and\n\n1279\n01:07:15,290 --> 01:07:17,960\npassive, they will not\nbuild up a channel bond.\n\n1280\n01:07:17,960 --> 01:07:19,820\nIf you have active and passive they will.\n\n1281\n01:07:19,820 --> 01:07:21,370\nAnd if you have active and\nactive they will.\n\n1282\n01:07:21,370 --> 01:07:23,150\nAnd I normally do active and active.\n\n1283\n01:07:23,150 --> 01:07:25,450\nBut, we'll do active passive for\ncompleteness.\n\n1284\n01:07:25,450 --> 01:07:28,900\nAnd that's a good point for\nus to actually think about as well.\n\n1285\n01:07:28,900 --> 01:07:30,990\nRegardless of whether you do PAgP.\n\n1286\n01:07:30,990 --> 01:07:35,890\nOr lack the one side should be\nset as being, the hard set one,\n\n1287\n01:07:35,890 --> 01:07:39,610\nokay, so if you hate the auto or\nthe dynamic one.\n\n1288\n01:07:39,610 --> 01:07:43,751\nDon does you might set them both to\nactually solidly do what you want to, but\n\n1289\n01:07:43,751 --> 01:07:47,592\nmake sure you actually remember that\none side has to be done that way.\n\n1290\n01:07:47,592 --> 01:07:48,267\n>> Yep.\n\n1291\n01:07:48,267 --> 01:07:49,690\n>> All right.\n\n1292\n01:07:49,690 --> 01:07:53,310\nSo, I'm using the range command,\ninterface range FA0/13 through 14.\n\n1293\n01:07:53,310 --> 01:07:57,650\nThat way as I issue these commands,\nthey're applying to both interfaces at\n\n1294\n01:07:57,650 --> 01:08:01,020\nthe same time, and I can sure that\neverything is configured the same way.\n\n1295\n01:08:01,020 --> 01:08:08,460\nThen I'm gonna say channel group\n1 mode passive, all right?\n\n1296\n01:08:08,460 --> 01:08:11,530\nNow, I'm not saying LACP,\nbut by saying passive,\n\n1297\n01:08:11,530 --> 01:08:14,280\nit knows that I mean LACP and\nit's going to create it.\n\n1298\n01:08:14,280 --> 01:08:15,620\nNow, notice what it did there.\n\n1299\n01:08:15,620 --> 01:08:19,180\nCreating a port channel,\ninterface port channel 1,\n\n1300\n01:08:19,180 --> 01:08:21,880\nit created a virtual interface and\n\n1301\n01:08:21,880 --> 01:08:26,600\nthat virtual interface is the combination\nof these two physical interfaces.\n\n1302\n01:08:26,600 --> 01:08:28,659\nNow, there is a slight problem\nthat we bump into here.\n\n1303\n01:08:30,370 --> 01:08:35,093\nIf I take a look at interface\n13s running configuration and\n\n1304\n01:08:35,093 --> 01:08:40,629\n14, they're both trunks,\nthey're both doing LACP passive.\n\n1305\n01:08:40,629 --> 01:08:47,540\nBut, the port channel has\nits own configuration.\n\n1306\n01:08:47,540 --> 01:08:52,410\nSo there's an interface Port-Channel 1,\nor you can abbreviate down to P01.\n\n1307\n01:08:52,410 --> 01:08:55,560\nAnd it's got its own configuration also,\nall right?\n\n1308\n01:08:55,560 --> 01:08:58,360\nAnd I need to make sure that my\nconfiguration is stabilized,\n\n1309\n01:08:58,360 --> 01:09:02,720\nnot just among'st my physical interfaces,\nbut on my virtual interface also.\n\n1310\n01:09:02,720 --> 01:09:06,418\nSo I'm gonna get into interface PO1,\nand I'm gonna say,\n\n1311\n01:09:06,418 --> 01:09:12,232\nswitchport trunk encapsulation.1.\n\n1312\n01:09:12,232 --> 01:09:18,096\n[LAUGH] .1Q, switchboard mode trunk,\n\n1313\n01:09:18,096 --> 01:09:22,760\nand switchboard no negotiate.\n\n1314\n01:09:22,760 --> 01:09:29,520\nAll right, now I'm issuing these\ncommands again port channel 1,\n\n1315\n01:09:29,520 --> 01:09:34,340\nso that when I take a look at\nthe configuration on port channel 1,\n\n1316\n01:09:34,340 --> 01:09:39,500\nand the configuration on port 13 and\n14, that they're all the same.\n\n1317\n01:09:39,500 --> 01:09:41,050\nThey're identical across them.\n\n1318\n01:09:41,050 --> 01:09:44,400\nIt's really important when you're gonna be\ndoing bonding like this that they all have\n\n1319\n01:09:44,400 --> 01:09:45,220\nthe same config.\n\n1320\n01:09:45,220 --> 01:09:50,440\nNow, I don't have the channel group 1\npass of command on the PO1 interface,\n\n1321\n01:09:50,440 --> 01:09:52,840\nbecause It is port-channel 1, so\n\n1322\n01:09:52,840 --> 01:09:56,740\nit can't be a member of itself, but\nall the other commands are identical.\n\n1323\n01:09:56,740 --> 01:09:59,620\nThat's gonna allow the proper\nfail over between the links,\n\n1324\n01:09:59,620 --> 01:10:01,060\nlive while things are running.\n\n1325\n01:10:01,060 --> 01:10:02,240\n>> Right.\n>> All right.\n\n1326\n01:10:02,240 --> 01:10:07,500\nNow, because I put it in passive mode, the\nother end is not doing aggregation yet,\n\n1327\n01:10:07,500 --> 01:10:10,250\nso the port-channel is not active.\n\n1328\n01:10:10,250 --> 01:10:13,740\nIf I take a look at my\nshow IP interface brief.\n\n1329\n01:10:13,740 --> 01:10:16,000\nHere's port channel 1, and it is down.\n\n1330\n01:10:17,000 --> 01:10:20,120\nAnd my favorite command for\ntroubleshooting this stuff,\n\n1331\n01:10:20,120 --> 01:10:25,940\nis show etherchannel, or\netherchannel summary, all right?\n\n1332\n01:10:25,940 --> 01:10:28,892\nShow etherchannel summary,\nlet me add that to the notes so\n\n1333\n01:10:28,892 --> 01:10:31,556\nthat we've got that command for\ntroubleshooting.\n\n1334\n01:10:36,726 --> 01:10:38,130\nSo, that is a handy one.\n\n1335\n01:10:38,130 --> 01:10:40,838\nAnd here,\nwe'll even neaten it up a little bit.\n\n1336\n01:10:40,838 --> 01:10:43,480\nMake it pretty.\n\n1337\n01:10:43,480 --> 01:10:45,740\nAll right, so show etherchannel summary.\n\n1338\n01:10:45,740 --> 01:10:47,530\nThat'll give us a summary and\nI can see right here.\n\n1339\n01:10:47,530 --> 01:10:51,916\nPort channel 1, it's status is SD and\nif I look up here, S,\n\n1340\n01:10:51,916 --> 01:10:54,160\nit's a layer 2 port channel.\n\n1341\n01:10:54,160 --> 01:10:58,030\nI'm bonding layer 2 ports,\nand D, it's down.\n\n1342\n01:10:58,030 --> 01:11:01,305\nAnd if I look at the individual\ninterfaces, 13 is I,\n\n1343\n01:11:01,305 --> 01:11:05,840\n14 is I and if I look at that,\nthere's stand alone ports.\n\n1344\n01:11:05,840 --> 01:11:10,130\nThey're not bonded right now, all right.\n\n1345\n01:11:11,200 --> 01:11:12,050\nNow, let's set the other end.\n\n1346\n01:11:13,390 --> 01:11:15,460\nSo, I'll jump over to switch 1.\n\n1347\n01:11:15,460 --> 01:11:18,260\nAnd on switch 1,\nI don't remember what all I've done.\n\n1348\n01:11:18,260 --> 01:11:19,310\nSo I'm gonna repeat some of it.\n\n1349\n01:11:23,408 --> 01:11:26,278\nAll right, so I'll say switch port mode.\n\n1350\n01:11:26,278 --> 01:11:26,891\nAlright.\n\n1351\n01:11:26,891 --> 01:11:30,340\nI'll say switch board\ntrunk encapsulation.1Q.\n\n1352\n01:11:31,360 --> 01:11:33,030\nSwitch board mode trunk.\n\n1353\n01:11:34,160 --> 01:11:35,680\nSwitch board no negotiate.\n\n1354\n01:11:37,670 --> 01:11:41,880\nAnd then channel group 1 mode, and\n\n1355\n01:11:41,880 --> 01:11:44,940\ninstead of passive,\nthis time I'm gonna say active.\n\n1356\n01:11:44,940 --> 01:11:49,190\nI wanna to build a port channel.\n\n1357\n01:11:49,190 --> 01:11:53,099\nAll right, it's gonna create port\nchannel 1, so I'll get into interface,\n\n1358\n01:11:53,099 --> 01:11:54,001\nport channel 1.\n\n1359\n01:11:56,431 --> 01:11:59,835\nAnd apparently my connection is pausing.\n\n1360\n01:11:59,835 --> 01:12:02,010\n>> [LAUGH]\n>> Oh shoot,\n\n1361\n01:12:02,010 --> 01:12:03,890\nspanning tree is\nrecalculating on my up-link.\n\n1362\n01:12:03,890 --> 01:12:05,585\nSo we've gotta give it a second here.\n\n1363\n01:12:05,585 --> 01:12:10,020\nSo, this switch is up-linked\ninto our studio switch and\n\n1364\n01:12:10,020 --> 01:12:11,770\nthat's how I'm remoting into it.\n\n1365\n01:12:11,770 --> 01:12:15,490\nAnd so when that new port was\ncreated spanning tree was reset.\n\n1366\n01:12:15,490 --> 01:12:18,835\nSpanning tree was re-running,\nre-calculating all the ports including my\n\n1367\n01:12:18,835 --> 01:12:23,220\nup-link so I have to wait 30 seconds for\nthat up-link to turn green.\n\n1368\n01:12:23,220 --> 01:12:23,780\nThere it goes.\n\n1369\n01:12:25,040 --> 01:12:27,860\nCisco actually has\na recommendation on this one.\n\n1370\n01:12:27,860 --> 01:12:32,080\nTheir recommendation is when you're\nconfiguring port channels like this.\n\n1371\n01:12:32,080 --> 01:12:35,830\nIt's a good idea to shut all of the ports\ndown, get it all configured, and\n\n1372\n01:12:35,830 --> 01:12:37,640\nthen do a no shut down to bring it up.\n\n1373\n01:12:37,640 --> 01:12:40,550\nThat way comes up with the full\nconfiguration on it and\n\n1374\n01:12:40,550 --> 01:12:45,220\nnot like a partial configuration which\nis partly why I got kicked out there.\n\n1375\n01:12:45,220 --> 01:12:49,800\nThat's one way you can kind of avoid that,\nlet me just go and\n\n1376\n01:12:49,800 --> 01:12:51,940\nset these last few commands here.\n\n1377\n01:12:51,940 --> 01:12:52,500\n>> Yeah.\n\n1378\n01:12:52,500 --> 01:12:54,460\nSo remember that when we\nstart setting this up.\n\n1379\n01:12:54,460 --> 01:12:55,900\nTwo different ones, right?\n\n1380\n01:12:55,900 --> 01:12:58,800\nWe have to configure the interfaces\nto make sure that they're doing\n\n1381\n01:12:58,800 --> 01:12:59,430\nwhat we want them to do.\n\n1382\n01:12:59,430 --> 01:13:05,180\nAnd then we configure the channel-group,\nthe number that we actually want,\n\n1383\n01:13:05,180 --> 01:13:09,220\nand which particular keyword that\nwe want to do, either LACP or PAgP.\n\n1384\n01:13:09,220 --> 01:13:11,450\nOnce we do that,\nespecially with LACP, we go in, and\n\n1385\n01:13:11,450 --> 01:13:13,820\nnow we can figure the port channels out.\n\n1386\n01:13:13,820 --> 01:13:17,750\nAnd we pretty much set the identical\ninformation, except for\n\n1387\n01:13:17,750 --> 01:13:20,170\nthe channel-group, is what we want.\n\n1388\n01:13:20,170 --> 01:13:23,110\nAnd here, once Don gets everything up and\n\n1389\n01:13:23,110 --> 01:13:26,610\nrunning, he brings us back through\nour show ether channel summary here.\n\n1390\n01:13:26,610 --> 01:13:29,170\n>> Yeah, so when I look at\nthe summary now, now it's different.\n\n1391\n01:13:29,170 --> 01:13:31,650\nPort channel one has a status of SU.\n\n1392\n01:13:31,650 --> 01:13:34,160\nNow S we already know is layer two.\n\n1393\n01:13:34,160 --> 01:13:36,210\nU, in use.\n\n1394\n01:13:36,210 --> 01:13:39,790\nAnd then when I look at the ports,\nthey have a P beside them and\n\n1395\n01:13:39,790 --> 01:13:43,040\nif I look, P bundled in a port channel.\n\n1396\n01:13:43,040 --> 01:13:44,220\n>> There you go.\n\n1397\n01:13:44,220 --> 01:13:48,340\nNow, the cool part here,\nif I do a show IP interface brief,\n\n1398\n01:13:50,480 --> 01:13:53,750\nall right, ports 13 and 14 are both up.\n\n1399\n01:13:53,750 --> 01:13:55,580\nRight.\nSo there they are, both up.\n\n1400\n01:13:55,580 --> 01:13:58,940\nIf I find the port channel,\nthe port channel is up also.\n\n1401\n01:13:58,940 --> 01:14:03,890\nIf I do a show spanning-tree,\nall right, and\n\n1402\n01:14:03,890 --> 01:14:07,570\nI look in here, port 13 and\n14 don't even make the list.\n\n1403\n01:14:07,570 --> 01:14:08,150\nAll right.\n\n1404\n01:14:08,150 --> 01:14:13,860\nBecause port 13 and 14 no longer exist\nas far as spanning-tree is concerned.\n\n1405\n01:14:13,860 --> 01:14:16,590\nWhat does exist, port channel one.\n\n1406\n01:14:16,590 --> 01:14:20,400\nPort channel one exists, and\nsee how it's forwarding.\n\n1407\n01:14:20,400 --> 01:14:23,650\nPort one was my old one that was\nthe one that was running, but\n\n1408\n01:14:23,650 --> 01:14:25,350\nit's now blocking, okay?\n\n1409\n01:14:25,350 --> 01:14:26,056\nWhy is that?\n\n1410\n01:14:26,056 --> 01:14:29,591\nWell, port channel one Interface one has\n\n1411\n01:14:29,591 --> 01:14:34,243\na bandwidth of 100 megabit\nwhich has a cost of 19.\n\n1412\n01:14:34,243 --> 01:14:39,215\nMy core channel has a bandwidth\nof 200 megabit, I'm combining two\n\n1413\n01:14:39,215 --> 01:14:44,540\n100 megabit connections to\ncreate a 200 megabit connection.\n\n1414\n01:14:44,540 --> 01:14:51,390\nAnd so its cost is 12,\na lower cost than that of port one.\n\n1415\n01:14:51,390 --> 01:14:53,850\nAnd so it's become the new root port.\n\n1416\n01:14:53,850 --> 01:14:55,040\nI'm now using my port channel.\n\n1417\n01:14:55,040 --> 01:14:55,540\n>> Yeah.\n\n1418\n01:14:57,980 --> 01:14:58,790\n>> All right.\n\n1419\n01:14:58,790 --> 01:15:01,220\nNow here's what I really like about this.\n\n1420\n01:15:01,220 --> 01:15:04,240\nIs, I'm just gonna pull\nevery other cable here.\n\n1421\n01:15:05,560 --> 01:15:08,310\nMy only connection from-\n>> Yeah.\n\n1422\n01:15:08,310 --> 01:15:12,360\n>> My laptop to switch two,\nis by going through switch one.\n\n1423\n01:15:12,360 --> 01:15:14,790\nMy laptop is actually\ngoing through switch one.\n\n1424\n01:15:14,790 --> 01:15:18,580\nWhen I remote and connect into\nswitch two like I am right now,\n\n1425\n01:15:18,580 --> 01:15:21,370\nthat's actually going\nthrough that port channel.\n\n1426\n01:15:21,370 --> 01:15:26,160\nI'm crossing that ether channel to be able\nto get to the other switch, all right?\n\n1427\n01:15:26,160 --> 01:15:27,700\nWhen you're in a port channel,\n\n1428\n01:15:27,700 --> 01:15:31,100\nyour traffic is being load\nbalanced across those lines.\n\n1429\n01:15:31,100 --> 01:15:35,160\nAnd if one line fails,\nit just switches to the other, okay?\n\n1430\n01:15:35,160 --> 01:15:36,160\nSo watch this.\n\n1431\n01:15:36,160 --> 01:15:38,160\nWe'll have some fun with it.\n\n1432\n01:15:38,160 --> 01:15:43,120\nI'm gonna start a continual ping,\nto switch number two.\n\n1433\n01:15:43,120 --> 01:15:45,960\nSo here's my continual ping\nrunning to switch number two.\n\n1434\n01:15:47,730 --> 01:15:54,990\nAnd I'm gonna unplug,\none of the cables on switch number two.\n\n1435\n01:15:54,990 --> 01:15:55,740\nAll right.\n\n1436\n01:15:55,740 --> 01:15:56,320\nSo here we go.\n\n1437\n01:15:56,320 --> 01:15:58,070\nI'm unplugging one of the cables.\n\n1438\n01:15:59,790 --> 01:16:00,450\nSo there it goes.\n\n1439\n01:16:00,450 --> 01:16:02,100\nI just unplugged number 13.\n\n1440\n01:16:02,100 --> 01:16:03,580\nOkay.\n\n1441\n01:16:03,580 --> 01:16:06,600\nOne of the cables in the bond is now down,\nbut\n\n1442\n01:16:06,600 --> 01:16:09,740\nif I look in the background,\nI'm still pinging, right.\n\n1443\n01:16:09,740 --> 01:16:13,057\n>> Yeah\n>> And if I pull up my,\n\n1444\n01:16:13,057 --> 01:16:16,830\nether channel summary.\n\n1445\n01:16:16,830 --> 01:16:20,080\nI can see that one port is down and\nthe other port is available,\n\n1446\n01:16:20,080 --> 01:16:22,290\noh my head's on top let me move that.\n\n1447\n01:16:22,290 --> 01:16:28,360\nSo I can see that the one port is down and\nthe other port is up and happy, okay.\n\n1448\n01:16:28,360 --> 01:16:31,750\nSo one is down,\none has a P which is bundled.\n\n1449\n01:16:31,750 --> 01:16:32,870\nAll right.\n\n1450\n01:16:32,870 --> 01:16:37,930\nThen if I plug that port back in,\nthat port is gonna heal itself.\n\n1451\n01:16:37,930 --> 01:16:39,280\nIt takes a second.\n\n1452\n01:16:39,280 --> 01:16:40,680\nI've got to wait for the state to come up.\n\n1453\n01:16:40,680 --> 01:16:41,180\nThere it goes.\n\n1454\n01:16:42,470 --> 01:16:44,370\nAnd now they both have Ps.\n\n1455\n01:16:44,370 --> 01:16:45,460\nThey're both happy.\n\n1456\n01:16:45,460 --> 01:16:46,450\nIt's up.\n\n1457\n01:16:46,450 --> 01:16:47,480\nThey're bundled.\n\n1458\n01:16:47,480 --> 01:16:49,470\nAnd my ping is continuing on.\n\n1459\n01:16:49,470 --> 01:16:50,999\nNow I'm gonna unplug the other connection.\n\n1460\n01:16:53,192 --> 01:16:55,900\nSo the first one I had done was port 13.\n\n1461\n01:16:55,900 --> 01:16:57,280\nNow I've unplugged port 14.\n\n1462\n01:16:57,280 --> 01:16:59,182\nSo I just unplug the other one, and.\n\n1463\n01:16:59,182 --> 01:16:59,960\n>> Still up.\n\n1464\n01:16:59,960 --> 01:17:03,020\n>> My pings are continuing\non in the background,\n\n1465\n01:17:03,020 --> 01:17:08,240\neven though I can see right here that port\n13 is bundled and port 14 is now down.\n\n1466\n01:17:08,240 --> 01:17:12,030\nSo, as long as one connection is up,\nit stays up and\n\n1467\n01:17:12,030 --> 01:17:15,962\nhealthy, but if both connections are down,\nit fails, right?\n\n1468\n01:17:15,962 --> 01:17:19,830\nReally cool,\nunlike even rapid spinning true protocol,\n\n1469\n01:17:19,830 --> 01:17:21,860\nhere, I didn't even get a sag.\n\n1470\n01:17:21,860 --> 01:17:23,970\nI didn't even get an increase in density.\n\n1471\n01:17:23,970 --> 01:17:25,970\nIt just runs nice and smooth.\n\n1472\n01:17:27,020 --> 01:17:29,840\nIt makes individual port\nfailures invisible,\n\n1473\n01:17:29,840 --> 01:17:34,090\nwhich is really the power of it\n>> Now, there are some confusing things\n\n1474\n01:17:34,090 --> 01:17:39,590\nhere, when we start to take a look\nat this back in our configurations.\n\n1475\n01:17:39,590 --> 01:17:41,820\nWe call it ether channel, but\n\n1476\n01:17:41,820 --> 01:17:45,320\nto actually configure it, we actually\nhave to use the words channel-group.\n\n1477\n01:17:45,320 --> 01:17:46,850\nThat's kinda weird, but\n\n1478\n01:17:46,850 --> 01:17:51,990\nthen channel-group actually creates\na port channel to do so, and\n\n1479\n01:17:51,990 --> 01:17:56,170\nso you do have to pay attention to this\nterminology, there's no way around it.\n\n1480\n01:17:56,170 --> 01:18:00,876\nIf you don't, it's gonna all kind of\nget confusing here, so make sure you\n\n1481\n01:18:00,876 --> 01:18:05,672\npay attention to the different terms\nwhen you actually set this up and do it.\n\n1482\n01:18:07,599 --> 01:18:12,370\n>> Yeah, so\nnow let's go a little bit further.\n\n1483\n01:18:12,370 --> 01:18:16,490\nWe can add more interfaces to\nthe port channel if we want.\n\n1484\n01:18:16,490 --> 01:18:18,750\nI've got a 200 mag interface,\n\n1485\n01:18:18,750 --> 01:18:22,430\nmaybe I wanna add two more add\nget to a 400 mag interface.\n\n1486\n01:18:22,430 --> 01:18:24,340\nSo I can keep going on.\n\n1487\n01:18:24,340 --> 01:18:28,700\nOh and the other thing I didn't mention,\nI'm actually bonding between the 3550 and\n\n1488\n01:18:28,700 --> 01:18:33,700\nthe 3560, so they don't have to be the\nsame model or even the same iOS version.\n\n1489\n01:18:33,700 --> 01:18:36,130\nIt just has to be configured right.\n\n1490\n01:18:36,130 --> 01:18:38,230\nSo I'm gonna add two more ports.\n\n1491\n01:18:38,230 --> 01:18:43,134\nI'm gonna get into interface range fa0/,\nlet's see, we did 13 and 14, so\n\n1492\n01:18:43,134 --> 01:18:44,639\nlet's do 15 and 16.\n\n1493\n01:18:47,721 --> 01:18:54,180\nAnd so I'm just gonna set the trunking,\nthat they're set up right.\n\n1494\n01:18:57,662 --> 01:19:03,020\nAll right, and then I can just\nsay channel-group one mode and\n\n1495\n01:19:03,020 --> 01:19:05,090\nit's passive on this side, right?\n\n1496\n01:19:05,090 --> 01:19:08,010\nSo that's gonna add 15 and 16.\n\n1497\n01:19:08,010 --> 01:19:10,649\nOn switch two and I need to do\nthe same thing here on switch one.\n\n1498\n01:19:18,333 --> 01:19:22,669\nSo I'm just gonna set that, and\ndon't plug them in just yet, Ronnie.\n\n1499\n01:19:28,619 --> 01:19:30,633\nWhoops.\nMostly cuz I can't type.\n\n1500\n01:19:30,633 --> 01:19:39,930\n>> [LAUGH]\n>> There we go.\n\n1501\n01:19:39,930 --> 01:19:40,689\nAll right.\n\n1502\n01:19:40,689 --> 01:19:45,100\nSo now I've got it set up,\nRonnie's gonna plug in those extra cables,\n\n1503\n01:19:45,100 --> 01:19:47,820\nand those extra cables, when they come up,\n\n1504\n01:19:47,820 --> 01:19:52,378\nthey're just gonna join the port channel\n[SOUND] And so right now, 15 and\n\n1505\n01:19:52,378 --> 01:19:56,745\n16 are showing as down from me,\nbut he's plugging in those cables.\n\n1506\n01:19:56,745 --> 01:20:00,893\nAnd after they pass you, because it still\ndoes spanning tree and things like that\n\n1507\n01:20:00,893 --> 01:20:04,830\non the porch when they first come up,\nso it may take it just a second.\n\n1508\n01:20:04,830 --> 01:20:07,140\nAnd when they start to come up so\nthere is 15.\n\n1509\n01:20:07,140 --> 01:20:08,690\nAnd see how it's in a lower case w?\n\n1510\n01:20:08,690 --> 01:20:12,330\nAnd if we look here that says\nwaiting to be aggregated.\n\n1511\n01:20:12,330 --> 01:20:14,080\nSo it's about to come in.\n\n1512\n01:20:14,080 --> 01:20:16,390\nLooks like 16 jumped in real fast.\n\n1513\n01:20:16,390 --> 01:20:18,490\n>> Yeah.\n>> So look, there 15 is now in.\n\n1514\n01:20:18,490 --> 01:20:21,070\nSo now I've got four ports in there.\n\n1515\n01:20:21,070 --> 01:20:24,995\nI've got 400 megabit of bandwidth\nnow between these two switches.\n\n1516\n01:20:24,995 --> 01:20:27,305\nNow I had to eat up four ports to do it.\n\n1517\n01:20:27,305 --> 01:20:27,830\n>> Yeah.\n\n1518\n01:20:27,830 --> 01:20:32,810\n>> But we do get that increased bandwidth\nwhich is cool, and if I do a show spanning\n\n1519\n01:20:32,810 --> 01:20:38,470\ndash tree, my cost was 12 and\nnow if I look at it my cost is down to 8.\n\n1520\n01:20:38,470 --> 01:20:43,180\nThe cost is getting lower and\nlower the more bandwidth we add to it.\n\n1521\n01:20:43,180 --> 01:20:43,680\n>> Right.\n\n1522\n01:20:44,750 --> 01:20:46,270\n>> So really cool stuff.\n\n1523\n01:20:46,270 --> 01:20:50,420\nSo now there's four cables running\nin between these two switches, but\n\n1524\n01:20:50,420 --> 01:20:51,585\nit's not a loop.\n\n1525\n01:20:51,585 --> 01:20:52,530\n>> Right.\n>> It's not a loop\n\n1526\n01:20:52,530 --> 01:20:54,150\nbecause they're being bonded.\n\n1527\n01:20:54,150 --> 01:20:56,980\nSo spanning tree protocol\nsees them as one cable,\n\n1528\n01:20:56,980 --> 01:20:59,410\none big fat cable between\nthe two switches.\n\n1529\n01:20:59,410 --> 01:21:01,390\nAnd so, it's not considered a loop.\n\n1530\n01:21:01,390 --> 01:21:01,890\n>> Right.\n\n1531\n01:21:03,280 --> 01:21:04,100\nYep.\n\n1532\n01:21:04,100 --> 01:21:06,750\n>> All right, so very, very cool.\n\n1533\n01:21:06,750 --> 01:21:09,380\nAlmost every Cisco switch can do this.\n\n1534\n01:21:09,380 --> 01:21:14,660\nAny Cisco switch that I've worked\non that has a 2000 series number or\n\n1535\n01:21:14,660 --> 01:21:15,350\nhigher, really.\n\n1536\n01:21:15,350 --> 01:21:21,890\nThe 2960s will do it, 3560s, 3750s,\n4500, 6500s, they all do it.\n\n1537\n01:21:21,890 --> 01:21:24,745\nThe only difference is how many\nchannel groups they can support.\n\n1538\n01:21:24,745 --> 01:21:26,520\n>> Right.\n>> On the lower end switches,\n\n1539\n01:21:26,520 --> 01:21:30,350\nyou really never need more than one or\ntwo port channels on them.\n\n1540\n01:21:30,350 --> 01:21:34,680\nOn the 6500s, you might have tons of\nthem and they support tons of them.\n\n1541\n01:21:34,680 --> 01:21:37,842\nSo really cool, really flexible,\nand really powerful.\n\n1542\n01:21:37,842 --> 01:21:43,620\nSo, Ronnie, can you think of anything\nelse to throw in on the ether channel?\n\n1543\n01:21:43,620 --> 01:21:44,470\n>> No.\n\n1544\n01:21:44,470 --> 01:21:46,680\nI think we've covered it pretty well.\n\n1545\n01:21:46,680 --> 01:21:49,460\nLike I said, practising these commands is,\nby far, key.\n\n1546\n01:21:49,460 --> 01:21:53,386\nEspecially on this since it is\nconfusing in how you set it up,\n\n1547\n01:21:53,386 --> 01:21:58,580\nit's confusing in what it generates, it's\nconfusing in how you check it as well.\n\n1548\n01:21:58,580 --> 01:22:00,990\nSo, make sure you actually\ndo understand that.\n\n1549\n01:22:02,600 --> 01:22:03,600\n>> Yep, all right.\nWell,\n\n1550\n01:22:03,600 --> 01:22:05,950\nthat really gets us\nthrough our objectives.\n\n1551\n01:22:05,950 --> 01:22:10,930\nSo, compared to ICND1, the CCNT show,\n\n1552\n01:22:10,930 --> 01:22:13,870\nthere we tackled switches and\nwe got to see VLANs, and\n\n1553\n01:22:13,870 --> 01:22:17,760\nVLAN trunking protocol and DTP,\nand here we've just added onto it.\n\n1554\n01:22:17,760 --> 01:22:19,450\n>> Right.\n>> Adding on the spanning tree\n\n1555\n01:22:19,450 --> 01:22:21,360\nfunctionality and ether channel.\n\n1556\n01:22:21,360 --> 01:22:24,660\nSo that's what you can expect\nto see on that CCNA exam.\n\n1557\n01:22:24,660 --> 01:22:27,570\nRemember, take advantage of\nevery resource you can get.\n\n1558\n01:22:27,570 --> 01:22:28,890\n>> Right.\n>> We've covered most of the switching\n\n1559\n01:22:28,890 --> 01:22:31,530\nstuff here, but if you have any questions,\n\n1560\n01:22:31,530 --> 01:22:33,080\nlive during the show\n>> Yep.\n\n1561\n01:22:33,080 --> 01:22:35,790\n>> You can go to itpro.tv/live.\n\n1562\n01:22:35,790 --> 01:22:37,570\nPost them right there in the chatroom.\n\n1563\n01:22:37,570 --> 01:22:38,810\n>> Yep.\n>> We see them, monitor, and\n\n1564\n01:22:38,810 --> 01:22:40,010\nanswer during the show.\n\n1565\n01:22:40,010 --> 01:22:44,400\nYou can also post after the show,\nby going to itpro.tv and\n\n1566\n01:22:44,400 --> 01:22:47,290\nusing the Q&A link at the top\nof darn near every page.\n\n1567\n01:22:47,290 --> 01:22:48,830\n>> Right.\n>> You can click on that,\n\n1568\n01:22:48,830 --> 01:22:51,950\npost your questions, and\nwe will monitor and answer those.\n\n1569\n01:22:51,950 --> 01:22:54,970\nWe want to make sure that you guys\nget your questions answered so\n\n1570\n01:22:54,970 --> 01:22:56,030\nthat you know what's going on.\n\n1571\n01:22:56,030 --> 01:22:57,650\nThat you're ready,\nthat you're comfortable.\n\n1572\n01:22:57,650 --> 01:23:00,010\nAnd when you go and\ntake that test you pass on the first try.\n\n1573\n01:23:00,010 --> 01:23:01,790\n>> Yep.\n>> That's our goal.\n\n1574\n01:23:03,350 --> 01:23:05,339\nSo, well, you got any other\npearls of wisdom to impart on our\n\n1575\n01:23:05,339 --> 01:23:06,440\nviewers before we wrap it up?\n\n1576\n01:23:06,440 --> 01:23:07,610\n>> Not really.\n\n1577\n01:23:07,610 --> 01:23:08,870\nKeep practicing.\n\n1578\n01:23:08,870 --> 01:23:10,300\nKeep typing.\n\n1579\n01:23:10,300 --> 01:23:11,280\nNothing else you can do.\n\n1580\n01:23:11,280 --> 01:23:15,310\nRemember your goal is to get faster,\nquicker at this stuff each and\n\n1581\n01:23:15,310 --> 01:23:16,890\nevery time you're doing it.\n\n1582\n01:23:16,890 --> 01:23:18,720\n>> All right, well, ladies and\ngentlemen, I hope you enjoyed the show.\n\n1583\n01:23:18,720 --> 01:23:20,280\nSigning off for IT Pro TV.\n\n1584\n01:23:20,280 --> 01:23:21,740\nI'm Don Pezet.\n\n1585\n01:23:21,740 --> 01:23:22,320\n>> And I'm Ronnie Wong.\n\n1586\n01:23:22,320 --> 01:23:23,160\n>> And, we'll see you next time.\n\n1587\n01:23:23,160 --> 01:23:33,160\n[MUSIC]\n\n",
          "vimeoId": "79820533"
        }
      ],
      "title": "LAN Switching Technologies"
    },
    {
      "episodes": [
        {
          "description": "In this episode Ronnie and Don take a look at the boot up process of Cisco equipment and demonstrate some of the options to control boot up behavior.",
          "length": "4411",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/003-Router-Management.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/003-Router-Management-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/003-Router-Management-sm.jpg",
          "title": "Router Management",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:14,584 --> 00:00:22,409\n[SOUND]\n\n3\n00:00:22,409 --> 00:00:32,938\n[MUSIC]\n\n4\n00:00:32,938 --> 00:00:34,821\nAll right, good morning,\ngood afternoon, and good evening.\n\n5\n00:00:34,821 --> 00:00:36,950\nAnd welcome back to another\nepisode of ITProTV.\n\n6\n00:00:36,950 --> 00:00:39,780\nI'm your host Don Pezet today with Mr.\nRonnie Wong.\n\n7\n00:00:39,780 --> 00:00:40,960\nHow's it going Ronnie?\n\n8\n00:00:40,960 --> 00:00:42,030\n>> It's going very well.\n\n9\n00:00:42,030 --> 00:00:47,279\nI am doing better today, than anybody\nthat was on Walking Dead last night.\n\n10\n00:00:47,279 --> 00:00:51,930\n[LAUGH]\n>> You know, my wife loves Walking Dead,\n\n11\n00:00:51,930 --> 00:00:53,370\nand I've got this thing about shows.\n\n12\n00:00:53,370 --> 00:00:57,150\nIf I'm gonna watch a show, I need to\nbe able to relate to a character,\n\n13\n00:00:57,150 --> 00:00:58,670\ncare about them and stuff.\n\n14\n00:00:58,670 --> 00:01:02,903\nAnd when I watch that show, I kinda would\nlike to see all of them die, you know?\n\n15\n00:01:02,903 --> 00:01:03,685\n>> [LAUGH]\n>> So I [LAUGH].\n\n16\n00:01:03,685 --> 00:01:05,505\n>> Yes.\n\n17\n00:01:05,505 --> 00:01:09,364\n>> [LAUGH] Any how, speaking of dying,\nlet's get into [LAUGH].\n\n18\n00:01:09,364 --> 00:01:12,720\nAll right,\ntoday we are back with the Cisco show, and\n\n19\n00:01:12,720 --> 00:01:16,737\nwe are gonna be diving into\nthe world of IP Routing, right?\n\n20\n00:01:16,737 --> 00:01:20,510\nOur first episode's really\nfocused on switching.\n\n21\n00:01:20,510 --> 00:01:22,950\nAnd we got to see Cisco switches,\nconfiguration,\n\n22\n00:01:22,950 --> 00:01:26,130\nsome Spanning Tree Protocols,\nsome exciting stuff there.\n\n23\n00:01:26,130 --> 00:01:28,070\nToday we're getting in\nthe world of routers.\n\n24\n00:01:28,070 --> 00:01:31,800\n>> Yeah, and we're gonna begin with\nthe idea here of router management for us.\n\n25\n00:01:31,800 --> 00:01:34,760\nSo we're gonna take a look\nat several different topics,\n\n26\n00:01:34,760 --> 00:01:39,140\nbut really focusing in on managing\nthe IOS, also the boot up process for\n\n27\n00:01:39,140 --> 00:01:42,170\nus, and then we're gonna talk\na little bit about Licensing as well.\n\n28\n00:01:42,170 --> 00:01:43,160\n>> Good old Licensing.\n\n29\n00:01:43,160 --> 00:01:44,550\n>> Licensing, nice.\n\n30\n00:01:44,550 --> 00:01:45,360\n>> Everybody loves that.\n\n31\n00:01:45,360 --> 00:01:46,060\n>> Love it.\n\n32\n00:01:46,060 --> 00:01:46,600\n>> All right.\n\n33\n00:01:46,600 --> 00:01:47,410\nSo let's get started.\n\n34\n00:01:47,410 --> 00:01:49,925\nWe're gonna start out\nactually really simple.\n\n35\n00:01:49,925 --> 00:01:53,860\nSo,I know this whole section\nof the objectives right,\n\n36\n00:01:53,860 --> 00:01:58,520\nthis is the 200-101 exam objective 2,\nIP Routing Technologies.\n\n37\n00:01:59,710 --> 00:02:03,440\nAnd so it sounds like we're\ngonna talk about routing, right?\n\n38\n00:02:03,440 --> 00:02:04,201\nWell, we are eventually.\n\n39\n00:02:04,201 --> 00:02:04,743\n>> [LAUGH]\n>> But here,\n\n40\n00:02:04,743 --> 00:02:06,800\nwe're actually gonna talk about\nthe hardware routers themselves.\n\n41\n00:02:06,800 --> 00:02:11,050\nAnd so, behind me I've got a big 2800\nseries router that we're gonna use to\n\n42\n00:02:11,050 --> 00:02:13,940\nkinda show you guys some of\nthe stuff about the hardware.\n\n43\n00:02:13,940 --> 00:02:14,980\n>> Right.\n>> And kind of what\n\n44\n00:02:14,980 --> 00:02:16,980\ngoes on when your system power's on.\n\n45\n00:02:16,980 --> 00:02:21,390\nAnd then after we wrap up this, so in this\nepisode we're going to hit these topics,\n\n46\n00:02:21,390 --> 00:02:25,300\nbut after that is when we'll really\ndive into actual routing protocols.\n\n47\n00:02:25,300 --> 00:02:25,880\n>> Right.\n\n48\n00:02:25,880 --> 00:02:27,910\n>> But you can't route unless\nyour hardware is operational, so\n\n49\n00:02:27,910 --> 00:02:30,230\ntoday we're going to take a look\nat managing that hardware.\n\n50\n00:02:30,230 --> 00:02:33,230\n>> Yeah, and this is very important for\nus cuz our routers could come\n\n51\n00:02:33,230 --> 00:02:37,250\nstraight from Cisco a lot of times,\nand usually at that point we go okay,\n\n52\n00:02:37,250 --> 00:02:39,575\nthis is brand new, we don't have\nto worry about the equipment.\n\n53\n00:02:39,575 --> 00:02:42,119\nBut sometimes you do end up\npurchasing used equipment and\n\n54\n00:02:42,119 --> 00:02:45,405\nyou may actually get them in lots,\nyou may get them from somewhere else and\n\n55\n00:02:45,405 --> 00:02:48,692\nlater hey we know that these were\noperational last time that they came up.\n\n56\n00:02:48,692 --> 00:02:50,094\n>> [LAUGH]\n>> But we can't guarantee anything,\n\n57\n00:02:50,094 --> 00:02:52,352\nif you've read through eBay,\nyou've seen some of those.\n\n58\n00:02:52,352 --> 00:02:56,145\nSo it's very important that you,\nas a CCNA technician,\n\n59\n00:02:56,145 --> 00:03:00,970\nbe able to at least begin to\nunderstand the process of the boot up.\n\n60\n00:03:00,970 --> 00:03:04,300\nAnd also be able to see the other\ninformation that may actually require you\n\n61\n00:03:04,300 --> 00:03:05,006\nto do other things.\n\n62\n00:03:05,006 --> 00:03:08,520\n>> Yeah and you know let me tell you\nguys that when it comes to buying used\n\n63\n00:03:08,520 --> 00:03:11,960\nequipment like off of ebay or\nwhatever and it's perfectly fine,\n\n64\n00:03:11,960 --> 00:03:13,180\na lot of people don't like to do that.\n\n65\n00:03:13,180 --> 00:03:14,590\nThey say, I'm not gonna buy a used one.\n\n66\n00:03:14,590 --> 00:03:16,176\nWe'll buy a brand new from Cisco.\n\n67\n00:03:16,176 --> 00:03:19,770\nWell, Cisco hardware is lot like a car,\nand when you buy a car,\n\n68\n00:03:19,770 --> 00:03:20,630\nit's at a certain value.\n\n69\n00:03:20,630 --> 00:03:23,980\nThe minute you drive off the lot,\nit depreciates a huge amount.\n\n70\n00:03:23,980 --> 00:03:26,300\nCisco knows that, everybody knows that.\n\n71\n00:03:26,300 --> 00:03:29,960\nIf you buy used equipment,\nyou can call Cisco up and\n\n72\n00:03:29,960 --> 00:03:32,030\nyou can get it put back under warranty.\n\n73\n00:03:32,030 --> 00:03:34,516\nThey have what are called\nCisco SMARTnet Agreements, and\n\n74\n00:03:34,516 --> 00:03:37,795\nSMARTnet Agreements are annual Agreements\nthat cover the warranty of the device.\n\n75\n00:03:37,795 --> 00:03:42,665\nSo, you can buy used equipment,\npurchase a SMARTnet Agreement for\n\n76\n00:03:42,665 --> 00:03:44,345\nit, and now it's under warranty and\n\n77\n00:03:44,345 --> 00:03:46,965\noften times significantly less\nexpensive than buying it brand new.\n\n78\n00:03:46,965 --> 00:03:48,480\nSo that's not an uncommon practice.\n\n79\n00:03:48,480 --> 00:03:50,110\n>> Yeah.\n\n80\n00:03:50,110 --> 00:03:53,880\n>> So, let's start off,\nRonnie cuz this is what I do,\n\n81\n00:03:53,880 --> 00:03:55,590\nlet's go a little out of order today.\n\n82\n00:03:55,590 --> 00:03:56,840\n>> Sure, that's it.\n\n83\n00:03:56,840 --> 00:04:00,000\n>> So, objective number two, is\nconfiguring a serial interface to be able\n\n84\n00:04:00,000 --> 00:04:03,840\nto connect the console port of\nthe router and be able to manage it and\n\n85\n00:04:03,840 --> 00:04:05,440\nsee what the heck is going on.\n\n86\n00:04:05,440 --> 00:04:07,802\nObjective number one is that\npower on self test, well.\n\n87\n00:04:07,802 --> 00:04:10,760\nI wanna show the viewers\nthe power on self test.\n\n88\n00:04:10,760 --> 00:04:11,960\nCan't do that without a serial cable.\n\n89\n00:04:11,960 --> 00:04:14,038\nLet's do number two first and\nthen we'll come back.\n\n90\n00:04:14,038 --> 00:04:18,020\n>> Now, we talked about the idea\nof needing a serial cable for us.\n\n91\n00:04:18,020 --> 00:04:21,830\nWe're really focusing in on\nthe idea that console cable itself.\n\n92\n00:04:21,830 --> 00:04:24,060\nNow you may go \"Why do\nI need a console table?\n\n93\n00:04:24,060 --> 00:04:25,671\nWhat in the world is that about?\n\n94\n00:04:25,671 --> 00:04:28,720\nWell, we may have actually talked\nabout an ICND1, I can't remember.\n\n95\n00:04:28,720 --> 00:04:30,890\nBut let's make sure we go\nover the basics again here.\n\n96\n00:04:30,890 --> 00:04:31,430\nOkay?\n\n97\n00:04:31,430 --> 00:04:35,490\nThe very fact is that sometimes our Cisco\nrouters don't have anything that we\n\n98\n00:04:35,490 --> 00:04:38,730\ncan Telnet into on in\nterms of an IP address.\n\n99\n00:04:38,730 --> 00:04:41,070\nNothing is actually there and ready to go.\n\n100\n00:04:41,070 --> 00:04:46,650\nA console cable is a way that we can\ndirectly connect our particular laptop\n\n101\n00:04:46,650 --> 00:04:50,910\ninto the device itself, so that we now\nhave a management port that we can\n\n102\n00:04:50,910 --> 00:04:55,110\nactually use even though there's no IP\naddress or anything configured on it.\n\n103\n00:04:55,110 --> 00:04:56,750\n>> So,\nlet's take a look at this router here.\n\n104\n00:04:56,750 --> 00:04:59,460\nI'm gonna throw it up here\non the old sky cam here,\n\n105\n00:04:59,460 --> 00:05:01,480\nlet's get it turned upside right.\n\n106\n00:05:01,480 --> 00:05:06,290\nAll right, so you know what that's\ngonna be like super zoomed in isn't it?\n\n107\n00:05:06,290 --> 00:05:08,930\n[LAUGH] So here, you can see the screws.\n\n108\n00:05:08,930 --> 00:05:10,650\nSo let me zoom that out a bit.\n\n109\n00:05:10,650 --> 00:05:14,480\nAll right, so here is a 2800\nseries router and it's pretty big.\n\n110\n00:05:14,480 --> 00:05:15,520\nIt's a two year router.\n\n111\n00:05:15,520 --> 00:05:18,360\nNow, a lot of Cisco\nrouters are only one use.\n\n112\n00:05:18,360 --> 00:05:20,290\nSee this dividing line right here?\n\n113\n00:05:20,290 --> 00:05:23,800\nA lot of routers will just\nbe that top part, right?\n\n114\n00:05:23,800 --> 00:05:27,860\nBut this one is a 2U, 2 rack unit.\n\n115\n00:05:27,860 --> 00:05:30,980\nA U or an RU is a rack unit.\n\n116\n00:05:30,980 --> 00:05:32,300\nIt's basically 1.75 inches.\n\n117\n00:05:32,300 --> 00:05:36,560\nAnd that's the measurement we use\nin networking and server racks.\n\n118\n00:05:36,560 --> 00:05:39,346\nAnd so when you buy a server and\nthey tell you it's a 1 U server,\n\n119\n00:05:39,346 --> 00:05:40,670\nit's 1.75 inches tall.\n\n120\n00:05:40,670 --> 00:05:45,574\nThis is a 2U Router, so it is,\nwhat does that work out to?\n\n121\n00:05:45,574 --> 00:05:46,180\n3.5 inches tall?\n\n122\n00:05:46,180 --> 00:05:47,050\n>> 3.5 inches.\n\n123\n00:05:47,050 --> 00:05:47,720\n>> Quick math.\n>> Yep.\n\n124\n00:05:47,720 --> 00:05:51,240\n>> So anyhow, when we look at, this is.\n\n125\n00:05:51,240 --> 00:05:54,150\nThere's various arguments out there,\nwhether this is the front or\n\n126\n00:05:54,150 --> 00:05:54,965\nthe back of the router.\n\n127\n00:05:54,965 --> 00:05:56,750\n>> [LAUGH]\n>> If you're a network engineer,\n\n128\n00:05:56,750 --> 00:05:58,310\nthis is the front of the router.\n\n129\n00:05:58,310 --> 00:06:01,270\nIf you're anybody else,\nthis is the back of the router.\n\n130\n00:06:01,270 --> 00:06:06,510\nI'd say it's the front because this is\nwhere everything that important is.\n\n131\n00:06:06,510 --> 00:06:12,070\nHere's my gigabit jacks,\nmy, what are these?\n\n132\n00:06:12,070 --> 00:06:13,390\nI can't see them from here, phone lines?\n\n133\n00:06:13,390 --> 00:06:15,630\n>> Yep.\n>> Okay, so FXO ports.\n\n134\n00:06:15,630 --> 00:06:18,160\nI got some kind of cellular card here.\n\n135\n00:06:18,160 --> 00:06:22,510\nI've got a T1 card here so all this stuff\nis what we're normally gonna work with.\n\n136\n00:06:22,510 --> 00:06:24,080\nThese are the link lights\nwe're looking for.\n\n137\n00:06:24,080 --> 00:06:27,560\nThis is the important part, all right.\n\n138\n00:06:27,560 --> 00:06:30,490\nBut if we flip it over,\nand go to the other side.\n\n139\n00:06:31,670 --> 00:06:34,300\nAnybody who is not a network\nengineer will call this the front,\n\n140\n00:06:34,300 --> 00:06:36,710\nand that's because it's pretty.\n\n141\n00:06:36,710 --> 00:06:37,640\nRight?\n>> [LAUGH]\n\n142\n00:06:37,640 --> 00:06:39,720\n>> So it's got the faceplate on it, right?\n\n143\n00:06:39,720 --> 00:06:42,270\nIt's got the Cisco logo on it, right.\n\n144\n00:06:42,270 --> 00:06:45,410\nAnd that's what we normally equate\nwith being the front of something.\n\n145\n00:06:45,410 --> 00:06:47,840\nYou'll see it's got the power\ncable sticking out.\n\n146\n00:06:47,840 --> 00:06:50,040\nWhat device has the power\ncable on the front?\n\n147\n00:06:50,040 --> 00:06:52,410\nThat's where our power switch is too.\n\n148\n00:06:52,410 --> 00:06:57,150\nThe reason I wanted to show this to\nyou guys, is this guy right here.\n\n149\n00:06:57,150 --> 00:07:00,960\nThere's one port that has a little\nlight blue tag on it that says console.\n\n150\n00:07:00,960 --> 00:07:03,750\nAnd that is our console\nmanagement port and\n\n151\n00:07:03,750 --> 00:07:08,650\nno matter what's been done to the router,\nthis port right here is what can allow you\n\n152\n00:07:08,650 --> 00:07:11,590\nto see what's going on even if none\nof the networking is configured.\n\n153\n00:07:13,260 --> 00:07:15,860\n>> We wanna make\n>> Make sure that we can actually know\n\n154\n00:07:15,860 --> 00:07:18,600\nwhat to do to get access into that device,\nso there we go.\n\n155\n00:07:19,730 --> 00:07:23,790\n>> So to get connected to it,\nwe can't just use any old cable.\n\n156\n00:07:23,790 --> 00:07:25,430\nIt is an RJ45 jack, right?\n\n157\n00:07:25,430 --> 00:07:28,300\nYou guys probably noticed that\nwhen we were looking at it.\n\n158\n00:07:28,300 --> 00:07:31,760\nBut it's not a standard RJ45 network jack,\nright?\n\n159\n00:07:31,760 --> 00:07:33,560\nIt's not ethernet or whatever.\n\n160\n00:07:33,560 --> 00:07:34,670\nIt's actually a serial port,\n\n161\n00:07:34,670 --> 00:07:37,280\nthat console port is a serial port\n>> And\n\n162\n00:07:37,280 --> 00:07:40,360\nit functions in much the same\nway as a modem would.\n\n163\n00:07:40,360 --> 00:07:43,683\nIt expects to be connected to\na serial port on a computer, right?\n\n164\n00:07:43,683 --> 00:07:47,712\nSo to get connected,\nwhen you buy a Cisco router or a switch,\n\n165\n00:07:47,712 --> 00:07:52,610\nthey come with a console cable,\none that I'm trying to get unscrewed here\n\n166\n00:07:52,610 --> 00:07:57,036\nto show on camera So they come with\na console cable, and this is it.\n\n167\n00:07:57,036 --> 00:08:00,380\nLet's zoom back in a bit, Ronnie.\n\n168\n00:08:00,380 --> 00:08:03,270\nThe sweet spot for\nthe camera's like way back here.\n\n169\n00:08:03,270 --> 00:08:06,690\nSo here's the console cable that\na lot of these guys come with.\n\n170\n00:08:06,690 --> 00:08:12,710\nAnd you can see it's got\na DB9 serial port on one end,\n\n171\n00:08:12,710 --> 00:08:16,020\nand it's got the little Cisco logo\non it just cuz it came from Cisco.\n\n172\n00:08:16,020 --> 00:08:17,390\nBut you can get third party ones.\n\n173\n00:08:17,390 --> 00:08:18,750\nThey work just as fine.\n\n174\n00:08:18,750 --> 00:08:22,030\nThe other end is a standard RJ 45 jack,\nright.\n\n175\n00:08:23,040 --> 00:08:24,540\nBut look at those colors in there.\n\n176\n00:08:24,540 --> 00:08:27,440\nThey're not colored the way\na CAT 5 cable would be.\n\n177\n00:08:27,440 --> 00:08:30,100\nI don't have any white\ncables in there whatsoever.\n\n178\n00:08:30,100 --> 00:08:32,440\nAnd the cable itself, is flat.\n\n179\n00:08:32,440 --> 00:08:33,910\nThere's no twist.\n\n180\n00:08:33,910 --> 00:08:38,832\nUnlike UTP, or unshielded twisted pair\ncable, there is no twist on this staff\n\n181\n00:08:38,832 --> 00:08:44,510\nthis is just a serial console port, and\nit's used for connecting to those routers.\n\n182\n00:08:44,510 --> 00:08:48,660\nYou plug this jack, into that light\nblue jack that we saw on the router, and\n\n183\n00:08:48,660 --> 00:08:52,730\nyou plug this end into a serial\nport on your computer.\n\n184\n00:08:52,730 --> 00:08:55,470\nIf you have a computer\nmade over ten years ago.\n\n185\n00:08:55,470 --> 00:08:56,780\n>> Right.\n\n186\n00:08:56,780 --> 00:08:59,890\n>> If you have a computer\nmade in this decade,\n\n187\n00:08:59,890 --> 00:09:02,390\nthe odds are you don't have a serial port.\n\n188\n00:09:02,390 --> 00:09:04,570\nIn which case,\nyou gonna need a little something extra.\n\n189\n00:09:04,570 --> 00:09:06,790\nAnd that's what this jobby is right here.\n\n190\n00:09:06,790 --> 00:09:10,731\nYou can find these online,\nthey usually range about $15 to $20.\n\n191\n00:09:10,731 --> 00:09:16,450\nBut what this is, is a serial port,\nthat attaches via USB right?\n\n192\n00:09:16,450 --> 00:09:19,330\nSo I can plug this into like my\nlaptop that has no serial port.\n\n193\n00:09:19,330 --> 00:09:21,040\nAnd it gives me a serial port.\n\n194\n00:09:21,040 --> 00:09:24,090\nAnd in fact the only thing I use this for\nis my Cisco stuff.\n\n195\n00:09:24,090 --> 00:09:28,575\nSo I normally leave this attached, just\nlike that so that I plug into a router,\n\n196\n00:09:28,575 --> 00:09:29,495\nI plug into my computer and\n\n197\n00:09:29,495 --> 00:09:34,495\nit's like attaching the serial port or\nconsole port to my system via USB.\n\n198\n00:09:34,495 --> 00:09:36,865\nI carry this in my little laptop bag,\nand so\n\n199\n00:09:36,865 --> 00:09:38,835\nwhenever I need to connect it I\njust whip this out, and I got it.\n\n200\n00:09:40,615 --> 00:09:44,245\n>> Yeah, so those are the main physical\ncomponents that we would need to have, and\n\n201\n00:09:44,245 --> 00:09:48,610\nwe're gonna begin with our usually right\nout of a box very first bag you're gonna\n\n202\n00:09:48,610 --> 00:09:52,060\nopen is probably this thing,\nwhere you have the console cable.\n\n203\n00:09:52,060 --> 00:09:57,310\nAnd then you're gonna pull out the power\ncord, and of course the device itself.\n\n204\n00:09:57,310 --> 00:09:59,940\nAnd then we're gonna\nactually connect those in.\n\n205\n00:09:59,940 --> 00:10:01,650\n>> Now Don,\ndoes it really matter what order?\n\n206\n00:10:01,650 --> 00:10:03,430\nLike, if I powered the device on,\n\n207\n00:10:03,430 --> 00:10:07,620\nor, do I need to leave it off before\nI should plug it in or anything?\n\n208\n00:10:07,620 --> 00:10:09,200\n>> No, it doesn't really matter for this,\n\n209\n00:10:09,200 --> 00:10:13,630\nnow, we're about to talk about the power\non self test and all that stuff.\n\n210\n00:10:13,630 --> 00:10:16,400\nIf you want to see, what is happening\nwhen it powers on then you need\n\n211\n00:10:16,400 --> 00:10:19,200\nyou need to be connected already\nbefore you power it on, but\n\n212\n00:10:19,200 --> 00:10:22,660\nif your plug in log is already powered on,\nit just picks up right from there so\n\n213\n00:10:22,660 --> 00:10:24,650\nyou can see everything that\nhappens from that point on.\n\n214\n00:10:24,650 --> 00:10:26,770\nSo, it just depends on\nwhat you want to see.\n\n215\n00:10:26,770 --> 00:10:29,520\nYeah, it doesn't hurt to connect\nthese while it's running, and\n\n216\n00:10:29,520 --> 00:10:32,510\nI'm gonna plug in here but\nours is turned off, but that's fine.\n\n217\n00:10:32,510 --> 00:10:36,530\nI flipped it around,\nlet's plug that one in.\n\n218\n00:10:36,530 --> 00:10:39,410\nNow, while Ronnie is getting\nthem all plugged in,\n\n219\n00:10:39,410 --> 00:10:40,800\nI need to figure out a couple of things.\n\n220\n00:10:40,800 --> 00:10:42,980\nIf I'm gonna console into this router,\n\n221\n00:10:42,980 --> 00:10:45,340\nI mentioned that it's kinda like a modem,\nright?\n\n222\n00:10:45,340 --> 00:10:49,690\nAnd if you've never worked with\nanalog dialup modems before,\n\n223\n00:10:49,690 --> 00:10:52,580\nthere's a couple of settings that have\nto be put on them before they work.\n\n224\n00:10:52,580 --> 00:10:54,310\nWe have to define their speed.\n\n225\n00:10:54,310 --> 00:10:57,640\nIt's not like Ethernet, where it just\ntries to use the fastest thing possible.\n\n226\n00:10:57,640 --> 00:11:02,570\nHere we need to tell it what speed it's\ngonna use,Cisco routers are set from\n\n227\n00:11:02,570 --> 00:11:06,590\nthe factory to 9600 baud or\n9.6 kilobytes per second.\n\n228\n00:11:06,590 --> 00:11:12,520\nYou might say to yourself you\ngotta be kidding me 9.6 kilobytes?\n\n229\n00:11:12,520 --> 00:11:15,390\nThat is a very, very small number.\n\n230\n00:11:15,390 --> 00:11:19,790\nBut, all we're displaying is text on\nscreen and so it is perfectly fast enough\n\n231\n00:11:19,790 --> 00:11:23,820\nfor everything that's gonna happen,\n9.6 kilobytes is great.\n\n232\n00:11:23,820 --> 00:11:26,540\nThere's not really any need for\ngoing higher and so\n\n233\n00:11:26,540 --> 00:11:30,430\nthey kinda standardize on this\nnumber that everybody can support.\n\n234\n00:11:30,430 --> 00:11:35,680\nThere's also some other characteristics of\na dialup line that we need to be aware of.\n\n235\n00:11:35,680 --> 00:11:37,760\nAnd,?\nLet me fire up Notepad here and\n\n236\n00:11:37,760 --> 00:11:39,840\nand we'll kinda lay some of these out.\n\n237\n00:11:39,840 --> 00:11:43,830\n>> And now what Don is talking about\nhere is that when you begin to setup a,\n\n238\n00:11:43,830 --> 00:11:48,260\nwhat we call a com port, to connect\nto the devices they're gonna actually\n\n239\n00:11:48,260 --> 00:11:50,780\nhave some hard set limits\non them a lot of times.\n\n240\n00:11:50,780 --> 00:11:53,030\nDon mentioned the idea the speed and\n\n241\n00:11:53,030 --> 00:11:57,920\nnow what he's talking about is what we\nnormally call, you hear the idea of AN1,\n\n242\n00:11:57,920 --> 00:12:02,540\nand so we're gonna talk about the idea\nbits and the parity and the stop.\n\n243\n00:12:02,540 --> 00:12:08,590\nAnd these are things that\nnobody cares about anymore.\n\n244\n00:12:08,590 --> 00:12:13,160\nI ran way back in the 90's,\nI ran a dial up bulletin board system.\n\n245\n00:12:13,160 --> 00:12:14,400\nSo I had a VBS.\n\n246\n00:12:14,400 --> 00:12:15,570\nAnd we had modems and\n\n247\n00:12:15,570 --> 00:12:17,920\npeople would dial in at all sorts\nof different speeds and stuff.\n\n248\n00:12:17,920 --> 00:12:19,440\nAnd you had to publish this information so\n\n249\n00:12:19,440 --> 00:12:22,070\nthey knew how to set their\nsystem to talk to yours.\n\n250\n00:12:22,070 --> 00:12:24,500\nWell, in today's world where\neverything's Ethernet,\n\n251\n00:12:24,500 --> 00:12:26,820\nnobody even thinks about\nthe stuff anymore.\n\n252\n00:12:26,820 --> 00:12:29,120\nThis is one of the few times\nthat you'll see it and\n\n253\n00:12:29,120 --> 00:12:31,500\nso we just have to remember\nhow Cisco defines it.\n\n254\n00:12:31,500 --> 00:12:34,738\nCisco defines it at 9600 BOD or\nbits per second for the speed.\n\n255\n00:12:34,738 --> 00:12:36,650\nAnd then 8-N-1.\n\n256\n00:12:36,650 --> 00:12:39,420\nSo eight for the data bits,\nN for the parody.\n\n257\n00:12:39,420 --> 00:12:40,870\nThat means no parody.\n\n258\n00:12:40,870 --> 00:12:43,980\nAnd one for the stop bits,\nthat means after every eight bits,\n\n259\n00:12:43,980 --> 00:12:46,800\nthere will be one stop-bit that's issued\nto let you know the eight bits are done,\n\n260\n00:12:46,800 --> 00:12:49,940\nand that way, if you missed a bit,\nyou'd know it.\n\n261\n00:12:49,940 --> 00:12:56,280\nSo, just simple things, in order to\nconnect, I plugged in my USB cable.\n\n262\n00:12:56,280 --> 00:12:57,970\nIt's plugged in on my system.\n\n263\n00:12:57,970 --> 00:13:01,780\nThe USB ports, if you use\na physical one on your computer,\n\n264\n00:13:01,780 --> 00:13:04,070\nthey're normally labelled COM1, COM2.\n\n265\n00:13:04,070 --> 00:13:08,190\nWhen you plug in a USB one, you have no\nidea what COM number it's been assigned,\n\n266\n00:13:08,190 --> 00:13:13,130\nso I'm gonna go into my\nDevice Manager real quick, and\n\n267\n00:13:13,130 --> 00:13:16,060\nin my Device Manager under Ports,\n\n268\n00:13:16,060 --> 00:13:21,310\nI can find my USB to serial COM port and\nmine got COM3, okay?\n\n269\n00:13:21,310 --> 00:13:23,670\nDon't assume that you're\nalways gonna get COM3.\n\n270\n00:13:23,670 --> 00:13:27,260\nAnd in fact if you move between USB ports,\noftentimes they will change\n\n271\n00:13:27,260 --> 00:13:30,420\non the same laptop with the same\ncable with the same OS.\n\n272\n00:13:30,420 --> 00:13:33,931\nI've got COM7,\nCOM6 before you just never know.\n\n273\n00:13:33,931 --> 00:13:36,069\nToday I get COM3.\n\n274\n00:13:36,069 --> 00:13:40,227\n>> All right, so John now that we\nhave the idea of bits and the bod and\n\n275\n00:13:40,227 --> 00:13:43,580\nall that,\nhow do I now get connected, okay?\n\n276\n00:13:43,580 --> 00:13:44,270\nWe have the device,\n\n277\n00:13:44,270 --> 00:13:47,970\nwe're not powering it on yet cuz we wanna\nsee some of the processes go on here.\n\n278\n00:13:47,970 --> 00:13:48,790\nBut what do we need?\n\n279\n00:13:48,790 --> 00:13:54,320\nWe need some software then that allows us\nto emulate the idea of a terminal, okay?\n\n280\n00:13:54,320 --> 00:13:56,885\nSo there's many different\nprograms out there right?\n\n281\n00:13:56,885 --> 00:13:57,501\n>> Oh yeah.\n\n282\n00:13:57,501 --> 00:14:02,120\nWhen I got started with Cisco they\nrecommended a program called Tera Term.\n\n283\n00:14:02,120 --> 00:14:07,150\nAnd Tera Term isn't supported anymore,\nhasn't been supported in years Windows.\n\n284\n00:14:07,150 --> 00:14:09,360\nIn Windows XP and earlier,\ncame with HyperTerm.\n\n285\n00:14:09,360 --> 00:14:10,790\n>> Right.\n>> It was built in, and so\n\n286\n00:14:10,790 --> 00:14:13,925\nCisco switched that,\nMicrosoft dropped that, in Vista.\n\n287\n00:14:13,925 --> 00:14:15,660\n>> [LAUGH].\n>> And so, your choices for\n\n288\n00:14:15,660 --> 00:14:18,790\nterminal software are really\nwide open to you.\n\n289\n00:14:18,790 --> 00:14:21,240\nCisco does not make terminal software.\n\n290\n00:14:21,240 --> 00:14:22,000\n>> Yeah.\n>> They don't have one,\n\n291\n00:14:22,000 --> 00:14:24,310\nso you have to use some third party.\n\n292\n00:14:24,310 --> 00:14:29,580\nIf your using a Unix or\na Linux box, right.\n\n293\n00:14:29,580 --> 00:14:31,955\nMost of them have\nMicro-com built into them.\n\n294\n00:14:31,955 --> 00:14:33,870\nMicro-com is a terminal program.\n\n295\n00:14:33,870 --> 00:14:35,740\nA lot of times it's just installed.\n\n296\n00:14:35,740 --> 00:14:38,500\nYou don't even have to install it,\nit's part of the base distro.\n\n297\n00:14:38,500 --> 00:14:43,580\nIf you're running a Windows box Windows\ndoes not have any terminal software.\n\n298\n00:14:43,580 --> 00:14:49,050\nSo the one that is probably the most\npopular today is a product called Putty.\n\n299\n00:14:49,050 --> 00:14:52,380\nAnd Putty, it's just P-U-T-T-Y,\nlet me pull it up.\n\n300\n00:14:55,650 --> 00:14:56,700\nSo P-U-T-T-Y.\n\n301\n00:14:56,700 --> 00:14:59,880\nIt is a, I don't know if it's open source.\n\n302\n00:14:59,880 --> 00:15:03,550\nI know that it is a free terminal\nprogram that you can use.\n\n303\n00:15:03,550 --> 00:15:05,590\nI don't know if they\npublish their source code.\n\n304\n00:15:05,590 --> 00:15:08,420\n>> Yeah, I don't know either.\n\n305\n00:15:08,420 --> 00:15:10,730\n>> Oh yeah,\nactually there are downloads for it.\n\n306\n00:15:10,730 --> 00:15:12,620\n>> Yeah.\n>> I know I saw it but now it's gone.\n\n307\n00:15:12,620 --> 00:15:13,780\nShoot, where was it?\n\n308\n00:15:13,780 --> 00:15:15,840\nYeah, source code, they do publish those.\n\n309\n00:15:15,840 --> 00:15:18,710\nIt's open source and free.\n\n310\n00:15:18,710 --> 00:15:22,320\nNot only does it do terminal\ncommunications on a serial port,\n\n311\n00:15:22,320 --> 00:15:25,010\nit also does Telnet and SSH, right?\n\n312\n00:15:25,010 --> 00:15:27,450\nAnd so,\nit is really a full service product.\n\n313\n00:15:27,450 --> 00:15:32,400\nI use it all the time and I've already\ngot it installed on my machine.\n\n314\n00:15:32,400 --> 00:15:36,325\nBut if you just do a Google search for\nputty, because the URL for\n\n315\n00:15:36,325 --> 00:15:40,472\ntheir page is obnoxious,\nif you just do a Google search for putty,\n\n316\n00:15:40,472 --> 00:15:45,013\nyou'll find it is really the most\ncommon terminal package for Windows.\n\n317\n00:15:45,013 --> 00:15:49,231\nIn Linux and other ones, it's different\nbecause if you're on a Linux distro with\n\n318\n00:15:49,231 --> 00:15:53,523\nKDE as your user interface, it'll have K\nterm built in and that works really well.\n\n319\n00:15:53,523 --> 00:15:56,994\nOther ones you might use Xterm but they're\ncapable of using serial communications.\n\n320\n00:15:56,994 --> 00:15:59,829\nI always use Microcom because\nit was there you know so\n\n321\n00:15:59,829 --> 00:16:03,350\njust different options are out\nthere depending on your OS.\n\n322\n00:16:03,350 --> 00:16:04,580\nYep.\n\n323\n00:16:04,580 --> 00:16:09,450\n>> So, we're gonna use putty as well\nas our particular terminal connection\n\n324\n00:16:09,450 --> 00:16:13,670\nto allow us to connect into this\nrouter when we are ready to go here.\n\n325\n00:16:13,670 --> 00:16:14,230\n>> Yep.\n\n326\n00:16:14,230 --> 00:16:15,070\nSo, let me just fire up putty.\n\n327\n00:16:15,070 --> 00:16:15,950\nHere we go.\n\n328\n00:16:15,950 --> 00:16:21,400\nSo, I'm firing up putty and it defaults to\ndoing SSH connections cuz that's what it,\n\n329\n00:16:21,400 --> 00:16:23,430\nyou know, what it assumes\nmost people are going to do.\n\n330\n00:16:23,430 --> 00:16:25,610\nAnd, for me, normally,\nthat is what I'm gonna do.\n\n331\n00:16:25,610 --> 00:16:28,800\nBut this time I'm gonna use cereal.\n\n332\n00:16:28,800 --> 00:16:29,860\nAnd under cereal.\n\n333\n00:16:29,860 --> 00:16:31,280\nSee how it defaulted to com one.\n\n334\n00:16:31,280 --> 00:16:33,280\nI'm gonna change that to com three.\n\n335\n00:16:33,280 --> 00:16:36,210\nAnd it’s already at 9600 blog.\n\n336\n00:16:36,210 --> 00:16:38,490\nThe author of putty knows,\n\n337\n00:16:38,490 --> 00:16:42,240\nthat most people don't use\nserial communications anymore.\n\n338\n00:16:42,240 --> 00:16:45,560\nThe most common use is for things, like\nwith Cisco equipment, so they actually\n\n339\n00:16:45,560 --> 00:16:51,500\ndefault to everything that we would\nexpect to have for a Cisco system.\n\n340\n00:16:51,500 --> 00:16:53,770\nDown here at the bottom\nleft if I go to serial,\n\n341\n00:16:53,770 --> 00:16:57,310\nhere's where you'll see the data bits,\nthe stop bits, and the parity.\n\n342\n00:16:57,310 --> 00:16:59,880\nAnd see how it's set to eight and one.\n\n343\n00:16:59,880 --> 00:17:00,640\nRight?\n\n344\n00:17:00,640 --> 00:17:03,120\nEight data bits, one stop bit, no parity.\n\n345\n00:17:03,120 --> 00:17:04,480\nThat's the default.\n\n346\n00:17:04,480 --> 00:17:08,005\nNow, there is one other setting here,\nwhich is flow control.\n\n347\n00:17:08,005 --> 00:17:08,630\n>> Mm-hm.\n\n348\n00:17:08,630 --> 00:17:12,500\n>> Flow control back in the dialup days,\nif one side was going too fast and\n\n349\n00:17:12,500 --> 00:17:16,160\nthe other side got behind, if it's buffer\nis filled up, it could send a message back\n\n350\n00:17:16,160 --> 00:17:19,280\nsaying, hey, hang on a second,\ngive me a minute to get caught up, right?\n\n351\n00:17:19,280 --> 00:17:22,140\nWell, Cisco routers actually\ndon't support flow control.\n\n352\n00:17:22,140 --> 00:17:24,450\nSo this option doesn't really matter.\n\n353\n00:17:24,450 --> 00:17:29,780\nIt's set to x on x off here, but\nif you change it to none it works.\n\n354\n00:17:29,780 --> 00:17:31,760\nReally if you change it\nto any of them it works.\n\n355\n00:17:31,760 --> 00:17:33,990\nBecause the router just ignores it, right?\n\n356\n00:17:33,990 --> 00:17:35,960\nBut technically they\ndon't do flow control.\n\n357\n00:17:35,960 --> 00:17:37,460\nI'll just leave it turned on.\n\n358\n00:17:37,460 --> 00:17:38,200\nBut it doesn't matter.\n\n359\n00:17:40,140 --> 00:17:42,750\nAll right, so\nI'm gonna go ahead and hit open.\n\n360\n00:17:42,750 --> 00:17:45,960\nAnd when I hit open I get nothing.\n\n361\n00:17:45,960 --> 00:17:47,828\nNothing because the router's\nnot powered on.\n\n362\n00:17:47,828 --> 00:17:50,243\nRonnie let's hit the power there.\n\n363\n00:17:50,243 --> 00:17:52,060\n>> It could get a little noisy for moment.\n\n364\n00:17:53,530 --> 00:17:54,620\n>> And so\n\n365\n00:17:54,620 --> 00:17:57,930\nI know it's working because immediately I\nstart to see some output on the screen.\n\n366\n00:17:57,930 --> 00:18:01,530\nAnd let me adjust my memory buffer\nhere to make sure It'll save all this.\n\n367\n00:18:01,530 --> 00:18:04,069\nI'm pretty sure I've already done it,\nbut let me just double check.\n\n368\n00:18:07,006 --> 00:18:08,248\n2,000, good.\n\n369\n00:18:08,248 --> 00:18:09,220\nThat should be plenty.\n\n370\n00:18:09,220 --> 00:18:10,010\nAll right.\n\n371\n00:18:10,010 --> 00:18:11,600\nSo now it is booting up.\n\n372\n00:18:11,600 --> 00:18:16,180\nAnd when a Cisco router boots up,\nit's just like a PC.\n\n373\n00:18:16,180 --> 00:18:18,740\nWith a PC, you boot up and\nget your BIOS screen.\n\n374\n00:18:18,740 --> 00:18:20,720\nAnd it does a power on self test.\n\n375\n00:18:20,720 --> 00:18:22,520\nIt does POST, right?\n\n376\n00:18:22,520 --> 00:18:26,450\nAnd after the post, it then goes to\nboot the operating system and so on.\n\n377\n00:18:26,450 --> 00:18:28,070\nWell, that's what\nthe router's doing right now.\n\n378\n00:18:28,070 --> 00:18:32,710\nWhen you see this System Bootstrap, the\nbootstrap, that's basically the BIOS for\n\n379\n00:18:32,710 --> 00:18:33,510\nthe router.\n\n380\n00:18:33,510 --> 00:18:38,230\nSo it's kicking in,\ninitializing all the hardware, and only\n\n381\n00:18:38,230 --> 00:18:41,080\nonce it's done with that does it actually\nturn over to the operating system.\n\n382\n00:18:43,210 --> 00:18:46,940\nAll right, so\ncouple of things to note here.\n\n383\n00:18:46,940 --> 00:18:50,444\nWhen you boot up your system,\nit'll say system boot strap.\n\n384\n00:18:50,444 --> 00:18:53,590\nAnd here, it's saying version 12.41R.\n\n385\n00:18:53,590 --> 00:18:54,205\nAll right?\n\n386\n00:18:54,205 --> 00:18:58,830\nOn a PC overtime, your BIOS gets\noutdated and you do BIOS upgrades.\n\n387\n00:18:58,830 --> 00:19:00,870\nRight?\nYou upgrade the firmware on your\n\n388\n00:19:00,870 --> 00:19:02,360\nmotherboard.\n\n389\n00:19:02,360 --> 00:19:04,450\nOn a Cisco router, you don't.\n\n390\n00:19:04,450 --> 00:19:06,410\nYou cannot upgrade the bootstrap.\n\n391\n00:19:06,410 --> 00:19:09,190\nYou'd have to send it into\nCisco to upgrade it, and\n\n392\n00:19:09,190 --> 00:19:12,010\nthey're not normally gonna do it because\nthere's not really a lot of point.\n\n393\n00:19:12,010 --> 00:19:13,520\nSo when you look at this and\n\n394\n00:19:13,520 --> 00:19:17,805\nyou see system bootstrap 12.4,\nyou might think, wait a minute.\n\n395\n00:19:17,805 --> 00:19:19,762\nSo I'm running IOS 12.4?\n\n396\n00:19:19,762 --> 00:19:22,075\nNo.\nThis is just the BIOS,\n\n397\n00:19:22,075 --> 00:19:24,035\nit hasn't even gotten to\nthe operating system yet.\n\n398\n00:19:24,035 --> 00:19:26,305\nSo, always keep that in mind.\n\n399\n00:19:26,305 --> 00:19:29,649\nSo after that, it's just telling me\nlike this bootstrap is Copyright 2005.\n\n400\n00:19:29,649 --> 00:19:30,775\nThat's pretty old, right?\n\n401\n00:19:30,775 --> 00:19:31,437\n>> Mm-hm.\nYeah.\n\n402\n00:19:31,437 --> 00:19:32,527\n>> What is that, like eight years ago?\n>> Yeah.\n\n403\n00:19:32,527 --> 00:19:34,940\n>> So that's a long time ago.\n\n404\n00:19:34,940 --> 00:19:40,470\nBut again, not a big deal because we don't\nactually run the BIOS after this point.\n\n405\n00:19:40,470 --> 00:19:45,460\nAnd after the BIOS is happy,\nthen it starts to boot up the system and\n\n406\n00:19:45,460 --> 00:19:48,900\nwe get into what we're really running,\nwhat our real operating system is.\n\n407\n00:19:48,900 --> 00:19:50,536\n>> Yep.\n>> All right,\n\n408\n00:19:50,536 --> 00:19:54,970\nso after the bios kicks in,\nit's then doing a power on self test.\n\n409\n00:19:54,970 --> 00:19:56,145\nAnd that's what's happening.\n\n410\n00:19:56,145 --> 00:19:56,910\n>> [LAUGH]\n>> This\n\n411\n00:19:56,910 --> 00:19:58,900\nthing's going to keep scrolling on me.\n\n412\n00:19:58,900 --> 00:20:02,120\nHow do I turn off the auto\nscroll on this one, or can I?\n\n413\n00:20:04,850 --> 00:20:08,550\nSomewhere in here, it's got where it does\nthe automatic scrolling or whatever.\n\n414\n00:20:08,550 --> 00:20:09,100\nYou know what?\n\n415\n00:20:09,100 --> 00:20:10,460\nForget it.\nWe'll just go back here.\n\n416\n00:20:10,460 --> 00:20:11,510\nIt's calming down.\n\n417\n00:20:11,510 --> 00:20:14,350\nSo when we start to take a look at this,\nwhat all is going on here?\n\n418\n00:20:14,350 --> 00:20:15,930\nYou know what I'll do?\n\n419\n00:20:15,930 --> 00:20:19,470\nI'll copy this and paste it in notepad.\n\n420\n00:20:19,470 --> 00:20:21,010\nThat way,\nyou don't have to worry about it.\n\n421\n00:20:21,010 --> 00:20:25,220\nOkay.\nSo this is the boot process.\n\n422\n00:20:25,220 --> 00:20:28,050\nWe'll talk about everything that's\ngoing on here when the system boots.\n\n423\n00:20:28,050 --> 00:20:28,780\nAll right.\n\n424\n00:20:28,780 --> 00:20:31,510\nSo first off, we get our BIOS.\n\n425\n00:20:31,510 --> 00:20:32,270\nAnd do you know what I'm gonna do?\n\n426\n00:20:32,270 --> 00:20:33,250\nI'm gonna make notes on this.\n\n427\n00:20:33,250 --> 00:20:37,020\nAnd then we'll stick it on the webpage,\ntoo, so you guys can see it.\n\n428\n00:20:37,020 --> 00:20:40,376\nFrom my notes,\nlet's just indicate this, like\n\n429\n00:20:47,190 --> 00:20:48,390\nI'll put them in square brackets.\n\n430\n00:20:49,760 --> 00:20:55,330\nSo this is the BIOS starting up,\nis what we see right here,\n\n431\n00:20:55,330 --> 00:20:58,570\nwhere we see system bootstrap\nversion 12.4, right?\n\n432\n00:20:58,570 --> 00:21:02,860\nAnd then we can see the POST starting.\n\n433\n00:21:02,860 --> 00:21:06,390\nAnd POST is just power on self test.\n\n434\n00:21:06,390 --> 00:21:08,320\nSo it's starting to go through and\nlook at the hardware.\n\n435\n00:21:08,320 --> 00:21:10,895\nAnd it starts with memory right?\n\n436\n00:21:10,895 --> 00:21:14,110\n>> And there are different types of\nmemory that we actually do have.\n\n437\n00:21:14,110 --> 00:21:15,800\nDo we want to get into that now Don?\n\n438\n00:21:17,000 --> 00:21:19,330\n>> Let's just talk about the RAM for\nright now.\n\n439\n00:21:19,330 --> 00:21:21,640\n>> As you actually take a look at this,\n\n440\n00:21:21,640 --> 00:21:24,855\nit tells you at least on\nthis particular router,\n\n441\n00:21:24,855 --> 00:21:30,670\n28-21 we have a processor and we have\nwhat about 264 megs of memory, is that?\n\n442\n00:21:30,670 --> 00:21:33,600\n>> You know,\nthe RAM numbers are always weird.\n\n443\n00:21:33,600 --> 00:21:36,314\nSo this one has, for all intents and\npurposes, 256 megs of memory.\n\n444\n00:21:36,314 --> 00:21:37,044\n>> Yeah.\n\n445\n00:21:37,044 --> 00:21:40,331\n256, and we're talking about\njust main memory at this point.\n\n446\n00:21:40,331 --> 00:21:43,276\nThis is where our operating\nsystem is gonna load up into and\n\n447\n00:21:43,276 --> 00:21:46,360\neverything else that we have\n>> So that's what we're actually doing and\n\n448\n00:21:46,360 --> 00:21:49,830\nwe're seeing a 64bit mode and\nthis is ECC memory as well.\n\n449\n00:21:49,830 --> 00:21:51,180\n>> Yep.\nSo it's doing error correction.\n\n450\n00:21:51,180 --> 00:21:53,210\n>> Doing some error\ncorrection at this point.\n\n451\n00:21:53,210 --> 00:21:57,450\n>> Yeah, you know, when you crack open a\nrouter and you look at the innards of it,\n\n452\n00:21:57,450 --> 00:22:01,430\nyou know, a lot of it is standard\nPC components and, you know,\n\n453\n00:22:01,430 --> 00:22:05,280\nthey have RAM and CPUs and\nstuff just like a PC does.\n\n454\n00:22:05,280 --> 00:22:09,280\nThat RAM,\nit's usually server grade RAM, so\n\n455\n00:22:09,280 --> 00:22:11,340\nit does error correction\nbecause this is sensitive data.\n\n456\n00:22:11,340 --> 00:22:13,200\nYou want the device to run for\na long time.\n\n457\n00:22:13,200 --> 00:22:15,655\nVersus desktop memory\nthat wouldn't be EEC.\n\n458\n00:22:15,655 --> 00:22:17,580\n>> Mm-hm.\n>> So it is higher grade memory.\n\n459\n00:22:17,580 --> 00:22:19,640\nYou don't necessarily have a lot of it.\n\n460\n00:22:19,640 --> 00:22:20,210\n>> Yeah [LAUGH].\n\n461\n00:22:20,210 --> 00:22:23,450\n>> So there,\nit's just initializing that memory, right?\n\n462\n00:22:23,450 --> 00:22:27,160\nSo memory's got to start up first because\nthe operating system's gonna get loaded\n\n463\n00:22:27,160 --> 00:22:28,240\ninto RAM.\n\n464\n00:22:28,240 --> 00:22:31,270\nIt doesn't show it, but\nthe CPU, well, I guess it does.\n\n465\n00:22:31,270 --> 00:22:32,610\n>> Yeah.\n>> We got our CPU right here,\n\n466\n00:22:32,610 --> 00:22:35,170\nC21 processor kicking in.\n\n467\n00:22:35,170 --> 00:22:38,510\nAnd then it just shows\nthe total amount of memory.\n\n468\n00:22:38,510 --> 00:22:42,310\nIt doesn't show us initializing the\nprocessor, it's just reflecting it there.\n\n469\n00:22:42,310 --> 00:22:45,700\nSo the processor's actually already\nstarted by the time we get to that point.\n\n470\n00:22:45,700 --> 00:22:46,560\nAll right.\n\n471\n00:22:46,560 --> 00:22:49,680\nSo this one has a, well,\nthey say it's a Cisco processor.\n\n472\n00:22:49,680 --> 00:22:52,920\nIf we were to crack it open you would find\nthat it's actually not by Cisco at all.\n\n473\n00:22:52,920 --> 00:22:54,390\nIt's probably by Motorola.\n\n474\n00:22:54,390 --> 00:22:57,000\nBut anyhow, so\nyou see the amount of memory.\n\n475\n00:22:57,000 --> 00:22:58,950\nNow, the memory numbers\nare always gonna be weird.\n\n476\n00:23:00,210 --> 00:23:05,560\nThis router has 256 megs of memory, and\nthe reason it's reporting it as 262 megs,\n\n477\n00:23:05,560 --> 00:23:10,240\nwhich is a weird number,\nis there will be a RAM stick,\n\n478\n00:23:10,240 --> 00:23:15,110\nan actual memory stick put in there,\nthat's probably a 256 meg stick.\n\n479\n00:23:15,110 --> 00:23:19,480\nBut then there with also be some onboard\nmemory sauntered onto the board.\n\n480\n00:23:19,480 --> 00:23:21,160\nNot normally a lot, right?\n\n481\n00:23:21,160 --> 00:23:25,400\nSo, you know, maybe six megs or four megs\nor whatever, and that's why these numbers\n\n482\n00:23:25,400 --> 00:23:28,600\nare weird because it's a combination of\nthe stick that's added in the onboards.\n\n483\n00:23:28,600 --> 00:23:31,610\nYou know, but for\nall intents and purposes,\n\n484\n00:23:31,610 --> 00:23:36,230\nit's really just the stick that's\ngetting used so it's 256 megs.\n\n485\n00:23:36,230 --> 00:23:37,110\nAll right.\n\n486\n00:23:37,110 --> 00:23:38,820\nThis one is in 64 bit mode.\n\n487\n00:23:38,820 --> 00:23:39,475\nNow what does that mean to us?\n\n488\n00:23:39,475 --> 00:23:44,077\nNot really much anything, cuz you don't\nget to take advantage of 64 bit stuff\n\n489\n00:23:44,077 --> 00:23:46,972\nuntil you're over 3 gigs of RAM,\n4 gigs of RAM.\n\n490\n00:23:46,972 --> 00:23:49,457\nAnd this one's well below that.\n\n491\n00:23:49,457 --> 00:23:54,052\nAll right, so that's our post,\nour hardware check, now it hasn't actually\n\n492\n00:23:54,052 --> 00:23:59,120\nchecked the interfaces and stuff yet,\nit's checking the motherboard right?\n\n493\n00:23:59,120 --> 00:24:01,430\nLooking for anything that's failing.\n\n494\n00:24:01,430 --> 00:24:06,740\nIf there's a failure, it's gonna\ndrop into what's called ROMMON mode,\n\n495\n00:24:06,740 --> 00:24:09,079\nwhich is what I'm seeing\nnext here on this note.\n\n496\n00:24:10,160 --> 00:24:11,140\nIf there's a failure,\n\n497\n00:24:11,140 --> 00:24:15,020\nwe go into a special operating system\nto be able to troubleshoot it.\n\n498\n00:24:15,020 --> 00:24:18,950\nIf there's not, you get a message\nthat says ROMMON is initialized, but\n\n499\n00:24:18,950 --> 00:24:20,660\nthen it moves right past it.\n\n500\n00:24:20,660 --> 00:24:22,640\nSo there was no failure detected here.\n\n501\n00:24:22,640 --> 00:24:23,680\nIt's moving past it.\n\n502\n00:24:23,680 --> 00:24:27,300\nIf a failure was detected,\nthis would then lead us into a special OS.\n\n503\n00:24:28,660 --> 00:24:32,450\n>> After this point here, once the ROMMON\nis kind of done, and we're not doing it,\n\n504\n00:24:32,450 --> 00:24:37,430\nit checks and looks for certain types\nof configurations that we may have, but\n\n505\n00:24:37,430 --> 00:24:40,120\nfor us it says, the program is now loaded.\n\n506\n00:24:40,120 --> 00:24:43,018\nEntry point is telling you\nwhere it RAM it's gonna begin.\n\n507\n00:24:43,018 --> 00:24:45,738\nAnd what's gonna happen,\nit's going to take the iOS now and\n\n508\n00:24:45,738 --> 00:24:48,739\nit's going to actually take that and\nbegin to expand it out in RAM.\n\n509\n00:24:48,739 --> 00:24:52,058\nUsually the iOS for\nour router is going to be compressed and\n\n510\n00:24:52,058 --> 00:24:56,407\nstored in what we call flash memory,\nand we'll talk about that in a moment.\n\n511\n00:24:56,407 --> 00:25:00,750\n>> Yeah, the iOS, it can be pretty big.\n\n512\n00:25:00,750 --> 00:25:04,680\nYou have,\nyou were eluding to this earlier Ronnie.\n\n513\n00:25:04,680 --> 00:25:06,580\nWe have multiple types\nof memory in the router.\n\n514\n00:25:06,580 --> 00:25:08,560\nReally it boils down to two.\n\n515\n00:25:08,560 --> 00:25:10,390\nYou've got RAM and you've got flash.\n\n516\n00:25:11,680 --> 00:25:15,440\nIn PC terms,\nthe RAM is the memory that you run from.\n\n517\n00:25:15,440 --> 00:25:18,980\nJust like on a PC every time you\nturn the PC off the RAM gets erased,\n\n518\n00:25:18,980 --> 00:25:20,690\nsame thing on a router.\n\n519\n00:25:20,690 --> 00:25:23,520\nThe flash is like a hard drive, all right.\n\n520\n00:25:23,520 --> 00:25:25,540\nSo, you have flash memory where\nyou write things to it and\n\n521\n00:25:25,540 --> 00:25:28,350\nif you power the router\noff it stays in flash.\n\n522\n00:25:28,350 --> 00:25:33,250\nNow, that flash memory is more expensive,\nand so, there is, it's not,\n\n523\n00:25:33,250 --> 00:25:36,790\nwell I guess it depends on how you look\nat it, expense is always subjective.\n\n524\n00:25:36,790 --> 00:25:42,740\nBut, it is more expensive and so,\nthere is less of it inside of the router.\n\n525\n00:25:42,740 --> 00:25:45,400\nAnd so, the router will oftentimes have\n\n526\n00:25:45,400 --> 00:25:47,560\na much smaller amount of\nflash than it does RAM.\n\n527\n00:25:47,560 --> 00:25:48,780\nAnd in fact, in this one,\n\n528\n00:25:48,780 --> 00:25:53,390\nI think we've got 256 megs of RAM and\nonly 64 megs of flash.\n\n529\n00:25:53,390 --> 00:25:55,990\nSo, a quarter of that in flash.\n\n530\n00:25:55,990 --> 00:25:59,390\n>> And that's because we normally\nstore a lot inside of flash.\n\n531\n00:25:59,390 --> 00:26:00,320\nWe're not.\n\n532\n00:26:00,320 --> 00:26:01,180\nIt's not my laptop,\n\n533\n00:26:01,180 --> 00:26:05,230\nwhere I'm downloading everything\nevery day and putting stuff in there.\n\n534\n00:26:05,230 --> 00:26:08,120\nUsually, it's for us, storage for the iOS.\n\n535\n00:26:08,120 --> 00:26:11,770\n>> So the operating system that we're\ngonna boot off of, the Cisco iOS,\n\n536\n00:26:11,770 --> 00:26:15,270\nthe inter-network operating system,\nit's actually archived,\n\n537\n00:26:15,270 --> 00:26:18,470\nit's zipped and\ncompressed to make it smaller.\n\n538\n00:26:18,470 --> 00:26:22,000\nAnd when you boot up, when we saw those\npound signs, let's just pull it back up,\n\n539\n00:26:22,000 --> 00:26:27,510\nwhen we saw all those pound signs\nscrolling by the screen, right here,\n\n540\n00:26:27,510 --> 00:26:32,320\nas they were scrolling by, it was taking\nthat operating system file that was\n\n541\n00:26:32,320 --> 00:26:37,350\non the flash or on its hard-drive,\nand, decompressing it into\n\n542\n00:26:37,350 --> 00:26:41,320\nRAM where it had plenty of room\nto roam about freely, right?\n\n543\n00:26:41,320 --> 00:26:43,820\nAnd, it is just a zip file,\na lot of people don't mess with this,\n\n544\n00:26:43,820 --> 00:26:46,490\nbut let me show you guys.\n\n545\n00:26:46,490 --> 00:26:52,810\nSo here, I've got a couple of iOS files\nsitting on my desktop, and when you look\n\n546\n00:26:52,810 --> 00:26:57,620\nat them, they end in .bin, which is just\nbinary, and that's what Cisco calls them.\n\n547\n00:26:57,620 --> 00:26:59,430\nSo I got a couple of different ones here.\n\n548\n00:26:59,430 --> 00:27:01,940\nLet's pick one that's nice and big.\n\n549\n00:27:01,940 --> 00:27:04,020\nThis one.\nSo here's an example of a 2800,\n\n550\n00:27:04,020 --> 00:27:08,480\nand let me get into a command prompt where\nwe can see the sizes a little better.\n\n551\n00:27:12,302 --> 00:27:14,986\nAll right, so I want to take this\nadvance IP service as one here,\n\n552\n00:27:14,986 --> 00:27:15,944\nthis big guy, right.\n\n553\n00:27:15,944 --> 00:27:18,360\n57 mgs in size.\n\n554\n00:27:18,360 --> 00:27:23,480\nNow if I have 64 mgs of RAM,\nI mean of flash in my system,\n\n555\n00:27:23,480 --> 00:27:26,330\nthis will fit in there with only\na little bit more to spare right?\n\n556\n00:27:26,330 --> 00:27:27,220\n>> Right.\n\n557\n00:27:27,220 --> 00:27:28,920\nBut if I decompress it,\n\n558\n00:27:28,920 --> 00:27:32,020\nif I unarchive it like what's gonna\ngo into RAM, it gets much bigger.\n\n559\n00:27:32,020 --> 00:27:32,740\nSo let me do that.\n\n560\n00:27:32,740 --> 00:27:33,770\nI'm gonna take this file.\n\n561\n00:27:33,770 --> 00:27:36,230\nI'm gonna make a copy of it.\n\n562\n00:27:37,930 --> 00:27:42,870\nAnd I'm gonna change the file\nextension from .bin to .zip.\n\n563\n00:27:42,870 --> 00:27:47,480\nOkay, dot zip means it's just gonna\nbe a regular zip archive now.\n\n564\n00:27:47,480 --> 00:27:51,030\nAnd you'll see its icon changed and\nWindows is choking on it,\n\n565\n00:27:51,030 --> 00:27:53,360\nbut seven zip should be okay with it,\nlet's open it there.\n\n566\n00:27:55,110 --> 00:27:57,240\nYep, seven zip was fine with it.\n\n567\n00:27:57,240 --> 00:28:02,470\nAnd so, now I can decompress it, and\nthe decompressed name is different.\n\n568\n00:28:02,470 --> 00:28:03,430\n>> Yeah.\n>> So, I'm going to,\n\n569\n00:28:03,430 --> 00:28:06,300\nwell, we'll just leave it here\nwith that different name.\n\n570\n00:28:06,300 --> 00:28:07,990\n>> Yeah.\n>> It'll be easier to spot.\n\n571\n00:28:07,990 --> 00:28:14,980\nBut now when I go in here and\nlook, this first one, is\n\n572\n00:28:14,980 --> 00:28:20,830\nthe uncompressed version of that iOS, and\nthe second one is the compressed version.\n\n573\n00:28:20,830 --> 00:28:26,580\nSo you're looking at 57 megs compressed,\n123 megs decompressed.\n\n574\n00:28:26,580 --> 00:28:28,790\nSo it's gonna take up 123 megs or\n\n575\n00:28:28,790 --> 00:28:31,740\nhalf of my RAM to run\nthe operating system from RAM.\n\n576\n00:28:33,310 --> 00:28:37,590\nBut it is gonna run a heck of a lot\nfaster in RAM than it would on flash and\n\n577\n00:28:37,590 --> 00:28:39,110\nit does still leave the other half.\n\n578\n00:28:39,110 --> 00:28:43,415\nI still have 128 megs of RAM left over\nfrom my other routing processes for\n\n579\n00:28:43,415 --> 00:28:47,940\n[INAUDIBLE] and all that other good stuff\nto run in, so I've got plenty of room.\n\n580\n00:28:49,060 --> 00:28:51,160\nThink of your desktop OS, right?\n\n581\n00:28:51,160 --> 00:28:56,860\nIf you have Windows 8 or CentOS, or\nwhatever it is that you're running.\n\n582\n00:28:56,860 --> 00:28:58,990\nIt runs all right off the hard drive.\n\n583\n00:28:58,990 --> 00:29:01,820\nThink how much faster it runs off of SSD.\n\n584\n00:29:01,820 --> 00:29:06,140\nSSD, traditional SATA hard drives compared\nto SSD, it's a world of difference.\n\n585\n00:29:06,140 --> 00:29:09,950\nWell, the flash on this system, it's fast.\n\n586\n00:29:09,950 --> 00:29:12,750\nBut the RAM, that's even faster.\n\n587\n00:29:12,750 --> 00:29:15,560\nImagine if you could run your\nentire computer off of your RAM,\n\n588\n00:29:15,560 --> 00:29:16,870\nit would just blaze.\n\n589\n00:29:16,870 --> 00:29:19,610\nBut you would have to have a ton\nof RAM to store all your data.\n\n590\n00:29:21,050 --> 00:29:22,450\nSo that's how Cisco routers are,\n\n591\n00:29:22,450 --> 00:29:27,440\nthey run everything from the RAM, and\nit is basically as fast as it can run.\n\n592\n00:29:27,440 --> 00:29:30,000\nBut every time you power it off,\nthe RAM gets erased.\n\n593\n00:29:30,000 --> 00:29:31,000\n>> There you go.\n>> So when you boot up,\n\n594\n00:29:31,000 --> 00:29:31,910\nit's got to start over again.\n\n595\n00:29:31,910 --> 00:29:34,430\nIt's got to extract that operating\nsystem and copy it into RAM.\n\n596\n00:29:34,430 --> 00:29:36,690\nSo that's why your boot\nprocess takes a long time.\n\n597\n00:29:36,690 --> 00:29:39,630\nIt'll take six,\nseven minutes to boot up a Cisco router.\n\n598\n00:29:39,630 --> 00:29:40,710\n>> Yeah.\n\n599\n00:29:40,710 --> 00:29:42,768\n>> Versus like Windows that\nwill boot up in under a minute.\n\n600\n00:29:42,768 --> 00:29:47,040\nBut, the trade-off is that you get some\nreally good speed in the long run.\n\n601\n00:29:48,730 --> 00:29:53,180\nAll right, so Ronnie it looks like I\nrambled on a little too long there so\n\n602\n00:29:53,180 --> 00:29:54,380\nit's about our time for break.\n\n603\n00:29:55,490 --> 00:29:56,320\nLet's go ahead and stop.\n\n604\n00:29:56,320 --> 00:29:57,910\nYou got any other points to throw out?\n\n605\n00:29:57,910 --> 00:29:59,320\n>> No, we've got more to cover.\n\n606\n00:29:59,320 --> 00:29:59,980\n>> Okay.\n>> So we will\n\n607\n00:29:59,980 --> 00:30:01,180\ntalk about it when we get back.\n\n608\n00:30:01,180 --> 00:30:03,120\nAll right, so ladies and\ngentlemen we'll stop here, stay tuned.\n\n609\n00:30:03,120 --> 00:30:06,290\nWhen we get back more Cisco\nrouting boot stuff and\n\n610\n00:30:06,290 --> 00:30:09,237\nwhat happens when we\nflip that power button.\n\n611\n00:30:09,237 --> 00:30:11,257\nAll right, stay tuned,\nwe'll be back after this.\n\n612\n00:30:11,257 --> 00:30:16,435\n[SOUND]\n\n613\n00:30:16,435 --> 00:30:18,767\n[MUSIC]\n\n614\n00:30:18,767 --> 00:30:19,384\n>> Oh, hey!\n\n615\n00:30:19,384 --> 00:30:20,520\nLook at that.\n\n616\n00:30:20,520 --> 00:30:21,960\n>> All right, welcome back everybody.\n\n617\n00:30:21,960 --> 00:30:25,330\nSo as we were talking about the boot\nprocess, and kinda what's going on, and\n\n618\n00:30:25,330 --> 00:30:28,390\nwhen we talked about how\nour bootstrap fires up,\n\n619\n00:30:28,390 --> 00:30:30,860\nhow it kicks off the power on self test.\n\n620\n00:30:30,860 --> 00:30:34,350\nAfter the power run self test, if\neverything is healthy, it starts to go for\n\n621\n00:30:34,350 --> 00:30:35,648\nthe operating system, all right?\n\n622\n00:30:35,648 --> 00:30:39,220\nAnd we're gonna talk about how it finds\nthat operating system a little bit later.\n\n623\n00:30:39,220 --> 00:30:42,050\nBut for right now,\nit just finds it on flash and\n\n624\n00:30:42,050 --> 00:30:43,350\nthen it starts to boot up, right?\n\n625\n00:30:43,350 --> 00:30:44,770\nAnd that's where we left off, and\n\n626\n00:30:44,770 --> 00:30:48,280\nI was kinda showing that on one of our\nactual routers we went through, and\n\n627\n00:30:48,280 --> 00:30:53,360\nwe saw that decompressing an image which\nwas copying that operating system.\n\n628\n00:30:53,360 --> 00:30:55,410\nThe iOS into RAM.\n\n629\n00:30:55,410 --> 00:31:01,640\nAnd then, after that it's actually ready\nto switch over to running the true iOS.\n\n630\n00:31:01,640 --> 00:31:06,130\nSo, up to this point we're\nnot really running the iOS.\n\n631\n00:31:06,130 --> 00:31:09,160\nSo it's really just now\nthat it starts off..\n\n632\n00:31:09,160 --> 00:31:15,872\nAnd so now running the actual iOS.\n\n633\n00:31:15,872 --> 00:31:20,760\nFor those of you who are Apple people,\nyou might say, wait a minute,\n\n634\n00:31:20,760 --> 00:31:25,780\nisn't Apple's operating system called\nthe iOS and how is Cisco's called that.\n\n635\n00:31:25,780 --> 00:31:28,744\nCisco has called theirs the iOS for\na long long time.\n\n636\n00:31:28,744 --> 00:31:33,451\nThe Inter-network operating system,\nand, so, when Apple decided to create\n\n637\n00:31:33,451 --> 00:31:37,960\nthe iPhone iOS, or the, iPhone OS,\nthey actually licensed it from Cisco.\n\n638\n00:31:37,960 --> 00:31:39,616\nSo, every time you buy an Apple device,\n\n639\n00:31:39,616 --> 00:31:42,362\na little bit of money is going to\nCisco just for the use of that name.\n\n640\n00:31:42,362 --> 00:31:47,923\nBuy more Apple stuff which\nyou can see between us,\n\n641\n00:31:47,923 --> 00:31:51,652\nall the Apple stuff we have huge.\n\n642\n00:31:51,652 --> 00:31:52,153\n>> Yeah.\n\n643\n00:31:52,153 --> 00:31:54,860\n>> So, once that's done now we're\nready to fire up the operating system.\n\n644\n00:31:54,860 --> 00:31:58,875\nThere are several different versions\nof the Cisco iOS you can run,\n\n645\n00:31:58,875 --> 00:32:00,605\nand they each have different features.\n\n646\n00:32:00,605 --> 00:32:03,095\nCisco calls them feature sets, all right?\n\n647\n00:32:03,095 --> 00:32:07,035\nSo, depending on which one you run,\nit may or may not have certain features.\n\n648\n00:32:07,035 --> 00:32:09,975\nAnd so it has to do a check\nto find out whether or\n\n649\n00:32:09,975 --> 00:32:13,390\nnot you've got the hardware to\nsupport the features you're loading.\n\n650\n00:32:13,390 --> 00:32:17,930\nSo what it's doing is it's listing some of\nthe hardware that we have in the router,\n\n651\n00:32:17,930 --> 00:32:19,850\nand it's trying to determine whether or\nnot.\n\n652\n00:32:19,850 --> 00:32:23,230\nWe meet the memory requirements\nto power this hardware, and\n\n653\n00:32:23,230 --> 00:32:25,860\nthat our operating\nsystem matches that too.\n\n654\n00:32:25,860 --> 00:32:29,720\nSo, I can see here's that\ncellular card that's in there.\n\n655\n00:32:29,720 --> 00:32:32,750\nWe've got a voice module on this one so\nit could do voice over IP.\n\n656\n00:32:33,800 --> 00:32:37,140\nWe've got the VPN accelerator.\n\n657\n00:32:37,140 --> 00:32:38,950\nUSB ports, we don't care about.\n\n658\n00:32:38,950 --> 00:32:40,530\nSo, it's listing each of these.\n\n659\n00:32:40,530 --> 00:32:43,740\nAnd if on any of these we\ndon't have enough memory,\n\n660\n00:32:43,740 --> 00:32:45,985\nit'll say something like\nunknown right here.\n\n661\n00:32:45,985 --> 00:32:47,430\n>> Yeah.\n>> And unknown will usually mean\n\n662\n00:32:47,430 --> 00:32:50,610\nthat we're either running a really old\nversion of the operating system, or\n\n663\n00:32:50,610 --> 00:32:52,160\nour hardware just isn't supported.\n\n664\n00:32:53,820 --> 00:32:56,895\nLet me just add that in here, we need to-\n\n665\n00:32:59,721 --> 00:33:04,334\nCheck that we have enough memory for\n\n666\n00:33:04,334 --> 00:33:08,430\nour features, all right.\n\n667\n00:33:08,430 --> 00:33:12,300\nSo, we'll just add that into our\nlist of stuff that is happening.\n\n668\n00:33:13,820 --> 00:33:16,810\nWhoops, well whatever,\nI'll clean that up later.\n\n669\n00:33:16,810 --> 00:33:22,960\nAll right, so after that's done,\nnow we get into our legal stuff.\n\n670\n00:33:22,960 --> 00:33:26,620\n>> [LAUGH]\n>> Yes, legal and copyright notices.\n\n671\n00:33:26,620 --> 00:33:29,550\nAnd so that's what we're gonna see next.\n\n672\n00:33:29,550 --> 00:33:34,832\nIf your iOS has the encrypting\nfeature set that's a part of it.\n\n673\n00:33:34,832 --> 00:33:38,570\nYou're gonna see a big\nlong legal notice here.\n\n674\n00:33:38,570 --> 00:33:41,380\nIf it doesn't have the encrypting feature\nset, it's actually a pretty short notice.\n\n675\n00:33:41,380 --> 00:33:43,180\nIt's just this little bit right here.\n\n676\n00:33:43,180 --> 00:33:45,800\nAnd we actually do have\nthe encrypting feature set on this.\n\n677\n00:33:45,800 --> 00:33:48,110\nWe'll see it a little bit later,\nall right.\n\n678\n00:33:48,110 --> 00:33:49,970\nAnd so, it's coming up right after that,\n\n679\n00:33:49,970 --> 00:33:54,630\nthat we get our first chance to see what\nactual iOS that we're going to be running.\n\n680\n00:33:54,630 --> 00:34:00,770\nSo, here's our actual iOS\nsoftware summary, all right.\n\n681\n00:34:00,770 --> 00:34:06,210\nSo this one is running iOS 12.4,\nsubrelease 22.\n\n682\n00:34:06,210 --> 00:34:10,210\nIt's running the advanced IP services,\nright?\n\n683\n00:34:10,210 --> 00:34:11,700\nLet's talk about that for a second Ronnie.\n\n684\n00:34:11,700 --> 00:34:13,620\n>> Okay.\n>> Because there's a bunch of different\n\n685\n00:34:13,620 --> 00:34:14,380\nones that are out there.\n\n686\n00:34:14,380 --> 00:34:15,970\nLet me get after all this.\n\n687\n00:34:15,970 --> 00:34:17,530\n>> Yep.\n>> Let me get way down here.\n\n688\n00:34:19,100 --> 00:34:22,130\n>> Now just like any other operating\nsystem that you might find, where there\n\n689\n00:34:22,130 --> 00:34:25,280\nare some particular operating systems\nthat have less features than others.\n\n690\n00:34:25,280 --> 00:34:26,350\nCisco did the same thing,\n\n691\n00:34:26,350 --> 00:34:29,860\nand that's because at some\npoint in terms of Cisco past.\n\n692\n00:34:29,860 --> 00:34:34,920\nThey realize that not a small company\nthat may have just ten or 15 devices\n\n693\n00:34:34,920 --> 00:34:40,390\nneeding a router and a switch, they\nneed the full enterprise IP feature set.\n\n694\n00:34:40,390 --> 00:34:43,050\nSo what they did is they started\ndividing up the operating system,\n\n695\n00:34:43,050 --> 00:34:46,200\ngiving the full base operating\nsystem that allows you to run, and\n\n696\n00:34:46,200 --> 00:34:48,220\nthen just the features that you need.\n\n697\n00:34:48,220 --> 00:34:51,460\nNow when they did that,\nthat created a lot of different\n\n698\n00:34:51,460 --> 00:34:55,808\ntypes of operating systems which\nDon's actually typing in here.\n\n699\n00:34:55,808 --> 00:34:59,110\nAnd so let's see.\n\n700\n00:34:59,110 --> 00:34:59,840\n>> All right.\n\n701\n00:34:59,840 --> 00:35:01,940\nMy screen is clipping here a little bit.\n\n702\n00:35:03,030 --> 00:35:05,110\n>> All right.\nSo, when you buy a Cisco router.\n\n703\n00:35:05,110 --> 00:35:07,620\nIf you just go and\nbuy one right off the shelf, and\n\n704\n00:35:07,620 --> 00:35:10,430\nit has no special features or whatever.\n\n705\n00:35:10,430 --> 00:35:13,550\nIt's gonna have what's called IP Base.\n\n706\n00:35:13,550 --> 00:35:14,480\nAll right.\n\n707\n00:35:14,480 --> 00:35:17,570\nThe IP Base feature set,\nis kind of what the name implies.\n\n708\n00:35:17,570 --> 00:35:22,000\nIt's the bare minimum needed to route\ntraffic from one interface to another, and\n\n709\n00:35:22,000 --> 00:35:23,550\nto handle IP traffic.\n\n710\n00:35:23,550 --> 00:35:26,480\nNow, it used to just be IPv4,\nnow it's IPv4 and IPv6.\n\n711\n00:35:26,480 --> 00:35:28,510\nIt's got that functionality.\n\n712\n00:35:28,510 --> 00:35:30,400\nIt'll have our routing protocols.\n\n713\n00:35:30,400 --> 00:35:32,370\nIt'll have access control lists.\n\n714\n00:35:32,370 --> 00:35:34,910\nIt'll have the the web GUI.\n\n715\n00:35:34,910 --> 00:35:37,550\nSo, have some of those things,\nand that's about it.\n\n716\n00:35:37,550 --> 00:35:42,420\nNo fancy features really to speak of,\nall right.\n\n717\n00:35:42,420 --> 00:35:45,690\nThe next tier up is Advanced IP Services.\n\n718\n00:35:45,690 --> 00:35:50,230\nAdvanced IP Services adds in\nadditional things like MPOS support.\n\n719\n00:35:50,230 --> 00:35:57,190\nIt'll add in things like BGP4, IPv6 which\nyou don't have in the base feature set.\n\n720\n00:35:57,190 --> 00:36:01,840\nIt'll add in other things like\nPolicy Based Routing, PBR and so on.\n\n721\n00:36:01,840 --> 00:36:04,465\nAll sorts of events functionality\nthat most people don't need.\n\n722\n00:36:04,465 --> 00:36:05,180\n>> Yeah.\n\n723\n00:36:05,180 --> 00:36:07,760\n>> So, why pay for\nsomething if you don't need it?\n\n724\n00:36:07,760 --> 00:36:10,360\nThe IP base feature set is basically free.\n\n725\n00:36:10,360 --> 00:36:14,820\nThe advanced IP services, that one you pay\nfor to get those, well advanced services.\n\n726\n00:36:16,490 --> 00:36:19,505\nNow those two are all\nfocused around TCPIP,\n\n727\n00:36:19,505 --> 00:36:21,555\nwhich is what most of us are running.\n\n728\n00:36:21,555 --> 00:36:24,575\nThe next feature set is\nthe Enterprise Services.\n\n729\n00:36:24,575 --> 00:36:28,435\nEnterprise Services adds in some\nnon TCPIP stuff, it adds in\n\n730\n00:36:28,435 --> 00:36:32,750\nIPXSPX if you're still supporting\nnetwork systems, old network systems.\n\n731\n00:36:32,750 --> 00:36:34,710\nIt adds an Apple Talk Support.\n\n732\n00:36:34,710 --> 00:36:37,965\nIt adds in DSW Plus for mainframe support.\n\n733\n00:36:37,965 --> 00:36:42,382\nAnd, we laugh about it, but\nI've used it as recently as two years ago.\n\n734\n00:36:42,382 --> 00:36:43,770\n>> [LAUGH]\n>> So, if you're still dealing with\n\n735\n00:36:43,770 --> 00:36:48,440\nmainframes, IBM Z series, and\nstuff like that you may still need DLSW.\n\n736\n00:36:48,440 --> 00:36:51,900\nAnd so, it adds support for\nthose protocols that again,\n\n737\n00:36:51,900 --> 00:36:56,430\nmost people have absolutely no need for,\nbut an enterprise might.\n\n738\n00:36:56,430 --> 00:36:57,050\nAll right.\n\n739\n00:36:57,050 --> 00:36:58,690\nAdvanced Enterprise Services.\n\n740\n00:36:58,690 --> 00:37:01,020\nAgain, we're adding in some\nadvanced functionality,\n\n741\n00:37:01,020 --> 00:37:04,060\ntypically with routing protocols,\njust like IP based to advanced IP.\n\n742\n00:37:04,060 --> 00:37:06,459\nSame thing with Enterprise\nto Advanced Enterprise.\n\n743\n00:37:07,910 --> 00:37:08,920\nService Provider.\n\n744\n00:37:08,920 --> 00:37:09,460\n>> Yeah.\n\n745\n00:37:09,460 --> 00:37:11,620\n>> The Service Provider\nfeature set is a newer one,\n\n746\n00:37:11,620 --> 00:37:13,790\nnewer like from the last five or\nseven years.\n\n747\n00:37:13,790 --> 00:37:17,080\nAnd it adds things that an internet\nservice provider would need, right?\n\n748\n00:37:17,080 --> 00:37:19,430\nThings like BGP, NPLS.\n\n749\n00:37:19,430 --> 00:37:23,070\nAnd it strips out a lot of things that\na service provider wouldn't need,\n\n750\n00:37:23,070 --> 00:37:25,050\nlike the other protocols and stuff.\n\n751\n00:37:25,050 --> 00:37:27,200\nSo, it's really focused on\ninternet service providers.\n\n752\n00:37:27,200 --> 00:37:29,380\nIt's a very streamlined iOS.\n\n753\n00:37:29,380 --> 00:37:33,620\nIt's designed to be efficient and not\ncarry any extra fluff that might result\n\n754\n00:37:33,620 --> 00:37:38,400\nin, security risks or\nconstant updates, things like that.\n\n755\n00:37:39,640 --> 00:37:42,520\nVoice Services adds in\nvoiceover IP support.\n\n756\n00:37:42,520 --> 00:37:46,550\nMost Cisco routers can be\nused as a voiceover IP PBX.\n\n757\n00:37:46,550 --> 00:37:50,490\nAnd this is the feature set that adds\nthat functionality of Voice Services.\n\n758\n00:37:50,490 --> 00:37:55,720\nAnd then lastly, all the feature\nsets listed above come in two forms.\n\n759\n00:37:55,720 --> 00:37:59,760\nOne is with the cryptography feature set,\nand one without.\n\n760\n00:38:01,200 --> 00:38:04,610\nIf you're buying your router\nin the United States, and\n\n761\n00:38:04,610 --> 00:38:09,060\nyou're United States customer, you will\ntypically get it with Crypto built in.\n\n762\n00:38:09,060 --> 00:38:10,040\nSo you can do SSH.\n\n763\n00:38:10,040 --> 00:38:12,430\nYou can do VPNs and so on.\n\n764\n00:38:12,430 --> 00:38:15,900\nBut, if you're outside of\nthe United States, one of our crazy laws,\n\n765\n00:38:15,900 --> 00:38:20,110\nsays that we can't export encryption\nlevels of a certain strength,\n\n766\n00:38:20,110 --> 00:38:22,590\nbecause our enemies\nwill use it against us.\n\n767\n00:38:22,590 --> 00:38:24,940\nWhich is gonna happen anyway,\nso it's kind of silly.\n\n768\n00:38:24,940 --> 00:38:30,960\nBut basically they ship it without crypto,\nand then you can go to Cisco's website and\n\n769\n00:38:30,960 --> 00:38:35,240\nyou can download the cryptographic\nfeature set if you have a US address.\n\n770\n00:38:35,240 --> 00:38:38,110\nOtherwise you're not supposed to have it,\nright, although it's\n\n771\n00:38:38,110 --> 00:38:41,480\na Google search away from you having it,\nso it's really pretty simple.\n\n772\n00:38:41,480 --> 00:38:45,029\n>> Now, in terms of all of these different\niOSs that we're talking about here.\n\n773\n00:38:46,340 --> 00:38:48,330\nIt's fairly easy for us to actually see,\n\n774\n00:38:48,330 --> 00:38:51,390\nwhich one our router\nactually will have on it.\n\n775\n00:38:51,390 --> 00:38:55,592\nCuz it's actually listed in the name for\nus and a lot of times if we scroll back up\n\n776\n00:38:55,592 --> 00:38:59,390\nthere, it probably won't\ngive me the right spot here.\n\n777\n00:38:59,390 --> 00:39:00,860\nWhere were here?\n\n778\n00:39:00,860 --> 00:39:05,350\nSo notice inside of the parentheses here,\nremember that most of the iOSs today,\n\n779\n00:39:05,350 --> 00:39:07,150\nespecially in the series of the 12.5,\n\n780\n00:39:07,150 --> 00:39:10,050\nwe're gonna talk about\n15 a little later on.\n\n781\n00:39:10,050 --> 00:39:14,120\nThey have to be specific, actually all\nof them have to be specific to the model\n\n782\n00:39:14,120 --> 00:39:15,970\nof the router that you're actually on.\n\n783\n00:39:15,970 --> 00:39:19,820\nSo notice the C28100, and\nthen you have NM here, but\n\n784\n00:39:19,820 --> 00:39:23,020\nnotice the name, Advanced IP Services.\n\n785\n00:39:23,020 --> 00:39:28,248\nNow for us here in America, like we\nwere saying here, K9 is what tells you,\n\n786\n00:39:28,248 --> 00:39:33,087\nyou have the cryptographies set in it,\nis where we begin to have that.\n\n787\n00:39:33,087 --> 00:39:35,176\nSo if you get one that,\nI don't have K9 on it,\n\n788\n00:39:35,176 --> 00:39:38,137\nmore than likely you're gonna\nbe missing the cryptography set.\n\n789\n00:39:38,137 --> 00:39:40,689\n>> And it's almost always K9,\nI have seen K8 a couple of times but\n\n790\n00:39:40,689 --> 00:39:43,147\nit's- It's typically canine and\nthat's that indicator,\n\n791\n00:39:43,147 --> 00:39:45,716\nthat's how you know you've got\nthe cryptography feature set.\n\n792\n00:39:45,716 --> 00:39:50,556\nAll right, so\nthat's our software summary and\n\n793\n00:39:50,556 --> 00:39:56,490\nthen after that is\nthe Cryptography Features Set Notice.\n\n794\n00:39:56,490 --> 00:40:00,760\nAnd this is the one that says,\nhey if you're not in the United States,\n\n795\n00:40:00,760 --> 00:40:02,240\nyou're not supposed to have this, right.\n\n796\n00:40:02,240 --> 00:40:04,870\nAnd so\nit goes on the list all the information so\n\n797\n00:40:04,870 --> 00:40:06,860\nthat's basically you're\ngetting after this.\n\n798\n00:40:06,860 --> 00:40:08,550\nThere is more legal notices.\n\n799\n00:40:08,550 --> 00:40:09,740\nAll right.\n\n800\n00:40:09,740 --> 00:40:11,940\nAfter that, we get our hardware summary.\n\n801\n00:40:11,940 --> 00:40:15,030\nSo, we did our power on self test,\n\n802\n00:40:15,030 --> 00:40:17,740\nthe router knows what's\nbuilt into it at this point.\n\n803\n00:40:17,740 --> 00:40:20,640\nSo after that we get our summary\nof what hardware's in there.\n\n804\n00:40:20,640 --> 00:40:22,970\nWe can see the amount of RAM we have.\n\n805\n00:40:22,970 --> 00:40:23,900\nSo right here, and\n\n806\n00:40:23,900 --> 00:40:28,070\nnotice this one the RAM stick is actually\nbeing picked up as 245 megabytes.\n\n807\n00:40:28,070 --> 00:40:30,440\n>> Yeah.\n>> The onboard is showing as 16 megabytes,\n\n808\n00:40:30,440 --> 00:40:35,450\nand combined it's getting us to our\n256 megabytes of usable memory.\n\n809\n00:40:35,450 --> 00:40:38,950\nYou can see the processor information\nhere, it's just giving me board ID.\n\n810\n00:40:38,950 --> 00:40:41,810\nI've got two gigabit interfaces,\none serial interface, so\n\n811\n00:40:41,810 --> 00:40:43,830\njust kind of summarizing all that for me.\n\n812\n00:40:43,830 --> 00:40:48,540\nAnd then down here I can see my flash,\nI've got well, it looks like 62 megs but\n\n813\n00:40:48,540 --> 00:40:53,114\nactually it being 64 megs of\nflash memory that I can write to.\n\n814\n00:40:53,114 --> 00:40:56,125\nAll right?\n\n815\n00:40:56,125 --> 00:40:57,075\nAnd then after that it's done.\n\n816\n00:40:57,075 --> 00:40:58,495\n>> Yep.\n>> Now we're booted up and\n\n817\n00:40:58,495 --> 00:41:01,775\nso you get the message that says,\npress RETURN to get started.\n\n818\n00:41:01,775 --> 00:41:03,735\nNow there is this setup message here.\n\n819\n00:41:03,735 --> 00:41:04,945\nThat's actually not part of the boot.\n\n820\n00:41:04,945 --> 00:41:06,795\n>> Right.\n>> It just appeared before so\n\n821\n00:41:06,795 --> 00:41:09,555\nit actually should be down a bit.\n\n822\n00:41:09,555 --> 00:41:12,035\nSo when we see press\nRETURN to get started,\n\n823\n00:41:12,035 --> 00:41:15,970\nthat means router is now operational,\nall right.\n\n824\n00:41:15,970 --> 00:41:18,060\nAnd you don't have to press\nreturn to get started.\n\n825\n00:41:18,060 --> 00:41:21,770\nEven if you don't,\nthe router is now ready to run and\n\n826\n00:41:21,770 --> 00:41:24,190\nso you're pretty much in business, right.\n\n827\n00:41:24,190 --> 00:41:26,650\nSo we're pretty good there.\n\n828\n00:41:26,650 --> 00:41:27,590\nAnd now we're up.\n\n829\n00:41:27,590 --> 00:41:28,440\nRight?\n\n830\n00:41:28,440 --> 00:41:32,110\nNow the logging services are running and\nwe start to get this flood of messages.\n\n831\n00:41:32,110 --> 00:41:34,820\nThe router tries to bring\nall the interfaces up and\n\n832\n00:41:34,820 --> 00:41:35,960\nthey're all unplugged over here.\n\n833\n00:41:35,960 --> 00:41:37,250\nSo they all go back down again.\n\n834\n00:41:37,250 --> 00:41:40,440\nSo you'll see a bunch of messages\nabout the lines coming up.\n\n835\n00:41:40,440 --> 00:41:43,580\nAnd then you'll see messages about\nthe lines going down again, and\n\n836\n00:41:43,580 --> 00:41:46,110\nthat's really what all that stuff is.\n\n837\n00:41:46,110 --> 00:41:49,150\nAnd then you're basically just sitting\nat a prompt, and you're ready to run.\n\n838\n00:41:50,290 --> 00:41:53,420\n>> So for us, once we actually get through\nthis, this is where we're normally either\n\n839\n00:41:53,420 --> 00:41:58,500\nprompted to either go into that start-up\nconfig, or we can actually just say no,\n\n840\n00:41:58,500 --> 00:42:01,780\nand then we get to the actual prompt\nthat we can begin configuring.\n\n841\n00:42:01,780 --> 00:42:05,490\nBut for us,\nthe boot process is the key here.\n\n842\n00:42:05,490 --> 00:42:10,170\nOn the exam, they expect you to actually\nknow this process, because a lot of times,\n\n843\n00:42:10,170 --> 00:42:11,340\nthere's certain things we can't do.\n\n844\n00:42:11,340 --> 00:42:15,020\nLike, if the process stops during ROM.\n\n845\n00:42:15,020 --> 00:42:16,860\nIn other words, right when we boot up.\n\n846\n00:42:16,860 --> 00:42:18,410\nThere's nothing I can do about it.\n\n847\n00:42:18,410 --> 00:42:21,180\nIf it stops and\nit can't find the operating system,\n\n848\n00:42:21,180 --> 00:42:22,480\nwell that's something else.\n\n849\n00:42:22,480 --> 00:42:26,710\nSo, noting the processes in\nterms of boot is very important.\n\n850\n00:42:26,710 --> 00:42:31,730\nKnowing the operating system that you're\nrunning is gonna be important for us too.\n\n851\n00:42:31,730 --> 00:42:33,080\n>> Yeah, absolutely.\n\n852\n00:42:33,080 --> 00:42:36,160\nAll right, so once we're up and\nthings are healthy, well,\n\n853\n00:42:36,160 --> 00:42:38,140\nlet's talk about what\nhappened to get here, right?\n\n854\n00:42:38,140 --> 00:42:40,760\nAnd some of the things that we\nneed to be concerned about.\n\n855\n00:42:40,760 --> 00:42:42,690\nWhen we booted up, there is that ROMMON.\n\n856\n00:42:42,690 --> 00:42:46,240\nWe could've ended up in ROMMON\nmode if things broke down.\n\n857\n00:42:46,240 --> 00:42:49,500\nIf things worked out right, though,\nwe end up right where I am now.\n\n858\n00:42:49,500 --> 00:42:52,560\nWe get our prompt and\nwe're ready to work with it.\n\n859\n00:42:52,560 --> 00:42:55,330\nOkay, so what are some other things that\ncould cause this system to break down?\n\n860\n00:42:55,330 --> 00:42:58,670\nWell, bad RAM, memory fails over time.\n\n861\n00:42:58,670 --> 00:43:02,420\nFlash, your flash can get corrupted,\nthe iOS file that's in flash could get\n\n862\n00:43:02,420 --> 00:43:06,590\ncorrupted and\nthen you end up in that ROM monitor mode.\n\n863\n00:43:06,590 --> 00:43:12,420\nWe can actually simulate that, we could\njust modify our configure register,\n\n864\n00:43:12,420 --> 00:43:17,220\nwhen your system boots up, there's\nsomething that's called a config register,\n\n865\n00:43:17,220 --> 00:43:19,010\nor a configuration register.\n\n866\n00:43:19,010 --> 00:43:21,370\nAnd it tells the router\nwhat to do when it boots.\n\n867\n00:43:21,370 --> 00:43:25,400\nNow, the configuration register can change\na little bit from router to router.\n\n868\n00:43:25,400 --> 00:43:28,360\nBut for the exam, there's really\njust two values we need to remember.\n\n869\n00:43:28,360 --> 00:43:33,710\nIf I do a show version at the end\nof the show version output right.\n\n870\n00:43:33,710 --> 00:43:37,220\nShow version is what gives us our summary\nof what we saw at boot time right?\n\n871\n00:43:37,220 --> 00:43:40,170\nWhat operating system we're running,\nour little legal disclaimers,\n\n872\n00:43:40,170 --> 00:43:40,900\nour hardware summary.\n\n873\n00:43:40,900 --> 00:43:45,810\nAnd at the very end we get this message\nright here configuration register.\n\n874\n00:43:45,810 --> 00:43:46,410\nIs 2102, okay?\n\n875\n00:43:46,410 --> 00:43:50,520\nI'm just gonna add a little section here,\n\n876\n00:43:50,520 --> 00:43:55,570\nso this is gonna be our\nmanipulating the boot process.\n\n877\n00:43:57,570 --> 00:43:58,110\nAll right.\n\n878\n00:43:58,110 --> 00:44:03,995\nSo we do a show version which will\nlet us find the config register.\n\n879\n00:44:03,995 --> 00:44:05,765\nAnd you'll probably see\nthis guy right here.\n\n880\n00:44:05,765 --> 00:44:07,545\nConfiguration register is 0x2102,\nall right.\n\n881\n00:44:07,545 --> 00:44:12,010\nThis is a hexadecimal number,\nthat's what this 0x means.\n\n882\n00:44:12,010 --> 00:44:15,420\nAnd the remaining four\ndigits will all indicate\n\n883\n00:44:15,420 --> 00:44:18,140\ncertain activities that happen at Boo,\nright.\n\n884\n00:44:18,140 --> 00:44:21,910\nThings like, look to the flash to\nfind your operating system and so on.\n\n885\n00:44:21,910 --> 00:44:25,300\nAnd these numbers can be changed\nto cause different behaviors.\n\n886\n00:44:25,300 --> 00:44:26,360\nThere's a ton of them.\n\n887\n00:44:26,360 --> 00:44:29,330\nYou can go on Google's site and they have\na whole table of the different values.\n\n888\n00:44:29,330 --> 00:44:32,370\nBut for the exam there's really\nonly two that we care about, right?\n\n889\n00:44:32,370 --> 00:44:33,010\nSo 0x2102.\n\n890\n00:44:33,010 --> 00:44:36,754\nThat says boot up normally.\n\n891\n00:44:36,754 --> 00:44:41,698\nAnd load the iOS\n\n892\n00:44:41,698 --> 00:44:45,890\nfrom flash.\n\n893\n00:44:45,890 --> 00:44:50,702\nAnd load the config from NVRAM.\n\n894\n00:44:50,702 --> 00:44:53,080\nAll right,\nwe haven't talked about NVRAM yet, so\n\n895\n00:44:53,080 --> 00:44:56,250\nI gotta add that one in\nhere in just a second.\n\n896\n00:44:56,250 --> 00:44:58,720\nThere is another one, 0x2142.\n\n897\n00:44:58,720 --> 00:45:02,830\nSee how I just changed the zero to a four?\n\n898\n00:45:02,830 --> 00:45:06,600\nThat says boot up normally.\n\n899\n00:45:08,260 --> 00:45:10,130\nAnd load the iOS from flash.\n\n900\n00:45:11,420 --> 00:45:12,350\n>> That's pretty much it.\n\n901\n00:45:12,350 --> 00:45:15,520\n>> And do not load a config.\n\n902\n00:45:15,520 --> 00:45:17,000\nAll right.\nDon't load a config at all.\n\n903\n00:45:17,000 --> 00:45:17,580\nRight.\n\n904\n00:45:17,580 --> 00:45:19,870\nWe use this one for password recovery.\n\n905\n00:45:19,870 --> 00:45:25,160\nIf I forget the password to my router,\nI can change that config register to\n\n906\n00:45:25,160 --> 00:45:30,065\n0X 2142 and that can get me into my\n\n907\n00:45:30,065 --> 00:45:34,970\nROMMON basically and we can tell\nthe system to boot up load the iOS but\n\n908\n00:45:34,970 --> 00:45:38,100\ndon't load the config file and we can\nget in and kind of recover our system.\n\n909\n00:45:39,160 --> 00:45:42,340\n>> Now when we start talking about you\nmay go well why does it get you in?\n\n910\n00:45:42,340 --> 00:45:45,350\nRemember where the password\nis stored right?\n\n911\n00:45:45,350 --> 00:45:46,980\nIs stored in the start up.\n\n912\n00:45:46,980 --> 00:45:49,410\nSo we can load up the operating\nsystem without having to load up that\n\n913\n00:45:49,410 --> 00:45:50,510\nstart up config.\n\n914\n00:45:50,510 --> 00:45:51,880\nWe're in.\n\n915\n00:45:51,880 --> 00:45:53,370\n>> Now, NVRAM.\n\n916\n00:45:53,370 --> 00:45:54,860\nNow I've mentioned a third type of memory.\n\n917\n00:45:54,860 --> 00:45:58,200\nSo we had RAM, which, just like PC,\npretty easy to understand.\n\n918\n00:45:58,200 --> 00:46:02,290\nWe have flash, which is used like our\nhard drive, what the heck is NVRAM?\n\n919\n00:46:02,290 --> 00:46:05,320\nWell, NVRAM stands for non volatile RAM.\n\n920\n00:46:05,320 --> 00:46:07,760\nAnd it's RAM like we think of.\n\n921\n00:46:07,760 --> 00:46:11,300\nBut normally when you power\noff a system ram get's erased.\n\n922\n00:46:11,300 --> 00:46:14,390\nNon volatile RAM typically has\na battery attached to it so\n\n923\n00:46:14,390 --> 00:46:17,920\neven when the system is off it\nmaintains it's data it's non volatile.\n\n924\n00:46:17,920 --> 00:46:18,570\nWell.\n\n925\n00:46:18,570 --> 00:46:21,420\nOn older Cisco routers,\nthey use this pretty heavily.\n\n926\n00:46:21,420 --> 00:46:26,480\nAnd so, you actually add a third part\nof memory and we even still see it.\n\n927\n00:46:26,480 --> 00:46:31,740\nWhen I do a show version here,\nwe can find in here, right here\n\n928\n00:46:31,740 --> 00:46:32,350\n>> There it is.\n\n929\n00:46:32,350 --> 00:46:35,270\n>> 239K of non volatile\nconfiguration memory\n\n930\n00:46:35,270 --> 00:46:38,150\n>> The only thing stored in that memory\n\n931\n00:46:38,150 --> 00:46:39,120\nis your config file.\n\n932\n00:46:39,120 --> 00:46:41,400\nSo your startup-config.\n\n933\n00:46:41,400 --> 00:46:43,750\nThat's stored right there in NVRAM.\n\n934\n00:46:43,750 --> 00:46:45,840\nSo it doesn't need to be very big.\n\n935\n00:46:45,840 --> 00:46:46,580\nHere it's 239k.\n\n936\n00:46:46,580 --> 00:46:47,900\nAll right.\n\n937\n00:46:47,900 --> 00:46:51,900\nOn older routers this is actually\na separate memory chip on the motherboard\n\n938\n00:46:51,900 --> 00:46:54,260\nand it'll have a battery attached to it.\n\n939\n00:46:54,260 --> 00:46:58,680\nOn newer routers like this one,\nit's actually not a separate chip anymore.\n\n940\n00:46:58,680 --> 00:47:01,200\nIt's actually virtual NVRAM and\n\n941\n00:47:01,200 --> 00:47:04,240\nwhat they've really done is just\ncreated another partition on flash.\n\n942\n00:47:04,240 --> 00:47:07,020\nAnd so they're really just\nusing a flash as NVRAM.\n\n943\n00:47:07,020 --> 00:47:10,020\nBut they keep that terminology for\nbackwards compatibility.\n\n944\n00:47:10,020 --> 00:47:13,390\nAnd if you've written backwards scripts\nand things like that they rely on NVRAM.\n\n945\n00:47:13,390 --> 00:47:15,220\nIt'll still function, so.\n\n946\n00:47:15,220 --> 00:47:17,690\nBut at the end of the day,\nit's actually the same.\n\n947\n00:47:17,690 --> 00:47:23,245\nAnd if I do a show file systems,\n\n948\n00:47:23,245 --> 00:47:26,675\n[SOUND] there we go.\n\n949\n00:47:26,675 --> 00:47:28,162\nAnd I look at all the file\nsystems in my router\n\n950\n00:47:28,162 --> 00:47:29,430\n>> There it is.\n\n951\n00:47:29,430 --> 00:47:31,476\n>> I'll be able to find in here,\nhere's my flash and\n\n952\n00:47:31,476 --> 00:47:33,002\nthen right after it there's NVRAM.\n\n953\n00:47:33,002 --> 00:47:36,300\nBut notice how they're the only two that\nactually have sizes attached to them.\n\n954\n00:47:36,300 --> 00:47:38,355\nCause you can't really write\nto all these other ones.\n\n955\n00:47:38,355 --> 00:47:39,979\nThey're either remote or whatever.\n\n956\n00:47:39,979 --> 00:47:44,198\nBut flash and MD RAM are listed right\nthere and they very well may be on\n\n957\n00:47:44,198 --> 00:47:49,360\nthe same chip if it's a newer router they\nabsolutely will be on the same chip.\n\n958\n00:47:49,360 --> 00:47:52,000\nIf it's an older router they\nmay be on two separate chips.\n\n959\n00:47:52,000 --> 00:47:53,660\nRight, now why do we care about that?\n\n960\n00:47:53,660 --> 00:47:57,230\nOn an older router, that battery's\nonly a three year battery and\n\n961\n00:47:57,230 --> 00:47:59,830\nso the battery will die eventually and\nyou'll reboot the router and\n\n962\n00:47:59,830 --> 00:48:02,035\nit'll lose it's config and so\nyou'll need to replace it.\n\n963\n00:48:02,035 --> 00:48:04,680\nIt's just a little watch\nbattery on the motherboard.\n\n964\n00:48:04,680 --> 00:48:07,540\nThis router,\nI don't know we could pop it open and see.\n\n965\n00:48:07,540 --> 00:48:08,930\nHow much time?\nWe have a couple of minutes.\n\n966\n00:48:08,930 --> 00:48:11,920\nI don't know if screwdriver\nsitting over here, but\n\n967\n00:48:11,920 --> 00:48:14,540\nwe could pop this router open and\ntake a look.\n\n968\n00:48:14,540 --> 00:48:16,830\nWhat do you think Ronnie\nwould that be fun?\n\n969\n00:48:16,830 --> 00:48:17,440\n>> Yeah.\n>> Let's do this.\n\n970\n00:48:17,440 --> 00:48:19,560\nRonnie you want to grab a screwdriver and\nwe'll pop this thing open and\n\n971\n00:48:19,560 --> 00:48:21,380\nwe'll take a look and I'll show you guys.\n\n972\n00:48:21,380 --> 00:48:25,182\nSeeing the inside components helps us\nto understand that boot process too.\n\n973\n00:48:25,182 --> 00:48:27,890\nI'm gonna relocate my coffee\nbecause I know if I don't,\n\n974\n00:48:27,890 --> 00:48:29,720\nI know exactly how that story ends.\n\n975\n00:48:29,720 --> 00:48:31,930\nIt ends with coffee on the router.\n\n976\n00:48:31,930 --> 00:48:35,410\nSo, we'll pop this one open and\nget a chance to kind of see that.\n\n977\n00:48:35,410 --> 00:48:36,980\nI'm gonna unplug it,\n\n978\n00:48:36,980 --> 00:48:40,390\nobviously we wanna unplug these\nthings before we take them apart.\n\n979\n00:48:40,390 --> 00:48:43,770\n>> I got a screwdriver for\neverything but an actual screwdriver.\n\n980\n00:48:45,220 --> 00:48:51,340\n>> [LAUGH] We need a Phillips head, and\nJason, on the peg board beside you,\n\n981\n00:48:51,340 --> 00:48:55,120\nthere's a big Phillips head screwdriver.\n\n982\n00:48:55,120 --> 00:48:56,980\nCould you grab that and\nchuck it over here, please?\n\n983\n00:48:56,980 --> 00:48:59,745\nWe'll reach out to our,\nwe'll put our director to actual work.\n\n984\n00:48:59,745 --> 00:49:02,610\n[LAUGH] Now he's gonna throw it at me,\n\n985\n00:49:02,610 --> 00:49:05,660\nand we get to see it live on camera\ngetting embedded in my forehead.\n\n986\n00:49:05,660 --> 00:49:07,580\nThank you.\n>> Or I'll do it the right way and\n\n987\n00:49:07,580 --> 00:49:09,442\nthe safe way, hand it off.\n\n988\n00:49:09,442 --> 00:49:10,880\n>> [LAUGH] All right,\nso on this one, Ronnie,\n\n989\n00:49:10,880 --> 00:49:12,700\nevery router is a little bit different.\n\n990\n00:49:12,700 --> 00:49:15,000\nBut on this one it looks like we got\nthree screws across the back, and\n\n991\n00:49:15,000 --> 00:49:16,270\nthat should be all that's holding it on.\n\n992\n00:49:17,270 --> 00:49:19,910\nThis router has some rack on the side, and\n\n993\n00:49:19,910 --> 00:49:23,490\nsometimes the rack will sometimes\nsecure the lid to the router.\n\n994\n00:49:23,490 --> 00:49:24,715\nI don't that is the case\non this one though.\n\n995\n00:49:24,715 --> 00:49:29,359\nSo lets just get in here and you can see\nwe put a nice little scratch on the top.\n\n996\n00:49:29,359 --> 00:49:29,986\n>> Nice.\n>> This one.\n\n997\n00:49:29,986 --> 00:49:31,042\n>> I'm sure I did that.\n\n998\n00:49:31,042 --> 00:49:32,679\n>> No, you don't.\n\n999\n00:49:32,679 --> 00:49:36,390\n>> You don't have to do any [INAUDIBLE]\n>> Sometimes I don't exercise proper\n\n1000\n00:49:36,390 --> 00:49:37,445\npractices.\n\n1001\n00:49:37,445 --> 00:49:41,996\nAll right, there's a little groove up\nhere in the front of the router which is\n\n1002\n00:49:41,996 --> 00:49:46,772\ndesigned for you to be able to push back\non and boy that one is on there, isn't it?\n\n1003\n00:49:46,772 --> 00:49:50,672\nMake sure I got all the screws out.\n\n1004\n00:49:52,472 --> 00:49:54,962\nWell, shoot, we might,\nactually you know what, Ronnie?\n\n1005\n00:49:54,962 --> 00:49:57,142\nOn this one, does it go?\n\n1006\n00:49:57,142 --> 00:49:57,852\n>> It just lifts up.\n\n1007\n00:49:57,852 --> 00:49:58,832\nThere we go.\n\n1008\n00:49:58,832 --> 00:50:00,088\n>> [LAUGH] This one just lifts up.\n\n1009\n00:50:00,088 --> 00:50:04,110\nAll right, so here I am trying to\nslide it, and it just lifts up.\n\n1010\n00:50:04,110 --> 00:50:07,052\nWhoa, holy moly,\nlook at the dust inside of this thing.\n\n1011\n00:50:07,052 --> 00:50:08,680\nAll right, I don't know if you\nguys can see that on camera, but\n\n1012\n00:50:08,680 --> 00:50:10,630\nthis one is a sandbox inside of here.\n\n1013\n00:50:10,630 --> 00:50:11,870\nWe should have cleaned that out.\n\n1014\n00:50:11,870 --> 00:50:14,690\nSo looking inside of this guy,\n\n1015\n00:50:14,690 --> 00:50:18,790\nat the insane amount of dust,\nthere's some big fans.\n\n1016\n00:50:18,790 --> 00:50:20,880\nSo I can see there's actually\nthree fans on the side,\n\n1017\n00:50:20,880 --> 00:50:23,430\nthere's like a diagonal fan down here and\n\n1018\n00:50:23,430 --> 00:50:27,040\nthose fans move a lot of air through the\nrouter, and so you do need to be careful.\n\n1019\n00:50:27,040 --> 00:50:29,390\nThey do build up dust and for\n\n1020\n00:50:29,390 --> 00:50:31,700\nthe most part if doesn't interfere\nwith the service of the router.\n\n1021\n00:50:31,700 --> 00:50:33,190\nThe router will run just fine, but\n\n1022\n00:50:33,190 --> 00:50:37,210\nit is a good idea to clean\nthem out from time to time.\n\n1023\n00:50:37,210 --> 00:50:41,030\nBut looking at the inside of this, we'll\nsee several chips and ribbon boards and\n\n1024\n00:50:41,030 --> 00:50:41,920\nall sorts of stuff.\n\n1025\n00:50:41,920 --> 00:50:44,580\nI mentioned that this one has\nthe voice module inside of it.\n\n1026\n00:50:44,580 --> 00:50:48,470\nThat's what this big thing back\nhere that's our voice module that's\n\n1027\n00:50:48,470 --> 00:50:49,620\ninserted in this one.\n\n1028\n00:50:49,620 --> 00:50:53,100\nBut looking at the motherboard itself\nyou'll see all these different chips and\n\n1029\n00:50:53,100 --> 00:50:55,205\nright up here there's two banks of memory.\n\n1030\n00:50:55,205 --> 00:50:55,935\nAll right.\n\n1031\n00:50:55,935 --> 00:50:58,515\nOne of those will be the RAM and\none of those will be the flash.\n\n1032\n00:50:58,515 --> 00:51:00,525\nTypically the smaller chips are the flash.\n\n1033\n00:51:00,525 --> 00:51:02,625\nI say typically, because Cisco,\n\n1034\n00:51:02,625 --> 00:51:06,765\nwhen they manufacture a router,\nit's not always the same between routers,\n\n1035\n00:51:06,765 --> 00:51:12,090\nbecause they release iOS files for\neach specific hardware chassis.\n\n1036\n00:51:12,090 --> 00:51:16,030\nSo it's not like the Windows world where\nyou might have an Intel processor or\n\n1037\n00:51:16,030 --> 00:51:17,680\nan AMD and they're compatible.\n\n1038\n00:51:17,680 --> 00:51:20,950\nTwo different Cisco routers\nmay have completely different,\n\n1039\n00:51:20,950 --> 00:51:23,010\ncompletely incompatible CPUs.\n\n1040\n00:51:23,010 --> 00:51:24,410\nAnd that happens very commonly.\n\n1041\n00:51:26,050 --> 00:51:29,860\nLet's take a look add some\nof these chips in here.\n\n1042\n00:51:29,860 --> 00:51:32,130\nSo kind of,\nlooking at some of the different chips.\n\n1043\n00:51:32,130 --> 00:51:36,390\nThis one actually does have\na Cisco branded CPU in it.\n\n1044\n00:51:36,390 --> 00:51:39,860\nSometimes you'll open them up, and\nthere'll be like Intel CPU's, or AMD.\n\n1045\n00:51:39,860 --> 00:51:43,270\nA lot of times you'll see Power PC,\nlike Motorola processors.\n\n1046\n00:51:43,270 --> 00:51:45,120\nYou'll see those really commonly.\n\n1047\n00:51:45,120 --> 00:51:48,150\nThis one actually has\na Cisco branded CPU in it.\n\n1048\n00:51:48,150 --> 00:51:50,860\nBut looking at some of the other hardware\nlike this memory, let's just go ahead and\n\n1049\n00:51:50,860 --> 00:51:52,580\npop some of this out.\n\n1050\n00:51:52,580 --> 00:51:58,216\nThis larger stick right here, if I look at\nit, it is not labelled with a size here.\n\n1051\n00:51:58,216 --> 00:52:00,440\n>> [LAUGH]\n>> Yeah, that's always works out.\n\n1052\n00:52:00,440 --> 00:52:02,008\nBut is looks like standard DCC RAM.\n\n1053\n00:52:02,008 --> 00:52:05,890\nThis is gonna be our RAM,\n256 megs of it in a single stick.\n\n1054\n00:52:05,890 --> 00:52:07,030\nAnd the routers are upgradable,\n\n1055\n00:52:07,030 --> 00:52:11,730\nthese are field replaceable units If you\nneed more memory in your router you can.\n\n1056\n00:52:11,730 --> 00:52:13,480\nWell you're supposed to order\nit straight from Cisco.\n\n1057\n00:52:13,480 --> 00:52:17,800\nBut a lot of times you can buy a third\nparty memory and it'll be just fine.\n\n1058\n00:52:17,800 --> 00:52:19,950\nBut if you're under a warranty,\n\n1059\n00:52:19,950 --> 00:52:24,570\nit's definitely a better idea\nto buy it right from Cisco.\n\n1060\n00:52:24,570 --> 00:52:29,560\nThese chips up here have the really\nold style what we used to use\n\n1061\n00:52:29,560 --> 00:52:32,950\nwith SIMs in our computers\nwhen we had 8 megs of memory.\n\n1062\n00:52:32,950 --> 00:52:37,590\nAnd they're kind of a pain to get\nthe little pressure switch to release.\n\n1063\n00:52:37,590 --> 00:52:38,700\nI'm gonna cut my finger open.\n\n1064\n00:52:38,700 --> 00:52:39,870\nThere we go.\n\n1065\n00:52:39,870 --> 00:52:42,960\nAnd so these are flash, and you'll see\nlike this chip looks really weird.\n\n1066\n00:52:42,960 --> 00:52:44,460\nIt's got a big notch right here and stuff.\n\n1067\n00:52:44,460 --> 00:52:47,010\nAnd it's to make sure we don't\nconfuse it with normal memory.\n\n1068\n00:52:47,010 --> 00:52:50,790\nAnd let me see if I can read\nany of this as far as the size.\n\n1069\n00:52:50,790 --> 00:52:52,100\nThis one says PVDM.\n\n1070\n00:52:52,100 --> 00:52:54,080\nOh, this is the voicemail memory.\n\n1071\n00:52:54,080 --> 00:52:54,970\nAll right.\n\n1072\n00:52:54,970 --> 00:52:57,860\n>> I think this one just\nhas the flashcard in it.\n\n1073\n00:52:57,860 --> 00:52:58,950\n>> Oh thank you Ronnie.\n\n1074\n00:52:58,950 --> 00:53:00,190\nI didn't even notice that.\n\n1075\n00:53:00,190 --> 00:53:04,090\nSo this is the voicemail memory right\nhere for that voicemail system.\n\n1076\n00:53:04,090 --> 00:53:06,370\nSo let me just snap that back in.\n\n1077\n00:53:06,370 --> 00:53:13,030\nSo this one, this router doesn't\nhave a flash chip inside of it.\n\n1078\n00:53:13,030 --> 00:53:15,720\nThis one has a compact\nflash card on the front.\n\n1079\n00:53:15,720 --> 00:53:21,320\nOn your higher end routers, they will\noftentimes have a slot just like this one.\n\n1080\n00:53:21,320 --> 00:53:23,530\nAnd let me see if I can\npop that out there.\n\n1081\n00:53:23,530 --> 00:53:26,050\nLet's set this back down.\n\n1082\n00:53:26,050 --> 00:53:28,370\nIn that slot they will have a CF card.\n\n1083\n00:53:28,370 --> 00:53:29,600\nA compact flash card.\n\n1084\n00:53:29,600 --> 00:53:33,305\nThis one has a massive\n64 megabytes of flash.\n\n1085\n00:53:33,305 --> 00:53:35,465\nThis is really too small.\n\n1086\n00:53:35,465 --> 00:53:38,965\nBut, you can go out, and again,\nif you need more room for flash,\n\n1087\n00:53:38,965 --> 00:53:41,515\nyou can buy another one of these cards.\n\n1088\n00:53:41,515 --> 00:53:44,755\nAnd it's the same thing where, you're\nsupposed to buy it straight from Cisco,\n\n1089\n00:53:44,755 --> 00:53:47,620\nand if your system's under warranty,\nit would be a good idea to.\n\n1090\n00:53:47,620 --> 00:53:51,540\nIt's gonna cost you a hundred,\ntwo hundred bucks sometimes.\n\n1091\n00:53:51,540 --> 00:53:55,050\nThey can be a little pricey but\nit's under warranty, it's supported.\n\n1092\n00:53:55,050 --> 00:53:58,850\nYou can buy third party flash in a lot\nof cases but Cisco won't support it and\n\n1093\n00:53:58,850 --> 00:54:00,520\nsome of it just doesn't get\nrecognized by the router.\n\n1094\n00:54:00,520 --> 00:54:02,140\nThey are pretty specific about it.\n\n1095\n00:54:02,140 --> 00:54:06,760\nBut yeah, so that's where our flash is.\n\n1096\n00:54:06,760 --> 00:54:10,150\nThe iOS files and stuff are being\ncopied right to this thing.\n\n1097\n00:54:11,170 --> 00:54:12,050\nAll right.\nSo that's kinda\n\n1098\n00:54:12,050 --> 00:54:14,100\nwhat we expect to see on\nthe inside of one of these guys.\n\n1099\n00:54:14,100 --> 00:54:16,600\nThey are, for the most part,\nstandard PC components.\n\n1100\n00:54:16,600 --> 00:54:21,050\nYou'll see normal RAM in them or\nserver grade RAM in a lot of cases\n\n1101\n00:54:21,050 --> 00:54:25,480\nsometimes you'll see Intel processors,\nsometimes you'll see 486's inside.\n\n1102\n00:54:25,480 --> 00:54:29,870\nYou'll open up this $30,000.00 router and\nsee a 486 CPU and go what the heck!\n\n1103\n00:54:29,870 --> 00:54:32,190\nWhy are they putting\nthis cheap junk in here.\n\n1104\n00:54:32,190 --> 00:54:36,210\nThe reason is that CPU is\nnot doing all that much.\n\n1105\n00:54:36,210 --> 00:54:40,560\nYou got hardware circuitry, you got ASIC\napplication specific integrated circuits.\n\n1106\n00:54:40,560 --> 00:54:43,800\nAll over the motherboard that\nare highly tuned to do routing and\n\n1107\n00:54:43,800 --> 00:54:46,850\nall the other features and\ndo amazing job at it.\n\n1108\n00:54:46,850 --> 00:54:50,600\nSo, since they do all that in hardware,\n\n1109\n00:54:50,600 --> 00:54:54,160\nthey don't need a CPU that's an I7 or\nanything like that.\n\n1110\n00:54:54,160 --> 00:54:57,750\n>> Now it's important for us, especially\nsince we are going to end this segment.\n\n1111\n00:54:57,750 --> 00:55:01,630\nRemember that what we went over at\nthis point was the idea of the memory\n\n1112\n00:55:01,630 --> 00:55:03,870\nof the actual router itself.\n\n1113\n00:55:03,870 --> 00:55:05,950\nSo we begin with the idea of ROM.\n\n1114\n00:55:05,950 --> 00:55:08,130\nROM, is where we store our bootstrap.\n\n1115\n00:55:08,130 --> 00:55:10,820\nIt's where we begin the entire processor,\nthe BIOS,\n\n1116\n00:55:10,820 --> 00:55:12,810\nand everything else that we have.\n\n1117\n00:55:12,810 --> 00:55:15,300\nWe also then talked\nabout the idea of flash.\n\n1118\n00:55:15,300 --> 00:55:18,950\nFlash is normally where we would\nstore the operating system itself or\n\n1119\n00:55:18,950 --> 00:55:23,770\na copy of the operating system that's\nthen gonna be at some point loading into,\n\n1120\n00:55:23,770 --> 00:55:25,870\nof course, regular RAM.\n\n1121\n00:55:25,870 --> 00:55:28,753\nRAM is just like what you and\nI would actually see on a regular PC.\n\n1122\n00:55:28,753 --> 00:55:31,379\nAnd then we have NVRAM as well, and\n\n1123\n00:55:31,379 --> 00:55:36,190\nthat's where we store a copy of\nour start up configs, as well.\n\n1124\n00:55:36,190 --> 00:55:39,859\nSo do be familiar with at least\nthose four different ones.\n\n1125\n00:55:39,859 --> 00:55:45,393\nBIOS, not BIOS, ROM, which I can't\nremember, ROM, read only memory.\n\n1126\n00:55:45,393 --> 00:55:48,465\nWe also have the idea of the flash\nwhich is equivalent to like the idea of\n\n1127\n00:55:48,465 --> 00:55:49,100\na hard drive.\n\n1128\n00:55:49,100 --> 00:55:50,860\nAnd you may be wondering, like,\n\n1129\n00:55:50,860 --> 00:55:54,600\nwhy in the world would Cisco pick flash\nrather than conventional hard drives?\n\n1130\n00:55:54,600 --> 00:55:57,050\nWell, the idea is the moving parts, right.\n\n1131\n00:55:57,050 --> 00:55:58,510\nFlash, there's no moving parts.\n\n1132\n00:55:58,510 --> 00:56:03,280\nThey tend to be a little bit more durable,\nnot a lot to have to troubleshoot there.\n\n1133\n00:56:03,280 --> 00:56:06,240\nSo they're not really using it for\nanything much here, right?\n\n1134\n00:56:06,240 --> 00:56:08,600\nRAM is where all the action is.\n\n1135\n00:56:08,600 --> 00:56:12,950\nWhere we take the copy of\nthe compressed file from flash,\n\n1136\n00:56:12,950 --> 00:56:15,110\nwe load it into RAM,\nso that we can use it.\n\n1137\n00:56:15,110 --> 00:56:18,855\nAnd then when we make configuration\nchanges, we take a copy of those\n\n1138\n00:56:18,855 --> 00:56:22,550\nconfiguration changes, and\nwe store them into that NVRAM for us.\n\n1139\n00:56:22,550 --> 00:56:24,773\nThat way,\nwhen we go through that boot process,\n\n1140\n00:56:24,773 --> 00:56:26,958\nall that RAM has to be\nworking in coordination.\n\n1141\n00:56:26,958 --> 00:56:29,716\nAnd working well for\nus to have a fully functioning router.\n\n1142\n00:56:31,445 --> 00:56:32,931\n>> All right, so let's see,\n\n1143\n00:56:32,931 --> 00:56:37,470\nthat gets us through our first couple of\nbullet points and stuff on our objectives.\n\n1144\n00:56:37,470 --> 00:56:39,020\nI'm trying to see what all is next here.\n\n1145\n00:56:39,020 --> 00:56:43,115\nSo we still haven't seen some things,\nlike we haven't seen ROM Monitor Mode.\n\n1146\n00:56:43,115 --> 00:56:44,310\nI wanna tackle that.\n\n1147\n00:56:44,310 --> 00:56:47,970\nAnd we haven't looked at how we pick which\nIOS file that we're gonna boot, and so on.\n\n1148\n00:56:47,970 --> 00:56:50,789\nSo let's do this,\nlet's stop here and take a break.\n\n1149\n00:56:50,789 --> 00:56:51,532\n>> Yep.\n\n1150\n00:56:51,532 --> 00:56:55,266\n>> And when we get back, we got a little\nbit more to look at on the boot process.\n\n1151\n00:56:55,266 --> 00:56:57,664\nAnd, boy, we haven't even\nscratched upgrading the iOS.\n\n1152\n00:56:57,664 --> 00:56:58,570\n>> Nope, not yet.\n\n1153\n00:56:58,570 --> 00:56:59,679\n>> So we got a lot more to go.\n\n1154\n00:56:59,679 --> 00:57:00,904\nI mean this might have to\nsplit into a second show.\n\n1155\n00:57:00,904 --> 00:57:01,647\n>> Yeah.\n\n1156\n00:57:01,647 --> 00:57:02,980\n>> All right, well ladies and\ngentlemen stay tuned.\n\n1157\n00:57:02,980 --> 00:57:05,900\nWhen we get back,\nmore Cisco action after this.\n\n1158\n00:57:05,900 --> 00:57:13,597\n[SOUND]\n>> Jazz hands.\n\n1159\n00:57:13,597 --> 00:57:17,257\n[LAUGH]\n>> Jazz hands, right, or sparkle fingers,\n\n1160\n00:57:17,257 --> 00:57:17,963\nwhat is it?\n\n1161\n00:57:17,963 --> 00:57:19,704\n[LAUGH] All right, welcome back everybody.\n\n1162\n00:57:19,704 --> 00:57:21,144\n>> I don't know what you've been watching.\n\n1163\n00:57:21,144 --> 00:57:25,566\n[LAUGH]\n>> You don't watch Lifetime?\n\n1164\n00:57:25,566 --> 00:57:26,217\nOxygen?\n\n1165\n00:57:26,217 --> 00:57:28,185\n>> You've been watching Bring it On.\n\n1166\n00:57:28,185 --> 00:57:29,125\n>> Bring it On?\n\n1167\n00:57:29,125 --> 00:57:29,944\n>> That's a cheerleading movie.\n\n1168\n00:57:29,944 --> 00:57:30,664\n>> Oh!\n\n1169\n00:57:30,664 --> 00:57:32,029\n>> I know that because I have a daughter.\n\n1170\n00:57:32,029 --> 00:57:33,608\n>> I was thinking Little Miss Sunshine.\n\n1171\n00:57:33,608 --> 00:57:34,791\n>> Yeah, yeah, uh-huh.\n\n1172\n00:57:34,791 --> 00:57:36,870\n>> [LAUGH] All right, yeah.\n\n1173\n00:57:36,870 --> 00:57:38,390\n>> Yeah, I forgot about that one.\n\n1174\n00:57:38,390 --> 00:57:40,140\n>> Get the dead stare from Ronnie.\n\n1175\n00:57:40,140 --> 00:57:42,340\nWell, let's get back into\nthe world of Cisco here.\n\n1176\n00:57:42,340 --> 00:57:45,560\nWe'll talk about our\nimpressionist fantasy later.\n\n1177\n00:57:45,560 --> 00:57:48,790\nSo we left off taking a look at the router\nand talking about the boot process.\n\n1178\n00:57:48,790 --> 00:57:50,140\nWe cracked one open,\n\n1179\n00:57:50,140 --> 00:57:52,720\ngot way more filthy than I intended\nto in this particular episode.\n\n1180\n00:57:52,720 --> 00:57:56,532\nBut I do wanna show you guys what happens\nwhen something goes wrong, right.\n\n1181\n00:57:56,532 --> 00:57:58,230\nCuz things do go wrong.\n\n1182\n00:57:58,230 --> 00:57:59,470\nOn this router, it's nice and easy,\n\n1183\n00:57:59,470 --> 00:58:02,610\nbecause our flash is actually\non a removable card.\n\n1184\n00:58:02,610 --> 00:58:06,620\nSo, what I wanna do, is I wanna take this\nrouter, and I'm gonna take it offline.\n\n1185\n00:58:06,620 --> 00:58:09,270\nAnd I'm gonna remove its flash card and\nwe'll boot up without flash.\n\n1186\n00:58:09,270 --> 00:58:11,680\nAnd what should happen is\nwe should fail our post.\n\n1187\n00:58:11,680 --> 00:58:14,735\nAnd we should end up dumped into that\nROM Monitor mode that Ronnie was talking\n\n1188\n00:58:14,735 --> 00:58:15,411\nabout earlier.\n\n1189\n00:58:15,411 --> 00:58:17,853\n>> Now Don before we do that,\nlet's go ahead and\n\n1190\n00:58:17,853 --> 00:58:20,113\nshow just a couple of things here, okay?\n\n1191\n00:58:20,113 --> 00:58:22,435\nOn the actual router.\n\n1192\n00:58:22,435 --> 00:58:24,004\nSo, I wanna show them the difference,\n\n1193\n00:58:24,004 --> 00:58:27,059\nlike what we normally would see versus\nwhat we're gonna see in ROMmon here.\n\n1194\n00:58:27,059 --> 00:58:27,617\n>> Okay.\n\n1195\n00:58:27,617 --> 00:58:30,529\n>> So, at the beginning,\nlet's just do just a show command, or\n\n1196\n00:58:30,529 --> 00:58:32,105\njust a question mark.\n\n1197\n00:58:32,105 --> 00:58:33,795\nAnd what we're gonna see here, right.\n\n1198\n00:58:33,795 --> 00:58:35,386\nNotice all these commands\nthat you have here.\n\n1199\n00:58:35,386 --> 00:58:37,493\nOnce we get in ROMmon,\nyou're gonna see something.\n\n1200\n00:58:37,493 --> 00:58:40,188\nYou're gonna have five or six commands.\n\n1201\n00:58:40,188 --> 00:58:42,530\n>> [LAUGH]\n>> And not only that though,\n\n1202\n00:58:42,530 --> 00:58:46,370\nnotice how Don is actually able to do this\nmore, but he also has this question mark.\n\n1203\n00:58:46,370 --> 00:58:49,986\nSo he could actually type in\nshow whatever, an interface.\n\n1204\n00:58:49,986 --> 00:58:52,670\nAnd then he can put a question mark and\nit actually fills in that.\n\n1205\n00:58:52,670 --> 00:58:54,720\nYou're gonna see in ROMmon,\nit's gonna be very limited.\n\n1206\n00:58:54,720 --> 00:58:56,720\nNow, why am I telling you this?\n\n1207\n00:58:56,720 --> 00:59:00,430\nI'm telling you this because it's not\nsomething that you're gonna actually be\n\n1208\n00:59:00,430 --> 00:59:03,738\nable to understand right away,\nin terms of how to get around in it.\n\n1209\n00:59:03,738 --> 00:59:05,611\nIt's gonna take you a few times.\n\n1210\n00:59:05,611 --> 00:59:07,468\nSo if you have the opportunity and\nchance to do this.\n\n1211\n00:59:07,468 --> 00:59:10,754\nIn other words, find a router and\nactually practice this if you can.\n\n1212\n00:59:10,754 --> 00:59:13,085\nCuz if not, you're gonna actually go okay,\nwhat's the next command.\n\n1213\n00:59:13,085 --> 00:59:15,740\nYou're gonna hit a question mark and\nyou're gonna say,\n\n1214\n00:59:15,740 --> 00:59:17,550\nI don't know what to do next.\n\n1215\n00:59:17,550 --> 00:59:20,860\nSo, from here I just want to show you\njust a few different things here.\n\n1216\n00:59:20,860 --> 00:59:25,296\n>> Yeah, the ROM Monitor,\nI mean, it is extremely limited.\n\n1217\n00:59:25,296 --> 00:59:29,122\nAnd that's because it's running from\na special chip on the motherboard itself.\n\n1218\n00:59:29,122 --> 00:59:30,406\nSo it doesn't have a lot of room to play.\n\n1219\n00:59:30,406 --> 00:59:33,524\nSo it's the bare minimum tools\nto get your system back online.\n\n1220\n00:59:33,524 --> 00:59:37,157\n>> Yeah, and Jason, right before the show,\njust asked a question if you'd take a look\n\n1221\n00:59:37,157 --> 00:59:39,520\nat my lower third that\nwas actually out there.\n\n1222\n00:59:39,520 --> 00:59:42,456\nI called it ROMmon noodles and\nhe was like, whoa what is ROMmon?\n\n1223\n00:59:42,456 --> 00:59:47,217\nAnd so when I was describing that, we kind\nof said, well it's sort of like the idea\n\n1224\n00:59:47,217 --> 00:59:50,630\nof booting into safe mode for\nyour Windows computer here.\n\n1225\n00:59:50,630 --> 00:59:54,650\nVery limited operating system,\nbut it's enough so\n\n1226\n00:59:54,650 --> 00:59:57,550\nyou can get in and do some simple repairs.\n\n1227\n00:59:57,550 --> 01:00:01,740\nNormally when we get in ROMmon,\nit's usually only two reasons why.\n\n1228\n01:00:01,740 --> 01:00:03,225\nOne is on purpose, okay.\n\n1229\n01:00:03,225 --> 01:00:04,820\n>> [LAUGH]\n>> And that means that we did it on\n\n1230\n01:00:04,820 --> 01:00:08,060\npurpose so\nthat we can do password recovery.\n\n1231\n01:00:08,060 --> 01:00:10,250\nSecondly, is not on purpose.\n\n1232\n01:00:10,250 --> 01:00:14,730\nIn other words, we turned the thing on or\nwe rebooted and it's just in ROMmon.\n\n1233\n01:00:14,730 --> 01:00:16,620\nAnd that's when it's scary, right.\n\n1234\n01:00:16,620 --> 01:00:20,630\nWhen you do it on purpose, not so scary\ncuz you know what's gonna happen next.\n\n1235\n01:00:20,630 --> 01:00:24,160\nWhen you don't, and it still goes there,\nthat's when it's scary.\n\n1236\n01:00:24,160 --> 01:00:28,140\n>> Yeah, it's been my experience that,\nif you end up in ROMmon mode, it's almost\n\n1237\n01:00:28,140 --> 01:00:31,283\na guarantee that you've got a hardware\nissue that needs to be dealt with.\n\n1238\n01:00:31,283 --> 01:00:33,720\n>> Right.\n>> It can happen if you're,\n\n1239\n01:00:33,720 --> 01:00:35,780\nmaybe you're halfway through an upgrade,\nright.\n\n1240\n01:00:35,780 --> 01:00:38,060\nMaybe you don't have a lot\nof memory on your router, so\n\n1241\n01:00:38,060 --> 01:00:40,220\nyou delete your current IOS.\n\n1242\n01:00:40,220 --> 01:00:42,740\nAnd then you're copying up a new IOS and\n\n1243\n01:00:42,740 --> 01:00:45,130\nsomething happens to fail halfway through,\nall right.\n\n1244\n01:00:45,130 --> 01:00:47,870\nYou can end up in ROMmon mode that way and\nit's not a hardware problem,\n\n1245\n01:00:47,870 --> 01:00:50,170\nyou just need to recopy the OS, right.\n\n1246\n01:00:50,170 --> 01:00:52,920\nBut any other scenario\nwhen you end up in ROMmon,\n\n1247\n01:00:52,920 --> 01:00:56,370\nit typically means that your flash got\ncorrupted or your flash is missing.\n\n1248\n01:00:56,370 --> 01:01:00,380\nThat's normally going to\nbe either failing memory or\n\n1249\n01:01:00,380 --> 01:01:04,060\nsome other kind of interference or\nsomething happening on the system\n\n1250\n01:01:04,060 --> 01:01:07,660\nthat is something that's\ngotta be corrected, right.\n\n1251\n01:01:07,660 --> 01:01:11,590\nYou gotta go out and buy new memory or\ndo a warranty call or whatever.\n\n1252\n01:01:11,590 --> 01:01:14,100\nAnd Cisco,\nif you have the right SMARTnet agreement,\n\n1253\n01:01:14,100 --> 01:01:15,420\nthey'll do advanced replacements.\n\n1254\n01:01:15,420 --> 01:01:18,200\nThey'll send you a router immediately,\nyou'll have it the next day.\n\n1255\n01:01:18,200 --> 01:01:20,030\nYou can do four-hour\nresponse time warranties,\n\n1256\n01:01:20,030 --> 01:01:21,700\nput them on really critical equipment.\n\n1257\n01:01:21,700 --> 01:01:23,970\nBut you're still gonna be\nexperiencing a download.\n\n1258\n01:01:23,970 --> 01:01:27,849\nNow, if you end up in ROMmon,\nand your flash looks fine.\n\n1259\n01:01:27,849 --> 01:01:31,298\nAnd you just recopy the IOS to it and it\nboots up fine, you might think, oh look,\n\n1260\n01:01:31,298 --> 01:01:32,820\neverything's fixed.\n\n1261\n01:01:32,820 --> 01:01:34,500\nBut you didn't actually fix the problem.\n\n1262\n01:01:34,500 --> 01:01:36,070\nIt'll probably happen again down the road.\n\n1263\n01:01:36,070 --> 01:01:38,280\nSo it's a good idea to\nget that router serviced.\n\n1264\n01:01:38,280 --> 01:01:40,800\n>> Let's talk about the idea of\ndoing this on purpose, right.\n\n1265\n01:01:40,800 --> 01:01:44,970\nWe just talked about the idea of\nchanging the configuration register.\n\n1266\n01:01:44,970 --> 01:01:49,270\nSo if we had a bad password, okay,\nwe would go into the IOS and\n\n1267\n01:01:49,270 --> 01:01:53,360\nwe would be able to change\nthe configuration register.\n\n1268\n01:01:53,360 --> 01:01:57,810\nBut Don, if I get booted up and all\nthe sudden I can't remember my password,\n\n1269\n01:01:57,810 --> 01:02:00,140\nhow am I gonna get in there to\nchange the configuration register?\n\n1270\n01:02:00,140 --> 01:02:01,030\n>> Well there's your problem right?\n\n1271\n01:02:01,030 --> 01:02:02,258\nIf you don't know\nthe password you can't do it.\n\n1272\n01:02:02,258 --> 01:02:04,470\nWell, you can for ROMmon mode.\n\n1273\n01:02:04,470 --> 01:02:07,300\nAnd so when you boot up, it was actually,\nlet me see if I can scroll back and\n\n1274\n01:02:07,300 --> 01:02:07,811\nget it here.\n\n1275\n01:02:07,811 --> 01:02:11,318\nAt the very beginning when\nthe router was first booting up,\n\n1276\n01:02:11,318 --> 01:02:16,490\nthere's a brief period of time where\nit displays a message letting us know.\n\n1277\n01:02:16,490 --> 01:02:18,170\nAnd, actually I didn't see it here.\n\n1278\n01:02:18,170 --> 01:02:19,040\n>> Yeah, I didn't.\n\n1279\n01:02:19,040 --> 01:02:21,080\n>> Well, when you get this bootstrap.\n\n1280\n01:02:21,080 --> 01:02:23,160\nAnd see this little dot right here.\n\n1281\n01:02:23,160 --> 01:02:26,430\nWhat that's actually indicating is that\nyou've got a brief moment where you can\n\n1282\n01:02:26,430 --> 01:02:30,690\nhit break on your keyboard, which is\nnormally control break or whatever.\n\n1283\n01:02:30,690 --> 01:02:32,270\nMy keyboard doesn't even have it.\n\n1284\n01:02:32,270 --> 01:02:36,530\nSo in PuTTY, there's a shortcut,\nCtrl+B or something like that.\n\n1285\n01:02:36,530 --> 01:02:40,580\nBut you can send a break command, and\nyou'll drop to ROM Monitor on purpose.\n\n1286\n01:02:40,580 --> 01:02:42,800\nAnd that's how you would do it for\npassword recovery.\n\n1287\n01:02:42,800 --> 01:02:47,180\nIn the event of a missing IOS though, it's\ngonna put you in ROMmon automatically.\n\n1288\n01:02:47,180 --> 01:02:49,159\nAnd so\nwhat I did is I powered this router off.\n\n1289\n01:02:49,159 --> 01:02:52,200\nIt's powered off, that's why we got\nthis weird sd message down here.\n\n1290\n01:02:52,200 --> 01:02:56,124\nSo it's powered off, and\nI ejected that flash card.\n\n1291\n01:02:56,124 --> 01:02:59,038\nAnd now I'm gonna power it on, all right.\n\n1292\n01:02:59,038 --> 01:03:00,207\nSo now it's gonna boot up and\n\n1293\n01:03:00,207 --> 01:03:02,700\nit's gonna go into that whole\npost thing like we saw before.\n\n1294\n01:03:02,700 --> 01:03:04,520\nSo here we go into post.\n\n1295\n01:03:04,520 --> 01:03:06,200\nAnd then what's gonna happen is,\n\n1296\n01:03:06,200 --> 01:03:11,252\nit's gonna try and\nfind the IOS and it's gonna fail.\n\n1297\n01:03:11,252 --> 01:03:14,660\nAll right, so\nhere I can see compact flash not present.\n\n1298\n01:03:14,660 --> 01:03:16,800\nIt doesn't see my flash card anymore.\n\n1299\n01:03:16,800 --> 01:03:20,970\nIt does show 256 megs of RAM just\nlike before, it seems happy.\n\n1300\n01:03:20,970 --> 01:03:25,824\nAnd then right here it drops and\nactually goes into ROMmon, and\n\n1301\n01:03:25,824 --> 01:03:29,588\nnow I'm in that ROM Monitor prompt,\nall right.\n\n1302\n01:03:29,588 --> 01:03:31,939\n>> Yeah, on the ROM Monitor prompt here,\n\n1303\n01:03:31,939 --> 01:03:36,297\nthis is where we have a chance if we\nknow the actual syntax that's there.\n\n1304\n01:03:36,297 --> 01:03:38,965\nThat we can begin to recover,\nif there is something that we've done,\n\n1305\n01:03:38,965 --> 01:03:40,201\nagain like password recovery.\n\n1306\n01:03:40,201 --> 01:03:42,366\nUsually, that's the only way\nwhy we would go in on purpose.\n\n1307\n01:03:42,366 --> 01:03:44,601\n>> Now the prompt is\npretty recognizable right?\n\n1308\n01:03:44,601 --> 01:03:45,959\nFirst off, it says ROMMON.\n\n1309\n01:03:45,959 --> 01:03:48,756\nSo that's your first indicator that\nwe're in the ROM monitor mode.\n\n1310\n01:03:48,756 --> 01:03:52,321\nThe second thing is you get a number\nthat's how many commands you've\n\n1311\n01:03:52,321 --> 01:03:55,050\nissued since you've been\nin ROM monitor mode.\n\n1312\n01:03:55,050 --> 01:03:57,540\nSo whatever I type now is\ngonna be my first command.\n\n1313\n01:03:57,540 --> 01:04:00,060\nAnd then, from there it'll show two and\nthree and four.\n\n1314\n01:04:00,060 --> 01:04:01,450\nI'll just do a question mark.\n\n1315\n01:04:01,450 --> 01:04:02,140\nAll right.\n\n1316\n01:04:02,140 --> 01:04:04,980\nWhen I do a question mark, I can see\nthe commands that are available, and\n\n1317\n01:04:04,980 --> 01:04:07,830\nnotice how they fit on one screen, right.\n\n1318\n01:04:07,830 --> 01:04:08,850\nThere's no more prompt.\n\n1319\n01:04:08,850 --> 01:04:09,950\nIt's all right there.\n\n1320\n01:04:09,950 --> 01:04:12,610\nThere's only 22 commands or\nsomething like that.\n\n1321\n01:04:12,610 --> 01:04:16,010\nSo there's only a handful of\ncommands that are available to me.\n\n1322\n01:04:16,010 --> 01:04:20,290\nAnd they're all commands built around\nthe idea of recovering my router\n\n1323\n01:04:20,290 --> 01:04:21,100\nto functional.\n\n1324\n01:04:21,100 --> 01:04:21,930\nAll right.\n\n1325\n01:04:21,930 --> 01:04:26,140\nSo we've got things like resetting\nthe system to try and boot again.\n\n1326\n01:04:26,140 --> 01:04:28,280\nWe can set some various values.\n\n1327\n01:04:28,280 --> 01:04:30,291\nWe can do a TFTP downlaod.\n\n1328\n01:04:30,291 --> 01:04:31,173\n>> Oh yeah.\n\n1329\n01:04:31,173 --> 01:04:34,460\n>> And that's if your iOS\nfile has become corrupted,\n\n1330\n01:04:34,460 --> 01:04:38,550\nyou can reach out across the network and\ndownload a new iOS.\n\n1331\n01:04:38,550 --> 01:04:43,540\nAnd if I run that,\nit's gonna tell me how it works.\n\n1332\n01:04:43,540 --> 01:04:49,500\nI have to set a bunch of different systems\nvariables to tell it what the IP address,\n\n1333\n01:04:49,500 --> 01:04:53,720\nthe TFTP server is, what the summit mask,\nor what IP address I'm going to use, and\n\n1334\n01:04:53,720 --> 01:04:58,440\nwhat summit mask, default giveaway here's\nthe IP address to the TFTP server, and\n\n1335\n01:04:58,440 --> 01:05:01,060\nthe TFTP file name that we're gonna get.\n\n1336\n01:05:01,060 --> 01:05:05,190\nAnd once it has all that information,\nit can then do the TFTP download and\n\n1337\n01:05:05,190 --> 01:05:09,040\nreach out there, so\nI could say like, let's see.\n\n1338\n01:05:09,040 --> 01:05:14,120\nWe have to say set IP_ADDRESS=,\n\n1339\n01:05:14,120 --> 01:05:19,260\nlike that, and oh,\napparently I did it wrong.\n\n1340\n01:05:19,260 --> 01:05:23,980\n>> It's not as,\nit's just the actual word itself.\n\n1341\n01:05:23,980 --> 01:05:25,140\nI don't think you used that.\n\n1342\n01:05:27,010 --> 01:05:27,920\n>> Oh, is it?\n\n1343\n01:05:27,920 --> 01:05:28,420\nAm I doing it?\n\n1344\n01:05:31,910 --> 01:05:32,410\n>> Yeah.\n\n1345\n01:05:34,980 --> 01:05:35,570\n>> It is indeed.\n\n1346\n01:05:35,570 --> 01:05:36,260\nAll right.\n\n1347\n01:05:36,260 --> 01:05:39,400\nSo the set command is showing me\nall the variables that I've set and\n\n1348\n01:05:39,400 --> 01:05:43,750\nhere I can see I've now set\nmy address to be 10.1.230.15.\n\n1349\n01:05:43,750 --> 01:05:45,656\nAnd I can say, what was the other one?\n\n1350\n01:05:45,656 --> 01:05:48,292\nIP_SUBNET which is.\n\n1351\n01:05:51,015 --> 01:05:54,570\nAnd as I go through, I'm gonna see that\nI need to set more and more of these.\n\n1352\n01:05:54,570 --> 01:05:55,570\nAnd oh, I did it wrong.\n\n1353\n01:05:55,570 --> 01:05:59,510\nIt needs to be IP_SUBNET_MASK,\nI'm all about making mistakes on this one.\n\n1354\n01:06:01,790 --> 01:06:05,460\n>> The funny thing is,\nDon talks about making the ideal mistakes.\n\n1355\n01:06:05,460 --> 01:06:08,710\nThis is normally where we would\ndepend on the questions mark.\n\n1356\n01:06:08,710 --> 01:06:10,050\nThat's not gonna help you here.\n\n1357\n01:06:10,050 --> 01:06:12,740\nThe question mark is actually\ngonna be no help at all.\n\n1358\n01:06:12,740 --> 01:06:17,960\nNotice Don is also typing in\nthese exactly as it appears.\n\n1359\n01:06:17,960 --> 01:06:20,870\nThe reason why I want to emphasize\nthat as you actually take a look at\n\n1360\n01:06:20,870 --> 01:06:21,960\ndoing this here.\n\n1361\n01:06:21,960 --> 01:06:25,420\nIf you do this in lowercase letters,\nit will set it, but\n\n1362\n01:06:25,420 --> 01:06:27,780\nit's not gonna work the way\nthat you want it to.\n\n1363\n01:06:27,780 --> 01:06:29,380\nSo you've got to actually\nbe careful here and\n\n1364\n01:06:29,380 --> 01:06:32,980\nmake sure that you didn't actually\ntype it incorrectly if you do this.\n\n1365\n01:06:32,980 --> 01:06:36,930\n>> There we go.\nAll right, so now if I look I've got my IP\n\n1366\n01:06:36,930 --> 01:06:43,240\naddress of 10.1.230.15 my sub-net mask\nof 2552552550, my default gateway,\n\n1367\n01:06:43,240 --> 01:06:47,600\nwhich you don't really need if the TFTP\nserver's on the same network as you.\n\n1368\n01:06:47,600 --> 01:06:51,140\nIf it's on a different network,\nyou do need it, my TFTP server and\n\n1369\n01:06:51,140 --> 01:06:54,260\nthe name of the iOS file that I'm\ngonna be downloading from it.\n\n1370\n01:06:54,260 --> 01:06:58,620\nOnce I have all of those set,\nI can run TFTP download, and\n\n1371\n01:06:58,620 --> 01:07:01,750\nit'll reach out to that server and\nit'll try and download it.\n\n1372\n01:07:01,750 --> 01:07:05,590\nNow, I picked a fake IP and so-on.\n\n1373\n01:07:05,590 --> 01:07:07,700\nSo if I try and do it,\nit's not gonna work.\n\n1374\n01:07:07,700 --> 01:07:10,420\nIt's gonna reach out and try and\ngrab this file, and it's gonna try and\n\n1375\n01:07:10,420 --> 01:07:14,330\ndownload it to Flash, which,\nthe Flash isn't there.\n\n1376\n01:07:14,330 --> 01:07:15,450\nHere we go.\n\n1377\n01:07:15,450 --> 01:07:17,820\nError, insufficient Flash\ninstalled to load image.\n\n1378\n01:07:17,820 --> 01:07:22,310\nThere's nowhere for it to load to, so it's\ngonna be pretty ticked off about that.\n\n1379\n01:07:22,310 --> 01:07:27,740\n>> Now, the other thing that we wanna show\nis, since Don didn't mention it before,\n\n1380\n01:07:27,740 --> 01:07:31,430\nwhich is the idea of changing\nthe configuration register, right?\n\n1381\n01:07:31,430 --> 01:07:34,537\nSo in the change of\nthe configuration register,\n\n1382\n01:07:34,537 --> 01:07:37,945\nit's a simple command up there,\nwhich is the third or\n\n1383\n01:07:37,945 --> 01:07:42,668\nfourth command that we actually have,\nand it says, CONFREG, Confreg.\n\n1384\n01:07:42,668 --> 01:07:45,540\n>> Confreg.\n>> Confreg is what we have.\n\n1385\n01:07:45,540 --> 01:07:48,770\n>> And I just ran it here and it's showing\nme that right now my configuration\n\n1386\n01:07:48,770 --> 01:07:50,970\nregister is zero x two one zero two.\n\n1387\n01:07:50,970 --> 01:07:55,110\nSo when the system boots up it's\ngonna find the iOS on the Flash and\n\n1388\n01:07:55,110 --> 01:07:58,040\nthen it's gonna pull the config\nfrom NVRAM and load it.\n\n1389\n01:07:58,040 --> 01:08:03,320\nif I change it, like changing it to two\none four two, that would say boot up,\n\n1390\n01:08:03,320 --> 01:08:08,110\nload the iOS from flash, but\ndon't load the config file.\n\n1391\n01:08:08,110 --> 01:08:09,140\nBoot up without a configuration.\n\n1392\n01:08:10,310 --> 01:08:12,856\n>> And when you do type this in,\nyou wanna make sure you do it the same,\n\n1393\n01:08:12,856 --> 01:08:14,004\nthe hexadecimal entry here.\n\n1394\n01:08:14,004 --> 01:08:17,336\n0X2142 if you were to change it.\n\n1395\n01:08:17,336 --> 01:08:18,729\n>> All right.\n\n1396\n01:08:18,729 --> 01:08:20,831\nWe could actually do that.\n\n1397\n01:08:20,831 --> 01:08:21,585\nIt could be fun.\n\n1398\n01:08:21,585 --> 01:08:25,740\n0x2142, so I'll just set that.\n\n1399\n01:08:25,740 --> 01:08:31,390\nAnd if I run the confrag command again,\nit shows now my virtual register's 2142.\n\n1400\n01:08:31,390 --> 01:08:34,990\nBut it told me it's not gonna\ntake effect until I reboot.\n\n1401\n01:08:34,990 --> 01:08:37,740\nI'm gonna pop that flash\ncard back in real quick.\n\n1402\n01:08:39,410 --> 01:08:41,090\nIf I can find it without looking.\n\n1403\n01:08:41,090 --> 01:08:42,540\nThere we go.\n\n1404\n01:08:42,540 --> 01:08:47,430\nAnd so once I've got it in there,\nI'm now gonna run reset, and\n\n1405\n01:08:47,430 --> 01:08:49,300\nthe reset command basically\nreboots the router.\n\n1406\n01:08:49,300 --> 01:08:51,060\nSo here it goes, rebooting.\n\n1407\n01:08:51,060 --> 01:08:54,260\nAnd this time when it reboots,\nit should be able to find the Flash.\n\n1408\n01:08:54,260 --> 01:08:57,790\nExcept now, it's going to have that\nconfiguration register change, so\n\n1409\n01:08:57,790 --> 01:08:59,486\nit won't load the configuration.\n\n1410\n01:08:59,486 --> 01:09:04,480\nAnd actually, I don't know if I need to\n\n1411\n01:09:04,480 --> 01:09:06,910\nactually physically power it off or\nnot for that register to take effect.\n\n1412\n01:09:06,910 --> 01:09:08,110\nWe'll see.\nThis is a soft reboot,\n\n1413\n01:09:08,110 --> 01:09:09,010\nversus a hard reboot.\n\n1414\n01:09:10,120 --> 01:09:11,610\nSo\n>> Usually the reset's enough,\n\n1415\n01:09:11,610 --> 01:09:12,455\nbut we never know.\n\n1416\n01:09:12,455 --> 01:09:15,150\n[LAUGH]\n>> Yeah\n\n1417\n01:09:15,150 --> 01:09:16,400\n>> That is a good point that\n\n1418\n01:09:16,400 --> 01:09:18,360\nCisco changes things\n>> Yeah.\n\n1419\n01:09:18,360 --> 01:09:19,690\n>> From router to router.\n\n1420\n01:09:19,690 --> 01:09:22,920\nSo, while some things are consistent,\nsome things like the show command,\n\n1421\n01:09:22,920 --> 01:09:26,320\nthat's gonna be on every router, other\nones like the configuration registers,\n\n1422\n01:09:26,320 --> 01:09:30,640\nit can actually change so\nif you have like 2500 series drivers.\n\n1423\n01:09:30,640 --> 01:09:31,390\nReally old ones.\n\n1424\n01:09:31,390 --> 01:09:35,450\nThey have completely different\nconfiguration registers, and\n\n1425\n01:09:35,450 --> 01:09:38,020\nthen your 26 27 28 and\n2900's all pretty much have the same.\n\n1426\n01:09:38,020 --> 01:09:41,110\nBut then your Cisco switches which\ndon't even have config registers.\n\n1427\n01:09:41,110 --> 01:09:43,600\nThey runt he iOS but\nthey don't even have config registers.\n\n1428\n01:09:43,600 --> 01:09:44,150\nSo..\n\n1429\n01:09:44,150 --> 01:09:46,810\nThings are different between\nthe different chassis, so\n\n1430\n01:09:46,810 --> 01:09:50,090\nyou may need to pull up the documentation\nfor your hardware to find the right one.\n\n1431\n01:09:50,090 --> 01:09:53,030\nOn a positive side, that means that kind\nof question won't normally show up on\n\n1432\n01:09:53,030 --> 01:09:56,930\nthe exam, but on the negative side, it is\nsomething we need to know in real life.\n\n1433\n01:09:56,930 --> 01:09:58,910\nAll right, so here it goes booting, so\n\n1434\n01:09:58,910 --> 01:10:02,070\nit should be hunting down\nthat iOS file right now.\n\n1435\n01:10:02,070 --> 01:10:06,180\nAnd so we should start to see\nthat decompression of the iOS.\n\n1436\n01:10:06,180 --> 01:10:08,590\nAssuming that I don't\nneed to do a hard reset.\n\n1437\n01:10:08,590 --> 01:10:09,170\n>> That's true.\n[LAUGH]\n\n1438\n01:10:09,170 --> 01:10:11,000\n>> If I have to do a hard reset,\n\n1439\n01:10:11,000 --> 01:10:13,660\nthen here in a second we're going\nto see a company flash error, and\n\n1440\n01:10:13,660 --> 01:10:16,770\nthen I'll just do a hard power off and\npower on.\n\n1441\n01:10:16,770 --> 01:10:17,940\nNow we get to wait impatiently.\n\n1442\n01:10:17,940 --> 01:10:18,990\n>> Yeah.\n\n1443\n01:10:18,990 --> 01:10:20,800\nThere it goes, it's starting to boot.\n\n1444\n01:10:20,800 --> 01:10:22,980\n>> There it goes, so it found the Flash.\n\n1445\n01:10:22,980 --> 01:10:25,300\nAll right, so it's gonna decompress.\n\n1446\n01:10:25,300 --> 01:10:28,300\nNow on higher end routers, this is a 2821,\n\n1447\n01:10:28,300 --> 01:10:33,210\nit's got a higher end processor in it and\nso it's gonna do this pretty quickly.\n\n1448\n01:10:33,210 --> 01:10:36,765\nOn a lower end router,\nif this was a 2801 or a 2901.\n\n1449\n01:10:36,765 --> 01:10:40,365\nThose guys have lower end processors and\nso it takes a lot longer for\n\n1450\n01:10:40,365 --> 01:10:42,685\nthem to decompress this iOS image.\n\n1451\n01:10:42,685 --> 01:10:46,125\nBoot times vary between hardware\nbased on that internal CPU.\n\n1452\n01:10:48,015 --> 01:10:50,365\n>> In terms of the configuration rate,\n\n1453\n01:10:50,365 --> 01:10:53,325\ndo remember the two that\nwe just talked about.\n\n1454\n01:10:53,325 --> 01:10:55,745\nVery important,\nespecially when facing the exam.\n\n1455\n01:10:55,745 --> 01:11:00,320\nKnow which one will bring you up\nwithout loading the start-up config,\n\n1456\n01:11:00,320 --> 01:11:02,680\nnow which one actually\nbrings up with loading it.\n\n1457\n01:11:02,680 --> 01:11:04,800\nIt's gonna be very important\nin password recovery.\n\n1458\n01:11:04,800 --> 01:11:08,139\nI guess that's something we actually\ncould do a demo of at some point here.\n\n1459\n01:11:08,139 --> 01:11:09,125\n>> Yeah.\n>> So that when you\n\n1460\n01:11:09,125 --> 01:11:13,160\nfinish doing everything,\nyou've got to remember to reset that,\n\n1461\n01:11:13,160 --> 01:11:15,404\nconfiguration register at the end.\n\n1462\n01:11:15,404 --> 01:11:18,156\n>> Two,one, zero,\ntwo is normal operating mode.\n\n1463\n01:11:18,156 --> 01:11:21,995\nAnd then, two, one, four,\ntwo is really password recovery.\n\n1464\n01:11:21,995 --> 01:11:23,785\nAll right.\nWell, it is taking its time.\n\n1465\n01:11:23,785 --> 01:11:24,635\nI booted it earlier and\n\n1466\n01:11:24,635 --> 01:11:27,205\nwe did it in the background when we\nwere talking about other things.\n\n1467\n01:11:27,205 --> 01:11:29,000\n>> Yeah.\n>> But at this point it will come up, and\n\n1468\n01:11:29,000 --> 01:11:31,400\nit'll be healthy,\nalthough our register is set to 2142,\n\n1469\n01:11:31,400 --> 01:11:34,160\nso it's basically gonna go\ninto password recovery.\n\n1470\n01:11:34,160 --> 01:11:38,050\nBut that kind of gives you guys an idea\non how that Flash works, how the ROM\n\n1471\n01:11:38,050 --> 01:11:42,900\nmonitor works to help us to be able to\nrecopy down an iOS if it was corrupted, or\n\n1472\n01:11:42,900 --> 01:11:44,920\nyou failed upgrade, or whatever.\n\n1473\n01:11:44,920 --> 01:11:48,080\nAnd we'll show you guys upgrading the iOS,\nwait, I think we're out of time for\n\n1474\n01:11:48,080 --> 01:11:48,840\nthis episode.\n\n1475\n01:11:48,840 --> 01:11:50,650\n>> Yeah.\n>> But we'll do it in our next episode.\n\n1476\n01:11:50,650 --> 01:11:54,030\nFor those of you that are super\nexcited about the Cisco stuff,\n\n1477\n01:11:54,030 --> 01:11:55,860\nwe've got another Cisco\nepisode this afternoon.\n\n1478\n01:11:55,860 --> 01:11:58,600\nWe're doing a double\nheader of Cisco today.\n\n1479\n01:11:58,600 --> 01:12:01,220\nSo, we'll have more of that after lunch.\n\n1480\n01:12:01,220 --> 01:12:02,509\nBut, for the rest of you guys,\n\n1481\n01:12:02,509 --> 01:12:05,097\nI think that's probably a pretty\ngood stopping point for us.\n\n1482\n01:12:05,097 --> 01:12:06,390\nRon, what do you think?\n\n1483\n01:12:06,390 --> 01:12:07,432\n>> Yeah.\nThink so.\n\n1484\n01:12:08,580 --> 01:12:10,020\n>> All right, well, ladies and gentlemen.\n\n1485\n01:12:10,020 --> 01:12:14,040\nKeep in mind as always, if you ever\nhave any questions live during the show.\n\n1486\n01:12:14,040 --> 01:12:16,700\nYou can go to itpro.tv/live.\n\n1487\n01:12:16,700 --> 01:12:18,410\nRight beneath the video,\nthere's our chat room.\n\n1488\n01:12:18,410 --> 01:12:19,360\nYou can post your questions.\n\n1489\n01:12:19,360 --> 01:12:21,210\nWe monitor and answer it during the show.\n\n1490\n01:12:21,210 --> 01:12:22,180\nWe do our best.\n\n1491\n01:12:22,180 --> 01:12:23,840\n>> Yeah. [LAUGH] >> To answer\nyour questions on the spot.\n\n1492\n01:12:23,840 --> 01:12:28,430\nIf you have questions after the show,\nat the top of every page on ITPro.tv,\n\n1493\n01:12:28,430 --> 01:12:30,790\nyou'll see a link up there that says Q and\nA.\n\n1494\n01:12:30,790 --> 01:12:33,280\nYou can post your questions and\nwe answer them.\n\n1495\n01:12:33,280 --> 01:12:35,860\nThere's some really good stuff\nto be found in there with\n\n1496\n01:12:35,860 --> 01:12:38,110\nyour own questions as well as with\nthe other viewers' questions.\n\n1497\n01:12:38,110 --> 01:12:39,230\nThere's some really good ones.\n\n1498\n01:12:39,230 --> 01:12:42,220\nWe've got a really cool conversation\ngoing on about fiber optic speeds and\n\n1499\n01:12:42,220 --> 01:12:45,080\nstuff right now, which is not something\nthat comes up in the show but\n\n1500\n01:12:45,080 --> 01:12:46,600\ngood knowledge to have.\n\n1501\n01:12:46,600 --> 01:12:49,560\n>> And we'll actually have the show\nnotes that Don has been making\n\n1502\n01:12:49,560 --> 01:12:53,890\nthroughout the class posted up there\ntoo after the, posting of the show.\n\n1503\n01:12:53,890 --> 01:12:54,950\n>> Yep, as long as I remember to do it.\n\n1504\n01:12:54,950 --> 01:12:55,490\n>> That's right.\n\n1505\n01:12:55,490 --> 01:12:58,550\n>> And if I don't remember to do it,\nthen make sure you post a sports ticket or\n\n1506\n01:12:58,550 --> 01:13:01,490\nwhatever, and say Don quit being\na slacker, get those posted.\n\n1507\n01:13:01,490 --> 01:13:02,780\nHow hard is your job really?\n\n1508\n01:13:02,780 --> 01:13:05,880\nSo, [LAUGH] all right well ladies and\ngentlemen.\n\n1509\n01:13:05,880 --> 01:13:08,430\nI hope you enjoyed the show, as always,\n\n1510\n01:13:08,430 --> 01:13:11,775\nI'm your host Don Pezet, and-\n>> I'm Ronnie Wong.\n\n1511\n01:13:11,775 --> 01:13:13,689\n>> [LAUGH] And\nwe'll see you next time around.\n\n1512\n01:13:13,689 --> 01:13:23,689\n[MUSIC]\n\n1513\n01:13:25,049 --> 01:13:31,330\n[SOUND]\n\n",
          "vimeoId": "80301256"
        },
        {
          "description": "In this episode Ronnie and Don take a look at the recovery and upgrade process for Cisco routers and switches. They also take a look at the new licensing model introduced in IOS 15.",
          "length": "4990",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/004-Router-Management-Pt-2.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/004-Router-Management-Pt-2-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/004-Router-Management-Pt-2-sm.jpg",
          "title": "Router Management Part 2",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:15,143 --> 00:00:22,441\n[SOUND]\n\n3\n00:00:22,441 --> 00:00:32,838\n[MUSIC]\n\n4\n00:00:32,838 --> 00:00:36,127\nAll right, good morning, good afternoon,\ngood evening, and welcome back to another\n\n5\n00:00:36,127 --> 00:00:39,121\nepisode of ITProTV, I'm your host\nDon Pezet today with with Mr. Ronnie Wong.\n\n6\n00:00:39,121 --> 00:00:40,133\nHow's it going, Ronnie?\n\n7\n00:00:40,133 --> 00:00:40,899\n>> I'm doing well.\n\n8\n00:00:40,899 --> 00:00:44,802\nI'm doing better than any loser\non the AMA awards last night.\n\n9\n00:00:44,802 --> 00:00:46,300\n>> [LAUGH] The AMAs.\n\n10\n00:00:46,300 --> 00:00:48,534\nThe American Medical Association\nhad an awards show last night?\n\n11\n00:00:48,534 --> 00:00:49,079\n>> Yes.\n\n12\n00:00:49,079 --> 00:00:51,460\nYes, they did.\n\n13\n00:00:51,460 --> 00:00:53,410\n>> It shows how much I know about.\n\n14\n00:00:53,410 --> 00:00:57,170\nMusic I am assuming it’s music, right?\n\n15\n00:00:57,170 --> 00:01:00,310\n>> Yes [LAUGH]\n>> The MMA plastic surgeon awards best\n\n16\n00:01:00,310 --> 00:01:02,760\nrhinoplasty goes to [LAUGH], all right.\n\n17\n00:01:02,760 --> 00:01:06,370\n>> [LAUGH]\n>> That’s funny.\n\n18\n00:01:06,370 --> 00:01:09,850\nNow I'm completely losing\nmy train of thought.\n\n19\n00:01:09,850 --> 00:01:12,380\nSo we are back again for\nanother Cisco show.\n\n20\n00:01:12,380 --> 00:01:15,400\nWe are gonna pick up where we\nleft off on the last episode.\n\n21\n00:01:15,400 --> 00:01:18,490\nWe set off on a journey last time for\n\n22\n00:01:18,490 --> 00:01:22,120\nwhat I thought was gonna be one\nepisode on managing our Cisco routers.\n\n23\n00:01:22,120 --> 00:01:26,315\nBut we really kind of had some fun with\nit and now it's turning into a two part.\n\n24\n00:01:26,315 --> 00:01:27,061\nOpus?\n\n25\n00:01:27,061 --> 00:01:29,140\n>> Yes, I like them.\n\n26\n00:01:29,140 --> 00:01:34,560\n>> It's our life work, and so now we're\ngonna pick back up on that and continue on\n\n27\n00:01:34,560 --> 00:01:38,740\nin the last episode we got a chance to see\nthings like you know what the boot process\n\n28\n00:01:38,740 --> 00:01:43,740\nis like and the RAm monitor mode for when\nthings go wrong, and stuff we're going\n\n29\n00:01:43,740 --> 00:01:48,910\nto start today with how we can back up our\nrouters how we can back the configuration\n\n30\n00:01:48,910 --> 00:01:53,820\nfiles up and back up our ROS's, and\nhow we can do upgrades to move to a newer\n\n31\n00:01:53,820 --> 00:01:57,650\none as well as restore the configs in the\nevent we have to replace an entire router.\n\n32\n00:01:57,650 --> 00:01:58,670\n>> Right.\n\n33\n00:01:58,670 --> 00:02:02,210\nYeah for us this is very important because\nit now takes the knowledge that we just\n\n34\n00:02:02,210 --> 00:02:05,435\nlearned in the previous episode and\nnow we're gonna\n\n35\n00:02:05,435 --> 00:02:09,075\nactually see how we really put this\nall together, and how it functions.\n\n36\n00:02:09,075 --> 00:02:12,225\nAnd as a CCNA technician,\nthis is one thing we have to\n\n37\n00:02:12,225 --> 00:02:15,675\nbe able to at least understand and\nthen walk through it a couple times.\n\n38\n00:02:15,675 --> 00:02:18,714\nAnd hopefully by that point we'll\nfeel pretty confident in doing it.\n\n39\n00:02:18,714 --> 00:02:23,430\n>> Yes, all right now, if and we'll\njust start off with the whole idea of\n\n40\n00:02:23,430 --> 00:02:27,560\nbacking up, okay, if you want to back up\nyour Cisco router there's a couple of\n\n41\n00:02:27,560 --> 00:02:31,740\ndifferent way you can do it, on this\nrouter that we have it's got a removable\n\n42\n00:02:31,740 --> 00:02:34,820\ncompact flash card and\nin theory you can use that for back up but\n\n43\n00:02:34,820 --> 00:02:38,680\nit really doesn't work all that well,\nso, what you're normally going to want\n\n44\n00:02:38,680 --> 00:02:43,100\nis a server on your network\nthat you can backup too, right?\n\n45\n00:02:43,100 --> 00:02:47,420\nAnd the most commonly we\nsee TFTP servers used.\n\n46\n00:02:47,420 --> 00:02:52,330\nAnd TFTP, if you're not familiar with it,\nthat's the Trivial File Transfer Protocol.\n\n47\n00:02:52,330 --> 00:02:57,160\nIt is a very, very,\nvery basic file transfer utility.\n\n48\n00:02:57,160 --> 00:02:59,510\nIt doesn't support passwords.\n\n49\n00:02:59,510 --> 00:03:03,390\nUsernames, doesn't support subfolders,\nit's just a raw\n\n50\n00:03:03,390 --> 00:03:08,500\nfolder people can send data to and get\ndata back, it is not secure in any way.\n\n51\n00:03:08,500 --> 00:03:11,370\n>> The advantage of using something like\nthis is the very fact that we're no longer\n\n52\n00:03:11,370 --> 00:03:15,250\nstoring the IOS on\nthe actual router itself, so\n\n53\n00:03:15,250 --> 00:03:18,370\nif there is a failure on that device,\nwe don't have to depend on that.\n\n54\n00:03:18,370 --> 00:03:21,470\nSo normally you hear of people\nbacking up the startup config\n\n55\n00:03:21,470 --> 00:03:23,786\nas well as the IOS to a TFTP server.\n\n56\n00:03:23,786 --> 00:03:24,350\n>> Uh-huh.\n\n57\n00:03:24,350 --> 00:03:27,080\n>> Once again, it actually does that very\nquickly which is something that we really\n\n58\n00:03:27,080 --> 00:03:30,500\nlike, and allows us then to be able to\ntake a new device, plug it back in and\n\n59\n00:03:30,500 --> 00:03:32,430\nactually get it back on\nthe router just as quickly.\n\n60\n00:03:33,470 --> 00:03:35,231\n>> Now, if you don't like TFTP,\nthat's fine.\n\n61\n00:03:35,231 --> 00:03:36,960\nOn the exam\n>> [LAUGH]\n\n62\n00:03:36,960 --> 00:03:37,575\n>> You're gonna see\n\n63\n00:03:37,575 --> 00:03:38,192\nTFTP\n>> Right\n\n64\n00:03:38,192 --> 00:03:39,220\n>> Cuz that's supported every where.\n\n65\n00:03:40,260 --> 00:03:41,530\nMost of your newer routers,\n\n66\n00:03:41,530 --> 00:03:45,630\nyour routers that were built in the last\ncouple of years support FTP now, also.\n\n67\n00:03:45,630 --> 00:03:47,250\nFTP is a lot more reliable,\n\n68\n00:03:47,250 --> 00:03:51,620\nsupports subfolders, supports permissions,\nstill not encrypted, right?\n\n69\n00:03:51,620 --> 00:03:55,600\nSo, still not really secured for\ninternet use, or whatever.\n\n70\n00:03:55,600 --> 00:03:58,470\nBut, it is still a viable option.\n\n71\n00:03:58,470 --> 00:04:01,930\nAnd then on your newest routers your ones\nthat have the encrypting features set.\n\n72\n00:04:01,930 --> 00:04:05,720\nYou're actually gonna see support for\nSPC the secure copy protocol.\n\n73\n00:04:05,720 --> 00:04:10,850\nNow we have a system that does encryption\nthat gives a secure communication,\n\n74\n00:04:10,850 --> 00:04:13,550\nbut not every router supports it.\n\n75\n00:04:13,550 --> 00:04:16,690\n>> So it is good that we learn at least\nthe basics here for when we do this.\n\n76\n00:04:16,690 --> 00:04:18,070\nSo we are gonna start off with a backup.\n\n77\n00:04:18,070 --> 00:04:19,433\nIs that what we are gonna do?\n\n78\n00:04:19,433 --> 00:04:20,000\n>> Yeah, sure.\n\n79\n00:04:20,000 --> 00:04:22,360\nAll right, so\nI mentioned a TFTP, all right?\n\n80\n00:04:22,360 --> 00:04:26,010\nIf you have a TFTP server laying\naround you can use it, right?\n\n81\n00:04:26,010 --> 00:04:28,810\nAnd really any Linux box\nhas TFTP build into it.\n\n82\n00:04:28,810 --> 00:04:30,470\nYou can turn it on and give it a go.\n\n83\n00:04:32,400 --> 00:04:35,160\nBut if don't have one laying around,\nlike if you're on a Windows server.\n\n84\n00:04:35,160 --> 00:04:37,080\nWindows doesn't have TFTP built into it.\n\n85\n00:04:37,080 --> 00:04:39,360\nIt has a TFTP client server.\n\n86\n00:04:39,360 --> 00:04:40,809\n>> Right.\n>> So in that scenario you're gonna need\n\n87\n00:04:40,809 --> 00:04:41,410\na third party one.\n\n88\n00:04:41,410 --> 00:04:45,601\nI'm gonna use one called TFTPD32.\n\n89\n00:04:45,601 --> 00:04:48,480\nLet me show you their web site real quick.\n\n90\n00:04:48,480 --> 00:04:56,010\nTFTPD32 is a open source TFTP server\nwith a absolutely horrible web page.\n\n91\n00:04:56,010 --> 00:04:59,100\nAnd if you go to the web site,\nit's pretty bad.\n\n92\n00:04:59,100 --> 00:05:03,450\nBut it's open source, free of charge,\nanybody can use it and even though\n\n93\n00:05:03,450 --> 00:05:09,400\nthe name is TFPTD32, they actually have\na 64 bit version also, so you got both.\n\n94\n00:05:09,400 --> 00:05:13,840\nIt's a TFTP server, but\nit also does Syslog and DHTP and\n\n95\n00:05:13,840 --> 00:05:16,660\na bunch of other things too,\nso it's a neat little program.\n\n96\n00:05:16,660 --> 00:05:18,360\nAnd it's free.\n\n97\n00:05:18,360 --> 00:05:22,348\nThere's pay products out there,\nlike Solar Winds has a TFTP Server,\n\n98\n00:05:22,348 --> 00:05:26,421\nI think they have a free version, but\nI know they have paying ones also.\n\n99\n00:05:26,421 --> 00:05:29,170\n3 Com has one that you can download for\nfree.\n\n100\n00:05:29,170 --> 00:05:30,930\nFree, different vendors have them.\n\n101\n00:05:30,930 --> 00:05:34,820\nCisco does not have an official TFTP\nserver, it's up to you to get your own.\n\n102\n00:05:36,660 --> 00:05:39,470\nAll right, so I've actually got that\nrunning here in the background.\n\n103\n00:05:39,470 --> 00:05:42,260\nSo here's my TFTP server that's running.\n\n104\n00:05:42,260 --> 00:05:44,820\nAnd I've just got it pointed\nto my desktop right now,\n\n105\n00:05:44,820 --> 00:05:47,150\ncuz that's where I have\nsome IOS files loaded.\n\n106\n00:05:47,150 --> 00:05:52,010\nAnd inside of that I just have my IP\non my laptop that this is attached to.\n\n107\n00:05:52,010 --> 00:05:52,560\nAnd here it's going.\n\n108\n00:05:52,560 --> 00:05:53,660\nI don't have to set usernames.\n\n109\n00:05:53,660 --> 00:05:56,462\nI don't have to set passwords,\nI don't have to set folders, it's just,\n\n110\n00:05:56,462 --> 00:05:58,162\nit's there and it's doing its thing right.\n\n111\n00:05:58,162 --> 00:05:59,320\n>> Yeah.\n\n112\n00:05:59,320 --> 00:06:03,110\nOnce we have this up and running, it's\nimportant that we make sure of course,\n\n113\n00:06:03,110 --> 00:06:07,000\nthat we have our interfaces that we\nneed to be connected to network.\n\n114\n00:06:07,000 --> 00:06:11,040\nAnd then that out TFTP server is also\nconnected in, but the command for\n\n115\n00:06:11,040 --> 00:06:16,290\nus to begin the [INAUDIBLE]\nbackup is relatively simple.\n\n116\n00:06:16,290 --> 00:06:19,730\n>> For example if I want to save\nmy configuration, what do we do?\n\n117\n00:06:19,730 --> 00:06:25,020\nWe do copy running-config startup-config.\n\n118\n00:06:25,020 --> 00:06:27,770\nThat's the command to save\nour configuration and so\n\n119\n00:06:27,770 --> 00:06:31,170\nwe're just copying a file, basically.\n\n120\n00:06:31,170 --> 00:06:32,960\nWell, you do the same thing for TFTP.\n\n121\n00:06:32,960 --> 00:06:37,553\nIf I want to back up my configuration,\n\n122\n00:06:37,553 --> 00:06:42,950\nI can say copy-config to TFTP:, right?\n\n123\n00:06:42,950 --> 00:06:44,680\nThat's pointing it to a TFTP server.\n\n124\n00:06:44,680 --> 00:06:48,060\nAnd if I do a question mark I'll see all\nthe different things that are supported.\n\n125\n00:06:48,060 --> 00:06:52,670\nThis particular router supports FTP,\nTFTP, SCP.\n\n126\n00:06:52,670 --> 00:06:54,650\nI've got secure copy protocol.\n\n127\n00:06:54,650 --> 00:06:57,830\nSo you've got a few different choices,\nbased on what you want to do.\n\n128\n00:06:57,830 --> 00:07:00,380\nAnd I'm gonna do TFTP, right?\n\n129\n00:07:00,380 --> 00:07:02,980\nIt's gonna ask me for\nthe IP address of the TFTP server.\n\n130\n00:07:02,980 --> 00:07:04,070\nI'll put in my laptop.\n\n131\n00:07:06,370 --> 00:07:07,966\nAnd then what I want\nthe file name to be called.\n\n132\n00:07:07,966 --> 00:07:15,964\nMy router is r1, so\nI'm gonna call it r1-running-config.txt.\n\n133\n00:07:15,964 --> 00:07:19,190\nThe config file is just a text file.\n\n134\n00:07:19,190 --> 00:07:22,990\nIf you set the default there of r1-config,\n\n135\n00:07:22,990 --> 00:07:27,450\nthat's fine, but on Windows it's not gonna\nautomatically open in Notepad or whatever.\n\n136\n00:07:27,450 --> 00:07:29,540\n>> Right.\n>> So I'm gonna just call it txt to\n\n137\n00:07:29,540 --> 00:07:31,330\nhelp with opening that file.\n\n138\n00:07:31,330 --> 00:07:35,090\nIn the background, I can see\na connection happen to my TFTP server.\n\n139\n00:07:35,090 --> 00:07:39,960\nAnd it tells me that I've copied that\nfile successfully to my TFTP server.\n\n140\n00:07:39,960 --> 00:07:40,920\n>> Yeah.\n\n141\n00:07:40,920 --> 00:07:44,498\n>> And if I browse to my desktop,\nthere's a text file right there,\n\n142\n00:07:44,498 --> 00:07:45,967\nr1-running-config.\n\n143\n00:07:45,967 --> 00:07:51,028\nAnd if I open it up, oh,\nI forgot it's a UNIX format.\n\n144\n00:07:51,028 --> 00:07:52,274\n>> [LAUGH] Oh.\n>> So in Windows,\n\n145\n00:07:52,274 --> 00:07:55,500\nat the end of every line in a text\nfile there's carriage return.\n\n146\n00:07:55,500 --> 00:07:56,278\n>> Mm-hm.\n\n147\n00:07:56,278 --> 00:07:57,159\n>> And a line feed.\n\n148\n00:07:57,159 --> 00:08:01,388\nIn munics land, they only do the line\nfeed, they don't do the carriage return.\n\n149\n00:08:01,388 --> 00:08:04,510\nSo it doesn't start a new line.\n\n150\n00:08:04,510 --> 00:08:07,560\nSo let me open that in Wordpad instead.\n\n151\n00:08:07,560 --> 00:08:09,050\nWordpad will be a little happier with it.\n\n152\n00:08:10,250 --> 00:08:11,020\n>> There you go.\n\n153\n00:08:11,020 --> 00:08:12,140\n>> There we go.\n\n154\n00:08:12,140 --> 00:08:13,580\nAnd so here's my config, right?\n\n155\n00:08:13,580 --> 00:08:17,350\nAll the commands that would need to be\nentered to get my router back to the exact\n\n156\n00:08:17,350 --> 00:08:19,903\nconfiguration as it was,\nlet me turn off word wrap.\n\n157\n00:08:22,774 --> 00:08:24,060\nThere we go.\n\n158\n00:08:24,060 --> 00:08:27,850\nEverything that would need to be run to\nget my router back into the configuration\n\n159\n00:08:27,850 --> 00:08:29,010\nthat I had on it.\n\n160\n00:08:29,010 --> 00:08:32,630\nIn the event that I were to lose\neverything it's all right here, right?\n\n161\n00:08:32,630 --> 00:08:33,430\n>> Mm-hm.\n\n162\n00:08:33,430 --> 00:08:35,940\n>> Now I've got the running config.\n\n163\n00:08:35,940 --> 00:08:39,320\nAnd the running config and\nthe startup config's are different.\n\n164\n00:08:39,320 --> 00:08:40,190\nWe need to be aware of that.\n\n165\n00:08:40,190 --> 00:08:43,220\nThere's a few subtle\ndifferences between the two.\n\n166\n00:08:43,220 --> 00:08:48,910\nLet me, just as an example,\nlet me get the startup config.\n\n167\n00:08:48,910 --> 00:08:51,734\nSo, I'm gonna rerun that same command\nfrom before except this time I'm gonna do\n\n168\n00:08:51,734 --> 00:08:52,489\nthe startup config.\n\n169\n00:09:03,815 --> 00:09:05,170\nThere we go.\n\n170\n00:09:06,880 --> 00:09:10,034\nLet's make use of\nthe Windows snap feature.\n\n171\n00:09:10,034 --> 00:09:11,764\nAw snap.\n\n172\n00:09:11,764 --> 00:09:13,130\n>> Wow.\n\n173\n00:09:13,130 --> 00:09:16,700\n>> I'm sure I'm the first person\nto have ever made that joke.\n\n174\n00:09:18,690 --> 00:09:20,038\n>> Probably with Windows, yes.\n\n175\n00:09:20,038 --> 00:09:22,230\n[LAUGH]\n>> All right,\n\n176\n00:09:22,230 --> 00:09:26,270\nso as we start to look at these,\nthey look the same don't they?\n\n177\n00:09:26,270 --> 00:09:29,770\nOn the left is my running config,\non the right is my start up config, and\n\n178\n00:09:29,770 --> 00:09:31,830\nall the commands look identical.\n\n179\n00:09:31,830 --> 00:09:33,020\nBut as we start to scroll down,\n\n180\n00:09:33,020 --> 00:09:37,170\nthings start to get a little\ndifferent usually right around here.\n\n181\n00:09:37,170 --> 00:09:38,700\nSo let's get down here.\n\n182\n00:09:42,110 --> 00:09:44,640\nAll right,\nwhat do we see that's different here?\n\n183\n00:09:44,640 --> 00:09:47,800\nWell, on the left side, my running config,\n\n184\n00:09:47,800 --> 00:09:52,140\nhas my certificates right there\nin the configuration file.\n\n185\n00:09:52,140 --> 00:09:54,210\nI mean right there in the, you know,\nin the running config, in memory.\n\n186\n00:09:54,210 --> 00:09:56,580\nThat's my whole certificate,\nstuck in there.\n\n187\n00:09:56,580 --> 00:10:00,040\nOn the right side, they don't have that,\nnotice what they have.\n\n188\n00:10:00,040 --> 00:10:05,470\nThe certificate is referencing\na file stored in NV RAM, okay?\n\n189\n00:10:05,470 --> 00:10:10,710\nThe startup config is actually\nnot a hundred percent complete.\n\n190\n00:10:10,710 --> 00:10:14,590\nIt's referencing other files in memory,\nin NV RAM.\n\n191\n00:10:14,590 --> 00:10:16,810\nSo if I want to do a full backup this way,\n\n192\n00:10:16,810 --> 00:10:19,950\nI would need to also get those other\nfiles that contain the certificate.\n\n193\n00:10:19,950 --> 00:10:22,380\nIf I replace this entire router,\n\n194\n00:10:22,380 --> 00:10:24,500\nthis configuration right\nhere would be incomplete.\n\n195\n00:10:24,500 --> 00:10:27,530\nAll right, but\non the left side here, this one.\n\n196\n00:10:27,530 --> 00:10:30,920\nWell, now we're starting to see\nthe actual certificate stored in it.\n\n197\n00:10:30,920 --> 00:10:33,790\nThis is my running config,\nwhat's running in memory right now.\n\n198\n00:10:33,790 --> 00:10:38,060\nIt's got everything, so just be aware\nthat a lot of people back up the start up\n\n199\n00:10:38,060 --> 00:10:41,880\nconfiguration thinking it's got everything\nthey need when in reality there's\n\n200\n00:10:41,880 --> 00:10:45,810\njust a few things that are missing and\nif I go back here and\n\n201\n00:10:45,810 --> 00:10:50,620\ndo like a DIR of NV RAM:,\nwhen I look in the NV RAM\n\n202\n00:10:50,620 --> 00:10:54,850\nthere's that certificate file right there,\nthe start up configures okay with that.\n\n203\n00:10:54,850 --> 00:10:55,600\nIt can read it from there.\n\n204\n00:10:55,600 --> 00:10:57,220\nBut if you don't back that up,\nyou're gonna miss out.\n\n205\n00:10:57,220 --> 00:10:58,560\n>> Yeah.\n\n206\n00:10:58,560 --> 00:10:59,820\n>> And, you know, we can copy that.\n\n207\n00:10:59,820 --> 00:11:07,250\nWe can say, copy nvram: IOS,\nself science certificate.\n\n208\n00:11:07,250 --> 00:11:08,700\nBut we can copy it up to TFTP.\n\n209\n00:11:10,450 --> 00:11:13,253\nYou know what, actually.\nBefore I even do that, let me stop this,\n\n210\n00:11:13,253 --> 00:11:13,792\nthere.\n\n211\n00:11:13,792 --> 00:11:19,240\nWe could save a little bit of time and\ndo all of this in one line.\n\n212\n00:11:19,240 --> 00:11:20,122\nI could say.\n\n213\n00:11:20,122 --> 00:11:26,748\n[SOUND] It makes me type it out, but\nI can punch all this in here like that,\n\n214\n00:11:26,748 --> 00:11:30,725\nso I'm specifying the TFTP server name and\n\n215\n00:11:30,725 --> 00:11:34,591\ndestination file name all in one line, so\n\n216\n00:11:34,591 --> 00:11:40,677\nnow all I have to do is press enter and\nknock it out a little faster.\n\n217\n00:11:40,677 --> 00:11:42,239\n>> There you go.\n>> All right, so\n\n218\n00:11:42,239 --> 00:11:45,090\nnow I've backed up that file.\n\n219\n00:11:45,090 --> 00:11:48,050\nSo just be aware of that I usually\nmake a habit of getting both,\n\n220\n00:11:48,050 --> 00:11:51,560\nthe startup and the running config just\ncuz I don't know if somebody saved it,\n\n221\n00:11:51,560 --> 00:11:54,150\nmaybe you haven't saved so there's\na difference there, so I like to get both.\n\n222\n00:11:55,500 --> 00:11:58,820\n>> Having copies of these are really\nhandy, especially if a device goes down\n\n223\n00:11:58,820 --> 00:12:02,890\nand that device needs to be reconfigured\nor a new device needs to be configured and\n\n224\n00:12:02,890 --> 00:12:05,050\nput back in its place as\nquickly as we can get it to go.\n\n225\n00:12:06,650 --> 00:12:08,619\n>> Now when I backed up there,\nthose are the configuration files.\n\n226\n00:12:09,730 --> 00:12:12,830\nIt's also a good idea to back\nup the operating system too.\n\n227\n00:12:12,830 --> 00:12:16,850\nNow, you can go to Cisco's website and\ndownload the current operating system for\n\n228\n00:12:16,850 --> 00:12:20,330\nyour router, as long as you have\na current maintenance agreement.\n\n229\n00:12:20,330 --> 00:12:26,000\nBut the problem is if you ever have\na router fail, and Cisco Expresses\n\n230\n00:12:26,000 --> 00:12:28,480\nyou a four hour replacement, and\nyou get that replacement in.\n\n231\n00:12:28,480 --> 00:12:29,800\nYour internet connection might be down.\n\n232\n00:12:29,800 --> 00:12:32,080\nYou might not be able to go and\ndownload that file.\n\n233\n00:12:32,080 --> 00:12:35,560\nAnd the new router that comes in will more\nthan likely have a different version of\n\n234\n00:12:35,560 --> 00:12:37,300\nthe iOS on it than you had before.\n\n235\n00:12:37,300 --> 00:12:41,360\nNow, you could go ahead and just throw in\nthis upgraded version and see how it goes.\n\n236\n00:12:41,360 --> 00:12:44,620\nBut when you're dealing with a failure,\ngetting your system back online as fast\n\n237\n00:12:44,620 --> 00:12:46,900\nas possible is usually\nthe most important thing.\n\n238\n00:12:46,900 --> 00:12:49,940\nSo we'd like to stick with\nthe same version of our iOS,\n\n239\n00:12:49,940 --> 00:12:52,690\nat least until we get\nthe failure solved and so on.\n\n240\n00:12:52,690 --> 00:12:55,060\nSo it is a good idea to\nback up your IOS files.\n\n241\n00:12:55,060 --> 00:12:56,290\nSo let me show that.\n\n242\n00:12:56,290 --> 00:12:58,522\nWe're just gonna use that copy command,\n\n243\n00:12:58,522 --> 00:13:01,200\nexcept this time I'm\ngonna copy from flash.\n\n244\n00:13:01,200 --> 00:13:07,389\nAnd you know what, I don't know my\n>> Yeah.\n\n245\n00:13:07,389 --> 00:13:09,610\nI'm gonna copy this.\n\n246\n00:13:09,610 --> 00:13:13,210\nIOS file right here, so\nthis is the IOS that's on it right now.\n\n247\n00:13:13,210 --> 00:13:18,679\nAnd I can see it's running a 12.4 IOS, and\nI'm gonna copy that to my TFTP server.\n\n248\n00:13:20,702 --> 00:13:22,080\nAll right.\n\n249\n00:13:22,080 --> 00:13:23,500\nAnd so there is the name.\n\n250\n00:13:23,500 --> 00:13:25,650\nAnd I am gonna keep\nthe same file name here.\n\n251\n00:13:25,650 --> 00:13:27,100\nAnd we will run that.\n\n252\n00:13:27,100 --> 00:13:29,910\nNow it's gonna take longer to upload,\nbecause-\n\n253\n00:13:29,910 --> 00:13:31,380\n>> It's bigger.\n\n254\n00:13:31,380 --> 00:13:35,630\n>> Yeah, the config file,\nhow big was that it says 572 bytes.\n\n255\n00:13:35,630 --> 00:13:37,830\nSo not even 1 kilobyte.\n\n256\n00:13:37,830 --> 00:13:42,350\nAnd just really small, whereas that\nIOS file is several megs in size.\n\n257\n00:13:42,350 --> 00:13:44,730\nI think it's almost 60 megs or something.\n\n258\n00:13:44,730 --> 00:13:47,450\nAnd so on a TFTP server,\nthat can take a while.\n\n259\n00:13:47,450 --> 00:13:49,850\nI just noticed mine went in\nthe background, so there it is.\n\n260\n00:13:49,850 --> 00:13:52,510\nSo there it's doing its transfer and\n\n261\n00:13:52,510 --> 00:13:55,020\njust kind of looking here we got bytes,\nkilobytes.\n\n262\n00:13:55,020 --> 00:13:56,710\nIt's only a five megs.\n\n263\n00:13:56,710 --> 00:13:58,640\nIt's gonna take a while to copy.\n\n264\n00:13:58,640 --> 00:14:02,440\nThis is one problem with TFTP, it is slow.\n\n265\n00:14:02,440 --> 00:14:04,930\nIf I was using FTP,\nthis would probably be done by now.\n\n266\n00:14:04,930 --> 00:14:05,860\nFTP is a lot faster.\n\n267\n00:14:07,900 --> 00:14:12,640\nNow, the main problem is that TFTP\nuses UDP to transfer everything, and\n\n268\n00:14:12,640 --> 00:14:16,810\nit doesn't have a good negative\nacknowledgment system.\n\n269\n00:14:16,810 --> 00:14:20,020\nIt doesn't do that,\nit's a stateless protocol.\n\n270\n00:14:20,020 --> 00:14:25,030\nSo it has to go slow to make sure that the\nother end is receiving its data FTP and\n\n271\n00:14:25,030 --> 00:14:26,820\nSCP, much, much faster.\n\n272\n00:14:26,820 --> 00:14:29,606\nSo you really do want to use those,\nbut on the exam.\n\n273\n00:14:29,606 --> 00:14:30,350\n>> Yep.\n\n274\n00:14:30,350 --> 00:14:33,230\n>> Cisco doesn't know whether you have\nall that stuff set up in your network, so\n\n275\n00:14:33,230 --> 00:14:35,845\nthey go with the one that's guarenteed\nto work everywhere, which is TFTP.\n\n276\n00:14:35,845 --> 00:14:38,080\n>> Mm-hm.\n\n277\n00:14:38,080 --> 00:14:40,440\nWe use this process not only\nin terms of backing up, but\n\n278\n00:14:40,440 --> 00:14:45,740\nwe're gonna see we can also use this\nprocess when we go into actually restoring\n\n279\n00:14:45,740 --> 00:14:48,820\nthe actual routers well, and\nthen we may even talk about,\n\n280\n00:14:48,820 --> 00:14:51,350\nweren't we gonna mention the idea\nof upgrading to the the next?\n\n281\n00:14:51,350 --> 00:14:54,170\n>> Absolutely.\nLet's do that while we're waiting on this\n\n282\n00:14:54,170 --> 00:14:54,960\nto copy.\n\n283\n00:14:54,960 --> 00:14:57,980\nSo this is running a 12.4 IOS.\n\n284\n00:14:57,980 --> 00:15:05,110\nOn the exam, you're gonna see the 15.0,\n15.1, 15.2, you're gonna see the 15 track.\n\n285\n00:15:05,110 --> 00:15:09,090\nNow you might say hang on a second Don,\nyou're showing me a 12 point something and\n\n286\n00:15:09,090 --> 00:15:10,080\nthey're at 15?\n\n287\n00:15:10,080 --> 00:15:11,490\nWhy are you so behind?\n\n288\n00:15:11,490 --> 00:15:14,490\nWell, actually not very behind.\n\n289\n00:15:14,490 --> 00:15:16,370\nThey went through 12.4 to 15.0.\n\n290\n00:15:16,370 --> 00:15:18,480\nThey skipped everything in between,\nall right?\n\n291\n00:15:18,480 --> 00:15:20,100\nNow why I dunno.\n\n292\n00:15:20,100 --> 00:15:23,927\n13's an unlucky number I imagine and\n14 they just didn't like.\n\n293\n00:15:23,927 --> 00:15:26,120\n>> Another unlucky number.\n\n294\n00:15:26,120 --> 00:15:27,450\n>> So they skipped it.\n\n295\n00:15:27,450 --> 00:15:29,140\nThere is no 13, there is no 14.\n\n296\n00:15:29,140 --> 00:15:30,920\nThey skipped right to 15.\n\n297\n00:15:30,920 --> 00:15:35,150\nFunctionally looking at the two,\nthere is very little difference.\n\n298\n00:15:35,150 --> 00:15:38,400\nThe primary difference\nbetween the 12 track and\n\n299\n00:15:38,400 --> 00:15:41,240\nthe 15 track is how they did licensing.\n\n300\n00:15:41,240 --> 00:15:44,650\nLicensing under the new 15.0\nsystems is done a different way.\n\n301\n00:15:44,650 --> 00:15:46,395\nAnd we will get to see\nthat a little bit later.\n\n302\n00:15:46,395 --> 00:15:50,480\nBut otherwise, if I was running\na 15 point whatever IOS here,\n\n303\n00:15:50,480 --> 00:15:55,109\nnothing we've done so far would've\nlooked any different what so ever.\n\n304\n00:15:55,109 --> 00:15:56,310\nIt's all basically the same.\n\n305\n00:15:56,310 --> 00:16:00,971\nAll right, so if I want to upgrade this\nrouter, upgrading a router is not as easy\n\n306\n00:16:00,971 --> 00:16:05,550\nas just going and getting whatever\nthe latest and greatest is, all right?\n\n307\n00:16:05,550 --> 00:16:08,340\nThere's a couple of things\nwe have to deal with.\n\n308\n00:16:08,340 --> 00:16:11,610\nStep one, you have to have\na current maintenance agreement.\n\n309\n00:16:11,610 --> 00:16:14,090\nYou have to have a smart net\ncontract on your equipment.\n\n310\n00:16:14,090 --> 00:16:16,070\nIf you don't you can't update your router.\n\n311\n00:16:16,070 --> 00:16:21,420\nYou are legally forbidden in your\nagreement with Cisco to upgrade\n\n312\n00:16:21,420 --> 00:16:22,440\nthat router.\n\n313\n00:16:23,560 --> 00:16:26,170\nSo that's our first thing.\n\n314\n00:16:26,170 --> 00:16:31,110\nThe second thing is different feature\nsets have different IOS files.\n\n315\n00:16:31,110 --> 00:16:32,430\nNow that's not always true.\n\n316\n00:16:32,430 --> 00:16:34,790\nSo, well, let me hold off on that.\n\n317\n00:16:34,790 --> 00:16:36,272\nI'm getting ahead of myself.\n\n318\n00:16:36,272 --> 00:16:40,240\nAll right, so we do need to be aware of\nwhat we're licensed for on the router.\n\n319\n00:16:40,240 --> 00:16:42,800\nSo we can get the right upgrade files.\n\n320\n00:16:42,800 --> 00:16:48,110\nAnd then the third thing is we need to\nunderstand how much memory we have.\n\n321\n00:16:48,110 --> 00:16:53,410\nBecause each iOS has certain memory and,\nor RAM and flash requirements.\n\n322\n00:16:53,410 --> 00:16:55,010\n>> Right.\n>> And if you don't have enough,\n\n323\n00:16:55,010 --> 00:16:57,990\nthen you may have to upgrade\nthe memory in your router to be able to\n\n324\n00:16:57,990 --> 00:16:59,100\ngo to the newer versions.\n\n325\n00:16:59,100 --> 00:17:01,820\nAs they add new features,\nthey need more hardware.\n\n326\n00:17:01,820 --> 00:17:04,700\n>> Yeah, you actually start\nseeing some unusual things here.\n\n327\n00:17:04,700 --> 00:17:07,360\nSometimes when you go and say, hey,\nI want to put this new iOS on, and\n\n328\n00:17:07,360 --> 00:17:11,660\nyou're not sure, you try and\ndo a TFTP back onto the router.\n\n329\n00:17:11,660 --> 00:17:12,560\nIt's probably not going to work.\n\n330\n00:17:12,560 --> 00:17:15,100\nYou'll probably end up with\nsome kind of unusual failure.\n\n331\n00:17:15,100 --> 00:17:17,370\nOr you may have enough\nto store it in RAM but\n\n332\n00:17:17,370 --> 00:17:19,170\nyou don't have enough RAM to make it run.\n\n333\n00:17:19,170 --> 00:17:21,380\nYou end up with some\ndifferent errors as well.\n\n334\n00:17:21,380 --> 00:17:21,991\n>> Yeah and you can end up\nwith a router that won't boot.\n\n335\n00:17:21,991 --> 00:17:26,090\n>> Yeah. [CROSSTALK] >> And\nyou end up in mode and you gotta fix it.\n\n336\n00:17:26,090 --> 00:17:27,340\n>> There you go.\n>> All right, so\n\n337\n00:17:27,340 --> 00:17:28,380\nlet's say I want to upgrade this one.\n\n338\n00:17:28,380 --> 00:17:32,160\nNow I know it's running 12.4,\nrelease 22, right?\n\n339\n00:17:32,160 --> 00:17:33,230\nSo our sub release 22, right?\n\n340\n00:17:33,230 --> 00:17:35,070\nSo let's talk about Cisco versioning.\n\n341\n00:17:35,070 --> 00:17:35,620\nRight?\n\n342\n00:17:35,620 --> 00:17:38,670\nSo you have the 12,\nthat's the major version.\n\n343\n00:17:38,670 --> 00:17:39,520\nRight?\n\n344\n00:17:39,520 --> 00:17:44,130\nAnd then after that you have the minor\nversion, so this one is 12.4.\n\n345\n00:17:44,130 --> 00:17:46,600\nObviously there was 12.1,\n12.2, 12.3 and now 12.4.\n\n346\n00:17:46,600 --> 00:17:47,940\nWith the 15s.\n\n347\n00:17:47,940 --> 00:17:51,360\nWe got 15.0, 15.1, 15.2,\nI don't think 15.3's out yet.\n\n348\n00:17:51,360 --> 00:17:56,100\nAfter that, you have your sub releases.\n\n349\n00:17:56,100 --> 00:17:59,840\nWhenever there's a bug fix,\nthe bug fixes are sub releases.\n\n350\n00:17:59,840 --> 00:18:03,500\nSo, this is 12.4 sub release 22,\nthat means that there\n\n351\n00:18:03,500 --> 00:18:07,800\nhave been 22 bug fixes that have\ncome out for this particular router.\n\n352\n00:18:07,800 --> 00:18:08,440\nAll right.\n\n353\n00:18:08,440 --> 00:18:10,400\nNow when 12.5 comes out,\n\n354\n00:18:10,400 --> 00:18:12,615\nI'm not in a hurry to upgrade to 12.5\n>> [LAUGH]\n\n355\n00:18:12,615 --> 00:18:15,140\n>> 12.5 will include new features.\n\n356\n00:18:15,140 --> 00:18:18,270\n>> Right.\n>> But if 12.4 release 23 comes out,\n\n357\n00:18:18,270 --> 00:18:21,400\nI'm in a hurry to get that, because\nthat's a bug fix that was either a bug or\n\n358\n00:18:21,400 --> 00:18:24,350\na security exploit and\nI need to apply that quickly.\n\n359\n00:18:24,350 --> 00:18:29,620\nSo the sub release you get your major\nrelease, your minor release and\n\n360\n00:18:29,620 --> 00:18:30,330\nyour sub release.\n\n361\n00:18:30,330 --> 00:18:35,590\nThe subs, those are indicating those new\nversions are coming out that fix problems,\n\n362\n00:18:35,590 --> 00:18:36,650\nfix bugs.\n\n363\n00:18:36,650 --> 00:18:38,595\nThe minor release, this four right here.\n\n364\n00:18:38,595 --> 00:18:40,720\n12.4 that would be new features.\n\n365\n00:18:42,110 --> 00:18:42,710\nAll right.\n\n366\n00:18:42,710 --> 00:18:47,560\nSo, let's go take a look at Cisco's\nwebsite, I do have current contracts.\n\n367\n00:18:47,560 --> 00:18:52,880\nSo, this router right here is running\nAdvanced Enterprise Services, right?\n\n368\n00:18:52,880 --> 00:18:54,850\nOr, Advanced IP Services.\n\n369\n00:18:54,850 --> 00:18:57,920\nSo, when I go and look for IOSs, I need\nto remember that and I need to look for\n\n370\n00:18:57,920 --> 00:18:59,430\nAdvanced IP Services.\n\n371\n00:18:59,430 --> 00:19:02,480\nSo I'm gonna go to Cisco's website, which\nI think I've got open somewhere back here.\n\n372\n00:19:03,570 --> 00:19:05,800\nWell you know what,\nlet's do the whole thing, let me just.\n\n373\n00:19:05,800 --> 00:19:08,080\nGo straight to the beginning.\n\n374\n00:19:08,080 --> 00:19:10,890\nSo, I'm gonna go to www.support.cisco.com.\n\n375\n00:19:10,890 --> 00:19:13,890\nIf I can type it I'll go\nto www.support.cisco.com.\n\n376\n00:19:13,890 --> 00:19:17,595\nI almost went to www.support.crisco.com,\nand we could get some baking advice.\n\n377\n00:19:17,595 --> 00:19:18,760\n>> That's right.\n\n378\n00:19:18,760 --> 00:19:21,070\n>> [LAUGH]\n>> Do they still make Crisco?\n\n379\n00:19:21,070 --> 00:19:23,050\nThey do.\n>> I'm sure they do, all right.\n\n380\n00:19:23,050 --> 00:19:24,790\nSo I'm gonna go to Cisco's website.\n\n381\n00:19:24,790 --> 00:19:27,870\nNow, you can actually do a lot\nof this without an account, but\n\n382\n00:19:27,870 --> 00:19:28,740\nyou can't download it.\n\n383\n00:19:28,740 --> 00:19:30,750\nSo it's gonna make me log in eventually,\nbut\n\n384\n00:19:30,750 --> 00:19:33,120\nI'll start here without being logged in.\n\n385\n00:19:33,120 --> 00:19:34,510\nSo here I am on the support website.\n\n386\n00:19:34,510 --> 00:19:38,450\nI went to support.cisco.com,\nand I'm gonna go to downloads.\n\n387\n00:19:38,450 --> 00:19:40,360\nAnd under downloads,\nI'm gonna punch in my product.\n\n388\n00:19:40,360 --> 00:19:46,495\nThis is a 2821 and so here's my Cisco\n2821 integrated services router, ISR.\n\n389\n00:19:48,100 --> 00:19:49,950\nSo I'll click on that.\n\n390\n00:19:49,950 --> 00:19:54,940\nAnd now, down here, is where I\nget some information on the 2821.\n\n391\n00:19:54,940 --> 00:19:56,300\nAnd what I can download.\n\n392\n00:19:56,300 --> 00:19:58,380\nThere's a lot of stuff\nI can download here.\n\n393\n00:19:58,380 --> 00:20:01,370\nIt looks like a little firmware\nupdates for WAN interface cards.\n\n394\n00:20:01,370 --> 00:20:04,020\nWe've got some kind of storage module.\n\n395\n00:20:04,020 --> 00:20:08,400\nCisco unity express if we are doing\nthe voice over IP services.\n\n396\n00:20:08,400 --> 00:20:10,460\nBut what I want is software on chassis.\n\n397\n00:20:10,460 --> 00:20:11,240\nThis guy right here.\n\n398\n00:20:13,830 --> 00:20:15,640\nIf I can click on it.\n\n399\n00:20:15,640 --> 00:20:17,070\nThere we go, all right.\n\n400\n00:20:17,070 --> 00:20:19,910\nSo, that's gonna take me in here and I can\nsee some of the software I can download.\n\n401\n00:20:19,910 --> 00:20:23,780\nThere is the IOS Rommon Software,\nthe little updates to Rommon.\n\n402\n00:20:23,780 --> 00:20:26,150\nThere's the IOS software itself and\n\n403\n00:20:26,150 --> 00:20:30,020\nthere's the PDLM, or Protocol\nDescription Language Module, that's for\n\n404\n00:20:30,020 --> 00:20:32,110\ncertain types of quality of service.\n\n405\n00:20:33,520 --> 00:20:35,370\nBut, we're gonna go with the IOS software.\n\n406\n00:20:37,010 --> 00:20:37,810\nAll right.\n\n407\n00:20:37,810 --> 00:20:40,480\nNow when I go in here,\nit's not just gonna show me the latest.\n\n408\n00:20:40,480 --> 00:20:43,380\nIt's gonna show me all of the versions.\n\n409\n00:20:43,380 --> 00:20:45,130\nAll of the versions of\nthe IOS that came out for\n\n410\n00:20:45,130 --> 00:20:49,230\nthis router that don't have a giant\ngaping security hole in them.\n\n411\n00:20:49,230 --> 00:20:52,380\nIf there's been a giant security hole,\nthey delete it from the website,\n\n412\n00:20:52,380 --> 00:20:53,139\nit's no longer downloadable.\n\n413\n00:20:54,660 --> 00:21:01,510\nAll right, so when I look at it, notice\nhow we've got 15.0 and 15.1 and 12.4.\n\n414\n00:21:01,510 --> 00:21:05,899\nJust because 15.0 is out,\nthat doesn't mean Cisco drops support for\n\n415\n00:21:05,899 --> 00:21:07,220\nthe earlier ones.\n\n416\n00:21:07,220 --> 00:21:11,080\nIt's just new features, and so Cisco\nis still very currently supporting 12.4\n\n417\n00:21:11,080 --> 00:21:13,209\nwhich is what we are running\non this router right here.\n\n418\n00:21:14,260 --> 00:21:18,811\nAnd in production a lot of times even\ntoday you're going to find 12.4,\n\n419\n00:21:18,811 --> 00:21:24,740\n15.0 still getting in with\nthe various enterprises out there.\n\n420\n00:21:24,740 --> 00:21:30,660\nBut I can see that the latest and\ngreatest advanced IP services right here,\n\n421\n00:21:30,660 --> 00:21:36,600\nis 15.1-4 right there waiting for\nme to download it, released September 20,\n\n422\n00:21:36,600 --> 00:21:40,620\n2013, which was, actually that was a while\nago, it was a couple of months ago.\n\n423\n00:21:40,620 --> 00:21:43,140\nI'm surprised there hasn't\nbeen a newer release.\n\n424\n00:21:43,140 --> 00:21:46,140\n>> So I should just go ahead and\njust jump on this for this router.\n\n425\n00:21:46,140 --> 00:21:46,960\n>> Absolutely, right?\n\n426\n00:21:46,960 --> 00:21:48,730\nWe should just download this and\nthrow it on there.\n\n427\n00:21:48,730 --> 00:21:51,060\nWell, I'm gonna have a problem.\n\n428\n00:21:51,060 --> 00:21:53,387\nCisco lists right here\nthe amount of RAM and\n\n429\n00:21:53,387 --> 00:21:56,242\nthe amount of [CROSSTALK] flash you need,\nall right.\n\n430\n00:21:56,242 --> 00:22:01,010\nAnd I guess it's kind of hard\nto see cuz it's so tiny.\n\n431\n00:22:01,010 --> 00:22:03,980\nBut this one is listed as 512/128.\n\n432\n00:22:03,980 --> 00:22:07,230\nYou need 512 megs of RAM and\n128 megs of flash.\n\n433\n00:22:07,230 --> 00:22:10,720\n>> Yeah, and that's not gonna work for us,\nsince we already saw in an earlier episode\n\n434\n00:22:10,720 --> 00:22:15,890\nthat about 256 megs of RAM and\nonly 64k of flash.\n\n435\n00:22:15,890 --> 00:22:16,870\n>> 64 megs.\n>> Oh, 64 megs.\n\n436\n00:22:16,870 --> 00:22:18,030\n64k, we'd be in real trouble.\n\n437\n00:22:18,030 --> 00:22:20,480\n>> Yeah, we'd be in real trouble.\n\n438\n00:22:20,480 --> 00:22:23,030\n>> Cuz 64 megs of\n>> Couldn't even get DOS 3.3\n\n439\n00:22:23,030 --> 00:22:23,605\non this thing.\n\n440\n00:22:23,605 --> 00:22:25,670\n[LAUGH]\n>> Gracious.\n\n441\n00:22:25,670 --> 00:22:28,850\nAbout that so we're going to have\nto find something that works.\n\n442\n00:22:28,850 --> 00:22:33,260\nNow if I do advanced IP services\nit's not going to happen right?\n\n443\n00:22:33,260 --> 00:22:36,590\nBut if I look at some of these other ones\nlike you'll see advanced security and\n\n444\n00:22:36,590 --> 00:22:37,720\nsome other ones.\n\n445\n00:22:37,720 --> 00:22:40,910\nIf I just went down to just IP based.\n\n446\n00:22:40,910 --> 00:22:42,370\nI'd be okay right.\n\n447\n00:22:42,370 --> 00:22:46,520\nI can run the latest and\ngreatest 15.1 with just IP base.\n\n448\n00:22:46,520 --> 00:22:49,830\nThat means I would lose some of\nthe things with advance IP service.\n\n449\n00:22:49,830 --> 00:22:53,360\nSo I'd lose some of the np lesser port and\nsome of the bgp stuff I'd lose that.\n\n450\n00:22:53,360 --> 00:22:58,960\nMaybe that's not a big deal to me\nif I don't need it what do I care?\n\n451\n00:22:58,960 --> 00:23:02,160\nBut, more than likely if I've got\nadvanced IP services on here I probably\n\n452\n00:23:02,160 --> 00:23:03,530\nbought that for a reason.\n\n453\n00:23:03,530 --> 00:23:06,020\nAnd so, I really, probably need it.\n\n454\n00:23:06,020 --> 00:23:07,720\nI'm not gonna be able to go to 15.1,\nall right.\n\n455\n00:23:07,720 --> 00:23:11,260\nAnd I probably won't even be\nable to go to 15.0 at all.\n\n456\n00:23:11,260 --> 00:23:15,050\nLet's look at 15.0 and\nfind advanced IP servers.\n\n457\n00:23:15,050 --> 00:23:19,010\nYeah, the 15.0 train, it's 512/128,\neven with the lowest version available.\n\n458\n00:23:19,010 --> 00:23:19,930\nAll right.\n\n459\n00:23:21,140 --> 00:23:24,290\nSo if I go back to the 12.4 train, though.\n\n460\n00:23:24,290 --> 00:23:29,210\nIf I go back to this one, and\nI find advanced IP services,\n\n461\n00:23:29,210 --> 00:23:34,380\nsure enough, 256 megs of RAM,\n64 megs of flash.\n\n462\n00:23:34,380 --> 00:23:39,080\nDefinitely fits on my router and\nupdated in September also.\n\n463\n00:23:39,080 --> 00:23:41,640\nSeptember of 2012 that's over a year ago.\n\n464\n00:23:41,640 --> 00:23:43,710\nSo that one hasn't been updated in awhile.\n\n465\n00:23:43,710 --> 00:23:44,829\nStill supported by Cisco.\n\n466\n00:23:44,829 --> 00:23:51,374\nApparently they haven't found any security\nflaws in it since then which is shocking.\n\n467\n00:23:51,374 --> 00:23:53,555\nSo, there it is.\nSo I can still run the 12 point four, but\n\n468\n00:23:53,555 --> 00:23:56,872\nif I wanna go to 15, I'm gonna have to\nbuy a memory upgrade kit for this router.\n\n469\n00:23:56,872 --> 00:23:57,372\n>> Mm-hm.\n\n470\n00:23:59,351 --> 00:24:00,790\n>> All right.\n\n471\n00:24:00,790 --> 00:24:02,520\nSo I need to find the right one.\n\n472\n00:24:02,520 --> 00:24:06,590\nAnd if you have a current\nmaintenance contract on a 2800.\n\n473\n00:24:06,590 --> 00:24:09,180\nYou can download any of these.\n\n474\n00:24:09,180 --> 00:24:12,360\nYou're licensed to run any,\nwell, let me clarify that.\n\n475\n00:24:12,360 --> 00:24:16,630\nYou're licensed to run any version\nas far as the version number, right?\n\n476\n00:24:16,630 --> 00:24:19,750\nSo we're licensed for\nadvanced IT services, so\n\n477\n00:24:19,750 --> 00:24:23,690\nI could run advanced IT services of\nany version number here on the left.\n\n478\n00:24:23,690 --> 00:24:24,570\nOkay.\n\n479\n00:24:24,570 --> 00:24:28,030\nI couldn't run Advanced Enterprises\nServices, I couldn't license that,\n\n480\n00:24:28,030 --> 00:24:29,080\nI didn't buy it.\n\n481\n00:24:29,080 --> 00:24:32,320\nSo you're not supposed to download\nsomething you didn't buy,\n\n482\n00:24:32,320 --> 00:24:34,410\nCisco does work on the honor system,\nright.\n\n483\n00:24:34,410 --> 00:24:38,630\nSo it's not actually going to stop me from\ndownloading it, but if they audit you and\n\n484\n00:24:38,630 --> 00:24:41,740\nfind you're running unlicensed software\nthen you get into big trouble.\n\n485\n00:24:41,740 --> 00:24:43,820\nNow see how every one of\nthese has a lock beside them?\n\n486\n00:24:43,820 --> 00:24:45,930\n>> Yeah.\n>> That's because I do need to be logged\n\n487\n00:24:45,930 --> 00:24:49,930\nin with a valid account with a maintenance\ncontract in order to do the download.\n\n488\n00:24:49,930 --> 00:24:52,610\nSo if I log in, let me do that real quick.\n\n489\n00:24:52,610 --> 00:24:55,930\nOh, I thought it would still have me\nlogged in from this morning, but it\n\n490\n00:24:55,930 --> 00:24:59,500\ndoesn't, and now I just have to remember\nmy password which is the hard part.\n\n491\n00:25:00,560 --> 00:25:01,950\nHow's that?\n\n492\n00:25:01,950 --> 00:25:03,170\nDid I get it right?\n\n493\n00:25:03,170 --> 00:25:03,720\nI did.\n\n494\n00:25:03,720 --> 00:25:07,840\nSo, when you're logged in with an account\nthat has an active maintenance contract,\n\n495\n00:25:07,840 --> 00:25:10,900\nyou'll see how all\nthe locks just disappeared.\n\n496\n00:25:10,900 --> 00:25:15,720\nAnd so now I can go in here and\nI can say 12.2 sub-release 25.\n\n497\n00:25:15,720 --> 00:25:17,930\nThat's the latest and greatest.\n\n498\n00:25:17,930 --> 00:25:21,410\nFor me that's gonna be running advanced IP\nServices that will fit on my router, and\n\n499\n00:25:21,410 --> 00:25:22,620\nI can go in and I can download it.\n\n500\n00:25:23,670 --> 00:25:25,887\nAnd we'll just accept\ntheir license agreement,\n\n501\n00:25:25,887 --> 00:25:27,793\nwhich is not really\nrendering well [LAUGH].\n\n502\n00:25:28,846 --> 00:25:31,750\nAnd then we can download it, eventually.\n\n503\n00:25:31,750 --> 00:25:32,250\nThere we go.\n\n504\n00:25:34,140 --> 00:25:36,133\nSave that to my desktop.\n\n505\n00:25:36,133 --> 00:25:39,660\nActually did I already download that one?\n\n506\n00:25:39,660 --> 00:25:42,155\n12 4,nope.\nLet me go ahead and download that one.\n\n507\n00:25:42,155 --> 00:25:45,220\nSo,I'm gonna download it,\nthere it is, download complete.\n\n508\n00:25:45,220 --> 00:25:47,540\nNow I've got it and\nI'm ready to apply it to the router.\n\n509\n00:25:47,540 --> 00:25:51,980\nIf I have 500 of these 2821s,\nI can use this one file, and\n\n510\n00:25:51,980 --> 00:25:53,190\nspread it across all of them.\n\n511\n00:25:53,190 --> 00:25:56,550\nBut I do need to be licensed on\nall 500 of them, so remember that.\n\n512\n00:25:56,550 --> 00:25:58,487\nYou know it is important to pay for\nthe licenses that you use.\n\n513\n00:26:01,467 --> 00:26:02,560\nAll right.\n\n514\n00:26:02,560 --> 00:26:03,940\nNow comes the easy part.\n\n515\n00:26:05,570 --> 00:26:10,240\nUnlike Windows or Linux or OS X,\nwhere the operating system is comprised of\n\n516\n00:26:10,240 --> 00:26:13,510\nmillions of individual files,\nright, I mean literally millions.\n\n517\n00:26:14,890 --> 00:26:19,930\nIn IOS, the entire operating system,\none file, yup.\n\n518\n00:26:19,930 --> 00:26:21,370\nThat makes life really easy.\n\n519\n00:26:21,370 --> 00:26:24,730\nSo I can see this one file right here and\nlet me just do that again.\n\n520\n00:26:24,730 --> 00:26:25,250\nThere we go.\n\n521\n00:26:25,250 --> 00:26:29,700\nSo this one file,\nthat's my entire IOS, all right?\n\n522\n00:26:29,700 --> 00:26:32,800\nIf I have enough memory in my system,\n\n523\n00:26:32,800 --> 00:26:35,190\nI can actually add more than\none IOS sitting right here.\n\n524\n00:26:35,190 --> 00:26:38,750\nI can have like an old version of Windows\nand a new version of Windows both sitting\n\n525\n00:26:38,750 --> 00:26:40,830\nright there and you can pick\nwhich one you want to boot from.\n\n526\n00:26:41,950 --> 00:26:44,870\nMy router though doesn't\nhave a ton of memory right?\n\n527\n00:26:44,870 --> 00:26:47,120\nSo, if I look at it.\n\n528\n00:26:47,120 --> 00:26:48,890\nI've got 64 megs of memory and\n\n529\n00:26:48,890 --> 00:26:53,830\nwith this current iOS loaded on there,\nI've only got 7 megs available.\n\n530\n00:26:53,830 --> 00:26:55,860\nI've only got 7 megs left.\n\n531\n00:26:55,860 --> 00:27:00,380\nSo, I don't have enough room to\nstore two different iOS files.\n\n532\n00:27:00,380 --> 00:27:03,150\nSo, if I'm gonna copy down a new one.\n\n533\n00:27:03,150 --> 00:27:04,120\nI'm gonna have to make room.\n\n534\n00:27:04,120 --> 00:27:06,290\nI'm gonna have to delete\nout what's already here and\n\n535\n00:27:06,290 --> 00:27:07,506\nthen copy down the new one.\n\n536\n00:27:07,506 --> 00:27:08,006\nAll right.\n\n537\n00:27:09,197 --> 00:27:11,620\nNow, here's the thing.\n\n538\n00:27:11,620 --> 00:27:13,680\nWhen you delete the old file.\n\n539\n00:27:13,680 --> 00:27:14,230\nRight.\n\n540\n00:27:14,230 --> 00:27:15,670\nLet's say you're doing this remotely.\n\n541\n00:27:15,670 --> 00:27:18,035\nLet's say, cuz I've done this.\n\n542\n00:27:18,035 --> 00:27:22,605\nLet's say this router is in Hawaii,\nand we're here in Florida, okay?\n\n543\n00:27:22,605 --> 00:27:26,033\nWell, I just deleted that\niOS file to make room.\n\n544\n00:27:26,033 --> 00:27:27,100\nAll right?\n\n545\n00:27:27,100 --> 00:27:30,045\nWhat happens if the router\nreboots right now.\n\n546\n00:27:30,045 --> 00:27:31,395\n>> It's gonna go in the wrong one.\n\n547\n00:27:31,395 --> 00:27:33,995\n>> It's gonna go in the wrong one,\nit's got no operating system anymore.\n\n548\n00:27:33,995 --> 00:27:37,170\nIf it reboots right now,\nwe're gonna be in big time trouble.\n\n549\n00:27:37,170 --> 00:27:40,600\nSo if you’re going to be remotely\nupgrading routers like this.\n\n550\n00:27:40,600 --> 00:27:43,820\nYou need to make sure they have\na enough flash in them to store\n\n551\n00:27:43,820 --> 00:27:48,160\ntwo operating systems, or\nyou have a extra flash card onsite that\n\n552\n00:27:48,160 --> 00:27:50,310\nsomebody can swap out in\nthe event the upgrade fails.\n\n553\n00:27:50,310 --> 00:27:53,950\nPlan for that with remote stuff\nyou don’t want to get locked out.\n\n554\n00:27:53,950 --> 00:27:57,080\n>> Although if it were in Hawaii,\nI wouldn’t mind going out there to fix it.\n\n555\n00:27:57,080 --> 00:28:00,340\nBut that’s something we\ndefinitely need to be aware of.\n\n556\n00:28:02,000 --> 00:28:03,360\nAll right.\n\n557\n00:28:03,360 --> 00:28:05,560\nIf you're local though,\nif something bad happened right now,\n\n558\n00:28:05,560 --> 00:28:07,470\nyou could hook up a console cable and\nfix it.\n\n559\n00:28:07,470 --> 00:28:10,890\nJust if it's remote, you'd rather\nhave enough room to store two IOSs.\n\n560\n00:28:11,950 --> 00:28:16,420\nNow all I have to do is reverse the copy\ncommand that we did from earlier.\n\n561\n00:28:16,420 --> 00:28:21,830\nI'm gonna say copy tftp:// and\nI'll specify my\n\n562\n00:28:21,830 --> 00:28:27,230\nlaptop slash and I need to do a file name,\nso let me find my file name here.\n\n563\n00:28:28,420 --> 00:28:31,550\nLet's go to one of these\n15s that I downloaded.\n\n564\n00:28:31,550 --> 00:28:33,010\nWhere's that IP base?\n\n565\n00:28:34,280 --> 00:28:35,070\nThere.\n\n566\n00:28:35,070 --> 00:28:36,260\nThis one will fit.\n\n567\n00:28:36,260 --> 00:28:40,030\nI downloaded this one before the show,\nthis is the IP base feature set.\n\n568\n00:28:40,030 --> 00:28:42,768\nThe one that will fit in\nthe amount of memory that we have.\n\n569\n00:28:42,768 --> 00:28:46,942\nAnd I'm gonna copy that to flash.\n\n570\n00:28:46,942 --> 00:28:48,070\nAll right.\n\n571\n00:28:48,070 --> 00:28:51,400\nSo I'm copying this file from\nmy TFPT server down to flash.\n\n572\n00:28:51,400 --> 00:28:55,760\nAnd we'll let that run and\nremember how long it took earlier.\n\n573\n00:28:55,760 --> 00:28:58,430\nWarning file not a valid executable for\nthis system.\n\n574\n00:28:58,430 --> 00:29:00,500\nWell, that's fun.\n\n575\n00:29:00,500 --> 00:29:01,070\nWhy not?\n\n576\n00:29:02,640 --> 00:29:06,380\n>> I don't know.\n\n577\n00:29:06,380 --> 00:29:06,880\n>> Okay.\n\n578\n00:29:08,210 --> 00:29:12,500\nIt says C2801, did I download\nthe 2801 instead of the 2821?\n\n579\n00:29:12,500 --> 00:29:13,760\n>> On the base you may have.\n\n580\n00:29:13,760 --> 00:29:17,110\n>> Apparently I didn't pay attention.\n\n581\n00:29:17,110 --> 00:29:19,260\nAll right, let me go back in here and\nre-download it.\n\n582\n00:29:19,260 --> 00:29:20,448\nSo, I'm gonna go to\n>> 15.\n\n583\n00:29:20,448 --> 00:29:25,950\n>> 15.1, we'll go with the latest and\ngreatest.\n\n584\n00:29:25,950 --> 00:29:27,400\nAnd see, this is where it's important.\n\n585\n00:29:27,400 --> 00:29:29,160\nYou got to make sure you\nhave your right file.\n\n586\n00:29:29,160 --> 00:29:32,000\nNow, the router checked for\nme, which is good.\n\n587\n00:29:32,000 --> 00:29:35,630\nSo, IP base,\nthose are kind of different file names.\n\n588\n00:29:35,630 --> 00:29:37,178\nC2800 instead of 2801, interesting.\n\n589\n00:29:37,178 --> 00:29:38,178\nAll right.\n\n590\n00:29:38,178 --> 00:29:41,583\n256, 64 megs a minute RAM so we're good\nthere, let me go and download that one.\n\n591\n00:29:45,410 --> 00:29:48,745\nAnd save it as,\n\n592\n00:29:48,745 --> 00:29:53,877\nsave it to my desktop and\n\n593\n00:29:53,877 --> 00:29:57,990\nwe'll try again.\n\n594\n00:29:57,990 --> 00:30:02,315\n[SOUND] There it goes, download complete,\nlet me just copy that file name.\n\n595\n00:30:02,315 --> 00:30:05,159\nAnd, second time is a charm, right?\n\n596\n00:30:05,159 --> 00:30:08,666\nSo, let's get back there and\ntry that again.\n\n597\n00:30:14,716 --> 00:30:16,120\nAll right.\n\n598\n00:30:16,120 --> 00:30:17,150\n>> There we go.\n\n599\n00:30:17,150 --> 00:30:18,170\n>> So now it's going to reach out.\n\n600\n00:30:18,170 --> 00:30:20,650\nIt didn't complain this time so\nit was happy there.\n\n601\n00:30:20,650 --> 00:30:23,670\nIt is offering to erase\nmy flash before copying.\n\n602\n00:30:23,670 --> 00:30:25,890\nIt knows that I may need more room.\n\n603\n00:30:25,890 --> 00:30:28,690\nIf you've got other things in flash that\nyou don't want to get rid of that might be\n\n604\n00:30:28,690 --> 00:30:29,190\na bad idea.\n\n605\n00:30:29,190 --> 00:30:30,850\nI've already made room,\nbut I'll go ahead and\n\n606\n00:30:30,850 --> 00:30:34,690\nsay yes here to let it I'll\nremove everything in flash.\n\n607\n00:30:34,690 --> 00:30:38,820\nAnd there it goes, you'll see these e's,\nthat's it erasing the flash.\n\n608\n00:30:38,820 --> 00:30:41,900\nAnd then once that's done,\nyou'll start to see exclamation points,\n\n609\n00:30:41,900 --> 00:30:48,250\nas it copies down this new\nIOS file into my router.\n\n610\n00:30:48,250 --> 00:30:53,000\nSo that's gonna happen here shortly,\nand I was gonna try and\n\n611\n00:30:53,000 --> 00:30:55,330\nresize the screen so\nit would fit without being covered up.\n\n612\n00:30:55,330 --> 00:30:57,460\n>> Now Don, while this is happening,\nthis is a good time for\n\n613\n00:30:57,460 --> 00:31:02,820\nus to talk about, what happens if I\ndo get two IOS files onto the flash?\n\n614\n00:31:03,860 --> 00:31:05,190\nWhat if I put both of them on?\n\n615\n00:31:05,190 --> 00:31:08,980\nHow do I tell it to pick the new\none instead of the old one.\n\n616\n00:31:08,980 --> 00:31:12,270\nSo that the default is that it's just\ngoing to grab the first one it finds.\n\n617\n00:31:12,270 --> 00:31:14,940\nDo I still have it on\nscreen here when I did.\n\n618\n00:31:14,940 --> 00:31:15,915\nI'm not gonna be able to do it.\n\n619\n00:31:15,915 --> 00:31:17,120\n[LAUGH] When you do a DIR and\n\n620\n00:31:17,120 --> 00:31:21,070\nyou pull up the directory of commands on\na Cisco router, every file has a number.\n\n621\n00:31:21,070 --> 00:31:23,110\nThey're numbered by\nwhen they were created.\n\n622\n00:31:23,110 --> 00:31:25,000\nSo they're kind of sorted by that.\n\n623\n00:31:25,000 --> 00:31:27,670\nAnd when you boot up it just\ngrabs the first one it finds.\n\n624\n00:31:27,670 --> 00:31:30,470\nSo that first one might be the older\none instead of the newer one.\n\n625\n00:31:30,470 --> 00:31:33,520\nSo we do have a series of commands\nthat we can use for that.\n\n626\n00:31:33,520 --> 00:31:35,160\nAnd we'll take a look at\nthem once this is done.\n\n627\n00:31:35,160 --> 00:31:36,500\nAnd this is going to take a little while,\nthough.\n\n628\n00:31:36,500 --> 00:31:38,630\nAnd looking at the clock,\nwe're at our break point anyway,\n\n629\n00:31:38,630 --> 00:31:40,250\nso\n>> Why don't we do this,\n\n630\n00:31:40,250 --> 00:31:42,060\nwhy don't we stop and\ntake a break while this copies.\n\n631\n00:31:42,060 --> 00:31:44,852\nIt's just going to be exclamation\npoints scrolling across the screen for\n\n632\n00:31:44,852 --> 00:31:45,444\nhowever long.\n\n633\n00:31:45,444 --> 00:31:48,632\nAnd when we get back we'll finish\nthe upgrade, and then I'll show you what\n\n634\n00:31:48,632 --> 00:31:51,533\nRonnie was asking about,\nhow we can manipulate that boot process.\n\n635\n00:31:51,533 --> 00:31:52,595\n>> Yeah, sounds good.\n\n636\n00:31:52,595 --> 00:31:55,364\n>> All right, ladies and gentlemen,\nstay tuned when we get back.\n\n637\n00:31:55,364 --> 00:31:56,606\nWe'll finish our upgrade and\ngo from there.\n\n638\n00:31:56,606 --> 00:32:02,020\nSee you in a minute.\n\n639\n00:32:05,590 --> 00:32:07,630\nAlright welcome back everybody.\n\n640\n00:32:07,630 --> 00:32:10,650\nSo, during the break the router\nwas ind of turning along and\n\n641\n00:32:10,650 --> 00:32:14,702\nit's finished downloading that iOS file,\nso let's jump back over to this guy here.\n\n642\n00:32:14,702 --> 00:32:16,700\nAll right, so\nlet's jump over to my system and\n\n643\n00:32:16,700 --> 00:32:18,670\nwe'll see that router\nkind of turning along.\n\n644\n00:32:18,670 --> 00:32:22,320\nIt erased the flash,\nthat's what all these Es are, and\n\n645\n00:32:22,320 --> 00:32:24,670\nsee how it ends there in erased, right?\n\n646\n00:32:24,670 --> 00:32:29,402\nAnd then after that, it copied down that\niOS file, and it took it a little while.\n\n647\n00:32:29,402 --> 00:32:32,790\nI mean, we took like a ten minute break\nthere, so it took a little while.\n\n648\n00:32:32,790 --> 00:32:33,910\nOnce it copied it down,\n\n649\n00:32:33,910 --> 00:32:39,020\nit still verified the checks to make sure\nthe file didn't get corrupted in transit,\n\n650\n00:32:39,020 --> 00:32:42,920\nand then it finally copied it and\nit was finished, okay?\n\n651\n00:32:42,920 --> 00:32:45,970\n>> You can see where it took\na little bit over 11 minutes.\n\n652\n00:32:45,970 --> 00:32:47,260\n>> Does it say the time on there?\n\n653\n00:32:47,260 --> 00:32:49,910\n>> Yes, 671 seconds well look at that.\n\n654\n00:32:49,910 --> 00:32:54,400\nSo, it took a while so\nwhen it's done am I upgraded?\n\n655\n00:32:54,400 --> 00:32:58,080\nNo, right technically the iOS\nfile has been downloaded but\n\n656\n00:32:58,080 --> 00:33:01,492\nI got to reboot,\nto actually get it to go the other way.\n\n657\n00:33:01,492 --> 00:33:04,050\nAll right, so when we reboot a router,\n\n658\n00:33:04,050 --> 00:33:08,060\nduring that boot process it's just\nlooking for the first iOS it can find.\n\n659\n00:33:08,060 --> 00:33:11,250\nThat's why all the files have\na number attached to them,\n\n660\n00:33:11,250 --> 00:33:14,080\nit's the file in the order\nin which they were copied.\n\n661\n00:33:14,080 --> 00:33:16,570\nSo if you have five different\niOS files on there, right,\n\n662\n00:33:16,570 --> 00:33:19,890\nthen instead of just seeing a number\none on here, I'm right now,\n\n663\n00:33:19,890 --> 00:33:23,890\nyou'd see numbers two, three, four and\nso on for each one that you copied down.\n\n664\n00:33:23,890 --> 00:33:25,615\nAnd it's just looking for\nthe lowest number, right?\n\n665\n00:33:25,615 --> 00:33:28,810\n>> Mm-hm.\n>> We can influence that with the boot\n\n666\n00:33:28,810 --> 00:33:30,270\ncommand, if we want to, right?\n\n667\n00:33:30,270 --> 00:33:34,720\nAnd that's what Ronnie was talking about\nbefore the break is, that you have these\n\n668\n00:33:34,720 --> 00:33:40,540\nboot commands, where you can specify what\nsystem image file to use when it boots up.\n\n669\n00:33:40,540 --> 00:33:42,800\nAnd the commands are fairly\nstraight forward.\n\n670\n00:33:42,800 --> 00:33:44,650\nYour just specifying, for example,\n\n671\n00:33:44,650 --> 00:33:49,215\nto boot from flash and of course it's not\ngonna do auto type for me here, is it?\n\n672\n00:33:49,215 --> 00:33:50,980\n>> [LAUGH]\n>> Like tab auto complete.\n\n673\n00:33:50,980 --> 00:33:59,140\nSo, let me do a, one of these so\nI can copy and past.\n\n674\n00:33:59,140 --> 00:34:00,010\nWord wrap's gonna get me.\n\n675\n00:34:01,210 --> 00:34:01,850\nLet's try that again.\n\n676\n00:34:03,372 --> 00:34:11,140\nAll right, so I'll just copy that, and so\nwhat I'll do, is I'll say boot system.\n\n677\n00:34:11,140 --> 00:34:13,630\nAnd I'll throw that in there, right?\n\n678\n00:34:13,630 --> 00:34:18,270\nAnd now, when I take a look at my running\nconfiguration, right here at the beginning\n\n679\n00:34:18,270 --> 00:34:22,080\nI've got my boot start marker,\nand my boot end marker, and\n\n680\n00:34:22,080 --> 00:34:26,160\nthe iOS files that are in there will be\nbooted up in the order they're specified.\n\n681\n00:34:26,160 --> 00:34:27,040\nYou know what?\n\n682\n00:34:27,040 --> 00:34:28,400\n>> You did it to the TFTP server.\n\n683\n00:34:28,400 --> 00:34:30,160\n>> I didn't specify flash did I?\n\n684\n00:34:30,160 --> 00:34:33,550\nSo, now it's going to boot from TFTP.\n\n685\n00:34:33,550 --> 00:34:35,420\nNow that's actually a good point.\n\n686\n00:34:35,420 --> 00:34:40,600\nEven though we wanna correct this,\nyou can in theory boot from a TFTP server.\n\n687\n00:34:40,600 --> 00:34:43,987\nBut, more than likely under\nproduction you're not gonna do that.\n\n688\n00:34:43,987 --> 00:34:46,088\nSo on testing yourself you might do this..\n\n689\n00:34:46,088 --> 00:34:48,608\nBut normally, you're gonna actually\ngo out and copy it to flash.\n\n690\n00:34:48,608 --> 00:34:49,637\n>> [LAUGH]\n>> And so\n\n691\n00:34:49,637 --> 00:34:51,486\nhere in the boot system we go to flash.\n\n692\n00:34:51,486 --> 00:34:54,784\n>> Well,\nI accidentally copied the wrong thing.\n\n693\n00:34:54,784 --> 00:35:00,623\n>> [LAUGH] I thought only\nI did stuff like that.\n\n694\n00:35:00,623 --> 00:35:02,886\n>> I know,\nthis is not my typing day, is it?\n\n695\n00:35:02,886 --> 00:35:04,082\nThere we go.\n\n696\n00:35:04,082 --> 00:35:07,700\nAll right, so now if I take a look at it,\nI've got where boot system flash.\n\n697\n00:35:07,700 --> 00:35:12,340\nAnd so as a back-up I can say, for\nexample, if this file was corrupted or\n\n698\n00:35:12,340 --> 00:35:13,210\nwhatever?\n\n699\n00:35:13,210 --> 00:35:18,530\nI could say boot tftp:// and point it\nto my laptop and try and boot that way.\n\n700\n00:35:18,530 --> 00:35:20,510\nAnd that would be good, right?\n\n701\n00:35:20,510 --> 00:35:23,420\nIn the event that this one was corrupted,\nit would now have a backup or,\n\n702\n00:35:23,420 --> 00:35:26,270\nif I have more than one version,\nI have a new version.\n\n703\n00:35:26,270 --> 00:35:28,200\nMy old one, I can put the old one second.\n\n704\n00:35:28,200 --> 00:35:30,870\nAnd that way, if the new one was corrupt,\nwhen it rebooted,\n\n705\n00:35:30,870 --> 00:35:32,100\nit would flip back to the old one.\n\n706\n00:35:32,100 --> 00:35:35,780\nSo, this little boot\ncommand is kinda handy.\n\n707\n00:35:35,780 --> 00:35:37,410\nOlder iOSs don't have that.\n\n708\n00:35:37,410 --> 00:35:41,840\nWhat was that like 12.2 or\nsomething was introduced.\n\n709\n00:35:41,840 --> 00:35:44,510\nNot too long ago.\n\n710\n00:35:44,510 --> 00:35:48,252\nAll right, so I'm gonna go ahead and\n\n711\n00:35:48,252 --> 00:35:53,570\nsave my config, and\nthen I'll reboot this router.\n\n712\n00:35:53,570 --> 00:35:58,443\nNow when I reboot, it was still\nrunning off of 12.4 right there,\n\n713\n00:35:58,443 --> 00:36:01,550\ncuz I never rebooted after\ncopying that new file.\n\n714\n00:36:01,550 --> 00:36:03,540\nSo now, I'm gonna reload.\n\n715\n00:36:03,540 --> 00:36:04,280\nIt's gonna boot up.\n\n716\n00:36:04,280 --> 00:36:06,290\nAnd let me resize this window.\n\n717\n00:36:07,390 --> 00:36:09,191\nSo it's gonna reload, and\n\n718\n00:36:09,191 --> 00:36:14,530\nafter it's done it's gonna load that\nnice new 15.1 iOS that we copied over.\n\n719\n00:36:17,750 --> 00:36:23,380\nFile slash C 2800 IP base\ncanine MZ not found, all right?\n\n720\n00:36:23,380 --> 00:36:24,910\nSo, it's got an issue.\n\n721\n00:36:24,910 --> 00:36:27,540\nIt wasn't able to find the file which\nmeans I probably made some kind of\n\n722\n00:36:27,540 --> 00:36:28,530\nfound a typo.\n\n723\n00:36:28,530 --> 00:36:31,400\nSo, cannot load flash colon.\n\n724\n00:36:31,400 --> 00:36:34,648\nI put the slash notation there,\nand it probably doesn't need it.\n\n725\n00:36:34,648 --> 00:36:35,426\nWe'll see.\n\n726\n00:36:35,426 --> 00:36:38,199\n>> Yeah.\n>> So one of two things is gonna happen\n\n727\n00:36:38,199 --> 00:36:39,050\nright now.\n\n728\n00:36:39,050 --> 00:36:42,490\nI may have entered in\na typo in the file name, so\n\n729\n00:36:42,490 --> 00:36:44,050\nit's either gonna do one of two things.\n\n730\n00:36:44,050 --> 00:36:48,370\nOne, it's gonna drop to ROM mode\nif it's completely confused.\n\n731\n00:36:48,370 --> 00:36:51,090\nOr two, it's just gonna boot\nthe first file it finds.\n\n732\n00:36:51,090 --> 00:36:53,300\nIn the end is the one\nthat I wanted anyway.\n\n733\n00:36:53,300 --> 00:36:55,300\nSo, we will just wait and see.\n\n734\n00:36:55,300 --> 00:37:01,400\nWe will wait impatiently to see,\nwhich destiny it's gonna fulfill for us.\n\n735\n00:37:01,400 --> 00:37:02,610\nNow, once it comes up.\n\n736\n00:37:02,610 --> 00:37:05,710\nIf it's ROM monitor mode,\nI can fix it a few different ways.\n\n737\n00:37:05,710 --> 00:37:10,850\nIf it actually boots the iOS then I have\nto go in and correct the boot problem.\n\n738\n00:37:10,850 --> 00:37:12,450\nSo, that's probably the easiest way.\n\n739\n00:37:14,250 --> 00:37:16,080\nLook I found it.\n\n740\n00:37:16,080 --> 00:37:19,230\nI have a typo, so I'll go in and fix that.\n\n741\n00:37:19,230 --> 00:37:22,910\nThe flash colon,\nthat's actually referencing a drive.\n\n742\n00:37:22,910 --> 00:37:26,150\nIn any Windows you might have C colon,\nor D colon, or whatever.\n\n743\n00:37:26,150 --> 00:37:29,490\nAnd then slash indicates the root folder,\nand\n\n744\n00:37:29,490 --> 00:37:33,580\nbecause this file is in the root,\nit probably just didn't need that slash.\n\n745\n00:37:33,580 --> 00:37:38,420\nSo we'll see after it comes back on,\nbut it's booting up, and\n\n746\n00:37:38,420 --> 00:37:44,410\nthis time when it boots up, notice\nright here, Version 15.1 subrelease 4.\n\n747\n00:37:44,410 --> 00:37:48,510\nNow, I'm on that newer iOS, so just\ncopying it to the router isn't enough.\n\n748\n00:37:48,510 --> 00:37:49,690\nYou have to reboot.\n\n749\n00:37:49,690 --> 00:37:54,195\nNow that means, upgrading your router,\nis going to require some downtime.\n\n750\n00:37:54,195 --> 00:37:54,850\n>> Yeah.\n\n751\n00:37:54,850 --> 00:37:56,870\n>> No way around it\nunless you got clusters,\n\n752\n00:37:56,870 --> 00:37:58,120\nit's gonna require some downtime.\n\n753\n00:37:58,120 --> 00:38:01,770\n>> We got a good question\nfrom our chat room Don,\n\n754\n00:38:01,770 --> 00:38:04,100\nthat somebody actually just asked.\n\n755\n00:38:04,100 --> 00:38:08,250\nI noticed that you had used reload here\nand reset earlier, what is the difference?\n\n756\n00:38:08,250 --> 00:38:10,400\n>> Yeah, so\n>> I think I've used both.\n\n757\n00:38:10,400 --> 00:38:12,530\nNo, I think I used one in the last\nepisode and one in this episode.\n\n758\n00:38:12,530 --> 00:38:17,122\nSo, reload is the normal command on\nan operating Cisco router rebooted,\n\n759\n00:38:17,122 --> 00:38:17,910\nall right?\n\n760\n00:38:17,910 --> 00:38:21,460\nSo, what you just saw me do a minute\nago was a normally running router?\n\n761\n00:38:21,460 --> 00:38:23,390\nI issued reload and it rebooted.\n\n762\n00:38:23,390 --> 00:38:25,360\nSo, that's our normal command.\n\n763\n00:38:25,360 --> 00:38:27,620\nReset that's in ROM monitor.\n\n764\n00:38:27,620 --> 00:38:31,420\nWhen you're in the ROM on mode, you don't\nhave a reload command, you have a reset.\n\n765\n00:38:31,420 --> 00:38:32,570\nIn the last episode,\n\n766\n00:38:32,570 --> 00:38:36,460\nwhen I was in ROM mode, I used that\nreset command, so that's the difference.\n\n767\n00:38:36,460 --> 00:38:40,318\nI'm pretty certain, and we'll find out\nhere in a moment, but reset doesn't\n\n768\n00:38:40,318 --> 00:38:44,424\nwork when you're in the full iOS, but we\ncan find out whenever it's done booting.\n\n769\n00:38:46,863 --> 00:38:47,990\nAll right.\n\n770\n00:38:47,990 --> 00:38:52,860\nSo, I'm on my newer iOS and there's\nsome commands that aren't compatible.\n\n771\n00:38:52,860 --> 00:38:55,300\nSo, this is a common\nthing when you upgrade,\n\n772\n00:38:55,300 --> 00:38:58,500\nsome of the stuff in your configuration\nbefore may no longer function.\n\n773\n00:38:58,500 --> 00:39:01,250\nThese might be features that I lost,\ncuz remember I.\n\n774\n00:39:01,250 --> 00:39:02,780\nNot only do I want to\nupgrade to a new version,\n\n775\n00:39:02,780 --> 00:39:07,240\nbut I also went from advanced\nIP services down to IP base.\n\n776\n00:39:07,240 --> 00:39:11,050\nSo, there may be several commands that\nwere put in that no longer function.\n\n777\n00:39:11,050 --> 00:39:13,010\nSo I'm gonna need to double check that.\n\n778\n00:39:13,010 --> 00:39:16,530\nBut before I do that let\nme just go in here, and\n\n779\n00:39:16,530 --> 00:39:19,300\nsee if we have the reset, yeah so we\ndidn't even have the reset command here.\n\n780\n00:39:19,300 --> 00:39:19,800\nHere.\n>> Yep.\n\n781\n00:39:19,800 --> 00:39:23,030\n>> So that's just in RAM mode.\n\n782\n00:39:23,030 --> 00:39:24,540\nLet's take a look at\nsome of these commands.\n\n783\n00:39:24,540 --> 00:39:27,880\nI'm gonna back scroll up here, and\nwhat I normally do in the field when this\n\n784\n00:39:27,880 --> 00:39:31,420\nhappens, well, first off, you test it in a\nlab before you roll it out in production.\n\n785\n00:39:31,420 --> 00:39:32,700\nThat's step one.\n\n786\n00:39:32,700 --> 00:39:34,260\nStep two, I like to go through and\n\n787\n00:39:34,260 --> 00:39:38,740\njust copy all of these things, well,\nI got a little too much there.\n\n788\n00:39:38,740 --> 00:39:41,920\nBut, I like to copy them all and\n\n789\n00:39:41,920 --> 00:39:45,130\nthen paste them into a notepad file,\nso I can go down and\n\n790\n00:39:45,130 --> 00:39:48,510\nkind of break them down one-by-one and\nkind of isolate what's going on.\n\n791\n00:39:48,510 --> 00:39:52,190\nSo the first, when you ever get\na warning MD5 will be deprecated soon.\n\n792\n00:39:52,190 --> 00:39:53,729\nPlease move to SHA256 encryption.\n\n793\n00:39:53,729 --> 00:39:57,592\nThere have been some well televised,\nor media covered, or\n\n794\n00:39:57,592 --> 00:40:01,084\nwhatever MD5 collision\nattacks that are out there.\n\n795\n00:40:01,084 --> 00:40:05,669\nAnd so, while it's still secure today,\nit's not gonna be secure for much longer.\n\n796\n00:40:05,669 --> 00:40:08,740\nIts time is ticking.\n\n797\n00:40:08,740 --> 00:40:11,300\nSame thing with SHA 1, SHA 2, and SHA 3.\n\n798\n00:40:11,300 --> 00:40:13,590\nAll three of those,\nhave been shown to be weak.\n\n799\n00:40:13,590 --> 00:40:17,152\nSHA 4 is still secure, so\nthey're recommending shot 256.\n\n800\n00:40:17,152 --> 00:40:18,640\nWhy screw around with the lower end stuff?\n\n801\n00:40:18,640 --> 00:40:21,285\n>> [LAUGH]\n>> My new feature set,\n\n802\n00:40:21,285 --> 00:40:26,015\napparently doesn't support IPv6, so\nI'm now on an IPv4 only feature set.\n\n803\n00:40:26,015 --> 00:40:28,010\nNot much, I can do about that here.\n\n804\n00:40:28,010 --> 00:40:29,720\nMy new-\n>> Postcard!\n\n805\n00:40:29,720 --> 00:40:31,560\n>> Yup, this one doesn't support a voice.\n\n806\n00:40:31,560 --> 00:40:33,765\nSo, now I've got a card,\nthat can't be used.\n\n807\n00:40:33,765 --> 00:40:35,110\n>> [LAUGH].\n\n808\n00:40:35,110 --> 00:40:37,750\nAlright, so I do see some warnings\nin there, about the voice card.\n\n809\n00:40:37,750 --> 00:40:39,870\n>> Oh, look at fax manager protocol.\n\n810\n00:40:39,870 --> 00:40:43,506\n>> Yeah, this one, t38 fax, that's where\nwe get a fax on an analog line, and then,\n\n811\n00:40:43,506 --> 00:40:46,785\nit converts it to digital, send it to\nsomebody's mailbox, and of course,\n\n812\n00:40:46,785 --> 00:40:49,485\nif I don't have the voice feature set,\nI'm gonna lose that.\n\n813\n00:40:49,485 --> 00:40:51,670\nAnd my voice code there.\n\n814\n00:40:51,670 --> 00:40:53,890\nSo these are my big warnings.\n\n815\n00:40:53,890 --> 00:41:00,700\nBy going from advanced IP to regular IP,\nI lost IPv6, and I lost voice.\n\n816\n00:41:00,700 --> 00:41:05,370\nBut, it warned me,\nthat MD5 is still supported,\n\n817\n00:41:05,370 --> 00:41:09,590\nbut you should switch shop, cause it's\nhere, it's better, you wanna get on that.\n\n818\n00:41:09,590 --> 00:41:11,170\nSo there's my mount marks.\n\n819\n00:41:12,400 --> 00:41:13,230\n>> You know, the key is,\n\n820\n00:41:13,230 --> 00:41:17,470\nfor us to be able to identify things,\nthat we cannot do without.\n\n821\n00:41:17,470 --> 00:41:22,300\nSo even if I wanted to go to the newer\nversion, but I notice something, that my\n\n822\n00:41:22,300 --> 00:41:26,670\nlast version gave me all the features that\nI need, this newer version doesn't do\n\n823\n00:41:26,670 --> 00:41:30,990\nthat, it may mean, that I have to go\nahead, and go back to that older version.\n\n824\n00:41:30,990 --> 00:41:33,070\nOr earlier version, I should say.\n\n825\n00:41:33,070 --> 00:41:34,280\nOlder, I guess.\n\n826\n00:41:34,280 --> 00:41:36,190\n>> And just remember that,\nyou know, for the major and\n\n827\n00:41:36,190 --> 00:41:38,920\nminor versions,\nunless there's some feature you need,\n\n828\n00:41:38,920 --> 00:41:42,090\nthere's not really a driving factor\nto upgrade them, but the sub one.\n\n829\n00:41:42,090 --> 00:41:46,732\nSo if you have 12.4, that's fine,\nbut then if there's 12.4 release 22,\n\n830\n00:41:46,732 --> 00:41:49,959\nrelease 23, release 24,\nthose are the ones you want.\n\n831\n00:41:49,959 --> 00:41:54,287\nI'm now in 15.1, I could stay on 15.1,\nfor the life of this router.\n\n832\n00:41:54,287 --> 00:41:57,820\nBut if a 15.1.2 comes out, and\nI didn't even look on this one.\n\n833\n00:41:57,820 --> 00:42:04,035\nThis is 15.14, so if a 15.15 comes out,\nI want to go to that.\n\n834\n00:42:04,035 --> 00:42:06,835\nI wanna get to that, as soon as I can,\ncause it's got some kinda bug fix or\n\n835\n00:42:06,835 --> 00:42:09,005\nsecurity patch,\nthat I need for this router.\n\n836\n00:42:10,575 --> 00:42:12,895\nAll right, so I am up,\nI'm running, I'm happy.\n\n837\n00:42:12,895 --> 00:42:17,355\nIf I do a show version,\nI'll see it in here.\n\n838\n00:42:17,355 --> 00:42:21,168\nThat if I look, my IOS version is 15.1.\n\n839\n00:42:21,168 --> 00:42:23,620\nNotice my system bootstrap.\n\n840\n00:42:23,620 --> 00:42:26,660\nIn the last episode, I mentioned you\ncan't upgrade that, it's still 12.4, but\n\n841\n00:42:26,660 --> 00:42:28,370\nI don't care about that.\n\n842\n00:42:28,370 --> 00:42:33,537\nCuz, that's just the initial boot,\nand now my iOS is 15.1.\n\n843\n00:42:35,884 --> 00:42:38,785\nAll right, and the voice card,\ndoesn't even show up in there,\n\n844\n00:42:38,785 --> 00:42:41,280\nthe cellular card does, but\nthe voice card doesn't.\n\n845\n00:42:42,480 --> 00:42:43,590\nSo.\n\n846\n00:42:43,590 --> 00:42:46,796\n>> Oh good, I can see some of\nthe other information [CROSSTALK]\n\n847\n00:42:46,796 --> 00:42:48,180\n>> Licensing stuff, yeah.\n\n848\n00:42:48,180 --> 00:42:51,230\nYou're not gonna see much licensing\non this one, because it's IP based.\n\n849\n00:42:51,230 --> 00:42:53,332\nAnd IP base is technically free.\n\n850\n00:42:53,332 --> 00:42:57,300\nYou do to have a maintenance contract,\nto keep it updated.\n\n851\n00:42:57,300 --> 00:43:00,830\nBut, the base license itself, is just\nwhat comes with every Cisco router.\n\n852\n00:43:00,830 --> 00:43:04,489\nIf I wanted to go to advanced IP services,\nI would have to have a valid license.\n\n853\n00:43:06,530 --> 00:43:08,260\nLet's hold off, on licensing,\nuntil after the break,\n\n854\n00:43:08,260 --> 00:43:10,780\nbecause that one can actually\ntake a while to talk about.\n\n855\n00:43:10,780 --> 00:43:11,905\nIt shouldn't, but it does.\n\n856\n00:43:11,905 --> 00:43:14,980\n>> [LAUGH].\n>> They've got to make their money!\n\n857\n00:43:14,980 --> 00:43:17,970\nSo we've loaded a new iOS on here,\nwe've upgraded.\n\n858\n00:43:17,970 --> 00:43:20,660\nLet's say there was a problem,\nthere was a showstopper here.\n\n859\n00:43:20,660 --> 00:43:23,010\nSomething just broke, didn't work.\n\n860\n00:43:23,010 --> 00:43:26,260\nWell, you downgrade,\nthe same way, you upgrade.\n\n861\n00:43:26,260 --> 00:43:31,120\nI could delete this iOS file, copy the old\none back to it, and then reboot again,\n\n862\n00:43:31,120 --> 00:43:32,800\nand now I've downgraded.\n\n863\n00:43:32,800 --> 00:43:37,180\nOr if I had enough memory, I could use\nboot commands, to say instead of booting\n\n864\n00:43:37,180 --> 00:43:40,550\nthis one, boot the other one, and then you\ncan reboot, and you're in business there.\n\n865\n00:43:40,550 --> 00:43:44,710\nSo, that makes it a lot easier to deal\nwith, than having to recopy files.\n\n866\n00:43:44,710 --> 00:43:45,340\n>> Yeah.\n\n867\n00:43:45,340 --> 00:43:52,430\nAnd on the exam itself, paying attention\nto boot commands, are really important.\n\n868\n00:43:52,430 --> 00:43:56,320\nIf they do tell you, that you've got two\nor three different operating systems,\n\n869\n00:43:56,320 --> 00:43:59,760\ncopied in the flash, and they tell you,\nthat you want to put them\n\n870\n00:43:59,760 --> 00:44:03,770\ninto a thicker order, and they tell you,\nthat you want number three to go first.\n\n871\n00:44:03,770 --> 00:44:07,750\nMake sure you do pay attention to that\nboot command, very essential for us.\n\n872\n00:44:07,750 --> 00:44:08,976\nAll the other things,\nwe've been talking about,\n\n873\n00:44:08,976 --> 00:44:11,940\ndon't get me wrong, just as essential,\nbut that's an easy one to forget.\n\n874\n00:44:11,940 --> 00:44:14,440\nSo make sure, you do pay attention\nto that boot command, right there.\n\n875\n00:44:14,440 --> 00:44:15,300\n>> Here we go.\n\n876\n00:44:15,300 --> 00:44:19,295\nAll right.\nSo I put in the full file name,\n\n877\n00:44:19,295 --> 00:44:20,660\nflash colon slash, blah blah blah.\n\n878\n00:44:20,660 --> 00:44:22,190\nAnd that's not, what it wanted.\n\n879\n00:44:22,190 --> 00:44:25,700\nFlash is actually a keyword for\nthe command, not a directory.\n\n880\n00:44:25,700 --> 00:44:27,850\nAnd then, they just want\nthe raw file name like that.\n\n881\n00:44:27,850 --> 00:44:28,953\nSo, that's what my problem was.\n\n882\n00:44:28,953 --> 00:44:30,180\n>> There you go.\n\n883\n00:44:30,180 --> 00:44:31,760\n>> And, I keep doing this.\n\n884\n00:44:33,240 --> 00:44:36,168\nI'm used to issuing the right command,\nand see how it is kinda warning,\n\n885\n00:44:36,168 --> 00:44:38,610\nwell it's warning about\nthe iOS change there.\n\n886\n00:44:38,610 --> 00:44:41,770\nIt's a new iOS, so\nsome of the old commands aren't supported.\n\n887\n00:44:41,770 --> 00:44:43,020\nThey're gonna get pruned out.\n\n888\n00:44:43,020 --> 00:44:44,990\nI'll say yes to that.\n\n889\n00:44:46,210 --> 00:44:47,570\nSo we'll save.\n\n890\n00:44:47,570 --> 00:44:49,420\nIf I reload this time.\n\n891\n00:44:49,420 --> 00:44:51,110\nThis time, we'll give a reload.\n\n892\n00:44:51,110 --> 00:44:54,230\nThis time, when it boots up,\nit shouldn't get all angry with me.\n\n893\n00:44:54,230 --> 00:44:58,670\nIt should be happy,\nas happy as routers get, and boot up, and\n\n894\n00:44:58,670 --> 00:45:01,290\nsee that file, and go from there.\n\n895\n00:45:01,290 --> 00:45:02,030\nAll right.\n\n896\n00:45:02,030 --> 00:45:05,730\nNow, in this router,\nthis is kind of our lab router.\n\n897\n00:45:05,730 --> 00:45:06,570\nIt's sitting behind us.\n\n898\n00:45:06,570 --> 00:45:08,520\nWe can do whatever we want to it,\nit doesn't matter.\n\n899\n00:45:08,520 --> 00:45:13,410\nIn the field, you will typically order\nrouters, that have enough memory in them,\n\n900\n00:45:13,410 --> 00:45:18,750\nto be able to support multiple arouses,\nor when an upgrade like this happens,\n\n901\n00:45:18,750 --> 00:45:22,490\ninstead of doing it over the network, like\nwe're doing, just send out flash cards,\n\n902\n00:45:22,490 --> 00:45:24,590\nyou know,\nthe compact flash cards should swap it,\n\n903\n00:45:24,590 --> 00:45:27,860\nand that way,\nthere is no risk of having a rebooter or\n\n904\n00:45:27,860 --> 00:45:31,950\nwhatever, during the upgrade, and\nbasically rendering that router offline.\n\n905\n00:45:31,950 --> 00:45:32,945\nThat would be a problem.\n\n906\n00:45:32,945 --> 00:45:35,040\n>> Yep.\n\n907\n00:45:35,040 --> 00:45:35,660\n>> Alright.\n\n908\n00:45:35,660 --> 00:45:38,340\nSo here goes booting, and\nnotice that I didn't get that complaint,\n\n909\n00:45:38,340 --> 00:45:40,160\nabout not finding the OS this time.\n\n910\n00:45:41,300 --> 00:45:41,920\nThere it goes.\n\n911\n00:45:41,920 --> 00:45:43,510\nIt's happy, and\nit's using that boot command.\n\n912\n00:45:43,510 --> 00:45:45,250\nSo I just had to fix that syntax.\n\n913\n00:45:45,250 --> 00:45:47,680\nLet me add that syntax to our notes.\n\n914\n00:45:47,680 --> 00:45:49,420\nOf course, it's off the screen now.\n\n915\n00:45:49,420 --> 00:45:50,740\nIt's not going to scroll back.\n\n916\n00:45:50,740 --> 00:45:56,963\nI'll add it to notes, afterwards, just so\nwe have that proper syntax for it.\n\n917\n00:45:56,963 --> 00:46:01,760\nAll right, now a few other things to think\nabout, when we upgrade an iOS like this.\n\n918\n00:46:01,760 --> 00:46:05,640\nSwitching between the features sets, is\nnot such a big dea,l if you're licensed.\n\n919\n00:46:05,640 --> 00:46:08,770\nGoing forward and backwards,\nbetween iOS versions though,\n\n920\n00:46:08,770 --> 00:46:12,370\nif there's incompatible commands,\nthey'll get stripped out of the config.\n\n921\n00:46:12,370 --> 00:46:14,600\nSo it's a good idea to keep your backups.\n\n922\n00:46:14,600 --> 00:46:17,150\nKeep your backups when you're running\nolder iOS systems, so you can compare them\n\n923\n00:46:17,150 --> 00:46:20,820\nto new ones, and you'll see some\ncommands get removed or whatever.\n\n924\n00:46:20,820 --> 00:46:24,930\nI haven't backed this one up,\nsince the upgrade, maybe I should.\n\n925\n00:46:24,930 --> 00:46:31,010\nLet me fire that TFTP server back up, and\n\n926\n00:46:31,010 --> 00:46:32,763\nwe'll back it up, and\nwe'll kind of compare.\n\n927\n00:46:32,763 --> 00:46:35,168\n>> Did you get a new IP address, Ron?\n\n928\n00:46:35,168 --> 00:46:38,348\n>> Oh, you know, I rebooted my-\n>> Oh yeah, you did.\n\n929\n00:46:38,348 --> 00:46:40,910\n>> No, there we go, wrong network, got it.\n\n930\n00:46:40,910 --> 00:46:43,790\nSo I'll back it up again,\nso we can compare,\n\n931\n00:46:43,790 --> 00:46:48,420\nwhat the configuration looks like now,\ncompared to what it looked like before.\n\n932\n00:46:48,420 --> 00:46:50,430\nAnd you'll see,\nthat a lot of it's the same.\n\n933\n00:46:50,430 --> 00:46:53,090\nBut any commands, that weren't\nsupported will get dumped out.\n\n934\n00:46:53,090 --> 00:46:56,080\nAnd actually, on a lot of Cisco systems,\nI don't know if this one will do it,\n\n935\n00:46:56,080 --> 00:46:58,170\nwe'll have to see,\nthey'll take those commands, and\n\n936\n00:46:58,170 --> 00:47:00,160\nthey'll actually save\nit to a file in flash.\n\n937\n00:47:00,160 --> 00:47:02,420\nI didn't look to see,\nif this one had done it.\n\n938\n00:47:02,420 --> 00:47:07,040\nBut ASAs do that, so you've got this\nlittle upgrade file, you can look at.\n\n939\n00:47:07,040 --> 00:47:08,450\nThere's all my MD5 warnings again.\n\n940\n00:47:09,978 --> 00:47:13,720\nIt's funny, cause for years and\nyears, MD5, that was the way to go.\n\n941\n00:47:13,720 --> 00:47:15,839\nBut now, not so good.\n\n942\n00:47:18,288 --> 00:47:19,120\nChanging times.\n\n943\n00:47:19,120 --> 00:47:21,809\nAs computers get faster,\nthese secure protocols,\n\n944\n00:47:21,809 --> 00:47:24,924\nthese things that we though\nwere rock solid, they were, but\n\n945\n00:47:24,924 --> 00:47:27,995\nnow CPUs have gotten so strong,\nthat they can be defeated.\n\n946\n00:47:31,378 --> 00:47:33,230\nAll right, so let me just take a look.\n\n947\n00:47:33,230 --> 00:47:36,203\nIt didn't do one in flash,\nlet me see if it did one in NVRAM.\n\n948\n00:47:39,840 --> 00:47:40,894\nNo, didn't do one there, either.\n\n949\n00:47:40,894 --> 00:47:46,224\nAlright, well, either way, I'm gonna go,\n\n950\n00:47:46,224 --> 00:47:53,061\nand copy my running-config to 10.1.230.25,\n\n951\n00:47:53,061 --> 00:47:58,406\nand I'll call it r1-post-upgrade.txt.\n\n952\n00:47:58,406 --> 00:48:00,373\nGoing to send that one, on over.\n\n953\n00:48:03,985 --> 00:48:04,768\nIt's thinking about it.\nThere we go.\n\n954\n00:48:04,768 --> 00:48:06,741\nAll right, so let's compare these.\n\n955\n00:48:06,741 --> 00:48:12,321\nSo, I've got my backup from before,\nwhich was R1 running config.\n\n956\n00:48:16,662 --> 00:48:22,969\nAll right, and\nnow I've got my post upgrade, Right here.\n\n957\n00:48:27,261 --> 00:48:30,121\nAll right, so\nat first glance they look pretty similar.\n\n958\n00:48:30,121 --> 00:48:31,231\nThere are some differences.\n\n959\n00:48:31,231 --> 00:48:35,620\nNotice here logging\nmessage-counter syslog.\n\n960\n00:48:35,620 --> 00:48:38,260\nThat command doesn't exist over here,\non the right side.\n\n961\n00:48:38,260 --> 00:48:40,880\nSo, slight difference right off the bat.\n\n962\n00:48:40,880 --> 00:48:44,690\nThat's a new feature that was\nintroduced in the 15 train, and so\n\n963\n00:48:44,690 --> 00:48:45,590\nit's showing up there.\n\n964\n00:48:47,280 --> 00:48:48,941\nLet's see, what else is different?\n\n965\n00:48:48,941 --> 00:48:51,182\n>> It took it out,\ndidn't it, on the new one?\n\n966\n00:48:51,182 --> 00:48:52,380\nOh no, here it is, logging.\n\n967\n00:48:52,380 --> 00:48:53,077\n>> Oh, you know what?\n\n968\n00:48:53,077 --> 00:48:55,261\nThe left is the old one,\nI got them backwards, and\n\n969\n00:48:55,261 --> 00:48:56,484\non the right is the new one.\n\n970\n00:48:56,484 --> 00:49:00,140\nSo yeah, that must be a default\ncommand under the new one,\n\n971\n00:49:00,140 --> 00:49:01,630\nwhereas it wasn't\na default on the old one.\n\n972\n00:49:01,630 --> 00:49:05,290\nAll right, so let's see what\nelse we've got that's different,\n\n973\n00:49:05,290 --> 00:49:07,910\nmost of this should look the same\nas we start to scroll down.\n\n974\n00:49:07,910 --> 00:49:10,000\nLet me get them lined back up again.\n\n975\n00:49:10,000 --> 00:49:16,330\nSo here's this multilink bundle and then,\nso on the old one I had my multilink\n\n976\n00:49:16,330 --> 00:49:20,050\nbundle, and then here's all my voice card,\nor at least the voice card call.\n\n977\n00:49:20,050 --> 00:49:22,360\nThe voice card call is gone now.\n\n978\n00:49:22,360 --> 00:49:24,640\nAnd then after that we\njump into the PKI stuff.\n\n979\n00:49:24,640 --> 00:49:26,600\nNow, I've got an extra command here,\n\n980\n00:49:26,600 --> 00:49:30,910\nPKI token default removal\ntimeout of 0 on the left side.\n\n981\n00:49:30,910 --> 00:49:33,050\nI don't have a default timeout apparently.\n\n982\n00:49:33,050 --> 00:49:37,460\nSo just a slight difference there,\nI don' t know that's worth noting.\n\n983\n00:49:37,460 --> 00:49:39,060\nHere what they show, nice difference.\n\n984\n00:49:39,060 --> 00:49:42,080\nI don't think we have a license\nID on the old one, yep.\n\n985\n00:49:42,080 --> 00:49:44,470\nSo the licensing is now\ndifferent under the 15 train,\n\n986\n00:49:44,470 --> 00:49:46,630\nI mentioned that earlier in the show.\n\n987\n00:49:46,630 --> 00:49:49,690\nSo we get some license commands over here,\na few other changes.\n\n988\n00:49:49,690 --> 00:49:52,470\nActually, archive has been\nflipped around for some reason.\n\n989\n00:49:52,470 --> 00:49:57,210\nBut these are the things that we need to\nbe aware of, that we need to compare, and\n\n990\n00:49:57,210 --> 00:49:58,130\njust look and see.\n\n991\n00:49:58,130 --> 00:49:59,310\nWhat changed?\n\n992\n00:49:59,310 --> 00:50:00,240\nWhat did you lose?\n\n993\n00:50:00,240 --> 00:50:01,910\nWhat needs to be updated?\n\n994\n00:50:01,910 --> 00:50:06,460\nAnd I think we'll find that there's\njust some other minor changes in here.\n\n995\n00:50:06,460 --> 00:50:07,805\nShouldn't be anything too crazy.\n\n996\n00:50:07,805 --> 00:50:13,780\nYeah, I don't see really anything jumping,\nthe formatting of the config has changed\n\n997\n00:50:13,780 --> 00:50:16,590\na little bit, but nothing crazy jumping\nout at me that we need to worry about.\n\n998\n00:50:18,250 --> 00:50:21,230\n>> Access lists are all still there and-\n>> So, like the voice ports here,\n\n999\n00:50:21,230 --> 00:50:24,690\nwhich I didn't have a voice config for\nbefore anyway, over here it's just\n\n1000\n00:50:24,690 --> 00:50:28,357\ncompletely missing, cuz the voice card\nitself is not supported in IP base.\n\n1001\n00:50:28,357 --> 00:50:32,720\nSo, but otherwise, those are the things\nthat we need to worry about.\n\n1002\n00:50:32,720 --> 00:50:34,509\nWe compare those, we look for\nanything that's lost, and\n\n1003\n00:50:34,509 --> 00:50:35,540\nthen we find out what went wrong.\n\n1004\n00:50:35,540 --> 00:50:36,260\n>> Yeah.\n\n1005\n00:50:36,260 --> 00:50:38,396\n>> All right, well, looking at the clock,\n\n1006\n00:50:38,396 --> 00:50:41,380\nthis is a pretty good\nspot to take a break.\n\n1007\n00:50:41,380 --> 00:50:44,686\nWhen we get back, we need to take\na look at what you were mentioning,\n\n1008\n00:50:44,686 --> 00:50:47,418\nthe licensing stuff, and\nhow that influences things.\n\n1009\n00:50:47,418 --> 00:50:50,133\nAnd-\n>> We did not do an example of password\n\n1010\n00:50:50,133 --> 00:50:50,701\nrecovery.\n\n1011\n00:50:50,701 --> 00:50:53,104\n>> Oh yeah, yeah, we'll throw that one\nin cuz it's kind of write related.\n\n1012\n00:50:53,104 --> 00:50:55,242\nAll right, so ladies and\ngentlemen stay tuned.\n\n1013\n00:50:55,242 --> 00:50:58,400\nWhen we get back,\nlicensing which is fun, not so fun.\n\n1014\n00:50:58,400 --> 00:50:58,979\n>> Costly.\n\n1015\n00:50:58,979 --> 00:50:59,897\n>> Yeah, involves spending money.\n\n1016\n00:50:59,897 --> 00:51:00,815\n>> [LAUGH]\n>> And\n\n1017\n00:51:00,815 --> 00:51:03,078\nwe'll take a look at password recovery and\nmaybe a few other things.\n\n1018\n00:51:03,078 --> 00:51:06,398\nSo let's wrap it up there,\nwe'll see you guys back in a few minutes.\n\n1019\n00:51:06,398 --> 00:51:14,050\n[SOUND].\n\n1020\n00:51:14,050 --> 00:51:16,012\n>> [LAUGH]\n>> All right, welcome back everybody.\n\n1021\n00:51:16,012 --> 00:51:20,629\nSo before the break, we left off\ntalking about upgrading our IOS and\n\n1022\n00:51:20,629 --> 00:51:23,310\nthrowing in a new version and all that.\n\n1023\n00:51:23,310 --> 00:51:29,400\nAnd we upgraded from a 12.4 IOS to a 15.,\nwhatever, 15.1 I think on this one.\n\n1024\n00:51:29,400 --> 00:51:33,164\nAnd so, that's a pretty big jump,\njumping three versions of the IOS,\n\n1025\n00:51:33,164 --> 00:51:34,780\nthree major versions.\n\n1026\n00:51:34,780 --> 00:51:36,300\nBut the reality is that Cisco,\n\n1027\n00:51:36,300 --> 00:51:40,240\nwhen they went from the 12.s to the 15.s,\nthe main change they made?\n\n1028\n00:51:40,240 --> 00:51:41,130\n>> Licensing.\n\n1029\n00:51:41,130 --> 00:51:43,181\n>> Licensing, right, they made it\neasier for us to give them money.\n\n1030\n00:51:43,181 --> 00:51:43,681\n>> Yeah.\n\n1031\n00:51:43,681 --> 00:51:47,717\n>> On older Cisco routers,\nwhen it came time to update the IOS,\n\n1032\n00:51:47,717 --> 00:51:50,260\nwe saw exactly what I saw a minute ago.\n\n1033\n00:51:50,260 --> 00:51:51,471\nLet me pull this back up here.\n\n1034\n00:51:51,471 --> 00:51:53,230\nNow, where did it go?\n\n1035\n00:51:53,230 --> 00:51:54,330\nI lost my, dadgummit, here it is.\n\n1036\n00:51:54,330 --> 00:51:55,236\n>> Oh, there it is.\n>> Okay, so\n\n1037\n00:51:55,236 --> 00:52:00,288\nhere's the webpage that I pulled up when\nI was upgrading my 2821 behind us here.\n\n1038\n00:52:00,288 --> 00:52:05,550\nAnd see how there's different files\nin here for each of the IOSs, right?\n\n1039\n00:52:05,550 --> 00:52:09,792\nSo I've got Advanced IP Services,\nAdvanced Enterprise, and if I go to 15.1,\n\n1040\n00:52:09,792 --> 00:52:10,831\nit's the same way.\n\n1041\n00:52:10,831 --> 00:52:14,380\nThere's all these different files in here,\nfor the different feature sets.\n\n1042\n00:52:14,380 --> 00:52:19,910\nSo I need to download\nthe appropriate file for\n\n1043\n00:52:19,910 --> 00:52:21,590\nwhat I paid for, for\nthe features that I paid for.\n\n1044\n00:52:23,190 --> 00:52:26,490\nOn the newer routers,\nthe ones that actually ship with 15.0,\n\n1045\n00:52:26,490 --> 00:52:29,520\nthe ones that didn't get upgraded,\nlike we just did this one here.\n\n1046\n00:52:29,520 --> 00:52:31,800\nBut the ones that actually ship with 15.0,\n\n1047\n00:52:31,800 --> 00:52:34,340\nCisco has switched to\na new universal model.\n\n1048\n00:52:34,340 --> 00:52:36,470\nAnd let me pull up like a 2900.\n\n1049\n00:52:36,470 --> 00:52:40,044\nSo if I go to a 2901 or\nsomething like that.\n\n1050\n00:52:40,044 --> 00:52:46,524\nSo I'm gonna come in here and\npick a 2900, and a 2901.\n\n1051\n00:52:46,524 --> 00:52:52,211\nWhen I go in to pull up the 2901,\ninstead of seeing a bunch of different\n\n1052\n00:52:52,211 --> 00:52:57,098\nIOS files for different feature sets,\nI just see one, right?\n\n1053\n00:52:57,098 --> 00:53:00,090\nOr I guess two, so\nwith encryption and without.\n\n1054\n00:53:00,090 --> 00:53:03,603\nSo I've got a universal 15.4, and\n\n1055\n00:53:03,603 --> 00:53:09,160\nanother universal 15.4 without encryption.\n\n1056\n00:53:09,160 --> 00:53:10,080\nAnd that's it.\n\n1057\n00:53:10,080 --> 00:53:13,210\nSo, what happened to Advanced IP Services?\n\n1058\n00:53:13,210 --> 00:53:14,730\nWhat happened to Enterprise Services?\n\n1059\n00:53:14,730 --> 00:53:16,180\nWhat happened to Voice and\nService Provider?\n\n1060\n00:53:16,180 --> 00:53:17,190\nWhere'd they all go?\n\n1061\n00:53:17,190 --> 00:53:19,949\n>> Yeah,\nin the universal editions of these things\n\n1062\n00:53:19,949 --> 00:53:24,068\nthey're all kind of compact into\nthis one image, now using licensing.\n\n1063\n00:53:24,068 --> 00:53:28,477\nIt actually allows you to activate\nwhich particular features you want\n\n1064\n00:53:28,477 --> 00:53:29,680\nto actually have.\n\n1065\n00:53:29,680 --> 00:53:34,892\nSo if you don't need any of the features,\nthe basic IP services is already in there.\n\n1066\n00:53:34,892 --> 00:53:35,553\n>> Mm-hm.\n\n1067\n00:53:35,553 --> 00:53:39,232\n>> But then if you do need it, you\nactually simply go ahead and you pay for\n\n1068\n00:53:39,232 --> 00:53:40,860\nthat activation.\n\n1069\n00:53:40,860 --> 00:53:43,530\nAnd then you go and\nget your particular key that you need.\n\n1070\n00:53:43,530 --> 00:53:47,160\nAnd then you add that back in and\nit gives you those features that you need.\n\n1071\n00:53:47,160 --> 00:53:49,880\n>> Now the activation\nprocess is a little tricky,\n\n1072\n00:53:49,880 --> 00:53:52,700\nbecause it's not just something\nyou do on the router itself.\n\n1073\n00:53:52,700 --> 00:53:54,760\nYou don't just punch in a code and\nyou're done, right.\n\n1074\n00:53:54,760 --> 00:53:56,880\nYou get a code from Cisco.\n\n1075\n00:53:56,880 --> 00:53:59,260\nAnd then once you, cuz that's\nwhat you buy, you buy this code,\n\n1076\n00:53:59,260 --> 00:54:02,725\nit's called a PAK,\na product activation key or a P-A-K.\n\n1077\n00:54:02,725 --> 00:54:07,200\nAnd then you go to Cisco's website,\nyou register that P-A-K,\n\n1078\n00:54:07,200 --> 00:54:08,820\nwhich is what ties it to you.\n\n1079\n00:54:08,820 --> 00:54:12,040\nAnd then you punch in the hardware\nserial number of your router,\n\n1080\n00:54:12,040 --> 00:54:13,520\nwe'll show this whole\nprocess here in a minute.\n\n1081\n00:54:13,520 --> 00:54:15,850\nYou punch in that hardware serial number,\nall right?\n\n1082\n00:54:15,850 --> 00:54:19,282\nIt then ties the P-A-K to your\nhardware serial number, and\n\n1083\n00:54:19,282 --> 00:54:21,310\ngenerates a license file.\n\n1084\n00:54:21,310 --> 00:54:24,713\nAnd you gotta copy that license file down,\nremember, this is a drawn out process.\n\n1085\n00:54:24,713 --> 00:54:28,148\nBut at the end of the day,\nthe hardware of your router now\n\n1086\n00:54:28,148 --> 00:54:33,190\nshows as having this license, and\nshows Advanced IP Services or whatever.\n\n1087\n00:54:33,190 --> 00:54:36,450\nSo you just throw the universal file on\nthere, no longer having to worry about all\n\n1088\n00:54:36,450 --> 00:54:40,025\nthe different individual files,\nyou put it on, and you're in business.\n\n1089\n00:54:40,025 --> 00:54:44,035\nIt also means that we have one common\nset of requirements for memory.\n\n1090\n00:54:44,035 --> 00:54:47,505\nSo now, adding a higher feature\nset just requires paying money,\n\n1091\n00:54:47,505 --> 00:54:50,545\nnot necessarily having to buy\nmore memory and upgrade that.\n\n1092\n00:54:50,545 --> 00:54:53,030\nSo it does make life a little bit easier.\n\n1093\n00:54:53,030 --> 00:54:57,240\nIt moreso makes it easier on Cisco's side,\nbecause it stops people form stealing and\n\n1094\n00:54:57,240 --> 00:54:59,997\nswapping IOS files they're\nnot licensed for, right?\n\n1095\n00:54:59,997 --> 00:55:04,012\nSo, maybe you're sitting at home and\nyou have a 2821 just like me, and\n\n1096\n00:55:04,012 --> 00:55:07,200\nI've got Advanced IP Services and\nyou don't.\n\n1097\n00:55:07,200 --> 00:55:09,730\nYou could copy my file and\nnow you've got Advanced IP Services.\n\n1098\n00:55:09,730 --> 00:55:10,500\nThat's it, right?\n\n1099\n00:55:10,500 --> 00:55:12,030\nBut with this new system,\n\n1100\n00:55:12,030 --> 00:55:14,830\nbecause it's tied to your hardware-\n>> Identifier, yeah.\n\n1101\n00:55:14,830 --> 00:55:18,850\n>> Serial number, if you take my file,\nit's just IP base for you.\n\n1102\n00:55:18,850 --> 00:55:20,410\nBut for me, it's Advanced IP Services.\n\n1103\n00:55:20,410 --> 00:55:22,540\nSo it's really copy protection for\nthe IOS.\n\n1104\n00:55:22,540 --> 00:55:23,040\n>> Yeah.\n\n1105\n00:55:24,180 --> 00:55:26,710\n>> All right so, not the most\nexciting thing in the world, but\n\n1106\n00:55:26,710 --> 00:55:27,520\nlet’s take a look at it.\n\n1107\n00:55:27,520 --> 00:55:32,180\nNow, the router that we're running\nis was one that was upgraded.\n\n1108\n00:55:32,180 --> 00:55:35,950\nSo it was running at 12.4 originally and\nthat’s why when I look\n\n1109\n00:55:35,950 --> 00:55:40,335\nat the operating system, I’ve actually\ngot a separate, this is the IP base file.\n\n1110\n00:55:40,335 --> 00:55:43,185\nIt's not a universal\nfile like the new ones.\n\n1111\n00:55:43,185 --> 00:55:47,135\nBut that doesn't mean that it doesn't\nhave the new licensing scheme on it.\n\n1112\n00:55:47,135 --> 00:55:51,711\nIf we do a show version,\nin the output you'll see, License Info,\n\n1113\n00:55:51,711 --> 00:55:53,527\nLicense UDI, all right.\n\n1114\n00:55:53,527 --> 00:55:56,605\nThe UDI is the unique device identifier.\n\n1115\n00:55:56,605 --> 00:56:00,685\nThat's the hardware identifier for\nthis machine, and if I was to go and\n\n1116\n00:56:00,685 --> 00:56:05,105\nregister it with Cisco This is what I\nwould need to specify to do that license.\n\n1117\n00:56:05,105 --> 00:56:06,521\nThis FTX number right here.\n\n1118\n00:56:06,521 --> 00:56:08,181\nThat's what identifies my router.\n\n1119\n00:56:08,181 --> 00:56:11,806\nSo if one of you guys wants to go out\nthere and buy a license for my router,\n\n1120\n00:56:11,806 --> 00:56:12,850\nyou can do it.\n\n1121\n00:56:12,850 --> 00:56:13,520\nRight?\n\n1122\n00:56:13,520 --> 00:56:14,610\nAnd now you got my code.\n\n1123\n00:56:14,610 --> 00:56:17,440\nBut anyhow,\nthat's the identifier that it needs.\n\n1124\n00:56:17,440 --> 00:56:21,400\nAnd when we install a license, it'll then\nshow up right here under the license info,\n\n1125\n00:56:21,400 --> 00:56:23,610\nand I think we have, what, show license?\n\n1126\n00:56:23,610 --> 00:56:27,570\nAnd I of course don't have a license,\nso I don't get in.\n\n1127\n00:56:27,570 --> 00:56:29,440\n>> Don, if you type in show\nlicense with a question mark,\n\n1128\n00:56:29,440 --> 00:56:32,429\nyou'll see that there's a couple\nextra commands there for us, and\n\n1129\n00:56:32,429 --> 00:56:33,410\n>> A couple?\n\n1130\n00:56:33,410 --> 00:56:36,580\n>> Yup, a couple, just a couple,\nthe ones that we see.\n\n1131\n00:56:36,580 --> 00:56:39,040\nIf you do the show license at all.\n\n1132\n00:56:39,040 --> 00:56:43,283\nI know this is just IP based,\nbut if we had.\n\n1133\n00:56:43,283 --> 00:56:45,693\n[SOUND] Well\n>> We're empty.\n\n1134\n00:56:45,693 --> 00:56:48,200\n>> Yeah, we're empty.\nA lot of time times, with a universal,\n\n1135\n00:56:48,200 --> 00:56:51,150\nsince it has all the other\nstuff actually loaded in there,\n\n1136\n00:56:51,150 --> 00:56:56,020\nbut ours is not a universal copy,\nours is on the 2821, but on the 2900.\n\n1137\n00:56:56,020 --> 00:56:58,990\nYou would actually see all those different\nfeatures that we're talking about,\n\n1138\n00:56:58,990 --> 00:57:03,050\nthe advanced enterprise, the IP base, all\nthose different ones that you see there.\n\n1139\n00:57:03,050 --> 00:57:06,720\nAnd what we really need when we get\nin that is that UDI number as well.\n\n1140\n00:57:06,720 --> 00:57:10,110\nSo now you don't only need that serial\nnumber, but they may ask you for\n\n1141\n00:57:10,110 --> 00:57:11,390\nthat UDI number, and so\n\n1142\n00:57:11,390 --> 00:57:15,720\nyou've gotta copy that down when you get\ninto trying to get that PAK as well.\n\n1143\n00:57:15,720 --> 00:57:16,450\n>> Yeah.\n\n1144\n00:57:16,450 --> 00:57:18,350\nSo the PAK, where do you get that?\n\n1145\n00:57:18,350 --> 00:57:20,930\nYou get it from whoever you buy\nyour Cisco junk from, right?\n\n1146\n00:57:20,930 --> 00:57:23,011\nSo, not junk, technology, right?\n\n1147\n00:57:23,011 --> 00:57:24,685\n>> [LAUGH]\n>> Our Cisco technology.\n\n1148\n00:57:24,685 --> 00:57:27,612\nSo if you buy it from CDW or\nsomebody like that, you go to them, and\n\n1149\n00:57:27,612 --> 00:57:29,230\nthat's where you buy the license.\n\n1150\n00:57:29,230 --> 00:57:33,690\nSo for example, let's go to CDW and so\n\n1151\n00:57:33,690 --> 00:57:38,820\nI've got a Cisco 2821 and really they\nlicense it just for the 2800 as a whole.\n\n1152\n00:57:38,820 --> 00:57:43,530\nBut actually I could\nprobably just do Cisco 2800.\n\n1153\n00:57:43,530 --> 00:57:45,600\nWell actually let's do a 2901.\n\n1154\n00:57:45,600 --> 00:57:50,824\nSo if I do a Cisco 2900 enterprise,\n\n1155\n00:57:50,824 --> 00:57:54,520\nlet's see what we can shop for here.\n\n1156\n00:57:54,520 --> 00:57:59,310\nExport restriction license let's see so.\n\n1157\n00:57:59,310 --> 00:58:03,730\nWhen you see something like this, Cisco\nUS Export Restriction Compliance License,\n\n1158\n00:58:03,730 --> 00:58:07,710\nthat's one that it's for a foreign body,\nbut they are allowed to run it.\n\n1159\n00:58:07,710 --> 00:58:10,900\nSo, it's usually somebody that we\nhave a trade partnership with.\n\n1160\n00:58:10,900 --> 00:58:13,250\nBut if we look in here,\nwe should be able to find.\n\n1161\n00:58:14,350 --> 00:58:18,500\nThere's the complete package for\nEnterprise Services.\n\n1162\n00:58:18,500 --> 00:58:19,600\n>> Yep.\nIt's fairly cheap.\n\n1163\n00:58:19,600 --> 00:58:22,610\nLook at that. [LAUGH] >> Well, you see\nhow it says Academic, Corporate, and\n\n1164\n00:58:22,610 --> 00:58:23,240\nGovernment too.\n\n1165\n00:58:23,240 --> 00:58:25,100\n>> There you go.\n>> That's not even full retail.\n\n1166\n00:58:25,100 --> 00:58:25,991\n>> I know.\n[LAUGH]\n\n1167\n00:58:25,991 --> 00:58:26,565\n>> [LAUGH] So,\n\n1168\n00:58:26,565 --> 00:58:28,915\nthey're not making it easy for\nme to find it.\n\n1169\n00:58:35,025 --> 00:58:37,385\nNope, let's change my\nlittle search field here.\n\n1170\n00:58:37,385 --> 00:58:39,674\nLet's just go for a Cisco 2901.\n\n1171\n00:58:41,450 --> 00:58:45,860\nAnd we'll do a slightly\ndifferent search this time.\n\n1172\n00:58:45,860 --> 00:58:47,140\nSo there's the 2901 itself.\n\n1173\n00:58:47,140 --> 00:58:49,350\nAnd you'll see the 2901,\nhere it is recommendable 1,300 bucks.\n\n1174\n00:58:49,350 --> 00:58:52,280\nAnd it's going to come with IP base.\n\n1175\n00:58:52,280 --> 00:58:55,500\nAnd from there, you buy the upgrades.\n\n1176\n00:58:55,500 --> 00:58:57,210\nSo like this is security bundle.\n\n1177\n00:58:59,210 --> 00:59:00,650\nHere's the voice bundle.\n\n1178\n00:59:00,650 --> 00:59:05,950\nSo these are bundles, the bundle is\nhardware combined with software.\n\n1179\n00:59:05,950 --> 00:59:09,420\nIf I've already got the hardware,\nI don't need to buy the software again.\n\n1180\n00:59:09,420 --> 00:59:12,360\nSo, we can find it in here somewhere.\n\n1181\n00:59:12,360 --> 00:59:14,120\nI'm sure they sell it.\n\n1182\n00:59:14,120 --> 00:59:16,150\nMaybe they don't.\n\n1183\n00:59:16,150 --> 00:59:18,798\nMaybe other business.\n\n1184\n00:59:18,798 --> 00:59:22,170\nI'm ready to stop and go to the portal.\n\n1185\n00:59:22,170 --> 00:59:24,850\nYeah, you can buy right through CISCO.\n\n1186\n00:59:24,850 --> 00:59:25,598\nIf you go to.\n\n1187\n00:59:25,598 --> 00:59:26,840\nWhat is it Ryan?\n\n1188\n00:59:26,840 --> 00:59:29,633\nSlash go slash license?\n\n1189\n00:59:29,633 --> 00:59:30,462\n>> Yeah.\n\n1190\n00:59:30,462 --> 00:59:37,864\n>> www.cisco.com/go/license and\nI guess set the log in when we do that.\n\n1191\n00:59:42,486 --> 00:59:44,295\nSlowly but surely.\n\n1192\n00:59:44,295 --> 00:59:45,730\n>> [LAUGH]\n>> There we go.\n\n1193\n00:59:45,730 --> 00:59:48,620\nAll right so,\nthis is the Cisco licensing page.\n\n1194\n00:59:48,620 --> 00:59:50,110\nIt's not much to look at here,\n\n1195\n00:59:50,110 --> 00:59:54,180\nbasically we continue to product license\nregistrations, so we continue in there.\n\n1196\n00:59:54,180 --> 00:59:59,200\nAnd what it's gonna do is, we're gonna\nneed to basically provide a PAK,\n\n1197\n00:59:59,200 --> 01:00:02,010\na Product Activation Key And if we've\n\n1198\n01:00:02,010 --> 01:00:05,970\nbought a PAK that we've already got the\ncode for it and we punch it right in here.\n\n1199\n01:00:05,970 --> 01:00:07,110\nAnd we can fulfil it right?\n\n1200\n01:00:07,110 --> 01:00:10,210\nI don't have any unused ones right now,\nI've ones that I've used.\n\n1201\n01:00:10,210 --> 01:00:14,270\nAnd then if you need to get new licenses\nyou can specify multiple PAKs if\n\n1202\n01:00:14,270 --> 01:00:16,150\nyou bought a bunch of them and\nfeed them in there.\n\n1203\n01:00:16,150 --> 01:00:18,900\nSo, you'd feed in your PAK code here.\n\n1204\n01:00:18,900 --> 01:00:23,500\nAnd then you would choose fulfill\nsingle token or single pack.\n\n1205\n01:00:23,500 --> 01:00:28,510\nFulfill means to attach that\ntoken to a hardware UDI, right.\n\n1206\n01:00:28,510 --> 01:00:32,710\nIf that hasn't been done then it's not,\nthen it's still a free to use one and\n\n1207\n01:00:32,710 --> 01:00:34,829\nit can be resold and\nhanded off and whatever.\n\n1208\n01:00:35,960 --> 01:00:40,060\nBut once it's attached to the hardware,\nthe only time Cisco will move it for\n\n1209\n01:00:40,060 --> 01:00:42,470\nyou is if you have a hardware failure,\nif you send it in to be replaced.\n\n1210\n01:00:43,900 --> 01:00:45,650\nAll right.\nLet me pull up their page.\n\n1211\n01:00:45,650 --> 01:00:47,820\nThey've got a whole page\nhere that goes over it and\n\n1212\n01:00:47,820 --> 01:00:50,070\nI'll have to stick this in the notes for\nthe show.\n\n1213\n01:00:50,070 --> 01:00:51,430\nLet me do that right now.\n\n1214\n01:00:51,430 --> 01:00:52,605\nSo I don't forget.\n\n1215\n01:00:54,572 --> 01:00:58,361\n[SOUND] There.\n\n1216\n01:00:58,361 --> 01:00:59,410\nOkay.\n\n1217\n01:00:59,410 --> 01:01:03,060\nSo basically what they show is you need\nto, you go out and you purchase a pack.\n\n1218\n01:01:03,060 --> 01:01:07,050\nYou purchase your product activation key\nand then once you've got it purchased,\n\n1219\n01:01:07,050 --> 01:01:08,550\nyou head over to the licensing portal.\n\n1220\n01:01:08,550 --> 01:01:10,920\nThe licensing portal is that\nweb page that I was just on and\n\n1221\n01:01:10,920 --> 01:01:15,740\nthey give you a nice super blurry image,\nbut it's, not this page.\n\n1222\n01:01:15,740 --> 01:01:17,470\nIt is this page right here.\n\n1223\n01:01:17,470 --> 01:01:19,990\nSo you punch in that pack and\nyou choose fulfill.\n\n1224\n01:01:19,990 --> 01:01:24,690\nOnce you go to fulfill it, from there,\non the next page it's gonna ask you for\n\n1225\n01:01:24,690 --> 01:01:27,985\nyour product ID and serial number and\nthat's what they're putting in here.\n\n1226\n01:01:27,985 --> 01:01:30,865\nSo, that UDI was composed of two parts.\n\n1227\n01:01:30,865 --> 01:01:35,975\nIf I go back to my command line the UDI\nis the hardware ID and the serial number.\n\n1228\n01:01:35,975 --> 01:01:39,132\nAnd those are the two pieces of\ninformation that it's asking on.\n\n1229\n01:01:39,132 --> 01:01:41,442\nOn this page as you punch those values in.\n\n1230\n01:01:41,442 --> 01:01:43,742\nYou also punch in your name and\naddress and phone number,\n\n1231\n01:01:43,742 --> 01:01:45,232\nthe other things to identify you.\n\n1232\n01:01:45,232 --> 01:01:48,462\nCuz they're basically going to add\nthis and its associated support\n\n1233\n01:01:48,462 --> 01:01:52,832\ncontracts to your account to allow\nyou to download new iOSes, and so on.\n\n1234\n01:01:52,832 --> 01:01:54,612\nOnce that's done, you just submit it.\n\n1235\n01:01:54,612 --> 01:01:57,472\nAnd now it's attached and registered.\n\n1236\n01:01:57,472 --> 01:02:00,362\nFrom there you'll have to\ndownload a license file.\n\n1237\n01:02:00,362 --> 01:02:04,040\nAnd that's the last part here, the\nimportant part is you have to copy that\n\n1238\n01:02:04,040 --> 01:02:08,180\nlicense file to your system, so\nhere's the example of that license file.\n\n1239\n01:02:08,180 --> 01:02:11,870\nWhen they're copying it from the TFTP\nserver, you can do it from FTP or\n\n1240\n01:02:11,870 --> 01:02:12,760\nwhatever.\n\n1241\n01:02:12,760 --> 01:02:17,060\nOnce it's copied down,\nthen you install it, and\n\n1242\n01:02:17,060 --> 01:02:18,380\nthat's what they're doing right here.\n\n1243\n01:02:18,380 --> 01:02:20,980\nLicense install, whoops.\n\n1244\n01:02:20,980 --> 01:02:24,335\nAnd then specifying the location\nof that license file.\n\n1245\n01:02:24,335 --> 01:02:24,970\n>> Mm-hm.\n\n1246\n01:02:24,970 --> 01:02:28,120\n>> After it's installed,\nnow you've got the new feature, okay?\n\n1247\n01:02:28,120 --> 01:02:30,370\nDoesn't even require a reboot for\nthe most part.\n\n1248\n01:02:30,370 --> 01:02:31,080\n>> Yep.\n>> Some of them do, but\n\n1249\n01:02:31,080 --> 01:02:32,610\nmost of them don't.\n\n1250\n01:02:32,610 --> 01:02:36,235\nSo like here they're showing that it\njust added the K nine feature set,\n\n1251\n01:02:36,235 --> 01:02:38,645\nit's installed, and you're ready to rock.\n\n1252\n01:02:38,645 --> 01:02:41,725\nOkay, so that's the typical way of\ninstalling one of these licenses,\n\n1253\n01:02:41,725 --> 01:02:44,565\nnow it's permanently on this system and\nwhen I upgrade the iOS.\n\n1254\n01:02:44,565 --> 01:02:46,439\nI just use those universal files and\nI am in business.\n\n1255\n01:02:48,550 --> 01:02:51,700\nNow, there is kind of a neat thing for\nstudying.\n\n1256\n01:02:51,700 --> 01:02:53,540\nSo you might be saying, wait a minute.\n\n1257\n01:02:53,540 --> 01:02:57,170\nIf I'm trying to study at home,\nI don't want to buy the enterprise set.\n\n1258\n01:02:57,170 --> 01:02:58,990\nIt's too expensive, whatever.\n\n1259\n01:02:58,990 --> 01:03:02,560\nWell, you can get demo\nlicenses from Cisco, right.\n\n1260\n01:03:02,560 --> 01:03:04,370\nAnd Ron,\ndo you remember the page for that?\n\n1261\n01:03:04,370 --> 01:03:06,620\n>> No, I don't right off the top of my-\n>> All right.\n\n1262\n01:03:06,620 --> 01:03:08,470\nLet's see if I can find it real quick.\n\n1263\n01:03:08,470 --> 01:03:10,061\nIf not, I'll find it after the show.\n\n1264\n01:03:14,368 --> 01:03:17,240\nBut you can activate\nbasically a free trial.\n\n1265\n01:03:17,240 --> 01:03:18,070\nThere we go.\n\n1266\n01:03:18,070 --> 01:03:20,150\nYou can activate a free trial.\n\n1267\n01:03:20,150 --> 01:03:25,010\nWell, that's for the content filtering,\nthat's not the iOS itself.\n\n1268\n01:03:27,640 --> 01:03:30,640\nSomewhere in here, if I can find it.\n\n1269\n01:03:30,640 --> 01:03:35,580\nYou can activate a trial,\na 60 day demo is what it is, and\n\n1270\n01:03:35,580 --> 01:03:37,940\nso you can implement that to get\nall the features unlocked for\n\n1271\n01:03:37,940 --> 01:03:40,850\na period of time while you study and\npractice and whatever.\n\n1272\n01:03:40,850 --> 01:03:43,390\nAnd then,\nthe thing they don't go right out and\n\n1273\n01:03:43,390 --> 01:03:45,860\ntell you is that they\nare done on the honor system.\n\n1274\n01:03:45,860 --> 01:03:49,670\nAnd so, when your license runs out, those\nfeatures actually stay active, and so\n\n1275\n01:03:49,670 --> 01:03:51,340\nyou can continue to use them.\n\n1276\n01:03:51,340 --> 01:03:54,155\nBut in a production environment,\nyou need to be licensed or\n\n1277\n01:03:54,155 --> 01:03:56,139\nthey're going to drop the hammer on you.\n\n1278\n01:03:56,139 --> 01:04:00,497\nIn a test environment, in your home or\nwhatever, they're not strict on it\n\n1279\n01:04:00,497 --> 01:04:03,034\nand they let it slide so\n>> They even put that in the official\n\n1280\n01:04:03,034 --> 01:04:05,562\nCisco books, the Cisco press books and\nstuff, I'll mention that.\n\n1281\n01:04:05,562 --> 01:04:10,594\nIt's something that's widely known,\nbut not widely talked about.\n\n1282\n01:04:10,594 --> 01:04:11,537\n>> That's right.\n\n1283\n01:04:11,537 --> 01:04:13,387\n[LAUGH]\n>> Kind of like GS3,\n\n1284\n01:04:13,387 --> 01:04:17,630\neverybody knows about it but\nCisco never talks about it.\n\n1285\n01:04:17,630 --> 01:04:19,410\nSo, their dark secret.\n\n1286\n01:04:19,410 --> 01:04:20,740\nJust keep that in mind.\n\n1287\n01:04:20,740 --> 01:04:24,470\nWith the newer systems,\nyou might not have individual iOS files.\n\n1288\n01:04:24,470 --> 01:04:26,390\nYou might just have\na universal file like this.\n\n1289\n01:04:26,390 --> 01:04:29,030\nIt's got all the feature\nsets rolled into one, and\n\n1290\n01:04:29,030 --> 01:04:30,840\nyour license file is what determines that.\n\n1291\n01:04:30,840 --> 01:04:34,510\nAnd the licensing, unfortunately,\nit kind of came over from the ASA world,\n\n1292\n01:04:34,510 --> 01:04:36,620\nwhere it's a pain in the butt\non the Cisco ASAs, and\n\n1293\n01:04:36,620 --> 01:04:38,350\nnow it gets to be a pain in\nthe butt on the Cisco routers too.\n\n1294\n01:04:38,350 --> 01:04:38,850\n>> Yes.\n\n1295\n01:04:40,360 --> 01:04:43,777\n>> It says that's\nconvenient as SharePoint.\n\n1296\n01:04:43,777 --> 01:04:45,030\n[LAUGH] So,\n\n1297\n01:04:45,030 --> 01:04:47,930\nthat's kind of the Cisco license again\nwe just need to be aware of that.\n\n1298\n01:04:47,930 --> 01:04:51,800\nIf you ever have your entire router just\ndie and you gotta send it in to get it\n\n1299\n01:04:51,800 --> 01:04:55,380\nreplaced, keep in mind that your\nlicenses don't transfer automatically.\n\n1300\n01:04:55,380 --> 01:04:56,580\nIf you actually replace it..\n\n1301\n01:04:56,580 --> 01:04:59,520\nThrough Cisco,\nthey'll transfer the licenses for you,\n\n1302\n01:04:59,520 --> 01:05:00,870\nyou don't have to worry about it.\n\n1303\n01:05:00,870 --> 01:05:04,780\nBut if you just buy a new router, you're\ngonna need to call Cisco on the phone and\n\n1304\n01:05:04,780 --> 01:05:07,570\ntransfer that license, right, if it's\nthe exact same one they'll transfer it,\n\n1305\n01:05:07,570 --> 01:05:09,840\nbut if it's a different model\nthey won't transfer it and\n\n1306\n01:05:09,840 --> 01:05:13,250\nyou'll need to buy the right license for\nit.\n\n1307\n01:05:13,250 --> 01:05:18,270\nThe other thing is there is a licensing\ngrey area, if Ronny buys a router and\n\n1308\n01:05:18,270 --> 01:05:23,660\nhe licenses it for the enterprise\nfeature set and then he sells it to me.\n\n1309\n01:05:23,660 --> 01:05:24,802\nTechnically, the licenses\n\n1310\n01:05:24,802 --> 01:05:26,232\nare non-transferable\n>> Right.\n\n1311\n01:05:26,232 --> 01:05:28,380\n>> And I'm supposed to buy it again.\n\n1312\n01:05:28,380 --> 01:05:30,340\nCisco doesn't enforce it,\nthey're not very strict about it.\n\n1313\n01:05:30,340 --> 01:05:34,940\nBut to the letter of the law,\nonly the IP base feature is transferable.\n\n1314\n01:05:36,350 --> 01:05:38,930\nSo, just keep that in mind if\nyou're purchasing used equipment.\n\n1315\n01:05:38,930 --> 01:05:42,400\nIt's important to get it under a smart-net\nagreement as quickly as you can, and\n\n1316\n01:05:42,400 --> 01:05:44,848\nget it updated to reflect whatever iOS\nit is that you're running on there.\n\n1317\n01:05:44,848 --> 01:05:45,786\nThere.\n\n1318\n01:05:45,786 --> 01:05:47,290\nAll right.\n\n1319\n01:05:47,290 --> 01:05:49,330\nRonnie, can you think of\nanything else on licensing?\n\n1320\n01:05:49,330 --> 01:05:50,670\n>> Not on licensing.\n\n1321\n01:05:50,670 --> 01:05:54,263\nJust make sure you take a look at those\ncommands, know what a UID looks like.\n\n1322\n01:05:54,263 --> 01:05:54,809\n>> UDI.\n\n1323\n01:05:54,809 --> 01:05:55,482\n>> UDI.\n\n1324\n01:05:55,482 --> 01:05:56,851\nUID.\n>> UTI.\n\n1325\n01:05:56,851 --> 01:05:57,652\n>> Yeah, something.\n\n1326\n01:05:57,652 --> 01:06:01,450\n>> [LAUGH]\n>> Yeah, UDI.\n\n1327\n01:06:01,450 --> 01:06:02,890\nUniversal device identifier.\n\n1328\n01:06:03,950 --> 01:06:06,600\nMake sure you can identify that format.\n\n1329\n01:06:06,600 --> 01:06:10,610\nAnd know how to actually get one\nif you need to in that process.\n\n1330\n01:06:10,610 --> 01:06:13,880\n>> All right, so the other thing\nthat we wanted to take a look at.\n\n1331\n01:06:13,880 --> 01:06:15,659\n>> Yep.\n>> Was [CROSSTALK].\n\n1332\n01:06:15,659 --> 01:06:18,223\n>> Right.\nAnd what can we do if we accidentally or\n\n1333\n01:06:18,223 --> 01:06:21,360\non purpose lock ourselves out of a router.\n\n1334\n01:06:21,360 --> 01:06:22,804\nNow, I'll tell you, I get the question.\n\n1335\n01:06:22,804 --> 01:06:23,384\n>> Yeah.\n\n1336\n01:06:23,384 --> 01:06:24,860\n>> At least once a month.\n\n1337\n01:06:24,860 --> 01:06:28,630\nAnd it usually starts with,\nhey Don, I bought this off of eBay,\n\n1338\n01:06:28,630 --> 01:06:30,710\nright, that's almost how it always starts.\n\n1339\n01:06:30,710 --> 01:06:32,900\nIt's got a password on it,\nI can't get in to it.\n\n1340\n01:06:32,900 --> 01:06:37,830\nPeople sell routers and\nswitches online all the time, and they're\n\n1341\n01:06:37,830 --> 01:06:41,180\nperfectly good in the most case, routers,\nthey'll run for 10 years without breaking,\n\n1342\n01:06:41,180 --> 01:06:45,910\nso it's pretty safe to buy and\nusually you save a ton of money.\n\n1343\n01:06:45,910 --> 01:06:49,430\nBut, it's rare that an eBay\nseller knows enough to\n\n1344\n01:06:49,430 --> 01:06:52,150\ntruly wipe the configs before\nthey send them to you.\n\n1345\n01:06:52,150 --> 01:06:54,142\nAnd so it's not uncommon to get\none that you're locked out of.\n\n1346\n01:06:54,142 --> 01:06:55,440\nAll right.\n\n1347\n01:06:55,440 --> 01:07:00,750\nWell, getting into one it's\nactually not that hard.\n\n1348\n01:07:00,750 --> 01:07:04,290\nBasically if you boot up a router\nthat's been password protected and\n\n1349\n01:07:04,290 --> 01:07:07,070\nyou don't know the password,\nyou're not gonna be able to get into it.\n\n1350\n01:07:07,070 --> 01:07:08,580\nSo you're going to have problems there.\n\n1351\n01:07:08,580 --> 01:07:12,450\nSo the trick we need to implement,\nis we need to get into the ROM\n\n1352\n01:07:12,450 --> 01:07:15,650\nmonitor mode on the system\nwithout actually logging in.\n\n1353\n01:07:15,650 --> 01:07:17,530\nWe don't have a password.\n\n1354\n01:07:17,530 --> 01:07:20,260\nLet's pretend for a minute that I don't\nknow the password to this router.\n\n1355\n01:07:20,260 --> 01:07:25,338\nWell, I'm already logged into it,\nso there's my first problem, right.\n\n1356\n01:07:25,338 --> 01:07:25,879\n>> [LAUGH]\n>> And we don't even\n\n1357\n01:07:25,879 --> 01:07:27,367\nhave a console password,\nso let's set one of those.\n\n1358\n01:07:40,545 --> 01:07:46,640\nAll right.\nSo, oh well, that didn't work did it?\n\n1359\n01:07:46,640 --> 01:07:51,020\nWell anyhow, so I can log in here and\nI'm not enabled.\n\n1360\n01:07:52,030 --> 01:07:55,620\nIf I do an enable it asks me for\na password, right.\n\n1361\n01:07:55,620 --> 01:07:58,780\nAnd if I don't know that password I'm not\ngonna be able to get into the system.\n\n1362\n01:07:58,780 --> 01:08:00,250\nI need some way to get around that.\n\n1363\n01:08:00,250 --> 01:08:03,890\nWell, we mentioned earlier you can\nchange the configuration register, but\n\n1364\n01:08:03,890 --> 01:08:06,390\nto change the configuration register,\nI need to get into config, and\n\n1365\n01:08:06,390 --> 01:08:07,940\nI can't get into config right now.\n\n1366\n01:08:07,940 --> 01:08:11,620\nSo I'm kind of in this problem where\nI'm locked out of the system and\n\n1367\n01:08:11,620 --> 01:08:12,692\nI can't get into it.\n\n1368\n01:08:12,692 --> 01:08:13,280\nAll right.\n\n1369\n01:08:13,280 --> 01:08:17,940\nSo the trick here is to power off\nthe router, physically power it off.\n\n1370\n01:08:17,940 --> 01:08:21,880\nAnd when you power it back on, there's a\nbrief period of time at the beginning, or\n\n1371\n01:08:21,880 --> 01:08:26,250\nyou can hit the break key on your keyboard\nand it will stop the boot process.\n\n1372\n01:08:26,250 --> 01:08:28,550\nRight, so lets take a look at\nthat let's see this in action.\n\n1373\n01:08:29,980 --> 01:08:34,260\nNow I don't remember Ronny do you\nremember in PUTTY, is it control B?\n\n1374\n01:08:34,260 --> 01:08:38,440\n>> I do not remember at all in PU [LAUGH]\n>> Yeah now PUTTY has a keyboard shortcut\n\n1375\n01:08:38,440 --> 01:08:40,202\nfor break I wanna say it's control b.\n\n1376\n01:08:40,202 --> 01:08:43,403\nAll right, so I'm rebooting this\nsystem and I'm gonna try control b.\n\n1377\n01:08:48,678 --> 01:08:50,860\nThat doesn't seem to be doing much.\n\n1378\n01:08:50,860 --> 01:08:54,140\nBut basically it works for\nthe first 10 seconds or so\n\n1379\n01:08:54,140 --> 01:08:57,500\nduring boot so you have to kind\nof get it in there in time.\n\n1380\n01:08:57,500 --> 01:09:01,630\nIf you don't catch it in time, then it\nis just gonna boot up like normal, and\n\n1381\n01:09:01,630 --> 01:09:04,750\nthen it doesn't serve it's purpose.\n\n1382\n01:09:04,750 --> 01:09:10,580\nSo yeah,\nit doesn't seem to be doing its thing.\n\n1383\n01:09:10,580 --> 01:09:11,390\nSo let's see.\n\n1384\n01:09:11,390 --> 01:09:13,470\nThere is a keyboard shortcut in here for\nit.\n\n1385\n01:09:14,920 --> 01:09:15,600\nThere we go.\n\n1386\n01:09:15,600 --> 01:09:20,560\nSo, I just right-clicked on the menu up\nhere and you got special command break.\n\n1387\n01:09:20,560 --> 01:09:22,670\nSo apparently Ctrl-b is not it.\n\n1388\n01:09:22,670 --> 01:09:24,500\nSo I sent a break and see what it did?\n\n1389\n01:09:24,500 --> 01:09:27,350\nCommand boot aborted\ndue to user interrupt.\n\n1390\n01:09:27,350 --> 01:09:31,010\nSo I stopped the boot and\nforced it go to ROMmon.\n\n1391\n01:09:31,010 --> 01:09:36,320\n>> Now once we're in ROMMON, we're still\nnot exactly where we need to be, right.\n\n1392\n01:09:36,320 --> 01:09:39,310\nGetting into Raman is actually\nthe initial part of what we need,\n\n1393\n01:09:39,310 --> 01:09:40,910\nwhich is really good.\n\n1394\n01:09:40,910 --> 01:09:45,390\nBut what we really need is to be able\nto change that config register so\n\n1395\n01:09:45,390 --> 01:09:48,380\nthat we can get into that\npassword recovery mode here.\n\n1396\n01:09:48,380 --> 01:09:52,330\nSo you have to at least know those\nbasic commands to be able to do so.\n\n1397\n01:09:52,330 --> 01:09:56,525\nSo for us in ROMmon,\nit's gonna be CONF Reg config, or\n\n1398\n01:09:56,525 --> 01:09:59,180\nconfreg, which I'll never say.\n\n1399\n01:09:59,180 --> 01:10:00,648\n>> Yeah.\n[LAUGH]\n\n1400\n01:10:00,648 --> 01:10:05,363\n>> And then the hexadecimal value, 0x2142.\n\n1401\n01:10:05,363 --> 01:10:08,070\n>> Now, remember from earlier, 2142.\n\n1402\n01:10:08,070 --> 01:10:12,740\nThat's the one that says,\nboot up load the iOS, but\n\n1403\n01:10:12,740 --> 01:10:15,500\ndon't load the configuration file.\n\n1404\n01:10:15,500 --> 01:10:17,310\n>> If we load the configuration file,\n\n1405\n01:10:17,310 --> 01:10:19,910\nwe'll just have the same\npassword that we don't know.\n\n1406\n01:10:19,910 --> 01:10:21,650\nAnd so that's why we don't want that.\n\n1407\n01:10:22,800 --> 01:10:27,530\n>> So now I can run reset, which in\nROMmon is gonna reboot the router.\n\n1408\n01:10:27,530 --> 01:10:30,230\nThis time, when it reboots, it willl\nhave that other configuration register.\n\n1409\n01:10:30,230 --> 01:10:34,430\nIt's gonna load up, it's gonna load\nthe iOS It's not gonna load the config so\n\n1410\n01:10:34,430 --> 01:10:38,560\nnow I'll be able to enable, I'll get to\nmy privilege mode prompt because there's\n\n1411\n01:10:38,560 --> 01:10:41,130\nno password on a default router.\n\n1412\n01:10:41,130 --> 01:10:45,945\nThe start up dash config will still\ncontain my full configuration files\n\n1413\n01:10:45,945 --> 01:10:47,925\nminus those passwords.\n\n1414\n01:10:47,925 --> 01:10:48,845\nYep.\n\n1415\n01:10:48,845 --> 01:10:51,075\nSo we'll give it a moment\nwhile it comes up.\n\n1416\n01:10:51,075 --> 01:10:52,945\nAnd basically what it does.\n\n1417\n01:10:52,945 --> 01:10:58,025\nIt gives us a chance to copy that\nconfiguration, throw it in a notepad or\n\n1418\n01:10:58,025 --> 01:11:03,330\nwhatever and from there we can edit\nout the parts that we don't want and\n\n1419\n01:11:03,330 --> 01:11:06,100\npaste it back in right, or\n\n1420\n01:11:06,100 --> 01:11:07,848\npaste it with passwords that we know\n\n1421\n01:11:07,848 --> 01:11:12,997\n>> [LAUGH]\n>> All right so\n\n1422\n01:11:12,997 --> 01:11:14,435\nwe're going to let it boot up here.\n\n1423\n01:11:14,435 --> 01:11:17,036\nIt shouldn't take too let me\nget a notepad window handy.\n\n1424\n01:11:18,317 --> 01:11:19,478\nThere we go.\n\n1425\n01:11:23,058 --> 01:11:25,300\nAll right, so it's booting up.\n\n1426\n01:11:25,300 --> 01:11:27,280\nYou can hear my fans\nramping down back there.\n\n1427\n01:11:28,350 --> 01:11:30,660\nAnd any time now I'll get my prompt.\n\n1428\n01:11:32,150 --> 01:11:32,851\nAnd go.\n\n1429\n01:11:32,851 --> 01:11:37,284\n[LAUGH] It's like [CROSSTALK]\nwatching water to boil.\n\n1430\n01:11:37,284 --> 01:11:41,835\n>> And\npressing enter 9000 times doesn't help?\n\n1431\n01:11:41,835 --> 01:11:44,435\n>> Mouse clicks, move the mouse,\nthat makes it go faster.\n\n1432\n01:11:44,435 --> 01:11:47,647\nSo we'll let it boot up It is\nnice to be running an iOS that\n\n1433\n01:11:47,647 --> 01:11:49,397\nwas released this year now.\n\n1434\n01:11:49,397 --> 01:11:50,607\nWe're semi current there.\n\n1435\n01:11:53,327 --> 01:11:55,419\nAll right.\nSo when it comes up, basically,\n\n1436\n01:11:55,419 --> 01:11:57,907\nthe configuration is gone\nas far it's concerned.\n\n1437\n01:11:57,907 --> 01:11:58,860\nIt doesn't see it.\n\n1438\n01:11:58,860 --> 01:12:01,963\nSo it may ask for me to go into\nthat initial setup wizard and\n\n1439\n01:12:01,963 --> 01:12:03,522\nI just need to say no to that.\n\n1440\n01:12:03,522 --> 01:12:09,099\nIf I do a show running dash config, it's\ngoing to be the default configuration.\n\n1441\n01:12:09,099 --> 01:12:12,470\nRight?\nBut if I do a show startup dash config all\n\n1442\n01:12:12,470 --> 01:12:15,440\nmy old settings are still there,\neverything's there.\n\n1443\n01:12:15,440 --> 01:12:17,860\nIf the passwords are stored in plain text,\nI'll even have the passwords.\n\n1444\n01:12:17,860 --> 01:12:20,770\n>> Yeah.\n>> But, if they're encrypted.\n\n1445\n01:12:20,770 --> 01:12:21,420\n>> Yeah.\n\n1446\n01:12:21,420 --> 01:12:25,820\n>> Then I'm gonna have to do\nsomething a little different.\n\n1447\n01:12:25,820 --> 01:12:28,530\nSo here it's asking if I want to\ngo into the initial configuration.\n\n1448\n01:12:28,530 --> 01:12:32,512\nI'm gonna say no.\nIt thinks that this is a brand new blank\n\n1449\n01:12:32,512 --> 01:12:33,392\nrouter.\n\n1450\n01:12:37,444 --> 01:12:40,540\nA brand new blank slow router.\n\n1451\n01:12:40,540 --> 01:12:42,340\nThere we go.\nAll right, so\n\n1452\n01:12:42,340 --> 01:12:45,960\nI'm going to enable,\nno password on a blank router.\n\n1453\n01:12:45,960 --> 01:12:50,250\nAnd if I do a show running dash config,\nI'll see this is pretty much blank.\n\n1454\n01:12:50,250 --> 01:12:52,430\nMy host name is that default router.\n\n1455\n01:12:52,430 --> 01:12:56,240\nMy interfaces are shut down and\ndon't have IP addresses.\n\n1456\n01:12:56,240 --> 01:12:58,770\nThis is all of the default\nstuff that we expect to see.\n\n1457\n01:12:59,910 --> 01:13:06,740\nBut if I do a show start-up- config,\nright, the start-up config is there.\n\n1458\n01:13:06,740 --> 01:13:09,430\nSee?\nThere's R1, there's my password,\n\n1459\n01:13:09,430 --> 01:13:14,350\nit's there, it just ignored it because\nwe changed the config register.\n\n1460\n01:13:14,350 --> 01:13:14,960\n>> Right.\n\n1461\n01:13:14,960 --> 01:13:15,930\n>> Alright?\n\n1462\n01:13:15,930 --> 01:13:20,430\nSo what I wanna do is I wanna\ntake that configuration and\n\n1463\n01:13:20,430 --> 01:13:22,440\ncopy it into my clipboard.\n\n1464\n01:13:22,440 --> 01:13:25,220\nSo I'm just gonna scroll back here and\nstart with that service command.\n\n1465\n01:13:25,220 --> 01:13:28,750\nAnd let's just.\n\n1466\n01:13:30,400 --> 01:13:31,510\nThere we go.\n\n1467\n01:13:31,510 --> 01:13:33,020\nOh shoot.\n\n1468\n01:13:33,020 --> 01:13:36,430\nYou know copying with\na TouchPad is a nightmare.\n\n1469\n01:13:36,430 --> 01:13:37,850\nLet me try that again.\n\n1470\n01:13:40,820 --> 01:13:41,700\nAlmost there we go.\n\n1471\n01:13:41,700 --> 01:13:42,640\nAll right.\n\n1472\n01:13:42,640 --> 01:13:45,840\nSo there's config and\nlet me just drop that into notepad.\n\n1473\n01:13:45,840 --> 01:13:48,770\nSo now I've got my configuration, right?\n\n1474\n01:13:48,770 --> 01:13:52,030\nSo from here all I really\nhave to do is go through and\n\n1475\n01:13:52,030 --> 01:13:53,890\nchange things like the password.\n\n1476\n01:13:53,890 --> 01:13:58,480\nI can either delete the password out or I\ncan change it to something that I do know.\n\n1477\n01:13:58,480 --> 01:14:02,650\nI can say, enable secret and\nthen maybe I want it to be Cisco123.\n\n1478\n01:14:02,650 --> 01:14:03,720\nRight?\n\n1479\n01:14:03,720 --> 01:14:07,430\nAnd then I can keep looking for any other\npasswords that are here in the system.\n\n1480\n01:14:07,430 --> 01:14:09,670\nI should find usernames and\nstuff eventually here.\n\n1481\n01:14:09,670 --> 01:14:13,920\nUsernames and\nwe've got admin privilege15, secret.\n\n1482\n01:14:13,920 --> 01:14:18,250\nAnd maybe I'll make that Cisco\none two three and so on.\n\n1483\n01:14:18,250 --> 01:14:20,670\nSo I just plug in these\nones that I do know.\n\n1484\n01:14:20,670 --> 01:14:25,560\nI don't know what these passwords were,\nand I can't unencrypt them.\n\n1485\n01:14:25,560 --> 01:14:29,550\nThe type five passwords\nwith a MD five has ones and\n\n1486\n01:14:29,550 --> 01:14:31,830\nthere's not much I can do about those.\n\n1487\n01:14:31,830 --> 01:14:36,810\nAnd let's look on the vty lines and\nthe console port.\n\n1488\n01:14:36,810 --> 01:14:42,800\nSo, my vty lines, my console had that\npassword which it wasn't used in anyway.\n\n1489\n01:14:42,800 --> 01:14:45,530\nAnd then my vty's don't have a password.\n\n1490\n01:14:45,530 --> 01:14:46,730\nSo, we're all good there.\n\n1491\n01:14:46,730 --> 01:14:48,709\nThat config looks good.\n\n1492\n01:14:48,709 --> 01:14:49,225\nRight?\n\n1493\n01:14:49,225 --> 01:14:52,150\nSo what I can do now Is over here.\n\n1494\n01:14:53,350 --> 01:14:55,900\nI can now get into the routers.\n\n1495\n01:14:55,900 --> 01:14:56,500\nConfiguration.\n\n1496\n01:14:56,500 --> 01:14:59,040\nAnd I can just paste all that in.\n\n1497\n01:14:59,040 --> 01:14:59,690\nRight?\n\n1498\n01:14:59,690 --> 01:15:03,130\nThe running config is\na blank default config.\n\n1499\n01:15:03,130 --> 01:15:05,040\nSo I can just paste this in.\n\n1500\n01:15:05,040 --> 01:15:07,550\nIt's gonna run all those commands.\n\n1501\n01:15:07,550 --> 01:15:08,150\nAll right?\n\n1502\n01:15:08,150 --> 01:15:10,230\nGetting it all set back\nup the way that it was.\n\n1503\n01:15:12,460 --> 01:15:15,130\nAnd there it goes.\n\n1504\n01:15:15,130 --> 01:15:16,350\nHad to stop and think for a minute there.\n\n1505\n01:15:18,000 --> 01:15:21,880\nNow the only problem with doing\nit this way is that by default\n\n1506\n01:15:21,880 --> 01:15:23,790\nall the interfaces are shut down.\n\n1507\n01:15:23,790 --> 01:15:26,028\nSo I do need to tell it to\nturn those interfaces on.\n\n1508\n01:15:26,028 --> 01:15:30,432\nI think those are the only\n\n1509\n01:15:30,432 --> 01:15:35,050\ntwo I was actually using.\n\n1510\n01:15:39,440 --> 01:15:41,760\nThere we go.\nSo those interfaces are on.\n\n1511\n01:15:41,760 --> 01:15:45,070\nNow, I've got my good\nconfiguration in there\n\n1512\n01:15:45,070 --> 01:15:47,630\nminus the passwords that I didn't know.\n\n1513\n01:15:47,630 --> 01:15:51,190\nAnd from there,\nI can get back into configuration and\n\n1514\n01:15:51,190 --> 01:15:53,620\nwe can issue the config-reg command.\n\n1515\n01:15:53,620 --> 01:15:56,530\nGod forbid it'd be the same in the two.\n\n1516\n01:15:56,530 --> 01:16:00,040\nAnd I can put my configuration\nregister back to 2102.\n\n1517\n01:16:00,040 --> 01:16:03,960\nIt'll tell me that that won't\ntake effect until a reboot.\n\n1518\n01:16:03,960 --> 01:16:04,770\nIt doesn't tell me here.\n\n1519\n01:16:04,770 --> 01:16:07,300\nIt tells me in the show version.\n\n1520\n01:16:07,300 --> 01:16:08,570\nYep.\n\n1521\n01:16:08,570 --> 01:16:11,317\nLet me look in here.\n\n1522\n01:16:11,317 --> 01:16:15,560\nThere we go.\nWill be 2102 at next reload.\n\n1523\n01:16:15,560 --> 01:16:18,240\nNow, I do need to save what I just did.\n\n1524\n01:16:21,930 --> 01:16:23,180\nThere we go.\n\n1525\n01:16:23,180 --> 01:16:25,840\nAnd now we're in business.\n\n1526\n01:16:25,840 --> 01:16:28,380\n>> Yep.\n>> We've just overridden the startup\n\n1527\n01:16:28,380 --> 01:16:32,240\nconfig here with our new running config\nand so once we actually have that and\n\n1528\n01:16:32,240 --> 01:16:36,140\nwe now have our regular configuration\nregister back in order.\n\n1529\n01:16:36,140 --> 01:16:38,180\nIt should load up the operating system and\n\n1530\n01:16:38,180 --> 01:16:40,390\nit should also load up our\nnew startup config as well.\n\n1531\n01:16:42,785 --> 01:16:44,015\n>> All right.\nSo I sent the reload command.\n\n1532\n01:16:44,015 --> 01:16:45,185\nIt's gonna reboot.\n\n1533\n01:16:45,185 --> 01:16:48,005\nConfiguration register is\nback to the way it should be.\n\n1534\n01:16:48,005 --> 01:16:51,397\nIt's gonna come up, and everything is\ngonna be sunshine and rainbows, right?\n\n1535\n01:16:51,397 --> 01:16:52,537\n>> Absolutely.\n\n1536\n01:16:52,537 --> 01:16:55,830\n>> [LAUGH] All right, so\npassword recovery is not a big deal.\n\n1537\n01:16:55,830 --> 01:16:58,450\nThe other cool thing is if you\nbought a router like this and\n\n1538\n01:16:58,450 --> 01:17:02,510\nit came from some other company,\nyou buy it off eBay or whatever.\n\n1539\n01:17:02,510 --> 01:17:04,830\nA lot of times you can look\nat that startup config and\n\n1540\n01:17:04,830 --> 01:17:06,840\nyou can see exactly how they set it up.\n\n1541\n01:17:06,840 --> 01:17:08,020\nThat's a big problem.\n\n1542\n01:17:08,020 --> 01:17:10,960\nWhen companies get rid of their equipment,\nthey need to sanitize\n\n1543\n01:17:10,960 --> 01:17:14,700\nthe equipment because there might be\nVPN configuration details in there.\n\n1544\n01:17:14,700 --> 01:17:17,000\nTheir public IPs and things like that.\n\n1545\n01:17:17,000 --> 01:17:19,880\nAnd while they got rid of the router,\nthey more than likely just\n\n1546\n01:17:19,880 --> 01:17:22,560\nreplaced it with a new one probably\nwith the same config and so\n\n1547\n01:17:22,560 --> 01:17:24,920\nyou've got those\nconfiguration settings now.\n\n1548\n01:17:24,920 --> 01:17:27,840\nIn theory you could wage an attack\nagainst whoever that customer was,\n\n1549\n01:17:27,840 --> 01:17:29,660\nthat previous customer.\n\n1550\n01:17:29,660 --> 01:17:31,210\nProbably some company that\nwent out of business though,\n\n1551\n01:17:31,210 --> 01:17:32,750\nthat's usually where a lot\nof the equipment comes from.\n\n1552\n01:17:33,940 --> 01:17:38,610\nBut I know I've bought stuff that was\ndecommissioned military equipment before,\n\n1553\n01:17:38,610 --> 01:17:42,590\nwhich they're not supposed to\nsell on eBay, and it had configs.\n\n1554\n01:17:42,590 --> 01:17:46,710\nIt does happen.\n\n1555\n01:17:46,710 --> 01:17:50,240\nSo basically password recovery,\nnot that big of a deal.\n\n1556\n01:17:50,240 --> 01:17:51,530\nThere are other ways to do it.\n\n1557\n01:17:51,530 --> 01:17:55,350\nFor example I could have used TFTP and\njust copy a configuration back,\n\n1558\n01:17:55,350 --> 01:17:57,370\nor other things of that nature.\n\n1559\n01:17:57,370 --> 01:17:58,870\nSeveral different ways to go about it.\n\n1560\n01:18:00,110 --> 01:18:04,110\nIf you bought the new device, and\nyou don't care about the config,\n\n1561\n01:18:04,110 --> 01:18:06,250\nyou don't wanna recover it like we did.\n\n1562\n01:18:06,250 --> 01:18:10,020\nInstead you can do an erase\nstart up dash config, and\n\n1563\n01:18:10,020 --> 01:18:11,790\nthat just wipes out\nthat config altogether.\n\n1564\n01:18:11,790 --> 01:18:13,420\nYou can start from scratch.\n\n1565\n01:18:13,420 --> 01:18:16,888\nIf you just bought the router,\nthat's probably what you want to do.\n\n1566\n01:18:16,888 --> 01:18:18,540\nRight.\n\n1567\n01:18:18,540 --> 01:18:20,885\nOne comment I will make,\nwhen you do an erase start up config,\n\n1568\n01:18:20,885 --> 01:18:23,265\nthat does wipe the configuration,\nthat's good.\n\n1569\n01:18:23,265 --> 01:18:25,945\nIt doesn't format the flash or\nanything, so\n\n1570\n01:18:25,945 --> 01:18:28,805\nthere may still be other\nfiles sitting there in flash.\n\n1571\n01:18:28,805 --> 01:18:32,325\nA lot of times people back up the\nconfiguration to other files, then flash.\n\n1572\n01:18:32,325 --> 01:18:36,790\nSo you might need to get in there and\ndo a little, spring cleaning.\n\n1573\n01:18:36,790 --> 01:18:37,420\nAnd kinda get it set.\n\n1574\n01:18:37,420 --> 01:18:40,180\n>> Yeah, just be careful\nabout deleting the actual IOS\n\n1575\n01:18:40,180 --> 01:18:41,360\non the flash when you do it.\n\n1576\n01:18:41,360 --> 01:18:42,060\n>> Yeah.\n\n1577\n01:18:42,060 --> 01:18:44,390\nAnd really,\nthat's the only critical file in the IOS.\n\n1578\n01:18:44,390 --> 01:18:49,400\nSome of them will have like web user\ninterface, the SDM or whatever in there.\n\n1579\n01:18:49,400 --> 01:18:52,730\nBut a lot of them,\nit's just the IOS file and that's it.\n\n1580\n01:18:52,730 --> 01:18:56,090\nAs soon as this one gets to where\nI can issue commands again,\n\n1581\n01:18:56,090 --> 01:18:58,225\nI'll show you guys what I mean.\n\n1582\n01:18:58,225 --> 01:19:03,720\n>> [LAUGH]\n>> We'll give it a second.\n\n1583\n01:19:03,720 --> 01:19:06,200\nSo, whenever I do an upgrade of a router\n\n1584\n01:19:06,200 --> 01:19:09,260\nI know that the new IOS might\nnot support some old commands.\n\n1585\n01:19:09,260 --> 01:19:13,100\nSo if I'm in testing or whatever, I may\nback up the IOS file, or the config file.\n\n1586\n01:19:13,100 --> 01:19:14,840\nAnd I might back it up\nright to this router.\n\n1587\n01:19:14,840 --> 01:19:16,890\nSo let me show you an example.\n\n1588\n01:19:16,890 --> 01:19:17,390\nWhoops.\n\n1589\n01:19:19,280 --> 01:19:21,430\nAll right.\nSo if I know I'm gonna upgrade,\n\n1590\n01:19:21,430 --> 01:19:25,753\nI might do a copy running-config to\n\n1591\n01:19:25,753 --> 01:19:31,520\nflash:/prior-to-upgrade.txt or\n\n1592\n01:19:31,520 --> 01:19:36,700\ndot conveyor or whatever,\nso I'll call it that.\n\n1593\n01:19:36,700 --> 01:19:39,510\nSo what it's gonna do, oh,\nwhy's it gonna erase my flash?\n\n1594\n01:19:39,510 --> 01:19:40,010\nDadgummit.\n\n1595\n01:19:41,860 --> 01:19:42,720\nThere we go.\n\n1596\n01:19:42,720 --> 01:19:43,608\nI just said no.\n\n1597\n01:19:43,608 --> 01:19:45,050\n[LAUGH] I don't want it to erase my flash.\n\n1598\n01:19:45,050 --> 01:19:46,980\nI just want it to copy this dadgum file.\n\n1599\n01:19:46,980 --> 01:19:50,770\nIt apparently though I was copying\nan IOS instead of the config.\n\n1600\n01:19:50,770 --> 01:19:52,262\nYou defiantly want to be careful there.\n\n1601\n01:19:52,262 --> 01:19:57,260\nSo now when I do a /dir see how I've\ngot my ios files right there, and\n\n1602\n01:19:57,260 --> 01:20:00,525\nnow I've got another text file right here.\n\n1603\n01:20:00,525 --> 01:20:02,360\nThat's got my configuration.\n\n1604\n01:20:02,360 --> 01:20:04,641\nSo I might do an upgrade on my system.\n\n1605\n01:20:04,641 --> 01:20:06,260\nSo I upgrade all my stuff.\n\n1606\n01:20:06,260 --> 01:20:09,082\nAnd after the upgrade I noticed\nsome commands were missing, but\n\n1607\n01:20:09,082 --> 01:20:12,582\nI didn't document them or I wasn't plugged\ninto the console when it booted up so\n\n1608\n01:20:12,582 --> 01:20:14,140\nI didn't get to see it.\n\n1609\n01:20:14,140 --> 01:20:16,530\nWell now I've got a backup of\nmy config right here in flash.\n\n1610\n01:20:16,530 --> 01:20:18,820\nFlash doesn't get erased when we reboot,\nso\n\n1611\n01:20:18,820 --> 01:20:23,090\nit'll be there and I can always reload it.\n\n1612\n01:20:23,090 --> 01:20:29,444\nI can say copy flash:/prior-to-upgrade.txt\n\n1613\n01:20:29,444 --> 01:20:34,300\nto running-config, and\nnow it'll copy it into running.\n\n1614\n01:20:34,300 --> 01:20:37,560\nNow it'll do a merge with\nwhatever's in running right now.\n\n1615\n01:20:37,560 --> 01:20:42,125\nIf I wanted to truly revert to that, the\nbest thing to do would be to do an erase\n\n1616\n01:20:42,125 --> 01:20:47,920\nstartup-config, which is gonna wipe\nthe configuration of the router, right?\n\n1617\n01:20:47,920 --> 01:20:49,310\nSo here we go, it's just gonna wipe it.\n\n1618\n01:20:50,540 --> 01:20:51,930\nSo the configuration is wiped.\n\n1619\n01:20:51,930 --> 01:20:54,860\nThe IOS is still there, but\nthe configuration is wiped.\n\n1620\n01:20:54,860 --> 01:21:01,450\nSo now there is no startup config and if I\ndo a dir, there's my prior to upgrade and\n\n1621\n01:21:01,450 --> 01:21:06,848\nI can say copy to startup-config.\n\n1622\n01:21:06,848 --> 01:21:12,970\nNow that startup config was empty,\nit's being replaced by this one.\n\n1623\n01:21:12,970 --> 01:21:15,650\nAnd now it's all back in there.\n\n1624\n01:21:15,650 --> 01:21:17,733\nAnd if I do a reload, we'll reboot and\n\n1625\n01:21:17,733 --> 01:21:21,338\nwe will be back to the way that it\nwas when we made that backup file.\n\n1626\n01:21:21,338 --> 01:21:24,000\nSo that's an example of the other\ntypes of files you might find in\n\n1627\n01:21:24,000 --> 01:21:24,887\nflash just sitting around.\n\n1628\n01:21:24,887 --> 01:21:29,250\nSo, all right.\n\n1629\n01:21:29,250 --> 01:21:32,020\nWell Ronnie,\nas far as manipulating the files and\n\n1630\n01:21:32,020 --> 01:21:34,815\nstuff, I think that's pretty much it.\n\n1631\n01:21:34,815 --> 01:21:36,130\nI kind of tapped out.\n\n1632\n01:21:36,130 --> 01:21:39,710\nI will say that for every router that I\nwork on, one of the first things I do is\n\n1633\n01:21:39,710 --> 01:21:44,050\nback up its IOS files so I've got a whole\ncollection of IOS files from the years.\n\n1634\n01:21:44,050 --> 01:21:47,040\nBut it is a good idea to back them up,\nand then you've got that copy.\n\n1635\n01:21:47,040 --> 01:21:50,470\nYou can always download it from Cisco,\nbut if you lose Internet access.\n\n1636\n01:21:50,470 --> 01:21:52,240\n>> Yeah.\n>> You may not have that access to Cisco.\n\n1637\n01:21:52,240 --> 01:21:53,980\nSo I like to keep back up copies myself.\n\n1638\n01:21:55,120 --> 01:21:57,150\nJust make sure you do your backups,\nit's real easy.\n\n1639\n01:21:57,150 --> 01:22:00,940\nYou can whip up a TFTP server or\nFTP server really simple, really quick.\n\n1640\n01:22:00,940 --> 01:22:02,910\nDo your backups, and\nthen you got that safety net.\n\n1641\n01:22:02,910 --> 01:22:04,870\nNo matter what you do,\nno matter how bad things get,\n\n1642\n01:22:04,870 --> 01:22:07,100\nyou got that backup you can always load.\n\n1643\n01:22:07,100 --> 01:22:08,340\n>> Yep.\n\n1644\n01:22:08,340 --> 01:22:10,430\nSo we went through a lot of stuff today.\n\n1645\n01:22:10,430 --> 01:22:11,680\n>> Yeah, it's good stuff.\n\n1646\n01:22:11,680 --> 01:22:13,900\nI thought we could get in done\nin one show, but apparently not.\n\n1647\n01:22:13,900 --> 01:22:16,200\nSo, all right, well ladies and\n\n1648\n01:22:16,200 --> 01:22:19,480\ngentleman as always if you have questions\nmake sure you go to our website.\n\n1649\n01:22:19,480 --> 01:22:24,470\nLive during the show itpro.tv/live, the\nchatroom is right beneath the live video.\n\n1650\n01:22:24,470 --> 01:22:25,460\nYou can post your questions.\n\n1651\n01:22:25,460 --> 01:22:27,080\nWe monitor and answer during the show.\n\n1652\n01:22:27,080 --> 01:22:29,320\nIf you have questions after the show,\n\n1653\n01:22:29,320 --> 01:22:31,640\non the top of every single\npage is a link that says Q&A.\n\n1654\n01:22:31,640 --> 01:22:35,580\nYou can go into the Question and Answer\narea, post your questions, we monitor and,\n\n1655\n01:22:35,580 --> 01:22:36,720\noddly enough, answer.\n\n1656\n01:22:36,720 --> 01:22:38,032\n>> [LAUGH]\n>> So it's almost like that's\n\n1657\n01:22:38,032 --> 01:22:38,630\nwhy we named it.\n\n1658\n01:22:38,630 --> 01:22:39,875\n>> Maybe even odd answers.\n\n1659\n01:22:39,875 --> 01:22:41,430\n>> [LAUGH]\n>> All right, so\n\n1660\n01:22:41,430 --> 01:22:44,120\ndefinitely keep that in mind as\na resource available for you guys.\n\n1661\n01:22:44,120 --> 01:22:45,420\nDefinitely take advantage of that.\n\n1662\n01:22:45,420 --> 01:22:46,020\n>> Right.\n\n1663\n01:22:46,020 --> 01:22:49,420\n>> Otherwise signing out for\nIT Pro TV, I'm Don Pezet.\n\n1664\n01:22:49,420 --> 01:22:50,190\n>> And I'm Ronnie Wong.\n\n1665\n01:22:50,190 --> 01:22:51,570\n>> And we'll see you next time.\n\n1666\n01:22:51,570 --> 01:23:01,570\n[MUSIC]\n\n",
          "vimeoId": "80368850"
        },
        {
          "description": "In this episode Ronnie and Don re-examine dynamic routing protocols and build on to the topics covered in the CCENT show. They cover administrative distance and loop prevention mechanisms as well as other routing topics.",
          "length": "5019",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/005-Routing-Protocols.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/005-Routing-Protocols-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/005-Routing-Protocols-sm.jpg",
          "title": "Routing Protocols",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:31,059 --> 00:00:33,906\nAll right, good morning,\ngood afternoon, and good evening,\n\n3\n00:00:33,906 --> 00:00:36,081\nand welcome back to another\nepisode of ITProTV.\n\n4\n00:00:36,081 --> 00:00:38,498\nI'm your host Don Pezet\ntoday with Mr Ronnie Wong.\n\n5\n00:00:38,498 --> 00:00:39,880\nHow's it going Ronnie?\n\n6\n00:00:39,880 --> 00:00:41,590\n>> I am doing well today.\n\n7\n00:00:41,590 --> 00:00:45,530\nI am doing much better than any mayor from\nToronto trying to get in to the US to see\n\n8\n00:00:45,530 --> 00:00:46,320\na hockey game.\n\n9\n00:00:46,320 --> 00:00:48,615\n>> I don't know, it sounds like he's\nhaving a pretty good time up there.\n\n10\n00:00:48,615 --> 00:00:51,810\n>> [LAUGH]\n>> So, you know,\n\n11\n00:00:51,810 --> 00:00:53,230\nI think it is funny, though,\n\n12\n00:00:53,230 --> 00:00:57,700\non an international level that politicians\nare pretty much the same everywhere.\n\n13\n00:00:57,700 --> 00:00:59,710\nWe picked the wrong career apparently,\nRonnie.\n\n14\n00:00:59,710 --> 00:01:02,580\nNo sex, drugs, and rock and roll here.\n\n15\n00:01:02,580 --> 00:01:04,600\nAll right, so\n\n16\n00:01:04,600 --> 00:01:09,640\ntoday we had an exciting Cisco episode\nbefore us, or a CCNA more particularly.\n\n17\n00:01:10,830 --> 00:01:12,640\nWe've done many episodes now.\n\n18\n00:01:12,640 --> 00:01:15,020\nI've kinda lost track of how many\nepisodes we've done on CCNA.\n\n19\n00:01:15,020 --> 00:01:18,370\nThat have all focused on\nmanaging the routers.\n\n20\n00:01:18,370 --> 00:01:19,240\nStuff on a single router.\n\n21\n00:01:19,240 --> 00:01:22,180\nNow we're going to get into the good\nstuff, the routing protocols.\n\n22\n00:01:22,180 --> 00:01:25,770\n>> Yeah, kind of took a look, just\nbriefly, about switching technologies.\n\n23\n00:01:25,770 --> 00:01:30,830\nBut really on the CCNA we're\nfocusing in on the router portion\n\n24\n00:01:30,830 --> 00:01:32,630\nof switches and routers.\n\n25\n00:01:32,630 --> 00:01:34,510\nSo we're going to go much\nmore in depth in this.\n\n26\n00:01:34,510 --> 00:01:37,850\nSo much so\nthat it should help you to prepare for\n\n27\n00:01:37,850 --> 00:01:41,290\nthe CCNA exam in routing and switching.\n\n28\n00:01:41,290 --> 00:01:43,726\nAnd so we want to make sure,\nin this particular episode,\n\n29\n00:01:43,726 --> 00:01:46,460\nthat we go over the basics\nof routing protocols for us.\n\n30\n00:01:46,460 --> 00:01:49,350\nAnd make sure we have a solid\nunderstanding of the fundamentals and\n\n31\n00:01:49,350 --> 00:01:51,240\ntheories behind how\nrouting actually works.\n\n32\n00:01:51,240 --> 00:01:54,700\n>> Now for those of you who are following\nalong in the objective list,\n\n33\n00:01:54,700 --> 00:01:58,650\nthis is objective 2.4.\n\n34\n00:01:58,650 --> 00:02:02,170\nDifferentiate methods of routing and\nrouting protocols.\n\n35\n00:02:02,170 --> 00:02:04,910\nSo we're gonna take a look at some of\nthe routing protocols that are out there,\n\n36\n00:02:04,910 --> 00:02:08,040\nthe categories they fall in, and\nhow we can differentiate between them.\n\n37\n00:02:08,040 --> 00:02:10,850\nNow we did that in the CCENT show.\n\n38\n00:02:10,850 --> 00:02:14,100\nSo for those of you who already watched\nthat show, that may sound familiar.\n\n39\n00:02:14,100 --> 00:02:16,940\nWell we're gonna go a little\nbit more in depth this time.\n\n40\n00:02:16,940 --> 00:02:21,060\nBut in this particular episode we're\nstill going to stay fairly general.\n\n41\n00:02:21,060 --> 00:02:24,760\nAnd then we're going to jump into\nthe episodes that focus entirely on\n\n42\n00:02:24,760 --> 00:02:26,430\nOSPF and ERGIP.\n\n43\n00:02:26,430 --> 00:02:29,130\nAnd those really exciting ones that we,\nwell,\n\n44\n00:02:29,130 --> 00:02:32,380\nwith OSPF we barely touched on in CCENT.\n\n45\n00:02:32,380 --> 00:02:37,290\nAnd EIGRP I don't even think we mentioned,\nso we'll really dive into those.\n\n46\n00:02:37,290 --> 00:02:41,680\n>> So when we take a look especially about\nthe idea of routing, since we did do\n\n47\n00:02:41,680 --> 00:02:46,392\nalmost a complete series on\nswitching technologies really.\n\n48\n00:02:46,392 --> 00:02:49,530\nWe wanna focus in on the idea of routers.\n\n49\n00:02:49,530 --> 00:02:53,620\nNow one of the things that I remember that\nI had a problem with when I first began\n\n50\n00:02:53,620 --> 00:02:57,420\nwas understanding what is the difference\nbetween a switch and a router.\n\n51\n00:02:58,460 --> 00:03:01,240\nIn other words, if I have a switch,\nwhy do I need a router?\n\n52\n00:03:01,240 --> 00:03:04,290\nIf I have a router, why in the world\nwould I need a switch here?\n\n53\n00:03:04,290 --> 00:03:06,620\nSo we talked about the idea\nof the switches but\n\n54\n00:03:06,620 --> 00:03:08,660\nnow we're going in that routing portion.\n\n55\n00:03:08,660 --> 00:03:10,990\nDon is there an easy way to,\nto, to describe that?\n\n56\n00:03:10,990 --> 00:03:12,800\nThe difference in that?\n\n57\n00:03:12,800 --> 00:03:15,150\n>> For the viewers that\nhave been paying attention,\n\n58\n00:03:15,150 --> 00:03:17,030\nit's layers two versus layer three.\n\n59\n00:03:17,030 --> 00:03:19,980\nSo switches are layer two devices, right?\n\n60\n00:03:19,980 --> 00:03:25,160\nThey're just moving frames between\nports on a local area network.\n\n61\n00:03:25,160 --> 00:03:28,480\nThey don’t provide you any support if\nevent you have more than one network.\n\n62\n00:03:28,480 --> 00:03:31,310\nIf you have more than one subnet,\nswitches are not aware of that,\n\n63\n00:03:31,310 --> 00:03:33,120\nthey’re dead in the water.\n\n64\n00:03:33,120 --> 00:03:34,895\nA router is aware of that.\n\n65\n00:03:34,895 --> 00:03:39,080\nIt's able to move that traffic\nfrom one subnet to another, and\n\n66\n00:03:39,080 --> 00:03:43,110\nit does that by using its\nlayer three routing table.\n\n67\n00:03:43,110 --> 00:03:45,230\nEvery router maintains a table.\n\n68\n00:03:45,230 --> 00:03:48,440\nIt list what routes it's aware of and\nhow to get to them.\n\n69\n00:03:48,440 --> 00:03:50,900\nAnd that's really what\nwe need to know here.\n\n70\n00:03:50,900 --> 00:03:54,000\nAnd its objectively saying how can\nwe differentiate between the routing\n\n71\n00:03:54,000 --> 00:03:54,570\nprotocols?\n\n72\n00:03:54,570 --> 00:03:56,730\nWell, what the heck is a routing protocol?\n\n73\n00:03:56,730 --> 00:03:59,520\nWe showed you guys in CCENT, that\n\n74\n00:03:59,520 --> 00:04:04,440\none way to get your routers to be aware\nof other network is to do static routes.\n\n75\n00:04:04,440 --> 00:04:10,002\nAnd a static route is where I manually\nenter in what route is available where,\n\n76\n00:04:10,002 --> 00:04:11,100\nall right?\n\n77\n00:04:11,100 --> 00:04:15,010\nAnd that's fine if you've got a handful\nof devices and it's not a big deal,\n\n78\n00:04:15,010 --> 00:04:16,250\nyou can knock it right out.\n\n79\n00:04:16,250 --> 00:04:17,580\nBut if you've got hundreds or\n\n80\n00:04:17,580 --> 00:04:22,050\nthousands of devices out there,\nwe have dynamic routing protocols,\n\n81\n00:04:22,050 --> 00:04:25,230\nwhere the routers will talk to each\nother and they'll exchange information.\n\n82\n00:04:25,230 --> 00:04:28,850\nThey'll learn the routes from each other,\nso we don't have to get manually involved.\n\n83\n00:04:28,850 --> 00:04:31,020\nAnd there's a lot of benefits to that.\n\n84\n00:04:31,020 --> 00:04:34,040\nBut there's several different\ndynamic routing protocols.\n\n85\n00:04:34,040 --> 00:04:38,540\nSo we need to be able to know which\none to use in which scenario.\n\n86\n00:04:38,540 --> 00:04:41,770\n>> So when we dive into a little\nbit more of a review for right now,\n\n87\n00:04:41,770 --> 00:04:45,180\nbut it does help as we begin\nto get deeper in to it.\n\n88\n00:04:45,180 --> 00:04:48,690\nWe want to talk about the two,\nI guess there's really three basic\n\n89\n00:04:48,690 --> 00:04:52,200\ndifferentiations between different\ntypes of routing protocols.\n\n90\n00:04:52,200 --> 00:04:54,470\nThere is what we call\nDistance Vector Routing Protocols.\n\n91\n00:04:54,470 --> 00:04:56,990\nThere is what we call Link State.\n\n92\n00:04:56,990 --> 00:05:00,220\nAnd then the third one,\ndepending on who you talk to, you\n\n93\n00:05:00,220 --> 00:05:04,875\neither call it a Hybrid Routing Protocol\nor an Advanced Distance Vector Protocol.\n\n94\n00:05:04,875 --> 00:05:08,420\nSo when we begin with that\nidea of distance vector and\n\n95\n00:05:08,420 --> 00:05:12,190\nlink state,\nthose are the one’s we tend to see.\n\n96\n00:05:12,190 --> 00:05:13,930\nAnd distance vector's actually for\n\n97\n00:05:13,930 --> 00:05:17,420\nthe CCNA exam kind of almost\ndisappearing all right.\n\n98\n00:05:17,420 --> 00:05:18,770\n>> In a way yep.\n\n99\n00:05:18,770 --> 00:05:21,930\nIt's kinda tricky,\nwe'll cover all that, but yeah.\n\n100\n00:05:21,930 --> 00:05:23,200\nlet's start with the distance vector.\n\n101\n00:05:23,200 --> 00:05:25,990\nLet me, i'm gonna bring up\na simple diagram I sketched real\n\n102\n00:05:25,990 --> 00:05:27,180\nquick before the show.\n\n103\n00:05:27,180 --> 00:05:30,790\nAnd let me, let me share my desktop.\n\n104\n00:05:30,790 --> 00:05:32,640\nAnd all right,\n\n105\n00:05:32,640 --> 00:05:36,390\nso here's just a quick diagram that\nI knocked out before the show.\n\n106\n00:05:36,390 --> 00:05:42,080\nI just wanted to show a couple of\nrouters and a couple of networks.\n\n107\n00:05:42,080 --> 00:05:44,760\nAnd so I got the 192.168.0\nnetwork attached to router two.\n\n108\n00:05:44,760 --> 00:05:47,410\nAnd I've got the 192.168.1\nnetwork attached to router three.\n\n109\n00:05:47,410 --> 00:05:51,690\nThe networks are there, router two,\nrouter three, they're aware of it.\n\n110\n00:05:51,690 --> 00:05:54,620\nNow when you power on a router,\n\n111\n00:05:54,620 --> 00:06:00,390\nit will automatically know about any\nnetwork it's directly plugged into.\n\n112\n00:06:00,390 --> 00:06:03,040\nSo router two knows about 192.168.0 and\n\n113\n00:06:03,040 --> 00:06:05,150\nrouter three knows about 192.168.1.0,\nright?\n\n114\n00:06:05,150 --> 00:06:09,750\nRouter one doesn't know about either one,\nright?\n\n115\n00:06:09,750 --> 00:06:11,270\nIt's not aware of it.\n\n116\n00:06:11,270 --> 00:06:14,460\nAnd so in CCENT we showed you,\nyou could do a static route.\n\n117\n00:06:14,460 --> 00:06:19,230\nYou can manually tell router one\nabout the other networks, right?\n\n118\n00:06:19,230 --> 00:06:22,050\nOr we could leverage\na dynamic routing protocol.\n\n119\n00:06:22,050 --> 00:06:25,970\nWe could do a link state protocol,\na distance vector protocol, or\n\n120\n00:06:25,970 --> 00:06:30,310\nan advanced distance vector protocol and\nall three would allow router one to\n\n121\n00:06:30,310 --> 00:06:32,710\nautomatically learn about the other\nnetworks that are out there.\n\n122\n00:06:33,850 --> 00:06:36,170\nSo which one is better?\n\n123\n00:06:36,170 --> 00:06:38,100\nWell let's start with\nthat distance vector.\n\n124\n00:06:38,100 --> 00:06:43,070\nThe way a distance vector protocol works,\nis the routers all talk to each other.\n\n125\n00:06:43,070 --> 00:06:46,780\nAnd they try and figure out the best\npath to get to a destination.\n\n126\n00:06:46,780 --> 00:06:51,357\nAnd they calculate that out that best path\n\n127\n00:06:51,357 --> 00:06:55,550\nbased on how many hops you go through.\n\n128\n00:06:55,550 --> 00:06:58,795\nRouter one can get to 192.168.0\nby going down to router two and\n\n129\n00:06:58,795 --> 00:07:00,590\nthen over to the destination, right?\n\n130\n00:07:00,590 --> 00:07:02,710\nThat's one pathway that has.\n\n131\n00:07:02,710 --> 00:07:05,710\nIt has to pass through one router,\nor one hop.\n\n132\n00:07:05,710 --> 00:07:08,290\nIt hops through router two to get there.\n\n133\n00:07:08,290 --> 00:07:14,610\nIt could also go through router three and\non to the destination.\n\n134\n00:07:14,610 --> 00:07:18,600\nSame thing,\nexcept here we're going through two hops.\n\n135\n00:07:18,600 --> 00:07:20,880\nWe're going to router three,\nthen over to router two,\n\n136\n00:07:20,880 --> 00:07:23,320\nand then on to our destination.\n\n137\n00:07:23,320 --> 00:07:25,010\n>> Now,\nwhen we take a look at this, right,\n\n138\n00:07:25,010 --> 00:07:29,260\nwe are now actually telling the idea\nof distance vector protocols\n\n139\n00:07:29,260 --> 00:07:33,490\nhey you've got to pick one of these\ntwo possible paths to get there.\n\n140\n00:07:33,490 --> 00:07:36,270\nNow the way that this distance\nvector protocol works is that it\n\n141\n00:07:36,270 --> 00:07:38,600\nactually defines it using it's metric.\n\n142\n00:07:38,600 --> 00:07:41,520\nNow there's a way that actually defines\nwhat is going to be the best possible\n\n143\n00:07:41,520 --> 00:07:42,590\npath to get there.\n\n144\n00:07:42,590 --> 00:07:45,850\nAnd what we do is base it on\nthe lowest number of hops or\n\n145\n00:07:45,850 --> 00:07:50,260\nrouters between my router and\nthe destination network as well.\n\n146\n00:07:50,260 --> 00:07:55,090\nAnd so in distance vector it will\nchoose the route between router one and\n\n147\n00:07:55,090 --> 00:07:56,330\nrouter two.\n\n148\n00:07:56,330 --> 00:08:00,595\nRather than the one between router one,\nrouter three and router two, Okay?\n\n149\n00:08:00,595 --> 00:08:03,681\nBecause there's less number\nof routes in between.\n\n150\n00:08:03,681 --> 00:08:08,793\nNow there is also a disadvantage to this,\nif you remember from the CCENT shows here,\n\n151\n00:08:08,793 --> 00:08:13,761\nis that it doesn't take into account the\nquality of the connection between router\n\n152\n00:08:13,761 --> 00:08:16,980\n1 and router 2 or\nthe other routes as well.\n\n153\n00:08:16,980 --> 00:08:22,120\nSo in other words if I have just a 56K\nconnection between router 1 and router 2,\n\n154\n00:08:22,120 --> 00:08:28,962\nbut I have let's say, T1 connections, or\n128K connections between the other two.\n\n155\n00:08:28,962 --> 00:08:29,690\n>> [LAUGH]\n>> I don't know which\n\n156\n00:08:29,690 --> 00:08:30,430\none you wanted to use here.\n\n157\n00:08:30,430 --> 00:08:31,470\n>> Going old school, right?\n\n158\n00:08:31,470 --> 00:08:32,000\n>> Yeah, yeah.\n\n159\n00:08:32,000 --> 00:08:33,100\nSo let's just, yeah.\n\n160\n00:08:33,100 --> 00:08:35,490\nI just use low numbers\nhere to kinda emphasize.\n\n161\n00:08:36,640 --> 00:08:40,340\n>> So we'll say this one's a 56K dial-up,\nright?\n\n162\n00:08:40,340 --> 00:08:42,850\nSo 56 kilobits is what that link will be.\n\n163\n00:08:42,850 --> 00:08:45,652\nBut our other links,\nmaybe they are T1s like Ronnie said.\n\n164\n00:08:45,652 --> 00:08:46,220\n>> T1s, 1.5.\n\n165\n00:08:46,220 --> 00:08:51,950\n>> 1.544 megabits to be precise.\n\n166\n00:08:51,950 --> 00:08:56,190\n>> If you have those in between\nthose that's a much faster path,\n\n167\n00:08:56,190 --> 00:08:57,170\nthe Distance Vector says, look,\n\n168\n00:08:57,170 --> 00:09:00,720\nI don't care about the quality\nof the connection in between.\n\n169\n00:09:02,040 --> 00:09:05,290\nThe route between router one and\nrouter two, that's one hop, and\n\n170\n00:09:05,290 --> 00:09:09,000\nthat always means it's better\nthan the one between two hops.\n\n171\n00:09:09,000 --> 00:09:14,080\nAnd you and I can clearly see that that\nwould not actually be true here, okay?\n\n172\n00:09:14,080 --> 00:09:15,480\n>> Yeah, distance vector protocols,\n\n173\n00:09:15,480 --> 00:09:19,130\nthey were designed back in a simpler time,\nright?\n\n174\n00:09:19,130 --> 00:09:20,970\nThey were designed in the late 70s,\nearly 80s, and\n\n175\n00:09:20,970 --> 00:09:25,020\nthey were designed in a world where we\ndidn't have massive amounts of bandwidth,\n\n176\n00:09:25,020 --> 00:09:28,860\nwhere there weren't many choices between\nthe types of lines that you had, and\n\n177\n00:09:28,860 --> 00:09:31,250\nso all lines were treated equal.\n\n178\n00:09:31,250 --> 00:09:34,120\nAnd the only concern we really had\nwas just how many routers had to\n\n179\n00:09:34,120 --> 00:09:36,865\nget involved in the process,\nand that was great, back then.\n\n180\n00:09:36,865 --> 00:09:37,510\n>> Yeah.\n\n181\n00:09:37,510 --> 00:09:40,820\n>> Today can result in what's\ncalled sub optimal routing.\n\n182\n00:09:41,980 --> 00:09:45,250\nSub optimal routing is when we\npick a route, it's a good route,\n\n183\n00:09:45,250 --> 00:09:49,050\nit works, but\nit's not the best route that's possible.\n\n184\n00:09:49,050 --> 00:09:51,950\n>> Right.\n>> So this route across the 56K line,\n\n185\n00:09:51,950 --> 00:09:52,980\nit works, it's fine.\n\n186\n00:09:52,980 --> 00:09:54,310\nOur network won't be down.\n\n187\n00:09:54,310 --> 00:09:57,150\nWe can get to where we're going,\nit's just gonna be slow.\n\n188\n00:09:57,150 --> 00:09:59,990\nIt'd be much faster if it\nwent the other way around.\n\n189\n00:09:59,990 --> 00:10:02,780\nAn optimal route versus\na sub optimal route.\n\n190\n00:10:02,780 --> 00:10:03,550\nAll right.\n\n191\n00:10:03,550 --> 00:10:06,520\nSo that is the big limitation\nof distance vector and\n\n192\n00:10:06,520 --> 00:10:11,480\nwe won't get too deep into it here because\nit's not really on the exam anymore, but\n\n193\n00:10:11,480 --> 00:10:15,175\nthe other hold back on distance vector\nprotocols is that they're slow.\n\n194\n00:10:15,175 --> 00:10:15,790\n>> Yup.\n\n195\n00:10:15,790 --> 00:10:20,395\n>> There's an important term here, let me\nthrow it out there early in the episode.\n\n196\n00:10:20,395 --> 00:10:22,048\n>> [LAUGH]\n>> It's called convergence.\n\n197\n00:10:22,048 --> 00:10:22,720\n>> Right.\n>> All right.\n\n198\n00:10:22,720 --> 00:10:26,274\nConvergence, you'll see it on the exam,\nI can guarantee you that.\n\n199\n00:10:26,274 --> 00:10:31,650\nThe term convergence means\nwhen all of your routers\n\n200\n00:10:31,650 --> 00:10:35,660\nknow about all the other routes that\nare out there, in other words, when all of\n\n201\n00:10:35,660 --> 00:10:40,150\nyour routers know the same information,\nyour network is said to be converged.\n\n202\n00:10:40,150 --> 00:10:43,840\nAll right, so if router one knows\nabout these two networks out here.\n\n203\n00:10:43,840 --> 00:10:45,520\nAnd if router two knows\nabout the two networks.\n\n204\n00:10:45,520 --> 00:10:46,890\nAnd if router three knows\nabout the two networks.\n\n205\n00:10:46,890 --> 00:10:49,600\nIf all three of them know\nabout these two networks,\n\n206\n00:10:49,600 --> 00:10:51,110\nmy network is said to be converged.\n\n207\n00:10:51,110 --> 00:10:52,070\nAll right?\n\n208\n00:10:52,070 --> 00:10:54,140\nIf a failure happens,\n\n209\n00:10:54,140 --> 00:10:57,040\nthen one router is gonna see that\nfailure before everybody else.\n\n210\n00:10:57,040 --> 00:10:59,010\nThat's just the nature of it,\nthat's how it works.\n\n211\n00:10:59,010 --> 00:11:01,320\nSo one router will see that failure first,\nand\n\n212\n00:11:01,320 --> 00:11:03,170\nthe other routers have to learn about it.\n\n213\n00:11:03,170 --> 00:11:07,200\nAnd so during that process your\nrouters are said to be converging.\n\n214\n00:11:07,200 --> 00:11:09,600\nAnd once they're all\naware of the failure and\n\n215\n00:11:09,600 --> 00:11:13,010\nmap around it,\nnow you're said to be converged.\n\n216\n00:11:13,010 --> 00:11:15,850\n>> So it takes a little bit of time for\nall the other routers to learn\n\n217\n00:11:15,850 --> 00:11:19,010\nabout the information that\nthe other routers may have.\n\n218\n00:11:19,010 --> 00:11:22,760\nAnd during that time we can be,\nagain, using sub-optimal routing.\n\n219\n00:11:22,760 --> 00:11:25,120\nOr actually not able to get\nthe information over there but\n\n220\n00:11:25,120 --> 00:11:27,210\nthe router still think everything is good.\n\n221\n00:11:27,210 --> 00:11:32,840\nSo usually for us if anything a small\nnetwork this would probably still be okay.\n\n222\n00:11:32,840 --> 00:11:37,190\nBut once you start getting larger networks\nwe may actually wanna move away from this.\n\n223\n00:11:37,190 --> 00:11:39,420\n>> Yeah, and\nthat's where our other protocols,\n\n224\n00:11:39,420 --> 00:11:42,000\nlike our linkstate protocols\nreally come in handy.\n\n225\n00:11:42,000 --> 00:11:45,520\nSo if I were to,\nlet me add it to my little list here.\n\n226\n00:11:45,520 --> 00:11:50,620\nSo I put here on the slide that distance\nvector protocols use hop count.\n\n227\n00:11:50,620 --> 00:11:53,590\nActually let me add that extra\nword protocols, there we go.\n\n228\n00:11:54,980 --> 00:11:57,393\nAll right, but a link state protocol.\n\n229\n00:12:01,340 --> 00:12:03,320\nThey use bandwidth.\n\n230\n00:12:04,330 --> 00:12:07,030\nBandwidth is the primary thing\nthat they're looking at when\n\n231\n00:12:07,030 --> 00:12:10,150\nthe calculate which lines\nto pass through and so on.\n\n232\n00:12:10,150 --> 00:12:14,900\nSo if we were running a link state\nprotocol in this example up here,\n\n233\n00:12:14,900 --> 00:12:18,620\nrouter one would see, hey,\nI can get over to 192.160.0.0.\n\n234\n00:12:18,620 --> 00:12:21,630\nI can get there via this 56K line.\n\n235\n00:12:21,630 --> 00:12:25,250\nOr I can get there via these T1 lines.\n\n236\n00:12:25,250 --> 00:12:29,570\nMuch, much higher bandwidth,\nwe're going to prefer that route, right?\n\n237\n00:12:29,570 --> 00:12:34,500\nAnd so a link state protocol would pick\nthe red route over the green route.\n\n238\n00:12:34,500 --> 00:12:37,435\nWhich is a better route,\neven though it's more hops involved.\n\n239\n00:12:37,435 --> 00:12:41,090\n>> Right.\n>> And then that leaves our last one,\n\n240\n00:12:41,090 --> 00:12:43,468\nwhich is the Advanced Distance Vector.\n\n241\n00:12:43,468 --> 00:12:46,740\n>> [LAUGH]\n>> Now let me just kind of clarify\n\n242\n00:12:46,740 --> 00:12:47,530\non this one.\n\n243\n00:12:47,530 --> 00:12:49,100\nRonnie mentioned those two names, right,\n\n244\n00:12:49,100 --> 00:12:54,180\nAdvanced Distance Vector or Hybrid Routing\nProtocol, or distance vector, or whatever.\n\n245\n00:12:54,180 --> 00:12:55,210\n>> Right, I did.\n\n246\n00:12:55,210 --> 00:12:58,550\n>> Basically what happened is,\nin the routing world,\n\n247\n00:12:58,550 --> 00:13:03,210\nthe number one distance vector protocol\nthat's out there is a protocol called RIP,\n\n248\n00:13:03,210 --> 00:13:05,530\nthe routing information protocol, RIP.\n\n249\n00:13:05,530 --> 00:13:06,900\nAnd RIP stinks.\n\n250\n00:13:06,900 --> 00:13:08,630\nIt's really slow.\n\n251\n00:13:08,630 --> 00:13:10,430\nIt's designed for small networks.\n\n252\n00:13:10,430 --> 00:13:14,640\nIt can take six minutes in some\nscenarios for it to detect a failure,\n\n253\n00:13:14,640 --> 00:13:16,490\nthere's a lot of problems with it.\n\n254\n00:13:16,490 --> 00:13:19,450\nBut it's great for small networks,\nvery simple, easy to set up.\n\n255\n00:13:19,450 --> 00:13:21,950\nIt is a true distance protocol.\n\n256\n00:13:21,950 --> 00:13:27,300\nIn the link state world, the 600 pound\ngorilla is OSPF, open shortest path first,\n\n257\n00:13:27,300 --> 00:13:31,630\nand we're gonna have at least one,\nif not multiple, episodes on that one.\n\n258\n00:13:31,630 --> 00:13:35,240\nBut it is the most popular\nrouting protocol in the world.\n\n259\n00:13:35,240 --> 00:13:37,410\nSo, you know,\nyou see OSPF all over the place.\n\n260\n00:13:37,410 --> 00:13:40,520\nVery good in that it uses bandwidth,\nright, and better decisions.\n\n261\n00:13:40,520 --> 00:13:41,620\nAnd it's very, very fast.\n\n262\n00:13:41,620 --> 00:13:43,590\nIt'll detect failures in\nusually under two seconds.\n\n263\n00:13:45,250 --> 00:13:47,310\nCisco looked at those two, though, and\n\n264\n00:13:47,310 --> 00:13:50,640\nsaid gosh, they're all right,\nbut we can do it better.\n\n265\n00:13:50,640 --> 00:13:51,500\n>> Right.\n>> We can do it better than\n\n266\n00:13:51,500 --> 00:13:52,540\neverybody else.\n\n267\n00:13:52,540 --> 00:13:54,880\nAnd so they came up with a new solution.\n\n268\n00:13:54,880 --> 00:13:57,620\nA new protocol of their own called EIGRP,\n\n269\n00:13:57,620 --> 00:14:00,850\nthe enhanced interior\ngateway routing protocol.\n\n270\n00:14:00,850 --> 00:14:05,010\nAnd we're going to have multiple episodes\non that one too, it's quite involved.\n\n271\n00:14:05,010 --> 00:14:08,320\nAnd what they did is they said, how can\nwe make these routing protocols better,\n\n272\n00:14:08,320 --> 00:14:11,795\nhow can we really just kick the tires and\nknock this thing loose.\n\n273\n00:14:11,795 --> 00:14:17,850\nSo they did it, but they did it by\ntaking a distance vector protocol,\n\n274\n00:14:17,850 --> 00:14:20,780\nthat IGRP,\nthe interior gateway routing protocol.\n\n275\n00:14:20,780 --> 00:14:24,360\nAnd they added just a ton\nof functionality to it.\n\n276\n00:14:24,360 --> 00:14:26,600\n>> Yeah.\n>> Made it super charged.\n\n277\n00:14:26,600 --> 00:14:28,650\n>> Yeah.\n>> That's a good word for it.\n\n278\n00:14:28,650 --> 00:14:31,920\nSo what they said, it's not truly\na distance vector protocol anymore because\n\n279\n00:14:31,920 --> 00:14:33,410\nwe don't care about hop count.\n\n280\n00:14:33,410 --> 00:14:35,410\nWe do all this other stuff.\n\n281\n00:14:35,410 --> 00:14:41,120\nAdvanced distance vector\nprotocols use several things.\n\n282\n00:14:41,120 --> 00:14:42,040\nThey use bandwidth.\n\n283\n00:14:43,800 --> 00:14:47,410\nAnd delay by default, but\ncan actually use more.\n\n284\n00:14:47,410 --> 00:14:49,280\nOh, my screen's not updating.\n\n285\n00:14:49,280 --> 00:14:52,030\nBut they can actually use more\nthan just bandwidth and delay.\n\n286\n00:14:52,030 --> 00:14:55,900\nThey can use bandwidth and delay,\nbut they can also use things like\n\n287\n00:14:58,030 --> 00:15:00,270\nreliability, load, and MTU.\n\n288\n00:15:00,270 --> 00:15:01,800\nThose would be the other three.\n\n289\n00:15:01,800 --> 00:15:05,530\nSo they can use all sorts of things to\ncalculate out their metric and figure out\n\n290\n00:15:05,530 --> 00:15:11,320\nwhat is the best route to follow on\nthe way from one network to another one.\n\n291\n00:15:11,320 --> 00:15:13,570\nSo they can really do\nall sorts of cool stuff.\n\n292\n00:15:15,140 --> 00:15:17,808\nAnd at the end of the day it\nmakes it very, very powerful.\n\n293\n00:15:17,808 --> 00:15:22,100\nAnd so Cisco said, we don't want to\nsaddle this protocol with the moniker\n\n294\n00:15:22,100 --> 00:15:25,201\nof being a distance vector,\nbecause that has negative connotations.\n\n295\n00:15:25,201 --> 00:15:27,120\n>> [LAUGH]\n>> We want to call it a hybrid.\n\n296\n00:15:27,120 --> 00:15:29,520\nBut no one else in the world\naccepted that, everybody was like,\n\n297\n00:15:29,520 --> 00:15:31,084\nno, Cisco, you can't do that.\n\n298\n00:15:31,084 --> 00:15:32,169\n>> [LAUGH]\n>> It's a distance vector\n\n299\n00:15:32,169 --> 00:15:33,370\nprotocol under the hood.\n\n300\n00:15:33,370 --> 00:15:35,136\nAnd so finally, Cisco backed down.\n\n301\n00:15:35,136 --> 00:15:36,350\n>> [LAUGH]\n>> And they said, all right, fine, fine.\n\n302\n00:15:36,350 --> 00:15:37,930\nWe won't call it a hybrid anymore.\n\n303\n00:15:37,930 --> 00:15:41,940\nWe'll call it an advanced distance\nvector protocol, and that's what it is.\n\n304\n00:15:41,940 --> 00:15:43,060\n>> Yeah.\n\n305\n00:15:43,060 --> 00:15:48,060\nNow, knowing the generics,\nat least just the terms of them, right?\n\n306\n00:15:48,060 --> 00:15:49,360\nIs actually gonna be very important.\n\n307\n00:15:49,360 --> 00:15:52,780\nOn the exam every once in a while\nyou just get away with a couple\n\n308\n00:15:52,780 --> 00:15:55,770\nof quick questions just by knowing that.\n\n309\n00:15:55,770 --> 00:15:59,388\nOf understanding the difference between\nadvanced distance, link state, and\n\n310\n00:15:59,388 --> 00:16:00,689\njust distance vector here.\n\n311\n00:16:00,689 --> 00:16:05,111\nNow when we start taking a look at these\npicker protocols we are gonna go in depth\n\n312\n00:16:05,111 --> 00:16:08,400\nEspecially into the advanced\ndistance vector protocol.\n\n313\n00:16:08,400 --> 00:16:10,074\nOne called EIGRP.\n\n314\n00:16:10,074 --> 00:16:15,700\nAnd then of course into OSPF the 600\npound gorilla we were just talking about.\n\n315\n00:16:15,700 --> 00:16:18,840\nBut in terms of RIP, because it is no\nlonger really officially covered on\n\n316\n00:16:18,840 --> 00:16:21,580\nthe exam anymore, we're probably\nnot gonna actually cover that.\n\n317\n00:16:21,580 --> 00:16:23,770\nWell just about what we did maybe.\n\n318\n00:16:23,770 --> 00:16:24,720\nThat's about it.\n\n319\n00:16:24,720 --> 00:16:25,772\n>> Yeah.\n\n320\n00:16:25,772 --> 00:16:30,620\nAll right, so those are some examples of\nour protocols that we've got out there,\n\n321\n00:16:30,620 --> 00:16:32,729\nand on the exam like\nyou said Ryan EIGRP and\n\n322\n00:16:32,729 --> 00:16:35,110\nOSPF those are the big\nones that we're gonna see.\n\n323\n00:16:35,110 --> 00:16:36,840\nIf you go on the internet and\n\n324\n00:16:36,840 --> 00:16:39,690\nyou use resources that you find out\nthere to help study or you buy a book\n\n325\n00:16:39,690 --> 00:16:44,308\noff the shelf, If the book is even one\nyear old, then it might still contain RIP.\n\n326\n00:16:44,308 --> 00:16:45,116\n>> Right?\n>> Mm-hm\n\n327\n00:16:45,116 --> 00:16:47,000\n>> And it's a good idea to learn RIP.\n\n328\n00:16:47,000 --> 00:16:49,820\nIt's a real easy protocol, and\nit's good for foundational knowledge.\n\n329\n00:16:49,820 --> 00:16:50,720\nIt is useful.\n\n330\n00:16:50,720 --> 00:16:53,060\nWe might even show it here on the show.\n\n331\n00:16:53,060 --> 00:16:54,600\nBut we will show it in the show.\n\n332\n00:16:54,600 --> 00:16:55,240\n>> That's right.\n\n333\n00:16:55,240 --> 00:16:57,750\n>> That's the most profound\nsentence I'll give all day.\n\n334\n00:16:57,750 --> 00:16:58,620\n>> [LAUGH]\n>> But at\n\n335\n00:16:58,620 --> 00:17:00,240\nthe end of the day it's\nnot on the exam anymore.\n\n336\n00:17:00,240 --> 00:17:02,340\nCisco did remove it from\nthe exam objectives.\n\n337\n00:17:02,340 --> 00:17:04,480\nSo we need to focus on\nthe more advanced ones.\n\n338\n00:17:04,480 --> 00:17:10,640\nNow there are some topics\nthat are important to learn,\n\n339\n00:17:10,640 --> 00:17:13,280\nthough, that pertain to how EIGRP works.\n\n340\n00:17:13,280 --> 00:17:17,750\nAnd EIGRP, deep down under the hood,\nis still a distance vector protocol.\n\n341\n00:17:17,750 --> 00:17:20,890\nSo some of those concepts from\nthe RIP world are still very relevant.\n\n342\n00:17:20,890 --> 00:17:22,710\nAnd so\nI do recommend that people go ahead and\n\n343\n00:17:22,710 --> 00:17:23,945\nlearn it, cuz it definitely doesn't hurt.\n\n344\n00:17:23,945 --> 00:17:25,560\n>> Mm-hm.\n\n345\n00:17:25,560 --> 00:17:28,370\n>> All right.\nSo let's see.\n\n346\n00:17:28,370 --> 00:17:29,560\nWhat do we need to hit next?\n\n347\n00:17:29,560 --> 00:17:31,260\nSo we talked a little bit about metric.\n\n348\n00:17:31,260 --> 00:17:32,980\nAnd we'll tackle metrics more.\n\n349\n00:17:32,980 --> 00:17:37,578\nLike, when we get into the actual OSPF\nepisodes, or the actual EIGRP episodes.\n\n350\n00:17:37,578 --> 00:17:42,110\nWell we'll tackle exactly how they\ncalculate their metrics, cuz there's these\n\n351\n00:17:42,110 --> 00:17:45,480\nformulas that are involved and\nit's a little bit of math for us.\n\n352\n00:17:45,480 --> 00:17:49,780\nBut let's talk a bit about\nadministrative distance, Ronnie.\n\n353\n00:17:49,780 --> 00:17:53,830\n>> Okay, sure, when we go into the realm\nof administrative distance here.\n\n354\n00:17:53,830 --> 00:17:56,360\nWhat can happen is that on one router,\nyou may not\n\n355\n00:17:56,360 --> 00:18:01,170\nactually know why we would ever do this,\nbut you could be running let's say EIGRP.\n\n356\n00:18:01,170 --> 00:18:04,570\nRemember that for us, the metric\non that is the idea of bandwidth.\n\n357\n00:18:04,570 --> 00:18:08,610\nAnd delay.\nAt the same time, what if your router also\n\n358\n00:18:08,610 --> 00:18:13,800\nlearns an OSPF route, which, again,\nis based on the idea of bandwidth?\n\n359\n00:18:13,800 --> 00:18:15,410\nWhat if your router's also running RIP,\n\n360\n00:18:15,410 --> 00:18:20,500\nwhich is based on the idea of hop count\nand they, all three of them, report.\n\n361\n00:18:20,500 --> 00:18:24,920\nThe same destination, in other words\nthe same route, well all three of\n\n362\n00:18:24,920 --> 00:18:29,230\nthem believe that they're reporting\nthe best possible route between them.\n\n363\n00:18:29,230 --> 00:18:30,880\nSo if you have RIP, you have OSPF,\n\n364\n00:18:30,880 --> 00:18:34,140\nyou have EIGRP running\non the network together.\n\n365\n00:18:35,210 --> 00:18:37,630\nAll of a sudden on one router it says,\nwait a minute,\n\n366\n00:18:37,630 --> 00:18:41,330\nall three of these are actually being\nreported as the best possible route.\n\n367\n00:18:41,330 --> 00:18:45,940\nWell a routing table only allows you\nto put in what is the best route\n\n368\n00:18:45,940 --> 00:18:48,150\ninto the routing table itself.\n\n369\n00:18:48,150 --> 00:18:51,780\nWell now that I have all three of them,\nthere has to be a way for\n\n370\n00:18:51,780 --> 00:18:55,480\nus to make a decision between\nthose routing protocols and\n\n371\n00:18:55,480 --> 00:18:59,230\nwhich one will get entered\ninto the routing table itself.\n\n372\n00:18:59,230 --> 00:19:01,360\nYeah, so, like let me give you\na scenario where this could happen in\n\n373\n00:19:01,360 --> 00:19:02,540\nreal life, right?\n\n374\n00:19:02,540 --> 00:19:06,800\nLet's say that you get hired on the\ncompany, and you go in and you sit down.\n\n375\n00:19:06,800 --> 00:19:09,000\nAnd you start to look at the routers,\nand you start to work on it, and\n\n376\n00:19:09,000 --> 00:19:09,950\nyou go, oh my God.\n\n377\n00:19:09,950 --> 00:19:10,848\nThey're running RIP.\n\n378\n00:19:10,848 --> 00:19:13,070\n>> Right\n>> And [LAUGH] so, you've gone to work for\n\n379\n00:19:13,070 --> 00:19:15,680\nthis company that might have\nhundreds of routers, and\n\n380\n00:19:15,680 --> 00:19:16,880\nyou realize they're running RIP.\n\n381\n00:19:16,880 --> 00:19:19,020\nAnd so immediately,\nyou look at it and you go.\n\n382\n00:19:19,020 --> 00:19:20,280\nWell, it works.\n\n383\n00:19:20,280 --> 00:19:21,310\nI guess we could leave it that way.\n\n384\n00:19:21,310 --> 00:19:24,170\nIt's okay if you like to have a couple\nminutes of downtime whenever there's\n\n385\n00:19:24,170 --> 00:19:25,940\na link change, right?\n\n386\n00:19:25,940 --> 00:19:30,060\nBut you immediately recognize that hey, if\nI deploy OSPF, this network will be more\n\n387\n00:19:30,060 --> 00:19:33,150\nstable and it'll failover more\nquickly in the event of failures.\n\n388\n00:19:33,150 --> 00:19:37,680\nAnd so we'll have a stronger network,\none that's more resilient.\n\n389\n00:19:37,680 --> 00:19:40,840\nSo you decide that you want to upgrade,\nright?\n\n390\n00:19:40,840 --> 00:19:43,140\nYou wanna upgrade from RIP to OSPF.\n\n391\n00:19:43,140 --> 00:19:46,740\nWell, when you upgrade from one protocol\nto another, you got two choices.\n\n392\n00:19:46,740 --> 00:19:48,720\nOne, you could shut everything down.\n\n393\n00:19:48,720 --> 00:19:52,560\nJust shut the whole network down,\nredesign it, and bring it back up, right?\n\n394\n00:19:52,560 --> 00:19:54,370\nIt's gonna be a lot of down time.\n\n395\n00:19:54,370 --> 00:19:57,290\n>> Yeah.\n>> Or, you can do a rolling wave upgrade.\n\n396\n00:19:57,290 --> 00:19:59,680\nWhere you upgrade routers one by one.\n\n397\n00:19:59,680 --> 00:20:02,095\nTake your time,\nyou can do it while they're online.\n\n398\n00:20:02,095 --> 00:20:04,050\n>> Mm-hm\n>> And not cause any down time at all.\n\n399\n00:20:04,050 --> 00:20:05,560\nSounds pretty attractive, right?\n\n400\n00:20:05,560 --> 00:20:07,210\nSo that's how Cisco routers are designed.\n\n401\n00:20:07,210 --> 00:20:11,070\nYou can run more than one\nrouting protocol on a router.\n\n402\n00:20:11,070 --> 00:20:13,350\nNow let me make sure I\nphrase this properly.\n\n403\n00:20:13,350 --> 00:20:18,060\nYou can run more than one,\nyou shouldn't as a rule of thumb.\n\n404\n00:20:18,060 --> 00:20:20,600\nSo if you do it it's designed for\nupgrades.\n\n405\n00:20:20,600 --> 00:20:22,790\nAnd Cisco will tell you that if\nyou call them for support and\n\n406\n00:20:22,790 --> 00:20:24,795\nthey go oh why are you\nrunning two protocols?\n\n407\n00:20:24,795 --> 00:20:26,140\nRight.\nThere's really only two\n\n408\n00:20:26,140 --> 00:20:29,150\nscenarios where you should run multiple\nrouting protocols at the same time.\n\n409\n00:20:29,150 --> 00:20:30,940\nWell I guess I can think of a third.\n\n410\n00:20:30,940 --> 00:20:33,700\nBut the main two,\nnumber one is your upgrading.\n\n411\n00:20:33,700 --> 00:20:37,330\nIf you are in the process of transitioning\nfrom one routing protocol to another,\n\n412\n00:20:37,330 --> 00:20:38,102\nit's okay to run two.\n\n413\n00:20:38,102 --> 00:20:39,230\nAll right.\n\n414\n00:20:39,230 --> 00:20:41,800\nThe second one is if it's a border router.\n\n415\n00:20:41,800 --> 00:20:45,850\nIf it is a router sitting between you and\nsomebody else's network.\n\n416\n00:20:45,850 --> 00:20:49,500\nSo maybe you've got a partner company\nout there, and they run RIP, right?\n\n417\n00:20:49,500 --> 00:20:50,790\nBut you know better, so you run OSPF.\n\n418\n00:20:50,790 --> 00:20:53,440\nWell you can't change their network.\n\n419\n00:20:53,440 --> 00:20:56,580\nSo you might stick a router\nin between your network and\n\n420\n00:20:56,580 --> 00:20:58,190\ntheir network that runs both.\n\n421\n00:20:58,190 --> 00:21:00,930\nRuns RIP to talk to them and\nruns OSPF to talk to you.\n\n422\n00:21:00,930 --> 00:21:04,030\nNow that doesn't mean you run two\nprotocols on all of your routers.\n\n423\n00:21:04,030 --> 00:21:05,535\n>> Just on that one\n>> He's just running on that border.\n\n424\n00:21:05,535 --> 00:21:06,340\n>> Yup\n>> And\n\n425\n00:21:06,340 --> 00:21:08,790\nthat's a process called\nRoute Redistribution, and\n\n426\n00:21:08,790 --> 00:21:09,950\nwe'll talk about that later.\n\n427\n00:21:09,950 --> 00:21:12,770\nBut that's where you convert routes\nfrom one protocol to another, and\n\n428\n00:21:12,770 --> 00:21:13,765\nyou need a router to do that.\n\n429\n00:21:13,765 --> 00:21:15,795\n>> Right\n>> Just one, you don't need a ton of them.\n\n430\n00:21:15,795 --> 00:21:17,950\n>> [LAUGH]\n>> And it can knock it out.\n\n431\n00:21:17,950 --> 00:21:20,910\nAnd that kinda leads me to my third\nscenario that popped into my head while\n\n432\n00:21:20,910 --> 00:21:23,695\nI was talking, which is if you're\nan internet service provider, right.\n\n433\n00:21:23,695 --> 00:21:26,970\nISP's will constantly run\nmultiple routing protocols.\n\n434\n00:21:26,970 --> 00:21:31,100\nAnd for those of you that go onto do\nlike our CCMP shows when we film those\n\n435\n00:21:31,100 --> 00:21:35,500\nwe'll talk about that type\nof scenario more then.\n\n436\n00:21:35,500 --> 00:21:39,920\nAll right, so let's go back to my diagram\nwhich I think is, am I sharing my desktop?\n\n437\n00:21:39,920 --> 00:21:45,470\nOkay, good so,\nif I'm running RIP on this network.\n\n438\n00:21:45,470 --> 00:21:51,780\nWell, RIP is gonna say for router 1 to get\nto 192.168.0.0, it's gonna go this way.\n\n439\n00:21:51,780 --> 00:21:53,350\nThat's the best way to get there.\n\n440\n00:21:53,350 --> 00:21:54,050\nRight.\n\n441\n00:21:54,050 --> 00:21:57,469\nSo if I'm running RIP,\nthat's what I expect to happen.\n\n442\n00:21:57,469 --> 00:21:58,690\nAll right.\n\n443\n00:21:58,690 --> 00:22:00,480\nIf I decide to upgrade.\n\n444\n00:22:00,480 --> 00:22:03,590\nMaybe I install OSPF on router two, right?\n\n445\n00:22:03,590 --> 00:22:05,890\nWe're still running RIP, so\nnow it's running RIP and OSPF.\n\n446\n00:22:08,960 --> 00:22:10,988\nAnd then I install OSPF on router three.\n\n447\n00:22:10,988 --> 00:22:11,630\nAnd then I install OSPF on router one.\n\n448\n00:22:11,630 --> 00:22:16,190\nOnce I've got it installed on all three,\nnow router one will\n\n449\n00:22:18,940 --> 00:22:22,960\nsee two routes, two ways,\nto get over to 192.168.0.0.\n\n450\n00:22:22,960 --> 00:22:24,930\nIt'll see the red route via RIP.\n\n451\n00:22:24,930 --> 00:22:29,900\nAnd it'll see the green route via OSPF and\nboth routing protocols are swearing to us.\n\n452\n00:22:29,900 --> 00:22:32,350\nThey're saying,\nno this is the best route believe me.\n\n453\n00:22:32,350 --> 00:22:34,550\nAnd they're sticking it\nin the routing table.\n\n454\n00:22:34,550 --> 00:22:37,440\nOkay, so\nrouter one now has to make a decision.\n\n455\n00:22:37,440 --> 00:22:38,630\nWho does it trust?\n\n456\n00:22:38,630 --> 00:22:39,410\nDoes it trust RIP?\n\n457\n00:22:39,410 --> 00:22:40,050\nDoes it trust OSPF?\n\n458\n00:22:40,050 --> 00:22:40,745\nWho does it trust?\n\n459\n00:22:40,745 --> 00:22:41,800\nRight?\n\n460\n00:22:41,800 --> 00:22:45,560\nWell, this is where what's called\nan Administrative Distance.\n\n461\n00:22:45,560 --> 00:22:48,520\nThe Administrative Distance is\nthe proprietary value, the Cisco pick.\n\n462\n00:22:48,520 --> 00:22:49,760\n>> Yeah.\n>> And they picked it\n\n463\n00:22:49,760 --> 00:22:50,290\nright out of the hat.\n\n464\n00:22:50,290 --> 00:22:53,300\n>> Mm-hm\n>> And they said here's a list\n\n465\n00:22:53,300 --> 00:22:56,680\nof how we will pick one\nprotocol over another one.\n\n466\n00:22:56,680 --> 00:22:58,000\nHere's our priority list.\n\n467\n00:22:58,000 --> 00:22:58,690\nRight?\n\n468\n00:22:58,690 --> 00:23:00,200\n>> Yeah.\nAt times you actually have to look at\n\n469\n00:23:00,200 --> 00:23:02,502\nthese numbers here briefly.\n\n470\n00:23:02,502 --> 00:23:04,770\nYou're gonna actually go,\nwhy did they come up with these numbers?\n\n471\n00:23:04,770 --> 00:23:06,280\nThere's probably a way they did it.\n\n472\n00:23:06,280 --> 00:23:09,930\nBut I assume it's two guys sitting at a\nWaffle House at two o'clock in the morning\n\n473\n00:23:09,930 --> 00:23:11,440\ngoing I know the way to do this!\n\n474\n00:23:11,440 --> 00:23:13,270\nIt's what it actually seems like.\n\n475\n00:23:13,270 --> 00:23:15,720\nSo the numbers that we're\nabout to take a look at here.\n\n476\n00:23:15,720 --> 00:23:18,700\nThe way that Cisco used to drive it,\nthey call it believability,\n\n477\n00:23:18,700 --> 00:23:22,060\nin other words, how believable\nis this protocol in comparison.\n\n478\n00:23:22,060 --> 00:23:25,180\nBut it is really about that when you\nhave multiple protocols running on\n\n479\n00:23:25,180 --> 00:23:26,390\nthe same router.\n\n480\n00:23:26,390 --> 00:23:31,260\nAnd they both report the same destination,\nand they're both saying it's the best one,\n\n481\n00:23:31,260 --> 00:23:34,390\nwhich one is gonna end up\nin the routing table, okay?\n\n482\n00:23:34,390 --> 00:23:37,370\nAnd like everything else that we're\ndoing so far, in terms of metric.\n\n483\n00:23:37,370 --> 00:23:38,955\nMetric is usually the lowest,\n\n484\n00:23:38,955 --> 00:23:42,420\nmetric's actually what gets into\nthe routing table a lot of times.\n\n485\n00:23:42,420 --> 00:23:44,710\nBut there's the idea of\nAdministrative Distance, and\n\n486\n00:23:44,710 --> 00:23:46,920\nthat's normally the lower the number.\n\n487\n00:23:46,920 --> 00:23:50,010\nThat's the one that's gonna end\nup getting into it here, okay?\n\n488\n00:23:50,010 --> 00:23:52,800\nSo Don is now putting up\na nice little table here for\n\n489\n00:23:52,800 --> 00:23:56,270\nus of the idea of Administrative Distance.\n\n490\n00:23:56,270 --> 00:23:58,220\nAnd we'll talk about their\nvalues right now, too.\n\n491\n00:23:58,220 --> 00:23:59,610\n>> So it's just a number.\n\n492\n00:23:59,610 --> 00:24:00,660\n>> Right.\n>> It's a number that's assigned.\n\n493\n00:24:00,660 --> 00:24:01,878\nAnd like Ronnie said,\nit's like golf scores.\n\n494\n00:24:01,878 --> 00:24:03,706\n>> Yeah. [LAUGH] >> The lower number,\nthe better, right?\n\n495\n00:24:03,706 --> 00:24:05,895\nWe're gonna prefer the one\nwith the lower number.\n\n496\n00:24:05,895 --> 00:24:11,150\nSo the absolute lowest number\nthat we can have is 0.\n\n497\n00:24:11,150 --> 00:24:11,675\nRight?\n\n498\n00:24:11,675 --> 00:24:15,460\n0 means that we've got\na directly connected network.\n\n499\n00:24:15,460 --> 00:24:17,800\nThat means it's is a cable\nplugged right into our router.\n\n500\n00:24:17,800 --> 00:24:22,340\nYou can't get any better than that,\nsomething that is directly plugged in.\n\n501\n00:24:22,340 --> 00:24:25,340\n>> Then there's static.\n\n502\n00:24:25,340 --> 00:24:30,030\nStatic, for us, is the one where we\nadministratively type in the route itself.\n\n503\n00:24:30,030 --> 00:24:33,480\nNow, even though Cisco may go,\nhey, our advanced distance vector\n\n504\n00:24:33,480 --> 00:24:36,880\nprotocol can actually make this\nwork much better than you can, but\n\n505\n00:24:36,880 --> 00:24:39,420\nbecause you're the administrator\nof the network,\n\n506\n00:24:39,420 --> 00:24:43,050\nyou're the one that gets to choose what\ngets entered into the routing table.\n\n507\n00:24:43,050 --> 00:24:47,680\nSo Cisco has assigned the static\nidea here of a value of one for us.\n\n508\n00:24:49,000 --> 00:24:50,340\n>> All right, next we've got EIGRP,\n\n509\n00:24:50,340 --> 00:24:53,170\nthe Enhanced Interior\nGateway Routing Protocol.\n\n510\n00:24:53,170 --> 00:24:54,940\nIt is Cisco proprietary.\n\n511\n00:24:54,940 --> 00:24:56,050\nIt's the one that they made.\n\n512\n00:24:56,050 --> 00:24:58,470\nAnd so,\nobviously they think it's the bees knees.\n\n513\n00:24:58,470 --> 00:25:00,710\nThey think it's the best\nprotocol that's out there.\n\n514\n00:25:00,710 --> 00:25:03,247\nAnd so it comes next with a value of 90.\n\n515\n00:25:03,247 --> 00:25:04,150\nNow that is way above 1.\n\n516\n00:25:04,150 --> 00:25:07,410\nWhy would they do that?\n\n517\n00:25:07,410 --> 00:25:08,800\nThey want to leave plenty of room,\n\n518\n00:25:08,800 --> 00:25:12,030\nbecause, while these are the default\nnumbers, you can change them.\n\n519\n00:25:12,030 --> 00:25:13,850\nYou can change them to\nwhatever the heck you want.\n\n520\n00:25:13,850 --> 00:25:15,030\nYou can influence this.\n\n521\n00:25:15,030 --> 00:25:17,030\nThis is just from the factory.\n\n522\n00:25:17,030 --> 00:25:22,760\nAnd so Cisco leaves a nice, big gap\nbetween 1 and 90 so that you can go in and\n\n523\n00:25:22,760 --> 00:25:26,070\npick, and there are actually a few other\nprotocols that fall in between there.\n\n524\n00:25:26,070 --> 00:25:28,980\nThe five that I've written right here,\nthese are what's gonna be on the exam.\n\n525\n00:25:28,980 --> 00:25:30,940\nYou wanna memorize this right here, okay?\n\n526\n00:25:30,940 --> 00:25:34,150\nAnd I'll add these notes to\nthe episode page afterwards,\n\n527\n00:25:34,150 --> 00:25:36,720\nwhen it gets posted on\nthe ITPro.tv website,\n\n528\n00:25:36,720 --> 00:25:39,520\nI'll stick these notes beneath it, so\nyou don't have to jot them down now.\n\n529\n00:25:39,520 --> 00:25:43,280\nBut these are the five that you need\nto have memorized in your head for\n\n530\n00:25:43,280 --> 00:25:46,410\nthe exam, but there's a good 10 or\n12 of them, right?\n\n531\n00:25:46,410 --> 00:25:48,320\n>> Yeah. Oh Yeah.\n>> Cause you got BGP and ISIS and\n\n532\n00:25:48,320 --> 00:25:52,625\nall those other routing protocols\nthat aren't on the exam.\n\n533\n00:25:52,625 --> 00:25:54,135\nSo EIGRP gets a value of 90.\n\n534\n00:25:54,135 --> 00:25:57,855\nAnd that just means that\nafter connected in static,\n\n535\n00:25:57,855 --> 00:26:01,570\nthis is the most preferred of\nthe interior routing protocols.\n\n536\n00:26:01,570 --> 00:26:02,465\n>> Mm-hm.\n\n537\n00:26:02,465 --> 00:26:05,055\nNow it doesn't mean that your router\nhas to be running these, right?\n\n538\n00:26:05,055 --> 00:26:06,665\nIf you don't have any routing protocols,\n\n539\n00:26:06,665 --> 00:26:10,540\nyou'll probably see a 1 and\na 0 more often than anything else.\n\n540\n00:26:10,540 --> 00:26:14,199\nBut you may not see a 90, you may not\nsee a 110, you may not see a 120, but\n\n541\n00:26:14,199 --> 00:26:14,809\nit could be.\n\n542\n00:26:14,809 --> 00:26:17,768\nIf you are running these,\nyou'll probably see these as well.\n\n543\n00:26:17,768 --> 00:26:21,264\n>> Yeah, and then after that,\nwe have OSPF, the open shortest path first\n\n544\n00:26:21,264 --> 00:26:25,490\nprotocol, the most popular interior\ngateway routing protocol in the world.\n\n545\n00:26:25,490 --> 00:26:29,790\nAnd with it it gets a value of 110.\n\n546\n00:26:29,790 --> 00:26:33,770\nThere's a gap between EIGRP and\nOSPF, again, just to leave room for\n\n547\n00:26:33,770 --> 00:26:36,210\nus to put in whatever we want.\n\n548\n00:26:36,210 --> 00:26:38,030\nAnd so OSPF gets that 110.\n\n549\n00:26:38,030 --> 00:26:39,835\nIf you're not running EIGRP,\n\n550\n00:26:39,835 --> 00:26:42,260\nthen this becomes the most\npreferred dynamic protocol.\n\n551\n00:26:42,260 --> 00:26:43,040\n>> Yep.\n\n552\n00:26:43,040 --> 00:26:48,440\nAnd then lastly, RIP, here at 120, is one\nthey've just added in at the end there.\n\n553\n00:26:48,440 --> 00:26:51,180\nIt's probably was one of\nthe earliest ones that we had.\n\n554\n00:26:51,180 --> 00:26:53,370\nBut for them, once again, about defaults.\n\n555\n00:26:53,370 --> 00:26:56,790\nWhen you don't actually change these\npicker administrative distances,\n\n556\n00:26:56,790 --> 00:27:01,180\nthat's what we're gonna actually get as\nnumbers that help us to pick which one.\n\n557\n00:27:01,180 --> 00:27:04,770\nSo if you get an EIRGP route, you'll\nsee that the administrative distance\n\n558\n00:27:04,770 --> 00:27:06,940\nwill always show up inside\nthe square brackets.\n\n559\n00:27:06,940 --> 00:27:09,750\nWe'll probably demonstrate that one\nright when we come back from our break\n\n560\n00:27:09,750 --> 00:27:11,240\nin a little bit.\n\n561\n00:27:11,240 --> 00:27:12,630\n>> Yeah.\n>> And then you'll\n\n562\n00:27:12,630 --> 00:27:13,390\nactually see multiple ones.\n\n563\n00:27:13,390 --> 00:27:16,880\nAll of a sudden you actually have those,\nyour router takes a lot at those\n\n564\n00:27:16,880 --> 00:27:19,430\nadministrative distances as\nwhich one is the lowest one?\n\n565\n00:27:19,430 --> 00:27:21,910\nThat's the one that's gonna get\nentered into the routing table.\n\n566\n00:27:21,910 --> 00:27:24,530\nAnd even if you know that there's multiple\nroutes there, and you don't see the other\n\n567\n00:27:24,530 --> 00:27:27,970\none, that's because that's what\nthe router has actually done for us.\n\n568\n00:27:27,970 --> 00:27:32,450\nOh, there it goes.\n>> Let me add this to the notes here.\n\n569\n00:27:32,450 --> 00:27:36,530\nAll right, so here's the full\nAdministrative Distance table from Cisco.\n\n570\n00:27:36,530 --> 00:27:38,990\nThere's a lot on here, but, like I said,\n\n571\n00:27:38,990 --> 00:27:40,870\nthose five right there\nare the key ones for the exam.\n\n572\n00:27:40,870 --> 00:27:45,250\nOther ones that we might see, they've got\nsome special, like EIGRP summary routes,\n\n573\n00:27:45,250 --> 00:27:52,120\nwe'll talk about later, BGP,\nthat we don't even touch on in CCNA.\n\n574\n00:27:52,120 --> 00:27:56,455\nYou don't really cover BGP until\nyou get to the CCNP route class, or\n\n575\n00:27:56,455 --> 00:27:58,225\nshow, or whatever.\n\n576\n00:27:58,225 --> 00:28:00,345\n>> Yeah.\n>> IGRP, which is, for all intents and\n\n577\n00:28:00,345 --> 00:28:01,245\npurposes, dead.\n\n578\n00:28:01,245 --> 00:28:03,237\nIt's a very, very old protocol at 100.\n\n579\n00:28:03,237 --> 00:28:08,982\nISIS, which, for all intents and\npurposes, is dead also at 115.\n\n580\n00:28:08,982 --> 00:28:10,742\nEGP, which is basically dead at 140.\n\n581\n00:28:10,742 --> 00:28:14,272\n>> Oh, nice.\n>> ODR, I mean, on demand routing,\n\n582\n00:28:14,272 --> 00:28:16,022\nODR it sounds like a good idea.\n\n583\n00:28:16,022 --> 00:28:16,574\nIt never is.\n\n584\n00:28:16,574 --> 00:28:17,182\nBut\n>> [LAUGH]\n\n585\n00:28:17,182 --> 00:28:18,442\n>> It's way down at 160 and,\n\n586\n00:28:18,442 --> 00:28:20,312\nyou know, I make fun of the protocol.\n\n587\n00:28:20,312 --> 00:28:22,260\nI say it sounds like a good idea,\nit never is.\n\n588\n00:28:22,260 --> 00:28:26,150\nCisco agrees, that's why it has a value of\n160, that's why it's such a high number,\n\n589\n00:28:26,150 --> 00:28:27,670\nso it's not preferred over the other guys.\n\n590\n00:28:29,080 --> 00:28:34,020\nExternal EIGRP, that means an EIGRP route\nthat we learned from somebody else,\n\n591\n00:28:34,020 --> 00:28:37,210\nfrom somebody outside our organization,\nwe're not going to trust them\n\n592\n00:28:37,210 --> 00:28:40,320\nas much as routes we learn from\ninside of our organization.\n\n593\n00:28:40,320 --> 00:28:45,030\nAnd internal BGP, again,\nwe don't really tackle here.\n\n594\n00:28:45,030 --> 00:28:46,570\nAnd then, Unknown,\n\n595\n00:28:46,570 --> 00:28:51,940\nthat means we've learned a route from some\nmysterious source that we can't identify.\n\n596\n00:28:51,940 --> 00:28:55,130\nWe don't know where the route came from,\nbut somehow it made it in here, and\n\n597\n00:28:55,130 --> 00:28:59,390\nso it gets a 255 now, that doesn't\nnormally happen by accident, right?\n\n598\n00:28:59,390 --> 00:29:02,810\nAnd normally means that we manipulated\nthat administrative distance to\n\n599\n00:29:02,810 --> 00:29:03,430\npoison a route.\n\n600\n00:29:03,430 --> 00:29:05,760\nAnd poison a route just means\nthat we're trying to kill it, so\n\n601\n00:29:05,760 --> 00:29:07,100\nthat it won't make it\nin the routing table.\n\n602\n00:29:07,100 --> 00:29:10,650\nSo if you want to specifically block one,\nyou can artificially change its\n\n603\n00:29:10,650 --> 00:29:15,360\nadministrative distance to 255,\nwhich in effect will null out the route.\n\n604\n00:29:15,360 --> 00:29:17,710\n>> Now, Don, right before our break,\nan interesting note here.\n\n605\n00:29:19,220 --> 00:29:22,330\nSince you say we can change it, is there\nany good reason why I would change\n\n606\n00:29:23,490 --> 00:29:26,460\nadministrative distance\nthat you can think about?\n\n607\n00:29:26,460 --> 00:29:30,505\n>> So,\nmaybe you are a RIP organization, and\n\n608\n00:29:30,505 --> 00:29:35,540\nyou have to implement OSPF on a system for\nsome reason, and you just decide that\n\n609\n00:29:35,540 --> 00:29:38,410\nRIP is the bees knees, and you want\nit to win, you can do it that way.\n\n610\n00:29:38,410 --> 00:29:39,570\n>> Yeah.\n\n611\n00:29:39,570 --> 00:29:42,330\n>> I normally manipulate it,\nwell, let me just say this.\n\n612\n00:29:42,330 --> 00:29:44,180\nI don't normally manipulate it.\n\n613\n00:29:44,180 --> 00:29:47,240\nGiven a choice, you should only\nbe running one routing protocol.\n\n614\n00:29:47,240 --> 00:29:47,830\n>> Right.\n>> And\n\n615\n00:29:47,830 --> 00:29:51,940\nso you don't have to worry about making a\ndecision between two different protocols.\n\n616\n00:29:51,940 --> 00:29:54,180\n>> Right.\n>> So in a normal course of events,\n\n617\n00:29:54,180 --> 00:29:56,400\nyou should not have to\nmanipulate these values.\n\n618\n00:29:56,400 --> 00:29:59,320\nIf you do, it's because you're\nfixing bad network designs.\n\n619\n00:29:59,320 --> 00:30:00,160\n>> Right.\n>> Right?\n\n620\n00:30:00,160 --> 00:30:04,230\nAnd when you do route redistribution,\nconverting one routing protocol into\n\n621\n00:30:04,230 --> 00:30:08,760\nanother, various things can happen that\ncan be bad there after a conversion.\n\n622\n00:30:08,760 --> 00:30:13,540\nAnd so you can have a route\nthat originated from EIGRP, but\n\n623\n00:30:13,540 --> 00:30:16,820\nit's being advertised in OSPF,\nso it gets a different metric.\n\n624\n00:30:16,820 --> 00:30:17,400\n>> Right.\nAnd\n\n625\n00:30:17,400 --> 00:30:19,850\nyou might need to manipulate\nthat to lower it.\n\n626\n00:30:19,850 --> 00:30:24,210\nIt's almost always bad news, so if you\ndo it, it should be a temporary thing.\n\n627\n00:30:24,210 --> 00:30:25,130\n>> Right.\n>> Yep.\n\n628\n00:30:25,130 --> 00:30:27,730\n>> Okay.\nYou know, sometimes you look at it and go,\n\n629\n00:30:27,730 --> 00:30:32,290\nhey, that would be fun, let me just\nmanipulate this, and remember that if you\n\n630\n00:30:32,290 --> 00:30:34,340\ndo that, it can change some\ndifferent things on your network,\n\n631\n00:30:34,340 --> 00:30:36,070\nespecially with multiple routers.\n\n632\n00:30:36,070 --> 00:30:37,950\n>> Yep, and it's not something that,\n\n633\n00:30:37,950 --> 00:30:42,120\nI don't think I've ever had to do\nit in a production environment.\n\n634\n00:30:42,120 --> 00:30:44,650\nI've done it in lab environments and\nthings, but\n\n635\n00:30:44,650 --> 00:30:46,770\nI've never done it in\na production environment.\n\n636\n00:30:48,380 --> 00:30:51,820\nOne scenario might be if you've\ngot third party equipment,\n\n637\n00:30:51,820 --> 00:30:54,490\nmaybe you got Juniper equipment,\nor 3Com, or\n\n638\n00:30:54,490 --> 00:30:58,170\nwhatever, they don't adhere to these\nadministrative distances like Cisco does.\n\n639\n00:30:58,170 --> 00:30:59,610\nThey usually just hard set it.\n\n640\n00:30:59,610 --> 00:31:02,180\nAnd so, you know, you may have to\nmanipulate things there to correct for\n\n641\n00:31:02,180 --> 00:31:03,490\nwhat's happening on third party devices.\n\n642\n00:31:04,920 --> 00:31:07,990\nAll right, well, Ronnie, looking at\nthe clock we are right at our break time.\n\n643\n00:31:07,990 --> 00:31:09,830\nSo let's go ahead and stop here.\n\n644\n00:31:09,830 --> 00:31:10,550\n>> Okay.\n>> And\n\n645\n00:31:10,550 --> 00:31:13,190\nyou got any other profound\npearls of wisdom to throw out?\n\n646\n00:31:13,190 --> 00:31:13,886\n>> Not yet.\n[LAUGH]\n\n647\n00:31:13,886 --> 00:31:14,390\n>> [LAUGH] All right,\n\n648\n00:31:14,390 --> 00:31:16,560\nwell ladies and gentlemen, stay tuned.\n\n649\n00:31:16,560 --> 00:31:19,205\nWhen we get back,\nmore Cisco action, after this.\n\n650\n00:31:19,205 --> 00:31:27,970\n[SOUND]\nAll right, welcome back everybody.\n\n651\n00:31:27,970 --> 00:31:30,930\nSo before the break, we were talking\nabout administrative distance.\n\n652\n00:31:30,930 --> 00:31:32,780\nAnd what we wanna do is\na quick demonstration,\n\n653\n00:31:32,780 --> 00:31:36,860\njust to kinda show you how that\nadministrative distance is picked up, and\n\n654\n00:31:36,860 --> 00:31:38,496\ndetermined, and all that other good stuff.\n\n655\n00:31:38,496 --> 00:31:43,820\nSo, I wanna kinda work through\na few just simple examples,\n\n656\n00:31:43,820 --> 00:31:47,390\nand what we're going to do is,\nwe've got a router sitting behind us here\n\n657\n00:31:47,390 --> 00:31:50,980\nthat is a Cisco 2821, it's up,\nit's running, it's happy.\n\n658\n00:31:50,980 --> 00:31:54,400\nAnd I've got a Layer 3 switch\nattached to it, a Cisco 3560.\n\n659\n00:31:54,400 --> 00:31:57,400\nAnd I'm gonna create a series of networks,\nand\n\n660\n00:31:57,400 --> 00:31:59,990\nI'm gonna advertise them with\ndifferent routing protocols.\n\n661\n00:31:59,990 --> 00:32:04,592\nWe'll do RIP, EIGRP, and OSPF, so we'll\njust advertise these routes out three\n\n662\n00:32:04,592 --> 00:32:09,479\ndifferent ways, so that the router learns\nabout them Via those three different ways.\n\n663\n00:32:09,479 --> 00:32:12,461\nAnd from there the router\nwill pick up these routes and\n\n664\n00:32:12,461 --> 00:32:16,900\nadd them to the routing table and we'll\nbe able to see those routing protocols,\n\n665\n00:32:16,900 --> 00:32:19,630\nthe administrative distances in action.\n\n666\n00:32:19,630 --> 00:32:23,025\nSo, I'm gonna pull up a switch here and\nlet me show you guys what I'm gonna do.\n\n667\n00:32:23,025 --> 00:32:27,780\nAnd don't worry too much about these\ncommands just yet, because we're gonna\n\n668\n00:32:27,780 --> 00:32:31,090\ndo a whole series of shows on EIGRP,\nand a whole series of shows on OSPI.\n\n669\n00:32:31,090 --> 00:32:34,525\nI just want to get this set up real\nquick and kind of show you how it works.\n\n670\n00:32:34,525 --> 00:32:40,118\nSo on my switch I'm gonna create\na couple of VLANs here so\n\n671\n00:32:40,118 --> 00:32:45,235\nI'll create like vlan 10,\nand I'll give it an IP\n\n672\n00:32:45,235 --> 00:32:50,353\naddress of 192.168.10.1, why not?\n\n673\n00:32:52,987 --> 00:32:55,214\nAnd I'll do vlan 20.\n\n674\n00:32:58,975 --> 00:33:00,764\nAnd I'll do vlan 30.\n\n675\n00:33:10,629 --> 00:33:13,823\nAll right, so I just created\nthree networks on this switch.\n\n676\n00:33:13,823 --> 00:33:17,880\n192.168.10, .20, and .30.\n\n677\n00:33:17,880 --> 00:33:18,540\nAnd there they are.\n\n678\n00:33:18,540 --> 00:33:21,660\nNow they're all showing as down because\nI don't have any ports assigned to them.\n\n679\n00:33:21,660 --> 00:33:23,690\nI don't have any trunks set up and\nall that good stuff.\n\n680\n00:33:23,690 --> 00:33:26,240\nI guess I could real quick add a trunk.\n\n681\n00:33:26,240 --> 00:33:28,710\nThat would probably make it happy and\nbring that up.\n\n682\n00:33:28,710 --> 00:33:30,277\nRonnie?\nWould you mind grabbing one of\n\n683\n00:33:30,277 --> 00:33:33,572\nthe cross-over cables down there and\nmaybe run it just on port 48?\n\n684\n00:33:33,572 --> 00:33:36,685\nLet's just whip that up\nto bring the VLANs up.\n\n685\n00:33:52,335 --> 00:33:53,576\nOh, come on.\n\n686\n00:34:01,410 --> 00:34:02,010\nAll right.\n\n687\n00:34:02,010 --> 00:34:12,400\nSo I'm just going to add a trunk here And\nthat should bring those interfaces up.\n\n688\n00:34:12,400 --> 00:34:14,560\nWell, eventually that will\nbring those interfaces up.\n\n689\n00:34:14,560 --> 00:34:17,800\nSo we're gonna bring those up and\nget them moving along.\n\n690\n00:34:17,800 --> 00:34:20,450\nAnd once that's in place,\nthese VLANs will be up.\n\n691\n00:34:20,450 --> 00:34:23,120\nAnd then I'm gonna advertise them\nwith different routing protocols.\n\n692\n00:34:23,120 --> 00:34:24,510\nSo let me get all that put in place.\n\n693\n00:34:24,510 --> 00:34:29,010\nSo this is actually a switch,\nit's a layer three switch, and\n\n694\n00:34:29,010 --> 00:34:32,100\nthat means it's a switch that's\ncapable of being a router also.\n\n695\n00:34:32,100 --> 00:34:35,980\nA lot of the mid and\nhigh level Cisco switches are that way.\n\n696\n00:34:35,980 --> 00:34:39,620\nAnd on the CCNA exam you may actually\nsee layered three switching,\n\n697\n00:34:39,620 --> 00:34:41,260\nyou see switches being used as routers.\n\n698\n00:34:41,260 --> 00:34:44,380\nAnd so\nthat's basically what I'm gonna do here.\n\n699\n00:34:44,380 --> 00:34:46,000\nSo I need to turn it on first.\n\n700\n00:34:46,000 --> 00:34:49,300\nSo I'm gonna turn that feature on,\nwhich it looks like it was already on.\n\n701\n00:34:49,300 --> 00:34:51,179\nAnd then we'll do like router rip.\n\n702\n00:34:53,426 --> 00:34:58,410\nAnd I want to go ahead and\ndesignate that some of these interfaces\n\n703\n00:34:58,410 --> 00:35:03,800\nare gonna be passive, some of these\ninterfaces are gonna be active.\n\n704\n00:35:03,800 --> 00:35:09,590\nSo I want to come in and\nbasically state that the vlan10 and\n\n705\n00:35:09,590 --> 00:35:12,850\nvlan20 interfaces are passive.\n\n706\n00:35:12,850 --> 00:35:19,490\nAnd then, let's get, let's see,\nwhat was 30, it was that one, right?\n\n707\n00:35:19,490 --> 00:35:21,150\nAnd I'll go ahead and\ndo that one, all right.\n\n708\n00:35:21,150 --> 00:35:26,238\nSo, what I just did is I turned on RIP,\nthe RIP routing protocol for\n\n709\n00:35:26,238 --> 00:35:30,250\nvlan30, and for my regular network.\n\n710\n00:35:30,250 --> 00:35:33,199\nI did not turn it on for vlan10 and\n20, and that's what I did right there.\n\n711\n00:35:33,199 --> 00:35:36,983\nSo vlan10 and 20,\non those I'm gonna run EIGRP and OSPF.\n\n712\n00:35:36,983 --> 00:35:41,020\nI'm gonna run some different\nrouting protocols there.\n\n713\n00:35:41,020 --> 00:35:42,200\nRonnie, you're in the router, right?\n\n714\n00:35:42,200 --> 00:35:45,380\n>> Mm-hm.\n>> Can you go ahead and enable RIP and\n\n715\n00:35:45,380 --> 00:35:47,240\non the router you can just turn it on for\neverything.\n\n716\n00:35:47,240 --> 00:35:50,500\nWell, actually,\nmake sure you turn it on just for\n\n717\n00:35:50,500 --> 00:35:53,825\nthe 192.168 network, I don't want\nto pull in the IT Pro TV studio.\n\n718\n00:35:53,825 --> 00:35:57,930\n[LAUGH] So that's gonna kick those on and\n\n719\n00:35:57,930 --> 00:36:02,170\nget them fired up and so\nthey're gonna start moving RIP.\n\n720\n00:36:02,170 --> 00:36:07,860\nAnd I guess I can go ahead and\nset it for version two.\n\n721\n00:36:07,860 --> 00:36:10,270\nWell, we're following classful rules so\nwe won't have to worry about,\n\n722\n00:36:10,270 --> 00:36:12,520\nwe'll leave it at the defaults then.\n\n723\n00:36:12,520 --> 00:36:17,560\nSo that takes care of that one and\n\n724\n00:36:17,560 --> 00:36:22,975\nnext I'm gonna turn on OSPF and\nwith OSPF I can be really specific.\n\n725\n00:36:22,975 --> 00:36:24,766\nI'll do OSPF for vlan20.\n\n726\n00:36:30,832 --> 00:36:32,385\nAnd Ronnie, if you can set yours.\n\n727\n00:36:32,385 --> 00:36:34,389\nActually, let's do\na different area number.\n\n728\n00:36:34,389 --> 00:36:36,577\nLet's do area 999.\n\n729\n00:36:36,577 --> 00:36:41,177\nSo can you go ahead and\nenable OSPF on that router and\n\n730\n00:36:41,177 --> 00:36:45,510\ndo it just for the 192.168 network and\ndo it for area 999?\n\n731\n00:36:48,680 --> 00:36:49,420\nAll right.\n\n732\n00:36:49,420 --> 00:36:56,920\nAnd so what I'm doing there is I'm turning\non OSPF, but just OSPF for that vlan20.\n\n733\n00:36:56,920 --> 00:36:59,830\nI'm not turning it on for\nvlan30 or vlan10.\n\n734\n00:36:59,830 --> 00:37:02,115\nI'm limiting it to that one network.\n\n735\n00:37:02,115 --> 00:37:06,340\n>> For which one are we doing?\n\n736\n00:37:06,340 --> 00:37:07,910\n>> You just need to do the zero zero.\n\n737\n00:37:07,910 --> 00:37:08,410\n>> Okay.\n>> Yep.\n\n738\n00:37:08,410 --> 00:37:08,943\n>> I just want to make sure.\n\n739\n00:37:08,943 --> 00:37:09,721\n>> All right.\n\n740\n00:37:09,721 --> 00:37:13,739\nAnd then the last one I'm gonna do is,\n\n741\n00:37:13,739 --> 00:37:17,131\nlet's see, router eigrp, and\n\n742\n00:37:17,131 --> 00:37:21,826\nlet's do AS 1.\nAnd here we'll go ahead and\n\n743\n00:37:21,826 --> 00:37:25,779\ndo network 192.168.10.\n\n744\n00:37:30,695 --> 00:37:34,870\nAnd so, we're going to turn that one on,\nand I need to do 0, also.\n\n745\n00:37:34,870 --> 00:37:35,500\nThere.\n\n746\n00:37:35,500 --> 00:37:39,868\nAll right, so,\nI'm running EIGRP for vlan10,\n\n747\n00:37:39,868 --> 00:37:45,770\nI'm running OSPF for vlan20,\nand I'm running RIP for vlan30.\n\n748\n00:37:45,770 --> 00:37:49,160\nNow on the router, Ronnie is\nsetting up here on the other side.\n\n749\n00:37:49,160 --> 00:37:52,280\nHe's setting up EIGRP, OSPF,\nand RIP for all three.\n\n750\n00:37:52,280 --> 00:37:55,270\nWell not for all three, he's only\nconnecting them to the one network.\n\n751\n00:37:55,270 --> 00:37:59,120\nSo the router is gonna be learning about\nthese different networks from my switch,\n\n752\n00:37:59,120 --> 00:38:01,370\nfrom these three different\nrouting protocols.\n\n753\n00:38:01,370 --> 00:38:03,540\nI'm running three different\nrouting protocols right now.\n\n754\n00:38:03,540 --> 00:38:08,936\nIf I do a show ip protocols,\nI'll see that I'm running RIP,\n\n755\n00:38:08,936 --> 00:38:13,140\nand I'm running OSPF and\nI'm running EIGRP.\n\n756\n00:38:13,140 --> 00:38:16,410\nI'm running all three\nprotocols at the same time.\n\n757\n00:38:16,410 --> 00:38:19,330\nNot a great idea in production\nunless we're upgrading.\n\n758\n00:38:19,330 --> 00:38:20,620\nBut for this example, it'll be perfect.\n\n759\n00:38:20,620 --> 00:38:23,020\nIt's gonna show off\nthe different protocols.\n\n760\n00:38:23,020 --> 00:38:27,030\nNow, I don't know if those interfaces\never came up, so let me check that.\n\n761\n00:38:27,030 --> 00:38:33,540\nI'm gonna do show ip interface brief and\nI'm gonna filter it to exclude.\n\n762\n00:38:33,540 --> 00:38:35,510\nLet me write this whole command down.\n\n763\n00:38:35,510 --> 00:38:39,660\nExclude any interface that currently says,\nUnassigned, right?\n\n764\n00:38:39,660 --> 00:38:41,480\nIf the IP address is unassigned.\n\n765\n00:38:41,480 --> 00:38:43,180\nWhoops, it's lower case, isn't it?\n\n766\n00:38:43,180 --> 00:38:44,470\nOr, yeah, it is lowercase.\n\n767\n00:38:45,670 --> 00:38:46,790\nThere, unassigned.\n\n768\n00:38:46,790 --> 00:38:49,020\nSo that it'll only show me\ninterfaces that have IPs.\n\n769\n00:38:49,020 --> 00:38:51,340\nAnd I can see these three are still down.\n\n770\n00:38:51,340 --> 00:38:53,981\nLet me assign some interfaces to them.\n\n771\n00:39:12,639 --> 00:39:18,111\nLet's do 12 to 13 for vlan 20 and\n\n772\n00:39:18,111 --> 00:39:22,110\n14 to 15 for vlan 30.\n\n773\n00:39:22,110 --> 00:39:26,370\nYou gotta have some interfaces in\na vlan before it'll actually come up.\n\n774\n00:39:31,471 --> 00:39:32,511\nAnd they're up down,\n\n775\n00:39:32,511 --> 00:39:36,420\nI think I'll have to give them a second\nbefore they'll get really happy.\n\n776\n00:39:36,420 --> 00:39:39,748\nOh, and then there's that trunk,\nisn't there?\n\n777\n00:39:39,748 --> 00:39:41,391\nLet's see.\n\n778\n00:39:41,391 --> 00:39:44,870\nFA0/48 is trunking, according to this.\n\n779\n00:39:44,870 --> 00:39:46,980\nBut it may not be fully happy.\n\n780\n00:39:46,980 --> 00:39:48,030\nSo let's get out of that.\n\n781\n00:39:50,622 --> 00:39:53,640\nAnd, Ronnie,\nam I able to connect to the third switch?\n\n782\n00:39:53,640 --> 00:39:54,890\nIs it set up for Telnet or SSH?\n\n783\n00:39:54,890 --> 00:39:55,910\n>> I do not know.\n\n784\n00:39:57,640 --> 00:39:58,656\nI can get it set up, though.\n\n785\n00:40:00,560 --> 00:40:02,860\n>> Yeah, or\nif you can console in it real quick.\n\n786\n00:40:02,860 --> 00:40:05,121\nJust take port 48 and set it as a trunk.\n\n787\n00:40:05,121 --> 00:40:05,736\n>> Okay.\n\n788\n00:40:05,736 --> 00:40:08,868\n>> It should be a trunk already, and\nit says that I'm moving those VLANs.\n\n789\n00:40:08,868 --> 00:40:16,000\nSo the VLANs should be up, I might just be\nbeing impatient again, which does happen.\n\n790\n00:40:16,000 --> 00:40:19,000\nYou know what, Ronny, I am,\nI'm being impatient, they just came up.\n\n791\n00:40:19,000 --> 00:40:23,203\nSo, patience is a virtue,\nand not one I have a lot of.\n\n792\n00:40:23,203 --> 00:40:26,529\nSo there we go, so\nI've got those three networks and\n\n793\n00:40:26,529 --> 00:40:29,476\nif I look at my routing\ntable here on switch 2,\n\n794\n00:40:29,476 --> 00:40:35,245\nif I do a show IP route I can see\nthe 192.168.10, .20, and .30 networks.\n\n795\n00:40:35,245 --> 00:40:36,040\nThey're all right there, right?\n\n796\n00:40:37,360 --> 00:40:40,210\nAnd they don't show a metric, all right?\n\n797\n00:40:40,210 --> 00:40:41,920\nOr an administrative distance.\n\n798\n00:40:41,920 --> 00:40:44,210\nAnd that's because they're\ndirectly connected.\n\n799\n00:40:44,210 --> 00:40:47,820\nTechnically, directly connected doesn't\nhave an administrative distance so\n\n800\n00:40:47,820 --> 00:40:48,770\nit's 0, right?\n\n801\n00:40:48,770 --> 00:40:50,280\nJust like I showed you in that chart.\n\n802\n00:40:50,280 --> 00:40:51,780\nAnd so it doesn't display it.\n\n803\n00:40:51,780 --> 00:40:54,600\nIt just says they're directly connected,\nand here they are.\n\n804\n00:40:54,600 --> 00:40:58,480\nBut I'm advertising them\nwith these other protocols.\n\n805\n00:40:58,480 --> 00:40:59,100\nRight?\n\n806\n00:40:59,100 --> 00:41:00,500\nAnd let's take a look.\n\n807\n00:41:00,500 --> 00:41:02,180\nRonnie, are you picking those\nup in your routing table?\n\n808\n00:41:02,180 --> 00:41:03,230\n>> Yup, I am.\n\n809\n00:41:03,230 --> 00:41:04,830\n>> So let's jump over to Ronnie's machine,\n\n810\n00:41:04,830 --> 00:41:08,990\nand he's looking at the routing\ntable on his router.\n\n811\n00:41:08,990 --> 00:41:14,710\nAnd he's got 192.168.10 with\nan administrative distance of 90,\n\n812\n00:41:14,710 --> 00:41:16,880\na 20, and I don't see 30 in there,\nRonnie did.\n\n813\n00:41:16,880 --> 00:41:18,767\n>> Maybe I didn't [CROSSTALK]\n>> Make it over or\n\n814\n00:41:18,767 --> 00:41:21,490\ndo another show IP route,\nmaybe just hadn't made it over yet.\n\n815\n00:41:21,490 --> 00:41:25,120\nThirty is RIP and RIP is slow, so,\nit may have just not made it over.\n\n816\n00:41:26,680 --> 00:41:28,820\nLooks like we have a RIP problem.\n\n817\n00:41:28,820 --> 00:41:33,600\nAlright, well why don't we, why don't we\njust go over the ones that are showing up\n\n818\n00:41:33,600 --> 00:41:35,690\nright now, and\nthen we'll sort out the RIP thing.\n\n819\n00:41:36,740 --> 00:41:39,500\n>> Yeah, when you take a look at\nthe idea of administrative distance,\n\n820\n00:41:39,500 --> 00:41:43,830\nwhat we're looking at is the number\nright here within these square brackets.\n\n821\n00:41:43,830 --> 00:41:47,320\nAnd it is the first number that\nwe're generally taking a look at.\n\n822\n00:41:47,320 --> 00:41:53,500\nSo even though we advertise\nthe same network inside of RIP and\n\n823\n00:41:53,500 --> 00:41:59,350\nEIGRP as well as OSPF,\nit is here that we see where\n\n824\n00:41:59,350 --> 00:42:04,230\nEIGRP is the one that won out\non those different ones here.\n\n825\n00:42:04,230 --> 00:42:07,790\nWhereas OSPF is the one that\nactually got entered in here for\n\n826\n00:42:07,790 --> 00:42:11,250\nthis 10.20 here as well.\n\n827\n00:42:12,300 --> 00:42:13,490\n>> And you get the two numbers.\n\n828\n00:42:13,490 --> 00:42:17,036\nSo you got like 90/28416.\n\n829\n00:42:17,036 --> 00:42:19,871\nOr 110/2, right?\n\n830\n00:42:19,871 --> 00:42:21,120\nSo what are these numbers?\n\n831\n00:42:21,120 --> 00:42:23,850\nWell the first number is that\nadministrative distance.\n\n832\n00:42:23,850 --> 00:42:28,230\nIf I learn the same route\nfrom two different protocols,\n\n833\n00:42:28,230 --> 00:42:30,760\nwhichever one is the lower\nadministrative distance will get picked.\n\n834\n00:42:30,760 --> 00:42:35,245\nAnd you can see right here where that\nEIGRP route, and I can't see it Ronnie,\n\n835\n00:42:35,245 --> 00:42:39,799\nthe viewers can see it, there's a D to the\nleft of it that lets me know that it was\n\n836\n00:42:39,799 --> 00:42:44,353\nlearned via EIGRP, and the second route\nhas an O to the left of it letting me know\n\n837\n00:42:44,353 --> 00:42:45,828\nit was learned via OSPF.\n\n838\n00:42:45,828 --> 00:42:48,828\nAnd so we can see that it's\nthose two different protocols,\n\n839\n00:42:48,828 --> 00:42:50,500\nEIGRP will be preferred.\n\n840\n00:42:50,500 --> 00:42:52,090\nAnd can you do a show IP route?\n\n841\n00:42:52,090 --> 00:42:53,870\nLet's see if the RIP router's shown up.\n\n842\n00:42:53,870 --> 00:42:55,930\nI made a slight change.\n\n843\n00:42:55,930 --> 00:42:56,700\n>> Yep there it is.\n\n844\n00:42:56,700 --> 00:42:57,530\n>> There we go.\n\n845\n00:42:57,530 --> 00:43:01,850\nAnd so we can see the RIP route with that\n120, and it's got an R to the left of it.\n\n846\n00:43:01,850 --> 00:43:04,210\nSo that's the router prioritizing it.\n\n847\n00:43:04,210 --> 00:43:08,870\nThe second number, the number after\nthe slash, that's the metric.\n\n848\n00:43:08,870 --> 00:43:10,560\nSo with RIP, it's a hop count.\n\n849\n00:43:10,560 --> 00:43:13,350\nThat one tells me there's one hop.\n\n850\n00:43:13,350 --> 00:43:15,650\nOne more router to go to\nto get to that destination.\n\n851\n00:43:15,650 --> 00:43:17,510\nVery easy to read.\n\n852\n00:43:17,510 --> 00:43:22,360\nOSPF has a two, and that's the result\nof a formula that it runs.\n\n853\n00:43:22,360 --> 00:43:26,200\nThat it takes 100 megabit and divides it\nby whatever the bandwidth of that line is.\n\n854\n00:43:26,200 --> 00:43:31,220\nWell, in this case it should\nbe a hundred megabit line.\n\n855\n00:43:31,220 --> 00:43:32,500\nSo it should be a one.\n\n856\n00:43:32,500 --> 00:43:34,190\nIt ended up with a two somehow.\n\n857\n00:43:34,190 --> 00:43:36,370\nSo anyhow, it's got a two.\n\n858\n00:43:36,370 --> 00:43:39,200\nOh, you know what, maybe there's\ntwo one hundred megabit lines.\n\n859\n00:43:39,200 --> 00:43:42,240\nTwo hops, so you end up with that two.\n\n860\n00:43:42,240 --> 00:43:47,010\nAnd then with EIGRP, you got 28,416,\nand that's cuz EIGRP\n\n861\n00:43:47,010 --> 00:43:52,130\nuses this crazy complex formula that\nwe'll see in the EIGRP episodes.\n\n862\n00:43:52,130 --> 00:43:54,390\nYou don't have to memorize it for\nthe exam, but it is a crazy formula.\n\n863\n00:43:55,480 --> 00:43:58,360\n>> But right here in the routing table\nnotice that it also shows some other\n\n864\n00:43:58,360 --> 00:43:59,488\ninformation for us too.\n\n865\n00:43:59,488 --> 00:44:04,110\nThe next hop router that we go to,\nas well as the time that this picker route\n\n866\n00:44:04,110 --> 00:44:09,050\nhas been valid, and then the exiting\ninterface is also something we see here,\n\n867\n00:44:09,050 --> 00:44:12,520\nwhich tells us what direction to send\nthe information out of the router.\n\n868\n00:44:14,412 --> 00:44:18,470\n>> All right, so we've got some of that\nstuff showing up there, and you know what,\n\n869\n00:44:18,470 --> 00:44:21,360\nI just noticed the crazy mouse thing\nyour computer's doing on the screen,\n\n870\n00:44:21,360 --> 00:44:23,204\nthat's a little bit crazy [LAUGH].\n\n871\n00:44:23,204 --> 00:44:26,530\n>> Yeah, oh yeah, that's a little bit-\n>> Well anyhow they can see what you're\n\n872\n00:44:26,530 --> 00:44:27,510\ntalking about.\n\n873\n00:44:27,510 --> 00:44:29,860\nSo you can see that\nthe administrative distance is there,\n\n874\n00:44:29,860 --> 00:44:31,630\nwe can manipulate those.\n\n875\n00:44:31,630 --> 00:44:33,850\nIt's way beyond the scope\nof the CCNA exam.\n\n876\n00:44:33,850 --> 00:44:36,800\nFor those of you that go\none to do the CCNP exams,\n\n877\n00:44:36,800 --> 00:44:39,050\nthat's where you start to manipulate\nthose administrative distances, but\n\n878\n00:44:39,050 --> 00:44:40,880\nhere the router is making those decisions.\n\n879\n00:44:40,880 --> 00:44:42,880\nIf we go back,\nwell let's switch back to mine.\n\n880\n00:44:42,880 --> 00:44:50,490\nSo, on mine, If I start to advertise the\nother routes inside of, say, EIGRP, right?\n\n881\n00:44:50,490 --> 00:44:52,680\nOr I'll do OSPF.\n\n882\n00:44:52,680 --> 00:44:58,140\nSo right now we've got EIGRP preferred,\nthen OSPF, then RIP, right?\n\n883\n00:44:58,140 --> 00:45:02,880\nAnd I'm using OSPF just for one of\nthe networks, right, I'm not using it for\n\n884\n00:45:02,880 --> 00:45:03,910\nall three of them.\n\n885\n00:45:03,910 --> 00:45:11,792\nAnd so if I do a If I pull\nup my OSPF configuration,\n\n886\n00:45:11,792 --> 00:45:16,121\nso here's my OSPF configuration, and see\nhow I just put in network statements for\n\n887\n00:45:16,121 --> 00:45:20,930\nthe network connecting the two devices,\nbut also the network from Vland 20 right.\n\n888\n00:45:20,930 --> 00:45:23,810\nWhat if I add Vland's 10 and\n30 to that list?\n\n889\n00:45:23,810 --> 00:45:29,745\nWell let's do it.\n\n890\n00:45:29,745 --> 00:45:37,578\nSo I'm going to add 192 to 168.10.0 and\n30.0.\n\n891\n00:45:37,578 --> 00:45:41,161\nSo, I'm going to add all three\nof them to OSPF, all right?\n\n892\n00:45:45,453 --> 00:45:46,140\nAll right.\n\n893\n00:45:46,140 --> 00:45:51,596\nSo in OSPF, I'm now advertising .10,\n.20, and .30.\n\n894\n00:45:51,596 --> 00:45:56,301\nIn EIGRP, I'm doing .10, so\nI'm now advertising that .10\n\n895\n00:45:56,301 --> 00:46:00,710\nnetwork two different ways,\nwith EIGRP and with OSPF.\n\n896\n00:46:00,710 --> 00:46:06,440\nAnd .30, I'm doing with OSPF,\nand I'm doing it with RIP.\n\n897\n00:46:06,440 --> 00:46:08,370\nSo it's being done two different ways.\n\n898\n00:46:08,370 --> 00:46:09,140\nAll right?\n\n899\n00:46:09,140 --> 00:46:14,074\nNow, that that's being passed out, let's\njump back over to Ronnie's router and\n\n900\n00:46:14,074 --> 00:46:16,411\nsee what his routing table looks like.\n\n901\n00:46:16,411 --> 00:46:20,995\n>> [LAUGH]\n>> All right.\n\n902\n00:46:20,995 --> 00:46:27,536\nNotice what happened, 192.168.30 no longer\nhas an administrative distance of 120.\n\n903\n00:46:27,536 --> 00:46:31,590\nNow it's got an administrative distance of\n110, and it's got an O to the left of it.\n\n904\n00:46:31,590 --> 00:46:35,060\nThe router is preferring\nthe OSPF route over RIP.\n\n905\n00:46:37,090 --> 00:46:40,610\nBut it's now learning .10 via OSPF also,\n\n906\n00:46:40,610 --> 00:46:44,070\nbut it didn't prefer it because\nit all ready had it via EIGRP.\n\n907\n00:46:44,070 --> 00:46:46,600\nEIGRP trumps all of them, all right?\n\n908\n00:46:46,600 --> 00:46:47,260\n>> Yeah.\n\n909\n00:46:47,260 --> 00:46:50,820\nOnce again the administrative distance\nis lower, and that's what trumps that.\n\n910\n00:46:50,820 --> 00:46:52,090\n>> Yeah.\nSo, doing an upgrade,\n\n911\n00:46:52,090 --> 00:46:55,630\nlike upgrading to EIGRP or\nsomething is actually really easy.\n\n912\n00:46:55,630 --> 00:46:57,860\nIf I go, let's go back to switch two.\n\n913\n00:46:57,860 --> 00:47:05,600\nIf I go back to switch two, and I go into\nmy EIGRP, which we did AS1, didn't we?\n\n914\n00:47:05,600 --> 00:47:07,484\n>> Yes.\n>> Okay, so if I go in here,\n\n915\n00:47:07,484 --> 00:47:09,453\nand I add those other networks.\n\n916\n00:47:15,495 --> 00:47:18,325\nI'm still running OSPF,\nand I'm still running RIP.\n\n917\n00:47:18,325 --> 00:47:20,355\nAnd they're still working just fine.\n\n918\n00:47:20,355 --> 00:47:22,495\nBut now that I'm advertising the EIGRP.\n\n919\n00:47:22,495 --> 00:47:25,265\nWhen we jump back over to Ronnie's router,\nit should have already happened.\n\n920\n00:47:25,265 --> 00:47:26,455\nIt's very fast.\n\n921\n00:47:26,455 --> 00:47:28,330\nWhen we look at his routing table,\n\n922\n00:47:28,330 --> 00:47:31,840\nwe can see that they've all\nswitched over to the EIGRP routes.\n\n923\n00:47:31,840 --> 00:47:34,090\nNow, are the end users\ngoing to notice this?\n\n924\n00:47:34,090 --> 00:47:37,536\nNo, because there was a route for\n.30 before.\n\n925\n00:47:37,536 --> 00:47:39,640\nNow, there's a route for .30 afterwards.\n\n926\n00:47:39,640 --> 00:47:40,980\nThey don't notice.\n\n927\n00:47:40,980 --> 00:47:43,860\nSo really easy to migrate\nfrom one protocol to another,\n\n928\n00:47:43,860 --> 00:47:48,000\nand that's the scenario where you're going\nto run more than one routing protocol.\n\n929\n00:47:48,000 --> 00:47:52,580\nNow that's everything's moved over to\nEIGRP, I can go and delete RIP and OSPF.\n\n930\n00:47:52,580 --> 00:47:56,110\nI can get rid of those guys,\nand my network stays up.\n\n931\n00:47:56,110 --> 00:47:57,955\nI never had any downtime.\n\n932\n00:47:57,955 --> 00:48:01,763\nThere's always the slight chance\nthat you might lose a packet when\n\n933\n00:48:01,763 --> 00:48:03,263\nthe conversion happens.\n\n934\n00:48:03,263 --> 00:48:07,112\nBut it's so minor, such a small event,\nthat you can do this live during\n\n935\n00:48:07,112 --> 00:48:11,440\na production environment, and\nit really won't cause issues.\n\n936\n00:48:11,440 --> 00:48:14,450\n>> Yeah, so remember on the exam if\nthey show you a routing table and\n\n937\n00:48:14,450 --> 00:48:17,570\nthey're telling you that you're running\nmultiple routing protocols, and\n\n938\n00:48:17,570 --> 00:48:22,710\nthey're asking for an explanation of what,\nwhy did this route get entered in here?\n\n939\n00:48:22,710 --> 00:48:25,830\nTake a look at the administrative\ndistance first, and\n\n940\n00:48:25,830 --> 00:48:28,760\nthen take a look at the idea\nof the metric as well.\n\n941\n00:48:28,760 --> 00:48:32,889\nIf the administrative distance matches,\nand you actually see two routes veen\n\n942\n00:48:32,889 --> 00:48:36,325\nthrough EIGRP going to the same\ndestination, you should actually be able\n\n943\n00:48:36,325 --> 00:48:38,395\nto tell through the metric that\nsomething may be different, and\n\n944\n00:48:38,395 --> 00:48:41,135\nthat's why you may also have that too.\n\n945\n00:48:41,135 --> 00:48:44,905\n>> All right, so that's kind of fun with\nthe administrative distances and how they\n\n946\n00:48:44,905 --> 00:48:50,400\nwork and just kind of a good demonstration\njust so you can kinda see it in action.\n\n947\n00:48:50,400 --> 00:48:53,190\nLike I said, for the exam,\nyou may see that,\n\n948\n00:48:53,190 --> 00:48:55,870\nyou can run more than one routing\nprotocol at the same time.\n\n949\n00:48:55,870 --> 00:48:59,071\nWe'll definitely revisit that\nwhen we talk and you know, Ronny,\n\n950\n00:48:59,071 --> 00:49:01,950\nredistribution is one of\nthe exam objectives, isn't it?\n\n951\n00:49:01,950 --> 00:49:06,630\nHang on, I'm gonna pull up the objectives\nhere, because I wanna say they added that.\n\n952\n00:49:06,630 --> 00:49:07,160\nThey didn't.\n\n953\n00:49:07,160 --> 00:49:08,500\nAll right, I'm wrong, then okay.\n\n954\n00:49:08,500 --> 00:49:10,740\nWell, we'll probably do it\nanyway just because, but\n\n955\n00:49:10,740 --> 00:49:12,750\nI was just checking\nthe objectives there real quick.\n\n956\n00:49:12,750 --> 00:49:16,840\nIn the CCNP exams, you absolutely\nsee redistribution, very important.\n\n957\n00:49:18,170 --> 00:49:21,300\nAll right, so\nlet's talk about a few other things.\n\n958\n00:49:21,300 --> 00:49:23,430\nWhen you start dynamically\nlearning routes.\n\n959\n00:49:23,430 --> 00:49:24,630\nSo, you've got a routing protocol.\n\n960\n00:49:24,630 --> 00:49:26,470\nThe routers are exchanging information.\n\n961\n00:49:26,470 --> 00:49:28,620\nThere are some problems that can happen.\n\n962\n00:49:28,620 --> 00:49:31,580\n>> When we start taking a look\nat the idea of problems,\n\n963\n00:49:31,580 --> 00:49:34,190\nespecially with this\ninspector protocols here,\n\n964\n00:49:34,190 --> 00:49:37,430\nthat idea the convergence is by far\none of the big problems that we have.\n\n965\n00:49:37,430 --> 00:49:42,850\nBut there is some default behaviors of\nrouters that also get in our way, okay.\n\n966\n00:49:42,850 --> 00:49:45,350\nSo we're gonna talk about\nthe idea of what we call\n\n967\n00:49:46,850 --> 00:49:48,160\nrouting loops I guess a little bit?\n\n968\n00:49:48,160 --> 00:49:49,280\n>> Yeah, let's start out there.\n\n969\n00:49:49,280 --> 00:49:50,520\nThat's a great place to start.\n\n970\n00:49:50,520 --> 00:49:51,865\nLet's just start with the problem.\n\n971\n00:49:51,865 --> 00:49:54,970\nAnd then we'll probably\nrun into our break.\n\n972\n00:49:54,970 --> 00:49:57,650\nAnd then we'll talk about\nthe causes of that problem.\n\n973\n00:49:57,650 --> 00:49:58,760\nAnd how to fix them.\n\n974\n00:49:58,760 --> 00:50:03,070\nOr how the routers fix them for us,\nwhich in a lot of cases, they do.\n\n975\n00:50:03,070 --> 00:50:07,360\nSo basically whenever you have a network,\nand\n\n976\n00:50:07,360 --> 00:50:11,470\nlet's flip over to one of my\nlittle fancy pantsy diagrams here.\n\n977\n00:50:11,470 --> 00:50:15,570\nI'm gonna use all sorts of cool 50s\nterminology to make Jason happy.\n\n978\n00:50:15,570 --> 00:50:18,978\nIf I can get my line [INAUDIBLE].\n\n979\n00:50:18,978 --> 00:50:22,650\nSo basically when we have a network\n\n980\n00:50:22,650 --> 00:50:25,510\nthat is arranged kind of like\nthis one that I've got here.\n\n981\n00:50:25,510 --> 00:50:27,240\nAlthough maybe drawn a little better.\n\n982\n00:50:29,420 --> 00:50:31,560\nLost my router designation on this one.\n\n983\n00:50:31,560 --> 00:50:33,495\nLet me just add that back.\n\n984\n00:50:33,495 --> 00:50:35,270\nSo, when we have a router\ndesign like this,\n\n985\n00:50:35,270 --> 00:50:40,210\nwell there is a possibility that we could\nend up with what's called a routing loop.\n\n986\n00:50:40,210 --> 00:50:44,410\nAnd a routing loop is when one\nrouter makes a bad decision and\n\n987\n00:50:44,410 --> 00:50:48,180\nsends traffic the wrong way, all right?\n\n988\n00:50:48,180 --> 00:50:52,400\nSo for example, if I have a PC\nover here on 192.168.0.0, right?\n\n989\n00:50:52,400 --> 00:50:57,789\nWhen that traffic is heading\nover to 192.168.1.0,\n\n990\n00:50:57,789 --> 00:51:02,490\nit needs to go along this way and\nget to the destination.\n\n991\n00:51:02,490 --> 00:51:04,720\nThat's probably gonna be our best path.\n\n992\n00:51:04,720 --> 00:51:08,180\nNow in this case whether you're running\ndistance vector or link state or\n\n993\n00:51:08,180 --> 00:51:10,420\nwhatever, that's gonna be the best path.\n\n994\n00:51:10,420 --> 00:51:12,670\nSo that's how our traffic\nnormally would go.\n\n995\n00:51:12,670 --> 00:51:18,450\nBut, what would happen if maybe say for\nexample we had a link failure.\n\n996\n00:51:18,450 --> 00:51:19,880\nMaybe this link fails.\n\n997\n00:51:19,880 --> 00:51:20,640\nOkay.\n\n998\n00:51:20,640 --> 00:51:23,290\nAnd router three gets confused.\n\n999\n00:51:23,290 --> 00:51:27,580\nWe send traffic over to router three,\ntrying to get to that destination, and\n\n1000\n00:51:27,580 --> 00:51:29,500\nrouter three says, you know what,\nI can't get there.\n\n1001\n00:51:29,500 --> 00:51:32,380\nLet me send you to router one.\n\n1002\n00:51:32,380 --> 00:51:36,600\nAnd then maybe router one sends\nit to router two who says, yeah,\n\n1003\n00:51:36,600 --> 00:51:37,110\nyou can get there.\n\n1004\n00:51:37,110 --> 00:51:37,800\nGo to router three.\n\n1005\n00:51:37,800 --> 00:51:42,980\nAnd we start going like this, and\nwhat happens is, our traffic ends\n\n1006\n00:51:42,980 --> 00:51:48,220\nup in a cycle, in a loop like this, and it\njust rattles around and around and around.\n\n1007\n00:51:48,220 --> 00:51:49,950\nAnd it never gets to the destination.\n\n1008\n00:51:49,950 --> 00:51:51,760\nIt just wastes time on the router.\n\n1009\n00:51:53,200 --> 00:51:56,270\n>> You know, the idea that\nrouting loops that tend to happen\n\n1010\n00:51:56,270 --> 00:51:59,080\nare due to many different issues or\nproblems there.\n\n1011\n00:51:59,080 --> 00:52:02,170\nBut remember that the way that\nthe routers begin to talk.\n\n1012\n00:52:02,170 --> 00:52:05,030\nThey'll start exchanging information,\nand you'll actually end up seeing where\n\n1013\n00:52:05,030 --> 00:52:07,990\nrouter 2 will say, look,\nI do see these two routes here.\n\n1014\n00:52:07,990 --> 00:52:13,310\nRouter 1 will actually see the same route\ngoing over to the .1 network as router 2,\n\n1015\n00:52:13,310 --> 00:52:14,010\nas router 3 did.\n\n1016\n00:52:14,010 --> 00:52:18,230\nAnd so router 3 may think that's a valid\nroute to actually get back around, and\n\n1017\n00:52:18,230 --> 00:52:19,770\nthat's what ends up happening.\n\n1018\n00:52:19,770 --> 00:52:23,710\nSo we do end up with these issues quite\noften, and this actually does affect\n\n1019\n00:52:23,710 --> 00:52:27,650\nthings like convergence and the way\nthat we actually update our tables.\n\n1020\n00:52:27,650 --> 00:52:31,080\n>> Now, this is different\nthan like a broadcast storm.\n\n1021\n00:52:31,080 --> 00:52:34,370\nSo in the switch episodes we\ntalk about broadcast storms.\n\n1022\n00:52:34,370 --> 00:52:37,070\nAnd the broadcast storm\nwill rattle around forever.\n\n1023\n00:52:38,155 --> 00:52:39,800\nRouting loops are bad,\nbut they're not that bad.\n\n1024\n00:52:39,800 --> 00:52:41,870\nThey're not as bad as a broadcast storm.\n\n1025\n00:52:41,870 --> 00:52:44,630\nWith a routing loop,\nthey won't rattle around forever.\n\n1026\n00:52:44,630 --> 00:52:49,130\nEvery packet that you send on the network\nhas what you call a TTL, a time to live.\n\n1027\n00:52:49,130 --> 00:52:51,170\nRight, let me show you guys an example.\n\n1028\n00:52:51,170 --> 00:52:53,930\nIf I fire up a command prompt\nhere on my machine, and\n\n1029\n00:52:53,930 --> 00:52:55,610\nI get to a font that's not microscopic.\n\n1030\n00:52:56,800 --> 00:53:02,015\nBasically every packet that goes out on\nto the network has this time to live, and\n\n1031\n00:53:02,015 --> 00:53:04,960\nthe time to live is\nbasically a value that says,\n\n1032\n00:53:04,960 --> 00:53:08,940\nhere's how many routers this\ntraffic is allowed to pass through.\n\n1033\n00:53:08,940 --> 00:53:13,150\nSo if I ping level three ZNS servers,\nright?\n\n1034\n00:53:13,150 --> 00:53:16,980\nSee my time to live over here,\nand see how it's 55, right?\n\n1035\n00:53:16,980 --> 00:53:19,420\nWell my TTL is probably sixty four.\n\n1036\n00:53:21,240 --> 00:53:26,010\nLet me ping somebody nice and\nclose like the router for our network.\n\n1037\n00:53:26,010 --> 00:53:27,290\nOh time to live is two fifty five?\n\n1038\n00:53:27,290 --> 00:53:28,342\nThat's pretty high.\n\n1039\n00:53:28,342 --> 00:53:31,160\n[LAUGH] So\nevery time we pass through a router or\n\n1040\n00:53:31,160 --> 00:53:36,170\na piece of routing equipment, this TTL,\nthis time to live It's decreased, right?\n\n1041\n00:53:36,170 --> 00:53:38,460\nSo, when we get into\na routing loop like this,\n\n1042\n00:53:39,760 --> 00:53:44,510\neach router is decreasing that time to\nlive before forwarding the traffic on.\n\n1043\n00:53:44,510 --> 00:53:48,999\nSo, if we do get stuck in a loop,\nIt'll rattle around for awhile, but\n\n1044\n00:53:48,999 --> 00:53:51,170\neventually the TTL hits zero.\n\n1045\n00:53:51,170 --> 00:53:53,580\nAnd when that happens,\nthe router will throw the traffic away.\n\n1046\n00:53:53,580 --> 00:53:57,720\nSo it's not an infinite loop like\nwe see on switches, at layer two,\n\n1047\n00:53:57,720 --> 00:54:00,430\nbroadcast storms, that kind of loop,\nthat loop is infinite.\n\n1048\n00:54:00,430 --> 00:54:02,530\nIt'll rattle around forever.\n\n1049\n00:54:02,530 --> 00:54:03,580\nRouters don't do that.\n\n1050\n00:54:03,580 --> 00:54:04,910\nAll right.\n\n1051\n00:54:04,910 --> 00:54:06,280\nSo that's an important piece.\n\n1052\n00:54:06,280 --> 00:54:07,570\nSo your PC's and\n\n1053\n00:54:07,570 --> 00:54:11,730\nthe routers they're already protecting\nyou from an Infinite loop situation.\n\n1054\n00:54:11,730 --> 00:54:14,060\nBut, it's still bad.\n\n1055\n00:54:14,060 --> 00:54:18,140\nIt's still bad because a couple a hundred\ntimes our packet will flip through here,\n\n1056\n00:54:18,140 --> 00:54:20,120\nwhich is wasting resources on the router.\n\n1057\n00:54:20,120 --> 00:54:21,750\nIt's definitely suboptimal routing.\n\n1058\n00:54:21,750 --> 00:54:23,900\nThey should see the failure and\nnot send the traffic.\n\n1059\n00:54:23,900 --> 00:54:25,820\nSo it's definitely a bad scenario.\n\n1060\n00:54:25,820 --> 00:54:29,640\nSo Cisco has built in some various\nprotections on their equipment\n\n1061\n00:54:29,640 --> 00:54:31,650\nthat help to protect from this.\n\n1062\n00:54:31,650 --> 00:54:33,230\nSo we'll talk about it after the break.\n\n1063\n00:54:33,230 --> 00:54:35,590\nSome of the causes and\nprotections that are there, but\n\n1064\n00:54:35,590 --> 00:54:39,740\nthe other thing is that a lot\nof the stuff is automatic.\n\n1065\n00:54:39,740 --> 00:54:42,470\nIt is Cisco proprietary, some of it.\n\n1066\n00:54:42,470 --> 00:54:46,010\nSo if you have third party\nequipment like Juniper, 3com,\n\n1067\n00:54:46,010 --> 00:54:49,070\nwhatever, they have their own\nprotections or maybe they don't.\n\n1068\n00:54:49,070 --> 00:54:52,220\nIf you're using really cheapy stuff,\nlike Adtrans stuff or whatever,\n\n1069\n00:54:52,220 --> 00:54:56,280\nnot that it's bad, it's inexpensive, and\nso it may not have of the protections\n\n1070\n00:54:56,280 --> 00:54:59,960\non it that you need to make sure\nthat you have a loop free network.\n\n1071\n00:54:59,960 --> 00:55:01,040\n>> Right.\n\n1072\n00:55:01,040 --> 00:55:04,190\n>> All right, so\nI definitely wanna talk about that.\n\n1073\n00:55:04,190 --> 00:55:09,210\nOne other point to keep in mind,\nis that we need loop detection and\n\n1074\n00:55:09,210 --> 00:55:09,950\nloop prevention.\n\n1075\n00:55:09,950 --> 00:55:13,280\nWe need these mechanisms with\ndistance vector protocols.\n\n1076\n00:55:13,280 --> 00:55:17,640\nDistance vector protocols like RIP and\nEIGRP can create loops.\n\n1077\n00:55:17,640 --> 00:55:21,630\nOSPF has its own loop protection built in.\n\n1078\n00:55:21,630 --> 00:55:24,520\nSo if you're running OSPF,\nyou don't need this stuff.\n\n1079\n00:55:24,520 --> 00:55:28,760\nYou will not have loops in OSPF\nunless you manually put them there.\n\n1080\n00:55:28,760 --> 00:55:32,090\n>> Same thing would be\ntrue also with EIGRP.\n\n1081\n00:55:32,090 --> 00:55:36,490\nEIGRP that actually say that we guarantee\nthere are no loops at all that will\n\n1082\n00:55:36,490 --> 00:55:39,810\nactually be happening due to the way\nthey calculate their metric as well.\n\n1083\n00:55:39,810 --> 00:55:43,210\nYou know, it's funny, you're absolutely\nright, they say it on their webpage.\n\n1084\n00:55:43,210 --> 00:55:45,390\nI can show you an easy\nway to loop EIGRP though.\n\n1085\n00:55:45,390 --> 00:55:48,280\nSo there are certain\nscenarios where even EIGRP,\n\n1086\n00:55:48,280 --> 00:55:51,380\nwhich guarantees loop free delivery,\ncan still have loops.\n\n1087\n00:55:51,380 --> 00:55:56,919\nSo it is possible, OSPF it's not possible,\nand we'll learn why in the OSPF episodes.\n\n1088\n00:55:56,919 --> 00:55:59,383\nBut either way,\nit's all important stuff, and\n\n1089\n00:55:59,383 --> 00:56:02,640\nwe need to know about it We need\nto know the mechanisms behind it.\n\n1090\n00:56:02,640 --> 00:56:03,662\nNot because we have to configure it.\n\n1091\n00:56:03,662 --> 00:56:04,369\n>> Right.\n>> It's automatic.\n\n1092\n00:56:04,369 --> 00:56:07,140\nIt's already done, but\nbecause it can show up on the exam.\n\n1093\n00:56:07,140 --> 00:56:08,470\n>> Right.\n>> So we need to know those concepts.\n\n1094\n00:56:09,470 --> 00:56:12,810\nAll right.\nSo, let's stop here and I know Ronnie,\n\n1095\n00:56:12,810 --> 00:56:15,030\nwe got a bit of a late start\nthis morning on our episode.\n\n1096\n00:56:15,030 --> 00:56:16,380\n>> Yep.\n>> So, we're gonna stop here and\n\n1097\n00:56:16,380 --> 00:56:17,633\nwe'll take a lunch break-\n>> Okay.\n\n1098\n00:56:17,633 --> 00:56:18,150\nSure.\n\n1099\n00:56:18,150 --> 00:56:23,430\n>> And when we get back,\nwe'll jump into the ways loops get created\n\n1100\n00:56:23,430 --> 00:56:27,440\non our networks, how we can prevent them,\nand how the routers prevent it for us, and\n\n1101\n00:56:27,440 --> 00:56:30,230\nsome other little bells and\nwhistles on our routing protocols.\n\n1102\n00:56:30,230 --> 00:56:31,090\n>> Sounds good.\n>> All right, so\n\n1103\n00:56:31,090 --> 00:56:32,370\nladies and gentlemen, stay tuned.\n\n1104\n00:56:32,370 --> 00:56:34,435\nWe'll be back after this\nslightly extended break.\n\n1105\n00:56:34,435 --> 00:56:41,133\n[MUSIC]\n\n1106\n00:56:42,800 --> 00:56:44,750\nAll right, welcome back everybody.\n\n1107\n00:56:44,750 --> 00:56:49,300\nSo before the break, we were talking about\nour routing protocols, and how they kind\n\n1108\n00:56:49,300 --> 00:56:52,020\nof learn some of the routes, and some\nof the different things involved there.\n\n1109\n00:56:52,020 --> 00:56:54,695\nAnd I'd led into routing loops.\n\n1110\n00:56:54,695 --> 00:56:55,200\n>> Yep.\n>> Right.\n\n1111\n00:56:55,200 --> 00:56:58,350\nAnd now our traffic can rattle\naround if we're not careful.\n\n1112\n00:56:58,350 --> 00:57:01,450\nSo now I wanna take a look at some of the\nprotection mechanisms that are built into\n\n1113\n00:57:01,450 --> 00:57:04,000\nthe routers to help us prevent that.\n\n1114\n00:57:04,000 --> 00:57:05,600\n>> Remember that a lot of these things,\n\n1115\n00:57:05,600 --> 00:57:08,250\nthese issues that we tend to deal with,\nwe really don't have to worry about them,\n\n1116\n00:57:08,250 --> 00:57:13,160\nbut CISCO does expect you to at least\nknow the technology behind them, and what\n\n1117\n00:57:13,160 --> 00:57:17,430\nactually happens allowing you to actually\nbe a more efficient technician overall.\n\n1118\n00:57:17,430 --> 00:57:20,630\nSo we're going to talk about the idea\nof the different problems that we have,\n\n1119\n00:57:20,630 --> 00:57:22,930\nwhich we talk about it again,\nrouting loops.\n\n1120\n00:57:22,930 --> 00:57:26,390\nWe're gonna talk about the different\nways that Cisco routers tend to actually\n\n1121\n00:57:26,390 --> 00:57:27,460\nhandle them as well.\n\n1122\n00:57:27,460 --> 00:57:31,430\n>> Yeah, so one of the main\nways that loops get caused,\n\n1123\n00:57:31,430 --> 00:57:33,620\nlet's think in terms of a cause, right?\n\n1124\n00:57:33,620 --> 00:57:37,900\nSo one of the main causes of a loop is\nwhere a router through one mechanism or\n\n1125\n00:57:37,900 --> 00:57:42,180\nanother, learns about it's own routes,\nall right?\n\n1126\n00:57:42,180 --> 00:57:44,500\nAnd that sounds confusing, so\nlet me kinda highlight that.\n\n1127\n00:57:44,500 --> 00:57:48,260\nLet's jump back over to my little\ntriangle diagram here, and\n\n1128\n00:57:48,260 --> 00:57:49,650\nI'll show you what I mean.\n\n1129\n00:57:49,650 --> 00:57:54,920\nIn this diagram, see how router three\nis connected to the 192.168.1 network.\n\n1130\n00:57:54,920 --> 00:57:57,860\nIt's just directly plugged in,\nso it's got that network.\n\n1131\n00:57:57,860 --> 00:58:02,284\nAnd what it's going to do, is when\nyou run a dynamic routing protocol,\n\n1132\n00:58:02,284 --> 00:58:07,372\nrouter three is going to tell router one\nand router two, it's gonna say hey guys,\n\n1133\n00:58:07,372 --> 00:58:10,883\nI know about 192.168.1.0, how about you?\n\n1134\n00:58:10,883 --> 00:58:13,530\nAnd router one and router two will say,\nno we don't know about it,\n\n1135\n00:58:13,530 --> 00:58:17,130\nlet's add it to our routing tables,\nand so they'll populate that.\n\n1136\n00:58:17,130 --> 00:58:20,626\nWell, because the routers\nare talking to each other,\n\n1137\n00:58:20,626 --> 00:58:24,806\nrouter two is going to forward\nthat same message onto router one,\n\n1138\n00:58:24,806 --> 00:58:29,084\nand router one is going to forward\nthat same message to router two.\n\n1139\n00:58:29,084 --> 00:58:30,619\nRight?\nSo the route is,\n\n1140\n00:58:30,619 --> 00:58:34,985\nand let me do different colors so\nthis doesn't get confusing.\n\n1141\n00:58:34,985 --> 00:58:39,132\nRight, so the advertisements\nare gonna go out like this, right?\n\n1142\n00:58:39,132 --> 00:58:43,060\nAnd then router two is gonna\nadvertise to router one.\n\n1143\n00:58:43,060 --> 00:58:46,591\nAnd router one is gonna\nadvertise to router two, right?\n\n1144\n00:58:46,591 --> 00:58:53,800\nSo, router two is gonna hear about\nthe 192.168.1 network two different ways.\n\n1145\n00:58:53,800 --> 00:59:00,175\nOne way which is, oh that's not\nthe biggest line possible, is it?\n\n1146\n00:59:00,175 --> 00:59:04,310\nOne way, there we go,\nwhich is this way, right?\n\n1147\n00:59:04,310 --> 00:59:08,690\nAnd then the other way,\nwhich is right here.\n\n1148\n00:59:08,690 --> 00:59:11,750\nSo those are the two different paths that\nit can follow to get to that network.\n\n1149\n00:59:11,750 --> 00:59:12,560\nIt learns about them both.\n\n1150\n00:59:12,560 --> 00:59:13,730\nThey're both good routes.\n\n1151\n00:59:13,730 --> 00:59:14,460\nRight?\n\n1152\n00:59:14,460 --> 00:59:16,840\nBut one is shorter than the other,\nand it's gonna pick that.\n\n1153\n00:59:16,840 --> 00:59:17,580\nAll right.\n\n1154\n00:59:17,580 --> 00:59:22,750\nNow, the trick here, the part where\nit becomes problematic is router two\n\n1155\n00:59:22,750 --> 00:59:24,950\nlearns about this route from router one.\n\n1156\n00:59:26,080 --> 00:59:27,740\nIt also learns about it from router three,\nright?\n\n1157\n00:59:27,740 --> 00:59:30,716\nSo, it learns from router one and\nit's gonna forward that along.\n\n1158\n00:59:30,716 --> 00:59:35,210\nWell, what happens if it forwards\nit back to router three, all right.\n\n1159\n00:59:35,210 --> 00:59:38,945\nWell, router three's gonna say, you\nknow what, I see this route that you're\n\n1160\n00:59:38,945 --> 00:59:42,380\nadvertising to me router two,\nbut I'm directly connected.\n\n1161\n00:59:42,380 --> 00:59:46,760\nYou can't possibly give me\na route that's better than that.\n\n1162\n00:59:46,760 --> 00:59:50,702\nSo whatever route router two is telling to\nrouter three, router three is gonna say,\n\n1163\n00:59:50,702 --> 00:59:54,254\nyou know what, I'm directly connected,\nI don't care about your route and\n\n1164\n00:59:54,254 --> 00:59:56,383\nit's not gonna make it\nin the routing table.\n\n1165\n00:59:56,383 --> 00:59:57,341\nAll right.\n\n1166\n00:59:57,341 --> 01:00:01,490\nBut, what happens if\nthere's a link failure?\n\n1167\n01:00:01,490 --> 01:00:04,216\nIf this link right here goes down.\n\n1168\n01:00:04,216 --> 01:00:05,360\nAll right.\n\n1169\n01:00:05,360 --> 01:00:09,780\nIf it goes down, router three loses\nthe connection to 192.168.1.0, and\n\n1170\n01:00:09,780 --> 01:00:17,000\nit immediately starts saying, does\nsomebody else have a route to get there?\n\n1171\n01:00:17,000 --> 01:00:19,370\nWell, what is router two doing?\n\n1172\n01:00:19,370 --> 01:00:22,860\nRouter two says,\nyeah I've got a route right here.\n\n1173\n01:00:22,860 --> 01:00:26,357\nI've got this route to get to 192.168.1.0.\n\n1174\n01:00:26,357 --> 01:00:28,540\nSend your traffic to me.\n\n1175\n01:00:28,540 --> 01:00:32,630\nIf router three starts to use that route,\nwhat's gonna happen?\n\n1176\n01:00:32,630 --> 01:00:34,220\nWell, a loop.\n\n1177\n01:00:34,220 --> 01:00:38,608\nThe traffic is going to get routed out\nof router three, over to router two.\n\n1178\n01:00:38,608 --> 01:00:41,460\nRouter two's gonna send it back\nto router one, who's gonna\n\n1179\n01:00:41,460 --> 01:00:44,740\nsend it back to router three, who's just\ngonna send it right back to router two,\n\n1180\n01:00:44,740 --> 01:00:49,650\nand then there's our loop, as it spirals\naround the network over and over again.\n\n1181\n01:00:49,650 --> 01:00:54,620\nA routing loop gets created if a router\nlearns its own route, the route that it\n\n1182\n01:00:54,620 --> 01:00:57,720\nadvertises, if it learns it back from\nsomebody else, that creates a loop.\n\n1183\n01:00:58,790 --> 01:01:03,430\n>> So for us here, the good thing is that\ntechnology is built into Cisco routers\n\n1184\n01:01:03,430 --> 01:01:06,630\nthat help to prevent something like\nthis from occurring, so we're gonna\n\n1185\n01:01:06,630 --> 01:01:10,800\ntake a look at two particular instances of\nthis, the one that Cisco defaults to, and\n\n1186\n01:01:10,800 --> 01:01:14,660\nthen we're gonna talk about another\none that we call poison reverse here.\n\n1187\n01:01:14,660 --> 01:01:17,852\nSo the one that Cisco defaults to\nis what we call split horizon, and\n\n1188\n01:01:17,852 --> 01:01:20,275\nthen the other one is what\nwe call poison reverse.\n\n1189\n01:01:20,275 --> 01:01:21,710\n>> Yep.\n\n1190\n01:01:21,710 --> 01:01:24,220\nSo the first one,\nyou wanna take a look at split horizon?\n\n1191\n01:01:24,220 --> 01:01:27,500\n>> Yeah, let's take a look at\nthe idea of split horizon for us.\n\n1192\n01:01:27,500 --> 01:01:30,425\nEssentially what split, I can't say it.\n\n1193\n01:01:30,425 --> 01:01:33,636\n>> [LAUGH]\n>> Split horizon does for\n\n1194\n01:01:33,636 --> 01:01:38,570\nus here is that if we send an update\nout an interface about a route,\n\n1195\n01:01:38,570 --> 01:01:43,955\nif router one were to advertise that\nsame date back out to router three,\n\n1196\n01:01:43,955 --> 01:01:47,004\nit says hey, I just gave you this route,\n\n1197\n01:01:47,004 --> 01:01:50,633\nI don't wanna actually\nsee an update about it.\n\n1198\n01:01:50,633 --> 01:01:55,231\nSo here as the loop actually begins to\nhappen here, notice that the way that we\n\n1199\n01:01:55,231 --> 01:01:59,334\nhave it drawn is that router one\nadvertised to router two, router two\n\n1200\n01:01:59,334 --> 01:02:04,600\nautomatically sent it back to router\nthree, starting the idea of the loop.\n\n1201\n01:02:04,600 --> 01:02:10,800\n>> But because that thicker router says\nwait a minute, I know that route, okay.\n\n1202\n01:02:10,800 --> 01:02:14,499\nI'm not gonna accept a route about\nsomething that I already know about, so\n\n1203\n01:02:14,499 --> 01:02:17,210\nlet's just stop it is what it does.\n\n1204\n01:02:17,210 --> 01:02:19,348\n>> The analogy I use is\nit's like telling a joke.\n\n1205\n01:02:19,348 --> 01:02:20,720\n>> [LAUGH]\n>> All right.\n\n1206\n01:02:20,720 --> 01:02:26,440\nIf I tell you guys a joke, it's a kinda\n\n1207\n01:02:26,440 --> 01:02:30,580\nhard to think of a joke right off the top\nof your head, but if I tell you a joke.\n\n1208\n01:02:30,580 --> 01:02:32,210\nIf I say hey Ronnie, knock, knock.\n\n1209\n01:02:32,210 --> 01:02:33,080\n>> Who's there?\n\n1210\n01:02:33,080 --> 01:02:34,290\n>> Interrupting cow.\n\n1211\n01:02:34,290 --> 01:02:34,960\n>> Interrupting cow?\n\n1212\n01:02:34,960 --> 01:02:35,600\n>> Moo.\n\n1213\n01:02:35,600 --> 01:02:37,350\n>> Moo.\n>> Oh, see that was pretty funny.\n\n1214\n01:02:37,350 --> 01:02:38,730\nSo I just told you that joke.\n\n1215\n01:02:38,730 --> 01:02:39,430\n>> No.\n\n1216\n01:02:39,430 --> 01:02:42,620\n>> Would it make sense for\nyou to tell me that joke right back again?\n\n1217\n01:02:42,620 --> 01:02:43,320\n>> No.\n\n1218\n01:02:43,320 --> 01:02:45,640\n>> I already know it,\nI'm the one that told you, right?\n\n1219\n01:02:45,640 --> 01:02:48,621\nIt doesn't, and that's a bad joke\nyou wouldn't want to tell anyway.\n\n1220\n01:02:48,621 --> 01:02:49,253\n>> [LAUGH]\n>> But\n\n1221\n01:02:49,253 --> 01:02:52,363\nit doesn't make sense to tell a joke\nto somebody who is there person who\n\n1222\n01:02:52,363 --> 01:02:52,944\ntold it to you.\n\n1223\n01:02:52,944 --> 01:02:53,660\n>> Right.\n\n1224\n01:02:53,660 --> 01:02:57,120\n>> And\nthat's what happens with split horizon.\n\n1225\n01:02:57,120 --> 01:03:02,010\nSplit horizon says, hey if I learn\na route on an interface, then\n\n1226\n01:03:02,010 --> 01:03:06,330\nit doesn't make sense for me to advertise\nthat route out that same interface.\n\n1227\n01:03:06,330 --> 01:03:10,047\nSo for example,\nrouter three tells router two and\n\n1228\n01:03:10,047 --> 01:03:15,724\nrouter one about this route,\nabout how to get to 192.168.1.0.\n\n1229\n01:03:15,724 --> 01:03:22,380\nWhen router one passes that on to router\ntwo, router two has to make a decision.\n\n1230\n01:03:22,380 --> 01:03:28,670\nShould I forward it over to router three,\nor should I just block it and not?\n\n1231\n01:03:28,670 --> 01:03:32,050\nAnd it looks and it says you know what,\nrouter three told me about this network\n\n1232\n01:03:32,050 --> 01:03:35,870\nalready, why would I bother to tell\nrouter three about the same network?\n\n1233\n01:03:35,870 --> 01:03:39,024\nIt already knows how to get there,\nso it trims it off,\n\n1234\n01:03:39,024 --> 01:03:42,050\nand that's what split horizon is and\nwhat it does.\n\n1235\n01:03:42,050 --> 01:03:42,723\nAll right.\n\n1236\n01:03:42,723 --> 01:03:46,470\n>> In red, this is what Cisco\nchooses by default to actually run.\n\n1237\n01:03:46,470 --> 01:03:49,560\nAnd this not only affects the idea\nof routing a base, but later on.\n\n1238\n01:03:49,560 --> 01:03:54,590\nOr, did we do that in CCENT, when we\ntalked about that with sub-interface?\n\n1239\n01:03:54,590 --> 01:03:55,300\nI can't remember.\n\n1240\n01:03:55,300 --> 01:03:56,130\n>> We haven't don't that one yet.\n\n1241\n01:03:56,130 --> 01:03:57,540\nYeah, we'll tack it out in frame relay.\n\n1242\n01:03:57,540 --> 01:04:00,830\n>> All of a sudden, I couldn't remember\nwhat particular show we were doing here.\n\n1243\n01:04:00,830 --> 01:04:02,118\nSo, when we get into that,\n\n1244\n01:04:02,118 --> 01:04:05,593\nyou actually see that it affects more\nthan just the idea of routing a base.\n\n1245\n01:04:05,593 --> 01:04:09,691\nThe idea of being able to send information\nout and get the same information back in.\n\n1246\n01:04:09,691 --> 01:04:11,725\nCan become problematic in other things,\ntoo.\n\n1247\n01:04:11,725 --> 01:04:13,081\nYeah.\n\n1248\n01:04:13,081 --> 01:04:17,180\n>> Now Ronnie,\nhow do you configure splinterizing?\n\n1249\n01:04:17,180 --> 01:04:19,440\n>> Yeah, not easily.\n\n1250\n01:04:19,440 --> 01:04:20,570\n>> You don't.\n\n1251\n01:04:20,570 --> 01:04:21,390\n>> You don't.\n\n1252\n01:04:21,390 --> 01:04:24,930\n>> It's built into the Cisco IOS.\n\n1253\n01:04:24,930 --> 01:04:26,920\nIt's turned on by default.\n\n1254\n01:04:26,920 --> 01:04:30,230\nAnd really there is absolutely\nnothing you do with it.\n\n1255\n01:04:30,230 --> 01:04:32,670\n>> Yeah.\n>> There is one advanced exception that\n\n1256\n01:04:32,670 --> 01:04:36,900\nwe'll talk about under frame relay,\nbut in any other configuration,\n\n1257\n01:04:36,900 --> 01:04:39,780\nyou are never going to need to\ndo anything with split horizon.\n\n1258\n01:04:39,780 --> 01:04:40,980\nIt's automatic.\n\n1259\n01:04:40,980 --> 01:04:45,630\nA Cisco router will not advertise\na route at an interface\n\n1260\n01:04:45,630 --> 01:04:47,920\nif it learned the route\non that same interface.\n\n1261\n01:04:47,920 --> 01:04:49,614\n>> Yeah.\n>> So there's just no point in doing it.\n\n1262\n01:04:49,614 --> 01:04:50,252\nIt won't do it.\n\n1263\n01:04:50,252 --> 01:04:50,910\nIt's automatic.\n\n1264\n01:04:50,910 --> 01:04:54,990\nSo if it's automatic, if it does it for\nus, why talk about it now?\n\n1265\n01:04:54,990 --> 01:04:55,820\nBecause it's on the exam.\n\n1266\n01:04:55,820 --> 01:04:56,590\n>> That's right.\n\n1267\n01:04:56,590 --> 01:04:59,170\n>> So we need to know it, we need\nto have it committed right up here.\n\n1268\n01:04:59,170 --> 01:05:02,020\nSplit horizon is a solution to a problem.\n\n1269\n01:05:02,020 --> 01:05:05,830\nThe problem is learning\nour own route back again.\n\n1270\n01:05:05,830 --> 01:05:10,490\n>> Yeah, so it helps us in loop\nprevention in that sense, too.\n\n1271\n01:05:10,490 --> 01:05:12,735\n>> Now Ronnie called that one the default.\n\n1272\n01:05:12,735 --> 01:05:14,990\nWell, it’s there, it is on by default.\n\n1273\n01:05:14,990 --> 01:05:19,800\n>> But there is another technology that is\nalso a solution to this problem that is\n\n1274\n01:05:19,800 --> 01:05:22,980\nalso turned on by default and\nis there in the system, so\n\n1275\n01:05:22,980 --> 01:05:25,280\nthere's actually two\nsolutions to the problem.\n\n1276\n01:05:25,280 --> 01:05:28,150\nThe second solution is one\nthat's called poison reverse.\n\n1277\n01:05:28,150 --> 01:05:29,017\nRonnie, you already mentioned it.\n\n1278\n01:05:29,017 --> 01:05:34,390\nAnd poison reverse says, you know what,\nwhy don't we just anticipate\n\n1279\n01:05:34,390 --> 01:05:37,630\nthe other routers on the network being\ndumb and telling us our own route again,\n\n1280\n01:05:37,630 --> 01:05:42,760\nright, and Cisco routers run split horizon\nby default, but do third-party routers?\n\n1281\n01:05:42,760 --> 01:05:43,540\nYou don't know, right.\n\n1282\n01:05:43,540 --> 01:05:44,910\nMost of them don't.\n\n1283\n01:05:44,910 --> 01:05:48,510\nSo you might get a bad route\nfrom these other routers.\n\n1284\n01:05:48,510 --> 01:05:49,580\nPoison reverse says,\n\n1285\n01:05:49,580 --> 01:05:52,975\nyou know what, let's not trust the other\nguys to make a smart decision.\n\n1286\n01:05:52,975 --> 01:05:59,340\nAnd if a router loses a route,\nIt doesn't just delete it from the table.\n\n1287\n01:05:59,340 --> 01:06:04,340\nIt takes it and\nmoves its metric up as high as possible\n\n1288\n01:06:04,340 --> 01:06:08,400\nto make it a bad route, to make it\na very unattractive or a poisoned route.\n\n1289\n01:06:09,400 --> 01:06:11,240\nSo let's go back to the diagram here.\n\n1290\n01:06:11,240 --> 01:06:17,390\nSo the problem that I had was if router\nthree advertises to router one and\n\n1291\n01:06:17,390 --> 01:06:21,670\nrouter two, router one advertises\ndown to router two, and\n\n1292\n01:06:21,670 --> 01:06:25,190\nthen router two advertises\nback again to router three.\n\n1293\n01:06:25,190 --> 01:06:26,170\nRight there is my problem.\n\n1294\n01:06:26,170 --> 01:06:28,100\nThere is where the loop gets created.\n\n1295\n01:06:28,100 --> 01:06:32,705\nWith poison reverse, if a link fails,\nlike this link over here,\n\n1296\n01:06:32,705 --> 01:06:36,650\nif it fails, router three\ndoesn't just delete the route.\n\n1297\n01:06:36,650 --> 01:06:41,450\nIt takes the route, modifies it\nto have a super high metric, and\n\n1298\n01:06:41,450 --> 01:06:44,700\nthen advertises that out to router one and\nrouter two.\n\n1299\n01:06:44,700 --> 01:06:47,340\nIt's kind of like sending\nout a magic bullet.\n\n1300\n01:06:47,340 --> 01:06:49,470\nIt sends out a message from\nrouter three to router one,\n\n1301\n01:06:49,470 --> 01:06:51,270\nsaying hey this router is really bad.\n\n1302\n01:06:51,270 --> 01:06:54,010\nWell remember router one,\nthat's how it learns it.\n\n1303\n01:06:54,010 --> 01:06:56,240\nIt learns it and says oh,\nthat's a really bad route.\n\n1304\n01:06:56,240 --> 01:06:57,490\nLet me delete it.\n\n1305\n01:06:57,490 --> 01:07:01,350\nIt advertises that to router two, router\ntwo says that's a really bad route and\n\n1306\n01:07:01,350 --> 01:07:05,990\ndeletes it, ensuring that if\nthe route is advertised back again,\n\n1307\n01:07:05,990 --> 01:07:08,390\nit's so bad that-\n>> It won't put it in.\n\n1308\n01:07:08,390 --> 01:07:12,610\n>> Yeah, and router three won't get it,\nand it eliminates that possibility.\n\n1309\n01:07:12,610 --> 01:07:16,420\nSplit horizon works perfectly\nif you have all Cisco equipment.\n\n1310\n01:07:17,640 --> 01:07:20,790\nPoison reverse works perfectly\nif you have mixed vendors.\n\n1311\n01:07:20,790 --> 01:07:21,690\nAnd so what does Cisco do?\n\n1312\n01:07:21,690 --> 01:07:23,200\nThey do both, right?\n\n1313\n01:07:23,200 --> 01:07:28,320\nBetter safe than sorry, so,\ntwo solutions to the same problem.\n\n1314\n01:07:29,370 --> 01:07:31,870\nI feel like I'm leaving\nsomething out on poison reverse.\n\n1315\n01:07:31,870 --> 01:07:32,900\n>> Not that I know of.\n\n1316\n01:07:32,900 --> 01:07:34,900\nYeah, that sounds good.\n\n1317\n01:07:34,900 --> 01:07:36,740\n>> Yeah, it doesn't matter\nwhat your routing protocol is.\n\n1318\n01:07:36,740 --> 01:07:38,780\nIf it's OSPF, EIGRP, RIP.\n\n1319\n01:07:38,780 --> 01:07:42,190\nThey all use different metrics, right,\nbut poison reverse just works by taking\n\n1320\n01:07:42,190 --> 01:07:45,390\nwhatever that metric is and\nmoving it to the highest possible value.\n\n1321\n01:07:45,390 --> 01:07:47,440\nThe next hop or the higher bandwidth or\n\n1322\n01:07:47,440 --> 01:07:51,350\nwhatever that next line won't have any\nmore room to grow, and it'll basically\n\n1323\n01:07:51,350 --> 01:07:55,610\ntreat the route as having an infinite\nmetric, which means you can't get to it.\n\n1324\n01:07:55,610 --> 01:07:57,830\nIt's just a null route,\nand it deletes it out.\n\n1325\n01:07:57,830 --> 01:08:01,970\n>> Yeah, and interestingly, since you\ntalked about the idea of a maximum metric\n\n1326\n01:08:01,970 --> 01:08:06,300\nhere, yeah, we are moving on to our next\nparticular way to solve another problem.\n\n1327\n01:08:07,540 --> 01:08:09,445\n>> The problem there was\nlearning our own route.\n\n1328\n01:08:09,445 --> 01:08:13,130\nWhen we learn our own route from someone\nelse then it’s gonna create a loop.\n\n1329\n01:08:13,130 --> 01:08:16,230\nPoison reverse, split horizon,\nthey fix for that, right.\n\n1330\n01:08:16,230 --> 01:08:20,950\nThe other one is you can end up in\na situation with what is called count\n\n1331\n01:08:20,950 --> 01:08:22,550\nto infinity, all right.\n\n1332\n01:08:22,550 --> 01:08:26,420\nCount to infinity is where you start\nto learn a bad route, what would create\n\n1333\n01:08:26,420 --> 01:08:31,420\na loop, and it causes your metric\nto continually increase, all right.\n\n1334\n01:08:31,420 --> 01:08:33,290\nLet me give you an example here.\n\n1335\n01:08:33,290 --> 01:08:34,536\nWe'll go back to my diagram.\n\n1336\n01:08:34,536 --> 01:08:39,170\nSo, router three is\n\n1337\n01:08:39,170 --> 01:08:42,686\nconnected to this network, and\nit advertises out to router one.\n\n1338\n01:08:42,686 --> 01:08:46,100\nRouter one advertises to router two.\n\n1339\n01:08:46,100 --> 01:08:48,360\nRouter two advertises back\nto router three, right?\n\n1340\n01:08:48,360 --> 01:08:50,650\nHere's that original loop problem, okay?\n\n1341\n01:08:51,990 --> 01:08:55,210\nIf router three loses it's connection,\n\n1342\n01:08:55,210 --> 01:08:59,650\nit's gonna trust the route coming\nfrom router two, all right?\n\n1343\n01:08:59,650 --> 01:09:02,690\nAnd then not only that,\nit's gonna trust it, but remember,\n\n1344\n01:09:02,690 --> 01:09:05,230\nrouter three is advertising to router one,\nso\n\n1345\n01:09:05,230 --> 01:09:08,280\nit's gonna take this and perpetuate it,\ncontinuing to advertise it.\n\n1346\n01:09:08,280 --> 01:09:12,050\nNow, in EIGRP and other protocols,\nit's really hard to see this,\n\n1347\n01:09:12,050 --> 01:09:14,000\nso let's use RIP as our example.\n\n1348\n01:09:14,000 --> 01:09:15,490\nRight?\nEven though RIP'ss not on the exam, but\n\n1349\n01:09:15,490 --> 01:09:17,370\njust because it's easier to understand.\n\n1350\n01:09:17,370 --> 01:09:21,160\nWith RIP, hop count is our metric, right?\n\n1351\n01:09:21,160 --> 01:09:24,530\nRouter three is directly\nplugged into 192.168.1.0.\n\n1352\n01:09:24,530 --> 01:09:28,290\nSo how many hops does it take router\nthree to get to this network?\n\n1353\n01:09:28,290 --> 01:09:30,740\nNone, zero, right, no hops.\n\n1354\n01:09:30,740 --> 01:09:35,160\nWell, when it advertises\nthat route to router one,\n\n1355\n01:09:35,160 --> 01:09:38,920\nrouter one sees it and says, well I would\nhave to go through router three, so\n\n1356\n01:09:38,920 --> 01:09:44,710\nthat's gonna be one hop,\nright, one hop to get there.\n\n1357\n01:09:44,710 --> 01:09:47,510\nRouter one is gonna\nadvertise it to router two.\n\n1358\n01:09:47,510 --> 01:09:50,460\nRouter two would have to go to router one,\ndown to router three.\n\n1359\n01:09:50,460 --> 01:09:54,090\nThat would be two hops, so\nlet me just add that here.\n\n1360\n01:09:54,090 --> 01:09:57,577\nThat would be two hops.\n\n1361\n01:09:57,577 --> 01:10:00,550\nAll right.\n\n1362\n01:10:00,550 --> 01:10:05,010\nThen, router two advertises\nit back to router three, and\n\n1363\n01:10:05,010 --> 01:10:07,639\nwhen it does that, it would be three hops.\n\n1364\n01:10:08,960 --> 01:10:09,550\nOkay.\n\n1365\n01:10:09,550 --> 01:10:12,460\nNow normally, router three would\nsay forget that, three hops,\n\n1366\n01:10:12,460 --> 01:10:14,740\nI'm directly connected,\nand just delete it.\n\n1367\n01:10:14,740 --> 01:10:16,088\nBut if it has a link failure,\n\n1368\n01:10:16,088 --> 01:10:20,920\nthen it's gonna say three hops is better\nthan nothing, which is what it's got now.\n\n1369\n01:10:20,920 --> 01:10:24,520\nAnd so it'll take that three hop route and\nput it into its routing table.\n\n1370\n01:10:24,520 --> 01:10:25,570\nAll right.\n\n1371\n01:10:25,570 --> 01:10:27,840\nAnd then it will advertise\nit to router one, and\n\n1372\n01:10:27,840 --> 01:10:30,400\nrouter one's gonna say,\nwait a minute, three hops?\n\n1373\n01:10:30,400 --> 01:10:33,090\nWell, now it would be four hops,\nso four hops.\n\n1374\n01:10:33,090 --> 01:10:34,293\nIt was only one hop before.\n\n1375\n01:10:34,293 --> 01:10:35,930\nSomething must have changed.\n\n1376\n01:10:35,930 --> 01:10:37,320\nLet me update this.\n\n1377\n01:10:37,320 --> 01:10:39,170\nSo now I'm four hops away.\n\n1378\n01:10:40,650 --> 01:10:44,476\nAnd then it's gonna advertise\nthat four hops to router two,\n\n1379\n01:10:44,476 --> 01:10:47,510\nonly now it becomes five hops, right?\n\n1380\n01:10:47,510 --> 01:10:50,480\nAnd then down here,\nwe become six hops and so on.\n\n1381\n01:10:50,480 --> 01:10:55,820\nIt's mapping out the loop, and\nit continues to count up and up and up.\n\n1382\n01:10:55,820 --> 01:10:58,630\nAnd that situation is\ncalled count to infinity.\n\n1383\n01:10:59,810 --> 01:11:03,580\n>> And if we're not careful,\nit could possibly do this.\n\n1384\n01:11:03,580 --> 01:11:07,690\nAnd so in other words, without the idea of\nwhere it can actually end up in terms of\n\n1385\n01:11:07,690 --> 01:11:11,750\nthe hop count, what we do instead is\nthat we have technology that's running\n\n1386\n01:11:11,750 --> 01:11:15,290\nthat actually helps us to limit\ninfinity is what it does.\n\n1387\n01:11:15,290 --> 01:11:16,610\n>> Yeah cuz if you let\nthem count to infinity,\n\n1388\n01:11:16,610 --> 01:11:18,820\nthat number will continue to grow and\ngrow and grow.\n\n1389\n01:11:18,820 --> 01:11:20,934\nThe routing tables\nare constantly being updated.\n\n1390\n01:11:20,934 --> 01:11:23,465\nIt's gonna start hurting\nperformance on the routers.\n\n1391\n01:11:23,465 --> 01:11:24,955\nNot only do you have a loop, but\n\n1392\n01:11:24,955 --> 01:11:28,455\nnow they're wasting time with routing\ntable calculations, and eventually\n\n1393\n01:11:28,455 --> 01:11:33,310\nthe CPU level will hit the ceiling, and\nthe router will slow to a crawl and stop.\n\n1394\n01:11:33,310 --> 01:11:34,650\nYou'll get locked out of the router, too.\n\n1395\n01:11:34,650 --> 01:11:35,160\n>> Yeah.\n\n1396\n01:11:35,160 --> 01:11:38,270\n>> So those are all kind\nof situations that happen\n\n1397\n01:11:38,270 --> 01:11:40,970\nwhen the metric just starts\nspiraling up and up and up.\n\n1398\n01:11:42,310 --> 01:11:45,620\nSo Cisco routers and\nmost third parties, too, but\n\n1399\n01:11:45,620 --> 01:11:50,740\nmost Cisco routers definitely, implement\nwhat's called a maximum metric, all right?\n\n1400\n01:11:50,740 --> 01:11:54,520\nAnd that means that every metric\nhas an upper ceiling, a top level,\n\n1401\n01:11:54,520 --> 01:11:56,330\na number that they can't get higher than.\n\n1402\n01:11:57,920 --> 01:12:01,550\n>> Now, when we take a look at this is\nvector protocol, especially by RIP,\n\n1403\n01:12:01,550 --> 01:12:05,630\nRIP says, hey, let's maximize this at\n16 hops, and then once you do that,\n\n1404\n01:12:05,630 --> 01:12:08,370\nthen we're going to consider the route,\nwell, pretty much dead.\n\n1405\n01:12:09,410 --> 01:12:13,741\n>> Yeah, and the maximum metric,\nit varies from protocol to protocol, so\n\n1406\n01:12:13,741 --> 01:12:16,302\nRonnie's example there was RIP, right?\n\n1407\n01:12:16,302 --> 01:12:19,138\nAnd so RIP, your metric is capped at 16.\n\n1408\n01:12:19,138 --> 01:12:21,450\nSo you can actually have zero through 15.\n\n1409\n01:12:21,450 --> 01:12:25,950\nBut the instant it hit 16, that's\nthe highest level of that metric and\n\n1410\n01:12:25,950 --> 01:12:30,680\nit's considered to be a null route at\nthat point or they say it's infinite so\n\n1411\n01:12:30,680 --> 01:12:31,550\nit gets dropped.\n\n1412\n01:12:31,550 --> 01:12:32,140\nAll right?\n\n1413\n01:12:32,140 --> 01:12:35,980\nSo as this count to infinity starts, we\nhave seven hops, eight hops, nine, 10, 11,\n\n1414\n01:12:35,980 --> 01:12:40,310\n12, it keeps counting up as soon as you\nhit 16, it just deletes the route out and\n\n1415\n01:12:40,310 --> 01:12:45,100\nit's gone, so that's the way we prevent\nthis count to infinity situation.\n\n1416\n01:12:45,100 --> 01:12:49,900\nIn EI's European OSPF, their formulas-\n>> They're different.\n\n1417\n01:12:49,900 --> 01:12:52,580\n>> Yeah, they create all sorts\nof crazy numbers for the metric.\n\n1418\n01:12:52,580 --> 01:12:56,090\nAnd so they have a maximum number also,\nbut it's considerably higher.\n\n1419\n01:12:56,090 --> 01:12:59,930\nLet me see if I can pull up\nan example like with OSPF.\n\n1420\n01:12:59,930 --> 01:13:06,290\nAnd it's just because it's not hop count,\nit's not something as easy as\n\n1421\n01:13:06,290 --> 01:13:11,190\na simple number like that, but\nlet me see if i can find an example here.\n\n1422\n01:13:11,190 --> 01:13:12,879\nIf i say, oh, I'm in the router.\n\n1423\n01:13:20,820 --> 01:13:22,539\nShoot, that's not what I wanted.\n\n1424\n01:13:22,539 --> 01:13:29,190\nThere we go cost, all right, so\nin OSPF my maximum metric would be 65,535.\n\n1425\n01:13:29,190 --> 01:13:29,760\nRight.\n\n1426\n01:13:29,760 --> 01:13:32,650\nSo if i set it at that,\nthat's going to be the top of its limit.\n\n1427\n01:13:32,650 --> 01:13:35,450\nAnd when it hits that point,\nits going to trim it up.\n\n1428\n01:13:35,450 --> 01:13:37,250\nI thought is was actually\nhigher than that.\n\n1429\n01:13:37,250 --> 01:13:40,839\nIt looks like that is the highest\ncost I can set manually on that.\n\n1430\n01:13:40,839 --> 01:13:46,270\nBut, 65,535, if you think about it,\nis a 16 bit number.\n\n1431\n01:13:46,270 --> 01:13:50,120\nSo they basically allocate 16 bits for\nit, but it creates that upper ceiling and\n\n1432\n01:13:50,120 --> 01:13:53,540\nif we hit that, then it's not\ngoing to be able to communicate.\n\n1433\n01:13:53,540 --> 01:13:56,037\nIf we do EIGRP,\nlet's see if it'll show me.\n\n1434\n01:13:59,693 --> 01:14:00,285\nThere we go.\n\n1435\n01:14:00,285 --> 01:14:04,230\nSee if we can find out what\nthe maximum one is on here.\n\n1436\n01:14:04,230 --> 01:14:08,550\nYou know what, it, oh you know what,\n\n1437\n01:14:08,550 --> 01:14:10,960\nI'd have to manipulate the K values and\nall that mess.\n\n1438\n01:14:10,960 --> 01:14:12,460\nThat's a hard one to find out.\n\n1439\n01:14:12,460 --> 01:14:16,360\nAnyway, it's definitely going to\nbe a bigger number than 65,535.\n\n1440\n01:14:16,360 --> 01:14:18,210\nSo it's got a maximum number also, and\n\n1441\n01:14:18,210 --> 01:14:21,110\nif the metric creeps up to that then\nthe route will just get deleted and\n\n1442\n01:14:21,110 --> 01:14:24,140\nthat stops it from just\ngoing on infinitely, right.\n\n1443\n01:14:24,140 --> 01:14:28,790\nSo, does count to infinity stop the loop?\n\n1444\n01:14:28,790 --> 01:14:32,580\nEventually it does, but\nby itself it really doesnt.\n\n1445\n01:14:32,580 --> 01:14:35,410\nIt just says hey, I'm gonna watch this\nmetric and as it gets high enough\n\n1446\n01:14:35,410 --> 01:14:40,210\neventually it gets too high and we stop it\nand by stopping it, it does fix the loop,\n\n1447\n01:14:40,210 --> 01:14:44,250\nbut it's very inefficient because\nthe loop was in existence.\n\n1448\n01:14:44,250 --> 01:14:47,820\nSplit Horizon and Poison Rivers,\n\n1449\n01:14:47,820 --> 01:14:51,120\nthey actually prevent the loop\nfrom forming in the first place.\n\n1450\n01:14:51,120 --> 01:14:58,270\nCount to infinity lets the loop form, and\nonly stops it after a period of time.\n\n1451\n01:14:58,270 --> 01:15:00,550\nAnd I'm leaving one out, Ronny,\nwhat's the one I'm leaving out.\n\n1452\n01:15:00,550 --> 01:15:01,180\n>> Timers.\n\n1453\n01:15:01,180 --> 01:15:02,420\n>> Oh, hold down timers.\n\n1454\n01:15:02,420 --> 01:15:03,650\n>> Yep.\n>> Yep.\n\n1455\n01:15:03,650 --> 01:15:08,070\nYou know, one of the very first Cisco\nprojects that I worked on, years and\n\n1456\n01:15:08,070 --> 01:15:11,390\nyears ago,\nI installed a handful of Cisco routers for\n\n1457\n01:15:11,390 --> 01:15:15,290\na law firm that had offices\nall over the state of Florida.\n\n1458\n01:15:15,290 --> 01:15:18,300\nAnd they got T1 lines\nrunning to each office and\n\n1459\n01:15:18,300 --> 01:15:21,170\nwe stuck a little Cisco router at each,\nit was just five offices so\n\n1460\n01:15:21,170 --> 01:15:25,490\nit was a small network, and we used RIP\nit was five routers you know wan links so\n\n1461\n01:15:25,490 --> 01:15:28,540\nwe threw RIP across them, and\nwe brought the system up.\n\n1462\n01:15:28,540 --> 01:15:33,010\nAnd it ran fine but then there were\nproblems with one of the T1 lines\n\n1463\n01:15:33,010 --> 01:15:37,080\nat one of the locations, and I got to\nlearn first hand about this scenario that\n\n1464\n01:15:37,080 --> 01:15:42,010\nwe're gonna see right here which is\na scenario called route flapping, Okay.\n\n1465\n01:15:42,010 --> 01:15:46,595\nLet's say, for example that I'm\nsitting at a computer over here on\n\n1466\n01:15:46,595 --> 01:15:52,380\n192.168.0.0 and\nI need to get to this other network.\n\n1467\n01:15:52,380 --> 01:15:55,070\nThe best route for\nme is going to be across this link.\n\n1468\n01:15:55,070 --> 01:15:56,128\nTo get to my destination.\n\n1469\n01:15:56,128 --> 01:15:57,829\nAll right?\n\n1470\n01:15:57,829 --> 01:16:02,430\nBut if the link in between were to fail,\nif that link were to fail and\n\n1471\n01:16:02,430 --> 01:16:04,540\ngo offline, I've got a second\nroute I can follow, right?\n\n1472\n01:16:04,540 --> 01:16:08,163\nI can go this way,\nmy other way across the link.\n\n1473\n01:16:08,163 --> 01:16:09,388\nAll right?\n\n1474\n01:16:09,388 --> 01:16:14,770\nWell what if that link that\nfailed comes back online again?\n\n1475\n01:16:14,770 --> 01:16:17,480\nIf it does, our routing table sees it and\nsays oh and it's safe.\n\n1476\n01:16:17,480 --> 01:16:20,900\nLet's go ahead and switch back over there,\nand now we can move across that line and\n\n1477\n01:16:20,900 --> 01:16:21,870\nget back to our destination.\n\n1478\n01:16:23,260 --> 01:16:27,500\nHowever, sometimes and you'll see this\nwith like T1 lines, or ISDN lines.\n\n1479\n01:16:27,500 --> 01:16:28,970\nYou use to always have an ISDN.\n\n1480\n01:16:28,970 --> 01:16:32,080\nIf you have any of your\nconfiguration's slightly wrong,\n\n1481\n01:16:32,080 --> 01:16:35,460\nthen what may happen is\nthe interface may come up.\n\n1482\n01:16:35,460 --> 01:16:39,420\nThe router thinks it's up,\nstarts sending traffic,\n\n1483\n01:16:39,420 --> 01:16:43,500\nand it realizes that it's not actually up,\nand takes are back down again.\n\n1484\n01:16:43,500 --> 01:16:46,040\nAnd then it comes back up and\nit repeats the process.\n\n1485\n01:16:46,040 --> 01:16:50,200\nIt does what's called flapping, the route\ncomes up and goes down and then up and\n\n1486\n01:16:50,200 --> 01:16:51,830\nthen down, over and over.\n\n1487\n01:16:51,830 --> 01:16:53,090\n>> The result of this, of course,\n\n1488\n01:16:53,090 --> 01:16:55,352\nmeans that what you end up with\non these different routers,\n\n1489\n01:16:55,352 --> 01:16:59,560\nis you'll end up getting routing tables\nthat are relatively inconsistent.\n\n1490\n01:16:59,560 --> 01:17:02,850\nA moment one route actually says hey,\neverything's good.\n\n1491\n01:17:02,850 --> 01:17:06,070\nNext moment, another packet goes through\nsaying no I don't have a route for this.\n\n1492\n01:17:06,070 --> 01:17:08,600\nAnd then a few moments later,\nit'll actually do it again.\n\n1493\n01:17:08,600 --> 01:17:11,590\nSo you end up dropping packets,\npretty quickly here.\n\n1494\n01:17:11,590 --> 01:17:17,210\nSo for us here The whole idea of\nunderstanding this route flapping is that.\n\n1495\n01:17:17,210 --> 01:17:20,260\nIs making sure that we understand that\nyou'll get those routing tables that will\n\n1496\n01:17:20,260 --> 01:17:22,580\nnot actually match up to\nanything that we need to so\n\n1497\n01:17:22,580 --> 01:17:25,980\nthey're not gonna provide a consistent\nroute all the way through for us.\n\n1498\n01:17:25,980 --> 01:17:29,500\n>> So the solution here is that most of\nour routers will implement what is called\n\n1499\n01:17:29,500 --> 01:17:30,710\nhold down timers.\n\n1500\n01:17:30,710 --> 01:17:33,680\nThey'll say alright if a route goes down,\ngreat, it's down,\n\n1501\n01:17:33,680 --> 01:17:35,880\nlet's find another path, right.\n\n1502\n01:17:35,880 --> 01:17:41,530\nBut if the route comes back up, let's not\nput it in the routing table right away.\n\n1503\n01:17:41,530 --> 01:17:42,070\n>> Right.\n\n1504\n01:17:42,070 --> 01:17:47,020\n>> Let's wait a moment to ensure\nthat it's actually up and if it is,\n\n1505\n01:17:47,020 --> 01:17:49,530\nthen we bring it into the routing table,\nall right.\n\n1506\n01:17:49,530 --> 01:17:51,740\nNow, you might ask yourself,\nwait a minute, Don,\n\n1507\n01:17:51,740 --> 01:17:53,160\naren't we talking about loops?\n\n1508\n01:17:53,160 --> 01:17:55,170\nHow does this help us with loops?\n\n1509\n01:17:55,170 --> 01:17:56,910\nAnd let me give you an example.\n\n1510\n01:17:56,910 --> 01:18:00,510\nI talked about poison reverse\na few moments ago, right?\n\n1511\n01:18:00,510 --> 01:18:03,040\nAnd with poison reverse,\nwhat we do is we say all right,\n\n1512\n01:18:03,040 --> 01:18:05,900\nif router three is connected\nto this network and\n\n1513\n01:18:05,900 --> 01:18:11,440\nit's advertising it out, and\nit's coming back to itself like this.\n\n1514\n01:18:11,440 --> 01:18:17,380\nWell, when router three's link fails,\nit sends out a poison message.\n\n1515\n01:18:17,380 --> 01:18:20,950\nAnd that poison message goes up to\nrouter one saying delete the route.\n\n1516\n01:18:20,950 --> 01:18:23,310\nAnd router one goes down to router two and\nsays delete the route.\n\n1517\n01:18:23,310 --> 01:18:26,820\nAnd router two goes to router three saying\ndelete the route, but it's already gone.\n\n1518\n01:18:26,820 --> 01:18:32,970\nSo this process takes some time so\nif router three loses it's link and\n\n1519\n01:18:32,970 --> 01:18:37,160\nit sees this route coming from router two,\nit might say that's a great route.\n\n1520\n01:18:37,160 --> 01:18:38,180\nLet me take it.\n\n1521\n01:18:38,180 --> 01:18:41,190\nI want it, but if it waits, if it says,\n\n1522\n01:18:41,190 --> 01:18:43,740\nyou know what,\nI'm going to hold it down for 30 seconds.\n\n1523\n01:18:43,740 --> 01:18:46,620\nLet me hold this link down for\n30 seconds and see what happens.\n\n1524\n01:18:46,620 --> 01:18:48,280\nWell in 30 seconds.\n\n1525\n01:18:48,280 --> 01:18:51,280\nRouter one should learn that\nthe route is gone and delete it.\n\n1526\n01:18:51,280 --> 01:18:54,190\nAnd router two would learn that\nthe route is gone and delete it.\n\n1527\n01:18:54,190 --> 01:18:57,180\nAnd then it will stop\nadvertising it to router three.\n\n1528\n01:18:57,180 --> 01:19:00,560\nSo now even if router three wanted it,\nit couldn't switch to it, and\n\n1529\n01:19:00,560 --> 01:19:02,330\nthe loop doesn't get created.\n\n1530\n01:19:02,330 --> 01:19:02,840\nRight?\n\n1531\n01:19:02,840 --> 01:19:07,090\nSo hold-down timers are really effective\nbecause they can suppress route flapping,\n\n1532\n01:19:07,090 --> 01:19:10,310\nthey can make sure a route is actually\nup before they switch it, and\n\n1533\n01:19:10,310 --> 01:19:13,750\nit can prevent loops by giving\nus a little bit of a delay\n\n1534\n01:19:13,750 --> 01:19:16,355\nbefore we cut over to a route\nthat may in fact be bad.\n\n1535\n01:19:18,695 --> 01:19:21,315\nNow the negative of a hold down timer\n\n1536\n01:19:21,315 --> 01:19:23,415\nis that it makes it take\nlonger to fail abroad.\n\n1537\n01:19:23,415 --> 01:19:26,775\nIf a link goes down, you might have\na perfectly good route in place, but\n\n1538\n01:19:26,775 --> 01:19:28,715\nit doesn't cut over to it immediately.\n\n1539\n01:19:28,715 --> 01:19:30,995\nAnd so of the various technologies\nthat I've talked about,\n\n1540\n01:19:30,995 --> 01:19:35,675\nthis is the one that I have\nmanipulated in real life land.\n\n1541\n01:19:35,675 --> 01:19:38,490\nYou may need to go in and say.\n\n1542\n01:19:38,490 --> 01:19:44,260\nHey, there is a connection here where I\nneed a much shorter hold down timer and\n\n1543\n01:19:44,260 --> 01:19:48,210\nI've done it where you'll take OSPF or\nsomething that has a ten second timer.\n\n1544\n01:19:48,210 --> 01:19:50,880\nAnd you drop it down to two seconds or\nsomething smaller\n\n1545\n01:19:50,880 --> 01:19:54,520\nto make it react a little faster\neven with the old down timers.\n\n1546\n01:19:54,520 --> 01:19:56,790\nSo that is something you can\neasily manipulate if you need to.\n\n1547\n01:19:56,790 --> 01:19:58,342\nThey wont ask you to do it on the exam.\n\n1548\n01:19:58,342 --> 01:20:00,540\n>> [LAUGH]\n>> Right.\n\n1549\n01:20:00,540 --> 01:20:02,690\nAlright so let's summarize those, Ronnie.\n\n1550\n01:20:02,690 --> 01:20:03,680\nWhere did they go?\n\n1551\n01:20:03,680 --> 01:20:05,846\nHere we go.\nI added them to my notes here so\n\n1552\n01:20:05,846 --> 01:20:08,603\nyou guys don't have to\nwrite all those down.\n\n1553\n01:20:08,603 --> 01:20:09,866\nLet's, there's all my notes.\n\n1554\n01:20:09,866 --> 01:20:13,034\nSo I did the problem slash solution,\nright.\n\n1555\n01:20:13,034 --> 01:20:16,260\nWe talked about learning our own routes,\nright.\n\n1556\n01:20:16,260 --> 01:20:18,515\nSo we tell someone we're out,\nand they tell it back to us, and\n\n1557\n01:20:18,515 --> 01:20:22,110\nhow split horizon and poison reverse\nboth help to protect from that.\n\n1558\n01:20:23,710 --> 01:20:26,540\n>> We also take a look at the idea\nof the max of metric as well.\n\n1559\n01:20:26,540 --> 01:20:31,920\nRemember that for us here, this is where\nwe run into that problem of the count to\n\n1560\n01:20:31,920 --> 01:20:37,490\ninfinity where the idea of the comp\ncount can continue to rise and rise.\n\n1561\n01:20:37,490 --> 01:20:40,410\nAnd so\nnormally by default again Cisco says, hey,\n\n1562\n01:20:40,410 --> 01:20:42,680\nlook we are going to limit it in this way.\n\n1563\n01:20:42,680 --> 01:20:45,720\nOr per routing protocol,\nI should say, not Cisco itself.\n\n1564\n01:20:47,110 --> 01:20:49,060\n>> And\nthen the last one was just route flapping.\n\n1565\n01:20:49,060 --> 01:20:52,820\nAnd with route flapping we have hold down\ntimers which can kick in again to prevent\n\n1566\n01:20:52,820 --> 01:20:55,810\nus from jumping on a route\nthat might be bad and\n\n1567\n01:20:55,810 --> 01:20:57,170\nwe just haven't learned that it's bad yet.\n\n1568\n01:20:57,170 --> 01:21:02,550\nSo it gives us that little moment to\nwait and be aware of the network status.\n\n1569\n01:21:02,550 --> 01:21:04,090\nSo all great things.\n\n1570\n01:21:04,090 --> 01:21:06,020\nThe cool part about all four of these,\n\n1571\n01:21:06,020 --> 01:21:07,640\nif you want to turn them on,\nyou don't have to.\n\n1572\n01:21:07,640 --> 01:21:09,439\nThey're already on,\nthey're already configured,\n\n1573\n01:21:09,439 --> 01:21:11,360\nyou really don't have to\nmess with them at all.\n\n1574\n01:21:11,360 --> 01:21:14,530\nFrom the highest end Cisco router\nto the lowest end Cisco router,\n\n1575\n01:21:14,530 --> 01:21:18,110\nwell not that Linksys junk,\nbut the actual Cisco ones.\n\n1576\n01:21:18,110 --> 01:21:21,740\nThey've all got these four turned on and\nrunning by default.\n\n1577\n01:21:21,740 --> 01:21:25,945\n>> So no real configuration needed in\nterms of anything that we've talked about.\n\n1578\n01:21:25,945 --> 01:21:29,144\nBut they will question you on\nthe idea of loop prevention,\n\n1579\n01:21:29,144 --> 01:21:31,150\nmaybe the idea of flapping.\n\n1580\n01:21:31,150 --> 01:21:34,480\nInterfaces will happen as\nwell account infinity.\n\n1581\n01:21:34,480 --> 01:21:37,987\nKnow about the solutions to prevent\nthese in terms of knowledge.\n\n1582\n01:21:37,987 --> 01:21:39,740\nAnd that's what we need to know.\n\n1583\n01:21:40,790 --> 01:21:41,802\n>> All right, well Ronnie,\n\n1584\n01:21:41,802 --> 01:21:44,390\nI think that pretty much wraps\nup objective 2.4 there, right?\n\n1585\n01:21:44,390 --> 01:21:45,566\n>> Yeah.\nSure has.\n\n1586\n01:21:45,566 --> 01:21:47,850\n>> Yeah, we've hit each of those.\n\n1587\n01:21:47,850 --> 01:21:50,848\nSo what we're gonna be doing in our\nnext couple of shows is we're gonna be\n\n1588\n01:21:50,848 --> 01:21:53,220\njumping into the actual\nrouting protocols themselves.\n\n1589\n01:21:53,220 --> 01:21:57,540\nWe're gonna jump in to OSPF and\nEIGRP and tackle their configuration.\n\n1590\n01:21:57,540 --> 01:22:01,060\nI know we already did OSPF\na little bit in CCENT but\n\n1591\n01:22:01,060 --> 01:22:03,630\nnow we're gonna hit it for real in CCNA.\n\n1592\n01:22:03,630 --> 01:22:07,140\nSo those are some of the things that\nwe've got coming down the pipe.\n\n1593\n01:22:07,140 --> 01:22:08,790\nRonnie can you think of\nanything we left out?\n\n1594\n01:22:08,790 --> 01:22:09,400\n>> Don't think so.\n\n1595\n01:22:09,400 --> 01:22:11,750\nJust remember that this\nparticular portion, right?\n\n1596\n01:22:11,750 --> 01:22:16,290\nAs much as it was review\nis a great place to begin\n\n1597\n01:22:16,290 --> 01:22:18,490\nas we start getting deeper\nin those technologies.\n\n1598\n01:22:18,490 --> 01:22:22,280\nYou'll have to rely on those fundamentals\nand knowing what happens and why you're\n\n1599\n01:22:22,280 --> 01:22:25,290\nnot receiving the routes that you need,\nhere's the way that it actually goes.\n\n1600\n01:22:25,290 --> 01:22:27,150\nHow do routes get in routing tables?\n\n1601\n01:22:27,150 --> 01:22:29,610\nGreat way to actually begin here.\n\n1602\n01:22:29,610 --> 01:22:33,530\n>> Ladies and gentlemen, as always if you\nhave any questions live during the show\n\n1603\n01:22:33,530 --> 01:22:38,660\nyou can go to itpro.tv/live, our chat box\nis right beneath the live video there,\n\n1604\n01:22:38,660 --> 01:22:41,371\nyou can post your questions during\nthe show and we answer them,\n\n1605\n01:22:41,371 --> 01:22:46,260\nyou can also after the show use the Q&A\nlink at the top of every single page.\n\n1606\n01:22:46,260 --> 01:22:47,310\nPost your questions there.\n\n1607\n01:22:47,310 --> 01:22:48,930\nWe monitor it and answer it.\n\n1608\n01:22:48,930 --> 01:22:51,310\nI know I just got done answering\na handful of them yesterday.\n\n1609\n01:22:51,310 --> 01:22:53,520\nSo definitely take a look there.\n\n1610\n01:22:53,520 --> 01:22:56,380\nIt's a great resource available\nto you to help you get over any\n\n1611\n01:22:56,380 --> 01:22:58,090\nspots where you might of had an issue.\n\n1612\n01:22:58,090 --> 01:23:01,000\nIf you ask a particularly good question,\nwe may even make an episode out of it.\n\n1613\n01:23:01,000 --> 01:23:01,774\nWe've had to do that before.\n\n1614\n01:23:01,774 --> 01:23:04,490\n>> [LAUGH]\n>> Some things are a little hard to\n\n1615\n01:23:04,490 --> 01:23:08,030\nexplain typing out into a message,\nso we can always do that,\n\n1616\n01:23:08,030 --> 01:23:11,410\nbut definitely don't just wander\naround with a question unanswered.\n\n1617\n01:23:11,410 --> 01:23:13,180\nMake sure that you reach out to us.\n\n1618\n01:23:14,450 --> 01:23:16,260\nAll right well, hope you enjoyed the show.\n\n1619\n01:23:16,260 --> 01:23:19,120\nSigning off for ITPro.TV I'm Don Pezet.\n\n1620\n01:23:19,120 --> 01:23:19,643\n>> And I'm Ronnie Wong.\n\n1621\n01:23:19,643 --> 01:23:21,176\nAnd we'll see you next time.\n\n1622\n01:23:21,176 --> 01:23:31,176\n[MUSIC]\n\n",
          "vimeoId": "80908575"
        },
        {
          "description": "In this episode Ronnie and Don discuss the basics of OSPF routing protocol. They show how to configure and verify OSPF. They discuss single and multi-area OSPF and talk about its benefits.",
          "length": "4799",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/006-OSPF-Pt-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/006-OSPF-Pt-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/006-OSPF-Pt-1-sm.jpg",
          "title": "OSPF",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:33,256 --> 00:00:35,653\nAll right, good morning,\ngood afternoon, and good evening.\n\n3\n00:00:35,653 --> 00:00:37,453\nWelcome back to another episode ITProTV.\n\n4\n00:00:37,453 --> 00:00:39,693\nI'm your host Don Pezet,\ntoday with Mr. Ronnie Wong.\n\n5\n00:00:39,693 --> 00:00:41,574\nHow's it going Ronnie?\n\n6\n00:00:41,574 --> 00:00:43,095\n>> I'm doing well.\n\n7\n00:00:43,095 --> 00:00:46,287\n>> [LAUGH]\n>> I got you off your cue.\n\n8\n00:00:46,287 --> 00:00:49,702\n>> No, I'm doing so well because this\nweekend, even though it's a holiday\n\n9\n00:00:49,702 --> 00:00:52,748\nweekend, I did not get drunk and\nget a tattoo like Justin Bieber.\n\n10\n00:00:52,748 --> 00:00:54,485\n>> Did Justin Bieber get a tattoo?\n\n11\n00:00:54,485 --> 00:00:55,726\n>> I don't know, yes probably.\n\n12\n00:00:55,726 --> 00:00:59,261\nNow of the possible tattoos that\nsomebody like that could get,\n\n13\n00:00:59,261 --> 00:01:00,600\nI can think of several.\n\n14\n00:01:00,600 --> 00:01:02,247\n>> [LAUGH]\n>> Anyhow.\n\n15\n00:01:02,247 --> 00:01:03,781\n>> I didn't get a matching one,\nlet's put it that way.\n\n16\n00:01:03,781 --> 00:01:07,102\n>> [LAUGH]\n>> Maybe you got a tattoo of Justin Bieber\n\n17\n00:01:07,102 --> 00:01:08,784\nand you just don't wanna.\n\n18\n00:01:08,784 --> 00:01:09,562\n>> Don't talk about it on the air.\n\n19\n00:01:09,562 --> 00:01:10,212\n>> That's true.\n\n20\n00:01:10,212 --> 00:01:12,731\nI could have, but highly doubt.\n\n21\n00:01:12,731 --> 00:01:17,514\n>> All right well, as exciting as\nJustin Bieber's tattoo I'm sure is,\n\n22\n00:01:17,514 --> 00:01:20,750\ninstead, why don't we talk about OSPF?\n\n23\n00:01:20,750 --> 00:01:26,600\n>> OSPF in our last episode, we started\ntalking about routing protocols.\n\n24\n00:01:26,600 --> 00:01:29,390\nAnd some of the generalities about them.\n\n25\n00:01:29,390 --> 00:01:31,250\nNow we're going to chuck that\ngeneral stuff out the window.\n\n26\n00:01:31,250 --> 00:01:33,370\nWe're gonna drill into OSPF.\n\n27\n00:01:33,370 --> 00:01:34,090\nAnd for\n\n28\n00:01:34,090 --> 00:01:37,380\nthose of you that tuned into the CCENT\nshow you already got a taste of this.\n\n29\n00:01:37,380 --> 00:01:41,410\nWhen we did the basic OSPF, now we're\ngonna get a little bit more advanced.\n\n30\n00:01:41,410 --> 00:01:46,230\n>> Yeah, our object is a call for us to\nbe able to configure as well as to verify\n\n31\n00:01:46,230 --> 00:01:49,000\nthat OSPF is running on our network here.\n\n32\n00:01:49,000 --> 00:01:50,830\nAnd so, we want to make sure\nthat you understand the ins and\n\n33\n00:01:50,830 --> 00:01:54,150\nouts, at least of what we\ncall single area OSPF here.\n\n34\n00:01:54,150 --> 00:01:56,697\nSo, we're gonna start off\nwith a basic introduction and\n\n35\n00:01:56,697 --> 00:02:00,106\nthen we're gonna get into, what we're\ngonna normally see on our routers.\n\n36\n00:02:00,106 --> 00:02:02,230\n>> All right, so let's do a quick review.\n\n37\n00:02:02,230 --> 00:02:02,788\n>> Mm-hm.\n\n38\n00:02:02,788 --> 00:02:04,087\n>> Right.\nWhat is OSPF, all right?\n\n39\n00:02:04,087 --> 00:02:04,962\n>> Right.\n>> OSPF\n\n40\n00:02:04,962 --> 00:02:09,962\nis the Open Shortest Path First\nDynamic Routing Protocol.\n\n41\n00:02:09,962 --> 00:02:13,004\nThe open part means it's an open standard.\n\n42\n00:02:13,004 --> 00:02:15,383\nThere's no copyright to it,\nanybody can run it.\n\n43\n00:02:15,383 --> 00:02:18,344\nAnd as a result, it's very popular.\n\n44\n00:02:18,344 --> 00:02:25,776\nYou see it used on 3Com, HP, Juniper,\nCisco, you name it people support OSPF.\n\n45\n00:02:25,776 --> 00:02:30,205\n>> Yeah, it's also not a dis-\n>> Vector protocol, we tend\n\n46\n00:02:30,205 --> 00:02:34,575\nto also group it into a different type of\nrouting protocol, that we call link state\n\n47\n00:02:34,575 --> 00:02:38,655\nrouting protocols and that means that\nthe metrics in which we use are different.\n\n48\n00:02:38,655 --> 00:02:41,795\nSo, unlike the distance vector\nwhere we use the ideal hop count\n\n49\n00:02:41,795 --> 00:02:46,085\nwith link state what we use what\nwe call cost or bandwidth as our\n\n50\n00:02:46,085 --> 00:02:50,880\nmajor metric in terms of our trying to\nfigure out what is the best route in OSPF.\n\n51\n00:02:50,880 --> 00:02:55,680\n>> Yeah, so when OSPF evaluates our\nnetwork, it's doing a lot of things,\n\n52\n00:02:55,680 --> 00:02:58,930\nand a lot of what it's doing is different\nthan our other routing protocols.\n\n53\n00:02:58,930 --> 00:03:03,509\nSo, let me pull up a little that I\nuse in another episode, this one.\n\n54\n00:03:04,780 --> 00:03:05,830\nAll right.\n\n55\n00:03:05,830 --> 00:03:09,230\nSo, here I got a simple network drawn,\n192.160.0.0/24s off\n\n56\n00:03:09,230 --> 00:03:13,890\nthere on the left-side, and the 1.0\nnetwork is over there on the right-side.\n\n57\n00:03:13,890 --> 00:03:17,010\nAnd if we wanna route\ntraffic between here, OSPF,\n\n58\n00:03:17,010 --> 00:03:19,680\nlet's just assume we're\nrunning OSPF on these routers.\n\n59\n00:03:19,680 --> 00:03:21,430\nIs gonna have to make some decisions.\n\n60\n00:03:21,430 --> 00:03:26,320\nWell, OS PF concerns itself with\none thing, and one thing only, and\n\n61\n00:03:26,320 --> 00:03:28,100\nthat's bandwidth.\n\n62\n00:03:28,100 --> 00:03:29,960\nLink state protocols are very intelligent.\n\n63\n00:03:29,960 --> 00:03:32,450\nThey do make good decisions\nbased on a lot of things, but\n\n64\n00:03:32,450 --> 00:03:35,570\nthe key component that they're\nlooking at is bandwidth.\n\n65\n00:03:35,570 --> 00:03:39,600\nAnd so, when they look at these lines,\nif I'm over here on this network and\n\n66\n00:03:39,600 --> 00:03:43,560\nI'm trying to figure out how to get to\nthis network, OSPF will know that there's\n\n67\n00:03:43,560 --> 00:03:49,745\ntwo ways, that it can go this way\nacross the top, or that it can go.\n\n68\n00:03:49,745 --> 00:03:53,015\nThis way across the bottom, right?\n\n69\n00:03:53,015 --> 00:03:57,185\nNow, if we were running a distance vector\nprotocol we would care about things like\n\n70\n00:03:57,185 --> 00:03:59,965\nhop count and other stuff, but\n\n71\n00:03:59,965 --> 00:04:04,112\nwith a link state protocol like\nOSPF we just care about bandwidth.\n\n72\n00:04:04,112 --> 00:04:07,892\nIt's gonna look at the line,\nand it's gonna say, all right,\n\n73\n00:04:07,892 --> 00:04:09,672\nI've got a 1.544 megabit T1 here.\n\n74\n00:04:09,672 --> 00:04:15,122\nI've also got a 1.544 megabit T1 here,\nbut it's not by itself.\n\n75\n00:04:15,122 --> 00:04:22,122\nTo get to it, I've gotta go through\na 56K line in order to get to\n\n76\n00:04:22,122 --> 00:04:27,340\nthe other side, so\nI've gotta look at those together.\n\n77\n00:04:27,340 --> 00:04:31,440\nAcross the top, I've got a 56K and\na 1 1/2 Megabit line.\n\n78\n00:04:31,440 --> 00:04:35,120\nSo it's gonna say the bottom route,\nis going to be the better route, and\n\n79\n00:04:35,120 --> 00:04:36,910\nthe green route is what it's gonna choose.\n\n80\n00:04:38,720 --> 00:04:42,200\nNow, that value we call it\ncalled bandwidth right?\n\n81\n00:04:42,200 --> 00:04:47,090\nThe OSPF standard, they don't call\nit bandwidth, they call it cost.\n\n82\n00:04:47,090 --> 00:04:48,230\nAnd they call it cost,\n\n83\n00:04:48,230 --> 00:04:51,460\nbecause they actually don't\nuse the raw bandwidth numbers.\n\n84\n00:04:51,460 --> 00:04:54,160\nThey run a basic formula against it.\n\n85\n00:04:54,160 --> 00:04:56,080\nAnd the formula is pretty simple.\n\n86\n00:04:56,080 --> 00:04:58,820\nLet me get over to my notes screen, here.\n\n87\n00:04:58,820 --> 00:05:00,300\nI'll write it on here.\n\n88\n00:05:00,300 --> 00:05:02,920\nSo-\n>> As Don is typing this in here,\n\n89\n00:05:02,920 --> 00:05:06,180\nin terms of the idea of\nthe OSPF costs formula.\n\n90\n00:05:06,180 --> 00:05:10,930\nSPF stands for Shortest Path First,\nso a lot of times, generically,\n\n91\n00:05:10,930 --> 00:05:15,440\nthat's what you hear it called is\nthe Shortest Path First Algorithm.\n\n92\n00:05:15,440 --> 00:05:19,810\nIf you wanna call it that here, and so\nDon is actually typing out the actual very\n\n93\n00:05:19,810 --> 00:05:23,890\nsimple formula for us in which we\ntake the Reference Bandwidth, and\n\n94\n00:05:23,890 --> 00:05:27,580\nthen we divide it by the Actual Bandwidth\nthat we have on that thicker link.\n\n95\n00:05:27,580 --> 00:05:29,410\nNow, normally the Reference Bandwidth for\n\n96\n00:05:29,410 --> 00:05:35,170\nus that we divide by is actually gonna\nbe a 100 megabit connection here.\n\n97\n00:05:35,170 --> 00:05:39,190\nThe easiest way that I always remember\ninstead is actually type out 100 million,\n\n98\n00:05:39,190 --> 00:05:41,850\nbecause it doesn't actually\nrecord it in terms of megabits\n\n99\n00:05:41,850 --> 00:05:44,100\nit always records it in\nterms of bits itself.\n\n100\n00:05:45,700 --> 00:05:49,280\nSo, if I have a line that\nis a 100 megabit, right?\n\n101\n00:05:49,280 --> 00:05:56,630\nIf my actual bandwidth is a 100 megabit,\nthen costs would simply equal 100 million\n\n102\n00:05:57,950 --> 00:06:03,360\ndivided by 100 million, which is my\nkind of math, because it equals 1.\n\n103\n00:06:03,360 --> 00:06:08,510\nSo the OSPF cost for\na 1 megabit line is 1, right?\n\n104\n00:06:08,510 --> 00:06:14,910\nBut where it gets hard, this would be,\nlet's call this example number 1.\n\n105\n00:06:14,910 --> 00:06:19,378\nA 100 megabit line, all right?\n\n106\n00:06:19,378 --> 00:06:24,360\nExample number 2 let's\nsay that it's a 1.544\n\n107\n00:06:24,360 --> 00:06:28,650\nmegabit T1 line like i\ndid in the diagram right?\n\n108\n00:06:28,650 --> 00:06:34,570\nSo there my cost would equal 100\nmillion divided by 1,544,000.\n\n109\n00:06:34,570 --> 00:06:40,950\nLet me throw some commas in there,\nso it'll make a little more sense.\n\n110\n00:06:40,950 --> 00:06:44,700\nSo there we go,\nwhich is math beyond my education level.\n\n111\n00:06:44,700 --> 00:06:46,550\nSo Ronnie, it looks like you're\nfiring up your calculator.\n\n112\n00:06:46,550 --> 00:06:47,950\n>> I'm trying to.\n>> While you're doing that,\n\n113\n00:06:47,950 --> 00:06:52,200\nlet me set up an example number 3,\nwhich would be that 56K line, right?\n\n114\n00:06:52,200 --> 00:06:58,380\nSo, if we have a 56 kilobyte line\nWhich would be like dial-up, right?\n\n115\n00:06:58,380 --> 00:06:59,440\nAnd you'd never get 56K.\n\n116\n00:06:59,440 --> 00:07:01,845\nYou'd probably get like 53K or whatever.\n\n117\n00:07:01,845 --> 00:07:05,500\nAnd, you'll see like 64K lines out there.\n\n118\n00:07:05,500 --> 00:07:10,330\nSo, let me just right this one in,\nand you're faster than me Ronnie,\n\n119\n00:07:10,330 --> 00:07:14,310\nso it looks like you're already done,\nall right?\n\n120\n00:07:14,310 --> 00:07:15,870\nSo what's the T1 end up being?\n\n121\n00:07:15,870 --> 00:07:17,840\n>> On the T1 it's 64.7, but\n\n122\n00:07:17,840 --> 00:07:23,006\nwe normally round up to about\n65 is what we normally do here.\n\n123\n00:07:23,006 --> 00:07:28,920\n>> So, 64.7 or approximately 65,\nthat's our cost there.\n\n124\n00:07:28,920 --> 00:07:31,090\nAnd on the dial up line,\nwhat do we end up with?\n\n125\n00:07:34,260 --> 00:07:36,408\nI have to actually make sure I\ndo the right number of zeroes.\n\n126\n00:07:36,408 --> 00:07:38,910\n[LAUGH] And we did 56K?\n\n127\n00:07:38,910 --> 00:07:45,721\nSo that's 56,000.\n\n128\n00:07:45,721 --> 00:07:49,362\nAnd we end up with 1786.\n\n129\n00:07:49,362 --> 00:07:52,765\nThat's 1785\n>> Approximately.\n\n130\n00:07:52,765 --> 00:07:55,893\n>> 0.7 if you wanna actually do exactly.\n\n131\n00:07:55,893 --> 00:07:58,042\n>> You know,\nwe'll just do approximates for\n\n132\n00:07:58,042 --> 00:08:02,290\nboth of these because we don't really\nhave to be specific, so approximately 65.\n\n133\n00:08:02,290 --> 00:08:06,633\nSo basically as we look at these numbers,\nyou'll see they're converting them and\n\n134\n00:08:06,633 --> 00:08:08,580\nhere's our cost numbers.\n\n135\n00:08:08,580 --> 00:08:11,520\nThe lower the cost, the better the line.\n\n136\n00:08:11,520 --> 00:08:14,470\nRight?\nSo if you have a cost of one.\n\n137\n00:08:14,470 --> 00:08:20,240\nSo if I want to buy a hamburger and\nif I know it's the exact same hamburger\n\n138\n00:08:20,240 --> 00:08:25,030\nfrom two different places and it's $1 at\none place and it's $65 at another place,\n\n139\n00:08:25,030 --> 00:08:28,550\nif I know it's the same hamburger,\nI'm going to go with the $1 one, right?\n\n140\n00:08:28,550 --> 00:08:29,660\nSo that's how routes are.\n\n141\n00:08:29,660 --> 00:08:32,120\nIt knows it's the same route,\nsame destination, but\n\n142\n00:08:32,120 --> 00:08:35,630\nif it can get there for 1, as opposed\nto 65, that's going to be better.\n\n143\n00:08:35,630 --> 00:08:37,740\nThe lower cost wins, right?\n\n144\n00:08:37,740 --> 00:08:41,950\nSo you can see here, as the line gets\nsmaller, as we drop to 1.5 megabit,\n\n145\n00:08:41,950 --> 00:08:48,010\nif we drop to 56K that cost is\ngetting higher and higher each time.\n\n146\n00:08:48,010 --> 00:08:48,700\nRight?\n\n147\n00:08:48,700 --> 00:08:52,650\nNow, you might ask yourself,\nwhy not just use the bandwidth numbers?\n\n148\n00:08:52,650 --> 00:08:55,140\nWhy do this crazy formula?\n\n149\n00:08:55,140 --> 00:08:59,270\nAnd the reason they do the formula is\nsimply to make the number smaller, right?\n\n150\n00:08:59,270 --> 00:09:03,210\nThese numbers have to be stored in\npackets being sent on the network.\n\n151\n00:09:03,210 --> 00:09:05,530\nAnd so the less bytes they take\nup the more efficient it is.\n\n152\n00:09:05,530 --> 00:09:08,060\nSo that's all it's doing is really\njust making the number smaller.\n\n153\n00:09:08,060 --> 00:09:11,910\n100 million becomes 1.\n\n154\n00:09:11,910 --> 00:09:15,470\nOr here that 56,000 becomes just 1,000.\n\n155\n00:09:15,470 --> 00:09:19,050\nIt's just making those numbers smaller\nto be a little bit more manageable.\n\n156\n00:09:19,050 --> 00:09:23,020\nBecause OSPF doesn't just track\nthe bandwidth of one line,\n\n157\n00:09:23,020 --> 00:09:25,360\nit's gotta do an aggregate bandwidth.\n\n158\n00:09:25,360 --> 00:09:28,340\nThat means it's gotta add these together,\nright?\n\n159\n00:09:28,340 --> 00:09:29,930\nThis 1.544 megabit line here.\n\n160\n00:09:29,930 --> 00:09:32,690\nLet me get rid of all my garbage.\n\n161\n00:09:32,690 --> 00:09:39,663\nMight look really attractive to OSPF, but\nif we combine that with the 56k line here,\n\n162\n00:09:39,663 --> 00:09:43,520\nright, so that would be basically\n>> 65 plus 1,786.\n\n163\n00:09:43,520 --> 00:09:47,850\n>> Yeah, so\nwe'd end up with 1,800 and something.\n\n164\n00:09:47,850 --> 00:09:51,620\nSo that way it's able to recognize\nright off, that's a really high line,\n\n165\n00:09:51,620 --> 00:09:53,300\na really bad line line to use,\n\n166\n00:09:53,300 --> 00:09:56,990\nwe'd be much better off with just\nthe plain old 65 across the bottom.\n\n167\n00:09:56,990 --> 00:09:57,490\n>> Right.\n\n168\n00:09:59,210 --> 00:10:00,100\n>> So that's how, oh go ahead.\n\n169\n00:10:00,100 --> 00:10:00,735\n>> Go.\n>> So\n\n170\n00:10:00,735 --> 00:10:02,870\nthat's how our OSPF\nmetrics are calculated,\n\n171\n00:10:02,870 --> 00:10:07,141\nthis formula that goes on in the\nbackground and you can't manipulate, well,\n\n172\n00:10:07,141 --> 00:10:09,620\nyou can manipulate the formula,\nthere's ways to do it but\n\n173\n00:10:09,620 --> 00:10:13,420\nyou really, really shouldn't manipulate\nthe formula in your environment.\n\n174\n00:10:13,420 --> 00:10:15,700\nThe reason is that if\nyou change this formula,\n\n175\n00:10:15,700 --> 00:10:17,847\nyou need to change it\non all of your devices.\n\n176\n00:10:17,847 --> 00:10:18,356\n>> Everything.\n>> Right?\n\n177\n00:10:18,356 --> 00:10:19,568\nYou don't want to just change it on one\n\n178\n00:10:19,568 --> 00:10:22,690\ndevice cuz it can result in some\nrandom loops getting created.\n\n179\n00:10:22,690 --> 00:10:24,320\nBut you can change it on all of them.\n\n180\n00:10:24,320 --> 00:10:25,170\nIt's not a good idea.\n\n181\n00:10:25,170 --> 00:10:28,840\nInstead you can override the cost\nwherever you want, and that's better.\n\n182\n00:10:28,840 --> 00:10:32,950\nYou can override the cost of a single port\nand that'll make it where it's more or\n\n183\n00:10:32,950 --> 00:10:35,930\nless efficient based on what\nyou're trying to achieve.\n\n184\n00:10:35,930 --> 00:10:41,130\n>> Now, besides this, on the cost and\nthat determination, for us to set up OSPF,\n\n185\n00:10:41,130 --> 00:10:46,670\nit also means that we have to actually\nallow the routers to learn OSPF.\n\n186\n00:10:46,670 --> 00:10:50,790\nBut there's a couple of different things\nthat those routers also have to know about\n\n187\n00:10:50,790 --> 00:10:54,170\neach other before they'll be able to learn\nroutes from each other as well, and so\n\n188\n00:10:54,170 --> 00:10:56,770\nwe're gonna take a look at\nthe configuration in just a moment.\n\n189\n00:10:56,770 --> 00:10:58,320\n>> Yeah, so the routers.\n\n190\n00:10:58,320 --> 00:10:59,390\nWe're on OSPF.\n\n191\n00:10:59,390 --> 00:11:01,150\nIt's a dynamic routing protocol, so\n\n192\n00:11:01,150 --> 00:11:03,910\nthe routers need to talk to each\nother to exchange information, right?\n\n193\n00:11:03,910 --> 00:11:05,110\nThat's the whole point of this.\n\n194\n00:11:05,110 --> 00:11:07,520\n>> Right.\n>> Well, when they talk\n\n195\n00:11:07,520 --> 00:11:12,500\nin OSPF we use what are called LSAs or\nLink State Announcements.\n\n196\n00:11:12,500 --> 00:11:17,310\nAnd the most common LSA is LSA Type\n1 which is a hello packet, right?\n\n197\n00:11:17,310 --> 00:11:19,240\nThe router starts sending\nout hello announcements\n\n198\n00:11:19,240 --> 00:11:20,200\njust to say that they're there.\n\n199\n00:11:20,200 --> 00:11:20,960\nThey say, hey.\n\n200\n00:11:20,960 --> 00:11:22,430\nI'm a router, I'm running OSPF.\n\n201\n00:11:22,430 --> 00:11:23,770\nI'm here.\n\n202\n00:11:23,770 --> 00:11:24,810\nWho's out there?\n\n203\n00:11:24,810 --> 00:11:25,500\nAll right?\n\n204\n00:11:25,500 --> 00:11:27,770\nAnd the other routers will hear that and\n\n205\n00:11:27,770 --> 00:11:29,960\nthey will build up what's\ncalled an adjacency.\n\n206\n00:11:29,960 --> 00:11:34,000\nAn adjacency is two routers\nrunning OSPF that are properly\n\n207\n00:11:34,000 --> 00:11:37,634\nconfigured to communicate\ntogether to each other.\n\n208\n00:11:37,634 --> 00:11:38,740\n>> Yeah.\n>> All right?\n\n209\n00:11:38,740 --> 00:11:42,487\nSo let's take a look at the basic\nconfiguration that it would take to get\n\n210\n00:11:42,487 --> 00:11:45,484\nthose in place,\nto get those messages communicating and\n\n211\n00:11:45,484 --> 00:11:48,370\nget to your routers talking\nto each other happy style.\n\n212\n00:11:48,370 --> 00:11:51,980\n>> You know,\nwhen we start talking about OSPF here and\n\n213\n00:11:51,980 --> 00:11:53,852\nthose adjacencies,\nthey aren't just gonna turn, I say that,\n\n214\n00:11:53,852 --> 00:11:57,000\nthey're gonna turn on but\nthey have to actually match in\n\n215\n00:11:57,000 --> 00:12:00,400\nfour different categories if I\nremember correctly is what we have.\n\n216\n00:12:00,400 --> 00:12:03,770\nWe have to have the same area number.\n\n217\n00:12:03,770 --> 00:12:07,910\nWe have to have the same hello and\ndead timers.\n\n218\n00:12:09,830 --> 00:12:12,940\nThere's\n>> There's some advanced things that we\n\n219\n00:12:12,940 --> 00:12:13,660\nhaven't talked about yet.\n\n220\n00:12:13,660 --> 00:12:15,860\nSo that could be your stub\narea that has to be the same.\n\n221\n00:12:15,860 --> 00:12:16,400\nThere's a few other things.\n\n222\n00:12:16,400 --> 00:12:17,260\n>> Authentication.\n\n223\n00:12:17,260 --> 00:12:19,220\nThose are pretty much the four, yeah.\n\n224\n00:12:19,220 --> 00:12:24,400\n>> So, the key ones though is that in\nOSPF, we saw this in the CCENT show.\n\n225\n00:12:24,400 --> 00:12:27,620\nYou have areas,\nyou divide your network up into areas.\n\n226\n00:12:27,620 --> 00:12:30,200\nOr if you don't,\nyou just have one big area.\n\n227\n00:12:30,200 --> 00:12:33,930\nAnd so when you assign OSPF to a router,\nyou have to specify an area number.\n\n228\n00:12:33,930 --> 00:12:37,150\nAnd you will only build\nadjacencies with other areas, or\n\n229\n00:12:37,150 --> 00:12:40,420\nother routers in the same area as you,\nright.\n\n230\n00:12:40,420 --> 00:12:43,520\nSo that's the first thing we need to be\naware of, is when we go to configure OSPF,\n\n231\n00:12:43,520 --> 00:12:47,610\nif we pick the wrong area number,\nwe are not gonna build an adjacency,\n\n232\n00:12:47,610 --> 00:12:48,860\nthings are not gonna be happy.\n\n233\n00:12:48,860 --> 00:12:49,570\nAll right.\n\n234\n00:12:49,570 --> 00:12:53,560\nThe other things that Ronnie was\nmentioning, we'll get to those later.\n\n235\n00:12:53,560 --> 00:12:54,980\nJust cuz they're more advanced.\n\n236\n00:12:54,980 --> 00:12:56,400\nThings like authentication and stuff,\n\n237\n00:12:56,400 --> 00:13:01,120\nso let's just start with\nbasic OSPF configuration.\n\n238\n00:13:01,120 --> 00:13:05,930\nSo Ronnie, I'm gonna pull up\none of the switches here,\n\n239\n00:13:05,930 --> 00:13:09,060\nand let me make sure I'm sharing\nmy desktop, there we go.\n\n240\n00:13:09,060 --> 00:13:10,790\nAll right, so\nI'm gonna pull up one of the switches,\n\n241\n00:13:10,790 --> 00:13:13,300\nwhy don't you pull up\nthe router on your side.\n\n242\n00:13:13,300 --> 00:13:16,640\nAnd we'll kinda build\nan OSPF adjacency here.\n\n243\n00:13:16,640 --> 00:13:19,060\nLet me show you guys a diagram\nof what we're about to do.\n\n244\n00:13:19,060 --> 00:13:23,740\nSo behind us here, we have some equipment,\nand it doesn't show up on camera, but\n\n245\n00:13:23,740 --> 00:13:25,270\nit is right here behind us.\n\n246\n00:13:25,270 --> 00:13:28,160\nSo Ronnie is connected to a router,\nrouter 1.\n\n247\n00:13:28,160 --> 00:13:32,710\nAnd it's got a Gigabit ethernet port\nthat's connected up to my switch,\n\n248\n00:13:32,710 --> 00:13:33,290\nswitch 2.\n\n249\n00:13:33,290 --> 00:13:37,480\nAnd switch 2 is a layer 3 switch so\nit can do routing as well as switching.\n\n250\n00:13:37,480 --> 00:13:39,440\nHis router just does the routing.\n\n251\n00:13:39,440 --> 00:13:42,310\nSo, these two are connected\nvia a single link and\n\n252\n00:13:42,310 --> 00:13:46,110\nwhat I wanna do is I wanna configure\nOSPF so these two guys will talk.\n\n253\n00:13:46,110 --> 00:13:48,970\nRonnie's router knows about\ntwo different networks, right?\n\n254\n00:13:48,970 --> 00:13:50,280\nThe network here on GI0/1 and\n\n255\n00:13:50,280 --> 00:13:54,920\nthen it's plugged in to another network\nover here that's not on my diagram.\n\n256\n00:13:54,920 --> 00:13:56,810\nI guess I could add it real quick.\n\n257\n00:13:58,390 --> 00:13:59,700\nLet me just throw it on here.\n\n258\n00:13:59,700 --> 00:14:04,850\nSo it knows about one other\nnetwork that's off here that's\n\n259\n00:14:06,180 --> 00:14:11,110\napparently gonna be red [LAUGH] and\nit is the 10.1.230.0/24 network.\n\n260\n00:14:11,110 --> 00:14:15,550\nThat router is what, .15 I think?\n\n261\n00:14:15,550 --> 00:14:19,740\nAnd so it knows about that one and\nthat is on it's GI0/0 interface.\n\n262\n00:14:19,740 --> 00:14:27,000\nSo let me just move that over there.\n\n263\n00:14:27,000 --> 00:14:27,920\nAll right.\n\n264\n00:14:27,920 --> 00:14:30,450\nSo his router knows about\nthose two networks.\n\n265\n00:14:30,450 --> 00:14:35,400\nMy switch, on the other hand knows\nabout the 192.168.0 network,\n\n266\n00:14:35,400 --> 00:14:37,520\nit also knows about the 192.168.1 network.\n\n267\n00:14:37,520 --> 00:14:42,950\nNow, his router's not plugged into that so\nhe doesn't know about it.\n\n268\n00:14:42,950 --> 00:14:47,532\nMy switch is not plugged into 10.1.230 so\nI don't know about it.\n\n269\n00:14:47,532 --> 00:14:49,810\nAll right?\nSo if we want to get connected up and\n\n270\n00:14:49,810 --> 00:14:53,520\nexchange information,\nwe're going to need to configure OSPF.\n\n271\n00:14:53,520 --> 00:14:56,102\nAnd put ourselves in the same area.\n\n272\n00:14:56,102 --> 00:14:57,460\nAll right.\n\n273\n00:14:57,460 --> 00:14:58,540\nSo let's do that Ronnie.\n\n274\n00:14:58,540 --> 00:15:00,890\nI am going to jump over to my switch.\n\n275\n00:15:00,890 --> 00:15:04,140\nAnd I'll jump into configuration.\n\n276\n00:15:04,140 --> 00:15:07,590\nAnd the first thing I need to do is I\nneed to tell the switch to run OSPF.\n\n277\n00:15:07,590 --> 00:15:09,060\nAnd that command is very simple.\n\n278\n00:15:09,060 --> 00:15:15,070\nWe say router, OSPF followed by\n>> A process ID number.\n\n279\n00:15:15,070 --> 00:15:16,060\n>> Exactly.\n\n280\n00:15:16,060 --> 00:15:20,653\nYou can run more than one copy of\nOSPF if you want, that's different.\n\n281\n00:15:20,653 --> 00:15:25,320\n[LAUGH] Did I get,\nI got disconnected dadgummit.\n\n282\n00:15:25,320 --> 00:15:26,680\nAnd my Putty is crashing.\n\n283\n00:15:26,680 --> 00:15:29,640\nSo anyhow, if you wanna run OSPF,\nfirst off,\n\n284\n00:15:29,640 --> 00:15:32,540\nyou get a terminal client\nthat doesn't crash on you.\n\n285\n00:15:32,540 --> 00:15:34,070\n>> We can go over here.\n\n286\n00:15:34,070 --> 00:15:34,650\nJason do you have?\n\n287\n00:15:36,740 --> 00:15:39,819\nMine's gonna look a little bit strange,\nthere we go.\n\n288\n00:15:39,819 --> 00:15:44,200\nYeah so on mine we have it right here\nwhere we're about to configure OSPF.\n\n289\n00:15:46,550 --> 00:15:49,490\nWell nope never mind apparently we've\n>> Did you crash yours?\n\n290\n00:15:49,490 --> 00:15:50,700\nLook at that.\n\n291\n00:15:50,700 --> 00:15:51,658\nThat's why we can't have\nnice things Ronnie.\n\n292\n00:15:51,658 --> 00:15:52,483\n>> No, never mind.\n\n293\n00:15:52,483 --> 00:15:53,040\nOkay.\n\n294\n00:15:53,040 --> 00:15:54,068\n>> Because you break everything.\n>> [LAUGH]\n\n295\n00:15:54,068 --> 00:15:54,911\n>> All right I'm getting back into mine.\n\n296\n00:15:54,911 --> 00:15:56,972\nGuys we can flip back to mine.\n\n297\n00:15:56,972 --> 00:16:00,218\nSo basically,\nwhat we can do is we configure OSPF.\n\n298\n00:16:00,218 --> 00:16:04,640\nNow we have to specify a process ID,\nand that process ID is kinda tricky.\n\n299\n00:16:04,640 --> 00:16:05,140\nRight?\n>> Yeah.\n\n300\n00:16:05,140 --> 00:16:06,900\n>> You know, I'm leaving something out.\n\n301\n00:16:06,900 --> 00:16:12,410\nI'm on a switch, and a layer 3 switch\nis a switch that can be a router also.\n\n302\n00:16:12,410 --> 00:16:14,170\nBut, it's not turned on by default.\n\n303\n00:16:14,170 --> 00:16:15,160\nSo I need to turn that on.\n\n304\n00:16:15,160 --> 00:16:16,450\nSo I'm gonna do IP routing.\n\n305\n00:16:16,450 --> 00:16:19,932\nThat's going to enable my switch\nto do some basic routing.\n\n306\n00:16:19,932 --> 00:16:20,520\nAll right.\nSo\n\n307\n00:16:20,520 --> 00:16:22,680\nthen what I'm gonna do is I'm\ngonna say router OSPF and\n\n308\n00:16:22,680 --> 00:16:24,420\nthen I need to specify a process ID.\n\n309\n00:16:25,590 --> 00:16:28,540\nIf you're an Internet service provider\nthere may be times where you need\n\n310\n00:16:28,540 --> 00:16:31,890\nto run more than one copy\nof OSPF on the same router.\n\n311\n00:16:31,890 --> 00:16:33,880\nThe process ID lets you do that.\n\n312\n00:16:33,880 --> 00:16:38,860\nYou could actually run 65,535 separate\ncopies of OSPF on a single router.\n\n313\n00:16:38,860 --> 00:16:39,920\nYou'd be crazy to do it, right?\n\n314\n00:16:39,920 --> 00:16:42,280\n>> Right.\n>> Most people never need more than two.\n\n315\n00:16:42,280 --> 00:16:44,670\nSo we do need to specify a process ID.\n\n316\n00:16:44,670 --> 00:16:47,920\nIt's locally unique, so\nit's only unique to this device.\n\n317\n00:16:47,920 --> 00:16:49,890\nIt doesn't have to match between systems.\n\n318\n00:16:49,890 --> 00:16:53,690\nBut we almost always do make it match\nbecause otherwise you forget what it is.\n\n319\n00:16:53,690 --> 00:16:54,920\n>> Yeah.\n>> It's a pain in the butt.\n\n320\n00:16:54,920 --> 00:16:59,120\nSo this is just a process\nID that identifies\n\n321\n00:16:59,120 --> 00:17:02,480\nOSPF running on this particular router.\n\n322\n00:17:02,480 --> 00:17:03,750\nMost of us never worry about it.\n\n323\n00:17:03,750 --> 00:17:06,770\nSo we pick a number like, I'll pick 100.\n\n324\n00:17:06,770 --> 00:17:08,784\nRight, so I'm gonna say router OSPF 100.\n\n325\n00:17:10,960 --> 00:17:11,960\nAll right.\n\n326\n00:17:11,960 --> 00:17:13,880\nNow the important stuff.\n\n327\n00:17:13,880 --> 00:17:17,370\nNow I need to tell it what\nnetworks I want to advertise, and\n\n328\n00:17:17,370 --> 00:17:21,080\nthe network that Ronnie's router and\n\n329\n00:17:21,080 --> 00:17:25,850\nthis switch share is\nthe 192.168.0.0 network.\n\n330\n00:17:25,850 --> 00:17:28,460\nAnd it's a class C network, or a /24.\n\n331\n00:17:28,460 --> 00:17:32,100\nThat means the first 24 bits\nare part of the network ID and\n\n332\n00:17:32,100 --> 00:17:34,520\nthe last 8 bits are part of the host ID.\n\n333\n00:17:34,520 --> 00:17:40,730\nNow, with OSPF, when you advertise a\nnetwork, you have to use a wild card mask.\n\n334\n00:17:40,730 --> 00:17:44,930\nAnd if you've never seen wild card masks,\njump back over to that CCENT show,\n\n335\n00:17:44,930 --> 00:17:46,440\nwe cover it in depth there.\n\n336\n00:17:46,440 --> 00:17:49,750\nBut wild card masks,\nwe use them with ACLs and\n\n337\n00:17:49,750 --> 00:17:54,070\nother stuff, and\nit looks like a subnet mask, in a way.\n\n338\n00:17:54,070 --> 00:17:58,130\nBasically every bit that has to match,\nwe flag with a zero, and\n\n339\n00:17:58,130 --> 00:18:01,130\nevery bit that doesn't have to match,\nwe flag with a one.\n\n340\n00:18:01,130 --> 00:18:06,920\nIn this case I wanna say that\nthe first three octets have to match.\n\n341\n00:18:06,920 --> 00:18:10,530\nSo I'm gonna say 0.0.0.255.\n\n342\n00:18:10,530 --> 00:18:12,470\nWhich says turn on OSPF for\n\n343\n00:18:12,470 --> 00:18:17,937\nany interface with an IP address\nthat starts with 192.168.0 and\n\n344\n00:18:17,937 --> 00:18:23,946\nthen I need to specify the area that\nit's gonna be in, and let's do area 999.\n\n345\n00:18:27,573 --> 00:18:30,990\nNow, the area number itself\ncan actually be quite large.\n\n346\n00:18:30,990 --> 00:18:33,270\nYou'll see that it's a 32 bit number.\n\n347\n00:18:33,270 --> 00:18:36,250\nSo, we can go as high as 4.3 billion,\nroughly.\n\n348\n00:18:36,250 --> 00:18:39,310\nSo you can pick from a ton of\narea numbers that are out there.\n\n349\n00:18:39,310 --> 00:18:42,220\nThe area is actually\nstored as a 32 bit number,\n\n350\n00:18:42,220 --> 00:18:45,860\nso it can be rendered like\nan IP address if you want to.\n\n351\n00:18:45,860 --> 00:18:47,810\nWe just rendered it as a decimal number.\n\n352\n00:18:47,810 --> 00:18:48,699\nIt doesn't really matter.\n\n353\n00:18:50,980 --> 00:18:54,530\nAll right, so now that that's up,\nwe've got OSPF up and\n\n354\n00:18:54,530 --> 00:18:58,750\nrunning and I've probably already formed\nan adjacency with your router Ronnie.\n\n355\n00:18:58,750 --> 00:19:01,220\nLet's see if I have.\n\n356\n00:19:01,220 --> 00:19:05,480\nI'm gonna use the show\nIP OSPF neighbor command.\n\n357\n00:19:05,480 --> 00:19:07,390\nAnd that'll show me\nanybody that's out there,\n\n358\n00:19:07,390 --> 00:19:12,850\nand I can see Ronnie's\nrouter starting to build up.\n\n359\n00:19:12,850 --> 00:19:14,450\nNow, I say starting to build up,\nhow do I know that?\n\n360\n00:19:14,450 --> 00:19:18,670\nWell, right here I can see\nthat I got a 2WAY/DROTHER.\n\n361\n00:19:18,670 --> 00:19:21,210\nSo let's talk a little bit\nabout those OSPF states.\n\n362\n00:19:22,760 --> 00:19:24,220\nAll right, when we look at the state,\n\n363\n00:19:24,220 --> 00:19:27,370\nthere's actually two pieces of\ninformation that are being given to us.\n\n364\n00:19:27,370 --> 00:19:32,162\nOne is just describing the connection\nbetween me and the neighbor.\n\n365\n00:19:32,162 --> 00:19:33,140\nAll right.\n\n366\n00:19:33,140 --> 00:19:37,232\nThe second one is describing\nthe status of that neighbor.\n\n367\n00:19:37,232 --> 00:19:38,060\nAll right.\n\n368\n00:19:38,060 --> 00:19:41,152\nSo the first is the connection,\nthe second part is the neighbor.\n\n369\n00:19:41,152 --> 00:19:42,060\nAll right.\n\n370\n00:19:42,060 --> 00:19:44,370\nSo the first part right now says 2WAY, and\n\n371\n00:19:44,370 --> 00:19:47,670\nyou're gonna see a couple of different\nthings that'll be displayed there and\n\n372\n00:19:47,670 --> 00:19:49,270\nin fact if I run it again\nit's probably different.\n\n373\n00:19:49,270 --> 00:19:50,210\nThere we go.\n\n374\n00:19:50,210 --> 00:19:54,050\nSo let's run over the different ones.\n\n375\n00:19:54,050 --> 00:19:59,580\nSo we've seen 2WAY and FULL.\n\n376\n00:19:59,580 --> 00:20:03,020\nYou'll also see, is it EXEC?\n\n377\n00:20:03,020 --> 00:20:04,480\n>> EXSTART I think.\n\n378\n00:20:04,480 --> 00:20:04,980\n>> Oh shoot.\n\n379\n00:20:08,330 --> 00:20:09,210\nEXSTART.\n\n380\n00:20:09,210 --> 00:20:10,540\nAnd, what's the other one?\n\n381\n00:20:10,540 --> 00:20:11,040\nThere's another one.\n\n382\n00:20:13,991 --> 00:20:16,510\nShoot, there's one other one.\n\n383\n00:20:16,510 --> 00:20:17,552\n>> Yeah.\n[LAUGH] Dadgummit,\n\n384\n00:20:17,552 --> 00:20:20,152\nlet me see if I can find it\non the Cisco site real quick.\n\n385\n00:20:25,617 --> 00:20:26,976\nProbably not.\nLet's see.\n\n386\n00:20:26,976 --> 00:20:28,172\nOSPF neighbor states.\n\n387\n00:20:28,172 --> 00:20:30,384\nThere we go.\n\n388\n00:20:30,384 --> 00:20:33,510\nExstart.\nExchange which is part of that.\n\n389\n00:20:33,510 --> 00:20:37,070\nInit is the one I was thinking of, and\nthey've got several others listed there.\n\n390\n00:20:37,070 --> 00:20:39,010\nSo let's add them all.\n\n391\n00:20:39,010 --> 00:20:41,330\nThese are the main ones right here.\n\n392\n00:20:41,330 --> 00:20:43,710\nINIT, EXSTART, 2WAY, FULL.\n\n393\n00:20:43,710 --> 00:20:46,700\nActually, EXSTART would happen after 2WAY,\nwouldn't it?\n\n394\n00:20:46,700 --> 00:20:47,330\n>> Yes.\n\n395\n00:20:47,330 --> 00:20:47,920\n>> There.\n\n396\n00:20:47,920 --> 00:20:51,030\nAll right, so\nlet me just summarize these four first and\n\n397\n00:20:51,030 --> 00:20:53,410\nthen I'll pull up that big\nlist with all of them.\n\n398\n00:20:53,410 --> 00:20:57,310\nINIT means you're initializing\na connection to another router.\n\n399\n00:20:57,310 --> 00:21:01,908\nYou've seen another router out there and\nyou're going to try and connect to it.\n\n400\n00:21:01,908 --> 00:21:02,956\nAll right?\n\n401\n00:21:02,956 --> 00:21:06,500\n2WAY means you've reached\nout to that router, and\n\n402\n00:21:06,500 --> 00:21:10,740\nthat router has acknowledged you so\nyou've got two-way communications.\n\n403\n00:21:10,740 --> 00:21:13,470\nNot only did you send something,\nbut you got a message back.\n\n404\n00:21:13,470 --> 00:21:16,505\nYou haven't actually exchanged any routes\nnow, you've just established the fact that\n\n405\n00:21:16,505 --> 00:21:18,680\nthere is another router out there and\nthey're able to talk.\n\n406\n00:21:20,980 --> 00:21:25,920\nAfter that is EXSTART, which is where\nwe start exchanging the routes.\n\n407\n00:21:25,920 --> 00:21:29,110\nI start handing routes off to them,\nthey start handing routes off to me,\n\n408\n00:21:29,110 --> 00:21:31,820\nwe actually start exchanging that route.\n\n409\n00:21:31,820 --> 00:21:33,810\nOnce I've received\neverything they have and\n\n410\n00:21:33,810 --> 00:21:38,110\nthey've received everything that we have,\nwe then have a FULL adjacency.\n\n411\n00:21:38,110 --> 00:21:40,300\nWe're up, we're happy,\nand we're communicating.\n\n412\n00:21:40,300 --> 00:21:43,940\n>> Yeah, the key to remember about\nthese particular states is simple.\n\n413\n00:21:43,940 --> 00:21:46,890\nIf we don't have full,\nwe're probably not gonna actually end up\n\n414\n00:21:46,890 --> 00:21:49,730\nbeing able to use OSPF\nbetween our neighbors here.\n\n415\n00:21:49,730 --> 00:21:53,230\nSo make sure on both sides they\nactually do have the word full up\n\n416\n00:21:53,230 --> 00:21:54,130\nwhen you see this.\n\n417\n00:21:54,130 --> 00:21:54,750\n>> Yeah.\n\n418\n00:21:54,750 --> 00:21:57,870\n>> So for example, if it's stuck\nin INIT that means you're sending\n\n419\n00:21:57,870 --> 00:22:00,020\nmessages to the other router but\nyou're not getting anything back.\n\n420\n00:22:00,020 --> 00:22:01,510\n>> Right.\n>> So maybe you have unidirectional\n\n421\n00:22:01,510 --> 00:22:04,780\ncommunications, maybe the other\nrouter isn't actually running OSPF.\n\n422\n00:22:04,780 --> 00:22:06,985\n>> Right.\n>> Or whatever, you can see that.\n\n423\n00:22:06,985 --> 00:22:09,735\nBut the other ones it usually\nflips by pretty quickly and\n\n424\n00:22:09,735 --> 00:22:11,275\nyou guys saw that here on my switch.\n\n425\n00:22:11,275 --> 00:22:14,115\nBy the time I ran the command\na second time it'd already gone from\n\n426\n00:22:14,115 --> 00:22:15,205\ntwo way to full.\n\n427\n00:22:15,205 --> 00:22:16,345\nI never even saw the other states.\n\n428\n00:22:16,345 --> 00:22:21,755\nIf I had sat here and rapidly rerun\nthe command we would have seen each one.\n\n429\n00:22:21,755 --> 00:22:24,487\nSo that's happening and\nI just pulled up the Cisco doc here.\n\n430\n00:22:24,487 --> 00:22:26,445\nLet me, I'll add this link to my notes.\n\n431\n00:22:28,915 --> 00:22:33,350\nSo these are OSPF Connection States.\n\n432\n00:22:34,980 --> 00:22:37,380\nAnd I'll just say like read\nmore on Cisco.com here.\n\n433\n00:22:37,380 --> 00:22:42,060\nFor those of you that really\nwant to go crazy with it.\n\n434\n00:22:42,060 --> 00:22:45,380\nBut you'll see that there's like down,\nwhere we're not connected.\n\n435\n00:22:45,380 --> 00:22:49,090\nThere's attempt where it's\nattempting to initiate a connection.\n\n436\n00:22:49,090 --> 00:22:54,080\n2-way, Exstart, Exchange,\nwhere it's actively exchanging the routes.\n\n437\n00:22:54,080 --> 00:22:57,040\nLoading, where it's loading\nthe routes into the routing table.\n\n438\n00:22:57,040 --> 00:22:59,000\nAnd Full when everything is happy.\n\n439\n00:22:59,000 --> 00:23:02,430\nRight?\nSo to most of these it flips by in a split\n\n440\n00:23:02,430 --> 00:23:04,110\nsecond and we don't really see it.\n\n441\n00:23:04,110 --> 00:23:05,710\nThe ones that I listed over here,\n\n442\n00:23:05,710 --> 00:23:09,480\nthese are the ones that we really see\nbecause they take a little bit longer.\n\n443\n00:23:09,480 --> 00:23:09,980\n>> Yeah.\n\n444\n00:23:12,012 --> 00:23:12,790\n>> All right,\n\n445\n00:23:12,790 --> 00:23:17,100\nso once we become full, now we're able\nto exchange routes with the other side.\n\n446\n00:23:17,100 --> 00:23:21,210\nAnd, when I see that I've got\nthis full note with Ronnie's,\n\n447\n00:23:21,210 --> 00:23:23,900\nwell that means that he and\nI are exchanging routes.\n\n448\n00:23:23,900 --> 00:23:25,830\nRight?\nOr at least should be.\n\n449\n00:23:25,830 --> 00:23:28,145\nI guess we can see, right,\nif I take a look at my routing table.\n\n450\n00:23:30,180 --> 00:23:35,490\nWell, I don't see any OSPF routes\nhere in the routing table.\n\n451\n00:23:35,490 --> 00:23:38,740\nSo, if it's full and we're exchanging\nroutes, why don't I see that?\n\n452\n00:23:38,740 --> 00:23:40,710\nSo, what am I missing here?\n\n453\n00:23:40,710 --> 00:23:43,910\n>> On the other side is the other\nconnection which I have not yet\n\n454\n00:23:43,910 --> 00:23:48,269\ntyped in which is our 10.1.230 network.\n\n455\n00:23:48,269 --> 00:23:50,130\n>> Yep.\nWhen we configured OSPF we were very\n\n456\n00:23:50,130 --> 00:23:50,790\nspecific.\n\n457\n00:23:50,790 --> 00:23:53,918\nWe only listed the 192.168.0 network.\n\n458\n00:23:53,918 --> 00:23:57,443\nRonnie is connected to\nthis 10.1.230 network, but\n\n459\n00:23:57,443 --> 00:23:59,455\nhe's not telling me about it yet.\n\n460\n00:23:59,455 --> 00:24:00,488\nSo he's gonna add that.\n\n461\n00:24:00,488 --> 00:24:02,143\nHe's adding it right\nnow in the background.\n\n462\n00:24:02,143 --> 00:24:06,397\nThe reverse is also true I'm connected\nto the 192.168.1 network but\n\n463\n00:24:06,397 --> 00:24:09,410\nI'm not telling him about that yet either.\n\n464\n00:24:09,410 --> 00:24:13,200\nSo I need to go into my configuration,\nand I need to add.\n\n465\n00:24:13,200 --> 00:24:14,618\nAdd this other network.\n\n466\n00:24:14,618 --> 00:24:18,700\nSo I'm gonna add that one in here so\nthat I advertise it also.\n\n467\n00:24:18,700 --> 00:24:20,080\nOkay.\n\n468\n00:24:20,080 --> 00:24:22,880\nRonnie, you'll need to make\nthat a passive interface or\n\n469\n00:24:22,880 --> 00:24:25,600\nit's going to interfere with the studio.\n\n470\n00:24:25,600 --> 00:24:27,184\nLet's switch over to\nRonnie's screen real quick,\n\n471\n00:24:27,184 --> 00:24:28,416\nRonnie's getting some error message.\n\n472\n00:24:28,416 --> 00:24:29,472\n>> I don't think mine.\n\n473\n00:24:29,472 --> 00:24:30,389\n>> Oh, you dropped off.\n>> Yeah.\n\n474\n00:24:30,389 --> 00:24:33,169\nOh shoot, okay, all right,\nwell, you know what,\n\n475\n00:24:33,169 --> 00:24:35,650\nactually I can probably\nsee it here on mine,.\n\n476\n00:24:40,170 --> 00:24:42,400\nHere we go, let's just give it a second,\nit's it's gonna think,\n\n477\n00:24:42,400 --> 00:24:46,772\nI should be able to see,\nwell, oh there it goes.\n\n478\n00:24:46,772 --> 00:24:48,340\nAll right, so yeah,\nI've got it on mine now.\n\n479\n00:24:48,340 --> 00:24:51,310\nSo Ronnie started configuring OSPF and\nhe started getting some messages here,\n\n480\n00:24:51,310 --> 00:24:52,320\nwhat the heck's going on here right?\n\n481\n00:24:52,320 --> 00:24:55,300\nWell it says, invalid packet mismatch\n\n482\n00:24:55,300 --> 00:24:58,620\nerror ID from backbone virtual\nlink not found blah blah blah.\n\n483\n00:24:58,620 --> 00:24:59,850\nWhat is going on here?\n\n484\n00:24:59,850 --> 00:25:03,970\nWell, that connection on Ronnie's router,\nI'm glad this happened.\n\n485\n00:25:03,970 --> 00:25:08,770\nOn router one, that connection to 10 1\n230, that's our studio network, right.\n\n486\n00:25:08,770 --> 00:25:11,150\nAnd our studio network actually uses OSPF.\n\n487\n00:25:11,150 --> 00:25:13,670\nWe actually use OSPF on\nour production network.\n\n488\n00:25:13,670 --> 00:25:16,410\nRonny's activated OSPF on his lab router.\n\n489\n00:25:16,410 --> 00:25:17,940\nIn area 999.\n\n490\n00:25:17,940 --> 00:25:21,965\nBut in our building we use area 0.\n\n491\n00:25:21,965 --> 00:25:25,495\nSo it's conflicting, it doesn't match.\n\n492\n00:25:25,495 --> 00:25:26,725\nHis area is area 999.\n\n493\n00:25:26,725 --> 00:25:30,185\nThe area of the studio router is area 0.\n\n494\n00:25:30,185 --> 00:25:33,885\nIt's conflicting and it's getting that\nerror, and that error is gonna continue to\n\n495\n00:25:33,885 --> 00:25:38,923\nappear every time we send out a hello\npacket, which is every ten seconds, right?\n\n496\n00:25:38,923 --> 00:25:42,025\nSo every ten seconds, this is popping up,\nand we're getting it over and\n\n497\n00:25:42,025 --> 00:25:43,480\nover again so I can see.\n\n498\n00:25:43,480 --> 00:25:50,150\nAt 2158, 58 or 58 is the seconds, and\nthen 08, and then 17 and then 27.\n\n499\n00:25:50,150 --> 00:25:52,950\nIt is roughly every ten seconds right.\n\n500\n00:25:52,950 --> 00:25:56,090\nSo it's gonna continue doing that\nbecause those areas don't match.\n\n501\n00:25:56,090 --> 00:25:59,680\nSo just like Ronnie said, those have to\nmatch or we don't build an adjacency.\n\n502\n00:25:59,680 --> 00:26:03,980\nAnd if we do like a show IP OSPF neighbor.\n\n503\n00:26:03,980 --> 00:26:08,770\nYou'll see that he's got the adjacency\nwith me, but the adjacency with the studio\n\n504\n00:26:08,770 --> 00:26:13,290\nrouter's not even in the list,\nbecause the things don't match, broken.\n\n505\n00:26:13,290 --> 00:26:17,370\nSo what I was telling Ronnie was hey,\nif we make that a passive interface.\n\n506\n00:26:17,370 --> 00:26:21,010\nIf we get into router OSPF, did we do one?\n\n507\n00:26:21,010 --> 00:26:22,860\nWhat process ID.\n\n508\n00:26:22,860 --> 00:26:24,390\nWe did 100 there we go.\n\n509\n00:26:24,390 --> 00:26:25,930\nSee, now there's that process ID.\n\n510\n00:26:25,930 --> 00:26:27,920\nIt doesn't matter what you pick, but\n\n511\n00:26:27,920 --> 00:26:31,490\nyou gotta remember it to get back into\nyour configuration so pick something easy.\n\n512\n00:26:31,490 --> 00:26:33,080\nSo I had forgotten.\n\n513\n00:26:33,080 --> 00:26:36,410\nI, in real life land,\nI almost always do OSPF one.\n\n514\n00:26:36,410 --> 00:26:37,610\nIt's easy to remember number one.\n\n515\n00:26:38,880 --> 00:26:45,700\nSo what you can do is you can say passive\ndash interface gi zero slash zero right?\n\n516\n00:26:45,700 --> 00:26:50,100\nWhat that's gonna do is it's gonna tell\nit to take this interface right here, and\n\n517\n00:26:50,100 --> 00:26:52,720\ngo ahead and advertise it in OSPF.\n\n518\n00:26:52,720 --> 00:26:56,750\nThis way, but\ndon't advertise that interface itself.\n\n519\n00:26:56,750 --> 00:26:59,730\nSo, it allows us to advertise\nthat network exists without\n\n520\n00:26:59,730 --> 00:27:01,770\nactually trying to build\na connection over there.\n\n521\n00:27:01,770 --> 00:27:03,032\nSo, I'll go ahead and run that.\n\n522\n00:27:03,032 --> 00:27:07,925\nAnd that's gonna make it as passive,\nI might still get another message as\n\n523\n00:27:07,925 --> 00:27:11,635\nthe other neighbor tries to connect to me,\nbut it should stop.\n\n524\n00:27:11,635 --> 00:27:15,390\nActually, it's been more than ten seconds\nnow I think I've blathered on long enough.\n\n525\n00:27:15,390 --> 00:27:17,229\nIt should be happy there.\n\n526\n00:27:19,490 --> 00:27:20,720\nAll right, cool.\n\n527\n00:27:20,720 --> 00:27:23,000\nSo now it's gonna stop spamming\nus with that information.\n\n528\n00:27:23,000 --> 00:27:28,460\nBut, if I go back to my switch, here we\n\n529\n00:27:30,070 --> 00:27:34,150\ngo, now I should be getting an OSPF route,\nand I'm not.\n\n530\n00:27:35,370 --> 00:27:37,125\nNow I'm just being impatient I guess?\n\n531\n00:27:37,125 --> 00:27:38,930\nCuz it's showing up on mine.\n\n532\n00:27:40,450 --> 00:27:41,490\nWell doggone it Ronnie.\n\n533\n00:27:42,740 --> 00:27:44,800\nLet's see,\nwhy am I not getting that route?\n\n534\n00:27:44,800 --> 00:27:46,370\nSo you're getting the route\nthat I'm advertising to.\n\n535\n00:27:46,370 --> 00:27:47,120\n>> Yeah.\n\n536\n00:27:47,120 --> 00:27:48,572\n>> Well that is lame.\n\n537\n00:27:48,572 --> 00:27:51,860\nAll right, so looking at Ronnie's\nrouter if I do a show IP route.\n\n538\n00:27:51,860 --> 00:27:54,100\nThere we go, he's got that OSPF route for\n\n539\n00:27:54,100 --> 00:27:57,240\n192 168 1.0,\nthat's what I was advertising out to him.\n\n540\n00:27:57,240 --> 00:27:57,980\nWhoops.\n\n541\n00:27:57,980 --> 00:28:00,470\nAnd so, he is getting it, he's learning.\n\n542\n00:28:00,470 --> 00:28:02,360\nSo I know that we're\nable to exchange routes,\n\n543\n00:28:02,360 --> 00:28:07,590\nbut I'm not seeing that route of his, so\nI'm kinda curious what's going on there.\n\n544\n00:28:07,590 --> 00:28:11,690\nLet me take a look at OSPF, so\n\n545\n00:28:11,690 --> 00:28:16,585\nyou didn't, we did network 10.1.230000255\narea 999 that is correct no type o's.\n\n546\n00:28:16,585 --> 00:28:22,915\nWhen I troubleshoot these things it's\nalmost always type o's that I go for\n\n547\n00:28:22,915 --> 00:28:27,370\nand then we flag that as a passive\ninterface GI0/0, which is,\n\n548\n00:28:27,370 --> 00:28:30,600\nlet me go back to my network diagram,\nthat is this connection, this passive.\n\n549\n00:28:30,600 --> 00:28:32,540\nNot this one over here.\n\n550\n00:28:32,540 --> 00:28:35,160\nSo we should be advertising\nthat to switch--oh.\n\n551\n00:28:35,160 --> 00:28:36,348\nI know what the problem is.\n\n552\n00:28:36,348 --> 00:28:44,060\nOn switch two I think I have\nan interface in that network.\n\n553\n00:28:44,060 --> 00:28:45,140\nI do.\n\n554\n00:28:45,140 --> 00:28:49,960\nSo I've got a VLAN interface,\nthat is in that same network.\n\n555\n00:28:49,960 --> 00:28:52,690\nAnd so, if I look at my routing table,\n\n556\n00:28:52,690 --> 00:28:56,918\nI've got that 10.1.230 network in here but\nit's directly connected.\n\n557\n00:28:56,918 --> 00:29:00,144\nAnd it's gonna have an administrative\ndistance of zero [CROSSTALK] versus\n\n558\n00:29:00,144 --> 00:29:02,547\nan administrative distance for\nOSPF which is 110.\n\n559\n00:29:02,547 --> 00:29:04,050\nWe're going to prefer it.\n\n560\n00:29:04,050 --> 00:29:05,120\nIf I can get rid of that, though,\n\n561\n00:29:14,000 --> 00:29:15,324\nnow I'll get rid of that IP.\n\n562\n00:29:15,324 --> 00:29:20,140\nSo now there's no longer a VLAN\n\n563\n00:29:20,140 --> 00:29:25,300\n1 interface with an IP address, and\nwithin a few seconds, there it is.\n\n564\n00:29:25,300 --> 00:29:30,120\nSo, in this case,\nI had a route with a lower administrative\n\n565\n00:29:30,120 --> 00:29:32,890\ndistance beating out my OSPF route,\nthat's why I wasn't in my routing tape.\n\n566\n00:29:32,890 --> 00:29:33,930\nTable.\n\n567\n00:29:33,930 --> 00:29:37,640\nSo, nice little demonstration\nunintentional demonstration\n\n568\n00:29:37,640 --> 00:29:39,230\nof administrative distance.\n\n569\n00:29:40,238 --> 00:29:44,940\nAll right, so now we've got a neighbors\nrelationship built up or an adjacent.\n\n570\n00:29:44,940 --> 00:29:46,780\nWe're exchanging routes.\n\n571\n00:29:46,780 --> 00:29:48,140\nOSPF is happy so we're good.\n\n572\n00:29:49,200 --> 00:29:50,780\nWell, for now at least.\n\n573\n00:29:50,780 --> 00:29:53,570\n>> That's a goof example of our basic\nconfiguration that we would normally do.\n\n574\n00:29:53,570 --> 00:29:57,530\nOn the other side is a pretty\nmuch identical configuration\n\n575\n00:29:57,530 --> 00:30:01,205\nexcept I advertised the networks\nin which my router,\n\n576\n00:30:01,205 --> 00:30:04,245\nwas directly connected to,\nthat I want to announce into OSPF.\n\n577\n00:30:04,245 --> 00:30:09,695\n>> It looks like we ran past\nour time here for break.\n\n578\n00:30:09,695 --> 00:30:11,885\nSo why don't we do this, why don't we\ngo ahead stop here and take a break.\n\n579\n00:30:11,885 --> 00:30:15,120\nWhen we get back, we've got a lot\nmore if you have stuff to talk about.\n\n580\n00:30:15,120 --> 00:30:18,960\nWe need to talk a little more about\nthat adjacent serial relationship.\n\n581\n00:30:18,960 --> 00:30:21,900\nI didn't get into the DR stuff.\n\n582\n00:30:21,900 --> 00:30:25,616\nSo we will tackle that,\nand more after this.\n\n583\n00:30:25,616 --> 00:30:33,287\n[MUSIC]\n\n584\n00:30:33,287 --> 00:30:35,910\nAll right, welcome back everybody.\n\n585\n00:30:35,910 --> 00:30:39,590\nSo before the break we were talking a\nlittle bit about OSPF adjacencies and how\n\n586\n00:30:39,590 --> 00:30:44,060\nour two systems connect to each other, and\nonce the routers build up that adjacencies\n\n587\n00:30:44,060 --> 00:30:48,000\nthey start sharing their information and\nexchanging routes and all that.\n\n588\n00:30:48,000 --> 00:30:53,620\nAnd we saw the different states that\nwere out there, the ANIT, exchange,\n\n589\n00:30:53,620 --> 00:30:58,000\nand so on, all those different guys,\nand what I wanna talk about now is\n\n590\n00:30:58,000 --> 00:31:02,970\nthe special types of adjacencies that we\nbuild, and I'm trying to share my desktop\n\n591\n00:31:02,970 --> 00:31:06,380\nhere real quick, but some of the special\nadjacencies that we build based on that.\n\n592\n00:31:07,470 --> 00:31:10,380\nThe adjacency status was\nmade up of two parts.\n\n593\n00:31:10,380 --> 00:31:16,300\nSo, we had the initial part which would\nsay Init, or two-way or FULL, right?\n\n594\n00:31:16,300 --> 00:31:21,380\nAnd once it reached FULL,\nthen the second part becomes important.\n\n595\n00:31:21,380 --> 00:31:21,990\nAll right.\n\n596\n00:31:21,990 --> 00:31:27,481\nAnd in the example that we had before\nthe break it was showing as FULL/BDR.\n\n597\n00:31:27,481 --> 00:31:28,850\nAll right.\n\n598\n00:31:28,850 --> 00:31:31,070\nI'll want to talk about that second\npart and see what that means.\n\n599\n00:31:31,070 --> 00:31:37,900\nNow, when you build up a connection with\nOSPF, if it's a point to point link a link\n\n600\n00:31:37,900 --> 00:31:43,610\nthat's just between two systems then you\njust have this full part and that's it.\n\n601\n00:31:43,610 --> 00:31:47,450\nBut if it's a link on a Shared network,\nright?\n\n602\n00:31:47,450 --> 00:31:50,263\nAnd by shared network,\nI mean like an Ethernet network,\n\n603\n00:31:50,263 --> 00:31:53,029\nwhere you might have a switch\nwith 50 routers on it,?\n\n604\n00:31:53,029 --> 00:31:56,297\nThen we have to get a little more precise,\nand that's where the second part comes in.\n\n605\n00:31:56,297 --> 00:31:58,399\nSo let's start with\na point to point example.\n\n606\n00:31:58,399 --> 00:31:59,176\n>> Okay.\n\n607\n00:31:59,176 --> 00:32:04,171\n>> Ronnie during the break I built a\ntunnel connection between your router and\n\n608\n00:32:04,171 --> 00:32:05,370\nmy switch.\n\n609\n00:32:05,370 --> 00:32:08,785\nAnd when I say a point to point,\nI mean like dialup,\n\n610\n00:32:08,785 --> 00:32:13,740\npoint-to-point T1 lines, MPLS line, ISDN\n>> Usually\n\n611\n00:32:13,740 --> 00:32:16,480\nwide area networks are point to point,\nright.\n\n612\n00:32:16,480 --> 00:32:19,360\nOn a LAN, we normally have\na shared network, like ethernet.\n\n613\n00:32:19,360 --> 00:32:22,000\nSo let's start with a point to point and\nshow what that's like.\n\n614\n00:32:22,000 --> 00:32:27,040\nSo Ronnie, the network that I created\nthat was point to point was 192.168.40.\n\n615\n00:32:27,040 --> 00:32:28,040\n>> Yeah.\n\n616\n00:32:28,040 --> 00:32:31,110\n>> So we need to add that\nto our OSPF configuration.\n\n617\n00:32:31,110 --> 00:32:37,563\nSo I'm gonna get back into OSPF 100 and\ni'll say 192.168.40.0,\n\n618\n00:32:37,563 --> 00:32:41,970\nit's just a class c,\nwe'll stick that in area 999.\n\n619\n00:32:44,560 --> 00:32:48,650\nAll right, and OSPF is sending\nhello messages every 10 seconds.\n\n620\n00:32:48,650 --> 00:32:51,690\nSo within a few seconds we should\nget a neighbor, there we go.\n\n621\n00:32:51,690 --> 00:32:58,350\nSo it built up that connection and\nif I look at my neighbor list again.\n\n622\n00:32:58,350 --> 00:32:58,850\nThere we go.\n\n623\n00:32:59,990 --> 00:33:03,700\nI can see that connection\nto Ronnie's system via\n\n624\n00:33:03,700 --> 00:33:05,230\nthe tunnel interface that I made.\n\n625\n00:33:06,690 --> 00:33:10,625\nAnd see how it's got full, and then\na slash, and then nothing, Just a dash.\n\n626\n00:33:10,625 --> 00:33:13,370\nRight.\nThat means this is a point to\n\n627\n00:33:13,370 --> 00:33:14,850\npoint connection.\n\n628\n00:33:14,850 --> 00:33:18,450\nI'm connected to one person on the other\nside and that's the end of it, all right.\n\n629\n00:33:18,450 --> 00:33:19,520\nAnd that's expected.\n\n630\n00:33:19,520 --> 00:33:22,050\nThat's what you expect to see\non point to point links here,\n\n631\n00:33:22,050 --> 00:33:26,330\nwide area network connections, that's\nnormally what you're gonna see, all right.\n\n632\n00:33:26,330 --> 00:33:28,000\nBut on on an ethernet internet network.\n\n633\n00:33:28,000 --> 00:33:30,120\nOn a shared network it's\ngoing to be different.\n\n634\n00:33:30,120 --> 00:33:32,100\nAnd that's where these\nterms down here come in.\n\n635\n00:33:32,100 --> 00:33:33,650\nAnd in fact,\nthere's three different terms.\n\n636\n00:33:33,650 --> 00:33:39,000\nSo let me add them, so let's see, before\nthe break we did OSPF connection states.\n\n637\n00:33:39,000 --> 00:33:42,040\nNow we're gonna do OSPF connection types.\n\n638\n00:33:42,040 --> 00:33:47,900\nAll right, and there's really just\nthree types we need to worry about.\n\n639\n00:33:47,900 --> 00:33:50,160\nI'll go ahead and say there's four.\n\n640\n00:33:50,160 --> 00:33:55,223\nSo there's DR, BDR, DROTHER and -.\n\n641\n00:33:56,395 --> 00:33:57,435\nRight.\nHyphen.\n\n642\n00:33:57,435 --> 00:34:03,615\nAnd so that hyphen is basically\na point to point length right.\n\n643\n00:34:03,615 --> 00:34:08,535\nAnd I guess if I really wanted to be\ncreative here, I could say we had like\n\n644\n00:34:08,535 --> 00:34:13,310\na FULL/DR, FULL/BDR, and\nthen 2WAY/DROTHER, and FULL/-.\n\n645\n00:34:13,310 --> 00:34:17,784\n>> Mhm.\n>> All right, so the FULL/- let me remove\n\n646\n00:34:17,784 --> 00:34:24,550\nthat cause that's the first\none we're talking about.\n\n647\n00:34:24,550 --> 00:34:25,593\nRight so that.\n\n648\n00:34:28,425 --> 00:34:30,820\n>> We appeared with a point.\n\n649\n00:34:30,820 --> 00:34:34,180\n>> Point to point links, right.\n\n650\n00:34:34,180 --> 00:34:36,430\nWith a point to point link,\nyou talk to the neighbor,\n\n651\n00:34:36,430 --> 00:34:39,860\nthe neighbor talks to you,\nthat's the end of it and you're done.\n\n652\n00:34:39,860 --> 00:34:41,820\nAnd so there is no connection type.\n\n653\n00:34:41,820 --> 00:34:46,200\nThere is no second part to that one,\nit's just point to point.\n\n654\n00:34:46,200 --> 00:34:49,630\n>> When we get into the DR and the BDR,\n\n655\n00:34:49,630 --> 00:34:54,700\nwhat normally happens is that in OSPF,\nif you end up with a DR, it\n\n656\n00:34:54,700 --> 00:35:00,050\nis expecting to see more than one neighbor\non that particular connection there.\n\n657\n00:35:00,050 --> 00:35:05,610\nAnd so the way that OSPF works here,\ninstead of every single router actually\n\n658\n00:35:05,610 --> 00:35:11,880\nexchanging the entire routing database,\nthe DR also know as the Designated router.\n\n659\n00:35:11,880 --> 00:35:15,900\nHe is the one that is appointed\nto be the one that updates\n\n660\n00:35:15,900 --> 00:35:20,550\nall the other routers running\nthat OSPF process at that point.\n\n661\n00:35:20,550 --> 00:35:24,060\nInstead of everybody just yelling out,\nhey I've got a new route.\n\n662\n00:35:24,060 --> 00:35:26,680\nWhat normally happens is,\nwhen those routers tells the DR,\n\n663\n00:35:26,680 --> 00:35:31,150\nthe Designated router, and\nthen he tells everybody else instead.\n\n664\n00:35:31,150 --> 00:35:35,310\nSo we'll talk about that process of which\none becomes DR and BDR in a moment.\n\n665\n00:35:35,310 --> 00:35:38,970\nSo for us here,\nthe DR is that one that we actually have.\n\n666\n00:35:38,970 --> 00:35:41,120\nHere's one that's the Designated Router.\n\n667\n00:35:41,120 --> 00:35:44,980\nUsually if there's a DR,\nthere's also gonna be a BDR as well.\n\n668\n00:35:44,980 --> 00:35:48,760\nThe backup designated router,\nwhich is a guy that say, hey,\n\n669\n00:35:48,760 --> 00:35:54,520\nI'll become the Designated Router if the\nDR ends up not doing what it needs to do.\n\n670\n00:35:54,520 --> 00:35:56,460\n>> Yeah, OSPF is really efficient.\n\n671\n00:35:56,460 --> 00:36:00,570\nAnd one of the things it does that\nsets it apart from a distance vector,\n\n672\n00:36:00,570 --> 00:36:04,360\nin a distance vector protocol,\nwhen you advertise out a route,\n\n673\n00:36:04,360 --> 00:36:08,370\nyou only talk to people that you're\ndirectly connected to and that's it.\n\n674\n00:36:08,370 --> 00:36:10,870\nLet me do a drawing to\nkind of illustrate that.\n\n675\n00:36:10,870 --> 00:36:13,050\nLet me get into artistic mode.\n\n676\n00:36:13,050 --> 00:36:14,390\nLet's say for\n\n677\n00:36:14,390 --> 00:36:17,400\nexample I have a network that is a little\nmore complex than what was drawn there.\n\n678\n00:36:17,400 --> 00:36:20,191\nLet's say I've got a bunch of routers.\n\n679\n00:36:23,074 --> 00:36:27,619\nAnd they are connected, let's just\nlink some of these guys together.\n\n680\n00:36:29,459 --> 00:36:30,940\nLike that.\n\n681\n00:36:30,940 --> 00:36:31,460\nAll right.\n\n682\n00:36:31,460 --> 00:36:33,520\nSo here's my network.\n\n683\n00:36:33,520 --> 00:36:38,600\nIn a distance vector protocol my router\nall the way over here on the left side,\n\n684\n00:36:38,600 --> 00:36:44,182\nrouter 1, router 1 will advertise\nout to this guy and will talk back,\n\n685\n00:36:44,182 --> 00:36:47,120\nit will receive communications\nfrom that guy, and that's it.\n\n686\n00:36:47,120 --> 00:36:52,990\nRouter 1 will not talk to anybody else but\nthese other guys are still there.\n\n687\n00:36:52,990 --> 00:36:53,730\nThey're still out there.\n\n688\n00:36:53,730 --> 00:36:55,210\nThey still exist.\n\n689\n00:36:55,210 --> 00:36:59,510\nBut router one is only gonna hear about\nthem translated through router two.\n\n690\n00:36:59,510 --> 00:37:02,790\nSo when we deal with\na distance vector protocol,\n\n691\n00:37:02,790 --> 00:37:06,870\nyou're only talking to people you're\ndirectly connected to and that's it.\n\n692\n00:37:06,870 --> 00:37:11,580\nWith a link state protocol,\nyou talk to everyone in your area.\n\n693\n00:37:11,580 --> 00:37:13,660\nThe whole area.\n\n694\n00:37:13,660 --> 00:37:18,674\nSo if this network that I just drew,\nif this was area 99\n\n695\n00:37:18,674 --> 00:37:23,475\nlike we're using in\nthe example If this is area 99,\n\n696\n00:37:23,475 --> 00:37:26,797\nthe area itself is this whole thing.\n\n697\n00:37:30,610 --> 00:37:35,600\nLook, that is horrible,\nlet me switch to a typing tool.\n\n698\n00:37:35,600 --> 00:37:41,330\nSo if this whole this is area, or 999 is\nwhat we we're doing, right, area 999.\n\n699\n00:37:41,330 --> 00:37:43,870\nSo this whole thing is area 999,\n\n700\n00:37:43,870 --> 00:37:46,282\nall of these routers\nare gonna talk to each other.\n\n701\n00:37:46,282 --> 00:37:49,620\nAll right.\nWell what does that mean to us?\n\n702\n00:37:49,620 --> 00:37:54,330\nIt means that router one is going to\nbuild a connections to router two, and\n\n703\n00:37:54,330 --> 00:37:57,920\nto router three, and\nto router four, and to router 5.\n\n704\n00:37:57,920 --> 00:38:00,470\nIt's gonna connect every one of them.\n\n705\n00:38:00,470 --> 00:38:05,540\nAnd router five, well, it's gonna connect\nto router 2, router 3, router 4, router 1.\n\n706\n00:38:05,540 --> 00:38:10,540\nAnd so it's gonna build its connections\nand you'll see how quickly my diagram\n\n707\n00:38:10,540 --> 00:38:14,690\nis gonna get messy and that's because\nthis is a lot of connections.\n\n708\n00:38:14,690 --> 00:38:17,130\nAll these guys connecting to each other.\n\n709\n00:38:17,130 --> 00:38:19,450\nIt becomes a huge mess.\n\n710\n00:38:19,450 --> 00:38:23,880\nAnd if router 1 loses a route,\nif a route goes down on it.\n\n711\n00:38:23,880 --> 00:38:27,070\nIt's got to reach out and\ncommunicate to everybody.\n\n712\n00:38:27,070 --> 00:38:30,810\nSo it's got to send a message to router 2,\nand then 3, and 4 and 5.\n\n713\n00:38:30,810 --> 00:38:35,838\nSo router 1 is gonna do a lot of\nwork now that this one route failed.\n\n714\n00:38:35,838 --> 00:38:39,974\nLet, OSPF kinda do it's own thing,\nalright.\n\n715\n00:38:39,974 --> 00:38:44,181\nIf these were all point to point links,\nrouter 1 just talks to router 2, and\n\n716\n00:38:44,181 --> 00:38:46,834\nthen router 2 just talks to router 3 and\n4, and\n\n717\n00:38:46,834 --> 00:38:50,824\nthen router 3 talks to router 4, and\nrouter 4 just talks to router 5.\n\n718\n00:38:50,824 --> 00:38:51,950\nAnd so on.\n\n719\n00:38:51,950 --> 00:38:53,790\nWith point to point lengths, right.\n\n720\n00:38:53,790 --> 00:38:55,650\nBut let's change this diagram.\n\n721\n00:38:55,650 --> 00:38:58,250\nWhat if we didn't have that?\n\n722\n00:38:58,250 --> 00:39:02,050\nWhat if instead,\nwe had a shared network in between.\n\n723\n00:39:02,050 --> 00:39:03,090\nWe had a switch.\n\n724\n00:39:04,900 --> 00:39:06,853\nAll right, so in the middle of all this.\n\n725\n00:39:10,226 --> 00:39:16,390\nWe just have a switch, and\non that switch, we have a cow, ei ei oh.\n\n726\n00:39:16,390 --> 00:39:18,110\nThat's the system.\n\n727\n00:39:18,110 --> 00:39:22,480\nSo on that switch,\nwe just have a single network, right.\n\n728\n00:39:22,480 --> 00:39:25,160\nAnd, all of these guys\nare plugged into it.\n\n729\n00:39:25,160 --> 00:39:28,350\nWell, if they're all\nplugged into a single link.\n\n730\n00:39:28,350 --> 00:39:30,620\nRight, a single ethernet segment, right,\n\n731\n00:39:30,620 --> 00:39:32,560\nthey've all got IP addresses\non the same network,\n\n732\n00:39:32,560 --> 00:39:36,310\nthen router one is gonna have to talk to\nall of these guys that are out there.\n\n733\n00:39:36,310 --> 00:39:38,045\nBut it's inefficient, right.\n\n734\n00:39:38,045 --> 00:39:42,065\nOSPF uses multicast, so at least we're not\nbugging all the PCs that are out there.\n\n735\n00:39:42,065 --> 00:39:44,943\nBut router one would have to tell\neverybody about the failure.\n\n736\n00:39:44,943 --> 00:39:49,788\nSo somebody will get elected as the DR,\nas the Designated Router.\n\n737\n00:39:49,788 --> 00:39:51,343\nLet's say that it's router two.\n\n738\n00:39:51,343 --> 00:39:51,973\nOkay?\n\n739\n00:39:51,973 --> 00:39:56,373\nSo router 2 becomes the designated router.\n\n740\n00:39:56,373 --> 00:39:58,208\nOkay it becomes the DR.\n\n741\n00:39:58,208 --> 00:40:01,170\nSomebody else becomes the BDR.\n\n742\n00:40:01,170 --> 00:40:03,150\nLet's say that it's router four, right.\n\n743\n00:40:03,150 --> 00:40:04,300\nSo it becomes the.\n\n744\n00:40:05,470 --> 00:40:10,540\nMy handwriting on the old\ntouchscreen is not ideal.\n\n745\n00:40:10,540 --> 00:40:15,170\nLet me see if I can't clean this up,\nbut router 4 becomes the BDR, and\n\n746\n00:40:15,170 --> 00:40:20,102\nby becoming the BDR, it's the backup\nin case a failure happens with the DR.\n\n747\n00:40:20,102 --> 00:40:22,060\nAll right.\n\n748\n00:40:22,060 --> 00:40:25,940\nEverybody else becomes\nwhat's called a DR other.\n\n749\n00:40:25,940 --> 00:40:29,120\nDR other just means\ndesignated router other and\n\n750\n00:40:29,120 --> 00:40:32,420\nthat they are participating in this area.\n\n751\n00:40:32,420 --> 00:40:35,840\nBut they are not actually reaching out\nas part of the main communication.\n\n752\n00:40:36,880 --> 00:40:40,330\nEveryone will build\na connection to the DR.\n\n753\n00:40:40,330 --> 00:40:45,550\nAll right,\neveryone builds a connection to the DR and\n\n754\n00:40:45,550 --> 00:40:50,660\nwhen a route change happens,\nif router one has some kind of failure and\n\n755\n00:40:50,660 --> 00:40:53,820\nloses a connection,\nit doesn't tell everybody.\n\n756\n00:40:53,820 --> 00:41:00,185\nIt just tells the DR, and\nthe DR then goes to tell everybody else.\n\n757\n00:41:00,185 --> 00:41:01,090\nOkay.\n\n758\n00:41:01,090 --> 00:41:05,930\nSo, the DR is that central agent for\nthe area for that shared link, for\n\n759\n00:41:05,930 --> 00:41:07,620\nthat shared ethernet segment.\n\n760\n00:41:07,620 --> 00:41:10,350\nIt's gonna communicate that\nfailure out to the other guys.\n\n761\n00:41:10,350 --> 00:41:13,150\nIt sends it out as a multicast,\nso it is efficient.\n\n762\n00:41:13,150 --> 00:41:17,940\nIt's also being communicated to the BDR\nin case it's the DR that failed, but\n\n763\n00:41:17,940 --> 00:41:22,560\nthe BDR won't forward it to anyone else\nunless it knows the DR has gone down.\n\n764\n00:41:22,560 --> 00:41:23,570\nAll right.\n\n765\n00:41:23,570 --> 00:41:26,470\nSo that's kind of the purpose\nof the DR and the BDR.\n\n766\n00:41:26,470 --> 00:41:29,420\nThe DR is a centralized notifying body.\n\n767\n00:41:29,420 --> 00:41:33,170\nIt's an agent that will relay\nnotifications throughout an entire area\n\n768\n00:41:33,170 --> 00:41:37,070\nversus having each router having\nto connect out to everybody else.\n\n769\n00:41:37,070 --> 00:41:40,540\n>> And this makes it very fast and\nvery efficient because remember,\n\n770\n00:41:40,540 --> 00:41:45,340\nevery device is only really talking to one\ndevice, that DR on that shared segment\n\n771\n00:41:45,340 --> 00:41:48,420\nhere gets to really, again,\nbe the only one that updates.\n\n772\n00:41:48,420 --> 00:41:52,990\nSo, incredibly, like I said,\nefficient that way, but very fast as well.\n\n773\n00:41:52,990 --> 00:41:58,690\nNow for us, Don, do you wanna talk about\nwhich one gets to be the DR right now?\n\n774\n00:41:58,690 --> 00:41:59,430\n>> Sure.\n\n775\n00:41:59,430 --> 00:42:04,230\n>> This is the weirdest kind of process\nin the world, in the way that we do this.\n\n776\n00:42:04,230 --> 00:42:07,500\nWe actually have,\nwhat we call a router ID, or\n\n777\n00:42:07,500 --> 00:42:10,620\nwe can use what we call\na loop back interface or\n\n778\n00:42:10,620 --> 00:42:15,080\nit can be the highest IP address on\nthe active interface at the time.\n\n779\n00:42:15,080 --> 00:42:19,040\nAnd I'll let Don kind of walk through\nthose for us as we go through this.\n\n780\n00:42:19,040 --> 00:42:21,855\n>> So with OSPF,\nwe have what's called a router ID.\n\n781\n00:42:21,855 --> 00:42:22,570\n[LAUGH] And\n\n782\n00:42:22,570 --> 00:42:26,200\nthe router ID is what identifies your\nrouter to everybody else and the reason\n\n783\n00:42:26,200 --> 00:42:29,970\nwhy we have to have a router ID is that if\nwe have two connections between a system,\n\n784\n00:42:29,970 --> 00:42:32,890\nhow does the other router know that\nit's the same router on the other end?\n\n785\n00:42:32,890 --> 00:42:34,030\nAnd that's actually what we have here.\n\n786\n00:42:34,030 --> 00:42:36,290\nI've got two connections\nto Ronnie's router.\n\n787\n00:42:36,290 --> 00:42:39,660\nOne of them is via a tunnel\ninterface that I made and\n\n788\n00:42:39,660 --> 00:42:42,720\nanother is via just this regular\nfast ethernet interface.\n\n789\n00:42:42,720 --> 00:42:44,250\n>> And so I've got two connections.\n\n790\n00:42:44,250 --> 00:42:45,780\nIt's the same person on the other end and\n\n791\n00:42:45,780 --> 00:42:48,750\nI know that because I can see\nthe neighbor ID is the same right?\n\n792\n00:42:48,750 --> 00:42:52,690\nSo the router knows when it's got\ntwo routes to the same destination.\n\n793\n00:42:52,690 --> 00:42:55,270\nNow, the connections, if we look at them.\n\n794\n00:42:55,270 --> 00:42:59,730\nOne is point to point and so it's just got\nFULL/ and then a hyphen and that's it.\n\n795\n00:42:59,730 --> 00:43:02,430\nBut the other one says FULL/BDR.\n\n796\n00:43:02,430 --> 00:43:07,680\nThat means that the person on the other\nend is the backup designated router.\n\n797\n00:43:07,680 --> 00:43:11,260\nNow, I don't see anybody else in your\nlist that is a designated router, so\n\n798\n00:43:11,260 --> 00:43:11,960\nwhat does that mean?\n\n799\n00:43:11,960 --> 00:43:14,560\nIt probably means that I'm\nthe designated router.\n\n800\n00:43:14,560 --> 00:43:17,762\nAnd in fact,\nif I drop to Ronnie's router here, so\n\n801\n00:43:17,762 --> 00:43:22,377\nnow I'm on Ronnie's router, and,\nI look at this from his side, I can see\n\n802\n00:43:22,377 --> 00:43:27,010\nhis connection to me FULL/DR that\nmeans that I am the designated router.\n\n803\n00:43:28,783 --> 00:43:29,606\nAll right.\n\n804\n00:43:29,606 --> 00:43:33,250\nSo, that's cool,\nthat's in place, that's working.\n\n805\n00:43:33,250 --> 00:43:37,020\nHow did I become the designated\nrouter instead of him?\n\n806\n00:43:37,020 --> 00:43:40,770\nWell, Ronnie kind of gave away the secret,\nwhich is whoever's got the,\n\n807\n00:43:40,770 --> 00:43:44,820\nwell, let me backtrack a little bit.\n\n808\n00:43:44,820 --> 00:43:48,510\nAs based on the router ID,\n\n809\n00:43:49,520 --> 00:43:54,170\nwhoever has the highest router\nID becomes the DR, right.\n\n810\n00:43:54,170 --> 00:43:57,490\nSo my router ID was 192.168.40.2,\nhis was 192.168.40.1 dot\n\n811\n00:43:57,490 --> 00:44:01,960\ntwo is higher than dot one so\nI became the designated router, all right.\n\n812\n00:44:01,960 --> 00:44:08,780\nNow why did it pick that IP\nwhen OSPF starts up whatever\n\n813\n00:44:08,780 --> 00:44:14,120\ninterface has the highest IP address,\nthat IP address becomes your router ID.\n\n814\n00:44:14,120 --> 00:44:15,510\nSo if I look at mine.\n\n815\n00:44:16,900 --> 00:44:18,870\nAnd I look at my IP address.\n\n816\n00:44:18,870 --> 00:44:20,428\nCuz i've got a bunch of\nthem on this switch right.\n\n817\n00:44:20,428 --> 00:44:27,530\n192.168.0.1, 10, 20, 30, 40,\n192.168, is the highest all right.\n\n818\n00:44:28,850 --> 00:44:33,980\nBut keep in mind it's\nthe highest when OSPF starts up.\n\n819\n00:44:33,980 --> 00:44:38,880\nSo if I go into my configuration and\nI create a new VLAN, right?\n\n820\n00:44:38,880 --> 00:44:40,339\nMaybe I'll create VLAN 90.\n\n821\n00:44:42,939 --> 00:44:48,768\nAnd I give it an IP address of\n192.168.90.2, or I'll do dot one.\n\n822\n00:44:48,768 --> 00:44:49,349\nWhatever.\n\n823\n00:44:49,349 --> 00:44:53,272\nDoesn't matter.\n\n824\n00:44:53,272 --> 00:44:56,268\nAnd let's see, I need to do that.\n\n825\n00:45:01,817 --> 00:45:03,604\nAnd let me give it a second for\nit to come up.\n\n826\n00:45:03,604 --> 00:45:06,510\nThe interface takes just\na second to wake up.\n\n827\n00:45:06,510 --> 00:45:11,500\nSo it's going to sit there as down until-\n>> Do we need to add in\n\n828\n00:45:11,500 --> 00:45:12,890\nan interface into the IP?\n\n829\n00:45:12,890 --> 00:45:15,050\n>> Oh maybe, interfaces.\n\n830\n00:45:15,050 --> 00:45:18,650\n[LAUGH] Yea probably wouldn't hurt.\n\n831\n00:45:18,650 --> 00:45:20,237\nAll right, so\nlet me stick this one into VLAN ID.\n\n832\n00:45:25,682 --> 00:45:28,562\nIt should be on the trunk already,\nit is, so it should be up.\n\n833\n00:45:31,163 --> 00:45:31,963\nThere it goes.\n\n834\n00:45:31,963 --> 00:45:33,000\nAll right.\n\n835\n00:45:33,000 --> 00:45:37,793\nSo, it's up, I now have have\nan IP address of 192.168.90.1 and\n\n836\n00:45:37,793 --> 00:45:39,799\nthat's higher than 40.2.\n\n837\n00:45:39,799 --> 00:45:40,380\nRight.\n\n838\n00:45:44,560 --> 00:45:49,335\nI'll do a show IP's protocols and\nin here I can see router ID.\n\n839\n00:45:49,335 --> 00:45:53,306\nMy router ID is still 192.160.40.2.\n\n840\n00:45:53,306 --> 00:45:57,970\nIt didn't change to 90 because that\ninterface was added after OSPF started.\n\n841\n00:45:57,970 --> 00:45:59,390\nNow when does Windows OSPF start up.\n\n842\n00:46:00,700 --> 00:46:02,120\nWhen the router starts up.\n\n843\n00:46:02,120 --> 00:46:06,668\nSo I would have to reboot for that to\ntake effect, or I could clear out just\n\n844\n00:46:06,668 --> 00:46:11,231\nthe OSPF process if I can remember\nhow to do it, it's IP OSPF processor.\n\n845\n00:46:13,819 --> 00:46:19,426\nYeah, so clear IP OSPF processes or\nprocess, that'll actually reset just OSPF,\n\n846\n00:46:19,426 --> 00:46:24,230\nso instead of rebooting the whole\nrouter it will just reboot OSPF.\n\n847\n00:46:24,230 --> 00:46:27,220\nIt will cause a network outage cuz\nI'm gonna dump all my routes when\n\n848\n00:46:27,220 --> 00:46:28,210\nthis happens.\n\n849\n00:46:28,210 --> 00:46:31,020\nBut it'll happen in less than 10 seconds.\n\n850\n00:46:31,020 --> 00:46:34,840\nSo it's a ten second outage as opposed\nto if I did a reload which would take\n\n851\n00:46:34,840 --> 00:46:36,660\ntwo minutes, three minutes sometimes.\n\n852\n00:46:36,660 --> 00:46:38,260\nSo it is a very fast outage.\n\n853\n00:46:39,690 --> 00:46:40,611\nSo there it goes restarting.\n\n854\n00:46:40,611 --> 00:46:42,133\n>> Oh look it's already done.\n\n855\n00:46:42,133 --> 00:46:50,230\n>> And\noh you know the router ID didn't update.\n\n856\n00:46:50,230 --> 00:46:52,400\nThat apparently wasn't good enough.\n\n857\n00:46:52,400 --> 00:46:54,030\nAll right, so\napparently I will need to reload.\n\n858\n00:46:54,030 --> 00:46:55,880\n>> Yeah,\nsometimes it does happen on there.\n\n859\n00:46:55,880 --> 00:46:57,789\n>> We can do that,\nlet me save my configuration.\n\n860\n00:47:00,296 --> 00:47:03,142\nI gotta use the right command,\nI was about to use the shortcut.\n\n861\n00:47:03,142 --> 00:47:03,974\n>> Yeah.\n>> [LAUGH]\n\n862\n00:47:05,994 --> 00:47:07,712\n>> Now, while Don is doing this,\n\n863\n00:47:07,712 --> 00:47:10,520\nthere's a couple of other\nthings we can also do.\n\n864\n00:47:10,520 --> 00:47:16,380\nA lot times, Instead of actually using one\nof the IP addresses on the interfaces,\n\n865\n00:47:16,380 --> 00:47:20,210\nwhat we do is we create\na loopback address instead.\n\n866\n00:47:20,210 --> 00:47:23,870\nAnd that way, when we do that and\nwe reload the router or\n\n867\n00:47:23,870 --> 00:47:28,080\nwe clear out the OSPF process here,\nit comes back up as a loopback interface,\n\n868\n00:47:28,080 --> 00:47:31,570\nand that way when the router starts\nup it already has that router ID\n\n869\n00:47:31,570 --> 00:47:34,000\nbecause loopback interfaces are always up.\n\n870\n00:47:34,000 --> 00:47:36,992\nAnd so usually yeah she did not have\na lot of people do that instead.\n\n871\n00:47:36,992 --> 00:47:37,880\n>> Yeah you know for\n\n872\n00:47:37,880 --> 00:47:41,010\nthe exam there's three ways that\nwe can change that router ID.\n\n873\n00:47:41,010 --> 00:47:44,291\nSo one is we just have an interface\nwith the highest IP and we pick that and\n\n874\n00:47:44,291 --> 00:47:45,122\nthen it's done.\n\n875\n00:47:45,122 --> 00:47:50,216\nTwo we create a loop back interface, and\nput an IP address on it and we use that.\n\n876\n00:47:50,216 --> 00:47:56,210\nOr three we use the manual router-\nID command in the routing protocol.\n\n877\n00:47:56,210 --> 00:47:58,149\nAnd we manually set it\nto whatever we want.\n\n878\n00:47:58,149 --> 00:48:00,431\nLittle known fact about router IDs.\n\n879\n00:48:00,431 --> 00:48:03,915\nThey're normally based on IPs,\nbut it's not an IP address,\n\n880\n00:48:03,915 --> 00:48:08,404\nit's just a 32 bit number, so you can put\nwhatever the heck you want in there as\n\n881\n00:48:08,404 --> 00:48:12,558\nlong as if fits within a 32 bit number,\nso we can assign a router ID that is\n\n882\n00:48:12,558 --> 00:48:17,370\nwhatever we want, based on our particular\nneeds, and desires and whatever.\n\n883\n00:48:17,370 --> 00:48:22,240\nSo for example on Ronnie's router if I\nwanted to manually set the router ID I\n\n884\n00:48:22,240 --> 00:48:27,350\ncould get into configuration and\ninto OSPF 100,\n\n885\n00:48:27,350 --> 00:48:34,110\nand we could say router-ID followed\nby what we want the ID to be.\n\n886\n00:48:34,110 --> 00:48:36,130\nAnd it's not an IP address.\n\n887\n00:48:36,130 --> 00:48:40,400\nSee how it says router\nID in IP address format.\n\n888\n00:48:40,400 --> 00:48:43,620\nSo if I wanted to put\nsomething in there like this.\n\n889\n00:48:43,620 --> 00:48:48,395\nHe's router one, so\nmaybe I'll make that router ID 0.0.0.1.\n\n890\n00:48:48,395 --> 00:48:50,600\nOkay, is that a valid IP address?\n\n891\n00:48:52,200 --> 00:48:53,480\n>> Nope.\n>> You could argue I suppose that it is.\n\n892\n00:48:53,480 --> 00:48:55,710\nBut you're not supposed to say\nanything that starts with a zero.\n\n893\n00:48:55,710 --> 00:49:00,430\nSo on the Internet, no, it's not a valid\nIP address, right, but I can set that,\n\n894\n00:49:01,610 --> 00:49:06,350\nand now, that will be his router ID,\nbut, it doesn't take\n\n895\n00:49:06,350 --> 00:49:10,210\neffect because of the whole OS, actually\ndoes that one take effect right away?\n\n896\n00:49:10,210 --> 00:49:11,210\nLet's see.\n>> Yeah,\n\n897\n00:49:11,210 --> 00:49:13,730\nusually you have to restart the process.\n\n898\n00:49:13,730 --> 00:49:14,800\n>> What did I run?\n\n899\n00:49:14,800 --> 00:49:15,620\nOh, the other.\n\n900\n00:49:15,620 --> 00:49:17,060\n>> The other side's gonna.\n\n901\n00:49:17,060 --> 00:49:18,525\n>> My switch is rebooting and so it's.\n\n902\n00:49:18,525 --> 00:49:19,990\n>> Yeah.\nSpamming us with messages here.\n\n903\n00:49:19,990 --> 00:49:23,545\nLet's get back here.\n\n904\n00:49:23,545 --> 00:49:25,220\n>> Show IP protocols?\n>> Oh, I'm doing show protocols.\n\n905\n00:49:25,220 --> 00:49:26,770\n>> Yeah.\n>> Not show IP protocols.\n\n906\n00:49:26,770 --> 00:49:28,360\nThere we go, all right.\n\n907\n00:49:28,360 --> 00:49:28,860\nIt did take effect.\n>> It did, sure enough.\n\n908\n00:49:28,860 --> 00:49:29,402\nThere we go.\n\n909\n00:49:29,402 --> 00:49:32,315\n>> So we got that router ID is now set to\n\n910\n00:49:32,315 --> 00:49:33,930\n0.0.0.1.\n\n911\n00:49:33,930 --> 00:49:37,410\nOn my switch when it comes up,\nactually I can already see it here.\n\n912\n00:49:37,410 --> 00:49:40,373\n>> Yep, there it is.\n>> I've got a gateway of 192.168.90.1\n\n913\n00:49:40,373 --> 00:49:41,420\nthat's out there.\n\n914\n00:49:41,420 --> 00:49:42,900\nSo I'm seeing that new ID.\n\n915\n00:49:42,900 --> 00:49:46,500\nSee how I've got 192.168.40 there,\nthat's the old one.\n\n916\n00:49:46,500 --> 00:49:49,480\nIt's got a last update from two and\na half minutes ago.\n\n917\n00:49:49,480 --> 00:49:51,910\nI haven't seen that in two and\na half minutes.\n\n918\n00:49:51,910 --> 00:49:54,670\nBut I've seen this other guy\nin the last four seconds.\n\n919\n00:49:54,670 --> 00:49:59,760\nSo, that is done and I do, have that\nconnection to that new router ID.\n\n920\n00:49:59,760 --> 00:50:05,010\nSo, if we change an IP address we do\nhave to basically, reboot the router.\n\n921\n00:50:05,010 --> 00:50:07,650\nJust changing it with the router ID\ncommand didn't involved that though.\n\n922\n00:50:07,650 --> 00:50:09,210\nSo, I'll change that on the switch too.\n\n923\n00:50:10,890 --> 00:50:18,128\nLet me get back into my switch, And\n\n924\n00:50:18,128 --> 00:50:22,124\nI'll say router OSPF 100,\nand this is switch two, so\n\n925\n00:50:22,124 --> 00:50:25,795\nmaybe I'll set its\nrouter ID to be 0.0.0.2.\n\n926\n00:50:25,795 --> 00:50:30,190\nSo then I can remember that, and, oh,\nthis one is telling me to clear it.\n\n927\n00:50:31,520 --> 00:50:36,260\nThat router is running a newer iOS,\n\n928\n00:50:36,260 --> 00:50:39,420\nso maybe it changed it.\n\n929\n00:50:39,420 --> 00:50:40,700\nWe'll go ahead and reset it, though.\n\n930\n00:50:42,760 --> 00:50:43,960\n>> There it is.\n\n931\n00:50:43,960 --> 00:50:44,870\n>> It happens fast.\n\n932\n00:50:44,870 --> 00:50:51,800\nAll right, so\nI am showing my new router ID of 0.0.0.2.\n\n933\n00:50:51,800 --> 00:50:57,650\nAnd if I do a show IP OSPF neighbor,\nI show you as not one.\n\n934\n00:50:57,650 --> 00:50:58,210\nRight?\nSo\n\n935\n00:50:58,210 --> 00:51:00,560\nnow I can recognize router\none versus router two,\n\n936\n00:51:00,560 --> 00:51:03,610\nas opposed to just being\na random IP address.\n\n937\n00:51:03,610 --> 00:51:04,490\n>> Now, Don, take a look.\n\n938\n00:51:04,490 --> 00:51:09,070\nThe DR looks like it\nchanged from me to you.\n\n939\n00:51:09,070 --> 00:51:10,070\n>> Oh.\n>> Or from you to me.\n\n940\n00:51:10,070 --> 00:51:11,050\n>> So it did.\n\n941\n00:51:11,050 --> 00:51:12,211\nInteresting here.\n\n942\n00:51:12,211 --> 00:51:14,170\nSo, your router ID is one.\n\n943\n00:51:14,170 --> 00:51:15,540\n>> Right.\n>> And my router ID is two.\n\n944\n00:51:15,540 --> 00:51:16,760\nMy router ID is higher.\n\n945\n00:51:16,760 --> 00:51:19,610\n>> Right.\n>> So, why didn't you, or\n\n946\n00:51:19,610 --> 00:51:20,570\nwhy didn't I become the DR?\n\n947\n00:51:20,570 --> 00:51:22,100\n>> Right.\n>> I've got a higher router ID.\n\n948\n00:51:22,100 --> 00:51:23,960\n>> Yeah.\n>> Do you know why?\n\n949\n00:51:23,960 --> 00:51:25,105\n>> Router ID is lower?\n\n950\n00:51:25,105 --> 00:51:26,390\n[LAUGH]\n>> Well,\n\n951\n00:51:26,390 --> 00:51:28,330\nthe problem here is your\nrouter ID is lower.\n\n952\n00:51:28,330 --> 00:51:30,030\n>> Right.\n>> My router ID is higher so\n\n953\n00:51:30,030 --> 00:51:32,700\nby all rights I should be the higher one.\n\n954\n00:51:32,700 --> 00:51:34,460\nI should be the DR, but I'm not.\n\n955\n00:51:34,460 --> 00:51:35,990\n>> Yeah.\n>> Whoops.\n\n956\n00:51:35,990 --> 00:51:37,955\nWell I'm not because I\njust got disconnected.\n\n957\n00:51:37,955 --> 00:51:40,900\nBut, this happened earlier in the show.\n\n958\n00:51:40,900 --> 00:51:41,920\nWhat is going on today?\n\n959\n00:51:45,754 --> 00:51:48,410\nBut it's not happening here\nbecause you came up first.\n\n960\n00:51:48,410 --> 00:51:51,420\n>> Right.\n>> You were up when my switch was down.\n\n961\n00:51:51,420 --> 00:51:52,720\nI rebooted my switch.\n\n962\n00:51:52,720 --> 00:51:55,050\nHe became the designated router.\n\n963\n00:51:55,050 --> 00:51:59,130\nNow, when I finally came back up again,\nI've got a higher router ID,\n\n964\n00:51:59,130 --> 00:52:00,510\nI should have become DR.\n\n965\n00:52:00,510 --> 00:52:03,870\nExcept, it's what's called non-preemptive.\n\n966\n00:52:03,870 --> 00:52:07,290\nAnd that means if there's already a DR,\nand they're up and\n\n967\n00:52:07,290 --> 00:52:09,570\nthey're happy, don't rock the boat.\n\n968\n00:52:09,570 --> 00:52:12,740\nDon't go and change,\ndon't fix something that isn't broken.\n\n969\n00:52:12,740 --> 00:52:14,510\nLeave them as the DR.\n\n970\n00:52:14,510 --> 00:52:17,300\nIf I wanted to force\nmyself to become the DR,\n\n971\n00:52:17,300 --> 00:52:21,870\nI would have to reset the OSPF process\non his system and probably the BDR.\n\n972\n00:52:22,940 --> 00:52:28,280\nIf we don't care which router it is,\nthen we can just leave it be.\n\n973\n00:52:28,280 --> 00:52:29,650\nWhich is what I would normally do.\n\n974\n00:52:29,650 --> 00:52:35,250\nAll right, so if I take a look here,\nif I do a show IP OSPF neighbor.\n\n975\n00:52:35,250 --> 00:52:41,910\nI'm on my switch, and I show Ronnie as\nID one and I show that he is the DR.\n\n976\n00:52:41,910 --> 00:52:47,600\nAnd if we look at it from his perspective,\nhere it is from his perspective.\n\n977\n00:52:47,600 --> 00:52:52,370\nHe sees me as the backup, the BDR,\ncuz I'm the second host on this network.\n\n978\n00:52:52,370 --> 00:52:53,345\nSo I'm the back up and\n\n979\n00:52:53,345 --> 00:52:58,020\nI'm there, If i want to change that\nI can just reset his OSPF process.\n\n980\n00:52:59,030 --> 00:53:03,740\nNot like that but like this,\n\n981\n00:53:03,740 --> 00:53:07,670\nclear IP OSPF process.\n\n982\n00:53:07,670 --> 00:53:09,504\nGot to spell it right, there we go.\n\n983\n00:53:09,504 --> 00:53:14,520\nAnd so that's gonna drop all his routes,\ngonna drop the adjacencies.\n\n984\n00:53:14,520 --> 00:53:16,450\nI didn't do a terminal monitor so\nI can't see that.\n\n985\n00:53:18,360 --> 00:53:22,711\nBut it is happening\n>> It's done.\n\n986\n00:53:22,711 --> 00:53:28,086\n>> And so now, when it comes up,\n>> [LAUGH] If I can type, there we go.\n\n987\n00:53:28,086 --> 00:53:32,022\nNow I show him as the BDR, and\n\n988\n00:53:32,022 --> 00:53:38,280\nif I drop back to him,\nhe shows me at the DR.\n\n989\n00:53:38,280 --> 00:53:39,840\nAll right, so it's non-preemptive.\n\n990\n00:53:39,840 --> 00:53:42,160\nWe will not take the DR\nrole from somebody else.\n\n991\n00:53:43,490 --> 00:53:44,940\n>> Yeah.\n>> All right,\n\n992\n00:53:44,940 --> 00:53:49,020\nwell we didn't see DR other because\nI don't have a third system on here.\n\n993\n00:53:49,020 --> 00:53:50,260\nIf I brought up a third router,\n\n994\n00:53:50,260 --> 00:53:53,190\nwe'd see DR other which is somebody\nwho is just not participating.\n\n995\n00:53:53,190 --> 00:53:55,780\nThey only send updates from themselves.\n\n996\n00:53:55,780 --> 00:53:57,600\nBut is just a member of that network.\n\n997\n00:53:57,600 --> 00:53:59,890\nSo important to remember\nthose three states and\n\n998\n00:53:59,890 --> 00:54:02,940\nI kind of wrote them here in my notes,\nwhich I'll post at the end of the show.\n\n999\n00:54:02,940 --> 00:54:06,490\nSo we've got DR, BDR, DROTHER,\nthose are our three states and\n\n1000\n00:54:06,490 --> 00:54:09,220\nkind of how they\nparticipate inside of that.\n\n1001\n00:54:09,220 --> 00:54:09,960\nInside of that network.\n\n1002\n00:54:09,960 --> 00:54:11,860\nAnd so those are the four that we'll see.\n\n1003\n00:54:11,860 --> 00:54:17,600\nNow notice when I did DR or other that I\nput their connection state as two way.\n\n1004\n00:54:17,600 --> 00:54:21,600\nTheir two way connected to the other\nneighbors that are out there.\n\n1005\n00:54:21,600 --> 00:54:23,490\nThey're not actually sending\nupdates to them though.\n\n1006\n00:54:23,490 --> 00:54:26,900\nWe only have a full ajacency\nwith the DR and BDR.\n\n1007\n00:54:26,900 --> 00:54:30,000\nThe DR others we know\nthey're there we see them..\n\n1008\n00:54:30,000 --> 00:54:31,490\nBut we don't exchange routes with them and\n\n1009\n00:54:31,490 --> 00:54:35,540\nthat's why they get a two way\nstatus instead of a full.\n\n1010\n00:54:35,540 --> 00:54:37,750\nSo definitely stuff to remember for\nthe exam.\n\n1011\n00:54:39,410 --> 00:54:43,400\nAll right, so Ronnie, this is probably\na pretty good spot to stop for break.\n\n1012\n00:54:43,400 --> 00:54:44,920\nYou got anything else to throw in on that.\n\n1013\n00:54:44,920 --> 00:54:48,100\n>> Nope,\nI think we're almost ready to go into\n\n1014\n00:54:48,100 --> 00:54:50,310\nthings like LSA types just in a moment.\n\n1015\n00:54:50,310 --> 00:54:50,961\n>> Sweet.\n\n1016\n00:54:50,961 --> 00:54:51,461\n>> Yeah.\n\n1017\n00:54:51,461 --> 00:54:52,920\n>> LSA types,\neverybody's favorite thing to learn about.\n\n1018\n00:54:52,920 --> 00:54:53,628\n>> Yes.\n\n1019\n00:54:53,628 --> 00:54:54,420\n>> All right.\nWell\n\n1020\n00:54:54,420 --> 00:54:56,580\nas exciting as that is we do\nhave to wait to after the break.\n\n1021\n00:54:56,580 --> 00:54:57,310\nSo, let's stop here.\n\n1022\n00:54:57,310 --> 00:54:58,450\nWe'll take a few minutes break.\n\n1023\n00:54:58,450 --> 00:55:01,920\nWhen we get back,\nmore CCNA action, after this.\n\n1024\n00:55:01,920 --> 00:55:09,836\n[MUSIC]\n\n1025\n00:55:09,836 --> 00:55:12,320\n[LAUGH] All right, welcome back everybody.\n\n1026\n00:55:12,320 --> 00:55:16,699\nSo we've basically been looking at some of\nthe basic configurations of OSPF and we\n\n1027\n00:55:16,699 --> 00:55:21,086\nhaven't really shown you anything so far\nthat we didn't cover in this CCNT show.\n\n1028\n00:55:21,086 --> 00:55:23,620\nThe basic configuration's\npretty straightforward.\n\n1029\n00:55:23,620 --> 00:55:24,270\nRight?\n\n1030\n00:55:24,270 --> 00:55:29,530\nBut what I want to talk about now,\nis beyond what we went into in CCNT and\n\n1031\n00:55:29,530 --> 00:55:33,350\nis actually one of the complex or\nmore challenging things to understand.\n\n1032\n00:55:34,650 --> 00:55:35,940\nWe mention LSA's.\n\n1033\n00:55:35,940 --> 00:55:38,150\nLSA's are link state announcements and\n\n1034\n00:55:38,150 --> 00:55:40,235\nthey're messages that we\nsend between the routers.\n\n1035\n00:55:40,235 --> 00:55:44,779\nNow the only one that we've really\ntalked about so far are type one LSA's.\n\n1036\n00:55:44,779 --> 00:55:47,873\nThere's actually 11 different\ntypes of LSA's and don't worry,\n\n1037\n00:55:47,873 --> 00:55:49,751\nyou don't have to memorize 11 of them.\n\n1038\n00:55:49,751 --> 00:55:53,914\nThere's really only four that we truly\ncare about here on the CCNA side.\n\n1039\n00:55:53,914 --> 00:55:57,577\nBut that first one, the type one LSA,\nthat's the hello message.\n\n1040\n00:55:57,577 --> 00:55:59,550\nIt's a router ID message.\n\n1041\n00:55:59,550 --> 00:56:01,960\nIt's the routers announcing\nthat they exist and\n\n1042\n00:56:01,960 --> 00:56:06,140\nit's how our routers find each other and\nstart to build their adjacencies.\n\n1043\n00:56:06,140 --> 00:56:07,060\nAlright?\n\n1044\n00:56:07,060 --> 00:56:13,120\nOnce the adjacencies are up,\nthen we start to exchange type two LSA's.\n\n1045\n00:56:13,120 --> 00:56:15,520\nAnd type two LSA's those\nare the network announcements.\n\n1046\n00:56:15,520 --> 00:56:17,650\nThat's where we say hey I know\nabout this network do you know\n\n1047\n00:56:17,650 --> 00:56:19,070\nabout this network, right?\n\n1048\n00:56:19,070 --> 00:56:25,200\nAnd that's what's happening on\nan ongoing basis Inside of OSPF.\n\n1049\n00:56:25,200 --> 00:56:27,890\n>> Now, right now the only type of\nconfiguration that we've done is what we\n\n1050\n00:56:27,890 --> 00:56:30,930\ncall a single area OSPF type of network.\n\n1051\n00:56:30,930 --> 00:56:35,020\nAnd that means all of the actual\ndevices or all the routers are actually\n\n1052\n00:56:35,020 --> 00:56:39,460\nwithin that one administrative\nmanagement kind of area for us.\n\n1053\n00:56:39,460 --> 00:56:43,210\nBut usually OSPF is run when\nwe have multiple areas.\n\n1054\n00:56:43,210 --> 00:56:46,270\nAnd when we start talking about the idea\nof [INAUDIBLE] that's when we start\n\n1055\n00:56:46,270 --> 00:56:50,203\nseeing the power of OSPF\nreally coming into play.\n\n1056\n00:56:50,203 --> 00:56:53,840\n>> Now when we look at OSPF with\nthe configuration that we've done,\n\n1057\n00:56:53,840 --> 00:56:56,330\nwe don't really know about the LSA type.\n\n1058\n00:56:56,330 --> 00:56:58,460\nSo for example,\nlet's jump over to my machine here,\n\n1059\n00:56:58,460 --> 00:57:00,540\nand I've got my switch pulled up.\n\n1060\n00:57:00,540 --> 00:57:02,330\nAnd here I see Ronnie, right?\n\n1061\n00:57:02,330 --> 00:57:06,540\nSo he's the BDR, I'm the designated\nrouter, we're both in area 999, right?\n\n1062\n00:57:06,540 --> 00:57:08,530\nSo that's the area that we're in.\n\n1063\n00:57:08,530 --> 00:57:09,940\nThere's a neat command you can run.\n\n1064\n00:57:09,940 --> 00:57:13,060\nWell let me start off with something\nsimple, like show IP route, right?\n\n1065\n00:57:13,060 --> 00:57:17,040\nSo I see that I'm learning\nOSPF routes from Ronnie.\n\n1066\n00:57:17,040 --> 00:57:22,170\nDoesn't say anything about LSA types and\nif I do a show IP protocols,right?\n\n1067\n00:57:22,170 --> 00:57:25,762\nI can see that I'm running\nOSPF that I know about Ronny.\n\n1068\n00:57:25,762 --> 00:57:27,190\nHave learnt about these networks.\n\n1069\n00:57:27,190 --> 00:57:29,910\nAgain, nothing about LSAs, right?\n\n1070\n00:57:29,910 --> 00:57:35,530\nBut if I do: show IP OSPF database.\n\n1071\n00:57:35,530 --> 00:57:37,180\nWait, topology, shoot.\n\n1072\n00:57:37,180 --> 00:57:39,531\n>> Nope that's not-\n>> Did oh gosh I was right the first time.\n\n1073\n00:57:39,531 --> 00:57:42,860\n>> Yep. [LAUGH] >> So\nI get it confused with EIGRP sometimes.\n\n1074\n00:57:42,860 --> 00:57:45,220\nShow IP OSPF database.\n\n1075\n00:57:45,220 --> 00:57:48,780\nThat will show us the database\nthat OSPF is storing,\n\n1076\n00:57:48,780 --> 00:57:51,200\nthat is how it maps out the network.\n\n1077\n00:57:51,200 --> 00:57:55,900\nIn OSPF, every router knows about all\nthe other routers in the area, knows they\n\n1078\n00:57:55,900 --> 00:58:00,620\nexist, and knows about their networks and\nit does it through the exchanging of LSAs.\n\n1079\n00:58:00,620 --> 00:58:05,280\nAnd so in here I can see I've\ngot router link states and\n\n1080\n00:58:05,280 --> 00:58:07,330\nI've got network link states.\n\n1081\n00:58:07,330 --> 00:58:10,840\nRouter link states are type one LSAs.\n\n1082\n00:58:10,840 --> 00:58:14,800\nI know about Ronnie, and\nI know about myself, alright?\n\n1083\n00:58:14,800 --> 00:58:18,990\nNetwork link states are networks\nthat I've been taught about and\n\n1084\n00:58:18,990 --> 00:58:20,610\nI've been learning those from.\n\n1085\n00:58:20,610 --> 00:58:23,858\nWell in this case, I see myself\nhere as the advertising router for\n\n1086\n00:58:23,858 --> 00:58:26,840\n192.168 zero and then other networks.\n\n1087\n00:58:26,840 --> 00:58:29,830\nWhich actually 192.168.40 should turn up.\n\n1088\n00:58:30,940 --> 00:58:33,760\nOh it's trimming it because\nwe're exchanging [INAUDIBLE].\n\n1089\n00:58:33,760 --> 00:58:36,860\nBut we can see those types\nof designations there.\n\n1090\n00:58:36,860 --> 00:58:39,220\nSo type one LSAs, type two LSAs.\n\n1091\n00:58:40,660 --> 00:58:42,600\nRouters versus networks.\n\n1092\n00:58:42,600 --> 00:58:44,740\nWhat about type three LSAs.\n\n1093\n00:58:44,740 --> 00:58:48,920\nWell type three LSAs are what\nare called summary LSAs.\n\n1094\n00:58:48,920 --> 00:58:50,220\nThey're where we summarize or\n\n1095\n00:58:50,220 --> 00:58:54,660\ncombine multiple networks into a single\nnetwork to advertise them out.\n\n1096\n00:58:54,660 --> 00:58:57,100\nIn most networks we don't use that, right?\n\n1097\n00:58:57,100 --> 00:59:01,570\nIn most small, medium, even a lot of\nlarge networks you just don't have so\n\n1098\n00:59:01,570 --> 00:59:04,140\nmany routes that your routing\ntable is gigantic right.\n\n1099\n00:59:04,140 --> 00:59:06,300\nOn the internet they're used all the time.\n\n1100\n00:59:06,300 --> 00:59:09,360\nBut on private networks we\ndon't see it that much.\n\n1101\n00:59:09,360 --> 00:59:11,410\nBut if you have a big network,\n\n1102\n00:59:11,410 --> 00:59:16,080\nyou can end up in a situation where\nyou're processing too many type one LSAs.\n\n1103\n00:59:16,080 --> 00:59:19,020\nThere's too many routers out there for\nyou to deal with.\n\n1104\n00:59:19,020 --> 00:59:22,410\nAnd the routes that you learn, there's\njust too many for you to keep up with.\n\n1105\n00:59:22,410 --> 00:59:25,610\nYour network's never able\nto properly converge.\n\n1106\n00:59:25,610 --> 00:59:30,400\nIn a scenario not like that we might\nchoose to divide our network up\n\n1107\n00:59:30,400 --> 00:59:31,852\ninto multiple areas.\n\n1108\n00:59:31,852 --> 00:59:32,810\nAll right?\n\n1109\n00:59:32,810 --> 00:59:35,290\nAnd an area is just a number, right?\n\n1110\n00:59:35,290 --> 00:59:39,495\nSo we chose area 999,\njust a number picked it up out of our hat.\n\n1111\n00:59:39,495 --> 00:59:42,020\nRight?\nIt can be anything from zero all\n\n1112\n00:59:42,020 --> 00:59:45,680\nthe way up to,doesn't it go to\nlike 4.3 billion or something?\n\n1113\n00:59:45,680 --> 00:59:47,100\n>> I think so.\n>> Something ridiculous.\n\n1114\n00:59:47,100 --> 00:59:50,527\nSo your area numbers can be\nridiculously large if you want.\n\n1115\n00:59:50,527 --> 00:59:52,440\nBut normally we keep them pretty small.\n\n1116\n00:59:52,440 --> 00:59:56,720\nAnd basically we kind of lay\nout our network with it.\n\n1117\n00:59:56,720 --> 00:59:58,540\nArea numbers are just numbers.\n\n1118\n00:59:58,540 --> 01:00:00,570\nThere's only one that's special.\n\n1119\n01:00:00,570 --> 01:00:02,250\nAnd that's area zero.\n\n1120\n01:00:02,250 --> 01:00:05,010\nArea zero is what's called\nyour backbone area.\n\n1121\n01:00:06,080 --> 01:00:12,090\nTraffic is only allowed to pass\nfrom one area to area zero,\n\n1122\n01:00:12,090 --> 01:00:13,890\nor from area zero to another area.\n\n1123\n01:00:13,890 --> 01:00:17,210\nIt's not allowed to pass\nbetween two non-zero areas.\n\n1124\n01:00:17,210 --> 01:00:20,760\nLet me explain that a little better\nbecause that gets kind of confusing.\n\n1125\n01:00:20,760 --> 01:00:25,126\nLet's say that I design my network and\n\n1126\n01:00:25,126 --> 01:00:29,090\nI have area one and I have area two.\n\n1127\n01:00:30,770 --> 01:00:34,020\nAnd I divide my network up like this.\n\n1128\n01:00:34,020 --> 01:00:40,555\nLet's say that I come in here and\nI say that these guys are our area\n\n1129\n01:00:40,555 --> 01:00:46,135\none and\nI say that these guys are area two.\n\n1130\n01:00:46,135 --> 01:00:47,055\nOkay.\n\n1131\n01:00:47,055 --> 01:00:49,845\nNotice what I did to router number two,\nI cut it in half.\n\n1132\n01:00:49,845 --> 01:00:53,900\nHalf of router two is in area one,\nhalf of router two is in area two.\n\n1133\n01:00:53,900 --> 01:00:55,620\nYou can do that.\n\n1134\n01:00:55,620 --> 01:00:58,170\nSPF when you have a router\nthat's sitting in between areas,\n\n1135\n01:00:58,170 --> 01:01:00,160\nit's called a border router.\n\n1136\n01:01:00,160 --> 01:01:02,250\nOr an ABR, an area border router.\n\n1137\n01:01:02,250 --> 01:01:06,005\nLet me add that to our notes.\n\n1138\n01:01:08,620 --> 01:01:16,160\nSo we have ABRs,\nwhich are Area Border Routers,\n\n1139\n01:01:16,160 --> 01:01:20,490\nthey sit in between two different\nareas in your environment.\n\n1140\n01:01:20,490 --> 01:01:21,820\nYou can also have ASBR,\n\n1141\n01:01:21,820 --> 01:01:24,990\nthese won't show up on the exam,\n>> Autonomous Border Routers.\n\n1142\n01:01:26,470 --> 01:01:26,970\n>> If I can spell it.\n\n1143\n01:01:32,380 --> 01:01:33,340\nThere we go.\n\n1144\n01:01:33,340 --> 01:01:34,820\nAutonomous System Border Routers.\n\n1145\n01:01:34,820 --> 01:01:38,770\nThese are ones that sit in-between\nyour organization and somebody else.\n\n1146\n01:01:38,770 --> 01:01:40,340\nRight?\nAnd an external third party or\n\n1147\n01:01:40,340 --> 01:01:41,960\nthe internet, or whatever.\n\n1148\n01:01:41,960 --> 01:01:44,020\nYou are your own autonomous system.\n\n1149\n01:01:44,020 --> 01:01:46,660\nThis is between you and that other world.\n\n1150\n01:01:46,660 --> 01:01:52,240\nSo when we go between areas though,\nwe just have area border routers, or ABR.\n\n1151\n01:01:52,240 --> 01:01:55,220\nRouter two in this scenario\nwould in theory would be an ABR,\n\n1152\n01:01:55,220 --> 01:01:56,550\nnow it actually isn't.\n\n1153\n01:01:56,550 --> 01:02:01,630\nAnd that's because area one and area two\nare not allowed to talk to each other.\n\n1154\n01:02:01,630 --> 01:02:02,430\nRight?\n>> Right.\n\n1155\n01:02:02,430 --> 01:02:08,260\n>> In OSPF,\nareas can only talk to area zero, right?\n\n1156\n01:02:08,260 --> 01:02:11,936\nSo if I redesigned my network,\nlet me redesign this a little bit.\n\n1157\n01:02:13,931 --> 01:02:17,450\nSo then I had area one,\nthat'll be my red area.\n\n1158\n01:02:17,450 --> 01:02:23,370\nAnd then maybe I had area two,\nthat'll be my blue network.\n\n1159\n01:02:24,380 --> 01:02:30,990\nAnd then maybe I have, this is going\nto be kind of hard to draw, area zero.\n\n1160\n01:02:30,990 --> 01:02:33,690\nLet me extend that out a little bit, oops.\n\n1161\n01:02:33,690 --> 01:02:34,190\nMaybe too far.\n\n1162\n01:02:37,860 --> 01:02:39,170\nLike that.\n\n1163\n01:02:39,170 --> 01:02:43,830\nThis will be area zero, all right?\n\n1164\n01:02:43,830 --> 01:02:44,810\nArea zero.\n\n1165\n01:02:44,810 --> 01:02:48,420\nNotice how router two and\nrouter three are in area zero.\n\n1166\n01:02:48,420 --> 01:02:51,332\nArea zero is called the backbone area.\n\n1167\n01:02:51,332 --> 01:02:52,270\nAll right?\n\n1168\n01:02:52,270 --> 01:02:55,490\nThat means that traffic\nis going to be allowed to\n\n1169\n01:02:55,490 --> 01:03:00,200\npass from area one, into area zero.\n\n1170\n01:03:01,230 --> 01:03:07,490\nAnd traffic is gonna be allowed to pass\nfrom area two into area zero, all right?\n\n1171\n01:03:07,490 --> 01:03:14,000\nBut traffic will not be allowed to pass\nstraight from area one to area two.\n\n1172\n01:03:14,000 --> 01:03:15,800\nIt can't go straight between them.\n\n1173\n01:03:15,800 --> 01:03:18,760\nThey're separate areas and\nthey're not connected.\n\n1174\n01:03:18,760 --> 01:03:19,320\nAlright.\n\n1175\n01:03:19,320 --> 01:03:21,330\nAnd that's kind of confusing but\n\n1176\n01:03:21,330 --> 01:03:25,240\nwhat we're doing with the areas is we're\ndividing up our network to make it smaller\n\n1177\n01:03:25,240 --> 01:03:29,940\nand area zero becomes this transit network\nwhere your traffic passes through it.\n\n1178\n01:03:29,940 --> 01:03:31,920\nSo the idea is that if you\nhave a campus network and\n\n1179\n01:03:31,920 --> 01:03:36,480\nyou've got five buildings, each building\nmight be its own area and then they tie up\n\n1180\n01:03:36,480 --> 01:03:39,990\nto a central core somewhere, and\nthat core might be area zero.\n\n1181\n01:03:39,990 --> 01:03:42,620\nAlright, now why would we do that?\n\n1182\n01:03:42,620 --> 01:03:44,930\nWell, this diagram isn't going to show us.\n\n1183\n01:03:44,930 --> 01:03:47,150\nLet me get a different diagram.\n\n1184\n01:03:49,110 --> 01:03:51,360\nIf I had a really big network.\n\n1185\n01:03:51,360 --> 01:03:51,940\nOkay?\n\n1186\n01:03:51,940 --> 01:03:54,138\nIf I had tons of routers.\n\n1187\n01:03:54,138 --> 01:03:59,843\nSo if I had many, many, many routers that\nwere out there and they were connected,\n\n1188\n01:03:59,843 --> 01:04:04,557\nmaybe by buildings Maybe these\nare different physical locations or\n\n1189\n01:04:04,557 --> 01:04:05,976\nwhatever, right?\n\n1190\n01:04:05,976 --> 01:04:10,793\nThat what I might do is,\nif these were all physically connected.\n\n1191\n01:04:13,168 --> 01:04:17,183\nThrough whatever, based on whatever\ntype of building this is, or\n\n1192\n01:04:17,183 --> 01:04:20,280\nwhatever, you might have\nfull mesh connections.\n\n1193\n01:04:20,280 --> 01:04:23,520\nYou might have partial mesh,\nor whatever, and\n\n1194\n01:04:23,520 --> 01:04:27,205\nthey all connect to a central\nlocation like this, right?\n\n1195\n01:04:27,205 --> 01:04:28,030\n>> Mm-hm.\n\n1196\n01:04:28,030 --> 01:04:30,600\n>> When a change happens on the network,\n\n1197\n01:04:30,600 --> 01:04:34,380\nin OSPF, every router knows\nabout every other router.\n\n1198\n01:04:34,380 --> 01:04:35,060\nRight?\n\n1199\n01:04:35,060 --> 01:04:37,710\nAnd so that notification that\nthe network has gone away.\n\n1200\n01:04:37,710 --> 01:04:40,820\nIt's gotta propagate\nacross the whole network.\n\n1201\n01:04:40,820 --> 01:04:44,220\nBut if we divide\nthe network up into areas,\n\n1202\n01:04:44,220 --> 01:04:48,470\nwhen we slice it up like\nthis into separate areas.\n\n1203\n01:04:48,470 --> 01:04:51,390\nNow when a change occurs on the network,\n\n1204\n01:04:51,390 --> 01:04:55,160\nthe change is restricted to\nthe area in which it occurred.\n\n1205\n01:04:55,160 --> 01:04:56,970\nAnd by doing it this way,\n\n1206\n01:04:56,970 --> 01:05:01,350\nwe can ensure that a little change\nhappening in one of my buildings\n\n1207\n01:05:01,350 --> 01:05:04,970\ndoesn't cause every router across\nthe entire company to get an update.\n\n1208\n01:05:04,970 --> 01:05:09,440\nBecause when they get an update, OSPF runs\nits shortest path first algorithm and\n\n1209\n01:05:09,440 --> 01:05:11,930\nit has to re-run that\nmathematical algorithm and\n\n1210\n01:05:11,930 --> 01:05:16,840\nthat takes up processor power,\nit creates a bit of a performance issue.\n\n1211\n01:05:16,840 --> 01:05:20,770\nSo areas are simply a way of\nreducing the impact on our routers,\n\n1212\n01:05:20,770 --> 01:05:22,720\nof having a large network.\n\n1213\n01:05:22,720 --> 01:05:25,530\nNow, on the CC&A exam,\nyou're not dealing with large networks,\n\n1214\n01:05:25,530 --> 01:05:27,570\nyou're dealing with five routers.\n\n1215\n01:05:27,570 --> 01:05:31,380\nSo, you have absolutely no need for\nmulti-area communications, all right.\n\n1216\n01:05:31,380 --> 01:05:33,650\nBut, they want you to be\naware of the concept,\n\n1217\n01:05:33,650 --> 01:05:36,249\nof the idea,\nnot necessarily the configuration.\n\n1218\n01:05:38,470 --> 01:05:41,150\nThat being said Ronnie why don't\nwe show them the configuration.\n\n1219\n01:05:41,150 --> 01:05:43,200\n>> Sure.\n>> The configuration is not hard the thing\n\n1220\n01:05:43,200 --> 01:05:48,730\nyou have to remember is that routers\ntheir areas are assigned per interface.\n\n1221\n01:05:48,730 --> 01:05:50,505\nSo when you have a border router,\n\n1222\n01:05:50,505 --> 01:05:52,815\nthe border router is actually\nsitting on the border.\n\n1223\n01:05:52,815 --> 01:05:54,065\nNot like I've drawn here.\n\n1224\n01:05:54,065 --> 01:05:57,095\nLet me redo this drawing so\nit's a little more accurate.\n\n1225\n01:05:57,095 --> 01:06:03,385\nThe areas would actually stop halfway\nthrough this border router, right?\n\n1226\n01:06:03,385 --> 01:06:05,765\nSo it would be a little more like that.\n\n1227\n01:06:05,765 --> 01:06:11,370\nAnd area zero would actually expand\nto encompass the network like that.\n\n1228\n01:06:11,370 --> 01:06:18,170\nSo that my border routers are in between\nthose two areas versus this router here.\n\n1229\n01:06:18,170 --> 01:06:19,330\nThis should be a backbone router.\n\n1230\n01:06:19,330 --> 01:06:21,110\nIt's entirely in area zero.\n\n1231\n01:06:21,110 --> 01:06:22,990\n>> Yeah, this is a great point for\nus to remember.\n\n1232\n01:06:22,990 --> 01:06:26,650\nArea border routers will always\nhave interfaces in at least two\n\n1233\n01:06:26,650 --> 01:06:27,460\ndifferent areas.\n\n1234\n01:06:28,480 --> 01:06:30,420\nOne at least in area zero.\n\n1235\n01:06:30,420 --> 01:06:32,380\nAnd the other ones may be\nin actually oh there it is.\n\n1236\n01:06:32,380 --> 01:06:35,940\nAnd they don't always have\nto be just two areas here.\n\n1237\n01:06:35,940 --> 01:06:40,360\nYou may actually have interfaces that\nactually extend to more than two but\n\n1238\n01:06:40,360 --> 01:06:43,380\none is always an area zero and\nthe other ones are not.\n\n1239\n01:06:43,380 --> 01:06:49,850\nSo for us here, this is where we\ntend to get that type three LSA.\n\n1240\n01:06:49,850 --> 01:06:54,900\nBeing able to be sent\ninto the area zero here.\n\n1241\n01:06:56,290 --> 01:06:58,650\n>> I mentioned the summaries.\n\n1242\n01:06:58,650 --> 01:07:00,870\nBut I didn't really show\nan example of them, did I?\n\n1243\n01:07:00,870 --> 01:07:01,990\n>> Right.\n\n1244\n01:07:01,990 --> 01:07:03,880\n>> They don't have a cool abbreviation for\nthis one.\n\n1245\n01:07:03,880 --> 01:07:05,150\nIt would just be called\na back bone router,\n\n1246\n01:07:05,150 --> 01:07:06,930\nbecause it's entirely in area zero.\n\n1247\n01:07:06,930 --> 01:07:09,875\nFor example, let me give you guys\nan example of how summaries work.\n\n1248\n01:07:09,875 --> 01:07:11,611\nOkay?\nI might have,\n\n1249\n01:07:11,611 --> 01:07:16,700\nlet's say that my network\nwas laid out like this.\n\n1250\n01:07:16,700 --> 01:07:19,090\nThat these are three different buildings.\n\n1251\n01:07:19,090 --> 01:07:19,930\nOkay.\n\n1252\n01:07:19,930 --> 01:07:26,013\nAnd in building one,\nmaybe I have 172.16.0.0/24,\n\n1253\n01:07:26,013 --> 01:07:30,040\nor no, let's go /16 it'll be a class B.\n\n1254\n01:07:33,380 --> 01:07:36,170\nBecause I don't want to do math.\n\n1255\n01:07:36,170 --> 01:07:42,504\nAnd in my second building,\nmaybe I've got 172.16.1.0.\n\n1256\n01:07:42,504 --> 01:07:48,450\nNo.\nLet's go .17.00/16 like this.\n\n1257\n01:07:48,450 --> 01:07:52,420\nSo these are two different\nclass B networks.\n\n1258\n01:07:52,420 --> 01:07:54,160\nAnd then for all my little networks,\n\n1259\n01:07:54,160 --> 01:07:56,570\nspread out throughout the building here,\nright?\n\n1260\n01:07:56,570 --> 01:07:59,370\nSo these are networks that\nare gonna be smaller, and\n\n1261\n01:07:59,370 --> 01:08:03,720\nmaybe these will just be Class Cs\nbuilt under that umbrella.\n\n1262\n01:08:04,920 --> 01:08:06,420\nSo I might have like 1.0/24.\n\n1263\n01:08:06,420 --> 01:08:10,470\nAnd this is gonna get really\nhard to read isn't it?\n\n1264\n01:08:10,470 --> 01:08:12,950\nIs there some way I can\ngive it a white background?\n\n1265\n01:08:12,950 --> 01:08:14,065\nThat would be really convenient.\n\n1266\n01:08:14,065 --> 01:08:18,370\n[LAUGH] No,\nI can change text colors and that's it.\n\n1267\n01:08:18,370 --> 01:08:21,718\nSo let me just kind of\npack this somewhere,\n\n1268\n01:08:21,718 --> 01:08:25,420\nsomewhere where it's at least legible.\n\n1269\n01:08:25,420 --> 01:08:28,930\nI might have a bunch of little\nnetworks that are over here right.\n\n1270\n01:08:28,930 --> 01:08:31,040\nAnd if you look at these networks and\n\n1271\n01:08:31,040 --> 01:08:34,984\nthink back to our\nsubnetting episodes right.\n\n1272\n01:08:34,984 --> 01:08:39,060\nThat 172.16.3.0, and 1.0 and 2.0.\n\n1273\n01:08:39,060 --> 01:08:43,260\nThose are all underneath\nthe 172.16 Class B.\n\n1274\n01:08:43,260 --> 01:08:47,420\nMaybe I've subnetted it out to\ncreate all these smaller networks.\n\n1275\n01:08:47,420 --> 01:08:51,040\nAnd these networks are attached to\nvarious routers that are over here.\n\n1276\n01:08:51,040 --> 01:08:52,560\nWho knows which router\nthey're attached to.\n\n1277\n01:08:52,560 --> 01:08:55,348\nThere just in different places.\n\n1278\n01:08:55,348 --> 01:09:01,510\nWell, if 172.16.2 were to fail, do I need\nto notify the whole company about it?\n\n1279\n01:09:01,510 --> 01:09:04,620\nNot really, so we can do a summary route.\n\n1280\n01:09:04,620 --> 01:09:08,640\nAnd on the border router, instead of\nadvertising all these little routes, it\n\n1281\n01:09:08,640 --> 01:09:13,300\ncan summarize it to this one big route, so\nthat it tells all these other buildings,\n\n1282\n01:09:13,300 --> 01:09:17,890\nhey, if you need to get\nto 172.16 dot whatever,\n\n1283\n01:09:17,890 --> 01:09:22,340\ncome through me, come through this area,\nmeanwhile the other areas are saying, hey,\n\n1284\n01:09:22,340 --> 01:09:25,320\nif you need to get to 172.17,\ncome through me.\n\n1285\n01:09:25,320 --> 01:09:29,960\nOr 172.18, come through me and so\nit specifies the particular area to go to,\n\n1286\n01:09:29,960 --> 01:09:33,490\nthose are summary routes and\nthey're LSA type 3's.\n\n1287\n01:09:33,490 --> 01:09:36,130\nWhen we create a border like this,\n\n1288\n01:09:36,130 --> 01:09:41,480\nwhat we're doing is we're saying do\nnot send type 1 and type 2 LSA's.\n\n1289\n01:09:41,480 --> 01:09:43,090\nJust send type 3.\n\n1290\n01:09:43,090 --> 01:09:45,370\nJust send these summaries, right?\n\n1291\n01:09:45,370 --> 01:09:47,040\nAnd so that's the big difference.\n\n1292\n01:09:47,040 --> 01:09:50,270\nThat's how we know how to separate\nthem out, is by these LSA types and\n\n1293\n01:09:50,270 --> 01:09:51,250\nwhy they're so valuable.\n\n1294\n01:09:51,250 --> 01:09:51,920\n>> Yeah.\n\n1295\n01:09:51,920 --> 01:09:56,550\nIf we don't have this summary\nLSA on that backbone router,\n\n1296\n01:09:56,550 --> 01:09:59,890\nwe would see so many of those type 1's.\n\n1297\n01:09:59,890 --> 01:10:03,090\nThat it could over flood\nthat from every single area.\n\n1298\n01:10:03,090 --> 01:10:05,820\nSo by being able at the area\nborder routers here to\n\n1299\n01:10:05,820 --> 01:10:10,420\njust send these type 3 summaries, it makes\nit very easy on the back bone router\n\n1300\n01:10:10,420 --> 01:10:13,660\nto route between all 3 of those areas\neven though there could be hundreds,\n\n1301\n01:10:13,660 --> 01:10:15,720\nmaybe even thousands of\nnetworks behind those.\n\n1302\n01:10:15,720 --> 01:10:16,490\n>> Yeah.\n\n1303\n01:10:16,490 --> 01:10:21,890\nSo let me show you as an example of that,\nI'm gonna connect to our other device.\n\n1304\n01:10:21,890 --> 01:10:26,320\nWe've got a third device, switch 3,\nsitting here in the background.\n\n1305\n01:10:26,320 --> 01:10:32,454\nAnd let me just keep connecting to it,\nand it, whoops, should be 1.3.\n\n1306\n01:10:32,454 --> 01:10:36,251\n[LAUGH] Hello.\n\n1307\n01:10:36,251 --> 01:10:38,508\nCome here.\n\n1308\n01:10:38,508 --> 01:10:42,630\nThe reason I'm connecting it into, and\nbasically, it's not running OSPF yet, so\n\n1309\n01:10:42,630 --> 01:10:44,130\nI'm gonna need to bring it up.\n\n1310\n01:10:44,130 --> 01:10:44,870\nAnd Ronnie.\n\n1311\n01:10:44,870 --> 01:10:45,810\n>> Maybe it's not.\n\n1312\n01:10:45,810 --> 01:10:46,900\n>> Maybe can you console into it.\n\n1313\n01:10:46,900 --> 01:10:50,030\nAll right, so\nI'll leave that one be, but wait.\n\n1314\n01:10:50,030 --> 01:10:51,720\nAm I getting in there just slowly?\n\n1315\n01:10:53,530 --> 01:10:54,280\nSlowly but surely.\n\n1316\n01:10:54,280 --> 01:10:55,010\nAll right connection failed.\n\n1317\n01:10:55,010 --> 01:10:55,770\nAll right whatever.\n\n1318\n01:10:55,770 --> 01:10:57,900\nSo Ron if you can console into that one.\n\n1319\n01:10:59,010 --> 01:11:00,910\nRight now we've got area 999 and\n\n1320\n01:11:00,910 --> 01:11:05,210\nthat's gonna be a little bit of\na problem because if you're in area 999,\n\n1321\n01:11:05,210 --> 01:11:10,310\nwe can't exchange information between\n999 and another number other than zero.\n\n1322\n01:11:11,580 --> 01:11:16,200\nSo normally when we set up OSPF,\nwe set ourselves up to use area zero,\n\n1323\n01:11:16,200 --> 01:11:18,300\na single area, area zero.\n\n1324\n01:11:18,300 --> 01:11:21,750\nAnd then as your company grows, you can\nadd other areas to expand on it, and\n\n1325\n01:11:21,750 --> 01:11:23,680\nthings will work out great, right?\n\n1326\n01:11:23,680 --> 01:11:27,380\nBut for us, we started with 999, so\nI got a little bit of a problem.\n\n1327\n01:11:27,380 --> 01:11:31,240\nIf I bring up this other side with\na different area number other than zero,\n\n1328\n01:11:31,240 --> 01:11:33,450\nI won't be able to exchange\ninformation with it.\n\n1329\n01:11:33,450 --> 01:11:36,620\nSo we'll need to bring up one, or\nwe'll need to change these guys.\n\n1330\n01:11:36,620 --> 01:11:39,430\nLet's change these guys.\n\n1331\n01:11:39,430 --> 01:11:40,030\n>> Okay.\n\n1332\n01:11:40,030 --> 01:11:42,290\n>> All right, so let's do this.\n\n1333\n01:11:42,290 --> 01:11:44,530\nWell, I guess we've already got\nthat configuration in there so\n\n1334\n01:11:44,530 --> 01:11:46,170\nit'd be kind of a pain in the butt.\n\n1335\n01:11:46,170 --> 01:11:48,250\nWell let's not, let's leave it at 999.\n\n1336\n01:11:48,250 --> 01:11:52,610\nAnd what we'll do is we'll take\nswitch three and put it in area zero.\n\n1337\n01:11:52,610 --> 01:11:56,980\nSo go ahead and just add it into area\nzero and add all of it's interfaces.\n\n1338\n01:11:56,980 --> 01:11:58,860\nI guess it doesn't really have any\nother networks though does it?\n\n1339\n01:11:59,860 --> 01:12:03,371\nSo we'll need to add one.\n\n1340\n01:12:03,371 --> 01:12:04,208\nAll right.\n\n1341\n01:12:04,208 --> 01:12:06,327\nLet's switch over to Ronnie's machine.\n\n1342\n01:12:06,327 --> 01:12:07,395\nIf we can.\n\n1343\n01:12:07,395 --> 01:12:13,473\nAnd whoops,\nI'm just gonna click all over the place.\n\n1344\n01:12:13,473 --> 01:12:17,141\nSee if we can pull his up so\nwe can see what that's doing or\n\n1345\n01:12:17,141 --> 01:12:19,654\nif I guess I could try and get in again.\n\n1346\n01:12:30,437 --> 01:12:31,166\nWe got it?\nOh good.\n\n1347\n01:12:31,166 --> 01:12:33,800\nOkay, so here,\nRonnie is about to turn on OSPF.\n\n1348\n01:12:33,800 --> 01:12:37,320\nAnd he's basically just setting for\nthat .1 network,\n\n1349\n01:12:37,320 --> 01:12:39,830\nand he's gonna put it into area zero,\nright?\n\n1350\n01:12:39,830 --> 01:12:41,330\nSo he's going to be on area zero.\n\n1351\n01:12:41,330 --> 01:12:44,810\nAnd Ronnie, we need to create\nanother network on that machine.\n\n1352\n01:12:44,810 --> 01:12:48,320\nSo let's just do a loop back interface.\n\n1353\n01:12:48,320 --> 01:12:55,640\nGo into loop back zero and let's do\n172.16.0.0 and we'll do it as a Class B,\n\n1354\n01:12:55,640 --> 01:13:00,920\nor 0.1 sorry you're on interface.\n\n1355\n01:13:00,920 --> 01:13:02,559\nI'm giving you bad addresses.\n\n1356\n01:13:04,880 --> 01:13:06,450\n>> Class C?\n\n1357\n01:13:06,450 --> 01:13:08,220\n>> Do class B, we'll do the full B.\n\n1358\n01:13:08,220 --> 01:13:10,460\nSo if you've never worked\nwith loopback interfaces,\n\n1359\n01:13:10,460 --> 01:13:11,820\nthey're just virtual interfaces.\n\n1360\n01:13:11,820 --> 01:13:12,550\nYou can whip them up.\n\n1361\n01:13:12,550 --> 01:13:14,060\nThey're great for testing and practice.\n\n1362\n01:13:14,060 --> 01:13:16,130\nThey're not terribly useful in real life.\n\n1363\n01:13:16,130 --> 01:13:19,110\nWe'll use them for\nassigning OSPF router IDs sometimes.\n\n1364\n01:13:19,110 --> 01:13:22,680\nOr we'll use them for\nBGP peering and stuff, but\n\n1365\n01:13:22,680 --> 01:13:25,640\notherwise they're not terribly useful.\n\n1366\n01:13:25,640 --> 01:13:27,990\nSo he's just whipping one up here for\ntesting.\n\n1367\n01:13:27,990 --> 01:13:32,160\nAnd now that it's created,\ngo ahead and stick it into area zero.\n\n1368\n01:13:46,177 --> 01:13:52,850\nAll right, now on my switch, I'm gonna\njump over and add my interface into OSPF0.\n\n1369\n01:13:52,850 --> 01:13:55,081\nSo let's switch over to\nmy computer real quick.\n\n1370\n01:13:58,878 --> 01:14:02,354\nAnd let's see my connection\nto that one is what?\n\n1371\n01:14:02,354 --> 01:14:04,841\nFa0/2, I think.\n\n1372\n01:14:04,841 --> 01:14:08,570\n[LAUGH]\n>> Connection to?\n\n1373\n01:14:08,570 --> 01:14:09,930\n>> To the other switch.\n\n1374\n01:14:09,930 --> 01:14:10,610\n>> Yes.\n\n1375\n01:14:10,610 --> 01:14:11,740\n>> Okay, all right.\n\n1376\n01:14:11,740 --> 01:14:12,530\n>> Let me [INAUDIBLE].\n\n1377\n01:14:12,530 --> 01:14:14,310\n>> All right, so,\nI'm just gonna say, IP OSPF.\n\n1378\n01:14:14,310 --> 01:14:15,790\nLet's see.\n\n1379\n01:14:15,790 --> 01:14:16,830\nI did 100.\n\n1380\n01:14:16,830 --> 01:14:18,140\nArea zero.\n\n1381\n01:14:18,140 --> 01:14:20,150\nWhoops.\nIf I can spell area right.\n\n1382\n01:14:20,150 --> 01:14:20,770\nThere.\n\n1383\n01:14:20,770 --> 01:14:23,890\nAll right, so, I'm gonna bring\nthis connection up to area zero.\n\n1384\n01:14:23,890 --> 01:14:27,245\nNow, I'm gonna connect\nto the other switch.\n\n1385\n01:14:27,245 --> 01:14:28,875\nI'm gonna see it and actually hang out.\n\n1386\n01:14:28,875 --> 01:14:32,815\nLet me, I guess my desktop blanked out.\n\n1387\n01:14:32,815 --> 01:14:34,925\nSee if I can get that back up again.\n\n1388\n01:14:34,925 --> 01:14:35,995\nThere we go.\nAll right.\n\n1389\n01:14:35,995 --> 01:14:40,355\nSo I'm just adding that into area zero,\nand so I should get.\n\n1390\n01:14:40,355 --> 01:14:42,475\nActually, I don't know if I did\na terminal monitor command, so\n\n1391\n01:14:42,475 --> 01:14:43,855\nI might not see the message.\n\n1392\n01:14:43,855 --> 01:14:46,712\nBut it should come up pretty quickly\nthat I pair up with that other device.\n\n1393\n01:14:46,712 --> 01:14:55,726\n[SOUND] Just so\n\n1394\n01:14:55,726 --> 01:14:58,137\nI can see it.\n\n1395\n01:14:58,137 --> 01:14:59,031\nThere we go.\n\n1396\n01:14:59,031 --> 01:15:03,290\n192.168.1.3, that's the third switch,\nswitch 3.\n\n1397\n01:15:03,290 --> 01:15:06,130\nSo I can see it's the DR for\nthat connection.\n\n1398\n01:15:06,130 --> 01:15:10,170\nSo I can see it,\nI'm exchanging information with it.\n\n1399\n01:15:10,170 --> 01:15:12,880\nRonnie added that 172.16.0.0 network.\n\n1400\n01:15:12,880 --> 01:15:16,280\nAnd so if I look at my routing\ntable I should have it.\n\n1401\n01:15:16,280 --> 01:15:17,660\nAnd there it is.\n\n1402\n01:15:17,660 --> 01:15:20,200\nYep, so there it is and\nI learned it via OSPF.\n\n1403\n01:15:20,200 --> 01:15:22,540\nOkay, now when I look at that route,\n\n1404\n01:15:22,540 --> 01:15:26,740\nit doesn't look any different to\nme than any other route right.\n\n1405\n01:15:26,740 --> 01:15:32,540\nMy switch though is in area 999 and\narea zero, it's a border router.\n\n1406\n01:15:32,540 --> 01:15:35,020\nSo it's viewing those routes as local, but\n\n1407\n01:15:35,020 --> 01:15:37,600\nlet's see what happened\nover on the router.\n\n1408\n01:15:37,600 --> 01:15:38,320\nWhoops.\nLet's\n\n1409\n01:15:40,150 --> 01:15:42,690\nsee if I can make my\ncomputer really mad at me.\n\n1410\n01:15:42,690 --> 01:15:47,650\nSo on the other router it\nsees the 172.16 network but\n\n1411\n01:15:47,650 --> 01:15:51,890\nnotice on the left side, it's got OIA.\n\n1412\n01:15:51,890 --> 01:15:54,830\nIA means inter area.\n\n1413\n01:15:54,830 --> 01:15:57,621\nThis is a route that it\nlearned from another area,\n\n1414\n01:15:57,621 --> 01:16:00,190\nwhich means it learned\nit as I typed 3 LSA.\n\n1415\n01:16:00,190 --> 01:16:03,780\nAs another network out there as\na summary from another area.\n\n1416\n01:16:04,810 --> 01:16:07,790\nSo the routers are aware of this, and\nthey're using it to determine whether or\n\n1417\n01:16:07,790 --> 01:16:11,580\nnot we should build up things like\nneighbor relationships and peering and\n\n1418\n01:16:11,580 --> 01:16:14,300\nexchanging routes and all that good stuff.\n\n1419\n01:16:14,300 --> 01:16:20,440\nIf we learn our route from another area,\nwhen that route propagates from one side\n\n1420\n01:16:20,440 --> 01:16:25,200\nover into another one,\nit shows up as a type 3 LSA.\n\n1421\n01:16:25,200 --> 01:16:30,589\nAnd if I look at my database,\nif I look at my database.\n\n1422\n01:16:34,513 --> 01:16:35,710\nThere we go.\n\n1423\n01:16:35,710 --> 01:16:41,340\nNow I've got type 1 LSAs,\ntype 2 LSAs, and type 3 LSAs.\n\n1424\n01:16:41,340 --> 01:16:45,630\nSummary Net Link Advertisements and\nthere's that 172.16 right there.\n\n1425\n01:16:45,630 --> 01:16:49,140\nThere's the summary that I'm seeing\nthat I'm pulling from that other router\n\n1426\n01:16:49,140 --> 01:16:51,650\nto get into my database all right.\n\n1427\n01:16:51,650 --> 01:16:56,100\nSo the LSA types are important\nto know cuz it's part of how\n\n1428\n01:16:56,100 --> 01:17:00,340\nthe router knows what to forward along,\nwhat to keep, what to ditch and so on.\n\n1429\n01:17:00,340 --> 01:17:02,095\nAnd it's important to the OSPF process.\n\n1430\n01:17:02,095 --> 01:17:04,800\n>> Right.\n>> Now the other one we need to know for\n\n1431\n01:17:04,800 --> 01:17:06,760\nthe exam is a External LSA,\n\n1432\n01:17:06,760 --> 01:17:11,058\nwhich is a Type-5 LSA and\nI've added them to my little notes here.\n\n1433\n01:17:11,058 --> 01:17:16,080\nSo a Type-5 LSA is an external and that's\njust one that we learned from somebody\n\n1434\n01:17:16,080 --> 01:17:18,130\noutside of our OSPF autonomous system.\n\n1435\n01:17:18,130 --> 01:17:22,510\nSo, if we're connected up to a partner\nnetwork or whatever, and those will show\n\n1436\n01:17:22,510 --> 01:17:27,070\nup as either an O and then either an E1 or\nE2 to designate that they're external.\n\n1437\n01:17:28,650 --> 01:17:29,370\nAll right.\n\n1438\n01:17:29,370 --> 01:17:31,960\nNow, those are a little beyond\nthe scope of the CCNA exam.\n\n1439\n01:17:31,960 --> 01:17:34,680\nFor those of you that go on to do like\nCCNP route, you'll work with those a lot.\n\n1440\n01:17:34,680 --> 01:17:39,700\nBut for the CCNA exam, they just want you\nto be familiar with the idea of these.\n\n1441\n01:17:39,700 --> 01:17:41,690\nAnd not necessarily\nthe implementation of it.\n\n1442\n01:17:41,690 --> 01:17:45,920\nSo I wanted to show you guys on\nthe show a multi area implementation so\n\n1443\n01:17:45,920 --> 01:17:46,790\nyou could see that.\n\n1444\n01:17:46,790 --> 01:17:47,290\n>> Right.\n\n1445\n01:17:48,410 --> 01:17:53,150\n>> All right, so as far as our basic OSPF\nconfiguration and some of the other OSPF\n\n1446\n01:17:53,150 --> 01:17:58,510\nconcepts, we got to see the LSA types,\nwe got to see areas and multi area.\n\n1447\n01:17:58,510 --> 01:18:01,810\nWe talked a little bit about\nborder routers and ASBRs,\n\n1448\n01:18:01,810 --> 01:18:05,640\nsome complexities there with\nmulti-area implementations.\n\n1449\n01:18:05,640 --> 01:18:10,160\nI do have more that I wanna get into\non our OSPF configuration, and we\n\n1450\n01:18:10,160 --> 01:18:14,750\ndidn't even touch on OSPF for IP version\n6, which is in our exam objectives.\n\n1451\n01:18:15,990 --> 01:18:16,590\nBut you know Ronnie,\n\n1452\n01:18:16,590 --> 01:18:20,100\nI don't think we're gonna be able to\nget through all that in this show.\n\n1453\n01:18:20,100 --> 01:18:21,070\nSo why don't we do this?\n\n1454\n01:18:21,070 --> 01:18:21,830\nThis is my thought.\n\n1455\n01:18:21,830 --> 01:18:23,740\nWhy don't we go ahead and\nwrap the show here.\n\n1456\n01:18:23,740 --> 01:18:25,820\n>> Okay.\n>> And we'll do an OSPF part two.\n\n1457\n01:18:25,820 --> 01:18:26,340\n>> Yeah.\n\n1458\n01:18:26,340 --> 01:18:30,000\n>> And we'll dive into all\nthe other exciting OSPF stuff\n\n1459\n01:18:30,000 --> 01:18:31,270\nthat we didn't get to in this one.\n\n1460\n01:18:31,270 --> 01:18:31,880\n>> Sounds good.\n\n1461\n01:18:31,880 --> 01:18:34,680\n>> Cause we also need to do\ntroubleshooting and all that good stuff.\n\n1462\n01:18:34,680 --> 01:18:38,732\nSo, yeah, I think that's the way to go.\n\n1463\n01:18:38,732 --> 01:18:41,180\nAll right, you got anything else to\nthrow in on OSPF before we wrap it up?\n\n1464\n01:18:41,180 --> 01:18:46,540\n>> No, just remember, make sure you learn\nthese types as we go through this process.\n\n1465\n01:18:46,540 --> 01:18:51,690\nOSPF is one of the longer concepts that\nyou will have on the CCNA exam here.\n\n1466\n01:18:51,690 --> 01:18:55,460\nBe able to verify the configurations, use\nthose show commands that we were doing.\n\n1467\n01:18:55,460 --> 01:18:58,576\nSo practice is key and\npractice is perfect is what we have.\n\n1468\n01:18:58,576 --> 01:18:59,639\n>> [LAUGH]\n>> Yeah.\n\n1469\n01:18:59,639 --> 01:19:03,080\n>> All right, well ladies and gentlemen we\nare wrapping it up here remember as always\n\n1470\n01:19:03,080 --> 01:19:08,240\nif you have questions live during\nthe show you can go to itpro.tv/live,\n\n1471\n01:19:08,240 --> 01:19:10,480\nand you'll see the chat box\nright beneath the live video.\n\n1472\n01:19:10,480 --> 01:19:11,460\nYou can post your questions.\n\n1473\n01:19:11,460 --> 01:19:13,530\nWe monitor and answer during the show.\n\n1474\n01:19:13,530 --> 01:19:15,490\nAlso, if you have\nquestions after the show,\n\n1475\n01:19:15,490 --> 01:19:17,290\nat the top of every page is a Q and\nA link.\n\n1476\n01:19:17,290 --> 01:19:19,100\nGo into the questions and answer area.\n\n1477\n01:19:19,100 --> 01:19:20,390\nPost your questions.\n\n1478\n01:19:20,390 --> 01:19:23,140\nWe'll usually respond with answers or\nother viewers do too.\n\n1479\n01:19:23,140 --> 01:19:24,930\nA lot of intelligent people on our system,\n\n1480\n01:19:24,930 --> 01:19:25,910\nso\n>> Cool.\n\n1481\n01:19:25,910 --> 01:19:26,860\n>> It's a good thing.\n\n1482\n01:19:26,860 --> 01:19:31,510\nBetter than people that\nare dumb as a stack of hammers.\n\n1483\n01:19:31,510 --> 01:19:34,790\nA lot of good stuff to be found in there,\ndefiantly a great resource.\n\n1484\n01:19:34,790 --> 01:19:36,160\nMake use of it when you can.\n\n1485\n01:19:36,160 --> 01:19:37,220\n>> Right.\n\n1486\n01:19:37,220 --> 01:19:39,730\n>> All right, we're signing off for\nITPro TV, I'm Don Pezet.\n\n1487\n01:19:39,730 --> 01:19:40,480\n>> I'm Ronnie Wong.\n\n1488\n01:19:40,480 --> 01:19:41,740\n>> We'll see you next time.\n\n1489\n01:19:41,740 --> 01:19:51,740\n[MUSIC]\n\n1490\n01:19:53,592 --> 01:19:59,890\n[SOUND]\n\n",
          "vimeoId": "80916140"
        },
        {
          "description": "In this episode Ronnie and Don take a look at using dynamic routing protocols with IPv6. They start with OSPFv3 and then demonstrate EIGRP using IPv6 also.",
          "length": "2211",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/009-IPv6-Routing.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/009-IPv6-Routing-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/009-IPv6-Routing-sm.jpg",
          "title": "IPv6 Routing",
          "transcript": "1\n00:00:00,036 --> 00:00:10,036\n[MUSIC]\n\n2\n00:00:15,036 --> 00:00:25,036\n[SOUND].\n\n3\n00:00:33,308 --> 00:00:37,050\nAll right good morning, good afternoon and\ngood evening and welcome back.\n\n4\n00:00:37,050 --> 00:00:40,610\nTo another episode of ITProTv, I'm your\nhost Don Pezet today with Mr. Ronnie Wong.\n\n5\n00:00:40,610 --> 00:00:41,930\nHow's it going Ronnie?\n\n6\n00:00:41,930 --> 00:00:43,000\n>> It's going well.\n\n7\n00:00:43,000 --> 00:00:45,540\nI have actually spent my entire vacation,\n\n8\n00:00:45,540 --> 00:00:49,710\nlike I said earlier here,\njust watching reality TV.\n\n9\n00:00:49,710 --> 00:00:54,875\nAnd I believe I can become\na pageant coach now.\n\n10\n00:00:54,875 --> 00:00:56,630\n>> A pageant coach now\n>> To become a pageant coach you\n\n11\n00:00:56,630 --> 00:01:00,010\nhave to be aware of how to make\nconcoctions like the, what is it,\n\n12\n00:01:00,010 --> 00:01:02,630\nthe go juice,\nthe Mountain Dew and Red Bull.\n\n13\n00:01:02,630 --> 00:01:03,170\n>> Yeah.\n\n14\n00:01:03,170 --> 00:01:06,690\nNo, I learned a number one rule,\nis just blame the mama then you're okay.\n\n15\n00:01:06,690 --> 00:01:07,230\n>> There you go.\n\n16\n00:01:07,230 --> 00:01:08,770\nIt's party planning at it's greatest.\n\n17\n00:01:08,770 --> 00:01:10,750\n>> Now, I don't know how that\nties into the show, but.\n\n18\n00:01:10,750 --> 00:01:11,530\nWe will find a way.\n\n19\n00:01:11,530 --> 00:01:13,110\nWe will find a way.\n\n20\n00:01:13,110 --> 00:01:16,160\nSo, how do we tie them into the show?\n\n21\n00:01:16,160 --> 00:01:18,370\nOur show today, it's kind of a neat topic.\n\n22\n00:01:18,370 --> 00:01:21,520\nFor those of you that have been following\nalong religiously, you know objective by\n\n23\n00:01:21,520 --> 00:01:25,300\nobjective, you may have noticed that\nwe skipped over an objective, right.\n\n24\n00:01:25,300 --> 00:01:28,300\nIf we pull it up here,\nI'll pull up the CCNA objectives.\n\n25\n00:01:28,300 --> 00:01:31,470\nAs we went through, we're covering\neverything, doing a great job And\n\n26\n00:01:31,470 --> 00:01:33,650\nthen all of a sudden you\nget to this guy right here.\n\n27\n00:01:33,650 --> 00:01:37,750\nYou know, 5.5 configure OSPFv3 or\nversion three.\n\n28\n00:01:37,750 --> 00:01:39,520\nWhy did we skip that one?\n\n29\n00:01:39,520 --> 00:01:43,320\nWell, we skipped over it\nbecause it's IPv6, right?\n\n30\n00:01:43,320 --> 00:01:47,560\nThe whole exam, all the other objectives\nare really built around IPv4 and\n\n31\n00:01:47,560 --> 00:01:51,000\nthis one just kind of sticks\nout like a sore thumb.\n\n32\n00:01:51,000 --> 00:01:54,770\nWell Today, we're gonna crack that,\nwe're gonna jump in and tackle this one.\n\n33\n00:01:54,770 --> 00:01:56,170\nAnd we're gonna go a little bit further.\n\n34\n00:01:56,170 --> 00:02:00,670\nYou'll notice in the EIGRP objectives,\nthat they never really tackle IPV6, and\n\n35\n00:02:00,670 --> 00:02:06,320\nthat's because the IPV6 functionality\nwas kind of already baked into EIGRP,\n\n36\n00:02:06,320 --> 00:02:08,160\nso they don't really call it out special.\n\n37\n00:02:08,160 --> 00:02:11,440\nBut we're gonna take a look at it today,\nand so this episode, well,\n\n38\n00:02:11,440 --> 00:02:16,410\nthis objective particularly,\nit's really gonna be about Routing IPV6.\n\n39\n00:02:16,410 --> 00:02:19,800\nHow do we move that IPV6 traffic\nbetween different routers.\n\n40\n00:02:19,800 --> 00:02:21,200\nAnd we're going to see it with OSPF first.\n\n41\n00:02:22,220 --> 00:02:28,060\n>> Now don't forget, we already did take\na good portion of our time in the CCENT\n\n42\n00:02:28,060 --> 00:02:33,240\nshow here to talk about\nthe theory behind IPV6.\n\n43\n00:02:33,240 --> 00:02:37,240\n>> And we even implemented static\nrouting with IPv6 as well.\n\n44\n00:02:37,240 --> 00:02:39,900\nBut now we're taking a look\nat the protocols itself.\n\n45\n00:02:39,900 --> 00:02:44,930\nAnd since this particular exam really\ndoes focus in on routing, we want to\n\n46\n00:02:44,930 --> 00:02:50,230\nmake sure that you actually understand\nhow to configure IPv6 on OSPF, and\n\n47\n00:02:50,230 --> 00:02:55,150\nwe're also gonna show you of course the\nERGIP and the IPv6 configuration there.\n\n48\n00:02:55,150 --> 00:02:57,190\nSo that's really the main focus here.\n\n49\n00:02:57,190 --> 00:03:01,560\nA lot of times, we get a little bit\nmore kind of uneasy about this,\n\n50\n00:03:01,560 --> 00:03:05,400\nbecause we think there's something\nmagical or something ethereal about IPv6.\n\n51\n00:03:06,440 --> 00:03:10,520\nYou're gonna see that working with this is\nprobably gonna be a little bit easier, and\n\n52\n00:03:10,520 --> 00:03:13,580\nnot only that though, it actually\nworks identically to the way that IPv4\n\n53\n00:03:13,580 --> 00:03:16,540\nactually works,\nin the terms of configuration.\n\n54\n00:03:16,540 --> 00:03:17,930\nIn the simpleness of it.\n\n55\n00:03:17,930 --> 00:03:20,280\nI don't want to say it's\nactually exactly the same.\n\n56\n00:03:20,280 --> 00:03:23,560\nBut it is actually quite\nsimple to configure\n\n57\n00:03:23,560 --> 00:03:26,800\nIPv6 on our routing protocols for us.\n\n58\n00:03:26,800 --> 00:03:31,090\n>> Yeah you know it's easy to get\nintimidated by IPv6 because it's a new\n\n59\n00:03:31,090 --> 00:03:37,410\nprotocol and the Syntax is different and\nthe address base is completely different.\n\n60\n00:03:37,410 --> 00:03:43,500\nWhen you go from a 32-bit address a\n128-bit address that is a huge difference.\n\n61\n00:03:43,500 --> 00:03:48,692\nSo I know a lot of people really feared or\njust are anxious saying,\n\n62\n00:03:48,692 --> 00:03:53,170\nI want to get my CCNA fast so\nI don't have to do too much IPv6 stuff.\n\n63\n00:03:53,170 --> 00:03:56,240\nBut, I'll tell you guys that\nIPv6 is the way of the future.\n\n64\n00:03:56,240 --> 00:03:57,820\nIt is what's coming down the line.\n\n65\n00:03:58,930 --> 00:04:03,420\nMore importantly I think is that,\nit's really not that bad.\n\n66\n00:04:03,420 --> 00:04:06,350\nOnce you get over that whole\n128 bit address thing,\n\n67\n00:04:06,350 --> 00:04:09,330\nthe rest of it is nearly\nidentical to IPv4.\n\n68\n00:04:09,330 --> 00:04:11,170\nIt's just they made improvements,\n\n69\n00:04:11,170 --> 00:04:14,010\nmade a lot of areas more efficient and\nmore better.\n\n70\n00:04:14,010 --> 00:04:14,610\nRight.\n>> Yeah.\n\n71\n00:04:14,610 --> 00:04:15,140\nMore better.\n\n72\n00:04:15,140 --> 00:04:15,880\n>> More better.\n\n73\n00:04:15,880 --> 00:04:16,540\n>> Yeah.\n\n74\n00:04:16,540 --> 00:04:17,890\nAnd this is key for us here.\n\n75\n00:04:17,890 --> 00:04:20,960\nSo what we're trying to do is\nintroduce you to this topic today,\n\n76\n00:04:20,960 --> 00:04:23,400\ntrying to show you an example\nof the configuration so\n\n77\n00:04:23,400 --> 00:04:26,060\nthat you feel comfortable with\nit when it comes to the exam.\n\n78\n00:04:26,060 --> 00:04:28,170\nYou're going to see once you\nactually see the Syntax you're going\n\n79\n00:04:28,170 --> 00:04:29,580\nto say that's not too bad.\n\n80\n00:04:29,580 --> 00:04:30,510\nI can do this.\n\n81\n00:04:30,510 --> 00:04:33,050\nAnd then that's really the key and\ngoal behind this.\n\n82\n00:04:33,050 --> 00:04:36,950\nSo remember that for us though as CCNA,\n\n83\n00:04:36,950 --> 00:04:41,170\nCCNA as we actually move forward, you're\njust going to see more and more of this.\n\n84\n00:04:41,170 --> 00:04:42,070\nSo go back,\n\n85\n00:04:42,070 --> 00:04:46,070\ntake a look at that show on CCNT and\nwe take a look at the details of it.\n\n86\n00:04:46,070 --> 00:04:49,260\nAnd then continue on with this again,\nif you actually need to, but\n\n87\n00:04:49,260 --> 00:04:51,480\nif you're already familiar with,\ncontinue on with our show.\n\n88\n00:04:51,480 --> 00:04:52,280\n>> Yeah.\n\n89\n00:04:52,280 --> 00:04:53,200\n>> All right.\nSo let's take a look at\n\n90\n00:04:53,200 --> 00:04:54,275\na configuration, all right?\n\n91\n00:04:54,275 --> 00:04:56,520\n>> Mm-hm.\n>> I drew a little network map here and\n\n92\n00:04:56,520 --> 00:05:01,530\nbasically what we've got are 4 Routers and\nthey're arranged in some different ways.\n\n93\n00:05:01,530 --> 00:05:06,584\nYou've got this kind of area in\nhere where I've got R1, R2, and\n\n94\n00:05:06,584 --> 00:05:11,630\nR3, and they are all plugged\nin via just a switch, right.\n\n95\n00:05:11,630 --> 00:05:17,030\nSo we've got this switch here and\nthey're on a common shared network.\n\n96\n00:05:17,030 --> 00:05:21,140\nI wanted to show that because you'll see\nwhere OSPF, even though it's doing this\n\n97\n00:05:21,140 --> 00:05:25,120\nwith IPv6, you still have things like\nyour designated router and all that.\n\n98\n00:05:25,120 --> 00:05:27,220\nAnd so\nthat'll happen on that common element.\n\n99\n00:05:27,220 --> 00:05:29,912\nAnd then R2 has a link to another router.\n\n100\n00:05:29,912 --> 00:05:31,805\nIt's R4, but I'm just calling it an ISP.\n\n101\n00:05:31,805 --> 00:05:32,330\n>> Mm-hm.\n\n102\n00:05:32,330 --> 00:05:34,070\n>> And R3 has a link after that ISP.\n\n103\n00:05:34,070 --> 00:05:35,930\nSo that's two more networks.\n\n104\n00:05:35,930 --> 00:05:39,975\nSo I've got a total of\nthree IPv6 networks here.\n\n105\n00:05:39,975 --> 00:05:42,860\nR1 is only plugged into\none of those networks,\n\n106\n00:05:42,860 --> 00:05:46,365\nso it's gonna have to learn about\nthese other two networks somehow.\n\n107\n00:05:46,365 --> 00:05:47,220\n>> Mm-hm.\n>> And\n\n108\n00:05:47,220 --> 00:05:49,480\nOSPFv6 would be the way that we do that.\n\n109\n00:05:49,480 --> 00:05:51,990\nNow, another comment I\nwant to make is that\n\n110\n00:05:51,990 --> 00:05:55,020\nthis diagram just shows IPv6 addresses.\n\n111\n00:05:55,020 --> 00:06:00,760\nYou absolutely can run IPv6 and\nIPv4 at the same time.\n\n112\n00:06:00,760 --> 00:06:03,640\nThese routers are the same\nrouters we used in the,\n\n113\n00:06:03,640 --> 00:06:06,250\nI think we used these\nin the EIGRP show last.\n\n114\n00:06:06,250 --> 00:06:09,770\nAnd I just left the EIGRP\nconfiguration on them, so\n\n115\n00:06:09,770 --> 00:06:13,190\nthey still have IPv4 addresses and\nstuff from that show the other day.\n\n116\n00:06:13,190 --> 00:06:15,070\nI left them there because\nI'm not worried about it.\n\n117\n00:06:15,070 --> 00:06:17,640\n>> Yeap.\n>> IPv6 is a separate protocol.\n\n118\n00:06:17,640 --> 00:06:19,810\nYou can lay it on top and\nnow you're running both, but\n\n119\n00:06:19,810 --> 00:06:21,160\nthey're independent of each other.\n\n120\n00:06:21,160 --> 00:06:26,215\nSo damage that I do on the IPv4 side\ndoesn't affect IPv6 and vice versa.\n\n121\n00:06:26,215 --> 00:06:27,110\n>> Yeah.\n\n122\n00:06:27,110 --> 00:06:31,490\nThe other advantage of running this in\nwhat we call a dual stack configuration\n\n123\n00:06:31,490 --> 00:06:35,010\nis that it gives you a chance\nas a network technician,\n\n124\n00:06:35,010 --> 00:06:35,960\n>> You've got to go in there and\n\n125\n00:06:35,960 --> 00:06:41,450\nbegin your configuration of IPV6 without\nreally disturbing the IPV4 here so\n\n126\n00:06:41,450 --> 00:06:43,350\nyour network can continue to function.\n\n127\n00:06:43,350 --> 00:06:45,860\nYou go out and you get all of your\nconfigurations up and running.\n\n128\n00:06:45,860 --> 00:06:47,870\nYou practice and you test with them.\n\n129\n00:06:47,870 --> 00:06:53,100\nAnd then sometime in the future you can\nbegin to go ahead and shift over to IPV6.\n\n130\n00:06:53,100 --> 00:06:57,780\nSo it is really a great way to ensure\nthat everything is up and running, and\n\n131\n00:06:57,780 --> 00:06:59,490\nit's also a great way for you to test.\n\n132\n00:06:59,490 --> 00:07:03,210\nAnd then once everything is good, you're\nready to go, without having to go, okay,\n\n133\n00:07:03,210 --> 00:07:05,140\nlet me now rebuild the entire network.\n\n134\n00:07:05,140 --> 00:07:06,100\n>> Yeah.\n\n135\n00:07:06,100 --> 00:07:09,100\nSo let's take a look at\na basic OSPF configuration, so\n\n136\n00:07:09,100 --> 00:07:11,590\nwe're gonna start with Router 1.\n\n137\n00:07:11,590 --> 00:07:15,970\nRouter 1's just got one interface, FA0/0,\nand we want to assign an IP to it.\n\n138\n00:07:15,970 --> 00:07:19,550\nSo the basic configuration\nlooks something like this.\n\n139\n00:07:19,550 --> 00:07:23,050\nThe first thing that we need to do\nis issue this command right here,\n\n140\n00:07:23,050 --> 00:07:29,060\nthis is the most important command,\nbecause even if your Cisco router has\n\n141\n00:07:29,060 --> 00:07:34,610\nbuilt in IPV6 support,\nit's not normally turned on by default.\n\n142\n00:07:34,610 --> 00:07:38,480\nSo you can go and assign all the IPV 6\naddresses you want, but it's not going to\n\n143\n00:07:38,480 --> 00:07:43,720\nactually route them until you run\nthe IPV 6 unicast-routing command.\n\n144\n00:07:43,720 --> 00:07:45,020\nSo that's a pretty important command for\nus.\n\n145\n00:07:45,020 --> 00:07:45,650\n>> Right.\n\n146\n00:07:45,650 --> 00:07:48,232\nA lot of times, it's so\nimportant we normally say,\n\n147\n00:07:48,232 --> 00:07:52,417\nit should be the first command you ever\ndo when you're actually configuring IPV6.\n\n148\n00:07:52,417 --> 00:07:56,568\nSo, I've seen this happen cuz I've done\nit myself where I've configured it on one\n\n149\n00:07:56,568 --> 00:08:00,208\nrouter but I forgot to configure on\nthe other one that I was working with.\n\n150\n00:08:00,208 --> 00:08:01,400\nLike why isn't it working?\n\n151\n00:08:01,400 --> 00:08:03,917\nWell I forgot that very\nimportant command here.\n\n152\n00:08:03,917 --> 00:08:06,000\nIPv6 unicast-routing.\n\n153\n00:08:06,000 --> 00:08:08,625\n>> Yeah cuz it'll let you run all\nthe other commands it doesn't stop you.\n\n154\n00:08:08,625 --> 00:08:14,111\n[LAUGH] All right after that,\nwe then need to get into our interface and\n\n155\n00:08:14,111 --> 00:08:16,500\nconfigure an IPv6 address.\n\n156\n00:08:16,500 --> 00:08:20,270\nSo that's what we're showing here is\nIPv6 enabled that turns on IPv6 for\n\n157\n00:08:20,270 --> 00:08:21,360\nthe interface.\n\n158\n00:08:21,360 --> 00:08:25,090\nAnd then IPv6 address and\nthen what address we're gonna use.\n\n159\n00:08:25,090 --> 00:08:28,840\nSo, this is nothing we didn't\nsee in the CCENT show here.\n\n160\n00:08:28,840 --> 00:08:34,059\nHere we're just assigning a simple\nshort address 2003::1/64.\n\n161\n00:08:34,059 --> 00:08:36,346\nThen, here's where things\nget a little different.\n\n162\n00:08:36,346 --> 00:08:42,002\nUnder IPv4, when you configured OSPF,\nyou would go into the OSPF process number,\n\n163\n00:08:42,002 --> 00:08:46,063\nand then you would punch in\nthe whole network in a subnet, and\n\n164\n00:08:46,063 --> 00:08:50,370\nsubnet mask,\nfollowed by an area number and all that.\n\n165\n00:08:50,370 --> 00:08:53,000\nIn IPv6,\nyou just turn it on on the interface.\n\n166\n00:08:53,000 --> 00:08:56,800\nAnd you could do that under IPv4 also,\nit was a secondary way of doing it.\n\n167\n00:08:56,800 --> 00:09:01,060\nBut in IPv6 world,\nit's the primary way of doing it.\n\n168\n00:09:01,060 --> 00:09:07,810\nOn the interface, when you say\nIPv6 OPSF1 area 0, just like that.\n\n169\n00:09:07,810 --> 00:09:11,590\nWhat you're doing is you're saying take\nwhatever IPv6 networks are on this\n\n170\n00:09:11,590 --> 00:09:19,620\ninterface and add them to OSPF process\nnumber one and add them into area 0.\n\n171\n00:09:19,620 --> 00:09:22,590\nThis eliminates the need of\nthose old network commands.\n\n172\n00:09:22,590 --> 00:09:25,830\nYou don't have to worry about\nwildcard masks and stuff like that.\n\n173\n00:09:25,830 --> 00:09:29,520\nIt's entered right here\non the interface itself.\n\n174\n00:09:29,520 --> 00:09:33,050\nIf I were to stop right there,\nOSPF is done.\n\n175\n00:09:33,050 --> 00:09:36,210\nI never actually have to\nget into the OSPF process.\n\n176\n00:09:36,210 --> 00:09:38,269\nYou can just do it all from\nthe interfaces and you're done.\n\n177\n00:09:39,420 --> 00:09:42,380\nBut if there's general commands that\nyou wanna run, like the router ID.\n\n178\n00:09:42,380 --> 00:09:45,580\nIf you wanna manually set a router ID,\nwell you can.\n\n179\n00:09:45,580 --> 00:09:49,580\nYou'll need to get into\nthe OSPF router process, so\n\n180\n00:09:49,580 --> 00:09:52,510\nyou say, IPv6 router OSPF,\nand the process ID.\n\n181\n00:09:52,510 --> 00:09:55,310\nAnd then here they specify\nlike the router ID.\n\n182\n00:09:55,310 --> 00:09:57,870\n>> Now let's re-emphasize\nthis router ID number here.\n\n183\n00:09:57,870 --> 00:10:01,820\nCuz this may be confusing to some\nof us as we actually start here.\n\n184\n00:10:01,820 --> 00:10:05,200\nThe router ID even though it looks\nlike an IP address really isn't.\n\n185\n00:10:05,200 --> 00:10:07,990\nIt's a 32 bit number and so for\n\n186\n00:10:07,990 --> 00:10:12,720\nus here even though it looks like an IPv4\nand you might get confused on that.\n\n187\n00:10:12,720 --> 00:10:15,510\nDon't be confused, they're just\nreporting it as a 32 bit number here.\n\n188\n00:10:15,510 --> 00:10:16,830\n>> Yep.\n>> Is what they're doing.\n\n189\n00:10:16,830 --> 00:10:18,375\n>> Yeah, it looks like an IP but\nit actually isn't.\n\n190\n00:10:18,375 --> 00:10:18,981\n>> Yeah.\n\n191\n00:10:18,981 --> 00:10:19,724\n>> Yeah.\n\n192\n00:10:19,724 --> 00:10:21,600\nAnd you don't have to set a router ID.\n\n193\n00:10:21,600 --> 00:10:22,770\nIf you're not concerned about that,\n\n194\n00:10:22,770 --> 00:10:24,510\nyou can let the router\nautomatically detect it.\n\n195\n00:10:24,510 --> 00:10:28,460\nIt'll pick the highest IP address used\non an interface when OSPF starts.\n\n196\n00:10:28,460 --> 00:10:30,090\nA lot of that behavior is still identical.\n\n197\n00:10:30,090 --> 00:10:30,740\n>> Right.\n\n198\n00:10:30,740 --> 00:10:31,722\nYeah.\n\n199\n00:10:31,722 --> 00:10:33,500\n>> All right, so\nlet's see what's on an actual router here.\n\n200\n00:10:33,500 --> 00:10:40,540\nI'm gonna pull up old router one and\nget in this configuration.\n\n201\n00:10:40,540 --> 00:10:42,704\nWhy is that slightly off\nthe bottom of my screen?\n\n202\n00:10:42,704 --> 00:10:46,581\nLet me make this a little bigger.\n\n203\n00:10:46,581 --> 00:10:49,205\nWell, let me make this a lot bigger.\n\n204\n00:10:49,205 --> 00:10:49,902\nThere we go.\n\n205\n00:10:49,902 --> 00:10:54,483\nAll right, so the first thing I'm going\nto do is I'm going to use that IPv6\n\n206\n00:10:54,483 --> 00:10:56,310\nunicast-routing command.\n\n207\n00:10:57,500 --> 00:11:02,390\nKeep in mind that even if your\nrouter says comes with IPv6 support,\n\n208\n00:11:02,390 --> 00:11:03,920\na lot of times it's not turned on.\n\n209\n00:11:03,920 --> 00:11:07,020\nMost Cisco IOS's have ivp\nsix turned off by default.\n\n210\n00:11:07,020 --> 00:11:09,880\nSo that's all I'm doing\nthere is turning that on.\n\n211\n00:11:09,880 --> 00:11:13,080\n>> And then we can go into the global\ninterface if we choose to and\n\n212\n00:11:13,080 --> 00:11:17,050\nactually set up the router ID but we may\njust go ahead and into the interface.\n\n213\n00:11:17,050 --> 00:11:19,279\nSo our interface was fa0/0.\n\n214\n00:11:19,279 --> 00:11:20,750\n>> Yep it's the first one and\n\n215\n00:11:20,750 --> 00:11:25,020\nI just want to do a quick configuration\ncuz I didn't do all my work this morning.\n\n216\n00:11:25,020 --> 00:11:26,720\nI didn't double check\nthe configs on these.\n\n217\n00:11:26,720 --> 00:11:30,530\nI just want to make sure that there's not\nan IPv6 address already and you know for\n\n218\n00:11:30,530 --> 00:11:34,790\nthe sake of commands and\nwhat we need to know, just remember\n\n219\n00:11:34,790 --> 00:11:39,920\nthat in the IPv6 world, we really use\nthe same commands from the IPv4 world.\n\n220\n00:11:39,920 --> 00:11:41,340\nWe just add v6 to it.\n\n221\n00:11:41,340 --> 00:11:45,380\nSo I might do a show IP route under IPv4.\n\n222\n00:11:45,380 --> 00:11:50,370\nBut under IPv6, so\nthis would be like the IPv4 command.\n\n223\n00:11:50,370 --> 00:11:54,120\nThe IPv6 version is\nsimply show IPv6 route.\n\n224\n00:11:54,120 --> 00:11:59,840\nI'm just adding v6 to it and\nyou can do that with number of commands.\n\n225\n00:11:59,840 --> 00:12:06,340\nSo in every show I run\nshow IP interface brief,\n\n226\n00:12:06,340 --> 00:12:10,810\nand that's one of my go to commands\nin the IPv6 world it's just\n\n227\n00:12:10,810 --> 00:12:15,730\nshow IPv6 interface brief.\n\n228\n00:12:15,730 --> 00:12:18,020\nLet me abbreviate so\nit all fits on the screen.\n\n229\n00:12:18,020 --> 00:12:19,740\nSo we're just kind of\nadjusting things like that.\n\n230\n00:12:19,740 --> 00:12:24,130\nAnd if I want to see if I've already\ngot IPv6 configured on this system,\n\n231\n00:12:24,130 --> 00:12:30,780\nI can do a show IPv6 route, and look at my\nrouting table, which right now is empty.\n\n232\n00:12:30,780 --> 00:12:32,930\nI just have a null route and that's it.\n\n233\n00:12:32,930 --> 00:12:37,760\nAnd I can do a show IPv6 interface brief.\n\n234\n00:12:38,970 --> 00:12:43,920\nAnd I can see my interfaces and\nthat they don't have IPv6 addresses and\n\n235\n00:12:43,920 --> 00:12:49,520\nI can just do a show run and pipe that\n\n236\n00:12:49,520 --> 00:12:54,480\ninto the, or actually I can do this show\nrun let me write it all the way out.\n\n237\n00:12:57,620 --> 00:12:58,490\nThere.\n\n238\n00:12:58,490 --> 00:13:01,470\nI can say show me the running\nconfiguration for that particular\n\n239\n00:13:01,470 --> 00:13:05,710\ninterface and I can see right there it's\ngot an IPv4 address but no IPv6 address.\n\n240\n00:13:05,710 --> 00:13:08,630\nSo I know that we're clear so now I\ncan do exactly what Ronnie was saying,\n\n241\n00:13:08,630 --> 00:13:13,680\nwhich is to get into that interface and\nassign an address.\n\n242\n00:13:13,680 --> 00:13:18,680\nSo I'll say IPv6 enable\nto turn on IPv6 for\n\n243\n00:13:18,680 --> 00:13:28,530\nthis interface and\nthen I'll say IPv6 address 2003::1/64.\n\n244\n00:13:28,530 --> 00:13:29,740\nSo now I've got an IPv6 address.\n\n245\n00:13:29,740 --> 00:13:31,100\nIt's up and it's happy.\n\n246\n00:13:33,870 --> 00:13:36,330\nNow I can jump over to the other routers,\nrouters two and three and\n\n247\n00:13:36,330 --> 00:13:38,270\nassign their addresses also.\n\n248\n00:13:38,270 --> 00:13:39,940\nSo I'll just do that real quick.\n\n249\n00:13:39,940 --> 00:13:44,890\nSo on each of these guys,\nI'm going to say IPv6 unicast routing\n\n250\n00:13:47,360 --> 00:13:52,460\nand I'll get into their interface,\nold habits die hard.\n\n251\n00:13:52,460 --> 00:13:57,565\nSo used to IP space for muscle memory.\n\n252\n00:14:01,488 --> 00:14:05,610\nOh, I forgot to do the IPv6 enable.\n\n253\n00:14:05,610 --> 00:14:06,650\nSome routers need that.\n\n254\n00:14:06,650 --> 00:14:07,450\n>> Yeah.\n>> Some don't.\n\n255\n00:14:07,450 --> 00:14:08,460\nIt's an odd command.\n\n256\n00:14:08,460 --> 00:14:12,430\nIn the Cisco docs you'll always see\nwere they put that IPv6 enable.\n\n257\n00:14:12,430 --> 00:14:15,420\nSome routers just default to having it,\nsome don't.\n\n258\n00:14:15,420 --> 00:14:18,715\nAn easy way to see if it defaults\nto it is once you run it,\n\n259\n00:14:18,715 --> 00:14:22,495\nif you take a look at the running\nconfiguration for that interface,\n\n260\n00:14:22,495 --> 00:14:26,715\nif IPv6 enable shows up, that means that\nit's not a default and you do need it.\n\n261\n00:14:26,715 --> 00:14:27,855\n>> Right.\n>> But if it doesn't show up,\n\n262\n00:14:27,855 --> 00:14:29,690\nthat tell you it's a default for that iOS.\n\n263\n00:14:29,690 --> 00:14:30,485\n>> Mm-hm.\n>> And that you didn't\n\n264\n00:14:30,485 --> 00:14:30,995\nnecessarily need it.\n\n265\n00:14:32,315 --> 00:14:34,105\nAll right, so\nI've assigned its IP address and\n\n266\n00:14:34,105 --> 00:14:37,087\nlet me jump over to Router3,\nwhich is the last one.\n\n267\n00:14:37,087 --> 00:14:43,865\n[BLANK\n\n268\n00:14:43,865 --> 00:14:52,118\nAUDIO]\n>> And we'll sign out.\n\n269\n00:14:52,118 --> 00:14:56,150\nSo going back to my diagram as far as\nthis little network here, router one,\n\n270\n00:14:56,150 --> 00:14:59,926\nrouter two, router three,\nthey've all go their IPv6 addresses and\n\n271\n00:14:59,926 --> 00:15:03,585\nI should be able to ping between them,\nI guess we could test that.\n\n272\n00:15:03,585 --> 00:15:09,872\n[SOUND] And the ping command.\n\n273\n00:15:09,872 --> 00:15:12,620\nI don't have to tell it\nthat I'm doing IPv6.\n\n274\n00:15:12,620 --> 00:15:16,920\nIt's smart enough to just look\nat the address that I type.\n\n275\n00:15:16,920 --> 00:15:19,530\nAnd so it'll say, oh,\nyou've got colons instead of periods.\n\n276\n00:15:19,530 --> 00:15:23,180\nThis is an IPv6 address,\nand it'll ping using IPv6.\n\n277\n00:15:24,630 --> 00:15:29,400\nAnd sure enough,\nI'm able to ping routers two and three.\n\n278\n00:15:29,400 --> 00:15:32,500\nSo our basic IPv6 network is in place.\n\n279\n00:15:32,500 --> 00:15:35,360\nI guess the only thing I haven't\nconfigured now is the ISP side,\n\n280\n00:15:35,360 --> 00:15:37,730\nbut I'll save that.\n\n281\n00:15:37,730 --> 00:15:43,640\nNow, we just need a dynamic protocol for\nthese guys to talk because if I jump on,\n\n282\n00:15:43,640 --> 00:15:46,890\nlike router one has another interface,\nthis guy right here.\n\n283\n00:15:46,890 --> 00:15:48,667\nAnd if I turn it on.\n\n284\n00:15:48,667 --> 00:15:52,111\nAll right, so what I'm gonna do is I'm\ngonna add another network to router one,\n\n285\n00:15:52,111 --> 00:15:54,594\na network that the other routers\ndon't even know about and\n\n286\n00:15:54,594 --> 00:15:57,042\nthen we'll need a dynamic\nprotocol to teach it to cross.\n\n287\n00:15:57,042 --> 00:16:01,208\nSo let me just jump into that interface,\nand I'll assign an address.\n\n288\n00:16:01,208 --> 00:16:05,792\nWe'll pick a fun network here,\nsomething that's easily gonna standout.\n\n289\n00:16:05,792 --> 00:16:08,570\nEspecially if I format it improperly.\n\n290\n00:16:08,570 --> 00:16:13,218\nI'm gonna go crazy,\nI'll do a eui-64 on this guy.\n\n291\n00:16:13,218 --> 00:16:16,945\nThe old eui-64 address is where,\nit generates the remaining\n\n292\n00:16:16,945 --> 00:16:20,870\n64-bits based on our Mac address,\nso I'll go ahead and assign that.\n\n293\n00:16:20,870 --> 00:16:22,670\nAnd I already did no shut down.\n\n294\n00:16:22,670 --> 00:16:27,390\nSo, let's do a show IPv6 interface brief.\n\n295\n00:16:27,390 --> 00:16:30,708\nAnd I can see that I've\ngot my 2003//1 network,\n\n296\n00:16:30,708 --> 00:16:33,930\nthat's created between routers1, 2 and 3.\n\n297\n00:16:33,930 --> 00:16:36,970\nBut, now I've got this\nnice big 111 network.\n\n298\n00:16:36,970 --> 00:16:41,190\nAnd that one is just\nright here on router1.\n\n299\n00:16:41,190 --> 00:16:43,810\nAnd if I do a show IPv6 route,\n\n300\n00:16:43,810 --> 00:16:46,500\nI can see the routes that\nare entered in there for it.\n\n301\n00:16:46,500 --> 00:16:49,820\nLet me filter that.\n\n302\n00:16:49,820 --> 00:16:55,140\nActually, I- There.\n\n303\n00:16:55,140 --> 00:16:57,120\nSo, we can see the directly\nconnected routes.\n\n304\n00:16:57,120 --> 00:17:02,340\nI like to filter out those, you get these\nL routes, which are your local address.\n\n305\n00:17:02,340 --> 00:17:05,410\nAnd so, it makes every route kind\nof look like it's there twice.\n\n306\n00:17:05,410 --> 00:17:07,890\nBut you'll see where one is /64,\nthat's the network, and\n\n307\n00:17:07,890 --> 00:17:12,610\nthe other is a /128,\nthat's our individual interface.\n\n308\n00:17:12,610 --> 00:17:15,550\nSo, I'm just kind of filtering here\nto show me the connected ones.\n\n309\n00:17:15,550 --> 00:17:17,990\nAnd so there's those networks right there.\n\n310\n00:17:17,990 --> 00:17:18,660\nAll right, so\n\n311\n00:17:20,000 --> 00:17:25,140\nnow what I wanna do is set up a dynamic\nrouting protocol between them.\n\n312\n00:17:25,140 --> 00:17:26,812\nAnd we'll use OSPF for that.\n\n313\n00:17:26,812 --> 00:17:27,733\n>> Yeah.\n\n314\n00:17:29,761 --> 00:17:33,321\n>> So once again,\nwe configure from the interface itself,\n\n315\n00:17:33,321 --> 00:17:37,390\nnow that we have the two\nprerequisites that we need right?\n\n316\n00:17:37,390 --> 00:17:39,540\nWe need IPv6 enable.\n\n317\n00:17:39,540 --> 00:17:42,050\nWe also need an IPv6 address.\n\n318\n00:17:42,050 --> 00:17:47,090\nAt this point we can go in there, and\nnow we configure it using the OSPF.\n\n319\n00:17:48,480 --> 00:17:51,630\n>> Process number and area number as well.\n\n320\n00:17:51,630 --> 00:17:53,140\n>> And I can stop right here.\n\n321\n00:17:53,140 --> 00:17:55,600\nIn my example that I\nshowed you guys earlier,\n\n322\n00:17:55,600 --> 00:18:01,300\nI showed going into IPv6 router OSPF1,\nand specifying router ID.\n\n323\n00:18:01,300 --> 00:18:05,560\nIf you want, you can do that but it's not\nnecessary, but we'll go and do it for\n\n324\n00:18:05,560 --> 00:18:06,660\ncompleteness here.\n\n325\n00:18:06,660 --> 00:18:12,830\nIn IPv4, you'd say IP router actually you\nwouldn't you would just say router OSPF1.\n\n326\n00:18:12,830 --> 00:18:18,140\nSo, it's a little bit different in that\nyou have to say IPv6 router OSPF1.\n\n327\n00:18:18,140 --> 00:18:21,720\nBut now, I can come in and\nI can specify router ID like this.\n\n328\n00:18:22,880 --> 00:18:26,140\nAnd there we go, we got a router ID.\n\n329\n00:18:26,140 --> 00:18:28,460\nNow, OSPF was already up.\n\n330\n00:18:28,460 --> 00:18:32,580\nWhen I assigned this router ID,\nso if I wanna correct for\n\n331\n00:18:32,580 --> 00:18:34,620\nthat I'm gonna have to clear out.\n\n332\n00:18:36,230 --> 00:18:41,050\nClear out OSPF and you'll see like with\nthe clear IPv6 that you've got the OSPF\n\n333\n00:18:42,340 --> 00:18:45,810\nprocess command just, before and\nso I'll clear that out so\n\n334\n00:18:45,810 --> 00:18:47,180\nthat my router id updates.\n\n335\n00:18:47,180 --> 00:18:50,040\nSo again, same commands as regular OSPF,\n\n336\n00:18:50,040 --> 00:18:54,732\nwe're just adding v6 to the IP part,\nall right?\n\n337\n00:18:54,732 --> 00:18:55,900\nSo router1 is up and\n\n338\n00:18:55,900 --> 00:19:00,330\nhappy, but we can't really see that\nunless we set somebody else up.\n\n339\n00:19:00,330 --> 00:19:05,710\nWe can do a show IPv6 protocols\nto see that we are running OSPF.\n\n340\n00:19:05,710 --> 00:19:09,910\nIt's up and it's tied to these two\ninterfaces right now, and it's happy.\n\n341\n00:19:09,910 --> 00:19:11,210\n>> Yep.\n\n342\n00:19:11,210 --> 00:19:12,520\n>> All right, so\nlet's jump over to router2.\n\n343\n00:19:12,520 --> 00:19:13,800\nI'm gonna do the same thing here.\n\n344\n00:19:15,190 --> 00:19:19,636\nI'll start with assigning that router ID,\nso I don't have to reset the process.\n\n345\n00:19:23,476 --> 00:19:30,750\nAnd then I'll go and\nsay IPv6 OSPF1 area 0.\n\n346\n00:19:30,750 --> 00:19:33,410\nAnd that should be enough to bring it up,\n\n347\n00:19:33,410 --> 00:19:36,180\nand an adjacency should build up,\nthere we go.\n\n348\n00:19:36,180 --> 00:19:40,660\nI got bad checks on, that's interesting.\n\n349\n00:19:40,660 --> 00:19:42,371\nWell, I'll have to see\nwhat's going on there,\n\n350\n00:19:42,371 --> 00:19:43,765\nthat might be a bad cable or something.\n\n351\n00:19:43,765 --> 00:19:45,794\n>> Yeah.\n>> It could of just been a fluke too, but\n\n352\n00:19:45,794 --> 00:19:46,429\nwe'll see.\n\n353\n00:19:46,429 --> 00:19:48,477\nWe'll see if router3 does it.\n\n354\n00:19:48,477 --> 00:19:50,024\n>> [LAUGH]\n>> If I can stop being a goofball\n\n355\n00:19:50,024 --> 00:19:50,806\nhere on my typing.\n\n356\n00:19:50,806 --> 00:19:55,641\nAnd then on router3,\nI'm gonna go ahead and\n\n357\n00:19:55,641 --> 00:20:00,233\nget into IPv6, router OSPF1, router ID\n\n358\n00:20:08,969 --> 00:20:11,759\nWe'll put it in area 0, all right?\n\n359\n00:20:11,759 --> 00:20:13,309\nThere we go,\nthere's that invalid checksum.\n\n360\n00:20:13,309 --> 00:20:14,524\nIt doesn't stop it though.\n\n361\n00:20:14,524 --> 00:20:17,175\n>> Nope.\n>> That switch might be acting up.\n\n362\n00:20:17,175 --> 00:20:17,973\n>> Yeah.\n>> But, I can see it came up.\n\n363\n00:20:17,973 --> 00:20:19,473\nI got some neighbors.\n\n364\n00:20:19,473 --> 00:20:22,896\nNeighbors, 1.1.1.1 and 2.2.2.2.\n\n365\n00:20:22,896 --> 00:20:24,769\nBy setting those router IDs I can.\n\n366\n00:20:24,769 --> 00:20:27,054\n>> Yeah.\n>> Spot hey that's router1 that's router2.\n\n367\n00:20:27,054 --> 00:20:30,305\nSo, I don't have to kind of\nguess on whose got what IPs.\n\n368\n00:20:30,305 --> 00:20:31,693\n>> And this is a good idea too.\n\n369\n00:20:31,693 --> 00:20:33,790\nSo, even though it's not necessary.\n\n370\n00:20:33,790 --> 00:20:37,610\nIf you're in a lab environment in\nwhich you're trying to configure this,\n\n371\n00:20:37,610 --> 00:20:40,940\nyou need to be able to move between those\nrouters quickly, so you can identify them.\n\n372\n00:20:40,940 --> 00:20:44,410\nSetting a router ID is actually a good\nidea because trying to remember what your\n\n373\n00:20:44,410 --> 00:20:46,440\nhighest IP address is,\n\n374\n00:20:46,440 --> 00:20:49,315\nand which router you're gonna\nmaybe a little bit more confusing.\n\n375\n00:20:49,315 --> 00:20:52,720\n>> Yeah, even in a production environment,\nif you set the router ID.\n\n376\n00:20:52,720 --> 00:20:54,460\n>> To an actual IP address.\n\n377\n00:20:54,460 --> 00:20:57,350\nWhen you see log messages that\nare an error tied to that router ID.\n\n378\n00:20:57,350 --> 00:21:02,290\nYou can SSH to that ID, and if it's\ntied to a real IP you can get there.\n\n379\n00:21:02,290 --> 00:21:06,230\nSo manually setting it, so what it's\ngonna be every time can be very useful.\n\n380\n00:21:06,230 --> 00:21:09,790\nAll right, I'm gonna jump back to router1,\nand verify this configuration.\n\n381\n00:21:09,790 --> 00:21:16,480\nSo, I'm gonna start with a little\nshow IPv6 protocols, all right?\n\n382\n00:21:16,480 --> 00:21:18,140\nAnd I can see that I am running OSPF1.\n\n383\n00:21:18,140 --> 00:21:21,950\nI guess we kind of already knew that.\n\n384\n00:21:21,950 --> 00:21:25,910\nIPv6, OSPF neighbor, all right?\n\n385\n00:21:25,910 --> 00:21:28,590\nNow, I can see the neighbors that\nI've built an adjacency with.\n\n386\n00:21:28,590 --> 00:21:33,120\nAnd see how I've got\na backup designated router.\n\n387\n00:21:33,120 --> 00:21:36,320\nA BDR, I've got a DRother,\nthat means that I'm the DR,\n\n388\n00:21:36,320 --> 00:21:41,290\nI'm the designated router, so just like in\nIPv4, we still have these designations as\n\n389\n00:21:41,290 --> 00:21:44,890\nfar as what role that router\nserves within an area.\n\n390\n00:21:44,890 --> 00:21:46,860\nAnd so that's there,\n\n391\n00:21:46,860 --> 00:21:52,090\nif I do a show IPv6 route it can\nsee that I'm learning nothing.\n\n392\n00:21:52,090 --> 00:21:56,100\nBy the way, yeah, they haven't really\ntaught me anything that I didn't know.\n\n393\n00:21:56,100 --> 00:21:57,470\nNow, the opposite is not true.\n\n394\n00:21:57,470 --> 00:22:00,660\nI should be teaching them\nthese 111 networks, so\n\n395\n00:22:00,660 --> 00:22:05,570\nif I jump over to one of the other\nrouters and do a show IPv6 route,\n\n396\n00:22:05,570 --> 00:22:11,500\nthere we go, I can see they're\nlearning an OSPF route right there.\n\n397\n00:22:11,500 --> 00:22:17,590\nThey're learning the all ones,\n111 network, all right?\n\n398\n00:22:17,590 --> 00:22:21,230\nSo we're good there,\nwe're learning our networks.\n\n399\n00:22:21,230 --> 00:22:23,390\nHere, it's a network that we're\nnot directly plugged into but\n\n400\n00:22:23,390 --> 00:22:24,420\nwe are learning it.\n\n401\n00:22:24,420 --> 00:22:26,980\nAnd if I were to try and\nping over to it, I could.\n\n402\n00:22:26,980 --> 00:22:31,355\nNow, to ping it is gonna be interesting\nbecause it's an eui-64 address.\n\n403\n00:22:35,977 --> 00:22:40,160\nWhich we can steal right out\nof the link local address.\n\n404\n00:22:42,930 --> 00:22:43,430\nThat should be it.\n\n405\n00:22:44,550 --> 00:22:46,400\nNo actually we can't,\nbecause this is a different interface.\n\n406\n00:22:46,400 --> 00:22:49,220\nDaggumit, I'm gonna have to go\nover here and get the address.\n\n407\n00:22:49,220 --> 00:22:50,598\nSo here's the full address.\n\n408\n00:22:55,362 --> 00:22:57,090\nAll right, and let's try that thing again.\n\n409\n00:22:58,120 --> 00:22:58,790\nThere we go.\n\n410\n00:22:58,790 --> 00:23:01,790\nSo, I'm able to ping over to this network\nthat I'm not directly connected to.\n\n411\n00:23:01,790 --> 00:23:05,740\nI should've started with something easier,\nbut, anyhow, so\n\n412\n00:23:05,740 --> 00:23:07,150\nI picked the nice long address.\n\n413\n00:23:07,150 --> 00:23:08,360\nSo I can ping across to it.\n\n414\n00:23:08,360 --> 00:23:09,510\nI'm seeing that network.\n\n415\n00:23:09,510 --> 00:23:11,050\nI'm up, I'm happy.\n\n416\n00:23:11,050 --> 00:23:11,870\nThings look good.\n\n417\n00:23:13,230 --> 00:23:17,296\nRonnie can you think of any other\ncommands that I've left out on this one?\n\n418\n00:23:17,296 --> 00:23:20,650\n>> Remember do the show commands, because\nwhat they're trying to do for you is make\n\n419\n00:23:20,650 --> 00:23:25,930\nsure you can verify, and make sure you can\nspot the configuration correctly on here.\n\n420\n00:23:25,930 --> 00:23:29,600\nSo, remember the unicast routing is\nactually by far the most important one or\n\n421\n00:23:29,600 --> 00:23:31,240\nit's not gonna work at all.\n\n422\n00:23:31,240 --> 00:23:33,128\nMake sure you enable it on\neach of the interfaces.\n\n423\n00:23:33,128 --> 00:23:38,220\nHave an IPv6 address, and\nof course then lastly that IPv6 OSPF,\n\n424\n00:23:38,220 --> 00:23:42,040\nwith a process ID and whatever area\nyou're gonna be actually advertising for.\n\n425\n00:23:42,040 --> 00:23:46,370\nThe other ones are really just\nbenefits to us in terms of management.\n\n426\n00:23:46,370 --> 00:23:49,417\nWe don't necessarily need them, but\nit is a good idea to actually run.\n\n427\n00:23:49,417 --> 00:23:50,625\n>> Yeah.\n\n428\n00:23:50,625 --> 00:23:54,113\n>> Well, on that note Ronnie I think\nwe've gone over most of the commands,\n\n429\n00:23:54,113 --> 00:23:55,208\nthe configurations.\n\n430\n00:23:55,208 --> 00:23:58,467\nLet's do this, let's stop and\ntake a break and when we get back,\n\n431\n00:23:58,467 --> 00:24:02,441\nI know it's not in the objectives, but\nI wanna show you guys EIGRP with IPv6 and\n\n432\n00:24:02,441 --> 00:24:04,900\nwhat we'll see is it's\nactually very similar.\n\n433\n00:24:04,900 --> 00:24:09,850\nSo, definitely something easy to attack,\nso we will do that after the break.\n\n434\n00:24:09,850 --> 00:24:10,580\nOtherwise.\n\n435\n00:24:10,580 --> 00:24:13,360\n>> I think we're good on\nterms of the configuration.\n\n436\n00:24:13,360 --> 00:24:13,930\n>> Okay.\n>> Yep.\n\n437\n00:24:13,930 --> 00:24:14,640\n>> Let's stop here.\n\n438\n00:24:14,640 --> 00:24:20,381\nWe'll see you guys back in a few minutes.\n\n439\n00:24:20,381 --> 00:24:25,169\n[SOUND] All right, welcome back everybody.\n\n440\n00:24:25,169 --> 00:24:28,585\nSo before the break we were\ntalking about OSPF right?\n\n441\n00:24:28,585 --> 00:24:31,155\nThe open shortest path first protocol and\n\n442\n00:24:31,155 --> 00:24:35,965\nwe were taking a look at how it works\nwith IPv6 and I made the comment that\n\n443\n00:24:35,965 --> 00:24:40,055\nwe wanna take a look at EIGRP also and\nit's not much different.\n\n444\n00:24:40,055 --> 00:24:40,710\n>> All right.\n\n445\n00:24:40,710 --> 00:24:43,400\n>> But before we jump into it, I do want\nto want to point out one difference that\n\n446\n00:24:43,400 --> 00:24:49,680\nwe have which is how in OSPF for IPv6 at\nleast, we call it OSPF version three.\n\n447\n00:24:49,680 --> 00:24:53,610\nThe reason is back in the day\nwhen OSPF was developed,\n\n448\n00:24:53,610 --> 00:24:57,390\nit was written specifically for\nIP version four.\n\n449\n00:24:57,390 --> 00:24:58,950\nRight.\nThat's what it was written for.\n\n450\n00:24:58,950 --> 00:25:02,710\nAnd when IP version six came out,\nthey had to rewrite it from scratch.\n\n451\n00:25:02,710 --> 00:25:04,740\nThey basically threw it away and\nrewrote it.\n\n452\n00:25:04,740 --> 00:25:07,500\nIt looks the same, but\nit is completely rewritten.\n\n453\n00:25:07,500 --> 00:25:10,280\nWith EIGRP,\nwe don't have version numbers like that.\n\n454\n00:25:10,280 --> 00:25:12,750\nAnd that's because EIGRP is modular,\nright.\n\n455\n00:25:12,750 --> 00:25:16,180\nCisco had the foresight to say, hey,\nother protocols are going to come out.\n\n456\n00:25:16,180 --> 00:25:16,910\nWe want to support them.\n\n457\n00:25:16,910 --> 00:25:17,970\nAnd in fact, they already do.\n\n458\n00:25:17,970 --> 00:25:18,480\n>> Right.\n\n459\n00:25:18,480 --> 00:25:22,830\n>> They have the diffusing update\nalgorithm, the dual formula,\n\n460\n00:25:22,830 --> 00:25:25,630\nthat's being used in the background for\nEIGRP.\n\n461\n00:25:25,630 --> 00:25:30,490\nBut then, they have modules that\nsupport Apple talk, and IPSFX, and\n\n462\n00:25:30,490 --> 00:25:32,080\nIPv4 and IPv6 now, right.\n\n463\n00:25:32,080 --> 00:25:35,300\nIt's all the same engine underneath,\n\n464\n00:25:35,300 --> 00:25:39,260\nbut the little modules adjust\nwhat protocols can be routed.\n\n465\n00:25:39,260 --> 00:25:42,240\nSo it's good, it just updated your IP and\nyou're in business.\n\n466\n00:25:42,240 --> 00:25:43,990\nConfiguration is not much different.\n\n467\n00:25:43,990 --> 00:25:47,170\n>> Yeah, the nice thing about this\nis when we start taking a look at\n\n468\n00:25:47,170 --> 00:25:50,220\nthe configuration, what we're going\nto see is relatively the same\n\n469\n00:25:50,220 --> 00:25:53,150\nas what we just took a look\nat in the segment with OSPF.\n\n470\n00:25:53,150 --> 00:25:56,420\nWe'd love to be able to present a show and\ngo, man it's so\n\n471\n00:25:56,420 --> 00:25:59,110\ndifferent, it's so\nwonderful, it's so changing,\n\n472\n00:25:59,110 --> 00:26:02,100\nyou're going to have to learn\nthis whole new set of commands.\n\n473\n00:26:02,100 --> 00:26:04,330\nWe would be lying to you at that point so\nwe're not going to lie to you.\n\n474\n00:26:04,330 --> 00:26:06,370\nIts one of those things where it's like,\n\n475\n00:26:06,370 --> 00:26:08,540\nwe're going to scare you to\ndeath with this, but we're not.\n\n476\n00:26:08,540 --> 00:26:13,010\nYou're going to see that if you can\nkeep configuring OSPF version three,\n\n477\n00:26:13,010 --> 00:26:18,772\nyou're going to see configuring EIGRP in\nIPv6 is not that much more difficult.\n\n478\n00:26:18,772 --> 00:26:21,670\n>> All right, so when we look at this\nconfiguration, you'll see it again,\n\n479\n00:26:21,670 --> 00:26:22,590\nit's not much different.\n\n480\n00:26:22,590 --> 00:26:26,040\nWe have to do our IPv6 unicast routing,\nhave to have that.\n\n481\n00:26:26,040 --> 00:26:29,740\nWe get into our interface, we say IPv6\nenable, assign an address, right?\n\n482\n00:26:29,740 --> 00:26:31,850\nHere's where things get different.\n\n483\n00:26:31,850 --> 00:26:35,030\nWe say ipv6 eigrp 1.\n\n484\n00:26:35,030 --> 00:26:39,860\nRemember with eirgp we don't have area\nnumbers so we don't have to specific that.\n\n485\n00:26:39,860 --> 00:26:41,920\nWe also don't have process ID's.\n\n486\n00:26:41,920 --> 00:26:44,340\nWhat we have is\nan autonomous system number.\n\n487\n00:26:44,340 --> 00:26:46,320\nSo here where I say eigrp 1,\n\n488\n00:26:46,320 --> 00:26:51,030\nthat one is my autonomous system number\nand is a match across all my routers.\n\n489\n00:26:51,030 --> 00:26:56,510\nThen, it'll show like going into EIGRP and\nI've got the router id stuff in there.\n\n490\n00:26:56,510 --> 00:27:01,080\nBut we don't normally do a router id\nin EIGRP because it's link by link so\n\n491\n00:27:01,080 --> 00:27:03,130\nthe router id's aren't that helpful.\n\n492\n00:27:03,130 --> 00:27:04,610\nSo I normally leave that out.\n\n493\n00:27:04,610 --> 00:27:06,840\nBut this is the other\nreally important command.\n\n494\n00:27:06,840 --> 00:27:10,870\nThis is an easy one to forget so\nvery likely to show up on the exam.\n\n495\n00:27:10,870 --> 00:27:16,390\nWith EIGRP,\nyou need to go into the EIGRP process,\n\n496\n00:27:16,390 --> 00:27:20,680\nor the autonomous system configuration,\nand you need to say, no shutdown.\n\n497\n00:27:20,680 --> 00:27:22,290\n>> No shutdown.\n\n498\n00:27:22,290 --> 00:27:24,920\n>> Even if you configure\nEIGRP in all your interfaces,\n\n499\n00:27:24,920 --> 00:27:30,610\nit's still not going to work cuz the EIGRP\nservice, it's not actually running.\n\n500\n00:27:30,610 --> 00:27:34,550\nSo we go into that process, we issue\na no shutdown, and that turns it on.\n\n501\n00:27:34,550 --> 00:27:35,220\nIt gets that running.\n\n502\n00:27:36,280 --> 00:27:36,910\nIf you forget it,\n\n503\n00:27:36,910 --> 00:27:39,470\nyou'll know it right away cuz none\nof your routes are gonna propagate.\n\n504\n00:27:39,470 --> 00:27:41,360\n>> Yeah, so this is strange command for\n\n505\n00:27:41,360 --> 00:27:45,770\nus because normally we issue that no\nshutdown command per interface here.\n\n506\n00:27:45,770 --> 00:27:48,960\n>> This time it's inside of\nthe router process itself.\n\n507\n00:27:48,960 --> 00:27:52,090\nSo make sure you do pay attention\nto that when you do this.\n\n508\n00:27:52,090 --> 00:27:53,100\nEspecially in trouble shooting.\n\n509\n00:27:53,100 --> 00:27:54,880\nThis is an easy one for\nthem to actually to pick on here.\n\n510\n00:27:54,880 --> 00:27:56,100\n>> All right.\n\n511\n00:27:56,100 --> 00:27:57,390\nSo let's go and do the configuration.\n\n512\n00:27:57,390 --> 00:28:00,445\nI'm going to jump over to router one and\nI'm going to start throwing that\n\n513\n00:28:00,445 --> 00:28:03,305\nconfiguration on there and\ngetting this guy set up.\n\n514\n00:28:03,305 --> 00:28:07,215\nNow I still have OSPF running, but\nI'm not worried about that because OSPF\n\n515\n00:28:07,215 --> 00:28:10,635\nhas an administrative distance\nthan worse than EIGRPs.\n\n516\n00:28:10,635 --> 00:28:13,965\nSo when we turn on EIGRP\nit's going to take over for\n\n517\n00:28:13,965 --> 00:28:16,365\nOSPF without me having\nto really do anything.\n\n518\n00:28:16,365 --> 00:28:20,645\nI've already done IPv6 routing here,\nwe've already assigned the IP address so\n\n519\n00:28:20,645 --> 00:28:23,030\nwe can even save on some of that.\n\n520\n00:28:23,030 --> 00:28:28,930\nI really just need to get into my\ninterface and say IPv6 eigrp 1.\n\n521\n00:28:28,930 --> 00:28:29,490\nRight?\n\n522\n00:28:29,490 --> 00:28:33,800\nAnd this router has two interfaces, so\nI'll do the same thing in the other one.\n\n523\n00:28:33,800 --> 00:28:37,750\nSo that's putting those two Interfaces\ninto EIGRP autonomous system one.\n\n524\n00:28:39,430 --> 00:28:44,780\nAnd then, I can get into autonomous system\none and issue that no shutdown command,\n\n525\n00:28:44,780 --> 00:28:48,670\nwhich is what's actually going\nto turn on EIGRP, right?\n\n526\n00:28:48,670 --> 00:28:53,090\nNow I just need to repeat that same\nprocess over on router two and\n\n527\n00:28:53,090 --> 00:28:53,920\non router three.\n\n528\n00:28:57,073 --> 00:29:02,136\n[NOISE] It's kind of hard to remember\n\n529\n00:29:02,136 --> 00:29:07,714\nthe slight variations of the command.\n\n530\n00:29:07,714 --> 00:29:09,710\nHere we go.\n\n531\n00:29:09,710 --> 00:29:11,170\nAnd let me just do one more.\n\n532\n00:29:11,170 --> 00:29:15,510\nI don't know,\nan interface that's actually in.\n\n533\n00:29:15,510 --> 00:29:16,770\nWhatever I left it in.\n\n534\n00:29:16,770 --> 00:29:18,520\nAlways better safe than sorry, right.\n\n535\n00:29:18,520 --> 00:29:20,070\n>> Right.\n>> If you don't know what interface you're\n\n536\n00:29:20,070 --> 00:29:25,933\nin, go ahead and reissue the-\n>> Interface command.\n\n537\n00:29:25,933 --> 00:29:27,320\n>> Mm-hm.\n\n538\n00:29:28,990 --> 00:29:30,080\nThere we go.\n\n539\n00:29:30,080 --> 00:29:32,060\nI see those adjacencies coming up.\n\n540\n00:29:32,060 --> 00:29:34,190\nSo EIGRP is kicking in.\n\n541\n00:29:34,190 --> 00:29:36,160\nWe're starting to exchange routes.\n\n542\n00:29:36,160 --> 00:29:38,310\nAnd we should be up and happy.\n\n543\n00:29:38,310 --> 00:29:41,685\nIf I do a show IPv6 routes.\n\n544\n00:29:41,685 --> 00:29:45,275\nI should see that I know that\n1111 network from before.\n\n545\n00:29:45,275 --> 00:29:49,485\nBut notice the difference here that\ninstead of having an O to the left that I\n\n546\n00:29:49,485 --> 00:29:53,080\nlearned it from OSPF, I have a D\nthat I learned it from EIGRP, right?\n\n547\n00:29:53,080 --> 00:29:53,605\n>> Mm-hm.\n\n548\n00:29:53,605 --> 00:29:54,765\n>> The administrative distance,\n\n549\n00:29:54,765 --> 00:29:59,265\nthis one has an administrative distance\nof 90 versus the 110 that OSPF had.\n\n550\n00:29:59,265 --> 00:30:01,335\nSo the EIGRP route is what's making it in.\n\n551\n00:30:01,335 --> 00:30:04,900\nAnd if I do a show ipv6 protocols.\n\n552\n00:30:04,900 --> 00:30:09,190\nI can see that I'm running EIGRP for\nautonomous system one.\n\n553\n00:30:09,190 --> 00:30:13,230\nAnd see how it says EIGRP-IPv6.\n\n554\n00:30:13,230 --> 00:30:15,990\nIf I'm running it for\nIPv4, it'll show that also.\n\n555\n00:30:15,990 --> 00:30:20,350\nAnd so,\nit'll show it under the show IP protocols.\n\n556\n00:30:20,350 --> 00:30:21,000\nBut I can see it.\n\n557\n00:30:21,000 --> 00:30:23,670\nI can see my router ID was auto generated,\nbut again, in IPv6,\n\n558\n00:30:23,670 --> 00:30:26,170\nwe don't worry about that so much.\n\n559\n00:30:27,420 --> 00:30:34,851\nSo I can see that's up and\nif I do a show IPv6 eigrp neighbors.\n\n560\n00:30:34,851 --> 00:30:39,040\nI can see my neighbors, their addresses,\n\n561\n00:30:39,040 --> 00:30:42,670\nwhich links I'm connected on, how long\nthose sessions have been up, and so on.\n\n562\n00:30:42,670 --> 00:30:45,530\nSo, the rest of the commands\nreally are basically the same,\n\n563\n00:30:45,530 --> 00:30:46,770\nnot a big deal to turn that on.\n\n564\n00:30:46,770 --> 00:30:47,470\n>> Yeah.\n\n565\n00:30:47,470 --> 00:30:48,330\nThe neat thing, and\n\n566\n00:30:48,330 --> 00:30:51,750\nprobably the confusing is that we can\nrun one on top of the other, right.\n\n567\n00:30:51,750 --> 00:30:54,910\nNotice that we're running both\nprotocols exactly at the same time.\n\n568\n00:30:54,910 --> 00:30:57,430\nNow, most of the time you're\nprobably not gonna do that but\n\n569\n00:30:57,430 --> 00:31:00,570\nin a testing environment\nperfectly fine for us to do.\n\n570\n00:31:02,570 --> 00:31:05,710\n>> And\nI want it's up you can add more routes in.\n\n571\n00:31:05,710 --> 00:31:13,080\nAnd you're just attaching the interfaces\nto the EIGRP autonomous system, right?\n\n572\n00:31:13,080 --> 00:31:16,960\nSo if I created a new loop\nback on one of these guys.\n\n573\n00:31:16,960 --> 00:31:23,110\nAnd I gave it an ipv6 address of,\nlet's just,\n\n574\n00:31:23,110 --> 00:31:31,960\nwe'll do all twos on this one.\n\n575\n00:31:31,960 --> 00:31:35,970\nAnd then I just throw it into EIGRP,\nthrow it into that autonomous system one.\n\n576\n00:31:35,970 --> 00:31:38,410\nOnce that's done,\nit's now being advertised.\n\n577\n00:31:38,410 --> 00:31:39,520\nWell let me do a new shut down.\n\n578\n00:31:39,520 --> 00:31:40,889\nIt was already up,\nI didn't have to do that.\n\n579\n00:31:41,950 --> 00:31:43,290\nAnd I can jump over to router one.\n\n580\n00:31:43,290 --> 00:31:46,090\nAnd EIGRP is fast so\nit should already have that route.\n\n581\n00:31:46,090 --> 00:31:52,810\n>> If it doesn't, we may be missing\nthe enable command on that one.\n\n582\n00:31:52,810 --> 00:31:53,841\n>> Oh.\n>> I didn't do an IPv6 enable.\n\n583\n00:31:53,841 --> 00:31:56,090\n[INAUDIBLE] Yeah.\nMust have been the default on that one.\n\n584\n00:31:56,090 --> 00:31:57,360\nSo, there it is.\n\n585\n00:31:57,360 --> 00:31:58,300\nI can see that it's jumped over.\n\n586\n00:31:58,300 --> 00:32:00,008\n>> Oh yeah.\n[INAUDIBLE] I've already learned it's got\n\n587\n00:32:00,008 --> 00:32:01,950\nthe D off to the left side So\nI can see it there.\n\n588\n00:32:01,950 --> 00:32:03,690\nSo we're in business, right?\n\n589\n00:32:03,690 --> 00:32:05,120\nVery easy to work with.\n\n590\n00:32:05,120 --> 00:32:08,900\nWe're learning those routes and\nwe're in business.\n\n591\n00:32:08,900 --> 00:32:10,750\nSo, its a pretty straightforward process.\n\n592\n00:32:10,750 --> 00:32:13,980\nThis is why I say,\ndon't be intimidated by it.\n\n593\n00:32:13,980 --> 00:32:16,100\nIPv6, really not that big of a deal.\n\n594\n00:32:16,100 --> 00:32:18,350\nIt's just a harder address to learn.\n\n595\n00:32:18,350 --> 00:32:21,970\nBut, aside from the address, everything\nelse is the same as you already know it.\n\n596\n00:32:21,970 --> 00:32:24,840\n>> So,\nyour already previous experience with\n\n597\n00:32:24,840 --> 00:32:28,030\nworking with IPv4 is\ngonna help you out here.\n\n598\n00:32:28,030 --> 00:32:31,770\nYour previous experience with configuring\nOSPF version three again is gonna help you\n\n599\n00:32:31,770 --> 00:32:32,930\nout in everything.\n\n600\n00:32:32,930 --> 00:32:35,300\nNotice that we didn't have\nto retype any IP addresses,\n\n601\n00:32:35,300 --> 00:32:37,020\nunless we're issuing other IP addresses.\n\n602\n00:32:37,020 --> 00:32:38,840\nBut we didn't have to do that either.\n\n603\n00:32:38,840 --> 00:32:42,910\nSo it really is a matter of just\nlearning a few basic configurations and\n\n604\n00:32:42,910 --> 00:32:45,270\nyou're ready to go.\n\n605\n00:32:45,270 --> 00:32:46,250\n>> Yeah.\nReally cool.\n\n606\n00:32:46,250 --> 00:32:47,630\nIt is something I encounter a lot.\n\n607\n00:32:47,630 --> 00:32:52,120\nYou talk to people who are like,\nI just can't handle IPv6 or whatever.\n\n608\n00:32:52,120 --> 00:32:52,960\nDon't be like that.\n\n609\n00:32:52,960 --> 00:32:55,240\nIt is the way of the future.\n\n610\n00:32:55,240 --> 00:32:58,510\nWhen we record this show\nfive years from now,\n\n611\n00:32:58,510 --> 00:33:01,260\nit's probably going to be\nall IPv6 at that point.\n\n612\n00:33:01,260 --> 00:33:02,290\nThat's the direction we're going in.\n\n613\n00:33:02,290 --> 00:33:05,430\nDefinitely better to learn it now,\nget comfortable with it, and\n\n614\n00:33:05,430 --> 00:33:06,320\njust make it your own.\n\n615\n00:33:06,320 --> 00:33:08,150\nIt's not a hard thing to work with.\n\n616\n00:33:10,260 --> 00:33:10,880\nAll right, well Ronnie,\n\n617\n00:33:10,880 --> 00:33:15,030\nI think that's about all I've got on\nOSPFv3 and IPv6 routing in general.\n\n618\n00:33:15,030 --> 00:33:17,210\nYou got any other commentary to throw in?\n\n619\n00:33:17,210 --> 00:33:20,295\n>> The only thing,\nremember learn it now is the key.\n\n620\n00:33:20,295 --> 00:33:22,270\n>> [LAUGH]\n>> Right, get familiar with it.\n\n621\n00:33:22,270 --> 00:33:23,830\nThe show that we did in CC and T,\n\n622\n00:33:23,830 --> 00:33:27,550\nI think was a fairly comprehensive\nshow in terms of IP version 6.\n\n623\n00:33:27,550 --> 00:33:30,390\nSo if you're not really comfortable,\nreview that show.\n\n624\n00:33:30,390 --> 00:33:32,080\nThen take a look at\nthe configurations here and\n\n625\n00:33:32,080 --> 00:33:36,990\nyou can see that once you learn one of\nthem, it's going to be very easy for you.\n\n626\n00:33:36,990 --> 00:33:39,630\n>> All right well, ladies and gentlemen,\nhope you guys enjoyed the show.\n\n627\n00:33:39,630 --> 00:33:44,490\nAs always, if you ever have any questions,\nif you're watching us live you can\n\n628\n00:33:44,490 --> 00:33:48,460\ngo to itpro.tv/live, right beneath\nthe video, there's the chat screen.\n\n629\n00:33:48,460 --> 00:33:49,550\nYou can post your questions.\n\n630\n00:33:49,550 --> 00:33:51,890\nWe monitor and answer during the show.\n\n631\n00:33:51,890 --> 00:33:56,480\nAlso, you can post questions 24 hours\na day using our Q and A system.\n\n632\n00:33:56,480 --> 00:33:59,890\nAt the top of every page\non the itpro.tv website.\n\n633\n00:33:59,890 --> 00:34:03,350\nThere's a link that says Q and A, you\npost your questions there, we monitor and\n\n634\n00:34:03,350 --> 00:34:06,920\nanswer and kind of let you know what\nwe think and make sure that you guys\n\n635\n00:34:06,920 --> 00:34:09,970\nhave a good understanding of the topics\nbefore you go into that testing booth and\n\n636\n00:34:09,970 --> 00:34:11,010\ntake that exam.\n\n637\n00:34:11,010 --> 00:34:14,030\nSo definitely take advantage of\nthat resource it's there for you.\n\n638\n00:34:15,070 --> 00:34:17,478\nAll right, well signing off for\nITProTV, I'm Don Pezet.\n\n639\n00:34:17,478 --> 00:34:18,569\n>> I'm Ronnie Wong.\n\n640\n00:34:18,569 --> 00:34:19,126\n[MUSIC]\n\n641\n00:34:19,126 --> 00:34:20,019\n>> And we'll see you next time.\n\n642\n00:34:20,019 --> 00:34:30,019\n[MUSIC]\n\n",
          "vimeoId": "83598267"
        },
        {
          "description": "In this episode Ronnie and Don introduce Enhanced Interior Gateway Routing Protocol (EIGRP). They discuss configuring the protocol and demonstrate some of the advance features and functionality of EIGRP.",
          "length": "6664",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/014-EIGRP.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/014-EIGRP-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/014-EIGRP-sm.jpg",
          "title": "EIGRP",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:15,378 --> 00:00:22,586\n[SOUND]\n\n3\n00:00:22,586 --> 00:00:32,586\n[MUSIC]\n\n4\n00:00:34,503 --> 00:00:36,558\nAll right, good morning,\ngood afternoon and\n\n5\n00:00:36,558 --> 00:00:39,254\ngood afternoon welcome back to\nanother episode of TV Pro TV.\n\n6\n00:00:39,254 --> 00:00:42,061\nI'm your host Don Pezet,\ntoday with Mr. Ronnie Wong.\n\n7\n00:00:42,061 --> 00:00:43,020\nHow's it going Ronnie?\n\n8\n00:00:43,020 --> 00:00:47,410\n>> I am doing well, I have been selected\nfor next season's the Bachelor.\n\n9\n00:00:47,410 --> 00:00:49,370\n>> Really?\nNow are you gonna be the bachelor, or\n\n10\n00:00:49,370 --> 00:00:51,281\nare you gonna be a contestant?\n\n11\n00:00:51,281 --> 00:00:53,057\n[LAUGH]\n>> That hasn't been decided yet, but\n\n12\n00:00:53,057 --> 00:00:53,873\nI've been selected.\n\n13\n00:00:53,873 --> 00:00:54,929\n>> Ronnie Wong, bachelorette.\n\n14\n00:00:54,929 --> 00:00:55,937\n[LAUGH]\n>> That's right.\n\n15\n00:00:55,937 --> 00:00:58,510\n[LAUGH] Wonder what my wife\nwould think about that.\n\n16\n00:00:58,510 --> 00:00:59,930\nShe probably would not appreciate that.\n\n17\n00:00:59,930 --> 00:01:00,760\n>> She'd root for you.\n\n18\n00:01:00,760 --> 00:01:02,362\nI hope he gets a rose tonight.\n\n19\n00:01:02,362 --> 00:01:05,060\nAll right, well ladies and gentlemen,\n\n20\n00:01:05,060 --> 00:01:09,710\ntoday we are diving into\nthe wonderful world of EIGRP.\n\n21\n00:01:09,710 --> 00:01:12,050\nWhich is some acronym soup for us,\n\n22\n00:01:12,050 --> 00:01:16,180\nthe enhanced interior\ngateway routing protocol.\n\n23\n00:01:16,180 --> 00:01:20,670\nAnd if you've been a fan of the series so\nfar then you probably just watched\n\n24\n00:01:20,670 --> 00:01:25,230\nthe OSPF episode,\nthe open shortest path first protocol.\n\n25\n00:01:25,230 --> 00:01:28,100\nAnd that was our first\nchance to see a truly\n\n26\n00:01:28,100 --> 00:01:30,830\nfull featured dynamic routing protocol.\n\n27\n00:01:30,830 --> 00:01:31,650\nIt's pretty cool.\n\n28\n00:01:31,650 --> 00:01:32,680\n>> Yeah\n>> Right?\n\n29\n00:01:32,680 --> 00:01:33,930\nVery common protocol,\n\n30\n00:01:33,930 --> 00:01:37,130\nprobably the most common used in most\ncorporations that are out there.\n\n31\n00:01:37,130 --> 00:01:38,450\nBut today we are gonna look at EIGRP.\n\n32\n00:01:38,450 --> 00:01:42,070\nAnd you are gonna notice a lot\nof parallels between EIGRP and\n\n33\n00:01:42,070 --> 00:01:45,890\nOSPF, but keep in mind some\nof the major differences and\n\n34\n00:01:45,890 --> 00:01:47,700\nmaybe we should start out right there,\nRonnie.\n\n35\n00:01:47,700 --> 00:01:50,490\nOur basic kind of description.\n\n36\n00:01:50,490 --> 00:01:55,390\n>> Yeah, but when it comes down to it, and\nDon we've talked about this before, Don,\n\n37\n00:01:55,390 --> 00:01:59,160\nyou said a EIGRP is\nactually a better protocol,\n\n38\n00:01:59,160 --> 00:02:03,330\nand more sophisticated\nprotocol than the OSPF, right?\n\n39\n00:02:03,330 --> 00:02:06,750\nAnd, so when we mention this here,\nthe reason why is that there's\n\n40\n00:02:06,750 --> 00:02:11,030\na ton of additional benefits that\nthey came out with, with EIGRP.\n\n41\n00:02:11,030 --> 00:02:15,190\nAnd the strange thing about EIGRP, is\nthat it really began as kind of a dog of\n\n42\n00:02:15,190 --> 00:02:20,030\na protocol in terms of the older\nIGRP that was introduced by Cisco,\n\n43\n00:02:20,030 --> 00:02:22,560\nbut they really didn't actually\ndo a good job with it at all.\n\n44\n00:02:22,560 --> 00:02:24,620\nAnd so they decided to improve on it.\n\n45\n00:02:24,620 --> 00:02:27,520\nAnd so there's a lot of\nfeatures that we wanted to talk\n\n46\n00:02:27,520 --> 00:02:30,560\nabout here when we start talking about\nthe idea of the advancements that we have.\n\n47\n00:02:30,560 --> 00:02:32,550\n>> Yeah, so\nthe original protocol was IGRP,\n\n48\n00:02:32,550 --> 00:02:35,210\nthe interior gateway routing protocol.\n\n49\n00:02:36,320 --> 00:02:38,490\nLike Ronnie said,\nit was an older protocol.\n\n50\n00:02:38,490 --> 00:02:41,190\nDefinitely had some pretty\nbig limitations on it.\n\n51\n00:02:41,190 --> 00:02:43,350\nAnd so Cisco improved upon it and\n\n52\n00:02:43,350 --> 00:02:47,080\nmade EIGRP the enhanced Interior\ngateway writing protocol.\n\n53\n00:02:47,080 --> 00:02:48,630\nSo it's enhanced, it's better.\n\n54\n00:02:48,630 --> 00:02:49,380\n>> Yeah.\n>> That's it.\n\n55\n00:02:49,380 --> 00:02:50,244\n>> Yeah.\n>> Episode's over, right?\n\n56\n00:02:50,244 --> 00:02:52,540\n[LAUGH]\n>> Sure, we're ready to go here.\n\n57\n00:02:52,540 --> 00:02:57,200\nSome of the advancements actually did help\nus because as the internet continued to\n\n58\n00:02:57,200 --> 00:03:00,180\ndevelop, we started actually\nneeding more and more IP addresses.\n\n59\n00:03:00,180 --> 00:03:04,290\nSo it really helped us by actually\nbeing able to handle things like Syder.\n\n60\n00:03:04,290 --> 00:03:06,460\nAnd the idea of VLSF.\n\n61\n00:03:06,460 --> 00:03:08,130\nSo being able to do route summarization,\n\n62\n00:03:08,130 --> 00:03:11,830\nas well as being able to do subnetting,\nwhereas the original one couldn't do it.\n\n63\n00:03:11,830 --> 00:03:14,310\nThey simply had to follow\nthe class full addressing.\n\n64\n00:03:14,310 --> 00:03:17,460\nThat's one of the benefits\nthat really did help out with.\n\n65\n00:03:17,460 --> 00:03:19,450\n>> Yeah, unlike OSPF.\n\n66\n00:03:19,450 --> 00:03:23,160\nOSPF has pretty much been classless\nsince the very beginning.\n\n67\n00:03:23,160 --> 00:03:26,430\nAnd OSPF was kind of its\nown individual invention.\n\n68\n00:03:26,430 --> 00:03:28,218\nEIGRP, on the other hand, does not, right?\n\n69\n00:03:28,218 --> 00:03:29,202\n>> Mm-hm.\n\n70\n00:03:29,202 --> 00:03:32,160\n>> We don't really talk too\nmuch about it on the exams too\n\n71\n00:03:32,160 --> 00:03:32,830\nmuch anymore\n>> Yeah.\n\n72\n00:03:32,830 --> 00:03:36,620\n>> But we used to have to learn\nRIP version one, and IGRP.\n\n73\n00:03:36,620 --> 00:03:39,660\nBoth of those are very old\nrouting protocols, and\n\n74\n00:03:39,660 --> 00:03:41,690\nthey were developed in the classful days.\n\n75\n00:03:41,690 --> 00:03:43,750\n>> Mm-hm.\n>> So they did classful routing.\n\n76\n00:03:43,750 --> 00:03:45,690\nThat meant you had to adhere\nto the Class A, B, and\n\n77\n00:03:45,690 --> 00:03:48,210\nC nomenclature and all that stuff.\n\n78\n00:03:48,210 --> 00:03:50,880\nAnd you had to make sure\nyou follow the rules.\n\n79\n00:03:50,880 --> 00:03:52,250\nWell, we don't do that anymore.\n\n80\n00:03:52,250 --> 00:03:54,580\nLike Ronnie said,\nas the IP addresses started to run out,\n\n81\n00:03:54,580 --> 00:03:56,820\nwe started doing VLSM and CIDR.\n\n82\n00:03:56,820 --> 00:04:00,065\nAnd so EIGRP introduced support for\nthat, and so did RIPv2.\n\n83\n00:04:00,065 --> 00:04:02,555\nBut the reason I bring it up now is,\n\n84\n00:04:02,555 --> 00:04:05,045\neven though we don't need to\nlearn those old protocols.\n\n85\n00:04:05,045 --> 00:04:08,315\nEIGRP is designed to be\nbackwards compatible with IGRP.\n\n86\n00:04:08,315 --> 00:04:08,845\n>> Right.\n\n87\n00:04:08,845 --> 00:04:15,025\n>> And so in many ways, it still\noperates like a classful protocol.\n\n88\n00:04:15,025 --> 00:04:18,890\nNow it is classless,\nit does support VLSM insider.\n\n89\n00:04:18,890 --> 00:04:20,900\nBut its default activities,\n\n90\n00:04:20,900 --> 00:04:23,320\na lot of time will reflect\nthose old classical boundaries.\n\n91\n00:04:23,320 --> 00:04:25,340\nAnd we'll see that during the show.\n\n92\n00:04:25,340 --> 00:04:30,050\nAs we do things with EIGRP, it will\nhave the same support OSPF does, but\n\n93\n00:04:30,050 --> 00:04:34,160\nthe defaults might make it look a little\nmore limited until we tweak it a bit and\n\n94\n00:04:34,160 --> 00:04:35,210\nget it set up.\n\n95\n00:04:35,210 --> 00:04:39,410\nAnd properly configured, I will tell\nyou right now, and I'll go on record.\n\n96\n00:04:39,410 --> 00:04:41,230\nYou can document this.\n\n97\n00:04:41,230 --> 00:04:46,410\nEIGRP makes better and faster decisions,\n\n98\n00:04:46,410 --> 00:04:52,800\nwhile incurring less processor load and\nmemory load on a router than OSPF, right?\n\n99\n00:04:52,800 --> 00:04:56,790\nSo EIGRP is a better protocol than OSPF,\nright?\n\n100\n00:04:56,790 --> 00:05:01,210\nBut OSPF is the most common enterprise\nrouting protocol in the world.\n\n101\n00:05:01,210 --> 00:05:03,300\n>> Yeah.\nSo if EIGRP is better,\n\n102\n00:05:03,300 --> 00:05:07,030\nif somebody like me is willing got go\non record and say it's better, and\n\n103\n00:05:07,030 --> 00:05:10,840\nthen I say [LAUGH] well yeah, but\neverywhere I've worked I've done OSPF.\n\n104\n00:05:10,840 --> 00:05:13,080\nAll right?\nYou might say wait a minute Don,\n\n105\n00:05:13,080 --> 00:05:13,650\nwhat's going on here.\n\n106\n00:05:13,650 --> 00:05:15,795\nWhy are you saying one is better,\nbut you always run the other.\n\n107\n00:05:15,795 --> 00:05:16,750\nAll right?\n\n108\n00:05:16,750 --> 00:05:22,000\nThe main reason EIGRP is not sweeping\nthe world is that it is SICO proprietary.\n\n109\n00:05:22,000 --> 00:05:24,210\nIt is their own protocol.\n\n110\n00:05:24,210 --> 00:05:25,450\nTheir own algorithm.\n\n111\n00:05:25,450 --> 00:05:26,680\nThey created it.\n\n112\n00:05:26,680 --> 00:05:30,240\nAnd if you want to run EIGRP\non third party equipment.\n\n113\n00:05:30,240 --> 00:05:31,300\n>> You can.\n>> The third party,\n\n114\n00:05:31,300 --> 00:05:33,500\nthey have to license it from Cisco.\n\n115\n00:05:33,500 --> 00:05:34,700\n>> Yeah.\n>> And for a long time day wouldn't do\n\n116\n00:05:34,700 --> 00:05:35,690\nthat, and now they do.\n\n117\n00:05:35,690 --> 00:05:37,480\nYou can license it, but nobody's doing it.\n\n118\n00:05:37,480 --> 00:05:38,470\nThey just say, well forget it,\n\n119\n00:05:38,470 --> 00:05:42,235\nwe'll just do it OSPF instead, and\nthat's why OSPF is more popular.\n\n120\n00:05:42,235 --> 00:05:46,145\nAnd even from me,\nwhere I say, I love EIGRP.\n\n121\n00:05:46,145 --> 00:05:51,930\nBut at the bank I used to work at,\nwe had CISCO routers.\n\n122\n00:05:51,930 --> 00:05:53,670\nAnd we had Juniper firewalls.\n\n123\n00:05:53,670 --> 00:05:56,290\n>> And\nthe Juniper firewalls couldn't run EIGRP.\n\n124\n00:05:56,290 --> 00:05:59,720\nThey ran OSPF, well, so\ndid the Cisco routers.\n\n125\n00:05:59,720 --> 00:06:01,140\nSo we switched to OSPF.\n\n126\n00:06:01,140 --> 00:06:03,650\nAnd OSPF has all the features we need.\n\n127\n00:06:03,650 --> 00:06:07,711\nBut it has a little bit more memory\nrequirement, a little more CPU load.\n\n128\n00:06:07,711 --> 00:06:08,795\nAnd it's a little bit slower.\n\n129\n00:06:08,795 --> 00:06:10,203\nNow, when I say slow,\n\n130\n00:06:10,203 --> 00:06:15,336\nwe're talking about the difference between\nhalf a second and one to two seconds.\n\n131\n00:06:15,336 --> 00:06:16,170\n>> Yeah.\n\n132\n00:06:16,170 --> 00:06:18,750\n>> So it's a very,\nvery small window of time,\n\n133\n00:06:18,750 --> 00:06:22,670\nusually the equivalent of\none ping is what gets lost.\n\n134\n00:06:22,670 --> 00:06:26,640\nBut it is there, and in a critical\nnetwork, that may be a big deal.\n\n135\n00:06:26,640 --> 00:06:30,460\n>> Yeah and speaking of that in terms\nof performance and everything else,\n\n136\n00:06:30,460 --> 00:06:34,100\nthe other advantage of EIRGP that we\nalso have, is that they declare it.\n\n137\n00:06:34,100 --> 00:06:39,100\nEIGRP declares that it is\na hundred percent loop free.\n\n138\n00:06:39,100 --> 00:06:43,670\nSo even though it's basis comes off of\na distance vector protocol like IGRP,\n\n139\n00:06:43,670 --> 00:06:49,460\nEIGRP says hey, we fixed that and not only\ncan we say that it's gonna handle loops,\n\n140\n00:06:49,460 --> 00:06:51,370\nwe're saying it's one\nhundred percent loop free.\n\n141\n00:06:51,370 --> 00:06:53,830\n>> Yep.\n>> That's a pretty impressive claim Don.\n\n142\n00:06:53,830 --> 00:06:59,310\n>> OSPF is fairly loop free also and\nthe way it does it is\n\n143\n00:06:59,310 --> 00:07:04,880\none router in an OSPF autonomous system,\nor even just in an area,\n\n144\n00:07:04,880 --> 00:07:09,510\nwill know about all the other\nrouters in that area.\n\n145\n00:07:09,510 --> 00:07:13,370\nIf you've got single area OSPF, which is\nwhat we covered, then that's all you have.\n\n146\n00:07:13,370 --> 00:07:16,970\nSo, one router will know about all the\nother routers in that autonomous system.\n\n147\n00:07:16,970 --> 00:07:19,660\nWell, that means you gotta\nmaintain a pretty big data base.\n\n148\n00:07:19,660 --> 00:07:21,460\n>> Right.\n>> Of all those routers out there and\n\n149\n00:07:21,460 --> 00:07:24,550\nof all the routes that are there and\nwhat's being networked and advertised.\n\n150\n00:07:24,550 --> 00:07:27,063\nAnd so when they run the OSPF or\nthe SPF algorithms,\n\n151\n00:07:27,063 --> 00:07:30,294\nthey can figure out where there's\nloops and [INAUDIBLE] them out.\n\n152\n00:07:30,294 --> 00:07:31,050\nRight?\n\n153\n00:07:31,050 --> 00:07:35,730\nWell EIGRP is a distance vector protocol.\n\n154\n00:07:35,730 --> 00:07:38,240\nIt's not link state like OSPF,\nits distance vector.\n\n155\n00:07:38,240 --> 00:07:41,895\nAnd that means your router is only\ntalking directly to its neighbors.\n\n156\n00:07:41,895 --> 00:07:42,730\n>> Mm-hm.\n>> Other routers it's\n\n157\n00:07:42,730 --> 00:07:43,580\ndirectly connected to.\n\n158\n00:07:43,580 --> 00:07:46,560\nIt doesn't know all the routers\nthrough the network.\n\n159\n00:07:46,560 --> 00:07:49,660\nSo your first thought might be well if\nit doesn't know all the routers that\n\n160\n00:07:49,660 --> 00:07:51,695\nare out there, we might have loops.\n\n161\n00:07:51,695 --> 00:07:53,130\n>> Mm-hm.\n\n162\n00:07:53,130 --> 00:07:55,858\nThere's a few things that come\ninto play to prevent them, and\n\n163\n00:07:55,858 --> 00:07:59,435\nI know we covered these in other episodes\nso I'm just going to mention them here.\n\n164\n00:07:59,435 --> 00:08:06,922\nWe talked about poison reverse,\nsplit horizon, and.\n\n165\n00:08:06,922 --> 00:08:09,072\nShoot, maximum metrics.\n\n166\n00:08:09,072 --> 00:08:11,310\nThe whole count to infinity thing.\n\n167\n00:08:11,310 --> 00:08:16,770\nThose are features that are built into\nCisco routers that accent EIGRP and\n\n168\n00:08:16,770 --> 00:08:19,170\nhelp it to stop loops before they occur.\n\n169\n00:08:19,170 --> 00:08:21,870\nAnd then there's something called\na feasibility calculation.\n\n170\n00:08:21,870 --> 00:08:25,670\nNow, I don't wanna get into that just yet,\ncuz if you just learned what EIGRP\n\n171\n00:08:25,670 --> 00:08:30,090\nwas in the last five minutes, feasibility\ncalculations are kind of out there.\n\n172\n00:08:30,090 --> 00:08:34,040\nSo, let's hold off on that concept for\nlater in the episode.\n\n173\n00:08:34,040 --> 00:08:37,590\nBut there's a mathematical operation\nthey run where they can calculate loops.\n\n174\n00:08:37,590 --> 00:08:42,280\nNow, it does mean that occasionally\nEIGRP blocks a real route\n\n175\n00:08:42,280 --> 00:08:45,818\nbecause it might be a loop, so it can\nmake a mistake whereas OSPF doesn't.\n\n176\n00:08:45,818 --> 00:08:49,272\nBut the trade off is you get\nmuch better performance and\n\n177\n00:08:49,272 --> 00:08:52,890\nfaster decisions and\na 100% loop free environment.\n\n178\n00:08:52,890 --> 00:08:55,510\nYou actually cannot\ncreate a loop in EIGRP.\n\n179\n00:08:55,510 --> 00:08:56,810\n>> Yeah.\n\n180\n00:08:56,810 --> 00:09:00,970\nThe other thing that we also have\nwith EIGRP is the idea here that,\n\n181\n00:09:00,970 --> 00:09:01,870\nlike OSPF here.\n\n182\n00:09:01,870 --> 00:09:04,790\nI know we're comparing a lot against OSPF,\nbut that's really a direct comparison for\n\n183\n00:09:04,790 --> 00:09:09,600\nus, is that OSPF was really\ndesigned around the IP protocol.\n\n184\n00:09:09,600 --> 00:09:13,600\nEIGRP though, it doesn't really care\nwhat ticker protocol you run so\n\n185\n00:09:13,600 --> 00:09:17,590\nif you wanted to you could run IP,\nyou could run IP version six,\n\n186\n00:09:17,590 --> 00:09:20,570\nyou could even choose, Don,\nif you wanted to run Apple talk.\n\n187\n00:09:20,570 --> 00:09:21,383\nI don't know if you would.\n\n188\n00:09:21,383 --> 00:09:21,951\n>> You can.\n\n189\n00:09:21,951 --> 00:09:23,760\n>> Or IPXSPX here.\n\n190\n00:09:23,760 --> 00:09:28,350\nAnd so in that particular advantage here,\nEIGRP was really designed at the beginning\n\n191\n00:09:28,350 --> 00:09:30,990\nto say hey we'll support anything\nthat's actually out there.\n\n192\n00:09:30,990 --> 00:09:34,280\nAnd they are simply just replacing\nthe addressing component of it,\n\n193\n00:09:34,280 --> 00:09:39,900\nwith a different component like Appletalk\nor IPXSPS, or whatever else is out there.\n\n194\n00:09:39,900 --> 00:09:43,730\nSo we had mentioned this before, we might\nhave mentioned it in the OSPF episode,\n\n195\n00:09:43,730 --> 00:09:45,250\nfor all I know.\n\n196\n00:09:45,250 --> 00:09:48,740\nThat OSPF had to be written\nfrom the ground up.\n\n197\n00:09:48,740 --> 00:09:51,630\nOkay, rewritten when they\nsupported IP version six.\n\n198\n00:09:51,630 --> 00:09:56,050\nWhen EIGRP, they simply added in\nthe IPV 6 module and it's ready to go.\n\n199\n00:09:56,050 --> 00:09:57,950\nSo it made it a very flexible protocol.\n\n200\n00:09:57,950 --> 00:09:59,450\n>> And module that's the keyword.\n\n201\n00:09:59,450 --> 00:10:01,020\n>> Yeah.\n>> You want to remember for the exam.\n\n202\n00:10:01,020 --> 00:10:03,960\nThe EIGRP protocol is a modular.\n\n203\n00:10:03,960 --> 00:10:08,320\nCisco designed it where you have\nthe logic engine, the formula, and\n\n204\n00:10:08,320 --> 00:10:10,920\nthen you have modules for\neach of the protocols so\n\n205\n00:10:10,920 --> 00:10:13,410\nwhen a new protocol comes out,\nCisco just writes a new module.\n\n206\n00:10:13,410 --> 00:10:18,139\nSo there's an IPV four module,\nIPV six, what are the other one?\n\n207\n00:10:18,139 --> 00:10:20,233\nThere's Apple talk, IPXSPX,\n\n208\n00:10:20,233 --> 00:10:24,500\nthere is a decknet module\nthere's a couple of other ones.\n\n209\n00:10:24,500 --> 00:10:27,640\nIf it's a routable protocol,\nthe odds are Cisco's written a module.\n\n210\n00:10:27,640 --> 00:10:30,110\nIf it's netbuoy, it's nonroutable.\n\n211\n00:10:30,110 --> 00:10:31,260\nCisco's not gonna write a module.\n\n212\n00:10:31,260 --> 00:10:32,750\nBut most of the other\nones they've done it.\n\n213\n00:10:32,750 --> 00:10:34,520\nSo, very cool that it does that,\n\n214\n00:10:34,520 --> 00:10:37,800\nand it was one of the first\nrouting protocols to support IPv6.\n\n215\n00:10:37,800 --> 00:10:41,500\nI think ISIS was the first one.\n\n216\n00:10:41,500 --> 00:10:45,390\nBut OSPF, they have to rewrite that from\nscratch every time they want to support\n\n217\n00:10:45,390 --> 00:10:47,280\na new protocol, so it is a big deal.\n\n218\n00:10:48,780 --> 00:10:50,750\nAll right, and so\nkind of keep that in mind.\n\n219\n00:10:50,750 --> 00:10:54,220\nThat's another kind of bell and\nwhistle that EIGRP has.\n\n220\n00:10:54,220 --> 00:10:57,990\nSo there are a few other neat things that,\nyou know,\n\n221\n00:10:57,990 --> 00:10:59,030\nwe could throw out the names here.\n\n222\n00:10:59,030 --> 00:11:00,190\nBut they're not gonna make a lot of sense.\n\n223\n00:11:00,190 --> 00:11:03,080\nSo, you know,\nlike Route Auto Summarization and stuff.\n\n224\n00:11:03,080 --> 00:11:05,600\nLet's save that for\nwhen we're actually in the routers and\n\n225\n00:11:05,600 --> 00:11:06,500\nwe can kind of show it off.\n\n226\n00:11:07,770 --> 00:11:11,510\nThere's a couple other neat little\nfeatures with EIGRP that are really cool,\n\n227\n00:11:11,510 --> 00:11:14,880\nyou'll enjoy them, they'll help you out,\nif you're aware of them and\n\n228\n00:11:14,880 --> 00:11:16,615\nif you plan for them properly.\n\n229\n00:11:16,615 --> 00:11:18,565\nIf you do core planning with EIGRP,\n\n230\n00:11:18,565 --> 00:11:21,265\nyou can actually kind of\nmess up the network a bit.\n\n231\n00:11:21,265 --> 00:11:22,825\n>> Yeah.\n>> So you have to be careful there.\n\n232\n00:11:22,825 --> 00:11:24,315\n>> Yeah.\nSo for us here,\n\n233\n00:11:24,315 --> 00:11:27,005\nwe wanna make sure that\nwe understand here.\n\n234\n00:11:27,005 --> 00:11:30,605\nFor EIGRP,\ndo not consider it a link state protocol,\n\n235\n00:11:30,605 --> 00:11:34,165\neven though we'll see a lot of it\ndoes act like a link state protocol.\n\n236\n00:11:34,165 --> 00:11:38,460\nIt is really, and this is where the\nterminology and Don can help me out here,\n\n237\n00:11:38,460 --> 00:11:41,970\nsometimes you might hear it also\nreferred to as a hybrid protocol, or\n\n238\n00:11:41,970 --> 00:11:45,510\nthe term advanced distance\nvector protocol as well.\n\n239\n00:11:45,510 --> 00:11:48,600\nAnd that's because in the EIGRP itself,\n\n240\n00:11:48,600 --> 00:11:52,870\nit does at the very beginning act like\na regular distance vector protocol.\n\n241\n00:11:52,870 --> 00:11:55,300\nBut then in terms of the way it\nactually starts handling routes and\n\n242\n00:11:55,300 --> 00:11:58,688\neverything else\n>> It actually does act like an open-\n\n243\n00:11:58,688 --> 00:11:59,368\n>> So let's.\n\n244\n00:11:59,368 --> 00:12:00,660\n>> Link-State first.\n\n245\n00:12:00,660 --> 00:12:01,660\n>> Let's go further into that.\n\n246\n00:12:01,660 --> 00:12:03,110\n>> Yeah.\n>> Cuz this is an important concept.\n\n247\n00:12:03,110 --> 00:12:03,610\nRight?\n\n248\n00:12:04,910 --> 00:12:08,670\nRonnie's mentioned and I've mentioned,\nDistance Vector and LinkState protocol, so\n\n249\n00:12:08,670 --> 00:12:11,030\nI know we've covered them in other\nepisodes but let's just do a review.\n\n250\n00:12:11,030 --> 00:12:11,630\nRight?\n\n251\n00:12:11,630 --> 00:12:13,350\n>> Right.\n>> Let's pull up this topology here.\n\n252\n00:12:13,350 --> 00:12:14,820\nThis is a topology that Ronnie made.\n\n253\n00:12:14,820 --> 00:12:16,820\nWe're gonna use this in the show.\n\n254\n00:12:16,820 --> 00:12:19,850\nSo it's a couple of routers\nthat are spread out, and\n\n255\n00:12:19,850 --> 00:12:23,960\nwe've got these are one hundred\nmegabit links right here.\n\n256\n00:12:23,960 --> 00:12:25,060\nThey're fast ethernet.\n\n257\n00:12:26,170 --> 00:12:29,270\nThis is a ten megabit link here,\nor, yeah ten megabit.\n\n258\n00:12:29,270 --> 00:12:32,190\nAnd then we gotta serial link,\nRonnie what's the bandwidth on that one?\n\n259\n00:12:32,190 --> 00:12:33,070\nDo you know?\n\n260\n00:12:33,070 --> 00:12:35,542\n>> I think it was 256.\n\n261\n00:12:35,542 --> 00:12:37,290\n>> So it's a serial line.\n\n262\n00:12:37,290 --> 00:12:40,550\nProbably at a maximum,\nit's 1.544 megabit or something, right?\n\n263\n00:12:40,550 --> 00:12:42,060\nSo very, very low bandwidth.\n\n264\n00:12:42,060 --> 00:12:44,050\nAnd then we've got another\n100 megabit link here, right?\n\n265\n00:12:44,050 --> 00:12:48,679\nSo we've got various links\nin place in this topology.\n\n266\n00:12:48,679 --> 00:12:53,990\nA linkstate protocol, like OSPF,\nis very powerful, because\n\n267\n00:12:53,990 --> 00:12:58,100\nif you're sitting here on this router,\nand this router is trying to figure out\n\n268\n00:12:58,100 --> 00:13:02,100\nhow to get all the way over here,\nit's gotta calculate the different routes.\n\n269\n00:13:02,100 --> 00:13:03,060\nRight?\nAnd let's look at all\n\n270\n00:13:03,060 --> 00:13:03,690\nthe different routes.\n\n271\n00:13:03,690 --> 00:13:09,870\nWe can go up across the top like that,\nwe can go like this.\n\n272\n00:13:11,150 --> 00:13:15,470\nWe can go across the bottom like that.\n\n273\n00:13:15,470 --> 00:13:18,410\nAnd there's gotta be at\nleast one more path.\n\n274\n00:13:18,410 --> 00:13:21,340\nWe can go this way, like that.\n\n275\n00:13:21,340 --> 00:13:24,750\nSo, there's actually four different paths\nfor me to get from point a to point b.\n\n276\n00:13:24,750 --> 00:13:27,690\nI've got several different\nchoices to get there.\n\n277\n00:13:27,690 --> 00:13:31,880\nSo, you're router's gotta make a decision\nand with a linkstate protocol.\n\n278\n00:13:31,880 --> 00:13:35,070\nThe router on the left,\nthis guy over here,\n\n279\n00:13:35,070 --> 00:13:38,990\nhe knows about this router and\nhe knows about this router and\n\n280\n00:13:38,990 --> 00:13:41,930\nhe knows about this router down here and\nthe network they are attaching to.\n\n281\n00:13:41,930 --> 00:13:46,485\nHe knows the whole topology and\nhe's able to run that shortest path\n\n282\n00:13:46,485 --> 00:13:50,805\nfirst algorithm across it and calculate\nit out taking into account bandwidth.\n\n283\n00:13:50,805 --> 00:13:54,265\nLooking at the bandwidth of the line\nbecause if you think about these paths,\n\n284\n00:13:54,265 --> 00:13:59,245\nwhen we go this way,\nI've got a 100 megabit line here and\n\n285\n00:13:59,245 --> 00:14:03,805\na 1.5 megabit or a 256k,\nlet's say it's 256, right?\n\n286\n00:14:03,805 --> 00:14:04,345\nA 256k link there.\n\n287\n00:14:05,365 --> 00:14:07,760\nBut if we go across the bottom.\n\n288\n00:14:07,760 --> 00:14:11,205\nIt's 100 megabit here and\n100 megabit here.\n\n289\n00:14:11,205 --> 00:14:14,070\nTo 100 megabit the whole way across,\nright?\n\n290\n00:14:14,070 --> 00:14:16,550\nOr if we take any of the paths\nthat go across here,\n\n291\n00:14:16,550 --> 00:14:18,490\nit sees that's a 10 megabit line.\n\n292\n00:14:18,490 --> 00:14:23,000\nAnd it uses that to determine\nwhat going to be the best path.\n\n293\n00:14:23,000 --> 00:14:27,500\nAnd in this case, the best path,\nI'm having a hard time saying that.\n\n294\n00:14:27,500 --> 00:14:29,670\nThe best path is gonna\nbe across the bottom,\n\n295\n00:14:29,670 --> 00:14:32,260\nbecause it's all 100 megabit links.\n\n296\n00:14:32,260 --> 00:14:36,270\nA link state protocol will see that and\nbe aware of that.\n\n297\n00:14:36,270 --> 00:14:39,580\nAll right, but it had to be\naware of down stream systems and\n\n298\n00:14:39,580 --> 00:14:41,930\nthat's one of the limiting\nfactors of a link state protocol,\n\n299\n00:14:41,930 --> 00:14:45,050\nit's just a little more resource hungry,\nall right?\n\n300\n00:14:45,050 --> 00:14:47,600\nA distance vector protocol though.\n\n301\n00:14:47,600 --> 00:14:51,180\nA distance vector protocol is\njust going to look at hop count.\n\n302\n00:14:51,180 --> 00:14:53,250\nThat's all it cares about is hop count.\n\n303\n00:14:53,250 --> 00:14:57,890\nThat hop count, it'll say, all right,\nwell if I go down to this router and\n\n304\n00:14:57,890 --> 00:15:00,860\nto my destination, that's one hop.\n\n305\n00:15:00,860 --> 00:15:02,330\nRight?\nI passed through one router on my\n\n306\n00:15:02,330 --> 00:15:03,690\nway there.\n\n307\n00:15:03,690 --> 00:15:08,320\nIf I go the top way, that's one router\nalso, I pass through the top router and\n\n308\n00:15:08,320 --> 00:15:09,880\nI get to my destination.\n\n309\n00:15:09,880 --> 00:15:14,905\nBut if we go through the other ways like\nthis, one router, two router, destination.\n\n310\n00:15:14,905 --> 00:15:19,740\n>> Mm-hm\n>> Or one router, two router, destination.\n\n311\n00:15:19,740 --> 00:15:22,720\nSo two hops versus one hop.\n\n312\n00:15:24,300 --> 00:15:28,200\nDistance vector protocol\nwill pick one hop over two.\n\n313\n00:15:28,200 --> 00:15:32,340\nThe issue though, is it's gonna\nview these two pads as equal.\n\n314\n00:15:32,340 --> 00:15:34,260\n>> Yeah.\n>> It doesn't look at band width.\n\n315\n00:15:34,260 --> 00:15:35,880\n>> Right.\n>> It ignores band width, so\n\n316\n00:15:35,880 --> 00:15:38,320\nit thinks these are two equal pads.\n\n317\n00:15:38,320 --> 00:15:42,400\nWhen in reality I might have 256K\nlink here and a 100 meg link here,\n\n318\n00:15:42,400 --> 00:15:44,310\nit's a bad decision.\n\n319\n00:15:44,310 --> 00:15:45,540\n>> Yeah.\n\n320\n00:15:45,540 --> 00:15:48,810\n>> So when we say EIGRP is\na distance vector protocol,\n\n321\n00:15:48,810 --> 00:15:50,580\nyou might immediately think,\noh well it's crap.\n\n322\n00:15:50,580 --> 00:15:51,420\nI'm not gonna run that.\n\n323\n00:15:51,420 --> 00:15:54,890\nWell you'd be right if that\nwas exactly how it worked.\n\n324\n00:15:54,890 --> 00:15:56,582\nBut Cisco likes to call it.\n\n325\n00:15:56,582 --> 00:15:57,540\n>> Yeah.\n[LAUGH]\n\n326\n00:15:57,540 --> 00:15:58,470\n>> A few different things.\n\n327\n00:15:58,470 --> 00:16:02,570\nThey used to call it a hybrid\ndistance vector protocol.\n\n328\n00:16:02,570 --> 00:16:05,620\nBut there was a lot of outrage in\nthe network community and stuff, saying,\n\n329\n00:16:05,620 --> 00:16:06,680\nwell what's it a hybrid with.\n\n330\n00:16:06,680 --> 00:16:07,495\n>> Yeah.\n>> What's the other thing you combine it\n\n331\n00:16:07,495 --> 00:16:08,590\nwith?\nIt's not a hybrid anything.\n\n332\n00:16:08,590 --> 00:16:09,876\nYou're making terms up.\n\n333\n00:16:09,876 --> 00:16:12,392\nAnd so now Cisco just calls it a advanced.\n\n334\n00:16:12,392 --> 00:16:13,424\n>> Advanced.\n\n335\n00:16:13,424 --> 00:16:15,172\nDistance vector protocol.\n\n336\n00:16:15,172 --> 00:16:19,148\nIt's advanced because while\nit's aware of hop count,\n\n337\n00:16:19,148 --> 00:16:22,420\nit doesn't actually use hop count at all.\n\n338\n00:16:22,420 --> 00:16:27,526\nIn fact, what it uses are 5\n\n339\n00:16:27,526 --> 00:16:32,060\ndifferent metrics.\n\n340\n00:16:32,060 --> 00:16:37,900\nIt uses, let's see if I can\nremember them all, bandwidth, load,\n\n341\n00:16:37,900 --> 00:16:42,700\nreliability, MTU and,\nwhat did I leave out?\n\n342\n00:16:42,700 --> 00:16:43,220\n>> Delay.\n\n343\n00:16:43,220 --> 00:16:43,870\n>> Delay.\n\n344\n00:16:43,870 --> 00:16:46,900\nLet me go back.\n\n345\n00:16:46,900 --> 00:16:47,630\nI'm gonna rewrite this.\n\n346\n00:16:47,630 --> 00:16:49,480\nSo, bandwidth, delay.\n\n347\n00:16:53,107 --> 00:16:57,857\nLoad, Reliability and MTU.\n\n348\n00:16:57,857 --> 00:17:03,330\nOkay, so\nthese are the 5 metrics that EIGRP uses.\n\n349\n00:17:03,330 --> 00:17:04,000\nAll right?\n\n350\n00:17:04,000 --> 00:17:08,140\nNow I really should've put\na little asterisk on MTU,\n\n351\n00:17:08,140 --> 00:17:14,660\nbecause while it does carry MTU\nit doesn't actually use it.\n\n352\n00:17:14,660 --> 00:17:17,790\nIt's there, but it ignores it.\n\n353\n00:17:17,790 --> 00:17:21,390\nSo let's talk about each of these\nmetrics and what they are and\n\n354\n00:17:21,390 --> 00:17:25,920\nwhat they do, and then we'll kind of\nget an idea of why MTU gets ignored.\n\n355\n00:17:25,920 --> 00:17:29,420\nAll right so Ronnie,\nlet's just run down the list here and\n\n356\n00:17:29,420 --> 00:17:30,370\ndo you wanna tackle bandwidth?\n\n357\n00:17:30,370 --> 00:17:31,020\n>> Yeah.\n\n358\n00:17:31,020 --> 00:17:33,730\nSo for\nus bandwidth is like what it sounds,\n\n359\n00:17:33,730 --> 00:17:36,840\nhow much can that particular\nline actually handle for us.\n\n360\n00:17:36,840 --> 00:17:41,620\nAnd so with EIGRP if we have 100 megabit\nconnection that's going to be better than\n\n361\n00:17:41,620 --> 00:17:49,170\nlike a 10 megabit connection, or even\na 1.555, 1.54 megabit connection as well.\n\n362\n00:17:49,170 --> 00:17:53,460\nSo this is one of those that normally,\nin EIGRP, if you wanna determine it,\n\n363\n00:17:53,460 --> 00:17:57,630\nthis is normally the one that they do\nactually turn on and they take account of\n\n364\n00:17:57,630 --> 00:18:03,630\nthe actual lowest bandwidth in between\nthe source and the destination, okay.\n\n365\n00:18:03,630 --> 00:18:04,190\n>> As well.\n\n366\n00:18:04,190 --> 00:18:04,920\nYup.\n\n367\n00:18:04,920 --> 00:18:06,350\nSo bandwidth, that's pretty important.\n\n368\n00:18:06,350 --> 00:18:09,370\nAnd in OSPF land,\nbandwidth is all you use.\n\n369\n00:18:09,370 --> 00:18:10,080\nRight.\n\n370\n00:18:10,080 --> 00:18:13,690\nEIGRP goes further though and\nit adds in delay.\n\n371\n00:18:13,690 --> 00:18:19,220\nDelay is how long it takes that packet\ncross the line and come back again.\n\n372\n00:18:19,220 --> 00:18:22,910\nThink of, we used to call it lag, but\n\n373\n00:18:22,910 --> 00:18:27,610\nit's when you send a ping.\n\n374\n00:18:27,610 --> 00:18:28,510\nIt's latency.\n\n375\n00:18:28,510 --> 00:18:29,116\n>> Latency, yeah.\n\n376\n00:18:29,116 --> 00:18:30,660\n>> [LAUGH].\n>> I had a hard time finding that word.\n\n377\n00:18:30,660 --> 00:18:31,170\n>> Me too.\n\n378\n00:18:31,170 --> 00:18:32,630\n>> We used to call it lag.\n\n379\n00:18:32,630 --> 00:18:33,870\nNow we call it latency.\n\n380\n00:18:33,870 --> 00:18:36,320\nIt's just how long it takes data\nto travel across that line.\n\n381\n00:18:36,320 --> 00:18:39,780\nIt doesn't matter if you've got\na gigabyte network connection.\n\n382\n00:18:39,780 --> 00:18:42,230\nIf it's extremely latent.\n\n383\n00:18:42,230 --> 00:18:43,850\nIf it's a really busy line and\n\n384\n00:18:43,850 --> 00:18:47,530\nyou're having collisions wading across it,\nit might take a long time for data to get.\n\n385\n00:18:47,530 --> 00:18:51,330\n>> Cross it and in that case it's not as\nattractive a line as it was normally.\n\n386\n00:18:51,330 --> 00:18:56,320\nSo EIGRP is taking into account this extra\nvalue which is a pretty powerful thing.\n\n387\n00:18:56,320 --> 00:18:58,750\n>> Yeah, it's kind of weird in\nhow they measure this right?\n\n388\n00:18:58,750 --> 00:19:02,080\nNormally we measure things in\njust like milliseconds and stuff.\n\n389\n00:19:02,080 --> 00:19:05,710\nHere the talk about it in terms\nof tens of micro-seconds I\n\n390\n00:19:05,710 --> 00:19:07,400\nthink is what they normally talk about.\n\n391\n00:19:07,400 --> 00:19:09,050\nAnd you might go, well,\nwhen will I ever see that?\n\n392\n00:19:09,050 --> 00:19:11,220\nWell, if you do some of\nthe show run commands, or\n\n393\n00:19:11,220 --> 00:19:15,450\nnot show runs, the show EIGRP commands,\nyou'll see where it actually says that.\n\n394\n00:19:15,450 --> 00:19:20,560\nTens of microseconds, and so you've\ngotta actually be aware of that, too.\n\n395\n00:19:20,560 --> 00:19:21,610\n>> Yep, absolutely.\n\n396\n00:19:21,610 --> 00:19:24,688\nSo bandwidth and delay,\nthose are the two big ones, all right?\n\n397\n00:19:24,688 --> 00:19:27,740\nThere are 5 metrics but\nbandwidth and delay are the only 2\n\n398\n00:19:27,740 --> 00:19:31,270\nthat are on by default, so\nI'm just gonna box those in here in green.\n\n399\n00:19:32,310 --> 00:19:33,080\nThere we go.\n\n400\n00:19:33,080 --> 00:19:35,080\nThose are the 2 that are on by default,\n\n401\n00:19:35,080 --> 00:19:38,370\nthat are running that we\nneed to be aware of, okay?\n\n402\n00:19:38,370 --> 00:19:45,010\nLoad is the next one, and load is how much\ntraffic is on the line right now, right?\n\n403\n00:19:45,010 --> 00:19:49,520\nIf I have a Gigabit line, but\nit's running at 99% utilization,\n\n404\n00:19:49,520 --> 00:19:55,320\nyou know I'm using 999 Megabits on it,\nthen there's only one Megabit left.\n\n405\n00:19:55,320 --> 00:19:58,630\nAnd so it might be a gig line but\nthere's only one mg available on it,\n\n406\n00:19:58,630 --> 00:20:01,710\nI might as well treat it\nas a one meg line, right?\n\n407\n00:20:01,710 --> 00:20:04,650\nSo load really influences bandwidth.\n\n408\n00:20:04,650 --> 00:20:06,800\nJust because it's a gig line,\nthe bandwidth is one gig,\n\n409\n00:20:06,800 --> 00:20:08,440\ndoesn't mean that bandwidth is there.\n\n410\n00:20:08,440 --> 00:20:12,900\nNow here's the problem with load,\nit's constantly changing.\n\n411\n00:20:12,900 --> 00:20:14,080\nIt's going up and down.\n\n412\n00:20:14,080 --> 00:20:16,160\nYou have spikes, ebbs and\nflows, peaks and valleys,\n\n413\n00:20:16,160 --> 00:20:18,490\nwhatever term it is you want to use.\n\n414\n00:20:18,490 --> 00:20:22,370\nAnd so it's one of those things\nwhere that value is not very stable.\n\n415\n00:20:22,370 --> 00:20:26,490\nSo, because it changes so\noften your router can get into\n\n416\n00:20:26,490 --> 00:20:30,870\nsituations which happen to constantly\nmonitor that and constantly change routes.\n\n417\n00:20:30,870 --> 00:20:34,490\nAnd so one line gets busy and it moves,\nthe line stops being busy it moves back,\n\n418\n00:20:34,490 --> 00:20:35,920\nit gets busy again it moves.\n\n419\n00:20:35,920 --> 00:20:39,610\nSo you might have a lot of change or\nconvergence that's happening in your\n\n420\n00:20:39,610 --> 00:20:44,190\nnetwork or re-convergence as you try and\nreassemble your network.\n\n421\n00:20:44,190 --> 00:20:47,100\nAnd it can create poor performance.\n\n422\n00:20:47,100 --> 00:20:50,010\nAnd so in networks that have\nvery variable bandwidth,\n\n423\n00:20:50,010 --> 00:20:53,100\nwhich is almost every network,\nyou don't want to use this.\n\n424\n00:20:53,100 --> 00:20:55,710\nAnd so\nCisco leaves it turned off by default.\n\n425\n00:20:55,710 --> 00:20:58,850\nBut if you have a very stable\nnetwork with solid links,\n\n426\n00:20:58,850 --> 00:21:01,950\nyou know if you're using quality of\nservice to really enforce things.\n\n427\n00:21:01,950 --> 00:21:03,930\nThen this can actually\nbe really useful for\n\n428\n00:21:03,930 --> 00:21:08,690\nmaking sure you choose the route that has\nthe most bandwidth available at that time.\n\n429\n00:21:08,690 --> 00:21:12,210\nIt's not right for most people,\nso it's off by default.\n\n430\n00:21:12,210 --> 00:21:15,330\nSo while that metric is\ncarried with the protocol,\n\n431\n00:21:15,330 --> 00:21:16,820\nthe default is that it is ignored.\n\n432\n00:21:16,820 --> 00:21:20,880\n>> Yeah, and sometimes you'll\nsee this when you show those.\n\n433\n00:21:20,880 --> 00:21:22,190\n>> Show commands here.\n\n434\n00:21:22,190 --> 00:21:26,485\nYou'll see it as transmit and\nalso reception loads, stuff like that.\n\n435\n00:21:26,485 --> 00:21:29,080\nTPX-RX or something like that.\n\n436\n00:21:29,080 --> 00:21:30,390\nIn terms of the load.\n\n437\n00:21:30,390 --> 00:21:33,680\nNow the next one here is what\nwe call reliability, okay.\n\n438\n00:21:33,680 --> 00:21:38,720\nReliability is about the amount of time\nthat particular link is actually up.\n\n439\n00:21:38,720 --> 00:21:42,280\nAnd working in the way\nthat EIGRP want it to be.\n\n440\n00:21:42,280 --> 00:21:45,290\nSo for us, the longer that\nlink has actually been up and\n\n441\n00:21:45,290 --> 00:21:49,240\nstays stable in terms of that route, the\nbetter that particular connection is going\n\n442\n00:21:49,240 --> 00:21:54,220\nto be for using the IGRP to get its\ndata from the source to the destination.\n\n443\n00:21:54,220 --> 00:21:55,040\n>> Yep.\n\n444\n00:21:55,040 --> 00:21:58,920\nAnd reliability, it also has to deal with\nthe up time on the line and how long\n\n445\n00:21:58,920 --> 00:22:03,230\nthe line has been up and as a result, it's\nanother one that is constantly changing.\n\n446\n00:22:03,230 --> 00:22:04,510\nThe longer the line has been up,\n\n447\n00:22:04,510 --> 00:22:07,370\nthe longer it's been stable,\nthe higher that number gets.\n\n448\n00:22:07,370 --> 00:22:09,290\nAnd so it's constantly climbing and\nupdate.\n\n449\n00:22:09,290 --> 00:22:12,010\n>> And it results in a lot of\nrouting table updates and so\n\n450\n00:22:12,010 --> 00:22:15,020\nit's another one that it's\njust turned off by default.\n\n451\n00:22:15,020 --> 00:22:17,370\nIn the old days,\nwhen you had dial up networks and\n\n452\n00:22:17,370 --> 00:22:21,030\nstuff, you had reliability issues and\nthis was a useful value.\n\n453\n00:22:21,030 --> 00:22:23,065\nBut in modern networks.\n\n454\n00:22:23,065 --> 00:22:24,085\n>> Yeah.\n>> You know, they're either\n\n455\n00:22:24,085 --> 00:22:24,701\nup or they're down.\n\n456\n00:22:24,701 --> 00:22:25,705\n>> [LAUGH].\n>> And when they come back up,\n\n457\n00:22:25,705 --> 00:22:26,825\nthey normally stay back up.\n\n458\n00:22:26,825 --> 00:22:31,203\nAnd so it's not as useful as it\nused to be, and so it is disabled.\n\n459\n00:22:31,203 --> 00:22:31,826\n>> Hm-mm.\n\n460\n00:22:31,826 --> 00:22:32,915\nYep.\n>> By default.\n\n461\n00:22:32,915 --> 00:22:38,247\nAlright, the last one MTU, that stands for\nMaximum Transmission Unit.\n\n462\n00:22:38,247 --> 00:22:42,187\nWhen you send a packet out on a network,\nthe packet gets turned into a frame and\n\n463\n00:22:42,187 --> 00:22:45,667\nthe frame gets thrown onto, you know,\nwhatever the physical media is.\n\n464\n00:22:45,667 --> 00:22:49,230\nDepending on that physical media\nyou may be able to have larger or\n\n465\n00:22:49,230 --> 00:22:50,750\nsmaller frames or cells.\n\n466\n00:22:51,780 --> 00:22:53,950\nIf you're going over an ATM network,\n\n467\n00:22:53,950 --> 00:22:58,900\nasynchronous transfer mode, not\nautomatic teller machine, there will be\n\n468\n00:22:58,900 --> 00:23:02,610\nfixed cell sizes that dictate how\nmuch data you can send at one time.\n\n469\n00:23:02,610 --> 00:23:07,040\nIf you're going over a dial up network\nyou'll have point to point protocol,\n\n470\n00:23:07,040 --> 00:23:07,940\nor SLIP.\n\n471\n00:23:07,940 --> 00:23:12,380\nThat is defining, again, how much data\nyou can send serially at one time.\n\n472\n00:23:12,380 --> 00:23:15,870\nIf you are on an ethernet network\nthen you'll have an MTU or\n\n473\n00:23:15,870 --> 00:23:19,320\na window size that will define exactly\nhow much data you can send at one time.\n\n474\n00:23:19,320 --> 00:23:21,640\nSo, most networks have this.\n\n475\n00:23:21,640 --> 00:23:24,200\nThe thing is most networks these days.\n\n476\n00:23:24,200 --> 00:23:28,190\nOur ethernet based networks and so\nalmost everybody has a standard\n\n477\n00:23:28,190 --> 00:23:31,820\nMTU that's somewhere between 1492\nbytes and 1512 bytes or 1518 bytes.\n\n478\n00:23:31,820 --> 00:23:34,750\n>> Yeah.\n>> So somewhere in that range.\n\n479\n00:23:34,750 --> 00:23:41,210\nYou do get some networks that use\nsuper frames can go up to 9000 bytes.\n\n480\n00:23:41,210 --> 00:23:43,370\nIt just depends.\n\n481\n00:23:43,370 --> 00:23:46,710\nBut most networks are in that 1500 range.\n\n482\n00:23:46,710 --> 00:23:49,200\nSo in the old days, MTU was useful,\n\n483\n00:23:49,200 --> 00:23:52,650\ncuz there was such a variation\nbetween dial-up and ATM and ethernet.\n\n484\n00:23:52,650 --> 00:23:56,160\nBut today, with almost everything\nfollowing the ethernet standard,\n\n485\n00:23:56,160 --> 00:23:58,990\neverything is within a few\nbytes of each other, and so\n\n486\n00:23:58,990 --> 00:24:00,440\nthis value has really become useless.\n\n487\n00:24:00,440 --> 00:24:00,980\nWas.\n\n488\n00:24:00,980 --> 00:24:01,490\n>> Yeah.\n\n489\n00:24:01,490 --> 00:24:04,370\n>> There really is no network\nanymore that benefits from this.\n\n490\n00:24:04,370 --> 00:24:10,543\nSo when Cisco created EIGRP, they made\nthe decision to not use this value.\n\n491\n00:24:10,543 --> 00:24:15,086\nAlright, of the values that are here,\nof these 5, bandwidth and\n\n492\n00:24:15,086 --> 00:24:16,800\ndelay are on by default.\n\n493\n00:24:16,800 --> 00:24:19,767\nSo these guys are on and used by default.\n\n494\n00:24:19,767 --> 00:24:22,926\nLoad and reliability are.\n\n495\n00:24:22,926 --> 00:24:25,259\nThey're there, but they're off by default.\n\n496\n00:24:25,259 --> 00:24:27,043\nThey're not being used, all right?\n\n497\n00:24:27,043 --> 00:24:31,266\nAnd then MTU is the only one that is there\n>> [LAUGH]\n\n498\n00:24:31,266 --> 00:24:32,690\n>> but we can't turn it on.\n\n499\n00:24:32,690 --> 00:24:36,150\nThere is no way to make\nthe EIGRP use the metric.\n\n500\n00:24:36,150 --> 00:24:37,800\nSo, you might ask yourself,\n\n501\n00:24:37,800 --> 00:24:40,090\nwhy bother putting it there\nif I we're not gonna use it?\n\n502\n00:24:40,090 --> 00:24:43,300\nAnd the reason is backwards\ncompatibility with IGRP.\n\n503\n00:24:43,300 --> 00:24:46,620\nIGRP can use it and so,\nif we want to take advantage of that,\n\n504\n00:24:46,620 --> 00:24:48,110\nwe need to have it carried along.\n\n505\n00:24:48,110 --> 00:24:49,430\nSo we still carry the value.\n\n506\n00:24:49,430 --> 00:24:50,020\n>> Yeah.\n\n507\n00:24:50,020 --> 00:24:51,830\n>> We just don't use it, right?\n\n508\n00:24:51,830 --> 00:24:52,430\n>> Yeah.\n>> So\n\n509\n00:24:52,430 --> 00:24:56,130\nthose are the five different\nmetrics that we use.\n\n510\n00:24:56,130 --> 00:24:57,590\nThat's a way different\nthan the other guys.\n\n511\n00:24:57,590 --> 00:24:59,160\n>> Yeah.\n>> RIP, one metric.\n\n512\n00:24:59,160 --> 00:25:01,030\nIt uses hop count, right?\n\n513\n00:25:01,030 --> 00:25:02,760\nOSPF, one metric.\n\n514\n00:25:02,760 --> 00:25:03,940\nIt's called Cost.\n\n515\n00:25:03,940 --> 00:25:05,520\n>> Yeah.\n>> But it's really just bandwidth, right?\n\n516\n00:25:05,520 --> 00:25:07,250\nRun through a simple formula.\n\n517\n00:25:07,250 --> 00:25:07,770\nEIGRP?\n\n518\n00:25:07,770 --> 00:25:11,550\nFive different metrics,\nby default two that are being used.\n\n519\n00:25:11,550 --> 00:25:12,692\n>> Yeah.\n>> That means it's\n\n520\n00:25:12,692 --> 00:25:15,290\ngonna be a little make a more\nintelligent decision than an OSPF.\n\n521\n00:25:15,290 --> 00:25:17,959\n>> Yeah.\nNow I'm gonna mention something that's\n\n522\n00:25:17,959 --> 00:25:20,510\ngonna kinda make Don\na little bit upset here.\n\n523\n00:25:20,510 --> 00:25:23,495\nBut on the internet a lot of times\nyou hear these values called,\n\n524\n00:25:23,495 --> 00:25:25,630\nKmetrics, or K values.\n\n525\n00:25:25,630 --> 00:25:27,154\n>> Yeah, yeah.\n>> using stuff like that.\n\n526\n00:25:27,154 --> 00:25:29,630\nAnd these are actually\ntrue metric weights.\n\n527\n00:25:29,630 --> 00:25:33,700\nThe K value's not exactly what it is, but\nyou do see a lot of people refer to this.\n\n528\n00:25:33,700 --> 00:25:36,470\nSo you do end up reading others,\nyou may see that.\n\n529\n00:25:36,470 --> 00:25:41,280\n>> Yeah, they call these K values, it's a\nmisconception over how this formula works.\n\n530\n00:25:41,280 --> 00:25:43,620\nSo these metrics,\nthey're fed into a formula,\n\n531\n00:25:43,620 --> 00:25:45,730\nand this could turn up on the exam,\nso it's good knowledge to have.\n\n532\n00:25:45,730 --> 00:25:48,320\n>> Yeah, yeah.\nA formula called the DUAL algorithm.\n\n533\n00:25:48,320 --> 00:25:51,330\nAnd let me just fire up Notepad here.\n\n534\n00:25:51,330 --> 00:25:55,530\nCuz some of this stuff is useful to have,\nso\n\n535\n00:25:55,530 --> 00:26:00,357\nthe EIGRP Metrics,\nwe had Bandwidth, Delay, Load,\n\n536\n00:26:00,357 --> 00:26:06,150\nReliability, and MTU and\nI'll put a star on that one.\n\n537\n00:26:06,150 --> 00:26:08,330\nStar which is not used.\n\n538\n00:26:08,330 --> 00:26:17,090\nOkay, all of this is fed into dual which\nis the Diffusing Update ALgorithm.\n\n539\n00:26:17,090 --> 00:26:20,495\nI'll do a capital L there to show, you\nknow that's where they get the AL from.\n\n540\n00:26:20,495 --> 00:26:22,935\nSo, it isn't this formula.\n\n541\n00:26:22,935 --> 00:26:23,495\nAll right?\n\n542\n00:26:23,495 --> 00:26:27,820\nNow, the formula was written by\na gentleman whose last name was Dijkstra.\n\n543\n00:26:27,820 --> 00:26:29,105\n>> [LAUGH].\n>> That might sound familiar\n\n544\n00:26:29,105 --> 00:26:31,285\ncuz he's the same guy that\nwrote the OSPF formula.\n\n545\n00:26:31,285 --> 00:26:32,785\n>> Yeah.\n>> The shortest path first.\n\n546\n00:26:32,785 --> 00:26:36,355\nHe's a very intelligent individual but\nhe wrote this one specifically for Cisco.\n\n547\n00:26:36,355 --> 00:26:38,835\nAnd the formula used to be a secret.\n\n548\n00:26:38,835 --> 00:26:39,490\n>> Yeah.\n\n549\n00:26:39,490 --> 00:26:41,800\n>> They used to not tell anyone about it.\n\n550\n00:26:41,800 --> 00:26:44,770\nBut once their patent got approved then\nthey started telling people the formula\n\n551\n00:26:44,770 --> 00:26:47,380\nlike crazy cuz if you use\nthe formula you gotta pay Cisco.\n\n552\n00:26:47,380 --> 00:26:51,200\nSo you can go out on the internet and\nfind this formula, and\n\n553\n00:26:51,200 --> 00:26:54,455\nseeing the formula will\nexplain what that is.\n\n554\n00:26:54,455 --> 00:26:56,880\n>> [LAUGH]\n>> Let me do a Google image search here.\n\n555\n00:26:56,880 --> 00:26:58,600\n>> Yeah, that would explain a lot.\n\n556\n00:26:58,600 --> 00:26:59,134\nI guarantee it.\n\n557\n00:26:59,134 --> 00:27:03,028\n[LAUGH]\n>> And well that's going nice and fast,\n\n558\n00:27:03,028 --> 00:27:03,774\nisn't it?\n\n559\n00:27:03,774 --> 00:27:06,290\n>> [LAUGH]\n>> All right, there we go.\n\n560\n00:27:06,290 --> 00:27:07,705\nSo EIGRP DUAL.\n\n561\n00:27:09,875 --> 00:27:14,610\nHere we go.\nThis one is from networkincluded.com.\n\n562\n00:27:14,610 --> 00:27:15,790\nGive credit where credit is due.\n\n563\n00:27:17,220 --> 00:27:22,170\nAnd so basically, when it loads I'll get\na microscopic picture of the formula.\n\n564\n00:27:22,170 --> 00:27:23,080\nThere we go.\n\n565\n00:27:23,080 --> 00:27:27,300\nSo here is the formula\nthat EIGRP is using.\n\n566\n00:27:27,300 --> 00:27:33,900\nAnd if you look at the formula which is\nreally just you know, this right up here.\n\n567\n00:27:33,900 --> 00:27:37,680\nOkay, the rest of this is all\njust describing other stuff.\n\n568\n00:27:37,680 --> 00:27:38,410\nBut that part at the top.\n\n569\n00:27:38,410 --> 00:27:39,050\nThat's the formula.\n\n570\n00:27:39,050 --> 00:27:44,880\nAnd you'll see BW in there for\nbandwidth, load, delay, reliability.\n\n571\n00:27:44,880 --> 00:27:45,380\nRight?\n>> Right.\n\n572\n00:27:45,380 --> 00:27:46,550\n>> There's those four metrics.\n\n573\n00:27:46,550 --> 00:27:49,380\nMTU?\nNot even in the formula.\n\n574\n00:27:49,380 --> 00:27:51,100\nSee, that's why we can't use that.\n\n575\n00:27:51,100 --> 00:27:53,860\nWell, we can't even force it to use it,\ncuz it's not even in the formula,\n\n576\n00:27:53,860 --> 00:27:55,380\nall right?\n\n577\n00:27:55,380 --> 00:27:59,840\nSo bandwidth, load, reliability,\nand delay, those are the metrics.\n\n578\n00:27:59,840 --> 00:28:03,020\nAnd then notice K1, K2,\nK3, K4, and K5, all right?\n\n579\n00:28:03,020 --> 00:28:07,700\nWe can change the K values.\n\n580\n00:28:07,700 --> 00:28:13,480\nThe K values are how we influence what\ngets used and what doesn't, okay?\n\n581\n00:28:13,480 --> 00:28:17,571\nNow this goes a little bit beyond what\nyou'll see on the exam, but just you know,\n\n582\n00:28:17,571 --> 00:28:21,445\nit helps you understand how it works so\nit's definitely useful knowledge.\n\n583\n00:28:21,445 --> 00:28:28,570\nBut each one has a default\nvalue that they're set to.\n\n584\n00:28:28,570 --> 00:28:31,630\nAnd if you look at the formula\nyou can kinda figure it out.\n\n585\n00:28:31,630 --> 00:28:37,260\nLike K1 by default is 1, K2 is 0.\n\n586\n00:28:37,260 --> 00:28:41,730\nK3 is one, or two I'll just you know,\n>> [LAUGH]\n\n587\n00:28:41,730 --> 00:28:43,880\n>> say one thing and type another.\n\n588\n00:28:43,880 --> 00:28:47,415\nK4 is zero, and K5 is zero.\n\n589\n00:28:47,415 --> 00:28:48,990\nOkay?\n\n590\n00:28:48,990 --> 00:28:54,580\nAnd these are the default values and\nwe can manipulate these if we want and by\n\n591\n00:28:54,580 --> 00:28:58,910\nmanipulating these we can turn on certain\nvalues or influence the weight of a value.\n\n592\n00:28:58,910 --> 00:29:02,900\nWe can make one thing more\nimportant than another and so on.\n\n593\n00:29:02,900 --> 00:29:05,034\nNow, if we look at that formula, right?\n\n594\n00:29:05,034 --> 00:29:07,438\nIf I don't know if I can\nwrite that any simpler way.\n\n595\n00:29:07,438 --> 00:29:12,443\nBut you know, basically we\n\n596\n00:29:12,443 --> 00:29:21,590\nhave (K1*BW+(K2*BW/256-Load).\n\n597\n00:29:24,596 --> 00:29:27,490\nAnd you might order of operations\nare gonna screw this up a little bit.\n\n598\n00:29:27,490 --> 00:29:30,464\nI'll have to add more parentheses\nto get this straightened out.\n\n599\n00:29:33,140 --> 00:29:35,740\nOrder of operations,\nI feel like I'm in third grade again.\n\n600\n00:29:35,740 --> 00:29:36,720\n>> Right.\n\n601\n00:29:36,720 --> 00:29:43,759\n>> All right, so\nall of that +K3*Delay, all of that.\n\n602\n00:29:43,759 --> 00:29:51,253\n>> [LAUGH]\n>> *K5/Reliability+K4.\n\n603\n00:29:52,960 --> 00:29:57,860\nAnd all of that *256 and you know,\n\n604\n00:29:57,860 --> 00:30:02,040\nthat weird *256 at the end,\nthat might sound kinda weird.\n\n605\n00:30:02,040 --> 00:30:04,156\nIt's there to increase the size for\nmore accuracy.\n\n606\n00:30:04,156 --> 00:30:05,060\n>> Yeah.\n>> The longer the number,\n\n607\n00:30:05,060 --> 00:30:06,270\nthe more accurate we can be.\n\n608\n00:30:06,270 --> 00:30:09,025\nAnd also to get backwards\ncompatibility with IGRP.\n\n609\n00:30:09,025 --> 00:30:15,336\nSo, but if we look at this formula and\nkinda break it down, well, K1 equals 1.\n\n610\n00:30:15,336 --> 00:30:19,742\nSo K1*BW, that's one times the bandwidth.\n\n611\n00:30:19,742 --> 00:30:20,618\n>> And then what?\n\n612\n00:30:20,618 --> 00:30:23,940\n>> One times the bandwidth is\ngonna be the bandwidth, right?\n\n613\n00:30:23,940 --> 00:30:26,440\nSo that means basically\nbandwidth will participate.\n\n614\n00:30:26,440 --> 00:30:31,150\nIf I made that a zero,\nzero times the bandwidth would be zero.\n\n615\n00:30:31,150 --> 00:30:33,840\nSo I just eliminated\nbandwidth from the formula.\n\n616\n00:30:33,840 --> 00:30:36,410\nSo that's how manipulating\nthese K values works.\n\n617\n00:30:36,410 --> 00:30:40,270\nSo K1 is said to control bandwidth.\n\n618\n00:30:40,270 --> 00:30:42,800\nK1 is not bandwidth, but\nit controls bandwidth.\n\n619\n00:30:42,800 --> 00:30:45,020\nAnd this is where the confusion\non the internet comes in.\n\n620\n00:30:45,020 --> 00:30:51,880\nSo, if I were to rewrite this formula,\nK1*BW that's really just bandwidth okay?\n\n621\n00:30:51,880 --> 00:30:57,590\nAnd then it's +K2*bandwidth,\nwell K2 is normally zero.\n\n622\n00:30:57,590 --> 00:31:02,110\nSo zero times bandwidth is going to be\nzero, divided by who cares what, right?\n\n623\n00:31:02,110 --> 00:31:05,720\nBecause zero divided by a number is zero,\nright?\n\n624\n00:31:05,720 --> 00:31:07,670\n>> So it's bandwidth plus zero.\n\n625\n00:31:07,670 --> 00:31:10,190\nSo that's, again,\njust going to be bandwidth.\n\n626\n00:31:10,190 --> 00:31:13,420\nAnd then plus K3 times delay.\n\n627\n00:31:13,420 --> 00:31:15,040\nWell, K3 is a one.\n\n628\n00:31:15,040 --> 00:31:18,810\nSo one times delay is going to be delay.\n\n629\n00:31:18,810 --> 00:31:23,497\nSo this works out basically\nbandwidth plus delay right?\n\n630\n00:31:23,497 --> 00:31:26,217\nIf we start to kind of filter this out.\n\n631\n00:31:29,711 --> 00:31:32,472\nSo Bandwidth+Delay, and\n\n632\n00:31:32,472 --> 00:31:38,810\nthen that result is then\nmultiplied by K5/Reliability.\n\n633\n00:31:38,810 --> 00:31:39,470\nOkay?\n\n634\n00:31:39,470 --> 00:31:43,510\nWell, K5 is a zero and so\nzero divided by who cares what?\n\n635\n00:31:43,510 --> 00:31:44,250\nThat's gonna be zero.\n\n636\n00:31:44,250 --> 00:31:46,370\nNow, here's where the formula\ngets a little weird.\n\n637\n00:31:46,370 --> 00:31:49,270\nSo normally, that would be this time zero,\nwhich would knock it out.\n\n638\n00:31:49,270 --> 00:31:50,030\n>> Yep.\n>> But instead,\n\n639\n00:31:50,030 --> 00:31:52,490\nthe way the formula is handled by\nthe router says that if it's zero,\n\n640\n00:31:52,490 --> 00:31:53,750\nwe just leave it out.\n\n641\n00:31:53,750 --> 00:31:58,060\nAnd so it leaves that out, and\nthen the last part is, *256.\n\n642\n00:31:58,060 --> 00:31:59,590\nOkay?\n\n643\n00:31:59,590 --> 00:32:03,730\nSo, here's what the formula bakes\ndown to at its default settings.\n\n644\n00:32:03,730 --> 00:32:05,911\nBandwidth+Delay*256.\n\n645\n00:32:05,911 --> 00:32:06,980\n>> That's it.\n\n646\n00:32:06,980 --> 00:32:09,780\n>> That's the resulting\nmetric that we use in EIGRP.\n\n647\n00:32:09,780 --> 00:32:11,137\nSo the formulas pretty simple.\n\n648\n00:32:11,137 --> 00:32:16,395\nBut if we start changing these K values,\nif we make K401, or K501, that\n\n649\n00:32:16,395 --> 00:32:21,434\nbrings in delay or brings in reliability\nbased on the changes that we make.\n\n650\n00:32:21,434 --> 00:32:22,649\nOur delay's already in there.\n\n651\n00:32:22,649 --> 00:32:24,518\nSo we can bring in loader reliability.\n\n652\n00:32:24,518 --> 00:32:25,642\nBy manipulating those.\n\n653\n00:32:25,642 --> 00:32:27,345\nSo you'll see confusion on the Internet.\n\n654\n00:32:27,345 --> 00:32:29,820\nA lot of people will say,\nthat K1 is bandwidth.\n\n655\n00:32:29,820 --> 00:32:30,730\nIt's not.\n\n656\n00:32:30,730 --> 00:32:36,980\nK1 is just a value,\nthat allows us to modify the formula.\n\n657\n00:32:36,980 --> 00:32:40,569\nSo that's the formula, and\nlike I said, it used to be a secret.\n\n658\n00:32:41,850 --> 00:32:43,750\nAnd it is pretty straight forward.\n\n659\n00:32:43,750 --> 00:32:45,590\nIt's just giving us some kinda way,\n\n660\n00:32:45,590 --> 00:32:48,090\nreference, which connections\nare better than others.\n\n661\n00:32:48,090 --> 00:32:48,678\n>> Yeah.\n\n662\n00:32:48,678 --> 00:32:52,560\nYou said, that kind of third\ngrouping down there, that we saw,\n\n663\n00:32:52,560 --> 00:32:54,980\nwhere it talks about the default metric.\n\n664\n00:32:54,980 --> 00:33:00,110\nThat's key there, in terms of the Slowest\nBandwidth, and the Cumulative Delay.\n\n665\n00:33:00,110 --> 00:33:02,630\nSo a lot of times, you may see a diagram,\nthat shows you like, two or\n\n666\n00:33:02,630 --> 00:33:04,140\nthree segments here.\n\n667\n00:33:04,140 --> 00:33:05,130\nAnd you gotta remember,\n\n668\n00:33:05,130 --> 00:33:08,850\nthat you're actually taking\nthe Slowest Bandwidth of those.\n\n669\n00:33:08,850 --> 00:33:11,390\nIf you have 100 megabits and 110 megabits,\n\n670\n00:33:11,390 --> 00:33:13,800\nyou're gonna use that\n10 megabit connection.\n\n671\n00:33:13,800 --> 00:33:14,300\n>> Yeah.\n>> And then,\n\n672\n00:33:14,300 --> 00:33:17,670\nyou have to add up,\nthe actual delay in between them.\n\n673\n00:33:17,670 --> 00:33:18,790\nSo remember that.\n\n674\n00:33:18,790 --> 00:33:20,155\n>> Let's go back to your topology,\nreal quick.\n\n675\n00:33:20,155 --> 00:33:21,490\nYeah, I know it's time for our break.\n\n676\n00:33:21,490 --> 00:33:23,630\nSo let's just hit this, real quick.\n\n677\n00:33:23,630 --> 00:33:28,134\nIf we go back to this one, remember\nthat we had these two different paths,\n\n678\n00:33:28,134 --> 00:33:32,132\nthat if we were running a traditional\ndistance Vector Protocol,\n\n679\n00:33:32,132 --> 00:33:34,761\nthey'd be equal, they're both one hop.\n\n680\n00:33:34,761 --> 00:33:40,486\nBut with EIGRP,\nit would see 100 megabit, 100 megabit.\n\n681\n00:33:40,486 --> 00:33:44,600\nSo I view that, as a 100 megabit link, and\n\n682\n00:33:44,600 --> 00:33:50,350\nit would see 100 megabit, 256k, and\nthen we view that as a 256k link.\n\n683\n00:33:50,350 --> 00:33:54,900\nAnd so when it adds these together,\ntheir bandwidth is gonna be different.\n\n684\n00:33:54,900 --> 00:33:56,225\nTheir delay might be the same.\n\n685\n00:33:56,225 --> 00:33:56,730\n>> Yeah.\n\n686\n00:33:56,730 --> 00:33:57,560\n>> Who knows?\n\n687\n00:33:57,560 --> 00:34:01,600\nBut the bandwidth would be different,\nand it would see this higher bandwidth,\n\n688\n00:34:01,600 --> 00:34:03,350\nacross the bottom path.\n\n689\n00:34:03,350 --> 00:34:07,510\nAnd it would choose this bottom path,\nto get to the destination.\n\n690\n00:34:07,510 --> 00:34:08,330\nNot the top.\n\n691\n00:34:08,330 --> 00:34:09,170\n>> Yeah.\n\n692\n00:34:09,170 --> 00:34:11,150\n>> So, it's an intelligent protocol.\n\n693\n00:34:11,150 --> 00:34:12,260\n>> Yeah.\n>> It's very, very powerful.\n\n694\n00:34:12,260 --> 00:34:14,260\nHopefully, you guys\nare starting to see that.\n\n695\n00:34:15,280 --> 00:34:19,525\nIn production, in real life lane, you're\nnot gonna see EIGRP all that much, but\n\n696\n00:34:19,525 --> 00:34:21,135\nit is the better, the two protocols.\n\n697\n00:34:21,135 --> 00:34:27,567\nOn the exam, you'll see EIGRP,\njust as much as OSPI, because it is Cisco.\n\n698\n00:34:27,567 --> 00:34:29,705\nRonie, while we stop here,\nand take a break.\n\n699\n00:34:29,705 --> 00:34:31,936\n>> Okay.\n>> We have been, really,\n\n700\n00:34:31,936 --> 00:34:34,470\njust talking about EIGRP.\n\n701\n00:34:34,470 --> 00:34:38,470\nSo it's probably a good chance to jump in,\nand actually, see it in action.\n\n702\n00:34:38,470 --> 00:34:40,430\nSo, let's do that after the break.\n\n703\n00:34:40,430 --> 00:34:40,970\n>> Okay, Sounds good.\n\n704\n00:34:40,970 --> 00:34:44,210\n>> And, trying to think,\nis there anything else I want to throw in.\n\n705\n00:34:44,210 --> 00:34:45,670\nI think we're good.\n\n706\n00:34:45,670 --> 00:34:47,500\nAll right, well ladies and\ngentlemen, stay tuned!\n\n707\n00:34:47,500 --> 00:34:50,760\nWhen we get back, we're gonna actually\nimplement EIGRP, and some routers,\n\n708\n00:34:50,760 --> 00:34:53,070\nkinda see what's involved there,\nand see that decision making.\n\n709\n00:34:53,070 --> 00:34:54,330\nSo stay tuned!\n\n710\n00:34:54,330 --> 00:34:55,178\nWe'll be back after this.\n\n711\n00:34:55,178 --> 00:35:05,090\n>> [SOUND]\n>> All right, welcome back everybody.\n\n712\n00:35:05,090 --> 00:35:07,905\n>> So, what we're gonna do now,\nis we're gonna stop just-\n\n713\n00:35:07,905 --> 00:35:08,670\n>> [LAUGHS]\n\n714\n00:35:08,670 --> 00:35:09,840\n>> Gossiping about EIGRP, and\n\n715\n00:35:09,840 --> 00:35:12,270\nactually get in there, and\ntake a look at how it works.\n\n716\n00:35:12,270 --> 00:35:15,560\nThe topology document,\nthat I've been kinda pointing at here,\n\n717\n00:35:15,560 --> 00:35:17,010\nthe one that Ronnie made.\n\n718\n00:35:17,010 --> 00:35:20,535\nWe've actually got these routers set up,\nand we've got, you know,\n\n719\n00:35:20,535 --> 00:35:22,220\nrouter one over here on the left.\n\n720\n00:35:22,220 --> 00:35:23,304\nAnd then,\nis it router two up here, Ronnie?\n\n721\n00:35:23,304 --> 00:35:24,636\n>> Yup.\n\n722\n00:35:24,636 --> 00:35:25,511\n>> Router three.\n\n723\n00:35:25,511 --> 00:35:26,596\n>> Yup, router three and then router four.\n\n724\n00:35:26,596 --> 00:35:28,110\n>> Router four, ok.\n\n725\n00:35:28,110 --> 00:35:31,740\nSo we've got four routers laid out like\nthis, and we're gonna configure EIGRP.\n\n726\n00:35:31,740 --> 00:35:35,410\nThe first segment, right here,\njust has a switch.\n\n727\n00:35:35,410 --> 00:35:40,330\nSo these three routers, router one, two,\nand three, they're all on the same shared\n\n728\n00:35:40,330 --> 00:35:43,770\nEthernet segment, and so\nthey'll be able to find each other, and\n\n729\n00:35:43,770 --> 00:35:47,800\nbuild up EIGRP relationship,\nas we set them up.\n\n730\n00:35:47,800 --> 00:35:49,770\nNow, I call them Relationships.\n\n731\n00:35:49,770 --> 00:35:51,740\nThey're really EIGRP adjacencies.\n\n732\n00:35:51,740 --> 00:35:54,380\nYou find your neighbors, and\nyou build an adjacency with them, so\n\n733\n00:35:54,380 --> 00:35:56,280\nwe'll get a chance to see that.\n\n734\n00:35:56,280 --> 00:36:00,570\nThere's also a point to point link,\nwhich is just an Ethernet link here,\n\n735\n00:36:00,570 --> 00:36:04,320\nbetween router two and three, and\nbetween router three and four, and\n\n736\n00:36:04,320 --> 00:36:08,090\nthen a serial link up here,\nbetween routers two and four.\n\n737\n00:36:08,090 --> 00:36:12,730\nSo when we turn on EIGRP,\nwe've got a plan for\n\n738\n00:36:12,730 --> 00:36:15,680\neach of those links, as we go through,\nand enable this, and get it set up.\n\n739\n00:36:16,790 --> 00:36:20,020\nBut we'll start on the easiest one,\njust over here, on router one.\n\n740\n00:36:21,300 --> 00:36:23,200\nAll right, so let me switch over to that.\n\n741\n00:36:23,200 --> 00:36:25,850\nI've got those opened up around here,\nsomewhere.\n\n742\n00:36:25,850 --> 00:36:28,010\nAnd we'll start on.\n\n743\n00:36:28,010 --> 00:36:29,170\nRouter one.\n\n744\n00:36:29,170 --> 00:36:33,560\nAll right, so on router one, the first\nthing that I wanna do, is I wanna get in,\n\n745\n00:36:33,560 --> 00:36:37,160\nand well, actually the first\nthing I really should do,\n\n746\n00:36:37,160 --> 00:36:41,860\nis make sure, I'm not already running\nEIGRP, cause maybe, I'm already done.\n\n747\n00:36:41,860 --> 00:36:46,552\nAnd from the OSPF show, we can probably\nremember the show IP protocols command,\n\n748\n00:36:46,552 --> 00:36:50,830\nand when we run show IP protocols,\nwe get a list of the various protocols,\n\n749\n00:36:50,830 --> 00:36:53,386\nthat are running in our system, right now.\n\n750\n00:36:53,386 --> 00:36:54,011\nI've got none.\n\n751\n00:36:54,011 --> 00:36:56,482\n>> [LAUGH]\n>> Well, I'm NSF aware,\n\n752\n00:36:56,482 --> 00:37:00,510\nwhich is the Auto Route Discovery\nstuff for IPv6.\n\n753\n00:37:00,510 --> 00:37:02,220\nBut anyhow, I'm not worried about that.\n\n754\n00:37:02,220 --> 00:37:05,895\nSo, no real dynamic routing protocols,\nare running on this route.\n\n755\n00:37:05,895 --> 00:37:09,540\nSo, I can go ahead, and\nconfigure one, and get it set up.\n\n756\n00:37:09,540 --> 00:37:11,960\nNow, Router 1 only has a single link.\n\n757\n00:37:11,960 --> 00:37:16,386\nThis Fa0/0 on the 192.168.1 network.\n\n758\n00:37:16,386 --> 00:37:20,810\nSo when I turn on EIGRP,\nI just need to turn it on for that link.\n\n759\n00:37:20,810 --> 00:37:27,386\nWell, this will be our first brush with\nthe kind of classful nature, of EIGRP.\n\n760\n00:37:27,386 --> 00:37:30,310\nLet me bump this font size up,\njust a little bit.\n\n761\n00:37:30,310 --> 00:37:31,830\nWhere is font in this thing?\n\n762\n00:37:31,830 --> 00:37:33,000\n>> Up here.\n\n763\n00:37:33,000 --> 00:37:34,480\nChange.\n\n764\n00:37:34,480 --> 00:37:36,530\n>> Let's take that up,\njust a little bit bigger.\n\n765\n00:37:36,530 --> 00:37:40,390\nMy old eyes could stand for\nsomething a little stronger.\n\n766\n00:37:40,390 --> 00:37:41,380\nThere we go.\nAll right.\n\n767\n00:37:41,380 --> 00:37:44,940\nSo, what I'm gonna do, is I'm gonna\ngo ahead, and get into configuration.\n\n768\n00:37:44,940 --> 00:37:51,460\nAnd I'm gonna run, router EIGRP,\nand then a number.\n\n769\n00:37:51,460 --> 00:37:54,630\nAlright, now, if you just watched OSPF,\nyou might be thinking,\n\n770\n00:37:54,630 --> 00:37:56,060\noh it's the process number.\n\n771\n00:37:56,060 --> 00:37:57,840\n>> No.\n>> Well, it's not.\n\n772\n00:37:57,840 --> 00:38:00,760\nIn EIGRP, we do not have areas.\n\n773\n00:38:00,760 --> 00:38:02,170\nIn OSPF, you do.\n\n774\n00:38:02,170 --> 00:38:06,090\nSo, in OSPF, you assign a process ID here,\nthat just identifies OSPF.\n\n775\n00:38:06,090 --> 00:38:10,150\nAnd then, with every network you add,\nyou add an area number.\n\n776\n00:38:10,150 --> 00:38:12,320\nWell, EIGRP doesn't use areas.\n\n777\n00:38:12,320 --> 00:38:15,680\nAnd so, we use,\nwhat's called an Autonomous System.\n\n778\n00:38:15,680 --> 00:38:19,340\nAll of your EIGRP routers,\nwill be on the same Autonomous System.\n\n779\n00:38:19,340 --> 00:38:22,500\nIn OSPF, we break up into areas,\nto make the network smaller, so\n\n780\n00:38:22,500 --> 00:38:24,960\nthat your router doesn't have to\nknow about everybody out there.\n\n781\n00:38:24,960 --> 00:38:28,840\nIn EIGRP, that already happens,\nyou only know about your direct neighbors.\n\n782\n00:38:28,840 --> 00:38:32,360\nSo we don't benefit from that, so\nwe just have one AS number, and\n\n783\n00:38:32,360 --> 00:38:33,760\nwe put it right here.\n\n784\n00:38:33,760 --> 00:38:39,510\nThe reason I mention this, is,\non the exam, with OSPF process numbers.\n\n785\n00:38:39,510 --> 00:38:42,960\nThey don't have to match from router\nto router, the area numbers do.\n\n786\n00:38:42,960 --> 00:38:46,530\nIn EIGRP, the AS numbers have to match.\n\n787\n00:38:46,530 --> 00:38:48,928\nAnd so, this number is important.\n\n788\n00:38:48,928 --> 00:38:53,678\nAnd you can pick a number,\nit's 1 through 65,535.\n\n789\n00:38:53,678 --> 00:38:57,760\nPick a number, whatever one,\nyou wanna use, for your Autonomous System.\n\n790\n00:38:57,760 --> 00:39:01,342\nAnd so, I'm gonna do one, okay.\n\n791\n00:39:01,342 --> 00:39:03,710\n>> [LAUGH]\n>> [LAUGH] It's easy to remember.\n\n792\n00:39:03,710 --> 00:39:07,060\n>> Now this is really important, even\nbeyond the concept of just making sure,\n\n793\n00:39:07,060 --> 00:39:07,950\nthat we have the single one.\n\n794\n00:39:07,950 --> 00:39:12,770\nBut this goes into,\nhow it's gonna discover the other routers.\n\n795\n00:39:12,770 --> 00:39:15,532\nIf you have another router\nin this topology like RR2,\n\n796\n00:39:15,532 --> 00:39:19,928\nyou put another Autonomous System number,\nit's never gonna even become a neighbor.\n\n797\n00:39:19,928 --> 00:39:20,688\nSo you wanna make sure,\n\n798\n00:39:20,688 --> 00:39:23,440\nthat they're the same, if they're supposed\nto be learning routes from each other.\n\n799\n00:39:25,160 --> 00:39:27,845\n>> Sorry, I'm just gonna change this\na little bit more, there we go.\n\n800\n00:39:27,845 --> 00:39:28,637\n>> Oh, nice.\n\n801\n00:39:28,637 --> 00:39:33,240\n>> Yeah, that grey background, it's kinda\ncool in person, but on TV, not so cool.\n\n802\n00:39:33,240 --> 00:39:36,080\nAll right.\nSo there we go, I'm done, right?\n\n803\n00:39:36,080 --> 00:39:37,980\nI'm running EIGRP, I'm in business.\n\n804\n00:39:37,980 --> 00:39:41,969\nWell, not really, if I do,\na do show IP protocols.\n\n805\n00:39:43,840 --> 00:39:49,650\nI am running EIGRP, okay, but\nit's not actually functional,\n\n806\n00:39:49,650 --> 00:39:53,480\nbecause I haven't turned it on, for\nany of my networks or interfaces.\n\n807\n00:39:53,480 --> 00:39:57,480\nSo, while I am running the EIGRP,\nit's not actually doing anything for me.\n\n808\n00:39:57,480 --> 00:40:00,080\nI won't advertise routes,\nI won't learn routes.\n\n809\n00:40:00,080 --> 00:40:04,330\nI need to do some network statements,\nto advertise the networks,\n\n810\n00:40:04,330 --> 00:40:05,680\nthat I'm connected to.\n\n811\n00:40:05,680 --> 00:40:09,360\nNow in OSPF,\nwe would do a network statement.\n\n812\n00:40:09,360 --> 00:40:13,420\nWe'd specify a network, and\na wildcard mask, and then, an area number.\n\n813\n00:40:13,420 --> 00:40:14,300\nWell, we don't need the area stuff.\n\n814\n00:40:14,300 --> 00:40:19,674\nI mean, EIGRP, you can do a network,\nand a wildcard mask, if you want to.\n\n815\n00:40:19,674 --> 00:40:23,961\nBut EIGRP, defaults to a kind\nof classful functionality.\n\n816\n00:40:23,961 --> 00:40:27,334\nAnd so if I just type, network, 192.\n\n817\n00:40:27,334 --> 00:40:31,580\n168.1.0 and I don't do a wild card mask.\n\n818\n00:40:31,580 --> 00:40:35,250\nIt will assume that this is a class C,\n\n819\n00:40:35,250 --> 00:40:38,980\nbecause that first octal\nis in the right range.\n\n820\n00:40:38,980 --> 00:40:42,760\nSo if you follow the class\nrules in your environment\n\n821\n00:40:42,760 --> 00:40:44,830\nyou don't need to put\na wild card mask here.\n\n822\n00:40:44,830 --> 00:40:46,860\nBut, if you're breaking the rules.\n\n823\n00:40:46,860 --> 00:40:48,350\nMaybe you're using this as a class B.\n\n824\n00:40:48,350 --> 00:40:51,920\nThen you will need to do a wildcard mask\nto make sure that it's accurate, and\n\n825\n00:40:51,920 --> 00:40:55,600\nyou'll see that I can specify the wildcard\nbits if I want to, all right.\n\n826\n00:40:55,600 --> 00:40:58,360\nSo in this scenario,\nif I just run it like this.\n\n827\n00:40:58,360 --> 00:40:59,620\nAnd stop.\n>> Yeah.\n\n828\n00:40:59,620 --> 00:41:00,710\n>> That's fine.\n\n829\n00:41:00,710 --> 00:41:06,065\nOr could've run, let's see,\nit would be what?\n\n830\n00:41:06,065 --> 00:41:08,113\n0.0.0.255.\n\n831\n00:41:08,113 --> 00:41:08,820\nThere we go.\n>> Hm-mm.\n\n832\n00:41:08,820 --> 00:41:11,270\n>> So I could've run it this way also.\n\n833\n00:41:11,270 --> 00:41:13,750\nAnd that would have worked just fine too.\n\n834\n00:41:13,750 --> 00:41:18,860\nAnd I can even go a little beyond and\nadd area whatever, if it were OSPF.\n\n835\n00:41:18,860 --> 00:41:21,010\nBut in EIGRP I don't need that, right?\n\n836\n00:41:21,010 --> 00:41:25,170\nBut it's the same syntax, between\nthe two we just leave that area off.\n\n837\n00:41:25,170 --> 00:41:28,900\nNow, because we did follow the rules\nwe don't even need that, and so\n\n838\n00:41:28,900 --> 00:41:32,280\nwe can kinda knock it out easy.\n\n839\n00:41:32,280 --> 00:41:36,890\nAll right, so now that I'm doing that,\nEIGRP is actually working.\n\n840\n00:41:36,890 --> 00:41:41,125\nIf I do a do show IP protocols, alright?\n\n841\n00:41:41,125 --> 00:41:42,150\n>> Hm-mm.\n>> And I go in here.\n\n842\n00:41:42,150 --> 00:41:44,760\nAnd I look.\nAnd I can see EIGRP is running.\n\n843\n00:41:44,760 --> 00:41:46,305\nThere is my K value showing up.\n\n844\n00:41:46,305 --> 00:41:48,590\n>> Hm-mm.\n>> You know, I've got a router ID.\n\n845\n00:41:48,590 --> 00:41:52,100\nAnd I can see that I'm routing for\nnetworks 192.168.1.0.\n\n846\n00:41:52,100 --> 00:41:54,290\nSo I'm in business.\n\n847\n00:41:54,290 --> 00:41:57,000\nIt's up, it's running,\nI mean, [INAUDIBLE] router.\n\n848\n00:41:57,000 --> 00:41:57,500\n>> That's it.\n\n849\n00:41:59,120 --> 00:42:00,870\n>> Now,\nit's not going to be very exciting for me.\n\n850\n00:42:00,870 --> 00:42:04,288\n>> No.\n>> Because it's just one router.\n\n851\n00:42:04,288 --> 00:42:06,860\n[LAUGH] So there's nobody to talk to.\n\n852\n00:42:06,860 --> 00:42:10,960\nIf I do a show IPRoute,\nI'm not going to see any EIGP routes,\n\n853\n00:42:10,960 --> 00:42:15,320\nand remember, they can be spotted\nby looking for ones with a D.\n\n854\n00:42:15,320 --> 00:42:18,740\nAlright that's strange in OSPF it\nstarts with an O, makes sense.\n\n855\n00:42:18,740 --> 00:42:22,970\nOSPF.\n[LAUGH] The E was already taken by EGP,\n\n856\n00:42:22,970 --> 00:42:24,180\nwhich is in here somewhere.\n\n857\n00:42:26,000 --> 00:42:26,880\n>> Used to be.\n\n858\n00:42:26,880 --> 00:42:27,840\n>> Is it not even in the list anymore?\n\n859\n00:42:27,840 --> 00:42:29,050\n>> I don't think it's\neven in the list anymore.\n\n860\n00:42:29,050 --> 00:42:31,770\n>> Nobody actually runs EGP anymore,\nit's a very\n\n861\n00:42:31,770 --> 00:42:34,110\nold protocol that was replaced by BGP\n>> Yeah.\n\n862\n00:42:34,110 --> 00:42:37,370\n>> But the E was taken by that and\nso Cisco just used D.\n\n863\n00:42:37,370 --> 00:42:38,640\nD stands for dual.\n\n864\n00:42:38,640 --> 00:42:40,180\nYeah the algorithm.\n\n865\n00:42:40,180 --> 00:42:42,580\nSo I'm not learning any routes and\n\n866\n00:42:42,580 --> 00:42:47,850\nif I do a show IP EIRGP neighbor,\nI don't have any neighbors.\n\n867\n00:42:47,850 --> 00:42:50,740\n>> Don't have any neighbors.\n\n868\n00:42:50,740 --> 00:42:53,870\n>> Nobody's out there talking to me and\nso I'm sad and alone.\n\n869\n00:42:53,870 --> 00:42:55,260\n>> There you go.\n\n870\n00:42:55,260 --> 00:42:57,639\n>> Alright so\nlet's get this set up on another router.\n\n871\n00:42:58,670 --> 00:43:00,405\nLet me jump over to router 2.\n\n872\n00:43:01,500 --> 00:43:06,480\nAnd I'm just gonna tweak these\nsettings here real quick.\n\n873\n00:43:08,010 --> 00:43:11,860\nSo let's see, I went to a 14-pitch\nfont and a black background.\n\n874\n00:43:16,480 --> 00:43:17,250\nThere we go.\n\n875\n00:43:17,250 --> 00:43:17,900\nAll right.\n\n876\n00:43:17,900 --> 00:43:19,100\nSo.\n\n877\n00:43:19,100 --> 00:43:21,160\nOn this guy I'm really\ngonna do the same thing.\n\n878\n00:43:21,160 --> 00:43:26,360\nNow one difference that I have is if I\nlook at the interfaces on my system,\n\n879\n00:43:26,360 --> 00:43:27,270\nI've got 192.168.1.2, 2.2, and 172.16.1.2.\n\n880\n00:43:27,270 --> 00:43:33,990\nI've got a couple different\nnetworks that are out there,\n\n881\n00:43:33,990 --> 00:43:38,210\nso I can try and combine these into single\nnetwork statements if I want to, or\n\n882\n00:43:38,210 --> 00:43:40,200\nI can list them individually.\n\n883\n00:43:40,200 --> 00:43:41,790\nIt's kind of up to me.\n\n884\n00:43:41,790 --> 00:43:44,460\nThere are,\nare they following the class rules?\n\n885\n00:43:44,460 --> 00:43:46,464\n>> Yes, except for 172.16.\n\n886\n00:43:46,464 --> 00:43:48,250\n>> Okay so that ones breaking the rules.\n\n887\n00:43:48,250 --> 00:43:51,070\nSo that ones got a class C so\n\n888\n00:43:51,070 --> 00:43:53,810\nthat one I really do need to\nuse a wild card mask on it.\n\n889\n00:43:53,810 --> 00:43:55,700\nThe other ones though,\nI can just follow the rules.\n\n890\n00:43:55,700 --> 00:43:58,060\nSo if I go and say router.\n\n891\n00:43:58,060 --> 00:43:58,680\nEIGRP.\n\n892\n00:43:58,680 --> 00:44:02,790\nAnd I've gotta put it in\nthe same autonomous system or\n\n893\n00:44:04,690 --> 00:44:07,720\nit's not gonna talk to the other router.\n\n894\n00:44:08,960 --> 00:44:11,667\nAnd then I can say network 192.168.1.0 and\n2.0.\n\n895\n00:44:11,667 --> 00:44:12,800\n>> [INAUDIBLE] Look at that.\n\n896\n00:44:12,800 --> 00:44:13,300\n>> Yep.\n\n897\n00:44:14,450 --> 00:44:16,610\nI already got a neighbor.\n\n898\n00:44:16,610 --> 00:44:21,733\nAnd then 172.16.1.0 with\na 0.0.0.255 wildcard mask.\n\n899\n00:44:21,733 --> 00:44:22,233\n>> Yep.\n\n900\n00:44:23,670 --> 00:44:29,020\nAlright, so if I do a show IP protocol\n\n901\n00:44:31,260 --> 00:44:35,040\nI can see that I've got that\nrouting protocol configured,\n\n902\n00:44:35,040 --> 00:44:39,196\nthe IGRP, and I'm routing for\nthese networks.\n\n903\n00:44:39,196 --> 00:44:42,040\nNotice 192.168.1 and\n1 don't have a subnet mask\n\n904\n00:44:42,040 --> 00:44:45,940\nattached to them that's cuz we\nfollowed class rules on those.\n\n905\n00:44:45,940 --> 00:44:47,940\nBut on the one where I broke the rules,\n\n906\n00:44:47,940 --> 00:44:52,480\nit's attached the subnet mask to it\nto designate that it is different.\n\n907\n00:44:52,480 --> 00:44:54,870\nAll right.\n\n908\n00:44:54,870 --> 00:44:57,750\nAnd if I do a show IP EIGRP neighbor.\n\n909\n00:44:59,060 --> 00:45:03,448\nI can see that I've got a neighbor,\nwhich is router one,\n\n910\n00:45:03,448 --> 00:45:09,780\n192.618.1.1 and I see it on my\nFa0/0 interface and it's up.\n\n911\n00:45:09,780 --> 00:45:12,220\nIt's up time is 50 seconds now.\n\n912\n00:45:12,220 --> 00:45:13,560\nAnd off we go right.\n\n913\n00:45:13,560 --> 00:45:15,500\n>> Yep.\n>> We're communicating and we're happy.\n\n914\n00:45:15,500 --> 00:45:16,060\n>> Yeah.\n\n915\n00:45:16,060 --> 00:45:19,700\nSo now we have 2 routers\nactually running EIGRP,\n\n916\n00:45:19,700 --> 00:45:23,870\nthey become the idea of neighbors at this\npoint, what this normally means is that\n\n917\n00:45:23,870 --> 00:45:27,210\nany other routes that they'll learn\nthey'll exchange it with the other router.\n\n918\n00:45:27,210 --> 00:45:27,830\nOkay.\n\n919\n00:45:27,830 --> 00:45:31,190\nAnd so we do we want to get into that now,\nwhere we talk about the different\n\n920\n00:45:31,190 --> 00:45:35,290\nneighbor table, and the topology,\nor are we gonna move on?\n\n921\n00:45:35,290 --> 00:45:38,210\n>> Yeah,\nwe can talk about it a little bit,\n\n922\n00:45:38,210 --> 00:45:42,580\nI don't want to go into\nsuper detail just yet.\n\n923\n00:45:42,580 --> 00:45:46,200\nBut router one only has one interface,\nit's got the 192.168.1.1 interface.\n\n924\n00:45:46,200 --> 00:45:48,120\nSo it's on that 192.168.1.0 network.\n\n925\n00:45:48,120 --> 00:45:50,438\nIt is telling router 2 about that network.\n\n926\n00:45:50,438 --> 00:45:53,770\nNow router 2 already\nknows about that network\n\n927\n00:45:53,770 --> 00:45:58,340\nbecause it has an interface\non that same network.\n\n928\n00:45:58,340 --> 00:46:00,593\nSo when I look at my routing table,\n\n929\n00:46:00,593 --> 00:46:06,285\nthat 192.168.1.0 network,\nwe are directly connected.\n\n930\n00:46:06,285 --> 00:46:07,885\nThere's that C route.\n\n931\n00:46:07,885 --> 00:46:10,035\nYou can't get a better route than that,\nand\n\n932\n00:46:10,035 --> 00:46:13,077\nso I'm not gonna learn\nanything from router 1.\n\n933\n00:46:13,077 --> 00:46:15,877\nWell it's not that I'm\nnot learning anything.\n\n934\n00:46:15,877 --> 00:46:16,857\nI am learning something.\n\n935\n00:46:16,857 --> 00:46:19,467\nIt's just not useful, and so\nI throw it away, all right?\n\n936\n00:46:19,467 --> 00:46:23,507\nEIGRP will throw away routes that don't\nreally make a whole lot of sense to it,\n\n937\n00:46:23,507 --> 00:46:25,747\nbut it doesn't just delete them or\nwhatever.\n\n938\n00:46:25,747 --> 00:46:28,083\nIt actually stores them in its database.\n\n939\n00:46:28,083 --> 00:46:30,753\nNow, other routing protocols\nactually delete the route, but\n\n940\n00:46:30,753 --> 00:46:33,443\nEIGRP keeps it, because you never know.\n\n941\n00:46:33,443 --> 00:46:35,853\nWe might need that route down the road.\n\n942\n00:46:35,853 --> 00:46:41,253\nSo, EIGRP does maintain\na database of all that,\n\n943\n00:46:41,253 --> 00:46:47,023\nand you can do show IP EIGRP\ntopology to see that database.\n\n944\n00:46:47,023 --> 00:46:47,943\nAll right?\n\n945\n00:46:47,943 --> 00:46:50,790\nAnd this database is one of the,\n\n946\n00:46:50,790 --> 00:46:57,360\n3 different play rods that's what\nRonnie was talking about, right?\n\n947\n00:46:57,360 --> 00:47:02,660\nWe got our traconology data base,\nour neighbor database, and routing table.\n\n948\n00:47:02,660 --> 00:47:06,740\nAll right, for\nthe traconology that's a list of.\n\n949\n00:47:06,740 --> 00:47:09,950\nEvery network that we've learned about.\n\n950\n00:47:09,950 --> 00:47:12,350\nAnd you'll see like here\n192.168.1.0 is in there.\n\n951\n00:47:12,350 --> 00:47:13,920\nBut it's via connected, you know?\n\n952\n00:47:13,920 --> 00:47:14,730\n>> Yeah.\n>> Connected.\n\n953\n00:47:14,730 --> 00:47:15,390\nConnected.\nThese\n\n954\n00:47:15,390 --> 00:47:19,170\nare all ones that I'm directly connected\nto, but they are participating in EIGRP.\n\n955\n00:47:20,620 --> 00:47:25,200\nIn addition to this topology you\nalso have your actual routing table,\n\n956\n00:47:25,200 --> 00:47:28,120\nnot all of these routes make\nit into the routing table.\n\n957\n00:47:28,120 --> 00:47:31,660\nSo you may see some bad routes\nin here that didn't get chosen.\n\n958\n00:47:31,660 --> 00:47:34,380\nOnly the best make it\ninto the routing table.\n\n959\n00:47:34,380 --> 00:47:36,240\n>> Right.\n>> If you've got a perfect match\n\n960\n00:47:36,240 --> 00:47:38,300\nbetween your routing table and\nthis database,\n\n961\n00:47:38,300 --> 00:47:40,920\nthat usually means that you do not\nhave any redundancy in your network.\n\n962\n00:47:40,920 --> 00:47:42,050\n>> Right.\n>> No redundant paths, right?\n\n963\n00:47:42,050 --> 00:47:44,210\nThere's one way to get everywhere,\nand that's it.\n\n964\n00:47:44,210 --> 00:47:47,000\nBut if you've got multiple\nways to get somewhere,\n\n965\n00:47:47,000 --> 00:47:48,630\none way is normally\nbetter than the others.\n\n966\n00:47:48,630 --> 00:47:49,470\n>> Right.\n>> And it's the one\n\n967\n00:47:49,470 --> 00:47:51,130\nthat will make it into\nthe actual routing table.\n\n968\n00:47:51,130 --> 00:47:51,940\n>> Yep.\n\n969\n00:47:51,940 --> 00:47:52,440\nYou know the.\n\n970\n00:47:52,440 --> 00:47:55,200\nWhat we can actually see,\na router that did learn a new route,\n\n971\n00:47:55,200 --> 00:47:56,510\nis actually over on router one.\n\n972\n00:47:56,510 --> 00:47:57,170\nRight.\n>> Hm-mm.\n\n973\n00:47:57,170 --> 00:48:01,770\n>> Router 1 is not connected\nto that 172.16.1 network here.\n\n974\n00:48:01,770 --> 00:48:07,410\nSo this is where if, now Don shows\nus on router 1, the routing table.\n\n975\n00:48:07,410 --> 00:48:07,910\nDo it.\nYep.\n\n976\n00:48:09,950 --> 00:48:13,056\nNow we should see that 1.72.16.1 and\n\n977\n00:48:13,056 --> 00:48:16,398\nnotice there is that key\ncode there that is the D and\n\n978\n00:48:16,398 --> 00:48:21,263\nthen it shows us some other information\nbehind the actual route itself.\n\n979\n00:48:21,263 --> 00:48:24,097\n>> Yeah, so we can spot it right there,\nI've got that route.\n\n980\n00:48:24,097 --> 00:48:27,297\nAnd you know,\njust to save you time in real life land.\n\n981\n00:48:27,297 --> 00:48:30,451\nIf you ever have a really\nbig routing table,\n\n982\n00:48:30,451 --> 00:48:36,090\nyou can actually say show ip route eigrp\nand it will just show you EIGRP routes.\n\n983\n00:48:36,090 --> 00:48:40,670\nOr show ip route connected, show ip route\nospf, it's a quick way to filter it.\n\n984\n00:48:40,670 --> 00:48:42,610\nSo here's some of the EIGRP\nroutes that I'm learning.\n\n985\n00:48:42,610 --> 00:48:45,280\nSo I am learning EIGRP routes.\n\n986\n00:48:45,280 --> 00:48:49,350\nAnd if I do show ip eigrp neighbor,\nhere's my neighbor table.\n\n987\n00:48:49,350 --> 00:48:52,060\nSo there's the router on the other side.\n\n988\n00:48:52,060 --> 00:48:55,136\nAnd if I do a show ip eigrp topology,\n\n989\n00:48:55,136 --> 00:48:59,763\nhere's some of the routes\nthat I've learned about.\n\n990\n00:48:59,763 --> 00:49:05,050\nAnd one of them, 192.168.1.0,\nthat one shows as connected.\n\n991\n00:49:05,050 --> 00:49:07,610\nI've got it locally,\nI'm not gonna learn it from somebody else.\n\n992\n00:49:07,610 --> 00:49:10,533\nBut 192.168.2.0 and\n\n993\n00:49:10,533 --> 00:49:15,650\n172.16.1.0, I'm learning those via EIGRP.\n\n994\n00:49:15,650 --> 00:49:19,000\n>> So let's make sure that we\nhave this summarized for us.\n\n995\n00:49:19,000 --> 00:49:22,604\nWhen EIGRP,\nwhen two routers now become neighbors,\n\n996\n00:49:22,604 --> 00:49:26,780\nfirst of all they will build\ntheir own neighbor table, okay?\n\n997\n00:49:26,780 --> 00:49:29,448\nSo they actually end up learning\nwho they're actually gonna\n\n998\n00:49:29,448 --> 00:49:31,250\nexchange routes with.\n\n999\n00:49:31,250 --> 00:49:35,340\nThen, each router will then take\nwhat they learned from those, and\n\n1000\n00:49:35,340 --> 00:49:37,720\nbuild that topology table.\n\n1001\n00:49:37,720 --> 00:49:40,160\nAnd this is where that formula that\nwe talked about a little bit earlier,\n\n1002\n00:49:40,160 --> 00:49:41,030\nI'm not gonna go over it again,\n\n1003\n00:49:41,030 --> 00:49:44,960\ncuz only Don can go over it again,\nbut were from that topology table.\n\n1004\n00:49:44,960 --> 00:49:49,480\nThen they take every single route in there\nand run that particular dual algorithm.\n\n1005\n00:49:49,480 --> 00:49:54,120\nAnd that, whatever the best metric is, is\nwhat gets entered into the routing table.\n\n1006\n00:49:54,120 --> 00:49:55,820\nSo those are the three steps.\n\n1007\n00:49:55,820 --> 00:49:58,670\nNeighbor forms the topology table,\nessentially.\n\n1008\n00:49:58,670 --> 00:50:01,790\nAnd then from the topology table\nwe run the dual algorithm, and\n\n1009\n00:50:01,790 --> 00:50:04,650\nthat is what gets entered\ninto the routing table.\n\n1010\n00:50:04,650 --> 00:50:07,282\n>> And keep in mind that you can run\nmore than one routing protocol at\n\n1011\n00:50:07,282 --> 00:50:08,230\nthe same time.\n\n1012\n00:50:08,230 --> 00:50:11,180\nSo your routing table,\nwhile it does have EIGRP routes in it,\n\n1013\n00:50:11,180 --> 00:50:15,350\nit could also have OSPF routes,\ndirectly connected, and so on.\n\n1014\n00:50:15,350 --> 00:50:19,290\nThat's why we have\nthe administrative distance,\n\n1015\n00:50:19,290 --> 00:50:20,940\nwe've talked about it in other shows.\n\n1016\n00:50:20,940 --> 00:50:23,430\nEIGRP has an administrative\ndistance of 90.\n\n1017\n00:50:23,430 --> 00:50:24,890\nI can see it right there.\n\n1018\n00:50:24,890 --> 00:50:29,270\nIf I learn this same route from OSPF, it's\ngot an administrative distance of 110,\n\n1019\n00:50:29,270 --> 00:50:31,240\nI'll prefer the EIGRP route.\n\n1020\n00:50:31,240 --> 00:50:33,430\nBut if a learn an OSPF route for\n\n1021\n00:50:33,430 --> 00:50:37,400\na network that EIGRP doesn't know about,\nthe OSPF route will make it in here.\n\n1022\n00:50:37,400 --> 00:50:40,860\nSo your routing table could be\nmade up of multiple protocols.\n\n1023\n00:50:40,860 --> 00:50:43,430\nThe neighbor table and\nthe topology database,\n\n1024\n00:50:43,430 --> 00:50:47,150\nthose are just going to be\nEIGRP routes that are in there.\n\n1025\n00:50:47,150 --> 00:50:48,760\nSo a little bit of variation there.\n\n1026\n00:50:50,580 --> 00:50:53,280\nSo let's make this a little more exciting.\n\n1027\n00:50:53,280 --> 00:50:56,091\nSo I'm gonna jump over to\nthe other routers, and\n\n1028\n00:50:56,091 --> 00:50:59,530\nwe'll get them kinda brought\ninto this same environment.\n\n1029\n00:50:59,530 --> 00:51:07,070\nAnd let me just change this real quick,\nso it's a little easier to read.\n\n1030\n00:51:07,070 --> 00:51:10,070\nYeah, so basically I'm gonna go ahead and\nturn EIGRP on on these guys.\n\n1031\n00:51:10,070 --> 00:51:15,188\nNow with these guys, we've got that serial\nlink that's gonna come into play and\n\n1032\n00:51:15,188 --> 00:51:18,810\nwe've got more than one path\nto get to our destinations.\n\n1033\n00:51:18,810 --> 00:51:20,646\nSo we're gonna create a redundant link and\n\n1034\n00:51:20,646 --> 00:51:23,400\nthat's gonna make our topology\ndatabase look a little cooler.\n\n1035\n00:51:23,400 --> 00:51:29,060\nIt's always cooler when you've got\nmultiple things in there to kinda see.\n\n1036\n00:51:29,060 --> 00:51:31,730\nSo we'll get that here as soon\nas I get this configured.\n\n1037\n00:51:31,730 --> 00:51:35,410\nNow when you set up EIGRP,\nthere are some shortcuts that you can do.\n\n1038\n00:51:35,410 --> 00:51:38,545\nI don't like to use them on this\nshow because if you're studying for\n\n1039\n00:51:38,545 --> 00:51:41,030\nthe exam you need to know\nthe full commands and stuff.\n\n1040\n00:51:41,030 --> 00:51:45,170\nI'm gonna do this kinda\nthe long drawn-out way.\n\n1041\n00:51:45,170 --> 00:51:50,160\nIf I want a router to completely\nparticipate in EIGRP,\n\n1042\n00:51:50,160 --> 00:51:54,350\nI usually start with a show ip\ninterface brief like I did right here.\n\n1043\n00:51:54,350 --> 00:51:58,150\nAnd then use that to build the EIGRP\ncommands I'll need to activate it.\n\n1044\n00:51:58,150 --> 00:52:01,413\nSo I'll say router eigrp 1,\n\n1045\n00:52:01,413 --> 00:52:07,026\nnetwork 192.168.1.0, and 2.0 and\n\n1046\n00:52:07,026 --> 00:52:11,734\nlet's see I don't know what subnet mask.\n\n1047\n00:52:11,734 --> 00:52:15,074\n>> Should be 24 bit subnet mask on that.\n\n1048\n00:52:15,074 --> 00:52:16,114\nYep, on the 10.-.\n\n1049\n00:52:16,114 --> 00:52:20,490\n>> We'll check just to\nbe sure that's on fa0/1.\n\n1050\n00:52:20,490 --> 00:52:21,530\nIt is.\n\n1051\n00:52:21,530 --> 00:52:26,679\nSo we'll say network 10.10.1.0.\n\n1052\n00:52:26,679 --> 00:52:28,570\nThere we go.\n\n1053\n00:52:28,570 --> 00:52:30,310\nSo, there's those networks.\n\n1054\n00:52:31,620 --> 00:52:35,219\nAnd I can't remember if I saved\non router two so let me go and\n\n1055\n00:52:35,219 --> 00:52:36,700\ndo that real quick too.\n\n1056\n00:52:36,700 --> 00:52:37,490\nApparently I didn't.\n\n1057\n00:52:37,490 --> 00:52:39,360\nAnd then I'll save or I'll do router four.\n\n1058\n00:52:42,693 --> 00:52:44,660\nAll right, so\nI'm just gonna do the same thing here,\n\n1059\n00:52:44,660 --> 00:52:46,200\nlooks like the same network's in place.\n\n1060\n00:52:46,200 --> 00:52:52,075\nSo I'm gonna say router eigrp 1,\nand we'll advertise our networks.\n\n1061\n00:53:01,525 --> 00:53:02,485\nAll right.\n\n1062\n00:53:02,485 --> 00:53:05,410\nSo now if I go back to our topology.\n\n1063\n00:53:06,450 --> 00:53:10,410\nWhat our network is doing right\nnow is called converging, right?\n\n1064\n00:53:10,410 --> 00:53:12,960\nEach router has a different\nview of the network.\n\n1065\n00:53:12,960 --> 00:53:16,190\nSo now they're talking to each other,\nexchanging routes, and\n\n1066\n00:53:16,190 --> 00:53:19,940\nthey're trying to get to\na point where every router\n\n1067\n00:53:19,940 --> 00:53:22,480\nknows about all the networks\nthat are out there, right?\n\n1068\n00:53:22,480 --> 00:53:23,780\nSo what all networks do I have?\n\n1069\n00:53:23,780 --> 00:53:29,974\nWe've got the 192.168.1.0 network,\nwe've got the 192.168.2 network,\n\n1070\n00:53:29,974 --> 00:53:33,534\nthe 172.16.1, and the 10.10.1.0.\n\n1071\n00:53:33,534 --> 00:53:37,880\nSo there's really just four networks and\nthey're exchanging information about them.\n\n1072\n00:53:37,880 --> 00:53:41,420\nAnd when all four routers\nknow about all four networks,\n\n1073\n00:53:41,420 --> 00:53:42,920\nwe're said to have converged.\n\n1074\n00:53:42,920 --> 00:53:45,210\nNow EIGRP does this very fast.\n\n1075\n00:53:45,210 --> 00:53:48,730\nIn fact it was probably done before\nI even pulled this diagram up, so\n\n1076\n00:53:48,730 --> 00:53:50,720\nit should happen very quickly.\n\n1077\n00:53:50,720 --> 00:53:54,390\nRouter 1 should know about all\nfour networks that are out there.\n\n1078\n00:53:55,780 --> 00:53:58,159\nSo let's go take a look at router 1,\nsee if we passed the test.\n\n1079\n00:53:59,440 --> 00:54:05,450\nSo on router 1, I'll do a show id\nroute and I can see 192.168 1.0.\n\n1080\n00:54:05,450 --> 00:54:08,360\nI knew I would see that,\ncuz I'm directly connected, right?\n\n1081\n00:54:08,360 --> 00:54:12,185\nBut the other three I have to\nlearn from the network and\n\n1082\n00:54:12,185 --> 00:54:18,400\nI've got 192.168.2.0 as well\nas 172.16.1 and 10.10.1.\n\n1083\n00:54:18,400 --> 00:54:20,490\nSo are learning them.\n\n1084\n00:54:20,490 --> 00:54:23,440\nNow here's where we start\nto see some neat stuff.\n\n1085\n00:54:23,440 --> 00:54:26,980\nYou'll notice 192.168.2.0,\nyou've got two routes.\n\n1086\n00:54:26,980 --> 00:54:28,390\nTwo different ways to get there.\n\n1087\n00:54:28,390 --> 00:54:29,440\nSo, what's going on there?\n\n1088\n00:54:30,440 --> 00:54:35,430\nWell, these two routes have\nthe exact same metric.\n\n1089\n00:54:35,430 --> 00:54:40,800\nIf two routes have an equal metric EIGRP\nputs both of them to the routing table and\n\n1090\n00:54:40,800 --> 00:54:41,470\nnow we load balance.\n\n1091\n00:54:42,550 --> 00:54:46,070\nSo your router will start to send\nhalf the traffic over one link and\n\n1092\n00:54:46,070 --> 00:54:47,350\nhalf the traffic over the other.\n\n1093\n00:54:47,350 --> 00:54:50,170\nSo it does load balancing,\nby default it's half and half.\n\n1094\n00:54:50,170 --> 00:54:53,700\nIt's actually controlled by\nCisco Express Forwarding, C-E-F.\n\n1095\n00:54:53,700 --> 00:54:57,830\nAnd CEF can be manipulated to put more\nweight to one link versus another.\n\n1096\n00:54:57,830 --> 00:55:00,550\nSo you see you've got some flexibility\nthere, but the default is half and half.\n\n1097\n00:55:00,550 --> 00:55:01,880\n>> Yeah.\nNow the nice thing is,\n\n1098\n00:55:01,880 --> 00:55:04,320\nthis really does perform in that way.\n\n1099\n00:55:04,320 --> 00:55:06,750\nThe same way like OSPF really does.\n\n1100\n00:55:06,750 --> 00:55:10,660\nOSPF also can do what we call\nequal cost load balancing\n\n1101\n00:55:10,660 --> 00:55:13,420\nwhen the metric is exactly the same here.\n\n1102\n00:55:14,440 --> 00:55:17,570\nBut EIGRP, this is probably one of\nthe advantages we should have mentioned at\n\n1103\n00:55:17,570 --> 00:55:20,340\nthe beginning but I just didn't,\nbecause I just forgot,\n\n1104\n00:55:20,340 --> 00:55:23,680\nis the idea here of what we call\nunequal cost load balancing.\n\n1105\n00:55:23,680 --> 00:55:25,860\nAnd we'll probably see that\nin a few minutes as well.\n\n1106\n00:55:25,860 --> 00:55:30,210\n>> Yeah, we'll talk to that\none a little later because I.\n\n1107\n00:55:30,210 --> 00:55:31,450\n>> Yeah.\n\n1108\n00:55:31,450 --> 00:55:34,880\n>> We're actually introducing\na slight bug here that I want\n\n1109\n00:55:34,880 --> 00:55:36,300\nto highlight a little bit later.\n\n1110\n00:55:36,300 --> 00:55:37,200\nSo we'll see that.\n\n1111\n00:55:37,200 --> 00:55:39,780\nBut yeah, very cool cuz you can load\nbalance over darn near anything.\n\n1112\n00:55:39,780 --> 00:55:43,090\nWhereas, OSPF, very particular,\nit's gotta be equal.\n\n1113\n00:55:43,090 --> 00:55:48,149\nLet me just do a show ip eigrp\ntopology and in the database here,\n\n1114\n00:55:48,149 --> 00:55:52,923\nyou'll see this multiple routes\nthat are being learned and\n\n1115\n00:55:52,923 --> 00:55:55,230\nshown so you can spot those.\n\n1116\n00:55:55,230 --> 00:55:56,280\nSee it right there.\n\n1117\n00:55:56,280 --> 00:56:00,240\nAnd see how work can make that\ndecision over one path or another.\n\n1118\n00:56:00,240 --> 00:56:06,144\nWhen we go back to our topology router 1,\nwhat it's doing is basically saying hey,\n\n1119\n00:56:06,144 --> 00:56:09,320\nif I want to get to 192.168.2.0.\n\n1120\n00:56:09,320 --> 00:56:10,610\nHere I am.\n\n1121\n00:56:10,610 --> 00:56:17,098\nI can cross this 100 Mb switch to here,\nand then access the network, right?\n\n1122\n00:56:17,098 --> 00:56:23,173\nOr, I can cross this 100 Mb switch to\nhere, and then access the network.\n\n1123\n00:56:23,173 --> 00:56:24,717\nThey are exactly the same.\n\n1124\n00:56:24,717 --> 00:56:28,262\nThey're both 100 Mb They both\nget you to the same destination,\n\n1125\n00:56:28,262 --> 00:56:32,530\nthey are equal in all views of the\nprotocol, so we might as well go that way.\n\n1126\n00:56:32,530 --> 00:56:33,350\n>> Right.\n\n1127\n00:56:33,350 --> 00:56:37,060\n>> Alright, but let's take\nsomewhere where it's not so equal.\n\n1128\n00:56:37,060 --> 00:56:42,340\nLet's take, for example,\nsay we're on router two.\n\n1129\n00:56:42,340 --> 00:56:46,360\nAnd router two wants to get\nto the 10.10.1.0 network.\n\n1130\n00:56:47,430 --> 00:56:48,140\nOkay?\n\n1131\n00:56:48,140 --> 00:56:51,690\nWell, it knows that it could\ngo to this router, and\n\n1132\n00:56:51,690 --> 00:56:54,000\nthen get on the network, right?\n\n1133\n00:56:54,000 --> 00:56:58,190\nOr it could go to this router, and\nthen get on the network, right?\n\n1134\n00:56:58,190 --> 00:57:00,570\nSo they're equal,\nit could pick either one, right?\n\n1135\n00:57:00,570 --> 00:57:05,940\nWell no, they're not equal because\nthis one is a 100 megabit,\n\n1136\n00:57:05,940 --> 00:57:08,380\nthis is a serial link.\n\n1137\n00:57:08,380 --> 00:57:12,509\nIt's a serial link that's gonna have\nmuch lower, much worse metric, right?\n\n1138\n00:57:12,509 --> 00:57:14,960\nBecause it's got much lower bandwidth.\n\n1139\n00:57:14,960 --> 00:57:18,030\nSo, router two is actually gonna\nhave to make a decision and\n\n1140\n00:57:18,030 --> 00:57:18,910\npick one router or another.\n\n1141\n00:57:18,910 --> 00:57:20,160\nSo, we should be able to see that.\n\n1142\n00:57:20,160 --> 00:57:25,320\nIf we look at router two, and look for\nits route to the 10.10.1 network,\n\n1143\n00:57:25,320 --> 00:57:28,180\nwe should see those two different choices.\n\n1144\n00:57:28,180 --> 00:57:30,130\nSo, let's go take a look at that.\n\n1145\n00:57:30,130 --> 00:57:37,130\nWe'll pull up router two, here,\nand if I do a show IP route.\n\n1146\n00:57:37,130 --> 00:57:41,553\nI can see that for the 10.10.1 network,\nthere's only one route,\n\n1147\n00:57:41,553 --> 00:57:42,932\nin the routing table.\n\n1148\n00:57:42,932 --> 00:57:47,530\nAnd it's via my fast ethernet connection,\nnot via the serial connection, right?\n\n1149\n00:57:47,530 --> 00:57:49,055\nSo I can see where it chose that one.\n\n1150\n00:57:49,055 --> 00:57:54,164\nAnd if I do a show IP EIGRP topology,\nall right?\n\n1151\n00:57:54,164 --> 00:57:55,660\nAnd if I spell it right.\n\n1152\n00:57:56,990 --> 00:57:58,070\nThere we go.\n\n1153\n00:57:58,070 --> 00:58:03,180\nWhen I look for that 10.10.1, I actually\nsee three different ways to get there.\n\n1154\n00:58:03,180 --> 00:58:04,310\nThat's kind of interesting.\n\n1155\n00:58:04,310 --> 00:58:07,690\nBut, anyhow, I see three\ndifferent ways to get there, but\n\n1156\n00:58:07,690 --> 00:58:10,990\nthe metrics are all different, okay?\n\n1157\n00:58:10,990 --> 00:58:14,160\nSo here's the one that\nI picked as the winner.\n\n1158\n00:58:14,160 --> 00:58:15,420\nThis guy right here.\n\n1159\n00:58:15,420 --> 00:58:18,870\nI know this one's the winner because\nit says up here, FD is 30720.\n\n1160\n00:58:18,870 --> 00:58:21,880\nWe'll talk about that after the break.\n\n1161\n00:58:21,880 --> 00:58:24,800\nBut, so I just look for 30720 here.\n\n1162\n00:58:24,800 --> 00:58:25,590\n>> The lower metric.\n\n1163\n00:58:25,590 --> 00:58:26,130\n>> So that's the winner.\n\n1164\n00:58:26,130 --> 00:58:29,170\nThat is the one with the lowest\nmetric at 30,000 whatever.\n\n1165\n00:58:29,170 --> 00:58:30,000\n>> Yeah.\n\n1166\n00:58:30,000 --> 00:58:33,060\n>> The next best metric is 284,000.\n\n1167\n00:58:33,060 --> 00:58:35,130\nSignificantly higher, right?\n\n1168\n00:58:35,130 --> 00:58:40,132\nAnd then that serial link,\nit's 2 million 172,000\n\n1169\n00:58:40,132 --> 00:58:44,590\nis way higher that what\nthat original choice was.\n\n1170\n00:58:44,590 --> 00:58:50,120\nSo it picked the best one, and only\nthe best one made it to the routing table.\n\n1171\n00:58:50,120 --> 00:58:53,940\nThe other guys will not come into\nplay unless there's a failure.\n\n1172\n00:58:53,940 --> 00:58:55,660\n>> Yeah.\n>> If this link fails,\n\n1173\n00:58:55,660 --> 00:58:57,070\nthen we move to the second best.\n\n1174\n00:58:57,070 --> 00:58:59,940\nAnd if that one fails,\nthen we go to the third best, and so on.\n\n1175\n00:58:59,940 --> 00:59:03,380\nEIGRP is keeping track of that right here,\nand\n\n1176\n00:59:03,380 --> 00:59:06,010\nthese are basically like backups, right?\n\n1177\n00:59:06,010 --> 00:59:08,370\nThis is another advantage to EIGRP.\n\n1178\n00:59:08,370 --> 00:59:10,855\nWith OSPF, it doesn't track a backup.\n\n1179\n00:59:10,855 --> 00:59:13,170\n>> No.\n>> It doesn't know who's next in line.\n\n1180\n00:59:13,170 --> 00:59:14,470\nSo when there's a failure,\n\n1181\n00:59:14,470 --> 00:59:17,630\nit has to rerun the Dual Algorithm\nagainst the entire database.\n\n1182\n00:59:17,630 --> 00:59:21,100\nOr not dual, it has to rerun the SPF,\nthe shortest path first algorithm,\n\n1183\n00:59:21,100 --> 00:59:22,765\nagainst the entire database.\n\n1184\n00:59:22,765 --> 00:59:27,010\nWith EIGRP,\nit already knows who's in second place.\n\n1185\n00:59:27,010 --> 00:59:30,170\nSo it's already picked that person,\nit's ready to launch, and\n\n1186\n00:59:30,170 --> 00:59:31,670\nthat means it can fail over faster.\n\n1187\n00:59:31,670 --> 00:59:33,500\nAnd that's why we have that difference.\n\n1188\n00:59:33,500 --> 00:59:36,400\nEIGRP will fail over in under a second,\n\n1189\n00:59:36,400 --> 00:59:40,340\nwhereas OSPF will normally take about\na second and half to two seconds.\n\n1190\n00:59:40,340 --> 00:59:42,320\nVery small amount of time, right?\n\n1191\n00:59:42,320 --> 00:59:44,950\n>> But that's usually\nthe difference between the two.\n\n1192\n00:59:44,950 --> 00:59:48,602\n>> Now Don, I think it's interesting that\nit actually picked that fast ethernet\n\n1193\n00:59:48,602 --> 00:59:51,645\nzero/zero link, which is actually\ngoing back toward router one\n\n1194\n00:59:51,645 --> 00:59:55,210\ninstead of actually going straight\ndown through our ethernet connection.\n\n1195\n00:59:55,210 --> 00:59:57,260\n>> Let's take a look at our topology and\nsee what happened,\n\n1196\n00:59:57,260 --> 00:59:57,960\n>> Yeah\n\n1197\n00:59:57,960 --> 00:59:58,710\n>> right?\n\n1198\n00:59:58,710 --> 01:00:06,134\nSo basically the router said, you know I\ngot more choices than I care to deal with.\n\n1199\n01:00:06,134 --> 01:00:07,300\n>> [LAUGH]\n>> Wait.\n\n1200\n01:00:09,710 --> 01:00:10,330\nThere we go.\n\n1201\n01:00:10,330 --> 01:00:12,810\nSo the router said, all right,\nif I wanna get to that network,\n\n1202\n01:00:14,320 --> 01:00:19,060\nchoice number one was to go to\nthis router, and then hop on it.\n\n1203\n01:00:19,060 --> 01:00:19,990\nRight?\n\n1204\n01:00:19,990 --> 01:00:24,670\nChoice number two was to go to\nthis router, and then hop on it.\n\n1205\n01:00:24,670 --> 01:00:28,140\nAnd, then choice number three,\nthe one I didn't designate.\n\n1206\n01:00:28,140 --> 01:00:31,968\n>> Yeah, I didn't even\n>> Was to go across this switch,\n\n1207\n01:00:31,968 --> 01:00:35,140\nand then hop over to that network.\n\n1208\n01:00:35,140 --> 01:00:36,286\nAnd I didn't even think about that.\n\n1209\n01:00:36,286 --> 01:00:37,880\n>> Yeah.\n>> It's a switch, so visually,\n\n1210\n01:00:37,880 --> 01:00:39,150\nit looks like another hop.\n\n1211\n01:00:39,150 --> 01:00:40,190\n>> Yeah.\n>> But it really isn't.\n\n1212\n01:00:40,190 --> 01:00:42,020\nIt's basically a 100 megabit link.\n\n1213\n01:00:42,020 --> 01:00:43,570\nSo what did we have?\n\n1214\n01:00:43,570 --> 01:00:48,150\nWell we had 256K here, or\nwhatever the serial line is.\n\n1215\n01:00:48,150 --> 01:00:52,960\n10 megabit here, and 100 megabit here.\n\n1216\n01:00:52,960 --> 01:00:54,840\nSo yeah, it picked 100 megabit.\n\n1217\n01:00:54,840 --> 01:00:58,620\n>> And we see in the topology table where\nit actually did keep all three of them.\n\n1218\n01:00:58,620 --> 01:01:03,870\nIn theory, what should happen out,\nif for some reason that FA0/0 connection\n\n1219\n01:01:03,870 --> 01:01:06,660\ngoes down,\nthen it goes back in that topology table,\n\n1220\n01:01:06,660 --> 01:01:09,850\nit's already made the decision between\nthose two, and it will actually pick\n\n1221\n01:01:09,850 --> 01:01:12,810\nthe next one that will actually get\nloaded into that routing table.\n\n1222\n01:01:12,810 --> 01:01:18,950\n>> Yeah, so if we were to assign a rank\nto these things, like this guy was\n\n1223\n01:01:18,950 --> 01:01:24,220\nranked number one, and then you had\nthis guy who would be like number two.\n\n1224\n01:01:24,220 --> 01:01:28,340\nAnd then lastly, you have this guy\nto be like that can be number three.\n\n1225\n01:01:28,340 --> 01:01:29,710\nSo it's already figured that out.\n\n1226\n01:01:29,710 --> 01:01:32,690\nIt's ready to fail over, and\nwe can actually simulate that real fast.\n\n1227\n01:01:32,690 --> 01:01:34,500\n>> Yeah.\n>> Here, I'll simulate a failure.\n\n1228\n01:01:34,500 --> 01:01:37,350\nEasiest way to simulate a failure\nis just to shut down an interface.\n\n1229\n01:01:37,350 --> 01:01:42,212\nSo, right now if I do a show IP route and,\n\n1230\n01:01:42,212 --> 01:01:46,800\nyou only let me just filter this down.\n\n1231\n01:01:46,800 --> 01:01:50,920\nThere, so\nthere's my route to the 10.10.1 network.\n\n1232\n01:01:50,920 --> 01:01:55,210\nI'm going over my FA0/0 interface.\n\n1233\n01:01:55,210 --> 01:02:00,813\nIf I get into FA0/0, and I do a shut down,\n\n1234\n01:02:00,813 --> 01:02:05,205\nthat interface is gonna go down and\n\n1235\n01:02:05,205 --> 01:02:09,910\nnow it's switched over to E150.\n\n1236\n01:02:09,910 --> 01:02:12,910\nSo now it's moved other\nto the other one and\n\n1237\n01:02:12,910 --> 01:02:15,810\nif I do a no shut down\nto bring it back up.\n\n1238\n01:02:15,810 --> 01:02:17,670\nThat interface is gonna come back up and\n\n1239\n01:02:17,670 --> 01:02:20,430\nthe IGRP is gonna see\nthat's a higher bandwidth.\n\n1240\n01:02:20,430 --> 01:02:23,890\nThat's a better link and\nit may take it a second, but\n\n1241\n01:02:23,890 --> 01:02:27,420\nas soon as that neighbor relationship\ncomes back, there we go.\n\n1242\n01:02:27,420 --> 01:02:28,950\nIt's flip back to FA00.\n\n1243\n01:02:28,950 --> 01:02:30,210\n>> Oh really fast.\n\n1244\n01:02:30,210 --> 01:02:34,100\n>> Yeah, that's really the main selling\npoint of the IGRP is how fast it is.\n\n1245\n01:02:35,530 --> 01:02:37,670\nAlright well Ronnie, I know we've\nshot past our break time here, so\n\n1246\n01:02:37,670 --> 01:02:39,200\nwhy don't we stop and take a break.\n\n1247\n01:02:39,200 --> 01:02:42,520\nWhen we get back, I want to get back\nto what you were talking about.\n\n1248\n01:02:42,520 --> 01:02:45,040\nI wanna show a little bit\nmore about the metrics and\n\n1249\n01:02:45,040 --> 01:02:48,480\nthe unequal cost load balancing and\nall that good stuff.\n\n1250\n01:02:48,480 --> 01:02:50,920\nSo let's jump into that, but for\nright now we'll stop and take a break.\n\n1251\n01:02:50,920 --> 01:02:54,946\nStay tuned,\nmore exciting stuff when we get back.\n\n1252\n01:02:54,946 --> 01:03:04,006\n[SOUND]\nAll right, welcome back everybody.\n\n1253\n01:03:04,006 --> 01:03:07,892\nSo what I wanna do now, is I want to go\nback to that router we were working with\n\n1254\n01:03:07,892 --> 01:03:11,783\nbefore the break, where it showed that\nit had three different routes to get\n\n1255\n01:03:11,783 --> 01:03:14,726\nsomewhere and\none was making it into the routing table.\n\n1256\n01:03:14,726 --> 01:03:17,516\nI want to talk a little bit more\nabout how that decision was made.\n\n1257\n01:03:17,516 --> 01:03:21,551\nSo let's jump back over to router two and\n\n1258\n01:03:21,551 --> 01:03:25,476\nI'm gonna do a show IP EIGRP topology.\n\n1259\n01:03:25,476 --> 01:03:28,876\nAnd [LAUGH] which apparently\nI can't spell today.\n\n1260\n01:03:28,876 --> 01:03:33,490\nSo let's talk about what happened\nhere in making this decision.\n\n1261\n01:03:33,490 --> 01:03:38,350\nSo here is the here's the information\nthat you use to make that call, right.\n\n1262\n01:03:38,350 --> 01:03:40,760\nAnd so what you have is a network and\n\n1263\n01:03:40,760 --> 01:03:45,760\nthen here's the three routers we can go\nto, to be able to get to that destination.\n\n1264\n01:03:45,760 --> 01:03:49,650\nTwo of them are router three, it's two\ndifferent ways to get to router three and\n\n1265\n01:03:49,650 --> 01:03:54,230\none way to get to router four and each\none has a metric attached to it, right?\n\n1266\n01:03:54,230 --> 01:03:57,260\nNow you probably already\nnoticed that there's actually\n\n1267\n01:03:57,260 --> 01:03:59,340\ntwo metrics that are attached.\n\n1268\n01:03:59,340 --> 01:04:02,800\nAnd what we have is what's\ncalled a Feasible Distance and\n\n1269\n01:04:02,800 --> 01:04:04,260\nan Advertised Distance.\n\n1270\n01:04:04,260 --> 01:04:05,520\nSo let's talk about that.\n\n1271\n01:04:05,520 --> 01:04:06,350\n>> Yeah.\n\n1272\n01:04:06,350 --> 01:04:08,480\nWe start talking about this idea, right?\n\n1273\n01:04:08,480 --> 01:04:12,260\nThe Advertised Distance from your\nperspective, your own router two\n\n1274\n01:04:12,260 --> 01:04:16,990\nis you're actually asking your neighbor\nhow far is it to get to that destination.\n\n1275\n01:04:16,990 --> 01:04:18,754\nAnd so that router will\nactually report back to you.\n\n1276\n01:04:18,754 --> 01:04:20,059\nSo I'm on router two,\n\n1277\n01:04:20,059 --> 01:04:24,961\nI'm asking router three how far is it\nto get to that 10.10.1 network, okay?\n\n1278\n01:04:24,961 --> 01:04:28,425\nAnd then I go and ask router three and\nI go and ask whoever else I want to.\n\n1279\n01:04:28,425 --> 01:04:30,845\nAnd they will report to\nme what they believe or\n\n1280\n01:04:30,845 --> 01:04:35,330\nwhat they actually know is their\nbigger distance to that destination.\n\n1281\n01:04:35,330 --> 01:04:39,230\n>> So let me go back to our diagram and\nshow you guys kind of an example.\n\n1282\n01:04:40,470 --> 01:04:45,500\nSo let's say that we were working\nin this topology right here and\n\n1283\n01:04:45,500 --> 01:04:51,790\nthere was some other network that was\nattached like to this router here.\n\n1284\n01:04:51,790 --> 01:05:01,395\nOkay, so maybe out here,\nI had a 1.1.1.0/24 network.\n\n1285\n01:05:01,395 --> 01:05:03,485\nSo that network is out there.\n\n1286\n01:05:03,485 --> 01:05:07,305\nWell, router one, way on the left,\nit needs to get there.\n\n1287\n01:05:07,305 --> 01:05:13,160\nWell, it doesn't have a direct connection,\nso router one, this guy over here,\n\n1288\n01:05:13,160 --> 01:05:17,670\nis going to rely on its neighbors to\nfind a way to get there, all right?\n\n1289\n01:05:17,670 --> 01:05:19,408\nSo the neighbors are gonna have\nto tell it about that route.\n\n1290\n01:05:19,408 --> 01:05:26,360\nWell, this router has one way\nto get to that network, okay?\n\n1291\n01:05:26,360 --> 01:05:29,690\nAnd the other router,\nit has a way to get there also.\n\n1292\n01:05:29,690 --> 01:05:31,739\nSo they each have their\nown way to get there.\n\n1293\n01:05:32,840 --> 01:05:37,020\nSo when they advertise out,\nwhen they go to tell\n\n1294\n01:05:37,020 --> 01:05:42,250\nrouter 1 about how they can get there,\nthey're telling them about their journey.\n\n1295\n01:05:42,250 --> 01:05:42,750\nAll right?\n\n1296\n01:05:42,750 --> 01:05:48,220\nSo this guy up here, let me just\nstick a label on this real quick.\n\n1297\n01:05:48,220 --> 01:05:52,712\nSo this is router two and\nthen down here I've got router three.\n\n1298\n01:05:57,946 --> 01:06:02,216\nSo when router two talks to router one,\nrouter two is saying,\n\n1299\n01:06:02,216 --> 01:06:04,850\nlet me tell you about my journey.\n\n1300\n01:06:04,850 --> 01:06:07,970\nI'm gonna advertise this network to you.\n\n1301\n01:06:07,970 --> 01:06:11,980\nI'm advertising this\ngreen leg of the journey.\n\n1302\n01:06:11,980 --> 01:06:14,380\nHere's how you can get to that network,\nif you want.\n\n1303\n01:06:14,380 --> 01:06:16,570\nCuz this is how I get there, All right.\n\n1304\n01:06:16,570 --> 01:06:20,210\nRouter three is advertising its journey,\nthe red journey here.\n\n1305\n01:06:20,210 --> 01:06:22,440\nAnd to its saying here what\nit takes me to get there.\n\n1306\n01:06:22,440 --> 01:06:25,320\nThose are the advertise distances.\n\n1307\n01:06:25,320 --> 01:06:29,260\nWhen router one learns those, router one\nwill say, great here's what it takes\n\n1308\n01:06:29,260 --> 01:06:32,250\nrouter two to get there, here's what\nit takes to router three to get there.\n\n1309\n01:06:32,250 --> 01:06:36,900\nBut, I need to get to router two or\nI need to get to router three.\n\n1310\n01:06:36,900 --> 01:06:40,690\nThere's an extra leg of the journey\nthat's not really included.\n\n1311\n01:06:40,690 --> 01:06:46,425\nAnd that extra leg of the journey would\nbe router one getting to router two,\n\n1312\n01:06:46,425 --> 01:06:49,448\nor router one getting to router three.\n\n1313\n01:06:49,448 --> 01:06:52,610\nWhat router one has to do is\ntake the advertised distance,\n\n1314\n01:06:52,610 --> 01:06:56,840\nwhat we learned from the other router,\nand add this extra leg of the journey.\n\n1315\n01:06:56,840 --> 01:07:01,430\nAnd when it adds it, that creates\nwhat's called the feasible distance.\n\n1316\n01:07:01,430 --> 01:07:04,010\nAnd the Feasible Distance is\na true reflection of what\n\n1317\n01:07:04,010 --> 01:07:05,500\nthe actual route would be.\n\n1318\n01:07:05,500 --> 01:07:09,410\nThe whole thing, from end to end.\n\n1319\n01:07:09,410 --> 01:07:15,780\nSo, the feasible distance is the end\nto end cost for that router.\n\n1320\n01:07:15,780 --> 01:07:20,230\nThe advertised distance is the end\nto end cost for the neighbor.\n\n1321\n01:07:20,230 --> 01:07:22,130\n>> What the neighbor is telling us.\n\n1322\n01:07:22,130 --> 01:07:26,210\nSo we have to modify that in the EIRGP\nannouncements that are sent across\n\n1323\n01:07:26,210 --> 01:07:29,870\nthe network, those are also\nadvertising an advertised distance.\n\n1324\n01:07:29,870 --> 01:07:32,980\nWe then modify it locally to turn\nit into a feasible distance and\n\n1325\n01:07:32,980 --> 01:07:35,770\nthat's what's happening\nhere on our router.\n\n1326\n01:07:35,770 --> 01:07:38,830\nThat's why there are two metric values.\n\n1327\n01:07:38,830 --> 01:07:45,390\nThe neighbor told me it takes\nthem 28,160 to get there.\n\n1328\n01:07:45,390 --> 01:07:47,290\nBut when I added the feasible distance,\n\n1329\n01:07:47,290 --> 01:07:52,022\nwhat it takes me to get to that router,\nit became 30,720,\n\n1330\n01:07:52,022 --> 01:07:56,780\nand that's because we have a fast ethernet\nconnection, a 100 megabit connection.\n\n1331\n01:07:58,230 --> 01:08:01,720\nThe other router was router three also,\nright?\n\n1332\n01:08:01,720 --> 01:08:06,025\nAnd so again, it said hey, it's 28,160\nthe same value, it looks like a tie.\n\n1333\n01:08:06,025 --> 01:08:06,890\n>> Mm-hm.\n\n1334\n01:08:06,890 --> 01:08:10,740\n>> But our connection there was\nonly a 10 megabit connection.\n\n1335\n01:08:10,740 --> 01:08:15,710\nAnd so, when we factor that in,\nthe feasible distance becomes 284,000.\n\n1336\n01:08:15,710 --> 01:08:18,160\nSignificantly higher,\nnot as attractive, right?\n\n1337\n01:08:18,160 --> 01:08:20,260\nSo you see why feasible\ndistance is important.\n\n1338\n01:08:20,260 --> 01:08:22,300\nYou've got to look at the big picture and\n\n1339\n01:08:22,300 --> 01:08:26,040\nthat's what the router does when it\ncreates feasible distance, right?\n\n1340\n01:08:26,040 --> 01:08:30,552\nSo those two numbers, they're really only\nimportant right here on this router and\n\n1341\n01:08:30,552 --> 01:08:33,782\nin the routing table,\nyou only see the feasible distance.\n\n1342\n01:08:33,782 --> 01:08:39,803\nSo, see how 30,721, if I do show IP Route,\nand I filter down for\n\n1343\n01:08:39,803 --> 01:08:46,860\njust that route, I'll see that's the\nmetric that made it in the routing table.\n\n1344\n01:08:46,860 --> 01:08:52,246\n30,720 not 28,160.\n\n1345\n01:08:52,246 --> 01:08:55,830\nAll right,\nnow when the router does this calculation.\n\n1346\n01:08:55,830 --> 01:08:58,370\nIt figures out the feasible distance and\nthe administrative distance.\n\n1347\n01:08:58,370 --> 01:09:00,240\nThat's what it learns,\nthe advertise distance.\n\n1348\n01:09:00,240 --> 01:09:05,100\nWhen it figures those out,\nthen it picks what's called a successor.\n\n1349\n01:09:05,100 --> 01:09:08,148\nThe successor route is the route\nthat makes it in the routing table.\n\n1350\n01:09:08,148 --> 01:09:09,430\nAnd there might be more\nthan one successor,\n\n1351\n01:09:09,430 --> 01:09:12,670\nif there's a tie, but\nnormally there's just one successor.\n\n1352\n01:09:12,670 --> 01:09:15,040\nAnd that's the guy who makes\nit into the routing table.\n\n1353\n01:09:15,040 --> 01:09:16,890\nBut it doesn't stop there.\n\n1354\n01:09:16,890 --> 01:09:19,840\nThen it picks a feasible successor.\n\n1355\n01:09:19,840 --> 01:09:22,045\nThe feasible successor,\nthat's second place.\n\n1356\n01:09:22,045 --> 01:09:22,570\n>> Mm-hm.\n\n1357\n01:09:22,570 --> 01:09:23,850\n>> Who is second place?\n\n1358\n01:09:23,850 --> 01:09:28,685\nAnd so, right here it says,\nthere's one successor, and\n\n1359\n01:09:28,685 --> 01:09:31,845\nthe feasible distance of\nthat successor is 30,720.\n\n1360\n01:09:31,845 --> 01:09:36,135\nSo I find that here,\nthis is my successor, all right?\n\n1361\n01:09:36,135 --> 01:09:38,095\nBut whoever the next best one is,\n\n1362\n01:09:38,095 --> 01:09:41,760\nwhich would be this guy,\nthat is my feasible successor.\n\n1363\n01:09:41,760 --> 01:09:45,830\nThat's who is in second place, and will\ncome in to play in the event of a failure.\n\n1364\n01:09:45,830 --> 01:09:49,520\nEIGRP always calculates out the feasible\nsuccessor so it has it ready.\n\n1365\n01:09:49,520 --> 01:09:50,490\nSo it can respond faster.\n\n1366\n01:09:52,690 --> 01:09:57,360\nAll right now, Ronnie mentioned\nunequal cost load balancing.\n\n1367\n01:09:57,360 --> 01:10:02,760\nWhich is, what if I want to force\nthis other route to go active?\n\n1368\n01:10:02,760 --> 01:10:05,060\nWhat if I want it to be in\nthe routing table also and\n\n1369\n01:10:05,060 --> 01:10:07,005\nI wanna load balance even\nthough they're not equal?\n\n1370\n01:10:07,005 --> 01:10:08,735\n>> Mm-hm.\n>> Maybe they're really close.\n\n1371\n01:10:08,735 --> 01:10:10,930\n[LAUGH] Maybe I have two serial lines.\n\n1372\n01:10:10,930 --> 01:10:14,061\nAnd one is 1.544 megabit.\n\n1373\n01:10:14,061 --> 01:10:16,449\nAnd the other one is 1.5 megabit exactly.\n\n1374\n01:10:16,449 --> 01:10:17,040\n>> Mm-hm.\n\n1375\n01:10:17,040 --> 01:10:17,670\n>> Right?\n\n1376\n01:10:17,670 --> 01:10:21,800\nAnd they're close, but they're different,\nso EIGRP will just pick one.\n\n1377\n01:10:21,800 --> 01:10:23,900\nBut how I want to kind of\nfudge the numbers a bit and\n\n1378\n01:10:23,900 --> 01:10:25,360\nmake it where they both go active.\n\n1379\n01:10:25,360 --> 01:10:26,240\nWell, we can do that.\n\n1380\n01:10:26,240 --> 01:10:27,880\nIn OSPF, you can't.\n\n1381\n01:10:27,880 --> 01:10:31,220\nWell, you can manipulate the metrics,\nbut it's kind of a pain.\n\n1382\n01:10:31,220 --> 01:10:33,380\nIn EIGRP, they make it easy.\n\n1383\n01:10:33,380 --> 01:10:35,820\nWe have something called a variance.\n\n1384\n01:10:35,820 --> 01:10:39,630\nAnd with variance we can say,\ntake the successor and\n\n1385\n01:10:39,630 --> 01:10:43,040\nmultiply that feasible\ndistance by a number.\n\n1386\n01:10:43,040 --> 01:10:43,610\nAll right?\n\n1387\n01:10:43,610 --> 01:10:47,830\nAnd it multiplies it out, and\nthat new number's bigger and it says,\n\n1388\n01:10:47,830 --> 01:10:52,510\nany route that falls underneath this\nnewer, bigger number we'll treat as equal.\n\n1389\n01:10:52,510 --> 01:10:53,030\nAll right?\n\n1390\n01:10:53,030 --> 01:10:57,570\nSo we kind of skew the calculation there\nto figure out who's gonna become active.\n\n1391\n01:10:57,570 --> 01:11:01,990\nSo if I look at this, 30,000 is\nsignificantly smaller than 284,000.\n\n1392\n01:11:01,990 --> 01:11:03,137\nAll right.\n\n1393\n01:11:03,137 --> 01:11:05,844\nSo I would need to\ncalculate out of my head,\n\n1394\n01:11:05,844 --> 01:11:08,876\nwhat would I need to multiply 30,000 by?\n\n1395\n01:11:08,876 --> 01:11:10,220\n>> About ten, just about.\n\n1396\n01:11:10,220 --> 01:11:13,720\n>> Yeah, if I multiply by ten,\nit would be 307,000,\n\n1397\n01:11:13,720 --> 01:11:17,200\nwhich would be bigger than 284,000,\nand I think that's where we'd have to.\n\n1398\n01:11:17,200 --> 01:11:19,930\nIf we did nine,\nit would not be big enough.\n\n1399\n01:11:19,930 --> 01:11:25,480\nSo if I multiply this number by ten, then\nI become compatible with the other one and\n\n1400\n01:11:25,480 --> 01:11:28,030\nwe can do unequal load cost balancing.\n\n1401\n01:11:28,030 --> 01:11:30,000\nSo, let's see it.\n\n1402\n01:11:30,000 --> 01:11:34,620\nIf I go to my configuration and\nI go into router EIGRP one and\n\n1403\n01:11:34,620 --> 01:11:39,570\nI say variance and then I specify\nthe number I wanna multiple by.\n\n1404\n01:11:39,570 --> 01:11:41,420\nYou can do 1 through 128.\n\n1405\n01:11:41,420 --> 01:11:42,780\nIt doesn't do decimals [LAUGH].\n\n1406\n01:11:42,780 --> 01:11:44,520\nYou can't do fractions.\n\n1407\n01:11:44,520 --> 01:11:45,500\nSo I'm gonna say ten.\n\n1408\n01:11:45,500 --> 01:11:46,900\nVariance to ten.\n\n1409\n01:11:46,900 --> 01:11:50,630\nAll right, that will say multiply\nthe feasible distance by ten.\n\n1410\n01:11:50,630 --> 01:11:54,170\nAnybody who falls under that number, we'll\ngo ahead and load balance, all right.\n\n1411\n01:11:54,170 --> 01:11:55,218\nLets see how this impacted us.\n\n1412\n01:11:59,435 --> 01:12:01,350\nYou know, that's just bad\nfrom the beginning, isn't it?\n\n1413\n01:12:01,350 --> 01:12:05,400\n>> [LAUGH]\n>> Show IP EIGRP topology, trying to type.\n\n1414\n01:12:05,400 --> 01:12:07,720\nThere we go, okay.\n\n1415\n01:12:07,720 --> 01:12:12,020\nNow, I still see that I have\na feasible distance of 30,000 and\n\n1416\n01:12:12,020 --> 01:12:15,427\na feasible distance of 284,\nbut see what it says?\n\n1417\n01:12:15,427 --> 01:12:17,008\n>> Two successors, yeah.\n\n1418\n01:12:17,008 --> 01:12:21,191\n>> Now, two routes are making\nit in the routing table, and\n\n1419\n01:12:21,191 --> 01:12:22,890\nif I do a show IP route.\n\n1420\n01:12:22,890 --> 01:12:25,836\nAnd I hunt down that router,\nit's right here at the top.\n\n1421\n01:12:25,836 --> 01:12:29,196\nThere it is and see how they\nhave the different metrics and\n\n1422\n01:12:29,196 --> 01:12:31,810\ntheir in the routing table, right.\n\n1423\n01:12:31,810 --> 01:12:34,920\nVery cool functionality if you\nwant to do load balancing.\n\n1424\n01:12:34,920 --> 01:12:37,830\nNow Cisco express forwarding, CEF.\n\n1425\n01:12:37,830 --> 01:12:39,460\nIs running in the background and\n\n1426\n01:12:39,460 --> 01:12:43,450\nit's gonna see that one of these is 100\nmegabit and one of these is 10 megabit.\n\n1427\n01:12:43,450 --> 01:12:46,310\nAnd so it's not gonna do\na 50-50 split on these, right.\n\n1428\n01:12:46,310 --> 01:12:48,490\nIt's gonna do more of a 90-10, right.\n\n1429\n01:12:48,490 --> 01:12:51,300\nSo it'll send 90% of the traffic on\none leak and ten on the other so\n\n1430\n01:12:51,300 --> 01:12:52,880\nit is smarter than that.\n\n1431\n01:12:52,880 --> 01:12:54,420\nEIGRP isn't, right.\n\n1432\n01:12:54,420 --> 01:12:57,040\nEIGRP is not what\nactually moves your data.\n\n1433\n01:12:57,040 --> 01:12:59,180\nCEF on most routers is, and\n\n1434\n01:12:59,180 --> 01:13:01,910\nso CEF will make the smart\ndecision on how to load balance.\n\n1435\n01:13:01,910 --> 01:13:05,510\nBut the Azure IP makes it possible to load\nbalance so that's what's happening there.\n\n1436\n01:13:05,510 --> 01:13:06,585\n>> All right, so I have a question, Don.\n\n1437\n01:13:06,585 --> 01:13:07,280\n>> Hm-mm.\n\n1438\n01:13:07,280 --> 01:13:10,870\nWhy in the world would I ever\nchoose to do something like this?\n\n1439\n01:13:10,870 --> 01:13:12,480\nIn terms of unequal\n[INAUDIBLE] flow balancing.\n\n1440\n01:13:12,480 --> 01:13:13,210\nThat's.\n\n1441\n01:13:13,210 --> 01:13:17,040\n>> Well maybe,\nyour 100 megabit line is getting full.\n\n1442\n01:13:17,040 --> 01:13:18,830\n>> Yeah.\n>> And you've ordered a new line or\n\n1443\n01:13:18,830 --> 01:13:21,400\na bandwidth increase but it's not in yet,\nand so you're just looking to\n\n1444\n01:13:21,400 --> 01:13:24,170\nscrape whatever extra bandwidth\nyou can get out of the system.\n\n1445\n01:13:24,170 --> 01:13:24,900\n>> Right.\n>> So\n\n1446\n01:13:24,900 --> 01:13:28,410\ntemporarily you throw a variance in\nto bump it up and be able to get it.\n\n1447\n01:13:28,410 --> 01:13:32,440\nBut more commonly I've used this when\nyou have multiple serial lines and\n\n1448\n01:13:32,440 --> 01:13:33,860\nthey're close but not equal.\n\n1449\n01:13:33,860 --> 01:13:34,680\n>> Right.\n>> And so you use\n\n1450\n01:13:34,680 --> 01:13:37,570\nvariants to tweak that number a bit and\nnow you can get on them.\n\n1451\n01:13:37,570 --> 01:13:42,780\nSo that example of a 1.544 mega bit\nline and a 1.5, that's a true story.\n\n1452\n01:13:42,780 --> 01:13:45,502\n>> Yeah.\n>> I had a T1, that was 1.544, and\n\n1453\n01:13:45,502 --> 01:13:47,820\nan MPLS line that was just 1.5.\n\n1454\n01:13:47,820 --> 01:13:50,660\n>> They were so close,\njust 44k difference.\n\n1455\n01:13:50,660 --> 01:13:55,000\nThat it stunk that it wouldn't\nload balance so we did.\n\n1456\n01:13:55,000 --> 01:13:57,580\nSo it varies so it's kind of a cool thing.\n\n1457\n01:13:57,580 --> 01:14:01,896\nIn other routing protocols, you'd\nhave to manipulate the [CROSSTALK] so\n\n1458\n01:14:01,896 --> 01:14:05,022\nyou can do it but in EIGRP,\nwe can just use variance.\n\n1459\n01:14:05,022 --> 01:14:07,896\nNever a variance of 10, would you?\n\n1460\n01:14:07,896 --> 01:14:09,605\n>> In this scenario you have to.\n\n1461\n01:14:09,605 --> 01:14:11,040\nYou might even need to go larger.\n\n1462\n01:14:11,040 --> 01:14:11,940\n>> Right.\n\n1463\n01:14:11,940 --> 01:14:15,310\n>> Let's say for example,\nthat we want to go really far.\n\n1464\n01:14:16,640 --> 01:14:18,030\nLet's just take this to the max.\n\n1465\n01:14:18,030 --> 01:14:21,330\nIf we're gonna go big so\nwhen I look in the topology,\n\n1466\n01:14:21,330 --> 01:14:24,520\nI've got that other guy sitting\ndown there at 2 million, right?\n\n1467\n01:14:24,520 --> 01:14:27,960\nWhat if I'm gonna load balance\nacross that turkey also, right?\n\n1468\n01:14:27,960 --> 01:14:29,660\nWhat is the bandwidth on that line?\n\n1469\n01:14:29,660 --> 01:14:30,413\nNow I'm curious.\n\n1470\n01:14:30,413 --> 01:14:34,677\nIt is 1.544, all right,\n\n1471\n01:14:34,677 --> 01:14:39,940\nso it's [INAUDIBLE] T1 or\nat least it thinks that it is.\n\n1472\n01:14:39,940 --> 01:14:44,210\nSo if I wanna load balance across that\none also, now I gotta bigger challenge.\n\n1473\n01:14:44,210 --> 01:14:44,840\nRight?\n\n1474\n01:14:44,840 --> 01:14:47,282\nCuz would I have to multiply.\n\n1475\n01:14:47,282 --> 01:14:48,190\n>> [LAUGH].\n>> 30,000 by\n\n1476\n01:14:48,190 --> 01:14:50,300\nin order to get over 2 million.\n\n1477\n01:14:50,300 --> 01:14:50,810\nRight?\n\n1478\n01:14:50,810 --> 01:14:53,080\nWell 100 would definitely do it.\n\n1479\n01:14:53,080 --> 01:14:55,210\n>> Yeah.\n>> But if I wanted to more precise I could\n\n1480\n01:14:55,210 --> 01:14:55,880\nfigure it out.\n\n1481\n01:14:55,880 --> 01:14:57,840\nWell let's just call it 100.\n\n1482\n01:14:57,840 --> 01:14:59,390\n>> Yeah.\n>> So, 30,000 times 100 would be.\n\n1483\n01:14:59,390 --> 01:15:03,320\n>> 3 million,\nwhich would be over our 2 million here, so\n\n1484\n01:15:03,320 --> 01:15:04,660\nthat's good enough for me.\n\n1485\n01:15:04,660 --> 01:15:08,360\nSo if I bump that variance up high enough,\nthat will bring this one in too.\n\n1486\n01:15:08,360 --> 01:15:09,760\nOkay, well, in theory it will.\n\n1487\n01:15:11,840 --> 01:15:16,330\nAll right, so\nlet me get into my configuration, and\n\n1488\n01:15:16,330 --> 01:15:19,968\nwe will Router EIGRP 1.\n\n1489\n01:15:19,968 --> 01:15:26,640\n[LAUGH]\nMy variance.\n\n1490\n01:15:26,640 --> 01:15:28,250\nI'll bump up my variance to 100.\n\n1491\n01:15:32,209 --> 01:15:37,150\nNow, it's kicking out a warning here\nthat I'm doing unequal and there's some.\n\n1492\n01:15:37,150 --> 01:15:40,470\n>> Stuff going on that is a problem, okay.\n\n1493\n01:15:40,470 --> 01:15:43,550\nAnd there's something we do have to be\naware of when we get to really large\n\n1494\n01:15:43,550 --> 01:15:45,470\nvariances so\nI'll point that out here in a second.\n\n1495\n01:15:45,470 --> 01:15:51,100\nBut if I take a look at my show\nIP EIGRP topology, all right.\n\n1496\n01:15:51,100 --> 01:15:55,220\nWhen I look at it,\nI do see that I've got 3 successors and so\n\n1497\n01:15:55,220 --> 01:15:59,120\nall 3 of these guys have now\nmade it into the routing table.\n\n1498\n01:15:59,120 --> 01:16:01,050\nAnd if I look in my routing\ntable sure enough all 3.\n\n1499\n01:16:01,050 --> 01:16:01,680\n>> Sure enough all 3.\n\n1500\n01:16:01,680 --> 01:16:02,180\n>> Of them are there.\n\n1501\n01:16:02,180 --> 01:16:07,430\nAll right, now Cisco express forwarding\nkind of choked on that a little bit.\n\n1502\n01:16:07,430 --> 01:16:08,590\n>> Yeah.\n>> And.\n\n1503\n01:16:08,590 --> 01:16:09,670\n>> It didn't like it.\n\n1504\n01:16:09,670 --> 01:16:11,370\n>> Where's my scroll bar.\n\n1505\n01:16:11,370 --> 01:16:14,170\nAnd yeah, it's just a different bandwidth.\n\n1506\n01:16:14,170 --> 01:16:16,910\nThat it said it's not\nworth factoring it in.\n\n1507\n01:16:16,910 --> 01:16:21,740\nAnd so we got a warning\nhere; ratio of unequal path\n\n1508\n01:16:21,740 --> 01:16:27,000\nwaitings prevents IP adjacency out\nof serial 2/0 from being used.\n\n1509\n01:16:27,000 --> 01:16:30,620\nSo, CDF is just kicking out\nsaying it's just too different,\n\n1510\n01:16:30,620 --> 01:16:36,250\nwhen you got a 100 megabit line compared\nto a 10 megabit compared to a 1.5,\n\n1511\n01:16:36,250 --> 01:16:39,360\nit's just not worth it to do it, and\nso it's chucking up that other line.\n\n1512\n01:16:39,360 --> 01:16:44,050\nIf I kill the 100 megabit line though,\nI bet it will balance across the two.\n\n1513\n01:16:44,050 --> 01:16:46,070\nSo it's happy now and it's balancing.\n\n1514\n01:16:47,500 --> 01:16:53,320\nBut, sometimes when you set a really large\nvariance like this that third successor\n\n1515\n01:16:53,320 --> 01:16:56,990\nmight not even make it into the routing\ntable, and there's a reason for that.\n\n1516\n01:16:58,150 --> 01:17:04,100\nEIGRP is trying to guarantee\n100% loop free routing.\n\n1517\n01:17:04,100 --> 01:17:08,600\nWell, when you learn a route to\na network It's always possible\n\n1518\n01:17:08,600 --> 01:17:13,410\nthat you could be learning one of your own\nroutes back again and so there's a little\n\n1519\n01:17:13,410 --> 01:17:17,260\nloop prevention mechanism here that can\nsometimes stop variance from working.\n\n1520\n01:17:17,260 --> 01:17:18,650\nLet me go to our diagram.\n\n1521\n01:17:18,650 --> 01:17:21,960\nI kind of hoped it would happen here\nin this topology but it didn't.\n\n1522\n01:17:23,120 --> 01:17:26,530\nI know it happened on one of our other\nshows but here I'll just kinda show it.\n\n1523\n01:17:26,530 --> 01:17:30,730\nLet's say for\nexample that I was trying to get to.\n\n1524\n01:17:34,136 --> 01:17:36,240\nLet's see, here.\n\n1525\n01:17:36,240 --> 01:17:38,940\nSome off shoot network\nthat was out over here.\n\n1526\n01:17:38,940 --> 01:17:41,545\nI think I did like 1.1.1.\n\n1527\n01:17:41,545 --> 01:17:42,658\n0 earlier, that is absolutely horrible.\n\n1528\n01:17:42,658 --> 01:17:51,216\n>> [LAUGH].\n\n1529\n01:17:51,216 --> 01:17:55,950\nI get a little particular sometimes there,\nalright.\n\n1530\n01:17:55,950 --> 01:17:59,140\nSo this router up here wants\nto get to that network.\n\n1531\n01:17:59,140 --> 01:18:01,900\nNow it knows that it can go\nover this way and get there and\n\n1532\n01:18:01,900 --> 01:18:03,360\nit's over a serial link, right?\n\n1533\n01:18:04,470 --> 01:18:09,930\nBut when it advertises that network out,\nthe network gets advertised to this guy,\n\n1534\n01:18:09,930 --> 01:18:15,100\nand it could get advertised to this guy,\nand it could get advertised back to us!\n\n1535\n01:18:15,100 --> 01:18:15,790\nI say it could.\n\n1536\n01:18:15,790 --> 01:18:17,300\nIt will.\nThis will happen.\n\n1537\n01:18:17,300 --> 01:18:17,910\nAlright.\n\n1538\n01:18:17,910 --> 01:18:21,240\nThe reason this will happen is,\nwhen these networks are advertised.\n\n1539\n01:18:21,240 --> 01:18:24,710\nYou have split horizon,\nthat says never advertise a route,\n\n1540\n01:18:24,710 --> 01:18:26,690\nout the same interface you learned it on.\n\n1541\n01:18:26,690 --> 01:18:28,310\nBut that's never happening here.\n\n1542\n01:18:28,310 --> 01:18:33,590\nI'm advertising out S2/0 It's coming\nin here on S2/0 and going out Fa0/0.\n\n1543\n01:18:33,590 --> 01:18:38,630\nIt's coming in here on Fa0/1 and\ngoing out E1/0.\n\n1544\n01:18:38,630 --> 01:18:40,990\nIt's never going out the same\ninterface it came in on.\n\n1545\n01:18:40,990 --> 01:18:45,450\nSo split-horizon will not stop us from\nre-learning our own route back again.\n\n1546\n01:18:45,450 --> 01:18:46,695\n>> Hm-mm.\n>> Okay.\n\n1547\n01:18:46,695 --> 01:18:48,315\nBut here's the thing.\n\n1548\n01:18:48,315 --> 01:18:51,605\nThe feasible distance or\nthe advertised distance of this link,\n\n1549\n01:18:51,605 --> 01:18:55,355\nas this comes back in,\nthe advertised distance that's coming in\n\n1550\n01:18:55,355 --> 01:18:58,930\nis going to be Increasing with\neach leg along the journey.\n\n1551\n01:18:58,930 --> 01:19:00,830\nSo you got this leg and this leg.\n\n1552\n01:19:00,830 --> 01:19:03,580\nSo by the time router 3 is\ntelling router 2 about it,\n\n1553\n01:19:03,580 --> 01:19:05,708\nthat advertised distance\nhas increased a good bit.\n\n1554\n01:19:05,708 --> 01:19:06,551\n>> Hm-mm.\n\n1555\n01:19:06,551 --> 01:19:07,534\n>> Alright..\n\n1556\n01:19:07,534 --> 01:19:11,040\nWell, with that increased\nadvertised distance like that.\n\n1557\n01:19:11,040 --> 01:19:12,430\nThe router here will look at it and\n\n1558\n01:19:12,430 --> 01:19:17,600\nsay man that advertise distance is so\nbad compared to what I've already got\n\n1559\n01:19:17,600 --> 01:19:20,460\nthat I'll bet I'm learning my\nown route back again right.\n\n1560\n01:19:20,460 --> 01:19:22,470\nAnd it'll say you know what\nthat's probably my own route.\n\n1561\n01:19:22,470 --> 01:19:23,625\nI'm going to leave it out of the route.\n\n1562\n01:19:23,625 --> 01:19:28,825\nI'm not gonna put it in the database,\nI'm just gonna ignore it and leave it out.\n\n1563\n01:19:28,825 --> 01:19:30,395\nOr a lot of times it'll make\nit in the database, but\n\n1564\n01:19:30,395 --> 01:19:32,005\nit'll never choose it to put\nit in the routing table.\n\n1565\n01:19:33,015 --> 01:19:36,707\n>> So it'll know about it,\nif a failure happens, maybe it'll use it.\n\n1566\n01:19:36,707 --> 01:19:41,587\nBut if the failure is ours, if\nthe failure happens here, then this route\n\n1567\n01:19:41,587 --> 01:19:45,027\nis no longer gonna be there which means\nwe're not gonna learn it back again.\n\n1568\n01:19:45,027 --> 01:19:47,807\nYou know, it's never gonna come back\nbecause you stopped advertising it.\n\n1569\n01:19:47,807 --> 01:19:50,030\nSo it's a protection mechanism.\n\n1570\n01:19:50,030 --> 01:19:52,810\nIf the advertised distance coming in\n\n1571\n01:19:52,810 --> 01:19:57,730\nis higher than the feasible distance that\nwe've already chosen, it's either one,\n\n1572\n01:19:57,730 --> 01:20:01,510\na loop, or two,\na really really crappy route.\n\n1573\n01:20:01,510 --> 01:20:03,580\nAnd so either way we don't want it.\n\n1574\n01:20:03,580 --> 01:20:06,059\nWell, when you start\ntinkering with variance,\n\n1575\n01:20:06,059 --> 01:20:09,509\nyou're tinkering with those metrics,\nwhat's getting treated.\n\n1576\n01:20:09,509 --> 01:20:13,222\nAnd so sometimes you might have a route\nthat's like that where the advertised\n\n1577\n01:20:13,222 --> 01:20:14,477\ndistance is too high and so\n\n1578\n01:20:14,477 --> 01:20:17,636\nthe router's not going to consider\nit unless a failure happens.\n\n1579\n01:20:17,636 --> 01:20:19,869\nSo if you ratchet that\nvariance up really high and\n\n1580\n01:20:19,869 --> 01:20:22,380\nthe route still doesn't make\nit in the routing table.\n\n1581\n01:20:22,380 --> 01:20:24,612\nThat's more than likely\nwhat's happening and\n\n1582\n01:20:24,612 --> 01:20:27,520\nthat's a loop prevention\nmechanism that is unique to EIGRP.\n\n1583\n01:20:27,520 --> 01:20:31,840\nIt doesn't happen with RIP and OSPF app,\nbut EIGRP does it as a safety measure.\n\n1584\n01:20:31,840 --> 01:20:32,600\n>> Yeah.\n\n1585\n01:20:32,600 --> 01:20:36,450\nSo Don if we go back to router two let's\ntake a look at the topology table again.\n\n1586\n01:20:36,450 --> 01:20:39,338\nLet's make sure that we drill in\non this a little bit more here.\n\n1587\n01:20:39,338 --> 01:20:40,503\nJust briefly.\n\n1588\n01:20:44,996 --> 01:20:48,982\nSo what Don is talking about is what\ntechnically they call the feasibility\n\n1589\n01:20:48,982 --> 01:20:50,240\ncondition, right?\n\n1590\n01:20:50,240 --> 01:20:51,640\nIs what we're taking a look at.\n\n1591\n01:20:51,640 --> 01:20:55,119\nSo, in that last link where see\nthe 10.10.1 network that you see.\n\n1592\n01:20:55,119 --> 01:20:58,493\nNotice that in the advertised\ndistance of all of those that we\n\n1593\n01:20:58,493 --> 01:21:03,069\nsee there on each of those three, they're\nessentially exactly the same, okay?\n\n1594\n01:21:03,069 --> 01:21:05,990\n>> Mm-hm.\n>> And that's why that route, that we\n\n1595\n01:21:05,990 --> 01:21:10,860\nactually went up to a hundred, you know,\nthat two million route still got in there.\n\n1596\n01:21:10,860 --> 01:21:15,530\nIf the advertised distance\nof what you solved for 2.3,\n\n1597\n01:21:15,530 --> 01:21:20,650\nwas higher than that 30,000 70, 720,\nthen it would've never, in theory, gotten\n\n1598\n01:21:23,370 --> 01:21:27,880\ninto that table even if you put\na variance of 100 in there.\n\n1599\n01:21:27,880 --> 01:21:29,780\n>> Yeah, and\nno matter what the variance is set at,\n\n1600\n01:21:29,780 --> 01:21:31,250\nit'll never make it in that scenario.\n\n1601\n01:21:31,250 --> 01:21:33,380\nSo, that's usually the number one problem.\n\n1602\n01:21:33,380 --> 01:21:36,210\nAnd if you see a question like\nthat on the exam of why if you\n\n1603\n01:21:36,210 --> 01:21:38,320\ncrank up the variances and\nit's not working, why?\n\n1604\n01:21:38,320 --> 01:21:39,490\nStart looking at those distances,\n\n1605\n01:21:39,490 --> 01:21:42,630\nsince it's almost always the case,\nwhere the advertised distance is higher,\n\n1606\n01:21:42,630 --> 01:21:44,640\nthen the feasible distance\nof the current successor.\n\n1607\n01:21:44,640 --> 01:21:47,420\nAnd so it's just, it's not gonna make it.\n\n1608\n01:21:47,420 --> 01:21:49,710\nSo, definitely be aware\nof that little bug.\n\n1609\n01:21:49,710 --> 01:21:54,180\nAnd in fact, you know we're not gonna do\ntrouble shooting in this episode cuz we\n\n1610\n01:21:54,180 --> 01:21:57,040\nhave another episode where we've\nalready done EIRGP trouble shooting,\n\n1611\n01:21:57,040 --> 01:21:58,165\nwe have some great stuff in there.\n\n1612\n01:21:58,165 --> 01:21:58,930\n>> Mm-hm.\n\n1613\n01:21:58,930 --> 01:22:01,240\n>> That little but\nactually happens in that episode.\n\n1614\n01:22:01,240 --> 01:22:02,730\n>> Yeah.\n>> We encounter it so\n\n1615\n01:22:02,730 --> 01:22:08,370\nif you're watching this episode now, we're\ncovering just the EIRGP configuration,\n\n1616\n01:22:08,370 --> 01:22:10,450\nfor the trouble shooting,\ncheck out that other episode.\n\n1617\n01:22:10,450 --> 01:22:12,395\nAnd we re cover a lot of this stuff.\n\n1618\n01:22:12,395 --> 01:22:14,230\n>> Mm-hm.\n>> Cuz we actually filmed that one first.\n\n1619\n01:22:14,230 --> 01:22:17,390\nSo you kinda get some repetition\nwhich is good for retention, but\n\n1620\n01:22:17,390 --> 01:22:18,920\nthe troubleshooting is pretty impressive.\n\n1621\n01:22:18,920 --> 01:22:21,840\nWe did some great frame relay\ntroubleshooting in that one.\n\n1622\n01:22:21,840 --> 01:22:26,230\nAll right, so honestly Ronnie, I think\nwe're kinda winding down on our topics.\n\n1623\n01:22:26,230 --> 01:22:27,290\nWhat have we not covered?\n\n1624\n01:22:27,290 --> 01:22:30,174\n>> We've got some passive interfaces and\nauto summary,\n\n1625\n01:22:30,174 --> 01:22:32,689\nthat's what we really\nhave kind of left there.\n\n1626\n01:22:32,689 --> 01:22:36,370\n>> Okay, we probably don't have enough\ntime to jump into that in this segment.\n\n1627\n01:22:36,370 --> 01:22:37,260\nSo why don't we do this.\n\n1628\n01:22:37,260 --> 01:22:40,420\nWhy don't we go and stop and\ntake a break, and when we get back,\n\n1629\n01:22:40,420 --> 01:22:43,640\nwe're gonna talk about auto summary, which\nis one of those classful things that's\n\n1630\n01:22:43,640 --> 01:22:46,800\nstill hanging around, but\nis incredibly useful if you plan for it.\n\n1631\n01:22:46,800 --> 01:22:48,670\nAnd we'll talk about passive interfaces,\n\n1632\n01:22:48,670 --> 01:22:53,780\nwhich are another thing you'll use on\na regular basis, so we'll tackle those.\n\n1633\n01:22:53,780 --> 01:22:55,520\nAnything else to fill in before we stop.\n\n1634\n01:22:55,520 --> 01:22:57,100\n>> No great place to stop.\n\n1635\n01:22:57,100 --> 01:22:58,450\n>> So ladies and gentlemen, stay tuned.\n\n1636\n01:22:58,450 --> 01:23:02,250\nWhen we get back, we'll tackle the last\ncouple things and wrap up from there.\n\n1637\n01:23:02,250 --> 01:23:03,723\nSo stay tuned, we'll be back after this.\n\n1638\n01:23:03,723 --> 01:23:06,898\n[MUSIC]\n\n1639\n01:23:06,898 --> 01:23:12,722\n[SOUND]\nAll\n\n1640\n01:23:12,722 --> 01:23:16,832\nright welcome back everybody, so what\nwere gonna do now is wrap up on the last\n\n1641\n01:23:16,832 --> 01:23:20,210\ncouple of objectives that\nwe haven't tackled yet.\n\n1642\n01:23:20,210 --> 01:23:24,630\nWe still have auto summary and\npassive interfaces.\n\n1643\n01:23:24,630 --> 01:23:29,230\nLet's start with auto summary, and\nthis is one of those scenarios where.\n\n1644\n01:23:29,230 --> 01:23:34,330\nI mentioned how EIGRP can behave\nin a somewhat classical form and\n\n1645\n01:23:34,330 --> 01:23:37,660\nso we need to be aware of it and\nkinda tweak it and it can help us.\n\n1646\n01:23:37,660 --> 01:23:39,430\nSo, I want to show you guys that.\n\n1647\n01:23:39,430 --> 01:23:45,100\nUnfortunately, our network design as it\nis right now is so structurally sound, we\n\n1648\n01:23:45,100 --> 01:23:48,710\ndidn't really break too many rules, that\nwe're not gonna have a good example of it.\n\n1649\n01:23:48,710 --> 01:23:53,060\nSo, what I'm gonna do is I'm gonna\ncreate a situation on these routers and\n\n1650\n01:23:53,060 --> 01:23:55,780\nkind of show us where auto summary\ncan be beneficial, all right?\n\n1651\n01:23:55,780 --> 01:23:59,550\nSo, right now when I look at router one,\nand I do a show IP route.\n\n1652\n01:23:59,550 --> 01:24:02,615\nI see all these different networks\nthat are out there, and it's exciting.\n\n1653\n01:24:02,615 --> 01:24:03,280\n>> Mm-hm.\n>> It's thrilling.\n\n1654\n01:24:03,280 --> 01:24:07,618\nThey're there, right?\nSo, 192.168.1 and .2, 172.16.0, or\n\n1655\n01:24:07,618 --> 01:24:13,232\nactually it's just .1, and then the 10.0\nnetworks that are out there, right?\n\n1656\n01:24:13,232 --> 01:24:15,540\nSo these are networks that are out there.\n\n1657\n01:24:15,540 --> 01:24:20,190\nAnd as we add more networks, the router's\ngonna need to learn about these and\n\n1658\n01:24:20,190 --> 01:24:21,420\npropagate across.\n\n1659\n01:24:21,420 --> 01:24:25,910\nWell as your routing table gets bigger and\nbigger and bigger,\n\n1660\n01:24:25,910 --> 01:24:29,600\nit takes the routers longer and longer and\nlonger to calculate out the best routes,\n\n1661\n01:24:29,600 --> 01:24:32,680\nso the bigger your routing table is,\nthe worse performance you get.\n\n1662\n01:24:32,680 --> 01:24:35,729\nNow even the low end Cisco routers\nare designed to handle a couple\n\n1663\n01:24:35,729 --> 01:24:36,586\nhundred routes.\n\n1664\n01:24:36,586 --> 01:24:37,178\n>> [LAUGH] Yeah.\n\n1665\n01:24:37,178 --> 01:24:40,122\n>> The routers that have\na 2000 model number or\n\n1666\n01:24:40,122 --> 01:24:43,830\nhigher can normally handle\nseveral thousand routes.\n\n1667\n01:24:43,830 --> 01:24:44,980\nThe ones that are 7000 and\n\n1668\n01:24:44,980 --> 01:24:47,490\nhigher can usually handle over\na hundred thousand routes.\n\n1669\n01:24:47,490 --> 01:24:49,400\nSo they can handle a lot of routes.\n\n1670\n01:24:49,400 --> 01:24:50,140\nAll right?\n\n1671\n01:24:50,140 --> 01:24:52,500\nBut if you're in an environment like that,\n\n1672\n01:24:52,500 --> 01:24:55,580\nit's always a good idea to keep\na routing table as small as possible.\n\n1673\n01:24:55,580 --> 01:24:58,350\nAnd route summarization is how we do that.\n\n1674\n01:24:58,350 --> 01:25:00,770\nIn OSPF, you've got to do it by hand.\n\n1675\n01:25:00,770 --> 01:25:02,700\n>> Right.\n>> You got to manually route summarize.\n\n1676\n01:25:02,700 --> 01:25:04,300\n>> Summarize.\n[LAUGH]\n\n1677\n01:25:04,300 --> 01:25:06,690\n>> You've got to manually route summarize.\n\n1678\n01:25:06,690 --> 01:25:09,480\nAnd you can only do it\nbetween area boundaries.\n\n1679\n01:25:09,480 --> 01:25:10,880\n>> Right\n>> So that's the only place that you can\n\n1680\n01:25:10,880 --> 01:25:12,050\nsummarize.\n\n1681\n01:25:12,050 --> 01:25:14,920\nIn EIGRP you can summarize\nwherever the heck you want.\n\n1682\n01:25:14,920 --> 01:25:16,100\nIt's up to you.\n\n1683\n01:25:16,100 --> 01:25:20,950\nAnd even better you can have it to where\nEIGRP does it for you automatically.\n\n1684\n01:25:20,950 --> 01:25:23,923\nAll right?\nSo that's what I wanna show you guys and\n\n1685\n01:25:23,923 --> 01:25:28,921\nkind of get you experienced so you can\nanticipate that behavior of the router.\n\n1686\n01:25:28,921 --> 01:25:30,430\nAll right.\n\n1687\n01:25:30,430 --> 01:25:31,290\nSo let's take a look at this.\n\n1688\n01:25:31,290 --> 01:25:34,340\nLet me go back to our topology and\nsee where I wanna inject this.\n\n1689\n01:25:34,340 --> 01:25:37,840\nSo what I'm gonna do is I'm\ngonna take router four,\n\n1690\n01:25:37,840 --> 01:25:39,860\nthis guy over here on the right.\n\n1691\n01:25:39,860 --> 01:25:43,440\nAnd I'm gonna add some more\nnetworks to router four.\n\n1692\n01:25:43,440 --> 01:25:45,440\nNow routers two and\nthree will learn about those, and\n\n1693\n01:25:45,440 --> 01:25:47,200\nthen they'll advertise\nthem over to router one.\n\n1694\n01:25:47,200 --> 01:25:52,170\nSo router one's gonna learn about these\nnew networks through the EIGRP process.\n\n1695\n01:25:52,170 --> 01:25:54,251\nSo let me go and\njump over to router four and\n\n1696\n01:25:54,251 --> 01:25:56,286\nsee what interfaces I have to work with.\n\n1697\n01:25:59,205 --> 01:26:03,420\nAnd I don't have a whole lot\nof extra interfaces here do I?\n\n1698\n01:26:03,420 --> 01:26:05,940\n>> No.\n>> Let's go the other way around.\n\n1699\n01:26:05,940 --> 01:26:07,710\n>> Okay.\n>> Cuz I know we got an extra interface on\n\n1700\n01:26:07,710 --> 01:26:10,280\nrouter one, so we'll just reverse it.\n\n1701\n01:26:10,280 --> 01:26:12,300\nSo going back to this topology.\n\n1702\n01:26:12,300 --> 01:26:14,590\nI'm gonna add some networks to router one,\nand\n\n1703\n01:26:14,590 --> 01:26:17,860\nrouter four will learn about\nthem through the wire.\n\n1704\n01:26:19,210 --> 01:26:20,410\nAll right, so on router one\n\n1705\n01:26:22,130 --> 01:26:26,885\nI've got this fa0/1 interface I'm not\nusing right now, so I'm gonna use it.\n\n1706\n01:26:26,885 --> 01:26:32,000\nI'm gonna get into fa0/1 and\nwhat I'm gonna do is a typical\n\n1707\n01:26:32,000 --> 01:26:36,935\nrouter on a stick type topology, where\nyou've got multiple sub interfaces and\n\n1708\n01:26:36,935 --> 01:26:39,965\nso I'm not gonna assign an IP\naddress on the base interface.\n\n1709\n01:26:41,715 --> 01:26:43,905\nBut I will go in here and\n\n1710\n01:26:43,905 --> 01:26:48,200\nstart to set some on some other\nsub interfaces that I've got.\n\n1711\n01:26:48,200 --> 01:26:55,138\nNow, let's see I wanna try and\nkeep this close to following the rules,\n\n1712\n01:26:55,138 --> 01:27:00,123\nso I'm gonna put these\nin the 172.17 network\n\n1713\n01:27:02,536 --> 01:27:05,110\nAll right, and so.\n\n1714\n01:27:05,110 --> 01:27:09,450\nI'm doing the 172.17 network,\nwhich is a Class B network.\n\n1715\n01:27:09,450 --> 01:27:12,650\nIf I follow class rules,\nthat's a Class B network.\n\n1716\n01:27:12,650 --> 01:27:15,720\nBut I'm using a Class C subnet mask,\n255.255.255.0.\n\n1717\n01:27:15,720 --> 01:27:18,250\nAnd, actually,\nit's gonna gripe at me isn't it?\n\n1718\n01:27:18,250 --> 01:27:19,885\nCuz I didn't do encapsulation.\n\n1719\n01:27:19,885 --> 01:27:23,122\n>> [LAUGH]\n>> Gotta put it on a VLAN or\n\n1720\n01:27:23,122 --> 01:27:23,990\nit gets angry.\n\n1721\n01:27:27,546 --> 01:27:29,672\nAnd there we go.\n\n1722\n01:27:29,672 --> 01:27:33,500\nAll right, and then I'll just create\na few more of those sub interfaces.\n\n1723\n01:27:33,500 --> 01:27:35,490\nMaybe I'll create four altogether so\n\n1724\n01:27:39,850 --> 01:27:43,220\nbasically like a VLAN 10,\nVLAN 20 and so on.\n\n1725\n01:27:43,220 --> 01:27:45,572\nAnd I'll just put them all in a row\nbecause that'll be convenient.\n\n1726\n01:27:54,194 --> 01:27:56,423\nAnd I'll see what else do we have here.\n\n1727\n01:28:01,383 --> 01:28:04,443\nAll right, so at the end of the day,\n\n1728\n01:28:04,443 --> 01:28:10,155\nI've now got four nice new shiny\ninterfaces on four new networks,\n\n1729\n01:28:10,155 --> 01:28:14,853\n172.17.0.1, 1.1, 2.1, 3.1.\n\n1730\n01:28:14,853 --> 01:28:16,675\nFour new networks on here.\n\n1731\n01:28:16,675 --> 01:28:17,880\nAll right?\n\n1732\n01:28:17,880 --> 01:28:23,325\nAnd I want to advertise those out to\nthe other people on my network so\n\n1733\n01:28:23,325 --> 01:28:24,890\nI need to get into.\n\n1734\n01:28:24,890 --> 01:28:26,596\nEIGRP, and add that in.\n\n1735\n01:28:26,596 --> 01:28:30,657\nNow, if I just do 172.17.0.0,\nthe classful boundary,\n\n1736\n01:28:30,657 --> 01:28:33,862\nthe router's gonna assume\nthat it is a class b, and so\n\n1737\n01:28:33,862 --> 01:28:39,380\nthat'll actually get all four of those\nnetworks, so I could just leave it there.\n\n1738\n01:28:39,380 --> 01:28:41,980\nOr I could go ahead and\ndo a wild card mask.\n\n1739\n01:28:41,980 --> 01:28:43,270\nYou know, like that.\n\n1740\n01:28:43,270 --> 01:28:45,850\nOr actually I could be really,\nreally specific cuz I only need,\n\n1741\n01:28:45,850 --> 01:28:47,090\nwhat, two bits for what I did?\n\n1742\n01:28:48,400 --> 01:28:50,550\nZero, one, two, three.\n\n1743\n01:28:50,550 --> 01:28:56,390\nSo I could actually do that,\nif I wanted to be really specific,\n\n1744\n01:28:56,390 --> 01:29:01,350\nI can just get those four networks but\nI'll go big.\n\n1745\n01:29:01,350 --> 01:29:06,450\nAll right, so now those networks are being\nadvertised out into EIRGP, they're\n\n1746\n01:29:06,450 --> 01:29:11,560\nspreading across the network and within\nseconds router four should learn them.\n\n1747\n01:29:11,560 --> 01:29:14,476\nAnd if I look at my routing table,\nthere they are.\n\n1748\n01:29:14,476 --> 01:29:17,893\n172.17.0, 1, 2, and 3,\nthere's those four networks.\n\n1749\n01:29:17,893 --> 01:29:18,476\n>> Yeah.\n\n1750\n01:29:18,476 --> 01:29:21,401\nNow keep a note of this, on router four,\n\n1751\n01:29:21,401 --> 01:29:25,893\nthat we did actually get four\nextra routes actually in there.\n\n1752\n01:29:25,893 --> 01:29:29,368\nNow the problem that we have is not that\nthere's actually four extra routes in\n\n1753\n01:29:29,368 --> 01:29:32,896\nthere, but that if you and I take a look\nat it from router four, there's really\n\n1754\n01:29:32,896 --> 01:29:36,860\nonly two paths that actually go back to\nwhere all four of those networks are.\n\n1755\n01:29:36,860 --> 01:29:41,060\nSo what would be better is if we could\nactually make this routing table smaller\n\n1756\n01:29:41,060 --> 01:29:44,830\nby being able to actually\ntake those 172.17s here.\n\n1757\n01:29:44,830 --> 01:29:48,413\nIn a sense we summarize them as maybe\na single route that may actually be\n\n1758\n01:29:48,413 --> 01:29:51,893\nable to get us one path all the way\nback to all four of those networks.\n\n1759\n01:29:51,893 --> 01:29:53,435\n>> Yeah.\n\n1760\n01:29:53,435 --> 01:29:55,870\nAll four of these go to\nthe exact same place.\n\n1761\n01:29:55,870 --> 01:29:58,435\nSee how every one of\nthem goes to 10.10.1.3.\n\n1762\n01:29:58,435 --> 01:29:59,680\nThat's the path we're gonna follow.\n\n1763\n01:29:59,680 --> 01:30:01,860\nOut our FA0/0 interface.\n\n1764\n01:30:01,860 --> 01:30:05,090\nSo because this routes are all nice and\nin a row, right?\n\n1765\n01:30:05,090 --> 01:30:07,560\nThey're called contiguous address spaces.\n\n1766\n01:30:07,560 --> 01:30:09,270\nBecause they're all in a row,\n\n1767\n01:30:09,270 --> 01:30:14,410\nthat means I really should be able to\ncollapse these into a single route.\n\n1768\n01:30:14,410 --> 01:30:18,160\nAnd in OSPF,\nyou can manually do that between areas.\n\n1769\n01:30:18,160 --> 01:30:22,230\nIn EIGRP,\nwe can let the protocol do it for us.\n\n1770\n01:30:22,230 --> 01:30:27,479\nNow here's the problem, EIGRP does\nthis summarization, it's called auto\n\n1771\n01:30:27,479 --> 01:30:33,230\nsummarization, and it does it based on\nwhen we cross major class full boundaries.\n\n1772\n01:30:33,230 --> 01:30:33,770\nAll right?\n\n1773\n01:30:33,770 --> 01:30:38,160\nSo, if I go back to our diagram,\nI now have, if we\n\n1774\n01:30:40,320 --> 01:30:45,313\nget into this, I now have all those\nnetworks kind of hanging off of router 1.\n\n1775\n01:30:45,313 --> 01:30:52,870\nOkay, well over here\nthey are 172.17.whatever.\n\n1776\n01:30:52,870 --> 01:30:58,920\nBut this network here is\nthe 192.168.1.0 network, right?\n\n1777\n01:30:58,920 --> 01:31:04,740\nSo, when we cross through that router\nfrom the 172.17 to the 192.168,\n\n1778\n01:31:04,740 --> 01:31:07,660\nwe've crossed a major boundary.\n\n1779\n01:31:07,660 --> 01:31:11,906\nWe've crossed between two networks, and\nauto summarization will tell the EIGRP,\n\n1780\n01:31:11,906 --> 01:31:15,393\nhey if you can make the route smaller,\ngo ahead and do it, all right?\n\n1781\n01:31:15,393 --> 01:31:19,620\nBut when it does it, it's gonna\nsummarize it to the classable boundary.\n\n1782\n01:31:19,620 --> 01:31:23,080\nIn other words, it's gonna look at 172.17\nand it's gonna say, you know what?\n\n1783\n01:31:23,080 --> 01:31:24,320\nThat's a class B.\n\n1784\n01:31:24,320 --> 01:31:26,520\nSo why don't I just go ahead and\nsummarize that and\n\n1785\n01:31:26,520 --> 01:31:30,440\nmake it one big class B and\nadvertise it out there, all right?\n\n1786\n01:31:30,440 --> 01:31:34,600\nAnd that's fine if I'm following the rules\nand everything works out just right.\n\n1787\n01:31:34,600 --> 01:31:38,810\nBut if I'm breaking rules, then it's\ngonna you know create some problems.\n\n1788\n01:31:38,810 --> 01:31:40,450\nAll right, so let's see this in action.\n\n1789\n01:31:41,720 --> 01:31:46,340\nI'm gonna jump over here to router one,\nand\n\n1790\n01:31:46,340 --> 01:31:53,770\nall I really have to do is go into\nEIGRP and say, auto-summary, right?\n\n1791\n01:31:53,770 --> 01:31:56,400\nThat turns on auto summarization.\n\n1792\n01:31:56,400 --> 01:32:00,520\nNow, when that happens, see how it\nreset all of my neighbor relationships?\n\n1793\n01:32:00,520 --> 01:32:02,260\nAnd that's because my\nroutes are gonna change.\n\n1794\n01:32:02,260 --> 01:32:04,550\nSo, it wants to remove the old routes and\nput new routes in.\n\n1795\n01:32:04,550 --> 01:32:06,140\nIt does that by resetting the link.\n\n1796\n01:32:07,270 --> 01:32:10,130\nNow if you're doing auto summarization\nit's a good idea to turn it on on\n\n1797\n01:32:10,130 --> 01:32:11,250\nall of your devices.\n\n1798\n01:32:11,250 --> 01:32:13,500\nThey all make the same decisions.\n\n1799\n01:32:13,500 --> 01:32:16,690\nOn older iOS,\ncuz it's turned on by default,\n\n1800\n01:32:16,690 --> 01:32:19,870\na newer iOS is like what's on the exam,\nit's off by default, so\n\n1801\n01:32:19,870 --> 01:32:23,390\nwe need to remember that\nthe behavior can be different.\n\n1802\n01:32:23,390 --> 01:32:27,518\nIf you wanna turn it off,\nyou would say no auto-summary, like that.\n\n1803\n01:32:27,518 --> 01:32:32,770\nAll right, so I'm just gonna jump\nthrough to each one of these guys and\n\n1804\n01:32:32,770 --> 01:32:37,060\njust set that, so\nthat they're all doing auto summary.\n\n1805\n01:32:44,185 --> 01:32:46,610\nAll right, just one more and\nwe'll be there.\n\n1806\n01:32:50,425 --> 01:32:53,850\nAll right, we'll give that just a second,\nit's gotta reconverge, you know because we\n\n1807\n01:32:53,850 --> 01:32:57,210\ndumped all our neighbor adjacencies so\nthey've gotta rebuild up and interchange.\n\n1808\n01:32:57,210 --> 01:33:02,894\nBut it happens very quick, and\nso it should already be done.\n\n1809\n01:33:02,894 --> 01:33:09,810\nAll right, now when I do a show IP route,\ninstead of seeing 172.17.0.\n\n1810\n01:33:09,810 --> 01:33:11,920\nWhatever, 1, 2, 3.\n\n1811\n01:33:11,920 --> 01:33:14,445\nWhatever.\nInstead of seeing those four networks,\n\n1812\n01:33:14,445 --> 01:33:15,268\nI just see one.\n\n1813\n01:33:15,268 --> 01:33:21,285\n172.17.0./16, there it is,\nthat's the network.\n\n1814\n01:33:21,285 --> 01:33:25,810\nIf I wanna get to that network\nI can by going to 10.10.1.3.\n\n1815\n01:33:25,810 --> 01:33:26,643\n>> Yeah.\n\n1816\n01:33:26,643 --> 01:33:30,665\nNow even though this auto summary,\nyou go wow that's the best thing ever.\n\n1817\n01:33:30,665 --> 01:33:33,780\nWe essentially took four different\nroutes and summarized them into one.\n\n1818\n01:33:33,780 --> 01:33:37,500\nThis should make a routing table really,\nreally small and it does.\n\n1819\n01:33:37,500 --> 01:33:39,340\nAs we see right here.\n\n1820\n01:33:39,340 --> 01:33:43,670\nBut what happens though,\nwhat if actually by doing this,\n\n1821\n01:33:43,670 --> 01:33:47,210\nDon actually included it in more\nthan he actually needed to.\n\n1822\n01:33:47,210 --> 01:33:52,227\nSo just like what he is talking\nabout here, what if on router two,\n\n1823\n01:33:52,227 --> 01:33:56,350\nwe actually had the 172 17.4, 5, 6, etc.\n\n1824\n01:33:56,350 --> 01:33:57,350\n>> Yeah.\n\n1825\n01:33:57,350 --> 01:33:59,500\n>> And now, all of a sudden,\nthis all summarizes.\n\n1826\n01:33:59,500 --> 01:34:02,060\nIt's all going to one figure location,\nokay?\n\n1827\n01:34:02,060 --> 01:34:03,490\nThat's where we actually have problems and\n\n1828\n01:34:03,490 --> 01:34:06,577\nthat's where that no autodash\nsummary really helps us.\n\n1829\n01:34:06,577 --> 01:34:08,060\n>> Yeah, so.\n\n1830\n01:34:08,060 --> 01:34:13,537\nJust illustrating what Ronnie was saying,\nif we've got right off of this one router.\n\n1831\n01:34:13,537 --> 01:34:16,476\nOkay.\nRight off of this one,we\n\n1832\n01:34:16,476 --> 01:34:20,121\nhad 172.17.0.1/24,\n\n1833\n01:34:20,121 --> 01:34:24,476\n172.17.1.1/24, and so on.\n\n1834\n01:34:24,476 --> 01:34:26,476\nRight?\nWe had the four that were in there.\n\n1835\n01:34:29,351 --> 01:34:36,685\nSo these guys got summarized, which is\ngood, but they got summarized to a /16.\n\n1836\n01:34:36,685 --> 01:34:40,039\nSo even though I've only got zero,\none, two, and\n\n1837\n01:34:40,039 --> 01:34:44,270\nthree over there,\nthat /16 means I also have 172.17.\n\n1838\n01:34:44,270 --> 01:34:47,240\n4 and 5 and 6, all the way up to 255.\n\n1839\n01:34:47,240 --> 01:34:51,101\n172.17.255 would be shown as over here.\n\n1840\n01:34:51,101 --> 01:34:53,890\nIf I don't use those IPs anywhere\nelse on the network I'm fine.\n\n1841\n01:34:53,890 --> 01:34:55,480\nIt'd work great, right?\n\n1842\n01:34:55,480 --> 01:34:58,726\nBut if I have another network,\nRonnie mentioned.\n\n1843\n01:34:58,726 --> 01:34:59,726\n>> Yeah, either one.\n\n1844\n01:34:59,726 --> 01:35:03,681\n[LAUGH]\n>> You know, so\n\n1845\n01:35:03,681 --> 01:35:09,399\nif I have up here 172.17.4.1/24 and\n\n1846\n01:35:09,399 --> 01:35:12,676\n172.17.5/24.\n\n1847\n01:35:12,676 --> 01:35:13,893\nThose are up here.\n\n1848\n01:35:13,893 --> 01:35:15,030\nOkay?\n\n1849\n01:35:15,030 --> 01:35:19,620\nWell when it's summarized,\nit said the 172.17 network,\n\n1850\n01:35:19,620 --> 01:35:22,940\nthat whole class B,\nwas the other direction.\n\n1851\n01:35:22,940 --> 01:35:26,430\nAnd so they overlap and\nthey're both kind of lying.\n\n1852\n01:35:26,430 --> 01:35:29,080\nThey're lying saying they have more\nnetworks than they actually do.\n\n1853\n01:35:29,080 --> 01:35:32,500\nAnd that's where automatic\nsummarization causes problems.\n\n1854\n01:35:32,500 --> 01:35:35,980\nSo if you wanna use Auto Summary,\nyou've gotta have a well designed network.\n\n1855\n01:35:35,980 --> 01:35:39,190\nA well-designed network,\nwould follow the rules closely, and\n\n1856\n01:35:39,190 --> 01:35:40,730\nit works out really well.\n\n1857\n01:35:40,730 --> 01:35:44,460\nBut in a discontiguous network, in\na network where everything's kinda broken\n\n1858\n01:35:44,460 --> 01:35:47,420\napart like this,\nauto summary causes problems.\n\n1859\n01:35:47,420 --> 01:35:50,000\nAnd that's why it's turned off by default.\n\n1860\n01:35:50,000 --> 01:35:54,270\nMost people's networks aren't big\nenough to need to auto summarization.\n\n1861\n01:35:54,270 --> 01:35:57,360\nAnd so, they turn it off by default and\nyou don't have to worry about it.\n\n1862\n01:35:57,360 --> 01:36:00,250\nYou can turn it on,\nif your network is designed right?\n\n1863\n01:36:00,250 --> 01:36:00,810\nAll right.\n\n1864\n01:36:00,810 --> 01:36:03,992\nNow, just because auto summarization\ndoesn't work in every scenario,\n\n1865\n01:36:03,992 --> 01:36:06,540\ndoesn't mean you can't\ndo summarization at all.\n\n1866\n01:36:06,540 --> 01:36:09,680\nYou can do manual summarization in EIGRP.\n\n1867\n01:36:09,680 --> 01:36:13,720\nIt's not on the CCNA exam, you really get\ninto that when you do the CCNP stuff.\n\n1868\n01:36:13,720 --> 01:36:16,240\nSo we'll revisit that when\nwe do the CCNP shows.\n\n1869\n01:36:16,240 --> 01:36:17,510\nBut right now,\n\n1870\n01:36:17,510 --> 01:36:21,310\njust know that auto summarization works\ngreat when your network is designed right.\n\n1871\n01:36:21,310 --> 01:36:24,130\nLet me show you an example of\na network that's designed right.\n\n1872\n01:36:24,130 --> 01:36:27,421\nIf I go back to router one and\n\n1873\n01:36:27,421 --> 01:36:32,009\nI'm gonna add a few more interfaces.\n\n1874\n01:36:32,009 --> 01:36:34,173\nWhat networks do I have?\n\n1875\n01:36:34,173 --> 01:36:37,310\nOops.\n\n1876\n01:36:37,310 --> 01:36:38,970\nLet's see.\n\n1877\n01:36:38,970 --> 01:36:42,926\nAll right, so we're not using 1921680\nanywhere, so let's use that one.\n\n1878\n01:36:42,926 --> 01:36:43,552\nSo.\n\n1879\n01:36:51,991 --> 01:36:56,032\nSo let's say we've got\nthe 192.168.0.0 class C.\n\n1880\n01:36:56,032 --> 01:36:58,300\nOkay, so I've got that class C.\n\n1881\n01:36:58,300 --> 01:37:03,220\nAnd so maybe I've got, you know,\nan IP on this interface set up for it, but\n\n1882\n01:37:03,220 --> 01:37:07,678\nI'm doing a 255.255.255.128, okay.\n\n1883\n01:37:07,678 --> 01:37:13,531\nI'm dividing this network in half,\nso there's one interface.\n\n1884\n01:37:17,907 --> 01:37:19,787\nAnd then this'll be the other half of it.\n\n1885\n01:37:22,992 --> 01:37:23,688\nThere we go.\n\n1886\n01:37:33,953 --> 01:37:34,671\nOkay.\n\n1887\n01:37:34,671 --> 01:37:39,071\nSo I've got 192.168.0.1,\nand 192 2.168.0.129.\n\n1888\n01:37:39,071 --> 01:37:42,370\nI broke that network in half,\ntwo pieces, okay.\n\n1889\n01:37:42,370 --> 01:37:46,390\nWell, it's gonna summarize that\ninto just 192.168.0.0/24 and\n\n1890\n01:37:46,390 --> 01:37:51,160\nsince both pieces are here,\nthe whole network is present,\n\n1891\n01:37:51,160 --> 01:37:54,560\nthat /24 is gonna be fine.\n\n1892\n01:37:54,560 --> 01:37:56,820\nIt's not gonna cause any problems.\n\n1893\n01:37:56,820 --> 01:38:00,450\nIf I jump over to router four and\n\n1894\n01:38:00,450 --> 01:38:04,850\nI do a show IP route,\nI've got 192.168.0.0/24.\n\n1895\n01:38:04,850 --> 01:38:08,460\nNo issues there, everything that\nI need is present right here.\n\n1896\n01:38:08,460 --> 01:38:09,290\n>> There you go.\n\n1897\n01:38:09,290 --> 01:38:15,630\n>> But 172.17.0.0, this one's coming\nin as a /16, and that's my problem.\n\n1898\n01:38:15,630 --> 01:38:17,230\nIt's bigger than it should be.\n\n1899\n01:38:17,230 --> 01:38:20,820\nIt's got way more networks in it, and\nthat's an issue with auto summary.\n\n1900\n01:38:20,820 --> 01:38:26,550\nIf I go to router two,\nand I'll just create\n\n1901\n01:38:26,550 --> 01:38:30,740\na loopback on this one, and\nI'll add in a 172.17.254.1, right?\n\n1902\n01:38:30,740 --> 01:38:34,820\nI'll just go way up to\nthe top of this thing.\n\n1903\n01:38:34,820 --> 01:38:35,681\nAll right.\n\n1904\n01:38:35,681 --> 01:38:37,061\nAnd.\n\n1905\n01:38:38,780 --> 01:38:40,045\nLet me advertise it in here.\n\n1906\n01:38:46,375 --> 01:38:47,285\nAll right.\n\n1907\n01:38:47,285 --> 01:38:49,285\nSo I'm just gonna advertise that in here.\n\n1908\n01:38:49,285 --> 01:38:55,385\nSo router two is now advertising out\nthis 172.17 dot whatever network.\n\n1909\n01:38:55,385 --> 01:38:57,695\nSo when I look in its routing table.\n\n1910\n01:38:58,770 --> 01:39:01,110\nAnd this might take a minute to converge.\n\n1911\n01:39:01,110 --> 01:39:04,150\nHere's the summary that I'm learning.\n\n1912\n01:39:04,150 --> 01:39:06,790\nSee how it's called out right there,\nthat it is a summary?\n\n1913\n01:39:06,790 --> 01:39:10,150\nSo there's the 172.17.0.0 summary and\n\n1914\n01:39:10,150 --> 01:39:13,500\nthen here's the 172.17.254\nI'm directly connected to.\n\n1915\n01:39:14,610 --> 01:39:17,900\nNow router two is gonna start\nadvertising that to router four and\n\n1916\n01:39:17,900 --> 01:39:20,790\nrouter four is gonna get\na little bit confused.\n\n1917\n01:39:20,790 --> 01:39:24,651\nBecause it's gonna see\njust this one big entry,\n\n1918\n01:39:24,651 --> 01:39:30,223\n172.17.00, and\nright now it's via 10.10.1.3.\n\n1919\n01:39:30,223 --> 01:39:30,945\nWhich router is that?\n\n1920\n01:39:30,945 --> 01:39:31,650\n>> Router three.\n\n1921\n01:39:31,650 --> 01:39:33,892\n>> All right, and if we look at\nrouter three, let's see what it sees.\n\n1922\n01:39:38,768 --> 01:39:43,320\nAll right,\nit just has a single route to router one.\n\n1923\n01:39:43,320 --> 01:39:49,710\nIt does not have a route for\n172.17.254 to be able to go to router two.\n\n1924\n01:39:49,710 --> 01:39:51,125\nIt doesn't know how to get there.\n\n1925\n01:39:51,125 --> 01:39:53,270\nIt's gonna go the wrong way.\n\n1926\n01:39:53,270 --> 01:39:55,610\nAnd it's auto summary that's\ncausing that problem.\n\n1927\n01:39:55,610 --> 01:39:58,920\nThe summarization is gathering\nmore networks than it should.\n\n1928\n01:39:58,920 --> 01:40:00,580\nAnd collapsing them together.\n\n1929\n01:40:00,580 --> 01:40:03,990\nSo in a discontiguous network,\nin a network where your subnets are broken\n\n1930\n01:40:03,990 --> 01:40:08,500\napart on multiple routers,\nauto summary causes problems, all right?\n\n1931\n01:40:08,500 --> 01:40:12,930\nBut on a well designed network,\nwhere your networks are lined up and\n\n1932\n01:40:12,930 --> 01:40:16,690\nin order, auto summary works great and\nit's a wonderful tool to use.\n\n1933\n01:40:16,690 --> 01:40:17,780\n>> Yeah.\n\n1934\n01:40:17,780 --> 01:40:18,380\n>> All right.\n\n1935\n01:40:18,380 --> 01:40:21,610\nSo just be aware that the primary\npoint of auto-summarization\n\n1936\n01:40:21,610 --> 01:40:26,150\nis just to make your routing table\nsmaller and it can really help out a lot.\n\n1937\n01:40:26,150 --> 01:40:30,990\nI worked for a company where we had 90\nbranches spread across four states and\n\n1938\n01:40:30,990 --> 01:40:33,320\nevery branch had four networks, all right?\n\n1939\n01:40:33,320 --> 01:40:36,792\nSo at 90 branches, you multiply that by\nfour networks and you have, what is that?\n\n1940\n01:40:36,792 --> 01:40:39,692\n380, 360\n>> I think it's 360.\n\n1941\n01:40:39,692 --> 01:40:41,380\n>> networks.\n\n1942\n01:40:41,380 --> 01:40:42,840\nAll right.\nSo, the routing table would just be\n\n1943\n01:40:42,840 --> 01:40:44,350\nright off the bat,\njust be 360 routes long.\n\n1944\n01:40:44,350 --> 01:40:48,970\nAll right, but we summarize those\nfour networks at each office,\n\n1945\n01:40:48,970 --> 01:40:51,040\nso that it would be one\nroute coming out of them.\n\n1946\n01:40:51,040 --> 01:40:53,450\nSo, the routing table went from\n360 routes, down to 90 routes.\n\n1947\n01:40:53,450 --> 01:40:54,651\nRight?\n\n1948\n01:40:54,651 --> 01:40:56,197\nAnd I know I talked about\nthis in another show.\n\n1949\n01:40:56,197 --> 01:41:00,012\nWe actually had redundant links and stuff,\nso really, you had four networks and\n\n1950\n01:41:00,012 --> 01:41:02,983\nfour paths in and out of the branches,\nso it was really like 16\n\n1951\n01:41:02,983 --> 01:41:06,430\nnetworks at each branch, which meant\nour routing table was really big.\n\n1952\n01:41:06,430 --> 01:41:08,880\nIt was over a thousand\nroutes until we summarized,\n\n1953\n01:41:08,880 --> 01:41:10,580\nand then it was down to\njust a few hundred routes.\n\n1954\n01:41:10,580 --> 01:41:11,490\n>> Nice.\n>> So\n\n1955\n01:41:11,490 --> 01:41:13,640\nthat's the difference you\ncan make with auto summary.\n\n1956\n01:41:13,640 --> 01:41:14,230\n>> Yeah.\n>> It's very powerful.\n\n1957\n01:41:16,192 --> 01:41:18,840\nAll right, but be aware on the exam,\nyou're more than\n\n1958\n01:41:18,840 --> 01:41:21,790\nlikely gonna see auto summary from\nthe standpoint of causing problems.\n\n1959\n01:41:21,790 --> 01:41:22,630\n>> Yep.\n>> You know,\n\n1960\n01:41:22,630 --> 01:41:26,280\nthere's networks that aren't being learned\nright or some traffic gets through and\n\n1961\n01:41:26,280 --> 01:41:28,510\nsome traffic doesn't,\nwhere's the bottleneck?\n\n1962\n01:41:28,510 --> 01:41:29,290\nWhere's the hold-up?\n\n1963\n01:41:29,290 --> 01:41:30,080\nWhatever.\n\n1964\n01:41:30,080 --> 01:41:31,920\nAnd if you just whip through and\n\n1965\n01:41:31,920 --> 01:41:35,220\ndo some no auto summary on\neach of your routers, right.\n\n1966\n01:41:35,220 --> 01:41:39,420\nIf you turn that off,\nit solves the problem.\n\n1967\n01:41:39,420 --> 01:41:41,770\nYou know, no auto summary.\n\n1968\n01:41:41,770 --> 01:41:44,590\nAnd you really just have to do it on\nthe routers that are actually doing\n\n1969\n01:41:44,590 --> 01:41:46,090\nthe summarization.\n\n1970\n01:41:46,090 --> 01:41:48,900\nBut if we turn it off.\n\n1971\n01:41:48,900 --> 01:41:52,851\nThen just the unsummarized\nroutes get advertised out and\n\n1972\n01:41:52,851 --> 01:41:55,406\neverything kinda cleans itself up.\n\n1973\n01:41:58,726 --> 01:42:00,710\nSo I'm just gonna go through and\nturn all that off.\n\n1974\n01:42:07,188 --> 01:42:10,810\nAll right, and it was router three\nwho's our problem child a minute ago.\n\n1975\n01:42:10,810 --> 01:42:13,370\nAnd so now if I do a show IP route.\n\n1976\n01:42:13,370 --> 01:42:17,790\nI can see not only does it have routes for\nall the individual 172.17 that are on\n\n1977\n01:42:17,790 --> 01:42:22,670\nrouter one, but it also has a route for\nthe route that is on router two.\n\n1978\n01:42:22,670 --> 01:42:25,870\nSo now it knows how to get that routing\ntable's bigger to much bigger and\n\n1979\n01:42:25,870 --> 01:42:29,344\nI had to use the more prompt,\nbut it is at least accurate.\n\n1980\n01:42:31,350 --> 01:42:33,720\nSo, all right, so that is auto-summary.\n\n1981\n01:42:33,720 --> 01:42:35,210\nIt's a very useful thing, and\n\n1982\n01:42:35,210 --> 01:42:39,880\nit does help to make sure that we kinda\ncontrol the size of our routing table.\n\n1983\n01:42:41,360 --> 01:42:43,420\n>> Yep.\nNow, EIGRP unto itself in terms of routing\n\n1984\n01:42:43,420 --> 01:42:47,810\nprotocol, it also sends messages out\nto try and keep thing, you know,\n\n1985\n01:42:47,810 --> 01:42:51,270\nessentially keep lives, so\nit knows who it's talking to.\n\n1986\n01:42:51,270 --> 01:42:55,650\nThere's sometimes where we don't really\nneed that actually going through, because\n\n1987\n01:42:55,650 --> 01:42:59,720\nit may be that, even though you're running\nEIGRP on everything in your network,\n\n1988\n01:42:59,720 --> 01:43:05,180\nit still also advertises EIGRP out\nof interfaces it doesn't need to.\n\n1989\n01:43:05,180 --> 01:43:08,250\nSo I wanna talk about the idea\nof passive interfaces now.\n\n1990\n01:43:08,250 --> 01:43:10,020\n>> Yeah,\nlet's take a look at our drawing again.\n\n1991\n01:43:10,020 --> 01:43:15,270\nSo, a minute ago,\nI added in, what was that?\n\n1992\n01:43:15,270 --> 01:43:16,992\nI guess /25 network, right?\n\n1993\n01:43:16,992 --> 01:43:18,166\n>> Yeah.\n\n1994\n01:43:18,166 --> 01:43:21,707\n>> You know, let me,\nnow I've really done it, right?\n\n1995\n01:43:21,707 --> 01:43:26,962\n>> [LAUGH]\n>> So we created 192.168.0.0/25 and\n\n1996\n01:43:26,962 --> 01:43:31,270\n192.168.0.128/25.\n\n1997\n01:43:31,270 --> 01:43:34,670\nSo those were the two networks\nthat I created a minute ago on\n\n1998\n01:43:34,670 --> 01:43:35,230\nsome\n>> Yeah\n\n1999\n01:43:35,230 --> 01:43:36,530\n>> Some interface, right?\n\n2000\n01:43:36,530 --> 01:43:39,990\nWell, those networks,\nI wanted to advertise them in EIGRP.\n\n2001\n01:43:39,990 --> 01:43:43,293\nSo I said, network 192.168.0.0.\n\n2002\n01:43:43,293 --> 01:43:45,382\nAnd that advertises me, EIGRP.\n\n2003\n01:43:45,382 --> 01:43:48,130\nWhat it actually does is\ntell your router two things.\n\n2004\n01:43:48,130 --> 01:43:52,730\nIt says, one, advertise out that\nthat network exists, right?\n\n2005\n01:43:52,730 --> 01:43:54,770\nSo tell everybody else about it.\n\n2006\n01:43:54,770 --> 01:43:58,500\nAnd two, listen on that interface for\nupdates from other routers.\n\n2007\n01:43:58,500 --> 01:44:02,500\nThere might be other routers on that\ninterface we wanna listen in and learn.\n\n2008\n01:44:02,500 --> 01:44:04,880\nBut sometimes you don't want that,\nall right?\n\n2009\n01:44:04,880 --> 01:44:08,650\nSometimes, you want to advertise\nthat a network exists, but\n\n2010\n01:44:08,650 --> 01:44:11,632\nyou don't want to listen out for\nother routers.\n\n2011\n01:44:11,632 --> 01:44:16,015\nSo for example, if I know that these\nnetworks right here are a classroom or\n\n2012\n01:44:16,015 --> 01:44:17,995\noffices or something like that,\n\n2013\n01:44:17,995 --> 01:44:21,049\nwhere there aren't going\nto be any other routers.\n\n2014\n01:44:21,049 --> 01:44:25,554\nIf I listen for router updates, An\nattacker can bring up a rogue router and\n\n2015\n01:44:25,554 --> 01:44:28,971\nstart pushing bad routes to\nredirect traffic to them and\n\n2016\n01:44:28,971 --> 01:44:30,950\nthey can start to capture data.\n\n2017\n01:44:30,950 --> 01:44:32,770\n>> Right.\n>> It's a real problem.\n\n2018\n01:44:32,770 --> 01:44:37,450\nSo what I might want to do is tell EIGRP,\nhey, don't listen on this interface.\n\n2019\n01:44:37,450 --> 01:44:38,630\nDon't listen for other routers.\n\n2020\n01:44:38,630 --> 01:44:41,900\nDon't take advice from other\nrouters on this interface.\n\n2021\n01:44:41,900 --> 01:44:44,550\nBut tell the rest of the network.\n\n2022\n01:44:44,550 --> 01:44:48,810\nSo we go and\nsend updates to everybody else, right?\n\n2023\n01:44:48,810 --> 01:44:49,630\nSo go ahead and\n\n2024\n01:44:49,630 --> 01:44:54,020\nsend the updates, but don't allow\nsomebody to be able to connect.\n\n2025\n01:44:54,020 --> 01:44:59,060\nSo we will not send updates,\nnor will we receive updates.\n\n2026\n01:44:59,060 --> 01:45:00,810\nIt's on that interface.\n\n2027\n01:45:00,810 --> 01:45:04,950\nReally all we're doing is advertising\nthat that network exists in the IGRP.\n\n2028\n01:45:06,170 --> 01:45:08,880\nThis function is what we\ncall a passive interface.\n\n2029\n01:45:08,880 --> 01:45:12,300\nNow a passive interface is one that we\nadvertise that we have the network,\n\n2030\n01:45:12,300 --> 01:45:14,050\nwe tell other people about the network But\n\n2031\n01:45:14,050 --> 01:45:17,210\nwe don't actually communicate\nwith EIGRP on that interface.\n\n2032\n01:45:17,210 --> 01:45:18,770\nSo we won't build any adjacencies.\n\n2033\n01:45:20,100 --> 01:45:22,130\n>> Yep.\n>> I normally do this on interfaces that\n\n2034\n01:45:22,130 --> 01:45:25,990\nI know are pointing to networks that\ndon't have any other routers, and\n\n2035\n01:45:25,990 --> 01:45:29,200\non my interfaces that point towards\nInternet Service Providers, ISPs.\n\n2036\n01:45:29,200 --> 01:45:32,660\nI wanna advertise my ISP\nconnection inside the network.\n\n2037\n01:45:32,660 --> 01:45:35,040\nBut I don't want to advertise to the ISP.\n\n2038\n01:45:35,040 --> 01:45:35,860\n>> No!\n>> They don't need to be\n\n2039\n01:45:35,860 --> 01:45:38,040\ninvolved in my network.\n\n2040\n01:45:38,040 --> 01:45:41,660\nFortunately passive interfaces are really\neasy to use, it's the same as in OSPF.\n\n2041\n01:45:41,660 --> 01:45:42,960\nIt's not really much different.\n\n2042\n01:45:44,890 --> 01:45:50,212\nSo taking router one,\nwhat, or is that 0.200.\n\n2043\n01:45:50,212 --> 01:45:50,967\nAll right.\n\n2044\n01:45:50,967 --> 01:45:52,850\nSo Fa0/1.200 and 201.\n\n2045\n01:45:52,850 --> 01:45:56,730\nSo let's say those two networks,\nI know there's no other routers out there.\n\n2046\n01:45:56,730 --> 01:45:58,650\nOr, I know there's an ISP out there,\nsomething like that, so\n\n2047\n01:45:58,650 --> 01:46:00,450\nI don't wanna communicate.\n\n2048\n01:46:00,450 --> 01:46:05,530\nSo what we do is we say, router EIGRP\none and then passive-interface and\n\n2049\n01:46:05,530 --> 01:46:09,210\nthe name of the interface\nwe want to do filtering on.\n\n2050\n01:46:09,210 --> 01:46:16,342\nSo I'm gonna say, Fa0/1.200 and Fa0/1.201.\n\n2051\n01:46:16,342 --> 01:46:20,571\nI'll still advertise that those networks\nexist, so the other routers can learn it,\n\n2052\n01:46:20,571 --> 01:46:23,858\nbut I am no longer listening on this\ninterface for other routers and\n\n2053\n01:46:23,858 --> 01:46:26,340\nI'm not sending out hello messages and\nall that.\n\n2054\n01:46:27,390 --> 01:46:29,710\nAnd we can see that with\nthe show IP protocol.\n\n2055\n01:46:32,230 --> 01:46:36,150\nAnd when I look in show IP protocol,\nI can see here information and\n\n2056\n01:46:36,150 --> 01:46:38,440\nit shows here's the networks\nI'm routing for and\n\n2057\n01:46:38,440 --> 01:46:43,160\nsee how I'm routing for that 192.168.0.0\nnetwork, but passive interfaces.\n\n2058\n01:46:43,160 --> 01:46:44,820\nThose are flagged as passive.\n\n2059\n01:46:44,820 --> 01:46:46,820\nI'm not building adjacencies on that one.\n\n2060\n01:46:47,860 --> 01:46:51,290\n>> Now, in terms of what you might also\nmay end up seeing, especially on the exam.\n\n2061\n01:46:51,290 --> 01:46:53,960\nYou may again get a couple of\ndifferent routers and say,\n\n2062\n01:46:53,960 --> 01:46:56,550\nhey look,\nyou're supposed to be learning this.\n\n2063\n01:46:56,550 --> 01:46:57,840\nBut it's not happening.\n\n2064\n01:46:57,840 --> 01:47:01,530\nWell, doing the show IP protocols might\nactually give you a clue that, hey,\n\n2065\n01:47:01,530 --> 01:47:05,770\nthis interface, somebody said it's passive\nand for us to just simply remove that,\n\n2066\n01:47:05,770 --> 01:47:09,370\nwe type in a no in front of the passive\ninterface, and it's a port number.\n\n2067\n01:47:09,370 --> 01:47:10,470\nAnd then you're ready to go.\n\n2068\n01:47:10,470 --> 01:47:11,170\nYeah.\n\n2069\n01:47:11,170 --> 01:47:16,270\n>> Another useful command that I like is,\nyou can do show running-config and\n\n2070\n01:47:16,270 --> 01:47:17,980\npipe it into the section command.\n\n2071\n01:47:17,980 --> 01:47:21,220\nAnd you can say,\nshow me the EIGRP section.\n\n2072\n01:47:21,220 --> 01:47:23,620\nAnd so here it gives me,\nrouter EIGRP one and\n\n2073\n01:47:23,620 --> 01:47:26,790\nI can quickly spot those passive\ninterface notes right there.\n\n2074\n01:47:26,790 --> 01:47:29,315\nSo, that is another way to,\nkind of, spot those.\n\n2075\n01:47:29,315 --> 01:47:32,470\nShow IP Protocol is a little better\ncuz you get more information.\n\n2076\n01:47:32,470 --> 01:47:35,830\nAnd sometimes the EIGRP configuration\ncan be on the interface and\n\n2077\n01:47:35,830 --> 01:47:39,500\nnot in the router config, so,\nsometimes you can miss things that way.\n\n2078\n01:47:39,500 --> 01:47:42,500\nShow IP protocols gets it all.\n\n2079\n01:47:42,500 --> 01:47:46,120\nI can verify that the 192.168.0\nnetwork is still showing up out there.\n\n2080\n01:47:46,120 --> 01:47:52,658\nIf I look at the routing table on router\nfour, there's that 192.168.0.0 network.\n\n2081\n01:47:52,658 --> 01:47:55,843\nIt shows that they're /25s, cuz I'm\nnot doing auto summary anymore, but\n\n2082\n01:47:55,843 --> 01:47:57,190\nthere they are.\n\n2083\n01:47:57,190 --> 01:47:58,870\nSo even though the interface is passive,\n\n2084\n01:47:58,870 --> 01:48:01,830\nother people still learn about it,\nbut I don't have to worry about\n\n2085\n01:48:01,830 --> 01:48:04,180\nsomebody bringing a router\nup on one of those networks.\n\n2086\n01:48:04,180 --> 01:48:05,420\nAll right.\n\n2087\n01:48:05,420 --> 01:48:06,170\n>> Really good.\n\n2088\n01:48:06,170 --> 01:48:07,500\n>> Yeah.\n\n2089\n01:48:07,500 --> 01:48:10,210\nAll right, so\nhopefully what you saw there is that,\n\n2090\n01:48:10,210 --> 01:48:14,750\nas far as the configuration goes,\nEIGRP is very similar to OSPF.\n\n2091\n01:48:14,750 --> 01:48:15,450\nAll right, but\n\n2092\n01:48:15,450 --> 01:48:18,870\nthere is a lot more functionality,\na lot more features built into it.\n\n2093\n01:48:18,870 --> 01:48:22,330\nAnd it just makes better decisions as far\nas how the network needs to be laid out.\n\n2094\n01:48:22,330 --> 01:48:24,050\nSo it's a great protocol.\n\n2095\n01:48:24,050 --> 01:48:25,910\nProbably not one you're gonna\nuse in production very much.\n\n2096\n01:48:25,910 --> 01:48:28,510\nBut maybe, maybe you'll go work\nin an all Cisco environment.\n\n2097\n01:48:28,510 --> 01:48:30,180\nAnd you'll be able to use the EIGRP.\n\n2098\n01:48:30,180 --> 01:48:31,430\nAnd you'll be one of the lucky ones.\n\n2099\n01:48:31,430 --> 01:48:32,210\n>> Yeah.\n\n2100\n01:48:32,210 --> 01:48:34,590\nThe key here to being successful on this,\nas well for\n\n2101\n01:48:34,590 --> 01:48:36,770\nthe exam, is do those show commands.\n\n2102\n01:48:36,770 --> 01:48:42,410\nThe show IP protocols, the EIGRP topology,\nthe neighbors, the route,\n\n2103\n01:48:42,410 --> 01:48:47,360\nyou know, all of those are actually key\nthings that you actually have to be able\n\n2104\n01:48:47,360 --> 01:48:51,480\nto do to verify the EIGRP is functioning\nthe way that you expect it to do.\n\n2105\n01:48:51,480 --> 01:48:55,140\nSo make sure you run through\nthose show protocols.\n\n2106\n01:48:55,140 --> 01:48:57,214\nOr show commands, sorry, protocols.\n\n2107\n01:48:57,214 --> 01:49:00,158\n[LAUGH]\n>> So I'm just skimming over my notes here\n\n2108\n01:49:00,158 --> 01:49:03,430\nand I think that pretty much hits\nall the objectives on this one.\n\n2109\n01:49:03,430 --> 01:49:06,850\nI do wanna remind you guys that\nas far as troubleshooting EIGRP,\n\n2110\n01:49:06,850 --> 01:49:09,340\nwe do have another EIGRP episode,\nit's already been shot.\n\n2111\n01:49:09,340 --> 01:49:11,130\nIt's already been linked on the site.\n\n2112\n01:49:11,130 --> 01:49:12,800\nAnd so we go into troubleshooting there,\n\n2113\n01:49:12,800 --> 01:49:15,320\ncuz there's some really weird\nstuff that can happen with EIGRP,\n\n2114\n01:49:15,320 --> 01:49:18,360\nespecially when you bring frame\nrelay into the mix and all that.\n\n2115\n01:49:18,360 --> 01:49:20,160\nSo check that episode out.\n\n2116\n01:49:20,160 --> 01:49:22,910\nBasically, it was supposed\nto be this episode, and\n\n2117\n01:49:22,910 --> 01:49:26,370\nthings just got a lot more complex\nin that one than we intended.\n\n2118\n01:49:26,370 --> 01:49:29,908\nSo it was at a higher difficulty level,\nso this is the new entry level.\n\n2119\n01:49:29,908 --> 01:49:33,490\nSo, but yes,\nthat'll basically take care of that, and\n\n2120\n01:49:33,490 --> 01:49:38,230\nlet me just remind you guys, if you ever\nhave any questions, live during the show,\n\n2121\n01:49:38,230 --> 01:49:43,370\nif you go to ITPro.tv/live, you'll see\nthe chatroom right beneath the video.\n\n2122\n01:49:43,370 --> 01:49:46,510\nYou can post your questions in there and\nwe answer them during the show.\n\n2123\n01:49:46,510 --> 01:49:50,290\nAlso, if you have questions after the\nshow, if you're watching this recorded,\n\n2124\n01:49:50,290 --> 01:49:52,830\nyou can go to the Q and\nA section on all of our pages.\n\n2125\n01:49:52,830 --> 01:49:55,250\nThere's a link at the top of\nthe screen that says Q and A.\n\n2126\n01:49:55,250 --> 01:49:56,950\nYou can hit that?\nIt will take you there to the question and\n\n2127\n01:49:56,950 --> 01:49:57,890\nanswers area.\n\n2128\n01:49:57,890 --> 01:50:00,270\nYou can post your questions there and\nagain we monitor and\n\n2129\n01:50:00,270 --> 01:50:03,270\nanswer and we make sure that you\nget the information you need.\n\n2130\n01:50:03,270 --> 01:50:05,070\nSo we are there for you.\n\n2131\n01:50:05,070 --> 01:50:05,752\n>> That's right.\nI think\n\n2132\n01:50:05,752 --> 01:50:07,830\nthat was the Ghost Buster\nthing in the commercial?\n\n2133\n01:50:07,830 --> 01:50:09,260\nYes.\n>> We are there for you, oh no.\n\n2134\n01:50:09,260 --> 01:50:11,106\nWe believe you, that's what it was, yes.\n\n2135\n01:50:11,106 --> 01:50:16,270\nAnyhow so [LAUGH] so go in there, post\nyour questions, post your ghost stories.\n\n2136\n01:50:16,270 --> 01:50:18,920\nWe love it and\nwe will definitely see you then.\n\n2137\n01:50:18,920 --> 01:50:20,700\n>> Yeah.\n>> Anything else to add Ronnie?\n\n2138\n01:50:20,700 --> 01:50:21,600\n>> Just remember,\n\n2139\n01:50:21,600 --> 01:50:25,400\nwe want you to go into the exam with\nanswers rather than more questions.\n\n2140\n01:50:25,400 --> 01:50:30,750\nSo we'll use that to help us to remind\nourselves, keep practicing, the only\n\n2141\n01:50:30,750 --> 01:50:33,960\nway you're gonna get better at this and\nget ready for the exam, is to practice.\n\n2142\n01:50:33,960 --> 01:50:35,960\nDon't just assume that you know it,\n\n2143\n01:50:35,960 --> 01:50:39,120\npractice to the point where you\nabsolutely know that you do.\n\n2144\n01:50:39,120 --> 01:50:43,240\n>> All right, well ladies and gentlemen,\nsigning off for ITProTV, I'm Don Pezet.\n\n2145\n01:50:43,240 --> 01:50:44,060\n>> And I'm Ronnie Wong.\n\n2146\n01:50:44,060 --> 01:50:45,650\n>> And we'll see you next time.\n\n2147\n01:50:45,650 --> 01:50:55,650\n[MUSIC]\n\n2148\n01:50:58,014 --> 01:51:04,730\n[SOUND]\n\n",
          "vimeoId": "100210014"
        }
      ],
      "title": "IP Routing Technologies"
    },
    {
      "episodes": [
        {
          "description": "In this episode Ronnie and Don examine several IP services on Cisco routers. They start by demonstrating first hop redundancy protocols and wrap up taking a look at syslog and SNMP.",
          "length": "4249",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/008-First-Hop-Redundancy.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/008-First-Hop-Redundancy-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/008-First-Hop-Redundancy-sm.jpg",
          "title": "First Hop Redundancy",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:14,243 --> 00:00:21,546\n[SOUND]\n\n3\n00:00:21,546 --> 00:00:31,546\n[MUSIC]\n\n4\n00:00:32,748 --> 00:00:35,160\nAll right, good morning,\ngood afternoon, good evening, and\n\n5\n00:00:35,160 --> 00:00:36,867\nwelcome back to another\nepisode of IT Pro TV.\n\n6\n00:00:36,867 --> 00:00:38,621\nI'm your host Don Pezet today with Mr.\nRonnie Wong.\n\n7\n00:00:38,621 --> 00:00:40,690\nHow's it going Ronnie?\n\n8\n00:00:40,690 --> 00:00:45,600\n>> I am doing well today, I am doing\nmuch better than a Dallas Cowboy fan.\n\n9\n00:00:45,600 --> 00:00:46,260\n>> [LAUGH] All of them?\n\n10\n00:00:46,260 --> 00:00:47,275\n>> Yeah, than all of them today.\n\n11\n00:00:47,275 --> 00:00:49,615\n[LAUGH]\n>> He'll be good again,\n\n12\n00:00:49,615 --> 00:00:51,715\none year it'll happen!\n\n13\n00:00:51,715 --> 00:00:55,495\nThere's always worse,\nlike Florida football teams.\n\n14\n00:00:55,495 --> 00:00:56,160\n>> That's true.\nBy far.\n\n15\n00:00:56,160 --> 00:00:58,715\n>> [LAUGH] All right,\nwe got an exciting episode ahead for us.\n\n16\n00:00:58,715 --> 00:01:05,085\nWe are gonna be tackling what Cisco\ncalls First Hop Redundancy Protocol.\n\n17\n00:01:05,085 --> 00:01:06,655\n>> That's what they call it.\n\n18\n00:01:06,655 --> 00:01:09,915\n>> Or first hop router redundancy?\n\n19\n00:01:09,915 --> 00:01:11,165\nFHRP.\n\n20\n00:01:11,165 --> 00:01:15,770\nThe first hop redundancy protocols which\nbasically are a couple neat tools,\n\n21\n00:01:15,770 --> 00:01:18,170\nsome neat software that's\nbuilt into Cisco routers,\n\n22\n00:01:18,170 --> 00:01:21,300\nthat allows us to survive\na single router failure.\n\n23\n00:01:21,300 --> 00:01:26,300\nNow, you might ask yourself, wait\na minute, I just watched the OSPF show,\n\n24\n00:01:26,300 --> 00:01:28,490\nand I just watched the EIGRP show.\n\n25\n00:01:28,490 --> 00:01:31,770\nAnd you show it off, a router failed,\nthe other routers route around it,\n\n26\n00:01:31,770 --> 00:01:34,190\nwhat the heck do we need\nother protocols for?\n\n27\n00:01:34,190 --> 00:01:37,550\nWell, we're not talking\nabout route redundancy.\n\n28\n00:01:37,550 --> 00:01:40,340\nWe're talking about\nactual router redundancy.\n\n29\n00:01:40,340 --> 00:01:45,980\nSo let's take a look at that scenario and\nsee what a typical network looks like,\n\n30\n00:01:45,980 --> 00:01:48,220\nand then we'll talk about how\nwe can make it more redundant.\n\n31\n00:01:48,220 --> 00:01:50,310\n>> Yeah.\nNow as we take a look at this diagram,\n\n32\n00:01:50,310 --> 00:01:52,610\nI think it's up on Don's machine.\n\n33\n00:01:52,610 --> 00:01:55,180\n>> I got all diagram\nhappy before the show.\n\n34\n00:01:56,450 --> 00:01:57,880\nThere we go.\n\n35\n00:01:57,880 --> 00:02:00,770\nThis is a typical network\nthat we tend to have.\n\n36\n00:02:00,770 --> 00:02:04,510\nOver on the left hand side, you have a\nsingle LAN, and usually that means we also\n\n37\n00:02:04,510 --> 00:02:08,120\nhave a single exit point, and\nour router one is representing that,\n\n38\n00:02:08,120 --> 00:02:11,990\nconnecting out to the ISP and possibly of\ncourse, the rest of the internet here.\n\n39\n00:02:11,990 --> 00:02:13,080\nSo usually, that's what we have.\n\n40\n00:02:13,080 --> 00:02:15,790\nBut the problem that we have though,\nis that hey,\n\n41\n00:02:15,790 --> 00:02:20,650\nwhat happens if something is bad\nbetween router one and my LAN.\n\n42\n00:02:20,650 --> 00:02:22,590\nAnd I have to fix that right away.\n\n43\n00:02:23,630 --> 00:02:25,050\n>> Yeah, router one in this scenario.\n\n44\n00:02:25,050 --> 00:02:27,560\nAnd this is a very, very common scenario.\n\n45\n00:02:27,560 --> 00:02:30,720\nThis is what a lot of home networks\nare like, your small businesses.\n\n46\n00:02:30,720 --> 00:02:32,450\nRouter one is a single point of failure.\n\n47\n00:02:32,450 --> 00:02:34,960\nIf it fails, the network fails.\n\n48\n00:02:34,960 --> 00:02:36,010\n>> Yeah.\n>> Your internal people\n\n49\n00:02:36,010 --> 00:02:38,400\ncan't get out to the internet and\nthat's the end of it.\n\n50\n00:02:38,400 --> 00:02:40,210\nSo what is our solution?\n\n51\n00:02:40,210 --> 00:02:44,090\nWell you can buy more expensive equipment,\nyou can do things like that to try and\n\n52\n00:02:44,090 --> 00:02:45,740\nmake it so your equipment didn't fail.\n\n53\n00:02:45,740 --> 00:02:49,080\nBut the best solution is\nto get a second router.\n\n54\n00:02:49,080 --> 00:02:50,520\nAnd if we're going to\nget a second a router,\n\n55\n00:02:50,520 --> 00:02:54,380\nwe might as well go the big step and\nget a second ISP also.\n\n56\n00:02:54,380 --> 00:02:57,820\nWe might have a DSL and\na cable line or something.\n\n57\n00:02:57,820 --> 00:03:00,400\n>> The problem that we still\nhave with just even this\n\n58\n00:03:00,400 --> 00:03:02,840\nset up is not only that\nsingle point of failure, but\n\n59\n00:03:02,840 --> 00:03:06,680\nremember that every device that needs to\nconnect out to the internet, to Amazon.com\n\n60\n00:03:06,680 --> 00:03:10,920\nin our example here, they're gonna be\nconfigured with that one default gateway.\n\n61\n00:03:11,920 --> 00:03:13,180\nSo even if this fails and\n\n62\n00:03:13,180 --> 00:03:17,310\nI have two particular routers, I would\nnormally have to actually go in and\n\n63\n00:03:17,310 --> 00:03:20,940\nreconfigure my default gateways for\nevery single device as well.\n\n64\n00:03:20,940 --> 00:03:24,110\nSo there's a lot of what we call\nadministrative effort involved\n\n65\n00:03:24,110 --> 00:03:26,260\neven in just adding in redundancies.\n\n66\n00:03:26,260 --> 00:03:28,940\nWe're talking about as another way to\nactually help us do this much more\n\n67\n00:03:28,940 --> 00:03:30,580\nefficiently as well.\n\n68\n00:03:30,580 --> 00:03:33,270\n>> Yeah, so using Ronnie's example there,\nlet's say we went out and\n\n69\n00:03:33,270 --> 00:03:35,790\nwe bought a second router,\nand we got a second ISP, and\n\n70\n00:03:35,790 --> 00:03:39,270\nyou don't have to have a second ISP, but\nI just did it for completeness here.\n\n71\n00:03:39,270 --> 00:03:43,130\nSo maybe I've got Router 1,\nwhich is connected to a T1 line.\n\n72\n00:03:44,170 --> 00:03:47,879\nAnd so\nit's got an internal IP of 192.168.0.1 and\n\n73\n00:03:47,879 --> 00:03:51,456\nI set my internal guys to use\nthat as their default gateway.\n\n74\n00:03:51,456 --> 00:03:53,407\nSo when they go out to the internet,\n\n75\n00:03:53,407 --> 00:03:56,370\nthey're passing through\nRouter 1 on their way out.\n\n76\n00:03:56,370 --> 00:04:00,260\nThen, I bring in Router 2\nconnected to a cable modem or\n\n77\n00:04:00,260 --> 00:04:03,650\nsome other type of broadband connection.\n\n78\n00:04:03,650 --> 00:04:08,080\nAnd I give it an internal\nIP of 192.168.0.2.\n\n79\n00:04:08,080 --> 00:04:12,570\nWell, on my host on the inside,\nif I set their gateway to .1,\n\n80\n00:04:12,570 --> 00:04:15,450\nthey're going out router one and\neverything's happy.\n\n81\n00:04:15,450 --> 00:04:20,500\nBut if that router were to fail,\nif that router goes offline.\n\n82\n00:04:20,500 --> 00:04:23,290\nWe've got this other pathway over here.\n\n83\n00:04:23,290 --> 00:04:27,792\nThis path that's still\nup that we could use but\n\n84\n00:04:27,792 --> 00:04:30,120\nour PCs aren't gonna use it are they?\n\n85\n00:04:30,120 --> 00:04:35,520\nThey're not gonna use it because their\ndefault gateway is still set to .1 and\n\n86\n00:04:35,520 --> 00:04:37,930\nthis router down here is .2.\n\n87\n00:04:37,930 --> 00:04:41,340\nThey're not set to use it I would\nhave to do just like Ronny said.\n\n88\n00:04:41,340 --> 00:04:44,410\nGo to each of my computers,\nchange their default gateway and\n\n89\n00:04:44,410 --> 00:04:46,370\nmap it over to this other side.\n\n90\n00:04:46,370 --> 00:04:49,560\nIf you have a lot of computers,\nit's not really an option, and\n\n91\n00:04:49,560 --> 00:04:50,530\nit's just time consuming.\n\n92\n00:04:52,620 --> 00:04:58,130\nSo what would be better is if we have some\nway to make it automatically failure over.\n\n93\n00:04:58,130 --> 00:05:02,170\nAre our PC manufacturers, or\noperating system manufacturers,\n\n94\n00:05:02,170 --> 00:05:04,870\nlike Microsoft and Apple and stuff.\n\n95\n00:05:04,870 --> 00:05:06,660\nThey could solve this problem for\n\n96\n00:05:06,660 --> 00:05:10,180\nus by allowing us to put in more than\none default gateway, and in IPV6,\n\n97\n00:05:10,180 --> 00:05:13,950\nthis is something that happens,\nbut in IPV4, they usually don't.\n\n98\n00:05:15,760 --> 00:05:20,880\nLinux, Windows, OSX, out of the box they\nreally only support one default gateway.\n\n99\n00:05:20,880 --> 00:05:23,920\nAnd so it does require a manual change.\n\n100\n00:05:23,920 --> 00:05:25,540\nSo what Cisco did,\n\n101\n00:05:25,540 --> 00:05:29,670\nis Cisco said there's got to be some way\nwe can help with this on the router side.\n\n102\n00:05:29,670 --> 00:05:34,660\nHow can we make it where\nthe routers provide a single IP,\n\n103\n00:05:34,660 --> 00:05:38,530\nor some method that will make the host\nswitch over when there's a failure.\n\n104\n00:05:38,530 --> 00:05:41,280\n>> And this is where we come into that\ntopic that we were just mentioning.\n\n105\n00:05:41,280 --> 00:05:45,030\nThe idea that we call\nFirst Hop Redundancy Protocol and for\n\n106\n00:05:45,030 --> 00:05:49,640\nus there's actually three different\nmajor protocols that are actually used\n\n107\n00:05:49,640 --> 00:05:51,380\nwhen we start addressing this.\n\n108\n00:05:51,380 --> 00:05:55,530\nIn doing this, what we actually end up\ndoing is that we set a default gateway\n\n109\n00:05:55,530 --> 00:05:59,680\nthat really doesn't exist, but\nit's recognized by our different routers\n\n110\n00:05:59,680 --> 00:06:02,800\nthat will help us instead and\nthat's what we're about to do.\n\n111\n00:06:02,800 --> 00:06:06,980\n>> So let's start with the first one which\nis the most likely one to be on the exam.\n\n112\n00:06:06,980 --> 00:06:11,150\nCisco came up with their own\nproprietary protocol to achieve this.\n\n113\n00:06:11,150 --> 00:06:13,500\nThey created what is HSRP or\n\n114\n00:06:13,500 --> 00:06:19,310\nthe hot standby redundancy protocol or\nHunts Standby router Redundancy Protocol,\n\n115\n00:06:19,310 --> 00:06:21,100\nthat little router bit\nnormally gets left off.\n\n116\n00:06:21,100 --> 00:06:26,640\nBut anyhow it's HSRP and what it does\nis it takes these two routers and\n\n117\n00:06:26,640 --> 00:06:29,910\nit basically forms a cluster\nof the two routers.\n\n118\n00:06:29,910 --> 00:06:34,712\nIt combines them together and\nwe then assign\n\n119\n00:06:34,712 --> 00:06:40,031\na virtual IP address to them and\nthat virtual IP,\n\n120\n00:06:40,031 --> 00:06:44,849\nsomething like 192.168.0.5.\n\n121\n00:06:44,849 --> 00:06:47,042\nI kinda ran out of room there.\n\n122\n00:06:47,042 --> 00:06:49,000\nBut we assign a virtual IP.\n\n123\n00:06:49,000 --> 00:06:51,000\nOh, I'm just making all sorts of mess now.\n\n124\n00:06:51,000 --> 00:06:52,796\nI'll put it back in, there we go.\n\n125\n00:06:52,796 --> 00:06:55,875\n192.168.0.5.\n\n126\n00:06:55,875 --> 00:06:59,057\nLet's say I picked that, or\n.3 cuz that would be the next one in line.\n\n127\n00:06:59,057 --> 00:07:06,643\nSo router one is 192.168.0.1 and\nrouter two is .2.\n\n128\n00:07:06,643 --> 00:07:11,500\nBut I create this virtual IP,\n.3, that's floating in\n\n129\n00:07:11,500 --> 00:07:16,910\nbetween them, what'll happen is one of\nthe routers will take charge to this IP.\n\n130\n00:07:16,910 --> 00:07:18,934\nProbably router one if\nwe set it up that way.\n\n131\n00:07:18,934 --> 00:07:22,462\nIt'll take charge of that IP and\nthen if it fails,\n\n132\n00:07:22,462 --> 00:07:26,998\nif that router goes offline for\nsome reason, the other router,\n\n133\n00:07:26,998 --> 00:07:30,785\nrouter two will jump in and\ntake over for that same IP.\n\n134\n00:07:30,785 --> 00:07:37,565\nSo the IP address is basically able\nto move between the two hosts.\n\n135\n00:07:37,565 --> 00:07:41,596\nSo now if I have a failure,\nmy PCs might all be set to go to\n\n136\n00:07:41,596 --> 00:07:47,670\n192.168.0.1 as a default gateway,\nwhich is tied to one router.\n\n137\n00:07:47,670 --> 00:07:52,969\nIf I change them to point\nto 192.168.0.3 instead.\n\n138\n00:07:52,969 --> 00:07:58,059\nInstead of going through that one router,\nthey will go through that one virtual IP,\n\n139\n00:07:58,059 --> 00:08:02,663\nand if it's on Router 1 or if it's on\nRouter 2, the computers never know.\n\n140\n00:08:02,663 --> 00:08:03,581\nThey don't care.\n\n141\n00:08:03,581 --> 00:08:05,867\nAnd when one router fails,\nthe other takes over,\n\n142\n00:08:05,867 --> 00:08:08,750\nall the PCs automatically\njump over to the other line.\n\n143\n00:08:08,750 --> 00:08:12,180\nYou have full redundancy\nwithout having to go and\n\n144\n00:08:12,180 --> 00:08:15,050\nreconfigure all of your PCs\non the internal network.\n\n145\n00:08:15,050 --> 00:08:16,380\nIt's a really nice thing to have.\n\n146\n00:08:16,380 --> 00:08:17,860\n>> Right.\n\n147\n00:08:17,860 --> 00:08:20,790\n>> All right, so\nwhen we talk about stuff like this,\n\n148\n00:08:20,790 --> 00:08:25,260\nshared virtual IPs and clustering and\nall that, it sounds really hard.\n\n149\n00:08:25,260 --> 00:08:26,330\n>> Right.\n>> All right.\n\n150\n00:08:26,330 --> 00:08:27,230\nBut it really isn't.\n\n151\n00:08:27,230 --> 00:08:29,250\nIt's actually pretty simple to set up.\n\n152\n00:08:29,250 --> 00:08:30,200\nThe only thing you really need.\n\n153\n00:08:30,200 --> 00:08:31,570\nThere's a couple of components you need.\n\n154\n00:08:31,570 --> 00:08:34,960\nFirst, you need a router that\nsupports HSRP, all right.\n\n155\n00:08:34,960 --> 00:08:37,500\nAlmost all Cisco routers do, but\n\n156\n00:08:37,500 --> 00:08:41,410\nif you get a real low end one like an 800\nseries, it may not have it, right.\n\n157\n00:08:41,410 --> 00:08:44,833\nBut pretty much any of the four\ndigit routers should have it and so\n\n158\n00:08:44,833 --> 00:08:47,410\nyou gotta have support for it, all right.\n\n159\n00:08:47,410 --> 00:08:50,060\nThen you need a shared IP,\n\n160\n00:08:50,060 --> 00:08:54,000\nwhich means the two routers need to\nbe plugged into a common network.\n\n161\n00:08:54,000 --> 00:08:57,088\nIn my example here, whoops.\n\n162\n00:08:57,088 --> 00:08:59,880\n[LAUGH] As I crashed my little diagram.\n\n163\n00:08:59,880 --> 00:09:00,610\nThere we go.\n\n164\n00:09:00,610 --> 00:09:05,168\nIn my example here, both routers\nare plugged into the 192.168.0.0 network.\n\n165\n00:09:05,168 --> 00:09:06,306\nThat's their common network.\n\n166\n00:09:06,306 --> 00:09:08,610\nAnd that's where their\nvirtual IP is gonna be.\n\n167\n00:09:08,610 --> 00:09:11,050\nIf the routers don't have\na network in common between them,\n\n168\n00:09:11,050 --> 00:09:12,670\nthere's no real point in doing failover.\n\n169\n00:09:12,670 --> 00:09:15,220\nRight, so\nthey've gotta have a common network.\n\n170\n00:09:15,220 --> 00:09:18,110\nThen, we just need to go and\nconfigure it on the two.\n\n171\n00:09:18,110 --> 00:09:21,780\nAnd the configuration can be very simple,\nit can also be very complex.\n\n172\n00:09:21,780 --> 00:09:23,830\nSo it just kind of depends\non your environment.\n\n173\n00:09:25,450 --> 00:09:28,560\nSo, what we've got right now is\nI've actually got hardware set up\n\n174\n00:09:28,560 --> 00:09:30,455\nthat creates this environment right here.\n\n175\n00:09:30,455 --> 00:09:32,445\nThe only thing I don't have is,\nI don't have a host on this network.\n\n176\n00:09:32,445 --> 00:09:35,880\nSo I went ahead and took a router, and\nwe're gonna use a router as a host.\n\n177\n00:09:35,880 --> 00:09:41,122\nAnd so let me show an example of that,\nif I can get into my diagram.\n\n178\n00:09:41,122 --> 00:09:42,019\nOops.\n\n179\n00:09:42,019 --> 00:09:44,640\n>> [LAUGH]\n>> There we go.\n\n180\n00:09:44,640 --> 00:09:45,858\nAll right, give everybody a seizure.\n\n181\n00:09:45,858 --> 00:09:46,739\n>> [LAUGH] Like a challenge.\n\n182\n00:09:46,739 --> 00:09:48,607\n>> So here on router 1.\n\n183\n00:09:53,705 --> 00:09:58,031\nAll right, this system, no,\nI don't wanna be on router one.\n\n184\n00:09:58,031 --> 00:09:59,392\nI wanna be on the host, all right.\n\n185\n00:09:59,392 --> 00:10:02,445\nSo I've got a router\nthat I'm using as a host.\n\n186\n00:10:02,445 --> 00:10:08,150\nAnd so, if you look,\nI've given an IP address of 192.168.0.100.\n\n187\n00:10:08,150 --> 00:10:12,290\nAnd if I look at its routing table,\nthe only routes it knows about is\n\n188\n00:10:12,290 --> 00:10:15,660\nthe 192.162.0.0 network,\nbecause it's directly plugged into it.\n\n189\n00:10:15,660 --> 00:10:19,520\nAnd then I gave it a default\ngateway of 192.162.0.1,\n\n190\n00:10:19,520 --> 00:10:21,464\njust like we would on a normal PC.\n\n191\n00:10:21,464 --> 00:10:27,820\nAnd then the host is gonna pass through\nrouter one on the way out to the Internet.\n\n192\n00:10:27,820 --> 00:10:31,880\nSo if I go back to my diagram,\nit's really set up like this.\n\n193\n00:10:31,880 --> 00:10:36,350\nThe host is .100, it passes through\n.1 on the way out to the Internet.\n\n194\n00:10:36,350 --> 00:10:37,840\nThis router does NAT.\n\n195\n00:10:37,840 --> 00:10:39,666\nAnd so it's natting us to the public IP.\n\n196\n00:10:39,666 --> 00:10:46,650\nAnd we can go out to somebody like Amazon\nright here and access that host [LAUGH].\n\n197\n00:10:46,650 --> 00:10:49,105\nGot to love Visio and\nits auto diagramming features.\n\n198\n00:10:50,845 --> 00:10:52,530\nI just want to get that IP.\n\n199\n00:10:52,530 --> 00:10:53,960\nThere we go.\n\n200\n00:10:53,960 --> 00:10:59,090\nAll right, so if I'm on this host and\nI do a ping to that IP address,\n\n201\n00:10:59,090 --> 00:11:02,930\nout to what we're saying is Amazon,\nI can ping it just fine.\n\n202\n00:11:02,930 --> 00:11:04,190\nI'm getting out to the Internet.\n\n203\n00:11:04,190 --> 00:11:08,210\nAnd if I do a traceroute\nto that IP address.\n\n204\n00:11:08,210 --> 00:11:11,647\nI should see that I'm\npassing through 192.168.0.1.\n\n205\n00:11:11,647 --> 00:11:14,501\nAnd then I'm going out to\nthe Internet Service Provider and\n\n206\n00:11:14,501 --> 00:11:16,522\nout on the ISP network\nto get to that host.\n\n207\n00:11:16,522 --> 00:11:18,000\nAll right, so,\n\n208\n00:11:18,000 --> 00:11:23,290\neverything works fine, except if router\none fails I'm dead in the water.\n\n209\n00:11:23,290 --> 00:11:26,420\nRight, I would have to change my\ndefault gateway to router two and\n\n210\n00:11:26,420 --> 00:11:28,680\nthen I'd be able to get\nout through that one.\n\n211\n00:11:28,680 --> 00:11:29,180\nAll right.\n\n212\n00:11:30,460 --> 00:11:33,090\nSo what I'm gonna do now is I'm\ngonna configure that cluster.\n\n213\n00:11:33,090 --> 00:11:35,820\nThe cluster between router one and\nrouter two.\n\n214\n00:11:35,820 --> 00:11:38,323\nAnd we really just start on one router and\n\n215\n00:11:38,323 --> 00:11:41,640\nit is configured on an interface\nby interface basis.\n\n216\n00:11:41,640 --> 00:11:45,450\nSo, I'm not really clustering\nthe entire router.\n\n217\n00:11:45,450 --> 00:11:50,540\nWhat I'm really clustering\nis the internal interfaces.\n\n218\n00:11:50,540 --> 00:11:55,580\nI'm clustering this interface and\nthis interface to be clustered together.\n\n219\n00:11:55,580 --> 00:11:58,860\nThe public IPs, those external interfaces,\nthose aren't clustered.\n\n220\n00:11:58,860 --> 00:12:00,650\nThey're different networks,\ndifferent ISPs.\n\n221\n00:12:00,650 --> 00:12:01,876\nSo, it's really just the inside.\n\n222\n00:12:01,876 --> 00:12:02,644\n>> Yep.\n\n223\n00:12:04,963 --> 00:12:07,902\n>> All right.\n\n224\n00:12:07,902 --> 00:12:10,020\nThere we go.\n\n225\n00:12:10,020 --> 00:12:15,372\nSo I'm gonna start by getting into my\nconfiguration and into fa0/0, all right.\n\n226\n00:12:15,372 --> 00:12:20,151\nAnd HSRP, the hot standby redundancy\nprotocol, or hot standby router\n\n227\n00:12:20,151 --> 00:12:25,210\nredundancy protocol, it's all keyed\naround this keyword of standby.\n\n228\n00:12:25,210 --> 00:12:25,720\n>> Right.\n>> So\n\n229\n00:12:25,720 --> 00:12:30,410\nwhen we configure it, it's the standby\nkeyword that we're using to do the config.\n\n230\n00:12:30,410 --> 00:12:32,970\nAnd there's really only\na couple of commands that we\n\n231\n00:12:32,970 --> 00:12:35,030\ntruly have to issue to get it working.\n\n232\n00:12:35,030 --> 00:12:39,160\nThe first thing we need to do is we\nneed to say standby and then a number.\n\n233\n00:12:39,160 --> 00:12:44,640\nYou'll see that, when we do HSRP, we can\nhave several different standby groups.\n\n234\n00:12:44,640 --> 00:12:46,060\nYou might have different interfaces and\n\n235\n00:12:46,060 --> 00:12:49,340\ndifferent groups based on\nwhatever criteria it is.\n\n236\n00:12:49,340 --> 00:12:51,970\nUsually you're only gonna have one and\nso I'm just gonna say standby 1.\n\n237\n00:12:51,970 --> 00:12:55,100\nAnd that'll be the group that I'm in.\n\n238\n00:12:55,100 --> 00:12:56,567\nAnd then from there,\n\n239\n00:12:56,567 --> 00:13:01,551\nI can specify what the shared IP address\nis going to be between the hosts.\n\n240\n00:13:01,551 --> 00:13:07,710\nI wanna share 192.168.0.3, okay.\n\n241\n00:13:07,710 --> 00:13:11,320\nThat one command right there,\nthat's enough, right.\n\n242\n00:13:11,320 --> 00:13:14,450\nThat turns on HSRP and\ngets things up and going.\n\n243\n00:13:14,450 --> 00:13:17,030\nSo standby followed by a group number.\n\n244\n00:13:17,030 --> 00:13:20,160\nAnd then, an IP address and\nwhat that shared IP is going to be.\n\n245\n00:13:22,410 --> 00:13:25,810\nNow, when that's done, HSRP is running.\n\n246\n00:13:25,810 --> 00:13:29,817\nI'm up but this is the only router\nthat's a part of that little cluster.\n\n247\n00:13:29,817 --> 00:13:33,790\nIf I get out and\nI do a show standby, all right.\n\n248\n00:13:33,790 --> 00:13:35,902\nShow standby is the command\nthat'll give us our status.\n\n249\n00:13:35,902 --> 00:13:40,688\nAnd I can see that I'm in\nstandby group one, it's active,\n\n250\n00:13:40,688 --> 00:13:44,343\nthe virtual IP is 192.168.0.3.\n\n251\n00:13:44,343 --> 00:13:46,368\nIt even made a virtual MAC address, right,\n\n252\n00:13:46,368 --> 00:13:49,200\ncuz that's gotta bounce\nbetween the routers too.\n\n253\n00:13:49,200 --> 00:13:51,580\nAnd it's up and it's happy.\n\n254\n00:13:51,580 --> 00:13:54,460\nExcept it's the only router that's active.\n\n255\n00:13:54,460 --> 00:13:56,686\nThere is no standby, right?\n\n256\n00:13:56,686 --> 00:13:57,337\n>> Yep.\n\n257\n00:13:57,337 --> 00:13:58,138\n>> Right.\n\n258\n00:13:58,138 --> 00:13:59,659\nRight there, Standby router is unknown.\n\n259\n00:13:59,659 --> 00:14:05,650\nAll right, so\nif I really want to be truly redundant.\n\n260\n00:14:05,650 --> 00:14:07,970\nI gotta go and\ndo this on router two, all right.\n\n261\n00:14:07,970 --> 00:14:10,250\nWell it's really the same exact command.\n\n262\n00:14:10,250 --> 00:14:18,194\nOn router two, I'm gonna get into\nmy configuration and into FA0/0.\n\n263\n00:14:18,194 --> 00:14:25,152\nWhere I'll say standby 1 ip 192.168.0.3.\n\n264\n00:14:25,152 --> 00:14:30,080\nAll right, I'm gonna wait a second here.\n\n265\n00:14:30,080 --> 00:14:34,410\nWhen it comes up, it's gonna look\nat the network and say, all right,\n\n266\n00:14:34,410 --> 00:14:39,950\nis somebody else already\nin standby group one, okay.\n\n267\n00:14:39,950 --> 00:14:46,380\nIf they are, I need to join that group and\nbecome a part of it, okay.\n\n268\n00:14:46,380 --> 00:14:50,005\nAnd so that should happen and\nthen we become the backup,\n\n269\n00:14:50,005 --> 00:14:52,640\nthe standby basically for that system.\n\n270\n00:14:52,640 --> 00:14:53,850\nAnd there it goes.\n\n271\n00:14:53,850 --> 00:14:56,680\nI can see my HSRP state change happened.\n\n272\n00:14:56,680 --> 00:15:01,320\nOur group went from speaking,\nthat's us trying to find someone else on\n\n273\n00:15:01,320 --> 00:15:05,900\nthe network,\nwent from speaking to standby, right.\n\n274\n00:15:05,900 --> 00:15:07,350\nAnd if I do a show standby.\n\n275\n00:15:07,350 --> 00:15:11,260\nI can see that I'm in group one.\n\n276\n00:15:11,260 --> 00:15:13,495\nMy current state is standby.\n\n277\n00:15:13,495 --> 00:15:17,830\nI'm not the active router,\nI'm the backup, the guy who's waiting.\n\n278\n00:15:17,830 --> 00:15:21,360\nI'm hot, I'm on, but\nI'm just waiting, all right.\n\n279\n00:15:21,360 --> 00:15:23,950\nAnd I got a virtual IP\naddress of 192.168.0.3.\n\n280\n00:15:23,950 --> 00:15:27,980\nAnd this MAC address matches\nthe MAC address on the other side.\n\n281\n00:15:27,980 --> 00:15:29,531\nIt's that virtual MAC\naddress that's being shared.\n\n282\n00:15:32,374 --> 00:15:35,270\nAnd if we go back to router one,\nwe can do a show standby.\n\n283\n00:15:36,880 --> 00:15:40,650\nAnd now,\nI can see that my state is active.\n\n284\n00:15:40,650 --> 00:15:45,257\nAnd the standby router is 192.168.0.2.\n\n285\n00:15:45,257 --> 00:15:47,941\nIt's up, it's happy,\nwe've now got a backup.\n\n286\n00:15:47,941 --> 00:15:49,996\n>> There you go.\n\n287\n00:15:49,996 --> 00:15:52,478\n>> All right, so back on my diagram,\n\n288\n00:15:52,478 --> 00:15:56,339\nwe now have this shared IP\nbetween these two routers.\n\n289\n00:15:56,339 --> 00:16:00,212\nThe only thing left to do is reconfigure\nthe routers on our network to use that\n\n290\n00:16:00,212 --> 00:16:02,100\nshared IP as their default gateway.\n\n291\n00:16:02,100 --> 00:16:08,961\nSo I'm gonna go in and\nchange that, Let me.\n\n292\n00:16:08,961 --> 00:16:10,029\nThere we go.\n\n293\n00:16:10,029 --> 00:16:15,730\nLet me get to my router that I'm\nusing as a host and what I have.\n\n294\n00:16:20,485 --> 00:16:21,645\nThere we go.\n\n295\n00:16:21,645 --> 00:16:22,845\nI have this static route here.\n\n296\n00:16:22,845 --> 00:16:24,535\nThis is my default gateway.\n\n297\n00:16:24,535 --> 00:16:26,767\nI'm just going to remove that.\n\n298\n00:16:26,767 --> 00:16:27,521\nAll right?\n\n299\n00:16:27,521 --> 00:16:30,045\nAnd then I'm going to put it back in, but\n\n300\n00:16:30,045 --> 00:16:35,375\ninstead of using .1 as my default gateway,\nI'm going to use .3.\n\n301\n00:16:35,375 --> 00:16:39,535\nWhat I'm saying is that if I want to\naccess any network on the internet,\n\n302\n00:16:39,535 --> 00:16:40,935\nIm going to use .3.\n\n303\n00:16:40,935 --> 00:16:41,620\nAll right?\n\n304\n00:16:41,620 --> 00:16:46,214\nAnd I can try and ping that, 192.168.0.3.\n\n305\n00:16:46,214 --> 00:16:46,818\nAll right?\n\n306\n00:16:46,818 --> 00:16:48,710\nI can ping it just fine.\n\n307\n00:16:48,710 --> 00:16:52,510\nIf I do a show IP route, I can see all\nof my traffic, my default traffic,\n\n308\n00:16:52,510 --> 00:16:57,430\nis being routed through 192.168.0.3,\nso that looks good.\n\n309\n00:16:57,430 --> 00:16:59,190\nSo I'm good there.\n\n310\n00:16:59,190 --> 00:17:01,509\nAnd now I can try to\nping out to the internet.\n\n311\n00:17:03,953 --> 00:17:04,540\n>> There we go.\n\n312\n00:17:05,820 --> 00:17:10,370\nSo we're now using the virtual interface\nat this point, as our default gateway.\n\n313\n00:17:10,370 --> 00:17:13,230\nNow for\nus as we do this traced route here,\n\n314\n00:17:13,230 --> 00:17:14,790\nlet's see where it actually\nbrings us back to.\n\n315\n00:17:16,520 --> 00:17:18,430\nNotice it's pretty much the same and\n\n316\n00:17:18,430 --> 00:17:21,500\nthat's because it's not actually\ndoing load balancing here, right?\n\n317\n00:17:21,500 --> 00:17:24,190\nWe're not taking one ping and\nsending it one direction and\n\n318\n00:17:24,190 --> 00:17:26,470\ntaking another ping sending\nit a different direction.\n\n319\n00:17:26,470 --> 00:17:30,110\nRight now we're saying that router\nnumber one here is the active one.\n\n320\n00:17:30,110 --> 00:17:33,010\nAnd unless something happens\nto router number one,\n\n321\n00:17:33,010 --> 00:17:34,830\nit's still going to actually\ndo its default thing.\n\n322\n00:17:34,830 --> 00:17:39,160\n>> Now neat thing here, I know my\ndefault gateway is set to 192.168.0.3.\n\n323\n00:17:39,160 --> 00:17:42,040\nRight?\nI know that's what it's set to.\n\n324\n00:17:42,040 --> 00:17:43,390\nI know I'm going out that way.\n\n325\n00:17:43,390 --> 00:17:46,340\nBut when I did the trace route,\nsee how it returned 192.168.0.1.\n\n326\n00:17:46,340 --> 00:17:51,080\nRight?\nOne is the active router.\n\n327\n00:17:51,080 --> 00:17:53,240\nAnd so, that's what I'm seeing here.\n\n328\n00:17:53,240 --> 00:17:57,260\nIf we have a failure though,\nit will flip over to the other side.\n\n329\n00:17:57,260 --> 00:17:58,550\nLet's simulate that.\n\n330\n00:17:58,550 --> 00:18:02,960\nSo I'm going to go over to router1, and\nI'm going to take its interface FA00, and\n\n331\n00:18:02,960 --> 00:18:04,540\nI'm just going to do a shut down.\n\n332\n00:18:04,540 --> 00:18:07,232\nSo I'm going to shut down that interface.\n\n333\n00:18:07,232 --> 00:18:10,300\nSo router1 is now dead in the water for\nthat network.\n\n334\n00:18:10,300 --> 00:18:11,020\nOkay?\n\n335\n00:18:11,020 --> 00:18:12,510\nAnd I see some messages happening here.\n\n336\n00:18:12,510 --> 00:18:15,490\nLet's ship over to router2,\nthat's where the fun stuff's gonna happen.\n\n337\n00:18:15,490 --> 00:18:16,440\nSo here on router2,\n\n338\n00:18:16,440 --> 00:18:18,210\nI can see I got a message,\n>> There it is.\n\n339\n00:18:18,210 --> 00:18:21,930\n>> And it says I changed\nstate from standby to active.\n\n340\n00:18:21,930 --> 00:18:26,420\nSo we just went from being the backup\nthat's waiting to recognizing that router1\n\n341\n00:18:26,420 --> 00:18:29,930\nis dead in the water, it's gone,\nand going active and coming up.\n\n342\n00:18:29,930 --> 00:18:30,650\nAll right?\n\n343\n00:18:30,650 --> 00:18:36,190\nNow, if I jump over to the host,\nand I ping 192.168.0.3,\n\n344\n00:18:36,190 --> 00:18:42,530\nwell it should have the same MAC address,\nI should still be able to ping it.\n\n345\n00:18:42,530 --> 00:18:43,350\nThere we go.\n\n346\n00:18:43,350 --> 00:18:47,100\nI did lose a couple as it did it's\nart broadcast, I waited too long.\n\n347\n00:18:47,100 --> 00:18:50,140\nBut, I can see that I\ncan ping .3 just fine.\n\n348\n00:18:50,140 --> 00:18:52,090\nAnd if I try and ping out to the internet.\n\n349\n00:18:53,950 --> 00:18:54,550\nThere we go.\n\n350\n00:18:54,550 --> 00:18:56,530\nI'm getting out to the internet just fine.\n\n351\n00:18:56,530 --> 00:18:59,150\nSometimes on a Cisco router\nthe time delays are so short.\n\n352\n00:18:59,150 --> 00:19:02,120\n>> Yeah.\n>> Or the, shoot what is it called,\n\n353\n00:19:02,120 --> 00:19:03,070\nthe timeout.\n\n354\n00:19:03,070 --> 00:19:04,010\n>> Timeout.\n>> Interval is set so\n\n355\n00:19:04,010 --> 00:19:06,650\nlow that you might lose your first or\nsecond ping.\n\n356\n00:19:06,650 --> 00:19:09,730\nAs it does ARP broadcasts and\nall that to find its way out.\n\n357\n00:19:09,730 --> 00:19:11,530\nBut we're looking good there.\n\n358\n00:19:11,530 --> 00:19:15,500\nAnd if I do a trace route,\nout to the internet,\n\n359\n00:19:15,500 --> 00:19:17,680\nnotice how it's now going through .2.\n\n360\n00:19:17,680 --> 00:19:21,650\nI didn't have to change\nmy configuration at all.\n\n361\n00:19:21,650 --> 00:19:26,410\nBecause I was using the virtual IP to\ngo out, it automatically flipped over.\n\n362\n00:19:26,410 --> 00:19:29,060\nSo I could have thousands\nof clients that have\n\n363\n00:19:29,060 --> 00:19:32,430\nall automatically moved over to the other\ngateway without a configuration change.\n\n364\n00:19:33,500 --> 00:19:35,280\n>> On the exam objectives,\n\n365\n00:19:35,280 --> 00:19:39,530\nit tells us that we need to actually be\nable to recognize that it's actually on.\n\n366\n00:19:39,530 --> 00:19:44,170\nSo for us, taking a look at those show\ncommands is actually going to be key for\n\n367\n00:19:44,170 --> 00:19:45,220\nus here.\n\n368\n00:19:45,220 --> 00:19:48,350\nIf we need to verify which particular\nrouter is the active router, and\n\n369\n00:19:48,350 --> 00:19:53,150\nwhich one is actually going to\nbe the stand by router as well.\n\n370\n00:19:53,150 --> 00:19:56,830\nSo make sure this command is actually\nkey for you when you take a look there.\n\n371\n00:19:57,850 --> 00:20:02,320\n>> Yeah recognize when it says state\nis active versus state is standby and\n\n372\n00:20:02,320 --> 00:20:04,280\nthen the standby router status.\n\n373\n00:20:04,280 --> 00:20:05,815\nIn this case standby\nrouter there's unknown,\n\n374\n00:20:05,815 --> 00:20:07,775\nthat means the other routers dead.\n\n375\n00:20:07,775 --> 00:20:10,925\nI don't see the other router\nthat's out there, alright.\n\n376\n00:20:10,925 --> 00:20:15,175\nNow there are a lot of neat\npowerful options inside of HSRP.\n\n377\n00:20:15,175 --> 00:20:17,895\nFor example, if I go and\nbring router one back online.\n\n378\n00:20:20,340 --> 00:20:20,890\nWhoops.\n\n379\n00:20:20,890 --> 00:20:21,710\nThere we go.\n\n380\n00:20:21,710 --> 00:20:23,910\nSo I'm going to bring router1 back online.\n\n381\n00:20:23,910 --> 00:20:25,790\nI'll just do a little no shut down.\n\n382\n00:20:25,790 --> 00:20:27,430\nIt's going to come up and\n\n383\n00:20:27,430 --> 00:20:31,270\nwhen it comes up, HSRP is going to\nrecognize that it's back up again.\n\n384\n00:20:31,270 --> 00:20:34,410\nIt's going to rejoin and everything's\ngoing to be up and happy, right?\n\n385\n00:20:34,410 --> 00:20:36,130\nWell, not entirely.\n\n386\n00:20:36,130 --> 00:20:39,975\nWhen they come back up,\nrouter1 is now up and healthy.\n\n387\n00:20:39,975 --> 00:20:41,155\nRouter2 is up and healthy.\n\n388\n00:20:41,155 --> 00:20:46,242\nBut router2 is active,\nrouter2 is going to stay active.\n\n389\n00:20:46,242 --> 00:20:47,080\nAll right?\n\n390\n00:20:47,080 --> 00:20:50,775\nOnce you go active in HSRP,\nyou stay active until there's a failure.\n\n391\n00:20:50,775 --> 00:20:52,885\nRouter1 just became the standby.\n\n392\n00:20:52,885 --> 00:20:54,290\nRight?\n\n393\n00:20:54,290 --> 00:20:58,690\nWell, what if router1 was connected to\n\n394\n00:20:58,690 --> 00:21:02,850\na 40 megabit fiber line, and\nrouter2 was just a DSL line?\n\n395\n00:21:03,890 --> 00:21:07,750\nMaybe I want router1 to come back\nup as the active router again.\n\n396\n00:21:07,750 --> 00:21:09,980\nSo you can set what's called preemption.\n\n397\n00:21:09,980 --> 00:21:13,140\nAnd preemption is where one router\ngets preference over the other.\n\n398\n00:21:13,140 --> 00:21:13,670\nRight?\n\n399\n00:21:13,670 --> 00:21:15,040\nIt's a two step process.\n\n400\n00:21:15,040 --> 00:21:18,380\nYou have to turn preemption on and\nyou have to set a priority value so\n\n401\n00:21:18,380 --> 00:21:21,520\nyou can define which router\ngets priority over the other.\n\n402\n00:21:21,520 --> 00:21:22,380\nAll right?\n\n403\n00:21:22,380 --> 00:21:24,820\nSo let's do that.\n\n404\n00:21:24,820 --> 00:21:25,590\nIt only takes a second.\n\n405\n00:21:27,590 --> 00:21:30,140\nI don't think you actually need to know\nthis for the exam but it's good to see.\n\n406\n00:21:30,140 --> 00:21:35,550\nSo I'm just going to issue\nthe standby one preempt command and\n\n407\n00:21:35,550 --> 00:21:37,260\nthat's going turn on preemption.\n\n408\n00:21:38,560 --> 00:21:42,630\nAnd then I'll say standby one priority.\n\n409\n00:21:42,630 --> 00:21:45,218\nAnd then I'll specify the priority value.\n\n410\n00:21:45,218 --> 00:21:48,278\nOkay?\nI'm gonna give this router a priority\n\n411\n00:21:48,278 --> 00:21:49,398\nvalue of 50.\n\n412\n00:21:49,398 --> 00:21:52,720\nOkay?\nNow the default priority value is 100.\n\n413\n00:21:52,720 --> 00:21:57,290\nAnd if we do like a do show standby,\nyou'll see it in here where it shows,\n\n414\n00:21:57,290 --> 00:22:01,330\nwell now mine says priority\n50 configured 50, right?\n\n415\n00:22:01,330 --> 00:22:03,730\nBut the active router right\nhere shows priority 100.\n\n416\n00:22:03,730 --> 00:22:05,690\nSo 100 is the default.\n\n417\n00:22:05,690 --> 00:22:08,210\nI've set my priority to be lower.\n\n418\n00:22:08,210 --> 00:22:08,850\nAll right?\n\n419\n00:22:08,850 --> 00:22:13,240\nSo, now if I redo my test or\nI do a shutdown, right.\n\n420\n00:22:13,240 --> 00:22:14,953\nSo, HSRP is gonna fail.\n\n421\n00:22:20,053 --> 00:22:21,140\nAll right?\n\n422\n00:22:21,140 --> 00:22:23,290\nAnd, then I can bring it back online.\n\n423\n00:22:27,211 --> 00:22:28,810\nNow, when I do that no shutdown.\n\n424\n00:22:30,590 --> 00:22:32,070\nHSRP is going to come back up.\n\n425\n00:22:33,620 --> 00:22:35,235\nBut this time I've enabled preemption.\n\n426\n00:22:35,235 --> 00:22:37,280\nOh, I didn't enable it on the other side.\n\n427\n00:22:37,280 --> 00:22:38,170\n>> Oh. Yeah. >> But\n\n428\n00:22:38,170 --> 00:22:41,690\nactually I think it will work\nstill as long as this one is set.\n\n429\n00:22:41,690 --> 00:22:44,690\nBut ideally you would have the same\nconfiguration on both ends.\n\n430\n00:22:44,690 --> 00:22:46,210\nSo it may not get happy.\n\n431\n00:22:46,210 --> 00:22:50,680\nMight just need to be patient.\n\n432\n00:22:50,680 --> 00:22:51,850\nYeah it went back into stand by.\n\n433\n00:22:51,850 --> 00:22:53,837\nAll right, let me turn on preemption here.\n\n434\n00:22:57,962 --> 00:23:03,320\nSo I'll just say stand by, one preempt.\n\n435\n00:23:06,160 --> 00:23:06,820\nAll right.\n\n436\n00:23:06,820 --> 00:23:13,094\nSo, now preemption is turned on and\nif I generate a failure.\n\n437\n00:23:14,919 --> 00:23:19,439\nSo, generate that failure, so this one's\ngonna go down to a net and, let me,\n\n438\n00:23:19,439 --> 00:23:21,300\nI'll just take them both down.\n\n439\n00:23:23,060 --> 00:23:24,770\nWe'll get a nice, clean state.\n\n440\n00:23:24,770 --> 00:23:25,330\nOkay.\n\n441\n00:23:25,330 --> 00:23:26,960\nSo both routers are down right now.\n\n442\n00:23:26,960 --> 00:23:29,770\nThe HSRP environment is dead in the water.\n\n443\n00:23:29,770 --> 00:23:31,970\nI'll do a no shutdown here.\n\n444\n00:23:31,970 --> 00:23:34,668\nSo router2 is now gonna come up and\nbe healthy.\n\n445\n00:23:37,330 --> 00:23:39,640\nAnd I'll wait for\nthat stand by to go active.\n\n446\n00:23:39,640 --> 00:23:41,050\nRight now the state is listen.\n\n447\n00:23:41,050 --> 00:23:43,486\nListen is where you're listening for\nthat other neighbor that's out there.\n\n448\n00:23:43,486 --> 00:23:44,850\nRight?\nAnd then speak is when\n\n449\n00:23:44,850 --> 00:23:47,040\nyou're talking to the neighbor to\nfigure out what state to come up in.\n\n450\n00:23:47,040 --> 00:23:50,102\nAnd then finally you go either active or\nstand by.\n\n451\n00:23:50,102 --> 00:23:51,440\nAll right.\n\n452\n00:23:51,440 --> 00:23:53,010\nSo my state is now speak.\n\n453\n00:23:53,010 --> 00:23:55,580\nSo I'm just waiting impatiently.\n\n454\n00:23:55,580 --> 00:23:56,771\nThere we go, all right.\n\n455\n00:23:56,771 --> 00:24:00,425\nSo router2 is now active\nwith a priority of 100, and\n\n456\n00:24:00,425 --> 00:24:03,553\nI'll go to router1 and\nI'm gonna bring it up.\n\n457\n00:24:08,778 --> 00:24:10,438\nAnd we'll see it go through\nthe same basic things.\n\n458\n00:24:10,438 --> 00:24:12,825\nIt's gonna go through listen,\nwhich is where it is now,\n\n459\n00:24:12,825 --> 00:24:16,180\nlistening to see if anybody\nelse out there is running HSRP.\n\n460\n00:24:16,180 --> 00:24:19,260\nThen it'll go into speak as\nwe talk to the other system.\n\n461\n00:24:19,260 --> 00:24:22,100\nAnd then it'll go into either active or\nstandby.\n\n462\n00:24:23,140 --> 00:24:24,620\n>> While that's configuring the priority,\n\n463\n00:24:24,620 --> 00:24:27,970\nhopefully it goes to well,\nactive, is what we're hoping for.\n\n464\n00:24:27,970 --> 00:24:28,470\nYup.\n\n465\n00:24:29,980 --> 00:24:32,160\n>> So we'll give it just a moment,\nand [INAUDIBLE],\n\n466\n00:24:32,160 --> 00:24:34,550\ndid I get my priority numbers backwards,\nRonnie?\n\n467\n00:24:34,550 --> 00:24:37,760\n>> It could be the higher priority number.\n\n468\n00:24:37,760 --> 00:24:38,530\n>> Shoot.\n>> I don't remember.\n\n469\n00:24:38,530 --> 00:24:39,730\n>> You know that's the tricky\n\n470\n00:24:39,730 --> 00:24:42,765\npart with a lot of this stuff\nis there's so many variations.\n\n471\n00:24:42,765 --> 00:24:45,410\nAnd sometimes you need a higher number,\nsometimes you need a lower number.\n\n472\n00:24:45,410 --> 00:24:46,570\nLet me throw a higher number on here.\n\n473\n00:24:49,670 --> 00:24:50,190\nThat was it.\n\n474\n00:24:50,190 --> 00:24:51,695\nYeah, a higher number on the priority.\n\n475\n00:24:51,695 --> 00:24:54,950\nSo in the world of like\nspanning tree protocol,\n\n476\n00:24:54,950 --> 00:24:57,240\nthe lower the priority number the better.\n\n477\n00:24:57,240 --> 00:24:58,400\nLower number wins.\n\n478\n00:24:58,400 --> 00:24:59,690\nIn HSRP, it's a higher number.\n\n479\n00:24:59,690 --> 00:25:01,190\nSo I had to bump it to a higher one.\n\n480\n00:25:01,190 --> 00:25:05,680\nWhen I made that one a priority of 150,\nyou'll see I just got my message.\n\n481\n00:25:05,680 --> 00:25:07,330\nIt jumped over to active and\nit went in business.\n\n482\n00:25:07,330 --> 00:25:08,860\nSo I just went the wrong way on it.\n\n483\n00:25:08,860 --> 00:25:11,510\nSo this way, we can set a preference.\n\n484\n00:25:11,510 --> 00:25:16,480\nIf router one is connected to a 40\nmegabit line, and router two is like,\n\n485\n00:25:16,480 --> 00:25:19,560\non a one and a half megabit line,\nit's great to have router two.\n\n486\n00:25:19,560 --> 00:25:23,210\nIt's great to fail over to it in time of\nneed and have that back up connection.\n\n487\n00:25:23,210 --> 00:25:26,790\nBut when router one becomes healthy\nagain we want it to jump back in and\n\n488\n00:25:26,790 --> 00:25:28,448\npriority is what let's us do that.\n\n489\n00:25:28,448 --> 00:25:29,300\nAll right?\n\n490\n00:25:29,300 --> 00:25:34,898\nSo let's recap those\ncommands that we issued.\n\n491\n00:25:34,898 --> 00:25:35,522\n>> Oops.\n\n492\n00:25:35,522 --> 00:25:37,195\n>> I keep doing that.\n\n493\n00:25:37,195 --> 00:25:43,113\nAll right, so So\n\n494\n00:25:43,113 --> 00:25:48,759\non router one And\nlet me throw these into a notepad window.\n\n495\n00:26:00,574 --> 00:26:03,260\nAll right, so\non router one this is what we issued.\n\n496\n00:26:03,260 --> 00:26:06,560\nBasically we have an IP address,\nwe have some NAT stuff set up,\n\n497\n00:26:06,560 --> 00:26:08,980\nthat's not really HSRP related.\n\n498\n00:26:08,980 --> 00:26:11,760\nAnd, here, I'll delete out some\nof these just because they're not\n\n499\n00:26:11,760 --> 00:26:12,520\nall that necessary.\n\n500\n00:26:14,530 --> 00:26:18,630\nSo basically we assign an individual IP to\nthe interface, then we assign the shared\n\n501\n00:26:18,630 --> 00:26:24,710\nIP and if we want we can turn on priority\nand preemption and that knocks that out.\n\n502\n00:26:24,710 --> 00:26:29,550\nRouter two on the other hand,\nwe did a little bit different, right?\n\n503\n00:26:29,550 --> 00:26:35,570\nOn router two the IP address was .2,\nwe set that same shared one.\n\n504\n00:26:35,570 --> 00:26:37,520\nWe did not set a priority.\n\n505\n00:26:37,520 --> 00:26:38,640\nWe just left it at the default.\n\n506\n00:26:38,640 --> 00:26:41,040\nThe default is 100, all right?\n\n507\n00:26:41,040 --> 00:26:43,690\nSo by doing this very\nsimple configuration,\n\n508\n00:26:43,690 --> 00:26:45,750\nthe routers cluster each other together.\n\n509\n00:26:45,750 --> 00:26:47,710\nIf one fails, the other takes over.\n\n510\n00:26:47,710 --> 00:26:49,340\nThe clients don't even see it, right?\n\n511\n00:26:49,340 --> 00:26:53,550\nThe client's still connecting to that\none shared IP and off you go, right?\n\n512\n00:26:53,550 --> 00:26:56,255\nSo it's actually not very\nhard to configure at all.\n\n513\n00:26:56,255 --> 00:26:57,390\n>> Yeah.\n\n514\n00:26:57,390 --> 00:26:58,960\nRemember that show command though.\n\n515\n00:26:58,960 --> 00:27:02,520\nMake sure you actually know how to be able\nto figure which one's actually inactive,\n\n516\n00:27:02,520 --> 00:27:04,070\nwhich one's in standby.\n\n517\n00:27:04,070 --> 00:27:07,120\nAlso remember if we're going\nto set preemption here,\n\n518\n00:27:07,120 --> 00:27:10,620\nhigher the priority number is the one\nthat takes the preemptive state.\n\n519\n00:27:10,620 --> 00:27:13,810\nWe have to have at least at standby,\nwith a group number and\n\n520\n00:27:13,810 --> 00:27:15,280\nthe word preemption on both routers.\n\n521\n00:27:16,910 --> 00:27:17,940\nSo make sure we do verify.\n\n522\n00:27:20,080 --> 00:27:20,860\n>> Yeah, and show standby.\n\n523\n00:27:20,860 --> 00:27:21,880\nThat was the command he was using.\n\n524\n00:27:21,880 --> 00:27:22,980\n>> Yeah show stand by.\n\n525\n00:27:22,980 --> 00:27:24,300\nThere you go.\n\n526\n00:27:24,300 --> 00:27:26,740\n>> All right.\nNow that is HSRP.\n\n527\n00:27:26,740 --> 00:27:27,270\nRight.\n\n528\n00:27:27,270 --> 00:27:28,200\nPretty straight forward.\n\n529\n00:27:28,200 --> 00:27:30,160\nPretty easy to go with.\n\n530\n00:27:30,160 --> 00:27:33,130\nWe got two other protocols\nthat we want to talk about.\n\n531\n00:27:33,130 --> 00:27:37,805\nVRRP and GLBP, but looking at the clock,\nwe're kind of running low on minutes.\n\n532\n00:27:37,805 --> 00:27:39,685\nSo why don't we stop here and\ntake a break.\n\n533\n00:27:39,685 --> 00:27:41,725\nAnd when we get back,\nwe'll jump into VRRP.\n\n534\n00:27:41,725 --> 00:27:42,585\nSound good, Ronnie?\n\n535\n00:27:42,585 --> 00:27:43,285\n>> Sounds great.\n\n536\n00:27:43,285 --> 00:27:43,875\n>> All right.\n\n537\n00:27:43,875 --> 00:27:45,015\nLadies and gentlemen, stay tuned.\n\n538\n00:27:45,015 --> 00:27:45,925\nWe'll be back after this.\n\n539\n00:27:45,925 --> 00:27:53,788\n[MUSIC]\n\n540\n00:27:53,788 --> 00:27:56,130\nWelcome back everybody.\n\n541\n00:27:56,130 --> 00:28:01,690\nSo in the last segment we talked about\nHSRP, the Cisco proprietary redundancy\n\n542\n00:28:01,690 --> 00:28:04,460\nprotocol, I'm getting too many\nbig words in one sentence.\n\n543\n00:28:04,460 --> 00:28:07,440\nSo anyhow, we covered that and\nwe got a chance to see how it worked.\n\n544\n00:28:07,440 --> 00:28:11,100\nThis time we're gonna take a look\nat another one called VRRP.\n\n545\n00:28:11,100 --> 00:28:15,465\n>> Yeah, the advantage of VRRP for\nus is that it's open source.\n\n546\n00:28:15,465 --> 00:28:18,820\nAnd that means that we can run it\non more than just Cisco routers.\n\n547\n00:28:18,820 --> 00:28:21,250\nAnd so\nyou may actually go into an environment,\n\n548\n00:28:21,250 --> 00:28:22,810\nwhich you don't have a choice.\n\n549\n00:28:22,810 --> 00:28:24,440\nIn other words,\nyou inherited that environment,\n\n550\n00:28:24,440 --> 00:28:25,560\ncuz you got hired at a company.\n\n551\n00:28:25,560 --> 00:28:28,210\nAnd they may have other\nrouters besides Cisco, but\n\n552\n00:28:28,210 --> 00:28:32,500\nyou still need to actually address\nthe same issues that we just talked about.\n\n553\n00:28:32,500 --> 00:28:36,390\nSo you won't be able to use the HSRP\nin that particular environment.\n\n554\n00:28:36,390 --> 00:28:41,350\nSo for us here, we're actually very,\nvery fortunate at this point to have\n\n555\n00:28:41,350 --> 00:28:44,630\nsomething that does the same thing but\nacross multiple platforms.\n\n556\n00:28:44,630 --> 00:28:49,630\n>> Yeah it's pretty cool and\nthere's this whole legal debate that's\n\n557\n00:28:49,630 --> 00:28:54,760\ngoing on where Cisco created HSRP and\nthey created it first, and\n\n558\n00:28:54,760 --> 00:29:00,430\nthen the VRRP standard came out later and\nit's really similar to HSRP.\n\n559\n00:29:00,430 --> 00:29:02,880\nAnd Cisco says well,\nwe got this copyrighted, and so\n\n560\n00:29:02,880 --> 00:29:05,430\nthere's a whole like legal thing, but\n\n561\n00:29:05,430 --> 00:29:10,610\nin the meantime Cisco does support it on\nnot all, but on some of their equipment.\n\n562\n00:29:10,610 --> 00:29:14,320\nAnd it's really just an open\nsource version of HSRP.\n\n563\n00:29:14,320 --> 00:29:18,430\nNow VRRP stands for\nthe Virtual Router Redundancy Protocol.\n\n564\n00:29:18,430 --> 00:29:22,450\nAnd it works,\nI mean it's really identical, right?\n\n565\n00:29:22,450 --> 00:29:28,390\nSo if I go back to my diagram,\nbasically with VRRP you\n\n566\n00:29:28,390 --> 00:29:33,375\ncluster two routers together by creating a\nshared IP that can bounce between the two.\n\n567\n00:29:33,375 --> 00:29:35,240\nRight?\nAnd there's a shared MAC address,\n\n568\n00:29:35,240 --> 00:29:36,860\nit can bounce between the two.\n\n569\n00:29:36,860 --> 00:29:39,155\nShould sound familiar\nbecause it basically is.\n\n570\n00:29:39,155 --> 00:29:41,500\n>> [LAUGH]\n>> And the cool part about this is,\n\n571\n00:29:41,500 --> 00:29:43,910\nwhen it comes to the configuration of it\n>> Yeah.\n\n572\n00:29:43,910 --> 00:29:47,650\n>> If we go back to our configuration\nexample from earlier, right?\n\n573\n00:29:47,650 --> 00:29:49,360\nHere's where we configured HSRP.\n\n574\n00:29:50,460 --> 00:29:53,730\nAll you do,\nis you take anywhere there's the word\n\n575\n00:29:53,730 --> 00:29:54,960\nstandby\n>> [LAUGH]\n\n576\n00:29:54,960 --> 00:29:56,240\n>> And replace it with VRRP.\n\n577\n00:29:56,240 --> 00:30:00,990\nThe configuration commands are exactly\nthe same except instead of standby,\n\n578\n00:30:00,990 --> 00:30:02,815\nyou say VRRP, right?\n\n579\n00:30:02,815 --> 00:30:05,655\nSo let's go and see that in action.\n\n580\n00:30:08,775 --> 00:30:11,315\nSo I'm gonna start by getting\nan interface, fa0/0, and\n\n581\n00:30:11,315 --> 00:30:15,715\nI'm gonna say no, standby 1.\n\n582\n00:30:15,715 --> 00:30:16,347\nRight?\nAnd\n\n583\n00:30:16,347 --> 00:30:20,975\nthat's just gonna get rid of the whole\nstandby configuration, right?\n\n584\n00:30:20,975 --> 00:30:21,905\nSo that wipes that out.\n\n585\n00:30:21,905 --> 00:30:23,615\nAnd I'll do the same\nthing over on router two.\n\n586\n00:30:26,370 --> 00:30:30,688\nSo we're just gonna toast the whole\nHSRP environment, so that's gone.\n\n587\n00:30:30,688 --> 00:30:32,091\nAll right?\n\n588\n00:30:32,091 --> 00:30:37,950\nAnd then basically, we repeat\nwhat we did before, so I can come\n\n589\n00:30:39,240 --> 00:30:44,691\nin and I can say VRRP 1, IP 192.168.0.3.\n\n590\n00:30:44,691 --> 00:30:45,191\nVRRP 1.\n\n591\n00:30:47,030 --> 00:30:50,320\n>> There you go.\n\n592\n00:30:50,320 --> 00:30:53,060\n>> Preempt VRRP 1 priority 150.\n\n593\n00:30:53,060 --> 00:30:57,930\nAll right, and\nwe'll see it goes through it's states.\n\n594\n00:30:57,930 --> 00:31:02,912\nNow a lot of the states have different\nnames and so instead of listen, and\n\n595\n00:31:02,912 --> 00:31:07,920\nspeak, and standby and active,\nyou've got backup and master.\n\n596\n00:31:07,920 --> 00:31:12,278\nSo backup would be the standby in HSRP and\nmaster would be the active in HSRP.\n\n597\n00:31:12,278 --> 00:31:12,970\n>> VRRP.\n\n598\n00:31:12,970 --> 00:31:13,662\n>> Yeah.\n\n599\n00:31:13,662 --> 00:31:15,410\n>> [LAUGH]\n>> VRRP.\n\n600\n00:31:15,410 --> 00:31:16,970\nWhatever.\nWhatever protocol it is\n\n601\n00:31:16,970 --> 00:31:18,210\nthat we're talking.\n\n602\n00:31:18,210 --> 00:31:19,400\nSo there we go.\n\n603\n00:31:19,400 --> 00:31:22,340\nAnd now I'm just gonna do the same\nthing over on router two.\n\n604\n00:31:22,340 --> 00:31:27,430\nSo, I'll say VRRP 1 IP 192.168.0.3 and\nhere I'll just say VRRP 1 preempt.\n\n605\n00:31:29,070 --> 00:31:33,800\nBut, I'm not gonna set a priority\non this one, this one will go with\n\n606\n00:31:33,800 --> 00:31:38,270\nthe default priority and we'll see that\nthis one's coming up and going back up.\n\n607\n00:31:38,270 --> 00:31:42,330\nNow, one thing I will say about VRRP,\nit is a little faster.\n\n608\n00:31:42,330 --> 00:31:44,340\nIt seems to make decisions faster.\n\n609\n00:31:44,340 --> 00:31:45,830\nHSRP, you can tune it.\n\n610\n00:31:45,830 --> 00:31:49,140\nYou can shorten its time out values and\nstuff and make it faster.\n\n611\n00:31:49,140 --> 00:31:51,342\nBut the default is not\nreally all that fast.\n\n612\n00:31:51,342 --> 00:31:55,374\nIt takes like, 10 to 12 seconds for\nfail over in a lot of cases,\n\n613\n00:31:55,374 --> 00:31:58,186\nwhereas VRRP defaults\nto smaller intervals.\n\n614\n00:31:58,186 --> 00:32:01,094\nIf I do a Now instead of show standby,\nagain,\n\n615\n00:32:01,094 --> 00:32:05,800\nreplacing standby with VRRP,\nwe would say see show VRRP.\n\n616\n00:32:05,800 --> 00:32:10,190\nAnd here I can see, this one has a state\nof backup, and the master router is .1.\n\n617\n00:32:10,190 --> 00:32:13,640\nAnd if I jump over to router one, oops,\n\n618\n00:32:13,640 --> 00:32:17,520\n[LAUGH] can't even get\nthe protocols right.\n\n619\n00:32:17,520 --> 00:32:18,410\nThere we go.\n\n620\n00:32:18,410 --> 00:32:19,980\nI can see the virtual IP is .3.\n\n621\n00:32:19,980 --> 00:32:25,800\nThis one is the master router and\nit's up and it's happy.\n\n622\n00:32:25,800 --> 00:32:29,770\nNow it doesn't tell me about the backup\nand there's a reason for that.\n\n623\n00:32:29,770 --> 00:32:32,140\nIn VRRP you can have\nmore than one back up.\n\n624\n00:32:32,140 --> 00:32:34,070\nI can have three, five, ten backups.\n\n625\n00:32:34,070 --> 00:32:36,110\nI don't know that there\nis actually a limit but\n\n626\n00:32:36,110 --> 00:32:39,880\nyou can have more than one backup and\nit's perfectly happy with that.\n\n627\n00:32:39,880 --> 00:32:43,520\nHSRP can sort of do that but\nit wasn't really designed to.\n\n628\n00:32:43,520 --> 00:32:45,000\nThere's usually not a lot of need for it.\n\n629\n00:32:45,000 --> 00:32:47,890\nIf you need more than two\nrouters then you should be doing\n\n630\n00:32:47,890 --> 00:32:49,400\nbetter network redundancy anyway.\n\n631\n00:32:49,400 --> 00:32:51,420\nJust on layer two and so on.\n\n632\n00:32:51,420 --> 00:32:54,033\nSo, or buying better equipment.\n\n633\n00:32:54,033 --> 00:32:57,400\n[LAUGH] So the configuration\nis pretty straightforward.\n\n634\n00:32:57,400 --> 00:32:58,670\nLet's see a fail over.\n\n635\n00:32:58,670 --> 00:32:59,470\n>> Okay.\n>> All right.\n\n636\n00:32:59,470 --> 00:33:03,310\nSo right now if I'm on my host and\n\n637\n00:33:03,310 --> 00:33:07,450\nI try and ping out to the Internet,\nright, I'm able to get out.\n\n638\n00:33:07,450 --> 00:33:10,170\nI'm using .3 as my gateway.\n\n639\n00:33:10,170 --> 00:33:16,028\nAnd if i do that trace route, all right, I\ncan see that I'm going through router one.\n\n640\n00:33:16,028 --> 00:33:18,020\nAll right.\nThen I'll just go cause router one to\n\n641\n00:33:18,020 --> 00:33:18,760\nhave a failure.\n\n642\n00:33:20,810 --> 00:33:25,366\nSo router one is going to have a failure\nand over here I can see router two, yeah,\n\n643\n00:33:25,366 --> 00:33:27,069\nit became a master very fast.\n\n644\n00:33:28,560 --> 00:33:34,000\nAnd back here on the host side, if I try\nand ping out to the Internet, there I go,\n\n645\n00:33:34,000 --> 00:33:38,400\nand if I do a trace route, I can see\nI'm now going through .2 instead of .1.\n\n646\n00:33:38,400 --> 00:33:41,827\nVery, very fast fail.\n\n647\n00:33:41,827 --> 00:33:43,540\nAll right?\n\n648\n00:33:43,540 --> 00:33:44,590\nSo, hard to configure?\n\n649\n00:33:44,590 --> 00:33:46,344\nNo, really I can cheat.\n\n650\n00:33:46,344 --> 00:33:46,884\nRight.\n\n651\n00:33:46,884 --> 00:33:52,170\nI can go and\ntake this whole section, right, and\n\n652\n00:33:52,170 --> 00:33:57,450\nwhen it comes to the VRRP configuration,\n\n653\n00:33:57,450 --> 00:34:02,030\nI can just come in here and wherever I see\nthat word standby, change it for VRRP.\n\n654\n00:34:02,030 --> 00:34:06,150\n>> And that's pretty much it.\n\n655\n00:34:07,740 --> 00:34:12,410\n>> Yeah, it is kind of nice that you\ndon't have to learn anything too crazy.\n\n656\n00:34:12,410 --> 00:34:15,715\nIt is literally the same commands.\n\n657\n00:34:15,715 --> 00:34:18,640\nRight?\n>> And there's also a whole bunch of other\n\n658\n00:34:18,640 --> 00:34:22,320\nways that you can tweak this thing to\nmake it work much more to your favor.\n\n659\n00:34:22,320 --> 00:34:24,220\nBut at this point,\nthis is all we need to know.\n\n660\n00:34:24,220 --> 00:34:26,660\nBe able to recognize it,\nbe able to actually understand it.\n\n661\n00:34:26,660 --> 00:34:31,110\nThere is a difference between HSRP and\nVRRP for us.\n\n662\n00:34:31,110 --> 00:34:31,820\nThat's where we're gonna be.\n\n663\n00:34:32,830 --> 00:34:35,528\n>> Now the third one what we want\nto talk about is the most advanced.\n\n664\n00:34:35,528 --> 00:34:36,446\nAll right?\n\n665\n00:34:36,446 --> 00:34:40,790\nIt is called GLBP, let me go down\nto the bottom of my notes here.\n\n666\n00:34:40,790 --> 00:34:49,300\nGLBP which is the Gateway Load\nBalancing Protocol, all right.\n\n667\n00:34:49,300 --> 00:34:51,370\nGLBP is also Cisco proprietary.\n\n668\n00:34:51,370 --> 00:34:53,170\nYou know,\nlet's add that to the notes here Ronnie.\n\n669\n00:34:53,170 --> 00:34:58,180\nSo I'm going to say, Cisco proprietary.\n\n670\n00:34:58,180 --> 00:34:59,470\nThere we go.\n\n671\n00:34:59,470 --> 00:35:02,793\nSo that's HSRP,\n\n672\n00:35:02,793 --> 00:35:07,670\nwhich is the hot standby.\n\n673\n00:35:07,670 --> 00:35:09,028\n>> Routing.\n\n674\n00:35:09,028 --> 00:35:10,572\n>> Redundancy.\n\n675\n00:35:10,572 --> 00:35:11,874\n>> Redundancy, yup.\n\n676\n00:35:11,874 --> 00:35:12,917\nProtocol.\n\n677\n00:35:12,917 --> 00:35:16,380\n>> Redundancy [LAUGH] protocol.\n\n678\n00:35:16,380 --> 00:35:19,140\nAnd it's actually a hot standby-router.\n\n679\n00:35:19,140 --> 00:35:21,030\nThat's why it doesn't need a letter.\n\n680\n00:35:21,030 --> 00:35:23,120\nSo it's Cisco proprietary.\n\n681\n00:35:23,120 --> 00:35:28,240\nVRRP is an open standard and\nnow we get to GLBP.\n\n682\n00:35:29,700 --> 00:35:32,430\nNow this is another one where\nthe configuration's not so hard, but\n\n683\n00:35:32,430 --> 00:35:34,790\nthe concept is different.\n\n684\n00:35:34,790 --> 00:35:36,010\nSo let me get into that.\n\n685\n00:35:38,440 --> 00:35:39,200\nThere we go.\n\n686\n00:35:39,200 --> 00:35:40,220\nAll right.\n\n687\n00:35:40,220 --> 00:35:44,470\nSo in the other examples,\nwhat we were saying was hey,\n\n688\n00:35:44,470 --> 00:35:46,650\nlet's cluster these guys together.\n\n689\n00:35:46,650 --> 00:35:49,630\nSomebody goes active and\nsomebody goes standby.\n\n690\n00:35:49,630 --> 00:35:50,590\nAll right.\n\n691\n00:35:50,590 --> 00:35:56,660\nSo if router one is active and\nrouter two is standby, okay,\n\n692\n00:35:56,660 --> 00:36:01,690\nboth routers are geared up to answer for\nthat shared IP but only one is active.\n\n693\n00:36:01,690 --> 00:36:05,350\nAnd so\nthat means that all of my internal hosts\n\n694\n00:36:05,350 --> 00:36:07,528\nare going to pass through that one router.\n\n695\n00:36:07,528 --> 00:36:08,712\nAll right?\n\n696\n00:36:08,712 --> 00:36:12,520\nThe other router is a hot standby,\nit's just sitting there.\n\n697\n00:36:12,520 --> 00:36:13,880\nNot moving any traffic.\n\n698\n00:36:13,880 --> 00:36:19,145\nSo if I've got, let's say, two T1 lines,\nso I've got a T1 line up here and\n\n699\n00:36:19,145 --> 00:36:24,178\na T1 line down here, well,\nI'm kind of wasting 50% of my bandwidth.\n\n700\n00:36:24,178 --> 00:36:25,720\nAll right?\n\n701\n00:36:25,720 --> 00:36:29,300\nSo not necessarily the most\nideal situation, and VRRP and\n\n702\n00:36:29,300 --> 00:36:30,320\nHSRP are both like that.\n\n703\n00:36:30,320 --> 00:36:35,880\nNow, we could configure two standby\ngroups, or two VRRP groups and have\n\n704\n00:36:35,880 --> 00:36:40,190\ntwo shared IPs and set half my clients\nto use one and half to use the other.\n\n705\n00:36:40,190 --> 00:36:44,980\nThere's ways to fenagle it where you can\nuse both lines and have that fail over.\n\n706\n00:36:44,980 --> 00:36:47,860\nBut HSRP and VRRP just by default,\n\n707\n00:36:47,860 --> 00:36:50,420\nby the way they're built,\naren't designed really to do that.\n\n708\n00:36:50,420 --> 00:36:52,130\nThey're designed to have one active,\n\n709\n00:36:52,130 --> 00:36:54,182\neverything else is just sitting\nthere passive not being used.\n\n710\n00:36:54,182 --> 00:36:54,790\nAll right?\n\n711\n00:36:54,790 --> 00:36:59,060\nAnd if you've got a huge disparity on your\nlines, if you've got 40 megabit up here,\n\n712\n00:36:59,060 --> 00:37:02,356\nand 1 megabit down here, then you're not\nreally worried about load balancing.\n\n713\n00:37:02,356 --> 00:37:03,171\n>> Right.\n\n714\n00:37:03,171 --> 00:37:04,477\n>> All right.\n\n715\n00:37:04,477 --> 00:37:08,030\nBut let's say that both of those\nare 40 megabit connections.\n\n716\n00:37:08,030 --> 00:37:09,790\nAnd I want to take\nadvantage of both of them.\n\n717\n00:37:09,790 --> 00:37:12,380\nI want to use 80 megabit of bandwidth.\n\n718\n00:37:12,380 --> 00:37:14,720\nAnd if there's a failure I\njust drop down to 40 megs.\n\n719\n00:37:14,720 --> 00:37:15,960\nWhatever lines up.\n\n720\n00:37:15,960 --> 00:37:19,110\nWell, that's where GLBP comes in.\n\n721\n00:37:19,110 --> 00:37:22,230\nGLBP, the gateway load balancing protocol,\n\n722\n00:37:22,230 --> 00:37:26,090\nit will leverage both routers\nby load balancing across them.\n\n723\n00:37:26,090 --> 00:37:28,013\nSplitting the traffic up 50/50.\n\n724\n00:37:28,013 --> 00:37:28,641\nAll right?\n\n725\n00:37:28,641 --> 00:37:31,722\nIt achieves that through\na neat little process.\n\n726\n00:37:31,722 --> 00:37:32,640\nAll right?\n\n727\n00:37:32,640 --> 00:37:36,482\nYou come up with a shared\nIP just like in HSRP.\n\n728\n00:37:36,482 --> 00:37:37,600\nAll right?\n\n729\n00:37:37,600 --> 00:37:39,720\nThe difference is, in HSRP,\n\n730\n00:37:39,720 --> 00:37:43,950\nwhen we created that shared IP,\nit also created a shared MAC address.\n\n731\n00:37:43,950 --> 00:37:48,830\nAnd that shared MAC address would fail\nover between the two systems as needed.\n\n732\n00:37:48,830 --> 00:37:49,840\nOkay?\n\n733\n00:37:49,840 --> 00:37:57,600\nWith GLBP, you create a shared IP address,\nbut not a shared MAC address.\n\n734\n00:37:57,600 --> 00:38:01,420\nEach router maintains a different\nMAC address for that IP.\n\n735\n00:38:02,450 --> 00:38:05,820\nAnd so as clients send out\ntheir ARP broadcast right,\n\n736\n00:38:05,820 --> 00:38:12,330\nif they say hey who is 192.168.0.3\nthey send out that broadcast, right.\n\n737\n00:38:12,330 --> 00:38:17,100\nRouter one will respond with\nit's virtual MAC address.\n\n738\n00:38:17,100 --> 00:38:20,920\nAnd router two will respond with\nthe other virtual MAC address.\n\n739\n00:38:20,920 --> 00:38:23,198\nAnd so,\nhalf of your clients will get one and\n\n740\n00:38:23,198 --> 00:38:26,100\nthe other half of the clients\nwill get the other.\n\n741\n00:38:26,100 --> 00:38:29,330\nAnd so\nyour clients divide up amongst the two.\n\n742\n00:38:29,330 --> 00:38:34,740\nThen, if one node fails the other node\nwill just take over that MAC address\n\n743\n00:38:34,740 --> 00:38:38,690\nin addition to it's own, so now it'll have\nboth, and everybody gets routed through.\n\n744\n00:38:38,690 --> 00:38:42,790\nSo it's actually doing more of a,\nit's almost like a proxy scenario, right?\n\n745\n00:38:42,790 --> 00:38:46,860\nWhere the clients use the MAC addresses\nto steer them in the right direction.\n\n746\n00:38:46,860 --> 00:38:52,560\nSo, with GLBP, both of your systems are\nactive and moving traffic in real time.\n\n747\n00:38:54,710 --> 00:38:56,200\nNow the key thing to remember about GLBP,\n\n748\n00:38:56,200 --> 00:39:01,350\nit is only supported on very,\nvery few systems.\n\n749\n00:39:01,350 --> 00:39:01,928\nAll right?\n\n750\n00:39:01,928 --> 00:39:05,503\nThe Cisco 6500 switches,\nthe really big expensive switches,\n\n751\n00:39:05,503 --> 00:39:09,090\nthey support it if you've got\na routing supervisor module in them.\n\n752\n00:39:09,090 --> 00:39:13,139\nAnd the Cisco 6700 series routers,\nthey'll do GLBP.\n\n753\n00:39:13,139 --> 00:39:13,933\nAll right?\n\n754\n00:39:13,933 --> 00:39:16,745\nBut the 3800s, the 2900s, the 2800s,\n\n755\n00:39:16,745 --> 00:39:20,819\nthe really common routers, they might\nbe expensive but they don't do GLBP.\n\n756\n00:39:20,819 --> 00:39:21,750\n>> Yeah.\n>> All right?\n\n757\n00:39:23,180 --> 00:39:24,960\nSo it is only on the higher end equipment.\n\n758\n00:39:26,540 --> 00:39:29,650\nFortunately the configuration\nis pretty straight forward.\n\n759\n00:39:29,650 --> 00:39:34,290\nIt's another one of those\nwhere we can go in and\n\n760\n00:39:34,290 --> 00:39:39,250\nbasically just swap out where we say VRRP,\nor HSRP, or standby.\n\n761\n00:39:39,250 --> 00:39:40,048\nSwap that for GLBP.\n\n762\n00:39:40,048 --> 00:39:41,043\nAll right,\n\n763\n00:39:41,043 --> 00:39:45,400\nthe only thing is that we really don't\nneed to set preemption and priorities.\n\n764\n00:39:45,400 --> 00:39:48,130\nBecause, well they're\n>> They're load balancing.\n\n765\n00:39:48,130 --> 00:39:48,970\n>> Yeah.\nThey're load balancing,\n\n766\n00:39:48,970 --> 00:39:49,920\nso who cares about that stuff?\n\n767\n00:39:49,920 --> 00:39:50,490\n>> Yeah.\n\n768\n00:39:50,490 --> 00:39:53,180\n>> So I'm gonna come up here and\njust copy one of these.\n\n769\n00:39:57,719 --> 00:40:03,522\nAnd then we'll take it And\nsay if we want to configure GLBP,\n\n770\n00:40:03,522 --> 00:40:07,600\nwe basically create a shared IP address.\n\n771\n00:40:08,690 --> 00:40:13,170\nBut then, we don't worry about\npreemption and all that.\n\n772\n00:40:17,190 --> 00:40:18,930\nAnd we can use show GLBP.\n\n773\n00:40:20,040 --> 00:40:22,280\nFor that, all right?\n\n774\n00:40:22,280 --> 00:40:25,610\nSo, the configuration, even though\nthis is a higher end technology,\n\n775\n00:40:25,610 --> 00:40:27,525\nthe configuration's actually easier.\n\n776\n00:40:27,525 --> 00:40:30,280\n>> Mm-hm.\n>> There's just not that much to it.\n\n777\n00:40:30,280 --> 00:40:33,120\nThere are some fancier bells and whistles\nyou can do, but for the most part,\n\n778\n00:40:33,120 --> 00:40:34,270\nthat's about it.\n\n779\n00:40:34,270 --> 00:40:38,817\nLet me switch over here and\nI'm gonna turn off VRRP.\n\n780\n00:40:45,650 --> 00:40:50,960\nTurn interface back on, all right.\n\n781\n00:40:50,960 --> 00:40:52,190\nSo, we're just gonna kill VRRP.\n\n782\n00:40:55,250 --> 00:40:56,740\nMake sure all those commands are gone.\n\n783\n00:41:00,970 --> 00:41:04,340\nThere we go, and now we'll set up GLBP.\n\n784\n00:41:04,340 --> 00:41:09,180\nSo on router 1, I'll say GLBP 1,\nIP 129.168.0.3.\n\n785\n00:41:09,180 --> 00:41:13,929\nAnd on router 2, GLBP 1 IP\n\n786\n00:41:13,929 --> 00:41:20,544\n192.168.0.3 all right.\n\n787\n00:41:20,544 --> 00:41:23,690\nNow that's set GLBP is up.\n\n788\n00:41:23,690 --> 00:41:25,330\nWell in theory it's up right.\n\n789\n00:41:25,330 --> 00:41:30,200\nWe'll get a lot of messages about,\nyour neighbor detected, active,\n\n790\n00:41:30,200 --> 00:41:31,610\nstandby whatever.\n\n791\n00:41:31,610 --> 00:41:35,550\nAnd that's because they're all active, so\nthey all just come up and participate.\n\n792\n00:41:35,550 --> 00:41:37,540\nThere we go I did finally get one.\n\n793\n00:41:37,540 --> 00:41:41,090\nSo, this guy switched from speak to\nactive so he's up and he's happy.\n\n794\n00:41:41,090 --> 00:41:43,250\nAnd router 2 should follow.\n\n795\n00:41:43,250 --> 00:41:49,280\nLet's give it a second, and they come\nup and then it starts doing its job.\n\n796\n00:41:49,280 --> 00:41:54,480\nThere it goes, and notice this one\nwent from listen to active also.\n\n797\n00:41:54,480 --> 00:41:56,120\nThey're both active.\n\n798\n00:41:58,940 --> 00:42:03,015\nAnd if I do a show GLBP here,\nI'm on router 2, right.\n\n799\n00:42:03,015 --> 00:42:06,220\nAnd why is it saying standby?\n\n800\n00:42:06,220 --> 00:42:07,992\nI might not have given it enough time.\n\n801\n00:42:07,992 --> 00:42:12,470\nLet's see, what state is standby?\n\n802\n00:42:14,540 --> 00:42:17,600\nSo anyhow, I can see right here there are\ntwo forwarders, but only one is active.\n\n803\n00:42:17,600 --> 00:42:19,240\nI may just not have given\nit enough time yet.\n\n804\n00:42:19,240 --> 00:42:20,340\nYeah, state is listen.\n\n805\n00:42:20,340 --> 00:42:22,170\nSo, it's not happy yet.\n\n806\n00:42:22,170 --> 00:42:25,340\nSometimes it takes a second for\nthem to stabilize and come up.\n\n807\n00:42:25,340 --> 00:42:29,830\nBut notice, how we've got this shared IP,\n192.168.0.3.\n\n808\n00:42:29,830 --> 00:42:32,840\nBut, see how we've got these\ndifferent Mac addresses in play.\n\n809\n00:42:32,840 --> 00:42:36,740\nHere's one that's being used for\nthe share, and\n\n810\n00:42:36,740 --> 00:42:38,360\nthen it's gonna generate it's own.\n\n811\n00:42:38,360 --> 00:42:41,780\nThe Mac addresses are important.\n\n812\n00:42:41,780 --> 00:42:46,260\nHere's our Mac address on router 2, and\n\n813\n00:42:46,260 --> 00:42:51,210\nhere's one that was learnt,\na strange word to choose there.\n\n814\n00:42:51,210 --> 00:42:53,550\n>> [LAUGH]\n>> Learned from the other system.\n\n815\n00:42:53,550 --> 00:42:55,335\nAnd so we've got it right there.\n\n816\n00:42:55,335 --> 00:42:57,230\n>> [LAUGH]\n>> It's bizarre.\n\n817\n00:42:57,230 --> 00:43:02,320\nBut yeah, we're picking up from the other\nsystem and we know it, we need to know it.\n\n818\n00:43:02,320 --> 00:43:06,220\nBecause, if the other system fails we need\nto take over that Mac address, so that our\n\n819\n00:43:06,220 --> 00:43:08,690\nclients that have already resolved\nit will still be able to get there.\n\n820\n00:43:08,690 --> 00:43:12,940\nBecause the ARP cache on a PC,\nit can take five minutes to clear.\n\n821\n00:43:12,940 --> 00:43:15,600\nSo, you don't want somebody to\ngo five minutes before failover,\n\n822\n00:43:15,600 --> 00:43:17,701\nwe wanna take charge of that\nMac address right away.\n\n823\n00:43:19,780 --> 00:43:21,310\nAll right.\n\n824\n00:43:21,310 --> 00:43:25,710\nSo now, let me just make sure it's happy.\n\n825\n00:43:27,220 --> 00:43:28,770\n>> There are two forwarders.\n\n826\n00:43:28,770 --> 00:43:31,920\n>> There's two forwards, it's still\nsaying only one is active, so I'm gonna.\n\n827\n00:43:33,440 --> 00:43:35,020\nNot sure what's going on there.\n\n828\n00:43:35,020 --> 00:43:42,280\nIt says it's active.\n\n829\n00:43:42,280 --> 00:43:45,220\nThere are two forwarders but\none is active.\n\n830\n00:43:47,220 --> 00:43:48,190\nAll right, sorry.\n\n831\n00:43:48,190 --> 00:43:49,320\nI'm forgetting something.\n\n832\n00:43:49,320 --> 00:43:51,090\n>> Yeah.\n>> Notice here I've got forwarder 1,\n\n833\n00:43:51,090 --> 00:43:55,650\nand it's active, and\nI've got forwarder 2, and it's listen.\n\n834\n00:43:55,650 --> 00:43:57,235\nEach router is a forwarder.\n\n835\n00:43:57,235 --> 00:43:57,800\n>> Mm-hm.\n\n836\n00:43:57,800 --> 00:44:01,250\n>> This one is in listen for\nthe second forwarder, right?\n\n837\n00:44:01,250 --> 00:44:03,350\n>> Yeah.\n>> Let's go back to router 2.\n\n838\n00:44:03,350 --> 00:44:08,050\nOn router 2, forwarder 1 is listed,\nforwarder 2 is active, right?\n\n839\n00:44:08,050 --> 00:44:09,490\nSo they're opposites.\n\n840\n00:44:09,490 --> 00:44:13,710\nAnd that's because router 1 is\nforwarder 1, router 2 is forwarder 2.\n\n841\n00:44:13,710 --> 00:44:16,890\nIf one of them fails,\nthe other will go active for both, right?\n\n842\n00:44:16,890 --> 00:44:18,660\nSo it's the same IP on\nthese two forwarders,\n\n843\n00:44:18,660 --> 00:44:21,080\nthat's why we're seeing\nthat different value.\n\n844\n00:44:21,080 --> 00:44:24,360\nSo there's two forwarders, that means\nthere's two routers that are going.\n\n845\n00:44:24,360 --> 00:44:26,440\nWe're only active for one of them.\n\n846\n00:44:26,440 --> 00:44:28,510\nIf there's a failure,\nwe'll become active for both.\n\n847\n00:44:28,510 --> 00:44:29,410\n>> Yep.\n\n848\n00:44:29,410 --> 00:44:32,610\n>> Let's go test and\nsee whether this is all working, right?\n\n849\n00:44:32,610 --> 00:44:38,488\nOn my host, I'm gonna do a clear\nARP just to wipe that out.\n\n850\n00:44:45,609 --> 00:44:50,733\nAll right, and then I'm do one of\nthose pings out to the internet,\n\n851\n00:44:50,733 --> 00:44:53,950\nso I can ping it and\nI'll do a trace route.\n\n852\n00:44:53,950 --> 00:44:55,650\nNow, the trace route, where'd it go?\n\n853\n00:44:56,760 --> 00:44:59,060\nI got click Happy didn't I?\n\n854\n00:44:59,060 --> 00:45:00,090\n>> Yep.\n>> Went a little crazy.\n\n855\n00:45:00,090 --> 00:45:00,930\nThere we go.\n\n856\n00:45:00,930 --> 00:45:02,480\nSo, I'm gonna go trace\nroute out to the Internet,\n\n857\n00:45:02,480 --> 00:45:04,710\nso it's trying to find its way out there.\n\n858\n00:45:04,710 --> 00:45:06,970\nAnd I can see that I\nwent through router 1.\n\n859\n00:45:06,970 --> 00:45:11,730\nRouter 1 is the one that I chose and\nif I do a show ARP,\n\n860\n00:45:11,730 --> 00:45:17,617\nI can see 192.168.0.3 is bound to this Mac\naddress, so it ends in 01 01, all right?\n\n861\n00:45:18,915 --> 00:45:21,755\nIf I go to router 1 and I look.\n\n862\n00:45:21,755 --> 00:45:24,385\nHere I've got forwarder number 1 and 0101.\n\n863\n00:45:24,385 --> 00:45:26,965\nThere's that Mac address and\nit's active on this one.\n\n864\n00:45:26,965 --> 00:45:28,665\nAll right?\n>> Mm-hm.\n\n865\n00:45:28,665 --> 00:45:30,822\n>> If I look on router 2, here's 0101.\n\n866\n00:45:30,822 --> 00:45:35,402\nIt was learned from the other system,\nand it's in a listen state.\n\n867\n00:45:35,402 --> 00:45:37,052\nSo, that's the Mac address I got.\n\n868\n00:45:37,052 --> 00:45:40,492\nOther clients may get this\nMac address down here.\n\n869\n00:45:40,492 --> 00:45:42,950\nBut, I already got this one.\n\n870\n00:45:42,950 --> 00:45:47,193\nIf we have a failure, so\nlet's generate a failure on router 1.\n\n871\n00:45:50,430 --> 00:45:54,077\nAll right, so\nI'm going to generate a failure, and so\n\n872\n00:45:54,077 --> 00:45:57,660\nI can see my state changes\nhere as we drop down to a nit.\n\n873\n00:45:59,140 --> 00:46:01,040\nA nit means it's trying to build up GLBP.\n\n874\n00:46:02,410 --> 00:46:06,250\nAnd if I jump over to router 2,\nI can see that that forwarder,\n\n875\n00:46:06,250 --> 00:46:09,520\nforwarder 1 just went active.\n\n876\n00:46:09,520 --> 00:46:14,190\nAnd if I do GLBP,\n\n877\n00:46:14,190 --> 00:46:19,660\nI can see there's two forwarders and\nwe're now active for both, right?\n\n878\n00:46:19,660 --> 00:46:21,664\nForwarder 1, we're active forward.\n\n879\n00:46:21,664 --> 00:46:24,650\nThe Mac ending in 01, 01.\n\n880\n00:46:24,650 --> 00:46:27,800\nAnd we're active for the other 10102,\nso we're now answering to both.\n\n881\n00:46:29,380 --> 00:46:34,230\nNow the cool part there is if\nI go back to my client, and\n\n882\n00:46:34,230 --> 00:46:37,200\nI'll do a, actually I'm not\ngonna clear my ARP, right?\n\n883\n00:46:37,200 --> 00:46:42,260\nNow, so that my ARP still shows 0101, and\nif I try to ping out to the internet.\n\n884\n00:46:43,920 --> 00:46:45,040\nAll right, I'm able to get there.\n\n885\n00:46:47,150 --> 00:46:52,680\nIf I do a trace route, there it is,\nI'm now routing through .2 instead, right?\n\n886\n00:46:52,680 --> 00:46:55,460\nMy ARP table is still\nshowing the old Mac spike.\n\n887\n00:46:55,460 --> 00:47:02,313\nClear my ARP table and I try it again, if\nI, let me just change that IP, all right?\n\n888\n00:47:04,818 --> 00:47:08,760\nSee how I'm still getting 0101,\nbecause that is active and it's running.\n\n889\n00:47:08,760 --> 00:47:10,500\nAs far as I'm concerned that's it.\n\n890\n00:47:10,500 --> 00:47:13,148\nAnd if router 1 comes back online.\n\n891\n00:47:16,581 --> 00:47:21,118\nIt's gonna come up and unlike VRRP and\nHSSRP, when it comes up,\n\n892\n00:47:21,118 --> 00:47:23,315\nit's trying to load balance.\n\n893\n00:47:23,315 --> 00:47:25,955\nCan't load balance if all our\nforders are on one router.\n\n894\n00:47:25,955 --> 00:47:29,135\nSo, it'll redistribute and will become\nactive for one of the forders, and\n\n895\n00:47:29,135 --> 00:47:30,785\noff we go.\n\n896\n00:47:30,785 --> 00:47:33,465\nSo, it's an advanced protocol.\n\n897\n00:47:33,465 --> 00:47:37,535\nIt can sound intimidating when you're,\nthis only runs on the 6500, it's big,\n\n898\n00:47:37,535 --> 00:47:40,620\nexpensive, you gotta spend fifty\ngrand to get something like this.\n\n899\n00:47:40,620 --> 00:47:43,200\nBut at the end of the day,\nthe commands are pretty simple.\n\n900\n00:47:43,200 --> 00:47:43,920\n>> Yeah.\n>> It's\n\n901\n00:47:43,920 --> 00:47:47,075\nreally the same as the other protocols,\nwe just swap out some of the terminology.\n\n902\n00:47:47,075 --> 00:47:47,730\n>> Mm-hm.\n\n903\n00:47:47,730 --> 00:47:51,289\n>> Let me get back to\nour little notes here.\n\n904\n00:47:51,289 --> 00:47:54,233\nSo really, we are just swapping that out.\n\n905\n00:47:54,233 --> 00:47:59,858\nChanging HSRP or\nVRRP into GLBP to get that configuration.\n\n906\n00:47:59,858 --> 00:48:03,016\n>> So\nthe differences between the three for us.\n\n907\n00:48:03,016 --> 00:48:07,320\nHSRP, VRRP they essentially switch right?\n\n908\n00:48:07,320 --> 00:48:11,680\nOne is always essentially in stand by,\nand the other one is active.\n\n909\n00:48:11,680 --> 00:48:14,780\nIf the active one goes down,\nthe other one comes back up, and\n\n910\n00:48:14,780 --> 00:48:16,430\nwe are ready to get through.\n\n911\n00:48:16,430 --> 00:48:21,510\nWith GLBP, it is both routers\nare constantly trying to load balance.\n\n912\n00:48:21,510 --> 00:48:23,930\nIf one goes down,\nthe other one will take over.\n\n913\n00:48:23,930 --> 00:48:27,190\nBut when it comes back up,\nit really wants to do the load balancing.\n\n914\n00:48:27,190 --> 00:48:32,020\nSo remember that in terms of the overall\nfunction, when you actually think about,\n\n915\n00:48:32,020 --> 00:48:34,670\nwhat it is that you need to accomplish for\nyour network?\n\n916\n00:48:34,670 --> 00:48:35,200\n>> Yeah.\n\n917\n00:48:35,200 --> 00:48:39,060\nAnd I did not turn on preemption,\nbut you can see in the output here,\n\n918\n00:48:39,060 --> 00:48:43,880\nwhen I did a show GLBP, after router 1\ncame back up, it did go back to active for\n\n919\n00:48:43,880 --> 00:48:44,960\nits forwarder.\n\n920\n00:48:44,960 --> 00:48:48,380\nSo, it basically does preemption,\neven without us turning it on.\n\n921\n00:48:48,380 --> 00:48:51,190\nNow, what if these routers\nhad different bandwidth?\n\n922\n00:48:52,400 --> 00:48:54,306\nYou can adjust what's\ncalled the weighting.\n\n923\n00:48:54,306 --> 00:48:57,260\nThe weighting, the weight of the line.\n\n924\n00:48:57,260 --> 00:49:00,670\nYou can specify it, so that maybe one\nline gets 60% of the traffic, and\n\n925\n00:49:00,670 --> 00:49:02,660\nthe other one gets 40%,\nor something like that.\n\n926\n00:49:02,660 --> 00:49:05,120\nSo you can adjust the weight\nto influence that, so\n\n927\n00:49:05,120 --> 00:49:07,990\nit doesn't have to be\nstraight load balancing.\n\n928\n00:49:07,990 --> 00:49:09,590\nIt's up to you and your environment.\n\n929\n00:49:09,590 --> 00:49:11,140\nObviously, everybody's\ngot different needs.\n\n930\n00:49:11,140 --> 00:49:11,640\n>> Yep.\n\n931\n00:49:12,840 --> 00:49:13,890\nAll right, so\n\n932\n00:49:13,890 --> 00:49:18,370\nas far as our first hop redundancy\nthere's three protocols that we can use.\n\n933\n00:49:18,370 --> 00:49:20,800\nThey all require at least two routers?\n\n934\n00:49:20,800 --> 00:49:24,420\nAnd they allow us to have where\nan entire router can fail, and\n\n935\n00:49:24,420 --> 00:49:29,860\nanother router kicks in, takes over and\noff you go with next to no down time.\n\n936\n00:49:31,230 --> 00:49:33,280\n>> Yep, so great protocols.\n\n937\n00:49:33,280 --> 00:49:36,150\n>> All right, Ronnie I think I'm\ntapped out on first op redundancy.\n\n938\n00:49:36,150 --> 00:49:37,414\nDo you have any other?\n\n939\n00:49:37,414 --> 00:49:39,876\n>> I think we're done on this one.\n\n940\n00:49:39,876 --> 00:49:42,540\n>> Well, we've got a couple\nother topics on this objective.\n\n941\n00:49:42,540 --> 00:49:44,470\nWe've got sys logging\nwhich is really cool.\n\n942\n00:49:44,470 --> 00:49:47,320\nI know we've covered it in other episodes,\nbut we'll cover it again.\n\n943\n00:49:47,320 --> 00:49:49,635\nAnd we've got, what else is on our agenda?\n\n944\n00:49:49,635 --> 00:49:54,220\nSys-log and SNMP, all right, so a couple\nof management protocols to tackle.\n\n945\n00:49:54,220 --> 00:49:57,480\nSo we'll ahead and throw those in, and\nget those wrapped up for this episode.\n\n946\n00:49:57,480 --> 00:50:01,408\nYeah, so stay tuned,\nmore IP services after this break.\n\n947\n00:50:01,408 --> 00:50:09,951\n[MUSIC]\n\n948\n00:50:09,951 --> 00:50:11,720\nAll right, welcome back everybody.\n\n949\n00:50:11,720 --> 00:50:16,600\nSo we pretty much wrapped up router\nredundancy in the last segment.\n\n950\n00:50:16,600 --> 00:50:20,610\nSo now, we're gonna tackle a couple of\nother things that are wrapped up in this\n\n951\n00:50:20,610 --> 00:50:21,610\nsame objective.\n\n952\n00:50:21,610 --> 00:50:27,080\nThe next one is sys logging, and you\nmight ask yourself, well start off with\n\n953\n00:50:27,080 --> 00:50:30,620\nwhat sys logging is, and then we'll talk\nabout why the heck it's in this category.\n\n954\n00:50:30,620 --> 00:50:34,450\nSo, sys logging,\nit's a pretty neat principle, right?\n\n955\n00:50:34,450 --> 00:50:37,600\nYour router is,\nassuming you haven't turned it off,\n\n956\n00:50:37,600 --> 00:50:41,840\nlogging all sort of events while it runs,\nall sorts of activities, all right?\n\n957\n00:50:41,840 --> 00:50:45,280\nBut, if you reboot your router,\nall those logs are wiped out.\n\n958\n00:50:45,280 --> 00:50:47,240\n>> Right.\n>> They're just gone, okay?\n\n959\n00:50:47,240 --> 00:50:50,790\nYou don't have any record of it, and if\na hacker tries to break into your system,\n\n960\n00:50:50,790 --> 00:50:53,420\nthose logs, that's what they're\ngonna target first off.\n\n961\n00:50:53,420 --> 00:50:56,280\nOnce they can clear the logs, they know\nthey can cover their footprints and\n\n962\n00:50:56,280 --> 00:50:58,590\nfrom there they have their\nway with your system.\n\n963\n00:50:58,590 --> 00:51:03,490\nSo, what we need is a way to export\nour log files to somewhere else.\n\n964\n00:51:03,490 --> 00:51:06,100\nSo, we can have them stored,\nhave a copy of them, and\n\n965\n00:51:06,100 --> 00:51:08,360\nregardless what happens\nto our actual equipment.\n\n966\n00:51:08,360 --> 00:51:12,140\nWe now have a historical record of\nthe logs and we can see what's what.\n\n967\n00:51:12,140 --> 00:51:12,910\n>> Yep.\n\n968\n00:51:12,910 --> 00:51:16,520\nSo, what we're about to do is we're gonna\nintroduce to you the idea of sys logging.\n\n969\n00:51:16,520 --> 00:51:19,340\nNow, we probably covered this\nin a couple of other shows.\n\n970\n00:51:19,340 --> 00:51:21,260\nIt does show up here in\nour exam objective, so\n\n971\n00:51:21,260 --> 00:51:24,150\nwe wanna make sure that we\ndo cover it here again.\n\n972\n00:51:24,150 --> 00:51:27,310\nNow, we are switching gears from\nthe first top redundancy, but\n\n973\n00:51:27,310 --> 00:51:31,529\nit does help in terms of services that we\ndo need to be able to run on our routers.\n\n974\n00:51:33,510 --> 00:51:38,220\n>> Yeah so, basically your router it\nmaintains a logging buffer on it's own,\n\n975\n00:51:38,220 --> 00:51:39,570\nand we don't really have to do that.\n\n976\n00:51:39,570 --> 00:51:43,470\nIt's just there, it's done and\nthat's basically it.\n\n977\n00:51:43,470 --> 00:51:47,490\nIf we go into,\nI'm logged into a 4500 series switch here.\n\n978\n00:51:47,490 --> 00:51:51,480\nAnd if I do a show log, I'll get my log.\n\n979\n00:51:51,480 --> 00:51:54,410\nSo here's the log, very exciting,\nhere's all this stuff.\n\n980\n00:51:54,410 --> 00:51:56,420\nAnd for the most part,\nit's not gonna be very exciting,\n\n981\n00:51:56,420 --> 00:52:00,290\nit's gonna be things like this interface\nwent up, this interface went down.\n\n982\n00:52:00,290 --> 00:52:03,975\nNothing too terribly really\ngrand to be found in there.\n\n983\n00:52:03,975 --> 00:52:07,395\nSo, that's the kind of stuff that\nwe're kinda stuck looking at.\n\n984\n00:52:07,395 --> 00:52:11,135\nBut what we can do is, we can actually\nsome really neat stuff to log,\n\n985\n00:52:11,135 --> 00:52:12,935\nsome stuff that would be kinda valuable.\n\n986\n00:52:12,935 --> 00:52:18,200\nSo for example,\nmaybe I want to keep a log, every time\n\n987\n00:52:18,200 --> 00:52:23,702\nsomebody SSHs into my system, right, or if\nthey Telnet into the system or whatever.\n\n988\n00:52:23,702 --> 00:52:27,610\nI wanna keep a record of that so\nthat I know about it, all right?\n\n989\n00:52:27,610 --> 00:52:32,650\nWell, we could create a access list,\nthat went in and\n\n990\n00:52:32,650 --> 00:52:36,490\nbasically logged that type of traffic and\nattach it to our VTYs.\n\n991\n00:52:36,490 --> 00:52:37,570\nThen we would have a log.\n\n992\n00:52:37,570 --> 00:52:41,130\nSo, great way if you're trying\nto do intrusion monitoring or\n\n993\n00:52:41,130 --> 00:52:42,620\ndetection, whatever.\n\n994\n00:52:42,620 --> 00:52:49,490\nSo I might do something like IP,\nactually let's just do a numbered one.\n\n995\n00:52:49,490 --> 00:52:54,916\nIf I say access-list, I'll pick\none that I know I'm not using, 55.\n\n996\n00:52:54,916 --> 00:53:00,420\nPermit any log, all right?\n\n997\n00:53:00,420 --> 00:53:03,640\nSo, what I'm doing is I'm creating\nan access list that permits everybody.\n\n998\n00:53:03,640 --> 00:53:07,878\nSo, it allows everybody to come through,\nbut it turns on logging.\n\n999\n00:53:07,878 --> 00:53:14,300\nSo, it's gonna log whenever somebody\naccesses the system, all right?\n\n1000\n00:53:14,300 --> 00:53:19,340\nAnd then I'm going to go to line VTY0,\nlet's see, 15, since this is a switch\n\n1001\n00:53:19,340 --> 00:53:22,620\non a router, you'd have a 0 through 4,\non a switch 0 through 15.\n\n1002\n00:53:22,620 --> 00:53:29,810\nAnd here I'll say access-class 55 in,\nall right?\n\n1003\n00:53:29,810 --> 00:53:36,930\nAnd so now, I've got this access list in\nplace, and if I do a show access-list 55,\n\n1004\n00:53:36,930 --> 00:53:42,150\nthere it is, it's logging, no matches yet.\n\n1005\n00:53:42,150 --> 00:53:47,540\nNow, I'm gonna open up another Window\nhere, and connect into that same switch.\n\n1006\n00:53:50,994 --> 00:53:51,850\nAll right?\n\n1007\n00:53:51,850 --> 00:53:57,810\nAnd when I connect in, see how I got\ntwo matches on that access list?\n\n1008\n00:53:57,810 --> 00:53:59,220\nI just passed through that access list.\n\n1009\n00:53:59,220 --> 00:54:01,295\nNow, I was permitted, I was let in.\n\n1010\n00:54:01,295 --> 00:54:02,660\nHere I'm in, it's exciting.\n\n1011\n00:54:03,720 --> 00:54:10,220\nBut, if I do a show log, because I turned\non logging during that access list,\n\n1012\n00:54:10,220 --> 00:54:16,180\nif I go all the way down, here we go,\nIPs access logs list 55 permitted.\n\n1013\n00:54:16,180 --> 00:54:17,830\n10.1.10.1.121 packet.\n\n1014\n00:54:17,830 --> 00:54:23,250\nSo right there I know that\nsomebody at 10.1.10.1.121.\n\n1015\n00:54:23,250 --> 00:54:26,440\nConnected at December 30th\nat 12:33 pm Eastern time.\n\n1016\n00:54:27,890 --> 00:54:30,780\nSo, I know that, that happened, all right?\n\n1017\n00:54:30,780 --> 00:54:32,280\nGreat!\nWonderful!\n\n1018\n00:54:32,280 --> 00:54:37,510\nWell, if I'm an attacker, and\nI break in and that's in the logs.\n\n1019\n00:54:37,510 --> 00:54:39,640\nWatch, here we'll go a little crazy.\n\n1020\n00:54:39,640 --> 00:54:45,270\nSo, if I break,\nmaybe I gain access to credentials,\n\n1021\n00:54:45,270 --> 00:54:50,290\nor I get in through some other kind of\nexploit, and I do a clear log, all right?\n\n1022\n00:54:50,290 --> 00:54:55,300\nSo I broke in, I just cleared the log,\nI do my damage, and then I get out.\n\n1023\n00:54:55,300 --> 00:54:58,650\nWell, here I am, network admin.\n\n1024\n00:54:58,650 --> 00:55:00,040\nI log in, and do show log.\n\n1025\n00:55:02,450 --> 00:55:03,850\nNothing in the log.\n\n1026\n00:55:03,850 --> 00:55:04,690\n>> Nope.\n\n1027\n00:55:04,690 --> 00:55:06,910\n>> I don't know,\ndid somebody get in, didn't they?\n\n1028\n00:55:06,910 --> 00:55:07,820\nDid they do damage?\n\n1029\n00:55:07,820 --> 00:55:10,100\nI have no clue the log just looked empty.\n\n1030\n00:55:10,100 --> 00:55:11,870\nHey, everything must be running fine.\n\n1031\n00:55:11,870 --> 00:55:13,465\nNothing to crazy there, wonderful.\n\n1032\n00:55:13,465 --> 00:55:14,720\n>> Yeah.\n\n1033\n00:55:14,720 --> 00:55:18,300\n>> That's the problem with relying\non log stored right on the system.\n\n1034\n00:55:18,300 --> 00:55:22,150\nAn attacker can clear them or\nif you lose power, they get erased anyway.\n\n1035\n00:55:22,150 --> 00:55:24,420\nThey're all stored in RAM.\n\n1036\n00:55:24,420 --> 00:55:27,910\nSo, we need to off load\nthese to somewhere else.\n\n1037\n00:55:27,910 --> 00:55:32,389\n>> The easiest way for us to off load this\nis to essentially send it to, for us,\n\n1038\n00:55:32,389 --> 00:55:36,247\na TFTP server, is the way that\nwe're gonna actually do it here.\n\n1039\n00:55:36,247 --> 00:55:39,196\nSo Don is gonna-\n>> Not to a TFTP server, a syslog server.\n\n1040\n00:55:39,196 --> 00:55:39,893\n>> A syslog server!\n\n1041\n00:55:39,893 --> 00:55:41,027\nSee I said it wrong.\n\n1042\n00:55:41,027 --> 00:55:41,877\nA syslog server.\n\n1043\n00:55:41,877 --> 00:55:42,991\nI knew I was gonna say something wrong.\n\n1044\n00:55:42,991 --> 00:55:46,150\nI was thinking of the actual\nproduct itself that we were using.\n\n1045\n00:55:46,150 --> 00:55:47,689\nBut it is syslog over here.\n\n1046\n00:55:47,689 --> 00:55:51,179\nAnd so we turn that on by issuing\nout the term logging, and\n\n1047\n00:55:51,179 --> 00:55:54,548\nthen the IP address of where\nthis is actually gonna go.\n\n1048\n00:55:54,548 --> 00:55:56,846\nBut, we do have to have\nthe syslog server running though.\n\n1049\n00:55:56,846 --> 00:55:59,267\n>> Yeah,\nnow Cisco does not make a syslog server.\n\n1050\n00:55:59,267 --> 00:56:03,130\nSyslog is a open standard,\nit's been around forever.\n\n1051\n00:56:03,130 --> 00:56:07,880\nAny Linux box, any Unix box,\nOSX, they can be syslog servers.\n\n1052\n00:56:07,880 --> 00:56:09,790\nIf you got a Windows machine.\n\n1053\n00:56:09,790 --> 00:56:12,850\nIt doesn't have syslog but\nyou can get third party utilities.\n\n1054\n00:56:12,850 --> 00:56:15,875\nThe one I'm using is why\nRonnie messed up there.\n\n1055\n00:56:15,875 --> 00:56:18,601\n>> [LAUGH]\n>> I'm using a product called TFTPB32,\n\n1056\n00:56:18,601 --> 00:56:22,940\nwhich is a TFTP server but\nit's also a syslog server for Windows.\n\n1057\n00:56:22,940 --> 00:56:25,661\nIt's quick and easy to install,\nthat's why I'm using it.\n\n1058\n00:56:25,661 --> 00:56:29,627\nAnd what I'm doing here is I'm basically\ntelling that switch, I'm saying,\n\n1059\n00:56:29,627 --> 00:56:34,160\nhey whenever you generate a log,\ndon't just put it in the local log buffer.\n\n1060\n00:56:34,160 --> 00:56:36,680\nSend a copy of it to this IP address.\n\n1061\n00:56:36,680 --> 00:56:40,140\nAnd at that IP is a Syslog\nserver that's waiting to receive\n\n1062\n00:56:40,140 --> 00:56:40,754\nthe communication, okay.\n\n1063\n00:56:41,820 --> 00:56:47,680\nSo now whenever activity happens,\nit's being sent to both places, okay.\n\n1064\n00:56:47,680 --> 00:56:50,730\nSo the cool part here, if I do a show log.\n\n1065\n00:56:50,730 --> 00:56:52,820\nThere's not gonna be too\nterribly much in there, well,\n\n1066\n00:56:52,820 --> 00:56:55,650\nthere's the fact that I turned on logging,\nright.\n\n1067\n00:56:55,650 --> 00:56:57,760\nSo, there I can see that it is logging,\nright.\n\n1068\n00:56:57,760 --> 00:57:01,869\nAnd, if I'm an attacker and\nI connect in, so\n\n1069\n00:57:01,869 --> 00:57:06,640\nhere I am,\nI'm gonna break in to this system again.\n\n1070\n00:57:09,589 --> 00:57:13,722\nAll right, so here I am and\nas the attacker, if I look at the log,\n\n1071\n00:57:16,136 --> 00:57:19,519\nEventually it will show that I connected.\n\n1072\n00:57:19,519 --> 00:57:21,817\nIf I was more of patient man I\ncould wait and it will turn up.\n\n1073\n00:57:21,817 --> 00:57:25,394\n>> [LAUGH]\n>> But it'll show and then I can clear\n\n1074\n00:57:25,394 --> 00:57:31,276\nthat log and wipe it out and toast that\nand then when I get out over here,\n\n1075\n00:57:31,276 --> 00:57:35,297\nif I do that same show log\nI just see an empty log.\n\n1076\n00:57:35,297 --> 00:57:37,528\nThe logs are all gone,\nwe've lost the record of it, right.\n\n1077\n00:57:37,528 --> 00:57:38,144\n>> Right.\n\n1078\n00:57:38,144 --> 00:57:43,745\n>> Well, we've lost the record of it here\nbut when those log messages were created,\n\n1079\n00:57:43,745 --> 00:57:48,957\na copy was sent, should have been sent\nto that other IP address that I put in.\n\n1080\n00:57:48,957 --> 00:57:50,641\nLet's go see if that happened.\n\n1081\n00:57:50,641 --> 00:57:51,141\nAll right.\n\n1082\n00:57:52,290 --> 00:57:57,600\nRight here I can see this is\nthe sys log server that I fired up.\n\n1083\n00:57:57,600 --> 00:58:00,096\nIt's a free program called TFTP D32.\n\n1084\n00:58:00,096 --> 00:58:01,517\nIt's not the most robust, right.\n\n1085\n00:58:01,517 --> 00:58:05,295\nIn a professional environment you'll\nwanna buy a legitimate product.\n\n1086\n00:58:05,295 --> 00:58:08,013\nThere's several great ones\nthat are out there, but\n\n1087\n00:58:08,013 --> 00:58:10,870\nbasically it's got a copy\nof these log messages.\n\n1088\n00:58:10,870 --> 00:58:14,630\nSo as someone connects in,\nit's making a record of it.\n\n1089\n00:58:14,630 --> 00:58:17,500\nAnd even if the logs get cleared,\nI've got a record here.\n\n1090\n00:58:17,500 --> 00:58:21,820\nNow one problem we're gonna\nhave is it does rate limiting.\n\n1091\n00:58:21,820 --> 00:58:27,660\nSo, on the logging on those VT white\nboards, I've hit the limit already\n\n1092\n00:58:27,660 --> 00:58:31,180\nwith the messages that were logged, and\nso that's why it's not showing anymore.\n\n1093\n00:58:31,180 --> 00:58:35,100\nLet me fix that so I can show you\nguys this a little more in action.\n\n1094\n00:58:36,340 --> 00:58:36,840\nSo,\n\n1095\n00:58:46,420 --> 00:58:47,825\nLet me just turn that off.\n\n1096\n00:58:53,560 --> 00:58:54,837\nAnd then turn it back on again.\n\n1097\n00:58:54,837 --> 00:58:55,642\nThat should do it.\n\n1098\n00:59:02,083 --> 00:59:05,454\nYeah, it, basically it doesn't\nwanna flood us with traffic.\n\n1099\n00:59:05,454 --> 00:59:09,329\nIf I SSH in then that access list\nis gonna trip constantly for\n\n1100\n00:59:09,329 --> 00:59:13,990\nevery single packet that I send and\nso it is kind of filtering that down.\n\n1101\n00:59:18,030 --> 00:59:20,016\nBut that one should make it in there.\n\n1102\n00:59:20,016 --> 00:59:20,566\nThere we go.\n\n1103\n00:59:20,566 --> 00:59:25,154\nSo, I can see that my log messages,\nit is showing that I just connected in.\n\n1104\n00:59:25,154 --> 00:59:26,710\nAnd, if I clear the log.\n\n1105\n00:59:28,637 --> 00:59:29,199\nAll right.\n\n1106\n00:59:29,199 --> 00:59:33,418\nAs an attacker I just cleared the log,\nthe log is now empty.\n\n1107\n00:59:33,418 --> 00:59:34,300\nRight.\n\n1108\n00:59:34,300 --> 00:59:36,590\nSo I do my damage, I get out.\n\n1109\n00:59:36,590 --> 00:59:42,270\nNow there is no record here on\nthe switch that someone was in, right.\n\n1110\n00:59:42,270 --> 00:59:47,967\nIf I jump back to my sys log server it's\nright here, I can see somebody SSH in.\n\n1111\n00:59:47,967 --> 00:59:52,164\nThere source IP was 10.1.10.121 and\n\n1112\n00:59:52,164 --> 00:59:57,185\nI can see that they did\na configuration and did something.\n\n1113\n00:59:57,185 --> 01:00:02,499\nThey logged in as admin, they were on a\nVTY line, so I can see that that happened.\n\n1114\n01:00:02,499 --> 01:00:03,184\nRight.\n\n1115\n01:00:03,184 --> 01:00:07,120\nSo this is kind of the power\nof having a syslog server.\n\n1116\n01:00:07,120 --> 01:00:09,244\nThe other thing is if you\nhave a thousand routers,\n\n1117\n01:00:09,244 --> 01:00:12,480\nyou don't wanna connect to a thousand\nrouters to look at their logs.\n\n1118\n01:00:12,480 --> 01:00:14,110\nIf you set them all to syslog,\n\n1119\n01:00:14,110 --> 01:00:17,040\nyou have one central repository\nwhere your data is stored.\n\n1120\n01:00:17,040 --> 01:00:20,170\nAnd you can go and sift through it and\nlook for errors and so on.\n\n1121\n01:00:20,170 --> 01:00:24,920\nNow a simple product like TFTPD32\ndoesn't give you a lot of power there.\n\n1122\n01:00:24,920 --> 01:00:27,340\nBut if you step up to something\na little more advanced,\n\n1123\n01:00:27,340 --> 01:00:31,460\nlike I like the KIWI sys log server\nmyself, which is now owned by SolarWind so\n\n1124\n01:00:31,460 --> 01:00:32,895\nthat means it's incredibly expensive.\n\n1125\n01:00:32,895 --> 01:00:34,096\n>> [LAUGH]\n>> But\n\n1126\n01:00:34,096 --> 01:00:37,544\nthey used to have a free version and\nit is awesome.\n\n1127\n01:00:37,544 --> 01:00:40,729\nBut basically, it allows you to\ndo colorized events, it can-\n\n1128\n01:00:40,729 --> 01:00:42,320\n>> Oh look, only $300.\n\n1129\n01:00:42,320 --> 01:00:44,003\n>> Yeah, it's not too bad.\n\n1130\n01:00:44,003 --> 01:00:48,650\nBut [LAUGH] it can send you text messages\nwhen certain events happen and stuff.\n\n1131\n01:00:48,650 --> 01:00:51,060\nThat's Kiwi CatTools, different product.\n\n1132\n01:00:51,060 --> 01:00:53,114\nLet's go for their syslog server,\n\n1133\n01:00:53,114 --> 01:00:56,685\nsee if they have some screenshots\nthat aren't microscopic.\n\n1134\n01:00:56,685 --> 01:00:59,825\nBut-\n>> Oh, there you go.\n\n1135\n01:00:59,825 --> 01:01:03,323\n>> Yeah, so here you can view like\nhow rapidly events are coming in and\n\n1136\n01:01:03,323 --> 01:01:07,085\nstuff and, does it have where I can\nscroll through these screen shots?\n\n1137\n01:01:07,085 --> 01:01:07,860\nYeah.\n\n1138\n01:01:07,860 --> 01:01:09,020\nYou can colorize events.\n\n1139\n01:01:09,020 --> 01:01:09,990\n>> Yeah, there you go.\n>> That's what I like.\n\n1140\n01:01:09,990 --> 01:01:13,770\nMake it where you easily spot which\nevents are truly critical for you and\n\n1141\n01:01:13,770 --> 01:01:15,140\nyou can set all sorts of actions.\n\n1142\n01:01:15,140 --> 01:01:17,010\nI've used this at several companies.\n\n1143\n01:01:17,010 --> 01:01:18,680\nAnd at 300 bucks it's not bad.\n\n1144\n01:01:18,680 --> 01:01:20,690\nI think it's probably a little\noverpriced for what it does, but\n\n1145\n01:01:20,690 --> 01:01:22,270\nit is one of the better ones.\n\n1146\n01:01:22,270 --> 01:01:26,900\nIt's also fully searchable and queriable,\nand you can tie it into a database.\n\n1147\n01:01:26,900 --> 01:01:31,350\nSo you can have years or\nsyslog records stored in one place.\n\n1148\n01:01:31,350 --> 01:01:33,127\nGives you a great central point.\n\n1149\n01:01:33,127 --> 01:01:34,346\nExcellent for doing discovery.\n\n1150\n01:01:34,346 --> 01:01:35,147\n>> Yeah.\n\n1151\n01:01:36,284 --> 01:01:38,080\nAll right.\n\n1152\n01:01:38,080 --> 01:01:42,150\nSo those are some examples\nof how sys log can be used.\n\n1153\n01:01:42,150 --> 01:01:44,630\nIt's pretty neat stuff and\nnot hard to configure.\n\n1154\n01:01:44,630 --> 01:01:47,890\n>> Yeah, if you remember we also tied\nthis in last time with the idea of\n\n1155\n01:01:47,890 --> 01:01:49,330\ntime stamps, right.\n\n1156\n01:01:49,330 --> 01:01:52,120\nMaking sure that your equipment\nis actually on the right time and\n\n1157\n01:01:52,120 --> 01:01:53,350\ndoing everything else.\n\n1158\n01:01:53,350 --> 01:01:56,158\nMake sure you do go back and\ntake a look at those episodes as well,\n\n1159\n01:01:56,158 --> 01:01:57,152\nin configuring that.\n\n1160\n01:01:57,152 --> 01:02:01,982\nBecause having the right time, especially\non the logs, are really gonna help us.\n\n1161\n01:02:01,982 --> 01:02:02,887\n>> Yeah.\n\n1162\n01:02:02,887 --> 01:02:04,577\nAnd so you might ask yourself,\n\n1163\n01:02:04,577 --> 01:02:07,700\nwhy does this fall into the same\ncategory as IP services?\n\n1164\n01:02:07,700 --> 01:02:09,980\nWell it is using an IP\nconnection on the network.\n\n1165\n01:02:09,980 --> 01:02:11,920\nBut it also kind of\nfalls under redundancy.\n\n1166\n01:02:11,920 --> 01:02:15,220\nWe're making a copy of the log files so\nwe've got those stored somewhere else.\n\n1167\n01:02:15,220 --> 01:02:16,603\nDefinitely something we need to consider.\n\n1168\n01:02:16,603 --> 01:02:17,103\n>> All right.\n\n1169\n01:02:18,170 --> 01:02:22,450\n>> On the topic of services that we need\nyou know in order to provide redundancy,\n\n1170\n01:02:22,450 --> 01:02:26,150\nis SNMP,\nthe simple network monitoring protocol.\n\n1171\n01:02:26,150 --> 01:02:30,770\nAll Cisco routers and switches and\nmost ASAs support SNMP.\n\n1172\n01:02:30,770 --> 01:02:34,490\nWhich is a way of monitoring our equipment\nto view things not just whether they're up\n\n1173\n01:02:34,490 --> 01:02:39,250\nor down but also verify how much\nbandwidth they're consuming and\n\n1174\n01:02:39,250 --> 01:02:41,010\nhow long they've been online for\nand so on.\n\n1175\n01:02:41,010 --> 01:02:44,920\nYou know a lot of good information\ncan be pulled using SNMP.\n\n1176\n01:02:44,920 --> 01:02:51,090\nNow the Cisco routers support SNMP right,\nbut they don't\n\n1177\n01:02:51,090 --> 01:02:55,910\nactually have an SNMP viewer for you,\na way to collect the data they generate.\n\n1178\n01:02:55,910 --> 01:02:58,100\nSo on the exam,\nthe only thing you really need to know,\n\n1179\n01:02:58,100 --> 01:03:01,889\nis how to turn on SNMP cuz\nit's really not that complex.\n\n1180\n01:03:02,940 --> 01:03:05,870\nBasically, we just have\nto set a community.\n\n1181\n01:03:05,870 --> 01:03:10,780\nSo if I get into configuration,\nyou'll see where you've got like SNMP and\n\n1182\n01:03:10,780 --> 01:03:12,260\nSNMP server.\n\n1183\n01:03:12,260 --> 01:03:17,990\nSo we can say SNMP server,\nthat's what I wanted, and then community.\n\n1184\n01:03:17,990 --> 01:03:21,370\nSNMP uses a community name\nas like a password, and\n\n1185\n01:03:21,370 --> 01:03:24,930\nanybody that knows that password can\nconnect up and work with the system.\n\n1186\n01:03:24,930 --> 01:03:30,619\nSo if I say SNMP-server\ncommunity IT Pro TV.\n\n1187\n01:03:30,619 --> 01:03:31,420\nAll right.\n\n1188\n01:03:31,420 --> 01:03:35,540\nThat's gonna create a password or\na community of IT Pro TV, and\n\n1189\n01:03:35,540 --> 01:03:38,665\nthen I can set it as read only,\nor read, write.\n\n1190\n01:03:38,665 --> 01:03:40,779\nYou'll see RO and RW.\n\n1191\n01:03:40,779 --> 01:03:42,660\nRO is normally what we want, read only.\n\n1192\n01:03:42,660 --> 01:03:47,156\nPeople can read and gather the information\nabout the performance of our device,\n\n1193\n01:03:47,156 --> 01:03:47,825\nall right.\n\n1194\n01:03:47,825 --> 01:03:52,077\nIf you do read write, they can actually\nchange the configuration of the device via\n\n1195\n01:03:52,077 --> 01:03:55,971\nSNMP, I don't know anybody that uses\nthat in production but you can do it.\n\n1196\n01:03:55,971 --> 01:03:58,670\nBut normally we'll set it to read only.\n\n1197\n01:03:58,670 --> 01:03:59,368\nAll right?\n\n1198\n01:03:59,368 --> 01:04:03,318\nAnd then you can go a step further and\nassign an access list to further\n\n1199\n01:04:03,318 --> 01:04:08,250\nrestrict who's allowed to write to that\ndevice, or to read from that device even.\n\n1200\n01:04:08,250 --> 01:04:11,560\nYou'll normally restrict this down to\nyour whatever system is running your\n\n1201\n01:04:11,560 --> 01:04:12,285\nmonitoring software.\n\n1202\n01:04:12,285 --> 01:04:13,760\nRight?\n\n1203\n01:04:13,760 --> 01:04:16,375\nNow, monitoring software\nis the missing piece.\n\n1204\n01:04:16,375 --> 01:04:18,130\n>> Right.\n>> And Cisco doesn't really give you one,\n\n1205\n01:04:18,130 --> 01:04:20,870\nso you're kind of up to\nyour own decisions there.\n\n1206\n01:04:20,870 --> 01:04:23,520\nThere are a ton of them\nthat are out there.\n\n1207\n01:04:23,520 --> 01:04:27,820\nProbably the most famous\none is an open source\n\n1208\n01:04:27,820 --> 01:04:31,400\nproduct called Nagios,\nor however you say that.\n\n1209\n01:04:31,400 --> 01:04:33,220\nAnd so I'm just gonna pull it up.\n\n1210\n01:04:33,220 --> 01:04:35,190\nIt's open source, it's free.\n\n1211\n01:04:35,190 --> 01:04:38,860\nYou can run it and it basically will\nmonitor all of your network devices,\n\n1212\n01:04:38,860 --> 01:04:39,780\ntheir performance.\n\n1213\n01:04:39,780 --> 01:04:43,670\nAnd you can pull up historical reports,\nbandwidth, and so on.\n\n1214\n01:04:43,670 --> 01:04:45,080\nIt's not the only one that's out there.\n\n1215\n01:04:45,080 --> 01:04:47,360\nThere's also products like MRTG.\n\n1216\n01:04:47,360 --> 01:04:52,300\nMRTG is another one that\nwill generate graphs and\n\n1217\n01:04:52,300 --> 01:04:55,890\ncharts based on your network performance.\n\n1218\n01:04:55,890 --> 01:04:59,000\nIt's kind of a pain to get configured but\nit is out there.\n\n1219\n01:05:00,130 --> 01:05:04,260\nSolar winds makes the network\nperformance monitor,\n\n1220\n01:05:04,260 --> 01:05:08,170\nwhich I think is probably one of\nthe most powerful and easy to use.\n\n1221\n01:05:08,170 --> 01:05:10,100\nIt's also one of the most expensive.\n\n1222\n01:05:10,100 --> 01:05:11,670\nIt's incredibly expensive.\n\n1223\n01:05:11,670 --> 01:05:16,480\nBut again, really useful cuz it\ngenerates these nice little charts.\n\n1224\n01:05:16,480 --> 01:05:18,500\nIt's extremely simple to set up.\n\n1225\n01:05:18,500 --> 01:05:19,350\nThe set up for\n\n1226\n01:05:19,350 --> 01:05:24,340\nit is really the best part, cuz it is\nto incredibly simple to get it set up.\n\n1227\n01:05:24,340 --> 01:05:26,550\nBut it does cost a good bit of money.\n\n1228\n01:05:26,550 --> 01:05:29,000\nAnd all it's doing is\nreaching out using SMMP and\n\n1229\n01:05:29,000 --> 01:05:31,760\ngathering information from your routers,\nfrom your switches.\n\n1230\n01:05:31,760 --> 01:05:36,370\nAnd combining it all into one location\nwhere you can quickly go in and\n\n1231\n01:05:36,370 --> 01:05:38,160\nmonitor your health status.\n\n1232\n01:05:38,160 --> 01:05:40,890\nYou can monitor things like\nbandwidth utilization and so on.\n\n1233\n01:05:40,890 --> 01:05:41,960\nIt's very, very powerful.\n\n1234\n01:05:43,350 --> 01:05:45,050\n>> Now Don,\nwe need to take a moment here and\n\n1235\n01:05:45,050 --> 01:05:49,360\nkind of differentiate a little bit\nbetween the versions of SNMP as well.\n\n1236\n01:05:49,360 --> 01:05:53,450\nSo specifically the exam calls out\nversion two and version three.\n\n1237\n01:05:53,450 --> 01:05:55,790\nIs there a real big\ndifference between those two?\n\n1238\n01:05:55,790 --> 01:05:58,965\n>> As far as what they gather\nit's pretty much the same.\n\n1239\n01:05:58,965 --> 01:05:59,620\nRight?\n\n1240\n01:05:59,620 --> 01:06:02,995\nSNMP version two uses a community\nstring as the password.\n\n1241\n01:06:02,995 --> 01:06:04,960\nRight?\nThe problem with that is it's not\n\n1242\n01:06:04,960 --> 01:06:06,050\nterribly secure.\n\n1243\n01:06:06,050 --> 01:06:08,020\nAnd so\nsomeone can get your community string and\n\n1244\n01:06:08,020 --> 01:06:10,260\nthen they can get information\nabout your system.\n\n1245\n01:06:10,260 --> 01:06:13,640\nSo snmp version three aims to fix that.\n\n1246\n01:06:13,640 --> 01:06:17,920\nAnd it does that by well you still have\na community string, that doesn't change.\n\n1247\n01:06:17,920 --> 01:06:20,380\nBut you now have a username and\npassword also.\n\n1248\n01:06:20,380 --> 01:06:23,920\nSo SNMP version three adds\nauthentication credentials.\n\n1249\n01:06:23,920 --> 01:06:27,610\nSo in a high security environment or\neven a regular security environment.\n\n1250\n01:06:27,610 --> 01:06:30,370\nYou more than likely want to\ngo with SNNP version 3 because\n\n1251\n01:06:30,370 --> 01:06:33,040\nyou can secure things a little bit better.\n\n1252\n01:06:33,040 --> 01:06:38,040\nSNNP version 2, or most commonly is\nversion 2C, is the most popular.\n\n1253\n01:06:38,040 --> 01:06:39,290\nEverybody supports version 2.\n\n1254\n01:06:39,290 --> 01:06:41,980\nVersion 3 is not supported\non all equipment yet,\n\n1255\n01:06:41,980 --> 01:06:45,520\nit is on most Cisco stuff, but\nyour monitoring software might not do it.\n\n1256\n01:06:45,520 --> 01:06:48,489\nSo let me see if I can pull up\nan example of the configuration of that.\n\n1257\n01:06:52,285 --> 01:06:54,851\nLet's see if I can find\none just real quick.\n\n1258\n01:06:57,708 --> 01:07:00,490\nLet's see, configuration examples.\n\n1259\n01:07:00,490 --> 01:07:01,840\nHere we go.\n\n1260\n01:07:01,840 --> 01:07:02,610\nAll right.\n\n1261\n01:07:02,610 --> 01:07:05,190\nSo, in SNMP version 2,\n\n1262\n01:07:05,190 --> 01:07:09,410\nwe would just say SNMP server community,\nhere they're doing public.\n\n1263\n01:07:09,410 --> 01:07:10,980\nAnd then RO, to be read only.\n\n1264\n01:07:10,980 --> 01:07:15,180\nAll right, but if we're doing version 3,\nwe gotta go a step further.\n\n1265\n01:07:15,180 --> 01:07:17,790\nHere, they're coming in and\ndefining a group, and\n\n1266\n01:07:17,790 --> 01:07:19,600\nthen they're specifying a username.\n\n1267\n01:07:19,600 --> 01:07:21,630\nThe user is remoteuser1.\n\n1268\n01:07:21,630 --> 01:07:25,270\nAnd they're specifying what IP address\nthey're allowed to come in from.\n\n1269\n01:07:25,270 --> 01:07:28,180\nAnd then they're going in and\nspecifying there's no authentication.\n\n1270\n01:07:28,180 --> 01:07:30,810\nSo there's a user name but no password.\n\n1271\n01:07:30,810 --> 01:07:33,570\nAnd then,\nwhat they're allowed to do or access.\n\n1272\n01:07:33,570 --> 01:07:35,370\nAll right.\nSo you can get very granular.\n\n1273\n01:07:35,370 --> 01:07:37,320\nHere's one where they assign a password,\nright.\n\n1274\n01:07:37,320 --> 01:07:41,410\nSo here's the user and then see at\nthe end, they say authentication md5 hash,\n\n1275\n01:07:41,410 --> 01:07:44,370\nand the password for\nthis user is password1.\n\n1276\n01:07:44,370 --> 01:07:45,925\nThat's really the only difference.\n\n1277\n01:07:45,925 --> 01:07:47,950\nFunctionality-wise, they're the same,\n\n1278\n01:07:47,950 --> 01:07:51,480\nexcept SMP version 3 gives you that\nability to do usernames and passwords.\n\n1279\n01:07:51,480 --> 01:07:54,830\nAnd with an md5 hash,\nthat's fairly secure, right?\n\n1280\n01:07:54,830 --> 01:07:57,010\nmd5 has been compromised, but\n\n1281\n01:07:57,010 --> 01:08:00,680\nit's still a pretty sophisticated\nattack to be able to do it.\n\n1282\n01:08:00,680 --> 01:08:03,650\nSo, it does give you a decent level.\n\n1283\n01:08:03,650 --> 01:08:06,350\nMy approach, I normally do version 2 and\n\n1284\n01:08:06,350 --> 01:08:09,040\nthen I use IPsec to encrypt\ntraffic on the network.\n\n1285\n01:08:09,040 --> 01:08:13,320\nIPsec is a great way to encrypt anything,\nand in that way you can use IPsec with\n\n1286\n01:08:13,320 --> 01:08:17,630\nreally strong encryption and then not\nhave to worry about crazy user names and\n\n1287\n01:08:17,630 --> 01:08:19,680\npasswords on this side,\nit kind of solves the problem.\n\n1288\n01:08:19,680 --> 01:08:21,726\nSo, Different approaches there, but\n\n1289\n01:08:21,726 --> 01:08:25,490\nthat is the big difference between\nSNP version 1, or 2, and 3.\n\n1290\n01:08:25,490 --> 01:08:28,110\n>> Yeah, a lot of times when you actually\n\n1291\n01:08:28,110 --> 01:08:30,780\ngo well if I want to run the most\nsecure I'm just going to do version 3.\n\n1292\n01:08:30,780 --> 01:08:32,960\nBut remember what we just said here.\n\n1293\n01:08:32,960 --> 01:08:36,510\nYou may find that you have\nequipment that doesn't support it.\n\n1294\n01:08:36,510 --> 01:08:38,360\nIf it doesn't you're going to\nactually have to deal with that and\n\n1295\n01:08:38,360 --> 01:08:40,140\nthen find some other way to secure it.\n\n1296\n01:08:40,140 --> 01:08:42,880\nThe key here is understanding\nthe difference between the two.\n\n1297\n01:08:42,880 --> 01:08:45,391\nSNMP version 3 secured, version 2,\n\n1298\n01:08:45,391 --> 01:08:48,670\nagain you have to find your\nown security and stuff.\n\n1299\n01:08:48,670 --> 01:08:50,250\nSo it's not built into it's protocol.\n\n1300\n01:08:52,260 --> 01:08:55,040\n>> Alright, so\nIll just kind of jot some notes here.\n\n1301\n01:08:55,040 --> 01:08:58,080\nThe configuration so\nI can put them on the website later.\n\n1302\n01:08:58,080 --> 01:09:01,235\nActually I can probably\njust link to this article.\n\n1303\n01:09:01,235 --> 01:09:03,290\n[LAUGH] It's official Cisco article.\n\n1304\n01:09:03,290 --> 01:09:06,100\nBut I'll throw that in there just so\nwe have it.\n\n1305\n01:09:06,100 --> 01:09:10,140\nAlways a nice, short URL for\nCisco, isn't it?\n\n1306\n01:09:10,140 --> 01:09:11,040\n>> Yeah, little, tiny.\n\n1307\n01:09:11,040 --> 01:09:14,440\n>> But I'll throw those in the notes for\nthe episodes so you guys have them.\n\n1308\n01:09:14,440 --> 01:09:16,970\nBut basically, just be aware that\nthere is some slight differences.\n\n1309\n01:09:16,970 --> 01:09:19,390\nAmazing software for monitoring things.\n\n1310\n01:09:19,390 --> 01:09:22,500\nThe trick is Cisco will give\nyou the information, but\n\n1311\n01:09:22,500 --> 01:09:23,840\nthey don't give you a way to interpret it.\n\n1312\n01:09:23,840 --> 01:09:25,730\nSo you do need software that can do it,\nand\n\n1313\n01:09:25,730 --> 01:09:27,380\nthere's a ton of products that\nare out there that'll do it.\n\n1314\n01:09:28,790 --> 01:09:29,480\n>> Sounds good.\n\n1315\n01:09:29,480 --> 01:09:32,740\n>> All right, well, Ronnie,\nI think that wraps up our IP services and\n\n1316\n01:09:32,740 --> 01:09:33,970\nwraps up this objective.\n\n1317\n01:09:33,970 --> 01:09:35,420\nWhat objective number was this again,\nwas it four?\n\n1318\n01:09:35,420 --> 01:09:36,810\n>> This is objective number three.\n\n1319\n01:09:36,810 --> 01:09:37,710\n>> Three, oh, shoot.\n\n1320\n01:09:37,710 --> 01:09:38,220\nThere we go.\nAll right.\n\n1321\n01:09:38,220 --> 01:09:38,810\nYep.\n>> Yep.\n\n1322\n01:09:38,810 --> 01:09:40,640\n>> So pretty much it for objective three.\n\n1323\n01:09:40,640 --> 01:09:42,490\nNot the biggest of objectives.\n\n1324\n01:09:42,490 --> 01:09:44,860\nIt does make up a fairly\nsmall part of the exam, but\n\n1325\n01:09:44,860 --> 01:09:47,250\nyou'll see that it's a lot of neat stuff.\n\n1326\n01:09:47,250 --> 01:09:51,140\nRedundant routers, syslog, SNP,\n\n1327\n01:09:51,140 --> 01:09:53,380\nvery powerful stuff that we\ncan choose to use on our own.\n\n1328\n01:09:55,080 --> 01:09:55,810\nAll right.\nWell, ladies and\n\n1329\n01:09:55,810 --> 01:09:57,350\ngentlemen, I hope you enjoyed the show.\n\n1330\n01:09:57,350 --> 01:10:00,030\nAs always, if you have any questions live,\nduring the show,\n\n1331\n01:10:00,030 --> 01:10:01,990\nyou can go to ITPro.tv/live.\n\n1332\n01:10:01,990 --> 01:10:04,760\nYou'll see our chat box\nright beneath the video.\n\n1333\n01:10:04,760 --> 01:10:06,230\nYou can ask your questions\nduring the show.\n\n1334\n01:10:06,230 --> 01:10:07,710\nWe monitor and answer them.\n\n1335\n01:10:07,710 --> 01:10:11,230\nYou can also use the Q and\nA link 24 hours a day, whenever you want.\n\n1336\n01:10:11,230 --> 01:10:13,390\nGo into the Q and A,\npost your questions there.\n\n1337\n01:10:13,390 --> 01:10:14,000\nWe answer them.\n\n1338\n01:10:14,000 --> 01:10:16,270\nI know I took some time off for\nthe holidays, so I gotta sit down and\n\n1339\n01:10:16,270 --> 01:10:18,890\nlook, and\nsee if there's questions right now.\n\n1340\n01:10:18,890 --> 01:10:22,510\nBut, anyhow, definitely take advantage of\nthat, it's a resource that's there and\n\n1341\n01:10:22,510 --> 01:10:23,030\navailable for you.\n\n1342\n01:10:24,160 --> 01:10:27,270\nAll right, well again,\nhope you guys enjoyed the show.\n\n1343\n01:10:27,270 --> 01:10:29,320\nSigning off for ITProtv I'm Don Pezet.\n\n1344\n01:10:29,320 --> 01:10:29,930\n>> And I'm Ronnie Wong.\n\n1345\n01:10:29,930 --> 01:10:30,986\n>> And we'll see you next time.\n\n1346\n01:10:30,986 --> 01:10:40,986\n[MUSIC]\n\n",
          "vimeoId": "83027970"
        }
      ],
      "title": "IP Services"
    },
    {
      "episodes": [
        {
          "description": "In this episode Ronnie and Don discuss troubleshooting methodologies and demonstrate troubleshooting and correcting issues with OSPF.",
          "length": "6865",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/011-Troubleshooting-Pt-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/011-Troubleshooting-Pt-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/011-Troubleshooting-Pt-1-sm.jpg",
          "title": "Troubleshooting Part 1",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:14,614 --> 00:00:22,406\n[SOUND]\n\n3\n00:00:22,406 --> 00:00:32,406\n[MUSIC]\n\n4\n00:00:33,684 --> 00:00:34,318\nAll right.\n\n5\n00:00:34,318 --> 00:00:35,941\nGood morning, good afternoon,\nand good evening.\n\n6\n00:00:35,941 --> 00:00:36,930\nAnd welcome back.\n\n7\n00:00:36,930 --> 00:00:40,640\nTo another episode of ITProTv, I'm your\nhost Don Pezet today with Mr. Ronnie Wong.\n\n8\n00:00:40,640 --> 00:00:41,700\nHow's it going Ronnie?\n\n9\n00:00:41,700 --> 00:00:43,000\n>> I am doing well,\n\n10\n00:00:43,000 --> 00:00:47,280\nI did not photo bomb anybody at\nthe Golden Globe Awards yesterday.\n\n11\n00:00:47,280 --> 00:00:48,310\n>> Was that the thing to do this year?\n\n12\n00:00:48,310 --> 00:00:49,720\n>> Apparently it was the thing to do.\n\n13\n00:00:49,720 --> 00:00:51,902\n>> If you're gonna bother\ngoing to the Golden Globes.\n\n14\n00:00:51,902 --> 00:00:53,339\n[LAUGH]\n>> Yeah you might as well\n\n15\n00:00:53,339 --> 00:00:54,580\nphoto bomb celebrities.\n\n16\n00:00:54,580 --> 00:00:57,418\n>> Well, that's like\nthe discount awards show right?\n\n17\n00:00:57,418 --> 00:00:58,414\n>> [LAUGH]\n>> [LAUGH]\n\n18\n00:00:58,414 --> 00:01:00,590\n>> Not quite the Oscars.\n\n19\n00:01:00,590 --> 00:01:05,410\n>> We can make that joke because we never\nstand any chance of an award like that.\n\n20\n00:01:05,410 --> 00:01:06,982\n>> That's right.\n[LAUGH]\n\n21\n00:01:06,982 --> 00:01:07,560\n>> All right well,\n\n22\n00:01:07,560 --> 00:01:09,140\nwe've got an exciting\nshow ahead of us today.\n\n23\n00:01:09,140 --> 00:01:11,290\nWe're kind of winding down on this.\n\n24\n00:01:11,290 --> 00:01:14,940\nCCNA objectives, at this point,\nI think we've knocked them all out\n\n25\n00:01:14,940 --> 00:01:19,960\nwith the exception of the trouble shooting\nsections which is what our point is today.\n\n26\n00:01:19,960 --> 00:01:21,880\nUnfortunately, maybe fortunately,\n\n27\n00:01:21,880 --> 00:01:26,000\ndepends on how you look at it, the trouble\nshooting section for the CCNA exam is so\n\n28\n00:01:26,000 --> 00:01:31,500\nbig that we got to break\nit into two shows.\n\n29\n00:01:33,170 --> 00:01:34,970\nSo that's what we're gonna do and\n\n30\n00:01:34,970 --> 00:01:39,050\nin this episode we're going to take a look\nat troubleshooting our routers, and\n\n31\n00:01:39,050 --> 00:01:41,085\nin the next one we'll take a look\nat troubleshooting the switches.\n\n32\n00:01:41,085 --> 00:01:45,810\nAnd there's a lot of overlap between\nthe two, but it's still important.\n\n33\n00:01:45,810 --> 00:01:48,852\n>> Now we do wanna remember that for\nthe CCNA exam.\n\n34\n00:01:48,852 --> 00:01:52,590\nThey're gonna specifically call\nout a lot of different things,\n\n35\n00:01:52,590 --> 00:01:56,630\nbecause they want to actually know,\nhave you been spending time on their\n\n36\n00:01:56,630 --> 00:02:00,020\nequipment on their iOS,\nmaking sure that you've actually been\n\n37\n00:02:00,020 --> 00:02:02,658\ndoing the things that you say you've\nbeen doing and not just reading a book.\n\n38\n00:02:02,658 --> 00:02:06,250\nSo, they're gonna expect you\nto actually have some details\n\n39\n00:02:06,250 --> 00:02:10,060\nabout the way that you're actually\ngoing to try and troubleshoot these,\n\n40\n00:02:10,060 --> 00:02:13,530\nyou'll see some general things and you'll\nsee some very specific things as well.\n\n41\n00:02:13,530 --> 00:02:15,980\nSo do pay attention for\nthese couple of shows.\n\n42\n00:02:15,980 --> 00:02:19,940\n>> Anybody can figure out how a router\nis supposed to work when things\n\n43\n00:02:19,940 --> 00:02:20,770\nare working right.\n\n44\n00:02:20,770 --> 00:02:25,760\nBut when things go wrong Figuring\nout the cause, finding that cause.\n\n45\n00:02:25,760 --> 00:02:28,980\nFinding the correction,\ngetting it in place, that's a big deal.\n\n46\n00:02:28,980 --> 00:02:32,170\n>> Yeah.\n>> Another thing is on the exam.\n\n47\n00:02:32,170 --> 00:02:35,520\nWe're somewhat restricted to what\nwere allowed to talk about as far as\n\n48\n00:02:35,520 --> 00:02:36,770\nbeing on the exam.\n\n49\n00:02:36,770 --> 00:02:38,489\nThere are simulation questions,\n\n50\n00:02:38,489 --> 00:02:41,690\nwe can say the things that\nCisco tells us it's public.\n\n51\n00:02:41,690 --> 00:02:45,210\nThere are simulations where you won't\njust get a multiple choice question, but\n\n52\n00:02:45,210 --> 00:02:47,600\nyou'll actually get a router.\n\n53\n00:02:47,600 --> 00:02:49,600\nThey normally take two forms.\n\n54\n00:02:49,600 --> 00:02:53,670\nOne form is you'll get\na trouble shooting question or\n\n55\n00:02:53,670 --> 00:02:56,170\nwhatever they'll give you,\nsome routers and some switches.\n\n56\n00:02:56,170 --> 00:02:58,630\nAnd they'll tell you to find and\nfix a problem.\n\n57\n00:02:58,630 --> 00:03:01,930\nSo you've got to locate that issue,\nand correct it.\n\n58\n00:03:01,930 --> 00:03:04,000\nCorrecting it is the big deal.\n\n59\n00:03:04,000 --> 00:03:09,240\nBut sometimes, you'll get ones\nthat say locate the problem and\n\n60\n00:03:09,240 --> 00:03:11,930\nthen they'll have just a multiple\nchoice question about it.\n\n61\n00:03:11,930 --> 00:03:15,820\nSo you've got to use the lab equipment,\nbut you're using show commands.\n\n62\n00:03:15,820 --> 00:03:17,690\nYou're finding a problem, right?\n\n63\n00:03:17,690 --> 00:03:20,600\nAnd then you go and answer a multiple\nchoice question based on that.\n\n64\n00:03:20,600 --> 00:03:22,010\nKnowing the show commands,\n\n65\n00:03:22,010 --> 00:03:26,010\nthat's a big deal because that's\ngoing to help you find that problem.\n\n66\n00:03:26,010 --> 00:03:30,070\nUsually fixing it is easy once you found\nthe problem, fixing it's not so difficult.\n\n67\n00:03:30,070 --> 00:03:30,680\n>> Yeah.\n\n68\n00:03:30,680 --> 00:03:33,650\nWe've got to remember at this point,\nespecially with the trouble shooting,\n\n69\n00:03:33,650 --> 00:03:41,370\nthat what we have is, we just can't do\nthe show running the .config command.\n\n70\n00:03:41,370 --> 00:03:44,900\nThat's the easiest one for us to do,\n\n71\n00:03:44,900 --> 00:03:48,405\nbut on Cisco,\non those particular types of simulations.\n\n72\n00:03:48,405 --> 00:03:52,925\nThey expect you to actually go hey,\nwe want to actually show you more so\n\n73\n00:03:52,925 --> 00:03:54,925\nthey're not going to give\nyou that sometimes and\n\n74\n00:03:54,925 --> 00:03:57,345\nyou'll have to actually\nknow these commands.\n\n75\n00:03:57,345 --> 00:03:59,635\nSo we've already talked about a lot\nof them during our shows, and\n\n76\n00:03:59,635 --> 00:04:03,430\nwe've demonstrated a lot of them during\nour shows but now is again a review.\n\n77\n00:04:03,430 --> 00:04:06,450\nIf you're not familiar with any of\nthe commands that we run today,\n\n78\n00:04:06,450 --> 00:04:09,940\nmake sure you're familiar with\nthem before you take the exam.\n\n79\n00:04:09,940 --> 00:04:11,170\n>> And Ronnie, keep on me.\n\n80\n00:04:11,170 --> 00:04:13,515\n>> Yeah.\n>> I'm gonna try and keep notes as we go.\n\n81\n00:04:13,515 --> 00:04:15,090\n>> Mm-hm.\n>> And so every time we show a command,\n\n82\n00:04:15,090 --> 00:04:18,370\nI wanna write it down and\nthen later on I'll post it on the website.\n\n83\n00:04:18,370 --> 00:04:19,010\n>> Yeah.\n>> With the show.\n\n84\n00:04:19,010 --> 00:04:21,185\nThat way the viewers can have it.\n\n85\n00:04:21,185 --> 00:04:24,890\nBut you mentioned one of\nthe go to commands for\n\n86\n00:04:24,890 --> 00:04:28,060\nme because,\nwe can just start right out here.\n\n87\n00:04:28,060 --> 00:04:32,660\nThe first objective is identifying\ncorrect common network problems.\n\n88\n00:04:32,660 --> 00:04:34,730\nSo let's talk about what's common.\n\n89\n00:04:34,730 --> 00:04:39,060\nI'll tell you, nine times out of\nten when I'm dealing with an error,\n\n90\n00:04:39,060 --> 00:04:39,998\nit's always the same problem.\n\n91\n00:04:39,998 --> 00:04:40,704\nMe, right?\n\n92\n00:04:40,704 --> 00:04:44,870\n>> [LAUGH]\n>> So it is really easy to make typos,\n\n93\n00:04:44,870 --> 00:04:48,630\nto make simple typing errors,\nwhen entering in data.\n\n94\n00:04:48,630 --> 00:04:52,060\nSo, you can end up with something\nthat looks very correct, but,\n\n95\n00:04:52,060 --> 00:04:53,920\nat the end of the day isn't correct.\n\n96\n00:04:53,920 --> 00:04:57,930\nAnd, if you can spot that,\nthen it's easy to fix.\n\n97\n00:04:57,930 --> 00:04:58,640\nAnd, so,\n\n98\n00:04:58,640 --> 00:05:03,830\none of my first troubleshooting commands\nis that show running dash config, right?\n\n99\n00:05:03,830 --> 00:05:05,280\nLet me add that to our notes, right?\n\n100\n00:05:05,280 --> 00:05:07,289\nSo show running-config, and\n\n101\n00:05:07,289 --> 00:05:11,081\neverybody should be pretty\nfamiliar with [CROSSTALK] now.\n\n102\n00:05:11,081 --> 00:05:16,140\n>> Yeah, now, in this particular command,\nremember what it does tell us here?\n\n103\n00:05:16,140 --> 00:05:22,580\nIt tells us what the actual router or\nswitch is actually using at this point.\n\n104\n00:05:22,580 --> 00:05:26,600\nIf everything is running correctly it\ntells us that our router is configured\n\n105\n00:05:26,600 --> 00:05:27,720\nperfectly.\n\n106\n00:05:27,720 --> 00:05:31,903\nIf we are having issues this is the one\nthat is the mother load for us.\n\n107\n00:05:31,903 --> 00:05:32,569\n>> [LAUGH]\n>> And\n\n108\n00:05:32,569 --> 00:05:34,534\nwe're talking about mining information.\n\n109\n00:05:34,534 --> 00:05:37,100\nBut remember on the exams,\nyou may actually try and\n\n110\n00:05:37,100 --> 00:05:39,120\ntype this in on the simulation, and\n\n111\n00:05:39,120 --> 00:05:42,020\nall of a sudden you see it says,\nyeah you can't run that command.\n\n112\n00:05:42,020 --> 00:05:45,660\nSo, the detailed command you're\ngoing to have to get into.\n\n113\n00:05:45,660 --> 00:05:48,700\nSo, it's not enough just to say,\nI'll just rely on this.\n\n114\n00:05:48,700 --> 00:05:50,000\nSometimes you'll be able to, but\n\n115\n00:05:50,000 --> 00:05:54,870\nthe majority of the times they expect to\nknow exactly what you're looking for.\n\n116\n00:05:54,870 --> 00:05:56,305\n>> Yeah.\nCouple other things I want to mention on\n\n117\n00:05:56,305 --> 00:05:59,370\nthis, show running config on a router.\n\n118\n00:05:59,370 --> 00:06:00,720\nIt's not normally very long.\n\n119\n00:06:00,720 --> 00:06:01,380\n>> Right.\n>> But\n\n120\n00:06:01,380 --> 00:06:04,650\nthere is some stuff up at the top\nthat is like the certificate chain,\n\n121\n00:06:04,650 --> 00:06:08,020\nwhich can be a massive chunk of hash data.\n\n122\n00:06:08,020 --> 00:06:10,200\nOn switches, there can be tons and\n\n123\n00:06:10,200 --> 00:06:14,110\ntons of ports so the the run and\nconfigure can be a very long thing.\n\n124\n00:06:14,110 --> 00:06:18,700\nAnd sifting through it trying to find\nsomething in particular that you want,\n\n125\n00:06:18,700 --> 00:06:20,130\nwell it can be a little challenging.\n\n126\n00:06:20,130 --> 00:06:22,990\n>> Yeah.\n>> So CISCO does give us a few shortcut\n\n127\n00:06:22,990 --> 00:06:27,520\ncommands we can use with\nthe show running config.\n\n128\n00:06:27,520 --> 00:06:31,548\nFor example, I could say show\nrunning config, interface,\n\n129\n00:06:31,548 --> 00:06:35,305\nfastethernet 0/0.\n\n130\n00:06:35,305 --> 00:06:39,194\nSo that would view the config,\n\n131\n00:06:39,194 --> 00:06:43,750\nwhoops [LAUGH] for one interface.\n\n132\n00:06:43,750 --> 00:06:45,850\nThat is incredibly useful.\n\n133\n00:06:45,850 --> 00:06:47,010\nLet me show you an example.\n\n134\n00:06:47,010 --> 00:06:49,390\nI'm connected into a router here.\n\n135\n00:06:49,390 --> 00:06:52,880\nAnd, you know what.\n\n136\n00:06:52,880 --> 00:06:56,060\nWe'll talk about this command in a minute\nif I can type it there, all right.\n\n137\n00:06:56,060 --> 00:06:57,500\nSo if I wanna say.\n\n138\n00:06:57,500 --> 00:07:01,590\nIf I wanna view the configuration for\ngigabitethernet 0/1.\n\n139\n00:07:01,590 --> 00:07:05,609\nI could say show running-config.\n\n140\n00:07:05,609 --> 00:07:06,151\nRight?\n\n141\n00:07:06,151 --> 00:07:10,110\nAnd so here's my config, and\nthen I can just page through until I\n\n142\n00:07:10,110 --> 00:07:14,600\nfind gigabit 0/1, and there it is.\n\n143\n00:07:14,600 --> 00:07:15,490\nYeah, whoops.\n\n144\n00:07:15,490 --> 00:07:16,810\nAll right?\nAnd so I can find it.\n\n145\n00:07:16,810 --> 00:07:18,515\nAnd there it is, and\nI can look at that configuration.\n\n146\n00:07:18,515 --> 00:07:19,170\n>> Mm-hm.\n\n147\n00:07:19,170 --> 00:07:20,240\n>> Great, right?\n\n148\n00:07:20,240 --> 00:07:26,660\nBut I could have just as easily\ntyped show running-config\n\n149\n00:07:26,660 --> 00:07:32,611\ninterface gigabit ethernet 0/1 etherme,\n>> [LAUGH]\n\n150\n00:07:32,611 --> 00:07:35,470\n>> [LAUGH] there we go.\n\n151\n00:07:35,470 --> 00:07:39,840\nAnd now it give me just the configuration\nfor that one interface much faster and\n\n152\n00:07:39,840 --> 00:07:44,160\nnormally I would abbreviate\nthat much smaller, right?\n\n153\n00:07:44,160 --> 00:07:48,653\nI'm typing out the whole command so you\nguys can see it for your own reference,\n\n154\n00:07:48,653 --> 00:07:52,212\nbut in real-life land that long\ncommand can be much shorter.\n\n155\n00:07:52,212 --> 00:07:55,614\n>> That's something we can also\npoint out to you, as well, for\n\n156\n00:07:55,614 --> 00:07:58,632\nthe purpose of the exam,\nsince they do tell you this.\n\n157\n00:07:58,632 --> 00:08:03,700\nThey don't really judge you on how you get\nthe answer in terms of doing that, right?\n\n158\n00:08:03,700 --> 00:08:07,670\nBut they do expect you to be able to get\naccess to the information that you need.\n\n159\n00:08:07,670 --> 00:08:11,690\nBut whether you do abbreviation or\nnot is probably gonna work perfectly fine.\n\n160\n00:08:11,690 --> 00:08:14,940\nBut just make sure you're practicing\nthese commands is really the key for\n\n161\n00:08:14,940 --> 00:08:16,070\nus when you do this.\n\n162\n00:08:16,070 --> 00:08:19,370\nNow Don had actually\nmentioned this idea of\n\n163\n00:08:19,370 --> 00:08:22,370\nthe person being the actual overall issue.\n\n164\n00:08:22,370 --> 00:08:23,590\nAnd that's true.\n\n165\n00:08:23,590 --> 00:08:27,720\nBut even so, on those simulations on\nthe different things that you'll get,\n\n166\n00:08:27,720 --> 00:08:31,440\nthey expect you to actually use the router\nto begin your steps in troubleshooting.\n\n167\n00:08:31,440 --> 00:08:33,650\nSo keeping these keys\nhere are gonna be key.\n\n168\n00:08:33,650 --> 00:08:36,570\nAnd Don's actually about to talk\nabout different filters for\n\n169\n00:08:36,570 --> 00:08:39,400\nus which is really good\ncuz I hate to say it.\n\n170\n00:08:39,400 --> 00:08:41,540\nI have a problem in running\nthese filters myself.\n\n171\n00:08:41,540 --> 00:08:42,050\n>> Yeah.\n\n172\n00:08:42,050 --> 00:08:44,650\nThese are another one\nthat can be really handy,\n\n173\n00:08:44,650 --> 00:08:49,095\nbecause some of the things like show\nrunning can be interfaced, blah blah blah.\n\n174\n00:08:49,095 --> 00:08:51,030\nRight?\nThat's great for interfaces, but\n\n175\n00:08:51,030 --> 00:08:53,760\nwhat about if I want to see my VTY lines?\n\n176\n00:08:53,760 --> 00:08:58,578\nThe VTY lines aren't interfaces, so the\ninterface command doesn't work on them.\n\n177\n00:08:58,578 --> 00:09:01,920\nRight?\nCISCO introduced basically the UNIX grep\n\n178\n00:09:01,920 --> 00:09:06,110\ncommand into their iOS and I know you guys\nhave seen us use it in other episodes but\n\n179\n00:09:06,110 --> 00:09:07,560\nI wanna mention it here.\n\n180\n00:09:07,560 --> 00:09:12,600\nYou have a couple of filter commands you\ncan use, include, exclude, section, and\n\n181\n00:09:12,600 --> 00:09:16,570\nbegin, and each one has a slightly\ndifferent purpose, right?\n\n182\n00:09:18,420 --> 00:09:22,120\nLet me just real quick on this router,\ncuz I didn't do it ahead of time.\n\n183\n00:09:22,120 --> 00:09:24,226\nLet me just configure OSPF real quick.\n\n184\n00:09:24,226 --> 00:09:26,101\nI'll do, EIGRP.\n\n185\n00:09:30,601 --> 00:09:36,690\nAnd just so I have something out\nthere that I can advertise there.\n\n186\n00:09:36,690 --> 00:09:37,400\nAlright.\n\n187\n00:09:37,400 --> 00:09:39,830\nSo if I wanna view my VTY lines for\n\n188\n00:09:39,830 --> 00:09:44,780\nexample, I could do show running-\nconfig like I did before, and\n\n189\n00:09:44,780 --> 00:09:48,272\nI could page down all the way\ndown to the bottom of this thing.\n\n190\n00:09:48,272 --> 00:09:53,690\n[LAUGH] Just skipping past all this\nstuff until I finally get somewhere.\n\n191\n00:09:53,690 --> 00:09:54,940\nThere we go, to the bottom.\n\n192\n00:09:54,940 --> 00:09:56,958\nIt's actually the very last thing for me.\n\n193\n00:09:56,958 --> 00:09:59,140\nThere's my VTYs,right?\n\n194\n00:09:59,140 --> 00:10:03,290\nBut, instead, what I could have done\nis taken show running config and\n\n195\n00:10:03,290 --> 00:10:05,540\nused the pipe command.\n\n196\n00:10:05,540 --> 00:10:08,600\nAnd pipe that into the begins command.\n\n197\n00:10:08,600 --> 00:10:13,708\nIn other words, show me the running\nconfig and begin when you see VTY.\n\n198\n00:10:13,708 --> 00:10:15,161\nAlright.\n\n199\n00:10:15,161 --> 00:10:18,350\nS o begin when you show VTY and\nnow it's gonna do the same thing but\n\n200\n00:10:18,350 --> 00:10:24,810\nit's gonna skip all the way down\nto that point and there's my VTYs.\n\n201\n00:10:24,810 --> 00:10:29,600\nSaves a lot of time, gets us right\nthere that information using begin.\n\n202\n00:10:29,600 --> 00:10:30,870\nInclude and exclude,\n\n203\n00:10:30,870 --> 00:10:35,010\nthat's a good one to be able to see\nlines that match a certain pattern.\n\n204\n00:10:35,010 --> 00:10:39,700\nSo I might say include address, so\n\n205\n00:10:39,700 --> 00:10:43,170\nI wanna see everywhere where I've\nassigned an IP address.right?\n\n206\n00:10:43,170 --> 00:10:47,190\nAnd so there I can see the IP addresses\nthat are assigned to this router.\n\n207\n00:10:47,190 --> 00:10:51,630\nOr where I really use that one is\nwhere I'll do include IP route.\n\n208\n00:10:51,630 --> 00:10:55,880\nIn other words, show me all\nthe static routes that are put in,\n\n209\n00:10:55,880 --> 00:10:58,700\ncuz any static route is gonna\nstart with IP route and\n\n210\n00:10:58,700 --> 00:11:01,280\nI can see the only static route\nI have is that one default.\n\n211\n00:11:01,280 --> 00:11:08,570\nNow I might have other ones,\nlet me just fill in a few others here.\n\n212\n00:11:12,410 --> 00:11:14,810\nSo if I throw in a couple\nother little routes here.\n\n213\n00:11:17,230 --> 00:11:20,600\nWhen I look at my routing table I can\nsee those static routes, right there.\n\n214\n00:11:20,600 --> 00:11:23,330\nBut, sometimes the static route might\nnot make it into the routing table\n\n215\n00:11:23,330 --> 00:11:26,970\nbecause it might get overridden by\ndirectly connected or something like that.\n\n216\n00:11:26,970 --> 00:11:30,700\nSo if I just want to see the routes\nthat are entered in the config.\n\n217\n00:11:32,620 --> 00:11:36,780\nOops, I want to do a show running,\nactually let me get out of config here.\n\n218\n00:11:40,022 --> 00:11:44,240\nShow running- config and I'm including\njust the lines that include IP route,\n\n219\n00:11:44,240 --> 00:11:47,030\nand there's all the static\nroutes that we put in.\n\n220\n00:11:47,030 --> 00:11:48,995\nI can see them right there.\n\n221\n00:11:48,995 --> 00:11:50,070\nRight.\nSo let me just kind of\n\n222\n00:11:50,070 --> 00:11:53,640\nthrow some of these examples\ninto that notepad file.\n\n223\n00:11:54,930 --> 00:11:58,760\nAgain just so we have some samples\nof how we can use these filters and\n\n224\n00:11:58,760 --> 00:12:01,940\nhow they can be useful to\nkind of find information.\n\n225\n00:12:01,940 --> 00:12:05,590\nThe one command that I find\nmost people don't know about.\n\n226\n00:12:05,590 --> 00:12:07,560\nWhere's the other one I wanted to get?\n\n227\n00:12:07,560 --> 00:12:08,840\nIs the section command.\n\n228\n00:12:08,840 --> 00:12:11,250\nAnd the section command\nwas not added originally.\n\n229\n00:12:11,250 --> 00:12:13,090\nThat's why most people\ndon't know about it.\n\n230\n00:12:13,090 --> 00:12:17,970\nWhen Cisco originally introduced this,\nthey did include, exclude and begin.\n\n231\n00:12:17,970 --> 00:12:20,820\nAnd a little later they added the section\ncommand, but it's been around for\n\n232\n00:12:20,820 --> 00:12:22,300\nseveral years now.\n\n233\n00:12:22,300 --> 00:12:27,430\nIf I want to see something like my\nE I G R P configuration, right?\n\n234\n00:12:27,430 --> 00:12:32,060\nI could say, show running- config.\n\n235\n00:12:32,060 --> 00:12:33,980\nBegin, eigrp.\n\n236\n00:12:33,980 --> 00:12:34,710\nRight?\n\n237\n00:12:34,710 --> 00:12:37,600\nAnd it's going to go in and\nfind EIGRP and show me that.\n\n238\n00:12:37,600 --> 00:12:39,680\nBut see how it shows\neverything after it also.\n\n239\n00:12:39,680 --> 00:12:43,390\nBecause I'm just saying begin\non the first line as the EIGRP.\n\n240\n00:12:43,390 --> 00:12:48,160\nWell, instead of using begin,\nI can use the section command.\n\n241\n00:12:48,160 --> 00:12:51,720\nAnd this time it will just\nshow me the EIGRP section.\n\n242\n00:12:51,720 --> 00:12:54,180\nIt's kinda like the interface command.\n\n243\n00:12:54,180 --> 00:13:01,400\nSo another handy one to use to be able\nto see just what you're looking for.\n\n244\n00:13:01,400 --> 00:13:05,460\n>> Yeah, and these commands\nare really good in terms of speed.\n\n245\n00:13:05,460 --> 00:13:08,700\nRemember that the exam,\nfor your sake and for\n\n246\n00:13:08,700 --> 00:13:11,640\nour sakes here,\nyou have to be fast at this stuff.\n\n247\n00:13:11,640 --> 00:13:13,410\nSo you could take all day, and\n\n248\n00:13:13,410 --> 00:13:17,330\nactually just doing show run and\nkeep running through all the way down.\n\n249\n00:13:17,330 --> 00:13:18,980\nThat just eats up you time.\n\n250\n00:13:18,980 --> 00:13:22,610\nBy being able to practice some of these\nclicker commands and these filters\n\n251\n00:13:22,610 --> 00:13:27,000\nit'll help you zoom and kind of get you\nright where you actually need to be.\n\n252\n00:13:27,000 --> 00:13:28,920\nAnd this may be a key for\nyou in terms of timing.\n\n253\n00:13:30,290 --> 00:13:32,980\n>> All right, a couple other\ncommands that are really handy that\n\n254\n00:13:32,980 --> 00:13:34,379\nwe've used in other shows.\n\n255\n00:13:35,380 --> 00:13:38,760\nIf you want to verify your\nIP addresses on your router,\n\n256\n00:13:38,760 --> 00:13:40,800\nyou'll make sure you have\nthe proper IDs put in.\n\n257\n00:13:40,800 --> 00:13:45,410\nOne of my favorite commands is,\nshow ip interface brief, right?\n\n258\n00:13:45,410 --> 00:13:51,540\nSo it shows current IDs\nas well as port status.\n\n259\n00:13:51,540 --> 00:13:55,190\nIt'll show you if your ports are up or\ndown, or both,right?\n\n260\n00:13:55,190 --> 00:14:01,226\nSo I can go in here and\nI can do a show IP interface brief.\n\n261\n00:14:03,143 --> 00:14:06,470\nAnd I can get that list of interfaces.\n\n262\n00:14:06,470 --> 00:14:09,330\nI can see their IP address,\nwhere the IP came from.\n\n263\n00:14:09,330 --> 00:14:12,410\nSo if it was DHCP versus NVRAM.\n\n264\n00:14:12,410 --> 00:14:14,450\nThat means it came from\nthe startup config.\n\n265\n00:14:14,450 --> 00:14:18,040\nAnd you can see if they're up, up or\ndown, down, administratively down.\n\n266\n00:14:18,040 --> 00:14:20,860\nQuick, easy way to get that status and\nto find the interface names.\n\n267\n00:14:20,860 --> 00:14:21,790\nThat's a handy one too.\n\n268\n00:14:23,730 --> 00:14:26,840\n>> Now Don, since we're out here, do we\nwanna talk about the statuses already or\n\n269\n00:14:26,840 --> 00:14:29,000\ndo we wanna kinda wait a little bit and?\n\n270\n00:14:29,000 --> 00:14:30,510\n>> Might as well while we're here.\n\n271\n00:14:30,510 --> 00:14:32,430\nCuz you've got these statuses and\n\n272\n00:14:32,430 --> 00:14:35,270\nyou'll see here where it just\nsays Status and Protocol, right?\n\n273\n00:14:35,270 --> 00:14:36,539\nSo what do those mean?\n\n274\n00:14:38,090 --> 00:14:39,810\nIt goes back to the OSI model.\n\n275\n00:14:39,810 --> 00:14:41,230\nLet's talk about that briefly.\n\n276\n00:14:41,230 --> 00:14:46,660\nI know it's review, because you should\nalready be a CCMT by this point,\n\n277\n00:14:46,660 --> 00:14:52,020\nbut the OSI model is really handy, because\nit is an excellent troubleshooting tool.\n\n278\n00:14:52,020 --> 00:14:56,470\nWhen I start to address a problem,\nI usually use the OSI model as my guide.\n\n279\n00:14:56,470 --> 00:14:57,990\nI start at layer one.\n\n280\n00:14:57,990 --> 00:15:00,500\nAt the physical layer, and\nI start working my way up, and\n\n281\n00:15:00,500 --> 00:15:05,930\nI do that because physical errors are the\neasiest to fix and they're pretty common.\n\n282\n00:15:05,930 --> 00:15:09,255\n>> Yeah I can't tell you and\nDon's actually seen me do this before.\n\n283\n00:15:09,255 --> 00:15:11,160\nWw have a router sitting right back here.\n\n284\n00:15:11,160 --> 00:15:14,660\nI took this blue console cable which\nis right here on the screen and\n\n285\n00:15:14,660 --> 00:15:17,100\nI wanted to plug it in\nto just a blue port.\n\n286\n00:15:17,100 --> 00:15:20,310\nOn this router, well, Don was the first\none to actually tell me that,\n\n287\n00:15:20,310 --> 00:15:23,120\nhey, that's not the right consul for it.\n\n288\n00:15:23,120 --> 00:15:25,840\nIt was actually some, I don't even\nremember what other port that thing is.\n\n289\n00:15:25,840 --> 00:15:29,960\n>> Yes that is a diagnostic port\non this T3 card in here and, yeah.\n\n290\n00:15:29,960 --> 00:15:33,370\n>> And I kept just trying to and\nI was like, why can't I consul in this?\n\n291\n00:15:33,370 --> 00:15:34,500\nAnd now it looks better.\n\n292\n00:15:34,500 --> 00:15:36,690\nWell first of all that's\nnot the right port.\n\n293\n00:15:36,690 --> 00:15:39,877\nWell I guarantee you even though\nthat's a later issue me but\n\n294\n00:15:39,877 --> 00:15:43,970\nat the same time that's a physical\nissue that was very easily correctable.\n\n295\n00:15:43,970 --> 00:15:45,655\nSo if you are doing this right and\n\n296\n00:15:45,655 --> 00:15:50,102\nwhen you're actually out there configuring\ndevices and they want you to be faster.\n\n297\n00:15:50,102 --> 00:15:51,470\nIt's easy to just miss.\n\n298\n00:15:51,470 --> 00:15:53,305\nPlug to certain things like that.\n\n299\n00:15:53,305 --> 00:15:54,114\nSo be aware.\n\n300\n00:15:54,114 --> 00:15:57,520\nIt happens, apparently,\nlike a couple weeks ago.\n\n301\n00:15:57,520 --> 00:15:58,820\n>> In your defense, Ronnie.\n\n302\n00:15:58,820 --> 00:16:02,450\nThat diag port,\nit's got the light blue mark on it.\n\n303\n00:16:02,450 --> 00:16:06,470\nWhich, on every Cisco device, that light\nblue mark, that's the console port.\n\n304\n00:16:06,470 --> 00:16:07,380\n>> Except for this one.\n\n305\n00:16:07,380 --> 00:16:10,140\n>> But on this little card actually\nthat's not a T3 card is it.\n\n306\n00:16:10,140 --> 00:16:11,540\nThat's a cellular card.\n\n307\n00:16:11,540 --> 00:16:15,220\nSo that's like a 3G card\nthat's in this router and\n\n308\n00:16:15,220 --> 00:16:19,190\nit's got a diagnostic port and\nit does function like a console port but\n\n309\n00:16:19,190 --> 00:16:22,060\nit runs at a different speed which\nis why is wasn't working for you.\n\n310\n00:16:22,060 --> 00:16:24,160\nBut yeah, easy mistake to make.\n\n311\n00:16:24,160 --> 00:16:25,620\nBut you start it at layer one.\n\n312\n00:16:25,620 --> 00:16:30,960\nI was just telling Ronnie, if I look\ntired today, it's because I was up until\n\n313\n00:16:30,960 --> 00:16:35,850\nabout 2:00 AM last night helping out a\ncompany with their MPLS lines in Atlanta.\n\n314\n00:16:35,850 --> 00:16:41,890\nAnd the issue that we were having was that\nthe MP less lines were supposed to be\n\n315\n00:16:41,890 --> 00:16:47,830\ngetting about 17 megabit of through put,\nand they were only getting about eight.\n\n316\n00:16:47,830 --> 00:16:51,490\nSo we were working on it, and\nit was a fairly complex configuration.\n\n317\n00:16:51,490 --> 00:16:55,600\nThere were GRE tunnels in place and\na VPN, and all sorts of stuff.\n\n318\n00:16:55,600 --> 00:16:59,300\nSo I started peeling off\nlayers of complexity.\n\n319\n00:16:59,300 --> 00:17:03,320\nRemoving the tunnels, and\njust flowing data over the raw interfaces.\n\n320\n00:17:03,320 --> 00:17:07,440\nAt the end of the day, it turned\nout not to be the routers at all.\n\n321\n00:17:07,440 --> 00:17:12,420\nBut on the switches, the old routers that\nwere there were only 10 megabit routers,\n\n322\n00:17:12,420 --> 00:17:16,500\nand someone had hard set\nthe switches to be 10 megabit ports.\n\n323\n00:17:16,500 --> 00:17:19,250\nSo the routers, regardless of the fact\nthat they were gigabit routers,\n\n324\n00:17:19,250 --> 00:17:20,980\nwere only operating at 10 megabit.\n\n325\n00:17:20,980 --> 00:17:23,690\nWhich is what was keeping us down\nfrom hitting our maximum through put.\n\n326\n00:17:23,690 --> 00:17:27,710\nTurned out to be a really simple problem,\nand really low in the OSI model.\n\n327\n00:17:27,710 --> 00:17:31,370\nSo if you start there,\nstart at layer one and work your way up,\n\n328\n00:17:31,370 --> 00:17:34,620\nyou'll find life is a lot easier.\n\n329\n00:17:34,620 --> 00:17:37,260\nAnd that's part of what show\nIP interface brief does.\n\n330\n00:17:37,260 --> 00:17:40,100\n>> Yep.\n>> Right, when you look at the two columns\n\n331\n00:17:40,100 --> 00:17:41,910\nhere, status and protocol.\n\n332\n00:17:41,910 --> 00:17:45,490\nWell status,\nthat's talking about layer one.\n\n333\n00:17:45,490 --> 00:17:47,770\nJust the physical interface itself.\n\n334\n00:17:47,770 --> 00:17:49,840\nHave we turned it on or not?\n\n335\n00:17:49,840 --> 00:17:53,780\nIf it says up, usually that means we've\nturned it on, and it's got a link light,\n\n336\n00:17:53,780 --> 00:17:55,150\nand it's happy.\n\n337\n00:17:55,150 --> 00:17:58,805\nIf it says administratively down,\nthat means we've turned it off.\n\n338\n00:17:58,805 --> 00:17:59,850\nRight?\n\n339\n00:17:59,850 --> 00:18:03,130\nIf it says down though, that's a bad one.\n\n340\n00:18:03,130 --> 00:18:07,860\nThat means that we've turned it on,\nbut it doesn't have a link, right?\n\n341\n00:18:07,860 --> 00:18:10,320\nThis typically means\nthe cable is unplugged, or\n\n342\n00:18:10,320 --> 00:18:15,320\nyou're using the wrong cable, or\nsome directly attached device like\n\n343\n00:18:15,320 --> 00:18:18,510\na CSU/DSU is not powered on or\nnot hooked up right.\n\n344\n00:18:18,510 --> 00:18:19,530\nNot configured.\n\n345\n00:18:19,530 --> 00:18:22,210\nSo this is typically a layer one issue.\n\n346\n00:18:22,210 --> 00:18:24,020\nA physical thing that we need to correct.\n\n347\n00:18:25,120 --> 00:18:28,510\n>> Now I like seeing this again, analogies\nkind of help us out here a little bit.\n\n348\n00:18:28,510 --> 00:18:33,460\nIf you, remember, on the back of your PC\nyou have your nic, it has a link light.\n\n349\n00:18:33,460 --> 00:18:37,910\nAnd activity log, which I couldn't\nremember what I was gonna say.\n\n350\n00:18:37,910 --> 00:18:41,020\nThe status for\nus here is actually like the link line.\n\n351\n00:18:41,020 --> 00:18:44,448\nIt tells whether or\nnot the device is actually working.\n\n352\n00:18:44,448 --> 00:18:47,765\nAnd that layer one, usually means\nit was unplugged or a wrong cable.\n\n353\n00:18:47,765 --> 00:18:50,605\nYou're not going to get that link light so\nthat's what we have here.\n\n354\n00:18:50,605 --> 00:18:56,445\nSo the one that we're really looking for\nall the time right is the up up.\n\n355\n00:18:56,445 --> 00:18:59,305\nIf we don't have an up\nup on the status and\n\n356\n00:18:59,305 --> 00:19:04,775\nthe protocol well we're probably not\ngoing to be able to communicate here.\n\n357\n00:19:04,775 --> 00:19:07,625\nSo as Don brings up yeah Lion is up and\nhappy.\n\n358\n00:19:07,625 --> 00:19:08,495\nI like that [LAUGH].\n\n359\n00:19:08,495 --> 00:19:11,630\n>> So\nI'm just going to write this here that.\n\n360\n00:19:11,630 --> 00:19:16,420\nIt's not a hard fact, but it basically\nmaps the layer one, layer two.\n\n361\n00:19:16,420 --> 00:19:19,750\nSo the status and the protocol, so\n\n362\n00:19:19,750 --> 00:19:23,810\nstatus and protocol,\nthat's what those two columns are called.\n\n363\n00:19:23,810 --> 00:19:27,080\nAnd it basically maps out\nwith layer one and layer two.\n\n364\n00:19:27,080 --> 00:19:31,790\nAnd when the first part is staying up,\nthat means the line is up and happy.\n\n365\n00:19:31,790 --> 00:19:34,645\nIn theory it would be\nworking at that point.\n\n366\n00:19:34,645 --> 00:19:35,150\nOkay.\n\n367\n00:19:35,150 --> 00:19:39,054\nNow, you can have layer three issues,\nbad IP addresses and whatever but\n\n368\n00:19:39,054 --> 00:19:43,220\nas far as the physical line itself is\nconcerned, data should be able to flow.\n\n369\n00:19:44,830 --> 00:19:46,280\nUp down.\n\n370\n00:19:46,280 --> 00:19:49,830\nThat means we've turned it on,\nwe've got a link light but\n\n371\n00:19:49,830 --> 00:19:52,805\nthere's a problem with\nour layer two protocol.\n\n372\n00:19:52,805 --> 00:19:56,620\nAnd you see this all\nthe time with frame relay.\n\n373\n00:19:56,620 --> 00:20:01,020\nSo I'm just gonna put here\nmisconfigured layer two protocol.\n\n374\n00:20:01,020 --> 00:20:07,070\nAnd normally it is like frame relay,\nor ISDN or whatever.\n\n375\n00:20:07,070 --> 00:20:09,160\nSo the interface might be up,\n\n376\n00:20:09,160 --> 00:20:13,770\nit might have a link light cuz it's seeing\nthe telco switch in the neighborhood.\n\n377\n00:20:13,770 --> 00:20:18,450\nBut it's got the wrong Del C number\nconfigured or we've got the switch type\n\n378\n00:20:18,450 --> 00:20:25,140\nset to ANC, but it should be set\nto Q933A or something like that.\n\n379\n00:20:25,140 --> 00:20:27,490\nThere's a misconfiguration\non the protocol side.\n\n380\n00:20:27,490 --> 00:20:32,645\nIt's almost always a software\nissue at this point.\n\n381\n00:20:32,645 --> 00:20:36,450\nSo I'm going to add that to this.\n\n382\n00:20:36,450 --> 00:20:39,420\nThis one here, the line is up and happy.\n\n383\n00:20:39,420 --> 00:20:41,669\nHere it's typically\nmisconfigured layer two.\n\n384\n00:20:42,970 --> 00:20:48,550\nAnd it's typically a software\nconfiguration error, right?\n\n385\n00:20:48,550 --> 00:20:54,490\nSo not really a physical error at\nthis point versus down down, right?\n\n386\n00:20:54,490 --> 00:20:59,090\nDown down this is a almost\nalways a physical issue.\n\n387\n00:21:00,280 --> 00:21:02,700\nNo link light, etc.\n\n388\n00:21:05,450 --> 00:21:08,708\nOr missing cable, bad cable.\n\n389\n00:21:11,013 --> 00:21:12,970\nBut either way you look at it.\n\n390\n00:21:12,970 --> 00:21:17,112\nLayer one issue is normally what's\ngoing to cause the down down status.\n\n391\n00:21:17,112 --> 00:21:20,600\n>> Now let's talk about the bad\ncables here for just a moment.\n\n392\n00:21:20,600 --> 00:21:23,830\nIt's very easy in server plazas and\n\n393\n00:21:23,830 --> 00:21:26,280\ndifferent places where you tend\nto have these router switches,\n\n394\n00:21:26,280 --> 00:21:30,840\nwhere somebody just starts to pull\non the actual cables a little bit.\n\n395\n00:21:30,840 --> 00:21:33,670\nI remember I was actually\ndoing some contact teaching.\n\n396\n00:21:33,670 --> 00:21:36,970\nThere was a guy in back\nthat would just constantly.\n\n397\n00:21:36,970 --> 00:21:40,490\nHe was constantly touching the cables,\njust and it was like.\n\n398\n00:21:40,490 --> 00:21:42,850\nAnd he said well,\nmy computer keeps dropping off.\n\n399\n00:21:42,850 --> 00:21:46,750\nI was like, well okay, but\nwhat are you doing with the cable?\n\n400\n00:21:46,750 --> 00:21:48,670\nAnd so, he was just tugging on the thing,\n\n401\n00:21:48,670 --> 00:21:52,120\njust and after a while those\nconnectors can get lose, right?\n\n402\n00:21:52,120 --> 00:21:56,010\nOr if they were like that same classroom\nyou're kind of walking on the cables and\n\n403\n00:21:56,010 --> 00:21:57,980\nyou can actually break\ncables pretty easily.\n\n404\n00:21:57,980 --> 00:22:00,590\n>> Yeah I've had that happen many times.\n\n405\n00:22:00,590 --> 00:22:02,980\nA lot of times we get T1 lines installed.\n\n406\n00:22:02,980 --> 00:22:07,000\nThey'll run them into a smart jack or\nat the D mart.\n\n407\n00:22:07,000 --> 00:22:10,350\nAnd it will normally just be\nRJ-45 connectors on the cable.\n\n408\n00:22:10,350 --> 00:22:11,370\nAnd those RJ-45 connectors,\n\n409\n00:22:11,370 --> 00:22:14,120\nthat little plastic clip is\nreally all that holds them in.\n\n410\n00:22:14,120 --> 00:22:16,040\nAnd they're not very reliable.\n\n411\n00:22:16,040 --> 00:22:20,270\nSo you will see that for a lot of people\nthat use standard connectors like that,\n\n412\n00:22:20,270 --> 00:22:23,370\nbut they do come loose,\nthey wiggle loose, the break, whatever.\n\n413\n00:22:23,370 --> 00:22:26,740\nIn mission critical environments\nyou'll see different connectors used\n\n414\n00:22:26,740 --> 00:22:27,260\na lot of times.\n\n415\n00:22:27,260 --> 00:22:29,380\nYou'll see things like the V.35 cables.\n\n416\n00:22:29,380 --> 00:22:32,910\nLet me show you guys a picture of those.\n\n417\n00:22:32,910 --> 00:22:34,720\nLet me see if I can find one real quick.\n\n418\n00:22:37,320 --> 00:22:39,046\nDo me a little Google image search here.\n\n419\n00:22:39,046 --> 00:22:39,673\n>> There you go.\n\n420\n00:22:39,673 --> 00:22:41,080\n>> Yeah, there was a good one.\n\n421\n00:22:41,080 --> 00:22:41,722\nHere we go.\nSo,\n\n422\n00:22:41,722 --> 00:22:46,100\nthis is a V.35 connector, and it's big.\n\n423\n00:22:46,100 --> 00:22:47,920\nIt's a physically big connector.\n\n424\n00:22:47,920 --> 00:22:50,470\nI don't have anything to show.\n\n425\n00:22:50,470 --> 00:22:52,120\nIt's like the size of a matchbox car.\n\n426\n00:22:52,120 --> 00:22:54,550\nIf you were to take one of those little.\n\n427\n00:22:54,550 --> 00:22:55,370\nLet me be fair.\n\n428\n00:22:55,370 --> 00:22:56,570\nMatchbox or hot wheels, right?\n\n429\n00:22:56,570 --> 00:22:58,370\nWe're gonna support multiple vendors here.\n\n430\n00:22:58,370 --> 00:23:01,320\nBut if you were to take one\nof those little metal cars,\n\n431\n00:23:01,320 --> 00:23:03,290\nit would basically be able to\nlay across the top of this.\n\n432\n00:23:03,290 --> 00:23:05,060\nSo, it's a pretty decent size connector.\n\n433\n00:23:05,060 --> 00:23:08,170\nIt's got two massive\nbolts on the side of it.\n\n434\n00:23:08,170 --> 00:23:11,620\nRight, and you'll see this one is\na male and this one is a female.\n\n435\n00:23:11,620 --> 00:23:13,550\nSo, it's got alternate connectors.\n\n436\n00:23:13,550 --> 00:23:16,620\nAnd these pins are pretty massive too.\n\n437\n00:23:16,620 --> 00:23:21,620\nThis whole connector is designed\naround the idea of never coming loose\n\n438\n00:23:21,620 --> 00:23:22,290\never, right?\n\n439\n00:23:22,290 --> 00:23:24,740\nThat's the important\npart of that connector.\n\n440\n00:23:24,740 --> 00:23:28,660\nAnd so, you'll see that used in\ncritical environments like when you get\n\n441\n00:23:28,660 --> 00:23:31,990\nsome T1's run in and\nthey're connecting up to their CSUs, DSUs.\n\n442\n00:23:31,990 --> 00:23:34,180\nBecause they don't want\nthose cables to wiggle or\n\n443\n00:23:34,180 --> 00:23:37,070\ncome loose over time,\nit's really important.\n\n444\n00:23:37,070 --> 00:23:41,280\nI guess here they show a better breakdown\nwhere you can see those big bolts.\n\n445\n00:23:41,280 --> 00:23:42,960\n>> Yeah.\n>> That are coming out of that thing.\n\n446\n00:23:42,960 --> 00:23:45,841\nIt's a serious cable.\n\n447\n00:23:45,841 --> 00:23:47,757\nIt's just kind of exemplifying that.\n\n448\n00:23:47,757 --> 00:23:50,392\nOne of the first T1s\nthat I ever installed, so\n\n449\n00:23:50,392 --> 00:23:53,027\nyears ago I had to go back\nout to it the next day,\n\n450\n00:23:53,027 --> 00:23:56,960\nbecause a line kept going down and\nit turned out just to be a bad cable.\n\n451\n00:23:56,960 --> 00:23:58,570\nIt was a loose connector.\n\n452\n00:23:58,570 --> 00:24:02,850\nTypically you wanna use\nfactory built cables\n\n453\n00:24:02,850 --> 00:24:07,420\nbecause they're crimped down by\nmachinery so they're good crimp jobs.\n\n454\n00:24:07,420 --> 00:24:10,480\nBut if you do them by hand, you just\nneed to make sure you take time and\n\n455\n00:24:10,480 --> 00:24:13,550\nyou get a good crimp on the cable so\nit will last.\n\n456\n00:24:13,550 --> 00:24:16,030\n>> Every once in a while when\nyou're doing some troubleshooting,\n\n457\n00:24:16,030 --> 00:24:19,340\nwe always recommend that you might\nbring a known, good cable with you.\n\n458\n00:24:19,340 --> 00:24:23,550\nEspecially when you're actually having to\nreplace patch cables and stuff like that.\n\n459\n00:24:23,550 --> 00:24:27,350\nBut you'll see that those\nbigger cables can go bad.\n\n460\n00:24:27,350 --> 00:24:31,460\nAgain, usually people are moving stuff\naround, they're yanking things around,\n\n461\n00:24:31,460 --> 00:24:35,560\nthey pull one of those connectors loose or\nthey break one of those connectors.\n\n462\n00:24:35,560 --> 00:24:37,890\nAnd that can cause more\nissues than you realize, and\n\n463\n00:24:37,890 --> 00:24:42,190\nif you don't troubleshoot at that point,\nyou're gonna spend a lot of time doing so\n\n464\n00:24:42,190 --> 00:24:45,330\nmany other things when you could\nactually just physically have a cable.\n\n465\n00:24:45,330 --> 00:24:47,942\nMake sure you actually take a look\nat that especially when you have\n\n466\n00:24:47,942 --> 00:24:48,510\nsoftware Down/Down.\n\n467\n00:24:48,510 --> 00:24:53,210\n>> And then, the last one I wanna\npoint out is Administrative Down/Down.\n\n468\n00:24:53,210 --> 00:24:56,710\nThis means that we've manually\ndisabled the interface.\n\n469\n00:24:56,710 --> 00:24:59,450\nOn a router,\nit's usually pretty easy to spot,\n\n470\n00:24:59,450 --> 00:25:03,200\nbecause in the config on that interface,\nyou'll see the shut down command.\n\n471\n00:25:03,200 --> 00:25:04,720\nBut I just wanna add this extra note.\n\n472\n00:25:04,720 --> 00:25:07,680\nIt may be the default for your device, and\n\n473\n00:25:07,680 --> 00:25:10,830\nif that's the case, the interface\nmay be administratively down,\n\n474\n00:25:10,830 --> 00:25:15,750\nand in the config, you don't see the\nshutdown command, and no shutdown might be\n\n475\n00:25:15,750 --> 00:25:19,540\nthe opposite of that default, and then\nthat would be what shows up in the config.\n\n476\n00:25:19,540 --> 00:25:20,830\nI've seen that a few times.\n\n477\n00:25:20,830 --> 00:25:23,880\nIt's not terribly common though,\nbut just keep that in mind.\n\n478\n00:25:23,880 --> 00:25:28,940\nTypically when you buy a new switch, all\nthe switch ports are turned on by default,\n\n479\n00:25:28,940 --> 00:25:30,810\nbut not their VLAN interfaces.\n\n480\n00:25:30,810 --> 00:25:33,815\nSo if you're working with virtual\ninterfaces you'll need to do a shutdown.\n\n481\n00:25:33,815 --> 00:25:37,385\nOn a router, typically the interfaces\nare shut down by default,\n\n482\n00:25:37,385 --> 00:25:39,965\nand you'll need to do a no\nshutdown to bring them back up.\n\n483\n00:25:39,965 --> 00:25:43,325\nThe exception being loop back interfaces\nwhich normally default to being up.\n\n484\n00:25:43,325 --> 00:25:46,365\n>> That's why you'll see a lot of the time\nwhen you do watch, even our shows,\n\n485\n00:25:46,365 --> 00:25:49,075\nor if you go somewhere else for\ntraining boo on you.\n\n486\n00:25:49,075 --> 00:25:50,275\nI'm joking.\n>> [LAUGH]\n\n487\n00:25:50,275 --> 00:25:51,185\n>> But, if you do,\n\n488\n00:25:51,185 --> 00:25:54,430\nyou'll see that no matter what,\nwhether we're on a router switch,\n\n489\n00:25:54,430 --> 00:25:57,860\nwe normally just issue a no shutdown\nonce our configuration is done.\n\n490\n00:25:57,860 --> 00:26:02,400\nIt just gives us the assurance that hey,\nwe've turned this thing off.\n\n491\n00:26:02,400 --> 00:26:05,330\n>> I've gotten so tired of trying to\nremember which ones are turned on and\n\n492\n00:26:05,330 --> 00:26:07,930\noff by default that I just\nissue it out of hand.\n\n493\n00:26:07,930 --> 00:26:09,750\n>> And it's just a safe thing for\nyou to do.\n\n494\n00:26:10,790 --> 00:26:14,730\n>> And it's one of those,\nI try not to do it on the air too much,\n\n495\n00:26:14,730 --> 00:26:17,790\nbecause I usually do no shut,\nand the U and\n\n496\n00:26:17,790 --> 00:26:21,015\nthe I keys are so close that I've\nmade that typo so many times.\n\n497\n00:26:21,015 --> 00:26:24,110\n[LAUGH] Anyhow.\n\n498\n00:26:24,110 --> 00:26:25,864\n>> And it doesn't work when\nyou actually do the other one.\n\n499\n00:26:25,864 --> 00:26:26,409\n>> No, no.\n\n500\n00:26:26,409 --> 00:26:27,066\nI really should though.\n\n501\n00:26:27,066 --> 00:26:27,750\n>> [LAUGH] You're awesome.\n\n502\n00:26:27,750 --> 00:26:32,520\n>> Anyhow, those are some of the different\nport statuses that we can see.\n\n503\n00:26:32,520 --> 00:26:37,210\nAnd that command that led to this whole\nconversation was show IP interface brief.\n\n504\n00:26:37,210 --> 00:26:39,600\nThis is literally my favorite command.\n\n505\n00:26:39,600 --> 00:26:42,850\nIt is the command that I\nalways run no matter what.\n\n506\n00:26:43,920 --> 00:26:47,000\nThe first time you sit down at a router,\nyou might not know the names of\n\n507\n00:26:47,000 --> 00:26:50,330\nthe different interfaces,\nyou might not know what interfaces it has.\n\n508\n00:26:50,330 --> 00:26:52,780\nYou might not know what IPs\nare on which interface.\n\n509\n00:26:52,780 --> 00:26:56,810\nThat one command can really give you the\nsummary that brings you up to speed and\n\n510\n00:26:56,810 --> 00:26:58,648\nnow you can get to work and\nstart hammering down.\n\n511\n00:26:58,648 --> 00:27:01,500\nSo, when you're in a lab and\nyou're getting different routers and\n\n512\n00:27:01,500 --> 00:27:04,600\ndifferent switches on each\nquestion on the exam,\n\n513\n00:27:04,600 --> 00:27:07,240\nit's a quick command to get you started\nand find your basic information.\n\n514\n00:27:07,240 --> 00:27:08,270\n>> Yeah, and\n\n515\n00:27:08,270 --> 00:27:11,410\ngoing back to what Don was saying a little\nbit earlier about the OSI model, right.\n\n516\n00:27:11,410 --> 00:27:17,180\nThat one command shows us layer 3, the IP\naddress, shows us Layer 1 and 2 as well.\n\n517\n00:27:17,180 --> 00:27:20,505\nAnd so you can't get a command that\nactually gives you a summary of every\n\n518\n00:27:20,505 --> 00:27:22,398\ninterface, and Layer 1, 2, and 3.\n\n519\n00:27:22,398 --> 00:27:26,420\nAt least a general summary of\nthe information that you need.\n\n520\n00:27:26,420 --> 00:27:29,250\n>> Now there is some information that\nis not included in that command.\n\n521\n00:27:29,250 --> 00:27:30,950\nI say some, there's a lot of information.\n\n522\n00:27:30,950 --> 00:27:34,020\nCuz it is just a brief summary.\n\n523\n00:27:34,020 --> 00:27:36,750\nSo when you want detailed information,\n\n524\n00:27:36,750 --> 00:27:39,470\nthere's two other commands that\nI want you guys to remember.\n\n525\n00:27:39,470 --> 00:27:44,060\nSo there's show interface,\nand then an interface,\n\n526\n00:27:44,060 --> 00:27:47,095\nlike I might do GigabitEthernet 0/0,\nall right.\n\n527\n00:27:47,095 --> 00:27:50,300\nAnd their show ip interface.\n\n528\n00:27:50,300 --> 00:27:53,029\nGigabitEthernet0/0.\n\n529\n00:27:53,029 --> 00:27:55,135\nAnd you wanna remember both of these for\nthe exam.\n\n530\n00:27:55,135 --> 00:27:56,735\nSo very similar commands.\n\n531\n00:27:56,735 --> 00:27:59,885\nThe only difference is I add the word\nIP to one of them, all right?\n\n532\n00:27:59,885 --> 00:28:08,120\nSo the first one displays Layer\n2 information about the port and\n\n533\n00:28:08,120 --> 00:28:15,030\nthe second one displays Layer\n3 information about the port.\n\n534\n00:28:15,030 --> 00:28:19,430\nSo for example, if I wanna know what\nsubnet mask the interface has, while show\n\n535\n00:28:19,430 --> 00:28:24,670\nIP interface brief will show me the IP,\nit doesn't show me the subnet mask.\n\n536\n00:28:24,670 --> 00:28:30,830\nIf I do show ip interface GI0/0, that'll\ngive me the detailed Layer 3 information\n\n537\n00:28:30,830 --> 00:28:34,040\nabout that interface, and I can see the\nsubnet mask, amongst other information.\n\n538\n00:28:35,080 --> 00:28:37,530\nIf I wanna know if\nthe port is full duplex or\n\n539\n00:28:37,530 --> 00:28:42,190\nhalf duplex, I don't see that in show\nIP interface brief, that's a summary.\n\n540\n00:28:42,190 --> 00:28:48,130\nBut if I do show interface GI0/0 that\ngives me the layer two information and\n\n541\n00:28:48,130 --> 00:28:49,540\nI'll see those details.\n\n542\n00:28:49,540 --> 00:28:52,450\nSo for example,\nI'll just go back to my router here.\n\n543\n00:28:52,450 --> 00:28:57,462\nIf I do a show interface GI0/0,\nhere's the detailed layer, well,\n\n544\n00:28:57,462 --> 00:29:02,656\nit's really layer one and layer two,\nbut mostly layer two information.\n\n545\n00:29:02,656 --> 00:29:08,510\nI can see things like,\nI'm full duplex, 100 Mbits right now.\n\n546\n00:29:08,510 --> 00:29:10,193\nNow, it's a gig port.\n\n547\n00:29:10,193 --> 00:29:15,171\nI know that it's a gigabit port, but it's\nplugged into a 100 Mbit port on a switch,\n\n548\n00:29:15,171 --> 00:29:17,693\nand so that's why it's showing it here, so\n\n549\n00:29:17,693 --> 00:29:20,646\nI might not know that,\nhere's my chance to see it.\n\n550\n00:29:20,646 --> 00:29:24,280\nAnd I can also see that it's\na media type T, which means copper,\n\n551\n00:29:24,280 --> 00:29:27,770\nas opposed to a optical or\nfiber connector.\n\n552\n00:29:27,770 --> 00:29:31,830\nAnd you can see a ton of other\nuseful information in here.\n\n553\n00:29:31,830 --> 00:29:34,750\nThis show interface command actually\nshowing the IP address here,\n\n554\n00:29:34,750 --> 00:29:37,150\neven though it's really\nfocused on layer two data.\n\n555\n00:29:37,150 --> 00:29:40,690\nI get my MAC address, and\nyou get the various counters down here.\n\n556\n00:29:40,690 --> 00:29:43,300\nYou can see if you're getting errors\non the interface, and stuff like that.\n\n557\n00:29:44,460 --> 00:29:46,540\n>> I think we need to spend a little\nbit more time than that one,\n\n558\n00:29:46,540 --> 00:29:48,640\nbut it's almost time for our break here.\n\n559\n00:29:48,640 --> 00:29:49,160\nWe probably need to.\n\n560\n00:29:49,160 --> 00:29:52,530\n>> All right let's go ahead and stop here.\n\n561\n00:29:52,530 --> 00:29:56,365\nWhen we get back we'll take a look at\na little more of the information there and\n\n562\n00:29:56,365 --> 00:29:58,022\nwe'll do the show IP interface.\n\n563\n00:29:58,022 --> 00:30:00,568\nGI0/2 and take a look at that one too,\nso good trouble shooting tools to have.\n\n564\n00:30:00,568 --> 00:30:01,854\n>> Yeah.\n\n565\n00:30:01,854 --> 00:30:02,902\n>> All right sound good brother?\n>> Sounds great.\n\n566\n00:30:02,902 --> 00:30:05,246\n>> All right ladies and\ngentlemen stay tuned, when we get back,\n\n567\n00:30:05,246 --> 00:30:06,610\nmore trouble shooting after this.\n\n568\n00:30:06,610 --> 00:30:14,770\n[SOUND]\nI'll never watch it.\n\n569\n00:30:14,770 --> 00:30:17,810\n>> [LAUGH]\n>> All right, welcome back everybody.\n\n570\n00:30:17,810 --> 00:30:21,655\nYou can't just make a deliverance joke\nright as the cue is about to happen.\n\n571\n00:30:21,655 --> 00:30:22,502\n>> [LAUGH]\n>> [LAUGH]\n\n572\n00:30:22,502 --> 00:30:23,443\n>> You can't.\n\n573\n00:30:23,443 --> 00:30:26,881\n>> So anyhow, we were talking about some\nof our troubleshooting commands before\n\n574\n00:30:26,881 --> 00:30:29,392\nthe break, and\nthat's what we're going to talk about.\n\n575\n00:30:29,392 --> 00:30:33,523\nSo we were showing some of the Layer 2,\nLayer 3 type troubleshooting commands.\n\n576\n00:30:33,523 --> 00:30:39,645\nAnd the one I had just pulled up was show\ninterface GigabitEthernet0/0, or GI0/0.\n\n577\n00:30:39,645 --> 00:30:42,608\nAnd it is chock-a-block\nfull of information.\n\n578\n00:30:42,608 --> 00:30:44,365\n>> [LAUGH] It really is.\n\n579\n00:30:44,365 --> 00:30:47,054\n>> So some of the important\nthings that you wanna look for\n\n580\n00:30:47,054 --> 00:30:51,302\nwhen you browse through this command we're\ndifferent issues have different things\n\n581\n00:30:51,302 --> 00:30:54,888\nto trouble shoot but things like\nthe MTU size can be important if you're\n\n582\n00:30:54,888 --> 00:30:58,150\ntrouble shooting router protocol issues,\nit's right there.\n\n583\n00:30:58,150 --> 00:31:02,694\nThis bandwidth number, be careful,\nthat's not the hardware bandwidth, that's\n\n584\n00:31:02,694 --> 00:31:07,490\nthe arbitrary bandwidth number we assign\nto kind of influence router selection.\n\n585\n00:31:07,490 --> 00:31:11,730\nSo this really has nothing to do with\nthe actual bandwidth of the line.\n\n586\n00:31:11,730 --> 00:31:14,780\nBut what we're telling our routing\nprotocols the bandwidth is.\n\n587\n00:31:14,780 --> 00:31:17,620\nAnd the default is that it'll\nnormally match the hardware.\n\n588\n00:31:17,620 --> 00:31:21,530\nBut don't assume that somebody\nhasn't manipulated it.\n\n589\n00:31:21,530 --> 00:31:25,488\n>> And the other ones that we also wanna\nfocus in on is the idea of duplex.\n\n590\n00:31:25,488 --> 00:31:27,729\nAnd sometimes,\ndo we have a speed on this or no?\n\n591\n00:31:27,729 --> 00:31:29,117\n>> Yeah, this one's got 100 Mb.\n\n592\n00:31:29,117 --> 00:31:30,810\n>> Yep, see I can't even see it.\n\n593\n00:31:30,810 --> 00:31:31,909\nShows you how much I know.\n>> [LAUGH]\n\n594\n00:31:31,909 --> 00:31:32,500\n>> Duplex and\n\n595\n00:31:32,500 --> 00:31:36,237\nspeed are two of the key elements that\nwe also want to make sure that we\n\n596\n00:31:36,237 --> 00:31:37,690\npay attention to as well.\n\n597\n00:31:37,690 --> 00:31:41,131\n>> Yeah, one of the common things that\nyou'll see is that almost every switch\n\n598\n00:31:41,131 --> 00:31:44,858\nfrom every vendor, the ports are set to\nautomatically detect speed and duplex.\n\n599\n00:31:44,858 --> 00:31:46,134\n>> Mm-hm.\n\n600\n00:31:46,134 --> 00:31:49,594\n>> And back when this was first created,\nthat seemed like it was a good idea.\n\n601\n00:31:49,594 --> 00:31:54,963\nBut over time people realized that hey,\n>> If the switch is set to auto detect,\n\n602\n00:31:54,963 --> 00:31:59,295\nand the device is plugged into\nthe switches also set to auto detect,\n\n603\n00:31:59,295 --> 00:32:02,825\nthat sometimes they don't\nmake the right decisions.\n\n604\n00:32:02,825 --> 00:32:04,420\n>> Right.\n>> And I say sometimes.\n\n605\n00:32:04,420 --> 00:32:05,940\nIt actually happens quite often.\n\n606\n00:32:05,940 --> 00:32:09,030\nAnd so\nyou might have a 100 megabit machine\n\n607\n00:32:09,030 --> 00:32:11,660\nthat's capable of full\nduplex communications.\n\n608\n00:32:11,660 --> 00:32:15,940\nAnd it's plugged into a switch and because\nauto negotiate didn't quite line up right,\n\n609\n00:32:15,940 --> 00:32:17,780\nthat you end up at a 100\nmegabit half duplex.\n\n610\n00:32:17,780 --> 00:32:19,257\n>> Yeah.\n>> Or something weird like that, right.\n\n611\n00:32:19,257 --> 00:32:24,600\nNow gigabit.helps with this a bit because\ngigabit only runs in full duplex, right.\n\n612\n00:32:24,600 --> 00:32:29,140\nBut you can still have a gig device that's\ndown stepping to 100 Megabit or whatever,\n\n613\n00:32:29,140 --> 00:32:30,610\nwhen it shouldn't, so\n\n614\n00:32:30,610 --> 00:32:34,760\nyou may need to go and\nhard set one side of the equation, right.\n\n615\n00:32:34,760 --> 00:32:38,060\nSo, you can hard set it on the switch, or\nyou can hard set it on the end device.\n\n616\n00:32:38,060 --> 00:32:43,490\nFor me, when I set up servers I almost\nalways hard set it on the servers and\n\n617\n00:32:43,490 --> 00:32:44,350\nsame thing on routers.\n\n618\n00:32:44,350 --> 00:32:47,910\nI usually hard set it on the routers and\nI let the switches stay at auto.\n\n619\n00:32:47,910 --> 00:32:51,050\nBut sometimes you might wanna\ngo the opposite approach and\n\n620\n00:32:51,050 --> 00:32:54,485\nhard set it on the switches and\nlet the other devices detech.\n\n621\n00:32:54,485 --> 00:32:58,875\nIn this case the switch\nis a 100 megabit switch.\n\n622\n00:32:58,875 --> 00:33:01,825\nSo the fact that we auto\ndetected a 100 megabit\n\n623\n00:33:01,825 --> 00:33:04,705\nfull duplex is probably good for us.\n\n624\n00:33:04,705 --> 00:33:11,299\nIf I look at this interface here G-I-0-0,\nactually let's take the other one G-I-0-1.\n\n625\n00:33:11,299 --> 00:33:12,955\nSo here's my G-I-0-1.\n\n626\n00:33:12,955 --> 00:33:15,550\nIt's full duplex, 100 megabit.\n\n627\n00:33:15,550 --> 00:33:18,160\nAnd if I do a show,\ngot my caps lock on there.\n\n628\n00:33:18,160 --> 00:33:19,880\nIf I do a show CEP neighbor,\n\n629\n00:33:20,880 --> 00:33:26,450\nI can see that it's plugged\ninto switch one on fa0/5.\n\n630\n00:33:26,450 --> 00:33:28,275\nSo I'm gonna jump over to\nswitch one real quick.\n\n631\n00:33:32,188 --> 00:33:34,990\nAnd take a look at that\nport that I'm plugged into.\n\n632\n00:33:34,990 --> 00:33:38,720\nAnd here on this side,\nfull duplex, 100 megabit.\n\n633\n00:33:38,720 --> 00:33:39,610\nRight.\n\n634\n00:33:39,610 --> 00:33:44,560\nAnd if I do a show run\ninterface fa0/5 here,\n\n635\n00:33:44,560 --> 00:33:48,110\nI can see there's no special\ncommands on there whatsoever.\n\n636\n00:33:48,110 --> 00:33:49,357\nAnd if I look on the router.\n\n637\n00:33:52,017 --> 00:33:56,400\nThat I can see here, duplex and\nspeed are both set to auto.\n\n638\n00:33:56,400 --> 00:33:58,450\nSo the two ends of the equation\nare both set to auto.\n\n639\n00:33:58,450 --> 00:34:01,225\nIt negotiated out at good full speed.\n\n640\n00:34:01,225 --> 00:34:02,645\nNot much more to ask for, right.\n\n641\n00:34:03,695 --> 00:34:05,015\nBut mistakes can happen.\n\n642\n00:34:05,015 --> 00:34:05,755\n>> Yeah.\n\n643\n00:34:05,755 --> 00:34:09,327\nAnd this is where we wanna go back to that\ninitial configuration on the interface,\n\n644\n00:34:09,327 --> 00:34:12,356\nbecause when you do that,\nyou can actually see some of those errors.\n\n645\n00:34:12,356 --> 00:34:17,089\nEspecially with that, down in that\nlist of, what do you call them,\n\n646\n00:34:17,089 --> 00:34:19,345\nerrors and counters and stuff?\n\n647\n00:34:19,345 --> 00:34:21,145\n>> Yeah, our counters.\n\n648\n00:34:21,145 --> 00:34:23,664\n>> I couldn't remember what\nthey were called, see.\n\n649\n00:34:23,664 --> 00:34:24,514\nYeah.\n\n650\n00:34:24,514 --> 00:34:27,044\nSo a lot of times when we\ndo have some mismatches or\n\n651\n00:34:27,044 --> 00:34:31,330\nyou might see the output of it is\nwhere Don is actually highlighting.\n\n652\n00:34:31,330 --> 00:34:34,620\n>> Yeah and what you'll get, you'll get\nthings like collisions or bad CRCs,\n\n653\n00:34:34,620 --> 00:34:36,170\nyou'll get giants or runts.\n\n654\n00:34:36,170 --> 00:34:39,492\nYou'll get things like that when you've\ngot a mismatch between the two sides,\n\n655\n00:34:39,492 --> 00:34:40,210\nall right.\n\n656\n00:34:40,210 --> 00:34:43,890\nAnd we could probably generate\none not too difficultly, right.\n\n657\n00:34:43,890 --> 00:34:46,072\nSo let me, I'll go on my switch.\n\n658\n00:34:46,072 --> 00:34:47,745\nWhoops.\n\n659\n00:34:47,745 --> 00:34:55,129\nAnd let me go into like fa0/5, and I'm\ngonna hard set the speed to 10 megabyte.\n\n660\n00:34:55,129 --> 00:34:58,729\nAnd I'll set the duplex to a half.\n\n661\n00:35:00,807 --> 00:35:01,456\nAll right.\n\n662\n00:35:01,456 --> 00:35:05,057\nAnd I'm just gonna do a shut down\non it to make sure the port resets.\n\n663\n00:35:11,211 --> 00:35:12,719\nAnd then we'll turn it back on.\n\n664\n00:35:12,719 --> 00:35:19,764\nSo now I've got that one hard set\nto being 10 megabit, half-duplex.\n\n665\n00:35:19,764 --> 00:35:20,347\nOkay.\n\n666\n00:35:20,347 --> 00:35:22,737\nAnd I can see that port just came up.\n\n667\n00:35:22,737 --> 00:35:24,804\nAnd if I look on my router.\n\n668\n00:35:28,520 --> 00:35:30,157\nThat's not my router.\n\n669\n00:35:30,157 --> 00:35:31,004\nThere.\n\n670\n00:35:35,685 --> 00:35:36,630\nAll right.\n\n671\n00:35:36,630 --> 00:35:41,430\nIt's set to auto, and so it automatically\ndetected half-duplex, 10 Mbit.\n\n672\n00:35:41,430 --> 00:35:44,620\nGreat, but what if it made a mistake?\n\n673\n00:35:44,620 --> 00:35:45,986\nWell, if it made a mistake.\n\n674\n00:35:53,914 --> 00:35:55,950\nAnd I'm just gonna reset that port.\n\n675\n00:35:57,960 --> 00:35:58,540\nAll right.\n\n676\n00:35:58,540 --> 00:36:00,030\nNow let's see what's going to happen here.\n\n677\n00:36:00,030 --> 00:36:04,390\nOn the router it's hard set\na 100 megabit full duplex.\n\n678\n00:36:04,390 --> 00:36:08,580\nOn the switch,\nit's hard set ten megabit, half duplex.\n\n679\n00:36:08,580 --> 00:36:11,920\nBut, the interface came up, right.\n\n680\n00:36:11,920 --> 00:36:14,480\nWell, it's not fully up.\n\n681\n00:36:14,480 --> 00:36:16,680\nWhen you shut an interface down, and\n\n682\n00:36:16,680 --> 00:36:20,331\nyou bring it up again,\nyou normally get two messages.\n\n683\n00:36:20,331 --> 00:36:20,970\nRight.\n\n684\n00:36:20,970 --> 00:36:23,360\nWatch on my other port here.\n\n685\n00:36:23,360 --> 00:36:28,750\nSo if I shut this one down, I should\nget two messages when it shuts down.\n\n686\n00:36:28,750 --> 00:36:34,110\nAnd when I bring it back online, I should\nget two messages about it coming up.\n\n687\n00:36:34,110 --> 00:36:38,800\nThis is the status and protocol,\nthe layer one, layer two.\n\n688\n00:36:38,800 --> 00:36:41,010\nThe up, up, up, down, whatever.\n\n689\n00:36:41,010 --> 00:36:45,110\nThis is telling me that I just went\nto administratively down, down and\n\n690\n00:36:45,110 --> 00:36:48,020\nthis is telling me I just went to up, up.\n\n691\n00:36:48,020 --> 00:36:52,300\nSo, when I turned the interface on\na moment ago, back here, right.\n\n692\n00:36:52,300 --> 00:36:56,100\nI get the link went down and\nthen here I get the link came up but\n\n693\n00:36:56,100 --> 00:36:57,416\nthat's just\n>> Protocol.\n\n694\n00:36:57,416 --> 00:36:58,520\n>> One message.\n\n695\n00:36:58,520 --> 00:37:04,387\nSo if I do a show IP interface brief\nI should see that it's up down,\n\n696\n00:37:04,387 --> 00:37:06,880\nand I certainly do, okay.\n\n697\n00:37:06,880 --> 00:37:10,450\nSo it shows us up down\nbecause I've got a mismatch,\n\n698\n00:37:10,450 --> 00:37:12,360\none side's set differently than the other.\n\n699\n00:37:14,380 --> 00:37:18,568\nNow the part that makes this difficult is\nI've actually got two problems breaking\n\n700\n00:37:18,568 --> 00:37:19,181\nthis link.\n\n701\n00:37:19,181 --> 00:37:20,283\n>> Mm-hm.\n\n702\n00:37:20,283 --> 00:37:25,055\n>> The speeds don't match and the duplexes\ndon't match and both are an issue.\n\n703\n00:37:25,055 --> 00:37:27,005\n>> All right.\n\n704\n00:37:27,005 --> 00:37:28,817\n>> Let's see, I guess I haven't really.\n\n705\n00:37:28,817 --> 00:37:31,600\nLet me float some traffic over that link.\n\n706\n00:37:33,190 --> 00:37:36,180\nAnd actually I shouldn't be able\nto flow any traffic over it so.\n\n707\n00:37:36,180 --> 00:37:42,500\nLet me see if we get any information\nin the little reports down here.\n\n708\n00:37:42,500 --> 00:37:46,140\nSo just kind of looking at it we've\ngot some basic information on here.\n\n709\n00:37:46,140 --> 00:37:47,340\nInterface resets.\n\n710\n00:37:47,340 --> 00:37:50,020\nHere we go, 212 unknown protocol drops.\n\n711\n00:37:50,020 --> 00:37:50,770\n>> There you go.\n\n712\n00:37:50,770 --> 00:37:53,000\n>> So\nthat's not a healthy thing right there.\n\n713\n00:37:53,000 --> 00:37:55,120\nThat means some malformed\npackets are coming in.\n\n714\n00:37:55,120 --> 00:37:58,110\nWe couldn't identify what protocol\nthey were and we're tossing them.\n\n715\n00:37:58,110 --> 00:37:59,798\n>> Yeah.\n>> We should see something similar on\n\n716\n00:37:59,798 --> 00:38:00,448\nthe other side.\n\n717\n00:38:04,790 --> 00:38:09,850\nAnd, so, looking here, packets in and out.\n\n718\n00:38:09,850 --> 00:38:14,430\nAnd, oh, actually, this one will probably\nbe the happy one, because it is set to.\n\n719\n00:38:14,430 --> 00:38:15,200\n>> Yeah.\n\n720\n00:38:15,200 --> 00:38:16,367\n>> The lower speed.\n\n721\n00:38:16,367 --> 00:38:18,724\nYeah I don't see any errors\nbeing picked up over here.\n\n722\n00:38:18,724 --> 00:38:23,652\nSo it seems to think that it's happy\non this side and is it status up,\n\n723\n00:38:23,652 --> 00:38:28,148\nup, so let's do a, all right,\nso when I look at it over here,\n\n724\n00:38:28,148 --> 00:38:33,725\nit's showing as down down, so it's not\neven viewing layer one as being up.\n\n725\n00:38:33,725 --> 00:38:34,670\nRight.\nSo it's completely unhappy.\n\n726\n00:38:34,670 --> 00:38:36,085\n>> Yeah.\n>> That's why I'm not seeing any\n\n727\n00:38:36,085 --> 00:38:36,645\nerrors on there.\n\n728\n00:38:36,645 --> 00:38:39,259\nYou can't get any errors when there's\nno data allowed to flow over the line.\n\n729\n00:38:39,259 --> 00:38:40,258\n[LAUGH] All right.\n\n730\n00:38:40,258 --> 00:38:42,580\nNow if I fix part of the problem, right.\n\n731\n00:38:42,580 --> 00:38:44,460\nLet's just fix the speed.\n\n732\n00:38:44,460 --> 00:38:50,550\nIf I get into fa0/5, and\nI do speed 100, okay.\n\n733\n00:38:50,550 --> 00:38:56,250\nNow one side is 100 Megabit, the other\nside is 100 Megabit, so there we go.\n\n734\n00:38:56,250 --> 00:38:58,670\nI get my two messages with it coming up.\n\n735\n00:38:58,670 --> 00:39:01,100\nI'm now, up up, right.\n\n736\n00:39:01,100 --> 00:39:04,750\nBut, one side is half duplex,\nthe other side is full duplex.\n\n737\n00:39:04,750 --> 00:39:06,400\nSo I do still have an issue.\n\n738\n00:39:06,400 --> 00:39:10,820\nI'm just going to verify that, make sure\nI'm telling you guys the truth, right.\n\n739\n00:39:10,820 --> 00:39:13,723\nSo when I look here, I can see this\none is half duplex, a 100 megabit.\n\n740\n00:39:13,723 --> 00:39:15,883\nAnd when I check out the router.\n\n741\n00:39:17,903 --> 00:39:18,912\nThere you go.\n\n742\n00:39:18,912 --> 00:39:22,990\nIt's a duplex mismatch.\n\n743\n00:39:22,990 --> 00:39:24,250\nError.\n>> Yeah we're still there.\n\n744\n00:39:24,250 --> 00:39:24,810\nOkay.\n\n745\n00:39:24,810 --> 00:39:28,840\nAnd yeah, fortunately we're running\nCisco discovery protocols, CDP, and\n\n746\n00:39:28,840 --> 00:39:31,470\nit will find problems like this and\nreport them back.\n\n747\n00:39:31,470 --> 00:39:34,010\nAnd so here it's telling me\nwe've got a duplex mismatch.\n\n748\n00:39:34,010 --> 00:39:39,760\nIt's telling us that we are not set\nto half duplex and the switch is.\n\n749\n00:39:39,760 --> 00:39:41,623\nAnd so there's my warning letting\nme know that we've got an issue.\n\n750\n00:39:41,623 --> 00:39:44,410\nSometimes the routers are pretty helpful\nand tell you what the problem is.\n\n751\n00:39:46,209 --> 00:39:46,764\nAll right.\n\n752\n00:39:46,764 --> 00:39:50,756\nSo all we have to do is fix that,\nand our problem will go away.\n\n753\n00:39:50,756 --> 00:39:54,342\nAs long as we stay like that.\n\n754\n00:39:54,342 --> 00:39:59,780\nWe're gonna continue to get errors on\nthe interface, if I pull that back up.\n\n755\n00:39:59,780 --> 00:40:03,370\nWe'll continue to get errors on here\nbecause of the mismatch that we're trying\n\n756\n00:40:03,370 --> 00:40:04,020\nto send and\n\n757\n00:40:04,020 --> 00:40:07,135\nreceive at the same time, which means\nwe're gonna generate collisions.\n\n758\n00:40:07,135 --> 00:40:07,850\n>> Right.\n\n759\n00:40:07,850 --> 00:40:13,590\n>> And there's none right now but\nif I generate enough,\n\n760\n00:40:13,590 --> 00:40:17,050\nlet's see if we can generate\nsome collisions here.\n\n761\n00:40:17,050 --> 00:40:24,820\nSo if I do a ping to So that's the switch.\n\n762\n00:40:24,820 --> 00:40:30,720\nAnd I'm gonna source that\nfrom a different interface.\n\n763\n00:40:30,720 --> 00:40:31,530\nAnd let's do retry 200.\n\n764\n00:40:31,530 --> 00:40:35,460\nAll right, so I'm going to run that.\n\n765\n00:40:35,460 --> 00:40:37,864\nJust so, I want to get them both\ndoing pings at the same time.\n\n766\n00:40:50,109 --> 00:40:54,470\nActually, I don't need to do that.\n\n767\n00:40:54,470 --> 00:40:55,915\nDoes it say 200 over there or 2,000?\n\n768\n00:40:55,915 --> 00:40:56,415\n>> 200.\n>> 200, okay.\n\n769\n00:41:00,735 --> 00:41:02,361\n[LAUGH] It happened so fast.\n\n770\n00:41:02,361 --> 00:41:03,464\nMaybe I should have done 2,000.\n\n771\n00:41:06,756 --> 00:41:08,600\nThere.\nSo, we'll crank that up.\n\n772\n00:41:08,600 --> 00:41:12,230\nSo that's gonna run and I'm basically\njust generating a ton of pings and\n\n773\n00:41:12,230 --> 00:41:16,880\nbecause my router is allowed to send and\nreceive at the same time and\n\n774\n00:41:16,880 --> 00:41:22,170\nthe switch isn't, I'm hoping,\nit's very difficult to align this so\n\n775\n00:41:22,170 --> 00:41:24,360\nyou're sending data and\nreceiving at the same time.\n\n776\n00:41:24,360 --> 00:41:26,510\nSo we may have generated at\nleast one collision in there.\n\n777\n00:41:28,330 --> 00:41:34,010\nLet's see if we actually did.\n\n778\n00:41:34,010 --> 00:41:34,510\nAnd, no.\n\n779\n00:41:34,510 --> 00:41:36,970\nDidn't lock out and\nget any collisions there.\n\n780\n00:41:36,970 --> 00:41:38,810\nBut it will happen eventually.\n\n781\n00:41:38,810 --> 00:41:42,084\nSo normally you wouldn't have collisions\non a switch base network, but\n\n782\n00:41:42,084 --> 00:41:45,358\nit can happen especially if you've\ngot something like a duplex mismatch\n\n783\n00:41:45,358 --> 00:41:47,255\nwhere things aren't lining up.\n\n784\n00:41:47,255 --> 00:41:49,565\n>> Yeah.\n>> And you get somebody sending and\n\n785\n00:41:49,565 --> 00:41:52,905\nreceiving at the same time when\nthe other person isn't expecting.\n\n786\n00:41:52,905 --> 00:41:54,622\n>> And that has to be very clear for us.\n\n787\n00:41:54,622 --> 00:41:58,052\nWhen we do see these things,\nwhen you start actually getting that,\n\n788\n00:41:58,052 --> 00:42:01,002\nyou've gotta at least set one\nside to match the other one.\n\n789\n00:42:01,002 --> 00:42:04,222\nAnd usually hard setting it for\nus is normally the key.\n\n790\n00:42:04,222 --> 00:42:07,510\nNow as a rule of thumb,\nagain there's no hard set rule on this.\n\n791\n00:42:07,510 --> 00:42:10,340\nNormally if the devices\nare mission critical or\n\n792\n00:42:10,340 --> 00:42:13,720\nthey're kind of the infrastructure device,\nwe wanna hard set those.\n\n793\n00:42:13,720 --> 00:42:17,060\nIf you're just connecting\nlet's say a PC into a switch,\n\n794\n00:42:17,060 --> 00:42:18,740\nyou might wanna let it just\ndo the auto negotiation.\n\n795\n00:42:18,740 --> 00:42:20,820\nThat way you don't have to set everything.\n\n796\n00:42:20,820 --> 00:42:23,820\nBut usually that's what you\nactually end up seeing here for us.\n\n797\n00:42:23,820 --> 00:42:28,590\nBut half duplex and\nfour duplex on each end, not good.\n\n798\n00:42:28,590 --> 00:42:31,090\nMismatch in speed and\nduplex are gonna cause us issues.\n\n799\n00:42:31,090 --> 00:42:34,040\nSo go ahead and\nreset them is what we're gonna see.\n\n800\n00:42:34,040 --> 00:42:37,190\n>> All right, yep, so easy enough to fix\nand then at least you'll be back up and\n\n801\n00:42:37,190 --> 00:42:39,020\nI say they come back up,\nthey're already up.\n\n802\n00:42:39,020 --> 00:42:44,660\nThey're just generating errors,\nright, so I can fix that real quick.\n\n803\n00:42:44,660 --> 00:42:45,320\nAll right.\n\n804\n00:42:45,320 --> 00:42:47,995\nSo duplex and speed, we definitely\nwant to pay attention to those.\n\n805\n00:42:47,995 --> 00:42:51,370\nThere's other media type issues that we\ncan have, when you're hooking up fiber,\n\n806\n00:42:51,370 --> 00:42:54,750\nbecause fiber normally comes in two\nstrands, you can mix up the transmits and\n\n807\n00:42:54,750 --> 00:42:58,640\nreceives, which will generally\ncreate a no link light status.\n\n808\n00:42:58,640 --> 00:43:00,910\nThere's not really a way\nto show that in the router.\n\n809\n00:43:00,910 --> 00:43:04,440\nBut those are the type of\nissues that you may get\n\n810\n00:43:04,440 --> 00:43:07,060\nwhen you work with different\ndevices like this.\n\n811\n00:43:08,390 --> 00:43:12,779\nSo I'm just gonna put this back to auto\nand I'll do the same thing on the router.\n\n812\n00:43:16,970 --> 00:43:21,526\nAnd then one other thing I wanna mention\nis that if you're dealing with a gigabit\n\n813\n00:43:21,526 --> 00:43:26,560\nconnection, if you're running at gigabit\nspeed, it's automatically full duplex.\n\n814\n00:43:26,560 --> 00:43:28,470\nSo a lot of times when\nyour ports are gig ports,\n\n815\n00:43:28,470 --> 00:43:30,275\nyou may not have the duplex\ncommand available.\n\n816\n00:43:30,275 --> 00:43:32,710\nSometimes it's not there\nif you're hard set to gig.\n\n817\n00:43:32,710 --> 00:43:34,305\n>> Yeah.\n\n818\n00:43:34,305 --> 00:43:38,395\nNow remember this idea of the cable\nas well is every once in a while,\n\n819\n00:43:38,395 --> 00:43:39,885\nyou still see this.\n\n820\n00:43:39,885 --> 00:43:44,175\nWhere what you want to actually go do\nis pick whether you're gonna be using\n\n821\n00:43:44,175 --> 00:43:48,195\na crossover cable as well as just\na regular straight through cable.\n\n822\n00:43:48,195 --> 00:43:49,515\nWhen they actually do show devices.\n\n823\n00:43:49,515 --> 00:43:51,394\nSo make you actually know\nthe difference between those.\n\n824\n00:43:53,570 --> 00:43:55,000\n>> Speaking of cable types.\n\n825\n00:43:55,000 --> 00:43:58,580\nIf you do get a question on the type\nof cable that's inserted in a router or\n\n826\n00:43:58,580 --> 00:44:02,670\nwhatever and it's a lab question, you\ncan't go and visually inspect the cable.\n\n827\n00:44:02,670 --> 00:44:04,950\nSo that's a common thing.\n\n828\n00:44:04,950 --> 00:44:08,150\nSo there is a nice little command that\nyou might bump into which is the show\n\n829\n00:44:08,150 --> 00:44:09,070\ncontroller command.\n\n830\n00:44:09,070 --> 00:44:09,860\n>> Yeah.\n\n831\n00:44:09,860 --> 00:44:14,150\n>> Every interface has a processor\ntied to it, a controller.\n\n832\n00:44:14,150 --> 00:44:18,050\nAnd that controller identifies all sorts\nof crazy information about the interfaces.\n\n833\n00:44:18,050 --> 00:44:20,620\nAnd I normally use this with T1 or\n\n834\n00:44:20,620 --> 00:44:23,410\nserial connections cuz I\nwanna see the channel data.\n\n835\n00:44:23,410 --> 00:44:25,590\nBut it works on Ethernet connections also.\n\n836\n00:44:25,590 --> 00:44:28,660\nAnd so you'll see where it talks about\nthe interface and the hardware type,\n\n837\n00:44:28,660 --> 00:44:30,840\nwhich is usually meaningless to us.\n\n838\n00:44:30,840 --> 00:44:34,670\nBut as you scroll through you'll see all\nsorts of information including some data\n\n839\n00:44:34,670 --> 00:44:36,680\nabout the cable types.\n\n840\n00:44:36,680 --> 00:44:38,340\nShows up in here somewhere.\n\n841\n00:44:38,340 --> 00:44:40,940\nBut you'll just get some\nbasic information on it.\n\n842\n00:44:40,940 --> 00:44:44,910\nOn the serial and fiber optic side though\nis where you really get your benefit,\n\n843\n00:44:44,910 --> 00:44:45,770\ncause it'll identify,\n\n844\n00:44:45,770 --> 00:44:48,930\nlike on serial, it'll even tell\nyou the specific type of cable.\n\n845\n00:44:48,930 --> 00:44:52,910\nIs it v.35?\nAre you the CPE or CTE side?\n\n846\n00:44:52,910 --> 00:44:59,450\nOr DTC, DTE, it'll identify a lot of that\nstuff for you in the controller output.\n\n847\n00:44:59,450 --> 00:45:02,420\nSo I must have missed it on that one, but\n\n848\n00:45:02,420 --> 00:45:04,260\nif I get down to one of the serial\ninterfaces you'll see it.\n\n849\n00:45:04,260 --> 00:45:07,400\nSo that show controller\ncommand can be kind of handy.\n\n850\n00:45:07,400 --> 00:45:10,850\nI've never had to use it on an exam but\nI've used it in real life and\n\n851\n00:45:10,850 --> 00:45:13,170\nyou might come across that.\n\n852\n00:45:13,170 --> 00:45:15,050\nLet me just switch it to one\nof the serial interfaces.\n\n853\n00:45:22,313 --> 00:45:24,608\nApparently I don't know the name\nof the serial interfaces,\n\n854\n00:45:24,608 --> 00:45:25,780\nthere are two zero doggone it.\n\n855\n00:45:25,780 --> 00:45:27,910\n>> Yeah.\nWe would have gotten there eventually.\n\n856\n00:45:27,910 --> 00:45:29,030\n>> Eventually, yeah.\n\n857\n00:45:29,030 --> 00:45:32,950\nSo here I can see this physical interface\nand it's basically telling me what it is,\n\n858\n00:45:32,950 --> 00:45:36,140\nthat I've got a T1 CSU,\nDSU stuck in there.\n\n859\n00:45:36,140 --> 00:45:38,260\nAnd actually I don't\nhave a cable attached, so\n\n860\n00:45:38,260 --> 00:45:40,230\nI'm kinda curious what it's going to say.\n\n861\n00:45:42,930 --> 00:45:45,130\nIt's just not going to say is it?\n\n862\n00:45:45,130 --> 00:45:45,630\n>> No.\n>> Yeah.\n\n863\n00:45:45,630 --> 00:45:46,955\nThere's no cable plugged in.\n\n864\n00:45:46,955 --> 00:45:49,760\nBut basically, what we're seeing here\nis all of the memory buffers and\n\n865\n00:45:49,760 --> 00:45:52,270\nall of that stuff that is part of\nthe port, which can be useful.\n\n866\n00:45:52,270 --> 00:45:55,330\nMost of this is not useful information for\nus.\n\n867\n00:45:55,330 --> 00:45:58,510\nAnd jeez, look at all these timers.\n\n868\n00:46:00,010 --> 00:46:01,300\nYeah, it's that.\n\n869\n00:46:01,300 --> 00:46:04,424\nSo if I were to attach a cable, though,\nwe'd get some detailed information there,\n\n870\n00:46:04,424 --> 00:46:06,850\nso very, very cool stuff,\nall kind of hidden away in the system.\n\n871\n00:46:08,500 --> 00:46:13,710\nAll right, now that was all the show\ninterface command that we were\n\n872\n00:46:13,710 --> 00:46:17,450\nlooking at there, right, show interface\nto be able to get that layer two data.\n\n873\n00:46:17,450 --> 00:46:23,610\nIf we do show IP interface,\nnow it gives us a different set of data.\n\n874\n00:46:24,720 --> 00:46:25,226\n>> Right.\n>> Right?\n\n875\n00:46:25,226 --> 00:46:28,360\nAdding that IP keyword starts to give\nus that layer three information and so\n\n876\n00:46:28,360 --> 00:46:30,565\nnow we can see our IP address subnet mask.\n\n877\n00:46:30,565 --> 00:46:33,790\nMTU, that's a lot of overlap with\nthe output we saw before, but\n\n878\n00:46:33,790 --> 00:46:37,490\nwe're also seeing any multicasts\nthat we're a part of.\n\n879\n00:46:37,490 --> 00:46:40,750\nWe can see if there's access\nlists assigned to the port.\n\n880\n00:46:40,750 --> 00:46:43,300\nWhat's the incoming,\nwhat's the outgoing access list?\n\n881\n00:46:43,300 --> 00:46:44,540\nIt's right there.\n\n882\n00:46:44,540 --> 00:46:46,110\nReally useful stuff.\n\n883\n00:46:46,110 --> 00:46:50,310\nIf you've enabled or disabled split\nhorizon, you can see the status of that.\n\n884\n00:46:50,310 --> 00:46:53,890\nThis all very valuable information\nall dealing with the layer three\n\n885\n00:46:53,890 --> 00:46:54,610\nhandling of our data.\n\n886\n00:46:55,710 --> 00:46:57,366\n>> A lot of times on these issues,\n\n887\n00:46:57,366 --> 00:47:01,700\nnot only is seeing it actually the key,\nbut it's knowing about once again some of\n\n888\n00:47:01,700 --> 00:47:05,190\nthe stuff that we covered\nearlier in our classes here.\n\n889\n00:47:05,190 --> 00:47:07,070\nAbout subnetting right?\n\n890\n00:47:07,070 --> 00:47:10,510\nMaking sure that the interfaces\nthat you have, and\n\n891\n00:47:10,510 --> 00:47:14,245\nmultiple interfaces are not\nactually on the same subnet.\n\n892\n00:47:14,245 --> 00:47:17,980\nSo you may see again, questioned by that,\nor you may actually have that.\n\n893\n00:47:17,980 --> 00:47:21,695\nRight?\nWhere on one interface, you actually end\n\n894\n00:47:21,695 --> 00:47:25,275\nup putting two interfaces in the same\nsubnet and they're not supposed to be, and\n\n895\n00:47:25,275 --> 00:47:29,930\nyou'll get some unusual reports\nfrom the router on those issues.\n\n896\n00:47:29,930 --> 00:47:33,300\nSo if you're not practicing subnetting,\nkeep doing it.\n\n897\n00:47:33,300 --> 00:47:34,880\nYou're gonna actually need that.\n\n898\n00:47:34,880 --> 00:47:36,100\n>> Yeah.\n\n899\n00:47:36,100 --> 00:47:39,400\nAll right, the last command that I wanna\ntalk about here in just our general,\n\n900\n00:47:39,400 --> 00:47:43,510\nkind of troubleshooting area,\nis the show log command.\n\n901\n00:47:43,510 --> 00:47:44,010\n>> Oh yeah.\n>> Right?\n\n902\n00:47:44,010 --> 00:47:44,778\nShow log's really handy.\n\n903\n00:47:44,778 --> 00:47:46,762\nIf there's a problem on the network,\n\n904\n00:47:46,762 --> 00:47:50,668\nwell on the shows we always have the\nproblem occur right here while we're in\n\n905\n00:47:50,668 --> 00:47:53,403\nthe equipment But\nthat's not how it is in real life.\n\n906\n00:47:53,403 --> 00:47:54,117\nIn real life,\n\n907\n00:47:54,117 --> 00:47:57,813\nthe problem happens without you being\naware, and then you get notified.\n\n908\n00:47:57,813 --> 00:47:59,133\nSo now you need go and find out.\n\n909\n00:47:59,133 --> 00:48:01,920\nBut, if you weren't there to see the error\n\n910\n00:48:01,920 --> 00:48:05,400\nwhen it was generated, if it happened in\nthe past how do you see what happened?\n\n911\n00:48:05,400 --> 00:48:08,470\nAnd it's the show log\ncommand that does it.\n\n912\n00:48:08,470 --> 00:48:12,180\nAnd when you run show log,\nit'll give you the output\n\n913\n00:48:12,180 --> 00:48:14,830\nof any historical messages that\nhave been stored on the router.\n\n914\n00:48:16,130 --> 00:48:17,630\nAnd you can get an idea of what happened.\n\n915\n00:48:17,630 --> 00:48:22,960\nSo, when I look at the logging on this\none, here's all those duplex warnings.\n\n916\n00:48:22,960 --> 00:48:25,430\nSo, it's letting me know\nwe've got that problem.\n\n917\n00:48:25,430 --> 00:48:28,140\nI can see when the interface went up or\nwent down or so on.\n\n918\n00:48:28,140 --> 00:48:30,400\nA lot of your error information\nwill be stored in there,\n\n919\n00:48:30,400 --> 00:48:34,750\nso even in the labs in the exam you might\nneed to use show log to be able to see,\n\n920\n00:48:34,750 --> 00:48:36,490\nwhat's been happening on the systems?\n\n921\n00:48:37,510 --> 00:48:43,170\nIt's there, just keep in mind that If you\nreboot the system, the logs get cleared.\n\n922\n00:48:43,170 --> 00:48:48,030\nSo, if the system crashed or whatever,\nyou might not have a good log, right?\n\n923\n00:48:48,030 --> 00:48:50,950\nSo, how do you know if\nyour router crashed?\n\n924\n00:48:52,030 --> 00:48:54,940\nThere is actually an easy way to tell.\n\n925\n00:48:54,940 --> 00:48:59,830\nWhen a router crashes, it creates a memory\ndump that it stores on the flash.\n\n926\n00:48:59,830 --> 00:49:02,730\nAnd if you use the dir command,\nlet me see if I've got one.\n\n927\n00:49:02,730 --> 00:49:03,230\nI don't have one.\n\n928\n00:49:05,630 --> 00:49:08,489\nThankfully.\n[CROSSTALK] But if you've had a crash,\n\n929\n00:49:08,489 --> 00:49:13,244\na lot of times you'll see either a folder\nor file in your labeled crash dump or\n\n930\n00:49:13,244 --> 00:49:14,675\ncrash.dmp, right?\n\n931\n00:49:14,675 --> 00:49:19,340\nAnd in that file is basically a dump of\nthe memory of when the system crashed.\n\n932\n00:49:19,340 --> 00:49:24,760\nAnd you can use the date attached to that\nfile, to identify when the crash occurred.\n\n933\n00:49:24,760 --> 00:49:28,950\nSo, kind of a convenient way to know if\nyour router actually crashed and reboot.\n\n934\n00:49:28,950 --> 00:49:33,650\nAnother way is to do show version,\nand look at the uptime on your router.\n\n935\n00:49:33,650 --> 00:49:35,400\nSee you've got your uptime right here.\n\n936\n00:49:35,400 --> 00:49:37,630\nThis router's been up for\n2 hours and 12 minutes.\n\n937\n00:49:37,630 --> 00:49:40,440\nWell, if I thought that it's been up for\nweeks and weeks and weeks,\n\n938\n00:49:40,440 --> 00:49:42,190\nthis tells me there was a problem.\n\n939\n00:49:42,190 --> 00:49:45,730\nAlthough I can see here it reset my power\non, I flipped the power switch on it.\n\n940\n00:49:45,730 --> 00:49:50,230\n[LAUGH] So, anyhow you can kind of get\nan idea of how long your system has been\n\n941\n00:49:50,230 --> 00:49:51,458\nrunning and if it crashed.\n\n942\n00:49:51,458 --> 00:49:54,720\n>> Now we, Don.\n\n943\n00:49:54,720 --> 00:49:57,710\nWe know that there's a ton\nof debug commands, but\n\n944\n00:49:57,710 --> 00:50:01,630\nif we were to pick out just a couple for\nthe CCNA,\n\n945\n00:50:01,630 --> 00:50:07,080\nwhat couple of debug commands\nwould we think about?\n\n946\n00:50:07,080 --> 00:50:11,020\n>> Most of the debug commands\nthat I use center around.\n\n947\n00:50:11,020 --> 00:50:14,640\n>> Routing protocols and\nlike ppp and stuff.\n\n948\n00:50:14,640 --> 00:50:24,318\nAnd I know we've used some of them in\nthe show, but like debug ip, ospf, adj.\n\n949\n00:50:24,318 --> 00:50:27,260\nAnd debug ip ospf,\nshoot what's the other one.\n\n950\n00:50:27,260 --> 00:50:28,390\n>> Events.\n>> Events that's it.\n\n951\n00:50:28,390 --> 00:50:31,530\nThose are some good ones to monitor.\n\n952\n00:50:31,530 --> 00:50:33,580\nLet me just kind of throw some\nof these in the notes, and\n\n953\n00:50:33,580 --> 00:50:35,880\nI'll add more detail to\nthem after the show.\n\n954\n00:50:35,880 --> 00:50:38,630\n>> Don't get me wrong,\nthere's hundreds of these things, and\n\n955\n00:50:38,630 --> 00:50:40,230\nit's not that you're going to\nactually know all of them, but\n\n956\n00:50:40,230 --> 00:50:42,130\nyou do want to know\njust a couple of these.\n\n957\n00:50:42,130 --> 00:50:43,970\nThey key behind actually running these is,\n\n958\n00:50:43,970 --> 00:50:48,830\nremember that at the end, to turn them\noff when you're actually running them.\n\n959\n00:50:48,830 --> 00:50:50,280\n>> Let me add that first.\n\n960\n00:50:50,280 --> 00:50:54,900\nThe undebug all command, is really\nhandy for that, for shutting those off.\n\n961\n00:50:56,160 --> 00:50:59,210\nSome of the other ones that I use,\nlike debug ipe igrp, and\n\n962\n00:50:59,210 --> 00:51:00,700\nthey're pretty similar if not the same.\n\n963\n00:51:02,120 --> 00:51:03,848\nLet's see.\n\n964\n00:51:03,848 --> 00:51:05,023\nLet's see neighbor.\n\n965\n00:51:05,023 --> 00:51:08,894\n>> Neighbor and just enter is good one.\n\n966\n00:51:08,894 --> 00:51:09,719\n>> Yeah.\n\n967\n00:51:12,253 --> 00:51:15,888\n>> And then debug ip ppp.\n\n968\n00:51:15,888 --> 00:51:16,572\n>> Yeah.\n\n969\n00:51:20,950 --> 00:51:21,473\n>> Wait a minute.\n\n970\n00:51:21,473 --> 00:51:22,344\n>> It switched over.\n\n971\n00:51:22,344 --> 00:51:23,574\n>> Debug ppp.\n\n972\n00:51:23,574 --> 00:51:24,271\nThere we go.\n\n973\n00:51:24,271 --> 00:51:26,012\nAuthentication.\n\n974\n00:51:30,853 --> 00:51:35,392\nAnd debug ppp.\n\n975\n00:51:35,392 --> 00:51:36,786\nPackets?\n\n976\n00:51:36,786 --> 00:51:37,506\n>> Yeah, packets.\n\n977\n00:51:39,131 --> 00:51:44,880\nAnd if you're doing authentication,\nyou can debug at the triple A level, too.\n\n978\n00:51:44,880 --> 00:51:48,525\nIf you've got a radius server set up or\nwhatever, and\n\n979\n00:51:48,525 --> 00:51:51,280\nbasically you go through that process.\n\n980\n00:51:51,280 --> 00:51:56,114\nSo, you might be doing ppp\nwith just CHAP or whatever.\n\n981\n00:51:56,114 --> 00:51:58,971\nIn which case,\nthe ppp debug commands are really handy.\n\n982\n00:51:58,971 --> 00:52:04,580\nBut if you're using triple AAA, then\nyou've got to go a little step further.\n\n983\n00:52:04,580 --> 00:52:11,480\nAnd do some of these guys, to be able\nto see some more information there.\n\n984\n00:52:11,480 --> 00:52:14,800\nSo, those are some of the common\ndebug commands that I use\n\n985\n00:52:14,800 --> 00:52:16,960\nwhen I'm trying to troubleshoot\nauthentication or OSPF.\n\n986\n00:52:16,960 --> 00:52:20,240\nWhy am I not building up a neighbor\nrelationship or whatever.\n\n987\n00:52:20,240 --> 00:52:21,920\nSo, I'll go to those guys.\n\n988\n00:52:21,920 --> 00:52:25,370\nJust remember what Ronnie said,\nthe more stuff you debug,\n\n989\n00:52:25,370 --> 00:52:27,290\nthe more data being thrown at your screen.\n\n990\n00:52:27,290 --> 00:52:31,040\nAnd you can actually stage a small scale\ndenial of service attack on yourself.\n\n991\n00:52:31,040 --> 00:52:32,710\nYou can lock yourself out of the router.\n\n992\n00:52:32,710 --> 00:52:36,327\nSo, if you're on a console cable, that's\nnot a big deal, but if you're remoted in,\n\n993\n00:52:36,327 --> 00:52:37,431\nthat can be a big problem.\n\n994\n00:52:37,431 --> 00:52:42,828\nSo just turn on the bare minimum\nthat you need for troubleshooting.\n\n995\n00:52:42,828 --> 00:52:44,930\nAnd when you're done,\nmake sure you turn it off.\n\n996\n00:52:44,930 --> 00:52:48,426\n>> You can actually run debug.\n\n997\n00:52:48,426 --> 00:52:51,269\n>> [LAUGH]\n>> All, okay.\n\n998\n00:52:51,269 --> 00:52:54,801\nAnd debug all is extremely bad.\n\n999\n00:52:57,820 --> 00:53:01,910\nSo, you don't wanna do that, because it\nwill turn on every ounce of debugging.\n\n1000\n00:53:01,910 --> 00:53:05,360\nAnd there is literally a ton of stuff\ngoing on in the background that you'll\n\n1001\n00:53:05,360 --> 00:53:07,456\nstart to see, and you'll get overwhelmed.\n\n1002\n00:53:07,456 --> 00:53:09,674\nEven on a console you can\nget overwhelmed on that one.\n\n1003\n00:53:09,674 --> 00:53:12,495\nSo, you definitely need to\nbe careful on that one.\n\n1004\n00:53:12,495 --> 00:53:17,754\n>> Just a couple of these debug commands,\nremember the end is the key here, right?\n\n1005\n00:53:17,754 --> 00:53:21,354\nOnce you're done undebug all is the key.\n\n1006\n00:53:21,354 --> 00:53:23,675\n>> Yeah, in fact you know what?\n\n1007\n00:53:23,675 --> 00:53:28,772\nLet me just, I'll add this,\nEXTREMELY GOOD.\n\n1008\n00:53:28,772 --> 00:53:32,140\n>> [LAUGH]\n>> So definitely remember to do that one.\n\n1009\n00:53:32,140 --> 00:53:34,960\nAnd it's one of those weird things\nyou just don't think about, and\n\n1010\n00:53:34,960 --> 00:53:38,110\nthe problem that we have is\nwe're novices at this, right?\n\n1011\n00:53:38,110 --> 00:53:41,250\nIs that we may go okay, well I've\nfound my answer and then you go on and\n\n1012\n00:53:41,250 --> 00:53:44,130\nyou fix the configuration, and\nyou walk away from the device.\n\n1013\n00:53:44,130 --> 00:53:47,299\nAnd that stuff is still generating the\nbackground and can overwhelm your router.\n\n1014\n00:53:47,299 --> 00:53:48,646\n>> Yep, beware.\n\n1015\n00:53:48,646 --> 00:53:52,930\n>> Well, Ronnie, I think we spent enough\ntime on show commands and general stuff.\n\n1016\n00:53:52,930 --> 00:53:56,130\nLet's, well I guess we're kinda\nat the end of the segment.\n\n1017\n00:53:56,130 --> 00:53:57,100\nIn the next segment,\n\n1018\n00:53:57,100 --> 00:54:00,230\nwhat we're gonna do is we're gonna\ntackle some specific issues.\n\n1019\n00:54:00,230 --> 00:54:03,970\nWe're gonna look at some specific\nthings with OSPF and EIGRP, and\n\n1020\n00:54:03,970 --> 00:54:06,270\nfew of the writing protocols,\nthat can cause some issues.\n\n1021\n00:54:06,270 --> 00:54:08,830\nHow to identify them, and\nhow to fix them, all right?\n\n1022\n00:54:08,830 --> 00:54:11,140\nSo, definitely some stuff to tackle then.\n\n1023\n00:54:11,140 --> 00:54:12,443\nFor right now, though,\nlet's stop and take a break.\n\n1024\n00:54:12,443 --> 00:54:14,301\nAnd we'll see you guys back in a few.\n\n1025\n00:54:14,301 --> 00:54:22,369\n[MUSIC]\n\n1026\n00:54:22,369 --> 00:54:24,780\nAll right, welcome back everybody.\n\n1027\n00:54:24,780 --> 00:54:27,890\nSo in the first two segments,\nwe took at look at just\n\n1028\n00:54:27,890 --> 00:54:31,568\ngeneral troubleshooting tools,\nshow commands, theory, and so on.\n\n1029\n00:54:31,568 --> 00:54:35,180\nNow, we're gonna switch gears a bit and\ndive into a specific technology.\n\n1030\n00:54:35,180 --> 00:54:37,240\nWe want to take a look at OSPF.\n\n1031\n00:54:37,240 --> 00:54:41,520\nOpen Shortest Path First, Dynamic\nRouting Protocol, to use its long name.\n\n1032\n00:54:41,520 --> 00:54:45,330\nAnd we're gonna take a look at some of\nthe problems that can happen with it,\n\n1033\n00:54:45,330 --> 00:54:48,790\nhow we can identify them and\nin the end how we correct them?\n\n1034\n00:54:48,790 --> 00:54:50,710\n>> When we start talking about the idea,\n\n1035\n00:54:50,710 --> 00:54:55,090\nespecially routing protocols, there may be\na couple of different configurations that\n\n1036\n00:54:55,090 --> 00:54:57,660\nwe actually have to take care\nof to make everything work.\n\n1037\n00:54:57,660 --> 00:55:00,890\nAnd so, this brings us back to\na general troubleshooting procedure.\n\n1038\n00:55:00,890 --> 00:55:03,750\nFor anything that we doing on routers, and\n\n1039\n00:55:03,750 --> 00:55:07,620\nswitches that we have to know\nwhat the configuration is first.\n\n1040\n00:55:07,620 --> 00:55:10,470\nSo, if we can actually figure out\nwhat it is that we do, right?\n\n1041\n00:55:10,470 --> 00:55:14,750\nIt's very easy then to actually compare\nthat to the configurations that we have\n\n1042\n00:55:14,750 --> 00:55:18,730\nthat are wrong, and\nbe able to fix the issues very quickly.\n\n1043\n00:55:18,730 --> 00:55:19,740\n>> Now, OSPF,\n\n1044\n00:55:19,740 --> 00:55:24,030\nwe're gonna show you an easy one first and\nthen we'll show you a hard one.\n\n1045\n00:55:24,030 --> 00:55:28,540\nOne of the cool things about OSPF is,\nit's really super resilient, right?\n\n1046\n00:55:28,540 --> 00:55:31,430\nThe routers all learn about each other,\nthey map out the whole place,\n\n1047\n00:55:31,430 --> 00:55:32,880\nthey give you loop-free routing.\n\n1048\n00:55:32,880 --> 00:55:34,990\nIt's near impossible to\ncreate a loop in OSPF.\n\n1049\n00:55:34,990 --> 00:55:37,520\nYou got to really try hard to do it,\nand even and\n\n1050\n00:55:37,520 --> 00:55:39,670\nthen half the time it'll spot it for you.\n\n1051\n00:55:39,670 --> 00:55:42,003\nSo, it's really difficult to break OSPF.\n\n1052\n00:55:42,003 --> 00:55:45,336\nThe only thing is that we have a very\nsimple set of rules we have to follow\n\n1053\n00:55:45,336 --> 00:55:47,214\nin order for everything to work great.\n\n1054\n00:55:47,214 --> 00:55:51,085\nWith OSPF in order for\ntwo routers to talk and exchange routes.\n\n1055\n00:55:51,085 --> 00:55:54,386\nThere's a series of settings\nthat have to match.\n\n1056\n00:55:54,386 --> 00:55:56,894\nAnd if any one of them don't\nmatch it's going to stop\n\n1057\n00:55:56,894 --> 00:55:59,340\nthat relationship from building up, right.\n\n1058\n00:55:59,340 --> 00:56:00,850\nSo let's review those.\n\n1059\n00:56:00,850 --> 00:56:04,160\nI know we covered them in the OSPF\nshow but we'll tackle them right now.\n\n1060\n00:56:04,160 --> 00:56:06,300\nThe number one thing is the area number.\n\n1061\n00:56:06,300 --> 00:56:08,410\nIf I have a router in area number five,\nand\n\n1062\n00:56:08,410 --> 00:56:11,870\nanother router in area number three,\nthey're not gonna exchange routes.\n\n1063\n00:56:11,870 --> 00:56:12,730\nThat's not how it works, right?\n\n1064\n00:56:12,730 --> 00:56:15,130\nYou gotta have a border router\nto be able to handle that, so\n\n1065\n00:56:15,130 --> 00:56:17,720\nthe area numbers need to match\nbetween the two routers.\n\n1066\n00:56:17,720 --> 00:56:18,310\n>> Yeah.\n\n1067\n00:56:18,310 --> 00:56:21,730\nWe also have what we call hello and\ndead timers, as well.\n\n1068\n00:56:21,730 --> 00:56:23,990\nOkay, so the hello timer and\n\n1069\n00:56:23,990 --> 00:56:28,800\nthe dead timers on the different routers\nin our OSPF area must actually match.\n\n1070\n00:56:28,800 --> 00:56:32,060\nRemember that just on\na general basis here,\n\n1071\n00:56:32,060 --> 00:56:38,410\nusually the dead timer is four times the\nhello timer in terms of length or time.\n\n1072\n00:56:38,410 --> 00:56:40,460\n>> Yeah, the default is ten seconds for\n\n1073\n00:56:40,460 --> 00:56:44,430\nthe hello timer, every ten seconds\nyour router announces itself.\n\n1074\n00:56:44,430 --> 00:56:48,320\nAnd if you don't hear from a router for\n40 seconds, right,\n\n1075\n00:56:48,320 --> 00:56:51,670\n4 times the dead interval, you assume the\nrouter is down and you remove it, right.\n\n1076\n00:56:51,670 --> 00:56:53,153\nSo that's kinda basic thing,\n\n1077\n00:56:53,153 --> 00:56:55,920\nthat principal behind\nOSPF's initial connection.\n\n1078\n00:56:55,920 --> 00:56:59,000\nSome of the other things, if you've\ngot OSPF authentication turned on,\n\n1079\n00:56:59,000 --> 00:57:00,110\nyour passwords have to match.\n\n1080\n00:57:00,110 --> 00:57:01,710\nThat kinda makes sense.\n\n1081\n00:57:01,710 --> 00:57:03,200\nWhat else do we have?\n\n1082\n00:57:03,200 --> 00:57:05,720\nMTU, the maximum transmission unit.\n\n1083\n00:57:05,720 --> 00:57:08,870\nYou need your OSPF routers handing\noff packets of the same size.\n\n1084\n00:57:08,870 --> 00:57:11,950\nIf they're different that'll\ncause it not to sync up and\n\n1085\n00:57:11,950 --> 00:57:12,660\n>> The last\n\n1086\n00:57:12,660 --> 00:57:15,050\none is what we call a stub flag.\n\n1087\n00:57:15,050 --> 00:57:18,610\nNow we don't really get\ninto that in terms of CCNA.\n\n1088\n00:57:18,610 --> 00:57:21,350\nBut for those of you heading onto CCNP,\nwe will.\n\n1089\n00:57:21,350 --> 00:57:24,290\nBut you do need to know that's\none of those requirements that\n\n1090\n00:57:24,290 --> 00:57:25,450\ndoes have to be there.\n\n1091\n00:57:25,450 --> 00:57:27,220\nWe won't be troubleshooting\nthat in this episode.\n\n1092\n00:57:27,220 --> 00:57:29,320\n>> Yeah, if an area's flagged a stub,\n\n1093\n00:57:29,320 --> 00:57:31,650\nall the routers in that area\nneed to be flagged as a stub.\n\n1094\n00:57:31,650 --> 00:57:35,060\nSo definitely,\ndefinitely something they can turn up.\n\n1095\n00:57:35,060 --> 00:57:39,430\nWhat we've got is, in our lab, we've got\ntwo routers, router one and router four.\n\n1096\n00:57:39,430 --> 00:57:41,150\nAnd they're connected\nwith a crossover cable.\n\n1097\n00:57:41,150 --> 00:57:43,260\nThere's a cable running\nright between two routers.\n\n1098\n00:57:43,260 --> 00:57:46,048\nSo they've got an Ethernet, 100 megabits,\n\n1099\n00:57:46,048 --> 00:57:48,708\na fast Ethernet port\nbetween the two routers.\n\n1100\n00:57:48,708 --> 00:57:52,340\nIt's got a crossover cable,\nand they're both running OSPF.\n\n1101\n00:57:53,580 --> 00:57:54,111\nAll right?\n\n1102\n00:57:54,111 --> 00:57:56,729\nAnd for some reason,\nthey are not exchanging routes and\n\n1103\n00:57:56,729 --> 00:57:59,310\nbuilding up an adjacency, right?\n\n1104\n00:57:59,310 --> 00:58:01,785\n>> Usually for us,\nthis is where you have some issues.\n\n1105\n00:58:01,785 --> 00:58:02,850\nRight?\nWe believe that\n\n1106\n00:58:02,850 --> 00:58:07,210\nwe've configured it perfectly on both\nsides, but when we go and try and\n\n1107\n00:58:07,210 --> 00:58:09,420\ncheck stuff it's really not working.\n\n1108\n00:58:09,420 --> 00:58:12,090\nSo, this is our first issue that we're\ngonna tackle here, is to try and\n\n1109\n00:58:12,090 --> 00:58:14,520\nfigure out what the issue actually is.\n\n1110\n00:58:14,520 --> 00:58:17,470\nNow, this brings us to a good\npoint to actually talk about\n\n1111\n00:58:17,470 --> 00:58:20,230\nthe idea of exam strategies here, right?\n\n1112\n00:58:20,230 --> 00:58:22,890\nFor us, when we start taking\na special about troubleshooting,\n\n1113\n00:58:22,890 --> 00:58:27,440\nsometimes, they're just gonna ask\nyou to identify what the problem is.\n\n1114\n00:58:27,440 --> 00:58:29,550\nSometimes, they're gonna\nask you to fix it.\n\n1115\n00:58:29,550 --> 00:58:32,280\nSo making sure you pay attention\nhere is actually gonna help you out.\n\n1116\n00:58:32,280 --> 00:58:33,710\n>> Yeah, absolutely.\n\n1117\n00:58:33,710 --> 00:58:36,942\nAll right, so let's take a look at these\nrouters and find out what the problem is.\n\n1118\n00:58:36,942 --> 00:58:38,820\nAll right?\nSo we'll jump over to my PC, so\n\n1119\n00:58:38,820 --> 00:58:39,780\nhere in router one,\n\n1120\n00:58:39,780 --> 00:58:44,300\nI've left it connected during\nthe break and it is getting an error.\n\n1121\n00:58:44,300 --> 00:58:48,420\nAnd if you look at the error,\nthey're basically one minute apart.\n\n1122\n00:58:48,420 --> 00:58:50,590\nRight?\nSo here, I've got a connection going down,\n\n1123\n00:58:50,590 --> 00:58:53,580\nmy neighbor relationship between\nrouter one and router four.\n\n1124\n00:58:53,580 --> 00:58:58,340\nIt went down at 13:36 and\nthen I can see that it tried to come\n\n1125\n00:58:58,340 --> 00:59:03,430\nback up, here,\nthe timer expired a minute later.\n\n1126\n00:59:03,430 --> 00:59:08,500\nAnd then it looks like at about two\nminutes later it went down again and\n\n1127\n00:59:08,500 --> 00:59:09,520\nstayed down for a minute.\n\n1128\n00:59:09,520 --> 00:59:11,810\nAnd then two minutes later or\nfive minutes later.\n\n1129\n00:59:11,810 --> 00:59:15,290\nSo it looks like it's trying to come up,\nbut then it's going down and\n\n1130\n00:59:15,290 --> 00:59:17,370\nanother message just\npopped up right there.\n\n1131\n00:59:17,370 --> 00:59:20,290\nSo, it's having a problem\nbuilding up an adjacency.\n\n1132\n00:59:20,290 --> 00:59:25,730\nAnd, if I do show IP OSPF neighbor,\nwe can take a look.\n\n1133\n00:59:25,730 --> 00:59:30,130\nAnd there's the neighbor, router four,\nits current state is down.\n\n1134\n00:59:30,130 --> 00:59:32,830\nDR other which means\n\n1135\n00:59:32,830 --> 00:59:36,285\nwe're not in a exchanging\nrelationship with the other router.\n\n1136\n00:59:36,285 --> 00:59:39,210\nRight?\nWe typically expect to see Exstart\n\n1137\n00:59:39,210 --> 00:59:43,990\nwhich lets us know that we're exchanging\nroutes and then hopefully we see full.\n\n1138\n00:59:43,990 --> 00:59:45,890\nFull letting us know that\nwe got a full adjacency.\n\n1139\n00:59:45,890 --> 00:59:46,880\nThat we are exchanging routes,\n\n1140\n00:59:46,880 --> 00:59:49,360\nthat everything's happy between us and\nthe other router.\n\n1141\n00:59:49,360 --> 00:59:50,113\nThat's not happening here.\n\n1142\n00:59:50,113 --> 00:59:52,474\n>> Yeah, but\nthis is a good sign for us here,\n\n1143\n00:59:52,474 --> 00:59:55,490\nespecially with this\nshow IP OSPF neighbor.\n\n1144\n00:59:55,490 --> 00:59:58,450\nWe're looking for that word that\nsays down, which tells us hey,\n\n1145\n00:59:58,450 --> 01:00:00,780\nyou're not having an adjacency here.\n\n1146\n01:00:00,780 --> 01:00:03,950\nAnything besides the word full means\nthat we've got another problem.\n\n1147\n01:00:03,950 --> 01:00:07,200\n>> Yeah, now,\nif I look at some basic stuff.\n\n1148\n01:00:07,200 --> 01:00:10,294\nRight?\nIf I just start to look at my basic OSPF\n\n1149\n01:00:10,294 --> 01:00:14,722\nconfiguration, right, so\nI could do show IP protocols, and\n\n1150\n01:00:14,722 --> 01:00:18,070\nI can see that I'm running OSPF.\n\n1151\n01:00:18,070 --> 01:00:21,292\nMy process ID is one, but\nI'm not really worried about that.\n\n1152\n01:00:21,292 --> 01:00:27,200\nI've got 0.0.0.0, so I've got a full\nopen wild card except for area zero.\n\n1153\n01:00:27,200 --> 01:00:29,780\nSo that means that OSPF is running and\n\n1154\n01:00:29,780 --> 01:00:34,430\nevery interface on this router\nis being put in area zero.\n\n1155\n01:00:34,430 --> 01:00:37,850\nAnd I can see that it looks like I\nknow about another router out there,\n\n1156\n01:00:37,850 --> 01:00:38,640\nrouter 2.2.2.2.\n\n1157\n01:00:38,640 --> 01:00:39,660\nThat's router two.\n\n1158\n01:00:39,660 --> 01:00:43,280\nBut I don't see router four in my list.\n\n1159\n01:00:43,280 --> 01:00:44,660\nSo, I'm not connected there.\n\n1160\n01:00:44,660 --> 01:00:45,700\nAll right?\n\n1161\n01:00:45,700 --> 01:00:46,310\n>> Yeah.\n\n1162\n01:00:46,310 --> 01:00:51,480\n>> And if I do the same thing over on\nrouter four, let's do a show IP protocols.\n\n1163\n01:00:51,480 --> 01:00:54,200\nI can see that I've got OSPF process 1.\n\n1164\n01:00:54,200 --> 01:00:59,260\nBut I've got the same wild card here,\nevery interface going into area 0,\n\n1165\n01:00:59,260 --> 01:01:02,140\nand we do know about router one.\n\n1166\n01:01:02,140 --> 01:01:03,820\nRouter one knows about router one.\n\n1167\n01:01:03,820 --> 01:01:05,780\nRouter one doesn't seem to\nknow about Router four, so\n\n1168\n01:01:05,780 --> 01:01:07,845\nwe've got a bit of\na disparity between the two.\n\n1169\n01:01:07,845 --> 01:01:09,220\n>> Right.\n\n1170\n01:01:09,220 --> 01:01:13,390\nSo we need to gather some more information\nfor us and so remember that the commands\n\n1171\n01:01:13,390 --> 01:01:16,410\nthat we actually use now are actually\ncommands that can help us.\n\n1172\n01:01:16,410 --> 01:01:19,770\nAnd a lot of times when we begin,\nwe're gonna start off once again and\n\n1173\n01:01:19,770 --> 01:01:23,400\nnow notice that we're trying to see\nafter we got that message that said,\n\n1174\n01:01:23,400 --> 01:01:25,100\nhey something is coming up.\n\n1175\n01:01:25,100 --> 01:01:26,990\nAnd now we're actually\nin the Exstart as well.\n\n1176\n01:01:29,330 --> 01:01:32,560\n>> Yep, and it's showing Exstart here,\nand I bet if we rerun protocols.\n\n1177\n01:01:32,560 --> 01:01:33,290\nOh, nope, I guess not.\n\n1178\n01:01:33,290 --> 01:01:35,520\nI was thinking it might show up there,\nbut it doesn't.\n\n1179\n01:01:35,520 --> 01:01:36,260\nSo, all right.\n\n1180\n01:01:36,260 --> 01:01:39,450\nSo, we do have area zero\nconfigured on both sides, so\n\n1181\n01:01:39,450 --> 01:01:41,240\nI know my area numbers match.\n\n1182\n01:01:41,240 --> 01:01:46,010\nAnd it looks like OSPF itself is happy.\n\n1183\n01:01:46,010 --> 01:01:46,980\nWhere's my problem?\n\n1184\n01:01:46,980 --> 01:01:48,000\nWhere do I start?\n\n1185\n01:01:48,000 --> 01:01:51,610\nWell, this type of an issue can be\na little tricky because the error message\n\n1186\n01:01:51,610 --> 01:01:54,830\nthat we're receiving doesn't\nreally give us any details.\n\n1187\n01:01:54,830 --> 01:01:59,420\nIt's really just saying that we had\na little timer expiring and then we're not\n\n1188\n01:01:59,420 --> 01:02:02,920\nbuilding up an adjacency, we kinda\nalready know that so it doesn't help us.\n\n1189\n01:02:02,920 --> 01:02:05,880\nWe just see too many re-transmits.\n\n1190\n01:02:05,880 --> 01:02:07,660\nThat's all I get, right?\n\n1191\n01:02:07,660 --> 01:02:10,640\nThat could indicate that we have\nan unstable network, right?\n\n1192\n01:02:10,640 --> 01:02:12,620\nThat the network is constantly failing.\n\n1193\n01:02:12,620 --> 01:02:15,550\nBut in this case, we've got a crossover\ncable running between two routers,\n\n1194\n01:02:15,550 --> 01:02:19,770\nit's pretty unlikely to have network\ncongestions or anything like that.\n\n1195\n01:02:19,770 --> 01:02:23,560\nWe need an idea of what's really\ngoing on behind the scenes.\n\n1196\n01:02:23,560 --> 01:02:26,350\nAnd the way we do that,\nis with debug commands.\n\n1197\n01:02:28,120 --> 01:02:31,680\nSo I'm going to run, debug ip aspf adj.\n\n1198\n01:02:31,680 --> 01:02:35,170\nI think we mentioned this\none in the last segment.\n\n1199\n01:02:35,170 --> 01:02:39,930\nBut this is going to show me what's\ngoing on when we build up an adjacency.\n\n1200\n01:02:41,280 --> 01:02:45,660\nNow, one thing about this, when your\nrouter builds up an adjacency, you'll get\n\n1201\n01:02:45,660 --> 01:02:50,190\na lot of log messages on the screen, and\nthen after that, you won't get any more.\n\n1202\n01:02:50,190 --> 01:02:52,840\nThe adjacency is built up,\nand it's stable.\n\n1203\n01:02:52,840 --> 01:02:55,550\nSo, if you want to force\nit to rebuild connections,\n\n1204\n01:02:55,550 --> 01:02:58,270\nyou might need to clear your OSPF process.\n\n1205\n01:02:58,270 --> 01:03:01,440\nWe could wait if I was a patient man but\nI'm not.\n\n1206\n01:03:01,440 --> 01:03:04,370\nSo I'm going to go ahead and\nclear the OSPF process.\n\n1207\n01:03:06,810 --> 01:03:08,630\nAnd when that's done, there we go.\n\n1208\n01:03:08,630 --> 01:03:12,010\nWe'll see our adjacencies\nbuilding back up right.\n\n1209\n01:03:12,010 --> 01:03:16,773\n>> Now Don before we go any further,\nthat debug ip OSPF adj,\n\n1210\n01:03:16,773 --> 01:03:24,100\nwe want to make sure that we remember\nthat it's not debug ip OSPF adjacency.\n\n1211\n01:03:24,100 --> 01:03:27,315\nSo that's not going to actually help\nyou out there, if you type that in or\n\n1212\n01:03:27,315 --> 01:03:30,690\nif you actually say, here's the command\nthat you use to actually figure out\n\n1213\n01:03:30,690 --> 01:03:33,040\nwhether an adjacency is happening or not.\n\n1214\n01:03:33,040 --> 01:03:37,030\nSo make sure you remember\nit's just ADJ here too.\n\n1215\n01:03:37,030 --> 01:03:38,366\n>> All right.\nSo here I can see my adjacency is\n\n1216\n01:03:38,366 --> 01:03:38,880\ncoming up now.\n\n1217\n01:03:38,880 --> 01:03:39,840\nI've got adjacencies..\n\n1218\n01:03:39,840 --> 01:03:40,974\nLet me turn my debug off.\n\n1219\n01:03:40,974 --> 01:03:43,225\nI'm going to do a little un-debug all.\n\n1220\n01:03:43,225 --> 01:03:46,218\nI've got adjacencies building\nover my serial link.\n\n1221\n01:03:46,218 --> 01:03:48,967\nThat's my connection to router2.\n\n1222\n01:03:48,967 --> 01:03:51,010\nSo, I'm gonna ignore that.\n\n1223\n01:03:51,010 --> 01:03:55,330\nThe connection I'm worried about is\nthe one to router4 which is on my Fa0/0\n\n1224\n01:03:55,330 --> 01:03:56,760\ninterface.\n\n1225\n01:03:56,760 --> 01:03:59,480\nThat's all this mess right here.\n\n1226\n01:03:59,480 --> 01:04:02,590\nSo, this is me trying to build\na connection or router4.\n\n1227\n01:04:02,590 --> 01:04:08,220\nAnd right here,\nin the debug output I can see my problem.\n\n1228\n01:04:08,220 --> 01:04:13,890\nNeighbor 4444, that's router4,\nhas a larger interface MTU.\n\n1229\n01:04:13,890 --> 01:04:14,400\nRemember, for\n\n1230\n01:04:14,400 --> 01:04:18,360\nOSPF to bond up all these different\nvalues have to match, and right here.\n\n1231\n01:04:18,360 --> 01:04:19,910\nIt's telling me there's a value\nthat doesn't match, and\n\n1232\n01:04:19,910 --> 01:04:21,450\nit's MTU which is pretty important.\n\n1233\n01:04:22,630 --> 01:04:25,700\nSo well, where's my problem?\n\n1234\n01:04:25,700 --> 01:04:26,960\nWell, let's take a look.\n\n1235\n01:04:26,960 --> 01:04:29,700\nThere's a neat command that we can\nuse here that will let us see what\n\n1236\n01:04:29,700 --> 01:04:31,040\nthe MTU is on the interface.\n\n1237\n01:04:31,040 --> 01:04:33,720\nWe could probably just do a show\nrunning config, and spot it there, but\n\n1238\n01:04:33,720 --> 01:04:36,400\nif it's the default it doesn't show up.\n\n1239\n01:04:36,400 --> 01:04:42,534\nSo, I like to use this one,\nshow ip, ospf interface fa0/0.\n\n1240\n01:04:43,550 --> 01:04:47,620\nShow ip interface fa/00 shows us all\nthe layer three information about\n\n1241\n01:04:47,620 --> 01:04:48,490\nthe interface.\n\n1242\n01:04:48,490 --> 01:04:51,110\nBut when you add the ospf\nkeyword in there,\n\n1243\n01:04:51,110 --> 01:04:54,190\nit's going to show us all\nthe ospf related data.\n\n1244\n01:04:54,190 --> 01:04:55,880\nIt's really good stuff.\n\n1245\n01:04:55,880 --> 01:05:00,580\nWhen we run that, we'll get a chance\nto see our hello and our dead timers.\n\n1246\n01:05:00,580 --> 01:05:01,710\nThere they are right there.\n\n1247\n01:05:01,710 --> 01:05:05,590\nNow, I know what they are, and our MTUs\nin here somewhere if I can spot it.\n\n1248\n01:05:06,760 --> 01:05:08,636\nLet's see, help me out Ronnie,\nyou see the MTU?\n\n1249\n01:05:08,636 --> 01:05:09,628\n>> Nothing.\n\n1250\n01:05:09,628 --> 01:05:11,463\nGo down a little.\n\n1251\n01:05:11,463 --> 01:05:12,319\nNo, I don't see it.\n>> That's the whole screen.\n\n1252\n01:05:12,319 --> 01:05:13,544\nI could've sworn it was in here.\n\n1253\n01:05:13,544 --> 01:05:15,135\n>> Okay.\n\n1254\n01:05:15,135 --> 01:05:15,792\n>> Maybe I'm wrong.\n\n1255\n01:05:15,792 --> 01:05:17,007\nMaybe the MTU isn't in here.\n\n1256\n01:05:17,007 --> 01:05:19,080\nBut, we can see our hello and dead timers.\n\n1257\n01:05:19,080 --> 01:05:20,956\nWe can see our area numbers.\n\n1258\n01:05:20,956 --> 01:05:23,786\nThat information is all\nspread through out.\n\n1259\n01:05:23,786 --> 01:05:25,960\nHere's the area number for the interface.\n\n1260\n01:05:25,960 --> 01:05:27,632\nBut, I guess I'm wrong, Ronnie.\n\n1261\n01:05:27,632 --> 01:05:30,412\nI do not see the MTU in here.\n\n1262\n01:05:30,412 --> 01:05:31,495\nWell, no big deal.\n\n1263\n01:05:31,495 --> 01:05:33,160\nWe can drop off.\n\n1264\n01:05:33,160 --> 01:05:33,730\n>> Yeah, ospf.\n\n1265\n01:05:35,350 --> 01:05:37,440\n>> And\nwe can actually go off the IP part also,\n\n1266\n01:05:37,440 --> 01:05:39,920\ncuz the maximum transmission unit\nis actually a function of layer2.\n\n1267\n01:05:39,920 --> 01:05:45,560\nI think it shows it on both, but I'll do\na show interface fa/00 and there's my MTU.\n\n1268\n01:05:45,560 --> 01:05:46,770\nSo, I've got a MTU of 1,500 bytes.\n\n1269\n01:05:46,770 --> 01:05:51,140\nCould have sworn that was in the show\nip ospf output, but I guess not.\n\n1270\n01:05:51,140 --> 01:05:54,150\nSo, I can see right\nthere my MTU 1,500 bytes\n\n1271\n01:05:54,150 --> 01:05:56,180\nthat's what it's set to on this side.\n\n1272\n01:05:56,180 --> 01:06:00,700\nNow, the error message specifically\nsaid that router4 had a larger MTU.\n\n1273\n01:06:00,700 --> 01:06:04,550\n1,500s pretty standard, and that's\nwhat most systems are gonna use, and\n\n1274\n01:06:04,550 --> 01:06:05,530\nit's usually the default.\n\n1275\n01:06:05,530 --> 01:06:08,355\nSo, I bet if I do a show interface fa/00.\n\n1276\n01:06:10,900 --> 01:06:14,700\nA show run, I wanna see the configuration.\n\n1277\n01:06:14,700 --> 01:06:18,810\nSo, I if I do a show\nrunning-config interface fa/00.\n\n1278\n01:06:18,810 --> 01:06:21,940\nYeah, I don't see any MTU commands\nin here, so that's just the default.\n\n1279\n01:06:21,940 --> 01:06:23,230\nThe default on this router is 1,500.\n\n1280\n01:06:23,230 --> 01:06:24,110\n>> Yeah.\n>> Pretty common.\n\n1281\n01:06:25,470 --> 01:06:29,246\nLet's go take a look at router4.\n\n1282\n01:06:29,246 --> 01:06:35,754\nNow, on router4,\n[SOUND] If I take a look at its interface.\n\n1283\n01:06:35,754 --> 01:06:37,705\nI can see the Hello and Dead timers.\n\n1284\n01:06:37,705 --> 01:06:39,305\nI can see the area number, right?\n\n1285\n01:06:39,305 --> 01:06:40,965\nThat stuff's matching.\n\n1286\n01:06:40,965 --> 01:06:42,355\nSo, we're good there.\n\n1287\n01:06:42,355 --> 01:06:44,425\nAgain, MTU not included in this output.\n\n1288\n01:06:44,425 --> 01:06:46,525\nI could've swore that it was.\n\n1289\n01:06:46,525 --> 01:06:49,545\nBut, we'll just change that\nto a show interface fa0/0.\n\n1290\n01:06:49,545 --> 01:06:51,375\nAnd here I can see.\n\n1291\n01:06:51,375 --> 01:06:52,065\n>> There it is.\n\n1292\n01:06:52,065 --> 01:06:55,165\n>> Yeah.\nRight there MTU 1516.\n\n1293\n01:06:55,165 --> 01:06:57,286\nNow, why is it different?\n\n1294\n01:06:57,286 --> 01:06:57,959\nSomebody may have changed it.\n\n1295\n01:06:57,959 --> 01:06:58,615\n>> Yeah.\n>> [LAUGH]\n\n1296\n01:06:58,615 --> 01:07:00,187\n>> There's plenty of reasons for\n\n1297\n01:07:00,187 --> 01:07:01,459\nchanging your MTU size.\n\n1298\n01:07:01,459 --> 01:07:03,629\nYou might have switches\nthat require that change.\n\n1299\n01:07:03,629 --> 01:07:06,429\nYou might be using VLAN tagging,\nor not using VLAN tagging.\n\n1300\n01:07:06,429 --> 01:07:08,884\n>> Yeah.\n>> So, they might need to be manipulated.\n\n1301\n01:07:08,884 --> 01:07:10,831\nThis one's been changed, though.\n\n1302\n01:07:10,831 --> 01:07:14,904\nAnd if I do a show running config,\n\n1303\n01:07:14,904 --> 01:07:20,295\nfa0/0, yep, bad syntax, there we go.\n\n1304\n01:07:20,295 --> 01:07:20,846\nI can see that-\n>> Well, there it is.\n\n1305\n01:07:20,846 --> 01:07:22,417\n>> MTU right there, right?\n\n1306\n01:07:22,417 --> 01:07:24,164\nSo, we just need to put\nit back to the default.\n\n1307\n01:07:27,882 --> 01:07:29,706\nAnd actually I can just\nremove the command,\n\n1308\n01:07:29,706 --> 01:07:31,589\nbecause the default on this one is 1500.\n\n1309\n01:07:33,970 --> 01:07:37,890\nSo, we'll just remove it, and\nonce it's gone, I can verify it,\n\n1310\n01:07:37,890 --> 01:07:41,040\nbut there's a pretty big hint\nright there that it worked.\n\n1311\n01:07:41,040 --> 01:07:45,370\nI just a message right,\nthere that we went from loading to full.\n\n1312\n01:07:45,370 --> 01:07:47,977\nWe just built up a healthy\nadjacency with the other side.\n\n1313\n01:07:50,415 --> 01:07:53,818\nAnd there I've got that full\nconnection to the other router,\n\n1314\n01:07:53,818 --> 01:07:57,170\nif I jump back to router1,\nI should see the same thing here.\n\n1315\n01:07:58,960 --> 01:08:00,260\nAnd there it is.\n\n1316\n01:08:00,260 --> 01:08:01,330\nWe're up, and we're happy.\n\n1317\n01:08:03,220 --> 01:08:04,770\nThis is a pretty simple one.\n\n1318\n01:08:04,770 --> 01:08:07,510\nYou could just start out with\njust doing a show interface, and\n\n1319\n01:08:07,510 --> 01:08:10,290\nlooking at the two different sides and\nspot the difference.\n\n1320\n01:08:10,290 --> 01:08:13,210\nThe debug command, though, made it a lot\neasier to find what the problem was.\n\n1321\n01:08:13,210 --> 01:08:17,150\nThe errors are right there in the debug\noutput, if where to look for them and\n\n1322\n01:08:17,150 --> 01:08:17,740\nthat's the trick.\n\n1323\n01:08:17,740 --> 01:08:21,150\nThat's what Cisco's testing\nis do the ins and outs,\n\n1324\n01:08:21,150 --> 01:08:25,360\nthe way to find this input that's not\nnecessarily displayed by default.\n\n1325\n01:08:25,360 --> 01:08:29,870\nAnd even though we could have just done\nthat show interface, it can take you\n\n1326\n01:08:29,870 --> 01:08:32,660\na little while, what we were looking for,\nthe MTU, and go wait a minute.\n\n1327\n01:08:32,660 --> 01:08:34,380\nIt's not where we thought it was.\n\n1328\n01:08:34,380 --> 01:08:37,560\nSo, by you practicing this and\nactually understanding where things are,\n\n1329\n01:08:37,560 --> 01:08:41,380\nit makes the troubleshooting,\nespecially on the exam, a bit quicker.\n\n1330\n01:08:41,380 --> 01:08:45,970\nI hate to say it, on a timed exam,\nyou need all the time you can spare.\n\n1331\n01:08:45,970 --> 01:08:46,594\nOkay?\nSo,\n\n1332\n01:08:46,594 --> 01:08:48,170\nwe wanna make sure we understand that too.\n\n1333\n01:08:49,890 --> 01:08:51,780\nAll right, so that was our easy one.\n\n1334\n01:08:51,780 --> 01:08:55,940\nJust making sure those values match,\nonce you make a match it connects up.\n\n1335\n01:08:55,940 --> 01:08:57,330\nNow, let's move to a harder one.\n\n1336\n01:08:58,510 --> 01:09:01,600\nWe've got three other routers, well,\none of them is the same, router1.\n\n1337\n01:09:01,600 --> 01:09:05,250\nWe've got router1, router2 and router3.\n\n1338\n01:09:05,250 --> 01:09:07,870\nAnd, we've got them all connected\nvia a frame relay network, and\n\n1339\n01:09:07,870 --> 01:09:10,690\nbasically a triangle where router1\nis at the top of the triangle,\n\n1340\n01:09:10,690 --> 01:09:12,970\nand router2 and\n3 are connected to router1.\n\n1341\n01:09:12,970 --> 01:09:16,508\nSo, we'll think of router one as\nour headquarters and routers2 and\n\n1342\n01:09:16,508 --> 01:09:18,390\n3 as branches, okay?\n\n1343\n01:09:18,390 --> 01:09:20,800\nThe frame relay network\nwe have connected as.\n\n1344\n01:09:20,800 --> 01:09:26,290\nOne subnet, not several different subnets\nfor each link, but just one big subnet.\n\n1345\n01:09:26,290 --> 01:09:27,160\nThe 192.168.1.0/24 subnet.\n\n1346\n01:09:27,160 --> 01:09:29,970\nSo that's it, one network.\n\n1347\n01:09:31,580 --> 01:09:35,070\nAt the headquarters, we've got\na point to multi-point connection.\n\n1348\n01:09:35,070 --> 01:09:37,840\nThere's one link that connects\nto all these other branches, and\n\n1349\n01:09:37,840 --> 01:09:40,030\nat the other branches\nwe have point-to-point.\n\n1350\n01:09:40,030 --> 01:09:42,940\nIt's already set up, the network is fine.\n\n1351\n01:09:42,940 --> 01:09:45,790\nWe turn on OSPF, and it's not fine.\n\n1352\n01:09:45,790 --> 01:09:47,368\nIt's not working.\n\n1353\n01:09:47,368 --> 01:09:53,460\nSo, we're gonna take a look at that,\nverify it, and establish a theory.\n\n1354\n01:09:53,460 --> 01:09:56,190\nNow, before I get too far,\nlet me draw a picture of this, so\n\n1355\n01:09:56,190 --> 01:10:00,268\nI can make sure that everyone understands\nthe typology that we're dealing with.\n\n1356\n01:10:00,268 --> 01:10:05,310\nI'm not gonna go crazy on my artwork here,\nI'll just try and go really simple.\n\n1357\n01:10:05,310 --> 01:10:10,020\nI say that, and then I end up doing\nsomething just completely horrible.\n\n1358\n01:10:10,020 --> 01:10:13,850\nBut, let me just do a nice big\nbrush stroke here, all right?\n\n1359\n01:10:13,850 --> 01:10:18,000\nSo basically,\nwe've got router one up at the top.\n\n1360\n01:10:18,000 --> 01:10:21,210\nAnd then we've got router2,\nand router3 down here.\n\n1361\n01:10:21,210 --> 01:10:25,230\nAnd they're connected this, okay?\n\n1362\n01:10:25,230 --> 01:10:30,976\nAnd up here on router1, and\nthen down here we've got router2,\n\n1363\n01:10:30,976 --> 01:10:34,750\nand over here we've got router3, okay?\n\n1364\n01:10:34,750 --> 01:10:39,720\nSo, up on router1, it's just interface\nthat's up there, and that's it.\n\n1365\n01:10:39,720 --> 01:10:46,858\nSo, on router1, we've got Serial 1/0.1,\n\n1366\n01:10:46,858 --> 01:10:52,010\nand it is a multi-point interface.\n\n1367\n01:10:52,010 --> 01:11:01,180\nLet me make this font less than gigantic.\n\n1368\n01:11:01,180 --> 01:11:03,800\nOkay, so serial 1/0.1 is a point\nto multi-point interface.\n\n1369\n01:11:03,800 --> 01:11:12,290\nDown here on router3 it's serial 1/0.301\nwhich is just a point-to-points.\n\n1370\n01:11:13,930 --> 01:11:17,790\nAnd over here on router2 it's the same\nkind of layout, it's a different Del-C.\n\n1371\n01:11:17,790 --> 01:11:22,340\nWe use the Del-C numbers for\nthe sub-interface.\n\n1372\n01:11:22,340 --> 01:11:24,790\nAnd that's a pretty common\npractice right there.\n\n1373\n01:11:24,790 --> 01:11:26,915\nSo, those guys are just point-to-point.\n\n1374\n01:11:26,915 --> 01:11:30,360\nRouter2 does not have a direct\nconnection to router3.\n\n1375\n01:11:30,360 --> 01:11:31,980\nIt connects through router1, right?\n\n1376\n01:11:31,980 --> 01:11:35,030\nPretty common if router1 is your\nheadquarters you want everything to flow\n\n1377\n01:11:35,030 --> 01:11:36,580\nthrough the headquarters.\n\n1378\n01:11:36,580 --> 01:11:40,063\nNow, normally when we do this\nwe would assign a bunch of /30,\n\n1379\n01:11:40,063 --> 01:11:42,072\nreally small networks to each link.\n\n1380\n01:11:42,072 --> 01:11:45,132\nSo that we had a point-to-point\nlink running here, to router2 and\n\n1381\n01:11:45,132 --> 01:11:47,466\na point-to-point link\nrunning here to router3.\n\n1382\n01:11:47,466 --> 01:11:51,093\nBut sometimes to save IPs,\nwe just make this all one network.\n\n1383\n01:11:51,093 --> 01:11:52,363\nAnd that's how this is.\n\n1384\n01:11:52,363 --> 01:12:00,630\nRouter 1 up here is 192.168.1.1.\n\n1385\n01:12:00,630 --> 01:12:05,153\nRouter 2 is 192.168.1.2, and\nrouter 3 is 192.168.1.3.\n\n1386\n01:12:05,153 --> 01:12:07,950\nSee how they're all in the same subnet?\n\n1387\n01:12:07,950 --> 01:12:11,970\nIt's really just one network\nhere in the frame relay cloud.\n\n1388\n01:12:11,970 --> 01:12:15,240\nSo that frame relay.\n\n1389\n01:12:15,240 --> 01:12:22,310\nThis is really the telco network, and\nnot like a private network or whatever.\n\n1390\n01:12:22,310 --> 01:12:23,210\nThat's our frame relay.\n\n1391\n01:12:23,210 --> 01:12:23,717\nAll right.\n\n1392\n01:12:23,717 --> 01:12:26,570\nSo that's basically what\nwe're dealing with.\n\n1393\n01:12:26,570 --> 01:12:30,180\nAnd the frame relay side,\nremember frame relay is layer two.\n\n1394\n01:12:30,180 --> 01:12:31,880\nIt's done.\nIt's already setup.\n\n1395\n01:12:31,880 --> 01:12:34,200\nAnd the IP addresses are assigned.\n\n1396\n01:12:34,200 --> 01:12:35,790\nAnd the basic connectivity is there.\n\n1397\n01:12:35,790 --> 01:12:36,660\nIt's working fine.\n\n1398\n01:12:36,660 --> 01:12:37,570\nRight?\n\n1399\n01:12:37,570 --> 01:12:40,300\nLet's verify that.\n\n1400\n01:12:40,300 --> 01:12:41,525\nSo here, I'm on router one.\n\n1401\n01:12:48,195 --> 01:12:52,983\nAnd if I take a look at that serial 1/0.1\ninterface, I can see that it's got an IP\n\n1402\n01:12:52,983 --> 01:12:57,907\naddress of 192.168.1.1, and\nit's got DLCIs attached to it for 102 and\n\n1403\n01:12:57,907 --> 01:13:02,105\n103, those are the DLCI that point\nout to branch one, and branch two.\n\n1404\n01:13:03,860 --> 01:13:04,764\nAll right.\n\n1405\n01:13:04,764 --> 01:13:11,009\nAnd if I try and ping, 192.168.1.2,\nthat's branch two, I can ping it.\n\n1406\n01:13:11,009 --> 01:13:15,030\nAnd if I try to ping branch three,\nI can ping it.\n\n1407\n01:13:15,030 --> 01:13:18,600\nSo I know the frame relay\nconfiguration on router one is good.\n\n1408\n01:13:20,600 --> 01:13:22,364\nAnd if we take a look at router two.\n\n1409\n01:13:26,905 --> 01:13:28,050\nThere it is.\n\n1410\n01:13:28,050 --> 01:13:32,330\nIt's got its IP address assigned,\nand it's tied to DLCI 201.\n\n1411\n01:13:32,330 --> 01:13:35,450\nAnd if I ping 192.168.1.1\nthat's the home office.\n\n1412\n01:13:36,850 --> 01:13:37,770\nI can ping it just fine.\n\n1413\n01:13:37,770 --> 01:13:42,400\nAnd if I try and ping router 3,\nI'm not going direct to router 3,\n\n1414\n01:13:42,400 --> 01:13:45,590\nI'm going through the home\noffice on my way over.\n\n1415\n01:13:45,590 --> 01:13:47,560\nAnd sure enough I can\nping it just fine too.\n\n1416\n01:13:48,680 --> 01:13:50,730\nAnd then let's just\ncheck out router three.\n\n1417\n01:13:50,730 --> 01:13:52,118\nIt should be the opposite here.\n\n1418\n01:13:55,948 --> 01:13:56,703\nThere it is.\n\n1419\n01:13:56,703 --> 01:13:57,910\nAnd if I ping the home office.\n\n1420\n01:13:57,910 --> 01:14:02,210\nAnd if I ping router two.\n\n1421\n01:14:02,210 --> 01:14:03,150\nThere we go.\n\n1422\n01:14:03,150 --> 01:14:04,730\n>> Basic connectivity.\n\n1423\n01:14:04,730 --> 01:14:06,822\n>> Always check the basic connectivity.\n\n1424\n01:14:06,822 --> 01:14:09,370\nRight?\nCuz OSPF might be broken because\n\n1425\n01:14:09,370 --> 01:14:10,470\na cable is unplugged.\n\n1426\n01:14:10,470 --> 01:14:12,520\n>> Right.\n>> And it's much easier just to plug in\n\n1427\n01:14:12,520 --> 01:14:16,420\na cable than it is to go through and\ntroubleshoot all this OSPF stuff.\n\n1428\n01:14:16,420 --> 01:14:17,450\nSo always check the easy stuff.\n\n1429\n01:14:17,450 --> 01:14:21,430\n>> Yeah.\n>> All right, so now that I've established\n\n1430\n01:14:21,430 --> 01:14:25,040\nbasic connectivity,\nlet's go check out the problem.\n\n1431\n01:14:25,040 --> 01:14:28,300\nThe problem is all three of these\nrouters are running OSPF and\n\n1432\n01:14:28,300 --> 01:14:31,450\nthey should be exchanging routes, right?\n\n1433\n01:14:31,450 --> 01:14:36,800\nBut if I take a look at, we'll take\nrouter 3 since I'm already on it and\n\n1434\n01:14:36,800 --> 01:14:41,408\nI'll just do a show run section OSPF.\n\n1435\n01:14:41,408 --> 01:14:42,898\nAll right.\n\n1436\n01:14:42,898 --> 01:14:45,820\nAnd on router three here,\nI can see that I've assigned a router ID.\n\n1437\n01:14:45,820 --> 01:14:48,050\nAnd I've got a nice big\nwildcard that says,\n\n1438\n01:14:48,050 --> 01:14:51,370\nevery area interface is in area zero.\n\n1439\n01:14:51,370 --> 01:14:51,874\nAll right.\n\n1440\n01:14:51,874 --> 01:14:54,240\nSo just throwing the whole\nrouter in area zero.\n\n1441\n01:14:54,240 --> 01:14:55,730\nThat's pretty straightforward.\n\n1442\n01:14:56,760 --> 01:15:01,020\nBut if I do a show ip ospf neighbor,\nnobody.\n\n1443\n01:15:01,020 --> 01:15:01,930\n>> Nobody.\n\n1444\n01:15:01,930 --> 01:15:04,060\n>> All right let's take\na look at router one.\n\n1445\n01:15:04,060 --> 01:15:05,770\nRouter one's in the middle\nof this whole mess.\n\n1446\n01:15:08,820 --> 01:15:09,780\nAnd if we look at it.\n\n1447\n01:15:11,710 --> 01:15:14,010\nSame thing here, right,\nI assigned a router ID and\n\n1448\n01:15:14,010 --> 01:15:19,290\nthen all the interfaces are in area\nzero and if I look at my neighbor table,\n\n1449\n01:15:19,290 --> 01:15:23,230\nwell there's router four from the last\nexample but no router two or router three.\n\n1450\n01:15:23,230 --> 01:15:23,730\n>> No.\n\n1451\n01:15:24,770 --> 01:15:32,515\n>> And then lastly we'll check router two,\nand there it is.\n\n1452\n01:15:32,515 --> 01:15:34,740\nRight?\nSo it looks good there, and\n\n1453\n01:15:34,740 --> 01:15:38,470\nif I do a show ip ospf neighbor,\nnothing, nope.\n\n1454\n01:15:40,800 --> 01:15:46,210\n>> So all of our configurations in terms\nof basic OSPF configuration is correct.\n\n1455\n01:15:46,210 --> 01:15:48,650\nWe all have the right area number.\n\n1456\n01:15:48,650 --> 01:15:53,610\nWe all have the neighbor or the networks\nthat we want to advertise into it.\n\n1457\n01:15:53,610 --> 01:15:54,290\nEverything looks good.\n\n1458\n01:15:54,290 --> 01:15:59,660\nI can ping the devices but\nI'm still not forming neighbors here.\n\n1459\n01:15:59,660 --> 01:16:02,730\nSo this is where we have to\ndive in a little bit deeper and\n\n1460\n01:16:02,730 --> 01:16:05,760\nget beyond the idea of just basic\nconnectivity and what we need.\n\n1461\n01:16:05,760 --> 01:16:08,060\n>> Yeah, I mean if we're just\nfocused on the little things,\n\n1462\n01:16:08,060 --> 01:16:09,390\nwe know the area numbers match.\n\n1463\n01:16:09,390 --> 01:16:10,910\n>> Yeah.\n>> Because all three routers are just set\n\n1464\n01:16:10,910 --> 01:16:11,660\nto area zero.\n\n1465\n01:16:11,660 --> 01:16:12,390\n>> Yeah.\n\n1466\n01:16:12,390 --> 01:16:14,010\n>> Right?\nAnd what about MTUs?\n\n1467\n01:16:14,010 --> 01:16:18,490\nWell we saw the interfaces, I pulled the\ninterface configs on every one of those.\n\n1468\n01:16:18,490 --> 01:16:20,090\n>> Yeah.\n>> And the empty user and sets.\n\n1469\n01:16:20,090 --> 01:16:21,760\nSo they're all just at the default MTUs.\n\n1470\n01:16:21,760 --> 01:16:25,030\nThese three routers are all running\nthe same IOS, the same hardware,\n\n1471\n01:16:25,030 --> 01:16:26,630\nso they have the same default.\n\n1472\n01:16:26,630 --> 01:16:30,490\nSo it's not a manipulated MTU\nlike in the last example,\n\n1473\n01:16:30,490 --> 01:16:34,080\nwe're not doing OSPF authentication or\nwe'd see it there in the interface.\n\n1474\n01:16:34,080 --> 01:16:35,950\nSo it's not a bad password.\n\n1475\n01:16:35,950 --> 01:16:37,750\nIt's not a stub flag or anything,\n\n1476\n01:16:37,750 --> 01:16:41,050\nbecause we'd see that in the OSPF\nconfig that I pulled down here.\n\n1477\n01:16:41,050 --> 01:16:46,125\nSo all the normal markers\nof a problem are not here.\n\n1478\n01:16:46,125 --> 01:16:46,740\nRight?\nAll those\n\n1479\n01:16:46,740 --> 01:16:49,412\nthings that have to match to\nlook like they should be fine.\n\n1480\n01:16:49,412 --> 01:16:50,630\nAll right?\n\n1481\n01:16:50,630 --> 01:16:54,090\nBut the reality is deep down\nunderneath there's a problem.\n\n1482\n01:16:54,090 --> 01:16:55,550\nThere's something that doesn't match.\n\n1483\n01:16:55,550 --> 01:16:56,920\nBut maybe it's not telling us what.\n\n1484\n01:16:56,920 --> 01:16:59,860\nAnd so here's where we have to\nrely on our show commands, and\n\n1485\n01:16:59,860 --> 01:17:01,590\nour debug commands to\nfigure out what that is.\n\n1486\n01:17:01,590 --> 01:17:02,840\n>> Right.\n>> Right.\n\n1487\n01:17:02,840 --> 01:17:05,390\nBut looking at the clock, Ronnie,\nwe're a little short on time.\n\n1488\n01:17:05,390 --> 01:17:06,470\nSo why don't we do this?\n\n1489\n01:17:06,470 --> 01:17:09,960\nLet us build suspense, right, and anxiety.\n\n1490\n01:17:09,960 --> 01:17:12,080\nAnd so let's stop here and take a break.\n\n1491\n01:17:12,080 --> 01:17:16,240\nAnd when we get back, we're gonna dig\nin behind the scenes on these routers,\n\n1492\n01:17:16,240 --> 01:17:18,430\nget them to tell us what the problem is,\nso\n\n1493\n01:17:18,430 --> 01:17:22,430\nthat we can then go and fix it,\nas soon as we figure what the heck it is.\n\n1494\n01:17:22,430 --> 01:17:22,930\n>> Yeah\n>> All right.\n\n1495\n01:17:22,930 --> 01:17:24,130\nSo ladies and gentlemen, stay tuned.\n\n1496\n01:17:24,130 --> 01:17:25,193\nWe'll be back after this.\n\n1497\n01:17:25,193 --> 01:17:33,401\n[MUSIC]\n\n1498\n01:17:33,401 --> 01:17:35,210\nAll right welcome back everybody.\n\n1499\n01:17:35,210 --> 01:17:38,270\nSo we started looking at\nan issue on our routers.\n\n1500\n01:17:38,270 --> 01:17:40,830\nWe were looking at router one,\ntwo, and three and\n\n1501\n01:17:40,830 --> 01:17:46,730\ntheir frame relay network and it looked\nlike everything matched, but it didn't.\n\n1502\n01:17:46,730 --> 01:17:48,470\nAnd so now we need to find out why.\n\n1503\n01:17:48,470 --> 01:17:52,216\n>> Yeah, so beyond the idea of just\nchecking the proper configuration of which\n\n1504\n01:17:52,216 --> 01:17:53,390\nwe do have.\n\n1505\n01:17:53,390 --> 01:17:57,240\nAnd that OSPF should working, we now\nhave to go a little bit deeper here to\n\n1506\n01:17:57,240 --> 01:17:59,970\nfigure out what it is that we're missing.\n\n1507\n01:17:59,970 --> 01:18:04,315\nWithout having a neighbor adjacency up\nhere, that's probably our first clue.\n\n1508\n01:18:04,315 --> 01:18:06,930\nWe need to make sure that\nthose things do match first.\n\n1509\n01:18:06,930 --> 01:18:07,520\n>> Yep.\n\n1510\n01:18:07,520 --> 01:18:11,440\nSo in our case our adjacencies\ndon't show up, we looked and\n\n1511\n01:18:11,440 --> 01:18:15,440\nit looked like the MTUs and stuff were the\nsame but we really didn't dive too deep.\n\n1512\n01:18:15,440 --> 01:18:17,480\n>> Nope.\n>> We looked at the configs and\n\n1513\n01:18:17,480 --> 01:18:19,610\nwe verified that the defaults match,\nright?\n\n1514\n01:18:19,610 --> 01:18:23,600\nSo how do we really know about other\nthings and whether they match or not.\n\n1515\n01:18:23,600 --> 01:18:27,520\nAnd this is where it's kind of up to us to\ngo and dig deeper and try and find out.\n\n1516\n01:18:27,520 --> 01:18:31,460\nNow if we know exactly what we're\nlooking for we can start to dive in and\n\n1517\n01:18:31,460 --> 01:18:33,760\nlook for those things, but\na lot of times we don't.\n\n1518\n01:18:33,760 --> 01:18:35,790\nAnd the debug commands\ncome in really handy.\n\n1519\n01:18:35,790 --> 01:18:39,500\nAnd we got a chance to see\nthat in the last segment.\n\n1520\n01:18:39,500 --> 01:18:42,915\nBut there's no reason we can't do it\nagain because it's such a powerful tool.\n\n1521\n01:18:42,915 --> 01:18:44,430\n>> Right.\n>> So, I'm gonna start here on router two.\n\n1522\n01:18:44,430 --> 01:18:46,710\nRemember we got a little triangle or\nwhatever, and\n\n1523\n01:18:46,710 --> 01:18:48,630\nrouter two is one of the branches?\n\n1524\n01:18:48,630 --> 01:18:52,250\nI could start on router one, but\nwhen I run debugs on router one,\n\n1525\n01:18:52,250 --> 01:18:55,070\nI'm gonna see activity for\nrouter two and three.\n\n1526\n01:18:55,070 --> 01:18:57,180\nLet me bring my diagram back up.\n\n1527\n01:18:57,180 --> 01:19:01,066\nSo if I run a debug up here, on router\none, I'm gonna see traffic from router two\n\n1528\n01:19:01,066 --> 01:19:03,840\nand three and\nit can get a little overwhelming.\n\n1529\n01:19:03,840 --> 01:19:08,060\nIf I do it from router two, I'm just\ngonna see traffic on this one link and\n\n1530\n01:19:08,060 --> 01:19:10,260\nthat'll be a little more easy to digest.\n\n1531\n01:19:10,260 --> 01:19:11,940\nRight?\nSo that's why I'm picking router two.\n\n1532\n01:19:13,050 --> 01:19:16,383\nAll right, so on router two I'm gonna do\n\n1533\n01:19:16,383 --> 01:19:21,680\na debug IP OSPF ADJ cuz I want\nto look at those adjacencies.\n\n1534\n01:19:21,680 --> 01:19:27,530\nAnd just to make sure I get a fresh start,\nright?\n\n1535\n01:19:27,530 --> 01:19:29,690\nI'll clear my OSPF process.\n\n1536\n01:19:31,580 --> 01:19:33,050\nAnd we'll see what happens here.\n\n1537\n01:19:33,050 --> 01:19:34,830\nSo here it's clearing out.\n\n1538\n01:19:34,830 --> 01:19:37,300\nAnd I'm router two, right?\n\n1539\n01:19:37,300 --> 01:19:41,543\nAnd so I see it bumping that out,\nand now interface is going up.\n\n1540\n01:19:41,543 --> 01:19:45,271\nAnd if we start to build an adjacency\nI should see a message here soon,\n\n1541\n01:19:45,271 --> 01:19:49,598\nalthough I'm not really seeing anything\nand it normally happens pretty fast.\n\n1542\n01:19:49,598 --> 01:19:55,640\nSo, we might not even be getting past that\nvery first step, that can a real problem.\n\n1543\n01:19:55,640 --> 01:20:00,790\nWell, one of the issues with the adjacency\ndebug like this is that, it's really\n\n1544\n01:20:00,790 --> 01:20:05,500\nexpecting you to be in the EXStart\nphase before it starts reporting to us.\n\n1545\n01:20:05,500 --> 01:20:09,010\nWhich means,\nwe've already contacted the other side.\n\n1546\n01:20:09,010 --> 01:20:11,744\nMaybe we're not even able\nto contact that other side.\n\n1547\n01:20:11,744 --> 01:20:17,330\nSo I'm gonna kick it up a notch and\nwe're gonna debug,\n\n1548\n01:20:17,330 --> 01:20:21,466\noops, I'm gonna debug ip ospf packet.\n\n1549\n01:20:21,466 --> 01:20:22,680\nOops, no s.\n\n1550\n01:20:22,680 --> 01:20:24,005\nI said it right and then typed it wrong.\n\n1551\n01:20:24,005 --> 01:20:26,960\n>> [LAUGH]\n>> This is gonna show me every single\n\n1552\n01:20:26,960 --> 01:20:30,480\npacket that we send and receive for OSPF.\n\n1553\n01:20:30,480 --> 01:20:33,300\nAnd again, I'm going to clear this out.\n\n1554\n01:20:33,300 --> 01:20:34,936\n>> Clear the process, yep.\n\n1555\n01:20:38,258 --> 01:20:41,210\n>> All right, and so\nthere it goes down, it comes up.\n\n1556\n01:20:41,210 --> 01:20:45,120\nAnd now, in the next ten seconds\nI should send out hello messages.\n\n1557\n01:20:45,120 --> 01:20:47,250\nAnd we should see those happen.\n\n1558\n01:20:47,250 --> 01:20:51,462\nIf nothing else, I should see hellos\ngo out other interfaces on my router.\n\n1559\n01:20:51,462 --> 01:20:54,941\nWhich actually I don't think I have\nanything set up other than the LoopBacks,\n\n1560\n01:20:54,941 --> 01:20:56,570\nso we might not see those.\n\n1561\n01:20:56,570 --> 01:20:59,634\nBut it is just kind of sitting here.\n\n1562\n01:20:59,634 --> 01:21:01,530\n>> Yeah.\n>> It's not very productive is it?\n\n1563\n01:21:01,530 --> 01:21:02,530\n>> Nope.\n\n1564\n01:21:02,530 --> 01:21:05,590\nSo either something's wrong\nwith this router, okay.\n\n1565\n01:21:05,590 --> 01:21:08,850\nIn the very fact that hey we're not\nsending out any OSPF packets and so\n\n1566\n01:21:08,850 --> 01:21:10,605\nwe may have to troubleshoot there.\n\n1567\n01:21:10,605 --> 01:21:13,000\nOr it could be that we've got\nother issues going on here.\n\n1568\n01:21:13,000 --> 01:21:16,340\nSo at this point,\nwithout anything from the adjacencies,\n\n1569\n01:21:16,340 --> 01:21:20,300\nwe need to spend more time in actually\nremembering, and now troubleshooting,\n\n1570\n01:21:20,300 --> 01:21:24,430\nwhat we have to have in place\nto build an adjacency up.\n\n1571\n01:21:24,430 --> 01:21:29,750\n>> Now in this scenario we've\nconfigured a frame relay network.\n\n1572\n01:21:29,750 --> 01:21:33,460\nAnd we did this on purpose\ncuz frame relay is weird.\n\n1573\n01:21:33,460 --> 01:21:37,060\nAnd if some you guys remember back to\nthe frame relay episodes that we did,\n\n1574\n01:21:37,060 --> 01:21:40,200\nwe mentioned in there some of\nthe odd characteristics about it.\n\n1575\n01:21:40,200 --> 01:21:43,120\nYou might remember for example, that\nwhen we were doing our frame relay map\n\n1576\n01:21:43,120 --> 01:21:46,240\nstatements, we would include\nthe broadcast keyword.\n\n1577\n01:21:46,240 --> 01:21:50,615\nAnd we did that because we said well,\nit's typically a non-broadcast network.\n\n1578\n01:21:50,615 --> 01:21:53,684\nIt doesn't allow you to send\nbroadcast over it and so\n\n1579\n01:21:53,684 --> 01:21:56,740\nyou have to find other\nways to deal with it.\n\n1580\n01:21:56,740 --> 01:22:00,350\nWell, your dynamic routing\nprotocols are kinda the same way.\n\n1581\n01:22:00,350 --> 01:22:04,260\nThey rely on multicasts,\nwhich are really a form of broadcast,\n\n1582\n01:22:04,260 --> 01:22:05,540\nto be able to communicate.\n\n1583\n01:22:05,540 --> 01:22:10,110\nAnd on a frame relay network, oftentimes\nthe multicasts are blocked also.\n\n1584\n01:22:10,110 --> 01:22:10,620\n>> Right.\n\n1585\n01:22:10,620 --> 01:22:13,640\n>> Well, the protocols have stuff built\ninto them to take care of that so\n\n1586\n01:22:13,640 --> 01:22:15,420\nwe don't normally have to worry about it.\n\n1587\n01:22:15,420 --> 01:22:19,355\nBut in some scenarios, like this one,\nthere can be issues that creep up and\n\n1588\n01:22:19,355 --> 01:22:20,678\nwe need to correct them.\n\n1589\n01:22:20,678 --> 01:22:24,690\nNow, I looked at the configurations on\nthe interfaces and they seemed fine.\n\n1590\n01:22:24,690 --> 01:22:28,520\nAnd we looked at the configuration of\nthe routing protocol and that seemed fine.\n\n1591\n01:22:28,520 --> 01:22:31,450\nBut at the end of the day,\nit is not fine, right.\n\n1592\n01:22:31,450 --> 01:22:34,140\nSo we need to compare our two sides,\nlike Ronnie said,\n\n1593\n01:22:34,140 --> 01:22:36,420\nto see where our difference is, all right.\n\n1594\n01:22:36,420 --> 01:22:39,660\nAnd the easiest way to do this is with\nanother command we saw earlier in\n\n1595\n01:22:39,660 --> 01:22:45,330\nthe show, show ip ospf interface.\n\n1596\n01:22:45,330 --> 01:22:50,650\nAnd I can take a look at that frame\nrelay interface on this router,\n\n1597\n01:22:50,650 --> 01:22:54,280\nand get its straight up OSPF information.\n\n1598\n01:22:54,280 --> 01:22:58,990\nWe can see things like the hello and\ndead timers, we can see the area number,\n\n1599\n01:22:58,990 --> 01:23:00,580\nwhich is right here.\n\n1600\n01:23:00,580 --> 01:23:03,370\nSo we can see all sorts of\ninformation about the link.\n\n1601\n01:23:03,370 --> 01:23:09,060\nAnd we can take this output and compare it\nto the other routers that are out there.\n\n1602\n01:23:09,060 --> 01:23:13,230\nSo I'm gonna compare it to Router 1 cuz\nI should be partnered up with Router 1.\n\n1603\n01:23:13,230 --> 01:23:15,512\nAnd so on Router 1 I'll do the same thing.\n\n1604\n01:23:18,895 --> 01:23:21,490\nAnd we're gonna take a look and\ncompare, all right.\n\n1605\n01:23:21,490 --> 01:23:24,248\nSo our area numbers,\narea numbers are the same, right?\n\n1606\n01:23:24,248 --> 01:23:28,770\nBoth Area 0, and as I start to look\ndown the list we can see other things.\n\n1607\n01:23:28,770 --> 01:23:31,900\nSome things that we don't necessarily\nworry about like router IDs and\n\n1608\n01:23:31,900 --> 01:23:32,930\nDesignated Router and stuff.\n\n1609\n01:23:32,930 --> 01:23:34,730\nWe're not too worried about those.\n\n1610\n01:23:34,730 --> 01:23:37,642\nBut then as I keep going down-\n>> Oh look there.\n\n1611\n01:23:37,642 --> 01:23:38,878\n>> I'm gonna notice a problem.\n\n1612\n01:23:38,878 --> 01:23:40,010\n>> Yep.\n>> Right?\n\n1613\n01:23:40,010 --> 01:23:46,630\nRight here on Router 1 my Hello and\nDead timers are 30 and 120, right.\n\n1614\n01:23:46,630 --> 01:23:51,400\nThe Dead timer's just being 4 times\nthe Hello, so 30 and 120, all right.\n\n1615\n01:23:51,400 --> 01:23:54,810\nThat's different than Router 2,\nwhere we had 10 and 40.\n\n1616\n01:23:54,810 --> 01:23:58,801\n>> And that's enough to make\nan adjacency not form, right?\n\n1617\n01:23:58,801 --> 01:24:01,269\nIf we don't have matching Hello and\nDead timers,\n\n1618\n01:24:01,269 --> 01:24:05,110\nthen we actually won't have anything\nthat will actually go in terms of OSPF.\n\n1619\n01:24:05,110 --> 01:24:10,431\nNow, it might be where we think\nwe figured out the problem, okay?\n\n1620\n01:24:10,431 --> 01:24:12,970\nAll we have to do then is figure out what?\n\n1621\n01:24:12,970 --> 01:24:15,922\nHow we actually change the timers,\nshould be fine.\n\n1622\n01:24:15,922 --> 01:24:20,283\n>> Yeah, now if this were a Ethernet\nconnection, if this were like a copper or\n\n1623\n01:24:20,283 --> 01:24:22,913\nfiber Ethernet,\nthen I would say all right,\n\n1624\n01:24:22,913 --> 01:24:27,503\nlet's just jump into the interface and\noverride those Hello timers, right?\n\n1625\n01:24:27,503 --> 01:24:31,058\nBut if you guys remember,\nwe did a show interface command, and\n\n1626\n01:24:31,058 --> 01:24:34,570\nthere was nothing in there\noverriding those timers, right?\n\n1627\n01:24:34,570 --> 01:24:36,360\nSo there's not anything for\nus to go and change.\n\n1628\n01:24:36,360 --> 01:24:38,320\n>> Yeah.\n>> How the heck did these guys get to be\n\n1629\n01:24:38,320 --> 01:24:42,470\ndifferent if there's no command\nin the config to set it?\n\n1630\n01:24:42,470 --> 01:24:44,810\n>> Yeah, so for us here in OSPF,\n\n1631\n01:24:44,810 --> 01:24:47,770\nwe also have to look at something\nelse that you see right here.\n\n1632\n01:24:47,770 --> 01:24:52,600\nWhich is gonna be right where Don is\nhighlighting, the Network Type for us.\n\n1633\n01:24:52,600 --> 01:24:55,210\nNotice that we show\na POINT_TO_POINT type here.\n\n1634\n01:24:55,210 --> 01:24:58,960\nAnd if you were lucky,\nas you actually saw it in the other one,\n\n1635\n01:24:58,960 --> 01:25:02,830\nwe actually saw where it\nsays a NON_BROADCAST type.\n\n1636\n01:25:02,830 --> 01:25:05,420\nSo one has actually been configured,\n\n1637\n01:25:05,420 --> 01:25:08,390\nthe other one has been left as\ndefault here is what we see.\n\n1638\n01:25:08,390 --> 01:25:11,180\n>> Well now,\nwe say that one's been configured,\n\n1639\n01:25:11,180 --> 01:25:13,560\nactually neither of them\nhave been configured.\n\n1640\n01:25:13,560 --> 01:25:15,580\n>> Yeah.\n>> It's actually just a variation,\n\n1641\n01:25:15,580 --> 01:25:17,080\nOSPF is pretty smart.\n\n1642\n01:25:17,080 --> 01:25:20,870\nIt looks at your interfaces and\nit changes, depending on what it is.\n\n1643\n01:25:20,870 --> 01:25:23,280\n>> Yep.\n>> If you have a point-to-point link,\n\n1644\n01:25:23,280 --> 01:25:27,160\nit's just you and one other person\non the other side and that's it.\n\n1645\n01:25:27,160 --> 01:25:29,622\nYou don't need a designated router,\nyou don't need a BDR or\n\n1646\n01:25:29,622 --> 01:25:31,463\nwhatever cuz it's just point-to-point.\n\n1647\n01:25:31,463 --> 01:25:36,085\nAnd on a point-to-point link,\nyou can use a really short timer because\n\n1648\n01:25:36,085 --> 01:25:39,830\nit's just one other person on\nthe other side, all right.\n\n1649\n01:25:39,830 --> 01:25:41,990\nBut on a multipoint interface,\n\n1650\n01:25:41,990 --> 01:25:44,488\nan interface where you've got\nseveral people that are out there,\n\n1651\n01:25:44,488 --> 01:25:47,950\nyou don't wanna do a short timer because\nyou'll generate a lot of traffic.\n\n1652\n01:25:47,950 --> 01:25:51,520\nSo they use a longer timer and\nthen that kind of solves it.\n\n1653\n01:25:51,520 --> 01:25:53,050\nAnd you do need a DR and a BDR and\n\n1654\n01:25:53,050 --> 01:25:55,690\nall that good stuff cuz\nthis is a multipoint link.\n\n1655\n01:25:55,690 --> 01:26:01,053\nWell, on Router 2,\nwhen I did a show interface,\n\n1656\n01:26:01,053 --> 01:26:04,274\noh I guess I didn't do it.\n\n1657\n01:26:04,274 --> 01:26:09,384\nAll right, so anyhow if I do a show\nrun interface serial 1/0.201.\n\n1658\n01:26:09,384 --> 01:26:13,080\nAll right,\nwhen I look at the config in frame relay,\n\n1659\n01:26:13,080 --> 01:26:16,930\nthat was designated as\na point-to-point interface.\n\n1660\n01:26:16,930 --> 01:26:22,260\nSo OSPF automatically detected that, and\nautomatically set the dead timer and\n\n1661\n01:26:22,260 --> 01:26:25,540\nhello interval to match what\na point-to-point interface would need.\n\n1662\n01:26:26,610 --> 01:26:29,260\nMeanwhile on Router 1,\n\n1663\n01:26:29,260 --> 01:26:34,954\nif we do a show run int s1/0.1,\n\n1664\n01:26:34,954 --> 01:26:39,460\nhere we defined it as a multipoint link,\nand again, OSPF\n\n1665\n01:26:39,460 --> 01:26:43,880\nautomatically detected that and configured\nitself to the needs of a multipoint link.\n\n1666\n01:26:43,880 --> 01:26:47,870\nThe problem, is these two routers\nconnect to each other, and they have\n\n1667\n01:26:47,870 --> 01:26:52,350\ndifferent configurations, and that's\nwhat's breaking our connection, all right.\n\n1668\n01:26:52,350 --> 01:26:56,790\nSo, we could override the hello and\ndead timers, but\n\n1669\n01:26:56,790 --> 01:26:58,680\nthat's not what actually\ncaused the problem.\n\n1670\n01:26:58,680 --> 01:27:01,670\nWhat actually caused the problem\nwas the network type.\n\n1671\n01:27:01,670 --> 01:27:05,741\nThe network type on Router 1 is NBMA,\nand the network type on Router 2 and\n\n1672\n01:27:05,741 --> 01:27:09,370\nRouter 3 is point-to-point,\nand that's breaking it for us.\n\n1673\n01:27:10,500 --> 01:27:13,460\nSo our solution is to change\nthat network type, all right.\n\n1674\n01:27:13,460 --> 01:27:17,051\nThere's a command that,\nit didn't show up in the OSPF show,\n\n1675\n01:27:17,051 --> 01:27:19,683\nbecause it's not really on the objectives.\n\n1676\n01:27:19,683 --> 01:27:21,618\nBut it's part of\nthe troubleshooting process so\n\n1677\n01:27:21,618 --> 01:27:23,670\nthis will be the first\ntime that we see it.\n\n1678\n01:27:23,670 --> 01:27:27,506\nWhere we can tell OSPF what\nkind of interface this is.\n\n1679\n01:27:27,506 --> 01:27:31,111\nAnd so even though it's a point-to-point\nlink on Router 2, I can tell it, hey,\n\n1680\n01:27:31,111 --> 01:27:32,120\nignore that.\n\n1681\n01:27:32,120 --> 01:27:34,930\nAnd instead behave like a NBMA, all right.\n\n1682\n01:27:34,930 --> 01:27:37,212\nAnd in fact,\nthat is exactly what I'm gonna do.\n\n1683\n01:27:37,212 --> 01:27:42,795\nOn Router 2 I'm gonna get into\ninterface serial 1/0.201.\n\n1684\n01:27:42,795 --> 01:27:49,033\nAnd I'm gonna say ip ospf 1,\nso I'm modifying process 1.\n\n1685\n01:27:49,033 --> 01:27:51,914\n>> Area 0.\n\n1686\n01:27:51,914 --> 01:27:54,140\nI don't think we need to\ndo the process ID, do we?\n\n1687\n01:27:54,140 --> 01:27:55,010\nNope.\n\n1688\n01:27:55,010 --> 01:27:55,920\nThere it is.\n\n1689\n01:27:55,920 --> 01:27:59,480\nSo we need IP OSPF network.\n\n1690\n01:27:59,480 --> 01:28:01,650\nAnd then there's where we can\nthrow in the network type, and\n\n1691\n01:28:01,650 --> 01:28:03,680\nwe'll see the four different choices.\n\n1692\n01:28:03,680 --> 01:28:08,200\nEach one tailored to a slightly different\nnetwork, each one with different hello and\n\n1693\n01:28:08,200 --> 01:28:10,320\ndead timers based on that type of network.\n\n1694\n01:28:10,320 --> 01:28:11,090\n>> Yeah.\n\n1695\n01:28:11,090 --> 01:28:15,530\nSo for us here we're in that OSPF\nit defaults to the NDMA right?\n\n1696\n01:28:15,530 --> 01:28:16,400\n>> It does.\n>> Yeah.\n\n1697\n01:28:16,400 --> 01:28:20,380\nAnd so for us here we've got to\nremember to mask that default and so\n\n1698\n01:28:20,380 --> 01:28:23,830\nusually do we wanna leave the default or\ndo we want to change it to the other one?\n\n1699\n01:28:23,830 --> 01:28:24,910\nIs there a preference?\n\n1700\n01:28:24,910 --> 01:28:26,890\n>> Well it depends.\n\n1701\n01:28:26,890 --> 01:28:31,080\nIt's the default cuz it's normally right,\nand so you normally wanna leave it be.\n\n1702\n01:28:31,080 --> 01:28:36,070\nBut on these point to point links,\nthe default is point-to-point.\n\n1703\n01:28:36,070 --> 01:28:39,850\nAnd here's where I need to\nadjust that to match up.\n\n1704\n01:28:39,850 --> 01:28:42,502\nYou override it if you absolutely have to.\n\n1705\n01:28:42,502 --> 01:28:44,570\nAll right.\nBut usually, the defaults are fine.\n\n1706\n01:28:44,570 --> 01:28:45,370\nThe connection comes up.\n\n1707\n01:28:45,370 --> 01:28:47,170\nYou don't have to manipulate it.\n\n1708\n01:28:47,170 --> 01:28:49,640\nSo I'm gonna go ahead and\nflag this one as non-broadcast.\n\n1709\n01:28:49,640 --> 01:28:54,900\nAnd that's gonna have the effect of\nchanging that hello and dead timer and\n\n1710\n01:28:54,900 --> 01:28:59,560\nwhen I do that it's gonna reset\nOSPF cuz it's a significant change.\n\n1711\n01:28:59,560 --> 01:29:02,390\nAnd I should see that connection\nwith the other office come up.\n\n1712\n01:29:02,390 --> 01:29:03,000\nAnd you know what?\n\n1713\n01:29:03,000 --> 01:29:06,580\nActually, we might still\nhave an issue on this one.\n\n1714\n01:29:06,580 --> 01:29:07,270\nLet's give it a second.\n\n1715\n01:29:07,270 --> 01:29:12,310\nSince it's non-broadcast It\nnow relying on Unicast and\n\n1716\n01:29:12,310 --> 01:29:14,730\nso we may need to go and\nstatically map our neighbors.\n\n1717\n01:29:14,730 --> 01:29:15,860\nThat's always a pain in the butt.\n\n1718\n01:29:15,860 --> 01:29:20,170\nBut again on frame relay, if you can't\nbroadcast out to find the other people,\n\n1719\n01:29:20,170 --> 01:29:21,890\nyou may have to statically define.\n\n1720\n01:29:21,890 --> 01:29:24,290\nYou'll map in those neighbors\nto be able to see them.\n\n1721\n01:29:24,290 --> 01:29:27,790\nThe fact that I haven't see\nan adjacency come up yet,\n\n1722\n01:29:27,790 --> 01:29:30,990\nlet's me know that that's more than likely\nsomething that I'm gonna need to do.\n\n1723\n01:29:30,990 --> 01:29:34,380\nAnd you know, statically mapping\na neighbor isn't the end of the world.\n\n1724\n01:29:34,380 --> 01:29:36,040\nIf you have to do it, you have to do it.\n\n1725\n01:29:36,040 --> 01:29:39,820\nAnd it is just another way to\nget around these kind of quirks.\n\n1726\n01:29:39,820 --> 01:29:46,940\nBut now that it's done, if I do a show\nIP OSPF interface serial 1/0.201.\n\n1727\n01:29:46,940 --> 01:29:49,550\nI can see the Hello and Dead timers do-\n>> Now match.\n\n1728\n01:29:49,550 --> 01:29:52,640\n>> Match the other side now,\nso that's good.\n\n1729\n01:29:52,640 --> 01:29:56,710\nBut we're still not\nconnecting to the other side.\n\n1730\n01:29:56,710 --> 01:29:58,350\nI'm gonna get into OSPF1.\n\n1731\n01:29:58,350 --> 01:30:03,350\nAnd in our OSPF settings, you'll see\nwe've got a neighbor command where you\n\n1732\n01:30:03,350 --> 01:30:05,560\ncan statically define your neighbor.\n\n1733\n01:30:05,560 --> 01:30:08,796\nReally useful if you're not\nallowed to do broadcasts.\n\n1734\n01:30:11,588 --> 01:30:15,390\nI don't think there is anything else\nthere that we have to specify there, no.\n\n1735\n01:30:15,390 --> 01:30:16,350\nSo I punched it in,\n\n1736\n01:30:16,350 --> 01:30:20,530\nand you'll see here that I've got\nan adjacency starting with that one.\n\n1737\n01:30:20,530 --> 01:30:23,270\nIf I don't map the side though,\nit's probably not going to come up, so\n\n1738\n01:30:23,270 --> 01:30:24,838\nlet me reach over and map the other side.\n\n1739\n01:30:43,713 --> 01:30:46,770\nWe've got it in a temp, but\nthat's not necessarily a good sign.\n\n1740\n01:30:46,770 --> 01:30:47,890\nWhat are we seeing over here?\n\n1741\n01:30:49,640 --> 01:30:51,950\nWhoop, a bunch of stuff just happened.\n\n1742\n01:30:51,950 --> 01:30:55,250\nSo it's electing, it's doing the election.\n\n1743\n01:30:55,250 --> 01:30:59,315\nAnd whoop, data's really flowing in now,\nso I'm getting overwhelmed.\n\n1744\n01:30:59,315 --> 01:30:59,831\n>> [LAUGH]\n>> But\n\n1745\n01:30:59,831 --> 01:31:03,296\nI see a lot of stuff\nwith router id 1.1.1.1.\n\n1746\n01:31:03,296 --> 01:31:05,940\nIt looks like we're starting\nto exchange some information.\n\n1747\n01:31:07,595 --> 01:31:09,505\nLet me just see what our status is.\n\n1748\n01:31:09,505 --> 01:31:12,335\nYeah, full, so\nwe've got a full adjacency now.\n\n1749\n01:31:12,335 --> 01:31:13,835\nWe're up and we're healthy.\n\n1750\n01:31:13,835 --> 01:31:16,135\nSo in the end we had two problems.\n\n1751\n01:31:16,135 --> 01:31:19,125\nProblem number one, the hello and\ndead timers didn't match.\n\n1752\n01:31:19,125 --> 01:31:24,365\nProblem number two, we're on a non\nbroadcast network so we had to statically\n\n1753\n01:31:24,365 --> 01:31:29,020\nmap our neighbors in order to see them,\nand that's what we're seeing right there.\n\n1754\n01:31:29,020 --> 01:31:32,390\nAnd let me just turn off the debug so\nwe don't get more of that, but,\n\n1755\n01:31:32,390 --> 01:31:34,410\nit's now up and it's healthy.\n\n1756\n01:31:34,410 --> 01:31:36,530\nWell, I say it's healthy.\n\n1757\n01:31:36,530 --> 01:31:39,890\nYou don't really know it's healthy until\nyou see some routes in your routing table.\n\n1758\n01:31:39,890 --> 01:31:42,140\nLet me see if we got any OSPF routes,\nand we did.\n\n1759\n01:31:42,140 --> 01:31:43,755\nYep, learned some OSPF routes, good.\n\n1760\n01:31:46,421 --> 01:31:49,890\nNow that fixed router 2, we still\nhave router 3 to deal with though.\n\n1761\n01:31:49,890 --> 01:31:53,170\nSo I'm gonna jump over and we're just\ngonna do the same thing over on router 3.\n\n1762\n01:31:53,170 --> 01:31:57,040\nNow, on the exam it's a good idea\nto verify that the same problem\n\n1763\n01:31:57,040 --> 01:31:58,738\ndoes indeed exist.\n\n1764\n01:31:58,738 --> 01:31:59,940\nYou don't wanna put a fix in and\n\n1765\n01:31:59,940 --> 01:32:02,920\nit turns out that they actually had\na different problem on this router.\n\n1766\n01:32:02,920 --> 01:32:06,889\nSo I'm just gonna do\na Show IP OSPF interface, and\n\n1767\n01:32:06,889 --> 01:32:12,370\njust verify that it is the same thing,\nand we do have a point to point,\n\n1768\n01:32:12,370 --> 01:32:16,546\nand we have the wrong timers,\nso we'll go fix that.\n\n1769\n01:32:24,838 --> 01:32:25,713\nWhoops.\n\n1770\n01:32:25,713 --> 01:32:27,460\nThere we go.\n\n1771\n01:32:27,460 --> 01:32:29,046\nAnd then.\n\n1772\n01:32:29,046 --> 01:32:30,463\n>> Change our neighbor statement.\n\n1773\n01:32:33,296 --> 01:32:35,535\n>> So I'll specify that neighbor for\nrouter 1.\n\n1774\n01:32:36,590 --> 01:32:42,690\nAnd on router 1, I'm gonna add Neighbor 3.\n\n1775\n01:32:42,690 --> 01:32:43,720\nAll right.\n\n1776\n01:32:43,720 --> 01:32:45,440\n>> And for us,\nwe just need to be a little bit patient,\n\n1777\n01:32:45,440 --> 01:32:47,940\nsince it's gotta actually do\nthat hello and dead timer thing,\n\n1778\n01:32:47,940 --> 01:32:51,220\nand it may take just a little bit of time\nbefore it actually comes up, but we did\n\n1779\n01:32:51,220 --> 01:32:55,620\nsee it successfully done on the router 2,\nand actually, you see that router 1.\n\n1780\n01:32:55,620 --> 01:32:56,660\n>> Yep.\nJust went from loading to full.\n\n1781\n01:32:56,660 --> 01:32:59,590\n>> Yeah, it didn't take any\ntime at all on this one.\n\n1782\n01:32:59,590 --> 01:33:04,595\n>> And on router 1 I can see that I've\nlearned about the networks on router 2 and\n\n1783\n01:33:04,595 --> 01:33:05,755\nthe networks on.\n\n1784\n01:33:05,755 --> 01:33:08,564\nOh, I haven't learned router 3 yet\nbut I'm kind of rushing it so\n\n1785\n01:33:08,564 --> 01:33:11,588\nlet me give it a second and\nwe'll learn the routes from router 3 also.\n\n1786\n01:33:14,171 --> 01:33:15,838\nEventually.\n\n1787\n01:33:15,838 --> 01:33:20,370\n[LAUGH] So we'll learn those and\nI'm just gonna double check.\n\n1788\n01:33:20,370 --> 01:33:20,990\nOver here.\n\n1789\n01:33:20,990 --> 01:33:23,180\nOh, sorry, I was already seeing some here.\n\n1790\n01:33:23,180 --> 01:33:25,770\nWe just need to wait and\neventually, that'll show up.\n\n1791\n01:33:27,060 --> 01:33:28,020\nI say we need to wait.\n\n1792\n01:33:28,020 --> 01:33:28,930\nI might need to double check.\n\n1793\n01:33:30,170 --> 01:33:31,260\nNo, it says it's loading.\n\n1794\n01:33:33,085 --> 01:33:36,475\nYeah, I get impatient sometimes,\nand we just have to wait.\n\n1795\n01:33:36,475 --> 01:33:38,085\nSo, we got, network three's there.\n\n1796\n01:33:38,085 --> 01:33:40,225\nWe still haven't learned\nanything on this end, so.\n\n1797\n01:33:42,795 --> 01:33:44,675\nI didn't fat finger the IP\non one of these, did I?\n\n1798\n01:33:44,675 --> 01:33:45,338\nLet's see.\n\n1799\n01:33:47,655 --> 01:33:50,547\nSo, we got a full DR here and here.\n\n1800\n01:33:57,088 --> 01:33:59,380\nWe got like a one way adjacency,\nthat's pretty weird.\n\n1801\n01:33:59,380 --> 01:34:01,150\n>> Yeah.\n>> So, oh, no,\n\n1802\n01:34:01,150 --> 01:34:02,320\nI'm on router 2, I'm on the wrong router.\n\n1803\n01:34:02,320 --> 01:34:03,921\nThat would explain that one.\n\n1804\n01:34:03,921 --> 01:34:11,296\n>> [LAUGH]\n>> Here we go, so.\n\n1805\n01:34:11,296 --> 01:34:14,046\n>> Looks good on that end.\n\n1806\n01:34:14,046 --> 01:34:15,296\n>> All right.\n\n1807\n01:34:20,463 --> 01:34:23,810\nThen I'm probably just being impatient,\nbut it's not getting anywhere else, is it?\n\n1808\n01:34:23,810 --> 01:34:24,540\n>> Nope.\n\n1809\n01:34:24,540 --> 01:34:27,190\n>> All right, so\nwe might have a different issue now, so\n\n1810\n01:34:27,190 --> 01:34:28,539\nwe can move through our issues.\n\n1811\n01:34:29,710 --> 01:34:34,420\nSo in this scenario router\n1 has an adjacency with\n\n1812\n01:34:34,420 --> 01:34:39,030\nrouters 2 and 3, but\nit's not getting routes from router three.\n\n1813\n01:34:39,030 --> 01:34:42,950\nSo our problem starts to expand and\ngrow a little more.\n\n1814\n01:34:42,950 --> 01:34:48,130\nSo if I do a show IP OSPF,\noh that's not what I wanted, neighbor.\n\n1815\n01:34:50,213 --> 01:34:51,150\nAll right.\n\n1816\n01:34:51,150 --> 01:34:54,620\nYou don't get a whole ton\nof detail on this screen.\n\n1817\n01:34:54,620 --> 01:34:57,670\nI can see that my connection to router 2.\n\n1818\n01:34:57,670 --> 01:35:02,120\nIs flagged as that guy is the DR and\n\n1819\n01:35:02,120 --> 01:35:06,925\nmy connection to router 3,\nI've got DROTHER, which means I'm the BDR.\n\n1820\n01:35:06,925 --> 01:35:07,940\nOkay.\n\n1821\n01:35:07,940 --> 01:35:09,570\nSo there's that.\n\n1822\n01:35:09,570 --> 01:35:16,690\nAnd then, if I take a look at router 2,\nit shows a BDR connection to router 1.\n\n1823\n01:35:16,690 --> 01:35:20,680\nThat means that router 2 thinks\nthat it's the DR, right.\n\n1824\n01:35:20,680 --> 01:35:24,160\nAnd I can verify that here,\nbecause I show router 2 as the DR.\n\n1825\n01:35:24,160 --> 01:35:24,940\nRight.\n\n1826\n01:35:24,940 --> 01:35:27,130\nBut take a look at Router 3.\n\n1827\n01:35:29,964 --> 01:35:30,920\nAll right.\n\n1828\n01:35:30,920 --> 01:35:33,964\nSee how it thinks that router\n1 is the DR for that link.\n\n1829\n01:35:33,964 --> 01:35:38,134\nWell, that link, it's still treating it\nas though it was a point to point and\n\n1830\n01:35:38,134 --> 01:35:39,172\nnot a multipoint.\n\n1831\n01:35:39,172 --> 01:35:42,808\nIt's not recognizing that\nRouter 2 is actually the DR.\n\n1832\n01:35:42,808 --> 01:35:47,197\nAnd my problem here is that Router 3,\ncan't see Router 2.\n\n1833\n01:35:47,197 --> 01:35:51,610\nIt's gotta go through Router 1 to get\nthere and that's creating a problem.\n\n1834\n01:35:51,610 --> 01:35:55,860\nThis is one of those scenarios\nwhere it's really handy to\n\n1835\n01:35:55,860 --> 01:35:58,387\nhard set who the designated router is.\n\n1836\n01:35:58,387 --> 01:36:02,830\nSince Router 1 is in the middle, I more\nthan likely want it to be the designated\n\n1837\n01:36:02,830 --> 01:36:05,780\nrouter because the other guys might\nnot be able to see each other.\n\n1838\n01:36:05,780 --> 01:36:10,928\nAnd in OSPF you can manipulate that by\nadjusting the priority of a router.\n\n1839\n01:36:10,928 --> 01:36:14,065\nWe don't normally have to do that,\nbut again, a frame relay,\n\n1840\n01:36:14,065 --> 01:36:18,245\na mesh network like this, it is one\nof the things that we can bump into.\n\n1841\n01:36:18,245 --> 01:36:25,275\nSo I'm gonna get into serial 1/0.1,\nand you'll notice when we do,\n\n1842\n01:36:25,275 --> 01:36:30,600\nip ospf ?, that there is a priority\nflag that we can designate.\n\n1843\n01:36:30,600 --> 01:36:34,586\nAnd that's where we can assign\nthe priority of this router,\n\n1844\n01:36:34,586 --> 01:36:37,881\nas far as whether it should be the DR or\nnot, okay?\n\n1845\n01:36:37,881 --> 01:36:43,158\nNow, if I do a show ip ospf, actually let\n\n1846\n01:36:43,158 --> 01:36:49,080\nme do it on the interface, int s1/0.1.\n\n1847\n01:36:49,080 --> 01:36:52,090\nWe can find our current priority in here,\nsomewhere.\n\n1848\n01:36:52,090 --> 01:36:52,860\n>> There it is.\n\n1849\n01:36:52,860 --> 01:36:54,450\nRight underneath the words Shutdown and\nno.\n\n1850\n01:36:54,450 --> 01:36:55,420\n>> Right there, yep.\n\n1851\n01:36:55,420 --> 01:36:58,626\nSo, currently our priority is 1,\nand that's just the default,\n\n1852\n01:36:58,626 --> 01:37:00,312\neverybody else's is gonna be 1.\n\n1853\n01:37:00,312 --> 01:37:09,190\nSo I'm gonna bump my priority up,\nTo 100, okay?\n\n1854\n01:37:09,190 --> 01:37:13,140\nAnd that's gonna cause a slight recalc.\n\n1855\n01:37:13,140 --> 01:37:18,120\nAnd the other guys aren't gonna be happy\nabout that, so I'm gonna get out of this.\n\n1856\n01:37:18,120 --> 01:37:23,030\nI'll do a clear ip ospf process,\nand we'll let it restart.\n\n1857\n01:37:23,030 --> 01:37:26,470\nSo that's gonna wipe my connection to the\nother guys and they're gonna rebuild up.\n\n1858\n01:37:26,470 --> 01:37:32,370\nMy priority is higher than them now, so\nI should be the DR and they should become\n\n1859\n01:37:32,370 --> 01:37:38,040\neither DROTHER, BDR, or whatever, and\nthat should solve our connectivity issues.\n\n1860\n01:37:38,040 --> 01:37:38,683\nWe'll see.\n\n1861\n01:37:44,940 --> 01:37:47,710\nAll right, so now Router 2 and\n3 are right there.\n\n1862\n01:37:47,710 --> 01:37:51,560\nI've got DROTHER for both of them,\nand I'm in a 2WAY state.\n\n1863\n01:37:51,560 --> 01:37:58,220\nSo, I'm gonna just make sure, you normally\ngo FULL if it's your connection to the DR.\n\n1864\n01:37:58,220 --> 01:38:02,640\nSo, I would expect these to be FULL, but\nthey are kinda stuck in 2WAY, aren't they?\n\n1865\n01:38:02,640 --> 01:38:06,983\nSo, that is interesting, let me see\nwhat we've got going on over here.\n\n1866\n01:38:10,875 --> 01:38:14,939\nIt shows FULL/BDR.\n\n1867\n01:38:14,939 --> 01:38:18,390\nHm, oh, did I mix up the priority?\n\n1868\n01:38:18,390 --> 01:38:22,950\nIt gets confusing because sometimes\nyou have it where the higher\n\n1869\n01:38:22,950 --> 01:38:26,510\npriority number is preferred, other times\nthe lower priority number is preferred.\n\n1870\n01:38:26,510 --> 01:38:28,935\nAnd so I may have actually gone\nthe wrong direction on this one.\n\n1871\n01:38:28,935 --> 01:38:31,555\nSo it's showing that's the BDR,\n\n1872\n01:38:31,555 --> 01:38:35,615\nthat Router 1 is the BDR, and\nRouter 3 is probably showing the same.\n\n1873\n01:38:36,795 --> 01:38:40,358\nSo I've actually achieved the opposite\nof what I wanted, I made it worse.\n\n1874\n01:38:40,358 --> 01:38:41,200\n>> Yeah, I would've done that.\n\n1875\n01:38:41,200 --> 01:38:44,978\n>> And, well,\nno cuz it's showing a DR over there.\n\n1876\n01:38:44,978 --> 01:38:45,697\n>> Yeah.\n\n1877\n01:38:49,018 --> 01:38:52,244\n>> But it's not getting routes.\n\n1878\n01:38:52,244 --> 01:38:53,989\nI might have to clear the process\non the other ones too.\n\n1879\n01:38:53,989 --> 01:38:56,765\n>> Yeah.\n\n1880\n01:38:56,765 --> 01:38:59,301\n>> And Router 2 is not,\nnow nobody is getting routes,\n\n1881\n01:38:59,301 --> 01:39:00,863\nwhich is exactly what I wanted.\n\n1882\n01:39:03,370 --> 01:39:07,410\nThere is another solution I was hoping I\nwouldn't have to do, but I might have to.\n\n1883\n01:39:08,620 --> 01:39:10,197\nYeah, we basically\nkilled it at this point.\n\n1884\n01:39:10,197 --> 01:39:15,587\nAll right, well, at this point we bumped\nour priority up, and we should be the DR,\n\n1885\n01:39:15,587 --> 01:39:20,827\nbut the other guys are not happy with each\nother, so we'll have to sort that out.\n\n1886\n01:39:20,827 --> 01:39:21,946\nSo we've got a different issue.\n\n1887\n01:39:21,946 --> 01:39:25,105\nAt least we're getting adjacencies now,\nso we've fixed the hello timer.\n\n1888\n01:39:25,105 --> 01:39:26,930\nOh, there, I'm being impatient.\n\n1889\n01:39:26,930 --> 01:39:27,430\n>> Yeah.\n\n1890\n01:39:29,530 --> 01:39:32,352\n>> There we go, so now I've got,\nwell, now I'm thinking that-\n\n1891\n01:39:32,352 --> 01:39:33,128\n>> [LAUGH]\n\n1892\n01:39:33,128 --> 01:39:33,860\n>> This is fun.\n\n1893\n01:39:33,860 --> 01:39:36,100\nThis is like the mystery DR.\n\n1894\n01:39:36,100 --> 01:39:36,941\nThere's probably too many changes.\n\n1895\n01:39:36,941 --> 01:39:41,336\nYou know, in a lab environment we'll\nconstantly make rapid changes like these\n\n1896\n01:39:41,336 --> 01:39:43,170\nand expect fast results.\n\n1897\n01:39:43,170 --> 01:39:46,460\nAnd in production land you\nwould take your time, and\n\n1898\n01:39:46,460 --> 01:39:48,620\nthese changes would occur over time.\n\n1899\n01:39:48,620 --> 01:39:51,480\nSo sometimes I get impatient and\njust don't wait.\n\n1900\n01:39:51,480 --> 01:39:55,970\nSo let's just check some of this\nout here and see where it ended up.\n\n1901\n01:39:55,970 --> 01:39:59,029\nSo, it's got a full adjacency,\nbut it's still not,\n\n1902\n01:40:01,977 --> 01:40:06,521\nI think I did all of these priorities\nwrong, but well, that is strange.\n\n1903\n01:40:06,521 --> 01:40:08,646\n>> Mm-hm.\n\n1904\n01:40:08,646 --> 01:40:10,979\n>> Let's see what routes we got.\n\n1905\n01:40:10,979 --> 01:40:13,649\nYeah, still not getting\nany routes on Router 3.\n\n1906\n01:40:13,649 --> 01:40:19,130\nAnd Router 2 is happy though,\nRouter 3 is not.\n\n1907\n01:40:20,410 --> 01:40:21,810\nAll right, well, you know what?\n\n1908\n01:40:21,810 --> 01:40:22,600\nLet's do this.\n\n1909\n01:40:22,600 --> 01:40:24,780\nIt is coming right up on\nthe break point here.\n\n1910\n01:40:24,780 --> 01:40:26,200\nSo, why don't we stop?\n\n1911\n01:40:26,200 --> 01:40:27,512\nI'll take a look at this and\n\n1912\n01:40:27,512 --> 01:40:30,376\nsee if I can't sort out what\nthe actual issue is on this one.\n\n1913\n01:40:30,376 --> 01:40:31,880\nIt should be good at this point.\n\n1914\n01:40:31,880 --> 01:40:34,560\nI probably need to just clear\nthe process on all three of them and\n\n1915\n01:40:34,560 --> 01:40:37,080\nlet them resync, and\nthen they'll be happy.\n\n1916\n01:40:37,080 --> 01:40:39,260\nSo we'll give that a shot\nmaybe after the break.\n\n1917\n01:40:39,260 --> 01:40:42,210\nSo, all right Ronnie, you got anything\nelse to add before we stop for break?\n\n1918\n01:40:42,210 --> 01:40:42,930\n>> Nope.\n\n1919\n01:40:42,930 --> 01:40:44,490\n>> All right, well ladies and\ngentlemen, let's stop here.\n\n1920\n01:40:44,490 --> 01:40:48,770\nWhen we get back we're gonna wrap up OSPF,\nand then we'll wrap up the episode.\n\n1921\n01:40:48,770 --> 01:40:51,540\nWe didn't get to EIGRP this time so\nwe'll have to do that the next episode.\n\n1922\n01:40:51,540 --> 01:40:55,220\nBut yeah, so we'll tackle this one, and\nthat'll pretty much wrap up our show.\n\n1923\n01:40:55,220 --> 01:40:58,465\nSo stay tuned, when we get back,\nthe exciting conclusion of OSPF.\n\n1924\n01:40:58,465 --> 01:41:07,307\n[SOUND].\n\n1925\n01:41:07,307 --> 01:41:09,630\nAll right, welcome back ladies and\ngentlemen.\n\n1926\n01:41:09,630 --> 01:41:12,190\nSo, I was attempting\nsomething during the break,\n\n1927\n01:41:12,190 --> 01:41:15,590\nwhen it all of the sudden donned on me\nwhat the issue was with these routers.\n\n1928\n01:41:15,590 --> 01:41:16,960\nAnd that happens sometimes.\n\n1929\n01:41:16,960 --> 01:41:18,560\nIt's kind of an unfair example.\n\n1930\n01:41:18,560 --> 01:41:21,195\nSo, the first couple of things we did are-\n>> Perfect?\n\n1931\n01:41:21,195 --> 01:41:22,625\n[LAUGH]\n>> Are very, very realistic,\n\n1932\n01:41:22,625 --> 01:41:25,170\nthings that we can deal\nwith this ourselves.\n\n1933\n01:41:25,170 --> 01:41:28,834\nBut occasionally there is a problem where\nthe only recourse is to call the Internet\n\n1934\n01:41:28,834 --> 01:41:31,290\nservice provider and say,\nwhat the heck's going on?\n\n1935\n01:41:31,290 --> 01:41:33,060\nAnd that's what we got going on here.\n\n1936\n01:41:33,060 --> 01:41:35,380\nSo, one of the things I tried\nduring the break though,\n\n1937\n01:41:35,380 --> 01:41:37,950\nI want to show you guys cuz it's\na neat troubleshooting tool.\n\n1938\n01:41:37,950 --> 01:41:42,578\nRemember, I increased\nthe priority of Router 1.\n\n1939\n01:41:42,578 --> 01:41:45,270\nI bumped its OSPF priority\nto make sure that it\n\n1940\n01:41:45,270 --> 01:41:48,510\nwould be the designated router cuz\nit was in the middle, all right?\n\n1941\n01:41:48,510 --> 01:41:50,579\nI did that by raising its priority to 100.\n\n1942\n01:41:50,579 --> 01:41:57,962\nAnd the priority number,\nif I do a, let's see, There we go.\n\n1943\n01:41:57,962 --> 01:42:01,190\nYou'll see right here where\nI did ip ospf priority 100.\n\n1944\n01:42:01,190 --> 01:42:03,970\nThe priority number,\nit's between 0 and 255.\n\n1945\n01:42:03,970 --> 01:42:10,770\nIf you're 255,\nyou will be the DR or else, right?\n\n1946\n01:42:10,770 --> 01:42:15,260\nIf it's 0,\nyou will never be a DR or a BDR,\n\n1947\n01:42:15,260 --> 01:42:18,670\nno matter what, even if you're the only\none, you will never be the DR.\n\n1948\n01:42:18,670 --> 01:42:19,750\n>> Right.\n>> Okay.\n\n1949\n01:42:19,750 --> 01:42:23,438\nSo, that was the first thing I tried\nduring the break is I took Router 2 and\n\n1950\n01:42:23,438 --> 01:42:25,950\nRouter 3, and\nI set their priority to 0, okay?\n\n1951\n01:42:27,020 --> 01:42:30,140\nAnd after doing that,\nI was still having some quirkiness,\n\n1952\n01:42:30,140 --> 01:42:31,530\nand I knew things were weird then.\n\n1953\n01:42:31,530 --> 01:42:33,550\nBecause if you manually set it like that,\n\n1954\n01:42:33,550 --> 01:42:35,550\nthere's really no reason\nit shouldn't work.\n\n1955\n01:42:35,550 --> 01:42:37,880\nAnd so, that's when it occurred to me.\n\n1956\n01:42:37,880 --> 01:42:41,080\nThere are multiple frame relay\nswitches out there in the world.\n\n1957\n01:42:41,080 --> 01:42:43,652\nAnd when you buy a frame relay connection,\nor lease it,\n\n1958\n01:42:43,652 --> 01:42:46,407\nor whatever, you have no idea\nwhat switch there gonna run.\n\n1959\n01:42:46,407 --> 01:42:50,060\nAnd so you gotta ask a service provider\nand they tell you some various details.\n\n1960\n01:42:50,060 --> 01:42:53,260\nWell, in my case,\nI picked up my virtual phone and\n\n1961\n01:42:53,260 --> 01:42:56,060\nI called my virtual ISP,\nwhich is kinda me.\n\n1962\n01:42:56,060 --> 01:42:58,300\nAnd I said,\nwhat the heck's going on here guys?\n\n1963\n01:42:58,300 --> 01:42:59,980\nI can't build an OSPF adjacency.\n\n1964\n01:42:59,980 --> 01:43:01,570\nWhat's wrong with your system?\n\n1965\n01:43:01,570 --> 01:43:05,660\nAnd I said,\nI've got my system in non-broadcast mode.\n\n1966\n01:43:05,660 --> 01:43:06,640\nEverything matches up,\n\n1967\n01:43:06,640 --> 01:43:10,140\nwe should be sending out our\nmulticasting communicating.\n\n1968\n01:43:10,140 --> 01:43:15,130\nAnd the ISP, me, said oh,\nyou're trying to send multicast.\n\n1969\n01:43:15,130 --> 01:43:16,180\nYeah, we don't allow that.\n\n1970\n01:43:16,180 --> 01:43:20,650\nWe only allow unicast on\nour frame relay circuits.\n\n1971\n01:43:20,650 --> 01:43:26,080\nWell, it's kind of a funny thing because,\nwhen you set it to non-broadcast,\n\n1972\n01:43:26,080 --> 01:43:29,150\nyou'd think hey, it's not gonna broadcast,\nit's going to unicast.\n\n1973\n01:43:29,150 --> 01:43:33,181\nBut that doesn't include multicast, so\nOSPF is still trying to use multicast, and\n\n1974\n01:43:33,181 --> 01:43:34,673\nthat's where our problem is.\n\n1975\n01:43:34,673 --> 01:43:39,667\nWhen that happens, we have to rely on\nthe built-in functions of the router\n\n1976\n01:43:39,667 --> 01:43:42,220\nto convert our broadcast to unicast.\n\n1977\n01:43:42,220 --> 01:43:43,212\nAnd it does that.\n\n1978\n01:43:43,212 --> 01:43:47,973\nIt does that very well if you've got your\nframe-relay maps in place and things like\n\n1979\n01:43:47,973 --> 01:43:52,053\nthat and you can see right here where\nI've got these maps on router 1 and\n\n1980\n01:43:52,053 --> 01:43:54,977\nthis broadcast flag right\nhere is what's saying,\n\n1981\n01:43:54,977 --> 01:43:59,560\nhey if I get a broadcast convert\nit to a unicast and send it along.\n\n1982\n01:43:59,560 --> 01:44:02,810\nSo when we assigned ospf to be\n\n1983\n01:44:02,810 --> 01:44:07,940\nnon broadcast mode that made\nthis tag no longer work.\n\n1984\n01:44:07,940 --> 01:44:11,080\nAnd our multicast, we're still going\nout and not getting converted and\n\n1985\n01:44:11,080 --> 01:44:12,470\ngetting lost by the service provider.\n\n1986\n01:44:12,470 --> 01:44:14,070\nSo that's our issue.\n\n1987\n01:44:14,070 --> 01:44:17,500\nSo the solution is instead of\ngoing in a non-broadcast mode,\n\n1988\n01:44:17,500 --> 01:44:19,350\nyou go into broadcast mode.\n\n1989\n01:44:19,350 --> 01:44:21,330\nAnd your ISP could tell you to do that.\n\n1990\n01:44:21,330 --> 01:44:23,160\nThey know exactly what's going on.\n\n1991\n01:44:23,160 --> 01:44:25,580\nAnd so I just need to change that.\n\n1992\n01:44:25,580 --> 01:44:29,520\nSo I'm gonna switch my\nnetwork type to broadcast.\n\n1993\n01:44:29,520 --> 01:44:32,265\nAll right, and so\nthat's gonna flip that one over and\n\n1994\n01:44:32,265 --> 01:44:34,159\nI'll do the same thing on router 2.\n\n1995\n01:44:36,282 --> 01:44:37,989\nAnd, router 3.\n\n1996\n01:44:41,646 --> 01:44:42,940\nSo, that they're all.\nThey're all set the same.\n\n1997\n01:44:42,940 --> 01:44:44,760\nRemember I want them to\nall be set the same.\n\n1998\n01:44:44,760 --> 01:44:48,650\nEven though two and three are point to\npoint links, I want them to be set to\n\n1999\n01:44:48,650 --> 01:44:53,140\nbroadcast because that's going to make\ntheir hello and dead timers the same.\n\n2000\n01:44:53,140 --> 01:44:56,090\nIf I picked something different,\nthen we may have some problems there.\n\n2001\n01:44:56,090 --> 01:45:00,190\nSo I'm gonna see all my connections drop,\nwhich I'm cool with, and I'll wait for\n\n2002\n01:45:00,190 --> 01:45:02,800\na minute while they get healthy again.\n\n2003\n01:45:02,800 --> 01:45:05,397\nAnd this should be the last\nthing to bring us up healthy.\n\n2004\n01:45:10,903 --> 01:45:13,140\nOh, and I see some stuff going on here.\n\n2005\n01:45:13,140 --> 01:45:14,790\nI'm just gonna wait, I'm not gonna,\n\n2006\n01:45:14,790 --> 01:45:18,020\nthe temptation is there to\nclear that process or whatever.\n\n2007\n01:45:18,020 --> 01:45:19,970\nI'm just going to sit tight for a second.\n\n2008\n01:45:19,970 --> 01:45:23,690\nYou'll see all the debug output\nhere as it sorts itself through.\n\n2009\n01:45:23,690 --> 01:45:28,370\nI can see, here's negotiations that are\ngoing on for non-broadcast connections.\n\n2010\n01:45:28,370 --> 01:45:31,850\nYou'll see it's electing a DR and a BDR.\n\n2011\n01:45:31,850 --> 01:45:36,660\nNotice how the DR right now is\nrouter 1 and the BDR is nobody.\n\n2012\n01:45:36,660 --> 01:45:37,560\n>> Nobody.\n>> The other sides\n\n2013\n01:45:37,560 --> 01:45:40,290\nare not becoming a BDR because\nI set their priorities to zero.\n\n2014\n01:45:41,800 --> 01:45:43,670\nAnd I think we're in business.\n\n2015\n01:45:43,670 --> 01:45:45,310\n>> I think you're done.\n\n2016\n01:45:45,310 --> 01:45:46,120\nYeah.\n>> Alright.\n\n2017\n01:45:46,120 --> 01:45:50,510\nSo I've got full adjacencies with\nrouter 2 and router 3 at this point.\n\n2018\n01:45:50,510 --> 01:45:55,600\nAnd if I look on router 2,\nI've got a full adjacency with router 1.\n\n2019\n01:45:55,600 --> 01:46:01,600\n>> Yep.\n>> And on router 3, a full adjacency.\n\n2020\n01:46:01,600 --> 01:46:04,070\nAnd let's check the routing table.\n\n2021\n01:46:04,070 --> 01:46:07,630\nAnd so I've got routes for\nthe one, two, and three networks.\n\n2022\n01:46:07,630 --> 01:46:08,920\nSo those are showing up.\n\n2023\n01:46:08,920 --> 01:46:11,590\nAnd if I jump over to router 1,\nthe same thing.\n\n2024\n01:46:11,590 --> 01:46:14,950\nRight?\nSo, yep.\n\n2025\n01:46:14,950 --> 01:46:15,940\nOne, two, and three.\n\n2026\n01:46:15,940 --> 01:46:16,830\nThey're all there.\n\n2027\n01:46:16,830 --> 01:46:19,680\nNow we have a nice,\nhappy OSPF environment.\n\n2028\n01:46:19,680 --> 01:46:20,720\nIt was a lotta work.\n\n2029\n01:46:20,720 --> 01:46:21,570\nRight?\n>> Yeah.\n\n2030\n01:46:21,570 --> 01:46:25,140\nSo let's kind of recap some\nof the things we had to do.\n\n2031\n01:46:25,140 --> 01:46:28,830\nFirst off, we were getting no adjacency\nwhatsoever because our hello and\n\n2032\n01:46:28,830 --> 01:46:30,610\ndead timers were wrong.\n\n2033\n01:46:30,610 --> 01:46:33,870\nAnd so we had to set a network type.\n\n2034\n01:46:33,870 --> 01:46:37,310\nAnd we did that with the IP OSPF network,\nand\n\n2035\n01:46:37,310 --> 01:46:40,120\nyou'll see the four different\nmodes that are right here.\n\n2036\n01:46:40,120 --> 01:46:43,680\nSo if I want to add these to our,\ndon't I have notes for this episode?\n\n2037\n01:46:45,220 --> 01:46:46,486\nThought I had notes at some point.\n\n2038\n01:46:49,103 --> 01:46:50,688\nLet me get back into our notes.\n\n2039\n01:46:54,274 --> 01:46:55,600\nWhere did I park those notes?\n\n2040\n01:46:55,600 --> 01:46:56,145\nThere we go.\n\n2041\n01:46:59,233 --> 01:47:00,650\nTroubleshooting.\n\n2042\n01:47:00,650 --> 01:47:01,860\n>> There we go.\n\n2043\n01:47:01,860 --> 01:47:05,320\nI can post these with the episodes,\nthat's why I wanna have them.\n\n2044\n01:47:05,320 --> 01:47:13,160\nSo, basically we say, IP OSPF network,\n\n2045\n01:47:13,160 --> 01:47:17,960\nand then whatever our network type\nis that we're trying to create.\n\n2046\n01:47:17,960 --> 01:47:25,290\nSo definitely important based on\nthe type of network we're dealing with.\n\n2047\n01:47:25,290 --> 01:47:28,530\nThen I did IP OSPF 100.\n\n2048\n01:47:28,530 --> 01:47:32,440\nIncreased chance of being the DR.\n\n2049\n01:47:34,700 --> 01:47:37,380\nAnd I used IP OSPF priority.\n\n2050\n01:47:40,810 --> 01:47:46,440\nZero never become the DR or BDR.\n\n2051\n01:47:46,440 --> 01:47:49,050\nSo I use those to manually set that.\n\n2052\n01:47:49,050 --> 01:47:51,400\nSo those were a couple of\nthe things that I set and\n\n2053\n01:47:51,400 --> 01:47:54,880\nthen I also use some of the various\ndebugs to be able to spot the problem but\n\n2054\n01:47:54,880 --> 01:47:59,860\nby the end of the day we're now up\nwe've got the right network type set.\n\n2055\n01:47:59,860 --> 01:48:02,610\nWe've got our priorities set,\nwe've got our central BR and\n\n2056\n01:48:02,610 --> 01:48:04,420\nwe're now exchanging routes and happy.\n\n2057\n01:48:04,420 --> 01:48:06,720\nIt's a lot of work to go through, and\n\n2058\n01:48:06,720 --> 01:48:09,930\nall of that work stems from\nquirks with frame-relay.\n\n2059\n01:48:09,930 --> 01:48:11,800\nWe wouldn't have had these\nproblems on an Ethernet network,\n\n2060\n01:48:11,800 --> 01:48:12,670\nit would have just worked.\n\n2061\n01:48:12,670 --> 01:48:14,932\nAnd we'd of been done, and that's kind\nof the nice thing about Ethernet.\n\n2062\n01:48:14,932 --> 01:48:19,510\nAll right, so just be aware of\nyour troubleshooting frame re or\n\n2063\n01:48:19,510 --> 01:48:20,912\ntroubleshooting of, OSPF.\n\n2064\n01:48:20,912 --> 01:48:23,830\n>> [LAUGH]\n>> If it's running on top of frame relay,\n\n2065\n01:48:23,830 --> 01:48:24,930\nit's a whole new world.\n\n2066\n01:48:24,930 --> 01:48:28,972\nThere's a lot of different things\nthat we have to worry about.\n\n2067\n01:48:28,972 --> 01:48:32,260\nAll right,\nwell as far as our OSPF objective,\n\n2068\n01:48:32,260 --> 01:48:33,722\nlet me just pull this up here real quick.\n\n2069\n01:48:33,722 --> 01:48:37,660\nSo, we talk about hello and\ndead timers, adjacencies, MTUs,\n\n2070\n01:48:37,660 --> 01:48:42,290\nnetwork types areas,\nreally talk about everything.\n\n2071\n01:48:42,290 --> 01:48:45,080\nThe only thing on here that we really\ndidn't talk about is the OSPF topology\n\n2072\n01:48:45,080 --> 01:48:45,830\ndatabase.\n\n2073\n01:48:45,830 --> 01:48:48,300\nAnd I'll tell you to me\n\n2074\n01:48:48,300 --> 01:48:53,040\nthe database is not the most\nuseful of troubleshooting tools.\n\n2075\n01:48:53,040 --> 01:48:54,340\nLet me show you what I mean.\n\n2076\n01:48:54,340 --> 01:49:01,270\nIf I take a router like router 2 and\nI do a show IP OSPF database.\n\n2077\n01:49:02,670 --> 01:49:05,680\nAlright here's the OSPF database and\n\n2078\n01:49:05,680 --> 01:49:09,680\nthe information contained in it is,\nit can be useful.\n\n2079\n01:49:09,680 --> 01:49:13,350\nIt's showing me the routers that\nI know about that are out there.\n\n2080\n01:49:13,350 --> 01:49:18,040\nSo router one two three and four and those\nare my router link states for area zero.\n\n2081\n01:49:18,040 --> 01:49:20,320\nSo I know about four\nrouters that are out there.\n\n2082\n01:49:20,320 --> 01:49:23,130\nI've heard for most of them recently,\nbut not this one.\n\n2083\n01:49:23,130 --> 01:49:26,420\nI think I shut that interface\noff to minimize my debug output.\n\n2084\n01:49:26,420 --> 01:49:26,995\nLet me check.\n\n2085\n01:49:26,995 --> 01:49:31,773\nYeah, let me\n\n2086\n01:49:31,773 --> 01:49:37,090\nbring this one back up.\n\n2087\n01:49:37,090 --> 01:49:40,750\nWhen I was troubleshooting,\nrouter 4 was generating some output, and\n\n2088\n01:49:40,750 --> 01:49:45,790\nso I just kinda shut that\ninterface off to minimize it.\n\n2089\n01:49:45,790 --> 01:49:47,680\nSo now if I take a look at this, I should.\n\n2090\n01:49:49,680 --> 01:49:52,640\nWell, I'll hear from this guy soon and\nthen that number will drop down.\n\n2091\n01:49:52,640 --> 01:49:54,210\n>> Yeah, once the time drops.\n\n2092\n01:49:54,210 --> 01:49:55,640\n>> So\nthese are the routers that I can see.\n\n2093\n01:49:55,640 --> 01:50:00,480\nSo that can be useful because I\nshould see every router in my area.\n\n2094\n01:50:00,480 --> 01:50:03,700\nRouter 2 does not have a direct\nconnection to router 4.\n\n2095\n01:50:03,700 --> 01:50:10,650\nIn fact, if I go back to my diagram router\n4 is, whoops that's not what I wanted.\n\n2096\n01:50:10,650 --> 01:50:14,273\nRouter 4 is kind of sitting\nover here on the sidelines.\n\n2097\n01:50:17,767 --> 01:50:25,529\nAnd, it is connected via Ethernet\nconnection that runs between.\n\n2098\n01:50:29,643 --> 01:50:30,850\nThat runs like that.\n\n2099\n01:50:30,850 --> 01:50:32,920\nSo it's connected directly into router 1.\n\n2100\n01:50:32,920 --> 01:50:34,540\nRouter 2 is not directly plugged into it.\n\n2101\n01:50:34,540 --> 01:50:38,150\nIf this were EIGRP,\nrouter 2 wouldn't see router 4 at all.\n\n2102\n01:50:38,150 --> 01:50:39,170\nBut in OSPF it can.\n\n2103\n01:50:39,170 --> 01:50:42,120\nIt should show all of\nthe routers in your area.\n\n2104\n01:50:42,120 --> 01:50:43,120\nAnd so that's what I'm seeing.\n\n2105\n01:50:43,120 --> 01:50:44,030\nRouters 1 through 4.\n\n2106\n01:50:44,030 --> 01:50:45,890\nLet's see if this picked up already.\n\n2107\n01:50:45,890 --> 01:50:47,790\nThere you go, nice low age.\n\n2108\n01:50:47,790 --> 01:50:50,140\nSo, I've seen it in the last minute and\ntwo seconds.\n\n2109\n01:50:50,140 --> 01:50:54,920\nAll right, so it shows the routers that we\nsee and then we can see our link states.\n\n2110\n01:50:54,920 --> 01:50:57,550\nThese are the networks that\nwe're learning about via OSPF,\n\n2111\n01:50:57,550 --> 01:50:59,940\nthat we didn't already know about.\n\n2112\n01:50:59,940 --> 01:51:03,600\nI'm learning links from router 1, but\nI've already got those locally so\n\n2113\n01:51:03,600 --> 01:51:05,240\nit's not like it's anything new to me.\n\n2114\n01:51:05,240 --> 01:51:08,770\nBut this link here 4.4.4.4,\n\n2115\n01:51:08,770 --> 01:51:12,040\nI'm pulling that from router 4,\nso that's what's coding in.\n\n2116\n01:51:12,040 --> 01:51:17,180\nAnd I should show 3.3.3.3,\neventually it's currently not in here.\n\n2117\n01:51:17,180 --> 01:51:21,470\nBut again this information what\ndoes it help us do to troubleshoot.\n\n2118\n01:51:21,470 --> 01:51:24,700\nNot too much that we\ncouldn't have already seen\n\n2119\n01:51:24,700 --> 01:51:29,700\nin the show IP OSPF output or\nshow IP protocols,\n\n2120\n01:51:29,700 --> 01:51:34,680\nbecause in show IP protocols I also\nsee routers that I'm talking to there.\n\n2121\n01:51:34,680 --> 01:51:36,845\nSo, again, not anything too stellar, but\n\n2122\n01:51:36,845 --> 01:51:39,136\nthe database is a place\nthat you can go to look.\n\n2123\n01:51:39,136 --> 01:51:45,058\nThe database can be useful in scenarios\nwhere you've got multiple OSPF areas.\n\n2124\n01:51:45,058 --> 01:51:48,710\nBecause, what does this really map\nto when you do a show IP, oops,\n\n2125\n01:51:48,710 --> 01:51:53,360\nshow IP OSPF Database is you've basically\ngot different LSAs that you're seeing.\n\n2126\n01:51:53,360 --> 01:51:56,920\nThis is Link State Announcement LSA\none and LSA two.\n\n2127\n01:51:56,920 --> 01:52:01,320\nIf I had more than one area, I would have\nLSA three for my summary routes, and\n\n2128\n01:52:01,320 --> 01:52:05,680\nmaybe even LSA fives for my external\nroutes and so they would show up here in\n\n2129\n01:52:05,680 --> 01:52:10,500\nthe database too, and\nit kind of categorizes them by LSA type.\n\n2130\n01:52:10,500 --> 01:52:12,670\nAlright so that's some of\nthe information that we can see.\n\n2131\n01:52:12,670 --> 01:52:14,950\nThat's really the only thing on\nthe objectives that we hadn't hit.\n\n2132\n01:52:14,950 --> 01:52:16,570\nLet me get back to the objectives.\n\n2133\n01:52:16,570 --> 01:52:18,750\nSo can you think of anything\nwe've left off Ronnie?\n\n2134\n01:52:18,750 --> 01:52:21,310\n>> No.\nJust a reminder that when we did cover the\n\n2135\n01:52:21,310 --> 01:52:25,980\nOSPF show, we actually went in depth even\nmore than this about some of the little\n\n2136\n01:52:25,980 --> 01:52:31,020\ndetails that you have to pay attention\nto as you, you know then configure this.\n\n2137\n01:52:31,020 --> 01:52:34,280\nSo the things again that you wanna\nmake sure that you go back and\n\n2138\n01:52:34,280 --> 01:52:38,250\ndo is watch that show again,\nif you're unfamiliar.\n\n2139\n01:52:38,250 --> 01:52:43,460\nRemember that you only see like the DR and\nthe BDR in the actual.\n\n2140\n01:52:43,460 --> 01:52:44,360\n>> Multipoint networks.\n\n2141\n01:52:44,360 --> 01:52:45,980\n>> Yeah multipoint networks.\n\n2142\n01:52:45,980 --> 01:52:49,680\nPoint to point you won't see a DR and\na BDR.\n\n2143\n01:52:49,680 --> 01:52:53,670\nYou know those are things that we did\nmention but we didn't actually put them in\n\n2144\n01:52:53,670 --> 01:52:55,790\nthe show, so go back and\nmake sure you watch that show.\n\n2145\n01:52:57,330 --> 01:52:59,845\n>> All right, so we still have\na lot more troubleshooting to do.\n\n2146\n01:52:59,845 --> 01:53:01,130\n>> Oh yeah.\n>> We got EIGRP.\n\n2147\n01:53:01,130 --> 01:53:02,440\nWe didn't even touch NetFlow.\n\n2148\n01:53:02,440 --> 01:53:04,050\nWe skipped over that one, so\nwe go that one to tackle.\n\n2149\n01:53:04,050 --> 01:53:04,720\n>> And switching.\n\n2150\n01:53:04,720 --> 01:53:06,240\n>> And then all of the switching, right?\n\n2151\n01:53:06,240 --> 01:53:08,130\nSo definitely stay tuned.\n\n2152\n01:53:08,130 --> 01:53:12,140\nAnd in fact, if you're watching this live,\ntomorrow we'll kick back up with those and\n\n2153\n01:53:12,140 --> 01:53:13,170\nhopefully move through them.\n\n2154\n01:53:13,170 --> 01:53:15,520\nSo we're getting close\nto being done there.\n\n2155\n01:53:15,520 --> 01:53:18,962\nBut if you're watching this recorded then\nit's just the next link after this one.\n\n2156\n01:53:18,962 --> 01:53:19,661\n>> Right.\n>> [LAUGH] So\n\n2157\n01:53:19,661 --> 01:53:21,790\nit's like no time passed at all.\n\n2158\n01:53:21,790 --> 01:53:23,820\nBut yeah.\nSo that's pretty much it for our show.\n\n2159\n01:53:23,820 --> 01:53:25,470\nWe hope you guys enjoyed it.\n\n2160\n01:53:25,470 --> 01:53:28,980\nAs always, if you have any\nquestions live during the show,\n\n2161\n01:53:28,980 --> 01:53:31,510\nyou can go to itpro.tv/live.\n\n2162\n01:53:31,510 --> 01:53:33,850\nThe chat box is right\nbeneath the live video.\n\n2163\n01:53:33,850 --> 01:53:37,540\nYou can post your questions, we answer\nthem and monitor during the show.\n\n2164\n01:53:37,540 --> 01:53:39,680\nIf you have questions after the show,\n\n2165\n01:53:39,680 --> 01:53:43,290\nat the top of every itpro.tv\npage there is a Q and\n\n2166\n01:53:43,290 --> 01:53:46,930\nA link, you can click on that, post your\nquestions, we monitor and answer it.\n\n2167\n01:53:46,930 --> 01:53:49,020\nIt's a great way to get help and\n\n2168\n01:53:49,020 --> 01:53:52,100\nassistance on any topic we\nweren't clear enough on.\n\n2169\n01:53:52,100 --> 01:53:55,428\nAnd it also helps us, because if we see\na lot of questions on one area we'll do\n\n2170\n01:53:55,428 --> 01:53:56,626\na show about it, you know.\n\n2171\n01:53:56,626 --> 01:54:00,010\nFind that answer and make sure that\nyou guys get the best help possible.\n\n2172\n01:54:00,010 --> 01:54:01,700\nSo, remember that we are here for you.\n\n2173\n01:54:03,030 --> 01:54:05,950\nAlright well signing off for\nITProTV, I'm Don Pezet.\n\n2174\n01:54:05,950 --> 01:54:06,680\n>> I'm Ronnie Wong.\n\n2175\n01:54:06,680 --> 01:54:08,629\n>> And we'll see you next time.\n\n2176\n01:54:08,629 --> 01:54:18,629\n[MUSIC]\n\n2177\n01:54:20,400 --> 01:54:20,900\n[SOUND]\n\n",
          "vimeoId": "84148008"
        },
        {
          "description": "In this episode Ronnie and Don discuss troubleshooting EIGRP and demonstrate configuring and using Netflow for troubleshooting and reporting on a live network.",
          "length": "3899",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/012-Troubleshooting-Pt-2.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/012-Troubleshooting-Pt-2-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/012-Troubleshooting-Pt-2-sm.jpg",
          "title": "Troubleshooting Part 2",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:15,295 --> 00:00:22,503\n[SOUND]\n\n3\n00:00:22,503 --> 00:00:32,503\n[MUSIC]\n\n4\n00:00:33,878 --> 00:00:35,543\nAll right.\nGood morning, good afternoon,\n\n5\n00:00:35,543 --> 00:00:37,879\ngood evening, and welcome back\nto another episode of IT Pro TV.\n\n6\n00:00:37,879 --> 00:00:40,081\nI'm your host, Don Pezet,\ntoday with Mr. Ronnie Wong.\n\n7\n00:00:40,081 --> 00:00:41,120\nHow's it going, Ronnie?\n\n8\n00:00:41,120 --> 00:00:42,170\n>> It's going very well.\n\n9\n00:00:42,170 --> 00:00:45,700\nI did not pay seven bucks for a cup of\ncoffee this morning at Starbucks, so\n\n10\n00:00:45,700 --> 00:00:46,820\n>> Instead you paid eight?\n\n11\n00:00:46,820 --> 00:00:47,977\n>> No, I didn't.\n\n12\n00:00:47,977 --> 00:00:51,342\n>> [LAUGH]\n>> I didn't even pay a cent for it,\n\n13\n00:00:51,342 --> 00:00:52,170\nthough.\n\n14\n00:00:52,170 --> 00:00:55,890\n>> ITProTV behind the scenes,\none of the perks that working for\n\n15\n00:00:55,890 --> 00:00:59,990\nan employer like Understand Alive,\nis that we do get free coffee, but\n\n16\n00:00:59,990 --> 00:01:02,800\nit is\n>> Free coffee.\n\n17\n00:01:02,800 --> 00:01:03,825\n>> Free coffee.\nIt's not good coffee.\n\n18\n00:01:03,825 --> 00:01:06,360\n[LAUGH] Anyhow.\n\n19\n00:01:06,360 --> 00:01:08,988\nWe've got a good episode\nahead of us today.\n\n20\n00:01:08,988 --> 00:01:10,160\n>> [LAUGH]\n>> For those of you\n\n21\n00:01:10,160 --> 00:01:14,560\nthat were watching live yesterday,\nwe started our CCNA troubleshooting,\n\n22\n00:01:14,560 --> 00:01:18,490\nwhich is objective four,\nor something like that.\n\n23\n00:01:18,490 --> 00:01:20,350\nWe were diving into troubleshooting.\n\n24\n00:01:20,350 --> 00:01:25,810\nWe talked about some general\ntroubleshooting methodologies and\n\n25\n00:01:25,810 --> 00:01:27,910\nwe really focused in on OSPF, right?\n\n26\n00:01:27,910 --> 00:01:30,760\nCuz we spent a good chunk of\nthat show troubleshooting OSPF.\n\n27\n00:01:30,760 --> 00:01:33,430\nToday, we're gonna launch with EIGRP.\n\n28\n00:01:33,430 --> 00:01:35,590\nWe're gonna take a look\nat troubleshooting it and\n\n29\n00:01:35,590 --> 00:01:39,080\nthen move into a few other general\ntechnologies before going into our\n\n30\n00:01:39,080 --> 00:01:42,440\nthird troubleshooting episode\nwhere we'll tackle switching.\n\n31\n00:01:42,440 --> 00:01:44,610\n>> Now, remember as we move into EIGRP,\n\n32\n00:01:44,610 --> 00:01:48,800\nthe configuration of\nthe EIGRP is super simple.\n\n33\n00:01:48,800 --> 00:01:52,190\nThis is where we do run into\nsome problems, because it's so\n\n34\n00:01:52,190 --> 00:01:54,410\nsimple everybody says hey, I can do this.\n\n35\n00:01:54,410 --> 00:01:57,240\nAnd they don't believe that there\ncould be any possible way that there's\n\n36\n00:01:57,240 --> 00:01:59,740\nany misconfiguration that\nthey would do on their part.\n\n37\n00:01:59,740 --> 00:02:00,900\nWell, they would be wrong.\n\n38\n00:02:00,900 --> 00:02:03,130\nThere are things that\nyou can do wrong here.\n\n39\n00:02:03,130 --> 00:02:06,360\nAnd so we wanna make sure that we cover\nat least the basics that we actually see\n\n40\n00:02:06,360 --> 00:02:08,950\nright here as called out\non the exam objectives.\n\n41\n00:02:08,950 --> 00:02:09,680\n>> Yep.\n\n42\n00:02:09,680 --> 00:02:13,540\nNow, we're gonna use the same\ntopology that we used for OSPF so\n\n43\n00:02:13,540 --> 00:02:18,350\nthat it's consistent, and let me just\nbring this diagram up here on my computer.\n\n44\n00:02:18,350 --> 00:02:22,100\nSo we've got router 1, router 2, and\nrouter 3, again, in that kinda triangle\n\n45\n00:02:22,100 --> 00:02:28,600\narrangement, where router 1 has a hub and\nspoke frame-relay connection.\n\n46\n00:02:28,600 --> 00:02:30,220\nWhy is my cursor going crazy?\n\n47\n00:02:30,220 --> 00:02:30,970\nThere we go.\n\n48\n00:02:30,970 --> 00:02:34,830\nSo, this old router one up here\nbasically has a hub and spoke.\n\n49\n00:02:34,830 --> 00:02:37,090\nSo it's the center of\nthat frame-relay cloud.\n\n50\n00:02:37,090 --> 00:02:40,130\nRouter 2 and router 3 just have that\nframe relay connection running back.\n\n51\n00:02:40,130 --> 00:02:42,800\nAnd then we've got router\n4 off to the side,\n\n52\n00:02:42,800 --> 00:02:48,320\nwhich just has a crossover cable\nrun between router 1 and router 4.\n\n53\n00:02:48,320 --> 00:02:51,690\nSo it's a fast ethernet\ncable in that's it.\n\n54\n00:02:51,690 --> 00:02:55,600\nAnd basically we've turned on\nEIGRP on all these routers and\n\n55\n00:02:55,600 --> 00:02:59,420\njust like Ronnie said,\nturning on the EIGRP can be really easy.\n\n56\n00:02:59,420 --> 00:03:01,680\nIn fact,\nit really just takes two commands.\n\n57\n00:03:01,680 --> 00:03:03,990\nLet me show one of the routers here.\n\n58\n00:03:03,990 --> 00:03:05,920\nI'll take router 1 since\nit's in the middle.\n\n59\n00:03:10,420 --> 00:03:13,621\nAnd if you wanna turn on EIGRP on\na router and just get it up and\n\n60\n00:03:13,621 --> 00:03:16,850\nrunning really fast,\nyou can run two commands.\n\n61\n00:03:16,850 --> 00:03:21,760\nRouter EIGRP followed by an autonomous\nsystem number and then network.\n\n62\n00:03:21,760 --> 00:03:23,660\nAnd if you do a wild card like this,\n0.0.0.0.\n\n63\n00:03:23,660 --> 00:03:28,060\nThat says turn on EIGRP for\nall of my interfaces,\n\n64\n00:03:28,060 --> 00:03:29,870\nall of my networks, and just fire it up.\n\n65\n00:03:29,870 --> 00:03:31,120\nRight?\n>> Yeah.\n\n66\n00:03:31,120 --> 00:03:34,200\n>> Those two commands right there\nare enough to get EIGRP up and\n\n67\n00:03:34,200 --> 00:03:36,510\nrunning in almost every environment.\n\n68\n00:03:36,510 --> 00:03:38,440\n>> Yeah.\n>> We might wanna do other things like\n\n69\n00:03:38,440 --> 00:03:40,880\nturn off auto summarization and stuff.\n\n70\n00:03:40,880 --> 00:03:42,365\nWe showed a lot of that in the EIGRP show.\n\n71\n00:03:42,365 --> 00:03:45,805\nBut for the most part that's\nenough to get it started.\n\n72\n00:03:47,785 --> 00:03:51,395\nBut there are certain scenarios where\nwe can bump into issues and we need to\n\n73\n00:03:51,395 --> 00:03:55,647\ntroubleshoot and find out what's going\non and where our problem is right.\n\n74\n00:03:55,647 --> 00:03:57,457\nAnd that's visible here.\n\n75\n00:03:57,457 --> 00:04:01,717\nLet's start out with that point to point\nlink between router 1 and router 4.\n\n76\n00:04:01,717 --> 00:04:06,327\nSo, router 1 is running EIGRP,\nit's advertising all of it's networks,\n\n77\n00:04:06,327 --> 00:04:10,807\nif I do a show IP protocols,\nI can see that it is running EIGRP 1.\n\n78\n00:04:10,807 --> 00:04:14,107\nI haven't messed with\nany of the k-metrics.\n\n79\n00:04:14,107 --> 00:04:18,530\nThat's a little advanced for the CCNA\nexam, you wouldn't normally see that.\n\n80\n00:04:18,530 --> 00:04:22,720\nBut for the most part it's just up,\nit's routing for all of it's networks, and\n\n81\n00:04:22,720 --> 00:04:27,590\nall these settings are pretty much the\ndefault, cause we didn't change anything.\n\n82\n00:04:27,590 --> 00:04:28,520\n>> Yeah.\n\n83\n00:04:28,520 --> 00:04:32,520\nBut if we go in now and we just do a show\ncommand, because we know that we were\n\n84\n00:04:32,520 --> 00:04:37,310\nwanting to run EIGRP on router 1 and\nrouter 4, we should find,\n\n85\n00:04:37,310 --> 00:04:42,795\nlike we did in OSPF here, the idea of what\nwe call neighbors, or adjacencies here.\n\n86\n00:04:42,795 --> 00:04:44,680\n>> Mm-hm.\n>> Is what we should find.\n\n87\n00:04:44,680 --> 00:04:45,990\nSo, when we asked you to go ahead and\n\n88\n00:04:45,990 --> 00:04:50,990\nrun this, notice it shows me that I have\ntwo neighbors here, but I know something.\n\n89\n00:04:50,990 --> 00:04:54,180\nNone of those neighbors are actually\nthe one that's connected to router 4.\n\n90\n00:04:54,180 --> 00:04:56,460\nSo I have a problem already.\n\n91\n00:04:56,460 --> 00:04:58,500\n>> Yeah.\nThis is router 2 and router 3.\n\n92\n00:04:58,500 --> 00:05:02,040\nAnd you can see right here,\nthese are both on the serial interfaces.\n\n93\n00:05:02,040 --> 00:05:05,034\nSo I don't have a neighbor at all\non my fast Ethernet interface, so\n\n94\n00:05:05,034 --> 00:05:06,430\nI've got a problem.\n\n95\n00:05:06,430 --> 00:05:08,200\nAnd, I need to figure out what it is.\n\n96\n00:05:08,200 --> 00:05:10,910\nAnd one of the things I always\nencourage people to do,\n\n97\n00:05:10,910 --> 00:05:15,080\nis when you're troubleshooting a problem\nlike this, start at layer one and\n\n98\n00:05:15,080 --> 00:05:19,020\nkind of work your way up the OSI\nmodel to try and find the problem.\n\n99\n00:05:19,020 --> 00:05:19,770\nRight?\n\n100\n00:05:19,770 --> 00:05:21,350\nOne easy explanation for\n\n101\n00:05:21,350 --> 00:05:24,410\nwhy we couldn't see the router before\nwas that the cable was unplugged.\n\n102\n00:05:24,410 --> 00:05:26,150\nAnd maybe that's it.\n\n103\n00:05:26,150 --> 00:05:33,060\nSo I'm gonna do a show IP interface brief,\njust to check the status of my ports,\n\n104\n00:05:33,060 --> 00:05:38,570\nand I can see fast even at 0,\n0, my IP is 4.4.4.1.\n\n105\n00:05:38,570 --> 00:05:43,110\nRouter 4 is 4.4.4.4, and\nso I've got that IP.\n\n106\n00:05:43,110 --> 00:05:45,140\nIt's the right IP.\n\n107\n00:05:45,140 --> 00:05:48,070\nAnd my status is up, up.\n\n108\n00:05:48,070 --> 00:05:51,320\nThat tells me layer 1,\nit's manually turned on.\n\n109\n00:05:51,320 --> 00:05:56,430\nLayer 2, I've got link lights and\nso it's up from that perspective.\n\n110\n00:05:56,430 --> 00:06:00,345\nI should be able to ping router 4.\n\n111\n00:06:00,345 --> 00:06:01,470\nNow, I could\n\n112\n00:06:01,470 --> 00:06:03,300\nhave a problem with my subnet mask\n>> Yeah.\n\n113\n00:06:03,300 --> 00:06:04,350\n>> which you can't really see, or\n\n114\n00:06:04,350 --> 00:06:06,600\nthat's when we get to layer\nthree in US line model.\n\n115\n00:06:06,600 --> 00:06:10,000\nBut I could do a show,\nrun, interface, FA00,\n\n116\n00:06:10,000 --> 00:06:14,870\nand I can see my subnet mask right there.\n\n117\n00:06:14,870 --> 00:06:18,440\nSo, my subnet mask is a full on class A.\n\n118\n00:06:18,440 --> 00:06:21,570\nI'm 4.4.4.1, router four is 4.4.4.4, so\n\n119\n00:06:21,570 --> 00:06:25,750\nwe're definitely in the same network,\nso I should be able to hit that.\n\n120\n00:06:27,590 --> 00:06:28,350\nAnd-\n>> Yeah.\n\n121\n00:06:28,350 --> 00:06:29,630\n>> I can ping it.\n\n122\n00:06:29,630 --> 00:06:31,840\n>> So even though we can still do that,\nright?\n\n123\n00:06:31,840 --> 00:06:33,940\nWe have basic connectivity going on.\n\n124\n00:06:33,940 --> 00:06:36,320\nThat at least is part of the actual issue.\n\n125\n00:06:36,320 --> 00:06:41,380\nSo we know that we can send EIGRP packets\nback and forth between router 4 and\n\n126\n00:06:41,380 --> 00:06:42,710\nrouter 1.\n\n127\n00:06:42,710 --> 00:06:45,430\nEven so, we've still do not\nhave the neighborship or\n\n128\n00:06:45,430 --> 00:06:47,160\nthe adjacency that we should.\n\n129\n00:06:47,160 --> 00:06:50,130\nSo we still need to troubleshoot\nat least that part of it.\n\n130\n00:06:50,130 --> 00:06:51,850\n>> And remember, we need to have ping.\n\n131\n00:06:51,850 --> 00:06:55,530\nThat's an ICMP message,\nthat's being sent across the line.\n\n132\n00:06:55,530 --> 00:06:58,290\nWhen you are doing EIGRP\nit's a multicast message so\n\n133\n00:06:58,290 --> 00:07:00,570\nthere are different\ntypes of communications.\n\n134\n00:07:00,570 --> 00:07:03,250\nThere could be things like\naccess lists flocking the EIGRP,\n\n135\n00:07:03,250 --> 00:07:06,010\nthere could be all sorts\nof crazy stuff going on.\n\n136\n00:07:06,010 --> 00:07:09,740\nNow, I looked at the interface\nright here on router one, and\n\n137\n00:07:09,740 --> 00:07:12,540\nthere's no access list attached there.\n\n138\n00:07:12,540 --> 00:07:16,380\nThere's some kind of rip advertisement,\nloaded interval that are set,\n\n139\n00:07:16,380 --> 00:07:18,210\nthat aren't normal defaults.\n\n140\n00:07:18,210 --> 00:07:19,710\nBut those aren't things\nthat would affect this.\n\n141\n00:07:19,710 --> 00:07:22,290\nAnd if I thought they were I could\nalways just remove them, right?\n\n142\n00:07:22,290 --> 00:07:25,819\nSo I could get in there and\nI'll just take these.\n\n143\n00:07:27,650 --> 00:07:29,240\nAnd we'll just get em out of there.\n\n144\n00:07:29,240 --> 00:07:32,710\nSince we don't, those are actually\nleftover from another show,\n\n145\n00:07:32,710 --> 00:07:34,215\nwhen we doing PPPoE.\n\n146\n00:07:34,215 --> 00:07:34,780\n>> Mm-hm.\n>> And so\n\n147\n00:07:34,780 --> 00:07:37,070\nthose were some of the commands we needed.\n\n148\n00:07:37,070 --> 00:07:38,295\nSo I'll just get those out.\n\n149\n00:07:43,295 --> 00:07:45,295\nAnd now we got a nice normal interface.\n\n150\n00:07:45,295 --> 00:07:46,600\n>> There you go.\n\n151\n00:07:46,600 --> 00:07:49,830\n>> Its speed and duplex are automatically\ndetecting and there's our IP address.\n\n152\n00:07:49,830 --> 00:07:52,628\nI'm gonna jump over to router 4 and\ncheck its interface.\n\n153\n00:07:54,147 --> 00:07:59,551\nAll right, and it's basically\nthe same way, same subnet mask,\n\n154\n00:07:59,551 --> 00:08:04,268\nnice and auto, and So\nI'm not seeing any access lists and\n\n155\n00:08:04,268 --> 00:08:08,940\nI do have ping functionality there so\nthat's good.\n\n156\n00:08:08,940 --> 00:08:14,230\nIt looks like things are operational\nas far as layer 1, layer 2 and layer 3.\n\n157\n00:08:14,230 --> 00:08:16,710\nNow you might say to yourself\nlet's move up to layer 4 but\n\n158\n00:08:16,710 --> 00:08:18,910\nwe're not quite done with layer 3 yet.\n\n159\n00:08:18,910 --> 00:08:21,890\nThe other thing we have to worry\nabout layer 3 is our dynamic\n\n160\n00:08:21,890 --> 00:08:22,850\nrouting protocol, right.\n\n161\n00:08:22,850 --> 00:08:24,350\nThey're layer 3 protocols.\n\n162\n00:08:24,350 --> 00:08:27,785\nSo we need to look at out EIGRP\nconfiguration to see what's going on.\n\n163\n00:08:27,785 --> 00:08:28,670\n>> Hm-mm.\n\n164\n00:08:28,670 --> 00:08:34,260\n>> And one of the easiest ways to do\nthat is to use that section filter and\n\n165\n00:08:34,260 --> 00:08:36,090\npull up just the EIGRP configuration.\n\n166\n00:08:36,090 --> 00:08:40,310\nI could do a show run and see it there or\na show IP protocols, but I like this one.\n\n167\n00:08:42,430 --> 00:08:45,380\nAlright and so\nhere I can see that EIGRP is turned on and\n\n168\n00:08:45,380 --> 00:08:47,050\nI got my network statement.\n\n169\n00:08:47,050 --> 00:08:50,840\nBut I see what's more than\nlikely the main issue.\n\n170\n00:08:52,320 --> 00:08:56,440\n>> Remember that for\nus the issue here with EIGRP unlike OSPF,\n\n171\n00:08:56,440 --> 00:09:00,310\nthe number that follows when you configure\nthe router is not a process ID number\n\n172\n00:09:00,310 --> 00:09:02,140\nwhich means it doesn't really matter.\n\n173\n00:09:02,140 --> 00:09:05,250\nIn EIGRP this is\nan autonomous system number.\n\n174\n00:09:05,250 --> 00:09:08,810\nAnd remember that in EIGRP if you want\nthose routers to communicate with each\n\n175\n00:09:08,810 --> 00:09:12,090\nother, they must be in that\nsame autonomous system.\n\n176\n00:09:12,090 --> 00:09:16,110\nWe actually saw on router 1,\nwhere it was actually EIGRP 1, and\n\n177\n00:09:16,110 --> 00:09:19,820\nwe can see right here that it's\nactually showing router EIGRP 2.\n\n178\n00:09:19,820 --> 00:09:22,930\nSo these two are not gonna ever\ncommunicate with each other\n\n179\n00:09:22,930 --> 00:09:25,210\nif they're in different\nautonomous systems.\n\n180\n00:09:25,210 --> 00:09:25,840\n>> Yep.\n\n181\n00:09:25,840 --> 00:09:27,480\nSo, pretty easy to spot.\n\n182\n00:09:27,480 --> 00:09:30,740\nIt's very likely to show up on the exam\nbecause a lot of people get it confused.\n\n183\n00:09:30,740 --> 00:09:33,400\nThe process number in OSPF\ndoesn't have to match.\n\n184\n00:09:33,400 --> 00:09:36,806\nI can have router OSPF 1 on one router.\n\n185\n00:09:36,806 --> 00:09:41,880\nAnd router OSPF 2 on the other router,\nand as long as the area numbers match,\n\n186\n00:09:41,880 --> 00:09:45,520\nthere gonna connect up and\nbe just fine, but in EIGRP,\n\n187\n00:09:45,520 --> 00:09:49,830\nthere are no areas,\nthere's just autonomous system numbers and\n\n188\n00:09:49,830 --> 00:09:52,630\nthat's the number we're specifying\nright there, so those have to match.\n\n189\n00:09:53,630 --> 00:09:57,460\nNow it's not the easiest thing to fix,\nright?\n\n190\n00:09:57,460 --> 00:09:59,880\nYou might think,\nwell don't I just run router EIGRP 1?\n\n191\n00:09:59,880 --> 00:10:05,560\nBut if you do, you're now running 2\nautonomous systems on your router.\n\n192\n00:10:05,560 --> 00:10:09,310\nAnd all of your network statements\nare left behind in the other one.\n\n193\n00:10:09,310 --> 00:10:13,130\nSo we really have to remove this one and\ncompletely reconfigure EIGRP.\n\n194\n00:10:14,210 --> 00:10:15,700\nIn a simple config like this?\n\n195\n00:10:15,700 --> 00:10:17,000\n>> Yeah.\n>> Not a big deal.\n\n196\n00:10:17,000 --> 00:10:18,750\nBut if you've gotten really complex,\n\n197\n00:10:18,750 --> 00:10:23,800\nif you've designated passive interfaces\nand turned off auto summary and\n\n198\n00:10:23,800 --> 00:10:26,970\nstuff, you'll have to recreate that\nunder the new autonomous system.\n\n199\n00:10:26,970 --> 00:10:28,380\nSo just keep that in mind.\n\n200\n00:10:28,380 --> 00:10:32,540\nBut the other thing I wanna\ndo is before we fix it,\n\n201\n00:10:32,540 --> 00:10:37,090\nEIGRP really didn't give\nus any warnings about this.\n\n202\n00:10:37,090 --> 00:10:40,900\nWe didn't know that\nthere was this mismatch.\n\n203\n00:10:40,900 --> 00:10:45,230\nAnd if I take a look at my logs, like\nthese are log messages from yesterday's\n\n204\n00:10:45,230 --> 00:10:52,010\nOSPF show, I don't have any log messages\nindicating an EIGRP problem at all, right.\n\n205\n00:10:52,010 --> 00:10:55,990\nAnd that's because the IGRP\nassumes we did this on purpose.\n\n206\n00:10:55,990 --> 00:10:59,143\nIt assumes that we wanted router\n4 in autonomous system 2 and\n\n207\n00:10:59,143 --> 00:11:02,380\nrouter 1 in autonomous system 1, and then\nwe just didn't want them to communicate.\n\n208\n00:11:02,380 --> 00:11:03,480\n>> Yeah, no errors.\n\n209\n00:11:03,480 --> 00:11:07,780\n>> But you can see that it's\nhappening if you do a debug command,\n\n210\n00:11:07,780 --> 00:11:12,080\nand you'll see with the IGRP, there\nare a number of debugs that we can do.\n\n211\n00:11:12,080 --> 00:11:14,780\nNeighbor debugging is probably\none of the most useful ones, but\n\n212\n00:11:14,780 --> 00:11:18,760\nyou've got a few other ones, like\nnotifications and AS monitoring and so on.\n\n213\n00:11:18,760 --> 00:11:22,180\nSo, I'm gonna do neighbor debugging,\nand I'm just gonna debug them all.\n\n214\n00:11:22,180 --> 00:11:26,520\nOh, I'm on the console, so\n\n215\n00:11:26,520 --> 00:11:30,170\nI don't need terminal monitor, and\nso now I'm gonna wait patiently.\n\n216\n00:11:30,170 --> 00:11:32,100\nThe IGRP is a timer based protocol.\n\n217\n00:11:32,100 --> 00:11:37,294\nI guess I could force it\n\n218\n00:11:37,294 --> 00:11:44,410\nby resetting that interface.\n\n219\n00:11:44,410 --> 00:11:45,120\nThere we go.\n\n220\n00:11:45,120 --> 00:11:47,160\nI'm just shutting the interface down and\nbringing it back up so\n\n221\n00:11:47,160 --> 00:11:49,740\nI can kinda force some activity.\n\n222\n00:11:49,740 --> 00:11:54,482\nOtherwise, I have to wait for\n\n223\n00:11:54,482 --> 00:12:02,270\nEIGRP's little 90 second timer or\nwhatever.\n\n224\n00:12:02,270 --> 00:12:04,898\nAre we seeing much activity here at all,\nare we?\n\n225\n00:12:04,898 --> 00:12:05,901\n>> [LAUGH].\n\n226\n00:12:05,901 --> 00:12:08,150\n>> The most boring debug ever.\n\n227\n00:12:09,700 --> 00:12:11,510\nSo, I've run two commands at this point.\n\n228\n00:12:11,510 --> 00:12:15,970\nI did debug, IP, EIGRP neighbor, so\nI could see adjacency information.\n\n229\n00:12:15,970 --> 00:12:20,500\nAnd then I did debug IP, EIGRP by itself,\nwhich turns on event notifications.\n\n230\n00:12:20,500 --> 00:12:24,730\nSo you can see, I could've gone further\nand typed it all of the way out.\n\n231\n00:12:24,730 --> 00:12:28,468\nBut basically when routing events\nare occurring in EIGRP it will let me now.\n\n232\n00:12:28,468 --> 00:12:34,970\nBut I'm not really seeing\nany activity here at all.\n\n233\n00:12:34,970 --> 00:12:35,880\nThis is bizarre.\n\n234\n00:12:35,880 --> 00:12:37,440\nI should at least see announcements going.\n\n235\n00:12:41,480 --> 00:12:42,830\nStrange, that one's a good one.\n\n236\n00:12:44,700 --> 00:12:46,060\nJust a second.\n\n237\n00:12:46,060 --> 00:12:52,271\nLet's just verify.\n\n238\n00:12:52,271 --> 00:12:56,900\nI just want to verify that\nEIGRP is actually running.\n\n239\n00:12:56,900 --> 00:12:58,540\nEIGRP is an interesting one,\n\n240\n00:12:58,540 --> 00:13:01,310\ncuz there are some scenarios where\nyou can think that it's configured.\n\n241\n00:13:01,310 --> 00:13:02,560\n>> Right.\n>> And actually it isn't.\n\n242\n00:13:02,560 --> 00:13:08,020\nSo, for example,\nif you run router EIGRP 1,\n\n243\n00:13:08,020 --> 00:13:12,190\nand you go in there and you just exit\nout without any network statements,\n\n244\n00:13:12,190 --> 00:13:14,300\nit doesn't actually turn on EIGRP.\n\n245\n00:13:14,300 --> 00:13:16,080\nEIGRP just turns right back off again.\n\n246\n00:13:16,080 --> 00:13:18,870\nSo you have to have at least one\nnetwork statement in there to do it.\n\n247\n00:13:18,870 --> 00:13:22,270\nAnd then you can disable the IGRP, too,\nbut I don't see that in my config, so\n\n248\n00:13:22,270 --> 00:13:23,360\nthat's not my problem.\n\n249\n00:13:23,360 --> 00:13:24,010\n>> Looks good.\n\n250\n00:13:24,010 --> 00:13:27,580\n>> So, yeah, just looks like I'm\nbeing quiet for some reason.\n\n251\n00:13:27,580 --> 00:13:31,390\nAll right, so our debugs aren't being\nterribly helpful for us here, but\n\n252\n00:13:31,390 --> 00:13:35,960\njust comparing our configs,\noften times, is faster than a debug.\n\n253\n00:13:35,960 --> 00:13:39,450\nThat revealed our issue, and\nwe can get in here and fix that.\n\n254\n00:13:39,450 --> 00:13:47,060\nSo I'm gonna say no router EIGRP 2,\nand then router EIGRP 1.\n\n255\n00:13:47,060 --> 00:13:52,910\n>> Now we're starting to\nget some information.\n\n256\n00:13:52,910 --> 00:13:53,750\n>> There we go.\n\n257\n00:13:53,750 --> 00:13:57,660\nYeah, I can see that new pier building up,\nand then here comes my communications.\n\n258\n00:13:57,660 --> 00:14:00,600\nAnd so I start to build that up,\nand now we see that neighbor.\n\n259\n00:14:00,600 --> 00:14:02,500\nAnd I can see that I'm\nlearning routes too,\n\n260\n00:14:02,500 --> 00:14:06,200\nhere's all these other routes that are\ncoming in, and so they are coming in and\n\n261\n00:14:06,200 --> 00:14:08,360\nbeing added to my routes,\nor at least they should be.\n\n262\n00:14:08,360 --> 00:14:15,020\nI'm so used to working with OSPF I\njust type that out at a default.\n\n263\n00:14:15,020 --> 00:14:18,340\nSo I do show a neighbor now,\nI've got Router 1 as my neighbor.\n\n264\n00:14:20,060 --> 00:14:22,880\nAnd in my routing table I am\nlearning some EIGRP routes.\n\n265\n00:14:22,880 --> 00:14:25,900\nRemember EIGRP routes\nare designated with a D and\n\n266\n00:14:25,900 --> 00:14:28,590\nthat's because the E was already\ntaken by another protocol.\n\n267\n00:14:28,590 --> 00:14:31,029\nThe D is short for DUAL or\nthe Diffusing Update Algorithm.\n\n268\n00:14:34,100 --> 00:14:35,820\nAll right, so EIGRP is up.\n\n269\n00:14:35,820 --> 00:14:36,880\nIt's operational.\n\n270\n00:14:36,880 --> 00:14:38,760\nI'm learning from router one.\n\n271\n00:14:38,760 --> 00:14:39,720\nThings look good, right?\n\n272\n00:14:39,720 --> 00:14:41,360\nSo this is good.\n\n273\n00:14:41,360 --> 00:14:43,660\nLet me just verify on\nrouter 1 the same thing.\n\n274\n00:14:45,700 --> 00:14:46,550\nDamn it.\n\n275\n00:14:46,550 --> 00:14:47,250\nOSPF.\n\n276\n00:14:47,250 --> 00:14:52,230\nIn real life land, in full honesty and\n\n277\n00:14:52,230 --> 00:14:55,920\ndisclosure, whatever,\nEIGRP is a better protocol than OSPF.\n\n278\n00:14:55,920 --> 00:14:57,260\nIt's pretty hard to argue that it isn't.\n\n279\n00:14:57,260 --> 00:14:59,020\nIt is a better protocol.\n\n280\n00:14:59,020 --> 00:15:04,270\nBut because it's Cisco proprietary\nvery few companies actually run it.\n\n281\n00:15:04,270 --> 00:15:06,050\nAlmost everyone runs OSPF.\n\n282\n00:15:06,050 --> 00:15:09,820\nSo, in every job that I've held,\nevery private sector,\n\n283\n00:15:09,820 --> 00:15:12,450\npublic sector, contract I've ever done,\nit's always been OSPF.\n\n284\n00:15:12,450 --> 00:15:14,985\nThat's why I'm so\nused to typing in those commands.\n\n285\n00:15:14,985 --> 00:15:17,790\n>> [LAUGH].\n>> But EIGRP is a better protocol.\n\n286\n00:15:17,790 --> 00:15:21,000\nIf you're 100% Cisco you can\nuse it to great success.\n\n287\n00:15:21,000 --> 00:15:24,950\nBut it does get kind of\nhard to remember to so.\n\n288\n00:15:24,950 --> 00:15:26,980\nAll right.\nSo we're in business there and\n\n289\n00:15:26,980 --> 00:15:30,130\nwe've got our neighbors and\nthings are looking good.\n\n290\n00:15:30,130 --> 00:15:31,600\nNow, we're up on operational.\n\n291\n00:15:31,600 --> 00:15:34,860\nYou have a mismatched AS number\nthat's gonna bring it home.\n\n292\n00:15:34,860 --> 00:15:36,850\n>> Oh, yeah.\n>> EIGRP is not as sensitive as OSPF.\n\n293\n00:15:36,850 --> 00:15:41,260\nRemember with OSPF, we had our hello and\ndead timers and area numbers and\n\n294\n00:15:41,260 --> 00:15:44,840\nstub flags and all these different\nthings that had to match but\n\n295\n00:15:44,840 --> 00:15:47,360\nwith EIGRP it's really just the AS number.\n\n296\n00:15:47,360 --> 00:15:49,800\nAS number has to match and\nthat's about it.\n\n297\n00:15:49,800 --> 00:15:51,497\nIf you've done authentication\nthe password would have to match.\n\n298\n00:15:51,497 --> 00:15:55,432\n>> Yeah, the nice thing about EIGRP is\nonce we fix this neighbor statement,\n\n299\n00:15:55,432 --> 00:15:59,636\nusually that's enough for us and\nreally don't have to reconfigure it again.\n\n300\n00:15:59,636 --> 00:16:01,353\nWe have a simple network right?\n\n301\n00:16:01,353 --> 00:16:05,406\nUsually the more complex, of course\nthere's other things that have to be done,\n\n302\n00:16:05,406 --> 00:16:08,403\nbut for us, this is enough to\nget our simple network going.\n\n303\n00:16:08,403 --> 00:16:09,850\n>> Yeah.\n\n304\n00:16:09,850 --> 00:16:12,640\nAnd, let me do this, I'm just gonna\nmake some little notes here so\n\n305\n00:16:12,640 --> 00:16:17,490\nwe can remember some of the commands\nthat we've done, right?\n\n306\n00:16:17,490 --> 00:16:21,810\nWe did our normal ones that we\nshould all be familiar with.\n\n307\n00:16:24,110 --> 00:16:25,050\n>> Oh yeah.\n\n308\n00:16:25,050 --> 00:16:27,730\n>> Show IP route, show IP protocol,\nshow IP interface.\n\n309\n00:16:27,730 --> 00:16:28,860\nBreathe.\n\n310\n00:16:28,860 --> 00:16:32,740\nShow running config filtered\ninto the section command.\n\n311\n00:16:32,740 --> 00:16:34,940\nTo see just the EIGRP's configuration.\n\n312\n00:16:34,940 --> 00:16:36,980\nThose are some good commands that we use.\n\n313\n00:16:36,980 --> 00:16:43,010\nI also did debug IP EIGRP.\n\n314\n00:16:43,010 --> 00:16:46,430\nAnd debug IP EIGRP neighbor right.\n\n315\n00:16:46,430 --> 00:16:48,100\nThose were a couple ones that we did.\n\n316\n00:16:48,100 --> 00:16:51,630\nIn this scenario the debugs didn't\nreally help us but the configs did.\n\n317\n00:16:51,630 --> 00:16:54,450\n>> Yeah but this brings us back\nto good troubleshooting theory\n\n318\n00:16:54,450 --> 00:16:57,150\nagain especially on routers and\nswitches right.\n\n319\n00:16:57,150 --> 00:16:59,610\nWe know what has to be done.\n\n320\n00:16:59,610 --> 00:17:01,760\nFor those devices to work first.\n\n321\n00:17:01,760 --> 00:17:05,110\nAnd so as long as you know what\nthe basic configuration has to be.\n\n322\n00:17:05,110 --> 00:17:09,540\nWe compare it to what we think is wrong\nhere and we just kinda go line by line and\n\n323\n00:17:09,540 --> 00:17:10,850\nmake that comparison.\n\n324\n00:17:10,850 --> 00:17:14,535\nAnd then again, remove some of\nthe statements that we're not sure, and\n\n325\n00:17:14,535 --> 00:17:18,575\nthen again, add in things that\nwe definitely need to know that.\n\n326\n00:17:18,575 --> 00:17:21,575\n>> And on the exam, there's times\nwhere they dump you into a router or\n\n327\n00:17:21,575 --> 00:17:24,395\na switch and then you actually have to\nfind the stuff yourselves, there's other\n\n328\n00:17:24,395 --> 00:17:28,945\ntimes where they show you two configs side\nby side and you have to find the problem.\n\n329\n00:17:28,945 --> 00:17:32,965\nIt's not even in a simulation at that\npoint, but you're comparing those configs.\n\n330\n00:17:32,965 --> 00:17:34,015\nEasy way to find that problem.\n\n331\n00:17:35,130 --> 00:17:35,800\nAll right.\n\n332\n00:17:35,800 --> 00:17:38,110\nThat takes care of our connection.\n\n333\n00:17:38,110 --> 00:17:41,260\nJust our straight up normal connection\nbetween router four and router one.\n\n334\n00:17:41,260 --> 00:17:44,360\nUsually it's just a mismatched AS number,\nand that's about it, right.\n\n335\n00:17:44,360 --> 00:17:46,840\nSo there's not all that much\nthat can go wrong there.\n\n336\n00:17:46,840 --> 00:17:50,400\nAn access list that blocks multicast,\ncould also do it, or\n\n337\n00:17:50,400 --> 00:17:53,060\nother access lists on the interface\ncould block that, but for\n\n338\n00:17:53,060 --> 00:17:56,900\nthe most part, that's it, for those of\nyou that go on to study for your CCNP\n\n339\n00:17:56,900 --> 00:18:00,870\nyou'll learn about a lot more advanced\nthings than the IGRP that can go wrong.\n\n340\n00:18:00,870 --> 00:18:03,220\nBut for the CCNA that's the basic\none we need to remember.\n\n341\n00:18:04,550 --> 00:18:08,140\nNow that's a normal network right there,\njust a shared Ethernet link and that's it.\n\n342\n00:18:09,480 --> 00:18:11,922\nNow let's add in something\na little more complex.\n\n343\n00:18:11,922 --> 00:18:15,380\nWe're gonna add in frame relay to the mix,\nokay?\n\n344\n00:18:15,380 --> 00:18:18,760\nNow this frame relay network\nis a multi-point network.\n\n345\n00:18:18,760 --> 00:18:21,770\nIn other words router one\njust has one interface and\n\n346\n00:18:21,770 --> 00:18:25,340\nthat one interface connects to\nrouter two and router three.\n\n347\n00:18:25,340 --> 00:18:26,380\nIts a multi-point.\n\n348\n00:18:26,380 --> 00:18:29,620\nSo, we've got point to\nmulti-point designated up there.\n\n349\n00:18:29,620 --> 00:18:31,450\nAnd the other ones are point to point,\nall right?\n\n350\n00:18:32,660 --> 00:18:35,710\nWith the other guys being point to\npoint it's a different type interface.\n\n351\n00:18:35,710 --> 00:18:37,280\nAnd that wreaks a lot of havoc\n>> Right.\n\n352\n00:18:37,280 --> 00:18:37,830\n>> With OSPF.\n\n353\n00:18:37,830 --> 00:18:40,060\nOSPF is not happy about that.\n\n354\n00:18:40,060 --> 00:18:43,370\nAnd so in the OSPF show,\nwe had to do a lot of stuff to fix it.\n\n355\n00:18:43,370 --> 00:18:46,030\nEIGRP on the other hand, doesn't care.\n\n356\n00:18:46,030 --> 00:18:48,030\nIt's perfectly happy with it.\n\n357\n00:18:48,030 --> 00:18:51,440\nWhen we did that basic\nEIGRP configuration.\n\n358\n00:18:51,440 --> 00:18:55,028\nRouter, EIGRP one, network 0, 0, 0, 0.\n\n359\n00:18:55,028 --> 00:18:58,380\nWhen we turn that on, on router one,\nrouter two, and router three.\n\n360\n00:18:58,380 --> 00:19:02,040\nThey actually kick in and start working\nwithout any crazy issues, right?\n\n361\n00:19:02,040 --> 00:19:04,010\nLet me show you what I mean.\n\n362\n00:19:04,010 --> 00:19:09,260\nIf I look at router one, and I do\n\n363\n00:19:09,260 --> 00:19:14,380\na show run section EIGRP,\nit's got that real simpler\n\n364\n00:19:14,380 --> 00:19:20,185\nEIGRP configuration and\nif I look at the serial interface.\n\n365\n00:19:20,185 --> 00:19:24,840\nOkay so here it is you know it's got its\nIP address, it's got its frame relay map.\n\n366\n00:19:24,840 --> 00:19:28,360\nThere's some OSPF commands left\nin here from the OSPF show but\n\n367\n00:19:28,360 --> 00:19:30,000\nyou know we're not even\nrunning OSPF anymore.\n\n368\n00:19:30,000 --> 00:19:31,300\nI can get rid of those.\n\n369\n00:19:31,300 --> 00:19:35,750\nThey don't serve any\nfunction at this point.\n\n370\n00:19:36,880 --> 00:19:39,195\nAnd so I'll just knock those out.\n\n371\n00:19:42,695 --> 00:19:46,460\nAll right, so\nnow no special commands on the interface.\n\n372\n00:19:46,460 --> 00:19:49,980\nWell, unless you count the broadcast\nflag on the frame relay maps, right?\n\n373\n00:19:49,980 --> 00:19:53,855\nRemember that all of our dynamic\nrouting protocol, use multicast.\n\n374\n00:19:53,855 --> 00:19:54,995\nWell, I say all of them.\n\n375\n00:19:54,995 --> 00:19:55,775\nVersion one doesn't.\n\n376\n00:19:55,775 --> 00:19:59,545\nIt uses broadcast, but they're all using\neither broadcast or multicast, and\n\n377\n00:19:59,545 --> 00:20:01,595\nso if you want them to\nwork over frame relay,\n\n378\n00:20:01,595 --> 00:20:05,645\nwhen you do a map, you've gotta add that\nbroadcast keyword, or it's not gonna work.\n\n379\n00:20:05,645 --> 00:20:11,015\nBut this is a fairly straightforward,\nmulti-point frame relay configuration.\n\n380\n00:20:11,015 --> 00:20:12,940\nNo special commands here.\n\n381\n00:20:12,940 --> 00:20:14,778\nAnd if I jump over to router two.\n\n382\n00:20:18,028 --> 00:20:20,028\nAnd look at its interface.\n\n383\n00:20:20,028 --> 00:20:23,260\nWell I guess it's got\nsome of the OSPF stuff.\n\n384\n00:20:23,260 --> 00:20:24,778\nWe can remove that again.\n\n385\n00:20:34,111 --> 00:20:36,949\nThey're not actually\nperforming anything for us.\n\n386\n00:20:39,310 --> 00:20:40,280\nNow we look at it.\n\n387\n00:20:40,280 --> 00:20:41,670\nReally basic one there right?\n\n388\n00:20:41,670 --> 00:20:44,610\nWe just map a dlci to the interface and\nthat's it.\n\n389\n00:20:44,610 --> 00:20:46,278\nAnd if I do a.\n\n390\n00:20:49,736 --> 00:20:51,870\nShow run there again, very simple.\n\n391\n00:20:51,870 --> 00:20:58,630\nNo special commands, but if I do\na show IP OSPF neighbor I got nobody.\n\n392\n00:20:58,630 --> 00:20:59,740\nOh that's cuz it's OSPF.\n\n393\n00:20:59,740 --> 00:21:00,320\nHow about EIGRP since\nthat's what the show is.\n\n394\n00:21:00,320 --> 00:21:04,377\n>> [LAUGH]\n>> If I do a show IP EIGRP neighbor,\n\n395\n00:21:04,377 --> 00:21:05,320\nthere we go.\n\n396\n00:21:05,320 --> 00:21:06,403\nI've got router one.\n\n397\n00:21:06,403 --> 00:21:09,920\n192.168.1.1 on my serial interface.\n\n398\n00:21:09,920 --> 00:21:12,340\nI can see it, I'm talking to it.\n\n399\n00:21:12,340 --> 00:21:14,870\nI'm happy I can see like I'm\nalready at sequence number nine.\n\n400\n00:21:14,870 --> 00:21:18,220\nWe've exchanged some information,\nso I know that's healthy.\n\n401\n00:21:18,220 --> 00:21:21,130\nAnd if I look at router one,\nshow IP EIGRP neighbor,\n\n402\n00:21:22,690 --> 00:21:25,920\nI can see that it's got routers two,\nthree, and four.\n\n403\n00:21:27,090 --> 00:21:30,690\nMuch more simple, EIGRP is much more\nforgiving of the frame relay networks and\n\n404\n00:21:30,690 --> 00:21:31,990\nwe don't have to deal\nwith the headaches OSPF.\n\n405\n00:21:34,200 --> 00:21:37,570\nDoes that mean our network is healthy and\nfunctional?\n\n406\n00:21:38,610 --> 00:21:41,590\nWell at first glance it\nlooks that way right.\n\n407\n00:21:41,590 --> 00:21:44,280\nBut one of the real tests of a network is\n\n408\n00:21:44,280 --> 00:21:48,380\nverifying not just that the protocol\nis up and it has the neighbors, but\n\n409\n00:21:48,380 --> 00:21:51,630\nthat all the routes are present\nthat are supposed to be right.\n\n410\n00:21:51,630 --> 00:21:53,620\nA dynamic routing protocol\ndoes convergence.\n\n411\n00:21:54,820 --> 00:21:56,230\nWhen you have a converged network,\n\n412\n00:21:56,230 --> 00:22:00,530\nthat's where every router on your\nnetwork knows about every other route.\n\n413\n00:22:00,530 --> 00:22:03,320\nWhen, I look at router one,\nand I do a show IP route.\n\n414\n00:22:04,580 --> 00:22:09,831\nIt knows about the one dot class A,\nthe two dot, three dot, and\n\n415\n00:22:09,831 --> 00:22:14,903\nfour dot class A, and\nthe 192.168.1.0 class C.\n\n416\n00:22:14,903 --> 00:22:17,610\nThose are the four networks\nthat it knows about.\n\n417\n00:22:17,610 --> 00:22:20,490\nIf I jump over to router four and\n\n418\n00:22:20,490 --> 00:22:25,800\nI do a show IP route, it knows about one,\ntwo, three and four dot, right.\n\n419\n00:22:25,800 --> 00:22:30,240\nAll class As, and the 192.168.1 class C.\n\n420\n00:22:30,240 --> 00:22:36,080\nIf I jump over to router two and do a show\nIP route, it knows about the one and\n\n421\n00:22:36,080 --> 00:22:41,030\ntwo It doesn't know about\nthe three dot network.\n\n422\n00:22:41,030 --> 00:22:46,000\nAnd if I jump over to router three and do\na show IP route it knows about the one and\n\n423\n00:22:46,000 --> 00:22:48,550\nthree, it doesn't know about the two.\n\n424\n00:22:48,550 --> 00:22:49,920\n>> Yeah.\n\n425\n00:22:49,920 --> 00:22:53,110\n>> Router two doesn't know\nabout router three's network.\n\n426\n00:22:53,110 --> 00:22:56,920\nAnd router three doesn't know about router\ntwo's network, we've got a problem.\n\n427\n00:22:56,920 --> 00:22:59,710\nAt first glance,\nthe network looks healthy, but\n\n428\n00:22:59,710 --> 00:23:02,200\nwe don't actually have full convergence.\n\n429\n00:23:02,200 --> 00:23:05,240\nEvery router does not\nknow every other route.\n\n430\n00:23:05,240 --> 00:23:08,960\n>> In this particular example that we see\nright here, you can actually see that\n\n431\n00:23:08,960 --> 00:23:12,640\nrouter three is not gonna be able to get\nover to router two, router two's not gonna\n\n432\n00:23:12,640 --> 00:23:15,150\nbe able to get to router three\nbecause it doesn't see it here.\n\n433\n00:23:15,150 --> 00:23:19,060\nNow, at the heart of EIGRP, it is what.\n\n434\n00:23:19,060 --> 00:23:22,530\nAgain, there's that weird term,\nthe advanced distance vector, right?\n\n435\n00:23:22,530 --> 00:23:26,440\nBut at the beginning of it,\nit actually began with the idea of IGRP,\n\n436\n00:23:26,440 --> 00:23:29,470\nwhich is a distance vector protocol.\n\n437\n00:23:29,470 --> 00:23:33,695\nAnd so we still have to deal with some of\nthese issues of distance vector protocols.\n\n438\n00:23:33,695 --> 00:23:37,470\nThat's really what's effecting us here.\n\n439\n00:23:37,470 --> 00:23:40,800\n>> This is a really tricky problem.\n\n440\n00:23:40,800 --> 00:23:43,490\nBut it's one that CISCO specifically\ncalls out in the objective, so\n\n441\n00:23:43,490 --> 00:23:45,160\nwe need to make sure we understand it.\n\n442\n00:23:45,160 --> 00:23:49,550\nWhen you look at these routers,\nthey all appear to be configured properly.\n\n443\n00:23:49,550 --> 00:23:52,249\nThere's nothing special,\nEIGRP is super simple to configure, but\n\n444\n00:23:52,249 --> 00:23:54,631\nwe know it's broken,\nbecause the networks aren't there.\n\n445\n00:23:54,631 --> 00:23:58,974\nTo really understand the problem,\nwe need to go back to my picture.\n\n446\n00:23:58,974 --> 00:23:59,793\nLet me bring my picture back up.\n\n447\n00:23:59,793 --> 00:24:04,797\nAll right Router4 and\nrouter1 perfectly happy right?\n\n448\n00:24:04,797 --> 00:24:06,840\nEverything is good on them.\n\n449\n00:24:06,840 --> 00:24:10,600\nRouter2 and router3, they're my problem\nchild's or problem children whatever.\n\n450\n00:24:13,890 --> 00:24:20,710\nAnd so if I think about it,\nwhat's actually happening is that router2.\n\n451\n00:24:20,710 --> 00:24:24,230\nThe routes from router2\nare not making it over.\n\n452\n00:24:26,020 --> 00:24:30,280\nThe routes from router2 are not\nmaking it over to router3.\n\n453\n00:24:30,280 --> 00:24:31,050\nSomething is happening.\n\n454\n00:24:31,050 --> 00:24:32,080\nWe're not making it there.\n\n455\n00:24:32,080 --> 00:24:38,435\nThey are making it to router1 but\nthey are not making it to router3 and\n\n456\n00:24:38,435 --> 00:24:43,665\nthen the reverse is also true that\nrouter3s routes are making it to router1.\n\n457\n00:24:43,665 --> 00:24:50,445\nIn fact going onto router4 right, but\nthey are not making it over to router2.\n\n458\n00:24:50,445 --> 00:24:56,550\nSo something is happening that is blocking\nthat communication that's allowing us.\n\n459\n00:24:56,550 --> 00:25:01,730\nTo communicate these ways, but\nnot allowing us to communicate that way.\n\n460\n00:25:01,730 --> 00:25:02,430\n>> Yeah.\n\n461\n00:25:02,430 --> 00:25:05,440\n>> So\nyou have to think about it from this term.\n\n462\n00:25:05,440 --> 00:25:10,280\nWhat is different about those two guys\nthat doesn't match up with everything else\n\n463\n00:25:10,280 --> 00:25:12,060\nthat is working fine?\n\n464\n00:25:12,060 --> 00:25:13,340\nAnd in this scenario,\n\n465\n00:25:13,340 --> 00:25:16,638\nthe only thing that's different\nis that frame relay network.\n\n466\n00:25:16,638 --> 00:25:20,460\nRouter2 and router3 do not have\na direct connection to each other but\n\n467\n00:25:20,460 --> 00:25:23,985\ninstead go through router1.\n\n468\n00:25:23,985 --> 00:25:27,425\nRouter1 must not be\nforwarding that traffic.\n\n469\n00:25:27,425 --> 00:25:32,490\nRouter2s routes make it to router one but\ndon't make it past there.\n\n470\n00:25:33,742 --> 00:25:37,675\nAnd router3, same thing, it makes it\nto router1, doesn't make it past there.\n\n471\n00:25:37,675 --> 00:25:39,320\nRouter1 must be doing something.\n\n472\n00:25:39,320 --> 00:25:40,390\nOr not doing something.\n\n473\n00:25:40,390 --> 00:25:44,490\n>> Yeah, and if we begin to\ntake a look at that here,right?\n\n474\n00:25:44,490 --> 00:25:48,300\nWhat's happening for us, in terms of the\npath of the data that Don has shown us,\n\n475\n00:25:48,300 --> 00:25:50,993\nis that we're going into that interface,\n\n476\n00:25:50,993 --> 00:25:56,910\nof the 192- 168 1.1 from router2 and\n\n477\n00:25:56,910 --> 00:26:00,750\nthen we're telling it to\nalso send it to router3.\n\n478\n00:26:00,750 --> 00:26:05,520\nBut to do so, it also has to\nsend it back out the interface\n\n479\n00:26:05,520 --> 00:26:08,700\nthat has the 192 168 1.1.\n\n480\n00:26:08,700 --> 00:26:13,350\nAnd if you remember back to our distance\nvector protocols when we did that.\n\n481\n00:26:13,350 --> 00:26:17,740\nWe have a problem with sending data\ninto one interface about a route and\n\n482\n00:26:17,740 --> 00:26:21,110\nthen sending it back out that\nsame interface as well and\n\n483\n00:26:21,110 --> 00:26:24,540\nthat is our favorite issue or\nDon's favorite issue you can say.\n\n484\n00:26:24,540 --> 00:26:25,450\nSplit horizon.\n\n485\n00:26:25,450 --> 00:26:26,620\n>> Split horizon yeah.\n\n486\n00:26:26,620 --> 00:26:29,640\nSplit horizon is normally a good thing,\nright?\n\n487\n00:26:29,640 --> 00:26:32,720\nIt stops you from creating\nloops on a network.\n\n488\n00:26:32,720 --> 00:26:37,550\nBut a frame relay multi point\nnetwork like this is one\n\n489\n00:26:37,550 --> 00:26:42,398\nof the extremely rare scenarios where\nsplit horizon causes a problem.\n\n490\n00:26:42,398 --> 00:26:47,710\nI want router3s route to be learned\n\n491\n00:26:47,710 --> 00:26:52,772\non this interface, and\nadvertised back out that interface.\n\n492\n00:26:52,772 --> 00:26:55,650\nAll right?\nAnd that is specifically what split\n\n493\n00:26:55,650 --> 00:26:59,080\nhorizon stops, it says if you\nlearn a route on one interface,\n\n494\n00:26:59,080 --> 00:27:01,370\nthere's no point in telling it back out.\n\n495\n00:27:01,370 --> 00:27:03,210\nLet's refresh that concept.\n\n496\n00:27:03,210 --> 00:27:05,400\nThe analogy I use is a joke.\n\n497\n00:27:05,400 --> 00:27:07,220\nIf Ronnie tells me a joke, and\n\n498\n00:27:07,220 --> 00:27:11,330\nI think it's funny When I tell\nthe same joke back to Ronnie.\n\n499\n00:27:11,330 --> 00:27:12,195\nHe's the one who told me.\n\n500\n00:27:12,195 --> 00:27:13,310\n>> [LAUGH]\n>> It's pointless.\n\n501\n00:27:13,310 --> 00:27:15,250\nThere's no point in telling the same joke,\nbut\n\n502\n00:27:15,250 --> 00:27:17,100\nI'll do it to other people and it's fine.\n\n503\n00:27:17,100 --> 00:27:18,370\nWell, that's how the router is.\n\n504\n00:27:18,370 --> 00:27:20,710\nIt's learning this route from router3.\n\n505\n00:27:20,710 --> 00:27:23,900\nWhy would it want to advertise\nit back to router3 again?\n\n506\n00:27:23,900 --> 00:27:24,730\nIt wouldn't.\n\n507\n00:27:24,730 --> 00:27:25,290\nRight?\n\n508\n00:27:25,290 --> 00:27:27,210\nAnd normally that's the case.\n\n509\n00:27:27,210 --> 00:27:29,470\nBut this is the one exception.\n\n510\n00:27:29,470 --> 00:27:30,690\nWe've got an interface.\n\n511\n00:27:30,690 --> 00:27:35,950\nSerial 1/0.1,\nthat is not a true shared network,\n\n512\n00:27:35,950 --> 00:27:38,470\nlike fast Ethernet where\neverybody gets the multicast.\n\n513\n00:27:38,470 --> 00:27:43,290\nBut it's a circuit or\nchannelized network where I'm receiving\n\n514\n00:27:43,290 --> 00:27:46,200\ncommunication on one channel and\nsending it out another channel.\n\n515\n00:27:46,200 --> 00:27:48,430\nOr a DLCI number, a circuit, right?\n\n516\n00:27:48,430 --> 00:27:52,920\nAnd so I need to advertise out on\nthe same interface I received on.\n\n517\n00:27:52,920 --> 00:27:57,700\nSo this is probably the only\ntime in our careers\n\n518\n00:27:57,700 --> 00:28:02,020\nthat we'll ever need to disable split\nhorizon to make our network happy.\n\n519\n00:28:02,020 --> 00:28:03,910\n>> Yeah\n>> All right, and\n\n520\n00:28:03,910 --> 00:28:07,120\nthis is one where your debug logs,\nthey're not gonna show you anything.\n\n521\n00:28:07,120 --> 00:28:11,080\nYou're not gonna see an error,\nbecause the router is acting like normal.\n\n522\n00:28:11,080 --> 00:28:13,000\nIt's says, this is normal behavior, right?\n\n523\n00:28:13,000 --> 00:28:17,250\nSo this is one of those problems where\neither you know about it or you don't.\n\n524\n00:28:17,250 --> 00:28:19,040\nAnd if you don't know about it,\nyou can't figure it out, and\n\n525\n00:28:19,040 --> 00:28:20,360\nyou gotta call in help, right?\n\n526\n00:28:20,360 --> 00:28:23,110\nSo that's why Cisco calls it out in\nthe objectives, cause it's one of\n\n527\n00:28:23,110 --> 00:28:26,930\nthose really hard ones where a little\nbit of knowledge goes a long way.\n\n528\n00:28:26,930 --> 00:28:28,950\nAnd it's an easy fix, right?\n\n529\n00:28:28,950 --> 00:28:32,800\nWe just jump over to router1,\nand we get into that interface.\n\n530\n00:28:36,437 --> 00:28:42,094\nAnd we say, no ip split-horizon,\nand we can stop there,\n\n531\n00:28:42,094 --> 00:28:46,260\nbut there is a little\nmore you can specify.\n\n532\n00:28:46,260 --> 00:28:48,510\nFor example,\nif you just wanna do it for EIGRP,\n\n533\n00:28:48,510 --> 00:28:50,680\ncause you might be running RIP also.\n\n534\n00:28:50,680 --> 00:28:54,110\nSo you could filter it down there, and\nif you're running more than one autonomous\n\n535\n00:28:54,110 --> 00:28:57,560\nsystem number,\nyou can filter it down to a particular AS.\n\n536\n00:28:57,560 --> 00:28:58,180\nAll right.\n\n537\n00:28:58,180 --> 00:29:01,370\nIn our case, we're just running EIGRP,\nand that's it,\n\n538\n00:29:01,370 --> 00:29:04,440\nand only one AS, so\nI can just leave all that off.\n\n539\n00:29:04,440 --> 00:29:08,160\nAnd say no ip split dash horizon and\n\n540\n00:29:08,160 --> 00:29:12,830\nthat's going to turn that off and now\nwhen I learn a route on that interface.\n\n541\n00:29:12,830 --> 00:29:16,000\nI'll be allowed to advertise it\nback out on that same interface\n\n542\n00:29:16,000 --> 00:29:20,420\nwhich is going to allow me to send\nrouter2s routes to router3 and vise versa.\n\n543\n00:29:20,420 --> 00:29:21,610\nWe should test that out.\n\n544\n00:29:21,610 --> 00:29:23,270\n>> We should test that out.\n\n545\n00:29:23,270 --> 00:29:27,250\nI'm stalling a little bit,\nbecause EIGRP is timer based.\n\n546\n00:29:27,250 --> 00:29:28,560\nSo I'm going to give it just a second.\n\n547\n00:29:28,560 --> 00:29:30,930\nI'm not going to see any\nneighbor relationships,\n\n548\n00:29:30,930 --> 00:29:32,195\nbecause those are already up.\n\n549\n00:29:32,195 --> 00:29:33,670\nRight?\n\n550\n00:29:33,670 --> 00:29:37,510\n>> Now, even though we can disable\nsplit-horizon, about the only other way\n\n551\n00:29:37,510 --> 00:29:41,560\nfor us to fix this would be to just\ncreate two point lengths, right?\n\n552\n00:29:41,560 --> 00:29:42,760\n>> That would fix it yeah.\n\n553\n00:29:42,760 --> 00:29:44,190\nIf there were point to point links on\n\n554\n00:29:44,190 --> 00:29:45,950\ntwo different subnets,\n>> Yeah.\n\n555\n00:29:45,950 --> 00:29:48,000\n>> Then it wouldn't be a problem,\nthey'd have their own interface,\n\n556\n00:29:48,000 --> 00:29:49,000\ntheir own sub interface.\n\n557\n00:29:49,000 --> 00:29:49,690\n>> Yeah.\n\n558\n00:29:49,690 --> 00:29:52,590\n>> But on a multi point like this,\nthey share the same interface.\n\n559\n00:29:52,590 --> 00:29:55,180\n>> And so that's a good thing for\nus to actually remember that.\n\n560\n00:29:55,180 --> 00:29:58,040\nIf we're not allowed to create\nthe idea of point to point links,\n\n561\n00:29:58,040 --> 00:30:02,470\nwe're gonna actually use split\nhorizon to or know split horizon,\n\n562\n00:30:02,470 --> 00:30:06,400\nno IP split -horizon to\nturn off the horizon.\n\n563\n00:30:06,400 --> 00:30:10,580\nBut if they give us the ability to\nreconfigure as two point to point links,\n\n564\n00:30:10,580 --> 00:30:12,090\nthat's another way we\ncan solve this issue.\n\n565\n00:30:13,380 --> 00:30:17,290\n>> Okay, so here's one of\nthe things about EIGRP [LAUGH].\n\n566\n00:30:17,290 --> 00:30:24,420\nIt is an interesting protocol, because\nit is timer based, and trigger based.\n\n567\n00:30:24,420 --> 00:30:28,010\nSo when we advertise\na network out with EIGRP,\n\n568\n00:30:28,010 --> 00:30:32,270\nwe don't advertise it again\nunless a trigger event happens.\n\n569\n00:30:32,270 --> 00:30:34,420\nA change in the network occurs,\n\n570\n00:30:34,420 --> 00:30:36,940\nwhich disable split horizon is\nnot a change in the network.\n\n571\n00:30:36,940 --> 00:30:40,255\nThe networks are not actually changed,\nso the trigger is not firing.\n\n572\n00:30:40,255 --> 00:30:41,330\nRight?\n\n573\n00:30:41,330 --> 00:30:44,855\nThen it's a timer It says hey,\nif nothing happens for\n\n574\n00:30:44,855 --> 00:30:46,040\n30 minutes\n>> Yeah.\n\n575\n00:30:46,040 --> 00:30:48,300\n>> Then I'll go ahead and\nsend a status update.\n\n576\n00:30:48,300 --> 00:30:50,380\nSo I've got two choices here.\n\n577\n00:30:50,380 --> 00:30:53,640\nOne [LAUGH] I can cause a network change,\nwhich would create an outrage right?\n\n578\n00:30:53,640 --> 00:30:55,620\nIn a production outage\nyou wouldn't want that.\n\n579\n00:30:55,620 --> 00:30:57,790\nOr two, I can wait 30 minutes.\n\n580\n00:30:57,790 --> 00:30:59,680\nI'm an impatient man, so\nI don't want that either.\n\n581\n00:30:59,680 --> 00:31:03,245\nSo, I think what I'm going to do,\nis I'm going to reset the interface.\n\n582\n00:31:03,245 --> 00:31:04,790\n>> Okay.\n>> In a production environment\n\n583\n00:31:04,790 --> 00:31:09,050\nthis would cause a network outage,\nbut here, I think it's okay.\n\n584\n00:31:09,050 --> 00:31:12,950\nSo, I'm going to go into,\noh, I'm in the wrong router.\n\n585\n00:31:12,950 --> 00:31:14,050\nI'm going to get on the right router,\n\n586\n00:31:14,050 --> 00:31:16,540\nthat would be a nice catastrophe\nright there, wouldn't it?\n\n587\n00:31:18,720 --> 00:31:20,950\nAnd I'm just gonna shut\ndown that interface, and\n\n588\n00:31:20,950 --> 00:31:22,720\nthat's gonna create a network change.\n\n589\n00:31:22,720 --> 00:31:26,620\nThat's a trigger event that\nthe EIGRP is gonna respond to, and\n\n590\n00:31:26,620 --> 00:31:28,070\nthen when I do a no shutdown.\n\n591\n00:31:29,780 --> 00:31:32,468\nI never did get my status\nmessage letting me know the.\n\n592\n00:31:34,344 --> 00:31:35,430\n>> Yeah.\n\n593\n00:31:35,430 --> 00:31:36,550\n>> I got my status message.\n\n594\n00:31:36,550 --> 00:31:37,590\nOh, cause it's just a subinterface.\n\n595\n00:31:37,590 --> 00:31:39,080\n>> Yeah.\n\n596\n00:31:39,080 --> 00:31:42,150\n>> It's just a sub, doesn't count.\n\n597\n00:31:42,150 --> 00:31:43,010\nThere we go.\n\n598\n00:31:43,010 --> 00:31:44,820\nSo now I got my neighbors coming back up.\n\n599\n00:31:48,780 --> 00:31:50,584\nThere we go,\nlet me give them just second to sync up.\n\n600\n00:31:50,584 --> 00:31:56,359\nYeah he appears really fast, though\nonce a trigger event occurs it is very,\n\n601\n00:31:56,359 --> 00:32:01,697\nvery fast and what I'm hoping to see\nIs that we get our extra routes in.\n\n602\n00:32:01,697 --> 00:32:02,938\n>> Nope, not yet.\n\n603\n00:32:02,938 --> 00:32:03,720\n>> Yeah, not showing yet.\n\n604\n00:32:03,720 --> 00:32:05,624\nWe might have to wait this one out,\n\n605\n00:32:05,624 --> 00:32:10,168\nwhich I guess we're kind of at our break\ntime anyway, so it's not such a big deal.\n\n606\n00:32:14,585 --> 00:32:20,085\nYeah, I haven't even learned\n.3 here on the this router2.\n\n607\n00:32:20,085 --> 00:32:21,043\nRouter 1s got it.\n\n608\n00:32:24,127 --> 00:32:25,960\nYep.\n\n609\n00:32:25,960 --> 00:32:27,501\nAll right.\n\n610\n00:32:27,501 --> 00:32:28,070\nLet's do this.\n\n611\n00:32:28,070 --> 00:32:31,330\nLet's stop for our break, and\nwe'll let it sit, and sort itself out.\n\n612\n00:32:31,330 --> 00:32:33,090\nEIGRP's really good about that,\n\n613\n00:32:33,090 --> 00:32:35,780\nsorting itself out if you\nhave more patience than I do.\n\n614\n00:32:35,780 --> 00:32:37,030\nSo we'll give it a moment.\n\n615\n00:32:37,030 --> 00:32:38,520\nBut disabling split horizon there,\n\n616\n00:32:38,520 --> 00:32:42,390\nthat's going to allow that advertisement\nto pass through those interfaces.\n\n617\n00:32:42,390 --> 00:32:43,540\nThat should solve our problem and\n\n618\n00:32:43,540 --> 00:32:45,010\neverything should be happy after this,\nright?\n\n619\n00:32:45,010 --> 00:32:49,330\nSo, we'll give that a minute and and\ncheck back after the break, right?\n\n620\n00:32:49,330 --> 00:32:50,860\n>> Sounds good.\n>> All right, ladies and gentlemen,\n\n621\n00:32:50,860 --> 00:32:53,880\nstay tuned, when we get back,\nwe'll finish up the IGRP and\n\n622\n00:32:53,880 --> 00:32:55,490\nmove into some of our other\ntrouble shooting topics\n\n623\n00:32:55,490 --> 00:33:03,169\n[MUSIC]\n\n624\n00:33:03,169 --> 00:33:04,790\nAll right, welcome back everybody.\n\n625\n00:33:04,790 --> 00:33:06,465\nSo, I waited patiently for.\n\n626\n00:33:06,465 --> 00:33:07,990\n>> [LAUGH]\n>> A few moments on the routers but\n\n627\n00:33:07,990 --> 00:33:09,960\nmy patience is somewhat limited.\n\n628\n00:33:09,960 --> 00:33:13,450\nAnd so Ronnie had a suggestion that\nactually worked out pretty well.\n\n629\n00:33:13,450 --> 00:33:17,410\nSo what we did is on router 1,\nI modified the command that I issued and\n\n630\n00:33:17,410 --> 00:33:20,890\nyou can see here,\ninstead of just doing no ip split horizon.\n\n631\n00:33:20,890 --> 00:33:25,910\nWe went ahead and added the specific\nEIGRP autonomous system to it so\n\n632\n00:33:25,910 --> 00:33:29,260\nno IP split dash horizon EIGRP 1.\n\n633\n00:33:29,260 --> 00:33:32,060\nOnce we did that,\nit immediately reset, and\n\n634\n00:33:32,060 --> 00:33:33,480\nnow we're getting\nthe behavior that we wanted.\n\n635\n00:33:33,480 --> 00:33:36,760\nSo for some reason it wasn't happy\nwith turning off split horizion just\n\n636\n00:33:36,760 --> 00:33:38,660\non the interface itself, but\n\n637\n00:33:38,660 --> 00:33:43,830\nwe did have to call out that\nEIGRP autonomous system there.\n\n638\n00:33:43,830 --> 00:33:48,490\nSo let me add that to our little\nnotes here of things that we've done.\n\n639\n00:33:48,490 --> 00:33:52,490\nOnce that was done, now it's allowing\nthe routes to be advertised in and\n\n640\n00:33:52,490 --> 00:33:53,260\nout the interface.\n\n641\n00:33:53,260 --> 00:33:57,110\nSo I can check out like router 2,\nand if I look at router twos routes,\n\n642\n00:33:57,110 --> 00:34:02,160\nI do have the one, two, three and\nfour networks are present.\n\n643\n00:34:02,160 --> 00:34:06,793\nAnd if I look at router3 Whoops.\n\n644\n00:34:06,793 --> 00:34:07,970\nThere.\n\n645\n00:34:07,970 --> 00:34:10,500\nI've got the one, two, three,\nand four networks present.\n\n646\n00:34:10,500 --> 00:34:13,520\nSo now, our routing tables are complete.\n\n647\n00:34:13,520 --> 00:34:18,710\nSo that's an important thing, and I like\nto highlight this troubleshooting one,\n\n648\n00:34:18,710 --> 00:34:23,330\nbecause it's one of the few\nthat you get no error message.\n\n649\n00:34:23,330 --> 00:34:27,080\nYou get no warnings, there's no\ndebug output for it or whatever.\n\n650\n00:34:27,080 --> 00:34:29,950\nYou just need to look at\nyour routing tables and\n\n651\n00:34:29,950 --> 00:34:32,260\nrecognize that you're missing routes,\nright?.\n\n652\n00:34:32,260 --> 00:34:36,000\nYour end users can complain about it,\nI can't reach these machines, but\n\n653\n00:34:36,000 --> 00:34:40,070\nyou should be able to spot it sooner\nby comparing the routing tables.\n\n654\n00:34:40,070 --> 00:34:45,560\nCisco calls that out in the objectives,\nlet me pull the objectives back up.\n\n655\n00:34:45,560 --> 00:34:48,630\nIn the objectives,\nif you look at objective 4.4.\n\n656\n00:34:48,630 --> 00:34:51,960\nYou've got routing table is correct.\n\n657\n00:34:51,960 --> 00:34:52,470\nAll right.\n\n658\n00:34:52,470 --> 00:34:55,240\nWe make the assumption that the routers\nknow what they're doing and\n\n659\n00:34:55,240 --> 00:34:57,580\nthat they're gonna have the right\nroutes that are in there.\n\n660\n00:34:57,580 --> 00:35:01,640\nBut occasionally, you can end up with the\nwrong routes in place or missing routes.\n\n661\n00:35:01,640 --> 00:35:04,670\nAnd when you get the wrong route,\nit's normally not that it's a bad route,\n\n662\n00:35:04,670 --> 00:35:05,430\nthat it won't get you there.\n\n663\n00:35:05,430 --> 00:35:09,440\nIt'll normally get you to the destination,\nbut it's what we call suboptimal routing.\n\n664\n00:35:09,440 --> 00:35:11,540\nIt picks a bad route for some reason.\n\n665\n00:35:11,540 --> 00:35:14,800\nBut what we just saw was\na route missing entirely,\n\n666\n00:35:14,800 --> 00:35:16,460\nand those are the hard ones to spot.\n\n667\n00:35:16,460 --> 00:35:17,390\n>> Yeah.\n\n668\n00:35:17,390 --> 00:35:18,930\nThis is a really good reminder for\n\n669\n00:35:18,930 --> 00:35:22,780\nus here because remember that\nwhen you're on a timed exam.\n\n670\n00:35:22,780 --> 00:35:26,970\nIt's very easy to overlook just\nthe simple things such as show IP route\n\n671\n00:35:26,970 --> 00:35:30,180\nthat could reveal to you\njust a problem like this.\n\n672\n00:35:30,180 --> 00:35:32,020\nEverything is set up correctly.\n\n673\n00:35:32,020 --> 00:35:34,250\nBut you're still missing routes.\n\n674\n00:35:34,250 --> 00:35:35,440\nSo take a look at that.\n\n675\n00:35:35,440 --> 00:35:38,720\nRemember, if your router doesn't\nshow that route to that network,\n\n676\n00:35:38,720 --> 00:35:41,630\nyou're probably not going to be\nable to get there very easily.\n\n677\n00:35:41,630 --> 00:35:43,670\n>> Now,\nI can show you a neat little trick,\n\n678\n00:35:43,670 --> 00:35:46,030\nthat I use in a production environment.\n\n679\n00:35:46,030 --> 00:35:47,540\nIt's not going to work on the test.\n\n680\n00:35:47,540 --> 00:35:52,530\nBut if you're ever unsure about\nyour routing table or whatever.\n\n681\n00:35:52,530 --> 00:35:59,000\nWhat I usually do is, I'll write\na little script file or whatever, and\n\n682\n00:35:59,000 --> 00:36:04,190\nI'll just put a bunch of\nthings in there like this.\n\n683\n00:36:05,270 --> 00:36:06,920\nShow IP route 1.0.0.0, right?\n\n684\n00:36:06,920 --> 00:36:08,200\nShow IP route 2.0.0.0.\n\n685\n00:36:08,200 --> 00:36:08,800\nAnd so on.\n\n686\n00:36:08,800 --> 00:36:13,780\nSo, I'm basically putting in all of the\nnetworks that are in my company, right?\n\n687\n00:36:13,780 --> 00:36:18,320\nSo, whatever company I work for, I just\nfigure out what all my networks are and\n\n688\n00:36:18,320 --> 00:36:21,290\nI write it out like this.\n\n689\n00:36:21,290 --> 00:36:22,100\nOkay?\n\n690\n00:36:22,100 --> 00:36:26,210\nAnd then once you've got it written\nlike that, you can take that and\n\n691\n00:36:26,210 --> 00:36:29,740\non any router in your environment you\njust go to it and paste that in there.\n\n692\n00:36:29,740 --> 00:36:30,340\nAll right?\n\n693\n00:36:30,340 --> 00:36:33,850\nAnd so it's gonna run through and\ndo all these show IP routes.\n\n694\n00:36:33,850 --> 00:36:39,890\nAnd if you specify one that doesn't exist,\nlike that,\n\n695\n00:36:39,890 --> 00:36:44,550\nall right?\n\n696\n00:36:44,550 --> 00:36:47,140\nWhen you run it,\nyou'll see this error right there.\n\n697\n00:36:47,140 --> 00:36:49,130\nNetwork not in table.\n\n698\n00:36:49,130 --> 00:36:50,530\nAnd so you can take this little script and\n\n699\n00:36:50,530 --> 00:36:54,260\njust run it on all of your routers and\nlook for that warning message.\n\n700\n00:36:54,260 --> 00:36:56,170\nAnd if you see network not in table,\n\n701\n00:36:56,170 --> 00:36:58,850\nnow we know there's something\nmissing from that routing table.\n\n702\n00:36:58,850 --> 00:37:01,480\nSo as your network routing\ntables get bigger and stuff,\n\n703\n00:37:01,480 --> 00:37:03,460\nit can be hard to keep\ntrack of all of that.\n\n704\n00:37:03,460 --> 00:37:06,430\nAnd so it's kind of nice\nto automate some of that.\n\n705\n00:37:06,430 --> 00:37:06,970\n>> That's a neat tip.\n\n706\n00:37:06,970 --> 00:37:08,380\n>> Yeah.\nSo, it's not gonna help you on\n\n707\n00:37:08,380 --> 00:37:09,860\nthe exam, right.\n\n708\n00:37:09,860 --> 00:37:11,110\nTake more time than it's worth.\n\n709\n00:37:11,110 --> 00:37:13,820\nBut in real life,\nit's a simple way to quickly test things.\n\n710\n00:37:13,820 --> 00:37:15,110\nThere's other ways to do it.\n\n711\n00:37:15,110 --> 00:37:18,530\nI know I've seen some pretty fancy\nsoftware that will use like SNMP\n\n712\n00:37:18,530 --> 00:37:21,410\nto poll your routing table and\ncorrelate it and stuff.\n\n713\n00:37:21,410 --> 00:37:25,170\nBut if everything's configured properly,\nshouldn't be a problem.\n\n714\n00:37:25,170 --> 00:37:28,840\nAll your routes should be present.\n\n715\n00:37:28,840 --> 00:37:29,460\nAll right.\nSo\n\n716\n00:37:29,460 --> 00:37:34,150\nat the end of the day on router1 we\njust change that command a little bit.\n\n717\n00:37:34,150 --> 00:37:35,710\nLet me bring that back up.\n\n718\n00:37:35,710 --> 00:37:38,690\nAnd you'll see like here's where I ran\nthe command originally turning off on\n\n719\n00:37:38,690 --> 00:37:39,700\nthe interface.\n\n720\n00:37:39,700 --> 00:37:41,644\nWe just needed to go a little\nstep further there and\n\n721\n00:37:41,644 --> 00:37:44,210\nadd that EIGRP autonomous system\nnumber and that knocked it out.\n\n722\n00:37:46,610 --> 00:37:47,189\nAll right.\nSo\n\n723\n00:37:47,189 --> 00:37:50,808\nas far as the EIGRP, those are really\nthe two big things that we need to know.\n\n724\n00:37:50,808 --> 00:37:53,653\nIf mismatched AS numbers and\nsplit horizon can get in there and\n\n725\n00:37:53,653 --> 00:37:55,470\ncause problems on frame relay.\n\n726\n00:37:55,470 --> 00:37:57,944\nSo just be aware of those if\nthey turn up on the exam.\n\n727\n00:37:59,435 --> 00:38:03,435\n>> We also have one other issue that\nwe need to take a look at in the EIGRP,\n\n728\n00:38:03,435 --> 00:38:05,665\nwhich is the idea of load balancing,\nright?\n\n729\n00:38:05,665 --> 00:38:09,895\nSo for us in terms of load balancing,\nwe know that OSPF will do load balancing\n\n730\n00:38:09,895 --> 00:38:14,605\nacross multiple routers, but it does what\nis called equal cost load balancing.\n\n731\n00:38:14,605 --> 00:38:17,815\nWhere as EIGRP by default will do that,\nbut\n\n732\n00:38:17,815 --> 00:38:20,765\nwe can't also do the idea\nof unequal cost balancing.\n\n733\n00:38:20,765 --> 00:38:25,520\nNow we already kind of gone over\nthat in a previous episode, but\n\n734\n00:38:25,520 --> 00:38:27,185\nis there any other information\nwe need to add in there?\n\n735\n00:38:27,185 --> 00:38:31,350\n>> Well, one of the big problems\nwe have with load balancing\n\n736\n00:38:31,350 --> 00:38:35,365\nin IGRP is they're certain\nscenarios that you can fall into.\n\n737\n00:38:35,365 --> 00:38:39,425\nWhere one of the routes doesn't make\nit in to your routing table, and so\n\n738\n00:38:39,425 --> 00:38:40,695\nit doesn't load that much, right?\n\n739\n00:38:40,695 --> 00:38:44,275\nYou adjust your variants or whatever,\nand your trying to load balance,\n\n740\n00:38:44,275 --> 00:38:46,325\nbut the other app just doesn't show up.\n\n741\n00:38:46,325 --> 00:38:50,015\nAnd it's a complex problem,\na hard one to recreate, but\n\n742\n00:38:50,015 --> 00:38:53,375\nwe did a really good job\nof it in the EIGRP episode.\n\n743\n00:38:53,375 --> 00:38:55,420\nSo if you haven't watched that,\njump over to it.\n\n744\n00:38:55,420 --> 00:39:01,260\nBecause there is a scenario where you\ncan learn a route that has an advertised\n\n745\n00:39:01,260 --> 00:39:05,890\ndistance that is higher than the feasible\ndistance of your successor route.\n\n746\n00:39:05,890 --> 00:39:06,550\nAll right?\n\n747\n00:39:06,550 --> 00:39:09,710\nIt sounds confusing cuz it kinda is but\nyou're basically learning a route\n\n748\n00:39:09,710 --> 00:39:13,420\nwhose advertised distance, the distance\nthe other router is telling us is worse.\n\n749\n00:39:13,420 --> 00:39:15,120\nThen the route that we've already picked,\n\n750\n00:39:15,120 --> 00:39:19,050\nwhich means we're more than likely\nlearning our own route back again.\n\n751\n00:39:19,050 --> 00:39:19,690\nOkay?\n\n752\n00:39:19,690 --> 00:39:22,540\nAnd if that's the case,\nwe don't wanna create a loop.\n\n753\n00:39:22,540 --> 00:39:24,000\nThe IGRP blocks it.\n\n754\n00:39:24,000 --> 00:39:25,190\nIt's not gonna make it\ninto the routing table.\n\n755\n00:39:25,190 --> 00:39:25,985\nIt's not gonna load.\n\n756\n00:39:25,985 --> 00:39:26,570\nThat's a problem.\n\n757\n00:39:26,570 --> 00:39:28,925\nRight?\nAnd the way you can fix it,\n\n758\n00:39:28,925 --> 00:39:31,475\nif it's not actually a loop,\nis you've gotta go in and\n\n759\n00:39:31,475 --> 00:39:35,645\nadjust the metric of that route to make it\na little more friendly for your system.\n\n760\n00:39:35,645 --> 00:39:38,145\nAnd so we showed an example\nof that in the EIGRP episode.\n\n761\n00:39:38,145 --> 00:39:38,850\n>> Right.\n\n762\n00:39:38,850 --> 00:39:42,040\n>> I don't want to rehash it here,\nbecause it takes awhile to set it up, and\n\n763\n00:39:42,040 --> 00:39:43,480\nwe did have a great example there.\n\n764\n00:39:43,480 --> 00:39:47,005\nSo if you want to see that in action,\njust check out the other episode.\n\n765\n00:39:47,005 --> 00:39:50,840\nBut again it is just a matter of\nmanipulating that EIGRP metric,\n\n766\n00:39:50,840 --> 00:39:54,398\nto make that route that we're\nlearning not as attractive.\n\n767\n00:39:54,398 --> 00:39:58,450\nOr to make the route that we're\nadvertising less attractive, so\n\n768\n00:39:58,450 --> 00:39:59,416\nthey match up.\n\n769\n00:39:59,416 --> 00:40:03,012\nSo make sure you do take a look at and\nremember the variance command that Don\n\n770\n00:40:03,012 --> 00:40:06,956\njust mentioned here, that's the key to\nbeing able to turn on and use unequal cost\n\n771\n00:40:06,956 --> 00:40:11,320\nload balancing, which is something\nyou'll probably see on the exam too.\n\n772\n00:40:11,320 --> 00:40:12,670\n>> Yeah.\n\n773\n00:40:12,670 --> 00:40:15,890\nAll right, so\nthat's basically it for EIGRP.\n\n774\n00:40:15,890 --> 00:40:20,180\nWe do have a few other general concepts\nI want to make sure we cover, Cisco,\n\n775\n00:40:20,180 --> 00:40:24,060\nthey do get a little vague\non some of the objectives.\n\n776\n00:40:24,060 --> 00:40:28,530\nIf we take a look at objective four here,\nyou'll see troubleshooting resolve\n\n777\n00:40:28,530 --> 00:40:31,885\nrouting issues and that's kind of what\nwe're been doing for two episodes now.\n\n778\n00:40:31,885 --> 00:40:34,640\n>> Yeah.\n>> And they call out a few things,\n\n779\n00:40:34,640 --> 00:40:37,430\nthe very first thing they called is\nverifying that routing is enabled.\n\n780\n00:40:37,430 --> 00:40:42,050\nNow on a Cisco router,\nthat's not a big deal, right?\n\n781\n00:40:42,050 --> 00:40:44,310\nRouting is enabled by default.\n\n782\n00:40:44,310 --> 00:40:47,190\nBut on a Cisco switch,\nif you have a Layer 3 switch,\n\n783\n00:40:47,190 --> 00:40:50,970\nrouting is not enabled by default and\nyou may need to turn it on.\n\n784\n00:40:50,970 --> 00:40:53,700\nNow, when I say routing,\nI'm talking about IPv4 routing.\n\n785\n00:40:53,700 --> 00:40:55,080\nIPv6 routing's a different story.\n\n786\n00:40:55,080 --> 00:40:59,340\nIPv6 routing is turned off\nby default on all of them.\n\n787\n00:40:59,340 --> 00:41:03,170\nSo if we're going to be doing IPv6 routing\nwe need to make sure that's turned on.\n\n788\n00:41:03,170 --> 00:41:07,440\nAnd fortunately that's a really simple\ncommand and a really easy thing to check.\n\n789\n00:41:07,440 --> 00:41:11,950\nBecause it's a default on a Cisco router,\nif we do a show run,\n\n790\n00:41:11,950 --> 00:41:16,480\nright, when we do a show run we're\nnot going to see the commands\n\n791\n00:41:16,480 --> 00:41:19,732\nthat let us know that routing is\non because it is on by default.\n\n792\n00:41:19,732 --> 00:41:20,670\nAll right.\n\n793\n00:41:20,670 --> 00:41:24,620\nBut one easy way to tell,\nif you do show ip route, and\n\n794\n00:41:24,620 --> 00:41:29,100\nyou get no routes back, right, that's a\ngood way to know that routing is disabled.\n\n795\n00:41:29,100 --> 00:41:31,710\nThere's no routes because\nrouting is disabled.\n\n796\n00:41:31,710 --> 00:41:35,660\nOr you might just have a default route and\nthat's it, no other routes.\n\n797\n00:41:35,660 --> 00:41:38,190\nBut the easier way is just go in and\nrun the command, right.\n\n798\n00:41:38,190 --> 00:41:43,300\nSo to turn on routing, just IPv4 routing,\nit's the IP routing command.\n\n799\n00:41:43,300 --> 00:41:46,720\nOn a router, it's the default,\nit doesn't show up, so it's not there,\n\n800\n00:41:46,720 --> 00:41:47,840\nit's not a big deal.\n\n801\n00:41:47,840 --> 00:41:50,290\nOn a switch it's normally\nturned off by default.\n\n802\n00:41:50,290 --> 00:41:53,602\nSo IP routing needs to be one of\nthe first commands that you run, right.\n\n803\n00:41:53,602 --> 00:41:58,617\nAnd with IPv6 the command is a little\nbit different in that it's IPv6\n\n804\n00:41:58,617 --> 00:42:03,547\nunicast-routing, and\nthat's not a default on your Cisco router,\n\n805\n00:42:03,547 --> 00:42:06,018\nso that will show up in the config.\n\n806\n00:42:09,852 --> 00:42:11,900\nSo if I pull out my running config here,\nand I'm just filtering it.\n\n807\n00:42:11,900 --> 00:42:15,960\nSee how the IPv6 unicast-routing\ncommand made it into my config?\n\n808\n00:42:15,960 --> 00:42:17,870\nBut the IP routing command didn't.\n\n809\n00:42:17,870 --> 00:42:18,780\nJust because it's the default.\n\n810\n00:42:19,852 --> 00:42:23,980\nAll right, so\nlet me add those to our little note files.\n\n811\n00:42:23,980 --> 00:42:26,660\n>> Yeah the IPv6 unicast routing for us,\n\n812\n00:42:26,660 --> 00:42:29,590\nespecially since we're moving\ntowards IPv6 networks.\n\n813\n00:42:29,590 --> 00:42:32,190\nProbably one of the more\nimportant commands, or\n\n814\n00:42:32,190 --> 00:42:38,000\nmost important command that you can do,\nanything with IPv6 and IPv6 addresses.\n\n815\n00:42:38,000 --> 00:42:40,230\nUsually they require this\nto be your first command or\n\n816\n00:42:40,230 --> 00:42:42,060\nyou're not gonna actually\ndo anything else.\n\n817\n00:42:42,060 --> 00:42:45,280\nSo make sure you actually remember\nthat if you're having to verify\n\n818\n00:42:45,280 --> 00:42:47,208\nespecially IPv6 networks on the exam.\n\n819\n00:42:47,208 --> 00:42:48,045\n>> Yeah.\n\n820\n00:42:48,045 --> 00:42:53,780\nAll right the other things they mention,\nverify the routing table, is correct.\n\n821\n00:42:53,780 --> 00:42:56,210\nAnd that is what we just did in EIGRP.\n\n822\n00:42:56,210 --> 00:42:59,740\nSometimes you have a situation where\nyou don't get an error message,\n\n823\n00:42:59,740 --> 00:43:02,430\nyou don't get anything that looks unusual,\n\n824\n00:43:02,430 --> 00:43:06,090\nthe only symptom is that certain routes\nare missing from the routing table.\n\n825\n00:43:06,090 --> 00:43:08,470\nSo you've gotta visually\ninspect that routing table and\n\n826\n00:43:08,470 --> 00:43:11,730\nsay, is the best route\nmaking it into that table?\n\n827\n00:43:11,730 --> 00:43:13,870\nAre all the routes there?\n\n828\n00:43:13,870 --> 00:43:17,180\nLook at the routing table on two\ndifferent devices, and compare them.\n\n829\n00:43:17,180 --> 00:43:18,660\nAre they going the same direction?\n\n830\n00:43:18,660 --> 00:43:20,330\nAre they going to the same destination.\n\n831\n00:43:20,330 --> 00:43:25,310\nSo sometimes, there's just no substitute\nfor visual inspection and that happens.\n\n832\n00:43:25,310 --> 00:43:30,227\nIn a network, like on the CCNA exam,\nthey're very small networks, right?\n\n833\n00:43:30,227 --> 00:43:31,810\nThree or four devices.\n\n834\n00:43:31,810 --> 00:43:34,170\nAnd so\nit's very easy to do visual inspection.\n\n835\n00:43:34,170 --> 00:43:35,520\nAnd so they like to do that.\n\n836\n00:43:35,520 --> 00:43:39,240\nIn real life land, if you've got\n1,000 routers and 20,000 routes,\n\n837\n00:43:39,240 --> 00:43:41,390\nvisual inspection is not possible anymore.\n\n838\n00:43:41,390 --> 00:43:43,810\nAnd so\nthere it becomes a lot more complex and\n\n839\n00:43:43,810 --> 00:43:46,810\nyou'll see ways to troubleshoot\nthat in the CCNP shows.\n\n840\n00:43:46,810 --> 00:43:50,880\nBut for now just be aware that you\nmay need to compare those tables.\n\n841\n00:43:50,880 --> 00:43:52,190\nThat's one of the best\nways to verify that.\n\n842\n00:43:52,190 --> 00:43:52,690\n>> Right.\n\n843\n00:43:54,520 --> 00:43:57,870\n>> And then the last one they mentioned\nthere is that correct path selection.\n\n844\n00:43:57,870 --> 00:44:00,717\nJust because a route makes it into\nthe routing table doesn't necessarily\n\n845\n00:44:00,717 --> 00:44:01,890\nmean it's the best one.\n\n846\n00:44:01,890 --> 00:44:02,440\nYou know.\n\n847\n00:44:02,440 --> 00:44:03,050\nYou look at it.\n\n848\n00:44:03,050 --> 00:44:03,960\nUse your own logic.\n\n849\n00:44:03,960 --> 00:44:08,010\nIf you know that there's a path that takes\ngigabit links and there's another path\n\n850\n00:44:08,010 --> 00:44:11,690\nthat takes ten megabit links, you should\nbe going over that giga link, right?\n\n851\n00:44:11,690 --> 00:44:13,310\nDid it pick the right one?\n\n852\n00:44:13,310 --> 00:44:15,380\nSometimes it's the fault\nof the routing protocol.\n\n853\n00:44:15,380 --> 00:44:17,320\nLike RIP that just looks at hop count.\n\n854\n00:44:17,320 --> 00:44:18,320\nIt doesn't look at bandwidth.\n\n855\n00:44:18,320 --> 00:44:18,860\nRight?\n\n856\n00:44:18,860 --> 00:44:21,540\nBut other times it might\nbe more complex issues.\n\n857\n00:44:21,540 --> 00:44:25,240\nLike EIGRP in its advertised distance\n\n858\n00:44:25,240 --> 00:44:27,240\nbeing higher than the feasible\ndistance of the successor.\n\n859\n00:44:27,240 --> 00:44:28,120\nThat kind of thing.\n\n860\n00:44:28,120 --> 00:44:33,400\nWhere rules inside of a system block\nit from picking an otherwise good path.\n\n861\n00:44:33,400 --> 00:44:35,720\nAnd in those scenarios,\nyou've gotta use something to override it.\n\n862\n00:44:35,720 --> 00:44:38,000\nTypically like modifying the metric or\nwhatever.\n\n863\n00:44:38,000 --> 00:44:40,200\n>> And actually, Don,\nthat's a great reminder for\n\n864\n00:44:40,200 --> 00:44:44,500\nus to make sure that we learn\nthe advertised distance numbers.\n\n865\n00:44:44,500 --> 00:44:47,420\nIf you don't have those down before you\ngo into the exam, it's gonna be very\n\n866\n00:44:47,420 --> 00:44:50,190\ndifficult if you're showing a couple\nof different routes here and\n\n867\n00:44:50,190 --> 00:44:54,230\nthey ask you to pick which one, just\nagain, from different selections here.\n\n868\n00:44:54,230 --> 00:44:56,760\nSo make sure you do learn those\nautonomous system numbers.\n\n869\n00:44:56,760 --> 00:44:59,300\nThe correct path selection,\nremember for us?\n\n870\n00:44:59,300 --> 00:45:02,230\nIf you have two different\nrouting protocols going on, and\n\n871\n00:45:02,230 --> 00:45:05,210\nyou're actually wondering which route's\ngonna get entered into the routing table,\n\n872\n00:45:05,210 --> 00:45:08,550\nthe lower the administrative distance\nis gonna be the one that gets there.\n\n873\n00:45:08,550 --> 00:45:10,760\nAnd then it's gonna take a look\nat the metric after that.\n\n874\n00:45:12,570 --> 00:45:14,660\n>> All right, so good stuff there.\n\n875\n00:45:14,660 --> 00:45:16,400\nReally this Objective 4,\n\n876\n00:45:16,400 --> 00:45:19,380\nit's really talking about what we\ndo in all of these sections here.\n\n877\n00:45:19,380 --> 00:45:23,700\nSo you can kinda look at it, well,\nwhat will end up being three shows,\n\n878\n00:45:23,700 --> 00:45:26,760\nto kinda see different tips\non each of those but yeah.\n\n879\n00:45:26,760 --> 00:45:30,500\nJust keep in mind, the routers do\ntheir best, but at the end of the day,\n\n880\n00:45:30,500 --> 00:45:33,490\nthey are just running formulas, and\nsometimes the formulas don't match up with\n\n881\n00:45:33,490 --> 00:45:37,600\nwhat is absolutely the best, and so you\nmay need to get involved in some cases.\n\n882\n00:45:37,600 --> 00:45:40,540\nAnd you can always use static\nroutes to override a dynamic\n\n883\n00:45:40,540 --> 00:45:41,522\nprotocol if you need to.\n\n884\n00:45:41,522 --> 00:45:42,270\n>> That's right.\n\n885\n00:45:42,270 --> 00:45:45,810\n>> You want to avoid that if you can cuz\nyou start to lose things like redundancy\n\n886\n00:45:45,810 --> 00:45:50,242\nand fast fail over and\nstuff, but it can be done.\n\n887\n00:45:50,242 --> 00:45:55,590\nAll right, the other thing that we need\nto tackle this episode is net flow right?\n\n888\n00:45:55,590 --> 00:45:56,320\n>> Right.\n\n889\n00:45:56,320 --> 00:46:01,970\n>> So there is a technology out there\ncalled NetFlow that really went\n\n890\n00:46:01,970 --> 00:46:04,390\nunspoken or whatever for a long time.\n\n891\n00:46:04,390 --> 00:46:07,288\nBut Cisco has started promoting it heavily\nin the last couple of years cuz it's very,\n\n892\n00:46:07,288 --> 00:46:08,290\nvery powerful.\n\n893\n00:46:08,290 --> 00:46:10,230\nAnd we've actually had two objectives.\n\n894\n00:46:10,230 --> 00:46:13,820\nThere's objective 4.2 is\nutilize NetFlow data and 4.9,\n\n895\n00:46:13,820 --> 00:46:16,270\nwhich is monitor NetFlow statistics.\n\n896\n00:46:16,270 --> 00:46:18,150\nIt's kinda funny cuz they're\nreally backwards, right.\n\n897\n00:46:18,150 --> 00:46:20,600\nYou gotta be able to get\nthe statistics in order to use them,\n\n898\n00:46:20,600 --> 00:46:25,220\nso what I want to do is I want to\nshow you guys what NetFlow is,\n\n899\n00:46:25,220 --> 00:46:28,560\nhow it works, how we can use it for\ntroubleshooting and all that stuff.\n\n900\n00:46:28,560 --> 00:46:29,730\nBut let's do this.\n\n901\n00:46:29,730 --> 00:46:31,475\nLet's stop and take a break.\n\n902\n00:46:31,475 --> 00:46:33,000\n>> Okay.\n>> And when we get back,\n\n903\n00:46:33,000 --> 00:46:34,970\nwe'll tackle NetFlow and\n\n904\n00:46:34,970 --> 00:46:37,760\nthen we'll be pretty well set\nto wrap up the episode I think.\n\n905\n00:46:37,760 --> 00:46:38,550\n>> Sounds good.\n\n906\n00:46:38,550 --> 00:46:39,650\n>> All right so stay tuned.\n\n907\n00:46:39,650 --> 00:46:41,445\nWhen we get back, NetFlow.\n\n908\n00:46:41,445 --> 00:46:45,696\n[SOUND] All right,\n\n909\n00:46:45,696 --> 00:46:51,935\nwelcome back everybody.\n\n910\n00:46:51,935 --> 00:46:55,910\nSo for our final segment I want to\ntackle a technology called NetFlow.\n\n911\n00:46:55,910 --> 00:46:58,900\nAnd it's a really neat one, a lot of\nyou guys might not have heard of it.\n\n912\n00:46:58,900 --> 00:47:00,970\nAnd so\nI wanna talk about what it is first and\n\n913\n00:47:00,970 --> 00:47:02,599\nthen how we can use it when\nwe do troubleshooting.\n\n914\n00:47:03,920 --> 00:47:09,220\nSo NetFlow is a service that is built\ninto almost every Cisco router and\n\n915\n00:47:09,220 --> 00:47:10,430\nfirewall today.\n\n916\n00:47:10,430 --> 00:47:13,950\nAnd some of the switches are getting it,\nnot all of them, but some of them are.\n\n917\n00:47:13,950 --> 00:47:19,720\nAnd what it's designed to do is to kind\nof replace the need for network sniffers.\n\n918\n00:47:19,720 --> 00:47:20,792\nLet me give you a scenario.\n\n919\n00:47:20,792 --> 00:47:23,220\nAll right?\nThis used to happen in our old building.\n\n920\n00:47:23,220 --> 00:47:26,790\nIn our old building,\nwe couldn't get fiber Internet in there.\n\n921\n00:47:26,790 --> 00:47:30,160\nAnd so we just had two T1 lines,\nwe had 3 megabits of bandwidth,\n\n922\n00:47:30,160 --> 00:47:32,620\nwhich at the time, seemed like a lot.\n\n923\n00:47:32,620 --> 00:47:34,120\nBut nowadays we laugh at that.\n\n924\n00:47:34,120 --> 00:47:36,030\nThree megs, what are you, in the boonies?\n\n925\n00:47:36,030 --> 00:47:38,660\nBut, anyhow we only have three megs.\n\n926\n00:47:38,660 --> 00:47:40,570\nAnd every now and\nthen the line would get overwhelmed.\n\n927\n00:47:40,570 --> 00:47:43,750\nWe would generate so\nmuch traffic that the line would die out.\n\n928\n00:47:43,750 --> 00:47:46,923\nAnd what I would do is I take my laptop,\nand I would fire up a sniffer,\n\n929\n00:47:46,923 --> 00:47:47,778\nlike Wireshark.\n\n930\n00:47:47,778 --> 00:47:52,321\nAnd I would plug into the switch and\nI would mirror the port, do a span,\n\n931\n00:47:52,321 --> 00:47:57,249\na switchport analyzer, spanport of\nthe port the router was plugged into And\n\n932\n00:47:57,249 --> 00:48:00,329\nthen I would record traffic for\na few minutes and\n\n933\n00:48:00,329 --> 00:48:04,550\nthen look at it to see who was\nconsuming all the bandwidth.\n\n934\n00:48:04,550 --> 00:48:05,580\nWell, that works.\n\n935\n00:48:05,580 --> 00:48:06,250\nYou can do that.\n\n936\n00:48:06,250 --> 00:48:08,080\nThat is an absolute viable method.\n\n937\n00:48:08,080 --> 00:48:13,040\nThe problem with doing that, though,\nis I'm getting the actual traffic.\n\n938\n00:48:13,040 --> 00:48:17,880\nSo, if ten gigs of traffic was generated,\nmy sniffer capture file is\n\n939\n00:48:17,880 --> 00:48:22,740\nten gigs in size so you can't just\nleave a sniffer running 24 hours a day\n\n940\n00:48:22,740 --> 00:48:25,640\nbecause it is just too much\ninformation builds up and up and up.\n\n941\n00:48:25,640 --> 00:48:28,240\nAnd if you have a RAM you\nhave it like overwrite spin.\n\n942\n00:48:28,240 --> 00:48:31,540\nIt's just not a realistic thing\nto keep running all the time.\n\n943\n00:48:31,540 --> 00:48:36,040\nSo Netflow is designed to\nreplace our need for a sniffer.\n\n944\n00:48:36,040 --> 00:48:40,820\nInstead of reporting to us the actual\ntraffic, the actual packets.\n\n945\n00:48:40,820 --> 00:48:44,250\nWhat Sniffer does is it\nreports to us a description,\n\n946\n00:48:44,250 --> 00:48:49,270\nit says this IP went to that\nIP using this protocol, right.\n\n947\n00:48:49,270 --> 00:48:52,380\nThe stuff that we would normally find\nin the header of a packet anyway, but\n\n948\n00:48:52,380 --> 00:48:55,490\nit leaves the payload data off, all right.\n\n949\n00:48:55,490 --> 00:48:58,880\nSo it's reporting to us\nthe information that we really want,\n\n950\n00:48:58,880 --> 00:49:03,260\nit's much more efficient,\nmuch more smaller sets of data and\n\n951\n00:49:03,260 --> 00:49:07,020\nthat means we can leave it running\n24 hours a day, months on end.\n\n952\n00:49:07,020 --> 00:49:11,760\nWe can keep historical logs and it's not\nan overwhelming amount of information.\n\n953\n00:49:11,760 --> 00:49:15,020\nThe other thing is we can duplicate\nthe data and send it more than one place.\n\n954\n00:49:15,020 --> 00:49:19,070\nAnd that way we can have it going\nto an intrusion detection system\n\n955\n00:49:19,070 --> 00:49:22,000\nas well as our own laptop for\ntroubleshooting and so on.\n\n956\n00:49:22,000 --> 00:49:26,090\nWith span,\nthe more ports you add to a span monitor,\n\n957\n00:49:26,090 --> 00:49:30,010\nthen the more traffic it's generating,\nand you can overwhelm a switch.\n\n958\n00:49:30,010 --> 00:49:32,970\nI've done it on a 6500,\none of the big switches,\n\n959\n00:49:32,970 --> 00:49:37,000\nwhere I've overwhelmed one of those\ndoing spans, and wasn't even hard.\n\n960\n00:49:37,000 --> 00:49:37,570\n>> Oh yeah.\n\n961\n00:49:37,570 --> 00:49:39,980\n>> It's just one of those things\nwhere the switches can only handle so\n\n962\n00:49:39,980 --> 00:49:40,990\nmuch through put.\n\n963\n00:49:40,990 --> 00:49:43,340\nSo Netflow is designed to resolve that.\n\n964\n00:49:43,340 --> 00:49:44,090\nThat's it's purpose.\n\n965\n00:49:45,250 --> 00:49:48,320\nSo when the net flow technology was\ndeveloped, it wasn't developed by Cisco,\n\n966\n00:49:48,320 --> 00:49:49,580\nit was developed independently.\n\n967\n00:49:49,580 --> 00:49:50,340\nCisco jumped on it.\n\n968\n00:49:50,340 --> 00:49:51,730\nI'm like, man, that's great and so\n\n969\n00:49:51,730 --> 00:49:55,530\nthey made their device to support\ngenerating NetFlow traffic.\n\n970\n00:49:55,530 --> 00:49:59,530\nBut what Cisco didn't do was give us\na tool to actually use the traffic.\n\n971\n00:49:59,530 --> 00:50:01,520\nThey said, well, all right,\nyou're gonna have third party software.\n\n972\n00:50:01,520 --> 00:50:04,260\nYou're gonna have something that\ncan interpret this NetFlow data.\n\n973\n00:50:04,260 --> 00:50:05,250\nAll right?\n\n974\n00:50:05,250 --> 00:50:06,295\nBut we're not gonna make it.\n\n975\n00:50:06,295 --> 00:50:08,020\n[LAUGH] We're not gonna\nmake that software.\n\n976\n00:50:08,020 --> 00:50:12,570\nSo you're left to your devices when\nit comes to how you use this data.\n\n977\n00:50:12,570 --> 00:50:15,080\nYou set up your router,\nyou set up your switch, or\n\n978\n00:50:15,080 --> 00:50:18,280\nwhatever, generate the NetFlow data and\nsend it to a target.\n\n979\n00:50:18,280 --> 00:50:21,220\nAnd on that target you run\nsoftware of your choice.\n\n980\n00:50:21,220 --> 00:50:24,990\nYou go out there and figure out what you\nwanna use and it will collect the data and\n\n981\n00:50:24,990 --> 00:50:28,430\nrepresent it to you in different ways,\nall right.\n\n982\n00:50:28,430 --> 00:50:30,770\nNow, I've used a couple of different\nNetFlow software packages out there,\n\n983\n00:50:30,770 --> 00:50:32,910\nsome that were expensive.\n\n984\n00:50:32,910 --> 00:50:35,350\nSome that were really expensive.\n\n985\n00:50:35,350 --> 00:50:37,180\nThey are not cheap.\n\n986\n00:50:37,180 --> 00:50:40,350\nBut there is one free one out there\nthat you can use from a company called\n\n987\n00:50:40,350 --> 00:50:41,060\nSolar Winds.\n\n988\n00:50:41,060 --> 00:50:43,970\nAs long as you don't mind getting\nan email from them every single day.\n\n989\n00:50:43,970 --> 00:50:46,280\nThey're a little email heavy.\n\n990\n00:50:46,280 --> 00:50:48,920\nThen you can go in and\nyou can get their utilities for free.\n\n991\n00:50:48,920 --> 00:50:52,290\nThey have a NetFlow\nanalyzer that you can use.\n\n992\n00:50:52,290 --> 00:50:55,310\nThey're great if you're just learning and\ntesting, because it is free.\n\n993\n00:50:55,310 --> 00:50:57,450\nIn a production environment\nit's not very robust and\n\n994\n00:50:57,450 --> 00:51:01,320\nso you're gonna want to step up to some\nreal software in a production environment.\n\n995\n00:51:01,320 --> 00:51:04,950\nBut for us, like here on the show,\nwe can use it.\n\n996\n00:51:04,950 --> 00:51:07,090\nLet me show you guys an example.\n\n997\n00:51:07,090 --> 00:51:12,170\nLet's jump over to my computer here,\nand I'm gonna fire up these\n\n998\n00:51:12,170 --> 00:51:17,570\nSolarwinds Real-time NetFlow analyzer,\nall right?\n\n999\n00:51:17,570 --> 00:51:20,880\nSo, I downloaded this\nyesterday from their site, and\n\n1000\n00:51:20,880 --> 00:51:23,880\nbasically what it is,\nis a NetFlow collector.\n\n1001\n00:51:23,880 --> 00:51:26,080\nIt just sits here waiting for\n\n1002\n00:51:26,080 --> 00:51:30,490\ninformation to feed into my system,\ntell me about what's going on, all right?\n\n1003\n00:51:30,490 --> 00:51:32,790\nAnd, basically, we then go and\n\n1004\n00:51:32,790 --> 00:51:35,220\nconfigure our routers and\nstuff to send it right here.\n\n1005\n00:51:35,220 --> 00:51:38,570\nSo, for example, let me go to our router.\n\n1006\n00:51:40,950 --> 00:51:42,320\nAnd, actually, it's not.\n\n1007\n00:51:42,320 --> 00:51:43,400\nThis is a frame relay lab.\n\n1008\n00:51:43,400 --> 00:51:50,110\nLet me switch to our actual, actual\nrouter that my laptop is passing through.\n\n1009\n00:51:54,818 --> 00:51:55,970\nOkay.\n\n1010\n00:51:55,970 --> 00:52:00,325\nSo what I've done, is I've gone into this\nrouter, and I've gone into interface\n\n1011\n00:52:00,325 --> 00:52:05,215\nGI0/1, that's the inside interface of\nthis router, GI0/0 faces the internet and\n\n1012\n00:52:05,215 --> 00:52:10,090\nGI0/1 faces my private network,\nwhich my laptop is plugged into.\n\n1013\n00:52:10,090 --> 00:52:12,610\nI think my laptop's the only\nthing plugged into it.\n\n1014\n00:52:12,610 --> 00:52:16,100\nSo, I've got it right there, and\nI went into the interface, and\n\n1015\n00:52:16,100 --> 00:52:23,805\nI issued just a couple of commands,\nIP flow ingress and IP flow egress.\n\n1016\n00:52:23,805 --> 00:52:26,755\nThat says that if I turn\non NetFlow monitoring,\n\n1017\n00:52:26,755 --> 00:52:28,655\nthis doesn't actually turn it on.\n\n1018\n00:52:28,655 --> 00:52:33,985\nIf I turn on NetFlow monitoring, this\nwill monitor not only incoming traffic,\n\n1019\n00:52:33,985 --> 00:52:35,995\nbut also outgoing traffic.\n\n1020\n00:52:35,995 --> 00:52:36,915\nAll right?\n\n1021\n00:52:36,915 --> 00:52:39,755\nYou may just choose to monitor incoming or\noutgoing,\n\n1022\n00:52:39,755 --> 00:52:42,590\nif you're trying to monitor which\nbandwidth is being consumed.\n\n1023\n00:52:42,590 --> 00:52:45,542\nBut usually in my opinion\nyou want to get both.\n\n1024\n00:52:45,542 --> 00:52:48,580\nYou wanna see the traffic going out and\nthe replies coming back so\n\n1025\n00:52:48,580 --> 00:52:51,150\nyou can monitor send and\nreceive bandwidth and utilization.\n\n1026\n00:52:52,580 --> 00:52:57,090\nAll right and\nI'm gonna add these to a notepad here.\n\n1027\n00:53:07,530 --> 00:53:10,860\nAlright, so there's our start and then.\n\n1028\n00:53:19,193 --> 00:53:21,830\nThere we go.\n\n1029\n00:53:21,830 --> 00:53:24,690\nWe need to do just two more commands,\nall right?\n\n1030\n00:53:24,690 --> 00:53:28,370\nNow you can get very complex\nwith NetFlow configuration.\n\n1031\n00:53:28,370 --> 00:53:31,160\nBut a minimum to get started\nis we need to say IP\n\n1032\n00:53:32,990 --> 00:53:37,965\nflow dash export version, and then\nthe version number that we want to run.\n\n1033\n00:53:37,965 --> 00:53:41,430\nNetFlow has been upgraded\nseveral times over the years and\n\n1034\n00:53:41,430 --> 00:53:43,860\nyou need to set the version that\nyour software is expecting.\n\n1035\n00:53:43,860 --> 00:53:48,560\nSo in my case the Solar Winds Utility is\nexpecting version five formatted traffic.\n\n1036\n00:53:48,560 --> 00:53:54,220\nBut your router may well\nsupport more than one version,\n\n1037\n00:53:54,220 --> 00:53:56,863\nso like this one supports version one,\nfive, and nine,\n\n1038\n00:53:56,863 --> 00:53:59,300\nbut my NetFlow software\ndoesn't support version 9.\n\n1039\n00:53:59,300 --> 00:54:00,580\nSo I'm leaving it at version 5.\n\n1040\n00:54:00,580 --> 00:54:04,570\nSo you need to specify the version\nthat your system supports, all right,\n\n1041\n00:54:04,570 --> 00:54:06,670\nyour software that you're gonna be using,\nall right.\n\n1042\n00:54:06,670 --> 00:54:07,890\nThen you give it a destination.\n\n1043\n00:54:07,890 --> 00:54:11,870\nYou can do more than one destination, so\nhere I say, flow-export destination and\n\n1044\n00:54:11,870 --> 00:54:13,440\nI put my laptop.\n\n1045\n00:54:13,440 --> 00:54:17,650\nAnd my laptop,\n192.168.0.222 on port number 2055, right.\n\n1046\n00:54:17,650 --> 00:54:21,760\nThat's just a port number and\nagain that's set in your software also.\n\n1047\n00:54:21,760 --> 00:54:23,490\nThere's not an official NetFlow port.\n\n1048\n00:54:24,980 --> 00:54:25,770\nAll right.\n\n1049\n00:54:25,770 --> 00:54:30,760\nSo those four lines right there are really\nall it takes to get NetFlow configured.\n\n1050\n00:54:30,760 --> 00:54:34,070\nNow whenever traffic\npasses through my router\n\n1051\n00:54:34,070 --> 00:54:37,700\na summary of that traffic\nis being send to my laptop.\n\n1052\n00:54:37,700 --> 00:54:42,450\nAnd my software, right here, is receiving\nthat traffic and cataloging it.\n\n1053\n00:54:42,450 --> 00:54:43,590\nWell, it will.\n\n1054\n00:54:43,590 --> 00:54:45,770\nI'm not actually capturing\nthe traffic right now.\n\n1055\n00:54:45,770 --> 00:54:47,220\nI've gotta hit start, full capture.\n\n1056\n00:54:49,600 --> 00:54:51,910\nAnd I thought I did pick interface.\n\n1057\n00:54:54,060 --> 00:54:54,750\nThere we go.\n\n1058\n00:54:54,750 --> 00:54:56,950\nSo when I fire this up, there we go.\n\n1059\n00:54:56,950 --> 00:54:58,910\nNow it's gonna start collecting.\n\n1060\n00:54:58,910 --> 00:55:02,690\nNow, NetFlow is sending\ndata constantly and\n\n1061\n00:55:02,690 --> 00:55:06,390\nsome software supports\ncompletely dynamic real time.\n\n1062\n00:55:06,390 --> 00:55:08,880\nThis one is set with an eight\nsecond refresh rate.\n\n1063\n00:55:08,880 --> 00:55:11,180\nSo every eight seconds it's gonna update.\n\n1064\n00:55:11,180 --> 00:55:14,300\nAnd then it's averaging out to every\nfive minutes for its data points, but\n\n1065\n00:55:14,300 --> 00:55:16,600\nI can kinda manipulate\nthat however I want.\n\n1066\n00:55:16,600 --> 00:55:19,060\nSo it's gonna take a minute for\ndata to show up here, and\n\n1067\n00:55:19,060 --> 00:55:22,370\nactually I probably need to generate\nsome data to really see something.\n\n1068\n00:55:22,370 --> 00:55:26,620\nLet me make sure I'm set\nto pass through that thing.\n\n1069\n00:55:26,620 --> 00:55:29,235\nI know I've done some reboots and\nso I might not be.\n\n1070\n00:55:33,069 --> 00:55:36,870\nLet's see.\n\n1071\n00:55:36,870 --> 00:55:41,026\nLet me route some traffic through that\nrouter and we'll be able to see it.\n\n1072\n00:55:41,026 --> 00:55:41,526\nSo\n\n1073\n00:55:54,545 --> 00:55:56,975\nThere we go.\nI've got a file server sitting out\n\n1074\n00:55:56,975 --> 00:56:01,519\nthere on this other network, and I'm\njust gonna make sure that when I access\n\n1075\n00:56:01,519 --> 00:56:05,670\nthat file server,\nthat I'm gonna pass through that router.\n\n1076\n00:56:05,670 --> 00:56:07,290\nSo that's what I'm doing right there,\n\n1077\n00:56:07,290 --> 00:56:12,280\nI'm just overriding that on my own\nPC to make sure I can get there, and\n\n1078\n00:56:12,280 --> 00:56:16,530\none I've got is a folder out here\nwith all of our CCNA episodes.\n\n1079\n00:56:16,530 --> 00:56:18,470\nSo, I'm just gonna start\ncopying some of this data.\n\n1080\n00:56:18,470 --> 00:56:24,000\nLet's see, do I have a test folder there?\n\n1081\n00:56:24,000 --> 00:56:24,810\nThere we go.\n\n1082\n00:56:24,810 --> 00:56:28,650\nSo, I'm gonna start copying some data,\nI'm passing through the router to do that.\n\n1083\n00:56:28,650 --> 00:56:30,270\nAnd I can see in the background there,\n\n1084\n00:56:30,270 --> 00:56:33,470\nit's starting to update to reflect\nthis traffic that's going on.\n\n1085\n00:56:33,470 --> 00:56:37,020\nMe reaching across that link,\nbut there's not a lot of data so\n\n1086\n00:56:37,020 --> 00:56:41,069\nlet me generate some more data here,\nso we can see some real activity.\n\n1087\n00:56:41,069 --> 00:56:42,892\nLet me get connected like\nsome of these switches.\n\n1088\n00:56:46,734 --> 00:56:48,650\nAnd so like on switch1.\n\n1089\n00:56:50,612 --> 00:56:51,796\nThat's not switch1.\n\n1090\n00:56:51,796 --> 00:56:53,154\nHere's switch1.\n\n1091\n00:56:53,154 --> 00:56:55,239\nLet me copy.\n\n1092\n00:56:59,642 --> 00:57:02,683\nFile to an FTP server.\n\n1093\n00:57:02,683 --> 00:57:05,621\nSo, I'm gonna generate\nsome FTP traffic here.\n\n1094\n00:57:05,621 --> 00:57:09,388\nIt would help,\nif I threw in an extra slash.\n\n1095\n00:57:09,388 --> 00:57:10,260\nThere we go.\n\n1096\n00:57:10,260 --> 00:57:12,820\nSo, this one is sending FTP traffic up.\n\n1097\n00:57:12,820 --> 00:57:16,240\nI'm uploading my iOS file.\n\n1098\n00:57:16,240 --> 00:57:20,327\nAnd when it's done, I'll download\nthe iOS file here on another switch.\n\n1099\n00:57:28,379 --> 00:57:31,920\nI gotta wait for\nit to upload before I download it.\n\n1100\n00:57:31,920 --> 00:57:33,020\nOtherwise I get a corrupt iOS.\n\n1101\n00:57:33,020 --> 00:57:34,280\nThat would be fun.\n\n1102\n00:57:34,280 --> 00:57:35,610\nSo, let me do that.\n\n1103\n00:57:37,220 --> 00:57:37,930\nThere we go.\n\n1104\n00:57:37,930 --> 00:57:40,470\nSo, I uploaded from one switch,\nI'm downloading from the other switch.\n\n1105\n00:57:40,470 --> 00:57:41,740\n>> Yeah.\n>> So, I've got some decent traffic\n\n1106\n00:57:41,740 --> 00:57:42,960\ngoing on here.\n\n1107\n00:57:42,960 --> 00:57:46,135\nAnd if I go back to my net flow screen,\nI can start to see this.\n\n1108\n00:57:46,135 --> 00:57:49,579\nAnd what it's doing is it's\ncollecting that summary data, and\n\n1109\n00:57:49,579 --> 00:57:51,145\nstarting kind of map it out.\n\n1110\n00:57:51,145 --> 00:57:53,904\n>> Mm-hm.\n>> And it's mapping it out by protocol and\n\n1111\n00:57:53,904 --> 00:57:55,734\nIP, and all sorts of stuff,\n\n1112\n00:57:55,734 --> 00:58:01,040\nso I can see who's generating the most\ntraffic in terms of number of packets?\n\n1113\n00:58:01,040 --> 00:58:03,980\nWho's generating the most\ntraffic in number of bandwidth?\n\n1114\n00:58:03,980 --> 00:58:06,700\nWhat protocols are in heavy use right?\n\n1115\n00:58:06,700 --> 00:58:08,380\nSo, if I go here to like end points.\n\n1116\n00:58:09,550 --> 00:58:12,280\nI can see all the end\npoints on my network.\n\n1117\n00:58:12,280 --> 00:58:14,110\nSo, if I look at one of the switches.\n\n1118\n00:58:14,110 --> 00:58:16,840\nHere's the traffic from switch1.\n\n1119\n00:58:16,840 --> 00:58:21,165\nSo switch1 here, has generated\na total of 92 megabytes of traffic, so\n\n1120\n00:58:21,165 --> 00:58:26,310\nI can see that that mapped out 100% of\nits traffic, I can see it right there.\n\n1121\n00:58:26,310 --> 00:58:31,710\nI can see that switch number 2, so\nfar it's only generated 34k of traffic.\n\n1122\n00:58:31,710 --> 00:58:32,440\nNot much there.\n\n1123\n00:58:32,440 --> 00:58:36,360\nWell, now this is on the inbound right?\n\n1124\n00:58:36,360 --> 00:58:39,000\nAnd this was the switch that was\ndownloading, so that would be like\n\n1125\n00:58:39,000 --> 00:58:46,355\noutbound, so I'd need to look down\non here for the rest of that data.\n\n1126\n00:58:46,355 --> 00:58:48,585\nSo, outbound I've got 269k.\n\n1127\n00:58:48,585 --> 00:58:53,155\nSo this is all dynamic,\nit's being rendered in close to real time.\n\n1128\n00:58:53,155 --> 00:58:58,081\nThe more expensive your software though,\nthe closer it is to real time.\n\n1129\n00:58:58,081 --> 00:59:02,539\nHere's me downloading, I can see where\nI've already downloaded about 12 megs of\n\n1130\n00:59:02,539 --> 00:59:06,770\ntraffic there, and it's kind of breaking\nit down based on who I'm talking to.\n\n1131\n00:59:08,120 --> 00:59:12,320\nAnd I can go into my protocols and\nI can see like TCP traffic,\n\n1132\n00:59:12,320 --> 00:59:16,440\nhere's traffic on port 21,\nthat's that FTP traffic I was generating.\n\n1133\n00:59:16,440 --> 00:59:19,380\nAnd then some of the other ports\nthat are listed like 40, 445.\n\n1134\n00:59:19,380 --> 00:59:23,590\nThat is netBIOS and Samba.\n\n1135\n00:59:23,590 --> 00:59:24,430\nNot Samba, SMB.\n\n1136\n00:59:24,430 --> 00:59:25,580\nSilver Message Block.\n\n1137\n00:59:25,580 --> 00:59:27,500\nThat's a file sharing port for Windows.\n\n1138\n00:59:27,500 --> 00:59:28,720\nThat's me sharing files there.\n\n1139\n00:59:28,720 --> 00:59:31,870\nSome of these other ports,\nI don't recognize offhand.\n\n1140\n00:59:31,870 --> 00:59:32,910\n>> Dynamic, yeah.\n\n1141\n00:59:32,910 --> 00:59:34,590\n>> Yeah, not sure what they're doing.\n\n1142\n00:59:34,590 --> 00:59:36,830\nIt's always nice to have random traffic,\non your port.\n\n1143\n00:59:36,830 --> 00:59:39,960\nBut, it gives you visibility\ninto your network, and\n\n1144\n00:59:39,960 --> 00:59:42,340\nthe data that's generating, is not big.\n\n1145\n00:59:42,340 --> 00:59:44,188\nIt's not like I'm about\nto fill my hard drive up,\n\n1146\n00:59:44,188 --> 00:59:45,949\ncuz I'm monitoring\nthousands of PCs talking.\n\n1147\n00:59:45,949 --> 00:59:47,715\n>> Right.\n>> It's just summaries of the data.\n\n1148\n00:59:47,715 --> 00:59:48,916\nLike header data.\n\n1149\n00:59:48,916 --> 00:59:51,296\nAnd it gets consolidated,\nthrown into a chart.\n\n1150\n00:59:51,296 --> 00:59:54,564\nSo, if you're wondering,\nwho is consuming all my bandwidth?\n\n1151\n00:59:54,564 --> 00:59:55,261\n>> There you go.\n\n1152\n00:59:55,261 --> 00:59:56,375\n>> We can go in here and find it.\n\n1153\n00:59:56,375 --> 00:59:56,956\n>> Yeah.\n\n1154\n00:59:56,956 --> 00:59:59,122\n>> And\nyou can break it down by conversation.\n\n1155\n00:59:59,122 --> 01:00:01,787\nYou can look at who the people\nare talking to, and\n\n1156\n01:00:01,787 --> 01:00:04,268\nwhere that bandwidth\nis really coming from.\n\n1157\n01:00:04,268 --> 01:00:07,536\nYou really do have some\nneat flexibility in there.\n\n1158\n01:00:07,536 --> 01:00:09,290\nAnd it breaks down like here.\n\n1159\n01:00:09,290 --> 01:00:12,854\nI can see FTP traffic,\nand how much it did.\n\n1160\n01:00:12,854 --> 01:00:16,034\nWe've got Microsoft directory services.\n\n1161\n01:00:16,034 --> 01:00:18,222\nMySQL apparently.\n\n1162\n01:00:18,222 --> 01:00:20,220\nWonder where that came from.\n\n1163\n01:00:20,220 --> 01:00:21,973\nThat's nice.\n\n1164\n01:00:21,973 --> 01:00:23,296\nMySQL database.\n\n1165\n01:00:23,296 --> 01:00:25,396\nBut, so\nyou can see some of the different things,\n\n1166\n01:00:25,396 --> 01:00:27,103\nthere's some unknown traffic on this.\n\n1167\n01:00:27,103 --> 01:00:28,380\n>> Coming from your laptop.\n\n1168\n01:00:28,380 --> 01:00:29,459\n>> Yeah, well,\nthat makes sense, doesn't it?\n\n1169\n01:00:29,459 --> 01:00:33,773\n>> [LAUGH]\n>> That might actually be this software.\n\n1170\n01:00:33,773 --> 01:00:36,467\nIt might be using My SQL\non the background.\n\n1171\n01:00:36,467 --> 01:00:37,826\nI don't know.\n\n1172\n01:00:37,826 --> 01:00:43,860\nBut Antidote Deployment Manager Service.\n\n1173\n01:00:43,860 --> 01:00:48,540\nThat is probably the antivirus in Windows,\nbecause they bought Antigen.\n\n1174\n01:00:48,540 --> 01:00:52,080\nSometimes the names don't match up.\n\n1175\n01:00:52,080 --> 01:00:56,630\nIt is neat, it's a great way to see what's\ngoing on in your network, in real time and\n\n1176\n01:00:56,630 --> 01:00:57,820\nidentify it.\n\n1177\n01:00:57,820 --> 01:01:00,070\nIs somebody monopolizing\nbandwidth on my network.\n\n1178\n01:01:00,070 --> 01:01:01,390\nIs this a problem?\n\n1179\n01:01:01,390 --> 01:01:03,330\nIs there a machine that's\ninfected with a virus,\n\n1180\n01:01:03,330 --> 01:01:05,410\nthat's just scanning the whole network.\n\n1181\n01:01:05,410 --> 01:01:09,604\nYou can see that, and the more expensive\nyour software, the more detailed this\n\n1182\n01:01:09,604 --> 01:01:12,998\ninformation is, and the more\nuseful it is to find that problem.\n\n1183\n01:01:12,998 --> 01:01:15,611\n>> I can see you have\na Mickey going on on your-\n\n1184\n01:01:15,611 --> 01:01:16,551\n>> A Mickey?\n\n1185\n01:01:16,551 --> 01:01:17,294\n>> Mikey?\n\n1186\n01:01:17,294 --> 01:01:18,659\n>> I'm joking.\n>> I wonder what that is.\n\n1187\n01:01:18,659 --> 01:01:19,379\n>> I don't know.\n\n1188\n01:01:19,379 --> 01:01:21,262\n>> Somebody slipped my laptop a Mickey.\n\n1189\n01:01:21,262 --> 01:01:24,165\nSo anyhow, it's neat stuff.\n\n1190\n01:01:24,165 --> 01:01:28,644\nIt really comes down to how powerful\nyour software is, cuz a lot of it\n\n1191\n01:01:28,644 --> 01:01:33,614\nyou can change the scaling and zoom in\nto see really detailed information.\n\n1192\n01:01:33,614 --> 01:01:36,097\nIt's neat stuff, it's really kind of fun.\n\n1193\n01:01:36,097 --> 01:01:41,298\nBut, does come down to software,\nso definitely keep that in mind.\n\n1194\n01:01:41,298 --> 01:01:45,130\nWhat we're seeing here\nis near real time data.\n\n1195\n01:01:45,130 --> 01:01:48,074\nUseful for troubleshooting,\nnot really useful for much else.\n\n1196\n01:01:48,074 --> 01:01:53,653\nReporting basically, but troubleshooting\nis its main purpose and very powerful.\n\n1197\n01:01:53,653 --> 01:01:58,494\nSo, just remember on the exam\nconfiguring it really straight forward.\n\n1198\n01:01:58,494 --> 01:02:00,050\nRight, let me bring that\nconfiguration back up.\n\n1199\n01:02:00,050 --> 01:02:01,950\nIt was really just a couple of commands.\n\n1200\n01:02:01,950 --> 01:02:04,350\nWe set up the flow export version, and\n\n1201\n01:02:04,350 --> 01:02:08,050\nthen we set up the destination\nright with an IP import number.\n\n1202\n01:02:08,050 --> 01:02:10,110\nAnd then lastly we just\ngot to our interfaces, and\n\n1203\n01:02:10,110 --> 01:02:14,430\nwe say whether we're going to monitor in\nor out or both and we put that in there.\n\n1204\n01:02:14,430 --> 01:02:17,530\nI typically monitor on\nmy inside interfaces.\n\n1205\n01:02:17,530 --> 01:02:20,520\nBecause, if you're doing VPN tunnels and\nstuff up on your outside interface it'll\n\n1206\n01:02:20,520 --> 01:02:24,320\nbe encrypted, and you won't be able\nto see what the traffic is, right?\n\n1207\n01:02:24,320 --> 01:02:27,300\nBut on the inside interface\nthe traffic is normally decrypted, so\n\n1208\n01:02:27,300 --> 01:02:32,350\nyou can see exactly what it is and\nkeep track of that, all right?\n\n1209\n01:02:32,350 --> 01:02:36,420\nSo neat stuff,\nthat is basically what NetFlow is.\n\n1210\n01:02:36,420 --> 01:02:40,673\nIt's neat, it's cool,\nnot much is gonna show up on the exam,\n\n1211\n01:02:40,673 --> 01:02:45,008\nbecause there's just the fact that\nwe turn it on on the routers,\n\n1212\n01:02:45,008 --> 01:02:49,777\nthe real work's done on the software and\nthat's up to third parties.\n\n1213\n01:02:49,777 --> 01:02:51,659\n>> All right, hey Ronnie you\nprobably remember those days.\n\n1214\n01:02:51,659 --> 01:02:54,319\nRemember like we'd get a computer\nthat would have a virus, and\n\n1215\n01:02:54,319 --> 01:02:55,985\nall of a sudden the T1 would shut down.\n\n1216\n01:02:55,985 --> 01:02:57,916\nAnd I'd have to fire up the sniffer and\nall.\n\n1217\n01:02:57,916 --> 01:03:03,156\nAnd that was fine, but this does\nwork a lot better now, all right?\n\n1218\n01:03:03,156 --> 01:03:05,225\nAs far as our basic\ntroubleshooting on routers,\n\n1219\n01:03:05,225 --> 01:03:06,745\nI think that basically tackles it.\n\n1220\n01:03:06,745 --> 01:03:07,582\nDid we miss anything Ron?\n\n1221\n01:03:07,582 --> 01:03:11,302\n>> I don't think so,\nI think we basically covered.\n\n1222\n01:03:11,302 --> 01:03:14,536\nDon't forget, so back and review\nthose same shows on routing protocol,\n\n1223\n01:03:14,536 --> 01:03:16,059\nthat's going to help you as well.\n\n1224\n01:03:16,059 --> 01:03:18,498\nHaving the fundamentals down is the key.\n\n1225\n01:03:18,498 --> 01:03:20,940\nWorking with the protocols is key.\n\n1226\n01:03:20,940 --> 01:03:25,270\nKnowing what the right configuration\nagain, another key for us in terms of\n\n1227\n01:03:25,270 --> 01:03:29,200\ntroubleshooting then becomes a secondary\nnature for you because you're probably.\n\n1228\n01:03:29,200 --> 01:03:32,030\nIf you're new at this, you're actually\ngonna be troubleshooting quite a lot.\n\n1229\n01:03:32,030 --> 01:03:34,888\nSo, keeping those skills up\nto date is pretty much it.\n\n1230\n01:03:34,888 --> 01:03:35,608\n>> Well.\n\n1231\n01:03:35,608 --> 01:03:37,395\n>> All right, well let's wrap it up here.\n\n1232\n01:03:37,395 --> 01:03:38,637\nI hope you guys enjoyed the show?\n\n1233\n01:03:38,637 --> 01:03:41,901\nKeep in mind this was part two\nof our now three part series.\n\n1234\n01:03:41,901 --> 01:03:44,746\n>> [LAUGH]\n>> We still have switching to tackle.\n\n1235\n01:03:44,746 --> 01:03:45,349\n>> Yeah.\n\n1236\n01:03:45,349 --> 01:03:48,031\n>> So, we're gonna jump into switching\nin the final troubleshooting issue and\n\n1237\n01:03:48,031 --> 01:03:48,534\nwrap that up.\n\n1238\n01:03:48,534 --> 01:03:51,190\nAnd that should cover all of our\nvarious troubleshooting stuff.\n\n1239\n01:03:51,190 --> 01:03:52,580\nSo good content to be found there.\n\n1240\n01:03:52,580 --> 01:03:55,650\nKeep in mind that if you\never have any questions,\n\n1241\n01:03:55,650 --> 01:03:58,360\nlive during the show you\ncan go to itpro.tv/live.\n\n1242\n01:03:58,360 --> 01:04:00,900\nThe chatroom is right beneath the video.\n\n1243\n01:04:00,900 --> 01:04:01,880\nPost your questions.\n\n1244\n01:04:01,880 --> 01:04:03,680\nWe monitor and answer during the show,\n\n1245\n01:04:03,680 --> 01:04:08,006\nif they're questions that\nmake sense unlike Nate's.\n\n1246\n01:04:08,006 --> 01:04:08,830\n>> [LAUGH]\n>> So\n\n1247\n01:04:08,830 --> 01:04:11,080\nthere's some funny questions in\nthe chat room right now, for\n\n1248\n01:04:11,080 --> 01:04:12,880\nthose of you that are watching live.\n\n1249\n01:04:12,880 --> 01:04:18,000\nBut, also if you have questions after\nthe show, make use of our Q&A system.\n\n1250\n01:04:18,000 --> 01:04:20,330\nAt the top of every page\nthere's a link that says Q&A,\n\n1251\n01:04:20,330 --> 01:04:21,880\nyou can post your question there.\n\n1252\n01:04:21,880 --> 01:04:25,522\nWe monitor and answer, or\ntry to answer if we know the answer.\n\n1253\n01:04:25,522 --> 01:04:29,031\nAnd let, it's a great way to reaffirm\nthat knowledge, and make sure you're not\n\n1254\n01:04:29,031 --> 01:04:32,196\nstumbling around with questions when\nyou walk into that testing booth.\n\n1255\n01:04:32,196 --> 01:04:35,773\nSo, definitely a good thing\nto take advantage of.\n\n1256\n01:04:35,773 --> 01:04:38,734\nAll right, well signing off for\nITProTV, I'm Don Pezet.\n\n1257\n01:04:38,734 --> 01:04:39,733\n>> And I'm Ronnie Wong.\n\n1258\n01:04:39,733 --> 01:04:41,288\n>> And we'll see you next time.\n\n1259\n01:04:41,288 --> 01:04:51,288\n[MUSIC]\n\n",
          "vimeoId": "84155926"
        },
        {
          "description": "In this episode Ronnie and Don tackle the final chapter in the troubleshooting trilogy by demonstrating issues on switches and layer 2 networks. They examine spanning tree protocol (STP), EtherChannel, VLAN trunking and router-on-a-stick.",
          "length": "5478",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/013-Troubleshooting-Pt-3.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/013-Troubleshooting-Pt-3-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/013-Troubleshooting-Pt-3-sm.jpg",
          "title": "Troubleshooting Part 3",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:15,295 --> 00:00:22,379\n[SOUND]\n\n3\n00:00:22,379 --> 00:00:32,379\n[MUSIC]\n\n4\n00:00:34,086 --> 00:00:36,391\nAll right, good morning,\ngood afternoon, good evening and\n\n5\n00:00:36,391 --> 00:00:38,087\nwelcome back to another\nepisode of IT Pro Tv.\n\n6\n00:00:38,087 --> 00:00:40,421\nI'm your host Don Pezet, today,\nwith Mister Ronnie Wong.\n\n7\n00:00:40,421 --> 00:00:41,210\nHow's it going Ronnie?\n\n8\n00:00:41,210 --> 00:00:42,420\nIt's going well today.\n\n9\n00:00:42,420 --> 00:00:48,910\nI am doing better than watching ABC Family\non a day with no Harry Potter shown.\n\n10\n00:00:48,910 --> 00:00:50,000\n>> I don't think that happens anymore.\n\n11\n00:00:50,000 --> 00:00:52,010\nIsn't it the Harry Potter Network?\n\n12\n00:00:52,010 --> 00:00:52,670\n>> Oh no.\n>> [LAUGH]\n\n13\n00:00:52,670 --> 00:00:54,100\n>> No.\n\n14\n00:00:54,100 --> 00:00:55,520\nAll right well.\n\n15\n00:00:55,520 --> 00:00:56,540\n>> I missed it.\n\n16\n00:00:56,540 --> 00:00:59,680\n>> We're gathered here today\nto celebrate the final\n\n17\n00:00:59,680 --> 00:01:03,630\nof our three part troubleshooting\nopen source, whatever you call it.\n\n18\n00:01:03,630 --> 00:01:07,200\nSo we're not gonna have the\ntroubleshooting objective for the CCNA and\n\n19\n00:01:07,200 --> 00:01:08,250\nthis is the last part.\n\n20\n00:01:08,250 --> 00:01:12,490\nWe spent the last two episodes\ntackling routing troubleshooting and\n\n21\n00:01:12,490 --> 00:01:16,090\ntoday we're, well today we're\ngonna tackle switching and\n\n22\n00:01:16,090 --> 00:01:17,646\nthen at the end maybe some more routings.\n\n23\n00:01:17,646 --> 00:01:19,760\n[LAUGH] Kind of go full circle.\n\n24\n00:01:19,760 --> 00:01:22,250\nBut yeah, all good stuff to know.\n\n25\n00:01:23,650 --> 00:01:26,980\nSwitching in my opinion,\nit's a lot of fun.\n\n26\n00:01:26,980 --> 00:01:30,420\nTroubleshooting switches because\nit's all just layer two and so\n\n27\n00:01:30,420 --> 00:01:32,730\nit's a lot more simple than with routing.\n\n28\n00:01:32,730 --> 00:01:35,160\nThere's a lot less that can go wrong and\nit's a lot more stable.\n\n29\n00:01:35,160 --> 00:01:37,850\nThat being said,\nthere are things that can go wrong.\n\n30\n00:01:37,850 --> 00:01:40,650\nAnd so we do need to be aware of\nsome little quirks, the ins and\n\n31\n00:01:40,650 --> 00:01:42,370\nouts, how we can troubleshoot and\nfind them.\n\n32\n00:01:42,370 --> 00:01:47,170\n>> Yeah, once again, we take basic\ngood troubleshooting skills for us and\n\n33\n00:01:47,170 --> 00:01:49,420\nwe apply them to the switches.\n\n34\n00:01:49,420 --> 00:01:51,780\nJust like what we were doing in\nour routing troubleshooting and\n\n35\n00:01:51,780 --> 00:01:54,330\nall through the episodes that we've been\ndoing where we've actually done some of\n\n36\n00:01:54,330 --> 00:01:58,380\nthis stuff, we wanna make sure that\nagain with switching here we review\n\n37\n00:01:58,380 --> 00:02:01,880\neverything that we need to, and\nwe get everything configured right.\n\n38\n00:02:01,880 --> 00:02:04,700\nAnd so we're going to be\nspending a lot of time today\n\n39\n00:02:04,700 --> 00:02:07,780\nin making sure that we cover things like\nSpanning Tree again, and showing you,\n\n40\n00:02:07,780 --> 00:02:12,400\ndemonstrating that, and especially Router\non a Stick, and even Ether Channel.\n\n41\n00:02:12,400 --> 00:02:14,260\n>> Yeah, good stuff.\n\n42\n00:02:14,260 --> 00:02:16,800\nSo let's just dive right into it and\n\n43\n00:02:16,800 --> 00:02:20,940\nthe first thing we're gonna tackle\nis taking a look at trunking, right?\n\n44\n00:02:20,940 --> 00:02:22,970\nTrunking between Cisco switches.\n\n45\n00:02:22,970 --> 00:02:27,010\nPretty much every Cisco switch\nthat you can telnet or SSH into.\n\n46\n00:02:27,010 --> 00:02:30,840\nIf it's got a management interface,\nit will typically support trunking and\n\n47\n00:02:30,840 --> 00:02:35,520\nso, if you've got more than one\nVLAN on your network, and you\n\n48\n00:02:35,520 --> 00:02:40,390\nwant to spread that VLAN across switches,\nyou need a trunk link between them.\n\n49\n00:02:40,390 --> 00:02:41,720\nAnd we did a whole trunking episode and\n\n50\n00:02:41,720 --> 00:02:43,320\nwe talked about how to set those up and\nstuff.\n\n51\n00:02:43,320 --> 00:02:45,210\nBut let's take some switches here.\n\n52\n00:02:45,210 --> 00:02:48,360\nThe switches behind me,\nthey're Cisco 3560s.\n\n53\n00:02:48,360 --> 00:02:51,570\nAnd they are the switches\nthat are on the exam.\n\n54\n00:02:51,570 --> 00:02:55,240\nSo it's what you're gonna\nsee in the actual exam.\n\n55\n00:02:55,240 --> 00:03:01,440\nAnd basically, they support switching,\nthey actually support dynamic switching or\n\n56\n00:03:01,440 --> 00:03:05,540\ndynamic trunking which means we don't\neven have to tell them to trunk.\n\n57\n00:03:05,540 --> 00:03:07,580\nThey'll just do it.\n\n58\n00:03:07,580 --> 00:03:10,450\nAnd that's kind of cool, right?\n\n59\n00:03:10,450 --> 00:03:13,110\nBut it doesn't always work\nthe way that we expect to.\n\n60\n00:03:13,110 --> 00:03:15,280\nSo let's take a look at an example here.\n\n61\n00:03:15,280 --> 00:03:21,090\nI've got these two 3560s and\nI've got two just crossover cables run so\n\n62\n00:03:21,090 --> 00:03:24,300\nthat port one on one switch is plugged\ninto port one on the other one.\n\n63\n00:03:24,300 --> 00:03:27,640\nAnd port two on one switch is plugged\ninto port two on the other one.\n\n64\n00:03:27,640 --> 00:03:30,570\nI just plugged in the cables,\nthey're crossovers, and so\n\n65\n00:03:30,570 --> 00:03:35,400\nin theory, I should be trunking\non those interfaces, right.\n\n66\n00:03:35,400 --> 00:03:38,360\n>> So remember that you may also\nend up running into some different\n\n67\n00:03:39,560 --> 00:03:41,910\ndefault types of things that go on.\n\n68\n00:03:41,910 --> 00:03:45,040\nFor example, Don and I were talking\nright before the show, such as\n\n69\n00:03:45,040 --> 00:03:48,910\nthe example that we were talking about\nhere that ports can actually be set for\n\n70\n00:03:48,910 --> 00:03:51,310\ntrunking here using\nDynamic Trunking Protocol.\n\n71\n00:03:51,310 --> 00:03:52,920\nSome are set with what\nare called desirable and\n\n72\n00:03:52,920 --> 00:03:54,950\nsome are set with what we call auto.\n\n73\n00:03:54,950 --> 00:03:58,530\nAnd they are different, and so\nyou may actually get some weird, different\n\n74\n00:03:58,530 --> 00:04:02,510\nconfigurations if you don't actually set\nthem up both correctly on both ends.\n\n75\n00:04:02,510 --> 00:04:03,770\nSo I wanna make sure that we go over that.\n\n76\n00:04:03,770 --> 00:04:06,090\n>> Yeah, so\nlet's take a look at these switches.\n\n77\n00:04:06,090 --> 00:04:10,492\nSo if I take a look at one of the\ninterfaces, like if I do a show interface\n\n78\n00:04:10,492 --> 00:04:15,760\nfa0/1 trunk, that says show me\nthe trunking information about port fa0/1.\n\n79\n00:04:15,760 --> 00:04:22,060\nAnd when I look at it, I can see that\nits encapsulation is set to negotiate.\n\n80\n00:04:22,060 --> 00:04:25,090\nSo that means that it will support ISL,\nthe inner switch link.\n\n81\n00:04:25,090 --> 00:04:30,940\nThat's the proprietary Cisco trunking,\nas well as 802.1q VLAN tagging, right.\n\n82\n00:04:30,940 --> 00:04:35,280\nSo the nicer, more common,\nopen standard supported trunking.\n\n83\n00:04:35,280 --> 00:04:37,280\nRight, so it'll support both.\n\n84\n00:04:37,280 --> 00:04:39,470\nAnd it's mode is set to auto.\n\n85\n00:04:39,470 --> 00:04:43,190\nIt will automatically trunk given\nthe opportunity, all right.\n\n86\n00:04:43,190 --> 00:04:48,570\nBut I can see that it is\ncurrently not trunking.\n\n87\n00:04:48,570 --> 00:04:50,530\nAll right, and\nthat's on switch one, fa0/1.\n\n88\n00:04:50,530 --> 00:04:55,140\nIf I look at fa0/2,\nI can see the same thing.\n\n89\n00:04:55,140 --> 00:04:57,820\nAuto, negotiate, not-trunking.\n\n90\n00:04:57,820 --> 00:05:03,070\nAnd if I look at the other\nside of the equation, so\n\n91\n00:05:03,070 --> 00:05:04,670\nI'm looking over on switch two.\n\n92\n00:05:06,620 --> 00:05:08,740\nI can see the same exact thing.\n\n93\n00:05:08,740 --> 00:05:13,350\nThe mode is auto, negotiation for\nthe encapsulation and not-trunking.\n\n94\n00:05:13,350 --> 00:05:13,880\nAll right?\n\n95\n00:05:13,880 --> 00:05:16,060\nSo if they're set to automatic and\n\n96\n00:05:16,060 --> 00:05:20,020\nI plug a cable into the two,\nthey're the same switch.\n\n97\n00:05:20,020 --> 00:05:21,440\n>> Yeah.\n>> They're both 3560s,\n\n98\n00:05:21,440 --> 00:05:23,060\nwhy the heck is it not trunking?\n\n99\n00:05:23,060 --> 00:05:24,020\n>> Yeah.\nAnd also,\n\n100\n00:05:24,020 --> 00:05:28,850\nin this situation here, when we're using\ndynamic trunking protocol, automatic says,\n\n101\n00:05:28,850 --> 00:05:32,070\nhey, I'll do whatever\nthe other side is doing.\n\n102\n00:05:32,070 --> 00:05:33,480\nWell, if the other side\nis saying same thing,\n\n103\n00:05:33,480 --> 00:05:36,320\nhey, I'll do whatever\nthe other side is doing,\n\n104\n00:05:36,320 --> 00:05:39,500\nit's sort of like us trying to decide\nwhere we're gonna go to lunch, right?\n\n105\n00:05:39,500 --> 00:05:42,700\nNobody actually ever says, hey,\nthis is where we want to go.\n\n106\n00:05:42,700 --> 00:05:44,810\nAnd, so they both kinda just sit there.\n\n107\n00:05:44,810 --> 00:05:49,030\nAnd they wait for one side to actually\nsay this is what I want to do.\n\n108\n00:05:49,030 --> 00:05:52,740\nSo you have both sides set to auto,\nyou're probably not gonna end up trunking.\n\n109\n00:05:52,740 --> 00:05:53,240\n>> Yeah.\n\n110\n00:05:53,240 --> 00:05:57,040\nIn that automatic mode they're\nfully willing to become a trunk\n\n111\n00:05:57,040 --> 00:05:58,575\nif somebody else asks them.\n\n112\n00:05:58,575 --> 00:06:01,310\n>> [LAUGH]\n>> But if nobody asks, if nobody initiates\n\n113\n00:06:01,310 --> 00:06:03,912\nit's not gonna trunk and\nthat's exactly what we have right here.\n\n114\n00:06:03,912 --> 00:06:04,740\nAll right?\n\n115\n00:06:04,740 --> 00:06:09,110\nNow Ronnie mentioned a really valid\npoint which was, with the 3550s,\n\n116\n00:06:09,110 --> 00:06:11,862\nthat's the switches that were\nreleased prior to this one.\n\n117\n00:06:11,862 --> 00:06:16,710\nThe 3550s,\nthey were set to desirable by default.\n\n118\n00:06:16,710 --> 00:06:17,270\nRight?\n\n119\n00:06:17,270 --> 00:06:21,370\nSo with negotiation like this you really\ngot three modes that you can be in.\n\n120\n00:06:21,370 --> 00:06:22,440\nOne, it can be disabled.\n\n121\n00:06:22,440 --> 00:06:24,440\nYou can disable dynamic\ntrunking altogether.\n\n122\n00:06:24,440 --> 00:06:26,360\nThat's what I like to do.\n\n123\n00:06:26,360 --> 00:06:29,510\nOr you can set it to auto,\nwhich says we'll become a trunk\n\n124\n00:06:29,510 --> 00:06:33,780\nif the other side asks us, or you can\ngo desirable, which says we will ask,\n\n125\n00:06:33,780 --> 00:06:36,230\nwe will try to become a trunk, all right?\n\n126\n00:06:36,230 --> 00:06:42,800\nSo if I take two 3550s and I plug\na cable in like this, they will trunk.\n\n127\n00:06:42,800 --> 00:06:48,790\nAnd if I take a 3550, and\nI plug it into a 3560, they will trunk.\n\n128\n00:06:48,790 --> 00:06:54,340\nBut if I take two 3560s and I put them\ntogether, well, they won't trunk.\n\n129\n00:06:54,340 --> 00:06:56,180\nThey're both set to Auto.\n\n130\n00:06:56,180 --> 00:06:59,070\nAnd, so this is one of those\nweird situations where you need\n\n131\n00:06:59,070 --> 00:07:01,890\nto understand your platform, understand\nthe switches you're working on, and\n\n132\n00:07:01,890 --> 00:07:05,310\nunderstand that the defaults\nare different from platform to platform.\n\n133\n00:07:05,310 --> 00:07:09,130\nAnd this show command is actually\nthe greatest place for you to start.\n\n134\n00:07:09,130 --> 00:07:12,500\nIf you're not getting trunking on the link\nthat you're supposed to be getting,\n\n135\n00:07:12,500 --> 00:07:14,710\ncheck both sides, check the mode.\n\n136\n00:07:14,710 --> 00:07:17,000\nIf you see both sides as being Auto,\nonce again,\n\n137\n00:07:17,000 --> 00:07:18,950\nthat's gonna tell you\nit's not gonna trunk.\n\n138\n00:07:18,950 --> 00:07:21,520\nSo usually for us to fix it,\nwe just set one side of it and\n\n139\n00:07:21,520 --> 00:07:23,880\nthe other side will come up.\n\n140\n00:07:23,880 --> 00:07:24,480\n>> Yeah.\nSo\n\n141\n00:07:24,480 --> 00:07:28,330\nI can do that so, at least I think I can.\n\n142\n00:07:28,330 --> 00:07:33,380\nSo I'm gonna do a interface range command\nhere and modify ports one and two.\n\n143\n00:07:33,380 --> 00:07:38,448\nAnd I'm just on one side on switch one and\nI'm gonna say switch port\n\n144\n00:07:38,448 --> 00:07:43,927\ntrunk mode desirable.\n\n145\n00:07:43,927 --> 00:07:45,516\nWhoops.\n\n146\n00:07:45,516 --> 00:07:48,166\nSwitch port.\n\n147\n00:07:48,166 --> 00:07:49,230\n>> Mode.\n\n148\n00:07:49,230 --> 00:07:51,390\n>> Apparently, I'm forgetting my command.\n\n149\n00:07:51,390 --> 00:07:52,910\nSwitchboard mode?\n\n150\n00:07:52,910 --> 00:07:54,390\nI am going the wrong way.\n\n151\n00:07:54,390 --> 00:07:56,570\nThere we go.\nSwitch port mode trunk.\n\n152\n00:07:56,570 --> 00:07:57,980\nHang on.\n\n153\n00:07:57,980 --> 00:07:59,874\nSwitch port mode dynamic.\n\n154\n00:07:59,874 --> 00:08:01,596\n>> Yeah.\n>> There we go, desirable.\n\n155\n00:08:01,596 --> 00:08:03,583\nAll right.\nIf we get our syntax right.\n\n156\n00:08:03,583 --> 00:08:07,891\nSo switch port mode dynamic desirable And\nwhen I set that right there.\n\n157\n00:08:07,891 --> 00:08:10,980\nIt's gonna change from auto to\ndesirable on these two ports.\n\n158\n00:08:10,980 --> 00:08:14,580\nOn this side,\nthe other side is still set to auto, but\n\n159\n00:08:14,580 --> 00:08:18,240\nwhen I run that were\nnow gonna ask the side.\n\n160\n00:08:18,240 --> 00:08:19,825\nHey can we become a trunk?\n\n161\n00:08:19,825 --> 00:08:22,835\nAnd the other side is gonna say sure,\nand we're gonna become a trunk.\n\n162\n00:08:22,835 --> 00:08:27,845\nNow I am SSH'd into this switch and\nI've got my terminal monitor turned off so\n\n163\n00:08:27,845 --> 00:08:30,765\nI didn't see messages, but\nin the background I'm consoled into this\n\n164\n00:08:30,765 --> 00:08:33,885\nother switch, and so\nI see the interfaces reset.\n\n165\n00:08:33,885 --> 00:08:38,235\nWhen you switch from an access port to\na trunk, the interface resets, and so\n\n166\n00:08:38,235 --> 00:08:43,148\nthat's what's happening here, but we can\nsee that a little better if we do the show\n\n167\n00:08:43,148 --> 00:08:47,772\ninterface fa0/1 trunk.\n\n168\n00:08:47,772 --> 00:08:53,280\nLike that and\nnow I can see my mode is desirable,\n\n169\n00:08:53,280 --> 00:08:57,815\nI've negotiated ISL and\nI'm currently trunking.\n\n170\n00:08:57,815 --> 00:09:04,465\nWe are now a trunk because\nwe're using a proper mode.\n\n171\n00:09:05,615 --> 00:09:10,315\n>> So both modes for us now on both\nsides are now set to trunking.\n\n172\n00:09:10,315 --> 00:09:14,595\nThe other thing for us, now Don what\nhappens if I have one side set to ISL and\n\n173\n00:09:14,595 --> 00:09:17,250\nthe other side set to .1Q,\nis that gonna work?\n\n174\n00:09:17,250 --> 00:09:17,845\n>> Nope.\n\n175\n00:09:17,845 --> 00:09:21,415\nSo, they work very differently.\n\n176\n00:09:21,415 --> 00:09:25,470\n802.1Q sticks a tag inside of\nthe frame before it sends along.\n\n177\n00:09:25,470 --> 00:09:28,380\nBut the frame itself is\notherwise left intact.\n\n178\n00:09:28,380 --> 00:09:31,260\nWith ISL, the frame is encapsulated.\n\n179\n00:09:31,260 --> 00:09:36,230\nIt's wrapped up in this other protocol so\nit looks different going across the line.\n\n180\n00:09:36,230 --> 00:09:38,630\nThey function two different ways and\n\n181\n00:09:38,630 --> 00:09:40,700\nthat means they are not\ncompatible with each other.\n\n182\n00:09:40,700 --> 00:09:44,390\nSo if we hard set one,\nit's gonna break the other one.\n\n183\n00:09:44,390 --> 00:09:47,790\nSo let me just write down some of\nthe commands that we've used so far.\n\n184\n00:09:47,790 --> 00:09:51,600\nWe did show interface fa0/1 trunk.\n\n185\n00:09:51,600 --> 00:09:52,370\n>> Trunk.\n>> Right?\n\n186\n00:09:52,370 --> 00:09:57,344\nAnd on the interface we did switchport\n\n187\n00:09:57,344 --> 00:10:03,590\nmode dynamic desirable,\nthat was where we changed it.\n\n188\n00:10:03,590 --> 00:10:09,172\nAnd, we could have said\nswitchport mode dynamic auto or\n\n189\n00:10:09,172 --> 00:10:12,790\nswitchport mode trunk, right.\n\n190\n00:10:12,790 --> 00:10:14,010\nThose are the three.\n\n191\n00:10:14,010 --> 00:10:16,560\nDynamic desirable will try and\nbecome a trunk.\n\n192\n00:10:16,560 --> 00:10:18,520\nIf it fails, we'll go access.\n\n193\n00:10:18,520 --> 00:10:20,220\nSwitchport mode dynamic auto.\n\n194\n00:10:20,220 --> 00:10:22,960\nWe will become a trunk if\nsomebody else asks us.\n\n195\n00:10:22,960 --> 00:10:24,500\nOtherwise, we'll be access.\n\n196\n00:10:24,500 --> 00:10:27,270\nSwitchport mode trunk,\nwe will always be a trunk.\n\n197\n00:10:27,270 --> 00:10:33,090\nAnd switchport mode access,\nwe will always be an access port, right?\n\n198\n00:10:33,090 --> 00:10:35,795\nSo those are kinda the four\ncommands that we can use in there.\n\n199\n00:10:36,960 --> 00:10:37,730\nAll right, now, Ronnie,\n\n200\n00:10:37,730 --> 00:10:42,490\nyou were mentioning what if\nthey didn't match, right?\n\n201\n00:10:42,490 --> 00:10:46,620\nOur encapsulation right now\nis being negotiated, right.\n\n202\n00:10:46,620 --> 00:10:54,330\nAnd if I get back into my configuration,\nwe can say switchport trunk,\n\n203\n00:10:54,330 --> 00:10:59,070\nand you'll notice inside of the trunk here\nthat we've got that encapsulation and\n\n204\n00:10:59,070 --> 00:11:02,720\nwe can manually set it to .1Q or ISL.\n\n205\n00:11:02,720 --> 00:11:04,512\nThe default is negotiate.\n\n206\n00:11:04,512 --> 00:11:06,830\nAll right.\nIt's gonna negotiate and\n\n207\n00:11:06,830 --> 00:11:11,000\nbecause these are two Cisco switches,\nit's gonna negotiate and pick out ISL.\n\n208\n00:11:11,000 --> 00:11:16,475\nISL, it doesn't give you any\nfeature advantages over 802.1q so\n\n209\n00:11:16,475 --> 00:11:20,109\n802.1q can do everything that ISL does.\n\n210\n00:11:22,340 --> 00:11:25,130\nAll right, but\n802.1q is inserting a tag in the frame.\n\n211\n00:11:25,130 --> 00:11:29,510\nIt changes the size of the frame and\nas a result it has to recalculate the CRC,\n\n212\n00:11:29,510 --> 00:11:32,600\nthe checksum on every frame that it sends,\nso\n\n213\n00:11:32,600 --> 00:11:35,435\nthat's a mathematical operation\nthat's gotta be performed.\n\n214\n00:11:35,435 --> 00:11:38,275\nWith ISL, we just wrap up the frame.\n\n215\n00:11:38,275 --> 00:11:39,775\nSo the frame is intact.\n\n216\n00:11:39,775 --> 00:11:42,675\nSo it's a little less intensive.\n\n217\n00:11:42,675 --> 00:11:45,335\nAnd so\nin the old days that made a difference.\n\n218\n00:11:45,335 --> 00:11:47,450\nAnd so ISL was preferred.\n\n219\n00:11:47,450 --> 00:11:50,655\nNowadays it's all done in hardware,\nso it makes no difference.\n\n220\n00:11:50,655 --> 00:11:55,345\nSo almost everyone uses .1q, but\nISL is still the default, just for\n\n221\n00:11:55,345 --> 00:11:58,380\nbackwards compatibility with older,\nolder systems.\n\n222\n00:11:58,380 --> 00:12:02,410\nSo those are kind of our three choices\nthere as far as what we wanna go with.\n\n223\n00:12:02,410 --> 00:12:10,590\nNow, if you leave it to the dynamic\nsetting which is negotiate, right.\n\n224\n00:12:10,590 --> 00:12:15,700\nYou can do that and it'll just figure\nout whatever works between the two.\n\n225\n00:12:15,700 --> 00:12:19,190\nBut if you want to know that it's set\nright, you're gonna manually set these,\n\n226\n00:12:19,190 --> 00:12:20,110\nand that's what I do.\n\n227\n00:12:20,110 --> 00:12:25,463\nI don't like to leave anything up for\nnegotiation, I almost always hard set it.\n\n228\n00:12:25,463 --> 00:12:31,505\nAll right, so we can go in here, and\nif I set this side to .1q, all right?\n\n229\n00:12:31,505 --> 00:12:33,942\nSo switch one is now set to .1q,\n\n230\n00:12:33,942 --> 00:12:38,130\non the other side I'm gonna\nsee those interfaces reset.\n\n231\n00:12:42,505 --> 00:12:47,276\nAnd when I look at the trunks, now they've\nnegotiated 802.1q from the other side,\n\n232\n00:12:47,276 --> 00:12:47,922\nall right.\n\n233\n00:12:47,922 --> 00:12:50,005\nBut if I hard set that here.\n\n234\n00:12:53,296 --> 00:12:57,130\nSo if I say switchport mode trunk.\n\n235\n00:12:57,130 --> 00:13:02,060\nSwitchport trunk,\nI'm sorry switchport mode\n\n236\n00:13:02,060 --> 00:13:06,505\ntrunk encapsulation, there we go, ISL.\n\n237\n00:13:06,505 --> 00:13:09,823\nAll right, so\nI'm gonna hard set it to ISL,\n\n238\n00:13:09,823 --> 00:13:13,250\noh it's complaining\nabout it being in auto.\n\n239\n00:13:15,940 --> 00:13:21,838\nI'm gonna do a switchport no negotiate,\nno I gotta keep dynamic on that plate.\n\n240\n00:13:21,838 --> 00:13:25,255\nAll right, well I believe it took effect\nanyway so let's just take a look at that.\n\n241\n00:13:26,838 --> 00:13:28,130\nIt did, all right.\n\n242\n00:13:28,130 --> 00:13:33,230\nSo I'm in auto mode, I became a trunk\nbecause the other side requested it.\n\n243\n00:13:33,230 --> 00:13:37,570\nBut my encapsulation is ISL,\nthe other side is .1q.\n\n244\n00:13:37,570 --> 00:13:39,520\nNow I didn't get an error\nmessage about that.\n\n245\n00:13:39,520 --> 00:13:42,110\n>> Nope.\n>> But I do see right here that I am not\n\n246\n00:13:42,110 --> 00:13:42,710\ntrunking so\n\n247\n00:13:42,710 --> 00:13:47,570\neven though the other side asked to be\na trunk, I'm still in an access port.\n\n248\n00:13:47,570 --> 00:13:49,970\n>> Yeah.\n>> And so that's kind of where we're left.\n\n249\n00:13:49,970 --> 00:13:54,110\n>> So let's not forget that we wanna\nmake sure that we verify the ideas and\n\n250\n00:13:54,110 --> 00:13:56,220\nsettings on the trunks on both sides.\n\n251\n00:13:56,220 --> 00:13:59,130\nNormally in a production environment\nwhat's going to end up happening for\n\n252\n00:13:59,130 --> 00:14:00,070\nus is simple.\n\n253\n00:14:00,070 --> 00:14:01,540\nWe're not going to allow\nthis auto anything.\n\n254\n00:14:01,540 --> 00:14:04,810\nWe're not going to do any\ndynamic types of configurations.\n\n255\n00:14:04,810 --> 00:14:08,910\nWe're going to hard set these both so\nthat we know exactly what's going on.\n\n256\n00:14:08,910 --> 00:14:12,700\nAnd Don, in terms of troubleshooting\nthat's normally what we also do as well.\n\n257\n00:14:12,700 --> 00:14:13,450\nRight?\n\n258\n00:14:13,450 --> 00:14:16,705\nWe, instead of actually leaving anything\nto auto negotiation we go and set it,\n\n259\n00:14:16,705 --> 00:14:18,211\nverify that it can work statically,\n\n260\n00:14:18,211 --> 00:14:20,760\nand then we work from\nthere a lot of times, too.\n\n261\n00:14:20,760 --> 00:14:23,810\nAnd that way we can actually figure\nout what actually got misconfigured or\n\n262\n00:14:23,810 --> 00:14:24,440\nwhat didn't work.\n\n263\n00:14:26,360 --> 00:14:28,100\n>> Yeah, and here's what I normally do.\n\n264\n00:14:29,620 --> 00:14:30,775\nExcept I normally spell it right.\n\n265\n00:14:30,775 --> 00:14:33,070\n>> [LAUGH]\n>> There we go.\n\n266\n00:14:33,070 --> 00:14:33,930\nSwitchport mode trunk.\n\n267\n00:14:33,930 --> 00:14:35,600\n>> Yeah.\n>> That says we want to be a trunk.\n\n268\n00:14:35,600 --> 00:14:37,190\nDon't be an access port.\n\n269\n00:14:37,190 --> 00:14:41,442\nSwitchport trunk encapsulation dot1q,\nwe want to use 802.1q, and\n\n270\n00:14:41,442 --> 00:14:43,000\nswitchport nonegotiate.\n\n271\n00:14:43,000 --> 00:14:44,720\nDon't negotiate anything\nwith the other side.\n\n272\n00:14:44,720 --> 00:14:45,810\nYou are a trunk and\n\n273\n00:14:45,810 --> 00:14:49,580\nyou are running dot1q and we don't\ncare what the other side is doing.\n\n274\n00:14:49,580 --> 00:14:52,260\nEither they figured it out or\nthey don't and that's the end of it.\n\n275\n00:14:52,260 --> 00:14:55,130\nSo I almost always do this right here.\n\n276\n00:14:55,130 --> 00:14:59,540\nI don't like leaving things up to\nchance and then on access ports,\n\n277\n00:15:00,770 --> 00:15:07,520\nI'll normally say switchport mode access,\nswitchport nonegotiate.\n\n278\n00:15:07,520 --> 00:15:10,530\nAgain, saying you will be an access port.\n\n279\n00:15:10,530 --> 00:15:12,490\nDo not do any negotiation.\n\n280\n00:15:12,490 --> 00:15:14,790\nDo not try and become a trunk or\nanything like that.\n\n281\n00:15:14,790 --> 00:15:18,090\nJust be an access port and\nbe done with it, all right.\n\n282\n00:15:18,090 --> 00:15:19,620\n>> Yup.\n>> So, definitely handy.\n\n283\n00:15:19,620 --> 00:15:21,690\nDefinitely a good configuration to use.\n\n284\n00:15:21,690 --> 00:15:24,290\n>> Yeah.\nIt doesn't mean it's not possible that we\n\n285\n00:15:24,290 --> 00:15:27,860\ncan, it doesn't mean that we shouldn't,\nI don't say that.\n\n286\n00:15:27,860 --> 00:15:28,400\nAll right.\n\n287\n00:15:28,400 --> 00:15:31,030\nIt doesn't mean that we\ncan't use Dynamic Trunking.\n\n288\n00:15:31,030 --> 00:15:33,751\nI don't know what I was\nwanting to say here.\n\n289\n00:15:33,751 --> 00:15:36,072\n>> [LAUGH]\n>> But normally what you'll see, again,\n\n290\n00:15:36,072 --> 00:15:37,838\nis that hard setting it is the way to go.\n\n291\n00:15:37,838 --> 00:15:41,400\nAnd that makes it easier for us because\nthen we can go back and just troubleshoot\n\n292\n00:15:41,400 --> 00:15:46,103\nwhat we want and not trying to figure out,\nam I on a 3550, am I on a 3560?\n\n293\n00:15:46,103 --> 00:15:49,500\nI don't really know and\nthen trying to figure all that stuff out.\n\n294\n00:15:49,500 --> 00:15:52,849\nSetting it, hard coding is more\nwhat we normally would do.\n\n295\n00:15:52,849 --> 00:15:55,853\n>> All right, so at this point we\nshould be up and trunking healthily,\n\n296\n00:15:55,853 --> 00:15:57,711\nwell actually no, we're broken right?\n\n297\n00:15:57,711 --> 00:15:59,851\n>> Yep.\n>> Cuz I hard set this side to ISL.\n\n298\n00:15:59,851 --> 00:16:03,464\nSo let me put this one to dot1q And,\n\n299\n00:16:03,464 --> 00:16:09,250\nI guess I could just go ahead and\nhard set the rest of this.\n\n300\n00:16:11,180 --> 00:16:12,220\nThere we go.\n\n301\n00:16:12,220 --> 00:16:16,370\nSo I've now hard set it as a trunk,\nhard set it to not negotiate.\n\n302\n00:16:16,370 --> 00:16:18,990\nIf I take a look at my configuration,\n\n303\n00:16:18,990 --> 00:16:21,920\nI can see those three commands\nthat I put in notepad.\n\n304\n00:16:21,920 --> 00:16:24,460\nThat's gonna hard set\nthese guys as a trunk.\n\n305\n00:16:24,460 --> 00:16:27,990\nAnd then technically I don't have to do\nit on the other side cuz the other side's\n\n306\n00:16:27,990 --> 00:16:31,240\nnegotiating, but\nagain my own little paranoia.\n\n307\n00:16:31,240 --> 00:16:34,040\nI like to go ahead and hard set them so.\n\n308\n00:16:34,040 --> 00:16:38,576\nActually I'm just gonna cheat here\na little bit and do some copy and paste.\n\n309\n00:16:38,576 --> 00:16:39,258\nThere.\n\n310\n00:16:39,258 --> 00:16:43,483\nAnd I shouldn't see the porch reset this\ntime because it is already running in\n\n311\n00:16:43,483 --> 00:16:47,188\nthese modes now I am just statically\ndefining it so it's in there and\n\n312\n00:16:47,188 --> 00:16:48,110\nit's in place.\n\n313\n00:16:48,110 --> 00:16:53,041\nSo at this point I am trunking now,\nyou know this whole time I have been using\n\n314\n00:16:53,041 --> 00:16:58,420\nthe show interface and\nan interface name trunk command to verify.\n\n315\n00:16:58,420 --> 00:17:03,730\nThe problem with this command is it\nonly shows you one interface at a time.\n\n316\n00:17:03,730 --> 00:17:07,690\nAnd so, if you're trying to verify several\ntrunks that can be a little annoying.\n\n317\n00:17:07,690 --> 00:17:12,500\nSo another command we can use is\nthe show interface trunk command.\n\n318\n00:17:12,500 --> 00:17:14,490\nAll right,\nyou leave the interface name off.\n\n319\n00:17:14,490 --> 00:17:16,860\nThis will show you all of your trunks.\n\n320\n00:17:16,860 --> 00:17:20,360\nAnd so you can run it and\nI can see here's both of my trunks.\n\n321\n00:17:20,360 --> 00:17:23,948\nActually I can see that I\nstill have port numbers,\n\n322\n00:17:23,948 --> 00:17:28,740\nI must not have been in the range\ncommand when I did that minute ago.\n\n323\n00:17:28,740 --> 00:17:33,212\nSee, a good demonstration\nof verifying that you\n\n324\n00:17:33,212 --> 00:17:38,238\nare making your job,\n[LAUGH] that's not what I wanted.\n\n325\n00:17:38,238 --> 00:17:39,158\nLet's try that again.\n\n326\n00:17:46,358 --> 00:17:47,528\nThere we go, I got my commands.\n\n327\n00:17:47,528 --> 00:17:49,998\nSo, if you try and\nstatically assign to be a trunk,\n\n328\n00:17:49,998 --> 00:17:53,400\nyou can't do that when you still\nhave your encapsulation set to auto.\n\n329\n00:17:53,400 --> 00:17:55,950\nSo you need to define\nyour encapsulation first.\n\n330\n00:17:55,950 --> 00:17:58,610\nI'm going to take my notes here and\nI'll just move that\n\n331\n00:18:03,070 --> 00:18:05,700\nMove that to be the first line.\n\n332\n00:18:05,700 --> 00:18:06,450\nThere.\n\n333\n00:18:06,450 --> 00:18:07,240\nAll right.\n\n334\n00:18:07,240 --> 00:18:09,500\nSo anyhow that should take care of it.\n\n335\n00:18:09,500 --> 00:18:10,300\nSo let's try this again.\n\n336\n00:18:10,300 --> 00:18:15,260\nWe'll do a show interface trunk and now we\nshould see that our settings are the same.\n\n337\n00:18:15,260 --> 00:18:16,020\nThere we go.\n\n338\n00:18:16,020 --> 00:18:18,390\nThey're both set to mode on.\n\n339\n00:18:18,390 --> 00:18:21,550\nThat means they are going to\nbe a trunk no matter what.\n\n340\n00:18:21,550 --> 00:18:23,340\nTheir encapsulation is set to 802.1q.\n\n341\n00:18:23,340 --> 00:18:25,028\nThere going to use that no matter what.\n\n342\n00:18:25,028 --> 00:18:26,390\nIt's not an end dash, right?\n\n343\n00:18:26,390 --> 00:18:27,610\nIt's not negotiated.\n\n344\n00:18:27,610 --> 00:18:31,358\nAnd then their current status is trunking\nwhich they're going to be no matter what\n\n345\n00:18:31,358 --> 00:18:32,510\nthe other side is set to.\n\n346\n00:18:32,510 --> 00:18:34,020\nThey are going to be trunk.\n\n347\n00:18:35,510 --> 00:18:37,730\nAnd my other side should\nshow the same thing.\n\n348\n00:18:40,720 --> 00:18:42,310\nAnd it does\n>> Yep.\n\n349\n00:18:42,310 --> 00:18:46,640\n>> Right, now the other thing I like to\ndo is go to all of my other ports and\n\n350\n00:18:46,640 --> 00:18:48,280\nhard set them to access.\n\n351\n00:18:48,280 --> 00:18:52,870\nJust to make sure that a client doesn't\ntry and do some kind of VLAN exploit or\n\n352\n00:18:52,870 --> 00:18:56,000\nwhatever, and so that's why I went\nahead and threw in Notepad here.\n\n353\n00:18:56,000 --> 00:18:59,280\nHere's how you'd statically\nassign an access port.\n\n354\n00:18:59,280 --> 00:19:02,540\n>> Remember on a 3550,\nevery single port is what?\n\n355\n00:19:02,540 --> 00:19:07,080\nIs set to desirable and so that means\nif you wanted to you might actually be\n\n356\n00:19:07,080 --> 00:19:08,880\nable to bring another switch on.\n\n357\n00:19:08,880 --> 00:19:10,150\nParts that your switch and\n\n358\n00:19:10,150 --> 00:19:14,000\nit automatically wants to become a trunk\nanyways and then you're ready to go.\n\n359\n00:19:14,000 --> 00:19:16,860\nSo usually by hard setting\nit to an access port.\n\n360\n00:19:16,860 --> 00:19:19,080\nIt helps to eliminate that\nparticular issue for us.\n\n361\n00:19:19,080 --> 00:19:21,850\n>> And you know an attacker,\nthey don't even have to bring in a switch.\n\n362\n00:19:21,850 --> 00:19:23,790\nThey could bring in their laptop and\n\n363\n00:19:23,790 --> 00:19:28,025\nrun something like virtual box where they\ncan take VMs and stick them on different\n\n364\n00:19:28,025 --> 00:19:31,650\nVLANs and that basically makes\na trunk out of your computer.\n\n365\n00:19:31,650 --> 00:19:35,420\nAnd if your switch is set to dynamic,\nthen they get a trunk and\n\n366\n00:19:35,420 --> 00:19:37,870\nnow they can basically choose\nwhat VLAN they wanna be on.\n\n367\n00:19:37,870 --> 00:19:39,770\nSo it's a very simple attack and\n\n368\n00:19:39,770 --> 00:19:42,630\nvery easy to prevent by\nstatically assigning those ports.\n\n369\n00:19:42,630 --> 00:19:43,130\n>> Yeah.\n\n370\n00:19:44,370 --> 00:19:45,130\n>> All right.\n\n371\n00:19:45,130 --> 00:19:48,850\nSo when it comes to trunking,\nthe main things we wanna watch out for\n\n372\n00:19:48,850 --> 00:19:50,730\nare just bad configurations\non the two sides.\n\n373\n00:19:50,730 --> 00:19:52,680\n>> Right.\n>> The configurations need to match.\n\n374\n00:19:52,680 --> 00:19:54,810\nAnd also bad defaults, right?\n\n375\n00:19:54,810 --> 00:19:57,610\nThe default settings on some of\nthese ports might not match up.\n\n376\n00:19:57,610 --> 00:20:00,100\nAnd that's where we're\ngonna get a broken trunk.\n\n377\n00:20:00,100 --> 00:20:02,360\nSo, not all that much to troubleshoot.\n\n378\n00:20:02,360 --> 00:20:04,790\nWe don't have a bunch of\ncrazy debug commands or\n\n379\n00:20:04,790 --> 00:20:07,880\nanything of that nature\nbecause it is low level stuff.\n\n380\n00:20:07,880 --> 00:20:10,840\nYou just make sure your\nencapsulation settings are the same.\n\n381\n00:20:10,840 --> 00:20:11,340\nAnd it worked.\n\n382\n00:20:12,740 --> 00:20:13,630\nAll right.\n\n383\n00:20:13,630 --> 00:20:16,650\nSo once we've got our trunks up and\nthat's,\n\n384\n00:20:16,650 --> 00:20:19,030\ncan you think of anything\nelse with dynamic trunks?\n\n385\n00:20:19,030 --> 00:20:20,510\n>> Not with dynamic trunks,\ncan't think of anything, no.\n\n386\n00:20:20,510 --> 00:20:21,730\n>> Okay, all right.\n\n387\n00:20:21,730 --> 00:20:24,010\nThe other things that we\nwanna take a look at,\n\n388\n00:20:24,010 --> 00:20:28,640\nwhat we just looked at right there was\nbasic trunking, and we got a few other\n\n389\n00:20:28,640 --> 00:20:33,080\nthings that we need to tackle which is\nI guess we already talked about this.\n\n390\n00:20:33,080 --> 00:20:37,120\nDynamic and using the correct pairings.\n\n391\n00:20:37,120 --> 00:20:41,430\nAnd when I say use correct pairings,\nwhen we talk about these.\n\n392\n00:20:41,430 --> 00:20:44,910\nSo if we want a successful trunk\n\n393\n00:20:46,480 --> 00:20:52,910\nthen we need one side to be auto and\nthe other side to be desirable.\n\n394\n00:20:52,910 --> 00:20:54,280\nWhich I think I just spelled wrong.\n\n395\n00:20:54,280 --> 00:20:54,780\n>> No, no.\n\n396\n00:20:54,780 --> 00:20:55,780\n>> That's right.\nOkay.\n\n397\n00:20:55,780 --> 00:20:56,780\nOr the opposite.\n\n398\n00:20:59,230 --> 00:21:03,292\nIs if one side is Desirable and\nthe other side is Auto.\n\n399\n00:21:03,292 --> 00:21:04,870\nAll right.\n\n400\n00:21:04,870 --> 00:21:10,310\nOr if one side is Desirable and\nthe other side is Desirable.\n\n401\n00:21:11,310 --> 00:21:12,030\nRight?\n\n402\n00:21:12,030 --> 00:21:17,130\nThere's also, if one is statically\ndefined as a trunk, and\n\n403\n00:21:17,130 --> 00:21:21,370\nthe other is Auto/Desirable, right?\n\n404\n00:21:21,370 --> 00:21:23,760\nAnd then the reverse of that being true.\n\n405\n00:21:23,760 --> 00:21:28,980\nSo these are some of the scenarios\nwhere we can build up a trunk, right.\n\n406\n00:21:28,980 --> 00:21:34,389\nSo each of those scenarios right there\nwould successfully build a trunk.\n\n407\n00:21:35,458 --> 00:21:41,220\nA failed trunk would\noccur in cases where we\n\n408\n00:21:41,220 --> 00:21:46,380\nhad Auto being plugged into Auto or\n\n409\n00:21:46,380 --> 00:21:50,875\nan Access port plugged into Auto or\nvice versa.\n\n410\n00:21:50,875 --> 00:21:51,980\nRight?\n\n411\n00:21:51,980 --> 00:21:55,020\nSo these are just examples.\n\n412\n00:21:55,020 --> 00:21:57,320\nWhere we would fail to build up a trunk.\n\n413\n00:21:57,320 --> 00:22:02,149\nSo, dynamic trunking protocol, it sounds\nnice, but at the end of the day if\n\n414\n00:22:02,149 --> 00:22:07,430\nyou statically assign your stuff,\nyou don't have to worry about it.\n\n415\n00:22:07,430 --> 00:22:09,880\nSo let's see, what's next on our agenda?\n\n416\n00:22:09,880 --> 00:22:12,900\n>> Let's talk about some\nSpanning Tree Protocol here.\n\n417\n00:22:12,900 --> 00:22:14,970\n>> Yeah, good old Spanning Tree Protocol.\n\n418\n00:22:14,970 --> 00:22:20,210\nSpanning Tree Protocol is on our switches\nin order to prevent loops, right.\n\n419\n00:22:20,210 --> 00:22:23,110\nIt does loop detection,\nit's its primary purpose and for\n\n420\n00:22:23,110 --> 00:22:25,030\nthe most part it does a great job, right.\n\n421\n00:22:25,030 --> 00:22:27,480\nIt'll spot these loops and\nit will fix them, but\n\n422\n00:22:27,480 --> 00:22:32,630\nsometimes it can cause behaviors that\naren't exactly what we want, right.\n\n423\n00:22:32,630 --> 00:22:34,880\nAnd I think we got a situation\nlike that right here, don't we?\n\n424\n00:22:36,200 --> 00:22:36,700\nLet's see.\n\n425\n00:22:38,640 --> 00:22:43,680\nI think we've created the situation and\nyes, yes, we have.\n\n426\n00:22:43,680 --> 00:22:44,770\nAll right.\n\n427\n00:22:44,770 --> 00:22:49,550\nSo on our two switches here,\nthe two switches that are right behind me,\n\n428\n00:22:49,550 --> 00:22:53,080\nbasically I've got cables on port 1 and\n\n429\n00:22:53,080 --> 00:22:56,680\n2 running down to port 1 and\n2 on the other switch, right.\n\n430\n00:22:56,680 --> 00:23:01,820\nAnd If I've got two cables run between\nthem that's two 100 megabit connections.\n\n431\n00:23:01,820 --> 00:23:04,340\nI'd like to take advantage of both cables,\nbut\n\n432\n00:23:04,340 --> 00:23:06,570\nSpanning Tree Protocol\nlooks at those cables.\n\n433\n00:23:06,570 --> 00:23:10,210\nAnd it says, no that's a loop and\nI've gotta fix it, right.\n\n434\n00:23:10,210 --> 00:23:12,430\nI've got to shut it off or whatever.\n\n435\n00:23:12,430 --> 00:23:17,360\nWe'll do a sad little\npicture here real quick.\n\n436\n00:23:17,360 --> 00:23:21,130\nAnd kind of illustrate\nwhat's going on in there.\n\n437\n00:23:21,130 --> 00:23:23,990\nSo basically when you've\ngot switches like this, so\n\n438\n00:23:23,990 --> 00:23:27,680\nI've got one switch and two switch.\n\n439\n00:23:27,680 --> 00:23:32,360\nAnd when we run that cable\nthat's going between the two,\n\n440\n00:23:32,360 --> 00:23:36,340\nto us we see that and we're like you know\ngreat so here's one up link cable and\n\n441\n00:23:36,340 --> 00:23:37,840\nhere's another up link cable.\n\n442\n00:23:37,840 --> 00:23:39,770\nAnd we view that as redundancy right.\n\n443\n00:23:39,770 --> 00:23:42,710\nHere's this other one that's there and\nmaybe we can take advantage of both or\n\n444\n00:23:42,710 --> 00:23:46,350\nwhatever but by default the switch\nis going to look at them,\n\n445\n00:23:46,350 --> 00:23:48,930\nwhether they're an access board or\na trunk, it doesn't care.\n\n446\n00:23:48,930 --> 00:23:53,896\nIt's going to look at it and it's going\nto say well here's the deal, if somebody\n\n447\n00:23:53,896 --> 00:23:58,587\ngenerates a broadcast, the broadcast\nis going to hit both of those cables.\n\n448\n00:23:58,587 --> 00:24:03,260\nGo across the line and\nloop right back to us.\n\n449\n00:24:03,260 --> 00:24:07,493\nLike that and so is the other one,\nit's gonna go across the line and\n\n450\n00:24:07,493 --> 00:24:09,390\nloop right back to us.\n\n451\n00:24:09,390 --> 00:24:10,535\nCreating a loop.\n\n452\n00:24:10,535 --> 00:24:12,800\nRight?\nAnd not just a broadcast loop.\n\n453\n00:24:12,800 --> 00:24:15,030\nOur unicast will do the same thing.\n\n454\n00:24:15,030 --> 00:24:17,190\n>> Yeah.\n>> And they'll just keep rattling around\n\n455\n00:24:17,190 --> 00:24:17,990\nforever and\n\n456\n00:24:17,990 --> 00:24:21,615\never cuz layer two frames don't have time\nto live, it's like layer three stuff.\n\n457\n00:24:21,615 --> 00:24:23,100\n>> Yeah.\n\n458\n00:24:23,100 --> 00:24:24,990\n>> So that's a problem, right?\n\n459\n00:24:24,990 --> 00:24:29,245\nAnd fortunately Spanning Tree protocol\nsteps in and fixes that for us because it,\n\n460\n00:24:29,245 --> 00:24:33,870\nwell it shuts down one of the lines,\nand so in our current configuration,\n\n461\n00:24:33,870 --> 00:24:38,170\nthe way that we've got it, one of\nthese guys is being turned off, right?\n\n462\n00:24:38,170 --> 00:24:39,680\nNow I don't really know which one.\n\n463\n00:24:39,680 --> 00:24:41,460\nWe covered that in the Spanning Tree show,\n\n464\n00:24:41,460 --> 00:24:45,600\nhow to use MAC addresses to figure out who\nit is that's gonna be shutting off a port.\n\n465\n00:24:45,600 --> 00:24:47,190\nBut I can guarantee it's happened.\n\n466\n00:24:47,190 --> 00:24:49,240\nIf we take a look at our switches here.\n\n467\n00:24:49,240 --> 00:24:52,085\nIf I do a show Spanning-Tree.\n\n468\n00:24:54,330 --> 00:24:55,540\nAll right.\n\n469\n00:24:55,540 --> 00:24:58,550\nOn VLAN 1, I can see here that ports 1 and\n\n470\n00:24:58,550 --> 00:25:02,320\n2 on this switch are forwarding and\nI've got other VLANs, 10, 20, 30, 40,\n\n471\n00:25:02,320 --> 00:25:06,800\n50 and here it looks like all of\nthese ports are forwarding, right.\n\n472\n00:25:06,800 --> 00:25:10,060\nI can see right here where\nthe ports are up and healthy.\n\n473\n00:25:10,060 --> 00:25:13,080\nSo as far as this switch is concerned,\nall the ports are forwarding but\n\n474\n00:25:13,080 --> 00:25:14,670\nI kind of expect that.\n\n475\n00:25:14,670 --> 00:25:16,320\nBecause of this note right here, right?\n\n476\n00:25:16,320 --> 00:25:17,460\nThis bridge is root.\n\n477\n00:25:17,460 --> 00:25:19,550\nThe root bridge doesn't shut off ports,\nright?\n\n478\n00:25:19,550 --> 00:25:20,750\nIt's always somebody else.\n\n479\n00:25:20,750 --> 00:25:21,790\nNot always, but usually.\n\n480\n00:25:23,150 --> 00:25:25,250\nAll right.\nBut if we take a look at switch one I\n\n481\n00:25:25,250 --> 00:25:26,770\ncan see something a little bit different.\n\n482\n00:25:26,770 --> 00:25:28,795\n>> Yeah, look at port number two there.\n\n483\n00:25:28,795 --> 00:25:29,740\n>> Yeah.\nPorts one and two.\n\n484\n00:25:29,740 --> 00:25:31,170\nPort number two is not happy.\n\n485\n00:25:31,170 --> 00:25:32,910\nSo port one is forwarding.\n\n486\n00:25:32,910 --> 00:25:33,950\nPort two is blocking.\n\n487\n00:25:33,950 --> 00:25:36,730\nAnd that's on VLAN 1 as I continue\nto look at the other VLANs.\n\n488\n00:25:36,730 --> 00:25:38,470\nIt's the same thing, right?\n\n489\n00:25:38,470 --> 00:25:43,400\nThey're all blocking on that port two.\n\n490\n00:25:43,400 --> 00:25:48,540\nSo what I end up with is the cable\nin port one is moving all my data,\n\n491\n00:25:48,540 --> 00:25:51,690\nthe cable in port two is\neffectively not being used.\n\n492\n00:25:51,690 --> 00:25:54,380\nAnd if I visually inspect\nthe front of those switches,\n\n493\n00:25:54,380 --> 00:25:57,895\nport number two on one of the switches has\na little orange light letting me know that\n\n494\n00:25:57,895 --> 00:25:59,570\nit's being suppressed.\n\n495\n00:25:59,570 --> 00:26:01,560\nSo, you know, it's not functional.\n\n496\n00:26:01,560 --> 00:26:04,930\nAll right, now is that a bug?\n\n497\n00:26:04,930 --> 00:26:05,760\nIs that a problem?\n\n498\n00:26:06,930 --> 00:26:10,200\nNot in a true sense cuz it\nis solving a loop, right?\n\n499\n00:26:11,360 --> 00:26:15,040\nBut it's not what we want and so\nwe may need to override that.\n\n500\n00:26:15,040 --> 00:26:19,300\nNow there's a couple of different\nsolutions to getting past this and so\n\n501\n00:26:19,300 --> 00:26:21,910\nI want to show you guys the different\nsolutions for getting around it and\n\n502\n00:26:21,910 --> 00:26:23,360\ngetting both these ports active.\n\n503\n00:26:23,360 --> 00:26:25,700\nBut we are running a little bit\nlow on time for the segment.\n\n504\n00:26:25,700 --> 00:26:26,430\n>> I just saw that.\n\n505\n00:26:26,430 --> 00:26:27,610\n>> So why don't we do this.\n\n506\n00:26:27,610 --> 00:26:29,160\nWhy don't we stop here and take a break.\n\n507\n00:26:29,160 --> 00:26:30,420\nRonnie got anything else?\n\n508\n00:26:30,420 --> 00:26:32,070\n>> No, I think we're ready to go.\n\n509\n00:26:32,070 --> 00:26:34,400\n>> Okay, well let's stop here and\ntake a break and when we get back,\n\n510\n00:26:34,400 --> 00:26:37,910\nwe'll take a look at two solutions to\nthe problem and how we can fix it and\n\n511\n00:26:37,910 --> 00:26:42,140\nhow you pick which one you want\nversus which one you don't.\n\n512\n00:26:42,140 --> 00:26:42,910\n>> Sounds good.\n\n513\n00:26:42,910 --> 00:26:44,550\n>> All right, stay tuned.\n\n514\n00:26:44,550 --> 00:26:46,810\nWe'll be back after this.\n\n515\n00:26:46,810 --> 00:26:52,916\n[SOUND] All right, welcome back everybody.\n\n516\n00:26:52,916 --> 00:26:57,025\nSo what we're gonna do now is,\nwe kinda took a look at trunking and\n\n517\n00:26:57,025 --> 00:26:58,860\nwe got that sorted out.\n\n518\n00:26:58,860 --> 00:27:00,450\nBut now that we got our two trunks up,\n\n519\n00:27:00,450 --> 00:27:05,440\nspanning tree protocol is shutting off one\nof our ports and we want both ports to be\n\n520\n00:27:05,440 --> 00:27:08,870\nactive so that we can take advantage\nof the extra bandwidth and stuff.\n\n521\n00:27:08,870 --> 00:27:12,000\nAnd sure it's nice to have where\none line fails the other kicks in.\n\n522\n00:27:12,000 --> 00:27:15,333\nBut, realistically how often is a line\ngoing to fail when you're uplinking\n\n523\n00:27:15,333 --> 00:27:16,490\nbetween two switches?\n\n524\n00:27:16,490 --> 00:27:17,575\nIt's pretty rare.\n\n525\n00:27:17,575 --> 00:27:18,640\n>> Yeah.\n>> So you might as well\n\n526\n00:27:18,640 --> 00:27:20,789\ntake advantage of the extra\nbandwidth while you can.\n\n527\n00:27:20,789 --> 00:27:21,754\nAll right.\n\n528\n00:27:21,754 --> 00:27:24,660\nSo there's two approaches\nto fixing the problem and\n\n529\n00:27:24,660 --> 00:27:28,030\nit depends on how we choose to solve this.\n\n530\n00:27:29,540 --> 00:27:33,948\nSolution number one is we divide our\ntraffic in half, and we send half\n\n531\n00:27:33,948 --> 00:27:39,640\nthe traffic over one line and we send half\nthe traffic over the other, all right?\n\n532\n00:27:39,640 --> 00:27:43,172\nWe can do this by manipulating\nspanning tree, right?\n\n533\n00:27:43,172 --> 00:27:46,520\nWith spanning tree,\nsomebody gets elected the root bridge,\n\n534\n00:27:46,520 --> 00:27:49,580\nand then when a loop is detected,\nthe non-root\n\n535\n00:27:49,580 --> 00:27:51,260\nbridges have to shut off a port\n>> Right.\n\n536\n00:27:51,260 --> 00:27:52,640\n>> And that fixes the problem.\n\n537\n00:27:52,640 --> 00:27:57,600\nBut on a Cisco switch,\nit's doing this on a per VLAN basis.\n\n538\n00:27:57,600 --> 00:28:00,270\nWe've got six VLANs,\nVLAN 1, 10, 20, 30, 40, 50.\n\n539\n00:28:00,270 --> 00:28:07,750\nAnd basically those VLANS, right now all\nof them are being sent over one link.\n\n540\n00:28:07,750 --> 00:28:08,610\nAnd that's what I saw.\n\n541\n00:28:08,610 --> 00:28:12,410\nLet me bring up that switch again.\n\n542\n00:28:12,410 --> 00:28:15,780\nSo like when I looked at switch 2 here,\nI didn't see any shutdown ports, but\n\n543\n00:28:15,780 --> 00:28:16,604\non switch 1 I did.\n\n544\n00:28:16,604 --> 00:28:21,492\nAnd on every VLAN\n>> [INAUDIBLE]\n\n545\n00:28:21,492 --> 00:28:23,624\n>> Here let's see if I can create\n\n546\n00:28:23,624 --> 00:28:27,552\na filtered view that just\nshows me what I want, right?\n\n547\n00:28:27,552 --> 00:28:28,924\nSo I want.\n\n548\n00:28:36,574 --> 00:28:39,988\n[LAUGH]\n>> This is getting depressing.\n\n549\n00:28:44,665 --> 00:28:47,320\n>> There, all right.\n\n550\n00:28:47,320 --> 00:28:48,000\n>> Wow, good job.\n\n551\n00:28:48,000 --> 00:28:48,870\nNice.\n>> Well, you know,\n\n552\n00:28:48,870 --> 00:28:49,900\nif you learn\n>> [LAUGH]\n\n553\n00:28:49,900 --> 00:28:51,670\n>> Your filtering commands you can create\n\n554\n00:28:51,670 --> 00:28:53,460\noutputs that have exactly what you want.\n\n555\n00:28:53,460 --> 00:28:56,830\nSo this is showing me\nwhich VLANs I've got.\n\n556\n00:28:56,830 --> 00:28:59,910\nAnd then which ports are forwarding and\nblocking and so really,\n\n557\n00:28:59,910 --> 00:29:02,190\njust kinda trimming it down there.\n\n558\n00:29:02,190 --> 00:29:02,791\nAll right.\n\n559\n00:29:02,791 --> 00:29:06,054\nSo basically what I can see is\nthat on all of these VLANs,\n\n560\n00:29:06,054 --> 00:29:11,660\nit's port one that's forwarding and it's\nport two that's blocking and that's that.\n\n561\n00:29:11,660 --> 00:29:16,086\nWell, what if I changed it so\nthat some were blocking on port 1 and\n\n562\n00:29:16,086 --> 00:29:18,344\nothers were blocking on port 2?\n\n563\n00:29:18,344 --> 00:29:21,745\nWell, I know I said there\nwas two ways to do this.\n\n564\n00:29:21,745 --> 00:29:23,970\nThere's actually three\nways that I can think of.\n\n565\n00:29:23,970 --> 00:29:27,440\nSo, option number one is\nprobably the easiest, and\n\n566\n00:29:27,440 --> 00:29:31,520\nthat is I can change who is the root for\neach VLAN.\n\n567\n00:29:31,520 --> 00:29:32,210\n>> Right.\n\n568\n00:29:32,210 --> 00:29:34,420\n>> And when I change who the route is,\n\n569\n00:29:34,420 --> 00:29:37,915\nthat's gonna manipulate which ports\nget shut down and which ports don't.\n\n570\n00:29:37,915 --> 00:29:40,430\nRight?\nSo that's one way that we can tackle it.\n\n571\n00:29:40,430 --> 00:29:42,440\nAll right let's tackle it that way first,\nand\n\n572\n00:29:42,440 --> 00:29:43,710\nthen we'll move through the other ones.\n\n573\n00:29:43,710 --> 00:29:46,210\nSo just to summarize them here\nbefore I jump into them, and so\n\n574\n00:29:46,210 --> 00:29:48,888\nyou can help me not forget any Ronnie.\n\n575\n00:29:48,888 --> 00:29:50,601\n>> [LAUGH]\n>> We'll do the routes first.\n\n576\n00:29:50,601 --> 00:29:53,130\n>> Okay.\n>> Then we'll modify the port priorities.\n\n577\n00:29:53,130 --> 00:29:54,930\nCuz that's another way to do it.\n\n578\n00:29:54,930 --> 00:29:59,660\nAnd then lastly, we'll do bonding\nthem into a single interface,\n\n579\n00:29:59,660 --> 00:30:00,750\nwhich also solves the problem.\n\n580\n00:30:00,750 --> 00:30:02,750\nSo we'll see three ways\nto solve the problem.\n\n581\n00:30:02,750 --> 00:30:04,600\nAll right, so\nthe first way is change the root.\n\n582\n00:30:04,600 --> 00:30:09,670\nAnd of the three, it's probably\nthe least efficient in my opinion.\n\n583\n00:30:09,670 --> 00:30:13,030\nBecause if I say I'm gonna make\nhalf my VLANs go over one link, and\n\n584\n00:30:13,030 --> 00:30:14,620\nhalf go over the other link.\n\n585\n00:30:14,620 --> 00:30:18,690\nIs my traffic actually divided\nup evenly amongst the VLANs?\n\n586\n00:30:18,690 --> 00:30:19,630\nProbably not.\n\n587\n00:30:19,630 --> 00:30:23,950\nWe almost always have one VLAN that's\nbusier than the others, and so\n\n588\n00:30:23,950 --> 00:30:27,630\nit's hard to create a fair and\nbalanced distribution.\n\n589\n00:30:27,630 --> 00:30:29,290\nLike Fox News on the cables.\n\n590\n00:30:29,290 --> 00:30:34,650\nSo [LAUGH], so anyhow, then we'll just\nuse the right cable and not the left one.\n\n591\n00:30:34,650 --> 00:30:35,490\nSo [LAUGH]\n>> [LAUGH]\n\n592\n00:30:35,490 --> 00:30:36,580\n>> So I'm gonna manipulate the root.\n\n593\n00:30:36,580 --> 00:30:43,340\nNow, right now if I do a show\nspanning-tree, switch 1 is not the root.\n\n594\n00:30:43,340 --> 00:30:47,650\nIt's just a bridge that's in\nthe spanning tree environment.\n\n595\n00:30:47,650 --> 00:30:50,250\nAnd that's because its MAC address, right?\n\n596\n00:30:50,250 --> 00:30:51,980\nHere's the MAC address of the root.\n\n597\n00:30:51,980 --> 00:30:55,510\nHere's the MAC address of\nthe switch that I'm on, switch one.\n\n598\n00:30:55,510 --> 00:30:58,350\nAnd if you'll notice, here I've got 196.\n\n599\n00:30:58,350 --> 00:31:00,240\nHere I've got 197.\n\n600\n00:31:00,240 --> 00:31:01,770\n196 is lower.\n\n601\n00:31:01,770 --> 00:31:04,810\nAnd so the other switch becomes the root,\nright?\n\n602\n00:31:06,070 --> 00:31:08,130\nBut, I can do something like this.\n\n603\n00:31:08,130 --> 00:31:12,603\nI could say Spanning, spasming.\n\n604\n00:31:12,603 --> 00:31:16,651\nSpanning-tree root.\n\n605\n00:31:16,651 --> 00:31:17,780\nShoot.\n\n606\n00:31:17,780 --> 00:31:21,975\nI need to say spanning-tree and then\nin the spanning tree command you'll see\n\n607\n00:31:21,975 --> 00:31:26,605\nwhere we can go through and\nwe can specify VLAN information.\n\n608\n00:31:26,605 --> 00:31:29,745\nAnd we can modify one VLAN or\nmultiple VLANs, and\n\n609\n00:31:29,745 --> 00:31:31,635\nI'm wanting to modify multiples.\n\n610\n00:31:31,635 --> 00:31:35,037\nSo let's say I do the first three,\n1, 10, and 20.\n\n611\n00:31:35,037 --> 00:31:38,227\nThere's also 30, 40, 50 but\nI'm gonna leave those be.\n\n612\n00:31:38,227 --> 00:31:42,887\nAnd then we can come through and\nwe can designate root primary or\n\n613\n00:31:42,887 --> 00:31:47,297\nroot secondary or I could say priority and\nspecify a particular number if I wanted.\n\n614\n00:31:47,297 --> 00:31:49,137\nRoot primary is a little easier.\n\n615\n00:31:49,137 --> 00:31:52,237\nAll right, when I do that what happens?\n\n616\n00:31:53,367 --> 00:31:56,060\nWell, switch one becomes the root.\n\n617\n00:31:56,060 --> 00:31:57,310\nOr it should become the route.\n\n618\n00:31:57,310 --> 00:31:59,297\nFor VLANs one, ten, and twenty.\n\n619\n00:31:59,297 --> 00:32:03,310\nSwitch two will still be the route for\n30, 40, 50.\n\n620\n00:32:03,310 --> 00:32:08,475\nSo when it comes to shutting off a port\nWell, switch one should shut it off for\n\n621\n00:32:08,475 --> 00:32:13,660\ncertain interfaces and switch two should\nshut it off for other interfaces.\n\n622\n00:32:13,660 --> 00:32:16,660\nAnd what we should see hopefully is\nthat we get a distribution across\n\n623\n00:32:16,660 --> 00:32:17,540\nour different interfaces.\n\n624\n00:32:17,540 --> 00:32:21,980\nNow, sometimes this works great,\nother times it doesn't.\n\n625\n00:32:21,980 --> 00:32:26,040\nAnd so we'll have to see which of those\ntwo camps that we fall into here.\n\n626\n00:32:26,040 --> 00:32:29,120\nAnd so if I do a show a spanning-tree.\n\n627\n00:32:29,120 --> 00:32:32,670\nI can see now first for\n\n628\n00:32:32,670 --> 00:32:37,420\nVLAN 1, I'm forwarding on everything and\nVLAN 2 and so on.\n\n629\n00:32:37,420 --> 00:32:40,250\nLet me do my super filter again,\nhere we go.\n\n630\n00:32:41,300 --> 00:32:47,020\nSo see how I'm not blocking for any\nports in VLAN 1, 10, and 20, because I'm\n\n631\n00:32:48,450 --> 00:32:53,800\nthe root on for 30, 40 ,50,\nI'm still blocking port number two, okay?\n\n632\n00:32:53,800 --> 00:33:02,700\nAnd if I jump over to the other switch and\nI do that same filter, right?\n\n633\n00:33:02,700 --> 00:33:03,200\nSo.\n\n634\n00:33:05,972 --> 00:33:07,440\nThere we go.\n\n635\n00:33:07,440 --> 00:33:12,380\nI can see that it is blocking\nports on VLANs 1, 10, and 20,\n\n636\n00:33:12,380 --> 00:33:17,310\nbut it is not blocking on 30,\n40, 50, and so, now it's up, and\n\n637\n00:33:17,310 --> 00:33:21,650\nit's going, and each switch is\nresponsible for half my VLANs, all right?\n\n638\n00:33:21,650 --> 00:33:22,550\nIs my problem solved?\n\n639\n00:33:23,600 --> 00:33:25,240\nNot really, right?\n\n640\n00:33:25,240 --> 00:33:31,900\nIf you look at it,\nswitch two is still blocking on port two.\n\n641\n00:33:31,900 --> 00:33:33,950\nSo block, block, block on port two.\n\n642\n00:33:35,280 --> 00:33:41,140\nOn switch one, it's still blocking,\nblock, block, block on port two.\n\n643\n00:33:41,140 --> 00:33:46,120\nI've got the split routes, but\nI'm still blocking on port 2, all right?\n\n644\n00:33:46,120 --> 00:33:51,640\nThe solution that I just showed you\nworks great when you have many switches.\n\n645\n00:33:51,640 --> 00:33:55,670\nBut when you've only got two\nswitches like I do right here,\n\n646\n00:33:55,670 --> 00:33:59,420\nthe two cables are right here,\nyou're still gonna block the same cables.\n\n647\n00:33:59,420 --> 00:34:02,100\nWe didn't solve the problem, all right?\n\n648\n00:34:02,100 --> 00:34:07,080\nWhat we really need to do is make\nit where in the VLANs that one of\n\n649\n00:34:07,080 --> 00:34:12,980\nthe switches controls,\nmake it prefer port two over port one.\n\n650\n00:34:12,980 --> 00:34:13,620\n>> Hm.\n>> Right?\n\n651\n00:34:13,620 --> 00:34:15,250\nAnd it's not gonna do that by default.\n\n652\n00:34:15,250 --> 00:34:15,880\n>> Nope.\n\n653\n00:34:15,880 --> 00:34:21,150\n>> In this other column over here\nwe have our port priorities, okay?\n\n654\n00:34:21,150 --> 00:34:23,570\nThis is the spanning tree priority for\neach port and\n\n655\n00:34:23,570 --> 00:34:26,505\nnotice that they're all\nset to the default 128.\n\n656\n00:34:26,505 --> 00:34:30,900\nOkay, so port one and port two,\nboth tie at 128, and so\n\n657\n00:34:30,900 --> 00:34:32,850\nthen it comes down to the port number.\n\n658\n00:34:32,850 --> 00:34:36,360\nAnd so when you look at like,\nthese guys right here.\n\n659\n00:34:36,360 --> 00:34:41,064\nThey both have a priority of 128,\nbut port one is 128.3 and\n\n660\n00:34:41,064 --> 00:34:46,440\nport two is 128.4, .3 is lower than .4,\nthat's how we get there.\n\n661\n00:34:47,590 --> 00:34:51,930\nSo if I really want this to work, I need\nthe second part to this solution and\n\n662\n00:34:51,930 --> 00:34:54,518\nthat's gonna be to manipulate\nthe port priorities, right?\n\n663\n00:34:54,518 --> 00:34:58,660\nAnd that's gonna influence which one\nwe block and which one we don't, right?\n\n664\n00:34:58,660 --> 00:35:02,820\nSo, what I'll do is I'm just\ngonna modify port number 2 to\n\n665\n00:35:02,820 --> 00:35:04,110\nhave a different priority.\n\n666\n00:35:07,920 --> 00:35:12,140\n>> Now for us in the priority number,\nthe key to remembering this is that\n\n667\n00:35:12,140 --> 00:35:16,540\nthe lower the priority, the better chance\nit's gonna have becoming that root for\n\n668\n00:35:16,540 --> 00:35:18,950\nthat one and\nend up in the forwarding state.\n\n669\n00:35:18,950 --> 00:35:20,890\nThe higher the number is,\nit's not gonna do that.\n\n670\n00:35:20,890 --> 00:35:24,110\nUnless we set it to a priority of zero,\nis it?\n\n671\n00:35:24,110 --> 00:35:25,833\nAnd at zero that never has a chance.\n\n672\n00:35:25,833 --> 00:35:27,052\n>> Yeah zero's a special one I think.\n\n673\n00:35:27,052 --> 00:35:27,980\n>> Yeah zero is a special one.\n\n674\n00:35:27,980 --> 00:35:28,631\n>> And it kills it.\n\n675\n00:35:28,631 --> 00:35:33,540\n[LAUGH] So anyhow I'm gonna set it really\nlow, I'll just set it down to sixteen.\n\n676\n00:35:33,540 --> 00:35:38,140\nNow what we're gonna find again,\nbecause we just have two switches.\n\n677\n00:35:38,140 --> 00:35:40,200\n>> Yeah.\n>> That it's gonna take effect and\n\n678\n00:35:40,200 --> 00:35:44,100\nit's gonna take effect for all of\nthe VLANs that are on this interface.\n\n679\n00:35:44,100 --> 00:35:44,610\n>> Right.\n>> And so\n\n680\n00:35:44,610 --> 00:35:47,730\nit may not have the exact\nresult that we want.\n\n681\n00:35:47,730 --> 00:35:50,420\nBut I just need that\nchange on port number 2.\n\n682\n00:35:50,420 --> 00:35:55,760\nSo port number 2 is a whole,\nnow has this new priority and\n\n683\n00:35:55,760 --> 00:35:58,560\nnow let's take a look at\nwhat that done for us.\n\n684\n00:36:00,348 --> 00:36:04,110\nAll right, so looking at port number 2,\nit's got that lower priority number.\n\n685\n00:36:04,110 --> 00:36:08,184\nI'm still blocking and\nif I remember correctly,\n\n686\n00:36:08,184 --> 00:36:13,770\nI think we have actually the cause\na expanding tree recalculation.\n\n687\n00:36:13,770 --> 00:36:16,180\nSo let me just do a shut down and\na no shut down.\n\n688\n00:36:16,180 --> 00:36:20,480\nExpanding tree, it will normally\nreact if a failure happens, but\n\n689\n00:36:20,480 --> 00:36:23,590\nif no failure occurs,\nit won't normally react.\n\n690\n00:36:23,590 --> 00:36:25,450\nSo I'm just gonna spawn that.\n\n691\n00:36:29,040 --> 00:36:30,416\nJust gonna force that along.\n\n692\n00:36:40,133 --> 00:36:41,654\nWell, it's not entirely happy, is it?\n\n693\n00:36:41,654 --> 00:36:43,600\n>> [LAUGH]\n>> So,\n\n694\n00:36:43,600 --> 00:36:46,660\nport number 1 has disappeared\nfrom some of ours.\n\n695\n00:36:46,660 --> 00:36:50,060\nMy filter may not be happy yet.\n\n696\n00:36:50,060 --> 00:36:55,090\nI'm filtering on 4 blocking, I'm not\ndoing, like, listening and learning.\n\n697\n00:36:55,090 --> 00:36:55,840\nThere they are.\n\n698\n00:36:55,840 --> 00:36:57,870\nSo it's doing a recalc right now, so\n\n699\n00:36:57,870 --> 00:36:59,970\nthat's why some of those\nports disappeared.\n\n700\n00:36:59,970 --> 00:37:00,790\n>> And that's a good time for\n\n701\n00:37:00,790 --> 00:37:03,270\nus to go a little bit of\nSpanning Tree again too, right?\n\n702\n00:37:03,270 --> 00:37:04,450\n>> Yeah the port states, right?\n\n703\n00:37:04,450 --> 00:37:05,080\n>> Yeah.\n\n704\n00:37:05,080 --> 00:37:06,760\n>> So, you wanna tackle this Ronnie?\n\n705\n00:37:06,760 --> 00:37:08,600\n>> Yeah.\nWhen we talk about the idea of the port\n\n706\n00:37:08,600 --> 00:37:12,540\nstates here, remember that in Spanning\nTree we have port roles and port states.\n\n707\n00:37:12,540 --> 00:37:17,500\nPort states for us is how the actually\ninterface is working, okay?\n\n708\n00:37:17,500 --> 00:37:20,570\nWhat we're normally looking for is\nforwarding or we're looking for blocking.\n\n709\n00:37:20,570 --> 00:37:25,990\nBut there's also listening and learning\nas well and sometimes you actually saw.\n\n710\n00:37:25,990 --> 00:37:27,770\nDidn't you see when it said,\nalternate two?\n\n711\n00:37:27,770 --> 00:37:31,688\n>> If we're running rapid spanning\ntree you'll see alternate.\n\n712\n00:37:31,688 --> 00:37:32,802\n>> Okay, yeah.\n\n713\n00:37:32,802 --> 00:37:34,630\n>> Although some of the switches\nin this one did it.\n\n714\n00:37:34,630 --> 00:37:37,330\n>> Yeah.\n>> It's not running rapid, but\n\n715\n00:37:37,330 --> 00:37:40,440\nwhen the port resets, it'll flash\nas alternate while it's resetting.\n\n716\n00:37:40,440 --> 00:37:42,400\nI don't know why they do that.\n\n717\n00:37:42,400 --> 00:37:45,450\n>> So for us, we're waiting for\nSpanning Tree to do it's re calculation,\n\n718\n00:37:45,450 --> 00:37:49,570\nthis can take a little bit of time even\nthough it actually does this fairly\n\n719\n00:37:49,570 --> 00:37:53,660\nquickly, but it can take up to 30 seconds\nfor that to actually settle down.\n\n720\n00:37:53,660 --> 00:37:57,940\nIt can take up to 50 seconds if it kinda\nhas to time out or do some things.\n\n721\n00:37:57,940 --> 00:38:00,560\nSo there's a bit of time in between this.\n\n722\n00:38:00,560 --> 00:38:02,660\nBut we're normally looking for blocking or\n\n723\n00:38:02,660 --> 00:38:04,770\nin porting state is\nwhat we're looking for.\n\n724\n00:38:04,770 --> 00:38:06,270\nAnything else is still not gonna work.\n\n725\n00:38:06,270 --> 00:38:07,780\nIf it's blocking it's\nstill not gonna work.\n\n726\n00:38:07,780 --> 00:38:09,870\nSo porting is what we're looking for.\n\n727\n00:38:09,870 --> 00:38:12,750\n>> All right, so let's refresh this and\nsee where we're at.\n\n728\n00:38:12,750 --> 00:38:14,190\nThere we go.\n\n729\n00:38:14,190 --> 00:38:18,290\nSo when I look at it,\nI made an amateur mistake didn't I?\n\n730\n00:38:18,290 --> 00:38:21,460\nSo there is a little thing\nabout spanning tree.\n\n731\n00:38:21,460 --> 00:38:26,360\nWhen you adjust a port priority,\nyou gotta make sure that you adjust\n\n732\n00:38:26,360 --> 00:38:30,480\non both sides otherwise the other switches\nget confused and kinda reeks some havoc.\n\n733\n00:38:30,480 --> 00:38:33,550\nAnd so I do need to go in and\nkinda tweak the other side a little bit,\n\n734\n00:38:33,550 --> 00:38:35,780\nto get this squared away so.\n\n735\n00:38:35,780 --> 00:38:40,070\nSo that change im just gonna jump over to\nthe other switch and make the same change.\n\n736\n00:38:40,070 --> 00:38:41,120\nAnd let's do that.\n\n737\n00:38:41,120 --> 00:38:45,695\nI just wanna do number two.\n\n738\n00:38:55,050 --> 00:38:55,702\nThere we go.\n\n739\n00:38:59,778 --> 00:39:01,079\nAnd I'll make a reset happen.\n\n740\n00:39:07,359 --> 00:39:09,440\nAnd then we can watch it happen over here.\n\n741\n00:39:09,440 --> 00:39:12,700\nNow when spanning tree resets,\nyou'll go into listening for 15 seconds.\n\n742\n00:39:12,700 --> 00:39:15,900\nYou're listening to see if there is\nanother switch on the other side.\n\n743\n00:39:15,900 --> 00:39:20,040\nAnd then you're go into learning as you\nlearn what Mac addresses are available and\n\n744\n00:39:20,040 --> 00:39:22,210\nwhether there's a better route\nconnection than you've already got, and\n\n745\n00:39:22,210 --> 00:39:23,890\nyou learn all that other information.\n\n746\n00:39:23,890 --> 00:39:29,350\nAnd so after 30 seconds total,\nyou'll then come up and be happy.\n\n747\n00:39:29,350 --> 00:39:30,950\nAll right, so there we go.\n\n748\n00:39:30,950 --> 00:39:33,550\nI just transitioned from\nlistening to learning.\n\n749\n00:39:33,550 --> 00:39:36,520\nAnd now we'll just wait while it goes\nthrough that 15 seconds of learning,\n\n750\n00:39:36,520 --> 00:39:37,620\nand then link them up.\n\n751\n00:39:37,620 --> 00:39:41,271\nNow, what we may find, and there's that\nalternate designation that you noticed,\n\n752\n00:39:41,271 --> 00:39:43,350\nRonnie, as it kind of sorts itself out.\n\n753\n00:39:45,030 --> 00:39:46,010\nThere we go.\n\n754\n00:39:46,010 --> 00:39:52,330\nAnd now I can see where port 1 is\nblocking and port 2 is forwarding.\n\n755\n00:39:52,330 --> 00:39:58,513\nIt's chosen port 2 because the priority\nis a lower number than port one.\n\n756\n00:39:58,513 --> 00:40:00,267\nSo now it's a little bit\ndifferent than what we had before.\n\n757\n00:40:00,267 --> 00:40:01,384\n>> Mm-hm.\n\n758\n00:40:01,384 --> 00:40:04,046\n>> And I can see that for VLANs.\n\n759\n00:40:04,046 --> 00:40:06,270\n>> 30, 40, and 50.\n\n760\n00:40:06,270 --> 00:40:13,190\nI'm forwarding on port two for\nVLAN one or one, 10, and 20.\n\n761\n00:40:13,190 --> 00:40:14,610\nI'm forwarding all cuz this is the route.\n\n762\n00:40:14,610 --> 00:40:15,410\nIf I look at the other side,\n\n763\n00:40:15,410 --> 00:40:18,460\nhere's where things are gonna\nget a little screwy for us.\n\n764\n00:40:18,460 --> 00:40:20,580\nIt's not gonna be the result that we want.\n\n765\n00:40:20,580 --> 00:40:21,600\nThere we go.\n\n766\n00:40:21,600 --> 00:40:26,250\nNotice how we've just switched it and\nnow we're blocking on the individual port.\n\n767\n00:40:26,250 --> 00:40:30,440\nNow, the reason it's doing that is\nbecause the port priority command\n\n768\n00:40:30,440 --> 00:40:34,450\nit's tied to the port,\nnot a particular VLAN.\n\n769\n00:40:34,450 --> 00:40:37,690\nSo when we flip that,\nwe didn't get the reaction that we wanted,\n\n770\n00:40:37,690 --> 00:40:40,620\nwe're still not load\nbalancing across these links.\n\n771\n00:40:40,620 --> 00:40:41,972\nThat's our real problem.\n\n772\n00:40:41,972 --> 00:40:46,560\nAll right, so what we have got to do now,\nis we have really got to go a step\n\n773\n00:40:46,560 --> 00:40:52,040\nfurther and strip off some of the VLANs\nfrom some of the interfaces, right.\n\n774\n00:40:52,040 --> 00:40:56,440\nAnd when we do that, that will give\nus the load balances across it too.\n\n775\n00:40:56,440 --> 00:41:00,850\nBut if we are gonna do that we might as\nwell adjust the priorities of the roots\n\n776\n00:41:00,850 --> 00:41:04,630\nat all cuz striping the VLANs\noff of will take care of that.\n\n777\n00:41:04,630 --> 00:41:05,970\nWe'll lose our redundancy.\n\n778\n00:41:05,970 --> 00:41:06,587\nIf one link goes down,\n\n779\n00:41:06,587 --> 00:41:08,411\nit's not like the others are just\ngoing to kick in and take it over.\n\n780\n00:41:08,411 --> 00:41:10,152\n>> They're not.\n>> But it does get us the load balancing.\n\n781\n00:41:10,152 --> 00:41:14,770\nSo it's not necessarily the greatest\nsolution, but it does work, all right.\n\n782\n00:41:14,770 --> 00:41:17,960\nSo let's undo some of\nthis that we've changed.\n\n783\n00:41:17,960 --> 00:41:19,440\nSo I'm gonna get back into port 2.\n\n784\n00:41:19,440 --> 00:41:23,580\nAnd I'll take where we changed that\nport priority and just remove it.\n\n785\n00:41:25,924 --> 00:41:30,047\nAll right,\nthat takes care of switch two, and\n\n786\n00:41:30,047 --> 00:41:34,609\non switch one,\nwe'll remove that priority also.\n\n787\n00:41:38,187 --> 00:41:38,965\nAll right.\n\n788\n00:41:38,965 --> 00:41:39,679\nAnd.\n\n789\n00:41:43,081 --> 00:41:49,990\nI'm gonna just put this priority\nhere back to the default.\n\n790\n00:41:49,990 --> 00:41:53,840\nThe default is 32,768, and when I do that,\n\n791\n00:41:53,840 --> 00:41:57,050\nthat should make it disappear\nfrom the from the config.\n\n792\n00:41:57,050 --> 00:42:00,560\nBut basically I've just undone the two\nchanges that we've put in place.\n\n793\n00:42:00,560 --> 00:42:04,800\nSo I've removed the port priorities, and\nI've removed making switch one the root.\n\n794\n00:42:04,800 --> 00:42:06,952\nAnd if I get in here.\n\n795\n00:42:11,435 --> 00:42:12,121\nAnd I do a reset,\n\n796\n00:42:12,121 --> 00:42:15,222\neverything should go back to the way\nit was at the beginning of the episode.\n\n797\n00:42:15,222 --> 00:42:16,110\nAll right.\n\n798\n00:42:16,110 --> 00:42:21,420\nAnd now I can just start to\nprune off some of the VLANs and\n\n799\n00:42:21,420 --> 00:42:23,910\nthat's not a difficult thing to do.\n\n800\n00:42:23,910 --> 00:42:27,010\nWhen you build a trunk,\nwe've statically assigned a trunk,\n\n801\n00:42:27,010 --> 00:42:31,380\nwe can say switch port trunk allowed.\n\n802\n00:42:31,380 --> 00:42:36,440\nAnd from here you can specify\nthe VLANs that you want to allow.\n\n803\n00:42:36,440 --> 00:42:41,290\nAnd so I'm gonna allow VLANs 1,\n10, and 20 on port one.\n\n804\n00:42:42,700 --> 00:42:45,437\nAnd on port two, oh shoot,\n[CROSSTALK] I did a range command.\n\n805\n00:42:45,437 --> 00:42:46,017\nDag gummit.\n\n806\n00:42:46,017 --> 00:42:47,875\nNow I'm really gonna hose things up.\n\n807\n00:42:47,875 --> 00:42:49,696\n>> [LAUGH]\n>> So let's just undo that.\n\n808\n00:42:51,769 --> 00:42:55,727\nAll right, so let me get into fa0/1.\n\n809\n00:42:58,655 --> 00:43:01,060\nAll right, so we'll allow 1,\n10, and 20 there.\n\n810\n00:43:01,060 --> 00:43:06,499\nAnd if I gt into fa0/2-\n>> You did no switchport.\n\n811\n00:43:06,499 --> 00:43:08,278\n>> Did I?\n>> On fa0/1.\n\n812\n00:43:08,278 --> 00:43:09,838\n>> Oh, convenient.\n\n813\n00:43:09,838 --> 00:43:10,878\nAll right.\n\n814\n00:43:10,878 --> 00:43:13,226\n>> [LAUGH]\n>> Let me go back and fix that.\n\n815\n00:43:13,226 --> 00:43:13,819\nThank you, Ronnie.\n\n816\n00:43:13,819 --> 00:43:16,384\n>> No, I just saw it.\n\n817\n00:43:16,384 --> 00:43:17,557\n>> There we go.\n\n818\n00:43:17,557 --> 00:43:24,486\nAnd now I can get into interface\nfa0/2 where I can say 30, 40, 50.\n\n819\n00:43:24,486 --> 00:43:25,090\nAll right.\n\n820\n00:43:25,090 --> 00:43:28,899\nThat's gonna restrict the individual\nVLANs to their own separate lines.\n\n821\n00:43:30,920 --> 00:43:35,829\nAnd I'm gonna do the same thing\non the other switch, whoops.\n\n822\n00:43:40,984 --> 00:43:43,081\nGonna copy and paste cuz I'm a lazy typer.\n\n823\n00:43:43,081 --> 00:43:44,022\n>> [LAUGH]\n\n824\n00:43:51,418 --> 00:43:53,415\n>> And I'll reset the link.\n\n825\n00:43:53,415 --> 00:43:55,041\nAll right.\n\n826\n00:43:55,041 --> 00:43:59,993\nNow, switch 2 is going to be\nthe root VLAN for all the VLANs cuz\n\n827\n00:43:59,993 --> 00:44:05,150\nit's got the tied priority,\nit's got the better MAC address.\n\n828\n00:44:05,150 --> 00:44:06,890\nSo, it'll become the root.\n\n829\n00:44:06,890 --> 00:44:09,680\nBut, both links will be\nactive because we've\n\n830\n00:44:09,680 --> 00:44:12,932\nstripped off some of the VLAN from each of\nthem so they're not overlapping anymore.\n\n831\n00:44:12,932 --> 00:44:16,370\nAll right.\nThis will achieve fake load balancing.\n\n832\n00:44:16,370 --> 00:44:18,390\nHalf our VLAN's in one, half on the other.\n\n833\n00:44:18,390 --> 00:44:20,560\nIt's not really looking at load,\nor anything like that.\n\n834\n00:44:20,560 --> 00:44:22,129\nBut it does achieve our goal.\n\n835\n00:44:25,240 --> 00:44:28,038\nYou know what?\nLet me just get outta here.\n\n836\n00:44:28,038 --> 00:44:30,395\nAnd we can pull this guy back up.\n\n837\n00:44:35,340 --> 00:44:41,104\nAll right, and notice when I look\nat this that VLAN001 has Fa/0/1.\n\n838\n00:44:41,104 --> 00:44:43,867\nVLAN0010 and 20 have Fa0/1.\n\n839\n00:44:43,867 --> 00:44:48,480\nAnd then 30, 40, 50 have Fa0/2.\n\n840\n00:44:48,480 --> 00:44:50,600\nAnd they're all forwarding\nhere because we're the root.\n\n841\n00:44:50,600 --> 00:44:52,034\nIf we take a look at switch one.\n\n842\n00:44:53,730 --> 00:44:55,680\nI can see that they're all forwarding.\n\n843\n00:44:55,680 --> 00:45:00,130\nWe're not the root but\nbecause VLAN 110 and\n\n844\n00:45:00,130 --> 00:45:05,630\n20 are on one port and 30, 40 and 50 are\non the other port, we don't have a loop.\n\n845\n00:45:05,630 --> 00:45:09,560\nNow both links are active,\nboth links are forwarding traffic.\n\n846\n00:45:09,560 --> 00:45:11,350\nAnd we're up.\nAll right.\n\n847\n00:45:11,350 --> 00:45:14,638\nThe negative being, if I lose a cable\n>> [LAUGH]\n\n848\n00:45:14,638 --> 00:45:16,533\n>> The VLANs are manually tied to ports\n\n849\n00:45:16,533 --> 00:45:17,594\nat this point\n>> Yeah.\n\n850\n00:45:17,594 --> 00:45:20,430\n>> And so they don't get around and\nnow we got a problem.\n\n851\n00:45:20,430 --> 00:45:21,470\n>> Yeah.\nAnd so\n\n852\n00:45:21,470 --> 00:45:24,470\nthis is where some of the other commands\nlike we just did a little bit earlier,\n\n853\n00:45:24,470 --> 00:45:25,760\nlike at the end.\n\n854\n00:45:25,760 --> 00:45:29,980\nWhere we tied those picker VLANs to that\none interface and made it the primary,\n\n855\n00:45:29,980 --> 00:45:34,280\nwe can also introduce a secondary command\nin there just in case we lose a link.\n\n856\n00:45:34,280 --> 00:45:35,790\nBut, for us here,\n\n857\n00:45:35,790 --> 00:45:39,790\nboth of those may not be the most\noptimal solution that we have, right.\n\n858\n00:45:39,790 --> 00:45:43,340\nWe may even have another one that we're\nabout to talk about, either channel.\n\n859\n00:45:43,340 --> 00:45:44,511\n>> Yeah.\n>> So, you might ask yourself, Don,\n\n860\n00:45:44,511 --> 00:45:46,837\nif those other solutions didn't work,\nwhy'd you bother showing them to us?\n\n861\n00:45:46,837 --> 00:45:48,750\n>> [LAUGH]\n>> And the answer is,\n\n862\n00:45:48,750 --> 00:45:53,780\nif you three or more switches,\nthose are the solutions you do work.\n\n863\n00:45:53,780 --> 00:45:55,530\nAdjusting the port priorities.\n\n864\n00:45:55,530 --> 00:45:57,360\nAdjusting who the route is.\n\n865\n00:45:57,360 --> 00:46:01,340\nThat will manipulate and you can get\ntraffic flowing over multiple links.\n\n866\n00:46:01,340 --> 00:46:04,830\nBut when you just have two\nswitches like I do behind me,\n\n867\n00:46:04,830 --> 00:46:08,300\nwhen we start to make those changes,\nthey're not affected.\n\n868\n00:46:08,300 --> 00:46:08,830\nRight.\n\n869\n00:46:08,830 --> 00:46:10,960\nAnd at the end of the day\nwhile we can make it work,\n\n870\n00:46:10,960 --> 00:46:14,670\nit's not really ideal,\nwe still lose traffic.\n\n871\n00:46:14,670 --> 00:46:18,190\nSo, when you just have two switches,\nwhen you have two cables run between two\n\n872\n00:46:18,190 --> 00:46:22,330\nswitches like this,\nthe better solution is EtherChannel.\n\n873\n00:46:22,330 --> 00:46:25,040\nWe can bond the two cables together.\n\n874\n00:46:25,040 --> 00:46:29,160\nNow they show up as one port and\nEtherChannel evenly distributes\n\n875\n00:46:29,160 --> 00:46:34,180\nthe bandwidth across the two, so you get\ntrue load balancing with redundancy.\n\n876\n00:46:34,180 --> 00:46:36,750\nIt's the best solution with two switches.\n\n877\n00:46:36,750 --> 00:46:40,300\nNow, if you've got three switches in\na trunk triangle, can you do EtherChannel?\n\n878\n00:46:40,300 --> 00:46:40,940\nNo.\n\n879\n00:46:40,940 --> 00:46:46,020\nSo in those scenarios you have to\ndo either pruning the VLANs or\n\n880\n00:46:46,020 --> 00:46:48,490\nadjusting the priorities or\nhaving more than one root.\n\n881\n00:46:48,490 --> 00:46:51,160\nThat'll achieve your goal with three or\nmore switches.\n\n882\n00:46:51,160 --> 00:46:54,000\nBut, with just two, you can use\nether channels to create solutions.\n\n883\n00:46:54,000 --> 00:46:56,440\nSo don't discount one\nsolution over the other.\n\n884\n00:46:56,440 --> 00:46:58,275\nThey both have their place.\n\n885\n00:46:58,275 --> 00:46:59,050\nRight.\n\n886\n00:46:59,050 --> 00:47:02,250\nSo what we're gonna do is,\nwe'll probably stop for a break first, and\n\n887\n00:47:02,250 --> 00:47:05,520\nafter the break, we'll take a look\nat the configuration channel and\n\n888\n00:47:05,520 --> 00:47:08,040\nthen we'll take a look at some\nof the problems that can happen.\n\n889\n00:47:08,040 --> 00:47:10,760\nSome of the stuff that can go\nwrong when we set it up and\n\n890\n00:47:10,760 --> 00:47:13,110\nkind of get an idea of what that's like.\n\n891\n00:47:14,630 --> 00:47:16,850\nAll right, so, Ronnie,\nhave I left anything out.\n\n892\n00:47:16,850 --> 00:47:17,750\n>> I don't think so.\n\n893\n00:47:17,750 --> 00:47:20,310\nI think we're ready for EtherChannel.\n\n894\n00:47:20,310 --> 00:47:20,980\n>> [LAUGH] All right.\n\n895\n00:47:20,980 --> 00:47:22,060\nWell let's stop here and take a break.\n\n896\n00:47:22,060 --> 00:47:24,140\nWhen we get back, EtherChannel madness.\n\n897\n00:47:24,140 --> 00:47:28,606\nWe'll see you then.\n\n898\n00:47:28,606 --> 00:47:32,011\n[SOUND].\n\n899\n00:47:32,011 --> 00:47:36,500\n[LAUGH] All right, welcome back everybody,\nso before the break we were talking\n\n900\n00:47:36,500 --> 00:47:40,560\nabout how to get some kind of load\nbalancing working on these lines.\n\n901\n00:47:40,560 --> 00:47:43,810\nWe have multiple connections between two\nswitches here and I just I want the dad\n\n902\n00:47:43,810 --> 00:47:48,770\ngone things to load balance and I don't\nwant to have to deal with too much hassle.\n\n903\n00:47:48,770 --> 00:47:51,590\nSo the best solution for us at this\npoint is gonna be EtherChannel and\n\n904\n00:47:51,590 --> 00:47:53,770\nthat's what we gonna take a look at now.\n\n905\n00:47:53,770 --> 00:47:56,936\n>> Ether channel allows us to be able\nto aggregate our links together.\n\n906\n00:47:56,936 --> 00:47:58,897\nSo if I have a 200 megabit ports and\n\n907\n00:47:58,897 --> 00:48:02,960\nI want them to actually be combined\ninto a 200 megabit port essentially.\n\n908\n00:48:02,960 --> 00:48:05,967\n>> I'm gonna use something like\nether channel is what I'm gonna do.\n\n909\n00:48:05,967 --> 00:48:07,771\n>> Alright now before I get too far,\n\n910\n00:48:07,771 --> 00:48:12,400\nI'm gonna remove the limitations that\nI've put on the ports before the show.\n\n911\n00:48:12,400 --> 00:48:15,120\nSo I'm gonna go in here and\njust dig those out.\n\n912\n00:48:15,120 --> 00:48:19,174\nAnd let me just do that and\n\n913\n00:48:19,174 --> 00:48:23,258\nso I'm just removing those allow\nstatements that we put in earlier.\n\n914\n00:48:23,258 --> 00:48:29,520\nYeah, I don't think I did any over here,\noh i did, so let me just dig those out and\n\n915\n00:48:29,520 --> 00:48:33,425\nthat means we are going to be back to\nhaving our problem like we did before.\n\n916\n00:48:36,990 --> 00:48:42,670\nSo I will just remove that and.\n\n917\n00:48:42,670 --> 00:48:46,030\nProbably be faster for me to type it\nthen to try and cut and paste there.\n\n918\n00:48:46,030 --> 00:48:46,960\nAll right.\n\n919\n00:48:46,960 --> 00:48:49,772\nSo, if I take a look at my interfaces now,\n\n920\n00:48:49,772 --> 00:48:53,750\nf80/1.0 /2, they're just kinda back to\nthe way they were with their hard set.\n\n921\n00:48:53,750 --> 00:48:57,820\nActually I guess I left negotiation\nturned off on port two.\n\n922\n00:48:57,820 --> 00:48:59,400\nI'll fix that in a minute.\n\n923\n00:48:59,400 --> 00:49:01,760\nIf we do either channel, all right.\n\n924\n00:49:01,760 --> 00:49:03,060\nThe number one problem,\n\n925\n00:49:03,060 --> 00:49:05,940\nthe biggest problem with either\nchannel is that when you have multiple\n\n926\n00:49:05,940 --> 00:49:11,210\nports being bonded together their\nconfiguration needs to be the same.\n\n927\n00:49:11,210 --> 00:49:14,350\nIf one is set to access and\nthe other is set to trunk.\n\n928\n00:49:14,350 --> 00:49:17,580\nIf one is set to 802.1Q and\none is set to ISL,\n\n929\n00:49:17,580 --> 00:49:23,270\nthat's the exact type of thing that\ncan break an ether channel, all right.\n\n930\n00:49:23,270 --> 00:49:26,930\nOr media speeds, one set to a 100 megabit,\nthe other set to a gig,\n\n931\n00:49:26,930 --> 00:49:30,320\none's half duplex, one's full duplex,\nthe ports need to be the same.\n\n932\n00:49:30,320 --> 00:49:35,980\nThe same speed, the same configuration as\nidentical as you can get them, all right.\n\n933\n00:49:35,980 --> 00:49:38,970\nThe other thing to keep in mind\nis that different switches\n\n934\n00:49:38,970 --> 00:49:43,030\nhave different maximums for\nthe amount of port members they can have.\n\n935\n00:49:43,030 --> 00:49:44,600\nMost switches it's 8.\n\n936\n00:49:44,600 --> 00:49:48,230\nYou can bond 8 ports together,\ninto an ether channel.\n\n937\n00:49:48,230 --> 00:49:52,100\nIf you do more than eight, you can do it,\nbut the others will just sit there\n\n938\n00:49:52,100 --> 00:49:54,940\nidle and only come in if one\nof the other links fail.\n\n939\n00:49:54,940 --> 00:49:57,570\nSo you can balance up to 8.\n\n940\n00:49:57,570 --> 00:49:58,520\nBut it can support more.\n\n941\n00:49:58,520 --> 00:50:01,980\n>> Yeah and that is actually the benefit\nof EtherChannel for us, right.\n\n942\n00:50:01,980 --> 00:50:04,620\nIs that if I actually have eight\nlinks actually going up and\n\n943\n00:50:04,620 --> 00:50:08,730\noperating, even if one link fails\nthe thing actually still remains up.\n\n944\n00:50:08,730 --> 00:50:10,240\nWe still can use the entire thing.\n\n945\n00:50:10,240 --> 00:50:13,740\nAnd so we're not locking on any one\nof those VLANs as we actually would\n\n946\n00:50:13,740 --> 00:50:16,540\nif we were doing that\nidea that allowed VLANs.\n\n947\n00:50:16,540 --> 00:50:17,320\n>> Yep.\n\n948\n00:50:17,320 --> 00:50:18,640\n>> All right, so here's what I like to do.\n\n949\n00:50:18,640 --> 00:50:22,830\nWhen I configure EtherChannel,\nI like to use the range command.\n\n950\n00:50:22,830 --> 00:50:24,910\nBy using the range command,\n\n951\n00:50:24,910 --> 00:50:30,770\nyou can ensure that all of your ports\nget the same configuration, all right.\n\n952\n00:50:30,770 --> 00:50:34,490\nAnd so what I like to do is go in and\nhard set their configuration first and\n\n953\n00:50:34,490 --> 00:50:37,380\nyou'll see the recommendation\non Cisco's website and stuff.\n\n954\n00:50:37,380 --> 00:50:40,360\nWhere they always tell you if you're about\nto configure EtherChannel shut the ports\n\n955\n00:50:40,360 --> 00:50:41,770\ndown first, all right.\n\n956\n00:50:41,770 --> 00:50:44,200\nAnd the reason is you start\ndinking with one side and\n\n957\n00:50:44,200 --> 00:50:47,570\nthe other side is not done yet and\nyou can get weird configurations.\n\n958\n00:50:47,570 --> 00:50:50,560\nSo, it's a good idea to just go ahead and\nshut down those ports.\n\n959\n00:50:50,560 --> 00:50:52,530\nAnd do the configuration\nwhile they're shut down.\n\n960\n00:50:52,530 --> 00:50:54,690\nSo, that's exactly what I'm gonna do.\n\n961\n00:50:54,690 --> 00:51:00,575\nAnd so I'm gonna say, switch port,\ntrunk, encapsulation.iq,\n\n962\n00:51:00,575 --> 00:51:05,233\nswitch port mode trunk and\nswitch port no negotiate.\n\n963\n00:51:05,233 --> 00:51:06,174\nAll right.\n\n964\n00:51:06,174 --> 00:51:09,370\nSo that's hard set on there.\n\n965\n00:51:09,370 --> 00:51:14,016\nThen I'm gonna say channel-group 1,\n\n966\n00:51:14,016 --> 00:51:17,580\nand then you need to specify the mode, and\n\n967\n00:51:17,580 --> 00:51:23,090\nhere's the number two most common problem\nthat we can bump into with EitherChannel.\n\n968\n00:51:23,090 --> 00:51:27,850\nIt's just like dynamic trunking protocol,\nyou've got auto and desirable,\n\n969\n00:51:27,850 --> 00:51:30,370\nand you've also got active and passive.\n\n970\n00:51:30,370 --> 00:51:32,115\nYou've got five different states.\n\n971\n00:51:32,115 --> 00:51:35,090\n>> [LAUGH]\n>> And they're very similar to DTP,\n\n972\n00:51:35,090 --> 00:51:39,670\nin fact auto and\ndesirable are identical to DTP.\n\n973\n00:51:39,670 --> 00:51:42,450\nIf you're set to auto,\nyou will build up and\n\n974\n00:51:42,450 --> 00:51:45,220\nether channel if the other side asks you.\n\n975\n00:51:45,220 --> 00:51:49,170\nIf you're set to desirable, you'll do\nthe asking, you'll try and become.\n\n976\n00:51:49,170 --> 00:51:53,620\nSo if you have two sides set to auto, you\nare not gonna build an EtherChannel right.\n\n977\n00:51:53,620 --> 00:51:56,440\n>> Yep.\n>> And you know we can demonstrate that.\n\n978\n00:51:56,440 --> 00:51:59,440\nI'll set this to auto and\n\n979\n00:51:59,440 --> 00:52:03,940\nthen I'm gonna get into that port channel\nand you don't really have to do this but\n\n980\n00:52:03,940 --> 00:52:06,660\nagain to be on the safe side I'm\ngonna get into the port channel.\n\n981\n00:52:06,660 --> 00:52:10,590\nAnd I'm gonna issue those\nsame chunking commands here\n\n982\n00:52:10,590 --> 00:52:15,720\nJust to make sure that the port channel\nitself has the exact same configuration\n\n983\n00:52:15,720 --> 00:52:18,520\nas what we did on the individual ports.\n\n984\n00:52:18,520 --> 00:52:22,870\nWith EtherChannel, consistency is the key.\n\n985\n00:52:22,870 --> 00:52:25,380\nHaving that match across\nthese different interfaces.\n\n986\n00:52:27,220 --> 00:52:30,010\nAll right, that takes care of one side.\n\n987\n00:52:30,010 --> 00:52:31,991\nI'm gonna go take care of\nthe other side now too.\n\n988\n00:52:36,778 --> 00:52:37,530\nOops.\n\n989\n00:52:37,530 --> 00:52:38,595\nNot much of a range, is it?\n\n990\n00:52:38,595 --> 00:52:39,880\n>> [LAUGH]\n>> Didn't even know\n\n991\n00:52:39,880 --> 00:52:41,995\nyou could go a range with just one port,\napparently you can.\n\n992\n00:52:41,995 --> 00:52:46,065\n[LAUGH] [CROSSTALK]\n>> But the funny part is it still said\n\n993\n00:52:46,065 --> 00:52:47,682\nthe range [INAUDIBLE]\n>> Yeah, I know.\n\n994\n00:52:47,682 --> 00:52:49,630\n[CROSSTALK]\n>> All right.\n\n995\n00:52:49,630 --> 00:52:51,871\nSo I'm going to go into\nthese interfaces and\n\n996\n00:52:51,871 --> 00:52:55,670\nI'm just gonna reissue those\nstatic trunking commands.\n\n997\n00:52:55,670 --> 00:52:58,800\nAnd then I'll say, port-channel.\n\n998\n00:52:58,800 --> 00:53:02,160\nAnd the channel number that you use,\nit doesn't matter,\n\n999\n00:53:02,160 --> 00:53:03,710\nyou can use whatever one you want, right.\n\n1000\n00:53:03,710 --> 00:53:08,830\nDifferent switches have different numbers,\noh not port channel, shoot.\n\n1001\n00:53:08,830 --> 00:53:09,906\nChannel dash group.\n\n1002\n00:53:09,906 --> 00:53:11,100\n>> There we go.\n\n1003\n00:53:11,100 --> 00:53:14,860\nDifferent ones support Macs so this\none goes up to 48 so I'm gonna use 48.\n\n1004\n00:53:14,860 --> 00:53:19,060\nAnd I'll set this one to auto also, okay.\n\n1005\n00:53:19,060 --> 00:53:22,961\nSo now it's gonna create that port\nchannel and I'll get into PO 48.\n\n1006\n00:53:24,920 --> 00:53:26,630\nAnd I'll issue those same commands.\n\n1007\n00:53:26,630 --> 00:53:27,290\nAll right.\n\n1008\n00:53:27,290 --> 00:53:31,410\nSo, both sides are set to\ndo an EtherChannel now.\n\n1009\n00:53:31,410 --> 00:53:33,600\nAnd they're both to set auto.\n\n1010\n00:53:33,600 --> 00:53:34,930\nThey both have the same configuration.\n\n1011\n00:53:34,930 --> 00:53:37,340\nWe should be in business.\n\n1012\n00:53:37,340 --> 00:53:40,470\nWell our number one troubleshooting\ncommand here is gonna be the show\n\n1013\n00:53:40,470 --> 00:53:42,870\nEtherChannel command.\n\n1014\n00:53:42,870 --> 00:53:46,100\nAnd when do show EtherChannel I\ncan see here that I've got one.\n\n1015\n00:53:46,100 --> 00:53:47,590\nIt's group 48.\n\n1016\n00:53:47,590 --> 00:53:49,870\nIt's got two ports in it.\n\n1017\n00:53:49,870 --> 00:53:52,640\nBut, actually, let me do this summary.\n\n1018\n00:53:52,640 --> 00:53:55,380\nThe output's a little\neasier to read in this one.\n\n1019\n00:53:55,380 --> 00:53:57,750\nI've got port channel 48.\n\n1020\n00:53:57,750 --> 00:54:00,270\nIt's got two ports in it,\nbut they both have a d.\n\n1021\n00:54:00,270 --> 00:54:02,390\nAnd d corresponds to down.\n\n1022\n00:54:02,390 --> 00:54:04,615\nIt is not happy.\n\n1023\n00:54:04,615 --> 00:54:05,170\n>> All right.\n\n1024\n00:54:05,170 --> 00:54:10,790\nNot happy because [CROSSTALK] they\nare both set to auto, nobody is initiating\n\n1025\n00:54:10,790 --> 00:54:15,170\nI have a choice, and I already said\nI like to manually set things but\n\n1026\n00:54:15,170 --> 00:54:18,470\nyou can leave it to,\nyou wanna make sure you set it.\n\n1027\n00:54:18,470 --> 00:54:20,794\nSo they reach out and\ninitiate that connection, so\n\n1028\n00:54:20,794 --> 00:54:22,155\nI need to get int and fix that.\n\n1029\n00:54:26,564 --> 00:54:29,422\nI need to go in and\nfix my typing skills and\n\n1030\n00:54:29,422 --> 00:54:33,640\nso, i'm just gonna go in here and\nbasically set them.\n\n1031\n00:54:33,640 --> 00:54:35,290\nWhere did I put in that command?\n\n1032\n00:54:35,290 --> 00:54:36,730\nThere.\n\n1033\n00:54:36,730 --> 00:54:41,780\nAnd instead of auto which\nsays do pad if detected.\n\n1034\n00:54:41,780 --> 00:54:48,130\nWe can say desirable which enables PAgP\nunconditionally, and that's what I'll do.\n\n1035\n00:54:48,130 --> 00:54:51,895\nNow PAgP versus Black P,\nBlack P is the opened standard.\n\n1036\n00:54:51,895 --> 00:54:52,610\nRight.\n\n1037\n00:54:52,610 --> 00:54:55,010\nPAgP only works with Cisco equipment, so\n\n1038\n00:54:55,010 --> 00:54:57,820\nyour choice otherwise functionally\nthey're basically the same,\n\n1039\n00:54:57,820 --> 00:55:03,175\nthere's not really a whole lot of pros and\ncons between the two on is the tricky one.\n\n1040\n00:55:03,175 --> 00:55:03,850\nRight.\n>> Yep.\n\n1041\n00:55:03,850 --> 00:55:08,690\n>> Because on doesn't use LACP or PAgP, it\nuses just straight up raw ether channels.\n\n1042\n00:55:08,690 --> 00:55:12,220\nBasically load balancing across\nthe links and that's it.\n\n1043\n00:55:12,220 --> 00:55:16,270\nIt's not very powerful on the reporting,\nit's not very quick on the fail over, but\n\n1044\n00:55:16,270 --> 00:55:17,730\nit's there for backwards compatibility.\n\n1045\n00:55:23,661 --> 00:55:29,308\nAll right, now when I take a look at it,\nI did hit Enter, didn't I?\n\n1046\n00:55:29,308 --> 00:55:36,100\n>> [LAUGH]\n>> Let's just double check.\n\n1047\n00:55:36,100 --> 00:55:40,700\nAll right, so I've got channel-group 48\nmode desirable and, oh, you know what?\n\n1048\n00:55:40,700 --> 00:55:42,440\nHang on let me double check one thing.\n\n1049\n00:55:42,440 --> 00:55:45,450\nI think I might have made a mistake.\n\n1050\n00:55:45,450 --> 00:55:47,540\nOh no, that should be good.\n\n1051\n00:55:47,540 --> 00:55:50,210\nSo this side is set to desirable,\nit's going to ask\n\n1052\n00:55:50,210 --> 00:55:54,890\nto build a trunk with the other side,\nbut I'm not seeing that coming up.\n\n1053\n00:55:54,890 --> 00:55:58,190\nSo we, this is probably another one of\nthose where I need to be patient where I\n\n1054\n00:55:58,190 --> 00:56:03,870\nprobably left the interface to shut down\nover here, I don't remember if I actually.\n\n1055\n00:56:03,870 --> 00:56:05,070\n>> Turned them back on.\n\n1056\n00:56:05,070 --> 00:56:06,722\n>> I didnt.\n\n1057\n00:56:06,722 --> 00:56:10,420\n[LAUGH] Look at that see there\nbasic trouble shooting right.\n\n1058\n00:56:10,420 --> 00:56:11,209\n>> Layer one.\n\n1059\n00:56:11,209 --> 00:56:13,806\n[LAUGH] There aids.\n\n1060\n00:56:13,806 --> 00:56:17,040\nDon forgot, there, all right so\n\n1061\n00:56:17,040 --> 00:56:20,510\nlet me bring those up\n>> There they go.\n\n1062\n00:56:20,510 --> 00:56:21,760\n>> Once they come up, now,\n\n1063\n00:56:21,760 --> 00:56:25,180\nwell that means our test of both sides\nbeing auto wasn't really fair was it?\n\n1064\n00:56:25,180 --> 00:56:27,390\n>> No\n>> I'll recreate that problem\n\n1065\n00:56:32,080 --> 00:56:32,710\n>> They're still bonding.\n\n1066\n00:56:32,710 --> 00:56:34,950\nYou have to give it a minute.\n\n1067\n00:56:34,950 --> 00:56:36,780\nRight now there's still in\nthe bonding process and\n\n1068\n00:56:36,780 --> 00:56:39,870\nyou'll see this first port\nhas an i which is standalone.\n\n1069\n00:56:39,870 --> 00:56:44,270\nAnd the second one has a p which\nis bundled in the port channel.\n\n1070\n00:56:44,270 --> 00:56:46,010\nThe second one is healthy and happy.\n\n1071\n00:56:46,010 --> 00:56:47,550\nThe first one is not.\n\n1072\n00:56:47,550 --> 00:56:49,340\nSometimes you just need to wait a moment.\n\n1073\n00:56:49,340 --> 00:56:52,190\nDon't get to aggressive and\ngo in and try and sort it out.\n\n1074\n00:56:52,190 --> 00:56:54,030\nOther times there might\nbe an actual problem and\n\n1075\n00:56:54,030 --> 00:56:56,720\nactually I think it's been long enough\nthat there probably is a problem.\n\n1076\n00:56:59,610 --> 00:57:01,000\nWe'll troubleshoot that.\n\n1077\n00:57:01,000 --> 00:57:04,370\nAnd looking at the other side,\nI've got port two is happy.\n\n1078\n00:57:04,370 --> 00:57:07,960\nPort one has a lower case\ns which means suspended.\n\n1079\n00:57:09,320 --> 00:57:12,800\nThat means we had some kind of a flaw,\nsomething that triggered it.\n\n1080\n00:57:12,800 --> 00:57:15,770\nLet me just take a look\nat the configuration.\n\n1081\n00:57:15,770 --> 00:57:19,950\nTypically it'll be something about\nthe configuration that breaks it, but\n\n1082\n00:57:19,950 --> 00:57:22,510\nin this case oh, there's my difference.\n\n1083\n00:57:23,750 --> 00:57:27,333\nIf you take a look at this,\nmy two ports don't have a matching\n\n1084\n00:57:27,333 --> 00:57:31,566\nconfiguration that will cause a problem so\nI'm gonna have to fix that.\n\n1085\n00:57:37,775 --> 00:57:39,520\nI'm gonna shut those ports down again.\n\n1086\n00:57:39,520 --> 00:57:43,308\nImportant to shut them\ndown because the changes\n\n1087\n00:57:43,308 --> 00:57:47,858\ncan lead to some weird results\nif you do it while it's on.\n\n1088\n00:57:47,858 --> 00:57:50,358\nI'm just gonna remove\nthat line from port two.\n\n1089\n00:57:55,775 --> 00:57:56,970\nAnd we'll bring that back up.\n\n1090\n00:57:59,130 --> 00:58:02,530\nAll right so let's give that a moment and\n>> We got something.\n\n1091\n00:58:02,530 --> 00:58:05,490\n>> Well,\nlook at that fa0/2 is not compatible.\n\n1092\n00:58:06,580 --> 00:58:08,580\nVLAN mask is different.\n\n1093\n00:58:08,580 --> 00:58:09,983\n>> Oh.\n\n1094\n00:58:09,983 --> 00:58:10,983\nVLAN mask.\n\n1095\n00:58:15,608 --> 00:58:16,900\n>> VLAN mask looks the same to me.\n\n1096\n00:58:16,900 --> 00:58:17,830\nLet me check the other side.\n\n1097\n00:58:18,870 --> 00:58:20,525\nMaybe the mistake is actually over here.\n\n1098\n00:58:24,525 --> 00:58:25,025\nNope.\n\n1099\n00:58:26,790 --> 00:58:28,191\nLet's see if that's just an old error.\n\n1100\n00:58:32,941 --> 00:58:34,532\n>> Yeah.\n>> They're both suspended.\n\n1101\n00:58:34,532 --> 00:58:35,605\n[LAUGH]\n>> [LAUGH] Oh, they're both suspended now.\n\n1102\n00:58:35,605 --> 00:58:40,483\nOh,what, let me look at\nthe port channel itself.\n\n1103\n00:58:43,400 --> 00:58:45,608\n[LAUGH] Looked you.\n\n1104\n00:58:45,608 --> 00:58:46,890\n>> Yup, so it did match.\n\n1105\n00:58:46,890 --> 00:58:49,020\nIf there's a mismatch,\nit's gonna suspend the port.\n\n1106\n00:58:49,020 --> 00:58:50,840\nI fixed the two physical ports.\n\n1107\n00:58:50,840 --> 00:58:52,270\nThe port channel was broken.\n\n1108\n00:58:52,270 --> 00:58:53,930\nI don't remember applying\nthat to the port channel.\n\n1109\n00:58:53,930 --> 00:58:55,025\nIt must have imported that.\n\n1110\n00:58:58,816 --> 00:59:01,816\nLet me shut this down.\n\n1111\n00:59:01,816 --> 00:59:02,816\nRemove that.\n\n1112\n00:59:17,358 --> 00:59:19,827\nAll right,\na lot of stuff scrolling by here, but\n\n1113\n00:59:19,827 --> 00:59:22,066\nlet's just verify those configurations.\n\n1114\n00:59:22,066 --> 00:59:22,670\n>> Looks good there.\n\n1115\n00:59:24,280 --> 00:59:26,140\n>> All right they all match.\n\n1116\n00:59:26,140 --> 00:59:28,191\nHopefully that takes care of our problem.\n\n1117\n00:59:32,525 --> 00:59:33,240\nThere we go.\n\n1118\n00:59:33,240 --> 00:59:34,060\n>> Yeah.\n\n1119\n00:59:34,060 --> 00:59:36,970\n>> Now ports one and\ntwo are both in the port channel.\n\n1120\n00:59:36,970 --> 00:59:40,650\nThat capital p means they are bundled\nin the port channel and they're happy.\n\n1121\n00:59:40,650 --> 00:59:49,870\nAnd if I go and look on the other\nside Same thing up and happy, right.\n\n1122\n00:59:49,870 --> 00:59:51,210\nI didn't intend for that to happen.\n\n1123\n00:59:51,210 --> 00:59:52,640\nThat actually worked out rather well.\n\n1124\n00:59:52,640 --> 00:59:57,010\nIf you have a mismatch on the ports it can\nresult in people coming out of the bundle.\n\n1125\n00:59:57,010 --> 01:00:00,120\n>> Remember that this is one of those\nconfigurations you need to take\n\n1126\n01:00:00,120 --> 01:00:02,110\nyour time with if do it.\n\n1127\n01:00:02,110 --> 01:00:05,560\nThe reason why is Don was able\nto troubleshoot it very quickly.\n\n1128\n01:00:05,560 --> 01:00:07,605\nBut as fast as he was\ntyping things in here.\n\n1129\n01:00:07,605 --> 01:00:08,500\n>> [LAUGH]\n>> Remember,\n\n1130\n01:00:08,500 --> 01:00:10,880\nthis is one of those weird settings,\n\n1131\n01:00:10,880 --> 01:00:15,320\nright, where even though we call it ether\nchannel, you actually have to initiate\n\n1132\n01:00:15,320 --> 01:00:19,975\na channel dash group and then you actually\nhave to configure a port dash channel.\n\n1133\n01:00:19,975 --> 01:00:21,191\n[LAUGH]\n>> Yeah, it's a lot of terminology.\n\n1134\n01:00:21,191 --> 01:00:24,396\n>> Yeah, and then all you do is you\ndo a show ether channel that actually\n\n1135\n01:00:24,396 --> 01:00:27,154\n[CROSSTALK] I mean there's\na lot of terminology that's not\n\n1136\n01:00:27,154 --> 01:00:30,740\nas intuitive as a lot of the other\nthings that we've been doing.\n\n1137\n01:00:30,740 --> 01:00:32,990\nTake your time and work through those.\n\n1138\n01:00:32,990 --> 01:00:35,300\nAnd then remember,\nboth sides matching is the key.\n\n1139\n01:00:35,300 --> 01:00:36,070\n>> Yeah.\n\n1140\n01:00:36,070 --> 01:00:37,520\nAll right, so we're good now.\n\n1141\n01:00:37,520 --> 01:00:42,072\nI do want to recreate the one problem,\nwhere one side is set to auto and\n\n1142\n01:00:42,072 --> 01:00:46,566\nthe other side is set to auto also,\nwhich right now I'm switch one.\n\n1143\n01:00:46,566 --> 01:00:50,250\nIf I look at my, oh,\nI'm not in config any more.\n\n1144\n01:00:50,250 --> 01:00:53,640\nIf I look at my interface,\nsee how it's set to auto on both of those.\n\n1145\n01:00:53,640 --> 01:00:59,060\nI'm gonna take switch two,\nand get into fa0/1 and two.\n\n1146\n01:00:59,060 --> 01:01:03,230\nDo the range.\nI'll shut them down.\n\n1147\n01:01:03,230 --> 01:01:06,256\nAnd I'm gonna say,\n\n1148\n01:01:06,256 --> 01:01:12,316\nchannel dash group 48, mode, auto.\n\n1149\n01:01:18,358 --> 01:01:19,025\nAll right.\n\n1150\n01:01:19,025 --> 01:01:23,390\nNow, just like on my switch one,\nI've got these guys set to auto also.\n\n1151\n01:01:23,390 --> 01:01:25,610\nThe fact that the group number\nis different doesn't matter.\n\n1152\n01:01:25,610 --> 01:01:26,680\nRight, the group number doesn't.\n\n1153\n01:01:26,680 --> 01:01:30,540\nThat's just locally significant on\nthe switch but we're set to auto here.\n\n1154\n01:01:30,540 --> 01:01:33,180\nThe other side is set to auto also.\n\n1155\n01:01:33,180 --> 01:01:36,500\nwhen I do a show ether-channel, summary.\n\n1156\n01:01:36,500 --> 01:01:38,580\nAll right.\n\n1157\n01:01:38,580 --> 01:01:43,440\nI can see that it's up but\neach of the ports labeled with\n\n1158\n01:01:43,440 --> 01:01:47,840\nan i which means they are stand alone,\nthey did not bundle.\n\n1159\n01:01:47,840 --> 01:01:51,530\nThey're being treated as separate\nports right now because neither side\n\n1160\n01:01:51,530 --> 01:01:54,820\nactually asked to bring up the connection.\n\n1161\n01:01:54,820 --> 01:01:57,010\nAnd if I do a show spanning dash tree.\n\n1162\n01:01:58,190 --> 01:02:01,000\nAnd I hear what will filter\nit like I did before.\n\n1163\n01:02:11,450 --> 01:02:14,700\nThen I can see where it's\nblocking on port two, right,\n\n1164\n01:02:14,700 --> 01:02:17,420\nso effectively port two is being shut off.\n\n1165\n01:02:17,420 --> 01:02:18,770\nWe might as well not as\nhave an ether-channel\n\n1166\n01:02:18,770 --> 01:02:20,720\nconfiguration at all like this.\n\n1167\n01:02:20,720 --> 01:02:21,470\nAll right.\n\n1168\n01:02:21,470 --> 01:02:23,620\nBut all I have to do\nis go back in here and\n\n1169\n01:02:23,620 --> 01:02:28,250\nchange from auto to desirable and\nwe'll be in business.\n\n1170\n01:02:28,250 --> 01:02:33,670\nNow we're doing pagp, what if we wanted\nto do lacp or regular ether-channel?\n\n1171\n01:02:33,670 --> 01:02:36,040\nIf I flip it to mode on,\n\n1172\n01:02:37,090 --> 01:02:42,056\nthat's gonna make port channel\n48 become a raw ether-channel.\n\n1173\n01:02:42,056 --> 01:02:48,550\nBundle, right?\n\n1174\n01:02:48,550 --> 01:02:50,400\nAnd so I'm getting a bunch\nof information popping up.\n\n1175\n01:02:50,400 --> 01:02:52,898\nNotice this guy right here,\n\n1176\n01:02:52,898 --> 01:02:56,410\nEC5 compatible fa0/1 is compatible\nwith port channel members.\n\n1177\n01:02:56,410 --> 01:02:59,930\nThat's letting me know that they match up\nand they're able to join the port channel.\n\n1178\n01:02:59,930 --> 01:03:01,840\nBut at the end of the day\nwhen I look at it.\n\n1179\n01:03:01,840 --> 01:03:05,700\nWell, it's showing that it's up and\nit's in the port channel and over here,\n\n1180\n01:03:09,150 --> 01:03:13,450\nwhen I look at it, we're still stand\nalone, this is a recipe for disaster.\n\n1181\n01:03:13,450 --> 01:03:16,550\n>> Right\n>> Right, on one side it is bundling and\n\n1182\n01:03:16,550 --> 01:03:20,600\nload balancing, on the other side it\nstands alone so one port is getting shut\n\n1183\n01:03:20,600 --> 01:03:24,930\noff so now you're gonna get a lot of\nweird activity as a result of this,\n\n1184\n01:03:24,930 --> 01:03:31,710\nunusual behavior like 50% of your\npackets exceeding and 50% failing.\n\n1185\n01:03:31,710 --> 01:03:35,700\nAnd the worst part what error\nmessages do I see on my screen?\n\n1186\n01:03:35,700 --> 01:03:36,810\nNone, right?\n\n1187\n01:03:36,810 --> 01:03:38,650\nThis is one of those.\n\n1188\n01:03:38,650 --> 01:03:42,400\nBattles is where,\neven though we know there's a problem,\n\n1189\n01:03:42,400 --> 01:03:44,050\nif I get to the bottom of my logs here.\n\n1190\n01:03:45,080 --> 01:03:45,910\nThere we go.\n\n1191\n01:03:45,910 --> 01:03:49,720\nEven if I look at my logs,\nthe only things I see are positive things.\n\n1192\n01:03:49,720 --> 01:03:54,930\nWe are compatible, we can join\nthe interfaces are coming up whatever.\n\n1193\n01:03:54,930 --> 01:03:57,350\nThat's the kind of issue that we have.\n\n1194\n01:03:57,350 --> 01:04:00,128\nAnd the only way to\ntroubleshoot this down really,\n\n1195\n01:04:00,128 --> 01:04:02,720\nis to compare the configurations\nside by side.\n\n1196\n01:04:02,720 --> 01:04:07,320\nOn one side I do a show\nrun interface fa0/1 and\n\n1197\n01:04:07,320 --> 01:04:10,542\ntwo, and I look at how it's set.\n\n1198\n01:04:10,542 --> 01:04:15,399\nAnd I go to the other side and\nI do the same thing and I say, all right,\n\n1199\n01:04:15,399 --> 01:04:17,710\nthese guys are set to mode auto.\n\n1200\n01:04:17,710 --> 01:04:20,560\nThese guys are set to mode on.\n\n1201\n01:04:20,560 --> 01:04:21,850\nThere's my problem.\n\n1202\n01:04:21,850 --> 01:04:25,150\nI need to make these guys mode.\n\n1203\n01:04:25,150 --> 01:04:29,330\nEither desirable, or active,\nor something like that.\n\n1204\n01:04:29,330 --> 01:04:30,020\nI'll go desirable.\n\n1205\n01:04:31,230 --> 01:04:31,950\nAll right.\n\n1206\n01:04:31,950 --> 01:04:35,710\nAnd when that's done,\nnow our EtherChannel comes up.\n\n1207\n01:04:35,710 --> 01:04:40,590\nThey bond together and now we've got\na 200 MB line between the two systems,\n\n1208\n01:04:40,590 --> 01:04:42,910\nSpanning three C's is one link.\n\n1209\n01:04:42,910 --> 01:04:47,150\nWe load balance across both links,\nit's happy, everything's working great.\n\n1210\n01:04:47,150 --> 01:04:47,944\nAnd this is what we want.\n\n1211\n01:04:52,144 --> 01:04:55,644\nAll right.\n\n1212\n01:04:55,644 --> 01:04:57,484\nLet me just kind of review here.\n\n1213\n01:05:01,444 --> 01:05:04,660\nThere is one other thing I wanna show.\n\n1214\n01:05:04,660 --> 01:05:05,880\nIt's not gonna be on the exam.\n\n1215\n01:05:05,880 --> 01:05:10,280\nBut, in real life land, just so you know\nit, the other type of issue that we can\n\n1216\n01:05:10,280 --> 01:05:12,510\nhave with the ether channel,\nbesides bad configuration,\n\n1217\n01:05:12,510 --> 01:05:13,720\nis if a link fails,\n>> Yeah.\n\n1218\n01:05:13,720 --> 01:05:14,280\n>> Right?\n\n1219\n01:05:14,280 --> 01:05:17,680\nAnd you're not gonna see that on\nthe exam cuz that's all fake equipment,\n\n1220\n01:05:17,680 --> 01:05:19,490\nthey can't do a link failing.\n\n1221\n01:05:19,490 --> 01:05:20,480\nBut if you wanna see it.\n>> We can.\n\n1222\n01:05:20,480 --> 01:05:22,180\n>> Yeah, we can, absolutely.\n\n1223\n01:05:22,180 --> 01:05:23,190\nI'm just gonna unplug a link.\n\n1224\n01:05:24,790 --> 01:05:29,180\nWhen that link goes down, the connection\nbetween the switches is still present.\n\n1225\n01:05:29,180 --> 01:05:30,640\nEtherChannel is just using the one link.\n\n1226\n01:05:30,640 --> 01:05:33,389\nOur bandwidth just went from 200\nmegabit down to 100 megabit.\n\n1227\n01:05:34,460 --> 01:05:36,360\nThere's not a detectable problem.\n\n1228\n01:05:36,360 --> 01:05:39,500\nThe N user get a little slower, alright.\n\n1229\n01:05:39,500 --> 01:05:44,610\nBut If I pull up my summary,\nI should see that one of the ports\n\n1230\n01:05:44,610 --> 01:05:49,830\nis flagged as down versus the other one\nbeing up and in the bundle, all right.\n\n1231\n01:05:49,830 --> 01:05:52,420\nYou don't necessarily see something\nglaring jumping out at you.\n\n1232\n01:05:52,420 --> 01:05:55,250\nBut if you see this D\ndesignator right there,\n\n1233\n01:05:55,250 --> 01:05:58,450\nthat's what's usually gonna indicate that\neither you've got a bad configuration or\n\n1234\n01:05:58,450 --> 01:05:59,340\nyou might have a link down.\n\n1235\n01:05:59,340 --> 01:06:02,220\nIf everything is perfect then\nyou might have a bad cable.\n\n1236\n01:06:04,600 --> 01:06:06,470\n>> In terms of configuration for us,\n\n1237\n01:06:06,470 --> 01:06:10,470\nthough, remember there's a lot\nof terminology is the key.\n\n1238\n01:06:10,470 --> 01:06:12,170\nThe key is on both sides.\n\n1239\n01:06:12,170 --> 01:06:14,180\nIf you're gonna use lacp.\n\n1240\n01:06:14,180 --> 01:06:16,280\nMake sure you use lacp on both ends.\n\n1241\n01:06:16,280 --> 01:06:19,890\nWhen you use pagp,\nmake sure you use pagp on both ends.\n\n1242\n01:06:19,890 --> 01:06:22,440\nThat's what we're gonna end up seeing,\n\n1243\n01:06:22,440 --> 01:06:27,360\nkeep the configuration here\nconsistent on both sides.\n\n1244\n01:06:27,360 --> 01:06:30,430\n>> Yeah and I almost all use lacp\njust because it's an open standard.\n\n1245\n01:06:30,430 --> 01:06:31,330\n>> Right.\n>> So you can mix and\n\n1246\n01:06:31,330 --> 01:06:32,800\nmatch vendor switches.\n\n1247\n01:06:32,800 --> 01:06:35,720\nIf you go pagp,\nit's gotta be Cisco on both ends so.\n\n1248\n01:06:35,720 --> 01:06:36,540\nLittle bit of a pain.\n\n1249\n01:06:36,540 --> 01:06:40,400\nI have seen some third party switches\nthat supported the raw EtherChannel\n\n1250\n01:06:40,400 --> 01:06:41,990\nsetting though so\nthere are some that do that.\n\n1251\n01:06:41,990 --> 01:06:43,910\nBut not pagp.\n\n1252\n01:06:43,910 --> 01:06:45,260\n>> Yeah.\n\n1253\n01:06:45,260 --> 01:06:45,800\n>> All right.\n\n1254\n01:06:45,800 --> 01:06:48,490\nRonnie, I think that\nknocks out EtherChannel.\n\n1255\n01:06:48,490 --> 01:06:52,890\nThe only other thing that we got on our\nlist to tackle is router on a stick.\n\n1256\n01:06:52,890 --> 01:06:53,920\n>> Router on a stick.\n\n1257\n01:06:53,920 --> 01:06:56,210\n>> Or inter-VLAN routing.\n\n1258\n01:06:56,210 --> 01:06:58,890\nIf you guys remember from\nthe show where we cover that.\n\n1259\n01:06:58,890 --> 01:07:03,950\nThere's a lot of commands involved in that\nand so it is pretty easy to mess it up.\n\n1260\n01:07:03,950 --> 01:07:05,070\nWe're gonna take a look at that but\n\n1261\n01:07:05,070 --> 01:07:07,940\nwe don't really have enough time\nleft in this segment to do it.\n\n1262\n01:07:07,940 --> 01:07:11,235\nLet's stop and take a break and when we\nget back, we'll hit our final segment.\n\n1263\n01:07:11,235 --> 01:07:14,815\nWe'll wrap up EtherChannel and\nwe'll wrap up troubleshooting.\n\n1264\n01:07:14,815 --> 01:07:16,435\n>> We'll wrap up troubleshooting.\n\n1265\n01:07:16,435 --> 01:07:17,935\n>> All right, well ladies and\ngentlemen stay tuned.\n\n1266\n01:07:17,935 --> 01:07:19,565\nWe'll be back after this.\n\n1267\n01:07:19,565 --> 01:07:27,565\n[SOUND].\n\n1268\n01:07:27,565 --> 01:07:29,235\nAll right, welcome back everybody.\n\n1269\n01:07:29,235 --> 01:07:34,129\nIn our final segment today we're gonna\ntake a look at router on a stick or\n\n1270\n01:07:34,129 --> 01:07:40,030\nreally, inter VLAN routing, so routing\ntraffic between VLANs on a network.\n\n1271\n01:07:40,030 --> 01:07:44,180\nIn a real life LAN we're normally\ngonna do this on a layer three switch.\n\n1272\n01:07:44,180 --> 01:07:47,188\nBut on the CC&A exam what\nthey're hitting you for\n\n1273\n01:07:47,188 --> 01:07:51,412\nis router on a stick where we take\na router and we divide its interface up\n\n1274\n01:07:51,412 --> 01:07:54,940\ninto sub-interfaces to allow\nit to route between VLANs.\n\n1275\n01:07:54,940 --> 01:07:58,288\n>> Yeah, remember that if you do\nhave multiple VLANs on a switch,\n\n1276\n01:07:58,288 --> 01:08:01,470\nthey cannot directly\ncommunicate with each other.\n\n1277\n01:08:01,470 --> 01:08:04,770\nWe need to layer three device\nwhich is gonna be a router.\n\n1278\n01:08:04,770 --> 01:08:08,110\nAnd we normally connect that to\nthe switch with a trunk port.\n\n1279\n01:08:08,110 --> 01:08:12,430\nAnd so once we do that, we actually still\nhave to build a route traffic out and\n\n1280\n01:08:12,430 --> 01:08:14,590\nback in on that same interface.\n\n1281\n01:08:14,590 --> 01:08:16,440\nWe need to make sure that we\ncan configure it correctly and\n\n1282\n01:08:16,440 --> 01:08:17,700\ntroubleshoot it when there's issues.\n\n1283\n01:08:18,950 --> 01:08:23,220\n>> And unfortunately, the configuration,\nit does lend itself to a lot of typos,\n\n1284\n01:08:23,220 --> 01:08:24,820\nreally easy to make typos.\n\n1285\n01:08:24,820 --> 01:08:25,850\nBut, for the most part,\n\n1286\n01:08:25,850 --> 01:08:29,270\nthe big problem that we're gonna have is\nsimply setting up the trunk, all right?\n\n1287\n01:08:29,270 --> 01:08:29,930\n>> Yeah.\n>> The trunk\n\n1288\n01:08:29,930 --> 01:08:32,070\npart is the part that we gotta sort out.\n\n1289\n01:08:32,070 --> 01:08:35,520\nIf we take a look at a router and\nlet's just pull up ours here.\n\n1290\n01:08:37,210 --> 01:08:41,020\nAnd let me just start with that.\n\n1291\n01:08:42,840 --> 01:08:43,900\nAll right.\n\n1292\n01:08:43,900 --> 01:08:46,810\nI've got this router set up for\nrouter on a stick.\n\n1293\n01:08:46,810 --> 01:08:52,013\nWhat I did was took the GigabitEthernet0/1\ninterface, so I took that guy right there,\n\n1294\n01:08:52,013 --> 01:08:56,532\nand I added sub-interfaces to it,\n.10, .20, .30, and .40 and\n\n1295\n01:08:56,532 --> 01:09:01,250\n.50 is off the screen, but\nthere are other ones there, all right.\n\n1296\n01:09:01,250 --> 01:09:04,770\nThe sub interface number\ndoesn't matter at all.\n\n1297\n01:09:04,770 --> 01:09:08,660\nYou can pick whatever number that\nyou want, for the sub interface.\n\n1298\n01:09:08,660 --> 01:09:15,900\nWhat does matter is the very next\nline where I say incapasilation.1q10.\n\n1299\n01:09:15,900 --> 01:09:21,790\nThat tells it that this sub interface\nmatches up VLAN number 10, all right.\n\n1300\n01:09:21,790 --> 01:09:25,860\nThat's a real important command, cuz\nthere is two mistakes you can make here.\n\n1301\n01:09:25,860 --> 01:09:26,990\nOne is you can leave it off.\n\n1302\n01:09:26,990 --> 01:09:32,650\nThat's a pretty big problem and then, two,\nyou can pick the wrong encapsulation.\n\n1303\n01:09:32,650 --> 01:09:37,330\nI've got this one set to .1Q but,\n\n1304\n01:09:37,330 --> 01:09:40,770\nif I get into one of those.\n\n1305\n01:09:40,770 --> 01:09:43,610\nWow, there we go.\n\n1306\n01:09:43,610 --> 01:09:46,870\nAll right, and\nI issue out that encapsulation command.\n\n1307\n01:09:46,870 --> 01:09:50,830\nNotice how it only supports\n.1Q on this particular router.\n\n1308\n01:09:50,830 --> 01:09:54,660\nSome routers support ISL also, and\nso you'll have the ISL option.\n\n1309\n01:09:54,660 --> 01:09:58,340\nAnd if you pick the wrong encapsulation,\nand it doesn't match up with your switch,\n\n1310\n01:09:58,340 --> 01:09:59,180\nyou're gonna have a problem..\n\n1311\n01:09:59,180 --> 01:10:00,570\nRight?\nI guess I can't really pick\n\n1312\n01:10:00,570 --> 01:10:01,130\nthe wrong one here.\n\n1313\n01:10:01,130 --> 01:10:03,250\n>> Nope.\n>> Since the router only supports one.\n\n1314\n01:10:03,250 --> 01:10:05,408\nBut I could choose it\nwrong on the switch side.\n\n1315\n01:10:05,408 --> 01:10:07,392\nAll right?\n\n1316\n01:10:07,392 --> 01:10:10,870\nNow this side I've got it set to do.\n\n1317\n01:10:10,870 --> 01:10:16,490\n802., 1Q and I've got the VLANs map and\nI've got IPs assigned to each interface.\n\n1318\n01:10:16,490 --> 01:10:21,200\nAs far as this router is\nconcerned it is geared and\n\n1319\n01:10:21,200 --> 01:10:23,350\nready to do the inter VLAN routing right?\n\n1320\n01:10:23,350 --> 01:10:27,336\nThere's all my different VLANs\nlined up and I wonder why it,\n\n1321\n01:10:27,336 --> 01:10:33,980\nnormally it sorts them,\nnormally it sorts them in the order that\n\n1322\n01:10:35,180 --> 01:10:40,360\nthey line up numerically but this time\nthey didn't, that's strange well, anyhow.\n\n1323\n01:10:40,360 --> 01:10:42,930\nI can see them, it's ready to rock, right?\n\n1324\n01:10:42,930 --> 01:10:44,840\nBut the switch side might not be.\n\n1325\n01:10:44,840 --> 01:10:50,610\nAnd that's exactly how this router,\nif I do a shared CDP neighbor.\n\n1326\n01:10:50,610 --> 01:10:55,940\nI can see that it's plugged in\nswitch one on port Fao 0/5.\n\n1327\n01:10:55,940 --> 01:10:58,860\nAnd if I take a look at\nswitch one right now.\n\n1328\n01:10:58,860 --> 01:11:01,700\nAnd I look at Fao 0/5.\n\n1329\n01:11:01,700 --> 01:11:03,705\nWell, it's got no configuration.\n\n1330\n01:11:03,705 --> 01:11:07,190\nOn a 35-60, that means it's set up for\n\n1331\n01:11:07,190 --> 01:11:12,530\nswitch port negotiation and\nit's doing dynamic trunking protocol, DTP.\n\n1332\n01:11:13,770 --> 01:11:17,660\nIt's set to auto which means that\nthe other side asks us to trunk\n\n1333\n01:11:17,660 --> 01:11:19,680\nwill become a trunk, right.\n\n1334\n01:11:19,680 --> 01:11:26,570\nBut, if I do a show interface\nFao 0/5 trunk, and I look at it.\n\n1335\n01:11:26,570 --> 01:11:27,920\nIt sets auto.\n\n1336\n01:11:27,920 --> 01:11:29,046\nIt sets negotiate.\n\n1337\n01:11:29,046 --> 01:11:32,290\nBut it's not-trunking, all right?\n\n1338\n01:11:32,290 --> 01:11:37,130\nThat's because the routers,\nnever initiate trunking ever.\n\n1339\n01:11:37,130 --> 01:11:39,470\nThere is no command you can\nenter to make them do it.\n\n1340\n01:11:39,470 --> 01:11:43,750\nThe routers are effectively set to auto,\nright.\n\n1341\n01:11:43,750 --> 01:11:45,910\nAnd there's no way to change\nit on the router's side.\n\n1342\n01:11:45,910 --> 01:11:49,510\nIt's got to be changed on the switch side,\nand it goes back to what I said earlier,\n\n1343\n01:11:49,510 --> 01:11:54,340\nI like to just manually assign it,\nbut right now, it's not trunking.\n\n1344\n01:11:54,340 --> 01:11:56,340\nThat doesn't mean we're not working.\n\n1345\n01:11:56,340 --> 01:11:59,434\nNotice that we have our native VLAN,\nVLAN one and\n\n1346\n01:11:59,434 --> 01:12:03,518\nany traffic that we send across\nthis wire is not gonna be tagged.\n\n1347\n01:12:03,518 --> 01:12:10,386\nIt's gonna be VLAN one and\non the router, if I scroll back up here.\n\n1348\n01:12:10,386 --> 01:12:14,216\nI created all these sub interfaces\nthat are tied to VLANs.\n\n1349\n01:12:14,216 --> 01:12:18,700\nBut the parent interface GI0/1.\n\n1350\n01:12:18,700 --> 01:12:22,040\nThat is what is gonna be the native VLAN.\n\n1351\n01:12:22,040 --> 01:12:26,410\nSo anything on your native VLAN,\nVLAN 1 by default is gonna hit this parent\n\n1352\n01:12:26,410 --> 01:12:32,660\ninterface, which I've assigned\nthe 192.168.0 network too, and then you'll\n\n1353\n01:12:32,660 --> 01:12:36,020\nsee 192.168.10 and 20 and 30 tied to the\nother VLANs that are out there, all right?\n\n1354\n01:12:37,090 --> 01:12:39,790\nSo if I change that native VLAn,\n\n1355\n01:12:39,790 --> 01:12:44,875\nI'm effectively changing what traffic is\ngonna make it to this parent interface.\n\n1356\n01:12:44,875 --> 01:12:46,135\nWe can't change it here.\n\n1357\n01:12:46,135 --> 01:12:50,425\nYou can't do an encapsulation statement\non the parent interface on a router.\n\n1358\n01:12:50,425 --> 01:12:52,975\nSo it's just automatically mapped\nto whatever your native VLAN is.\n\n1359\n01:12:52,975 --> 01:12:55,089\nSo always double check\nthat native VLAN setting.\n\n1360\n01:12:57,750 --> 01:13:02,940\nAll right, so on my switch,\nI'm set to auto, but it's not trunking.\n\n1361\n01:13:02,940 --> 01:13:10,270\nIf I bump it up to desirable,\nso if I get into fa0/5, and\n\n1362\n01:13:10,270 --> 01:13:16,760\nI say switchport mode dynamic desirable,\nlike that.\n\n1363\n01:13:16,760 --> 01:13:20,083\nAll right,\nnow I'm gonna try to become a trunk.\n\n1364\n01:13:22,625 --> 01:13:24,370\nAnd my interface just reset.\n\n1365\n01:13:24,370 --> 01:13:29,140\nAnd if I look at it, I'm set to desirable,\n\n1366\n01:13:29,140 --> 01:13:33,740\nI'm negotiating and\nI'm still not trunking.\n\n1367\n01:13:33,740 --> 01:13:35,700\nWhat the heck is going on here?\n\n1368\n01:13:35,700 --> 01:13:40,270\n>> Remember again, the router is still\nnot set to talk or say anything.\n\n1369\n01:13:40,270 --> 01:13:41,910\nAbout the other side.\n\n1370\n01:13:41,910 --> 01:13:45,410\nSo, even though we haven't set the\ndesirable, the other side is still going,\n\n1371\n01:13:45,410 --> 01:13:46,415\nyeah, I don't care.\n\n1372\n01:13:46,415 --> 01:13:48,330\n[LAUGH]\n>> That's exactly right.\n\n1373\n01:13:48,330 --> 01:13:50,750\nYou know a router is not a switch.\n\n1374\n01:13:50,750 --> 01:13:52,190\nIt's not sending BPDUs.\n\n1375\n01:13:52,190 --> 01:13:54,870\nIt's not participating in spanning tree.\n\n1376\n01:13:54,870 --> 01:13:58,350\nIt's not giving any of the signs\nthat a switch expects.\n\n1377\n01:13:58,350 --> 01:14:00,510\nIt's not running DTP.\n\n1378\n01:14:00,510 --> 01:14:02,840\nIt's not running\nthe Dynamic Trunking Protocol.\n\n1379\n01:14:02,840 --> 01:14:06,710\nSo as long as we stay negotiating,\nwe're never gonna build a trunk and\n\n1380\n01:14:06,710 --> 01:14:09,570\nour other VLANs are never\ngoing to go active.\n\n1381\n01:14:09,570 --> 01:14:10,220\nAll right.\n\n1382\n01:14:10,220 --> 01:14:14,090\nSo what I've got to do is in a router and\na stick environment,\n\n1383\n01:14:14,090 --> 01:14:18,930\nyou've got to statically\nassign the port to be a trunk.\n\n1384\n01:14:18,930 --> 01:14:24,556\nSo I'm gonna say switchport\nencapsulation or switchport trunk.\n\n1385\n01:14:24,556 --> 01:14:27,670\nIncapsulation.1q.\n\n1386\n01:14:27,670 --> 01:14:30,290\nYou know this is the negative of\n\n1387\n01:14:30,290 --> 01:14:34,250\nusing short cut commands all the time is\nyou don't remember how to spell anything.\n\n1388\n01:14:34,250 --> 01:14:40,700\nSwitch port mode trunk and\nswitchport nonegotiates.\n\n1389\n01:14:40,700 --> 01:14:41,440\nAll right.\n\n1390\n01:14:41,440 --> 01:14:43,550\nSo I am statically setting it.\n\n1391\n01:14:43,550 --> 01:14:46,730\nYou will be a trunk, all right?\n\n1392\n01:14:46,730 --> 01:14:48,070\nAnd when I do that.\n\n1393\n01:14:52,457 --> 01:14:55,382\nOh, shoot.\n\n1394\n01:14:55,382 --> 01:14:58,890\nNow, it's an 802.1q trunk.\n\n1395\n01:14:58,890 --> 01:15:03,670\nIt is trunking and now those\nsubinterfaces are gonna kick in and\n\n1396\n01:15:03,670 --> 01:15:05,590\nstart working on the router.\n\n1397\n01:15:05,590 --> 01:15:06,820\nOh you know what I\nshould have done Ronnie?\n\n1398\n01:15:06,820 --> 01:15:07,880\nAnd I didn't do it.\n\n1399\n01:15:07,880 --> 01:15:09,680\nThe show IP interface brief.\n\n1400\n01:15:09,680 --> 01:15:13,270\n>> These sub interfaces,\nregardless of how the switches set.\n\n1401\n01:15:13,270 --> 01:15:16,480\nSo it doesn't matter whether\nthe switches correct or not.\n\n1402\n01:15:16,480 --> 01:15:20,930\nThe sub interfaces will always show as up.\n\n1403\n01:15:20,930 --> 01:15:25,765\nSo the sub interfaces are gonna be up up\nas long as the parent interface is up up.\n\n1404\n01:15:25,765 --> 01:15:26,630\n>> Mm-hm.\n\n1405\n01:15:26,630 --> 01:15:30,980\n>> So, you can't trust\nthe statuses on a sub interface.\n\n1406\n01:15:30,980 --> 01:15:34,940\nBecause their virtual interface is, you\nmight as well not even list anything here.\n\n1407\n01:15:34,940 --> 01:15:38,390\nBut if I scroll back through my history,\nyou'll never see messages in here about\n\n1408\n01:15:38,390 --> 01:15:41,680\nthose sub interfaces going up or\ndown, or whatever.\n\n1409\n01:15:41,680 --> 01:15:44,610\nAnd that's because they're always up.\n\n1410\n01:15:44,610 --> 01:15:48,400\nSo troubleshooting here, you're not\ngonna be able to use log messages or\n\n1411\n01:15:48,400 --> 01:15:49,440\neven debugs.\n\n1412\n01:15:49,440 --> 01:15:52,470\nYou're gonna need to verify visually and\njust know that when you do router on\n\n1413\n01:15:52,470 --> 01:15:55,945\na stick, you've got to manually,\nstatically assign that trunk.\n\n1414\n01:15:55,945 --> 01:15:56,445\n>> Mm-hmm.\n\n1415\n01:15:57,940 --> 01:16:00,590\n>> And\nwe don't even have a lot of options here.\n\n1416\n01:16:00,590 --> 01:16:02,210\nBecause the router only supports .1q,\n\n1417\n01:16:02,210 --> 01:16:05,380\nwe've got to statically\nassign an 802.1q trunk.\n\n1418\n01:16:05,380 --> 01:16:07,270\nSo the settings kind of define themselves.\n\n1419\n01:16:07,270 --> 01:16:08,250\n>> Yeah.\n\n1420\n01:16:08,250 --> 01:16:10,890\nThe thing to remember for\nus on the router is\n\n1421\n01:16:10,890 --> 01:16:14,990\nmake sure that we remember how to create\nthose sub interfaces when you do so.\n\n1422\n01:16:14,990 --> 01:16:18,950\nYou may think, hey I'll just go to\ninterface, zero slash one, and try and\n\n1423\n01:16:18,950 --> 01:16:20,847\ntype in encapsulation.1q and\n\n1424\n01:16:20,847 --> 01:16:25,250\nyou're gonna see it's gonna tell you that\nyou can't do that on a physical interface.\n\n1425\n01:16:25,250 --> 01:16:29,740\nIt always has to be inside\nthe subinterface and it's kind of unusual\n\n1426\n01:16:29,740 --> 01:16:33,950\neven once you get in the subinterface, cuz\nnormally you and I just simply go in and,\n\n1427\n01:16:33,950 --> 01:16:37,430\nI do it by default, try and assign an IP\naddress, and it's gonna tell you once you\n\n1428\n01:16:37,430 --> 01:16:42,120\nhave a subinterface, hey, you've got to go\nahead and also do the encapsulation first.\n\n1429\n01:16:42,120 --> 01:16:44,600\nSo, the good thing is that we'll tell you.\n\n1430\n01:16:44,600 --> 01:16:48,250\nYou just have to have the right\ninformation and that's the key.\n\n1431\n01:16:48,250 --> 01:16:48,820\n>> Yeah.\n\n1432\n01:16:48,820 --> 01:16:51,010\nAnother thing when you're\ndoing the configuration,\n\n1433\n01:16:51,010 --> 01:16:55,320\nyou need to set that encapsulation before\nit will let you assign an IP address.\n\n1434\n01:16:55,320 --> 01:16:57,830\nSo, for example,\nlet's pull this router back up,\n\n1435\n01:16:57,830 --> 01:17:03,350\nif I create a new sub interface,\nso I'll do 0/1.60, okay?\n\n1436\n01:17:03,350 --> 01:17:08,540\nSo when I go into that, if I try and\nassign an IP address, it's gonna complain.\n\n1437\n01:17:09,810 --> 01:17:11,730\n>> Very verbosely.\n\n1438\n01:17:11,730 --> 01:17:12,840\n>> Right there.\nYep.\n\n1439\n01:17:12,840 --> 01:17:16,120\nLetting me know that, hey,\nyou can only do that if it's a trunk.\n\n1440\n01:17:16,120 --> 01:17:18,360\nIf it's an ISL or 802.1Q trunk.\n\n1441\n01:17:19,450 --> 01:17:20,800\nAnd you're not.\n\n1442\n01:17:20,800 --> 01:17:22,975\nAnd so\nif you're not trunking on that interface,\n\n1443\n01:17:22,975 --> 01:17:25,480\nwe don't have that encapsulation site,\nyou can't assign an IP.\n\n1444\n01:17:25,480 --> 01:17:29,025\nDoesn't mean it's broken,\nit just means that we need to add,\n\n1445\n01:17:29,025 --> 01:17:32,860\nencapsulation.1q-\n>> Now Don,\n\n1446\n01:17:32,860 --> 01:17:36,850\nbefore you enter that in, the number,\ngo ahead and just press enter after it and\n\n1447\n01:17:36,850 --> 01:17:39,305\nwe even get another reminder-\n>> What this?\n\n1448\n01:17:39,305 --> 01:17:40,414\n>> Encapsulation.1q.\n\n1449\n01:17:41,700 --> 01:17:43,620\nAnd notice that it tells\nyou that it is incomplete.\n\n1450\n01:17:43,620 --> 01:17:46,470\nSo once again,\njust typing that in isn't enough.\n\n1451\n01:17:46,470 --> 01:17:50,980\nIt actually tells you what's wrong if\nyou don't do the full configuration.\n\n1452\n01:17:50,980 --> 01:17:53,160\nSo make sure you do pay\nattention to that too.\n\n1453\n01:17:53,160 --> 01:17:55,690\nNow, we can't promise you\nthat on the simulation.\n\n1454\n01:17:55,690 --> 01:17:59,140\nI can't promise you anything on those.\n\n1455\n01:17:59,140 --> 01:18:02,310\nSo, in other words,\nyou need to know the full configuration.\n\n1456\n01:18:02,310 --> 01:18:05,830\nYou might where you'll get simulations,\nbut not every single command.\n\n1457\n01:18:05,830 --> 01:18:07,695\nOr it actually reveals\nall the information.\n\n1458\n01:18:07,695 --> 01:18:08,480\nMm-hm.\nYeah.\n\n1459\n01:18:08,480 --> 01:18:13,490\n>> All right, now another problem that we\nhave, because the router is not a switch.\n\n1460\n01:18:13,490 --> 01:18:18,070\nWe might be relying on something\nlike VLAN trunking protocol, VTP.\n\n1461\n01:18:18,070 --> 01:18:20,670\nWith VTP,\nwhen you create a VLAN on one switch,\n\n1462\n01:18:20,670 --> 01:18:22,400\nthe other switches learn it, right?\n\n1463\n01:18:22,400 --> 01:18:23,780\nSo, for example.\n\n1464\n01:18:23,780 --> 01:18:26,260\nHere, let me drop down to switch one.\n\n1465\n01:18:26,260 --> 01:18:30,997\nIf I do a show VLAN,\nlet me do a show VLAN.\n\n1466\n01:18:30,997 --> 01:18:35,212\nOkay, I've got VLAN 1, 10, 20, 30, 40, 50.\n\n1467\n01:18:35,212 --> 01:18:35,943\nAll right?\n\n1468\n01:18:35,943 --> 01:18:38,430\nAnd then it jumps into the special ones.\n\n1469\n01:18:38,430 --> 01:18:42,490\nAnd if I look at switch two, I've got\nVLAN 1, 10, 20, 30, 40, 50, right?\n\n1470\n01:18:43,680 --> 01:18:48,220\nOn switch one, if I create VLAN 70,\n\n1471\n01:18:48,220 --> 01:18:53,890\nand give it a name like ExecutiveVLAN,\nokay?\n\n1472\n01:18:53,890 --> 01:18:55,890\nI just created VLAN 70.\n\n1473\n01:18:55,890 --> 01:19:01,116\nAnd if I look over on switch two magic.\n\n1474\n01:19:01,116 --> 01:19:06,000\nSpacebar there, scroll back fast, there.\n\n1475\n01:19:06,000 --> 01:19:07,350\nWe've got VLAN 70.\n\n1476\n01:19:07,350 --> 01:19:10,880\nSo the switches are talking to\neach other wen I created VLAN one,\n\n1477\n01:19:10,880 --> 01:19:13,940\nVTP's allowing the others to learn it,\ngreat, right?\n\n1478\n01:19:13,940 --> 01:19:16,230\nWell, what about VLAN 60?\n\n1479\n01:19:16,230 --> 01:19:18,500\nI just created VLAN 60 on the router.\n\n1480\n01:19:18,500 --> 01:19:19,400\n>> Yeah.\n\n1481\n01:19:19,400 --> 01:19:21,580\n>> But the router is not a switch.\n\n1482\n01:19:21,580 --> 01:19:23,950\nIt's not telling the switches about it.\n\n1483\n01:19:23,950 --> 01:19:26,450\nSo, that router is\nplugged into switch one.\n\n1484\n01:19:26,450 --> 01:19:30,380\nIf I do a show VLAN, there is no VLAN 60.\n\n1485\n01:19:30,380 --> 01:19:34,080\nBut there is, on that interface,\n\n1486\n01:19:34,080 --> 01:19:37,150\nthe router that's connected,\nhas a subinterface on VLAN 60.\n\n1487\n01:19:37,150 --> 01:19:42,330\nIf I do a show interface, FA0/5 trunk.\n\n1488\n01:19:42,330 --> 01:19:48,850\nWhen I look at it, look at the VLANs that\nare active, 1, 10, 20, 30, 40, 50, 70.\n\n1489\n01:19:48,850 --> 01:19:50,790\n60 is not on the list.\n\n1490\n01:19:50,790 --> 01:19:53,130\nAgain, we don't have\nthat same communication.\n\n1491\n01:19:53,130 --> 01:19:54,850\nSo when you do router on a stick,\n\n1492\n01:19:54,850 --> 01:19:57,990\nyou literally have to\nmanually assign everything.\n\n1493\n01:19:57,990 --> 01:19:59,280\nSo I created VLAN 60.\n\n1494\n01:19:59,280 --> 01:20:05,128\nI need to go in here and say,\nVLAN 60 exists and give it a name.\n\n1495\n01:20:05,128 --> 01:20:08,216\nThis will be my research VLAN.\n\n1496\n01:20:08,216 --> 01:20:11,101\nAnd now I've created VLAN 60.\n\n1497\n01:20:11,101 --> 01:20:15,113\nSo when I go and look at that interface,\nnow VLAN 60 is on there and\n\n1498\n01:20:15,113 --> 01:20:19,100\nit's connected to that sub\ninterface on the router.\n\n1499\n01:20:19,100 --> 01:20:22,770\nSo you can see why this\nis in the switch section.\n\n1500\n01:20:22,770 --> 01:20:25,480\nOn the router you just create your\nsub interfaces and that's it, but\n\n1501\n01:20:25,480 --> 01:20:27,780\non the switch, you've really\ngotta manually assign everything.\n\n1502\n01:20:27,780 --> 01:20:31,010\nYou gotta manually create your VLANs,\nyou've got to assign your interface to\n\n1503\n01:20:31,010 --> 01:20:35,560\nbe a trunk, and you've got to\nmanually define it's settings there.\n\n1504\n01:20:35,560 --> 01:20:36,770\nWhen things go wrong,\n\n1505\n01:20:36,770 --> 01:20:39,320\nthis is another one where you\ndon't really have a ton of debugs.\n\n1506\n01:20:39,320 --> 01:20:42,850\nYou can ping the various VLANs,\nsee which you can pass through, and\n\n1507\n01:20:42,850 --> 01:20:46,150\nif there's one you can't get to, that's\nwhere you start to narrow it down and\n\n1508\n01:20:46,150 --> 01:20:47,820\nlook for that configuration mismatch.\n\n1509\n01:20:48,900 --> 01:20:52,480\n>> So in the router and\non the switch configuration,\n\n1510\n01:20:52,480 --> 01:20:56,030\nonce again showing those commands\nthat we just showed you, right?\n\n1511\n01:20:56,030 --> 01:20:59,750\nKnowing what information is missing\nis gonna be helpful to you.\n\n1512\n01:20:59,750 --> 01:21:03,080\nIf you have vlan 60 on the router,\nnothing on the switch\n\n1513\n01:21:03,080 --> 01:21:06,400\nyou are not gonna be able to route\nbetween VLAN 60 no matter what you do.\n\n1514\n01:21:06,400 --> 01:21:10,249\nSo, you have to know what actually should\nbe there before the devices will function.\n\n1515\n01:21:11,250 --> 01:21:12,220\n>> Yep.\n\n1516\n01:21:12,220 --> 01:21:17,350\nNow another thing I wanna point out is\nwe're not doing Layer 3 switching here,\n\n1517\n01:21:17,350 --> 01:21:19,960\nso our switches are not routers.\n\n1518\n01:21:19,960 --> 01:21:22,720\nThat router that we've got, router one,\nis actually doing the routing.\n\n1519\n01:21:22,720 --> 01:21:27,260\nSo on my switches,\njust because those VLANs exist,\n\n1520\n01:21:27,260 --> 01:21:30,630\ndoesn't mean that I need\na virtual interface on them.\n\n1521\n01:21:30,630 --> 01:21:35,700\nIf I do a show IP interface brief,\nsee how I've got a Vlan1 interface?\n\n1522\n01:21:35,700 --> 01:21:36,960\nAnd I'm using that for management,\n\n1523\n01:21:36,960 --> 01:21:40,440\nthat's why I'm SSH'ing into\nthis particular switch.\n\n1524\n01:21:40,440 --> 01:21:43,773\nI don't have an interface on VLAN 10,\n20, 30, 40, 50, 60.\n\n1525\n01:21:43,773 --> 01:21:45,630\nAnd that's because I don't need them.\n\n1526\n01:21:45,630 --> 01:21:50,220\nA switch doesn't need an interface\non every VLAN, unless it's gonna\n\n1527\n01:21:50,220 --> 01:21:54,934\nparticipate in that VLAN, unless you\nwant to be able to tell from that VLAN.\n\n1528\n01:21:54,934 --> 01:21:59,040\nThe exception would be if I was\ndoing layer three switching,\n\n1529\n01:21:59,040 --> 01:22:03,360\nif I wanted to switch to be a router,\nin that case,\n\n1530\n01:22:03,360 --> 01:22:07,200\nI would need an interface on every\nVLAN to perform that routing function.\n\n1531\n01:22:07,200 --> 01:22:09,570\nBut in this case,\nthe router on a stick is handling it.\n\n1532\n01:22:09,570 --> 01:22:11,040\nWe just need to layer two functionalities.\n\n1533\n01:22:11,040 --> 01:22:12,572\n>> That's it.\n\n1534\n01:22:12,572 --> 01:22:16,131\n>> All right, so that's kind of\nthe basics of what we want to look for\n\n1535\n01:22:16,131 --> 01:22:17,310\non router on a stick.\n\n1536\n01:22:17,310 --> 01:22:19,360\nAm I leaving something out Ronnie I\nfeel like I'm forgetting something.\n\n1537\n01:22:19,360 --> 01:22:23,340\n>> I think the only thing we have let is\ntalk about the native VLAN unless we-\n\n1538\n01:22:23,340 --> 01:22:24,550\n>> Oh yeah, so the native VLAN,\n\n1539\n01:22:24,550 --> 01:22:26,530\nI've mentioned that that can be a problem.\n\n1540\n01:22:26,530 --> 01:22:31,490\nOn every Cisco switch that you buy,\nVLAN 1 is the native VLAN,\n\n1541\n01:22:31,490 --> 01:22:33,560\nright makes it kind of easy, all right?\n\n1542\n01:22:33,560 --> 01:22:36,920\nBut, it can be changed, and\nthere is plenty of companies that do.\n\n1543\n01:22:36,920 --> 01:22:40,250\nMost people know that VLAN 1 is\nthe default, and it's the management VLAN.\n\n1544\n01:22:40,250 --> 01:22:42,210\nSo if somebody tries to hack your network,\n\n1545\n01:22:42,210 --> 01:22:44,980\nthey're normally trying\nto get on VLAN one.\n\n1546\n01:22:44,980 --> 01:22:49,010\nWell, the thing is, if an attacker can\ndo that, if they can get onto VLAN 1,\n\n1547\n01:22:49,010 --> 01:22:50,405\nthey can get at your management interface.\n\n1548\n01:22:50,405 --> 01:22:51,120\n>> Mm-hm.\n\n1549\n01:22:51,120 --> 01:22:54,190\n>> So a lot of people will\nset a different native VLAN.\n\n1550\n01:22:54,190 --> 01:22:55,890\nVLAN 1 will still be\ntheir management VLAN,\n\n1551\n01:22:55,890 --> 01:22:59,080\nbut they'll set a native\nVLAN of something empty.\n\n1552\n01:22:59,080 --> 01:23:02,330\nSo, if a hacker manages to jump\nacross to the native VLAN like\n\n1553\n01:23:02,330 --> 01:23:04,800\nstripping off their VLAN tags or whatever.\n\n1554\n01:23:04,800 --> 01:23:06,700\nDouble tagging is the normal\nway of hooking on to it.\n\n1555\n01:23:06,700 --> 01:23:08,940\nIf they manage to pull that off,\n\n1556\n01:23:08,940 --> 01:23:12,260\nthen they end up on this empty\nVLAN that has got nothing.\n\n1557\n01:23:12,260 --> 01:23:13,600\nI usually set it to 999.\n\n1558\n01:23:13,600 --> 01:23:19,190\nAll right, so I create VLAN 999 and\nI set that to my, you know, whatever.\n\n1559\n01:23:19,190 --> 01:23:21,110\nI usually call it the black hole.\n\n1560\n01:23:21,110 --> 01:23:22,220\nSo I'll do that here.\n\n1561\n01:23:22,220 --> 01:23:25,580\nI'll create VLAN 999 and\nI'll give it a name.\n\n1562\n01:23:25,580 --> 01:23:26,695\nBlack Hole.\n\n1563\n01:23:26,695 --> 01:23:30,480\n>> [LAUGH]\n>> All right.\n\n1564\n01:23:30,480 --> 01:23:34,030\nSo, now when I do a, show vlan,\nI've got my normal ones and\n\n1565\n01:23:34,030 --> 01:23:38,560\nthen I've got this VLAN 999 black hole,\nand I don't normally assign ports to it.\n\n1566\n01:23:38,560 --> 01:23:40,380\nI want it to be empty.\n\n1567\n01:23:40,380 --> 01:23:41,130\nRight?\n\n1568\n01:23:41,130 --> 01:23:46,570\nBut I can get in to an interface,\nactually you know what, we've got\n\n1569\n01:23:49,178 --> 01:23:52,830\nLike our,\nwell I don't wanna do the port channel.\n\n1570\n01:23:52,830 --> 01:23:56,110\nWe've got the ether channel we\ncreated in the last segment.\n\n1571\n01:23:56,110 --> 01:23:58,590\nBut I'll just do fa0/5.\n\n1572\n01:23:58,590 --> 01:24:01,210\nAnd here I'll go ahead and say.\n\n1573\n01:24:01,210 --> 01:24:07,780\nYou've got the switch port trunk,\nnative VLAN.\n\n1574\n01:24:07,780 --> 01:24:08,910\nThere it is.\n\n1575\n01:24:08,910 --> 01:24:13,370\nSo switchport trunk native VLAN, and we\ncan designate something other than VLAN 1.\n\n1576\n01:24:13,370 --> 01:24:17,540\nNow, if we do designate VLAN 1,\nthat's the default.\n\n1577\n01:24:17,540 --> 01:24:21,380\nSo when you look at the interface,\nit doesn't make it into config.\n\n1578\n01:24:21,380 --> 01:24:26,570\nBut, if we set it to 999,\n\n1579\n01:24:26,570 --> 01:24:31,410\nnow any untagged traffic on this\ninterface will be put on VLAN 999.\n\n1580\n01:24:31,410 --> 01:24:33,920\nNow when I run this,\n\n1581\n01:24:33,920 --> 01:24:37,280\nI'm gonna get disconnected because\nI'm SSHD into this switch.\n\n1582\n01:24:37,280 --> 01:24:44,050\nI'm passing over this link, so I'm gonna\nget disconnected, but I'll get over that.\n\n1583\n01:24:44,050 --> 01:24:48,950\nSo, I'll go and run that, and so that now\nthat interface has moved over to VLAN 999.\n\n1584\n01:24:48,950 --> 01:24:50,730\nLet's see if I stayed\nconnected to the router.\n\n1585\n01:24:50,730 --> 01:24:52,190\nNope, I lost that one, too.\n\n1586\n01:24:52,190 --> 01:24:54,670\nAll right, let me jump on to\nthe console of that router real quick.\n\n1587\n01:24:59,500 --> 01:25:03,963\nSo, what I need to do now is\nthe router needs to know that, hey,\n\n1588\n01:25:03,963 --> 01:25:07,270\nVLAN 1,\nis no longer just by itself, right?\n\n1589\n01:25:07,270 --> 01:25:11,400\nSo, on the router here,\n\n1590\n01:25:12,800 --> 01:25:18,200\nnow I'm consoled in,\nif I do a show run of GI01,\n\n1591\n01:25:18,200 --> 01:25:23,520\nthis IP address and all that stuff,\nthat used to be the native VLAN.\n\n1592\n01:25:23,520 --> 01:25:26,030\nRight?\nThe untagged one, but it isn't anymore.\n\n1593\n01:25:26,030 --> 01:25:30,390\nSo I need to get into, well,\nI need to get into config, I guess.\n\n1594\n01:25:33,049 --> 01:25:36,220\nAnd I just need to remove that IP address,\nall right?\n\n1595\n01:25:36,220 --> 01:25:38,360\nThe native VLAN is a black hole.\n\n1596\n01:25:38,360 --> 01:25:40,400\nI don't want that traffic to go anywhere.\n\n1597\n01:25:40,400 --> 01:25:44,310\nSo I'm just gonna strip that out, and,\nin fact, I'll do a no P net inside.\n\n1598\n01:25:44,310 --> 01:25:46,080\nSo I don't have to worry about NAT stuff.\n\n1599\n01:25:46,080 --> 01:25:49,490\nSo, basically, this is just\ngonna be a dead end interface.\n\n1600\n01:25:50,630 --> 01:26:00,340\nAnd now I'm gonna create a sub\ninterface that is tagged for VLAN1.\n\n1601\n01:26:00,340 --> 01:26:03,720\nAnd I'll move that IP address over here.\n\n1602\n01:26:09,736 --> 01:26:12,190\nAll right, so there's that config.\n\n1603\n01:26:12,190 --> 01:26:17,317\nAnd let's take a look at how that looks.\n\n1604\n01:26:17,317 --> 01:26:20,699\nAll right, so the parent interface,\nthat native VLAN,\n\n1605\n01:26:20,699 --> 01:26:23,480\nwhich is VLAN 999 now, is just a dead end.\n\n1606\n01:26:23,480 --> 01:26:25,070\nThere's no IP address.\n\n1607\n01:26:25,070 --> 01:26:27,790\nA hacker on that network\ncan't get to the router here.\n\n1608\n01:26:27,790 --> 01:26:28,550\nAll right?\n\n1609\n01:26:28,550 --> 01:26:31,160\nBut VLAN 1, I had to tag it.\n\n1610\n01:26:31,160 --> 01:26:32,880\nAnd look what it did.\n\n1611\n01:26:32,880 --> 01:26:37,900\nThe default is, when it sees that VLAN 1,\nit wants to flag it as native.\n\n1612\n01:26:37,900 --> 01:26:40,070\n>> Yeah.\n>> As untagged.\n\n1613\n01:26:40,070 --> 01:26:42,710\nBut that's not the case anymore, right?\n\n1614\n01:26:42,710 --> 01:26:44,660\nIt's no longer native, so\n\n1615\n01:26:44,660 --> 01:26:48,020\nI am gonna have to designate\nthat it is not the native one.\n\n1616\n01:26:48,020 --> 01:26:48,960\nAnd the way that I am gonna do that,\n\n1617\n01:26:48,960 --> 01:26:51,040\nis that I am gona have to\ncreate a sub interface.\n\n1618\n01:26:51,040 --> 01:26:53,397\nI didn't realize that this is one of\nthe routers that defaulted to [INAUDIBLE].\n\n1619\n01:26:53,397 --> 01:26:56,474\nSo we can fix that.\n\n1620\n01:26:56,474 --> 01:27:02,134\nSo what I am gonna do is I\nam gonna get into 0/1.999\n\n1621\n01:27:06,190 --> 01:27:09,828\nAnd I'll flag that one as native,\n\n1622\n01:27:09,828 --> 01:27:14,560\nwhich should update that one for me there.\n\n1623\n01:27:14,560 --> 01:27:17,070\nSo now it doesn't show as native anymore,\nall right?\n\n1624\n01:27:17,070 --> 01:27:20,920\nSo now I've got a subinterface for\neach of those.\n\n1625\n01:27:23,762 --> 01:27:25,640\nAnd let's just go back and look at it.\n\n1626\n01:27:25,640 --> 01:27:28,950\nSo my parent interface has no tags, right?\n\n1627\n01:27:28,950 --> 01:27:32,730\nAnd it's never gonna get used now,\ncuz I flagged the subinterface as native.\n\n1628\n01:27:32,730 --> 01:27:36,550\nHere's VLAN 1, and\nit's got its right IP address, it's happy.\n\n1629\n01:27:36,550 --> 01:27:39,360\nHere's VLAN's 10, 20, 30, and so on.\n\n1630\n01:27:39,360 --> 01:27:41,630\nAnd then here's VLAN 999.\n\n1631\n01:27:41,630 --> 01:27:43,540\nIt's flagged as native.\n\n1632\n01:27:43,540 --> 01:27:46,870\nSo a hacker that's jumping\nover to my native VLAN,\n\n1633\n01:27:46,870 --> 01:27:49,920\nsending untagged traffic,\nwill go to this subinterface.\n\n1634\n01:27:49,920 --> 01:27:52,850\nIt has no IP address,\nit's not gonna function, and\n\n1635\n01:27:52,850 --> 01:27:54,070\nthe hacker's not gonna\nbe able to get through.\n\n1636\n01:27:56,460 --> 01:27:59,653\nAll right.\nMeanwhile my switches, well they've got\n\n1637\n01:27:59,653 --> 01:28:04,421\ninterfaces on VLAN 1, but,\nwe know that VLAN 1 is not native anymore.\n\n1638\n01:28:04,421 --> 01:28:06,422\nI should be able to reconnect\nto my switches now.\n\n1639\n01:28:06,422 --> 01:28:07,383\nLet's.\n\n1640\n01:28:07,383 --> 01:28:10,600\nLet's go see if I can\nreconnect to that switch.\n\n1641\n01:28:10,600 --> 01:28:13,160\nNow that I've fixed the router,\nwe should be good here.\n\n1642\n01:28:13,160 --> 01:28:15,130\nWhere's the restart?\n\n1643\n01:28:15,130 --> 01:28:18,750\nHas this session not died yet?\n\n1644\n01:28:20,350 --> 01:28:21,800\nOh, it reconnected already, look at that.\n\n1645\n01:28:21,800 --> 01:28:22,400\n>> Nice.\n\n1646\n01:28:22,400 --> 01:28:23,220\n>> Go PuTTY.\n>> [LAUGH]\n\n1647\n01:28:23,220 --> 01:28:24,710\n>> So it had disconnected,\n\n1648\n01:28:24,710 --> 01:28:25,880\nnow it's reconnected for me already,\n\n1649\n01:28:25,880 --> 01:28:27,730\nI was wondering why I couldn't\nsee the reconnect option.\n\n1650\n01:28:27,730 --> 01:28:30,080\n>> Yeah.\n>> So I'm in here again, and\n\n1651\n01:28:30,080 --> 01:28:33,990\nthis is not a console,\nI'm actually SSHed to its IP and\n\n1652\n01:28:33,990 --> 01:28:39,530\nit's happy because on Fa0/5, it knows\nthat VLAN one is no longer native.\n\n1653\n01:28:39,530 --> 01:28:43,310\nIt's tagging VLAN one and\nthe router is matching it up.\n\n1654\n01:28:43,310 --> 01:28:45,100\nSo just be aware of that.\n\n1655\n01:28:45,100 --> 01:28:47,770\nIf the native VLAN has been\nchanged on the switch,\n\n1656\n01:28:47,770 --> 01:28:53,330\nwe gotta change it on the router also,\nall right.\n\n1657\n01:28:53,330 --> 01:28:55,070\nSo definitely something we wanna look for\nand\n\n1658\n01:28:55,070 --> 01:28:57,940\none of the big problems that can\ncome up with router on a stick.\n\n1659\n01:28:59,600 --> 01:29:02,780\nAll right, well, Ronnie that's\nreally about it as far as I know.\n\n1660\n01:29:02,780 --> 01:29:06,120\nCan you think of any other troubleshooting\ntopics that we haven't addressed?\n\n1661\n01:29:06,120 --> 01:29:08,080\n>> Nope.\nI think we've covered all the ones in our\n\n1662\n01:29:08,080 --> 01:29:12,000\nthree show so far and remember that,\njust about every episode that we've done,\n\n1663\n01:29:12,000 --> 01:29:15,570\nwe've probably already done some just ad\nhoc troubleshooting along the way and\n\n1664\n01:29:15,570 --> 01:29:18,540\nthose things will help\nyou as you go through.\n\n1665\n01:29:18,540 --> 01:29:20,170\nMake sure you pay attention to that and\n\n1666\n01:29:20,170 --> 01:29:22,382\neven on top of this stuff\nwith the configuration.\n\n1667\n01:29:22,382 --> 01:29:27,420\nYou're gonna also need to expect that\nyou'll be troubleshooting just things like\n\n1668\n01:29:27,420 --> 01:29:28,970\nsubnetting, okay?\n\n1669\n01:29:28,970 --> 01:29:32,108\nJust those types of various\nquestions that you'll get,\n\n1670\n01:29:32,108 --> 01:29:36,420\nthat is not configuration based,\nbut logically based, for us,\n\n1671\n01:29:36,420 --> 01:29:39,250\nensuring that we have the devices\nwhere we need them to be.\n\n1672\n01:29:39,250 --> 01:29:41,300\nSo that is a big part of the CCNA exam and\n\n1673\n01:29:41,300 --> 01:29:43,070\nsomething you want to make\nsure you pay attention to.\n\n1674\n01:29:44,480 --> 01:29:46,450\n>> All right, so\nthat's about all we've got.\n\n1675\n01:29:46,450 --> 01:29:51,210\nI think this was the last episode to\nmake this objective complete, right?\n\n1676\n01:29:51,210 --> 01:29:53,370\n>> The last episode to make\nthis objective complete,\n\n1677\n01:29:53,370 --> 01:29:58,530\nas well as,\nthe last episode to make our CCNA.\n\n1678\n01:29:59,690 --> 01:30:01,640\n>> Yeah, so we've knocked it out.\n\n1679\n01:30:01,640 --> 01:30:05,190\nSo a little out of order in that,\nwe had already done objective five.\n\n1680\n01:30:05,190 --> 01:30:09,350\nAt this point we've wrapped up all\nthe CCNA objectives, if you're watching\n\n1681\n01:30:09,350 --> 01:30:12,230\nthe show in chronological order,\nthis is the last one you've watched.\n\n1682\n01:30:12,230 --> 01:30:14,250\nIf you're watching these recorded,\n\n1683\n01:30:14,250 --> 01:30:17,850\nthen you still have the WAN\ntechnologies to get to.\n\n1684\n01:30:17,850 --> 01:30:19,220\nBut keep in mind,\n\n1685\n01:30:19,220 --> 01:30:23,010\nthat just cuz the show has ended, doesn't\nmean you can't ask questions, right?\n\n1686\n01:30:23,010 --> 01:30:26,410\nYou can always go to, well,\nanywhere on the ITProTV website.\n\n1687\n01:30:26,410 --> 01:30:28,350\nThere's a Q&A link at\nthe top of the screen.\n\n1688\n01:30:28,350 --> 01:30:29,910\nYou can post your questions there.\n\n1689\n01:30:29,910 --> 01:30:33,170\nIf it's a good question, well,\nevery question is a good question.\n\n1690\n01:30:33,170 --> 01:30:34,260\nWe're gonna answer it.\n\n1691\n01:30:34,260 --> 01:30:38,250\nBut if it's a really good questions,\nwe'll add another episode and go in and\n\n1692\n01:30:38,250 --> 01:30:38,940\nrecord that.\n\n1693\n01:30:38,940 --> 01:30:39,870\nSo it's not over.\n\n1694\n01:30:39,870 --> 01:30:41,560\nThere's always new stuff, but\n\n1695\n01:30:41,560 --> 01:30:44,660\nwe have at this point recorded\nall the objective content.\n\n1696\n01:30:44,660 --> 01:30:48,260\nSo everything you should expect to see\non the exam has been done in a show,\n\n1697\n01:30:48,260 --> 01:30:49,250\nwhich is a pretty cool thing.\n\n1698\n01:30:50,740 --> 01:30:54,510\nAll right, well, on that note,\nI think we'll go ahead and wrap it up, so\n\n1699\n01:30:54,510 --> 01:30:56,990\nsigning off for ITProTV, I'm Don Pezet.\n\n1700\n01:30:56,990 --> 01:30:58,120\n>> And I'm Ronnie Wong.\n\n1701\n01:30:58,120 --> 01:30:59,701\n>> And we'll see you next time.\n\n1702\n01:30:59,701 --> 01:31:09,701\n[MUSIC]\n\n1703\n01:31:11,617 --> 01:31:18,030\n[MUSIC]\n\n",
          "vimeoId": "84235299"
        },
        {
          "description": "In this episode Ronnie and Don explore and troubleshoot the EIGRP dynamic routing protocol. They demonstrate basic configuration and show how to troubleshoot EIGRP.",
          "length": "4742",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/007-EIGRP-Troubleshooting.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/007-EIGRP-Troubleshooting-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/007-EIGRP-Troubleshooting-sm.jpg",
          "title": "EIGRP Troubleshooting",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:29,886 --> 00:00:31,928\nAll right, good morning, good afternoon,\ngood evening and welcome back.\n\n3\n00:00:31,928 --> 00:00:35,460\nTo another episode of\nITProtv I'm your host Don Pezet.\n\n4\n00:00:35,460 --> 00:00:36,900\nToday with Mr. Ronnie Wong.\n\n5\n00:00:36,900 --> 00:00:38,331\nHow is it going Ronnie?\n>> It is going well.\n\n6\n00:00:38,331 --> 00:00:42,686\nI have just figured out that I can write\na children's book if Keith Richards can.\n\n7\n00:00:42,686 --> 00:00:44,659\n>> Keith Richards wrote a child book.\n\n8\n00:00:44,659 --> 00:00:45,194\n>> He did.\n\n9\n00:00:45,194 --> 00:00:48,212\n>> [LAUGH] I can only\nimage what is inside.\n\n10\n00:00:48,212 --> 00:00:50,163\n>> [LAUGH] I guess if he\ncan do it I can do it.\n\n11\n00:00:50,163 --> 00:00:53,980\n>> It's such a small jump\n>> Between like a children's book and\n\n12\n00:00:53,980 --> 00:00:56,583\nlsd induced vision so it's a.\n\n13\n00:00:56,583 --> 00:00:57,714\nAll right well.\n\n14\n00:00:57,714 --> 00:00:59,220\n>> I'm kinda shocked.\n\n15\n00:00:59,220 --> 00:01:02,710\n>> Well, we're doing something\ninteresting today something different.\n\n16\n00:01:02,710 --> 00:01:04,828\nWe're doing our intro today like normal.\n\n17\n00:01:04,828 --> 00:01:09,630\nBut we're intro-ing an episode that is\nalready taped, which is bizarre and weird,\n\n18\n00:01:09,630 --> 00:01:11,030\nin a kind of twilight zone sense.\n\n19\n00:01:11,030 --> 00:01:11,530\n>> That's right.\n\n20\n00:01:12,940 --> 00:01:15,620\n>> We filmed an episode for EIGRP,\n\n21\n00:01:15,620 --> 00:01:19,640\nEnhanced Interior Gateway Riding Protocol,\nquite a while ago, a month or\n\n22\n00:01:19,640 --> 00:01:23,920\ntwo ago, something like that,\nand during the episode.\n\n23\n00:01:23,920 --> 00:01:25,990\n>> We were demonstrating some\ntroubleshooting techniques,\n\n24\n00:01:25,990 --> 00:01:28,490\nand things got pretty\nadvanced pretty fast.\n\n25\n00:01:28,490 --> 00:01:31,767\nAnd so we got some feedback from\nthe viewers that boy, if this is the first\n\n26\n00:01:31,767 --> 00:01:35,235\ntime you're learning EIGRP, it just\n[NOISE] right over your head real fast.\n\n27\n00:01:35,235 --> 00:01:40,569\nSo, we reshoot the EIGRP episode and\ndid it on a more.\n\n28\n00:01:40,569 --> 00:01:43,390\nSimple level is easier to understand for\nfirst time learners.\n\n29\n00:01:43,390 --> 00:01:46,885\nBut, man there was some\ngood troubleshooting.\n\n30\n00:01:46,885 --> 00:01:49,288\nYou remember,\nwith the frame relay node within the nuts?\n\n31\n00:01:49,288 --> 00:01:49,915\n>> Yeah.\n\n32\n00:01:49,915 --> 00:01:51,691\n>> And see, now I'm predicting the future.\n\n33\n00:01:51,691 --> 00:01:53,073\n>> That's right.\n>> You guys have seen us since.\n\n34\n00:01:53,073 --> 00:01:55,165\n>> So, there was such good\ntrouble shooting in there,\n\n35\n00:01:55,165 --> 00:01:57,728\nthat we wanted to make sure that\nyou guys got a chance to see that,\n\n36\n00:01:57,728 --> 00:01:59,503\nbecause it's skills you need for the exam.\n\n37\n00:01:59,503 --> 00:02:04,610\nSo, we preserved the old episode\nin what you're about to see.\n\n38\n00:02:04,610 --> 00:02:08,380\nIt'll show you some of the problems\nyou bump into with EIGRP,\n\n39\n00:02:08,380 --> 00:02:11,800\nhow you troubleshoot it,\nisolate it, fix it and so on.\n\n40\n00:02:11,800 --> 00:02:15,760\nSo, if you haven't already\nwatched the other EIGRP episode.\n\n41\n00:02:15,760 --> 00:02:17,410\nThe one that's a little more normal.\n\n42\n00:02:17,410 --> 00:02:20,179\nYou should watch that one first and\nthen when you're ready to get in to\n\n43\n00:02:20,179 --> 00:02:22,737\nthe advanced stuff,\nthis is the place for you, this episode.\n\n44\n00:02:22,737 --> 00:02:25,674\n>> Right we had,\na really good time on that one.\n\n45\n00:02:25,674 --> 00:02:26,615\n>> Yeah, it was a lot of fun.\n\n46\n00:02:26,615 --> 00:02:29,411\nI kinda like it when we get stumped on\nthe shows, and have to figure things out.\n\n47\n00:02:29,411 --> 00:02:32,614\nAnd so this one,\nthere was like multiple different issues.\n\n48\n00:02:32,614 --> 00:02:34,408\n>> Yeah.\n>> All real word things that you have\n\n49\n00:02:34,408 --> 00:02:34,971\nto deal with.\n\n50\n00:02:34,971 --> 00:02:35,587\n>> Yeah.\n\n51\n00:02:35,587 --> 00:02:36,910\n>> So, definitely a cool one.\n\n52\n00:02:36,910 --> 00:02:40,413\nYou guys are gonna enjoy\nthat's probably about it, so\n\n53\n00:02:40,413 --> 00:02:44,080\nwithout any further ado,\nhere you go, advanced EIGRP.\n\n54\n00:02:45,350 --> 00:02:48,930\n>> We got three routers, router 1, router\n2, router 3, kind of linked together in\n\n55\n00:02:48,930 --> 00:02:53,990\na pyramid of power,\na $25,000 pyramid, and so we've go.\n\n56\n00:02:55,150 --> 00:03:01,692\n>> Basically, these guys are connected\nvia networks that are 172.16.1.0,\n\n57\n00:03:01,692 --> 00:03:05,680\n2.0, 3.0, basically taking what would\nnormally be a class b network and\n\n58\n00:03:05,680 --> 00:03:07,900\nbreaking it down to a class C.\n\n59\n00:03:07,900 --> 00:03:11,070\nWe've also got these individual networks.\n\n60\n00:03:11,070 --> 00:03:17,040\nRouter 1 is connected to 192.168.1.0,\nrouter 3 is connected to 192.168.3.0 and\n\n61\n00:03:17,040 --> 00:03:22,260\nrouter 2 is connected to 2.0, so\nthey've got their own little networks.\n\n62\n00:03:22,260 --> 00:03:26,250\nNow, when these routers come up, their\nrouting table will automatically contain\n\n63\n00:03:26,250 --> 00:03:28,020\nthe networks that they're\ndirectly plugged into.\n\n64\n00:03:28,020 --> 00:03:31,170\nSo router 1,\nwill see this network up here.\n\n65\n00:03:31,170 --> 00:03:33,900\nAnd it'll see this network here and\nthis network here.\n\n66\n00:03:33,900 --> 00:03:38,180\nIt will not see this network as\nwell as this other network and\n\n67\n00:03:38,180 --> 00:03:39,220\nas well as this third network, right.\n\n68\n00:03:39,220 --> 00:03:41,285\nThese three.\nThey're not directly plugged in to router\n\n69\n00:03:41,285 --> 00:03:42,220\n1, so it's not gonna see them.\n\n70\n00:03:43,580 --> 00:03:47,700\nSo, we need the routers to talk to each\nother to learn about these networks.\n\n71\n00:03:47,700 --> 00:03:52,140\nAnd we already know we could use OSPF for\nthat, but we can use EIGRP also.\n\n72\n00:03:52,140 --> 00:03:54,640\n>> Yeah, the strange thing\nabout the configuration for\n\n73\n00:03:54,640 --> 00:03:57,520\nEIGRP is it's incredibly simple.\n\n74\n00:03:57,520 --> 00:04:02,395\nSo simple, it's amazing that you can\nget it wrong almost at times here.\n\n75\n00:04:02,395 --> 00:04:05,290\n>> [LAUGH]\n>> When you do it, so you actually see and\n\n76\n00:04:05,290 --> 00:04:09,610\nthat's one thing you do have to be careful\nof, sometimes you're not paying attention.\n\n77\n00:04:09,610 --> 00:04:13,800\nAnd unlike things like OSPF in\nwhich the area number is the key,\n\n78\n00:04:13,800 --> 00:04:14,910\nyou're gonna see an EIGRP.\n\n79\n00:04:14,910 --> 00:04:19,200\nWe're gonna use something else that we\ncall the autonomous system number instead.\n\n80\n00:04:19,200 --> 00:04:22,040\nAnd that one is a key number for us.\n\n81\n00:04:22,040 --> 00:04:24,580\n>> Now remember in OSPF we have areas,\nright?\n\n82\n00:04:24,580 --> 00:04:27,520\nAnd you have that area 0\nthat's the backbone area,\n\n83\n00:04:27,520 --> 00:04:30,290\nand then after that you can\ncreate as many areas as you want.\n\n84\n00:04:30,290 --> 00:04:34,770\nIn EIGRP, we don't need areas because\nyou can summarize wherever so\n\n85\n00:04:34,770 --> 00:04:37,410\ncontrolling the network is\na lot more granular, but\n\n86\n00:04:37,410 --> 00:04:40,630\nyou still need some kind of number\nto identify your organization.\n\n87\n00:04:40,630 --> 00:04:43,850\nIn EIGRP, we have what's called\nan autonomous system number,\n\n88\n00:04:43,850 --> 00:04:47,560\nan AS number, and\nyou can pick whatever AS number you want.\n\n89\n00:04:47,560 --> 00:04:50,590\nThe maximum is something like\n4 billion and something, so\n\n90\n00:04:50,590 --> 00:04:53,670\nyou pick a number from 1\nall of the way up to that.\n\n91\n00:04:53,670 --> 00:04:58,010\nAnd the only thing you need to remember,\nis to use the same AS number on all of\n\n92\n00:04:58,010 --> 00:05:00,910\nyour routers, if you expect them\nto talk to each other and learn.\n\n93\n00:05:00,910 --> 00:05:04,880\nIf the AS numbers don't match,\nthen they're not gonna learn.\n\n94\n00:05:04,880 --> 00:05:08,530\nSo we'll just go with AS number 1,\nbecause it's easy to remember.\n\n95\n00:05:08,530 --> 00:05:11,100\nAnd so, we'll use that as our\nautonomous system number and\n\n96\n00:05:11,100 --> 00:05:14,350\nwe'll get EIGRP running\nbetween these routers.\n\n97\n00:05:14,350 --> 00:05:18,050\nNow just like OSPF we need to\nturn on the routing protocol, and\n\n98\n00:05:18,050 --> 00:05:22,530\nthen tell it what networks we want\nto advertise and operate on, okay.\n\n99\n00:05:22,530 --> 00:05:25,316\nSo, we're just gonna bounce through each\nof the three routers here and do that.\n\n100\n00:05:27,035 --> 00:05:28,520\nAll right.\n\n101\n00:05:28,520 --> 00:05:31,670\nSo, let me start over here on router 1.\n\n102\n00:05:31,670 --> 00:05:35,660\nAnd on router 1,\nactually let me start with a show IP.\n\n103\n00:05:35,660 --> 00:05:40,290\nProtocols just to see that we are not\ncurrently running any routing protocols.\n\n104\n00:05:40,290 --> 00:05:42,230\nSo, no dynamic routing\nprotocols listed here.\n\n105\n00:05:43,540 --> 00:05:46,360\nAll right, but I'll say router EIGRP.\n\n106\n00:05:47,450 --> 00:05:51,630\nHere's the tricky part to remember for\nthe exam, when you say router OSPF,\n\n107\n00:05:51,630 --> 00:05:54,700\nthe number you specify is a process ID.\n\n108\n00:05:54,700 --> 00:05:55,870\nRight and the process ID,\n\n109\n00:05:55,870 --> 00:05:58,520\ncan be done different on every\nsingle router if you want.\n\n110\n00:05:58,520 --> 00:06:03,270\nBut in EIGRP, you say router EIGRP,\nand then AS number,\n\n111\n00:06:03,270 --> 00:06:07,100\nan autonomous system number, and\nso you specify it and I was wrong.\n\n112\n00:06:07,100 --> 00:06:08,490\nThe maximum is 65,535.\n\n113\n00:06:08,490 --> 00:06:10,780\nApparently it's a 16 bit number.\n\n114\n00:06:10,780 --> 00:06:12,775\nSo wait, we've got a bit of a limit there.\n\n115\n00:06:12,775 --> 00:06:13,860\n>> [LAUGH]\n>> So,\n\n116\n00:06:13,860 --> 00:06:17,200\nwe'll specify a number between one and\n65,535.\n\n117\n00:06:17,200 --> 00:06:18,180\nWe'll do one.\n\n118\n00:06:20,600 --> 00:06:25,160\nNow, this next part is where, depending\non, again, if you actually look through\n\n119\n00:06:25,160 --> 00:06:29,290\nthe internet, you're gonna see\na couple of different configurations.\n\n120\n00:06:29,290 --> 00:06:33,870\nOne includes, of course, the network\nname and then the word network, and\n\n121\n00:06:33,870 --> 00:06:38,680\nthen whatever your number is gonna be for\nyou network ID number.\n\n122\n00:06:38,680 --> 00:06:41,480\nHere Don is actually putting in 1.0.\n\n123\n00:06:41,480 --> 00:06:47,616\nAnd this is where you can either put in\nthe wildcard mask, or you don't have to.\n\n124\n00:06:47,616 --> 00:06:49,464\n>> Yeah.\n>> That's where it get's tricky.\n\n125\n00:06:49,464 --> 00:06:51,930\n>> If you're following\nclassable boundaries.\n\n126\n00:06:51,930 --> 00:06:54,925\nI've got .192.168.1.0 setup and\nit is a /24.\n\n127\n00:06:54,925 --> 00:06:59,205\nI can see it up here in my routing table,\nit is /24.\n\n128\n00:06:59,205 --> 00:07:02,385\nSo, since I've followed the class,\nwent back and I can just press Enter.\n\n129\n00:07:02,385 --> 00:07:04,695\n>> Yep.\n>> And the EIGRP will say,\n\n130\n00:07:04,695 --> 00:07:08,405\nall right well following class rules\nthat should be a class C, right?\n\n131\n00:07:08,405 --> 00:07:12,195\nBut, some of my networks I\ndidn't follow the rules for.\n\n132\n00:07:12,195 --> 00:07:17,740\nLike here I've got 172.16.2.0/24 Well,\nthat should be a slash 16, right?\n\n133\n00:07:17,740 --> 00:07:18,260\n>> Right.\n\n134\n00:07:18,260 --> 00:07:20,090\n>> So, I didn't follow the rules.\n\n135\n00:07:20,090 --> 00:07:24,540\nAnd so, in that case,\nI can go a step further and I can say\n\n136\n00:07:27,460 --> 00:07:30,830\na wild card mask just like in OSPF.\n\n137\n00:07:30,830 --> 00:07:32,380\n>> All right.\n\n138\n00:07:32,380 --> 00:07:34,415\nNow notice when we specify these networks,\n\n139\n00:07:34,415 --> 00:07:39,790\nI'm not continuing on to specify\nan area number like we did in OSPF.\n\n140\n00:07:39,790 --> 00:07:42,670\nAnd that's because we\ndon't have areas in EIGRP,\n\n141\n00:07:42,670 --> 00:07:45,420\nit's just part of the autonomous\nsystem and that's it, all right.\n\n142\n00:07:45,420 --> 00:07:47,500\nThen I got one more network.\n\n143\n00:07:47,500 --> 00:07:50,901\nNow, I could have saved some time and\n\n144\n00:07:50,901 --> 00:07:56,511\nI could have just said network 172.000,\nlike that.\n\n145\n00:07:56,511 --> 00:08:02,814\nSaying, turn on EIGRP for any interface\nwhose ID starts with 172, all right.\n\n146\n00:08:02,814 --> 00:08:04,880\nAnd who cares what the other octets are?\n\n147\n00:08:04,880 --> 00:08:09,125\nSo, you can kind of shorten things down,\nuse wild cards like this, or whatever.\n\n148\n00:08:09,125 --> 00:08:12,770\nI generally like to be specific.\n\n149\n00:08:12,770 --> 00:08:16,210\nThat way I can turn these on and\noff later, individually.\n\n150\n00:08:16,210 --> 00:08:19,390\nAnd not get more that one interface,\nif I'm troubleshooting, or whatever.\n\n151\n00:08:19,390 --> 00:08:20,620\nSo I'm gonna list them out.\n\n152\n00:08:20,620 --> 00:08:24,140\nBut this first one is gonna\nget my internal network,\n\n153\n00:08:24,140 --> 00:08:27,255\nthat 192 network and then these two here.\n\n154\n00:08:27,255 --> 00:08:29,970\nOh, did I do the wrong IPs?\n\n155\n00:08:29,970 --> 00:08:30,660\nI did.\n\n156\n00:08:30,660 --> 00:08:32,885\nI meant to do .1 and .2.\n\n157\n00:08:32,885 --> 00:08:37,003\n[CROSSTALK] So I need to fix that.\n\n158\n00:08:37,003 --> 00:08:38,364\nI need to try and fix that.\n\n159\n00:08:38,364 --> 00:08:39,520\n>> [LAUGH]\n>> Here we go.\n\n160\n00:08:39,520 --> 00:08:40,720\nSo I need to add .1.\n\n161\n00:08:40,720 --> 00:08:46,240\nNow, if I stop right here, I'm telling\nit to advertise one, two and three.\n\n162\n00:08:46,240 --> 00:08:48,640\nIt's not actually gonna advertise\nthree because I don't have that.\n\n163\n00:08:48,640 --> 00:08:53,730\nSo I could just ignore it, but a better\nthing to do would be to jump in here and\n\n164\n00:08:53,730 --> 00:08:54,410\nclean that up.\n\n165\n00:08:54,410 --> 00:08:58,434\nSo I'm just gonna get that one outta\nthere so that it's nice and clean.\n\n166\n00:09:05,240 --> 00:09:05,901\nAll right.\n\n167\n00:09:05,901 --> 00:09:09,280\nAnd this little command that I just ran,\nI'm in config.\n\n168\n00:09:09,280 --> 00:09:12,740\nSo I'm using the do modifier to\nallow me to run a show command from\n\n169\n00:09:12,740 --> 00:09:14,040\ninside of config.\n\n170\n00:09:14,040 --> 00:09:19,450\nAnd I'm saying show running-config and\nI'm piping that into the section command.\n\n171\n00:09:19,450 --> 00:09:23,370\nI'm telling it to show me\nthe configuration section for EIGRP.\n\n172\n00:09:23,370 --> 00:09:25,830\nSo now I can see the command\nsections that we just put in.\n\n173\n00:09:25,830 --> 00:09:30,085\nI turn on EIGRP and it's advertising for\nthese three networks and\n\n174\n00:09:30,085 --> 00:09:31,755\nit's listening on those three networks.\n\n175\n00:09:31,755 --> 00:09:34,525\nSo I'm advertising out to other\nrouters and I'm listening for\n\n176\n00:09:34,525 --> 00:09:36,465\nother routers to talk to me.\n\n177\n00:09:36,465 --> 00:09:38,945\n>> So at this point before we go\nany further in our configuration.\n\n178\n00:09:38,945 --> 00:09:41,865\nLet's remember we need to\nensure that that autonomous\n\n179\n00:09:41,865 --> 00:09:43,855\nsystem number is gonna be the same for\n\n180\n00:09:43,855 --> 00:09:47,300\nall the routers that we're actually going\nto want to communicate with each other.\n\n181\n00:09:47,300 --> 00:09:51,070\nThe second thing that you may end up\nseeing here is that remember that the wild\n\n182\n00:09:51,070 --> 00:09:54,790\ncard mask but not a subnet mask,\n\n183\n00:09:54,790 --> 00:09:57,130\nwhich I can't remember what\nI was about to say there.\n\n184\n00:09:57,130 --> 00:09:59,780\nRemember that you actually have to\nconfigure it with a wild card mask.\n\n185\n00:09:59,780 --> 00:10:04,040\nIf you configure it with a subnet mask it\nmeans something totally different and so\n\n186\n00:10:04,040 --> 00:10:06,810\nmake sure you take a look\nat that configuration.\n\n187\n00:10:06,810 --> 00:10:10,050\nAnd so doing the show command here is\nsomething you want to do after you\n\n188\n00:10:10,050 --> 00:10:13,400\nactually initiate those configurations or\nyou may get it wrong.\n\n189\n00:10:13,400 --> 00:10:16,994\nSo remember mask autonomous system number.\n\n190\n00:10:16,994 --> 00:10:18,140\n>> Yep.\nAnd now i'll just jump over to\n\n191\n00:10:18,140 --> 00:10:19,647\nthe other routers to do the same thing.\n\n192\n00:10:19,647 --> 00:10:22,680\nI'm gonna do a show IP interface brief.\n\n193\n00:10:22,680 --> 00:10:26,880\nSo I can see what networks I need to\nturn on and not screw it up this time.\n\n194\n00:10:26,880 --> 00:10:31,088\nAnd then so i'll just say Router EIGRP1,\nsame autonomous system number,\n\n195\n00:10:31,088 --> 00:10:34,716\njust like Ronnie said, and\nI'll start to specify the networks.\n\n196\n00:10:43,634 --> 00:10:45,930\nAnd we'll get these advertised in here.\n\n197\n00:10:47,010 --> 00:10:49,400\n>> Oh look at that,\nit's already starting to work there.\n\n198\n00:10:49,400 --> 00:10:51,070\n>> Yep.\nI'm seeing router one.\n\n199\n00:10:51,070 --> 00:10:53,820\nSo router one and router two have\na connection between each other.\n\n200\n00:10:53,820 --> 00:10:57,310\nAnd so they're spotting each other and\nan adjacency is building up.\n\n201\n00:10:57,310 --> 00:11:00,030\nNow adjacency is\na slightly different term.\n\n202\n00:11:00,030 --> 00:11:01,860\nIn OSPF you have neighbors.\n\n203\n00:11:01,860 --> 00:11:03,500\nIn EIGRP you have neighbors.\n\n204\n00:11:03,500 --> 00:11:06,290\nBut when you build that\nconnection between neighbors.\n\n205\n00:11:06,290 --> 00:11:09,690\nIn EIGRP it's called an adjacency,\nso I've got that neighbor.\n\n206\n00:11:09,690 --> 00:11:14,360\nAnd you'll see right there, neighbor\nchange, NBR, so the terminology is there.\n\n207\n00:11:15,740 --> 00:11:17,730\nAnd then I've got one more router to do.\n\n208\n00:11:24,900 --> 00:11:26,500\nSo we'll just get this turned on here.\n\n209\n00:11:32,400 --> 00:11:33,480\nIf I can type.\n\n210\n00:11:33,480 --> 00:11:34,890\n>> [LAUGH]\n>> That's the real challenge on this\n\n211\n00:11:34,890 --> 00:11:35,860\nstuff, just typing.\n\n212\n00:11:38,720 --> 00:11:39,910\n>> Oh yeah.\n>> And there it goes.\n\n213\n00:11:41,620 --> 00:11:43,920\nAnd we should see two adjacencies here.\n\n214\n00:11:43,920 --> 00:11:46,040\nAnd the other ones are building\nup adjacencies also.\n\n215\n00:11:46,040 --> 00:11:49,200\nIf I jump back to router one I\nshould see that it's built up too.\n\n216\n00:11:49,200 --> 00:11:49,700\nThere they are.\n\n217\n00:11:50,980 --> 00:11:54,150\nSo now, we're up and we're running EIRGP.\n\n218\n00:11:54,150 --> 00:11:56,300\nNot a very hard configuration is it?\n\n219\n00:11:56,300 --> 00:11:57,010\n>> Yeah.\n\n220\n00:11:57,010 --> 00:11:59,880\n>> There's a lot more bells and whistles\nwe can tweak but as far as the basic\n\n221\n00:11:59,880 --> 00:12:03,359\nconfiguration, that's really all we need,\nlet's verify that it's working.\n\n222\n00:12:04,630 --> 00:12:08,412\nRemember from my topology,\nrouter one is plugged into three networks,\n\n223\n00:12:08,412 --> 00:12:12,515\n192.168.1.0 and\nthen 172.16.1 and 172.16.2.\n\n224\n00:12:12,515 --> 00:12:16,020\nSo those are the three\nnetworks it's plugged into.\n\n225\n00:12:16,020 --> 00:12:21,780\nThe other three networks, these guys down\nhere, it's not directly plugged into them.\n\n226\n00:12:21,780 --> 00:12:23,140\nSo it doesn't know about them.\n\n227\n00:12:23,140 --> 00:12:27,530\nIt has to learn them from the network and\nit should learn them via EIGRP.\n\n228\n00:12:27,530 --> 00:12:28,445\nLet's see if it did.\n\n229\n00:12:28,445 --> 00:12:35,435\nSo there's this little\nbug in that SS8 program.\n\n230\n00:12:35,435 --> 00:12:36,710\nThere we go.\n\n231\n00:12:36,710 --> 00:12:39,550\nRouter one, if I start on this one and\n\n232\n00:12:39,550 --> 00:12:45,530\nI'm just going to do a show IP protocols\nto make sure EIGRP is actually turned on.\n\n233\n00:12:45,530 --> 00:12:47,020\n>> Great command to remember for us here.\n\n234\n00:12:48,160 --> 00:12:50,150\n>> All right,\nI can see that I'm running EIGRP 1.\n\n235\n00:12:50,150 --> 00:12:53,340\nI'm up, I'm running, the router is happy.\n\n236\n00:12:53,340 --> 00:12:58,910\nHere's my K values, and see how K1 and\nK3 are one and the others are zeroes.\n\n237\n00:12:58,910 --> 00:13:01,860\nI can see some other\ninformation about EIGRP.\n\n238\n00:13:01,860 --> 00:13:05,560\nAnd as we scroll down, I can see that\ni'm routing for those three networks.\n\n239\n00:13:05,560 --> 00:13:08,150\nThose are the ones that we put\nin with the network command.\n\n240\n00:13:08,150 --> 00:13:10,360\nAnd then, i've got some neighbors.\n\n241\n00:13:10,360 --> 00:13:11,960\nI've found some other people, and\n\n242\n00:13:11,960 --> 00:13:15,430\ni've received updates from them within\nthe last minute and six seconds.\n\n243\n00:13:15,430 --> 00:13:16,080\nAll right.\n\n244\n00:13:16,080 --> 00:13:20,440\nI could also do a show IP EIGRP neighbor.\n\n245\n00:13:20,440 --> 00:13:24,000\nAnd then that one would\nshow me my neighbors also.\n\n246\n00:13:24,000 --> 00:13:26,260\nSo I can see there's\ntwo routers out there.\n\n247\n00:13:26,260 --> 00:13:30,260\nOne on my FA00 interface one\non my FA01 interface and\n\n248\n00:13:30,260 --> 00:13:31,750\nI've been getting updates from them.\n\n249\n00:13:33,540 --> 00:13:37,880\nAll right, but the real test,\nis our routing table.\n\n250\n00:13:37,880 --> 00:13:38,380\n>> Yep.\n\n251\n00:13:39,750 --> 00:13:44,080\n>> And\nwhat I should see are some new routes.\n\n252\n00:13:44,080 --> 00:13:51,200\nI've got 172.16.3.0 that I didn't have\nbefore as well as 192.168.2 and .3.\n\n253\n00:13:51,200 --> 00:13:54,010\nThose guys are showing up and\nI'm learning those via EIGRP.\n\n254\n00:13:54,010 --> 00:13:58,970\nAnd I know that because on the left side,\nthere's a D and that means EIGRP, right?\n\n255\n00:13:58,970 --> 00:14:00,775\n>> Yep, it means dual, yep.\n\n256\n00:14:00,775 --> 00:14:03,770\n>> Yeah,\nyou might ask yourself why not an E?\n\n257\n00:14:03,770 --> 00:14:05,340\nWell, E was already taken.\n\n258\n00:14:05,340 --> 00:14:09,990\nThere's a very old protocol called EGP,\nthe Exterior Gateway Protocol.\n\n259\n00:14:09,990 --> 00:14:12,400\nIt's somewhere in here.\n\n260\n00:14:12,400 --> 00:14:14,240\nIs it not in the legend anymore?\n\n261\n00:14:14,240 --> 00:14:16,060\n>> No,\napparently it's not in there anymore.\n\n262\n00:14:16,060 --> 00:14:17,925\n>> It's not even in the legend anymore,\nbut it exists.\n\n263\n00:14:17,925 --> 00:14:20,710\n[LAUGH] And it has E,\nso E is already taken.\n\n264\n00:14:20,710 --> 00:14:23,590\nNobody runs that protocol anymore,\nthey might as well get rid of it but\n\n265\n00:14:23,590 --> 00:14:24,470\nit does exist.\n\n266\n00:14:24,470 --> 00:14:26,345\nSo when, Cisco had to come up\nwith a letter for theirs, so\n\n267\n00:14:26,345 --> 00:14:30,475\nthey just did a D for the dual-algorithm,\njust like Ronnie said.\n\n268\n00:14:30,475 --> 00:14:35,355\nSo, there's some routes, I'm learning them\nvia EIGRP, and we should have a converged\n\n269\n00:14:35,355 --> 00:14:38,355\nnetwork by this point, all the routers\nshould know.about everybody else.\n\n270\n00:14:38,355 --> 00:14:40,455\nSo I should be able to ping\nout to those networks.\n\n271\n00:14:40,455 --> 00:14:41,665\nIf I ping out 192.168.2.2, that should be.\n\n272\n00:14:41,665 --> 00:14:47,655\nIs that router 2's IP over there,\nor is that 2.1?\n\n273\n00:14:47,655 --> 00:14:48,547\n>> Maybe 2.1.\n\n274\n00:14:48,547 --> 00:14:49,606\n>> All right, well shoot.\n\n275\n00:14:52,451 --> 00:14:53,147\nThere we go.\n\n276\n00:14:53,147 --> 00:14:56,046\n2.1 and\nI should be able to ping over to 3.1.\n\n277\n00:14:56,046 --> 00:14:57,150\nThere we go.\n\n278\n00:14:57,150 --> 00:14:59,660\nSo I'm able to ping across and off we go.\n\n279\n00:15:01,000 --> 00:15:04,715\nJust on a footnote, if you ever\nstart a ping to a bad IP like that.\n\n280\n00:15:04,715 --> 00:15:07,490\nYou can sit there and\nwait patiently for all five attempts.\n\n281\n00:15:07,490 --> 00:15:09,035\n>> [LAUGH]\n>> Or\n\n282\n00:15:09,035 --> 00:15:13,045\nyou can break out of it early using\na really weird keyboard shortcut.\n\n283\n00:15:13,045 --> 00:15:14,535\nLet me bring up Notepad.\n\n284\n00:15:14,535 --> 00:15:21,585\nSo, to break out of a bad command,\nof a bad relationship.\n\n285\n00:15:21,585 --> 00:15:22,905\n>> Yeah, bad relationship.\n\n286\n00:15:22,905 --> 00:15:25,241\n>> It's Ctrl Shift-6, okay.\n\n287\n00:15:25,241 --> 00:15:31,082\nCtrl-Shift-6, and\nwhat you're actually pressing control and\n\n288\n00:15:31,082 --> 00:15:34,780\nthen the, what's it called, the caret?\n\n289\n00:15:34,780 --> 00:15:35,350\n>> The caret.\n\n290\n00:15:35,350 --> 00:15:36,030\n>> The caret.\n\n291\n00:15:36,030 --> 00:15:38,690\nSo control and\nthe little up arrow caret thing.\n\n292\n00:15:38,690 --> 00:15:40,990\nShift 6 is what does on a US keyboard.\n\n293\n00:15:40,990 --> 00:15:43,790\nNow if you're on a French keyboard or\n\n294\n00:15:43,790 --> 00:15:46,120\nwhatever, then the keys\nare a little bit different.\n\n295\n00:15:46,120 --> 00:15:49,670\nBut that's basically what you're doing\nto break out of a bad command and\n\n296\n00:15:49,670 --> 00:15:50,360\nstop it from running.\n\n297\n00:15:51,600 --> 00:15:54,300\nReally useful when you have\nlike DNS lookups turned on.\n\n298\n00:15:54,300 --> 00:15:56,063\n>> That's the one that always gets me.\n\n299\n00:15:56,063 --> 00:16:00,164\nYeah, when you accidentally just\ntype in a word and the iOS says,\n\n300\n00:16:00,164 --> 00:16:03,308\nI don't know what it is so\nlet me try and look it up.\n\n301\n00:16:03,308 --> 00:16:07,108\nThat can actually lead you to much\nconsternation if you don't know how to\n\n302\n00:16:07,108 --> 00:16:08,175\nactually use that.\n\n303\n00:16:08,175 --> 00:16:09,975\n>> Ctrl+Shift+6.\n\n304\n00:16:09,975 --> 00:16:12,494\n>> All right, so\nlet's just double check our other routers.\n\n305\n00:16:12,494 --> 00:16:15,184\nOn these guys I'll just\ndo a show IP route and\n\n306\n00:16:15,184 --> 00:16:20,090\nverify that they're picking up\nthe 192.168.1, 2 and 3 networks.\n\n307\n00:16:20,090 --> 00:16:24,640\nThere they are and I can jump over to\nrouter three and do the same thing.\n\n308\n00:16:27,070 --> 00:16:30,800\nAnd it's got the one two and\nthree networks right there.\n\n309\n00:16:30,800 --> 00:16:32,320\nAll right so\nthings are looking pretty good.\n\n310\n00:16:32,320 --> 00:16:33,920\nWe've learned our routes.\n\n311\n00:16:33,920 --> 00:16:36,360\nEIGRP is up and it's happy right?\n\n312\n00:16:36,360 --> 00:16:37,660\nIt's happy and things are working.\n\n313\n00:16:39,100 --> 00:16:44,430\nIt does fail over very very quickly as\nopposed to some other protocols and\n\n314\n00:16:44,430 --> 00:16:48,490\nso if we were to lose a route it'll\nrecalculate and find a route really fast.\n\n315\n00:16:48,490 --> 00:16:50,450\nWe can even try that if we wanted.\n\n316\n00:16:50,450 --> 00:16:57,040\nSo for example on router one,\nif I look at the route to 192.168.3.0.\n\n317\n00:16:57,040 --> 00:17:03,520\nSee how it says that I can get there\nby going out my fa0/1 interface.\n\n318\n00:17:03,520 --> 00:17:05,150\nWell, what is fa0/1 goes down?\n\n319\n00:17:05,150 --> 00:17:05,710\nAll right.\n\n320\n00:17:05,710 --> 00:17:09,660\nSo I'm gonna do a shutdown.\n\n321\n00:17:09,660 --> 00:17:15,033\nAnd then, as quick as I can, I'm gonna\nrun a, let's see how quick I can do this.\n\n322\n00:17:24,741 --> 00:17:25,658\nThere.\nOkay.\n\n323\n00:17:25,658 --> 00:17:28,785\nSo there's my command that'll\njust show that one route.\n\n324\n00:17:28,785 --> 00:17:31,885\nAnd I'm gonna do a shutdown on this\ninterface and then just as quick as,\n\n325\n00:17:31,885 --> 00:17:35,155\nwhoops, I'm gonna shut it down twice,\nas quick as I can, I'm gonna run it again.\n\n326\n00:17:35,155 --> 00:17:38,525\nAnd I didn't do it as fast as I wanted but\nI did it pretty darn quick.\n\n327\n00:17:38,525 --> 00:17:39,155\n>> Yeah.\n\n328\n00:17:39,155 --> 00:17:44,060\n>> And you'll see where it\nwas routing out fa0/1 and\n\n329\n00:17:44,060 --> 00:17:50,290\njust that quickly, it's now routing over\nfa0/0 it's already found the other path.\n\n330\n00:17:50,290 --> 00:17:54,110\nAnd it did that thanks to\ntracking who's second place.\n\n331\n00:17:54,110 --> 00:17:58,150\nIt already knew the second place route,\nso as soon as the primary route was gone.\n\n332\n00:17:58,150 --> 00:17:58,990\nSecond place kicked in.\n\n333\n00:18:00,260 --> 00:18:03,900\n>> Now this actually leads us to some\nnew terminology that we actually have to\n\n334\n00:18:03,900 --> 00:18:05,390\nkind of talk about here.\n\n335\n00:18:05,390 --> 00:18:09,660\n>> In EIGRP, when we talk about\nthe idea of the routing table and\n\n336\n00:18:09,660 --> 00:18:12,390\nwhat gets entered into the routing table,\nyou and\n\n337\n00:18:12,390 --> 00:18:15,550\nI can just say,\nit's the best path to the destination.\n\n338\n00:18:15,550 --> 00:18:19,980\nBut in terms fo EIGRP, they use the term,\nsuccessor is the actual term.\n\n339\n00:18:19,980 --> 00:18:23,640\nThat is the route that gets entered\ninto the routing table itself.\n\n340\n00:18:23,640 --> 00:18:24,260\nHere's what we have.\n\n341\n00:18:24,260 --> 00:18:27,580\nNow that second best route,\n\n342\n00:18:27,580 --> 00:18:31,180\nI guess is the best way to describe it\nthere, is what Don just typed up here,\n\n343\n00:18:31,180 --> 00:18:36,010\nthat we call the feasible successor,\nis what will actually happen.\n\n344\n00:18:36,010 --> 00:18:39,760\nAnd that is the one that\nactually gets put into.\n\n345\n00:18:39,760 --> 00:18:41,970\nWhat is that, the topology table?\n\n346\n00:18:41,970 --> 00:18:44,210\nI don't remember what that's called.\n\n347\n00:18:44,210 --> 00:18:46,866\n>> I usually just call\nit the EIGRP database.\n\n348\n00:18:46,866 --> 00:18:48,181\n[CROSSTALK]\n>> The database there.\n\n349\n00:18:48,181 --> 00:18:50,978\nSo the second one gets stored in that.\n\n350\n00:18:50,978 --> 00:18:53,230\nAnd this is why it actually failed over so\nquickly,\n\n351\n00:18:53,230 --> 00:18:57,510\nas soon as that best path disappeared,\ndual didn't have to recalc it,\n\n352\n00:18:57,510 --> 00:18:59,860\nit already knew where it was, just today.\n\n353\n00:18:59,860 --> 00:19:03,900\nLet's just move this one up into\nthe routing table, and there you go.\n\n354\n00:19:03,900 --> 00:19:07,110\n>> Yeah, none of the other\nrouting protocols do this, right.\n\n355\n00:19:07,110 --> 00:19:10,610\nRIP, the routing information protocol,\nit picks the best route,\n\n356\n00:19:10,610 --> 00:19:12,560\nthe best route goes on the routing table.\n\n357\n00:19:12,560 --> 00:19:13,940\nAll the other routes get\nthrown in the trash.\n\n358\n00:19:13,940 --> 00:19:14,470\n>> Yep, gone.\n\n359\n00:19:14,470 --> 00:19:16,380\n>> They're just deleted, they're gone.\n\n360\n00:19:16,380 --> 00:19:18,480\nOSPF, it picks the best route,\n\n361\n00:19:18,480 --> 00:19:21,150\nsticks it in the routing table,\nit keeps the other routes.\n\n362\n00:19:21,150 --> 00:19:22,550\n>> Yeah.\n>> But it doesn't pick second place.\n\n363\n00:19:22,550 --> 00:19:24,060\n>> Yeah.\n>> And if a failure happens it has to\n\n364\n00:19:24,060 --> 00:19:26,308\nrun the algorithm right there\nat the time of failure.\n\n365\n00:19:26,308 --> 00:19:28,205\nEIGRP is the only one\nthat says you know what,\n\n366\n00:19:28,205 --> 00:19:29,912\nI'm going to pick second\nplace ahead of time.\n\n367\n00:19:29,912 --> 00:19:30,900\n>> Yeah.\n[LAUGH] >> I'm going to go ahead and\n\n368\n00:19:30,900 --> 00:19:33,080\npick it now,\neven though the network is healthy, and\n\n369\n00:19:33,080 --> 00:19:35,340\nthat way if there is a failure\nit's already got it.\n\n370\n00:19:35,340 --> 00:19:36,010\n>> Yeah.\n>> It's ready to rock.\n\n371\n00:19:37,120 --> 00:19:40,590\n>> And so that makes it very important for\nus because of the speed of it,\n\n372\n00:19:40,590 --> 00:19:41,950\nthe efficiency of it.\n\n373\n00:19:41,950 --> 00:19:44,790\nIt is an incredible\nsophisticated protocol.\n\n374\n00:19:44,790 --> 00:19:49,190\nBut for us though, we want at least\n[INAUDIBLE] to understand how it actually\n\n375\n00:19:49,190 --> 00:19:54,470\ngoes about doing this,\nis what we want to be able to do.\n\n376\n00:19:54,470 --> 00:19:59,130\n>> So the thing we need to know\nhere is we need to understand.\n\n377\n00:19:59,130 --> 00:20:00,850\n>> A couple of things, the metric, right?\n\n378\n00:20:00,850 --> 00:20:01,410\n>> Right.\n>> Which we've\n\n379\n00:20:01,410 --> 00:20:03,200\nalready talked about, right?\n\n380\n00:20:03,200 --> 00:20:07,605\nWe need to talk about the,\nlet's see if I can spell all this right.\n\n381\n00:20:07,605 --> 00:20:08,690\n>> [LAUGH]\n>> The feasible distance.\n\n382\n00:20:08,690 --> 00:20:09,930\n>> Feasible, yep.\n\n383\n00:20:09,930 --> 00:20:17,120\n>> And the advertised distance of a link,\nof a network or a route.\n\n384\n00:20:17,120 --> 00:20:19,000\nWhen I did that fail over\nhere in the background.\n\n385\n00:20:20,240 --> 00:20:21,450\nAll right, let me just jump back to this.\n\n386\n00:20:22,500 --> 00:20:27,331\nAll right, when I did that fail over, let\nme throw this into Notepad or something so\n\n387\n00:20:27,331 --> 00:20:29,413\nwe can see it a little more cleanly.\n\n388\n00:20:31,387 --> 00:20:36,093\nI say Notepad, I know some of our\nreviewers are absolutely learning to\n\n389\n00:20:36,093 --> 00:20:37,940\nhate Notepad thanks to me.\n\n390\n00:20:39,330 --> 00:20:40,780\nThere we go.\n\n391\n00:20:40,780 --> 00:20:47,651\nSo, here's my before and my after.\n\n392\n00:20:47,651 --> 00:20:52,360\nSo, before and after, I had a route to\n192.168.3.0, that's not different, right?\n\n393\n00:20:53,360 --> 00:20:56,900\nBefore, I was routing out fa0/1.\n\n394\n00:20:56,900 --> 00:21:00,460\nTo a host, 172.16.3.3, afterwards,\nit flipped over to fa0/0,\n\n395\n00:21:00,460 --> 00:21:04,660\nrouting to a host 172.16.1.2, right?\n\n396\n00:21:04,660 --> 00:21:08,890\nIf I look at my diagram,\nbasically I went, so on router 1,\n\n397\n00:21:08,890 --> 00:21:12,410\nI was going this way across this link.\n\n398\n00:21:12,410 --> 00:21:13,990\nLet me get artsy.\n\n399\n00:21:13,990 --> 00:21:17,620\nSo I was before the failure,\ngoing that way.\n\n400\n00:21:18,730 --> 00:21:22,810\nAfter the failure we're\nnow going this way.\n\n401\n00:21:22,810 --> 00:21:23,370\nOkay.\n\n402\n00:21:23,370 --> 00:21:25,420\nSo, that's the kind of re route.\n\n403\n00:21:25,420 --> 00:21:27,050\nWell, this link right here.\n\n404\n00:21:27,050 --> 00:21:28,220\nThis red link.\n\n405\n00:21:28,220 --> 00:21:30,500\nThat is a 100 megabit link.\n\n406\n00:21:30,500 --> 00:21:33,360\nI cross that line to get to\nthe destination nice and fast.\n\n407\n00:21:33,360 --> 00:21:35,400\nThe blue link on the other hand.\n\n408\n00:21:35,400 --> 00:21:38,670\nI cross this 100 megabit\nline to router two..\n\n409\n00:21:38,670 --> 00:21:43,910\nBut then router 2 to router 3 is a 64\nkilo bit line, it's a serial line.\n\n410\n00:21:43,910 --> 00:21:44,950\nIt's pretty slow.\n\n411\n00:21:45,980 --> 00:21:50,820\nSo when EIGRP looked at all of this,\nit saw that line, it knew that it was\n\n412\n00:21:50,820 --> 00:21:56,080\na slow line, and it put it into the dual\nalgorithm, that mathematical algorithm.\n\n413\n00:21:56,080 --> 00:21:59,920\nAnd when it churned out the answers for\nus, when it churned out\n\n414\n00:21:59,920 --> 00:22:05,260\nwho was going to be our winner,\nthis is the result that it came up with.\n\n415\n00:22:05,260 --> 00:22:10,410\nThis number is what's known as\nthe feasible distance to the route.\n\n416\n00:22:10,410 --> 00:22:15,560\nThe route that went through just router\nthree, that red route that I drew.\n\n417\n00:22:15,560 --> 00:22:18,400\nHad a feasible distance of 30,720.\n\n418\n00:22:18,400 --> 00:22:22,250\nThat's what the dual formula resulted in.\n\n419\n00:22:22,250 --> 00:22:27,204\nThe route that went the long way through\nthe 100 megabit line and the 64 kilo bit\n\n420\n00:22:27,204 --> 00:22:32,100\nline, it resulted in, what have\nwe got 2 million, no, 21 million.\n\n421\n00:22:32,100 --> 00:22:36,360\nNope, I was right the first time.\n\n422\n00:22:36,360 --> 00:22:38,265\nOh shoot, stupid numbers.\n\n423\n00:22:38,265 --> 00:22:39,390\n2,174,976.\nThere we go.\n\n424\n00:22:39,390 --> 00:22:43,620\nSo you're talking about\n30,000 versus 2 million.\n\n425\n00:22:43,620 --> 00:22:46,870\nIt's obvious which line it's gonna pick,\nso\n\n426\n00:22:46,870 --> 00:22:50,740\nwhen it comes to feasible distance,\nthe lower number is the winner.\n\n427\n00:22:50,740 --> 00:22:54,140\nThat's how it picks it, the router just,\nit runs its formulas, and\n\n428\n00:22:54,140 --> 00:22:57,039\nwhoever comes out with the lowest\nnumber is the one that wins.\n\n429\n00:22:58,740 --> 00:23:00,760\nNow, let me add that here.\n\n430\n00:23:00,760 --> 00:23:01,670\nSo the feasible distance.\n\n431\n00:23:07,071 --> 00:23:10,180\nThat's the result of the dual formula for\na route, and\n\n432\n00:23:10,180 --> 00:23:12,080\nwe picked lowest value, right?\n\n433\n00:23:12,080 --> 00:23:14,340\nLowest result wins.\n\n434\n00:23:15,910 --> 00:23:23,970\nSo the metric, that's that combination\nof bandwidth and delay by default.\n\n435\n00:23:23,970 --> 00:23:24,550\nRight.\nBecause\n\n436\n00:23:24,550 --> 00:23:25,660\nthe other ones are kind of cancelled out.\n\n437\n00:23:25,660 --> 00:23:28,050\nSo I'll just say it's a combination\nof bandwidth and delay.\n\n438\n00:23:28,050 --> 00:23:31,180\nThe feasible distance is the result\nof that formula, all right.\n\n439\n00:23:31,180 --> 00:23:33,470\nBut there is another value that\ncomes into play here, all right.\n\n440\n00:23:35,290 --> 00:23:39,880\nDeep down in its heart,\nEIGRP is a distance vector protocol.\n\n441\n00:23:40,930 --> 00:23:45,410\nIn a link state protocol, all\nthe routers talk to every other router.\n\n442\n00:23:45,410 --> 00:23:48,220\nSo you've got full\ncommunication within an area.\n\n443\n00:23:48,220 --> 00:23:52,174\nIn a distance vector protocol,\nyou only talk to your neighbors.\n\n444\n00:23:52,174 --> 00:23:55,458\nSo if I were to try and\nhighlight that here,\n\n445\n00:23:55,458 --> 00:24:01,127\nbasically router 1 is having a two-way\ncommunication with router two.\n\n446\n00:24:01,127 --> 00:24:04,363\nAnd it's having a two-way\ncommunication with router 3.\n\n447\n00:24:04,363 --> 00:24:06,721\nSo it's directly talking to those guys.\n\n448\n00:24:06,721 --> 00:24:11,119\nBut one of the routes that I\nhighlighted went this way.\n\n449\n00:24:11,119 --> 00:24:12,000\nAll right.\n\n450\n00:24:12,000 --> 00:24:14,860\nSay it involves more than one router,\nwell,\n\n451\n00:24:14,860 --> 00:24:20,680\nrouter 1 sees this route and\nknows that it goes through router 3.\n\n452\n00:24:20,680 --> 00:24:23,500\nIt sees this route, the blue route.\n\n453\n00:24:23,500 --> 00:24:25,280\nAnd it knows that it goes\nthrough router 2, but\n\n454\n00:24:25,280 --> 00:24:28,630\nit doesn't know anything about\nthe distance beyond that.\n\n455\n00:24:28,630 --> 00:24:31,210\nIt has no idea that it's actually\nrouter 3 on the other end.\n\n456\n00:24:31,210 --> 00:24:33,350\nIt doesn't know anything about this link.\n\n457\n00:24:33,350 --> 00:24:38,255\nIt just talks to its neighbor; and its\nneighbor is passing information on to us.\n\n458\n00:24:38,255 --> 00:24:39,070\nRight?\n\n459\n00:24:39,070 --> 00:24:42,240\nSo, what happens [COUGH] excuse me.\n\n460\n00:24:42,240 --> 00:24:45,560\nIs basically,\nrouter 3 sends out its advertisements.\n\n461\n00:24:45,560 --> 00:24:48,640\nSo it advertises out to router 2 and\nto router 1.\n\n462\n00:24:48,640 --> 00:24:51,580\nAnd then it's like the old telephone game.\n\n463\n00:24:51,580 --> 00:24:54,820\nRouter 2 takes that information,\nthe information that it learned.\n\n464\n00:24:56,800 --> 00:24:59,300\nAnd then it relays it over to router 1.\n\n465\n00:24:59,300 --> 00:25:02,080\nSo router 1 learns the two\ndifferent routes to get there.\n\n466\n00:25:02,080 --> 00:25:04,000\nRight?\nThe two different paths.\n\n467\n00:25:04,000 --> 00:25:08,810\nWhen it does that,\nrouter 2 is passing on what it got for\n\n468\n00:25:08,810 --> 00:25:11,710\nthe dual algorithm here to router 1.\n\n469\n00:25:11,710 --> 00:25:14,570\nAnd so it's saying hey here's\nwhat i got when I ran dual.\n\n470\n00:25:14,570 --> 00:25:18,700\nHere's my feasible distance\nhere's how far it took for\n\n471\n00:25:18,700 --> 00:25:21,920\nme to get to that network so good luck.\n\n472\n00:25:21,920 --> 00:25:27,210\nAnd when router 1 gets it,\nit runs its own dual formula against\n\n473\n00:25:27,210 --> 00:25:32,150\nthis link and adds it together with\nwhat was transmitted from router 2,\n\n474\n00:25:32,150 --> 00:25:35,250\nto get the full length of the line.\n\n475\n00:25:35,250 --> 00:25:39,935\nIts own calculation right\nhere has to come into play.\n\n476\n00:25:39,935 --> 00:25:44,295\nWhat we received from router 2,\nthat's called the advertised distance.\n\n477\n00:25:44,295 --> 00:25:46,967\nThat's what router 2 would\ntake to get to the network.\n\n478\n00:25:46,967 --> 00:25:47,905\nAll right?\n\n479\n00:25:47,905 --> 00:25:52,985\nSo if I dissect all this,\nit sounds kinda gross that way.\n\n480\n00:25:52,985 --> 00:25:54,685\nBut, you've got this link here.\n\n481\n00:25:55,770 --> 00:25:58,794\nAnd you've got this link here.All right?\n\n482\n00:25:58,794 --> 00:26:01,850\nSo when router 2 advertises to router 1,\n\n483\n00:26:01,850 --> 00:26:04,440\nit's advertising its\nfeasible distance here.\n\n484\n00:26:04,440 --> 00:26:08,075\nSo this is called the advertised\ndistance,what router 2 is telling us.\n\n485\n00:26:08,075 --> 00:26:12,695\nWe then combine it with this link\nto form the feasible distance.\n\n486\n00:26:12,695 --> 00:26:16,405\nSo there's two values, what we were\ntold and what we calculated ourselves.\n\n487\n00:26:17,465 --> 00:26:21,155\nNow, you might ask why that's important\nand we'll get to that in a second.\n\n488\n00:26:21,155 --> 00:26:24,165\nBut your router is tracking all of this.\n\n489\n00:26:24,165 --> 00:26:30,198\nIf I run show ip eigrp database,\noops, topology.\n\n490\n00:26:34,758 --> 00:26:36,000\nCome on!\n\n491\n00:26:36,000 --> 00:26:38,080\nI need a spellchecker on my command line!\n\n492\n00:26:38,080 --> 00:26:39,010\n>> There you go.\n\n493\n00:26:39,010 --> 00:26:42,060\n>> If we run show IP EIGRP topology,\n\n494\n00:26:42,060 --> 00:26:46,520\nwe can see in here with each route,\nthen it actually has two entries.\n\n495\n00:26:46,520 --> 00:26:49,040\nNotice these two numbers, okay?\n\n496\n00:26:49,040 --> 00:26:52,210\nThe number on the right,\nthat's the advertised distance.\n\n497\n00:26:52,210 --> 00:26:54,770\nThat's what our neighbor told us.\n\n498\n00:26:54,770 --> 00:26:57,950\nAnd then we add on that extra link and\n\n499\n00:26:57,950 --> 00:27:01,230\nthat's how we get our feasible distance,\nthat number there.\n\n500\n00:27:01,230 --> 00:27:04,490\nWhen you look in the routing table,\nyou only see the feasible distance.\n\n501\n00:27:04,490 --> 00:27:07,900\nYou see this number, this first, Wow.\n\n502\n00:27:07,900 --> 00:27:09,485\nOh come, let me click please.\n\n503\n00:27:09,485 --> 00:27:11,690\n>> [LAUGH]\n>> All right,\n\n504\n00:27:11,690 --> 00:27:14,640\nwell, my computer's decided it's only\ngonna highlight the whole daggone thing.\n\n505\n00:27:14,640 --> 00:27:16,010\n>> [LAUGH]\n>> So you only see the first number.\n\n506\n00:27:16,010 --> 00:27:20,120\nThe second number is used when\nwe receive that, but it's\n\n507\n00:27:20,120 --> 00:27:23,280\nnot really usable the way that it is cuz\nit's not taking into account our own link.\n\n508\n00:27:23,280 --> 00:27:24,380\nSo we have to modify a little,\n\n509\n00:27:24,380 --> 00:27:28,720\nand that's why we have two things,\nadvertise distance and feasible distance.\n\n510\n00:27:30,330 --> 00:27:34,508\nAlright, so if I go back to\nmy routing table, let's see.\n\n511\n00:27:38,280 --> 00:27:42,280\nAnd I look at my routing table here, and\nI'm, I'm showing just my EIGRP routes,\n\n512\n00:27:42,280 --> 00:27:46,220\nI can see like, these routes with\na distance of 30,720, right.\n\n513\n00:27:48,040 --> 00:27:52,894\nAnd if I go back up to my database and\nI find it in here.\n\n514\n00:27:52,894 --> 00:27:54,086\nHere it is.\n\n515\n00:27:54,086 --> 00:27:58,910\n30,720, but\nthe advertised distance was only 28,160,\n\n516\n00:27:58,910 --> 00:28:01,360\nbut you don't see that\nin the routing table.\n\n517\n00:28:01,360 --> 00:28:04,832\nIt doesn't show up in here cause the\nfeasible distance is what we work with.\n\n518\n00:28:04,832 --> 00:28:07,280\nAll right, so you might ask yourself,\n\n519\n00:28:07,280 --> 00:28:10,090\nwhy do we bother tracking\nthe advertised distance?\n\n520\n00:28:10,090 --> 00:28:11,220\nWell, there's a reason.\n\n521\n00:28:12,430 --> 00:28:14,310\nBut I just looked at the clock and\nI don't have enough time to explain it.\n\n522\n00:28:14,310 --> 00:28:16,060\nSo let's do this.\n\n523\n00:28:16,060 --> 00:28:17,050\nLet's stop and take a break.\n\n524\n00:28:17,050 --> 00:28:21,980\nWhen I get back I'll explain how\nthe advertised distance works and\n\n525\n00:28:21,980 --> 00:28:24,262\nhow it falls into play and all that.\n\n526\n00:28:24,262 --> 00:28:26,391\n>> And\nthe mystery of the feasible successor now.\n\n527\n00:28:26,391 --> 00:28:26,930\n>> Yes.\n\n528\n00:28:26,930 --> 00:28:31,160\nThat's an important thing it can show up\non the exam it's definitely good to know.\n\n529\n00:28:31,160 --> 00:28:32,050\nAll right, ladies and gentlemen,\n\n530\n00:28:32,050 --> 00:28:34,480\nstay tuned when we get back,\na little bit more math.\n\n531\n00:28:34,480 --> 00:28:35,690\nHopefully not too painful.\n\n532\n00:28:35,690 --> 00:28:36,449\nWe'll see you then.\n\n533\n00:28:36,449 --> 00:28:43,517\n[MUSIC]\n\n534\n00:28:43,517 --> 00:28:46,470\nAll right welcome back everybody.\n\n535\n00:28:46,470 --> 00:28:51,220\nSo going into the break we left you\nwith the cliffhanger of advertised\n\n536\n00:28:51,220 --> 00:28:53,199\ndistance versus feasible distance and\nall the good stuff.\n\n537\n00:28:54,450 --> 00:28:57,710\nThe thing to remember about these numbers,\nyou don't need to calculate 'em yourself,\n\n538\n00:28:57,710 --> 00:28:59,640\nyou don't need to memorize\nwhat the numbers are.\n\n539\n00:28:59,640 --> 00:29:02,850\nBut, the reason that they're both tracked,\nis,\n\n540\n00:29:02,850 --> 00:29:07,240\nit goes back to something Ronnie\nmentioned at the beginning of the show.\n\n541\n00:29:07,240 --> 00:29:11,174\nThe EIGRP gives you 100%\nloop-free routing,all right.\n\n542\n00:29:11,174 --> 00:29:14,620\nAnd it does that by tracking\nthese numbers right here.\n\n543\n00:29:15,890 --> 00:29:18,490\nLet me give you a scenario\nwhere a loop would occur.\n\n544\n00:29:18,490 --> 00:29:21,807\nLet me go back to my little\nnetwork diagram here.\n\n545\n00:29:21,807 --> 00:29:22,712\nAll right?\n\n546\n00:29:22,712 --> 00:29:29,250\nThe one 192.168.1.0 network,\nit is right here,\n\n547\n00:29:29,250 --> 00:29:34,010\nand router 1 is gonna advertise\nthat out to router 3, all right?\n\n548\n00:29:34,010 --> 00:29:37,940\nWell, router 3 will\nadvertise that to router 2.\n\n549\n00:29:37,940 --> 00:29:40,230\nAnd router 2 will\nadvertise that to router 1.\n\n550\n00:29:40,230 --> 00:29:41,712\nAll right.\n\n551\n00:29:41,712 --> 00:29:47,770\nRouter 1 is, in effect, going to receive\nit's own route back again, okay?\n\n552\n00:29:47,770 --> 00:29:49,120\nBut router 2 doesn't know that.\n\n553\n00:29:49,120 --> 00:29:53,470\nBecause, remember, the routers only\nsee who they're directly connected to.\n\n554\n00:29:53,470 --> 00:29:57,350\nSo router 2 is talking to router three.\n\n555\n00:29:57,350 --> 00:30:01,180\nIt doesn't know that it's getting\ninformation from router 1 on the back end.\n\n556\n00:30:01,180 --> 00:30:03,560\nIt just knows that it's getting\ninformation from router 3.\n\n557\n00:30:03,560 --> 00:30:04,180\nAll right.\n\n558\n00:30:04,180 --> 00:30:08,670\nSo when this happens,\na routing loop could occur.\n\n559\n00:30:08,670 --> 00:30:09,400\nNow for the most part,\n\n560\n00:30:09,400 --> 00:30:13,860\nit's not a big deal because router 1\nis directly connected to that network.\n\n561\n00:30:13,860 --> 00:30:16,220\nAnd so,\nnothing is going to beat that route.\n\n562\n00:30:16,220 --> 00:30:20,800\nAnd if that route goes down, well,\nthat's where our problem starts to occur.\n\n563\n00:30:20,800 --> 00:30:23,870\nNow we got this other router\ncoming in that may make it\n\n564\n00:30:23,870 --> 00:30:27,850\nlook like we can still get to 192.68.10,\nwhen in reality we can't.\n\n565\n00:30:29,400 --> 00:30:33,060\nBut it's not a problem\nin EIGRP because EIGRP\n\n566\n00:30:33,060 --> 00:30:36,745\nnever even adds this\nroute to the database.\n\n567\n00:30:36,745 --> 00:30:38,230\nRight.\nLet's look at router 1's\n\n568\n00:30:38,230 --> 00:30:40,340\nrouting table in our actual system.\n\n569\n00:30:40,340 --> 00:30:45,160\nNot the routing table, well,\nI guess we can start there.\n\n570\n00:30:45,160 --> 00:30:47,320\nSo if I look, I've got 192.168.1.0 and\n\n571\n00:30:47,320 --> 00:30:51,790\nit shows in here as being\ndirectly connected right there.\n\n572\n00:30:51,790 --> 00:30:52,480\nOkay?\n\n573\n00:30:52,480 --> 00:30:55,172\nAnd it's learned with a C,\nit's a connected route.\n\n574\n00:30:55,172 --> 00:30:56,340\nAll right?\n\n575\n00:30:56,340 --> 00:31:02,575\nIf I do show ip eigrp topology and\nI look in here for\n\n576\n00:31:02,575 --> 00:31:08,850\n192.168.1.0 here it is directly connected\non FA1/1 and it's got a feasible distance.\n\n577\n00:31:08,850 --> 00:31:12,930\nA feasible distance of 28,160,\nthat's that length, but it.\n\n578\n00:31:12,930 --> 00:31:17,730\nBut it doesn't have another route as\ncoming from the other routers, right?\n\n579\n00:31:17,730 --> 00:31:22,040\nAnd the reason is, it didn't even\nlet them get into the routing table.\n\n580\n00:31:22,040 --> 00:31:26,605\nIf the advertised distance,\nthe distance coming in from a neighbor.\n\n581\n00:31:26,605 --> 00:31:30,245\nIs higher than the feasible\ndistance of our success route.\n\n582\n00:31:30,245 --> 00:31:31,125\nOf the route we've already got.\n\n583\n00:31:31,125 --> 00:31:36,605\nIf it's higher then the router says\none of two things is possible here.\n\n584\n00:31:36,605 --> 00:31:39,545\nOne, you got a crappy route and\nI don't want it.\n\n585\n00:31:39,545 --> 00:31:41,915\nOr two there's a loop.\n\n586\n00:31:41,915 --> 00:31:43,375\nThere's a loop and i'm learning my own.\n\n587\n00:31:43,375 --> 00:31:46,285\nThat's the only time that the advertised\ndistance would be higher than what I've\n\n588\n00:31:46,285 --> 00:31:47,620\nalready got, right?\n\n589\n00:31:47,620 --> 00:31:50,860\nSo if i start to tack on\nmy feasible distance,\n\n590\n00:31:50,860 --> 00:31:53,280\nthings are just gonna get worse and\nworse, the loops gonna build up.\n\n591\n00:31:53,280 --> 00:31:57,695\nSo it doesn't even allow it to\nmake it into the topology table.\n\n592\n00:31:57,695 --> 00:31:58,331\nRight?\n\n593\n00:31:58,331 --> 00:32:02,627\nSo it's never going to become\nthe feasible, or become the successor.\n\n594\n00:32:02,627 --> 00:32:04,867\nIt's just not even gonna\nbecome the successor.\n\n595\n00:32:04,867 --> 00:32:07,387\nAnd that stops the loop from happening.\n\n596\n00:32:07,387 --> 00:32:10,678\nThat's an automatic thing,\nit's already done for us, but\n\n597\n00:32:10,678 --> 00:32:12,130\nwe need to be aware of it.\n\n598\n00:32:12,130 --> 00:32:14,330\nThat's why we get the double list.\n\n599\n00:32:14,330 --> 00:32:18,590\nWe get the feasible distance,\nas well as the advertised distance.\n\n600\n00:32:18,590 --> 00:32:21,170\nBecause, we might need to compare\nthat advertised distance,\n\n601\n00:32:21,170 --> 00:32:25,675\nwith whatever our actual feasible distance\nis to see that it is actually lower.\n\n602\n00:32:25,675 --> 00:32:26,200\n>> Yeah.\n\n603\n00:32:26,200 --> 00:32:29,040\n>> Now this brings something into mind\nthat we actually also have to pay\n\n604\n00:32:29,040 --> 00:32:30,090\nattention to.\n\n605\n00:32:30,090 --> 00:32:34,140\nDon just told us that if\nthe advertised distance of the route,\n\n606\n00:32:34,140 --> 00:32:39,960\nisn't smaller than the feasible distance\nof what's actually in the routing table.\n\n607\n00:32:39,960 --> 00:32:44,210\nIt's never going to have a chance\nto get into the routing table.\n\n608\n00:32:44,210 --> 00:32:47,870\nSo Don,\nwhat about the feasible successor then?\n\n609\n00:32:47,870 --> 00:32:50,280\nWhat's the difference there between that,\nand what we just talked about?\n\n610\n00:32:50,280 --> 00:32:54,830\n>> So that's one that comes in where\nit's advertised distance is lower,\n\n611\n00:32:54,830 --> 00:32:57,590\nthan the feasible distance we have for\na router that's already in place.\n\n612\n00:32:57,590 --> 00:33:00,690\nNow you might say, wait a minute, if it's\nlower wouldn't it become the successor?\n\n613\n00:33:00,690 --> 00:33:03,920\nWell, remember it's the advertised\ndistance, it's not including\n\n614\n00:33:03,920 --> 00:33:07,530\nour individual link that actually\nleads to that neighbor router.\n\n615\n00:33:07,530 --> 00:33:10,480\nSo, we have to take that advertised\ndistance and then add to it,\n\n616\n00:33:10,480 --> 00:33:13,060\nwhich then is what makes it,\nbasically, second place.\n\n617\n00:33:13,060 --> 00:33:16,470\nSo the second place guy makes it here,\ninto the routing table and\n\n618\n00:33:16,470 --> 00:33:17,740\nit sits in there and it parks.\n\n619\n00:33:17,740 --> 00:33:21,660\nNow, we don't really see that here,\nbecause we don't have any-\n\n620\n00:33:21,660 --> 00:33:24,000\n>> The archology is not really shown.\n\n621\n00:33:24,000 --> 00:33:25,840\n>> Let's see could I fake something.\n\n622\n00:33:25,840 --> 00:33:26,770\nI think I could.\n\n623\n00:33:26,770 --> 00:33:27,340\n>> Okay.\n\n624\n00:33:27,340 --> 00:33:29,190\n>> Let's see what I could fake here.\n\n625\n00:33:29,190 --> 00:33:33,950\nSo, if we were to take a,\nhow could I break this?\n\n626\n00:33:33,950 --> 00:33:39,040\nI would have to create a false network,\nto create more than one\n\n627\n00:33:39,040 --> 00:33:43,140\nway to the same destination, so\nI would have to poison it a little bit.\n\n628\n00:33:43,140 --> 00:33:44,890\nWhat is the best way to do that?\n\n629\n00:33:44,890 --> 00:33:46,700\nLet's tinker around,\nwe're gonna experiment.\n\n630\n00:33:46,700 --> 00:33:49,380\nSo I'm gonna take Router 3.\n\n631\n00:33:49,380 --> 00:33:50,824\nAnd I'll create a fake network.\n\n632\n00:33:53,197 --> 00:33:58,280\nLet's try the actual Router 3.\n\n633\n00:33:58,280 --> 00:34:00,000\nThere we go.\nAnd I'm gonna create a loop back.\n\n634\n00:34:00,000 --> 00:34:04,484\nAnd I'm gonna give it an IP\naddress in the 192.168 network.\n\n635\n00:34:07,300 --> 00:34:08,970\nAnd it's a loop back.\n\n636\n00:34:08,970 --> 00:34:11,190\nSo, it's directly connected, but\n\n637\n00:34:11,190 --> 00:34:13,880\na loop back is gonna have\na better metric than what?\n\n638\n00:34:15,940 --> 00:34:17,900\nEIGRP is gonna do something\nweird with this one.\n\n639\n00:34:17,900 --> 00:34:18,820\nShoot.\n\n640\n00:34:18,820 --> 00:34:19,460\nWell, let's see.\n\n641\n00:34:19,460 --> 00:34:20,410\nWe'll see what it does?\n\n642\n00:34:22,910 --> 00:34:23,820\nLet me just add that.\n\n643\n00:34:31,033 --> 00:34:32,610\nAll right.\n\n644\n00:34:32,610 --> 00:34:37,150\nSo this router now has a direct\nconnection to the 192.168.2 network,\n\n645\n00:34:37,150 --> 00:34:39,770\nthat it didn't have before.\n\n646\n00:34:39,770 --> 00:34:40,320\nAll right?\n\n647\n00:34:40,320 --> 00:34:44,850\nSo if I go back to my diagram,\nRouter 2 is connected to 192.168.2,\n\n648\n00:34:44,850 --> 00:34:49,380\nand it's advertising up to Router 1,\nRouter 3 also now\n\n649\n00:34:49,380 --> 00:34:53,270\nthinks that it's connected to 192.168.2\nand so it's advertising up to Router 1.\n\n650\n00:34:53,270 --> 00:34:57,333\nRouter 1 is gonna get two\ndifferent opinions on this, so\n\n651\n00:34:57,333 --> 00:35:00,050\nlet's go and take a look at Router 1.\n\n652\n00:35:01,500 --> 00:35:03,425\nVisio is just not wanting to free that up.\n\n653\n00:35:03,425 --> 00:35:04,478\n>> [LAUGH]\n>> There we go.\n\n654\n00:35:04,478 --> 00:35:06,790\nSo let's go take a look at Router 1 and\nsee what we've got.\n\n655\n00:35:09,858 --> 00:35:16,746\nAnd it's still just\nshowing one successor no-\n\n656\n00:35:24,863 --> 00:35:26,315\nI did advertise it didn't I?\n\n657\n00:35:26,315 --> 00:35:30,950\n>> Yes.\n>> It should show up faster than that.\n\n658\n00:35:30,950 --> 00:35:33,824\n>> We're seeing two in that.\n\n659\n00:35:33,824 --> 00:35:41,205\n>> Hang on, let me make sure it's\nnot shut down or something silly.\n\n660\n00:35:41,205 --> 00:35:42,570\n>> [LAUGH]\n>> All right.\n\n661\n00:35:42,570 --> 00:35:48,905\nSo the loop back is up,\n192.168.2.3 wait, you've got.\n\n662\n00:35:51,035 --> 00:35:54,980\nI'm looking for typos, that's usually what\nthe culprit is on something like this.\n\n663\n00:35:54,980 --> 00:35:56,917\nAnd I'm advertising that network.\n\n664\n00:35:59,575 --> 00:36:01,566\nLet me do this, let me flush.\n\n665\n00:36:05,158 --> 00:36:06,160\nThis guy.\n\n666\n00:36:18,025 --> 00:36:21,500\nI'm just gonna drop all my EIGRP,\nadjacencies and let it rebuild.\n\n667\n00:36:25,430 --> 00:36:26,490\nThere's a clear command for that.\n\n668\n00:36:26,490 --> 00:36:28,130\nI can never remember it though.\n\n669\n00:36:28,130 --> 00:36:30,650\nI just shut off the interfaces,\nand turn them back on.\n\n670\n00:36:30,650 --> 00:36:32,405\nNot the greatest thing\nto do in production.\n\n671\n00:36:32,405 --> 00:36:34,710\n>> [LAUGH]\n>> I think it's like\n\n672\n00:36:36,520 --> 00:36:38,990\nclear IP EIGRP-\n>> Neighbors?\n\n673\n00:36:38,990 --> 00:36:39,650\n>> Neighbors, yeah.\n\n674\n00:36:39,650 --> 00:36:41,028\nOr I think, can you just do one?\n\n675\n00:36:46,280 --> 00:36:48,256\nYeah, so I could have run that and\nthat would've done it too,\n\n676\n00:36:48,256 --> 00:36:49,920\nwithout shutting interfaces off.\n\n677\n00:36:49,920 --> 00:36:54,066\nLet's see what we get now.\n\n678\n00:36:54,066 --> 00:36:56,810\nAnd, no still not upholding it.\n\n679\n00:36:56,810 --> 00:37:00,890\nI think some of the routing protocols\nare smart, and pick up loop backs, and\n\n680\n00:37:00,890 --> 00:37:04,050\nknow that they're not true networks and\nfilter them out.\n\n681\n00:37:05,620 --> 00:37:10,154\nOr we could be dealing with a situation\nwhere the advertise distance\n\n682\n00:37:10,154 --> 00:37:14,861\nis coming in at a weird value, but,\nyeah, it's not seeing that one.\n\n683\n00:37:16,615 --> 00:37:20,910\nAll right, well, that's what I get for\ntrying to create something on the fly.\n\n684\n00:37:20,910 --> 00:37:24,190\nSo anyhow, so basically, when we learn\nthese, it's having a look advertise\n\n685\n00:37:24,190 --> 00:37:27,470\ndistance compared to the feasible\ndistance, kind of pick that winner.\n\n686\n00:37:27,470 --> 00:37:30,400\nIf the advertised distance is\nwithin the allowed values, right?\n\n687\n00:37:30,400 --> 00:37:33,610\nIf it's lower than whatever the feasible\ndistance of our successor is,\n\n688\n00:37:33,610 --> 00:37:35,820\nthen we'll end up with two routes in here.\n\n689\n00:37:35,820 --> 00:37:37,860\nYou'll have one successor, and\n\n690\n00:37:37,860 --> 00:37:40,620\na feasible distance which is\nthe distance of that successor.\n\n691\n00:37:40,620 --> 00:37:43,170\nAnd then you'll have other routes listed.\n\n692\n00:37:43,170 --> 00:37:46,640\nThose other routes being your feasible\nsuccessors, your back up routes.\n\n693\n00:37:46,640 --> 00:37:49,890\nSo, they'll make it in that entry,\nwe now know second place.\n\n694\n00:37:49,890 --> 00:37:51,810\nThey won't list third place or\nfourth place.\n\n695\n00:37:51,810 --> 00:37:54,510\nIt just does the winner and\nthe feasible successor.\n\n696\n00:37:54,510 --> 00:37:56,400\nAnd there might be more than\none feasible successor,\n\n697\n00:37:56,400 --> 00:38:00,200\nespecially if there's a tie,\nwhich we're not getting here.\n\n698\n00:38:00,200 --> 00:38:02,510\nI could probably do a second, whoops.\n\n699\n00:38:02,510 --> 00:38:04,150\nLet me do a secondary interface.\n\n700\n00:38:04,150 --> 00:38:05,406\nSee if that'll work a little better.\n\n701\n00:38:10,953 --> 00:38:13,147\nI'm gonna get rid of\nthat loop back interface.\n\n702\n00:38:16,069 --> 00:38:21,331\nAnd I'll get into, let's see F8 1/0.\n\n703\n00:38:29,499 --> 00:38:31,273\nSo I don't know, you guys,\nthe viewers at home,\n\n704\n00:38:31,273 --> 00:38:32,770\nyou might not have ever seen this before.\n\n705\n00:38:32,770 --> 00:38:36,020\nBut you can have more than one\nIP address on an interface,\n\n706\n00:38:36,020 --> 00:38:38,170\nif you use the secondary command.\n\n707\n00:38:38,170 --> 00:38:41,090\nThat secondary command says basically,\n\n708\n00:38:43,300 --> 00:38:46,920\ndon't get rid of the existing IP,\nbut add this second IP.\n\n709\n00:38:46,920 --> 00:38:49,470\nSo, now I've got two IP\naddresses on that interface.\n\n710\n00:38:49,470 --> 00:38:53,340\nActually, I got three cuz I got\nan IPv6 address down there too.\n\n711\n00:38:53,340 --> 00:38:57,750\nBut now, if I look at my\nrouting table I'll see that\n\n712\n00:38:57,750 --> 00:39:02,210\nI've got that 192.168.2 network\ndirectly connected on that FA1/0.\n\n713\n00:39:02,210 --> 00:39:06,420\nSo, it's there and\nI should be advertizing in EIGRP now and\n\n714\n00:39:06,420 --> 00:39:07,370\nit should be a little happier.\n\n715\n00:39:07,370 --> 00:39:07,960\nLet's go see.\n\n716\n00:39:15,150 --> 00:39:17,740\nIt is just not.\n\n717\n00:39:17,740 --> 00:39:19,320\nYeah, we just have the one route.\n\n718\n00:39:19,320 --> 00:39:20,760\nit's not picking that one up.\n\n719\n00:39:20,760 --> 00:39:21,338\n>> Yeah.\n>> Let me make\n\n720\n00:39:21,338 --> 00:39:22,970\nsure that I actually advertised that.\n\n721\n00:39:22,970 --> 00:39:24,368\nI thought I already checked that.\n\n722\n00:39:31,733 --> 00:39:36,726\n192.168.3.0 is in my network statement.\n\n723\n00:39:36,726 --> 00:39:37,309\n>> 3.0 yep.\n\n724\n00:39:39,320 --> 00:39:42,168\n>> We're crossing a classical boundary,\nbut that shouldn't stop it.\n\n725\n00:39:42,168 --> 00:39:43,436\nThat is strange.\n\n726\n00:39:43,436 --> 00:39:45,983\n>> Yeah.\n>> I really wonder why they're\n\n727\n00:39:45,983 --> 00:39:47,240\nnot setting up.\n\n728\n00:39:48,510 --> 00:39:49,730\nWe could jump in to debugging.\n\n729\n00:39:49,730 --> 00:39:53,090\nIt gets a little beyond what they\nexpect you to know on the CCNA exam.\n\n730\n00:39:53,090 --> 00:39:55,272\nYou got your various debug commands.\n\n731\n00:39:55,272 --> 00:40:00,337\nAnd EIGRP has a whole suite of\ncommands that you can use to debug\n\n732\n00:40:00,337 --> 00:40:05,221\nwhat's going on, and\nwhat events are happening and so on.\n\n733\n00:40:05,221 --> 00:40:08,159\nIf we turn all this on.\n\n734\n00:40:08,159 --> 00:40:09,370\nLet's see, there's my route events.\n\n735\n00:40:09,370 --> 00:40:17,916\nAnd actually let's do\n\n736\n00:40:24,371 --> 00:40:26,635\nWe'll see if we can find\nout what's going on here.\n\n737\n00:40:26,635 --> 00:40:30,234\nI'm going to turn it\non at router one also.\n\n738\n00:40:38,813 --> 00:40:40,473\nAll right.\n\n739\n00:40:48,008 --> 00:40:49,146\nAll right, I'm gonna ignore those.\n\n740\n00:40:49,146 --> 00:40:51,130\nThat's it clearing out.\n\n741\n00:40:51,130 --> 00:40:54,200\nAnd then I'm gonna turn it on, and let me\ngo back here and clear this one out, too.\n\n742\n00:40:54,200 --> 00:40:56,000\nAll right.\n\n743\n00:40:56,000 --> 00:40:56,500\nThere we go.\n\n744\n00:40:57,770 --> 00:41:02,540\nSo when I turn that interface back on,\nthe fa1/0 interface,\n\n745\n00:41:02,540 --> 00:41:06,080\nwhen it comes up that 192.168.2.0 network,\nit's gonna advertise out, right?\n\n746\n00:41:06,080 --> 00:41:10,500\nSo we can see up here we're it\nlost a route to 192.168.2.0.\n\n747\n00:41:10,500 --> 00:41:14,240\nNow it's coming back online and\nhere it is, table default.\n\n748\n00:41:14,240 --> 00:41:15,280\nWe're putting one in.\n\n749\n00:41:15,280 --> 00:41:18,580\nAnd see how it says do\nadvertise out serial 2/0.\n\n750\n00:41:18,580 --> 00:41:20,930\nSo it's telling you go ahead and\nadvertise out.\n\n751\n00:41:20,930 --> 00:41:25,310\nAnd it should do the same thing\non the fa1/0 interface, and so\n\n752\n00:41:25,310 --> 00:41:28,540\nI'm just kinda looking here.\n\n753\n00:41:28,540 --> 00:41:31,840\nIt's starting to pick up some other\nroutes and so it's basically learning and\n\n754\n00:41:31,840 --> 00:41:32,420\ncommunicating.\n\n755\n00:41:32,420 --> 00:41:35,030\nI'm gonna jump over to router 1 because\nthat's where our real problem is.\n\n756\n00:41:35,030 --> 00:41:36,800\nAll right, so here.\n\n757\n00:41:36,800 --> 00:41:41,080\nSo here it shows us as we\nstart to learn these things.\n\n758\n00:41:41,080 --> 00:41:43,220\nAnd see how it's learning 192.168.3.0/24?\n\n759\n00:41:43,220 --> 00:41:46,880\nAnd it doesn't even have\nan entry in here for\n\n760\n00:41:46,880 --> 00:41:51,760\n192.168.2.0 so it's not even receiving\nthat advertisement from the other side\n\n761\n00:41:51,760 --> 00:41:56,370\nwhich means router 3 never sent it out or\nif it did it got pruned off somehow.\n\n762\n00:41:56,370 --> 00:41:59,580\nAnd I do see the do\nadvertise out serial 2/0.\n\n763\n00:41:59,580 --> 00:42:03,440\n>> Hey Matt, hit enter a couple\nof times for us to see that.\n\n764\n00:42:03,440 --> 00:42:04,930\n>> Oh, sorry.\n\n765\n00:42:04,930 --> 00:42:06,100\nThere we go.\n\n766\n00:42:06,100 --> 00:42:08,790\nSo it does say,\nlike do advertise out serial 2/0.\n\n767\n00:42:08,790 --> 00:42:13,017\nBut I'm never seeing a advertise\nit out fa, what is it?\n\n768\n00:42:13,017 --> 00:42:15,630\nFA0/0, whatever interface that is.\n\n769\n00:42:17,360 --> 00:42:18,500\nWhatever this interface is here.\n\n770\n00:42:18,500 --> 00:42:21,068\nSo I'm not seeing that one\ndesignated as being advertised out.\n\n771\n00:42:21,068 --> 00:42:24,390\nNow why is that?\n\n772\n00:42:24,390 --> 00:42:26,720\nAnd the only reason I can think,\nis that line down?\n\n773\n00:42:28,170 --> 00:42:31,980\n>> Is it a split horizon?\n\n774\n00:42:33,250 --> 00:42:35,100\n>> You know it could be split horizon,\nbut.\n\n775\n00:42:37,730 --> 00:42:39,750\nSo if you guys remember from\nthe earlier routing episode,\n\n776\n00:42:39,750 --> 00:42:44,480\nsplit horizon is a rule that says never\nadvertise a route at an interface\n\n777\n00:42:44,480 --> 00:42:46,840\nthat's the same interface\nyou learned the route from.\n\n778\n00:42:46,840 --> 00:42:47,430\nRight.\n\n779\n00:42:47,430 --> 00:42:49,800\nBut in this case,\nwe're the ones originating the route.\n\n780\n00:42:49,800 --> 00:42:53,966\nWe're the ones originating\nthe 192.168.2.0 route.\n\n781\n00:42:53,966 --> 00:42:57,655\nAnd I think the problem here is\nthat EIGRP is not advertising\n\n782\n00:42:57,655 --> 00:42:59,135\non a secondary interface.\n\n783\n00:42:59,135 --> 00:43:02,495\nSo let's go one step further and\ntake that interface out of the equation.\n\n784\n00:43:02,495 --> 00:43:05,095\nSo we've got this fa0/0 interface.\n\n785\n00:43:05,095 --> 00:43:07,105\nWe can use that one instead or fa1/1.\n\n786\n00:43:07,105 --> 00:43:10,895\nWe got a couple of them floating around.\n\n787\n00:43:10,895 --> 00:43:14,920\nWe'll try 0/0 and well, I guess that\nthere's nothing plugged into it.\n\n788\n00:43:14,920 --> 00:43:16,147\n>> Yeah.\n>> [LAUGH] Let's see if we can\n\n789\n00:43:16,147 --> 00:43:17,154\nbring that one online.\n\n790\n00:43:25,060 --> 00:43:26,012\nIt went up.\n\n791\n00:43:30,376 --> 00:43:32,373\nAll right, so let's go.\n\n792\n00:43:32,373 --> 00:43:37,109\n[LAUGH]\n>> Let's see how mad I\n\n793\n00:43:37,109 --> 00:43:38,392\ncan make this thing at me.\n\n794\n00:43:43,524 --> 00:43:46,170\nNow I've got to remember which interface\nwe stuck that secondary address on.\n\n795\n00:43:46,170 --> 00:43:47,871\nI got to go and remove this.\n\n796\n00:43:57,937 --> 00:43:59,319\nAll right.\n\n797\n00:43:59,319 --> 00:44:04,519\nAnd then let's go to this one.\n\n798\n00:44:04,519 --> 00:44:08,792\nAnd instead of a secondary I can just\nadd it as the primary on this one.\n\n799\n00:44:15,037 --> 00:44:17,198\nThere we go, all right.\n\n800\n00:44:17,198 --> 00:44:23,551\nSo, now I've got this 192.168.2.0 up and\nnotice here on my list it shows\n\n801\n00:44:23,551 --> 00:44:29,009\nthat it is do advertise out serial 2/0 but\nit does not say that it, so,\n\n802\n00:44:29,009 --> 00:44:34,270\nwe're bumping into a scenario where\nwe're not advertising it out.\n\n803\n00:44:34,270 --> 00:44:36,340\nAnd I'm not entirely sure why that is.\n\n804\n00:44:36,340 --> 00:44:38,580\nWhy would we not advertise that out?\n\n805\n00:44:38,580 --> 00:44:40,900\nSo, there's a handful of rules\nthat we have to remember, right?\n\n806\n00:44:40,900 --> 00:44:44,500\nSplit horizon, so that stops us form\nadvertising a route at the same interface.\n\n807\n00:44:44,500 --> 00:44:47,600\nIf our advertised distance is\n\n808\n00:44:47,600 --> 00:44:51,720\nhigher than the feasible distance\nof a route that's coming in.\n\n809\n00:44:51,720 --> 00:44:54,800\nBut in our case that shouldn't be\nbecause we're directly connected.\n\n810\n00:44:54,800 --> 00:44:58,500\nOur advertised distance is pretty\nlow because it's directly connected.\n\n811\n00:44:58,500 --> 00:44:59,720\nThat's pretty much as\nlow as we can get it.\n\n812\n00:44:59,720 --> 00:45:00,340\n>> Right.\n\n813\n00:45:00,340 --> 00:45:03,970\n>> So I'm not sure why it's not\nadvertising out that one and\n\n814\n00:45:03,970 --> 00:45:07,452\nI don't think we have any\nspecial configuration.\n\n815\n00:45:07,452 --> 00:45:09,360\nLet me just look at my\nconfiguration real quick.\n\n816\n00:45:09,360 --> 00:45:12,190\nMake sure I don't have anything\nweird in here that would stop it.\n\n817\n00:45:12,190 --> 00:45:16,160\nIf not, I'll hunt it down during\nthe break and figure it out.\n\n818\n00:45:18,990 --> 00:45:19,910\nBut, all right so we got 192.168.\n\n819\n00:45:19,910 --> 00:45:28,270\nOh wait a minute, we've got some\nduplicate IPs going on here.\n\n820\n00:45:28,270 --> 00:45:29,249\nOh no.\nSorry that's 172.\n\n821\n00:45:29,249 --> 00:45:31,340\n>> Yeah.\n>> You don't look at all the octets and\n\n822\n00:45:31,340 --> 00:45:33,560\nyou think you have a duplicate.\n\n823\n00:45:33,560 --> 00:45:37,660\nSo we got normal IPs there, and\n\n824\n00:45:37,660 --> 00:45:42,640\nour serial interfaces are good.\n\n825\n00:45:42,640 --> 00:45:44,040\n>> EIGRP is good.\n\n826\n00:45:44,040 --> 00:45:45,750\n>> Advertised here in\nthe network statement.\n\n827\n00:45:48,690 --> 00:45:51,750\n>> It's not our discontiguous network,\nis it?\n\n828\n00:45:51,750 --> 00:45:52,890\n>> It shouldn't matter.\n\n829\n00:45:52,890 --> 00:45:53,840\n>> Yeah, it shouldn't.\n\n830\n00:45:53,840 --> 00:45:56,190\n>> Not for a network that's\nfollowing the classical rule.\n\n831\n00:45:56,190 --> 00:45:58,382\n>> Yeah.\n>> So yeah I'm not sure,\n\n832\n00:45:58,382 --> 00:46:00,250\nthat is a strange one.\n\n833\n00:46:00,250 --> 00:46:04,184\nI guess we could clear\n\n834\n00:46:04,184 --> 00:46:09,001\nEIGRP on all the routers.\n\n835\n00:46:12,381 --> 00:46:14,051\nAnd just cause like a full.\n\n836\n00:46:16,676 --> 00:46:17,557\n>> Wow.\n\n837\n00:46:17,557 --> 00:46:18,560\n>> Yeah now the debugs\n>> [LAUGH]\n\n838\n00:46:18,560 --> 00:46:19,430\n>> Really start pulling through,\n\n839\n00:46:19,430 --> 00:46:22,330\nis that starts slowing everything\nthat's changing, right?\n\n840\n00:46:22,330 --> 00:46:24,690\nSo what should happen is\nall of our routes reset,\n\n841\n00:46:24,690 --> 00:46:26,290\nwe change what we're advertising out.\n\n842\n00:46:26,290 --> 00:46:28,260\nSo you'll see these\ndifferent things happening.\n\n843\n00:46:28,260 --> 00:46:31,670\nYou'll see up here,\nwhere we advertise our routes,\n\n844\n00:46:31,670 --> 00:46:33,390\nthe stuff that we've got plugged in.\n\n845\n00:46:33,390 --> 00:46:35,335\nAnd so you see here where\nit's advertising those out.\n\n846\n00:46:35,335 --> 00:46:36,970\nAnd\n>> Someone's doing\n\n847\n00:46:36,970 --> 00:46:38,210\nit though the serial interface.\n\n848\n00:46:38,210 --> 00:46:42,820\n>> Yeah, it looks like this router's just\nnot wanting to advertise out that other\n\n849\n00:46:42,820 --> 00:46:43,700\n>> Fast ethernet interface.\n\n850\n00:46:43,700 --> 00:46:45,510\n>> Fast ethernet interface.\n\n851\n00:46:45,510 --> 00:46:46,990\nWhich is strange.\n\n852\n00:46:48,560 --> 00:46:50,430\nLet's go take a look at\nthat interface again.\n\n853\n00:46:50,430 --> 00:46:51,000\n>> Yeah.\n\n854\n00:46:51,000 --> 00:46:53,886\nActually nothing's advertising out\nwith that fast ethernet interface.\n\n855\n00:46:53,886 --> 00:46:57,766\n>> Yeah, I didn't see anything\nstrange on that interface, but\n\n856\n00:46:57,766 --> 00:47:01,210\nlooking at it here,\nthat's the fa0/1 interface.\n\n857\n00:47:01,210 --> 00:47:03,830\nSpeed auto, duplex auto.\n\n858\n00:47:03,830 --> 00:47:04,500\nIt's got an IPv4 address.\n\n859\n00:47:04,500 --> 00:47:11,213\nIt does have an IPv6 address, but\nthat wouldn't stop EIGRP from running.\n\n860\n00:47:11,213 --> 00:47:16,120\n>> Yeah.\n>> Yeah nothing exceptional there and then\n\n861\n00:47:16,120 --> 00:47:17,370\nwe got our network statements in place.\n\n862\n00:47:17,370 --> 00:47:22,327\nYeah I don't see what would stop\nthat interface from doing it's job.\n\n863\n00:47:22,327 --> 00:47:25,085\n>> Yeah, yeah.\n\n864\n00:47:25,085 --> 00:47:31,195\n>> And you know here,\nwhen we look at that topology.\n\n865\n00:47:31,195 --> 00:47:33,635\nSee how I've got single routes for\neverything?\n\n866\n00:47:33,635 --> 00:47:37,680\nAt a minimum, router 1 should have double\nroutes for getting to this network.\n\n867\n00:47:37,680 --> 00:47:38,420\n>> Yeah.\n>> And this kind of leads\n\n868\n00:47:38,420 --> 00:47:42,895\nto our next topic, which was I don't want\nto, I do want to come back to this but\n\n869\n00:47:42,895 --> 00:47:46,140\nEIGRP does equal cost load balancing.\n\n870\n00:47:46,140 --> 00:47:46,700\n>> Right.\n>> So\n\n871\n00:47:46,700 --> 00:47:49,500\nif we have two routes to the same\ndestination with the same cost,\n\n872\n00:47:49,500 --> 00:47:50,810\nit will load balance.\n\n873\n00:47:50,810 --> 00:47:55,580\nWell router one could cross a 100\nmegabit line to get to this network.\n\n874\n00:47:55,580 --> 00:47:58,535\nOr it could cross this other 100\nmegabit line to get to the network.\n\n875\n00:47:58,535 --> 00:47:59,706\nThey're both 100 megabit.\n\n876\n00:47:59,706 --> 00:48:03,072\nThey'll have the same metric and\nso it'll load balance.\n\n877\n00:48:03,072 --> 00:48:06,449\nSo Assuming our network\nwas operating properly.\n\n878\n00:48:06,449 --> 00:48:09,662\nI should be seeing a nice clean,\n\n879\n00:48:09,662 --> 00:48:15,660\nload balanced links right here\nto get to the 172.16.3 network.\n\n880\n00:48:15,660 --> 00:48:17,820\nEven without my little\nmanipulation that I was doing.\n\n881\n00:48:17,820 --> 00:48:22,940\nBut when I look, i've got 172.16.3\nonly being learned one way.\n\n882\n00:48:22,940 --> 00:48:25,440\nVia 172.16.1.2.\n\n883\n00:48:25,440 --> 00:48:29,970\nWhich back here is this guy right here, so\nit looks like this link, we might have,\n\n884\n00:48:29,970 --> 00:48:31,570\nour cabling might be wrong.\n\n885\n00:48:31,570 --> 00:48:33,500\nSo we might be dealing\nwith a cabling issue.\n\n886\n00:48:33,500 --> 00:48:35,518\nLet me see if we can ping across this.\n\n887\n00:48:35,518 --> 00:48:39,400\nSo the 172.16.2 network\nseems to be my issue.\n\n888\n00:48:39,400 --> 00:48:44,770\nAnd we should have 2.1 and\n2.3, so let's go test that.\n\n889\n00:48:44,770 --> 00:48:51,450\nSo on router 3,\nI've got 172.16.2.3 right here.\n\n890\n00:48:51,450 --> 00:48:53,773\nIt says the interface is up.\n\n891\n00:48:58,564 --> 00:49:01,486\nAnd if I try and ping 172.16.2.1,\nit is not getting.\n\n892\n00:49:01,486 --> 00:49:04,580\nAll right, so we are more than likely\ndealing with some kind of cabling issue.\n\n893\n00:49:04,580 --> 00:49:06,160\n>> Yeah.\n>> So all these routers,\n\n894\n00:49:06,160 --> 00:49:07,690\nthey're sitting in a rack offscreen.\n\n895\n00:49:07,690 --> 00:49:10,850\nAnd we've got the various cables\nrun into switches, and it may be\n\n896\n00:49:10,850 --> 00:49:14,250\nthe ports are on the wrong VLAN or maybe\nthe cable's plugged into the wrong port.\n\n897\n00:49:14,250 --> 00:49:15,300\nSo we don't have connectivity there.\n\n898\n00:49:15,300 --> 00:49:17,882\nThat's why my network is not showing up.\n\n899\n00:49:17,882 --> 00:49:19,230\n>> [LAUGH]\n>> We could also have\n\n900\n00:49:19,230 --> 00:49:20,235\nunidirectional traffic.\n\n901\n00:49:20,235 --> 00:49:25,305\nI guess I can try pinging from\nthe other direction, which\n\n902\n00:49:25,305 --> 00:49:26,765\nwould be to ping that guy.\n\n903\n00:49:26,765 --> 00:49:28,440\n>> Oh!\n>> We do have unidirectional traffic,\n\n904\n00:49:28,440 --> 00:49:29,605\nall right.\n\n905\n00:49:29,605 --> 00:49:32,475\nOr, we learn the route, let's see.\n\n906\n00:49:32,475 --> 00:49:37,850\nOh we did, we're actually routing\nthat network via the other guy, so.\n\n907\n00:49:37,850 --> 00:49:42,110\nSo it's actually routing around\nthis way to get over to it.\n\n908\n00:49:42,110 --> 00:49:45,650\nWhich is odd that it would do that.\n\n909\n00:49:45,650 --> 00:49:52,148\nLook at that interface is\nadministratively down [CROSSTALK].\n\n910\n00:49:52,148 --> 00:49:53,820\nSo that particular link is shut down.\n\n911\n00:49:53,820 --> 00:49:55,130\nDid I shut that down earlier in the show?\n\n912\n00:49:55,130 --> 00:49:56,070\n>> You might have.\n\n913\n00:49:56,070 --> 00:49:56,570\nSometimes.\n\n914\n00:49:56,570 --> 00:49:58,510\nSometimes I shut these interfaces down and\nforget about it.\n\n915\n00:50:00,060 --> 00:50:01,489\n>> Let's see what happens here.\n\n916\n00:50:04,472 --> 00:50:06,190\nOop look at that.\n\n917\n00:50:06,190 --> 00:50:07,160\n>> There's some stuff.\n\n918\n00:50:07,160 --> 00:50:10,250\nThat would explain why we weren't\nseeing the advertisements.\n\n919\n00:50:10,250 --> 00:50:13,478\nKind of, so now I've done all\nsorts of mess on this thing.\n\n920\n00:50:13,478 --> 00:50:19,640\nAlright, so hopefully, let's just\ndo a show IP route here to verify.\n\n921\n00:50:19,640 --> 00:50:20,835\nI should have double routes.\n\n922\n00:50:20,835 --> 00:50:22,311\n>> Oh, there you go, yeah.\nThere you go. >> To this network.\n\n923\n00:50:22,311 --> 00:50:23,830\nAnd we do now, right.\n\n924\n00:50:23,830 --> 00:50:26,750\nSee how these two networks, this is,\nlet me get back to my diagram.\n\n925\n00:50:26,750 --> 00:50:28,400\nThat's this network down here.\n\n926\n00:50:28,400 --> 00:50:32,750\nRouter one has two ways to get to that\nnetwork down there because they're equal.\n\n927\n00:50:32,750 --> 00:50:37,415\nWhen I look here, the metric,\nthey both have the same metric.\n\n928\n00:50:37,415 --> 00:50:39,030\n2,172,416.\n\n929\n00:50:39,030 --> 00:50:41,930\nSo they both make it into the routing\ntable, we're now set up for\n\n930\n00:50:41,930 --> 00:50:43,440\nload balancing on it.\n\n931\n00:50:43,440 --> 00:50:45,996\nThe one that I was messing with, though-\n>> There you got.\n\n932\n00:50:45,996 --> 00:50:48,210\n>> Was the 192.168.2 network.\n\n933\n00:50:48,210 --> 00:50:53,290\nNow, I told the router that it's,\nit is plugged in on router 2, and then\n\n934\n00:50:53,290 --> 00:50:57,250\nI added a fake one over here on router 3,\nso it will see two different ways.\n\n935\n00:50:57,250 --> 00:51:02,430\nThey're equal right now, but I'm gonna\nmanipulate that to make them not equal.\n\n936\n00:51:02,430 --> 00:51:04,810\nYou can manipulate any of these values.\n\n937\n00:51:04,810 --> 00:51:06,200\nRight.\nIt's gonna look at the real values\n\n938\n00:51:06,200 --> 00:51:06,700\nby default.\n\n939\n00:51:06,700 --> 00:51:08,840\nBut sometimes we need to get in there and\ntweak them.\n\n940\n00:51:08,840 --> 00:51:13,920\nAnd one of the easiest ways to do that is,\nlike on router 3 here.\n\n941\n00:51:13,920 --> 00:51:15,250\n>> Oh, that's router 2.\n\n942\n00:51:15,250 --> 00:51:15,860\n>> That is router 2.\n\n943\n00:51:15,860 --> 00:51:16,770\nI don't know how that happened.\n\n944\n00:51:18,900 --> 00:51:20,322\nThank you, Ronnie.\n\n945\n00:51:20,322 --> 00:51:24,940\nAll right, so on that fake interface\nthis guy right, not that guy, this guy,\n\n946\n00:51:24,940 --> 00:51:27,280\nwhere I added that in and\nit's not actually connected.\n\n947\n00:51:27,280 --> 00:51:28,606\nI just kind of stuck that it on there.\n\n948\n00:51:28,606 --> 00:51:32,080\nRight.\nI'm gonna go in to that interface and\n\n949\n00:51:32,080 --> 00:51:33,860\nyou can use the bandwidth command.\n\n950\n00:51:33,860 --> 00:51:34,990\nThis is the easiest way\n>> Yeah.\n\n951\n00:51:34,990 --> 00:51:35,972\n>> To manipulate them.\n\n952\n00:51:35,972 --> 00:51:38,110\nThe bandwidth command does not actually,\n>> Yeah,\n\n953\n00:51:38,110 --> 00:51:39,830\n>> Change your bandwidth at all,\n\n954\n00:51:39,830 --> 00:51:43,990\nit just allows you to kind of\nmanipulate the system a bit.\n\n955\n00:51:43,990 --> 00:51:47,850\nThe bandwidth value it's\nset in kilobits and\n\n956\n00:51:47,850 --> 00:51:53,112\nthis is 100 megabit line and so the\ndefault is gonna be a 100,000 kilobits.\n\n957\n00:51:53,112 --> 00:51:53,890\nRight.\nWell,\n\n958\n00:51:53,890 --> 00:51:57,588\nI'm gonna change it to\nmake it 90,000 kilobits.\n\n959\n00:51:57,588 --> 00:51:58,515\nAll right.\n\n960\n00:51:58,515 --> 00:52:02,642\nSo instead of being 100 megabit line,\nnow it'll be a 90 megabit line.\n\n961\n00:52:02,642 --> 00:52:03,870\nAll right.\n\n962\n00:52:03,870 --> 00:52:06,400\nNow my line is still 100 megabit right.\n\n963\n00:52:06,400 --> 00:52:07,490\nThat didn't change.\n\n964\n00:52:07,490 --> 00:52:09,050\nBut notice what the router's doing.\n\n965\n00:52:09,050 --> 00:52:10,310\nIt's re-advertising.\n\n966\n00:52:10,310 --> 00:52:13,220\nThe metric for EIGRP changed.\n\n967\n00:52:13,220 --> 00:52:16,290\nIt changed because\nthe values are different.\n\n968\n00:52:16,290 --> 00:52:19,800\nAnd when it runs the dual formula, it's\ngonna come out with different numbers.\n\n969\n00:52:19,800 --> 00:52:20,480\nAll right.\n\n970\n00:52:20,480 --> 00:52:24,655\nThis line is no longer as attractive\nas the line on the other router.\n\n971\n00:52:24,655 --> 00:52:25,620\nRight.\n\n972\n00:52:25,620 --> 00:52:29,410\nBut, it is still a 100 megabit line,\nit'll still push 100 megabits of traffic.\n\n973\n00:52:29,410 --> 00:52:34,790\nThe bandwidth command simply manipulates\nthe routing protocols, that's all it does.\n\n974\n00:52:34,790 --> 00:52:37,180\n>> If you hit enter a couple of times so\nwe can see that line.\n\n975\n00:52:37,180 --> 00:52:40,540\nYou see where it says the routing\ntable is not updated through here.\n\n976\n00:52:42,080 --> 00:52:46,500\nSo, for us we're actually starting to\nsee some of that idea of the feasible\n\n977\n00:52:46,500 --> 00:52:49,120\nsuccessor and the other things too.\n\n978\n00:52:49,120 --> 00:52:53,020\n>> Yeah, you start getting [COUGH]\na couple little conflicts that we get.\n\n979\n00:52:53,020 --> 00:52:56,490\nAnd here it's telling us 172.16.2.1\nthat's the other router,\n\n980\n00:52:56,490 --> 00:52:58,840\nthe other router talking to us.\n\n981\n00:52:58,840 --> 00:53:03,170\nSo we're ignoring some routes\nthat are coming from them and so\n\n982\n00:53:03,170 --> 00:53:04,830\nthat's all being kinda processed.\n\n983\n00:53:04,830 --> 00:53:09,840\nLet's jump over to router 1 and\nwhen I do a show IP route, now before,\n\n984\n00:53:09,840 --> 00:53:15,540\nI had two routes to the 192.168.2.0\ncuz they had the same distance.\n\n985\n00:53:15,540 --> 00:53:18,450\nThe same feasible distance.\n\n986\n00:53:18,450 --> 00:53:21,674\nNow when I look, I've only got one router,\n\n987\n00:53:21,674 --> 00:53:26,654\nthe 192.168.0.0, but\nif I do a show IP EIGRP topology.\n\n988\n00:53:28,611 --> 00:53:29,830\nThere we go.\n\n989\n00:53:29,830 --> 00:53:34,530\nI can see [COUGH] that, oh,\nit pruned off the other one.\n\n990\n00:53:34,530 --> 00:53:36,219\nYeah, I made that distance too high.\n\n991\n00:53:36,219 --> 00:53:38,270\nSo [COUGH] anyhow.\n\n992\n00:53:38,270 --> 00:53:41,690\nSo we just have the one successor,\nthe feasible one has been trimmed off.\n\n993\n00:53:41,690 --> 00:53:42,190\nShoot.\n\n994\n00:53:43,290 --> 00:53:46,220\nIt was sort of the point of the whole\nexample and then it pruned it off.\n\n995\n00:53:46,220 --> 00:53:48,110\nSo let me see.\n\n996\n00:53:48,110 --> 00:53:52,720\nIf I make it really low,\nit should pop back in.\n\n997\n00:53:52,720 --> 00:53:56,750\nSo if we take its bandwidth and let's see,\n\n998\n00:53:56,750 --> 00:53:59,750\nI don't wanna make it\ntoo big that it wins.\n\n999\n00:53:59,750 --> 00:54:04,897\nLet's make it as close to 100 megabit that\nwe can get so it's just a little bit off.\n\n1000\n00:54:09,895 --> 00:54:11,967\nAnd then see how that works for us.\n\n1001\n00:54:15,899 --> 00:54:18,290\n>> There you go.\n\n1002\n00:54:18,290 --> 00:54:18,810\n>> There we go.\nAll right.\n\n1003\n00:54:18,810 --> 00:54:22,020\nYou know I made it close enough that\nthe formula just rounded it and so\n\n1004\n00:54:22,020 --> 00:54:24,220\nwe got them both in there, shoot.\n\n1005\n00:54:24,220 --> 00:54:25,130\nI'll have to tweak it.\n\n1006\n00:54:25,130 --> 00:54:26,760\nLet me tweak it during the break and\n\n1007\n00:54:26,760 --> 00:54:30,750\nsee if I can find that sweet spot where I\ndon't break the advertised distance rule.\n\n1008\n00:54:30,750 --> 00:54:35,650\nSo, the trick here is I'm trying to\ncreate this pseudo-redundant link\n\n1009\n00:54:35,650 --> 00:54:40,350\nwithout actually creating a loop, without\nviolating the rules on the network.\n\n1010\n00:54:40,350 --> 00:54:42,360\nIt's a little tricky to\nfind that sweet spot,\n\n1011\n00:54:42,360 --> 00:54:45,810\nso I'll tweak it a little bit during\nthe break, and we can look that up then.\n\n1012\n00:54:45,810 --> 00:54:48,460\nBut you guys kind of start to\nsee that the routes make it in,\n\n1013\n00:54:48,460 --> 00:54:52,340\nit is picking the one available,\nit is doing loop prevention.\n\n1014\n00:54:52,340 --> 00:54:55,720\nAnd if there is a tie, it'll load balance\nyou know as long as it's not a loop.\n\n1015\n00:54:55,720 --> 00:54:57,890\nIt'll load balance and\nyou get the benefit of both those lines.\n\n1016\n00:54:57,890 --> 00:54:59,130\nSo pretty cool stuff.\n\n1017\n00:54:59,130 --> 00:55:00,990\nWithout really much configuration.\n\n1018\n00:55:00,990 --> 00:55:04,180\nMost of the configuration I've done\nhere was me trying to break it.\n\n1019\n00:55:04,180 --> 00:55:08,300\nBut you really turn the EIGRP on and\nit just runs.\n\n1020\n00:55:08,300 --> 00:55:08,980\n>> Sounds good.\n\n1021\n00:55:08,980 --> 00:55:10,970\n>> All right, well let's stop here and\ntake a break.\n\n1022\n00:55:10,970 --> 00:55:14,280\nWhen we get back I'll manipulate that\na little bit, see what I can achieve and\n\n1023\n00:55:14,280 --> 00:55:15,670\nthen we got a few other little bells and\n\n1024\n00:55:15,670 --> 00:55:18,352\nwhistles to talk about,\nbefore we wrap EIGRP.\n\n1025\n00:55:18,352 --> 00:55:27,654\n[SOUND].\n\n1026\n00:55:27,654 --> 00:55:29,400\nAlright welcome back everybody.\n\n1027\n00:55:29,400 --> 00:55:31,620\nSo I had to tweak my bandwidth numbers.\n\n1028\n00:55:31,620 --> 00:55:33,790\nBasically you know we had\nthe 100 megabit line and\n\n1029\n00:55:33,790 --> 00:55:36,130\nwhen I took the other\none down to 90 megabit,\n\n1030\n00:55:36,130 --> 00:55:39,560\nit made the advertised distance\nlower than that feasible distance.\n\n1031\n00:55:39,560 --> 00:55:41,720\nI broke the rules, so\nI had to kind of finagle it, and\n\n1032\n00:55:41,720 --> 00:55:43,850\nmy sweet spot turned out\nto be like 99 megabit.\n\n1033\n00:55:43,850 --> 00:55:46,010\nWhen I got that set,\nnow they're both in there.\n\n1034\n00:55:46,010 --> 00:55:47,810\nSo let's take a look at this now.\n\n1035\n00:55:47,810 --> 00:55:54,770\nWhen I look at router one's routing table,\nI can see one route for 192.168.2.0.\n\n1036\n00:55:54,770 --> 00:55:57,564\nThere it is.\n\n1037\n00:55:57,564 --> 00:56:04,353\nBut if I do a show ip eigrp topology,\nI can see that 192.168.2.0\n\n1038\n00:56:04,353 --> 00:56:09,441\nactually has Two routes,\nthere's two routes in here.\n\n1039\n00:56:09,441 --> 00:56:13,690\nAnd that one is the successor and\nthe other one is the feasible successor.\n\n1040\n00:56:13,690 --> 00:56:16,080\nSee how says one successor versus two.\n\n1041\n00:56:16,080 --> 00:56:17,609\nRight?\nIf it's load balancing there would be\n\n1042\n00:56:17,609 --> 00:56:18,730\ntwo successors.\n\n1043\n00:56:18,730 --> 00:56:19,790\nSo there's one.\n\n1044\n00:56:19,790 --> 00:56:22,070\nThe feasible distance of\nthe winner was 30,720.\n\n1045\n00:56:22,070 --> 00:56:24,520\nThat's this route.\n\n1046\n00:56:24,520 --> 00:56:27,980\nBut then it's keeping this\nother route in here saying,\n\n1047\n00:56:27,980 --> 00:56:29,110\nhey, I need to remember this guy.\n\n1048\n00:56:29,110 --> 00:56:30,660\nThis guy is second place.\n\n1049\n00:56:30,660 --> 00:56:32,360\nThis is my feasible successor.\n\n1050\n00:56:32,360 --> 00:56:35,330\nAnd I can see the advertised\ndistance right here and\n\n1051\n00:56:35,330 --> 00:56:37,550\nthe feasible distance which is just\na bit higher than the other one.\n\n1052\n00:56:37,550 --> 00:56:38,910\nBecause they're pretty close.\n\n1053\n00:56:38,910 --> 00:56:42,257\nA hundred megabit versus 99 megabits.\n\n1054\n00:56:42,257 --> 00:56:44,500\nSo those are the ones that\nare kinda showing up.\n\n1055\n00:56:44,500 --> 00:56:46,310\nSo that's what we expect to see.\n\n1056\n00:56:46,310 --> 00:56:46,860\n>> Yeah.\n\n1057\n00:56:46,860 --> 00:56:52,140\nAnd this is really important, especially\nwhen we face the CCNA exam here.\n\n1058\n00:56:52,140 --> 00:56:54,650\nYou may be seeing where\nthere's multiple routes here.\n\n1059\n00:56:54,650 --> 00:56:57,760\nAnd they may saying why isn't this\nparticular route gonna ever become\n\n1060\n00:56:57,760 --> 00:56:59,580\nthe feasible successor?\n\n1061\n00:56:59,580 --> 00:57:03,130\nRemember that the idea of the feasible\nsuccessor, the advertised distance\n\n1062\n00:57:03,130 --> 00:57:07,531\nmust be lower then the feasible\ndistance of the successor itself.\n\n1063\n00:57:07,531 --> 00:57:08,210\nAnd that is the key.\n\n1064\n00:57:08,210 --> 00:57:12,410\nSo you actually see multiple routes, you\ntake a look at the advertisements that's\n\n1065\n00:57:12,410 --> 00:57:15,060\nhigher than that,\nit's never gonna have that chance.\n\n1066\n00:57:15,060 --> 00:57:16,670\nSo make sure you key in on that.\n\n1067\n00:57:16,670 --> 00:57:20,280\n>> Now if there is no feasible successor,\nif the router just booted up.\n\n1068\n00:57:20,280 --> 00:57:23,140\nOr if it lost it's route,\n\n1069\n00:57:23,140 --> 00:57:26,100\nthen that other guy who had a really high\nadvertised distance, well that's not so\n\n1070\n00:57:26,100 --> 00:57:29,152\nhigh anymore, and so now, now that pops,\nand maybe it was too low.\n\n1071\n00:57:29,152 --> 00:57:30,542\nRight?\nSo the, whatever.\n\n1072\n00:57:30,542 --> 00:57:34,218\nSo anyhow, it'll pop in because\nthere's nobody to bump out.\n\n1073\n00:57:34,218 --> 00:57:36,745\nRight?\nSo they do reappear down the road if\n\n1074\n00:57:36,745 --> 00:57:38,727\nthere's a network failure so\nnot like they're gone forever.\n\n1075\n00:57:38,727 --> 00:57:42,895\nAll right, now what if I did want\nto load balance across those lines?\n\n1076\n00:57:42,895 --> 00:57:44,485\nThey're close enough.\n\n1077\n00:57:44,485 --> 00:57:46,547\nMaybe I want to load balance across them.\n\n1078\n00:57:46,547 --> 00:57:49,949\nWell, in other routing protocols\nlike OSPF, tough luck.\n\n1079\n00:57:49,949 --> 00:57:50,957\n>> Yeah.\n>> Right.\n\n1080\n00:57:50,957 --> 00:57:56,227\nBut in EIGRP,\nyou can do unequal cost load balancing,\n\n1081\n00:57:56,227 --> 00:57:59,597\nwhere you can take it and\ntell it to load balance across these two.\n\n1082\n00:57:59,597 --> 00:58:02,297\nYou do it by manipulating\nwhat's called variance.\n\n1083\n00:58:02,297 --> 00:58:04,657\nWhen it does load balancing,\nit takes this number, right?\n\n1084\n00:58:04,657 --> 00:58:07,587\nThe feasible distance, and\nit multiplies it by one.\n\n1085\n00:58:07,587 --> 00:58:09,360\nThe default variance is one.\n\n1086\n00:58:09,360 --> 00:58:11,340\nAnd so it multiplies by one,\nit comes up with the same number.\n\n1087\n00:58:11,340 --> 00:58:13,870\nAnd it says any other route\n\n1088\n00:58:13,870 --> 00:58:17,070\nwith a distance less than this\nnumber will load balance.\n\n1089\n00:58:17,070 --> 00:58:18,920\nRight?\nWell, if we multiply it by one,\n\n1090\n00:58:18,920 --> 00:58:23,220\nany other route with a feasible distance\nlower than 30,720 will load balance.\n\n1091\n00:58:23,220 --> 00:58:25,860\nWell there are no other ones,\nit's just this one that's higher.\n\n1092\n00:58:25,860 --> 00:58:29,130\nSo, we can bump that\nvariance up to like two.\n\n1093\n00:58:29,130 --> 00:58:31,660\nIt's gotta be a whole number,\nit can't be a fraction.\n\n1094\n00:58:31,660 --> 00:58:35,515\nSo if I bump it up to two it would\nmultiply this number by two becoming\n\n1095\n00:58:35,515 --> 00:58:37,890\n61,440 I think is my math there.\n\n1096\n00:58:39,590 --> 00:58:44,640\nAnd so then it would say anybody with a\ndistance less than that we'd load balance,\n\n1097\n00:58:44,640 --> 00:58:45,865\nand then both these guys would match.\n\n1098\n00:58:45,865 --> 00:58:47,835\nIt's pretty easy to manipulate that.\n\n1099\n00:58:47,835 --> 00:58:51,815\nWe just get into our configuration,\nwe get back into EIGRP,\n\n1100\n00:58:51,815 --> 00:58:55,445\nand we say variance followed by a number.\n\n1101\n00:58:55,445 --> 00:58:58,385\nVariance 1 is the default, variance 2,\n\n1102\n00:58:58,385 --> 00:59:02,405\nthat's gonna cause a full\nre-calculation right there.\n\n1103\n00:59:02,405 --> 00:59:06,524\nAnd now, when I look at my routing table,\n\n1104\n00:59:06,524 --> 00:59:11,588\nI can see two routes for 192.168.2.0,\n\n1105\n00:59:11,588 --> 00:59:15,373\nand notice the differing distances.\n\n1106\n00:59:15,373 --> 00:59:15,998\nRight.\n\n1107\n00:59:15,998 --> 00:59:18,998\n30,720 versus 30,976.\n\n1108\n00:59:18,998 --> 00:59:21,165\nBecause I manipulate a variance,\nthey're both in there.\n\n1109\n00:59:21,165 --> 00:59:21,831\n>> Yep.\n\n1110\n00:59:21,831 --> 00:59:25,803\nAnd we go back to that show,\nEIGRP topology,\n\n1111\n00:59:25,803 --> 00:59:31,285\nwe should see where it now shows\nboth of the successors again.\n\n1112\n00:59:31,285 --> 00:59:34,773\nSo notice two successors\ninstead of a single one here?\n\n1113\n00:59:34,773 --> 00:59:37,000\nAnd the other thing I want to\npoint out here on this topology,\n\n1114\n00:59:37,000 --> 00:59:40,240\nmake sure you know those show commands\nbecause these are going to be key.\n\n1115\n00:59:40,240 --> 00:59:43,370\nNotice the letter at the beginning though,\npassive.\n\n1116\n00:59:43,370 --> 00:59:47,100\nA lot of times you and I might actually\ntake a look at the code up at the top and\n\n1117\n00:59:47,100 --> 00:59:50,000\nthink that active is\nactually the one to go with.\n\n1118\n00:59:50,000 --> 00:59:50,590\nRight?\n\n1119\n00:59:50,590 --> 00:59:53,990\nThe active is, hey the active\nis always better than passive.\n\n1120\n00:59:53,990 --> 00:59:55,920\nIn EIGRP it's not.\n\n1121\n00:59:55,920 --> 00:59:58,590\nActive means that at this point here, hey,\n\n1122\n00:59:58,590 --> 01:00:01,750\nwe're always calculating\nthrough the dual algorithm.\n\n1123\n01:00:01,750 --> 01:00:03,870\nPassive is what we want to see here.\n\n1124\n01:00:03,870 --> 01:00:07,290\nSo that's where the good\nactually is in this topology.\n\n1125\n01:00:07,290 --> 01:00:08,650\n>> Yeah usually active is a bad thing.\n\n1126\n01:00:08,650 --> 01:00:11,290\n>> Yeah.\n>> It means we're actively seeking some\n\n1127\n01:00:11,290 --> 01:00:12,670\nroute to this network, right?\n\n1128\n01:00:12,670 --> 01:00:16,365\nSo it usually means, either we just\nbooted up, or we lost a route.\n\n1129\n01:00:16,365 --> 01:00:17,797\nThere's a failure on the network.\n\n1130\n01:00:17,797 --> 01:00:19,135\nRight?\nSo we don't want to see active,\n\n1131\n01:00:19,135 --> 01:00:21,075\nwe do want to see passive.\n\n1132\n01:00:21,075 --> 01:00:22,970\nEIGRP works on triggered updates.\n\n1133\n01:00:22,970 --> 01:00:24,775\n>> Yeah.\n>> Once you learn about a route,\n\n1134\n01:00:24,775 --> 01:00:27,225\nit's not constantly\nadvertising that route to you.\n\n1135\n01:00:27,225 --> 01:00:28,627\nIt's waiting to see if a change happens.\n\n1136\n01:00:28,627 --> 01:00:30,877\nWhen a change happens,\nthen it advertises it again.\n\n1137\n01:00:30,877 --> 01:00:33,827\nIt's got a timer.\n\n1138\n01:00:33,827 --> 01:00:35,637\nDo you know what the timer sets,\nit's like 30 minutes or\n\n1139\n01:00:35,637 --> 01:00:38,537\nsomething where if nothing happens for\na long enough period,\n\n1140\n01:00:38,537 --> 01:00:41,157\nit goes ahead and does an advertisement\njust to be on the safe side.\n\n1141\n01:00:41,157 --> 01:00:43,447\nBut for the most part,\nit's doing triggered updates.\n\n1142\n01:00:43,447 --> 01:00:45,337\nWhen a change happens, we advertise.\n\n1143\n01:00:47,409 --> 01:00:49,857\nAll right, let's see,\nwhat else do we have?\n\n1144\n01:00:49,857 --> 01:00:53,750\n>> We need, why does that look, oh.\n\n1145\n01:00:53,750 --> 01:00:54,310\nWe want to make\n\n1146\n01:00:54,310 --> 01:00:57,870\nsure that we remind everybody of\nthe administrative distance again.\n\n1147\n01:00:57,870 --> 01:01:00,747\nOkay?\nSo don't forget that the same rules apply\n\n1148\n01:01:00,747 --> 01:01:04,962\nto every single routing table that\nif we were to actually run multiple\n\n1149\n01:01:04,962 --> 01:01:07,288\nrouting protocols, OSPF and EIGRP,\n\n1150\n01:01:07,288 --> 01:01:11,790\nwell only the best possible route\ngets into the routing table.\n\n1151\n01:01:11,790 --> 01:01:13,611\nAnd so if you have both of those running,\n\n1152\n01:01:13,611 --> 01:01:16,890\nwe actually default at this point\nhere to the administrative distance.\n\n1153\n01:01:16,890 --> 01:01:18,770\nAnd remember that\nthe administrative distance for\n\n1154\n01:01:18,770 --> 01:01:22,030\nEIGRP, at least internally,\nis gonna be 90?\n\n1155\n01:01:22,030 --> 01:01:22,808\n>> 90.\n>> 90.\n\n1156\n01:01:22,808 --> 01:01:25,910\nAnd you actually see that there\nare other ones out there but\n\n1157\n01:01:25,910 --> 01:01:29,240\nwe won't get into that at this point.\n\n1158\n01:01:29,240 --> 01:01:31,130\n>> Yeah, so like OSPF is 110, RIP is 120.\n\n1159\n01:01:31,130 --> 01:01:34,510\nBecause EIGRP is 90, it's lower than\nthe others, it's gonna be preferred.\n\n1160\n01:01:34,510 --> 01:01:38,210\nIt's gonna take over and I think we\nshowed that in the OSPF episode.\n\n1161\n01:01:38,210 --> 01:01:40,990\nBut yeah so that's one to keep in mind.\n\n1162\n01:01:40,990 --> 01:01:45,540\nAnother thing to kind of\nremember on the objectives,\n\n1163\n01:01:45,540 --> 01:01:47,260\nCisco lists several things, right?\n\n1164\n01:01:47,260 --> 01:01:49,810\nSo metrics, feasibility,\nwe talked about that.\n\n1165\n01:01:49,810 --> 01:01:51,745\nThey specifically call out router IDs.\n\n1166\n01:01:51,745 --> 01:01:52,850\nRight?\n\n1167\n01:01:52,850 --> 01:01:55,940\nIn OSPF router IDs are very important\n\n1168\n01:01:55,940 --> 01:01:58,520\nbecause you know about every\nrouter that's out there.\n\n1169\n01:01:58,520 --> 01:02:02,900\nSo a router needs to have one ID on\nall of its interfaces at the same ID.\n\n1170\n01:02:02,900 --> 01:02:05,450\nIn EIGRP, we don't talk to all of those so\n\n1171\n01:02:05,450 --> 01:02:08,340\nwe only talk to the neighbors\nwe're directly connected to.\n\n1172\n01:02:08,340 --> 01:02:11,450\nAs a result, the router IDs\nare just set to the interface IPs.\n\n1173\n01:02:11,450 --> 01:02:15,200\nSo it's not like in OSPF where you\nhave to manipulate router IDs.\n\n1174\n01:02:15,200 --> 01:02:18,650\nIn EIGRP they're just whatever\nthe interface IP is and that's it.\n\n1175\n01:02:18,650 --> 01:02:21,240\nAnd there's not really\nany reason to change it.\n\n1176\n01:02:21,240 --> 01:02:25,890\nIf I do a show IP EIGRP neighbor, right.\n\n1177\n01:02:25,890 --> 01:02:29,050\nWhen we look at the neighbors,\nyou've got where it just lists an address.\n\n1178\n01:02:29,050 --> 01:02:30,980\nSee how it doesn't even\nsay like router ID?\n\n1179\n01:02:30,980 --> 01:02:33,470\nThis is just the IP address of\nthe router that we talk to.\n\n1180\n01:02:33,470 --> 01:02:35,380\nThese two could be the same router.\n\n1181\n01:02:35,380 --> 01:02:38,870\nWe don't know because we just talk\nto the interfaces and that's it.\n\n1182\n01:02:38,870 --> 01:02:46,315\nBut if you do a show IP protocols, you'll\nsee in here where it lists router ID.\n\n1183\n01:02:46,315 --> 01:02:47,790\nOkay?\nIt calculates a router ID\n\n1184\n01:02:47,790 --> 01:02:48,910\njust like OSPF does.\n\n1185\n01:02:48,910 --> 01:02:54,280\nThe highest IP on an interface at the time\nthat EIGRP starts becomes your router ID\n\n1186\n01:02:54,280 --> 01:02:57,063\nbut EIGRP does not rely\non it like OSPF does.\n\n1187\n01:02:57,063 --> 01:02:59,530\nIt's really just using\nthose interface addresses.\n\n1188\n01:02:59,530 --> 01:03:02,950\nSo when we see these neighbors, that's\nnot even their router ID necessarily;\n\n1189\n01:03:02,950 --> 01:03:05,170\nit's just the IP on that interface.\n\n1190\n01:03:05,170 --> 01:03:07,800\nSo just be aware that router IDs exist,\nyou can manipulate it but\n\n1191\n01:03:07,800 --> 01:03:09,295\nthere's really not any reason to.\n\n1192\n01:03:09,295 --> 01:03:10,410\n>> Yep.\n\n1193\n01:03:10,410 --> 01:03:12,590\nBe careful here on this as well.\n\n1194\n01:03:12,590 --> 01:03:14,710\nExpect a question on this on the exam.\n\n1195\n01:03:14,710 --> 01:03:17,370\nWhen it says, hey,\non the router with this router ID.\n\n1196\n01:03:17,370 --> 01:03:19,270\nYou got to know how to find it.\n\n1197\n01:03:19,270 --> 01:03:24,515\nIf they ask you to show the, or which\nroute is it, or what routes are actually\n\n1198\n01:03:24,515 --> 01:03:28,135\nbeing advertised by this router with this\nrouter ID, you gotta be able to find it,\n\n1199\n01:03:28,135 --> 01:03:31,687\nso showing the show IP protocols\nis going to be helpful for you.\n\n1200\n01:03:31,687 --> 01:03:36,800\n>> All right Ronnie,\nwe're starting to wind down on topics.\n\n1201\n01:03:36,800 --> 01:03:41,545\nSo let's knock an easy one out here,\npassive interfaces, all right?\n\n1202\n01:03:41,545 --> 01:03:44,346\nWhen we have a network,\nlet me bring our topology back up.\n\n1203\n01:03:44,346 --> 01:03:45,825\nAll right.\n\n1204\n01:03:45,825 --> 01:03:48,050\nSo, when we look at this topology here.\n\n1205\n01:03:48,050 --> 01:03:49,370\nWe've got our routers and\n\n1206\n01:03:49,370 --> 01:03:52,470\nour routers are connected via these\nlengths in between each other, right?\n\n1207\n01:03:52,470 --> 01:03:54,140\nThose are pretty important links.\n\n1208\n01:03:54,140 --> 01:03:57,000\nThose we want to run EIGRP on and\ntalk about.\n\n1209\n01:03:57,000 --> 01:04:01,648\nBut we also have these internal networks,\nthese LAN networks, these private ones,\n\n1210\n01:04:01,648 --> 01:04:05,079\nand I probably don't have any\nrouters in here in this network.\n\n1211\n01:04:05,079 --> 01:04:05,695\n>> Right.\n\n1212\n01:04:05,695 --> 01:04:09,478\nWell, I need to advertise that network so\nthe other routers will learn about it.\n\n1213\n01:04:09,478 --> 01:04:12,430\nBut, I probably don't want\nto build up any adjacencies.\n\n1214\n01:04:12,430 --> 01:04:13,980\nA hacker could bring in\ntheir own router and\n\n1215\n01:04:13,980 --> 01:04:15,970\nstart to push the IGRP routes in or\nwhatever.\n\n1216\n01:04:17,320 --> 01:04:20,960\nOne of the things that I'll do\nto help improve the security\n\n1217\n01:04:20,960 --> 01:04:23,370\nis to turn on what's called\na passive interface.\n\n1218\n01:04:23,370 --> 01:04:26,860\nA passive interface is one where\nwe advertise that it exists,\n\n1219\n01:04:26,860 --> 01:04:30,210\nwe tell everybody else that interface and\nthat network exists.\n\n1220\n01:04:30,210 --> 01:04:33,649\nBut we don't accept\nconnections on the interface.\n\n1221\n01:04:33,649 --> 01:04:35,435\nWhen you configure EIGRP,\n\n1222\n01:04:35,435 --> 01:04:40,580\nany interface on your router that\ndoesn't have routers on the other end.\n\n1223\n01:04:40,580 --> 01:04:42,620\nThat doesn't have any other\nrouters connected to it,\n\n1224\n01:04:42,620 --> 01:04:44,590\nyou should flag as a passive interface.\n\n1225\n01:04:44,590 --> 01:04:46,660\nAll right, and it's really easy to do.\n\n1226\n01:04:46,660 --> 01:04:48,555\nSo for example, on Router 1.\n\n1227\n01:04:53,052 --> 01:04:58,870\nIt's got the 192.168.1 network on fa1/1,\nall right?\n\n1228\n01:04:58,870 --> 01:04:59,800\nSo I may say, you know what,\n\n1229\n01:04:59,800 --> 01:05:01,530\nI know there's no other\nrouters out that interface,\n\n1230\n01:05:01,530 --> 01:05:04,420\nso let me just turn off\nupdates on that interface.\n\n1231\n01:05:04,420 --> 01:05:10,310\nSo we say router EIGRP one,\npassive-interface and\n\n1232\n01:05:10,310 --> 01:05:13,990\nthen we specify the interface\nthat we want to go passive.\n\n1233\n01:05:13,990 --> 01:05:18,620\nWhen we do that,\nwe still advertise that network exists,\n\n1234\n01:05:18,620 --> 01:05:23,520\nwe're telling everybody about\nthe 192.168.1 network but\n\n1235\n01:05:23,520 --> 01:05:27,020\nwe're no longer sending advertisements\nout of that interface looking for\n\n1236\n01:05:27,020 --> 01:05:31,770\nother routers, and that's a good way\nto reduce traffic on the network.\n\n1237\n01:05:31,770 --> 01:05:33,940\nAs well as to improve your security.\n\n1238\n01:05:33,940 --> 01:05:34,551\nRight?\nSo\n\n1239\n01:05:34,551 --> 01:05:39,007\nI should really do that on each of the\nrouters in my topology to make sure that\n\n1240\n01:05:39,007 --> 01:05:42,857\nthey are not trying to bind with\nrouters that aren't approved.\n\n1241\n01:05:44,703 --> 01:05:48,860\n>> And, Don, it looks like we're\njust down to auto summary here.\n\n1242\n01:05:48,860 --> 01:05:49,500\n>> The fun one.\n\n1243\n01:05:49,500 --> 01:05:50,140\n>> Yeah.\n\n1244\n01:05:50,140 --> 01:05:51,020\n>> All right.\n\n1245\n01:05:51,020 --> 01:05:52,980\nI mentioned auto summary at\nthe beginning of the episode and\n\n1246\n01:05:52,980 --> 01:05:54,260\nhow it's a really cool feature.\n\n1247\n01:05:54,260 --> 01:05:57,320\nThe EIGRP can shrink its\nrouting table down for us.\n\n1248\n01:05:57,320 --> 01:06:01,010\nOkay, let me give you guys\nan example of how that works.\n\n1249\n01:06:01,010 --> 01:06:08,220\nI'm gonna jump over to router one and\nI'm gonna create some networks.\n\n1250\n01:06:08,220 --> 01:06:10,700\nLet's have some fun here.\n\n1251\n01:06:10,700 --> 01:06:12,490\nI'm gonna basically.\n\n1252\n01:06:12,490 --> 01:06:14,490\nHow do I wanna do this,\ndo I wanna do sub-interfaces?\n\n1253\n01:06:14,490 --> 01:06:15,430\nYeah, let's do that.\n\n1254\n01:06:15,430 --> 01:06:20,224\nSo let's say I'm gonna take my fa 1/1\n\n1255\n01:06:20,224 --> 01:06:25,390\ninterface, and I'll say no IP address.\n\n1256\n01:06:25,390 --> 01:06:27,200\nSo I'm just gonna get\nrid of it's IP address.\n\n1257\n01:06:29,682 --> 01:06:33,580\nAll right, and so\nit's no longer got an IP address.\n\n1258\n01:06:33,580 --> 01:06:37,560\nAnd I'm gonna create a sub-interface,\nall right.\n\n1259\n01:06:37,560 --> 01:06:42,000\nAnd we'll go ahead and say let's see\nI need to do encapsulation dot 1q.\n\n1260\n01:06:47,420 --> 01:06:48,530\nIf you guys remember from the CC,\n\n1261\n01:06:48,530 --> 01:06:51,420\nI think it was the CCENT show\nthat we did router on a stick.\n\n1262\n01:06:51,420 --> 01:06:54,620\nSo I'm basically gonna do a router\non stick kind of configuration here.\n\n1263\n01:06:54,620 --> 01:07:01,453\nAnd I'm just gonna create\nthis 192.168.1.0 network but\n\n1264\n01:07:01,453 --> 01:07:06,631\nI'm gonna do it as a,\nlet's see I want to divide this\n\n1265\n01:07:06,631 --> 01:07:12,304\ninto four networks so\nI need to do 250, wait a minute.\n\n1266\n01:07:12,304 --> 01:07:14,740\nI want to go into four networks,\nso I need to do 192, right?\n\n1267\n01:07:14,740 --> 01:07:17,990\nSee, we're doing good math.\n\n1268\n01:07:17,990 --> 01:07:19,620\nThat's two bits over to the network ID,\nyeah.\n\n1269\n01:07:19,620 --> 01:07:21,540\nThere we go.\n\n1270\n01:07:24,440 --> 01:07:26,830\nAnd let me just keep going here.\n\n1271\n01:07:26,830 --> 01:07:34,448\nThat was 1.1 or we'll do, like two.\n\n1272\n01:07:34,448 --> 01:07:36,441\nAnd so the next one would be.\n\n1273\n01:07:36,441 --> 01:07:40,445\nLet's see, then we would go up to .65.\n\n1274\n01:07:40,445 --> 01:07:42,401\n>> 65, yeah.\n\n1275\n01:07:42,401 --> 01:07:44,210\n>> There we go.\n\n1276\n01:07:44,210 --> 01:07:45,887\nAnd we'll go up to the next one.\n\n1277\n01:07:50,142 --> 01:07:52,487\nAnd the next would be 129.\n\n1278\n01:07:55,052 --> 01:07:56,398\nAnd the last one.\n\n1279\n01:08:01,894 --> 01:08:07,490\nAnd the last one would be 193.\n\n1280\n01:08:07,490 --> 01:08:08,638\nGood.\n\n1281\n01:08:11,832 --> 01:08:12,960\nOkay.\n\n1282\n01:08:12,960 --> 01:08:16,700\nSo what I did is I created like\na router on a stick environment.\n\n1283\n01:08:16,700 --> 01:08:19,156\nSo I've got VLAN's 10, 20, 30, 40.\n\n1284\n01:08:19,156 --> 01:08:20,821\nRight?\nSo all these different VLAN's.\n\n1285\n01:08:20,821 --> 01:08:26,944\nAnd notice how they're 192.168.1.1,\n1.65, 1.29, 1.193.\n\n1286\n01:08:26,944 --> 01:08:29,139\nThey're in four different networks.\n\n1287\n01:08:29,139 --> 01:08:33,286\nI took the /24 and\nbroke it up into four /26's, so\n\n1288\n01:08:33,286 --> 01:08:37,460\nwe just sub-netted that\ndown into four networks.\n\n1289\n01:08:37,460 --> 01:08:45,962\nThat means if I look at my routing\ntable I've now got four routes,\n\n1290\n01:08:45,962 --> 01:08:50,148\nlet me change that, oh c'mon.\n\n1291\n01:08:54,211 --> 01:08:55,590\nThere.\n\n1292\n01:08:55,590 --> 01:08:59,420\nI've now got four routes\nin my routing table, okay.\n\n1293\n01:08:59,420 --> 01:09:04,289\nWell wouldn't it be nice since those are\nall in a row they all are roll up under\n\n1294\n01:09:04,289 --> 01:09:06,587\n192.168.1.0/24.\n\n1295\n01:09:06,587 --> 01:09:09,149\nWouldn't it be nice to summarize\nthat into one route and\n\n1296\n01:09:09,149 --> 01:09:12,490\nadvertise that out to the world instead\nof advertising out four routes.\n\n1297\n01:09:12,490 --> 01:09:17,600\nI could reduce my routing table by\n75% by compressing those routes down.\n\n1298\n01:09:18,840 --> 01:09:21,500\nNow in OSPF you can manually do it.\n\n1299\n01:09:21,500 --> 01:09:23,270\nYou can manually summarize.\n\n1300\n01:09:23,270 --> 01:09:27,570\nBut in EIGRP,\nit's automatically summarizing.\n\n1301\n01:09:27,570 --> 01:09:29,460\nWhenever you cross classful boundaries.\n\n1302\n01:09:29,460 --> 01:09:31,230\nSo if you cross from Class A to B.\n\n1303\n01:09:31,230 --> 01:09:32,360\nOr a B to a C.\n\n1304\n01:09:32,360 --> 01:09:33,690\nOr something like that.\n\n1305\n01:09:33,690 --> 01:09:37,470\nHere, I've got something\nsmaller than a Class C\n\n1306\n01:09:37,470 --> 01:09:40,630\nthat rolls up into this\none Class C network.\n\n1307\n01:09:40,630 --> 01:09:43,930\nAnd then gets advertised over\nwhat should be Class B networks.\n\n1308\n01:09:43,930 --> 01:09:44,550\nAll right?\n\n1309\n01:09:44,550 --> 01:09:49,280\nSo when that happens,\nthe IGRP should automatically kick in and\n\n1310\n01:09:49,280 --> 01:09:50,510\nsummarize these for me.\n\n1311\n01:09:50,510 --> 01:09:53,649\nNow you can't see that on router\none cuz it's directly connected,\n\n1312\n01:09:53,649 --> 01:09:56,250\nbut let's see how this looks\non Router 2 and Router 3.\n\n1313\n01:09:59,131 --> 01:10:04,311\nSo when I look over here, here on Router\n1, I'm seeing all of those other routes,\n\n1314\n01:10:04,311 --> 01:10:10,470\nso 192.168.1.0 and so on, so there they\nall are, and they're not being summarized.\n\n1315\n01:10:11,600 --> 01:10:16,290\nI don't remember turning off auto summary,\nbut maybe that's the default.\n\n1316\n01:10:16,290 --> 01:10:19,570\nLet's go in here and\nI'm gonna make sure that it is turned on.\n\n1317\n01:10:19,570 --> 01:10:26,840\nI'll say router EIGRP one auto-summary and\nthere it goes.\n\n1318\n01:10:29,690 --> 01:10:32,170\nWe'll give that a second\nit's got to stabilize.\n\n1319\n01:10:32,170 --> 01:10:34,860\nThere's various routes that\nare coming in and out and so\n\n1320\n01:10:34,860 --> 01:10:36,400\nit takes it a minute to converge.\n\n1321\n01:10:37,410 --> 01:10:40,030\nWhat's happening is we're trying\nto prune out the old routes, but\n\n1322\n01:10:40,030 --> 01:10:42,850\nthe other routes are telling us about\nthem, the other routers, and so\n\n1323\n01:10:42,850 --> 01:10:43,590\nwe're having to clear this out.\n\n1324\n01:10:43,590 --> 01:10:44,970\nSo I'm just waiting for it to stabilize.\n\n1325\n01:10:46,350 --> 01:10:48,630\nThere we go, and\nnow we'll look in router two.\n\n1326\n01:10:48,630 --> 01:10:50,970\nSo on this router,\nauto summary must be off by default.\n\n1327\n01:10:55,870 --> 01:11:00,235\nNow, when I look at router two,\n\n1328\n01:11:00,235 --> 01:11:05,790\nI can see that I've got just one route.\n\n1329\n01:11:05,790 --> 01:11:10,630\nIt automatically summarized those four\nsub-nets into one sub-net for me.\n\n1330\n01:11:10,630 --> 01:11:15,110\nAnd all I had to do to turn that\non was get into configuration,\n\n1331\n01:11:15,110 --> 01:11:19,479\nget into EIGRP and say auto-summary.\n\n1332\n01:11:19,479 --> 01:11:25,110\nNow, auto-summary,\nit's a nice feature to have, right?\n\n1333\n01:11:25,110 --> 01:11:29,031\nIt can cause problems if you've\ngot non-contiguous networks,\n\n1334\n01:11:29,031 --> 01:11:32,550\nif you've got networks\nthat are out of order.\n\n1335\n01:11:32,550 --> 01:11:37,340\nWell what can happen is it can summarize\nyour networks and break things.\n\n1336\n01:11:37,340 --> 01:11:41,890\nOkay, it does happen, so for example,\nI'm turning on auto summary here,\n\n1337\n01:11:43,020 --> 01:11:47,810\nall right and let's give a bad example.\n\n1338\n01:11:47,810 --> 01:11:52,149\nSo let's say that I've got, let's use,\n\n1339\n01:11:53,510 --> 01:11:56,420\nlet's use a Class A to\nbreak things nice and good.\n\n1340\n01:11:56,420 --> 01:11:59,100\nSo I'm here on router three.\n\n1341\n01:11:59,100 --> 01:12:00,876\nI'm gonna get into interface.\n\n1342\n01:12:00,876 --> 01:12:03,022\nI'll just do a loop back, all right.\n\n1343\n01:12:03,022 --> 01:12:07,920\nAnd I'll say I've got\nIP address 10.3.3.3.3.\n\n1344\n01:12:07,920 --> 01:12:09,918\nCuz this is router three.\n\n1345\n01:12:09,918 --> 01:12:11,370\nAnd I'm gonna make it a class C.\n\n1346\n01:12:23,410 --> 01:12:24,245\nAll right.\n\n1347\n01:12:24,245 --> 01:12:26,194\nSo I'm now punching that network in there.\n\n1348\n01:12:28,574 --> 01:12:33,350\nSo that was 10.3.3.3, and\nit's now advertising EIGRP.\n\n1349\n01:12:33,350 --> 01:12:39,280\nI'm gonna jump over to router two,\nand I'll create a loop back.\n\n1350\n01:12:41,120 --> 01:12:43,294\nAnd I'll make it 10.2.2.2.\n\n1351\n01:12:45,830 --> 01:12:47,170\nAnd see how I'm doing class C's?\n\n1352\n01:12:47,170 --> 01:12:49,817\nSo one router is in 10.2.2.\n\n1353\n01:12:49,817 --> 01:12:51,090\nThe other router's in 10.3.3.\n\n1354\n01:12:51,090 --> 01:12:55,500\nThose are two different networks,\ncompletely different class C networks.\n\n1355\n01:12:55,500 --> 01:12:56,130\nAll right.\n>> So\n\n1356\n01:12:56,130 --> 01:12:59,000\nwhat we have here is that we have\nan example of where router two\n\n1357\n01:12:59,000 --> 01:13:00,286\nis advertising a ten network.\n\n1358\n01:13:00,286 --> 01:13:04,170\nRouter three is advertising a ten network,\ndon't get me wrong, they're already in\n\n1359\n01:13:04,170 --> 01:13:09,360\ntheir own subnets that they need to be,\nbut remember at the heart of is EIGRP\n\n1360\n01:13:09,360 --> 01:13:15,060\nis IGRP and\nit is a class full networking protocol.\n\n1361\n01:13:15,060 --> 01:13:19,940\nAnd so for us it's actually really\nwanting to start advertising but\n\n1362\n01:13:19,940 --> 01:13:23,120\nwith auto summary turned on it's gonna\nstart advertising the ten network out\n\n1363\n01:13:23,120 --> 01:13:27,040\nrouter two, the ten network out router\nthree and that's where we're gonna start\n\n1364\n01:13:27,040 --> 01:13:31,380\nhaving a problem because now we\nhave some confusion going on.\n\n1365\n01:13:31,380 --> 01:13:36,461\n>> When I look one router one,\nrouter one is not learning 10.2.2.\n\n1366\n01:13:36,461 --> 01:13:39,400\nIt's not learning 10.3.3.\n\n1367\n01:13:39,400 --> 01:13:41,760\nIt's learning the summarized routes.\n\n1368\n01:13:41,760 --> 01:13:45,650\nSee how they're getting\nrolled up into 10.0.0.0/8.\n\n1369\n01:13:45,650 --> 01:13:49,880\nAnd it's learning both of them, and\n\n1370\n01:13:49,880 --> 01:13:53,030\nthey've got the same metrics, so\nit's actually going to load balance.\n\n1371\n01:13:53,030 --> 01:13:56,088\nNow, when it load balances, half my\ntraffic goes one way, half goes the other.\n\n1372\n01:13:56,088 --> 01:13:59,768\nThat means 50% of the time, I'll be\nable to get where I'm trying to go.\n\n1373\n01:13:59,768 --> 01:14:03,810\nThe other 50% of the time I'm gonna\nlose my packets, I'm not gonna get them.\n\n1374\n01:14:03,810 --> 01:14:05,920\nThis is a problem, all right?\n\n1375\n01:14:05,920 --> 01:14:11,488\nIf you're not following class rules and\nyour networks are not contiguous if\n\n1376\n01:14:11,488 --> 01:14:15,010\nthey're out of order like what I just did,\nyou're gonna get this problem right here.\n\n1377\n01:14:15,010 --> 01:14:15,860\n>> Yeah.\n>> All right so\n\n1378\n01:14:15,860 --> 01:14:19,800\nif we were on that 192.168.1.,\nwhatever network that we were on,\n\n1379\n01:14:19,800 --> 01:14:25,060\nwe would have a problem if I\nwas trying to send a 10.3.3.3.\n\n1380\n01:14:25,060 --> 01:14:27,910\nIt might have a chance of\nactually going one way.\n\n1381\n01:14:27,910 --> 01:14:32,320\nIt might end up on that 10.2.2.2.network\nor it might even end up where we are, and\n\n1382\n01:14:32,320 --> 01:14:34,590\nso that's why it's a big problem for us.\n\n1383\n01:14:34,590 --> 01:14:37,290\nSo normally what we wanna do\nis we wanna make sure that we\n\n1384\n01:14:37,290 --> 01:14:39,300\nkind of go ahead and, oh, there we go.\n\n1385\n01:14:39,300 --> 01:14:42,144\n>> There we go.\n>> So I can ping 10.2.2.2., but\n\n1386\n01:14:42,144 --> 01:14:44,607\nI can't ping 10.3.3.3.\n\n1387\n01:14:44,607 --> 01:14:45,166\n>> Yep.\n\n1388\n01:14:45,166 --> 01:14:47,720\n>> And that's because my traffic\nis going to the wrong router.\n\n1389\n01:14:47,720 --> 01:14:49,690\nAnd it's coming back\ndestination unreachable.\n\n1390\n01:14:49,690 --> 01:14:50,460\n>> Yeah.\n>> All right?\n\n1391\n01:14:50,460 --> 01:14:53,030\nThis is the type of problem we\ncan have with summarization.\n\n1392\n01:14:53,030 --> 01:14:56,510\nAnd so, a lot of people will\nturn off the auto-summary.\n\n1393\n01:14:56,510 --> 01:14:57,640\nThe reality is,\n\n1394\n01:14:57,640 --> 01:14:59,385\nif you have a well-designed network-\n>> Yeah.\n\n1395\n01:14:59,385 --> 01:15:00,650\n>> Auto-summary is awesome.\n\n1396\n01:15:00,650 --> 01:15:01,250\n>> Yeah.\n>> It works great,\n\n1397\n01:15:01,250 --> 01:15:02,600\nlike in my first example.\n\n1398\n01:15:02,600 --> 01:15:03,290\nRight?\n>> [LAUGH]\n\n1399\n01:15:03,290 --> 01:15:04,880\n>> But if you have a poorly designed\n\n1400\n01:15:04,880 --> 01:15:07,510\nnetwork, auto-summary can reek havoc.\n\n1401\n01:15:07,510 --> 01:15:09,200\nAnd so when you go on the Internet and\n\n1402\n01:15:09,200 --> 01:15:12,260\nyou'll see a lot of people say this,\noh I always turn off auto-summary.\n\n1403\n01:15:12,260 --> 01:15:15,950\nWhat they're really saying is,\nI always design bad networks okay.\n\n1404\n01:15:15,950 --> 01:15:19,440\nIf you design a good network,\nauto-summary is awesome.\n\n1405\n01:15:19,440 --> 01:15:21,240\nMakes your job really easy all right?\n\n1406\n01:15:21,240 --> 01:15:23,680\nBut if you're inheriting a network\nthat's already been designed,\n\n1407\n01:15:23,680 --> 01:15:27,010\nthat's already in place whatever there\nmay just be some bad design in there.\n\n1408\n01:15:27,010 --> 01:15:30,430\nAnd if that's the case,\nauto summary can be bad and\n\n1409\n01:15:30,430 --> 01:15:33,310\nin that case you'll need to\nturn off auto summary and so\n\n1410\n01:15:33,310 --> 01:15:40,200\nif I go back to these other routers and\nI turn off auto summary.\n\n1411\n01:15:43,920 --> 01:15:45,494\nAll right?\nAnd in this particular iOS,\n\n1412\n01:15:45,494 --> 01:15:49,340\nthe auto-summary was off by default\napparently because I didn't turn it off.\n\n1413\n01:15:49,340 --> 01:15:52,407\nBut anyhow, so\nI'm just gonna turn it off here.\n\n1414\n01:15:52,407 --> 01:15:56,285\nAnd when it's off,\nthat summary, that 10.0.0.0/8,\n\n1415\n01:15:56,285 --> 01:16:00,728\nthat's gonna come out, and it's gonna\nbe replace by the original routes.\n\n1416\n01:16:00,728 --> 01:16:06,140\nAnd when I jump back to router one,\nand I do a show IP route,\n\n1417\n01:16:06,140 --> 01:16:13,450\nI can see now I am learning 10.2.2 and\n10.3.3 as separate routes.\n\n1418\n01:16:13,450 --> 01:16:17,323\nAnd so we've got those entered in here\nvia the appropriate destinations, and\n\n1419\n01:16:17,323 --> 01:16:19,620\nI should be able to ping\nboth of them this time.\n\n1420\n01:16:22,080 --> 01:16:23,410\nIf I can spell ping\n>> [LAUGH]\n\n1421\n01:16:23,410 --> 01:16:24,740\n>> It's a challenge from day one.\n\n1422\n01:16:24,740 --> 01:16:25,420\n>> There you go.\n\n1423\n01:16:25,420 --> 01:16:27,270\n>> Now, I've got sequential communication.\n\n1424\n01:16:27,270 --> 01:16:28,305\nSo just be aware of that.\n\n1425\n01:16:28,305 --> 01:16:30,430\nNow, just because you turned\nauto-summary off doesn't mean\n\n1426\n01:16:30,430 --> 01:16:31,480\nyou can't do summarization.\n\n1427\n01:16:31,480 --> 01:16:35,530\nYou can do manual summarization, but\nyou don't really have to know that until\n\n1428\n01:16:35,530 --> 01:16:39,550\nthe CCMP route exam, so\nwe're not gonna tackle that here.\n\n1429\n01:16:39,550 --> 01:16:42,970\nBut you can do manual summarization\nin EIGRP if you have to.\n\n1430\n01:16:42,970 --> 01:16:47,250\nSo, just be aware of auto summary in\na well designed network it's awesome,\n\n1431\n01:16:47,250 --> 01:16:49,270\nworks great, saves you a ton of time.\n\n1432\n01:16:49,270 --> 01:16:54,600\nIn a poorly designed network it reeks\nhavoc and it's easier to turn off.\n\n1433\n01:16:54,600 --> 01:16:55,240\n>> Right.\n>> All right, Ronnie\n\n1434\n01:16:55,240 --> 01:16:56,400\nhow are we doing on our objectives?\n\n1435\n01:16:56,400 --> 01:16:57,650\nIs that?\n>> I think we have\n\n1436\n01:16:57,650 --> 01:17:01,252\nsuccessfully covered all of\nthe objectives that I can see.\n\n1437\n01:17:01,252 --> 01:17:04,230\n>> All right, we did equal and unequal\nload balancing, passive interfaces,\n\n1438\n01:17:04,230 --> 01:17:06,120\nauto summary, path selection.\n\n1439\n01:17:08,220 --> 01:17:10,350\nYeah.\nI think we've tackled it all.\n\n1440\n01:17:10,350 --> 01:17:11,780\nSo EIGRP really cool.\n\n1441\n01:17:11,780 --> 01:17:15,500\nThere is even more that EIGRP can do.\n\n1442\n01:17:15,500 --> 01:17:18,380\nWhat we've covered is the stuff that\ntypically shows up on the exam.\n\n1443\n01:17:18,380 --> 01:17:22,550\nOther things in real life land, you might\nwanna be aware of things like security and\n\n1444\n01:17:22,550 --> 01:17:23,510\nauthentication right.\n\n1445\n01:17:23,510 --> 01:17:27,540\nEIGRP supports doing MD5 hashes\nto verify the identity of\n\n1446\n01:17:27,540 --> 01:17:28,420\nthe neighbor on the other end.\n\n1447\n01:17:29,580 --> 01:17:32,210\nI find that you don't really\nneed that in production though,\n\n1448\n01:17:32,210 --> 01:17:35,340\nbecause if you are properly\nusing passive interfaces,\n\n1449\n01:17:35,340 --> 01:17:39,000\nthere should never be a scenario when an\nattacker can introduce their own router.\n\n1450\n01:17:39,000 --> 01:17:43,190\nBut if for some reason you have to\nuse the IGRP on a shared network,\n\n1451\n01:17:43,190 --> 01:17:46,120\nthen having that authentication\nin there can be a helpful thing.\n\n1452\n01:17:46,120 --> 01:17:47,680\nThen there's,\n\n1453\n01:17:47,680 --> 01:17:50,850\nthere's a ton of advanced features we\ntackle in the CCNP shows and stuff.\n\n1454\n01:17:50,850 --> 01:17:54,290\nBut for now,\nthat's really the basics of EIGRP.\n\n1455\n01:17:54,290 --> 01:17:56,680\nGreat protocol, easily better than OSPF.\n\n1456\n01:17:56,680 --> 01:17:58,430\nMakes better decisions, but\n\n1457\n01:17:58,430 --> 01:18:00,480\nit's proprietary nature is\nwhat holds it back right.\n\n1458\n01:18:00,480 --> 01:18:01,120\nIt's CISCO only.\n\n1459\n01:18:02,940 --> 01:18:05,140\nAll right, Ronnie,\nany other pearls of wisdom to throw out?\n\n1460\n01:18:05,140 --> 01:18:05,870\n>> I don't think so.\n\n1461\n01:18:05,870 --> 01:18:08,942\nI think for EIGRP that's\nenough to keep everybody busy.\n\n1462\n01:18:08,942 --> 01:18:10,770\n>> [LAUGH]\n>> [LAUGH] All right,\n\n1463\n01:18:10,770 --> 01:18:12,950\nwell ladies and gentlemen,\nlet's wind it down now.\n\n1464\n01:18:12,950 --> 01:18:16,250\nI do want to remind you guys live during\nthe show you're always welcome to come and\n\n1465\n01:18:16,250 --> 01:18:16,960\npost questions.\n\n1466\n01:18:16,960 --> 01:18:20,079\nIf you go to ITPro.tv/live\nright underneath the video,\n\n1467\n01:18:20,079 --> 01:18:21,550\nyou'll see the chatroom.\n\n1468\n01:18:21,550 --> 01:18:22,330\nYou can post away.\n\n1469\n01:18:22,330 --> 01:18:25,220\nWe monitor it and\nanswer questions during the show.\n\n1470\n01:18:25,220 --> 01:18:27,380\nAlso if you have questions after the show,\nright,\n\n1471\n01:18:27,380 --> 01:18:29,910\nin the middle of the night,\nwhatever, you can go to the Q and\n\n1472\n01:18:29,910 --> 01:18:33,770\nA link at the top of every one of\nour pages, post a question in there.\n\n1473\n01:18:33,770 --> 01:18:36,293\nWe monitor it, answer, make sure\nyou get your questions answered and\n\n1474\n01:18:36,293 --> 01:18:37,248\nthat you're ready to go.\n\n1475\n01:18:37,248 --> 01:18:41,360\nSo keep that in mind, good luck with\nall your studies, signing off for\n\n1476\n01:18:41,360 --> 01:18:43,388\nITProTV I'm your host Don Pezet.\n\n1477\n01:18:43,388 --> 01:18:44,202\n>> And I'm Ronnie Wong.\n\n1478\n01:18:44,202 --> 01:18:45,596\n>> And we'll see you next time.\n\n1479\n01:18:45,596 --> 01:18:55,596\n[MUSIC]\n\n1480\n01:18:57,335 --> 01:19:02,770\n[SOUND]\n\n",
          "vimeoId": "89110586"
        }
      ],
      "title": "Troubleshooting"
    },
    {
      "episodes": [
        {
          "description": "In this episode Ronnie and Don explore wide area network (WAN) technologies. They describe the common technologies found in the real world and then demonstrate configuring PPP, PPPoE and frame-relay.",
          "length": "6442",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/010-WAN-Technologies.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/010-WAN-Technologies-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/ccna/010-WAN-Technologies-sm.jpg",
          "title": "WAN Technologies",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[SOUND]\n\n2\n00:00:22,477 --> 00:00:32,477\n[MUSIC]\n\n3\n00:00:33,896 --> 00:00:36,011\nAll right, good morning,\ngood afternoon and good evening.\n\n4\n00:00:36,011 --> 00:00:37,950\nAnd welcome back to another\nepisode of ITProTv.\n\n5\n00:00:37,950 --> 00:00:40,320\nI'm your host Don Pezet,\ntoday with Mr. Ronnie Wong.\n\n6\n00:00:40,320 --> 00:00:41,200\nHow's it going Ronnie?\n\n7\n00:00:41,200 --> 00:00:43,000\n>> I am doing well today.\n\n8\n00:00:43,000 --> 00:00:46,215\nI am doing better than any\nGreen Bay Packer fan this morning.\n\n9\n00:00:46,215 --> 00:00:50,470\n>> [LAUGH]\nNow I did not get to watch any football\n\n10\n00:00:50,470 --> 00:00:51,500\nover the holiday weekend.\n\n11\n00:00:52,620 --> 00:00:53,920\nGreen Bay, what's to say, right?\n\n12\n00:00:53,920 --> 00:00:55,240\nThey're frozen and\nthey have cheese on their heads.\n\n13\n00:00:55,240 --> 00:00:56,340\n>> Yes.\nBut they lost.\n\n14\n00:00:56,340 --> 00:00:57,920\n>> Oh they did lose?\n\n15\n00:00:57,920 --> 00:01:00,850\n>> They did lose [LAUGH]\n>> Nobody likes to lose.\n\n16\n00:01:00,850 --> 00:01:03,007\nNobody likes a loser remember that.\n\n17\n00:01:03,007 --> 00:01:04,320\n>> [LAUGH]\n>> [LAUGH]\n\n18\n00:01:04,320 --> 00:01:04,960\n>> Sorry for\n\n19\n00:01:04,960 --> 00:01:07,710\nour Green Bay watchers out there and\nGreen Bay fans.\n\n20\n00:01:07,710 --> 00:01:11,852\n>> Well we've got a diverse\nshow up ahead for us.\n\n21\n00:01:11,852 --> 00:01:17,800\nIt's kinda this last objective that\nCisco just lumps a ton of stuff into but\n\n22\n00:01:17,800 --> 00:01:21,730\nit's WAN technology,\nwide area network technologies.\n\n23\n00:01:21,730 --> 00:01:25,960\nAnd in the CCE and T show,\nwe would tackle some WAN stuff in there,\n\n24\n00:01:25,960 --> 00:01:29,280\nmostly from a conceptual or\ndefinition type level.\n\n25\n00:01:29,280 --> 00:01:32,160\nHere we're gonna start taking\na look at some of that stuff again.\n\n26\n00:01:32,160 --> 00:01:34,350\nBut similarly we're gonna go\nmore into configurations.\n\n27\n00:01:34,350 --> 00:01:37,040\nHow we get it setup, how we get it working\nand running, and all that good stuff.\n\n28\n00:01:37,040 --> 00:01:37,690\n>> Yeah.\n\n29\n00:01:37,690 --> 00:01:39,810\nYou actually notice that in\nterms of WAN technologies,\n\n30\n00:01:39,810 --> 00:01:42,680\nthis is different from\nthe LAN technologies for us.\n\n31\n00:01:42,680 --> 00:01:46,350\nWhere we're working with routers and\nswitches and configuring them.\n\n32\n00:01:46,350 --> 00:01:49,300\nNow we're talking about how we\nconnect multiple networks together.\n\n33\n00:01:49,300 --> 00:01:52,020\nAnd as somebody at the CCNA level,\n\n34\n00:01:52,020 --> 00:01:56,160\nwe have to have at least\nan understanding of how we differentiate\n\n35\n00:01:56,160 --> 00:02:00,270\nbetween the different types of services\nthat we're gonna be subscribing to.\n\n36\n00:02:00,270 --> 00:02:03,620\nSo that our networks can connect out to\nthe Internet and also to other companies.\n\n37\n00:02:04,820 --> 00:02:07,410\n>> Yeah, now for\nthe first part of the objective, 5.1,\n\n38\n00:02:07,410 --> 00:02:10,000\nit says identify different\nWAN technologies.\n\n39\n00:02:10,000 --> 00:02:12,272\nNow, they don't mean identify\nas in visually look at it.\n\n40\n00:02:12,272 --> 00:02:13,620\n>> [LAUGH]\n>> Because most of them are just a copper\n\n41\n00:02:13,620 --> 00:02:14,690\npair of wire, right?\n\n42\n00:02:14,690 --> 00:02:15,770\n>> Yeah.\n>> And you couldn't tell one\n\n43\n00:02:15,770 --> 00:02:17,020\napart from the other.\n\n44\n00:02:17,020 --> 00:02:20,750\nBut they mean in terms of the features and\nfunctionality.\n\n45\n00:02:20,750 --> 00:02:23,580\nLet's just start real broad.\n\n46\n00:02:23,580 --> 00:02:26,910\nWhat is a WAN technology?\n\n47\n00:02:26,910 --> 00:02:30,900\nAny time we're connecting two areas\nthat are geographically separated.\n\n48\n00:02:32,120 --> 00:02:36,530\nIf I've got an office in one city and\nan office in a neighboring city,\n\n49\n00:02:36,530 --> 00:02:39,580\nI probably can't run my own\ncable between those two offices.\n\n50\n00:02:39,580 --> 00:02:40,900\nThey are different cities.\n\n51\n00:02:40,900 --> 00:02:44,490\nI had to cross a lot of government and\nprivate land.\n\n52\n00:02:44,490 --> 00:02:48,770\nSo instead I'm gonna lease a connection\nfrom, usually a telephone company,\n\n53\n00:02:48,770 --> 00:02:49,740\nright, a telco.\n\n54\n00:02:49,740 --> 00:02:54,190\nI'm gonna lease that line and\npay a monthly fee or annual fee or\n\n55\n00:02:54,190 --> 00:02:55,420\nwhatever, to use it.\n\n56\n00:02:55,420 --> 00:02:57,650\nThose are wide area network connections.\n\n57\n00:02:57,650 --> 00:03:01,040\nWANs are basically networks that we rent,\nright, that we don't own,\n\n58\n00:03:01,040 --> 00:03:02,990\nwe don't control, somebody else does.\n\n59\n00:03:02,990 --> 00:03:04,540\nAnd we pay for access on it.\n\n60\n00:03:04,540 --> 00:03:05,320\n>> Yeah.\n\n61\n00:03:05,320 --> 00:03:09,910\nSo in generic terms and\nwhat we're talking about,\n\n62\n00:03:09,910 --> 00:03:14,160\nLAN technology, what we control,\nwhat we implement, what we setup.\n\n63\n00:03:14,160 --> 00:03:18,640\nLAN technology, we pay for somebody else's\nuse of their network and we normally\n\n64\n00:03:18,640 --> 00:03:22,770\npay a subscription fee to it monthly or\nyearly or however we want to do it, and\n\n65\n00:03:22,770 --> 00:03:27,100\nthat's what ends up happening and\nthey guarantee for us.\n\n66\n00:03:27,100 --> 00:03:29,680\nThat type of service\nthrough their network.\n\n67\n00:03:29,680 --> 00:03:32,250\nNow in some of them,\nwe're gonna actually see where\n\n68\n00:03:32,250 --> 00:03:36,340\nyou actually will be on that same\nparticular network with other customers.\n\n69\n00:03:36,340 --> 00:03:38,410\nSome of the earlier ones,\nthough, not so much so.\n\n70\n00:03:38,410 --> 00:03:40,280\nYou actually have your\nown private connection.\n\n71\n00:03:40,280 --> 00:03:42,405\n>> Yeah.\nAnd that's the difference between like\n\n72\n00:03:42,405 --> 00:03:46,535\na point to point link and a shared link\nand so some of these technologies can be\n\n73\n00:03:46,535 --> 00:03:49,605\nimplemented in more than one way and\nwe just need to be aware of that right.\n\n74\n00:03:49,605 --> 00:03:52,255\nSo Ronnie let's run down the list\nhere of each of these and\n\n75\n00:03:52,255 --> 00:03:54,785\nthen there's some of them we're\ngoing to spend more time on.\n\n76\n00:03:54,785 --> 00:03:55,805\nAnd so we'll tackle those.\n\n77\n00:03:55,805 --> 00:03:59,215\nBut let's just do the quick kinda\noverview of the 10 day list.\n\n78\n00:03:59,215 --> 00:04:00,695\nThe first one is one of my favorites.\n\n79\n00:04:00,695 --> 00:04:04,590\nIt's becoming very popular\nin the last couple years.\n\n80\n00:04:04,590 --> 00:04:07,110\nBut it's the metro ethernet, right.\n\n81\n00:04:07,110 --> 00:04:11,620\nMetro ethernet means that it's\ntraditional Ethernet networking.\n\n82\n00:04:11,620 --> 00:04:14,710\nIt might be fiber,\nit might be copper, whatever.\n\n83\n00:04:14,710 --> 00:04:17,270\nBut it's being run through\na metropolitan area,\n\n84\n00:04:17,270 --> 00:04:21,000\nusually between facilities\nin the same city, all right.\n\n85\n00:04:21,000 --> 00:04:25,310\nAnd a good example is right here,\nour building.\n\n86\n00:04:25,310 --> 00:04:28,350\nOur Internet connection here,\nwe have a 40 megabit Internet connection.\n\n87\n00:04:28,350 --> 00:04:31,460\nNow, 40 megabit may not sound like a lot,\n\n88\n00:04:31,460 --> 00:04:34,670\nif you've got a cable modem that's\ngot 40 megabit or whatever.\n\n89\n00:04:34,670 --> 00:04:37,500\nBut ours is a fiber-optic connection\nthat runs into the building and\n\n90\n00:04:37,500 --> 00:04:38,810\nit's a dedicated connection.\n\n91\n00:04:38,810 --> 00:04:41,650\nSo we have 40 megabit up and\n40 megabit down, so\n\n92\n00:04:41,650 --> 00:04:44,080\nour download and\nupload speeds are the same.\n\n93\n00:04:44,080 --> 00:04:47,985\nThat fiber connection runs from\nus all the way back to our\n\n94\n00:04:47,985 --> 00:04:52,510\nISP that's about eight miles away or\nsomething.\n\n95\n00:04:52,510 --> 00:04:53,960\nSo about eight miles away, so\n\n96\n00:04:53,960 --> 00:04:58,070\nit's a pretty long stretch of fiber now\nwe didn't run that fiber right they did.\n\n97\n00:04:58,070 --> 00:05:01,760\nAnd they ran it at some point, usually\nthey run like a loop around the city and\n\n98\n00:05:01,760 --> 00:05:03,590\nwe're just tapping into that loop.\n\n99\n00:05:03,590 --> 00:05:07,710\nWell, we pay for that access, and\nthey provide us a high speed connection.\n\n100\n00:05:07,710 --> 00:05:09,870\nNow, before we had metro Ethernet,\n\n101\n00:05:09,870 --> 00:05:13,680\nwe were using T1 lines,\nwhich are number 5 down here, T1's.\n\n102\n00:05:13,680 --> 00:05:18,010\nIn the United States,\na T1 is a copper-based serial connection.\n\n103\n00:05:18,010 --> 00:05:20,600\nIt's run over your digital phone networks.\n\n104\n00:05:20,600 --> 00:05:23,740\nAnd it provides 1.5 megabit of bandwidth,\nright?\n\n105\n00:05:23,740 --> 00:05:27,260\nNow, 1.5 megabit is not\na lot of bandwidth today.\n\n106\n00:05:27,260 --> 00:05:29,400\nIt was ten years ago, but not today.\n\n107\n00:05:29,400 --> 00:05:32,940\nAnd so we're constantly striving\nto get higher bandwidth.\n\n108\n00:05:32,940 --> 00:05:35,710\nMetro ethernet networks\nwill typically provide you\n\n109\n00:05:35,710 --> 00:05:38,090\nthe highest bandwidth possible, right.\n\n110\n00:05:38,090 --> 00:05:39,635\nSome areas can get as much as a gigabit.\n\n111\n00:05:39,635 --> 00:05:41,030\n>> Mm-hm.\n\n112\n00:05:41,030 --> 00:05:45,160\nYeah, the differences in those two early\ntechnologies that we want to make sure\n\n113\n00:05:45,160 --> 00:05:48,540\nthat we're aware of here,\nis that when we talk about T1 lines,\n\n114\n00:05:48,540 --> 00:05:53,280\nwe're really not concerned about really\nIP addresses so much on the T1s.\n\n115\n00:05:53,280 --> 00:05:56,410\nWe're sending from one particular\nplace to another one, and\n\n116\n00:05:56,410 --> 00:05:59,300\nbecause those are the only to connections\nthat are there, that's all that matters.\n\n117\n00:05:59,300 --> 00:06:03,350\nBut with metro ethernet, we actually do\nuse IP addresses here to ensure that our\n\n118\n00:06:03,350 --> 00:06:06,570\ndata gets from one particular\nlocation to another one as well.\n\n119\n00:06:06,570 --> 00:06:08,110\n>> Yeah, I didn't mention that, Ronnie.\n\n120\n00:06:08,110 --> 00:06:09,480\n>> Yeah.\n>> But that's a good point that T1s\n\n121\n00:06:09,480 --> 00:06:11,350\nare typically point-to-point, right?\n\n122\n00:06:11,350 --> 00:06:13,470\n>> Mm-hm.\n>> So it's normally you on one end and\n\n123\n00:06:13,470 --> 00:06:14,470\nthe Teleco on the other end.\n\n124\n00:06:14,470 --> 00:06:15,660\n>> Right.\n>> Or you on one end and\n\n125\n00:06:15,660 --> 00:06:18,260\nanother one of your\nfacilities on the other end.\n\n126\n00:06:18,260 --> 00:06:21,959\nAnd as a result, you don't need a lot\nof technology to make that T1 work,\n\n127\n00:06:21,959 --> 00:06:23,825\nthey're pretty straight forward.\n\n128\n00:06:23,825 --> 00:06:27,130\nMetro ethernet networks though,\na lot of times that's a shared network,\n\n129\n00:06:27,130 --> 00:06:30,670\nwhere you're connected to a network, but\nso are other customers that are there.\n\n130\n00:06:30,670 --> 00:06:32,430\nAnd that's what it's so\nimportant when you buy them,\n\n131\n00:06:32,430 --> 00:06:37,210\nthat you negotiate out a contract rate, so\n\n132\n00:06:37,210 --> 00:06:40,040\nwe negotiated a 40mbs with our provider,\nand we're guaranteed that, we don't\n\n133\n00:06:40,040 --> 00:06:44,350\nshare that with other customers, there's\n40 megabits sliced off just for us, right?\n\n134\n00:06:44,350 --> 00:06:48,280\nSo be careful with that some of the other\ntechnologies, if we kinda jump around,\n\n135\n00:06:48,280 --> 00:06:51,170\nlike DSL, and cable, right?\n\n136\n00:06:51,170 --> 00:06:58,480\nDigital subscriber line which really\ncomes in over a phone line typically.\n\n137\n00:06:58,480 --> 00:07:02,150\nYou know that one is a shared network\namongst all the other phone customers.\n\n138\n00:07:02,150 --> 00:07:06,520\nIn that area, and then cable, that's\ncoming over your cable television link,\n\n139\n00:07:06,520 --> 00:07:10,020\nand again, shared bandwidth with the other\npeople right there in your community.\n\n140\n00:07:10,020 --> 00:07:15,070\nSo, for those guys you don't have\ndedicated assigned bandwidth to yourself,\n\n141\n00:07:15,070 --> 00:07:18,310\nsharing it, and that means you're\nin competition with the 12 year\n\n142\n00:07:18,310 --> 00:07:21,850\nold next door who's\nrunning 800 bit torrents.\n\n143\n00:07:21,850 --> 00:07:26,860\n>> And this is a good point for us to make\nin terms of the shared network connection.\n\n144\n00:07:26,860 --> 00:07:30,910\nAnd the reason for that is because, when\nyou have that shared network connection,\n\n145\n00:07:30,910 --> 00:07:33,300\nthe easiest way that you\nknow is actually simple.\n\n146\n00:07:33,300 --> 00:07:36,250\nYou go and download a file early in\nthe morning that's fairly large.\n\n147\n00:07:36,250 --> 00:07:38,810\nAnd you go, wow, I got great speeds.\n\n148\n00:07:38,810 --> 00:07:40,570\n8 o'clock in the evening\nwhen everybody and\n\n149\n00:07:40,570 --> 00:07:44,080\ntheir mother is on checking whatever\ntheir checking on the internet here.\n\n150\n00:07:44,080 --> 00:07:45,680\nAll of a sudden the connection slows and\ndown,\n\n151\n00:07:45,680 --> 00:07:48,230\nand that same file download\ntakes a lot longer.\n\n152\n00:07:48,230 --> 00:07:49,810\nAnd that means you are now competing for\n\n153\n00:07:49,810 --> 00:07:53,160\naccess into that particular\nnetwork that you have.\n\n154\n00:07:53,160 --> 00:07:56,265\nNow with cable, that's what you\nreally have to contend with.\n\n155\n00:07:56,265 --> 00:07:58,592\nWith DSL though we have\nto contingents right?\n\n156\n00:07:58,592 --> 00:08:02,259\nThe idea of not only multiple people on\nthat same particular connection that may\n\n157\n00:08:02,259 --> 00:08:04,310\nbe there, it's the distance, right?\n\n158\n00:08:04,310 --> 00:08:06,560\nThat is actually where we have a lock.\n\n159\n00:08:06,560 --> 00:08:09,540\nSo the closer you are to\nthat TelCo switch,\n\n160\n00:08:09,540 --> 00:08:11,790\nthe faster you're gonna get with DSL.\n\n161\n00:08:11,790 --> 00:08:14,520\nThe further away you are,\nthe slower speeds.\n\n162\n00:08:14,520 --> 00:08:17,040\nAnd I guarantee you,\nif you're at that maximum limit,\n\n163\n00:08:17,040 --> 00:08:21,580\nyou're gonna be kind of struggling to\nget connected much faster than somebody.\n\n164\n00:08:21,580 --> 00:08:24,172\nJust a few hundred feet\naway from that switch.\n\n165\n00:08:24,172 --> 00:08:27,730\n>> Yeah and\nthat is important especially if you're\n\n166\n00:08:27,730 --> 00:08:31,480\na business environment you want\na dedicated reliable speed.\n\n167\n00:08:31,480 --> 00:08:34,590\nAnd so things like DSL and cable\naren't necessarily great for business.\n\n168\n00:08:34,590 --> 00:08:37,690\nNow I say necessarily because there's a\nlot of businesses out there that use them\n\n169\n00:08:37,690 --> 00:08:39,150\ncause there so inexpensive, right.\n\n170\n00:08:39,150 --> 00:08:43,030\nThat's kind of their benefit, but if\nyou're looking for reliable data transfer.\n\n171\n00:08:43,030 --> 00:08:44,670\nCable and DSL aren't gonna be it for you.\n\n172\n00:08:44,670 --> 00:08:48,711\nThose are where you're gonna wanna\nmove over to either a Metro Ethernet\n\n173\n00:08:48,711 --> 00:08:52,697\nconnection which has a fixed data rate,\nor a T1, E1 type solution.\n\n174\n00:08:52,697 --> 00:08:55,955\nT1's though, 1.5 megabit just\ndoesn't get you too far these days.\n\n175\n00:08:55,955 --> 00:08:57,770\nIt used to be amazing.\n\n176\n00:08:57,770 --> 00:08:58,419\n>> Yeah.\n\n177\n00:08:58,419 --> 00:09:01,248\n>> So, all right, let's see, what\nare some of the other ones we got here.\n\n178\n00:09:01,248 --> 00:09:04,840\nVSAT, all right,\nyou know about that one don't you?\n\n179\n00:09:04,840 --> 00:09:10,040\n>> The idea of VSAT for us, the acronym\nstands for, what, very small aperture.\n\n180\n00:09:11,860 --> 00:09:12,360\n>> Transmitter.\n\n181\n00:09:12,360 --> 00:09:13,310\n>> Yeah, something like that.\n\n182\n00:09:13,310 --> 00:09:13,855\n>> Transponder.\n\n183\n00:09:13,855 --> 00:09:14,714\n>> Transponder.\n\n184\n00:09:14,714 --> 00:09:15,259\nSomething like that.\n\n185\n00:09:15,259 --> 00:09:17,448\nI can't remember exactly.\n\n186\n00:09:17,448 --> 00:09:20,513\n>> This virtual satellite,\nno small aperture.\n\n187\n00:09:20,513 --> 00:09:21,953\n>> Very small aperture terminal.\n\n188\n00:09:21,953 --> 00:09:22,962\n>> Terminal.\nThere you go.\n\n189\n00:09:22,962 --> 00:09:23,790\nI told you I couldn't remember.\n\n190\n00:09:23,790 --> 00:09:27,490\nThis is for us the satellite type\nof connection that we can have.\n\n191\n00:09:27,490 --> 00:09:32,030\nAnd in terms of what we tend to talk about\nin Visa, these are the smaller dishes.\n\n192\n00:09:32,030 --> 00:09:35,640\nThese are not the 18 foot\nwide dishes that we have.\n\n193\n00:09:35,640 --> 00:09:38,580\nThese are the ones we\nhave about a meter or so.\n\n194\n00:09:38,580 --> 00:09:43,540\nIt's about three and a quarter feet or\nso, and so most satellite internet\n\n195\n00:09:43,540 --> 00:09:48,428\nconnection that you hear about may be\ngood for home users [LAUGH], maybe.\n\n196\n00:09:48,428 --> 00:09:49,832\n>> But\nthat's what you have at your house right?\n\n197\n00:09:49,832 --> 00:09:52,971\n>> That's what I have at my house and\nso there is some,\n\n198\n00:09:52,971 --> 00:09:57,220\nwhat we deal with most here,\nis the issue of latency, right?\n\n199\n00:09:57,220 --> 00:10:01,347\nIt takes a very long time for\nme to be able to connect up to anything,\n\n200\n00:10:01,347 --> 00:10:05,350\nbecause I have to shoot my\nparticular connection up into space.\n\n201\n00:10:05,350 --> 00:10:08,130\nAnd that has to be shot back\ndown through all the atmosphere\n\n202\n00:10:08,130 --> 00:10:11,200\ninto some connection over Tulsa,\nOklahoma, somewhere.\n\n203\n00:10:11,200 --> 00:10:11,720\n>> Yeah.\n\n204\n00:10:11,720 --> 00:10:15,270\nAnd it almost sounds like an exaggeration,\nbut it is reality.\n\n205\n00:10:15,270 --> 00:10:18,730\nYour data is going into\nouter freaking space.\n\n206\n00:10:18,730 --> 00:10:23,350\nIt's going out of the Earth's atmosphere\nand then being bounced back again.\n\n207\n00:10:23,350 --> 00:10:28,295\nAnd so I complain when I get\nlatency over 80 milliseconds.\n\n208\n00:10:28,295 --> 00:10:30,420\n80 milliseconds is kind of my marker.\n\n209\n00:10:30,420 --> 00:10:33,050\nI say if I'm over that,\nthings start to degrade.\n\n210\n00:10:33,050 --> 00:10:35,290\nIf I'm under 80 milliseconds, I'm happy.\n\n211\n00:10:35,290 --> 00:10:40,390\nWith satellite you can't get\nbeneath 2000 milliseconds.\n\n212\n00:10:40,390 --> 00:10:43,548\nIt's basically two seconds, because\nyour signal's got to travel so far,\n\n213\n00:10:43,548 --> 00:10:45,486\nthere's nothing you can do about it,\nright.\n\n214\n00:10:45,486 --> 00:10:49,330\nSo, not the greatest, but\nyou can get a signal anywhere.\n\n215\n00:10:49,330 --> 00:10:50,150\n>> Yeah.\n>> Right.\n\n216\n00:10:50,150 --> 00:10:54,201\nAnd so you'll see this very\nfrequently at gas stations, right.\n\n217\n00:10:54,201 --> 00:10:54,908\n>> Yep.\n\n218\n00:10:54,908 --> 00:10:55,871\n>> Any gas station.\n\n219\n00:10:55,871 --> 00:10:59,115\nDoesn't matter if you're in a big city or\na little rural area or whatever,\n\n220\n00:10:59,115 --> 00:11:00,930\nlook at the roof of the gas station there.\n\n221\n00:11:00,930 --> 00:11:03,270\nThere's almost always\na dish up on top there.\n\n222\n00:11:03,270 --> 00:11:06,470\nBecause if you have 200 gas\nstations across 3 states or\n\n223\n00:11:06,470 --> 00:11:10,340\nwhatever, it's kind of nice to have the\nsame connectivity at every one of them.\n\n224\n00:11:10,340 --> 00:11:13,510\nAnd to know that they can all connect\nup and transmit their sales numbers and\n\n225\n00:11:13,510 --> 00:11:16,590\nto have a low bandwidth,\nhigh latency line.\n\n226\n00:11:16,590 --> 00:11:18,765\nIt's fine if you're just\ntransmitting sales numbers.\n\n227\n00:11:18,765 --> 00:11:21,970\n>> If you're trying to transmit\nmore than that, not fine at all.\n\n228\n00:11:21,970 --> 00:11:24,780\nSo, you can't really do Netflix or\nanything like that.\n\n229\n00:11:24,780 --> 00:11:26,550\nSo, a lot of times you're gonna\nsee in the business world,\n\n230\n00:11:26,550 --> 00:11:28,820\nyou're probably not going\nto see a lot of this or\n\n231\n00:11:28,820 --> 00:11:32,180\nany high bandwidth applications\nyou're going to be running.\n\n232\n00:11:32,180 --> 00:11:34,410\nThere it is out there for us.\n\n233\n00:11:34,410 --> 00:11:37,020\n>> And it kinda goes hand in hand with\nnext one which is cellular 3G, 4G.\n\n234\n00:11:37,020 --> 00:11:37,640\nRight?\n\n235\n00:11:37,640 --> 00:11:42,460\nWe're starting to see\na lot of these cellular.\n\n236\n00:11:42,460 --> 00:11:43,710\nLike, what do they call them?\n\n237\n00:11:43,710 --> 00:11:45,165\nMy Fi's and stuff like.\n\n238\n00:11:45,165 --> 00:11:46,427\n>> Yeah.\n>> Let me pull up a picture here.\n\n239\n00:11:46,427 --> 00:11:49,687\nSo Verizon, AT&T, T-Mobile,\nthey've all got them now,\n\n240\n00:11:49,687 --> 00:11:51,980\nthese little boxes that you can buy.\n\n241\n00:11:51,980 --> 00:11:56,070\nAnd basically it acts like a wireless\nrouter and then it connects to the 3G or\n\n242\n00:11:56,070 --> 00:11:57,802\n4G wireless network in your area.\n\n243\n00:11:57,802 --> 00:11:59,250\nAll right?\n\n244\n00:11:59,250 --> 00:12:02,530\nThese networks have really been\nincreasing in speed lately.\n\n245\n00:12:02,530 --> 00:12:06,110\nIf you get like on a 4G LTE network,\nit's pretty snappy.\n\n246\n00:12:06,110 --> 00:12:10,440\nYou'll get a couple of megabits per second\nwith a much lower latency than satellite,\n\n247\n00:12:10,440 --> 00:12:12,960\nso it's an even better\nalternative to satellite.\n\n248\n00:12:12,960 --> 00:12:17,353\nKeep in mind though, there is almost\nalways a data cap on these things.\n\n249\n00:12:17,353 --> 00:12:23,410\nAnd so if you have a 2GB data cap, bits or\nbytes, I think it's in bytes normally.\n\n250\n00:12:23,410 --> 00:12:28,620\nYou can burn through that watching just\none movie on Netflix or something.\n\n251\n00:12:28,620 --> 00:12:30,210\nYou've got to be careful\nof that data cap but\n\n252\n00:12:30,210 --> 00:12:32,160\notherwise they're very viable connections.\n\n253\n00:12:32,160 --> 00:12:34,995\nI've heard of some people\nhaving them in their homes and\n\n254\n00:12:34,995 --> 00:12:38,814\nabandoning their broadband connection\naltogether and just using these.\n\n255\n00:12:38,814 --> 00:12:40,660\nI would kill that data cap in one day.\n\n256\n00:12:40,660 --> 00:12:41,820\nI can tell you right now.\n\n257\n00:12:41,820 --> 00:12:45,030\n>> Yeah, and that's something else that we\ndo have to remember with something like\n\n258\n00:12:45,030 --> 00:12:48,630\nVSAT as well as this,\nyou are gonna hit that data cap.\n\n259\n00:12:48,630 --> 00:12:53,760\nAnd so we laugh about it, like mine\nis 17 gigs a month, and then I hear\n\n260\n00:12:53,760 --> 00:12:58,140\nNate actually over there kinda chuckling\nlike I would kill that in an hour.\n\n261\n00:12:58,140 --> 00:13:02,299\nAnd that's what you have, and so you\ndo have some of these WAN technologies.\n\n262\n00:13:02,299 --> 00:13:07,030\nWhere they're really strictly enforced and\neven worse at times is once you in\n\n263\n00:13:07,030 --> 00:13:11,700\nthat data cap they will raise limit to\nyou like 40K or 10K in my instance.\n\n264\n00:13:11,700 --> 00:13:16,540\n>> [LAUGH] I bought a game on Steam\nthe other day that was like 17 gigs,\n\n265\n00:13:16,540 --> 00:13:20,440\nand you just look at that and\nthere goes your data cap.\n\n266\n00:13:20,440 --> 00:13:21,420\n>> That's it.\n>> Or\n\n267\n00:13:21,420 --> 00:13:24,440\nI know I've pulled a few other things,\nlike some backups here from the office\n\n268\n00:13:24,440 --> 00:13:27,230\ndown to my machine at home, and\nknocked out 10% of my data cap.\n\n269\n00:13:27,230 --> 00:13:28,654\n>> Oh yeah.\n>> So you do have to keep an eye on that\n\n270\n00:13:28,654 --> 00:13:29,722\nwith some of these connections.\n\n271\n00:13:29,722 --> 00:13:30,731\n>> Oh yeah.\n\n272\n00:13:30,731 --> 00:13:34,945\n>> When you buy a dedicated line like\na metro Ethernet line or like a T1,\n\n273\n00:13:34,945 --> 00:13:36,261\nthere is no data cap.\n\n274\n00:13:36,261 --> 00:13:39,294\nYou can push as much data as you want,\nyou've reserved that bandwidth,\n\n275\n00:13:39,294 --> 00:13:40,870\nyou can do what you want.\n\n276\n00:13:40,870 --> 00:13:45,440\nBut on these shared networks, that's where\nthere's usually a lot more stipulations\n\n277\n00:13:45,440 --> 00:13:46,750\nand you gotta plan around that.\n\n278\n00:13:47,870 --> 00:13:50,880\nAll right, number four and number eight.\n\n279\n00:13:50,880 --> 00:13:53,160\nLet's talk about these at the same time.\n\n280\n00:13:53,160 --> 00:13:58,366\nNumber four on the list is MPLS, which\nis Multi layer Packet Labels Switching.\n\n281\n00:13:58,366 --> 00:13:58,949\nAll right.\n\n282\n00:13:58,949 --> 00:14:01,594\nMPLS is a new technology.\n\n283\n00:14:01,594 --> 00:14:05,544\nI'm going to say new, it's been out for\nseven years, eight years now, but\n\n284\n00:14:05,544 --> 00:14:06,977\nit's really catching on.\n\n285\n00:14:06,977 --> 00:14:09,820\nIn the last two years it's\nreally started to catch on.\n\n286\n00:14:09,820 --> 00:14:11,480\nIt is the replacement for\n\n287\n00:14:11,480 --> 00:14:15,690\nframe relay which is an older technology\nthat's been around for 20 years.\n\n288\n00:14:15,690 --> 00:14:18,635\nBoth of which provide\nthe same concept of service.\n\n289\n00:14:18,635 --> 00:14:19,410\nRight?\n\n290\n00:14:19,410 --> 00:14:25,100\nThe idea with frame relay and MPLS is that\na point to point link between locations.\n\n291\n00:14:25,100 --> 00:14:26,530\nIt's expensive, right.\n\n292\n00:14:26,530 --> 00:14:29,750\nAnd, it's expensive for the phone company\nto offer it and it's expensive for\n\n293\n00:14:29,750 --> 00:14:31,470\nus as a customer to buy it.\n\n294\n00:14:31,470 --> 00:14:32,800\nSo, MPLS in frame really,\n\n295\n00:14:32,800 --> 00:14:36,370\nwhat they do, is they provide\na way to kind of mix two models.\n\n296\n00:14:36,370 --> 00:14:40,470\nMix the model of you having a point\nto point link between locations\n\n297\n00:14:40,470 --> 00:14:43,690\nwith the model of using a shared network,\nall right.\n\n298\n00:14:43,690 --> 00:14:47,090\nAnd, let me give you an example here so\nI can show you.\n\n299\n00:14:47,090 --> 00:14:48,280\nCan I?\n\n300\n00:14:48,280 --> 00:14:49,980\nTwo windows here, perfect.\n\n301\n00:14:49,980 --> 00:14:51,680\nSo let me draw a picture.\n\n302\n00:14:51,680 --> 00:14:55,140\nI'm gonna get artsy here which is gonna\nend badly I can tell already but,\n\n303\n00:14:55,140 --> 00:14:56,600\nwe'll try.\n\n304\n00:14:56,600 --> 00:14:58,380\nSome times I have my moments.\n\n305\n00:14:58,380 --> 00:15:02,320\nAll right,\nlet's say that you run a business and\n\n306\n00:15:02,320 --> 00:15:04,740\nyou've got a couple of different\nlocations out there,right.\n\n307\n00:15:04,740 --> 00:15:10,580\nSo you've got various offices and they're\nin different places within the city, okay.\n\n308\n00:15:10,580 --> 00:15:15,543\nWell, if I wanted to connect all of\nthese guys together, I could go out and\n\n309\n00:15:15,543 --> 00:15:18,517\nI could order point to point links, right?\n\n310\n00:15:18,517 --> 00:15:22,462\nI could order a point to point T1 here and\na point to point T1 here and\n\n311\n00:15:22,462 --> 00:15:25,755\na point to point T1 here and\nI would have my connection.\n\n312\n00:15:25,755 --> 00:15:28,530\nOkay?\nThe thing about these point to point T1s,\n\n313\n00:15:28,530 --> 00:15:31,710\nwhat the phone company doesn't\nnecessarily tell you right off the bat,\n\n314\n00:15:31,710 --> 00:15:33,910\nis that you're not buying one line.\n\n315\n00:15:33,910 --> 00:15:35,970\nYou're actually buying two lines.\n\n316\n00:15:35,970 --> 00:15:39,665\nWhen you buy a point to point link,\nyou have to buy both ends.\n\n317\n00:15:39,665 --> 00:15:40,350\nRight?\n\n318\n00:15:40,350 --> 00:15:44,540\nSo when you write that check to sign\nup for that service, you're paying for\n\n319\n00:15:44,540 --> 00:15:47,350\nthe link here at the branch office.\n\n320\n00:15:47,350 --> 00:15:50,290\nAnd you're paying for\nthe link here at the home office.\n\n321\n00:15:50,290 --> 00:15:52,520\nSo what I'm really doing is I'm buying.\n\n322\n00:15:52,520 --> 00:15:57,672\nLet's say that we've got branches one,\ntwo, three, and four, right?\n\n323\n00:15:57,672 --> 00:16:02,240\nSo at branch one, I've got to buy three\nlines, and at branch two, three, and\n\n324\n00:16:02,240 --> 00:16:04,662\nfour, I've got to buy three more lines,\n\n325\n00:16:04,662 --> 00:16:09,050\nso I'm actually having to buy a total\nof six lines to support this, right?\n\n326\n00:16:09,050 --> 00:16:12,590\nAnd a T1 in a big city,\na T1 will run you like 500 bucks a month.\n\n327\n00:16:12,590 --> 00:16:15,310\nIn a smaller city like Gainesville\nit's normally like 7 or 800 a month,\n\n328\n00:16:15,310 --> 00:16:16,940\nit's more expensive.\n\n329\n00:16:16,940 --> 00:16:18,540\nBut it adds up.\n\n330\n00:16:18,540 --> 00:16:25,180\nAnd to pay that much for 1.5 megabit\nof bandwidth, it's really painful.\n\n331\n00:16:25,180 --> 00:16:27,950\nSo the other problem is,\n\n332\n00:16:27,950 --> 00:16:33,110\nwhat happens in this model if my\nfirst branch goes offline, right?\n\n333\n00:16:33,110 --> 00:16:35,620\nSo if I have some kind of failure there,\nthe router dies or\n\n334\n00:16:35,620 --> 00:16:39,140\nwhatever, all of my branches\nare dead in the water.\n\n335\n00:16:39,140 --> 00:16:42,140\nAnd if it was a catastrophic failure\nwhere I had to move it to a new building,\n\n336\n00:16:42,140 --> 00:16:45,800\nI have to put in orders to have all\nmy T1s moved to the new location.\n\n337\n00:16:45,800 --> 00:16:48,039\nIt's not a very flexible solution.\n\n338\n00:16:49,090 --> 00:16:54,280\nSo MPLS and\nframe relay work to solve that, okay.\n\n339\n00:16:54,280 --> 00:16:57,320\nLet's talk about frame relay first,\nthen we'll talk about MPLS.\n\n340\n00:16:57,320 --> 00:16:58,630\nSo with frame relay,\n\n341\n00:16:58,630 --> 00:17:03,510\nwhat you buy is not a connection\nbetween all your different offices.\n\n342\n00:17:03,510 --> 00:17:07,570\nInstead, the phone company has a network\n\n343\n00:17:07,570 --> 00:17:11,160\nthat has switches that\nare located all across town.\n\n344\n00:17:11,160 --> 00:17:12,660\nYou can normally spot them.\n\n345\n00:17:12,660 --> 00:17:17,200\nIn a big city like New York they're\nnormally underground, you can't see them.\n\n346\n00:17:17,200 --> 00:17:19,670\nBut in a city like Gainesville you\ncan spot them all over the place.\n\n347\n00:17:19,670 --> 00:17:22,890\nThese big green bubbles that\nyou'll see out and about or\n\n348\n00:17:22,890 --> 00:17:25,300\nsometimes they stand up\ntaller like cabinets.\n\n349\n00:17:25,300 --> 00:17:27,450\nBut they're normally on the corner\nof the roads somewhere so\n\n350\n00:17:27,450 --> 00:17:29,660\nyou'll spot these green bubbles out and\nabout.\n\n351\n00:17:29,660 --> 00:17:31,760\nThese are horrible squares.\n\n352\n00:17:31,760 --> 00:17:34,485\nBut they'll be spread out\nthroughout your town.\n\n353\n00:17:34,485 --> 00:17:35,420\nRight?\nAnd\n\n354\n00:17:35,420 --> 00:17:39,340\nthe cables that run to those are normally\nunderground, but they crisscross and\n\n355\n00:17:39,340 --> 00:17:40,520\nrun between each other.\n\n356\n00:17:40,520 --> 00:17:45,530\nAnd so they're all interconnected,\nusually through multiple paths.\n\n357\n00:17:45,530 --> 00:17:50,420\nBecause the phone company is trying\nto build for fail over and so on.\n\n358\n00:17:50,420 --> 00:17:54,490\nAnd so when you go out and you buy a frame\nrelay line, you might be saying, hey I\n\n359\n00:17:54,490 --> 00:18:00,250\nneed to connect one of my branches to the\nother three branches that are out there.\n\n360\n00:18:00,250 --> 00:18:04,650\nInstead of buying point to point lines\nthat run directly from branch to branch,\n\n361\n00:18:04,650 --> 00:18:09,265\nall you have to buy is a link\nthat runs from the branch\n\n362\n00:18:09,265 --> 00:18:12,325\nto the nearest telco switch.\n\n363\n00:18:12,325 --> 00:18:16,505\nSo when we buy a frame relay line,\nyou're buying one link\n\n364\n00:18:16,505 --> 00:18:21,445\nthat runs to the nearest physical\ntelephone company switch to that location.\n\n365\n00:18:21,445 --> 00:18:25,025\nSo it's not normally more than\na quarter of a mile away, tops.\n\n366\n00:18:25,025 --> 00:18:26,239\nIt's normally very, very close.\n\n367\n00:18:27,730 --> 00:18:33,980\nThen the phone company sets up what are\ncalled PVCs, permanent virtual circuits.\n\n368\n00:18:33,980 --> 00:18:37,760\nA PVC, it's exactly what the name implies.\n\n369\n00:18:37,760 --> 00:18:39,200\nIt's a virtual circuit.\n\n370\n00:18:39,200 --> 00:18:44,250\nIt's a map that's put in across\nthe network, and it basically just says,\n\n371\n00:18:44,250 --> 00:18:48,220\nhey, let's connect one side\nof this network to the other.\n\n372\n00:18:48,220 --> 00:18:50,110\nAnd, can I get a bigger brush?\n\n373\n00:18:51,910 --> 00:18:53,170\nThere we go.\n\n374\n00:18:53,170 --> 00:18:56,110\nAnd it will say,\nlet's build this connection.\n\n375\n00:18:56,110 --> 00:19:02,620\nAnd it may run across several switches\non its way between those two offices.\n\n376\n00:19:02,620 --> 00:19:04,881\nOkay, now when those\ntwo offices look at it,\n\n377\n00:19:04,881 --> 00:19:08,110\nthey think that they are directly\nconnected to each other.\n\n378\n00:19:08,110 --> 00:19:11,260\nThey don't realize that they are bouncing\nacross all of these switches.\n\n379\n00:19:11,260 --> 00:19:13,550\nAnd the phone company might\nhave a hundred, a thousand,\n\n380\n00:19:13,550 --> 00:19:16,940\nten thousand other customers\non those same switches, but\n\n381\n00:19:16,940 --> 00:19:21,740\nyou've got your dedicated bandwidth, your\nphone across and they build the circuit.\n\n382\n00:19:21,740 --> 00:19:26,040\nNow the really cool part here\nis that the virtual circuits.\n\n383\n00:19:26,040 --> 00:19:31,250\nSo the phone company can create\nmore virtual circuits that map\n\n384\n00:19:31,250 --> 00:19:35,940\nthat home office to\nthe other three branches so\n\n385\n00:19:35,940 --> 00:19:40,770\nthat I do have a link at each branch.\n\n386\n00:19:41,770 --> 00:19:44,970\nBut I only need one link\nat the home office and\n\n387\n00:19:44,970 --> 00:19:48,470\nthe three virtual circuits can\npass over that same link, right.\n\n388\n00:19:48,470 --> 00:19:49,370\nVery, very cool stuff.\n\n389\n00:19:51,060 --> 00:19:52,530\nWith frame relay,\n\n390\n00:19:52,530 --> 00:19:56,910\nthis is done through maps implemented\nright here on the switches.\n\n391\n00:19:56,910 --> 00:20:00,670\nThey have circuit numbers and\nthe switches have the circuits to find and\n\n392\n00:20:00,670 --> 00:20:03,650\nthen where to send the data, so\nthey know where to go across the switches.\n\n393\n00:20:03,650 --> 00:20:04,280\nRight.\n\n394\n00:20:04,280 --> 00:20:07,390\nThat means the phone company has\nto do all the programming, and\n\n395\n00:20:07,390 --> 00:20:10,440\nit means that all of our equipment\nhas to be frame relay aware.\n\n396\n00:20:10,440 --> 00:20:12,370\nIt has to know about the frames and\nhow to tag them and\n\n397\n00:20:12,370 --> 00:20:14,620\nhow to put them on the right circuit and\nall that.\n\n398\n00:20:14,620 --> 00:20:19,470\nFrame relay is a analog technology,\nand so it runs,\n\n399\n00:20:19,470 --> 00:20:22,940\nwell, it's a digital technology, but it's\ndesigned to run on analog serial lines.\n\n400\n00:20:22,940 --> 00:20:26,960\nAnd so it's connecting on these, I'm gonna\nbe careful with my terminology here,\n\n401\n00:20:26,960 --> 00:20:28,500\nbecause it is a digital technology.\n\n402\n00:20:28,500 --> 00:20:30,040\n>> Yeah.\n>> It's one's and zero's.\n\n403\n00:20:30,040 --> 00:20:33,640\nBut it's being run through telco switches,\nwhich were all built as analog and\n\n404\n00:20:33,640 --> 00:20:35,190\nthen kind of retrofit for digital.\n\n405\n00:20:35,190 --> 00:20:37,490\nSo we kind of skirt the lines on it.\n\n406\n00:20:37,490 --> 00:20:41,150\nBut the point that I'm trying to make and\nnot doing a good job of it, is that\n\n407\n00:20:41,150 --> 00:20:45,330\nyour router has to basically be able\nto support that frame relay connection.\n\n408\n00:20:45,330 --> 00:20:46,240\nNot every router does.\n\n409\n00:20:46,240 --> 00:20:47,820\n>> Right.\n>> Not the most common thing.\n\n410\n00:20:47,820 --> 00:20:50,340\nAnd that's where MPLS steps in.\n\n411\n00:20:50,340 --> 00:20:55,250\nMPLS comes in and says,\nhey why don't we do the same idea but\n\n412\n00:20:55,250 --> 00:20:57,000\nnot restrict ourselves to copper.\n\n413\n00:20:57,000 --> 00:21:00,770\nLet's make it where this can go over\nfiber or over Ethernet or over anything.\n\n414\n00:21:00,770 --> 00:21:02,900\nWe don't care what the cable type is.\n\n415\n00:21:02,900 --> 00:21:04,360\nIt can be old analog stuff.\n\n416\n00:21:04,360 --> 00:21:05,550\nIt can be new digital stuff.\n\n417\n00:21:05,550 --> 00:21:07,200\nIt can be whatever.\n\n418\n00:21:07,200 --> 00:21:10,970\nAnd instead of circuit numbers,\nwe'll use labels.\n\n419\n00:21:10,970 --> 00:21:14,710\nAnd now every frame that we\nsend from a home office or\n\n420\n00:21:14,710 --> 00:21:16,720\nbranch or whatever,\ngets a label stuck on it.\n\n421\n00:21:16,720 --> 00:21:20,140\nAnd when the phone company receives it\nthey can look at the label and say,\n\n422\n00:21:20,140 --> 00:21:22,540\nall right based on that label\nhere's where I need to send it and\n\n423\n00:21:22,540 --> 00:21:24,600\nthey can send it to the right\ndestination and stuff.\n\n424\n00:21:24,600 --> 00:21:30,195\nVery flexible just like frame\nrelay just more diverse, right?\n\n425\n00:21:30,195 --> 00:21:31,605\nIt works over more media types.\n\n426\n00:21:31,605 --> 00:21:35,530\n>> Yeah.\n>> Now the neatest part, in my opinion,\n\n427\n00:21:35,530 --> 00:21:38,280\nof all of this is that since it's virtual,\nsince it's all\n\n428\n00:21:38,280 --> 00:21:42,180\nvirtually mapped on the phone company,\nthey can change it at any time.\n\n429\n00:21:42,180 --> 00:21:47,310\nSo if I have a big failure, right,\nso if something goes wrong and\n\n430\n00:21:47,310 --> 00:21:50,850\nthe home office just fails I\ncan call up the phone company.\n\n431\n00:21:50,850 --> 00:21:54,950\nI can say, hey I've got all these virtual\ncircuits mapped back to the home office.\n\n432\n00:21:54,950 --> 00:21:58,050\nWe just opened up a new disaster\nrecovery center, or whatever,\n\n433\n00:21:58,050 --> 00:22:00,470\nmaybe this is my disaster\nrecovery center here.\n\n434\n00:22:00,470 --> 00:22:04,790\nI can say, hey remap all the circuits so\nthey connect over there.\n\n435\n00:22:04,790 --> 00:22:08,380\nAnd then the phone company can take all\nthese circuits and map them over there and\n\n436\n00:22:08,380 --> 00:22:09,880\nkind of trim off this one.\n\n437\n00:22:09,880 --> 00:22:13,080\nSo they can redo that and it's virtual,\nthey didn't even have to send a technician\n\n438\n00:22:13,080 --> 00:22:14,580\nout, they just plug it into\nthe computer and it's done.\n\n439\n00:22:17,720 --> 00:22:18,850\nSo really cool stuff there.\n\n440\n00:22:18,850 --> 00:22:19,420\nReally flexible.\n\n441\n00:22:19,420 --> 00:22:22,280\nObviously not anything that a home\nuser would ever need right.\n\n442\n00:22:22,280 --> 00:22:26,166\nSo as a home user you're not normally\ngonna have frame relay or MPLS but\n\n443\n00:22:26,166 --> 00:22:30,580\nat a business, right, where you\nhave multiple locations, MPLS and\n\n444\n00:22:30,580 --> 00:22:33,310\nframe relay, very, very cool, very handy.\n\n445\n00:22:33,310 --> 00:22:37,250\nNow on the exam they don't expect\nyou to configure MPLS because\n\n446\n00:22:37,250 --> 00:22:38,255\nmost of us never have to.\n\n447\n00:22:38,255 --> 00:22:40,770\n>> Yeah.\n>> The phone company does everything and\n\n448\n00:22:40,770 --> 00:22:42,710\nMPLS is invisible to us.\n\n449\n00:22:42,710 --> 00:22:45,680\nBut for those of you that go on to like\nthe service provider certification,\n\n450\n00:22:45,680 --> 00:22:49,870\nCCMP service provider and stuff like that,\nyou will be expected to do\n\n451\n00:22:49,870 --> 00:22:55,550\nthe MPLS configurations and\nit's not hard but it's not easy.\n\n452\n00:22:55,550 --> 00:22:56,560\nIt's kind of in between.\n\n453\n00:22:56,560 --> 00:22:59,930\nIt's not that big of a deal and the more\nyou do it, the more you get used to it.\n\n454\n00:22:59,930 --> 00:23:03,390\nIt's basically just saying here's\nattaching labels, and then you\n\n455\n00:23:03,390 --> 00:23:06,230\ndo what's called popping and swapping\nof the labels as you move it along.\n\n456\n00:23:06,230 --> 00:23:09,120\nAnd so you just define all that,\nand then it maps it out and\n\n457\n00:23:09,120 --> 00:23:09,900\nmoves along the networks.\n\n458\n00:23:09,900 --> 00:23:10,480\nKinda cool.\n\n459\n00:23:10,480 --> 00:23:10,980\n>> Yeah.\n\n460\n00:23:12,710 --> 00:23:14,270\n>> All right,\nwhat's next on our list, Ronnie?\n\n461\n00:23:14,270 --> 00:23:16,510\n>> I think we have VPN here.\n\n462\n00:23:16,510 --> 00:23:19,290\nAs I think is our last of the\n>> And ISDN.\n\n463\n00:23:19,290 --> 00:23:19,870\n>> Oh, ISDN.\n\n464\n00:23:19,870 --> 00:23:22,411\n>> Gotta memorize ISDN, right?\n\n465\n00:23:22,411 --> 00:23:25,140\nSo VPN, you wanna tackle VPN?\n\n466\n00:23:25,140 --> 00:23:28,510\n>> We can about the idea of VPNs here for\na little bit.\n\n467\n00:23:28,510 --> 00:23:30,450\nVPN is our Virtual Private Network.\n\n468\n00:23:30,450 --> 00:23:34,580\nNow, when we start talking about\nthe idea of using VPN technologies,\n\n469\n00:23:34,580 --> 00:23:40,050\nthis is where we are moving away\nfrom technologies like frame relay,\n\n470\n00:23:40,050 --> 00:23:44,060\nhaving to be dependent upon that\nparticular type of service anymore.\n\n471\n00:23:44,060 --> 00:23:47,063\nAnd what we can do is actually go\nover a shared network here, and\n\n472\n00:23:47,063 --> 00:23:50,821\nstill have that same private connection\nbetween two sides, is what we can do.\n\n473\n00:23:50,821 --> 00:23:54,074\nSo we can use our regular internet\nconnection without having to depend\n\n474\n00:23:54,074 --> 00:23:58,330\non another total network, to allow us\nto connections that we need in between.\n\n475\n00:23:58,330 --> 00:24:00,030\nAt both ends we configure what we need to.\n\n476\n00:24:00,030 --> 00:24:05,780\nAnd that way we don't actually\npay an extra subscription fee for\n\n477\n00:24:05,780 --> 00:24:07,740\na particular other network\nthat we have to go across.\n\n478\n00:24:07,740 --> 00:24:12,440\nWe use Internet connection to make\nthe connection happen for us instead.\n\n479\n00:24:12,440 --> 00:24:14,890\n>> Yeah, and you know what I like\nabout VPNs is that it works on darn\n\n480\n00:24:14,890 --> 00:24:15,420\nnear anything.\n\n481\n00:24:15,420 --> 00:24:18,540\nSo, you can be on fiber, copper, wireless.\n\n482\n00:24:18,540 --> 00:24:20,330\nYou can be on frame relay, mpls.\n\n483\n00:24:20,330 --> 00:24:21,940\nYou can be on dial-up.\n\n484\n00:24:21,940 --> 00:24:23,370\nYou can be on your home network.\n\n485\n00:24:23,370 --> 00:24:25,800\nYou can be on Starbucks' network.\n\n486\n00:24:25,800 --> 00:24:30,330\nYou build up that secure tunnel, and\nnow you know that your data is protected.\n\n487\n00:24:30,330 --> 00:24:33,290\nAnd I use BPN all the time.\n\n488\n00:24:33,290 --> 00:24:38,880\nFrom a business perspective for whatever,\njust to make sure my data is secure.\n\n489\n00:24:38,880 --> 00:24:44,270\nBut on a personal level, if I'm on a hotel\nnetwork, I don't trust the hotel network.\n\n490\n00:24:44,270 --> 00:24:47,360\nA lot of times they have a lot of ports,\nwhich is kind of annoying.\n\n491\n00:24:47,360 --> 00:24:49,470\nAnd so I'll VPN into my home.\n\n492\n00:24:49,470 --> 00:24:51,750\nI've got a little firewall set up,\nso I VPN into it, and\n\n493\n00:24:51,750 --> 00:24:56,710\nthen I can browse the network as if\nI was at home, and it's all secured.\n\n494\n00:24:56,710 --> 00:25:00,740\nSo I don't have to worry about malicious\nactivity there on the hotel network.\n\n495\n00:25:00,740 --> 00:25:02,900\nSo really cool stuff there.\n\n496\n00:25:02,900 --> 00:25:04,870\nIt's definitely something that you'll use.\n\n497\n00:25:04,870 --> 00:25:10,350\nI do think it's a little suspect that\nCisco puts it under the WAN technologies\n\n498\n00:25:10,350 --> 00:25:14,810\nbecause VPNs aren't actually\na WAN technology themselves.\n\n499\n00:25:14,810 --> 00:25:18,620\nThere is something you use on top of\na WAN, on top of a Wide Area Network.\n\n500\n00:25:18,620 --> 00:25:21,480\nOn a Local Area Network\nyou really don't need VPNs\n\n501\n00:25:21,480 --> 00:25:23,600\nbecause your local area\nnetwork should be trusted.\n\n502\n00:25:23,600 --> 00:25:25,630\nIt should be a trusted network anyway, so\n\n503\n00:25:25,630 --> 00:25:27,790\nyou shouldn't have to encrypt\neverything you send across it.\n\n504\n00:25:27,790 --> 00:25:29,120\nSo that's why they throw it.\n\n505\n00:25:29,120 --> 00:25:33,540\nYou use VPNs on a WAN, so\nmaybe it counts as a WAN\n\n506\n00:25:35,170 --> 00:25:37,920\ntechnology, but\nnot actually a WAN itself, I don't know.\n\n507\n00:25:37,920 --> 00:25:40,620\nBut all the other ones\nare actually parts of a WAN.\n\n508\n00:25:40,620 --> 00:25:42,200\nThis is the one that kind of strays off.\n\n509\n00:25:42,200 --> 00:25:45,080\n>> Yeah, a lot of time when you actually\nstart seeing this in terms of reading\n\n510\n00:25:45,080 --> 00:25:46,620\nabout it in books and stuff.\n\n511\n00:25:46,620 --> 00:25:50,580\nThey tell you really the number one\nreason for using VPNs is actually cost.\n\n512\n00:25:50,580 --> 00:25:52,540\nWhich is kinda weird because I\nremember the first time I thought\n\n513\n00:25:52,540 --> 00:25:54,790\nwell why the heck would\nthat cost a lot less\n\n514\n00:25:54,790 --> 00:25:58,060\nuntil I started realizing all I\nneed is an internet connection.\n\n515\n00:25:58,060 --> 00:26:00,900\nI don't need to provide for\na T1 but I have to provide for\n\n516\n00:26:00,900 --> 00:26:01,970\na frame relay connection.\n\n517\n00:26:01,970 --> 00:26:06,310\nIn other words another private network\nhere just over the internet connection.\n\n518\n00:26:06,310 --> 00:26:08,640\nAnd setting it up at both\nends is really the key.\n\n519\n00:26:08,640 --> 00:26:12,500\n>> And then the last entry you have\nis probably the one you're least\n\n520\n00:26:12,500 --> 00:26:15,170\nlikely to see, which is ISDN.\n\n521\n00:26:15,170 --> 00:26:17,800\nISDN for all intents and\npurposes is really dead.\n\n522\n00:26:17,800 --> 00:26:19,570\nYou can still buy ISDN lines, though.\n\n523\n00:26:19,570 --> 00:26:23,300\nIntegrated Services Digital Network\nis what it stands for.\n\n524\n00:26:23,300 --> 00:26:27,780\nAnd basically it's an idea from\nthe 80s that phone lines are nice, but\n\n525\n00:26:27,780 --> 00:26:28,590\nthey're analog.\n\n526\n00:26:28,590 --> 00:26:31,900\nAnd so they're limited to basically\n53 K of data here in the US.\n\n527\n00:26:31,900 --> 00:26:34,620\n56 K outside of the US.\n\n528\n00:26:34,620 --> 00:26:38,390\nBut ISDN says let's take those\nanalog lines and turn them digital.\n\n529\n00:26:38,390 --> 00:26:41,550\nAnd so it's a digital phone line,\nand on a digital phone line,\n\n530\n00:26:41,550 --> 00:26:45,520\nyou can actually get 64k of data\nper channel, and in the US.\n\n531\n00:26:45,520 --> 00:26:47,690\nWhen you buy a ISDM line you\nget two of those channels, so\n\n532\n00:26:47,690 --> 00:26:49,590\nyou get 128k of bandwidth.\n\n533\n00:26:49,590 --> 00:26:54,320\nNow, in the 80s, I would have\ndrooled over a 128k of bandwidth,\n\n534\n00:26:54,320 --> 00:26:57,210\neven in the 90s I would have\ndrooled over 128k of bandwidth.\n\n535\n00:26:57,210 --> 00:26:59,110\nFor at least part of the 90s.\n\n536\n00:26:59,110 --> 00:27:05,385\nToday we laugh at 128k, and if I got a\n128k on my cell phone, I'd be ticked off.\n\n537\n00:27:05,385 --> 00:27:08,060\n>> [LAUGH]\n>> So it's real ideal anymore.\n\n538\n00:27:08,060 --> 00:27:10,620\nThe biggest advantage of\nISDN is that pretty much\n\n539\n00:27:10,620 --> 00:27:13,920\nanywhere you can get a phone\nline you can get an ISDN line.\n\n540\n00:27:13,920 --> 00:27:18,670\nAnd for video conferencing, for years\nthe standard in video conferencing was\n\n541\n00:27:18,670 --> 00:27:21,950\nthat for full motion, realistic,\n30 frames per second.\n\n542\n00:27:21,950 --> 00:27:26,810\nYou needed at least 384K of bandwidth so\nyou could get three ISDN lines,\n\n543\n00:27:26,810 --> 00:27:28,070\nmultiplex them together.\n\n544\n00:27:28,070 --> 00:27:31,010\nAnd there was your 384K off you go, right?\n\n545\n00:27:31,010 --> 00:27:32,970\nBut that's changed over the years.\n\n546\n00:27:32,970 --> 00:27:34,950\nEven your crummiest T1 line,\n\n547\n00:27:34,950 --> 00:27:38,145\nI mean your crummiest DSL line would\nget you better bandwidth than that.\n\n548\n00:27:38,145 --> 00:27:39,310\n>> [LAUGH]\n>> And so\n\n549\n00:27:39,310 --> 00:27:43,140\nISDN line, you really just don't\nsee those being run anymore.\n\n550\n00:27:43,140 --> 00:27:44,910\n>> And even tough they mention it here for\n\n551\n00:27:44,910 --> 00:27:49,120\nthe exam, it's mentioning it just as\none of the different LAN technologies.\n\n552\n00:27:49,120 --> 00:27:52,560\nOn the earliest exam that I remember,\nthey actually had you configuring ISDN.\n\n553\n00:27:52,560 --> 00:27:56,410\nBut you don't have to worry about\ndoing that in today's exam.\n\n554\n00:27:56,410 --> 00:27:57,710\n>> Thank goodness.\n\n555\n00:27:57,710 --> 00:28:00,960\nRonnie and I have both been CCNA's for\n\n556\n00:28:00,960 --> 00:28:05,520\na long time and over the years\ntechnologies will slowly get erased.\n\n557\n00:28:05,520 --> 00:28:08,550\nThe ISDN stuff it was such\na pain because it took like\n\n558\n00:28:08,550 --> 00:28:12,390\nfifteen to twenty commands to get\nan ISDN line set up on our router.\n\n559\n00:28:12,390 --> 00:28:14,100\nJust a lot of commands.\n\n560\n00:28:14,100 --> 00:28:15,480\nSo that was a big pain.\n\n561\n00:28:15,480 --> 00:28:18,480\nWhat are some of the things that\nI'm glad to have seen gone?\n\n562\n00:28:18,480 --> 00:28:22,880\nIPXSPX, I'm glad that's gone,\nthat was always a pain.\n\n563\n00:28:22,880 --> 00:28:27,220\n>> But ISDN is a good one,\nthey got rid of it.\n\n564\n00:28:27,220 --> 00:28:30,015\n>> All right so that's kind of our general\noverview of the ten different connection\n\n565\n00:28:30,015 --> 00:28:31,300\ntypes they call out there.\n\n566\n00:28:31,300 --> 00:28:34,020\nFor the exam, you wanna be able\nto recognize them conceptually.\n\n567\n00:28:34,020 --> 00:28:37,490\nDon't expect a visual, like,\nwhich one is a picture of a T1?\n\n568\n00:28:37,490 --> 00:28:40,420\nWell, a T1 is just two\ncopper wires twisted.\n\n569\n00:28:40,420 --> 00:28:42,440\nThere's not really anything\nto identify there.\n\n570\n00:28:42,440 --> 00:28:46,290\nAnd if we kind of went down the line,\nISDM, two copper wires twisted.\n\n571\n00:28:46,290 --> 00:28:48,020\nDSL, two copper wires twisted.\n\n572\n00:28:48,020 --> 00:28:50,740\nSo it's really pretty much the same,\nit's gonna be the concepts,\n\n573\n00:28:50,740 --> 00:28:54,790\nthe characteristics of each, and\nkind of understanding that difference.\n\n574\n00:28:56,030 --> 00:28:57,710\nBut then we get to the fun stuff,\n\n575\n00:28:57,710 --> 00:29:01,040\nthey want us to do some configurations,\nactually.\n\n576\n00:29:01,040 --> 00:29:04,180\nGetting some of this stuff set up and\nhow it's implemented and so\n\n577\n00:29:04,180 --> 00:29:06,850\nthat's what we're going to be doing for\nthe rest of the show really right.\n\n578\n00:29:06,850 --> 00:29:09,060\n>> Yeah we're right at our break so.\n\n579\n00:29:09,060 --> 00:29:10,060\n>> Good point.\n\n580\n00:29:10,060 --> 00:29:11,480\n>> We'll come back and do that.\n\n581\n00:29:11,480 --> 00:29:12,470\n>> All right so let's stop here.\n\n582\n00:29:12,470 --> 00:29:13,270\nWe're going to take a break.\n\n583\n00:29:13,270 --> 00:29:17,440\nWhen we get back, actually configuring\nsome of the WAN technologies and\n\n584\n00:29:17,440 --> 00:29:18,290\nhaving some fun there.\n\n585\n00:29:18,290 --> 00:29:19,500\nSo stay tuned.\n\n586\n00:29:19,500 --> 00:29:23,018\nWe'll be back after this.\n\n587\n00:29:23,018 --> 00:29:28,950\n[SOUND] All right,\nwelcome back, everybody.\n\n588\n00:29:28,950 --> 00:29:31,480\nSo what we're gonna do now is\nwe're gonna take a look at\n\n589\n00:29:31,480 --> 00:29:34,340\nfiguring some of the lines that\nwe just talked about, right?\n\n590\n00:29:34,340 --> 00:29:36,240\nBecause it's just one thing to\ntalk about the characteristics and\n\n591\n00:29:36,240 --> 00:29:37,690\nanother to see them in action.\n\n592\n00:29:37,690 --> 00:29:38,510\n>> Yeah.\n\n593\n00:29:38,510 --> 00:29:40,670\nFor our first initial configuration for\n\n594\n00:29:40,670 --> 00:29:42,680\nus, we're going to go old school,\nis what we're going to do.\n\n595\n00:29:42,680 --> 00:29:45,170\nWe're going to talk about\nthe idea of using sear lines.\n\n596\n00:29:45,170 --> 00:29:48,790\nNow for us, a sear line was actually the\noriginal connection that we would've had\n\n597\n00:29:48,790 --> 00:29:50,470\nbetween two different sites for us.\n\n598\n00:29:50,470 --> 00:29:54,270\nAnd so for us, this is the basic\nconfiguration that Cisco wants you to\n\n599\n00:29:54,270 --> 00:29:56,050\nat least have an understanding of.\n\n600\n00:29:56,050 --> 00:29:58,260\nThat's what we're gonna do.\n\n601\n00:29:58,260 --> 00:30:01,600\n>> So I built up a little lab for\nus prior to the show, and\n\n602\n00:30:01,600 --> 00:30:05,700\nlet me just show you guys a map here so\nyou can see what we've got.\n\n603\n00:30:05,700 --> 00:30:10,000\nAnd basically, the way this lab\nworks is we got four routers and\n\n604\n00:30:10,000 --> 00:30:14,740\nlet me make that a little bigger so\nwe can actually read it.\n\n605\n00:30:14,740 --> 00:30:16,220\nSo we got old router1 here and\n\n606\n00:30:16,220 --> 00:30:21,220\nrouter is gonna serve as like our\ncorporate headquarters in this example.\n\n607\n00:30:21,220 --> 00:30:24,662\nAnd it's got connections\nout to router2 and\n\n608\n00:30:24,662 --> 00:30:27,477\nrouter3, let's think of those\nas like branch offices.\n\n609\n00:30:27,477 --> 00:30:30,980\nAnd end router4 that'll be\nlike a branch office also.\n\n610\n00:30:30,980 --> 00:30:32,610\nSo that's kind of\nthe network that we have.\n\n611\n00:30:32,610 --> 00:30:36,910\nNow I want to start with\npoint to point links, right?\n\n612\n00:30:36,910 --> 00:30:41,850\nSo a link from router1 to router4 that\nis a dedicated point to point link.\n\n613\n00:30:41,850 --> 00:30:43,290\nThe expensive stuff and\n\n614\n00:30:43,290 --> 00:30:46,970\nthen we'll move into like a shared\nlink like frame relay, all right.\n\n615\n00:30:46,970 --> 00:30:50,820\nNow, with a point to point link, we've got\na couple of choices that are out there and\n\n616\n00:30:50,820 --> 00:30:54,040\nthe first link is really,\nif we get like a T1,\n\n617\n00:30:54,040 --> 00:30:58,040\na serial based line that\nconnects router1 to router4.\n\n618\n00:30:58,040 --> 00:31:01,170\nSo, I've got one of those\ndesignated here with the red line.\n\n619\n00:31:01,170 --> 00:31:05,470\nWe can also go with an Ethernet connection\nif we had like a metro e connection.\n\n620\n00:31:05,470 --> 00:31:06,430\nBut metro E connections.\n\n621\n00:31:06,430 --> 00:31:08,340\nThere's not all that much\nyou configure on them.\n\n622\n00:31:08,340 --> 00:31:09,690\nRight?\nYou really just stick an IP\n\n623\n00:31:09,690 --> 00:31:10,650\non both ends and you're done.\n\n624\n00:31:10,650 --> 00:31:12,580\n>> Right.\n>> Well, we'll see an exception to that\n\n625\n00:31:12,580 --> 00:31:14,410\nafter the next break.\n\n626\n00:31:14,410 --> 00:31:18,480\nBut let's start right here with this\nserial link between router1 and router4.\n\n627\n00:31:18,480 --> 00:31:20,410\nLet's say that we call up\nthe phone company, and we said,\n\n628\n00:31:20,410 --> 00:31:22,200\nhey I need a T1 line.\n\n629\n00:31:22,200 --> 00:31:23,210\nCan you sell me a T1?\n\n630\n00:31:23,210 --> 00:31:24,770\nAnd they say yeah, and they do it.\n\n631\n00:31:24,770 --> 00:31:27,920\nThey put it in, and you stick your\nrouters on each end of it, and\n\n632\n00:31:27,920 --> 00:31:28,992\nnow you need to get it turned up.\n\n633\n00:31:28,992 --> 00:31:29,740\nAll right?\n\n634\n00:31:29,740 --> 00:31:35,390\nIt's really not that complex of a process,\nso let's take a look at what's involved.\n\n635\n00:31:35,390 --> 00:31:40,230\n>> So remember that when the service\nproviders goes and puts that in.\n\n636\n00:31:40,230 --> 00:31:43,829\nIt's up to you as a technician\nto configure both ends of that,\n\n637\n00:31:43,829 --> 00:31:46,193\nto make it work across that connection.\n\n638\n00:31:46,193 --> 00:31:49,070\n>> So we're gonna start off\nhere at the main office router.\n\n639\n00:31:52,010 --> 00:31:56,798\n>> And I'm just verifying\nthe configuration before I dive in.\n\n640\n00:31:56,798 --> 00:32:00,750\nIt's serial 1/1 interface,\nand as I look at it here,\n\n641\n00:32:00,750 --> 00:32:03,940\nthis is just the default\nCisco configuration.\n\n642\n00:32:03,940 --> 00:32:07,470\nSerial 1-1 has no IP\naddress It shut down and\n\n643\n00:32:07,470 --> 00:32:12,340\nthere's a couple of other default commands\nstuck in here like serial restart delay.\n\n644\n00:32:12,340 --> 00:32:13,570\nI didn't put that in there,\n\n645\n00:32:13,570 --> 00:32:18,240\nit's just part of the default config,\nand we're gonna go turn this line up so\n\n646\n00:32:18,240 --> 00:32:21,740\nit's connected to the other side,\nand go through our basic processes.\n\n647\n00:32:21,740 --> 00:32:26,150\nWell, one of the neat things about\nCisco routers is that they are actually\n\n648\n00:32:26,150 --> 00:32:30,070\nconfigured to pretty much auto\nsense anything that you need.\n\n649\n00:32:30,070 --> 00:32:34,500\nSo we can get away with\nan extremely minimal configuration\n\n650\n00:32:34,500 --> 00:32:37,310\nto turn this red link up right here.\n\n651\n00:32:37,310 --> 00:32:41,650\nIf fact on a normal line where the phone\ncompany isn't messing with us to much,\n\n652\n00:32:41,650 --> 00:32:45,785\nthen we should just be able to turn\nthe link on, and assign some IP addresses.\n\n653\n00:32:45,785 --> 00:32:47,400\nRight.\nLet's try that out.\n\n654\n00:32:47,400 --> 00:32:51,419\nSo I'm going to get into\ninterface serial 1/1,\n\n655\n00:32:51,419 --> 00:32:55,070\nI'll say IP address 172.16.1.1.\n\n656\n00:32:58,228 --> 00:33:00,086\nAnd I'll say no shutdown.\n\n657\n00:33:00,086 --> 00:33:00,887\nAll right?\n\n658\n00:33:00,887 --> 00:33:05,350\nSo that's gonna turn that link on and\nthere it goes.\n\n659\n00:33:05,350 --> 00:33:09,300\nNow on a serial link you may see some\ninteresting things when you turn\n\n660\n00:33:09,300 --> 00:33:10,000\nthese lines on.\n\n661\n00:33:10,000 --> 00:33:11,650\nLike I did a no shutdown and,\n\n662\n00:33:11,650 --> 00:33:16,490\nsee how it says it changed date to up and\nthen line protocol changed date to up.\n\n663\n00:33:16,490 --> 00:33:19,590\nSo, remember this is,\nis basically like layer one and layer two.\n\n664\n00:33:19,590 --> 00:33:22,970\nSo, layer one came up cuz I did\nno shutdown, that always happens.\n\n665\n00:33:22,970 --> 00:33:26,790\nLayer two came up, which was\nthe software part of the link, right.\n\n666\n00:33:26,790 --> 00:33:28,530\nThe layer to the data link layer.\n\n667\n00:33:28,530 --> 00:33:32,170\nNow, this link will likely\ngo back down again,\n\n668\n00:33:32,170 --> 00:33:34,310\nthere it goes,\nthat's what I was waiting on.\n\n669\n00:33:34,310 --> 00:33:36,060\nSee how it went back down again?\n\n670\n00:33:36,060 --> 00:33:36,930\nNot layer one.\n\n671\n00:33:36,930 --> 00:33:38,010\nLayer one is still happy.\n\n672\n00:33:38,010 --> 00:33:40,830\nBut layer two,\nthe data link layer, has dropped.\n\n673\n00:33:40,830 --> 00:33:44,530\nAnd that's because the other end of\nthe line is not configured yet, right.\n\n674\n00:33:44,530 --> 00:33:47,000\nI haven't turned the link on over there.\n\n675\n00:33:47,000 --> 00:33:50,700\nBut if I do a show IP interface brief,\n\n676\n00:33:52,400 --> 00:33:58,490\nwhat you'll see is that serial line,\nSerial 1/1 with a up down status.\n\n677\n00:33:58,490 --> 00:34:02,256\nNow that's usually a great indicator that\nthere's a problem with the other end or\n\n678\n00:34:02,256 --> 00:34:03,849\na problem with the phone company.\n\n679\n00:34:06,958 --> 00:34:09,838\nNow let me just jump over to router four,\nwhere I'll do the same thing.\n\n680\n00:34:12,208 --> 00:34:15,759\nSo I'm gonna get into\ninterface serial 1/1.\n\n681\n00:34:15,759 --> 00:34:20,788\nAnd I'll say IP address 172.16.1.2.\n\n682\n00:34:20,788 --> 00:34:23,807\nI did .1 on the other side.\n\n683\n00:34:23,807 --> 00:34:24,352\nAnd you know what?\n\n684\n00:34:24,352 --> 00:34:28,000\nActually let me do .4 so that I'm\nkeeping it with the router number.\n\n685\n00:34:28,000 --> 00:34:28,960\nBe easier for me to remember.\n\n686\n00:34:30,090 --> 00:34:31,910\nAnd I'll do a no shutdown.\n\n687\n00:34:31,910 --> 00:34:34,760\nAnd I expect to see layer one and\nlayer two come up, right.\n\n688\n00:34:34,760 --> 00:34:37,445\nSo I should get two status messages and\nthere they go.\n\n689\n00:34:37,445 --> 00:34:38,920\nRight.\n\n690\n00:34:38,920 --> 00:34:43,320\nBut the difference here is, unless\nthe phone company is messing with us,\n\n691\n00:34:43,320 --> 00:34:46,552\nthen the line should stay up and\nbe happy, and not come back out.\n\n692\n00:34:46,552 --> 00:34:47,910\nAll right.\n\n693\n00:34:47,910 --> 00:34:50,170\nNow what do I mean with the phone\ncompany messing with us?\n\n694\n00:34:50,170 --> 00:34:53,525\nWell It's not that they're maliciously\ntrying to bring the line down.\n\n695\n00:34:53,525 --> 00:34:56,665\nBut, the Cisco routers can\nonly auto-sense so much.\n\n696\n00:34:56,665 --> 00:34:59,855\nThey'll auto-sense a lot of\ndifferent settings, but sometimes,\n\n697\n00:34:59,855 --> 00:35:02,545\nthere can be special configurations\nthe phone company has put in\n\n698\n00:35:02,545 --> 00:35:04,440\nplace that may stop this from working.\n\n699\n00:35:04,440 --> 00:35:07,610\nAnd in that case,\nthe phone company will tell you, or\n\n700\n00:35:07,610 --> 00:35:10,580\nthey should, tell you the configuration\nchanges you needed to make.\n\n701\n00:35:10,580 --> 00:35:13,650\nSo, you might need to\nchange the framing type or\n\n702\n00:35:13,650 --> 00:35:17,040\nsomething like that, various other things\nthat we might have to set on there\n\n703\n00:35:17,040 --> 00:35:20,150\nall based on what the phone\ncompany is telling us.\n\n704\n00:35:20,150 --> 00:35:21,260\n>> Now on a serial connection,\n\n705\n00:35:21,260 --> 00:35:23,870\nespecially when you're doing\nthis just between two routers.\n\n706\n00:35:23,870 --> 00:35:28,840\nYou may also have to set up the idea\nof a clock rate, right, on one side or\n\n707\n00:35:28,840 --> 00:35:32,340\nthe other or actually both to make\nsure that that actually does work.\n\n708\n00:35:32,340 --> 00:35:35,560\nSo, that is something that you do\nhave to also check out as well.\n\n709\n00:35:35,560 --> 00:35:38,310\nBut this is kind of the simple\nconfiguration that should make it\n\n710\n00:35:38,310 --> 00:35:39,660\nwork right here.\n\n711\n00:35:39,660 --> 00:35:41,810\n>> Yeah.\nNow, when you run to the phone company\n\n712\n00:35:41,810 --> 00:35:46,500\nevery serial cable has a DTE side and\na DCE side.\n\n713\n00:35:46,500 --> 00:35:49,810\nAnd the DTE, that's the side that\nfaces you the customer, and the DCE,\n\n714\n00:35:49,810 --> 00:35:55,050\nthat faces the Telco, and the DCE side\nis where that clock rate is coming from.\n\n715\n00:35:55,050 --> 00:35:59,295\nThe clock rate, which really determines\nwhat the bandwidth of our line is.\n\n716\n00:35:59,295 --> 00:36:01,290\nRight.\nAnd that's why the phone company sets it.\n\n717\n00:36:01,290 --> 00:36:04,140\nThe phone company doesn't want you to\nbe able to set your own bandwidth.\n\n718\n00:36:04,140 --> 00:36:07,030\nAnd I'm glad you mention it,\nRonnie, cuz I didn't set it.\n\n719\n00:36:08,040 --> 00:36:11,480\nIf it's not set,\nthe line might not actually function, so\n\n720\n00:36:11,480 --> 00:36:17,750\nlet's just double check it here and\nI'll do a show IP interface brief,\n\n721\n00:36:17,750 --> 00:36:20,860\nand it looks like my serial line is up,\nup.\n\n722\n00:36:20,860 --> 00:36:27,000\nIt at least thinks that it's happy, and\nI'll ping across it to see what happens,\n\n723\n00:36:27,000 --> 00:36:29,630\nand I'm able to ping across,\nso apparently it got happy.\n\n724\n00:36:29,630 --> 00:36:31,940\nBut what'll happen a lot of times\n\n725\n00:36:34,690 --> 00:36:38,860\nis if you do a show controller, so\nI'm doing a show controller for\n\n726\n00:36:38,860 --> 00:36:41,660\nthe serial interface, you'll start\nto see information in here and\n\n727\n00:36:41,660 --> 00:36:46,210\nyou'll see where the clock information\nis coming along and so on.\n\n728\n00:36:46,210 --> 00:36:53,260\nSo, you can see some stuff but he or\nshe might cable type v.11 DCE cable.\n\n729\n00:36:53,260 --> 00:36:56,040\nSo I am the data communication equipment.\n\n730\n00:36:56,040 --> 00:37:01,275\nAnd I've got a receive\nclock rate of 2 megabit.\n\n731\n00:37:01,275 --> 00:37:04,685\nSo, I've received a clock\nrate from somewhere, right.\n\n732\n00:37:04,685 --> 00:37:09,175\nUsually the phone company, which would\nmean that I should be the DTE side, so\n\n733\n00:37:09,175 --> 00:37:09,905\nthat's a little odd.\n\n734\n00:37:09,905 --> 00:37:11,855\nI wonder where that clock rate came from.\n\n735\n00:37:11,855 --> 00:37:14,042\nBut on the other side.\n\n736\n00:37:17,919 --> 00:37:22,800\nLet's take a look at it over here on this\nside it's showing DC on this side also.\n\n737\n00:37:22,800 --> 00:37:25,810\nAnd then it's receiving that\nsame 2 megabit clock rate.\n\n738\n00:37:27,530 --> 00:37:28,350\nInteresting.\n\n739\n00:37:28,350 --> 00:37:31,770\nI guess my software is seeding\nthat clock rate in there.\n\n740\n00:37:31,770 --> 00:37:35,040\nBut, if you are ever running\na back to back cable,\n\n741\n00:37:35,040 --> 00:37:38,230\nbetween two routers in your own office,\nyou'll have to set that clock rate.\n\n742\n00:37:38,230 --> 00:37:40,360\nIn the real world though when you're\nconnected to the phone company,\n\n743\n00:37:40,360 --> 00:37:42,500\nthey're the ones that set that it,\nso we don't have to worry about it.\n\n744\n00:37:42,500 --> 00:37:47,410\nJust for completeness, if you ever do\nhave to set it, it's just clock rate,\n\n745\n00:37:47,410 --> 00:37:50,970\nand then you specify\nthe bandwidth of the line, okay.\n\n746\n00:37:50,970 --> 00:37:53,030\nSo you can manually put it in.\n\n747\n00:37:53,030 --> 00:37:55,560\nAgain, the only time you'll really see\nthis is if you've got a back to back\n\n748\n00:37:55,560 --> 00:37:57,470\nconfiguration, right.\n\n749\n00:37:57,470 --> 00:37:59,720\nAnd in fact, I imagine it's just\ngonna ignore it if I set it here.\n\n750\n00:37:59,720 --> 00:38:02,375\nSo like if I set it to\na I'll set it to 128K.\n\n751\n00:38:02,375 --> 00:38:03,520\nRight.\n\n752\n00:38:03,520 --> 00:38:04,987\nSo, if I set it to 128K.\n\n753\n00:38:09,422 --> 00:38:10,750\nWe'll see if it even stuck.\n\n754\n00:38:10,750 --> 00:38:11,609\nAnd it did stick.\n\n755\n00:38:17,717 --> 00:38:19,590\n>> Yeah.\n>> And, it seems to have taken.\n\n756\n00:38:19,590 --> 00:38:22,370\nI'm gonna be curious if the other side\npicked that up since they're both showing\n\n757\n00:38:23,610 --> 00:38:24,648\nDCE, but who knows.\n\n758\n00:38:24,648 --> 00:38:28,680\n[LAUGH]\n>> Nope.\n\n759\n00:38:28,680 --> 00:38:30,030\n>> Yeah, it's not picking up that.\n\n760\n00:38:30,030 --> 00:38:32,530\nSo now I've got an issue, so\nI need to go and fix that.\n\n761\n00:38:32,530 --> 00:38:33,390\nBut anyhow,\n\n762\n00:38:33,390 --> 00:38:37,160\njust keep in mind that it's the clock rate\nthat actually determines the bandwidth.\n\n763\n00:38:37,160 --> 00:38:40,230\nYou'll see where people use things\nlike the bandwidth command and\n\n764\n00:38:40,230 --> 00:38:43,120\nthe bandwidth command simply influences\nyour dynamic routing protocols.\n\n765\n00:38:43,120 --> 00:38:45,910\nIt doesn't actually change\nthe band width of the line.\n\n766\n00:38:45,910 --> 00:38:49,640\nIt's that clock right that does it so\nI'm gonna just remove that clock rate.\n\n767\n00:38:49,640 --> 00:38:50,470\nWoops.\n\n768\n00:38:50,470 --> 00:38:50,970\nThere.\n\n769\n00:38:52,720 --> 00:38:54,660\nAnd let it go back to what it needs to be.\n\n770\n00:38:54,660 --> 00:38:55,910\n>> If it's happy, it's happy.\n\n771\n00:38:55,910 --> 00:38:57,780\nThat's what matters.\n\n772\n00:38:57,780 --> 00:39:00,790\n>> Now, I didn't really do\nanything special on these lines to\n\n773\n00:39:00,790 --> 00:39:01,310\nget them to come up.\n\n774\n00:39:01,310 --> 00:39:04,162\nI just assigned an IP address and\nI did no shut down.\n\n775\n00:39:04,162 --> 00:39:04,880\nAll right.\n\n776\n00:39:04,880 --> 00:39:10,780\nAnd the reason that worked is because\nserial lines on Cisco routers,\n\n777\n00:39:10,780 --> 00:39:14,542\nby default, run a particular type\nof encapsulation called HDLC.\n\n778\n00:39:14,542 --> 00:39:16,130\nAll right.\n\n779\n00:39:16,130 --> 00:39:20,010\nAnd, help me out here, Ron,\ndo you remember, high data rate?\n\n780\n00:39:20,010 --> 00:39:22,254\nNow high speed data link\nconnection is that it?\n\n781\n00:39:22,254 --> 00:39:24,240\n>> That sounds right [CROSSTALK]\n>> But\n\n782\n00:39:24,240 --> 00:39:28,995\nbasically it's a protocol that is\nit's technically an open standard but\n\n783\n00:39:28,995 --> 00:39:33,155\nreally it's considered Cisco\nproprietary in a lot of circles.\n\n784\n00:39:33,155 --> 00:39:35,489\n>> Yeah.\n>> But it does a lot of auto detection and\n\n785\n00:39:35,489 --> 00:39:38,787\nallows the line to come up with\nvery little configuration.\n\n786\n00:39:38,787 --> 00:39:42,236\n>> Now this is one of the things that\ncan get mixed up when you are setting up\n\n787\n00:39:42,236 --> 00:39:45,469\na couple of routers And\nespecially in a lab environment, right?\n\n788\n00:39:45,469 --> 00:39:49,860\nYou have to make sure that on both ends,\nthe encapsulation actually matches.\n\n789\n00:39:49,860 --> 00:39:52,420\nNow with HTLC,\nthe original was an open standard and\n\n790\n00:39:52,420 --> 00:39:57,205\nthen Cisco essentially kind robbed it, I\ndon't know what else to actually call it.\n\n791\n00:39:57,205 --> 00:39:59,020\n>> [LAUGH]\n>> They decided became theirs, and\n\n792\n00:39:59,020 --> 00:40:02,380\nthey added in some other proprietary\nCisco information into it.\n\n793\n00:40:02,380 --> 00:40:05,460\nBut in terms of just\na regular serial connection,\n\n794\n00:40:05,460 --> 00:40:07,470\nthis is all you actually really need.\n\n795\n00:40:07,470 --> 00:40:10,520\nBut the problem that we have\nthough is what prevents then\n\n796\n00:40:10,520 --> 00:40:15,000\nsomebody from attacking one router out and\nthen just putting their own router in so\n\n797\n00:40:15,000 --> 00:40:18,550\nthat they can now intercept\nyour traffic is what we have.\n\n798\n00:40:18,550 --> 00:40:20,870\n>> HTLC is not a very\nfeature-rich protocol.\n\n799\n00:40:20,870 --> 00:40:24,260\nAside from the auto detect stuff,\nit doesn't give you authentication.\n\n800\n00:40:24,260 --> 00:40:25,990\n>> Yeah.\n>> It doesn't let you do multiplexing\n\n801\n00:40:25,990 --> 00:40:26,550\naligns.\n\n802\n00:40:26,550 --> 00:40:29,490\n>> Yep.\n>> It's very limited in its features.\n\n803\n00:40:29,490 --> 00:40:31,490\nSo a lot of ISPs don't use it.\n\n804\n00:40:31,490 --> 00:40:33,496\nInstead, they choose to use PPP.\n\n805\n00:40:33,496 --> 00:40:35,570\nThe Point-to-Point Protocol.\n\n806\n00:40:35,570 --> 00:40:38,180\nNow, if any of you guys ever used\nthe internet back in the dial up days.\n\n807\n00:40:38,180 --> 00:40:38,950\n>> Yep.\nThat was it.\n\n808\n00:40:38,950 --> 00:40:40,960\n>> PPP,\nyou use it all the time on dial up.\n\n809\n00:40:40,960 --> 00:40:43,990\nYou can use it on your\nserial digital lines also.\n\n810\n00:40:43,990 --> 00:40:46,340\nAnd that gives you the ability\nto do authentication,\n\n811\n00:40:46,340 --> 00:40:52,475\nlike in Ronnie's scenario or to do\nmultiplexing of lines and stuff like that.\n\n812\n00:40:52,475 --> 00:40:56,200\nSo you got a lot more power\nbehind a protocol like PPP.\n\n813\n00:40:56,200 --> 00:41:01,480\nNow, implementing PPP assuming that your\nISP doesn't dink with the line too much,\n\n814\n00:41:01,480 --> 00:41:04,290\nagain is another thing\nthat's very simple to do.\n\n815\n00:41:04,290 --> 00:41:08,150\nOn both ends of the line,\nwe just say encapsulation PPP.\n\n816\n00:41:08,150 --> 00:41:11,575\nAnd I'll jump over to the other router and\ndo the same.\n\n817\n00:41:16,868 --> 00:41:19,780\nAnd then I'm gonna shut down the line.\n\n818\n00:41:19,780 --> 00:41:23,460\nWhen you make changes to a serial line\nlike this, if it's already up and happy.\n\n819\n00:41:23,460 --> 00:41:26,840\nA lot of times they don't take\neffect until you reset the line.\n\n820\n00:41:26,840 --> 00:41:30,630\nSo I'm just gonna do a shut down and\na no shut down and\n\n821\n00:41:30,630 --> 00:41:32,430\nso there's my two layers\nthat are coming up.\n\n822\n00:41:38,430 --> 00:41:41,880\nAnd if I look at the interface I\ncan see that it is now using PPP.\n\n823\n00:41:43,570 --> 00:41:46,279\nIt's up and now I can try and\nsend some data over it.\n\n824\n00:41:50,870 --> 00:41:51,940\nAnd it will send data over it.\n\n825\n00:41:51,940 --> 00:41:52,910\n>> Yep.\n\n826\n00:41:52,910 --> 00:41:56,900\nNow with this one of the most\ncommon misconfigurations\n\n827\n00:41:56,900 --> 00:42:02,030\nof this point to point link is what\nwe call an encapsulation mismatch.\n\n828\n00:42:02,030 --> 00:42:04,480\nOne side's set to HDLC\nthe other side's set to PPP.\n\n829\n00:42:04,480 --> 00:42:09,400\nIf that happens, you're not gonna get data\nto be able to be sent over that as well.\n\n830\n00:42:09,400 --> 00:42:10,490\nSo, do remember that.\n\n831\n00:42:10,490 --> 00:42:14,390\n>> Yeah, and you can normally spot that\nbecause the layer one will come up.\n\n832\n00:42:14,390 --> 00:42:17,470\nThe physical interface, but then the line\nprotocol, the layer two, will not come up.\n\n833\n00:42:17,470 --> 00:42:19,889\nSo you will have a line that\nis in the up down status.\n\n834\n00:42:22,280 --> 00:42:25,210\nAll right, now one of the things that\nI mentioned about PPP is that it's got\n\n835\n00:42:25,210 --> 00:42:26,065\na lot more features.\n\n836\n00:42:26,065 --> 00:42:26,680\nRight?\n\n837\n00:42:26,680 --> 00:42:30,010\nSo one of the features that we\nwanna show you is authentication.\n\n838\n00:42:30,010 --> 00:42:35,160\nWith PPP, you can do dual authentication,\na challenge handshake\n\n839\n00:42:35,160 --> 00:42:38,990\nwhere both sides challenge each other to\nverify they are who they say they are.\n\n840\n00:42:38,990 --> 00:42:39,660\nAlright.\n\n841\n00:42:39,660 --> 00:42:40,942\nTo do it is pretty easy.\n\n842\n00:42:40,942 --> 00:42:46,790\nOn router4 here I need to create a user\naccount for router1 and over on router 1 I\n\n843\n00:42:46,790 --> 00:42:50,842\nneed to create a user account for router4\nand then we just tell it to authenticate.\n\n844\n00:42:50,842 --> 00:42:51,620\nAll right?\n\n845\n00:42:51,620 --> 00:42:55,900\nSo here on router four I can get\ninto a well I'm in my configuration.\n\n846\n00:42:55,900 --> 00:42:59,087\nSo I can just say Username: R1.\n\n847\n00:42:59,087 --> 00:43:01,510\nPassword, I'll just use cisco123.\n\n848\n00:43:03,640 --> 00:43:05,340\nThere we go.\n\n849\n00:43:05,340 --> 00:43:06,750\nSo now I've got that account.\n\n850\n00:43:06,750 --> 00:43:11,310\n>> Now this actually becomes something\nvery important for us to remember.\n\n851\n00:43:11,310 --> 00:43:14,610\nBefore you can set this username,\nespecially if you're going to do this.\n\n852\n00:43:14,610 --> 00:43:18,440\nYou have to have a host name\nconfigured on the router itself.\n\n853\n00:43:18,440 --> 00:43:20,610\nYou may go,\nwhen would I never have hosting?\n\n854\n00:43:20,610 --> 00:43:22,870\nThat's a good thing for\nyou to actually think.\n\n855\n00:43:22,870 --> 00:43:26,760\nBut I guarantee you there's times when\nI've been doing this in terms of practice,\n\n856\n00:43:26,760 --> 00:43:27,790\nset everything up, and\n\n857\n00:43:27,790 --> 00:43:31,790\nI forgot to set the actual host name,\nand now you're actually in trouble.\n\n858\n00:43:31,790 --> 00:43:34,800\nSo make sure you set a host name first,\nbefore you do this.\n\n859\n00:43:34,800 --> 00:43:37,770\n>> Yeah the router is gonna use its\nhost name as its authentication.\n\n860\n00:43:37,770 --> 00:43:39,150\nThere's ways to change that.\n\n861\n00:43:39,150 --> 00:43:42,120\nActually I'll show you\nan example when we do PPPOE.\n\n862\n00:43:42,120 --> 00:43:44,700\nBut by default,\nit sends the host name on the router.\n\n863\n00:43:44,700 --> 00:43:46,340\nSo that's the easiest way to do it.\n\n864\n00:43:46,340 --> 00:43:49,930\nSo I've got that username set, and\nthen I'll get into serial 1/1.\n\n865\n00:43:49,930 --> 00:43:54,380\nAnd I'll just say,\nppp authentication chap.\n\n866\n00:43:54,380 --> 00:43:58,250\nAnd that's gonna tell it whenever\na PPP connection comes up,\n\n867\n00:43:58,250 --> 00:43:59,900\ndo a challenge handshake, right?\n\n868\n00:43:59,900 --> 00:44:02,820\nTest the other side to see if they\nhave a valid user name and password.\n\n869\n00:44:02,820 --> 00:44:03,360\nAll right?\n\n870\n00:44:03,360 --> 00:44:06,010\nAnd you'll see after I ran that,\nwhat happened to my line?\n\n871\n00:44:06,010 --> 00:44:07,440\nIt went down, right?\n\n872\n00:44:07,440 --> 00:44:09,380\nAnd that's because I haven't\nset up the other side.\n\n873\n00:44:09,380 --> 00:44:13,780\nSo I'll jump over to the other side and\nlet's do a, let's see.\n\n874\n00:44:15,990 --> 00:44:19,260\nUsername R1, nope, R4.\n\n875\n00:44:19,260 --> 00:44:21,170\nThere we go.\n\n876\n00:44:21,170 --> 00:44:22,430\nPassword, cisco123.\n\n877\n00:44:22,430 --> 00:44:24,230\nYep.\nWe use the same password.\n\n878\n00:44:25,630 --> 00:44:27,760\nOtherwise the hashes won't match.\n\n879\n00:44:27,760 --> 00:44:34,260\nAnd then I get into serial 1/1, and\nwe'll say, PPP authentication chap.\n\n880\n00:44:34,260 --> 00:44:34,810\nAll right.\n\n881\n00:44:34,810 --> 00:44:36,670\nNow the line's down right now, but\n\n882\n00:44:36,670 --> 00:44:40,660\nit'll retry that connection and\nhopefully it will come up.\n\n883\n00:44:40,660 --> 00:44:41,210\nThere it goes.\n\n884\n00:44:41,210 --> 00:44:42,210\nIt's up.\n\n885\n00:44:42,210 --> 00:44:44,990\nAnd now I should be able\nto ping across that line.\n\n886\n00:44:46,210 --> 00:44:47,950\nAnd sure enough I can.\n\n887\n00:44:47,950 --> 00:44:50,620\nNow if somebody tries to\nswap out that router.\n\n888\n00:44:50,620 --> 00:44:54,040\nI'm not so worried about it cause\nthey'd have to pass the authentication.\n\n889\n00:44:54,040 --> 00:44:56,920\nNow chap is not the strongest\nauthentication in the world it's\n\n890\n00:44:56,920 --> 00:45:00,775\nactually not even in middle place,\nit's pretty low.\n\n891\n00:45:00,775 --> 00:45:04,325\nBut these are point to point lines,\nso we haven't been worrying so\n\n892\n00:45:04,325 --> 00:45:05,825\nmuch about encrypting that data.\n\n893\n00:45:05,825 --> 00:45:08,345\nYou'll normally run some kind of\nencryption on top of this anyway.\n\n894\n00:45:08,345 --> 00:45:10,945\nBut for the base authentication,\nit works just fine.\n\n895\n00:45:10,945 --> 00:45:11,617\n>> Yeah.\n\n896\n00:45:11,617 --> 00:45:16,407\nNow the interesting thing about this, as\nwell as when he ran the PPP authentication\n\n897\n00:45:16,407 --> 00:45:21,787\nCHAP, he can actually add in additional\nother authentication if you want to.\n\n898\n00:45:21,787 --> 00:45:24,538\nHe can do PAP if he chose to as well.\n\n899\n00:45:24,538 --> 00:45:26,778\nSo if we actually yeah go ahead.\n\n900\n00:45:26,778 --> 00:45:28,368\n>> Let's see what else we support here.\n\n901\n00:45:28,368 --> 00:45:28,978\n>> Yeah chap.\n\n902\n00:45:28,978 --> 00:45:29,768\n>> PAP pretty good.\n\n903\n00:45:29,768 --> 00:45:31,728\n>> Yeah MS chap.\n\n904\n00:45:31,728 --> 00:45:35,388\nYou start seeing this but you can even add\nan additional right you can do CHAP and\n\n905\n00:45:35,388 --> 00:45:37,668\nthen you can do a space and\nthe word PAP there.\n\n906\n00:45:37,668 --> 00:45:40,998\nNow the reason why I mention this is\nbecause this is where it gets confusing.\n\n907\n00:45:40,998 --> 00:45:44,748\nNormally what ends up happening is\nthe authentication fails on one,\n\n908\n00:45:44,748 --> 00:45:47,148\nthen it can go and try the other one.\n\n909\n00:45:47,148 --> 00:45:50,620\nSo that way you're actually\nsetting two different ways.\n\n910\n00:45:50,620 --> 00:45:53,400\nIf it fails on CHAP,\nlet's try and use PAP here.\n\n911\n00:45:53,400 --> 00:45:54,230\nWhy might we do that?\n\n912\n00:45:54,230 --> 00:45:56,490\nWe might actually have another router, and\n\n913\n00:45:56,490 --> 00:46:00,260\nthe other reason we might want to use PPP\nis because we might have a router from\n\n914\n00:46:00,260 --> 00:46:05,270\na different vendor instead,\nwhereas HDLC is Cisco-proprietary.\n\n915\n00:46:05,270 --> 00:46:09,320\nBut for us here, ensuring that that\nactually happens, if one fails,\n\n916\n00:46:09,320 --> 00:46:11,010\nif CHAP can't handle it.\n\n917\n00:46:11,010 --> 00:46:12,710\nAnd the other side you're\nactually set up for PAP.\n\n918\n00:46:12,710 --> 00:46:14,350\nYou're ready to go.\n\n919\n00:46:14,350 --> 00:46:16,510\nThe problem we might have\nis if it actually says,\n\n920\n00:46:16,510 --> 00:46:20,560\nnope, you're not supposed to get in here\nwith CHAP, then it doesn't do anything.\n\n921\n00:46:20,560 --> 00:46:25,440\nSo, failure fails over in terms of\nthe authentication but if it's an error.\n\n922\n00:46:25,440 --> 00:46:27,290\nIn other words you've\nentered in the wrong thing,\n\n923\n00:46:27,290 --> 00:46:29,650\nthen it may actually not even let you in.\n\n924\n00:46:29,650 --> 00:46:33,230\n>> Now let's take a look at what's\ngoing on in the background, right?\n\n925\n00:46:33,230 --> 00:46:36,240\nBecause we said hey there's\na challenge handshake going on.\n\n926\n00:46:36,240 --> 00:46:37,420\nBut we don't really see that.\n\n927\n00:46:37,420 --> 00:46:38,140\n>> Right.\nWe just kind of have\n\n928\n00:46:38,140 --> 00:46:39,980\nto assume that it happened, right?\n\n929\n00:46:39,980 --> 00:46:42,800\nWell you can do some debug commands and\n\n930\n00:46:42,800 --> 00:46:46,910\nyou'll see with PPP you can debug\nnegotiation and authentication.\n\n931\n00:46:46,910 --> 00:46:50,920\nSo we can tell it to show us that process\nthat's going on in the background and\n\n932\n00:46:50,920 --> 00:46:51,860\nthat's what I'm going to do right now.\n\n933\n00:46:51,860 --> 00:46:52,670\nI'm going to turn on.\n\n934\n00:46:54,780 --> 00:47:01,540\nDebugging for PPP negotiation as well as\nauthentication and that's probably enough.\n\n935\n00:47:01,540 --> 00:47:03,950\nI guess I could do the full packets.\n\n936\n00:47:03,950 --> 00:47:06,470\nThat gets a little overwhelming\non the screen sometimes.\n\n937\n00:47:06,470 --> 00:47:09,450\nBut right there will show me my\nnegotiation and authentication.\n\n938\n00:47:09,450 --> 00:47:11,810\nAnd what I'm going to do is I'm\ngoing to go to router4 here and\n\n939\n00:47:11,810 --> 00:47:14,380\nI'm just going to shut\nthat interface down.\n\n940\n00:47:14,380 --> 00:47:17,000\nAnd back here,\nI probably won't see anything here.\n\n941\n00:47:17,000 --> 00:47:21,400\nCuz once the line is up, the\nauthentication and negotiation, it's done.\n\n942\n00:47:21,400 --> 00:47:24,680\nSo it doesn't really do anything\nmore once the line is up.\n\n943\n00:47:24,680 --> 00:47:26,650\nSo I'm just shutting it\ndown here on router4.\n\n944\n00:47:26,650 --> 00:47:27,900\nAnd then I'll do a no shutdown.\n\n945\n00:47:27,900 --> 00:47:29,863\nNow when the line comes back up,\n\n946\n00:47:29,863 --> 00:47:34,383\nthat's gonna cause an all new round\nof negotiation and authentication.\n\n947\n00:47:34,383 --> 00:47:36,930\nSo I should see some good\nstuff appear here on router1.\n\n948\n00:47:36,930 --> 00:47:39,970\nThere it goes and so\nwe'll see a bunch of stuff.\n\n949\n00:47:39,970 --> 00:47:43,490\nWe'll see a few different\ntypes of messages appear here.\n\n950\n00:47:43,490 --> 00:47:47,280\nA lot of them are originating from LCP,\nthe link control protocol.\n\n951\n00:47:47,280 --> 00:47:51,535\nThat's a part of PPP that's handling the\nauthentication and the session build up.\n\n952\n00:47:51,535 --> 00:47:56,275\nThe end result is if you have\na successful authentication\n\n953\n00:47:56,275 --> 00:47:59,185\nyou should see this state is open.\n\n954\n00:47:59,185 --> 00:48:03,385\nBut, look at all the stuff that had\nto happen to get to that point.\n\n955\n00:48:03,385 --> 00:48:04,337\nQuite a bit.\n\n956\n00:48:04,337 --> 00:48:06,837\nRight, so\nyou'll see that connection started.\n\n957\n00:48:06,837 --> 00:48:11,537\nHere's the request and so\nwe've got chap kicking in for the request.\n\n958\n00:48:11,537 --> 00:48:14,287\nAnd it's starting to build\nup that initial session so\n\n959\n00:48:14,287 --> 00:48:15,967\nthat it can exchange credentials, right.\n\n960\n00:48:15,967 --> 00:48:17,217\nSo we'll see it kind of going here.\n\n961\n00:48:18,577 --> 00:48:21,812\nCisco discovery protocol tried to\ntalk while we were negotiating.\n\n962\n00:48:21,812 --> 00:48:23,837\n>> [LAUGH]\n>> Negotiations weren't done yet though so\n\n963\n00:48:23,837 --> 00:48:24,997\nit got thrown out, right.\n\n964\n00:48:24,997 --> 00:48:26,720\nSee how our phase is down.\n\n965\n00:48:26,720 --> 00:48:28,770\nSo we weren't actually built up.\n\n966\n00:48:28,770 --> 00:48:30,930\nHere you'll see phase establishing.\n\n967\n00:48:30,930 --> 00:48:33,170\nNow we're starting to negotiate\nout that information and\n\n968\n00:48:33,170 --> 00:48:37,140\nwhat we're really looking for,\nthe real winner here\n\n969\n00:48:37,140 --> 00:48:42,160\nis this stuff here where you see the Os\nand the Is, that's output and input.\n\n970\n00:48:42,160 --> 00:48:45,730\nOutput is what we sent to them,\ninput is what we got back from them.\n\n971\n00:48:45,730 --> 00:48:48,810\n>> Yeah and if you look at where it\nbegins with the word challenges there.\n\n972\n00:48:48,810 --> 00:48:52,580\nYou can see where you have the output\nchallenge ID one link 23 from router one.\n\n973\n00:48:52,580 --> 00:48:56,520\nAnd then, you actually see where it's\nactually inputting in from router four.\n\n974\n00:48:56,520 --> 00:49:00,640\nSo you actually see that handshake\ngoing on, is what you see there.\n\n975\n00:49:00,640 --> 00:49:04,720\n>> Yeah, and remember with CHAP we're not\nsending the password across the network.\n\n976\n00:49:04,720 --> 00:49:08,200\nThey take a hash of the network and\nthey send that across.\n\n977\n00:49:08,200 --> 00:49:11,640\nWe then hash the password that we have\nlocally and we compare the two hashes.\n\n978\n00:49:11,640 --> 00:49:13,240\nSo that's what's going on there.\n\n979\n00:49:13,240 --> 00:49:15,390\nAnd then the same thing\nhappens on the other end.\n\n980\n00:49:15,390 --> 00:49:17,480\nEach end validates each other.\n\n981\n00:49:17,480 --> 00:49:22,400\nWhen you go to the IT Pro TV website,\nyou put in the username and password.\n\n982\n00:49:22,400 --> 00:49:25,810\nAnd that's us validating who you are.\n\n983\n00:49:25,810 --> 00:49:28,030\nBut you guys don't really\nvalidate who we are, do you?\n\n984\n00:49:28,030 --> 00:49:29,490\nWell, not through that mechanism.\n\n985\n00:49:29,490 --> 00:49:30,990\nWe have an SSL certificate.\n\n986\n00:49:30,990 --> 00:49:33,090\nAnd that's how you validate who we are.\n\n987\n00:49:33,090 --> 00:49:36,515\nTwo different forms, with CHAP it's\njust all done in the same form.\n\n988\n00:49:36,515 --> 00:49:37,680\nRight?\n\n989\n00:49:37,680 --> 00:49:40,518\nSo here you'll see the response and\nthis is the big guy right here.\n\n990\n00:49:40,518 --> 00:49:41,151\nRight?\n\n991\n00:49:41,151 --> 00:49:42,670\nResponse pass.\n\n992\n00:49:42,670 --> 00:49:45,460\nThat we matched that hash, and it was\nokay and we're going to allow him in.\n\n993\n00:49:45,460 --> 00:49:49,520\n>> And then when you see success, success\nyou know that everything is actually good.\n\n994\n00:49:49,520 --> 00:49:52,780\n>> And then you get some more information\nhere which is just that session\n\n995\n00:49:52,780 --> 00:49:53,600\nbuilding up.\n\n996\n00:49:53,600 --> 00:49:55,770\nRight.\nIt's already passed at this point and\n\n997\n00:49:55,770 --> 00:49:56,920\nso it comes up.\n\n998\n00:49:56,920 --> 00:50:00,060\nIt's got some information here as\nit negotiates out the IP addresses.\n\n999\n00:50:00,060 --> 00:50:03,438\nBecause PPP can do dynamic IP allocation.\n\n1000\n00:50:03,438 --> 00:50:06,920\nSo see how it says like this is\nthe address of the other system.\n\n1001\n00:50:06,920 --> 00:50:08,070\nWe want 0000.\n\n1002\n00:50:08,070 --> 00:50:10,310\nThat means we will accept anything.\n\n1003\n00:50:10,310 --> 00:50:12,170\nThere's no filter applied.\n\n1004\n00:50:12,170 --> 00:50:16,080\nYou'll see some other things\nlike IPCP can do filtering.\n\n1005\n00:50:16,080 --> 00:50:18,600\nSo we can filter what IPs\nare allowed to communicate.\n\n1006\n00:50:18,600 --> 00:50:21,150\nIt does a lot of stuff that\nyou'll see kick in but\n\n1007\n00:50:21,150 --> 00:50:23,340\nthis is all just part\nof a session build up.\n\n1008\n00:50:23,340 --> 00:50:26,015\nAnd then once it's done, the session\nis open, now we can communicate.\n\n1009\n00:50:26,015 --> 00:50:27,340\n>> Yeah.\n>> So,\n\n1010\n00:50:27,340 --> 00:50:30,350\njust an example of some of the bells and\nwhistles.\n\n1011\n00:50:30,350 --> 00:50:34,570\nAnd on most routers, if you take\na look at their running configuration,\n\n1012\n00:50:36,790 --> 00:50:40,010\nyou'll notice towards the top\nof the configuration, let's see.\n\n1013\n00:50:40,010 --> 00:50:41,115\nWatch, this router won't have it.\n\n1014\n00:50:41,115 --> 00:50:42,140\n>> [LAUGH]\n>> Here it is.\n\n1015\n00:50:42,140 --> 00:50:44,590\n>> There it is.\n>> Multilink bundle-name authenticated.\n\n1016\n00:50:44,590 --> 00:50:45,370\nWhat the heck is that?\n\n1017\n00:50:45,370 --> 00:50:46,820\n>> Yeah.\n>> Well that's talking\n\n1018\n00:50:46,820 --> 00:50:48,590\nabout PPP multilink.\n\n1019\n00:50:48,590 --> 00:50:52,950\nIf your router supports it, you can\ntake more than one PPP connection and\n\n1020\n00:50:52,950 --> 00:50:55,280\nbond them together in a multilink.\n\n1021\n00:50:55,280 --> 00:50:59,266\nAnd it's saying that when we use that,\nwhat do we use to name the bundle,\n\n1022\n00:50:59,266 --> 00:51:03,530\nwell we use whatever authentication name\nwe use when we authenticate the PPP line.\n\n1023\n00:51:03,530 --> 00:51:07,795\nSo these types of functions, they're\nadvanced bells and whistles of PPP.\n\n1024\n00:51:07,795 --> 00:51:13,770\nHDLC doesn't have them and that's why you\nsee PPP more prominently in the WAN world.\n\n1025\n00:51:16,440 --> 00:51:22,110\nAll right, well Ronnie, as far as simple\nserial connections, that's pretty much it.\n\n1026\n00:51:22,110 --> 00:51:23,500\nIsn't it?\n>> That is it, but\n\n1027\n00:51:23,500 --> 00:51:25,040\nwe do have a more complex one.\n\n1028\n00:51:25,040 --> 00:51:28,160\nBut it looks like we're running\nup on our time limit here.\n\n1029\n00:51:28,160 --> 00:51:34,500\n>> Yeah, let's stop here, and\nwhen we get back, we are gonna dive into\n\n1030\n00:51:34,500 --> 00:51:38,953\nPPPoE which is using the point\nto point protocol over ethernet.\n\n1031\n00:51:38,953 --> 00:51:42,010\nRight?\nSo kind of an interesting bastardization\n\n1032\n00:51:42,010 --> 00:51:44,700\nof the technology, but anyhow,\nwe'll get a chance to see that.\n\n1033\n00:51:44,700 --> 00:51:48,821\nSo stay tuned, when we get back,\nmore WAN technologies.\n\n1034\n00:51:48,821 --> 00:51:51,864\n>> Right.\n[MUSIC]\n\n1035\n00:51:51,864 --> 00:51:58,701\n[SOUND] All right, welcome back everybody.\n\n1036\n00:51:58,701 --> 00:52:02,152\nSo, now what we're gonna do is we're\ngonna take a look at PPP again,\n\n1037\n00:52:02,152 --> 00:52:03,435\neven though we just did.\n\n1038\n00:52:03,435 --> 00:52:04,050\n>> [LAUGH]\n>> And\n\n1039\n00:52:04,050 --> 00:52:09,080\nwe're going to talk about\nPPP over ethernet, or PPPoE.\n\n1040\n00:52:09,080 --> 00:52:12,661\nIt's a technology that, it's kind\nof a pain in the butt to work with.\n\n1041\n00:52:12,661 --> 00:52:15,220\n>> Yeah.\n>> You don't encounter it all that much.\n\n1042\n00:52:15,220 --> 00:52:18,050\nBut you do see it a lot\nin the world of DSL.\n\n1043\n00:52:18,050 --> 00:52:22,630\nWhere we have people with DSL lines and\nthe Telco, or whoever it is\n\n1044\n00:52:22,630 --> 00:52:27,535\nwho's providing that line, needs some\nway to control access to that network.\n\n1045\n00:52:27,535 --> 00:52:28,715\nRight?\n>> The main advantage of\n\n1046\n00:52:28,715 --> 00:52:30,240\nPPPoE\n>> [LAUGH]\n\n1047\n00:52:30,240 --> 00:52:31,950\n>> I'm not gonna be able to say that.\n\n1048\n00:52:31,950 --> 00:52:33,970\nIs the use of authentication.\n\n1049\n00:52:33,970 --> 00:52:36,740\nAnd that's what they actually want to do,\nespecially with DSL.\n\n1050\n00:52:36,740 --> 00:52:38,370\nSince it's not always on connection,\n\n1051\n00:52:38,370 --> 00:52:41,830\nwe have to have some way to verify\nthat you're the customer and I'm not.\n\n1052\n00:52:41,830 --> 00:52:46,460\nBecause I'm on satellite, and then I\ndecide I'm gonna sneak over to your place\n\n1053\n00:52:46,460 --> 00:52:48,630\nand try to figure out\nhow to get connected.\n\n1054\n00:52:48,630 --> 00:52:49,330\n>> Yeah.\n\n1055\n00:52:49,330 --> 00:52:53,225\nAnd regular ethernet doesn't provide\nany authentication mechanism.\n\n1056\n00:52:53,225 --> 00:52:55,090\n>> Right.\n>> It just asks people to talk.\n\n1057\n00:52:55,090 --> 00:52:56,500\nSo if we want to do authentication,\n\n1058\n00:52:56,500 --> 00:52:57,950\nwe've got to find something\nto stick on top of it.\n\n1059\n00:52:57,950 --> 00:52:59,800\nNow, really,\n\n1060\n00:52:59,800 --> 00:53:05,060\nwhen you boil it all down, authentication\nis the only benefit of doing PPPoE.\n\n1061\n00:53:05,060 --> 00:53:07,460\nOtherwise you just use ethernet and\noff you go, right?\n\n1062\n00:53:07,460 --> 00:53:10,830\nYou don't need this extra layer\nof technology on top of it.\n\n1063\n00:53:10,830 --> 00:53:12,020\nSo that's why you pretty much,\n\n1064\n00:53:12,020 --> 00:53:15,420\nI'm trying to think of the last few\ntimes that I've worked with it.\n\n1065\n00:53:15,420 --> 00:53:17,255\nIt's almost always DSL modems.\n\n1066\n00:53:17,255 --> 00:53:20,780\nOr on the DSL modem or on your router\nthat you attached to the DSL modem.\n\n1067\n00:53:20,780 --> 00:53:24,950\nYou have to specify PPPoE credentials,\na username and a password.\n\n1068\n00:53:24,950 --> 00:53:29,900\nAnd that's what allows your router to get\nan IP address from the telephone company\n\n1069\n00:53:29,900 --> 00:53:31,950\nand talk on that DSL line.\n\n1070\n00:53:31,950 --> 00:53:34,780\nThat's the last way,\nI've seen it over the last few years.\n\n1071\n00:53:36,300 --> 00:53:38,570\nReally not a whole lot of\nother implementations for it.\n\n1072\n00:53:38,570 --> 00:53:39,440\nRight.\n\n1073\n00:53:39,440 --> 00:53:42,980\nNow unfortunately, on a Cisco router,\n\n1074\n00:53:42,980 --> 00:53:45,370\nconfiguring PPPoE is kind\nof a pain in the butt.\n\n1075\n00:53:45,370 --> 00:53:46,080\n>> Yeah.\n>> And\n\n1076\n00:53:46,080 --> 00:53:51,770\nthat's because PPP is an analog\nserial line technology.\n\n1077\n00:53:51,770 --> 00:53:56,400\nIt's really designed for\ndialup networks and so to leverage it on\n\n1078\n00:53:56,400 --> 00:54:01,220\nan ethernet network, on a modern router,\nit's really just not designed for that.\n\n1079\n00:54:01,220 --> 00:54:06,160\nAnd so it's kind of a hack or\nretrofit or whatever to get it to work.\n\n1080\n00:54:06,160 --> 00:54:08,680\nSo I wanna show you guys that process.\n\n1081\n00:54:08,680 --> 00:54:11,690\nAnd in our little,\nlet me bring our diagram back up.\n\n1082\n00:54:11,690 --> 00:54:16,910\nIn our little diagram here this serial\nlink is what we've been working on so far.\n\n1083\n00:54:16,910 --> 00:54:21,120\nI've got an ethernet link that runs\nbetween router 1 and router 4 and\n\n1084\n00:54:21,120 --> 00:54:25,260\nI've got router 1 set\nup as a PPPoE server.\n\n1085\n00:54:25,260 --> 00:54:27,730\nNow on the exam they don't\nexpect you to deal with servers.\n\n1086\n00:54:27,730 --> 00:54:29,410\nRight?\nThat's the telephone company.\n\n1087\n00:54:29,410 --> 00:54:34,400\nWe're going to be setting up router 4 as\na client that connects to that server.\n\n1088\n00:54:34,400 --> 00:54:37,370\nSo this might be the telephone\ncompany providing us a DSL line or\n\n1089\n00:54:37,370 --> 00:54:41,820\nthis might be a DSL modem\nplugged into router 4 on fa0/0.\n\n1090\n00:54:41,820 --> 00:54:45,945\nAnd we just need to get router\n4 connected and configured.\n\n1091\n00:54:45,945 --> 00:54:47,000\nRight?\n\n1092\n00:54:47,000 --> 00:54:50,030\nSo let's start by taking a look\nat router 4's configuration.\n\n1093\n00:54:50,030 --> 00:54:51,956\nSo let me jump over to router 4.\n\n1094\n00:54:56,670 --> 00:55:00,840\nAnd I'm just gonna pull up\nthe configuration for fa0/0.\n\n1095\n00:55:00,840 --> 00:55:05,020\nRight now it's the default\nCisco configuration.\n\n1096\n00:55:05,020 --> 00:55:06,720\nIt is, no IP address.\n\n1097\n00:55:06,720 --> 00:55:09,330\nSpeed and duplex aren't set.\n\n1098\n00:55:09,330 --> 00:55:13,850\nThe line is not shut down, and so it's\napparently not completely default right?\n\n1099\n00:55:13,850 --> 00:55:17,290\nBut there's nothing\nspecial assigned to it.\n\n1100\n00:55:17,290 --> 00:55:21,880\nIf we want to set it to connect to\na PPPoE server, we gotta do a few things.\n\n1101\n00:55:21,880 --> 00:55:25,295\nAnd I wrote up a example\nconfiguration here before the show.\n\n1102\n00:55:25,295 --> 00:55:28,234\n>> [LAUGH]\n>> Basically what we have to do is a few\n\n1103\n00:55:28,234 --> 00:55:28,818\nthings.\n\n1104\n00:55:28,818 --> 00:55:30,141\nIt's kind of weird.\n\n1105\n00:55:30,141 --> 00:55:36,479\nYou have to tell the router To treat\nthe Ethernet as if it was a dial up line,\n\n1106\n00:55:36,479 --> 00:55:41,300\nso you have to create\na virtual dialer interface.\n\n1107\n00:55:41,300 --> 00:55:45,300\nA virtual dialer interface,\nis exactly what the name implies,\n\n1108\n00:55:45,300 --> 00:55:48,180\na fake line that acts like dial up.\n\n1109\n00:55:48,180 --> 00:55:50,830\nAnd so, you'll see in here,\nwhere it sets encapsulation to ppp,\n\n1110\n00:55:50,830 --> 00:55:55,780\nand it joins an authentication\ngroup called dialer pool 1.\n\n1111\n00:55:55,780 --> 00:55:59,630\nAnd in that dialer group 1,\nthe pool is how you attach to it and\n\n1112\n00:55:59,630 --> 00:56:00,720\nthe group is here.\n\n1113\n00:56:00,720 --> 00:56:05,780\nYou were saying ppp authentication\nhere we're doing pap and chap.\n\n1114\n00:56:06,800 --> 00:56:08,490\nWe're changing into a username so\n\n1115\n00:56:08,490 --> 00:56:12,360\nwe're sending username of Cisco\nwith a password to Cisco123, and\n\n1116\n00:56:12,360 --> 00:56:17,260\nwe expect to get back a username\nof Cisco and a password of 123.\n\n1117\n00:56:17,260 --> 00:56:20,740\nAnd we're setting a default\nroute to say any traffic,\n\n1118\n00:56:20,740 --> 00:56:23,170\nthat's going out to the internet\nof the world or whatever.\n\n1119\n00:56:23,170 --> 00:56:28,640\nSend it out dialer 1, and\nthen we're attaching dialer 1 to\n\n1120\n00:56:28,640 --> 00:56:33,480\nthe interface right here and\nsaying pppoe enable.\n\n1121\n00:56:33,480 --> 00:56:38,050\nThat means any time you go to use this\nline, you gotta fire up this dialer and\n\n1122\n00:56:38,050 --> 00:56:40,130\nhave it try and connect, all right?\n\n1123\n00:56:40,130 --> 00:56:43,018\nNow, the really cool part about this,\nif there is a cool part.\n\n1124\n00:56:43,018 --> 00:56:44,560\n>> [LAUGH]\n>> Is notice,\n\n1125\n00:56:44,560 --> 00:56:47,280\nI never assign an IP address anywhere.\n\n1126\n00:56:48,750 --> 00:56:50,590\nPPP, the point to point protocol,\n\n1127\n00:56:50,590 --> 00:56:55,590\nis replacing layer2 of the OSI model,\nthe data link layer.\n\n1128\n00:56:55,590 --> 00:57:00,610\nSo, PPP is not actually part of layer3,\nwhere we get IP addresses.\n\n1129\n00:57:00,610 --> 00:57:04,800\nSo, we're gonna connect up\nPPP is gonna do it's job, and\n\n1130\n00:57:04,800 --> 00:57:06,580\nit's authentication all at layer2.\n\n1131\n00:57:06,580 --> 00:57:12,222\nAnd then at layer3,\nwe're gonna negotiate an IP address.\n\n1132\n00:57:12,222 --> 00:57:16,840\nWe're gonna get an IP address from\nthe server, it's gonna give us one.\n\n1133\n00:57:16,840 --> 00:57:20,800\nWe'll, then be able to communicate and\nconnect out.\n\n1134\n00:57:20,800 --> 00:57:24,171\nFor example if I go, and\nI'm gonna shut down that serial link.\n\n1135\n00:57:24,171 --> 00:57:27,190\nAll right, so\nI'm just gonna shut that one down,\n\n1136\n00:57:27,190 --> 00:57:28,680\nthat we were working\nwith before the break.\n\n1137\n00:57:30,880 --> 00:57:37,160\nAnd if I do a show IP interface brief, I\ncan see right now that I have 172.16.1.4.\n\n1138\n00:57:37,160 --> 00:57:42,410\nThat was the IP that was assigned\nto that serial interface.\n\n1139\n00:57:42,410 --> 00:57:46,970\nAnd the router on the other\nside 172.16.1.1, and\n\n1140\n00:57:46,970 --> 00:57:49,500\nif I try to ping that, and,\nI'm not getting through.\n\n1141\n00:57:51,660 --> 00:57:55,622\nAll right, so what I'm gonna do is\nconfigure router4 to be a pppoe client.\n\n1142\n00:57:55,622 --> 00:57:57,680\nIt's gonna get an address\nfrom the other side,\n\n1143\n00:57:57,680 --> 00:58:01,100\nthen I should be able to ping\nacross these other networks.\n\n1144\n00:58:01,100 --> 00:58:02,430\nSo, lets go through that process.\n\n1145\n00:58:03,670 --> 00:58:06,870\nSo, I'm gonna go ahead and\ncreate the dialer first.\n\n1146\n00:58:06,870 --> 00:58:09,390\nSo, I'm going to say interface dialer1.\n\n1147\n00:58:09,390 --> 00:58:12,650\nIt's a virtual interface,\nso that's gonna create it.\n\n1148\n00:58:12,650 --> 00:58:16,240\nI'll tell it that the address\nis gonna be negotiated.\n\n1149\n00:58:16,240 --> 00:58:17,550\nWe'll, get it from the other side.\n\n1150\n00:58:18,950 --> 00:58:20,500\nI'll tell it that we're doing ppp.\n\n1151\n00:58:21,850 --> 00:58:25,160\nAnd that we're gonna be a part\nof a configuration pool,\n\n1152\n00:58:26,230 --> 00:58:28,630\nwhich will be pool number 1.\n\n1153\n00:58:28,630 --> 00:58:32,443\nAnd then I will create that pool,\nor that group,\n\n1154\n00:58:32,443 --> 00:58:35,981\nactually I still need\nto be in the interface.\n\n1155\n00:58:41,524 --> 00:58:48,990\nThere we go, and now I just need to go\nin and set, for it to do authentication.\n\n1156\n00:58:48,990 --> 00:58:50,979\nWe can cycle through different ones or\n\n1157\n00:58:50,979 --> 00:58:54,157\nwe could just say CHAP if that's\nthe only one we wanted to do.\n\n1158\n00:58:57,485 --> 00:59:02,080\nPAP is the plain text\nauthentication protocol.\n\n1159\n00:59:02,080 --> 00:59:04,870\nIt's sending in plain text,\nnot the greatest thing to use, but for\n\n1160\n00:59:04,870 --> 00:59:11,890\nour example it'll work fine.\n\n1161\n00:59:11,890 --> 00:59:17,040\nThen we'll just say if we do chap, the\nhost name that we're gonna use is Cisco,\n\n1162\n00:59:18,250 --> 00:59:22,670\nand the password that we're gonna\nuse is Cisco123, all right?\n\n1163\n00:59:23,680 --> 00:59:28,260\nThen I need to set up a route,\nthat says this is my only connection out.\n\n1164\n00:59:28,260 --> 00:59:31,552\nSo, I wanna default route that\nknows to use dialer1 to get out\n\n1165\n00:59:31,552 --> 00:59:32,830\nthrough the internet.\n\n1166\n00:59:34,340 --> 00:59:38,530\nLast thing I need to use is attach\nall of that to my interface.\n\n1167\n00:59:38,530 --> 00:59:43,941\nBy saying pppoe enable,\nand then pppoe client.\n\n1168\n00:59:51,570 --> 00:59:52,980\nThere we go.\n\n1169\n00:59:52,980 --> 00:59:59,670\nAnd so now it's got that, it's all there\nand it should start to work pretty quick.\n\n1170\n00:59:59,670 --> 01:00:03,140\nIf there's no traffic going over the line,\nsometimes it might not fire up, so\n\n1171\n01:00:03,140 --> 01:00:06,440\nyou might have to generate a ping or\nwhatever, to actually get some activity.\n\n1172\n01:00:06,440 --> 01:00:10,833\nBut, it looks like it's kicked in,\n\n1173\n01:00:10,833 --> 01:00:15,420\nand let me full-screen this.\n\n1174\n01:00:15,420 --> 01:00:17,290\nHere we go.\nSo, I can see my dialer,\n\n1175\n01:00:17,290 --> 01:00:18,690\nnotice how my dialer got an IP.\n\n1176\n01:00:18,690 --> 01:00:20,320\nWhere'd that IP come from?\n\n1177\n01:00:20,320 --> 01:00:22,930\nIt came from the server.\n\n1178\n01:00:22,930 --> 01:00:24,755\nNotice over here of the method.\n\n1179\n01:00:24,755 --> 01:00:28,385\nI got that IP from IPCP,\nremember that from before the break?\n\n1180\n01:00:28,385 --> 01:00:32,285\nThat's a part of ppp, I negotiate\nan IP address and I got it from there.\n\n1181\n01:00:32,285 --> 01:00:33,435\nNot from DHCP.\n\n1182\n01:00:33,435 --> 01:00:39,695\nI got this from pppoe,\nI now have an IP address.\n\n1183\n01:00:39,695 --> 01:00:44,980\nAnd, if I do a show IP route, there's\nmy default route, tied into dialer1.\n\n1184\n01:00:44,980 --> 01:00:47,680\nSo if I generate traffic\nto some other network.\n\n1185\n01:00:49,990 --> 01:00:53,790\nLike that for the router on the other\nside, it's gonna go out the dialer and\n\n1186\n01:00:53,790 --> 01:00:55,220\nit should hit that router\non the other side.\n\n1187\n01:00:55,220 --> 01:00:56,560\nThat interface is down, shoot.\n\n1188\n01:00:57,680 --> 01:01:00,800\nI took the interface down, so\nI'm not gonna be able to ping that one.\n\n1189\n01:01:00,800 --> 01:01:04,440\nLet me just create a loopback\nover on the other side.\n\n1190\n01:01:04,440 --> 01:01:05,485\nSo I'll go to router1.\n\n1191\n01:01:08,070 --> 01:01:11,317\nAnd, I still have all that debugging\nturned on, that'll be nice.\n\n1192\n01:01:15,773 --> 01:01:19,237\nLet's see here,\nI'll just create an all new network.\n\n1193\n01:01:22,650 --> 01:01:23,830\nThere we go.\n\n1194\n01:01:23,830 --> 01:01:27,250\nLet me turn the debugging off.\n\n1195\n01:01:28,700 --> 01:01:33,019\nSo, I just assigned an IP\naddress of 172.16.2.1 and\n\n1196\n01:01:33,019 --> 01:01:38,570\nnow I'll switch back over to router4 and\nI should be able to ping that just fine.\n\n1197\n01:01:41,665 --> 01:01:43,140\nShould being the operative word.\n\n1198\n01:01:44,680 --> 01:01:46,119\nDon't look too happy about that does it?\n\n1199\n01:01:49,407 --> 01:01:51,680\nWell, this is where our\ndebugging comes in.\n\n1200\n01:01:53,040 --> 01:01:56,630\nI know that the pppoe tunnel itself,\nit's not really a tunnel,\n\n1201\n01:01:56,630 --> 01:01:59,250\nbut I know that it came up\nbecause we got an IP address.\n\n1202\n01:01:59,250 --> 01:02:01,319\nWe wouldn't have gotten an IP\naddress if that didn't even work.\n\n1203\n01:02:05,413 --> 01:02:07,020\nSo, we know we're good there.\n\n1204\n01:02:07,020 --> 01:02:10,560\nI just turned all that debugging off,\nmaybe I turned that back on.\n\n1205\n01:02:10,560 --> 01:02:11,550\nBut-\n>> [LAUGH]\n\n1206\n01:02:11,550 --> 01:02:12,455\n>> But, yeah, so\n\n1207\n01:02:12,455 --> 01:02:16,713\nI've got the address there\n192.168.0.101 and if I jump,\n\n1208\n01:02:16,713 --> 01:02:18,962\nwhoops, jump back over to router1.\n\n1209\n01:02:28,745 --> 01:02:30,580\n>> Yeah, we are not getting across.\n\n1210\n01:02:30,580 --> 01:02:31,460\nSo apparently it broke.\n\n1211\n01:02:31,460 --> 01:02:34,590\nActually I could probably just\nlook back here at the debugs,\n\n1212\n01:02:34,590 --> 01:02:37,000\nand see what's going on there.\n\n1213\n01:02:37,000 --> 01:02:38,840\nActually we are showing\nsome timeouts here.\n\n1214\n01:02:38,840 --> 01:02:41,380\nIt's trying to authenticate with CHAP.\n\n1215\n01:02:41,380 --> 01:02:42,710\nThat's a serial line, though.\n\n1216\n01:02:42,710 --> 01:02:45,730\nThat's the not the other one.\n\n1217\n01:02:45,730 --> 01:02:46,880\nYou know what?\n\n1218\n01:02:46,880 --> 01:02:47,690\nLet's do this.\n\n1219\n01:02:47,690 --> 01:02:50,822\nLet's do a debug ppp authentication.\n\n1220\n01:02:50,822 --> 01:02:59,240\nDebug ppp,\nthis might be a very simple problem.\n\n1221\n01:03:02,907 --> 01:03:05,120\nWhich is our, it is, yep.\n\n1222\n01:03:05,120 --> 01:03:08,700\nSo, we've got a pool, right,\nthis virtual access pool.\n\n1223\n01:03:08,700 --> 01:03:11,160\nAnd, my IP on the virtual\naccess pool is 172.16.0.1.\n\n1224\n01:03:11,160 --> 01:03:15,037\nAnd so, I should be able to hit that one.\n\n1225\n01:03:18,999 --> 01:03:20,940\nAnd we're not.\n\n1226\n01:03:20,940 --> 01:03:24,210\nMaybe this line isn't actually\nup like I think it is.\n\n1227\n01:03:24,210 --> 01:03:28,011\nBut basically, with pppoe, the idea is\nthat we basically have to specify that\n\n1228\n01:03:28,011 --> 01:03:30,618\nusername and password, and\ntell it to push it along.\n\n1229\n01:03:30,618 --> 01:03:32,730\n>> It is working because it did come up.\n\n1230\n01:03:32,730 --> 01:03:34,435\nIt's just not sending traffic across it.\n\n1231\n01:03:34,435 --> 01:03:36,152\nSo I got to figure out where I went wrong.\n\n1232\n01:03:42,284 --> 01:03:44,478\nLet me just do a little\nbit of debugging here.\n\n1233\n01:03:52,270 --> 01:03:55,495\nAll right, and on to router 4,\nwatch, what's gonna happen,\n\n1234\n01:03:55,495 --> 01:03:58,361\nI didn't shut the interface down and\nturn it back on, and\n\n1235\n01:03:58,361 --> 01:04:02,327\nnow I'm gonna do that to reset the line\nand I bet it starts working on it's own.\n\n1236\n01:04:04,233 --> 01:04:06,027\nWe're gonna wait for\nit to get the down message.\n\n1237\n01:04:06,027 --> 01:04:07,191\nThere we go.\n\n1238\n01:04:07,191 --> 01:04:09,590\nSo I'm just doing a shutdown and\na no shutdown.\n\n1239\n01:04:09,590 --> 01:04:13,740\nThat resets the line, and a lot of times,\nthat'll solve the problem without doing\n\n1240\n01:04:13,740 --> 01:04:16,040\nany extra work, so\nI'm gonna give this a second.\n\n1241\n01:04:16,040 --> 01:04:17,500\nWe'll test that out, but...\n\n1242\n01:04:17,500 --> 01:04:20,570\nAll right.\n\n1243\n01:04:20,570 --> 01:04:21,630\nI see the lineup.\n\n1244\n01:04:21,630 --> 01:04:23,190\nThe dialer hasn't come up yet.\n\n1245\n01:04:24,940 --> 01:04:28,035\nBut I might need to generate some\ntraffic before that happens.\n\n1246\n01:04:30,987 --> 01:04:32,670\nAnd sometimes we have to be patient,\nright.\n\n1247\n01:04:32,670 --> 01:04:34,450\nAnd that's where I have my problems.\n\n1248\n01:04:34,450 --> 01:04:34,982\n>> Yeah.\n\n1249\n01:04:40,113 --> 01:04:43,518\n>> Well, I generated traffic to match the,\nyou generate what,\n\n1250\n01:04:43,518 --> 01:04:46,082\nCisco calls it interesting traffic, right.\n\n1251\n01:04:46,082 --> 01:04:48,075\n>> [LAUGH]\n>> Traffic that matches what that line\n\n1252\n01:04:48,075 --> 01:04:51,100\ncares about\n>> And when I do a show IP route,\n\n1253\n01:04:51,100 --> 01:04:55,760\nI've got that default route that sends\ntraffic across the dialer, and so\n\n1254\n01:04:55,760 --> 01:04:57,650\nthat's what I'm really looking for.\n\n1255\n01:04:57,650 --> 01:05:02,621\nYou'll see here it shows where I'm\ndirectly connected to 172.16.0.1,\n\n1256\n01:05:02,621 --> 01:05:06,541\nthe router on the other side,\nand I'm connected via dialer1, so\n\n1257\n01:05:06,541 --> 01:05:11,310\nif I send any traffic to that IP it should\ntrigger the dialer to come up, and...\n\n1258\n01:05:14,347 --> 01:05:15,280\nIt says it's up.\n\n1259\n01:05:15,280 --> 01:05:18,890\nI did not see a status message\nletting me know that it came up.\n\n1260\n01:05:18,890 --> 01:05:21,487\nSo, it's come up on its own\nwhich is pretty interesting.\n\n1261\n01:05:22,895 --> 01:05:23,940\nLet's try that ping again.\n\n1262\n01:05:26,010 --> 01:05:27,020\nYeah, still dead in the water.\n\n1263\n01:05:27,020 --> 01:05:28,370\n>> Yeah.\n\n1264\n01:05:28,370 --> 01:05:29,270\n>> That is bizarre.\n\n1265\n01:05:30,947 --> 01:05:32,754\nI might have to look at this\none during the break and\n\n1266\n01:05:32,754 --> 01:05:34,380\nfind out where it's gone wrong.\n\n1267\n01:05:34,380 --> 01:05:37,110\nYou know back here,\nyou know that session did not reset.\n\n1268\n01:05:37,110 --> 01:05:37,950\n>> Nope.\n>> Look at that.\n\n1269\n01:05:37,950 --> 01:05:40,260\nAll right I'm gonna force the whole thing.\n\n1270\n01:05:41,820 --> 01:05:43,570\nI guess I could reboot the router,\nthat would be fun.\n\n1271\n01:05:43,570 --> 01:05:46,329\nBut I'm gonna shut that down.\n\n1272\n01:05:52,912 --> 01:05:55,970\nLet's mae sure it actually goes in.\n\n1273\n01:05:55,970 --> 01:05:59,034\nSee the dialer is staying up so\nlet's get into\n\n1274\n01:06:03,606 --> 01:06:08,470\nThere, we'll shut that down [LAUGH].\n\n1275\n01:06:08,470 --> 01:06:09,740\nNow we're getting some progress, right.\n\n1276\n01:06:10,840 --> 01:06:15,700\nSo I'll turn that dialer back on and\nwe'll turn that other line back on.\n\n1277\n01:06:15,700 --> 01:06:16,500\nThere we go.\n\n1278\n01:06:16,500 --> 01:06:20,390\nSo now that's going to force that\ndialer to reset and come back up.\n\n1279\n01:06:20,390 --> 01:06:21,229\nAnd we should be good.\n\n1280\n01:06:23,322 --> 01:06:25,605\nIf it's still not good,\nthis is where I need to check for typos,\n\n1281\n01:06:25,605 --> 01:06:27,950\ncuz I could have fat fingered\nsomething when I put it in.\n\n1282\n01:06:27,950 --> 01:06:30,130\nBut usually if the dialer comes up.\n\n1283\n01:06:30,130 --> 01:06:31,730\nYeah, there goes virtual access.\n\n1284\n01:06:31,730 --> 01:06:33,646\nThat usually it's good enough.\n\n1285\n01:06:37,740 --> 01:06:40,595\nAll right, so\nthis says it's incremented to 102.\n\n1286\n01:06:40,595 --> 01:06:42,653\nIt's moved up to the next\naddress in that pool.\n\n1287\n01:06:46,372 --> 01:06:48,485\nIt's still not happy.\n\n1288\n01:06:50,777 --> 01:06:53,040\nOh, see here, it went down.\n\n1289\n01:06:53,040 --> 01:06:57,010\nMissed five keepalives taking lcp down,\nall right, so missed too many keepalives.\n\n1290\n01:06:57,010 --> 01:06:59,270\nSo I have a misconfiguration here so\n\n1291\n01:06:59,270 --> 01:07:02,700\nI have something set on\nthe server that's expecting\n\n1292\n01:07:02,700 --> 01:07:06,980\na link to be a certain status and on\nthe client side I don't have it matching.\n\n1293\n01:07:06,980 --> 01:07:10,310\nThis a problem with PPPoE;\nthere is a lot to configure,\n\n1294\n01:07:10,310 --> 01:07:14,160\na lot of different options that you can\nspecify and I've apparently missed one so\n\n1295\n01:07:14,160 --> 01:07:16,390\nI'll have to go back and double check.\n\n1296\n01:07:16,390 --> 01:07:20,170\nYour keep live intervals and\nall that stuff, it does into play.\n\n1297\n01:07:20,170 --> 01:07:22,750\nAll right, well let's do this, Ronnie.\n\n1298\n01:07:22,750 --> 01:07:25,280\nWhy do we stop here and take a break, and\n\n1299\n01:07:25,280 --> 01:07:28,370\nduring the break I'll find\nout which option I missed and\n\n1300\n01:07:28,370 --> 01:07:30,380\nget that line to come back up\n>> Yep, sounds good.\n\n1301\n01:07:30,380 --> 01:07:31,840\n>> And happy, and\nthen we'll go from there.\n\n1302\n01:07:31,840 --> 01:07:34,310\nYeah, it'll be something simple.\n\n1303\n01:07:34,310 --> 01:07:37,640\nIt always is you know,\nthat's the thing on these so, with PPPoE,\n\n1304\n01:07:37,640 --> 01:07:38,760\nthe thing to remember here.\n\n1305\n01:07:38,760 --> 01:07:40,780\nLet me bring this configuration back up.\n\n1306\n01:07:40,780 --> 01:07:44,400\nThat there's not a ton that\nwe have to configure, right.\n\n1307\n01:07:44,400 --> 01:07:49,650\nWe really just have to tell it to do\nthe encapsulation, to use chap or\n\n1308\n01:07:49,650 --> 01:07:53,630\npap or whatever it is we're gonna use, and\nthen to attach it to that interface, so\n\n1309\n01:07:53,630 --> 01:07:56,810\nthat basically what needs to\nbe done to get that system up.\n\n1310\n01:07:56,810 --> 01:07:58,910\nThe rest of the work is\ndone on the server side.\n\n1311\n01:07:58,910 --> 01:08:00,190\nNow on the server side there's a lot more.\n\n1312\n01:08:00,190 --> 01:08:02,590\nI think I've got an example\nof a server here.\n\n1313\n01:08:02,590 --> 01:08:05,740\nSo here's an example on the server side,\nwhere we have to define our own IP.\n\n1314\n01:08:05,740 --> 01:08:08,790\nSo here we set our advertising,\nour load intervals, and\n\n1315\n01:08:08,790 --> 01:08:11,890\nthese are all various things that\nwe set on the server side that,\n\n1316\n01:08:11,890 --> 01:08:15,450\nif there's a mistake on the server side,\nthen your client's not gonna be happy.\n\n1317\n01:08:15,450 --> 01:08:16,940\nAnd I think that's what I did.\n\n1318\n01:08:16,940 --> 01:08:19,670\nBut on the exam you guys don't have to\nworry about the server side of things,\n\n1319\n01:08:19,670 --> 01:08:23,980\nso I don't wanna spend too much\ntime troubleshooting that, so.\n\n1320\n01:08:23,980 --> 01:08:24,660\nAll right, let's do this.\n\n1321\n01:08:24,660 --> 01:08:25,840\nLet's stop here and take a break.\n\n1322\n01:08:25,840 --> 01:08:29,500\nWhen we get back,\nwe'll see PPPoE finished up.\n\n1323\n01:08:29,500 --> 01:08:32,188\nAnd we'll jump into the wonderful\nworld of [CROSSTALK].\n\n1324\n01:08:32,188 --> 01:08:42,190\n[SOUND]\n>> All right, welcome back everybody.\n\n1325\n01:08:42,190 --> 01:08:45,630\nLike most issues here,\nI wish I could say this amazing\n\n1326\n01:08:45,630 --> 01:08:48,380\nfeat of technological ability I did\nto get this connection working, but\n\n1327\n01:08:48,380 --> 01:08:50,525\nat the end of the day,\nI rebooted the routers.\n\n1328\n01:08:50,525 --> 01:08:52,020\n>> [LAUGH]\n>> And once I rebooted the routers,\n\n1329\n01:08:52,020 --> 01:08:56,070\nthe link came up working just fine,\nso who knows what's going on there.\n\n1330\n01:08:56,070 --> 01:09:01,790\nBut, so here on router 4,\nif I do a show IP interface brief,\n\n1331\n01:09:01,790 --> 01:09:05,360\nI can see that I've got\nthat fa0/0 with no IP.\n\n1332\n01:09:05,360 --> 01:09:07,720\nI can see the dialer is up and\nit got an IP.\n\n1333\n01:09:07,720 --> 01:09:10,470\nSince I rebooted, it went back to .100.\n\n1334\n01:09:10,470 --> 01:09:15,860\nAnd if I ping across to the other router\nsure enough well, I was pinging across and\n\n1335\n01:09:15,860 --> 01:09:20,470\ntrapped to ping there which\nis kinda fun but anyhow.\n\n1336\n01:09:20,470 --> 01:09:23,510\nSo I'm pinging across that line\ncommunicating to other side\n\n1337\n01:09:23,510 --> 01:09:27,230\nif I take a look at router one,\nthe receiving end of all this\n\n1338\n01:09:29,600 --> 01:09:33,410\nIt is up and it's got this virtual access.\n\n1339\n01:09:33,410 --> 01:09:36,120\nThese are the dial-in,\nthe people that are connecting in to us.\n\n1340\n01:09:36,120 --> 01:09:38,230\nEach one will get\na virtual access interface.\n\n1341\n01:09:38,230 --> 01:09:40,990\nSo, these are dynamically\ncreated as people connect in.\n\n1342\n01:09:40,990 --> 01:09:43,270\nIf this were a true dial-up line,\n\n1343\n01:09:43,270 --> 01:09:45,740\nthen you'd really only have\none person connecting to it.\n\n1344\n01:09:45,740 --> 01:09:49,280\nBut with a PPPoE link,\nyou might have hundreds or\n\n1345\n01:09:49,280 --> 01:09:52,925\nthousands of people connected on this\none link because it's a shared network.\n\n1346\n01:09:52,925 --> 01:09:53,520\nRight.\n\n1347\n01:09:53,520 --> 01:09:56,685\nSo they have to have these\nsub-interfaces that you see pop up.\n\n1348\n01:09:56,685 --> 01:09:58,560\nRight.\nAnd there's this virtual template,\n\n1349\n01:09:58,560 --> 01:10:00,330\nthat's what cloned every\ntime somebody connects.\n\n1350\n01:10:00,330 --> 01:10:02,930\nSo the server side is pretty complex.\n\n1351\n01:10:02,930 --> 01:10:05,395\nThe client side,\nit's pretty straightforward.\n\n1352\n01:10:05,395 --> 01:10:06,770\n>> Right.\n\n1353\n01:10:06,770 --> 01:10:11,800\n>> All right, so just to kind of review\nthat configuration from the client side,\n\n1354\n01:10:11,800 --> 01:10:14,060\nwhat we need to be aware of for the exam.\n\n1355\n01:10:14,060 --> 01:10:17,840\nReally, you're telling\nthe interface to use PPPoE, and\n\n1356\n01:10:17,840 --> 01:10:19,870\nconnecting it to a dialer, right.\n\n1357\n01:10:19,870 --> 01:10:23,550\nAnd then on the dialer,\nyou're telling it to use PPP and\n\n1358\n01:10:23,550 --> 01:10:27,000\nconnecting it to the dialer also.\n\n1359\n01:10:27,000 --> 01:10:28,150\nIt's part of it.\n\n1360\n01:10:28,150 --> 01:10:30,500\nAnd then you define the authentication,\nright.\n\n1361\n01:10:30,500 --> 01:10:34,430\nSo whether we're using PAP or CHAP, or\na mixture of all the above, so we can\n\n1362\n01:10:34,430 --> 01:10:38,770\nmove through it, and then lastly who we\nset a route to make use of that dialer.\n\n1363\n01:10:38,770 --> 01:10:41,070\nRight.\nA lot of dialup terminology, and\n\n1364\n01:10:41,070 --> 01:10:45,330\nthat's because this is dialup technology\nbeing retrofit on top of Ethernet.\n\n1365\n01:10:45,330 --> 01:10:49,180\n>> So this means that we're ready\nto move on to the next technology.\n\n1366\n01:10:49,180 --> 01:10:53,610\nThat Cisco really still wants you\nto have a good solid understanding\n\n1367\n01:10:53,610 --> 01:10:56,120\nof the configuration which is frame relay.\n\n1368\n01:10:56,120 --> 01:10:59,640\nNow even though you're not gonna\nsee frame relay a lot anymore\n\n1369\n01:10:59,640 --> 01:11:02,880\nin rural world networking a lot of times.\n\n1370\n01:11:02,880 --> 01:11:06,050\nThey still expect you to know it and\nthat's because just about ever Cisco\n\n1371\n01:11:06,050 --> 01:11:09,550\nhome lab that you actually build is\ngonna use some type of frame relay.\n\n1372\n01:11:09,550 --> 01:11:12,070\nAnd they want you to at least make\nsure that you can configure that\n\n1373\n01:11:12,070 --> 01:11:13,020\nat the CC and A level.\n\n1374\n01:11:14,080 --> 01:11:17,720\n>> Yeah, now with frame relay, I kinda\ndescribed it earlier about how we have\n\n1375\n01:11:17,720 --> 01:11:21,630\nthese virtual circuits that run across\nthe telephone company's network.\n\n1376\n01:11:21,630 --> 01:11:24,839\nThe real work, the hard part of frame\nrelay, is done by the telephone company.\n\n1377\n01:11:24,839 --> 01:11:25,674\n>> Yeah.\n>> They deal with it.\n\n1378\n01:11:25,674 --> 01:11:26,235\nRight.\n\n1379\n01:11:26,235 --> 01:11:28,756\nThey are the ones that have to map\nthat circuit all the way across.\n\n1380\n01:11:28,756 --> 01:11:32,281\nAnd at the end of the day, they tell you,\nthey say, hey, if you're at this branch,\n\n1381\n01:11:32,281 --> 01:11:36,020\nhere's your circuit number and that's\nwhat connects you to this other branch.\n\n1382\n01:11:36,020 --> 01:11:38,950\nAnd that's really all they give us and\nwe just work with the circuit numbers.\n\n1383\n01:11:38,950 --> 01:11:40,420\nIt's pretty straight forward.\n\n1384\n01:11:40,420 --> 01:11:43,510\nThat circuit number is a part\nof what's called a DLCI or\n\n1385\n01:11:43,510 --> 01:11:47,980\na data link circuit identifier, D-L-C-I.\n\n1386\n01:11:47,980 --> 01:11:51,010\nAnd the DLCI number is that circuit.\n\n1387\n01:11:51,010 --> 01:11:54,360\nAnd so we tell our router, hey router one,\n\n1388\n01:11:54,360 --> 01:11:59,020\nif you wanna get to router two\nUse circuit number X, right?\n\n1389\n01:11:59,020 --> 01:12:03,210\nAnd if router 2 wants to get back\nto router 1, use circuit number Y.\n\n1390\n01:12:03,210 --> 01:12:05,720\nThe circuit numbers rarely match.\n\n1391\n01:12:05,720 --> 01:12:08,270\nThey rarely match because router 1 and\n\n1392\n01:12:08,270 --> 01:12:11,470\nrouter 2 are not normally\nplugged in to the same switch.\n\n1393\n01:12:11,470 --> 01:12:13,550\nThere might be 5,\n\n1394\n01:12:13,550 --> 01:12:17,420\n10, 100 telephone company switches\nin-between router 1 and router 2.\n\n1395\n01:12:17,420 --> 01:12:22,110\nWhen you configure frame relay, you're not\ntalking, you're teaching your router how\n\n1396\n01:12:22,110 --> 01:12:28,450\nto talk and between router 1 and router 2,\nyou're just configuration the first pop.\n\n1397\n01:12:28,450 --> 01:12:29,560\nYou're configuring that link.\n\n1398\n01:12:29,560 --> 01:12:32,190\nLet me see if I can highlight this here.\n\n1399\n01:12:33,570 --> 01:12:38,290\nYou're configuring that first\nlink right between the router and\n\n1400\n01:12:38,290 --> 01:12:41,410\nthe telephone company's switch and\nthat's it.\n\n1401\n01:12:41,410 --> 01:12:46,210\nSo you can figure this little spot\nright here on all these routers and\n\n1402\n01:12:46,210 --> 01:12:48,260\nthen the telephone company.\n\n1403\n01:12:48,260 --> 01:12:51,780\nDoes all the mappings between them,\nall right.\n\n1404\n01:12:51,780 --> 01:12:53,820\nSo they're really doing the hard work.\n\n1405\n01:12:53,820 --> 01:12:54,490\n>> Yeah.\n\n1406\n01:12:54,490 --> 01:12:57,110\nNow the neat thing about\nthis is because of that\n\n1407\n01:12:57,110 --> 01:13:01,170\nyou don't really have to configure a lot\nand is relatively easy to troubleshoot\n\n1408\n01:13:01,170 --> 01:13:05,050\nthe configuration are relatively simple\nfor us to actually be able to put.\n\n1409\n01:13:05,050 --> 01:13:07,280\nSo remember you don't worry\nabout the end to end connection.\n\n1410\n01:13:07,280 --> 01:13:10,479\nWhat you're worrying about in\nthe configuration is between you and\n\n1411\n01:13:10,479 --> 01:13:12,173\nthe frame relay service provider.\n\n1412\n01:13:12,173 --> 01:13:13,880\nThat's all you're really worrying about.\n\n1413\n01:13:13,880 --> 01:13:16,970\n>> Now we do need to make a choice,\nwhen you configure frame relay,\n\n1414\n01:13:16,970 --> 01:13:19,380\nyou can configure it two different ways.\n\n1415\n01:13:19,380 --> 01:13:21,750\nReally three but\nwe're only concerned about two.\n\n1416\n01:13:21,750 --> 01:13:26,210\nYou can do a point-to-point frame relay\nconnection where you have a circuit\n\n1417\n01:13:26,210 --> 01:13:29,870\nthat runs from router one to router two,\nwhen you define it and that's it.\n\n1418\n01:13:29,870 --> 01:13:34,470\nOr you can do a point to multi point\nwhere you have one connection at like\n\n1419\n01:13:34,470 --> 01:13:39,050\na home office and then it runs out\nto your various remotes right and\n\n1420\n01:13:39,050 --> 01:13:41,750\nit's all on the same link, all right.\n\n1421\n01:13:41,750 --> 01:13:45,900\nThe big difference between the two,\nit really boils down to\n\n1422\n01:13:45,900 --> 01:13:49,700\nwhether you wanna have separate networks\nbetween your different branches, or\n\n1423\n01:13:49,700 --> 01:13:52,410\nif you want them all to\nbe on the same network.\n\n1424\n01:13:52,410 --> 01:13:56,360\nIf you want router one, router two, and\nrouter three to appear as if they were on\n\n1425\n01:13:56,360 --> 01:14:01,900\nthe same IP sub-net, you would\nneed to use point to multi point.\n\n1426\n01:14:01,900 --> 01:14:05,800\nBut if you wanted to do\nindividual point to point links,\n\n1427\n01:14:05,800 --> 01:14:09,760\nbetween these branches you would\nuse point to point prime relay.\n\n1428\n01:14:09,760 --> 01:14:14,730\nNow from a money side,\nfrom a physical side, it's identical.\n\n1429\n01:14:14,730 --> 01:14:15,920\nSo, it's all in software.\n\n1430\n01:14:15,920 --> 01:14:18,290\nWe make the decision, and\nyou can switch from one to the other.\n\n1431\n01:14:18,290 --> 01:14:21,400\nYou can switch from point to point, from\npoint to multi point, whenever you want.\n\n1432\n01:14:21,400 --> 01:14:23,340\nIt's just a software configuration.\n\n1433\n01:14:23,340 --> 01:14:25,090\nSo we just have to decide early on.\n\n1434\n01:14:25,090 --> 01:14:29,970\nNow, personally I always do\npoint to point cuz it gives you\n\n1435\n01:14:29,970 --> 01:14:34,730\nthe most control over the lines,\nbut on the exam you might see both.\n\n1436\n01:14:34,730 --> 01:14:37,020\nYou might see point to point and\npoint to multi point.\n\n1437\n01:14:37,020 --> 01:14:38,280\nSo we want to show you both.\n\n1438\n01:14:38,280 --> 01:14:43,480\n>> Now if you remember we go back a little\nbit also in terms of topology here, right?\n\n1439\n01:14:43,480 --> 01:14:45,465\nYou can talk about\nthe idea of a parsum Mash,\n\n1440\n01:14:45,465 --> 01:14:49,145\na full mash, the point to point types\nof connection that we have here.\n\n1441\n01:14:49,145 --> 01:14:51,625\nSo it just depends on your\nneed is what you have, and\n\n1442\n01:14:51,625 --> 01:14:53,885\nthat's the key to understanding\nwhich one you're gonna use.\n\n1443\n01:14:53,885 --> 01:14:54,815\n>> Good point, Ronnie.\n\n1444\n01:14:54,815 --> 01:14:58,360\nIf you're doing a full mash,\nyou'll want point to point.\n\n1445\n01:14:58,360 --> 01:14:59,940\nBut if you're not,\nif you're doing like a hub and\n\n1446\n01:14:59,940 --> 01:15:03,480\nspoke, you can do a point to multi-point,\nand it's just fine, right?\n\n1447\n01:15:03,480 --> 01:15:04,540\nSee, if you're doing a hub and\n\n1448\n01:15:04,540 --> 01:15:09,150\nspoke, if everybody runs back to\nthe home office like this, okay?\n\n1449\n01:15:09,150 --> 01:15:13,520\nWhether it's one sub-net, or multiple\nsub-nets, is not really a big deal\n\n1450\n01:15:13,520 --> 01:15:17,240\nif the headquarters goes offline,\nthe network is off, and that's it, right?\n\n1451\n01:15:17,240 --> 01:15:20,970\nBut if you're doing a full mesh and\nyou've done it this way,\n\n1452\n01:15:20,970 --> 01:15:25,358\nwhere router two could get to router\nthree by going through router one,\n\n1453\n01:15:25,358 --> 01:15:30,210\nif router one fails, router two and\nrouter three can't see each other.\n\n1454\n01:15:30,210 --> 01:15:34,220\nSo, in a full mesh environment you would\nwant to do point to point links like this.\n\n1455\n01:15:34,220 --> 01:15:36,760\nSo now,\neverybody can see each other directly.\n\n1456\n01:15:38,170 --> 01:15:40,560\nAnd if router one fails big deal.\n\n1457\n01:15:40,560 --> 01:15:44,345\nRouter two and three can still see each\nother via this link down here right?\n\n1458\n01:15:44,345 --> 01:15:47,643\nSo a lot more power available to us there.\n\n1459\n01:15:47,643 --> 01:15:48,770\nAll right?\n\n1460\n01:15:48,770 --> 01:15:50,310\nBut again it's something\nthat we can change.\n\n1461\n01:15:50,310 --> 01:15:52,710\nThe phone company doesn't charge extra or\nanything for\n\n1462\n01:15:52,710 --> 01:15:54,480\nit cuz it's really done in software.\n\n1463\n01:15:54,480 --> 01:15:56,140\nYou just need to have\nthe circuits defined.\n\n1464\n01:15:56,140 --> 01:15:57,500\nThe bandwidth is all the same.\n\n1465\n01:15:57,500 --> 01:15:58,470\nAll right.\n\n1466\n01:15:58,470 --> 01:16:02,190\nAnd that's because you've got this one\nphysical link, and that's what you really\n\n1467\n01:16:02,190 --> 01:16:05,120\npay for, and the virtual link\non top of it is just software.\n\n1468\n01:16:06,370 --> 01:16:08,652\nAll right.\nLet's start with a point to point link.\n\n1469\n01:16:08,652 --> 01:16:11,680\nI'm gonna link between router one and\nrouter two.\n\n1470\n01:16:11,680 --> 01:16:13,760\nThe first thing I need to do is\ncall the phone company and say,\n\n1471\n01:16:13,760 --> 01:16:16,450\nhey, I want to connect router one and\nrouter two.\n\n1472\n01:16:16,450 --> 01:16:17,710\nI ordered frame relay lines.\n\n1473\n01:16:17,710 --> 01:16:21,370\nThey're plugged in,\nwhat circuit number should I use, okay?\n\n1474\n01:16:21,370 --> 01:16:25,410\nAnd in this example I created some easy\ncircuit numbers so I could remember them.\n\n1475\n01:16:25,410 --> 01:16:28,220\nOn router one I created\ncircuit number 102,\n\n1476\n01:16:28,220 --> 01:16:32,730\nand on router two I created\ncircuit number 201, right?\n\n1477\n01:16:32,730 --> 01:16:36,110\nSo if router two wants\nto get to router one,\n\n1478\n01:16:36,110 --> 01:16:39,370\nit's gonna use this circuit\nnumber on its local switch.\n\n1479\n01:16:39,370 --> 01:16:41,060\nAnd if router one wants\nto get to router two,\n\n1480\n01:16:41,060 --> 01:16:44,860\nit's gonna use this circuit number to get\nto that other router on its local switch.\n\n1481\n01:16:44,860 --> 01:16:50,640\nSo those are the circuit numbers that\nI define for this link right here.\n\n1482\n01:16:52,550 --> 01:16:54,590\nAll right, so now I'm just gonna go and\nget that configured.\n\n1483\n01:16:54,590 --> 01:16:58,220\nNow when you configure it, the\nrecommendation is that you configure it on\n\n1484\n01:16:58,220 --> 01:17:02,790\na sub-interface, we don't have to use\nthe sub-interface, but it is a good idea.\n\n1485\n01:17:02,790 --> 01:17:04,410\nAnd if you guys remember\nroute around a stick,\n\n1486\n01:17:04,410 --> 01:17:09,750\nthe CCENT show, it's the same concept,\nexcept I'm with a serial interface.\n\n1487\n01:17:09,750 --> 01:17:15,190\nI'm gonna get into serial interface 1/0,\nand I'm gonna do a no shut down,\n\n1488\n01:17:15,190 --> 01:17:22,120\nall right, so I'm gonna turn it on I'm\ngonna do encapsulation frame-relay.\n\n1489\n01:17:22,120 --> 01:17:26,258\n>> You might have\nmisspelled encapsulation.\n\n1490\n01:17:26,258 --> 01:17:29,880\n>> Encapsultation,\nencapsulation, there we go.\n\n1491\n01:17:29,880 --> 01:17:32,920\nSo, I'm gonna tell it that\nwe're using frame relay, and\n\n1492\n01:17:32,920 --> 01:17:36,990\nthen usually the only other command that\nI need to issue here is frame-relay.\n\n1493\n01:17:36,990 --> 01:17:43,640\nLmi-type, and whatever Lmi type\nmy frame relay provider is using.\n\n1494\n01:17:43,640 --> 01:17:47,110\nNow, how do I know what\nswitch type they're using?\n\n1495\n01:17:47,110 --> 01:17:48,430\nI'll usually call them up.\n\n1496\n01:17:48,430 --> 01:17:50,850\nAnd you say, hey, all right,\nso I got my circuit numbers.\n\n1497\n01:17:50,850 --> 01:17:52,270\nWhat switch type are you guys using?\n\n1498\n01:17:52,270 --> 01:17:55,140\nAre you using Cisco switches,\nare you using ANSI compatible, or\n\n1499\n01:17:55,140 --> 01:17:57,355\nare you using Q933A.\n\n1500\n01:17:57,355 --> 01:18:01,395\nThat would've been good information for\nme to get before the show.\n\n1501\n01:18:01,395 --> 01:18:03,970\n>> [LAUGH]\n>> In real life land,\n\n1502\n01:18:03,970 --> 01:18:06,890\nCISCO actually auto detects.\n\n1503\n01:18:06,890 --> 01:18:09,006\nSo it will look for a CISCO switch, but\n\n1504\n01:18:09,006 --> 01:18:12,727\nif it doesn't find one it will\nrotate through ANC, and Q933A.\n\n1505\n01:18:12,727 --> 01:18:14,450\nSo it will actually try them all.\n\n1506\n01:18:14,450 --> 01:18:16,720\nBut you don't normally want that.\n\n1507\n01:18:16,720 --> 01:18:18,570\nYou want your connection to\ncome up as fast as possible.\n\n1508\n01:18:18,570 --> 01:18:21,320\nSo if you can figure out what\nyour provider actually has,\n\n1509\n01:18:21,320 --> 01:18:22,590\nyou'll be better off.\n\n1510\n01:18:22,590 --> 01:18:26,020\nI'm gonna leave mine at Cisco, which\nmeans I didn't have to run this command.\n\n1511\n01:18:26,020 --> 01:18:27,880\nThat's the default,\nthat I'll leave it at Cisco.\n\n1512\n01:18:27,880 --> 01:18:29,530\nWe might have to come back and change it.\n\n1513\n01:18:29,530 --> 01:18:33,580\nIf the line doesn't come up,\nthat'll be why and I'll need to flip it.\n\n1514\n01:18:33,580 --> 01:18:36,890\nIt came back up.\n\n1515\n01:18:36,890 --> 01:18:38,530\nLet's see if it stays up.\n\n1516\n01:18:38,530 --> 01:18:41,470\nFrame relay lines,\nif you misconfigure them,\n\n1517\n01:18:41,470 --> 01:18:44,620\nthey're very susceptible to what's\ncalled flapping, where they come up.\n\n1518\n01:18:44,620 --> 01:18:45,330\nAnd then go down.\n\n1519\n01:18:45,330 --> 01:18:47,070\nAnd they come up and then they go down.\n\n1520\n01:18:47,070 --> 01:18:53,690\nSo see how this one it went down at 16\n.03.44, and then it came up at 16.04.04.\n\n1521\n01:18:53,690 --> 01:18:56,500\nThat's exactly 20 seconds later.\n\n1522\n01:18:56,500 --> 01:18:57,700\nRight.\nSo for\n\n1523\n01:18:57,700 --> 01:19:02,190\nit to be that precise exactly 20 seconds\nbetween going down and going up.\n\n1524\n01:19:02,190 --> 01:19:03,720\n>> Oh there you go.\n>> I doubt this line is stable.\n\n1525\n01:19:03,720 --> 01:19:05,240\n>> Yeah.\n>> And sure enough there it goes it went\n\n1526\n01:19:05,240 --> 01:19:07,740\ndown again, this time 30 seconds later.\n\n1527\n01:19:07,740 --> 01:19:10,530\nSo it stayed up for\n30 seconds and then failed.\n\n1528\n01:19:10,530 --> 01:19:13,130\nThat means I'm probably not talking\nto the device on the other end.\n\n1529\n01:19:13,130 --> 01:19:15,540\nSo I bet I need to hard set this.\n\n1530\n01:19:15,540 --> 01:19:17,030\nLet me go ahead and just set to ANSI,\n\n1531\n01:19:17,030 --> 01:19:19,460\nand we'll see if that\nmakes a difference for us.\n\n1532\n01:19:19,460 --> 01:19:22,260\nSo just be aware that if you're\nframe relay line comes up but\n\n1533\n01:19:22,260 --> 01:19:25,852\nthen drops back down again,\nthere's probably a misconfiguration there.\n\n1534\n01:19:25,852 --> 01:19:27,350\nAll right.\n\n1535\n01:19:27,350 --> 01:19:33,140\nAnd it's just sitting there,\nlet me do a shut down and a no shut down.\n\n1536\n01:19:33,140 --> 01:19:36,310\nLet's see if it comes up and it stays up.\n\n1537\n01:19:36,310 --> 01:19:38,020\nNow we'll have to wait 30 seconds or\n\n1538\n01:19:38,020 --> 01:19:41,780\nwhatever to see if it actually\ncomes up and stays up.\n\n1539\n01:19:41,780 --> 01:19:46,580\nSo there it is at 1605 and,\nten seconds, there it's up.\n\n1540\n01:19:46,580 --> 01:19:48,405\nAnd then if we wait 30 seconds,\nwe'll see if it goes down again.\n\n1541\n01:19:48,405 --> 01:19:49,005\n>> Mm-hm.\n\n1542\n01:19:49,005 --> 01:19:52,748\n>> But oh, well there we go.\n\n1543\n01:19:52,748 --> 01:19:55,340\nSo we had layer 1 and\nthen layer 2 just went up.\n\n1544\n01:19:55,340 --> 01:19:56,530\nWe'll wait and see.\n\n1545\n01:19:56,530 --> 01:19:58,095\nNow there are several\ntroubleshooting tools.\n\n1546\n01:19:58,095 --> 01:20:01,504\n>> Mm-hm.\n>> That we can use here like show\n\n1547\n01:20:01,504 --> 01:20:03,849\nframe-relay lmi.\n\n1548\n01:20:03,849 --> 01:20:06,470\nAnd that's gonna show if\nwe're talking to the switch.\n\n1549\n01:20:06,470 --> 01:20:10,375\nSee how I've got status inquiry sent 14,\nstatus message received six.\n\n1550\n01:20:10,375 --> 01:20:12,150\n>> Mm-hm.\n>> So I sent some that didn't make it.\n\n1551\n01:20:12,150 --> 01:20:15,225\nThat's probably when we were failing\nearlier, but now I'm getting some so\n\n1552\n01:20:15,225 --> 01:20:16,835\nthat means the line's\nprobably healthy now.\n\n1553\n01:20:17,955 --> 01:20:22,005\nAnd if you combine these messages received\nwith timeouts, six plus eight is 14.\n\n1554\n01:20:22,005 --> 01:20:24,005\nThat's exactly how many I sent.\n\n1555\n01:20:24,005 --> 01:20:26,347\nSo that accounts for all my messages.\n\n1556\n01:20:26,347 --> 01:20:29,257\nAnd I can see the time\nouts are not increasing.\n\n1557\n01:20:29,257 --> 01:20:30,597\nBut the received are.\n\n1558\n01:20:30,597 --> 01:20:33,107\nSo hard setting it to ANC\nseems to have solved my issue.\n\n1559\n01:20:34,477 --> 01:20:39,867\nWe can also do show frame-relay PVC.\n\n1560\n01:20:39,867 --> 01:20:42,127\nThat's the permanent virtual circuit.\n\n1561\n01:20:42,127 --> 01:20:46,520\nNow that I am talking to the switch,\nwhat circuits am I aware of?\n\n1562\n01:20:46,520 --> 01:20:50,580\nAnd, oh I'm still in config, there we go.\n\n1563\n01:20:50,580 --> 01:20:55,170\nSo I can see that I'm aware of a circuit\n102 and I'm aware of a circuit called 103.\n\n1564\n01:20:55,170 --> 01:20:58,510\nSo I've got connections\nout to other routers, so\n\n1565\n01:20:58,510 --> 01:21:01,350\nthose circuits show up as being there.\n\n1566\n01:21:01,350 --> 01:21:03,240\nThey show as currently being unused,\n\n1567\n01:21:03,240 --> 01:21:05,100\nand that's because we\nhaven't configured them yet.\n\n1568\n01:21:07,580 --> 01:21:08,340\nAll right.\n\n1569\n01:21:08,340 --> 01:21:10,370\nLet's configure them.\n\n1570\n01:21:10,370 --> 01:21:13,340\nNext, this I did on the parent interface.\n\n1571\n01:21:13,340 --> 01:21:15,370\nI turned on frame relay\non the parent interface.\n\n1572\n01:21:16,520 --> 01:21:23,594\nNow I'm going to create a sub-interface,\nand I'll just do like S1/0.\n\n1573\n01:21:24,740 --> 01:21:26,740\nI usually match the DLCI numbers.\n\n1574\n01:21:26,740 --> 01:21:27,246\nRight?\n>> Mm-hm.\n\n1575\n01:21:27,246 --> 01:21:27,752\n>> So like .102.\n\n1576\n01:21:27,752 --> 01:21:29,410\nYou don't have to.\n\n1577\n01:21:29,410 --> 01:21:31,910\nYou can pick whatever\nsub-interface number you want.\n\n1578\n01:21:31,910 --> 01:21:33,020\nI'm going to router 2.\n\n1579\n01:21:33,020 --> 01:21:35,090\nSo maybe I pick .2.\n\n1580\n01:21:35,090 --> 01:21:35,680\nRight?\nBut\n\n1581\n01:21:35,680 --> 01:21:40,230\nI usually match the DLCI numbers\njust to help me keep it straight and\n\n1582\n01:21:40,230 --> 01:21:43,170\nwhen we create that sub-interface,\n\n1583\n01:21:43,170 --> 01:21:47,140\nI need to say whether it's point\nto point or point to multi-point.\n\n1584\n01:21:47,140 --> 01:21:53,150\nAnd we're doing point to point.\n\n1585\n01:21:53,150 --> 01:21:56,270\nAnd now I can do things like\nassigning an IP address.\n\n1586\n01:21:56,270 --> 01:21:59,024\nSo maybe I'll make this the 192.168.\n\n1587\n01:22:01,030 --> 01:22:03,334\nWe'll do the .2.0 network.\n\n1588\n01:22:05,853 --> 01:22:06,515\nAll right.\n\n1589\n01:22:06,515 --> 01:22:09,710\nI can do a no shutdown, but\nI think they're on by default.\n\n1590\n01:22:09,710 --> 01:22:13,056\nAnd then I can do a frame-relay,\n\n1591\n01:22:13,056 --> 01:22:20,680\ninterface-dlci 102, so that it knows\nthat's the DLCI number to use.\n\n1592\n01:22:20,680 --> 01:22:24,940\nSo, to communicate on this network,\nI need to go out circuit number 102.\n\n1593\n01:22:24,940 --> 01:22:29,310\n>> Now, the important part of this\nconfiguration is to remember,\n\n1594\n01:22:29,310 --> 01:22:33,210\nnever assign a DLCI number\nfrom another router.\n\n1595\n01:22:33,210 --> 01:22:38,690\nSo, if you do call the ISP and they tell\nyou what DLCI number to use, use that one.\n\n1596\n01:22:38,690 --> 01:22:41,900\nA lot of times the easiest\nway to get this misconfigured\n\n1597\n01:22:41,900 --> 01:22:46,720\nis the thing that you're trying to\nattach to the remote sides DLCI number.\n\n1598\n01:22:46,720 --> 01:22:49,540\nSo it's always a local DLCI\nnumber that you're connecting to.\n\n1599\n01:22:51,080 --> 01:22:53,220\n>> Yep, and\nthat's just one of the sub-interfaces.\n\n1600\n01:22:53,220 --> 01:22:58,476\nI might go in and\ncreate serial 1/0.103, for\n\n1601\n01:22:58,476 --> 01:23:03,972\nmy connection to router 3,\nand assign it an IP address\n\n1602\n01:23:03,972 --> 01:23:09,622\nof 192.168.3.1, typing is my challenge.\n\n1603\n01:23:09,622 --> 01:23:14,338\n[BLANK AUDIO] [SOUND] All right, so\n\n1604\n01:23:14,338 --> 01:23:21,033\nnow I've configured those\ntwo sub-interfaces and\n\n1605\n01:23:21,033 --> 01:23:26,205\nif I do a show IP interface brief I'll see\n\n1606\n01:23:26,205 --> 01:23:31,086\nthat serial 1/0 has no IP address.\n\n1607\n01:23:31,086 --> 01:23:32,224\n>> Mm-hm.\n>> I didn't assign one there.\n\n1608\n01:23:32,224 --> 01:23:33,970\nI did everything on the sub-interface.\n\n1609\n01:23:33,970 --> 01:23:37,870\nOn the parent, I just said that\nwe were using frame-relay,\n\n1610\n01:23:37,870 --> 01:23:40,960\nthat we were using a certain LMI type.\n\n1611\n01:23:40,960 --> 01:23:47,400\nBut then on the sub-interfaces,\nthese are time to DLCI 102 and DLCI 103.\n\n1612\n01:23:47,400 --> 01:23:53,460\nNow the phone company has mapped 102\non this router, to 201 on router 2.\n\n1613\n01:23:53,460 --> 01:23:56,020\nSo I really need to jump over\nto router 2 and set it up there.\n\n1614\n01:23:56,020 --> 01:23:57,370\nBut notice how the line says, up up.\n\n1615\n01:23:57,370 --> 01:23:59,790\nLooks like it's up and it's healthy.\n\n1616\n01:23:59,790 --> 01:24:01,110\nWell it's not.\n\n1617\n01:24:01,110 --> 01:24:05,600\nWhat you see here is your\nconnection to the Telco switch.\n\n1618\n01:24:05,600 --> 01:24:08,510\nThis part right here where it\nsays up up does not reflect\n\n1619\n01:24:08,510 --> 01:24:12,150\nthe health of the telephone company's\nnetwork, the health of the other end.\n\n1620\n01:24:12,150 --> 01:24:15,310\nWe don't actually know if\nthe other end is up based on this.\n\n1621\n01:24:15,310 --> 01:24:16,670\nWe have to look at the circuit.\n\n1622\n01:24:16,670 --> 01:24:23,230\nSo we can do that, show frame-relay PVC,\nand I can see that 102,\n\n1623\n01:24:23,230 --> 01:24:29,240\nusage is local, status is active,\nand I've got some bytes going out.\n\n1624\n01:24:29,240 --> 01:24:31,440\nBut I don't have any bytes going in.\n\n1625\n01:24:31,440 --> 01:24:36,270\nSo the line shows as active, I'm using it,\nbut no data is flowing across it and\n\n1626\n01:24:36,270 --> 01:24:37,710\neventually it'll switch to inactive.\n\n1627\n01:24:39,360 --> 01:24:41,510\nBut that's it right now.\n\n1628\n01:24:41,510 --> 01:24:42,510\nI need to configure the other end.\n\n1629\n01:24:44,970 --> 01:24:46,510\nAll right, so\nI'm gonna jump over to router 2,\n\n1630\n01:24:46,510 --> 01:24:49,960\nand on router 2 it's basically\nthe same exact process, right?\n\n1631\n01:24:49,960 --> 01:24:52,783\nI need to get into interface serial 1/0.\n\n1632\n01:24:52,783 --> 01:24:56,290\nI'm gonna remove an address\nif there is one.\n\n1633\n01:24:57,600 --> 01:25:01,456\nLet's see,\nI want encapsulation frame-relay.\n\n1634\n01:25:01,456 --> 01:25:08,500\nFrame-relay lmi-type ansi and no shutdown.\n\n1635\n01:25:08,500 --> 01:25:10,810\nAll right, so\nthat should come up and be healthy.\n\n1636\n01:25:12,100 --> 01:25:16,890\nAnd then I'll do,\nit's gonna be DLCI 201 on this side.\n\n1637\n01:25:37,838 --> 01:25:38,477\nThere we go.\n\n1638\n01:25:42,569 --> 01:25:44,516\nAll right, and you know the commands,\n\n1639\n01:25:44,516 --> 01:25:47,350\nthey're kinda getting blurred\nin with the status logs.\n\n1640\n01:25:47,350 --> 01:25:51,610\nWe'll review the commands in a minute and\nI'll post them with the show notes so\n\n1641\n01:25:51,610 --> 01:25:53,590\nyou guys can kind of see that there too.\n\n1642\n01:25:53,590 --> 01:25:59,650\nBut basically, I now have a sub-interface\nthat's tied to DLCI number 201.\n\n1643\n01:25:59,650 --> 01:26:05,230\nIt shows as up up, which again just lets\nme know that I'm talking to my Telco.\n\n1644\n01:26:05,230 --> 01:26:11,955\nSo if I do a show frame-relay lmi this\nshows me talking to the telephone company.\n\n1645\n01:26:11,955 --> 01:26:13,555\nI have sent five status increase.\n\n1646\n01:26:13,555 --> 01:26:15,865\nI've received five status\nincrease it's up and it's happy.\n\n1647\n01:26:17,035 --> 01:26:19,305\nAnd if I do a show frame-relay pvc\n\n1648\n01:26:20,845 --> 01:26:25,705\nright there I can see a 201 show\nthat it's active, that it's up and\n\n1649\n01:26:25,705 --> 01:26:32,140\nI see not only do I have out packets but\nI also have in bytes or in packets.\n\n1650\n01:26:32,140 --> 01:26:36,460\nSo we've actually got communications\ngoing on, very low level right?\n\n1651\n01:26:36,460 --> 01:26:39,710\nSo probably Cisco discovery protocols,\nor something.\n\n1652\n01:26:41,940 --> 01:26:43,080\nLet's generate some pings.\n\n1653\n01:26:43,080 --> 01:26:44,115\nSo I'm on router 2, which is 192.168.2.2.\n\n1654\n01:26:44,115 --> 01:26:49,337\nI'm gonna ping 192.168.2.1 and\nI'm pinging across the frame-relay line.\n\n1655\n01:26:49,337 --> 01:26:56,095\n>> The other show of command that we\ncan also run is just show frame relay.\n\n1656\n01:26:56,095 --> 01:26:57,105\nIs it map?\n\n1657\n01:26:57,105 --> 01:26:59,315\nI think that's right.\n\n1658\n01:26:59,315 --> 01:27:02,695\nThat will also help you\nas far as verifying and\n\n1659\n01:27:02,695 --> 01:27:04,955\ntroubleshooting your\nparticular connection there.\n\n1660\n01:27:04,955 --> 01:27:06,018\nWhat you're looking for there.\n\n1661\n01:27:06,018 --> 01:27:08,030\nIs the point-to-point.\n\n1662\n01:27:08,030 --> 01:27:12,160\nNotice that it tells you what type of\nframe relay connection you're talking\n\n1663\n01:27:12,160 --> 01:27:16,820\nabout, as well as the status, whether\nit's active or not, and the DLCI number.\n\n1664\n01:27:16,820 --> 01:27:18,015\nMake sure you take a look at that,\n\n1665\n01:27:18,015 --> 01:27:20,590\ncause you may see where it\nactually shows inactive.\n\n1666\n01:27:20,590 --> 01:27:22,693\nIt may actually indicate\nsomething else for us,\n\n1667\n01:27:22,693 --> 01:27:24,598\nwhich we'll talk about a little bit later.\n\n1668\n01:27:24,598 --> 01:27:26,720\n>> So\nour three commands that we've been using.\n\n1669\n01:27:30,080 --> 01:27:30,881\n>> All right.\n\n1670\n01:27:30,881 --> 01:27:35,649\nFirst was LMI, which shows the status\n\n1671\n01:27:35,649 --> 01:27:39,680\nof our connection to the Telco.\n\n1672\n01:27:39,680 --> 01:27:43,260\nAll right, and let me move this up higher.\n\n1673\n01:27:44,280 --> 01:27:45,160\nThere we go.\n\n1674\n01:27:45,160 --> 01:27:45,940\nAll right.\n\n1675\n01:27:45,940 --> 01:27:51,320\nThe other one that we did was\nshow frame relay PVC, which\n\n1676\n01:27:53,410 --> 01:27:59,570\nshows the status of our\ncircuit to the other end.\n\n1677\n01:27:59,570 --> 01:28:02,020\nRight, so\nthat's more end to end at that point.\n\n1678\n01:28:02,020 --> 01:28:02,860\nAnd then.\n\n1679\n01:28:02,860 --> 01:28:04,410\nOh I did PVC twice.\n\n1680\n01:28:04,410 --> 01:28:05,320\nMap, right.\n\n1681\n01:28:06,600 --> 01:28:09,320\nShows the status of the,\n\n1682\n01:28:12,270 --> 01:28:16,220\nI'll say layer 2,\nlayer 3 connection to the other end.\n\n1683\n01:28:17,250 --> 01:28:17,750\nRight.\n\n1684\n01:28:17,750 --> 01:28:20,290\nCuz the other ones are really talking\nabout layer two connectivity.\n\n1685\n01:28:20,290 --> 01:28:23,458\nThe PVC and the LMI,\nthat's all layer two and layer one.\n\n1686\n01:28:23,458 --> 01:28:27,750\nBut the frame-relay map, it's showing that\nIP address mapping that we're connecting\n\n1687\n01:28:27,750 --> 01:28:31,140\nto that DLCI and\ngetting that interface tied to that DLCI.\n\n1688\n01:28:31,140 --> 01:28:34,170\nSo we start to see a little more\ninformation there, well, we're up and\n\n1689\n01:28:34,170 --> 01:28:36,730\nwe're healthy,\nthis is a point to point link.\n\n1690\n01:28:36,730 --> 01:28:40,470\nThis network is dedicated\nto this one link.\n\n1691\n01:28:40,470 --> 01:28:42,060\nI'm not connected to router 3 yet,\n\n1692\n01:28:42,060 --> 01:28:45,270\nif I wanted to connect to router three\nI would need to do the same thing, and\n\n1693\n01:28:45,270 --> 01:28:49,020\nthen router 2 and router 3 could talk to\neach other by going through router 1.\n\n1694\n01:28:49,020 --> 01:28:51,190\nBut they'd be separate\nnetworks at that point.\n\n1695\n01:28:51,190 --> 01:28:53,830\nIn fact,\nI should already see that on router 1.\n\n1696\n01:28:53,830 --> 01:28:58,910\nIf I do a show IP route, There.\n\n1697\n01:28:58,910 --> 01:29:03,740\nWe've got 192.168.2.0 and 192.168.3.0.\n\n1698\n01:29:03,740 --> 01:29:07,300\nThe two different networks from router 1.\n\n1699\n01:29:07,300 --> 01:29:11,880\nNow it's one physical interface, but\nI did sub interfaces to divide it up.\n\n1700\n01:29:11,880 --> 01:29:14,900\nSo going kind of back for a diagram here.\n\n1701\n01:29:14,900 --> 01:29:15,610\nRight.\n\n1702\n01:29:15,610 --> 01:29:18,780\nWe've got the one circuit running\nfrom router 1 to router 2.\n\n1703\n01:29:18,780 --> 01:29:24,240\nAnd then, we've got another circuit\nrunning from router 1 to router 3.\n\n1704\n01:29:24,240 --> 01:29:26,980\nAnd on that other circuit,\nwe have different DLCI numbers, right.\n\n1705\n01:29:26,980 --> 01:29:31,500\nSo, we'd have 103 here and\non the other end it's just 301.\n\n1706\n01:29:31,500 --> 01:29:35,520\nSo you have different\nDLCI numbers on each end.\n\n1707\n01:29:35,520 --> 01:29:39,590\nIt is possible for the DLCI numbers\nto match, but it's not very common.\n\n1708\n01:29:39,590 --> 01:29:43,050\nIt's pretty uncommon because there's so\nmany switches involved.\n\n1709\n01:29:43,050 --> 01:29:45,440\nYour DLCI numbers are normally\ngonna be four digits.\n\n1710\n01:29:45,440 --> 01:29:46,740\nIt's not normally three.\n\n1711\n01:29:48,040 --> 01:29:48,900\nBut it can be.\n\n1712\n01:29:48,900 --> 01:29:49,900\nIt can be one digit, really.\n\n1713\n01:29:49,900 --> 01:29:51,055\nThey can do whatever they want.\n\n1714\n01:29:51,055 --> 01:29:52,721\n[LAUGH] All right, so\n\n1715\n01:29:52,721 --> 01:29:58,320\npoint to point gives us the most\ncontrol over each individual link.\n\n1716\n01:29:58,320 --> 01:30:01,090\nWe can do access control list,\nwe can do all sorts of filtering.\n\n1717\n01:30:01,090 --> 01:30:03,800\nLots of control on point-to-point links.\n\n1718\n01:30:03,800 --> 01:30:06,270\nWe just have to create sub interfaces for\nevery remote.\n\n1719\n01:30:06,270 --> 01:30:07,770\nThat's really the only negative.\n\n1720\n01:30:07,770 --> 01:30:09,200\nIt's just a little more work.\n\n1721\n01:30:09,200 --> 01:30:12,182\nBut once it's in place,\nit does give you the most flexibility.\n\n1722\n01:30:12,182 --> 01:30:16,910\nBecause they're point-to-point links,\nwe'll normally use really small networks\n\n1723\n01:30:16,910 --> 01:30:22,870\nlike slash thirties that only have two\nIPs because you just need two ends right.\n\n1724\n01:30:22,870 --> 01:30:23,370\n>> Right.\n\n1725\n01:30:24,480 --> 01:30:26,680\nNow the key here on this for\n\n1726\n01:30:26,680 --> 01:30:31,610\nus again is to make sure we understand\nthe point to point aspect of this.\n\n1727\n01:30:31,610 --> 01:30:34,222\nIn terms of our configuration for\nframe relay.\n\n1728\n01:30:34,222 --> 01:30:37,250\nWe wanna make sure that we understand\nthat we have to set that up\n\n1729\n01:30:37,250 --> 01:30:41,740\non the actual sub interfaces, to be point\nto point, or it's not going to work.\n\n1730\n01:30:41,740 --> 01:30:44,380\nThe nice thing about a configuration is\nthat once we set up that parent interface,\n\n1731\n01:30:44,380 --> 01:30:47,300\nwhen we set up the sub-interface,\nwe don't actually put that in there.\n\n1732\n01:30:47,300 --> 01:30:51,240\nIt's going to tell us, hey you're\nnot really complete with this here.\n\n1733\n01:30:51,240 --> 01:30:53,220\nNow the way that Don also set this up,\n\n1734\n01:30:53,220 --> 01:30:58,910\nusing that frame relay\ninterface Delci- Delci, and\n\n1735\n01:30:58,910 --> 01:31:03,610\nthen the local Delci number actually let's\nit do something automatically for us.\n\n1736\n01:31:03,610 --> 01:31:06,925\nIn other words, it It is essentially\nturning over the control\n\n1737\n01:31:06,925 --> 01:31:09,675\ninto the frame relay cloud, saying, hey.\n\n1738\n01:31:09,675 --> 01:31:11,745\nYou make this connection for us.\n\n1739\n01:31:11,745 --> 01:31:14,695\nSo that's what our router's\nactually telling us to do.\n\n1740\n01:31:14,695 --> 01:31:17,695\nYou make the connection with this\nDelci number to wherever it actually\n\n1741\n01:31:17,695 --> 01:31:19,060\nneeds to go to.\n\n1742\n01:31:19,060 --> 01:31:20,530\nThere's another way that\nwe're gonna show you.\n\n1743\n01:31:20,530 --> 01:31:22,658\nIt looks like maybe right\nafter the break here.\n\n1744\n01:31:22,658 --> 01:31:25,660\nWhen we're gonna actually do\nwhat we call static mapping\n\n1745\n01:31:25,660 --> 01:31:27,910\nof the actual frame relay\nconnection instead.\n\n1746\n01:31:27,910 --> 01:31:31,770\nAnd that's where we tell it to actually\nmatch an IP address to a Delci.\n\n1747\n01:31:31,770 --> 01:31:35,320\n>> Yeah here we're just attaching\nthe Delci to the sub interface so\n\n1748\n01:31:35,320 --> 01:31:37,510\nit's still fairly dynamic in this stage.\n\n1749\n01:31:37,510 --> 01:31:39,580\nSo yeah that's the example right there.\n\n1750\n01:31:39,580 --> 01:31:42,650\nYou can see the parent configuration\non this parent interface.\n\n1751\n01:31:42,650 --> 01:31:45,420\nAnd then the configuration\nI did on the subinterfaces.\n\n1752\n01:31:45,420 --> 01:31:48,053\nThis is considered a point\nto point configuration.\n\n1753\n01:31:48,053 --> 01:31:48,760\nAll right.\n\n1754\n01:31:48,760 --> 01:31:51,350\nWe're gonna take a look at\na point to multi point, but\n\n1755\n01:31:51,350 --> 01:31:54,058\nI didn't realize how much time's gone by,\nRonnie, so\n\n1756\n01:31:54,058 --> 01:31:57,670\nI guess we got a little off track\nwith [LAUGH] that PPOE issue earlier.\n\n1757\n01:31:57,670 --> 01:32:02,781\nWell, let's stop here and\ntake a quick break, and when we get back\n\n1758\n01:32:02,781 --> 01:32:08,079\nWe'll walk through the last example\nwhich is point to multi point for\n\n1759\n01:32:08,079 --> 01:32:12,394\nframe relay and\nthen we'll wrap up the show from there.\n\n1760\n01:32:12,394 --> 01:32:16,285\n[SOUND]\n>> All right, welcome back everybody.\n\n1761\n01:32:16,285 --> 01:32:20,463\nSo in this last segment we're gonna dive\ninto the configuration of frame relay\n\n1762\n01:32:20,463 --> 01:32:21,683\nmulti point, right.\n\n1763\n01:32:21,683 --> 01:32:24,645\nAnd multi point is useful in\nan environment where you wanna\n\n1764\n01:32:24,645 --> 01:32:29,872\nhave multiple connections out but you want\nthem all to be on the same IP subnet.\n\n1765\n01:32:29,872 --> 01:32:30,722\nYou normally do that for\n\n1766\n01:32:30,722 --> 01:32:35,482\nease of management, not really any other\nreason I don't like it myself, but because\n\n1767\n01:32:35,482 --> 01:32:38,032\nit can show up on the exam we wanna\nmake sure you guys are familiar with it,\n\n1768\n01:32:38,032 --> 01:32:41,842\nso let me just jump in here and\nwe will kinda run through that, right.\n\n1769\n01:32:41,842 --> 01:32:46,892\nSo here on router 1, I removed\nthe subinterfaces that we created\n\n1770\n01:32:46,892 --> 01:32:52,810\nearlier by doing no interface S1/0.102 and\nso on.\n\n1771\n01:32:52,810 --> 01:32:55,590\nBecause when we do a point\nto multi point line,\n\n1772\n01:32:55,590 --> 01:32:59,160\nwe don't need a bunch of sub-interfaces,\nwe really just need one, right.\n\n1773\n01:32:59,160 --> 01:33:03,470\nSo I'm gonna get into interface serial\n1/0 point, and I'll just do .1.\n\n1774\n01:33:03,470 --> 01:33:10,167\nAnd I'm gonna say points-to-multi point,\nall right.\n\n1775\n01:33:10,167 --> 01:33:12,774\nAnd, It may just.\n\n1776\n01:33:12,774 --> 01:33:14,944\nDidn't get happy with that, did it?\n\n1777\n01:33:14,944 --> 01:33:16,972\nIt may just take multi point.\n\n1778\n01:33:16,972 --> 01:33:19,237\nIt does.\n\n1779\n01:33:19,237 --> 01:33:20,158\nThank you Ronnie.\n\n1780\n01:33:20,158 --> 01:33:22,311\nThere we go, multipoint.\n\n1781\n01:33:22,311 --> 01:33:25,230\n[LAUGH] So, we'll go and\nset it as multipoint.\n\n1782\n01:33:25,230 --> 01:33:29,170\nAnd when I did this last time,\nI went in here and I signed an IP address.\n\n1783\n01:33:29,170 --> 01:33:30,070\nI'll do that again.\n\n1784\n01:33:30,070 --> 01:33:33,449\nThis time, I'll just use this one.\n\n1785\n01:33:33,449 --> 01:33:35,520\nAll right.\n\n1786\n01:33:35,520 --> 01:33:39,119\nI then said, interface or\nframe dash relay,\n\n1787\n01:33:39,119 --> 01:33:43,260\ninterface dash Delci and\nassign a Delci number.\n\n1788\n01:33:43,260 --> 01:33:44,470\nAll right.\n\n1789\n01:33:44,470 --> 01:33:48,793\nWhen you're doing a multi point blank,\nyou don't tie one Delci to the interface,\n\n1790\n01:33:48,793 --> 01:33:52,700\nbecause it's multi point,\nthere's multiple Delcis out there.\n\n1791\n01:33:52,700 --> 01:33:56,260\nSo instead, what you do,\nare frame relay maps.\n\n1792\n01:33:56,260 --> 01:33:59,360\nYou map IPs to particular Delcis.\n\n1793\n01:33:59,360 --> 01:34:04,550\nSo what I'm gonna do is I'm gonna\nsay frame relay map IP, and\n\n1794\n01:34:04,550 --> 01:34:10,659\nI'm gonna say that 192.168.0.2 is\ngoing to be available via Delci102.\n\n1795\n01:34:10,659 --> 01:34:11,550\nAll right.\n\n1796\n01:34:11,550 --> 01:34:14,100\nI could stop right here.\n\n1797\n01:34:14,100 --> 01:34:19,028\nIf I do, this is going to allow any\nunicast traffic that is destined for\n\n1798\n01:34:19,028 --> 01:34:22,797\n192.168.0.2 to go out the Delci102.\n\n1799\n01:34:22,797 --> 01:34:27,669\nRight.\nBut what about broadcasts?\n\n1800\n01:34:27,669 --> 01:34:31,592\nWell, frame relay networks\nare what are called NBMA networks,\n\n1801\n01:34:31,592 --> 01:34:34,090\nnon-broadcast multi-access network.\n\n1802\n01:34:34,090 --> 01:34:35,690\nThey don't normally allow broadcast.\n\n1803\n01:34:35,690 --> 01:34:37,015\nSo I could stop here and be happy.\n\n1804\n01:34:37,015 --> 01:34:37,900\n>> [LAUGH]\n>> But\n\n1805\n01:34:37,900 --> 01:34:43,790\nif you're gonna run dynamic protocols like\nOSPF and AIGRP,they need their broadcasts.\n\n1806\n01:34:43,790 --> 01:34:46,440\nSo you can add an extra tag here,\nbroadcast.\n\n1807\n01:34:47,820 --> 01:34:50,730\nAnd that'll say, if I'm gonna send\na broadcast across this line,\n\n1808\n01:34:50,730 --> 01:34:52,479\nconvert it to a unicast and then send it.\n\n1809\n01:34:52,479 --> 01:34:53,580\nAll right.\n\n1810\n01:34:53,580 --> 01:34:56,000\nIf we send an actual broadcast it\nwill just get trimmed off, right.\n\n1811\n01:34:56,000 --> 01:34:57,320\nSo, it's got to convert it to a unicast.\n\n1812\n01:34:57,320 --> 01:35:00,480\nAnd so we'll tell it to do that,\nand send it across the wire.\n\n1813\n01:35:00,480 --> 01:35:03,020\nNow, I need to continue to do the map.\n\n1814\n01:35:03,020 --> 01:35:05,820\nFor the other devices that\nare out there on the network.\n\n1815\n01:35:05,820 --> 01:35:10,725\nSo I'm gonna say that router three\nis gonna be 192.168.0.3, and\n\n1816\n01:35:10,725 --> 01:35:12,240\nit's on Delci 103.\n\n1817\n01:35:12,240 --> 01:35:15,820\nNow I don't need to add the broad, well\nactually I do need to add the broadcast,\n\n1818\n01:35:15,820 --> 01:35:17,350\ndon't I?\n\n1819\n01:35:17,350 --> 01:35:20,430\nIt's when you're doing the same\nDelci number over again,\n\n1820\n01:35:20,430 --> 01:35:22,170\nyou only have to do it\nonce per Delci number.\n\n1821\n01:35:22,170 --> 01:35:26,220\nBut since this is a different Delci,\nI need to include that broadcast again.\n\n1822\n01:35:26,220 --> 01:35:29,130\nAnd then, one little side thing.\n\n1823\n01:35:29,130 --> 01:35:33,908\nIf you expect to be able to ping yourself,\nyou can only ping yourself.\n\n1824\n01:35:33,908 --> 01:35:37,718\nIf it's tied to a DLCI number and\nso you don't have to do this.\n\n1825\n01:35:37,718 --> 01:35:41,472\nTechnically I'm done right here but\nI always like to go ahead and\n\n1826\n01:35:41,472 --> 01:35:44,392\nadd myself just for\ntroubleshooting purposes and\n\n1827\n01:35:44,392 --> 01:35:47,530\nyou can pick any of your DLCI numbers and\nmap it.\n\n1828\n01:35:47,530 --> 01:35:50,410\nBut unless you've mapped your own\nIP number to a DLCI you won't\n\n1829\n01:35:50,410 --> 01:35:51,032\nbe able to ping it.\n\n1830\n01:35:51,032 --> 01:35:54,220\nAll right, so I've got it mapped now.\n\n1831\n01:35:54,220 --> 01:35:55,250\nIt's happy.\n\n1832\n01:35:55,250 --> 01:35:59,300\nSee how I've got multiple DLCIs\nmapped to this one interface?\n\n1833\n01:35:59,300 --> 01:36:01,500\nThat gives me a lot of flexibility there.\n\n1834\n01:36:01,500 --> 01:36:03,500\nAnd now it's all tied up.\n\n1835\n01:36:03,500 --> 01:36:06,030\nNow I just need to go and\nconfigure my other end points.\n\n1836\n01:36:06,030 --> 01:36:07,230\n>> Yeah, and before we do this,\n\n1837\n01:36:07,230 --> 01:36:10,885\nlet's make sure we understand in terms\nof the syntax what we're seeing.\n\n1838\n01:36:10,885 --> 01:36:15,320\nFrame-relay map is actually\nthe key words for us.\n\n1839\n01:36:15,320 --> 01:36:18,100\nThe IP address is to the other router.\n\n1840\n01:36:18,100 --> 01:36:22,510\nSo we're actually mapping the IP\naddress of the other router\n\n1841\n01:36:22,510 --> 01:36:26,525\nto the DLCI number of our local interface.\n\n1842\n01:36:26,525 --> 01:36:28,865\nNow, this is actually key for us here.\n\n1843\n01:36:28,865 --> 01:36:32,635\nCuz if we get it backward, we're gonna\nbe in trouble in this configuration.\n\n1844\n01:36:32,635 --> 01:36:33,165\nYeah.\n\n1845\n01:36:33,165 --> 01:36:34,025\n>> It's not gonna work.\n\n1846\n01:36:34,025 --> 01:36:35,078\n>> No.\n[LAUGH]\n\n1847\n01:36:35,078 --> 01:36:36,140\n>> All right, so\n\n1848\n01:36:36,140 --> 01:36:38,345\nnow I'm gonna jump over to router two.\n\n1849\n01:36:38,345 --> 01:36:41,070\nNow I did router two on\na sub interface earlier.\n\n1850\n01:36:41,070 --> 01:36:42,910\nAnd I said that's kind of how I prefer it.\n\n1851\n01:36:42,910 --> 01:36:44,590\nI always like to do sub interfaces.\n\n1852\n01:36:44,590 --> 01:36:46,740\nBecause with sub interfaces\nyou can always add more later.\n\n1853\n01:36:46,740 --> 01:36:47,330\n>> Right.\n\n1854\n01:36:47,330 --> 01:36:50,370\n>> But if this is just going\nto be a single link and\n\n1855\n01:36:50,370 --> 01:36:54,600\nthat's it, we can configure\nit on the parent interface.\n\n1856\n01:36:54,600 --> 01:36:58,310\nSo I can get into interface serial 1/0.\n\n1857\n01:36:58,310 --> 01:37:01,230\nWe've already done the frame\nrelay encapsulation on this line.\n\n1858\n01:37:01,230 --> 01:37:07,840\nSo from here I could go on and start to\nspecify its DLCI information and all that.\n\n1859\n01:37:09,030 --> 01:37:11,420\nI guess for consistency's sake,\nI should probably go ahead and\n\n1860\n01:37:11,420 --> 01:37:15,340\njust configure the sub interface.\n\n1861\n01:37:15,340 --> 01:37:17,120\nWe'll keep it the same.\n\n1862\n01:37:17,120 --> 01:37:19,764\nSo I'll go ahead and\njust do sub interface one.\n\n1863\n01:37:19,764 --> 01:37:27,680\nPoint to,\nactually this one's multipoint also.\n\n1864\n01:37:27,680 --> 01:37:28,218\nThere we go.\nAnd so\n\n1865\n01:37:28,218 --> 01:37:30,690\nin here I'm going to say IP\naddress 192.168.0.2, all right.\n\n1866\n01:37:30,690 --> 01:37:37,140\nAnd now I'm going to go in and\n\n1867\n01:37:37,140 --> 01:37:39,940\nspecify the other nodes and\nhow I can get to them.\n\n1868\n01:37:39,940 --> 01:37:43,485\nSo I'm going to say IP address 192, sorry.\n\n1869\n01:37:43,485 --> 01:37:49,140\nFrame-relay, there we go,\nmap IP 192.160.0.1.\n\n1870\n01:37:49,140 --> 01:37:56,499\nThat one's gonna be available for\nme via DLCI number 201.\n\n1871\n01:37:57,680 --> 01:38:02,534\nAll right, and then router three is going\nto be available to me via DLCI 203.\n\n1872\n01:38:02,534 --> 01:38:03,310\nAll right.\n>> Now Don,\n\n1873\n01:38:03,310 --> 01:38:06,420\ndo I need to include\nthat broadcast statement?\n\n1874\n01:38:06,420 --> 01:38:07,560\n>> Oh shoot, I forgot.\n\n1875\n01:38:07,560 --> 01:38:08,544\nThank you, Ronnie.\n\n1876\n01:38:08,544 --> 01:38:09,710\n>> I just want to make sure.\n\n1877\n01:38:09,710 --> 01:38:12,450\n>> Yep, you gotta configure it on both\nends otherwise you get unidirectional\n\n1878\n01:38:12,450 --> 01:38:14,880\nbroadcast which it may not\nbe the end of the world, but\n\n1879\n01:38:14,880 --> 01:38:16,820\nit can wreak a few little problems.\n\n1880\n01:38:16,820 --> 01:38:20,797\nAnd again, just for\nconsistency here I'm going to go ahead and\n\n1881\n01:38:20,797 --> 01:38:22,760\nmap my own IP address to a DLCI.\n\n1882\n01:38:22,760 --> 01:38:24,040\nYou can pick any of your DLCIs.\n\n1883\n01:38:24,040 --> 01:38:26,960\nJust so that I'm able to ping it.\n\n1884\n01:38:26,960 --> 01:38:29,152\nPing it from myself,\nif you ever try and ping your own IP.\n\n1885\n01:38:29,152 --> 01:38:32,540\nAll right, so\nnow that I've got that set, and\n\n1886\n01:38:32,540 --> 01:38:35,250\nsee how I just reran those\nto add the broadcast flag?\n\n1887\n01:38:35,250 --> 01:38:35,930\nSame commands but\n\n1888\n01:38:35,930 --> 01:38:39,883\nwith broadcast added to them, I didn't\nhave to remove the first command to do it.\n\n1889\n01:38:39,883 --> 01:38:43,381\nAll right.\n\n1890\n01:38:43,381 --> 01:38:45,810\nSo let's take a look at\nthat in its finished state.\n\n1891\n01:38:47,030 --> 01:38:47,870\nHere we go.\n\n1892\n01:38:47,870 --> 01:38:52,665\nSo, it's finished state on\nthe parent interface, oops.\n\n1893\n01:38:52,665 --> 01:38:54,707\n>> [LAUGH]\n>> On the parent interface,\n\n1894\n01:38:54,707 --> 01:38:56,866\nwe did encapsulation frame-relay.\n\n1895\n01:38:56,866 --> 01:38:59,910\nWe did frame-relay lmitype ansi.\n\n1896\n01:38:59,910 --> 01:39:04,290\nAnd then on the sub interface,\nI created a multipoint sub interface.\n\n1897\n01:39:04,290 --> 01:39:07,230\nAssign my own IP and\nthen just set up my maps.\n\n1898\n01:39:07,230 --> 01:39:07,890\nRight?\nI map\n\n1899\n01:39:07,890 --> 01:39:12,180\nthe remote IPs to the DLCI\nnumbers they're tied to.\n\n1900\n01:39:12,180 --> 01:39:15,180\nAll right?\nNow, I can jump on over to\n\n1901\n01:39:15,180 --> 01:39:17,500\nrouter three and finish up.\n\n1902\n01:39:17,500 --> 01:39:20,391\nAnd we'll have a nice full\nmesh multipoint network.\n\n1903\n01:39:26,131 --> 01:39:29,110\nAll right, so my serial interface\nhas frame relay turned on.\n\n1904\n01:39:29,110 --> 01:39:32,641\nIt is not shut down, so\nI'm going to get into my sub interface\n\n1905\n01:39:38,560 --> 01:39:40,455\nI'll assign its IP.\n\n1906\n01:39:40,455 --> 01:39:41,910\nAll right.\n\n1907\n01:39:41,910 --> 01:39:47,920\nAnd, I'm gonna say frame-relay map ip and\n\n1908\n01:39:47,920 --> 01:39:53,281\nI'm gonna map that ip to DLCI 301 and\n\n1909\n01:39:53,281 --> 01:39:59,630\nI'll map .2 to 201 and I'll map myself.\n\n1910\n01:40:01,950 --> 01:40:04,800\nOh you know what?\nThat's actually the wrong, dadgummit.\n\n1911\n01:40:04,800 --> 01:40:11,030\nIt's supposed to be 302 so\nI do need to remove this one and fix that.\n\n1912\n01:40:11,030 --> 01:40:15,530\nPut the wrong DLCI number, you put\nthe wrong DLCI in, it's not gonna work.\n\n1913\n01:40:15,530 --> 01:40:17,200\nI've gotta get the right DLCI in there.\n\n1914\n01:40:17,200 --> 01:40:17,700\nThere we go.\n\n1915\n01:40:21,800 --> 01:40:26,250\nAll right so my final configuration\nhere if I look I've got the maps, right.\n\n1916\n01:40:26,250 --> 01:40:27,980\nI'm mapping .2 to 302.\n\n1917\n01:40:27,980 --> 01:40:29,740\nThe DLCI on this end.\n\n1918\n01:40:29,740 --> 01:40:34,820\nOne is mapped to .3 or to one DLCI 301 and\nthen I just map myself to 302.\n\n1919\n01:40:34,820 --> 01:40:35,560\nAll right.\n\n1920\n01:40:35,560 --> 01:40:40,800\nAt this point we have multi point\nlinks configured on each end\n\n1921\n01:40:40,800 --> 01:40:44,510\ngiving me the equivalent\nof a full mesh network.\n\n1922\n01:40:44,510 --> 01:40:48,050\nI've got three routers involved here,\nrouter 1, router 2, and router 3.\n\n1923\n01:40:48,050 --> 01:40:54,340\nBut thanks to my multi point interfaces,\nI've created what appears,\n\n1924\n01:40:54,340 --> 01:40:58,080\nif I can draw it here,\nappears to be a full mesh network.\n\n1925\n01:40:58,080 --> 01:41:01,490\nIt looks like I've got\ntwo links at each branch.\n\n1926\n01:41:01,490 --> 01:41:03,020\nBut in reality I don't.\n\n1927\n01:41:03,020 --> 01:41:08,970\nIn reality what I have is a single\nlink to the telco, right?\n\n1928\n01:41:08,970 --> 01:41:14,090\nSo the single link,\none physical line, and at the telco,\n\n1929\n01:41:14,090 --> 01:41:18,480\nthey have created,\nwhat a terrible color I just chose.\n\n1930\n01:41:18,480 --> 01:41:22,130\nThey've created this full\nmesh environment for me.\n\n1931\n01:41:22,130 --> 01:41:23,710\nIt's all done logically,\n\n1932\n01:41:23,710 --> 01:41:25,979\na lot less expensive than if I\ndid it with physical equipment.\n\n1933\n01:41:27,060 --> 01:41:28,840\nSo I can go back and I can test this.\n\n1934\n01:41:32,820 --> 01:41:37,580\nAll right, so there I can ping .1 and\nI can ping .2, right.\n\n1935\n01:41:37,580 --> 01:41:38,890\nThey're in the same network.\n\n1936\n01:41:38,890 --> 01:41:42,890\nI view it as one subnet but I've created\nthis cloud, right, with these dedicated\n\n1937\n01:41:42,890 --> 01:41:47,370\nlinks between it, and as I add more\nbranches I just bring in the new branch.\n\n1938\n01:41:47,370 --> 01:41:50,607\nYou've got to set it up for\nframe relay and then I have to go and\n\n1939\n01:41:50,607 --> 01:41:52,830\nadd a map statement to my other systems.\n\n1940\n01:41:52,830 --> 01:41:57,861\nNow you might have noticed in the config,\n\n1941\n01:41:57,861 --> 01:42:05,220\nthis one line in here no\nframe-relay inverse-arp, okay.\n\n1942\n01:42:05,220 --> 01:42:07,250\nFrame relay sports technology\ncalled inverse arp,\n\n1943\n01:42:07,250 --> 01:42:11,350\nwhich is reverse address resolution\nprotocol that allows us to discover\n\n1944\n01:42:11,350 --> 01:42:14,680\nthe people on the other ends of the DLCI\nlines, okay, the DLCI circuits.\n\n1945\n01:42:14,680 --> 01:42:17,580\nNow, that's really cool, it makes it\nwhere we don't have to do the maps.\n\n1946\n01:42:17,580 --> 01:42:20,440\nYou add a new branch, it's just\nautomatically discovered and that's it.\n\n1947\n01:42:20,440 --> 01:42:25,400\nBut most providers don't allow it because\nit's similar to requiring a broadcast.\n\n1948\n01:42:25,400 --> 01:42:28,920\nSo I've turned it off here to\nmimic what you see in real life.\n\n1949\n01:42:30,100 --> 01:42:32,970\nIn real life, most of the time you\nhave to do the map statements.\n\n1950\n01:42:32,970 --> 01:42:34,393\nRight?\nSo you just do them and\n\n1951\n01:42:34,393 --> 01:42:35,488\nyou get it done with.\n\n1952\n01:42:35,488 --> 01:42:37,870\nRight?\nBut if you happen to luck out and\n\n1953\n01:42:37,870 --> 01:42:41,620\nhave a provider that does support\nInverse ARP, it's turned on by default.\n\n1954\n01:42:41,620 --> 01:42:43,325\nYou may not even need to\nput in your map statements.\n\n1955\n01:42:43,325 --> 01:42:44,210\n>> Right.\n\n1956\n01:42:44,210 --> 01:42:45,065\n>> So pretty cool stuff.\n\n1957\n01:42:45,065 --> 01:42:47,020\n>> Yeah.\n>> All right, but\n\n1958\n01:42:47,020 --> 01:42:49,700\nat this point we now\nhave this mesh in place.\n\n1959\n01:42:49,700 --> 01:42:56,500\nAnd if I jump over to router 1, on router\n1 I can do a show frame-relay lmi, right?\n\n1960\n01:42:56,500 --> 01:42:59,000\nThat's showing the local telco's\nswitch that I'm talking to.\n\n1961\n01:42:59,000 --> 01:43:01,220\nI'm seeing lots of status\ninquiries sent and received.\n\n1962\n01:43:02,330 --> 01:43:08,130\nI can do a show frame-relay pvc and\nhere I can see my two circuits.\n\n1963\n01:43:08,130 --> 01:43:09,490\nThe 102 and the 103.\n\n1964\n01:43:09,490 --> 01:43:13,500\nThey're both local, status active,\nthey're up, the're running and\n\n1965\n01:43:13,500 --> 01:43:15,590\nI can see packets on them.\n\n1966\n01:43:15,590 --> 01:43:17,740\nAnd actually, that one shows it's empty.\n\n1967\n01:43:17,740 --> 01:43:19,250\nI guess I need to trigger some packets.\n\n1968\n01:43:23,960 --> 01:43:28,665\nThere we go,\nnow I should show packets on them.\n\n1969\n01:43:28,665 --> 01:43:29,198\nYep, there.\n\n1970\n01:43:29,198 --> 01:43:30,565\nInput, output, right.\n\n1971\n01:43:30,565 --> 01:43:33,141\nSo now I'm actually seeing\ntraffic over those lines.\n\n1972\n01:43:33,141 --> 01:43:38,409\nAnd I can do a show frame-relay map and\nI can see these active maps that we've\n\n1973\n01:43:38,409 --> 01:43:43,530\ngot in place and so we can see here\nwhere they've got status defined.\n\n1974\n01:43:43,530 --> 01:43:47,525\nThose are the ones that we manually put\nin and so then they map out here so\n\n1975\n01:43:47,525 --> 01:43:52,641\nI've got 0.1 is myself, 0.2 mapped\nout to 102 and 0.3 mapped out to 103.\n\n1976\n01:43:52,641 --> 01:43:53,641\n>> Excellent.\n\n1977\n01:43:53,641 --> 01:43:54,830\n>> All right.\n\n1978\n01:43:54,830 --> 01:43:57,710\nIt's a lot of commands, it's actually\nreally not that many commands.\n\n1979\n01:43:57,710 --> 01:43:59,240\nBut there's multiple ways to configure it.\n\n1980\n01:43:59,240 --> 01:44:01,590\nSo it seems like a lot of commands.\n\n1981\n01:44:01,590 --> 01:44:04,238\nIt is a super flexible technology.\n\n1982\n01:44:04,238 --> 01:44:09,308\nIt's slowly being replaced by MPLS, so\nit's definitely considered on its way out.\n\n1983\n01:44:11,517 --> 01:44:12,850\nAll right, so very cool stuff.\n\n1984\n01:44:12,850 --> 01:44:14,160\nAnd like I said, I'll go ahead and\n\n1985\n01:44:14,160 --> 01:44:17,170\nclean up these configs, and\npost them as show notes on the website, so\n\n1986\n01:44:17,170 --> 01:44:21,770\nyou can see the clean version of\nthe configs to get the set up.\n\n1987\n01:44:21,770 --> 01:44:24,600\nBut basically it's pretty straightforward.\n\n1988\n01:44:24,600 --> 01:44:26,100\nKey things to remember.\n\n1989\n01:44:26,100 --> 01:44:28,340\nYou're not connecting to the remote end.\n\n1990\n01:44:28,340 --> 01:44:31,420\nYou're connecting to the local\ntelephone company switch.\n\n1991\n01:44:31,420 --> 01:44:35,740\nSo your local DLCI is what\nconnects you to the remote system.\n\n1992\n01:44:35,740 --> 01:44:39,130\nIt's real easy to mix that up and\nuse the wrong circuit numbers.\n\n1993\n01:44:39,130 --> 01:44:41,580\nJust be aware of how that\nconnection is working.\n\n1994\n01:44:41,580 --> 01:44:44,010\n>> Yeah, also continue to\npractice these configurations.\n\n1995\n01:44:44,010 --> 01:44:45,400\nThey're gonna really help you,\n\n1996\n01:44:45,400 --> 01:44:50,160\nespecially on the exam itself when you\nstart actually seeing the syntax of them.\n\n1997\n01:44:50,160 --> 01:44:51,710\nVery key that you can remember these.\n\n1998\n01:44:51,710 --> 01:44:53,270\nMake sure you practice\nthose show commands.\n\n1999\n01:44:55,310 --> 01:44:58,410\n>> All right well,\nI think as far as our WAN technologies,\n\n2000\n01:44:58,410 --> 01:44:59,320\nthat pretty much wraps things up.\n\n2001\n01:44:59,320 --> 01:45:01,820\nI'm gonna pull up the objective list here\nand make sure we got through it all.\n\n2002\n01:45:01,820 --> 01:45:04,920\nI like this, implement and\ntroubleshoot PPPoE.\n\n2003\n01:45:04,920 --> 01:45:06,732\nWe definitely had to do that.\n\n2004\n01:45:06,732 --> 01:45:10,010\n>> [LAUGH]\n>> So we went through PPP, PPPoE.\n\n2005\n01:45:10,010 --> 01:45:11,250\nWe tackled HDLC,\n\n2006\n01:45:11,250 --> 01:45:15,900\nwhich is your basic connectivity,\nand we took a look at frame relay.\n\n2007\n01:45:15,900 --> 01:45:18,370\nFrame relay used to be\na big part of the exam.\n\n2008\n01:45:18,370 --> 01:45:21,440\nIn the new versions of the exam,\nit's a very small part, so\n\n2009\n01:45:21,440 --> 01:45:22,780\nbe aware of the configurations.\n\n2010\n01:45:22,780 --> 01:45:24,840\nDon't expect to get\nhammered on it too hard.\n\n2011\n01:45:24,840 --> 01:45:29,100\nMostly you're gonna be spotting\nconfiguration issues or whatever.\n\n2012\n01:45:29,100 --> 01:45:32,138\nBut it's pretty straightforward and\nit's good technology.\n\n2013\n01:45:32,138 --> 01:45:33,154\n>> Yep.\n\n2014\n01:45:33,154 --> 01:45:37,900\n>> All right, and\njust my standard advice for people,\n\n2015\n01:45:37,900 --> 01:45:40,240\nyou'll see I rattled out those commands.\n\n2016\n01:45:40,240 --> 01:45:45,030\nI have worked on literally hundreds\nof frame relay lines in my career,\n\n2017\n01:45:45,030 --> 01:45:47,190\nand I'm not exaggerating there.\n\n2018\n01:45:47,190 --> 01:45:50,380\nI can easily come up with\na list over a hundred.\n\n2019\n01:45:50,380 --> 01:45:53,190\nThe more you work with it,\nthe more you run those commands,\n\n2020\n01:45:53,190 --> 01:45:55,260\nthe more second nature they come to you,\nright?\n\n2021\n01:45:55,260 --> 01:45:58,280\nIf you're seeing these for\nthe first time, it's confusing.\n\n2022\n01:45:58,280 --> 01:45:59,460\n>> Yeah.\n>> It's a lot, right?\n\n2023\n01:45:59,460 --> 01:46:00,800\nSo practice makes perfect.\n\n2024\n01:46:00,800 --> 01:46:03,940\nIf you're not making use of some\nkind of simulation software already,\n\n2025\n01:46:03,940 --> 01:46:05,580\nyou probably should.\n\n2026\n01:46:05,580 --> 01:46:06,920\nThe Boson NetSim.\n\n2027\n01:46:06,920 --> 01:46:11,290\nThe Cisco Packet Tracer, GNS3, these\nare all programs that are out there on\n\n2028\n01:46:11,290 --> 01:46:13,910\nthe Internet that you can use\nthat will emulate Cisco routers.\n\n2029\n01:46:13,910 --> 01:46:14,760\n>> Right.\n>> And\n\n2030\n01:46:14,760 --> 01:46:16,490\ngive you a chance to build\na frame relay network.\n\n2031\n01:46:16,490 --> 01:46:19,700\nExperiment with it and have some fun.\n\n2032\n01:46:19,700 --> 01:46:22,520\nSo Ronnie,\nany other parting words of wisdom?\n\n2033\n01:46:22,520 --> 01:46:27,550\n>> Not really, I think again practice is\nthe key for your success on the exam.\n\n2034\n01:46:27,550 --> 01:46:29,140\nSo the more you practice\nthe better it's gonna be.\n\n2035\n01:46:30,220 --> 01:46:32,110\n>> All right, well ladies and\ngentlemen let's wrap it up here.\n\n2036\n01:46:32,110 --> 01:46:32,820\nAs always,\n\n2037\n01:46:32,820 --> 01:46:36,863\nremember if you have questions live during\nthe show you can go to itpro.tv/live.\n\n2038\n01:46:36,863 --> 01:46:38,910\nThe chat box is right beneath the video.\n\n2039\n01:46:38,910 --> 01:46:42,180\nYou can post your questions,\nwe monitor and answer during the show.\n\n2040\n01:46:42,180 --> 01:46:44,440\nAfter the show you can always\npost to the Q&A section.\n\n2041\n01:46:44,440 --> 01:46:48,340\n24 hours a day you can go to the Q&A and\npost a question.\n\n2042\n01:46:48,340 --> 01:46:50,890\nWe see it and answer,\nsometimes other viewers answer.\n\n2043\n01:46:50,890 --> 01:46:53,700\nSome really good answers from\nviewers out there right now.\n\n2044\n01:46:53,700 --> 01:46:56,060\nSo it's definitely\na resource available to you.\n\n2045\n01:46:56,060 --> 01:46:57,770\nMake use of it.\n\n2046\n01:46:57,770 --> 01:46:58,591\n>> That's right.\n>> All right.\n\n2047\n01:46:58,591 --> 01:47:01,490\nWell, signing out for IT Pro TV,\nI'm your host, Don Pezet.\n\n2048\n01:47:01,490 --> 01:47:02,370\n>> And I'm Ronnie Wong.\n\n2049\n01:47:02,370 --> 01:47:03,683\n>> And we'll see you next time.\n\n2050\n01:47:03,683 --> 01:47:13,683\n[MUSIC]\n\n",
          "vimeoId": "83598432"
        }
      ],
      "title": "WAN Technologies"
    }
  ],
  "url": "ccna-routing-switching",
  "vLab": false
}
