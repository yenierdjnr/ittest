{
  "description": "Those looking to complete the Cisco Certified Network Associate (CCNA) Security certification will find in this course an overview of the process in achieving the certification and details about the Implementing Cisco IOS Network Security (IINS) exam required to pass in order to receive the certification. CCNA Security addresses how to properly secure Cisco devices and security on Cisco routers and switches and is designed not just for IT professionals, but also for any kind of network administrator that supports Cisco equipment. The exam objectives cover a wide range of topics including common security threats, iOS ACLs, Cisco firewall technologies and others, which can provide foundational knowledge for achieving further related certifications like the CCNP.",
  "descriptionMD": "",
  "length": "60986",
  "name": "CCNA Security 640-554",
  "practiceExam": false,
  "subtitle": "Cisco Certified Network Associate Security",
  "tagUrl": "legacy",
  "topics": [
    {
      "episodes": [
        {
          "description": "The CCNA certification addresses security when it comes to dealing with Cisco devices and networks and to achieve it, one will first need to have already achieved the CCENT certification as a prerequisite. Viewers will hear an overview about the knowledge one needs to attain the CCNA certification, the Implementing Cisco IOS Network Security (IINS) exam that covers in-depth technical concepts and hear about the exam objectives for implementing Cisco IOS network security.",
          "length": "672",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/iins/ccnasecurity-0-0-overview.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/iins/ccnasecurity-0-0-overview-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/iins/ccnasecurity-0-0-overview-sm.jpg",
          "title": "Overview of CCNA Security",
          "transcript": "1\n00:00:00,000 --> 00:00:08,082\n[MUSIC]\n\n2\n00:00:08,082 --> 00:00:11,878\nThe CCNA Security certification\nis one of the specializations for\n\n3\n00:00:11,878 --> 00:00:15,220\nthe Cisco certified network associate.\n\n4\n00:00:15,220 --> 00:00:19,010\nThe CCA security specifically\naddresses well, security.\n\n5\n00:00:19,010 --> 00:00:22,220\nHow improperly secure our Cisco device is.\n\n6\n00:00:22,220 --> 00:00:25,730\nAnd it doesn't just focus on\nsecurity only devices right.\n\n7\n00:00:25,730 --> 00:00:27,100\nWhen we think of security,\n\n8\n00:00:27,100 --> 00:00:30,900\nin my mind I immediately think of\nCisco's adaptive security appliances.\n\n9\n00:00:30,900 --> 00:00:33,140\nThey're ASA firewalls, right?\n\n10\n00:00:33,140 --> 00:00:36,750\nAnd those are covered right\nhere on the CCNA Security, but\n\n11\n00:00:36,750 --> 00:00:41,240\nwe also take a look at security\non Cisco routers and switches.\n\n12\n00:00:41,240 --> 00:00:44,790\nYou've got to understand, that security\nis not applied at just one place.\n\n13\n00:00:44,790 --> 00:00:48,590\nCisco always recommends what's called\nthe defense in depth security procedure,\n\n14\n00:00:48,590 --> 00:00:52,730\nand that means that we've got a security\nimplemented all throughout our network.\n\n15\n00:00:52,730 --> 00:00:55,260\nYour routers and your switches\nactually make very attractive\n\n16\n00:00:55,260 --> 00:00:58,600\ntargets to attackers trying to\ncompromise your systems and so\n\n17\n00:00:58,600 --> 00:01:00,860\nwe've got to take proper\nsecurity measures there.\n\n18\n00:01:00,860 --> 00:01:03,570\nSo while there certainly is\na lot of work on firewalls,\n\n19\n00:01:03,570 --> 00:01:05,960\nthere's also work on routers and\nswitches too.\n\n20\n00:01:05,960 --> 00:01:10,140\nThe CCNA Security does a great\njob of addressing all of that.\n\n21\n00:01:10,140 --> 00:01:13,880\nNow, the CCNA Security is one of those\ncertifications that I think is pretty neat\n\n22\n00:01:13,880 --> 00:01:19,160\nbecause it's not catered to\njust IT security professionals.\n\n23\n00:01:19,160 --> 00:01:22,870\nIf you are any kind of network\nadministrator that supports Cisco\n\n24\n00:01:22,870 --> 00:01:27,500\nequipment, I think the CCNA Security\ncertification is a great one to pursue\n\n25\n00:01:27,500 --> 00:01:31,150\nbecause security is something\nthat everyone performs,\n\n26\n00:01:31,150 --> 00:01:33,070\nnot just the security IT officers.\n\n27\n00:01:33,070 --> 00:01:35,060\nIt's really something that everybody does.\n\n28\n00:01:35,060 --> 00:01:38,690\nSo we all play our part in having a basic\nunderstanding of what's available\n\n29\n00:01:38,690 --> 00:01:40,090\nis really important.\n\n30\n00:01:40,090 --> 00:01:44,150\nOne of the neat things that I usually hear\nfrom viewers that have watched the show\n\n31\n00:01:44,150 --> 00:01:48,390\nis they'll say, man, I never knew some\nof these features were there, and\n\n32\n00:01:48,390 --> 00:01:50,610\nthat's the sad part of all this.\n\n33\n00:01:50,610 --> 00:01:55,120\nCisco equipment has so many powerful\nsecurity features built into it, but\n\n34\n00:01:55,120 --> 00:01:59,550\nthey turn them off by default because\nthey don't know if people need them or\n\n35\n00:01:59,550 --> 00:02:00,960\nknow how to use them.\n\n36\n00:02:00,960 --> 00:02:03,850\nIf you improperly deploy some of the\nsecurity measures it can cause all sorts\n\n37\n00:02:03,850 --> 00:02:04,770\nof problems.\n\n38\n00:02:04,770 --> 00:02:09,240\nSo, these features are turned off when\nyou get a router out of the box or\n\n39\n00:02:09,240 --> 00:02:12,490\nget a firewall out of the box, and\nall you have to do is turn them on and\n\n40\n00:02:12,490 --> 00:02:16,040\nyou can increase the security on your\nnetwork very, very, very greatly and\n\n41\n00:02:16,040 --> 00:02:20,600\nyou can completely eliminate some of the\nvery common threats that are out there.\n\n42\n00:02:20,600 --> 00:02:23,190\nAnd things that companies\nstill fall victim to today.\n\n43\n00:02:23,190 --> 00:02:27,472\nSo, it's a great certification,\ncovers a lot of wonderful knowledge.\n\n44\n00:02:27,472 --> 00:02:31,630\nAll right, let's talk a little bit about\nthe exam, and what we need to understand.\n\n45\n00:02:31,630 --> 00:02:36,680\nThe CCNA itself is a mid tier\ncertification, it's above the CCENT,\n\n46\n00:02:36,680 --> 00:02:41,960\nbut not at the level of the Cisco\nCertified Network Professional, the CCNP.\n\n47\n00:02:41,960 --> 00:02:44,095\nBut, it is a specialization.\n\n48\n00:02:44,095 --> 00:02:48,070\nThere's the CCNA routing and switching\nthat a lot of people pursue that focuses\n\n49\n00:02:48,070 --> 00:02:50,850\non routers and switches,\nbut this one is security.\n\n50\n00:02:50,850 --> 00:02:54,185\nIt covers routers and switches also,\nbut not from the routing perspective.\n\n51\n00:02:54,185 --> 00:02:55,725\nFrom the security perspective.\n\n52\n00:02:56,835 --> 00:02:59,485\nThe certification does just have one exam.\n\n53\n00:02:59,485 --> 00:03:01,305\nBut that's a little bit misleading,\n\n54\n00:03:01,305 --> 00:03:06,865\nbecause you actually have to have\nthe CCENT certification first.\n\n55\n00:03:06,865 --> 00:03:10,085\nYou need to have the CCENT\nbefore you can move on and\n\n56\n00:03:10,085 --> 00:03:12,830\nget the CCNA security certification.\n\n57\n00:03:12,830 --> 00:03:17,020\nSo first you'll have to do\n100-101 exam to get your CCENT.\n\n58\n00:03:17,020 --> 00:03:23,340\nThen you can do the 640-554 IINS exam.\n\n59\n00:03:23,340 --> 00:03:28,040\nIINS somewhat cryptically stands for\nImplementing Cisco IOS Network Security.\n\n60\n00:03:28,040 --> 00:03:31,810\nAnd in the earlier days in some of\nthe older versions of the certification,\n\n61\n00:03:31,810 --> 00:03:37,840\nit focused just on the IOS, so\nyou had Cisco routers and switches.\n\n62\n00:03:37,840 --> 00:03:42,440\nBut in the newer versions like\nthe 640-554, it goes beyond IOS and\n\n63\n00:03:42,440 --> 00:03:44,550\ncovers the ASA's also.\n\n64\n00:03:44,550 --> 00:03:47,370\nSo you do have Cisco firewall\nconfigurations to be found in there too.\n\n65\n00:03:48,500 --> 00:03:50,500\nIt's all great knowledge to have, and\n\n66\n00:03:50,500 --> 00:03:54,920\ndefinitely something useful for really\nanybody who works for Cisco equipment.\n\n67\n00:03:56,000 --> 00:03:58,250\nNow the exam itself, it's 90 minutes, so\n\n68\n00:03:58,250 --> 00:04:02,150\nyou have a little bit more time\nthan most of the Cisco exams.\n\n69\n00:04:02,150 --> 00:04:04,265\nAnd it's 55 to 65 questions.\n\n70\n00:04:04,265 --> 00:04:06,680\nThat's about three minutes per question.\n\n71\n00:04:06,680 --> 00:04:08,150\nSorry, it's about two\nminutes per question.\n\n72\n00:04:08,150 --> 00:04:08,920\nThere we go.\n\n73\n00:04:08,920 --> 00:04:11,190\nWhich is a decent amount of time.\n\n74\n00:04:11,190 --> 00:04:15,230\nThere are some simulation questions on\nthe exam, but it's not as heavy as some of\n\n75\n00:04:15,230 --> 00:04:19,110\nthe others and you'll have some\ngraphical simulation questions because\n\n76\n00:04:19,110 --> 00:04:23,150\nthe Cisco ASA's are administered\nwith a Graphical User Interface.\n\n77\n00:04:23,150 --> 00:04:24,910\nThey can be done with a command line.\n\n78\n00:04:24,910 --> 00:04:27,100\nBut Cisco doesn't expect you\nto use that on the exam.\n\n79\n00:04:28,240 --> 00:04:30,270\nThe exam is proctored through Pierson Vue.\n\n80\n00:04:30,270 --> 00:04:33,630\nSo when you're ready to take it,\nyou go to the Pierson Vue website.\n\n81\n00:04:33,630 --> 00:04:36,800\nIt's www.piersonvue.com, and\n\n82\n00:04:36,800 --> 00:04:42,199\nremember Vue is spelled Vue,\nso piersonvue.com/cisco.\n\n83\n00:04:42,199 --> 00:04:45,920\nOn that page, you'll be able to\nfind a testing center near you, so\n\n84\n00:04:45,920 --> 00:04:48,200\nit's usually a convenient location nearby.\n\n85\n00:04:48,200 --> 00:04:51,500\nThey have offices all over the world, so\nit doesn't even matter what country you're\n\n86\n00:04:51,500 --> 00:04:54,300\nin, you can usually find one within\na reasonable driving distance.\n\n87\n00:04:55,360 --> 00:04:58,620\nYou can schedule you're exam with them,\npay them to take the exam.\n\n88\n00:04:58,620 --> 00:04:59,890\nAnd then you go and take it.\n\n89\n00:04:59,890 --> 00:05:04,160\nAnd when you pass you'll receive\nyour CCNA Security Designation.\n\n90\n00:05:04,160 --> 00:05:07,330\nNow, you'll find out immediately\nupon completing the exam whether you\n\n91\n00:05:07,330 --> 00:05:08,560\npass or fail.\n\n92\n00:05:08,560 --> 00:05:11,170\nIf you pass, great,\nyou get your certification.\n\n93\n00:05:11,170 --> 00:05:14,200\nYou'll get a certificate in\nthe mail a few weeks later.\n\n94\n00:05:14,200 --> 00:05:17,280\nIf you don't pass the first time,\nyou can retake it.\n\n95\n00:05:17,280 --> 00:05:19,550\nIt's not just a one shot attempt thing.\n\n96\n00:05:19,550 --> 00:05:20,780\nYou can always retake it again.\n\n97\n00:05:20,780 --> 00:05:23,970\nThey just ask that you wait five\ncalendar days before taking it again.\n\n98\n00:05:23,970 --> 00:05:26,460\nSo they create a bit of\na delay between retakes.\n\n99\n00:05:26,460 --> 00:05:31,650\nAll right, the exam objectives\ncover a wide range of topics.\n\n100\n00:05:31,650 --> 00:05:35,310\nAnd if you've compared these to\nother certification exams from Cisco\n\n101\n00:05:35,310 --> 00:05:36,990\nthere's a lot more areas here.\n\n102\n00:05:36,990 --> 00:05:40,530\nSo, it really is a smorgasboard of topics\n\n103\n00:05:40,530 --> 00:05:42,590\nkind of spread across all\nthe different equipment.\n\n104\n00:05:42,590 --> 00:05:43,670\nLet's look at those objectives here.\n\n105\n00:05:45,210 --> 00:05:48,960\nAll right, so\nwe start off with common security threats.\n\n106\n00:05:48,960 --> 00:05:50,670\nThis isn't really unique to Cisco,\n\n107\n00:05:50,670 --> 00:05:53,910\nthese are just the primary security\nthreats that are out there.\n\n108\n00:05:53,910 --> 00:05:55,540\nIf you're gonna protect your network,\n\n109\n00:05:55,540 --> 00:05:57,570\nyou'd need to know what\nyou're protecting it from.\n\n110\n00:05:57,570 --> 00:06:00,110\nAnd so we'll talk about some of the\ndifferent things that are out there that\n\n111\n00:06:00,110 --> 00:06:02,370\npeople can use to try and\ngain access to your systems.\n\n112\n00:06:03,390 --> 00:06:06,070\nThen we'll start looking\nat how to fix that.\n\n113\n00:06:06,070 --> 00:06:09,150\nSo the first section is really\nkind of like a scare section,\n\n114\n00:06:09,150 --> 00:06:11,000\nget you all worried\nabout what's out there.\n\n115\n00:06:11,000 --> 00:06:14,370\nAnd then all of the other modules\ntalk about how we can prevent that\n\n116\n00:06:14,370 --> 00:06:15,550\nfrom happening.\n\n117\n00:06:15,550 --> 00:06:17,990\nIn 2.0 we look at Cisco routers.\n\n118\n00:06:17,990 --> 00:06:21,520\nYour Cisco iOS routers have a lot of\nsecurity functionality in there that you\n\n119\n00:06:21,520 --> 00:06:23,790\ncan configure and\nenable to protect your network.\n\n120\n00:06:23,790 --> 00:06:25,800\nSo we'll see what they can do.\n\n121\n00:06:25,800 --> 00:06:26,630\nTriple A.\n\n122\n00:06:26,630 --> 00:06:30,210\nThat's authentication,\nauthorization, and accounting.\n\n123\n00:06:30,210 --> 00:06:33,980\nThat's how we can provide user\nauthentication on our routers, switches,\n\n124\n00:06:33,980 --> 00:06:36,590\nfirewalls, VPN for remote access.\n\n125\n00:06:36,590 --> 00:06:39,360\nSo that everybody can have their\nown individual user accounts,\n\n126\n00:06:39,360 --> 00:06:40,750\ninstead of sharing them.\n\n127\n00:06:40,750 --> 00:06:42,180\nWe authenticate them.\n\n128\n00:06:42,180 --> 00:06:44,670\nWe authorize them,\nfigure out what they're allowed to do.\n\n129\n00:06:44,670 --> 00:06:47,420\nAnd then we do accounting we\nrecord what they've done.\n\n130\n00:06:47,420 --> 00:06:48,250\nWe keep a record.\n\n131\n00:06:49,420 --> 00:06:52,500\nThen we move into access control lists or\nACLs.\n\n132\n00:06:52,500 --> 00:06:55,060\nNow if you've already got\nyour CCNA routing and\n\n133\n00:06:55,060 --> 00:06:58,240\nswitching certification you probably\nlearned ACL's for routers already, so\n\n134\n00:06:58,240 --> 00:07:03,040\nthere's some overlap there, but\nwe also focus on ACLs on Cisco ASAs.\n\n135\n00:07:03,040 --> 00:07:07,000\nAnd the access control lists are a little\nbit different on the ASAs because they're\n\n136\n00:07:07,000 --> 00:07:10,260\nstateful firewalls, they behave\na little different than routers, so\n\n137\n00:07:10,260 --> 00:07:12,650\nit's a good chance to see how they work,\nand how to configure them.\n\n138\n00:07:13,790 --> 00:07:17,580\nThen we go into secure network\nmanagement and reporting.\n\n139\n00:07:17,580 --> 00:07:20,540\nWe need to be able to\nevaluate our systems and\n\n140\n00:07:20,540 --> 00:07:23,560\ndetermine when a compromise has\nhappened or determine when there's\n\n141\n00:07:23,560 --> 00:07:26,600\nunauthorized activity on the network so\nyou can take action to prevent it.\n\n142\n00:07:28,140 --> 00:07:31,730\nNow up here we looked at common security\nthreats to the network as a whole, but\n\n143\n00:07:31,730 --> 00:07:36,090\nin objective six we look at take a look\nat layer two attacks specifically.\n\n144\n00:07:36,090 --> 00:07:39,000\nA lot of people neglect\nto secure their switches.\n\n145\n00:07:39,000 --> 00:07:42,600\nAnd switches can be very vulnerable\nto certain types of attacks, and\n\n146\n00:07:42,600 --> 00:07:44,370\nare pretty easy to pull off.\n\n147\n00:07:44,370 --> 00:07:47,820\nCisco switches have built in\nmechanisms that protect from those, but\n\n148\n00:07:47,820 --> 00:07:50,380\nthe majority of them are turned\noff out of the box, so\n\n149\n00:07:50,380 --> 00:07:52,460\nwe've got to get those configured and\nenabled.\n\n150\n00:07:52,460 --> 00:07:55,860\nBut we need to understand how they\nwork before we turn them on, and\n\n151\n00:07:55,860 --> 00:07:57,420\nthat's what that section is all about.\n\n152\n00:07:58,490 --> 00:08:01,110\nModule seven is all about\nCisco Firewall Technologies.\n\n153\n00:08:01,110 --> 00:08:04,290\nThe Cisco adaptive security appliances or\nASAs.\n\n154\n00:08:04,290 --> 00:08:07,920\nIf you've never worked with an ASA,\nthis will be your introduction.\n\n155\n00:08:07,920 --> 00:08:10,740\nYou'll get a chance to see what an ASA is,\nthe different models,\n\n156\n00:08:10,740 --> 00:08:13,860\nhow they work,\nthe user interface for the ASAs and\n\n157\n00:08:13,860 --> 00:08:16,990\nthat introduction to\ndeploying them on a network.\n\n158\n00:08:16,990 --> 00:08:20,240\nNow it is a fairly simple\nASA configuration here.\n\n159\n00:08:20,240 --> 00:08:23,900\nFor those of you that go on to do\nthe CCNP security, the higher level,\n\n160\n00:08:23,900 --> 00:08:28,210\nthere is a dedicated certification\nexam just to the ASA's,\n\n161\n00:08:28,210 --> 00:08:29,870\nvery focused and goes very in depth.\n\n162\n00:08:31,020 --> 00:08:34,900\nThe same thing goes for CISCO IPS or\nIntrusion Prevention Systems.\n\n163\n00:08:34,900 --> 00:08:38,530\nWith Cisco IPS we learn about some of the\ndifferent ways that they're available as\n\n164\n00:08:38,530 --> 00:08:43,620\ndedicated appliances like the 4200 Series\nand we look at the embedded appliances,\n\n165\n00:08:43,620 --> 00:08:47,200\nthe ones that go inside of the big\nCisco switches or inside of the ASAs.\n\n166\n00:08:47,200 --> 00:08:49,150\nWe get a chance to see how they work, but\n\n167\n00:08:49,150 --> 00:08:53,020\njust like the ASAs up here,\nit is a fairly cursory overview.\n\n168\n00:08:53,020 --> 00:08:54,940\nWe get a chance to see\nhow the IPSs work and\n\n169\n00:08:54,940 --> 00:08:59,370\nwhat they do, But for those of you\nthat go onto the CCNP security level,\n\n170\n00:08:59,370 --> 00:09:02,050\nthere's a dedicated exam just for\nthe IPS's.\n\n171\n00:09:02,050 --> 00:09:04,230\nIt goes very in depth and very thorough.\n\n172\n00:09:05,750 --> 00:09:10,040\nAnd then lastly in module nine\nwe tackle VPN technologies.\n\n173\n00:09:10,040 --> 00:09:14,530\nIn that final objective we're looking\nat the different types of virtual\n\n174\n00:09:14,530 --> 00:09:18,380\nprivate networks that we can build,\nthe security ramifications for each,\n\n175\n00:09:18,380 --> 00:09:20,260\nwhich ones are better in which scenarios.\n\n176\n00:09:20,260 --> 00:09:24,100\nAnd how to configure them,\neither between Cisco IOS routers or\n\n177\n00:09:24,100 --> 00:09:28,810\nbetween Cisco ASAs, and how we choose\nwhich of those is even appropriate.\n\n178\n00:09:28,810 --> 00:09:30,760\nSo we get a good primer on that.\n\n179\n00:09:30,760 --> 00:09:34,465\nI know we talk about VPNs in some of\nthe other certifications, but in the Cisco\n\n180\n00:09:34,465 --> 00:09:38,341\nkind of certification path, this is really\nthe first time that we get in there and\n\n181\n00:09:38,341 --> 00:09:41,970\nconfigure them and\nactually work with the VPN tunnels.\n\n182\n00:09:41,970 --> 00:09:45,070\nNow, all of this is great\nknowledge to have for\n\n183\n00:09:45,070 --> 00:09:47,280\nanybody who works with Cisco equipment.\n\n184\n00:09:47,280 --> 00:09:50,050\nRegardless of whether you're\na security tech or not.\n\n185\n00:09:50,050 --> 00:09:53,190\nI find this as a really\nrewarding certification.\n\n186\n00:09:53,190 --> 00:09:58,110\nAnd the exam Is actually not that bad,\ncompared to some of the other Cisco exams.\n\n187\n00:09:58,110 --> 00:10:00,610\nI don't wanna say it's easy,\ncuz none of them are easy.\n\n188\n00:10:00,610 --> 00:10:03,270\nBut this one's a little bit\nless challenging because\n\n189\n00:10:03,270 --> 00:10:06,770\nthe topics have a bit of\noverlap with the CCNA,\n\n190\n00:10:06,770 --> 00:10:09,010\nif you've already done the routing and\nswitching side.\n\n191\n00:10:09,010 --> 00:10:10,980\nAnd some of it's common sense.\n\n192\n00:10:10,980 --> 00:10:12,490\nSo you just need to know the technologies,\n\n193\n00:10:12,490 --> 00:10:14,380\nand you're able to deploy\nthem pretty straightforward.\n\n194\n00:10:14,380 --> 00:10:18,300\nSo it's a good examination, and\none that a lot of people do enjoy.\n\n195\n00:10:19,542 --> 00:10:23,680\nAll right, so, that's basically\nwhat the CCNA security is,\n\n196\n00:10:23,680 --> 00:10:25,750\nand that's pretty much that.\n\n197\n00:10:25,750 --> 00:10:29,880\nSo, if that sounds like something you\nwant to learn, those are the topics that\n\n198\n00:10:29,880 --> 00:10:31,890\nyou're interested in,\nthen you're in the right place.\n\n199\n00:10:31,890 --> 00:10:34,500\nStay tuned,\nwe're going to be jumping into that next.\n\n200\n00:10:34,500 --> 00:10:36,740\nIf that doesn't sound right for\nyou, if you were looking for\n\n201\n00:10:36,740 --> 00:10:39,770\nsomething specifically for ASAs or IPSs or\n\n202\n00:10:39,770 --> 00:10:43,420\nwhatever then you may need to check\nout some of the other certifications.\n\n203\n00:10:43,420 --> 00:10:45,360\nCheck the ITProTV library, right?\n\n204\n00:10:45,360 --> 00:10:48,090\nAll the certifications we cover\nare part of your subscription.\n\n205\n00:10:48,090 --> 00:10:49,440\nWe don't charge per cert.\n\n206\n00:10:49,440 --> 00:10:52,530\nSo you can jump over and\ncheck those out if we have them.\n\n207\n00:10:52,530 --> 00:10:54,570\nIf we don't,\nyou might be needing to look for\n\n208\n00:10:54,570 --> 00:10:57,720\nsome of the more official training\nthat's out there from Cisco.\n\n209\n00:10:57,720 --> 00:10:59,210\nTake advantage of whatever's\navailable to you.\n\n210\n00:10:59,210 --> 00:11:02,207\nThere's a ton of opportunities out there,\nbut for\n\n211\n00:11:02,207 --> 00:11:06,332\nthose of you looking to do CCNA security,\nwell, let's get started.\n\n212\n00:11:06,332 --> 00:11:12,474\n[MUSIC]\n\n",
          "vimeoId": "112933597"
        }
      ],
      "title": "Overview of CCNA Security (640-554)"
    },
    {
      "episodes": [
        {
          "description": "The area of security, especially in networking is a huge area and is always in demand. Viewers will hear a breakdown of the Cisco IINS exam objectives and cover common security threats for networks.",
          "length": "5520",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/iins/001-Common-Security-Threats.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/iins/001-Common-Security-Threats-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/iins/001-Common-Security-Threats-sm.jpg",
          "title": "Common Security Threats",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:34,336 --> 00:00:36,777\nAll right good morning,\ngood afternoon, and good evening and\n\n3\n00:00:36,777 --> 00:00:38,541\nwelcome back to another\nepisode of ITProTV.\n\n4\n00:00:38,541 --> 00:00:42,160\nI'm your host Don Pezet today with Mr.\nRonnie Wong, how's it going Ronnie?\n\n5\n00:00:42,160 --> 00:00:44,470\n>> It is going very well, today.\n\n6\n00:00:44,470 --> 00:00:50,570\nI heard that Obama said there is\nunscientific proof, or it's unscientific\n\n7\n00:00:50,570 --> 00:00:55,445\nto prohibit the smoking of marijuana,\nso we're doing good.\n\n8\n00:00:55,445 --> 00:00:58,470\n[LAUGH]\nRonnie, now,\n\n9\n00:00:58,470 --> 00:01:01,990\nis there something we should know here?\n\n10\n00:01:03,620 --> 00:01:04,350\n>> No.\n\n11\n00:01:04,350 --> 00:01:07,905\n>> Are you a closet wake and\nbaker and we didn't even know it?\n\n12\n00:01:07,905 --> 00:01:11,180\nNot yet, [LAUGH] let's put it that way.\n\n13\n00:01:11,180 --> 00:01:14,690\n>> I thought you were going in a\ncompletely different direction with that.\n\n14\n00:01:14,690 --> 00:01:16,560\n>> I know.\n>> Cuz Obama also said over\n\n15\n00:01:16,560 --> 00:01:20,320\nthe weekend that the NSA has not abused\nany of the information they've gathered.\n\n16\n00:01:20,320 --> 00:01:22,050\nWhich I think we all\nknow is completely false.\n\n17\n00:01:22,050 --> 00:01:24,782\n>> More than likely it actually\nkinda merges together.\n\n18\n00:01:24,782 --> 00:01:26,081\n>> [LAUGH] Maybe that's it,\nmaybe that's the secret!\n\n19\n00:01:26,081 --> 00:01:28,972\n>> [LAUGH]\n>> The NSA is already using pot.\n\n20\n00:01:28,972 --> 00:01:34,150\n[LAUGH] All right well,\nyou know on the subject of the NSA,\n\n21\n00:01:34,150 --> 00:01:37,292\nwe do have a great security\nfocused episode lined up today.\n\n22\n00:01:37,292 --> 00:01:40,790\n>> That's right.\n>> We are launching the Cisco IINS\n\n23\n00:01:40,790 --> 00:01:41,620\ncertification show.\n\n24\n00:01:41,620 --> 00:01:47,020\nSo IINS, if you're not familiar with it is\nimplementing Cisco IOS network security.\n\n25\n00:01:47,020 --> 00:01:50,200\nAnd I I know I throw the extra Cisco\nin there, but that's what Cisco does.\n\n26\n00:01:50,200 --> 00:01:53,470\nAnd they don't call it ICINS,\nthey just call it IINS.\n\n27\n00:01:53,470 --> 00:01:54,560\n>> Yep.\n>> Eh, whatever.\n\n28\n00:01:54,560 --> 00:01:58,330\nAnyhow it's\nImplementing IOS Network Security, and\n\n29\n00:01:58,330 --> 00:02:02,440\nIOS is the operating system that\nruns on Cisco routers and switches.\n\n30\n00:02:03,712 --> 00:02:08,630\n>> You know, this is, usually,\nyou've earned your CCNA, and\n\n31\n00:02:08,630 --> 00:02:11,060\nyou decide to go onto\nspecialization areas, and\n\n32\n00:02:11,060 --> 00:02:14,840\nthis is one of the more popular ones that\nwe have, because the area of security for\n\n33\n00:02:14,840 --> 00:02:19,660\nus, especially in networking,\nis a huge area and is always in demand.\n\n34\n00:02:19,660 --> 00:02:22,990\nMore and more things are going on and we\nactually have to have people that know how\n\n35\n00:02:22,990 --> 00:02:27,470\nto configure routers and switches securely\nand that's what we're gonna be doing.\n\n36\n00:02:27,470 --> 00:02:30,770\n>> Now Ronnie, did you know that you\ndon't have to have your CCNA anymore?\n\n37\n00:02:30,770 --> 00:02:32,401\n>> I did not know that, on a single one?\n\n38\n00:02:32,401 --> 00:02:33,370\n>> They changed it, yeah.\n\n39\n00:02:33,370 --> 00:02:34,200\n>> Okay, well there you go.\n\n40\n00:02:34,200 --> 00:02:36,410\n>> So\nthe way it works now is kind of bizarre.\n\n41\n00:02:36,410 --> 00:02:40,960\nSo for the longest time, and\nthis was up until maybe four months ago,\n\n42\n00:02:40,960 --> 00:02:46,040\nthat the way it was lined up was\nyou had to get your CCNA first,\n\n43\n00:02:46,040 --> 00:02:47,530\nyour Cisco Certified Network Associate.\n\n44\n00:02:47,530 --> 00:02:50,880\nThat meant you had to do two exams,\nget your CCNA and\n\n45\n00:02:50,880 --> 00:02:52,670\nthen you could pick a specialization.\n\n46\n00:02:52,670 --> 00:02:56,830\nAnd you had security,\nwhich is what IINS lines up with.\n\n47\n00:02:56,830 --> 00:03:02,640\nYou had voice, which was what one's\nIUWNE or some crazy name like that, and\n\n48\n00:03:02,640 --> 00:03:07,320\nthen you had wireless and I think wireless\nwas IUWNE and anyhow, it doesn't matter.\n\n49\n00:03:07,320 --> 00:03:09,490\nSo anyhow,\nthose are the three specializations.\n\n50\n00:03:09,490 --> 00:03:14,020\nWell, they've changed it now, so all you\nhave to do is get your CCENT, right,\n\n51\n00:03:14,020 --> 00:03:17,710\nyou get your CCENT, that first exam.\n\n52\n00:03:17,710 --> 00:03:20,030\nJust 100-101, I think?\n\n53\n00:03:20,030 --> 00:03:22,840\n>> Yes.\n>> And so you do that first exam and\n\n54\n00:03:22,840 --> 00:03:27,280\nthen you can pick a specialization and\nthey change the old CCNA exam.\n\n55\n00:03:27,280 --> 00:03:31,320\nSo it's not just called CCNA anymore, now\nit's called CCNA Routing and Switching.\n\n56\n00:03:31,320 --> 00:03:35,070\nRouting and switching is effectively your\nspecialization when you go that way.\n\n57\n00:03:35,070 --> 00:03:39,440\nHere we can get our CCENT and\ngo right into CCNA security\n\n58\n00:03:39,440 --> 00:03:42,090\nwithout actually having to go\nthe routing and switching at all.\n\n59\n00:03:42,090 --> 00:03:46,030\nSo it's a little change they made,\nit's neat because some people don't\n\n60\n00:03:46,030 --> 00:03:48,450\ncare about routers and switches, and\nthey don't wanna deal with them.\n\n61\n00:03:48,450 --> 00:03:50,760\nThey wanna go straight into security,\nor straight into wireless, or\n\n62\n00:03:50,760 --> 00:03:52,970\nstraight into voice, and\nnow they can do that.\n\n63\n00:03:52,970 --> 00:03:57,050\n>> So, it makes a very specialized\ncertification for us, and\n\n64\n00:03:57,050 --> 00:04:00,720\nso again, high demand for\nthis particular area.\n\n65\n00:04:00,720 --> 00:04:04,100\nSo this is a good way for\nus to continue on in our track here for\n\n66\n00:04:04,100 --> 00:04:07,780\nus and\ngo on further into the future as well.\n\n67\n00:04:07,780 --> 00:04:10,860\nNow, what we want to begin with though\nis we don't want to just jump right into\n\n68\n00:04:10,860 --> 00:04:12,080\nthe topic, right?\n\n69\n00:04:12,080 --> 00:04:15,750\nWe want to go ahead and\nmake sure that we cover a very\n\n70\n00:04:15,750 --> 00:04:19,960\ngeneralized overview of the outline of\nthe exam before we dive into a topic.\n\n71\n00:04:21,070 --> 00:04:24,180\n>> Yeah, and one of the things\nyou'll notice as we go through here\n\n72\n00:04:24,180 --> 00:04:26,720\nis that the security topics\nthat we're gonna cover\n\n73\n00:04:26,720 --> 00:04:31,060\nthroughout this show are really built\naround Cisco routers, all right.\n\n74\n00:04:31,060 --> 00:04:33,187\nWhen we say Cisco Security,\nI know my mind,\n\n75\n00:04:33,187 --> 00:04:37,040\nthe first thing I jump to is the Cisco\nASAs, the Adaptive Security Appliances,\n\n76\n00:04:37,040 --> 00:04:38,837\nthose are the firewalls from Cisco.\n\n77\n00:04:38,837 --> 00:04:43,960\nAnd they range from the really small, like\nASA 505s, all the way up to the big ones.\n\n78\n00:04:43,960 --> 00:04:45,630\nWhat are the big ones, the 5550?\n\n79\n00:04:45,630 --> 00:04:47,105\n>> 5580, something like that, yeah.\n\n80\n00:04:47,105 --> 00:04:47,878\n>> Oh 5580's that's right.\n\n81\n00:04:47,878 --> 00:04:51,330\nSo you got some big ones\nthat are out there.\n\n82\n00:04:51,330 --> 00:04:55,240\nThey all run the same little OS and\nthey work the same way, and\n\n83\n00:04:55,240 --> 00:05:01,030\nthose are covered in specific\ncertifications built around the ASA.\n\n84\n00:05:01,030 --> 00:05:04,370\nFor this certification exam, for\nthe IINS certification exam,\n\n85\n00:05:04,370 --> 00:05:08,380\nit's almost entirely built around\napplying security on routers.\n\n86\n00:05:08,380 --> 00:05:13,200\nThat's why it's called IOS Network\nSecurity and not ASA Network Security.\n\n87\n00:05:13,200 --> 00:05:15,260\nSo it's stuff that we can\napply on the routers.\n\n88\n00:05:15,260 --> 00:05:17,640\nSo, as we go through the objectives,\n\n89\n00:05:17,640 --> 00:05:21,490\nthere's really only one section\nthat even mentions the ASAs.\n\n90\n00:05:21,490 --> 00:05:25,939\nAnd so we will kind of whet our whistles\na little bit on just the most basic of set\n\n91\n00:05:25,939 --> 00:05:27,170\nup on an ASA.\n\n92\n00:05:27,170 --> 00:05:30,680\nFor those of you that are interested\nin learning more about Cisco firewalls,\n\n93\n00:05:30,680 --> 00:05:33,500\nthere's actually a whole\nseparate certification called?\n\n94\n00:05:33,500 --> 00:05:34,630\n>> Firewall.\n>> It's called firewall yeah,\n\n95\n00:05:34,630 --> 00:05:35,900\nit's kind of appropriate.\n\n96\n00:05:35,900 --> 00:05:39,432\nAnd it is entirely built around the ASAs.\n\n97\n00:05:39,432 --> 00:05:42,800\n>> Mm-hm, yeah so let's go ahead and take\na look at some of the different topics\n\n98\n00:05:42,800 --> 00:05:46,320\nthat we'll be covering and so Don will\nhopefully share out the screen here.\n\n99\n00:05:46,320 --> 00:05:48,580\n>> Yeah, you know let me\nbring this up on my machine.\n\n100\n00:05:48,580 --> 00:05:51,980\nSo basically we start out with\nwhat we're gonna do today,\n\n101\n00:05:51,980 --> 00:05:54,330\nright, 1.0 common security threats.\n\n102\n00:05:54,330 --> 00:05:58,460\nThese are just the general risks and\nthreats and\n\n103\n00:05:58,460 --> 00:06:01,720\nthings like that, that we have to\nprotect our network for, right.\n\n104\n00:06:01,720 --> 00:06:05,240\nAll the other modules are telling\nus how to protect our network,\n\n105\n00:06:05,240 --> 00:06:08,080\nthis one is what we need to\nprotect our network from.\n\n106\n00:06:08,080 --> 00:06:10,790\n>> Yeah, and so this really does help us.\n\n107\n00:06:10,790 --> 00:06:15,300\nAgain if you've already sat\nthrough the CompTIA Security+,\n\n108\n00:06:15,300 --> 00:06:20,820\nand you've done a little bit of Network+\nand A+ and our shows that we've had,\n\n109\n00:06:20,820 --> 00:06:23,802\nwe're covering the same material but\nthis time from a Cisco perspective.\n\n110\n00:06:23,802 --> 00:06:27,610\nAnd it's really good for us as we get into\nit cuz you'll learn the Cisco terminology\n\n111\n00:06:27,610 --> 00:06:28,730\nin identifying this stuff.\n\n112\n00:06:28,730 --> 00:06:32,172\nSo make sure you pay attention to again,\n\n113\n00:06:32,172 --> 00:06:34,775\nfairly familiar with those concepts and\ntopics.\n\n114\n00:06:34,775 --> 00:06:36,845\nWe'll, again approach it from\nthe Cisco point of view.\n\n115\n00:06:37,875 --> 00:06:40,245\n>> And that's exactly what happens in 2.0,\nright?\n\n116\n00:06:40,245 --> 00:06:42,795\nSo, in 2.0, security and\nCisco routers, right.\n\n117\n00:06:42,795 --> 00:06:47,058\nSo we're gonna start taking a look at some\nof the initial things we do to secure\n\n118\n00:06:47,058 --> 00:06:48,270\nthe router itself.\n\n119\n00:06:48,270 --> 00:06:51,500\nSo this to stop somebody from\nbreaking into the router because,\n\n120\n00:06:51,500 --> 00:06:54,310\nyou know, if they can get into your\nrouter they can redirect your traffic,\n\n121\n00:06:54,310 --> 00:06:55,970\nthey can do all sorts of crazy things.\n\n122\n00:06:55,970 --> 00:06:57,925\nIt's a pretty bad situation to be in.\n\n123\n00:06:57,925 --> 00:06:59,630\n>> Mm-hm.\n\n124\n00:06:59,630 --> 00:07:04,140\n>> The third one here is on what we\ncall AAA and Cisco devices for us.\n\n125\n00:07:04,140 --> 00:07:07,860\nSo this is where we start implementing\na little bit higher level of security,\n\n126\n00:07:07,860 --> 00:07:10,030\ninstead of just demanding\nthe idea of passwords.\n\n127\n00:07:10,030 --> 00:07:13,320\nWe start using username, passwords and\nthen we start actually saying hey,\n\n128\n00:07:13,320 --> 00:07:16,880\nthe idea of actually securing it, we're\ngonna also offload to other devices and\n\n129\n00:07:16,880 --> 00:07:20,180\nhere's how we do it in conjunction\nwith our Cisco devices as well.\n\n130\n00:07:20,180 --> 00:07:20,930\nAnd so\n\n131\n00:07:20,930 --> 00:07:24,180\nyou'll see that we'll talk about some\ndifferent ways that we can implement that.\n\n132\n00:07:24,180 --> 00:07:26,004\nYou'll hear the terms, RADIUS and TACACS.\n\n133\n00:07:26,004 --> 00:07:28,470\n>> Yeah, we'll tackle all that.\n\n134\n00:07:28,470 --> 00:07:31,908\nIn objective four here,\nwe've got IOS ACLs, right.\n\n135\n00:07:31,908 --> 00:07:34,600\nSo, that's IIOS being the operating\nsystem on the routers and\n\n136\n00:07:34,600 --> 00:07:37,040\nACLs are Access Control Lists.\n\n137\n00:07:37,040 --> 00:07:41,850\nNow, If you went ahead and did your CCNA,\nif you did the CCNA routing and\n\n138\n00:07:41,850 --> 00:07:44,580\nswitching, you already know\nhow to do ACLs, right.\n\n139\n00:07:44,580 --> 00:07:48,458\nWell, but if you didn't go that route, if\nyou just did CCENT, you don't know 'em and\n\n140\n00:07:48,458 --> 00:07:50,017\nso that's why we cover them here.\n\n141\n00:07:50,017 --> 00:07:52,533\nEven if you do already know them though,\n\n142\n00:07:52,533 --> 00:07:57,417\nit's still a really good section to learn,\ncuz we're going to show you some of\n\n143\n00:07:57,417 --> 00:08:00,527\nthe best ACLs to put on\nan internet facing router.\n\n144\n00:08:00,527 --> 00:08:02,988\nSo anti-spoofing ACLs and stuff.\n\n145\n00:08:02,988 --> 00:08:06,940\nThat goes beyond what we cover in\nlike the CCNA routing and switching.\n\n146\n00:08:06,940 --> 00:08:10,520\n>> Yeah, by far one of the more important\nthings that we'll actually cover here\n\n147\n00:08:10,520 --> 00:08:14,377\nbecause usually, that's kinda one of our\nfirst lines of defenses that we do have,\n\n148\n00:08:14,377 --> 00:08:17,030\nis making sure we can\nimplement ACLs properly.\n\n149\n00:08:17,030 --> 00:08:20,990\nNot only to again, block out\nthe idea of threats that we face but\n\n150\n00:08:20,990 --> 00:08:23,450\nalso to allow the traffic that\nwe want to be able to get in.\n\n151\n00:08:23,450 --> 00:08:26,880\nSo a very fine line there on allowing\ntraffic we want to get in and\n\n152\n00:08:26,880 --> 00:08:28,710\nblocking the stuff that we don't want.\n\n153\n00:08:28,710 --> 00:08:30,730\nACLs are the way that we'll\ndo it with our IOS here.\n\n154\n00:08:30,730 --> 00:08:36,570\n>> All right, objective five is\nSecure Network Management and Reporting.\n\n155\n00:08:36,570 --> 00:08:40,380\nSo once you have all this stuff in\nplace and your network is secure,\n\n156\n00:08:40,380 --> 00:08:42,930\nhow do you know that it stays that way,\nright?\n\n157\n00:08:42,930 --> 00:08:46,310\nHow do we manage and maintain the devices,\nhow do we collect our logs,\n\n158\n00:08:46,310 --> 00:08:47,970\nharvest that information and work with it?\n\n159\n00:08:47,970 --> 00:08:50,010\nAnd so we'll get a chance to see some\nof the different techniques that\n\n160\n00:08:50,010 --> 00:08:51,020\nare available there.\n\n161\n00:08:51,020 --> 00:08:53,930\nKeep in mind that there is no one\nsolution for everybody, right,\n\n162\n00:08:53,930 --> 00:08:55,680\nit's not a once size fits all thing.\n\n163\n00:08:55,680 --> 00:08:59,390\nSo we'll learn different methods and\ntools, and techniques,\n\n164\n00:08:59,390 --> 00:09:01,970\nand you basically choose the ones\nthat's right for your environment.\n\n165\n00:09:01,970 --> 00:09:05,688\n>> Yeah, a lot of times if you're\nbeginning in the idea of network security,\n\n166\n00:09:05,688 --> 00:09:09,890\nyou might think hey, we just set it and\nwe forget it and we're ready to go.\n\n167\n00:09:09,890 --> 00:09:14,320\nBut security is a changing aspect of\nour lives and our networking here.\n\n168\n00:09:14,320 --> 00:09:17,840\nWe want to make sure that we're monitoring\nit, verifying that it's working, and\n\n169\n00:09:17,840 --> 00:09:22,290\nwe'll see all the different things in\nthere, and you'll be surprised at how much\n\n170\n00:09:22,290 --> 00:09:26,460\nstuff you can actually gather in this if\nyou haven't had any experience in it.\n\n171\n00:09:26,460 --> 00:09:30,900\n>> Now, basically objectives one\nthrough five, it's all routing.\n\n172\n00:09:30,900 --> 00:09:34,210\nIn six, we introduce layer 2 attacks.\n\n173\n00:09:34,210 --> 00:09:37,790\nThese are attacks that can be\nperformed against a switch you know,\n\n174\n00:09:37,790 --> 00:09:40,080\nspecifically Cisco switches,\nbut really any switch.\n\n175\n00:09:40,080 --> 00:09:42,620\nAnd you'll see there's some\nreally sophisticated attacks\n\n176\n00:09:42,620 --> 00:09:44,470\nthat are pretty easy to pull off.\n\n177\n00:09:44,470 --> 00:09:46,700\nA lot of people don't secure\ntheir switches properly.\n\n178\n00:09:46,700 --> 00:09:49,230\nSo we spend some time on that,\nshow you some of the techniques,\n\n179\n00:09:49,230 --> 00:09:51,970\nshow you some of the attacks and\ngive you a chance to see what that's like.\n\n180\n00:09:51,970 --> 00:09:54,890\n>> Yeah, even though we don't\nspend a lot of time on this,\n\n181\n00:09:54,890 --> 00:09:57,340\nit really is a neat topic for us.\n\n182\n00:09:57,340 --> 00:10:00,390\nBecause it really does show us,\nespecially if you're inside the network,\n\n183\n00:10:00,390 --> 00:10:03,100\nwhat can happen if somebody has\nalready gotten through the network, or\n\n184\n00:10:03,100 --> 00:10:05,350\nthey're actually having\nan attack from the inside.\n\n185\n00:10:05,350 --> 00:10:07,870\nSo they are already inside there and\nthey are ready to go.\n\n186\n00:10:07,870 --> 00:10:11,010\nSo it really is,\nit's a great little topic, great review,\n\n187\n00:10:11,010 --> 00:10:13,980\nand it is kind of neat because you get\nto see all the stuff happening almost\n\n188\n00:10:13,980 --> 00:10:16,130\nimmediately once you actually\nhave it implemented.\n\n189\n00:10:16,130 --> 00:10:18,720\nSo, incredible topic there and\nwe will cover it fully.\n\n190\n00:10:20,230 --> 00:10:21,670\n>> As opposed to the other objectives\nthat we don't cover fully?\n\n191\n00:10:21,670 --> 00:10:22,390\n>> That's right.\n\n192\n00:10:22,390 --> 00:10:24,577\n>> [LAUGH] No, we cover them all.\n\n193\n00:10:24,577 --> 00:10:26,505\n[LAUGH]\n>> A surface level review,\n\n194\n00:10:26,505 --> 00:10:27,996\n[INAUDIBLE] mention that.\n\n195\n00:10:27,996 --> 00:10:30,100\n>> All right,\nobjective seven is the first one,\n\n196\n00:10:30,100 --> 00:10:32,160\nwhere we actually introduce ASAs, right.\n\n197\n00:10:32,160 --> 00:10:37,060\nSo it's Cisco firewall technologies, and\nyou know you've got the firewall feature\n\n198\n00:10:37,060 --> 00:10:39,920\nset in your routers so\nyou can do software firewalls, but\n\n199\n00:10:39,920 --> 00:10:42,560\nthere's no substitute for\na good hardware firewall.\n\n200\n00:10:42,560 --> 00:10:44,580\nSo a Cisco ASA is a great device.\n\n201\n00:10:44,580 --> 00:10:47,640\nVery powerful for filtering,\nnot so great for routing right?\n\n202\n00:10:47,640 --> 00:10:49,790\nThey all have their pros and cons.\n\n203\n00:10:49,790 --> 00:10:51,980\nBut we'll take a look at the ASAs.\n\n204\n00:10:51,980 --> 00:10:53,840\nHow they work, the different\nmodels that are out there, and\n\n205\n00:10:53,840 --> 00:10:55,350\nwe'll even go through a basic setup.\n\n206\n00:10:55,350 --> 00:11:00,180\nJust keep in mind if you're looking for\na real in depth hit on ASAs,\n\n207\n00:11:00,180 --> 00:11:03,650\nthis is not gonna be it, it's gonna\nbe in that firewall certification.\n\n208\n00:11:03,650 --> 00:11:07,000\n>> Yeah, this is stuff you'll hear us\nmention at times when we've gone through\n\n209\n00:11:07,000 --> 00:11:11,495\nthe CCENT, and the CCNA routing and\nswitching class.\n\n210\n00:11:11,495 --> 00:11:14,800\nWe're talking about,\nCisco's a great hardware company, but\n\n211\n00:11:14,800 --> 00:11:16,900\nin terms of software, not so great.\n\n212\n00:11:16,900 --> 00:11:20,170\nBut this is where we'll get in depth into,\nwell, I won't say in depth.\n\n213\n00:11:20,170 --> 00:11:25,370\nWe'll at least go over the UI,\n\n214\n00:11:25,370 --> 00:11:30,150\nI couldn't remember what it's called, the\ngraphic user interface on the firewall for\n\n215\n00:11:30,150 --> 00:11:34,720\nus so that you at least go hey,\nthat looks like we can handle it and\n\n216\n00:11:34,720 --> 00:11:37,910\nhere's the basic security that we'll\nimplement on our firewalls here.\n\n217\n00:11:37,910 --> 00:11:42,480\n>> Now Cisco also makes a line of\nintrusion prevention systems or\n\n218\n00:11:42,480 --> 00:11:46,560\nservers and so you'll see\nobjective eight there, Cisco IPS.\n\n219\n00:11:46,560 --> 00:11:50,610\nThis is another one where on the exam they\ndon't expect you to be able to configure\n\n220\n00:11:50,610 --> 00:11:53,960\nthe IPS boxes, they just want you to\nbe familiar with them, how they work,\n\n221\n00:11:53,960 --> 00:11:58,150\nhow you install them, like where they\ngo in your network not like how you\n\n222\n00:11:58,150 --> 00:12:00,780\nput in a screw, but\nthat kind of basic information.\n\n223\n00:12:00,780 --> 00:12:05,210\nAnd so, you understand what options\nare available to you on your network.\n\n224\n00:12:05,210 --> 00:12:09,960\nIf you're wanting to learn a lot about\nthe IPS boxes, CISCO makes great ones,\n\n225\n00:12:09,960 --> 00:12:14,060\nsome of the best ones in the market,\nand they call them IPS Sensors.\n\n226\n00:12:15,150 --> 00:12:21,810\nBut they actually have a specific\ncertification just for the exams.\n\n227\n00:12:21,810 --> 00:12:26,642\nAnd so there's one, like we had\nfirewall for firewalls, we have IPS for\n\n228\n00:12:26,642 --> 00:12:30,170\nIPSs, so it's [LAUGH],\nkind of, appropriate the name.\n\n229\n00:12:30,170 --> 00:12:34,250\nSo, there is a far more in-depth\ncertification for that, but\n\n230\n00:12:34,250 --> 00:12:37,770\nfor us, we'll give the basics, kind of\nshow how they work, and what they do.\n\n231\n00:12:37,770 --> 00:12:39,340\n>> Yeah,\nI don't have anything to add here.\n\n232\n00:12:39,340 --> 00:12:40,748\n>> All right.\n>> [LAUGH]\n\n233\n00:12:40,748 --> 00:12:43,360\n>> And, then the last one is just VPN\n\n234\n00:12:43,360 --> 00:12:44,630\ntechnologies, right.\n\n235\n00:12:44,630 --> 00:12:48,640\nAnd that's where we're gonna\nshow how to set up VPN tunnels.\n\n236\n00:12:48,640 --> 00:12:50,835\nReally, we're gonna focus on\nsite-to-site VPNs, right.\n\n237\n00:12:50,835 --> 00:12:51,830\nCuz remember,\n\n238\n00:12:51,830 --> 00:12:55,930\nthis is all terminating against a router,\nas far as this exam is concerned.\n\n239\n00:12:55,930 --> 00:12:59,450\nAnd routers generally don't provide\na remote access VPN, they can but\n\n240\n00:12:59,450 --> 00:13:01,160\nthey're not really designed for it.\n\n241\n00:13:01,160 --> 00:13:04,130\nSo we're gonna be talking\nabout site-to-site VPNs.\n\n242\n00:13:04,130 --> 00:13:07,970\nThe firewall, actually there's\na certification with that one too,\n\n243\n00:13:07,970 --> 00:13:11,270\nit's just called VPN,\nan exam for that one.\n\n244\n00:13:11,270 --> 00:13:14,330\nAnd so that one goes far in-depth but\nhere we'll tackle site-to-site, you know\n\n245\n00:13:14,330 --> 00:13:17,480\nbuilding up an infrastructure for your\nbusiness and making sure that it's secure.\n\n246\n00:13:17,480 --> 00:13:20,040\n>> Yeah,\nthis is one of the configurations we\n\n247\n00:13:20,040 --> 00:13:23,915\nhave to get right because of the way that\nnetworking is changing for our businesses.\n\n248\n00:13:23,915 --> 00:13:27,490\nSite-to-site VPNs are one of the most\npopular configurations that we have to be\n\n249\n00:13:27,490 --> 00:13:31,110\nable to do, do it correctly and\nmake sure everything is working.\n\n250\n00:13:31,110 --> 00:13:33,830\nSo we'll again make sure that we show\nyou how to set that up correctly.\n\n251\n00:13:35,770 --> 00:13:39,665\n>> All right, and sorry,\nI'm choking on my coffee over here.\n\n252\n00:13:39,665 --> 00:13:41,930\n>> [LAUGH]\n>> You know we might have a very secure\n\n253\n00:13:41,930 --> 00:13:47,255\nnetwork but then,\nI die to a hot cup of coffee.\n\n254\n00:13:47,255 --> 00:13:51,500\n[LAUGH] All right, so that's basically\nwhat we've got lined up for us in IINS.\n\n255\n00:13:51,500 --> 00:13:54,300\nSo you see we cover quite a bit of stuff.\n\n256\n00:13:54,300 --> 00:14:00,260\nThe first five objectives there really,\nalmost entirely built around routers.\n\n257\n00:14:00,260 --> 00:14:04,370\nAnd you'll see that it adds up to,\nbasically half the exam.\n\n258\n00:14:04,370 --> 00:14:07,080\nThe other half is kinda scattered\ntechnologies amongst all the different\n\n259\n00:14:07,080 --> 00:14:08,710\nofferings from Cisco.\n\n260\n00:14:08,710 --> 00:14:12,060\nI've heard people and\nI know I've done it myself too,\n\n261\n00:14:12,060 --> 00:14:17,570\nwhere I describe this exam as almost\nlike a like a sales campaign.\n\n262\n00:14:17,570 --> 00:14:21,470\nIt's like bringing you to a used car lot\nand showing you all the cars, right?\n\n263\n00:14:21,470 --> 00:14:23,480\nThat's kinda what we're doing\nhere is saying, come on,\n\n264\n00:14:23,480 --> 00:14:26,850\nwhat's it gonna take to get you\nin one of these IPSs today?\n\n265\n00:14:26,850 --> 00:14:30,210\nAnd oh, the IPS isn't good, well,\nlet's go take a look at the ASAs.\n\n266\n00:14:30,210 --> 00:14:35,124\nYou kinda, you look like a dignified man,\nand maybe you need a 5580.\n\n267\n00:14:35,124 --> 00:14:35,762\n>> That's right.\n\n268\n00:14:35,762 --> 00:14:39,280\n>> It's that kinda thing and\nso you do get to see a lot.\n\n269\n00:14:39,280 --> 00:14:42,150\nBut used car analogies aside,\n\n270\n00:14:42,150 --> 00:14:45,510\nit's awesome to be able to see all\nthe different stuff that's available.\n\n271\n00:14:45,510 --> 00:14:47,710\nThe routers are what they\nreally want you to know so\n\n272\n00:14:47,710 --> 00:14:49,740\non the exam you're gonna\nhave simulation questions.\n\n273\n00:14:49,740 --> 00:14:52,390\nAnd they're almost always going to be\nbuilt around that idea of a router,\n\n274\n00:14:52,390 --> 00:14:54,460\nyou know,\nconfiguring something on a router.\n\n275\n00:14:54,460 --> 00:14:58,690\nBut then they want you to be familiar with\nall the other hardware, mostly so that you\n\n276\n00:14:58,690 --> 00:15:04,180\nknow when a router is not appropriate for\na solution and what is, right.\n\n277\n00:15:04,180 --> 00:15:08,355\nSo you might look at and say, you know\nwhat, I know I can do that on a router but\n\n278\n00:15:08,355 --> 00:15:12,385\nan ASA would do it better, or an IPS would\ndo it better or something like that.\n\n279\n00:15:12,385 --> 00:15:14,635\nSo knowing the right tool for the task.\n\n280\n00:15:17,437 --> 00:15:20,075\nAll right, so Ronnie, I think we're\nprobably ready to jump into topic.\n\n281\n00:15:20,075 --> 00:15:22,225\nDo you have anything else to\nadd before we dive into that?\n\n282\n00:15:22,225 --> 00:15:22,905\n>> No.\n\n283\n00:15:22,905 --> 00:15:27,865\nOnce again, everything that we've talked\nabout in the original CCENT and CCNA,\n\n284\n00:15:27,865 --> 00:15:32,227\nif you've gone through that or\ndecide to skip [INAUDIBLE].\n\n285\n00:15:32,227 --> 00:15:37,970\nBut we wanna emphasize once again,\nthe key here is practice, as well.\n\n286\n00:15:37,970 --> 00:15:41,170\nOnce you actually see\nthe technologies that we show you,\n\n287\n00:15:41,170 --> 00:15:43,330\nreviewing is gonna be key concepts.\n\n288\n00:15:43,330 --> 00:15:45,950\nThis shouldn't be anything new\nif you're jumping into this.\n\n289\n00:15:45,950 --> 00:15:48,870\nBut it is something that we want\nto emphasize over and over again.\n\n290\n00:15:48,870 --> 00:15:51,800\nCisco is fairly unforgiving,\nin terms of you configuring and\n\n291\n00:15:51,800 --> 00:15:53,160\nmoving on to questions.\n\n292\n00:15:53,160 --> 00:15:54,362\n>> Yeah.\n>> So don't do that.\n\n293\n00:15:54,362 --> 00:15:58,203\nIn other words, practice, make sure you\nknow what you're doing before you press\n\n294\n00:15:58,203 --> 00:15:59,940\nthe next button and that's the key.\n\n295\n00:15:59,940 --> 00:16:05,602\n>> Yeah, the two things that I always warn\npeople about on a Cisco certification,\n\n296\n00:16:05,602 --> 00:16:09,840\nfirst off is, when you click\nnext on a question that's it.\n\n297\n00:16:09,840 --> 00:16:11,400\nYou can't go back to it.\n\n298\n00:16:11,400 --> 00:16:17,520\nYou know a lot of vendors like Microsoft\nand Comptia, you can mark questions for\n\n299\n00:16:17,520 --> 00:16:20,400\nreview, finish the exam, and\nthen come back and hit those.\n\n300\n00:16:20,400 --> 00:16:22,520\nNot on Cisco,\nwhen you click next that's it.\n\n301\n00:16:22,520 --> 00:16:27,730\nThe second thing is that time sorry.\n\n302\n00:16:27,730 --> 00:16:29,260\n>> Timing.\n>> My mind kind of when blank there for\n\n303\n00:16:29,260 --> 00:16:31,260\na second I was thinking about labs.\n\n304\n00:16:31,260 --> 00:16:35,290\nIs time, Cisco will often give you like 90\nminutes which seems like a lot of time.\n\n305\n00:16:35,290 --> 00:16:36,390\nAn hour and a half.\n\n306\n00:16:36,390 --> 00:16:38,420\nBut then they'll give\nyou ninety questions.\n\n307\n00:16:38,420 --> 00:16:40,490\n>> Yeah.\n>> Or they'll give you a lot of questions,\n\n308\n00:16:40,490 --> 00:16:42,390\nso that you can't slow down.\n\n309\n00:16:42,390 --> 00:16:46,050\nYou've got to get in there and\nget those questions answered, and\n\n310\n00:16:46,050 --> 00:16:47,300\nmove through it quickly.\n\n311\n00:16:47,300 --> 00:16:50,675\nCisco is basically saying, hey,\nyou either know it or you don't.\n\n312\n00:16:50,675 --> 00:16:55,305\nIf you don't know it, then you need to\nget that question wrong and move on.\n\n313\n00:16:55,305 --> 00:16:58,215\nBut if you sit there and\nstall too long, it's a problem.\n\n314\n00:16:58,215 --> 00:17:01,680\nSo you really need to make sure that you\nare answering the questions quickly.\n\n315\n00:17:01,680 --> 00:17:02,690\nSo that you can get through.\n\n316\n00:17:02,690 --> 00:17:05,350\nBecause when you get to a simulation\nquestion, it's going to take time.\n\n317\n00:17:05,350 --> 00:17:08,060\n>> Yeah.\n>> So, I always try to allocate a good six\n\n318\n00:17:08,060 --> 00:17:11,980\nto seven minutes per simulation, which\nmeans for a multiple choice question,\n\n319\n00:17:11,980 --> 00:17:14,260\nyou need to hold it to\nbelow like one minute.\n\n320\n00:17:14,260 --> 00:17:15,930\n>> Yeah.\n>> You need to read and\n\n321\n00:17:15,930 --> 00:17:18,070\nfind your answer in under a minute.\n\n322\n00:17:18,070 --> 00:17:22,130\nThis exam is 90 minutes, and\nit's got 55 to 65 questions.\n\n323\n00:17:22,130 --> 00:17:25,600\nSo you could have as many as 65 questions,\n\n324\n00:17:25,600 --> 00:17:28,400\nand that's because Cisco's\nquestions are weighted differently.\n\n325\n00:17:28,400 --> 00:17:33,180\nSome count for more points than others,\nand you're pulling questions from a random\n\n326\n00:17:33,180 --> 00:17:39,560\npool and so yeah, you may get a bunch of\neasy ones, and so you get 65 questions.\n\n327\n00:17:39,560 --> 00:17:42,200\nOr you might get a bunch of hard ones,\nso you get only 55 questions.\n\n328\n00:17:42,200 --> 00:17:42,835\nIt just depends.\n\n329\n00:17:42,835 --> 00:17:44,330\n>> Mm-hm.\n\n330\n00:17:44,330 --> 00:17:48,920\nNow, if you've already taken your CCNT,\nthe good thing is you're kind of used to\n\n331\n00:17:48,920 --> 00:17:52,250\nthose exam types of simulations,\nthat you'll get to You'll get to.\n\n332\n00:17:52,250 --> 00:17:53,880\nYou'll see they're kind of the same,\nbut if you're not...\n\n333\n00:17:53,880 --> 00:17:56,570\nGo ahead and\ntake a look at the view website, and\n\n334\n00:17:56,570 --> 00:18:00,510\nthey actually do show you demos\nof the types of simulations,\n\n335\n00:18:00,510 --> 00:18:02,470\nand the things like that\nthat you'll end up seeing.\n\n336\n00:18:02,470 --> 00:18:06,960\nSo go ahead and take a look at that for\npreparation as well.\n\n337\n00:18:06,960 --> 00:18:08,390\n>> You know,\nI wonder if I can find that really quick.\n\n338\n00:18:08,390 --> 00:18:11,710\nThe last time I did this it died on me.\n\n339\n00:18:13,380 --> 00:18:16,075\nThere's a Cisco exam\ndemo that they posted.\n\n340\n00:18:16,075 --> 00:18:19,500\nOh, my zoom has ratcheted up a bit there.\n\n341\n00:18:22,250 --> 00:18:23,590\nHere we go, Cisco exam tutorial.\n\n342\n00:18:23,590 --> 00:18:24,570\nLet's see if it works.\n\n343\n00:18:24,570 --> 00:18:26,150\nIt was offline for awhile.\n\n344\n00:18:26,150 --> 00:18:26,910\n>> Oh, there it is.\n\n345\n00:18:26,910 --> 00:18:27,810\n>> Oh, it's online.\n\n346\n00:18:27,810 --> 00:18:28,440\n>> That's how it looks.\n\n347\n00:18:28,440 --> 00:18:32,240\n>> So whenever you take a Cisco exam, you\nhave to sign a non-disclosure agreement.\n\n348\n00:18:32,240 --> 00:18:33,040\nAn NDA.\n\n349\n00:18:33,040 --> 00:18:35,215\nAnd it basically says that you\nwon't talk about the exam.\n\n350\n00:18:35,215 --> 00:18:37,160\n>> [LAUGH]\n>> Now that makes it really hard for\n\n351\n00:18:37,160 --> 00:18:39,840\npeople like Rodney and I because\n>> You know, we're trying to get\n\n352\n00:18:39,840 --> 00:18:42,580\nyou ready for the exam, but\nwe can't talk about what's on there.\n\n353\n00:18:42,580 --> 00:18:45,380\nSo, they recognize that it's Cisco,\nand what they did to try and\n\n354\n00:18:45,380 --> 00:18:47,280\nhelp, is they released this.\n\n355\n00:18:47,280 --> 00:18:51,550\nIt's a demonstration that shows\nyou what the exam is like.\n\n356\n00:18:51,550 --> 00:18:52,090\nOkay?\n\n357\n00:18:52,090 --> 00:18:55,060\nAnd, it's from,\nactually on Cisco's website,\n\n358\n00:18:55,060 --> 00:18:56,190\nyou can see up here in the address bar.\n\n359\n00:18:56,190 --> 00:18:58,840\nSo, they released this to make sure\nthat the people like Ronnie and\n\n360\n00:18:58,840 --> 00:19:00,270\nI don't get into trouble.\n\n361\n00:19:00,270 --> 00:19:04,140\nAnd so we'll see this kind of example\nhere of what the exam is like.\n\n362\n00:19:04,140 --> 00:19:07,450\nNow the bulk of your exam,\nis going to be multiple choice, and\n\n363\n00:19:07,450 --> 00:19:08,880\nthat's what they're showing right here.\n\n364\n00:19:08,880 --> 00:19:10,610\nYou know, how many meters in a kilometer.\n\n365\n00:19:10,610 --> 00:19:11,900\nYou pick it and you hit next.\n\n366\n00:19:11,900 --> 00:19:15,250\nNow, notice there is no mark for\nreview check mark,\n\n367\n00:19:15,250 --> 00:19:18,120\nlike you might've seen with Microsoft and\nComptia and stuff.\n\n368\n00:19:18,120 --> 00:19:19,920\nWhen you hit next, that's it.\n\n369\n00:19:19,920 --> 00:19:22,120\nYou've moved on beyond that question.\n\n370\n00:19:22,120 --> 00:19:22,790\n>> Right.\n\n371\n00:19:22,790 --> 00:19:27,310\n>> All right, there's other ones\nthat are choose multiple answer.\n\n372\n00:19:27,310 --> 00:19:29,140\nChoose all that apply or\nchoose a multiple answer.\n\n373\n00:19:30,270 --> 00:19:34,360\nCisco is really good about telling you\nhow many you're suppose to check, okay?\n\n374\n00:19:34,360 --> 00:19:37,090\nSome vendors like Microsoft\nwill say choose all that apply.\n\n375\n00:19:37,090 --> 00:19:37,840\nAnd you don't know!\n\n376\n00:19:37,840 --> 00:19:38,640\nIs it two?\nIs it five?\n\n377\n00:19:38,640 --> 00:19:39,600\nIs it whatever?\n\n378\n00:19:39,600 --> 00:19:40,640\n>> Cisco will usually tell you.\n\n379\n00:19:40,640 --> 00:19:42,540\nAnd so like here they say choose three.\n\n380\n00:19:42,540 --> 00:19:46,240\nIf you choose less than three and\nhit next, it'll warn you.\n\n381\n00:19:46,240 --> 00:19:48,760\nIf you try and choose four,\nit'll warn you.\n\n382\n00:19:48,760 --> 00:19:50,240\nSo it's really good.\n\n383\n00:19:50,240 --> 00:19:52,830\nThey do not award partial credit.\n\n384\n00:19:52,830 --> 00:19:54,370\n>> Nope.\n>> So you either get it a hundred\n\n385\n00:19:54,370 --> 00:19:55,820\npercent right, or a hundred percent wrong.\n\n386\n00:19:55,820 --> 00:19:57,270\nThere is no in-between.\n\n387\n00:19:57,270 --> 00:20:01,010\nSo when you answer the question,\nit's all or nothing.\n\n388\n00:20:01,010 --> 00:20:05,740\nSo if you have to guess, definitely guess,\nbecause leaving a question blank, and\n\n389\n00:20:05,740 --> 00:20:09,370\nguessing and getting it wrong,\ncounts for the same value.\n\n390\n00:20:09,370 --> 00:20:10,490\nSo you might as well guess.\n\n391\n00:20:10,490 --> 00:20:12,410\nYou should never leave\nan unanswered question.\n\n392\n00:20:12,410 --> 00:20:12,910\n>> Right.\n\n393\n00:20:14,790 --> 00:20:16,480\n>> All right, and\nI'm gonna do the Try Me here.\n\n394\n00:20:16,480 --> 00:20:17,770\nLet's see if it'll complain.\n\n395\n00:20:17,770 --> 00:20:21,840\nLike if I just check two and\nhit Next, there we go.\n\n396\n00:20:21,840 --> 00:20:24,580\n>> There you go.\n>> See, I've selected two few answers, and\n\n397\n00:20:24,580 --> 00:20:27,490\nif I try and choose four,\nI've chosen too many answers.\n\n398\n00:20:27,490 --> 00:20:30,810\nSo it's really good about warning you,\nso you choose the right one.\n\n399\n00:20:30,810 --> 00:20:34,600\n>> All right, you'll also get drag and\ndrop questions.\n\n400\n00:20:34,600 --> 00:20:35,340\n>> Yes you will.\n\n401\n00:20:35,340 --> 00:20:36,850\n>> I like drag and drop personally.\n\n402\n00:20:36,850 --> 00:20:39,390\nYou normally won't get more\nthan like one of two of 'em.\n\n403\n00:20:39,390 --> 00:20:43,860\nAnd they almost always include\nmore options than they do slots.\n\n404\n00:20:43,860 --> 00:20:44,392\n>> That's right.\n\n405\n00:20:44,392 --> 00:20:45,109\n[LAUGH]\n>> So\n\n406\n00:20:45,109 --> 00:20:48,250\nyou'll usually have some left\nover when you answer, right?\n\n407\n00:20:48,250 --> 00:20:52,660\nAnd that's what they're showing here, is\nwhich ones are Layer 3 Routed Protocols,\n\n408\n00:20:52,660 --> 00:20:55,550\nand which ones are Layer\n3 Routing Protocols.\n\n409\n00:20:55,550 --> 00:21:01,058\nSo we can start with routing, like RIP is\na layer 3 routing protocol, so is IGRP,\n\n410\n00:21:01,058 --> 00:21:07,320\nso is BGP,versus protocols\nthat can be routed.\n\n411\n00:21:07,320 --> 00:21:11,600\nIP can be routed,\nAppleTalk can be routed,, and\n\n412\n00:21:11,600 --> 00:21:15,800\nDeck net which most of us have probably\nnever used or even heard of can be routed.\n\n413\n00:21:15,800 --> 00:21:18,700\nEven if we didn't know that,\nI know that net movie can't be routed, so\n\n414\n00:21:18,700 --> 00:21:21,790\nyou know we could process of eliminate\nthat one, but basically you drag and\n\n415\n00:21:21,790 --> 00:21:22,660\nfill in all the blanks.\n\n416\n00:21:22,660 --> 00:21:25,814\nYou do have to fill in all the blanks\nbefore you can move on, but\n\n417\n00:21:25,814 --> 00:21:28,803\nyou'll see I've got one left over here and\nthat's fine.\n\n418\n00:21:31,566 --> 00:21:32,564\n>> All right.\n\n419\n00:21:32,564 --> 00:21:36,630\nCisco has eliminated\nfill-in-the-blank questions.\n\n420\n00:21:36,630 --> 00:21:39,210\nThey used to have fill-in-the-blank\nquestions like this.\n\n421\n00:21:39,210 --> 00:21:41,110\nWhoops, my desktop disappeared.\n\n422\n00:21:41,110 --> 00:21:42,040\nThere we go.\n\n423\n00:21:42,040 --> 00:21:44,010\nThey used to have fill-in-the-blank\nquestions like this,\n\n424\n00:21:44,010 --> 00:21:45,330\nwhere you'd have to type in a value.\n\n425\n00:21:45,330 --> 00:21:48,980\nI hated these, and I had to take it.\n\n426\n00:21:48,980 --> 00:21:53,930\nI originally got my CC&A, my first\nCisco certification, I got in 1999.\n\n427\n00:21:53,930 --> 00:21:56,010\nSo awhile ago.\n\n428\n00:21:56,010 --> 00:21:56,830\n>> Fifteen years.\n\n429\n00:21:56,830 --> 00:21:58,350\n>> Wow.\nIt's been that long.\n\n430\n00:21:58,350 --> 00:22:01,270\nSo back then, it was very common to\nhave fill in the blank questions,\n\n431\n00:22:01,270 --> 00:22:02,045\nand I hated them.\n\n432\n00:22:02,045 --> 00:22:02,910\n>> Mm-hm.\n>> Because you didn't know,\n\n433\n00:22:02,910 --> 00:22:04,010\nif you were typing in a command,\n\n434\n00:22:04,010 --> 00:22:05,780\nyou didn't know if you\ncould abbreviate it or not.\n\n435\n00:22:05,780 --> 00:22:07,850\nIt was was a super pain.\n\n436\n00:22:07,850 --> 00:22:12,060\nSo, now they've killed these off,\nso you won't have them like that.\n\n437\n00:22:12,060 --> 00:22:12,660\nAll right.\n>> Yup.\n\n438\n00:22:12,660 --> 00:22:13,380\n>> There it is.\n\n439\n00:22:13,380 --> 00:22:16,646\nBut, here is an example of a simulation.\n\n440\n00:22:16,646 --> 00:22:19,700\nAll right, on a router simulation like\nthis, you're going to see a network map,\n\n441\n00:22:19,700 --> 00:22:24,960\nand basically what they do is, up top they\ngive you a description of the network.\n\n442\n00:22:24,960 --> 00:22:26,220\nRight.\n\n443\n00:22:26,220 --> 00:22:28,240\nLet me switch to the try me mode here.\n\n444\n00:22:28,240 --> 00:22:30,400\nAnd so\nyou get a description of the network, and\n\n445\n00:22:30,400 --> 00:22:34,080\nit's basically describing the problem,\nand ultimately what you need to do.\n\n446\n00:22:34,080 --> 00:22:38,060\nSo here it saying like, change the host\nname of Lab A to Router A, right?\n\n447\n00:22:38,060 --> 00:22:40,020\nBut it's not normally that easy, and\n\n448\n00:22:40,020 --> 00:22:42,800\nyou normally have a lot more\nup here than inscription.\n\n449\n00:22:42,800 --> 00:22:45,400\nAnd in the exam booth you'll\nbe able to resize that window.\n\n450\n00:22:45,400 --> 00:22:48,185\nI can't do it here, so\nit is easier to read.\n\n451\n00:22:48,185 --> 00:22:49,295\nAnd then on the left side,\n\n452\n00:22:49,295 --> 00:22:53,955\nyou typically get a high level overview of\nthe steps you need to achieve, all right?\n\n453\n00:22:53,955 --> 00:22:56,955\nSo you need to do this,\nyou need to do that.\n\n454\n00:22:56,955 --> 00:22:58,125\nIt's not gonna tell you how to do it.\n\n455\n00:22:58,125 --> 00:22:58,875\n>> Right.\n>> But\n\n456\n00:22:58,875 --> 00:23:01,055\nit's gonna tell you what you need to do.\n\n457\n00:23:01,055 --> 00:23:04,885\nAnd then there's the network topology,\nwhich is this diagram here, all right?\n\n458\n00:23:06,200 --> 00:23:08,910\nOn some of the questions,\nthis is kinda frustrating,\n\n459\n00:23:08,910 --> 00:23:12,650\nyou can click right on the device, and\nit'll take you into the device console.\n\n460\n00:23:12,650 --> 00:23:13,150\n>> Yeah.\n\n461\n00:23:13,150 --> 00:23:18,240\n>> On other ones, it'll show a console\ncable like this, this dashed line.\n\n462\n00:23:18,240 --> 00:23:22,480\nAnd so to manage Lab A, I actually have\nto click on this host to manage it.\n\n463\n00:23:22,480 --> 00:23:24,910\nSo just be aware that it may be like that.\n\n464\n00:23:24,910 --> 00:23:28,070\nIf you can't click on the device, it's\nnormally one that you can't manage, or\n\n465\n00:23:28,070 --> 00:23:30,830\nit's not really necessary for\nthe test question.\n\n466\n00:23:30,830 --> 00:23:34,120\nBut you click on it, and\nit'll drop you into the console.\n\n467\n00:23:34,120 --> 00:23:35,770\nAnd then you can start to\nwork with that device.\n\n468\n00:23:35,770 --> 00:23:38,100\nAnd so you can get in there and\nwork with it.\n\n469\n00:23:38,100 --> 00:23:41,020\nWell, this demo apparently won't take\nthe commands, but you can get in there and\n\n470\n00:23:41,020 --> 00:23:42,330\nwork with it.\n\n471\n00:23:42,330 --> 00:23:45,280\nCommands like the question mark,\ndo work in the demo.\n\n472\n00:23:45,280 --> 00:23:48,070\nSo if you forget the commands you can use\nthe question mark to try and find them.\n\n473\n00:23:48,070 --> 00:23:48,880\n>> Right.\n\n474\n00:23:48,880 --> 00:23:50,850\n>> Takes a lot longer, and\nyou don't have a ton of time, right?\n\n475\n00:23:50,850 --> 00:23:53,194\n>> Yeah, and that's the key, is the time.\n\n476\n00:23:53,194 --> 00:23:56,639\nYeah, remember that you even\nthough it's a simulation,\n\n477\n00:23:56,639 --> 00:24:00,306\nit doesn't mean you get to take\nall day long to actually do it.\n\n478\n00:24:00,306 --> 00:24:03,472\nSo, do make sure you keep an eye on\nyour timer when you go through these.\n\n479\n00:24:03,472 --> 00:24:08,210\n>> Yup, and so we've got down here,\nthis show topology button.\n\n480\n00:24:08,210 --> 00:24:11,210\nOnce I'm done on one router,\nif I have to make changes on another one,\n\n481\n00:24:11,210 --> 00:24:14,320\nyou click that show topology,\nit takes you right back to the map, and\n\n482\n00:24:14,320 --> 00:24:16,290\nthen you can go an work\non the next device.\n\n483\n00:24:16,290 --> 00:24:20,790\nDo everything that you need and\nwhen you're done, then you click Next and\n\n484\n00:24:20,790 --> 00:24:21,720\nit'll ask you to confirm.\n\n485\n00:24:21,720 --> 00:24:25,727\nNow there is this huge debate that you'll\nsee on a lot of websites, over whether or\n\n486\n00:24:25,727 --> 00:24:27,775\nnot you need to save your configs, okay.\n\n487\n00:24:27,775 --> 00:24:30,800\nAnd I always thought you did for\nthe longest time I did.\n\n488\n00:24:30,800 --> 00:24:34,310\nBut I did have a chance to talk\nwith one of the test authors,\n\n489\n00:24:34,310 --> 00:24:37,655\none of the guys that actually\nwrites the exam, and he said that\n\n490\n00:24:37,655 --> 00:24:42,420\ntheir software that grades it, doesn't\ncare whether you save the config or not.\n\n491\n00:24:42,420 --> 00:24:46,360\nAs long as it's there, you enter the\ncommand, you hit next, you'll get credit.\n\n492\n00:24:46,360 --> 00:24:51,525\nThat being said, I still save my config,\nI just don't trust it.\n\n493\n00:24:51,525 --> 00:24:53,977\nBut yeah, so keep that in mind.\n\n494\n00:24:53,977 --> 00:24:55,705\nAll right,\n\n495\n00:24:55,705 --> 00:25:00,925\nnow you are starting to see a lot more of\nthese on the exam, and these are testlets.\n\n496\n00:25:02,125 --> 00:25:04,405\nCisco doesn't give you a ton of time,\nright.\n\n497\n00:25:04,405 --> 00:25:07,655\nAnd so the more you have to read,\nthe longer it takes the question to be.\n\n498\n00:25:07,655 --> 00:25:09,655\nSo Cisco said, why don't we do this,\n\n499\n00:25:09,655 --> 00:25:13,945\nwhy don't we write up one big network\ndescription right, that you can read.\n\n500\n00:25:13,945 --> 00:25:17,480\nSo here's this big description\nof the network, and\n\n501\n00:25:17,480 --> 00:25:21,200\nthen give you multiple\nquestions on that same network.\n\n502\n00:25:21,200 --> 00:25:24,300\nSo you just read it once, and\nthen you go through and answer it.\n\n503\n00:25:24,300 --> 00:25:28,330\nSo here they're describing a network for\nus, you know, subnets and ping results and\n\n504\n00:25:28,330 --> 00:25:29,650\nstuff like that.\n\n505\n00:25:29,650 --> 00:25:34,380\nAnd then here's four questions\nbased on that information, right.\n\n506\n00:25:34,380 --> 00:25:37,430\nNow the four questions\nare graded independently.\n\n507\n00:25:37,430 --> 00:25:41,300\nSo you could get two right and two wrong\nor three right and one wrong or whatever.\n\n508\n00:25:41,300 --> 00:25:44,110\nSo it's sort of like\ngetting partial credit.\n\n509\n00:25:44,110 --> 00:25:48,080\nBut they're really independent\nquestions down there, all right.\n\n510\n00:25:48,080 --> 00:25:49,610\nBut, so you know you need to\ngo through and answer 'em.\n\n511\n00:25:49,610 --> 00:25:53,750\nIt will gripe at you if you try and\nhit Next, and you haven't answered one.\n\n512\n00:25:53,750 --> 00:25:55,720\nSo it'll let you know that\nyou need to answer it.\n\n513\n00:25:55,720 --> 00:25:59,230\nThe cool thing though is that this is\nthe closest you'll get to being able to go\n\n514\n00:25:59,230 --> 00:26:00,470\nback to a previous question.\n\n515\n00:26:00,470 --> 00:26:03,940\n>> Right. [LAUGH] >> So if I answered\nquestion number one, and question number\n\n516\n00:26:03,940 --> 00:26:08,550\ntwo, right, so I'll just answer oh,\nwait, I don't want to hit that next.\n\n517\n00:26:08,550 --> 00:26:09,620\nSee, it's a good thing it warned me there,\n\n518\n00:26:09,620 --> 00:26:11,200\nI don't want to go to\nthe next full question,\n\n519\n00:26:11,200 --> 00:26:12,770\nI want to go to the next one of these.\n\n520\n00:26:12,770 --> 00:26:15,891\nSo I can go through, and\nI can check off you know, whatever.\n\n521\n00:26:17,310 --> 00:26:20,480\nAnd I'm on question three and\nthen maybe I realize something about\n\n522\n00:26:20,480 --> 00:26:23,500\nquestion one again, well I can\nactually go back to question one.\n\n523\n00:26:23,500 --> 00:26:25,709\nThis is the one time on the exam,\nthat you can go backwards.\n\n524\n00:26:26,750 --> 00:26:30,830\nBut otherwise, you know you answer it and\nwhen you hit the big Next, that's it,\n\n525\n00:26:30,830 --> 00:26:33,880\nyou're moving past all\nfour of those questions.\n\n526\n00:26:33,880 --> 00:26:37,712\nThey're gone and they're now\npart of your history, all right.\n\n527\n00:26:37,712 --> 00:26:39,130\n>> Mm-hm.\n\n528\n00:26:39,130 --> 00:26:42,710\n>> Now this one at first glance looks\na lot like the same simulation we saw\n\n529\n00:26:42,710 --> 00:26:47,410\na moment ago, but this is kind of\na merger between the simulation and\n\n530\n00:26:47,410 --> 00:26:50,560\nthe testlet, right, so\nthey call it a simlet.\n\n531\n00:26:50,560 --> 00:26:54,000\nAnd you'll see up here where\nI've got four questions,\n\n532\n00:26:54,000 --> 00:26:56,900\nwhich actually I guess it won't let me\npick the, oh, I'm not in Try Me mode.\n\n533\n00:26:56,900 --> 00:26:57,950\nThere we go.\n\n534\n00:26:57,950 --> 00:27:02,050\nI've got a couple of questions that I can\npick from up here, right, just three.\n\n535\n00:27:02,050 --> 00:27:05,075\nAll built around the same\nnetwork down here.\n\n536\n00:27:05,075 --> 00:27:06,000\n>> Mm-hm.\n\n537\n00:27:06,000 --> 00:27:08,750\n>> In these, they won't normally\nask you to configure something.\n\n538\n00:27:08,750 --> 00:27:13,160\nThey're asking you to use show commands,\nand commands to view the config and\n\n539\n00:27:13,160 --> 00:27:17,130\nstuff, to get information out and\nanswer the questions appropriately.\n\n540\n00:27:18,330 --> 00:27:18,980\n>> Yeah.\n\n541\n00:27:18,980 --> 00:27:22,110\nOnce again, you can't over\nemphasize the idea of timing here.\n\n542\n00:27:22,110 --> 00:27:23,990\nWith multiple devices,\nyou may actually go,\n\n543\n00:27:23,990 --> 00:27:26,140\nI'm gonna explore the whole network first.\n\n544\n00:27:26,140 --> 00:27:27,020\nYou're not gonna have time.\n\n545\n00:27:27,020 --> 00:27:30,990\nThey key here is to remember to look at\nwhat they're asking on the question and\n\n546\n00:27:30,990 --> 00:27:33,950\nzoom in on that bigger aspect of that\n\n547\n00:27:33,950 --> 00:27:36,610\nquestion to make sure you\nget the right information.\n\n548\n00:27:36,610 --> 00:27:37,470\n>> Yep.\n\n549\n00:27:37,470 --> 00:27:39,260\nAnd then I think that's really about it.\n\n550\n00:27:39,260 --> 00:27:41,310\nAre there any other?\n\n551\n00:27:41,310 --> 00:27:41,850\n>> No, I think that's it.\n\n552\n00:27:41,850 --> 00:27:43,230\nSeven different types of questions.\n\n553\n00:27:43,230 --> 00:27:45,650\n>> Yeah, well let me move past it,\nprogramming, okay.\n\n554\n00:27:45,650 --> 00:27:49,114\nSo with the exception of the fill in the\nblanks, which are gone, the rest of it,\n\n555\n00:27:49,114 --> 00:27:52,870\nthat's what you're gonna see in the exams,\nthat's what it's like and that's it.\n\n556\n00:27:52,870 --> 00:27:54,630\nNow there's one thing\nthat they didn't show and\n\n557\n00:27:54,630 --> 00:27:58,170\nthat is, all these simulations\nwere based on the command line.\n\n558\n00:27:58,170 --> 00:27:58,700\n>> Yeah.\n\n559\n00:27:58,700 --> 00:28:01,000\n>> In the security exams,\nit's not uncommon for\n\n560\n00:28:01,000 --> 00:28:03,210\nthem to give you\nthe graphical user interface.\n\n561\n00:28:03,210 --> 00:28:06,740\nSo you may see that and you may get\na question about some service policy, or\n\n562\n00:28:06,740 --> 00:28:09,333\nwhatever and you gotta browse through\nthe graphical user interface to find it.\n\n563\n00:28:09,333 --> 00:28:11,665\nSo don't just assume\nthat it's gonna be GUI,\n\n564\n00:28:11,665 --> 00:28:14,115\nin fact,\nI mean don't assume it's gonna be CLI.\n\n565\n00:28:14,115 --> 00:28:15,235\n>> You have command, yeah.\n\n566\n00:28:15,235 --> 00:28:18,357\n>> In fact,\nin this particular certification IINS,\n\n567\n00:28:18,357 --> 00:28:21,635\nit's much more likely to be\nthe GUI than it is the CLI.\n\n568\n00:28:21,635 --> 00:28:22,234\n>> Yeah, by far.\n\n569\n00:28:22,234 --> 00:28:25,130\n>> You're not gonna see a lot of\ncommand line information for this one.\n\n570\n00:28:26,920 --> 00:28:29,880\nAll right, so that's pretty much\nwhat you can expect for the exam.\n\n571\n00:28:30,940 --> 00:28:34,830\nAnd that's really all I got on that,\nyou have anything else, Ronnie?\n\n572\n00:28:34,830 --> 00:28:37,430\n>> No you know,\nthat's a good overview for us.\n\n573\n00:28:37,430 --> 00:28:41,650\nIt gives us that ability to\nagain take a look, breathe.\n\n574\n00:28:41,650 --> 00:28:44,220\nI know that that sounds hard, but when\nyou're actually ready to get on the exam,\n\n575\n00:28:44,220 --> 00:28:45,480\nwith that timing.\n\n576\n00:28:45,480 --> 00:28:49,310\nYou've gotta breathe,\nkeep moving in the pace.\n\n577\n00:28:49,310 --> 00:28:51,690\nAgain, the faster,\nin everything that you do,\n\n578\n00:28:51,690 --> 00:28:55,550\nin terms of the practice before-time,\nis gonna help you out, by far.\n\n579\n00:28:55,550 --> 00:28:58,970\nYou know,\nknowledge is the key here and speed.\n\n580\n00:29:00,540 --> 00:29:03,030\n>> All right, well ladies and gentlemen,\nwhy don't we stop here and take a break?\n\n581\n00:29:03,030 --> 00:29:06,280\nAnd when we get back, we're ready\nto jump into the IINS objectives.\n\n582\n00:29:06,280 --> 00:29:10,270\nSo we're gonna jump over to 1.0\nwhich was common security threats,\n\n583\n00:29:10,270 --> 00:29:11,198\nif I remember correctly.\n\n584\n00:29:11,198 --> 00:29:15,050\n>> Yes.\n>> And [LAUGH] so we'll jump into that and\n\n585\n00:29:15,050 --> 00:29:16,690\ncontinue our Cisco adventure from there.\n\n586\n00:29:16,690 --> 00:29:17,310\nHow's that sound, Ronnie?\n\n587\n00:29:17,310 --> 00:29:19,090\n>> Sounds great.\n>> All right, ladies and gentlemen,\n\n588\n00:29:19,090 --> 00:29:20,696\nstay tuned and we'll be back after this.\n\n589\n00:29:20,696 --> 00:29:28,254\n[MUSIC]\n\n590\n00:29:28,254 --> 00:29:30,460\n[LAUGH] All right, welcome back everybody.\n\n591\n00:29:30,460 --> 00:29:33,970\nFor all our live viewers, we've treated\nyou to an excellent conversation about\n\n592\n00:29:33,970 --> 00:29:37,730\nOver the Top, possibly the greatest\nSylvester Stallone movie of all time.\n\n593\n00:29:37,730 --> 00:29:38,510\n>> Possibly.\n\n594\n00:29:38,510 --> 00:29:39,703\n>> But, for the rest of you,\n\n595\n00:29:39,703 --> 00:29:43,050\nyou're back just in time to talk\nabout common security threats.\n\n596\n00:29:43,050 --> 00:29:45,260\nYou know actual useful information.\n\n597\n00:29:45,260 --> 00:29:51,040\nSo the first module of IINS,\nwhat Cisco's really doing\n\n598\n00:29:51,040 --> 00:29:56,140\nis they're trying to basically take,\nreally the whole Security+ certification,\n\n599\n00:29:56,140 --> 00:30:00,080\nyou just gotta grab it right here\ninto one high-level objective.\n\n600\n00:30:00,080 --> 00:30:04,560\nFor those of you that are really\ninterested in learning about security and\n\n601\n00:30:04,560 --> 00:30:08,790\nthe ins and outs of various things that\nare out there, all the really neat details\n\n602\n00:30:08,790 --> 00:30:13,050\nwell, we did a whole show on\nthe CompTIA Security Plus certification.\n\n603\n00:30:13,050 --> 00:30:18,190\nDid something like 20 episodes,\nI mean it's a lot, that goes on about\n\n604\n00:30:18,190 --> 00:30:23,450\nall the various aspects of security and\nit is a excellent source of information.\n\n605\n00:30:23,450 --> 00:30:25,420\nIt's part of your subscription you\ndon't have to pay extra for it.\n\n606\n00:30:25,420 --> 00:30:27,000\nYou can jump over and\nwatch it right now if you want.\n\n607\n00:30:27,000 --> 00:30:30,270\nIt's more fun to stay on the live show,\nthough.\n\n608\n00:30:30,270 --> 00:30:35,200\nBut either way,\nwhat Cisco says is basically, you don't\n\n609\n00:30:35,200 --> 00:30:38,880\nneed to know all the nitty gritty details,\nlike what's done in security plus.\n\n610\n00:30:38,880 --> 00:30:43,570\nBut you do need to have a high level\nunderstanding of the general threats,\n\n611\n00:30:43,570 --> 00:30:46,170\nyou know the stuff that puts\nyour network in danger.\n\n612\n00:30:46,170 --> 00:30:49,850\nAnd so that's what we're gonna talk about\nhere, all the bad things, all right.\n\n613\n00:30:51,050 --> 00:30:53,079\nAnd it's gonna kind of\nsound like fear mongering,\n\n614\n00:30:53,079 --> 00:30:54,980\nyou know like, watching the news.\n\n615\n00:30:54,980 --> 00:30:58,400\nWe're just gonna say bad things after\nbad things, after bad things and\n\n616\n00:30:58,400 --> 00:31:02,120\nit's not that we're trying to build up\nfear, anxiety or anything like that.\n\n617\n00:31:02,120 --> 00:31:05,900\nBut it's just that this first\nsection is the bad stuff and\n\n618\n00:31:05,900 --> 00:31:09,960\nthen every other objective is saying,\nhow do you fix that.\n\n619\n00:31:09,960 --> 00:31:13,070\nHow do you fix all those bad\nthings from the very beginning?\n\n620\n00:31:13,070 --> 00:31:17,280\nAnd by the time we reach the end of\nobjective nine, you've got a tool kit.\n\n621\n00:31:17,280 --> 00:31:20,770\nYou know just a whole selection\nof things available to you\n\n622\n00:31:20,770 --> 00:31:24,130\nthat can help you build a very secure and\nsafe network.\n\n623\n00:31:24,130 --> 00:31:26,465\n>> And surrounding, of course,\nusing Cisco products.\n\n624\n00:31:26,465 --> 00:31:27,733\n>> Of course, of course.\n\n625\n00:31:27,733 --> 00:31:29,000\n>> Yeah.\n[LAUGH]\n\n626\n00:31:29,000 --> 00:31:31,365\n>> All right so, when we begin here,\n\n627\n00:31:31,365 --> 00:31:33,155\nwe start talking about this, right.\n\n628\n00:31:33,155 --> 00:31:36,295\nCisco starts with the assumption\nthat every security professional\n\n629\n00:31:36,295 --> 00:31:37,095\nshould start with here.\n\n630\n00:31:37,095 --> 00:31:38,495\nThere's two assumptions.\n\n631\n00:31:38,495 --> 00:31:42,010\nOne, is that your network\nis gonna be attacked.\n\n632\n00:31:42,010 --> 00:31:46,050\nYou do not have that ability,\nas a networking professional and\n\n633\n00:31:46,050 --> 00:31:49,490\na security professional, to say, hey,\nno one's gonna attack my network,\n\n634\n00:31:49,490 --> 00:31:53,160\nbecause nobody really cares about\nthe stuff that I have on my network here.\n\n635\n00:31:53,160 --> 00:31:55,488\nBut, you start with that\nassumption Cisco does too, okay.\n\n636\n00:31:55,488 --> 00:31:56,617\nThe second thing is,\n\n637\n00:31:56,617 --> 00:32:01,085\nthat you actually start with the fact that\nthat means you have to secure the network.\n\n638\n00:32:01,085 --> 00:32:04,033\nAnd you also have a complexity\ninvolved in that.\n\n639\n00:32:04,033 --> 00:32:05,759\nSo the more complex your network is,\n\n640\n00:32:05,759 --> 00:32:08,890\nthe more different things you're\ngonna actually have to secure.\n\n641\n00:32:08,890 --> 00:32:12,360\nSo you don't have a one size\nfits all I could talk about and\n\n642\n00:32:12,360 --> 00:32:14,140\nthere's no set it and forget it.\n\n643\n00:32:14,140 --> 00:32:18,524\nSo that's what this is about, it's about\nus taking a look at those assumptions that\n\n644\n00:32:18,524 --> 00:32:19,956\nwe all have to understand.\n\n645\n00:32:19,956 --> 00:32:25,670\n>> Now, in various shows,\nI like to quote other IT professionals.\n\n646\n00:32:25,670 --> 00:32:27,248\nAnd in this one-\n>> Are you quoting me?\n\n647\n00:32:27,248 --> 00:32:31,760\n>> I'm going to quote an IT visionary,\nKirk Cobain.\n\n648\n00:32:31,760 --> 00:32:32,460\n>> Kirk Cobain.\n\n649\n00:32:32,460 --> 00:32:35,558\n>> Who said [LAUGH] just\nbecause you're paranoid,\n\n650\n00:32:35,558 --> 00:32:38,122\ndoesn't mean they're not after you.\n\n651\n00:32:38,122 --> 00:32:38,748\n>> [LAUGH] That's true.\n\n652\n00:32:38,748 --> 00:32:40,920\n>> And that's absolutely true.\n\n653\n00:32:40,920 --> 00:32:43,528\nIn computer networking unfortunately,\n\n654\n00:32:43,528 --> 00:32:48,081\nthere are just legions of people who\nare blindly scanning the Internet.\n\n655\n00:32:48,081 --> 00:32:50,500\nIt's not even people in a lot of cases,\nit's worms and\n\n656\n00:32:50,500 --> 00:32:52,550\nviruses that are self propagating.\n\n657\n00:32:52,550 --> 00:32:55,370\nSo you may have done\nabsolutely nothing wrong.\n\n658\n00:32:55,370 --> 00:32:58,420\nYou might have a very small\nlow visibility business.\n\n659\n00:32:58,420 --> 00:33:01,740\nYou might have a website,\nthat's not even in the Google database, or\n\n660\n00:33:01,740 --> 00:33:02,880\nsomething like that.\n\n661\n00:33:02,880 --> 00:33:06,055\nBut these random scans can hit and\nlocate you.\n\n662\n00:33:06,055 --> 00:33:08,755\nAnd if you haven't taken the steps\nto secure your network and\n\n663\n00:33:08,755 --> 00:33:12,195\nprotect from these basic,\nrandom attacks, you'll get compromised.\n\n664\n00:33:12,195 --> 00:33:16,965\nAnd then before you know it, your site\nit is, you know, propagating a virus, or\n\n665\n00:33:16,965 --> 00:33:18,525\nworm, or whatever, and\ninfecting other sites.\n\n666\n00:33:18,525 --> 00:33:21,735\nSo, you can become part of that\nwhole zombie net mentality.\n\n667\n00:33:21,735 --> 00:33:26,175\nA zombie net, is where we have a large\namount of computers, that are infected and\n\n668\n00:33:26,175 --> 00:33:29,640\npropagating a virus, and\nthe owners don't even know about it.\n\n669\n00:33:29,640 --> 00:33:32,510\nThey don't see anything visibly\ndifferent on their computer.\n\n670\n00:33:32,510 --> 00:33:35,720\nUsually it's home users you know\npeople who don't know any better.\n\n671\n00:33:35,720 --> 00:33:38,320\nBut when it's a business\nit's that much worse.\n\n672\n00:33:38,320 --> 00:33:39,710\nBecause you might have hundreds or\n\n673\n00:33:39,710 --> 00:33:42,960\neven thousands of machines that can now\nbe leveraged for malicious activity.\n\n674\n00:33:42,960 --> 00:33:45,623\n>> Yeah to jump off of this\npoint that Don was making.\n\n675\n00:33:45,623 --> 00:33:48,390\nI know way back in 2011\njust three years ago.\n\n676\n00:33:48,390 --> 00:33:52,500\nThey had this big gigantic survey that was\nout there where these five security groups\n\n677\n00:33:52,500 --> 00:33:53,300\non the internet came together.\n\n678\n00:33:53,300 --> 00:33:58,058\nAnd said look, what we believe is after\nmonitoring this for several years is that\n\n679\n00:33:58,058 --> 00:34:03,220\n25% of all of the devices that are\nconnected to the internet, web servers and\n\n680\n00:34:03,220 --> 00:34:05,890\nall these things,\nthey're probably a part of this idea,\n\n681\n00:34:05,890 --> 00:34:07,950\nthat zombie net that you're talking about.\n\n682\n00:34:07,950 --> 00:34:11,600\nSo, in other words, other people have\ncontrol of them and the people that\n\n683\n00:34:11,600 --> 00:34:14,340\nare actually running these don't even\nrealize that that's what's happening.\n\n684\n00:34:14,340 --> 00:34:17,860\nSo, we have to begin with that\nassumption that it's gonna happen and\n\n685\n00:34:17,860 --> 00:34:21,710\nthat we have to protect ourselves, and\nthat's really the key in what we do.\n\n686\n00:34:21,710 --> 00:34:23,890\nSo, you have to know about these\nthreats that are out there.\n\n687\n00:34:23,890 --> 00:34:29,990\nAnd so, if you're not looking out for\nthem, that's when it's gonna get you.\n\n688\n00:34:29,990 --> 00:34:35,140\n>> We're gonna start off with physical\ninstallations, common threats to the-\n\n689\n00:34:35,140 --> 00:34:36,880\n>> Physical installation, right?\n\n690\n00:34:36,880 --> 00:34:40,150\n>> By installation we might be\nreferring to a individual router,\n\n691\n00:34:40,150 --> 00:34:43,123\nbut we're normally referring\nto your entire facility.\n\n692\n00:34:43,123 --> 00:34:46,543\nWhen we start thinking about security\nthreats, it's really easy to,\n\n693\n00:34:46,543 --> 00:34:50,362\nin your mind, you see all these movies\nlike Hackers, and Operation Password,\n\n694\n00:34:50,362 --> 00:34:53,295\nSwordfish, whatever horrible\nJohn Travolta thing is out.\n\n695\n00:34:53,295 --> 00:34:53,810\n>> [LAUGH]\n>> And\n\n696\n00:34:53,810 --> 00:34:58,100\nyou start thinking about\nall these digital attacks.\n\n697\n00:34:58,100 --> 00:35:02,415\nBut physical attacks are much easier\nto carry out and much more effective.\n\n698\n00:35:02,415 --> 00:35:05,950\nSo, what are some examples\nof a physical threat,\n\n699\n00:35:05,950 --> 00:35:08,620\na threat to your physical installation,\nright?\n\n700\n00:35:08,620 --> 00:35:11,665\nThe best example that I can come\nup with is simply Mother Nature.\n\n701\n00:35:11,665 --> 00:35:14,175\nIt's not even a malicious attack,\nit's a random thing.\n\n702\n00:35:14,175 --> 00:35:16,435\nHere in Florida we have hurricanes and\nlightning.\n\n703\n00:35:16,435 --> 00:35:18,365\nWe have lightning like crazy, right?\n\n704\n00:35:18,365 --> 00:35:23,045\nIn other states you might have\nearthquakes, mudslides, tornadoes,\n\n705\n00:35:23,045 --> 00:35:24,456\nvolcanoes, right?\n\n706\n00:35:24,456 --> 00:35:26,498\n>> Wildfires out in California.\n\n707\n00:35:26,498 --> 00:35:30,665\n>> And for our international viewers,\nyou might have monsoons and typhoons.\n\n708\n00:35:30,665 --> 00:35:32,112\nI don't even know the difference.\n\n709\n00:35:32,112 --> 00:35:35,032\nThere's all sorts of stuff\nlike that that's out there.\n\n710\n00:35:35,032 --> 00:35:39,542\nAnd these are natural phenomenon,\nweather phenomenon,\n\n711\n00:35:39,542 --> 00:35:41,602\nwhatever you call it,\nand you can't stop them.\n\n712\n00:35:41,602 --> 00:35:42,532\nYou can't prevent them.\n\n713\n00:35:42,532 --> 00:35:45,902\nAll you can do is plan for\nit and take steps to prevent it.\n\n714\n00:35:45,902 --> 00:35:49,740\nSo, one of the best steps we can do\nis to have redundant data centers.\n\n715\n00:35:49,740 --> 00:35:51,514\nSo I've got a data center\nthat's here in Florida, and\n\n716\n00:35:51,514 --> 00:35:52,873\nI've got another one that's in London.\n\n717\n00:35:52,873 --> 00:35:57,500\nLondon, England completely different\ncountry, different continent, great.\n\n718\n00:35:57,500 --> 00:35:59,130\nThat costs a lot of money.\n\n719\n00:35:59,130 --> 00:36:01,990\nSo if you don't have that kind of\nmoney on hand, what can you do?\n\n720\n00:36:01,990 --> 00:36:05,310\nTaking these steps to\nprotect your environment or\n\n721\n00:36:05,310 --> 00:36:08,320\nat least buy insurance so you can\nrecover when a disaster does occur.\n\n722\n00:36:09,370 --> 00:36:13,780\n>> To go into a more microlevel on that\nas well even inside of a regular building\n\n723\n00:36:13,780 --> 00:36:19,120\nwhen we do have security all throughout\nis when we implement it properly.\n\n724\n00:36:19,120 --> 00:36:21,480\nThe very fact that we actually\nlock the doors that we say.\n\n725\n00:36:21,480 --> 00:36:25,270\nSo when we set up our routers and our\nswitches we don't want anybody just being\n\n726\n00:36:25,270 --> 00:36:29,990\nable to walk in to pull out a cable or\nto unplug it.\n\n727\n00:36:29,990 --> 00:36:31,715\n>> A couple of hard drives.\n\n728\n00:36:31,715 --> 00:36:35,010\n[LAUGH]\n>> Just a couple, to be able to do that.\n\n729\n00:36:35,010 --> 00:36:38,780\nSo locking the doors here is one\nof the simplest forms of physical\n\n730\n00:36:38,780 --> 00:36:40,140\nsecurity that we can do.\n\n731\n00:36:40,140 --> 00:36:42,950\nAlso implementing things\nlike video monitoring.\n\n732\n00:36:42,950 --> 00:36:44,680\nNow what are we really preventing?\n\n733\n00:36:44,680 --> 00:36:48,860\nWe're preventing that idea of manmade\ntypes of attacks that can go on\n\n734\n00:36:48,860 --> 00:36:51,460\nby simply doing stuff like that.\n\n735\n00:36:51,460 --> 00:36:53,760\nBut a lot of times in small\nfacilities we don't think about it.\n\n736\n00:36:53,760 --> 00:36:57,080\nWe just go, nobody that works for\nme is gonna actually go in an attack that.\n\n737\n00:36:57,080 --> 00:37:00,350\nOr somebody walking through my building is\nnot just gonna walk behind a door and do.\n\n738\n00:37:00,350 --> 00:37:01,770\nWell you just don't know.\n\n739\n00:37:01,770 --> 00:37:04,540\nSo implementing even just basic\nphysical security like that.\n\n740\n00:37:04,540 --> 00:37:06,373\nIt's a good thing for us to do.\n\n741\n00:37:06,373 --> 00:37:07,800\n>> Yeah.\n\n742\n00:37:07,800 --> 00:37:08,880\nThe story that I always tell,\n\n743\n00:37:08,880 --> 00:37:14,020\nthere was a data center out in Denver,\nColorado, and I won't mention the company.\n\n744\n00:37:14,020 --> 00:37:16,090\nIt's not necessarily their fault.\n\n745\n00:37:16,090 --> 00:37:20,410\nBut they had a state of the art,\nmulti-million dollar co-location facility,\n\n746\n00:37:20,410 --> 00:37:24,090\na facility where many,\nmany customers would host their servers.\n\n747\n00:37:24,090 --> 00:37:27,490\nAnd at that facility,\nthey had redundant power,\n\n748\n00:37:27,490 --> 00:37:29,850\npower coming in from two\ndifferent grids coming in.\n\n749\n00:37:29,850 --> 00:37:33,960\nThey had like five different\ninternet backbone connections, so\n\n750\n00:37:33,960 --> 00:37:35,910\nmassive internet connectivity.\n\n751\n00:37:35,910 --> 00:37:40,310\nThey had backup generators exterior,\nones that are outside the building that\n\n752\n00:37:40,310 --> 00:37:42,772\nwere huge generators that keep\nthem running for days on end.\n\n753\n00:37:42,772 --> 00:37:46,320\nThey had taken a lot of precautions.\n\n754\n00:37:46,320 --> 00:37:50,520\nThey had a outage, a significant outage,\nlasted for several hours.\n\n755\n00:37:50,520 --> 00:37:54,390\nWhere what happened was the attackers,\n\n756\n00:37:54,390 --> 00:37:59,760\nwhich to my knowledge they never caught\ncrept up to the outside of the building.\n\n757\n00:37:59,760 --> 00:38:02,680\nAnd for an air conditioning system,\nwhich for a data center,\n\n758\n00:38:02,680 --> 00:38:04,420\nyou gotta have an air conditioning system.\n\n759\n00:38:04,420 --> 00:38:08,360\nThe heat the servers generate can just\nbuild up and you go into thermal shutdown.\n\n760\n00:38:08,360 --> 00:38:13,310\nAnd what they did is they took rebar and\nrebar is really inexpensive metal-.\n\n761\n00:38:13,310 --> 00:38:14,260\n>> Rods.\n>> Rods.\n\n762\n00:38:14,260 --> 00:38:18,610\nYeah, I was about to say bars,\nusing the name in the definition.\n\n763\n00:38:18,610 --> 00:38:21,860\nAnyhow, you can find it\nat any construction site.\n\n764\n00:38:21,860 --> 00:38:23,720\nAnd they crept up to the outside.\n\n765\n00:38:23,720 --> 00:38:28,450\nAnd every air conditioning system has,\nwhat are they, the blowers or whatever?\n\n766\n00:38:28,450 --> 00:38:30,758\nThe big,\nthe giant fans outside the building.\n\n767\n00:38:30,758 --> 00:38:34,360\nAnd theirs weren't located on the roof\nlike most commercial companies,\n\n768\n00:38:34,360 --> 00:38:36,510\nit was located down on the ground.\n\n769\n00:38:36,510 --> 00:38:41,840\nAnd they basically just stuck one\nrebar rod into each of the air hand,\n\n770\n00:38:41,840 --> 00:38:43,950\nblowers or fans, whatever they call it.\n\n771\n00:38:43,950 --> 00:38:46,200\nStuck one in each,\nto stop the fans from spinning.\n\n772\n00:38:46,200 --> 00:38:46,790\nAll right?\n\n773\n00:38:46,790 --> 00:38:48,630\nAnd then they just ran and that was it.\n\n774\n00:38:48,630 --> 00:38:52,710\nWell when the fans stopped spinning,\nthe air stops moving.\n\n775\n00:38:52,710 --> 00:38:55,880\nThe data center got hotter and hotter and\nit went into thermal shut down,\n\n776\n00:38:55,880 --> 00:38:57,220\nthe server shut down.\n\n777\n00:38:57,220 --> 00:39:01,500\nSo the problem there, the lesson\nthat we learned is it doesn't take\n\n778\n00:39:01,500 --> 00:39:06,760\na sophisticated hacker, anybody can grab\na piece of metal and stick it in a fan.\n\n779\n00:39:06,760 --> 00:39:09,460\nThey shouldn't have been able to\nget to the fans in the first place.\n\n780\n00:39:09,460 --> 00:39:13,210\nThere should have been barbed wire,\nchain link fence, something, razor wire,\n\n781\n00:39:13,210 --> 00:39:15,520\nI don't know, guard dogs,\nmachine guns, something.\n\n782\n00:39:15,520 --> 00:39:17,765\nThose little laser beams, right?\n\n783\n00:39:17,765 --> 00:39:22,290\n[LAUGH] Something so that when somebody\ntried to get to those air conditioning\n\n784\n00:39:22,290 --> 00:39:24,860\nunits that they couldn't have even\ngotten there in the first place.\n\n785\n00:39:24,860 --> 00:39:29,340\nThose are the things that we need to think\nabout with physical security, right?\n\n786\n00:39:29,340 --> 00:39:33,339\nOther things that Cisco calls out\nare things like biometric scanners\n\n787\n00:39:34,370 --> 00:39:37,940\nfingerprint, retinal scan, palm prints.\n\n788\n00:39:37,940 --> 00:39:40,530\n>> I'm trying to think of another one,\nbut I think you named them all.\n\n789\n00:39:40,530 --> 00:39:41,985\n>> Blood sample.\n\n790\n00:39:41,985 --> 00:39:46,030\n[LAUGH] Whatever it is to make sure that\nyou are who you say you are to allow you\n\n791\n00:39:46,030 --> 00:39:49,160\nto enter into a building or\na server room or a data center.\n\n792\n00:39:49,160 --> 00:39:53,897\nPhysical locks, security officers, just\nphysical people patrolling the building,\n\n793\n00:39:53,897 --> 00:39:55,893\nsecurity cameras that kinda stuff.\n\n794\n00:39:55,893 --> 00:39:58,424\nAll can contribute to\nthat physical security.\n\n795\n00:39:58,424 --> 00:40:01,523\n>> I know that scene in Mission Impossible\nthe first one where you know,\n\n796\n00:40:01,523 --> 00:40:03,509\nTom Cruise drops down through the ceiling.\n\n797\n00:40:03,509 --> 00:40:06,291\nIt's always one of those things\nthat you think like, wow, that's,\n\n798\n00:40:06,291 --> 00:40:08,664\nthat's pretty hefty, but\nwould somebody actually do it?\n\n799\n00:40:08,664 --> 00:40:09,381\nPeople do it.\n\n800\n00:40:09,381 --> 00:40:14,450\nPeople do actually crawl through vents and\nopenings that they can get access to and\n\n801\n00:40:14,450 --> 00:40:17,850\nwe don't even think about\nit at all until it happens.\n\n802\n00:40:17,850 --> 00:40:20,930\nAnd then like, how the heck did they\nget through these secured walls and\n\n803\n00:40:20,930 --> 00:40:24,960\nthese buildings,well through the roofs and\nthrough the vents that were in them.\n\n804\n00:40:24,960 --> 00:40:25,600\nThat's pretty neat.\n\n805\n00:40:25,600 --> 00:40:28,940\n>> Yeah and you know modern security\nsystems can be pretty sophisticated.\n\n806\n00:40:28,940 --> 00:40:33,710\nThe solution to something like\nthat if Tom Cruise is gonna\n\n807\n00:40:33,710 --> 00:40:38,550\nbreak in, well there's many solutions\nI suppose but the easiest you know,\n\n808\n00:40:38,550 --> 00:40:42,090\nmost modern motion detectors can\nactually sense temperature changes.\n\n809\n00:40:42,090 --> 00:40:44,740\nSo it's pretty hard to\nmask a temperature change.\n\n810\n00:40:44,740 --> 00:40:48,280\nWhen you enter a room it changes\nthe temperature of that room.\n\n811\n00:40:48,280 --> 00:40:50,180\nSo a lot them will detect that so\nit's easy enough.\n\n812\n00:40:50,180 --> 00:40:54,320\nBut, you know, most of us aren't\noperating at that level, right.\n\n813\n00:40:54,320 --> 00:40:58,480\nWhat was it, it was like undercover\nDEA operatives, or something right.\n\n814\n00:40:58,480 --> 00:41:01,160\nSo that's pretty sensitive\ninformation there.\n\n815\n00:41:01,160 --> 00:41:04,880\nIf you were to break into the IT Pro TV\nnetwork what would you get?\n\n816\n00:41:04,880 --> 00:41:07,560\nWell you'd get our shows I guess.\n\n817\n00:41:07,560 --> 00:41:08,690\nThere you go.\n\n818\n00:41:08,690 --> 00:41:14,100\nAnd you'd get maybe I guess the most\nsensitive information we have\n\n819\n00:41:14,100 --> 00:41:16,380\nis our users' email addresses.\n\n820\n00:41:16,380 --> 00:41:17,810\nRight?\n'Cuz we don't store any\n\n821\n00:41:17,810 --> 00:41:19,170\ncredit card information or\nanything like that.\n\n822\n00:41:19,170 --> 00:41:24,290\nSo our data is not sensitive enough to\nwarrant having that level of security but\n\n823\n00:41:24,290 --> 00:41:26,150\nit's up to you to evaluate\nyour environment and\n\n824\n00:41:26,150 --> 00:41:28,290\ndetermine, do you need\nthat level of security?\n\n825\n00:41:28,290 --> 00:41:29,730\nAnd you very may well need it.\n\n826\n00:41:29,730 --> 00:41:34,460\n>> Yeah, physical security is one of\nthe most overlooked aspects of security\n\n827\n00:41:34,460 --> 00:41:38,360\nwhen you think about networking because\nwe always see that again in the movies,\n\n828\n00:41:38,360 --> 00:41:40,480\nwhere it's always an outside attack.\n\n829\n00:41:40,480 --> 00:41:43,470\nBut physical attacks usually\nhappen from the inside,\n\n830\n00:41:43,470 --> 00:41:46,240\nsome disgruntled worker that's\nnormally working inside.\n\n831\n00:41:46,240 --> 00:41:49,660\nOr somebody that actually has worked\ntheir way through social engineering\n\n832\n00:41:49,660 --> 00:41:51,140\nto get to the inside and do the attack.\n\n833\n00:41:52,300 --> 00:41:54,030\n>> So let's tie this into the second one,\nall right?\n\n834\n00:41:54,030 --> 00:41:55,100\n>> Okay, sure.\n>> The second objective.\n\n835\n00:41:55,100 --> 00:41:58,890\nThe second objective here is mitigation\nmethods for common attacks, right?\n\n836\n00:41:58,890 --> 00:42:02,450\nSo we've already talked about some ways\nto stop that physical attack, right?\n\n837\n00:42:02,450 --> 00:42:07,400\nThe locks on the doors and so on,\nthere's plenty of other devices we can use\n\n838\n00:42:07,400 --> 00:42:10,170\nto stop network attacks,\npeople from coming in over the network.\n\n839\n00:42:10,170 --> 00:42:14,820\nAnd this is what we normally think of,\nfirewalls, intrusion prevention, VPN,\n\n840\n00:42:14,820 --> 00:42:15,660\nwe need all that stuff.\n\n841\n00:42:16,830 --> 00:42:21,230\nBut if somebody is physically inside of\nyour building they're behind the firewall,\n\n842\n00:42:21,230 --> 00:42:24,990\nthey're behind the IPS,\nthey're behind the VPN.\n\n843\n00:42:24,990 --> 00:42:28,650\nSo they've already gotten past all of that\nif they're physically in your building.\n\n844\n00:42:28,650 --> 00:42:31,540\nIf they can just walk right up to\na computer, they don't need to get through\n\n845\n00:42:31,540 --> 00:42:33,500\nthe firewall,\nthat computer's already behind it.\n\n846\n00:42:33,500 --> 00:42:37,260\nSo that's where we need to\nthink of defense in depth.\n\n847\n00:42:37,260 --> 00:42:38,770\nCisco loves this term.\n\n848\n00:42:38,770 --> 00:42:39,740\nDefense in depth.\n\n849\n00:42:39,740 --> 00:42:41,150\nYou don't just need one solution.\n\n850\n00:42:41,150 --> 00:42:44,210\nYou can't just buy one really\nexpensive firewall and\n\n851\n00:42:44,210 --> 00:42:47,110\nsay that's all I am going to use I\ndon't need anything else, alright.\n\n852\n00:42:47,110 --> 00:42:51,340\nIt's always better to have either\nmultiple of the same devices or\n\n853\n00:42:51,340 --> 00:42:52,140\nseveral different ones.\n\n854\n00:42:52,140 --> 00:42:55,080\nYou might have a firewall between you and\nthe internet; but\n\n855\n00:42:55,080 --> 00:42:59,200\nthen you might run software firewalls on\nall of your workstations and servers also.\n\n856\n00:42:59,200 --> 00:43:04,085\nAnd you might have an IPS that's\nin-between you and the internet.\n\n857\n00:43:04,085 --> 00:43:07,995\nBut then you might have a host based IPS,\nor a HPPTs.\n\n858\n00:43:07,995 --> 00:43:09,875\nA host based intrusion prevention system,\n\n859\n00:43:09,875 --> 00:43:12,425\nthat runs on each of your machines and\nservers.\n\n860\n00:43:12,425 --> 00:43:13,990\nA lot of organizations do.\n\n861\n00:43:13,990 --> 00:43:17,440\nSo by doing that, by providing\nmultiple layers of security, or\n\n862\n00:43:17,440 --> 00:43:22,280\nmulti tiered security, you insure\nthat if an attacker get through one,\n\n863\n00:43:22,280 --> 00:43:24,530\nthat they still have others\nthey got to get through,\n\n864\n00:43:24,530 --> 00:43:27,780\nmultiple tiers of security\n>> Yeah, I always talk about this as being\n\n865\n00:43:27,780 --> 00:43:31,895\nalso like a way to bore somebody to death\nbefore they get access to what they want.\n\n866\n00:43:31,895 --> 00:43:35,270\n[LAUGHTER] And they keep hitting one\nlayer of security after another.\n\n867\n00:43:35,270 --> 00:43:36,140\nAfter a while they're gonna say,\n\n868\n00:43:36,140 --> 00:43:38,590\nis this really worth me trying\nto continue to go forward?\n\n869\n00:43:38,590 --> 00:43:41,800\nAnd they really don't know how many\nlayers of security that you've actually\n\n870\n00:43:41,800 --> 00:43:42,860\nimplemented.\n\n871\n00:43:42,860 --> 00:43:46,450\nSo in this point here, you can actually do\nthat, where you're literally leading them\n\n872\n00:43:46,450 --> 00:43:50,190\nand again, a movie analogy is coming\nup for me again for some reason.\n\n873\n00:43:50,190 --> 00:43:52,360\nThe network, what is it called?\n\n874\n00:43:52,360 --> 00:43:53,550\nThe National Treasure?\n\n875\n00:43:53,550 --> 00:43:57,630\nWhere one thicker thing led to another\none, they kept having to break through and\n\n876\n00:43:57,630 --> 00:43:59,910\nthen that one actually just\ndidn't lead to actual treasure,\n\n877\n00:43:59,910 --> 00:44:00,860\nit actually led to something else.\n\n878\n00:44:00,860 --> 00:44:02,710\nAnd that's the same idea here.\n\n879\n00:44:02,710 --> 00:44:07,510\nDefense in depth again challenges them at\nevery stage that they break through and\n\n880\n00:44:07,510 --> 00:44:10,061\nhopefully they'll end up\nfinding that national treasure.\n\n881\n00:44:10,061 --> 00:44:12,419\n[LAUGH]\n>> I love how when you talk about getting\n\n882\n00:44:12,419 --> 00:44:16,309\nbored to death, you brought up a Nicholas\nCage movie, that's rather appropriate.\n\n883\n00:44:16,309 --> 00:44:19,280\n[LAUGH] You know, and\njust a side story, so I.\n\n884\n00:44:20,550 --> 00:44:22,080\nI don't trust cloud services.\n\n885\n00:44:22,080 --> 00:44:24,550\nI use them but I don't trust them, right.\n\n886\n00:44:24,550 --> 00:44:27,360\nAnd that's important so you should never,\nnever trust companies that you've\n\n887\n00:44:27,360 --> 00:44:30,610\nnever actually talked to\nsomebody on the phone with.\n\n888\n00:44:30,610 --> 00:44:34,799\nWhich, that being said, if any of you guys\ndon't trust ITProTv shoot me an email and\n\n889\n00:44:34,799 --> 00:44:36,600\nI'll give you a phone call.\n\n890\n00:44:36,600 --> 00:44:38,780\nI don't put my phone\nnumber on the website,\n\n891\n00:44:38,780 --> 00:44:43,396\nthat doesn't mean I won't\ntalk to you by phone.\n\n892\n00:44:43,396 --> 00:44:46,350\n[LAUGH] So anyhow what I like to do is,\n\n893\n00:44:46,350 --> 00:44:48,810\nI like to keep all of my\nfiles stored at home.\n\n894\n00:44:48,810 --> 00:44:51,860\nBut I like to have remote access to them.\n\n895\n00:44:51,860 --> 00:44:53,680\nSo a Cloud is the great solution.\n\n896\n00:44:53,680 --> 00:44:55,280\nBut I don't want to put\nall my files in the Cloud.\n\n897\n00:44:55,280 --> 00:44:57,960\nSo I run an FTP server at home and\n\n898\n00:44:57,960 --> 00:45:00,870\nwe all should know by this\npoint that FTP is not secure.\n\n899\n00:45:00,870 --> 00:45:02,930\nRight?\nIt's unencrypted data.\n\n900\n00:45:02,930 --> 00:45:08,780\nSo when I ran this FTP server I\noriginally set it up as FTP S, right?\n\n901\n00:45:08,780 --> 00:45:11,640\nSo that's FTP over SSL and so\n\n902\n00:45:11,640 --> 00:45:16,950\nI would connect with a regular FTP\nconnection and then engage TLS,\n\n903\n00:45:16,950 --> 00:45:20,020\ntransport layer security to encrypt\nmy session and tranfer my files.\n\n904\n00:45:20,020 --> 00:45:22,320\nIt's secure, it's safe,\nand it's fine, right?\n\n905\n00:45:22,320 --> 00:45:26,860\nBut as I left that server up and running,\nit runs on port 21 it sits there.\n\n906\n00:45:26,860 --> 00:45:32,220\nI would get port scans that were\nhitting that server all the time and\n\n907\n00:45:32,220 --> 00:45:34,730\npeople trying to login,\nright, brute forces.\n\n908\n00:45:34,730 --> 00:45:37,920\nI would have like a thousand attempts\nat the root user logging in.\n\n909\n00:45:37,920 --> 00:45:38,780\nAnd stuff like that.\n\n910\n00:45:38,780 --> 00:45:39,580\nJust in an hour.\n\n911\n00:45:39,580 --> 00:45:45,550\nSo you'd have these outrageous levels of\npeople trying to get into your system.\n\n912\n00:45:45,550 --> 00:45:49,140\nAnd that kind of stuff,\nwhile it wasn't effective,\n\n913\n00:45:49,140 --> 00:45:52,350\nthey couldn't get into my system, it's\nstill kind of annoying that it happens.\n\n914\n00:45:52,350 --> 00:45:53,730\nPeople are trying.\n\n915\n00:45:53,730 --> 00:45:57,730\nSo I ended up switching the server\nover to SFTP, to secure FTP.\n\n916\n00:45:57,730 --> 00:46:01,110\nIn other words, you've got to\nbuild an SSH tunnel first and\n\n917\n00:46:01,110 --> 00:46:04,710\nthen do F2P over SSH,\nit's a higher level of encryption.\n\n918\n00:46:04,710 --> 00:46:08,130\nWell as soon as I did that\nthe port scan still happened.\n\n919\n00:46:08,130 --> 00:46:09,640\n>> Yeah.\n>> People are always going to scan you,\n\n920\n00:46:09,640 --> 00:46:11,430\nbut the brute force attempts die out.\n\n921\n00:46:11,430 --> 00:46:14,690\nAnd the reason is,\nif somebody's doing a random attack,\n\n922\n00:46:14,690 --> 00:46:18,120\nif they see something like that,\nthey see SFTP, they're like,\n\n923\n00:46:18,120 --> 00:46:20,490\nyou know what,\nlet me move on to easier targets, right?\n\n924\n00:46:20,490 --> 00:46:22,290\nBecause there's easier\ntargets that are out there.\n\n925\n00:46:22,290 --> 00:46:24,220\nSo if it's a random attack.\n\n926\n00:46:24,220 --> 00:46:27,220\nThey'll move on pretty quickly\nfrom a well secured network.\n\n927\n00:46:27,220 --> 00:46:28,940\nNow a targeted attack,\n\n928\n00:46:28,940 --> 00:46:31,670\nif they're specifically focusing\non you that's not gonna stop them.\n\n929\n00:46:31,670 --> 00:46:34,320\nThey're gonna continue to try and\npenetrate that system.\n\n930\n00:46:34,320 --> 00:46:38,430\nBut definitely take steps\nto eliminate the common,\n\n931\n00:46:38,430 --> 00:46:40,235\neasy stuff that attackers are looking for.\n\n932\n00:46:40,235 --> 00:46:44,650\n>> Yeah, a lot of the time even simple\nsigns, right, that tell people that hey,\n\n933\n00:46:44,650 --> 00:46:45,890\nthey shouldn't be here.\n\n934\n00:46:45,890 --> 00:46:48,220\nAgain, posting, like,\naccess is prohibited.\n\n935\n00:46:48,220 --> 00:46:51,770\nYou may not think that's effective,\nbut it's fairly effective.\n\n936\n00:46:51,770 --> 00:46:54,243\nEspecially, when the person,\nnot really looking for you,\n\n937\n00:46:54,243 --> 00:46:56,098\nthey know they're not\nsupposed to be there.\n\n938\n00:46:56,098 --> 00:46:58,011\nAgain, it mitigates that fairly easily.\n\n939\n00:46:58,011 --> 00:47:00,705\n>> You know, there's, actually,\ntwo reasons for doing that.\n\n940\n00:47:00,705 --> 00:47:05,380\nRight, so, if you Telnet or SSH into\na router, or whatever, you should display\n\n941\n00:47:05,380 --> 00:47:08,840\na banner that says unauthorized\naccess is prohibited or whatever.\n\n942\n00:47:08,840 --> 00:47:09,430\nRight.\n\n943\n00:47:09,430 --> 00:47:12,530\nNow if you're an attacker you'd\nprobably just ignore that.\n\n944\n00:47:12,530 --> 00:47:13,200\nStupid sign.\n\n945\n00:47:13,200 --> 00:47:15,490\nYou know?\nAnd then try and login right?\n\n946\n00:47:15,490 --> 00:47:20,075\nBut if you're the victim if you're the one\nwho's being attacked in the United States,\n\n947\n00:47:20,075 --> 00:47:22,865\nnow, it is different in other countries,\nbut in the United States,\n\n948\n00:47:22,865 --> 00:47:27,955\nwhen you take a router, and you plug it\ninto the internet, the United States court\n\n949\n00:47:27,955 --> 00:47:33,230\nsystem views that as you providing\na service on the public Internet and\n\n950\n00:47:33,230 --> 00:47:39,060\nthat means that an attacker, if they\ntry in Telnet or SSH into that router,\n\n951\n00:47:39,060 --> 00:47:42,990\nit is a plausible defense for them to say,\nwell, it was on the internet.\n\n952\n00:47:42,990 --> 00:47:44,040\n>> Yeah.\n>> I thought that was available for\n\n953\n00:47:44,040 --> 00:47:44,550\nmy use.\n\n954\n00:47:44,550 --> 00:47:45,820\nIt's a public internet, right?\n\n955\n00:47:45,820 --> 00:47:46,850\nPublic network.\n\n956\n00:47:46,850 --> 00:47:50,110\nAnd they'll get off,\nyou won't be able to prosecute.\n\n957\n00:47:50,110 --> 00:47:54,250\nBut if you have a banner that displays and\nsays, unauthorized access prohibited.\n\n958\n00:47:54,250 --> 00:47:56,470\nOr this if for ITProTv use only or\n\n959\n00:47:56,470 --> 00:48:01,500\nwhatever, just displaying that banner\nis what's called due diligence.\n\n960\n00:48:01,500 --> 00:48:03,322\n>> Right.\n>> You're doing your due diligence and\n\n961\n00:48:03,322 --> 00:48:06,499\nyou're notifying that attacker\nyou're not supposed to be here.\n\n962\n00:48:06,499 --> 00:48:09,496\nIf they continue to enter the system,\n\n963\n00:48:09,496 --> 00:48:13,640\nnow it's unlawful breaking and\nentering, right?\n\n964\n00:48:13,640 --> 00:48:16,560\nThey've gone into your network when\nthey knew they weren't suppose to.\n\n965\n00:48:16,560 --> 00:48:21,850\nSo as stupid as those banners seem, and\nas pointless and ineffective as they are.\n\n966\n00:48:21,850 --> 00:48:24,470\nThere's a legal precedence for\nit in the United States,\n\n967\n00:48:24,470 --> 00:48:26,720\nright so\nit's real important to have those.\n\n968\n00:48:26,720 --> 00:48:30,560\nThey're silly, they're lame, they don't\nstop an attacker, but when it comes to\n\n969\n00:48:30,560 --> 00:48:33,650\nprosecution, when it comes to going to\ncourt, you'll wish you had them there.\n\n970\n00:48:33,650 --> 00:48:36,010\n>> Yeah.\nYou know I used to hear somebody actually\n\n971\n00:48:36,010 --> 00:48:39,020\nsaying that they read about a case,\nI don't know, I didn't read it, but\n\n972\n00:48:39,020 --> 00:48:41,760\nwhere it said, welcome In stead of.\n\n973\n00:48:41,760 --> 00:48:44,210\n>> Oh.\n>> Yeah, welcome to users or\n\n974\n00:48:44,210 --> 00:48:44,830\nwhoever it was.\n\n975\n00:48:44,830 --> 00:48:48,450\nAnd they said that they were\nable to use that as a defense.\n\n976\n00:48:48,450 --> 00:48:53,450\nSo having proper signage, even on\nyour router interface, on your router\n\n977\n00:48:53,450 --> 00:48:58,260\nIn terms of getting access to it, or even\njust in that room, right on the physical\n\n978\n00:48:58,260 --> 00:49:02,380\nentry of those places here, you wanna\nmake sure that that's clearly displayed.\n\n979\n00:49:02,380 --> 00:49:05,020\nAgain, good due diligence for us, yep.\n\n980\n00:49:05,020 --> 00:49:09,050\n>> All right, so we're gonna talk about\nother mitigation methods as we go, but\n\n981\n00:49:09,050 --> 00:49:12,020\nthat's kind of an example of some of\nthe things that are available for us, and\n\n982\n00:49:12,020 --> 00:49:13,030\nthey're pretty easy to do.\n\n983\n00:49:13,030 --> 00:49:15,310\nEvery Cisco router supports\ndisplaying a banner,\n\n984\n00:49:15,310 --> 00:49:19,530\nwhen someone tries to connect to it and\nwe'll see that in objective two.\n\n985\n00:49:19,530 --> 00:49:22,610\nBut, you know, those are the things\nwe really need to think about, right?\n\n986\n00:49:22,610 --> 00:49:25,580\nSome of it's common sense,\nsome of it isn't.\n\n987\n00:49:26,740 --> 00:49:28,560\nAll right, Ronnie,\nthe next couple of things we've got,\n\n988\n00:49:28,560 --> 00:49:31,865\nwe've got email based threats and\nweb based attacks, and so on.\n\n989\n00:49:31,865 --> 00:49:33,695\nWe probably have enough time for email.\n\n990\n00:49:33,695 --> 00:49:34,955\nRight?\n>> Sure.\n\n991\n00:49:34,955 --> 00:49:37,860\n>> Email based threats really\npicking up in popularity, lately,\n\n992\n00:49:37,860 --> 00:49:39,585\nthe last couple of years.\n\n993\n00:49:39,585 --> 00:49:43,757\n>> Especially with the onslaught\nof spam and everything.\n\n994\n00:49:43,757 --> 00:49:46,707\nPeople again are actually using emails to\n\n995\n00:49:46,707 --> 00:49:49,837\ndeliver all kinds of different types\nof threats that are out there.\n\n996\n00:49:49,837 --> 00:49:50,927\nAnd what are they targeting?\n\n997\n00:49:50,927 --> 00:49:52,207\nThey're targeting, again,\n\n998\n00:49:52,207 --> 00:49:57,023\npeople that are unsuspecting, they don't\nknow that it's actually happening here.\n\n999\n00:49:57,023 --> 00:49:58,043\nAnd so when I think about it,\n\n1000\n00:49:58,043 --> 00:50:00,983\nI think about the very first time\nI ran into an attack like this,\n\n1001\n00:50:00,983 --> 00:50:04,143\nwhich I got an email from a friend,\nand it had a little tiny icon.\n\n1002\n00:50:04,143 --> 00:50:06,883\nIt looked like George Jetson.\n\n1003\n00:50:06,883 --> 00:50:09,793\nIt was a little gif icon that it was on.\n\n1004\n00:50:09,793 --> 00:50:12,243\nIt's from a friend and they say,\n\n1005\n00:50:12,243 --> 00:50:15,773\nhey, click on this link to see this\nfunny video, but you click on it and\n\n1006\n00:50:15,773 --> 00:50:18,390\nnothing would actually happen,\nat least that I didn't know.\n\n1007\n00:50:18,390 --> 00:50:21,510\nBut something was actually happening in\nthe background, that essentially took my\n\n1008\n00:50:21,510 --> 00:50:27,390\nentire Windows address book, and emailed\nout to every single contact that I had.\n\n1009\n00:50:27,390 --> 00:50:30,320\nAnd you may go, well, Ronny,\nhow did you let that happen?\n\n1010\n00:50:30,320 --> 00:50:34,700\nWell this was back in 1998 or\nsomething like that, and\n\n1011\n00:50:34,700 --> 00:50:37,110\nI didn't know much about it at all.\n\n1012\n00:50:37,110 --> 00:50:39,170\nAnd so that's where it actually got me.\n\n1013\n00:50:39,170 --> 00:50:41,820\nBut again, these are sophisticated now.\n\n1014\n00:50:41,820 --> 00:50:44,710\nThey're even targeting the way\nthat they can get you,\n\n1015\n00:50:44,710 --> 00:50:47,100\nand with as much information as we have.\n\n1016\n00:50:47,100 --> 00:50:49,290\nIt's amazing how well they target, so\n\n1017\n00:50:49,290 --> 00:50:52,710\nwhen you hear about things like\nphshing scams that are out there.\n\n1018\n00:50:52,710 --> 00:50:54,090\nThese are the ones you think about.\n\n1019\n00:50:54,090 --> 00:50:55,230\n>> You have a graphic to show us here.\n\n1020\n00:50:55,230 --> 00:50:58,600\n>> I was looking to see if I could find\nsome kind of statistics or whatever.\n\n1021\n00:50:58,600 --> 00:51:00,740\nI'm not really finding\nanything jumping out at me.\n\n1022\n00:51:00,740 --> 00:51:06,600\nBut I read a report a while back, which is\nwhat I was really looking for, that was\n\n1023\n00:51:06,600 --> 00:51:12,200\nsaying the number of emails that are sent,\nlegitimate versus non-legitimate.\n\n1024\n00:51:12,200 --> 00:51:12,860\nOr illegitimate?\n\n1025\n00:51:12,860 --> 00:51:13,460\nWhatever.\n\n1026\n00:51:13,460 --> 00:51:15,790\nBut it was saying that\nsomething like 90% of emails.\n\n1027\n00:51:15,790 --> 00:51:16,767\n>> Over 90%.\n\n1028\n00:51:16,767 --> 00:51:18,480\n>> Were all just junk.\n\n1029\n00:51:18,480 --> 00:51:21,030\nThey were phshing attempts and\nspam and ads and stuff.\n\n1030\n00:51:21,030 --> 00:51:25,420\nSo, you know, the email network as\na whole, has really just kind of degraded.\n\n1031\n00:51:25,420 --> 00:51:29,430\nNow fortunately, a lot of organizations\nimplement things like spam and\n\n1032\n00:51:29,430 --> 00:51:33,120\nvirus filters, and things, so\nthat you don't see it you know.\n\n1033\n00:51:33,120 --> 00:51:39,370\nMy email, we use Google Apps for\nour whole email solution with ITProTV,\n\n1034\n00:51:39,370 --> 00:51:42,610\nand Google does a great job of\nfiltering out those malicious emails.\n\n1035\n00:51:42,610 --> 00:51:46,390\nSo they don't even make it to my inbox,\nit's a rare day that I get any span.\n\n1036\n00:51:46,390 --> 00:51:48,940\nThere's other companies\nout there like Barracuda,\n\n1037\n00:51:48,940 --> 00:51:52,910\nthat make just top of the line email and\nspam filters.\n\n1038\n00:51:52,910 --> 00:51:56,080\nSo that again, you know you just\ndon't get them into your inbox.\n\n1039\n00:51:56,080 --> 00:51:58,240\nSo if you have that, great.\n\n1040\n00:51:58,240 --> 00:52:01,990\nIf not though, your end users may\nend up receiving an email that\n\n1041\n00:52:01,990 --> 00:52:03,150\nlooks legitimate-\n>> Right [INAUDIBLE]\n\n1042\n00:52:03,150 --> 00:52:04,660\n>> looks like it's from their bank.\n\n1043\n00:52:04,660 --> 00:52:06,170\n>> Yeah\n>> Here's Bank of America.\n\n1044\n00:52:06,170 --> 00:52:07,680\nYour account may have been compromised,\n\n1045\n00:52:07,680 --> 00:52:10,090\nplease click here to\nverify your credentials.\n\n1046\n00:52:10,090 --> 00:52:10,660\nRight?\n\n1047\n00:52:10,660 --> 00:52:12,010\nAnd it looks real!\n\n1048\n00:52:12,010 --> 00:52:14,620\nYou click on that link, though, and\nit goes to an attacker's website,\n\n1049\n00:52:14,620 --> 00:52:17,650\nthat's made up to look like Nation,\nthe Bank of America or whatever, and\n\n1050\n00:52:17,650 --> 00:52:20,140\nthey punch in their credentials,\nand what they just did is\n\n1051\n00:52:20,140 --> 00:52:21,740\nuploaded their credentials\n>> That's it.\n\n1052\n00:52:21,740 --> 00:52:23,270\n>> to an attacker's server.\n\n1053\n00:52:23,270 --> 00:52:24,490\nIt's as simple as that.\n\n1054\n00:52:24,490 --> 00:52:26,920\nSo phishing attempts are very dangerous.\n\n1055\n00:52:26,920 --> 00:52:32,690\nThe term phishing, it's P-H-I-S-H-I-N-G,\nif you're not familiar with it.\n\n1056\n00:52:32,690 --> 00:52:35,050\nSo it's phishing spelled\na little different.\n\n1057\n00:52:35,050 --> 00:52:36,040\nIt's been around a while.\n\n1058\n00:52:37,590 --> 00:52:40,340\nHas started pushing a term,\ncalled whaling,\n\n1059\n00:52:40,340 --> 00:52:43,340\nwhich is just a dumb term\nthat no body else uses.\n\n1060\n00:52:43,340 --> 00:52:46,560\nBut, basically,\nis custom made phishing attempts for\n\n1061\n00:52:46,560 --> 00:52:48,930\nhigh up individuals in a company.\n\n1062\n00:52:48,930 --> 00:52:51,430\nBut, these days, they usually target high,\nlow, doesn't matter,\n\n1063\n00:52:51,430 --> 00:52:54,520\nthey target them all, trying to get\nsome credentials on the network.\n\n1064\n00:52:54,520 --> 00:52:57,850\nIf they can get credentials, now they\ncan walk right through a firewall.\n\n1065\n00:52:57,850 --> 00:52:59,940\nThey can walk right through the filters\nthat we might have in place,\n\n1066\n00:52:59,940 --> 00:53:02,380\nbecause they've got valid\nuser IDs to get in.\n\n1067\n00:53:02,380 --> 00:53:05,790\n>> They're targeting this so much,\nthat they've also come on new terms,\n\n1068\n00:53:05,790 --> 00:53:08,850\nI say new it's probably not too new,\nspear fishing right?\n\n1069\n00:53:08,850 --> 00:53:12,290\nWhere what they can do is they can\ntake things like your Facebook, and\n\n1070\n00:53:12,290 --> 00:53:17,080\nwhat you put in your emai, or your\nLinkedIn account and do all that stuff.\n\n1071\n00:53:17,080 --> 00:53:21,160\nAnd they simply again start targeting your\nemail, to see what they can get to you,\n\n1072\n00:53:21,160 --> 00:53:22,790\nand to see what you actually click on.\n\n1073\n00:53:22,790 --> 00:53:26,750\nAnd so these ticker type attempts\nare relatively successful, or\n\n1074\n00:53:26,750 --> 00:53:27,890\nthey wouldn't continue to try them.\n\n1075\n00:53:29,230 --> 00:53:31,480\n>> Yep and\nemail's not going anywhere anytime soon.\n\n1076\n00:53:31,480 --> 00:53:36,620\nIt's a common service that most\npeople expect to have, so.\n\n1077\n00:53:36,620 --> 00:53:38,500\nI'm finding.\n\n1078\n00:53:38,500 --> 00:53:40,019\n>> Hm.\n>> Kind of various reports here, but\n\n1079\n00:53:40,019 --> 00:53:42,380\nnothing, not quite what I'm looking for\n>> Mm-hm.\n\n1080\n00:53:42,380 --> 00:53:44,210\n>> so, we'll have to find something later.\n\n1081\n00:53:44,210 --> 00:53:46,000\nBut, yeah just be aware of it.\n\n1082\n00:53:46,000 --> 00:53:47,570\nOn the Cisco side.\n\n1083\n00:53:47,570 --> 00:53:51,570\nCisco does make some appliances that can\nhelp to filter out phshing attempts and\n\n1084\n00:53:51,570 --> 00:53:52,810\nother email threats.\n\n1085\n00:53:52,810 --> 00:53:55,890\nThey have a whole line of\nproducts called Cisco Ironport,\n\n1086\n00:53:55,890 --> 00:53:58,100\nthat we'll talk about a little bit later.\n\n1087\n00:53:58,100 --> 00:53:59,840\nBut for right now,\njust be aware of that threat.\n\n1088\n00:54:01,170 --> 00:54:04,270\nAlright, Ronnie this is a pretty good\nspot for us to stop and take a break.\n\n1089\n00:54:04,270 --> 00:54:06,880\nWhen we get back,\nwe still have web based attacks,\n\n1090\n00:54:06,880 --> 00:54:10,300\nwhich are probably the most dangerous,\nand most common of what we expect today.\n\n1091\n00:54:10,300 --> 00:54:12,700\nSo let's tackle those after the break.\n\n1092\n00:54:12,700 --> 00:54:13,980\nYou got anything else to throw in?\n\n1093\n00:54:13,980 --> 00:54:15,010\n>> Nope.\n\n1094\n00:54:15,010 --> 00:54:17,911\n>> All right, so ladies and\ngentlemen after we get back, web threats,\n\n1095\n00:54:17,911 --> 00:54:18,468\nafter this.\n\n1096\n00:54:18,468 --> 00:54:22,385\n[SOUND] All right,\n\n1097\n00:54:22,385 --> 00:54:28,135\nwelcome back everybody.\n\n1098\n00:54:28,135 --> 00:54:34,212\nSo the next threat on our laundry list of\nsecurity is, well, are web-based attacks.\n\n1099\n00:54:34,212 --> 00:54:37,890\nAnd web-based attacks are probably\nthe ones that we hear the most about.\n\n1100\n00:54:37,890 --> 00:54:41,310\nThese are the ones that make the news, and\nyou read about in the tech journals and\n\n1101\n00:54:41,310 --> 00:54:44,330\nall that stuff, if you\n>> Sensational splashes\n\n1102\n00:54:44,330 --> 00:54:48,290\nwhenever you hear about the idea of web\nbased attacks, cuz usually it's somebody's\n\n1103\n00:54:48,290 --> 00:54:53,260\nwebsite going down, or getting defaced, or\nagain somebody not able to do business.\n\n1104\n00:54:53,260 --> 00:54:57,550\nSo a couple years ago the big,\nwas it Anonymous that started doing a lot.\n\n1105\n00:54:57,550 --> 00:54:58,541\n>> Yeah.\n>> Because they wanted support for\n\n1106\n00:54:58,541 --> 00:54:59,585\nattacks because they.\n\n1107\n00:54:59,585 --> 00:55:02,720\n>> Wanted support,\nI can't remember the guys name.\n\n1108\n00:55:02,720 --> 00:55:04,340\n>> That was Bradley Manning, wasn't it?\n\n1109\n00:55:04,340 --> 00:55:06,020\nThe Pentagon leaker?\n\n1110\n00:55:06,020 --> 00:55:09,880\n>> Yeah, and so you started seeing where\nthese, and again, these are people that\n\n1111\n00:55:09,880 --> 00:55:12,980\nget together and they actually do attack\n>> And here it is.\n\n1112\n00:55:12,980 --> 00:55:17,670\nAll the sudden your public face\nof your business, is now down and\n\n1113\n00:55:17,670 --> 00:55:19,700\nthat's where you have a problem.\n\n1114\n00:55:19,700 --> 00:55:22,260\n>> And there's been some high\nvisibility attacks over the years.\n\n1115\n00:55:22,260 --> 00:55:24,600\nThe CIA's homepage got defaced once.\n\n1116\n00:55:24,600 --> 00:55:26,150\nThey had like pictures of Hitler and\nstuff on there.\n\n1117\n00:55:26,150 --> 00:55:30,450\nAnd that happens right now,\nis the Syrian electric army right?\n\n1118\n00:55:30,450 --> 00:55:33,030\nThey are defacing websites left and right.\n\n1119\n00:55:33,030 --> 00:55:36,130\n>> And\nthey're not targeting specific websites,\n\n1120\n00:55:36,130 --> 00:55:37,810\nit's more just a broad sweeping thing.\n\n1121\n00:55:37,810 --> 00:55:38,670\n>> I know.\n>> They're trying to find as\n\n1122\n00:55:38,670 --> 00:55:43,000\nmany sites as they can to compromise,\nand get their message out,\n\n1123\n00:55:43,000 --> 00:55:44,680\nwhich I don't even remember\nwhat the message is.\n\n1124\n00:55:44,680 --> 00:55:48,210\nBut I'm sure it's important,\nto them anyways.\n\n1125\n00:55:48,210 --> 00:55:50,190\nSo this kind of stuff is\nconstantly ongoing, and\n\n1126\n00:55:50,190 --> 00:55:52,450\nwe need to protect from it, right?\n\n1127\n00:55:52,450 --> 00:55:55,569\nNow web-based protection takes\nseveral different forms.\n\n1128\n00:55:55,569 --> 00:56:00,155\nThe thing is, most websites today\nare reliant on a database on the back end,\n\n1129\n00:56:00,155 --> 00:56:00,664\nright?\n\n1130\n00:56:00,664 --> 00:56:02,010\nA database when\nthe information comes from.\n\n1131\n00:56:02,010 --> 00:56:03,659\nThink of like amazon.com.\n\n1132\n00:56:03,659 --> 00:56:07,800\nYou go to their website, and sure, there's\na web page that list all the products, but\n\n1133\n00:56:07,800 --> 00:56:09,700\nwhere did that product list come from?\n\n1134\n00:56:09,700 --> 00:56:12,990\nWell, it was a query on the database,\non the back-end.\n\n1135\n00:56:12,990 --> 00:56:16,880\nPeople on the Internet are not allowed\nto directly touch that database.\n\n1136\n00:56:16,880 --> 00:56:20,910\nThey can only touch the web server and\nthen the web server touches the database.\n\n1137\n00:56:20,910 --> 00:56:25,700\nSo, what an attacker does,\nis they find ways to trick the website\n\n1138\n00:56:25,700 --> 00:56:28,960\ninto performing other actions,\neither allowing them\n\n1139\n00:56:28,960 --> 00:56:33,810\nto execute unauthorized code on the\ndatabase which is the typical approach.\n\n1140\n00:56:33,810 --> 00:56:37,630\nIt might be finding ways to install\nmalware on that web server.\n\n1141\n00:56:37,630 --> 00:56:39,910\nSo, the web server intern\nis injecting stuff.\n\n1142\n00:56:39,910 --> 00:56:44,150\nThat just happened, rather embarrassingly,\nto the PHP website.\n\n1143\n00:56:44,150 --> 00:56:45,010\nRight?\n>> Right.\n\n1144\n00:56:45,010 --> 00:56:46,620\n>> Was it php.net?\n\n1145\n00:56:46,620 --> 00:56:47,550\nI think it was the website.\n\n1146\n00:56:47,550 --> 00:56:48,160\n>> Yeah, I think it was.\n\n1147\n00:56:48,160 --> 00:56:54,450\n>> Where some attackers managed to get\nsome scripts loaded into the PHP home page\n\n1148\n00:56:54,450 --> 00:57:00,430\nand anybody who went to the php.net\nwebsite got malware installed.\n\n1149\n00:57:00,430 --> 00:57:02,680\nIt was, you know,\nbuilt right into the web page.\n\n1150\n00:57:02,680 --> 00:57:06,460\nSo that does happen, it's a very\nrealistic threat that's out there.\n\n1151\n00:57:06,460 --> 00:57:07,340\n>> Yup.\n\n1152\n00:57:07,340 --> 00:57:08,420\n>> So how do we prevent it?\n\n1153\n00:57:08,420 --> 00:57:10,390\nWell, there's a couple of ways.\n\n1154\n00:57:10,390 --> 00:57:15,410\nThe best way is to make sure that whoever\ndevelops your web server software, and\n\n1155\n00:57:15,410 --> 00:57:17,090\nnot just your web server,\nbut your website.\n\n1156\n00:57:17,090 --> 00:57:20,230\nWhoever develops that\nwebsite is security-focused.\n\n1157\n00:57:20,230 --> 00:57:22,140\nThey think about proper security.\n\n1158\n00:57:22,140 --> 00:57:22,980\nField validation.\n\n1159\n00:57:22,980 --> 00:57:24,410\nThings like that, right?\n\n1160\n00:57:24,410 --> 00:57:29,572\nWhoever develops your web server,\nbe it Apache or EngineX or IIS.\n\n1161\n00:57:29,572 --> 00:57:33,200\nThen they're continually putting out\nsecurity updates and you're applying them.\n\n1162\n00:57:33,200 --> 00:57:35,700\nYou gotta keep that server up to date.\n\n1163\n00:57:35,700 --> 00:57:38,400\n>> And then lastly,\nif you don't know about those,\n\n1164\n00:57:38,400 --> 00:57:42,196\nthen you can always implement\nan intrusion prevention system, IPS,\n\n1165\n00:57:42,196 --> 00:57:46,569\nwhich scans all traffic from the Internet\nto your web server, so that if there's\n\n1166\n00:57:46,569 --> 00:57:50,850\na malicious activity, it can be stopped\nbefore it even gets to the web server.\n\n1167\n00:57:50,850 --> 00:57:51,920\nVery effective.\n\n1168\n00:57:51,920 --> 00:57:55,592\nAnd it takes away that reliance on\nthird party vendors to protect you.\n\n1169\n00:57:55,592 --> 00:58:00,410\nAnd, why you still have a third party\nvendor in the IPS, but in that case,\n\n1170\n00:58:00,410 --> 00:58:02,650\nit's a security company, a security team.\n\n1171\n00:58:02,650 --> 00:58:03,250\n>> Yeah.\n\n1172\n00:58:03,250 --> 00:58:08,015\n>> Cisco has an entire security lab that\nis focused on discovering new attacks and\n\n1173\n00:58:08,015 --> 00:58:09,065\npreventing them.\n\n1174\n00:58:09,065 --> 00:58:12,385\nVersus the people at Apache,\nor the people at Microsoft,\n\n1175\n00:58:12,385 --> 00:58:15,535\nwho don't have a security lab\nfocused on learning those attacks.\n\n1176\n00:58:15,535 --> 00:58:16,055\nYou know,\n\n1177\n00:58:16,055 --> 00:58:20,895\nso, it's putting your trust in a vendor\nthat's actually part of that environment.\n\n1178\n00:58:20,895 --> 00:58:21,905\n>> Yeah.\n\n1179\n00:58:21,905 --> 00:58:25,840\nI think we had made a joke about this in\nanother particular show that, a lot of\n\n1180\n00:58:25,840 --> 00:58:29,330\ntimes, when a small company decides that\nthey wanna develop a website, right?\n\n1181\n00:58:29,330 --> 00:58:31,970\nThey don't go out and\nfind somebody that's security focused.\n\n1182\n00:58:31,970 --> 00:58:34,590\n>> Yeah.\n>> They find, you know like, my brother or\n\n1183\n00:58:34,590 --> 00:58:35,335\nmy sister.\n\n1184\n00:58:35,335 --> 00:58:37,570\n>> [LAUGH]\n>> And again, it's not mocking them,\n\n1185\n00:58:37,570 --> 00:58:40,790\nbut they may know how to design a website,\nbut\n\n1186\n00:58:40,790 --> 00:58:45,820\nthey have any clue on how to even\nfocus in on making that more secure.\n\n1187\n00:58:45,820 --> 00:58:47,130\n>> Yeah.\n>> So the coding that they write\n\n1188\n00:58:47,130 --> 00:58:48,860\nmay not actually be secure.\n\n1189\n00:58:48,860 --> 00:58:52,050\nMay look like a beautiful website,\nbut you know, you may have a problem.\n\n1190\n00:58:52,050 --> 00:58:53,000\n>> Every programmer,\n\n1191\n00:58:53,000 --> 00:58:56,800\nevery developer, works on a deadline,\nthat's how software is developed.\n\n1192\n00:58:56,800 --> 00:59:01,350\nAnd when they do that, they almost\nalways focus on features first.\n\n1193\n00:59:01,350 --> 00:59:01,890\n>> Security second.\n\n1194\n00:59:01,890 --> 00:59:03,670\n>> Security second,\nmaybe security third or fourth even,\n\n1195\n00:59:03,670 --> 00:59:04,990\nyou know your other priorities.\n\n1196\n00:59:04,990 --> 00:59:07,360\nBut features are their\nnumber one priority.\n\n1197\n00:59:07,360 --> 00:59:08,710\nThey are trying to create\nthese features for\n\n1198\n00:59:08,710 --> 00:59:13,400\nthe end users, and that means that\nnon-secure coding practices happen and\n\n1199\n00:59:13,400 --> 00:59:15,830\nyou get these applications\nthat are easy to break.\n\n1200\n00:59:15,830 --> 00:59:17,890\nSo those are the things\nwe need to watch out for.\n\n1201\n00:59:17,890 --> 00:59:20,690\nIf you can find a development\nhouse that is security focused,\n\n1202\n00:59:20,690 --> 00:59:22,120\nthat's much, much better.\n\n1203\n00:59:22,120 --> 00:59:23,080\nBut it's not very popular.\n\n1204\n00:59:23,080 --> 00:59:24,390\nLook at your operating systems.\n\n1205\n00:59:24,390 --> 00:59:27,270\nI can really only think\nof a handful of operating\n\n1206\n00:59:27,270 --> 00:59:29,420\nsystems that are security\nfocused like OpenBSD.\n\n1207\n00:59:29,420 --> 00:59:33,700\nAnd if you look at OpenBSD,\nit's security first, features second and\n\n1208\n00:59:33,700 --> 00:59:37,740\nas a result, it's one of the least\npopular OS's in the entire world, right?\n\n1209\n00:59:37,740 --> 00:59:39,570\nBecause it doesn't have\nthe software that people want,\n\n1210\n00:59:39,570 --> 00:59:41,990\nit doesn't have the features\nthat people are looking for.\n\n1211\n00:59:41,990 --> 00:59:44,550\nSo just be aware that you need\nto find a healthy balance,\n\n1212\n00:59:44,550 --> 00:59:46,990\na balance between security and\nfunctionality.\n\n1213\n00:59:46,990 --> 00:59:47,970\nAnd that may mean,\n\n1214\n00:59:47,970 --> 00:59:50,830\nthat you need to bring in other equipment\nto provide the security you need.\n\n1215\n00:59:52,330 --> 00:59:55,139\n>> Yeah.\n>> All right, the next one we've got,\n\n1216\n00:59:55,139 --> 00:59:56,450\nlet's see.\n\n1217\n00:59:56,450 --> 01:00:00,310\nMitigation methods for worms,\nviruses, and trojans, right?\n\n1218\n01:00:00,310 --> 01:00:00,980\n>> Yup.\n\n1219\n01:00:00,980 --> 01:00:03,390\n>> Let's just start off a real\nhigh level with what a worm,\n\n1220\n01:00:03,390 --> 01:00:05,110\nvirus or Trojan is, right.\n\n1221\n01:00:05,110 --> 01:00:08,070\nYou know, a lot of us use these terms,\nkind of, interchangeably.\n\n1222\n01:00:08,070 --> 01:00:10,510\nBack in the day, they use to be\nvery distinct, separate things, but\n\n1223\n01:00:10,510 --> 01:00:12,440\ntoday it's all really blend together.\n\n1224\n01:00:12,440 --> 01:00:15,820\n>> Right.\n>> You know a worm is really anything that\n\n1225\n01:00:15,820 --> 01:00:19,340\ncan propagate itself across,\ntypically, the Internet these day.\n\n1226\n01:00:19,340 --> 01:00:19,930\nRight?\n\n1227\n01:00:19,930 --> 01:00:23,620\nSo that somebody can write a virus or\na trojan or\n\n1228\n01:00:23,620 --> 01:00:29,190\nwhatever, embed it in a worm and the worm\ncan just spread across the Internet,\n\n1229\n01:00:29,190 --> 01:00:33,980\ninfecting machines like crazy, while you\nsit back and watch the money roll-in or\n\n1230\n01:00:33,980 --> 01:00:35,650\nwhatever it is that you're doing.\n\n1231\n01:00:35,650 --> 01:00:37,200\n>> Yeah.\nI used to think about the idea of the worm\n\n1232\n01:00:37,200 --> 01:00:40,990\nas being, no need for any human\ninteraction, after it was developed.\n\n1233\n01:00:40,990 --> 01:00:41,680\nRight?\n\n1234\n01:00:41,680 --> 01:00:43,900\nIt can then move from one\nmachine to the next machine and\n\n1235\n01:00:43,900 --> 01:00:45,360\ncontinue to actually infect.\n\n1236\n01:00:45,360 --> 01:00:48,185\nAnd then worms are becoming smarter right?\n\n1237\n01:00:48,185 --> 01:00:50,460\n>> Mm-hm.\n>> What was that new one that\n\n1238\n01:00:51,960 --> 01:00:53,830\nsaid was almost like the stuxnet virus?\n\n1239\n01:00:53,830 --> 01:00:57,260\n>> We've had a couple of\nhigh visibility ones.\n\n1240\n01:00:57,260 --> 01:00:58,770\n>> Yeah.\n>> There's the Target attack that just\n\n1241\n01:00:58,770 --> 01:01:00,040\nhappened, that was worm based.\n\n1242\n01:01:00,040 --> 01:01:01,220\n>> Yeah, that was the one.\n\n1243\n01:01:01,220 --> 01:01:03,457\n>> Yeah.\nIts name was bad POS or\n\n1244\n01:01:03,457 --> 01:01:05,370\nsomething like that.\n\n1245\n01:01:05,370 --> 01:01:06,420\n>> Yeah.\n>> POS being,\n\n1246\n01:01:06,420 --> 01:01:07,000\n>> Black\n\n1247\n01:01:07,000 --> 01:01:07,810\n>> BlackPOS, that's it.\n\n1248\n01:01:07,810 --> 01:01:08,550\n>> BlackPOS, Yeah.\n\n1249\n01:01:08,550 --> 01:01:09,650\n>> POS being point of sale,\n\n1250\n01:01:09,650 --> 01:01:10,990\nnot piece of, you know.\n>> [LAUGH]\n\n1251\n01:01:10,990 --> 01:01:11,500\n>> But\n\n1252\n01:01:11,500 --> 01:01:16,034\nthat one was worm based.\nIn these shows I always\n\n1253\n01:01:16,034 --> 01:01:17,437\nuse the Code-Red as an example\n>> Yeah, code red.\n\n1254\n01:01:17,437 --> 01:01:20,000\n>> Cuz it was one of the earliest high\n\n1255\n01:01:20,000 --> 01:01:21,790\nvisibility worms on the Internet.\n\n1256\n01:01:21,790 --> 01:01:24,190\nAnd I'm just pulling up the CAIDA website.\n\n1257\n01:01:24,190 --> 01:01:26,670\nAnd it shows like,\nwhere you can come in here and\n\n1258\n01:01:26,670 --> 01:01:30,930\nsee, kinda how the Code-Red worm\nspread and how fast it went.\n\n1259\n01:01:30,930 --> 01:01:32,510\nOh, they have animations,\nI never noticed that.\n\n1260\n01:01:32,510 --> 01:01:33,050\n>> Nice.\n\n1261\n01:01:33,050 --> 01:01:37,221\n>> Where is the, well,\nthey say they have animations.\n\n1262\n01:01:37,221 --> 01:01:40,418\nThe must be a lying pictures,\nprobably flash-based or\n\n1263\n01:01:40,418 --> 01:01:42,260\nsomething that doesn't work.\n\n1264\n01:01:42,260 --> 01:01:47,490\nBut, anyhow, the worm itself spread very,\nvery fast infecting\n\n1265\n01:01:47,490 --> 01:01:50,458\nhundreds of thousands of machines\nin a very brief period of time.\n\n1266\n01:01:50,458 --> 01:01:51,989\n>> So what's underneath?\n\n1267\n01:01:51,989 --> 01:01:53,190\n>> Nothing?\n\n1268\n01:01:53,190 --> 01:01:54,730\nNope, it just brings it\nback to the same place.\n\n1269\n01:01:54,730 --> 01:01:58,330\n>> Yeah, here's a flipbook animation\nof geographic spread, QuickTime.\n\n1270\n01:01:58,330 --> 01:01:59,480\n>> Oh, there you go.\n\n1271\n01:01:59,480 --> 01:02:00,630\n>> I don't know what flipbook is.\n\n1272\n01:02:00,630 --> 01:02:01,995\nHere, it will show us an animated gif.\n\n1273\n01:02:01,995 --> 01:02:03,200\nThat'll probably be effective.\n\n1274\n01:02:04,700 --> 01:02:05,700\nHere we go.\n\n1275\n01:02:05,700 --> 01:02:08,220\nSo this is showing the spread and\nwatch what you've got down here.\n\n1276\n01:02:08,220 --> 01:02:12,300\nYou've got this clock that's\nshowing the time of the spread and\n\n1277\n01:02:12,300 --> 01:02:15,030\nthe number of victims down here.\n\n1278\n01:02:15,030 --> 01:02:21,770\nSo if we look at how fast that's growing\nand the time is accelerated a bit.\n\n1279\n01:02:21,770 --> 01:02:23,100\nYou see how exponential,\n\n1280\n01:02:23,100 --> 01:02:26,210\nnow it went from thousands to\nhundreds of thousands at a time.\n\n1281\n01:02:26,210 --> 01:02:28,460\nAnd it is just blowing up.\n\n1282\n01:02:28,460 --> 01:02:32,390\nAnd basically, what happened is, the virus\ntook a good 12 hours to get started, but\n\n1283\n01:02:32,390 --> 01:02:36,870\nonce it got a full head of steam, so\nsee here's like 1 AM, 2 AM, 3 AM and\n\n1284\n01:02:36,870 --> 01:02:38,060\nticking up right.\n\n1285\n01:02:38,060 --> 01:02:40,670\nSo at this point,\nit's just a couple of thousand victims,\n\n1286\n01:02:40,670 --> 01:02:42,840\nthey're all over the world, right.\n\n1287\n01:02:42,840 --> 01:02:46,180\nAnd so here, we're still just\nkind of growing by hundreds.\n\n1288\n01:02:46,180 --> 01:02:49,940\nBut when we hit that 12 hour mark,\nsee how now we're going by thousands.\n\n1289\n01:02:49,940 --> 01:02:51,270\n>> Yep.\n>> And then we start going by\n\n1290\n01:02:51,270 --> 01:02:52,245\ntens of thousands.\n\n1291\n01:02:52,245 --> 01:02:53,080\n>> Mm-hm.\n\n1292\n01:02:53,080 --> 01:02:57,200\n>> Within a 24 hour period,\nover 400,000 machines were infected.\n\n1293\n01:02:57,200 --> 01:02:57,720\n>> Yeah.\n>> So\n\n1294\n01:02:57,720 --> 01:02:59,850\nyou're about to hit 24 hours\n>> And\n\n1295\n01:02:59,850 --> 01:03:02,450\nwe're at, it stopped at about 360,000.\n\n1296\n01:03:02,450 --> 01:03:04,800\nThat is a massive infection rate.\n\n1297\n01:03:04,800 --> 01:03:09,080\nI mean, just machines infected like crazy.\n\n1298\n01:03:09,080 --> 01:03:13,290\nAnd it was so bad that\nthe Internet actually slowed down.\n\n1299\n01:03:13,290 --> 01:03:16,290\nIt affected the performance\nof the whole Internet.\n\n1300\n01:03:16,290 --> 01:03:18,462\nThis is the type of thing\nthat a worm can do.\n\n1301\n01:03:18,462 --> 01:03:22,230\nThe Code-Red worm itself carried\na payload, which was a virus.\n\n1302\n01:03:22,230 --> 01:03:26,730\nIt would infect a machine and then\ncontinue to try and infect other machines.\n\n1303\n01:03:26,730 --> 01:03:27,730\nIt's really what it did.\n\n1304\n01:03:27,730 --> 01:03:31,790\nAll building up to where it would then do\na targeted denial of service on a target.\n\n1305\n01:03:31,790 --> 01:03:34,025\nIt was dictated by someone off-scene.\n\n1306\n01:03:36,160 --> 01:03:38,290\nSo, very, very cool stuff.\n\n1307\n01:03:38,290 --> 01:03:41,300\nWell, not if you're a victim, but\nif you're a security researcher,\n\n1308\n01:03:41,300 --> 01:03:42,430\nit's very cool stuff.\n\n1309\n01:03:42,430 --> 01:03:45,200\nSo, what can we do about\nthat kind of thing?\n\n1310\n01:03:45,200 --> 01:03:46,990\nWhat are our mitigation methods for\n\n1311\n01:03:46,990 --> 01:03:49,900\nthese types of very sophisticated attacks,\nright?\n\n1312\n01:03:49,900 --> 01:03:53,420\nWell, the number one method is,\nrun the antivirus software.\n\n1313\n01:03:53,420 --> 01:03:58,111\nAs cheesy and silly as it sounds,\nanti-virus software run on your client,\n\n1314\n01:03:58,111 --> 01:04:01,427\ncan detect and\nprevent some of these things, right?\n\n1315\n01:04:01,427 --> 01:04:05,266\nThe main negative about anti-virus\nsoftware is that, the attack has already\n\n1316\n01:04:05,266 --> 01:04:08,711\nmade it to your PC by that point and\nyour PC is trying to stop it, right?\n\n1317\n01:04:08,711 --> 01:04:11,813\nAnd if your PC's definitions are out\nof date or something like that,\n\n1318\n01:04:11,813 --> 01:04:14,120\nit might not pick up and\nthen you get infected.\n\n1319\n01:04:14,120 --> 01:04:15,780\nThat's exactly what happened with Target.\n\n1320\n01:04:15,780 --> 01:04:18,040\nTarget ran anti-virus on their systems.\n\n1321\n01:04:18,040 --> 01:04:21,280\nThe anti-virus failed to\ndetect the black POS and so\n\n1322\n01:04:21,280 --> 01:04:24,900\nthe systems got affected and\nbegun leaking all that credit card data.\n\n1323\n01:04:24,900 --> 01:04:26,650\n>> Yeah\n>> Very big attack.\n\n1324\n01:04:26,650 --> 01:04:28,910\nAll right, so, what else can we do?\n\n1325\n01:04:28,910 --> 01:04:30,160\nWell, IPS.\n\n1326\n01:04:30,160 --> 01:04:33,220\nIntrusion preventing systems\nare effectively anti-virus scanners,\n\n1327\n01:04:33,220 --> 01:04:35,350\nin addition to the other things they do.\n\n1328\n01:04:35,350 --> 01:04:39,000\nAnd so they can see malicious activity on\nthe network even if they never heard of\n\n1329\n01:04:39,000 --> 01:04:40,330\nthat virus before.\n\n1330\n01:04:40,330 --> 01:04:42,740\nThey can recognize virus like activities.\n\n1331\n01:04:42,740 --> 01:04:46,620\nThey call it heuristics,\nwhere you don't identify the virus itself.\n\n1332\n01:04:46,620 --> 01:04:50,940\nYou identify that the actions\nthis program is taking\n\n1333\n01:04:50,940 --> 01:04:53,530\nmatch what a virus would try to do.\n\n1334\n01:04:53,530 --> 01:04:58,240\nSo, it can identify even unknown\nviruses and stop them on the network,\n\n1335\n01:04:58,240 --> 01:05:01,399\nprior to them even getting to\nthe station that's being attacked.\n\n1336\n01:05:02,910 --> 01:05:03,530\nAll right.\n\n1337\n01:05:03,530 --> 01:05:04,990\nSo those are some examples.\n\n1338\n01:05:04,990 --> 01:05:06,960\nYou know, educating your users.\n\n1339\n01:05:06,960 --> 01:05:10,650\nNot connecting systems to the Internet\nif they don't need to be.\n\n1340\n01:05:10,650 --> 01:05:15,590\nWhy in the world were Target's\npoint of sale systems connected to\n\n1341\n01:05:15,590 --> 01:05:17,560\na network that had any\naccess to the Internet?\n\n1342\n01:05:17,560 --> 01:05:18,970\nDid it need it?\n\n1343\n01:05:18,970 --> 01:05:19,980\nNo.\nSo\n\n1344\n01:05:19,980 --> 01:05:24,050\nit's mistakes like that, that lead to\nthese high visibility compromises.\n\n1345\n01:05:24,050 --> 01:05:28,040\n>> Yeah and speaking of that,\nwhen I mentioned a little bit earlier,\n\n1346\n01:05:28,040 --> 01:05:30,680\nthis is one of those unusual viruses\n\n1347\n01:05:30,680 --> 01:05:34,370\nthat literally went from a computer\noperating system, to these kind of hard,\n\n1348\n01:05:34,370 --> 01:05:39,070\ncoded in control systems,\nto just water flow and stuff like that.\n\n1349\n01:05:39,070 --> 01:05:41,350\nWhere they literally actually\njumped onto these boards and\n\n1350\n01:05:41,350 --> 01:05:43,380\nwere able to actually do more.\n\n1351\n01:05:43,380 --> 01:05:47,530\nSo these viruses are becoming more\ncomplex, more complicated and\n\n1352\n01:05:47,530 --> 01:05:51,440\nnow they're no longer limited to\njust regular computer systems.\n\n1353\n01:05:51,440 --> 01:05:55,070\nSo the more that you learn as\na security professional, you can't\n\n1354\n01:05:55,070 --> 01:05:59,670\nsit on your laurels here and just say,\nI know enough about these viruses.\n\n1355\n01:05:59,670 --> 01:06:03,150\nThey're constantly, we're talking\nabout mutating worms here today.\n\n1356\n01:06:03,150 --> 01:06:05,310\nIs where you're actually starting\nto see more and more of that.\n\n1357\n01:06:05,310 --> 01:06:09,460\nSo again, jump on the net,\nread more and more on these things.\n\n1358\n01:06:09,460 --> 01:06:10,740\n>> Yeah.\nYou know stuck's net,\n\n1359\n01:06:10,740 --> 01:06:13,350\nthose were targeting what\nare called scata systems.\n\n1360\n01:06:13,350 --> 01:06:15,250\nThat stands for, I had to pull it up.\n\n1361\n01:06:15,250 --> 01:06:15,870\n>> Siemens.\n\n1362\n01:06:15,870 --> 01:06:20,160\n>> Supervisory control and\ndata acquisition.\n\n1363\n01:06:20,160 --> 01:06:23,390\nIs what that stands for these are the\ncontrollers for things like, in that\n\n1364\n01:06:23,390 --> 01:06:28,270\ncase is nuclear facility or nuc-u-lar,\n>> Yeah nuc-u-lar.\n\n1365\n01:06:28,270 --> 01:06:32,990\n>> A nuclear facility, anyhow and\nbasically somebody, somebody, probably\n\n1366\n01:06:32,990 --> 01:06:36,820\nthe United States government specifically\ncrafted this virus to be able to stop.\n\n1367\n01:06:36,820 --> 01:06:38,180\nIt could've been the Israeli government.\n\n1368\n01:06:38,180 --> 01:06:41,190\nIt was one of the two,\nit really couldn't been anybody else.\n\n1369\n01:06:41,190 --> 01:06:44,780\nSo these are the kind of things that\nare out there and they're very,\n\n1370\n01:06:44,780 --> 01:06:45,530\nvery hard to protect\n>> Oh yeah!\n\n1371\n01:06:45,530 --> 01:06:46,950\n>> Against on your own.\n\n1372\n01:06:46,950 --> 01:06:49,340\nYou want to basically\nbring in an outsider and\n\n1373\n01:06:49,340 --> 01:06:51,120\nthat's where the Cisco IPS\ndevices come in.\n\n1374\n01:06:51,120 --> 01:06:52,220\n>> Right.\n>> You're bringing in an outsider,\n\n1375\n01:06:52,220 --> 01:06:56,530\nCisco Labs, to be able to research and\nprevent those types of compromises.\n\n1376\n01:06:56,530 --> 01:06:58,240\n>> Yeah.\nThat's amazing how they are actually able\n\n1377\n01:06:58,240 --> 01:07:02,990\nto do that, go from a regular operating\nsystem on to these control boards and\n\n1378\n01:07:02,990 --> 01:07:04,060\neffect the entire thing.\n\n1379\n01:07:04,060 --> 01:07:04,700\n>> Yup.\n\n1380\n01:07:04,700 --> 01:07:06,020\nAll because again,\n\n1381\n01:07:06,020 --> 01:07:08,950\ncertain computers were connected to\nthe Internet that shouldn't have been.\n\n1382\n01:07:08,950 --> 01:07:09,480\n>> Right.\n>> Right,\n\n1383\n01:07:09,480 --> 01:07:12,600\na lot of businesses connect\nall their PCs to the Internet\n\n1384\n01:07:12,600 --> 01:07:15,980\nwhen they don't need to and when you do\nthat you're exposing yourself to risk.\n\n1385\n01:07:17,970 --> 01:07:22,150\nRonnie, I'm gonna let you tackle this\nnext one which is the secure network\n\n1386\n01:07:22,150 --> 01:07:22,840\nlife cycle.\n\n1387\n01:07:22,840 --> 01:07:23,710\n>> Yeah.\n\n1388\n01:07:23,710 --> 01:07:27,640\nThe idea of the security network life\ncycle is something that we all do\n\n1389\n01:07:27,640 --> 01:07:30,950\nneed to know about and especially\nwhen we're facing the exam here.\n\n1390\n01:07:30,950 --> 01:07:34,030\nBut we've got to remember that security\nimplementation that we implemented\n\n1391\n01:07:34,030 --> 01:07:38,690\na long time ago, may not work\nin today's environment as well.\n\n1392\n01:07:38,690 --> 01:07:41,860\nSo instead of just saying okay I've got\nthis one device and that's pretty much all\n\n1393\n01:07:41,860 --> 01:07:45,620\nwe're going to work with with\nthe rest of our company here forever.\n\n1394\n01:07:45,620 --> 01:07:49,675\nWe want to maintain the idea of\na development lifecycle, okay.\n\n1395\n01:07:49,675 --> 01:07:52,585\nWhich means that what we're gonna do,\nis we're gonna actually plan for\n\n1396\n01:07:52,585 --> 01:07:57,445\nthe obsolescence of this device but\nto also maintain high security.\n\n1397\n01:07:57,445 --> 01:08:02,125\nSo normally there's five different\nphases to this that we wanna go through.\n\n1398\n01:08:02,125 --> 01:08:04,705\nThe idea the initiation, in other words,\n\n1399\n01:08:04,705 --> 01:08:08,940\nknowing what you actually need to have\non hand and just kind of realizing, hey.\n\n1400\n01:08:08,940 --> 01:08:10,680\nThis is what we really need.\n\n1401\n01:08:10,680 --> 01:08:13,010\nAnd then you're going to what's\ncalled acquisition and development.\n\n1402\n01:08:13,010 --> 01:08:16,150\nIn other words what does it take for\nme to get that system?\n\n1403\n01:08:16,150 --> 01:08:19,680\nCan I implement the level of\nsecurity that i need to on that?\n\n1404\n01:08:19,680 --> 01:08:23,350\nSo you actually end up\npurchasing that device.\n\n1405\n01:08:23,350 --> 01:08:27,440\nThen after you do it of course you put\nit in production and when you put in in\n\n1406\n01:08:27,440 --> 01:08:31,200\nproduction you again have to implement\nall the security that you need.\n\n1407\n01:08:31,200 --> 01:08:32,450\nAnd then you have to monitor it.\n\n1408\n01:08:32,450 --> 01:08:35,190\nSo we talk about maintenance and\noperations too,\n\n1409\n01:08:35,190 --> 01:08:38,040\nand then you have to\nhave a way to dispose it.\n\n1410\n01:08:38,040 --> 01:08:42,380\nWithout actually violating\nany security policy,\n\n1411\n01:08:42,380 --> 01:08:44,080\nthat you may have on your network as well.\n\n1412\n01:08:44,080 --> 01:08:49,270\nSo making sure you remove, again,\ndata off of your equipment\n\n1413\n01:08:49,270 --> 01:08:53,970\nthat you need to scrubbing the hard drive,\ndoing all these things to ensure that.\n\n1414\n01:08:53,970 --> 01:08:55,740\nSo initiation.\n\n1415\n01:08:55,740 --> 01:08:56,410\nOkay?\n\n1416\n01:08:56,410 --> 01:08:57,700\nAcquisition and development.\n\n1417\n01:08:58,730 --> 01:09:00,140\nWhat did I say next here?\n\n1418\n01:09:00,140 --> 01:09:01,005\nImplementation.\n\n1419\n01:09:01,005 --> 01:09:02,940\n>> [LAUGH]\n>> Operations and maintenance, and\n\n1420\n01:09:02,940 --> 01:09:03,900\nthen disposition.\n\n1421\n01:09:03,900 --> 01:09:06,720\nWe were making a joke that we couldn't\nremember what all these things were.\n\n1422\n01:09:06,720 --> 01:09:08,853\nBut I did actually remember them.\n\n1423\n01:09:08,853 --> 01:09:11,853\nBefore the show [CROSSTALK].\n\n1424\n01:09:11,853 --> 01:09:13,620\nBut, yeah, these are key, right?\n\n1425\n01:09:13,620 --> 01:09:17,000\nWe don't just say, my device,\nI know it's 12 years old, but\n\n1426\n01:09:17,000 --> 01:09:20,950\nit should work against Stuxnet and\nthink that's going to be it.\n\n1427\n01:09:20,950 --> 01:09:24,380\nYou always have to plan ahead and then you\nhave to know when these things retire,\n\n1428\n01:09:24,380 --> 01:09:27,250\nbecause what we're worried about\neven in security is the idea that,\n\n1429\n01:09:27,250 --> 01:09:29,590\nthat device is going to not break down.\n\n1430\n01:09:30,710 --> 01:09:34,850\nSo, you're never gonna have a device\nthat not gonna at some point break down.\n\n1431\n01:09:34,850 --> 01:09:36,670\n>> I like to think of it\nin terms of software.\n\n1432\n01:09:36,670 --> 01:09:37,280\n>> Right.\n\n1433\n01:09:37,280 --> 01:09:40,370\nIf I need antivirus on my\nlaptop right now, I can go and\n\n1434\n01:09:40,370 --> 01:09:42,410\nI can pick from the products\nthat are out there, right?\n\n1435\n01:09:42,410 --> 01:09:45,630\nSo I initiate by saying I\nneed antivirus software.\n\n1436\n01:09:45,630 --> 01:09:49,220\nAcquisition and development, I locate the\nproduct that I want, I purchase it, and\n\n1437\n01:09:49,220 --> 01:09:51,170\nI install it on my laptop, all right.\n\n1438\n01:09:51,170 --> 01:09:52,530\nThat becomes implementation\n>> Right.\n\n1439\n01:09:52,530 --> 01:09:56,400\n>> I install it on my laptop, so\nnow I'm secure, I've implemented it.\n\n1440\n01:09:56,400 --> 01:09:57,290\nBut I'm not done.\n\n1441\n01:09:57,290 --> 01:09:59,010\nThere's operations and maintenance.\n\n1442\n01:09:59,010 --> 01:10:02,670\nI need my antivirus software to do\nupdates, daily, weekly, whatever it is\n\n1443\n01:10:02,670 --> 01:10:06,560\nthat I choose, if it ever doesn't do those\nupdates, it's not effective anymore,\n\n1444\n01:10:06,560 --> 01:10:09,760\nand it's not secure, so\nI need to continue doing those updates,\n\n1445\n01:10:09,760 --> 01:10:11,800\nthat's part of my operations and\nmaintenance.\n\n1446\n01:10:11,800 --> 01:10:14,870\nBut then down the road,\nI'm eventually gonna want to upgrade to\n\n1447\n01:10:14,870 --> 01:10:18,130\nthe next version of Windows, or the next\nversion of CentOS, or whatever, and\n\n1448\n01:10:18,130 --> 01:10:22,360\nwhen I do that, I'll need to go and\nfind either an upgrade for\n\n1449\n01:10:22,360 --> 01:10:26,330\nmy antivirus software or\na replacement for my antivirus software.\n\n1450\n01:10:26,330 --> 01:10:29,830\nEither way, I'm gonna need to\ndispose of the old software,\n\n1451\n01:10:29,830 --> 01:10:34,795\nthe disposition piece, and then Initiate\nand implement the new solution, right.\n\n1452\n01:10:34,795 --> 01:10:39,305\nSo this process is a continuing cycle,\nit's always going through and from\n\n1453\n01:10:39,305 --> 01:10:44,380\na cynical standpoint we can look at it as\nspend money with Cisco, use Cisco stuff.\n\n1454\n01:10:44,380 --> 01:10:46,420\nSpend more money with Cisco,\nuse more stuff.\n\n1455\n01:10:46,420 --> 01:10:47,690\nYou know that kind of cycle.\n\n1456\n01:10:47,690 --> 01:10:52,190\nBut the reality is you just need to\nkeep these systems up to date and\n\n1457\n01:10:52,190 --> 01:10:56,850\nfunctioning and with Cisco hardware\nespecially it'll last forever.\n\n1458\n01:10:56,850 --> 01:10:57,630\n>> Yeah.\n\n1459\n01:10:57,630 --> 01:11:01,210\n>> I know I've got one router back\nthere on that bench that's is\n\n1460\n01:11:01,210 --> 01:11:03,240\neasily 12 years old.\n\n1461\n01:11:03,240 --> 01:11:04,020\nStill works today.\n\n1462\n01:11:04,020 --> 01:11:05,000\nI could fire that up.\n\n1463\n01:11:05,000 --> 01:11:07,000\nIt's only 10 megabit, so\nit's not very effective, but\n\n1464\n01:11:07,000 --> 01:11:08,900\nI could fire it up today and\nit still works.\n\n1465\n01:11:08,900 --> 01:11:10,190\nThat's how Cisco equipment is built.\n\n1466\n01:11:10,190 --> 01:11:11,080\nIt lasts forever.\n\n1467\n01:11:11,080 --> 01:11:15,410\nBut that doesn't mean you should run it\nforever, because new technologies come\n\n1468\n01:11:15,410 --> 01:11:19,040\nout, new advances and new security\nrisks and you need to keep up to date.\n\n1469\n01:11:19,040 --> 01:11:19,770\n>> Yeah.\n\n1470\n01:11:19,770 --> 01:11:23,130\nThe day that we don't plan for\nthis is the day when we are counting\n\n1471\n01:11:23,130 --> 01:11:26,150\non our failure\n>> To really take us out of\n\n1472\n01:11:26,150 --> 01:11:30,270\nwhere we actually need to be, so it's\nalways this idea of implementing that so\n\n1473\n01:11:30,270 --> 01:11:32,620\nthat you're actually taking a look\nat then putting into your budget and\n\n1474\n01:11:32,620 --> 01:11:35,960\ndoing all that stuff, that you know,\nhey, we're planning on this thing but\n\n1475\n01:11:35,960 --> 01:11:40,370\nit's five years old now, it might go\nanother 15 years, but we don't actually\n\n1476\n01:11:40,370 --> 01:11:44,060\nwant to count on that, so replacing it is\nactually a part of what we need to do,\n\n1477\n01:11:44,060 --> 01:11:47,870\nand so Cisco absolutely loves\nthis particular life cycle.\n\n1478\n01:11:47,870 --> 01:11:50,360\nTake a look at it on the website if\nyou haven't actually seen that before.\n\n1479\n01:11:51,892 --> 01:11:52,540\n>> All right, now, Ronnie,\n\n1480\n01:11:52,540 --> 01:11:56,480\nthe next thing we have to talk about\nis the comprehensive security policy.\n\n1481\n01:11:56,480 --> 01:11:59,470\n>> There you go.\n>> And, and this a pretty big idea.\n\n1482\n01:11:59,470 --> 01:12:00,242\n>> Management deal.\n\n1483\n01:12:00,242 --> 01:12:02,025\n[LAUGH]\n>> We'll take a stab at this.\n\n1484\n01:12:02,025 --> 01:12:02,700\n>> All right\n>> This\n\n1485\n01:12:02,700 --> 01:12:04,310\nis really security bureaucracy, right?\n\n1486\n01:12:04,310 --> 01:12:05,234\n>> Right.\n\n1487\n01:12:05,234 --> 01:12:07,424\n>> And that term, bureaucracy,\nnormally means bad things.\n\n1488\n01:12:07,424 --> 01:12:09,814\nI mean too much paperwork and\npointless stuff.\n\n1489\n01:12:09,814 --> 01:12:12,368\nBut in this case it's actually very,\nvery useful.\n\n1490\n01:12:12,368 --> 01:12:15,346\nWhen you come up with a security\ndesign for your organization,\n\n1491\n01:12:15,346 --> 01:12:18,942\nyou pick your antivirus product,\nyou pick when you want to do your updates,\n\n1492\n01:12:18,942 --> 01:12:21,809\nyou pick your firewalls and\nyour firewall configurations,\n\n1493\n01:12:21,809 --> 01:12:25,830\nand all the various security things\nthat you choose to implement, right?\n\n1494\n01:12:25,830 --> 01:12:28,920\nWhen you pick all of that,\nyou need to keep track of it somewhere.\n\n1495\n01:12:28,920 --> 01:12:29,660\n>> Right.\n>> And so\n\n1496\n01:12:29,660 --> 01:12:33,150\nmost organizations will track with\nwhat's called a security policy.\n\n1497\n01:12:33,150 --> 01:12:35,160\nA comprehensive security policy.\n\n1498\n01:12:35,160 --> 01:12:39,190\nIt should define all of the security\nrelated aspects of your organization.\n\n1499\n01:12:39,190 --> 01:12:42,630\nAnd that really does range\nfrom a number of things.\n\n1500\n01:12:42,630 --> 01:12:44,000\nNot just IT stuff.\n\n1501\n01:12:44,000 --> 01:12:49,650\nNot just firewalls and antivirus, but\nwe're talking about fire escape plans.\n\n1502\n01:12:49,650 --> 01:12:54,000\nBusiness contingency plans, the event\nthat your main facility is destroyed.\n\n1503\n01:12:54,000 --> 01:12:57,080\nWe're talking about hurricane and\ninclement weather plans.\n\n1504\n01:12:57,080 --> 01:13:02,040\nAll of those other things that relate to\npossible interruptions in your business.\n\n1505\n01:13:02,040 --> 01:13:06,810\nHow you recognize them, how you react\nto them and how you recover from them.\n\n1506\n01:13:06,810 --> 01:13:07,705\nAnd it is different, right?\n\n1507\n01:13:07,705 --> 01:13:08,945\n>> Mm-hm.\n>> How do I react to them?\n\n1508\n01:13:08,945 --> 01:13:09,930\n>> Mm-hm.\n>> What do I do\n\n1509\n01:13:09,930 --> 01:13:12,770\nto keep my company doing business\nin light of that failure?\n\n1510\n01:13:12,770 --> 01:13:14,470\nHow do I recover from them?\n\n1511\n01:13:14,470 --> 01:13:17,870\nHow do I get my business back to\na 100% functionality, right, so\n\n1512\n01:13:17,870 --> 01:13:21,210\nslight difference there between react and\nrecover.\n\n1513\n01:13:21,210 --> 01:13:24,060\nBut these are things that\nwe need to document so\n\n1514\n01:13:24,060 --> 01:13:27,340\nthat when a catastrophe happens,\nwhen a security failure or\n\n1515\n01:13:27,340 --> 01:13:30,980\na security incident occurs,\nwe're not sitting there trying to figure\n\n1516\n01:13:30,980 --> 01:13:34,160\nout what to do, we just grab our policy we\nsay what does the policy say I should do?\n\n1517\n01:13:34,160 --> 01:13:36,370\nYou know?\nAnd we can be level headed,\n\n1518\n01:13:36,370 --> 01:13:39,130\nwe can make sure we don't miss steps and\nwe get things done.\n\n1519\n01:13:39,130 --> 01:13:43,040\nBut also when one of your end\nusers violates the policy.\n\n1520\n01:13:43,040 --> 01:13:45,340\nRight?\nYou can't just be mad at them.\n\n1521\n01:13:45,340 --> 01:13:47,791\nYou can break out this paper and\nsay, you know what,\n\n1522\n01:13:47,791 --> 01:13:50,925\nyou specifically violated our\nsecurity policy, you're fired.\n\n1523\n01:13:50,925 --> 01:13:53,100\n>> Yeah\n>> Or, you know, it's time to go to court.\n\n1524\n01:13:53,100 --> 01:13:54,930\nIt might be very significant.\n\n1525\n01:13:54,930 --> 01:13:56,850\nSo, if you have that documented,\n\n1526\n01:13:56,850 --> 01:14:00,095\nif you have that in place, it also\ngives you something to audit against.\n\n1527\n01:14:00,095 --> 01:14:02,230\n>> Mm-hm.\n>> When you build up a new server,\n\n1528\n01:14:02,230 --> 01:14:06,180\nyou might build it up in 100%\ncompliance to your security policy.\n\n1529\n01:14:06,180 --> 01:14:09,290\nBut over time,\npeople work with the server.\n\n1530\n01:14:09,290 --> 01:14:10,730\nNew software gets installed.\n\n1531\n01:14:10,730 --> 01:14:12,680\nPeople turn some things\noff to troubleshoot and\n\n1532\n01:14:12,680 --> 01:14:14,615\nforget to turn them back on again, right?\n\n1533\n01:14:14,615 --> 01:14:15,705\n>> Mm-hm.\n>> I see that all the time.\n\n1534\n01:14:15,705 --> 01:14:17,110\n>> Mm-hm.\n>> Somebody turns the Windows firewall\n\n1535\n01:14:17,110 --> 01:14:18,180\noff to troubleshoot\n>> And\n\n1536\n01:14:18,180 --> 01:14:20,380\nthen they forget to turn it back on right,\nthat kind of stuff.\n\n1537\n01:14:20,380 --> 01:14:25,610\nSo these are things that happen and\nif you don't audit,\n\n1538\n01:14:25,610 --> 01:14:27,780\nif you don't go and review,\nyou might not know it, and so\n\n1539\n01:14:27,780 --> 01:14:31,200\nyou might have a significantly weaker\nsystem than you thought you did so,\n\n1540\n01:14:31,200 --> 01:14:34,210\nby having a documented policy,\nonce a week, once a month,\n\n1541\n01:14:34,210 --> 01:14:37,510\nonce a year, whatever, you review your\nsystem, you go down the policy and\n\n1542\n01:14:37,510 --> 01:14:41,890\nyou say, is this system configured to\nmeet the requirements of my policy.\n\n1543\n01:14:41,890 --> 01:14:45,930\nBut it does take somebody sitting down and\ndrafting all of this, writing it up.\n\n1544\n01:14:45,930 --> 01:14:46,950\nIt's paperwork.\n\n1545\n01:14:46,950 --> 01:14:49,270\nIt is bureaucracy, but\nit serves a purpose.\n\n1546\n01:14:49,270 --> 01:14:51,790\n>> Yeah, a lot of times when\nyou're new at this, people don't\n\n1547\n01:14:51,790 --> 01:14:55,950\nunderstand the overall idea of a purpose,\nbecause I get asked that question a lot.\n\n1548\n01:14:55,950 --> 01:14:57,960\nWhy don't,\nI know how to secure a device Ronnie,\n\n1549\n01:14:57,960 --> 01:15:00,520\nI don't need something\nto tell me what to do.\n\n1550\n01:15:00,520 --> 01:15:02,550\nBut if you were to have two\ndifferent individuals right?\n\n1551\n01:15:02,550 --> 01:15:03,830\nDepending on their background and\n\n1552\n01:15:03,830 --> 01:15:07,920\nwhat they do, they could come up with two\ndifferent ways to secure the same device.\n\n1553\n01:15:07,920 --> 01:15:10,860\nWell what we need is a way\nthat we can judge whether or\n\n1554\n01:15:10,860 --> 01:15:13,070\nnot that device is secure.\n\n1555\n01:15:13,070 --> 01:15:14,730\nThe policy helps us to do that.\n\n1556\n01:15:14,730 --> 01:15:17,630\nIf I were to take a third person say,\nI want you to actually\n\n1557\n01:15:17,630 --> 01:15:21,010\nprove to me that this device is secure\naccording to this document they can go and\n\n1558\n01:15:21,010 --> 01:15:25,000\nmeasure both of those people's ways of\nimplementing it and then determine,\n\n1559\n01:15:25,000 --> 01:15:27,080\nhey, here's where one guy met the policy.\n\n1560\n01:15:27,080 --> 01:15:27,910\nHere's where another one did.\n\n1561\n01:15:27,910 --> 01:15:31,840\nEven though we can do that on individual\nones, Don just pointed out that we can do\n\n1562\n01:15:31,840 --> 01:15:35,350\nit for our entire organization and\nit's really a good thing for us.\n\n1563\n01:15:35,350 --> 01:15:39,190\nBecause the whole goal of us being\nin business is to do business.\n\n1564\n01:15:39,190 --> 01:15:42,600\nAnd so we want to keep that\nidea propagating and going.\n\n1565\n01:15:42,600 --> 01:15:47,000\nWell, if I happen to disappear,\nwe have something that we can go by and\n\n1566\n01:15:47,000 --> 01:15:49,950\nstill continue on and do that, and\nwe have a way that we can also\n\n1567\n01:15:49,950 --> 01:15:54,240\nmaintain that security and do all\nthose auditing things that we need to.\n\n1568\n01:15:54,240 --> 01:15:57,830\n>> Yep, you know the Canadian\ngovernment actually has a template,\n\n1569\n01:15:57,830 --> 01:16:01,580\nsecurity policy that they provide to\ncompanies, so if you trying to create one,\n\n1570\n01:16:01,580 --> 01:16:02,550\nit gives you a starting point.\n\n1571\n01:16:02,550 --> 01:16:04,550\nNow everybody's needs are different\n>> Right\n\n1572\n01:16:04,550 --> 01:16:05,980\n>> So it's a really a high level template\n\n1573\n01:16:05,980 --> 01:16:08,790\nbut lets show this as an example,\nif we pull up my machine.\n\n1574\n01:16:08,790 --> 01:16:10,310\nHere we go.\n\n1575\n01:16:10,310 --> 01:16:13,290\nSo this is from the Canadian government,\nI didn't make this.\n\n1576\n01:16:13,290 --> 01:16:15,300\nBut basically it's a security\npolicy template for\n\n1577\n01:16:15,300 --> 01:16:19,370\na company and all it does is give you\nthe basic sections that you need.\n\n1578\n01:16:19,370 --> 01:16:20,420\nIt's a one page template.\n\n1579\n01:16:20,420 --> 01:16:21,420\nIt's not very big.\n\n1580\n01:16:21,420 --> 01:16:23,900\nBut it shows the types of\nthings you want to include.\n\n1581\n01:16:23,900 --> 01:16:27,670\nAn introduction, just the basic\ndescription of what this policy is and\n\n1582\n01:16:27,670 --> 01:16:29,490\nwhat purpose it's going to serve.\n\n1583\n01:16:29,490 --> 01:16:31,480\nAnd then Roles and Responsibilities.\n\n1584\n01:16:31,480 --> 01:16:34,970\nYou need to define what\npeople are responsible for\n\n1585\n01:16:34,970 --> 01:16:37,230\nwhat portions of security\nin your environment, right?\n\n1586\n01:16:37,230 --> 01:16:39,600\nYou're gonna have different people\nwho are incident responders.\n\n1587\n01:16:39,600 --> 01:16:43,050\nYou're gonna have people who are just\nparticipants in the security process,\n\n1588\n01:16:43,050 --> 01:16:44,160\nyou know, all your employees.\n\n1589\n01:16:44,160 --> 01:16:47,530\nSo you'll have different tiers of people,\nyou need to define that here.\n\n1590\n01:16:47,530 --> 01:16:50,270\nAnd then your directives for\nthe security policy, right?\n\n1591\n01:16:50,270 --> 01:16:54,830\nWhat we should use for maintaining and\nupdating the security policy, itself.\n\n1592\n01:16:54,830 --> 01:16:56,410\nThe security procedures.\n\n1593\n01:16:56,410 --> 01:16:57,280\nRight?\n\n1594\n01:16:57,280 --> 01:17:00,970\nThen the important part,\nenforcement, auditing and reporting.\n\n1595\n01:17:00,970 --> 01:17:04,330\nHow do we ensure that people\nare following our security policy?\n\n1596\n01:17:04,330 --> 01:17:05,420\nThat the systems are maintaining it.\n\n1597\n01:17:05,420 --> 01:17:06,940\nIf they violate, what do we do?\n\n1598\n01:17:06,940 --> 01:17:08,060\nWhat is our enforcement?\n\n1599\n01:17:08,060 --> 01:17:10,860\nHow do we punish, or reinforce,\n\n1600\n01:17:10,860 --> 01:17:14,910\nor reeducate to ensure that people\nare following the process, right?\n\n1601\n01:17:14,910 --> 01:17:15,780\n>> Yep.\n\n1602\n01:17:15,780 --> 01:17:19,280\n>> Then any references, a lot of\norganizations will have a separate\n\n1603\n01:17:19,280 --> 01:17:21,450\nbusiness resumption plan or\nsomething like that.\n\n1604\n01:17:21,450 --> 01:17:24,260\nAnd so we may refer off aspects of that.\n\n1605\n01:17:24,260 --> 01:17:27,020\nAnd then lastly control and\nmaintenance, how we control and\n\n1606\n01:17:27,020 --> 01:17:29,410\nmaintain the policy itself.\n\n1607\n01:17:29,410 --> 01:17:32,070\nWe've got all these systems and\nsecurity policies in place.\n\n1608\n01:17:32,070 --> 01:17:34,130\nCan anybody change the security policy?\n\n1609\n01:17:34,130 --> 01:17:35,040\nMaybe we need to have a vote.\n\n1610\n01:17:35,040 --> 01:17:37,340\nMaybe we need to have a certain\namount of review first.\n\n1611\n01:17:37,340 --> 01:17:38,600\nThat would be defined here.\n\n1612\n01:17:38,600 --> 01:17:40,580\n>> Yeah.\n>> These are all aspects of the policy.\n\n1613\n01:17:40,580 --> 01:17:42,840\nNow this is just one page, but\n\n1614\n01:17:42,840 --> 01:17:47,160\nmost organizations' security policy\ncan be very, very big, very long.\n\n1615\n01:17:47,160 --> 01:17:48,980\nIt depends on how detailed\nyou want to get, so\n\n1616\n01:17:48,980 --> 01:17:51,420\njust keep that in mind,\nthere are starting points.\n\n1617\n01:17:51,420 --> 01:17:54,740\nYou can do a Google Search and, let's see,\n\n1618\n01:17:54,740 --> 01:17:57,310\nI think I've got one going\nback here somewhere.\n\n1619\n01:17:57,310 --> 01:18:01,240\nYou can do a Google Search for\njust like a security policy template,\n\n1620\n01:18:02,630 --> 01:18:05,330\nand you can find, or an example\n\n1621\n01:18:05,330 --> 01:18:09,210\nI want to say it was the University\nof California that published theirs.\n\n1622\n01:18:09,210 --> 01:18:11,350\nSo you know you can find\nsome that are out there and\n\n1623\n01:18:11,350 --> 01:18:15,800\nget a really good idea\nof what's out there.\n\n1624\n01:18:15,800 --> 01:18:20,990\nHere's some college I\ndon't know which one.\n\n1625\n01:18:20,990 --> 01:18:22,040\nBut you can find other people.\n\n1626\n01:18:22,040 --> 01:18:23,270\nSo you're not reinventing the wheel,\n\n1627\n01:18:23,270 --> 01:18:26,600\nyou can kind of start from something\nthat somebody else has already drafted.\n\n1628\n01:18:26,600 --> 01:18:31,290\nOh this is a quick 14 page one that\nbreaks in risk management and stuff.\n\n1629\n01:18:31,290 --> 01:18:32,890\nSo you'll find some that are out there.\n\n1630\n01:18:32,890 --> 01:18:35,420\nThis one, whatever organization this is,\nis medical.\n\n1631\n01:18:35,420 --> 01:18:38,710\nSo it's got Hippaa compliance\ninformation tied into it.\n\n1632\n01:18:38,710 --> 01:18:41,500\nIn the United States we have the Hippaa,\n\n1633\n01:18:41,500 --> 01:18:44,050\nthe health information privacy\n>> Privacy yeah.\n\n1634\n01:18:44,050 --> 01:18:44,630\n>> Act.\nSomething.\n\n1635\n01:18:44,630 --> 01:18:48,610\nI think I left an A or\na P out or something.\n\n1636\n01:18:48,610 --> 01:18:49,460\nBut anyhow, it's.\n\n1637\n01:18:49,460 --> 01:18:50,220\nOh here it is.\n\n1638\n01:18:50,220 --> 01:18:51,910\nHealth Insurance Portability and\n\n1639\n01:18:51,910 --> 01:18:54,190\nAccountability Act\n>> I was off.\n\n1640\n01:18:54,190 --> 01:18:57,230\n[LAUGH] So if you're handling any\nmedical data, there's extra security,\n\n1641\n01:18:57,230 --> 01:18:59,800\nsecurity stuff\n>> Stuff, yeah.\n\n1642\n01:18:59,800 --> 01:19:02,590\n>> That you need to implement I\nkeep forgetting the word there.\n\n1643\n01:19:02,590 --> 01:19:04,860\nBut precautions, there we go.\n\n1644\n01:19:04,860 --> 01:19:07,550\nSo you gotta take extra\nsteps to secure your data.\n\n1645\n01:19:07,550 --> 01:19:10,330\nAnd so this is just an example of\nwhere they're breaking that down.\n\n1646\n01:19:10,330 --> 01:19:11,350\nWho runs the show.\n\n1647\n01:19:11,350 --> 01:19:13,390\nWho's allowed to make changes and\nso on and\n\n1648\n01:19:13,390 --> 01:19:17,220\nyou'll see this is a fairly large\ndocument clocking in 14 pages.\n\n1649\n01:19:17,220 --> 01:19:20,480\nBut you can take something like this and\nuse it as the starting point for\n\n1650\n01:19:20,480 --> 01:19:21,590\nyour organization.\n\n1651\n01:19:21,590 --> 01:19:22,590\nCustomize it.\n\n1652\n01:19:22,590 --> 01:19:23,220\nTweak it.\n\n1653\n01:19:23,220 --> 01:19:26,750\nSet it to meet your needs, and\nthen it's a living document.\n\n1654\n01:19:26,750 --> 01:19:29,290\nSo over time, you update it to reflect\nthe needs of your organization.\n\n1655\n01:19:30,700 --> 01:19:32,420\nAll right, so that is a security policy.\n\n1656\n01:19:32,420 --> 01:19:35,710\nIt is a good idea for\nevery organization to have one.\n\n1657\n01:19:35,710 --> 01:19:37,115\nIt's an incredibly useful thing.\n\n1658\n01:19:37,115 --> 01:19:39,012\n>> Mm-hm.\n\n1659\n01:19:39,012 --> 01:19:40,840\n>> All right, well, Ronnie,\nI wasn't paying attention to the clock.\n\n1660\n01:19:40,840 --> 01:19:42,590\n>> Me neither.\n>> And I think I went a little long there.\n\n1661\n01:19:42,590 --> 01:19:43,320\nSo, why don't we do this?\n\n1662\n01:19:43,320 --> 01:19:44,500\nWhy don't we stop here and take a break??\n\n1663\n01:19:44,500 --> 01:19:46,790\nWhen we get back,\nwe've got the last couple things,\n\n1664\n01:19:46,790 --> 01:19:50,650\nwe need to talk about mobile devices\na little bit, and data loss prevention.\n\n1665\n01:19:50,650 --> 01:19:54,600\nSo we'll tackle those, and then that will\npretty much wrap up the objective, right?\n\n1666\n01:19:54,600 --> 01:19:55,250\n>> Sure will.\n\n1667\n01:19:55,250 --> 01:19:56,251\n>> All right, so ladies and\ngentlemen stay tuned.\n\n1668\n01:19:56,251 --> 01:20:00,431\nWhen we get back the exciting\nconclusion of common security threats.\n\n1669\n01:20:00,431 --> 01:20:04,141\n[SOUND] All right,\n\n1670\n01:20:04,141 --> 01:20:10,440\nwelcome back, everybody.\n\n1671\n01:20:10,440 --> 01:20:13,905\nSo, for our last segment, we've got\njust a couple of objectives left.\n\n1672\n01:20:13,905 --> 01:20:17,914\nThe next one is mobile and remote security\nwhich is basically, in this day and age,\n\n1673\n01:20:17,914 --> 01:20:20,893\nyou have a lot of employees that\nare not inside your company but\n\n1674\n01:20:20,893 --> 01:20:22,340\nthey're working remotely.\n\n1675\n01:20:22,340 --> 01:20:25,363\nThey're at a hotel or a conference center,\nor they're working from home.\n\n1676\n01:20:25,363 --> 01:20:29,025\nSo, how do we provide security for\nthese users who are outside, but\n\n1677\n01:20:29,025 --> 01:20:32,540\nneed access to resources\ninside your organization.\n\n1678\n01:20:32,540 --> 01:20:34,740\n>> Well, we have a couple\nways where we could do this.\n\n1679\n01:20:34,740 --> 01:20:37,150\nIf I wanted to, I could actually,\nfrom their hotel room,\n\n1680\n01:20:37,150 --> 01:20:40,220\nmaybe get a T1 line installed, right?\n\n1681\n01:20:40,220 --> 01:20:42,730\nAnd be able to connect that way.\n\n1682\n01:20:42,730 --> 01:20:45,350\nBut that's probably a little bit beyond\nthe scope of what we would really wanna\n\n1683\n01:20:45,350 --> 01:20:47,170\ndo, or ever want to do.\n\n1684\n01:20:47,170 --> 01:20:49,720\n>> Yeah, I don't think a hotel is gonna\nlet you run a dedicated line into one of\n\n1685\n01:20:49,720 --> 01:20:50,415\ntheir rooms.\n\n1686\n01:20:50,415 --> 01:20:51,020\n>> [LAUGH]\n>> But\n\n1687\n01:20:51,020 --> 01:20:54,150\nthere's always a solution\nif cost is no object.\n\n1688\n01:20:54,150 --> 01:20:55,970\n>> Right.\n>> And so if they're a home user,\n\n1689\n01:20:55,970 --> 01:20:58,970\nyou might get a point-to-point\nline of some sort run.\n\n1690\n01:20:58,970 --> 01:21:00,960\nMaybe an MPLS line or whatever.\n\n1691\n01:21:00,960 --> 01:21:05,570\nBut more commonly, we're gonna leverage\nVPNs, virtual private networks, and\n\n1692\n01:21:05,570 --> 01:21:10,560\nthese are ways we can create a connection\nfrom a remote user, or a remote location,\n\n1693\n01:21:10,560 --> 01:21:15,570\nback to our main office, using a public\nnon-secure network like the Internet.\n\n1694\n01:21:15,570 --> 01:21:18,740\n>> Yep.\nAnd the nice thing is the security\n\n1695\n01:21:18,740 --> 01:21:19,900\naspect of it.\n\n1696\n01:21:19,900 --> 01:21:23,280\nWe still maintain that same idea\nof the point-to-point connection.\n\n1697\n01:21:23,280 --> 01:21:26,690\nBut we do it over the public network\nhere by using VPN connections.\n\n1698\n01:21:26,690 --> 01:21:28,290\n>> And now the reason we need that, right.\n\n1699\n01:21:28,290 --> 01:21:31,140\nWhy don't we just send out data over\nthe Internet and be done with it.\n\n1700\n01:21:31,140 --> 01:21:32,870\nThe Internet is not a secure network.\n\n1701\n01:21:32,870 --> 01:21:33,570\nIt's not safe, right?\n\n1702\n01:21:33,570 --> 01:21:34,100\n>> Right.\n\n1703\n01:21:34,100 --> 01:21:36,780\n>> So, our threat that we have to\nworry about here is what's called\n\n1704\n01:21:36,780 --> 01:21:38,550\na man-in-the-middle attack.\n\n1705\n01:21:38,550 --> 01:21:42,110\nIf we have somebody at home,\nconnecting to the office,\n\n1706\n01:21:42,110 --> 01:21:46,530\nthere's all this space in between\nthe two where an attacker can sit.\n\n1707\n01:21:46,530 --> 01:21:50,460\nAnd it can sit at any hop along that\njourney, intercept your traffic,\n\n1708\n01:21:50,460 --> 01:21:53,170\nredirect your traffic, modify and\nre-transmit, you know,\n\n1709\n01:21:53,170 --> 01:21:54,980\nthere's all sorts of stuff they can do.\n\n1710\n01:21:54,980 --> 01:21:56,500\nSo how do we prevent that?\n\n1711\n01:21:56,500 --> 01:21:57,990\nAnd a VPN tunnel will do it.\n\n1712\n01:21:57,990 --> 01:22:01,810\nIt encrypts your traffic and\nthen sends it across the Internet.\n\n1713\n01:22:01,810 --> 01:22:03,620\nSo somebody stages\na man-in-the-middle attack,\n\n1714\n01:22:03,620 --> 01:22:06,850\nthey start intercepting that data,\nit's all encrypted.\n\n1715\n01:22:06,850 --> 01:22:08,040\nThey can't do anything with it.\n\n1716\n01:22:08,040 --> 01:22:11,020\nAnd they can't inject their own traffic\nbecause they don't have the encryption\n\n1717\n01:22:11,020 --> 01:22:12,000\nkey so.\n\n1718\n01:22:12,000 --> 01:22:17,410\nIt ensures that our data is safe and that\nwe have confidentiality and integrity.\n\n1719\n01:22:17,410 --> 01:22:21,940\nRight, those are the big terms that we\nlook for being set across the Internet.\n\n1720\n01:22:21,940 --> 01:22:23,720\nSo, very powerful.\n\n1721\n01:22:23,720 --> 01:22:26,490\nThe cool thing about\na VPN is it's virtual.\n\n1722\n01:22:26,490 --> 01:22:27,510\nIt's not a physical network.\n\n1723\n01:22:27,510 --> 01:22:28,660\nSo it's not like a point-to-point line.\n\n1724\n01:22:28,660 --> 01:22:30,080\nWe don't have to call the Telco.\n\n1725\n01:22:30,080 --> 01:22:31,410\nAnd get it installed.\n\n1726\n01:22:31,410 --> 01:22:35,610\nSomebody can be at a hotel or\nthey can be in a conference center,\n\n1727\n01:22:35,610 --> 01:22:40,430\nand they can just VPN right back in and\nthey'll be in business.\n\n1728\n01:22:40,430 --> 01:22:43,020\nSo, very cool, very flexible.\n\n1729\n01:22:43,020 --> 01:22:45,870\nCisco supports VPN\ntunnels on their routers,\n\n1730\n01:22:45,870 --> 01:22:50,220\nas well as on their intrusion prevention\nsystems and on their firewalls.\n\n1731\n01:22:50,220 --> 01:22:51,620\nOn their ASAs.\n\n1732\n01:22:51,620 --> 01:22:55,540\nSo, you're normally gonna be\nusing them on the ASAs, but\n\n1733\n01:22:55,540 --> 01:22:57,590\nyou can set them up on\nsome any other devices.\n\n1734\n01:22:57,590 --> 01:23:02,480\nSo very powerful stuff, really not\nthat hard to implement and we have\n\n1735\n01:23:02,480 --> 01:23:06,200\nan entire objective to tackle for VPNs\nthat we'll do toward the end of the show.\n\n1736\n01:23:07,690 --> 01:23:12,240\nBut definitely useful stuff, if you are\ngonna use it in any corporate environment.\n\n1737\n01:23:14,940 --> 01:23:18,340\nAll right, and the last objective that\nwe've got here for our common security\n\n1738\n01:23:18,340 --> 01:23:21,430\nthreats, is not really a threat at all,\nbut a tool that's available for us.\n\n1739\n01:23:21,430 --> 01:23:25,120\nSo, one of the biggest problems that\norganizations have is what's called,\n\n1740\n01:23:25,120 --> 01:23:25,920\ndata lost, right?\n\n1741\n01:23:25,920 --> 01:23:29,760\n>> Right.\n>> Data loss is where your proprietary or\n\n1742\n01:23:29,760 --> 01:23:33,530\nsecret or\nwhatever information gets out there.\n\n1743\n01:23:33,530 --> 01:23:37,090\nSo we need to implement DLP,\nwhich is data loss prevention.\n\n1744\n01:23:38,160 --> 01:23:44,120\nThink, for example, maybe you work for\nthe Coca-Cola company, right?\n\n1745\n01:23:44,120 --> 01:23:47,580\nNow Coca-cola, they're a soda company,\nif you're not familiar.\n\n1746\n01:23:47,580 --> 01:23:49,700\n>> [LAUGH]\n>> I think most of the world probably is.\n\n1747\n01:23:49,700 --> 01:23:53,150\nThey really just have one piece of\ninformation that's worth anything.\n\n1748\n01:23:53,150 --> 01:23:55,431\nAnd that's the formula for\nmaking Coca-Cola.\n\n1749\n01:23:55,431 --> 01:23:55,980\n>> Coca-cola, yeah.\n\n1750\n01:23:55,980 --> 01:23:58,880\n>> Right?\nThat soda, that flavor and all that.\n\n1751\n01:23:58,880 --> 01:23:59,850\nThat's their secret.\n\n1752\n01:23:59,850 --> 01:24:00,680\nAll right?\n\n1753\n01:24:00,680 --> 01:24:02,030\nEverybody knows how to make soda.\n\n1754\n01:24:02,030 --> 01:24:05,370\nAnd everybody knows how to put soda\nin a can or a bottle or whatever.\n\n1755\n01:24:05,370 --> 01:24:06,850\nThat's not secretive information.\n\n1756\n01:24:06,850 --> 01:24:07,665\nTons of companies do it.\n\n1757\n01:24:07,665 --> 01:24:08,330\n>> Mm-hm.\n\n1758\n01:24:08,330 --> 01:24:12,140\n>> But the flavor, the formula of Coke,\nwhich I don't care for myself, but\n\n1759\n01:24:12,140 --> 01:24:14,680\napparently a lot of people do,\nthat's how they make their money.\n\n1760\n01:24:14,680 --> 01:24:19,270\nWhat would happen if that formula got\nout and people figured it out and\n\n1761\n01:24:19,270 --> 01:24:22,200\nnow anybody could make actual Coca-Cola?\n\n1762\n01:24:22,200 --> 01:24:24,250\nThe company would basically cease.\n\n1763\n01:24:24,250 --> 01:24:26,300\nIt'd be no point in having\nthat company anymore.\n\n1764\n01:24:26,300 --> 01:24:28,590\nSo that is information\nthey need to protect.\n\n1765\n01:24:28,590 --> 01:24:30,150\nThey don't want that to get out.\n\n1766\n01:24:30,150 --> 01:24:34,530\nSo how do you protect from data loss,\nif a hacker gets into your network,\n\n1767\n01:24:34,530 --> 01:24:36,190\nhow do you stop them from getting in?\n\n1768\n01:24:36,190 --> 01:24:37,710\nAnd if they start trying\nto take information out,\n\n1769\n01:24:37,710 --> 01:24:39,910\nhow do you stop them from\ngetting that information out?\n\n1770\n01:24:39,910 --> 01:24:41,520\nWhat's available?\n\n1771\n01:24:41,520 --> 01:24:44,900\nWell, we've talked about a number\nof tools all throughout the show.\n\n1772\n01:24:44,900 --> 01:24:49,380\nWe talked about firewalls and\nIPSs and VPNs, and different things.\n\n1773\n01:24:49,380 --> 01:24:53,560\nWell, there's even more stuff like ALGs.\n\n1774\n01:24:53,560 --> 01:24:56,910\nALGs are application layer gateways, and\n\n1775\n01:24:56,910 --> 01:25:01,800\nthey're special devices that filter\nparticular types of traffic,\n\n1776\n01:25:01,800 --> 01:25:07,535\njust email or just web or just FTP and\nhandles that traffic a certain way, right?\n\n1777\n01:25:07,535 --> 01:25:08,300\n>> Mm-hm.\n\n1778\n01:25:08,300 --> 01:25:09,270\n>> They're very effective.\n\n1779\n01:25:09,270 --> 01:25:10,715\nBut they're very complex.\n\n1780\n01:25:10,715 --> 01:25:12,210\n>> Mm-hm\n>> And there's a ton of them.\n\n1781\n01:25:12,210 --> 01:25:14,010\n>> Oh yeah.\n>> So it's hard to manage.\n\n1782\n01:25:14,010 --> 01:25:15,795\nSo Cisco has a line of products.\n\n1783\n01:25:15,795 --> 01:25:16,810\n>> Mm-hm.\n>> And this is gonna sound like\n\n1784\n01:25:16,810 --> 01:25:18,320\na sales pitch.\n\n1785\n01:25:18,320 --> 01:25:22,160\nIt basically is a sales pitch, but\nunfortunately this is how they approach it\n\n1786\n01:25:22,160 --> 01:25:26,924\non the exam, so we have to do it,\nwhich is, if you want to have an easy\n\n1787\n01:25:26,924 --> 01:25:31,980\nimplement way to prevent data loss, Cisco\nhas a line of products called IronPorts.\n\n1788\n01:25:31,980 --> 01:25:35,165\nAnd let me just bring\nup the IronPort page.\n\n1789\n01:25:35,165 --> 01:25:36,372\nHere we go.\n\n1790\n01:25:36,372 --> 01:25:39,100\nThe IronPorts, you'll see,\nright in the very first sentence.\n\n1791\n01:25:39,100 --> 01:25:41,080\nData loss prevention poses blah blah blah.\n\n1792\n01:25:41,080 --> 01:25:41,970\nRight.\nDLP.\n\n1793\n01:25:41,970 --> 01:25:43,530\nSo that's why I'm bringing it up here,\n\n1794\n01:25:43,530 --> 01:25:46,730\nthis is what Cisco is talking about,\nwith the exam objectives.\n\n1795\n01:25:46,730 --> 01:25:49,015\nSo if you wanna go the extra mile and\n\n1796\n01:25:49,015 --> 01:25:52,065\nmake sure your network is secure,\nyou do implement firewalls,\n\n1797\n01:25:52,065 --> 01:25:56,685\nyou do implement secured routers,\nyou do implement VPNs, but you also\n\n1798\n01:25:56,685 --> 01:26:01,703\nimplement devices like the Cisco IronPorts\nto prevent other types of data loss.\n\n1799\n01:26:01,703 --> 01:26:06,675\nAnd what an IronPort does is, it takes\na number of different components, right?\n\n1800\n01:26:06,675 --> 01:26:10,734\nSo here, they've got encryption for\nlike, VPNs and email.\n\n1801\n01:26:10,734 --> 01:26:14,510\nAnti-spam, anti-virus,\nmail routing, groupware,\n\n1802\n01:26:14,510 --> 01:26:19,482\nall these different pieces that you might\nhave, right, that would be separate\n\n1803\n01:26:19,482 --> 01:26:24,945\napplication layer gateways and it rolls\nthem all into one big appliance, right?\n\n1804\n01:26:24,945 --> 01:26:28,760\nOne appliance that's very easy to manage\nwith a web interface that takes care of\n\n1805\n01:26:28,760 --> 01:26:30,980\nall of those roles, and that's it.\n\n1806\n01:26:30,980 --> 01:26:33,490\nNow, this example they're\ngiving us here is email.\n\n1807\n01:26:33,490 --> 01:26:37,140\nAnd that's why we have like an MTA,\na message transfer agent.\n\n1808\n01:26:37,140 --> 01:26:39,670\nAnd so\nthey're showing all email related stuff.\n\n1809\n01:26:39,670 --> 01:26:43,870\nBut they make IronPorts that do\nweb scanning, as well as email,\n\n1810\n01:26:43,870 --> 01:26:45,990\nas well as other types of\nroles that are out there.\n\n1811\n01:26:45,990 --> 01:26:50,460\nSo this is just one example of how we can\nconsolidate all those services together,\n\n1812\n01:26:50,460 --> 01:26:52,060\ninto one appliance, right?\n\n1813\n01:26:52,060 --> 01:26:55,210\nOne, not so inexpensive appliance.\n\n1814\n01:26:55,210 --> 01:26:56,780\nSo they're a little pricey.\n\n1815\n01:26:56,780 --> 01:27:00,080\nBut again, if you're dealing with\ninformation that is of a super sensitive\n\n1816\n01:27:00,080 --> 01:27:04,200\nor super critical nature, the price\nof this box is a drop in the bucket\n\n1817\n01:27:04,200 --> 01:27:06,900\ncompared to the cost of losing\nyour information, right?\n\n1818\n01:27:06,900 --> 01:27:08,110\nLosing that data.\n\n1819\n01:27:08,110 --> 01:27:11,860\n>> Yeah, Cisco is so proud of this\nparticular piece of technology that they\n\n1820\n01:27:11,860 --> 01:27:16,101\nbought, that they nearly spent a billion\ndollars in purchasing this company when\n\n1821\n01:27:16,101 --> 01:27:17,155\nthey purchased it.\n\n1822\n01:27:17,155 --> 01:27:19,279\nIt's like 980 billion dollar or\n\n1823\n01:27:19,279 --> 01:27:22,613\nmillion dollars that they\nactually ended up spending.\n\n1824\n01:27:22,613 --> 01:27:28,590\nSo this is their premium, their high-end\nfeature for the security that it offers.\n\n1825\n01:27:28,590 --> 01:27:29,980\nThey really love this.\n\n1826\n01:27:29,980 --> 01:27:34,180\n>> I'm trying to find the main\nIronPort landing page.\n\n1827\n01:27:34,180 --> 01:27:35,120\nHere we go.\n\n1828\n01:27:35,120 --> 01:27:37,850\nOh, and that's the press release for\nthe thing.\n\n1829\n01:27:37,850 --> 01:27:41,910\nWell, anyhow, they make a number\nof different IronPort boxes and\n\n1830\n01:27:41,910 --> 01:27:45,490\nI was hoping to give you\na list of all of them.\n\n1831\n01:27:47,090 --> 01:27:47,740\nLet's see.\n\n1832\n01:27:49,440 --> 01:27:52,760\nI mean, they specifically called\nthe email and web security here.\n\n1833\n01:27:52,760 --> 01:27:54,641\nI know there's five or\nsix different ones and\n\n1834\n01:27:54,641 --> 01:27:56,584\nthey all have different\ncolored faceplates.\n\n1835\n01:27:56,584 --> 01:28:00,556\nAnd the color of the faceplate is what\ntells you what the device does, you know,\n\n1836\n01:28:00,556 --> 01:28:03,595\nif it's the web one versus the email one,\nversus whatever.\n\n1837\n01:28:03,595 --> 01:28:05,802\nSo, like this is the web security one.\n\n1838\n01:28:05,802 --> 01:28:09,490\nAnd it basically acts as like\na proxy slash in line scanner.\n\n1839\n01:28:09,490 --> 01:28:13,940\nAnd so, it can scan web activity from\nyour users inside going out, as well as\n\n1840\n01:28:13,940 --> 01:28:18,310\noutside users coming in, looking for\nmalicious URLs and other activities.\n\n1841\n01:28:18,310 --> 01:28:18,850\nFiltering and\n\n1842\n01:28:18,850 --> 01:28:22,760\nstopping attacks before they actually\nhit the end points in preventing things.\n\n1843\n01:28:22,760 --> 01:28:25,080\nSo, then, you'll see this one box.\n\n1844\n01:28:25,080 --> 01:28:25,744\nIt comes in three models.\n\n1845\n01:28:25,744 --> 01:28:26,347\n>> [LAUGH].\n\n1846\n01:28:26,347 --> 01:28:31,261\n>> The lowest end can handle up to 1500\nusers, this is not a small business or\n\n1847\n01:28:31,261 --> 01:28:35,890\nmedium business solution,\nthis is a larger enterprise solution unit.\n\n1848\n01:28:35,890 --> 01:28:38,460\nYou need to have a lot of employees\nto really warrant getting one of\n\n1849\n01:28:38,460 --> 01:28:39,390\nthese in here.\n\n1850\n01:28:39,390 --> 01:28:42,350\nBut they are incredibly\neffective at what they do.\n\n1851\n01:28:42,350 --> 01:28:45,490\nAnd they're pretty easy to set up,\nthat's kind of the selling point on these.\n\n1852\n01:28:45,490 --> 01:28:48,790\nIt's a lot easier than managing\nseveral separate devices.\n\n1853\n01:28:48,790 --> 01:28:50,570\n>> Maybe, that all products\ntab that you were just on?\n\n1854\n01:28:51,620 --> 01:28:52,630\nRight there.\n\n1855\n01:28:52,630 --> 01:28:53,730\nSee if that actually showed, nope.\n\n1856\n01:28:53,730 --> 01:28:55,890\n[CROSSTALK].\n\n1857\n01:28:55,890 --> 01:28:58,490\n>> So, let me go to their main security\npage let's see what they have here.\n\n1858\n01:28:58,490 --> 01:29:03,303\nSo, they've got compliant solutions,\napplication, infrastructure\n\n1859\n01:29:03,303 --> 01:29:08,590\nsecurity solutions, threat defense and\nthe way they categorize some of these.\n\n1860\n01:29:08,590 --> 01:29:11,980\nLet's go into threat defense.\n\n1861\n01:29:11,980 --> 01:29:15,162\nSee what we get.\n\n1862\n01:29:15,162 --> 01:29:16,050\nGeneric name, great.\n\n1863\n01:29:16,050 --> 01:29:19,876\n>> [LAUGH]\n>> So, they do.\n\n1864\n01:29:19,876 --> 01:29:22,901\nThey manufacture a series of them and\nthere are email, and web and\n\n1865\n01:29:22,901 --> 01:29:23,620\nfile and so on.\n\n1866\n01:29:23,620 --> 01:29:25,021\nDifferent scanners for different purposes.\n\n1867\n01:29:25,021 --> 01:29:30,020\nBut the point is that these are just as\nyou know, yet another level of defense.\n\n1868\n01:29:30,020 --> 01:29:33,600\nAnd we talk about that defense in depth,\nmultiple tiers of security.\n\n1869\n01:29:33,600 --> 01:29:36,460\nThis is another piece of the puzzle,\nand the larger an organization grows,\n\n1870\n01:29:36,460 --> 01:29:39,540\nthe more likely you are to\nhave devices like this.\n\n1871\n01:29:39,540 --> 01:29:43,020\nCisco is not the only vendor that\nmanufactures things like these, so\n\n1872\n01:29:43,020 --> 01:29:47,930\nI know I've used some from Symantec,\nI've used several from Qualis.\n\n1873\n01:29:47,930 --> 01:29:49,450\nQualis makes really good stuff.\n\n1874\n01:29:49,450 --> 01:29:52,180\nSo, there's several other\ncompanies that do it.\n\n1875\n01:29:52,180 --> 01:29:54,850\nOn the exam though,\nthey'll bring up IronPort.\n\n1876\n01:29:54,850 --> 01:29:56,920\nThey don't want you to know\nhow to configure IronPort or\n\n1877\n01:29:56,920 --> 01:29:59,920\nwhatever, they just want you to\nbe aware that they exist and\n\n1878\n01:29:59,920 --> 01:30:02,450\nthat they serve as another tool for\ndata loss prevention.\n\n1879\n01:30:02,450 --> 01:30:05,100\nThat we can stop data from\nleaking out by having web and\n\n1880\n01:30:05,100 --> 01:30:07,090\nemail scanners like the Cisco IronPort.\n\n1881\n01:30:08,750 --> 01:30:13,650\nI hate that objective, cuz it really\nis a marketing thing, buy more Cisco.\n\n1882\n01:30:13,650 --> 01:30:15,215\nBut we need to know [INAUDIBLE].\n\n1883\n01:30:15,215 --> 01:30:17,164\n>> That's right.\n\n1884\n01:30:17,164 --> 01:30:20,392\n>> All right, well,\nthat pretty much knocks out old 1.0.\n\n1885\n01:30:20,392 --> 01:30:22,720\nRonnie, can you think of\nanything we've left out?\n\n1886\n01:30:22,720 --> 01:30:23,450\n>> I don't think so.\n\n1887\n01:30:23,450 --> 01:30:26,570\nI think we've covered the objective pretty\nwell, I can't say anything [LAUGH].\n\n1888\n01:30:26,570 --> 01:30:30,390\n>> Yeah, it makes up for\na pretty small part of the exam, 6%.\n\n1889\n01:30:30,390 --> 01:30:32,070\nSo, you're likely to have three or\n\n1890\n01:30:32,070 --> 01:30:37,390\nfour questions that are right out of this\nparticular objective, not much more.\n\n1891\n01:30:37,390 --> 01:30:40,774\nIt is mostly a review of what you already\nknew if you did the Security Plus show,\n\n1892\n01:30:40,774 --> 01:30:42,180\nif you watched all those.\n\n1893\n01:30:42,180 --> 01:30:43,950\nBut it is good information to have.\n\n1894\n01:30:43,950 --> 01:30:45,480\nThey do expect you to know it.\n\n1895\n01:30:45,480 --> 01:30:48,110\nThese should be the softball questions,\nthe easy questions for\n\n1896\n01:30:48,110 --> 01:30:51,110\nyou to get when you go into that exam.\n\n1897\n01:30:51,110 --> 01:30:53,075\nAnd then, the harder questions\ncome out of the other objectives.\n\n1898\n01:30:53,075 --> 01:30:57,120\nBut don't dismiss it, it is important.\n\n1899\n01:30:59,420 --> 01:31:04,038\nWell, let me just remind everybody\nthat if you have any questions live\n\n1900\n01:31:04,038 --> 01:31:07,812\nduring the show,\nyou can always go to itpro.tv/live.\n\n1901\n01:31:07,812 --> 01:31:09,750\nThe chat box is right\nthere beneath the video.\n\n1902\n01:31:09,750 --> 01:31:10,780\nYou can post your questions.\n\n1903\n01:31:10,780 --> 01:31:12,800\nWe monitor and answer during the show.\n\n1904\n01:31:12,800 --> 01:31:16,825\nIf you have questions after the show,\non every single page on ITProTV,\n\n1905\n01:31:16,825 --> 01:31:19,085\nthere's a link at the top that says Q&A,\n\n1906\n01:31:19,085 --> 01:31:22,055\nyou can click on that, takes you\nwhere you can post your questions.\n\n1907\n01:31:22,055 --> 01:31:24,475\nWe monitor and answer those and\nmake sure you get the help you need.\n\n1908\n01:31:24,475 --> 01:31:28,080\nSo, definitely, ask away, we like it,\nit gives us something to do in\n\n1909\n01:31:28,080 --> 01:31:32,030\nall of our spare time, of which we\nseem to have so little of these days.\n\n1910\n01:31:32,030 --> 01:31:35,500\n>> But definitely, take advantage of that,\nit's there for you guys.\n\n1911\n01:31:35,500 --> 01:31:39,300\nAnd that's about all I've got,\nso signing off for IT Pro TV.\n\n1912\n01:31:39,300 --> 01:31:40,430\nI'm Don Pezet.\n\n1913\n01:31:40,430 --> 01:31:41,300\n>> And I'm Ronnie Wong.\n\n1914\n01:31:41,300 --> 01:31:42,725\n>> And we'll see you next time.\n\n1915\n01:31:42,725 --> 01:31:52,725\n[MUSIC]\n\n1916\n01:31:54,173 --> 01:32:00,290\n[SOUND]\n\n",
          "vimeoId": "84674810"
        }
      ],
      "title": "Common Security Threats"
    },
    {
      "episodes": [
        {
          "description": "One of the primary goals of the IINS exam is to apply security on Cisco routers, which there are a ton of security options that require a ton of command, but can also be configured through the graphical user interface or the CCP. Viewers will see demonstrations of configuring basic router security using the Cisco Configuration Professional (CCP) and basic Cisco command line features for implementing router security.",
          "length": "4820",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/iins/002-Initial-Router-Security.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/iins/002-Initial-Router-Security-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/iins/002-Initial-Router-Security-sm.jpg",
          "title": "Initial Router Security",
          "transcript": "1\n00:00:00,568 --> 00:00:07,522\n[MUSIC]\n\n2\n00:00:07,522 --> 00:00:15,544\n[SOUND].\n\n3\n00:00:15,544 --> 00:00:25,544\n[MUSIC].\n\n4\n00:00:34,304 --> 00:00:36,621\n>> All right, good morning,\ngood afternoon and good evening and\n\n5\n00:00:36,621 --> 00:00:38,290\nwelcome back to another\nepisode of ITProTV.\n\n6\n00:00:38,290 --> 00:00:41,130\nI'm your host Don Pezet,\ntoday with Mr. Ronnie Wong.\n\n7\n00:00:41,130 --> 00:00:42,020\nHow's it going, Ronnie.\n\n8\n00:00:42,020 --> 00:00:42,850\n>> It is going well.\n\n9\n00:00:42,850 --> 00:00:44,910\nI am not a New England Patriot's fan.\n\n10\n00:00:44,910 --> 00:00:46,690\n>> [LAUGH]\n>> So, I'm doing okay today.\n\n11\n00:00:46,690 --> 00:00:50,767\n>> Yeah,\na lot of hurt feelings at the very minimum\n\n12\n00:00:50,767 --> 00:00:52,216\n>> [CROSSTALK]\n\n13\n00:00:52,216 --> 00:00:53,760\n>> Speaking of hurt feelings.\n\n14\n00:00:53,760 --> 00:00:55,100\n>> Yep.\n>> We get to work with Java today.\n\n15\n00:00:55,100 --> 00:00:58,532\nSo [LAUGH]\n>> A favorite of Don's,\n\n16\n00:00:58,532 --> 00:00:59,710\na personal favorite of Don's.\n\n17\n00:00:59,710 --> 00:01:01,100\n>> For those of you who have\ntuned into other shows,\n\n18\n00:01:01,100 --> 00:01:02,680\nyou probably know that I\nabsolutely hate Java and\n\n19\n00:01:02,680 --> 00:01:05,480\ntoday, there is no way to get around it,\nwe have to use Java.\n\n20\n00:01:05,480 --> 00:01:06,665\nWhy, you might ask?\n\n21\n00:01:06,665 --> 00:01:09,041\n>> Because we're users.\n\n22\n00:01:09,041 --> 00:01:13,480\n>> [LAUGH] Because we're doing our\nintroduction to Cisco router security.\n\n23\n00:01:13,480 --> 00:01:19,250\nAnd as part of the IINS, our primary goal\nis applying security on the Cisco router.\n\n24\n00:01:19,250 --> 00:01:22,480\nAnd in other Cisco shows, you know our\nreal focus has been the command line.\n\n25\n00:01:22,480 --> 00:01:24,060\n>> That's right.\n>> Everything's in the command line,\n\n26\n00:01:24,060 --> 00:01:25,906\ncommand line's manly, it's what you use.\n\n27\n00:01:25,906 --> 00:01:27,667\nBut,\n>> [LAUGH]\n\n28\n00:01:27,667 --> 00:01:28,247\n>> This one,\n\n29\n00:01:28,247 --> 00:01:32,311\nyou'll find that there's a lot of\nsecurity options we configure that just\n\n30\n00:01:32,311 --> 00:01:33,741\nrequire a ton of command.\n\n31\n00:01:33,741 --> 00:01:34,996\n>> Yeah.\n>> You know, just saying,\n\n32\n00:01:34,996 --> 00:01:36,790\na VP intel is like 14 commands.\n\n33\n00:01:36,790 --> 00:01:38,200\nSo, it's just too much.\n\n34\n00:01:38,200 --> 00:01:42,260\nSo, on the exam, they actually\nuse the graphical user interface.\n\n35\n00:01:43,600 --> 00:01:46,800\n>> And the graphical user interface\nthat we used to talk about would\n\n36\n00:01:46,800 --> 00:01:50,960\nhave been something called the SDM,\nthe Secure Device Manager from Cisco.\n\n37\n00:01:50,960 --> 00:01:53,928\nBut they've upgraded that into\nsomething that we call now CCPD,\n\n38\n00:01:53,928 --> 00:01:57,810\nCisco Configuration Professional,\n\n39\n00:01:57,810 --> 00:02:02,240\nwhich is strangely, kind of almost,\nlike a skin or a shell over the SDM.\n\n40\n00:02:02,240 --> 00:02:05,420\n>> Yeah, and\nyou know I've said this before, and\n\n41\n00:02:05,420 --> 00:02:06,620\nI think you said it in the last episode.\n\n42\n00:02:06,620 --> 00:02:09,660\n>> Yeah.\n>> Cisco is a phenomenal hardware company.\n\n43\n00:02:09,660 --> 00:02:11,710\nTheir routers are great,\ntheir switches are great.\n\n44\n00:02:11,710 --> 00:02:13,300\nTheir firewalls, I love them.\n\n45\n00:02:13,300 --> 00:02:15,830\nTheir hardware is really, really good.\n\n46\n00:02:15,830 --> 00:02:19,670\nTheir software is like some of\nthe worst in the absolute planet and\n\n47\n00:02:19,670 --> 00:02:21,610\nthe reason is they outsource it all.\n\n48\n00:02:21,610 --> 00:02:24,420\nNone of it's actually developed by Cisco,\nthe software.\n\n49\n00:02:24,420 --> 00:02:27,890\nAnd so when they outsource it,\nthey always get it done in Java, so\n\n50\n00:02:27,890 --> 00:02:31,080\nthat it'll, in theory,\nrun on any operating system.\n\n51\n00:02:31,080 --> 00:02:32,060\nRight?\nBut then,\n\n52\n00:02:32,060 --> 00:02:34,955\nthey limit it to Internet Explorer so\nit only runs on Windows.\n\n53\n00:02:34,955 --> 00:02:37,830\n>> [LAUGH]\n>> And then, they don't keep it up-to-date\n\n54\n00:02:37,830 --> 00:02:40,600\nso the latest versions of\nJava will typically break it.\n\n55\n00:02:41,600 --> 00:02:45,750\nWith all that being said, I'm gonna run\nthe Cisco configuration professional,\n\n56\n00:02:45,750 --> 00:02:48,780\nthat user base, on my laptop for the show.\n\n57\n00:02:48,780 --> 00:02:51,706\nIf any of you guys tuned in for the live\nshow, you gotta watch me cursing and\n\n58\n00:02:51,706 --> 00:02:54,770\nyelling at my laptop for about an hour,\njust to get the damn thing to work.\n\n59\n00:02:54,770 --> 00:02:58,940\nAnd that's because, everybody, today,\n\n60\n00:02:58,940 --> 00:03:01,690\njob is extremely insecure,\nits got a lot of vulnerabilities.\n\n61\n00:03:01,690 --> 00:03:07,300\nAnd so they are basically forcing people\nto upgrade to Java 1.7 or Java 7, right?\n\n62\n00:03:07,300 --> 00:03:09,630\nAnd well, the CCP doesn't support it.\n\n63\n00:03:09,630 --> 00:03:10,790\nSo there's that.\n\n64\n00:03:10,790 --> 00:03:14,630\nAnd so I had to downgrade to Java 6,\nwhich is actually 1.6.\n\n65\n00:03:14,630 --> 00:03:19,400\nSo I had to downgrade to a version\nof Java that I knew was non-secure.\n\n66\n00:03:19,400 --> 00:03:20,720\nJust to be able to use this GUI.\n\n67\n00:03:20,720 --> 00:03:25,350\nSo, that's the problem with graphical\nuser interfaces in the Cisco world.\n\n68\n00:03:25,350 --> 00:03:27,520\nThey seem convenient, but\n\n69\n00:03:27,520 --> 00:03:32,120\nCisco doesn't keep them updated\nenough to keep them secure.\n\n70\n00:03:32,120 --> 00:03:35,670\nSo, if you stick with the command line,\nyou never have to worry about this stuff.\n\n71\n00:03:35,670 --> 00:03:36,400\nIt's not a problem.\n\n72\n00:03:36,400 --> 00:03:39,170\nAnd you get to move on with your life and\nlive securely.\n\n73\n00:03:39,170 --> 00:03:43,722\nBut on the exam, because they didn't want\neverybody to have to memorize a ton of CLI\n\n74\n00:03:43,722 --> 00:03:47,140\ncommands, they did, go ahead and\nset up for the GUI.\n\n75\n00:03:47,140 --> 00:03:51,270\nJust keep in mind, if you want to run it,\nsome of the things that I had to do.\n\n76\n00:03:51,270 --> 00:03:54,550\nI'm running Windows 8.1\nwith Internet Explorer 11,\n\n77\n00:03:54,550 --> 00:03:57,930\nso you know I'm running\nthe newer software.\n\n78\n00:03:57,930 --> 00:04:03,190\nAnd I had to downgrade Java, I had to put\nInternet Explorer in compatibility mode,\n\n79\n00:04:03,190 --> 00:04:06,330\nand I had to run the CCP\nas an administrator.\n\n80\n00:04:06,330 --> 00:04:10,370\nOnce I had done all three of those things,\nthen it was able to actually run and\n\n81\n00:04:10,370 --> 00:04:11,510\noperate.\n\n82\n00:04:11,510 --> 00:04:16,350\nFor your computer, if you're running\nWindows 7 and an older version of Java,\n\n83\n00:04:16,350 --> 00:04:17,130\nit might not be a problem.\n\n84\n00:04:17,130 --> 00:04:21,540\nIf you're running Windows XP, it'll run\ngreat, but if you're running newer OSs,\n\n85\n00:04:21,540 --> 00:04:23,700\nexpect to have some problems with the CCP.\n\n86\n00:04:23,700 --> 00:04:28,700\n>> The nice thing about the CCP, even if\nyou don't actually have the, you might go,\n\n87\n00:04:28,700 --> 00:04:29,930\nwell, where the heck do I get it?\n\n88\n00:04:29,930 --> 00:04:31,620\nYou can go to Cisco and download it.\n\n89\n00:04:31,620 --> 00:04:32,520\nThe problem that you have though,\n\n90\n00:04:32,520 --> 00:04:35,070\nis you don't have a router,\nwhich doesn't help you.\n\n91\n00:04:35,070 --> 00:04:37,120\nYou have an iOS, that doesn't help you.\n\n92\n00:04:37,120 --> 00:04:40,880\nSo, even though you can,\nit's probably not gonna help you at all.\n\n93\n00:04:40,880 --> 00:04:43,120\nBut they do offer a way where,\nif you can get it,\n\n94\n00:04:43,120 --> 00:04:45,240\nyou can run it in what we call demo mode.\n\n95\n00:04:45,240 --> 00:04:48,370\nAnd there are plenty of sites\nout there on the Internet that\n\n96\n00:04:48,370 --> 00:04:51,310\nwill actually show you how you actually\nconfigure it to run in that demo mode.\n\n97\n00:04:51,310 --> 00:04:52,410\nSo take a look at that.\n\n98\n00:04:52,410 --> 00:04:55,260\n>> The demo mode is neat because\nyou can fire up the CCP and\n\n99\n00:04:55,260 --> 00:04:58,970\nit looks like it's connected to a router,\nso you can browse around and\n\n100\n00:04:58,970 --> 00:05:01,530\ncheck the options out and\nkind of experiment.\n\n101\n00:05:01,530 --> 00:05:03,960\nBut at the end of the day,\nit's not connected to a real router.\n\n102\n00:05:03,960 --> 00:05:07,500\nIt's connected to a fake, just\na database with a bunch of junk in it.\n\n103\n00:05:07,500 --> 00:05:08,740\nAnd so, it looks like it.\n\n104\n00:05:08,740 --> 00:05:10,850\nIt's good enough for studying, for\n\n105\n00:05:10,850 --> 00:05:14,040\nstudying where options are in\nthe interface, and learning, and so on.\n\n106\n00:05:14,040 --> 00:05:17,250\nBut there really is no substitute for\ngetting a real router and\n\n107\n00:05:17,250 --> 00:05:18,870\nfiring up the CCP and connecting to it.\n\n108\n00:05:18,870 --> 00:05:22,240\nI say there's no substitute, I would\nsubstitute anything, if I could, for\n\n109\n00:05:22,240 --> 00:05:23,180\nit, believe me.\n\n110\n00:05:23,180 --> 00:05:27,184\nI am not a fan of the CCP, but\nagain, it's a necessary evil for\n\n111\n00:05:27,184 --> 00:05:31,350\nlearning and getting certified,\nso, let's take a look at it.\n\n112\n00:05:32,530 --> 00:05:36,310\nSo what is this evil villain\nthat I keep talking about?\n\n113\n00:05:36,310 --> 00:05:40,150\nWell, let's bring up my laptop here.\n\n114\n00:05:40,150 --> 00:05:44,870\nSo, if I wanted to manage a Cisco\nrouter using the CCP, well first off,\n\n115\n00:05:44,870 --> 00:05:46,870\nalmost every Cisco router supported,\n\n116\n00:05:46,870 --> 00:05:50,210\nthere's not much that I have to do to\nthe router itself to get it working.\n\n117\n00:05:50,210 --> 00:05:51,820\nWe have to have a username and\na password on it,\n\n118\n00:05:51,820 --> 00:05:55,530\nso we saw that back in the CCENT show,\nso that's nothing new.\n\n119\n00:05:55,530 --> 00:06:00,160\nBut you install the Cisco configuration\nprofessional, and if you buy a new router,\n\n120\n00:06:00,160 --> 00:06:02,580\nit likely comes on a CD with the router.\n\n121\n00:06:02,580 --> 00:06:04,650\nIf you have a router already and\n\n122\n00:06:04,650 --> 00:06:08,030\nit didn't come with it,\nyou can go to Cisco's website.\n\n123\n00:06:08,030 --> 00:06:11,310\nIf you go to support.cisco.com, and\n\n124\n00:06:11,310 --> 00:06:14,900\nhave a valid CCO account,\na Cisco connect account.\n\n125\n00:06:14,900 --> 00:06:16,735\nWhich is it's free to get an account.\n\n126\n00:06:16,735 --> 00:06:18,960\nOn top, you have that account link and\nyou can create one.\n\n127\n00:06:18,960 --> 00:06:21,040\nI've already got one, so\nI'll just login as me.\n\n128\n00:06:23,720 --> 00:06:27,800\nAnd when you login, you can do a search\nfor the Cisco Configuration Professional,\n\n129\n00:06:27,800 --> 00:06:29,300\nand it'll find it in there.\n\n130\n00:06:29,300 --> 00:06:30,520\nOh I guess I have to click login or\n\n131\n00:06:30,520 --> 00:06:31,140\nsomething\n>> [LAUGH]\n\n132\n00:06:31,140 --> 00:06:32,950\n>> It doesn't just automatically know that\n\n133\n00:06:32,950 --> 00:06:34,350\nyou're done typing.\n\n134\n00:06:34,350 --> 00:06:36,230\nBut I'll just go to download here.\n\n135\n00:06:36,230 --> 00:06:40,410\nAnd I'm gonna do a search for\nconfiguration professional.\n\n136\n00:06:40,410 --> 00:06:40,910\nThere it is.\n\n137\n00:06:43,820 --> 00:06:45,890\nAnd you can go and download it.\n\n138\n00:06:45,890 --> 00:06:50,070\nIt is free, because you can only\nconfigure Cisco routers with it.\n\n139\n00:06:50,070 --> 00:06:51,440\nSo they already know you bought a router.\n\n140\n00:06:51,440 --> 00:06:53,970\nYou've already spent your money in,\nso they give it to you.\n\n141\n00:06:53,970 --> 00:06:55,655\nNow, if you're downloading it right now.\n\n142\n00:06:55,655 --> 00:07:00,310\n2.8 is the latest, but this is not\nactually a full software download.\n\n143\n00:07:00,310 --> 00:07:02,030\nThis is just an update pack.\n\n144\n00:07:02,030 --> 00:07:07,155\nIf you go to 2.7, that's the full, and\nit's about a 150 megs, or so, right there.\n\n145\n00:07:07,155 --> 00:07:09,520\n2.7 is what's on the exam, and so\nthat's what I'm gonna run today.\n\n146\n00:07:09,520 --> 00:07:10,087\nI'm not gonna run 2.8.\n\n147\n00:07:12,943 --> 00:07:14,870\nIt does require Java.\n\n148\n00:07:14,870 --> 00:07:17,560\nAnd once it's installed\nyou can fire it up.\n\n149\n00:07:17,560 --> 00:07:19,190\nAnd actually I'm already\nrunning it in the background.\n\n150\n00:07:19,190 --> 00:07:20,820\nLet me close that so\nI can start it from scratch.\n\n151\n00:07:22,590 --> 00:07:26,560\nAll right, now I had to set it to run\nas an administrator in Windows 8.\n\n152\n00:07:26,560 --> 00:07:28,410\nIf you're running an older\nversion of Windows you\n\n153\n00:07:28,410 --> 00:07:29,986\nprobably won't have that issue.\n\n154\n00:07:29,986 --> 00:07:32,820\nBut it is gonna prompt me there just to,\nyou know,\n\n155\n00:07:32,820 --> 00:07:34,840\nask if I want to run it\nas an administrator.\n\n156\n00:07:34,840 --> 00:07:39,050\nNow, the cool part about the Cisco\nconfiguration professional is that, it can\n\n157\n00:07:39,050 --> 00:07:43,420\nmanage many devices at once, so you don't\njust have to use it to control one router.\n\n158\n00:07:43,420 --> 00:07:47,530\nIf you have several routers and\nswitches and so on, it can connect to all\n\n159\n00:07:47,530 --> 00:07:51,864\nof them and kinda give you a centralized\nplace to go and manage your system.\n\n160\n00:07:51,864 --> 00:07:52,682\nAll right?\n\n161\n00:07:52,682 --> 00:07:55,033\nAll you have to do is punch in\nthe IP address of your device.\n\n162\n00:07:55,033 --> 00:07:57,266\nAs you'll see,\nit supports up to ten devices.\n\n163\n00:07:57,266 --> 00:08:00,601\nThen you plug in your user name and\nyour password.\n\n164\n00:08:00,601 --> 00:08:05,000\nIt's got the option here as to whether or\nnot you wanna connect securely or not.\n\n165\n00:08:05,000 --> 00:08:10,280\nIf you choose yes, it'll connect\nwith HTTPS and SSH to your router.\n\n166\n00:08:10,280 --> 00:08:15,460\nIf you choose no, it'll connect with HTTP,\nAnd telnet, obviously we don't want that,\n\n167\n00:08:15,460 --> 00:08:17,500\nyou know you want a secure\nconnection when possible and\n\n168\n00:08:17,500 --> 00:08:18,540\nthat's what I've got chosen here.\n\n169\n00:08:20,080 --> 00:08:20,890\nAll right.\n\n170\n00:08:20,890 --> 00:08:24,690\nOnce you've listed all your devices you\nwant to manage here, you can say OK.\n\n171\n00:08:24,690 --> 00:08:28,800\nAnd then you hit your discover button.\n\n172\n00:08:28,800 --> 00:08:31,980\nThe discover button's going to tell\nit to go out on the network, look for\n\n173\n00:08:31,980 --> 00:08:36,740\nthese devices, find them, and connect to\nthem and get ready to work with them.\n\n174\n00:08:36,740 --> 00:08:37,250\nRight?\n\n175\n00:08:37,250 --> 00:08:40,180\nSo, mine says that it's discovering, and\nwe'll give it just a moment while it does\n\n176\n00:08:40,180 --> 00:08:44,030\nthat, and\nit should change to discovered eventually.\n\n177\n00:08:44,030 --> 00:08:44,530\nThere it goes.\n\n178\n00:08:46,482 --> 00:08:48,620\nLet me just move this over here.\n\n179\n00:08:48,620 --> 00:08:53,210\nAnd so once it changes to discovered,\nnow it knows the device is out there and\n\n180\n00:08:53,210 --> 00:08:54,980\nI can go and start configuring.\n\n181\n00:08:54,980 --> 00:08:55,590\nAll right.\n\n182\n00:08:55,590 --> 00:08:58,320\nNow if you have any experience with\nthe old SDM, it's just like Ronnie said,\n\n183\n00:08:58,320 --> 00:09:01,600\nthis is really like a skin\nlaid on top of the SDM.\n\n184\n00:09:01,600 --> 00:09:05,240\nSo if I go into configure, a lot of\nthese screens down here are gonna look\n\n185\n00:09:05,240 --> 00:09:08,390\njust like they did in the old security and\ndevice manager.\n\n186\n00:09:08,390 --> 00:09:10,560\nSo things aren't that different.\n\n187\n00:09:10,560 --> 00:09:13,100\nBut really it's just\na graphical representation or\n\n188\n00:09:13,100 --> 00:09:14,840\nwhat you have in your own router.\n\n189\n00:09:14,840 --> 00:09:16,250\nThe configure button.\n\n190\n00:09:16,250 --> 00:09:18,020\nThat's basically taking\nme into the screens,\n\n191\n00:09:18,020 --> 00:09:20,380\nlike if I type, configure terminal, right?\n\n192\n00:09:20,380 --> 00:09:24,150\nAnd if I go to the monitor button,\nwell that's basically gonna give me\n\n193\n00:09:24,150 --> 00:09:28,250\ninput as far as like all the show\ncommands that we could do on a router.\n\n194\n00:09:28,250 --> 00:09:33,050\nSo, for example, if I wanted to look at my\nrouting table, I would run show ip route.\n\n195\n00:09:33,050 --> 00:09:37,550\nOr I can just go to my monitor\nbutton I can go under router, and\n\n196\n00:09:37,550 --> 00:09:38,760\nin here I can come in and\n\n197\n00:09:38,760 --> 00:09:42,120\nI can find the routing information\nwhich is buried in here somewhere.\n\n198\n00:09:42,120 --> 00:09:44,030\nWell, you know,\nthere's performance routing.\n\n199\n00:09:45,740 --> 00:09:47,200\nMaybe it's in overview.\n\n200\n00:09:47,200 --> 00:09:48,820\nIt'll be buried in here somewhere.\n\n201\n00:09:48,820 --> 00:09:53,230\nHere's our show version output, how much\nCPU memory we've got, how much flash and\n\n202\n00:09:53,230 --> 00:09:56,630\nso on, what model of router we've\ngot all that information right here,\n\n203\n00:09:56,630 --> 00:09:59,150\njust like we ran the show version command.\n\n204\n00:09:59,150 --> 00:10:02,330\nI'm gonna make my window a little bigger,\nso I've got enough room for\n\n205\n00:10:02,330 --> 00:10:03,920\nall of this, there we go.\n\n206\n00:10:03,920 --> 00:10:07,430\nAnd in fact this screen right here,\nthat's the old home screen of the SDL.\n\n207\n00:10:07,430 --> 00:10:08,930\nSo that's really.\n\n208\n00:10:08,930 --> 00:10:10,610\n>> Identical.\n[LAUGH]\n\n209\n00:10:10,610 --> 00:10:13,190\n>> You know where in the routing table\n\n210\n00:10:13,190 --> 00:10:13,790\nburied on this Ronnie?\n\n211\n00:10:13,790 --> 00:10:14,840\nDo you know?\n>> I don't know.\n\n212\n00:10:15,980 --> 00:10:17,300\nI do not know.\n\n213\n00:10:17,300 --> 00:10:20,320\n>> Well, most of the commands\nare represented in here somewhere,\n\n214\n00:10:20,320 --> 00:10:21,390\nif you can find them.\n\n215\n00:10:21,390 --> 00:10:23,130\nI guess that's probably the trick.\n\n216\n00:10:23,130 --> 00:10:24,620\nIt shouldn't be under performance routing.\n\n217\n00:10:24,620 --> 00:10:27,760\nIt should just be under\nthe regular routing table.\n\n218\n00:10:27,760 --> 00:10:29,270\nYeah.\nIt may not be displaying it cuz we haven't\n\n219\n00:10:29,270 --> 00:10:31,420\nactually configured it yet.\n\n220\n00:10:31,420 --> 00:10:34,450\nBut anyhow, you can browse through, and\n\n221\n00:10:34,450 --> 00:10:38,360\nbasically most of the output that you get\nwith the show commands are present here.\n\n222\n00:10:38,360 --> 00:10:39,390\nSame thing with configuration.\n\n223\n00:10:39,390 --> 00:10:40,720\nNow I do say most.\n\n224\n00:10:40,720 --> 00:10:44,020\nThere are things you can\nconfigure in the COI that you\n\n225\n00:10:44,020 --> 00:10:46,670\ncan't configure here in\nthe graphical user interface.\n\n226\n00:10:46,670 --> 00:10:48,460\nSo, it's not as robust, right?\n\n227\n00:10:48,460 --> 00:10:51,540\nIt's a little more simplified, but\nit does have the bulk of what we need for\n\n228\n00:10:51,540 --> 00:10:52,350\nday to day activity.\n\n229\n00:10:54,860 --> 00:10:57,220\nSo let's talk about initial configuration.\n\n230\n00:10:57,220 --> 00:11:00,800\nWhat are some of the first\nthings we configure on a router?\n\n231\n00:11:00,800 --> 00:11:03,480\nFor it to work we need IP\naddresses on an interface.\n\n232\n00:11:03,480 --> 00:11:08,430\nSo if I go here to interface and\nconnections I can come in here and\n\n233\n00:11:08,430 --> 00:11:13,410\nI can go to edit interfaces and I can see\na list of the interfaces that I've got and\n\n234\n00:11:13,410 --> 00:11:17,080\nif they have IP addresses and\nwhat their current status is all right.\n\n235\n00:11:17,080 --> 00:11:18,730\nSo I can look at these and\nI can configure them.\n\n236\n00:11:18,730 --> 00:11:21,150\nSo for\nexample I've got this cellular interface.\n\n237\n00:11:21,150 --> 00:11:24,920\nI'm not using it, it's up right now but\nI don't intend to use it.\n\n238\n00:11:24,920 --> 00:11:28,550\nSo I can just highlight it and\nhit disable and now that takes it down.\n\n239\n00:11:28,550 --> 00:11:31,000\nThat's like doing a shut down\ncommand on the interface.\n\n240\n00:11:31,000 --> 00:11:35,060\nExcept I didn't have to know the command\nI just click on it and hit the button.\n\n241\n00:11:35,060 --> 00:11:37,030\n>> Don I think this is a good place for\n\n242\n00:11:37,030 --> 00:11:40,020\nus to take a look at just briefly for\na moment here.\n\n243\n00:11:40,020 --> 00:11:43,390\nSo when we do connect with\nthe CCP right we know one thing.\n\n244\n00:11:43,390 --> 00:11:46,860\nWe have to have at least a ready\none interface that is configured\n\n245\n00:11:46,860 --> 00:11:51,040\nwith the IP address that we need and\nso there has to be a little bit of\n\n246\n00:11:51,040 --> 00:11:54,750\nconfiguration that goes on when we do\nactually say we're going to run the CCP,\n\n247\n00:11:54,750 --> 00:11:57,700\nwe want to make sure that\nwe go over those too right.\n\n248\n00:11:57,700 --> 00:12:00,818\n>> Yeah so let's do this Ronnie,\nlet's make like a checklist.\n\n249\n00:12:00,818 --> 00:12:05,970\nAll right, so if I wanna connect, so\n\n250\n00:12:05,970 --> 00:12:10,810\nprior to connecting with the CCP,\nall right.\n\n251\n00:12:10,810 --> 00:12:13,420\nThere's some things we've got to do\non the router just to get it ready to\n\n252\n00:12:13,420 --> 00:12:14,460\neven be able to connect.\n\n253\n00:12:14,460 --> 00:12:20,610\nSo Ronnie has a great point, is one,\nwe need to assign an IP address, right.\n\n254\n00:12:20,610 --> 00:12:23,490\nLet's write it this way,\nwe'll write it like a configuration.\n\n255\n00:12:23,490 --> 00:12:25,980\nJust a series of commands\nthat we need to issue.\n\n256\n00:12:25,980 --> 00:12:31,452\nSo for example, I might say,\ninterface GI0/1,\n\n257\n00:12:31,452 --> 00:12:38,422\nIP address 192.168.0.1.\n\n258\n00:12:40,720 --> 00:12:41,320\nAll right.\n\n259\n00:12:41,320 --> 00:12:45,040\nSo I'm going to assign an IP address and\nturn the interface on.\n\n260\n00:12:45,040 --> 00:12:47,090\n>> Yep.\nAnd then we have a physical, again,\n\n261\n00:12:47,090 --> 00:12:49,960\nonce we have that,\nwe wanna make sure we physically correct\n\n262\n00:12:49,960 --> 00:12:52,710\nthe router to the network I know\nthat sounds a little bit strange,\n\n263\n00:12:52,710 --> 00:12:53,990\nyou may not have thought about that yet.\n\n264\n00:12:53,990 --> 00:12:57,300\nBut make sure we do have it connected,\nmake sure it's actually on.\n\n265\n00:12:57,300 --> 00:13:01,050\nThen we have to configure a couple\nof other things for the CCP to work.\n\n266\n00:13:01,050 --> 00:13:04,070\nBecause the CCP is a web interface\nwhen it comes down to it,\n\n267\n00:13:04,070 --> 00:13:08,920\nwe need to turn on the web server\npart of our configuration as well.\n\n268\n00:13:08,920 --> 00:13:13,900\nSo Don actually went ahead and turned\non just the basic http web server for\n\n269\n00:13:13,900 --> 00:13:18,130\nus, and this allows us to be able to\nconnect in with no security at this point,\n\n270\n00:13:18,130 --> 00:13:19,170\nusing that.\n\n271\n00:13:19,170 --> 00:13:22,080\nAnd then the other command that he\nactually put in here tells us that we're\n\n272\n00:13:22,080 --> 00:13:25,720\ngonna end up using port 443 or\nusing the secure web server instead.\n\n273\n00:13:25,720 --> 00:13:29,740\n>> Now this is a cool command right here,\nbecause if you don't have a certificate it\n\n274\n00:13:29,740 --> 00:13:35,210\nwill generate one for you, which is a key\nrequirement if we wanna use SSH, right?\n\n275\n00:13:35,210 --> 00:13:40,360\nWhen we connect securely with the CCP,\nit uses HTTPS and SSH.\n\n276\n00:13:40,360 --> 00:13:42,280\nYou need both, all right?\n\n277\n00:13:42,280 --> 00:13:45,290\nSo setting this one command actually\nknocks out two requirements.\n\n278\n00:13:45,290 --> 00:13:49,000\nIt enables the secure web server, and\nit creates a certificate useful for SSH.\n\n279\n00:13:49,000 --> 00:13:49,750\n>> Nice.\n\n280\n00:13:49,750 --> 00:13:53,510\nWe are still missing one piece though,\nSSA which requires a username and\n\n281\n00:13:53,510 --> 00:13:56,100\na password, not just a password.\n\n282\n00:13:56,100 --> 00:13:59,460\nSo we're gonna need to assign that,\nso normally up above,\n\n283\n00:13:59,460 --> 00:14:04,860\nI'll enter in AAA new model which\ntells the router to ask for\n\n284\n00:14:04,860 --> 00:14:07,860\na username and password,\nnot just a password.\n\n285\n00:14:07,860 --> 00:14:09,557\nAnd then we create a username.\n\n286\n00:14:16,350 --> 00:14:19,570\nAll right, so we do something like that.\n\n287\n00:14:19,570 --> 00:14:24,020\nThat creates a username called Admin,\nit sets the privilege level to 15,\n\n288\n00:14:24,020 --> 00:14:26,370\nand we'll talk more about\nprivilege levels later, but for\n\n289\n00:14:26,370 --> 00:14:28,100\nright now that's a full administrator.\n\n290\n00:14:28,100 --> 00:14:29,150\nFull access to the system.\n\n291\n00:14:29,150 --> 00:14:31,610\n>> We need to make sure\nthat on this configuration,\n\n292\n00:14:31,610 --> 00:14:34,820\nit has to be that if you're\ngoing to connect to the CCP.\n\n293\n00:14:34,820 --> 00:14:36,750\nSo make sure you do set it to 15.\n\n294\n00:14:36,750 --> 00:14:38,920\n>> And then we say secret cisco123.\n\n295\n00:14:38,920 --> 00:14:43,845\nThat's going to implement a password\nof cisco123 for that user.\n\n296\n00:14:43,845 --> 00:14:46,670\nAAA new model tells it to use\na user name and password.\n\n297\n00:14:46,670 --> 00:14:50,900\nAnd ip http secure-server\ngenerates the certificate.\n\n298\n00:14:50,900 --> 00:14:54,500\nThose three things will get SSH working.\n\n299\n00:14:54,500 --> 00:14:56,380\nNow there is another way\nwe could have done that.\n\n300\n00:14:56,380 --> 00:15:01,510\nWe could have said IP\ndomain-name domain.com,\n\n301\n00:15:01,510 --> 00:15:05,110\nwhatever our domain is\nfollowed by the user account.\n\n302\n00:15:05,110 --> 00:15:11,750\nThen we could have done a crypto key\ngen rsa and generated a 1024 bit key.\n\n303\n00:15:11,750 --> 00:15:13,686\nWe could have done it manually.\n\n304\n00:15:13,686 --> 00:15:14,750\n>> Right.\n>> Like that.\n\n305\n00:15:14,750 --> 00:15:17,660\nBut by using the http\nsecure dash server command,\n\n306\n00:15:17,660 --> 00:15:21,560\nit kind of knocks out the need for those 3\ncommands, so I'm just gonna remove those,\n\n307\n00:15:21,560 --> 00:15:25,642\nbecause we won't need them going this way.\n\n308\n00:15:25,642 --> 00:15:28,720\nAll right, so Ronnie, let's see,\nthat turns on our secure server.\n\n309\n00:15:28,720 --> 00:15:32,790\nWe should also just check,\nthis may not be necessary.\n\n310\n00:15:32,790 --> 00:15:36,883\nBut the vty lines,\nif you're gonna support SSH,\n\n311\n00:15:36,883 --> 00:15:43,133\nyou'll need a transport input and\nthen you have some choices here, right?\n\n312\n00:15:43,133 --> 00:15:48,643\nYou could say all, transport input telnet,\n\n313\n00:15:48,643 --> 00:15:51,398\ntransport input ssh or\n\n314\n00:15:51,398 --> 00:15:57,491\neven transport input telnet\nssh right like that.\n\n315\n00:15:57,491 --> 00:16:00,549\nAnd then what you're doing is you're\npicking what methods you want to allow\n\n316\n00:16:00,549 --> 00:16:01,563\nsomebody to connect to.\n\n317\n00:16:01,563 --> 00:16:06,568\nDo you want them to be able to\nconnect using any protocol whatsoever,\n\n318\n00:16:06,568 --> 00:16:11,330\nor just telnet, or just ssh, or\ntelnet and ssh but nothing else.\n\n319\n00:16:11,330 --> 00:16:14,840\nCuz there's usually others, right, let me\nsee what other ones this one supports.\n\n320\n00:16:16,020 --> 00:16:18,690\nI'm gonna get into my trusty\n2800 series router here\n\n321\n00:16:24,474 --> 00:16:26,680\nSo this one supports, well.\n\n322\n00:16:26,680 --> 00:16:33,280\nTelnet and SSH like we expect, but\nalso our login, pad, mop, LAPB, udptn.\n\n323\n00:16:33,280 --> 00:16:36,460\nA lot of ones that people\nhave never even heard of.\n\n324\n00:16:36,460 --> 00:16:40,450\nSo, there's a lot of extra protocols here\nthat we might not necessarily wanna run.\n\n325\n00:16:40,450 --> 00:16:41,810\n>> Right.\n\n326\n00:16:41,810 --> 00:16:45,160\n>> Especially like our\nlog in which is unsecure.\n\n327\n00:16:45,160 --> 00:16:50,590\nSo by doing something like this and saying\ntransport input ssh, that insures that\n\n328\n00:16:50,590 --> 00:16:55,835\nonly secure connect are allowed to\nconnect, and no nonsecure connections.\n\n329\n00:16:58,285 --> 00:17:00,465\nAll right, and that's really the basics.\n\n330\n00:17:00,465 --> 00:17:02,985\nOnce you've got those settings in place,\n\n331\n00:17:02,985 --> 00:17:05,012\nnow you should be able to\nconnect using the CCP.\n\n332\n00:17:05,012 --> 00:17:05,512\nYeah.\n\n333\n00:17:07,489 --> 00:17:09,950\nAll right, so\nI've already done that on our router.\n\n334\n00:17:09,950 --> 00:17:13,640\nIf I take a look,\nif we try and take a look here.\n\n335\n00:17:13,640 --> 00:17:17,650\nOh, you know,\nI'm leaving out the web authentication.\n\n336\n00:17:17,650 --> 00:17:23,100\nSo on the web authentication\nside when we say AAA\n\n337\n00:17:23,100 --> 00:17:28,480\nnew model that's setting up our router to\nsay hey, ask for user name and a password.\n\n338\n00:17:28,480 --> 00:17:33,000\nBut the default authentication on some\nrouters doesn't automatically kick in yet.\n\n339\n00:17:33,000 --> 00:17:34,900\n>> Right.\n>> Sometimes there's a few extra commands\n\n340\n00:17:34,900 --> 00:17:40,912\nwe need to issue like this\n\n341\n00:17:40,912 --> 00:17:46,020\none, that says when\nsomebody tries to log in.\n\n342\n00:17:46,020 --> 00:17:49,940\nThe default authentication method is\ngonna be the local user database.\n\n343\n00:17:49,940 --> 00:17:52,158\nIn other words,\nuser accounts that we define here.\n\n344\n00:17:52,158 --> 00:17:54,357\nAll right and\n\n345\n00:17:59,860 --> 00:18:06,830\nThat when somebody connects, we authorize\nthem, we give them permissions.\n\n346\n00:18:06,830 --> 00:18:10,170\nBased on, again, the local user database,\nprivilege level 15, right?\n\n347\n00:18:10,170 --> 00:18:12,160\nSo that's what those two\ncommands are saying.\n\n348\n00:18:12,160 --> 00:18:15,140\nNow those are defaults on a lot\nof routers, but not all of them.\n\n349\n00:18:15,140 --> 00:18:18,240\nSo that's why I'm listing them here,\nfor completeness.\n\n350\n00:18:18,240 --> 00:18:21,490\nNow, our other thing,\nthough, is down here.\n\n351\n00:18:21,490 --> 00:18:26,300\nAnd, we need to tell the HTTP,\nthe web server, to use that same, kind of,\n\n352\n00:18:26,300 --> 00:18:27,000\nauthentication.\n\n353\n00:18:27,000 --> 00:18:27,850\nAnd, Ronnie, help me out here,\n\n354\n00:18:27,850 --> 00:18:29,650\nis IP HTTP authentication,\n>> Mm-hm.\n\n355\n00:18:29,650 --> 00:18:30,300\n>> And then local.\n\n356\n00:18:32,840 --> 00:18:33,550\nAll right.\n\n357\n00:18:33,550 --> 00:18:36,220\nAnd so,\nthat's saying when a web user connects,\n\n358\n00:18:36,220 --> 00:18:38,470\nmake sure you use the local database.\n\n359\n00:18:38,470 --> 00:18:41,270\n>> Do we need to add that in,\nalso, in the line VTY or not?\n\n360\n00:18:41,270 --> 00:18:42,626\nThe local login or\n>> No.\n\n361\n00:18:42,626 --> 00:18:44,750\n>> [CROSSTALK]\n>> Okay.\n\n362\n00:18:44,750 --> 00:18:45,946\n>> As soon as you do AAA new model.\n\n363\n00:18:45,946 --> 00:18:48,140\n>> That's it.\n>> The login command on the V2Is is\n\n364\n00:18:48,140 --> 00:18:48,780\ndisabled.\n\n365\n00:18:48,780 --> 00:18:50,230\n>> All right. Yeah. Yeah.\n>> But good point to bring that up.\n\n366\n00:18:50,230 --> 00:18:51,000\n>> I just wanted to make sure.\n\n367\n00:18:51,000 --> 00:18:53,490\n>> A lot of you guys might remember\nthat there is a login command.\n\n368\n00:18:53,490 --> 00:18:58,905\nRight here, login and password,\nCisco123 or something like that.\n\n369\n00:18:58,905 --> 00:19:02,400\n>> Mm-hm.\n>> All right, if you put those in before,\n\n370\n00:19:02,400 --> 00:19:05,740\nthe instant you do triple a new-model,\nthose commands are disabled.\n\n371\n00:19:05,740 --> 00:19:09,170\n>> There you go.\n>> All right, but if you had them in there\n\n372\n00:19:09,170 --> 00:19:12,240\nbefore they may stay in there,\nthey just don't do anything anymore.\n\n373\n00:19:12,240 --> 00:19:14,140\nSo if you try and\nenter them again it'll stop you.\n\n374\n00:19:14,140 --> 00:19:16,390\nSo yep, so\nwe'll be all right with that list.\n\n375\n00:19:16,390 --> 00:19:17,140\n>> Cool.\n\n376\n00:19:17,140 --> 00:19:19,180\n>> So that right there,\nthat's pretty complete.\n\n377\n00:19:19,180 --> 00:19:22,220\nAs long as you've got those\ncommands present in your router\n\n378\n00:19:22,220 --> 00:19:24,590\nyou should be able to\nconnect with the CCP.\n\n379\n00:19:24,590 --> 00:19:27,040\nAnd I've got those that's why I'm\nable to connect up to the router.\n\n380\n00:19:27,040 --> 00:19:30,140\nNow, I did do mine\na slightly different way.\n\n381\n00:19:30,140 --> 00:19:32,110\nBut the basic commands are in there.\n\n382\n00:19:32,110 --> 00:19:36,560\nSo I've got my AAA\nauthentication authorization,\n\n383\n00:19:36,560 --> 00:19:39,350\nright here, for the login default.\n\n384\n00:19:39,350 --> 00:19:40,080\nSo I've got those.\n\n385\n00:19:40,080 --> 00:19:44,370\nOops, I messed things up here.\n\n386\n00:19:47,100 --> 00:19:49,680\nThere is my certificate\nthat was generated.\n\n387\n00:19:49,680 --> 00:19:52,480\nIvie got my IP addresses\non my interface assigned.\n\n388\n00:19:52,480 --> 00:19:55,000\nAnd there is my HDP server.\n\n389\n00:19:55,000 --> 00:19:58,850\nNow I didn't do it the easy way,\nI didn't say authentication local.\n\n390\n00:19:58,850 --> 00:20:01,380\nI went ahead and\ndefined the specific policy.\n\n391\n00:20:01,380 --> 00:20:05,070\nThat's useful if you want to have\ncustom settings for the web server.\n\n392\n00:20:05,070 --> 00:20:06,710\nIt's the hard way to do it though.\n\n393\n00:20:06,710 --> 00:20:08,760\nThe way I put in the Notepad\nwas much easier.\n\n394\n00:20:11,300 --> 00:20:14,720\nSo that's about it for\nthose as far as the basic.\n\n395\n00:20:14,720 --> 00:20:19,460\nNow, there are other things you might\nchoose to set like the set time outs and\n\n396\n00:20:19,460 --> 00:20:20,650\nlogging synchronous.\n\n397\n00:20:20,650 --> 00:20:21,560\nThings like that.\n\n398\n00:20:21,560 --> 00:20:25,150\nBut they are not really required for\nconnecting via the CCP.\n\n399\n00:20:25,150 --> 00:20:31,220\nAll right, so once we're in though,\nnow we can start to use this GUI.\n\n400\n00:20:32,390 --> 00:20:35,410\nCouple of things about\nthe GUI is you go through and\n\n401\n00:20:35,410 --> 00:20:38,260\nstart working with your routers,\nit is easier, you know, most of the stuff,\n\n402\n00:20:38,260 --> 00:20:42,680\nlike if I want to change an ip address or\nsomething.\n\n403\n00:20:42,680 --> 00:20:46,430\nYou just pick an interface and\nyou choose edit and\n\n404\n00:20:46,430 --> 00:20:51,270\nit's gonna ask you if it's a LAN or\na WAN, this one's a LAN interface for me.\n\n405\n00:20:51,270 --> 00:20:53,715\nAnd anytime it makes\na change to your system.\n\n406\n00:20:53,715 --> 00:20:57,325\nIt lists the commands that it's gonna run,\nand allows you to deliver it.\n\n407\n00:20:57,325 --> 00:21:01,145\nNow that tells you right there,\nthat the GUI is not really graphical.\n\n408\n00:21:01,145 --> 00:21:04,345\nIn the end, it's still running these\ncommand line commands in the background.\n\n409\n00:21:04,345 --> 00:21:05,365\n>> Yeah.\n>> It just knows the ones to run.\n\n410\n00:21:07,500 --> 00:21:08,770\nAll right, so I'll go ahead and\ndeliver that.\n\n411\n00:21:11,190 --> 00:21:14,110\nAll right, and now I can go in and\nyou can see where I can attach access\n\n412\n00:21:14,110 --> 00:21:18,290\ncontrol lists, we can set up NAT\nthrough the little NAT wizard,\n\n413\n00:21:18,290 --> 00:21:20,740\nwe've got general settings as far\nas what we want to turn on and\n\n414\n00:21:20,740 --> 00:21:25,280\noff on the interface so, a lot of simple,\neasy things to work with here.\n\n415\n00:21:25,280 --> 00:21:29,330\nDefinitely makes it much more simple\nthan having to go through and\n\n416\n00:21:29,330 --> 00:21:33,930\ndo all the command line stuff,\nif we don't want to, oh, you know,\n\n417\n00:21:33,930 --> 00:21:35,890\nI picked the wrong interface editor,\ndidn't I?\n\n418\n00:21:35,890 --> 00:21:37,365\n>> [LAUGH]\n>> So there you go, so\n\n419\n00:21:37,365 --> 00:21:42,725\nthis one has the IP address, but otherwise\nyou get your ACL's, your NAT and so on.\n\n420\n00:21:42,725 --> 00:21:46,475\nBut yes, so you can get through and\nconfigure them, much more simple.\n\n421\n00:21:46,475 --> 00:21:52,155\n>> So Don, if we have someone that is\nstarting to say, here is a router,\n\n422\n00:21:52,155 --> 00:21:56,970\nI want to take this router and make it\nthe most secure that I possible can\n\n423\n00:21:56,970 --> 00:21:58,790\n>> We could spend a ton of time, right,\n\n424\n00:21:58,790 --> 00:22:04,050\ngoing through and actually setting\nevery individual thing that we can do.\n\n425\n00:22:04,050 --> 00:22:08,330\nThat might take me, what,\na day maybe longer to do everything.\n\n426\n00:22:08,330 --> 00:22:10,860\nIs there something that kind of\nmakes it a little bit easier for us?\n\n427\n00:22:10,860 --> 00:22:11,360\n>> Absolutely.\n\n428\n00:22:11,360 --> 00:22:15,470\nSo if we know exactly what we want we\ncan go manually configure it all day\n\n429\n00:22:15,470 --> 00:22:16,040\nlong, right?\n\n430\n00:22:16,040 --> 00:22:18,310\nJust like Ronnie said and\nthat works out great and in fact,\n\n431\n00:22:18,310 --> 00:22:21,800\nwe're gonna have to go through a lot of\nthat stuff through this show but, Cisco\n\n432\n00:22:21,800 --> 00:22:26,340\ndoes have what's called the one step lock\ndown which is designed to be super easy.\n\n433\n00:22:26,340 --> 00:22:28,120\nThe GUI's all about easy.\n\n434\n00:22:28,120 --> 00:22:33,110\nTo say hey, you might not be a full\ntime security admin, so let's make\n\n435\n00:22:33,110 --> 00:22:37,050\nlife easy for you and give you a wizard\nthat does the security configuration.\n\n436\n00:22:37,050 --> 00:22:42,070\nIf I go down here under security, I'll\nsee a bunch of little options in here.\n\n437\n00:22:42,070 --> 00:22:45,070\nAnd down here, I've got security audit.\n\n438\n00:22:45,070 --> 00:22:47,330\nThe security audit takes two forms.\n\n439\n00:22:47,330 --> 00:22:50,260\nThere's the one step lockdown,\nand the security audit.\n\n440\n00:22:50,260 --> 00:22:50,780\nAll right.\n\n441\n00:22:50,780 --> 00:22:52,180\nThey are actually the same thing.\n\n442\n00:22:52,180 --> 00:22:53,840\nRight.\nWell close to the same thing.\n\n443\n00:22:53,840 --> 00:22:58,730\nThey both run a scan on your router, look\nat all the security commands you've got in\n\n444\n00:22:58,730 --> 00:23:03,480\nthere by default, and looks for ones\nthat are missing and gives you a list.\n\n445\n00:23:03,480 --> 00:23:09,320\nThe difference is, with the security audit\nyou can choose to apply those changes,\n\n446\n00:23:09,320 --> 00:23:12,390\nor you can ignore them, or\nyou can pick and choose amongst the list.\n\n447\n00:23:12,390 --> 00:23:16,580\nWith the one step lock down on the other\nhand, it just applies them all, and\n\n448\n00:23:16,580 --> 00:23:18,190\nsuper secures your router.\n\n449\n00:23:18,190 --> 00:23:20,390\nSo if your not interested\nin learning about security,\n\n450\n00:23:20,390 --> 00:23:22,100\nif you just want to get\na secure router configured and\n\n451\n00:23:22,100 --> 00:23:25,580\nbe done with it, the one step\nlockdown is really handy alright.\n\n452\n00:23:25,580 --> 00:23:29,110\nBut just so we can see the details,\nlet's run through the full security audit.\n\n453\n00:23:29,110 --> 00:23:29,610\n>> Right.\n\n454\n00:23:33,028 --> 00:23:36,302\n>> All right when we perform the security\naudit it's going to have to ask us some\n\n455\n00:23:36,302 --> 00:23:37,590\nquestions about our router.\n\n456\n00:23:37,590 --> 00:23:42,090\nIt doesn't know things like for\nexample here on this interface.\n\n457\n00:23:42,090 --> 00:23:45,839\nIt doesn't know which interface is\ninside our network versus outside,\n\n458\n00:23:45,839 --> 00:23:48,303\nwhich ones do we trust and\nwhich that we don't.\n\n459\n00:23:48,303 --> 00:23:52,775\nGenerally the interfaces that you have\nare pointing towards the internet, those\n\n460\n00:23:52,775 --> 00:23:57,049\nare untrusted and the ones that point\ntoward your LAN, those are the trusted,\n\n461\n00:23:57,049 --> 00:24:01,690\nso I just need to check that, so for zero,\nzero is the outside And 01 is the inside.\n\n462\n00:24:04,724 --> 00:24:05,499\nAll right.\n\n463\n00:24:05,499 --> 00:24:08,970\nNow it's running its scan and\nit's giving me the list.\n\n464\n00:24:08,970 --> 00:24:11,690\nAll right.\nSo here's a list of settings and\n\n465\n00:24:11,690 --> 00:24:14,500\nyou'll see a number of them I passed on.\n\n466\n00:24:14,500 --> 00:24:16,439\nSo that means that I'm already secure.\n\n467\n00:24:16,439 --> 00:24:18,877\nLike disable the TCP small servers.\n\n468\n00:24:18,877 --> 00:24:19,960\nAll right.\n\n469\n00:24:19,960 --> 00:24:21,341\nIt's already done.\n\n470\n00:24:21,341 --> 00:24:22,770\nCheck.\n\n471\n00:24:22,770 --> 00:24:24,930\nBut disable the PAD service?\n\n472\n00:24:24,930 --> 00:24:26,060\nI'm running the PAD service.\n\n473\n00:24:26,060 --> 00:24:28,400\nNow that's the packet assembler or\ndissembler.\n\n474\n00:24:28,400 --> 00:24:29,930\nMost of us don't use PAD devices.\n\n475\n00:24:29,930 --> 00:24:30,720\nI say most.\n\n476\n00:24:30,720 --> 00:24:33,080\nI don't know anybody that\nstill runs PAD devices.\n\n477\n00:24:33,080 --> 00:24:36,260\nBut the service is running\non the router by default.\n\n478\n00:24:36,260 --> 00:24:37,450\nMight as well turn it off.\n\n479\n00:24:37,450 --> 00:24:38,050\nRight?\n\n480\n00:24:38,050 --> 00:24:39,240\nSo it's giving me this list, and\n\n481\n00:24:39,240 --> 00:24:41,720\nthe one-step lockdown wizard\nwould do the same thing.\n\n482\n00:24:41,720 --> 00:24:44,150\nThe difference is with\nthe one-step lockdown wizard,\n\n483\n00:24:44,150 --> 00:24:47,300\nwe just hit fix it and it's done.\n\n484\n00:24:47,300 --> 00:24:50,620\nBut on this one, I'll have an option\nhere in a minute where I can pick and\n\n485\n00:24:50,620 --> 00:24:52,560\nchoose which ones I want to fix and\nwhich ones I don't.\n\n486\n00:24:53,650 --> 00:24:56,330\nAnd you'll see a ton of things in here.\n\n487\n00:24:56,330 --> 00:24:59,310\nDisable Cisco Discovery Protocol.\n\n488\n00:24:59,310 --> 00:25:02,080\nYou might ask yourself, wait a minute,\nI like the Cisco Discovery Protocol.\n\n489\n00:25:02,080 --> 00:25:04,950\nIt makes me happy, It helps me find\nrouters on the network, right?\n\n490\n00:25:04,950 --> 00:25:09,137\nWell, it also reveals details\nof your router to attackers.\n\n491\n00:25:09,137 --> 00:25:10,410\nIt's non-secure.\n\n492\n00:25:10,410 --> 00:25:15,992\nSo Cisco's recommendation is that if this\nis a secure router, you gotta disable CDP.\n\n493\n00:25:15,992 --> 00:25:18,800\nAnd now you'll see a bunch of options\nthat are like that as I look kind of down\n\n494\n00:25:18,800 --> 00:25:20,020\nthe list.\n\n495\n00:25:20,020 --> 00:25:21,530\nThere's a lot of stuff in here, and\n\n496\n00:25:21,530 --> 00:25:24,640\nI would say that right now we\nare failing more than we're passing.\n\n497\n00:25:24,640 --> 00:25:25,540\nRight?\nSo,\n\n498\n00:25:25,540 --> 00:25:28,970\nthere's a lot more red X's than\nthere are blue check marks.\n\n499\n00:25:28,970 --> 00:25:30,980\nIt looks like we've got\nIP Redirects turned on.\n\n500\n00:25:30,980 --> 00:25:32,260\nThat's a recipe for disaster.\n\n501\n00:25:32,260 --> 00:25:34,620\nThat'll turn you into\nan iOS service reflector.\n\n502\n00:25:36,070 --> 00:25:38,230\nWe've got IP Unreachables,\n\n503\n00:25:38,230 --> 00:25:43,070\nthere's all sorts of stuff in here that\ncan lead to different types of attacks.\n\n504\n00:25:43,070 --> 00:25:45,080\nSome of these are very serious,\n\n505\n00:25:45,080 --> 00:25:49,470\nlike Directed Broadcast,\nothers are not very serious.\n\n506\n00:25:49,470 --> 00:25:57,950\nThings like Unicast RPF,\nthat's not such a big deal to leave on.\n\n507\n00:25:57,950 --> 00:25:59,110\nIt wouldn't be the end of the world.\n\n508\n00:25:59,110 --> 00:26:00,860\nNet Flow Monitoring, there's a great one.\n\n509\n00:26:00,860 --> 00:26:02,640\nSo I don't have\nNet Flow Monitoring turned on.\n\n510\n00:26:02,640 --> 00:26:04,600\nIt's flagging me for that, right?\n\n511\n00:26:04,600 --> 00:26:08,190\nWell, it's not that I'm less secure\nbecause net flow is turned off,\n\n512\n00:26:08,190 --> 00:26:12,060\nit just means, hey this router\nsupports net flow monitoring.\n\n513\n00:26:12,060 --> 00:26:16,810\nIf I use a net flow receiver I could\nactually be interpreting data and\n\n514\n00:26:16,810 --> 00:26:18,570\nunderstanding my network better.\n\n515\n00:26:18,570 --> 00:26:21,640\nIf I have net flow turned off,\nnot the end of the world, right?\n\n516\n00:26:21,640 --> 00:26:24,100\nSo it's not a security option there.\n\n517\n00:26:24,100 --> 00:26:28,380\nIt's really just I'm missing out on\nan extra function of the router.\n\n518\n00:26:28,380 --> 00:26:31,298\nBut the majority of these\nare security-based, like Enable Telnet.\n\n519\n00:26:31,298 --> 00:26:33,620\nTelnet is non-secure.\n\n520\n00:26:33,620 --> 00:26:34,665\nYou should disable it, right?\n\n521\n00:26:34,665 --> 00:26:36,623\nSo right now it's enabled on mine and\nso I'm failing.\n\n522\n00:26:36,623 --> 00:26:40,975\n>> [LAUGH]\n>> So I'm gonna hit close on that and\n\n523\n00:26:40,975 --> 00:26:44,057\nwhen it's done,\nhere's the difference from the one-step.\n\n524\n00:26:44,057 --> 00:26:48,435\nThe one-step, I would just hit finish and\nit would apply all the changes, but\n\n525\n00:26:48,435 --> 00:26:52,995\nhere because I ran the audit,\nnow I can go through and\n\n526\n00:26:52,995 --> 00:26:55,795\nchoose the individual options I want and\ntell it to fix them.\n\n527\n00:26:55,795 --> 00:26:59,490\nAnd it does quite a bit of stuff in here,\nthings that I may not know.\n\n528\n00:26:59,490 --> 00:27:01,500\nIn fact, you can click on a lot of these.\n\n529\n00:27:01,500 --> 00:27:04,240\nSo like this one here\nsays banner is not set.\n\n530\n00:27:04,240 --> 00:27:05,000\nOkay.\n\n531\n00:27:05,000 --> 00:27:06,770\nIn the first episode Ronnie and\n\n532\n00:27:06,770 --> 00:27:09,770\nI talked about how important it was\nto have a log in banner that gave you\n\n533\n00:27:09,770 --> 00:27:12,830\na warning saying, hey don't log into\nthis system you're not allowed.\n\n534\n00:27:12,830 --> 00:27:14,220\nWe do that for due diligence.\n\n535\n00:27:14,220 --> 00:27:17,600\nSo it's gonna offer to set that, and\nI thought I could click on that and\n\n536\n00:27:17,600 --> 00:27:20,120\nget a description,\nmaybe I just picked a bad one.\n\n537\n00:27:20,120 --> 00:27:20,870\nNope.\n\n538\n00:27:20,870 --> 00:27:23,700\nOh you know what, I bet it's\nanother Internet Explorer quirk.\n\n539\n00:27:23,700 --> 00:27:26,280\nBut you're supposed to be able to\nclick on these to get descriptions.\n\n540\n00:27:26,280 --> 00:27:27,410\nIt's not working for me.\n\n541\n00:27:27,410 --> 00:27:29,920\nYeah, I'm not even getting the tool tip.\n\n542\n00:27:29,920 --> 00:27:31,150\nBut yeah that's what it's supposed to do.\n\n543\n00:27:31,150 --> 00:27:33,360\nI'm gonna go ahead and hit fix all though.\n\n544\n00:27:33,360 --> 00:27:35,280\nWe'll go ahead and apply all these fixes.\n\n545\n00:27:37,350 --> 00:27:39,640\n>> Don, before you do that and hit cancel.\n\n546\n00:27:39,640 --> 00:27:42,230\nI'm trying to get under that\nselect option on that drop down.\n\n547\n00:27:42,230 --> 00:27:43,210\n>> Oh, up here?\n>> Yeah.\n\n548\n00:27:43,210 --> 00:27:45,640\n>> Now that I've got fix all\n>> Don't worry about it.\n\n549\n00:27:45,640 --> 00:27:46,210\nJust run it.\n\n550\n00:27:46,210 --> 00:27:48,090\n>> Well here, I think if I uncheck a few.\n\n551\n00:27:48,090 --> 00:27:49,210\n>> No.\nIt's not going.\n\n552\n00:27:49,210 --> 00:27:50,220\n>> We'll just go back.\n\n553\n00:27:50,220 --> 00:27:50,720\n>> Okay.\n\n554\n00:27:52,860 --> 00:27:53,770\nMaybe.\n>> Or not, yeah.\n\n555\n00:27:53,770 --> 00:27:55,000\nSo it won't let me do it.\n\n556\n00:27:57,040 --> 00:28:00,860\nYeah, there's a couple of other options\nthere, you can save the report and stuff.\n\n557\n00:28:00,860 --> 00:28:03,995\nBut all right,\nyeah I hit fix all so I ruined it.\n\n558\n00:28:03,995 --> 00:28:06,430\n>> [LAUGH]\n>> All right, so I'll hit Next.\n\n559\n00:28:06,430 --> 00:28:07,180\nNow it is warning me.\n\n560\n00:28:07,180 --> 00:28:09,160\nI don't have a secret\npassword on mine apparently.\n\n561\n00:28:09,160 --> 00:28:12,180\nSo I'm gonna punch in,\njust cisco123 for mine.\n\n562\n00:28:12,180 --> 00:28:14,240\nHere's the Login Banner.\n\n563\n00:28:14,240 --> 00:28:18,320\n>> And this is where Don's gonna have\nto type in all the extra configurations\n\n564\n00:28:18,320 --> 00:28:20,589\nin which this security audit is gonna ask.\n\n565\n00:28:23,265 --> 00:28:24,910\n>> Unauthorized access is not permitted.\n\n566\n00:28:24,910 --> 00:28:25,410\n>> That's right.\n\n567\n00:28:27,200 --> 00:28:28,150\nSo, if there's anything else.\n\n568\n00:28:28,150 --> 00:28:29,370\nNo.\n[LAUGH]\n\n569\n00:28:29,370 --> 00:28:30,720\n>> It's gonna enable the firewall\n\n570\n00:28:30,720 --> 00:28:31,240\nfeature set.\n\n571\n00:28:31,240 --> 00:28:33,400\nIf you have the firewall\nfeature set on your router,\n\n572\n00:28:33,400 --> 00:28:35,710\nthen you use support which is\ncalled zone-based firewalls and\n\n573\n00:28:35,710 --> 00:28:38,750\nwe've got an entire section where\nwe're gonna talk about that later on.\n\n574\n00:28:38,750 --> 00:28:40,200\nSo it's offering to configure that.\n\n575\n00:28:40,200 --> 00:28:42,880\nI already know that I'm probably\ngonna regret turning this on.\n\n576\n00:28:42,880 --> 00:28:46,870\nBut it's just asking what's outside and\nwhat's inside on my system.\n\n577\n00:28:46,870 --> 00:28:48,030\nSo I'm okay with that.\n\n578\n00:28:48,030 --> 00:28:49,330\nI'll just leave it with the defaults.\n\n579\n00:28:51,790 --> 00:28:52,290\nYeah, yeah, yeah.\n\n580\n00:28:53,580 --> 00:28:54,180\nAll right.\n\n581\n00:28:54,180 --> 00:28:56,510\nThen it's asking, since I'm\nturning on the firewall features,\n\n582\n00:28:56,510 --> 00:28:58,440\nthen how strict do I want it to be.\n\n583\n00:28:58,440 --> 00:29:00,780\nDo I want it to be ultra high security?\n\n584\n00:29:00,780 --> 00:29:01,900\nOr do I want to go with low?\n\n585\n00:29:01,900 --> 00:29:03,420\nSo, you've got various options.\n\n586\n00:29:03,420 --> 00:29:04,980\nI think I'm gonna go\nwith ultra high security.\n\n587\n00:29:04,980 --> 00:29:06,350\nLet's go crazy.\n\n588\n00:29:06,350 --> 00:29:10,140\nIt doesn't cost us any extra money.\n\n589\n00:29:10,140 --> 00:29:12,620\nJust keep in mind the higher\nthe restrictions are,\n\n590\n00:29:12,620 --> 00:29:15,370\nthe more likely you are to\nbreak software on your network.\n\n591\n00:29:15,370 --> 00:29:17,760\nSo if somebody is doing SIP or\n\n592\n00:29:17,760 --> 00:29:21,730\nIP set connections across your router,\nhigh security breaks them.\n\n593\n00:29:21,730 --> 00:29:22,320\nOkay.\n\n594\n00:29:22,320 --> 00:29:25,290\nSo any kind of protocol\nthat does port shifting,\n\n595\n00:29:25,290 --> 00:29:28,570\nlike SIP and FTP,\nthey'll break under high security.\n\n596\n00:29:28,570 --> 00:29:30,838\nSo you've got to find the right\nsetting that matches for\n\n597\n00:29:30,838 --> 00:29:32,103\nthe software on your network.\n\n598\n00:29:34,635 --> 00:29:38,680\nAll right and it's asking for\na DNS server.\n\n599\n00:29:38,680 --> 00:29:39,850\nWhat is our DNS server?\n\n600\n00:29:39,850 --> 00:29:41,380\nWell, you know what?\nI'll just use internet ones.\n\n601\n00:29:42,760 --> 00:29:43,418\nI'll use Google's.\n\n602\n00:29:46,831 --> 00:29:50,060\nAll right, and then here's my summary.\n\n603\n00:29:50,060 --> 00:29:53,380\nJust kind of telling me some of\nthe changes that it's intending on making.\n\n604\n00:29:55,510 --> 00:29:56,764\nAnd so I'll go ahead and finish that.\n\n605\n00:29:59,109 --> 00:30:00,470\nAnd we should be good.\n\n606\n00:30:00,470 --> 00:30:03,130\nLet's see how many commands this delivers.\n\n607\n00:30:03,130 --> 00:30:05,430\nThis should deliver a ton of commands.\n\n608\n00:30:05,430 --> 00:30:07,730\n>> There are about 80 or\nso, I think, or more.\n\n609\n00:30:07,730 --> 00:30:09,550\n>> And\nit takes a little while to run too, so\n\n610\n00:30:09,550 --> 00:30:11,210\nI'll probably let it run during the break.\n\n611\n00:30:11,210 --> 00:30:13,800\nNow you do wanna be careful with this and\n\n612\n00:30:13,800 --> 00:30:16,840\nnot do this if you're\nremote from the router.\n\n613\n00:30:16,840 --> 00:30:19,200\nCuz it is actually possible for\nyou to lock yourself out of the router.\n\n614\n00:30:19,200 --> 00:30:20,180\nThat would be bad.\n\n615\n00:30:20,180 --> 00:30:21,690\nFortunately it doesn't save, so\n\n616\n00:30:21,690 --> 00:30:23,472\nyou can always just reboot\nthe router to get back out.\n\n617\n00:30:23,472 --> 00:30:29,190\nSo it's warning me,\nI've got NAT turned on on the router.\n\n618\n00:30:29,190 --> 00:30:31,100\nSo it's offering to support\nthat through the firewall.\n\n619\n00:30:31,100 --> 00:30:32,550\nI want that, so I'll say, yes.\n\n620\n00:30:34,610 --> 00:30:36,040\nAnd here's the list of commands.\n\n621\n00:30:36,040 --> 00:30:37,000\nDoes it give us a line count?\n\n622\n00:30:38,880 --> 00:30:40,240\nIt doesn't.\n\n623\n00:30:40,240 --> 00:30:41,310\nThat's a lot of commands though.\n\n624\n00:30:41,310 --> 00:30:41,950\n>> That's a lot of commands.\n\n625\n00:30:41,950 --> 00:30:42,884\n>> That's quite a bit.\n>> [LAUGH]\n\n626\n00:30:42,884 --> 00:30:44,837\n>> So all those different security options\n\n627\n00:30:44,837 --> 00:30:48,960\nthat we chose, here's all of them being\nimplemented, and it is quite a bit.\n\n628\n00:30:48,960 --> 00:30:51,660\nSo it can be quite an undertaking.\n\n629\n00:30:51,660 --> 00:30:54,250\nSo I'm going to go ahead and deliver that.\n\n630\n00:30:54,250 --> 00:30:55,030\nAnd we'll let it run.\n\n631\n00:30:55,030 --> 00:30:56,820\nNow I am local to the router.\n\n632\n00:30:56,820 --> 00:30:58,776\nI'm plugged right into the same\nnetwork as its inside interface.\n\n633\n00:30:58,776 --> 00:31:01,029\n>> 401 commands or is that 40?\n\n634\n00:31:01,029 --> 00:31:03,200\n>> It does submitting 401 commands.\n\n635\n00:31:03,200 --> 00:31:04,500\nI was wrong by about five times.\n\n636\n00:31:04,500 --> 00:31:05,450\n>> Yeah.\n\n637\n00:31:05,450 --> 00:31:08,420\nYou can see where that would take you a\nlittle while to get all that punched in to\n\n638\n00:31:08,420 --> 00:31:09,790\nsecure the router.\n\n639\n00:31:09,790 --> 00:31:10,825\nIt looks like it's done, though.\n\n640\n00:31:10,825 --> 00:31:12,560\n>> [LAUGH]\n>> It actually went pretty fast.\n\n641\n00:31:14,840 --> 00:31:17,000\nAll right, so let's see some changes.\n\n642\n00:31:17,000 --> 00:31:19,720\nI'm going to disconnect from\nthe router here in the background.\n\n643\n00:31:21,680 --> 00:31:23,073\nAnd I'm just gonna connect back up.\n\n644\n00:31:27,791 --> 00:31:28,685\nWell, that's different.\n\n645\n00:31:28,685 --> 00:31:31,030\n>> [LAUGH]\n>> Remember what I said.\n\n646\n00:31:31,030 --> 00:31:35,420\nI said, it's pretty easy to lock yourself\nout of the router if you're not careful.\n\n647\n00:31:35,420 --> 00:31:38,341\nAnd that very well may have happened.\n\n648\n00:31:38,341 --> 00:31:43,177\nI went to SSH, into 192.168.0.1.\n\n649\n00:31:43,177 --> 00:31:45,499\nNow I was already connected a moment ago.\n\n650\n00:31:45,499 --> 00:31:47,190\nI shouldn't have closed that session.\n\n651\n00:31:47,190 --> 00:31:48,970\n>> And so now, when I try and\nconnect, whoops.\n\n652\n00:31:50,360 --> 00:31:50,980\nWhen I try and\n\n653\n00:31:50,980 --> 00:31:54,890\nconnect to that, I'm getting server\nunexpectedly closed network connection.\n\n654\n00:31:54,890 --> 00:31:58,704\nSo one of those commands has caused\na problem with my SSH connection.\n\n655\n00:31:58,704 --> 00:32:01,241\nThat's why it's so\nimportant to test this out and, again,\n\n656\n00:32:01,241 --> 00:32:02,548\nnot be remote from the router.\n\n657\n00:32:02,548 --> 00:32:05,948\nNow, on a positive side It\nhasn't saved the config yet.\n\n658\n00:32:05,948 --> 00:32:10,105\nSo, I know that no matter what,\nI can always flip the power switch on this\n\n659\n00:32:10,105 --> 00:32:12,570\nthing, and boot it back up and\nget back in.\n\n660\n00:32:12,570 --> 00:32:18,100\nI am kinda curious about which\nsetting it applied that has\n\n661\n00:32:18,100 --> 00:32:21,190\nlocked me out, so\nI'll have to take a look at that.\n\n662\n00:32:21,190 --> 00:32:25,770\nOn the left side here, down at the bottom,\nyou'll see these utilities.\n\n663\n00:32:25,770 --> 00:32:30,090\nAnd here is,\nright to start-up configuration.\n\n664\n00:32:30,090 --> 00:32:32,630\nThat's the button that's\nactually gonna save the config.\n\n665\n00:32:32,630 --> 00:32:36,090\nAnd as long as I don't hit that,\nthen I'm okay, I can reboot.\n\n666\n00:32:36,090 --> 00:32:38,270\nBut I wanna find out why I'm locked out.\n\n667\n00:32:38,270 --> 00:32:41,100\nI'm curious, and so,\nI wanna take a look at it.\n\n668\n00:32:41,100 --> 00:32:44,960\nI am still connected via the CCP,\nso as long as I've got that,\n\n669\n00:32:44,960 --> 00:32:48,710\nI should be able to get myself out of\nthis, without having to reboot the router,\n\n670\n00:32:48,710 --> 00:32:52,720\nso but,\nlet's see if we can spot it real quick.\n\n671\n00:32:52,720 --> 00:32:55,500\nIf not, I think we're already over on\ntime so we might stop for a break.\n\n672\n00:32:55,500 --> 00:32:59,450\nBut down here, we've got configuration\neditor, and I'm just gonna choose that.\n\n673\n00:33:02,180 --> 00:33:07,070\nAnd, I don't think I want to do a back-up\nright now because it's messed up so,\n\n674\n00:33:07,070 --> 00:33:08,120\nI'll just agree.\n\n675\n00:33:08,120 --> 00:33:13,610\nThis is one that lets you have\nraw access to the config.\n\n676\n00:33:13,610 --> 00:33:17,820\nAnd so I can go in here and\nI can look and start pushing changes.\n\n677\n00:33:17,820 --> 00:33:18,660\nSo, I am still connected.\n\n678\n00:33:18,660 --> 00:33:21,372\nSo, I'm gonna jump\nstraight down to the VTYs,\n\n679\n00:33:21,372 --> 00:33:24,730\ncuz that's probably where my issue is.\n\n680\n00:33:24,730 --> 00:33:26,090\nLook at what it did, Ronnie.\n\n681\n00:33:26,090 --> 00:33:31,390\nLine VTY 0 4 transport input Telnet,\nthat's a bizarre thing.\n\n682\n00:33:31,390 --> 00:33:34,690\nSo it disabled SSH for me for some reason.\n\n683\n00:33:34,690 --> 00:33:37,520\n>> So you go back into PuTTY,\nyou might be able to connect via Telnet.\n\n684\n00:33:37,520 --> 00:33:39,060\n>> Yeah.\nWe'll try it.\n\n685\n00:33:39,060 --> 00:33:39,560\n>> Interesting.\n\n686\n00:33:40,850 --> 00:33:44,450\n>> That's obviously not what I want,\nbut, it sure did.\n\n687\n00:33:44,450 --> 00:33:45,180\n>> Sure enough.\n\n688\n00:33:46,270 --> 00:33:47,080\n>> That is lame.\n\n689\n00:33:47,080 --> 00:33:47,700\nYou know what?\n\n690\n00:33:47,700 --> 00:33:49,780\nLet's fix this before we go to break.\n\n691\n00:33:49,780 --> 00:33:51,930\nAll right, so fortunately,\nit's an easy fix.\n\n692\n00:33:53,440 --> 00:33:54,570\nI need to get into my VTYs.\n\n693\n00:33:54,570 --> 00:33:59,450\nAnd what I'm gonna do is,\nI'm gonna say, transport input SSH,\n\n694\n00:33:59,450 --> 00:34:02,880\nthat's gonna turn off Telnet and\nonly support SSH.\n\n695\n00:34:02,880 --> 00:34:04,260\nAnd that's normally what we want.\n\n696\n00:34:04,260 --> 00:34:10,610\nNow notice, I just disabled Telnet but\nI'm still connected via Telnet.\n\n697\n00:34:10,610 --> 00:34:14,100\nThat command takes effect\nwith any future connection.\n\n698\n00:34:14,100 --> 00:34:18,892\nSo I'm not actually locked myself out and\nso if I do,\n\n699\n00:34:18,892 --> 00:34:23,920\nI gotta show users, there we go,\nI can see me connected on VTY 0,\n\n700\n00:34:23,920 --> 00:34:27,660\nso there I am, and\nI'm connected via Telnet.\n\n701\n00:34:27,660 --> 00:34:33,220\nI'm gonna leave that window there and\nI'm gonna open up another PuTTY window.\n\n702\n00:34:33,220 --> 00:34:34,460\nAnd on this one, I'll try in Telnet.\n\n703\n00:34:34,460 --> 00:34:38,100\nNow the reason I'm leaving the other\none there, is I know I'm connected.\n\n704\n00:34:38,100 --> 00:34:39,530\nSo I don't wanna break it.\n\n705\n00:34:39,530 --> 00:34:42,470\nIf I know I'm in there,\nI've got a way to get in.\n\n706\n00:34:42,470 --> 00:34:43,800\n>> SSH is not working.\n\n707\n00:34:43,800 --> 00:34:44,890\n>> Here we go.\n\n708\n00:34:44,890 --> 00:34:47,870\nAnd there's my warning banner coming up,\nletting me know,\n\n709\n00:34:47,870 --> 00:34:50,400\nhey, unauthorized access is not permitted.\n\n710\n00:34:50,400 --> 00:34:51,000\nSo I'm in there.\n\n711\n00:34:51,000 --> 00:34:55,020\nSo now I feel safe going ahead and\nsaving my configuration.\n\n712\n00:34:55,020 --> 00:34:57,410\nActually, I'll save it from the CCP.\n\n713\n00:34:58,490 --> 00:34:59,360\nSo that's good there.\n\n714\n00:34:59,360 --> 00:35:02,360\nI'll go ahead and get out of that.\n\n715\n00:35:02,360 --> 00:35:04,796\nAnd we're in business.\n\n716\n00:35:04,796 --> 00:35:09,200\nSo just because its got\na nice one step click thing,\n\n717\n00:35:09,200 --> 00:35:11,900\nwe don't wanna necessarily\ntrust it right out of the box.\n\n718\n00:35:11,900 --> 00:35:14,010\nEvery now and then,\nquirks like that can happen.\n\n719\n00:35:14,010 --> 00:35:16,030\nSo, I'm gonna go ahead and\nsave that configuration.\n\n720\n00:35:18,000 --> 00:35:19,070\n>> Yeah.\n>> And there we go.\n\n721\n00:35:19,070 --> 00:35:21,970\n>> Now, the good thing is, even though\nwe did run into a problem immediately,\n\n722\n00:35:21,970 --> 00:35:25,430\nthat's what you want to do,\nis after you run that one step lockdown,\n\n723\n00:35:25,430 --> 00:35:27,310\nsee if you actually having any issues.\n\n724\n00:35:27,310 --> 00:35:32,297\nLeave this up and running, because you can\nalso go back into that security audit,\n\n725\n00:35:32,297 --> 00:35:36,489\nAnd then you can uncheck the things,\nif you don't want run,\n\n726\n00:35:36,489 --> 00:35:38,540\nif you find out what the issue is.\n\n727\n00:35:38,540 --> 00:35:41,180\n>> It's a pretty slick system,\nit does work well.\n\n728\n00:35:41,180 --> 00:35:42,820\nWhat'll happen though, in real life,\n\n729\n00:35:42,820 --> 00:35:46,090\nis normally you'll do this once, you'll\nfind the configuration that works for you,\n\n730\n00:35:46,090 --> 00:35:49,400\nand you'll just create a template that you\ncan copy and paste into your other router.\n\n731\n00:35:49,400 --> 00:35:53,180\nSo don't expect to use this every day,\nor even every time you get a new device.\n\n732\n00:35:53,180 --> 00:35:54,820\nYou'll normally kinda go\nthat template route instead.\n\n733\n00:35:56,772 --> 00:35:58,660\nAll right, well Ronnie,\nlet's stop here and take a break.\n\n734\n00:35:58,660 --> 00:35:59,990\nAnd when we get back,\n\n735\n00:35:59,990 --> 00:36:02,210\nwe're gonna take a look at some of\nthe settings that it applied and\n\n736\n00:36:02,210 --> 00:36:06,880\na few others to think about, as we do\nthat initial configuration of our router.\n\n737\n00:36:06,880 --> 00:36:07,620\n>> Sounds good.\n\n738\n00:36:07,620 --> 00:36:08,645\n>> All right, so ladies and\ngentlemen, stay tuned.\n\n739\n00:36:08,645 --> 00:36:10,085\nWe'll be back after this.\n\n740\n00:36:10,085 --> 00:36:15,078\n[SOUND]\n\n741\n00:36:17,806 --> 00:36:19,978\nAll right, welcome back everybody.\n\n742\n00:36:19,978 --> 00:36:21,349\nSo before the the break,\n\n743\n00:36:21,349 --> 00:36:25,204\nwe got a chance to see what the Cisco\nconfiguration professional was,\n\n744\n00:36:25,204 --> 00:36:29,605\nhow we kinda use it and we got to see one\nof the handy wizards that's there for us.\n\n745\n00:36:29,605 --> 00:36:32,659\nThe one step lockdown and\nthe audit wizard, which again,\n\n746\n00:36:32,659 --> 00:36:35,440\nI ran the audit wizard so\nwe saw the step-by-step.\n\n747\n00:36:35,440 --> 00:36:37,400\nThe one step\n>> You just click next.\n\n748\n00:36:37,400 --> 00:36:38,740\n>> It's not very exciting.\n\n749\n00:36:38,740 --> 00:36:43,390\nSo we got a chance to see those, but\nlet's put that automatic stuff aside.\n\n750\n00:36:43,390 --> 00:36:47,433\nLet's take a look at some actual practical\nthings that we can do inside of the router\n\n751\n00:36:47,433 --> 00:36:49,992\nand unfortunately,\nwe got a great objective here.\n\n752\n00:36:49,992 --> 00:36:55,764\nObjective 2.1.c, under their new\ncrazy objective numbering system,\n\n753\n00:36:55,764 --> 00:37:00,453\nsecure router access using\nstrong encrypted passwords, and\n\n754\n00:37:00,453 --> 00:37:04,520\nusing iOS login enhancements,\nand IPv6 security.\n\n755\n00:37:04,520 --> 00:37:05,640\nAll right.\n\n756\n00:37:05,640 --> 00:37:09,060\nSo a couple of different things that we\nmay need to configure on our router now.\n\n757\n00:37:09,060 --> 00:37:12,630\nThe security audit we did,\nthose are general\n\n758\n00:37:12,630 --> 00:37:16,330\nrecommended settings from Cisco of what\nyou should do to secure your system.\n\n759\n00:37:17,350 --> 00:37:18,760\nIt's not a one size fits all.\n\n760\n00:37:18,760 --> 00:37:20,110\n>> Right.\n>> Different environments have\n\n761\n00:37:20,110 --> 00:37:20,710\ndifferent needs.\n\n762\n00:37:20,710 --> 00:37:24,230\nAnd so these last steps here are ones\nthat you're gonna have to set up yourself\n\n763\n00:37:24,230 --> 00:37:26,340\nregardless of whether you run\nthe one step wizard or not.\n\n764\n00:37:27,780 --> 00:37:30,080\nAll right, so let's take a look at\nsome of the things that are there.\n\n765\n00:37:30,080 --> 00:37:33,930\nFirst off, it's saying,\nuse strong encrypted passwords.\n\n766\n00:37:33,930 --> 00:37:39,650\nAll right, as part of our little\none step wizard that it ran there,\n\n767\n00:37:39,650 --> 00:37:41,880\nit turned on a little bit of\npassword encryption for us.\n\n768\n00:37:41,880 --> 00:37:45,395\nAnd let me show some of this from the\ncommand line before we get into the GUI,\n\n769\n00:37:45,395 --> 00:37:49,310\ncuz some of this is obvious and\nsome isn't.\n\n770\n00:37:49,310 --> 00:37:54,340\nIf you went through our CCNA shows, then\nyou've probably already seen this stuff.\n\n771\n00:37:54,340 --> 00:37:58,221\nBut basically, if I create a user name,\n\n772\n00:37:58,221 --> 00:38:03,435\nlike username, don, Password cisco123.\n\n773\n00:38:03,435 --> 00:38:04,235\nOkay.\n\n774\n00:38:04,235 --> 00:38:08,985\nWhen I do that, it creates a user account\nfor me and it stores it in my config.\n\n775\n00:38:08,985 --> 00:38:16,205\nBut, if I pull up my configuration,\nwell, see how it's doing username,\n\n776\n00:38:16,205 --> 00:38:20,365\nDon, password, seven, and\nthen you've got a bunch of jumbled mess.\n\n777\n00:38:20,365 --> 00:38:21,145\nOkay.\n\n778\n00:38:21,145 --> 00:38:26,650\nThe reason it's doing that is, we've\nturned on the password encryption service.\n\n779\n00:38:26,650 --> 00:38:30,290\nNow I don't believe that was\non by default, but right here,\n\n780\n00:38:30,290 --> 00:38:33,870\nat the very beginning,\nI've got service password encryption.\n\n781\n00:38:33,870 --> 00:38:37,270\nMost routers don't have\nthat turned on by default.\n\n782\n00:38:37,270 --> 00:38:38,990\nSo I'm gonna turn that off real quick.\n\n783\n00:38:41,240 --> 00:38:44,680\nAnd I'm gonna recreate that user account,\nall right?\n\n784\n00:38:44,680 --> 00:38:49,860\nNow, if that service is not running,\nwhen you create a user account,\n\n785\n00:38:52,110 --> 00:38:56,940\nthe user's password is stored\nin the config in plain text.\n\n786\n00:38:56,940 --> 00:38:57,710\nSo it can be seen.\n\n787\n00:38:57,710 --> 00:39:01,410\nAnybody looking over my shoulder\ncan see what my password is.\n\n788\n00:39:01,410 --> 00:39:02,310\nAll right?\n\n789\n00:39:02,310 --> 00:39:07,015\nBy turning on the password encryption\nservice, we are telling the router,\n\n790\n00:39:07,015 --> 00:39:11,290\nhey, any time somebody puts an unencrypted\npassword in there, go ahead and\n\n791\n00:39:11,290 --> 00:39:12,120\nencrypt it.\n\n792\n00:39:12,120 --> 00:39:12,640\nAll right?\n\n793\n00:39:12,640 --> 00:39:16,520\nSo now if I re-run that command,\nnotice that my password got encrypted.\n\n794\n00:39:17,535 --> 00:39:19,210\nBut, here is the thing.\n\n795\n00:39:19,210 --> 00:39:23,740\nThe objective says use\nstrong encrypted password.\n\n796\n00:39:23,740 --> 00:39:25,320\n>> Ok.\nThe problem here is,\n\n797\n00:39:25,320 --> 00:39:28,010\nthis is not actually strong encryption.\n\n798\n00:39:28,010 --> 00:39:34,510\nIf I just do a quick Google search,\ndecrypt Cisco password,\n\n799\n00:39:34,510 --> 00:39:37,140\nand I'll just take\nthe first link that I find.\n\n800\n00:39:37,140 --> 00:39:40,170\nAnd I'll punch in that password.\n\n801\n00:39:40,170 --> 00:39:40,830\nAnd there it is.\n\n802\n00:39:40,830 --> 00:39:42,670\nIt decrypted it for me.\n\n803\n00:39:42,670 --> 00:39:45,330\nThose Cisco type seven passwords,\n\n804\n00:39:45,330 --> 00:39:48,740\nthe password that are encrypted by\nthe password encryption service,\n\n805\n00:39:48,740 --> 00:39:51,930\nit's a broken form of encryption,\nit's not worth using.\n\n806\n00:39:51,930 --> 00:39:56,536\nThe only thing it really does is stop\nsomeone from looking over your shoulder.\n\n807\n00:39:56,536 --> 00:39:59,857\nSo the alternative,\nis to use strong encryption,\n\n808\n00:39:59,857 --> 00:40:04,658\nto use encryption that's better than\nthe password encryption service.\n\n809\n00:40:04,658 --> 00:40:10,818\nThe way we can do that is,\nwe can create our users,\n\n810\n00:40:10,818 --> 00:40:16,249\nand instead of using the password keyword,\n\n811\n00:40:16,249 --> 00:40:20,310\nusing the secret keyword.\n\n812\n00:40:20,310 --> 00:40:24,030\nAnd that tells it, don't do a type\nseven password, do a type five.\n\n813\n00:40:24,030 --> 00:40:27,905\nAn MD5 hash password,\nwhich is fairly secure.\n\n814\n00:40:27,905 --> 00:40:34,540\nOkay, and now when I do a show run.\n\n815\n00:40:34,540 --> 00:40:37,328\nI can see that it is stored as an MD 5 #.\n\n816\n00:40:37,328 --> 00:40:40,105\nNot a type 7 that can be reversed.\n\n817\n00:40:40,105 --> 00:40:43,580\n>> Yeah, this is actually a good point for\nus to make at this point.\n\n818\n00:40:43,580 --> 00:40:46,390\nWhen we take a look at these\npasswords here in the encryption.\n\n819\n00:40:46,390 --> 00:40:50,450\nAnd the reason why, is because you\nmight get confused that a level seven,\n\n820\n00:40:50,450 --> 00:40:55,670\nwould be a greater or stronger password\nthan the idea of the five that you see.\n\n821\n00:40:55,670 --> 00:41:00,379\nBut the five actually means this, what\nwe talked about here a salted MD5 hash,\n\n822\n00:41:00,379 --> 00:41:04,700\nwhich is not the most secure, but\nis more secure than level seven.\n\n823\n00:41:04,700 --> 00:41:06,960\nThe level seven is actually\none that we call a,\n\n824\n00:41:06,960 --> 00:41:10,484\nI can't even pronounce the guy's name.\n\n825\n00:41:10,484 --> 00:41:13,320\nSomething like that,\nis what that one actually is.\n\n826\n00:41:13,320 --> 00:41:17,690\nAnd that one, again,\nworked probably great in the 1500s or\n\n827\n00:41:17,690 --> 00:41:22,150\n1600s, whenever it was created, but for\nus in the 21st century, not so good.\n\n828\n00:41:22,150 --> 00:41:24,100\nbut it does prevent someone,\nunless you're Rain Man,\n\n829\n00:41:24,100 --> 00:41:27,320\nI guess, from being able to actually\ndecrypt it, able to walk on by.\n\n830\n00:41:27,320 --> 00:41:28,550\n>> Rain Man.\n\n831\n00:41:28,550 --> 00:41:29,460\nCount those toothpicks.\n\n832\n00:41:29,460 --> 00:41:30,442\n>> That's right.\n\n833\n00:41:30,442 --> 00:41:34,770\n>> All right, so there are three ways\nthat we could go about this, and\n\n834\n00:41:34,770 --> 00:41:39,870\nthe first way was just to\nrun this command right here.\n\n835\n00:41:39,870 --> 00:41:42,020\nOkay, but when I did that,\n\n836\n00:41:42,020 --> 00:41:46,340\nthe password made it into\nthe config in plain text, right.\n\n837\n00:41:46,340 --> 00:41:49,910\nSo let me, where did I,\nI was gonna cut and\n\n838\n00:41:49,910 --> 00:41:52,770\npaste some of this stuff,\nso that we could see it.\n\n839\n00:41:52,770 --> 00:41:54,503\n>> Right up there,\nyeah the second line right there.\n\n840\n00:42:00,137 --> 00:42:00,637\nAll right.\n\n841\n00:42:04,247 --> 00:42:06,720\nThe first one, I ran that.\n\n842\n00:42:06,720 --> 00:42:10,340\nAnd if we took a look at\nhow it made it into config,\n\n843\n00:42:10,340 --> 00:42:13,920\nit made it in there in plain text,\nwhich is bad.\n\n844\n00:42:13,920 --> 00:42:17,530\nThe second time,\nit got a little bit better.\n\n845\n00:42:17,530 --> 00:42:23,760\nBecause we had the whole type seven thing,\nand so, let me just add that in here.\n\n846\n00:42:26,760 --> 00:42:31,025\nSo we can see kinda how that one ended up.\n\n847\n00:42:31,025 --> 00:42:34,505\nBut the third one was the best one,\nwhich was this guy right here.\n\n848\n00:42:34,505 --> 00:42:39,425\nAnd we don't need the password encryption\nservice running to be able to that.\n\n849\n00:42:39,425 --> 00:42:41,250\nWe're encrypting it ourselves.\n\n850\n00:42:41,250 --> 00:42:46,250\nAnd not relying on some crazy service\nto do it, and not even to do it well.\n\n851\n00:42:46,250 --> 00:42:46,870\nAlright.\n\n852\n00:42:46,870 --> 00:42:50,180\nAll right, so, don't rely on\nthe password encryption services.\n\n853\n00:42:50,180 --> 00:42:52,030\nThe lesson to learn there, right.\n\n854\n00:42:52,030 --> 00:42:52,840\nUse your own.\n\n855\n00:42:52,840 --> 00:42:58,100\nWhenever you can, use the secret keyword\ninstead of the password keyword,\n\n856\n00:42:58,100 --> 00:42:59,020\nwhen assigning a password.\n\n857\n00:43:01,460 --> 00:43:05,650\nAll right, so, in all three of these\nexamples, I use cisco123 as my password.\n\n858\n00:43:05,650 --> 00:43:07,110\nSo, there's no real difference.\n\n859\n00:43:07,110 --> 00:43:10,620\nIt's the same password,\njust encoded three different ways.\n\n860\n00:43:13,510 --> 00:43:16,240\nSo, that's one example.\n\n861\n00:43:16,240 --> 00:43:19,660\nAnother thing that we might want to do,\nis we might want to require\n\n862\n00:43:19,660 --> 00:43:24,170\nour user have a long password,\nor a short password or whatever.\n\n863\n00:43:24,170 --> 00:43:27,781\nSo you can set a password length,\nlet me see if it already did that.\n\n864\n00:43:30,802 --> 00:43:31,894\nYeah, it did.\n\n865\n00:43:31,894 --> 00:43:36,973\nSo when I ran that wizard,\nit went ahead and did, security passwords,\n\n866\n00:43:36,973 --> 00:43:41,716\nmin-link6, saying that any\npassword entered into the system,\n\n867\n00:43:41,716 --> 00:43:46,810\nneeds to have a minimum of six characters,\notherwise it's too short.\n\n868\n00:43:46,810 --> 00:43:52,380\nThat's another way to set\na minimum password length.\n\n869\n00:43:55,570 --> 00:43:56,820\nLike that, okay.\n\n870\n00:43:56,820 --> 00:43:59,780\nSo just keep in mind there are a few\nother ways we can tweak it.\n\n871\n00:43:59,780 --> 00:44:02,550\nNow I was using the command\nline interface there.\n\n872\n00:44:02,550 --> 00:44:04,470\nWe have some GUI utilities also.\n\n873\n00:44:04,470 --> 00:44:05,220\n>> Yeah.\n\n874\n00:44:05,220 --> 00:44:08,640\nNow this one for\nus is underneath the configuration, and\n\n875\n00:44:08,640 --> 00:44:12,880\nthe router and router access folder,\nthat you actually see right there.\n\n876\n00:44:12,880 --> 00:44:15,420\nOne of the things that you're gonna\nhave to do on the exam again,\n\n877\n00:44:15,420 --> 00:44:17,910\nis actually be able to navigate\nthese things quickly, so\n\n878\n00:44:17,910 --> 00:44:19,570\nthat you can configure\nwhat needs to be done.\n\n879\n00:44:19,570 --> 00:44:22,430\nSo make sure you just spend a little\nbit of time in taking a look at\n\n880\n00:44:22,430 --> 00:44:23,045\nthis interface.\n\n881\n00:44:23,045 --> 00:44:24,160\nMm-hm.\n\n882\n00:44:24,160 --> 00:44:27,940\n>> We talked about enabling SSH before\nthe break, but if you haven't done it,\n\n883\n00:44:27,940 --> 00:44:29,200\nyou can do it right here.\n\n884\n00:44:29,200 --> 00:44:33,820\nIf we didn't already have an SSH key,\nthen we could hit Generate an RSA key, and\n\n885\n00:44:33,820 --> 00:44:34,780\nit would make it.\n\n886\n00:44:34,780 --> 00:44:36,700\nAnd that's that crypto-key-gen.\n\n887\n00:44:36,700 --> 00:44:40,020\nAn RSA command that I mentioned earlier,\nIt just runs it for you and\n\n888\n00:44:40,020 --> 00:44:41,250\ncreates the certificate.\n\n889\n00:44:41,250 --> 00:44:43,900\nIf you've been enabled the secure\nweb server you have already got it.\n\n890\n00:44:43,900 --> 00:44:46,360\nSo you don't have to do one, and\nthat is exactly what I've done here.\n\n891\n00:44:46,360 --> 00:44:48,734\nSo it greyed out for me, right?\n\n892\n00:44:48,734 --> 00:44:51,185\nOther things that we can define.\n\n893\n00:44:51,185 --> 00:44:53,560\nWell, we can modify our VTY lines.\n\n894\n00:44:53,560 --> 00:44:57,470\nWe can define how many VTYs we have,\nand then here's our protocols.\n\n895\n00:44:57,470 --> 00:45:00,940\nNow, notice, right now,\nmy input protocol is set to Telnet.\n\n896\n00:45:00,940 --> 00:45:03,320\nHere's something that we\nhave to be worried about.\n\n897\n00:45:03,320 --> 00:45:06,560\nRight before going into the break,\nwe got locked out of the router.\n\n898\n00:45:06,560 --> 00:45:08,930\nRight, remember, I couldn't SSH into it.\n\n899\n00:45:08,930 --> 00:45:12,560\nSo I connected via the command line and\nI fixed it.\n\n900\n00:45:12,560 --> 00:45:14,670\nRight?\nI saw where it was set to Telnet only,\n\n901\n00:45:14,670 --> 00:45:16,230\nand I switched it to SSA.\n\n902\n00:45:16,230 --> 00:45:18,930\nWell, here in the CCP,\n\n903\n00:45:18,930 --> 00:45:23,520\nit doesn't know I've made that change yet\nso it's still showing the old way.\n\n904\n00:45:23,520 --> 00:45:26,680\nWell fortunately you've got\na little refresh button up top, and\n\n905\n00:45:26,680 --> 00:45:29,090\nany time you make a change\nfrom the command line,\n\n906\n00:45:29,090 --> 00:45:34,390\nit's real important to come back here and\nrefresh, or the CCP won't see it.\n\n907\n00:45:34,390 --> 00:45:37,475\nAll right, so here's it's doing a refresh,\nand I just need to give it a second and\n\n908\n00:45:37,475 --> 00:45:39,070\nwe'll go back in there.\n\n909\n00:45:39,070 --> 00:45:40,320\nThen it should show SSH.\n\n910\n00:45:41,610 --> 00:45:44,310\nI'm using should, because that's\nmy out in case it doesn't work.\n\n911\n00:45:44,310 --> 00:45:45,350\nI can say, well, I said should.\n\n912\n00:45:47,560 --> 00:45:48,290\nWe'll give it a moment.\n\n913\n00:45:48,290 --> 00:45:48,830\n>> There it goes.\n\n914\n00:45:48,830 --> 00:45:49,710\n>> There, it's discovered.\n\n915\n00:45:49,710 --> 00:45:55,930\nGo back under configure,\nrouter, router access, and VTY.\n\n916\n00:45:55,930 --> 00:45:57,210\nThere we go.\n\n917\n00:45:57,210 --> 00:45:58,820\nNow input protocols RSs.\n\n918\n00:46:00,220 --> 00:46:03,120\nNow if I want to change that,\nI can always just edit it, and\n\n919\n00:46:03,120 --> 00:46:05,130\nwe'll see it in our whole list of options,\nright.\n\n920\n00:46:05,130 --> 00:46:07,610\nAll right, lets take a look at some of\nthe things that we can change in here.\n\n921\n00:46:07,610 --> 00:46:10,870\nWe can define how many lines we want,\nright.\n\n922\n00:46:10,870 --> 00:46:12,320\nWith zero being the lowest,\n\n923\n00:46:12,320 --> 00:46:15,730\nand you can go up considerable higher,\n0-4 is the default.\n\n924\n00:46:15,730 --> 00:46:20,100\nWhat your timeout is, how long somebody\ncan stay connected before it disconnects.\n\n925\n00:46:20,100 --> 00:46:24,310\nAnd then here we can set,\nwhether we're doing ssh or telnet or all,\n\n926\n00:46:24,310 --> 00:46:29,510\nit doesn't list all of the other quirky\nlittle protocols, it just says ssh.\n\n927\n00:46:31,110 --> 00:46:36,690\nNow one of the options that I really\nrecommend people do is set An access list.\n\n928\n00:46:36,690 --> 00:46:40,300\nThe access list is gonna define what IP\n\n929\n00:46:40,300 --> 00:46:43,860\naddresses are allowed to connect\nto your router for management.\n\n930\n00:46:43,860 --> 00:46:48,710\nAnd it doesn't set this with the default,\nlike the wizard that we ran.\n\n931\n00:46:48,710 --> 00:46:51,670\nBecause it doesn't know, on your network,\nwhat IPs you want to use.\n\n932\n00:46:51,670 --> 00:46:53,390\nIt's up to you to kind of set that.\n\n933\n00:46:53,390 --> 00:46:57,250\nSo here's a step where we can go a little\nbit further to secure our logins.\n\n934\n00:46:58,490 --> 00:47:00,760\nSo we're normally going to\ndeal with inbound ACLs.\n\n935\n00:47:00,760 --> 00:47:04,630\nWhen somebody is telnetting or\nSSHing into the router.\n\n936\n00:47:04,630 --> 00:47:05,430\nWho do we want to allow?\n\n937\n00:47:06,610 --> 00:47:10,797\nAnd unlike the command line, we can create\nan ACL here through a nice easy to use\n\n938\n00:47:10,797 --> 00:47:12,645\nGUI, it makes life a lot simpler.\n\n939\n00:47:15,106 --> 00:47:20,860\nSo I'm gonna create an access list,\nand I'll call it my VTY access list.\n\n940\n00:47:20,860 --> 00:47:23,160\nSo I'm just giving it a name, and\n\n941\n00:47:23,160 --> 00:47:27,560\nwith a VTY access list you're really\nonly filtering based on source IP.\n\n942\n00:47:27,560 --> 00:47:28,540\nYou don't really care.\n\n943\n00:47:28,540 --> 00:47:34,270\nThe destination is always you, and\nthe port, it's gonna be SSH or Tel matter.\n\n944\n00:47:34,270 --> 00:47:36,430\nIt wouldn't make it to\nthe VTUI's in the first place.\n\n945\n00:47:36,430 --> 00:47:39,180\nSo, you can do a standard role,\nand it's a little more efficient.\n\n946\n00:47:39,180 --> 00:47:39,990\nSo, I'm gonna do that.\n\n947\n00:47:41,160 --> 00:47:45,050\nAnd then for my rule entry,\nI just need to add who I want to permit.\n\n948\n00:47:45,050 --> 00:47:46,800\nI'm going to deny everybody else, right.\n\n949\n00:47:46,800 --> 00:47:48,490\nSo I'm just going to do permits here.\n\n950\n00:47:48,490 --> 00:47:53,230\nSo I'm going to permit,\nI'll do a network, and\n\n951\n00:47:53,230 --> 00:48:00,840\nI'm going to permit the 192.168.0.0\nWith a Class C wildcard mask.\n\n952\n00:48:00,840 --> 00:48:03,628\nAnd remember it is a wildcard mask,\nnot a subnet mask.\n\n953\n00:48:03,628 --> 00:48:09,293\nSo it's kinda the opposite of what we\nwould do for a subnet mask, 0.0.0.255.\n\n954\n00:48:09,293 --> 00:48:11,725\nMeaning that last octet\ncan be whatever it wants.\n\n955\n00:48:11,725 --> 00:48:13,605\nBut the first three octets have to match.\n\n956\n00:48:16,061 --> 00:48:16,804\nAll right.\n\n957\n00:48:16,804 --> 00:48:18,868\nAnd so I'll put that in there.\n\n958\n00:48:18,868 --> 00:48:21,910\nSo that's my local area network.\n\n959\n00:48:21,910 --> 00:48:24,160\nAnd I'm gonna go ahead and log entries.\n\n960\n00:48:24,160 --> 00:48:27,370\nAnytime somebody connects I wanna keep\na record of it so I'll choose to log that.\n\n961\n00:48:29,720 --> 00:48:30,740\nAll right.\n\n962\n00:48:30,740 --> 00:48:33,470\nI could go on and I could stop right here.\n\n963\n00:48:33,470 --> 00:48:35,220\nAnybody else would be denied.\n\n964\n00:48:35,220 --> 00:48:40,590\nBut I like to add a deny role, and\nthe reason I do is because if you manually\n\n965\n00:48:40,590 --> 00:48:46,030\nadd the deny role, so I'm gonna deny\nany IP address, that's implied already.\n\n966\n00:48:46,030 --> 00:48:50,790\nSo I don't have to put this in but if you\ndo put it in, you can choose to log it.\n\n967\n00:48:50,790 --> 00:48:53,180\nI like to log any connection to my router.\n\n968\n00:48:53,180 --> 00:48:55,950\nSo even though that rule's not necessary,\nI'm going to put it in there anyway,\n\n969\n00:48:55,950 --> 00:48:59,450\nand I'm going to say deny any log.\n\n970\n00:49:00,930 --> 00:49:04,622\nSo now anybody whose source IP\naddress is in the 192.168.0 network,\n\n971\n00:49:04,622 --> 00:49:08,140\nthey'll be allowed to connect,\neverybody else will get denied.\n\n972\n00:49:08,140 --> 00:49:09,374\nEither way, they're gonna get logged.\n\n973\n00:49:12,055 --> 00:49:13,010\nAll right.\n\n974\n00:49:13,010 --> 00:49:13,960\nSo I'll say okay to that.\n\n975\n00:49:13,960 --> 00:49:16,830\nIt's got it there in my entry and\nI'll just say okay.\n\n976\n00:49:16,830 --> 00:49:18,770\nAll right.\n\n977\n00:49:18,770 --> 00:49:21,420\nNow it's gonna deliver that right now.\n\n978\n00:49:21,420 --> 00:49:26,560\nIt's important that we test it out before\nwe save because this is another one.\n\n979\n00:49:26,560 --> 00:49:28,790\nYou could lock yourself out.\n\n980\n00:49:28,790 --> 00:49:31,510\nAnd if you didn't save,\nyou could just reboot the router.\n\n981\n00:49:31,510 --> 00:49:34,660\nBut if you did save, your rebooting\nthe router's not gonna help you.\n\n982\n00:49:34,660 --> 00:49:36,930\nYou're locked out.\nYou're gonna need the console cable.\n\n983\n00:49:36,930 --> 00:49:38,450\nSo I'm just gonna do a quick test.\n\n984\n00:49:38,450 --> 00:49:43,791\nI'm gonna cancel this session because I\nknow it only applies to new sessions and\n\n985\n00:49:43,791 --> 00:49:46,101\nthen I will open up a new session and\n\n986\n00:49:46,101 --> 00:49:50,348\nif I put the right IP address in\nthere I might be able to connect.\n\n987\n00:49:52,867 --> 00:49:54,016\nThere we go.\n\n988\n00:49:54,016 --> 00:49:56,954\nI was able to connect.\n\n989\n00:49:56,954 --> 00:49:57,538\nAll right.\n\n990\n00:49:57,538 --> 00:50:01,775\nSo now I can go ahead and down here\nI can go to Save Configuration or\n\n991\n00:50:01,775 --> 00:50:04,062\nWrite to Startup Configuration.\n\n992\n00:50:04,062 --> 00:50:08,501\nSo, we'll save it and we're in business.\n\n993\n00:50:13,053 --> 00:50:17,410\nAs far as setting up our VTY's,\nthat was pretty straight forward.\n\n994\n00:50:17,410 --> 00:50:18,650\nWe got that access list.\n\n995\n00:50:18,650 --> 00:50:21,870\nYou'll also see this\nmanagement access entry, and\n\n996\n00:50:21,870 --> 00:50:26,250\nhere's another place where we could\ndefine those management settings.\n\n997\n00:50:26,250 --> 00:50:31,040\nThis is kind of a neat, more neat screen\nI guess because you can define not\n\n998\n00:50:31,040 --> 00:50:34,100\nonly the IPs, but which protocols\nare allowed to connect on and\n\n999\n00:50:34,100 --> 00:50:36,570\nwhich interfaces they're\nallowed to connect on.\n\n1000\n00:50:36,570 --> 00:50:40,258\nSo if we configured it from here,\nI can say for example,\n\n1001\n00:50:40,258 --> 00:50:44,825\nthe 192.168.0.0 network\nwith a 24-bit subnet mask.\n\n1002\n00:50:44,825 --> 00:50:49,465\nAnd this is a subnet mask,\nnot a wildcard mask.\n\n1003\n00:50:49,465 --> 00:50:53,390\nIs allowed to connect on\nthe gig 0.0 interface.\n\n1004\n00:50:53,390 --> 00:50:56,460\nAnd I'll say, I'll allow\nthe configuration professional and\n\n1005\n00:50:56,460 --> 00:51:00,180\nI'm gonna use secure only and so\nthat's gonna turn off TelNet, HTTP.\n\n1006\n00:51:00,180 --> 00:51:02,770\nI'm gonna leave some of these other ones.\n\n1007\n00:51:02,770 --> 00:51:06,500\nI'm gonna turn on SNMP though,\nI kind of want SNMP.\n\n1008\n00:51:06,500 --> 00:51:10,950\nBut I'm turning off TelNet and\nHTTP, and I'll say okay to that.\n\n1009\n00:51:12,230 --> 00:51:13,895\nIt's warning me the firewall's applied.\n\n1010\n00:51:13,895 --> 00:51:18,875\nSo I'll go ahead and say, let's see.\n\n1011\n00:51:18,875 --> 00:51:22,752\nWell, what they're warning me about there\nis that I could apply this same thing in\n\n1012\n00:51:22,752 --> 00:51:25,672\nthe firewall but we haven't\nlearned about the firewall yet so\n\n1013\n00:51:25,672 --> 00:51:28,790\nI'm gonna go ahead and\nsay yes to apply this.\n\n1014\n00:51:28,790 --> 00:51:30,727\nAnd SNMP is disabled, so.\n\n1015\n00:51:34,094 --> 00:51:36,686\nAll right, and it's seeing that\nACL I created just a moment ago,\n\n1016\n00:51:36,686 --> 00:51:39,360\nwhich it's gonna overwrite,\nso I'm okay with that too.\n\n1017\n00:51:39,360 --> 00:51:40,600\nAll right, so there we go.\n\n1018\n00:51:40,600 --> 00:51:43,160\nAnd when we look at it here,\nyou'll see where it's applying,\n\n1019\n00:51:43,160 --> 00:51:48,440\nnot just to allow my IP, but\nit's also allowing other things, right?\n\n1020\n00:51:48,440 --> 00:51:52,860\nThe Remote Copy Protocol,\nSMNP, HTTPS, and SSH.\n\n1021\n00:51:52,860 --> 00:51:55,980\nSo kind of defining these\nin a slightly easier way.\n\n1022\n00:51:55,980 --> 00:51:59,950\nAnother way to achieve the same thing\nI did with the VTYs except this also\n\n1023\n00:51:59,950 --> 00:52:03,810\napplies to the http traffic, which those\nVTY rules I did a minute ago don't.\n\n1024\n00:52:07,010 --> 00:52:07,740\nAll right.\n\n1025\n00:52:07,740 --> 00:52:09,840\nI'm gonna go ahead and apply these.\n\n1026\n00:52:09,840 --> 00:52:13,270\nIt's warning me that some\nof the networks I have\n\n1027\n00:52:13,270 --> 00:52:15,650\naren't allowed to run\nthe configuration protocol.\n\n1028\n00:52:15,650 --> 00:52:16,630\nSo again,\n\n1029\n00:52:16,630 --> 00:52:20,950\nI could potentially lock myself out if I\ndidn't approve the network that I'm on.\n\n1030\n00:52:20,950 --> 00:52:22,740\nBut I did, so\nI'm not too worried about that.\n\n1031\n00:52:23,960 --> 00:52:24,710\nAnd I'll say yes.\n\n1032\n00:52:27,010 --> 00:52:29,200\nAnd I'm supposed to get a convers-.\n\n1033\n00:52:29,200 --> 00:52:30,500\nOh, you know what?\n\n1034\n00:52:30,500 --> 00:52:35,988\nDo you want to add the policy now to\navoid disconnecting the current session?\n\n1035\n00:52:35,988 --> 00:52:36,970\nYes.\nAnd\n\n1036\n00:52:36,970 --> 00:52:38,430\n>> [LAUGH]\n\n1037\n00:52:38,430 --> 00:52:39,170\n>> Normally we get a little\n\n1038\n00:52:39,170 --> 00:52:40,010\nbit of a confirmation.\n\n1039\n00:52:40,010 --> 00:52:41,350\nIt delivers the commands.\n\n1040\n00:52:41,350 --> 00:52:42,300\nThat didn't happen here.\n\n1041\n00:52:42,300 --> 00:52:43,250\nLet me see.\n\n1042\n00:52:43,250 --> 00:52:45,717\nI don't think I read this wrong.\n\n1043\n00:52:49,699 --> 00:52:54,621\nIt's telling me I have not configured a\nmanagement access policy to permit access\n\n1044\n00:52:54,621 --> 00:52:58,560\nto Cisco CP from the host or\nnetwork that you are currently using.\n\n1045\n00:52:58,560 --> 00:53:00,800\nExcept, I am on that network.\n\n1046\n00:53:02,298 --> 00:53:06,005\nOh, [LAUGH] I picked the wrong interface,\nlet me cancel that.\n\n1047\n00:53:06,005 --> 00:53:09,290\n>> [LAUGH]\n>> That would have been a bad mistake.\n\n1048\n00:53:09,290 --> 00:53:10,533\nI picked GI 00.\n\n1049\n00:53:10,533 --> 00:53:11,253\n>> The outside interface.\n\n1050\n00:53:11,253 --> 00:53:12,940\n>> I'm on GI01.\n\n1051\n00:53:12,940 --> 00:53:15,719\nSo let me re-do that.\n\n1052\n00:53:15,719 --> 00:53:16,780\nAnd see,\n\n1053\n00:53:16,780 --> 00:53:20,940\njust like that if it had let me make that\nchange I would have locked myself out.\n\n1054\n00:53:20,940 --> 00:53:22,630\nAnd that would have been bad.\n\n1055\n00:53:22,630 --> 00:53:24,190\nSo let me just re-do that.\n\n1056\n00:53:25,410 --> 00:53:28,190\nYeah, yeah, yeah.\nSame setting.\n\n1057\n00:53:28,190 --> 00:53:30,330\nThere, and this time I'll apply it.\n\n1058\n00:53:30,330 --> 00:53:31,490\n>> There you go.\n\n1059\n00:53:31,490 --> 00:53:36,440\n>> Now it's happy, so here it's creating a\nnew ACL, and its attaching it to the line,\n\n1060\n00:53:36,440 --> 00:53:39,380\nit's attaching the ACL to the VTY's,\nright there.\n\n1061\n00:53:40,470 --> 00:53:42,480\nWhich I guess is kind of hard to see,\nlet me zoom in on that.\n\n1062\n00:53:42,480 --> 00:53:45,170\nSo you'll see line vty and\naccess-class 102 in.\n\n1063\n00:53:45,170 --> 00:53:47,830\nSo that's assigning that one and\n\n1064\n00:53:47,830 --> 00:53:51,290\nyou'll see it's assigning an acl\nto the interface itself, 101,\n\n1065\n00:53:51,290 --> 00:53:54,270\nwhich I know it's not gonna be happy about\nwith that firewall policy turned on.\n\n1066\n00:53:54,270 --> 00:53:57,290\nBut I'm gonna do it anyway for\nthe the sake of adventure.\n\n1067\n00:53:59,100 --> 00:54:03,590\nAll right, so now it secured those\ninterfaces even more, making sure that\n\n1068\n00:54:03,590 --> 00:54:06,590\noutside people or unauthorized\npeople on my network cannot connect.\n\n1069\n00:54:06,590 --> 00:54:08,740\nAll right, you can be really strict.\n\n1070\n00:54:08,740 --> 00:54:12,170\nIf you had like five network admins\nyou could list the five IPs for\n\n1071\n00:54:12,170 --> 00:54:13,815\ntheir workstation specifically and\n\n1072\n00:54:13,815 --> 00:54:15,660\nthen nobody else in your company\nwould be able to access it.\n\n1073\n00:54:15,660 --> 00:54:17,730\nYou know you can get as strict\nwith this stuff as you want.\n\n1074\n00:54:21,422 --> 00:54:25,528\nAll right, the other thing that we've\ngot on here are user accounts and\n\n1075\n00:54:25,528 --> 00:54:27,110\nviews, all right.\n\n1076\n00:54:27,110 --> 00:54:30,360\nNow this is something that I've seen\na lot of companies bad about and\n\n1077\n00:54:30,360 --> 00:54:32,050\nI know I've done it myself too.\n\n1078\n00:54:32,050 --> 00:54:34,890\nIn a small business,\nyou might use the same username and\n\n1079\n00:54:34,890 --> 00:54:37,340\npassword on all your routers,\nand if you have two or\n\n1080\n00:54:37,340 --> 00:54:41,540\nthree network guys, you just share that\nsame username and password, all right.\n\n1081\n00:54:41,540 --> 00:54:46,500\nBut what happens if one person gets\nterminated, they quit or they get fired?\n\n1082\n00:54:46,500 --> 00:54:47,230\nRight?\n\n1083\n00:54:47,230 --> 00:54:50,310\nNow you gotta go and change that password,\nso it changes for everybody and\n\n1084\n00:54:50,310 --> 00:54:51,110\nthat can be a problem.\n\n1085\n00:54:52,350 --> 00:54:55,440\nIn a future episode we're gonna do AAA\nwhere you can have centralized user\n\n1086\n00:54:55,440 --> 00:54:59,300\ndatabase, but another thing that you can\ndo is you can just create multiple user\n\n1087\n00:54:59,300 --> 00:55:01,850\naccounts for\nthe users right here on the router.\n\n1088\n00:55:01,850 --> 00:55:05,720\nAnd if I go under user accounts, that's\nfor all CV accounts that I've got on this\n\n1089\n00:55:05,720 --> 00:55:10,410\nsystem, and you can define who they\nare and what their password is.\n\n1090\n00:55:10,410 --> 00:55:12,650\nSo everybody can have their own password.\n\n1091\n00:55:12,650 --> 00:55:15,530\nIt's not very convenient if you\nhave a lot of equipment, but\n\n1092\n00:55:15,530 --> 00:55:18,060\nif you've only got a handful of routers,\nit's pretty easy to do.\n\n1093\n00:55:18,060 --> 00:55:21,770\nIf I want to add a new user,\n\n1094\n00:55:21,770 --> 00:55:25,340\nI can just come over here to add, and\nso maybe I wanna add one for Ronnie, so\n\n1095\n00:55:25,340 --> 00:55:30,200\nI'll add a Ronnie account and\nI'll set your password, and\n\n1096\n00:55:30,200 --> 00:55:35,350\nnotice here encrypt password using MD5\nhash is checked by default, right?\n\n1097\n00:55:35,350 --> 00:55:38,530\nSo I can create that, and\nthen I can pick a privilege level.\n\n1098\n00:55:38,530 --> 00:55:41,650\nHow much access do I want\nhim to have on the router?\n\n1099\n00:55:41,650 --> 00:55:47,040\nBy default,\nthe Cisco router has two privilege levels.\n\n1100\n00:55:47,040 --> 00:55:48,530\n1 and 15.\n\n1101\n00:55:48,530 --> 00:55:53,159\n15 is full access to\neverything on the router.\n\n1102\n00:55:53,159 --> 00:55:54,018\nAll right.\n\n1103\n00:55:54,018 --> 00:55:58,613\nOne is a very limited form of access\nthat gives you some show commands but\n\n1104\n00:55:58,613 --> 00:55:59,850\nthat's about it.\n\n1105\n00:56:01,490 --> 00:56:04,580\nAll of the other ones don't exist.\n\n1106\n00:56:04,580 --> 00:56:07,908\nSo there is no privilege level five or\nprivilege level seven or\n\n1107\n00:56:07,908 --> 00:56:10,285\nwhatever, those don't exist by default.\n\n1108\n00:56:10,285 --> 00:56:14,653\n>> You can actually go ahead and define\neach of these privilege levels here So\n\n1109\n00:56:14,653 --> 00:56:18,386\nyou can actually say what can be\nprivilege level number five and\n\n1110\n00:56:18,386 --> 00:56:23,580\nwhat they can gain access to, which is a\nreally neat thing for us to be able to do.\n\n1111\n00:56:23,580 --> 00:56:25,580\nThe majority of times, right,\n\n1112\n00:56:25,580 --> 00:56:30,410\nthe person that gets access into\nyour router most of the time,\n\n1113\n00:56:30,410 --> 00:56:33,860\njust having enough to be able to see\nsome of the shell commands isn't enough.\n\n1114\n00:56:33,860 --> 00:56:37,150\nBut having full privileges\nis way too much.\n\n1115\n00:56:37,150 --> 00:56:39,680\nSo we can create what we call views,\n\n1116\n00:56:39,680 --> 00:56:45,590\nthat we can actually associate a certain\nnumber of commands that we want to.\n\n1117\n00:56:45,590 --> 00:56:49,670\nAnd then we can actually allow that\nto also be the same level as that\n\n1118\n00:56:49,670 --> 00:56:50,810\nprivilege user, and\n\n1119\n00:56:50,810 --> 00:56:54,210\nthen he can have those particular\ncommands that he can get access to.\n\n1120\n00:56:54,210 --> 00:57:00,940\n>> Yeah, so if I create a help desk\naccount here, and so I'll just whip on up.\n\n1121\n00:57:00,940 --> 00:57:06,510\nWhen you create that help desk account,\nyou can associate a view with the user,\n\n1122\n00:57:06,510 --> 00:57:08,700\nand specify from some of\nthese different views.\n\n1123\n00:57:08,700 --> 00:57:11,650\nNow these are canned views,\nviews that are built into the system.\n\n1124\n00:57:11,650 --> 00:57:12,740\nLet me zoom in on that.\n\n1125\n00:57:12,740 --> 00:57:15,706\nAnd so you'll see administrator,\nthat's full access.\n\n1126\n00:57:15,706 --> 00:57:17,990\nMonitor, that's like a view only.\n\n1127\n00:57:17,990 --> 00:57:21,046\nThey can kinda see the system,\nand that's about it.\n\n1128\n00:57:21,046 --> 00:57:25,324\nFirewall, they can modify firewall rules,\nbut not the router config itself.\n\n1129\n00:57:25,324 --> 00:57:28,659\nAnd then Easy VPN Remote,\nthey're allowed to VPN in, but\n\n1130\n00:57:28,659 --> 00:57:30,915\nthey're not allowed to make changes.\n\n1131\n00:57:30,915 --> 00:57:34,168\nYou can create your own views though and\nreally have at it.\n\n1132\n00:57:34,168 --> 00:57:35,966\nBut I'm gonna use that monitor one.\n\n1133\n00:57:35,966 --> 00:57:38,051\nSo I'm creating this help desk account.\n\n1134\n00:57:38,051 --> 00:57:41,597\nAnd I'm going to assign the monitor\nview to this account, right?\n\n1135\n00:57:43,040 --> 00:57:46,110\nWhen I say okay to that,\nit's gonna go and create it.\n\n1136\n00:57:46,110 --> 00:57:49,420\nAnd it's got to set up a password,\nwhich I'll just set to Cisco123.\n\n1137\n00:57:53,450 --> 00:57:55,430\nAll right, and\nhere it's gonna create the view.\n\n1138\n00:57:55,430 --> 00:57:57,290\nNow, notice what it's doing.\n\n1139\n00:57:57,290 --> 00:58:00,590\nIt's saying, parser view CCP monitors.\n\n1140\n00:58:00,590 --> 00:58:03,480\nSo it's creating the view\nwith the name CCP monitor.\n\n1141\n00:58:03,480 --> 00:58:05,620\nIt's setting the password for that view.\n\n1142\n00:58:05,620 --> 00:58:10,620\nAnd then it's listing all the commands\nthat that view is allowed to run.\n\n1143\n00:58:10,620 --> 00:58:13,870\nIf there's a command not in this\nlist that you can't run it.\n\n1144\n00:58:13,870 --> 00:58:18,710\nSo we can pick and choose what commands\nwe want that user to be able to run.\n\n1145\n00:58:18,710 --> 00:58:22,840\nIn this case our help desk would be\nable to use show commands and ping.\n\n1146\n00:58:22,840 --> 00:58:25,118\nThey'd be able to use configure terminal,\nright?\n\n1147\n00:58:25,118 --> 00:58:26,940\nSo they'd be able to get in there.\n\n1148\n00:58:26,940 --> 00:58:31,340\nBut I think if we look in here it\nwill be missing things like copy\n\n1149\n00:58:32,400 --> 00:58:34,870\nfor saving the config and stuff.\n\n1150\n00:58:34,870 --> 00:58:37,050\nYeah, so they don't have like reload.\n\n1151\n00:58:37,050 --> 00:58:38,450\nThey don't have some of the other stuff.\n\n1152\n00:58:38,450 --> 00:58:42,180\nSo it is a very limited set of\ncommands that stops it from actually\n\n1153\n00:58:42,180 --> 00:58:43,255\nchanging the system.\n\n1154\n00:58:43,255 --> 00:58:44,280\n>> Mm-hm.\n>> All right?\n\n1155\n00:58:44,280 --> 00:58:47,662\nSo I'm gonna go ahead and deliver that.\n\n1156\n00:58:47,662 --> 00:58:52,444\nAnd, now, when they connect, if they\nconnect and log in as that help desk\n\n1157\n00:58:52,444 --> 00:58:57,474\naccount, they will get that limited view,\nwhen they connect in via the CCP.\n\n1158\n00:58:57,474 --> 00:58:59,524\nThat it's not as convenient\nfrom the command line, but\n\n1159\n00:58:59,524 --> 00:59:01,804\nthe command line let's me show\nthe commands a little better.\n\n1160\n00:59:01,804 --> 00:59:05,397\nSo, for example, I'm logged in as\na full admin right now, right?\n\n1161\n00:59:05,397 --> 00:59:10,433\nAnd so, actually, if I just do\na question mark, right, I've got one,\n\n1162\n00:59:10,433 --> 00:59:15,154\ntwo, three, four, five,\nfive screens of commands right there.\n\n1163\n00:59:15,154 --> 00:59:16,720\nIt's quite a bit.\n\n1164\n00:59:16,720 --> 00:59:18,976\nAnd if I get into configuration,\nI do a question mark.\n\n1165\n00:59:18,976 --> 00:59:23,690\nI've got let's see, one,\ntwo, three, four, five, six,\n\n1166\n00:59:23,690 --> 00:59:27,100\nseven, eight, nine, ten,\n11, 11 screens of commands.\n\n1167\n00:59:27,100 --> 00:59:30,130\nQuite a few commands there, right?\n\n1168\n00:59:30,130 --> 00:59:33,671\nIf I get out of my enabled mode,\nif I disable,\n\n1169\n00:59:33,671 --> 00:59:39,752\nwith the enable command you can actually\nspecify a view so I'm gonna do that.\n\n1170\n00:59:39,752 --> 00:59:42,900\nI'm gonna say enable view CCP monitor.\n\n1171\n00:59:44,520 --> 00:59:48,170\nAnd so now I'm enabled with that view.\n\n1172\n00:59:48,170 --> 00:59:52,560\nOkay, and so now, when I do my question\nmark, when I was an administrator,\n\n1173\n00:59:52,560 --> 00:59:57,840\nI had five streams, screens of commands,\nnow I've only got one, right?\n\n1174\n00:59:57,840 --> 00:59:58,440\n>> Yep.\n\n1175\n00:59:58,440 --> 01:00:04,220\n>> Now, configure terminal is one of them,\nor configure, whoops, there we go.\n\n1176\n01:00:04,220 --> 01:00:08,600\nAnd here I had 11 screens,\nnow I have one, [LAUGH] right?\n\n1177\n01:00:08,600 --> 01:00:13,200\nSignificantly smaller set of commands\navailable to me in this view.\n\n1178\n01:00:13,200 --> 01:00:17,765\nSo they see it when they\ngo into the CCP also,\n\n1179\n01:00:17,765 --> 01:00:20,675\nbut there's no way to just list\nall the commands in the CCP.\n\n1180\n01:00:20,675 --> 01:00:23,695\nThat's why I did it from the command\nline here so you could see that view and\n\n1181\n01:00:23,695 --> 01:00:25,645\nhow it applies, all right?\n\n1182\n01:00:25,645 --> 01:00:27,755\nSo, pretty cool stuff.\n\n1183\n01:00:27,755 --> 01:00:28,955\nIt's neat.\n\n1184\n01:00:28,955 --> 01:00:34,155\nOne of the little quirks about it though,\nlike if I fire up my SSH window here,\n\n1185\n01:00:34,155 --> 01:00:37,209\nif I open up another connection,\nall right?\n\n1186\n01:00:37,209 --> 01:00:44,092\nAnd I log in as helpdesk, all right?\n\n1187\n01:00:44,092 --> 01:00:46,302\nIf they enable, see what it does?\n\n1188\n01:00:46,302 --> 01:00:47,182\nLike it prompts them for\n\n1189\n01:00:47,182 --> 01:00:51,910\na password and if they know the enable\npassword they can punch it in.\n\n1190\n01:00:51,910 --> 01:00:53,960\nAnd, that's not their view.\n\n1191\n01:00:53,960 --> 01:00:54,550\n>> No.\n\n1192\n01:00:54,550 --> 01:00:55,360\n>> Okay.\n\n1193\n01:00:55,360 --> 01:01:00,980\nBut, if they're a help desk user, you\nshouldn't give them the enabled password.\n\n1194\n01:01:00,980 --> 01:01:04,800\nInstead, you should say, hey, if you\nhave to log in from the command line,\n\n1195\n01:01:04,800 --> 01:01:11,890\nif you have to, then you need to use the\nview, and specify what that view name is.\n\n1196\n01:01:11,890 --> 01:01:14,490\nAnd you give them the view password,\nall right?\n\n1197\n01:01:14,490 --> 01:01:17,910\nAnd that's what will limit them down and\nget that restricted.\n\n1198\n01:01:17,910 --> 01:01:18,702\nIt's neat.\n\n1199\n01:01:18,702 --> 01:01:22,814\nI will tell you that this kind of thing\nis designed for larger organizations, and\n\n1200\n01:01:22,814 --> 01:01:27,108\nlarger organizations almost never use this\ncuz there's a much better option we're\n\n1201\n01:01:27,108 --> 01:01:28,881\ngonna learn about in the AAA show.\n\n1202\n01:01:28,881 --> 01:01:33,160\nBut for right now be aware of this\ncuz it can turn up on the exam.\n\n1203\n01:01:34,680 --> 01:01:36,530\nNow Ronnie, have you ever used\nviews in a production environment?\n\n1204\n01:01:36,530 --> 01:01:37,238\n>> No, I have not.\n\n1205\n01:01:37,238 --> 01:01:39,395\n>> And neither have I.\nIt's neat.\n\n1206\n01:01:39,395 --> 01:01:42,269\nIt's effective, but at the end of the day,\n\n1207\n01:01:42,269 --> 01:01:43,725\nnot the end of today,\n>> [LAUGH]\n\n1208\n01:01:43,725 --> 01:01:45,001\n>> But in another episode,\n\n1209\n01:01:45,001 --> 01:01:47,420\nwe're gonna do AAA, RADIUS and TACACS.\n\n1210\n01:01:47,420 --> 01:01:49,990\nAnd if you're using either one of these,\nthis is obsolete.\n\n1211\n01:01:49,990 --> 01:01:50,900\nThis is not necessary.\n\n1212\n01:01:50,900 --> 01:01:54,120\nSo, it's one of those things\nwhere it's a great idea.\n\n1213\n01:01:54,120 --> 01:01:54,940\nIt's there.\n\n1214\n01:01:54,940 --> 01:01:57,540\nBack in the old days it\nwas a great option, but\n\n1215\n01:01:57,540 --> 01:02:00,838\nin today's world it's not\nnecessarily used that much.\n\n1216\n01:02:00,838 --> 01:02:04,325\nBut it's there for\nbackwards compatibility and\n\n1217\n01:02:04,325 --> 01:02:07,648\nit can be useful sometimes,\n[LAUGH] I suppose.\n\n1218\n01:02:07,648 --> 01:02:11,140\nAll right, so those are views.\n\n1219\n01:02:11,140 --> 01:02:12,400\nThey're kinda neat.\n\n1220\n01:02:12,400 --> 01:02:14,840\nReally they're as powerful\nas you want them to be.\n\n1221\n01:02:14,840 --> 01:02:20,110\nAnd you can see it right here in\nthe Cisco configuration professional.\n\n1222\n01:02:20,110 --> 01:02:24,640\nI've got that help desk account,\nprivilege level one, CCP monitor.\n\n1223\n01:02:24,640 --> 01:02:27,050\nThere's that view to supply to them.\n\n1224\n01:02:27,050 --> 01:02:28,836\nAnd now that you'd at that,\nthere's that deal.\n\n1225\n01:02:28,836 --> 01:02:32,051\nAll right, Ronnie, can you think\nof anything I left out on that?\n\n1226\n01:02:32,051 --> 01:02:33,136\n>> I don't think so.\n\n1227\n01:02:33,136 --> 01:02:35,500\n>> All right, well,\nwhy don't we stop here and take a break.\n\n1228\n01:02:35,500 --> 01:02:37,420\nWe still have some more to get\nthrough on this objective.\n\n1229\n01:02:37,420 --> 01:02:38,620\nLet's see, what else do we have left.\n\n1230\n01:02:38,620 --> 01:02:43,690\nWe've got, oh, I never did mention IPv6.\n\n1231\n01:02:43,690 --> 01:02:46,570\nSo I should definitely bring that up and\n\n1232\n01:02:46,570 --> 01:02:49,980\nthen we've got the Cisco iOS image and\nconfiguration files to tackle.\n\n1233\n01:02:49,980 --> 01:02:51,570\nSo we've got a few other things there.\n\n1234\n01:02:51,570 --> 01:02:53,990\nSo we've still got a few\nmore things to do.\n\n1235\n01:02:53,990 --> 01:02:54,850\nDefinitely stay tuned.\n\n1236\n01:02:54,850 --> 01:02:56,810\n>> Right.\n>> And we'll wrap up after this.\n\n1237\n01:02:56,810 --> 01:03:00,440\n[SOUND] All right,\n\n1238\n01:03:00,440 --> 01:03:06,550\nwelcome back, everybody.\n\n1239\n01:03:06,550 --> 01:03:10,216\nSo we got a couple of last\nlittle tidbits or things or\n\n1240\n01:03:10,216 --> 01:03:12,961\nwhatever to cover on this objective.\n\n1241\n01:03:12,961 --> 01:03:14,523\nBut we're definitely winding it down.\n\n1242\n01:03:14,523 --> 01:03:19,017\nOne of the things that we didn't cover,\nwas back on objective 2.1 C,\n\n1243\n01:03:19,017 --> 01:03:20,870\nIPv6 security, all right?\n\n1244\n01:03:22,110 --> 01:03:26,675\nNow there's a reason we didn't cover it\nwhich you might have noticed as we were\n\n1245\n01:03:26,675 --> 01:03:28,865\nin the configuration professional.\n\n1246\n01:03:28,865 --> 01:03:33,952\nSo like if I'm in an interface here and\nI edit the interface that when\n\n1247\n01:03:33,952 --> 01:03:38,768\nI go to edit it, it is constantly\npestering me about being a LAN,\n\n1248\n01:03:38,768 --> 01:03:42,533\nthat there's not really\nany IPv6 stuff in here.\n\n1249\n01:03:42,533 --> 01:03:47,978\nAnd that's because the full version of\nthe CCP does not have support for IPv6.\n\n1250\n01:03:47,978 --> 01:03:49,831\nThe reason I bring that up,\n\n1251\n01:03:49,831 --> 01:03:55,001\nis that all of the security that we\njust implemented was IPv4's security.\n\n1252\n01:03:55,001 --> 01:03:59,227\nSo our IPv6 stuff is effectively\nrunning non-secured right now.\n\n1253\n01:03:59,227 --> 01:04:03,950\nAnd a lot of people don't realize that and\njust don't even think about it.\n\n1254\n01:04:03,950 --> 01:04:09,230\nIf you don't secure IPv6,\nyou are leaving a hole in your network.\n\n1255\n01:04:09,230 --> 01:04:12,407\nJust because you don't use IPv6,\ndoesn't mean your attackers don't, right?\n\n1256\n01:04:12,407 --> 01:04:15,035\nSo we need to be aware of that.\n\n1257\n01:04:15,035 --> 01:04:19,347\nSo, if I take a look at the command\nline on this router, All right,\n\n1258\n01:04:19,347 --> 01:04:21,586\nwhich timed out during the break.\n\n1259\n01:04:21,586 --> 01:04:23,680\nBut let me get reconnected.\n\n1260\n01:04:23,680 --> 01:04:25,160\nOh, time outs.\n\n1261\n01:04:25,160 --> 01:04:32,200\nAll right, so\nwhen I do a show IP Interface brief right,\n\n1262\n01:04:32,200 --> 01:04:39,130\nor a show IP route that's giving me\nmy IPv4 addresses and my IPv4 routes.\n\n1263\n01:04:39,130 --> 01:04:44,060\nBut if I do a show IPv6 interface brief.\n\n1264\n01:04:44,060 --> 01:04:49,320\nI can see that this router does\nindeed have some IPv6 addresses.\n\n1265\n01:04:49,320 --> 01:04:50,070\nOkay.\n\n1266\n01:04:50,070 --> 01:04:54,460\nAnd if I do a show IPv6 route, I can\n\n1267\n01:04:54,460 --> 01:04:59,440\nsee that I am actually able to route for\nthe IPv6 network.\n\n1268\n01:04:59,440 --> 01:05:02,440\nIt turns out that I've only got one\ninterface with IPv6 but that's it.\n\n1269\n01:05:02,440 --> 01:05:06,100\nSo the thing here,\nthe thing to remember is,\n\n1270\n01:05:06,100 --> 01:05:11,820\nif you're not going to use IPv6, you need\nto manually disable it on the router.\n\n1271\n01:05:11,820 --> 01:05:13,330\nYou really need to do that.\n\n1272\n01:05:13,330 --> 01:05:17,250\nYou need to do two things.\n\n1273\n01:05:17,250 --> 01:05:23,070\nNo IPv6 unicast-routing,\nthat's going to disable IPB six routing.\n\n1274\n01:05:23,070 --> 01:05:26,720\nAnd, then, on any of your interfaces\nthat might have an address,\n\n1275\n01:05:26,720 --> 01:05:30,060\nyou just need to say, no IPv6 address.\n\n1276\n01:05:30,060 --> 01:05:30,700\nRight.\n\n1277\n01:05:30,700 --> 01:05:34,410\nAnd, that's going to,\neffectively, disable IPv6.\n\n1278\n01:05:34,410 --> 01:05:37,000\nIf I do a show, IPv6 route.\n\n1279\n01:05:37,000 --> 01:05:40,840\nI can see the only route I have is for\n\n1280\n01:05:40,840 --> 01:05:46,390\nmultitask traffic and if I do a show\nIPv6 interface brief, I can see\n\n1281\n01:05:47,940 --> 01:05:53,360\nI have no IPv6 addresses so\nnow people can't connect to me via IPv6.\n\n1282\n01:05:55,430 --> 01:05:56,160\nAll right.\n\n1283\n01:05:56,160 --> 01:05:57,645\nBut what if we want IPv6?\n\n1284\n01:05:57,645 --> 01:05:59,768\n>> Mm-hm.\n>> What if I have,\n\n1285\n01:05:59,768 --> 01:06:03,272\nlet me get back in Config here.\n\n1286\n01:06:07,088 --> 01:06:11,802\nLet me just throw an address on here so\nthis'll be like 2003:.\n\n1287\n01:06:21,785 --> 01:06:23,445\nGoes on two different networks.\n\n1288\n01:06:30,235 --> 01:06:33,531\nAnd, just so I don't forget it,\nlet me copy that.\n\n1289\n01:06:33,531 --> 01:06:35,748\nOkay.\n\n1290\n01:06:35,748 --> 01:06:39,070\nSo, I want to run IPv6 on this router.\n\n1291\n01:06:39,070 --> 01:06:43,000\nSo if I do a show IPv6 route\nI've got two networks,\n\n1292\n01:06:43,000 --> 01:06:44,580\nI'm actively routing between them.\n\n1293\n01:06:44,580 --> 01:06:46,510\nBecause, unit cache routing is turned on.\n\n1294\n01:06:46,510 --> 01:06:48,540\nI'm running IPv6, all right?\n\n1295\n01:06:48,540 --> 01:06:52,340\nWell all those settings we did\non the VTY lines, those apply,\n\n1296\n01:06:52,340 --> 01:06:56,630\nso I disabled TelNet, but\nSSH is enabled, so those apply.\n\n1297\n01:06:56,630 --> 01:07:03,471\nBut the access control lists that\nwe route those were for IPv4 only,\n\n1298\n01:07:03,471 --> 01:07:09,770\nso IPv6 has no ACLs, no access control\nlist now, and that's a problem.\n\n1299\n01:07:09,770 --> 01:07:12,590\nAnd when I say the Configuration\nprofessional doesn't support it,\n\n1300\n01:07:12,590 --> 01:07:15,510\nwe haven't done the firewall part yet,\nbut even the firewall part,\n\n1301\n01:07:15,510 --> 01:07:22,160\nif we were dig into there,\nlet me just find my way in here.\n\n1302\n01:07:24,060 --> 01:07:27,710\nOr actually it's going to complain\nabout not being, well no there we go.\n\n1303\n01:07:27,710 --> 01:07:31,460\nSo even in here as we look,\nwhere it says like any address.\n\n1304\n01:07:31,460 --> 01:07:32,540\nIt's kinda misleading.\n\n1305\n01:07:32,540 --> 01:07:37,450\nIt's not any address what so\never, its any IPv4 address.\n\n1306\n01:07:37,450 --> 01:07:42,970\nSo we need to write ACLs and\nrestrictions and so on for IPv6 traffic.\n\n1307\n01:07:42,970 --> 01:07:46,220\nAnd many of you guys have\nnot done that before.\n\n1308\n01:07:46,220 --> 01:07:49,790\nFortunately the syntax is not much\ndifferent from what you're used to.\n\n1309\n01:07:49,790 --> 01:07:55,350\nWith IPv6, we do need to create, and\nyou'll see, it's IPv6 access.list,\n\n1310\n01:07:55,350 --> 01:07:59,700\nwhich is the same way that we\ncreate a named ACL in IPv4.\n\n1311\n01:07:59,700 --> 01:08:05,110\nSo I can come in and\nI can create a VTY access list.\n\n1312\n01:08:05,110 --> 01:08:10,395\nI'm gonna rename this as\nthe IPv6 VTY Access list.\n\n1313\n01:08:10,395 --> 01:08:11,790\nRight.\n\n1314\n01:08:11,790 --> 01:08:15,050\nAnd here, I can permit my networks.\n\n1315\n01:08:15,050 --> 01:08:20,046\nAnd so what I'm gonna do,\nit's an extended ACL, so I'm gonna say,\n\n1316\n01:08:20,046 --> 01:08:24,670\npermit, let's do\n\n1317\n01:08:24,670 --> 01:08:30,592\n2004::/64.\n\n1318\n01:08:32,090 --> 01:08:36,873\nAnd then I want to allow\nthem I'll just say IP any.\n\n1319\n01:08:36,873 --> 01:08:37,767\nThat should be enough to make it.\n\n1320\n01:08:37,767 --> 01:08:38,533\nWhoops.\n\n1321\n01:08:38,533 --> 01:08:39,961\n>> IPv6.\n\n1322\n01:08:39,961 --> 01:08:40,970\n>> Oh, you know what?\n\n1323\n01:08:40,970 --> 01:08:44,840\nI am getting a little out\nof order on this one.\n\n1324\n01:08:44,840 --> 01:08:48,800\nSo I need to do permit and\nthen I need to specify the protocol, so\n\n1325\n01:08:48,800 --> 01:08:50,860\nI'm permitting IPv6, right?\n\n1326\n01:08:50,860 --> 01:08:53,670\nAnd then I can specify the source, and\n\n1327\n01:08:53,670 --> 01:08:58,510\nthe source I'm gonna say is my internal\nnetwork, and then the destination,\n\n1328\n01:08:58,510 --> 01:09:01,730\nthe destination's gonna be this\nrouter anyway, I'll just put any.\n\n1329\n01:09:01,730 --> 01:09:04,270\nAnd then I can do login and\nstuff like that if I want to.\n\n1330\n01:09:04,270 --> 01:09:06,810\nI'll do a log, all right.\n\n1331\n01:09:06,810 --> 01:09:10,880\nAnd then I'll denyIPv6 any any log.\n\n1332\n01:09:10,880 --> 01:09:18,740\nSo now, I'm going to allow anybody on the\n2004::/64, you know that whole network.\n\n1333\n01:09:18,740 --> 01:09:24,020\nAnybody on that network will be\nable to connect in via this ACL,\n\n1334\n01:09:24,020 --> 01:09:28,770\nanybody else will be denied\nboth will be logged,right.\n\n1335\n01:09:28,770 --> 01:09:34,595\nAnd then after that, I can get\ninto my VTY's and I can say IPv6,\n\n1336\n01:09:34,595 --> 01:09:41,695\naccess-class, and then that incredibly\nlong name I chose to assign to it.\n\n1337\n01:09:41,695 --> 01:09:45,740\n>> [LAUGH]\n>> And then I can specify in.\n\n1338\n01:09:45,740 --> 01:09:51,770\nNow I'm filtering my IPv6 traffic, and\nyou'll see plenty of books out there,\n\n1339\n01:09:51,770 --> 01:09:58,760\nthat say interfaces and VTYs can only\nsupport one incoming and one outgoing ACL.\n\n1340\n01:09:58,760 --> 01:10:02,420\nThe part of that sentence they\nleave off is it's one incoming and\n\n1341\n01:10:02,420 --> 01:10:05,890\none outgoing ACL for each protocol.\n\n1342\n01:10:05,890 --> 01:10:09,150\nAnd they leave that out because\nwe used to just run IPv4, right?\n\n1343\n01:10:10,400 --> 01:10:15,680\nSo, now we might run IPv4 and IPv6, so\nyou can actually have one incoming for\n\n1344\n01:10:15,680 --> 01:10:20,060\nIPv4 and one incoming for IPv6, and\nthat's exactly what I've done right here.\n\n1345\n01:10:20,060 --> 01:10:23,570\nSo if I take a look at that in my Config.\n\n1346\n01:10:23,570 --> 01:10:24,760\nIf I look at my VTY's.\n\n1347\n01:10:24,760 --> 01:10:25,390\nOh, shoot.\n\n1348\n01:10:27,540 --> 01:10:28,950\nThere.\n\n1349\n01:10:28,950 --> 01:10:34,020\nWe've got access class 102 in, that's for\n\n1350\n01:10:34,020 --> 01:10:37,490\nIPv4 and now I've got IPv6 access class.\n\n1351\n01:10:37,490 --> 01:10:39,370\nAnd the access list that I specified in.\n\n1352\n01:10:39,370 --> 01:10:42,920\nSo we've got two different ACLs,\none for IPv4 traffic, one for IPv6.\n\n1353\n01:10:43,950 --> 01:10:48,970\nThat's why Cisco calls it out in\nthe objectives, to say, hey, don't forget.\n\n1354\n01:10:48,970 --> 01:10:54,850\nIf you're running IPv6, you might have\na great, gaping hole in your IT security.\n\n1355\n01:10:54,850 --> 01:10:56,700\nYou need to secure that traffic.\n\n1356\n01:10:56,700 --> 01:10:57,200\nYeap.\n\n1357\n01:10:58,310 --> 01:10:59,520\n>> And it's not hard.\n\n1358\n01:10:59,520 --> 01:11:02,710\nNormally you can run through the Wizards\nand once you've got them you can go\n\n1359\n01:11:02,710 --> 01:11:07,435\nback and just kinda cheat and\ncopy whatever it put in place for\n\n1360\n01:11:07,435 --> 01:11:12,395\nIPv4 you can pretty much copy for\nthe other protocols.\n\n1361\n01:11:12,395 --> 01:11:14,935\nSo when you go in and\nyou see some setting, like here,\n\n1362\n01:11:14,935 --> 01:11:17,785\nIP access-group 101 in.\n\n1363\n01:11:17,785 --> 01:11:19,535\nYou can say, what is access group 101.\n\n1364\n01:11:19,535 --> 01:11:20,835\nLet me see what it's got.\n\n1365\n01:11:20,835 --> 01:11:24,210\nAnd let me mirror that\nin IPv6 address list.\n\n1366\n01:11:24,210 --> 01:11:26,450\nAnd our access list and\nattach it here too, so\n\n1367\n01:11:26,450 --> 01:11:30,585\nyou can kind of go about that process.\n\n1368\n01:11:30,585 --> 01:11:32,030\n>> Mm-hm.\nDefinitely something to keep on\n\n1369\n01:11:32,030 --> 01:11:34,890\nyour radar,\nespecially with IPv6 gaining prominence.\n\n1370\n01:11:34,890 --> 01:11:39,540\n>> So, all the security that we've\nimplemented at this point is good for\n\n1371\n01:11:39,540 --> 01:11:41,580\nthe router to get up and operational,\n\n1372\n01:11:41,580 --> 01:11:45,020\nso that we can put it into\nthe production network for us.\n\n1373\n01:11:45,020 --> 01:11:49,510\nMaking sure that an IPv4 we\ncan again have everything up.\n\n1374\n01:11:49,510 --> 01:11:52,740\nBut the problem that we still have here,is\nthat we still have a single point of\n\n1375\n01:11:52,740 --> 01:11:56,550\nfailure in terms of where\nthe configurations are kept and\n\n1376\n01:11:56,550 --> 01:11:58,230\nwhere the iOS is also kept.\n\n1377\n01:11:58,230 --> 01:12:00,960\nNormally that's stored on\nthe device itself, but remember,\n\n1378\n01:12:00,960 --> 01:12:03,580\nthat piece of hardware fails,\nwe've got a problem.\n\n1379\n01:12:03,580 --> 01:12:05,985\nSo there's ways that we\ncan address this as well.\n\n1380\n01:12:05,985 --> 01:12:08,658\n>> Yeah.\nIf you forget your password on a router,\n\n1381\n01:12:08,658 --> 01:12:11,049\nthere is a way to do a password reset,\n\n1382\n01:12:11,049 --> 01:12:15,081\nto bypass the Configuration on\nthe router in order to do that.\n\n1383\n01:12:15,081 --> 01:12:19,842\nWell an attacker who has physical access\nto your equipment can use that same method\n\n1384\n01:12:19,842 --> 01:12:23,510\nto compromise your config file and\nthat's a big deal.\n\n1385\n01:12:23,510 --> 01:12:26,680\nSo what we can do is we can implement\n\n1386\n01:12:26,680 --> 01:12:29,920\na special security mechanism\nthat Cisco routers have.\n\n1387\n01:12:29,920 --> 01:12:32,100\nThat allows us to protect from that.\n\n1388\n01:12:32,100 --> 01:12:36,450\nSo for example if I take our router and\nthis router, it's a 2,800.\n\n1389\n01:12:36,450 --> 01:12:40,618\nSo it's actually what is it is it a 28/21,\n28/21, All right.\n\n1390\n01:12:40,618 --> 01:12:46,810\nAnd we're running the 12.4 iOS 15.1,\nI think, is what's on the exam.\n\n1391\n01:12:46,810 --> 01:12:50,650\nNow these commands are the same between\nthe two, so I'm not too worried about it.\n\n1392\n01:12:50,650 --> 01:12:54,040\nSo it doesn't take a cutting edge\nrouter to be able to run this stuff.\n\n1393\n01:12:54,040 --> 01:12:57,850\nIt's all stuff that's been around,\nbut basically what we wanna do\n\n1394\n01:12:57,850 --> 01:13:02,210\nis we want to secure the config file,\nand the boot files.\n\n1395\n01:13:02,210 --> 01:13:07,940\nIf I go into configure terminal,\nand I do secure question mark.\n\n1396\n01:13:07,940 --> 01:13:12,510\nYou'll see right there where you can\nsecure the file system of the router so\n\n1397\n01:13:12,510 --> 01:13:15,450\nthat if somebody tries to bypass\nyour security they will not\n\n1398\n01:13:15,450 --> 01:13:17,080\nbe able to modify these files.\n\n1399\n01:13:17,080 --> 01:13:20,180\nNow, before I do that let me just do this.\n\n1400\n01:13:20,180 --> 01:13:24,850\nI'm gonna do a DIR and\nthere is the Cisco iOS file right there.\n\n1401\n01:13:24,850 --> 01:13:26,840\nThat's the file that I'm booting off of.\n\n1402\n01:13:26,840 --> 01:13:27,720\nIt's right there in flash.\n\n1403\n01:13:28,890 --> 01:13:35,484\nAnd if I do a DIR of NVRAM,\nI can see my startup config right there.\n\n1404\n01:13:35,484 --> 01:13:36,110\n>> Mm-hm.\n\n1405\n01:13:36,110 --> 01:13:39,030\n>> 12K, sitting in NVRAM.\n\n1406\n01:13:39,030 --> 01:13:45,510\nAgain, there's just files\nright there in memory, but\n\n1407\n01:13:45,510 --> 01:13:48,420\nwith the security commands like secure.\n\n1408\n01:13:48,420 --> 01:13:51,860\nActually, before I do this,\nlet me just save our configuration.\n\n1409\n01:13:53,080 --> 01:13:55,160\nThere we go, before I go locking us down.\n\n1410\n01:13:56,785 --> 01:13:59,780\nI'll secure, the boot config.\n\n1411\n01:13:59,780 --> 01:14:02,180\nAnd I'll secure the boot image.\n\n1412\n01:14:03,420 --> 01:14:04,340\nOkay?\n\n1413\n01:14:04,340 --> 01:14:06,450\nSo now those are secured.\n\n1414\n01:14:06,450 --> 01:14:11,640\nOnce that's done,\nI still see the boot file right there.\n\n1415\n01:14:12,710 --> 01:14:18,820\nAnd if I take a look in NVRAM,\nI still see the startup file right there.\n\n1416\n01:14:18,820 --> 01:14:19,530\nOkay.\n\n1417\n01:14:19,530 --> 01:14:23,320\nBut the files are now secured,\nand you know does it, hang on,\n\n1418\n01:14:23,320 --> 01:14:24,700\nlet's look at it this way.\n\n1419\n01:14:24,700 --> 01:14:29,440\nWhere does it give us the little\ndescription of the command?\n\n1420\n01:14:31,570 --> 01:14:33,190\nHere we go.\n\n1421\n01:14:33,190 --> 01:14:36,810\nWell, it doesn't really give\nmuch of a description there.\n\n1422\n01:14:36,810 --> 01:14:39,940\nBut basically, it's securing those files\nto stop somebody from being able to modify\n\n1423\n01:14:39,940 --> 01:14:44,890\nthem so if somebody wanted to swap out\nthat file with another one, it's secure.\n\n1424\n01:14:44,890 --> 01:14:49,760\nThey can't do that and if they wanted to\noverwrite the configuration, It's secured,\n\n1425\n01:14:49,760 --> 01:14:53,710\nthey can't do it without logging\nin with valid credentials first.\n\n1426\n01:14:53,710 --> 01:14:56,430\nSo if they do the password reset process,\n\n1427\n01:14:56,430 --> 01:14:58,560\nwell they're not gonna be\nable to overwrite that file.\n\n1428\n01:14:58,560 --> 01:15:01,540\nThey're not gonna be able to overwrite\nthat config because they're now\n\n1429\n01:15:01,540 --> 01:15:02,880\nsecured, all right.\n\n1430\n01:15:02,880 --> 01:15:06,460\nAnd it's not happening on this one,\nprobably because I'm already logged in.\n\n1431\n01:15:06,460 --> 01:15:10,680\nYou know, let me switch to like the help\ndesk account and see if it's different.\n\n1432\n01:15:10,680 --> 01:15:15,410\nI've seen on some routers where\nthe files basically disappear.\n\n1433\n01:15:15,410 --> 01:15:17,120\nOnce you flag them as secure,\n\n1434\n01:15:17,120 --> 01:15:19,270\nan unauthorized used isn't\neven able to see them.\n\n1435\n01:15:19,270 --> 01:15:20,630\nNow, I am seeing them.\n\n1436\n01:15:20,630 --> 01:15:22,400\nSo this router must not do it.\n\n1437\n01:15:25,330 --> 01:15:26,300\nLet's see.\n\n1438\n01:15:26,300 --> 01:15:28,790\nI need to enable view CCP_Monitor.\n\n1439\n01:15:28,790 --> 01:15:30,878\nOh.\nIt says I'm already in here.\n\n1440\n01:15:30,878 --> 01:15:37,700\nAll right then.\n\n1441\n01:15:39,040 --> 01:15:40,180\nIt sees it.\n\n1442\n01:15:40,180 --> 01:15:44,040\nWhat do you think?\n\n1443\n01:15:44,040 --> 01:15:46,970\nShould I try and delete it and we'll\njust have to make sure we put it back?\n\n1444\n01:15:46,970 --> 01:15:49,505\nLet's try and delete it,\nwe'll see what happens.\n\n1445\n01:15:49,505 --> 01:15:56,670\n>> [LAUGH]\n>> See I knew it was going\n\n1446\n01:15:56,670 --> 01:16:01,830\nto do that because when I enabled how it\ntold me I was already in the view but\n\n1447\n01:16:01,830 --> 01:16:03,940\nI knew I wasn't,\nI know I wasn't in the view.\n\n1448\n01:16:03,940 --> 01:16:07,560\nAnd so when I enabled I gave it the real\nenable password which let me do that so\n\n1449\n01:16:07,560 --> 01:16:10,400\nnow I've got a router that if we\nreboot it we'll be in real trouble.\n\n1450\n01:16:10,400 --> 01:16:12,070\nSo, yeah.\n\n1451\n01:16:12,070 --> 01:16:15,910\nWhat we'd really have to do is go into\nlike password recovery to see that.\n\n1452\n01:16:15,910 --> 01:16:19,570\nIf you were to boot into password recovery\nthough and try to modify this config,\n\n1453\n01:16:19,570 --> 01:16:20,510\nit won't let you.\n\n1454\n01:16:20,510 --> 01:16:22,350\nIf you're trying to view it,\nit wouldn't let you.\n\n1455\n01:16:22,350 --> 01:16:22,930\nIf you try and\n\n1456\n01:16:22,930 --> 01:16:26,580\nreplace that iOS file it wouldn't let\nyou until you gave it valid credentials.\n\n1457\n01:16:26,580 --> 01:16:28,390\nAnd I just gave it valid\n>> [LAUGH]\n\n1458\n01:16:28,390 --> 01:16:30,720\n>> Credentials is why it let me do that.\n\n1459\n01:16:30,720 --> 01:16:32,690\nSo up here when I tried\nto go into the view,\n\n1460\n01:16:32,690 --> 01:16:35,170\nit told me I was already\ninside of the view.\n\n1461\n01:16:35,170 --> 01:16:40,580\nWell I knew I wasn't because I wasn't even\nenabled so how could I be in the view and\n\n1462\n01:16:40,580 --> 01:16:42,490\nso then when I enabled I gave\nit the real password which is.\n\n1463\n01:16:42,490 --> 01:16:43,290\nJust broke everything.\n\n1464\n01:16:43,290 --> 01:16:45,770\nSo anyhow, it did let me delete it.\n\n1465\n01:16:45,770 --> 01:16:46,700\nSo it is gone.\n\n1466\n01:16:46,700 --> 01:16:50,350\nSo I don't think this router has\nany on delete functionalities.\n\n1467\n01:16:50,350 --> 01:16:53,400\nSo I will have just to\nrecopy the file over there.\n\n1468\n01:16:53,400 --> 01:16:55,440\nWhich is easy enough.\n\n1469\n01:16:55,440 --> 01:16:58,310\nBut those secure commands,\nthose secure those files that\n\n1470\n01:16:58,310 --> 01:17:00,310\nif somebody goes into password recovery,\nthey can't break it.\n\n1471\n01:17:00,310 --> 01:17:03,260\nSo, they're excellent if you\n\n1472\n01:17:03,260 --> 01:17:06,230\ncan't guarantee physical security\nof your equipment, right?\n\n1473\n01:17:06,230 --> 01:17:10,550\nIf these routers or switches are out at\nbranches where you don't know who has\n\n1474\n01:17:10,550 --> 01:17:12,720\naccess to them,\nthey're excellent commands.\n\n1475\n01:17:12,720 --> 01:17:15,248\nBut if it's in your main data center and\nyou have controlled access,\n\n1476\n01:17:15,248 --> 01:17:16,477\nthey're not really necessary.\n\n1477\n01:17:16,477 --> 01:17:17,586\n>> Right\n>> See, most people don't\n\n1478\n01:17:17,586 --> 01:17:18,640\nmake use of them.\n\n1479\n01:17:18,640 --> 01:17:21,470\nBut again, if you're deploying them\nsomewhere where you can't physically\n\n1480\n01:17:21,470 --> 01:17:24,330\nsecure the device it'll stop people\nfrom bypassing your password.\n\n1481\n01:17:25,590 --> 01:17:28,330\nIt'll also make it where if you\nsell the equipment on Ebay you'll\n\n1482\n01:17:28,330 --> 01:17:32,410\nreally piss somebody off, cause they\nwon't be able to bypass it either and\n\n1483\n01:17:32,410 --> 01:17:34,880\neffectively you're locked\nout of the equipment.\n\n1484\n01:17:34,880 --> 01:17:36,460\nSo you have to keep that in mind.\n\n1485\n01:17:36,460 --> 01:17:38,490\nIf you're not going to be using it,\n\n1486\n01:17:38,490 --> 01:17:42,810\nthen when you're done you\njust need to turn it off.\n\n1487\n01:17:42,810 --> 01:17:46,810\nAnd so you\n>> [LAUGH]\n\n1488\n01:17:46,810 --> 01:17:48,800\n>> You must be logged on the console\n\n1489\n01:17:48,800 --> 01:17:49,570\nto apply this command.\n\n1490\n01:17:49,570 --> 01:17:52,360\nWell I'm not on the console so\nI'll have to do that.\n\n1491\n01:17:52,360 --> 01:17:55,820\nSo anyway, you want to turn it off before\nyou sell or dispose of the equipment or\n\n1492\n01:17:55,820 --> 01:17:58,290\nwhatever, or\nother people won't be able to bypass that.\n\n1493\n01:17:58,290 --> 01:17:59,120\nKeep those in mind.\n\n1494\n01:17:59,120 --> 01:18:00,190\nThey're neat commands.\n\n1495\n01:18:00,190 --> 01:18:04,770\nJust to review again,\nthe commands were secure boot-config.\n\n1496\n01:18:04,770 --> 01:18:06,880\nThat's for\nyour startup configuration file.\n\n1497\n01:18:06,880 --> 01:18:09,000\nAnd secure boot-image.\n\n1498\n01:18:09,000 --> 01:18:10,310\nThat's for your iOS file.\n\n1499\n01:18:10,310 --> 01:18:11,359\nWe normally turn them on together.\n\n1500\n01:18:13,290 --> 01:18:17,760\nWhen it's properly implemented,\nin order to save your config.\n\n1501\n01:18:17,760 --> 01:18:23,210\nAnytime you want to save the config, you\nneed to turn off the boot config security,\n\n1502\n01:18:23,210 --> 01:18:25,190\nsave, and then turn it back on again.\n\n1503\n01:18:25,190 --> 01:18:29,280\nSo you need to do\na nosecureboot-config save.\n\n1504\n01:18:29,280 --> 01:18:30,570\nAnd turn it back on again.\n\n1505\n01:18:30,570 --> 01:18:31,950\nThat's inconvenient, but\n\n1506\n01:18:31,950 --> 01:18:35,432\nin a high security environment,\nit's definitely the way to go.\n\n1507\n01:18:35,432 --> 01:18:39,930\nAll right, Ronnie you have\nanything else to add on that?\n\n1508\n01:18:39,930 --> 01:18:40,510\n>> Nope.\n\n1509\n01:18:40,510 --> 01:18:44,950\nFor us, in this figure episode,\nwe saw the basic router setup for\n\n1510\n01:18:44,950 --> 01:18:46,460\nsecurity using the CCP.\n\n1511\n01:18:46,460 --> 01:18:49,110\nAt least in general,\nthat's what we wanna do.\n\n1512\n01:18:49,110 --> 01:18:52,690\nYour goal again at this point is to make\nsure that you do get into the CCP, that\n\n1513\n01:18:52,690 --> 01:18:57,650\nyou do explore the interface and make sure\nto actually implement it when you need to.\n\n1514\n01:18:57,650 --> 01:19:00,410\nAnd so we want to make sure that you\nunderstand that as we go on now.\n\n1515\n01:19:00,410 --> 01:19:02,660\nHave we done everything there\nis about about router security.\n\n1516\n01:19:02,660 --> 01:19:06,460\nNot even close there's a lot more shows\nto come in which we'll actually be\n\n1517\n01:19:06,460 --> 01:19:10,720\nconfiguring some of the other stuff that\nreally does actually help us to lock down\n\n1518\n01:19:10,720 --> 01:19:12,140\nwhat we need to on our router.\n\n1519\n01:19:12,140 --> 01:19:17,005\nBut this is the basic introduction to it\nand so it's a good place for you to start.\n\n1520\n01:19:17,005 --> 01:19:18,145\nYep.\n\n1521\n01:19:18,145 --> 01:19:22,765\n>> All right, well, as always, if you\nguys ever have any questions live during\n\n1522\n01:19:22,765 --> 01:19:27,605\nthe show, you can go to itpro.tv/live,\nthe chatroom is right beneath the video,\n\n1523\n01:19:27,605 --> 01:19:30,527\nyou can post your questions,\nwe monitor and answer in show.\n\n1524\n01:19:30,527 --> 01:19:32,807\nAlso, if you have\nquestions after the show,\n\n1525\n01:19:32,807 --> 01:19:35,617\nevery single page on our website\nhas a Q&A link up at the top.\n\n1526\n01:19:35,617 --> 01:19:37,687\nYou can click on that and\npost your questions.\n\n1527\n01:19:37,687 --> 01:19:40,307\nWe monitor and answer to make sure\nget the information you need.\n\n1528\n01:19:40,307 --> 01:19:42,667\nSo take advantage of that resource.\n\n1529\n01:19:42,667 --> 01:19:46,567\nThat being said, I think that's\nall we've got for this episode.\n\n1530\n01:19:46,567 --> 01:19:49,177\nKeep in mind,\nwe're just scratching the surface on IINS.\n\n1531\n01:19:49,177 --> 01:19:51,927\nWe have a lot more to get through,\nespecially the firewall stuff, so\n\n1532\n01:19:51,927 --> 01:19:53,660\nwe've got some good stuff down the line.\n\n1533\n01:19:53,660 --> 01:19:55,230\nSo stay tuned for that.\n\n1534\n01:19:55,230 --> 01:19:56,820\nWe hope you come back.\n\n1535\n01:19:56,820 --> 01:20:00,130\nAll right, so ladies and gentlemen\nsigning off for ITProTV I'm Don Pezet.\n\n1536\n01:20:00,130 --> 01:20:01,140\n>> And I'm Ronnie Wong.\n\n1537\n01:20:01,140 --> 01:20:02,567\n>> And we'll see you next time\n\n1538\n01:20:02,567 --> 01:20:12,567\n[MUSIC]\n\n1539\n01:20:14,155 --> 01:20:20,180\n[SOUND]\n\n",
          "vimeoId": "84674559"
        },
        {
          "description": "When it comes to securing a router itself, one has to do more than just secure the interfaces, but secure the traffic going to the router, going through the router and leaving the router. Viewers will hear about some advanced router security topics like the different types of traffic going to the router and securing data, management and control planes as well as security concerns when implementing IPv6.",
          "length": "4133",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/iins/003-Advanced-Router-Security.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/iins/003-Advanced-Router-Security-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/iins/003-Advanced-Router-Security-sm.jpg",
          "title": "Advanced Router Security",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:15,382 --> 00:00:22,463\n[SOUND]\n\n3\n00:00:22,463 --> 00:00:32,463\n[MUSIC]\n\n4\n00:00:33,880 --> 00:00:34,438\nAll right.\n\n5\n00:00:34,438 --> 00:00:36,649\nGood morning, good afternoon,\nand good evening, and\n\n6\n00:00:36,649 --> 00:00:38,440\nwelcome back to another\nepisode of ITProTV,\n\n7\n00:00:38,440 --> 00:00:41,590\nI'm your host Don Pezet today with Mr.\nRonnie Wong, how's it going Ronnie?\n\n8\n00:00:41,590 --> 00:00:45,730\n>> It's going very well today my\nparticular Grammy award last night means\n\n9\n00:00:45,730 --> 00:00:49,820\nI'm one step closer to the eGott we\nwere just talking about earlier.\n\n10\n00:00:49,820 --> 00:00:52,950\n>> So you got what,\nbest supporting actress?\n\n11\n00:00:52,950 --> 00:00:55,520\n>> Best rapper, I think.\n\n12\n00:00:55,520 --> 00:00:57,960\n>> There we go.\n\n13\n00:00:57,960 --> 00:01:01,230\nYou could be the Southern Asian rapper.\n\n14\n00:01:01,230 --> 00:01:03,170\nI think it's a genre that\nis really being neglected.\n\n15\n00:01:03,170 --> 00:01:05,673\n>> Yes, I believe so\nthere's so many fans of it.\n\n16\n00:01:05,673 --> 00:01:09,800\n[LAUGH]\n>> [LAUGH] We've got a neat episode today.\n\n17\n00:01:09,800 --> 00:01:13,170\nThis is really a follow up to\nthe episode that we did last week on\n\n18\n00:01:13,170 --> 00:01:14,780\ninitial router securities.\n\n19\n00:01:14,780 --> 00:01:19,560\nSo, we tackled taking the router and\nsecuring that actual device, right?\n\n20\n00:01:19,560 --> 00:01:22,900\nYou know, in ways that hackers can try and\nget into your router and\n\n21\n00:01:22,900 --> 00:01:24,090\nreek all sorts of havoc.\n\n22\n00:01:24,090 --> 00:01:27,630\nSo we looked at things like the one-step\nlockdown wizard, and the security audit,\n\n23\n00:01:27,630 --> 00:01:29,410\nand a few other basic things.\n\n24\n00:01:29,410 --> 00:01:32,580\nToday, we're gonna take that same\ninformation and just go a bit further,\n\n25\n00:01:32,580 --> 00:01:35,390\na little more advanced with some\nof the other options we have for\n\n26\n00:01:35,390 --> 00:01:37,210\nmanaging the routers, themselves.\n\n27\n00:01:37,210 --> 00:01:41,340\nNow, at this point we're still\nnot addressing traffic passing\n\n28\n00:01:41,340 --> 00:01:42,700\nthrough the router.\n\n29\n00:01:42,700 --> 00:01:45,450\nWe're addressing traffic\nto the router itself.\n\n30\n00:01:45,450 --> 00:01:47,725\nWe'll tackle the through\nthe router in a later episode.\n\n31\n00:01:47,725 --> 00:01:52,360\n>> Yeah,but we do want to make sure we\nunderstand in terms of securing a router\n\n32\n00:01:52,360 --> 00:01:56,680\nitself that we have to actually do\nmore than just secure the interfaces.\n\n33\n00:01:56,680 --> 00:01:59,080\nThere's different types of\ntraffic going to the router.\n\n34\n00:01:59,080 --> 00:02:01,190\nThere's different types of\ntraffic going through the router.\n\n35\n00:02:01,190 --> 00:02:03,830\nThere's traffic leaving the router,\nwhatever you want to call it.\n\n36\n00:02:03,830 --> 00:02:06,402\nThat's when we're gonna in\nto get idea of securing,\n\n37\n00:02:06,402 --> 00:02:09,602\nwhat we call the idea of the data plane,\nthe management plane, and\n\n38\n00:02:09,602 --> 00:02:12,990\nthe control plane, and we need to get\ninto that a little bit today too.\n\n39\n00:02:12,990 --> 00:02:14,670\n>> Yeah, let's start right there Ronnie,\n>> Sure\n\n40\n00:02:14,670 --> 00:02:15,750\n>> Let's start with these plains,\n\n41\n00:02:15,750 --> 00:02:19,500\nso for those of you that have your CCNA or\n\n42\n00:02:19,500 --> 00:02:23,820\njust did this CCENT or whatever you might\nnot be familiar with that terminology.\n\n43\n00:02:23,820 --> 00:02:27,170\nThis might be the first time that\nyou really get exposed to it, and\n\n44\n00:02:27,170 --> 00:02:30,710\nthe reason is most people don't\never have to know about it.\n\n45\n00:02:30,710 --> 00:02:32,610\nBut inside of a router,\n\n46\n00:02:32,610 --> 00:02:37,290\nthere is very specialized hardware that is\nfocused to perform certain actions, right.\n\n47\n00:02:37,290 --> 00:02:42,270\nAnd, first and foremost,\nyour router is a router right?\n\n48\n00:02:42,270 --> 00:02:47,760\nSo it's trying to move traffic\nfrom one interface on one subnet\n\n49\n00:02:47,760 --> 00:02:51,680\nto another interface on a different subnet\nand do it as fast as possible right.\n\n50\n00:02:51,680 --> 00:02:55,530\nThat is your basic function of a router,\nall right?\n\n51\n00:02:55,530 --> 00:02:58,770\nSo if you were to crack open a router and\nlook at the motherboard inside it you'd\n\n52\n00:02:58,770 --> 00:03:03,680\nsee all sorts of circuitry running\nacross the motherboard inside of it and\n\n53\n00:03:03,680 --> 00:03:07,800\nthe majority of that circuitry is\ndedicated to what's called the data plane.\n\n54\n00:03:07,800 --> 00:03:12,800\nAnd the data plane has one job,\nmoving data from one end of those wires to\n\n55\n00:03:12,800 --> 00:03:15,020\nthe other end of the wires\nas fast as possible.\n\n56\n00:03:15,020 --> 00:03:16,760\nSo that's data moving through your system.\n\n57\n00:03:18,130 --> 00:03:20,220\nRight?\n>> One of the other planes that we have\n\n58\n00:03:20,220 --> 00:03:22,970\nis the idea of what we call\nthe control plane itself.\n\n59\n00:03:22,970 --> 00:03:25,430\nThe control plane really deals\nwith the idea of routing.\n\n60\n00:03:25,430 --> 00:03:28,510\nNow, what Don was telling us about\nmoving data as quickly as we can\n\n61\n00:03:28,510 --> 00:03:33,010\nfrom one place to the other, this time\nin the control plane this is where\n\n62\n00:03:33,010 --> 00:03:37,970\nit has to depend on the CPU of the actual\nrouter itself to do those functions,\n\n63\n00:03:37,970 --> 00:03:40,810\nsuch as the routing protocols and\nsome of those different things.\n\n64\n00:03:40,810 --> 00:03:44,680\nSo this means on the data\nplane where we can rely on\n\n65\n00:03:44,680 --> 00:03:49,330\nthe hardware itself to do the functioning\nwith the control plane stuff.\n\n66\n00:03:49,330 --> 00:03:53,810\nAnd later on here I'll get, let Don\ndescribe the management plane as well but\n\n67\n00:03:53,810 --> 00:03:55,790\nwe have to deal with the CP.\n\n68\n00:03:55,790 --> 00:04:00,380\nSo we have to protect not only the idea of\ntraffic moving through the router, but to\n\n69\n00:04:00,380 --> 00:04:06,730\nthe router, and also, for us, the idea of\nthe router making decisions I should say.\n\n70\n00:04:06,730 --> 00:04:08,620\nThat is where the control\nplane comes in and so\n\n71\n00:04:08,620 --> 00:04:10,540\nDon will talk about the management plane.\n\n72\n00:04:10,540 --> 00:04:14,185\n>> Yeah, so the management plan is\nkind of that final piece, right?\n\n73\n00:04:14,185 --> 00:04:17,635\nSo, for your normal data that's\nmoving through the router,\n\n74\n00:04:17,635 --> 00:04:20,265\nthe management plan\ndoesn't come into play.\n\n75\n00:04:20,265 --> 00:04:22,885\nYour routing table and\nthe decisions your router makes,\n\n76\n00:04:22,885 --> 00:04:27,565\nthat's in the control plane, and\nthen the data itself is on the data plane.\n\n77\n00:04:27,565 --> 00:04:31,135\nSo, as far as your routine activities,\nit's all happening in those two planes,\n\n78\n00:04:31,135 --> 00:04:34,200\nthose two sets of circuitry\ninside of the mother board.\n\n79\n00:04:34,200 --> 00:04:39,900\nBut when you connect to the router itself,\nwhen you telnet or\n\n80\n00:04:39,900 --> 00:04:44,060\nSSH into the router, when you open\nup that web interface to the router.\n\n81\n00:04:44,060 --> 00:04:45,680\nThat's not traffic passing\nthrough the router,\n\n82\n00:04:45,680 --> 00:04:48,120\nthat's traffic going right\nto the router itself.\n\n83\n00:04:48,120 --> 00:04:51,970\nAnd so there's a separate plane, called\nthe management plane, which again is\n\n84\n00:04:51,970 --> 00:04:56,040\nadditional circuitry and components\nspecifically for management, all right.\n\n85\n00:04:56,040 --> 00:04:59,090\nSo why do we care about this?\n\n86\n00:04:59,090 --> 00:05:01,150\nRight?\nWell, if you're an engineer and\n\n87\n00:05:01,150 --> 00:05:02,630\nyou're concerned about performance.\n\n88\n00:05:02,630 --> 00:05:04,440\nHow you move data as fast as possible.\n\n89\n00:05:04,440 --> 00:05:08,540\nWell, you got things like\nrouting table lookups and so\n\n90\n00:05:08,540 --> 00:05:09,910\non that require some thought.\n\n91\n00:05:09,910 --> 00:05:12,930\nThe routers have to figure out the best\nway to get from point A to point B.\n\n92\n00:05:12,930 --> 00:05:18,150\nThat happens in the managing plane I\nmean that happens in the control plane.\n\n93\n00:05:18,150 --> 00:05:22,780\nHappens in the control plane and then\nthe control plane stores its decisions\n\n94\n00:05:22,780 --> 00:05:26,430\nin the ASIC's, the application\nspecific integrated circuits on\n\n95\n00:05:26,430 --> 00:05:29,750\nthe motherboard that are directly\nattached to the data plane.\n\n96\n00:05:29,750 --> 00:05:36,030\nSo that when we route in hardware our data\ncomes in on the data plane, the decision\n\n97\n00:05:36,030 --> 00:05:40,430\nwas made on the control plane, but\nit's applying on the data plane.\n\n98\n00:05:40,430 --> 00:05:44,060\nSo our data continues to move through,\nstaying on the data plane the whole way,\n\n99\n00:05:44,060 --> 00:05:47,200\nfrom point A to point B, and\nyou move very, very fast.\n\n100\n00:05:47,200 --> 00:05:52,100\nSoftware routers,\nthe data comes in on the data plane.\n\n101\n00:05:52,100 --> 00:05:56,940\nThe data actually has to go to the control\nplane where a decision is made and\n\n102\n00:05:56,940 --> 00:06:00,180\nonce the decision is made then it goes\nback to the data plane and back out again\n\n103\n00:06:00,180 --> 00:06:04,220\nand that takes effort and as a result\nsofter routers are not as efficient.\n\n104\n00:06:04,220 --> 00:06:05,290\nThat's why Cisco routers are so\n\n105\n00:06:05,290 --> 00:06:07,850\nmuch more expensive than the cheapy\none you buy at Best Buy or\n\n106\n00:06:07,850 --> 00:06:12,110\nwhatever because they don't have that\nseparation like a Cisco router does.\n\n107\n00:06:12,110 --> 00:06:14,230\nBut the management plane, that third one,\n\n108\n00:06:14,230 --> 00:06:17,760\nit only comes into play when you're\nconnecting to the router itself.\n\n109\n00:06:19,110 --> 00:06:23,630\nNow, if I want to attack a router, I can\ntry and do a denial of service on it.\n\n110\n00:06:23,630 --> 00:06:27,440\nIt's pretty hard to do on the router,\nas far as sucking up all its bandwidth,\n\n111\n00:06:27,440 --> 00:06:31,260\nbecause routers typically have\na good chunk of bandwidth on them.\n\n112\n00:06:31,260 --> 00:06:35,790\nBut if I just wanna annoy the heck out\nan administrator or something like that,\n\n113\n00:06:35,790 --> 00:06:39,100\nI can take advantage of the fact,\nthat there's these data plains, so\n\n114\n00:06:39,100 --> 00:06:45,130\nI might stage a denial of service\nattack against the VTY ports Right?\n\n115\n00:06:45,130 --> 00:06:48,810\nAnd so I could lock the administrators\nout of the router and so\n\n116\n00:06:48,810 --> 00:06:52,620\none of the common attack methods that's\nout there is someone will break into your\n\n117\n00:06:52,620 --> 00:06:57,190\nrouter and inject some routes that move\nyour traffic to a network they control.\n\n118\n00:06:57,190 --> 00:06:59,550\nAll right?\nSo they can collect the data and\n\n119\n00:06:59,550 --> 00:07:01,630\nthen as soon as they get it set up,\n\n120\n00:07:01,630 --> 00:07:06,410\nthey then launch a denial of service\nattack against the management plane.\n\n121\n00:07:06,410 --> 00:07:07,400\nAnd so when you try and\n\n122\n00:07:07,400 --> 00:07:12,050\nget in to fix it, you can't get in, unless\nyou have console access to the system,\n\n123\n00:07:12,050 --> 00:07:16,610\nyou're basically locked out until you\ncan find some way to stop that attack.\n\n124\n00:07:16,610 --> 00:07:17,990\nIt's a one, two punch.\n\n125\n00:07:17,990 --> 00:07:20,700\nThe first punch to get in and\nmodify your data.\n\n126\n00:07:20,700 --> 00:07:24,260\nThe second punch to keep you out and\nonce that's been done\n\n127\n00:07:24,260 --> 00:07:27,190\nvery difficult to fix unless you have\nphysical access to the equipment.\n\n128\n00:07:27,190 --> 00:07:29,050\n>> Yeah.\nOne of those other types of attacks is\n\n129\n00:07:29,050 --> 00:07:33,610\nalso sending so\nmuch information in to the point where\n\n130\n00:07:33,610 --> 00:07:36,980\nreally legitimate traffic can't use\nthe actual router at that point.\n\n131\n00:07:36,980 --> 00:07:42,760\nSo keeping these three plains as secure as\npossible is part of what we actually need\n\n132\n00:07:42,760 --> 00:07:48,050\nto do, especially when we start putting\nour routers into production, right?\n\n133\n00:07:48,050 --> 00:07:50,724\nWhen we're testing, we probably\ndon't worry about it so much but\n\n134\n00:07:50,724 --> 00:07:52,346\nwhen we're ready to get it put in there,\n\n135\n00:07:52,346 --> 00:07:55,134\nwe've gotta make sure that we do\ntake the look and inspect all three.\n\n136\n00:07:55,134 --> 00:07:59,435\nMake sure that when we're facing the exam,\nwe can tell the difference as well between\n\n137\n00:07:59,435 --> 00:08:02,733\nthe management plane,\nthe control plane And the data plane too.\n\n138\n00:08:02,733 --> 00:08:05,496\n>> Now,\nas far as the data plane is concerned.\n\n139\n00:08:05,496 --> 00:08:07,650\nThat's where we use access control lists.\n\n140\n00:08:07,650 --> 00:08:12,850\nAnd that's where we use ACLs in the\nregular CCNA routing and switching exams.\n\n141\n00:08:12,850 --> 00:08:17,780\nBut on INES, that's were we use\nwhat's called a zone-based firewall.\n\n142\n00:08:17,780 --> 00:08:21,130\nYou have a firewall feature set,\nthat you can get for your routers.\n\n143\n00:08:21,130 --> 00:08:24,750\nAnd it allows you to completely manage\nhow data's allowed to pass from one\n\n144\n00:08:24,750 --> 00:08:25,900\ninterface to another.\n\n145\n00:08:25,900 --> 00:08:30,290\nIt replaces the ACLs with a stateful\nfirewall that's very effective, all right.\n\n146\n00:08:30,290 --> 00:08:33,729\nNow we're gonna cover that\nspecifically in another show or\n\n147\n00:08:33,729 --> 00:08:37,783\nprobably a couple of shows, down\nthe road cuz it is an in depth topic but\n\n148\n00:08:37,783 --> 00:08:42,391\nthat does leave the other two planes to\nprotect, now lets start with management\n\n149\n00:08:42,391 --> 00:08:46,690\nplan we have already talked a little\nbit about securing management plan.\n\n150\n00:08:46,690 --> 00:08:51,513\nEven though we may not have used that\nterminology when we run the security\n\n151\n00:08:51,513 --> 00:08:53,345\naudit and the one.\n\n152\n00:08:56,670 --> 00:08:59,840\nOne of the things that it did,\nwas it put an ACL in there,\n\n153\n00:08:59,840 --> 00:09:03,390\nrestricting who was allowed\nto connect to the router?\n\n154\n00:09:03,390 --> 00:09:06,850\nRight?\nWho was allowed to SSH or Telnet or\n\n155\n00:09:06,850 --> 00:09:09,330\naccess the web interface of the router.\n\n156\n00:09:09,330 --> 00:09:12,260\nAnd you can limit that with an ACL and\nother things.\n\n157\n00:09:12,260 --> 00:09:15,400\nThat is managing, well,\nthe management plane.\n\n158\n00:09:15,400 --> 00:09:16,860\nRight?\nThe management plane\n\n159\n00:09:16,860 --> 00:09:18,830\nis when we connect using\nthese management protocols.\n\n160\n00:09:18,830 --> 00:09:19,370\nSo.\n\n161\n00:09:19,370 --> 00:09:22,848\nSo, we've already done it,\nbut we did through a wizard.\n\n162\n00:09:22,848 --> 00:09:25,370\nSo, we wanna take a look\nat manually doing it and\n\n163\n00:09:25,370 --> 00:09:28,180\nwe wanna look at it through the GUIs\nas well as through the commandment.\n\n164\n00:09:28,180 --> 00:09:30,300\n>> All right.\n\n165\n00:09:30,300 --> 00:09:32,100\n>> All right.\nSo, let's just start real simple.\n\n166\n00:09:32,100 --> 00:09:34,010\nWe'll start with the GUI.\n\n167\n00:09:34,010 --> 00:09:37,600\nAnd then we'll move over to the so\nthat the command line.\n\n168\n00:09:37,600 --> 00:09:40,480\nSo here I am in\nthe Cisco Configuration Professional, and\n\n169\n00:09:40,480 --> 00:09:42,350\nI'm connected to my router.\n\n170\n00:09:42,350 --> 00:09:44,910\nAnd so I can see some basic information.\n\n171\n00:09:44,910 --> 00:09:46,730\nI've got, well my interface is down.\n\n172\n00:09:46,730 --> 00:09:48,230\nWell, all right.\n\n173\n00:09:48,230 --> 00:09:49,920\nSo my internal interface is up.\n\n174\n00:09:49,920 --> 00:09:51,610\nThat's really all that matters.\n\n175\n00:09:51,610 --> 00:09:53,610\nSo I'm connected to this router.\n\n176\n00:09:53,610 --> 00:09:56,418\nI'm in it.\nIt's got a very basic configuration on it,\n\n177\n00:09:56,418 --> 00:10:00,500\nall right?no, I haven't run the one\nstep lock-down or anything.\n\n178\n00:10:00,500 --> 00:10:04,480\nSo it is a very plain,\nnon-secure communication, all right?\n\n179\n00:10:04,480 --> 00:10:08,860\nNow when I set it up, I assign an IP\naddress to that internal interface, and\n\n180\n00:10:08,860 --> 00:10:13,750\nby default your Cisco\nrouter will allow Telnet,\n\n181\n00:10:13,750 --> 00:10:18,230\nSSH, and HTTP connections from any source.\n\n182\n00:10:18,230 --> 00:10:20,070\n>> Yeah.\n>> Anyone in the entire world can try and\n\n183\n00:10:20,070 --> 00:10:20,970\nlog into this device.\n\n184\n00:10:20,970 --> 00:10:22,990\nNow, they have to have a username and\na password.\n\n185\n00:10:22,990 --> 00:10:25,570\nSo, it's not like I'm just giving\nout the keys to the kingdom, but\n\n186\n00:10:25,570 --> 00:10:26,250\nthey could attempt it.\n\n187\n00:10:26,250 --> 00:10:27,725\nThey could attempt a brute force.\n\n188\n00:10:27,725 --> 00:10:28,560\n>> Yeah,\n\n189\n00:10:28,560 --> 00:10:32,760\nwithout securing even just this VTY access\nthat we were just talking about, right.\n\n190\n00:10:32,760 --> 00:10:34,440\nAnybody can use just Telnet and\n\n191\n00:10:34,440 --> 00:10:37,710\nas long as they can find out the IP\naddress they can get right in.\n\n192\n00:10:37,710 --> 00:10:42,040\nSo, the basic types of security we\nmight think is just putting a password\n\n193\n00:10:42,040 --> 00:10:43,930\non that interface itself.\n\n194\n00:10:43,930 --> 00:10:47,070\nAnd that might be enough, but later on\nwe're gonna go through triple A where\n\n195\n00:10:47,070 --> 00:10:50,880\nwe'll talk about using a username and\npassword combination with that too.\n\n196\n00:10:50,880 --> 00:10:55,640\nAnd then limiting it to just SSH maybe\nanother thing that we can also do as well.\n\n197\n00:10:55,640 --> 00:10:58,955\nNow I know A lot of textbooks still\nmention assigning a password to\n\n198\n00:10:58,955 --> 00:11:00,315\nthe interface, but\n\n199\n00:11:00,315 --> 00:11:03,055\nthere really is no scenario anymore\nwhere you'd want to do that.\n\n200\n00:11:03,055 --> 00:11:06,655\nBecause first off you want to use SSH,\nright.\n\n201\n00:11:06,655 --> 00:11:07,835\nTelnet is non-secure.\n\n202\n00:11:07,835 --> 00:11:08,485\nYou don't want to use it.\n\n203\n00:11:08,485 --> 00:11:09,862\nYou want to use SSH.\n\n204\n00:11:09,862 --> 00:11:13,022\nAnd SH doesn't work with just a password.\n\n205\n00:11:13,022 --> 00:11:14,752\nSo there's no real point\nin worrying about that.\n\n206\n00:11:14,752 --> 00:11:17,212\nYou will still see mention of\nit out there on the Internet.\n\n207\n00:11:17,212 --> 00:11:20,142\nBut normally we just move right past it\nand go to the second thing Ronnie said,\n\n208\n00:11:20,142 --> 00:11:21,685\nwhich is using triple A, right?\n\n209\n00:11:22,726 --> 00:11:26,356\nIf you're CCENT certified or\nif you at least watch that show,\n\n210\n00:11:26,356 --> 00:11:29,096\nthen you should already know about setting\nup that user name and password, but\n\n211\n00:11:29,096 --> 00:11:30,988\nlet's review it just to\nbe on the safe side.\n\n212\n00:11:30,988 --> 00:11:35,270\nI'm gonna jump into my configuration\nhere on this router, and\n\n213\n00:11:35,270 --> 00:11:38,690\nin my configuration, like I said,\nthis is a plain router.\n\n214\n00:11:38,690 --> 00:11:42,840\nIt really just has some IP\naddresses set on the interfaces.\n\n215\n00:11:42,840 --> 00:11:44,480\nAnd I did enable SSH on it,\n\n216\n00:11:44,480 --> 00:11:48,470\nwhich is why I'm able to use\nthe Cisco configuration professional.\n\n217\n00:11:48,470 --> 00:11:52,660\nNow [LAUGH] in some of the textbooks\nyou'll see where they show,\n\n218\n00:11:52,660 --> 00:11:55,440\nusing the configuration\nprofessional to set up this stuff.\n\n219\n00:11:55,440 --> 00:11:58,220\nThe problem is you can't\nuse the Cisco configuration\n\n220\n00:11:58,220 --> 00:11:59,740\nprofessional unless it's already set up.\n\n221\n00:11:59,740 --> 00:12:02,240\nSo, let's jump over to\nthe command line and\n\n222\n00:12:02,240 --> 00:12:05,580\nreview some of things that we need\nto do to get the router started.\n\n223\n00:12:06,700 --> 00:12:08,170\nOkay.\n\n224\n00:12:08,170 --> 00:12:11,630\nSo, if I take a look at my running config.\n\n225\n00:12:11,630 --> 00:12:14,235\nSo, I'm just gonna look at what's oh.\n\n226\n00:12:14,235 --> 00:12:15,760\n>> [LAUGH]\n>> When you\n\n227\n00:12:15,760 --> 00:12:18,650\nuse the configuration professional,\nit turns off the paging.\n\n228\n00:12:18,650 --> 00:12:21,710\nLet's see if I can remember\nthe command to fix that.\n\n229\n00:12:21,710 --> 00:12:27,184\nIt is Terminal length.\n\n230\n00:12:27,184 --> 00:12:29,560\nThere we go.\n\n231\n00:12:29,560 --> 00:12:30,150\nAll right.\n\n232\n00:12:30,150 --> 00:12:31,350\nSo, when I did a show run,\n\n233\n00:12:31,350 --> 00:12:34,350\nyou guys kind of saw where I\njust kind of scrolled on by.\n\n234\n00:12:34,350 --> 00:12:37,500\nWell, the Cisco Configuration Professional\nwill do that, from time to time,\n\n235\n00:12:37,500 --> 00:12:40,630\nbecause what it does is it\nlooks at outputs and commands,\n\n236\n00:12:40,630 --> 00:12:42,730\nit wants to just see them all at\nonce without having to get more and\n\n237\n00:12:42,730 --> 00:12:46,770\nmore and more, but as a human,\nwe need that more prompt, right?\n\n238\n00:12:46,770 --> 00:12:51,030\nSo, the terminal command, which you guys\nmight remember from terminal monitor,\n\n239\n00:12:51,030 --> 00:12:54,920\nright, to allow us to see log messages\nwhen we're remoted in, terminal\n\n240\n00:12:55,980 --> 00:13:00,976\nlength defines how many lines are on our\nscreen at once, so I just set it to 24.\n\n241\n00:13:00,976 --> 00:13:06,805\nSo now when I do a show run there we go I\nget my more prompt after 24 lines you may,\n\n242\n00:13:06,805 --> 00:13:11,677\nor may not be at 24 lines am kinda\nguessing that mine is actually it\n\n243\n00:13:11,677 --> 00:13:16,984\nlooks like mine might be a 25 so,\nsome of the things that we need to set,\n\n244\n00:13:16,984 --> 00:13:20,830\nand let's go from the angle\nof I just want to use SSH.\n\n245\n00:13:20,830 --> 00:13:22,510\nI don't want to use Telnet.\n\n246\n00:13:22,510 --> 00:13:26,520\nI want secure communications\nto my management plan.\n\n247\n00:13:26,520 --> 00:13:29,330\n>> So, when we begin here\nwith that configuration,\n\n248\n00:13:29,330 --> 00:13:33,000\none of the key things that we want to make\nsure that we do set up here is a hosting.\n\n249\n00:13:33,000 --> 00:13:35,550\nI know a lot of times you might be going,\nI don't care about what it's named.\n\n250\n00:13:35,550 --> 00:13:40,890\nI don't ever, but in terms of SSH, we need\na host name, and normally we need a domain\n\n251\n00:13:40,890 --> 00:13:46,510\nname, as well in terms of the very\nbasic configuration with the beginning.\n\n252\n00:13:46,510 --> 00:13:49,300\nThe reason why we need that is because\nwe're gonna generate the idea of\n\n253\n00:13:49,300 --> 00:13:54,020\nsecurity keys, that's gonna be keyed off\nof that picker name that makes that,\n\n254\n00:13:54,020 --> 00:13:56,420\nsecurity key unique at that point.\n\n255\n00:13:56,420 --> 00:13:59,700\nNow, I always tell people this,\nmake sure you set a host name.\n\n256\n00:13:59,700 --> 00:14:01,500\nMake sure you set a domain name.\n\n257\n00:14:01,500 --> 00:14:05,060\nAnd then we can generate\nsome security keys as well.\n\n258\n00:14:05,060 --> 00:14:06,660\nOkay.\nTo be able to do that.\n\n259\n00:14:06,660 --> 00:14:09,110\nNow I did miss a step which I normally do.\n\n260\n00:14:09,110 --> 00:14:10,900\nWhich is setting up a username and\npassword,\n\n261\n00:14:10,900 --> 00:14:12,780\nas well if I'm gonna be doing that.\n\n262\n00:14:12,780 --> 00:14:13,930\nSo let's do this.\n\n263\n00:14:13,930 --> 00:14:17,160\nLet me create a little Notes file here.\n\n264\n00:14:19,140 --> 00:14:21,330\nSo if I want to enable SSH.\n\n265\n00:14:23,100 --> 00:14:26,350\nSo let's go over the steps to enable SSH.\n\n266\n00:14:28,120 --> 00:14:29,930\nThere's three things, like Ronnie said.\n\n267\n00:14:29,930 --> 00:14:32,560\nOne, set a domain name, well,\n\n268\n00:14:32,560 --> 00:14:35,700\nI guess really we set the host name first,\na doesn't truly matter.\n\n269\n00:14:35,700 --> 00:14:36,530\n>> Yeah.\n>> But we'll say so\n\n270\n00:14:36,530 --> 00:14:40,850\nset up host name, and\ntwo set a domain name.\n\n271\n00:14:41,950 --> 00:14:49,670\nAnd then three,\ncreate a user name and password.\n\n272\n00:14:49,670 --> 00:14:52,410\nAt this stage doesn't work\nwith just a password so\n\n273\n00:14:52,410 --> 00:14:54,620\nwe've got to have a username and password.\n\n274\n00:14:54,620 --> 00:14:57,550\nAs far as setting a host name,\nwell that's pretty easy.\n\n275\n00:14:57,550 --> 00:15:02,292\nWe can use the so if we're at the-\n>> Router config.\n\n276\n00:15:02,292 --> 00:15:06,075\n>> Router config, prompt,\nwe would just say, oops,\n\n277\n00:15:06,075 --> 00:15:09,490\nhost-name, and\nthen what we wanna call it, right?\n\n278\n00:15:09,490 --> 00:15:11,391\nSo like I call our router.\n\n279\n00:15:13,341 --> 00:15:14,159\nThat.\n\n280\n00:15:14,159 --> 00:15:15,360\nAll right?\n\n281\n00:15:15,360 --> 00:15:17,070\nDomain name, very similar.\n\n282\n00:15:17,070 --> 00:15:20,598\nAt the global config prompt we just say.\n\n283\n00:15:20,598 --> 00:15:23,099\nIP domain-name.\n\n284\n00:15:23,099 --> 00:15:29,980\nAnd then like we use, itpro.tv, but you\nuse whatever domain it is that you have.\n\n285\n00:15:29,980 --> 00:15:31,840\nOr you can make one up,\nif you don't have one,\n\n286\n00:15:31,840 --> 00:15:33,920\nyou just put whatever you want in there.\n\n287\n00:15:33,920 --> 00:15:36,460\nIt's just that this is gonna be the domain\nthat you attach the certificate\n\n288\n00:15:36,460 --> 00:15:37,470\nthat we generate.\n\n289\n00:15:37,470 --> 00:15:40,040\nAnd so if people aren't\nusing that same domain name,\n\n290\n00:15:40,040 --> 00:15:42,930\nthey're gonna get a warning about\nthe certificate, the name not matching.\n\n291\n00:15:42,930 --> 00:15:44,100\n>> Right.\n>> You can disregard it and\n\n292\n00:15:44,100 --> 00:15:46,000\nyou still get a secure communication, but\n\n293\n00:15:46,000 --> 00:15:48,020\nif you wanna do it right\nyou gotta do the right one.\n\n294\n00:15:50,200 --> 00:15:52,281\nNow username and\npassword is a little bit harder, right?\n\n295\n00:15:52,281 --> 00:15:55,601\nBecause the router isn't expecting\na username and password by default.\n\n296\n00:15:55,601 --> 00:15:57,853\nIt's just expecting a password.\n\n297\n00:15:57,853 --> 00:16:01,579\nSo we need to tell it that\nwe're gonna use A username and\n\n298\n00:16:01,579 --> 00:16:05,307\npassword combo with the triple\nA new-model command.\n\n299\n00:16:05,307 --> 00:16:08,585\nAnd then we create a user\naccount by saying, username and\n\n300\n00:16:08,585 --> 00:16:10,440\nwhatever we want the name to be.\n\n301\n00:16:10,440 --> 00:16:11,670\nI'll create one called admin.\n\n302\n00:16:12,940 --> 00:16:15,154\nAnd we'll set privilege 15.\n\n303\n00:16:16,250 --> 00:16:19,330\nSecret and\nthen whatever we want the password to be.\n\n304\n00:16:19,330 --> 00:16:23,650\n>> Don, let's go over to that and\nmake sure our viewers understand that.\n\n305\n00:16:23,650 --> 00:16:24,650\nWe're on the user name again.\n\n306\n00:16:24,650 --> 00:16:25,970\nJust whatever name you want to.\n\n307\n00:16:25,970 --> 00:16:30,299\nThe privilege level is what set's\nit up to give us the enabled\n\n308\n00:16:30,299 --> 00:16:33,890\nglobal configuration\n>> Privileged executive\n\n309\n00:16:33,890 --> 00:16:36,290\n>> Privileged executive modes as well.\n\n310\n00:16:36,290 --> 00:16:39,900\nCuz you can set up just user name and\npassword and go in, but when you do that,\n\n311\n00:16:39,900 --> 00:16:43,770\nand you try and log in with SSH,\nit's gonna dump you out at the user mode.\n\n312\n00:16:43,770 --> 00:16:45,780\nAnd for us, we just want to go right in.\n\n313\n00:16:47,010 --> 00:16:50,530\n>> All right, so\nthose are the steps to get SSH working.\n\n314\n00:16:50,530 --> 00:16:54,230\nIf I run those commands right there,\nnow we're running SSH.\n\n315\n00:16:55,390 --> 00:17:03,560\nBut, we might want to Prohibit Telnet,\nright?\n\n316\n00:17:03,560 --> 00:17:06,930\nOr I could do it the other way,\nand say just SSH, right?\n\n317\n00:17:06,930 --> 00:17:08,430\nSo we probably don't want to allow Telnet.\n\n318\n00:17:08,430 --> 00:17:10,580\nWell if I do this config right here,\n\n319\n00:17:10,580 --> 00:17:14,340\nmy router will still\naccept Telnet connections.\n\n320\n00:17:14,340 --> 00:17:18,755\nSo this is kind of like an optional\nstep here at the end of it all.\n\n321\n00:17:18,755 --> 00:17:21,810\nWhere I might want to go in and\ndisable that Telnet functionality.\n\n322\n00:17:21,810 --> 00:17:26,798\nSo we just basically set\nthe VTY to SSH only and\n\n323\n00:17:26,798 --> 00:17:31,653\nwe do that, well, from the global config,\n\n324\n00:17:31,653 --> 00:17:37,163\nwe would have to say line\nVTY 0 4 on a switch with,\n\n325\n00:17:37,163 --> 00:17:41,251\nsay, 015, but on a router, 0 4\n\n326\n00:17:45,685 --> 00:17:51,470\nAnd then here,\nwe would just say transport input ssh.\n\n327\n00:17:51,470 --> 00:17:52,090\nAll right.\n\n328\n00:17:52,090 --> 00:17:53,660\nAnd that's gonna disable Telnet.\n\n329\n00:17:53,660 --> 00:17:57,328\nBlock those connections outright,\nand just allow SSH connections.\n\n330\n00:17:57,328 --> 00:17:59,718\nAnd so now, we are fairly secure.\n\n331\n00:17:59,718 --> 00:18:00,554\n>> Yeah.\n\n332\n00:18:00,554 --> 00:18:03,968\nDo I not need to generate a security key?\n\n333\n00:18:03,968 --> 00:18:04,837\n>> Ooh, good point, Ronnie.\n\n334\n00:18:04,837 --> 00:18:08,831\n>> Yeah. [LAUGH] >> So, I was kind of\nleaving a step out, because I cheat,\n\n335\n00:18:08,831 --> 00:18:09,860\nthe way I do it.\n\n336\n00:18:09,860 --> 00:18:14,690\n[CROSSTALK] It's a little bit different,\nbut you are right, so\n\n337\n00:18:14,690 --> 00:18:20,079\nwe do need to add that fourth step,\nwhich is create an encryption key.\n\n338\n00:18:20,079 --> 00:18:26,630\nPretty important and you do that\nwith the crypto key gen rsa command.\n\n339\n00:18:26,630 --> 00:18:29,120\nThat's going to generate that rsa key and\n\n340\n00:18:29,120 --> 00:18:32,500\nit's gonna ask you how\nmany bits afterwards.\n\n341\n00:18:32,500 --> 00:18:40,210\nSo when it prompts, you need to say\nthat it needs to be at least 1024 bit.\n\n342\n00:18:40,210 --> 00:18:42,390\nIf you pick anything lower, right?\n\n343\n00:18:42,390 --> 00:18:46,824\nWell, I guess there's variations,\nso if you pick between 768 and\n\n344\n00:18:46,824 --> 00:18:50,370\n1023, then you'll only\nsupport SSH version one.\n\n345\n00:18:50,370 --> 00:18:54,062\nIf you pick lower than 768,\nI think the default is 512, isn't it?\n\n346\n00:18:54,062 --> 00:18:55,224\n>> Yeah, that's what it says.\n\n347\n00:18:55,224 --> 00:18:57,244\n>> And that's not suitable for\nSSH at all, right?\n\n348\n00:18:57,244 --> 00:19:00,952\nSo, 768 to 1023 is SSH1, 1024 and\n\n349\n00:19:00,952 --> 00:19:04,951\nhigher is SSH2 and\nthat's normally what we want.\n\n350\n00:19:04,951 --> 00:19:07,650\n>> Yeah, we were talking about\nthis right before the show began.\n\n351\n00:19:07,650 --> 00:19:10,470\nWhere what we normally see after we\nenter in this command to do that,\n\n352\n00:19:10,470 --> 00:19:16,810\nwe see this where it tells us that\nSSH version 1.99 has been enabled.\n\n353\n00:19:16,810 --> 00:19:18,980\nWhat that means, as we were talking about,\n\n354\n00:19:18,980 --> 00:19:23,400\nis that will support both SSH version one,\nand two.\n\n355\n00:19:23,400 --> 00:19:28,077\nWe want to hard code it to just do\nversion two, we end up putting in IP SSH,\n\n356\n00:19:28,077 --> 00:19:32,790\nversion two, I think, is what we\nnormally actually would put in there.\n\n357\n00:19:32,790 --> 00:19:40,100\n>> Yeah, so if we wanted to, if we just\nwanted to require SSH version two, right?\n\n358\n00:19:40,100 --> 00:19:43,100\nAnd so I'll flag this as optional, also.\n\n359\n00:19:43,100 --> 00:19:46,270\nSo, if we wanted to do that,\nthe command is really straightforward.\n\n360\n00:19:48,400 --> 00:19:51,600\nForce version two.\n\n361\n00:19:51,600 --> 00:19:54,270\nAnd we do that with the,\nagain, global prompt.\n\n362\n00:19:55,390 --> 00:19:58,820\nAnd it was ip ssh version 2.\n\n363\n00:19:58,820 --> 00:20:02,040\nThat command right there, that will force\nit so now we won't accept version one.\n\n364\n00:20:02,040 --> 00:20:06,290\nAnd that means that somebody connecting\nis gonna have to connect with at least\n\n365\n00:20:06,290 --> 00:20:10,980\na 1,024 bit key to be able to function and\noff you go.\n\n366\n00:20:10,980 --> 00:20:13,340\nSo those are the basic\nsteps that we need to take.\n\n367\n00:20:13,340 --> 00:20:16,420\nNow, I didn't remember this command.\n\n368\n00:20:16,420 --> 00:20:20,970\nAnd the reason I didn't remember it is cuz\nI normally cheat and do it another way.\n\n369\n00:20:20,970 --> 00:20:23,900\nIf you're going to use the Cisco\nconfiguration professional, right?\n\n370\n00:20:23,900 --> 00:20:26,370\nWhich, for the exam, we have to.\n\n371\n00:20:26,370 --> 00:20:28,080\nIn real life, you may not.\n\n372\n00:20:28,080 --> 00:20:29,600\nI don't normally use it.\n\n373\n00:20:29,600 --> 00:20:32,874\nI normally use the command line,\nwell, if you're gonna use Cisco\n\n374\n00:20:32,874 --> 00:20:36,630\nconfiguration professional,\nyou've got to have the web server enabled.\n\n375\n00:20:36,630 --> 00:20:39,950\nSo I'm gonna add another\nlittle section here so\n\n376\n00:20:39,950 --> 00:20:45,432\nAdditional Steps to Enable the CCP,\nthe Cisco configuration professional.\n\n377\n00:20:45,432 --> 00:20:48,659\nI'll flag this as optional\nif you're gonna use it.\n\n378\n00:20:48,659 --> 00:20:53,910\nSo, the only other thing that we need\nto do is to enable, the web server.\n\n379\n00:20:56,680 --> 00:21:01,000\nAnd enable the secure web server.\n\n380\n00:21:01,000 --> 00:21:03,430\nWhich actually, I guess, we can kind\nof lump all that together, right?\n\n381\n00:21:03,430 --> 00:21:10,970\nSo, the first thing that we need to\ndo is we need to say ip http server.\n\n382\n00:21:12,280 --> 00:21:14,840\nAnd then we follow that up.\n\n383\n00:21:14,840 --> 00:21:16,883\nLet me do a little copy and\npaste to save myself some time.\n\n384\n00:21:20,342 --> 00:21:27,913\nWith ip http secure-server, which is\ngoing to ensure that we can support SSL.\n\n385\n00:21:27,913 --> 00:21:30,091\nAnd then the last thing is,\n\n386\n00:21:30,091 --> 00:21:35,227\nwe can set it to use our local\nuser database for authentication.\n\n387\n00:21:35,227 --> 00:21:38,881\nIf we had like RADIUS or TACACS or\nwhatever we could say ip http\n\n388\n00:21:38,881 --> 00:21:43,370\nauthentication triple A and then go and\nspecify all those settings.\n\n389\n00:21:43,370 --> 00:21:46,020\nBut by saying local,\nit'll use the local user database.\n\n390\n00:21:46,020 --> 00:21:48,090\nThese three commands right here,\nwe need to punch them in,\n\n391\n00:21:48,090 --> 00:21:50,640\nand then we'll be able to use the SDM.\n\n392\n00:21:50,640 --> 00:21:55,610\nNow, you may not want to allow\nnon-secure HTTP connections,\n\n393\n00:21:55,610 --> 00:21:58,220\nand so we'll see how we can\nsecure that a little bit later.\n\n394\n00:21:58,220 --> 00:22:01,480\nBut these are basic commands\nto get that in place, and\n\n395\n00:22:01,480 --> 00:22:03,000\nget us where the CCP can work.\n\n396\n00:22:04,530 --> 00:22:06,730\n>> Now,\nwhat Don was talking about cheating here.\n\n397\n00:22:06,730 --> 00:22:13,380\nWhen you do end up typing out the ip http\nsecure-server, you'll see that, right?\n\n398\n00:22:13,380 --> 00:22:16,810\nIf you type that command in it tells you\nit's gonna generate these cryptography\n\n399\n00:22:16,810 --> 00:22:18,020\nkeys for you.\n\n400\n00:22:18,020 --> 00:22:21,090\nSo, if you are gonna run the CCP,\nyou're don't have to worry about that last\n\n401\n00:22:21,090 --> 00:22:25,010\nstep up above, where we stop and\nlook look at the fourth step there.\n\n402\n00:22:25,010 --> 00:22:28,005\nAll you have to do is do the things\nthat we already did, and\n\n403\n00:22:28,005 --> 00:22:30,375\nthen you enable this and\nit will generate those keys for us.\n\n404\n00:22:30,375 --> 00:22:32,303\n>> And in fact,\nyou don't even have to set a domain name.\n\n405\n00:22:32,303 --> 00:22:36,144\nIf you don't do those,\nif you just run ip http secure-server,\n\n406\n00:22:36,144 --> 00:22:38,503\nit will generate a 1,024 bit key.\n\n407\n00:22:38,503 --> 00:22:39,070\n>> Yeah, ready to go.\n\n408\n00:22:39,070 --> 00:22:41,158\n>> Perfectly suitable for HTTPS, yeah.\n\n409\n00:22:41,158 --> 00:22:45,647\nSo, that's kind of the basic steps of\ngetting that initial security in place,\n\n410\n00:22:45,647 --> 00:22:48,595\nand I've already done that\non this router cuz well,\n\n411\n00:22:48,595 --> 00:22:51,214\nmostly cuz we talked about\nit in the last show.\n\n412\n00:22:51,214 --> 00:22:53,234\nBut also because we needed the CCPs.\n\n413\n00:22:53,234 --> 00:22:55,170\n>> [LAUGH]\n>> So you've gotta do those basic steps.\n\n414\n00:22:55,170 --> 00:22:57,930\nNow, is that securing the router?\n\n415\n00:22:57,930 --> 00:22:59,280\nYes and no, all right?\n\n416\n00:22:59,280 --> 00:23:02,690\nYes, in that I disabled Telnet so\nwe're more secure there.\n\n417\n00:23:02,690 --> 00:23:07,700\nNo, in that, although I require SSH,\nanyone in the world could fire\n\n418\n00:23:07,700 --> 00:23:11,910\nup an SSH client and connect, and then try\nand brute force a user name and password.\n\n419\n00:23:11,910 --> 00:23:12,770\nAnd it'll be secure,\n\n420\n00:23:12,770 --> 00:23:16,490\nthey'll be doing a secure brute force,\nbut there's nothing to stop them, right?\n\n421\n00:23:16,490 --> 00:23:19,040\nSo they can get in and\nstart doing all sorts of attempts.\n\n422\n00:23:19,040 --> 00:23:22,142\nAnd so we need to take a look at some\nof the advanced things that we can do\n\n423\n00:23:22,142 --> 00:23:22,901\nto secure that.\n\n424\n00:23:22,901 --> 00:23:26,361\n>> Yeah and this is where we talked about\na little bit earlier when Don mentioned\n\n425\n00:23:26,361 --> 00:23:27,941\nthe idea of using ACL's, right?\n\n426\n00:23:27,941 --> 00:23:32,692\nTo limit who can now use\nTelnet to be able to get in.\n\n427\n00:23:32,692 --> 00:23:35,880\n>> All right let me turn\non my little Zoomin tool.\n\n428\n00:23:35,880 --> 00:23:39,570\nAll right, so, when we go to\ndo a configuration in the CCP,\n\n429\n00:23:39,570 --> 00:23:42,830\nyou'll see over here in my\nnavigation tree where under Router,\n\n430\n00:23:42,830 --> 00:23:43,930\nthere's a bunch of different things.\n\n431\n00:23:43,930 --> 00:23:45,720\nRouter Options, Time and so on.\n\n432\n00:23:45,720 --> 00:23:48,391\nBut there's that folder, Router Access.\n\n433\n00:23:48,391 --> 00:23:51,808\nOkay, and what they're talking about\nis not data passing through the router,\n\n434\n00:23:51,808 --> 00:23:54,817\nthey're talking about access to\nthe router itself, in other words,\n\n435\n00:23:54,817 --> 00:23:55,844\nthe management plane.\n\n436\n00:23:55,844 --> 00:23:56,448\nOkay.\n\n437\n00:23:56,448 --> 00:23:59,629\nSo this is where we go to\nconfigure that management plane.\n\n438\n00:23:59,629 --> 00:24:02,731\nDoesn't have anything to do with\nthe data plane or the control plane,\n\n439\n00:24:02,731 --> 00:24:05,360\nit's just right there on\nthat management plane.\n\n440\n00:24:05,360 --> 00:24:10,220\nAnd if I expand that out, that's\nwhere we'll see my user accounts, and\n\n441\n00:24:10,220 --> 00:24:12,800\nI've got that one user account I\ncreated from the command line but\n\n442\n00:24:12,800 --> 00:24:14,990\nI could add in more if I wanted.\n\n443\n00:24:14,990 --> 00:24:18,390\nWe've got the VTY lines right here.\n\n444\n00:24:18,390 --> 00:24:20,160\nAnd let's look at these options.\n\n445\n00:24:20,160 --> 00:24:23,470\nSo it's got in there the line range and\nso on.\n\n446\n00:24:23,470 --> 00:24:26,380\nIt's got the timeout,\nhow long we'll allow somebody to stay\n\n447\n00:24:26,380 --> 00:24:29,100\nconnected before we hang up on them for\ntaking too long.\n\n448\n00:24:29,100 --> 00:24:33,550\nWe've also got some other really valuable\nthings that we can set here, all right?\n\n449\n00:24:33,550 --> 00:24:36,570\nRight off at the beginning we've got\nthe input protocols allowed, and\n\n450\n00:24:36,570 --> 00:24:39,550\nI'm kinda surprised that it says none,\nbecause I know I set that.\n\n451\n00:24:39,550 --> 00:24:41,580\n>> It might not have refreshed yet\nor something.\n\n452\n00:24:41,580 --> 00:24:42,690\n>> Or I might be a liar.\n\n453\n00:24:42,690 --> 00:24:44,360\nMaybe I didn't set it.\n\n454\n00:24:44,360 --> 00:24:44,975\nLet's find out.\n\n455\n00:24:44,975 --> 00:24:48,510\n>> [LAUGH]\n>> Let's take a look at my config.\n\n456\n00:24:48,510 --> 00:24:49,730\nI didn't set it up.\n\n457\n00:24:49,730 --> 00:24:50,250\n>> You didn't set it up.\n\n458\n00:24:50,250 --> 00:24:51,202\n>> I'm a big, fat liar.\n\n459\n00:24:51,202 --> 00:24:53,171\n[LAUGH]\n>> I think you just typed it up.\n\n460\n00:24:53,171 --> 00:24:53,870\n>> So,-\n>> [LAUGH]\n\n461\n00:24:53,870 --> 00:24:55,530\n>> So, here on my VTY,\n\n462\n00:24:55,530 --> 00:24:58,050\nsee I haven't done\na transport input command.\n\n463\n00:24:58,050 --> 00:25:01,370\nI'm not limiting what can connect,\nso that shows here.\n\n464\n00:25:01,370 --> 00:25:06,170\nIf I look at my input protocols allowed,\nI've got none and if I edit that, and\n\n465\n00:25:06,170 --> 00:25:10,790\nI go into my settings, right here nice and\neasy, I've got little check boxes.\n\n466\n00:25:10,790 --> 00:25:15,640\nAnd I can check, do I want to allow Telnet\nor SSH or everything into, if I want to\n\n467\n00:25:15,640 --> 00:25:20,130\nrestrict it to just SSH, I can check it\noff and that's gonna make it really easy.\n\n468\n00:25:20,130 --> 00:25:24,700\nI don't have to remember transport input\nSSH here, its just a check ups, all right?\n\n469\n00:25:24,700 --> 00:25:27,990\n>> I'm done, I never use\nthe output protocols is there any\n\n470\n00:25:27,990 --> 00:25:30,000\nparticular purpose I would\never need to use that?\n\n471\n00:25:30,000 --> 00:25:31,920\n>> Well, you know,\nmost people never worry about it but\n\n472\n00:25:31,920 --> 00:25:35,840\nif you're logged in to a router,\nyou can then turn around and\n\n473\n00:25:35,840 --> 00:25:38,790\nTelnet or\nSSH out to other destinations, right?\n\n474\n00:25:38,790 --> 00:25:41,050\nSo, you're basically like leap\nfrogging through the router.\n\n475\n00:25:41,050 --> 00:25:44,370\nAnd you may not want to allow that if\nyou've got help desk people or whatever.\n\n476\n00:25:44,370 --> 00:25:48,720\nThey might be able to leap frog\nthrough a router to bypass an ACL.\n\n477\n00:25:48,720 --> 00:25:50,910\nEffectively changing their IP address.\n\n478\n00:25:50,910 --> 00:25:54,680\nSo we might want to turn those off or\nwhatever.\n\n479\n00:25:54,680 --> 00:25:55,730\nNormally we don't worry about it.\n\n480\n00:25:55,730 --> 00:25:56,350\n>> Okay.\nYeah.\n\n481\n00:25:56,350 --> 00:25:58,890\n>> If you're worried about that, those\npeople shouldn't be allowed to have access\n\n482\n00:25:58,890 --> 00:26:00,560\nto the router, in the first place so.\n\n483\n00:26:00,560 --> 00:26:02,860\n>> Okay.\n>> All right the other thing though is,\n\n484\n00:26:02,860 --> 00:26:06,435\nwe can define an ACL now, and\nthis is really important.\n\n485\n00:26:06,435 --> 00:26:10,435\nThe access control list will limit\nwho's allowed to even connect.\n\n486\n00:26:10,435 --> 00:26:11,555\n>> Right.\n>> All right?\n\n487\n00:26:11,555 --> 00:26:15,655\nAt a minimum, at an absolute minimum,\nyou should put an ACL\n\n488\n00:26:15,655 --> 00:26:20,340\nin restricting access to your router's\nmanagement plan to just internal IPs.\n\n489\n00:26:20,340 --> 00:26:25,500\nAll right, even better though\nis restricting it just to the IP\n\n490\n00:26:25,500 --> 00:26:28,980\naddresses of your network administrators,\nand so you can create an access control\n\n491\n00:26:28,980 --> 00:26:33,080\nlist that specifically lists who\nis allowed to manage your system.\n\n492\n00:26:33,080 --> 00:26:36,400\nAt a minimum though,\nat least restrict it to your internal IPs.\n\n493\n00:26:36,400 --> 00:26:39,180\nThat way somebody on the Internet,\nthey can't even connect.\n\n494\n00:26:39,180 --> 00:26:42,000\nThey can't even connect, better yet,\nthrow a username and password to try and\n\n495\n00:26:42,000 --> 00:26:43,970\nbrute force it.\n\n496\n00:26:43,970 --> 00:26:48,470\nAll right, and here in the GUI it's\nactually pretty easy to create these ACLs.\n\n497\n00:26:48,470 --> 00:26:49,880\nSo I can create an inbound ACL.\n\n498\n00:26:49,880 --> 00:26:52,510\nSo I'll just come in here and\nchoose to create a new one.\n\n499\n00:26:54,110 --> 00:26:56,480\nAnd it wants a name or a number.\n\n500\n00:26:56,480 --> 00:27:00,314\nAnd so\nI'm gonna call this one mgmt-access.\n\n501\n00:27:01,420 --> 00:27:03,060\nAnd I'll create a rule entry.\n\n502\n00:27:03,060 --> 00:27:09,770\nAnd I'm gonna say that I\nwant to permit a network.\n\n503\n00:27:09,770 --> 00:27:13,390\nAnd I'll specify my internal network.\n\n504\n00:27:13,390 --> 00:27:15,260\nWhich is just a class c.\n\n505\n00:27:15,260 --> 00:27:18,099\nSo, I'll make sure to use\nmy class c wildcard mask.\n\n506\n00:27:19,360 --> 00:27:20,280\nAll right.\n\n507\n00:27:20,280 --> 00:27:25,267\nSo I'm saying, only allow sources\nthat start with 10, 1, 2, 30,\n\n508\n00:27:25,267 --> 00:27:26,700\nto any destination.\n\n509\n00:27:26,700 --> 00:27:29,770\nBut in this case the destination\nis the VTY lines, and\n\n510\n00:27:29,770 --> 00:27:31,850\nthen I can specify\nthe protocols down here.\n\n511\n00:27:31,850 --> 00:27:36,410\nSo I could actually restrict it to\njust Telnet or just SSH, or whatever.\n\n512\n00:27:36,410 --> 00:27:37,480\nI don't really need to do that,\n\n513\n00:27:37,480 --> 00:27:40,810\nbecause on the inputs I am\nonly allowing SSH right now.\n\n514\n00:27:41,980 --> 00:27:43,880\nSo I don't really need to tweak that much.\n\n515\n00:27:43,880 --> 00:27:46,430\nBut I am going to choose\nto log the entries.\n\n516\n00:27:46,430 --> 00:27:50,510\nI like to keep a record of when people\nconnect to the router so I know about it.\n\n517\n00:27:50,510 --> 00:27:52,250\nSo, I'm going to check that off.\n\n518\n00:27:52,250 --> 00:27:54,830\nAnd, I could stop right there,\n\n519\n00:27:54,830 --> 00:27:58,210\nbecause there's the implicit\ndenial at the end, right.\n\n520\n00:27:58,210 --> 00:27:59,630\nBut I don't normally.\n\n521\n00:27:59,630 --> 00:28:05,220\nI normally get one step more and\nI go ahead and add a deny any, any.\n\n522\n00:28:06,220 --> 00:28:08,270\nYou might say to yourself,\nDon, it's already there.\n\n523\n00:28:08,270 --> 00:28:12,360\nThe reason I like to add it is that,\nagain, you can check that log matches.\n\n524\n00:28:12,360 --> 00:28:15,630\nThe implicit deny all doesn't log.\n\n525\n00:28:15,630 --> 00:28:19,280\nBut, if you add your own deny all,\nyou can turn on logging and\n\n526\n00:28:19,280 --> 00:28:21,534\nnow you can keep a record of\nattempts to access your router.\n\n527\n00:28:24,430 --> 00:28:29,070\nNow I've got this management access\nACL attached to my VTY lines,\n\n528\n00:28:29,070 --> 00:28:31,410\nand it's gonna restrict it.\n\n529\n00:28:31,410 --> 00:28:34,930\nNow I know that only internal\nIP's can access that router.\n\n530\n00:28:37,040 --> 00:28:39,310\nThe last thing that I have down\nhere is the authentication and\n\n531\n00:28:39,310 --> 00:28:40,960\nauthorization policy.\n\n532\n00:28:40,960 --> 00:28:44,200\nIf we're in AAA new model,\nif we've already set it up, right?\n\n533\n00:28:44,200 --> 00:28:46,430\nIf we've already told it\nto authenticate local,\n\n534\n00:28:46,430 --> 00:28:49,030\nwhich is the default,\nthen we don't have to manipulate these.\n\n535\n00:28:49,030 --> 00:28:50,780\nThese values are fine.\n\n536\n00:28:50,780 --> 00:28:54,170\nBut in another show,\nwe're going to tackle using radius and\n\n537\n00:28:54,170 --> 00:28:56,150\nTACACS authentication servers.\n\n538\n00:28:56,150 --> 00:29:00,070\nAnd if you're doing that, you'll need to\nchange this to reflect those servers.\n\n539\n00:29:00,070 --> 00:29:02,460\nBut for what we need today,\ndefault is fine.\n\n540\n00:29:04,780 --> 00:29:08,500\nWith that in place, it's gonna give me the\nsummary of commands that it's gonna send.\n\n541\n00:29:08,500 --> 00:29:10,670\nAnd you'll see it's just\ncreating to ACL and\n\n542\n00:29:10,670 --> 00:29:14,868\nthen attaching it to the VTYs\nwith the access-class command.\n\n543\n00:29:14,868 --> 00:29:18,360\nIt attaches them, and now only internal\nmachines will be able to connect.\n\n544\n00:29:19,920 --> 00:29:20,880\nI'll go ahead and deliver that.\n\n545\n00:29:24,282 --> 00:29:27,740\nAll eight, so that's in place and\nif i were to try and connect right now.\n\n546\n00:29:27,740 --> 00:29:29,682\nLet me fire up.\n\n547\n00:29:29,682 --> 00:29:33,970\nLet me try and fire up and\ni'll try telling that first.\n\n548\n00:29:35,080 --> 00:29:41,590\nSo i'm gonna try and tell that in to that\nhost, and when i do connection refused.\n\n549\n00:29:41,590 --> 00:29:43,740\nOkay, I didn't give you username and\npassword prompt.\n\n550\n00:29:43,740 --> 00:29:45,210\nI just immediately got connection refused.\n\n551\n00:29:47,340 --> 00:29:48,934\nAnd if I try SSH.\n\n552\n00:29:53,693 --> 00:29:56,787\nThis is the first time I've connected so\nit's showing me the certificate and\n\n553\n00:29:56,787 --> 00:29:58,320\nasking whether I trust it.\n\n554\n00:29:58,320 --> 00:29:59,110\nI will say yes.\n\n555\n00:30:02,614 --> 00:30:06,260\nAnd I'm gonna log in with that\nusername and password that I defined.\n\n556\n00:30:06,260 --> 00:30:07,850\nAnd there I am, I'm in.\n\n557\n00:30:07,850 --> 00:30:12,480\nOkay, not only am I in, but\nif I do a show log, Oh,\n\n558\n00:30:12,480 --> 00:30:16,890\nshoot, I didn't turn on buffering for\nthe log.\n\n559\n00:30:16,890 --> 00:30:20,450\nSo on this particular router,\nlogging is off by default, and\n\n560\n00:30:20,450 --> 00:30:21,640\nyou need to turn it on.\n\n561\n00:30:21,640 --> 00:30:25,150\nIf I had it pointing to a Cis log server\nor whatever I would have seen it there.\n\n562\n00:30:25,150 --> 00:30:26,980\nSo I do need to configure my logging.\n\n563\n00:30:26,980 --> 00:30:29,228\nAnd you know what,\nwe can do that via the GUI.\n\n564\n00:30:29,228 --> 00:30:31,510\nWe can show the viewers instead\nof me just doing it here.\n\n565\n00:30:31,510 --> 00:30:33,790\nI think we've shown it from\nthe command line in other episodes.\n\n566\n00:30:33,790 --> 00:30:34,930\nWe'll do it from the GUI.\n\n567\n00:30:34,930 --> 00:30:37,700\nSo, I do need to get logging configured.\n\n568\n00:30:37,700 --> 00:30:40,690\nBut it will keep a log entry.\n\n569\n00:30:40,690 --> 00:30:42,410\nAnd so you'll see,\nI don't see any logs here but\n\n570\n00:30:42,410 --> 00:30:46,540\ni do have 47 message lines logged,\nI just didn't define the buffer for\n\n571\n00:30:46,540 --> 00:30:52,170\nthis to be stored in, so we'll have to\ndo that, all right, so that is working.\n\n572\n00:30:52,170 --> 00:30:57,040\nMy router is now more secure than it used\nto be, in that if anybody on the Internet\n\n573\n00:30:57,040 --> 00:31:01,955\ntries to SSH into this, they're just going\nto get a failed connection outright.\n\n574\n00:31:01,955 --> 00:31:04,640\nAll right, let's see.\n\n575\n00:31:04,640 --> 00:31:06,670\nThat's probably good enough for\nour basics.\n\n576\n00:31:06,670 --> 00:31:08,930\nWe still have a little\nbit more to do on these.\n\n577\n00:31:08,930 --> 00:31:10,220\nBut looking at the clock,\n>> Oh, yeah.\n\n578\n00:31:10,220 --> 00:31:13,200\n>> We've run to our break time,\nso let's do this.\n\n579\n00:31:13,200 --> 00:31:14,090\nLet's stop here and take a break.\n\n580\n00:31:14,090 --> 00:31:15,590\n>> Okay.\n>> And when we get back,\n\n581\n00:31:15,590 --> 00:31:19,030\nwe'll continue do some of our basic\nauthentication and see a few other things\n\n582\n00:31:19,030 --> 00:31:21,870\nthat we might need to tweak as we\nget our initial router set up.\n\n583\n00:31:21,870 --> 00:31:23,170\n>> Sounds good.\n>> All right, ladies and\n\n584\n00:31:23,170 --> 00:31:24,090\ngentlemen, stay tuned.\n\n585\n00:31:24,090 --> 00:31:25,455\nWe'll be back after this.\n\n586\n00:31:25,455 --> 00:31:33,721\n[MUSIC]\n\n587\n00:31:33,721 --> 00:31:35,270\nWelcome back, everybody.\n\n588\n00:31:35,270 --> 00:31:38,640\nBefore the break,\nwe saw where we had set the ACL but\n\n589\n00:31:38,640 --> 00:31:41,630\nit wasn't logging cause my\nlog buffers weren't set up.\n\n590\n00:31:41,630 --> 00:31:44,650\nI do know it's working because\nI'm connecting on a console also.\n\n591\n00:31:44,650 --> 00:31:45,860\nIt was in the background.\n\n592\n00:31:45,860 --> 00:31:48,210\nBut I can see the log messages\nappearing in the console.\n\n593\n00:31:48,210 --> 00:31:51,900\nSo we just need to configure\nthat to actually retain them.\n\n594\n00:31:51,900 --> 00:31:54,390\nSo let me go back to my GUI.\n\n595\n00:31:54,390 --> 00:31:55,078\nHere we go.\n\n596\n00:31:55,078 --> 00:32:00,349\nAnd I was under router access and that's\nwhere our initial security stuff is.\n\n597\n00:32:00,349 --> 00:32:02,880\nBut logging is actually\njust down a little bit.\n\n598\n00:32:02,880 --> 00:32:06,330\nIf I scroll down this window we\ncan find logging right here.\n\n599\n00:32:06,330 --> 00:32:08,440\nAnd here's where we can set up logging.\n\n600\n00:32:08,440 --> 00:32:10,310\nWe can log to an external server.\n\n601\n00:32:10,310 --> 00:32:12,580\nWe can log locally and so on.\n\n602\n00:32:12,580 --> 00:32:18,130\nAnd right now I can see where it's got\na buffer size, it says it's set to 4k.\n\n603\n00:32:18,130 --> 00:32:21,690\nAnd then the logging level is set to none,\nthat's probably our issue.\n\n604\n00:32:21,690 --> 00:32:23,920\nAnd then, [LAUGH] so\nwe need to adjust that so\n\n605\n00:32:23,920 --> 00:32:25,500\nthat we can actually start logging.\n\n606\n00:32:25,500 --> 00:32:27,440\nThese are the default values for\nthis router.\n\n607\n00:32:27,440 --> 00:32:28,400\nSo we may need to tweak this.\n\n608\n00:32:28,400 --> 00:32:30,490\nNow, let me just remind\nyou guys of a few things.\n\n609\n00:32:30,490 --> 00:32:33,590\nI've seen this mistake in\nreal life quite a bit.\n\n610\n00:32:33,590 --> 00:32:36,320\nWhen you set up logging on your router,\n\n611\n00:32:36,320 --> 00:32:40,710\nthe router is the worst\nplace to store your logs.\n\n612\n00:32:40,710 --> 00:32:45,240\nBecause if you power them off and power\nthem on the logs are gone, or if a hacker\n\n613\n00:32:45,240 --> 00:32:49,930\ngets in they're just a clear log\ncommand away from wiping out your logs.\n\n614\n00:32:49,930 --> 00:32:53,020\nSo you always wanna store your\nlogs somewhere else if possible.\n\n615\n00:32:53,020 --> 00:32:56,990\nSo you can go onto your sys log here,\nand you can enable logging and\n\n616\n00:32:56,990 --> 00:32:59,290\nsend it to a different destination.\n\n617\n00:32:59,290 --> 00:33:03,340\nYou can punch in an IP address of\nthe sys log server somewhere else,\n\n618\n00:33:03,340 --> 00:33:05,670\nthat's the best place to put it.\n\n619\n00:33:05,670 --> 00:33:06,890\nSo what's the mistake?\n\n620\n00:33:06,890 --> 00:33:09,530\nWell, here under logging buffer,\n\n621\n00:33:09,530 --> 00:33:13,350\nyou can specify how much you\nwanna store in the log-in buffer.\n\n622\n00:33:13,350 --> 00:33:18,910\nAnd right now it's at 4 KB, and that may\nnot sound like a lot, but it is plenty.\n\n623\n00:33:18,910 --> 00:33:22,640\nThe more memory you assign\nhere to the buffer,\n\n624\n00:33:22,640 --> 00:33:25,720\nthat's the more RAM you're\ntaking away from the router.\n\n625\n00:33:25,720 --> 00:33:27,090\nAnd you don't need a lot, right?\n\n626\n00:33:28,410 --> 00:33:31,540\nJust to put things into perspective,\nthe entire\n\n627\n00:33:31,540 --> 00:33:36,020\ntext of the Encyclopedia Britannica,\nnot pictures but just the text.\n\n628\n00:33:36,020 --> 00:33:38,850\nAll the text can fit\nin under one megabyte.\n\n629\n00:33:40,390 --> 00:33:44,520\nOur log files, they're just text,\nand so you would be talking about\n\n630\n00:33:44,520 --> 00:33:49,390\nmillions of entries being stored if\nwe assigned a one megabyte buffer.\n\n631\n00:33:49,390 --> 00:33:53,810\nSo this 4K buffer is usually\nplenty big enough for us.\n\n632\n00:33:53,810 --> 00:33:57,290\nIt is set to log debugging,\nI'm going to change that to informational.\n\n633\n00:33:57,290 --> 00:33:59,512\nDebugging can get a lot of\ndata if we're not careful.\n\n634\n00:33:59,512 --> 00:34:02,790\nI wanna make sure that it's informational\nor higher, so I'll set that.\n\n635\n00:34:02,790 --> 00:34:07,360\nAnd I don't have a sys log server but\nwe could add a fake one.\n\n636\n00:34:07,360 --> 00:34:12,220\nLike here, I'll add my laptop,\nso we'll just punch that in.\n\n637\n00:34:12,220 --> 00:34:16,250\nAnd so, now my log files every time\na log entry is generated it'll be stored\n\n638\n00:34:16,250 --> 00:34:17,630\nin my local buffer.\n\n639\n00:34:17,630 --> 00:34:20,570\nAnd a copy of those logs will be sent\n\n640\n00:34:20,570 --> 00:34:24,230\nto a syslog server that's the place\nyou want to store your logs.\n\n641\n00:34:24,230 --> 00:34:27,856\nYou can have years and years of syslog\ndata stored in a good syslog server.\n\n642\n00:34:27,856 --> 00:34:34,140\nSo gonna delivery that and\nthat'll solve that buffer problem.\n\n643\n00:34:34,140 --> 00:34:37,770\nOkay, so logging, definitely\nsomething you want to look at and\n\n644\n00:34:37,770 --> 00:34:42,400\naddress and really easy from the GUI.\n\n645\n00:34:42,400 --> 00:34:45,080\nNow back to our secure access, so\n\n646\n00:34:45,080 --> 00:34:49,990\nwe just customized our V2Is to restrict\nthem, get them a little more secure.\n\n647\n00:34:49,990 --> 00:34:52,580\nBut you'll see some of the other\nthings we can tweak in here.\n\n648\n00:34:52,580 --> 00:34:57,220\nLike if we go to SSH,\nif we didn't already have a key generated,\n\n649\n00:34:57,220 --> 00:34:58,530\nwe could generate one here.\n\n650\n00:34:58,530 --> 00:35:01,790\nAnd it's grayed out because we've\nalready got one generated so\n\n651\n00:35:01,790 --> 00:35:03,390\nno real need for that button.\n\n652\n00:35:03,390 --> 00:35:05,040\nAnd then management\naccesses the other one.\n\n653\n00:35:05,040 --> 00:35:07,930\nNow, if we just created an ACL and\n\n654\n00:35:07,930 --> 00:35:11,230\nput it on the interface,\nwhy would we need this one also?\n\n655\n00:35:12,470 --> 00:35:17,340\nWell, this one is really a replacement for\nthose ACL's we did a minute ago.\n\n656\n00:35:17,340 --> 00:35:21,020\nThe ACL's we did a minute ago\nattach just to the VTY lines.\n\n657\n00:35:21,020 --> 00:35:25,430\nThey don't actually attach to the HTTP and\nHTTP guest portion of the router.\n\n658\n00:35:25,430 --> 00:35:29,820\nSo we would have to go and do a ACL for\nthose guys also and then you can do that.\n\n659\n00:35:29,820 --> 00:35:33,390\nBut this method here using\nthe management access policy.\n\n660\n00:35:33,390 --> 00:35:38,390\nIs even better because it\ncan do both the SSH, Telnet,\n\n661\n00:35:38,390 --> 00:35:41,920\nweb access all right here\nthrough the management screen.\n\n662\n00:35:41,920 --> 00:35:45,050\nYou need to pick one or\nthe other, all right?\n\n663\n00:35:45,050 --> 00:35:48,250\nYou can do it through the V2I lines, or\nyou can do it through this screen here,\n\n664\n00:35:48,250 --> 00:35:49,310\nbut you don't wanna do both.\n\n665\n00:35:49,310 --> 00:35:51,150\nIn fact, it'll complain if I try and\ndo it here,\n\n666\n00:35:51,150 --> 00:35:53,950\nso I'm gonna go back to my V2I lines.\n\n667\n00:35:53,950 --> 00:35:57,540\nAnd I\"m gonna take this inbound ACL,\nand I'm just gonna remove it.\n\n668\n00:35:57,540 --> 00:36:03,680\nSo here I'm just going to do none,\nand I'll save that and deliver it.\n\n669\n00:36:03,680 --> 00:36:06,981\nSo I'm just removing that ACL\nwe created before the break, and\n\n670\n00:36:06,981 --> 00:36:10,670\nnow we'll go to management access and\nwe'll see the same thing here.\n\n671\n00:36:10,670 --> 00:36:17,050\nSo, I can go into add and\nI'm gonna add a network,\n\n672\n00:36:17,050 --> 00:36:20,269\nwe did 10.1.230 with a 24 bit subnet mask.\n\n673\n00:36:21,450 --> 00:36:25,380\nAnd here, we can go a step further and\nspecify a management interface,\n\n674\n00:36:25,380 --> 00:36:27,850\nthe interface they're allowed\nto connect to, all right?\n\n675\n00:36:27,850 --> 00:36:32,222\nI've got an external IP on on gi0/0 and\nan internal IP gi0/1,\n\n676\n00:36:32,222 --> 00:36:36,350\nI probably want internal people\nconnecting to the internal interface.\n\n677\n00:36:37,540 --> 00:36:41,270\nAnd then notice all the things\nthat I can approve down here.\n\n678\n00:36:41,270 --> 00:36:45,320\nAllow Cisco Configuration Professional\nis probably a good start.\n\n679\n00:36:45,320 --> 00:36:50,370\nBut Cisco Configuration Professional\ncan run secure and unsecure.\n\n680\n00:36:50,370 --> 00:36:53,777\nAn,d so you may need to uncheck\nsome of the unsecure protocols,\n\n681\n00:36:53,777 --> 00:36:57,690\nwhich I could have cheated and\nhit Allow Secure Protocols Only.\n\n682\n00:36:57,690 --> 00:37:02,130\nThen that's gonna make sure that\nwe don't allow regular HTTP and\n\n683\n00:37:02,130 --> 00:37:03,390\nregular Telnet connections.\n\n684\n00:37:05,710 --> 00:37:09,500\nNotice it does enable RCP,\nthe Remote Copy Protocol, and\n\n685\n00:37:09,500 --> 00:37:15,620\nthat's basically doing a secure\ncopy operation over SSH.\n\n686\n00:37:15,620 --> 00:37:19,890\nAnd so, that's a secure method,\nSNMP is not enabled.\n\n687\n00:37:19,890 --> 00:37:22,520\nI may or may not need that,\nso I can check that off here.\n\n688\n00:37:22,520 --> 00:37:25,770\nBut this is much more powerful\nthan the standard VTY-ACLs,\n\n689\n00:37:25,770 --> 00:37:27,870\ncuz this one is getting all\nthese other protocols for us.\n\n690\n00:37:29,310 --> 00:37:32,170\nI'm gonna say OK to that, and\nI'll go ahead and apply it.\n\n691\n00:37:32,170 --> 00:37:36,440\nAnd you can specify more than one network\nrange, more than one IP, it's up to you.\n\n692\n00:37:36,440 --> 00:37:37,910\nAnd you can even mix and match.\n\n693\n00:37:37,910 --> 00:37:41,840\nSome IP's you might give configuration\nprofessional access other IP's you might\n\n694\n00:37:41,840 --> 00:37:43,237\nnot it's entirely up to you.\n\n695\n00:37:43,237 --> 00:37:46,141\n>> That's actually quite impressive\nhow many you created there.\n\n696\n00:37:46,141 --> 00:37:48,870\n>> Yeah, we'll take a look at\nthe config from the command\n\n697\n00:37:48,870 --> 00:37:49,820\nline in here just a minute.\n\n698\n00:37:49,820 --> 00:37:52,277\nI wanted to deliver that first.\n\n699\n00:37:52,277 --> 00:37:55,940\nAll right, so\nlets take a look at what it just did.\n\n700\n00:37:57,200 --> 00:37:57,980\nIf we go in and\n\n701\n00:37:57,980 --> 00:38:01,610\nstart to look at this, most of\nthe configuration hasn't been modified.\n\n702\n00:38:01,610 --> 00:38:05,480\nSo this is our config as it was before,\nand\n\n703\n00:38:05,480 --> 00:38:10,090\nif I get to my gi0/1 interface.\n\n704\n00:38:10,090 --> 00:38:13,050\nHere is my internal interface, and\n\n705\n00:38:13,050 --> 00:38:17,730\nI can see that it attached an access\nlist to my internal interface.\n\n706\n00:38:17,730 --> 00:38:20,710\nAll right, so\nthat's the first change that it made, and\n\n707\n00:38:20,710 --> 00:38:22,825\nI don't think it did one on the outside,\ndid it?\n\n708\n00:38:22,825 --> 00:38:28,590\nNo, so just on the inside, and then as\nI look down a little bit further here,\n\n709\n00:38:28,590 --> 00:38:33,450\nI can see where it attached\nan ACL to my web server.\n\n710\n00:38:33,450 --> 00:38:36,924\nThere's a web server ACL right there,\naccess Class 1.\n\n711\n00:38:36,924 --> 00:38:40,242\nAnd as I continue on,\nthat's the ACL that I made,\n\n712\n00:38:40,242 --> 00:38:42,776\nso we're not using that one anymore.\n\n713\n00:38:42,776 --> 00:38:45,515\nDown here,\nwe can see the ACLs that it created.\n\n714\n00:38:45,515 --> 00:38:49,416\n>> [LAUGH]\n>> Good old putty.\n\n715\n00:38:49,416 --> 00:38:53,946\nIf you right click it pastes whatever you\nhad highlighted, so that's a fun mess.\n\n716\n00:38:53,946 --> 00:38:56,965\nAll right, you know what?\n\n717\n00:38:56,965 --> 00:39:01,075\nLet me just get back into this.\n\n718\n00:39:01,075 --> 00:39:03,257\nWell, I'm gonna lock myself out\nof this thing if I'm not careful.\n\n719\n00:39:10,455 --> 00:39:13,984\nThere we go,\nI'll pretend like I know what I'm doing.\n\n720\n00:39:13,984 --> 00:39:17,514\n[LAUGH] So let me get back down here.\n\n721\n00:39:17,514 --> 00:39:20,390\nSo, if we look at these ACLs,\nwhat are they doing?\n\n722\n00:39:20,390 --> 00:39:25,000\nWell, the first one is just\na straight up source address ACL.\n\n723\n00:39:25,000 --> 00:39:29,680\nA standard ACL, saying only allow\npeople whose source IP is 10.1.230.,\n\n724\n00:39:29,680 --> 00:39:30,650\nwhatever to connect.\n\n725\n00:39:30,650 --> 00:39:34,560\nAnd that's the ACL that was\nattached to the web server.\n\n726\n00:39:34,560 --> 00:39:39,340\nThat's restricting the web server\naccess to just our internal network.\n\n727\n00:39:39,340 --> 00:39:44,258\n100 is what's being attached to my inside\ninterface and notice what it's doing.\n\n728\n00:39:44,258 --> 00:39:48,867\nAnything from the 10.1.230.0 network,\n\n729\n00:39:48,867 --> 00:39:52,322\ngoing to the IP address of this router,\n\n730\n00:39:52,322 --> 00:39:56,524\n10.1.230.16 equaling SSH or SSL.\n\n731\n00:39:56,524 --> 00:40:00,494\nOr CMD,\nthat's the remote copy protocol, RCPPs.\n\n732\n00:40:00,494 --> 00:40:02,788\nSo it's allowing those, and\n\n733\n00:40:02,788 --> 00:40:08,110\nthen it's denying everyone else\nconnection to this router.\n\n734\n00:40:08,110 --> 00:40:09,536\nSo, it's denying it.\n\n735\n00:40:09,536 --> 00:40:11,490\nAnd then it autogenerates another ACL,\n\n736\n00:40:11,490 --> 00:40:13,680\nwhich basically is\nthe same as the other one.\n\n737\n00:40:13,680 --> 00:40:16,590\nLocking us down to just\nthe source of 10.1.230,\n\n738\n00:40:16,590 --> 00:40:19,510\nexcept this one is an extended\nACL instead of a standard.\n\n739\n00:40:20,690 --> 00:40:21,680\nAnd then down here,\n\n740\n00:40:21,680 --> 00:40:26,700\nI can see where again they've attached\nthat access class to the VTYs.\n\n741\n00:40:26,700 --> 00:40:29,340\nSo they're doing all of that work, for us.\n\n742\n00:40:29,340 --> 00:40:34,110\nAttaching an ACL to the interface,\nto the HTTP server, and to the VTYs.\n\n743\n00:40:34,110 --> 00:40:36,600\nKnocking them out, in all three areas.\n\n744\n00:40:36,600 --> 00:40:40,200\nBut all we see,\nis one little entry right here.\n\n745\n00:40:40,200 --> 00:40:41,950\nIt makes life a lot easier.\n\n746\n00:40:41,950 --> 00:40:44,350\n>> Yeah.\nThe ease of management is the clear reason\n\n747\n00:40:44,350 --> 00:40:49,450\nwhy we would choose to use the CCP,\ninstead of trying to type it in manually.\n\n748\n00:40:49,450 --> 00:40:51,460\nEven though you saw all\nthose ACLs created,\n\n749\n00:40:51,460 --> 00:40:55,300\nremember they still have to be attached\nsomehow, to what we're gonna use.\n\n750\n00:40:55,300 --> 00:40:57,880\nI always wanna point this out cuz I know,\nI've done this before.\n\n751\n00:40:57,880 --> 00:41:01,678\nRemember that when you put an ACL\nonto a physical interface,\n\n752\n00:41:01,678 --> 00:41:04,280\nit's always Access-Group.\n\n753\n00:41:04,280 --> 00:41:10,680\nWhen you do it to something virtual, like\nthe VTY lines, or HTTP, it's Access-Class.\n\n754\n00:41:10,680 --> 00:41:13,442\nI know,\nI've put Access-Group on a VTY line.\n\n755\n00:41:13,442 --> 00:41:16,714\nAnd then it said hey, it's not working.\n\n756\n00:41:16,714 --> 00:41:20,117\nSo make sure you check out, and\ntake a look at your syntax,\n\n757\n00:41:20,117 --> 00:41:21,788\nif it's not working there.\n\n758\n00:41:21,788 --> 00:41:23,330\n>> Yep.\n\n759\n00:41:23,330 --> 00:41:29,075\nSo these are some of the steps that we\ncan take, to secure our management-plane.\n\n760\n00:41:29,075 --> 00:41:31,955\nThe management-plane on the router,\naccess through the router itself.\n\n761\n00:41:31,955 --> 00:41:35,533\nThese are easy quick steps that\nwe can follow to lock that down,\n\n762\n00:41:35,533 --> 00:41:40,080\nrestricting access to just approved\nIP address, or approved networks.\n\n763\n00:41:40,080 --> 00:41:42,622\nAnd it does give us a higher\n[INAUDIBLE] security.\n\n764\n00:41:42,622 --> 00:41:45,460\nSo just keep in mind,\nthat you can do it by hand.\n\n765\n00:41:45,460 --> 00:41:50,220\nIt's easier to do it via the GUI,\neither way works.\n\n766\n00:41:50,220 --> 00:41:55,000\nSo we have access control lists, or\nfirewall rules for the data-plane.\n\n767\n00:41:55,000 --> 00:41:57,010\nWe have our management access right there,\nfor\n\n768\n00:41:57,010 --> 00:42:00,020\nthe management-plane,\nwhat about the control-plane?\n\n769\n00:42:00,020 --> 00:42:00,860\n>> Right.\n\n770\n00:42:00,860 --> 00:42:04,090\n>> Now the control-plane is kind of in\nbetween the management, and data-plane.\n\n771\n00:42:04,090 --> 00:42:07,160\nAnd it is where the router\nis making decisions.\n\n772\n00:42:07,160 --> 00:42:10,980\nSo when it makes routing table lookup\ndecisions, when dynamic routing protocols\n\n773\n00:42:10,980 --> 00:42:14,070\nlike EIGRP, and OSPF run,\nthey're running on the control-plane.\n\n774\n00:42:15,230 --> 00:42:20,350\nSo the control-plane is a great target for\ndenial-of-service attacks,\n\n775\n00:42:20,350 --> 00:42:24,514\nmalicious information attacks,\nthings like that.\n\n776\n00:42:24,514 --> 00:42:28,987\nSo there's a lot of different things that\ncan happen on the control-plane, and\n\n777\n00:42:28,987 --> 00:42:31,042\nmost of us never even think about it.\n\n778\n00:42:31,042 --> 00:42:32,314\nYou might have notice that\n[INAUDIBLE] to my config\n\n779\n00:42:32,314 --> 00:42:32,918\nbackup\n>> Right.\n\n780\n00:42:32,918 --> 00:42:36,416\n>> When I was scrolling\nthrough the config real quick,\n\n781\n00:42:36,416 --> 00:42:39,680\nthere was a spot in here, right there.\n\n782\n00:42:39,680 --> 00:42:41,443\nSee how it just says control-plane.\n\n783\n00:42:41,443 --> 00:42:42,360\n>> [LAUGH]\n>> And it's just\n\n784\n00:42:42,360 --> 00:42:42,915\nthere-\n>> Yeah.\n\n785\n00:42:42,915 --> 00:42:43,810\n>> And it does nothing.\n\n786\n00:42:44,890 --> 00:42:47,840\nWhat that is is actually\na section designator.\n\n787\n00:42:47,840 --> 00:42:51,476\nThat is then gonna show me all of the\ncommands attached to my control-plane, and\n\n788\n00:42:51,476 --> 00:42:52,712\nby default there are none.\n\n789\n00:42:52,712 --> 00:42:54,172\n>> Right.\n>> And so it just sits there, and\n\n790\n00:42:54,172 --> 00:42:55,080\nthen it does nothing.\n\n791\n00:42:55,080 --> 00:42:57,310\nMost people just look right over this,\nand don't even think about it.\n\n792\n00:42:58,550 --> 00:43:03,000\nBut you can attach access control\nlists to your control-plane.\n\n793\n00:43:03,000 --> 00:43:04,570\nAnd if you do,\nthat will show up right here.\n\n794\n00:43:04,570 --> 00:43:07,270\nYou have your Access-Group,\nor Access-Class, or whatever.\n\n795\n00:43:07,270 --> 00:43:09,080\nAnd so, It'll show up in there.\n\n796\n00:43:09,080 --> 00:43:12,189\nAnd then you can know, what security\nyou have applied to that control-plane.\n\n797\n00:43:12,189 --> 00:43:13,619\nNow I will say this,\n\n798\n00:43:13,619 --> 00:43:16,191\nyou can really break things-\n>> [LAUGH] Yeah.\n\n799\n00:43:16,191 --> 00:43:19,463\n>> If you mess up the control-plane\ncuz that's how your router thinks.\n\n800\n00:43:19,463 --> 00:43:23,710\nThink about putting\nblockage in your brain,\n\n801\n00:43:23,710 --> 00:43:27,853\nthat's what you're doing to your router.\n\n802\n00:43:27,853 --> 00:43:32,662\nSo fortunately on the exam, they don't\nrequire you to configure control-plane,\n\n803\n00:43:32,662 --> 00:43:35,249\nand any of the security there,\nor whatever.\n\n804\n00:43:35,249 --> 00:43:38,315\nWe normally call it\nControl Plane Policing.\n\n805\n00:43:38,315 --> 00:43:40,087\n>> [CROSSTALK]\n>> And you'll see it abbreviated.\n\n806\n00:43:40,087 --> 00:43:43,290\nLet me just kond of bring\nup my little notes here.\n\n807\n00:43:43,290 --> 00:43:43,790\n>> CoPP?\n\n808\n00:43:45,140 --> 00:43:47,582\n>> Yeah,\nI usually see it written like this.\n\n809\n00:43:47,582 --> 00:43:49,999\n>> Yeah.\n>> Capital C, lower-case o, so that's,\n\n810\n00:43:49,999 --> 00:43:52,220\nthat Control Plane Policing.\n\n811\n00:43:52,220 --> 00:43:56,976\nAnd basically,\nthere's no one size fits all\n\n812\n00:43:56,976 --> 00:44:01,380\nof solution for Control Plane Policing.\n\n813\n00:44:01,380 --> 00:44:04,280\nYou need to evaluate your router, and\n\n814\n00:44:04,280 --> 00:44:08,600\ndetermine what is acceptable\ncommunication, and what isn't.\n\n815\n00:44:08,600 --> 00:44:13,210\nNow I recommend, and I pulled this before\nthe show, I got a little URL here.\n\n816\n00:44:13,210 --> 00:44:14,390\nThere we go.\n\n817\n00:44:14,390 --> 00:44:15,490\nI recommend a particular article.\n\n818\n00:44:15,490 --> 00:44:19,563\nIf you go to Cisco's website, they have a\nton of articles on Control Plane Policing,\n\n819\n00:44:19,563 --> 00:44:21,955\nbut most of them are just\nshowing like how to do it.\n\n820\n00:44:21,955 --> 00:44:24,253\nWhich is really dangerous\nbecause you can put-\n\n821\n00:44:24,253 --> 00:44:24,821\n>> [LAUGH]\n\n822\n00:44:24,821 --> 00:44:25,790\n>> Things in there pretty bad.\n\n823\n00:44:25,790 --> 00:44:30,670\nSo, I recommend this article which\nactually shows best practices.\n\n824\n00:44:30,670 --> 00:44:34,580\nSo, not just how to do it, but what's the\nbest way to go about configuring it, and\n\n825\n00:44:34,580 --> 00:44:35,680\ngives you some information.\n\n826\n00:44:35,680 --> 00:44:37,857\nSo on the exam,\nyou don't have to configure it, but\n\n827\n00:44:37,857 --> 00:44:41,074\nin real life if you just wanna to know\nhow, if you wanna see some examples, and\n\n828\n00:44:41,074 --> 00:44:42,631\nstuff this article is really great.\n\n829\n00:44:42,631 --> 00:44:43,665\nLet me pull this one up.\n\n830\n00:44:47,589 --> 00:44:50,590\nHere we go, so\nI'm just gonna pull this up.\n\n831\n00:44:50,590 --> 00:44:53,080\nAnd that's a pretty small text there.\n\n832\n00:44:53,080 --> 00:44:54,350\nBut basically,\n\n833\n00:44:54,350 --> 00:44:59,284\nit is a article that breaks down,\nhow control, see they wrote it that way.\n\n834\n00:44:59,284 --> 00:45:01,358\n>> Yeah.\n>> So how Control Plane Policing works,\n\n835\n00:45:01,358 --> 00:45:04,930\nwhat are some of the tools available for\nyour disposal, and so on.\n\n836\n00:45:04,930 --> 00:45:11,800\nAnd then they give actual examples,\nof how to build it up, and so on.\n\n837\n00:45:11,800 --> 00:45:13,827\nAnd so you'll see, there's several step-\n>> Yep.\n\n838\n00:45:13,827 --> 00:45:16,122\n>> That are actually getting it in place,\nand\n\n839\n00:45:16,122 --> 00:45:19,073\nthey describe some of\nthe different concerns we have.\n\n840\n00:45:19,073 --> 00:45:23,221\nA lot of us don't realize this, but\nwhen you run something like EIGRP,\n\n841\n00:45:23,221 --> 00:45:25,377\nor OSPF, it's not normal traffic.\n\n842\n00:45:25,377 --> 00:45:26,924\n>> Right.\n>> Normally,\n\n843\n00:45:26,924 --> 00:45:29,920\nACLs [INAUDIBLE] like IP ACLs.\n\n844\n00:45:29,920 --> 00:45:33,730\nAnd EIGRP, and\nOSPF are technically their own protocol.\n\n845\n00:45:33,730 --> 00:45:36,730\nSo the ACLs are a little weird,\nand oh good, here's an example.\n\n846\n00:45:37,790 --> 00:45:42,430\nSo notice on this one,\nhow it's got like permit TCP,\n\n847\n00:45:42,430 --> 00:45:46,157\npermit UDP, and then here permit OSPF-\n>> [CROSSTALK]\n\n848\n00:45:46,157 --> 00:45:48,115\n>> Permit EIGRP.\n\n849\n00:45:48,115 --> 00:45:52,943\nThey are their own protocol,\ntheir own layer three, or\n\n850\n00:45:52,943 --> 00:45:57,874\ntransport layer, or layer three,\nand four protocols,\n\n851\n00:45:57,874 --> 00:46:02,102\nand so\nit is different than your normal traffic.\n\n852\n00:46:02,102 --> 00:46:06,582\nSo when you setup\na Control Plane Policing Policy\n\n853\n00:46:06,582 --> 00:46:08,019\n[INAUDIBLE]\n>> Yeah.\n\n854\n00:46:08,019 --> 00:46:10,170\n>> When we set that up, you have to think\nabout it, who is exchanging EIGRP router,\n\n855\n00:46:10,170 --> 00:46:11,988\nwho is exchanging OSPF, or RIP,\nor whatever protocols I am using.\n\n856\n00:46:11,988 --> 00:46:16,310\nAnd we need to approve them, and\nit gets really tricky with like OSPF,\n\n857\n00:46:16,310 --> 00:46:20,288\nbecause with OSPF,\nyou don't talk directly to your neighbor-\n\n858\n00:46:20,288 --> 00:46:20,914\n>> Yeah.\n\n859\n00:46:20,914 --> 00:46:22,631\n>> You use multicast addresses.\n\n860\n00:46:22,631 --> 00:46:24,059\nSo see this.\n\n861\n00:46:24,059 --> 00:46:28,991\nIt's any host connecting to 224.0.0.5,\nand 224.0.0.6.\n\n862\n00:46:28,991 --> 00:46:29,710\n>> Yeah.\n\n863\n00:46:29,710 --> 00:46:33,505\n>> Those are the multicasts used\nbetween the designated router, and\n\n864\n00:46:33,505 --> 00:46:37,245\nthe non-designated routers, or\nother guys that are out there.\n\n865\n00:46:37,245 --> 00:46:39,083\n>> Yep.\n\n866\n00:46:39,083 --> 00:46:40,720\n>> So, you got to approve that.\n\n867\n00:46:40,720 --> 00:46:43,732\nSame thing with EIGRP,\nit's got a multicast address, but\n\n868\n00:46:43,732 --> 00:46:45,790\nit actually does talk to other routers.\n\n869\n00:46:45,790 --> 00:46:47,470\nSo, you can specify those.\n\n870\n00:46:47,470 --> 00:46:51,410\nSo, just keep that in mind,\neach protocol is a little bit different.\n\n871\n00:46:51,410 --> 00:46:56,080\nThey go on, and do like here,\nis pim protocol independent multicast.\n\n872\n00:46:56,080 --> 00:46:58,390\nSo again,\nenabling that multicast communication.\n\n873\n00:46:58,390 --> 00:47:01,630\nThis is the stuff that you'll need,\nand then it is tricky.\n\n874\n00:47:01,630 --> 00:47:05,854\nIf you don't put this in place,\nyou could turn on Control Plane Policing,\n\n875\n00:47:05,854 --> 00:47:08,580\nand all of a sudden your\nrouting table is empty.\n\n876\n00:47:08,580 --> 00:47:10,980\nYou dump your routing table cuz\nyou're not allowed to communicate\n\n877\n00:47:10,980 --> 00:47:11,950\nbetween the routers.\n\n878\n00:47:11,950 --> 00:47:14,630\nSo you do need to think about that,\nbut it can immediately\n\n879\n00:47:14,630 --> 00:47:18,340\nkill off the ability of an attacker\nto start spoofing EIGRP packets, or\n\n880\n00:47:18,340 --> 00:47:21,470\nwhatever, cuz it can just be trimmed off,\nand not even allowed to communicate.\n\n881\n00:47:21,470 --> 00:47:22,880\n>> Right.\n\n882\n00:47:22,880 --> 00:47:24,080\n>> So very powerful stuff.\n\n883\n00:47:24,080 --> 00:47:25,681\nIt's good reading.\nThis whole article,\n\n884\n00:47:25,681 --> 00:47:27,945\nsome of the Cisco articles are written.\n\n885\n00:47:27,945 --> 00:47:30,415\n>> [LAUGH]\n>> Like engineering, technical manuals.\n\n886\n00:47:30,415 --> 00:47:31,171\n>> Yeah.\n\n887\n00:47:31,171 --> 00:47:33,646\n>> But this one,\nthis best practices is the one,\n\n888\n00:47:33,646 --> 00:47:37,774\nis really good cuz it does detail exactly\nhow Control Plane Policing works For\n\n889\n00:47:37,774 --> 00:47:40,567\nthose of you that are going\nto move not to your CCMP but\n\n890\n00:47:40,567 --> 00:47:43,184\nto like CCMP security this is something-\n>> Yeah.\n\n891\n00:47:43,184 --> 00:47:44,924\n>> That you'll need to learn,\nor you'll need to do.\n\n892\n00:47:44,924 --> 00:47:48,040\nSo the CCNA security, they just\nwant you to be familiar with this.\n\n893\n00:47:48,040 --> 00:47:52,081\nThat it does exist, and when you create\na ACL like that, where did it go,\n\n894\n00:47:52,081 --> 00:47:52,890\nright there.\n\n895\n00:47:52,890 --> 00:47:58,287\nSo they create that ACL, and there\nare several examples in here of the ACLs\n\n896\n00:47:58,287 --> 00:48:04,150\nthat they're using Then you actually\nhave to attach that to a policy.\n\n897\n00:48:04,150 --> 00:48:07,270\nSo, it's not just straight\nup attach the control plane.\n\n898\n00:48:07,270 --> 00:48:09,000\nYou have to define a service policy.\n\n899\n00:48:09,000 --> 00:48:12,250\nAnd so that they're going through in\ndefining a map to map the traffic.\n\n900\n00:48:12,250 --> 00:48:14,390\nAnd then the traffic\ngets mapped to a policy.\n\n901\n00:48:14,390 --> 00:48:16,190\nSo here's the policy map.\n\n902\n00:48:16,190 --> 00:48:22,290\nAnd then at the end of the day, the policy\nmap gets attached to the control plane.\n\n903\n00:48:22,290 --> 00:48:26,230\nAnd by doing it this way, you can\nnot just block or allow traffic, but\n\n904\n00:48:26,230 --> 00:48:27,450\nyou can also rate limit it.\n\n905\n00:48:27,450 --> 00:48:28,910\nAnd that's what they're\nshowing in the example here.\n\n906\n00:48:28,910 --> 00:48:33,650\nThey're saying hey, if we get excessive\ntraffic of this type, drop it, and\n\n907\n00:48:33,650 --> 00:48:36,100\nthat way you basically kill\noff denial service decks.\n\n908\n00:48:36,100 --> 00:48:39,420\nYou'll still be able to get into\nthe router even though it's being hit with\n\n909\n00:48:39,420 --> 00:48:41,550\na flood of junk traffic.\n\n910\n00:48:41,550 --> 00:48:45,930\nAnd somewhere in here,\nhere we go into the control plane and\n\n911\n00:48:45,930 --> 00:48:50,100\nthey say, service-policy, and then they\nspecify their policy that they define.\n\n912\n00:48:50,100 --> 00:48:53,990\nSo, that's an example of what you'll see,\nand I think they give a full, yeah,\n\n913\n00:48:53,990 --> 00:48:55,100\nhere's a full line.\n\n914\n00:48:55,100 --> 00:48:58,900\nSo you define your ACLs\nto match your traffic.\n\n915\n00:48:58,900 --> 00:49:02,660\nYou define maps to\nclassify all the traffic.\n\n916\n00:49:02,660 --> 00:49:06,570\nAnd then you define policies to state\nwhat you're gonna do with that traffic.\n\n917\n00:49:06,570 --> 00:49:10,740\nAnd then at the end of the day you\nattach that policy to your control plan.\n\n918\n00:49:10,740 --> 00:49:13,790\nSo it's not an easy thing to do.\n\n919\n00:49:13,790 --> 00:49:16,950\nThe Cisco configuration professional,\nI don't think it even supports it.\n\n920\n00:49:16,950 --> 00:49:21,050\nI'm pretty sure that you don't\nhave control plane policing here.\n\n921\n00:49:21,050 --> 00:49:23,870\nBut let's just verify so\nI know I'm not lying.\n\n922\n00:49:23,870 --> 00:49:25,990\nIt would be under security if it did.\n\n923\n00:49:28,200 --> 00:49:32,980\nAnd nope.\n\n924\n00:49:32,980 --> 00:49:36,710\nYeah, so you can't even do it in the CCP,\nyou'd have to do it from the command line.\n\n925\n00:49:36,710 --> 00:49:39,630\nAnd it really is, it's a bit of an art,\nyou'd have to evaluate your network\n\n926\n00:49:39,630 --> 00:49:42,430\ntraffic and figure out what to allow and\nwhat not to.\n\n927\n00:49:42,430 --> 00:49:44,603\nBut excellent way to protect\nyou from getting over run.\n\n928\n00:49:47,132 --> 00:49:48,890\nSo those are our three planes.\n\n929\n00:49:48,890 --> 00:49:51,650\nThe data plane, the control plane, and\n\n930\n00:49:51,650 --> 00:49:55,210\nthe management plane, and\ndifferent ways to secure each one.\n\n931\n00:49:55,210 --> 00:49:58,940\nFor the exam, you are expected to\nknow how to control the data plane,\n\n932\n00:49:58,940 --> 00:50:01,200\nwhich we'll do in the firewall episodes,\n\n933\n00:50:01,200 --> 00:50:03,740\nyou're expected to know how to\ncontrol the management plane.\n\n934\n00:50:03,740 --> 00:50:07,820\nWhich are the VTYs, and\nthe CCP configuration\n\n935\n00:50:07,820 --> 00:50:11,430\nwhat we did there where we controlled\nthe V2I access and HTTP and so on.\n\n936\n00:50:11,430 --> 00:50:14,910\nAnd you need to be aware that you\ncan control the control plane.\n\n937\n00:50:14,910 --> 00:50:18,768\nbut you don't need to know the hows of it.\n\n938\n00:50:18,768 --> 00:50:22,420\nI'll post the link to this article on\nthe web page when this episode gets posted\n\n939\n00:50:22,420 --> 00:50:23,970\nup there.\n\n940\n00:50:23,970 --> 00:50:29,070\n>> Now when you have a lot of routers to\ndeal with at one particular point in time,\n\n941\n00:50:29,070 --> 00:50:30,740\nright now we're only\nworking with one router,\n\n942\n00:50:30,740 --> 00:50:35,800\nif I had to type in 42 commands per\nrouter and I had 100 routers here.\n\n943\n00:50:35,800 --> 00:50:37,100\nThat could get old very quickly.\n\n944\n00:50:37,100 --> 00:50:41,710\nI could copy and paste it in, but\nCisco also provide another product for\n\n945\n00:50:41,710 --> 00:50:43,610\nus, that's a really neat product.\n\n946\n00:50:43,610 --> 00:50:47,222\nAnd it allows us to be able to manage\nmultiple routers at one time and\n\n947\n00:50:47,222 --> 00:50:48,912\nto configure their security.\n\n948\n00:50:48,912 --> 00:50:49,562\n>> Yeah, absolutely.\n\n949\n00:50:49,562 --> 00:50:50,865\nLet me, I\"m gonna fire this up.\n\n950\n00:50:50,865 --> 00:50:56,115\nSo, CISCO has a product called the CSM or\nthe Cisco Security Manager.\n\n951\n00:50:56,115 --> 00:50:57,555\nAnd it is designed for\n\n952\n00:50:57,555 --> 00:51:00,025\nenvironments where we have multiple\ndevices you're trying to manage.\n\n953\n00:51:00,025 --> 00:51:01,435\nI'll give you a great example.\n\n954\n00:51:01,435 --> 00:51:05,850\nSo I used to work at a bank and\nwe had 90 branches and we had\n\n955\n00:51:05,850 --> 00:51:10,920\nACLs written on all of our equipment that\nlimited traffic to and from the branches.\n\n956\n00:51:10,920 --> 00:51:14,250\nWell, anytime we added a new branch,\n\n957\n00:51:14,250 --> 00:51:17,870\nour ACLs had to be updated\non all of our equipment.\n\n958\n00:51:17,870 --> 00:51:23,470\nSo if we added branch number 91, well,\nall of our firewalls and routers for\n\n959\n00:51:23,470 --> 00:51:27,720\nbranch 1 through 90 had to be updated to\nreflect that this new network existed.\n\n960\n00:51:27,720 --> 00:51:29,260\nWell, it's a pain in the butt.\n\n961\n00:51:29,260 --> 00:51:29,850\nIt is.\n\n962\n00:51:29,850 --> 00:51:33,990\nAnd it's really the same command\nbeing issued on 90 different devices.\n\n963\n00:51:33,990 --> 00:51:38,760\nSo what the CSM is,\nlet me just pull up a picture of it here.\n\n964\n00:51:38,760 --> 00:51:43,570\nThe CSM is basically\na centralized management console\n\n965\n00:51:43,570 --> 00:51:46,650\nthat lets you define a command or\nscript, and\n\n966\n00:51:46,650 --> 00:51:51,450\nit will execute it across all the devices\nso you can create a common configuration.\n\n967\n00:51:51,450 --> 00:51:54,560\nIt even supports things like wildcards and\nstuff which makes it auto configuration\n\n968\n00:51:54,560 --> 00:51:58,940\nreally neat, and\nit is a cool tool available.\n\n969\n00:51:58,940 --> 00:52:00,008\nIt's not free.\n\n970\n00:52:00,008 --> 00:52:02,698\n>> [LAUGH]\n>> Unfortunately,\n\n971\n00:52:02,698 --> 00:52:04,620\nin Cisco's way it always costs money.\n\n972\n00:52:04,620 --> 00:52:07,350\nBut, the thing is,\nit does save you a lot of time.\n\n973\n00:52:07,350 --> 00:52:12,885\nIt is like a it's sort of\nlight version of CiscoWorks.\n\n974\n00:52:12,885 --> 00:52:16,740\nCiscoWorks incredibly expensive, but\ncan manage all the Cisco equipment.\n\n975\n00:52:16,740 --> 00:52:20,620\nThis one is focused more on routers and\nASAs as far as managing them.\n\n976\n00:52:20,620 --> 00:52:24,908\nAnd the other thing that it does is\nwhat's called global correlation.\n\n977\n00:52:24,908 --> 00:52:27,060\nNow, you wanna remember\nthat term right there,\n\n978\n00:52:27,060 --> 00:52:30,040\nI'm not gonna do the Mike Roderick\nknock on the table thing.\n\n979\n00:52:30,040 --> 00:52:32,380\n>> [LAUGH]\n>> But global correlation and\n\n980\n00:52:32,380 --> 00:52:36,660\nwhat that means is that they can collect\nall the events that are being generated by\n\n981\n00:52:36,660 --> 00:52:41,150\nall your different routers and bring them\ninto one place much like a Syslog server,\n\n982\n00:52:41,150 --> 00:52:43,772\nbut it will actually interpret that data.\n\n983\n00:52:43,772 --> 00:52:47,620\nYou kinda see that here as it's showing\nsome events that are coming in and\n\n984\n00:52:47,620 --> 00:52:49,360\nclassifying them and so on.\n\n985\n00:52:49,360 --> 00:52:50,570\nThat's what it does.\n\n986\n00:52:50,570 --> 00:52:54,710\nIt's keeping track of that information\nin one place, a central console for us.\n\n987\n00:52:56,690 --> 00:53:02,040\nSo the example up here that is\nshowing that central location, but\n\n988\n00:53:02,040 --> 00:53:07,060\nhere they're going through and looking\nat devices and filtering, and so on.\n\n989\n00:53:07,060 --> 00:53:08,070\nIt's pretty powerful.\n\n990\n00:53:08,070 --> 00:53:09,610\nIs that all we get on this one?\n\n991\n00:53:09,610 --> 00:53:16,970\nI think there was one more screen which\nhere they're defining a NAT policy.\n\n992\n00:53:16,970 --> 00:53:20,190\nAnd so they're defining what to NAT in,\nwhat to NAT out,\n\n993\n00:53:20,190 --> 00:53:23,060\nwhat address to NAT it to,\nand kinda defining that.\n\n994\n00:53:23,060 --> 00:53:26,210\nAnd the cool part here is that\nthey can set this policy once and\n\n995\n00:53:26,210 --> 00:53:28,990\nthen push it out to all the equipment and\nit makes life super easy.\n\n996\n00:53:30,300 --> 00:53:33,570\nYeah, and they're actually\nconnected to an ASA right there.\n\n997\n00:53:33,570 --> 00:53:36,460\nBut it does support managing routers\nwith the firewall features also.\n\n998\n00:53:39,000 --> 00:53:40,770\nSo that's the CSM.\n\n999\n00:53:40,770 --> 00:53:45,100\nIt's another one where for the exam, Cisco\nwants you to be aware of the CSM, and\n\n1000\n00:53:45,100 --> 00:53:48,900\nto know that if you're managing many,\nmany devices, that it's available for you.\n\n1001\n00:53:48,900 --> 00:53:52,100\nBut at the end of the day you're not\nexpected to use it or launch it or\n\n1002\n00:53:52,100 --> 00:53:53,882\neven recognize a pick from it.\n\n1003\n00:53:53,882 --> 00:53:56,320\n[LAUGH] Which is kind of sad.\n\n1004\n00:53:56,320 --> 00:54:00,570\nBut this little document I was showing\nyou guys, that's the reference sheet for\n\n1005\n00:54:00,570 --> 00:54:04,930\nthe CSM and I'll post a link to it\nalong with a video on the website.\n\n1006\n00:54:04,930 --> 00:54:08,460\nAnd that way, if you wanna read\nup a little more on it you can.\n\n1007\n00:54:08,460 --> 00:54:10,460\nI find for most place though,\n\n1008\n00:54:10,460 --> 00:54:13,860\nif you're a small business you probably\njust manage your devices independently.\n\n1009\n00:54:13,860 --> 00:54:16,730\nIf you're a large business\nyou probably use CiscoWorks.\n\n1010\n00:54:16,730 --> 00:54:21,335\nIf you're a medium business,\nyou can deploy tools like these, but\n\n1011\n00:54:21,335 --> 00:54:24,165\nthere's usually no upgrade\npatch to the next tool, so\n\n1012\n00:54:24,165 --> 00:54:27,885\ntypically you're usually either\nstill managing them independently or\n\n1013\n00:54:27,885 --> 00:54:31,165\nmoving to the big software, so\nthis kinda gets skipped over.\n\n1014\n00:54:31,165 --> 00:54:36,195\nThe other problem is Cisco's not\nterribly consistent with updating their\n\n1015\n00:54:37,930 --> 00:54:39,546\nsmaller softer packages like this.\n\n1016\n00:54:39,546 --> 00:54:42,130\nSo you may adapt it wholeheartedly and\n\n1017\n00:54:42,130 --> 00:54:44,700\nthen they stop supporting it next\nyear which is always frustrating.\n\n1018\n00:54:44,700 --> 00:54:45,764\n>> Or they're gonna run it in Java.\n\n1019\n00:54:45,764 --> 00:54:46,420\n[LAUGH]\n>> Well,\n\n1020\n00:54:46,420 --> 00:54:47,920\nI can guarantee you it runs in Java.\n\n1021\n00:54:47,920 --> 00:54:51,350\nThat just goes thing,\nit's really frustrating.\n\n1022\n00:54:51,350 --> 00:54:51,910\n>> We love it.\n\n1023\n00:54:51,910 --> 00:54:53,070\nWe love Java.\nWe love it.\n\n1024\n00:54:53,070 --> 00:54:56,070\n>> Cisco is the only reason I\nhave Java loaded on my laptop.\n\n1025\n00:54:56,070 --> 00:54:58,580\nOtherwise it would be\nuninstalled right now.\n\n1026\n00:54:58,580 --> 00:55:01,170\nKind of frustrating.\n\n1027\n00:55:01,170 --> 00:55:02,080\n>> Yes.\n\n1028\n00:55:02,080 --> 00:55:03,440\n>> Well, Ronnie let's look at the clock.\n\n1029\n00:55:03,440 --> 00:55:05,650\nThis is a good spot for\nus to stop and take a break.\n\n1030\n00:55:05,650 --> 00:55:06,700\n>> Okay, sure.\n>> I think we're\n\n1031\n00:55:06,700 --> 00:55:08,970\nkind of winding down our objectives.\n\n1032\n00:55:08,970 --> 00:55:12,211\nThe last thing we have\nunder our security and\n\n1033\n00:55:12,211 --> 00:55:17,040\nCisco routers model here is the IPV-4 and\nIPV-6 transition.\n\n1034\n00:55:17,040 --> 00:55:19,670\nSo let's stop here and take a break and\n\n1035\n00:55:19,670 --> 00:55:23,060\nwhen we get back we'll tackle IPV-6,\nsound good?\n\n1036\n00:55:23,060 --> 00:55:23,610\n>> Sounds great.\n\n1037\n00:55:23,610 --> 00:55:24,887\n>> Ladies and gentlemen, stay tuned.\n\n1038\n00:55:24,887 --> 00:55:26,304\nWe'll be back in a few.\n\n1039\n00:55:26,304 --> 00:55:31,296\n[SOUND]\n\n1040\n00:55:34,407 --> 00:55:36,496\nOne of the cameras is crooked?\n\n1041\n00:55:36,496 --> 00:55:42,720\n>> No, Vivian posted,\ncamera looks crooked.\n\n1042\n00:55:42,720 --> 00:55:43,318\nI don't know.\n\n1043\n00:55:53,674 --> 00:55:56,878\nIt's gotta be the double cam.\n\n1044\n00:55:56,878 --> 00:55:57,435\n[INAUDIBLE].\n\n1045\n00:55:57,435 --> 00:55:58,936\n>> You know what?\nIt does look crooked.\n\n1046\n00:55:58,936 --> 00:56:01,280\nIf you look at the front of the podium.\n\n1047\n00:56:01,280 --> 00:56:03,290\n>> Yeah,\nit looks like we're leaning downhill.\n\n1048\n00:56:03,290 --> 00:56:04,510\nIt's suppose to be.\n\n1049\n00:56:04,510 --> 00:56:06,680\n>> Yeah that, no, this side.\n\n1050\n00:56:06,680 --> 00:56:07,700\nThis side is too low.\n\n1051\n00:56:07,700 --> 00:56:16,210\n>> Yeah that side, yeah low.\n\n1052\n00:56:16,210 --> 00:56:16,970\n>> Whoa!\n>> Other way.\n\n1053\n00:56:24,130 --> 00:56:25,440\nOh my gosh, I'm getting seasick.\n\n1054\n00:56:25,440 --> 00:56:26,420\n>> I know.\nIt's weird isn't it.\n\n1055\n00:56:26,420 --> 00:56:27,111\nIt's got that lens.\n\n1056\n00:56:27,111 --> 00:56:29,223\n>> [LAUGH].\n>> That's pretty good right there, right.\n\n1057\n00:56:29,223 --> 00:56:29,995\nYeah, that's good.\n\n1058\n00:56:29,995 --> 00:56:33,700\n>> It takes the front of that and\nbrings it way out.\n\n1059\n00:56:34,810 --> 00:56:35,600\n>> Yep.\nLock it in.\n\n1060\n00:56:35,600 --> 00:56:36,340\nThat looks good.\n>> Lock her.\n\n1061\n00:56:40,940 --> 00:56:43,398\nAnd then he kicks the cable,\nand it all goes crooked again.\n\n1062\n00:56:43,398 --> 00:56:48,266\n>> Yeah.\n\n1063\n00:56:48,266 --> 00:56:51,430\n>> [INAUDIBLE].\n\n1064\n00:56:51,430 --> 00:56:52,420\n>> No it did not.\n\n1065\n00:56:52,420 --> 00:56:53,785\n>> Did you pay your chat bill?\n\n1066\n00:56:53,785 --> 00:56:58,040\nOh.\nOh man you are cut off.\n\n1067\n00:57:05,350 --> 00:57:07,690\nAll right welcome back every body.\n\n1068\n00:57:07,690 --> 00:57:11,820\nSo the last thing we got to talk about\nhere in this little objective section\n\n1069\n00:57:11,820 --> 00:57:16,470\nis the IPv4 to IPv6 transition, right?\n\n1070\n00:57:16,470 --> 00:57:21,360\nUpgrading from the old IP addressing\nscheme to the new IP addressing scheme.\n\n1071\n00:57:21,360 --> 00:57:22,230\n>> Yeah, report that in IPv4,\n\n1072\n00:57:22,230 --> 00:57:26,610\nwe have a limited number of addresses\nthat we're actually able to use.\n\n1073\n00:57:26,610 --> 00:57:31,470\nAs of February of 2012 I think we\nactually don't have any new IP addresses.\n\n1074\n00:57:31,470 --> 00:57:33,340\nIn other words,\nnothing is held in reserve.\n\n1075\n00:57:33,340 --> 00:57:37,880\nSo there's no more IP version 4\naddresses to assign out for anybody.\n\n1076\n00:57:37,880 --> 00:57:40,010\nWhatever's actually out\nthere now is pretty much it.\n\n1077\n00:57:40,010 --> 00:57:43,700\nAnd so we do need to transition\nover to IPv6 is what we need to do.\n\n1078\n00:57:43,700 --> 00:57:46,290\nAnd there's some other\nbenefits behind that too.\n\n1079\n00:57:46,290 --> 00:57:48,510\n>> Yeah.\nAnd let just clarify real quick.\n\n1080\n00:57:48,510 --> 00:57:50,850\nWhen Ronnie says there's no more\naddresses to assign to anybody,\n\n1081\n00:57:50,850 --> 00:57:52,330\nthat doesn't mean that you can't get IP.\n\n1082\n00:57:52,330 --> 00:57:53,690\n>> Nope.\n>> Anybody can get IP addresses.\n\n1083\n00:57:53,690 --> 00:57:56,410\nIt means that the central registrar\n\n1084\n00:57:56,410 --> 00:57:59,560\nhas given out it's last pool\nto the regional registrars.\n\n1085\n00:57:59,560 --> 00:58:00,170\nAll right.\n\n1086\n00:58:00,170 --> 00:58:01,770\nSo in your country.\n\n1087\n00:58:01,770 --> 00:58:02,500\nIn your continent.\n\n1088\n00:58:02,500 --> 00:58:03,510\nWherever you are.\n\n1089\n00:58:03,510 --> 00:58:06,310\nThere are available IP's\nthat are waiting for you.\n\n1090\n00:58:06,310 --> 00:58:10,020\nBut if those ever get depleted, there's\nno more for them to go and get back.\n\n1091\n00:58:10,020 --> 00:58:13,040\nSo the central registrar is empty.\n\n1092\n00:58:13,040 --> 00:58:16,140\nThink of it as like, you go to the store\nand they got stuff on the shelf.\n\n1093\n00:58:16,140 --> 00:58:17,860\nBut then there's a warehouse\nsomewhere where they get if from.\n\n1094\n00:58:17,860 --> 00:58:18,750\nSo warehouse is empty.\n\n1095\n00:58:18,750 --> 00:58:21,200\n>> Yeah.\n>> But they still have stuff on the shelf.\n\n1096\n00:58:21,200 --> 00:58:21,940\n>> There you go.\n\n1097\n00:58:21,940 --> 00:58:23,755\n>> So\nanyhow it is a transition we need to make.\n\n1098\n00:58:23,755 --> 00:58:24,925\n>> Hm-mm.\nAnd the sooner you make it the better.\n\n1099\n00:58:24,925 --> 00:58:26,960\n>> Right.\nBut usually we're waiting on our ISP's,\n\n1100\n00:58:26,960 --> 00:58:30,071\nyou know our ISP's are kind of\nthe big bottle neck on getting IPV6.\n\n1101\n00:58:30,071 --> 00:58:30,865\n>> Hm-mm.\n\n1102\n00:58:30,865 --> 00:58:31,790\nSupport.\n\n1103\n00:58:31,790 --> 00:58:34,365\nYou'll also see some hesitancy or\nwhatever.\n\n1104\n00:58:34,365 --> 00:58:35,625\n>> Hm.\nFrom the networking vendors.\n\n1105\n00:58:35,625 --> 00:58:36,230\n>> Right.\n\n1106\n00:58:36,230 --> 00:58:39,120\n>> Cisco, for example,\nhuge supporter of IPv6.\n\n1107\n00:58:39,120 --> 00:58:40,860\nReally pushing it forward.\n\n1108\n00:58:40,860 --> 00:58:45,450\nThey have supported IPv6 on almost all\nof their equipment for like 7 years now.\n\n1109\n00:58:45,450 --> 00:58:46,010\n>> Yeah, easily.\n\n1110\n00:58:46,010 --> 00:58:46,830\n>> It's a while.\n\n1111\n00:58:46,830 --> 00:58:49,240\nSo really pushing forward on that.\n\n1112\n00:58:49,240 --> 00:58:51,750\nBut then they do something crazy\n\n1113\n00:58:51,750 --> 00:58:54,850\nlike don't bother to update\nthe CCP to support IPV6.\n\n1114\n00:58:54,850 --> 00:58:55,370\nAll right?\n\n1115\n00:58:55,370 --> 00:58:57,960\n>> Why would they do that?\n\n1116\n00:58:57,960 --> 00:58:59,360\n>> Yup and that's a very real thing.\n\n1117\n00:58:59,360 --> 00:59:02,820\nSo the Cisco Configuration Professional\ndoes not support IPV6.\n\n1118\n00:59:02,820 --> 00:59:05,890\nIt is built around IPV4 and that's that.\n\n1119\n00:59:05,890 --> 00:59:08,810\nAnd so as we're pretty limited there.\n\n1120\n00:59:08,810 --> 00:59:11,580\nAll the configuration we've done\nin this so far has been IPv4.\n\n1121\n00:59:11,580 --> 00:59:15,910\nSo if you want to do IPv6,\ntime to crack those knuckles and\n\n1122\n00:59:15,910 --> 00:59:18,160\nget into the command line and\nget it applied, right.\n\n1123\n00:59:18,160 --> 00:59:18,725\n>> Yeah.\n\n1124\n00:59:18,725 --> 00:59:24,715\n>> Now we've already covered the basics\nof IPv6 in the CCENT and CCNA shows.\n\n1125\n00:59:24,715 --> 00:59:25,255\n>> Right.\n>> So\n\n1126\n00:59:25,255 --> 00:59:29,595\nif you haven't worked with IPv6 at all, I\nencourage you to jump over to those shows.\n\n1127\n00:59:29,595 --> 00:59:31,665\n>> Yeah.\n>> And catch the basics.\n\n1128\n00:59:31,665 --> 00:59:34,935\nBut it's really pretty straight forward.\n\n1129\n00:59:34,935 --> 00:59:37,571\nWell apparently entering in my\npassword is not so straight forward.\n\n1130\n00:59:37,571 --> 00:59:38,071\n>> [LAUGH].\n>> There we go.\n\n1131\n00:59:39,150 --> 00:59:41,500\n>> You just go into an interface.\n\n1132\n00:59:41,500 --> 00:59:47,670\nI'll take my internal interface, and\ninstead of saying IP address and\n\n1133\n00:59:47,670 --> 00:59:52,150\nputting in an IPv4 address,\nyou would say IPv6\n\n1134\n00:59:53,850 --> 00:59:57,730\naddress and punch in an IPv6 address.\n\n1135\n00:59:57,730 --> 01:00:01,490\nSo I might do something like like this.\n\n1136\n01:00:03,460 --> 01:00:06,940\nAnd I'm gonna use a EY-64 address so\nI don't have to type so much, but\n\n1137\n01:00:06,940 --> 01:00:12,680\nbasically I'm adding a IPv6 network here,\nthe 2003 column one network.\n\n1138\n01:00:12,680 --> 01:00:14,380\nIt's a 64 bit network.\n\n1139\n01:00:14,380 --> 01:00:17,190\nAnd the remaining 64 bits of my\naddress I'm gonna let the router\n\n1140\n01:00:17,190 --> 01:00:18,430\nautomatically generate.\n\n1141\n01:00:18,430 --> 01:00:22,210\nAll right,\nI'll get into my other interface.\n\n1142\n01:00:22,210 --> 01:00:23,770\nWhich, I think might be down right now.\n\n1143\n01:00:23,770 --> 01:00:26,222\nBut, either way.\n\n1144\n01:00:26,222 --> 01:00:28,600\nI'll put this on a different network.\n\n1145\n01:00:29,980 --> 01:00:33,030\nAnd we'll do some UI64 action there, also.\n\n1146\n01:00:33,030 --> 01:00:33,830\nOkay?\n\n1147\n01:00:33,830 --> 01:00:38,120\nSo now if I do a show IPv6,\ninterface brief.\n\n1148\n01:00:40,080 --> 01:00:43,510\nI can see that I've got\nIPv6 addresses right there,\n\n1149\n01:00:43,510 --> 01:00:46,060\nmy interfaces have them\nthey're ready to function.\n\n1150\n01:00:46,060 --> 01:00:50,980\nAnd if I do a show IPv6 route\nthere's my IPv6 routing table, and\n\n1151\n01:00:50,980 --> 01:00:53,050\noh actually you know what\nI have a bit of an issue.\n\n1152\n01:00:53,050 --> 01:00:55,462\nOh I forgot something very important.\n\n1153\n01:00:55,462 --> 01:00:57,051\n>> [CROSSTALK].\n\n1154\n01:00:57,051 --> 01:00:58,802\n>> [LAUGH].\n>> Even though your router may well\n\n1155\n01:00:58,802 --> 01:01:00,570\nsupport IPv6.\n\n1156\n01:01:00,570 --> 01:01:04,180\n>> The odds are that IPv6 routing,\nis turned off.\n\n1157\n01:01:04,180 --> 01:01:06,630\nAnd so\nI need to add one more command here.\n\n1158\n01:01:06,630 --> 01:01:08,260\n>> Are you gonna cache that routing?\n\n1159\n01:01:09,410 --> 01:01:11,500\n>> Oh you know what,\nactually I'm wrong, Ronnie.\n\n1160\n01:01:11,500 --> 01:01:13,440\nSo, it must have been on my default.\n\n1161\n01:01:13,440 --> 01:01:16,170\nI'm not seeing the other one\nbecause the interface was up down.\n\n1162\n01:01:16,170 --> 01:01:17,000\nI noticed that up here.\n\n1163\n01:01:17,000 --> 01:01:19,615\nI have a loop back plugin there right now,\nand it's apparently not working.\n\n1164\n01:01:19,615 --> 01:01:25,539\nSo alright,\n\n1165\n01:01:25,539 --> 01:01:30,144\nthat's\n\n1166\n01:01:30,144 --> 01:01:36,690\ngonna kind of\n\n1167\n01:01:36,690 --> 01:01:42,690\ntrim that down isn't it.\n\n1168\n01:01:42,690 --> 01:01:47,040\nThe reason is,\nall that stuff we did before the break,\n\n1169\n01:01:47,040 --> 01:01:50,120\nsecuring our router,\nwas all securing IPv4.\n\n1170\n01:01:51,590 --> 01:01:58,330\nIf you have IPv6 turned on also,\nit is unsecured just like IPv4 was.\n\n1171\n01:01:58,330 --> 01:02:01,100\nNow I've got a gaping hole in my security.\n\n1172\n01:02:01,100 --> 01:02:01,730\n>> Yeah.\n\n1173\n01:02:01,730 --> 01:02:02,770\n>> All right, and so\n\n1174\n01:02:02,770 --> 01:02:08,230\nwhat we need to is we need to revisit\nall the stuff that we just did.\n\n1175\n01:02:08,230 --> 01:02:14,580\nVTY security, the HTTP security, all\nthat other stuff and secure it for IPv6.\n\n1176\n01:02:14,580 --> 01:02:18,660\n>> Yeah, so that includes things like\nthe access list that we talked about and\n\n1177\n01:02:18,660 --> 01:02:20,910\neverything else that we\nactually had going on there.\n\n1178\n01:02:20,910 --> 01:02:22,650\n>> So, remember that for\n\n1179\n01:02:22,650 --> 01:02:26,180\nus when we mirrored IPv6 a lot of times\npeople get a little bit confused.\n\n1180\n01:02:26,180 --> 01:02:27,650\nWow, that changes everything.\n\n1181\n01:02:27,650 --> 01:02:31,960\nIt's really only changing the addressing\npart of the entirety of the TCIP protocol.\n\n1182\n01:02:31,960 --> 01:02:33,925\nIt's not changing\neverything everything else.\n\n1183\n01:02:33,925 --> 01:02:36,015\nSo we still have to actually\nput everything else on there in\n\n1184\n01:02:36,015 --> 01:02:39,205\nterms of security that we normally\nwould on any other router.\n\n1185\n01:02:39,205 --> 01:02:39,725\n>> Yeah.\n\n1186\n01:02:39,725 --> 01:02:43,185\nNow some of it,\nthings like transport in SSH, right?\n\n1187\n01:02:43,185 --> 01:02:46,430\nWe did that on the VTY lines,\nto restrict just to SSH.\n\n1188\n01:02:46,430 --> 01:02:47,100\n>> That's fine.\n\n1189\n01:02:47,100 --> 01:02:50,570\nSSH is the same on IPv4 and\nIPv6 so that's in business.\n\n1190\n01:02:50,570 --> 01:02:53,105\nSo the basic commands we did,\nthose are fine.\n\n1191\n01:02:53,105 --> 01:02:55,520\nUsernames and passwords,\nthat stuff is fine.\n\n1192\n01:02:55,520 --> 01:02:56,400\nBut the access list.\n\n1193\n01:02:56,400 --> 01:02:58,140\n>> Yeah.\n>> Those are the big thing.\n\n1194\n01:02:58,140 --> 01:03:03,250\nAnd so I really need to take a look at the\naccess list so that I have in place these\n\n1195\n01:03:03,250 --> 01:03:08,070\nones that the system created for me,\nand I need to rebuild those for IPv6.\n\n1196\n01:03:08,070 --> 01:03:10,780\nSo, if I take access list one,\n\n1197\n01:03:10,780 --> 01:03:15,910\nwhere it's just permitting my internal\nnetwork, I would need to rewrite that.\n\n1198\n01:03:15,910 --> 01:03:23,240\nI would need to say IPv6 access dash\nlist and IPv6 only does named ACL's.\n\n1199\n01:03:23,240 --> 01:03:26,800\nIt doesn't do numbered ACL's,\nlike we do a question mark here.\n\n1200\n01:03:26,800 --> 01:03:28,370\nOne's a word.\n\n1201\n01:03:28,370 --> 01:03:32,500\nAnd so, you know, the source based one,\nwhat were we using?\n\n1202\n01:03:32,500 --> 01:03:35,920\nThat one was just for\nthe HTTP access, right?\n\n1203\n01:03:35,920 --> 01:03:44,000\nSo, I might call this one\nthe http-ipv6-acl, all right.\n\n1204\n01:03:44,000 --> 01:03:47,579\nAnd then I can come in here and\n\n1205\n01:03:47,579 --> 01:03:53,403\nI can save permits, ip 2003:1::0.\n\n1206\n01:03:53,403 --> 01:03:55,794\nOops, did I get my syntax.\n\n1207\n01:03:55,794 --> 01:03:58,116\n>> IPv6.\n\n1208\n01:03:58,116 --> 01:04:03,558\n[CROSSTALK] In the ACL is actually permit\nIP, and then I need to say permit IP,\n\n1209\n01:04:03,558 --> 01:04:07,395\noh, I didn't do my slash,\nso there's the problem.\n\n1210\n01:04:07,395 --> 01:04:12,530\nSo I need to say 2003 colon\none colon colon zero slash 64.\n\n1211\n01:04:12,530 --> 01:04:18,100\nThere we go, we're going to any,\nand that's really\n\n1212\n01:04:18,100 --> 01:04:23,400\nall I need there I could turn on logging\nif I wanted, but I'll leave it there.\n\n1213\n01:04:23,400 --> 01:04:26,070\nSo that creates that ACL.\n\n1214\n01:04:26,070 --> 01:04:31,750\nAnd then, when we do,\nwell normally you do IP,\n\n1215\n01:04:31,750 --> 01:04:36,800\nHTTP, and actually I think you still have\nto configure it that way, don't you?\n\n1216\n01:04:36,800 --> 01:04:37,300\nLet's see.\n\n1217\n01:04:41,809 --> 01:04:43,097\nLet me just check here real quick.\n\n1218\n01:04:43,097 --> 01:04:44,712\nThere's an access class.\n\n1219\n01:04:47,416 --> 01:04:52,740\nAnd you know this particular\nIOS might not support it.\n\n1220\n01:04:52,740 --> 01:04:55,770\nSo the web server might not,\nthis is something you do bump into.\n\n1221\n01:04:55,770 --> 01:04:59,530\nIs where the web server might not be\nsupported on IPV6 in your particular IOS.\n\n1222\n01:04:59,530 --> 01:05:00,680\nThat's how this one is.\n\n1223\n01:05:00,680 --> 01:05:01,900\nIf I do IPV6?\n\n1224\n01:05:01,900 --> 01:05:05,850\nI'll see like I don't\nhave HTTP in my list.\n\n1225\n01:05:05,850 --> 01:05:07,610\nSo I'm not gonna be able\nto secure it that way.\n\n1226\n01:05:07,610 --> 01:05:10,310\nI'll have to secure it\nwith the interface ACL.\n\n1227\n01:05:10,310 --> 01:05:14,250\nWhich is one of the other ways\nthat the default config did.\n\n1228\n01:05:15,550 --> 01:05:17,019\nLet's see if the VTYs are the same way.\n\n1229\n01:05:21,745 --> 01:05:22,627\nHere, good.\n\n1230\n01:05:22,627 --> 01:05:26,105\nSo IPv6 access-class and\nthen we specify that name,\n\n1231\n01:05:26,105 --> 01:05:30,260\ninstead of a number like the other\none did, we would do the name.\n\n1232\n01:05:30,260 --> 01:05:32,080\nAnd so, wait, what did I call that one?\n\n1233\n01:05:32,080 --> 01:05:35,150\nI think it called it http,\nbut we could use it here.\n\n1234\n01:05:35,150 --> 01:05:38,170\nI think I called it that, right?\n\n1235\n01:05:38,170 --> 01:05:39,720\nand so we have attach in.\n\n1236\n01:05:39,720 --> 01:05:43,720\nSo that's gonna take that IPV6 access\nlist and attach it to my VTYs.\n\n1237\n01:05:43,720 --> 01:05:48,255\nNow the only people who will\nbe able to SSH in using IPV6,\n\n1238\n01:05:48,255 --> 01:05:52,950\nwill have to pass through that ACL and\nthat's limiting it in my case,\n\n1239\n01:05:52,950 --> 01:05:57,330\nfor the 2003 colon one,\ncolon colon zero slash 64 network.\n\n1240\n01:05:57,330 --> 01:05:57,840\n>> Yeah.\n\n1241\n01:05:57,840 --> 01:06:00,830\n>> Alright, so pretty easy to do.\n\n1242\n01:06:00,830 --> 01:06:02,540\nWe do have to rewrite our ACLs.\n\n1243\n01:06:02,540 --> 01:06:07,300\nWe need to rewrite the to support the IPB6\naddresses and all that for our network.\n\n1244\n01:06:07,300 --> 01:06:12,630\nIf you don't do it though, if you leave\noff, it is a huge whole in your security.\n\n1245\n01:06:12,630 --> 01:06:16,330\nAn attacker coming in via IPB6 will\nbasically have unrestricted access and\n\n1246\n01:06:16,330 --> 01:06:18,320\nthen they can try and\nbrute force your passwords.\n\n1247\n01:06:19,590 --> 01:06:21,670\nSo, definitely a big deal there.\n\n1248\n01:06:21,670 --> 01:06:25,300\nAnd again, if you haven't worked with\nIPv6, jump on over to the CCNT and\n\n1249\n01:06:25,300 --> 01:06:26,670\nCCNA shows.\n\n1250\n01:06:26,670 --> 01:06:28,680\nWe cover them in there and\n\n1251\n01:06:28,680 --> 01:06:32,035\nkind of cover the basics of how\nthe addresses work and so on.\n\n1252\n01:06:32,035 --> 01:06:34,265\nFrom a security stand point, though,\n\n1253\n01:06:34,265 --> 01:06:38,175\nthe main thing we need to remember is that\nthey do have a separate set of ACLs, and\n\n1254\n01:06:38,175 --> 01:06:42,215\nthat IPv6 ACLs are always named,\nnot numbered.\n\n1255\n01:06:42,215 --> 01:06:45,205\nAnd so we have to remember that.\n\n1256\n01:06:45,205 --> 01:06:47,465\nYou know one of the frustrating things for\nme Ronnie,\n\n1257\n01:06:47,465 --> 01:06:53,080\nis sometimes the router let's\ngo back to my machine here.\n\n1258\n01:06:53,080 --> 01:06:56,270\nIf I go into the vty's,\nand I do access-class.\n\n1259\n01:06:56,270 --> 01:06:59,190\nAnd I specify an access-class.\n\n1260\n01:06:59,190 --> 01:07:03,090\nSee how it will let me do a numbered or\na named ACL?\n\n1261\n01:07:03,090 --> 01:07:09,660\nBut then if you go to ip http,\nAccess-class.\n\n1262\n01:07:09,660 --> 01:07:11,420\n>> It's only a number.\n>> It only does a number.\n\n1263\n01:07:11,420 --> 01:07:12,160\nRight.\n\n1264\n01:07:12,160 --> 01:07:15,900\nSometimes the router will accept\nnumbered ACLs, sometimes named.\n\n1265\n01:07:15,900 --> 01:07:17,110\nIt's really confusing.\n\n1266\n01:07:17,110 --> 01:07:18,370\nAnd it's really frustrating.\n\n1267\n01:07:18,370 --> 01:07:22,640\nAnd so, I almost always use numbers\nwith IPv4 ACLs because of that.\n\n1268\n01:07:22,640 --> 01:07:25,180\nIn IPv6, they're always named.\n\n1269\n01:07:25,180 --> 01:07:26,040\n>> Right.\n>> And so\n\n1270\n01:07:26,040 --> 01:07:27,600\nyou've got that kinda going for you.\n\n1271\n01:07:27,600 --> 01:07:28,609\nIt makes life a little bit easier.\n\n1272\n01:07:30,460 --> 01:07:31,210\nAlright.\n\n1273\n01:07:31,210 --> 01:07:34,820\nSo I think that's really all we\nneed to worry about with IPV6,\n\n1274\n01:07:34,820 --> 01:07:36,380\ncan you think anything else Ronnie?\n\n1275\n01:07:36,380 --> 01:07:37,700\n>> No, its really about controlling that,\n\n1276\n01:07:37,700 --> 01:07:42,250\njust remember we need to set security\non both if we're gonna be using both.\n\n1277\n01:07:42,250 --> 01:07:46,480\nThe hope is of course in the futures\nthat will transition out of IPV 4 and\n\n1278\n01:07:46,480 --> 01:07:49,050\nmove completely in the IPV 6 but\nthis is a good time for\n\n1279\n01:07:49,050 --> 01:07:54,100\nyou to remember, additional security needs\nto be done if you're gonna be using IP6.\n\n1280\n01:07:54,100 --> 01:07:55,820\n>> All right, well, let's us know,\n\n1281\n01:07:55,820 --> 01:07:57,990\nI think that pretty much wraps\nup what we've done on this one.\n\n1282\n01:07:57,990 --> 01:08:02,000\nPlease remember if you have any\nquestions live during the sow you can\n\n1283\n01:08:02,000 --> 01:08:05,380\ngo to itprotv./live,\nwe got a chat box right beneath the video,\n\n1284\n01:08:05,380 --> 01:08:08,190\nyou can post your questions,\nwe monitor and answer during the show.\n\n1285\n01:08:08,190 --> 01:08:10,070\nIf you have questions after thow show,\n\n1286\n01:08:10,070 --> 01:08:13,790\nat the top of every one of our webpages\nthere's a link that says Q&A, you can\n\n1287\n01:08:13,790 --> 01:08:18,390\nclick on that link, post your questions,\nand we'll monitor and get back to you.\n\n1288\n01:08:18,390 --> 01:08:20,530\nIt's a good way to ask questions\neven when we're not live and\n\n1289\n01:08:20,530 --> 01:08:22,600\nto make sure that you're not\nleft there scratching your head.\n\n1290\n01:08:22,600 --> 01:08:24,490\nIf something's uncertain, ask away.\n\n1291\n01:08:24,490 --> 01:08:26,460\nWe love to answer those things.\n\n1292\n01:08:26,460 --> 01:08:29,350\nSo definitely take advantage of that.\n\n1293\n01:08:29,350 --> 01:08:30,920\nSigning out for ITProTV.\n\n1294\n01:08:30,920 --> 01:08:31,720\nI'm Don Pezet.\n\n1295\n01:08:31,720 --> 01:08:32,940\n>> And I'm Ronnie Wong.\n\n1296\n01:08:32,940 --> 01:08:34,237\n>> And we'll see you next time.\n\n1297\n01:08:34,237 --> 01:08:44,237\n[MUSIC]\n\n",
          "vimeoId": "85761707"
        }
      ],
      "title": "Security and Cisco Routers"
    },
    {
      "episodes": [
        {
          "description": "Setting up Authentication Authorization and Accounting (AAA) is good for central management and managing credentials in a larger enterprise environment. Viewers will see demonstrations of implementing authentication authorization and accounting (AAA) on a Cisco router using the command-line interface and the Cisco Configuration Professional, as well as configuring a Cisco ASA to use RADIUS.",
          "length": "3791",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/iins/004-Implementing-AAA.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/iins/004-Implementing-AAA-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/iins/004-Implementing-AAA-sm.jpg",
          "title": "Implementing AAA",
          "transcript": "1\n00:00:00,170 --> 00:00:10,170\n[MUSIC]\n\n2\n00:00:15,500 --> 00:00:23,920\n[SOUND]\n\n3\n00:00:23,920 --> 00:00:33,800\n[MUSIC].\n\n4\n00:00:33,800 --> 00:00:35,500\n>> Good morning,\ngood afternoon and good evening.\n\n5\n00:00:35,500 --> 00:00:36,580\nWelcome back.\n\n6\n00:00:36,580 --> 00:00:37,590\nTo another episode of ITPro TV.\n\n7\n00:00:37,590 --> 00:00:40,690\nI'm your host Don Pezet, there is\nRonnie Wong, how's it going Ronnie?\n\n8\n00:00:40,690 --> 00:00:43,680\nIt's going swell today because I got\nto attend the Grammy's last night with\n\n9\n00:00:43,680 --> 00:00:47,516\nMiley Cyrus' tickets since she didn't go.\n\n10\n00:00:47,516 --> 00:00:49,610\nThere you go.\n\n11\n00:00:49,610 --> 00:00:50,740\nThere's a it's good.\n\n12\n00:00:50,740 --> 00:00:51,550\n>> Nice and coiffed.\n\n13\n00:00:53,570 --> 00:00:57,750\n>> Alright well we got another INS\nshow on the books for today and\n\n14\n00:00:57,750 --> 00:01:02,640\nwe're gonna be jumping into objective\nthree, which is AAA on Cisco devices.\n\n15\n00:01:02,640 --> 00:01:07,300\nSo If we get a flat tire,\nyeah you know, you run out of gas,\n\n16\n00:01:07,300 --> 00:01:10,960\nyou need more oil, you just call them\nup and they take care of your routers.\n\n17\n00:01:10,960 --> 00:01:13,840\n>> As long as you pay them your\npremium service fee you'll be okay.\n\n18\n00:01:13,840 --> 00:01:16,300\n>> Do you get a little foil\nsticker to put on your router?\n\n19\n00:01:16,300 --> 00:01:17,685\n>> I guess you can.\n\n20\n00:01:17,685 --> 00:01:18,700\n>> [LAUGH]\n>> There we go.\n\n21\n00:01:18,700 --> 00:01:19,570\n[LAUGH]\n>> Well so AAA,\n\n22\n00:01:19,570 --> 00:01:25,000\noutside of the automotive industry and\nin the router world actually stands for\n\n23\n00:01:25,000 --> 00:01:28,690\nauthentication authorization and\naccounting.\n\n24\n00:01:28,690 --> 00:01:35,980\nAnd while we mention it the CCENT and\nCCNA shows, we never really implement it.\n\n25\n00:01:35,980 --> 00:01:36,970\nToday we change that.\n\n26\n00:01:36,970 --> 00:01:37,720\n>> Yeah.\n\n27\n00:01:37,720 --> 00:01:40,890\nRemember that with just\nbasic old style router and\n\n28\n00:01:40,890 --> 00:01:45,240\nswitch security, You can simply log\nin by just providing a password.\n\n29\n00:01:45,240 --> 00:01:47,990\nWell, the problem that we have with that\nagain is that it's not very secure, right?\n\n30\n00:01:47,990 --> 00:01:51,420\nOnce somebody guesses your password,\nyou're in, and that's pretty much it.\n\n31\n00:01:51,420 --> 00:01:52,260\nBut with Triple A,\n\n32\n00:01:52,260 --> 00:01:56,180\nit gives us the ability to actually\nimplement those three ideas here.\n\n33\n00:01:56,180 --> 00:02:00,790\nThe authentication, [LAUGH]\nthe authorization, and the accounting.\n\n34\n00:02:00,790 --> 00:02:03,430\nBut even on top of that,\nit gives us different methods we can do.\n\n35\n00:02:03,430 --> 00:02:06,810\nWhether we wanna implement that and\ndraw from a local security database or\n\n36\n00:02:06,810 --> 00:02:09,790\nwhether we wanna actually off\nload that to another service.\n\n37\n00:02:09,790 --> 00:02:11,370\n>> All right, let's do a quick refresher.\n\n38\n00:02:11,370 --> 00:02:13,940\nAll right, so, authentication\n\n39\n00:02:13,940 --> 00:02:18,780\nthat is the act of verifying that\nsomebody is who they say they are, right.\n\n40\n00:02:18,780 --> 00:02:22,670\nSo, when I walk up to my house at the end\nof the night and I go to unlock the door.\n\n41\n00:02:22,670 --> 00:02:24,390\nI have a key, I put it in the lock.\n\n42\n00:02:24,390 --> 00:02:25,590\nAnd I turn the lock.\n\n43\n00:02:25,590 --> 00:02:26,440\nI'm authenticating,\n\n44\n00:02:26,440 --> 00:02:30,430\nI'm proving that I should be there\nbecause I have the right key.\n\n45\n00:02:30,430 --> 00:02:34,050\nWhen you log into a Cisco router,\nmaybe it's just your password, or\n\n46\n00:02:34,050 --> 00:02:36,220\nmaybe it's a username and password, but\n\n47\n00:02:36,220 --> 00:02:39,560\nit's that combination of credentials that\nproves that you are who you say you are.\n\n48\n00:02:39,560 --> 00:02:41,270\nThat is authentication.\n\n49\n00:02:41,270 --> 00:02:44,300\n>> When we take a look at\nthe idea of authorization now.\n\n50\n00:02:44,300 --> 00:02:49,170\nNow authorization for us It is\nactually saying what you can do, or\n\n51\n00:02:49,170 --> 00:02:52,390\nwhere you should be able\nto be at that point, right?\n\n52\n00:02:52,390 --> 00:02:53,780\nSo when we talk about authorization,\n\n53\n00:02:53,780 --> 00:02:56,890\nwhat am I allowed to be\nable to do at this point.\n\n54\n00:02:56,890 --> 00:03:00,930\nSo once again, that can be addressed\nby setting up different levels of\n\n55\n00:03:00,930 --> 00:03:03,290\nthe user passwords and stuff like that.\n\n56\n00:03:03,290 --> 00:03:08,440\nAnd getting them access to certain\ndifferent configurations that we have to.\n\n57\n00:03:08,440 --> 00:03:11,537\n>> An analogy might be\nlike a valet key on a car.\n\n58\n00:03:11,537 --> 00:03:12,580\nMine 's not fancy enough.\n\n59\n00:03:12,580 --> 00:03:15,450\n>> Yeah. Yeah. >> But some people have\ncars that are a little more fancy, and\n\n60\n00:03:15,450 --> 00:03:17,550\nthey have a valet key, right?\n\n61\n00:03:17,550 --> 00:03:21,610\nSo a normal key that will start the car,\nopen the trunk and do all that stuff.\n\n62\n00:03:21,610 --> 00:03:24,640\nAnd then they have a valet key that will\njust open the door and start the car.\n\n63\n00:03:24,640 --> 00:03:27,680\nBut it won't open the trunk, or\nit won't open the glovebox, right?\n\n64\n00:03:27,680 --> 00:03:29,280\nThat's like authorization.\n\n65\n00:03:29,280 --> 00:03:32,410\nIf you have the valet key, you're allowed\nto get in the car and start it, right?\n\n66\n00:03:32,410 --> 00:03:34,700\nYou're authorized to do those activities,\nbut\n\n67\n00:03:34,700 --> 00:03:35,960\nyou're not authorized to open the trunk.\n\n68\n00:03:35,960 --> 00:03:37,320\n>> Everything else.\n>> Same thing on a router.\n\n69\n00:03:37,320 --> 00:03:38,970\nYou might have a help desk person,\n\n70\n00:03:38,970 --> 00:03:43,510\nwho you want to be able to do,\nshow commands and troubleshooting.\n\n71\n00:03:43,510 --> 00:03:46,200\nBut you don't want them to be\nable to do configurations, right.\n\n72\n00:03:46,200 --> 00:03:48,200\nSo, they're authenticated.\n\n73\n00:03:48,200 --> 00:03:49,800\nWe know they're help desk.\n\n74\n00:03:49,800 --> 00:03:53,220\nAnd then because they're help desk they're\nauthorized to perform certain tasks and\n\n75\n00:03:53,220 --> 00:03:54,490\nnot others.\n\n76\n00:03:54,490 --> 00:03:56,900\nAnd then the last thing\nthat we have is accounting.\n\n77\n00:03:56,900 --> 00:04:00,040\nAnd accounting is the most overlooked\nof the three because it's not\n\n78\n00:04:00,040 --> 00:04:01,920\nessential to a lot of organizations.\n\n79\n00:04:01,920 --> 00:04:07,220\nBut accounting is keeping a record\nof who did what when, right?\n\n80\n00:04:07,220 --> 00:04:12,100\nSo there's a running tally, who logged in,\nhow long did they stay logged in for?\n\n81\n00:04:12,100 --> 00:04:14,090\nWhat did they do while\nthey were logged in?\n\n82\n00:04:14,090 --> 00:04:15,220\nThat recording,\n\n83\n00:04:15,220 --> 00:04:19,740\nthat record of their activities is what\nthe accounting piece of triple A does.\n\n84\n00:04:19,740 --> 00:04:21,080\n>> Yep.\n\n85\n00:04:21,080 --> 00:04:25,220\n>> All right, so on our routers,\nwhen we get them set up like we did in\n\n86\n00:04:25,220 --> 00:04:29,460\nthe last show and the show before,\n>> We're doing just basic setups and\n\n87\n00:04:29,460 --> 00:04:31,350\nwe turned on triple A.\n\n88\n00:04:31,350 --> 00:04:35,570\nIf you'll remember, we did AAA new-model,\ntriple A new model.\n\n89\n00:04:35,570 --> 00:04:36,500\nAnd that tells the router,\n\n90\n00:04:36,500 --> 00:04:40,380\nhey, when you authenticate somebody,\nwe need a user name and a password.\n\n91\n00:04:40,380 --> 00:04:42,020\nAnd we were storing that user name and\n\n92\n00:04:42,020 --> 00:04:46,910\npassword right there on the router in\nwhat's called the local user database.\n\n93\n00:04:46,910 --> 00:04:52,520\nNow the problem with the local user\ndatabase is, well, that it's local right?\n\n94\n00:04:52,520 --> 00:04:55,770\nSo if you have one router,\nthat's not a big deal right?\n\n95\n00:04:55,770 --> 00:04:57,390\nBut what if you have a 1000 routers?\n\n96\n00:04:57,390 --> 00:04:59,130\nAll right, if I have a 1000 routers and\n\n97\n00:04:59,130 --> 00:05:03,260\nI hire a new network admin,\nwell I've got two choices.\n\n98\n00:05:03,260 --> 00:05:06,290\nChoice number one,\nwe could share user names and passwords.\n\n99\n00:05:06,290 --> 00:05:09,030\nSo all the network admins could\njust share the same username and\n\n100\n00:05:09,030 --> 00:05:10,850\npassword across all my routers, right?\n\n101\n00:05:10,850 --> 00:05:12,540\nThen when I added a new network admin,\n\n102\n00:05:12,540 --> 00:05:16,240\nI can just tell them the new user name and\npassword.\n\n103\n00:05:16,240 --> 00:05:18,400\nBut, what if I fire a network admin?\n\n104\n00:05:18,400 --> 00:05:22,160\nWell, they know the user name and\npassword to all my equipment.\n\n105\n00:05:22,160 --> 00:05:26,360\nSo if I want to change it, I've now got\nto go to a 1000 devices to change it.\n\n106\n00:05:26,360 --> 00:05:28,960\nAnd I've got to tell all the other\nnetwork admins, hey guys,\n\n107\n00:05:28,960 --> 00:05:30,340\nremember that shared user name?\n\n108\n00:05:30,340 --> 00:05:32,600\nCan't use it anymore,\nnow it's this new name.\n\n109\n00:05:32,600 --> 00:05:33,260\n>> Yeah.\n\n110\n00:05:33,260 --> 00:05:37,190\nSo this is where triple a really does\nhelp us because what we can do with it\n\n111\n00:05:37,190 --> 00:05:41,620\nis that instead of pointing it to each and\nevery local router triple a allows us then\n\n112\n00:05:41,620 --> 00:05:44,560\nto redirect it to an actual\nserver that will help us do that.\n\n113\n00:05:44,560 --> 00:05:48,570\nAnd we're gonna talk about radius and\nbriefly describe PACX as well\n\n114\n00:05:48,570 --> 00:05:51,150\nin terms of how we actual handle\nthat management of those things.\n\n115\n00:05:51,150 --> 00:05:53,980\n>> Yeah, and\nthe cool part is instead of using a local\n\n116\n00:05:53,980 --> 00:05:56,920\ndatabase on the router\n>> We can use not just a remote one like\n\n117\n00:05:56,920 --> 00:05:57,420\nRonnie said but\n\n118\n00:05:57,420 --> 00:06:00,980\nwe can use very specific one like if\nyou have a Windows active directory\n\n119\n00:06:00,980 --> 00:06:05,210\nenvironment which a lot of place do,\nyou can use that as your user database.\n\n120\n00:06:05,210 --> 00:06:07,470\nSo that means if I already\nhave a username and\n\n121\n00:06:07,470 --> 00:06:11,840\npassword in the Windows world,\nI can use that on the routers right.\n\n122\n00:06:11,840 --> 00:06:14,320\nAnd every user can have their own account.\n\n123\n00:06:14,320 --> 00:06:15,940\nAnd if we need to change a password,\n\n124\n00:06:15,940 --> 00:06:18,850\nmaybe I'm worried that my password got\ncompromised so I want to change it.\n\n125\n00:06:18,850 --> 00:06:20,750\nI can go and change it in Windows and\n\n126\n00:06:20,750 --> 00:06:24,800\nbecause the routers are authenticating\nagainst that, when I change it in Windows\n\n127\n00:06:24,800 --> 00:06:28,210\nit's effectively changed for\nall of the other devices out there.\n\n128\n00:06:28,210 --> 00:06:31,030\nIt makes central management very,\nvery easy.\n\n129\n00:06:31,030 --> 00:06:34,950\nYou hire a new network admin, well you\njust set them up on the radius server,\n\n130\n00:06:34,950 --> 00:06:37,710\nthe AAA server, and then pow,\nthey're a network admin.\n\n131\n00:06:37,710 --> 00:06:41,500\nAnd when they get fired,\nif they get fired, you just disable their\n\n132\n00:06:41,500 --> 00:06:44,260\none account and everybody else\ndoesn't have to make a change, right?\n\n133\n00:06:44,260 --> 00:06:48,550\nSo in a small environment, or\neven a medium sized business,\n\n134\n00:06:48,550 --> 00:06:50,210\nthis is probably not something\nyou are going to need.\n\n135\n00:06:50,210 --> 00:06:52,440\nYou are not going to have enough\nnetwork admins to need it.\n\n136\n00:06:52,440 --> 00:06:56,280\nBut in a larger enterprise environment,\nthis is a requirement.\n\n137\n00:06:56,280 --> 00:06:57,990\nYou really got to have this.\n\n138\n00:06:57,990 --> 00:07:01,010\nBecause it's just too much of a hassle\ntrying to manage credentials for\n\n139\n00:07:01,010 --> 00:07:03,130\na bunch of people across\na large amount of equipment.\n\n140\n00:07:03,130 --> 00:07:04,930\n>> Yeah, consistency is key and\n\n141\n00:07:04,930 --> 00:07:08,880\nthis really helps us across\nmultiple devices here.\n\n142\n00:07:08,880 --> 00:07:14,010\n>> So Ronnie, looking at the objectives,\nthis is all objective 3.0 and\n\n143\n00:07:14,010 --> 00:07:19,410\nwhat they do is they mention triple a and\nthen they mention configuring it right.\n\n144\n00:07:19,410 --> 00:07:22,230\nBut in order to configure it we\nhave to connect to a server so\n\n145\n00:07:22,230 --> 00:07:26,460\nI would like to skip ahead and\ntalk about the two kinds of servers.\n\n146\n00:07:26,460 --> 00:07:31,090\nFirst, we've kind of already jumped even\nfurther because we've done the review of\n\n147\n00:07:31,090 --> 00:07:33,310\nauthentication, authorization,\nand accounting.\n\n148\n00:07:33,310 --> 00:07:36,040\nSo let's talk about these servers.\n\n149\n00:07:36,040 --> 00:07:40,730\nNow, when I talk about these servers\nI always like to draw a little chart.\n\n150\n00:07:40,730 --> 00:07:46,199\nAnd I've done this before, and\na smarter me would have saved it,\n\n151\n00:07:46,199 --> 00:07:50,880\nbut let me Let me just fire\nup something here real quick.\n\n152\n00:07:50,880 --> 00:07:55,750\nAll right so when we configure AAA we\nreally got a couple of protocols to pick\n\n153\n00:07:55,750 --> 00:08:01,340\nfrom so we got RADIUS and we've got TACACS\nand I'm going to go ahead and put TACACS+.\n\n154\n00:08:01,340 --> 00:08:04,130\nRonnie I can never remember\nwhat these stand for, right.\n\n155\n00:08:04,130 --> 00:08:07,430\nSo like radius is remote access dial in.\n\n156\n00:08:07,430 --> 00:08:08,610\n>> User service.\n\n157\n00:08:08,610 --> 00:08:09,780\n>> Yeah I was close.\n\n158\n00:08:09,780 --> 00:08:12,560\n>> Yeah it's either\nremote authentication or\n\n159\n00:08:12,560 --> 00:08:15,720\nremote access dial in\nusers one of the two.\n\n160\n00:08:15,720 --> 00:08:16,815\n>> Alright and TACACS.\n\n161\n00:08:16,815 --> 00:08:17,590\n>> [LAUGH].\n\n162\n00:08:17,590 --> 00:08:20,250\n>> I don't even know that one,\ndo you know what it stand for?\n\n163\n00:08:20,250 --> 00:08:25,634\n>> Terminal access configuration\nsomething [LAUGH] [CROSSTALK].\n\n164\n00:08:25,634 --> 00:08:27,600\n>> I don't remember.\n\n165\n00:08:27,600 --> 00:08:29,490\n>> Let's look it up real quick.\n\n166\n00:08:29,490 --> 00:08:30,420\nJust, real quick.\n\n167\n00:08:30,420 --> 00:08:33,970\nThere's two competing protocols out there,\nRadius and TACACS.\n\n168\n00:08:33,970 --> 00:08:36,750\nAnd both of them have\nbeen around a long time.\n\n169\n00:08:36,750 --> 00:08:40,210\nHere we go, terminal access\ncontroller access control system.\n\n170\n00:08:40,210 --> 00:08:41,180\n>> Who would have guessed.\n\n171\n00:08:41,180 --> 00:08:42,380\n>> What they stand for doesn't matter.\n\n172\n00:08:42,380 --> 00:08:44,380\nOn the exam,\nthey're not really gonna hit on that.\n\n173\n00:08:44,380 --> 00:08:49,780\n>> The names radius and TACACS actually\noriginate from back in the dial-up days.\n\n174\n00:08:49,780 --> 00:08:51,560\nRight.\nThe dial-up phone service.\n\n175\n00:08:51,560 --> 00:08:53,790\nAnd so the names are very antiquated.\n\n176\n00:08:53,790 --> 00:08:57,980\nAnd the way that we use them now\nusually has nothing to do with dial-up.\n\n177\n00:08:57,980 --> 00:09:02,000\nYou probably don't have dial in digital or\nanalogue lines in your environment anyway.\n\n178\n00:09:02,000 --> 00:09:03,930\nSo that's why we don't worry\nabout what the names stand for.\n\n179\n00:09:03,930 --> 00:09:07,170\nBut we do remember Radius and TACACS.\n\n180\n00:09:07,170 --> 00:09:12,960\nThe big difference between the two,\nRadius is a open standard.\n\n181\n00:09:12,960 --> 00:09:19,305\nIt's a open open standard that any vendor\ncan support, and many, many vendors do.\n\n182\n00:09:19,305 --> 00:09:24,485\nSo, when we talk about open standards,\nversus closed standards.\n\n183\n00:09:24,485 --> 00:09:27,057\nRadius is indeed open.\n\n184\n00:09:27,057 --> 00:09:30,767\nWhereas TACACS is proprietary.\n\n185\n00:09:30,767 --> 00:09:32,407\nI'm gonna put no.\n\n186\n00:09:32,407 --> 00:09:36,187\nSo it is not an open\nstandard versus TACACS is.\n\n187\n00:09:36,187 --> 00:09:40,890\nSo that's a big deal because\nbasically what happens is any vendor\n\n188\n00:09:40,890 --> 00:09:45,550\nin the entire world who makes network\nhardware can choose to support Radius, and\n\n189\n00:09:45,550 --> 00:09:47,170\nthey don't have to pay anybody a dime.\n\n190\n00:09:47,170 --> 00:09:53,070\nBut if they want to support ,TACACS+ well,\nTACACS has a long and sordid history.\n\n191\n00:09:53,070 --> 00:09:57,990\nIt started out as an open standard,\nthe original TACACS was an open standard.\n\n192\n00:09:57,990 --> 00:10:01,990\nBut it kinda lost out in\nthe battle of authentication.\n\n193\n00:10:01,990 --> 00:10:04,630\nRadius won, and so\nit kinda went by the way side.\n\n194\n00:10:04,630 --> 00:10:06,030\nAnd Cisco adopted it.\n\n195\n00:10:06,030 --> 00:10:06,950\nAnd Cisco said you know what?\n\n196\n00:10:06,950 --> 00:10:09,100\nWe're gonna take this and\nwe're gonna make it better.\n\n197\n00:10:09,100 --> 00:10:09,650\nAnd so they did.\n\n198\n00:10:09,650 --> 00:10:12,160\nThey improved upon it into TACACS+.\n\n199\n00:10:12,160 --> 00:10:14,430\nWell they changed it so much,\n>> [LAUGH].\n\n200\n00:10:14,430 --> 00:10:16,600\n>> It's no longer backwards\ncompatible with the open standard.\n\n201\n00:10:16,600 --> 00:10:17,110\n>> I know.\n\n202\n00:10:17,110 --> 00:10:19,340\nSo it's effectively Cisco proprietary.\n\n203\n00:10:19,340 --> 00:10:21,750\nIf a vendor wants to support TACACS,\n\n204\n00:10:21,750 --> 00:10:26,720\nthey have to pay Cisco to use that\nauthentication API or whatever.\n\n205\n00:10:26,720 --> 00:10:31,600\nAs a result, most vendors,\nforget that, I'm not gonna use it.\n\n206\n00:10:31,600 --> 00:10:38,090\nYou might ask yourself, why would\nsomeone use TACACS over something else,\n\n207\n00:10:38,090 --> 00:10:42,890\nand the reason they would is because\nof the variation in what they can do.\n\n208\n00:10:42,890 --> 00:10:45,230\nSo remember the big 3 that\nwe're talking about here.\n\n209\n00:10:45,230 --> 00:10:51,180\nSo it was authentication,\nauthorization, and accounting, right.\n\n210\n00:10:51,180 --> 00:10:57,800\nThose are the 3 things that we\nexpect these protocols to do for us.\n\n211\n00:10:57,800 --> 00:11:03,890\nRight, so you know let me What is\na good way to arrange all this?\n\n212\n00:11:05,210 --> 00:11:10,152\nA smarter me would probably have\ndone this during the break [LAUGH].\n\n213\n00:11:10,152 --> 00:11:12,970\nSo.\n\n214\n00:11:12,970 --> 00:11:13,880\nThere we go.\n\n215\n00:11:13,880 --> 00:11:17,310\nAll right.\nSo with RADIUS, when it comes to\n\n216\n00:11:17,310 --> 00:11:23,030\nauthentication Radius does\na great job with authentication.\n\n217\n00:11:24,210 --> 00:11:28,090\nIt takes usernames and passwords,\nit runs them against the database and\n\n218\n00:11:28,090 --> 00:11:29,900\nthat database can be darn near anything.\n\n219\n00:11:29,900 --> 00:11:33,990\nIt can be Windows active directory,\nNovell e-directory, Open LDAT,\n\n220\n00:11:33,990 --> 00:11:36,010\nit can be any number of things.\n\n221\n00:11:36,010 --> 00:11:38,170\nIt compares the username,\ncompares the password.\n\n222\n00:11:38,170 --> 00:11:38,960\nMakes sure they match.\n\n223\n00:11:38,960 --> 00:11:41,100\nIf they do, great,\nif they don't it rejects.\n\n224\n00:11:41,100 --> 00:11:45,650\nIt's very effective at\nwhat it does TACACS also\n\n225\n00:11:45,650 --> 00:11:49,160\ngreat at authentication because it\nworks the same way that Radius does.\n\n226\n00:11:49,160 --> 00:11:50,110\nIt takes that username and\n\n227\n00:11:50,110 --> 00:11:52,660\npassword, matches them up,\nruns with it, and off we go.\n\n228\n00:11:52,660 --> 00:11:58,240\nAll right, authorization is where\nthings get a little bit different.\n\n229\n00:11:58,240 --> 00:12:01,650\nOkay, Radius was designed\nin the dial-up days.\n\n230\n00:12:01,650 --> 00:12:06,220\nAnd in the dial-up days you basically\neither allowed somebody to dial-in or\n\n231\n00:12:06,220 --> 00:12:09,510\nyou didn't and\nthat was basically about it.\n\n232\n00:12:09,510 --> 00:12:16,490\nSo when it comes to authorization,\nRADIUS is basic at best, okay?\n\n233\n00:12:16,490 --> 00:12:19,870\nVery basic authorization,\neither you get in or you don't.\n\n234\n00:12:19,870 --> 00:12:20,880\nThat's really about it.\n\n235\n00:12:20,880 --> 00:12:21,910\nNothing too fancy there.\n\n236\n00:12:23,040 --> 00:12:26,250\nTACACS, on the other hand Is amazing.\n\n237\n00:12:26,250 --> 00:12:28,040\nAnd I'm gonna put great\ncuz it'll fit better.\n\n238\n00:12:28,040 --> 00:12:31,180\nBut it is great at authorization.\n\n239\n00:12:31,180 --> 00:12:36,270\nWhen you connect and authenticate\nwith TACACS, when it authorizes you,\n\n240\n00:12:36,270 --> 00:12:40,100\nit can list individual commands, so\nyou're allowed to run show version, but\n\n241\n00:12:40,100 --> 00:12:41,720\nyou're not allowed to run show log.\n\n242\n00:12:41,720 --> 00:12:47,920\nYou can get really, really Specific\nbecause TACACS is designed for that.\n\n243\n00:12:47,920 --> 00:12:53,850\nIt's super detailed and gives you\nthe highest level of control, all right.\n\n244\n00:12:54,870 --> 00:12:57,160\nThe last one though, accounting.\n\n245\n00:12:57,160 --> 00:12:59,500\nRadius was designed in the dial-up days.\n\n246\n00:12:59,500 --> 00:13:03,380\nAnd in the dial-up days you got billed for\nhow long you were connected, and\n\n247\n00:13:03,380 --> 00:13:07,410\nif you exceeded the amount of minutes that\nyou paid for then you got disconnected, or\n\n248\n00:13:07,410 --> 00:13:11,060\nyou got charged a higher rate, and Radius\nwas designed to handle all that, and\n\n249\n00:13:11,060 --> 00:13:16,500\nthat carries over today because radius is\ngreat at accounting, keeping a record.\n\n250\n00:13:16,500 --> 00:13:20,335\nWho connected, what they did,\nand just very extensive log.\n\n251\n00:13:20,335 --> 00:13:28,700\nTACACS on the other hand is as we can\nguess here, very basic at accounting.\n\n252\n00:13:28,700 --> 00:13:31,180\nIt keeps track of the fact\nthat you connected [LAUGH].\n\n253\n00:13:31,180 --> 00:13:32,440\n>> And that's really about it.\n\n254\n00:13:32,440 --> 00:13:37,380\nIt's not very effective at measuring or\n\n255\n00:13:37,380 --> 00:13:40,020\nrecording about what's going on,\nall right?\n\n256\n00:13:40,020 --> 00:13:44,190\nSo each protocol has it's strengths and\nit's weaknesses.\n\n257\n00:13:44,190 --> 00:13:48,820\nNow, Cisco has a product\ncalled Cisco ACS and\n\n258\n00:13:50,060 --> 00:13:52,870\nI'm just gonna do it this way.\n\n259\n00:13:54,350 --> 00:13:57,710\nWhich is the Cisco Access Control Server,\nand\n\n260\n00:13:57,710 --> 00:14:01,970\nwith Cisco Access Control Server,\nwell it's a server, right?\n\n261\n00:14:01,970 --> 00:14:06,290\nAnd so I'm just gonna put no here on open\nstandard cuz it is a Cisco proprietary\n\n262\n00:14:06,290 --> 00:14:10,615\nproduct, but it basically runs RADIUS and\n\n263\n00:14:10,615 --> 00:14:15,160\nTACACS combined it runs both\nof them at the same time.\n\n264\n00:14:15,160 --> 00:14:20,180\nAnd what it does is it uses Radius or\nTACACS for authentication.\n\n265\n00:14:20,180 --> 00:14:25,130\nIt uses Radius I mean it uses TACACS for\nauthorization and\n\n266\n00:14:25,130 --> 00:14:30,970\nit uses Radius for accounting so\nit uses the best of both worlds.\n\n267\n00:14:30,970 --> 00:14:35,270\nSo when it comes to authentication,\nit can use RADIUS or\n\n268\n00:14:35,270 --> 00:14:38,230\nTACACS, it could go either way.\n\n269\n00:14:38,230 --> 00:14:46,180\nOn authorization, it uses TACACS And\non accounting it uses Radius.\n\n270\n00:14:46,180 --> 00:14:46,810\nAll right.\n\n271\n00:14:46,810 --> 00:14:53,240\nAnd by doing that it gets great\ngreat great all the way across.\n\n272\n00:14:53,240 --> 00:14:53,930\nOkay.\n\n273\n00:14:53,930 --> 00:14:56,700\nThat's why Cisco kept TACACS around.\n\n274\n00:14:56,700 --> 00:14:59,200\nThey said you know what, we might\nnot use the other pieces of it but\n\n275\n00:14:59,200 --> 00:15:01,530\nwe'll definitely use\nthe authorization piece.\n\n276\n00:15:01,530 --> 00:15:03,270\nAnd if we combine the two\nwhen people connect,\n\n277\n00:15:03,270 --> 00:15:05,400\nwe can create a really\npowerful environment.\n\n278\n00:15:06,800 --> 00:15:11,080\nAll right, so those are the standards\nthat are out there, and\n\n279\n00:15:11,080 --> 00:15:15,530\nhow they can be used in our environment.\n\n280\n00:15:15,530 --> 00:15:18,760\nAnd we can probably pretty\nthis up a little bit.\n\n281\n00:15:18,760 --> 00:15:21,650\nAlthough it might be a little unnecessary.\n\n282\n00:15:21,650 --> 00:15:28,150\nBut, I like to have pretty diagrams.\n\n283\n00:15:28,150 --> 00:15:30,710\nBut, anyhow, so\nthese are the ones that are out there and\n\n284\n00:15:30,710 --> 00:15:34,620\nwhy we have several to choose from and\nwhy.\n\n285\n00:15:34,620 --> 00:15:38,840\nWhere one might seem poor at first,\nthere is a reason for\n\n286\n00:15:38,840 --> 00:15:43,070\nkeeping it around because\nit serves that purpose or\n\n287\n00:15:43,070 --> 00:15:48,380\nit fills a need in the environment as far\nas doing that authentication or whatever.\n\n288\n00:15:48,380 --> 00:15:50,580\nSo those are the ones that\nwe have to choose from.\n\n289\n00:15:50,580 --> 00:15:55,451\nNow on the exam, you will see really,\na section of both of these, or\n\n290\n00:15:55,451 --> 00:16:01,450\na cross-section of both of these, because\nthey want you to be familiar with them.\n\n291\n00:16:01,450 --> 00:16:04,491\nNow, I will say this, once you've\nlearned how to implement one of them,\n\n292\n00:16:04,491 --> 00:16:07,550\nyou know them all, because they're\nall implemented the same exact way.\n\n293\n00:16:07,550 --> 00:16:09,500\nSo that does make it convenient.\n\n294\n00:16:09,500 --> 00:16:12,590\nBut there's really just some basic\nsetup that has to go behind it.\n\n295\n00:16:12,590 --> 00:16:13,630\n>> Mm-hm, yeah.\n\n296\n00:16:13,630 --> 00:16:16,974\nThe only other thing I would emphasize on\nthis, especially when you are preparing\n\n297\n00:16:16,974 --> 00:16:19,120\nfor the exam,\nis to know those picker port numbers.\n\n298\n00:16:19,120 --> 00:16:22,750\nSo for us, RADIUS is two particular ones.\n\n299\n00:16:22,750 --> 00:16:26,717\nThe older beginning of it was 1645 and\n\n300\n00:16:26,717 --> 00:16:30,580\nthen the newer port number is 1812.\n\n301\n00:16:30,580 --> 00:16:34,466\nAnd TACACS, I think it does have its own\nport number but it also is backward, even\n\n302\n00:16:34,466 --> 00:16:38,710\nthough we don't run the original TACACS,\nit's still 49, if I remember correctly.\n\n303\n00:16:38,710 --> 00:16:39,540\n>> Yeah, the old port numbers.\n\n304\n00:16:39,540 --> 00:16:40,330\n>> Yeah.\n\n305\n00:16:40,330 --> 00:16:43,620\n>> So there are some different ones,\nwe do need to be aware of that.\n\n306\n00:16:43,620 --> 00:16:46,457\nNow I will say that pretty much every\nradio server that I've worked with,\n\n307\n00:16:46,457 --> 00:16:48,710\nyou've got the old port numbers and\nthe new port numbers.\n\n308\n00:16:48,710 --> 00:16:49,670\nSo what did the vendors do?\n\n309\n00:16:49,670 --> 00:16:50,460\nThey just support both.\n\n310\n00:16:50,460 --> 00:16:51,080\n>> Yeah.\n\n311\n00:16:51,080 --> 00:16:54,181\n>> So I'm not really sure why they even\nbothered setting new port numbers since\n\n312\n00:16:54,181 --> 00:16:55,790\neverybody just supports both anyway.\n\n313\n00:16:55,790 --> 00:16:58,440\nThey could have saved themselves\nsome grief and not defined them.\n\n314\n00:16:58,440 --> 00:17:02,010\nBut I'm sure there was some\ndriving story behind that that was\n\n315\n00:17:02,010 --> 00:17:05,220\nconsidered important at the time.\n\n316\n00:17:05,220 --> 00:17:07,300\nSo anyhow, for\nus there are some different ones.\n\n317\n00:17:07,300 --> 00:17:12,510\nAnd I'm gonna upload these notes to the\nwebsite when I'm done, so let's see if we\n\n318\n00:17:12,510 --> 00:17:18,120\ncan get those actual port numbers and put\nthem in here just so they can see them.\n\n319\n00:17:18,120 --> 00:17:21,370\nIt can show up on the INS exam,\nwhich is why I bring it up.\n\n320\n00:17:21,370 --> 00:17:25,330\nSo RADIUS Ronnie it's what, it's 1645?\n\n321\n00:17:25,330 --> 00:17:26,780\n>> And 1812.\n\n322\n00:17:26,780 --> 00:17:31,080\n>> And, Hang on a second.\n\n323\n00:17:31,080 --> 00:17:35,250\nSo 1812, but then it's 1645 and 46 is it?\n\n324\n00:17:35,250 --> 00:17:36,580\n>> Yes.\n\n325\n00:17:36,580 --> 00:17:37,660\n>> And 1812 and 1813?\n\n326\n00:17:37,660 --> 00:17:38,960\n>> Right.\n\n327\n00:17:38,960 --> 00:17:40,740\n>> All right, 1646.\n\n328\n00:17:40,740 --> 00:17:47,500\nSo you've got the old numbers and\nthe new numbers.\n\n329\n00:17:47,500 --> 00:17:50,500\nAll right, and\nI'm going to write this a different way.\n\n330\n00:17:50,500 --> 00:17:57,260\nSo the old ports, it was 1645 for\nauthentication, right?\n\n331\n00:17:57,260 --> 00:17:58,090\n>> Yeah.\n\n332\n00:17:58,090 --> 00:18:01,890\n>> And then 1646 for-\n>> Accounting.\n\n333\n00:18:01,890 --> 00:18:03,380\n>> Accounting.\n\n334\n00:18:03,380 --> 00:18:08,420\nAnd notice how we don't really have\na port number for Authorization, right?\n\n335\n00:18:08,420 --> 00:18:12,650\nThat's just handled normally and\nthat's part of why it's not very powerful.\n\n336\n00:18:12,650 --> 00:18:14,140\nAnd then the new ports.\n\n337\n00:18:14,140 --> 00:18:15,480\n>> 1812 for Authentication.\n\n338\n00:18:15,480 --> 00:18:16,790\n>> Just like the cigarettes, right?\n\n339\n00:18:16,790 --> 00:18:17,480\nNewports?\n\n340\n00:18:17,480 --> 00:18:18,790\nSo for Authentication.\n\n341\n00:18:21,370 --> 00:18:27,670\n[LAUGH] And 1813 for Authorization.\n\n342\n00:18:27,670 --> 00:18:30,920\nAll right, and in the TACACS world,\nwhat've we got there, Ronnie?\n\n343\n00:18:30,920 --> 00:18:32,960\n>> It says port 49.\n\n344\n00:18:32,960 --> 00:18:35,490\n>> So it just uses port 49-\n>> Yep.\n\n345\n00:18:35,490 --> 00:18:38,250\n>> For everything.\n\n346\n00:18:38,250 --> 00:18:39,320\n>> There we go, all right.\n\n347\n00:18:39,320 --> 00:18:42,010\nSo those are the TCP port numbers\nwe can expect to see when we're\n\n348\n00:18:42,010 --> 00:18:43,050\ncommunicating on these.\n\n349\n00:18:43,050 --> 00:18:45,810\nIt's important to know because if you're\nsetting up a firewall you're gonna need to\n\n350\n00:18:45,810 --> 00:18:48,665\nallow those ports to pass through if\nyou're doing that type of authentication.\n\n351\n00:18:48,665 --> 00:18:51,834\n>> Mm-hm.\n>> Right, so definitely keep that in mind.\n\n352\n00:18:51,834 --> 00:18:55,942\nIt's one of the things that's\nout there that'll creep up.\n\n353\n00:18:55,942 --> 00:18:57,070\n>> Yep.\n\n354\n00:18:57,070 --> 00:18:58,000\n>> All right, and\n\n355\n00:18:58,000 --> 00:19:00,608\nI'll pretty up this chart here\nbefore I stick it on the website.\n\n356\n00:19:00,608 --> 00:19:02,820\nBut yeah, so I'll throw that on\nthe website so you guys can see it.\n\n357\n00:19:02,820 --> 00:19:07,022\nBut there's the basic explanation as to\nwhy we still have two protocols versus\n\n358\n00:19:07,022 --> 00:19:09,960\njust picking one that's better and\nsticking with it.\n\n359\n00:19:09,960 --> 00:19:12,000\nSo there is a reason for that.\n\n360\n00:19:12,000 --> 00:19:16,677\n>> Yeah, and just to mention, when you\ntalk about that idea of RADIUS not\n\n361\n00:19:16,677 --> 00:19:21,680\nhaving a particular port number for\njust the idea of authorization.\n\n362\n00:19:21,680 --> 00:19:23,560\nIt's because of the way the RADIUS works,\nright?\n\n363\n00:19:23,560 --> 00:19:28,312\nRADIUS actually does authentication and\nauthorization as one process.\n\n364\n00:19:28,312 --> 00:19:33,444\nWheras TACACS actually individualizes\nauthentication as a separate process\n\n365\n00:19:33,444 --> 00:19:38,042\nfrom authorization, as a separate\nprocess from accounting as well.\n\n366\n00:19:38,042 --> 00:19:39,122\n>> Yep, good times, good times.\n\n367\n00:19:39,122 --> 00:19:39,872\n>> Oh, yeah.\n\n368\n00:19:39,872 --> 00:19:41,582\n>> All right, so let's take a look\nat getting this configured.\n\n369\n00:19:41,582 --> 00:19:45,620\nSo in the objectives they specifically\nout a few different things for us, right.\n\n370\n00:19:45,620 --> 00:19:49,315\nThey call out knowing how to configure\nit using the Cisco configuration\n\n371\n00:19:49,315 --> 00:19:52,160\nprofessional, using the GUI, right.\n\n372\n00:19:52,160 --> 00:19:54,690\nThey also want us to know how to do\nit from the command line interface.\n\n373\n00:19:54,690 --> 00:19:58,080\nWhich is not so bad, but they are some\nof the longer commands that we'll issue.\n\n374\n00:19:58,080 --> 00:20:00,726\nAnd then lastly they want you\nto know how to do it on the ASA,\n\n375\n00:20:00,726 --> 00:20:03,920\nwhich is slightly annoying,\nbecause this isn't really an ASA exam.\n\n376\n00:20:03,920 --> 00:20:09,420\nBut you'll see that it's almost\nidentical from what we do on a router.\n\n377\n00:20:09,420 --> 00:20:12,830\nSo very, very similar, and\nnot a difficult thing at all.\n\n378\n00:20:12,830 --> 00:20:18,870\nSo let's just start with the routers,\nwith the CCP.\n\n379\n00:20:18,870 --> 00:20:22,120\nSo I'm gonna bring up the CCP,\nwhich I've got floating around back here.\n\n380\n00:20:22,120 --> 00:20:27,300\nOkay, now by default, your router,\nit already has a AAA policy on it.\n\n381\n00:20:27,300 --> 00:20:29,970\nIt's just the AAA policy says\nto do authentication and\n\n382\n00:20:29,970 --> 00:20:33,030\nauthorization locally,\non the local database.\n\n383\n00:20:33,030 --> 00:20:40,720\nNow, that local user database,\nif we go into our CCP, and we go under\n\n384\n00:20:40,720 --> 00:20:45,720\nrouter and router access, that's where\nyou can pull up your user accounts.\n\n385\n00:20:45,720 --> 00:20:48,480\nAnd here's the user accounts\nin the local user database.\n\n386\n00:20:48,480 --> 00:20:50,240\nSo you can see I've only got one account.\n\n387\n00:20:50,240 --> 00:20:55,070\nI've got admin and\nthe privilege level is 15.\n\n388\n00:20:55,070 --> 00:20:58,170\nThere's my authentication and\nmy authorization.\n\n389\n00:20:58,170 --> 00:21:00,920\nWhen I authenticate I use\nthat username and password.\n\n390\n00:21:00,920 --> 00:21:04,050\nWhen I'm authorized my authorization\nis privilege level 15.\n\n391\n00:21:04,050 --> 00:21:08,010\nThat makes me a full admin, a privileged\nuser, and I can modify config,\n\n392\n00:21:08,010 --> 00:21:09,219\nreload the router, do whatever I want.\n\n393\n00:21:10,820 --> 00:21:13,560\nThat local database right\nnow just has one account.\n\n394\n00:21:13,560 --> 00:21:16,620\nIf I have ten network admins then we're\nall gonna have to share that account.\n\n395\n00:21:16,620 --> 00:21:18,840\nOr I can go through and\ncreate ten accounts.\n\n396\n00:21:18,840 --> 00:21:22,772\nBut if I have 1,000 routers, I don't wanna\ndo that, I don't wanna create 10 accounts\n\n397\n00:21:22,772 --> 00:21:25,920\non 1,000 routers,\nit's just gonna be a nightmare, all right?\n\n398\n00:21:25,920 --> 00:21:31,560\nSo, instead of authenticating locally, we\ncan authenticate against a remote server.\n\n399\n00:21:31,560 --> 00:21:33,755\nAnd that remote server needs\nto be RADIUS or TACACS.\n\n400\n00:21:35,260 --> 00:21:36,139\nAnd we do that,\n\n401\n00:21:36,139 --> 00:21:40,780\nnot through this view cuz that would\nbe crazy to put all the stuff together.\n\n402\n00:21:40,780 --> 00:21:44,970\nBut they move it down here under\nits own folder called AAA.\n\n403\n00:21:44,970 --> 00:21:48,430\nAnd in the AAA folder you'll see the\nlittle summary screen where it shows you\n\n404\n00:21:48,430 --> 00:21:50,460\nwhat you're set up for right now.\n\n405\n00:21:50,460 --> 00:21:51,680\nNow we're the default.\n\n406\n00:21:51,680 --> 00:21:55,070\nAnd so if you look at the authentication\nand authorization policies and\n\n407\n00:21:55,070 --> 00:21:59,540\nstuff, on the right side it just shows\nthat there's not really anything\n\n408\n00:21:59,540 --> 00:22:04,750\nconfigured there, we're just doing\nthe default stuff, nothing fancy.\n\n409\n00:22:04,750 --> 00:22:08,110\nBut if we wanna get fancy,\nthat's where we need to go down here and\n\n410\n00:22:08,110 --> 00:22:11,440\nstart to define some of our\nvarious settings, all right?\n\n411\n00:22:11,440 --> 00:22:14,220\nThe first thing you're gonna want\nto set is an authorization server.\n\n412\n00:22:14,220 --> 00:22:18,670\nNow, Cisco expects you to deal with\nthe server on your own, right?\n\n413\n00:22:18,670 --> 00:22:19,550\nThat's not an exam.\n\n414\n00:22:19,550 --> 00:22:24,330\nSo, there are a number of RADIUS\nservers that are out there.\n\n415\n00:22:24,330 --> 00:22:27,030\nIf you're running Linux or\nUnix, it's got RADIUS built in.\n\n416\n00:22:27,030 --> 00:22:30,000\nIf you're running Windows Servers,\nit's got RADIUS built in.\n\n417\n00:22:30,000 --> 00:22:34,035\nIf you don't like it,\nyou can use third party RADIUS servers,\n\n418\n00:22:34,035 --> 00:22:35,820\nthere's a ton of them that are out there.\n\n419\n00:22:35,820 --> 00:22:40,080\nTACACS is really just Cisco Secure ACS.\n\n420\n00:22:40,080 --> 00:22:44,290\nIf you get Cisco Secure ACS,\nit's got TACACS built into it.\n\n421\n00:22:44,290 --> 00:22:47,830\nAfter that, I've seen a few little\nthird party programs that never,\n\n422\n00:22:47,830 --> 00:22:50,410\nlike ClearBox TACACS,\nI could never get working.\n\n423\n00:22:50,410 --> 00:22:51,170\n>> Me neither.\n\n424\n00:22:51,170 --> 00:22:53,210\n[LAUGH]\n>> So yeah, they're not the most robust.\n\n425\n00:22:53,210 --> 00:22:57,697\nBut if you use Cisco Security ACS, it's a\nvery robust product installs very easily,\n\n426\n00:22:57,697 --> 00:22:58,830\nvery quick to set up.\n\n427\n00:22:58,830 --> 00:23:01,738\nAnd you can get a demo of it from\nCisco's website if you wanna mess around\n\n428\n00:23:01,738 --> 00:23:02,330\nwith it a bit.\n\n429\n00:23:02,330 --> 00:23:06,160\nBut I recommend using a Windows Server,\ncuz it's a very real world example.\n\n430\n00:23:06,160 --> 00:23:06,920\n>> Right.\n\n431\n00:23:06,920 --> 00:23:11,250\n>> I've used RSA SecurID\nauthentication proxies.\n\n432\n00:23:11,250 --> 00:23:13,712\nSo they sell,\nif you use those RSA SecurID tokens,\n\n433\n00:23:13,712 --> 00:23:17,450\nthey have the servers that manage it,\nand they're fully RADIUS compliant.\n\n434\n00:23:17,450 --> 00:23:21,751\nAnd so, we used to login to the routers\nusing our token codes and so\n\n435\n00:23:21,751 --> 00:23:23,250\nthat was very secure.\n\n436\n00:23:23,250 --> 00:23:25,998\nSo you've got options like\nthat that are out there.\n\n437\n00:23:25,998 --> 00:23:30,295\nBut step one is really gonna be\ntelling the router about the server.\n\n438\n00:23:30,295 --> 00:23:30,830\n>> Mm-hm.\n\n439\n00:23:30,830 --> 00:23:33,880\n>> So\nI'm going to go here under Servers, and\n\n440\n00:23:33,880 --> 00:23:37,260\nin my servers I can define,\nwell, a server.\n\n441\n00:23:37,260 --> 00:23:40,790\nAnd here's where I said that it's really\ngonna be the same no matter what we do.\n\n442\n00:23:40,790 --> 00:23:45,030\nSo, if we look, it defaults to RADIUS,\nand you'll see the ports 1645 and 1646,\n\n443\n00:23:45,030 --> 00:23:47,620\nlike Ronnie and I mentioned.\n\n444\n00:23:47,620 --> 00:23:52,930\nIf I change it to TACACS+, the only\ndifference, the port numbers go away.\n\n445\n00:23:52,930 --> 00:23:55,420\nCuz you just have the one thing.\n\n446\n00:23:55,420 --> 00:23:59,263\nAnd then it's got an option if it's\na Cisco Secure Server versus just\n\n447\n00:23:59,263 --> 00:24:00,000\na standard.\n\n448\n00:24:00,000 --> 00:24:03,500\nSo other than that,\nall the other options are identical.\n\n449\n00:24:03,500 --> 00:24:06,710\nSo if you learn one way, you know\nthe other way, they snap together.\n\n450\n00:24:06,710 --> 00:24:07,590\nAll right.\n\n451\n00:24:07,590 --> 00:24:08,901\nSo I'm gonna go RADIUS, and\n\n452\n00:24:08,901 --> 00:24:12,410\nthen the server that we're using is\nactually a windows domain controller.\n\n453\n00:24:12,410 --> 00:24:16,340\nSo, I'm gonna point to that guy,\nand the windows domain controller,\n\n454\n00:24:16,340 --> 00:24:22,695\nit's not just set up automatically, I had\nto install all the network access server\n\n455\n00:24:22,695 --> 00:24:24,845\n>> Network access protection.\n\n456\n00:24:24,845 --> 00:24:26,685\n>> Network policy server.\n\n457\n00:24:26,685 --> 00:24:28,725\n>> There we go,\nthey changed the name in Server 2012, so\n\n458\n00:24:28,725 --> 00:24:30,095\nI have to remember the new name.\n\n459\n00:24:30,095 --> 00:24:32,925\nIt used to just be\nthe Remote Access Server.\n\n460\n00:24:32,925 --> 00:24:37,185\nBut I installed the network policy\nserver and I told it to run RADIUS,\n\n461\n00:24:37,185 --> 00:24:39,410\nI told it this router existed out there.\n\n462\n00:24:39,410 --> 00:24:44,470\nI've told it what user accounts to allow\nto log in, that's all Windows stuff.\n\n463\n00:24:44,470 --> 00:24:47,480\nSo, not on the exam,\nnot something they expect you to know,\n\n464\n00:24:47,480 --> 00:24:52,110\nbut actually I'll probably\nshow you guys anyway just to.\n\n465\n00:24:52,110 --> 00:24:54,320\nHow we doing on time?\n\n466\n00:24:54,320 --> 00:24:55,910\nLet's do that before we get too far.\n\n467\n00:24:55,910 --> 00:24:58,020\nI'll show you guys what\nI did on the Windows.\n\n468\n00:24:58,020 --> 00:25:00,710\nAnd just remember it's not something\nthat's gonna turn up on the exam.\n\n469\n00:25:00,710 --> 00:25:03,118\nSo let me bring that server up.\n\n470\n00:25:03,118 --> 00:25:07,270\nWhere did I park that, here, okay.\n\n471\n00:25:07,270 --> 00:25:12,880\nSo, this is a Windows Server 2012 machine,\nthere we go.\n\n472\n00:25:12,880 --> 00:25:18,820\nAnd I wanted to use it as a RADIUS\nserver so that I could do this show.\n\n473\n00:25:18,820 --> 00:25:22,350\nSo, all I had to do was in the Server\nManager room, Windows Server 2012,\n\n474\n00:25:22,350 --> 00:25:25,670\nyou can add various roles to your server.\n\n475\n00:25:25,670 --> 00:25:31,430\nAnd one of the roles is the network policy\nserver and so I installed that role.\n\n476\n00:25:31,430 --> 00:25:35,280\nAnd I guess that falls under\nNetwork Access Protection, doesn't it?\n\n477\n00:25:36,370 --> 00:25:39,930\nWell, either way, so\nbasically I added that role.\n\n478\n00:25:39,930 --> 00:25:43,130\nOnce the role is installed, it installs\n\n479\n00:25:43,130 --> 00:25:48,720\nthe Network Policy Server tool,\nwhich is what I used to set this up.\n\n480\n00:25:48,720 --> 00:25:53,580\nSo the network policy server actually\nhas a RADIUS server built into it.\n\n481\n00:25:53,580 --> 00:25:55,510\nSo there it is, where I can set up RADIUS.\n\n482\n00:25:57,210 --> 00:26:01,890\nIn RADIUS, you have to declare\nevery client that's out there.\n\n483\n00:26:01,890 --> 00:26:05,925\nSo I had to create an entry that said,\nthere is a router out there at 10.1.2\n\n484\n00:26:05,925 --> 00:26:09,370\n230.16 that's the router\nwe're using on the show.\n\n485\n00:26:09,370 --> 00:26:11,850\nAnd it's a RADIUS standard client.\n\n486\n00:26:11,850 --> 00:26:16,800\nAnd it'll allow it to talk, and\nyou create what's called a shared secret.\n\n487\n00:26:16,800 --> 00:26:20,090\nIt's just a password for the router,\nso if that router's gonna connect and\n\n488\n00:26:20,090 --> 00:26:22,260\nauthenticate it's gotta\nhave a password itself.\n\n489\n00:26:22,260 --> 00:26:26,800\nAnd so, I've defined that,\nit's in place, and there we go.\n\n490\n00:26:26,800 --> 00:26:31,760\nThen you have to find rules that\ndictate who can connect and how.\n\n491\n00:26:31,760 --> 00:26:36,220\nAnd so, I created a policy\ncalled Cisco Device Access, and\n\n492\n00:26:36,220 --> 00:26:39,780\nthe policy is very simple because\nreally RADIUS is a simple thing.\n\n493\n00:26:39,780 --> 00:26:44,520\nI created this policy that said,\nif a user is in the group Network Admins.\n\n494\n00:26:44,520 --> 00:26:46,560\nI created a group called Network Admins.\n\n495\n00:26:46,560 --> 00:26:53,400\nIf a user is in that group, allow them to\nlog in and give them privilege level 15.\n\n496\n00:26:53,400 --> 00:26:58,860\nMake them an administrator,\nall right, so slash defined.\n\n497\n00:26:58,860 --> 00:27:01,870\nIf they're not in that group you\ndon't allow them to log in, right?\n\n498\n00:27:01,870 --> 00:27:05,110\nBut that's about the extent of\nthe authorization that RADIUS can do.\n\n499\n00:27:05,110 --> 00:27:08,090\nIt's gonna say giving privilege level\n15 you let them run whatever commands.\n\n500\n00:27:08,090 --> 00:27:11,180\nI don't know about those but\njust give them privilege level 15.\n\n501\n00:27:11,180 --> 00:27:15,010\nSo pretty limited as far as that,\nbut the functionality is great.\n\n502\n00:27:15,010 --> 00:27:18,800\nIf I hire a new network admin, I just\nstick him in the network admins group.\n\n503\n00:27:18,800 --> 00:27:21,890\nAnd if I wanna fire somebody,\nI just take him out of that group, right?\n\n504\n00:27:21,890 --> 00:27:24,780\nNo longer do I have to get every\nbody to change their passwords,\n\n505\n00:27:24,780 --> 00:27:25,500\nchange things around.\n\n506\n00:27:25,500 --> 00:27:27,600\nIt's just all automatic,\nit's all managed by that group.\n\n507\n00:27:28,600 --> 00:27:32,950\nAnd in the Active Directory,\nwhich is buried around here somewhere.\n\n508\n00:27:34,920 --> 00:27:38,970\nI created a group called Network Admins,\nand\n\n509\n00:27:38,970 --> 00:27:42,080\nI put myself in it, and\nthat gave me the access.\n\n510\n00:27:42,080 --> 00:27:44,260\nSo, we'll find it,\nhere it is, Network Admins.\n\n511\n00:27:44,260 --> 00:27:48,960\nSo I created this group and I just added\nmy own account, Don Pezet right there.\n\n512\n00:27:48,960 --> 00:27:51,240\nIf I wanna make Ronnie a Network Admin,\n\n513\n00:27:51,240 --> 00:27:54,870\nI don't want to take that chance,\nnobody wants to do that.\n\n514\n00:27:54,870 --> 00:27:57,050\nI can put Ronnie in there and\nnow Ronnie's a network admin too.\n\n515\n00:27:57,050 --> 00:28:00,580\nI don't have to tell him a username and\npassword, it's just Windows password.\n\n516\n00:28:00,580 --> 00:28:01,890\nSo I say, all right,\nRonnie, you're good to go.\n\n517\n00:28:01,890 --> 00:28:04,480\nGo ahead and just SSH into a router or\nwhatever, and log in as yourself.\n\n518\n00:28:05,620 --> 00:28:07,800\nAnd then he'll be able to connect in and\ngo.\n\n519\n00:28:07,800 --> 00:28:11,450\nSo very, very cool neat kinda system.\n\n520\n00:28:11,450 --> 00:28:14,720\nAgain, if you have Linux it's\ngot RADIUS built into it.\n\n521\n00:28:14,720 --> 00:28:20,510\nActually some of the newer,\nlike the latest sent OS, you actually have\n\n522\n00:28:20,510 --> 00:28:25,370\nto tell it to install RADIUS, but usually\nit's built in and you've got it available.\n\n523\n00:28:25,370 --> 00:28:27,550\nSo, just take advantage of\nwhatever system you have.\n\n524\n00:28:27,550 --> 00:28:30,300\n>> And since we just have\na couple of minutes before break.\n\n525\n00:28:30,300 --> 00:28:34,620\nWe went over what we are actually doing,\nbut how is this any more\n\n526\n00:28:34,620 --> 00:28:39,690\nsecure than just me using that local\nusername and password database?\n\n527\n00:28:39,690 --> 00:28:42,170\nWe know that the advantages,\nif that router goes down, but\n\n528\n00:28:42,170 --> 00:28:46,475\nis there any other benefit of me\nhaving it on to another server?\n\n529\n00:28:46,475 --> 00:28:49,480\n>> Yeah, there's benefits as far as\n\n530\n00:28:49,480 --> 00:28:51,660\nyou can terminate someone's\naccount quickly, right?\n\n531\n00:28:51,660 --> 00:28:55,360\nIf I disable somebody's account in Windows\nthey're not locked out of all the routers\n\n532\n00:28:55,360 --> 00:28:58,000\nand switches all in one swoop, all right?\n\n533\n00:28:58,000 --> 00:29:02,860\nThe other thing is in Windows we can\nset password expiration policies and\n\n534\n00:29:02,860 --> 00:29:04,970\nwe an audit their logins and stuff.\n\n535\n00:29:04,970 --> 00:29:09,950\nVersus on the Cisco routers you can set\na maximum or minimum password length, but\n\n536\n00:29:09,950 --> 00:29:11,030\nyou can't set a password expiration.\n\n537\n00:29:11,030 --> 00:29:14,010\nSo somebody might have the same\npassword three years later.\n\n538\n00:29:14,010 --> 00:29:16,780\nSo this does give you a lot\nof extra control there.\n\n539\n00:29:18,800 --> 00:29:20,860\nAnd Ronnie, I wasn't even\npaying attention to the time.\n\n540\n00:29:20,860 --> 00:29:24,350\nTime flies when you're having fun,\nso let's do this.\n\n541\n00:29:24,350 --> 00:29:28,060\nLet's stop here and\nwe talked about it, right?\n\n542\n00:29:28,060 --> 00:29:29,490\nBut we haven't actually\nimplemented it yet.\n\n543\n00:29:29,490 --> 00:29:33,444\nSo that's what I want to be our\nnext step is that when we get back.\n\n544\n00:29:33,444 --> 00:29:37,600\nWe're gonna take the router and\nactually implement RADIUS on it and\n\n545\n00:29:37,600 --> 00:29:40,330\nget a chance to see what it's like\nwhen we do remote authentication.\n\n546\n00:29:41,340 --> 00:29:43,873\nSo stay tuned, when we get back,\nmore authentication.\n\n547\n00:29:43,873 --> 00:29:51,988\n[MUSIC]\n\n548\n00:29:51,988 --> 00:29:53,620\nWelcome back everybody.\n\n549\n00:29:53,620 --> 00:29:56,420\nSo before the break we took\na look at the RADIUS server.\n\n550\n00:29:56,420 --> 00:29:59,400\nI just did a real quick overview on\ngetting a Windows server set up.\n\n551\n00:29:59,400 --> 00:30:01,920\nKeep in mind this RADIUS is a standard so\n\n552\n00:30:01,920 --> 00:30:04,970\nit could work with darn\nnear any RADIUS server.\n\n553\n00:30:04,970 --> 00:30:07,230\nSo what we're left with now is going and\nsetting up our router.\n\n554\n00:30:07,230 --> 00:30:14,230\nSo we're going to do it first time via the\nGUI, the Cisco configuration professional.\n\n555\n00:30:14,230 --> 00:30:16,680\nThen the second time we'll do\nit from the command line and\n\n556\n00:30:16,680 --> 00:30:18,300\nyou'll see there's really\nnot that much to it.\n\n557\n00:30:18,300 --> 00:30:20,700\nIn fact, we'll probably just look at\nthe commands that it generates but\n\n558\n00:30:20,700 --> 00:30:22,180\nit is pretty straightforward.\n\n559\n00:30:22,180 --> 00:30:25,590\nSo I'm back in my GUI here,\nlet's go ahead and pull this thing up.\n\n560\n00:30:25,590 --> 00:30:28,550\nSo, I went under triple A servers and\ngroups.\n\n561\n00:30:28,550 --> 00:30:32,730\nAnd I went under servers, and\nI'm just gonna add in that Windows server,\n\n562\n00:30:32,730 --> 00:30:36,680\nwhich was 10.1.230.201 in my case.\n\n563\n00:30:36,680 --> 00:30:40,190\nAnd the Windows server runs on\nboth the old and the new port.\n\n564\n00:30:40,190 --> 00:30:44,990\nSo, I can leave this at 1645, 1646,\nor I can change it to 1812, 1813,\n\n565\n00:30:44,990 --> 00:30:47,100\nbut I'll leave it.\n\n566\n00:30:47,100 --> 00:30:50,060\nAnd I need to set a pre-shared key,\n\n567\n00:30:50,060 --> 00:30:54,030\nwhich is just the password that the router\nwill use to connect to the server.\n\n568\n00:30:54,030 --> 00:30:55,810\nThis is always a good idea.\n\n569\n00:30:55,810 --> 00:31:00,800\nIf you leave your RADIUS server open\nit becomes a great brute force target,\n\n570\n00:31:00,800 --> 00:31:03,879\nso it is a good idea to have\npasswords on these things.\n\n571\n00:31:05,250 --> 00:31:09,920\nSo, I'll go ahead and say OK to that.\n\n572\n00:31:09,920 --> 00:31:13,860\nBecause we have management access\nrestricted it's gotta generate an all new\n\n573\n00:31:13,860 --> 00:31:18,080\nACL that was from the last show.\n\n574\n00:31:18,080 --> 00:31:19,390\nIf we had turned all that off,\n\n575\n00:31:19,390 --> 00:31:21,280\nwe would see this is actually\na really simple command.\n\n576\n00:31:21,280 --> 00:31:23,960\nIn fact, let's look in here and\nfind the actual command\n\n577\n00:31:23,960 --> 00:31:29,330\nthat's important which is actually\nthe very first command here.\n\n578\n00:31:29,330 --> 00:31:33,050\nMaybe we can zoom in on that, there we go.\n\n579\n00:31:33,050 --> 00:31:35,700\nRadius-server host 10.1.23201.\n\n580\n00:31:35,700 --> 00:31:38,625\nAnd then that off port and\naccounting port,\n\n581\n00:31:38,625 --> 00:31:42,750\nsince they're the defaults you\ncan actually leave that off.\n\n582\n00:31:42,750 --> 00:31:45,220\nSo this command's a little\nlonger than it needs to be, and\n\n583\n00:31:45,220 --> 00:31:48,140\nthen key followed by the key that we\npunched in it's just our password.\n\n584\n00:31:49,920 --> 00:31:53,910\nSo, we'll go ahead and\ndeliver that, there we go.\n\n585\n00:31:53,910 --> 00:31:56,570\nNow you might think you're done,\nbut you're not.\n\n586\n00:31:56,570 --> 00:31:59,003\n>> [LAUGH]\n>> We've created a RADIUS server but\n\n587\n00:31:59,003 --> 00:32:01,420\nwe haven't told the router to use it,\nall right?\n\n588\n00:32:01,420 --> 00:32:08,920\nNow, I've only added in one RADIUS server,\nbut What if my RADIUS server fails, right?\n\n589\n00:32:08,920 --> 00:32:09,710\nWe can't authenticate.\n\n590\n00:32:09,710 --> 00:32:10,300\n>> Right.\n\n591\n00:32:10,300 --> 00:32:10,910\n>> We can't log into the router.\n\n592\n00:32:10,910 --> 00:32:12,380\nThat would be a real problem, right?\n\n593\n00:32:12,380 --> 00:32:14,420\nSo you always wanna plan for\nfailure, right?\n\n594\n00:32:14,420 --> 00:32:17,839\nPlan for these things down\nthe road that might happen, and so\n\n595\n00:32:17,839 --> 00:32:22,120\nyou ideally wanna have at least two\nRADIUS servers that are out there.\n\n596\n00:32:22,120 --> 00:32:23,300\nSo if you've got them, put them in.\n\n597\n00:32:23,300 --> 00:32:26,140\nIf you got three, or ten, or 12,\nor whatever you can put them in.\n\n598\n00:32:26,140 --> 00:32:29,040\nBut add in each of the RADIUS\nservers that you have.\n\n599\n00:32:29,040 --> 00:32:31,010\nNow, if we just have one.\n\n600\n00:32:31,010 --> 00:32:31,690\nWe can stop here.\n\n601\n00:32:31,690 --> 00:32:32,850\nThat's all we need.\n\n602\n00:32:32,850 --> 00:32:36,420\nBut if we have more than one, we need\nto create what's called a radius group.\n\n603\n00:32:36,420 --> 00:32:37,000\n>> Right.\n>> And\n\n604\n00:32:37,000 --> 00:32:39,310\na group is just a collection\nof RADIUS servers.\n\n605\n00:32:39,310 --> 00:32:42,990\nAnd you'll see over here under servers,\nI've also got groups.\n\n606\n00:32:42,990 --> 00:32:44,369\nAnd I can add in a group.\n\n607\n00:32:45,440 --> 00:32:49,590\nAnd so\ni'm just gonna call it itprotv-radius.\n\n608\n00:32:49,590 --> 00:32:52,020\nAnd I can pick which servers\nare in the group, and\n\n609\n00:32:52,020 --> 00:32:54,180\nyou would just check off E\nto the servers you wanted.\n\n610\n00:32:56,500 --> 00:32:59,500\nAll right, we'll go ahead and\ndeliver that.\n\n611\n00:32:59,500 --> 00:33:00,730\nAnd there we go.\n\n612\n00:33:00,730 --> 00:33:04,260\nNow I've got a RADIUS group,\na collection of servers.\n\n613\n00:33:04,260 --> 00:33:07,910\nThe cool thing with a group, if I wanna\nadd or remove servers down the road,\n\n614\n00:33:07,910 --> 00:33:09,340\nI just add them and\nremove them to the group.\n\n615\n00:33:09,340 --> 00:33:11,360\nI don't have to change anything else,\nso very convenient.\n\n616\n00:33:12,870 --> 00:33:14,500\nAll right, so now we're done, right?\n\n617\n00:33:15,780 --> 00:33:18,260\nWell, no.\nWe still have a little more to do.\n\n618\n00:33:18,260 --> 00:33:21,910\nWe need to tell the router, to use RADIUS.\n\n619\n00:33:21,910 --> 00:33:22,880\nAnd not just to use it.\n\n620\n00:33:22,880 --> 00:33:26,690\nWe need to tell it to use it for\nauthentication, authorization, and\n\n621\n00:33:26,690 --> 00:33:27,400\naccounting right?\n\n622\n00:33:27,400 --> 00:33:29,170\nSo you've got to tell it to use it for\nthose.\n\n623\n00:33:29,170 --> 00:33:31,980\nAnd so you'll see right here,\nauthentication, authorization and\n\n624\n00:33:31,980 --> 00:33:34,280\naccounting policies.\n\n625\n00:33:34,280 --> 00:33:38,480\nThat's where we define what it\nuses for,for example logins\n\n626\n00:33:38,480 --> 00:33:42,180\nwhich is what we're concerned about or\nyou know you could do it for 802.1x for\n\n627\n00:33:42,180 --> 00:33:43,640\nother types of authentication.\n\n628\n00:33:43,640 --> 00:33:45,370\nBut logins are what I'm concerned about.\n\n629\n00:33:45,370 --> 00:33:51,900\nIf an admin logs in, I want them to use my\ndesignated triple a service, all right.\n\n630\n00:33:51,900 --> 00:33:55,220\nSo you have a default triple\na policy automatically.\n\n631\n00:33:55,220 --> 00:33:56,350\nEverybody has one.\n\n632\n00:33:56,350 --> 00:33:59,150\nAnd the default is to\nuse the local database.\n\n633\n00:33:59,150 --> 00:34:01,370\nWell, we want to override that.\n\n634\n00:34:01,370 --> 00:34:05,770\nWe want to tell the router, hey, when\nsomebody logs in, don't use the default.\n\n635\n00:34:05,770 --> 00:34:08,450\nInstead, use the one that we've defined.\n\n636\n00:34:08,450 --> 00:34:09,100\nOkay.\n\n637\n00:34:09,100 --> 00:34:10,040\nAnd, so you've got a choice.\n\n638\n00:34:10,040 --> 00:34:13,640\nYou can define your own custom policies,\nor you can just edit the default.\n\n639\n00:34:13,640 --> 00:34:14,430\nI'm gonna edit the default.\n\n640\n00:34:15,940 --> 00:34:16,550\nAll right?\n\n641\n00:34:16,550 --> 00:34:23,790\nIt defaults to using that local database,\nand I'm gonna add in group RADIUS.\n\n642\n00:34:23,790 --> 00:34:24,650\nNo, I don't want that.\n\n643\n00:34:24,650 --> 00:34:25,660\nI want this one.\n\n644\n00:34:25,660 --> 00:34:26,820\nITPro TV RADIUS.\n\n645\n00:34:26,820 --> 00:34:31,130\nIf you say group RADIUS, that tells it\nto use every RADIUS server defined,\n\n646\n00:34:31,130 --> 00:34:32,910\nwhether it's in your group or not.\n\n647\n00:34:32,910 --> 00:34:37,070\nIf you choose group, and then group name,\nin my case IT Pro TV RADIUS.\n\n648\n00:34:37,070 --> 00:34:37,590\nRight?\n\n649\n00:34:37,590 --> 00:34:39,670\nThat's gonna tell it just\nuse those servers I picked.\n\n650\n00:34:39,670 --> 00:34:43,730\nThat's useful if you have maybe some\nservers are at the home office, and\n\n651\n00:34:43,730 --> 00:34:46,000\nother servers at a disaster\nrecovery location.\n\n652\n00:34:46,000 --> 00:34:49,160\nYou may want to designate your\nproduction server as first, and\n\n653\n00:34:49,160 --> 00:34:53,970\nthen your DR server second, or whatever,\nso you've got that flexibility, so\n\n654\n00:34:53,970 --> 00:34:57,430\nI'm gonna choose that one, all right.\n\n655\n00:34:57,430 --> 00:35:02,390\nNow, they're applied in order, so\nas the list is written right now,\n\n656\n00:35:02,390 --> 00:35:06,120\nif somebody logs in, it's gonna\nauthenticate them locally first, and\n\n657\n00:35:06,120 --> 00:35:08,690\nthen it'll move down to the RADIUS server,\nand that's not what I want.\n\n658\n00:35:10,460 --> 00:35:13,870\nSo I'm gonna take the RADIUS servers and\nmove them up in the list, so\n\n659\n00:35:13,870 --> 00:35:16,970\nit'll authenticating as RADIUS first,\nand the local database second.\n\n660\n00:35:16,970 --> 00:35:21,880\nNow, it will only move from one to\nthe other if one is not accessible.\n\n661\n00:35:21,880 --> 00:35:28,100\nSo, if every single RADIUS server is down,\nthen, it'll use the local database.\n\n662\n00:35:28,100 --> 00:35:28,630\n>> Yeah.\n>> Now,\n\n663\n00:35:28,630 --> 00:35:32,110\nwe want to be careful with this because\nit doesn't mean that if the RADIUS\n\n664\n00:35:32,110 --> 00:35:36,750\nserver rejects your authentication,\nit's going to move down to the next one.\n\n665\n00:35:36,750 --> 00:35:37,350\nOkay?\n\n666\n00:35:37,350 --> 00:35:38,800\nOnly if it's not accessible.\n\n667\n00:35:38,800 --> 00:35:40,780\nA lot of time, you can get this confusing.\n\n668\n00:35:40,780 --> 00:35:44,020\nWell no it didn't authenticate against\nRADIUS so it checks against that.\n\n669\n00:35:44,020 --> 00:35:49,050\nNote if the RADIUS server rejects it,\nokay then you're not going any further.\n\n670\n00:35:49,050 --> 00:35:52,340\nBut if you can find it then\nit hits that second one.\n\n671\n00:35:52,340 --> 00:35:54,990\nNow Don, should I, just for\n\n672\n00:35:54,990 --> 00:35:57,450\nthe sake of security at this point,\njust simply remove local?\n\n673\n00:35:58,490 --> 00:35:59,300\n>> You could.\n\n674\n00:35:59,300 --> 00:36:00,360\nRight?\n\n675\n00:36:00,360 --> 00:36:02,210\nIf you remove local and\n\n676\n00:36:02,210 --> 00:36:05,370\nall of your RADIUS servers are down,\nyou're locked out of the router.\n\n677\n00:36:05,370 --> 00:36:06,780\nYou can not get into the router.\n\n678\n00:36:06,780 --> 00:36:07,350\nRight?\n\n679\n00:36:07,350 --> 00:36:11,290\nSo it is a good idea,\nto leave in some kind of back up.\n\n680\n00:36:11,290 --> 00:36:12,070\nBut.\n\n681\n00:36:12,070 --> 00:36:15,220\nWith a backup comes the problem of,\nnow there's a username and\n\n682\n00:36:15,220 --> 00:36:17,740\npassword that somebody might know,\nand compromise your system.\n\n683\n00:36:17,740 --> 00:36:19,178\nSo, you gotta weigh it.\n\n684\n00:36:19,178 --> 00:36:23,500\nIn a high-security environment,\nyou'd probably remove local, right, but\n\n685\n00:36:23,500 --> 00:36:27,260\nin a normal environment, we probably leave\nit to give us that back door to be able to\n\n686\n00:36:27,260 --> 00:36:29,710\nget in in the event that tour\nRADIUS servers are offline.\n\n687\n00:36:29,710 --> 00:36:30,300\n>> Right.\n\n688\n00:36:30,300 --> 00:36:31,580\nSo I'm gonna to leave it there.\n\n689\n00:36:32,940 --> 00:36:35,380\nAnd, you'll see here where we\ncan enable password aging.\n\n690\n00:36:35,380 --> 00:36:37,080\nSo if somebody's password\nis about to expire,\n\n691\n00:36:37,080 --> 00:36:39,750\nit will warn- I'm not\ngonna worry about that.\n\n692\n00:36:39,750 --> 00:36:41,150\n>> Yeah.\nNow, if you're setting this up\n\n693\n00:36:41,150 --> 00:36:45,465\njust to be able to test it to implement,\nalways leave that local in there.\n\n694\n00:36:45,465 --> 00:36:50,480\nCuz I guarantee you I can lock myself out\nof a RADIUS server as quick as anybody.\n\n695\n00:36:50,480 --> 00:36:53,990\nAnd I've done that before by not saying,\nokay, I think it's gonna work, and\n\n696\n00:36:53,990 --> 00:36:56,250\nset it up, and\nI forgot to put that local in.\n\n697\n00:36:56,250 --> 00:36:57,810\nWell, there you go, I'm locked out.\n\n698\n00:36:57,810 --> 00:36:59,320\n>> Yeah.\nAll right, so\n\n699\n00:36:59,320 --> 00:37:01,420\nthat takes care of authentication.\n\n700\n00:37:01,420 --> 00:37:04,190\nNow we need to take a look\nat authorization, so\n\n701\n00:37:04,190 --> 00:37:06,880\nthat it'll know what\nauthorization to give our people.\n\n702\n00:37:06,880 --> 00:37:08,710\nWhen they log in, right?\n\n703\n00:37:08,710 --> 00:37:10,950\nSo you use the login process\nto provide your username and\n\n704\n00:37:10,950 --> 00:37:15,790\npassword, then you're trying to get\nan execution privilege level, right?\n\n705\n00:37:15,790 --> 00:37:19,880\nAn unprivileged user gets the greater\nthan symbol prompt, and a privileged\n\n706\n00:37:19,880 --> 00:37:24,450\nuser gets the pound symbol prompt,\nand so that's the exec command mode.\n\n707\n00:37:24,450 --> 00:37:26,950\nSo I'm gonna choose that exact\ncommand mode, and again,\n\n708\n00:37:26,950 --> 00:37:28,140\nI'll just edit the default.\n\n709\n00:37:28,140 --> 00:37:31,180\nYou could create your own,\nI'll modify the default.\n\n710\n00:37:31,180 --> 00:37:34,275\nAnd, so I'm just gonna add in\nthat group ITProTV RADIUS.\n\n711\n00:37:34,275 --> 00:37:36,547\nAnd I'll move it up.\n\n712\n00:37:36,547 --> 00:37:39,991\nNow here we're talking\nabout getting authorized,\n\n713\n00:37:39,991 --> 00:37:42,600\nto get that higher level shell.\n\n714\n00:37:42,600 --> 00:37:46,710\nI know some people instead of using\nlocal like using the enable secret, and\n\n715\n00:37:46,710 --> 00:37:50,970\nyou'll see that was an option in\nhere at least I believe it was.\n\n716\n00:37:50,970 --> 00:37:52,580\nNo, actually in the GUY it's not.\n\n717\n00:37:52,580 --> 00:37:55,190\nIn the command line,\nenable is an option in there, so\n\n718\n00:37:55,190 --> 00:37:59,980\nyou could specify that as fall back\nauthentication, but for most of us,\n\n719\n00:37:59,980 --> 00:38:02,385\nthis is gonna be fine the way that it is.\n\n720\n00:38:02,385 --> 00:38:03,415\nAll right.\n\n721\n00:38:03,415 --> 00:38:06,455\nSo there we go, so now we're set up for\nauthentication and\n\n722\n00:38:06,455 --> 00:38:09,145\nauthorization, the last\nthing is accounting.\n\n723\n00:38:09,145 --> 00:38:11,995\nNow RADIUS is really weak on accounting.\n\n724\n00:38:11,995 --> 00:38:16,487\nSo there's not really any purpose or\nany point in me setting it up, but\n\n725\n00:38:16,487 --> 00:38:19,027\nif I wanted to go into- actually\nis it not gonna let me.\n\n726\n00:38:19,027 --> 00:38:20,707\n>> It doesn't look like it.\n\n727\n00:38:20,707 --> 00:38:24,798\n>> It's not, ya so\nit's kind I don't have a tech X server.\n\n728\n00:38:24,798 --> 00:38:27,227\n>> [LAUGH]\n>> So, you know hang on a second.\n\n729\n00:38:27,227 --> 00:38:30,397\nSo, with accounting that\nis RADIUS strong point.\n\n730\n00:38:30,397 --> 00:38:32,607\nI'm thinking tech X in my head.\n\n731\n00:38:32,607 --> 00:38:36,087\nBut apparently it's already got it set for\nus back when we did the port, so\n\n732\n00:38:36,087 --> 00:38:37,667\nI don't have to specify\nanything else here.\n\n733\n00:38:38,800 --> 00:38:43,950\nYou'll see with like 802.1x and\nweb authentication that I can add in more.\n\n734\n00:38:43,950 --> 00:38:49,010\nOh but I don't have it turned on for\nweb so, all right we'll leave that be.\n\n735\n00:38:49,010 --> 00:38:50,450\nSo we can go on in to find those, but\n\n736\n00:38:50,450 --> 00:38:53,400\nfor right now we got our\nauthentication turned on.\n\n737\n00:38:53,400 --> 00:38:54,590\nNow we just need to test it.\n\n738\n00:38:54,590 --> 00:38:55,540\nRight?\n\n739\n00:38:55,540 --> 00:38:58,870\nUp until this point,\nevery time I've logged into the switch,\n\n740\n00:39:00,280 --> 00:39:03,790\nI've been logging in\nas a user named Admin.\n\n741\n00:39:03,790 --> 00:39:07,140\nAnd if I pull up my local user database\nhere, I'm just doing a show run and\n\n742\n00:39:07,140 --> 00:39:11,140\nfiltering for the username command, I've\nonly got one username on this switch, and\n\n743\n00:39:11,140 --> 00:39:12,780\nthat username is Admin.\n\n744\n00:39:14,190 --> 00:39:18,790\nBut, if I remote into that switch,\nlet me just fire this up.\n\n745\n00:39:20,790 --> 00:39:26,930\nSo I'm gonna remote into that switch, and\nI'm, gonna provide a user name of Don.\n\n746\n00:39:26,930 --> 00:39:33,130\nNow there is no user named Don, on the\nlocal machine, but I was able to log in.\n\n747\n00:39:33,130 --> 00:39:36,770\nIf I do a Show User-\nshow users- there we go.\n\n748\n00:39:36,770 --> 00:39:40,280\nI can see that don is logged\nin via the vty lines.\n\n749\n00:39:41,300 --> 00:39:44,590\nI just logged in with my Windows account.\n\n750\n00:39:44,590 --> 00:39:49,320\nNow I know it worked, because I know\nthere's no user account here named Don, so\n\n751\n00:39:49,320 --> 00:39:52,680\nhow could I log in if it didn't\nauthenticate against Windows?\n\n752\n00:39:52,680 --> 00:39:56,110\nBut something that's kinda fun\nis actually watching it happen.\n\n753\n00:39:56,110 --> 00:39:58,430\nSo, I'm gonna turn on debugs here.\n\n754\n00:39:58,430 --> 00:40:01,700\nDebugging RADIUS,\nI usually use two different commands.\n\n755\n00:40:01,700 --> 00:40:05,170\nThe first one, apparently I got\na little click crazy or something.\n\n756\n00:40:05,170 --> 00:40:06,500\n>> [LAUGH] Oh no.\n\n757\n00:40:06,500 --> 00:40:07,800\n>> There we go.\n\n758\n00:40:07,800 --> 00:40:13,250\nThe first command is\ndebug AAA authentication.\n\n759\n00:40:13,250 --> 00:40:17,912\nThat command right there will tell me hey,\nwhenever somebody's authenticating, and\n\n760\n00:40:17,912 --> 00:40:20,670\nthe AAA service fires,\ngive me some feedback.\n\n761\n00:40:20,670 --> 00:40:21,320\nLet me know what's up.\n\n762\n00:40:22,470 --> 00:40:26,176\nThe other command is debug radius.\n\n763\n00:40:26,176 --> 00:40:26,721\n>> Yeah.\n\n764\n00:40:26,721 --> 00:40:31,070\n>> And debug radius authentication.\n\n765\n00:40:31,070 --> 00:40:35,160\nThose three commands right there,\nwill turn on enough authentication.\n\n766\n00:40:35,160 --> 00:40:37,560\nI mean, enough debugging for\nme to see what's going on.\n\n767\n00:40:37,560 --> 00:40:40,780\nIf I was using TACACS, I would just\nswap the word radius for TACACS.\n\n768\n00:40:40,780 --> 00:40:43,740\nDebug tacacs authentication,\nand a debug tacacs.\n\n769\n00:40:43,740 --> 00:40:46,160\nSo let me add those to the notes,\nfrom earlier.\n\n770\n00:40:46,160 --> 00:40:52,853\nSo these commands I did,\ndebug AAA authentication,\n\n771\n00:40:52,853 --> 00:40:59,260\ndebug radius, and\ndebug radius authentication.\n\n772\n00:41:01,640 --> 00:41:04,619\nSo those three commands right there, will\nshow me what's going on in the background.\n\n773\n00:41:04,619 --> 00:41:09,135\nAnd so I'm gonna leave this\nwindow parked right here, and\n\n774\n00:41:09,135 --> 00:41:12,374\nI'm gonna fire up another putty window.\n\n775\n00:41:12,374 --> 00:41:14,767\nAnd I'm gonna SSH into that router.\n\n776\n00:41:14,767 --> 00:41:15,920\nNow I already know it works, but\n\n777\n00:41:15,920 --> 00:41:17,900\nthis time we'll be able to\nsee what actually happens.\n\n778\n00:41:20,826 --> 00:41:23,451\nI can see stuff was happening\nin the background there.\n\n779\n00:41:25,563 --> 00:41:30,475\nSo a bunch of stuff just rattled by,\nthat was my authentication happening.\n\n780\n00:41:30,475 --> 00:41:36,810\nAnd it'd probably be easier to read,\nif I made this window a little wider.\n\n781\n00:41:36,810 --> 00:41:38,279\nLet's repeat that process.\n\n782\n00:41:44,340 --> 00:41:48,127\nIt did some word wrap, and the word wrap\nmakes it get a little confusing in there,\n\n783\n00:41:48,127 --> 00:41:49,309\nso let me just redo that.\n\n784\n00:41:54,580 --> 00:41:55,410\nThere we go.\n\n785\n00:41:56,980 --> 00:41:58,950\nStill a little bit of word wrap,\nbut better.\n\n786\n00:41:58,950 --> 00:42:03,180\nSo when I look at it now, let me just\nget back to where it actually starts.\n\n787\n00:42:03,180 --> 00:42:04,240\nSo right here, is where it starts.\n\n788\n00:42:04,240 --> 00:42:06,340\nSo it's binding AAA to an interface.\n\n789\n00:42:06,340 --> 00:42:12,500\nIt's firing up that service, a user is\ntrying to connect, and it goes to prompt.\n\n790\n00:42:12,500 --> 00:42:14,660\nAnd now, I used SSH.\n\n791\n00:42:14,660 --> 00:42:18,330\nAnd SSH sends a username\nas part of the connection.\n\n792\n00:42:18,330 --> 00:42:20,510\nSo it doesn't have to prompt for\na username, but\n\n793\n00:42:20,510 --> 00:42:21,940\nit does prompt for a password.\n\n794\n00:42:21,940 --> 00:42:24,600\nAnd so here it says, ask Password.\n\n795\n00:42:24,600 --> 00:42:29,280\nSo it's asking for the password, which\nis probably that get password process.\n\n796\n00:42:31,120 --> 00:42:35,870\nMy SSH client Is sending\nthe passwords that I typed in.\n\n797\n00:42:35,870 --> 00:42:37,400\nSo it's sending that message over,\n\n798\n00:42:37,400 --> 00:42:42,310\nand you don't really see that because\nit stores it as part of the process.\n\n799\n00:42:42,310 --> 00:42:46,370\nBut it sends it in, and then\nthe router turns around, and says okay,\n\n800\n00:42:46,370 --> 00:42:51,080\nI've got a username, I've got a password,\nbut I don't know if they're valid.\n\n801\n00:42:51,080 --> 00:42:54,240\nLet me send them, to the radius server.\n\n802\n00:42:54,240 --> 00:42:57,360\nThat's why I did the debug radius,\nin addition to debugging AAA.\n\n803\n00:42:57,360 --> 00:43:01,030\nAAA, that's just the handoff\nof the username, and password.\n\n804\n00:43:01,030 --> 00:43:02,740\nThat's what I'm seeing\nhere at the beginning.\n\n805\n00:43:02,740 --> 00:43:03,780\nAnd then the radius kicks in.\n\n806\n00:43:03,780 --> 00:43:07,330\nSo see how I've got AAA BIND,\nand AAA authentication, and\n\n807\n00:43:07,330 --> 00:43:10,090\nthen it's all radius in code, and so on.\n\n808\n00:43:10,090 --> 00:43:12,420\nThis is the radius process kicking in.\n\n809\n00:43:12,420 --> 00:43:14,690\nSo it kicks in, and it builds a packet.\n\n810\n00:43:14,690 --> 00:43:17,400\nAnd a packet says its from 10.1.230.16,\nthat's my router.\n\n811\n00:43:17,400 --> 00:43:23,050\nAnd it's going to 10.1.232.01,\nthat's the radius server.\n\n812\n00:43:23,050 --> 00:43:26,557\nAnd then in it,\nit's got a username of Don.\n\n813\n00:43:26,557 --> 00:43:31,131\nAnd a Password, and that the Password is\nblocked out, so I see a Password as star.\n\n814\n00:43:31,131 --> 00:43:34,383\nAnd then it takes that information,\nand it basically just package it up,\n\n815\n00:43:34,383 --> 00:43:35,752\nit sends it over to the server.\n\n816\n00:43:35,752 --> 00:43:40,516\nSo we've got the username, the Password,\nit's got other generic information about\n\n817\n00:43:40,516 --> 00:43:44,250\nmy connection, like this is the IP\naddress of my laptop right here.\n\n818\n00:43:44,250 --> 00:43:48,250\nSo its all just kind of bundling that\ntogether, and sending it to the server.\n\n819\n00:43:48,250 --> 00:43:53,740\nThen the server makes the decision,\ndo I allow the person in, or not.\n\n820\n00:43:53,740 --> 00:43:56,030\nAnd I can see that decision right here.\n\n821\n00:43:56,030 --> 00:44:01,060\nWe received a response,\nin this case Access-Accept.\n\n822\n00:44:01,060 --> 00:44:03,610\nThat means allow the person in.\n\n823\n00:44:03,610 --> 00:44:07,710\nIf it said Access-Reject,\nthat would mean don't allow the person in.\n\n824\n00:44:07,710 --> 00:44:09,670\nSo, there's the authentication piece.\n\n825\n00:44:09,670 --> 00:44:13,140\nAnd then the only authorization\nthat radius can do,\n\n826\n00:44:13,140 --> 00:44:16,222\nis sending that AV pair\nwhich is down here.\n\n827\n00:44:16,222 --> 00:44:19,610\nThat say, all right,\nnow that we have allowed them in,\n\n828\n00:44:19,610 --> 00:44:23,290\ngive them shell privilege level 15,\nmake them an administrator.\n\n829\n00:44:23,290 --> 00:44:25,038\nMake them a full privileged user.\n\n830\n00:44:25,038 --> 00:44:27,560\nAnd then they're able to get in, and work.\n\n831\n00:44:27,560 --> 00:44:30,737\nAnd that's the end of that communication,\nand now we are authenticated,\n\n832\n00:44:30,737 --> 00:44:31,350\nand we are in.\n\n833\n00:44:31,350 --> 00:44:33,360\nSo all that happened in the background,\n\n834\n00:44:33,360 --> 00:44:36,980\nin order to get this one\nconnection right here.\n\n835\n00:44:36,980 --> 00:44:38,962\nAnd let's show a rejection, real quick.\n\n836\n00:44:44,861 --> 00:44:46,410\nSo I'm gonna try, and log in as Don.\n\n837\n00:44:46,410 --> 00:44:49,480\nAnd this time,\nI'll put in the wrong password.\n\n838\n00:44:50,710 --> 00:44:52,230\nSo there we go with the wrong password,\n\n839\n00:44:52,230 --> 00:44:54,420\nand I see here that it's\njust re-prompting me.\n\n840\n00:44:54,420 --> 00:44:57,090\nBut in the background,\nI could see that some process.\n\n841\n00:44:57,090 --> 00:44:59,860\nSo, here's it's sending Don,\nand my password.\n\n842\n00:44:59,860 --> 00:45:02,470\nAnd then right here, we get Access-Reject.\n\n843\n00:45:02,470 --> 00:45:06,010\nThe router doesn't make the decision,\nthe server does.\n\n844\n00:45:06,010 --> 00:45:09,450\nThe server looked at that username, and\npassword, and made a decision from there.\n\n845\n00:45:09,450 --> 00:45:11,990\n>> Yeah.\nSo usually when you do this debug command\n\n846\n00:45:11,990 --> 00:45:13,732\nin terms of that Access-,\n\n847\n00:45:13,732 --> 00:45:17,720\nwhatever, you'll probably see\none of four possibilities here.\n\n848\n00:45:17,720 --> 00:45:20,840\nThere's Access-Accept, Access-Reject.\n\n849\n00:45:20,840 --> 00:45:24,570\nAnd then you have another one,\nif we'd used other things beside a log on.\n\n850\n00:45:24,570 --> 00:45:30,490\nOne that says Access-, I think it's more\ninformation, whatever it talks about,\n\n851\n00:45:30,490 --> 00:45:33,810\nit's asking for more, and I can't remember\nwhat the name of it is for the life of me.\n\n852\n00:45:33,810 --> 00:45:35,740\nAnd then the last one here is an error.\n\n853\n00:45:35,740 --> 00:45:38,080\nIn other words, something was setup wrong.\n\n854\n00:45:38,080 --> 00:45:41,010\nYou're trying, or getting there,\nbut it's not really this.\n\n855\n00:45:41,010 --> 00:45:45,190\nAnd so this debug command can help you\nout, if you're experiencing problems.\n\n856\n00:45:45,190 --> 00:45:45,770\nIf you get the error,\n\n857\n00:45:45,770 --> 00:45:49,180\nyou know that something's setup\nwrong on the radius server.\n\n858\n00:45:49,180 --> 00:45:50,575\nI can't remember that last one, sorry.\n\n859\n00:45:50,575 --> 00:45:52,030\n>> [LAUGH]\n>> But there is another one\n\n860\n00:45:52,030 --> 00:45:54,420\nthat essentially says,\ngive me more information.\n\n861\n00:45:54,420 --> 00:45:56,762\nAnd so there's a specific word,\nbut I can't remember it.\n\n862\n00:45:56,762 --> 00:45:57,274\n>> Yeah.\n>> Yeah.\n\n863\n00:45:57,274 --> 00:45:58,014\n>> Normally,\n\n864\n00:45:58,014 --> 00:46:00,752\nwhen I have an issue with this stuff,\nI usually troubleshoot it from the server.\n\n865\n00:46:00,752 --> 00:46:02,312\n>> Yeah.\n>> Cuz the servers give you a much more\n\n866\n00:46:02,312 --> 00:46:02,980\nextensive-\n>> Right.\n\n867\n00:46:02,980 --> 00:46:05,160\n>> Set of troubleshooting tools\nthan the Cisco routers do.\n\n868\n00:46:05,160 --> 00:46:09,300\nThey're fairly basic as\nfar as this is concerned.\n\n869\n00:46:09,300 --> 00:46:11,430\nSo that's,\nhow we do the configuration via the GUI.\n\n870\n00:46:12,680 --> 00:46:13,781\nWhat if we had to do it\nfrom the command line?\n\n871\n00:46:13,781 --> 00:46:14,523\n>> Yeah.\n\n872\n00:46:14,523 --> 00:46:18,097\n>> Well, it really just boils down\nto a handful of commands, and\n\n873\n00:46:18,097 --> 00:46:20,135\nwe can pick them out of the config.\n\n874\n00:46:20,135 --> 00:46:25,166\nSo we started off, well, actually\nmost of our commands are right here.\n\n875\n00:46:25,166 --> 00:46:26,920\n>> Yeah.\n>> So if we wanted to configure this\n\n876\n00:46:26,920 --> 00:46:31,860\nfrom the command line first off,\nwe need to be in the AAA new-model.\n\n877\n00:46:31,860 --> 00:46:34,423\nYou have got to be in the new-model\nof AAA, for this to work.\n\n878\n00:46:34,423 --> 00:46:37,650\nAnd I'm gonna move this over to notepad,\nwhere it's a little easier to read.\n\n879\n00:46:43,571 --> 00:46:44,740\nThere we go.\n\n880\n00:46:44,740 --> 00:46:48,780\nSo AAA new-model,\nthat puts us in the new-model of AAA.\n\n881\n00:46:48,780 --> 00:46:52,500\nAnd then we've got AAA group\nserver radius itprotv-radius.\n\n882\n00:46:52,500 --> 00:46:55,630\nThat was us creating that\ngroup of radius servers, and\n\n883\n00:46:55,630 --> 00:46:57,920\nthen it defines the server right there.\n\n884\n00:46:57,920 --> 00:47:01,032\nServer 10.1.230.201, and then the ports.\n\n885\n00:47:01,032 --> 00:47:04,750\nAnd really, we didn't even have\nto define the ports there.\n\n886\n00:47:04,750 --> 00:47:06,290\nThen we turn it on.\n\n887\n00:47:06,290 --> 00:47:07,480\nSo here's it turning it on for\n\n888\n00:47:07,480 --> 00:47:12,900\nauthentication login, and authorization\nexec, and it's saying default group.\n\n889\n00:47:12,900 --> 00:47:15,800\nSo that you know where it's gonna\nauthenticate from, for the default.\n\n890\n00:47:15,800 --> 00:47:19,830\nIs itprotv-radius, unless that fails,\nand then it'll go to local.\n\n891\n00:47:21,000 --> 00:47:24,180\nThose right there, are really all\nit takes from the command line.\n\n892\n00:47:24,180 --> 00:47:25,120\nSo it's not a bunch.\n\n893\n00:47:25,120 --> 00:47:26,710\nThere are long commands.\n\n894\n00:47:26,710 --> 00:47:27,756\nIt's like those NAT commands.\n\n895\n00:47:27,756 --> 00:47:29,585\n>> Yeah.\n>> They're really quite a few keywords.\n\n896\n00:47:29,585 --> 00:47:31,180\n>> [LAUGH]\n>> But at the end of the day,\n\n897\n00:47:31,180 --> 00:47:32,700\nthey're fairly straightforward.\n\n898\n00:47:32,700 --> 00:47:33,940\nAnd that's what defines that.\n\n899\n00:47:33,940 --> 00:47:37,353\nIf we had chosen to use TACACS well,\nwe'd really just swap out.\n\n900\n00:47:37,353 --> 00:47:41,080\nLike here where it says, server radius,\nwe would say, server TACACS, and\n\n901\n00:47:41,080 --> 00:47:42,953\nthe rest of it's basically the same.\n\n902\n00:47:42,953 --> 00:47:45,261\n>> Yep.\n\n903\n00:47:45,261 --> 00:47:49,882\n>> There are a few other things, like if\nwe wanted to do radius authentication for\n\n904\n00:47:49,882 --> 00:47:51,800\nour web server.\n\n905\n00:47:51,800 --> 00:47:55,580\nWell, this is applying to login,\nand exec connections.\n\n906\n00:47:55,580 --> 00:47:59,070\nIt's not applying to HTTPS, or whatever.\n\n907\n00:47:59,070 --> 00:48:02,353\nSo we may need to go in, and\ndefine a policy like that.\n\n908\n00:48:02,353 --> 00:48:05,503\nLet me show you guys an example of that,\nfrom the CLI.\n\n909\n00:48:05,503 --> 00:48:08,463\nAnd, let's see,\nwe can do it right from here.\n\n910\n00:48:08,463 --> 00:48:15,288\nSo what we would do is,\nwe would say AAA authentication Then,\n\n911\n00:48:15,288 --> 00:48:18,713\nbefore, we were going in and,\n\n912\n00:48:19,713 --> 00:48:24,793\nSetting the, shoot,\nI just lost my train of thought.\n\n913\n00:48:24,793 --> 00:48:26,543\nWe were doing log in default.\n\n914\n00:48:26,543 --> 00:48:29,530\nBut if we do login and\nthen specify some other name,\n\n915\n00:48:29,530 --> 00:48:31,900\nwe can create custom authentications.\n\n916\n00:48:31,900 --> 00:48:36,390\nSo I'll create one that's just\ncalled http-authentication.\n\n917\n00:48:36,390 --> 00:48:37,080\nAll right.\n\n918\n00:48:37,080 --> 00:48:39,040\nAnd then here I can tell it to use group.\n\n919\n00:48:40,890 --> 00:48:45,190\nAnd then I want to use\ngroup ITPro TV dash radius.\n\n920\n00:48:45,190 --> 00:48:46,350\nDid I do it all lower case Ronnie?\n\n921\n00:48:46,350 --> 00:48:47,040\n>> I think so.\n\n922\n00:48:47,040 --> 00:48:48,120\n>> Okay.\nGood.\n\n923\n00:48:48,120 --> 00:48:50,560\nAnd then fall back to\nlocal just like before.\n\n924\n00:48:51,950 --> 00:48:54,711\nAnd then I'll say, triple A authorization.\n\n925\n00:48:59,076 --> 00:49:01,212\nThen here I want to do, let's see.\n\n926\n00:49:03,940 --> 00:49:05,780\nYeah, we'll do exec here also.\n\n927\n00:49:05,780 --> 00:49:08,090\nAAA authorization, exec.\n\n928\n00:49:09,960 --> 00:49:16,551\nThen we'll say group itprotv-radius and,\nwhat did I skip?\n\n929\n00:49:22,566 --> 00:49:23,066\nHm.\n\n930\n00:49:25,990 --> 00:49:28,100\nWhy is it not letting me specify?\n\n931\n00:49:28,100 --> 00:49:31,170\nApparently it won't use a group for\nauthorization.\n\n932\n00:49:31,170 --> 00:49:33,150\nOh, you know what?\nI did a wrong keyword there.\n\n933\n00:49:33,150 --> 00:49:36,776\n>> Oh.\n>> So, so here's what I should have done\n\n934\n00:49:36,776 --> 00:49:43,909\nhttp-authorization Well it\ndidn't like that either.\n\n935\n00:49:43,909 --> 00:49:44,571\nWhat am I doing wrong?\n\n936\n00:49:54,868 --> 00:49:55,840\nThere we go.\n\n937\n00:49:55,840 --> 00:49:57,020\nAll right.\nSo I did a little typo.\n\n938\n00:49:57,020 --> 00:49:58,310\nAll right.\n\n939\n00:49:58,310 --> 00:50:00,100\nSo I'm giving it a custom name.\n\n940\n00:50:00,100 --> 00:50:03,380\nI'm creating a custom\nauthorization policy and\n\n941\n00:50:03,380 --> 00:50:07,270\nthen I'll tell it to use ITProTV\nradius and then local also.\n\n942\n00:50:07,270 --> 00:50:11,390\nAnd then from here with\nthe IP HTTP command\n\n943\n00:50:11,390 --> 00:50:14,190\nyou've got that authentication keyword.\n\n944\n00:50:14,190 --> 00:50:18,330\nAnd earlier we did this and we just said,\nlocal and we stopped right there.\n\n945\n00:50:18,330 --> 00:50:22,500\nBut you'll see in here where\nyou can specify triple a.\n\n946\n00:50:22,500 --> 00:50:25,880\nAnd then you can specify\nlogin-authentication.\n\n947\n00:50:25,880 --> 00:50:30,930\nAnd then you can specify a named policy.\n\n948\n00:50:30,930 --> 00:50:35,290\nSo we did http-authentication.\n\n949\n00:50:35,290 --> 00:50:41,114\nAnd then you can specify\nexec-authorization.\n\n950\n00:50:43,240 --> 00:50:45,930\nAnd we define that policy.\n\n951\n00:50:45,930 --> 00:50:49,870\n>> I think you defined it as same\nthing http-authentication again.\n\n952\n00:50:49,870 --> 00:50:50,440\n>> Oh, did I?\n\n953\n00:50:50,440 --> 00:50:51,910\n>> Yeah.\n>> That's great.\n\n954\n00:50:51,910 --> 00:50:52,770\nWonderful typos.\n\n955\n00:50:54,650 --> 00:50:55,430\nI did.\nAll right.\n\n956\n00:50:55,430 --> 00:50:58,550\nI'll fix that in the code\nsample I post here in a minute.\n\n957\n00:50:58,550 --> 00:51:05,140\nBut that's gonna tell the web portion\nto also use the radius server, right.\n\n958\n00:51:05,140 --> 00:51:06,420\nAnd so that's pretty handy.\n\n959\n00:51:06,420 --> 00:51:08,900\nI could have done that from\nthe GUI a lot easier, but\n\n960\n00:51:08,900 --> 00:51:11,860\nhere from the command prompt\nit's basically the same process.\n\n961\n00:51:11,860 --> 00:51:15,720\nLet me do this though, cuz I did get that\ntypo in there that kinda broke it, so\n\n962\n00:51:15,720 --> 00:51:21,050\nI'm gonna come up here and\njust grab these two guys.\n\n963\n00:51:21,050 --> 00:51:26,940\nLet me take that back into notepad.\n\n964\n00:51:26,940 --> 00:51:29,850\nSo I called them both http authentication,\nso\n\n965\n00:51:29,850 --> 00:51:32,580\nI should have called this\none http authorization.\n\n966\n00:51:34,680 --> 00:51:38,460\nAnd then on the http server,\nif I can get down to it's configs,\n\n967\n00:51:38,460 --> 00:51:43,660\ndown towards the bottom there, you can see\nthe commands where I told it to use that.\n\n968\n00:51:43,660 --> 00:51:47,947\nSo that's gonna make the web\nserver make use of these\n\n969\n00:51:47,947 --> 00:51:53,155\nand There.\n\n970\n00:51:53,155 --> 00:51:57,445\nI'll fix that, that way it's right in the\nnotes that I give you guys on the website.\n\n971\n00:51:57,445 --> 00:52:01,645\nSo basically we can turn on authentication\nand authorization for darn near anything.\n\n972\n00:52:01,645 --> 00:52:04,775\nIf you have a modem in your router, you\nactually could set up a dial up server and\n\n973\n00:52:04,775 --> 00:52:09,960\nhave dial in connections and\nstuff in your crazy, but you can do it.\n\n974\n00:52:09,960 --> 00:52:13,260\nUsing it for the web server like this,\nthat's where I see it mostly.\n\n975\n00:52:13,260 --> 00:52:17,110\nYou can do it with PPP OE,\nand a few other things.\n\n976\n00:52:17,110 --> 00:52:19,060\nThere's a few places where\nyou can make use of it.\n\n977\n00:52:20,480 --> 00:52:24,770\nAll right, so that's an example of\nconfiguring triple A from the GUI, and\n\n978\n00:52:24,770 --> 00:52:26,260\nfrom the command line.\n\n979\n00:52:26,260 --> 00:52:29,430\nThe only other thing they call out in\nthe objectives is kind of that odd one,\n\n980\n00:52:29,430 --> 00:52:32,760\nis they want you to see how\nto configure AAA on an ASA,\n\n981\n00:52:32,760 --> 00:52:34,630\non an adaptive security appliance.\n\n982\n00:52:34,630 --> 00:52:37,520\nSo looking at the clock,\nwe're at just about our break time, so\n\n983\n00:52:37,520 --> 00:52:39,310\nwhy don't we do this: Why don't we stop?\n\n984\n00:52:39,310 --> 00:52:42,250\nWhen we get back, we'll look at\nconfiguring AAA on an ASA, and\n\n985\n00:52:42,250 --> 00:52:46,060\nthen after that we'll probably\nwrap up there and move on.\n\n986\n00:52:46,060 --> 00:52:46,685\n>> Sounds good.\n\n987\n00:52:46,685 --> 00:52:49,471\nAll right, so ladies and gentlemen,\nstay tuned, when we get back,\n\n988\n00:52:49,471 --> 00:52:50,829\nthe exciting conclusion to AAA.\n\n989\n00:52:50,829 --> 00:52:59,188\n[MUSIC]\n\n990\n00:52:59,188 --> 00:53:01,080\nAll right, welcome back everybody.\n\n991\n00:53:01,080 --> 00:53:03,460\nSo for our last segment of the show,\n\n992\n00:53:03,460 --> 00:53:07,060\nwe need to tackle the adaptive\nsecurity plans, the ASA.\n\n993\n00:53:07,060 --> 00:53:08,100\nGoing through the objectives,\n\n994\n00:53:08,100 --> 00:53:11,630\nwe haven't really hit on\nthe Cisco firewalls at all yet.\n\n995\n00:53:11,630 --> 00:53:12,590\nAnd there's a reason for that.\n\n996\n00:53:12,590 --> 00:53:14,300\nIt's kind of pushed off\nto a later section.\n\n997\n00:53:15,430 --> 00:53:17,320\nSo we're going to go more\nin depth on them later.\n\n998\n00:53:17,320 --> 00:53:20,280\nBut for right now, let's just suffice\nit to say that it is actually very,\n\n999\n00:53:20,280 --> 00:53:22,350\nvery similar to what we do with a router.\n\n1000\n00:53:22,350 --> 00:53:24,100\nIf you've never worked with an ASA before,\n\n1001\n00:53:24,100 --> 00:53:25,750\nwhich I expect a lot of\nyou probably haven't.\n\n1002\n00:53:26,780 --> 00:53:29,870\nThe ASAs use a web based\nmanagement utility,\n\n1003\n00:53:29,870 --> 00:53:32,740\nit's a Java utility, called the ASDM.\n\n1004\n00:53:32,740 --> 00:53:36,400\nThe adaptive security or\nthe ASA security and\n\n1005\n00:53:36,400 --> 00:53:38,540\ndevice manager or whatever it's called.\n\n1006\n00:53:38,540 --> 00:53:43,040\nAnd anyhow, it basically is a lot like\nthe Cisco configuration professional.\n\n1007\n00:53:43,040 --> 00:53:45,500\nIn fact, if you can use one,\nyou can pretty much use the other.\n\n1008\n00:53:45,500 --> 00:53:48,670\nand the way things are located in\nthe range is very very similar.\n\n1009\n00:53:48,670 --> 00:53:53,720\nSo what I'm gonna do is I'm gonna\npull up and ASA here and this\n\n1010\n00:53:53,720 --> 00:53:57,200\nis actually the firewall that this whole\nvideo stream is running through right now.\n\n1011\n00:53:57,200 --> 00:54:01,510\nSo if you're watching us live, this is\nthe firewall that's allowing it to happen.\n\n1012\n00:54:01,510 --> 00:54:06,100\nSo basically you have, you know,\nhome, configuration, monitoring,\n\n1013\n00:54:06,100 --> 00:54:07,760\nvery similar to CCP.\n\n1014\n00:54:07,760 --> 00:54:11,540\nAnd when you go under configuration\nyou've got management access and so on.\n\n1015\n00:54:11,540 --> 00:54:16,200\nAnd it divides it up so you've got device\nsetup, firewall remote access and so on.\n\n1016\n00:54:16,200 --> 00:54:20,100\nIf I wanna deal with the AAA policies\nthey're down here under device management.\n\n1017\n00:54:20,100 --> 00:54:24,210\nAnd then I'll see in there where I've\ngot users AAA, just like on the routers.\n\n1018\n00:54:24,210 --> 00:54:27,160\nAnd I can come in and I can see user\naccounts that I've got defines.\n\n1019\n00:54:27,160 --> 00:54:31,040\nSo like here I've got\nan extremely slow connection.\n\n1020\n00:54:31,040 --> 00:54:34,910\nBut I'll have a user account called admin\nand a user account, I think I have one for\n\n1021\n00:54:34,910 --> 00:54:37,030\nme, dpezet, and so on.\n\n1022\n00:54:37,030 --> 00:54:39,200\nWell, I've apparently\nkilled my connection.\n\n1023\n00:54:39,200 --> 00:54:43,050\nI love Java because it is\nan awesome technology.\n\n1024\n00:54:43,050 --> 00:54:44,290\n>> It is amazing.\n\n1025\n00:54:44,290 --> 00:54:46,790\n>> It allows developers to\nwrite a program once and\n\n1026\n00:54:46,790 --> 00:54:49,880\nthen run it very slowly on every\noperating system out there.\n\n1027\n00:54:49,880 --> 00:54:53,950\nAnd that's exactly what is happening here,\nso yeah, wonderful.\n\n1028\n00:54:53,950 --> 00:54:56,220\n>> [LAUGH]\n>> Let me kill this.\n\n1029\n00:54:56,220 --> 00:54:56,720\nI'll relaunch.\n\n1030\n00:54:58,820 --> 00:55:01,820\nI launched it this morning,\nwell before the show started, and so\n\n1031\n00:55:01,820 --> 00:55:03,530\nit's just been cruising along.\n\n1032\n00:55:03,530 --> 00:55:05,230\nSo I'm gonna kill its process.\n\n1033\n00:55:05,230 --> 00:55:07,330\nAnd see how I have to go in and\nkill the Java process.\n\n1034\n00:55:07,330 --> 00:55:11,050\nSo that's just kind of the way that goes.\n\n1035\n00:55:11,050 --> 00:55:11,880\n>> So awesome.\n\n1036\n00:55:11,880 --> 00:55:13,590\n>> All right,\nlet me fire this tricky back up.\n\n1037\n00:55:13,590 --> 00:55:15,130\n>> This is why we love java.\n\n1038\n00:55:15,130 --> 00:55:15,720\nWe love it.\n\n1039\n00:55:15,720 --> 00:55:18,670\n>> I really do wish Cisco would switch\nto either straight up web based like\n\n1040\n00:55:18,670 --> 00:55:19,850\nthe other providers.\n\n1041\n00:55:19,850 --> 00:55:23,740\nLike if you go to Juniper SSG or\nwhatever it's just straight up web based.\n\n1042\n00:55:23,740 --> 00:55:24,620\nYou don't need java.\n\n1043\n00:55:24,620 --> 00:55:25,910\nIt's just all right there.\n\n1044\n00:55:25,910 --> 00:55:30,400\nIt makes it a lot easier but Cisco,\nthey've invested in this pretty heavily so\n\n1045\n00:55:30,400 --> 00:55:32,710\nI don't think they're\ngonna change anytime soon.\n\n1046\n00:55:32,710 --> 00:55:38,410\nSo I'll get back into it, but basically\nwe go in and we have a GUI that is\n\n1047\n00:55:38,410 --> 00:55:42,530\nvery similar to the router's, and we'll\nbe able to define our RADIUS server and\n\n1048\n00:55:42,530 --> 00:55:45,400\nthen we create our policies and\nspecify which one to access.\n\n1049\n00:55:45,400 --> 00:55:46,630\nIf it sounds familiar, it should be.\n\n1050\n00:55:46,630 --> 00:55:47,540\nIt's basically the same.\n\n1051\n00:55:47,540 --> 00:55:49,210\n>> I think you closed out of it.\n\n1052\n00:55:49,210 --> 00:55:49,740\nDid I?\n\n1053\n00:55:49,740 --> 00:55:50,700\n>> Yep.\n\n1054\n00:55:50,700 --> 00:55:54,210\n>> Well, you know what it's hard to\nfind good help these days isn't it.\n\n1055\n00:55:54,210 --> 00:55:57,720\nIf only thee was somebody around here\nwho knew how to work with networking\n\n1056\n00:55:57,720 --> 00:55:58,400\nequipment.\n\n1057\n00:55:59,570 --> 00:56:01,090\nI choose, I accept the risk.\n\n1058\n00:56:01,090 --> 00:56:07,200\nI want to run it [LAUGH]\n>> Yeah, so much for Java today.\n\n1059\n00:56:07,200 --> 00:56:09,210\nYou know.\n\n1060\n00:56:09,210 --> 00:56:10,630\nHang on, let me just make sure Java.\n\n1061\n00:56:10,630 --> 00:56:15,050\nSee the problem is, if job a hangs,\nit hangs for everyone.\n\n1062\n00:56:15,050 --> 00:56:17,940\nThere may be another hung Java\nprocess in the background.\n\n1063\n00:56:17,940 --> 00:56:20,130\nSo let's go in and see.\n\n1064\n00:56:20,130 --> 00:56:22,060\nThis is good troubleshooting.\n\n1065\n00:56:22,060 --> 00:56:24,150\n>> Just a Java update.\n\n1066\n00:56:24,150 --> 00:56:26,300\n>> No. Yeah. I don't see it.\n\n1067\n00:56:26,300 --> 00:56:27,600\nAlright let's run at a different way so.\n\n1068\n00:56:27,600 --> 00:56:31,410\nIf you ever have a problem like this,\nwhere the ASDM isn't firing or\n\n1069\n00:56:31,410 --> 00:56:36,410\nwhatever you can actually load the user\ninterface of a firewall directly from\n\n1070\n00:56:36,410 --> 00:56:42,200\nthe firewall by browsing to it with\nhttps:// and the IP of the firewall.\n\n1071\n00:56:42,200 --> 00:56:44,860\nThe certificate is\na locally generated thing.\n\n1072\n00:56:44,860 --> 00:56:46,370\nSo it didn't trust it.\n\n1073\n00:56:46,370 --> 00:56:50,470\nBut when you go there, you'll see where\nyou can actually install the ASDM to be\n\n1074\n00:56:50,470 --> 00:56:52,780\nable to run it from your\nmachine all the time.\n\n1075\n00:56:52,780 --> 00:56:54,820\nOr crash it like mine is.\n\n1076\n00:56:54,820 --> 00:56:59,370\nOr you can do Java web start and\nwith Java web start, which apparently.\n\n1077\n00:57:01,020 --> 00:57:04,730\nI forgot Java 7 disables Java web start so\nthat's not gonna be an option so\n\n1078\n00:57:04,730 --> 00:57:06,110\nwe'll do the install.\n\n1079\n00:57:06,110 --> 00:57:11,130\nSo basically you can go this way and you\nare going to authenticate and login and\n\n1080\n00:57:11,130 --> 00:57:14,500\ndo all this stuff and it's gonna\nrun it straight from the firewall.\n\n1081\n00:57:14,500 --> 00:57:17,660\nSo if you ever have a problem launching\nit like I'm having a problem right now.\n\n1082\n00:57:17,660 --> 00:57:21,600\nThis is a way to kind of get around it,\nand it will normally cause it to run and\n\n1083\n00:57:21,600 --> 00:57:23,020\nbe happy.\n\n1084\n00:57:23,020 --> 00:57:31,050\nI say that,\nwho knows what's gonna happen here.\n\n1085\n00:57:31,050 --> 00:57:32,035\n>> Let's give that a shot.\n\n1086\n00:57:32,035 --> 00:57:34,760\n20,000 security warnings later,\nwe're gonna get into this thing, and\n\n1087\n00:57:34,760 --> 00:57:35,780\nthen we'll be able to see it.\n\n1088\n00:57:35,780 --> 00:57:36,750\n>> Now that's secure.\n\n1089\n00:57:36,750 --> 00:57:37,820\n>> That's promising right there.\n\n1090\n00:57:37,820 --> 00:57:43,820\nSo we saw our status bar there we go,\nlet's give it a second while it loads up.\n\n1091\n00:57:43,820 --> 00:57:46,290\nSo, once I'm in here I can\ngo back to configuration.\n\n1092\n00:57:46,290 --> 00:57:48,360\nI can go to device management.\n\n1093\n00:57:48,360 --> 00:57:54,750\nI can go to the user AAA and\nin here I can set my AAA server group.\n\n1094\n00:57:54,750 --> 00:57:58,890\nWe are a small,\nwe have a lot of employees here, so\n\n1095\n00:57:58,890 --> 00:58:00,980\nwe're kinda a medium size company I guess.\n\n1096\n00:58:00,980 --> 00:58:04,780\nBut we really have only got 2 or\n3 networks admins, so\n\n1097\n00:58:04,780 --> 00:58:06,640\nwe don't have a radius server set up here.\n\n1098\n00:58:06,640 --> 00:58:08,220\nWe are just not big enough for that.\n\n1099\n00:58:08,220 --> 00:58:11,470\nBut you'll see we are using\nthat local user data base.\n\n1100\n00:58:11,470 --> 00:58:15,320\nBut if I want to go ahead and\nstart configuring more we can come in and\n\n1101\n00:58:15,320 --> 00:58:18,700\nwe can define server groups and\nservers inside of them.\n\n1102\n00:58:18,700 --> 00:58:19,630\nSo I would just come in here and\n\n1103\n00:58:19,630 --> 00:58:24,670\nI would choose add and so maybe I'll\ncreate the itprotv-radius group.\n\n1104\n00:58:24,670 --> 00:58:26,480\nAnd I'll see where it's got radius and\ntack acts.\n\n1105\n00:58:26,480 --> 00:58:34,330\nNow the ASA does go a step further and,\nI can't zoom in on this thing.\n\n1106\n00:58:34,330 --> 00:58:36,270\nAll right, well, here I'll just tell you.\n\n1107\n00:58:36,270 --> 00:58:40,610\nSo you'll see in addition to RADIUS and\nIt's got like a Windows NT domain.\n\n1108\n00:58:40,610 --> 00:58:41,840\n>> Nice.\n>> Which means it can correctly\n\n1109\n00:58:41,840 --> 00:58:43,850\nauthenticate against the active directory.\n\n1110\n00:58:43,850 --> 00:58:47,970\nIt's got Kerberos, LDAP, right, so\nit's got several ways to authenticate.\n\n1111\n00:58:47,970 --> 00:58:52,700\nSo it's more advanced than a router,\nbut for us radius is all we need.\n\n1112\n00:58:53,890 --> 00:58:57,750\nWe can specify if we're doing accounting\nand we can define the other settings that\n\n1113\n00:58:57,750 --> 00:58:59,560\nwe need here, but for\nthe most part that's all I need.\n\n1114\n00:58:59,560 --> 00:59:01,290\nSo I'm just gonna say okay to that.\n\n1115\n00:59:01,290 --> 00:59:03,830\nSo now I've got ITProTV Radius.\n\n1116\n00:59:03,830 --> 00:59:05,580\nAnd now I can start to add in servers.\n\n1117\n00:59:05,580 --> 00:59:10,130\nAnd so I can punch in a server\nof like 10.1.230.201.\n\n1118\n00:59:10,130 --> 00:59:12,420\nI can specify the ports.\n\n1119\n00:59:12,420 --> 00:59:15,569\nIt's defaulted to 1645 and 46 and\n\n1120\n00:59:15,569 --> 00:59:20,660\nI can specify that shared secret\nright here to define that.\n\n1121\n00:59:20,660 --> 00:59:24,750\nNow once that's in place,\nnow I've got the Radius group defined,\n\n1122\n00:59:24,750 --> 00:59:28,600\nI've got the server defined,\nbut I'm still not using it.\n\n1123\n00:59:28,600 --> 00:59:32,980\nYou're not actually using it until you\ngo and assign it to your policies.\n\n1124\n00:59:32,980 --> 00:59:37,830\nAnd so if I go ahead and apply this, and\nthen jump down here to my authentication,\n\n1125\n00:59:37,830 --> 00:59:42,480\nlet's see, where is that buried.\n\n1126\n00:59:42,480 --> 00:59:49,440\nI've gotta find\n\n1127\n00:59:49,440 --> 00:59:54,070\nmy authentication screen,\nit is Ronnie, do you remember.\n\n1128\n00:59:54,070 --> 00:59:56,560\n>> No, no.\n>> I'm in the wrong spot I'm sure.\n\n1129\n00:59:58,480 --> 01:00:00,080\nHere.\n>> Okay yeah.\n\n1130\n01:00:00,080 --> 01:00:02,470\n>> Under users and AAA access.\n\n1131\n01:00:02,470 --> 01:00:03,470\nThere we go.\n\n1132\n01:00:03,470 --> 01:00:08,730\nNotice here authentication is turned on,\nbut it's all set to the local database.\n\n1133\n01:00:08,730 --> 01:00:10,870\nAuthorization again local database.\n\n1134\n01:00:10,870 --> 01:00:13,510\nAccounting, well accounting\ndoesn't log locally.\n\n1135\n01:00:13,510 --> 01:00:16,750\nSo if I want to turn these on what\nI have to do is I have to come and\n\n1136\n01:00:16,750 --> 01:00:20,610\nsay, instead of using local,\nuse ITProTV Radius.\n\n1137\n01:00:20,610 --> 01:00:24,650\nAnd I've got to go and change it for each\none of these which is mildly annoying, but\n\n1138\n01:00:24,650 --> 01:00:29,220\nI can change it of reach one of those,\nand under authorization I can change it.\n\n1139\n01:00:31,100 --> 01:00:32,920\nWhy is it not letting me pick?\n\n1140\n01:00:32,920 --> 01:00:35,440\nOh, you know what?\nI have to apply the authentication before\n\n1141\n01:00:35,440 --> 01:00:37,005\nI can come and change this one out.\n\n1142\n01:00:37,005 --> 01:00:39,915\nBecause this is a production firewall,\nI don't wanna actually turn that on,\n\n1143\n01:00:39,915 --> 01:00:43,295\nbut until I hit apply on the other screen,\nit won't let me adjust this one.\n\n1144\n01:00:43,295 --> 01:00:46,095\nAnd then accounting is probably,\noh no accounting's already got it.\n\n1145\n01:00:46,095 --> 01:00:48,625\nSo I here I can come in and\nI can turn on accounting and\n\n1146\n01:00:48,625 --> 01:00:52,725\nnow it's gonna keep a record\nof all that access.\n\n1147\n01:00:52,725 --> 01:00:55,625\nAnd keep a record, record it,\nit'll be in my logs.\n\n1148\n01:00:55,625 --> 01:00:57,765\nHopefully I send that to a sys log or\n\n1149\n01:00:57,765 --> 01:00:59,810\nyou can find it right there\non the radius server.\n\n1150\n01:00:59,810 --> 01:01:01,610\nSo that information gets logged in,\nalright.\n\n1151\n01:01:01,610 --> 01:01:03,670\nSo very similar to what\nwe saw on the routers.\n\n1152\n01:01:03,670 --> 01:01:07,510\nSome of what we saw,\nI had to hunt to find that AAA access.\n\n1153\n01:01:07,510 --> 01:01:11,370\nBut once you find it,\nit's just a matter of turning it on.\n\n1154\n01:01:11,370 --> 01:01:14,940\nAlright, now like I said, this is\na production machine, so I'm not going to,\n\n1155\n01:01:14,940 --> 01:01:19,710\nsee it's completely so I'm just going to\nreset that so it doesn't actually apply.\n\n1156\n01:01:19,710 --> 01:01:22,040\nAnd I'll go ahead and\ndelete out that group that we made.\n\n1157\n01:01:24,970 --> 01:01:29,540\nUnauthorized network changes right\nthat's always pleasant okay there we go.\n\n1158\n01:01:29,540 --> 01:01:32,760\nAll right so just keep in mind\nthe ASA really really similar to SDM.\n\n1159\n01:01:32,760 --> 01:01:34,980\nNow if you've never worked on an ASA and\nyou want some experience.\n\n1160\n01:01:34,980 --> 01:01:35,740\nExperience with it.\n\n1161\n01:01:35,740 --> 01:01:39,400\nThere are a number of companies out\nthere that run access to them, but\n\n1162\n01:01:39,400 --> 01:01:43,750\nyou can download the ASDM, this management\nscreen, and they have an ASDM demo.\n\n1163\n01:01:43,750 --> 01:01:47,540\nIf you do a Google search for\nit, ASDM demo, you'll find it and\n\n1164\n01:01:47,540 --> 01:01:50,250\nbasically it lets you fire up the ASDM and\nit's kind of like a fake\n\n1165\n01:01:50,250 --> 01:01:53,370\nsystem attachment, just so you can browse\naround and get used to the interface.\n\n1166\n01:01:53,370 --> 01:01:54,910\nIt's kind of a nice thing to do.\n\n1167\n01:01:54,910 --> 01:01:56,070\nYep, works very well.\n\n1168\n01:01:57,250 --> 01:02:01,740\n>> All right, so Ronnie I think\nthat pretty much wraps us up.\n\n1169\n01:02:01,740 --> 01:02:03,570\nDo you have anything else?\n\n1170\n01:02:03,570 --> 01:02:07,280\n>> Nope, again practicing is pretty\nmuch the key here when you see this on\n\n1171\n01:02:07,280 --> 01:02:08,690\nthe exam.\n\n1172\n01:02:08,690 --> 01:02:11,050\nJust make sure you know\nthose basic commands.\n\n1173\n01:02:11,050 --> 01:02:14,400\nThe troubleshooting stuff again is\npretty much key for us as well,\n\n1174\n01:02:14,400 --> 01:02:17,040\nbut well,\nI think we've covered it fairly well.\n\n1175\n01:02:17,040 --> 01:02:20,390\n>> All right, well,\nlet me just remind you guys.\n\n1176\n01:02:20,390 --> 01:02:23,670\nIf you ever have questions on\nthis absolutely live your.\n\n1177\n01:02:23,670 --> 01:02:25,640\nDuring the show, go to ITPro.TV/live.\n\n1178\n01:02:25,640 --> 01:02:29,250\nYou'll see the chat box right beneath\nthe video, post your questions in there.\n\n1179\n01:02:29,250 --> 01:02:31,310\nWe monitor and answer during the show.\n\n1180\n01:02:31,310 --> 01:02:33,490\nAlso, if you have\nquestions after the show,\n\n1181\n01:02:33,490 --> 01:02:37,090\nuse the Q&A link at the top\nof every ITProTV webpage.\n\n1182\n01:02:37,090 --> 01:02:39,680\nYou can go to the Q&A section,\npost your questions, we monitor and\n\n1183\n01:02:39,680 --> 01:02:42,500\nanswer, and we make sure you\nguys get the help that you need.\n\n1184\n01:02:42,500 --> 01:02:45,250\nDefinitely take advantage of that\nresource, we are there for you.\n\n1185\n01:02:46,430 --> 01:02:49,852\nOtherwise, signing off for\nITProTV, I'm Don Pezet.\n\n1186\n01:02:49,852 --> 01:02:50,781\n>> And I'm Ronnie Wong.\n\n1187\n01:02:50,781 --> 01:02:52,523\n>> And we'll see you next time.\n\n1188\n01:02:52,523 --> 01:03:02,523\n[MUSIC].\n\n1189\n01:03:04,434 --> 01:03:11,100\n[SOUND].\n\n",
          "vimeoId": "85761708"
        }
      ],
      "title": "AAA on Cisco Devices"
    },
    {
      "episodes": [
        {
          "description": "Access control lists are the cornerstone of security in Cisco devices and is usually one of the first things one learns about in terms of security and controlling traffic going in and out of routers and switches. Viewers will see demonstrations of writing standard and extended access control lists as well as several optimization techniques.",
          "length": "7241",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/iins/005-IOS-Access-Control-Lists.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/iins/005-IOS-Access-Control-Lists-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/iins/005-IOS-Access-Control-Lists-sm.jpg",
          "title": "IOS Access Control Lists",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:15,263 --> 00:00:23,089\n[SOUND]\n\n3\n00:00:23,089 --> 00:00:33,089\n[MUSIC]\n\n4\n00:00:34,767 --> 00:00:38,235\nAll right, good morning, good afternoon,\nor good evening and welcome back to\n\n5\n00:00:38,235 --> 00:00:41,720\nanother episode of IT Pro TV, I'm your\nhost Don Pezet and this is Ronnie Wong.\n\n6\n00:00:41,720 --> 00:00:42,750\nHow's it going, Ronnie?\n\n7\n00:00:42,750 --> 00:00:44,864\n>> I am doing well today.\n\n8\n00:00:44,864 --> 00:00:48,422\nI am doing well today because I was\nlaughing with my friend Tim Tebow about\n\n9\n00:00:48,422 --> 00:00:49,482\nthe game last night.\n\n10\n00:00:49,482 --> 00:00:51,388\n>> [LAUGH]\n>> Oh, I'm sorry that's not what I meant.\n\n11\n00:00:51,388 --> 00:00:53,040\n>> [LAUGH]\n>> Wrong quarterback, wrong quarterback.\n\n12\n00:00:53,040 --> 00:00:57,660\n>> Oh.\n[LAUGH] All right, so, it is funny though,\n\n13\n00:00:57,660 --> 00:00:58,390\nbecause...\n\n14\n00:00:58,390 --> 00:01:00,280\nWell, we'll digress for\njust a minute here.\n\n15\n00:01:00,280 --> 00:01:05,210\nIf you were Denver- for those of you\nwatching this episode in the future,\n\n16\n00:01:05,210 --> 00:01:06,650\nthe Super Bowl was last night.\n\n17\n00:01:06,650 --> 00:01:07,380\nDenver, really,\n\n18\n00:01:07,380 --> 00:01:11,298\nprobably couldn't have done any worse\nif they had Tim Tebow on the team.\n\n19\n00:01:11,298 --> 00:01:12,948\nThat's true.\n\n20\n00:01:12,948 --> 00:01:13,850\n>> Anyhow.\n\n21\n00:01:13,850 --> 00:01:17,160\nSo today we got another episode of IINS,\nthe Cisco,\n\n22\n00:01:17,160 --> 00:01:21,580\nor implementing Cisco IOS network\nsecurity exam, not certification.\n\n23\n00:01:23,150 --> 00:01:27,290\nBut CCNA security is the certification,\nif I can get my head on straight.\n\n24\n00:01:27,290 --> 00:01:30,940\nAnd we're gonna be diving\ninto access control Lists.\n\n25\n00:01:30,940 --> 00:01:35,510\nAnd this is a topic where if you haven't\nbeen exposed to these in the past\n\n26\n00:01:35,510 --> 00:01:37,130\nthey're a little complex.\n\n27\n00:01:37,130 --> 00:01:41,090\nThe command line can be a little\nbit lengthy in some scenarios.\n\n28\n00:01:41,090 --> 00:01:44,550\nAnd it is a challenging concept for\nsome people.\n\n29\n00:01:44,550 --> 00:01:49,340\nBut it is an important concept because it\nis the cornerstone of security inside of\n\n30\n00:01:49,340 --> 00:01:50,150\na Cisco device.\n\n31\n00:01:50,150 --> 00:01:54,270\n>> Yeah, there is no putting\nthat in any other perspective.\n\n32\n00:01:54,270 --> 00:01:58,610\nThe very first things that you tend to\nlearn about in terms of security and\n\n33\n00:01:58,610 --> 00:02:01,330\ncontrolling traffic going in and\nout of router switches and\n\n34\n00:02:01,330 --> 00:02:03,150\nstuff like that It's going to be ACL's.\n\n35\n00:02:03,150 --> 00:02:05,760\nAnd so we want to make sure\nthat we dive in this topic and\n\n36\n00:02:05,760 --> 00:02:10,010\ngive you a full coverage of this so that\nyou have a complete understanding of it,\n\n37\n00:02:10,010 --> 00:02:13,650\nnot only for the exam but also for\nthe field when you get out there.\n\n38\n00:02:13,650 --> 00:02:16,990\n>> And\nwe've touched on ACL's just a little bit.\n\n39\n00:02:16,990 --> 00:02:21,746\nFor example we ran the one\nstep lockdown the audit\n\n40\n00:02:21,746 --> 00:02:27,150\nwizard thing it actually\ncreated some ACL's for us.\n\n41\n00:02:27,150 --> 00:02:29,630\nThey helped restrict who\ncould access the system.\n\n42\n00:02:29,630 --> 00:02:33,240\nWell today we're going to create them on\nour own for profit and pleasure right.\n\n43\n00:02:33,240 --> 00:02:33,950\n>> Right.\n>> And so\n\n44\n00:02:33,950 --> 00:02:36,570\nwe'll be able to create some\nthat really do whatever we want.\n\n45\n00:02:36,570 --> 00:02:37,930\nAnd we're going to do it by hand.\n\n46\n00:02:37,930 --> 00:02:40,350\nSo we'll get a chance to see it,\nand we'll do it through the CCP,\n\n47\n00:02:40,350 --> 00:02:42,440\nthe Cisco Configuration Professional.\n\n48\n00:02:42,440 --> 00:02:45,170\nWe'll do it that way,\nbecause they do show up on the exam there,\n\n49\n00:02:45,170 --> 00:02:49,250\nbut we'll also do it from the command\nline, which is the more common method.\n\n50\n00:02:49,250 --> 00:02:53,150\nAll right, so the first thing, the first\nobjective, that Cisco calls out, and\n\n51\n00:02:53,150 --> 00:02:55,620\nsome of their objectives,\nI don't really like the order they're in.\n\n52\n00:02:55,620 --> 00:02:59,030\nBut The first thing they call out\nis that we do need to remember that\n\n53\n00:02:59,030 --> 00:03:04,690\nthe objectives, that the ACLs,\naddress IPv4 as well as IPv6.\n\n54\n00:03:04,690 --> 00:03:07,910\nNow, I know we talked about that in\nanother episode, but just to reiterate,\n\n55\n00:03:07,910 --> 00:03:12,130\ncuz it is important, if you write\na ton of access lists for IPv4 and\n\n56\n00:03:12,130 --> 00:03:17,760\nyou don't write any for IPv6,\nyour IPv6 network is unsecured, right?\n\n57\n00:03:17,760 --> 00:03:20,360\nOr insecure, or whatever the word is.\n\n58\n00:03:20,360 --> 00:03:23,936\nIt's insecure it has no\nfaith in it's own abilities.\n\n59\n00:03:23,936 --> 00:03:25,030\n>> [LAUGH]\n>> Anyhow, so\n\n60\n00:03:25,030 --> 00:03:27,070\nwe need to make sure that\nwe address both protocols.\n\n61\n00:03:27,070 --> 00:03:28,370\nIf we're running both protocols.\n\n62\n00:03:28,370 --> 00:03:32,260\nIf you're just running IPv4 and\nyou don't need IPv6 ACL's.\n\n63\n00:03:32,260 --> 00:03:37,430\nBut if you've left IPv6 enabled,\nif you got autoconfiguration turned on or\n\n64\n00:03:37,430 --> 00:03:41,390\nwhatever, you might think you're\nnot running IPv6 but you are.\n\n65\n00:03:41,390 --> 00:03:45,400\nAnd so it's important to go through and\nprotect your network on that side also.\n\n66\n00:03:45,400 --> 00:03:46,350\n>> Yeah.\nThe good thing is,\n\n67\n00:03:46,350 --> 00:03:50,900\nregardless of wether we're running IPv4 or\nIPv6 The syntax for\n\n68\n00:03:50,900 --> 00:03:56,280\nit is relatively the same with a little\nbit of IPv6 language thrown in there.\n\n69\n00:03:56,280 --> 00:03:57,940\nBut it does work in the same way.\n\n70\n00:03:57,940 --> 00:04:00,410\nYou don't actually have\nto modify too much.\n\n71\n00:04:00,410 --> 00:04:02,120\nThere's a couple of extra default rules,\nbut\n\n72\n00:04:02,120 --> 00:04:05,600\nbesides that- you'll see\nthat when we get into it.\n\n73\n00:04:05,600 --> 00:04:07,810\nNow when we start writing ACL's,\n\n74\n00:04:07,810 --> 00:04:11,550\nthe command line you know is made\nup of a bunch of different pieces.\n\n75\n00:04:11,550 --> 00:04:14,440\nBasically what you're doing is you're\ntelling the router here's traffic I\n\n76\n00:04:14,440 --> 00:04:15,080\nwant to allow.\n\n77\n00:04:15,080 --> 00:04:18,140\nAnd here's traffic that I want to deny.\n\n78\n00:04:18,140 --> 00:04:20,380\nAnd so looking at our objectives,\n\n79\n00:04:20,380 --> 00:04:24,145\nobjective number four or I guess\nit's 4.1.4 if we followed or 4.1.D.\n\n80\n00:04:24,145 --> 00:04:26,090\n[LAUGH] is ACL operations.\n\n81\n00:04:26,090 --> 00:04:30,310\nLet's go a little out\nof order here Ronnie.\n\n82\n00:04:30,310 --> 00:04:33,060\nI wanna put these in the logical order.\n\n83\n00:04:33,060 --> 00:04:34,130\n>> Sure.\n\n84\n00:04:34,130 --> 00:04:37,820\nSo first off before we can implement\nACL's we need to know what they do.\n\n85\n00:04:37,820 --> 00:04:42,630\nAnd what they do is they filter traffic,\nthat's their primary operation, right?\n\n86\n00:04:42,630 --> 00:04:49,880\nThey either permit or deny traffic,\nthose are the two operations of an ACL.\n\n87\n00:04:49,880 --> 00:04:53,520\nPermit says any traffic\nthat matches this pattern,\n\n88\n00:04:53,520 --> 00:04:55,370\nis allowed to go through the router.\n\n89\n00:04:55,370 --> 00:05:01,270\nAnd deny says any traffic that matches\nthis pattern, gets blocked and thrown out.\n\n90\n00:05:01,270 --> 00:05:06,700\nAnd in ACL, it's an access control list,\nand so it's really just a list\n\n91\n00:05:06,700 --> 00:05:09,930\nof these filters, listing what traffic's\nallowed and what traffic is denied.\n\n92\n00:05:11,410 --> 00:05:16,600\nAnd those entries, they're called Access\nControlled Entries, or ACE's all right.\n\n93\n00:05:16,600 --> 00:05:21,080\nSo let me fire up a little notepad window\nhere and kind of break some of this down.\n\n94\n00:05:22,170 --> 00:05:27,120\nSo when we build an ACL,\nthat is an access control list,\n\n95\n00:05:27,120 --> 00:05:28,830\nlet's switch over to my computer.\n\n96\n00:05:28,830 --> 00:05:31,780\nI'm going to jot some\nnotes here on the screen.\n\n97\n00:05:31,780 --> 00:05:39,220\nSo we'll do Access Control Lists and\nACE is Access Control Entry, right?\n\n98\n00:05:39,220 --> 00:05:41,860\nOr entries if we've got more than one.\n\n99\n00:05:41,860 --> 00:05:45,090\nAnd so when we make a list we're\njust listing what traffic I want to\n\n100\n00:05:45,090 --> 00:05:46,170\nallow and deny.\n\n101\n00:05:46,170 --> 00:05:49,160\nAnd let's think of it in terms\nof English for a minute.\n\n102\n00:05:49,160 --> 00:05:53,890\nNot actual command line syntax or\nwhatever but I might want\n\n103\n00:05:55,060 --> 00:06:00,960\nto deny web traffic to\nRonnie's machine and\n\n104\n00:06:00,960 --> 00:06:07,629\ni might want to permit FTP\ntraffic to Ronnie's machine.\n\n105\n00:06:07,629 --> 00:06:15,590\nAnd then I might want to permit\nall traffic to Dons machine.\n\n106\n00:06:17,010 --> 00:06:19,450\nThese are the things\nthat I want to perform.\n\n107\n00:06:19,450 --> 00:06:21,340\nI want to deny certain things.\n\n108\n00:06:21,340 --> 00:06:22,760\nI want to permit things.\n\n109\n00:06:22,760 --> 00:06:23,790\nAll right?\n\n110\n00:06:23,790 --> 00:06:27,230\nEach of these little entries here that I\njust made would be considered an access\n\n111\n00:06:27,230 --> 00:06:33,900\ncontrol entry and all three of them\ntogether would be an access control list.\n\n112\n00:06:33,900 --> 00:06:38,780\nWe write up a list like this and then we\nattach it to an interface on our router.\n\n113\n00:06:38,780 --> 00:06:42,170\nAnd then the traffic that goes through\nthe router gets the supply to it.\n\n114\n00:06:42,170 --> 00:06:45,320\n>> Yeah, so when we break down the idea\nof the operations here, right.\n\n115\n00:06:45,320 --> 00:06:46,580\nThere's gonna be two parts to it.\n\n116\n00:06:46,580 --> 00:06:49,930\nWe're gonna be able to actually\ncreate the access control list,\n\n117\n00:06:49,930 --> 00:06:51,270\nwhich will have entries.\n\n118\n00:06:51,270 --> 00:06:55,150\nBut then we also need to take that list\nand now apply it to the interface that\n\n119\n00:06:55,150 --> 00:06:57,890\nwe're going to be on and we'll see we\nalso have to included the direction.\n\n120\n00:06:57,890 --> 00:07:00,880\nWhether we're talking about incoming or\noutgoing traffic as well.\n\n121\n00:07:02,280 --> 00:07:06,320\n>> Now the list is applied in order.\n\n122\n00:07:06,320 --> 00:07:09,370\nThe list is applied from top to bottom.\n\n123\n00:07:09,370 --> 00:07:13,020\nAnd so, as traffic, so let's say I\nattach this to one of my interfaces.\n\n124\n00:07:13,020 --> 00:07:15,770\nAnd then,\nas traffic moves through that router.\n\n125\n00:07:15,770 --> 00:07:18,110\nIt says, alright,\nlet me take this traffic, and\n\n126\n00:07:18,110 --> 00:07:20,620\nlet me compare it to this ACL.\n\n127\n00:07:20,620 --> 00:07:21,730\nAnd it will look at the first list.\n\n128\n00:07:21,730 --> 00:07:27,305\nAnd let's say that this is FTP traffic\ndestined for Ronnie's machine, right?\n\n129\n00:07:27,305 --> 00:07:30,585\nOr let's say it's web traffic destined for\nRonnie's machine, right?\n\n130\n00:07:30,585 --> 00:07:34,045\nSo it sees this web traffic coming in and\nit goes to the first line, and\n\n131\n00:07:34,045 --> 00:07:36,540\nit says deny web traffic\nto Ronnie's machine\n\n132\n00:07:36,540 --> 00:07:40,610\nthis traffic is web traffic to\nRonnie's machine, so it denies it.\n\n133\n00:07:40,610 --> 00:07:44,190\nIt hits that line,\nit blocks it and that's the end.\n\n134\n00:07:44,190 --> 00:07:47,710\nNow what if it was FTP traffic for\nRonnie's machine?\n\n135\n00:07:47,710 --> 00:07:51,140\nWell, it still looks at the first line and\nit says,\n\n136\n00:07:51,140 --> 00:07:53,820\nwell, the first line's web traffic,\nthis is FTP.\n\n137\n00:07:53,820 --> 00:07:55,466\nIt doesn't match.\n\n138\n00:07:55,466 --> 00:07:58,871\nIt just moves down to the next entry,\nso it moves down to this one.\n\n139\n00:07:58,871 --> 00:08:03,337\nWell, it is FTP traffic from Ronnie's\nmachine, so this one matches.\n\n140\n00:08:03,337 --> 00:08:07,300\nAnd it applies and\nthat's the result that's taken.\n\n141\n00:08:07,300 --> 00:08:10,020\nNow, that's an important concept.\n\n142\n00:08:10,020 --> 00:08:12,270\nYou start from the top and\nwork your way down.\n\n143\n00:08:12,270 --> 00:08:15,150\nThe first match is the one that applies.\n\n144\n00:08:15,150 --> 00:08:19,780\nSo if there was another line down\nhere that said Deny ftp traffic\n\n145\n00:08:19,780 --> 00:08:21,600\nto Ronnie's machine.\n\n146\n00:08:21,600 --> 00:08:22,390\nOkay?\n\n147\n00:08:22,390 --> 00:08:27,610\nWell, I've got a Permit here,\nand I've got a Deny down here.\n\n148\n00:08:27,610 --> 00:08:30,920\nThat Deny will never get used.\n\n149\n00:08:30,920 --> 00:08:32,890\nWe'll match that second line.\n\n150\n00:08:32,890 --> 00:08:35,740\nThat'll apply, and\nthen that traffic is permitted.\n\n151\n00:08:35,740 --> 00:08:36,730\nThat's it.\n\n152\n00:08:36,730 --> 00:08:41,040\n>> So we don't have to take\nthe entire list as a whole, right?\n\n153\n00:08:41,040 --> 00:08:42,360\nSo remember that for us.\n\n154\n00:08:42,360 --> 00:08:44,170\nAs the processing goes through,\n\n155\n00:08:44,170 --> 00:08:47,750\nas traffic comes through, first match\nis the only one that applies that\n\n156\n00:08:47,750 --> 00:08:51,320\ndoesn't even go through the rest of that\nthicker list for that traffic for us.\n\n157\n00:08:51,320 --> 00:08:54,090\nSo, that is a very important concept for\nus as well.\n\n158\n00:08:55,270 --> 00:09:00,560\n>> All right, now what if it\ndoesn't match any of the entries?\n\n159\n00:09:00,560 --> 00:09:03,300\nRight so, I just added line numbers to it,\nso that I can kind of keep it straight.\n\n160\n00:09:03,300 --> 00:09:05,080\nRight?\nSo I got line one, two, three and four.\n\n161\n00:09:05,080 --> 00:09:07,830\nOr really I should say that\nthey are entry, right?\n\n162\n00:09:07,830 --> 00:09:12,208\nSo let me change that.\n\n163\n00:09:12,208 --> 00:09:13,010\nWell, that didn't work.\n\n164\n00:09:13,010 --> 00:09:15,032\n>> [LAUGH]\n>> Line entry replace all.\n\n165\n00:09:15,032 --> 00:09:15,800\nThere we go.\n\n166\n00:09:15,800 --> 00:09:20,080\nOkay, so if we say,\ndeny web traffic and so on.\n\n167\n00:09:20,080 --> 00:09:24,820\nWhat if I have web traffic destined for,\nwell, let's just say, for\n\n168\n00:09:24,820 --> 00:09:27,610\nexample, web traffic destined for\nDon's machine, right?\n\n169\n00:09:27,610 --> 00:09:31,380\nWell, I've got Deny web traffic to\nRonnie's so that doesn't match.\n\n170\n00:09:31,380 --> 00:09:34,700\nPermit FTP traffic to Ronnie,\nso that doesn't match.\n\n171\n00:09:34,700 --> 00:09:37,690\nPermit all traffic to Don's machine.\n\n172\n00:09:37,690 --> 00:09:40,790\nWell, web traffic would be part of that,\nso it matches.\n\n173\n00:09:40,790 --> 00:09:43,230\nThat would happen, and\nthe traffic would be permitted.\n\n174\n00:09:43,230 --> 00:09:48,050\nBut what if it was SSH\ntraffic to Ronnie's machine?\n\n175\n00:09:48,050 --> 00:09:50,770\nWell, it's not gonna match the first line,\ncuz it's not web traffic.\n\n176\n00:09:50,770 --> 00:09:53,086\nIt's not gonna match the second one,\ncuz it's not FTP.\n\n177\n00:09:53,086 --> 00:09:57,590\nIt's not gonna match the third one,\nwell, it is all traffic, but\n\n178\n00:09:57,590 --> 00:09:59,390\nit's not to Don's machine, right?\n\n179\n00:09:59,390 --> 00:10:01,760\nThis is SSH to Ronnie's machine and\n\n180\n00:10:01,760 --> 00:10:05,140\nit's not gonna match the last one either,\nall right?\n\n181\n00:10:05,140 --> 00:10:09,450\nAnd so what happens is,\nany traffic that doesn't match\n\n182\n00:10:09,450 --> 00:10:14,810\nany line hits what's called\nan implicit deny all.\n\n183\n00:10:14,810 --> 00:10:17,620\nThat it's implied that if\nyou don't match the list,\n\n184\n00:10:17,620 --> 00:10:19,710\nyou must not be allowed and\nyou get denied.\n\n185\n00:10:20,870 --> 00:10:23,720\n>> So remember that when you create an\naccess control list, at the end of that,\n\n186\n00:10:23,720 --> 00:10:28,490\nthere is always an implicit deny,\nit may not always show up, but\n\n187\n00:10:28,490 --> 00:10:32,650\nwhen you're asked to again, verify,\nlike why isn't this going through?\n\n188\n00:10:32,650 --> 00:10:36,380\nYou've gotta remember that that particular\nentry is actually in there at the end.\n\n189\n00:10:36,380 --> 00:10:38,570\nCuz if not,\nthat will throw you every time and\n\n190\n00:10:38,570 --> 00:10:39,970\nthat's where you'll get caught in this.\n\n191\n00:10:41,390 --> 00:10:45,300\n>> So the reason I want to highlight\nthat here, is that when we write an ACL,\n\n192\n00:10:45,300 --> 00:10:50,130\nthere's really two general things\nwe're trying to achieve, right?\n\n193\n00:10:50,130 --> 00:10:55,420\nSometimes we write an ACL because we\njust want to block specific things and\n\n194\n00:10:55,420 --> 00:10:56,150\nallow everything else.\n\n195\n00:10:57,230 --> 00:11:01,530\nSo, maybe I'm tired\n\n196\n00:11:01,530 --> 00:11:06,470\nof people on my network using Netflix and\neating up my bandwidth and\n\n197\n00:11:06,470 --> 00:11:10,710\nI'm tired of people using Telnet,\nbecause it's not secure.\n\n198\n00:11:10,710 --> 00:11:11,692\nRight, let's go from that angle.\n\n199\n00:11:11,692 --> 00:11:16,267\nI'm fed up with people using Telnet and\nFTP.\n\n200\n00:11:16,267 --> 00:11:23,619\nI don't want people using\nthese non-secure protocols so\n\n201\n00:11:23,619 --> 00:11:28,869\nI might want to write\nan ACL that denies all\n\n202\n00:11:28,869 --> 00:11:34,680\nFTP traffic and Deny all Telnet traffic.\n\n203\n00:11:34,680 --> 00:11:38,066\nSo if I write that list like that and\nI stop right here,\n\n204\n00:11:38,066 --> 00:11:41,080\nI'm denying what I want to deny.\n\n205\n00:11:41,080 --> 00:11:45,910\nWell, everyone is going to get\ndenied because if you don't\n\n206\n00:11:45,910 --> 00:11:50,934\nmatch these first two lines,\nyou hit the implicit deny all and\n\n207\n00:11:50,934 --> 00:11:54,800\nyou're not getting anywhere, right?\n\n208\n00:11:54,800 --> 00:11:59,940\nSo, if we're going to do a list where\nwe just want to block a few things and\n\n209\n00:11:59,940 --> 00:12:06,750\nthat's it, you need to remember to add one\nmore line that says, permit all traffic.\n\n210\n00:12:06,750 --> 00:12:07,830\n>> Yeah.\n\n211\n00:12:07,830 --> 00:12:09,680\n>> And you might say to yourself,\nwait a minute,\n\n212\n00:12:09,680 --> 00:12:11,400\nI don't want to permit all traffic, right?\n\n213\n00:12:11,400 --> 00:12:13,140\nI want to block this other stuff.\n\n214\n00:12:13,140 --> 00:12:15,830\nDon't worry, it's applied in order.\n\n215\n00:12:15,830 --> 00:12:17,012\nSo all FTP and\n\n216\n00:12:17,012 --> 00:12:21,890\nTelnet traffic will be denied and\nthen everything else will be permitted.\n\n217\n00:12:21,890 --> 00:12:26,220\nThis last line here, the deny all traffic,\nthat will never get used,\n\n218\n00:12:26,220 --> 00:12:29,490\nit'll never get hit because\nthe permit all is right above it.\n\n219\n00:12:29,490 --> 00:12:32,170\n>> Yeah, and that brings up a good\nprinciple that you normally talk\n\n220\n00:12:32,170 --> 00:12:34,820\nabout here when you create\nan access control list.\n\n221\n00:12:34,820 --> 00:12:38,820\nRegardless of the access control list, you\nwant to make sure that there is at least\n\n222\n00:12:38,820 --> 00:12:42,870\none permit statement in there that\nallows traffic to go through.\n\n223\n00:12:42,870 --> 00:12:45,260\nIf not, with that implicit deny all,\n\n224\n00:12:45,260 --> 00:12:48,360\nno matter what you actually could do,\nyou're not gonna get any traffic.\n\n225\n00:12:48,360 --> 00:12:51,140\nAnd I guarantee you, that's not gonna be\na good day for anyone on your network.\n\n226\n00:12:52,440 --> 00:12:54,080\n>> Now, what if it's the opposite?\n\n227\n00:12:54,080 --> 00:12:57,440\nWhat if I want a really secure network?\n\n228\n00:12:57,440 --> 00:12:59,820\nAnd instead of blocking certain things and\n\n229\n00:12:59,820 --> 00:13:05,280\nallowing everything else, I want to allow\ncertain things and block everything else.\n\n230\n00:13:05,280 --> 00:13:08,673\nSo maybe I've decided that,\nhey, in the ITProTV studios,\n\n231\n00:13:08,673 --> 00:13:11,010\nwe are just not getting enough work done.\n\n232\n00:13:11,010 --> 00:13:14,076\nI look over there and our producer and our\ndirector, they're on Facebook and browsing\n\n233\n00:13:14,076 --> 00:13:17,021\nInternet and meanwhile Ronnie, [CROSSTALK]\nyou and I are doing some hard work here.\n\n234\n00:13:17,021 --> 00:13:17,614\n>> Yep, that's right.\n\n235\n00:13:17,614 --> 00:13:20,827\n>> So, maybe I decide that\nI want to allow you and\n\n236\n00:13:20,827 --> 00:13:25,770\nme to get out to the Internet, and\njust nobody else gets in anywhere.\n\n237\n00:13:25,770 --> 00:13:28,730\nSo, a list like that could be pretty easy.\n\n238\n00:13:28,730 --> 00:13:35,860\nI could write a list that said Permit\nall traffic from Ronnie's machine and\n\n239\n00:13:35,860 --> 00:13:40,290\nI could then do another one that said\nPermit all traffic from Don's machine.\n\n240\n00:13:42,040 --> 00:13:46,705\nAnd if I stop right here,\nthis actually works out fine, right?\n\n241\n00:13:46,705 --> 00:13:50,550\nIt works out fine because Ronnie and\nI are permitted, and\n\n242\n00:13:50,550 --> 00:13:55,310\neveryone else hits that implicit deny all,\nthat entry that I don't even have to type.\n\n243\n00:13:55,310 --> 00:13:57,840\nThey hit that and it stops them, right?\n\n244\n00:13:59,080 --> 00:14:00,400\nSo in a list like this,\n\n245\n00:14:00,400 --> 00:14:04,460\nwhen you're trying to be ultra secure, the\nimplicit deny all actually helps you out.\n\n246\n00:14:04,460 --> 00:14:05,051\nAll right?\nBut\n\n247\n00:14:05,051 --> 00:14:08,821\nin a list like this up here where you're\njust trying to block certain things,\n\n248\n00:14:08,821 --> 00:14:12,829\nthe implicit deny all gets in the way and\nso you've got to remember to override it.\n\n249\n00:14:15,431 --> 00:14:20,720\nAll right, now I didn't use any\nactual command syntax here, right?\n\n250\n00:14:20,720 --> 00:14:22,670\nBecause I want us all\nthinking conceptually,\n\n251\n00:14:22,670 --> 00:14:25,400\nhow these lists work,\nbefore we start to write them.\n\n252\n00:14:25,400 --> 00:14:30,010\nAnd that's because once you've\nwritten them, it's not impossible but\n\n253\n00:14:30,010 --> 00:14:32,440\nit's kind of annoying to change the lists.\n\n254\n00:14:32,440 --> 00:14:36,320\nAnd so if you can write it correctly from\nthe beginning, you'll be better off.\n\n255\n00:14:36,320 --> 00:14:38,910\nSo that's why I want to make sure\nwe've got these good concepts.\n\n256\n00:14:39,940 --> 00:14:41,130\nAll right.\n\n257\n00:14:41,130 --> 00:14:42,720\nSo we really have to think\nabout a lot of stuff,\n\n258\n00:14:42,720 --> 00:14:46,560\nwe have to think about the order that our\ncommands are written in and we have to\n\n259\n00:14:46,560 --> 00:14:49,930\nthink about those implicit lines that\ndon't necessarily show up, right?\n\n260\n00:14:49,930 --> 00:14:53,000\nLet me give you guys\nan example of a bad order.\n\n261\n00:14:53,000 --> 00:14:56,920\nSo, if I were to take this list here,\n\n262\n00:14:56,920 --> 00:15:00,995\nthis example where I wanted to block\ncertain traffic and allow everything else.\n\n263\n00:15:00,995 --> 00:15:07,090\nLet's say that we wrote that list but\nin a slightly different order, okay?\n\n264\n00:15:07,090 --> 00:15:13,058\nLet's say That I\n\n265\n00:15:13,058 --> 00:15:18,480\nsaid all right,\nI wanna permit pretty much everything.\n\n266\n00:15:18,480 --> 00:15:22,410\nBut then I want to deny certain traffic\nand so I write the list like this.\n\n267\n00:15:22,410 --> 00:15:26,220\nSo I come through and I say, all right,\npermit all traffic, but deny FTP and\n\n268\n00:15:26,220 --> 00:15:28,620\ndeny Telnet, all right?\n\n269\n00:15:28,620 --> 00:15:31,970\nIf we put this list in place,\nwe wouldn't get the desired result.\n\n270\n00:15:31,970 --> 00:15:32,600\n>> Yeah.\n\n271\n00:15:32,600 --> 00:15:36,900\nThe desired or the action that will\ncome through for us is simple, right?\n\n272\n00:15:36,900 --> 00:15:39,730\nRemember that once it\nhits the first match,\n\n273\n00:15:39,730 --> 00:15:42,860\nit doesn't process the rest\nof this list any further.\n\n274\n00:15:42,860 --> 00:15:44,820\nSo it doesn't matter that\nyou want to deny FTP.\n\n275\n00:15:44,820 --> 00:15:47,150\nIt doesn't matter if you\nwant to deny Telnet traffic.\n\n276\n00:15:48,300 --> 00:15:51,770\nEntry number one says permit all,\nand it doesn't even look at that.\n\n277\n00:15:51,770 --> 00:15:55,980\nSo if you do have FTP or Telnet traffic,\nit's gonna say, I matched this first one.\n\n278\n00:15:55,980 --> 00:16:01,050\nI'm not gonna go any further and so this\ndefeats our deny entries here, incredibly.\n\n279\n00:16:02,090 --> 00:16:02,680\n>> Yep.\n\n280\n00:16:02,680 --> 00:16:04,552\nYeah, in fact, this ACL,\nyou might as well not have written it.\n\n281\n00:16:04,552 --> 00:16:06,931\nIf your first line is\na Permit all traffic,\n\n282\n00:16:06,931 --> 00:16:09,120\nyour ACL's not really helpful at all.\n\n283\n00:16:09,120 --> 00:16:13,155\nSo So, keeping in mind the order\nthat we arranged things.\n\n284\n00:16:13,155 --> 00:16:17,244\nAnd as your access lists grow,\nas they get more and more ACE's or\n\n285\n00:16:17,244 --> 00:16:20,577\naccess control entries in them,\nit can be harder and\n\n286\n00:16:20,577 --> 00:16:24,780\nharder to keep track of where you\nneed to put things into the list.\n\n287\n00:16:24,780 --> 00:16:26,480\nSo, be aware that.\n\n288\n00:16:26,480 --> 00:16:30,660\nAnd speaking of the size of these lists,\nin all the examples you'll see,\n\n289\n00:16:30,660 --> 00:16:35,110\nlike in textbooks and stuff like that,\nthe ACL's they write they might be four or\n\n290\n00:16:35,110 --> 00:16:36,900\nfive lines, not too big.\n\n291\n00:16:36,900 --> 00:16:40,580\nIn the real world, you may write\nACL's that are very, very long.\n\n292\n00:16:40,580 --> 00:16:43,450\nI've used several in production\nenvironments that were 100\n\n293\n00:16:43,450 --> 00:16:44,370\nentries or more.\n\n294\n00:16:44,370 --> 00:16:47,800\nAnd so\nthat's not a terribly uncommon thing.\n\n295\n00:16:47,800 --> 00:16:51,510\nKeep in mind, the bigger the ACL is,\n\n296\n00:16:51,510 --> 00:16:55,330\nthe more it affects the performance\nof the router or layer three switch.\n\n297\n00:16:55,330 --> 00:16:58,590\nAnd so as your traffic is being\nfiltered through this ACL,\n\n298\n00:16:58,590 --> 00:17:01,370\nthat takes a little bit of\nresources on the system.\n\n299\n00:17:01,370 --> 00:17:03,360\nNow, when you type an ACL.\n\n300\n00:17:03,360 --> 00:17:06,120\n>> Your routers actually taking it and\n\n301\n00:17:06,120 --> 00:17:09,670\ncompiling it into a much\nmore efficient ACL.\n\n302\n00:17:09,670 --> 00:17:12,870\nAnd then it's executing it on your\nhigher end routers it's doing it\n\n303\n00:17:12,870 --> 00:17:15,870\non the data plane of the router,\nso it's done very, very fast.\n\n304\n00:17:15,870 --> 00:17:16,600\nAlright?\n\n305\n00:17:16,600 --> 00:17:20,620\nOn some layer three switches though it's\nactually done in the control plane and\n\n306\n00:17:20,620 --> 00:17:23,350\nthat means that it's,\nthe performance is a little bit harder.\n\n307\n00:17:23,350 --> 00:17:25,490\nSo you do need to be aware of that.\n\n308\n00:17:25,490 --> 00:17:28,310\nDon't go crazy with the ACL's.\n\n309\n00:17:28,310 --> 00:17:32,020\nThe other thing is you might be thinking\nwow, this is a lot like firewalling.\n\n310\n00:17:32,020 --> 00:17:34,900\nRight?\nAnd I'm choosing traffic to allow through.\n\n311\n00:17:34,900 --> 00:17:38,260\nThere's one big problem with ACL's.\n\n312\n00:17:38,260 --> 00:17:41,010\nACL's are not stateful.\n\n313\n00:17:41,010 --> 00:17:41,860\nAll right?\n\n314\n00:17:41,860 --> 00:17:45,930\nMost of your firewalls that are out there,\nare what are called stateful firewalls,\n\n315\n00:17:45,930 --> 00:17:49,030\nand a stateful firewall has\na really simple premise.\n\n316\n00:17:49,030 --> 00:17:52,350\nIt says, if I allow the traffic to go out\n\n317\n00:17:52,350 --> 00:17:55,700\nI'd probably want to allow\nthe replies to come back in.\n\n318\n00:17:55,700 --> 00:17:59,820\nSo on an internet firewall, for example,\nyou might have a rule that says nobody\n\n319\n00:17:59,820 --> 00:18:03,350\non the internet is allowed\nto access my network.\n\n320\n00:18:03,350 --> 00:18:06,335\nBut then you have a rule that says\nbecause the people inside my network\n\n321\n00:18:06,335 --> 00:18:08,185\nare allowed to get out to the internet.\n\n322\n00:18:08,185 --> 00:18:10,645\nWell if they can get out to the internet,\n\n323\n00:18:10,645 --> 00:18:12,955\nthen the hosts on the internet\nhave to be able to reply.\n\n324\n00:18:12,955 --> 00:18:15,365\nLike Amazon, or\nwhat ever web site your going to.\n\n325\n00:18:15,365 --> 00:18:17,630\nThat web server has to\nbe able to reply to you.\n\n326\n00:18:17,630 --> 00:18:20,210\nBut there's a rule that says no one\non the Internet is allowed to talk to\n\n327\n00:18:20,210 --> 00:18:21,455\nthe inside network.\n\n328\n00:18:21,455 --> 00:18:25,080\nThey're not gonna be able to reply and\nthe traffic is gonna be blocked.\n\n329\n00:18:25,080 --> 00:18:26,925\nThat's what ACL's do.\n\n330\n00:18:26,925 --> 00:18:32,300\nACL's do not track state, but a firewall\nwill say oh if I allowed you out.\n\n331\n00:18:32,300 --> 00:18:36,700\nI'll create a temporary exception that\nallows that host to reply back so\n\n332\n00:18:36,700 --> 00:18:37,880\nyou can communicate.\n\n333\n00:18:37,880 --> 00:18:41,670\nSo given the choice,\nyou'd rather do this stuff on a FireWire.\n\n334\n00:18:42,820 --> 00:18:45,320\nBut, you can use the router to do it.\n\n335\n00:18:45,320 --> 00:18:46,295\nAnd that's what we're gonna show.\n\n336\n00:18:46,295 --> 00:18:46,960\n>> Hm-mm.\n\n337\n00:18:46,960 --> 00:18:47,680\nYeah.\n\n338\n00:18:47,680 --> 00:18:49,800\nNow going back to our list that we had.\n\n339\n00:18:49,800 --> 00:18:51,190\nRight.\nThe improper list here.\n\n340\n00:18:51,190 --> 00:18:52,560\nThis brings up a good principle.\n\n341\n00:18:52,560 --> 00:18:55,060\nFor us when creating\nthe idea of the ACL's.\n\n342\n00:18:55,060 --> 00:18:57,730\nYou hear about this all the time,\nand you'll read about it as well.\n\n343\n00:18:57,730 --> 00:19:02,690\nThey talk about the most specific\nentries should be up at the top and\n\n344\n00:19:02,690 --> 00:19:05,950\nyou should end at the bottom with\nthe most generic entries that you can.\n\n345\n00:19:05,950 --> 00:19:09,070\nBecause if you put the most generic ones\nup at the top like we have here on entry\n\n346\n00:19:09,070 --> 00:19:12,780\none that's where you're gonna have\na problem here because that is so\n\n347\n00:19:12,780 --> 00:19:14,520\ngeneric it covers everything,\n\n348\n00:19:14,520 --> 00:19:17,740\nand you're more specific stuff is\nessentially not even gonna be touched.\n\n349\n00:19:17,740 --> 00:19:21,150\nSo always try to keep that in\nmind when building your ACL's.\n\n350\n00:19:21,150 --> 00:19:23,680\nMore specific ones\nalways start at the top.\n\n351\n00:19:23,680 --> 00:19:27,640\n>> Yeah, and we'll show you when we write\nthese that it's easy to monitor them and\n\n352\n00:19:27,640 --> 00:19:31,790\nsee if they're being used, and so you can\nspot if the ACL's not working properly.\n\n353\n00:19:31,790 --> 00:19:34,600\n>> It is important to implement these and\ntest them.\n\n354\n00:19:34,600 --> 00:19:38,850\nAnother thing to be aware of is that\nan improperly written ACL could\n\n355\n00:19:38,850 --> 00:19:42,940\npotentially lock you out of the router or\nswitch.\n\n356\n00:19:42,940 --> 00:19:47,000\nSo if you're connected and making changes\nit's really important that you test before\n\n357\n00:19:47,000 --> 00:19:48,680\nyou save your configuration.\n\n358\n00:19:48,680 --> 00:19:52,840\nIf you haven't saved yet, then somebody\ncould easily reboot the hardware and\n\n359\n00:19:52,840 --> 00:19:55,690\nit goes back to the way that it was and\nyou're now locked out.\n\n360\n00:19:55,690 --> 00:19:58,670\nBut if you save it, and\nyou've locked yourself out, you\n\n361\n00:19:58,670 --> 00:20:02,190\nmight not be able to get back into that\nrouter unless you can physically go to it.\n\n362\n00:20:02,190 --> 00:20:06,970\nIf it's in another city, or another state,\nanother country, that can be a big deal.\n\n363\n00:20:06,970 --> 00:20:10,180\n>> Speaking of this, the way that\nwe've been showing you, you might go,\n\n364\n00:20:10,180 --> 00:20:11,960\n\"Why are we working on\nthe router right away?\n\n365\n00:20:11,960 --> 00:20:14,540\nWhy don't we just go ahead and\ndo this?\" well,\n\n366\n00:20:14,540 --> 00:20:17,990\none of the things that is recommended\nthat we absolutely would recommend for\n\n367\n00:20:17,990 --> 00:20:20,560\nyou to do,\nis to work out the logic first on paper,\n\n368\n00:20:20,560 --> 00:20:24,400\nand then when you learn the syntax,\neven in typing that out.\n\n369\n00:20:24,400 --> 00:20:27,880\nAnd making sure that you go, okay,\nhere's what I want it to look like, and\n\n370\n00:20:27,880 --> 00:20:30,100\nthen you can copy and\npaste it into the router itself.\n\n371\n00:20:31,400 --> 00:20:35,500\nNobody here, Don or I,\nhave ever directly just said, oh,\n\n372\n00:20:35,500 --> 00:20:41,110\nwe can make an ACL right off the top and\nit works perfectly, and then it failed.\n\n373\n00:20:41,110 --> 00:20:45,350\nI won't tell you who's done that before,\nbut I'll have so I will tell you.\n\n374\n00:20:45,350 --> 00:20:47,530\nSo, that's something\nthat you do want to try.\n\n375\n00:20:47,530 --> 00:20:52,790\nAnd so this is actually good best practice\nfor you when you do start to create ACL's.\n\n376\n00:20:52,790 --> 00:20:55,580\nWork it on the paper first,\nand then apply it.\n\n377\n00:20:55,580 --> 00:20:57,125\n>> Yeah, you know.\nA lot of the companies\n\n378\n00:20:57,125 --> 00:20:59,545\nthat I've worked for,\nwe've created ACLs by committee.\n\n379\n00:20:59,545 --> 00:21:03,305\nI know that sounds bad, but\nyou get the security team together, and\n\n380\n00:21:03,305 --> 00:21:04,205\nthe network team, and\n\n381\n00:21:04,205 --> 00:21:08,495\nyou basically come up with a planning\nsession of what you need to allow or not.\n\n382\n00:21:09,607 --> 00:21:13,277\nDuring those planning meetings you\ndon't need to think about syntax and\n\n383\n00:21:13,277 --> 00:21:15,797\nsometimes that's because you\nmight have more than one vendor.\n\n384\n00:21:15,797 --> 00:21:18,177\nYou might have a Cisco,\nand Juniper and whatever.\n\n385\n00:21:18,177 --> 00:21:19,747\nBut you just think about the concept.\n\n386\n00:21:19,747 --> 00:21:23,050\nYou say all right, conceptually what\nis it that we want to allow and deny.\n\n387\n00:21:23,050 --> 00:21:26,490\nAnd once you've got that list made up,\nyou can then go and sit down and\n\n388\n00:21:26,490 --> 00:21:28,800\nrearrange it to kind of meet your needs.\n\n389\n00:21:28,800 --> 00:21:32,920\nAnd once you've got that all worked out,\nthen you sit down and\n\n390\n00:21:32,920 --> 00:21:35,400\nactually come up with the syntax\nto implement the commands.\n\n391\n00:21:35,400 --> 00:21:35,940\nRight?\n>> Uh-huh.\n\n392\n00:21:35,940 --> 00:21:40,390\n>> So we need to be aware of what our\nneed is, what our company's need.\n\n393\n00:21:40,390 --> 00:21:44,180\n>> And then secondly we need to be\naware of what the router is capable of.\n\n394\n00:21:44,180 --> 00:21:44,850\n>> Oh, yeah, that's good.\n\n395\n00:21:44,850 --> 00:21:48,110\n>> Cuz there are certain capabilities\nthat some routers have and some don't.\n\n396\n00:21:48,110 --> 00:21:50,140\nAnd they call that out in the objectives.\n\n397\n00:21:50,140 --> 00:21:54,190\nI had it flagged as number 5,\nbut it's what, e or something.\n\n398\n00:21:55,280 --> 00:21:57,710\nSo types of ACL's.\n\n399\n00:21:59,110 --> 00:22:03,320\nMost of our ACL's are what\nare just called static ACL's.\n\n400\n00:22:03,320 --> 00:22:07,750\nWe define traffic that's allowed or\ndenied and that's it, right?\n\n401\n00:22:07,750 --> 00:22:10,980\nBut some routers have\nadvanced functionality and\n\n402\n00:22:10,980 --> 00:22:11,920\nlet me back track a second.\n\n403\n00:22:11,920 --> 00:22:17,090\nI keep saying routers ACL's\nare almost entirely used on routers.\n\n404\n00:22:17,090 --> 00:22:19,840\nYou can do ACL's on switches too.\n\n405\n00:22:19,840 --> 00:22:21,620\nWe'll even see some today.\n\n406\n00:22:21,620 --> 00:22:24,580\nThing is most switches\nare layered to devices, so\n\n407\n00:22:24,580 --> 00:22:27,320\nthe only thing they can really\nfilter on is Mac addresses and\n\n408\n00:22:27,320 --> 00:22:31,610\nfiltering based on Mac address\nis not just not worth it really.\n\n409\n00:22:31,610 --> 00:22:35,180\nAnd access is really easily spoofed and\nso on.\n\n410\n00:22:35,180 --> 00:22:38,090\nFiltering on IP address and\nfiltering on types of protocol and\n\n411\n00:22:38,090 --> 00:22:41,600\ntraffic that's better and\nrouters can do that.\n\n412\n00:22:41,600 --> 00:22:44,500\nLayer 3 switches can also do that.\n\n413\n00:22:44,500 --> 00:22:47,820\nSo if you have a layer 3 switch,\na switch with a router built into it,\n\n414\n00:22:47,820 --> 00:22:50,080\nthen it can use ACL it can\ndo it very powerfully.\n\n415\n00:22:50,080 --> 00:22:52,700\nWe do that right here in our own building.\n\n416\n00:22:52,700 --> 00:22:58,780\nOn the exam you're typically gonna see\nthis from the perspective of a router.\n\n417\n00:22:58,780 --> 00:23:04,498\nAll right, so some of the things that we\nmight have on an ACL, dynamic, right.\n\n418\n00:23:04,498 --> 00:23:07,020\nDynamic ACL's,\n\n419\n00:23:07,020 --> 00:23:12,710\nthose are ones that are created and\neliminated automatically by the router.\n\n420\n00:23:12,710 --> 00:23:15,540\nAll right?\nThese are used for certain scenarios.\n\n421\n00:23:15,540 --> 00:23:20,020\nYou can have ones that are trigger based,\nwhere you can say,\n\n422\n00:23:20,020 --> 00:23:24,590\nif somebody telnets in and\nauthenticates, then it will\n\n423\n00:23:24,590 --> 00:23:29,600\nin turn open up the web port to allow them\nto browse out to the internet, all right?\n\n424\n00:23:29,600 --> 00:23:34,200\nIt's dynamic in that a rule is created and\nremoved automatically by the router.\n\n425\n00:23:34,200 --> 00:23:37,310\nThat's an old way of\ncontrolling internet access.\n\n426\n00:23:37,310 --> 00:23:41,560\nI haven't seen anybody do that\nin probably 15 years now,\n\n427\n00:23:41,560 --> 00:23:45,590\nit had been a long time, so but\nthat's been around for a while.\n\n428\n00:23:45,590 --> 00:23:49,490\nYou also have other types of dynamic ACL's\nthat are triggered by various events.\n\n429\n00:23:49,490 --> 00:23:50,340\nRight?\n\n430\n00:23:50,340 --> 00:23:53,720\nOne of the big ones is like\na time-based ACL, right?\n\n431\n00:23:53,720 --> 00:23:57,570\nSo depending on the time of day,\nthis ACL may or may not apply.\n\n432\n00:23:57,570 --> 00:24:00,646\nAnd you see that for\ncompanies that have lunchtime policies.\n\n433\n00:24:00,646 --> 00:24:05,208\nYou may not be allowed to browse\nthe internet from 8 to noon and\n\n434\n00:24:05,208 --> 00:24:09,796\nfrom 1 to 5, but from noon to\n1 you can browse the internet.\n\n435\n00:24:09,796 --> 00:24:12,263\nIt's your lunch break,\ntake your time, enjoy yourself.\n\n436\n00:24:12,263 --> 00:24:16,400\nAnd so you can create time based\nACLs that apply based on a schedule.\n\n437\n00:24:18,120 --> 00:24:20,334\nAnd then last one I\nleft off was reflexive.\n\n438\n00:24:20,334 --> 00:24:24,819\nI mentioned stateful firewalls earlier,\nand how if we allow the traffic out we'd\n\n439\n00:24:24,819 --> 00:24:27,230\nprobably want to allow\nthe replies back in.\n\n440\n00:24:27,230 --> 00:24:30,644\nWell, that's an example\nof a reflexive ACL.\n\n441\n00:24:30,644 --> 00:24:34,240\nAllowing traffic out, we want to\ndo the reflection, the opposite,\n\n442\n00:24:34,240 --> 00:24:36,101\nand allow the reply to come back in.\n\n443\n00:24:36,101 --> 00:24:39,860\nSo reflexive ACL's are not supported\nby all Cisco hardware, but\n\n444\n00:24:39,860 --> 00:24:44,660\nthe router that we're using here, the\nrouter that's on the exam does support it.\n\n445\n00:24:44,660 --> 00:24:48,305\nSo you can set it up to be\nlike a pseudo firewall.\n\n446\n00:24:48,305 --> 00:24:53,330\nAnd an example there would be, for\nour Internet, for our WAN connection,\n\n447\n00:24:53,330 --> 00:24:59,740\nwe might have, for our WAM connection\n\n448\n00:24:59,740 --> 00:25:04,130\nwe usually just want to have one rule\nwhich says, Deny all incoming traffic.\n\n449\n00:25:07,200 --> 00:25:10,370\nYou don't wanna allow anybody on the\nInternet to be able to come in and gain,\n\n450\n00:25:10,370 --> 00:25:12,990\nget access to your systems.\n\n451\n00:25:12,990 --> 00:25:13,950\nBut if you do that,\n\n452\n00:25:13,950 --> 00:25:17,600\nthen you won't be able to get any replies,\nand so you effectively cut yourself off.\n\n453\n00:25:17,600 --> 00:25:21,458\nSo what we can do is we can\nmake that Entry 2 and for\n\n454\n00:25:21,458 --> 00:25:25,522\nEntry 1 we can say,\nPermit all incoming traffic.\n\n455\n00:25:28,378 --> 00:25:31,442\nReflexive, all right.\n\n456\n00:25:31,442 --> 00:25:35,960\nBasically saying if we requested it,\nif we asked for it,\n\n457\n00:25:35,960 --> 00:25:40,950\nyou can allow anything to pass\nfrom the outside to the inside.\n\n458\n00:25:40,950 --> 00:25:42,470\nIf we asked for it.\n\n459\n00:25:42,470 --> 00:25:46,130\nBut if we didn't ask for it,\nif it doesn't match a session,\n\n460\n00:25:46,130 --> 00:25:49,520\nsomething that we asked for,\nthen it'll go down to the second rule.\n\n461\n00:25:49,520 --> 00:25:50,710\nAnd it would be denied.\n\n462\n00:25:50,710 --> 00:25:56,450\nOkay, that's an example of how\nwe might use a reflexive ACL and\n\n463\n00:25:56,450 --> 00:25:58,890\nwhile the capability is there,\n\n464\n00:25:58,890 --> 00:26:01,940\nwe're gonna see a little bit later that's\nnot something we would want to use.\n\n465\n00:26:01,940 --> 00:26:03,890\nSo even the routers that do support it,\n\n466\n00:26:03,890 --> 00:26:05,440\nyou probably don't wanna\nuse that functionality.\n\n467\n00:26:06,520 --> 00:26:08,710\nI guess I don't have to\nbe cryptic about it.\n\n468\n00:26:08,710 --> 00:26:11,730\nYour router is designed to be a router,\nand\n\n469\n00:26:11,730 --> 00:26:14,950\nwhile this kind of thing sort of works,\nit does break a lot of protocols.\n\n470\n00:26:14,950 --> 00:26:16,290\nIt breaks SIP, it breaks FTP,\n\n471\n00:26:16,290 --> 00:26:20,620\nthere's a few other protocols that\nwon't work through reflexive ACL's.\n\n472\n00:26:20,620 --> 00:26:24,570\nA firewall, on the other hand,\nknows about those other protocols.\n\n473\n00:26:24,570 --> 00:26:28,630\nKnows how to keep them working and\noperational through reflexive ACLs, and so\n\n474\n00:26:28,630 --> 00:26:30,480\nyou normally want to use a firewall.\n\n475\n00:26:30,480 --> 00:26:34,550\nWell some Cisco routers,\nprobably most of them these days,\n\n476\n00:26:34,550 --> 00:26:36,970\nsupport what's called\nthe firewall feature set.\n\n477\n00:26:36,970 --> 00:26:40,940\nYou can pay a little extra and Cisco will\ngive you a license for the firewall,\n\n478\n00:26:40,940 --> 00:26:43,420\nthe zone based firewall,\ninside of the iOS.\n\n479\n00:26:43,420 --> 00:26:45,680\nIt enables a whole\ncollection of features and\n\n480\n00:26:45,680 --> 00:26:49,930\nbasically allows your router to\nact as a true stateful firewall.\n\n481\n00:26:49,930 --> 00:26:52,430\nAnd that's what eliminates the need for\nthese reflexive ACLs.\n\n482\n00:26:52,430 --> 00:26:54,220\nYou wouldn't need that if you\nwere a true stateful firewall.\n\n483\n00:26:55,305 --> 00:26:59,900\nNow, you might ask yourself,\nif Cisco lets us turn your router\n\n484\n00:26:59,900 --> 00:27:04,285\ninto a firewall,\nwhy would we buy an actual firewall?\n\n485\n00:27:04,285 --> 00:27:06,685\nAnd the reason is it comes down\nto something called ASICs.\n\n486\n00:27:06,685 --> 00:27:09,335\nI think I've mentioned\nthese in other episodes.\n\n487\n00:27:09,335 --> 00:27:13,535\nASICs are application\nspecific integrated circuits.\n\n488\n00:27:13,535 --> 00:27:17,620\nThey're processors that are on the\nmotherboard of the devices that we buy.\n\n489\n00:27:17,620 --> 00:27:21,190\nThat are specifically designed\nto perform singular functions.\n\n490\n00:27:21,190 --> 00:27:25,040\nSo for example, on router, you've got\nASICs that are specifically designed for\n\n491\n00:27:25,040 --> 00:27:27,300\nrouting, for moving traffic\nfrom one interface to another.\n\n492\n00:27:27,300 --> 00:27:28,870\nAnd that's why your router\ncan do it very fast.\n\n493\n00:27:30,240 --> 00:27:35,100\nOn a firewall, you have ASICs specifically\ndesigned for filtering traffic.\n\n494\n00:27:35,100 --> 00:27:39,160\nFor blocking and allowing traffic,\nand doing it at wire speed.\n\n495\n00:27:39,160 --> 00:27:41,890\nOn a router, you don't have those ASICs.\n\n496\n00:27:41,890 --> 00:27:45,310\nSo if you're running the firewall\nfeature set, you are a firewall,\n\n497\n00:27:45,310 --> 00:27:47,330\nyou're acting like a firewall.\n\n498\n00:27:47,330 --> 00:27:50,220\nBut you're doing it in software.\n\n499\n00:27:50,220 --> 00:27:53,828\nAnd that makes it suitable for\na home office or a branch office,\n\n500\n00:27:53,828 --> 00:27:54,924\nsomewhere small.\n\n501\n00:27:54,924 --> 00:27:59,352\nBut if you have more than, I don't know,\nI'd say probably more than 20 hosts,\n\n502\n00:27:59,352 --> 00:28:03,100\nthen you're really gonna get\na little bit of performance hit.\n\n503\n00:28:03,100 --> 00:28:07,210\nAnd you might be fine with that and\nmove on, that's fine.\n\n504\n00:28:07,210 --> 00:28:12,130\nBut if it's a performance intensive\noperation that you're running,\n\n505\n00:28:12,130 --> 00:28:13,130\nyou're gonna want a hardware file.\n\n506\n00:28:14,570 --> 00:28:16,230\nSo just keep that in mind.\n\n507\n00:28:16,230 --> 00:28:21,020\nAnd you'll see that all through, if you\nbuy a IINS book, you'll see it all through\n\n508\n00:28:21,020 --> 00:28:25,292\nthere where they mention, you can do this\non an ASA, you can do this and that.\n\n509\n00:28:25,292 --> 00:28:28,210\nAnd they're basically saying a hardware\nfirewall would do a better job.\n\n510\n00:28:29,620 --> 00:28:34,132\nSo, all right, so Ronnie,\nas far as our general firewall,\n\n511\n00:28:34,132 --> 00:28:38,100\nI mean, our ACL concepts,\nI think that's most of it.\n\n512\n00:28:39,180 --> 00:28:43,780\nThere is, I guess, two more things we\nneeded to talk about with the wild cards\n\n513\n00:28:43,780 --> 00:28:46,100\nand object groups,\nbefore we actually start writing them.\n\n514\n00:28:46,100 --> 00:28:49,400\nBut looking at the clock, it's probably\na good time to stop and take a break.\n\n515\n00:28:49,400 --> 00:28:52,100\nSo, you think of anything else to mention?\n\n516\n00:28:52,100 --> 00:28:56,800\n>> Yeah, I think we're about ready to\njump into some of the other actual syntax\n\n517\n00:28:56,800 --> 00:28:58,110\nrelated things.\n\n518\n00:28:58,110 --> 00:28:59,780\n>> All right, well ladies and\ngentlemen, stay tuned.\n\n519\n00:28:59,780 --> 00:29:02,390\nWhen we get back,\nwe do have a few more features, bells and\n\n520\n00:29:02,390 --> 00:29:03,150\nwhistles to talk about.\n\n521\n00:29:03,150 --> 00:29:05,340\nAnd then we're gonna jump into the routers\nand actually get some work done.\n\n522\n00:29:05,340 --> 00:29:07,946\nAll right.\nStay tuned, we'll be back after this.\n\n523\n00:29:07,946 --> 00:29:15,910\n[MUSIC]\n\n524\n00:29:15,910 --> 00:29:17,610\nAll right, welcome back everybody.\n\n525\n00:29:17,610 --> 00:29:20,450\nSo what we're gonna do now is we're\ngonna take a look at a couple\n\n526\n00:29:20,450 --> 00:29:22,420\nother pieces of our access control lists.\n\n527\n00:29:22,420 --> 00:29:26,650\nNow right before the break I mentioned,\nthe bigger the ACL,\n\n528\n00:29:26,650 --> 00:29:28,380\nthe more it can affect performance.\n\n529\n00:29:28,380 --> 00:29:32,750\nAnd so ideally we'll use real\nfirewalls when possible.\n\n530\n00:29:32,750 --> 00:29:36,440\nBut when it's not appropriate to have\na real firewall, so a small office or\n\n531\n00:29:36,440 --> 00:29:38,120\nwhatever, we could use our routers.\n\n532\n00:29:38,120 --> 00:29:43,562\nAnd there's little tricks that we\ncan use to make our ACLs smaller.\n\n533\n00:29:43,562 --> 00:29:46,070\nAll right,\nto shrink down the size of the ACL,\n\n534\n00:29:46,070 --> 00:29:49,930\nand the smaller the ACL the faster it'll\nfly, so the better for performance.\n\n535\n00:29:51,610 --> 00:29:56,732\nOne of the tools of the trade that we can\nuse is something called a wildcard mask.\n\n536\n00:29:56,732 --> 00:30:04,030\nA wildcard mask is kind of like a file\nwildcard, in that it allows us to specify\n\n537\n00:30:04,030 --> 00:30:09,380\nmore than one IP address all\nin one access control entry.\n\n538\n00:30:09,380 --> 00:30:10,870\nAll right, so\n\n539\n00:30:10,870 --> 00:30:15,260\nthe problem with wildcard masks is\nthe syntax in them is a little bizarre.\n\n540\n00:30:15,260 --> 00:30:18,640\nAnd so, let me show you guys\nan example of what I mean.\n\n541\n00:30:18,640 --> 00:30:21,100\nAll right, let me bring up my notes here.\n\n542\n00:30:21,100 --> 00:30:25,127\nAll right, so\nlet's say that I have a company, and\n\n543\n00:30:25,127 --> 00:30:28,137\nwe have ten branch offices out there.\n\n544\n00:30:28,137 --> 00:30:34,273\nAnd so at each branch office,\nmaybe I assign them a subnet,\n\n545\n00:30:34,273 --> 00:30:40,918\nso that branch one is 192.168.1.0/24,\nright.\n\n546\n00:30:40,918 --> 00:30:45,700\nAnd then I just kind of go down the line\nlike that for each of my branches.\n\n547\n00:30:45,700 --> 00:30:50,446\nAnd so as I add new branches,\neach one gets their own subnet,\n\n548\n00:30:50,446 --> 00:30:52,850\ntheir own shiny new subnet.\n\n549\n00:30:52,850 --> 00:30:54,010\nThere, all right.\n\n550\n00:30:54,010 --> 00:30:55,390\nSo there's my ten branches.\n\n551\n00:30:55,390 --> 00:30:59,640\nOkay, and\nI'm sitting at the home office and\n\n552\n00:30:59,640 --> 00:31:02,400\nat the home office, so these are,\nhere, let's label all this.\n\n553\n00:31:02,400 --> 00:31:05,449\nSo these are my branch networks,\nall right?\n\n554\n00:31:05,449 --> 00:31:12,927\nAnd my home office network\nwill be 192.168.0.0.\n\n555\n00:31:12,927 --> 00:31:14,830\nAnd then there's each of my branches.\n\n556\n00:31:14,830 --> 00:31:20,290\nOkay, so I want to write an access control\nlist on the router at the home office\n\n557\n00:31:20,290 --> 00:31:25,990\nthat allows these branches to be able\nto get in to my internal network.\n\n558\n00:31:25,990 --> 00:31:28,400\nNow I could do that with ten lines.\n\n559\n00:31:28,400 --> 00:31:34,830\nI could write ten ACEs, ten entries,\neach one referring to a different branch.\n\n560\n00:31:34,830 --> 00:31:38,770\nBut wouldn't it be nice if\nI could just do a wildcard\n\n561\n00:31:38,770 --> 00:31:41,490\nthat combined all these branches into one?\n\n562\n00:31:42,780 --> 00:31:44,770\nThere's two ways to do it.\n\n563\n00:31:44,770 --> 00:31:49,260\nThere the, I'm gonna call it the easy way,\nwhich is using a wildcard mask.\n\n564\n00:31:49,260 --> 00:31:50,070\nAnd there's the hard way,\n\n565\n00:31:50,070 --> 00:31:53,430\nwhich is through using VLSM,\nvariable-length subnet masking.\n\n566\n00:31:53,430 --> 00:31:56,978\nWith variable-length subnet masking\nI could recalculate the subnet and\n\n567\n00:31:56,978 --> 00:31:59,334\nmerge all these things together,\nand all that.\n\n568\n00:31:59,334 --> 00:32:03,769\nIt's a lot of work, it's harder,\nit's easier to use a wildcard mask.\n\n569\n00:32:03,769 --> 00:32:08,545\nSo instead of having to\ndo a bunch of entries\n\n570\n00:32:08,545 --> 00:32:12,935\nthat are saying, so let's take here.\n\n571\n00:32:12,935 --> 00:32:19,146\nSo my sample ACL, Allowing Branches.\n\n572\n00:32:19,146 --> 00:32:21,501\nOkay.\n\n573\n00:32:21,501 --> 00:32:25,996\nSo I could say, permit all traffic\n\n574\n00:32:25,996 --> 00:32:30,340\nfrom each of these guys, right?\n\n575\n00:32:30,340 --> 00:32:31,365\nSo, each one.\n\n576\n00:32:31,365 --> 00:32:35,530\n[LAUGH]\nThat windows key is just Just right there.\n\n577\n00:32:35,530 --> 00:32:39,450\n>> Yeah.\n>> Good old Windows 8.\n\n578\n00:32:39,450 --> 00:32:44,170\nAll right, so\nI could write 10 lines and off we go.\n\n579\n00:32:44,170 --> 00:32:45,398\nThis will work, right?\n\n580\n00:32:45,398 --> 00:32:46,612\n>> Hm-mm.\n\n581\n00:32:46,612 --> 00:32:51,430\n>> But now ever bit of traffic, the\npackets that are coming through my routers\n\n582\n00:32:51,430 --> 00:32:53,878\nare gonna be run through this entry and\nit's got 10.\n\n583\n00:32:53,878 --> 00:32:56,241\nACL entries.\n\n584\n00:32:56,241 --> 00:32:59,530\nSo instead I could try and combine these.\n\n585\n00:32:59,530 --> 00:33:04,700\nI could do something like, say,\npermit all traffic from 192.168.*.*.\n\n586\n00:33:04,700 --> 00:33:15,230\nSaying, just look, and if the IP\naddress starts with 192.168, let it in.\n\n587\n00:33:15,230 --> 00:33:17,800\nIf it starts with anything else,\n\n588\n00:33:17,800 --> 00:33:22,100\nit doesn't alright, this could\ncollapse all of that into one entry.\n\n589\n00:33:22,100 --> 00:33:24,230\nI do have a slight problem here though.\n\n590\n00:33:24,230 --> 00:33:31,950\nIf I say something like this, 192.168.*.*\nwell, you know or .x.x or whatever.\n\n591\n00:33:31,950 --> 00:33:33,710\nIf I say something like that,\n\n592\n00:33:33,710 --> 00:33:37,420\nwell that's gonna get more\nnetworks than I actually have.\n\n593\n00:33:37,420 --> 00:33:41,890\nI don't have 192 2.168.11,\nor .12, or .13 and so on.\n\n594\n00:33:41,890 --> 00:33:45,800\nSo when we use wildcard masks,\nwe have to do a mixture,\n\n595\n00:33:45,800 --> 00:33:49,670\na mixture of just getting\nthe networks that we actually have.\n\n596\n00:33:49,670 --> 00:33:52,080\nAs well as trying to be\nas specific as possible.\n\n597\n00:33:53,160 --> 00:33:56,790\nSo, it's kind of a bit of a game,\nnot a very fun game.\n\n598\n00:33:56,790 --> 00:33:59,640\nBut where we try and\ncalculate out the best mix.\n\n599\n00:33:59,640 --> 00:34:00,540\n>> Yeah.\n\n600\n00:34:00,540 --> 00:34:04,110\nIf we end up doing too many it's\ngonna restrict us in the future and\n\n601\n00:34:04,110 --> 00:34:06,690\nthen we'll have to come back and\nrecalculate it anyways.\n\n602\n00:34:06,690 --> 00:34:11,740\nSo the best thing that we can do right now\nis to, again, limit it to the scope that\n\n603\n00:34:11,740 --> 00:34:15,710\nwe really want to limit to, and especially\nfor ACL is that means that you and\n\n604\n00:34:15,710 --> 00:34:21,140\nI really have to dig in to understanding\nhow log card masks really do work.\n\n605\n00:34:21,140 --> 00:34:24,590\nAnd so this way we only actually try and\npull in,\n\n606\n00:34:24,590 --> 00:34:27,980\nto that access control list only\nthose entries that we want.\n\n607\n00:34:27,980 --> 00:34:28,820\n>> Yep.\n\n608\n00:34:28,820 --> 00:34:33,350\n>> Now, let's, one other thing I\nwanna bring up is I haven't actually\n\n609\n00:34:33,350 --> 00:34:37,320\nshown you guys an example of a wildcard\nyet, the actual way it's written.\n\n610\n00:34:37,320 --> 00:34:43,360\nAnd that's because wildcard masks are\nreally easy to confuse with subnet masks.\n\n611\n00:34:43,360 --> 00:34:45,100\nAnd that's because they're\nvery closely related.\n\n612\n00:34:45,100 --> 00:34:47,920\nWe're normally going to be\nallowing entire networks, and\n\n613\n00:34:47,920 --> 00:34:50,500\nsubnet masks denote entire networks.\n\n614\n00:34:50,500 --> 00:34:56,380\nSo, let's take a real quick look at subnet\nmasks versus wildcard masks and so on.\n\n615\n00:34:56,380 --> 00:35:00,424\nIf I have a network 192.168.0.0/24.\n\n616\n00:35:00,424 --> 00:35:02,398\nOkay, there's my network.\n\n617\n00:35:02,398 --> 00:35:04,466\nOr here I'll take a branch.\n\n618\n00:35:04,466 --> 00:35:06,064\nLet's do 3.0 here.\n\n619\n00:35:06,064 --> 00:35:06,816\nAll right.\n\n620\n00:35:06,816 --> 00:35:14,950\nIf I were to write that in binary.\n\n621\n00:35:14,950 --> 00:35:16,560\nRonnie, fact check me on this one.\n\n622\n00:35:16,560 --> 00:35:17,140\n>> Yep.\nThere you go.\n\n623\n00:35:22,550 --> 00:35:23,460\nIs that right?\n\n624\n00:35:23,460 --> 00:35:24,110\n>> Yup.\n>> Okay good.\n\n625\n00:35:24,110 --> 00:35:25,790\nMy binary is not the greatest.\n\n626\n00:35:25,790 --> 00:35:28,390\nWhen I do it in my head,\nit's a recipe for disaster.\n\n627\n00:35:28,390 --> 00:35:35,300\nNow with a network like that,\n192.168.3.0/24, it's a 24-bit subnet.\n\n628\n00:35:35,300 --> 00:35:41,130\nAnd that tells me that my subnet mask,\nwhich is usually gonna be 255.255.255.0,\n\n629\n00:35:41,130 --> 00:35:48,130\na class C subnet mask,\nwhich is what a /24 is,\n\n630\n00:35:48,130 --> 00:35:54,290\nthat that subnet mask, if I were to\nwrite it out in binary, looks like this.\n\n631\n00:35:54,290 --> 00:36:01,520\nAnd it's designating where there is\na 1 that is part of the network ID.\n\n632\n00:36:01,520 --> 00:36:06,910\nAnd where there's a 0,\nthat is part of the host ID, okay?\n\n633\n00:36:06,910 --> 00:36:08,430\nSo I can identify the network,\n\n634\n00:36:08,430 --> 00:36:12,210\nby just looking at the bits that\ncorrespond with the 1 in the subnet.\n\n635\n00:36:12,210 --> 00:36:14,430\nAll right, so that is a.\n\n636\n00:36:14,430 --> 00:36:15,490\nSubnet mask.\n\n637\n00:36:16,900 --> 00:36:20,580\n>> Now remember the Subnet mask has those\nrules where all the ones have to be\n\n638\n00:36:20,580 --> 00:36:24,350\ntogether and all the 0's have to be\ntogether, the ones only extend from\n\n639\n00:36:24,350 --> 00:36:28,710\nthe left hand side going to the right hand\nside and then where ever the 1's end.\n\n640\n00:36:28,710 --> 00:36:30,050\nThat's gonna be your network ID, and\n\n641\n00:36:30,050 --> 00:36:33,570\nthen the 0's will represent\nyour regular host bits there.\n\n642\n00:36:33,570 --> 00:36:34,500\nAnd that's important,\n\n643\n00:36:34,500 --> 00:36:39,360\nbecause those rules will not apply when\nwe get to the wild card mask at times.\n\n644\n00:36:39,360 --> 00:36:43,320\n>> Right, now a subnet mask its\ngoal is exactly what Ronnie said,\n\n645\n00:36:43,320 --> 00:36:47,420\ntelling you where the network ID ends\n>> A wild card mask doesn't care about\n\n646\n00:36:47,420 --> 00:36:48,150\nwhere the network ends.\n\n647\n00:36:48,150 --> 00:36:54,960\nA wild card mask is telling you what\nbits need to match and what bits don't.\n\n648\n00:36:54,960 --> 00:37:02,494\nIn a wild card mask, a 0 must match and\n\n649\n00:37:02,494 --> 00:37:07,680\n0 does not have to match.\n\n650\n00:37:07,680 --> 00:37:08,540\nRight.\nA 1.\n\n651\n00:37:10,150 --> 00:37:12,950\nI wrote it properly, but I said it wrong.\n\n652\n00:37:12,950 --> 00:37:15,430\nSo a 1 can be anything.\n\n653\n00:37:16,630 --> 00:37:19,130\n>> We don't require it to match.\n\n654\n00:37:19,130 --> 00:37:23,410\nAnd, you know, Ronnie, I just noticed\nit looks fine on my laptop, but\n\n655\n00:37:23,410 --> 00:37:26,880\non our studio monitor you can't\nsee the edge of my screen there.\n\n656\n00:37:26,880 --> 00:37:32,400\nSo we may move that around a bit.\n\n657\n00:37:32,400 --> 00:37:33,310\nThere we go.\n\n658\n00:37:33,310 --> 00:37:35,360\nSo, in a subnet mask,\nlet me just add that here.\n\n659\n00:37:35,360 --> 00:37:38,220\nGonna move all this up a bit.\n\n660\n00:37:39,660 --> 00:37:40,290\n>> All right.\n\n661\n00:37:40,290 --> 00:37:46,214\nSo in a subnet mask, a 0 = host ID,\n\n662\n00:37:46,214 --> 00:37:51,350\nand a 1 = network ID, right?\n\n663\n00:37:51,350 --> 00:37:53,070\nThat's what those values mean.\n\n664\n00:37:53,070 --> 00:37:56,980\nBut in a wildcard mask, these 0's and\nones just identify what has to match, and\n\n665\n00:37:56,980 --> 00:37:58,840\nwhat doesn't have to match, right?\n\n666\n00:37:58,840 --> 00:38:04,050\nAnd I keep debating over what to put here,\nso I'm going to say it doesn't.\n\n667\n00:38:04,050 --> 00:38:05,440\nMatch.\n\n668\n00:38:05,440 --> 00:38:06,980\n>> Yep.\n>> Alright, and so\n\n669\n00:38:06,980 --> 00:38:09,770\nthat's the actual part of the wildcard.\n\n670\n00:38:09,770 --> 00:38:13,560\nSo when I deal with something like this,\n192.168.3.0, if\n\n671\n00:38:13,560 --> 00:38:18,615\nI want to use a wildcard mask to identify\nevery every single host on 192.168.3.0,\n\n672\n00:38:18,615 --> 00:38:21,805\nwell what are those hosts\ngonna have in common?\n\n673\n00:38:21,805 --> 00:38:27,206\nThey're gonna have in common that their\nfirst three octets are 192.168.3.\n\n674\n00:38:27,206 --> 00:38:32,245\nThe last octet can be whatever,\nbecause that's the host ID.\n\n675\n00:38:32,245 --> 00:38:34,905\nBut when I do a wild card mask,\n\n676\n00:38:34,905 --> 00:38:43,354\nI would say something\n\n677\n00:38:43,354 --> 00:38:46,816\nlike.\n\n678\n00:38:46,816 --> 00:38:50,280\nThis.\n\n679\n00:38:50,280 --> 00:38:53,165\nWhich is basically stating 0's, right?\n\n680\n00:38:53,165 --> 00:38:58,900\n0's have to match, so\nI'm saying the first octet has to be 192.\n\n681\n00:38:58,900 --> 00:39:01,640\nThe second octet has to be 168.\n\n682\n00:39:01,640 --> 00:39:04,050\nThe third octet has to be 3, right?\n\n683\n00:39:04,050 --> 00:39:05,560\nThose have to match.\n\n684\n00:39:05,560 --> 00:39:09,020\nBut the fourth octet, these ones,\nsay it can be whatever you want!\n\n685\n00:39:09,020 --> 00:39:11,560\nIt can be 0, 1, 2, all the way up to 255.\n\n686\n00:39:11,560 --> 00:39:12,910\nWe don't care!\n\n687\n00:39:12,910 --> 00:39:14,280\nIt can be any of those.\n\n688\n00:39:14,280 --> 00:39:15,760\nThey don't have to match.\n\n689\n00:39:15,760 --> 00:39:17,810\nAnd this is where you\ncan see it's confusing.\n\n690\n00:39:17,810 --> 00:39:22,630\nThe very fact that I told you this is what\na subnet mask has to actually be able to\n\n691\n00:39:22,630 --> 00:39:28,100\ndo, which is to show us where the host\nfits in and then the network bits, and\n\n692\n00:39:28,100 --> 00:39:33,000\nthen where the host bits begin a wild card\nmask doesn't necessarily have to do that.\n\n693\n00:39:33,000 --> 00:39:36,170\nBut the example we just showed\nyou looks the exact opposite.\n\n694\n00:39:36,170 --> 00:39:39,300\nSo sometimes you actually read or\nother people post things say,\n\n695\n00:39:39,300 --> 00:39:42,260\nit's just an inverse wild card mask.\n\n696\n00:39:42,260 --> 00:39:43,120\nIs what it is.\n\n697\n00:39:43,120 --> 00:39:45,310\nBut it doesn't always have\nto follow this pattern.\n\n698\n00:39:45,310 --> 00:39:46,920\nYou've got to be careful of that.\n\n699\n00:39:46,920 --> 00:39:48,740\n>> Yeah, and you know at its base,\n\n700\n00:39:48,740 --> 00:39:53,880\nat its most simple level, if you want to\nwrite a wild card mask for a network.\n\n701\n00:39:53,880 --> 00:39:57,370\nYou can just take its subnet mask and\nreverse it.\n\n702\n00:39:57,370 --> 00:39:59,040\nBut that's not always the case, right?\n\n703\n00:39:59,040 --> 00:40:01,180\nSo let me show you two examples.\n\n704\n00:40:01,180 --> 00:40:10,981\nYou know, if we took 172.16.0.0/16, right.\n\n705\n00:40:10,981 --> 00:40:17,287\nThat network right there,\nthe subnet mask would be 255.255.0.0\n\n706\n00:40:17,287 --> 00:40:22,436\nThe wild card mask would be 0.0.255.255,\nright?\n\n707\n00:40:22,436 --> 00:40:26,992\nThat would identify anybody\nwhose IP started with 172.16,\n\n708\n00:40:26,992 --> 00:40:28,860\nit's just the opposite.\n\n709\n00:40:28,860 --> 00:40:30,940\nI flipped the zero's and then 255s, right?\n\n710\n00:40:30,940 --> 00:40:34,690\nAnd so at that basic level,\nthe statement is correct.\n\n711\n00:40:34,690 --> 00:40:40,236\nBut, where it gets a little more complex\nis what if I have 192.168.0.65/,\n\n712\n00:40:40,236 --> 00:40:45,490\nI'm trying to make this too hard so\n\n713\n00:40:45,490 --> 00:40:50,781\nI can still do it in my head /26.\n\n714\n00:40:50,781 --> 00:40:53,981\nIf I have something like this,\n\n715\n00:40:53,981 --> 00:40:59,530\na 26-bit subnet mask that's different,\nright?\n\n716\n00:40:59,530 --> 00:41:01,030\nIt's different.\n\n717\n00:41:01,030 --> 00:41:01,815\nWhat it is?\n\n718\n00:41:01,815 --> 00:41:03,808\n255.255.255.193, there we go.\n\n719\n00:41:03,808 --> 00:41:09,050\nSo, how do I reverse that?\n\n720\n00:41:09,050 --> 00:41:11,126\n>> Yeah.\n>> Would the wild card mass be\n\n721\n00:41:11,126 --> 00:41:13,787\n192.255.255.255?\n\n722\n00:41:13,787 --> 00:41:14,495\n>> No.\n>> No.\n\n723\n00:41:14,495 --> 00:41:15,366\n>> No it wouldn't.\n\n724\n00:41:15,366 --> 00:41:18,926\nAnd we really have to write it in binary,\nto see what it would be.\n\n725\n00:41:18,926 --> 00:41:23,516\nSo, if this is my network,\n\n726\n00:41:23,516 --> 00:41:28,313\nand my subnet mask, right?\n\n727\n00:41:28,313 --> 00:41:33,990\nAnd I wanna find out my wild card mask.\n\n728\n00:41:33,990 --> 00:41:35,117\n>> Yep.\n\n729\n00:41:35,117 --> 00:41:35,696\n>> Right?\n\n730\n00:41:35,696 --> 00:41:37,667\nWhich I don't know right now.\n\n731\n00:41:37,667 --> 00:41:41,927\nSo, if I were to try and\nsort this out, in binary.\n\n732\n00:41:44,772 --> 00:41:45,820\nToo many zeros, right?\n\n733\n00:41:47,220 --> 00:41:48,190\nNo, I was right?\n\n734\n00:41:49,850 --> 00:41:50,852\nI'm doubting myself.\n\n735\n00:41:55,075 --> 00:41:57,180\nAnd the 65 is important, right?\n\n736\n00:41:57,180 --> 00:42:01,282\nSo it's going to be 01, [CROSSTALK] and\nthen all the way except for\n\n737\n00:42:01,282 --> 00:42:06,276\none 64 would be the actual beginning,\nbut yeah, so that would be the network.\n\n738\n00:42:06,276 --> 00:42:10,840\nAnd the subnet mask in this\n\n739\n00:42:10,840 --> 00:42:15,202\nexample is that, okay.\n\n740\n00:42:15,202 --> 00:42:20,888\nSo, if I wanted to write a wildcard\nmask to match just this network, right?\n\n741\n00:42:20,888 --> 00:42:26,454\nAnd this network would run from\n.64 all the way up to .120, no.\n\n742\n00:42:26,454 --> 00:42:28,786\nThat's not right.\nIt's 120, no 127, right?\n\n743\n00:42:28,786 --> 00:42:30,342\n>> 127.\n>> Okay.\n\n744\n00:42:30,342 --> 00:42:31,561\nI'm doubting all of my math today.\n\n745\n00:42:31,561 --> 00:42:32,467\n>> [LAUGH]\n>> So,\n\n746\n00:42:32,467 --> 00:42:35,328\nanyhow, we cover a pretty decent range.\n\n747\n00:42:35,328 --> 00:42:39,554\n>> If I wanted to write the wildcard\nmask for that, well, it would be.\n\n748\n00:42:42,555 --> 00:42:46,970\nZeros here, because the first\noctet has to start with 192.\n\n749\n00:42:46,970 --> 00:42:50,490\nZeros here,\ncuz the second octet needs to be 168.\n\n750\n00:42:50,490 --> 00:42:54,450\nZeros here,\nbecause the third octet needs to be 0.\n\n751\n00:42:54,450 --> 00:42:59,710\nAnd then for the fourth octet,\nthe first 2-bits have to match.\n\n752\n00:42:59,710 --> 00:43:02,440\nThe first 2-bits have to be 01.\n\n753\n00:43:02,440 --> 00:43:05,600\nThat's what's gonna tie\nus to 64 through 127.\n\n754\n00:43:05,600 --> 00:43:10,570\nBut then, the remaining 6-bits\ncan be whatever they want, right?\n\n755\n00:43:10,570 --> 00:43:12,620\nI'm saying those last\n6-bits can be whatever.\n\n756\n00:43:12,620 --> 00:43:17,130\nNow, when you look at it here, visually,\nyou can see it's the opposite.\n\n757\n00:43:17,130 --> 00:43:22,118\nI've got 1s for the network ID here, and\nI've go 0s for the wildcard mask here and\n\n758\n00:43:22,118 --> 00:43:26,700\nthen the opposite for the end, so\nit's technically the opposite.\n\n759\n00:43:26,700 --> 00:43:29,574\nBut the subnet mask itself,\nI mean the wildcard mask itself,\n\n760\n00:43:29,574 --> 00:43:31,018\nis gonna be a little bit weird.\n\n761\n00:43:31,018 --> 00:43:37,328\nI gotta convert that back,\nto find out what it would actually be,\n\n762\n00:43:37,328 --> 00:43:42,858\nwhich would be 0.0.0 let's\nsee it would be, 63.\n\n763\n00:43:42,858 --> 00:43:44,947\n>> Yep.\n\n764\n00:43:44,947 --> 00:43:45,760\n>> There we go.\n\n765\n00:43:45,760 --> 00:43:52,645\n0.0.0.63, and\nthat is a really weird number.\n\n766\n00:43:52,645 --> 00:43:55,791\nWould you ever have a 63 in a subnet mask?\n\n767\n00:43:55,791 --> 00:43:58,040\nNo, it's not gonna happen, right?\n\n768\n00:43:58,040 --> 00:44:02,910\nSo, that's where we really start to\ndeviate from the subnet masks, and\n\n769\n00:44:02,910 --> 00:44:04,500\nwhere it's not just the opposite.\n\n770\n00:44:04,500 --> 00:44:05,960\nWell, technically it is the opposite here.\n\n771\n00:44:05,960 --> 00:44:06,480\n>> Yeah.\n>> But\n\n772\n00:44:06,480 --> 00:44:09,350\nit's the opposite in binary,\nnot the opposite in decimal.\n\n773\n00:44:10,450 --> 00:44:14,430\nNow, there is a shortcut you can take,\nshortcut I use all the time.\n\n774\n00:44:14,430 --> 00:44:17,110\nWhich is if you're dealing with\njust an entire network like this,\n\n775\n00:44:17,110 --> 00:44:21,020\nif you wanna get a whole network,\nyou can do some real simple math, right?\n\n776\n00:44:21,020 --> 00:44:26,930\nEach octet, has a value from 0 to 255,\nso 255 being the highest.\n\n777\n00:44:26,930 --> 00:44:29,259\nWell, if you take this last octet here,\n\n778\n00:44:29,259 --> 00:44:32,627\nthis one that's got a weird\nsubnet mask number, 192.\n\n779\n00:44:32,627 --> 00:44:38,274\nThis simple trick- We'll\ncall it Don's simple trick.\n\n780\n00:44:38,274 --> 00:44:43,278\n>> [LAUGH]\n>> Is 255 minus 192 equals what?\n\n781\n00:44:43,278 --> 00:44:43,893\n>> 63.\n\n782\n00:44:43,893 --> 00:44:45,704\n>> It equals 63.\n\n783\n00:44:45,704 --> 00:44:50,359\nSo, if you're just trying to just real\nquick ad dirty generate a wild card match,\n\n784\n00:44:50,359 --> 00:44:53,670\nthat matches a subnet and\nIt has got odd numbers like that.\n\n785\n00:44:53,670 --> 00:44:55,833\nYou don't have to convert the binary,\nif you don't want to.\n\n786\n00:44:55,833 --> 00:44:59,421\nJust do 255 minus whatever\nis in that value.\n\n787\n00:44:59,421 --> 00:45:03,694\n255 minus 255 is 0, and\nthat's what I have here.\n\n788\n00:45:03,694 --> 00:45:08,431\n0.0.0 255 minus 192 becomes 63.\n\n789\n00:45:08,431 --> 00:45:08,941\n>> There you go.\n\n790\n00:45:08,941 --> 00:45:12,750\n>> So it's 0.0.0.63 and I didn't\nhave to do a lick of binary, right?\n\n791\n00:45:12,750 --> 00:45:16,340\nSo real handy,\nvery simple trick to get past that.\n\n792\n00:45:16,340 --> 00:45:23,150\nThese are the most common examples,\nof how we use wild card masks.\n\n793\n00:45:23,150 --> 00:45:26,180\nBut on the exam it is not always\nabout what's common, right?\n\n794\n00:45:26,180 --> 00:45:30,750\nLet me give you another [LAUGH] example\nthat's a little more tricky, all right?\n\n795\n00:45:30,750 --> 00:45:35,105\nLet's say, that at each of my\nbranches there's a security camera.\n\n796\n00:45:36,441 --> 00:45:42,027\nSo I have a security\ncamera at each branch,\n\n797\n00:45:42,027 --> 00:45:45,597\nat 192.168.PAX,\n\n798\n00:45:45,597 --> 00:45:51,957\nbecause you'll each branch\nat its own network,\n\n799\n00:45:51,957 --> 00:45:57,422\n.1 .2, .3 .4 and then .200.\n\n800\n00:45:57,422 --> 00:46:01,140\nAll right, so at branch five,\n\n801\n00:46:01,140 --> 00:46:05,510\nI know there's a security camera\nat 192.168.5.200 and at branch 10,\n\n802\n00:46:05,510 --> 00:46:10,410\nI know there's a security\ncamera at 192.168.10.200.\n\n803\n00:46:10,410 --> 00:46:14,900\nIf I know that it's always\ngonna be a single IP like that,\n\n804\n00:46:14,900 --> 00:46:18,000\nI may wanna match very specifically.\n\n805\n00:46:18,000 --> 00:46:22,580\nMy problem here is,\nI've got this little bit in the middle,\n\n806\n00:46:22,580 --> 00:46:23,830\nthat I don't wanna match on.\n\n807\n00:46:23,830 --> 00:46:27,630\nIt can be whatever a subnet mask,\ncan't facilitate this.\n\n808\n00:46:27,630 --> 00:46:28,840\n>> Nope.\n\n809\n00:46:28,840 --> 00:46:31,736\n>> Subnet masks define networks,\nnot hosts.\n\n810\n00:46:31,736 --> 00:46:36,156\nAnd so a subnet mask is not gonna\nbe able to achieve what I want,\n\n811\n00:46:36,156 --> 00:46:38,890\nversus a wildcard which could.\n\n812\n00:46:38,890 --> 00:46:44,200\nI could write ten entries, and\nkind of going back to what we had before.\n\n813\n00:46:44,200 --> 00:46:49,811\nI could say, if I take all of these\nguys and throw them down here.\n\n814\n00:46:54,705 --> 00:46:58,940\nSo, if I wrote it in full,\nit would be something like this, right?\n\n815\n00:46:58,940 --> 00:47:03,460\nI'm basically just allowing\neach of those cameras,\n\n816\n00:47:04,920 --> 00:47:08,500\nto permit all traffic from the cameras,\nall right?\n\n817\n00:47:08,500 --> 00:47:11,160\nAnd it would be ten entries,\nbecause I have ten branches, and\n\n818\n00:47:11,160 --> 00:47:13,440\nso each branch is in here.\n\n819\n00:47:13,440 --> 00:47:18,960\nAnd there we go, or\nI can use a wild card mask.\n\n820\n00:47:18,960 --> 00:47:23,710\nAnd what I can do is I can say\nsomething like, permit all traffic.\n\n821\n00:47:27,102 --> 00:47:30,190\nSo this is gonna be my condensed ACL.\n\n822\n00:47:31,660 --> 00:47:38,680\nSo, I'll permit all traffic from\n192.168 and I'll just put 0.0, right?\n\n823\n00:47:39,940 --> 00:47:48,150\nAnd for the wild card mask, I could put\nsomething like 0.0.255.0, all right?\n\n824\n00:47:48,150 --> 00:47:52,830\nNow, what that wild card mask is\nstating is that the first octet,\n\n825\n00:47:52,830 --> 00:47:57,340\nthe second octet and\nthe fourth octets have to match.\n\n826\n00:47:57,340 --> 00:47:59,740\nBut the third octet can\nbe whatever it wants.\n\n827\n00:47:59,740 --> 00:48:00,340\nWe don't care.\n\n828\n00:48:00,340 --> 00:48:03,610\nIt can be one or ten or 15, 20, whatever.\n\n829\n00:48:03,610 --> 00:48:06,892\nSo, as I add more branches in\nthe future they're already covered.\n\n830\n00:48:06,892 --> 00:48:09,870\nThis would actually I'm writing it wrong,\naren't I?\n\n831\n00:48:09,870 --> 00:48:10,980\nI need to do 200, right?\n\n832\n00:48:10,980 --> 00:48:12,918\n>> Yeah.\n>> That last octet needs to be 200.\n\n833\n00:48:12,918 --> 00:48:18,033\nSo this is saying if\nthe IP address is 192.168.\n\n834\n00:48:18,033 --> 00:48:24,270\nSomething .200, then we're gonna\npermit the traffic for it.\n\n835\n00:48:24,270 --> 00:48:30,620\nThis let's us write one ACE that,\nin my scenario, covers ten hosts.\n\n836\n00:48:30,620 --> 00:48:36,350\nAll compressed into one line, this will\nmake the access list apply faster.\n\n837\n00:48:36,350 --> 00:48:38,170\nSo a lot of power here.\n\n838\n00:48:38,170 --> 00:48:42,881\nIf we were to write this in binary,\nit would eight zeroes dot eight 0s,\n\n839\n00:48:42,881 --> 00:48:45,170\ndot eight ones, dot eight zeros.\n\n840\n00:48:45,170 --> 00:48:46,940\nThat's the crazy part right there.\n\n841\n00:48:46,940 --> 00:48:50,780\nIs that you've got ones,\nin the middle of the zeros.\n\n842\n00:48:50,780 --> 00:48:53,330\nAnd that could never\nhappen in a sub-net mask.\n\n843\n00:48:53,330 --> 00:48:55,880\nAnd that's why we don't wanna\nfall into that trap of what they\n\n844\n00:48:55,880 --> 00:48:56,450\nsay on the Internet.\n\n845\n00:48:56,450 --> 00:48:58,620\nIt's not just the opposite\nof a sub-net mask.\n\n846\n00:49:00,500 --> 00:49:04,190\nAnd these are examples of ACL's\nthat I've used in real life.\n\n847\n00:49:04,190 --> 00:49:09,270\nWe do have one slight problem\nwith this ACL, which is,\n\n848\n00:49:09,270 --> 00:49:16,127\nit also gets 192.168.0.200 and\n192.168.11 all the way through 255,\n\n849\n00:49:16,127 --> 00:49:20,790\n200, so those don't exist, and\nso that might be a problem.\n\n850\n00:49:20,790 --> 00:49:25,240\nAnd so on the exam, you always\nwanna be as specific as possible,\n\n851\n00:49:25,240 --> 00:49:26,870\nunless they state otherwise.\n\n852\n00:49:26,870 --> 00:49:31,740\nSo this is the easy route right here, but\nI could go a little more in depth, and\n\n853\n00:49:31,740 --> 00:49:33,438\ntry to nail these down.\n\n854\n00:49:33,438 --> 00:49:37,200\nIf I wanna nail them down, that's where\nvariable length sub-net masks and\n\n855\n00:49:37,200 --> 00:49:39,080\nall that stuff comes into play.\n\n856\n00:49:39,080 --> 00:49:42,620\nBecause I need to find a way to\ncollapse these addresses down into as\n\n857\n00:49:42,620 --> 00:49:44,070\nfew lines as possible.\n\n858\n00:49:44,070 --> 00:49:48,316\nAnd that's gonna be tricky because\nI don't have the zero network, and\n\n859\n00:49:48,316 --> 00:49:51,360\nthen, I don't have 11 and 12, and so on.\n\n860\n00:49:51,360 --> 00:49:55,040\nSo I can't just do like a slash 20,\nI don't know,\n\n861\n00:49:55,040 --> 00:49:56,460\nwhat would get us into the ball park?\n\n862\n00:49:56,460 --> 00:49:57,540\nSlash 28?\n\n863\n00:49:57,540 --> 00:49:59,480\nBecause I'm missing the zero.\n\n864\n00:49:59,480 --> 00:50:01,591\nSo I've gotta try and\nplan around that and how we condense...\n\n865\n00:50:01,591 --> 00:50:03,983\nIs these is gonna be a bit of a challenge.\n\n866\n00:50:03,983 --> 00:50:04,715\nAll right.\n\n867\n00:50:04,715 --> 00:50:08,805\nSo, if you're really good at\nsub-netting and you can do this\n\n868\n00:50:08,805 --> 00:50:12,125\nstuff in your head you've probably already\nstarted to see the solution forming.\n\n869\n00:50:12,125 --> 00:50:17,660\nIf not though, you can write\neach of these out, in binary and\n\n870\n00:50:17,660 --> 00:50:21,470\nkind of find the pattern to match on so\nthat you only get these hosts.\n\n871\n00:50:21,470 --> 00:50:25,620\nNow, I know that I can condense two and\nthree together.\n\n872\n00:50:25,620 --> 00:50:26,150\nRight?\n\n873\n00:50:26,150 --> 00:50:27,610\nI know I can condense four and five,\n\n874\n00:50:27,610 --> 00:50:31,820\nand that means there's probably a way\nwhere I can condense two through five.\n\n875\n00:50:31,820 --> 00:50:32,420\nRight?\n\n876\n00:50:32,420 --> 00:50:34,740\nBut it starts to get a little tricky\nwith some of the higher ones.\n\n877\n00:50:34,740 --> 00:50:40,560\nAnd so, if we start to write\nsome of these out in binary,\n\n878\n00:50:40,560 --> 00:50:43,720\nwe can get a chance to see that.\n\n879\n00:50:45,130 --> 00:50:46,600\nAnd the trick is just.\n\n880\n00:50:46,600 --> 00:50:48,840\nTo not leave any gaps,\n\n881\n00:50:48,840 --> 00:50:53,960\nnot leave any blanks, cuz that's\nwhere we end up making mistakes.\n\n882\n00:50:53,960 --> 00:50:58,450\nAnd if you approve IPs that aren't in\nexistence those are perfect candidates for\n\n883\n00:50:58,450 --> 00:51:01,366\nan attacker to spoof to gain\naccess to your network.\n\n884\n00:51:06,869 --> 00:51:09,748\nNow all those times when you say,\nwhy do I need to learn binaries?\n\n885\n00:51:09,748 --> 00:51:11,187\n>> This is why, yep.\n\n886\n00:51:18,722 --> 00:51:20,970\n>> And Ronnie you're double checking me.\n\n887\n00:51:20,970 --> 00:51:23,674\n>> Yep, [LAUGH] you're doing good.\n\n888\n00:51:31,673 --> 00:51:32,620\nThere.\n\n889\n00:51:32,620 --> 00:51:35,030\nSo there's my ten branches.\n\n890\n00:51:35,030 --> 00:51:37,955\nSo if I start to look at\nthese to build a wildcard, so\n\n891\n00:51:37,955 --> 00:51:42,452\nI want to build a wildcard mask or\nfor our British viewers the bathroom.\n\n892\n00:51:42,452 --> 00:51:46,715\nSo [LAUGH] you just can't win\nwhen you go international.\n\n893\n00:51:46,715 --> 00:51:53,190\nSo all of these the first\nfour bits are zeros, okay.\n\n894\n00:51:53,190 --> 00:51:57,010\nSo when I build my wildcard mask,\nI know that the first four,\n\n895\n00:51:57,010 --> 00:51:58,810\nI can do zeros, they're gonna match.\n\n896\n00:51:58,810 --> 00:52:01,530\nThey have to start with zeros.\n\n897\n00:52:01,530 --> 00:52:02,110\nAll right.\n\n898\n00:52:02,110 --> 00:52:05,010\nBut as I look down the list,\nI have a problem.\n\n899\n00:52:05,010 --> 00:52:10,740\nSo octet number four, some are number\nfive, it is octet number four.\n\n900\n00:52:10,740 --> 00:52:11,750\nIt's bit number five.\n\n901\n00:52:11,750 --> 00:52:13,690\nThere we go.\nSo bit number five.\n\n902\n00:52:13,690 --> 00:52:15,360\nSome of them have zeros.\n\n903\n00:52:15,360 --> 00:52:16,870\nSome of them have ones.\n\n904\n00:52:16,870 --> 00:52:18,900\nAnd on the next one some have zeros.\n\n905\n00:52:18,900 --> 00:52:20,550\nSome have ones.\nAnd on the third one the fourth?\n\n906\n00:52:20,550 --> 00:52:21,190\nEach of these.\n\n907\n00:52:21,190 --> 00:52:23,460\nSo there is no one solid pattern.\n\n908\n00:52:23,460 --> 00:52:27,540\nAnd if I stop right here,\nand I go like that.\n\n909\n00:52:27,540 --> 00:52:31,840\nThat's going to approve\nbasically 192.168.0 all the way\n\n910\n00:52:31,840 --> 00:52:36,720\nthrough 192.168.,what's\nthe highest I could get with that?\n\n911\n00:52:36,720 --> 00:52:37,787\n31?\n\n912\n00:52:37,787 --> 00:52:38,300\n>> Yeah. Yeah. >> Yeah.\n\n913\n00:52:38,300 --> 00:52:41,331\n>> So zero through 31 or six.\n\n914\n00:52:41,331 --> 00:52:42,489\nHang on a second.\nSo it's 16.\n\n915\n00:52:42,489 --> 00:52:45,392\none, two, four, eight; zero through 16.\n\n916\n00:52:45,392 --> 00:52:46,535\nOkay now.\n\n917\n00:52:46,535 --> 00:52:50,925\nSo zero through 16,\nnow that's smaller, right?\n\n918\n00:52:50,925 --> 00:52:53,755\nI'm still getting zero,\nwhich I didn't wanna get and\n\n919\n00:52:53,755 --> 00:52:56,975\nI'm also getting 11 through 16,\nwhich I didn't wanna get.\n\n920\n00:52:56,975 --> 00:53:00,595\nSo I'm better but it's not best.\n\n921\n00:53:00,595 --> 00:53:02,600\nIt's still not precise.\n\n922\n00:53:02,600 --> 00:53:05,920\nAnd what we're gonna find is that\nin this particular scenario,\n\n923\n00:53:05,920 --> 00:53:08,120\nthere is no precise that\nI can get in one line.\n\n924\n00:53:08,120 --> 00:53:09,860\n>> Right.\n>> It's just not possible.\n\n925\n00:53:09,860 --> 00:53:14,890\nSo I need to create as few lines as\npossible to be able to bond this together\n\n926\n00:53:14,890 --> 00:53:16,400\nand not have any misses.\n\n927\n00:53:16,400 --> 00:53:18,160\nSo for example, if I look here.\n\n928\n00:53:18,160 --> 00:53:23,301\nI've got 10011110110.\n\n929\n00:53:23,301 --> 00:53:26,900\n>> Yeah.\n>> Okay, those four fit together really\n\n930\n00:53:26,900 --> 00:53:33,440\nnicely in that they're all in a row and\nI cover all the possible combinations.\n\n931\n00:53:33,440 --> 00:53:37,020\nSo I know that I can combine\nthese four networks.\n\n932\n00:53:37,020 --> 00:53:38,042\nTogether.\n\n933\n00:53:38,042 --> 00:53:44,120\nAll right, and if I look up here,\nI've got 011011 but I don't have a 00.\n\n934\n00:53:44,120 --> 00:53:46,810\nSo that's a bit of a problem,\nI can't combine that.\n\n935\n00:53:46,810 --> 00:53:49,210\nBut these two, lines two and three,\n\n936\n00:53:49,210 --> 00:53:53,650\nI can combine them, 1011, that's\nsomething that I can combine pretty easy.\n\n937\n00:53:53,650 --> 00:53:59,257\nAnd then down here, 1000 and 1001.\n\n938\n00:53:59,257 --> 00:54:00,952\nI can probably combine those.\n\n939\n00:54:00,952 --> 00:54:04,760\nProbably not gonna be able\nto get this last one.\n\n940\n00:54:04,760 --> 00:54:06,900\nSo that would be a challenge.\n\n941\n00:54:06,900 --> 00:54:11,950\nSo it's trying to find that perfect\nmedium to limit things down and\n\n942\n00:54:11,950 --> 00:54:14,830\nget it restrictive in\nthe way that you need it.\n\n943\n00:54:14,830 --> 00:54:19,180\nSo I'm probably gonna need\na minimum of five entries, but\n\n944\n00:54:19,180 --> 00:54:23,130\nstill that cuts down the amount of\nACLs I've got by 50%, doesn't it?\n\n945\n00:54:23,130 --> 00:54:26,780\nSo, if we were to do three or five lines.\n\n946\n00:54:28,400 --> 00:54:31,240\nSo, we'll have to do more than\none wildcard mask, right?\n\n947\n00:54:31,240 --> 00:54:36,560\nSo, for the, for the first line here,\nI'm not gonna have a choice, right?\n\n948\n00:54:36,560 --> 00:54:41,230\nSo, for the wildcard mask,\nI'm going to have to do.\n\n949\n00:54:41,230 --> 00:54:41,790\n>> Yeah.\n>> Yeah.\n\n950\n00:54:41,790 --> 00:54:43,220\nThat's specific network.\n\n951\n00:54:44,230 --> 00:54:47,660\nBut, for the next one,\nI could go a little bit further.\n\n952\n00:54:47,660 --> 00:54:50,750\nAnd go like this where I'm,\noh, actually no.\n\n953\n00:54:50,750 --> 00:54:54,940\nI can't even go that,\nit would be the same wildcard mask.\n\n954\n00:54:54,940 --> 00:54:58,970\nI'm basically saying that\nsecond bit has to be a one, but\n\n955\n00:54:58,970 --> 00:55:00,900\nthe last bit could be whatever it wanted.\n\n956\n00:55:00,900 --> 00:55:02,500\nIt could be zero or one.\n\n957\n00:55:02,500 --> 00:55:05,455\nThat would get at both\nof those two networks.\n\n958\n00:55:06,615 --> 00:55:10,895\nThen for here, I could go a little\nbit further saying, let's see.\n\n959\n00:55:10,895 --> 00:55:15,435\nThe first four bits could be whatever,\nthe fifth bit needs to be a zero, and\n\n960\n00:55:15,435 --> 00:55:17,305\nthe last three bits can be whatever.\n\n961\n00:55:17,305 --> 00:55:19,978\nThat would get networks\nfour through seven,\n\n962\n00:55:19,978 --> 00:55:23,085\nso that would get all of\nthose networks right there.\n\n963\n00:55:24,725 --> 00:55:29,140\nAnd then this one,\nwe would need to say, let's see,\n\n964\n00:55:29,140 --> 00:55:31,720\nthat fifth bit needs to be a one.\n\n965\n00:55:32,840 --> 00:55:35,920\nThe sixth and\nseventh bits need to be zeros,\n\n966\n00:55:35,920 --> 00:55:37,190\nthe last bit can be whatever it wants.\n\n967\n00:55:37,190 --> 00:55:38,790\nSo, that would get these two networks.\n\n968\n00:55:38,790 --> 00:55:41,930\n>> Oh, you have to put a one there,\non the fifth bit.\n\n969\n00:55:41,930 --> 00:55:44,240\n>> If, on which bit, this?\n\n970\n00:55:44,240 --> 00:55:45,670\n>> Cuz you're just doing a one.\n\n971\n00:55:45,670 --> 00:55:48,380\nBut then it could be a zero also so\nI need to hard set okay.\n\n972\n00:55:48,380 --> 00:55:49,410\n>> So individual.\n\n973\n00:55:49,410 --> 00:55:50,830\n>> Just that one yep.\n\n974\n00:55:50,830 --> 00:55:54,530\nAnd then the last one again I would\nhave to get just this individual one,\n\n975\n00:55:54,530 --> 00:55:57,450\nwhich if you're getting just\nthe individual one you might as well\n\n976\n00:55:57,450 --> 00:56:00,500\ndo all zeros,\nchange that up there to match.\n\n977\n00:56:00,500 --> 00:56:02,050\nThere, all right.\n\n978\n00:56:02,050 --> 00:56:05,868\nSo with each of these wildcard\nmasks that I'm writing, well,\n\n979\n00:56:05,868 --> 00:56:08,618\nthis one is just getting\nthat first network.\n\n980\n00:56:08,618 --> 00:56:13,727\nSo at the end of the day what\nI am writing in my access\n\n981\n00:56:13,727 --> 00:56:19,329\nlist is gonna be 192.168.0.0 We'd really\n\n982\n00:56:19,329 --> 00:56:24,710\nsay 1.0 with a 0.0.0.0, wildcard mask.\n\n983\n00:56:24,710 --> 00:56:30,971\nThis one would be\n192.168.2.0 with a 0.0.0.1\n\n984\n00:56:30,971 --> 00:56:36,105\nwildcard mask, and\nthat's gonna get two and three.\n\n985\n00:56:43,379 --> 00:56:46,912\nRight, that's gonna get both of them.\n\n986\n00:56:46,912 --> 00:56:50,224\nThis next one down here,\n\n987\n00:56:50,224 --> 00:56:55,117\nwould be 192.168.4.0,\n\n988\n00:56:55,117 --> 00:56:58,440\nwith a 0.0.0.7.\n\n989\n00:56:58,440 --> 00:56:59,334\n6.\n\n990\n00:56:59,334 --> 00:56:59,950\n>> 6?\n\n991\n00:56:59,950 --> 00:57:00,635\n>> 7?\n\n992\n00:57:00,635 --> 00:57:03,029\nWait, it is 7,\nnope you are right, I am wrong.\n\n993\n00:57:03,029 --> 00:57:08,222\n>> [LAUGH]\n>> All right, this one covers\n\n994\n00:57:08,222 --> 00:57:16,095\n192.168.4 through 7.0/24.\n\n995\n00:57:16,095 --> 00:57:18,835\nLet me re-write this one\nto follow that same syntax.\n\n996\n00:57:24,704 --> 00:57:26,921\nI'm creating an all new /24 network.\n\n997\n00:57:31,550 --> 00:57:35,182\nAll right, and then this one,\n\n998\n00:57:35,182 --> 00:57:40,775\n192.168.8.0 with that same .1,\n\n999\n00:57:40,775 --> 00:57:45,250\nwhich will cover 192.168.8\n\n1000\n00:57:45,250 --> 00:57:50,579\nthrough 9.0, and then the very last one.\n\n1001\n00:58:05,374 --> 00:58:06,760\nWhich covers that network specifically.\n\n1002\n00:58:06,760 --> 00:58:12,500\nSo you can see where this gets a little\nbit tricky in kind of balancing\n\n1003\n00:58:12,500 --> 00:58:18,300\nout, being simple versus being precise.\n\n1004\n00:58:18,300 --> 00:58:21,520\nIf I wasn't worried about\nthose extra networks,\n\n1005\n00:58:21,520 --> 00:58:25,200\nwe did it all in our head up here,\nit was a lot easier, right.\n\n1006\n00:58:25,200 --> 00:58:29,360\nBut if you want to be really precise,\nIt's finding that perfect balance,\n\n1007\n00:58:29,360 --> 00:58:31,810\nhow many different wild card\nmasters do you have to use.\n\n1008\n00:58:31,810 --> 00:58:35,340\nAnd the benefit here is I am\nable to reduce my ACLs by 50%.\n\n1009\n00:58:35,340 --> 00:58:41,440\nI am able to cut down just to 5 ACLs or\nACEs as opposed to having 10.\n\n1010\n00:58:41,440 --> 00:58:44,830\nBut it is a lot of work to do it.\n\n1011\n00:58:44,830 --> 00:58:47,000\n>> Don, looks like our time is\n>> Yeah we kind of blew\n\n1012\n00:58:47,000 --> 00:58:47,631\npast that one, didn't we?\n\n1013\n00:58:47,631 --> 00:58:51,910\nAll right, well lets do this, lets stop\nand take a break and when we get back we\n\n1014\n00:58:51,910 --> 00:58:55,330\ncan continue on we still have not actually\nshown the syntax of writing an ACL at all.\n\n1015\n00:58:55,330 --> 00:58:56,640\nSo we probably need to do that sooner or\n\n1016\n00:58:56,640 --> 00:58:59,430\nlater, but I definitely wanted\nto spend some time on wildcard\n\n1017\n00:58:59,430 --> 00:59:02,270\nmasks to make sure everybody has a good\nunderstanding of how these things work.\n\n1018\n00:59:02,270 --> 00:59:05,170\nSo all right ladies and\ngentlemen stay tuned when we get back,\n\n1019\n00:59:05,170 --> 00:59:10,510\na little more on building our ACs and\nACLs.\n\n1020\n00:59:10,510 --> 00:59:18,660\n[SOUND]\n>> All right, welcome back everybody.\n\n1021\n00:59:18,660 --> 00:59:23,080\nSo before the break I was showing\nwildcard masks and how we can use them to\n\n1022\n00:59:23,080 --> 00:59:27,050\nshrink our ACLs down and\nmake them as efficient as possible.\n\n1023\n00:59:27,050 --> 00:59:31,270\nThat's certainly the hard way of doing it,\nbut it is the most efficient.\n\n1024\n00:59:31,270 --> 00:59:34,000\nThat will create the biggest performance\nincrease on your routers if you\n\n1025\n00:59:34,000 --> 00:59:35,170\ndo it that way.\n\n1026\n00:59:35,170 --> 00:59:40,170\nThere is another way to do it that's\neasier, but it doesn't create as big\n\n1027\n00:59:40,170 --> 00:59:43,450\na performance increase as writing it\nthe way we did a moment ago does.\n\n1028\n00:59:43,450 --> 00:59:47,800\nThere's something that's called an object\ngroup, and with an object group we can\n\n1029\n00:59:47,800 --> 00:59:52,580\ncreate a list of individual IP's or\nindividual port numbers or whatever.\n\n1030\n00:59:52,580 --> 00:59:56,900\nAnd collapse them together into a single\nentity and, made to order, just one ACL\n\n1031\n00:59:56,900 --> 01:00:00,490\nentry and the router will take care of\ncompiling and optimizing it for us.\n\n1032\n01:00:00,490 --> 01:00:03,940\nIt's not as efficient, but\nit does a pretty good job, and so\n\n1033\n01:00:03,940 --> 01:00:05,640\nit is definitely something\nworth looking into.\n\n1034\n01:00:05,640 --> 01:00:06,610\nAll right?\n\n1035\n01:00:06,610 --> 01:00:08,570\nSo, let me show you an example.\n\n1036\n01:00:08,570 --> 01:00:12,490\nLet's say that I wanted to allow\ncertain traffic to my computer.\n\n1037\n01:00:12,490 --> 01:00:18,280\nI had some management software that needed\nFTP, Telnet, http, and https traffic.\n\n1038\n01:00:18,280 --> 01:00:24,140\nSo I could write four rules that allowed\neach of those protocols to my laptop,\n\n1039\n01:00:24,140 --> 01:00:25,240\nall right?\n\n1040\n01:00:25,240 --> 01:00:27,630\nBut wouldn't it be nice\nto collapse those down?\n\n1041\n01:00:27,630 --> 01:00:32,400\nAnd I picked protocols here because with\nIP addresses, you can collapse them down.\n\n1042\n01:00:32,400 --> 01:00:33,530\nWe just saw that.\n\n1043\n01:00:33,530 --> 01:00:36,860\nBut, with ports,\nI guess maybe you have port ranges, right?\n\n1044\n01:00:36,860 --> 01:00:43,670\nSo, if we look at the port ranges,\nFTP is TCP and UDP 20 and 21.\n\n1045\n01:00:43,670 --> 01:00:46,560\nThat's a nice tricky one.\n\n1046\n01:00:46,560 --> 01:00:48,790\nYou've got Telnet, which is TCP 23.\n\n1047\n01:00:48,790 --> 01:00:52,370\nYou've got http, which is TCP 80.\n\n1048\n01:00:52,370 --> 01:00:55,500\nAnd you've go https, which is TCP 443.\n\n1049\n01:00:55,500 --> 01:00:57,765\nSo we're kind of all over the place here.\n\n1050\n01:00:57,765 --> 01:00:59,410\n>> Mm-hm.\n>> So it's not like we can just do a range\n\n1051\n01:00:59,410 --> 01:01:00,210\nof IPs and get them all.\n\n1052\n01:01:00,210 --> 01:01:01,620\n>> Right.\n\n1053\n01:01:01,620 --> 01:01:04,960\n>> So what you can do is you\ncan create an object group.\n\n1054\n01:01:04,960 --> 01:01:07,900\nYou could collapse all of\nthese protocols into one\n\n1055\n01:01:07,900 --> 01:01:10,330\ngroup like I've done\nhere called Management.\n\n1056\n01:01:10,330 --> 01:01:13,190\nI'm saying permit all Management\ntraffic to Don's machine.\n\n1057\n01:01:14,320 --> 01:01:15,980\nWe do that through an object group.\n\n1058\n01:01:15,980 --> 01:01:18,430\nHere's an example of an object group.\n\n1059\n01:01:18,430 --> 01:01:20,380\nWe basically create an object so\nwe can give it a name.\n\n1060\n01:01:20,380 --> 01:01:23,720\nSo here I'm saying object-group\nservice management.\n\n1061\n01:01:23,720 --> 01:01:27,680\nAnd then we specify each of the one,\nnow when I typed it in,\n\n1062\n01:01:27,680 --> 01:01:32,801\nI typed it in with numbers, and your\nCISCO router may actually go through and\n\n1063\n01:01:32,801 --> 01:01:35,345\nchange it to names.\n\n1064\n01:01:35,345 --> 01:01:37,065\nIt just depends on which\niOS you're running.\n\n1065\n01:01:37,065 --> 01:01:38,885\nSome have the names shortcut, some don't.\n\n1066\n01:01:38,885 --> 01:01:41,955\nSo this is how I actually typed it in,\nand then it took some of these and\n\n1067\n01:01:41,955 --> 01:01:44,862\nchanged them to Telnet and web.\n\n1068\n01:01:44,862 --> 01:01:48,272\nI don't know why they call it web instead\nof http, but that's what they do.\n\n1069\n01:01:48,272 --> 01:01:50,702\nAnd so those kind of changed on me.\n\n1070\n01:01:50,702 --> 01:01:54,872\nBut basically I went through and\nI specified tcp port 80,\n\n1071\n01:01:54,872 --> 01:01:59,832\ntcp port 443, tcp port 23,\ntcp-udp range 20 and 21.\n\n1072\n01:01:59,832 --> 01:02:03,462\nThat means both ports 20 and\n21 for tcp and udp.\n\n1073\n01:02:03,462 --> 01:02:05,872\nIt's kind of obvious I suppose.\n\n1074\n01:02:05,872 --> 01:02:11,950\nBut by creating this object-group I can\nnow write an ACL that just says permit\n\n1075\n01:02:11,950 --> 01:02:17,340\nall management traffic to Don's machine\nand it gets all those together, right?\n\n1076\n01:02:17,340 --> 01:02:21,605\nUsing that security camera example\nfrom earlier instead of doing all that\n\n1077\n01:02:21,605 --> 01:02:25,570\nwildcard masking, I could have\ncreated a network object group.\n\n1078\n01:02:25,570 --> 01:02:27,400\nThe one above was a service.\n\n1079\n01:02:27,400 --> 01:02:30,650\nSo I could create a network object\ngroup and just list all those IPs.\n\n1080\n01:02:30,650 --> 01:02:35,660\nSo here's the IPs from the ten branches,\nnow I could just create an ACE,\n\n1081\n01:02:35,660 --> 01:02:37,520\nan access control entry, as I said.\n\n1082\n01:02:37,520 --> 01:02:42,640\nPermit all traffic from security cameras.\n\n1083\n01:02:42,640 --> 01:02:43,630\nLike that.\n\n1084\n01:02:43,630 --> 01:02:44,570\nOne entry, done.\n\n1085\n01:02:45,840 --> 01:02:48,220\nIt's not as efficient\n\n1086\n01:02:48,220 --> 01:02:52,490\nIn the implementation as far as like the\nperformance increase wildcard mask, but\n\n1087\n01:02:52,490 --> 01:02:55,400\nit is better than if I just listed\nall ten of these individually.\n\n1088\n01:02:57,080 --> 01:02:59,800\nSo it is a neat thing object\ngroups are kind of cool but\n\n1089\n01:02:59,800 --> 01:03:04,640\nwe use them all the time on ASA, it's rare\nthat you don't use them on ASA's, but\n\n1090\n01:03:04,640 --> 01:03:07,340\non a router it's not\nthe most common thing.\n\n1091\n01:03:07,340 --> 01:03:09,480\nI don't typically use them.\n\n1092\n01:03:09,480 --> 01:03:13,300\nI usually do the wildcard mass rules.\n\n1093\n01:03:13,300 --> 01:03:17,725\nSo be aware of those object rules or\nobject groups and how we can use those.\n\n1094\n01:03:17,725 --> 01:03:21,855\nWhen we work with the GUI, the graphical\nuser interface is gonna use them a lot.\n\n1095\n01:03:21,855 --> 01:03:23,705\nWhen we got to the command line,\n\n1096\n01:03:23,705 --> 01:03:26,015\nif we want to use those we have\nto create them ahead of time.\n\n1097\n01:03:26,015 --> 01:03:28,995\nSo it goes back to what Ronnie said,\nyou've got to think about this stuff.\n\n1098\n01:03:28,995 --> 01:03:29,745\nPlan for what you want.\n\n1099\n01:03:31,915 --> 01:03:35,845\nAll right, so Ronnie,\nas far as the general concepts,\n\n1100\n01:03:35,845 --> 01:03:38,295\nI think we're good now, aren't we?\n\n1101\n01:03:39,930 --> 01:03:42,000\n>> Yep, now we're just about ready for\nsome syntax.\n\n1102\n01:03:42,000 --> 01:03:43,080\n>> Some implementation.\n\n1103\n01:03:43,080 --> 01:03:43,610\nAll right.\n\n1104\n01:03:43,610 --> 01:03:45,340\n>> Yeah.\n>> Well, let's start with\n\n1105\n01:03:45,340 --> 01:03:48,540\nthe graphical user interface first and\nthen we'll go to the command line.\n\n1106\n01:03:48,540 --> 01:03:49,590\nSo I wanna start with a GUI.\n\n1107\n01:03:49,590 --> 01:03:54,025\nI'm gonna bring up\nCisco Configuration professional and\n\n1108\n01:03:54,025 --> 01:03:56,095\nlet me just-\n>> Powered by Java.\n\n1109\n01:03:56,095 --> 01:03:56,865\n>> My favorite, yep.\n\n1110\n01:03:57,895 --> 01:03:59,827\nAll right, so\nhere I am just on my router and\n\n1111\n01:03:59,827 --> 01:04:03,013\nI haven't really done much in the way\nof configuration on this thing.\n\n1112\n01:04:03,013 --> 01:04:05,930\nIts got two interfaces,\nan inside and an outside.\n\n1113\n01:04:05,930 --> 01:04:10,406\nAnd one is on the 192.168.0 network.\n\n1114\n01:04:10,406 --> 01:04:13,902\nThat's the inside where my laptop is And\nthen there's the Internet,\n\n1115\n01:04:13,902 --> 01:04:16,579\nwhich is another private\nnetwork here in the office.\n\n1116\n01:04:16,579 --> 01:04:19,680\nAnd so I've got that kinda as my outside.\n\n1117\n01:04:19,680 --> 01:04:23,830\nNow, when we create ACLs, it's important\nto remember that access control lists\n\n1118\n01:04:23,830 --> 01:04:28,500\napply when traffic goes from\none interface to another.\n\n1119\n01:04:28,500 --> 01:04:32,520\nSo you've gotta have traffic\nthat's being routed to apply ACLs.\n\n1120\n01:04:32,520 --> 01:04:35,320\nIf it's not, if it's traffic destined for\nthe router itself,\n\n1121\n01:04:35,320 --> 01:04:36,500\nyour normal ACLs don't apply.\n\n1122\n01:04:38,070 --> 01:04:42,120\nThe other thing is when we write our ACLs\nwe need to think about the direction that\n\n1123\n01:04:42,120 --> 01:04:43,220\nwe're filtering.\n\n1124\n01:04:43,220 --> 01:04:46,390\nYou can filter traffic when\nit's coming into the router or\n\n1125\n01:04:46,390 --> 01:04:49,920\nyou can filter traffic on the way\nout of the router, either one works.\n\n1126\n01:04:51,050 --> 01:04:54,212\nBut again,\nthinking about hardware efficiency.\n\n1127\n01:04:54,212 --> 01:04:58,929\nIf I filter something when it comes in,\nI receive the traffic, I look at it,\n\n1128\n01:04:58,929 --> 01:05:00,573\nI reject it, that's it.\n\n1129\n01:05:00,573 --> 01:05:04,487\nIf I filter something on the way out,\nI receive the traffic, I look at it,\n\n1130\n01:05:04,487 --> 01:05:08,592\nI run it against the routing table,\nI move it from one interface to the other,\n\n1131\n01:05:08,592 --> 01:05:11,020\nI get ready to send it out,\nand then I drop it.\n\n1132\n01:05:12,190 --> 01:05:16,980\nSo outgoing ACLs you've already done\nall the hard work and then you drop\n\n1133\n01:05:16,980 --> 01:05:22,130\nthe traffic so it's not as efficient again\nas far as your hardware resources go.\n\n1134\n01:05:22,130 --> 01:05:26,230\nSo in general,\nI prefer to write incoming ACLs.\n\n1135\n01:05:27,830 --> 01:05:30,980\nBut there are scenarios where\nan incoming ACL just won't do,\n\n1136\n01:05:30,980 --> 01:05:33,150\nwhere you need outgoing ACLs.\n\n1137\n01:05:33,150 --> 01:05:34,910\nAnd just remember that your router,\n\n1138\n01:05:34,910 --> 01:05:37,540\nit's got a pretty decent set\nof hardware inside of it.\n\n1139\n01:05:37,540 --> 01:05:39,990\nAnd so, your outgoing ACLs,\nthey work fine.\n\n1140\n01:05:39,990 --> 01:05:43,110\nThey're not going to really hurt the\nsystem, but if you've got a ton of them,\n\n1141\n01:05:43,110 --> 01:05:46,260\nif you are seeing a performance hit,\nit might be time to step up to an ASA.\n\n1142\n01:05:49,300 --> 01:05:53,820\nNow when we write an ACL, there's,\nI'm gonna say there's two types of ACLs.\n\n1143\n01:05:53,820 --> 01:05:56,580\nThe textbooks will say there's three.\n\n1144\n01:05:56,580 --> 01:06:01,640\nThere's really two types of ACLs that we\nwrite, standard ACLs and extended ACLs.\n\n1145\n01:06:02,740 --> 01:06:05,500\nA standard ACL is one where we filter just\n\n1146\n01:06:05,500 --> 01:06:08,420\nbased on the source\naddress of the traffic.\n\n1147\n01:06:09,420 --> 01:06:13,340\nAnd that is it,\njust the source IP and nothing else.\n\n1148\n01:06:13,340 --> 01:06:15,230\n>> Yeah.\nAnd we take a look at the idea of\n\n1149\n01:06:15,230 --> 01:06:19,820\nthe extended ACL here what we're gonna\nsee is that we now have the ability\n\n1150\n01:06:19,820 --> 01:06:22,310\nto add in a whole bunch more.\n\n1151\n01:06:22,310 --> 01:06:27,040\nWe can again take a look at the protocol,\nand we can also filter by source and\n\n1152\n01:06:27,040 --> 01:06:28,560\ndestination as well.\n\n1153\n01:06:28,560 --> 01:06:31,190\nSo this gives us a lot\nmore benefits to it.\n\n1154\n01:06:31,190 --> 01:06:33,560\nNow, we do use them,\nquite often both of them,\n\n1155\n01:06:33,560 --> 01:06:36,340\nwhether we're talking about standard or\nextended ones.\n\n1156\n01:06:36,340 --> 01:06:41,490\nBut you do need to know at least those two\nand what you actually have to filter on.\n\n1157\n01:06:41,490 --> 01:06:46,720\n>> Now, when you do an extended ACL\nit can do source IP, destination IP,\n\n1158\n01:06:46,720 --> 01:06:49,620\nsource protocol, destination protocol.\n\n1159\n01:06:49,620 --> 01:06:52,350\nSo, it can do some really advanced stuff.\n\n1160\n01:06:52,350 --> 01:06:55,370\nThe reflexive ACLs, the time-based ACLs-\n>> All of them.\n\n1161\n01:06:55,370 --> 01:06:57,270\n>> Those are all extended.\n\n1162\n01:06:57,270 --> 01:06:59,070\nStandard ACL's can't do any of that.\n\n1163\n01:06:59,070 --> 01:07:01,430\nStandard ACL's just source IP.\n\n1164\n01:07:01,430 --> 01:07:03,900\nYou might say to yourself,\nwhy would I use those things?\n\n1165\n01:07:03,900 --> 01:07:05,850\nThey're garbage, I'm gonna use extended.\n\n1166\n01:07:05,850 --> 01:07:08,950\nWell the standard ACL's\nare far more efficient.\n\n1167\n01:07:08,950 --> 01:07:12,795\nSo if traffic speed is your number\none concern, you'll want to try and\n\n1168\n01:07:12,795 --> 01:07:15,490\nuse standard ACLs whenever possible.\n\n1169\n01:07:15,490 --> 01:07:18,900\nBut if traffic security is\nyour number one concern\n\n1170\n01:07:18,900 --> 01:07:21,550\nthen you'll use extended\nACLs almost always.\n\n1171\n01:07:21,550 --> 01:07:24,390\nNow, I mentioned that the books will\nsay that there's three ACLs and\n\n1172\n01:07:24,390 --> 01:07:25,621\nI say there's only two.\n\n1173\n01:07:25,621 --> 01:07:26,256\n[LAUGH] Why the discrepancy?\n\n1174\n01:07:26,256 --> 01:07:30,608\nWell, the third type of\nACL is called a named ACL.\n\n1175\n01:07:30,608 --> 01:07:34,740\nAnd with named ACLs you have standard and\nextended.\n\n1176\n01:07:34,740 --> 01:07:36,520\nSo really it's just\na different way of writing it.\n\n1177\n01:07:36,520 --> 01:07:40,030\nSo let me talk a little bit about\nthe history of ACLs before we go to far.\n\n1178\n01:07:40,030 --> 01:07:45,270\nBack in the old days, so\nwhen I got started in Cisco.\n\n1179\n01:07:45,270 --> 01:07:46,170\nWe didn't have IPv6 and\n\n1180\n01:07:46,170 --> 01:07:50,150\nyou had a couple of different routing\nprotocols that were out there.\n\n1181\n01:07:50,150 --> 01:07:54,190\nYou had IPX, SPX, you had Apple Talk,\nyou had TCP/IP, right?\n\n1182\n01:07:54,190 --> 01:07:58,870\nAnd they were all viable protocols you\nran into on a regular basis, right?\n\n1183\n01:07:58,870 --> 01:08:03,861\nIn today's world, you really just\nhave IPv4 and the new, budding IPv6.\n\n1184\n01:08:03,861 --> 01:08:07,350\nI say new, it's really been out for\na long time, but newly adopted.\n\n1185\n01:08:07,350 --> 01:08:10,250\nSo, when you wrote an ACL,\n\n1186\n01:08:10,250 --> 01:08:13,910\nyou had to tell the router what\nprotocol it was you were filtering.\n\n1187\n01:08:13,910 --> 01:08:17,130\nWere filtering IPv4 or IPXVS or whatever.\n\n1188\n01:08:17,130 --> 01:08:19,250\nAnd they did it via numbers.\n\n1189\n01:08:19,250 --> 01:08:23,980\nAnd so there were number ranges assigned\nto the router to be able to identify these\n\n1190\n01:08:23,980 --> 01:08:24,950\nprotocols.\n\n1191\n01:08:24,950 --> 01:08:28,970\nSo for example,\nhere I will bring up my little notepad,\n\n1192\n01:08:28,970 --> 01:08:33,390\ngetting real notepad proficient today so\nACL numbers.\n\n1193\n01:08:33,390 --> 01:08:37,968\nSo in the beginning you had 1 through 99,\n\n1194\n01:08:37,968 --> 01:08:43,303\nwhich were standard ACL,\nstandard IPv4 ACL's.\n\n1195\n01:08:43,303 --> 01:08:48,776\nAll right, and then we had 100\n\n1196\n01:08:48,776 --> 01:08:57,670\nthrough 199 which were extended IPv4 ACLs.\n\n1197\n01:08:57,670 --> 01:09:02,020\nSo if you were going to write a standard\nACL you just gave it a number one\n\n1198\n01:09:02,020 --> 01:09:02,995\nthrough 99.\n\n1199\n01:09:02,995 --> 01:09:05,895\nAnd if you were doing the extended, if\nyou needed to do source and destination,\n\n1200\n01:09:05,895 --> 01:09:07,250\nyou would do 100 through 199.\n\n1201\n01:09:07,250 --> 01:09:11,160\nAnd the router would know based on\nthe number you gave it what to Inspect\n\n1202\n01:09:11,160 --> 01:09:14,100\nwhether it should just be a source or\na bow, all right?\n\n1203\n01:09:14,100 --> 01:09:18,310\nAnd Cisco at the time said who would\npossibly need more than 99 ACLs.\n\n1204\n01:09:18,310 --> 01:09:19,140\n>> Yeah.\n[LAUGH]\n\n1205\n01:09:19,140 --> 01:09:20,350\n>> Well somebody did.\n\n1206\n01:09:20,350 --> 01:09:21,950\nSomebody needed it.\n\n1207\n01:09:21,950 --> 01:09:24,720\nAnd so later on,\nthey had to add other regions.\n\n1208\n01:09:24,720 --> 01:09:27,950\nAnd Ronnie,\ndid you remember the other region numbers?\n\n1209\n01:09:27,950 --> 01:09:28,850\n>> Yeah.\nWhen you actually begin\n\n1210\n01:09:28,850 --> 01:09:31,600\nwith the standard ACLs here and\nyou start going up there.\n\n1211\n01:09:31,600 --> 01:09:38,642\nThis is where they go all the way up to\nthe 1399 all the way through 1999 I think.\n\n1212\n01:09:38,642 --> 01:09:41,250\nAnd then you have to actually remember.\n\n1213\n01:09:41,250 --> 01:09:41,940\n>> You need to verify?\n\n1214\n01:09:41,940 --> 01:09:43,360\n>> Yeah, you probably do.\n\n1215\n01:09:43,360 --> 01:09:48,340\n>> So, I'm gonna call this\n>> Standard IPv4, ACL's.\n\n1216\n01:09:48,340 --> 01:09:56,730\nAnd this is the secondary range, and\nRonnie's gonna verify those ranges there.\n\n1217\n01:09:56,730 --> 01:09:58,890\nThey basically came back and they added.\n\n1218\n01:09:58,890 --> 01:10:01,310\nAnother 600 numbers.\n\n1219\n01:10:02,340 --> 01:10:02,920\n>> Look at that.\n\n1220\n01:10:02,920 --> 01:10:03,940\n>> You were right.\n\n1221\n01:10:03,940 --> 01:10:04,820\n>> Theres 1300 through 1999.\n\n1222\n01:10:04,820 --> 01:10:06,170\n>> You were close.\n\n1223\n01:10:06,170 --> 01:10:06,830\n>> I was close.\n\n1224\n01:10:06,830 --> 01:10:08,863\n>> Adding 700 IPs numbers.\n\n1225\n01:10:08,863 --> 01:10:13,440\nSo they added 700 more to cover\npeople who needed more than that, and\n\n1226\n01:10:13,440 --> 01:10:14,450\nwhats the extended one.\n\n1227\n01:10:14,450 --> 01:10:18,996\n>> The extended one begins at 2000 and\ngoes all the way up to through 2699.\n\n1228\n01:10:28,214 --> 01:10:30,760\n>> All right, so\nthey came back and added these.\n\n1229\n01:10:30,760 --> 01:10:32,790\nUnderstand this is a long time ago.\n\n1230\n01:10:32,790 --> 01:10:36,190\nThis happened Probably a good 12 or\n13 years ago.\n\n1231\n01:10:36,190 --> 01:10:40,090\nSo every router that you have today is\ngonna support both these sets of ranges,\n\n1232\n01:10:40,090 --> 01:10:42,260\nthe original and the secondary ranges.\n\n1233\n01:10:42,260 --> 01:10:45,220\nSo, you've got a ton of numbers\nthat you can pick from.\n\n1234\n01:10:45,220 --> 01:10:49,990\nNow you might ask yourself,\nwhat happened to 200 through 1299?\n\n1235\n01:10:49,990 --> 01:10:53,120\nWell, those were other protocols and,\nRonnie, you got the chart up?\n\n1236\n01:10:53,120 --> 01:10:54,470\n>> Yep, we do.\n>> Let's jump over to your computer.\n\n1237\n01:10:54,470 --> 01:10:54,970\n>> All right.\n\n1238\n01:10:56,270 --> 01:10:58,890\nNow let me see if I can\nmake that a little bigger.\n\n1239\n01:10:58,890 --> 01:11:00,535\nI'm already up at a 125%.\n\n1240\n01:11:00,535 --> 01:11:01,097\n>> [LAUGH]\n>> There we go. Okay.\n\n1241\n01:11:01,097 --> 01:11:05,257\nSo yeah, right when we actually take\na look here, you actually start seeing,\n\n1242\n01:11:05,257 --> 01:11:09,859\nbeginning at 200, you start seeing other\nparticular types of code like Ethernet,\n\n1243\n01:11:09,859 --> 01:11:15,280\naddressing and then transparent bridging.\nBut this is where Don is actually heading\n\n1244\n01:11:15,280 --> 01:11:20,130\nto, those different protocols\nthat you see like DECnet and\n\n1245\n01:11:20,130 --> 01:11:24,010\nthen of course, Xerox's networking\nsystems and extend it out.\n\n1246\n01:11:24,010 --> 01:11:25,140\nThere's your AppleTalk.\n\n1247\n01:11:25,140 --> 01:11:27,460\n>> Oh AppleTalk.\n>> You gotta love the AppleTalk here.\n\n1248\n01:11:27,460 --> 01:11:29,941\nYep and open, there it is, IPX.\n\n1249\n01:11:29,941 --> 01:11:34,412\nSo if you're running some of these legacy\nprotocols, if you're all novel network and\n\n1250\n01:11:34,412 --> 01:11:37,000\nyou're stuck in the novel four days or\nwhatever.\n\n1251\n01:11:37,000 --> 01:11:40,061\nThen you may need these other numbers,\nbut for most of us, we\n\n1252\n01:11:40,061 --> 01:11:44,590\njust pretend the numbers don't even exist\nanymore and we just deal with ip ones.\n\n1253\n01:11:44,590 --> 01:11:45,090\nYeah.\n\n1254\n01:11:47,130 --> 01:11:50,727\n>> So these numbers,\nthey started off with a very small range,\n\n1255\n01:11:50,727 --> 01:11:52,990\nabout a 100 numbers for each type.\n\n1256\n01:11:52,990 --> 01:11:56,197\nAnd then they expanded to add\nanother 700 numbers to each one, so\n\n1257\n01:11:56,197 --> 01:11:57,690\nyou could have more.\n\n1258\n01:11:57,690 --> 01:11:59,320\nAnd then finally they said, you know what?\n\n1259\n01:11:59,320 --> 01:12:01,860\nJust forget it, why do we even\ndo these stupid numbers anyway?\n\n1260\n01:12:01,860 --> 01:12:03,300\nYeah, let's do names.\n\n1261\n01:12:03,300 --> 01:12:08,340\nAnd with a named ACL,\nyou make up a name instead of a number.\n\n1262\n01:12:08,340 --> 01:12:09,610\nYou can call it whatever you want.\n\n1263\n01:12:09,610 --> 01:12:13,980\nAnd so, you have to tell the router,\nis it standard or is it extended?\n\n1264\n01:12:13,980 --> 01:12:16,431\nYou have to tell it.\nBut then the ACL has a name.\n\n1265\n01:12:16,431 --> 01:12:17,813\nThere's two conveniences here.\n\n1266\n01:12:17,813 --> 01:12:21,364\nOne, there's a near infinite\nnumber of names you can pick from.\n\n1267\n01:12:21,364 --> 01:12:25,556\nFrom and to, you can name them so\nyou recognize what they do.\n\n1268\n01:12:25,556 --> 01:12:29,280\nIf I look at ACL5,\nI might say what the heck is that?\n\n1269\n01:12:29,280 --> 01:12:34,140\nBut if I look at ACL outside-access-in,\nI say, all right,\n\n1270\n01:12:34,140 --> 01:12:35,730\nthat's traffic from the outside coming in.\n\n1271\n01:12:35,730 --> 01:12:39,676\nSo you can name them appropriately so\nyou can recognize their purpose.\n\n1272\n01:12:39,676 --> 01:12:45,230\nAll right, so that's where a lot of\nthe textbooks say theres 3 types of ACLs,\n\n1273\n01:12:45,230 --> 01:12:48,750\nbut a main ACL is going to be standard or\nextended.\n\n1274\n01:12:48,750 --> 01:12:50,690\nSo in the end there really is just two.\n\n1275\n01:12:50,690 --> 01:12:54,250\nThere's standard ACL that filter\njust on source address and\n\n1276\n01:12:54,250 --> 01:12:59,290\nextended ACL that work on source, and\ndestination, address, as well as protocol.\n\n1277\n01:13:00,800 --> 01:13:02,720\nSo really cool stuff there.\n\n1278\n01:13:02,720 --> 01:13:06,789\nSo when we go to creating ACL\nin our graphical user interface,\n\n1279\n01:13:06,789 --> 01:13:10,641\nin our GUI here,\nwe're gonna have to make those choices.\n\n1280\n01:13:10,641 --> 01:13:14,449\nNow the GUI does prefer to named ACLs.\n\n1281\n01:13:14,449 --> 01:13:17,430\nWe'll see that when we go, but\nit'll do numbered ones as well.\n\n1282\n01:13:17,430 --> 01:13:20,000\nThe named ones are just\na little more convenient.\n\n1283\n01:13:20,000 --> 01:13:24,600\nSo, let's say for example that I\nwanted to write a anti-spoofing ACL.\n\n1284\n01:13:25,620 --> 01:13:31,600\nWhen I receive traffic from the internet,\nI should never receive traffic from\n\n1285\n01:13:31,600 --> 01:13:35,840\nprivate IP ranges RFC 1918?\n\n1286\n01:13:35,840 --> 01:13:37,220\n>> 1918, yeah.\n>> There we go.\n\n1287\n01:13:37,220 --> 01:13:41,240\nRFC 1918 addresses that\nare the private reserve ranges.\n\n1288\n01:13:41,240 --> 01:13:43,440\nOn your router you might just\nwant to filter those off.\n\n1289\n01:13:43,440 --> 01:13:48,690\nThat would be traffic sourced from\nan invalid IP range on the internet.\n\n1290\n01:13:48,690 --> 01:13:52,810\nIt's a perfect example where\na standard ACL would work just fine.\n\n1291\n01:13:52,810 --> 01:13:54,329\nSo, I can pull up my outside interface.\n\n1292\n01:13:54,329 --> 01:13:56,603\nThis is my interface out\nthere on the internet.\n\n1293\n01:13:58,414 --> 01:14:02,455\nAnd I'm gonna tell it that that is\na WAN interface, a wide area network.\n\n1294\n01:14:04,312 --> 01:14:07,464\nSo it's just putting a little note\nthere in the router to remember\n\n1295\n01:14:07,464 --> 01:14:08,793\nthis one is on the outside.\n\n1296\n01:14:08,793 --> 01:14:13,442\nAnd then inside here, you can see things\nlike the IP address on the interface,\n\n1297\n01:14:13,442 --> 01:14:16,271\nif there's dynamic DNS turned on,\nwhatever.\n\n1298\n01:14:16,271 --> 01:14:22,380\nAnd under association,\nhere I can set inbound and outbound ACLs.\n\n1299\n01:14:22,380 --> 01:14:25,305\nIf I want to filter traffic\ngoing out this interface,\n\n1300\n01:14:25,305 --> 01:14:29,216\nin other words going towards the Internet,\nI would do an outbound ACL.\n\n1301\n01:14:29,216 --> 01:14:31,935\nWhen I want to filter traffic\ncoming from the internet, so\n\n1302\n01:14:31,935 --> 01:14:34,290\nthat is traffic coming in this interface.\n\n1303\n01:14:34,290 --> 01:14:38,377\nIf it ever gets confusing, on the exam,\none of the tricks I use is draw a picture.\n\n1304\n01:14:38,377 --> 01:14:41,345\nDraw a picture of the router and draw the\nnetwork so you can see were it is coming\n\n1305\n01:14:41,345 --> 01:14:43,690\nin, where it is going out, and\nget that direction in place.\n\n1306\n01:14:44,860 --> 01:14:47,150\nSo, I am going to do an inbound ACL.\n\n1307\n01:14:47,150 --> 01:14:48,470\nAnd over here, I'm just going to go and\n\n1308\n01:14:48,470 --> 01:14:50,550\nchoose to create a new one\nbecause I don't have one.\n\n1309\n01:14:50,550 --> 01:14:57,010\nAll right, so here you'll see where it's\nletting me put in a name or a number.\n\n1310\n01:14:57,010 --> 01:14:58,767\nI can put in either one.\n\n1311\n01:14:58,767 --> 01:15:00,370\n>> Right.\n>> I'm going to do a name,\n\n1312\n01:15:00,370 --> 01:15:03,647\nI'm going to call this\nmy anti-spoofing-acl.\n\n1313\n01:15:03,647 --> 01:15:07,476\nYou can't have spaces and so that's why\nI'm using hyphens there to separate it out\n\n1314\n01:15:07,476 --> 01:15:09,730\nbut, this is going to be\nmy anti-spoofing acl.\n\n1315\n01:15:09,730 --> 01:15:13,680\nAnd then I can tell it whether it's\ngoing to be extended or standard.\n\n1316\n01:15:13,680 --> 01:15:15,370\nI want it to be a standard acl.\n\n1317\n01:15:17,660 --> 01:15:20,130\nNow, I just need to put\nin my access control\n\n1318\n01:15:20,130 --> 01:15:22,920\n>> Entries each line that blocks or\n\n1319\n01:15:22,920 --> 01:15:24,220\nallows traffic.\n\n1320\n01:15:24,220 --> 01:15:27,410\nSo, I need to start thinking\nof my RFC1918 addresses.\n\n1321\n01:15:27,410 --> 01:15:32,770\nRight?\nSo, I'm going to deny a network.\n\n1322\n01:15:32,770 --> 01:15:37,960\nAnd that network, my first network,\nis going to be the 10.0.0.0 network.\n\n1323\n01:15:37,960 --> 01:15:39,960\nAnd for the wildcard mask,\n\n1324\n01:15:39,960 --> 01:15:42,610\nI know that first octet has to\nmatch the other three octets.\n\n1325\n01:15:42,610 --> 01:15:43,830\nCould be anything.\n\n1326\n01:15:43,830 --> 01:15:45,670\nSo I need a 0 dot.\n\n1327\n01:15:45,670 --> 01:15:48,860\nThat didn't work out.\n\n1328\n01:15:48,860 --> 01:15:49,670\nI'll ust type it.\n\n1329\n01:15:49,670 --> 01:15:51,225\nSometimes drop boxes aren't worth it.\n\n1330\n01:15:51,225 --> 01:15:56,410\n0.255.255.255 saying the first octets\na ten, everything else can be whatever.\n\n1331\n01:15:57,880 --> 01:16:00,690\nAll right.\nI also have the ability to log the matches\n\n1332\n01:16:00,690 --> 01:16:03,370\nif I want, to keep a record of it.\n\n1333\n01:16:03,370 --> 01:16:07,460\nBut anti-spoofing ACLs, they'll generate\ntons of messages cuz people spoof\n\n1334\n01:16:07,460 --> 01:16:09,329\nall the time, so\nI'm not gonna bother logging.\n\n1335\n01:16:10,890 --> 01:16:11,540\nAll right.\n\n1336\n01:16:11,540 --> 01:16:17,190\nAnd then I'm just gonna add\nin the other ones we want\n\n1337\n01:16:17,190 --> 01:16:21,845\nto deny, so I want to deny the 172.16.00,\nand this one's weird Ronnie because it's\n\n1338\n01:16:21,845 --> 01:16:26,450\n172.16 all the way through 172.31.\n\n1339\n01:16:26,450 --> 01:16:27,799\nSo do you remember what this one is?\n\n1340\n01:16:27,799 --> 01:16:31,954\n>> Yeah, this one actually is a slash\ntwelve in terms of the subnet mass for us.\n\n1341\n01:16:31,954 --> 01:16:40,430\nSo this would be a 0.0.240.255\n\n1342\n01:16:40,430 --> 01:16:44,497\n>> 240, then it would be 15.00.\n\n1343\n01:16:44,497 --> 01:16:46,503\n>> Wait, hold on.\n>> 255, there.\n\n1344\n01:16:46,503 --> 01:16:50,270\nSo, the first octet has to be 172,\nlet me zoom in a bit.\n\n1345\n01:16:50,270 --> 01:16:52,660\nThere.\nThe first octet has to be 172,\n\n1346\n01:16:52,660 --> 01:16:57,330\nthe second octet could be 16 through 31,\nand so\n\n1347\n01:16:57,330 --> 01:17:00,060\nthat's why I've got that 15 in there and\nthen 255 255.\n\n1348\n01:17:00,060 --> 01:17:05,020\nAll right and so that's that range.\n\n1349\n01:17:05,020 --> 01:17:10,690\nAnd then the class C, RFC 1918, is\n192.168.0 all the way through 192.168.255.\n\n1350\n01:17:10,690 --> 01:17:16,170\nSo for the wildcard mask,\nI'm gonna do what would be\n\n1351\n01:17:16,170 --> 01:17:21,530\nthe opposite of a class B.\n\n1352\n01:17:21,530 --> 01:17:24,870\nJust saying if it starts with 192.168 68.\n\n1353\n01:17:24,870 --> 01:17:30,620\nYou can also throw in Bogon addresses,\n\n1354\n01:17:30,620 --> 01:17:34,370\nand some other ones that\nmake sense to filter out.\n\n1355\n01:17:34,370 --> 01:17:37,310\nOne that I like to filter\nout is the loop back.\n\n1356\n01:17:37,310 --> 01:17:38,650\nThat's one a lot of people leave out.\n\n1357\n01:17:40,060 --> 01:17:42,250\nIt's a good spoofing attempt right there.\n\n1358\n01:17:42,250 --> 01:17:44,780\nYou can get a router to send\ntraffic back to itself.\n\n1359\n01:17:44,780 --> 01:17:47,720\nThere's attack vectors that\ntake advantage of that, and so\n\n1360\n01:17:47,720 --> 01:17:49,980\nwe can put all those in there, all right?\n\n1361\n01:17:49,980 --> 01:17:53,910\nNow, after that,\nI probably wanna permit anything else,\n\n1362\n01:17:53,910 --> 01:17:55,700\notherwise I'll hit that implicit deny all.\n\n1363\n01:17:55,700 --> 01:18:01,369\nSo I'm gonna add one more that just\nsays permit, and the IP address.\n\n1364\n01:18:04,598 --> 01:18:05,188\nAll right.\n\n1365\n01:18:05,188 --> 01:18:08,010\nI guess I do have one slight problem.\n\n1366\n01:18:08,010 --> 01:18:10,900\nOur outside interface isn't plugged\ndirectly into the internet,\n\n1367\n01:18:10,900 --> 01:18:12,432\nit's plugged into our\n>> Yeah.\n\n1368\n01:18:12,432 --> 01:18:14,280\n[LAUGH]\n>> IT/Pro TV network, so\n\n1369\n01:18:14,280 --> 01:18:17,440\nI probably need to add\none more entry in here\n\n1370\n01:18:17,440 --> 01:18:21,639\nto permit the IT/Pro TV Network\nwhich is the 10.1.230 network.\n\n1371\n01:18:24,060 --> 01:18:25,560\nAnd so I'm gonna put that one in.\n\n1372\n01:18:25,560 --> 01:18:27,550\nNow, it's gonna add it to the end.\n\n1373\n01:18:27,550 --> 01:18:31,090\nThe nice thing about the GUI, I can just\nhighlight that rule and hit Move Up, and\n\n1374\n01:18:31,090 --> 01:18:32,720\nI'm gonna move that up to the top.\n\n1375\n01:18:32,720 --> 01:18:37,930\nIf I leave it at the bottom,\nthis deny right here.\n\n1376\n01:18:37,930 --> 01:18:41,530\nThat deny would catch that traffic, so\ni've gotta move it above that deny.\n\n1377\n01:18:43,350 --> 01:18:46,760\nSo now i've got my list created and\n\n1378\n01:18:46,760 --> 01:18:51,880\ni've got my entries right here\nall punched in and when i say ok.\n\n1379\n01:18:52,890 --> 01:18:57,870\nIt's got it detached as an inbound ACL,\nand when I say OK there,\n\n1380\n01:18:57,870 --> 01:19:01,090\nit's just warning me that I could\npotentially lock my self out.\n\n1381\n01:19:01,090 --> 01:19:03,530\nOr here it's telling me\nthat NAT is in place.\n\n1382\n01:19:03,530 --> 01:19:05,040\nWhich I know about so I'll say yes.\n\n1383\n01:19:06,360 --> 01:19:07,450\nAnd we will deliver that down.\n\n1384\n01:19:09,100 --> 01:19:09,950\n>> All right.\n>> Okay, so\n\n1385\n01:19:09,950 --> 01:19:13,630\nnow I'm going to anti-spoofing-acl,\nand I can see it applied right there.\n\n1386\n01:19:13,630 --> 01:19:16,870\nSo I know that it is attached to that\ninterface and traffic going in and\n\n1387\n01:19:16,870 --> 01:19:20,512\nout of the router Is being a,\nyou know, a running instalist.\n\n1388\n01:19:20,512 --> 01:19:26,330\nAll right, so creating ACL,\nnot terribly hard from the GUI, right?\n\n1389\n01:19:27,410 --> 01:19:29,980\nNow that was just a standard ACL.\n\n1390\n01:19:29,980 --> 01:19:33,580\nAnd so, all we were filtering\non was the source IP address.\n\n1391\n01:19:33,580 --> 01:19:37,540\nIf somebody on the outside tries to come\nin, sending traffic in with a source in\n\n1392\n01:19:37,540 --> 01:19:41,730\nany of those ranges, the router\nwill just discard it out of hand.\n\n1393\n01:19:43,350 --> 01:19:48,480\nWhat if I want a filter based on\ndestination also, or protocol?\n\n1394\n01:19:48,480 --> 01:19:51,576\nThat's where we need to go\nbeyond it to an extended ACL, so\n\n1395\n01:19:51,576 --> 01:19:54,120\nlet's take a look at\nan example of one of those.\n\n1396\n01:19:54,120 --> 01:19:59,320\nSo I'll go back to my outside\ninterface and here's that inbound acl,\n\n1397\n01:19:59,320 --> 01:20:02,770\nand I'm going to replace\nit with another one.\n\n1398\n01:20:04,330 --> 01:20:05,780\nAnd so\nI'm going to choose to create a new one.\n\n1399\n01:20:07,060 --> 01:20:13,115\nAnd I'm going to call this\nmy outside-to-inside-acl.\n\n1400\n01:20:13,115 --> 01:20:16,360\nThis is gonna be filtering\noutside traffic coming in, right?\n\n1401\n01:20:16,360 --> 01:20:18,810\nNow this is gonna replace the other ACL.\n\n1402\n01:20:18,810 --> 01:20:21,135\nThe ACL still exists,\nit just won't be attached anymore.\n\n1403\n01:20:21,135 --> 01:20:24,594\nAnd I'm gonna do extended this time,\nand you'll notice a big difference.\n\n1404\n01:20:24,594 --> 01:20:26,379\nWhen we go to add, Nope,\n\n1405\n01:20:26,379 --> 01:20:31,310\nthere's a lot more in here cuz now\nwe're not just specifying a source\n\n1406\n01:20:31,310 --> 01:20:35,830\nIP we're also specifying\na destination as well as protocols.\n\n1407\n01:20:35,830 --> 01:20:37,610\nSo, there's a lot more\nadded to this interface.\n\n1408\n01:20:39,740 --> 01:20:44,810\nAll right, so if I have a web server I\nmight say that, I want to allow anybody\n\n1409\n01:20:44,810 --> 01:20:48,930\non the Internet, any IP address,\nto go to a specific host.\n\n1410\n01:20:50,030 --> 01:20:55,760\nSo maybe I've got web\nserver at 192.168.0.200 and\n\n1411\n01:20:55,760 --> 01:20:59,960\nI want to permit TCP and the source,\n\n1412\n01:20:59,960 --> 01:21:02,960\nyou know the source is randomly generated\nso I'm not going to mess with that.\n\n1413\n01:21:02,960 --> 01:21:07,650\nBut the destination,\nI want that destination to be port 80.\n\n1414\n01:21:07,650 --> 01:21:13,470\nTCP port 80 if somebody is coming through,\nmatch that and allow them in.\n\n1415\n01:21:16,460 --> 01:21:20,780\nAll right, I might want to add\nanother rule that says permit,\n\n1416\n01:21:20,780 --> 01:21:22,500\nor actually deny here.\n\n1417\n01:21:22,500 --> 01:21:29,630\nI might want to deny any IP address going\nto host and put in that same web server.\n\n1418\n01:21:31,880 --> 01:21:36,540\nOnly this time down here I just leave\nit at IP, which includes all TCP and\n\n1419\n01:21:36,540 --> 01:21:37,850\nUDP ports.\n\n1420\n01:21:37,850 --> 01:21:40,430\nSo now what it's doing is it's permitting\n\n1421\n01:21:42,510 --> 01:21:47,260\nanyone on the outside to access that web\nserver using www, using TCP port 80,\n\n1422\n01:21:47,260 --> 01:21:51,280\nand then denying any other\naccess to that host.\n\n1423\n01:21:52,800 --> 01:21:56,410\nSo you can get really specific with\nthese things, really granular.\n\n1424\n01:21:56,410 --> 01:21:57,920\nIt's pretty cool.\n\n1425\n01:21:57,920 --> 01:22:02,560\nAnd so then I might come in and\nsay permit everything else and so\n\n1426\n01:22:02,560 --> 01:22:03,920\nwe'll put that entry in there.\n\n1427\n01:22:03,920 --> 01:22:05,630\nSo now my web server is nice and\n\n1428\n01:22:05,630 --> 01:22:08,260\nsecure and all the other web\ntraffic is allowed through.\n\n1429\n01:22:08,260 --> 01:22:11,660\nYou might have other exceptions\nthat you need to put in place and\n\n1430\n01:22:11,660 --> 01:22:13,310\nwe can disable piano MAT.\n\n1431\n01:22:13,310 --> 01:22:19,430\nAnd now it's switched over to this rule,\nwhich is gonna go in place and\n\n1432\n01:22:19,430 --> 01:22:20,230\nreplace the old rule.\n\n1433\n01:22:22,340 --> 01:22:28,340\nAll right, now these ACLs,\nthey're not incredibly powerful.\n\n1434\n01:22:28,340 --> 01:22:30,710\nI mean you can write all sorts\nof neat stuff with them.\n\n1435\n01:22:30,710 --> 01:22:33,490\nBut as far as monitoring their\neffectiveness and seeing how they're\n\n1436\n01:22:33,490 --> 01:22:36,890\nworking and stuff, the router doesn't give\nus a whole heck of a lot for that, right.\n\n1437\n01:22:36,890 --> 01:22:39,530\nThe zone based firewall stuff that\nwe'll cover in another episode you get\n\n1438\n01:22:39,530 --> 01:22:40,960\ntons of information.\n\n1439\n01:22:40,960 --> 01:22:42,990\nHere's not a ton in fact,\n\n1440\n01:22:42,990 --> 01:22:46,020\ndo you know Ronnie I don't even\nknow did we get a ACL monitor.\n\n1441\n01:22:47,210 --> 01:22:48,640\n>> I don't remember.\n\n1442\n01:22:48,640 --> 01:22:49,830\n>> I don't think we did.\n\n1443\n01:22:49,830 --> 01:22:50,610\n>> Yeah.\n\n1444\n01:22:50,610 --> 01:22:53,340\n>> So if we dig in here I don't\nthink we get an ACL monitor.\n\n1445\n01:22:53,340 --> 01:22:56,310\n>> No.\n>> So if you wanna see whether the ACLs\n\n1446\n01:22:56,310 --> 01:23:01,030\nare actually working or not, the only\nreal way you can do it is from the CLI.\n\n1447\n01:23:01,030 --> 01:23:01,850\n>> Yeah.\n>> If you jump\n\n1448\n01:23:01,850 --> 01:23:06,090\nover to the command line interface you\ncan, well, if you can stay connected.\n\n1449\n01:23:06,090 --> 01:23:09,257\nMy session timed out from before.\n\n1450\n01:23:12,182 --> 01:23:17,312\nYou can do show, access-list and\nthat will show any ACLs you've written,\n\n1451\n01:23:17,312 --> 01:23:20,690\nand you can see whether\nthey've had matches.\n\n1452\n01:23:20,690 --> 01:23:25,190\nThose matches will let you know that the\nACL is working, or not and so here we can\n\n1453\n01:23:25,190 --> 01:23:28,900\nsee this one has some matches and\nthese other entries haven't been flagged.\n\n1454\n01:23:28,900 --> 01:23:30,920\nSo, you can kind of get that status, but\n\n1455\n01:23:30,920 --> 01:23:33,510\nfrom the GUI you really don't\nget a lot of reporting on it.\n\n1456\n01:23:33,510 --> 01:23:38,020\nAnd that's because Cisco knows that you\nmay use basic use of these, but if you\n\n1457\n01:23:38,020 --> 01:23:43,000\nhave real need of ACLs like this you'll\nstep up to that firewall feature set.\n\n1458\n01:23:45,650 --> 01:23:50,310\nSo creating ACL through the GUI\nis pretty easy, you know and for\n\n1459\n01:23:50,310 --> 01:23:56,550\nthe exam you do need to know it, but for\npractice I recommend learning the CLI.\n\n1460\n01:23:56,550 --> 01:23:59,690\nBecause working with the command line\ninterface you'll really learn how these\n\n1461\n01:23:59,690 --> 01:24:03,658\nthings are built, how they work and it'll\nreally cement that knowledge in your mind.\n\n1462\n01:24:03,658 --> 01:24:08,830\nAll right, so Ronnie, we're running\na little short on time for this segment.\n\n1463\n01:24:08,830 --> 01:24:11,490\nLet's stop here and\ntake a break and when we get\n\n1464\n01:24:11,490 --> 01:24:15,590\nback we will jump into that command line\nand see what damage we can do there.\n\n1465\n01:24:15,590 --> 01:24:16,170\n>> Sounds good.\n\n1466\n01:24:16,170 --> 01:24:17,210\n>> Sounds good?\nAll right.\n\n1467\n01:24:17,210 --> 01:24:18,540\nLadies and gentlemen, we'll stop here.\n\n1468\n01:24:18,540 --> 01:24:20,240\nStay tuned.\nWhen we get back,\n\n1469\n01:24:20,240 --> 01:24:22,171\nmore ACL action after this.\n\n1470\n01:24:22,171 --> 01:24:26,884\n[SOUND]\n\n1471\n01:24:30,204 --> 01:24:31,695\nAll right, welcome back everybody!\n\n1472\n01:24:31,695 --> 01:24:32,570\n>> [LAUGH]\n>> So\n\n1473\n01:24:32,570 --> 01:24:36,290\nin the last segment we talked a little bit\nabout ACLs and we got a chance to see how\n\n1474\n01:24:36,290 --> 01:24:40,930\nto make them in the GUI,\nwhich is the wimpy way of doing it, right.\n\n1475\n01:24:40,930 --> 01:24:43,230\nBut the real network avengers or\n\n1476\n01:24:43,230 --> 01:24:48,210\nwhatever we want to call ourselves,\nare gonna do it from the command line.\n\n1477\n01:24:48,210 --> 01:24:49,050\n>> Yeah.\nAnd there is a lot\n\n1478\n01:24:49,050 --> 01:24:52,360\nof flexibility in configuration now,\nbut when it comes to ACLs,\n\n1479\n01:24:52,360 --> 01:24:55,850\nyou can do almost all of\nit via the GUI if you want.\n\n1480\n01:24:55,850 --> 01:24:58,530\nSo don't feel like you\nhave to use the CLI.\n\n1481\n01:24:58,530 --> 01:25:02,430\nI recommend it because on a lot of\nrouters, you don't necessarily have\n\n1482\n01:25:02,430 --> 01:25:06,380\nthe GUI and then the other thing is,\nby doing it from the command line it\n\n1483\n01:25:06,380 --> 01:25:10,210\nensures that you really know what\neach piece of that puzzle does.\n\n1484\n01:25:10,210 --> 01:25:13,630\nAnd it's a good idea to see,\nversus the GUI that does a lot for you.\n\n1485\n01:25:13,630 --> 01:25:16,040\n>> Yeah, the same goes true for\nthe exam, okay?\n\n1486\n01:25:16,040 --> 01:25:21,200\nEven though you may get both, remember\nthat you can't depend on just one method.\n\n1487\n01:25:21,200 --> 01:25:23,560\nIf you're again heading for\nyour CCNA security,\n\n1488\n01:25:23,560 --> 01:25:27,320\nyou're gonna run into that situation where\nyou're not going to have access to both.\n\n1489\n01:25:27,320 --> 01:25:31,310\nSo learning both ways is pretty\nmuch they key here for us.\n\n1490\n01:25:31,310 --> 01:25:35,740\nBut again, for those of you that are\nstudying this, there's no better way for\n\n1491\n01:25:35,740 --> 01:25:37,220\nyou to learn it than to do this.\n\n1492\n01:25:37,220 --> 01:25:41,090\nSo again the command line is\npretty much the default way.\n\n1493\n01:25:41,090 --> 01:25:42,670\nIt will work regardless of whether or\n\n1494\n01:25:42,670 --> 01:25:47,290\nnot the router supports\nthe new interface or not.\n\n1495\n01:25:47,290 --> 01:25:50,090\n>> Yep.\nSo what I am going to do is I am going to\n\n1496\n01:25:50,090 --> 01:25:52,562\nbasically walk through\ncreating a standard and\n\n1497\n01:25:52,562 --> 01:25:57,080\nextended ACL and let me just get rid of-\nI don't know I'll leave those there.\n\n1498\n01:25:57,080 --> 01:25:58,900\nI don't want to get rid of\nthe ones the GUI created.\n\n1499\n01:25:59,900 --> 01:26:02,640\nWe'll create some from scratch and\nI want to start with a standard ACL and\n\n1500\n01:26:02,640 --> 01:26:05,330\nthen we'll get fancier from there.\n\n1501\n01:26:05,330 --> 01:26:08,720\nStandard ACLs are perhaps the easiest\nbecause really we're just listing\n\n1502\n01:26:08,720 --> 01:26:10,770\nwhat source IPs we permit and\n\n1503\n01:26:10,770 --> 01:26:15,050\nwhat source IPs we don't permit\nright not too much to them.\n\n1504\n01:26:15,050 --> 01:26:20,070\nSo you start by saying\naccess-list followed by a number.\n\n1505\n01:26:20,070 --> 01:26:21,850\nAnd if you can't remember the numbers,\n\n1506\n01:26:21,850 --> 01:26:25,010\nwell your good old friend the question\nmark will tell you all the numbers.\n\n1507\n01:26:25,010 --> 01:26:27,770\nAnd so I can see right there,\n1 through 99 and so on.\n\n1508\n01:26:27,770 --> 01:26:30,670\nI've all ready got an access-list 1,\nso I'm gonna do number 2.\n\n1509\n01:26:30,670 --> 01:26:33,420\nSo I'll say access-list 2 and\n\n1510\n01:26:33,420 --> 01:26:37,430\nthen we specify whether we're\npermitting or denying that traffic.\n\n1511\n01:26:37,430 --> 01:26:42,650\nIt's the only two actions that we really\nhave, permit and deny, so I'll say permit.\n\n1512\n01:26:42,650 --> 01:26:45,410\nOr let's use the same example from before.\n\n1513\n01:26:45,410 --> 01:26:46,520\n>> Okay, sure.\n>> Before we were doing\n\n1514\n01:26:46,520 --> 01:26:47,850\nthe anti-spoofing acl.\n\n1515\n01:26:47,850 --> 01:26:48,600\n>> Okay.\n\n1516\n01:26:48,600 --> 01:26:51,600\n>> And so we were denying certain traffic.\n\n1517\n01:26:51,600 --> 01:26:52,240\nRight?\n\n1518\n01:26:52,240 --> 01:26:57,290\nSo I can say access-list to deny,\nand then the network or\n\n1519\n01:26:57,290 --> 01:27:00,060\nhost that I want to disable or deny.\n\n1520\n01:27:00,060 --> 01:27:04,940\nNow if it's a host, let's say it's\nan individual IP address all right,\n\n1521\n01:27:04,940 --> 01:27:09,870\nthere's actually several different ways\nyou can enter in a single IP address.\n\n1522\n01:27:09,870 --> 01:27:16,120\nFor example,\nI could say deny 192.168.0.1 or\n\n1523\n01:27:16,120 --> 01:27:18,600\nthat's a bad one cuz I'm\nactually using that one.\n\n1524\n01:27:19,620 --> 01:27:23,190\nLet me just pick an address that's\nnot being used, like that one, okay.\n\n1525\n01:27:23,190 --> 01:27:27,320\nSo I'm gonna double deny it, there we go.\n\n1526\n01:27:27,320 --> 01:27:32,630\nSo access-list 2 deny 172.16.0.10 and\n\n1527\n01:27:32,630 --> 01:27:39,010\nI'm going to follow that with\na 0.0.0.0 wildcard mask.\n\n1528\n01:27:39,010 --> 01:27:44,110\nAnd, remember, with a wildcard mask means\nall four octets have to match match.\n\n1529\n01:27:44,110 --> 01:27:48,390\nI'm blocking this IP specifically.\n\n1530\n01:27:48,390 --> 01:27:50,770\n>> Yeah, now a lot of times\nyou actually see this where,\n\n1531\n01:27:50,770 --> 01:27:53,990\nwhen you actually do type it in, it's\ngonna be condensed in a different way.\n\n1532\n01:27:53,990 --> 01:27:59,030\nSo if we were to do the same thing again,\naccess-list 2 deny, instead,\n\n1533\n01:27:59,030 --> 01:28:03,970\nat this point, you can use to substitute\nthat wildcard mask, the word host, and\n\n1534\n01:28:03,970 --> 01:28:05,870\nthen the IP address itself.\n\n1535\n01:28:05,870 --> 01:28:08,800\nSo that host is actually kind\nof an abbreviation, I guess, or\n\n1536\n01:28:08,800 --> 01:28:12,720\na substitute for\nthe 32 bit wild card mass that you see.\n\n1537\n01:28:12,720 --> 01:28:16,540\n>> Cisco calls it an alias so it's\njust an alias for 0.0.0.0, same thing.\n\n1538\n01:28:16,540 --> 01:28:21,820\nThe tricky part there, though, is\nthe word host has to come before the IP.\n\n1539\n01:28:21,820 --> 01:28:22,585\nThat's telling it they're\nnot gonna have it.\n\n1540\n01:28:22,585 --> 01:28:27,141\nNow there's another thing that you\nreally don't see in the documentation,\n\n1541\n01:28:27,141 --> 01:28:29,112\nit is important to see, though.\n\n1542\n01:28:29,112 --> 01:28:37,810\nIs that if I just run Access\nlist to deny 172.16.0.12.\n\n1543\n01:28:37,810 --> 01:28:39,600\nSo I did 10, 11, and 12.\n\n1544\n01:28:39,600 --> 01:28:41,618\nIf I just stopped right here,\n\n1545\n01:28:41,618 --> 01:28:46,580\nthe router will actually assume\nI'm talking about a host.\n\n1546\n01:28:46,580 --> 01:28:51,500\nSo technically all three of those\nlines do exactly the same thing.\n\n1547\n01:28:51,500 --> 01:28:56,960\nThey all deny one host specifically,\nthe first line just blocks .10.\n\n1548\n01:28:56,960 --> 01:28:59,380\nThe second one just blocks .11.\n\n1549\n01:28:59,380 --> 01:29:01,430\nAnd the third one just blocks .12.\n\n1550\n01:29:01,430 --> 01:29:04,715\nThree ways of writing\nthe exact same thing.\n\n1551\n01:29:04,715 --> 01:29:07,365\n>> Mm-hm.\n>> Okay, which one's the right way?\n\n1552\n01:29:07,365 --> 01:29:08,252\nThey're all the right way.\n\n1553\n01:29:08,252 --> 01:29:09,835\n>> They're.\n>> Yeah, they're all the right way.\n\n1554\n01:29:09,835 --> 01:29:12,485\nYou pick which ever one you're happy with,\nall right?\n\n1555\n01:29:12,485 --> 01:29:15,445\nBut keep in mind,\nthat just because you wrote it one way,\n\n1556\n01:29:15,445 --> 01:29:18,305\nit doesn't mean that it makes it in\nto the Configuration of the other.\n\n1557\n01:29:18,305 --> 01:29:19,800\nAnd that's what Ronnie was mentioning.\n\n1558\n01:29:19,800 --> 01:29:23,700\nIs that the router itself will actually\nchange your commands a little bit.\n\n1559\n01:29:23,700 --> 01:29:28,950\nIf I do a filtered show run here.\n\n1560\n01:29:30,980 --> 01:29:33,120\nSee how it put it into the Config.\n\n1561\n01:29:33,120 --> 01:29:35,350\nEven though I entered it\nthree different ways.\n\n1562\n01:29:35,350 --> 01:29:38,310\nIt translated all of them into\nthe exact same format, and so\n\n1563\n01:29:38,310 --> 01:29:43,380\nthey're all in there as no host keyword,\nno wildcard mass,\n\n1564\n01:29:43,380 --> 01:29:47,200\njust straight up IP, and so\nthat's what we ended up with, all right.\n\n1565\n01:29:47,200 --> 01:29:51,150\nBut I wanted to show it to you this\nway because on the exam you could,\n\n1566\n01:29:51,150 --> 01:29:55,780\nand likely will,\nsee all three of those formats, okay?\n\n1567\n01:29:55,780 --> 01:29:58,260\nSo let me add that to our notes for\nthe show.\n\n1568\n01:30:00,420 --> 01:30:06,570\nSo I'm gonna write a standard ACL,\nand the example there.\n\n1569\n01:30:06,570 --> 01:30:08,340\nWhoops, I left off one 0.\n\n1570\n01:30:08,340 --> 01:30:09,850\nThere, okay.\n\n1571\n01:30:09,850 --> 01:30:13,770\nSo that is three different ways\nof writing one particular host.\n\n1572\n01:30:20,720 --> 01:30:21,380\nAll right.\n\n1573\n01:30:21,380 --> 01:30:24,410\nNow when it comes to a network,\nthough, that's a different story.\n\n1574\n01:30:24,410 --> 01:30:27,110\nThere's only one way to right a network,\nall right?\n\n1575\n01:30:27,110 --> 01:30:33,720\nWhen you block a network, if I wanna block\nthe entire 172.16.00 Class B network,\n\n1576\n01:30:33,720 --> 01:30:38,720\nthen I say, access-list 2 deny.\n\n1577\n01:30:38,720 --> 01:30:43,178\nAnd then the network I want to deny.\n\n1578\n01:30:43,178 --> 01:30:45,518\n172.16.0.0.0.0.255.255.\n\n1579\n01:30:45,518 --> 01:30:48,380\nThere's that wildcard mask.\n\n1580\n01:30:48,380 --> 01:30:55,055\nAnd I'm saying block anything\nthat starts With 172.16.\n\n1581\n01:30:55,055 --> 01:30:56,385\nTo my knowledge Ronnie,\nthat is the only way to write it\n\n1582\n01:30:56,385 --> 01:30:57,480\n>> That's the only way I know how.\n\n1583\n01:30:57,480 --> 01:31:01,045\n>> Okay, just making sure\nyou don't know one I don't\n\n1584\n01:31:01,045 --> 01:31:02,768\n>> Yeah, that's the only way I know.\n\n1585\n01:31:02,768 --> 01:31:06,538\nNow we're not completely done with\nthis access-list, yet, right?\n\n1586\n01:31:06,538 --> 01:31:10,480\nRemember I kinda made an admonition\nthat when you create an access-list,\n\n1587\n01:31:10,480 --> 01:31:15,080\nwe have to make sure that there's at\nleast one permit statement in there.\n\n1588\n01:31:15,080 --> 01:31:17,360\nAnd, so we wanna talk about\nthis in the other sets.\n\n1589\n01:31:17,360 --> 01:31:22,090\nInstead of actually taking a look at\nthe idea of just the individual host here,\n\n1590\n01:31:22,090 --> 01:31:24,500\nwhen we talk about this\nidea of permitting it.\n\n1591\n01:31:24,500 --> 01:31:27,750\nWell, if I want to actually permit\neverything else to come in,\n\n1592\n01:31:27,750 --> 01:31:29,590\nthere's a couple of different\nways to do this one too.\n\n1593\n01:31:29,590 --> 01:31:30,740\n>> Good point.\n\n1594\n01:31:30,740 --> 01:31:33,160\nThis is another one where\nwe could write several.\n\n1595\n01:31:33,160 --> 01:31:38,540\nIf we want to permit everybody, right, you\ncould type in access- list to permit and\n\n1596\n01:31:38,540 --> 01:31:40,830\nput in any ip address you want.\n\n1597\n01:31:40,830 --> 01:31:44,210\nYou just pick an address, 1.1.1.1.\n\n1598\n01:31:44,210 --> 01:31:50,797\nAnd for the wildcard mask,\nif you put in 255.255.255.255,\n\n1599\n01:31:50,797 --> 01:31:56,080\nif you put in all 255's that says,\nnot bits have to match.\n\n1600\n01:31:56,080 --> 01:31:59,510\nThat's why you can put in whatever\nthe heck you want in that first block.\n\n1601\n01:31:59,510 --> 01:32:04,090\nBecause we are saying no bits have to\nmatch so you could do whatever you want.\n\n1602\n01:32:04,090 --> 01:32:08,960\nMore commonly that's written like this,\nits written 0.0.0 and\n\n1603\n01:32:08,960 --> 01:32:14,190\nbecause that would technically\nbe like the very first number\n\n1604\n01:32:14,190 --> 01:32:18,700\npossible alright, well because it is all\n255, they both achieve the same goal.\n\n1605\n01:32:20,510 --> 01:32:22,120\nAn even easier way to write this,\n\n1606\n01:32:22,120 --> 01:32:27,320\nthough, is to use an alias in the system,\nany, all right?\n\n1607\n01:32:27,320 --> 01:32:31,890\nAny is a Cisco alias built in\nthat says permit, well, anybody.\n\n1608\n01:32:31,890 --> 01:32:32,510\n>> All of them, yep.\n\n1609\n01:32:34,220 --> 01:32:36,890\n>> All right, so\nyou wanna have that in there, so\n\n1610\n01:32:36,890 --> 01:32:39,880\nI'm gonna just throw that into the notes\n>> So\n\n1611\n01:32:39,880 --> 01:32:44,550\nlike three ways for writing all hosts.\n\n1612\n01:32:44,550 --> 01:32:46,095\nLike that.\n\n1613\n01:32:46,095 --> 01:32:47,620\n>> Mm-hm\n>> All right.\n\n1614\n01:32:47,620 --> 01:32:52,080\nAnd if I go and\nlook at the Config again, all right.\n\n1615\n01:32:52,080 --> 01:32:56,010\nSee how that list, that entry,\nit's only in there one time?\n\n1616\n01:32:56,010 --> 01:33:00,930\nThat's because, while I ran it three\ntimes, all three did the exact same,\n\n1617\n01:33:00,930 --> 01:33:02,910\nand so it translated them into one line.\n\n1618\n01:33:02,910 --> 01:33:05,550\nThe only reason it didn't combine my\ncommands earlier is they were three\n\n1619\n01:33:05,550 --> 01:33:06,360\ndifferent hosts.\n\n1620\n01:33:06,360 --> 01:33:10,530\nIf I'd used the same host number each\ntime, it would just be in there once also.\n\n1621\n01:33:10,530 --> 01:33:12,000\n>> It's all doing the same thing.\n\n1622\n01:33:12,000 --> 01:33:14,180\nAll right.\n\n1623\n01:33:14,180 --> 01:33:18,750\nSo now, I've got where basically all\nthese people that start with 172.16,\n\n1624\n01:33:18,750 --> 01:33:20,110\nthey're gonna be blocked.\n\n1625\n01:33:20,110 --> 01:33:23,000\nAnd then everyone else will be permitted.\n\n1626\n01:33:23,000 --> 01:33:24,020\nOkay.\n\n1627\n01:33:24,020 --> 01:33:28,420\nNow this access list right here, we did it\njust as an example so you guys could see.\n\n1628\n01:33:28,420 --> 01:33:28,960\n>> Right.\n>> But\n\n1629\n01:33:28,960 --> 01:33:31,700\nit's also a good example of a bad ACL-\n>> Mm-hm.\n\n1630\n01:33:31,700 --> 01:33:32,930\n>> Because what do I do?\n\n1631\n01:33:32,930 --> 01:33:36,160\nWell, I denied these\nthree hosts individually.\n\n1632\n01:33:36,160 --> 01:33:38,450\nBut right afterwards,\nI denied that entire network.\n\n1633\n01:33:38,450 --> 01:33:39,230\n>> Everything.\nYep.\n\n1634\n01:33:39,230 --> 01:33:41,535\n>> So these first three lines\nare really wasting time.\n\n1635\n01:33:41,535 --> 01:33:43,630\n>> Mm-hm.\n>> I can delete those first three lines,\n\n1636\n01:33:43,630 --> 01:33:46,710\nand the ACL will still\nwork exactly the same.\n\n1637\n01:33:46,710 --> 01:33:52,430\nBecause once somebody 172.16.0.10 11 and\n12, they all get blocked by this line too.\n\n1638\n01:33:52,430 --> 01:33:54,650\nSo, it's kind of redundant\nthe way that I have it now.\n\n1639\n01:33:54,650 --> 01:33:58,450\nI could shrew this ACl down, thus\nimproving the performance of my system.\n\n1640\n01:33:58,450 --> 01:33:58,950\n>> Yeap.\n\n1641\n01:34:01,050 --> 01:34:02,240\n>> All right.\n\n1642\n01:34:02,240 --> 01:34:06,640\nNow because standard ACLs deal\njust Just with source addresses.\n\n1643\n01:34:06,640 --> 01:34:09,650\nThey're pretty easy and that's about it.\n\n1644\n01:34:09,650 --> 01:34:12,800\nThe next step is to attach\nit to an Interface.\n\n1645\n01:34:12,800 --> 01:34:14,580\nAnd here's where things\nget a little weird.\n\n1646\n01:34:14,580 --> 01:34:16,820\nIt's not, I don't want to call it hard,\njust weird.\n\n1647\n01:34:18,200 --> 01:34:23,160\nWe get into an Interface like I'll\nget into my outside Interface.\n\n1648\n01:34:24,200 --> 01:34:29,755\nAnd we say,IP access -group,\nand then the number and\n\n1649\n01:34:29,755 --> 01:34:33,510\nthe direction we want it to apply in.\n\n1650\n01:34:33,510 --> 01:34:37,955\nAre we filtering traffic coming in to this\nInterface or going out this Interface?\n\n1651\n01:34:37,955 --> 01:34:40,660\n>> Mm-hm.\n>> I'm filtering traffic coming in from\n\n1652\n01:34:40,660 --> 01:34:43,270\nthe Internet, so I'll punch that in.\n\n1653\n01:34:43,270 --> 01:34:46,230\nThe weird parts about this command,\nfirst off we had to start with IP.\n\n1654\n01:34:46,230 --> 01:34:52,950\nWe didn't have to do that before, and\naccess-group instead of access-list.\n\n1655\n01:34:52,950 --> 01:34:55,990\nThat's different, so we have to\nremember that change in terminology.\n\n1656\n01:34:55,990 --> 01:34:56,690\n>> Yeah.\n\n1657\n01:34:56,690 --> 01:35:01,280\nNow, here's a great place to\nactually do just one more thing too.\n\n1658\n01:35:01,280 --> 01:35:04,040\nRemember that even if you\ncreate the access list itself,\n\n1659\n01:35:04,040 --> 01:35:07,700\nit means you created a list but\nit's not going to apply.\n\n1660\n01:35:07,700 --> 01:35:12,400\nOnly when you go to an Interface and\nthen you put in an access-group and\n\n1661\n01:35:12,400 --> 01:35:15,860\nthe direction that you want it\nto apply in will it take effect.\n\n1662\n01:35:15,860 --> 01:35:19,980\nI again can't tell you how many times\nI've created an entire access list and\n\n1663\n01:35:19,980 --> 01:35:23,530\nthen went back through and\ntried to do the show access-list.\n\n1664\n01:35:23,530 --> 01:35:24,980\nAnd then why isn't it applying?\n\n1665\n01:35:24,980 --> 01:35:27,540\nWell it's because I didn't\nattach it to an interface.\n\n1666\n01:35:27,540 --> 01:35:32,240\nSo make sure you do that so there's two\nparts to the access list that you create.\n\n1667\n01:35:32,240 --> 01:35:36,740\n>> The other thing to remember,\nis that you can only have\n\n1668\n01:35:38,240 --> 01:35:44,330\none ACL, per protocol per direction,\non an Interface.\n\n1669\n01:35:44,330 --> 01:35:46,040\nAlright.\nThat gets kinda confusing.\n\n1670\n01:35:46,040 --> 01:35:47,010\n>> Oh yeah.\n\n1671\n01:35:47,010 --> 01:35:51,330\n>> Basically, right now I just\napplied IPX's group two in.\n\n1672\n01:35:51,330 --> 01:35:54,310\nWe already had an incoming ACL\nattached there from earlier,\n\n1673\n01:35:54,310 --> 01:35:58,630\nit was the one called Outside to Inside,\nI think that's what it was called.\n\n1674\n01:35:58,630 --> 01:36:02,260\nAnd so I just replaced it\nwhen I put this one in, so\n\n1675\n01:36:02,260 --> 01:36:06,700\ntechnically I could have up to four\nACLs as far as the exam is concerned.\n\n1676\n01:36:07,700 --> 01:36:13,117\nSo on one Interface, you have one\n\n1677\n01:36:13,117 --> 01:36:18,931\nACL per protocol, per direction.\n\n1678\n01:36:18,931 --> 01:36:22,690\nAlright, so for example,\n\n1679\n01:36:22,690 --> 01:36:27,430\nyou could have an IPv4 incoming,\n\n1680\n01:36:27,430 --> 01:36:31,032\nIPv4- Outgoing IPv6.\n\n1681\n01:36:31,032 --> 01:36:37,181\nIncoming IPv6, outgoing.\n\n1682\n01:36:37,181 --> 01:36:44,660\nBut I couldn't have two IPv4 incoming,\nor three IPv6 outgoing.\n\n1683\n01:36:44,660 --> 01:36:47,460\nWhen you try to do that second or\nthird one, it replaces the first one.\n\n1684\n01:36:47,460 --> 01:36:48,080\nAll right.\n\n1685\n01:36:48,080 --> 01:36:51,390\nNow if you're running IPX/SPX, then you\nmight also have an IPX incoming and\n\n1686\n01:36:51,390 --> 01:36:55,890\nan IPX outgoing and so on, but\njust one per protocol per direction.\n\n1687\n01:36:55,890 --> 01:36:56,640\nAll right?\n\n1688\n01:36:56,640 --> 01:36:59,050\nSo keep that in mind as you go and\napply these.\n\n1689\n01:36:59,050 --> 01:37:02,280\nSo I didn't have to remove\nthe old ACL when I did this,\n\n1690\n01:37:02,280 --> 01:37:06,380\nit just automatically bumped it and\nnow this one's in place and that's it.\n\n1691\n01:37:07,590 --> 01:37:10,490\n>> Now,\nthe other use of the standard ACL, for\n\n1692\n01:37:10,490 --> 01:37:13,570\nus is we just limited the idea of traffic.\n\n1693\n01:37:13,570 --> 01:37:15,380\nBut later on when we get into NAT,\n\n1694\n01:37:15,380 --> 01:37:17,100\nI think we're gonna go into\nthat a little bit later on too.\n\n1695\n01:37:17,100 --> 01:37:21,750\nYou'll see that we use these standard ACLs\nto help us to really classify the traffic\n\n1696\n01:37:21,750 --> 01:37:25,480\nthat we want to take in and also VPNs,\nright, we might do something like that.\n\n1697\n01:37:25,480 --> 01:37:27,970\nSo we'll get into that\na little bit later on.\n\n1698\n01:37:27,970 --> 01:37:30,050\nBut just kind of realize that\nthere's more than just the use of\n\n1699\n01:37:30,050 --> 01:37:31,480\nfiltering here is what we're doing.\n\n1700\n01:37:31,480 --> 01:37:32,270\n>> Yeah, absolutely.\n\n1701\n01:37:32,270 --> 01:37:32,982\n>> Yep.\n\n1702\n01:37:32,982 --> 01:37:36,610\n>> All right, so that's a standard ACL,\npretty cut and dry.\n\n1703\n01:37:36,610 --> 01:37:37,750\nWhat about extended?\n\n1704\n01:37:37,750 --> 01:37:39,120\n>> Yeah.\n>> Extended,\n\n1705\n01:37:39,120 --> 01:37:41,090\nyou move beyond just source IP, right?\n\n1706\n01:37:41,090 --> 01:37:43,510\nAnd remember, source IP,\nthat's layer three data.\n\n1707\n01:37:43,510 --> 01:37:45,930\nThat's data your router's\nlooking at anyway.\n\n1708\n01:37:45,930 --> 01:37:50,640\nAn extended ACL Looks at source and\ndestination IP and\n\n1709\n01:37:50,640 --> 01:37:52,820\nagain your router is looking\nat that anyway, it's layer 3.\n\n1710\n01:37:52,820 --> 01:37:58,130\nBut it also goes up to layer 4 and\nlayer 5 at the OSI model and\n\n1711\n01:37:58,130 --> 01:38:01,810\nit starts to look at source and\ndestination protocols also.\n\n1712\n01:38:01,810 --> 01:38:06,240\nSo it's looking at ports and protocols to\nfigure out what type of traffic to allow\n\n1713\n01:38:06,240 --> 01:38:12,250\nand deny, and as a result extended\nACLs are much more complex to write.\n\n1714\n01:38:12,250 --> 01:38:12,870\nOkay?\n\n1715\n01:38:12,870 --> 01:38:15,820\nIf we were to break down the standard\nACL that I wrote a moment ago,\n\n1716\n01:38:15,820 --> 01:38:17,180\nlet's pull this back up.\n\n1717\n01:38:17,180 --> 01:38:20,865\nSo with a standard ACL, you basically say,\n\n1718\n01:38:20,865 --> 01:38:24,850\naccess-list and\nthen you've put in a number,\n\n1719\n01:38:24,850 --> 01:38:29,532\nright to identify,\nwhich really is one through 99 and\n\n1720\n01:38:29,532 --> 01:38:32,925\nwhat was it 1,300 [CROSSTALK]\n>> Yep.\n\n1721\n01:38:32,925 --> 01:38:33,870\n>> [LAUGH] All right.\n\n1722\n01:38:33,870 --> 01:38:36,716\nAnd then you basically put in deny or\n\n1723\n01:38:36,716 --> 01:38:42,709\npermit right followed by the host IP and\n\n1724\n01:38:42,709 --> 01:38:47,380\nwildcard mask.\n\n1725\n01:38:47,380 --> 01:38:52,950\nSo that's what makes up a standard\nACL entry, one ACE and an ACL.\n\n1726\n01:38:54,340 --> 01:38:56,450\nIn an extended ACL.\n\n1727\n01:38:56,450 --> 01:39:02,790\nSo if I go down here and\nwe'll say writing and extended ACL.\n\n1728\n01:39:02,790 --> 01:39:07,070\nIn the extended ACL,\nyou also say access-list and\n\n1729\n01:39:07,070 --> 01:39:11,200\na number knowing that it'll\nbe the other number range, so\n\n1730\n01:39:11,200 --> 01:39:16,180\n100 through 199 or 2000 through 2699,\nthose numbers that are there.\n\n1731\n01:39:17,780 --> 01:39:21,714\nAnd then you follow that with a permit,\nor deny.\n\n1732\n01:39:21,714 --> 01:39:22,990\nOkay?\n\n1733\n01:39:22,990 --> 01:39:28,000\nYou follow that by a protocol, okay?\n\n1734\n01:39:28,000 --> 01:39:36,900\nAnd the protocol is typically IP,\nTCP, or UDP.\n\n1735\n01:39:36,900 --> 01:39:39,270\nThere are other values, but\nthese are the main ones.\n\n1736\n01:39:40,340 --> 01:39:43,930\nIP means all IP,\nall internet protocol traffic.\n\n1737\n01:39:45,090 --> 01:39:49,000\nTCP and UDP specifically address\nTransmission Control Protocol and\n\n1738\n01:39:49,000 --> 01:39:55,229\nUser Datagram Protocol and we normally\ncouple those with port numbers afterwards.\n\n1739\n01:39:57,030 --> 01:40:01,322\nAfter we've identified the protocol\nthen we specify the source\n\n1740\n01:40:01,322 --> 01:40:06,580\nand wildcard,\n\n1741\n01:40:06,580 --> 01:40:11,780\nfollowed by the protocol and\nthen we designate.\n\n1742\n01:40:11,780 --> 01:40:13,960\nAnd I'm gonna run out of room, aren't I?\n\n1743\n01:40:13,960 --> 01:40:16,460\nLet's make my window a little bigger.\n\n1744\n01:40:16,460 --> 01:40:21,886\nFollowed by the destination,\n\n1745\n01:40:21,886 --> 01:40:27,060\nwildcard, and protocol.\n\n1746\n01:40:27,060 --> 01:40:28,840\nMuch longer command.\n\n1747\n01:40:28,840 --> 01:40:31,830\nIt's longer because we're\nspecifying source and destination.\n\n1748\n01:40:31,830 --> 01:40:34,550\nAnd it's longer because we're\nspecifying protocol information so\n\n1749\n01:40:34,550 --> 01:40:39,780\nit's a pretty long line when\nyou put in extended ACL Entry.\n\n1750\n01:40:39,780 --> 01:40:42,180\nSo, let's see an example, right?\n\n1751\n01:40:42,180 --> 01:40:43,682\nSo if I come in here and I say,\n\n1752\n01:40:43,682 --> 01:40:49,790\naccess-list 100 or 199,\nthat's fine it's in the range.\n\n1753\n01:40:49,790 --> 01:40:54,750\nAccess 100 permit IP\n\n1754\n01:40:57,100 --> 01:41:03,881\nand then I'll say 192.168.0.0\n\n1755\n01:41:03,881 --> 01:41:09,270\n0.0.0.255 any let's stop right there.\n\n1756\n01:41:09,270 --> 01:41:12,130\nWhat does this line mean?\n\n1757\n01:41:12,130 --> 01:41:18,420\nWell, it's permitting all IP traffic,\nTCP and UDP, all ports,\n\n1758\n01:41:18,420 --> 01:41:23,580\nall IP traffic from anybody whose\naddress starts with 192.168.0,\n\n1759\n01:41:23,580 --> 01:41:31,250\nso anybody who's in that network,\ngoing to any destination whatsoever.\n\n1760\n01:41:33,290 --> 01:41:36,930\nJust like in standard ACLs,\n\n1761\n01:41:36,930 --> 01:41:41,090\nthere's three ways to write that any,\nso you could leave that out.\n\n1762\n01:41:41,090 --> 01:41:45,080\nYou could say something like that.\n\n1763\n01:41:45,080 --> 01:41:47,450\nOops, not quite like that.\n\n1764\n01:41:47,450 --> 01:41:48,886\nAlthough that does actually work.\n\n1765\n01:41:50,566 --> 01:41:51,250\nThere we go.\n\n1766\n01:41:51,250 --> 01:41:52,120\nLike that.\n\n1767\n01:41:52,120 --> 01:41:54,530\nOr you could make up a network, and again,\n\n1768\n01:41:54,530 --> 01:41:56,550\nas long as you say that\nthis stuff doesn't match.\n\n1769\n01:41:56,550 --> 01:41:59,560\nAll three of those lines\nare the same thing.\n\n1770\n01:41:59,560 --> 01:42:03,040\n>> Now, Don, I noticed you had the\nprotocol right up to the source wildcard\n\n1771\n01:42:03,040 --> 01:42:03,890\nmask there, is that?\n\n1772\n01:42:05,900 --> 01:42:08,780\n>> And the protocol after\nthe source wildcard mask?\n\n1773\n01:42:08,780 --> 01:42:10,460\n>> Yeah, you take a look at your source,\n\n1774\n01:42:12,610 --> 01:42:14,750\nup at the top where you\nwere writing it out.\n\n1775\n01:42:14,750 --> 01:42:16,740\nYup.\nSource, that wildcard, and\n\n1776\n01:42:16,740 --> 01:42:17,580\nthen protocol again.\n\n1777\n01:42:18,680 --> 01:42:21,580\nOkay, so, two different protocols-\n>> Yep.\n\n1778\n01:42:21,580 --> 01:42:22,940\nJust want to make sure.\n\n1779\n01:42:22,940 --> 01:42:24,430\n>> Good, that's why you were throwing me.\n\n1780\n01:42:24,430 --> 01:42:25,170\n>> Sorry.\n\n1781\n01:42:25,170 --> 01:42:31,710\n>> So, basically you've got your layer 4,\nyour transport layer of protocols.\n\n1782\n01:42:31,710 --> 01:42:35,610\nSo IP gathers both of them,\nbut you've got TCP or UDP.\n\n1783\n01:42:35,610 --> 01:42:39,750\nBut then you've got your session protocol,\nwhat you're actually using for\n\n1784\n01:42:39,750 --> 01:42:40,930\ncommunications.\n\n1785\n01:42:40,930 --> 01:42:44,560\nSo let me just I'm gonna get rid of these\nlines cuz they're just gonna create\n\n1786\n01:42:44,560 --> 01:42:45,570\nconfusion later on.\n\n1787\n01:42:45,570 --> 01:42:47,242\nNow let me write out a couple of examples.\n\n1788\n01:42:47,242 --> 01:42:48,920\n>> Okay, yeah.\n>> So this one right here is permitting\n\n1789\n01:42:48,920 --> 01:42:50,690\nall IP traffic.\n\n1790\n01:42:50,690 --> 01:42:55,990\nI could also go on and\ndo something like this, where I said\n\n1791\n01:42:55,990 --> 01:43:02,390\nI'll allow TCP traffic, or UTP traffic.\n\n1792\n01:43:02,390 --> 01:43:05,780\nIn those scenarios,\nwe don't normally stop there.\n\n1793\n01:43:05,780 --> 01:43:10,670\nWe normally go a little further and\nspecify an actual sessional protocol.\n\n1794\n01:43:10,670 --> 01:43:17,286\nSo we might say something\nlike access-list100 permit\n\n1795\n01:43:17,286 --> 01:43:24,312\nTCP 192.160.0.0.0.0.255 any eq 80.\n\n1796\n01:43:24,312 --> 01:43:26,760\n>> Okay.\n>> All right, what does that mean?\n\n1797\n01:43:26,760 --> 01:43:30,110\nWell, that means that any machine\n\n1798\n01:43:30,110 --> 01:43:34,080\nwhose IP address starts with 192.168.0-\n>> Mm-hm\n\n1799\n01:43:34,080 --> 01:43:37,110\n>> Is allowed to go to any destination\n\n1800\n01:43:37,110 --> 01:43:41,970\nas long as the destination port equals 80.\n\n1801\n01:43:41,970 --> 01:43:46,300\nIf it equals 80,\nthen they're allowed to go through.\n\n1802\n01:43:46,300 --> 01:43:51,120\nSo this would permit basically web or\nHTTP browsing from those clients.\n\n1803\n01:43:52,310 --> 01:43:55,970\nAnd so you got eq, which is equals.\n\n1804\n01:43:55,970 --> 01:43:58,200\nYou also have gt-\n>> [LAUGH] Oh, yeah.\n\n1805\n01:43:58,200 --> 01:44:03,350\n>> Which is greater than,\nand lt, which is less than.\n\n1806\n01:44:03,350 --> 01:44:09,790\nAnd you even have range,\nwhich is a range of ports.\n\n1807\n01:44:09,790 --> 01:44:13,930\nNow, I don't use that one a whole lot,\nexcept, well, like SIP.\n\n1808\n01:44:13,930 --> 01:44:18,862\nIf you are doing SIP traffic, you might\ndo something like access-list100, permit.\n\n1809\n01:44:18,862 --> 01:44:21,686\nWe will go ahead and\n\n1810\n01:44:21,686 --> 01:44:26,630\nsay UDP 192.168.0.0\n\n1811\n01:44:26,630 --> 01:44:30,700\nany eq 50/60, oops.\n\n1812\n01:44:30,700 --> 01:44:32,787\nWait a minute.\n\n1813\n01:44:32,787 --> 01:44:33,740\n>> Right.\n\n1814\n01:44:33,740 --> 01:44:41,070\n>> I need to say where the range is,\nsay 20,000 to 30,000.\n\n1815\n01:44:41,070 --> 01:44:41,630\nOkay.\n\n1816\n01:44:41,630 --> 01:44:42,340\nSo that's\n\n1817\n01:44:44,390 --> 01:44:49,295\nopening up a whole range of ports to\nallow those connections to go through.\n\n1818\n01:44:49,295 --> 01:44:50,980\n>> [COUGH]\n>> And if you're doing like Zip\n\n1819\n01:44:50,980 --> 01:44:55,740\nvoiceover IP phone calls, well,\non those you've got like, 50-60's used for\n\n1820\n01:44:55,740 --> 01:44:59,190\nthe TCP, for the actual dial,\nbut then when you connect,\n\n1821\n01:44:59,190 --> 01:45:03,850\nyour voice is being transmitted\nvia UTP on a whole range of ports.\n\n1822\n01:45:03,850 --> 01:45:07,260\nSo you'll normally have to do stuff\nlike this to open up that wide swatch of\n\n1823\n01:45:07,260 --> 01:45:08,500\nports to a particular destination.\n\n1824\n01:45:09,540 --> 01:45:12,330\nSo those are examples.\n\n1825\n01:45:12,330 --> 01:45:15,700\nThere is one thing that I haven't\nmentioned which is we can also stick\n\n1826\n01:45:15,700 --> 01:45:19,780\nthe log command on the end of\nany of these to keep a record.\n\n1827\n01:45:19,780 --> 01:45:22,560\nBut just keep in mind that it\ncan be a lot of traffic, so\n\n1828\n01:45:22,560 --> 01:45:26,790\nyou wanna be careful with that\nlog command if you don't need it.\n\n1829\n01:45:26,790 --> 01:45:31,200\nAll right, so you see,\nthere's just a lot more there that\n\n1830\n01:45:31,200 --> 01:45:35,860\nwe need to be aware of and\nIf you're in the Command Prompt,\n\n1831\n01:45:35,860 --> 01:45:38,690\nyou can take advantage of that\nquestion mark all along the way.\n\n1832\n01:45:38,690 --> 01:45:43,730\nAnd it'll show you what you could\npotentially be typing at that point.\n\n1833\n01:45:43,730 --> 01:45:49,920\nSo if I say access-list 100, and\nthen I can see PERMIT, DENY.\n\n1834\n01:45:49,920 --> 01:45:51,450\nAnd so I'll permit.\n\n1835\n01:45:51,450 --> 01:45:54,380\nAnd then I do a question mark and\nhere's my protocol, my major protocol.\n\n1836\n01:45:54,380 --> 01:45:55,590\nIp, tcp, udp.\n\n1837\n01:45:55,590 --> 01:46:00,880\nAnd you'll see other ones in here like if\nyou're doing multi cast, there's igmp and\n\n1838\n01:46:00,880 --> 01:46:06,420\npim and there's other ones, iegrp and\nstuff but we'll just say like tcp.\n\n1839\n01:46:07,690 --> 01:46:10,150\nAnd then now it's time for the source.\n\n1840\n01:46:10,150 --> 01:46:12,330\nSee how it says, source address.\n\n1841\n01:46:12,330 --> 01:46:14,410\nAnd it even tells you,\nyou can do any or host.\n\n1842\n01:46:15,710 --> 01:46:17,030\nI'll say any.\n\n1843\n01:46:17,030 --> 01:46:21,120\nAnd now it's time for the destination and\nI can do any or host.\n\n1844\n01:46:21,120 --> 01:46:26,340\nI've also got the equals, greater than,\nless than, range, not equal to.\n\n1845\n01:46:26,340 --> 01:46:28,100\nThat's actually a new one that was added.\n\n1846\n01:46:28,100 --> 01:46:34,150\nI haven't had an occasion to use that yet,\nbut we can specify any any and\n\n1847\n01:46:34,150 --> 01:46:40,656\nthen eq oh,\nI got a little slash in there, eq 80.\n\n1848\n01:46:40,656 --> 01:46:44,380\nRight and if I keep doing that question\nmark it'll show the other things that I\n\n1849\n01:46:44,380 --> 01:46:45,710\ncan look for like.\n\n1850\n01:46:45,710 --> 01:46:49,910\nIf I'm trying to do a reflexive ACL I\nmight need to use the established command\n\n1851\n01:46:49,910 --> 01:46:53,550\nto say, as long as this was\nrequested allow it through.\n\n1852\n01:46:53,550 --> 01:46:54,920\nAnd stuff like that.\n\n1853\n01:46:54,920 --> 01:46:56,070\nYou'll see all sorts of ones in there.\n\n1854\n01:46:56,070 --> 01:46:58,720\nThe time range if we're looking\nto do a time based ACL.\n\n1855\n01:46:58,720 --> 01:47:00,940\nYou can specify that in there.\n\n1856\n01:47:00,940 --> 01:47:04,510\nSo these things are pretty easy\nwhen you have the question mark.\n\n1857\n01:47:04,510 --> 01:47:05,050\n>> Right.\n\n1858\n01:47:05,050 --> 01:47:07,540\n>> What if you don't\nhave the question mark?\n\n1859\n01:47:07,540 --> 01:47:11,220\nWhat if on the exam question\nthey show you an ACL and\n\n1860\n01:47:11,220 --> 01:47:12,570\nthey ask you what's wrong with it?\n\n1861\n01:47:12,570 --> 01:47:15,590\nYou need to be able to read it and\nrecognize the faults inside of it.\n\n1862\n01:47:17,400 --> 01:47:22,120\nSo Ronnie let's play stump the chump.\n\n1863\n01:47:22,120 --> 01:47:26,340\nRight, so why don't you\n>> You the chump.\n\n1864\n01:47:26,340 --> 01:47:29,915\n>> Give me some example ACLs and\nI'll type out the syntax for it.\n\n1865\n01:47:29,915 --> 01:47:34,535\n>> [LAUGH]\nAlright, so what type do we want?\n\n1866\n01:47:34,535 --> 01:47:39,085\nDo we want standard or do we want-\n>> Either way, give me an example of what\n\n1867\n01:47:39,085 --> 01:47:43,370\nyou wanna filter, and\nI'll write the command to filter it OK.\n\n1868\n01:47:43,370 --> 01:47:48,399\n>> I would like to filter out,\nlet's see, now I'm trying\n\n1869\n01:47:48,399 --> 01:47:53,535\nto think on the spot [CROSSTALK]\nI would like to filter out,\n\n1870\n01:47:53,535 --> 01:47:57,179\nlet's say, let's do a one way filter.\n\n1871\n01:47:57,179 --> 01:47:58,700\nLike what we have here, right?\n\n1872\n01:47:58,700 --> 01:48:01,390\nI want one side of my network to\nbe able to go in one direction but\n\n1873\n01:48:01,390 --> 01:48:03,920\nnot in the other direction,\nlike what we have.\n\n1874\n01:48:03,920 --> 01:48:05,240\n>> Okay.\n>> Does that make sense?\n\n1875\n01:48:05,240 --> 01:48:05,870\n>> Sure.\n\n1876\n01:48:05,870 --> 01:48:06,370\n>> Yeah.\n\n1877\n01:48:06,370 --> 01:48:09,400\nSo a one-way filter, I guess,\nwould be the easiest way here.\n\n1878\n01:48:09,400 --> 01:48:13,770\n>> All right, so we wanna filter out,\nwhat other networks?\n\n1879\n01:48:13,770 --> 01:48:15,630\n>> We can do our 192.168.1.0,\n\n1880\n01:48:15,630 --> 01:48:21,028\nI want that to be able to go in\ntoward the 192.168.10.0 network.\n\n1881\n01:48:21,028 --> 01:48:23,041\n>> It's /24?\n\n1882\n01:48:23,041 --> 01:48:24,140\n>> /24.\n\n1883\n01:48:24,140 --> 01:48:29,270\n>> Okay, so I want 192.168.1.0\n\n1884\n01:48:29,270 --> 01:48:34,975\nneeds to access 192.168.10.0.\n\n1885\n01:48:34,975 --> 01:48:35,901\n>> /24.\n\n1886\n01:48:35,901 --> 01:48:37,120\nYep.\n\n1887\n01:48:37,120 --> 01:48:38,260\n>> But not the other way around.\n\n1888\n01:48:38,260 --> 01:48:39,990\n>> But not the other way around.\n\n1889\n01:48:46,070 --> 01:48:47,910\n>> Alright.\nThis is a good example of something\n\n1890\n01:48:47,910 --> 01:48:49,610\nthat you will see in schools.\n\n1891\n01:48:49,610 --> 01:48:55,590\nWhere maybe you've got a network for your\nstaff, your teachers, your administrators,\n\n1892\n01:48:55,590 --> 01:48:58,820\npeople like that and you've got\nanother network for the students.\n\n1893\n01:48:58,820 --> 01:49:02,550\nAnd you want the staff to be able\nto access the student machines, but\n\n1894\n01:49:02,550 --> 01:49:04,950\nyou don't want the students to be\nable to access the staff machines.\n\n1895\n01:49:04,950 --> 01:49:06,290\nIt's very common.\n\n1896\n01:49:06,290 --> 01:49:09,560\nOr you might have a secure\nnetwork like your research and\n\n1897\n01:49:09,560 --> 01:49:12,640\ndevelopment network and you want them\nto be able to access production, but\n\n1898\n01:49:12,640 --> 01:49:14,430\nyou don't want production\nto be able to touch R&D.\n\n1899\n01:49:14,430 --> 01:49:17,550\nIt's a fairly common\nthing to put in place.\n\n1900\n01:49:17,550 --> 01:49:23,090\nAnd so what Ronnie's saying is basically\n192.168.1, that's their trusted network.\n\n1901\n01:49:23,090 --> 01:49:24,860\nAnd 192.168.10, that is not.\n\n1902\n01:49:26,630 --> 01:49:30,490\nNow because he wants two\ndirections of filtering,\n\n1903\n01:49:30,490 --> 01:49:35,520\nI'm gonna have to do incoming and\noutgoing ACLs to take care of this.\n\n1904\n01:49:35,520 --> 01:49:38,460\nAnd so I'm gonna just imagine that\nI'm doing this on an interface.\n\n1905\n01:49:38,460 --> 01:49:42,133\nLet's say that it's GigabitEthernet 0/0,\nokay.\n\n1906\n01:49:42,133 --> 01:49:44,670\nSo I'm gonna write two ACLs.\n\n1907\n01:49:44,670 --> 01:49:47,180\nOne handling incoming traffic,\none handling outgoing and\n\n1908\n01:49:47,180 --> 01:49:50,430\nthen we would attach\nthose to that interface.\n\n1909\n01:49:50,430 --> 01:49:53,850\nSo the first one that I'm going to\n\n1910\n01:49:53,850 --> 01:49:56,630\nwrite is that I want to allow\n192.168.1.0 to get to 192.168.10.0.\n\n1911\n01:49:56,630 --> 01:49:58,980\nAnd because I've got a source and\n\n1912\n01:49:58,980 --> 01:50:03,770\na destination,\nI'm going to need to do an extended acl.\n\n1913\n01:50:03,770 --> 01:50:10,300\nSo I may say IP access-list,\nwe'll do just I don't know 101.\n\n1914\n01:50:10,300 --> 01:50:15,990\nAnd I'm gonna permit any\nprotocols in particular Ronnie?\n\n1915\n01:50:15,990 --> 01:50:16,670\n>> No, not.\n>> All of it?\n\n1916\n01:50:16,670 --> 01:50:17,402\n>> Yeah all of it.\n\n1917\n01:50:17,402 --> 01:50:24,660\n>> All right, so I'm gonna permit IP, and\nthen for the source I'll do 192.168.1.0,\n\n1918\n01:50:24,660 --> 01:50:29,080\n0.0.0.255, so that's the whole network.\n\n1919\n01:50:29,080 --> 01:50:34,194\nAnd for the.\nDestination, I'll say 192.168.10.0,\n\n1920\n01:50:34,194 --> 01:50:37,595\n0.0.0.255, okay?\n\n1921\n01:50:37,595 --> 01:50:43,420\nSo I'm now permitting that traffic, and\nif I stop here, that's it, we're done.\n\n1922\n01:50:43,420 --> 01:50:44,100\nRight.\n\n1923\n01:50:44,100 --> 01:50:48,420\nIf there were other things I needed\nto permit, I can punch those in but\n\n1924\n01:50:48,420 --> 01:50:50,540\nthat's my first list.\n\n1925\n01:50:50,540 --> 01:50:53,800\nMy second list will be for the reverse.\n\n1926\n01:50:53,800 --> 01:50:54,780\nOkay.\n\n1927\n01:50:54,780 --> 01:51:01,716\nFor the reverse trip,\nwhat I'm gonna do is I'm gonna say this,\n\n1928\n01:51:01,716 --> 01:51:06,400\npermit IP 192.168, if I can type-\n>> [LAUGH]\n\n1929\n01:51:06,400 --> 01:51:10,205\n>> .10.0, so this is my untrusted network.\n\n1930\n01:51:10,205 --> 01:51:11,600\n>> Mm-hm.\n\n1931\n01:51:11,600 --> 01:51:15,160\n>> For the destination I'm going\nto put in my trusted network.\n\n1932\n01:51:16,620 --> 01:51:20,420\nNow if I were to stop right here I would\nbe in trouble right the untrusted network\n\n1933\n01:51:20,420 --> 01:51:22,450\nwould be able to access the trusted but\n\n1934\n01:51:22,450 --> 01:51:26,250\nI am going to add the established\nkeyword at the end and\n\n1935\n01:51:26,250 --> 01:51:32,680\nthat means allow the untrusted network to\nreply, but don't allow them to initiate.\n\n1936\n01:51:32,680 --> 01:51:36,730\nThe session has to already be\nestablished from the other side first.\n\n1937\n01:51:36,730 --> 01:51:38,490\nWe can't initiate.\n\n1938\n01:51:38,490 --> 01:51:40,784\nAnd then after that I can do.\n\n1939\n01:51:44,243 --> 01:51:48,142\nI don't really have to do this because\nthey'll hit the implicit deny all, but\n\n1940\n01:51:48,142 --> 01:51:51,581\nif I want to keep a log of when it\nhappens, I'm gonna need to put it in.\n\n1941\n01:51:54,762 --> 01:51:56,310\nBasically the same line.\n\n1942\n01:51:56,310 --> 01:51:59,750\nI'm going to throw the little log\nkeyword just to keep a record of it,\n\n1943\n01:51:59,750 --> 01:52:04,630\nbut basically coming through and\ndenying that same traffic.\n\n1944\n01:52:04,630 --> 01:52:08,320\nSo, if it's established they'll\nbe permitted and allowed through.\n\n1945\n01:52:08,320 --> 01:52:12,370\nIf it's not established they'll be\ndenied and not allowed through.\n\n1946\n01:52:12,370 --> 01:52:17,175\n>> So, Don if I were to change that\nfirst line on the 102 to, the deny.\n\n1947\n01:52:17,175 --> 01:52:18,600\n>> Mm-hm.\n\n1948\n01:52:18,600 --> 01:52:19,376\n>> Why didn't that work?\n\n1949\n01:52:19,376 --> 01:52:21,588\n>> If you change that to a deny.\n\n1950\n01:52:21,588 --> 01:52:22,110\n>> Yep.\n\n1951\n01:52:22,110 --> 01:52:25,970\n>> Then, technically what it would do\nis only deny established connections.\n\n1952\n01:52:25,970 --> 01:52:27,102\n>> [LAUGH] Yeah.\n\n1953\n01:52:27,102 --> 01:52:29,609\nSo if somebody from the other side tried\nto initiate, then it would deny that.\n\n1954\n01:52:29,609 --> 01:52:33,235\nBut if a student wanted to access\nthe instructors, it would let them do\n\n1955\n01:52:33,235 --> 01:52:37,290\nit because it's not established,\nit would pass right through that rule.\n\n1956\n01:52:37,290 --> 01:52:40,480\nSo that's the kind of stuff\nthat we have to watch out for.\n\n1957\n01:52:40,480 --> 01:52:42,950\nWhen you write ACLs, you see what I did?\n\n1958\n01:52:42,950 --> 01:52:44,750\nSee how I made these quick\nlittle notes here so\n\n1959\n01:52:44,750 --> 01:52:47,990\nI could keep track of what Ronnie wanted,\nthat's that first step.\n\n1960\n01:52:47,990 --> 01:52:51,430\nFigure out what they want, and\nthen come up with the commands and\n\n1961\n01:52:51,430 --> 01:52:52,925\nthe order to do it in.\n\n1962\n01:52:52,925 --> 01:52:55,000\nCause the order does get complex.\n\n1963\n01:52:55,000 --> 01:52:58,160\nIf you have to mix and match protocols,\ntry and optimize the list,\n\n1964\n01:52:58,160 --> 01:52:59,890\nthere can be a lot involved in that.\n\n1965\n01:52:59,890 --> 01:53:01,730\nThere's a lot of room for error.\n\n1966\n01:53:01,730 --> 01:53:04,940\n>> Let's try one with just a host here and\nI have one in mind here.\n\n1967\n01:53:04,940 --> 01:53:05,440\n>> Okay.\n\n1968\n01:53:06,830 --> 01:53:11,920\n>> I know that on another network\nhere there's a printer, and\n\n1969\n01:53:11,920 --> 01:53:15,370\nI want for that untrusted network only\nto be able to access that one printer.\n\n1970\n01:53:15,370 --> 01:53:17,240\nHow's that?\n\n1971\n01:53:17,240 --> 01:53:18,180\n>> Okay.\n>> But nothing else.\n\n1972\n01:53:18,180 --> 01:53:21,120\nI don't want them to be able to access\nanything else but they may need to print\n\n1973\n01:53:21,120 --> 01:53:24,780\nso I wanna just be able to give\nthem access to that one printer.\n\n1974\n01:53:24,780 --> 01:53:28,520\n>> Okay.\n>> So let's say it's a 1921681.45\n\n1975\n01:53:28,520 --> 01:53:31,150\nis the printer IP address.\n\n1976\n01:53:31,150 --> 01:53:33,760\nAnd then our untrusted is the 10.0.\n\n1977\n01:53:33,760 --> 01:53:37,930\n>> All right, and\nyou wanted me to do a standard ACL?\n\n1978\n01:53:37,930 --> 01:53:38,550\n>> Oh, no sorry.\n\n1979\n01:53:38,550 --> 01:53:40,940\n>> Oh, good.\n[LAUGH] I thought you said standard, and\n\n1980\n01:53:40,940 --> 01:53:42,330\nI was thinking to myself, oh boy.\n\n1981\n01:53:42,330 --> 01:53:43,120\n>> Oh, no, not a problem.\n\n1982\n01:53:43,120 --> 01:53:45,200\n>> That will be a challenge, Ronnie.\n\n1983\n01:53:45,200 --> 01:53:46,490\nYou might have me stumped.\n\n1984\n01:53:46,490 --> 01:53:50,000\nAll right, so this one is another\none that's straight forward,\n\n1985\n01:53:50,000 --> 01:53:52,200\ntype of traffic that we want to permit.\n\n1986\n01:53:52,200 --> 01:53:55,830\nNow it's a printer and you always\nhave to be careful with printers.\n\n1987\n01:53:55,830 --> 01:54:00,960\nIf I just go all out,\nif I say IP access list 105\n\n1988\n01:54:00,960 --> 01:54:06,240\npermit IP, a source of 192.168.10.0 like\n\n1989\n01:54:08,130 --> 01:54:13,269\nthat, going to 192.168.10.\n\n1990\n01:54:14,732 --> 01:54:19,810\nOr .1.45 which I can use the host keyword,\nsave me a little time.\n\n1991\n01:54:19,810 --> 01:54:24,550\nIf I just stop right there then they\nwould have full access to that printer.\n\n1992\n01:54:24,550 --> 01:54:25,770\nThey could print to it.\n\n1993\n01:54:25,770 --> 01:54:29,780\nThey could also bring up it's web\nmanagement portal and things like that.\n\n1994\n01:54:29,780 --> 01:54:33,660\nAnd you'd think that,\nusing a high school for example,\n\n1995\n01:54:33,660 --> 01:54:35,170\nyou'd think that students\nwouldn't think of that.\n\n1996\n01:54:35,170 --> 01:54:35,870\nThey do.\n\n1997\n01:54:35,870 --> 01:54:38,770\nAnd there have been many times\nwhere I walked into a school and\n\n1998\n01:54:38,770 --> 01:54:43,320\nthere were obscene messages on the display\npanel cuz they changed the readouts.\n\n1999\n01:54:43,320 --> 01:54:46,480\nI can tell you,\nI've seen some shocking ones.\n\n2000\n01:54:46,480 --> 01:54:49,340\nSo normally we need to\ngo a step further and\n\n2001\n01:54:49,340 --> 01:54:53,430\nthink of what ports do they actually need\nto print to make it more restrictive?\n\n2002\n01:54:53,430 --> 01:54:56,630\nNow, sometimes, we don't know, right?\n\n2003\n01:54:56,630 --> 01:54:59,990\nAnd printer protocols are bizarre,\nand there's a bunch of them, and\n\n2004\n01:54:59,990 --> 01:55:03,410\nnow you've got schools who are like, well,\nwe have iPads, the iPads need to print.\n\n2005\n01:55:03,410 --> 01:55:08,080\nSo sometimes it's not worth it to try and\nfigure out the ports they need, but\n\n2006\n01:55:08,080 --> 01:55:11,370\ninstead to come up with\nthe ports they don't need.\n\n2007\n01:55:11,370 --> 01:55:13,460\nSo if I was gonna do something like this,\n\n2008\n01:55:13,460 --> 01:55:16,200\nI would add a little bit more\nto it right at the beginning.\n\n2009\n01:55:16,200 --> 01:55:18,776\nI would say IP access-list 105.\n\n2010\n01:55:18,776 --> 01:55:27,171\nDeny TCP 192.168.10.0.\n\n2011\n01:55:34,972 --> 01:55:35,611\nAll right?\n\n2012\n01:55:35,611 --> 01:55:37,420\nSomething like this.\n\n2013\n01:55:37,420 --> 01:55:40,060\nAnd let me just,\nI'm gonna take that same line and\n\n2014\n01:55:40,060 --> 01:55:42,100\njust kind of clone it out a bit here.\n\n2015\n01:55:42,100 --> 01:55:46,130\nBecause these protocols that\nI'm listing right here, right?\n\n2016\n01:55:46,130 --> 01:55:46,810\n>> Oh yeah.\n\n2017\n01:55:46,810 --> 01:55:47,510\n>> What are those?\n\n2018\n01:55:47,510 --> 01:55:49,370\nWell see how fast I typed these out?\n\n2019\n01:55:49,370 --> 01:55:51,670\nI've got these memorized cuz I\nhave to do this all the time.\n\n2020\n01:55:51,670 --> 01:55:54,250\n>> Right.\n>> 80 and 433, those are the web browsing.\n\n2021\n01:55:54,250 --> 01:55:56,919\nI don't want them to be able to browse\nthrough the web page on the printer.\n\n2022\n01:55:56,919 --> 01:55:58,862\n>> Mm-hm.\n>> They don't have a username and\n\n2023\n01:55:58,862 --> 01:55:59,586\npassword, but\n\n2024\n01:55:59,586 --> 01:56:02,832\nI don't want them to even be able to\nget to the page in the first place.\n\n2025\n01:56:02,832 --> 01:56:03,370\n>> Yeah.\n\n2026\n01:56:03,370 --> 01:56:05,950\nAnd I definitely don't want\nthem to try and Telnet or\n\n2027\n01:56:05,950 --> 01:56:10,950\nSSH into the printer, because they\nmay be able to try and manipulate it.\n\n2028\n01:56:10,950 --> 01:56:15,002\nSome printers have ftp servers in them, so\n\n2029\n01:56:15,002 --> 01:56:22,558\nwe might even want to go a little bit\nfurther and block things like 20 and 21.\n\n2030\n01:56:22,558 --> 01:56:27,899\nAnd with those guys,\nthere's also the matter of that FTP gets\n\n2031\n01:56:27,899 --> 01:56:33,560\na little crazy sometimes with\ngoing between TCP and UDP, right?\n\n2032\n01:56:33,560 --> 01:56:36,060\nSo we might need to manipulate that a bit.\n\n2033\n01:56:36,060 --> 01:56:40,390\nSo what I'm doing here is I'm denying\nall the management protocols.\n\n2034\n01:56:40,390 --> 01:56:43,640\nI'm saying don't let them get to\nany of the management protocols.\n\n2035\n01:56:43,640 --> 01:56:45,590\nEverything else, I'll permit.\n\n2036\n01:56:45,590 --> 01:56:47,940\nAll the other crazy printing ports and\n\n2037\n01:56:47,940 --> 01:56:50,780\nstuff like that that I may use so\nI don't have to figure out what those are.\n\n2038\n01:56:50,780 --> 01:56:53,310\nNow the printer's at\nleast moderately secure.\n\n2039\n01:56:53,310 --> 01:56:57,220\n>> Now the whole goal of me actually\ndoing that was not to really trick Don so\n\n2040\n01:56:57,220 --> 01:57:00,480\nmuch, but it was a couple of things here.\n\n2041\n01:57:00,480 --> 01:57:03,410\nOne, I didn't remember all that,\nwhich is the first one.\n\n2042\n01:57:03,410 --> 01:57:06,910\nBut secondly It was this\nidea not one size fits all.\n\n2043\n01:57:06,910 --> 01:57:10,852\nSo just because we show you an example\nof oh yeah just do deny IP,\n\n2044\n01:57:10,852 --> 01:57:14,900\nwell that's not going to be enough or\njust permit IP's not going to be enough.\n\n2045\n01:57:14,900 --> 01:57:17,900\nSometimes you have to be very specific\nabout the protocols that you need.\n\n2046\n01:57:17,900 --> 01:57:20,420\nSo I'm getting to see some of these\ndifferent ones typed out here is actually\n\n2047\n01:57:20,420 --> 01:57:22,380\na very good example for us.\n\n2048\n01:57:22,380 --> 01:57:26,290\n>> And remember this access list\njust got really complex really fast.\n\n2049\n01:57:26,290 --> 01:57:29,210\nRemember that example I gave earlier\nin the show about object groups.\n\n2050\n01:57:29,210 --> 01:57:29,980\nWhere was that?\n\n2051\n01:57:29,980 --> 01:57:31,060\nThat was way back in here.\n\n2052\n01:57:31,060 --> 01:57:31,970\n>> Way up at the top.\n\n2053\n01:57:31,970 --> 01:57:35,185\n>> That we could come in and\nuse an object group like this.\n\n2054\n01:57:35,185 --> 01:57:35,700\n>> Mm-hm.\n\n2055\n01:57:35,700 --> 01:57:36,530\n>> Right.\n\n2056\n01:57:36,530 --> 01:57:39,250\nAnd if I were to use that instead.\n\n2057\n01:57:39,250 --> 01:57:42,290\nIf I were to come down here and\ncreate an object group.\n\n2058\n01:57:42,290 --> 01:57:50,410\nAnd I'll call it, you know,\nI might call it printer management, right.\n\n2059\n01:57:50,410 --> 01:57:55,660\nAnd then I do TCP 80 443, you know Telnet,\n\n2060\n01:57:55,660 --> 01:58:00,880\nwhich is 23, TCP 22 for\nSSH, TCP UDP range, right.\n\n2061\n01:58:00,880 --> 01:58:02,190\nSo I do all those things.\n\n2062\n01:58:02,190 --> 01:58:07,016\nI could have shortened this ACL\nquite a bit, down to just two lines\n\n2063\n01:58:07,016 --> 01:58:13,245\nby saying.\n\n2064\n01:58:13,245 --> 01:58:19,314\nI would have simplified my typing and\n\n2065\n01:58:19,314 --> 01:58:23,040\nall that's for sure.\n\n2066\n01:58:23,040 --> 01:58:26,730\nOh good, my head was on top so they\ncouldn't see how badly I was typing so\n\n2067\n01:58:26,730 --> 01:58:31,110\nhere we create that object group with\nall those management ports in it.\n\n2068\n01:58:31,110 --> 01:58:35,020\nSo when I do my line,\nI can just say, hey deny and\n\n2069\n01:58:35,020 --> 01:58:39,420\nthis actually would get\na little bit crazy.\n\n2070\n01:58:39,420 --> 01:58:40,590\nWe'd have to do it twice.\n\n2071\n01:58:40,590 --> 01:58:42,530\nOnce for TCP and once for UDP.\n\n2072\n01:58:42,530 --> 01:58:46,330\nBut basically specifying that object\ngroup, printer management, so\n\n2073\n01:58:46,330 --> 01:58:49,750\nthat it knows,\nhey we want to block that access out so\n\n2074\n01:58:49,750 --> 01:58:53,380\nthey can't get in there and\nhere it is all kind of rolled into one.\n\n2075\n01:58:53,380 --> 01:58:56,320\nSo just remember those object\ngroups are there to help you\n\n2076\n01:58:56,320 --> 01:58:57,960\ncreate those simpler lists.\n\n2077\n01:58:57,960 --> 01:58:58,990\n>> Yeah.\n\n2078\n01:58:58,990 --> 01:59:00,160\n>> All right.\n>> Sounds good.\n\n2079\n01:59:00,160 --> 01:59:01,470\n>> Well, Ronnie, we are out of time.\n\n2080\n01:59:01,470 --> 01:59:02,150\n>> Oh yeah.\n>> And\n\n2081\n01:59:02,150 --> 01:59:03,860\nI know we just looked at the syntax.\n\n2082\n01:59:03,860 --> 01:59:07,250\nI got a lot more I wanna talk about,\naccess lists, originally,\n\n2083\n01:59:07,250 --> 01:59:11,120\nwe'd envisioned ACLs taking one,\nmaybe two episodes.\n\n2084\n01:59:11,120 --> 01:59:13,730\nI think we're definitely into\nthe two episode territory now.\n\n2085\n01:59:13,730 --> 01:59:19,985\nSo let's wrap up here, and we will\ndo a access control list part deux.\n\n2086\n01:59:19,985 --> 01:59:24,180\n[LAUGH] Part two, and that will\nhave to contain all the rest of it.\n\n2087\n01:59:24,180 --> 01:59:27,940\nCuz we got a lot more to go, and we barely\nscratched the surface on even writing\n\n2088\n01:59:27,940 --> 01:59:31,230\nthe ACLs, so, Ronnie,\ncan you think of any other like\n\n2089\n01:59:31,230 --> 01:59:34,060\nsuper important pearls of wisdom to throw\nat the audience before we wrap it up?\n\n2090\n01:59:34,060 --> 01:59:35,600\n>> Nope.\nOnce again, practice.\n\n2091\n01:59:35,600 --> 01:59:39,250\nRemember the best practice,\non paper first, and then get faster and\n\n2092\n01:59:39,250 --> 01:59:41,550\nload them in to your router.\n\n2093\n01:59:41,550 --> 01:59:44,250\n>> All right, well ladies and gentlemen,\nI hope you guys enjoyed the show.\n\n2094\n01:59:44,250 --> 01:59:48,900\nAs always, if you have any questions\nremember, live during the show you can\n\n2095\n01:59:48,900 --> 01:59:53,200\ngo to itpro.tv/live you can post your\nquestions in the chat room on that page.\n\n2096\n01:59:53,200 --> 01:59:54,990\nWe monitor and answer during the show.\n\n2097\n01:59:54,990 --> 01:59:57,000\nIf you have questions after the show,\n\n2098\n01:59:57,000 --> 01:59:59,990\nat the top of every single one of\nour pages is a link that says Q&A,\n\n2099\n01:59:59,990 --> 02:00:02,610\nand go there and post your questions and\nwe monitor and answer.\n\n2100\n02:00:02,610 --> 02:00:05,870\nAnd we make sure you get\nthe information you need.\n\n2101\n02:00:05,870 --> 02:00:06,780\nAlright?\n\n2102\n02:00:06,780 --> 02:00:07,760\nThat's about all I've got.\n\n2103\n02:00:07,760 --> 02:00:10,740\nSo remember, there will be\na part two to this episode, so\n\n2104\n02:00:10,740 --> 02:00:13,480\nif you're watching this and\nthinking, they barely touched it.\n\n2105\n02:00:13,480 --> 02:00:14,800\nWell we got more content to get too.\n\n2106\n02:00:14,800 --> 02:00:16,830\n>> That's right.\n>> Look for part two.\n\n2107\n02:00:16,830 --> 02:00:18,500\nAll right.\nSo ladies and gentlemen, signing off for\n\n2108\n02:00:18,500 --> 02:00:19,280\nIT Pro TV.\n\n2109\n02:00:19,280 --> 02:00:20,450\nI'm Don Paset.\n\n2110\n02:00:20,450 --> 02:00:21,170\n>> I'm Ronnie Wong.\n\n2111\n02:00:21,170 --> 02:00:22,872\n>> And we'll see you next time.\n\n2112\n02:00:22,872 --> 02:00:27,789\n[MUSIC]\n\n",
          "vimeoId": "85925382"
        },
        {
          "description": "ACLs are one of the more challenging parts of the IINS exam, but the more one practices working with them, the more the commands start to become second nature. Viewers will hear about further functionality of access control lists including the different things one needs to troubleshoot with ACLs and hear discussions on named ACLs, troubleshooting ACLs and other uses of ACLs to secure a router.",
          "length": "4502",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/iins/006-IOS-Access-Control-Lists-Pt-2.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/iins/006-IOS-Access-Control-Lists-Pt-2-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/iins/006-IOS-Access-Control-Lists-Pt-2-sm.jpg",
          "title": "IOS Access Control Lists Part 2",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:15,147 --> 00:00:22,487\n[SOUND].\n\n3\n00:00:22,487 --> 00:00:32,487\n[MUSIC]\n\n4\n00:00:33,909 --> 00:00:36,660\nAll right, good morning, good afternoon\nand good evening and welcome back.\n\n5\n00:00:36,660 --> 00:00:38,070\nTo another episode of ITProTV.\n\n6\n00:00:38,070 --> 00:00:39,310\nI'm your host Don Pezet.\n\n7\n00:00:39,310 --> 00:00:40,960\nI'm here today with Mr. Ronnie Wong.\n\n8\n00:00:40,960 --> 00:00:42,030\nHow's it going Ronnie?\n\n9\n00:00:42,030 --> 00:00:42,580\n>> I'm doing too well.\n\n10\n00:00:42,580 --> 00:00:45,138\nMy Superbowl ad did not run today.\n\n11\n00:00:45,138 --> 00:00:46,509\n>> [LAUGH] Well today.\n\n12\n00:00:46,509 --> 00:00:47,065\n>> Yeah.\n\n13\n00:00:47,065 --> 00:00:49,014\n[LAUGH]\n>> There's your problem Ronnie because\n\n14\n00:00:49,014 --> 00:00:51,050\nthe Superbowl ads are supposed\nto run during the Superbowl.\n\n15\n00:00:51,050 --> 00:00:52,860\n>> I know and\nit still didn't get on today.\n\n16\n00:00:52,860 --> 00:00:54,030\n>> Did you cut a check for it?\n\n17\n00:00:54,030 --> 00:00:54,740\n>> I did.\n>> [LAUGH]\n\n18\n00:00:54,740 --> 00:00:55,830\n>> And that's why I'm mean and sadder.\n\n19\n00:00:55,830 --> 00:00:59,700\n>> I heard it was something like\n>> $4 million per minute or something for\n\n20\n00:00:59,700 --> 00:01:00,250\na Super Bowl ad.\n\n21\n00:01:00,250 --> 00:01:01,030\n>> Yeah they cut me a deal.\n\n22\n00:01:01,030 --> 00:01:04,270\nIt was only about 30 seconds so it was ok.\n\n23\n00:01:04,270 --> 00:01:06,790\n>> We need to sell ads for IT ProTV.\n\n24\n00:01:06,790 --> 00:01:08,355\n>> That's right.\n>> We'd get a fraction of that.\n\n25\n00:01:08,355 --> 00:01:09,640\n[LAUGH]\n>> That's right.\n\n26\n00:01:09,640 --> 00:01:10,660\n>> Alright well.\n\n27\n00:01:10,660 --> 00:01:15,190\nLadies and Gentlemen,\nwelcome to Part two of the Cisco ACL show.\n\n28\n00:01:15,190 --> 00:01:21,130\nEarlier we set out to do\nthe INS ACL objectives and\n\n29\n00:01:21,130 --> 00:01:24,620\nwe had hoped to get it done in one show\nbut there was just so much information and\n\n30\n00:01:24,620 --> 00:01:27,650\nI think we got a little carried away\nbecause we were having fun with it.\n\n31\n00:01:27,650 --> 00:01:31,400\nWe only got the right half of it\nso,here we are, back for part two.\n\n32\n00:01:31,400 --> 00:01:35,700\nDouble dose of ACL's upgrade style.\n\n33\n00:01:35,700 --> 00:01:37,560\nSo, we're gonna jump back into ACLs.\n\n34\n00:01:37,560 --> 00:01:40,520\nWe got some neat things to talk about,\nsome important things we need to know for\n\n35\n00:01:40,520 --> 00:01:43,740\nthe exam, and\nthat we need to know for real life.\n\n36\n00:01:43,740 --> 00:01:45,020\n>> Alright, for reals.\n\n37\n00:01:45,020 --> 00:01:47,862\n>> So what I want to do is\nstart off with a little\n\n38\n00:01:47,862 --> 00:01:48,770\nrefresher,\n>> Right.\n\n39\n00:01:48,770 --> 00:01:49,490\n>> Because for\n\n40\n00:01:49,490 --> 00:01:51,740\nus it has been a matter of minutes\n>> Right.\n\n41\n00:01:51,740 --> 00:01:54,610\n>> since we've worked with ACL's,\nbut for the viewer at home,\n\n42\n00:01:54,610 --> 00:01:56,730\nyou guys might be watching this weeks or\ndays apart or whatever.\n\n43\n00:01:56,730 --> 00:02:00,980\nSo let's do a refresher and\na little bit of trouble shooting kinda\n\n44\n00:02:00,980 --> 00:02:05,250\nbend our mind to ACL's and\nget us back into that happy place.\n\n45\n00:02:05,250 --> 00:02:08,830\nSo what I did, I worked up some examples.\n\n46\n00:02:08,830 --> 00:02:11,520\nLet's pull up my computer here.\n\n47\n00:02:11,520 --> 00:02:14,050\nAnd what I've got is a couple\nACLs that Ronnie and\n\n48\n00:02:14,050 --> 00:02:17,680\nI wrote, and\neach one of them has a problem.\n\n49\n00:02:17,680 --> 00:02:20,650\nThere is something wrong\nwith each one of these.\n\n50\n00:02:20,650 --> 00:02:23,530\nAnd so I wanna take a look at them and\nmaybe we can try and\n\n51\n00:02:23,530 --> 00:02:25,610\nidentify it, spot the issue.\n\n52\n00:02:25,610 --> 00:02:28,550\nAnd the issue may be syntax or\nplacement or\n\n53\n00:02:28,550 --> 00:02:31,740\nwhatever and kinda figure out\nwhat it takes to get these.\n\n54\n00:02:31,740 --> 00:02:34,830\nBack and operational.\n\n55\n00:02:34,830 --> 00:02:38,054\nMy first one here, I should have\nwritten a scenario on each one,\n\n56\n00:02:38,054 --> 00:02:42,432\nbut I didn't, basically we've got a couple\nof different networks that are out here.\n\n57\n00:02:42,432 --> 00:02:47,381\nWe've got the 192.168.1.0,\n2.0, 3.0 networks and\n\n58\n00:02:47,381 --> 00:02:52,652\nthe running through, like these two\nguys run through Router A, which runs to\n\n59\n00:02:52,652 --> 00:02:58,350\nRouter B to a destination and in this ACL,\nweve basically done a little statement.\n\n60\n00:02:58,350 --> 00:03:04,930\nWhat we wanna do is on Router B,\nwe want this network..\n\n61\n00:03:04,930 --> 00:03:08,330\nIn this network, the 192.168.1 and\ndot two network,\n\n62\n00:03:08,330 --> 00:03:13,190\nwe want them to be able to access\nthe 192.168.3 network, all right.\n\n63\n00:03:13,190 --> 00:03:17,310\nBut we don't want anyone else\nto be able to get there.\n\n64\n00:03:17,310 --> 00:03:20,880\nJust these two guys to be able to make it.\n\n65\n00:03:20,880 --> 00:03:22,780\nSo, we wrote an ACL, and\n\n66\n00:03:22,780 --> 00:03:27,460\nwe attached it to the fa0/0 Interface,\nthat's what that arrow's all about.\n\n67\n00:03:27,460 --> 00:03:32,270\nSo, you can see interface fa0/0,\nIP access group one, in.\n\n68\n00:03:32,270 --> 00:03:36,305\nAnd for the ACL, we denied everybody, but\n\n69\n00:03:36,305 --> 00:03:40,904\nwe permitted the 192.168.1.0, and\n\n70\n00:03:40,904 --> 00:03:48,546\nthe 192.168.2.0 both with\nthe 0.0.0.255 wildcard mask.\n\n71\n00:03:48,546 --> 00:03:52,995\n>> Now the logic behind this actually\nworks we do have a statement that says go\n\n72\n00:03:52,995 --> 00:03:55,530\nahead and dis allow everybody else.\n\n73\n00:03:55,530 --> 00:03:56,480\nBut permit.\n\n74\n00:03:56,480 --> 00:03:59,464\nThe 1.0 network and the 2.0 network, but\n\n75\n00:03:59,464 --> 00:04:03,805\nwhen we checked on router B here,\nwe found out something.\n\n76\n00:04:03,805 --> 00:04:08,160\n1.0 was not matching and 2.0 was not\nactually getting through either.\n\n77\n00:04:08,160 --> 00:04:10,490\nSo we gotta do a little bit of\ntroubleshooting here on our ACL.\n\n78\n00:04:10,490 --> 00:04:14,220\n>> Now this is a very common scenario.\n\n79\n00:04:14,220 --> 00:04:17,960\nThis is very similar to what you'll\nsee in text book and on the exam.\n\n80\n00:04:17,960 --> 00:04:21,490\nWhat they're doing here is they're\nquizzing you a couple of different things.\n\n81\n00:04:21,490 --> 00:04:24,530\nWhat are the different things we\nneed to troubleshoot with ACLs?\n\n82\n00:04:24,530 --> 00:04:27,680\nWell, the first and\nforemost thing is syntax.\n\n83\n00:04:27,680 --> 00:04:31,450\nThere could by typos anywhere throughout\nthese commands that could cause\n\n84\n00:04:31,450 --> 00:04:33,620\nthe ACL not to work.\n\n85\n00:04:33,620 --> 00:04:35,700\nThe second is placement.\n\n86\n00:04:35,700 --> 00:04:36,690\nWhere's it attached?\n\n87\n00:04:36,690 --> 00:04:38,170\nWhat Interface is it attached to?\n\n88\n00:04:38,170 --> 00:04:40,240\nWhat direction is it pointing?\n\n89\n00:04:40,240 --> 00:04:43,265\nThose are other things that\ninfluence whether the ACLs work.\n\n90\n00:04:43,265 --> 00:04:44,550\n>> Right.\n>> And then third,\n\n91\n00:04:44,550 --> 00:04:47,611\njust straight up what is being\npermitted and what it is being denied.\n\n92\n00:04:47,611 --> 00:04:49,190\n>> Mm-hm.\n>> Looking at the protocols and\n\n93\n00:04:49,190 --> 00:04:53,160\nthe addresses, and making sure that it\nachieves what we want it to achieve.\n\n94\n00:04:53,160 --> 00:04:56,275\nIf those three things are all good,\nthe ACL should work.\n\n95\n00:04:56,275 --> 00:04:57,280\n>> Yeah.\n\n96\n00:04:57,280 --> 00:05:00,550\n>> Now, I'm gonna regret this,\nI'm gonna use a big word.\n\n97\n00:05:00,550 --> 00:05:03,276\nSo, syntactically [LAUGH]\n>> Whoo nice.\n\n98\n00:05:03,276 --> 00:05:07,060\n>> I look at this and\nI don't see any typos.\n\n99\n00:05:07,060 --> 00:05:10,590\nI know that the commands themselves\nwere at least typed right.\n\n100\n00:05:10,590 --> 00:05:12,070\nNow, they might be the wrong commands, but\n\n101\n00:05:12,070 --> 00:05:14,300\nthe commands that were\ntyped are typed correctly.\n\n102\n00:05:14,300 --> 00:05:17,780\nAll right, and if I'm filtering traffic.\n\n103\n00:05:19,250 --> 00:05:26,988\nSo, for example, let's see here, if I'm\nfiltering traffic from this network,\n\n104\n00:05:26,988 --> 00:05:31,560\ngoing to 192.168.3.0.\n\n105\n00:05:32,670 --> 00:05:37,651\nThis network going to 192.168.3.0.\n\n106\n00:05:37,651 --> 00:05:41,361\nIf I start thinking about\nthings like direction,\n\n107\n00:05:41,361 --> 00:05:46,090\nI know that that traffic is\ncoming in this Interface.\n\n108\n00:05:46,090 --> 00:05:48,374\nAnd coming out that Interface.\n\n109\n00:05:48,374 --> 00:05:49,251\n>> Mm-hm.\n>> Okay.\n\n110\n00:05:49,251 --> 00:05:52,138\nSo when we start talking about directions-\n>> Yeah.\n\n111\n00:05:52,138 --> 00:05:56,350\n>> I know this ACL could be attached\nto either of these interfaces.\n\n112\n00:05:56,350 --> 00:05:57,690\nIf its attached here,\n\n113\n00:05:57,690 --> 00:05:58,770\nit would need to be a-\n>> Mm-hm.\n\n114\n00:05:58,770 --> 00:05:59,690\n>> Incoming ACL.\n\n115\n00:05:59,690 --> 00:06:01,620\nIf it was attached here it\n\n116\n00:06:01,620 --> 00:06:02,950\nwould need to be an outgoing-\n>> Mm-hm.\n\n117\n00:06:02,950 --> 00:06:03,940\n>> ACL.\n\n118\n00:06:03,940 --> 00:06:07,490\nIn our case it's attached\nto this interface fa00, and\n\n119\n00:06:07,490 --> 00:06:13,600\nit is a incoming ACL, so\nthat looks good, alright.\n\n120\n00:06:13,600 --> 00:06:18,370\nSo I don't see a problem as far as\nthe direction, and the Interface has.\n\n121\n00:06:18,370 --> 00:06:21,730\n>> And if we take a look at\nthe actual filtering statements here.\n\n122\n00:06:21,730 --> 00:06:23,790\nNotice the permit statements that we have.\n\n123\n00:06:23,790 --> 00:06:27,690\nIt is allowing just the traffic\nthat we want to come in.\n\n124\n00:06:27,690 --> 00:06:31,300\nThe actual 1.0 network, and\nthe 2.0 network coming in.\n\n125\n00:06:31,300 --> 00:06:34,510\nLike I said,\nwhen we take a look at the router.\n\n126\n00:06:34,510 --> 00:06:37,935\nWe are actually seeing some of that hey\nthat traffic is not getting in at all.\n\n127\n00:06:37,935 --> 00:06:38,490\n>> Mm-hm.\n\n128\n00:06:38,490 --> 00:06:41,670\n>> So that's where that last statement\nup there at the top really does\n\n129\n00:06:41,670 --> 00:06:42,368\nhelp us out here.\n\n130\n00:06:42,368 --> 00:06:47,910\nBut, really again all\nthe elements in logic it works.\n\n131\n00:06:47,910 --> 00:06:48,510\nOkay?\n\n132\n00:06:48,510 --> 00:06:50,950\nSo our problem here is something else.\n\n133\n00:06:50,950 --> 00:06:54,610\n>> Yeah, Cisco likes questions like these,\nbecause what they're doing is they're\n\n134\n00:06:54,610 --> 00:06:59,480\ntesting how well you know what\nactually happens on the router.\n\n135\n00:06:59,480 --> 00:07:03,782\nTo a casual observer, someone who\nhasn't studied, this looks right.\n\n136\n00:07:03,782 --> 00:07:07,660\nOkay, but anyone who studied\nCisco equipment should know\n\n137\n00:07:07,660 --> 00:07:11,810\nthat ACLs are applied in\norder from top to bottom, and\n\n138\n00:07:11,810 --> 00:07:17,300\nthat means the very first line\nis applied well, first, right?\n\n139\n00:07:17,300 --> 00:07:23,010\nAnd so access to one deny any,\nthat means deny everyone.\n\n140\n00:07:23,010 --> 00:07:24,820\nIt doesn't matter what your IP is.\n\n141\n00:07:24,820 --> 00:07:30,050\nIt doesn't matter if you are in this\nnetwork or this network work or whatever.\n\n142\n00:07:30,050 --> 00:07:34,070\nWhen you pass over to this router,\nwhen you pass to it.\n\n143\n00:07:34,070 --> 00:07:35,840\nIt's going to deny you.\n\n144\n00:07:35,840 --> 00:07:36,590\nNo matter what.\n\n145\n00:07:36,590 --> 00:07:38,140\nEven though line number two and\n\n146\n00:07:38,140 --> 00:07:41,470\nline number three explicitly\npermit you to get through.\n\n147\n00:07:41,470 --> 00:07:44,970\nYou never get to those lines,\nyou're denied before you even get there.\n\n148\n00:07:44,970 --> 00:07:46,215\n>> Yeah.\nSo this brings us back\n\n149\n00:07:46,215 --> 00:07:48,306\nto that best principle\nthat we talked about.\n\n150\n00:07:48,306 --> 00:07:50,146\nThat the more explicit, or\n\n151\n00:07:50,146 --> 00:07:54,552\nmost explicit ACLs should always\nproceed the more general ACLs.\n\n152\n00:07:54,552 --> 00:07:57,577\nSo that's where we have our problem here,\nit's that lines 2 and\n\n153\n00:07:57,577 --> 00:07:59,614\n3 should actually proceed the first line.\n\n154\n00:07:59,614 --> 00:08:00,937\nAnd that would be the easiest fix.\n\n155\n00:08:00,937 --> 00:08:05,210\nRight, the easiest fix would\nbe to take that first line,\n\n156\n00:08:05,210 --> 00:08:08,590\nthis guy right here, and just move it.\n\n157\n00:08:08,590 --> 00:08:11,037\nMove it down to be the last line.\n\n158\n00:08:11,037 --> 00:08:15,403\nAll right.\nWhen you do that, now 192.168.1 and\n\n159\n00:08:15,403 --> 00:08:19,690\n.2 are permitted and\neveryone else is denied.\n\n160\n00:08:19,690 --> 00:08:20,380\nRight?\n\n161\n00:08:20,380 --> 00:08:23,960\nBut there is an implicit deny all.\n\n162\n00:08:23,960 --> 00:08:26,950\nAnother perfectly viable\nsolution would be,\n\n163\n00:08:26,950 --> 00:08:28,800\nto just get rid of that line altogether.\n\n164\n00:08:28,800 --> 00:08:29,310\nRight.\n\n165\n00:08:29,310 --> 00:08:34,150\nBecause then we permit 192.168.1.2,\nand then everybody else is denied.\n\n166\n00:08:34,150 --> 00:08:36,740\nTwo solutions to the same problem.\n\n167\n00:08:36,740 --> 00:08:43,010\nWe could just move it to the last line,\nor just delete that line altogethe.\n\n168\n00:08:43,010 --> 00:08:43,780\n>> Sounds good.\n\n169\n00:08:43,780 --> 00:08:47,960\n>> So that's an example of kind\nof troubleshooting an ACL and\n\n170\n00:08:47,960 --> 00:08:50,320\nhow we write them and\nwe've got several more of these.\n\n171\n00:08:50,320 --> 00:08:53,470\nIt's a great refresher for those of you,\neven if you already know ACLs.\n\n172\n00:08:53,470 --> 00:08:56,110\nAll right, here's an extended ACL.\n\n173\n00:08:56,110 --> 00:09:00,181\nSo now we're going a little bit beyond\nwhat we had with the standard ACL,\n\n174\n00:09:00,181 --> 00:09:02,271\nand it's the same basic situation.\n\n175\n00:09:02,271 --> 00:09:09,005\nWe want to permit 192.168.1.0 and\n192.168.2.0.\n\n176\n00:09:09,005 --> 00:09:13,110\nWe want to permit them\nto access a web server.\n\n177\n00:09:13,110 --> 00:09:17,004\nAnd the web server is over\nhere on the 192.168.3 network.\n\n178\n00:09:17,004 --> 00:09:21,415\nAnd it is actually at 192.168.\n\n179\n00:09:21,415 --> 00:09:27,987\nLet me write this on the screen here.\n\n180\n00:09:33,327 --> 00:09:34,910\nWell, that's gigantic.\n\n181\n00:09:34,910 --> 00:09:37,620\nI'm going to run out of room.\n\n182\n00:09:37,620 --> 00:09:41,493\nAlright, well so there is 196.168.3.200,\nthat is our web server.\n\n183\n00:09:41,493 --> 00:09:45,833\nSo I want 192.168, that 1.0 and\n\n184\n00:09:45,833 --> 00:09:52,650\n2.0 I want them to be able to get\nto a web server at 192.168.3.200.\n\n185\n00:09:52,650 --> 00:09:58,430\nNow we have an ACL that is\nattached to this interface, okay?\n\n186\n00:09:58,430 --> 00:10:01,470\nAnd it's an incoming ACL, so\n\n187\n00:10:01,470 --> 00:10:05,260\nany traffic going in that interface\nis going to get filtered.\n\n188\n00:10:05,260 --> 00:10:08,490\nAnd what I'm finding is that\nthe hosts on one 192.168.2.0.\n\n189\n00:10:08,490 --> 00:10:13,180\nthey're able to get through just fine.\n\n190\n00:10:13,180 --> 00:10:14,460\nSo they're passing through and\n\n191\n00:10:14,460 --> 00:10:17,520\nthey're accessing that web\nserver no problem, alright.\n\n192\n00:10:17,520 --> 00:10:21,175\nBut host over here on 192.168.1.0,\nthey're coming through and\n\n193\n00:10:21,175 --> 00:10:23,860\nthey're getting blocked.\n\n194\n00:10:23,860 --> 00:10:28,485\nThey're not making it through so\nI want the host on 192.160.1.0 to be\n\n195\n00:10:28,485 --> 00:10:33,135\nable to get to this web server and\nI though I had written the ACL right.\n\n196\n00:10:33,135 --> 00:10:33,825\n>> Right.\n\n197\n00:10:33,825 --> 00:10:35,045\n>> What's the problem?\n\n198\n00:10:35,045 --> 00:10:35,795\n>> Yeah.\n\n199\n00:10:35,795 --> 00:10:38,855\nSo when we take a look at this\nparticular situation, again,\n\n200\n00:10:38,855 --> 00:10:40,010\nwe take a look at the things that.\n\n201\n00:10:40,010 --> 00:10:41,670\nActually have to apply for us.\n\n202\n00:10:41,670 --> 00:10:46,340\nSo the logic seems to work out for\nat least one of our statements here, but\n\n203\n00:10:46,340 --> 00:10:50,080\nthe other one is not doing what we want to\nand so this is where we have to look at\n\n204\n00:10:50,080 --> 00:10:54,380\nthe syntax and the way the statements\nare laid out at this point.\n\n205\n00:10:54,380 --> 00:10:59,280\nWe are going to take a look at\nan extended access control list here.\n\n206\n00:10:59,280 --> 00:11:03,320\nWe have to go from source to\nthe destination is where we're going.\n\n207\n00:11:03,320 --> 00:11:08,065\nAnd so we look at line two,\nwe're not really seeing that.\n\n208\n00:11:08,065 --> 00:11:10,930\n>> Yeah in line one,\nline one's a pretty simple line.\n\n209\n00:11:10,930 --> 00:11:15,540\nIt just says permit the 192 168 2 network,\ngoing to any destination and\n\n210\n00:11:15,540 --> 00:11:17,640\nsure enough we see it\ngets through there fine.\n\n211\n00:11:17,640 --> 00:11:20,790\nLine two is a lot more complex though,\nlet's break it down.\n\n212\n00:11:20,790 --> 00:11:22,990\nWe've got access dash list 101.\n\n213\n00:11:22,990 --> 00:11:25,290\nIt's permitting TCP traffic.\n\n214\n00:11:25,290 --> 00:11:30,530\nWell, you know,\nI want access to a web server and\n\n215\n00:11:30,530 --> 00:11:33,618\nthat's TCP port 80 sounds good, right?\n\n216\n00:11:33,618 --> 00:11:37,700\nCOming from 192.168.3.200 that's my web\nserver where the port equals 80 that's web\n\n217\n00:11:37,700 --> 00:11:38,370\ntraffic right.\n\n218\n00:11:38,370 --> 00:11:39,240\n>> That's fine.\n\n219\n00:11:39,240 --> 00:11:41,315\n>> Going to 192.168.1.0.\n\n220\n00:11:41,315 --> 00:11:44,820\nWith a 0.0.0.255 wildcard\nmask that is a 192.168.1.0.\n\n221\n00:11:44,820 --> 00:11:46,230\nnetwork.\nAll right.\n\n222\n00:11:46,230 --> 00:11:50,590\nThat looks good is it.\n\n223\n00:11:50,590 --> 00:11:52,980\nIt's my web server going to that network.\n\n224\n00:11:52,980 --> 00:11:55,980\nIt seems that should be fine, right?\n\n225\n00:11:55,980 --> 00:12:00,130\nBut like Ronnie mentioned we have\nto think about the direction, okay.\n\n226\n00:12:00,130 --> 00:12:04,525\nIf I break that down,\nlet me get all this mess off.\n\n227\n00:12:04,525 --> 00:12:05,246\n[SOUND] Laptops beeping at me.\n\n228\n00:12:05,246 --> 00:12:09,836\n>> [LAUGH]\n>> That line what it was saying was this\n\n229\n00:12:09,836 --> 00:12:12,785\nweb server right, going\n>> To\n\n230\n00:12:12,785 --> 00:12:17,035\nthe 192.168.1 network-\n>> Mm-hm.\n\n231\n00:12:17,035 --> 00:12:18,040\n>> All right.\n\n232\n00:12:18,040 --> 00:12:20,780\nWhat direction is that traffic flowing in?\n\n233\n00:12:20,780 --> 00:12:21,980\nThat's outbound-\n\n234\n00:12:21,980 --> 00:12:23,370\n>> Right\n>> Traffic.\n\n235\n00:12:23,370 --> 00:12:25,770\nThis is not an outbound ACL\n>> Right\n\n236\n00:12:25,770 --> 00:12:28,060\n>> This is an incoming ACL.\n\n237\n00:12:28,060 --> 00:12:32,720\nSo the traffic that we're seeing\nis coming from this network\n\n238\n00:12:32,720 --> 00:12:35,240\nand going\n>> In this interface where it's\n\n239\n00:12:35,240 --> 00:12:36,300\nbeing blocked.\n\n240\n00:12:36,300 --> 00:12:39,540\nSo it doesn't matter that\nthis line is correct for\n\n241\n00:12:39,540 --> 00:12:41,040\nthe type of traffic that we're following.\n\n242\n00:12:41,040 --> 00:12:42,840\nIt's the wrong direction.\n\n243\n00:12:42,840 --> 00:12:46,770\nThis traffic is gonna get blocked and\nthat's the end of it.\n\n244\n00:12:46,770 --> 00:12:49,140\nSo how can I fix this?\n\n245\n00:12:49,140 --> 00:12:51,200\nWell, we can fix it a few different ways.\n\n246\n00:12:51,200 --> 00:12:54,480\nIf we flipped it from\nan incoming to an outgoing ACL.\n\n247\n00:12:54,480 --> 00:12:56,220\nThat would sort of fix it.\n\n248\n00:12:56,220 --> 00:12:58,390\nIt would break the other network,\nthe 192.168.2 network.\n\n249\n00:12:58,390 --> 00:13:02,630\nIt would break it, but\nit would make the other one work.\n\n250\n00:13:02,630 --> 00:13:04,370\nThat's not really acceptable.\n\n251\n00:13:04,370 --> 00:13:08,040\nWhat we really need to do\nis we need to fix the line\n\n252\n00:13:08,040 --> 00:13:10,920\nthat is addressing the 192.168.1 network.\n\n253\n00:13:12,000 --> 00:13:18,794\nThe main problem here is pretty\nstraight forward, because our issue\n\n254\n00:13:18,794 --> 00:13:24,910\nis we've got the host,\nthat's the web server right there.\n\n255\n00:13:24,910 --> 00:13:27,930\nright in the source block.\n\n256\n00:13:27,930 --> 00:13:32,400\nAnd then we've got the one\nnine two one six eight dot\n\n257\n00:13:32,400 --> 00:13:35,190\none network in the destination block.\n\n258\n00:13:35,190 --> 00:13:38,840\nAnd when you have flipped those around,\nwe need to reverse it so\n\n259\n00:13:38,840 --> 00:13:43,237\nthat it says access dash list one oh\none Permit TCP 192.168.1.0.0.0.0.255.\n\n260\n00:13:43,237 --> 00:13:44,840\nHost 192.168.3.200 eq 80.\n\n261\n00:13:44,840 --> 00:13:49,080\nMoving that part to the end\nas the destination.\n\n262\n00:13:51,020 --> 00:13:55,630\nWhen we have our source and our\n\n263\n00:13:57,200 --> 00:14:03,050\ndestination correct,\nthe ACL will work as expected.\n\n264\n00:14:03,050 --> 00:14:06,640\n>> Yeah, now Don this may be a confusing\na little bit to people that haven't\n\n265\n00:14:06,640 --> 00:14:08,290\nbeen working with this awhile.\n\n266\n00:14:08,290 --> 00:14:11,290\nWe talked about this idea, and\nwe know how that now works.\n\n267\n00:14:11,290 --> 00:14:15,530\nBut why is it still denying\nthe traffic coming in, right?\n\n268\n00:14:15,530 --> 00:14:16,790\nIs what we want to get through.\n\n269\n00:14:16,790 --> 00:14:20,600\nSo remember what's happening here,\nright, in the original.\n\n270\n00:14:20,600 --> 00:14:23,920\nWith 192.168.1.0,\ngoing through that 3.200 is getting denied\n\n271\n00:14:23,920 --> 00:14:29,210\nbecause that second one is not applying,\nbecause it doesn't match anything.\n\n272\n00:14:29,210 --> 00:14:33,840\nBut that third line is actually what\nmakes it get denied when going there.\n\n273\n00:14:33,840 --> 00:14:36,690\nSo when you take a look at\nthe whole list again and\n\n274\n00:14:36,690 --> 00:14:39,700\nmake sure you understand that\nthat's the one it's matching.\n\n275\n00:14:39,700 --> 00:14:42,140\nAnd so for us we have got to take\na look at a little bit of syntax.\n\n276\n00:14:42,140 --> 00:14:44,650\nBut you may not know why it\nis actually being denied.\n\n277\n00:14:44,650 --> 00:14:46,880\nSo, remember top to the bottom.\n\n278\n00:14:46,880 --> 00:14:49,100\nWhatever one that matches is the one\nthat it is going to stop on.\n\n279\n00:14:49,100 --> 00:14:52,467\nSo make sure you do your eq on that to.\n\n280\n00:14:52,467 --> 00:14:55,815\nNow Alright, here's another one.\n\n281\n00:14:55,815 --> 00:15:00,925\nOkay this one has that line corrected\n\n282\n00:15:00,925 --> 00:15:05,647\nit's got 192.168.1.0 as the source,\nand it's got 192.168.3.200 eq 80.\n\n283\n00:15:05,647 --> 00:15:11,607\nE as the destination; however,\nit's not working alright.\n\n284\n00:15:11,607 --> 00:15:16,107\nJust like before the 192168.2\n\n285\n00:15:16,107 --> 00:15:21,370\nnetwork It's able to\nget through just fine.\n\n286\n00:15:21,370 --> 00:15:22,040\nOkay.\n\n287\n00:15:22,040 --> 00:15:26,700\nBut just like before the 192.168.0\nnetwork is not getting through the router\n\n288\n00:15:26,700 --> 00:15:29,500\nto get to that web server.\n\n289\n00:15:29,500 --> 00:15:30,180\nOkay.\n\n290\n00:15:30,180 --> 00:15:31,520\nNow we fixed the problem.\n\n291\n00:15:31,520 --> 00:15:32,750\n>> Right.\n>> From the last example.\n\n292\n00:15:32,750 --> 00:15:35,800\nSo now we've got a different\nproblem in place, all right.\n\n293\n00:15:35,800 --> 00:15:39,310\nSo lets take a look and see if we\ncant figure out where our issue is.\n\n294\n00:15:39,310 --> 00:15:42,074\n>> Alright so\nwe kind of use those check marks and\n\n295\n00:15:42,074 --> 00:15:47,239\nthose X's like Don was showing us earlier,\nwe see where the first line matches up and\n\n296\n00:15:47,239 --> 00:15:50,257\nthat looks like its\nactually working just fine.\n\n297\n00:15:50,257 --> 00:15:54,187\nIn that first line where 192\n168 2.0 works just well and\n\n298\n00:15:54,187 --> 00:15:58,565\nthe router doesn't see any problem\nwith it and allows it to go through.\n\n299\n00:15:58,565 --> 00:16:00,840\nWhat about the second one\nhere as we take a look.\n\n300\n00:16:00,840 --> 00:16:03,867\nOkay.\nSo we take a look, 1.0.\n\n301\n00:16:03,867 --> 00:16:07,406\nIt looks like it should go\nthrough all the way there, and\n\n302\n00:16:07,406 --> 00:16:09,830\nthat one looks like it, well, yeah.\n\n303\n00:16:09,830 --> 00:16:11,013\n>> That matches our traffic, right?\n\n304\n00:16:11,013 --> 00:16:14,560\n>> Yeah.\n>> The source is 192.168.1.0, right?\n\n305\n00:16:14,560 --> 00:16:15,610\nWith a proper subnet mask.\n\n306\n00:16:15,610 --> 00:16:16,140\n>> Yeah.\n\n307\n00:16:16,140 --> 00:16:22,380\n>> And our destination is host\n192.168.3.200, where the port equals 80,\n\n308\n00:16:22,380 --> 00:16:27,000\nthat's our traffic, but it's not matching\nand instead we're getting this deny.\n\n309\n00:16:27,000 --> 00:16:29,800\nAll right so what is going on here?\n\n310\n00:16:29,800 --> 00:16:34,830\nWell, if the ACL looks right,\nthen it probably is and\n\n311\n00:16:34,830 --> 00:16:40,370\nso we need to focus on other things\nlike where the ACL is attached.\n\n312\n00:16:40,370 --> 00:16:46,470\nIn all of the previous examples\nthe ACL was an incoming ACL but\n\n313\n00:16:46,470 --> 00:16:49,340\nin this one, it's now an outgoing.\n\n314\n00:16:49,340 --> 00:16:51,320\nAnd with an outgoing ACL,\n\n315\n00:16:51,320 --> 00:16:56,950\nit's only going to apply the traffic\ngoing out that interface.\n\n316\n00:16:56,950 --> 00:17:01,970\nAnd the only thing going out,\nFa0/0 would be traffic that originates\n\n317\n00:17:01,970 --> 00:17:05,580\nfrom right here, 192.168.3, all right?\n\n318\n00:17:05,580 --> 00:17:08,820\nAnd since that traffic\nis originating here and\n\n319\n00:17:08,820 --> 00:17:12,980\ncoming out with a different source\nthese lines aren't going to match.\n\n320\n00:17:12,980 --> 00:17:16,500\nAnd, in fact, things are really going to\nbe broken because this guy right here\n\n321\n00:17:16,500 --> 00:17:18,120\nis going to deny anything else.\n\n322\n00:17:18,120 --> 00:17:20,900\nSo this network is not going to\nbe able to communicate at all.\n\n323\n00:17:20,900 --> 00:17:26,240\nIn this scenario, neither of these\nnetworks should be able to get through.\n\n324\n00:17:26,240 --> 00:17:30,540\nThey both should be getting blocked,\nbecause of the way that ACL is written.\n\n325\n00:17:31,610 --> 00:17:37,550\nSo we need to fix it, and if we actually\ndid need it to be an outgoing ACL,\n\n326\n00:17:37,550 --> 00:17:41,480\nwe could rewrite this basically flipping\nthe source and the destinations.\n\n327\n00:17:41,480 --> 00:17:45,240\nBut the easier solution would\nbe to knock this line out and\n\n328\n00:17:45,240 --> 00:17:48,998\nplace it within IP access\ndash group 101 in.\n\n329\n00:17:48,998 --> 00:17:53,680\nAll right, now let me give you guys\na word of caution on the exam.\n\n330\n00:17:53,680 --> 00:17:57,995\nOkay, let's say that we already\nhad that access list in place and\n\n331\n00:17:57,995 --> 00:18:00,431\nlet me show you guys on a real router.\n\n332\n00:18:00,431 --> 00:18:04,263\nLet me get reconnected to this one and\nI'll show you what happens.\n\n333\n00:18:04,263 --> 00:18:05,493\nSo.\n\n334\n00:18:10,695 --> 00:18:11,710\nHere we go.\n\n335\n00:18:11,710 --> 00:18:16,270\nSo notice on this router,\nI've got IP access group 2 in,\n\n336\n00:18:16,270 --> 00:18:19,250\non this gigabyte interface, all right?\n\n337\n00:18:19,250 --> 00:18:23,660\nIf I get into my configuration and I get\ninto that gigabyte interface and I say,\n\n338\n00:18:23,660 --> 00:18:25,730\nI don't want it to be incoming,\nI want it to be outgoing so\n\n339\n00:18:25,730 --> 00:18:30,730\nI say ip access-group 2 out.\n\n340\n00:18:30,730 --> 00:18:31,510\nOkay?\n\n341\n00:18:31,510 --> 00:18:34,340\nSo I ran basically that same\nline except changing in to out.\n\n342\n00:18:36,980 --> 00:18:38,370\nLook what happened.\n\n343\n00:18:38,370 --> 00:18:41,105\n>> Oh, yeah.\n>> Now the same ACLs applied in\n\n344\n00:18:41,105 --> 00:18:43,305\nboth directions, okay.\n\n345\n00:18:43,305 --> 00:18:47,585\nIf you're changing one ACL for another,\nand they're in the same direction,\n\n346\n00:18:47,585 --> 00:18:50,205\nyou can just run the new command and\noverride the old one.\n\n347\n00:18:50,205 --> 00:18:54,230\nBut if you're trying to change\nthe direction of the same ACL,\n\n348\n00:18:54,230 --> 00:18:56,490\nyou do have to remove the first one first.\n\n349\n00:18:58,640 --> 00:19:03,210\nSo I'm going to remove that out or\nin, or remove\n\n350\n00:19:03,210 --> 00:19:07,350\nthem all I don't know whatever and then\nissue out the one that you want to keep.\n\n351\n00:19:07,350 --> 00:19:14,790\nAnd so if I want to keep 2,\nwhich ones do I wanna keep?\n\n352\n00:19:14,790 --> 00:19:18,980\nThen I wanna put that one in, but I do\nneed to use the no command, a modifier,\n\n353\n00:19:18,980 --> 00:19:20,230\nto remove the old one.\n\n354\n00:19:20,230 --> 00:19:21,570\nSo be careful with that.\n\n355\n00:19:21,570 --> 00:19:25,218\nIf we wanted to fix this,\nit's not just going into the interface and\n\n356\n00:19:25,218 --> 00:19:27,074\nsaying IP access group 101 in,\n\n357\n00:19:27,074 --> 00:19:31,248\nwe would have to also say no IP\naccess-group 101 out to remove that entry.\n\n358\n00:19:34,831 --> 00:19:39,655\nAll right, here's another one, and\non this one we've fixed that problem from\n\n359\n00:19:39,655 --> 00:19:44,260\nthe last example so you'll see\nright there IP access group 101 in.\n\n360\n00:19:44,260 --> 00:19:46,980\nSo it is now an incoming ACL and\n\n361\n00:19:46,980 --> 00:19:50,910\nwe're still having problems\nwith our web server here right?\n\n362\n00:19:50,910 --> 00:19:55,030\nThe 192.168.2 network,\nit is able to get trough just fine.\n\n363\n00:19:55,030 --> 00:19:59,570\nSo it's able to get through and\naccess that network.\n\n364\n00:19:59,570 --> 00:20:03,022\nAll right, but the 192.168.1.0 network,\nIs getting over here and\n\n365\n00:20:03,022 --> 00:20:05,620\ngetting stopped so\nit's got a problem, all right?\n\n366\n00:20:05,620 --> 00:20:09,030\nSo again, let's walk through the ACL and\nsee if we can spot this problem.\n\n367\n00:20:11,230 --> 00:20:16,376\nSo first off, if we look at our ACL,\nthe first line, access list 101 permit IP\n\n368\n00:20:16,376 --> 00:20:22,470\n192.168.2.0 With\na 0.0.0.255 wild card mask.\n\n369\n00:20:22,470 --> 00:20:27,320\nSo that's anybody who starts with\n192.168.2 going to anybody with no\n\n370\n00:20:27,320 --> 00:20:29,090\nprotocol specified.\n\n371\n00:20:29,090 --> 00:20:32,956\nSo any IP traffic is going to be allowed\nand I know the access listed in incoming\n\n372\n00:20:32,956 --> 00:20:36,420\nACL so it's being applied as\nwe're going into that interface.\n\n373\n00:20:36,420 --> 00:20:41,399\nGreat, okay,\nall right what about 192.168.1 traffic,\n\n374\n00:20:41,399 --> 00:20:46,637\nwell it doesn't match the first line but\nit does match the second line,\n\n375\n00:20:46,637 --> 00:20:51,705\naccess list 101 permit tcp\ntraffic from 192.168.1.0\n\n376\n00:20:51,705 --> 00:20:55,576\nwith a 0.0.0.255 wild card mass, right?\n\n377\n00:20:55,576 --> 00:20:58,483\nWhere the source port equals 80 and\n\n378\n00:20:58,483 --> 00:21:03,396\nthen the destination\nhost is 192.168.3.200.\n\n379\n00:21:03,396 --> 00:21:04,050\nAll right.\n\n380\n00:21:04,050 --> 00:21:05,008\nWhat's my problem here?\n\n381\n00:21:05,008 --> 00:21:09,700\nI know Ronnie just thought of it,\nis that eq 80?\n\n382\n00:21:09,700 --> 00:21:14,570\nWeb traffic is on port 80 but\nwhen you're going from a client\n\n383\n00:21:14,570 --> 00:21:19,040\nto a server, the destination port is 80.\n\n384\n00:21:19,040 --> 00:21:21,080\nThe source port is who knows what, right.\n\n385\n00:21:21,080 --> 00:21:24,200\nYour source ports are dynamically\ngenerated, all right.\n\n386\n00:21:24,200 --> 00:21:27,660\nSo, for example,\nlet's go back to my computer here.\n\n387\n00:21:27,660 --> 00:21:30,670\nIf I were to go to a web browser and\n\n388\n00:21:30,670 --> 00:21:35,550\ngo to cnn.com, right, so\nI'm going to the CNN web\n\n389\n00:21:35,550 --> 00:21:39,997\npage which loads an astronomical amount\nof advertisements, look at all that.\n\n390\n00:21:39,997 --> 00:21:42,390\n>> [LAUGH]\n>> Wow, this is pretty impressive,\n\n391\n00:21:42,390 --> 00:21:46,870\nlike maybe 30% of this page\nis not an advertisement.\n\n392\n00:21:46,870 --> 00:21:53,518\nAnyhow, so I just pulled CNN,\nand if I do an ns lookup for\n\n393\n00:21:53,518 --> 00:21:58,051\ncnn.com and I'll do a netstat-an.\n\n394\n00:21:58,051 --> 00:22:01,042\nSo CNN was 157 166 something and\n\n395\n00:22:01,042 --> 00:22:06,479\nI should have typed that into something\nto make that a little easier.\n\n396\n00:22:12,274 --> 00:22:14,492\nThere we go, so what did I say?\n\n397\n00:22:14,492 --> 00:22:17,905\nThey were 157.166.\n\n398\n00:22:23,626 --> 00:22:25,745\nThere they are.\n\n399\n00:22:25,745 --> 00:22:26,880\nOkay.\n\n400\n00:22:26,880 --> 00:22:30,610\nSo here's the connections that\nmy laptop just made to CNN.\n\n401\n00:22:32,200 --> 00:22:38,588\nAnd so I can see my laptop,\n10.1.230.26 and CNN 157.166.\n\n402\n00:22:38,588 --> 00:22:43,317\nwhatever and\nsee how the destination port is port 80.\n\n403\n00:22:43,317 --> 00:22:48,756\nI'm going to their web server but\nmy source port 12766,\n\n404\n00:22:48,756 --> 00:22:54,621\n12767, 768,769 these\nare dynamically generated.\n\n405\n00:22:54,621 --> 00:22:58,131\nEvery time I open a connection to\na website it moves that port number up and\n\n406\n00:22:58,131 --> 00:22:58,822\nyou'll see,\n\n407\n00:22:58,822 --> 00:23:03,220\nI'm sure all these other ones are the adds\nrendered from 80 different servers.\n\n408\n00:23:03,220 --> 00:23:06,300\nAnd you'll see how it just keeps\nclimbing that source port is climbing.\n\n409\n00:23:06,300 --> 00:23:08,760\nit climbs all the way to 65,535 and\n\n410\n00:23:08,760 --> 00:23:14,060\nthen it starts over again until it's back\nto the beginning and continues to climb.\n\n411\n00:23:14,060 --> 00:23:19,040\nSo, its very rare that you can do\nany filtering based in a sort report\n\n412\n00:23:19,040 --> 00:23:24,530\nlike this and that's exactly what's\ngoing on in this demonstration,\n\n413\n00:23:24,530 --> 00:23:27,560\nis that we've got a client right here, and\n\n414\n00:23:27,560 --> 00:23:31,550\nwe're filtering on their source port\ninstead of the server's destination port.\n\n415\n00:23:31,550 --> 00:23:33,550\nAnd the server's destination\nport is predictable.\n\n416\n00:23:33,550 --> 00:23:36,850\n>> And\nthat's the one we need to actually key on.\n\n417\n00:23:36,850 --> 00:23:41,220\nThat EQ80 should follow behind\nthe host and the IP address there,\n\n418\n00:23:41,220 --> 00:23:43,440\ninstead of where it is right here.\n\n419\n00:23:43,440 --> 00:23:46,770\n>> So our traffic doesn't\nactually match this line.\n\n420\n00:23:46,770 --> 00:23:50,220\nIt matches based on the IP,\nbut it doesn't match\n\n421\n00:23:50,220 --> 00:23:52,650\nbased on the protocol right here\n>> Yeah.\n\n422\n00:23:52,650 --> 00:23:56,238\n>> And so that line doesn't match so\nwe move on to the next line.\n\n423\n00:23:56,238 --> 00:23:57,515\n>> And that one will match.\n\n424\n00:23:57,515 --> 00:23:59,720\n>> And there we're denied, right?\n\n425\n00:23:59,720 --> 00:24:04,583\nSo our solution here Is to\nbasically take that eq 80 and\n\n426\n00:24:04,583 --> 00:24:08,000\njust move it to the end of the line.\n\n427\n00:24:08,000 --> 00:24:12,265\nYou know move it and now it's right that's\na destination port not a social port.\n\n428\n00:24:12,265 --> 00:24:16,010\nAll right, was that the last one?\n\n429\n00:24:16,010 --> 00:24:17,030\n>> That I do not know.\n\n430\n00:24:17,030 --> 00:24:17,850\n>> I got two more.\n\n431\n00:24:17,850 --> 00:24:20,020\nHere's another one.\n\n432\n00:24:20,020 --> 00:24:22,910\nLet's see what's our problem here?\n\n433\n00:24:22,910 --> 00:24:25,260\nIt's still the whole web server\nthing cuz that's always fun.\n\n434\n00:24:29,740 --> 00:24:33,642\nOkay, so very similar problem on this one,\n\n435\n00:24:33,642 --> 00:24:37,438\nI had no idea what the problem is myself,\nso\n\n436\n00:24:37,438 --> 00:24:42,606\nvery similar problem in\nthat 192.168.2.0 can\n\n437\n00:24:42,606 --> 00:24:47,684\nget over versus 192.168.1.0 which cannot.\n\n438\n00:24:47,684 --> 00:24:48,230\nOkay?\n\n439\n00:24:48,230 --> 00:24:52,160\nSo let's go through and look and\nsee if we can't find our problem.\n\n440\n00:24:53,180 --> 00:24:56,190\nI like to just cuz it's quick and\neasy look at direction first.\n\n441\n00:24:56,190 --> 00:24:56,740\nRight?\n\n442\n00:24:56,740 --> 00:25:01,570\nSo this traffic is coming in the FA00\ninterface and if I look up here,\n\n443\n00:25:01,570 --> 00:25:06,370\nI can see that it's 101 in on fa0/0 so\n\n444\n00:25:06,370 --> 00:25:10,979\nthat's good and\nthen we can start going down our lines.\n\n445\n00:25:10,979 --> 00:25:17,808\n192.168.2.0, that's right here and\nit's making it over just fine, right.\n\n446\n00:25:17,808 --> 00:25:21,197\nAnd then 192.168.1.0, right?\n\n447\n00:25:21,197 --> 00:25:27,266\nAs I look, well I've got permit tcp\n192.168.1.0, 0.0.0.255 going to\n\n448\n00:25:27,266 --> 00:25:32,920\nthat web server on port 80 that looks\nlike we have a match, doesn't it Ronnie?\n\n449\n00:25:32,920 --> 00:25:33,540\n>> Sure does.\n\n450\n00:25:33,540 --> 00:25:35,850\n>> Do you spot the problem?\n\n451\n00:25:35,850 --> 00:25:36,760\n>> No not yet.\n\n452\n00:25:36,760 --> 00:25:37,390\n>> Okay.\n\n453\n00:25:37,390 --> 00:25:41,200\nSo, I spotted the problem, but\nthat's because I wrote it.\n\n454\n00:25:41,200 --> 00:25:42,530\n>> Yeah.\n>> [LAUGH] When you're the one\n\n455\n00:25:42,530 --> 00:25:44,270\nwho writes the problem, it's easier.\n\n456\n00:25:44,270 --> 00:25:47,010\n>> No, I did, I did finally see it here.\n\n457\n00:25:47,010 --> 00:25:50,430\nSo, a lot of times, because of\nthe way that we are used to, just,\n\n458\n00:25:50,430 --> 00:25:56,220\ntaking a look at the wild card mass,\nand focusing on that portion of it,\n\n459\n00:25:56,220 --> 00:25:59,690\nwe don't tend to look at\nthe first part of the address.\n\n460\n00:25:59,690 --> 00:26:00,790\nSo the longer I looked at it,\n\n461\n00:26:00,790 --> 00:26:05,370\nthe more that I realized here,\nit's not even the correct IP address.\n\n462\n00:26:05,370 --> 00:26:06,370\n>> That's the thing.\n\n463\n00:26:06,370 --> 00:26:11,649\n>> yeah. [LAUGH] >> So if we zoom in a bit\non this, and we take a look at that second\n\n464\n00:26:11,649 --> 00:26:19,120\nline, access-list 101 permit tcp\n191.168.1.0 that one number.\n\n465\n00:26:19,120 --> 00:26:23,610\nWe get so used to glancing across these\nvery quickly, and it's used the wild card\n\n466\n00:26:23,610 --> 00:26:26,860\nmask as your guide,\nnobody thinks about the first octet.\n\n467\n00:26:26,860 --> 00:26:30,000\nSo we're looking at 168\ndot one dot zero whatever.\n\n468\n00:26:30,000 --> 00:26:33,060\nIt's easy to overlook something like this.\n\n469\n00:26:33,060 --> 00:26:35,980\nNow, this could be intentional or\nit could be a typo.\n\n470\n00:26:35,980 --> 00:26:40,050\nIn real life it would be a typo,\non the exam it was probably intentional.\n\n471\n00:26:40,050 --> 00:26:44,470\nDefinitely double check that stuff,\nlook In this case because\n\n472\n00:26:44,470 --> 00:26:49,330\nwe've got that 192.168.1 right there,\nthat's not going to match,\n\n473\n00:26:49,330 --> 00:26:52,620\nthere is no, if we look at these\nguys none of them are 192.168.1.\n\n474\n00:26:52,620 --> 00:26:57,365\n>> Nope.\n>> See I screwed up there.\n\n475\n00:26:57,365 --> 00:26:59,860\n191.168.1, See, I can't even say it wrong.\n\n476\n00:26:59,860 --> 00:27:04,870\nThat it's so easy to overlook that and\non these end, they will pick standard IP\n\n477\n00:27:04,870 --> 00:27:08,230\nranges that you're used to using,\nso it is easy to overlook.\n\n478\n00:27:08,230 --> 00:27:09,520\nJust slow down.\n\n479\n00:27:09,520 --> 00:27:13,010\nIf you redo it and you don't see\nthe problem, look for things like that.\n\n480\n00:27:13,010 --> 00:27:13,610\n>> Typos.\n\n481\n00:27:13,610 --> 00:27:15,250\n>> The fix here is really simple.\n\n482\n00:27:15,250 --> 00:27:18,890\nWe need to update that line\nto say 192 instead of 191.\n\n483\n00:27:18,890 --> 00:27:24,230\nYou know I've been an authorized\nCisco instructor for many years and\n\n484\n00:27:24,230 --> 00:27:30,215\nin the classes that I teach like that it's\nvery common I see students that you know\n\n485\n00:27:30,215 --> 00:27:34,570\n192.186 that's probably the most popular\none, where they transpose those numbers.\n\n486\n00:27:34,570 --> 00:27:38,060\nAnd then as you read over it\nquickly you don't even notice.\n\n487\n00:27:38,060 --> 00:27:42,410\nAs an instructor I sometimes have a hard\ntime spotting it just because our minds\n\n488\n00:27:42,410 --> 00:27:45,320\nget set and you don't even see it.\n\n489\n00:27:45,320 --> 00:27:50,121\nSo that's a neat one there just\none that we want to be aware of.\n\n490\n00:27:50,121 --> 00:27:54,891\nAll right, the last one this\none's a little more complex.\n\n491\n00:27:54,891 --> 00:27:57,317\nThe access list is a bit bigger and\n\n492\n00:27:57,317 --> 00:28:02,183\nwhat we're dealing with here is\na different problem, all right?\n\n493\n00:28:02,183 --> 00:28:08,615\nOn router B, on the 192.168.3 network\nthere is a TFTP server, all right?\n\n494\n00:28:08,615 --> 00:28:12,902\nThe TFTP server is at 192.168.3.200, so\n\n495\n00:28:12,902 --> 00:28:18,204\nyou say my P is the rest of the examples,\nexcept this time it's TFTP.\n\n496\n00:28:18,204 --> 00:28:19,504\nOkay?\n\n497\n00:28:19,504 --> 00:28:24,527\nAnd what I'm bumping\ninto is that just like in\n\n498\n00:28:24,527 --> 00:28:29,815\nthe other examples, 192.168.2.0\n\n499\n00:28:29,815 --> 00:28:34,835\ncan get through to the TFTT\nserver no sweat but\n\n500\n00:28:34,835 --> 00:28:41,630\n192.168.1.0 not making\nit through the router.\n\n501\n00:28:41,630 --> 00:28:44,230\nJust like in the other examples,\nnothing new there.\n\n502\n00:28:44,230 --> 00:28:47,630\nThe only thing that's really\nnew is the different protocol.\n\n503\n00:28:47,630 --> 00:28:52,580\nThat it is a TFTP server\non that destination, okay.\n\n504\n00:28:52,580 --> 00:28:56,170\nSo let's see if we can't figure\nout what the heck is going on.\n\n505\n00:28:56,170 --> 00:28:59,390\n>> So we start off with the direction and\nthe same thing, notice know we've switched\n\n506\n00:28:59,390 --> 00:29:06,100\nthe interface here to 0.1 and\nit is doing an outbound filter flush.\n\n507\n00:29:06,100 --> 00:29:10,580\nSo as we take a look everything is good\nthere, so we can't really count on that\n\n508\n00:29:10,580 --> 00:29:15,110\nas being our issue at this point because\nit is in the proper direction, okay.\n\n509\n00:29:15,110 --> 00:29:18,820\n>> Yeah so the traffic is actually being\nfiltered on the way out of the router,\n\n510\n00:29:18,820 --> 00:29:20,500\nnot on the way in.\n\n511\n00:29:20,500 --> 00:29:24,080\nAnd if we compare that to the other\nnetwork examples that might be a mistake\n\n512\n00:29:24,080 --> 00:29:27,190\nbut here,\nthe access list is written properly for\n\n513\n00:29:27,190 --> 00:29:30,240\npassing out that interface so that's fine.\n\n514\n00:29:30,240 --> 00:29:32,880\n>> Now at this point we need to\ntake a look at our protocols,\n\n515\n00:29:32,880 --> 00:29:35,070\nbecause we were already\ntricked one time on that.\n\n516\n00:29:35,070 --> 00:29:38,760\nSo the good thing is we can tell that's\nit's not attached to a source port number\n\n517\n00:29:38,760 --> 00:29:44,540\nbut we do see that specifically again,\neliminating at port 80, port 23.\n\n518\n00:29:44,540 --> 00:29:47,430\nSo we have HTTP and Telnet.\n\n519\n00:29:47,430 --> 00:29:52,549\nPort 69,\nthat is the actual correct port for TFTP.\n\n520\n00:29:52,549 --> 00:29:53,830\nYep.\n>> But\n\n521\n00:29:53,830 --> 00:29:55,360\n>> There is something different about TFTP\n\n522\n00:29:55,360 --> 00:29:56,860\nhere on this one.\n\n523\n00:29:56,860 --> 00:30:00,990\nNow this one can be very easy to overlook\nand very challenging, especially since\n\n524\n00:30:00,990 --> 00:30:04,640\nTFTP is something that a lot of us\nmight not work with on a regular basis.\n\n525\n00:30:05,740 --> 00:30:09,620\nOn Cisco routers and\nswitches we generally use TFTP for\n\n526\n00:30:09,620 --> 00:30:14,860\nbacking up configurations, updating the\nIOS, moving to a new version, and so on.\n\n527\n00:30:14,860 --> 00:30:18,330\nSo it is a common protocol\nused in Cisco networks.\n\n528\n00:30:18,330 --> 00:30:23,288\nIt does run on port 69 just like\nthis line here reflects, all right.\n\n529\n00:30:23,288 --> 00:30:28,275\nBut it's UDP port 69, now if we look at\n\n530\n00:30:28,275 --> 00:30:33,860\nthe line it has permit tcp port 69,\n>> Mm-hm.\n\n531\n00:30:33,860 --> 00:30:35,790\n>> is not going to match our udp traffic.\n\n532\n00:30:35,790 --> 00:30:36,420\n>> Right.\n\n533\n00:30:36,420 --> 00:30:39,650\n>> All right\n>> Now, why is 192.160.2.0 able to get\n\n534\n00:30:39,650 --> 00:30:41,360\nthere?\n\n535\n00:30:41,360 --> 00:30:46,430\nWell, they've got this permit any\nstatement up top and its permit IP.\n\n536\n00:30:46,430 --> 00:30:49,030\nSo it's any TCP and UDP, right?\n\n537\n00:30:49,030 --> 00:30:52,560\nIt's all of the IP stack\nthat is permitting through\n\n538\n00:30:52,560 --> 00:30:56,560\nversus us down here where it's just TCP.\n\n539\n00:30:56,560 --> 00:31:05,130\nAnd it's TCP on port 69 but that doesn't\nhelp us because that's not what TFTP uses.\n\n540\n00:31:05,130 --> 00:31:06,340\n>> TFTP is on UDP.\n\n541\n00:31:06,340 --> 00:31:07,330\n>> Yeah.\n\n542\n00:31:07,330 --> 00:31:09,540\n>> So that's where we have the issue here.\n\n543\n00:31:09,540 --> 00:31:13,700\n>> So the fix for this one would be to\nchange that little spot right there.\n\n544\n00:31:13,700 --> 00:31:18,830\nWhere it says TCP, to change that\nto say UDP, and this would work.\n\n545\n00:31:18,830 --> 00:31:22,140\nThe moral of this story is you need\nto be familiar with your protocols.\n\n546\n00:31:22,140 --> 00:31:22,735\nRight?\nAnd\n\n547\n00:31:22,735 --> 00:31:24,840\nthere's a lot that can\nturn up on the exam.\n\n548\n00:31:24,840 --> 00:31:29,484\nThere's a, hang on a second here,\nthere we go.\n\n549\n00:31:29,484 --> 00:31:35,673\nSo there's FTP SSH regular\n\n550\n00:31:35,673 --> 00:31:42,138\nold HTTP HTTPS Telnet TFTP.\n\n551\n00:31:42,138 --> 00:31:43,377\nWho else?\nWhat are some other ones\n\n552\n00:31:43,377 --> 00:31:44,390\nthat might pop up?\n\n553\n00:31:44,390 --> 00:31:45,320\nPOP3 IMAP4.\n\n554\n00:31:46,810 --> 00:31:48,140\n>> SMTP.\n>> SMTP.\n\n555\n00:31:48,140 --> 00:31:52,400\nSo those are some common protocols that\nvery well may turn up on the exam.\n\n556\n00:31:52,400 --> 00:31:55,776\nAnd so we do some good coverage\nof those in the CCENT show, so\n\n557\n00:31:55,776 --> 00:31:57,540\nyou should already know them.\n\n558\n00:31:57,540 --> 00:32:01,257\nBut if you're a little rusty on them jump\non over to the protocols episode of CCENT\n\n559\n00:32:01,257 --> 00:32:04,334\nand you'll get a chance to see all\nthe ones that show up on the exam.\n\n560\n00:32:04,334 --> 00:32:07,791\nWhen it comes to writing ACLs, Cisco's\nnot gonna throw crazy stuff in there\n\n561\n00:32:07,791 --> 00:32:10,960\nlike H.323 video conferencing or\nsomething like that.\n\n562\n00:32:10,960 --> 00:32:14,275\nThey'll keep it to the common protocols,\nones that you should know by heart.\n\n563\n00:32:16,470 --> 00:32:17,434\nAll right, well, Ronnie.\n\n564\n00:32:17,434 --> 00:32:20,854\nI got flapping my gums there and\ndidn't pay attention to the clock,\n\n565\n00:32:20,854 --> 00:32:21,820\nwhich is expired.\n\n566\n00:32:21,820 --> 00:32:24,850\nSo, let's do this,\nlet's stop and take a break.\n\n567\n00:32:24,850 --> 00:32:26,170\nWhen we get back,\n\n568\n00:32:26,170 --> 00:32:30,690\nwe're gonna talk a little bit more about\nhow we can fix ACLs and cover named ACLs.\n\n569\n00:32:30,690 --> 00:32:31,920\nIt's really important.\n\n570\n00:32:31,920 --> 00:32:35,340\nWe'll tackle those and\ncontinue on from there.\n\n571\n00:32:35,340 --> 00:32:38,417\nStay tuned, when we get back,\nmore ACL action after this.\n\n572\n00:32:38,417 --> 00:32:42,298\n[SOUND] All right,\n\n573\n00:32:42,298 --> 00:32:47,999\nwelcome back everybody.\n\n574\n00:32:47,999 --> 00:32:51,965\nSo in the last segment we took a look\nat just some of the different problems\n\n575\n00:32:51,965 --> 00:32:53,525\nthat can happen with ACLs and\n\n576\n00:32:53,525 --> 00:32:56,855\nthe different things we have to\nworry about as we write them.\n\n577\n00:32:56,855 --> 00:32:59,945\nThe problems that we can create, and\n\n578\n00:32:59,945 --> 00:33:03,825\nwhat we're gonna do now is we're gonna\ntake a look at a different type of ACL.\n\n579\n00:33:03,825 --> 00:33:06,335\nOne that I mentioned in the last\nepisode but we didn't actually use,\n\n580\n00:33:06,335 --> 00:33:09,885\nwhich is called a named ACL, all right?\n\n581\n00:33:09,885 --> 00:33:12,005\nNamed ACLs came about for two reasons.\n\n582\n00:33:12,005 --> 00:33:16,515\nThe first reason was because\npeople wanted more ACL numbers and\n\n583\n00:33:16,515 --> 00:33:18,650\nan easier way to tell ACLs apart.\n\n584\n00:33:18,650 --> 00:33:23,630\nBut the second reason was editing ACL's is\na bit of a pain in the butt, alright and\n\n585\n00:33:23,630 --> 00:33:25,010\nlet me show you what I mean.\n\n586\n00:33:25,010 --> 00:33:27,770\nIf we take an access list\nlet me ring this router up.\n\n587\n00:33:29,160 --> 00:33:35,140\nAlright and let's take like this ACL,\nthis one right here right.\n\n588\n00:33:35,140 --> 00:33:37,820\nSo this ACL we wrote in another episode or\n\n589\n00:33:37,820 --> 00:33:43,020\nwhatever and I decide that I want\nto change things up a little bit.\n\n590\n00:33:43,020 --> 00:33:45,580\nI want to rearrange some of the lines.\n\n591\n00:33:46,610 --> 00:33:53,980\nWell, in a normal ACL, you don't have\na good way to rearrange the lines.\n\n592\n00:33:53,980 --> 00:33:56,290\nSo, if I write an access list incorrectly.\n\n593\n00:33:56,290 --> 00:33:59,938\nIf I do access-list 5 permit,\n\n594\n00:33:59,938 --> 00:34:04,820\nhost, actually, I'll do one wrong.\n\n595\n00:34:04,820 --> 00:34:09,245\nSo I'm gonna permit 192.168.0.0.0.\n\n596\n00:34:11,430 --> 00:34:15,239\nAnd then I'm gonna deny\n\n597\n00:34:15,239 --> 00:34:22,676\n192.168.0.10.75, right.\n\n598\n00:34:22,676 --> 00:34:23,394\nAnd.\n\n599\n00:34:23,394 --> 00:34:25,427\nWhat did I do?\n\n600\n00:34:25,427 --> 00:34:30,780\nCant' be configured at higher\nsequence numbers as part,\n\n601\n00:34:30,780 --> 00:34:36,120\noh, it's actually stopping me from making\nthe mistake that I'm trying to make.\n\n602\n00:34:36,120 --> 00:34:37,800\nWell let me run with this.\n\n603\n00:34:37,800 --> 00:34:42,399\nOkay, so I have this access list,\naccess-list five.\n\n604\n00:34:42,399 --> 00:34:45,792\nAnd actually let me add a little\nmore to it, just to have it.\n\n605\n00:34:51,830 --> 00:34:55,060\nSo I'm just gonna add just\na little more to this ACL, there.\n\n606\n00:34:55,060 --> 00:35:02,030\nAll right so\nlet's take a look at this one.\n\n607\n00:35:02,030 --> 00:35:06,240\nThe way it's written right now,\nI'm permitting these three networks.\n\n608\n00:35:06,240 --> 00:35:11,230\nNow say I changed my mind and\nI want to deny a particular host.\n\n609\n00:35:11,230 --> 00:35:14,370\nI've got a machine that got a virus.\n\n610\n00:35:14,370 --> 00:35:15,280\nIt's 192.168.0.\n\n611\n00:35:15,280 --> 00:35:17,810\n>> 50 all right, and I want to deny.\n\n612\n00:35:17,810 --> 00:35:21,420\nWell my problem is if I\nget back into config and\n\n613\n00:35:21,420 --> 00:35:27,130\nI do an access list five deny\nhost 192.168.0.50, right?\n\n614\n00:35:28,320 --> 00:35:32,435\nIt's gonna try and\nstick that on the end of the list.\n\n615\n00:35:32,435 --> 00:35:36,515\nWell, that's not gonna work because\nI've got this guy at the very\n\n616\n00:35:36,515 --> 00:35:39,705\ntop that's also going to match and\nso this line is bad and\n\n617\n00:35:39,705 --> 00:35:43,135\nit's actually detecting that and\nstopping me from making the mistake.\n\n618\n00:35:43,135 --> 00:35:43,865\nRight.\n\n619\n00:35:43,865 --> 00:35:47,235\nOlder routers wouldn't stop you,\nthey'd let you make the mistake gladly and\n\n620\n00:35:47,235 --> 00:35:48,355\nit just wouldn't work.\n\n621\n00:35:48,355 --> 00:35:53,560\nAlright, so if I wanted to rearrange\nthe way that we used to do it\n\n622\n00:35:53,560 --> 00:35:58,590\nwas we would copy the existing ACL,\nand then we would write\n\n623\n00:35:58,590 --> 00:36:03,270\na little script file, not really a script\nso much as just a series of commands.\n\n624\n00:36:03,270 --> 00:36:08,800\nAnd so I would say,\nno access-list 5 to delete it and\n\n625\n00:36:08,800 --> 00:36:12,540\nthen here in notepad I can\nwrite in whatever order I want.\n\n626\n00:36:12,540 --> 00:36:16,180\nAnd so I can insert a line right\nhere in the very beginning,\n\n627\n00:36:17,530 --> 00:36:21,590\ndenying that one host, alright.\n\n628\n00:36:21,590 --> 00:36:28,580\nAnd then I can just copy that, go back to\nmy router, get in config and paste it in.\n\n629\n00:36:28,580 --> 00:36:33,240\nAnd it deletes the ACL and\nthen rewrites it the way that I want it.\n\n630\n00:36:33,240 --> 00:36:33,820\nAll right?\n\n631\n00:36:33,820 --> 00:36:37,310\nNow that's effective,\nit works.There's two problems.\n\n632\n00:36:37,310 --> 00:36:40,170\nProblem number one,\nI gotta use another software package.\n\n633\n00:36:40,170 --> 00:36:41,540\nI gotta use Notepad or something.\n\n634\n00:36:41,540 --> 00:36:42,480\nAll right?\n\n635\n00:36:42,480 --> 00:36:45,930\nProblem number two, for a brief moment.\n\n636\n00:36:45,930 --> 00:36:50,400\nFor the briefest of moments,\nthere was no ACL on my interface.\n\n637\n00:36:50,400 --> 00:36:54,970\nAnd then, for another brief moment,\nthere was a deny line and\n\n638\n00:36:54,970 --> 00:36:58,880\nthat was it, and so\neverything else was denied.\n\n639\n00:36:58,880 --> 00:37:01,590\nSo for a brief moment,\nI opened the floodgates.\n\n640\n00:37:01,590 --> 00:37:04,680\nAnd then for another brief moment,\nI shut the whole thing down.\n\n641\n00:37:04,680 --> 00:37:08,030\nSo this actually can create\na disruption in the software.\n\n642\n00:37:08,030 --> 00:37:11,230\nIt's very, very brief, but\nit can cause a disruption.\n\n643\n00:37:11,230 --> 00:37:14,960\nSo wouldn't it be better if there\nwas another way to go about this.\n\n644\n00:37:14,960 --> 00:37:17,110\nAnd there There were other complex ways,\n\n645\n00:37:17,110 --> 00:37:21,380\nlike you could write a second ACL and then\ngo to the interface and swap it there.\n\n646\n00:37:21,380 --> 00:37:23,430\nSo, it was an instantaneous thing.\n\n647\n00:37:23,430 --> 00:37:28,030\nBut, even better would be, wouldn't it\nbe nice if we could edit the ACL, right?\n\n648\n00:37:28,030 --> 00:37:29,900\nInsert lines wherever we wanted.\n\n649\n00:37:29,900 --> 00:37:32,760\nWell, with a numbered ACL\nthat wasn't always possible.\n\n650\n00:37:32,760 --> 00:37:36,440\nWith named ACLs it is, all right.\n\n651\n00:37:36,440 --> 00:37:40,170\nSo if I were to redo this whole\nscenario by creating a named ACL,\n\n652\n00:37:40,170 --> 00:37:42,690\nnow the syntax for\na named ACL is different so\n\n653\n00:37:42,690 --> 00:37:47,880\nlet me actually let me\nnot do that full screen.\n\n654\n00:37:47,880 --> 00:37:51,068\nBecause my head's gonna\ncover up part of it so.\n\n655\n00:37:51,068 --> 00:37:57,700\nWe were just making, so I married an axe\nmurderer jokes earlier about big heads.\n\n656\n00:37:57,700 --> 00:37:58,930\n>> Eats.\n\n657\n00:37:58,930 --> 00:38:00,360\n>> Alright there we go.\n\n658\n00:38:00,360 --> 00:38:05,810\nSo if I want to go in and write this ACL,\nI would start by creating the named ACL.\n\n659\n00:38:05,810 --> 00:38:10,900\nYou say ip access dash list and\n\n660\n00:38:10,900 --> 00:38:15,272\nthen a name and so,\nI will call this one my\n\n661\n00:38:15,272 --> 00:38:20,860\ninternal filter.\n\n662\n00:38:20,860 --> 00:38:23,250\nRight?\nOr whatever it is you want to call it so\n\n663\n00:38:23,250 --> 00:38:24,450\nthat you can remember it.\n\n664\n00:38:24,450 --> 00:38:27,900\nNow, because you are giving it a name\nIt doesn't know if it's going to be\n\n665\n00:38:27,900 --> 00:38:32,910\na standard or an extended ACL,\nso when we do this,\n\n666\n00:38:32,910 --> 00:38:34,800\nit's going to be upset with me,\nand that's because.\n\n667\n00:38:34,800 --> 00:38:36,460\nI didn't tell it that is was standard or\n\n668\n00:38:36,460 --> 00:38:40,730\nextended, so I'm gonna do\na standard called internal filter.\n\n669\n00:38:42,510 --> 00:38:45,520\nAnd we run that and\nit takes us to a special prompt,\n\n670\n00:38:45,520 --> 00:38:50,880\nsaying I am now configuring\na standard named ACL and\n\n671\n00:38:50,880 --> 00:38:54,752\nfrom here I can just say permit\n\n672\n00:38:54,752 --> 00:38:59,699\n192.168.10.0 and\n\n673\n00:38:59,699 --> 00:39:06,040\n20 and 30, like we did before, right.\n\n674\n00:39:06,040 --> 00:39:10,180\nAnd if I stop right here, oh let me just,\n\n675\n00:39:10,180 --> 00:39:13,400\nI'll get out of it, there and\nI do a show access dash list,\n\n676\n00:39:15,560 --> 00:39:20,180\nI can see the ACL that I just wrote\nright here, here's my internal filter.\n\n677\n00:39:20,180 --> 00:39:21,090\nOkay?\n\n678\n00:39:21,090 --> 00:39:23,340\nAnd ten, 20, and 30 right there.\n\n679\n00:39:23,340 --> 00:39:27,610\nWell, I wanna be able to add\nsomething to the beginning.\n\n680\n00:39:27,610 --> 00:39:29,120\nI want to deny 10.50.\n\n681\n00:39:29,120 --> 00:39:32,540\nWell, see these line number right here?\n\n682\n00:39:32,540 --> 00:39:34,540\nLine ten, line 20, line 30.\n\n683\n00:39:34,540 --> 00:39:39,345\nAs we wrote the ACL they added\nsequence numbers to the line and so\n\n684\n00:39:39,345 --> 00:39:44,069\nnow I can go back and I can insert\nsomething before if I want to.\n\n685\n00:39:44,069 --> 00:39:50,749\nI can say, IP access dash list\nstandard internal filter and\n\n686\n00:39:50,749 --> 00:39:57,304\neven if I say five deny 192 68.10.50,\nright?\n\n687\n00:39:57,304 --> 00:40:01,084\nThat's gonna insert it\nbefore the other lines.\n\n688\n00:40:07,353 --> 00:40:09,788\nSo when I look,\nnow I've got a line five and\n\n689\n00:40:09,788 --> 00:40:13,240\nI was able to insert something\nbefore the other lines.\n\n690\n00:40:13,240 --> 00:40:16,450\nThose line numbers were really,\nreally handy.\n\n691\n00:40:16,450 --> 00:40:17,860\n>> Yeah, all right.\n\n692\n00:40:17,860 --> 00:40:22,560\n>> Now, in the 12.4 iOS chain,\nyou could do this only on named ACLs.\n\n693\n00:40:22,560 --> 00:40:26,990\nYou couldn't do it on numbered ACLs and\nthey added a new feature.\n\n694\n00:40:26,990 --> 00:40:29,578\nActually, I think it was 12.3 was the last\ntime when you could only do it on name.\n\n695\n00:40:29,578 --> 00:40:31,610\nAnd in 12.4 and the new 15 points,\n\n696\n00:40:31,610 --> 00:40:35,772\nthe ones that are on the exam, you can\nactually do it with numbered ACLs also,\n\n697\n00:40:35,772 --> 00:40:39,270\nall right, but you can't do it from\nthe normal numbered ACL prompts.\n\n698\n00:40:39,270 --> 00:40:40,770\nYou have to basically treat it like this.\n\n699\n00:40:40,770 --> 00:40:43,910\nInstead of saying internal filter,\nI would specify the number\n\n700\n00:40:43,910 --> 00:40:46,800\nto get into the same prompt to\nbe able to modify it that way.\n\n701\n00:40:48,190 --> 00:40:52,030\n>> Now Don just showed us where we needed\nto insert something in before, but\n\n702\n00:40:52,030 --> 00:40:55,240\nthe nice thing is not only can we\nactually insert it inline, but\n\n703\n00:40:55,240 --> 00:40:59,080\nit makes it easy to delete an entire\nline if we needed to as well.\n\n704\n00:40:59,080 --> 00:41:04,400\nSo for us here, it gives us the ability of\nediting very granularly without having to\n\n705\n00:41:04,400 --> 00:41:06,950\nrewrite the entire one and\nthen paste it in and\n\n706\n00:41:06,950 --> 00:41:09,840\nworry about those things that\nDon was mentioning earlier.\n\n707\n00:41:09,840 --> 00:41:12,960\nSo if I wanna get rid of line 20,\nI can just say no 20, and\n\n708\n00:41:12,960 --> 00:41:14,550\nthat's gonna remove line 20.\n\n709\n00:41:14,550 --> 00:41:22,620\nAnd if I pull up that access list,\nline 20 is gone, all right.\n\n710\n00:41:22,620 --> 00:41:27,140\nSo as I add lines, it's automatically\nincrementing each line by ten, so\n\n711\n00:41:27,140 --> 00:41:28,060\nthat's cool.\n\n712\n00:41:28,060 --> 00:41:31,850\nBut then for us, we can go back and\nmodify, we can insert lines of any number\n\n713\n00:41:31,850 --> 00:41:35,190\nI picked five here but\nI could've picked seven or 17 whatever.\n\n714\n00:41:35,190 --> 00:41:38,650\n17 would have been down further,\nso you can pick.\n\n715\n00:41:38,650 --> 00:41:41,690\nSo as your ACLs grow,\nit's nice to be able to modify them.\n\n716\n00:41:41,690 --> 00:41:45,280\nI didn't have to detach,\nreattach the access list.\n\n717\n00:41:45,280 --> 00:41:47,630\nI didnt have to copy it to Notepad.\n\n718\n00:41:47,630 --> 00:41:49,630\nI did it all right here in place.\n\n719\n00:41:49,630 --> 00:41:52,560\nSo named ACLs are very powerful.\n\n720\n00:41:52,560 --> 00:41:55,509\nAnd as a result going forward,\nyou're in the future,\n\n721\n00:41:55,509 --> 00:41:58,480\nyou really want to do named\nACLs whenever possible.\n\n722\n00:41:58,480 --> 00:41:59,510\nAll right.\n\n723\n00:41:59,510 --> 00:42:02,440\n>> And actually this brings up a good\npoint for us with IP version 6,\n\n724\n00:42:02,440 --> 00:42:06,590\nright because you don't actually have\nnumbered ACLs really much anymore.\n\n725\n00:42:06,590 --> 00:42:09,470\nThey really do want you to use named ACLs.\n\n726\n00:42:09,470 --> 00:42:10,550\n>> Yeah, good point.\n\n727\n00:42:10,550 --> 00:42:13,625\nSo when we do like access-list,\n\n728\n00:42:13,625 --> 00:42:17,995\nquestion mark, see all these ranges here,\nthese are IPv4.\n\n729\n00:42:19,125 --> 00:42:22,885\nIPv6 is not even in this list, they didn't\neven bother giving numbers to IPv6.\n\n730\n00:42:22,885 --> 00:42:25,985\nTo do an IPv6 access list,\n\n731\n00:42:25,985 --> 00:42:30,940\nyou have to say IPv6 Access-list and\n\n732\n00:42:30,940 --> 00:42:36,470\nthen you give it a name and so\nI'll call this one, internal-filter.\n\n733\n00:42:36,470 --> 00:42:38,330\nIt'll probably be mad because\nI already used this one.\n\n734\n00:42:38,330 --> 00:42:40,710\nSo let me just add IPv6 to the end, right?\n\n735\n00:42:40,710 --> 00:42:42,940\nAnd then we run it and we're in.\n\n736\n00:42:42,940 --> 00:42:45,360\nYou don't have standard or\nextended either.\n\n737\n00:42:45,360 --> 00:42:46,790\nYou just have extended.\n\n738\n00:42:46,790 --> 00:42:51,140\nSo we can go through now and\nwrite our lines and so\n\n739\n00:42:51,140 --> 00:42:57,230\nwe can permit IPv6 traffic or\nTCP or UDP just like before.\n\n740\n00:42:57,230 --> 00:43:02,250\nThe difference is going to be you know\nour hosts are going to be really long.\n\n741\n00:43:02,250 --> 00:43:07,260\nYeah, really really quite long, /64.\n\n742\n00:43:07,260 --> 00:43:10,110\nWell actually we don't do\nthis last notation there,\n\n743\n00:43:10,110 --> 00:43:13,520\ncuz we still do have wildcard masks and\nall that to deal with.\n\n744\n00:43:13,520 --> 00:43:18,180\nSo we basically go though and we specify\nthat it works the same as the other ACLs,\n\n745\n00:43:18,180 --> 00:43:19,650\nwe're just using IPv6 addresses.\n\n746\n00:43:22,340 --> 00:43:23,670\nSo, neat stuff.\n\n747\n00:43:23,670 --> 00:43:25,280\nDefinitely something\nto be concerned about.\n\n748\n00:43:25,280 --> 00:43:30,200\nI know we addressed IPv6 ACLs I\nthink even in another episode, but\n\n749\n00:43:30,200 --> 00:43:31,800\ndefinitely keep that in mind.\n\n750\n00:43:33,270 --> 00:43:37,230\nNamed ACLs,\nyou will want to use whenever possible.\n\n751\n00:43:37,230 --> 00:43:40,450\nRegular ACLs being attached to interfaces\nare a great candidate for that.\n\n752\n00:43:40,450 --> 00:43:43,200\nWe're gonna see some examples later\nthough where there's some things that\n\n753\n00:43:43,200 --> 00:43:45,820\ndon't support named ACLs.\n\n754\n00:43:45,820 --> 00:43:47,400\nAnd so, we'll get a chance to see that,\nbut for\n\n755\n00:43:47,400 --> 00:43:50,730\nthe most part, those are the ones\nthat we need to be aware of.\n\n756\n00:43:50,730 --> 00:43:52,370\nAll right?\n\n757\n00:43:52,370 --> 00:43:54,538\nAll right, so if I want to\n\n758\n00:43:57,627 --> 00:44:01,780\nTake a look at that, did, oh, I did IMB.\n\n759\n00:44:01,780 --> 00:44:03,250\nI just need to begin.\n\n760\n00:44:03,250 --> 00:44:04,090\nThere.\n\n761\n00:44:04,090 --> 00:44:09,030\nLet me find that named ACL in here so\nI can then bring it up and\n\n762\n00:44:09,030 --> 00:44:11,050\nI'll just take this example here,\n\n763\n00:44:11,050 --> 00:44:15,580\nand put it in the little notes\nthat I've been kind of keeping.\n\n764\n00:44:15,580 --> 00:44:20,180\nSo we've got that ip access-list and\nthen whether it's standard or extended.\n\n765\n00:44:20,180 --> 00:44:24,722\nNow, I did a standard, if it was extended,\nthe syntax is a little bit different.\n\n766\n00:44:31,248 --> 00:44:35,180\nInternal-filter Part2.\n\n767\n00:44:35,180 --> 00:44:39,430\nAll right, with a extended,\n\n768\n00:44:39,430 --> 00:44:44,330\nwe can say like permit ip and\nthen a source and a destination.\n\n769\n00:44:44,330 --> 00:44:52,020\nSo I might say 192.168.00\ngoing to anywhere, like that.\n\n770\n00:44:52,020 --> 00:44:55,300\nWe can also go very specific.\n\n771\n00:44:55,300 --> 00:44:59,530\nSo I can deny anyone\ngoing to 10.0.0.0 eq 23.\n\n772\n00:44:59,530 --> 00:45:05,612\nI'm just shutting off Telnet or\n\n773\n00:45:05,612 --> 00:45:09,470\nwhatever, right?\n\n774\n00:45:09,470 --> 00:45:11,590\nSo we can be very specific.\n\n775\n00:45:11,590 --> 00:45:13,190\nWe can be very granular.\n\n776\n00:45:15,882 --> 00:45:17,555\nI'll just open up my line.\n\n777\n00:45:22,663 --> 00:45:27,108\nAnd let me copy that one and put that in\nto the little notes also, so that we can\n\n778\n00:45:27,108 --> 00:45:31,363\nkind of see an example of those syntax\nchanges between doing a Named ACL,\n\n779\n00:45:35,611 --> 00:45:38,325\nAnd a Named Extended ACL.\n\n780\n00:45:38,325 --> 00:45:42,265\nAll right,\nnow once you've made it as an Extended or\n\n781\n00:45:42,265 --> 00:45:44,735\nas a Standard,\nyou can't convert between the two.\n\n782\n00:45:44,735 --> 00:45:48,870\nYou just have to delete it and recreate\nit, so be aware of that, all right?\n\n783\n00:45:48,870 --> 00:45:53,740\nAnother neat little fact,\njust so you're aware, if I\n\n784\n00:45:53,740 --> 00:45:58,270\nmake a typo when I'm assigning an ACL,\nso if I get into an interface, whoops!\n\n785\n00:46:00,310 --> 00:46:06,004\nAnd I say ip access-group 55, okay.\n\n786\n00:46:06,004 --> 00:46:11,510\nYeah, well there is no access list 55,\n\n787\n00:46:11,510 --> 00:46:18,250\nso if I say show access-list 55,\nthere isn't one, okay?\n\n788\n00:46:18,250 --> 00:46:21,370\nWhat happens with an empty ACL?\n\n789\n00:46:21,370 --> 00:46:24,630\nWell, remember there's\nthat implicit denial?\n\n790\n00:46:24,630 --> 00:46:26,738\nAll right, it's implied that\nthere's a denial at the end.\n\n791\n00:46:26,738 --> 00:46:31,217\nSo technically,\naccess-list 55 would deny everything,\n\n792\n00:46:31,217 --> 00:46:36,500\nall right, but Cisco recognizes\nthat there's never a point\n\n793\n00:46:36,500 --> 00:46:39,960\nwhere you'd want to enter in\nan access list that was blank.\n\n794\n00:46:39,960 --> 00:46:42,900\nAnd so when you do this, there's a little\nsafety catch in there that says,\n\n795\n00:46:42,900 --> 00:46:46,280\noh you probably made a mistake or\nyou just haven't made that ACL yet.\n\n796\n00:46:46,280 --> 00:46:49,680\nSo we'll go ahead and not apply it.\n\n797\n00:46:49,680 --> 00:46:54,620\nSo when you do this ip access group 55 in,\nif that access list doesn't\n\n798\n00:46:54,620 --> 00:46:58,390\nactually exist yet,\nthen all traffic is permitted, all right.\n\n799\n00:46:58,390 --> 00:47:00,580\nThe implicit denial does not kick in.\n\n800\n00:47:03,300 --> 00:47:06,500\nSo just a little safety catch,\nnice one that I know has saved me once or\n\n801\n00:47:06,500 --> 00:47:08,250\ntwice over the years.\n\n802\n00:47:08,250 --> 00:47:13,130\nBut hopefully, you test out your ACLs\nbefore you push them into production.\n\n803\n00:47:16,362 --> 00:47:19,080\nAll right, so\nthat kind of knocks out Named ACLs.\n\n804\n00:47:19,080 --> 00:47:20,850\nWhat else do we have here?\n\n805\n00:47:20,850 --> 00:47:22,690\nWe did Standard, we did Named.\n\n806\n00:47:22,690 --> 00:47:24,640\nWe've talked about our Wildcard Masks.\n\n807\n00:47:24,640 --> 00:47:30,880\nAnd we just talked about sequencing and\nmodification, so ways that we can them.\n\n808\n00:47:30,880 --> 00:47:34,160\nThe other thing we have is\nthe section I had told Ronnie before.\n\n809\n00:47:34,160 --> 00:47:39,330\nI said I call this applying ACLs in\nweird places because we normally think\n\n810\n00:47:39,330 --> 00:47:44,370\nof ACLs as filtering traffic coming in and\nout of our router, but\n\n811\n00:47:44,370 --> 00:47:48,760\nit can also filter other things, so\nwe want to take a look at some of those.\n\n812\n00:47:48,760 --> 00:47:49,700\nBut, you know what?\n\n813\n00:47:49,700 --> 00:47:52,060\nWhy don't we do this Ronnie,\nwhy don't we stop and take a break.\n\n814\n00:47:52,060 --> 00:47:53,028\n>> Okay.\n>> And when we get back,\n\n815\n00:47:53,028 --> 00:47:54,841\nwe'll jump into those and\njust kind of move through that list\n\n816\n00:47:54,841 --> 00:47:55,383\n>> Yeah, sounds good.\n\n817\n00:47:55,383 --> 00:47:56,219\n>> And then wrap up from there.\n\n818\n00:47:56,219 --> 00:47:57,923\nSound good?\n>> Yes.\n\n819\n00:47:57,923 --> 00:47:59,030\n>> All right ladies and\ngentlemen stay tuned.\n\n820\n00:47:59,030 --> 00:48:01,205\nWhen we get back ACLs in weird places.\n\n821\n00:48:01,205 --> 00:48:02,282\n>> Yes.\n\n822\n00:48:02,282 --> 00:48:06,758\n[SOUND]\n\n823\n00:48:10,513 --> 00:48:12,120\n>> All right, welcome back everybody.\n\n824\n00:48:12,120 --> 00:48:16,000\nSo for the last segment were gonna take a\nlook at some of the different things that\n\n825\n00:48:16,000 --> 00:48:17,130\nwe can use ACLs for.\n\n826\n00:48:17,130 --> 00:48:20,655\nAnd for the entire last show ,and\nthe beginning part of this show,\n\n827\n00:48:20,655 --> 00:48:23,840\nwe've really been talking about\napplying them to interfaces.\n\n828\n00:48:23,840 --> 00:48:26,560\nAnd that's where we're filtering\ntraffic passing through our router,\n\n829\n00:48:26,560 --> 00:48:31,870\nthat's the most common use, and it's\nwhen we're most similar to a firewall.\n\n830\n00:48:31,870 --> 00:48:36,560\nBut we mentioned in some of the earlier\nIINS shows how we can use ACLs to protect\n\n831\n00:48:36,560 --> 00:48:37,970\nthe router itself.\n\n832\n00:48:37,970 --> 00:48:41,410\nAnd that's what Cisco calls out in\nobjective three here where they start to\n\n833\n00:48:41,410 --> 00:48:46,412\nbreak down Implementing ACLs to mitigate\nattacks, or mitigate threats on a network.\n\n834\n00:48:47,960 --> 00:48:50,600\nFiltering IP traffic, that's what we've\nbeen doing this whole episode and\n\n835\n00:48:50,600 --> 00:48:52,562\nthe whole last episode.\n\n836\n00:48:52,562 --> 00:48:58,040\nSo just protecting your hosts by\nrestricting the traffic coming in and out.\n\n837\n00:48:58,040 --> 00:49:02,160\nBut other places we can use them,\nlike SNMP, we haven't seen yet.\n\n838\n00:49:02,160 --> 00:49:04,960\nAnd so let me show you an example of that.\n\n839\n00:49:04,960 --> 00:49:08,760\nSNMP, there's several versions\nof it that are out there.\n\n840\n00:49:08,760 --> 00:49:11,450\nVersion 1, which nobody really\nruns anymore, Version 2c,\n\n841\n00:49:11,450 --> 00:49:14,600\nwhich is the most popular, and Version 3.\n\n842\n00:49:14,600 --> 00:49:16,525\nThe difference between Version 2c and\n\n843\n00:49:16,525 --> 00:49:19,856\nVersion 3 is that Version 3\nintroduces usernames and passwords.\n\n844\n00:49:19,856 --> 00:49:22,675\nSo you would think that it'd be\nmore secure, but in reality,\n\n845\n00:49:22,675 --> 00:49:24,258\nneither one is very secure at all.\n\n846\n00:49:24,258 --> 00:49:29,150\nSNMP does not send encrypted data,\nand as a result it can be exploited.\n\n847\n00:49:29,150 --> 00:49:34,150\nSo if you choose to use the simple network\nmanagement protocol when you define\n\n848\n00:49:34,150 --> 00:49:37,735\nyour community string, that string\nthat says, here's how people connect,\n\n849\n00:49:37,735 --> 00:49:42,295\neffectively a password,\nyou can also attach an ACL.\n\n850\n00:49:42,295 --> 00:49:43,655\nLet me show you an example.\n\n851\n00:49:43,655 --> 00:49:47,245\nOne of the easiest ways to deal with\nit is to create a standard ACL.\n\n852\n00:49:47,245 --> 00:49:52,682\nSo I'm gonna create a ACL,\nI'll do access list 77.\n\n853\n00:49:52,682 --> 00:49:57,182\nActually, I need to get rid of that IP,\nso it's just access list 77.\n\n854\n00:49:57,182 --> 00:50:01,362\nPermit, and then I need to add\nthe various people that I want to be\n\n855\n00:50:01,362 --> 00:50:05,852\nallowed to use SNMP.\n\n856\n00:50:05,852 --> 00:50:08,414\nSo maybe I've got a couple\nof stations out there, so\n\n857\n00:50:08,414 --> 00:50:11,619\nmaybe my laptop, Ronnie's laptop,\nour monitoring software,\n\n858\n00:50:11,619 --> 00:50:14,142\nI list each one that I want\nto be allowed to use SNMP.\n\n859\n00:50:16,120 --> 00:50:18,710\nAnd then when I go to configure SNMP.\n\n860\n00:50:19,920 --> 00:50:22,130\nTechnically, to turn on SNMP,\n\n861\n00:50:22,130 --> 00:50:26,190\nthe only thing you have to\ndesignate is a community.\n\n862\n00:50:26,190 --> 00:50:31,390\nThat's that, basically, password,\nthat people will use to get connected.\n\n863\n00:50:31,390 --> 00:50:34,370\nAnd it's just a string, so\nI might create one called itprotv.\n\n864\n00:50:34,370 --> 00:50:40,470\nAnd then you designate whether it is\nread only, or whether it is read-write.\n\n865\n00:50:40,470 --> 00:50:43,600\nAnd if you do read-write,\npeople can actually use SNMP to\n\n866\n00:50:43,600 --> 00:50:46,820\nchange your router configuration,\nthat would be bad.\n\n867\n00:50:46,820 --> 00:50:48,240\nBut if you do read-only,\n\n868\n00:50:48,240 --> 00:50:51,520\nthey can just use it to gather\ninformation about your router.\n\n869\n00:50:51,520 --> 00:50:56,140\nBut an attacker could use this to find out\nwhat version of the iOS you're running,\n\n870\n00:50:56,140 --> 00:50:57,836\nhow your interfaces are set up.\n\n871\n00:50:57,836 --> 00:51:00,890\nThey could actually query all your ACLs so\nthey could look at them,\n\n872\n00:51:00,890 --> 00:51:02,550\nthat would be really bad.\n\n873\n00:51:02,550 --> 00:51:06,880\nAnd to do it, they would just need to\nknow this community string right here,\n\n874\n00:51:06,880 --> 00:51:10,630\nwhich is transmitted in plain text,\nin the packets as they're being sent.\n\n875\n00:51:10,630 --> 00:51:13,810\nAnd so it's just not a secure protocol,\ndeep down inside.\n\n876\n00:51:13,810 --> 00:51:15,180\n>> Yeah.\n>> Doesn't mean you can't use it,\n\n877\n00:51:15,180 --> 00:51:18,610\nthough, because the very next\nthing is we can designate\n\n878\n00:51:18,610 --> 00:51:21,290\nan access list that's attached to it.\n\n879\n00:51:21,290 --> 00:51:23,090\nAnd it supports numbered ACLs,\n\n880\n00:51:23,090 --> 00:51:23,800\nlike I'm doing,\n>> Name.\n\n881\n00:51:23,800 --> 00:51:28,010\n>> It also supports named ACLs,\n>> So you can set that on there.\n\n882\n00:51:29,170 --> 00:51:33,180\nAnd now,\nthe only people allowed to pull SNMP\n\n883\n00:51:33,180 --> 00:51:36,890\ndata are the people in access list 77.\n\n884\n00:51:36,890 --> 00:51:40,970\nI'm using an ACL to secure SNMP.\n\n885\n00:51:40,970 --> 00:51:41,610\n>> Yeah.\n\n886\n00:51:41,610 --> 00:51:45,470\nNotice once again,\nthat IP version 6 is supported here.\n\n887\n00:51:45,470 --> 00:51:48,625\nThat's gonna be important as\nwe move towards IP version 6.\n\n888\n00:51:48,625 --> 00:51:51,820\nYou've gotta do it on both if you are\ngoing to be using both IP version 4 and\n\n889\n00:51:51,820 --> 00:51:52,760\nIP version 6.\n\n890\n00:51:52,760 --> 00:51:53,280\n>> Absolutely.\n\n891\n00:51:53,280 --> 00:51:54,280\n>> Yep.\n\n892\n00:51:54,280 --> 00:51:56,360\n>> All right, so\nthat's an example of that,\n\n893\n00:51:56,360 --> 00:51:58,770\ntrying to make SNMP a little more secure.\n\n894\n00:51:58,770 --> 00:52:02,160\nThey don't specifically call it out here,\nbut HTTP is another\n\n895\n00:52:02,160 --> 00:52:06,655\none that with HTTP by default\nanybody can connect up to it.\n\n896\n00:52:06,655 --> 00:52:09,560\nIt's not restricted or whatever, but\n\n897\n00:52:09,560 --> 00:52:13,200\nyou actually do have in here somewhere,\nwhere is it?\n\n898\n00:52:13,200 --> 00:52:14,541\nThere, access-class.\n\n899\n00:52:14,541 --> 00:52:18,040\nAccess-class, where we\ncan attach an ACL to it.\n\n900\n00:52:18,040 --> 00:52:23,920\nNotice on this one, it does not\nsupport extended ACLs or named ACLs.\n\n901\n00:52:23,920 --> 00:52:28,800\nIt only supports numbered standard\nACLs in the first number range.\n\n902\n00:52:28,800 --> 00:52:33,030\nExtremely limited,\nto restrict access to this one, but\n\n903\n00:52:33,030 --> 00:52:38,110\nyou can attach an ACL to the HTTP,\nto the web service of the router itself.\n\n904\n00:52:38,110 --> 00:52:39,330\nAgain, trying to restrict it.\n\n905\n00:52:39,330 --> 00:52:42,220\nNow, for me, Ronnie,\nI don't know about you,\n\n906\n00:52:42,220 --> 00:52:45,610\nI always forget which ones support\nnamed and which ones don't.\n\n907\n00:52:45,610 --> 00:52:48,560\nAnd so\neven though I know named ACLs are better,\n\n908\n00:52:48,560 --> 00:52:52,890\nI'll often still use numbered ACLs cuz\nI know they're supported everywhere.\n\n909\n00:52:52,890 --> 00:52:57,190\nIf any of you guys go on to do your CCNP,\nyou'll bump into at All the time.\n\n910\n00:52:57,190 --> 00:52:58,510\nRoute maps and things like that,\n\n911\n00:52:58,510 --> 00:53:00,685\nwhere all of the sudden you're not able,\ndue to a named ACL.\n\n912\n00:53:00,685 --> 00:53:03,720\nAnd so\nI still default to doing a numbered ones.\n\n913\n00:53:03,720 --> 00:53:06,742\nBut use named ACLs wherever you can,\nthey are more flexible.\n\n914\n00:53:06,742 --> 00:53:13,250\nAll right,\nother places that we can use ACLs.\n\n915\n00:53:13,250 --> 00:53:15,960\nWell, we may need to\nprotect our router from\n\n916\n00:53:15,960 --> 00:53:17,900\ndistributed denial of service attacks.\n\n917\n00:53:17,900 --> 00:53:21,480\nPeople flooding the router to try and\noverwhelm it so\n\n918\n00:53:21,480 --> 00:53:23,800\nthat you get effectively locked out of it.\n\n919\n00:53:23,800 --> 00:53:27,300\nWe actually addressed this in,\nwas it episode number two?\n\n920\n00:53:27,300 --> 00:53:28,910\n>> I think.\n>> It was one of the earlier episodes with\n\n921\n00:53:28,910 --> 00:53:29,446\nIIS [CROSSTALK].\n\n922\n00:53:29,446 --> 00:53:31,559\n>> One with securing the router, yes.\n\n923\n00:53:31,559 --> 00:53:35,230\n>> Because we used what's\ncalled control plane policing.\n\n924\n00:53:35,230 --> 00:53:40,420\nAnd I don't want to re-delve into it here,\ncuz we did already cover it.\n\n925\n00:53:40,420 --> 00:53:43,300\nBut just to cover it real quick.\n\n926\n00:53:43,300 --> 00:53:49,880\nHere, let me just pull up the Cisco\npage on control plane policing.\n\n927\n00:53:49,880 --> 00:53:53,523\nAnd basically, where is a.\n\n928\n00:53:55,275 --> 00:53:58,387\nWell, I was kind of hoping they\nwould give me a syntax example.\n\n929\n00:53:58,387 --> 00:53:59,370\nHere.\n>> There you go.\n\n930\n00:53:59,370 --> 00:54:04,880\n>> So here they're writing an ACL for\nwho is allowed to send traffic.\n\n931\n00:54:04,880 --> 00:54:07,710\nAnd they're specifying\ntheir internal hosts and\n\n932\n00:54:07,710 --> 00:54:10,730\nthe traffic they want to be allowed,\nand stuff.\n\n933\n00:54:10,730 --> 00:54:16,450\nAnd then they attach that to\nthe control plane somewhere in here.\n\n934\n00:54:16,450 --> 00:54:21,383\nLet's see, there's the class maps and\nthen [LAUGH] somewhere in here\n\n935\n00:54:21,383 --> 00:54:25,309\nthey actually attach it to\nthe control plane, there.\n\n936\n00:54:25,309 --> 00:54:27,903\nSo you basically write\na service policy and\n\n937\n00:54:27,903 --> 00:54:30,865\nthen you attach that to\nthe control plan itself.\n\n938\n00:54:30,865 --> 00:54:34,576\nThis is important,\nbecause the ACLs that we've been writing,\n\n939\n00:54:34,576 --> 00:54:37,750\nthey all apply to traffic\npassing through the router.\n\n940\n00:54:37,750 --> 00:54:41,226\nThis is traffic passing to the router,\nnot going through it.\n\n941\n00:54:41,226 --> 00:54:42,805\nActually for the router itself.\n\n942\n00:54:42,805 --> 00:54:46,200\nAnd so we can use control\nplane policing to filter that.\n\n943\n00:54:46,200 --> 00:54:49,180\nAnd we're not just trying to\nfilter access in general, but\n\n944\n00:54:49,180 --> 00:54:52,920\nwe're trying to restrict the amount\nof bandwidth it can consume and\n\n945\n00:54:52,920 --> 00:54:55,600\nthe rate at which its\npackets are passing through.\n\n946\n00:54:55,600 --> 00:54:56,150\nAnd so you'll see,\n\n947\n00:54:56,150 --> 00:55:00,730\nthis is a pretty complex example cuz\nthey're defining bandwidth limits.\n\n948\n00:55:00,730 --> 00:55:04,270\nMaximum bandwidths,\nburst amounts and so on.\n\n949\n00:55:04,270 --> 00:55:07,710\nAnd saying, if they exceed that amount,\ndrop the traffic but\n\n950\n00:55:07,710 --> 00:55:08,630\nallow a certain amount.\n\n951\n00:55:08,630 --> 00:55:11,320\nSo that stops that denial\nof service type attack.\n\n952\n00:55:11,320 --> 00:55:14,440\nVery powerful stuff and I know I\nlinked to the same article earlier but\n\n953\n00:55:14,440 --> 00:55:20,030\nI'll add it to the notes for this episode\nso we can kind of have that to reference.\n\n954\n00:55:20,030 --> 00:55:21,730\nOr are those notes from the other episode?\n\n955\n00:55:21,730 --> 00:55:22,636\nHere.\n\n956\n00:55:29,612 --> 00:55:31,790\nSo we'll have that for you guys.\n\n957\n00:55:33,370 --> 00:55:39,870\nAll right, and let's see, what are some\nother places that they call out?\n\n958\n00:55:39,870 --> 00:55:42,540\nWell, using the command line interface and\nthe CCP,\n\n959\n00:55:42,540 --> 00:55:47,800\nthe Cisco Configuration Professional,\non the exam, they expect you to know both.\n\n960\n00:55:47,800 --> 00:55:51,600\nAnd at the beginning of last episode,\nwe created some ACLs, using the GUI.\n\n961\n00:55:51,600 --> 00:55:52,710\nSuper easy, right?\n\n962\n00:55:52,710 --> 00:55:53,787\nThat's the easy way.\n\n963\n00:55:53,787 --> 00:55:54,901\nBut the command line.\n\n964\n00:55:54,901 --> 00:55:58,076\nI've used that for the end of\nthe second show, and all of this show,\n\n965\n00:55:58,076 --> 00:56:01,867\nbecause That's the harder one, that's\nthe one you guys need to work with more to\n\n966\n00:56:01,867 --> 00:56:04,300\nmake sure you remember,\nbuild up that retention.\n\n967\n00:56:07,450 --> 00:56:12,090\nNow, building up a good anti spoofing ACL,\nI know we\n\n968\n00:56:12,090 --> 00:56:16,108\ndid this in another show also, we covered\nsome of these objectives already.\n\n969\n00:56:16,108 --> 00:56:21,010\nBut, anti spoofing ACLs\nare where we just block\n\n970\n00:56:21,010 --> 00:56:23,958\ntraffic that we should never\nreceive from the outside.\n\n971\n00:56:23,958 --> 00:56:27,950\nAnd that's gonna include things like,\nRFC1918 addresses,\n\n972\n00:56:27,950 --> 00:56:31,940\nthe private addresses, as well as,\nwhat are called Bogon networks.\n\n973\n00:56:31,940 --> 00:56:36,750\nBogon networks, are networks that the IANA\nis not assigning to the real world, and so\n\n974\n00:56:36,750 --> 00:56:39,190\nyou can create an ACL to block those.\n\n975\n00:56:39,190 --> 00:56:42,470\nCisco has several published on their site.\n\n976\n00:56:42,470 --> 00:56:46,850\nLet me see if I can pull\none up real quick, and\n\n977\n00:56:48,170 --> 00:56:52,980\nit should give us a good\nexample here we go, perfect.\n\n978\n00:56:52,980 --> 00:57:00,550\nSo, if we look at this ACL,\nright here is the RFC 1918 space, right?\n\n979\n00:57:00,550 --> 00:57:04,288\nSee how they're denying 10.0.0.0,\nthat class A.\n\n980\n00:57:04,288 --> 00:57:11,570\n172.16, and that actually goes all the way\nthrough 172.31, and 192.168.0 through 255.\n\n981\n00:57:11,570 --> 00:57:16,960\nThose are the private IP address\nranges reserved for internal use.\n\n982\n00:57:16,960 --> 00:57:20,220\nYou should never get\ntraffic from those ranges.\n\n983\n00:57:20,220 --> 00:57:20,800\n>> Yeah.\n\n984\n00:57:20,800 --> 00:57:23,410\nI like the list right above there,\nwhere it talks\n\n985\n00:57:23,410 --> 00:57:26,700\nabout the different hosts that you\nsee especially the special addresses.\n\n986\n00:57:26,700 --> 00:57:31,210\nDon't forget those as well and that\nmultitask range as well as the loop back.\n\n987\n00:57:31,210 --> 00:57:33,250\n>> Yeah.\nYou'll hear these referred to as Bogon\n\n988\n00:57:33,250 --> 00:57:37,880\naddresses and technically they don't\nfall in the private ranges, but\n\n989\n00:57:37,880 --> 00:57:39,790\nthey're also not assigned by the IANA.\n\n990\n00:57:39,790 --> 00:57:41,340\nSome make sense, right?\n\n991\n00:57:41,340 --> 00:57:44,780\nThis one basically says somebody,\nwho doesn't have an address.\n\n992\n00:57:44,780 --> 00:57:46,220\n>> Yeah.\n>> So, if the address is missing,\n\n993\n00:57:46,220 --> 00:57:49,730\nyou should never get traffic like that and\n127, that's the loop back.\n\n994\n00:57:49,730 --> 00:57:52,180\nYou should never get that.\n\n995\n00:57:52,180 --> 00:57:58,430\nThe last one, this is 224 all the way\nthough 255, that's multi class traffic,\n\n996\n00:57:58,430 --> 00:58:04,288\nas well as, the class E research range,\nyou should never get that traffic.\n\n997\n00:58:04,288 --> 00:58:09,330\nAnd then, 192.0.2,\nthat's a little known one,\n\n998\n00:58:09,330 --> 00:58:14,060\nbut it's another, special network reserved\nby the INA and they do not issue out, so\n\n999\n00:58:14,060 --> 00:58:16,970\nyou should never get traffic\non the internet from that one.\n\n1000\n00:58:16,970 --> 00:58:23,040\nIt doesn't fall in the 192.168\nspace of the private range.\n\n1001\n00:58:23,040 --> 00:58:25,270\nSo, we can create a list\nthat blocks those,\n\n1002\n00:58:25,270 --> 00:58:29,920\nwith no risk of damaging our own network,\nbut we should go a step further.\n\n1003\n00:58:29,920 --> 00:58:32,460\nIf we have any public IT block,\n\n1004\n00:58:32,460 --> 00:58:37,380\nones that we've been assigned from\nthe IANA, that traffic should originate\n\n1005\n00:58:37,380 --> 00:58:41,790\nfrom us, we shouldn't get traffic from\nthe internet on our own addresses.\n\n1006\n00:58:41,790 --> 00:58:45,170\nAnd so this one we'll have to\ncustomize to match our own system, so\n\n1007\n00:58:45,170 --> 00:58:47,250\nthat we can block that traffic.\n\n1008\n00:58:47,250 --> 00:58:49,940\nAnd they go a little over the top here,\nbecause they go on and\n\n1009\n00:58:49,940 --> 00:58:52,460\nstart doing VGP entries.\n\n1010\n00:58:52,460 --> 00:58:56,170\nMost people aren't running VGP,\nand so this is not necessary.\n\n1011\n00:58:56,170 --> 00:58:58,250\nBut if you are running VGP,\nyou wanna limit it so\n\n1012\n00:58:58,250 --> 00:59:02,900\nyou can only receive VGP connections\nfrom your directly connected ISP.\n\n1013\n00:59:02,900 --> 00:59:05,270\nThere's no point of receiving\nconnections from anybody else,\n\n1014\n00:59:05,270 --> 00:59:06,640\nyou're only talking to your ISP.\n\n1015\n00:59:07,760 --> 00:59:12,320\nAnd then any internal infrastructure\naddresses, any other internal ranges that\n\n1016\n00:59:12,320 --> 00:59:16,300\nshouldn't be coming from the internet,\nand everything else, we allow, right?\n\n1017\n00:59:16,300 --> 00:59:21,192\nSo, that right there is\na great example of an anti\n\n1018\n00:59:21,192 --> 00:59:25,590\nspoofing ACL, and let me do this.\n\n1019\n00:59:25,590 --> 00:59:30,440\nIn the notes for this episode,\nlet me do, whoops, that\n\n1020\n00:59:32,120 --> 00:59:36,060\ndidn't work, anti spoofing ACL.\n\n1021\n00:59:36,060 --> 00:59:39,645\nSo there, that's straight out of Cisco's\npage, but let me link to that page also,\n\n1022\n00:59:39,645 --> 00:59:43,390\ncuz there's a lot of other\ngood information on it.\n\n1023\n00:59:43,390 --> 00:59:45,965\nIt's a good read, and I know I linked\nto this same page in the other another\n\n1024\n00:59:45,965 --> 00:59:49,605\nepisode, but we'll do it again,\nrepetition leads to retention.\n\n1025\n00:59:49,605 --> 00:59:53,535\nThat was what I was taught\nin elementary school,\n\n1026\n00:59:53,535 --> 00:59:57,300\nas you had to write I will not say\nbad words in class 5,000 times.\n\n1027\n00:59:57,300 --> 00:59:59,570\n>> Sorry.\n>> [LAUGH] All right.\n\n1028\n00:59:59,570 --> 01:00:02,340\nSo, what else do we have on our list?\n\n1029\n01:00:02,340 --> 01:00:05,080\n>> We have the VLAN access control list.\n\n1030\n01:00:05,080 --> 01:00:05,840\n>> Goodness.\n\n1031\n01:00:05,840 --> 01:00:06,340\nAll right.\n\n1032\n01:00:07,378 --> 01:00:11,980\nAll the ACLs we've talked about to this\npoint have been based on IP addresses.\n\n1033\n01:00:11,980 --> 01:00:13,390\nIPv4, IPv6, whatever.\n\n1034\n01:00:13,390 --> 01:00:16,490\nWhat about on a switch?\n\n1035\n01:00:16,490 --> 01:00:19,030\nWell many switches support VLAN ACLs.\n\n1036\n01:00:19,030 --> 01:00:24,710\nAnd VLAN ACLs are basically access control\nlists that filter based on Mac addresses.\n\n1037\n01:00:24,710 --> 01:00:28,290\nNow, I said at the beginning\nof the last episode\n\n1038\n01:00:28,290 --> 01:00:29,870\nthat it's not very effective, right?\n\n1039\n01:00:29,870 --> 01:00:32,730\nIt's not effective to\nfilter by Mac addresses,\n\n1040\n01:00:32,730 --> 01:00:34,720\nbecause you're gonna have ranges, right?\n\n1041\n01:00:34,720 --> 01:00:37,990\nIf you buy five network adapters, they\nprobably weren't manufactured at the same\n\n1042\n01:00:37,990 --> 01:00:40,800\ntime, and they're gonna have Mac addresses\nat completely different ranges and\n\n1043\n01:00:40,800 --> 01:00:43,740\nit's difficult to identify computers and\nso on.\n\n1044\n01:00:43,740 --> 01:00:46,680\nSo, filtering my Mac\naddress is not effective,\n\n1045\n01:00:46,680 --> 01:00:48,540\nnot may people do it, all right?\n\n1046\n01:00:48,540 --> 01:00:50,850\nSo you might ask,\nwhy do they even mention it here?\n\n1047\n01:00:50,850 --> 01:00:54,487\nAnd the reason is,\nthat when it comes to VLAN ACLs\n\n1048\n01:00:54,487 --> 01:00:59,458\nthere is actually special type of\nVLAN ACLs called a private VLAN,\n\n1049\n01:00:59,458 --> 01:01:03,640\nthat allows us to create\ndynamic flexible VLANs.\n\n1050\n01:01:03,640 --> 01:01:07,095\nNot based on Mac addresses,\nbut based on physical ports.\n\n1051\n01:01:07,095 --> 01:01:09,965\nAnd that is something you can rely on.\n\n1052\n01:01:09,965 --> 01:01:11,865\nWhat physical port people\nare plugged into, and\n\n1053\n01:01:11,865 --> 01:01:13,675\nyou filter based on it, all right?\n\n1054\n01:01:13,675 --> 01:01:15,585\nSo, it's a really neat concept.\n\n1055\n01:01:15,585 --> 01:01:17,195\nLet's talk about it a little bit.\n\n1056\n01:01:17,195 --> 01:01:19,230\nI'm gonna bring up a Visio diagram.\n\n1057\n01:01:19,230 --> 01:01:24,010\nAnd what I've got here is a switch and\na router, all right?\n\n1058\n01:01:24,010 --> 01:01:32,140\nSo the top part here is a- There,\nthat's a Cisco 37, or sorry.\n\n1059\n01:01:32,140 --> 01:01:35,810\nShoot I'm getting confused\nin my head here a 3750.\n\n1060\n01:01:35,810 --> 01:01:39,530\nI was right,\nwhen I was saying it at the beginning.\n\n1061\n01:01:39,530 --> 01:01:44,380\nSo it's a Cisco 3750 switch,\nwhich is a current gen switch and\n\n1062\n01:01:44,380 --> 01:01:45,221\nit's a 48 port switch, all right?\n\n1063\n01:01:46,730 --> 01:01:52,480\nAnd attached to it,\nI've got a Cisco 2901 Router just a 2900.\n\n1064\n01:01:52,480 --> 01:01:59,670\nAnd I've got a network jack running from\nthe router into the switch, all right?\n\n1065\n01:01:59,670 --> 01:02:04,650\nIf a 3750 is configured by default,\nany PCs that I plug\n\n1066\n01:02:04,650 --> 01:02:09,510\ninto it will all be able to see\nthe router, by passing through\n\n1067\n01:02:09,510 --> 01:02:13,940\nthe switch across the uplink and into\nthe router and off they go, all right?\n\n1068\n01:02:13,940 --> 01:02:17,350\nThey will also be able to see each other.\n\n1069\n01:02:18,720 --> 01:02:20,000\nSo, they can see each other and\n\n1070\n01:02:20,000 --> 01:02:25,500\ncommunicate as well as communicating\nacross to the router, all right?\n\n1071\n01:02:25,500 --> 01:02:29,900\nNow if this is private equipment\nthat we own, it's all our systems,\n\n1072\n01:02:29,900 --> 01:02:32,210\nthat may be what we want, all right?\n\n1073\n01:02:32,210 --> 01:02:34,290\nBut, what if this is a DMZ?\n\n1074\n01:02:34,290 --> 01:02:37,140\nWhat if this is a secured network?\n\n1075\n01:02:37,140 --> 01:02:41,070\nAnd a hacker breaks into\none of these systems.\n\n1076\n01:02:41,070 --> 01:02:43,640\nSo the hacker comes in from the internet,\nand\n\n1077\n01:02:43,640 --> 01:02:46,230\nthey compromise this system right here.\n\n1078\n01:02:46,230 --> 01:02:51,600\nFrom that system,\nthey can now leapfrog to access all of\n\n1079\n01:02:51,600 --> 01:02:56,370\nthese other systems in the DMZ potentially\ncompromising my entire network, right?\n\n1080\n01:02:57,940 --> 01:03:02,520\nThat's one scenario where the default\nconfiguration on that switch is not\n\n1081\n01:03:02,520 --> 01:03:03,730\na good thing, right?\n\n1082\n01:03:03,730 --> 01:03:05,440\nNot a good layout for us.\n\n1083\n01:03:06,580 --> 01:03:10,020\nThe other scenario is what if\nI'm a service provider, and\n\n1084\n01:03:10,020 --> 01:03:15,220\nwhat if I have customer number one,\nplugged in here?\n\n1085\n01:03:15,220 --> 01:03:20,240\nCustomer number two here, customer number\nthree here, customer number four here.\n\n1086\n01:03:20,240 --> 01:03:23,610\nIf I have four different customers,\nI probably want\n\n1087\n01:03:23,610 --> 01:03:27,020\nall four customers to be able to get to\nthe router to get out to the internet.\n\n1088\n01:03:27,020 --> 01:03:31,500\nBut, I probably don't want the customers\nto see each other, all right?\n\n1089\n01:03:31,500 --> 01:03:33,810\nI can write IP ACLs to filter it.\n\n1090\n01:03:33,810 --> 01:03:35,760\nBut what if they spoof their IP addresses?\n\n1091\n01:03:35,760 --> 01:03:37,690\nThey can be a real problem, right?\n\n1092\n01:03:37,690 --> 01:03:40,900\nSo, if I want the utmost security,\n\n1093\n01:03:40,900 --> 01:03:46,060\nI need to filter based on their ports,\nnot their IPs, or whatever.\n\n1094\n01:03:46,060 --> 01:03:50,700\nSo, on most Cisco switches, we can\ncreate what's called a private VLAN.\n\n1095\n01:03:50,700 --> 01:03:54,738\nA private VLAN, is one where we\ncontrol the access based on ports.\n\n1096\n01:03:54,738 --> 01:03:57,444\n>> Yeah.\n>> And you're basically creating an ACL\n\n1097\n01:03:57,444 --> 01:03:58,527\nfor the ports.\n\n1098\n01:03:58,527 --> 01:04:03,217\nThe way it works, is you designate\nwhat's called a primary VLAN.\n\n1099\n01:04:03,217 --> 01:04:06,118\nA VLAN that all these ports are in.\n\n1100\n01:04:06,118 --> 01:04:08,997\nThen you designate each port,\n\n1101\n01:04:08,997 --> 01:04:14,800\nas being either a host port,\nor a promiscuous port.\n\n1102\n01:04:14,800 --> 01:04:18,840\nA host port can only talk\nto promiscuous ports, and\n\n1103\n01:04:18,840 --> 01:04:20,930\na promiscuous port can talk to everybody.\n\n1104\n01:04:20,930 --> 01:04:27,480\nSo what we would do,\nis we would flag each of these ports\n\n1105\n01:04:27,480 --> 01:04:34,010\nas host ports, and then, we would\nflag this port as a promiscuous port.\n\n1106\n01:04:34,010 --> 01:04:37,790\nAnd that, would make it where all of\nmy customers could see the Internet\n\n1107\n01:04:37,790 --> 01:04:42,710\nconnection, and receive traffic,\nbut they couldn't see each other.\n\n1108\n01:04:42,710 --> 01:04:46,060\nSo if this guy tried to get\nthe the Internet, that would work fine.\n\n1109\n01:04:46,060 --> 01:04:51,060\nIf he tried to get to this other host,\nthat would be blocked.\n\n1110\n01:04:51,060 --> 01:04:52,630\nThat's perfect.\n\n1111\n01:04:52,630 --> 01:04:58,230\nIf I'm trying to stop a hacker from\nleapfrogging between my DMZ systems,\n\n1112\n01:04:58,230 --> 01:05:00,650\nor if I'm trying to keep customers\nisolated from each other,\n\n1113\n01:05:02,000 --> 01:05:04,250\nthere's one little problem, though.\n\n1114\n01:05:04,250 --> 01:05:09,660\nWhat if my first customer calls, and\nsays, hey, I need another server,\n\n1115\n01:05:10,860 --> 01:05:17,320\nor, hey, I've got eight servers I want to\nplug in, if I put them in a protected VLAN\n\n1116\n01:05:17,320 --> 01:05:21,220\nlike this, those eight servers won't be\nable to see each other, where private VLAN\n\n1117\n01:05:21,220 --> 01:05:25,740\nstart to get complex, is when we start\ndesignating what are called Communities.\n\n1118\n01:05:25,740 --> 01:05:29,710\nA community is where I create a group of\nports, that are allowed to see each other,\n\n1119\n01:05:29,710 --> 01:05:32,320\nand a promiscuous port, but\nnot the other customers.\n\n1120\n01:05:32,320 --> 01:05:37,180\nSo I could take a switch like this,\nand I could break it up.\n\n1121\n01:05:37,180 --> 01:05:42,040\nI could say, all right, well,\nthe first, what is that, 12 ports?\n\n1122\n01:05:42,040 --> 01:05:46,250\nThat's gonna belong to customer one, and\nthey'll all be able to see each other, and\n\n1123\n01:05:46,250 --> 01:05:50,630\nthen the next 12 ports, that's gonna\nbelong to customer two, and the next port,\n\n1124\n01:05:50,630 --> 01:05:54,420\nthat'll belong to customer three,\nand then customer four.\n\n1125\n01:05:54,420 --> 01:05:57,580\nSo I keep going like that,\nand, oh, you know what?\n\n1126\n01:05:57,580 --> 01:06:01,530\nActually I need to skip over that port,\n\n1127\n01:06:01,530 --> 01:06:07,250\nbecause that's the one I'm going\nto make the promiscuous port.\n\n1128\n01:06:07,250 --> 01:06:11,675\nSo I can put each of these guys\nin their own community, and\n\n1129\n01:06:11,675 --> 01:06:14,235\nthey'll be able to see\neach other just fine.\n\n1130\n01:06:14,235 --> 01:06:19,335\nSo one of these hosts can talk to,\nyou know, other hosts in the community,\n\n1131\n01:06:19,335 --> 01:06:23,165\nand they'll be able to talk to\nthe promiscuous port to get out, but\n\n1132\n01:06:23,165 --> 01:06:26,610\nthey won't be able to\ntalk to other customers.\n\n1133\n01:06:26,610 --> 01:06:29,780\nIt's complex but it is effective, okay?\n\n1134\n01:06:31,040 --> 01:06:35,200\nTo implement it, first off, you need to\nsee if your switch supports it, okay?\n\n1135\n01:06:35,200 --> 01:06:37,180\nAnd before I jump in to a real device,\n\n1136\n01:06:37,180 --> 01:06:40,910\nlet me just show you guys\nwhat the syntax looks like.\n\n1137\n01:06:43,000 --> 01:06:45,415\nSeems like I have an example sitting\naround on one of my screens.\n\n1138\n01:06:45,415 --> 01:06:49,995\nThere we go, perfect.\n\n1139\n01:06:49,995 --> 01:06:54,720\nSo for private VLANs,\nremember that promiscuous port?\n\n1140\n01:06:54,720 --> 01:06:59,500\nIt can send and\nreceive traffic from everybody, but a host\n\n1141\n01:07:01,440 --> 01:07:08,060\ncan only send and\nreceive traffic from promiscuous ports.\n\n1142\n01:07:08,060 --> 01:07:12,570\nAnd you can have more than one\npromiscuous port, but you know,\n\n1143\n01:07:12,570 --> 01:07:14,080\ntypically you just have\none at your router.\n\n1144\n01:07:14,080 --> 01:07:17,290\nIf you have more than one router though,\nyou'd need to do more than one port.\n\n1145\n01:07:17,290 --> 01:07:20,730\nThen if we start doing communities,\nisolated is the default.\n\n1146\n01:07:20,730 --> 01:07:23,460\nThe port can only see itself and\npromiscuous ports.\n\n1147\n01:07:23,460 --> 01:07:27,590\nBut Communities, that's where we can see\nother people in our community, great for\n\n1148\n01:07:27,590 --> 01:07:29,850\ncustomers who have more than one machine.\n\n1149\n01:07:29,850 --> 01:07:32,760\nWe start by creating VLANs.\n\n1150\n01:07:32,760 --> 01:07:33,870\nYou'll have a primary VLAN.\n\n1151\n01:07:33,870 --> 01:07:37,450\nAll of these guys are gonna\nbe in one big VLAN.\n\n1152\n01:07:37,450 --> 01:07:41,990\nBut then you create basically Sub-VLANs,\nSub-VLANs to identify each customer.\n\n1153\n01:07:41,990 --> 01:07:44,970\nHere's one that's flagged\nas an isolated VLAN.\n\n1154\n01:07:44,970 --> 01:07:49,290\nPosts in this isolated VLAN, will be able\nto see themselves, in promiscuous ports.\n\n1155\n01:07:49,290 --> 01:07:52,100\nHere's another VLAN,\nthat's a community VLAN.\n\n1156\n01:07:52,100 --> 01:07:55,270\nAnybody in VLAN 110, will be able to\nsee the other people in VLAN 110,\n\n1157\n01:07:55,270 --> 01:07:58,410\nbut that's a sub of VLAN 11.\n\n1158\n01:07:58,410 --> 01:08:00,406\nSee, how I've issued\nthis command right here.\n\n1159\n01:08:00,406 --> 01:08:04,731\nPrivate-vlan association 110, 111,\n\n1160\n01:08:04,731 --> 01:08:10,250\nthat's tying these other two\nas sub-VLANs under this one.\n\n1161\n01:08:10,250 --> 01:08:13,480\nNow you might ask yourself,\nwhy not just use different VLANs.\n\n1162\n01:08:13,480 --> 01:08:15,810\nWell then, you loose that\nwhole promiscuous portal part,\n\n1163\n01:08:15,810 --> 01:08:19,250\nwhere you have one host that's\nshared between the VLANs.\n\n1164\n01:08:19,250 --> 01:08:20,840\nThis is all done a layer or two.\n\n1165\n01:08:20,840 --> 01:08:22,560\nThis is not layer three switching.\n\n1166\n01:08:22,560 --> 01:08:23,950\nYou don't need layer three.\n\n1167\n01:08:23,950 --> 01:08:26,000\nYou don't need routing capabilities\nin your switch to do this.\n\n1168\n01:08:26,000 --> 01:08:27,560\nThis is all done at layer two.\n\n1169\n01:08:27,560 --> 01:08:29,170\nSo it's MAC address, really, filtering.\n\n1170\n01:08:29,170 --> 01:08:30,160\nOr at least link layer.\n\n1171\n01:08:31,930 --> 01:08:33,760\nThen we just go into our interfaces.\n\n1172\n01:08:33,760 --> 01:08:37,060\nIf it's the interface that\nis going to be our router,\n\n1173\n01:08:37,060 --> 01:08:38,570\nwe would go into that interface.\n\n1174\n01:08:38,570 --> 01:08:43,340\nAnd we would say,\nswitch port mode private-vlan promiscuous.\n\n1175\n01:08:43,340 --> 01:08:45,570\nSo now,\nit's going to be able to see everything.\n\n1176\n01:08:45,570 --> 01:08:48,095\nAnd then we assign it,\nwe say host association.\n\n1177\n01:08:48,095 --> 01:08:52,880\n10 for the primary VLAN, oh, actually,\nyou know what, I did 11 up here.\n\n1178\n01:08:52,880 --> 01:08:55,490\nI've got a typo in my config, there.\n\n1179\n01:08:55,490 --> 01:09:00,570\nSo we would say, 11 for the primary VLAN,\nand then we specify our secondary VLAN.\n\n1180\n01:09:00,570 --> 01:09:04,010\nAnd this one I'm putting in 110,\nwhich is tied to that community.\n\n1181\n01:09:04,010 --> 01:09:06,120\nBut, you know, for your promiscuous port,\nit doesn't really matter,\n\n1182\n01:09:06,120 --> 01:09:08,380\nbecause it's promiscuous,\nit can talk to all of them.\n\n1183\n01:09:08,380 --> 01:09:13,140\nBut the other ones, I took port 10,\nand for its sub VLAN,\n\n1184\n01:09:13,140 --> 01:09:17,380\nI tied it to 111,\nwhich is the isolated VLAN.\n\n1185\n01:09:17,380 --> 01:09:22,900\nThis computer on port gigabit 5/10,\nit will be able to see,\n\n1186\n01:09:22,900 --> 01:09:25,310\nand talk to the router,\nbecause it's promiscuous, and that's it.\n\n1187\n01:09:25,310 --> 01:09:27,520\nIt won't be able to talk to anyone else.\n\n1188\n01:09:27,520 --> 01:09:31,440\nThis other port though,\n5/11, its sub-VLAN is 110.\n\n1189\n01:09:31,440 --> 01:09:37,122\nAnd so it will be able to talk\nto other people in sub-VLAN 110,\n\n1190\n01:09:37,122 --> 01:09:39,600\nand the promiscuous port on the router,\nto get out.\n\n1191\n01:09:39,600 --> 01:09:41,920\nBut it won't be able to talk\nto this other guy here.\n\n1192\n01:09:41,920 --> 01:09:46,060\nWe're effectively dicing up that VLAN,\nand allowing some communications,\n\n1193\n01:09:46,060 --> 01:09:47,340\nand disallowing others.\n\n1194\n01:09:47,340 --> 01:09:51,530\nAnd because it's done by physical port,\nthe only way to defeat this, is to go, and\n\n1195\n01:09:51,530 --> 01:09:52,690\nmove the cables.\n\n1196\n01:09:52,690 --> 01:09:54,470\n>> Yeah.\n>> So if you have good physical security,\n\n1197\n01:09:54,470 --> 01:09:58,820\nthis will completely isolate those hosts,\nand this is a very common practice.\n\n1198\n01:10:00,010 --> 01:10:02,020\nYou see this, like broadband providers.\n\n1199\n01:10:02,020 --> 01:10:03,090\nSo if you have DSL or\n\n1200\n01:10:03,090 --> 01:10:06,090\ncable, you're sharing a network\nwith all the other customers.\n\n1201\n01:10:06,090 --> 01:10:09,170\nBut you can't talk to the customers,\nor at least you shouldn't be able to.\n\n1202\n01:10:09,170 --> 01:10:12,180\nSo they're using technologies,\njust like this to prevent it.\n\n1203\n01:10:12,180 --> 01:10:15,610\nAll right, just remember the first step,\nis to make sure, your switch supports it,\n\n1204\n01:10:15,610 --> 01:10:16,600\nnot every switch does.\n\n1205\n01:10:16,600 --> 01:10:19,890\nTo turn it on, you issue the feature,\nprivate-vlan command.\n\n1206\n01:10:19,890 --> 01:10:20,930\nIt's a little tricky.\n\n1207\n01:10:20,930 --> 01:10:24,810\nI told Ronnie, I'm pretty sure our\nswitch here doesn't support it, so\n\n1208\n01:10:24,810 --> 01:10:29,783\nI remoted into our switch, and,let\n\n1209\n01:10:29,783 --> 01:10:33,750\nme just get connected to this,\nit's a 4506.\n\n1210\n01:10:33,750 --> 01:10:37,300\nIt's not a 4506e which\nis the newest version.\n\n1211\n01:10:37,300 --> 01:10:39,950\nAnd so I went into config, and I said,\n\n1212\n01:10:39,950 --> 01:10:45,010\nfeature question mark, oh, the command\nis not there, we must not support it.\n\n1213\n01:10:45,010 --> 01:10:48,969\nWell, that's not always true,\nin the textbooks, they'll say,\n\n1214\n01:10:48,969 --> 01:10:54,050\nissue the feature private-VLAN command,\nthat's what turns all this on.\n\n1215\n01:10:54,050 --> 01:10:59,880\nOkay, well my switch doesn't have\nthat command, because the feature\n\n1216\n01:10:59,880 --> 01:11:03,170\nis turned on by default, it's already\nthere, the command doesn't even exist.\n\n1217\n01:11:03,170 --> 01:11:06,730\nSo there is a little bit of\nvariation from switch to switch.\n\n1218\n01:11:06,730 --> 01:11:08,560\nBut on this switch,\nit's all ready turned on.\n\n1219\n01:11:08,560 --> 01:11:12,410\nAnd I know it's already on, because if\nI look at some of these other commands,\n\n1220\n01:11:12,410 --> 01:11:19,740\nlike creating the VLANs and stuff,\nif I go in, and I say, VLAN 11,\n\n1221\n01:11:19,740 --> 01:11:23,950\nprivate VLAN primary, here it goes.\n\n1222\n01:11:23,950 --> 01:11:27,240\nPrivate VLANs can only be configured\nwhen VTB is in transparent or off mode.\n\n1223\n01:11:27,240 --> 01:11:29,320\nI guess, I have VTB turned on.\n\n1224\n01:11:29,320 --> 01:11:30,900\nSo it's gonna stop me from making it.\n\n1225\n01:11:30,900 --> 01:11:35,480\nBut, I can see that I have support for\nthat private VLAN.\n\n1226\n01:11:35,480 --> 01:11:37,290\nSo, just because that command isn't there,\n\n1227\n01:11:37,290 --> 01:11:38,910\ndoesn't necessarily mean\nthat it isn't gonna work.\n\n1228\n01:11:38,910 --> 01:11:40,630\nSo double check that on your switch.\n\n1229\n01:11:44,400 --> 01:11:47,120\nOh, I probably need to get rid of that\nVLAN, or somebody is gonna ask me later,\n\n1230\n01:11:47,120 --> 01:11:48,102\nwhy do we have VLAN 11?\n\n1231\n01:11:48,102 --> 01:11:50,933\n>> [LAUGH]\n>> And I'll say, I don't know,\n\n1232\n01:11:50,933 --> 01:11:51,904\nsome reason.\n\n1233\n01:11:51,904 --> 01:11:55,723\n[LAUGH] All right, so just keep that in\nmind, but the configuration is fairly\n\n1234\n01:11:55,723 --> 01:11:58,960\nstraightforward, the hard part\nis remembering what's what.\n\n1235\n01:11:58,960 --> 01:12:02,465\nAll of this community and isolated part\nand stuff, you don't necessarily need.\n\n1236\n01:12:02,465 --> 01:12:04,276\nThe default is.\n\n1237\n01:12:04,276 --> 01:12:06,813\nEach host can only see\nthe promiscuous port,\n\n1238\n01:12:06,813 --> 01:12:11,180\nso if you just stop right there,\nyou're pretty much in business.\n\n1239\n01:12:11,180 --> 01:12:13,740\nBut if you want the real power,\nyou bring in communities and\n\n1240\n01:12:13,740 --> 01:12:16,950\nthat's where you can tie multiple\nports together, which is kinda\n\n1241\n01:12:16,950 --> 01:12:21,440\nwhat I was illustrating in this example,\nwhere we just go through and decimate.\n\n1242\n01:12:21,440 --> 01:12:23,750\nThese ports are all gonna\nbe in one community.\n\n1243\n01:12:23,750 --> 01:12:25,910\nI put them all in VLAN 110,\n\n1244\n01:12:25,910 --> 01:12:29,530\nis their sub VLAN,\nversus other ports that might be isolated.\n\n1245\n01:12:29,530 --> 01:12:31,998\nSo, it gives you that best of both worlds.\n\n1246\n01:12:31,998 --> 01:12:34,960\nIf you wanna read more about it,\nthere's a great page on Cisco's site,\n\n1247\n01:12:34,960 --> 01:12:38,210\nI've got it right here in the notes,\nI'll post this to the website.\n\n1248\n01:12:38,210 --> 01:12:41,410\nAnd the page I'm linking is for\nthe Nexus Series switches,\n\n1249\n01:12:41,410 --> 01:12:44,110\nthe really high end ones, but that's okay.\n\n1250\n01:12:44,110 --> 01:12:47,550\nIt's really the same like you saw for\nme on the 4500s,\n\n1251\n01:12:47,550 --> 01:12:50,510\nbut you can go through and\ndo that configuration.\n\n1252\n01:12:50,510 --> 01:12:53,270\nBut they have a nice little\ndiagram that kind of breaks down\n\n1253\n01:12:53,270 --> 01:12:55,480\nwhat a isolated versus a community.\n\n1254\n01:12:55,480 --> 01:12:59,040\nSee how these guys will be able to see\neach other, this guy's all by himself.\n\n1255\n01:12:59,040 --> 01:13:00,820\nThat's what we're defining\nwith those private VLANs.\n\n1256\n01:13:02,790 --> 01:13:04,650\nSo, that's what they're talking about.\n\n1257\n01:13:04,650 --> 01:13:08,960\nOn the exam, unlikely that you would\nhave to configure that at all.\n\n1258\n01:13:08,960 --> 01:13:10,910\nThey want you to be\nfamiliar with the concept.\n\n1259\n01:13:10,910 --> 01:13:15,443\nThe idea what is a private VLAN, what is a\nVLAN access list and how they can be used,\n\n1260\n01:13:15,443 --> 01:13:18,024\nand so\nthat's basically the run down on them.\n\n1261\n01:13:18,024 --> 01:13:20,113\n>> Yeah.\n\n1262\n01:13:20,113 --> 01:13:23,026\n>> Well, Ronnie,\nI think as far as access control lists go,\n\n1263\n01:13:23,026 --> 01:13:24,990\nthat pretty much covers it all.\n\n1264\n01:13:24,990 --> 01:13:25,890\n>> Sure does.\n\n1265\n01:13:25,890 --> 01:13:29,250\n>> My biggest piece of advice\nto the viewers is practice.\n\n1266\n01:13:29,250 --> 01:13:30,910\n>> Yup.\n>> The more you work with them,\n\n1267\n01:13:30,910 --> 01:13:34,970\nthe more the commands become second nature\nand it just becomes natural to you.\n\n1268\n01:13:34,970 --> 01:13:37,630\nYou do them without thought.\n\n1269\n01:13:37,630 --> 01:13:41,440\n>> Best practice, again, remember, is that\nmost of us, when we start doing this,\n\n1270\n01:13:41,440 --> 01:13:45,370\nwe write it out beforehand,\nbefore implementing it on real equipment.\n\n1271\n01:13:45,370 --> 01:13:48,540\nSo, that way,\nyou can test out the logic first.\n\n1272\n01:13:48,540 --> 01:13:50,330\nAnd then, view the syntax, and\n\n1273\n01:13:50,330 --> 01:13:52,397\nsee if you've got anything\nwrong before implementing it.\n\n1274\n01:13:54,960 --> 01:13:56,610\n>> Well, ladies and gentlemen, as always,\n\n1275\n01:13:56,610 --> 01:13:59,520\nif you have any questions,\nlive during the show you can tune in,\n\n1276\n01:13:59,520 --> 01:14:04,410\ngo to itpro.tv/live, post your\nquestions there and we'll answer.\n\n1277\n01:14:04,410 --> 01:14:07,930\nIf you have questions after the show,\non any ITProTV website,\n\n1278\n01:14:07,930 --> 01:14:11,200\nthere's a link at the top that says Q&A,\nit'll take you to the Q&A section,\n\n1279\n01:14:11,200 --> 01:14:15,110\nyou can post your questions, and\nwe'll answer them, just not live.\n\n1280\n01:14:15,110 --> 01:14:17,145\nSo, it's always there and available.\n\n1281\n01:14:17,145 --> 01:14:20,730\nACLs are probably the more\nchallenging part of the exam, but\n\n1282\n01:14:20,730 --> 01:14:25,290\njust keep in mind that it is only 8% of\nthe exam, so it's a small percentage.\n\n1283\n01:14:25,290 --> 01:14:28,670\nBut every percent counts so\nyou want to get these right if possible.\n\n1284\n01:14:28,670 --> 01:14:31,470\nDon't neglect to learn the command\nline interface for this one.\n\n1285\n01:14:31,470 --> 01:14:34,190\nIt is tempting to just\nuse the GUI [INAUDIBLE].\n\n1286\n01:14:34,190 --> 01:14:35,960\nBut definitely, learn both ways.\n\n1287\n01:14:37,150 --> 01:14:38,870\nSo, I hope you guys enjoyed the show.\n\n1288\n01:14:38,870 --> 01:14:41,520\nSigning off for ITProTV, I'm Don Pezet.\n\n1289\n01:14:41,520 --> 01:14:42,410\n>> And I'm Ronnie Wong.\n\n1290\n01:14:42,410 --> 01:14:43,797\n>> And we'll see you next time.\n\n1291\n01:14:43,797 --> 01:14:53,797\n[MUSIC]\n\n1292\n01:14:56,034 --> 01:14:56,534\n[SOUND]\n\n",
          "vimeoId": "85925381"
        }
      ],
      "title": "IOS ACLs"
    },
    {
      "episodes": [
        {
          "description": "There are many ways one can manage and secure their system and it is important one protects access to their routers, makes sure all management traffic is protected and the reports that come out as well are protected. Viewers will hear discussions on techniques and protocols used for managing Cisco routers, differences between the secure and non-secure protocols and draw attention to best practices for network management.",
          "length": "5559",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/iins/007-Network-Management-and-Reporting.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/iins/007-Network-Management-and-Reporting-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/iins/007-Network-Management-and-Reporting-sm.jpg",
          "title": "Network Management and Reporting",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:15,450 --> 00:00:22,671\n[SOUND]\n\n3\n00:00:22,671 --> 00:00:32,671\n[MUSIC]\n\n4\n00:00:34,838 --> 00:00:35,671\nAll right.\nGood morning, good afternoon, and\n\n5\n00:00:35,671 --> 00:00:36,361\ngood evening and welcome back.\n\n6\n00:00:37,690 --> 00:00:39,110\nTo another episode of ITProTV.\n\n7\n00:00:39,110 --> 00:00:40,390\nI'm your host Don Pezet.\n\n8\n00:00:40,390 --> 00:00:41,580\nToday with Mr. Ronnie Wong.\n\n9\n00:00:41,580 --> 00:00:42,760\nHow's it going Ronnie?\n\n10\n00:00:42,760 --> 00:00:44,450\n>> I'm doing a little bit sad today.\n\n11\n00:00:44,450 --> 00:00:47,900\nI've not yet received my Olympic\ngold medal for anything.\n\n12\n00:00:47,900 --> 00:00:49,970\n>> Now which event are you competing in?\n\n13\n00:00:49,970 --> 00:00:53,398\nIs it men's paired free sail?\n\n14\n00:00:53,398 --> 00:00:54,039\nOr-\n>> Yes.\n\n15\n00:00:54,039 --> 00:00:57,010\n>> [LAUGH]\n>> [LAUGH] I compete in all of them.\n\n16\n00:00:57,010 --> 00:00:58,050\nI just don't win any of them.\n\n17\n00:00:58,050 --> 00:00:59,300\n>> Synchronized solitaire?\n\n18\n00:00:59,300 --> 00:01:00,360\n>> Synchronized solitaire.\n\n19\n00:01:00,360 --> 00:01:01,580\nThat's right.\n\n20\n00:01:01,580 --> 00:01:03,250\n>> [LAUGH] All the good sports are gone.\n\n21\n00:01:03,250 --> 00:01:05,770\n>> The Flappy Birds is gone.\n\n22\n00:01:05,770 --> 00:01:08,190\nAnd so-\n>> Oh, talk about sad news.\n\n23\n00:01:08,190 --> 00:01:09,670\n>> Yeah, I'm toasted.\n\n24\n00:01:09,670 --> 00:01:10,710\n>> I know.\nI felt so bad.\n\n25\n00:01:10,710 --> 00:01:13,570\nI didn't get the chance to\nexperience Flappy Birds.\n\n26\n00:01:13,570 --> 00:01:15,000\n>> Yeah.\n>> Because like most people,\n\n27\n00:01:15,000 --> 00:01:16,968\nI looked at it and\nthought that was Inane and.\n\n28\n00:01:16,968 --> 00:01:18,130\n[LAUGH]\n>> And\n\n29\n00:01:18,130 --> 00:01:23,040\nmy daughter scored like,\nan insane 98 of able to get through.\n\n30\n00:01:23,040 --> 00:01:23,820\n>> Well, there you go.\nThat's.\n\n31\n00:01:23,820 --> 00:01:25,100\n>> Yeah.\n\n32\n00:01:25,100 --> 00:01:25,970\nThat is silly.\n\n33\n00:01:25,970 --> 00:01:29,110\n>> Well, speaking of incredibly\ndifficult things, right,\n\n34\n00:01:29,110 --> 00:01:33,050\nlet's talk about things that are, well,\nI guess not incredibly difficult.\n\n35\n00:01:33,050 --> 00:01:35,940\nIn the last episode,\nif you're watching these chronologically.\n\n36\n00:01:35,940 --> 00:01:38,670\nIf not,\nyou have no idea what I'm talking about.\n\n37\n00:01:38,670 --> 00:01:43,550\nBut if you're watching chronologically,\nour last episode was access control lists.\n\n38\n00:01:43,550 --> 00:01:47,010\nAnd we got to see how to filter traffic\nlike through the router and stuff.\n\n39\n00:01:47,010 --> 00:01:49,755\nAnd we did get a little\nbit ahead of ourselves.\n\n40\n00:01:49,755 --> 00:01:50,255\n>> Mm-hm.\n>> I suppose.\n\n41\n00:01:50,255 --> 00:01:52,900\nCuz we ended the show talking about\n\n42\n00:01:52,900 --> 00:01:54,130\nACLs in weird places.\n\n43\n00:01:54,130 --> 00:01:56,740\n>> Yeah.\n>> We talked about ACLs on your VTY\n\n44\n00:01:56,740 --> 00:01:58,680\nlines and in other areas.\n\n45\n00:01:58,680 --> 00:02:03,180\nWell, that kind of jumped\nover into our next objective,\n\n46\n00:02:03,180 --> 00:02:04,880\nwhich is what we're gonna get into now.\n\n47\n00:02:04,880 --> 00:02:08,060\nSecure network management and reporting.\n\n48\n00:02:08,060 --> 00:02:12,960\nSo when we set up things like SSH and\ntelnet access into our router.\n\n49\n00:02:12,960 --> 00:02:15,260\nWhen we setup the web server access,\n\n50\n00:02:15,260 --> 00:02:20,440\nwhen we set up SNMP all those things,\nwe can use ACLs to protect them.\n\n51\n00:02:20,440 --> 00:02:22,360\nWe can also use some other\ntechnologies that are in there,\n\n52\n00:02:22,360 --> 00:02:24,442\nand that's kind of what this\nobjective is all about.\n\n53\n00:02:24,442 --> 00:02:28,350\nWe're gonna take a look at some of those\ndifferent ways we can manage our system\n\n54\n00:02:28,350 --> 00:02:30,160\nand what we can do to secure it.\n\n55\n00:02:30,160 --> 00:02:32,520\n>> A lot of times as data is\nmoving through our notes,\n\n56\n00:02:32,520 --> 00:02:36,040\nwe think about the idea of protecting\nthe data as it's going through,\n\n57\n00:02:36,040 --> 00:02:40,850\nbut all the stuff that we do to secure\nit in terms of management traffic,\n\n58\n00:02:40,850 --> 00:02:43,850\nwe need to make sure that we\ndon't forget that either.\n\n59\n00:02:43,850 --> 00:02:47,190\nBut there's a lot of times where we get\nthe most information that we can use for\n\n60\n00:02:47,190 --> 00:02:49,890\nanalysis and\nmake good decisions in the future for\n\n61\n00:02:49,890 --> 00:02:51,630\nall the things that we need to do.\n\n62\n00:02:51,630 --> 00:02:54,950\nSo we need to be able to protect\nthe access, of course, to the routers.\n\n63\n00:02:54,950 --> 00:02:58,000\nWe need to make sure that all of our\nmanagement traffic is protected, and\n\n64\n00:02:58,000 --> 00:03:01,170\nthat the reports that come out,\nonce again, are protected as well.\n\n65\n00:03:01,170 --> 00:03:04,760\nSo there's a lot of different things for\nus to make sure that we cover, and\n\n66\n00:03:04,760 --> 00:03:06,490\nit's not gonna hurt us that\nwe've covered them again.\n\n67\n00:03:06,490 --> 00:03:09,640\nWe want to make sure that\nwe take a look at that.\n\n68\n00:03:09,640 --> 00:03:11,490\n>> I had a teacher in\ncollege beat it in my head,\n\n69\n00:03:11,490 --> 00:03:15,640\nhis saying was repetition\nleads to retention.\n\n70\n00:03:15,640 --> 00:03:16,140\n>> Yeah.\n>> Right.\n\n71\n00:03:16,140 --> 00:03:16,880\nSo the more you\n\n72\n00:03:16,880 --> 00:03:18,410\nsee things the better you can retain them.\n\n73\n00:03:18,410 --> 00:03:23,290\nAll right, so Objective 5 is,\nSecure Network Management and Reporting.\n\n74\n00:03:23,290 --> 00:03:29,010\nAnd Objective 5.1 is just describe\nsecure network management.\n\n75\n00:03:29,010 --> 00:03:32,530\nSo, it's not even implementing it, which\nwe've, kind of, already showed you how,\n\n76\n00:03:32,530 --> 00:03:36,380\nbut just describing it, understanding\nthat concept, and then implementing it,\n\n77\n00:03:36,380 --> 00:03:40,130\nyou'll see Objective 5.2,\nimplementing secure network management.\n\n78\n00:03:40,130 --> 00:03:45,180\nAnd that's where it's, actually,\nhow to secure all these various things.\n\n79\n00:03:45,180 --> 00:03:49,020\nAnd, I love how they list them all\nas separate little entities here.\n\n80\n00:03:49,020 --> 00:03:52,380\nBut the majority of them\nare all done the same way, so\n\n81\n00:03:52,380 --> 00:03:55,190\nit's not like to we have to jump through\na lot of hoops, and if you're doing one,\n\n82\n00:03:55,190 --> 00:03:58,440\nyou pretty much have to do some of the\nothers so it all kind of ties together.\n\n83\n00:03:58,440 --> 00:04:01,550\n>> So, it's a good thing that we talked\nabout these first two topics that we just\n\n84\n00:04:01,550 --> 00:04:02,600\nshowed here.\n\n85\n00:04:02,600 --> 00:04:04,740\nReally right at the beginning,\nthe idea what we call.\n\n86\n00:04:04,740 --> 00:04:08,680\nInbound and out of band inbound.\n\n87\n00:04:08,680 --> 00:04:10,560\nInbound is basketball I think.\n\n88\n00:04:10,560 --> 00:04:15,600\nIn band and out of band management\nright here at the beginning.\n\n89\n00:04:15,600 --> 00:04:20,530\n>> Yeah, so, when we setup our router\non the show, on the last show, we were\n\n90\n00:04:20,530 --> 00:04:22,770\ndoing what's called in-band management\n>> Right\n\n91\n00:04:22,770 --> 00:04:24,000\n>> And that means we were manning the\n\n92\n00:04:24,000 --> 00:04:30,300\nrouter based on the IP addresses and stuff\nthat were assigned to the router itself.\n\n93\n00:04:30,300 --> 00:04:31,770\nSo for example,\n\n94\n00:04:31,770 --> 00:04:35,038\nI guess I could have whipped up\nsome kind of network diagram here.\n\n95\n00:04:35,038 --> 00:04:37,060\n>> [LAUGH]\n>> Let's see if I got one laying around.\n\n96\n00:04:37,060 --> 00:04:38,420\nLet's tackle this guy.\n\n97\n00:04:42,070 --> 00:04:42,700\nAll right.\n\n98\n00:04:42,700 --> 00:04:48,400\nSo here's the little kind of lab\nthat we were using in the last show.\n\n99\n00:04:48,400 --> 00:04:52,840\nAnd I'm gonna change this, let me do this.\n\n100\n00:04:52,840 --> 00:04:55,350\nWe'll do an all new tab here.\n\n101\n00:04:55,350 --> 00:04:57,540\nCause that's the level of\nservice I try and provide.\n\n102\n00:04:57,540 --> 00:04:59,220\nAnd we'll just get rid of all of this.\n\n103\n00:04:59,220 --> 00:05:03,550\nOkay, so this is an example I've\ngot a couple of routers and\n\n104\n00:05:03,550 --> 00:05:06,020\na couple of networks in place and stuff.\n\n105\n00:05:06,020 --> 00:05:10,080\nAnd let's just pretend for\na moment here that like router A,\n\n106\n00:05:10,080 --> 00:05:14,915\nthat's gonna be my private LAN.\n\n107\n00:05:14,915 --> 00:05:16,380\nOkay?\n\n108\n00:05:16,380 --> 00:05:22,340\nAnd then maybe I've got like,\na research LAN.\n\n109\n00:05:22,340 --> 00:05:25,050\nSo I've got a separate network over there.\n\n110\n00:05:25,050 --> 00:05:30,210\nAnd then maybe over here I've got the,\nlet's just say this is like, internet.\n\n111\n00:05:31,860 --> 00:05:32,700\nRight?\nAnd so I'm not even\n\n112\n00:05:32,700 --> 00:05:33,660\ngonna put an IP range in that.\n\n113\n00:05:33,660 --> 00:05:35,990\nThat could be darn near anything.\n\n114\n00:05:35,990 --> 00:05:39,680\nAnd so I've got kind of a network\nthat's laid out like this.\n\n115\n00:05:39,680 --> 00:05:40,460\nAll right?\n\n116\n00:05:40,460 --> 00:05:45,060\nAnd we could go a little further and\nsay like, this was a DMZ or something.\n\n117\n00:05:45,060 --> 00:05:47,720\nIn fact, I'm just gonna rename\nthat just to make it a little more\n\n118\n00:05:50,510 --> 00:05:53,030\nconsistent with what we\nmight have in real life LAN.\n\n119\n00:05:53,030 --> 00:05:58,930\nAll right, so\nlet's say that we had a network like this.\n\n120\n00:05:58,930 --> 00:05:59,670\nOkay?\n\n121\n00:05:59,670 --> 00:06:04,270\nWell, when we implemented it, we were\non our private network 192.162.1.0 and\n\n122\n00:06:04,270 --> 00:06:07,570\nthen it takes you out to the internet.\n\n123\n00:06:07,570 --> 00:06:13,930\nAnd there were IP addresses that were\nassigned to the interface of the router.\n\n124\n00:06:13,930 --> 00:06:17,490\nAnd we were just firing up our Cisco\nconfiguration professional, or\n\n125\n00:06:17,490 --> 00:06:23,760\nour SSH client, or whatever, and\nconnecting directly to that interface.\n\n126\n00:06:23,760 --> 00:06:24,480\nOK?\n\n127\n00:06:24,480 --> 00:06:26,560\nAnd when you do that, that's the easiest.\n\n128\n00:06:26,560 --> 00:06:29,650\nYou know, you're just connecting right\nto the interface of that router and\n\n129\n00:06:29,650 --> 00:06:32,550\nworking with and doing whatever you need.\n\n130\n00:06:32,550 --> 00:06:38,320\nThe problem there is that\neverybody on your private network\n\n131\n00:06:38,320 --> 00:06:42,900\ncan see that IP address,\ncan ping it, can try and access it.\n\n132\n00:06:42,900 --> 00:06:49,070\nAnd your DMZ, well it can access\nthe IP address on that interface and\n\n133\n00:06:49,070 --> 00:06:53,740\npeople out here on the internet and\noutside, they can see this IP,\n\n134\n00:06:53,740 --> 00:06:58,190\nbecause it's part of the path to be\nable to get through those networks.\n\n135\n00:06:58,190 --> 00:07:01,910\nIf we manage using those IP addresses,\nthe IP addresses\n\n136\n00:07:01,910 --> 00:07:06,200\non the router interfaces themselves,\nthat's called in band management.\n\n137\n00:07:06,200 --> 00:07:08,030\nWe are in the band of traffic.\n\n138\n00:07:08,030 --> 00:07:11,260\nWe're using the same\ninterfaces that traffic uses\n\n139\n00:07:11,260 --> 00:07:12,720\nwhen passing through our router.\n\n140\n00:07:12,720 --> 00:07:13,350\nRight?\n\n141\n00:07:13,350 --> 00:07:15,010\nNow, while this is fine, for\n\n142\n00:07:15,010 --> 00:07:19,080\nmost environments,\nin a high security environment.\n\n143\n00:07:19,080 --> 00:07:22,540\nFor example, if we take this router here,\n\n144\n00:07:22,540 --> 00:07:25,790\nthe one that's connected to the internet,\nright?\n\n145\n00:07:25,790 --> 00:07:30,960\nWell, anybody on the internet, has to be\nable to connect to that interface, or\n\n146\n00:07:30,960 --> 00:07:33,320\nthey won't be able to get through\nto our internal networks.\n\n147\n00:07:33,320 --> 00:07:38,780\nSo that is a very public interface\nthat is somewhat dangerous.\n\n148\n00:07:38,780 --> 00:07:42,370\nThen some internet traffic, maybe not all\nbecause we're probably filtering, but\n\n149\n00:07:42,370 --> 00:07:46,260\nsome internet traffic is going to be\nallowed to pass through the router.\n\n150\n00:07:46,260 --> 00:07:50,336\nSo we are exposed to risk on\nboth of those interfaces.\n\n151\n00:07:50,336 --> 00:07:52,583\nBoth those interfaces\nare somewhat dangerous to us.\n\n152\n00:07:52,583 --> 00:07:56,589\nSo a more secure solution in\na high security environment\n\n153\n00:07:56,589 --> 00:08:00,519\nIs to implement what is called\nout of band management.\n\n154\n00:08:00,519 --> 00:08:05,807\nAn out of band management is\nwhere we have dedicated network\n\n155\n00:08:05,807 --> 00:08:11,810\ninterfaces that are just used for\nmanagement and that's it.\n\n156\n00:08:11,810 --> 00:08:15,750\nAnd as soon as Visio will let me,\nthere we go Let me do this.\n\n157\n00:08:15,750 --> 00:08:19,350\nWhat I'm going to do, is I'm going to\ntake these routers and move them down.\n\n158\n00:08:19,350 --> 00:08:22,510\nAnd, let's say,\nwe implement another network.\n\n159\n00:08:22,510 --> 00:08:23,100\nRight?\n\n160\n00:08:23,100 --> 00:08:25,314\nAnd this is going to be our.\n\n161\n00:08:25,314 --> 00:08:31,610\n>> Management.\n>> Our management land, yeah.\n\n162\n00:08:31,610 --> 00:08:35,100\nAnd, so I'll just assign\nanother IP range to it, right.\n\n163\n00:08:35,100 --> 00:08:37,169\nAnd, on our routers.\n\n164\n00:08:39,300 --> 00:08:40,240\nWe can go in here.\n\n165\n00:08:41,680 --> 00:08:43,360\nOh, you know Visio.\n\n166\n00:08:43,360 --> 00:08:46,520\nVisio and I have a love-hate relationship.\n\n167\n00:08:46,520 --> 00:08:50,300\nActually, it's really more of a hate,\nI suppose.\n\n168\n00:08:50,300 --> 00:08:51,990\nIt works okay for me sometimes.\n\n169\n00:08:54,180 --> 00:08:56,540\nAll right, but basically we can have this.\n\n170\n00:08:58,250 --> 00:09:02,490\nThis special network that's available for\n\n171\n00:09:02,490 --> 00:09:07,210\nus, that is just used for\nmanagement, and that's it.\n\n172\n00:09:07,210 --> 00:09:11,440\nIt's not used for\nanything else just straight up management,\n\n173\n00:09:11,440 --> 00:09:15,108\ngets people connected gets them where\nthey can work with it and so on.\n\n174\n00:09:15,108 --> 00:09:16,477\nThere we go.\n\n175\n00:09:16,477 --> 00:09:19,010\nThat's a little bit better.\n\n176\n00:09:19,010 --> 00:09:25,970\nAs a network admin, I might have a PC\nthat is up here on the management lan.\n\n177\n00:09:25,970 --> 00:09:28,050\nThat's my station where I sit.\n\n178\n00:09:28,050 --> 00:09:29,470\nI'm on the 192.168.3 network.\n\n179\n00:09:29,470 --> 00:09:32,490\nI have, or more likely,\nI have two network cards in my computer.\n\n180\n00:09:32,490 --> 00:09:35,160\nOne that is connected to\nthe radio network and\n\n181\n00:09:35,160 --> 00:09:37,870\nan other one that is\non the management lan.\n\n182\n00:09:37,870 --> 00:09:40,290\nAnd then via that Management LAN,\nI can connect and manage Router A.\n\n183\n00:09:40,290 --> 00:09:46,150\nI can connect and manage Router B, but\n\n184\n00:09:46,150 --> 00:09:50,860\nthe other interfaces, this guy and\nthis guy and this guy and this.\n\n185\n00:09:50,860 --> 00:09:57,330\nThis guy and this guy, are all set to\ncompletely refuse admin connections,\n\n186\n00:09:57,330 --> 00:10:01,750\nright, that you cannot connect and\nmanage devices via those interfaces.\n\n187\n00:10:01,750 --> 00:10:06,030\nYou either pass through the router or you\ndon't pass at all and that's it, right?\n\n188\n00:10:06,030 --> 00:10:10,440\nThis is called out of band management\nbecause now we're managing\n\n189\n00:10:10,440 --> 00:10:14,620\nthe interfaces that are not\nin the path of traffic.\n\n190\n00:10:14,620 --> 00:10:16,240\nWe are out of the band of traffic.\n\n191\n00:10:18,350 --> 00:10:22,030\nNow, there's some challenges\nwith implementing this, right?\n\n192\n00:10:22,030 --> 00:10:23,700\nThe biggest challenge is cost, right?\n\n193\n00:10:23,700 --> 00:10:27,310\nYou're going to need extra\ninterfaces to do this.\n\n194\n00:10:27,310 --> 00:10:29,150\n>> Right.\n>> If you do like VLAN's.\n\n195\n00:10:29,150 --> 00:10:29,660\nWhich.\n>> Hm-mm.\n\n196\n00:10:29,660 --> 00:10:31,510\n>> Do they call it VLAN's\nin the objectives?\n\n197\n00:10:32,510 --> 00:10:33,950\n>> Nope.\n>> They don't.\n\n198\n00:10:33,950 --> 00:10:35,775\n>> Yeah.\n>> But if you do VLAN's.\n\n199\n00:10:35,775 --> 00:10:36,290\n>> Hm-mm.\n\n200\n00:10:36,290 --> 00:10:37,780\n>> That's a virtual interface.\n\n201\n00:10:37,780 --> 00:10:40,861\nWe could take a physical interface and\nbreak it up into virtual sub-interfaces.\n\n202\n00:10:40,861 --> 00:10:42,880\n>> Hm-mm.\n>> And go that route.\n\n203\n00:10:42,880 --> 00:10:43,476\n>> Route.\n[LAUGH].\n\n204\n00:10:43,476 --> 00:10:44,300\n>> There we go.\n\n205\n00:10:44,300 --> 00:10:47,820\nBut if we go that way,\nwe're still under risk.\n\n206\n00:10:47,820 --> 00:10:49,780\nSomebody could do a VLAN\nhopping attack and\n\n207\n00:10:49,780 --> 00:10:51,520\nthey could hop onto your management VLAN.\n\n208\n00:10:51,520 --> 00:10:53,520\nSo this is really intended to be a.\n\n209\n00:10:57,255 --> 00:10:59,375\nIf I could remember how to use my tools.\n\n210\n00:10:59,375 --> 00:11:04,065\nThis is intended to be a completely\nseparate physical network.\n\n211\n00:11:04,065 --> 00:11:07,595\nYou do not share any cables,\nyou do not share any switches,\n\n212\n00:11:07,595 --> 00:11:09,710\nyou do not share any interfaces.\n\n213\n00:11:09,710 --> 00:11:14,010\nNo VLAN's, this is separate equipment,\ncompletely isolated.\n\n214\n00:11:14,010 --> 00:11:19,890\nThis way there is no way an attacker\ncould gain access to the router,\n\n215\n00:11:19,890 --> 00:11:21,900\nor to this other router, or whatever.\n\n216\n00:11:21,900 --> 00:11:25,220\nAnd you don't just do these to routers,\nyou do all of your devices, your switches,\n\n217\n00:11:25,220 --> 00:11:27,940\nyour firewalls, your IPS devices.\n\n218\n00:11:27,940 --> 00:11:29,850\nAnd this is how you manage them.\n\n219\n00:11:29,850 --> 00:11:33,530\nSomebody would have to be physically\nplugged in to this network\n\n220\n00:11:33,530 --> 00:11:35,350\nin order to manage the devices.\n\n221\n00:11:36,700 --> 00:11:39,890\n>> And that does seem like an incredibly\nmore secure way to do things.\n\n222\n00:11:39,890 --> 00:11:41,250\nBut like you said, with the expense of it,\n\n223\n00:11:41,250 --> 00:11:44,150\nmost small companies are probably\ngonna kind of bawk at that.\n\n224\n00:11:44,150 --> 00:11:45,200\nWhereas big companies,\n\n225\n00:11:45,200 --> 00:11:48,640\nif they have some type of a regulation\nthat says they have to do this.\n\n226\n00:11:48,640 --> 00:11:52,740\nOr if they know that this is the only\nway for them to manage it securely.\n\n227\n00:11:52,740 --> 00:11:57,840\nNow lets say, Ronnie, that we are like,\nsuper security conscious.\n\n228\n00:11:57,840 --> 00:12:00,160\nAnd so,\nwe'll upgrade our network a little bit.\n\n229\n00:12:00,160 --> 00:12:04,760\nSo we put a physical firewall,\nbetween our router and the internet.\n\n230\n00:12:04,760 --> 00:12:09,900\nWe put another firewall in-between our\ninternet router, and our internal, right?\n\n231\n00:12:09,900 --> 00:12:13,190\nAnd you know in this,\nlet me change this a little bit.\n\n232\n00:12:13,190 --> 00:12:16,580\nIn this environment,\nI might have where this is a.\n\n233\n00:12:16,580 --> 00:12:20,410\nLike a research LAN and then my\n\n234\n00:12:22,110 --> 00:12:26,430\nnetwork in the middle that\nwould be more like my DMZ.\n\n235\n00:12:26,430 --> 00:12:32,480\nWhen you set up this way its called having\na bastion,well it's not a true bastion but\n\n236\n00:12:32,480 --> 00:12:33,610\nit's close.\n\n237\n00:12:33,610 --> 00:12:34,690\nBut we'll pretend.\n\n238\n00:12:34,690 --> 00:12:36,810\nSo, there.\n\n239\n00:12:36,810 --> 00:12:39,490\nSo, I'm gonna create this network here.\n\n240\n00:12:39,490 --> 00:12:42,350\nAnd, let me just change this guy.\n\n241\n00:12:42,350 --> 00:12:44,670\nTurn into here.\n\n242\n00:12:46,350 --> 00:12:48,478\nWe're just gonna re-design\nthe network real quick.\n\n243\n00:12:48,478 --> 00:12:54,534\n>> [LAUGH].\n\n244\n00:12:54,534 --> 00:12:58,270\nMove this guy here.\n\n245\n00:12:58,270 --> 00:12:59,870\nLike that, there we go.\n\n246\n00:12:59,870 --> 00:13:00,710\nOk.\n\n247\n00:13:00,710 --> 00:13:04,340\nSo now,\nwe're going to go like super secure.\n\n248\n00:13:04,340 --> 00:13:06,970\nOk?\nSo we go in and we invest and\n\n249\n00:13:06,970 --> 00:13:07,870\nsome firewalls.\n\n250\n00:13:07,870 --> 00:13:11,170\nWe put a firewall between us and\nthe internet.\n\n251\n00:13:11,170 --> 00:13:14,000\nAnd actually more realistically\nit would probably go here, right?\n\n252\n00:13:14,000 --> 00:13:17,920\nMost, let's say that internet\nconnection right there is at serial,\n\n253\n00:13:17,920 --> 00:13:19,160\nand it's a T1 or a T3.\n\n254\n00:13:19,160 --> 00:13:21,520\nWell, you can't really find\nfirewalls that have T1 and\n\n255\n00:13:21,520 --> 00:13:25,200\nT3 cards, so our first firewall\nis normally behind the router.\n\n256\n00:13:25,200 --> 00:13:29,200\nWhich means that router, boy it's out\nthere, it's outside the firewall,\n\n257\n00:13:29,200 --> 00:13:30,490\nit's in the danger zone.\n\n258\n00:13:30,490 --> 00:13:33,850\nSo if you're running the firewall\nfeature set on it, that helps.\n\n259\n00:13:33,850 --> 00:13:35,840\nBut otherwise it's a high-risk device.\n\n260\n00:13:35,840 --> 00:13:40,910\nSo we put a firewall behind that to help\ninsulate us, and then we've got our DMZ\n\n261\n00:13:40,910 --> 00:13:47,020\nand we probably stick another\nfirewall here, and it can be here or\n\n262\n00:13:47,020 --> 00:13:51,100\nit can be here kinda depending on what it\nis we're trying to achieve and depending\n\n263\n00:13:51,100 --> 00:13:56,360\non how we want that Research LAN to be\nhandled but you deploy multiple firewalls.\n\n264\n00:13:56,360 --> 00:13:56,990\nOkay?\n\n265\n00:13:56,990 --> 00:13:58,570\nWhen we do this,\n\n266\n00:13:58,570 --> 00:14:04,290\nnow our internet traffic that's coming\ninto the DMZ passes through one firewall.\n\n267\n00:14:04,290 --> 00:14:06,225\nAnd on that firewall,\nwe define all our various stuff.\n\n268\n00:14:06,225 --> 00:14:10,430\n>> Hm-mm.\n>> But on a completely separate firewall\n\n269\n00:14:10,430 --> 00:14:15,240\nwe now have a whole separate set\nof rules that governs traffic.\n\n270\n00:14:15,240 --> 00:14:18,350\nComing from the Internet\nto our internal network.\n\n271\n00:14:18,350 --> 00:14:24,700\nAnd where our firewall here might\nallow all sorts of access to the DMZ,\n\n272\n00:14:24,700 --> 00:14:30,620\nthe firewall over here will probably\nallow very, very little access.\n\n273\n00:14:30,620 --> 00:14:31,830\nOops, I pointed to the router.\n\n274\n00:14:31,830 --> 00:14:32,790\nI meant to point there.\n\n275\n00:14:32,790 --> 00:14:35,480\nProvide little access to\nthe internal network, if any at all.\n\n276\n00:14:35,480 --> 00:14:36,060\nProbably none.\n\n277\n00:14:36,060 --> 00:14:39,400\nIt would probably do just state\nfull connections and that's it.\n\n278\n00:14:39,400 --> 00:14:42,010\nIf we send a request out,\nwe allow the reply back in,\n\n279\n00:14:42,010 --> 00:14:45,390\nso that would be an extremely\nsecured firewall\n\n280\n00:14:45,390 --> 00:14:48,940\nversus the one over here that\nwould be a little less secure.\n\n281\n00:14:48,940 --> 00:14:49,570\nRight?\n\n282\n00:14:49,570 --> 00:14:56,780\nNow, If we have our management VLAN\nin place all right, and we are.\n\n283\n00:14:56,780 --> 00:14:58,210\nI guess I kind of need\nthose firewalls back.\n\n284\n00:14:59,710 --> 00:15:02,390\nAnd let me just add a little, oops.\n\n285\n00:15:03,565 --> 00:15:05,620\nThat's not quite what I wanted.\n\n286\n00:15:05,620 --> 00:15:09,795\n[LAUGH] All right so I'll pretend\nlike I know how to use this tool.\n\n287\n00:15:09,795 --> 00:15:10,805\nThere we go.\n\n288\n00:15:10,805 --> 00:15:15,445\nSo a firewall and a firewall and I add\nmanagement connections to these firewalls.\n\n289\n00:15:17,165 --> 00:15:20,995\nLets say that some how and\n\n290\n00:15:20,995 --> 00:15:25,080\nattacker manages to get\nInto the management VLAN.\n\n291\n00:15:25,080 --> 00:15:25,710\nOkay.\n\n292\n00:15:25,710 --> 00:15:30,090\nIf they can find a way to physically plug\nin into it or they can install some kind\n\n293\n00:15:30,090 --> 00:15:34,680\nof backdoor rootkit or whatever in your\ncomputer that has a separate network card\n\n294\n00:15:34,680 --> 00:15:38,140\ninto the management LAN, if they can\ngain access to that management LAN\n\n295\n00:15:38,140 --> 00:15:42,720\nthey can now gain access to all of\nthe equipment from one network.\n\n296\n00:15:42,720 --> 00:15:43,320\n>> Offices.\n\n297\n00:15:43,320 --> 00:15:46,600\n>> All right, so out of band management.\n\n298\n00:15:46,600 --> 00:15:48,469\n>> It's good, it's very secure, but\n\n299\n00:15:48,469 --> 00:15:52,209\nyou've got to be security focused when\nyou create something like this and\n\n300\n00:15:52,209 --> 00:15:55,846\nyou've got to make sure that management\nland is as secure as possible.\n\n301\n00:15:55,846 --> 00:15:59,051\nNo wireless, you know,\njust physical connections.\n\n302\n00:15:59,051 --> 00:16:02,371\nSecured, you know, the switches\nneed to be in locked data centers.\n\n303\n00:16:02,371 --> 00:16:03,589\nYou know in locked.\n\n304\n00:16:03,589 --> 00:16:06,866\nThe closets, and you need to make sure\nthat is the highest level of security\n\n305\n00:16:06,866 --> 00:16:10,470\npossible, cuz if the management LAN\ngets compromised, you're in big trouble.\n\n306\n00:16:12,360 --> 00:16:13,840\nSo, definitely think of that.\n\n307\n00:16:15,090 --> 00:16:22,150\nThere are many people who argue that, hey,\nwhat if we just do in band management?\n\n308\n00:16:22,150 --> 00:16:26,730\nIf we just leave it in band,\nbecause if it's in band, and\n\n309\n00:16:26,730 --> 00:16:29,850\nsomebody breaks into my exterior router.\n\n310\n00:16:29,850 --> 00:16:31,880\nWell, that's all they've got access to.\n\n311\n00:16:31,880 --> 00:16:34,540\nNow they can try and break into\nthe firewall, and if they can break into\n\n312\n00:16:34,540 --> 00:16:36,960\nthe firewall, then they can try and\nbreak into the next firewall, and\n\n313\n00:16:36,960 --> 00:16:39,840\nif they can do that, then they\nbreak into the router, and so on.\n\n314\n00:16:39,840 --> 00:16:40,360\nRight?\n\n315\n00:16:40,360 --> 00:16:42,480\nBut they've gotta go step by step,\n\n316\n00:16:42,480 --> 00:16:47,430\nversus if they could break into\nthe management LAN somehow,\n\n317\n00:16:47,430 --> 00:16:52,060\nthey could then skip over, so let's say\nI had firewall here, firewall here.\n\n318\n00:16:52,060 --> 00:16:54,230\nIf they could get into\nthe exterior router, and\n\n319\n00:16:54,230 --> 00:16:57,280\nthen somehow manage to break\ninto the management LAN,\n\n320\n00:16:57,280 --> 00:17:03,130\nthey could then skip over both firewalls\nand move into the rest of the network.\n\n321\n00:17:03,130 --> 00:17:03,730\nAll right.\n\n322\n00:17:03,730 --> 00:17:06,460\nThat's the risk with a management LAN.\n\n323\n00:17:06,460 --> 00:17:09,100\nYou are exposing yourself\nto that possibility.\n\n324\n00:17:09,100 --> 00:17:13,060\nSo that's why we need to be\nextremely security focused on it.\n\n325\n00:17:13,060 --> 00:17:13,811\n>> Yeah.\n\n326\n00:17:13,811 --> 00:17:18,667\nSo here in this situation for\nus it's neat that management a VLAN for\n\n327\n00:17:18,667 --> 00:17:23,350\nus or the LAN really does help us\nto be able to ensure that traffic,\n\n328\n00:17:23,350 --> 00:17:28,232\nour regular data traffic and\nour management traffic are separate.\n\n329\n00:17:28,232 --> 00:17:31,642\nBut because of the connections\nit makes to every single device,\n\n330\n00:17:31,642 --> 00:17:35,117\nit again means that that single\npoint of compromise that we have,\n\n331\n00:17:35,117 --> 00:17:39,060\nis gonna be something that we really\nhave to actually be aware of.\n\n332\n00:17:39,060 --> 00:17:41,910\nSo the thing that you were pointing at\na little bit earlier when you were drawing\n\n333\n00:17:41,910 --> 00:17:46,360\nthe diagram, we talked about the idea\nof defense in depth before and\n\n334\n00:17:46,360 --> 00:17:49,310\nthat's probably what we have to focus\nin on regardless of whether we're doing\n\n335\n00:17:49,310 --> 00:17:51,890\nin ban or out of ban.\n\n336\n00:17:51,890 --> 00:17:54,100\nAm I saying?\n>> Yep, you got it right.\n\n337\n00:17:54,100 --> 00:17:55,930\n>> Okay, kept saying in band earlier.\n\n338\n00:17:55,930 --> 00:17:57,960\nSo in band or out of band here.\n\n339\n00:17:57,960 --> 00:18:00,059\nDefense in depth is gonna be\nsomething very important for us.\n\n340\n00:18:00,059 --> 00:18:03,480\n>> Yeah and I'll be honest with you guys.\n\n341\n00:18:03,480 --> 00:18:06,290\nHere at ITProTV,\nwe do in band management, right?\n\n342\n00:18:06,290 --> 00:18:08,230\nBut we don't have a high\nsecurity network here.\n\n343\n00:18:08,230 --> 00:18:11,830\nIf somebody breaks in,\nthey could steal our videos,\n\n344\n00:18:11,830 --> 00:18:13,920\nwhich we put on the Internet anyway.\n\n345\n00:18:13,920 --> 00:18:17,680\nSo, they're gonna get stolen sooner or\nlater anyway.\n\n346\n00:18:17,680 --> 00:18:20,920\nSo, it's not that big of a deal for\nus, but\n\n347\n00:18:20,920 --> 00:18:26,125\nif we were a bank, or if we were\na hospital, or if we were the Pentagon.\n\n348\n00:18:26,125 --> 00:18:30,705\nWe were a military installation, you\nknow we'd have that management network,\n\n349\n00:18:30,705 --> 00:18:31,685\nwe would need it.\n\n350\n00:18:31,685 --> 00:18:34,425\nSo, I worked at a bank and\nwe had a management network.\n\n351\n00:18:34,425 --> 00:18:36,575\nNow we didn't do it this way,\n\n352\n00:18:36,575 --> 00:18:40,470\nwe didn't do it with land connections,\nwe did it with console connections.\n\n353\n00:18:40,470 --> 00:18:44,150\nSo our management LAN wasn't\nbuilt off of network connections.\n\n354\n00:18:44,150 --> 00:18:45,080\nIt was built off of consoles.\n\n355\n00:18:45,080 --> 00:18:48,510\nWe used a device, let me show\nyou guys this cuz this is cool.\n\n356\n00:18:48,510 --> 00:18:49,290\nI like it.\n\n357\n00:18:49,290 --> 00:18:51,510\nLet's see, it's somewhere around here.\n\n358\n00:18:51,510 --> 00:18:53,310\nI got a web browser, there.\n\n359\n00:18:53,310 --> 00:18:56,570\nSo there's a company called Opengear and\n\n360\n00:18:56,570 --> 00:19:01,770\nthey make hardware appliances that\nare based on open source utilities.\n\n361\n00:19:01,770 --> 00:19:05,350\nAnd they make remote console servers and\nthey are awesome.\n\n362\n00:19:05,350 --> 00:19:07,510\nI can't recommend these enough.\n\n363\n00:19:07,510 --> 00:19:12,560\nYou can have management network,\nthat has one of these devices on it, and\n\n364\n00:19:12,560 --> 00:19:16,570\nthen, what you've got here\nare 48 console ports.\n\n365\n00:19:16,570 --> 00:19:17,120\n>> Nice.\n\n366\n00:19:17,120 --> 00:19:20,680\n>> And you can run, because,\nin our main data center in Seattle,\n\n367\n00:19:20,680 --> 00:19:26,370\nwe had I think we had, just in the core\ndata center, we had 16 switches.\n\n368\n00:19:26,370 --> 00:19:29,740\nAnd then numerous,\nI think we had six firewalls,\n\n369\n00:19:29,740 --> 00:19:33,610\na couple of IPS's,\nseveral different devices in there.\n\n370\n00:19:33,610 --> 00:19:36,030\nAnd routers, there was a router\non every Internet connection, so\n\n371\n00:19:36,030 --> 00:19:37,760\nthere were eight Internet routers.\n\n372\n00:19:37,760 --> 00:19:40,400\nAnd so all of those devices and\n\n373\n00:19:40,400 --> 00:19:45,060\nwe wanted to be able to securely manage\nthem, well, we had one of these and we ran\n\n374\n00:19:45,060 --> 00:19:49,000\nconsole cables from it to the console port\non every one of those pieces of hardware.\n\n375\n00:19:49,000 --> 00:19:51,720\nSo when I wanted to manage a router,\nor a switch or\n\n376\n00:19:51,720 --> 00:19:55,030\na firewall I connected via\nthe management network.\n\n377\n00:19:55,030 --> 00:19:56,620\nTo this device.\n\n378\n00:19:56,620 --> 00:19:59,650\nAnd then from there was able to access\nthe consoles of the other ones.\n\n379\n00:19:59,650 --> 00:20:04,110\nOn a positive side, if somebody,\nlet me go back to my diagram.\n\n380\n00:20:04,110 --> 00:20:09,785\nIf somebody hacks into\nthe Exterior router, right.\n\n381\n00:20:09,785 --> 00:20:11,315\nThey hack into it, okay.\n\n382\n00:20:11,315 --> 00:20:15,961\nIf this connection right\nhere is a console cable.\n\n383\n00:20:15,961 --> 00:20:16,585\n>> Yeah.\n>> Right,\n\n384\n00:20:16,585 --> 00:20:19,582\nyou can't transit traffic\non a console cable.\n\n385\n00:20:19,582 --> 00:20:20,890\nYou can send keystrokes.\n\n386\n00:20:20,890 --> 00:20:22,160\nAnd that's it.\n\n387\n00:20:22,160 --> 00:20:26,270\nAnd so, it was a console cable that\nconnected back to our open gear box, and,\n\n388\n00:20:26,270 --> 00:20:31,050\nthen, it connected to the routers and the,\nthe other firewalls that were out there.\n\n389\n00:20:31,050 --> 00:20:36,290\nAnd, so, it had those console connections,\nyou can't transit network,\n\n390\n00:20:36,290 --> 00:20:40,930\nyou can't encapsulate remote sessions, and\nstuff like that, via console cables, and\n\n391\n00:20:40,930 --> 00:20:45,650\nso it's very secure, we didn't have\nto worry about that compromise.\n\n392\n00:20:45,650 --> 00:20:49,590\nI use that thing every single day,\nliterally.\n\n393\n00:20:49,590 --> 00:20:54,665\nThe only negative of a solution like\nthis is it is a Console connection.\n\n394\n00:20:54,665 --> 00:20:56,795\nSo if you're a GUI type person,\n\n395\n00:20:56,795 --> 00:21:00,685\nif you like that graphical user interface,\nyou're out of luck, right?\n\n396\n00:21:00,685 --> 00:21:04,555\nBut if you're security focused, then\nyou're probably not using that graphical\n\n397\n00:21:04,555 --> 00:21:06,965\nuser interface anyway, and so that's it.\n\n398\n00:21:06,965 --> 00:21:10,205\nI worked in command line interfaces.\n\n399\n00:21:10,205 --> 00:21:15,305\nI used to get teased by the help desk\nguys, cuz they'd walk by my cube,\n\n400\n00:21:15,305 --> 00:21:19,580\nor office, or whatever, and\nI had three computer screens.\n\n401\n00:21:19,580 --> 00:21:20,830\nAnd I always had consoles open.\n\n402\n00:21:20,830 --> 00:21:23,530\nI like green text on a black background.\n\n403\n00:21:23,530 --> 00:21:26,650\nSo they would always come by and say,\noh you are working on the mainframe again?\n\n404\n00:21:26,650 --> 00:21:28,210\nWe didn't have a mainframe, but\n\n405\n00:21:28,210 --> 00:21:31,660\nthat's what it looks like to somebody\nwho doesn't recognize router prompts.\n\n406\n00:21:31,660 --> 00:21:33,640\nBut these kind of devices are really cool.\n\n407\n00:21:35,010 --> 00:21:38,970\nThis is the one that I like and\nthey're not that expensive.\n\n408\n00:21:38,970 --> 00:21:41,760\nThey're, I think they're like $2000 or\nsomething.\n\n409\n00:21:41,760 --> 00:21:44,966\nI mean, I don't have one at home so\nthey're not that inexpensive.\n\n410\n00:21:44,966 --> 00:21:48,133\nBut for a business,\nthey're not Incredibly expensive.\n\n411\n00:21:48,133 --> 00:21:51,389\nCisco, they used to make\nCisco terminal servers for\n\n412\n00:21:51,389 --> 00:21:53,690\na long time and I think you still can.\n\n413\n00:21:53,690 --> 00:21:56,330\nLet's see.\nCan you get the 2900 terminal server?\n\n414\n00:21:56,330 --> 00:21:59,241\n>> I do know know on that one.\n\n415\n00:21:59,241 --> 00:22:02,214\n>> Let's see if they have one.\n\n416\n00:22:02,214 --> 00:22:05,793\nSerial and async modules for Cisco.\n\n417\n00:22:05,793 --> 00:22:08,120\nOh, you know what,\nactually I saw a better link down there.\n\n418\n00:22:08,120 --> 00:22:08,620\n>> There it is.\n\n419\n00:22:09,740 --> 00:22:13,400\n>> Oh no that's a forum, all right,\nbut I think this one was here.\n\n420\n00:22:14,460 --> 00:22:16,710\nSo.\n>> Oh yeah you combined that module.\n\n421\n00:22:16,710 --> 00:22:19,020\n>> Yeah, they makes these modules\nthat you can stick in and\n\n422\n00:22:19,020 --> 00:22:21,440\nyou can add usually eight or 16.\n\n423\n00:22:21,440 --> 00:22:24,970\nThey call them asynchronous\nserial connections but\n\n424\n00:22:24,970 --> 00:22:28,020\nthey're, they're perfect for\nusing for console connections.\n\n425\n00:22:28,020 --> 00:22:31,800\nAnd so you can take a 2901,\nwith one of these cards in it, or\n\n426\n00:22:31,800 --> 00:22:35,120\nyou can add more as you needed to\nconnect to multiple devices, and\n\n427\n00:22:35,120 --> 00:22:36,910\nhave it connect to all of your systems.\n\n428\n00:22:36,910 --> 00:22:42,000\nThey make what are called octole cables\nwhich, we have one around here somewhere,\n\n429\n00:22:42,000 --> 00:22:43,040\nI'd have to dig it out.\n\n430\n00:22:43,040 --> 00:22:46,310\nBut on one end it looks\nlike a SCSI connector.\n\n431\n00:22:46,310 --> 00:22:48,280\nAnd on the other end it\nbreaks out into eight cables,\n\n432\n00:22:48,280 --> 00:22:49,440\nthat's why it's called an octal.\n\n433\n00:22:49,440 --> 00:22:51,570\n>> Yeah.\n>> Let me see if I can find a picture\n\n434\n00:22:51,570 --> 00:22:52,540\nof that, an octal cable.\n\n435\n00:22:55,860 --> 00:22:58,750\nThere we go, that looks exactly like\nhow it's sitting in our store room if\n\n436\n00:22:58,750 --> 00:22:59,650\nwe could find it.\n\n437\n00:22:59,650 --> 00:23:04,010\nBut, you'll see on one end,\npretty small picture,\n\n438\n00:23:05,620 --> 00:23:09,400\nzoom in a little, there we go, so on one\nend it looks like a scuzzy connector,\n\n439\n00:23:09,400 --> 00:23:12,900\nI think it actually is a scuzzy connector,\nthey just re-used that interface.\n\n440\n00:23:12,900 --> 00:23:13,740\nSave money.\n\n441\n00:23:13,740 --> 00:23:17,730\nAnd on the other end,\nyou have eight RJ45 jacks, but\n\n442\n00:23:17,730 --> 00:23:21,230\nthese are all designed to be\nconsole serial connections.\n\n443\n00:23:21,230 --> 00:23:25,860\nSo you screw this into that wick,\nthat we saw back here.\n\n444\n00:23:25,860 --> 00:23:27,180\nCan I make that picture bigger?\n\n445\n00:23:27,180 --> 00:23:28,750\nNo, not really.\n\n446\n00:23:28,750 --> 00:23:31,510\nSo that would screw in it, and you see\nhow like this card has two of them?\n\n447\n00:23:31,510 --> 00:23:33,840\nThis card has four of them\nwith the new micro ones.\n\n448\n00:23:33,840 --> 00:23:35,330\nThis one just has one.\n\n449\n00:23:35,330 --> 00:23:37,780\nSo, you'd screw it right into that,\nand then,\n\n450\n00:23:37,780 --> 00:23:41,760\nyou would take these cables and\nrun them to your other devices.\n\n451\n00:23:41,760 --> 00:23:45,960\nNow, the biggest negative with these,\nthey're not very long cables, and so,\n\n452\n00:23:45,960 --> 00:23:48,490\nif you've got a whole data center to wire,\n\n453\n00:23:48,490 --> 00:23:51,290\nyou'll have to use some couplers\nto be able to stretch it out.\n\n454\n00:23:51,290 --> 00:23:52,410\nThat's the nice part about, like,\n\n455\n00:23:52,410 --> 00:23:56,970\nthe open gear solution,\nis that you just run your own cables.\n\n456\n00:23:56,970 --> 00:23:58,732\nAnd they're RJ45 on both ends.\n\n457\n00:23:58,732 --> 00:24:02,029\nAnd if you take a standard,\nnot a crossover cable, but\n\n458\n00:24:02,029 --> 00:24:07,209\na straight-through network cable, you can\nrun it from this right into your device.\n\n459\n00:24:07,209 --> 00:24:08,481\nAnd it'll work just fine.\n\n460\n00:24:08,481 --> 00:24:11,865\nSo So definitely some cool stuff there,\na lot of options.\n\n461\n00:24:11,865 --> 00:24:17,710\nObviously Cisco would like you to go\nthe Cisco route, but personally I.\n\n462\n00:24:17,710 --> 00:24:21,370\nBut that's a great way to provide\n\n463\n00:24:21,370 --> 00:24:25,675\nthat out-of-band management and\nnot have to worry about that\n\n464\n00:24:25,675 --> 00:24:29,345\nextra layer of what if a hacker\ncompromises my management network right?\n\n465\n00:24:29,345 --> 00:24:32,135\nBecause in this case if they\ncompromise that terminal server,\n\n466\n00:24:32,135 --> 00:24:35,761\nwell they really can't cuz that is\njust a console connection going.\n\n467\n00:24:36,952 --> 00:24:41,852\nThe other thing is when you buy a Cisco\nrouter almost all Cisco routers these days\n\n468\n00:24:41,852 --> 00:24:44,242\ncome with two network interfaces.\n\n469\n00:24:44,242 --> 00:24:47,182\nAnd if you're doing in band\nmanagement then you just manage based\n\n470\n00:24:47,182 --> 00:24:49,612\non the ip attached to\none of those interfaces.\n\n471\n00:24:49,612 --> 00:24:52,842\nBut with out of band management\nyou need a dedicated interface\n\n472\n00:24:52,842 --> 00:24:55,552\nthat means you're going to need\na minimum of three interfaces.\n\n473\n00:24:55,552 --> 00:24:57,792\nI suppose if you're\ndoing a serial link for\n\n474\n00:24:57,792 --> 00:24:59,222\nyour internet connection\nthen you'd be fine.\n\n475\n00:24:59,222 --> 00:25:02,070\nBut But normally if you are using\nyour two ethernet jacks for\n\n476\n00:25:02,070 --> 00:25:04,800\nnetwork routing,\nthen you'll need a third one.\n\n477\n00:25:04,800 --> 00:25:09,600\nNow, you can get a ten megabit WIC,\n\n478\n00:25:09,600 --> 00:25:12,030\nyou know a WAN Interface Card,\nand pop it in the router.\n\n479\n00:25:12,030 --> 00:25:15,810\nAnd those are fairly inexpensive, you\nknow, I think they're like 120, 150 bucks.\n\n480\n00:25:16,820 --> 00:25:19,390\nAnd I say ten megabit because\nif you're just using it for\n\n481\n00:25:19,390 --> 00:25:21,850\nmanagement, then you don't\nneed the high bandwidth.\n\n482\n00:25:21,850 --> 00:25:23,790\nThe 100 megabit ones,\nthey're more expensive.\n\n483\n00:25:26,490 --> 00:25:29,450\nOr, I don't think I'm supposed\nto use more expensive there.\n\n484\n00:25:29,450 --> 00:25:30,760\nLess inexpensive?\n\n485\n00:25:30,760 --> 00:25:34,320\nThere's some positive sales spin you\nare supposed to put on those terms.\n\n486\n00:25:34,320 --> 00:25:35,040\nI always forget.\n\n487\n00:25:36,500 --> 00:25:37,330\nOh no, I'm I've got it run.\n\n488\n00:25:37,330 --> 00:25:39,740\nYou're not supposed to\nsay something is cheaper\n\n489\n00:25:39,740 --> 00:25:41,470\ncuz then people think that it's garbage.\n\n490\n00:25:41,470 --> 00:25:43,770\nSo you're supposed to\nsay it's less expensive.\n\n491\n00:25:43,770 --> 00:25:44,770\nAll right.\n\n492\n00:25:44,770 --> 00:25:45,450\nWell, anyhow.\n\n493\n00:25:45,450 --> 00:25:46,970\n>> More economical.\n\n494\n00:25:46,970 --> 00:25:47,710\nEconomical.\n\n495\n00:25:47,710 --> 00:25:49,670\n>> For our budget minded people.\n\n496\n00:25:49,670 --> 00:25:52,700\nSpending a ton on Cisco equipment anyway.\n\n497\n00:25:52,700 --> 00:25:55,160\nIn band and out of band,\nimportant concepts,\n\n498\n00:25:55,160 --> 00:25:57,650\nespecially in high security environments.\n\n499\n00:25:57,650 --> 00:26:01,770\nThe other thing we need to be able to\ndescribe, I think we already kind of know,\n\n500\n00:26:01,770 --> 00:26:03,850\nis our management protocols.\n\n501\n00:26:03,850 --> 00:26:06,900\nWhat are some of the different ways\nthat we can manage our devices?\n\n502\n00:26:08,470 --> 00:26:12,520\nYeah.\n>> The one I think about is SNMP\n\n503\n00:26:12,520 --> 00:26:16,170\nis probably the big protocol that I\nthink of to help us to manage it.\n\n504\n00:26:16,170 --> 00:26:20,700\nAnd then any of the other secure protocols\nthat we tend to run like SSH and\n\n505\n00:26:20,700 --> 00:26:25,360\nsecure copy protocol and\nall those other things.\n\n506\n00:26:25,360 --> 00:26:27,290\nSo SNMPs, simple network manager protocol,\n\n507\n00:26:27,290 --> 00:26:29,858\nit pops into mind cuz its\ngot management in the name.\n\n508\n00:26:29,858 --> 00:26:33,870\n[LAUGH] Now I eminent SNMP all the time.\n\n509\n00:26:33,870 --> 00:26:37,210\nI almost always do it read only,\nI think most people do.\n\n510\n00:26:37,210 --> 00:26:39,440\nWe use it for reporting and monitoring.\n\n511\n00:26:39,440 --> 00:26:42,030\nWe gathered it on the routers,\nbut that's it.\n\n512\n00:26:42,030 --> 00:26:46,370\nSmnp on Cisco routers it does\nsupport read write communities.\n\n513\n00:26:46,370 --> 00:26:49,870\nSo you can actually configure\nthe router via SNMP.\n\n514\n00:26:49,870 --> 00:26:52,090\nAnd I know I've done this\nwith a couple of tools.\n\n515\n00:26:52,090 --> 00:26:53,410\nIn fact, we'll do it on the show.\n\n516\n00:26:53,410 --> 00:26:55,770\nWe'll do it in the next segment.\n\n517\n00:26:55,770 --> 00:26:59,720\nThat we can actually use SNMP to\nreach down and configure the devices.\n\n518\n00:26:59,720 --> 00:27:02,010\nSo it's kind of cool.\n\n519\n00:27:02,010 --> 00:27:05,380\nA lot of people don't do that because\nSNMP is not the most secure protocol\n\n520\n00:27:05,380 --> 00:27:06,270\nin the world.\n\n521\n00:27:06,270 --> 00:27:08,320\nAll you have is that community\naim if you're doing version two.\n\n522\n00:27:08,320 --> 00:27:11,160\nIf you're doing version three,\nyou can have a user name and password but\n\n523\n00:27:11,160 --> 00:27:13,000\nit's still not very secure.\n\n524\n00:27:13,000 --> 00:27:16,295\nYou're a packet capture away\nfrom being compromised.\n\n525\n00:27:16,295 --> 00:27:20,790\nSo, if you have a management network and\nyour SNMP\n\n526\n00:27:20,790 --> 00:27:24,180\ntraffic is restricted to that management\nnetwork, now it's a different story.\n\n527\n00:27:24,180 --> 00:27:26,520\nNow things can be a lot more secure.\n\n528\n00:27:26,520 --> 00:27:30,070\nSo there are other tools out there for\ndoing that.\n\n529\n00:27:30,070 --> 00:27:33,670\nTellnet we can use for\nconsole access but it's not secure.\n\n530\n00:27:33,670 --> 00:27:35,140\nSHS is a replacement for that.\n\n531\n00:27:35,140 --> 00:27:37,460\nSHS gives us that secure shell.\n\n532\n00:27:38,580 --> 00:27:41,030\nHTTP we can use for web management.\n\n533\n00:27:41,030 --> 00:27:42,390\nBut it's not secure.\n\n534\n00:27:42,390 --> 00:27:43,130\n>> HTTPS.\n\n535\n00:27:43,130 --> 00:27:44,450\n>> There we go.\n>> Is the one that we want.\n\n536\n00:27:44,450 --> 00:27:47,970\n>> So it's really just a matter\nof picking the secure version\n\n537\n00:27:47,970 --> 00:27:50,090\nof the company protocol.\n\n538\n00:27:50,090 --> 00:27:53,470\nTFTP and FTP, not secure.\n\n539\n00:27:53,470 --> 00:27:54,300\nSCP, secure.\n\n540\n00:27:54,300 --> 00:27:56,510\nIt is secure.\n\n541\n00:27:56,510 --> 00:27:59,900\nIF you have older Cisco equipment,\nthey probably don't support SCP.\n\n542\n00:27:59,900 --> 00:28:03,640\nAnything made in the last\ntwo years should have it.\n\n543\n00:28:03,640 --> 00:28:07,849\nYou can copy your files to and\nfrom the router and switch using that.\n\n544\n00:28:09,120 --> 00:28:11,120\nAll right.\nNow they do add well,\n\n545\n00:28:11,120 --> 00:28:12,430\nSyslog I think we all ready.\n\n546\n00:28:12,430 --> 00:28:13,930\nDid we ever all ready\ncover Syslog in the show?\n\n547\n00:28:13,930 --> 00:28:14,470\n>> No, we didn't.\n\n548\n00:28:14,470 --> 00:28:15,080\n>> Okay.\n>> Yeah.\n\n549\n00:28:15,080 --> 00:28:17,300\n>> So we'll talk about Syslog\ncuz that's an important one.\n\n550\n00:28:17,300 --> 00:28:20,950\nOffloading our logs so that if somebody\nwipes the router's logs, we've got a copy.\n\n551\n00:28:22,080 --> 00:28:23,100\nBut that one's important.\n\n552\n00:28:23,100 --> 00:28:26,420\nAnd then the other one they add on is\none that we don't talk about much.\n\n553\n00:28:26,420 --> 00:28:27,270\nNTP.\n\n554\n00:28:27,270 --> 00:28:27,980\nNetwork Time.\n\n555\n00:28:27,980 --> 00:28:29,510\n>> Time.\n>> Protocol.\n\n556\n00:28:29,510 --> 00:28:31,600\nNow you might ask yourself.\n\n557\n00:28:31,600 --> 00:28:32,190\n>> Yeah.\n\n558\n00:28:32,190 --> 00:28:33,780\n>> Why is that secure network management?\n\n559\n00:28:33,780 --> 00:28:34,430\n>> Yeah.\n\n560\n00:28:34,430 --> 00:28:37,350\n>> Well, one of the big obstacles\nthat we have in security is\n\n561\n00:28:37,350 --> 00:28:39,120\nif there's a compromise.\n\n562\n00:28:39,120 --> 00:28:41,180\nWe're gonna figure out how\nmany systems were affected.\n\n563\n00:28:41,180 --> 00:28:45,290\nWe a lot of times have to\ncorrelate logs between systems but\n\n564\n00:28:45,290 --> 00:28:49,570\nif the time is different on each\nof the devices, it makes it very,\n\n565\n00:28:49,570 --> 00:28:51,900\nvery difficult to correlate logs,\nall right?\n\n566\n00:28:51,900 --> 00:28:56,200\nNot to mention certain protocols like IP\nset depend on a time stamp and if the time\n\n567\n00:28:56,200 --> 00:29:00,320\nstamp is to far off between a host and\na client it'll break the IP set session.\n\n568\n00:29:00,320 --> 00:29:05,740\nSo having good consistent time across all\nof our devices is kind of a requirement.\n\n569\n00:29:05,740 --> 00:29:08,410\nAnd NTP, the Network Time Protocol,\nallows us to do that.\n\n570\n00:29:09,420 --> 00:29:14,215\nNow, NTP in it's default implementation\nis not secure so when an attacker for\n\n571\n00:29:14,215 --> 00:29:18,785\ncould try to exploit NTP\nthere are ways to do it, but\n\n572\n00:29:18,785 --> 00:29:23,595\nthere are steps that we could\ntake to secure NTP also.\n\n573\n00:29:23,595 --> 00:29:26,925\nAnd we'll see that as we get it\nconfigured on our router and switch.\n\n574\n00:29:28,230 --> 00:29:28,730\nAll right.\nSo\n\n575\n00:29:28,730 --> 00:29:31,290\nRonnie, looking at the clock we're down\nto our last couple of minutes here before\n\n576\n00:29:31,290 --> 00:29:31,950\nthe break.\n\n577\n00:29:31,950 --> 00:29:33,560\nThis is probably a pretty\ndecent stopping point for us.\n\n578\n00:29:33,560 --> 00:29:35,680\nDo you got anything else\nto throw in before we stop?\n\n579\n00:29:35,680 --> 00:29:38,220\n>> Well, when we get back we still\ngot to talk about a little bit about\n\n580\n00:29:38,220 --> 00:29:40,020\nthis Enclave.\n\n581\n00:29:40,020 --> 00:29:43,270\nAnd we'll talk about managing\nthe management plan a little bit.\n\n582\n00:29:43,270 --> 00:29:44,280\n>> Oh yeah.\n>> Securing that.\n\n583\n00:29:44,280 --> 00:29:45,760\n>> Yeah,\nprobably need to talk about a couple of.\n\n584\n00:29:45,760 --> 00:29:47,940\nDifferent implementations\nat that point then.\n\n585\n00:29:47,940 --> 00:29:49,550\n>> All right, well ladies and\ngentlemen, stay tuned.\n\n586\n00:29:49,550 --> 00:29:51,700\nWhen we get back,\nwe have more security stuff and\n\n587\n00:29:51,700 --> 00:29:54,270\nthen we'll continue on with\nsome actual implementation.\n\n588\n00:29:54,270 --> 00:29:54,890\n>> Yes.\n>> I know Ronnie and\n\n589\n00:29:54,890 --> 00:29:56,210\nI have just kind of been talking.\n\n590\n00:29:56,210 --> 00:29:59,670\nSo we'll actually see how to\ndo this stuff after the break.\n\n591\n00:29:59,670 --> 00:30:01,765\nStay tuned.\n\n592\n00:30:01,765 --> 00:30:10,330\n[SOUND]\n>> All right, welcome back everybody.\n\n593\n00:30:10,330 --> 00:30:13,700\nSo now what we're gonna do is we're gonna\ntake a look at some of the other things.\n\n594\n00:30:13,700 --> 00:30:15,060\n>> [LAUGH]\n>> That we didn't mention, right?\n\n595\n00:30:15,060 --> 00:30:19,920\nSo one of my favorite ones,\nit's objective 5.1.D right?\n\n596\n00:30:19,920 --> 00:30:22,160\nA management enclave.\n\n597\n00:30:22,160 --> 00:30:26,084\nThis is a fun one because\nit's not a very popular term.\n\n598\n00:30:26,084 --> 00:30:27,310\n>> [LAUGH]\n>> You don't hear it much.\n\n599\n00:30:27,310 --> 00:30:32,790\nA management enclave is basically out\nof band management, it's a designated\n\n600\n00:30:32,790 --> 00:30:39,550\nnetwork or a enclave that is basically\njust used for management purposes.\n\n601\n00:30:39,550 --> 00:30:46,640\nIn the drawings I was doing earlier, these\nguys here, that whole separate network,\n\n602\n00:30:46,640 --> 00:30:51,100\nthis whole thing right here, that would be\nconsidered your management enclave, right?\n\n603\n00:30:51,100 --> 00:30:53,530\nAnd it is just a separate network.\n\n604\n00:30:53,530 --> 00:30:58,380\nNow, they don't call it a management LAN\nbecause it might not be a true network.\n\n605\n00:30:58,380 --> 00:31:03,490\nIf these are console cables, then it's\nnot a local area network anymore.\n\n606\n00:31:03,490 --> 00:31:04,920\nYou know, does it have IP addresses?\n\n607\n00:31:04,920 --> 00:31:06,040\nDoes it use.\n\n608\n00:31:06,040 --> 00:31:08,730\nTCP IP, no just serial communications.\n\n609\n00:31:08,730 --> 00:31:13,490\nSo it may have a very different\nrepresentation than a normal network, and\n\n610\n00:31:13,490 --> 00:31:18,300\nso that's why Cisco has this additional\nterminology of a management enclave.\n\n611\n00:31:18,300 --> 00:31:21,185\nIn real life land you probably want\nwon't hear anybody use that term, but\n\n612\n00:31:21,185 --> 00:31:22,765\nthat is what Cisco's talking about.\n\n613\n00:31:22,765 --> 00:31:26,235\n>> Yeah, the only time I ever\nencountered it was on an army base.\n\n614\n00:31:26,235 --> 00:31:29,315\nThat was the only time I ever encountered\nit where they were talking about\n\n615\n00:31:29,315 --> 00:31:31,665\nneeding to get access into\na particular enclave.\n\n616\n00:31:31,665 --> 00:31:35,610\nAnd I was kind of saying, well okay, let\nme make sure I know what that means and\n\n617\n00:31:35,610 --> 00:31:38,370\nthen once there's oh,\nI know what you're talking about now, but\n\n618\n00:31:38,370 --> 00:31:41,350\nit took awhile before I got\nused to that terminology.\n\n619\n00:31:41,350 --> 00:31:45,140\n>> Before you knew it you were detained\nand they were waterboarding you.\n\n620\n00:31:45,140 --> 00:31:48,610\n>> I was asking about the and\nthey were not happy.\n\n621\n00:31:48,610 --> 00:31:52,128\n>> You were like I just want to\nknow where the cafeteria is.\n\n622\n00:31:52,128 --> 00:31:56,390\n[LAUGH] Where's the cafeteria enclave?\n\n623\n00:31:56,390 --> 00:31:57,800\n>> That's the important one.\n\n624\n00:31:57,800 --> 00:31:58,600\n>> Yes.\n\n625\n00:31:58,600 --> 00:32:01,088\n>> People try to break into\nthe management enclave, for the food.\n\n626\n00:32:01,088 --> 00:32:05,687\nAlright, so the other one we mentioned is\nthe management plane, and I know that we\n\n627\n00:32:05,687 --> 00:32:09,686\nhave talked about this one, and\nwe talked about it in the ACL show When we\n\n628\n00:32:09,686 --> 00:32:14,660\nsecure our router, there's actually\nthree planes involved in communications.\n\n629\n00:32:14,660 --> 00:32:18,060\nThere's the data plane, which is how\nthe data moves through our router.\n\n630\n00:32:18,060 --> 00:32:21,720\nAnd by plane, in case you haven't\nwatched the other episode,\n\n631\n00:32:21,720 --> 00:32:23,210\nwhat we're talking about the circuitry,\n\n632\n00:32:23,210 --> 00:32:27,410\nthe electronics pass across as data\nmoves from interface to another.\n\n633\n00:32:27,410 --> 00:32:31,550\nThe data plane is just that,\ninterface to interface communications.\n\n634\n00:32:31,550 --> 00:32:33,820\nAnd it should be\nthe fastest of the planes,\n\n635\n00:32:33,820 --> 00:32:35,290\njust moving data as quickly as possible.\n\n636\n00:32:36,310 --> 00:32:41,670\nThere's also the control plane which\nis making decisions about the data.\n\n637\n00:32:41,670 --> 00:32:44,130\nIt's what's applying access control lists.\n\n638\n00:32:44,130 --> 00:32:46,460\nIt is what's making routing decisions,\nright?\n\n639\n00:32:46,460 --> 00:32:48,800\nYour routing protocols\naround the control plane.\n\n640\n00:32:48,800 --> 00:32:50,859\nSo all of that kinda\nstuff is happening there.\n\n641\n00:32:51,970 --> 00:32:55,650\nIt's a little bit slower\nbecause there's logic going on.\n\n642\n00:32:55,650 --> 00:32:58,021\nSo the bulk of our data\nstays on the data plane but\n\n643\n00:32:58,021 --> 00:33:01,417\nsome things have to jump up to that\ncontrol plane to make decisions.\n\n644\n00:33:01,417 --> 00:33:03,696\n>> When we access the actual\nrouter itself, though,\n\n645\n00:33:03,696 --> 00:33:05,890\nwe're now on the management plane.\n\n646\n00:33:05,890 --> 00:33:11,380\nSo when I go in to configure the router,\nwhen we actually put IP addresses on,\n\n647\n00:33:11,380 --> 00:33:14,440\nthis is what we have to make sure,\nthat we can secure.\n\n648\n00:33:14,440 --> 00:33:19,450\nWe can access this like we said\nhere by using like Telnet or\n\n649\n00:33:19,450 --> 00:33:21,450\nSSH and different things.\n\n650\n00:33:21,450 --> 00:33:23,580\nWe need to make sure that\nthose are secured connections.\n\n651\n00:33:23,580 --> 00:33:26,235\nSo Telnet is probably not\ngoing to be our first choice.\n\n652\n00:33:26,235 --> 00:33:27,865\n>> Yeah, good old Telnet.\n\n653\n00:33:27,865 --> 00:33:29,905\nAnd you'll notice like if you\nread down the objectives,\n\n654\n00:33:29,905 --> 00:33:32,605\nTelnet's really not on\nthe objectives anymore at all.\n\n655\n00:33:32,605 --> 00:33:35,045\n>> No.\n>> I remember when I first took my\n\n656\n00:33:35,045 --> 00:33:38,346\nvery first Cisco class in 1999.\n\n657\n00:33:38,346 --> 00:33:43,567\nAnd back then Telnet, TFTP,\nthat was how you connected the devices.\n\n658\n00:33:43,567 --> 00:33:46,537\nToday, they don't even like to\nmention those on the objective\n\n659\n00:33:46,537 --> 00:33:48,967\nlist because you should be\nusing the secure protocols now.\n\n660\n00:33:50,027 --> 00:33:52,130\nAll right so let's take a look at that.\n\n661\n00:33:52,130 --> 00:33:56,310\nSo the objective 5.2 is implement\nsecure network management.\n\n662\n00:33:56,310 --> 00:33:59,320\nWe want to securely\nconnect to our systems.\n\n663\n00:33:59,320 --> 00:34:03,286\nWell, throughout this show and\non the IINS exam, they expect you to\n\n664\n00:34:03,286 --> 00:34:08,710\nuse the graphical user interface,\nthe Cisco Configuration Professional.\n\n665\n00:34:08,710 --> 00:34:11,240\nBut even to use the CCP,\n\n666\n00:34:11,240 --> 00:34:15,040\nthere are some steps you have to do to get\nthe system ready in the very first place.\n\n667\n00:34:15,040 --> 00:34:18,430\nWe covered those already,\nbut just to kinda review.\n\n668\n00:34:18,430 --> 00:34:23,030\nYou really do need to take a brand new\nrouter, connect to it with a console cable\n\n669\n00:34:23,030 --> 00:34:27,300\nand take some basic steps\nto get SSH functional.\n\n670\n00:34:27,300 --> 00:34:30,420\nAs well as SSL, secure web access.\n\n671\n00:34:31,420 --> 00:34:33,260\nLet's run through that process.\n\n672\n00:34:33,260 --> 00:34:37,550\nMy router's already set up but\nI'll run through the process here and\n\n673\n00:34:37,550 --> 00:34:41,020\nwe'll See if we can make it nice and\nangry with us.\n\n674\n00:34:41,020 --> 00:34:42,310\nThere we go.\n\n675\n00:34:42,310 --> 00:34:47,270\nAll right, so step one,\nwe need to get SSH running.\n\n676\n00:34:47,270 --> 00:34:50,960\nAnd with SSH,\nthere is a few things that we need.\n\n677\n00:34:50,960 --> 00:34:56,860\nThe first off SSH requires the use\nof a username and a password, right?\n\n678\n00:34:56,860 --> 00:35:00,900\nBy default the router just asks for\na password and that's not good enough So\n\n679\n00:35:00,900 --> 00:35:04,720\nwe need to tell the router\nto use a more secure method.\n\n680\n00:35:04,720 --> 00:35:09,760\nAnd what we're doing is we're telling\nthe AAA module, or the authentication,\n\n681\n00:35:09,760 --> 00:35:14,850\nauthorization, and accounting module,\nto run in the new model,\n\n682\n00:35:14,850 --> 00:35:16,750\nwhich is what uses a username and\npassword.\n\n683\n00:35:16,750 --> 00:35:20,400\nThe old model just uses a password,\nwhich was fine for Telnet, but\n\n684\n00:35:20,400 --> 00:35:21,620\nnot good enough for SSH.\n\n685\n00:35:23,310 --> 00:35:28,592\n>> So by turning on AAA new model for us,\nwe are now opening up the router to say,\n\n686\n00:35:28,592 --> 00:35:32,490\nall right, let's now create\na username password database or\n\n687\n00:35:32,490 --> 00:35:35,660\nwe can actually offload that to\na radius server or something else.\n\n688\n00:35:36,690 --> 00:35:39,827\n>> And so now we'll go through and\nwe did radius right?\n\n689\n00:35:39,827 --> 00:35:40,763\nDidn't we do that a couple of shows ago?\n\n690\n00:35:40,763 --> 00:35:41,380\n>> Yes we did, that's right.\n\n691\n00:35:41,380 --> 00:35:42,850\n>> So we've seen some of that too.\n\n692\n00:35:42,850 --> 00:35:45,210\nBut now I can go in and create a username.\n\n693\n00:35:45,210 --> 00:35:48,905\nI'll create a username Don,\nwith a privilege level of 15.\n\n694\n00:35:48,905 --> 00:35:50,525\nI'm gonna make myself an admin.\n>> That's important.\n\n695\n00:35:50,525 --> 00:35:55,729\n[LAUGH]\n>> And I will set a password of cisco123.\n\n696\n00:35:55,729 --> 00:35:57,920\nNow I got a username and\npassword, so that's good.\n\n697\n00:35:58,920 --> 00:36:02,695\nMy next step is I am going\nto need a certificate\n\n698\n00:36:02,695 --> 00:36:07,570\nSSH does its encryption based on a private\nkey that is stored in a certificate.\n\n699\n00:36:07,570 --> 00:36:09,290\nIn order to create a certificate,\n\n700\n00:36:09,290 --> 00:36:11,390\nI know we showed some\nshortcuts in the other show.\n\n701\n00:36:11,390 --> 00:36:16,700\nBut if we want to create it by hand we\nneed well first off we need a domain name,\n\n702\n00:36:16,700 --> 00:36:18,210\nwe need a host name and a domain name.\n\n703\n00:36:18,210 --> 00:36:19,590\n>> Right.\n>> I've already got a host name.\n\n704\n00:36:19,590 --> 00:36:23,450\nMy host name is ITProTV router 1 or\n\n705\n00:36:23,450 --> 00:36:26,050\nI can shrink that to something\nsmaller if I wanted.\n\n706\n00:36:26,050 --> 00:36:29,491\nSo I could say like hostname R1, and\n\n707\n00:36:29,491 --> 00:36:33,710\nthen ip domain-name and\nthen a domain name.\n\n708\n00:36:33,710 --> 00:36:40,220\nSo maybe I'll do itpro.tv or\nwe do lab.itpro.tv on an inside network.\n\n709\n00:36:40,220 --> 00:36:41,880\nSo there we go.\n\n710\n00:36:41,880 --> 00:36:44,700\nNow I've got a host name and\na domain name.\n\n711\n00:36:44,700 --> 00:36:47,820\n>> Once we have the host name and\nthe domain name it's time for\n\n712\n00:36:47,820 --> 00:36:49,980\nus to generate our cryptography key.\n\n713\n00:36:49,980 --> 00:36:54,599\nSo we do crypto key gen or generate,\nand then we have to add in that,\n\n714\n00:36:54,599 --> 00:36:56,096\nwhat do they call it?\n\n715\n00:36:56,096 --> 00:36:59,361\nThe RSA, what is it in called?\n\n716\n00:36:59,361 --> 00:37:01,074\n[CROSSTALK].\nEncryption.\n\n717\n00:37:01,074 --> 00:37:03,290\n>> The algorithm is being used.\n\n718\n00:37:03,290 --> 00:37:06,070\nNow Ronnie, you mentioned here,\nis gen actually abbreviated?\n\n719\n00:37:06,070 --> 00:37:07,600\nOh, it is.\nOkay.\n\n720\n00:37:07,600 --> 00:37:11,800\nI always type crytokey gen, I wasn't\nsure if it was abbreviated or not.\n\n721\n00:37:11,800 --> 00:37:13,290\nYeah, crypto key generate rsa.\n\n722\n00:37:13,290 --> 00:37:16,670\nWe're generating an RSA crypto key,\n\n723\n00:37:16,670 --> 00:37:20,450\nwhich is basically a private\nkey in a SSL certificate.\n\n724\n00:37:20,450 --> 00:37:22,450\nThat's what we're gonna run.\n\n725\n00:37:22,450 --> 00:37:25,340\nNow, here's where things get important.\n\n726\n00:37:25,340 --> 00:37:31,470\nIt's gonna ask us, how big we want the key\nmodules to be If you stick with 512 bits,\n\n727\n00:37:31,470 --> 00:37:34,140\nthat's not big enough for\nany of the versions of SSL.\n\n728\n00:37:34,140 --> 00:37:40,880\n768 is the minimum for SSH version 1, and\n\n729\n00:37:40,880 --> 00:37:46,010\nthen 1024 is the minimum for\nSSH version two, okay?\n\n730\n00:37:46,010 --> 00:37:49,320\nSo we need to make sure we use\nthe appropriate level for what we want.\n\n731\n00:37:49,320 --> 00:37:51,590\nMost of us will want SSH version two.\n\n732\n00:37:51,590 --> 00:37:55,070\nSo I'm gonna go ahead and\nenter in 1024, okay?\n\n733\n00:37:55,070 --> 00:37:58,040\nNow it's gonna create a key and\nyou know, I've never done this Ronnie.\n\n734\n00:37:58,040 --> 00:38:02,010\nI'm SSH'd in right now so I was kinda\ncurious if it was gonna drop my session,\n\n735\n00:38:02,010 --> 00:38:02,620\nbut it didn't.\n\n736\n00:38:02,620 --> 00:38:03,246\nSo that's good.\n\n737\n00:38:03,246 --> 00:38:08,949\nAll right now, SSH was already enabled,\nbut let's say it wasn't,\n\n738\n00:38:08,949 --> 00:38:12,794\nlet's break things here\na little bit Ronnie.\n\n739\n00:38:16,101 --> 00:38:18,480\nLet's just take a look here and\nmake sure I haven't restricted this.\n\n740\n00:38:18,480 --> 00:38:19,100\nI haven't.\n\n741\n00:38:20,320 --> 00:38:29,357\nSo what I'm going to do is I'm gonna get\nrid of that certificate that we just made.\n\n742\n00:38:32,937 --> 00:38:34,650\nThis is that certificate.\n\n743\n00:38:34,650 --> 00:38:35,820\nAnd the certificate,\n\n744\n00:38:35,820 --> 00:38:39,560\nyou'll see, it creates a trust\npoint because we trust ourselves.\n\n745\n00:38:39,560 --> 00:38:41,580\nAnd it gives it a generic name here.\n\n746\n00:38:41,580 --> 00:38:43,310\nCuz it was a self-signed certificate.\n\n747\n00:38:43,310 --> 00:38:45,140\nWe generated it locally.\n\n748\n00:38:45,140 --> 00:38:47,238\nAnd so I'm just gonna get rid of that.\n\n749\n00:38:50,018 --> 00:38:56,919\nAnd good, so the certificate is gone,\nand I'm going to get out of this router.\n\n750\n00:38:56,919 --> 00:38:57,730\nI might regret this.\n\n751\n00:38:57,730 --> 00:39:00,469\nActually you know what I'm gonna\nhold that window open just in case.\n\n752\n00:39:00,469 --> 00:39:04,080\nAs long as the session is open,\nit'll stay open.\n\n753\n00:39:04,080 --> 00:39:07,700\nIf I close that and I've locked myself\noutta the router, I'll have to go and\n\n754\n00:39:07,700 --> 00:39:09,930\nreboot it, and\nI don't wanna do that during the show.\n\n755\n00:39:09,930 --> 00:39:12,187\nSo I'm just gonna open\nup another window and\n\n756\n00:39:12,187 --> 00:39:14,570\nthis time I'm gonna\ntelnet in to that router.\n\n757\n00:39:18,000 --> 00:39:22,224\nI can even log in as myself now if I\ncan remember my password, cisco123,\n\n758\n00:39:22,224 --> 00:39:22,970\nthere we go.\n\n759\n00:39:24,400 --> 00:39:29,810\nSo okay, so\n\n760\n00:39:29,810 --> 00:39:33,780\nright now, if I look at it,\nsee how it says that SSH is enabled?\n\n761\n00:39:33,780 --> 00:39:37,400\nWell, the problem that I've got is that\n\n762\n00:39:37,400 --> 00:39:42,080\nwe had generated a certificate already and\nI've cleared it.\n\n763\n00:39:42,080 --> 00:39:45,020\nI cleared it out of my config,\nbut SSH is still running.\n\n764\n00:39:45,020 --> 00:39:47,241\nSo I need to kill SSH.\n\n765\n00:39:51,341 --> 00:39:51,897\nLet's see, is it just?\n\n766\n00:39:51,897 --> 00:39:56,964\nActually, will it\n\n767\n00:39:56,964 --> 00:40:02,351\nnot let me kill SSH?\n\n768\n00:40:02,351 --> 00:40:06,705\nIt won't, will it?\n\n769\n00:40:06,705 --> 00:40:07,588\nIt's gonna require a reboot.\n\n770\n00:40:07,588 --> 00:40:10,484\nI was hoping to avoid doing a reboot.\n\n771\n00:40:10,484 --> 00:40:11,737\nWell you know what,\n\n772\n00:40:11,737 --> 00:40:16,670\nhang on lets just take a look at my\nconfigurations as it stands right now.\n\n773\n00:40:16,670 --> 00:40:18,580\nSo i'm just going to scan\nthrough real quick and see.\n\n774\n00:40:18,580 --> 00:40:22,060\nSo we're in triple a new model,\nbut my certificate is gone.\n\n775\n00:40:22,060 --> 00:40:23,824\nSSH should be unhappy.\n\n776\n00:40:26,895 --> 00:40:29,805\nBut it more than likely has my\ncertificate cached which is why\n\n777\n00:40:29,805 --> 00:40:31,725\nit is still allowing connections.\n\n778\n00:40:31,725 --> 00:40:37,265\nIf I try and open up a SSH window now,\nlet's see what happens.\n\n779\n00:40:37,265 --> 00:40:39,695\nIf it still lets me connect then\nI'll know that it's cached.\n\n780\n00:40:39,695 --> 00:40:44,465\nIt appears to, yeah it is cached alright.\n\n781\n00:40:44,465 --> 00:40:47,470\nSo here's what I'm going to do,\nI'm going to go ahead and reboot.\n\n782\n00:40:47,470 --> 00:40:50,010\nLet me just save the configuration here,\nand we'll reboot it.\n\n783\n00:40:50,010 --> 00:40:52,660\nSo when we reboot,\nbecause we have no certificate,\n\n784\n00:40:52,660 --> 00:40:55,190\nit should be unhappy and\nSSH should be broken.\n\n785\n00:40:55,190 --> 00:40:59,880\nAnd what I wanna show you guys is\nas we turn these certificates on,\n\n786\n00:40:59,880 --> 00:41:03,540\nyou'll actually get a message letting\nyou know that ssh was enabled.\n\n787\n00:41:03,540 --> 00:41:06,940\nAnd depending on the certificate\nstrength you choose,\n\n788\n00:41:06,940 --> 00:41:09,290\nit's gonna be at one\nversion over another one.\n\n789\n00:41:09,290 --> 00:41:10,210\nSo that's important.\n\n790\n00:41:10,210 --> 00:41:12,960\nSo let me wait on that to reboot.\n\n791\n00:41:12,960 --> 00:41:14,500\nIt'll take a little while.\n\n792\n00:41:14,500 --> 00:41:17,190\nIt's a Cisco routers.\n\n793\n00:41:17,190 --> 00:41:20,850\nThis is when you can tell the difference\nbetween a real one and an emulated one.\n\n794\n00:41:20,850 --> 00:41:22,690\nEmulator router reboots, like that.\n\n795\n00:41:22,690 --> 00:41:25,160\nBut this is a real router\nsitting over here on the side,\n\n796\n00:41:25,160 --> 00:41:27,570\nand they take a couple\nof minutes to reboot.\n\n797\n00:41:27,570 --> 00:41:31,360\nSo we'll give that some time While it's\nrebooting though we can talk about some of\n\n798\n00:41:31,360 --> 00:41:33,460\nthese other things and\nwe'll get back to SSH.\n\n799\n00:41:33,460 --> 00:41:36,180\nLet's talk a little about syslog.\n\n800\n00:41:37,490 --> 00:41:40,200\nNow Ronnie and\nI had a debate before the show.\n\n801\n00:41:40,200 --> 00:41:45,370\nIf watched the CCNA show, we covered\nsyslog in depth in there but For\n\n802\n00:41:45,370 --> 00:41:51,210\nthe CCNA security, you don't have to do\nthe CCNA routing and switching anymore.\n\n803\n00:41:51,210 --> 00:41:53,940\n>> Right.\n>> So, you may have just watched the CCENT\n\n804\n00:41:53,940 --> 00:41:56,730\nshow and\nthen come straight over into this one,\n\n805\n00:41:56,730 --> 00:41:59,440\nin which case you probably\nhaven't seen CisLog yet.\n\n806\n00:41:59,440 --> 00:42:03,190\n>> So for us, the idea of CisLog,\nof course is that the router or\n\n807\n00:42:03,190 --> 00:42:06,030\nthe switch-\n>> Generates messages.\n\n808\n00:42:06,030 --> 00:42:09,950\nNow, those messages for us again,\ntell us what's going on on the router or\n\n809\n00:42:09,950 --> 00:42:13,870\nthe switch and what we wanna be able\nto do in terms of security here is make\n\n810\n00:42:13,870 --> 00:42:19,400\nsure that we can offload those\nbigger messages to another system.\n\n811\n00:42:19,400 --> 00:42:21,860\nWe can store them on the router itself.\n\n812\n00:42:21,860 --> 00:42:25,550\nBut that's not the best place to\nactually just have them there.\n\n813\n00:42:25,550 --> 00:42:29,590\nNow, it works just fine and again you\ncan keep a lot of information there.\n\n814\n00:42:29,590 --> 00:42:31,320\nBut if the router reboots.\n\n815\n00:42:31,320 --> 00:42:33,930\nIf you lose the information,\nyou have a problem.\n\n816\n00:42:33,930 --> 00:42:37,000\n>> Yeah, the other thing is\nif you have a ton of devices.\n\n817\n00:42:37,000 --> 00:42:39,920\n>> Let's say you're managing 300 routers,\nright?\n\n818\n00:42:39,920 --> 00:42:42,880\nWell, you don't wanna have to connect\nthe 300 different systems to look\n\n819\n00:42:42,880 --> 00:42:43,680\nat the log messages.\n\n820\n00:42:43,680 --> 00:42:47,340\nIt would be nice to have\na single consolidated location\n\n821\n00:42:47,340 --> 00:42:48,940\nwith all that data there.\n\n822\n00:42:48,940 --> 00:42:52,180\nNow there are a number of sys log servers\nthat are out there that you can use for\n\n823\n00:42:52,180 --> 00:42:52,860\nthis purpose.\n\n824\n00:42:52,860 --> 00:42:57,650\nIn fact, if you're running Linux or\nOS X or whatever, they have it built-in.\n\n825\n00:42:57,650 --> 00:43:01,140\nIf you're running Windows, they don't, cuz\nMicrosoft has their own logging system.\n\n826\n00:43:01,140 --> 00:43:04,680\nYou can find third party sys\nlog servers pretty regularly.\n\n827\n00:43:04,680 --> 00:43:07,780\nI'm a pretty big fan of\nthe KiWi sys log servers.\n\n828\n00:43:07,780 --> 00:43:10,730\nThey are little expensive because\nsolar winds bought them, and\n\n829\n00:43:10,730 --> 00:43:11,680\nthey make good stuff.\n\n830\n00:43:11,680 --> 00:43:13,950\nThey are proud of it so it's expensive.\n\n831\n00:43:13,950 --> 00:43:16,660\nThere are freeware sys log\nservers that are out there.\n\n832\n00:43:16,660 --> 00:43:19,200\nThey are normally just a little bit\nless Functional like you can't search\n\n833\n00:43:19,200 --> 00:43:20,110\nthem and stuff.\n\n834\n00:43:20,110 --> 00:43:24,290\nBut if you get a good powerful syslog\nserver that can store into a SQL database\n\n835\n00:43:24,290 --> 00:43:29,240\nor MySQL or something, you can store\nyears' worth of syslog data and\n\n836\n00:43:29,240 --> 00:43:31,970\nquery against it and\nhave some real power there.\n\n837\n00:43:31,970 --> 00:43:36,470\nif you're implementing advanced security\ndevices, like the Cisco Mars Scanners.\n\n838\n00:43:36,470 --> 00:43:39,140\nThose guys, you can send your\nsyslog messages to them and\n\n839\n00:43:39,140 --> 00:43:42,460\nthey'll use that to track and\ndetermine whether attacks are occurring.\n\n840\n00:43:42,460 --> 00:43:45,000\nSo this is some pretty powerful\nstuff that's out there.\n\n841\n00:43:45,000 --> 00:43:46,120\nFor the show though,\n\n842\n00:43:46,120 --> 00:43:49,149\nI'm going to use a light-weight system\nlog server that I can whip up real quick.\n\n843\n00:43:50,630 --> 00:43:54,330\nIf you've never heard of it, there's\na product out there called TFTPD32.\n\n844\n00:43:54,330 --> 00:43:57,860\nAnd I can never remember the website so\nI always do a Google search.\n\n845\n00:43:57,860 --> 00:43:59,700\n>> It's real intuitive.\n\n846\n00:43:59,700 --> 00:44:01,200\n>> Yeah, it's a guy's name.\n\n847\n00:44:01,200 --> 00:44:03,480\nI think he's French or something.\n\n848\n00:44:03,480 --> 00:44:04,390\n>> He is.\n\n849\n00:44:04,390 --> 00:44:05,930\n>> Or Vietnamese?\n\n850\n00:44:05,930 --> 00:44:06,650\nOr both.\n\n851\n00:44:06,650 --> 00:44:09,630\nBut basically when you\npull up the website,\n\n852\n00:44:09,630 --> 00:44:11,670\nit's kind of an antiquated website.\n\n853\n00:44:11,670 --> 00:44:15,280\nWhen you get there, he basically\nhas this product called TFTP32.\n\n854\n00:44:15,280 --> 00:44:19,170\nIt originally it was supposed to\nbe a TFTP server and that was it.\n\n855\n00:44:19,170 --> 00:44:21,100\nHe's added more to it over time.\n\n856\n00:44:21,100 --> 00:44:24,060\nHe added DHCP, sys log, and so on.\n\n857\n00:44:24,060 --> 00:44:25,050\nIt's very light weight.\n\n858\n00:44:25,050 --> 00:44:27,110\nEasy to just fire it up and run.\n\n859\n00:44:27,110 --> 00:44:28,470\nIt's not even just 32 bit.\n\n860\n00:44:28,470 --> 00:44:31,220\nNow he has 64 bit versions and stuff.\n\n861\n00:44:31,220 --> 00:44:33,810\nSo I'm going to go into this\nlittle download section here,\n\n862\n00:44:36,130 --> 00:44:41,810\nhere we go, download.\n\n863\n00:44:41,810 --> 00:44:46,140\nI'm running a 64-bit OS, but\nI'll do the 32-bit version one anyhow, and\n\n864\n00:44:46,140 --> 00:44:49,910\nI'm going to do the standard edition.\n\n865\n00:44:49,910 --> 00:44:52,500\nHe's got where you can have an installer,\nwhere it will actually install on your\n\n866\n00:44:52,500 --> 00:44:55,280\nmachine, or a portable one that\nyou just run from a directory.\n\n867\n00:44:55,280 --> 00:44:57,910\nAs well as a service one that\nwill run in the background.\n\n868\n00:44:57,910 --> 00:45:00,210\nThat's good if you're gonna\nrun this on a server.\n\n869\n00:45:00,210 --> 00:45:02,713\nI just need it one time, so\nI'm just gonna do the standard one here.\n\n870\n00:45:04,431 --> 00:45:06,892\nAnd I'll just take this.\n\n871\n00:45:16,389 --> 00:45:20,730\nAnd we'll just do that right here.\n\n872\n00:45:20,730 --> 00:45:26,326\nAll right,\nnow [LAUGH] Windows has protected me.\n\n873\n00:45:29,113 --> 00:45:32,060\nThere we go.\nRun it anyway, Windows, let me be.\n\n874\n00:45:32,060 --> 00:45:34,780\nThere we go.\nI need to clear it through my firewall,\n\n875\n00:45:34,780 --> 00:45:36,420\notherwise it's not going to\nbe able to get connection.\n\n876\n00:45:36,420 --> 00:45:37,980\nSo I'll allow that.\n\n877\n00:45:37,980 --> 00:45:40,355\nAnd I also need to go into\nthe settings here and\n\n878\n00:45:40,355 --> 00:45:43,825\nturn off DHCP because I don't need that.\n\n879\n00:45:43,825 --> 00:45:48,945\nI don't want to bring up a rogue\nDHCP server on my network.\n\n880\n00:45:48,945 --> 00:45:51,255\nThere we go, all right.\n\n881\n00:45:51,255 --> 00:45:56,685\nSo this is TFTPD32,\nit is not a flashy complex program,\n\n882\n00:45:56,685 --> 00:46:02,090\nbut what it allows me to do\nis to take my system and,\n\n883\n00:46:02,090 --> 00:46:04,500\nwhere's my other network adapter?\n\n884\n00:46:07,110 --> 00:46:07,990\nThere it is.\n\n885\n00:46:07,990 --> 00:46:12,770\nI can take my system and I can turn\nit into a TFTP server or client,\n\n886\n00:46:12,770 --> 00:46:14,200\nsyslog server or whatever.\n\n887\n00:46:14,200 --> 00:46:16,420\nAnd that's what I wanna be,\na syslog server.\n\n888\n00:46:16,420 --> 00:46:21,172\nSo my client is now a syslog server and\nwe can configure the router to say hey\n\n889\n00:46:21,172 --> 00:46:25,330\nwhen you generate log messages go\nahead and send them over here.\n\n890\n00:46:25,330 --> 00:46:27,931\nAnd it looks like my routers rebooted so\nlet me get back in to that thing.\n\n891\n00:46:36,521 --> 00:46:39,687\nYou know SHS is still shown as running,\ninteresting, you know what,\n\n892\n00:46:39,687 --> 00:46:42,329\ni'm just going to go in and\ngenerate these certificates.\n\n893\n00:46:43,470 --> 00:46:47,860\nSo I'm gonna do that\ncrypto key en rsa again.\n\n894\n00:46:47,860 --> 00:46:52,750\nAnd this time I'm gonna go ahead and\njust do 512 bits.\n\n895\n00:46:52,750 --> 00:46:53,340\nAll right.\n\n896\n00:46:53,340 --> 00:46:55,050\nNow notice that happened pretty quick.\n\n897\n00:46:55,050 --> 00:46:56,390\nCuz that's a small key.\n\n898\n00:46:56,390 --> 00:46:59,760\nIt's not terribly effective and the system\nwas able to generate that very quickly.\n\n899\n00:47:01,080 --> 00:47:02,220\nIf I take SSH.\n\n900\n00:47:02,220 --> 00:47:09,190\nSSH is still reflecting as being running,\nthat is interesting that it would do that.\n\n901\n00:47:09,190 --> 00:47:11,650\nNotice how I didn't\nreally get any warning.\n\n902\n00:47:11,650 --> 00:47:17,690\nI didn't have terminal monitor on,\n\n903\n00:47:17,690 --> 00:47:20,330\nso a warning might have come out and\nI just didn't see it.\n\n904\n00:47:20,330 --> 00:47:24,000\nBut if I do crypto key gen rsa.\n\n905\n00:47:24,000 --> 00:47:26,390\nAnd I'll replace that.\n\n906\n00:47:26,390 --> 00:47:29,320\nI'm gonna do a 768-bit key this time.\n\n907\n00:47:29,320 --> 00:47:33,340\nIt took a little bit longer that time\ncuz it's a more complex key, and\n\n908\n00:47:33,340 --> 00:47:37,700\nnow I've got a key suitable for\nSSH version one, but not version two.\n\n909\n00:47:37,700 --> 00:47:42,550\nAnd then if I do crypto key gen rsa, and\n\n910\n00:47:42,550 --> 00:47:49,140\nI do a 1,024 or higher than I'll have\none suitable for SSH version two.\n\n911\n00:47:49,140 --> 00:47:49,840\nAll right?\n\n912\n00:47:49,840 --> 00:47:53,980\nNow, one of the tricky parts is that you\nguys might've noticed when I did a show\n\n913\n00:47:53,980 --> 00:47:55,760\nip ssh.\n\n914\n00:47:55,760 --> 00:48:00,691\nThat it says SNH enabled\nversion 1.99 why not version 2?\n\n915\n00:48:00,691 --> 00:48:05,042\nWell it's actually in the SH\nstandard that if you support both,\n\n916\n00:48:05,042 --> 00:48:09,408\nversion one and version two\nThen they have to reflect 1.99.\n\n917\n00:48:09,408 --> 00:48:12,020\nAll right, so that's what that means.\n\n918\n00:48:12,020 --> 00:48:14,847\nIf I hard set it to just version two,\nthen that'll change.\n\n919\n00:48:14,847 --> 00:48:18,138\nBut version one clients won't\nbe able to connect anymore, and\n\n920\n00:48:18,138 --> 00:48:19,785\nthat's honestly a good idea.\n\n921\n00:48:19,785 --> 00:48:20,690\n>> Mm-hm, yep.\n\n922\n00:48:20,690 --> 00:48:26,548\nI'll go ahead and\nissue the IP SSH version two command and\n\n923\n00:48:26,548 --> 00:48:30,220\nnow, SSH enabled version 2.0.\n\n924\n00:48:30,220 --> 00:48:31,891\nNow we're able to reflect that.\n\n925\n00:48:34,161 --> 00:48:36,370\nNow we are in business.\n\n926\n00:48:36,370 --> 00:48:38,330\nWe've got SSH configured.\n\n927\n00:48:38,330 --> 00:48:39,630\nWhat do we have to do?\n\n928\n00:48:39,630 --> 00:48:43,760\nTriple A new model, we had to create\na user name and then we had to assign\n\n929\n00:48:43,760 --> 00:48:46,670\na domain name, and then finally\ngenerate the certificate right?\n\n930\n00:48:46,670 --> 00:48:48,660\n>> Yeah.\n>> So four steps there to getting SSH\n\n931\n00:48:48,660 --> 00:48:49,840\nenabled on our system.\n\n932\n00:48:50,850 --> 00:48:54,510\nNow if you're gonna use the Cisco\nConfiguration Professional you also need\n\n933\n00:48:54,510 --> 00:48:57,960\nweb access, that means the web\nserver needs to be turned on.\n\n934\n00:48:57,960 --> 00:49:01,990\nSo that would be IP HTTP server right.\n\n935\n00:49:03,250 --> 00:49:05,580\n>> And IP HTTP secure dash server.\n\n936\n00:49:07,820 --> 00:49:08,840\n>> Yeah http server,\n\n937\n00:49:08,840 --> 00:49:12,750\nthat just turns on the regular\nport 80 unencrypted web access.\n\n938\n00:49:12,750 --> 00:49:16,860\nIP HTTP secure dash server,\nthat turns on SSL functionality.\n\n939\n00:49:16,860 --> 00:49:19,640\nOkay, so\nnow we'll be able to connect with SSL.\n\n940\n00:49:19,640 --> 00:49:21,960\nNow, let's see.\n\n941\n00:49:21,960 --> 00:49:24,050\nDoes it let me, oh shoot.\n\n942\n00:49:26,110 --> 00:49:29,890\nNow one of the problems that we have is we\ndon't want to use the non-secure version\n\n943\n00:49:29,890 --> 00:49:32,870\nof HTTP, so\nwe really want to attach and ACL to it.\n\n944\n00:49:32,870 --> 00:49:35,250\nAnd I know we talked about\nthat in the last show, but\n\n945\n00:49:35,250 --> 00:49:37,010\nwe'll see it again in\nthe CCP once we get in.\n\n946\n00:49:37,010 --> 00:49:38,580\n>> Yeah.\n>> So we'll need to configure that or\n\n947\n00:49:38,580 --> 00:49:39,890\nsecure it a little more.\n\n948\n00:49:39,890 --> 00:49:42,070\nAnd you know what?\nI'm about to forget a step.\n\n949\n00:49:42,070 --> 00:49:46,200\nThe other thing is,\nHTTP has its own authentication settings.\n\n950\n00:49:46,200 --> 00:49:50,810\nSo because I'm using a local\ndatabase I need to say,\n\n951\n00:49:50,810 --> 00:49:54,470\nIP HTTP authentication local.\n\n952\n00:49:54,470 --> 00:49:57,770\nSo that it'll know to use the use-name and\npasswords right here on the router.\n\n953\n00:49:57,770 --> 00:50:01,310\nIf we were using Radius,\nI know we covered that in the Radius show.\n\n954\n00:50:02,560 --> 00:50:03,510\nAll right.\n\n955\n00:50:03,510 --> 00:50:10,310\nSo at this point, now my router has SSH\nworking,and it has HTTP and HTTPS working.\n\n956\n00:50:10,310 --> 00:50:12,180\nTechnically Telnet is working right now.\n\n957\n00:50:12,180 --> 00:50:13,070\nI haven't secured that.\n\n958\n00:50:13,070 --> 00:50:15,490\nBut we'll do that in the CCP also.\n\n959\n00:50:15,490 --> 00:50:20,280\nSo now, I'm at a point where I can use\nthe Cisco Configuration Professional and\n\n960\n00:50:20,280 --> 00:50:21,630\nI wasn't able to do that before.\n\n961\n00:50:23,140 --> 00:50:23,800\nAll right.\n\n962\n00:50:23,800 --> 00:50:25,710\nSo I'm gonna go ahead and\njust save that config.\n\n963\n00:50:27,510 --> 00:50:28,760\nThere we go.\n\n964\n00:50:28,760 --> 00:50:33,997\nAnd now I'll fire up the CCP,\nwhich I had running back here somewhere.\n\n965\n00:50:37,095 --> 00:50:37,650\nHere we go.\n\n966\n00:50:37,650 --> 00:50:39,080\nOh, but you know what?\n\n967\n00:50:39,080 --> 00:50:39,860\nI rebooted the router.\n\n968\n00:50:39,860 --> 00:50:43,400\nSo I do need to go and\nrediscover the router real quick.\n\n969\n00:50:43,400 --> 00:50:43,900\nSo let me.\n\n970\n00:50:46,190 --> 00:50:47,360\nLet me just read you that real quick.\n\n971\n00:50:49,510 --> 00:50:50,190\nAnd actually this guy.\n\n972\n00:50:51,510 --> 00:50:54,510\nWhoops.\nSee my, I'm rediscovering the router, and\n\n973\n00:50:54,510 --> 00:50:58,470\nsee how it's discovered a new certificate\nand it's warning me about that right?\n\n974\n00:50:58,470 --> 00:51:00,640\nThat's why I'm redoing the discovery.\n\n975\n00:51:00,640 --> 00:51:04,705\nThe CCP will cache the certificate\nthat was on the system before.\n\n976\n00:51:04,705 --> 00:51:08,573\nSo it's just gonna make me\ndelete this out, isn't it?\n\n977\n00:51:08,573 --> 00:51:10,616\nSo we'll just-\n>> Right, then discover that one again.\n\n978\n00:51:10,616 --> 00:51:12,462\n>> Yeah, that's not a big deal.\n\n979\n00:51:12,462 --> 00:51:13,657\n>> Yeah.\n\n980\n00:51:13,657 --> 00:51:17,559\n>> All right, so\nwe'll punch in old 192.168.0.1.\n\n981\n00:51:17,559 --> 00:51:19,070\nWe're gonna log in as me, right?\n\n982\n00:51:19,070 --> 00:51:24,280\nDon, Cisco, one,two,three, and\nwe will choose to connect securely.\n\n983\n00:51:24,280 --> 00:51:26,190\nYou'll see 443 and 22, right?\n\n984\n00:51:26,190 --> 00:51:29,120\nIt's using HTTPS and SSH.\n\n985\n00:51:29,120 --> 00:51:32,170\nIf we don't connect securely,\nit's using 80 and 23.\n\n986\n00:51:32,170 --> 00:51:35,860\nIf I've already disabled those,\nthat's not gonna work right?\n\n987\n00:51:35,860 --> 00:51:37,690\nBut we actually have\nboth enabled right now.\n\n988\n00:51:37,690 --> 00:51:39,200\nSo I could connect either way.\n\n989\n00:51:39,200 --> 00:51:42,680\nBut since I want to secure the device,\nif I connect non securely, and\n\n990\n00:51:42,680 --> 00:51:44,750\nthen secure it,\nI'm gonna disconnect myself.\n\n991\n00:51:44,750 --> 00:51:46,351\nSo that's why I'm telling\nit to connect securely.\n\n992\n00:51:51,728 --> 00:51:54,380\nLet's rediscover that one, and\nthen we should be in business.\n\n993\n00:51:56,460 --> 00:52:00,740\nNow, once it's discovered, I'm gonna\ngo in and the first thing I'm gonna do\n\n994\n00:52:00,740 --> 00:52:03,470\nis I'm gonna validate all\nthe commands that I just entered.\n\n995\n00:52:03,470 --> 00:52:06,000\nBecause If I left something out,\nthen we need to fix that, right.\n\n996\n00:52:06,000 --> 00:52:08,550\nSo I do wanna validate\nthe settings we've already done.\n\n997\n00:52:08,550 --> 00:52:11,415\nAnd then we'll configure some\nof the additional security too,\n\n998\n00:52:11,415 --> 00:52:12,323\nincluding sys log.\n\n999\n00:52:14,076 --> 00:52:16,690\nAll right, so\nI'm just gonna jump under configure here.\n\n1000\n00:52:16,690 --> 00:52:20,980\nAnd the settings that we want are kind\nof spread across multiple places.\n\n1001\n00:52:20,980 --> 00:52:23,230\nSo you've got the security folder and\nyou would think, oh,\n\n1002\n00:52:23,230 --> 00:52:25,690\nall the security stuff\nI need is right there.\n\n1003\n00:52:25,690 --> 00:52:26,850\nUnfortunately, it isn't.\n\n1004\n00:52:26,850 --> 00:52:29,800\nA lot of it is up here under router.\n\n1005\n00:52:29,800 --> 00:52:33,420\nAnd if you go under router,\nyou'll see this router access folder and\n\n1006\n00:52:33,420 --> 00:52:36,750\nthis is really the big one as far as\nconfiguring management access, in fact,\n\n1007\n00:52:36,750 --> 00:52:40,100\nwe can see management access right there,\nokay?\n\n1008\n00:52:40,100 --> 00:52:43,242\nBut before I get into that, let's start\nwith just verifying what I've done.\n\n1009\n00:52:43,242 --> 00:52:48,430\nI'm gonna check SSH, and here its\ntelling me that I do have a key and\n\n1010\n00:52:48,430 --> 00:52:52,080\nit's happy so no need to generate\na new one, so I know that SSH is okay.\n\n1011\n00:52:53,090 --> 00:52:56,250\nThe other thing is the web access, right?\n\n1012\n00:52:56,250 --> 00:52:58,490\nWhich we turned on securely and\n\n1013\n00:52:58,490 --> 00:53:02,970\nthat one is actually not much to configure\nhere, cuz it knows we're already set up.\n\n1014\n00:53:02,970 --> 00:53:05,640\nAnd we can't adjust it,\ncuz we would disconnect ourselves.\n\n1015\n00:53:05,640 --> 00:53:08,590\nI think it does actually have\na folder in here somewhere, but\n\n1016\n00:53:08,590 --> 00:53:10,670\nwe really don't have to mess with it.\n\n1017\n00:53:10,670 --> 00:53:14,600\nThe thing that we need to mess\nwith in here, is management access\n\n1018\n00:53:14,600 --> 00:53:18,390\nwhere we can tailor who's allowed to\nconnect to these protocols and how.\n\n1019\n00:53:19,830 --> 00:53:23,440\nSo in here is where we can\nbasically create these.\n\n1020\n00:53:23,440 --> 00:53:25,490\n>> Yeah.\n>> Pseudo ACLs right?\n\n1021\n00:53:25,490 --> 00:53:28,430\nWe don't see them as access\ncontrol lists here in the GUI, but\n\n1022\n00:53:28,430 --> 00:53:29,700\nthat is what they are in the back end.\n\n1023\n00:53:30,790 --> 00:53:34,780\nSo I might choose to add in,\nentire networks or\n\n1024\n00:53:34,780 --> 00:53:37,370\nindividual hosts that\nare allowed to connect.\n\n1025\n00:53:37,370 --> 00:53:41,110\nSo for example, if I know that my PC\nshould be the only one that can connect I\n\n1026\n00:53:41,110 --> 00:53:43,600\ncan come in and put a specific IP address.\n\n1027\n00:53:43,600 --> 00:53:47,620\nOr if I have a management network,\nI can put that range in.\n\n1028\n00:53:47,620 --> 00:53:50,436\nAnd so I'll just say the internal network.\n\n1029\n00:53:55,005 --> 00:53:57,890\nAnd then you can specify the interface\nthey're allowed to connect to.\n\n1030\n00:53:57,890 --> 00:54:02,230\nIf you're doing a management LAN, you'll\nhave a dedicated interface for this and\n\n1031\n00:54:02,230 --> 00:54:04,450\nyou would pick that dedicated interface so\n\n1032\n00:54:04,450 --> 00:54:08,350\nthat you wouldn't allow connections\non the other interfaces at all.\n\n1033\n00:54:08,350 --> 00:54:11,260\nSo for\nme I'm just gonna use my inside interface.\n\n1034\n00:54:11,260 --> 00:54:13,940\nI'll allow the Cisco\nconfiguration protocols, and\n\n1035\n00:54:13,940 --> 00:54:19,440\nI'm gonna choose to allow secure only\nthat's gonna turn off Telnet and HTTP.\n\n1036\n00:54:19,440 --> 00:54:22,876\nNotice it turns off SNMP also,\n\n1037\n00:54:22,876 --> 00:54:27,720\nSNMP does not have encryption built\nin the protocol it's just not there.\n\n1038\n00:54:27,720 --> 00:54:29,374\nAnd so you can't.\n\n1039\n00:54:29,374 --> 00:54:32,840\n>> Yeah.\n>> Can't use it by default, all right.\n\n1040\n00:54:32,840 --> 00:54:36,770\nI'm gonna turn that on, cuz we are gonna\nwork a little bit with SNMP later.\n\n1041\n00:54:36,770 --> 00:54:37,700\nJust keep in mind that,\n\n1042\n00:54:37,700 --> 00:54:41,340\nthere's not really anything you can do to\nencrypt SNMP, with the protocol itself.\n\n1043\n00:54:41,340 --> 00:54:45,100\nYou can couple it with IP sec or\na VPN tunnel, or whatever,\n\n1044\n00:54:45,100 --> 00:54:46,340\nand encrypt it that way.\n\n1045\n00:54:46,340 --> 00:54:48,990\nBut SNMP itself,\ndoes not support encryption.\n\n1046\n00:54:48,990 --> 00:54:51,404\n>> Right.\n\n1047\n00:54:51,404 --> 00:54:53,200\n>> All right.\n\n1048\n00:54:54,220 --> 00:54:55,210\nWell, there's a fun one.\n\n1049\n00:54:55,210 --> 00:54:57,395\nSSH is disabled on this router.\n\n1050\n00:54:57,395 --> 00:55:00,950\n>> [LAUGH]\n>> Is it now?\n\n1051\n00:55:02,190 --> 00:55:03,900\nWell, let's go double check that.\n\n1052\n00:55:03,900 --> 00:55:07,660\nSo it's telling me that SSH is\ndisabled which is kind of funny.\n\n1053\n00:55:07,660 --> 00:55:11,930\nWe went under the SSH screen\nto see that SSH was happy, and\n\n1054\n00:55:11,930 --> 00:55:18,380\nI know that SSH is happy because\nI was already in the system.\n\n1055\n00:55:18,380 --> 00:55:20,810\nI'm not entirely sure what it's mad about.\n\n1056\n00:55:20,810 --> 00:55:23,500\nI'm just applying the changes\nwe made right there.\n\n1057\n00:55:23,500 --> 00:55:24,430\nSo we'll go find out.\n\n1058\n00:55:26,050 --> 00:55:30,930\nIf I go into the VTY lines,\nwhere's the transport?\n\n1059\n00:55:30,930 --> 00:55:33,270\nOh, here, input protocols allowed none.\n\n1060\n00:55:33,270 --> 00:55:35,890\nNow I know for a fact that's\nnot what is set on that router.\n\n1061\n00:55:35,890 --> 00:55:40,830\nLet's just verify that,\n\n1062\n00:55:40,830 --> 00:55:46,868\nall right so on my VTY line I do not\nhave a transport input command, right?\n\n1063\n00:55:46,868 --> 00:55:50,872\nIf we wanna turn off Telnet, the way you\ndo it is with the transport input command.\n\n1064\n00:55:50,872 --> 00:55:55,586\nYou say transport input, and\nthen you list each of the protocols\n\n1065\n00:55:55,586 --> 00:56:00,478\nthat you want to support and\nyou'll see different routers support\n\n1066\n00:56:00,478 --> 00:56:04,494\ndifferent protocols, and so\nthis one supports SSH and\n\n1067\n00:56:04,494 --> 00:56:09,495\nTelnet as well as an assortment of\nother crazy things we don't use.\n\n1068\n00:56:09,495 --> 00:56:16,540\nLike rlogin which is an ancient\nUnix log in protocol,MOP,B120.\n\n1069\n00:56:16,540 --> 00:56:20,650\nSo, these are not commonly used protocols.\n\n1070\n00:56:20,650 --> 00:56:24,790\nSo, if we say transport\ninput Telnet SSH that\n\n1071\n00:56:24,790 --> 00:56:28,020\nwill turn off everything except Telnet and\nSSH.\n\n1072\n00:56:28,020 --> 00:56:30,790\nIf you leave it empty though,\nthe default is all.\n\n1073\n00:56:30,790 --> 00:56:32,670\nAll of these are supported.\n\n1074\n00:56:32,670 --> 00:56:36,860\nThe CCP is getting confused though and\nit thinks I'm set to none,\n\n1075\n00:56:36,860 --> 00:56:40,950\nwhich is bizarre, but the easy way to\nfix that is just to adjust it here.\n\n1076\n00:56:40,950 --> 00:56:44,400\nSo I'm gonna pull it up and on the input\nprotocol, I'm just gonna say SSH.\n\n1077\n00:56:47,310 --> 00:56:48,180\nAll right.\n\n1078\n00:56:48,180 --> 00:56:49,670\nAnd we'll go ahead and deliver that.\n\n1079\n00:56:49,670 --> 00:56:51,900\nNow notice the command that it's and\nI cleared it.\n\n1080\n00:56:51,900 --> 00:56:54,220\nWell, I guess we can look right here.\n\n1081\n00:56:54,220 --> 00:57:01,400\nSo if I pull that same line,\nlet me pull that same line back up.\n\n1082\n00:57:03,140 --> 00:57:03,640\nWhoops.\n\n1083\n00:57:05,580 --> 00:57:06,440\nThere.\n\n1084\n00:57:06,440 --> 00:57:09,160\nSee how it added transport input SSH.\n\n1085\n00:57:09,160 --> 00:57:14,110\nSo, for some reason, it just assumed was\nnone, when the default was actually all.\n\n1086\n00:57:14,110 --> 00:57:17,340\nSo, CCP can get a little confused.\n\n1087\n00:57:17,340 --> 00:57:18,656\n>> Yeah.\n>> Alright, but\n\n1088\n00:57:18,656 --> 00:57:23,030\nnow it is just allowing SSH, so we're\n>> step more secure than we were before.\n\n1089\n00:57:23,030 --> 00:57:25,680\nAnd I can see it right here,\njust allowing SSH.\n\n1090\n00:57:27,210 --> 00:57:30,010\nAlright, so our SSH access is good.\n\n1091\n00:57:30,010 --> 00:57:32,280\nUnder management access, we set, so\n\n1092\n00:57:32,280 --> 00:57:36,750\nthat the internal network could use,\nSSH, HTTP, and so on.\n\n1093\n00:57:36,750 --> 00:57:38,951\nYou might have, for example,\nlet's say you have a help desk team.\n\n1094\n00:57:38,951 --> 00:57:42,792\nAnd the help desk team is\non the 192.168.1 network.\n\n1095\n00:57:42,792 --> 00:57:47,198\nYou might want to allow them to use\nthe Cisco Configuration Professional, but\n\n1096\n00:57:47,198 --> 00:57:48,560\nnot SSH.\n\n1097\n00:57:48,560 --> 00:57:51,440\nSo you might wanna restrict things,\nand so you can add that in.\n\n1098\n00:57:51,440 --> 00:57:53,275\nYou can customize this\nto your heart's content.\n\n1099\n00:57:56,729 --> 00:58:00,170\nAnd so I'm gonna go in here and\njust add, basically the same thing.\n\n1100\n00:58:00,170 --> 00:58:02,580\nExcept, I'm gonna check, allow Cisco CP.\n\n1101\n00:58:02,580 --> 00:58:04,110\nAnd when we do that,\n\n1102\n00:58:04,110 --> 00:58:08,670\nsee how it's highlighting all these\nother ones like HTPS, RCP, and so on.\n\n1103\n00:58:08,670 --> 00:58:13,010\nWell that's because, the Cisco\nconfiguration professionally uses those\n\n1104\n00:58:13,010 --> 00:58:14,980\nand if I uncheck them,\nsee what it's doing?\n\n1105\n00:58:14,980 --> 00:58:19,110\nIt's kind of breaking things, so there's\na little bit of a problem that we have\n\n1106\n00:58:19,110 --> 00:58:23,620\nin that the CCP depends\non these other protocols.\n\n1107\n00:58:23,620 --> 00:58:28,100\nSo, we can do the reverse,\nwe can not allow the Cisco CP, but\n\n1108\n00:58:28,100 --> 00:58:32,650\nallow SSH, but we can't do just\nthe GY without the command line.\n\n1109\n00:58:32,650 --> 00:58:34,280\nSo it's a little bit of a hassle.\n\n1110\n00:58:34,280 --> 00:58:37,730\nI actually have seen a hack\nkinda way of achieving it, but\n\n1111\n00:58:37,730 --> 00:58:40,620\nit's not something you want to do.\n\n1112\n00:58:41,760 --> 00:58:44,050\nBut there are options like\nthat that are available.\n\n1113\n00:58:45,170 --> 00:58:46,720\nAll right, so at this point,\n\n1114\n00:58:46,720 --> 00:58:51,970\nwe're doing pretty good as far as\nour system is just allowing SSH now.\n\n1115\n00:58:51,970 --> 00:58:54,000\nOur Configuration professional\nis running and happy,\n\n1116\n00:58:54,000 --> 00:58:59,110\nwe've created a list here that's\neffectively disabling HTTP.\n\n1117\n00:58:59,110 --> 00:59:00,890\nAnd I didn't test that.\n\n1118\n00:59:00,890 --> 00:59:01,900\nLet's test that out.\n\n1119\n00:59:01,900 --> 00:59:09,710\nIf I try and browse, to that router, I'm\njust gonna try and browse to 192.168.0.1.\n\n1120\n00:59:09,710 --> 00:59:12,920\nAnd I'm not getting anything.\n\n1121\n00:59:12,920 --> 00:59:16,870\nNow I know the HTTP server is enabled but\nI'm not getting anything.\n\n1122\n00:59:16,870 --> 00:59:23,300\nIf I add HTTPS to it, alright,\nnow I get my certificate warning and\n\n1123\n00:59:23,300 --> 00:59:28,210\nI get the chance to log in and\nthere's the Web interface for this router.\n\n1124\n00:59:28,210 --> 00:59:31,310\nAlright, so we've secured HTTP and\n\n1125\n00:59:31,310 --> 00:59:35,510\nwe've secured our console,\nour SSH and Telnet access.\n\n1126\n00:59:35,510 --> 00:59:38,690\nSo those are secured, now we're ready\nto move into some more advanced things.\n\n1127\n00:59:38,690 --> 00:59:40,152\n>> Alright.\n\n1128\n00:59:40,152 --> 00:59:42,220\nAll right, I talked to long,\ndidn't I, Ronnie?\n\n1129\n00:59:42,220 --> 00:59:43,300\nTimer is up.\n\n1130\n00:59:43,300 --> 00:59:45,900\nSo, we still have Syslog,\n\n1131\n00:59:45,900 --> 00:59:48,540\nwhich I was kinda building up\nto that we need to get into.\n\n1132\n00:59:48,540 --> 00:59:50,960\nAnd, oh,\nwe got a whole slew of other stuff.\n\n1133\n00:59:50,960 --> 00:59:52,415\nSo.\n>> SNMP, yeah.\n\n1134\n00:59:52,415 --> 00:59:53,405\n>> All right, well let's do this.\n\n1135\n00:59:53,405 --> 00:59:56,055\nLet's go ahead and stop here, and when we\nget back, we're gonna continue on with our\n\n1136\n00:59:56,055 --> 00:59:59,260\nsecurity protocols, we'll tackle a few\nof those, and see what damage we can do.\n\n1137\n00:59:59,260 --> 01:00:00,555\n>> Yep.\n>> All right stay tuned,\n\n1138\n01:00:00,555 --> 01:00:01,413\nwe'll be back after this.\n\n1139\n01:00:01,413 --> 01:00:04,488\n[NOISE].\n\n1140\n01:00:04,488 --> 01:00:09,892\n[SOUND].\n\n1141\n01:00:09,892 --> 01:00:12,150\nAlright welcome back everybody.\n\n1142\n01:00:12,150 --> 01:00:15,330\nWe were just discussing our total\nlack of a craft services table here.\n\n1143\n01:00:15,330 --> 01:00:15,940\n>> That's right.\n\n1144\n01:00:15,940 --> 01:00:16,950\n>> We need catering.\n\n1145\n01:00:16,950 --> 01:00:20,210\nSo-\n>> See I was thinking oF stuff that\n\n1146\n01:00:20,210 --> 01:00:22,110\nladies do together on like\na Saturday afternoon.\n\n1147\n01:00:22,110 --> 01:00:25,144\n>> No it's actually it's a table and\nit has nothing but craft singles.\n\n1148\n01:00:25,144 --> 01:00:26,472\n[CROSSTALK] Cheese slices and that's it.\n\n1149\n01:00:26,472 --> 01:00:29,770\n>> That would have been the other one\nthat I would have thought of immediately.\n\n1150\n01:00:29,770 --> 01:00:33,082\n>> All right well, before the break,\nwe were talking about verifying that basic\n\n1151\n01:00:33,082 --> 01:00:37,570\nconfiguration [INAUDIBLE] so SSH is\nsecured now, the web interface is secure.\n\n1152\n01:00:37,570 --> 01:00:39,340\nWe also started talking about SysLog.\n\n1153\n01:00:39,340 --> 01:00:42,120\nAnd I had brought up a Syslog\nserver on my laptop, but\n\n1154\n01:00:42,120 --> 01:00:43,930\nwe didn't actually fire it up, right?\n\n1155\n01:00:43,930 --> 01:00:48,050\nSo here's that Syslog server, it's just\nsitting here and it's doing nothing.\n\n1156\n01:00:48,050 --> 01:00:51,950\nSo, what we're going to do is take our\nrouter and tell it, hey when you generate\n\n1157\n01:00:51,950 --> 01:00:54,880\nlog messages don't just keep them to\nyourself where they will get lost or\n\n1158\n01:00:54,880 --> 01:00:56,170\ncleared by an attacker.\n\n1159\n01:00:56,170 --> 01:00:57,790\nWe need to offload them.\n\n1160\n01:00:57,790 --> 01:01:05,240\nAnd so here under the router tab in the\nCCP, there is a logging entry down here,\n\n1161\n01:01:05,240 --> 01:01:08,720\nand this is where we can specify\nwhether we want to use a Syslog server.\n\n1162\n01:01:08,720 --> 01:01:11,670\nAnd you'll see the default is that it is\ndisabled, so I'm just gonna edit that.\n\n1163\n01:01:13,280 --> 01:01:14,030\nAll right.\n\n1164\n01:01:14,030 --> 01:01:15,240\nAnd I'm gonna enable logging.\n\n1165\n01:01:15,240 --> 01:01:17,850\nI'm gonna put in my laptop's IP.\n\n1166\n01:01:17,850 --> 01:01:20,660\nNow you'd put in whoever your\nSyslog server was, right?\n\n1167\n01:01:20,660 --> 01:01:23,280\nSo if you've got a Linux box or\nwhatever you're using, great.\n\n1168\n01:01:23,280 --> 01:01:26,790\nIf you got a third party product, this\nwould be the IP address of that machine.\n\n1169\n01:01:26,790 --> 01:01:30,770\nFor your logging level, you can,\nactually, choose debugging, if you want,\n\n1170\n01:01:30,770 --> 01:01:32,950\nwhich would be extremely detailed.\n\n1171\n01:01:32,950 --> 01:01:35,790\nAnd, if you turned on debugs,\nyou'd start to get those messages.\n\n1172\n01:01:35,790 --> 01:01:37,130\nIt can be traffic overflow.\n\n1173\n01:01:37,130 --> 01:01:41,290\nSo, the default is informational and\nthat's, usually, what people want.\n\n1174\n01:01:41,290 --> 01:01:44,230\n>> Now, Don, that buffer size\nlooks a little small there.\n\n1175\n01:01:44,230 --> 01:01:48,580\n>> So, the buffer size is, it looks small,\nit's actually a pretty decent size.\n\n1176\n01:01:49,800 --> 01:01:51,790\nThis logging buffer down here,\n\n1177\n01:01:51,790 --> 01:01:55,300\nthat's talking about the buffer\non the router itself.\n\n1178\n01:01:55,300 --> 01:01:59,810\nThe only time we care about that, or\ncare about that size, is if our server\n\n1179\n01:01:59,810 --> 01:02:03,985\ngoes down then this would be the amount of\nlogs the router is storing on it's own.\n\n1180\n01:02:03,985 --> 01:02:08,020\n4 kilobytes doesn't sound like a lot but\nit's actually a pretty descent amount.\n\n1181\n01:02:08,020 --> 01:02:10,550\nIf you were just to type raw text,\n\n1182\n01:02:10,550 --> 01:02:14,120\nit would be the equivalent of\nabout four pages of complete text.\n\n1183\n01:02:14,120 --> 01:02:17,820\nSo it's a decent amount,\nyou might choose to make that bigger.\n\n1184\n01:02:17,820 --> 01:02:21,440\nJust keep in mind that this buffer\nis actually being stored in RAM.\n\n1185\n01:02:21,440 --> 01:02:25,990\nSo the more you take that's RAM\ncoming away from the router, so\n\n1186\n01:02:25,990 --> 01:02:30,500\nI try not to go any larger\nthan 64K in most cases.\n\n1187\n01:02:30,500 --> 01:02:33,390\nJust to give you guys a point of\nreference, if you were to take and\n\n1188\n01:02:33,390 --> 01:02:36,400\nI think I said this in another show\nthe encyclopedia Britannica for\n\n1189\n01:02:36,400 --> 01:02:38,630\nthose of you who remember\nwhat an encyclopedia is.\n\n1190\n01:02:38,630 --> 01:02:43,580\nIf you were to take volumes\na through z of that encyclopedia and\n\n1191\n01:02:43,580 --> 01:02:47,710\njust type the text right, no formatting,\nno pictures whatever just the straight\n\n1192\n01:02:47,710 --> 01:02:50,350\ntext which is exactly what\na log message would be.\n\n1193\n01:02:50,350 --> 01:02:54,680\nThe entire encyclopedia set would\nbe about one megabyte of data.\n\n1194\n01:02:54,680 --> 01:02:55,290\n>> Yeah.\n\n1195\n01:02:55,290 --> 01:02:58,820\n>> So, when we talk about a kilobyte,\nwell, you know, that's a,\n\n1196\n01:02:58,820 --> 01:03:00,760\nwhat one hundredth of a megabyte?\n\n1197\n01:03:00,760 --> 01:03:04,010\nSo it is a decent amount of data,\n\n1198\n01:03:04,010 --> 01:03:08,530\nseveral pages worth of data, and\nso it's usually more than enough.\n\n1199\n01:03:08,530 --> 01:03:10,730\nWe could, we'll double it.\n\n1200\n01:03:10,730 --> 01:03:11,420\nWe'll go crazy.\n\n1201\n01:03:11,420 --> 01:03:12,100\nWe'll go to eight k.\n\n1202\n01:03:14,490 --> 01:03:15,910\nOverwhelm our router.\n\n1203\n01:03:15,910 --> 01:03:17,310\n>> I know, it's craziness.\n\n1204\n01:03:17,310 --> 01:03:20,590\nIt's a wild house here at ITProTV.\n\n1205\n01:03:20,590 --> 01:03:22,060\n>> Throwing caution to the wind.\n\n1206\n01:03:22,060 --> 01:03:26,035\n>> All right that is now sent and\ndeployed to my router.\n\n1207\n01:03:26,035 --> 01:03:28,135\nThe router's got it.\n\n1208\n01:03:28,135 --> 01:03:32,628\nAnd now, as it starts to generate\nlog messages, those, in theory,\n\n1209\n01:03:32,628 --> 01:03:35,685\nwill be getting sent to my Syslog server.\n\n1210\n01:03:35,685 --> 01:03:37,705\nI'm going to generate some activity.\n\n1211\n01:03:37,705 --> 01:03:40,665\nFirst, I'm gonna save my Configuration.\n\n1212\n01:03:40,665 --> 01:03:43,984\nI need to go there, start Configuration.\n\n1213\n01:03:48,068 --> 01:03:54,164\nAll right, now I'll do something like\nI'll take the Internet Interface,\n\n1214\n01:03:54,164 --> 01:03:57,110\nwhich is GI-00 for me.\n\n1215\n01:03:57,110 --> 01:04:00,175\nThis one, and\nI'll just take it off line, okay.\n\n1216\n01:04:00,175 --> 01:04:03,435\nSomebody disable thats why I'm doing\na shutdown on the interface, alright, and\n\n1217\n01:04:03,435 --> 01:04:05,715\nthen I'll wait just a second,\nand I'll turn it back on.\n\n1218\n01:04:05,715 --> 01:04:07,415\nNow, that's going to\ngenerate a Syslog message.\n\n1219\n01:04:07,415 --> 01:04:08,813\n>> Right.\n>> The Interface goes down,\n\n1220\n01:04:08,813 --> 01:04:10,138\nthe Interface comes back up.\n\n1221\n01:04:10,138 --> 01:04:12,905\nSo, we'll just do that- And\n\n1222\n01:04:12,905 --> 01:04:17,850\nyou know,\nif I were still here in my command prompt.\n\n1223\n01:04:17,850 --> 01:04:18,580\nOh, it timed out.\n\n1224\n01:04:18,580 --> 01:04:20,400\nBut I would have seen it there.\n\n1225\n01:04:20,400 --> 01:04:22,275\nLet me restart this session.\n\n1226\n01:04:27,075 --> 01:04:28,240\nSo if I do a show log.\n\n1227\n01:04:28,240 --> 01:04:29,610\n>> There you go.\n\n1228\n01:04:29,610 --> 01:04:30,860\n>> There's log messages.\n\n1229\n01:04:30,860 --> 01:04:33,050\nI can see these log messages\non the router itself.\n\n1230\n01:04:33,050 --> 01:04:35,340\nNow an attacker could\nhave cleared the logs or\n\n1231\n01:04:35,340 --> 01:04:37,720\nif the router reboots we\nlose the logs anyways.\n\n1232\n01:04:37,720 --> 01:04:41,560\nBut if I go back to my TFTP server or\nto my syslog server,\n\n1233\n01:04:41,560 --> 01:04:46,114\nI can see copies of all of those\nmessages have been sent right here.\n\n1234\n01:04:46,114 --> 01:04:48,680\n>> There you go\n>> So if an attacker wipes the router or\n\n1235\n01:04:48,680 --> 01:04:51,000\nwhatever I don't care,\nthe data's right here.\n\n1236\n01:04:51,000 --> 01:04:54,630\nI can see it, I can read it,\nI can figure out what's what, all right?\n\n1237\n01:04:54,630 --> 01:05:01,480\nNow, the syslog viewer in TFTPD32\nis not very powerful, okay?\n\n1238\n01:05:01,480 --> 01:05:03,130\nSo it doesn't have a lot of features.\n\n1239\n01:05:03,130 --> 01:05:08,090\nYou can't search for things,\nyou can't filter, so that's a problem.\n\n1240\n01:05:08,090 --> 01:05:11,650\nIf you get a commercial syslog viewer,\nlike the Kiwi syslog viewer,\n\n1241\n01:05:11,650 --> 01:05:16,450\nit can color code things, you can say\njust show me syslogs from this one host.\n\n1242\n01:05:16,450 --> 01:05:18,660\nThere's all sorts of powerful\nstuff you can do there,\n\n1243\n01:05:18,660 --> 01:05:20,430\nyou can set date ranges and all.\n\n1244\n01:05:20,430 --> 01:05:24,730\nSo a simple software package like this\nis good for testing or one time use,\n\n1245\n01:05:24,730 --> 01:05:27,240\nI'll use it when I troubleshoot\nother people's networks.\n\n1246\n01:05:27,240 --> 01:05:33,160\nBut for a system you depend on you'll\nwanna go out and buy a real system.\n\n1247\n01:05:33,160 --> 01:05:36,670\nAnd I've used commercial\nproducts like Kiwi.\n\n1248\n01:05:36,670 --> 01:05:38,880\nThe one I was the most happy\nwith we did in house though.\n\n1249\n01:05:38,880 --> 01:05:44,829\nWe created a TFTP server that\ndumped to a MySQL database.\n\n1250\n01:05:44,829 --> 01:05:48,420\nAnd then we just got a web front end that\nwe could use to filter and search for.\n\n1251\n01:05:48,420 --> 01:05:50,600\nAnd, you know,\nit was an in house develop thing.\n\n1252\n01:05:50,600 --> 01:05:54,770\nBut you can create that or\nyou can buy third party products.\n\n1253\n01:05:54,770 --> 01:05:57,820\nThere's a lot of stuff\nout there that'll do it.\n\n1254\n01:05:58,930 --> 01:06:02,910\nKeep in mind that your\nsyslogs are not encrypted.\n\n1255\n01:06:02,910 --> 01:06:05,460\nThis is being transmitted\nin plain text and so\n\n1256\n01:06:05,460 --> 01:06:07,680\nsomebody intercepting this\ncan see those log messages.\n\n1257\n01:06:07,680 --> 01:06:10,960\nNow Log messages rarely\ninclude any sensitive data, so\n\n1258\n01:06:10,960 --> 01:06:13,850\nthat's not too big of a deal,\nbut you do want to secure this.\n\n1259\n01:06:13,850 --> 01:06:17,920\nIf possible, your syslog server\nshould be on your management network,\n\n1260\n01:06:17,920 --> 01:06:19,420\nisolated from your regular traffic.\n\n1261\n01:06:20,550 --> 01:06:22,050\n>> Don, since we're here on the syslog,\n\n1262\n01:06:22,050 --> 01:06:26,010\nwe wanted to point out just, we'll go\nback to Don's machine for a moment.\n\n1263\n01:06:26,010 --> 01:06:29,790\nIt's those numbers right at the beginning\nthat are really important for\n\n1264\n01:06:29,790 --> 01:06:34,470\nus, in terms of the timestamps and\neverything else that we actually have.\n\n1265\n01:06:34,470 --> 01:06:37,390\nSo we want to make sure that all of our\nmachines are actually synced up the way\n\n1266\n01:06:37,390 --> 01:06:38,470\nthat we need to.\n\n1267\n01:06:38,470 --> 01:06:41,240\nSo we can get the most accurate\ninformation right at the time that\n\n1268\n01:06:41,240 --> 01:06:42,580\nthey happen.\n\n1269\n01:06:42,580 --> 01:06:43,180\n>> Yeah.\nLook at this.\n\n1270\n01:06:43,180 --> 01:06:46,290\nIt says that it's February 10th,\nwhich is correct.\n\n1271\n01:06:46,290 --> 01:06:50,880\nBut it says that it's 1:30PM\nEastern Standard Time.\n\n1272\n01:06:50,880 --> 01:06:52,660\nAnd it's not, is it Ronnie?\n\n1273\n01:06:52,660 --> 01:06:53,600\n>> Nope.\nIt is not.\n\n1274\n01:06:53,600 --> 01:06:57,580\n>> It's 11:22 on the clock down there\n>> So the clock is wrong on this router\n\n1275\n01:06:57,580 --> 01:07:02,870\nif I'm trying to correlate times\nbetween systems that's a real problem.\n\n1276\n01:07:02,870 --> 01:07:04,670\nI won't be able to figure out and\n\n1277\n01:07:04,670 --> 01:07:07,560\nhow an attack junk from device to\ndevice because the clocks are wrong.\n\n1278\n01:07:07,560 --> 01:07:12,410\nSo we'll want to make sure that\nthose times are kept in sync.\n\n1279\n01:07:12,410 --> 01:07:15,920\nAnd the best way to do that is\nthe network time protocol, NTP.\n\n1280\n01:07:17,530 --> 01:07:19,670\nNow NTP is another one of those protocols.\n\n1281\n01:07:19,670 --> 01:07:21,650\n>> Right.\n>> It's not secure by default in that it\n\n1282\n01:07:21,650 --> 01:07:24,160\ncan be used in an attack form.\n\n1283\n01:07:24,160 --> 01:07:26,090\n>> And\nyou were mentioning that during the break.\n\n1284\n01:07:26,090 --> 01:07:28,930\nYou were talking about there's\na denial of service attack on NTP.\n\n1285\n01:07:28,930 --> 01:07:29,480\n>> Yeah.\n\n1286\n01:07:29,480 --> 01:07:33,450\nSo there's, if you're doing\na distributed denial of service or\n\n1287\n01:07:33,450 --> 01:07:37,190\nany kind of denial of service\nthat's a reflection based attack.\n\n1288\n01:07:37,190 --> 01:07:42,600\nYou're looking for a system where you\ncan send a certain amount of data.\n\n1289\n01:07:42,600 --> 01:07:47,030\nAnd that other system will reply\nback with much much more data.\n\n1290\n01:07:47,030 --> 01:07:51,030\nSo there is a, an NTP attack right now,\nwhere you can take a packet.\n\n1291\n01:07:51,030 --> 01:07:52,500\nSo let's say I write a packet.\n\n1292\n01:07:52,500 --> 01:07:54,190\nAnd I send a package to the NTP server and\n\n1293\n01:07:54,190 --> 01:07:58,240\nI say hey Here's my time,\nwhat's the offset?\n\n1294\n01:07:58,240 --> 01:08:01,120\nThen that NTP server\nwould reply back with,\n\n1295\n01:08:01,120 --> 01:08:03,670\nit's something like\neight different offsets.\n\n1296\n01:08:03,670 --> 01:08:09,120\nSo basically, I sent it one set of data\nand it returned eight sets of data.\n\n1297\n01:08:09,120 --> 01:08:12,170\nIt just multiplied my payload by eight.\n\n1298\n01:08:12,170 --> 01:08:16,590\nWell, if I spoof my packet and\nI put a source IP address of your address,\n\n1299\n01:08:16,590 --> 01:08:22,740\nRon I send one packet to the NTP server,\nit sends eight packets to you, right?\n\n1300\n01:08:22,740 --> 01:08:30,050\nSo that reflection attack just allowed me\nto, whatever, octuple my attack payload.\n\n1301\n01:08:30,050 --> 01:08:33,310\nSo there are several attacks that\nare right now active on the Internet that\n\n1302\n01:08:33,310 --> 01:08:34,440\nare using that.\n\n1303\n01:08:34,440 --> 01:08:37,050\nAnd so they'll take 100 of hosts and\n\n1304\n01:08:37,050 --> 01:08:40,160\nsend hundreds of thousands\nof these NTP requests.\n\n1305\n01:08:40,160 --> 01:08:43,350\nAnd then the NTP servers will multiply\nit by eight and send it to the target.\n\n1306\n01:08:43,350 --> 01:08:45,880\nSo that's a very real thing.\n\n1307\n01:08:45,880 --> 01:08:48,440\n>> So what can we use then to help us?\n\n1308\n01:08:48,440 --> 01:08:51,010\n>> So there's actually,\nthere's network time protocol and\n\n1309\n01:08:51,010 --> 01:08:53,390\nthere's secure network time protocol.\n\n1310\n01:08:53,390 --> 01:08:55,840\nAnd so\nthere's ways we can do authentication and\n\n1311\n01:08:55,840 --> 01:08:58,320\nstuff to ensure that we\nhave secure communications.\n\n1312\n01:08:58,320 --> 01:08:59,910\nLet me show you what I'm talking about.\n\n1313\n01:08:59,910 --> 01:09:05,590\nHere in the CCP we've actually go a folder\nhere called time, and you got date and\n\n1314\n01:09:05,590 --> 01:09:10,630\ntime where you can manually set it\nif you want, or you got NTP and\n\n1315\n01:09:10,630 --> 01:09:15,340\nSNTP where you can set a server to use,\nall right now.\n\n1316\n01:09:15,340 --> 01:09:19,640\nNTP just using the basic value or\nwhatever.\n\n1317\n01:09:19,640 --> 01:09:25,280\nWe can set an ntp server and we can pick\nsomebody that's out there on the internet.\n\n1318\n01:09:25,280 --> 01:09:32,260\nLet me pick somebody let's\ndo like pool.ntp.org.\n\n1319\n01:09:32,260 --> 01:09:36,720\nAll right so we will use those guys,\noh, that's right.\n\n1320\n01:09:36,720 --> 01:09:38,840\nI forgot we were doing\na little DNS override.\n\n1321\n01:09:38,840 --> 01:09:40,316\nThere we go.\nThat's the one I want.\n\n1322\n01:09:44,916 --> 01:09:48,960\nActually, I think it probably would have\naccepted a host name if I put it in there.\n\n1323\n01:09:48,960 --> 01:09:50,850\nBut, I like to do IP's anyway.\n\n1324\n01:09:52,190 --> 01:09:54,600\nRemember, you can specify\nmore than one time server.\n\n1325\n01:09:54,600 --> 01:09:57,860\nI'm gonna set this one as my preferred,\nI could add two or\n\n1326\n01:09:57,860 --> 01:10:01,530\nthree more if I wanted and just not check\nthem as preferred, maybe secondary.\n\n1327\n01:10:01,530 --> 01:10:05,080\nSo I'm gonna punch in this server, and\n\n1328\n01:10:05,080 --> 01:10:08,540\nI'll pick my interface that I want to\nsource that communication from, so\n\n1329\n01:10:08,540 --> 01:10:11,970\nthis server's out on the internet, so\nI'm gonna pick my public interface.\n\n1330\n01:10:11,970 --> 01:10:15,530\nIf I just configured it this way and\nstopped, this is NTP.\n\n1331\n01:10:16,710 --> 01:10:21,990\nBut if I turn on an authentication key,\nnow I can define a key that's\n\n1332\n01:10:21,990 --> 01:10:26,990\nused to hash my communications and this\nensures that when I talk to a time server,\n\n1333\n01:10:26,990 --> 01:10:31,550\nthat I know they are who they say they are\nand they know that I am who I say I am.\n\n1334\n01:10:31,550 --> 01:10:34,400\nNow, we're secure network time protocol.\n\n1335\n01:10:34,400 --> 01:10:38,470\nThe traffic payload is still not\nencrypted, but it's, at least,\n\n1336\n01:10:38,470 --> 01:10:40,520\nbeing validated for integrity.\n\n1337\n01:10:40,520 --> 01:10:44,020\nWe know we are talking to\nthe person we think we are.\n\n1338\n01:10:44,020 --> 01:10:47,900\nSo, when we do that,\nI picked a public NTP server, so\n\n1339\n01:10:47,900 --> 01:10:49,728\nI'm not going to be able to\ndo an authentication key.\n\n1340\n01:10:49,728 --> 01:10:50,340\nRight?\nBut\n\n1341\n01:10:50,340 --> 01:10:54,900\nthere are services out there that support\nit or if you build your own NTP server,\n\n1342\n01:10:54,900 --> 01:10:59,730\nyou pick one host on your network to be\nthe central time entity for your company.\n\n1343\n01:10:59,730 --> 01:11:02,560\nAnd there's even people that\nsell these little radio boxes\n\n1344\n01:11:02,560 --> 01:11:05,040\nthat you can get to do this and\nthey plug into your network.\n\n1345\n01:11:05,040 --> 01:11:09,390\nAnd then from there you can do Secure NTP\nfrom everybody to that radio box.\n\n1346\n01:11:09,390 --> 01:11:12,880\nThat's one of the best ways to\nget accurate time throughout your\n\n1347\n01:11:12,880 --> 01:11:14,890\nentire organization and do it securely.\n\n1348\n01:11:14,890 --> 01:11:15,880\nAll right?\n\n1349\n01:11:15,880 --> 01:11:17,289\nI'm gonna go ahead and say OK on this.\n\n1350\n01:11:19,295 --> 01:11:25,472\nAnd before I mess with this I'm just\ngonna go back here and do a show clock.\n\n1351\n01:11:25,472 --> 01:11:29,340\nAll right, so here's the clock\nas it stands right now and\n\n1352\n01:11:29,340 --> 01:11:32,530\nlet's see,\noh it's picking up the ACL that we have.\n\n1353\n01:11:32,530 --> 01:11:35,430\nIt's gonna modify it to allow NTP traffic,\nso I'll say yes to that.\n\n1354\n01:11:36,500 --> 01:11:37,940\nAnd we'll let it deliver that.\n\n1355\n01:11:37,940 --> 01:11:41,637\nThe bulk of these commands here\nare just updating that ACL.\n\n1356\n01:11:41,637 --> 01:11:44,998\nAnd so way down in the bottom you can\nsee just the two commands that we need.\n\n1357\n01:11:44,998 --> 01:11:47,380\n>> [LAUGH]\n>> ntp update-calendar.\n\n1358\n01:11:47,380 --> 01:11:49,120\nThat means don't just update this in RAM.\n\n1359\n01:11:49,120 --> 01:11:50,296\nActually update the hardware.\n\n1360\n01:11:50,296 --> 01:11:50,890\n>> Yeah.\n\n1361\n01:11:50,890 --> 01:11:51,850\n>> Clock on the system.\n\n1362\n01:11:51,850 --> 01:11:53,540\nIf you don't do that,\nit updates it in RAM.\n\n1363\n01:11:53,540 --> 01:11:54,373\nAnd the next time you reboot.\n\n1364\n01:11:54,373 --> 01:11:56,160\n>> [LAUGH]\n>> It goes back to the hardware clock.\n\n1365\n01:11:56,160 --> 01:11:59,530\nAnd then the bottom one there, NTP server\nand the server we're gonna connect to.\n\n1366\n01:12:02,542 --> 01:12:03,331\nAll right, so we'll go ahead and\ndeliver that.\n\n1367\n01:12:03,331 --> 01:12:05,798\nNow when we deliver it, that's a change.\n\n1368\n01:12:05,798 --> 01:12:08,126\nIt's gonna check in with\nthat server periodically.\n\n1369\n01:12:08,126 --> 01:12:10,117\nThis should cause a check in right away.\n\n1370\n01:12:10,117 --> 01:12:13,785\nBut then after that it's gonna check\nin periodically with that server.\n\n1371\n01:12:13,785 --> 01:12:16,990\nI think the default interval is 24 hours.\n\n1372\n01:12:16,990 --> 01:12:19,590\nSo it will check in to re-sink that clock,\nbut\n\n1373\n01:12:19,590 --> 01:12:22,870\nif I do a show clock now,\nit still hasn't updated.\n\n1374\n01:12:23,920 --> 01:12:25,890\nNow I could have my time\nzones defined wrong.\n\n1375\n01:12:25,890 --> 01:12:27,500\nThat's another problem we could have.\n\n1376\n01:12:27,500 --> 01:12:29,960\nSo it's still showing\nthat it's 1:38 pm and\n\n1377\n01:12:29,960 --> 01:12:32,680\nit should have just done an NTP check-in.\n\n1378\n01:12:32,680 --> 01:12:35,320\nSo I'm just gonna validate real quick.\n\n1379\n01:12:35,320 --> 01:12:38,910\nLet me just look at my running config.\n\n1380\n01:12:38,910 --> 01:12:42,510\nWhen you define a timezone like that\nyou're supposed to define the offset.\n\n1381\n01:12:42,510 --> 01:12:45,470\nNo there is,\nclock timezone EST minus five.\n\n1382\n01:12:45,470 --> 01:12:52,040\nSo it knows that we are UTC or\nthe universal time code, minus five.\n\n1383\n01:12:52,040 --> 01:12:53,470\nSo it just hasn't done the check in yet.\n\n1384\n01:12:55,170 --> 01:12:59,200\nSo, at some point, it's gonna do a check\nin and when it does that, it will\n\n1385\n01:12:59,200 --> 01:13:03,200\nrealize that our clock is two hours and,\nwhat is it, two hours and ten minutes off.\n\n1386\n01:13:03,200 --> 01:13:05,140\nSo, it'll see that it's two hours and\nten minutes off, and\n\n1387\n01:13:05,140 --> 01:13:08,370\nit'll put it back to where it should be,\nand then, we'll be in business.\n\n1388\n01:13:08,370 --> 01:13:13,030\nAnd, it just hasn't happened yet, to my\nknowledge there's not a way to force it.\n\n1389\n01:13:13,030 --> 01:13:13,780\nDo you know a way?\n\n1390\n01:13:13,780 --> 01:13:15,280\nIs there a\n>> Not that I know of.\n\n1391\n01:13:15,280 --> 01:13:20,310\n>> Let's see if there's\na clock command in here.\n\n1392\n01:13:20,310 --> 01:13:22,160\nYeah I don't think there is.\n\n1393\n01:13:22,160 --> 01:13:22,990\nThere's clock set.\n\n1394\n01:13:25,150 --> 01:13:29,650\nThe clock update dash calendar, see\nthat's, see how it says read the hardware\n\n1395\n01:13:29,650 --> 01:13:33,300\ncalendar into the clock, or update\nthe hardware calendar from the clock?\n\n1396\n01:13:33,300 --> 01:13:36,630\nSo that's making that software\nclock right to the hardware.\n\n1397\n01:13:36,630 --> 01:13:39,810\nBut if we want to actually\nforce the NTP setting,\n\n1398\n01:13:39,810 --> 01:13:41,560\nI don't think there's a way to do that.\n\n1399\n01:13:44,020 --> 01:13:46,260\nWell NTP clear will just\nerase our settings.\n\n1400\n01:13:46,260 --> 01:13:46,810\nThat won't help.\n\n1401\n01:13:48,962 --> 01:13:51,620\nAll right, we'll just have to wait\npatiently which I'm terrible at,\n\n1402\n01:13:51,620 --> 01:13:54,000\nbut eventually it will sync up.\n\n1403\n01:13:54,000 --> 01:13:56,960\nUsing an NTP server really it's a must,\n\n1404\n01:13:56,960 --> 01:14:00,770\nif you've got a 100 devices a 1000\ndevices your trying to manage them,\n\n1405\n01:14:00,770 --> 01:14:04,230\nthey all need to have their clocks set\nthe same and you can't do it by hand.\n\n1406\n01:14:04,230 --> 01:14:07,880\nSo either using an external time server or\neven using an internal one.\n\n1407\n01:14:07,880 --> 01:14:12,680\nLike here we use, we have a Windows\nserver 2102 Active Directory server.\n\n1408\n01:14:12,680 --> 01:14:16,610\nEvery Active Directory domain controller\nis an NTP server also, and so\n\n1409\n01:14:16,610 --> 01:14:18,900\nyou can point to one of those guys and\njust synchronizes so\n\n1410\n01:14:18,900 --> 01:14:20,810\nthat all your devices on the same clock.\n\n1411\n01:14:20,810 --> 01:14:22,140\nIt is a handy thing.\n\n1412\n01:14:22,140 --> 01:14:26,574\nEspecially if you have like Voice over\nIP and the phones have a clock on them,\n\n1413\n01:14:26,574 --> 01:14:29,415\nyour end users expect that\nclock to be accurate so\n\n1414\n01:14:29,415 --> 01:14:32,703\nhaving that synced across\nthe organization is useful.\n\n1415\n01:14:32,703 --> 01:14:34,014\nAll right.\n\n1416\n01:14:34,014 --> 01:14:36,295\nSo, Ronnie, that was syslog.\n\n1417\n01:14:36,295 --> 01:14:36,935\nAnd NTP.\n\n1418\n01:14:36,935 --> 01:14:38,135\nWhat else do we have?\n\n1419\n01:14:38,135 --> 01:14:41,725\n>> We've got SNMP and\nsecure copy protocol.\n\n1420\n01:14:41,725 --> 01:14:42,595\n>> Okay.\n>> Yeah.\n\n1421\n01:14:42,595 --> 01:14:44,615\n>> Let's take a look at SNMP.\n\n1422\n01:14:44,615 --> 01:14:45,215\nRight?\n>> Right.\n\n1423\n01:14:45,215 --> 01:14:47,490\n>> Simple Network Management Protocol.\n\n1424\n01:14:47,490 --> 01:14:50,880\n>> I almost always deploy\nit as a read only thing,\n\n1425\n01:14:50,880 --> 01:14:53,070\nin fact we've already\ndone that in this show.\n\n1426\n01:14:54,190 --> 01:14:57,580\nBut, you can use it for\nread write for managing your system,\n\n1427\n01:14:57,580 --> 01:14:59,160\nyou just have to be really\ncareful with security.\n\n1428\n01:15:00,470 --> 01:15:03,570\nSo, if I go back under\nhere under my router.\n\n1429\n01:15:03,570 --> 01:15:05,760\nSo, we've got our router access.\n\n1430\n01:15:05,760 --> 01:15:08,580\nAnd I'll just browse in\nhere until I can find SNMP.\n\n1431\n01:15:08,580 --> 01:15:09,990\nThere it is.\n\n1432\n01:15:09,990 --> 01:15:10,790\nAll right.\n\n1433\n01:15:10,790 --> 01:15:14,250\nYou'll see I've got SNMP enabled\nfrom the other show we did,\n\n1434\n01:15:14,250 --> 01:15:17,190\nand my community is set to ITPRO TV.\n\n1435\n01:15:17,190 --> 01:15:21,620\nAnd see this says SNMP read only\ncommunity, string, right, and\n\n1436\n01:15:21,620 --> 01:15:24,830\nso there it is, it's ITPRO TV,\nand it's defined.\n\n1437\n01:15:24,830 --> 01:15:26,100\nOkay.\n\n1438\n01:15:26,100 --> 01:15:29,600\nRight now, I don't have my location and\ncontact information filled in.\n\n1439\n01:15:29,600 --> 01:15:31,800\nWe use that for monitoring or\nwhatever, and that's about it.\n\n1440\n01:15:31,800 --> 01:15:33,370\nI'm gonna go ahead and just edit all this.\n\n1441\n01:15:34,590 --> 01:15:36,550\nAnd so there's that community string.\n\n1442\n01:15:36,550 --> 01:15:41,320\nAnd you can define your trap, so when a\nmessage is generated, who you send it to.\n\n1443\n01:15:41,320 --> 01:15:43,650\nAgain, not something I typically use.\n\n1444\n01:15:43,650 --> 01:15:46,210\nAnd so you can define that\ninformation right here.\n\n1445\n01:15:46,210 --> 01:15:49,690\nI'm gonna add another community,\nand when I add that community,\n\n1446\n01:15:49,690 --> 01:15:54,470\nI'm gonna call it ITProTV dash RW,\nand I'm gonna make it read right.\n\n1447\n01:15:55,540 --> 01:15:59,800\nNow when I do that,\nwhen I make it read right, well,\n\n1448\n01:15:59,800 --> 01:16:02,750\nthat is now able to change my system.\n\n1449\n01:16:02,750 --> 01:16:08,230\nIt is able to make modifications and\nreconfigure the router, okay.\n\n1450\n01:16:08,230 --> 01:16:12,200\nSo for example, there's good tools\nout there that let us use this so\n\n1451\n01:16:12,200 --> 01:16:14,040\nif I look at my configuration right now.\n\n1452\n01:16:14,040 --> 01:16:19,090\nAll right, I'm just doing a show run and\n\n1453\n01:16:19,090 --> 01:16:22,380\nI'm filtering for\nlines that include the word flow.\n\n1454\n01:16:22,380 --> 01:16:25,190\nI do not have net flow\nconfigured on my router.\n\n1455\n01:16:25,190 --> 01:16:27,160\nNow if I wanted to configure\nnet flow I can go in and\n\n1456\n01:16:27,160 --> 01:16:28,690\nmanually put in the commands to do it.\n\n1457\n01:16:28,690 --> 01:16:33,620\nIf you don't know what net flow is, it's\na tool for monitoring, the bandwidth and\n\n1458\n01:16:33,620 --> 01:16:35,080\ntraffic utilization on our system.\n\n1459\n01:16:35,080 --> 01:16:38,040\nSo it's a neat thing, but\n\n1460\n01:16:38,040 --> 01:16:43,404\nif you don't know the configuration\nit's kind of hard to configure.\n\n1461\n01:16:43,404 --> 01:16:48,190\nSolar-winds has a net-flow\nconfiguration utility, and what it can\n\n1462\n01:16:48,190 --> 01:16:53,260\ndo is it can reach out and configure\nthe router for you if you're using SNMP.\n\n1463\n01:16:53,260 --> 01:16:56,780\nSo I can tell it hey,\nI wanna configure my router.\n\n1464\n01:16:56,780 --> 01:17:01,910\nThe SNMP string is ITProTV dash RW.\n\n1465\n01:17:01,910 --> 01:17:06,660\nIf I was using version three,\nI would need to specific username,\n\n1466\n01:17:06,660 --> 01:17:08,790\npassword, encryption method.\n\n1467\n01:17:08,790 --> 01:17:11,270\nSNMP version three is much more secure.\n\n1468\n01:17:12,830 --> 01:17:15,670\nSo now I can move forward with this,\nand it's gonna connect.\n\n1469\n01:17:15,670 --> 01:17:18,160\nAnd I can tell it, hey,\nI wanna do net-flow.\n\n1470\n01:17:18,160 --> 01:17:20,180\nI wanna export to my laptop.\n\n1471\n01:17:20,180 --> 01:17:24,650\nI wanna send that net-flow data there,\nand I wanna track ingress and\n\n1472\n01:17:24,650 --> 01:17:27,580\negress from my internal interface.\n\n1473\n01:17:27,580 --> 01:17:32,420\nSo I wanna see all traffic going to and\ncoming from my internal interface.\n\n1474\n01:17:32,420 --> 01:17:33,260\nAll right.\n\n1475\n01:17:33,260 --> 01:17:36,600\nAnd I'll hit Apply, and there it goes.\n\n1476\n01:17:36,600 --> 01:17:41,730\nAnd it just reached out via SNMP,\nto the router and\n\n1477\n01:17:41,730 --> 01:17:47,110\nit made those changes, and now I can see\nI've got flow commands in my config.\n\n1478\n01:17:47,110 --> 01:17:50,790\nSo SNMP can be very, very powerful.\n\n1479\n01:17:50,790 --> 01:17:51,780\nBut it can be very dangerous.\n\n1480\n01:17:51,780 --> 01:17:56,150\nSomebody could have sniffed these packets\nand they would have seen that community\n\n1481\n01:17:56,150 --> 01:18:00,190\nstring in there and now they can\ncreate a user account for themselves.\n\n1482\n01:18:00,190 --> 01:18:04,000\nThey can do all sorts of crazy\nstuff via SNMP commands, and\n\n1483\n01:18:04,000 --> 01:18:06,130\nreally cause some issues.\n\n1484\n01:18:06,130 --> 01:18:10,260\n>> So, if you're choosing to\nuse like SNMOP version 2c then,\n\n1485\n01:18:10,260 --> 01:18:13,890\nwhat's the best way we can try and secure\nthat if that's what we're gonna choose?\n\n1486\n01:18:13,890 --> 01:18:15,090\n>> Well you've to two choices.\n\n1487\n01:18:15,090 --> 01:18:19,870\nSo, choice number one don't use it,\njust use SNMP version three.\n\n1488\n01:18:19,870 --> 01:18:23,690\nBut, choice number two cuz a lot of\nsystems don't support version three yet.\n\n1489\n01:18:23,690 --> 01:18:28,380\nIf that's the case,\nyou need to attach an ACL to SNMP.\n\n1490\n01:18:28,380 --> 01:18:31,950\nWhen you define an SNMP community\nyou can tack an ACL on to it,\n\n1491\n01:18:31,950 --> 01:18:36,380\nlike we did in the last episode, to\nrestrict who's allowed to connect, right?\n\n1492\n01:18:36,380 --> 01:18:40,835\nNow, you might notice that here\nit didn't give me the option.\n\n1493\n01:18:40,835 --> 01:18:46,075\nLike when we define the SNMP strings,\nthere's no ability to do an ACL in here,\n\n1494\n01:18:46,075 --> 01:18:48,195\nright, it just doesn't even have it.\n\n1495\n01:18:48,195 --> 01:18:50,890\nIf we edit these,\nwe can pick a name and that's it.\n\n1496\n01:18:50,890 --> 01:18:56,060\nSo the Cisco configuration protocol, or\nprofessional, is not very effective.\n\n1497\n01:18:56,060 --> 01:18:56,730\n>> Right.\n\n1498\n01:18:56,730 --> 01:18:58,750\n>> From the command line though.\n\n1499\n01:19:01,902 --> 01:19:06,981\nAll right, so here's the commands\nthat created like that SNMP server,\n\n1500\n01:19:06,981 --> 01:19:08,680\nSNMP community.\n\n1501\n01:19:08,680 --> 01:19:12,671\nNotice in the show the other day,\nI added one extra thing to it: 77.\n\n1502\n01:19:12,671 --> 01:19:17,430\nThat was attaching an ACL,\nto that community stream.\n\n1503\n01:19:17,430 --> 01:19:24,740\nSo I could have SNMP dash server,\ncommunity, ITProTV dash RW.\n\n1504\n01:19:24,740 --> 01:19:25,250\nI mean, yeah.\n\n1505\n01:19:25,250 --> 01:19:29,620\nThat was the name, shoot, and then RW\nto say that it's rewrite, and then 78.\n\n1506\n01:19:29,620 --> 01:19:33,230\nAnd now I have attached an ACL to it,\n\n1507\n01:19:33,230 --> 01:19:37,450\nand only people who match that ACL will\nbe allowed to write to this router.\n\n1508\n01:19:37,450 --> 01:19:40,030\nSo that's one way to\nkind of restrict that.\n\n1509\n01:19:40,030 --> 01:19:42,350\nNow, that makes us a little more secure,\n\n1510\n01:19:42,350 --> 01:19:44,880\nin that we stop inappropriate\npeople from attaching.\n\n1511\n01:19:44,880 --> 01:19:46,340\nBut they could still use sniffers.\n\n1512\n01:19:46,340 --> 01:19:51,300\nThey could still capture that traffic and\nso for that we really need to rely\n\n1513\n01:19:51,300 --> 01:19:56,330\non SNMP version three or using IP sec or\nanother protocol to encrypt our data.\n\n1514\n01:19:57,670 --> 01:19:58,559\n>> Sounds good.\n\n1515\n01:19:58,559 --> 01:20:04,386\n>> All right and they don't require it\non the exam but just for completeness,\n\n1516\n01:20:04,386 --> 01:20:10,690\nlet me see if I can pull up\na configuration example of SNMP Version 3.\n\n1517\n01:20:10,690 --> 01:20:15,730\nI don't want their new wiki thing,\nI want, there we go, hard documentation.\n\n1518\n01:20:15,730 --> 01:20:21,325\nAll right so, actually, wait,\nthis is just the user stuff.\n\n1519\n01:20:21,325 --> 01:20:28,210\nDadgummet, Cisco's documentation has\nreally gotten all over the place lately.\n\n1520\n01:20:33,365 --> 01:20:37,589\nThey used to have it all nice and\nneat, all CLI based, but\n\n1521\n01:20:37,589 --> 01:20:42,480\nthey've started doing a lot of\ndocumentation based on the GUIs.\n\n1522\n01:20:42,480 --> 01:20:45,560\nSo they'll have in here the steps, as\nfar as browsing through finding the GUI,\n\n1523\n01:20:45,560 --> 01:20:47,200\nwhich is great if you use it.\n\n1524\n01:20:47,200 --> 01:20:52,080\nBut if the GUI doesn't support it,\nthen the steps don't really help.\n\n1525\n01:20:52,080 --> 01:20:52,590\n>> Right.\n\n1526\n01:20:52,590 --> 01:20:55,040\n>> So I'm just looking for\n\n1527\n01:20:55,040 --> 01:20:58,640\ntheir configuration doc,\nand I am not finding it.\n\n1528\n01:20:58,640 --> 01:21:03,890\nI might have to find this during the break\nor something or post it, but basically\n\n1529\n01:21:03,890 --> 01:21:08,620\nthe process for configuring SNMP Version\n3, you have to create user accounts.\n\n1530\n01:21:08,620 --> 01:21:09,920\nAnd you have to create encryption keys.\n\n1531\n01:21:09,920 --> 01:21:11,760\nWhich are effectively\npasswords to those accounts.\n\n1532\n01:21:11,760 --> 01:21:14,400\nAnd they're separate from\nthe user accounts on your router.\n\n1533\n01:21:14,400 --> 01:21:16,670\nThey're specifically for SNMP.\n\n1534\n01:21:16,670 --> 01:21:19,050\nSo when you connect via SNMP Version 3,\n\n1535\n01:21:19,050 --> 01:21:22,490\nlike in that NetFlow\nconfiguration utility.\n\n1536\n01:21:22,490 --> 01:21:23,030\nRight?\n\n1537\n01:21:23,030 --> 01:21:26,790\nWhen you connect in,\nyou have to go a little bit further.\n\n1538\n01:21:26,790 --> 01:21:28,800\nYou specify a user name.\n\n1539\n01:21:28,800 --> 01:21:31,380\nAnd the context,\nwhich is basically the community string,\n\n1540\n01:21:31,380 --> 01:21:36,340\nand then after that you have to designate\nthat authentication method, MD5 or SHA1.\n\n1541\n01:21:36,340 --> 01:21:40,889\nAnd whether it's encrypted,\nyou'll see here DES and AES.\n\n1542\n01:21:40,889 --> 01:21:45,153\nSo you can come in and you can choose\nvery secure authentication and\n\n1543\n01:21:45,153 --> 01:21:47,298\nspecify those keys right there.\n\n1544\n01:21:47,298 --> 01:21:52,498\nSo you get a good, encrypted\nconnection if your device supports it.\n\n1545\n01:21:52,498 --> 01:21:58,001\nBecause that's the other problem,\nis that not every device supports that.\n\n1546\n01:21:58,001 --> 01:22:03,670\nAnd you can find out a lot about\nthat by looking at your various\n\n1547\n01:22:03,670 --> 01:22:10,765\ncommands that are available,\nas far as defining those users and so on.\n\n1548\n01:22:10,765 --> 01:22:12,455\nSo that's pretty much SNMP.\n\n1549\n01:22:12,455 --> 01:22:14,355\nThe ACLs are the main\nthing you need to know for\n\n1550\n01:22:14,355 --> 01:22:17,295\nthe exam and\nthe fact that the CCP doesn't support it.\n\n1551\n01:22:18,315 --> 01:22:18,815\nInconvenient.\n\n1552\n01:22:20,050 --> 01:22:21,019\nAll right, what was the other one Ronnie?\n\n1553\n01:22:21,019 --> 01:22:22,281\n[CROSSTALK] Secure copy protocol, right?\n\n1554\n01:22:22,281 --> 01:22:23,730\n>> And our secure copy protocol.\n\n1555\n01:22:24,750 --> 01:22:27,770\n>> I think I mentioned\nearlier in the show how TFTP,\n\n1556\n01:22:27,770 --> 01:22:31,880\nwhich was our default file protocol for\nthe longest time, it's not secure.\n\n1557\n01:22:31,880 --> 01:22:35,320\nAnd so a lot of us try not to use it.\n\n1558\n01:22:35,320 --> 01:22:38,020\nFTP kinda replaced it, but\nFTP's not secure either.\n\n1559\n01:22:38,020 --> 01:22:41,070\nTransmits everything, including your\nusername and password in plain text.\n\n1560\n01:22:41,070 --> 01:22:47,020\nSo the next replacement is SCP,\nthe secure copy protocol.\n\n1561\n01:22:47,020 --> 01:22:54,120\nNow unfortunately, Cisco routers are not,\nthey're not secure copy protocol servers.\n\n1562\n01:22:54,120 --> 01:22:57,840\nSo you can't really use SCP to copy\nstuff to the router from a client.\n\n1563\n01:22:57,840 --> 01:23:02,060\nYou couldn't run FileZilla, or whatever,\non your laptop and connect that way.\n\n1564\n01:23:02,060 --> 01:23:05,230\nBut from the router itself,\nit can download and\n\n1565\n01:23:05,230 --> 01:23:09,360\nupload files using the SCP,\nthe secure copy protocol.\n\n1566\n01:23:09,360 --> 01:23:10,880\nAnd let me just show you what I mean.\n\n1567\n01:23:10,880 --> 01:23:11,850\nHere, we'll pull this router up.\n\n1568\n01:23:14,000 --> 01:23:16,880\nAnd normally if I had a TFTP\nserver out there, and\n\n1569\n01:23:16,880 --> 01:23:21,550\nI wanted to backup my configuration,\nI could say copy running-config TFTP.\n\n1570\n01:23:23,060 --> 01:23:29,590\nAnd maybe I'll send it to my laptop,\nright, R1-config.text.\n\n1571\n01:23:29,590 --> 01:23:34,830\nSo that would take my running config and\ncopy it to my laptop using TFTP, right?\n\n1572\n01:23:34,830 --> 01:23:36,820\nPretty straightforward.\n\n1573\n01:23:36,820 --> 01:23:40,664\nIf we wanted to use FTP, well,\niwe could go back like that, and now we're\n\n1574\n01:23:40,664 --> 01:23:45,250\nusing FTP and it does the same thing,\nright, copies the file to the FTP server.\n\n1575\n01:23:45,250 --> 01:23:47,371\nAnd in fact, if you go into your config,\n\n1576\n01:23:52,851 --> 01:23:57,983\nThere we go, we can specify\nan FTP username, as well as, so\n\n1577\n01:23:57,983 --> 01:24:03,030\nlet's say it's DPezet and,\noh we have to spell it right.\n\n1578\n01:24:03,030 --> 01:24:05,236\nApparently it's gonna require that.\n\n1579\n01:24:05,236 --> 01:24:08,672\nFtp password, all right.\n\n1580\n01:24:08,672 --> 01:24:13,990\nSo now when I run copy running-config ftp.\n\n1581\n01:24:19,585 --> 01:24:23,410\nThere, now it's gonna backup my\nconfiguration to my laptop, and\n\n1582\n01:24:23,410 --> 01:24:26,360\nit's gonna login with the username and\npassword.\n\n1583\n01:24:26,360 --> 01:24:27,990\nNow we're secure, right?\n\n1584\n01:24:27,990 --> 01:24:31,690\nWell, no, cuz FTP's gonna send that\nusername and password in plain text.\n\n1585\n01:24:31,690 --> 01:24:35,210\nSo somebody just has to sniff that\nfirst packet and they've got it,\n\n1586\n01:24:35,210 --> 01:24:37,320\nand now it's all kinda\nblown out of the water.\n\n1587\n01:24:37,320 --> 01:24:41,950\nSo, having that username and\npassword doesn't really help.\n\n1588\n01:24:41,950 --> 01:24:45,010\nSo that's where secure\ncopy protocol comes in.\n\n1589\n01:24:45,010 --> 01:24:49,940\nIf your router supports it, you can do\ncopy running-config question mark, and\n\n1590\n01:24:49,940 --> 01:24:51,110\nsee if it's in the list.\n\n1591\n01:24:51,110 --> 01:24:54,510\nAnd if it's there, then you support it.\n\n1592\n01:24:54,510 --> 01:25:01,080\nAnd what it is, it's basically the old\nUnix copy or cp command, run over SSH.\n\n1593\n01:25:01,080 --> 01:25:04,310\nAnd so it's secure copy,\ncopying via the SSH protocol.\n\n1594\n01:25:04,310 --> 01:25:08,240\nAnd so it's just SCP,\nand so you could have\n\n1595\n01:25:08,240 --> 01:25:12,860\nan SCP server setup somewhere,\nusually a Linux box of some sort.\n\n1596\n01:25:14,410 --> 01:25:15,680\nAnd you could point to that.\n\n1597\n01:25:16,810 --> 01:25:20,820\nAnd copy up to it, and that would\nreach out and copy to that server.\n\n1598\n01:25:20,820 --> 01:25:24,890\nNow I don't have that server, but\nyou'll see here it's prompting for\n\n1599\n01:25:24,890 --> 01:25:28,460\nthat username, cuz I didn't specify it in\nthe command line like I should have, and\n\n1600\n01:25:28,460 --> 01:25:29,410\nthen the file name.\n\n1601\n01:25:29,410 --> 01:25:31,110\nI should have done.\n\n1602\n01:25:31,110 --> 01:25:32,170\nWell, see, it's gonna fail.\n\n1603\n01:25:32,170 --> 01:25:38,250\nI should have done admin at 192.168.0.222,\nthat would have specified the username.\n\n1604\n01:25:38,250 --> 01:25:40,930\nBut basically it's gonna reach out and\nkinda copy that data to it.\n\n1605\n01:25:40,930 --> 01:25:43,970\nBut you've gotta have a server\nset up somewhere to receive that.\n\n1606\n01:25:43,970 --> 01:25:46,860\n>> Right.\n>> The nice thing is the entire SCP\n\n1607\n01:25:46,860 --> 01:25:48,780\nsession is encrypted.\n\n1608\n01:25:48,780 --> 01:25:51,370\nSo if somebody sniffs this,\ndoesn't matter, it's encrypted.\n\n1609\n01:25:51,370 --> 01:25:52,950\nThey're not gonna be\nable to see that data.\n\n1610\n01:25:52,950 --> 01:25:54,260\n>> Right.\n\n1611\n01:25:54,260 --> 01:25:56,440\n>> And\nwe can be a client in both directions.\n\n1612\n01:25:56,440 --> 01:25:59,960\nSo here I'm copying from\nthe router to the server.\n\n1613\n01:25:59,960 --> 01:26:02,160\nI could've also, let me just kill this.\n\n1614\n01:26:02,160 --> 01:26:04,540\nBecause it's gonna, oops.\n\n1615\n01:26:04,540 --> 01:26:05,310\n>> You did it.\n\n1616\n01:26:05,310 --> 01:26:07,590\n>> I did.\nI was trying to exit out of it.\n\n1617\n01:26:07,590 --> 01:26:10,110\nIt doesn't seem to want to.\n\n1618\n01:26:10,110 --> 01:26:12,070\nAnyhow, so\nI could've done it the other way around,\n\n1619\n01:26:12,070 --> 01:26:17,760\nwhere I copy from the SCP server\nback down to us, and gone that way.\n\n1620\n01:26:17,760 --> 01:26:19,780\nSo it does work in both directions.\n\n1621\n01:26:19,780 --> 01:26:23,180\nIt is the new replacement for TFTP and\n\n1622\n01:26:23,180 --> 01:26:25,720\nFTP, so\nwe should use this whenever possible.\n\n1623\n01:26:25,720 --> 01:26:29,970\nIt's another one of those things that\nwe don't really deal with it with\n\n1624\n01:26:29,970 --> 01:26:34,970\nthe CCP because the Cisco configuration\nprofessional is doing everything through\n\n1625\n01:26:34,970 --> 01:26:36,840\nSSH and SSL.\n\n1626\n01:26:38,250 --> 01:26:42,490\nSo if you go into like,\nwhere's the file management in this thing?\n\n1627\n01:26:42,490 --> 01:26:44,220\nHere, Flash File Management.\n\n1628\n01:26:44,220 --> 01:26:50,190\nSo, we go into Flash File Management here,\nyou can upload a file into the router.\n\n1629\n01:26:50,190 --> 01:26:51,780\nAnd when you do it this way,\n\n1630\n01:26:51,780 --> 01:26:55,600\nit's actually doing it through\nSSH to copy that file across.\n\n1631\n01:26:55,600 --> 01:26:59,418\nSo it is using secure methods\nto move those data back and\n\n1632\n01:26:59,418 --> 01:27:02,250\nforth without having to set up a server.\n\n1633\n01:27:02,250 --> 01:27:03,721\nSo did that thing finally crash out?\n\n1634\n01:27:03,721 --> 01:27:06,888\nYeah.\nSo SCP could be our source.\n\n1635\n01:27:16,013 --> 01:27:18,600\nAnd I could copy that to my\nstartup config or whatever.\n\n1636\n01:27:18,600 --> 01:27:19,820\nIt's good.\nYou can use it for\n\n1637\n01:27:19,820 --> 01:27:21,630\ndoing iOS upgrades also.\n\n1638\n01:27:21,630 --> 01:27:24,270\nSo if you're loading new operating\nsystem files, you can go that route.\n\n1639\n01:27:24,270 --> 01:27:25,786\nIt's all just kind of built right in.\n\n1640\n01:27:25,786 --> 01:27:28,355\n>> Looks good.\n\n1641\n01:27:28,355 --> 01:27:35,510\n>> So, all right, I did want to bring\nup an SNMP Version 3 configuration, but\n\n1642\n01:27:39,790 --> 01:27:43,270\nI just wasn't able to find it on\nCisco's documentation very quickly.\n\n1643\n01:27:43,270 --> 01:27:45,620\nOh, actually here,\nthe SNMP configuration guide.\n\n1644\n01:27:45,620 --> 01:27:48,740\nThis, here's what I was looking for.\n\n1645\n01:27:51,317 --> 01:27:53,035\n>> There you go.\n\n1646\n01:27:56,007 --> 01:27:57,292\n>> All right.\n\n1647\n01:27:57,292 --> 01:27:59,580\nSo basically the process works like this.\n\n1648\n01:27:59,580 --> 01:28:00,120\nPerfect.\n\n1649\n01:28:00,120 --> 01:28:00,990\nAll right.\n\n1650\n01:28:00,990 --> 01:28:02,250\nSo see what they're doing here?\n\n1651\n01:28:02,250 --> 01:28:07,176\nSNMP-server group, group one version\nthree, authorization access And\n\n1652\n01:28:07,176 --> 01:28:11,020\nthen they've defined\nan authorization list somewhere.\n\n1653\n01:28:11,020 --> 01:28:17,230\nSo here's where they're basically tying a\ngroup, a method of authenticating to SNMP.\n\n1654\n01:28:17,230 --> 01:28:21,210\nAnd this way we can feed off radius\nif we want or our local database.\n\n1655\n01:28:21,210 --> 01:28:25,959\nYou don't have to do that but it is easier\nif you've already implemented that.\n\n1656\n01:28:25,959 --> 01:28:34,070\nBut then you can define individual users,\nwhich is what they're doing here.\n\n1657\n01:28:34,070 --> 01:28:38,410\nSo here they're doing SNP server engine ID\nremotes, so they're designating a remote\n\n1658\n01:28:38,410 --> 01:28:42,860\nIP that's gonna connect and\nthey specifying an engine ID\n\n1659\n01:28:42,860 --> 01:28:46,590\nscreen which would be effectively like\nthe hash key for that connection.\n\n1660\n01:28:46,590 --> 01:28:50,490\nLet me see if they have just a straight\nup configuration example that shows all\n\n1661\n01:28:50,490 --> 01:28:51,370\nthe commands together.\n\n1662\n01:28:52,890 --> 01:28:53,995\nThere we go.\n\n1663\n01:28:57,850 --> 01:29:00,100\nAll right, so there's version 1 and 2c.\n\n1664\n01:29:00,100 --> 01:29:01,380\nWhere is version 3?\n\n1665\n01:29:01,380 --> 01:29:04,030\n>> Right in the middle, on the screen.\n\n1666\n01:29:04,030 --> 01:29:05,410\n>> Right in here, okay.\n\n1667\n01:29:05,410 --> 01:29:08,390\nSo let me make this a little bigger so\nwe can see these commands.\n\n1668\n01:29:08,390 --> 01:29:11,740\nThere, all right, so here they're\nbasically creating SNMP version three, but\n\n1669\n01:29:11,740 --> 01:29:13,990\nthey're doing no authentication.\n\n1670\n01:29:13,990 --> 01:29:14,710\nAll right?\n\n1671\n01:29:14,710 --> 01:29:18,150\nThey're doing this, and that sounds weak,\nlike oh, we're not doing authentication.\n\n1672\n01:29:18,150 --> 01:29:20,260\nBut they are manually designating IPs.\n\n1673\n01:29:20,260 --> 01:29:21,980\nThey're just saying when this IP connects,\n\n1674\n01:29:21,980 --> 01:29:23,960\nit doesn't have to provide a user name and\na password.\n\n1675\n01:29:23,960 --> 01:29:29,090\nAll right, so that gets us a better\nlevel of authentication and\n\n1676\n01:29:29,090 --> 01:29:31,670\na little bit more security but\nnot the best.\n\n1677\n01:29:31,670 --> 01:29:34,440\nNot as if we had gone through and\ndefined a user.\n\n1678\n01:29:34,440 --> 01:29:36,840\nNow here, they're doing it\nthe way that I usually do,\n\n1679\n01:29:36,840 --> 01:29:39,890\nwhich is to define an individual account.\n\n1680\n01:29:39,890 --> 01:29:43,120\nSo here they're saying,\nthis remote IP can connect.\n\n1681\n01:29:43,120 --> 01:29:48,010\nAnd when it authenticates it needs\nto use an md5 hash of password1,\n\n1682\n01:29:48,010 --> 01:29:50,770\nthat's the hash we expect\nto receive from them.\n\n1683\n01:29:50,770 --> 01:29:54,000\nThis way we don't have to mess around with\ngroups and so on and these are not strings\n\n1684\n01:29:54,000 --> 01:29:56,490\nthat you normally share with people,\nyou put it in your software and\n\n1685\n01:29:56,490 --> 01:30:00,630\nthat's why I don't worry so\nmuch about attaching it to a group.\n\n1686\n01:30:00,630 --> 01:30:04,890\nBut we can define it there and you'll see\nme go a step further in this other example\n\n1687\n01:30:04,890 --> 01:30:08,080\nbecause they go through and\ndesignate a privilege and so\n\n1688\n01:30:08,080 --> 01:30:10,690\nthey're basically giving them\njust access level privileges,\n\n1689\n01:30:10,690 --> 01:30:16,270\nwhich effectively makes it read only as\nopposed to going a little bit further.\n\n1690\n01:30:16,270 --> 01:30:19,780\nAnd so you'll several examples\nin here of doing that.\n\n1691\n01:30:19,780 --> 01:30:22,120\nSNMP version 3 is harder to configure.\n\n1692\n01:30:22,120 --> 01:30:24,070\n>> Right.\n>> Not every device supports it but\n\n1693\n01:30:24,070 --> 01:30:26,950\nit does give you that\nhigher level of security so\n\n1694\n01:30:26,950 --> 01:30:31,200\ndefinitely something that you wanna\ntake advantage of, if you can.\n\n1695\n01:30:31,200 --> 01:30:35,480\nNow even if your router\nsupports SNMP version 3,\n\n1696\n01:30:35,480 --> 01:30:40,030\nit may not support encryption, that\nhappens on some of the older devices, so\n\n1697\n01:30:40,030 --> 01:30:41,870\nyou may be able to use it for\nauthentication, but\n\n1698\n01:30:41,870 --> 01:30:44,670\nit may not fully included perceptions,\nso just be aware of that.\n\n1699\n01:30:44,670 --> 01:30:48,340\nNot every device supports it.\n\n1700\n01:30:48,340 --> 01:30:52,765\nI'll post this link along with the show\nwhen the show gets uploaded to\n\n1701\n01:30:52,765 --> 01:30:53,691\nthe website.\n\n1702\n01:30:58,065 --> 01:30:58,920\nThere we go.\n\n1703\n01:30:58,920 --> 01:31:02,428\nSo that we'll be able to have that.\n\n1704\n01:31:06,039 --> 01:31:07,130\nThere we go.\n\n1705\n01:31:07,130 --> 01:31:07,680\nSo we'll have that.\n\n1706\n01:31:07,680 --> 01:31:09,580\nI'll post that on there so\nyou guys can read more on it.\n\n1707\n01:31:09,580 --> 01:31:12,350\nBut it's a neat thing if you can do it.\n\n1708\n01:31:12,350 --> 01:31:15,070\nIf your devices do support it,\nyou should use it.\n\n1709\n01:31:15,070 --> 01:31:15,570\n>> Sounds good.\n\n1710\n01:31:16,810 --> 01:31:20,040\n>> All right, well Ronnie I think that\npretty much wraps up these objectives\n\n1711\n01:31:20,040 --> 01:31:20,540\ndoesn't it?\n\n1712\n01:31:20,540 --> 01:31:23,070\n>> It does for our fifth objective there.\n\n1713\n01:31:23,070 --> 01:31:25,100\n>> Let's make sure we\ndidn't miss anything, yep.\n\n1714\n01:31:25,100 --> 01:31:28,190\nThe next objective is layer two attacks,\nwhich is really switching.\n\n1715\n01:31:28,190 --> 01:31:30,060\nSo, we're gonna do that in the next show.\n\n1716\n01:31:30,060 --> 01:31:33,300\nThis is not really related to what\nwe've been talking about so far.\n\n1717\n01:31:33,300 --> 01:31:36,540\nBut really everything that we've talked\nabout so far works on routers and\n\n1718\n01:31:36,540 --> 01:31:38,110\nswitches for the most part.\n\n1719\n01:31:38,110 --> 01:31:40,400\nSo definitely keep that in mind and\n\n1720\n01:31:40,400 --> 01:31:43,220\nyou wanna do this across all\nthe devices in your environment.\n\n1721\n01:31:43,220 --> 01:31:46,130\nAll right, well let me just\nremind everybody that if you ever\n\n1722\n01:31:46,130 --> 01:31:51,140\nhave any questions live during\nthe show you can go to itpro.tv/live.\n\n1723\n01:31:51,140 --> 01:31:52,780\nYou'll see a chatroom\nright beneath the video,\n\n1724\n01:31:52,780 --> 01:31:56,570\nyou can post your questions, we monitor\nand answer right during the show.\n\n1725\n01:31:56,570 --> 01:32:00,380\nAlso if you have questions after the show,\nif you're watching this recorded, you're\n\n1726\n01:32:00,380 --> 01:32:05,340\non the bus or whatever, then you can go\nitpro.tv at your leisure and at the top\n\n1727\n01:32:05,340 --> 01:32:09,460\nof every page there's a link that says\nQ&A, go there and post your questions.\n\n1728\n01:32:09,460 --> 01:32:11,590\nWe monitor and answer there too.\n\n1729\n01:32:11,590 --> 01:32:14,185\nSo definitely take advantage\nof that we're there for you.\n\n1730\n01:32:14,185 --> 01:32:15,210\n>> Mm-hm.\n\n1731\n01:32:15,210 --> 01:32:18,420\n>> All right well, ladies and gentlemen\nsigning off for ITProTV I'm Don Pezet.\n\n1732\n01:32:18,420 --> 01:32:19,530\n>> And I'm Ronnie Wong.\n\n1733\n01:32:19,530 --> 01:32:20,815\n>> And we'll see you next time.\n\n1734\n01:32:20,815 --> 01:32:30,815\n[MUSIC]\n\n1735\n01:32:33,039 --> 01:32:39,280\n[NOISE]\n\n",
          "vimeoId": "86350826"
        }
      ],
      "title": "Secure Network Management and Reporting"
    },
    {
      "episodes": [
        {
          "description": "A handful of high end Cisco switches include different Layer 2 security features, but are by default turned off. Viewers will hear about several Layer 2 exploits and then hear discussions the IOS features used to protect against them.",
          "length": "6479",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/iins/008-Implementing-Layer-Two-Security.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/iins/008-Implementing-Layer-Two-Security-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/iins/008-Implementing-Layer-Two-Security-sm.jpg",
          "title": "Implementing Layer Two Security",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:15,516 --> 00:00:22,900\n[SOUND]\n\n3\n00:00:22,900 --> 00:00:32,900\n[MUSIC]\n\n4\n00:00:34,114 --> 00:00:36,930\nAll right, good morning, good afternoon,\ngood evening, and welcome back.\n\n5\n00:00:36,930 --> 00:00:40,291\nTo another episode of ITProTV,\nI'm your host Don Pezet, today with Mr.\n\n6\n00:00:40,291 --> 00:00:40,950\nRonnie Wong.\n\n7\n00:00:40,950 --> 00:00:41,860\nHow's it going Ronnie?\n\n8\n00:00:41,860 --> 00:00:43,090\n>> It is going very well.\n\n9\n00:00:43,090 --> 00:00:48,100\nI'm proud to admit, I did not ask\nMiley Cyrus to a senior prom, this year.\n\n10\n00:00:48,100 --> 00:00:50,620\n>> No?\nI bet she had no shortage of invites.\n\n11\n00:00:50,620 --> 00:00:52,620\n>> That's what I understand at least.\n\n12\n00:00:52,620 --> 00:00:54,650\nIt's starting to appear on news,\nthat's why I knew that.\n\n13\n00:00:54,650 --> 00:00:58,610\n>> It was Mila Kunis\nthat started all that.\n\n14\n00:00:58,610 --> 00:01:03,050\nGoing to proms or\nmilitary balls or something.\n\n15\n00:01:03,050 --> 00:01:03,830\nAll right well.\n\n16\n00:01:03,830 --> 00:01:07,250\nWe don't have anything as exciting as\nhigh school prom to talk about today.\n\n17\n00:01:07,250 --> 00:01:12,150\nBut we do have layer two security and\nto be honest with you,\n\n18\n00:01:12,150 --> 00:01:15,316\nof all the different\nsections of the objectives.\n\n19\n00:01:15,316 --> 00:01:20,880\nThis in my opinion is one of\nthe most useful and I know I have\n\n20\n00:01:20,880 --> 00:01:25,980\ngiven security talks all over the place\nand a lot of the talks I will tell people.\n\n21\n00:01:25,980 --> 00:01:29,310\nLike hey, a lot of environments\nthey buy these switches,\n\n22\n00:01:29,310 --> 00:01:31,260\nthese high end Cisco switches.\n\n23\n00:01:31,260 --> 00:01:35,610\nAnd they don't realize how many\nsecurity features are in there to\n\n24\n00:01:35,610 --> 00:01:37,430\nprotect you from layer two attacks.\n\n25\n00:01:37,430 --> 00:01:39,040\nAll I have to do is turn them on.\n\n26\n00:01:39,040 --> 00:01:41,120\nThey're just not on by default.\n\n27\n00:01:41,120 --> 00:01:43,980\nBut, people don't even know they're there\nand they don't take advantage of them.\n\n28\n00:01:43,980 --> 00:01:45,470\nAnd in this episode.\n\n29\n00:01:45,470 --> 00:01:48,300\nIn this little block of objectives,\nwe're gonna cover them.\n\n30\n00:01:48,300 --> 00:01:51,790\nWe're gonna talk about these things that\nyou likely already have on your network\n\n31\n00:01:51,790 --> 00:01:53,610\nthat you just need to turn on.\n\n32\n00:01:53,610 --> 00:01:56,270\n>> Yeah and it's kind of interesting\nthat you mention that, Don.\n\n33\n00:01:56,270 --> 00:01:59,190\nThe very fact is,\nwe like protecting our networks.\n\n34\n00:01:59,190 --> 00:02:01,830\nEverybody does, but most off the focus.\n\n35\n00:02:01,830 --> 00:02:07,220\nI'm gonna say heck 90% of the focus,\nis always on that edge security and\n\n36\n00:02:07,220 --> 00:02:10,490\nnobody ever thinks about\nit from the inside and so\n\n37\n00:02:10,490 --> 00:02:13,270\neverybody thinks once I've got\nthe edge protected, we're fine.\n\n38\n00:02:13,270 --> 00:02:14,980\nBut remember that in true security,\n\n39\n00:02:14,980 --> 00:02:17,660\nwe have to protect every\naspect of our infrastructure.\n\n40\n00:02:17,660 --> 00:02:20,290\nAnd that's where we come\nin to layer two security.\n\n41\n00:02:20,290 --> 00:02:22,080\n>> Yeah and these internal attacks,\n\n42\n00:02:22,080 --> 00:02:25,658\nthese layer two attacks,\nthey're often easier to perform.\n\n43\n00:02:25,658 --> 00:02:30,410\nTo perform an edge attack, to break into\nan external router, and external firewall\n\n44\n00:02:30,410 --> 00:02:34,300\nis normally very difficult, because those\ndevices are designed to handle that.\n\n45\n00:02:34,300 --> 00:02:39,090\nBut switches on the other hand, switches\nare generally used in our trusted networks\n\n46\n00:02:39,090 --> 00:02:43,400\non our Lan and in an environment\nthat's supposed to be friendly, right?\n\n47\n00:02:43,400 --> 00:02:44,080\nBut more and\n\n48\n00:02:44,080 --> 00:02:47,550\nmore we hear that organizations\nget compromised from the inside.\n\n49\n00:02:47,550 --> 00:02:51,590\nThe internal employees, people who are\nbehind your firewall, behind your edge.\n\n50\n00:02:51,590 --> 00:02:55,020\nAnd they're breaking into data\ngaining access to information,\n\n51\n00:02:55,020 --> 00:02:56,150\ncreating denial services.\n\n52\n00:02:56,150 --> 00:02:59,380\nAll sorts of stuff from\ninside the network.\n\n53\n00:02:59,380 --> 00:03:01,850\n>> Yeah we don't think\nabout it again a lot.\n\n54\n00:03:01,850 --> 00:03:03,600\nThere's so many different things.\n\n55\n00:03:03,600 --> 00:03:05,770\nSwitches are designed\nright from the beginning.\n\n56\n00:03:05,770 --> 00:03:07,990\nYou plug them in and they turn on.\n\n57\n00:03:07,990 --> 00:03:10,890\nYou plug a network cable into it,\nthe thing wants to actually work and\n\n58\n00:03:10,890 --> 00:03:12,890\nactually do everything that we have.\n\n59\n00:03:12,890 --> 00:03:16,420\nSo leaving things at their default\nconfigurations, stuff like that.\n\n60\n00:03:16,420 --> 00:03:18,200\nEven though it makes it nice and easy and\n\n61\n00:03:18,200 --> 00:03:21,300\nuseful, it's not as\nprotected as it needs to be.\n\n62\n00:03:21,300 --> 00:03:24,250\nWe need to know more about securing\nfrom the inside, especially this.\n\n63\n00:03:25,810 --> 00:03:28,460\n>> All right so\nCisco kicks of this objective.\n\n64\n00:03:28,460 --> 00:03:33,280\nThe overall objective, objective six,\nis common layer two attacks.\n\n65\n00:03:33,280 --> 00:03:36,280\nBut the whole objective is not common\nattacks really just that first one.\n\n66\n00:03:36,280 --> 00:03:41,300\nSo 6.1, describe layer two security\nusing Cisco switches really\n\n67\n00:03:41,300 --> 00:03:43,730\ndoesn't go on to talk about security,\nbut talks about the attacks themselves.\n\n68\n00:03:43,730 --> 00:03:46,380\nSo the objective names\nare a little misleading.\n\n69\n00:03:46,380 --> 00:03:49,650\nSo in the first little block here we\ndo take a look at some of the types of\n\n70\n00:03:49,650 --> 00:03:51,170\nattacks that are out there.\n\n71\n00:03:51,170 --> 00:03:54,590\nAnd then all of the rest of them and\n\n72\n00:03:54,590 --> 00:03:58,680\nthey're really letters in the official\nobjectives, but 6.2, 6.3, four,\n\n73\n00:03:58,680 --> 00:04:05,445\nthose guys are all talking about what\nwe can do- do to fix the problem.\n\n74\n00:04:05,445 --> 00:04:09,251\nWhat security features do we have to\nresolve issues with Spanning Tree\n\n75\n00:04:09,251 --> 00:04:13,375\nprotocol, to protect inter VLAN routing,\nto protect VLAN hopping.\n\n76\n00:04:13,375 --> 00:04:15,780\nThen you'll see that\nthere's quite a few things.\n\n77\n00:04:15,780 --> 00:04:16,860\n>> Mm-hm.\n\n78\n00:04:16,860 --> 00:04:19,550\n>> All right, so let's start\nwith just these common attacks,\n\n79\n00:04:19,550 --> 00:04:21,470\nright here in the beginning.\n\n80\n00:04:21,470 --> 00:04:26,250\nThe first one is a Spanning Tree\nprotocol attack or an STP attack.\n\n81\n00:04:26,250 --> 00:04:31,440\nNow Spanning Tree Protocol, if you guys\nput on your way back machine hat or\n\n82\n00:04:31,440 --> 00:04:35,940\nwhatever and think back to the CCENT show.\n\n83\n00:04:35,940 --> 00:04:39,330\nSpanning Tree Protocol is\na loop prevention mechanism.\n\n84\n00:04:39,330 --> 00:04:44,250\nIf you have multiple switches in your\nenvironment and you uplink them together,\n\n85\n00:04:44,250 --> 00:04:48,030\nit's possible if you're not paying\nattention to create a loop.\n\n86\n00:04:48,030 --> 00:04:51,520\nAnd if that happens, unicasts and\nbroadcasts that are generated\n\n87\n00:04:51,520 --> 00:04:54,440\ncan loop around to the switches and\nrattle around forever and\n\n88\n00:04:54,440 --> 00:04:57,610\nif you get enough of those going on,\nthey build over time.\n\n89\n00:04:57,610 --> 00:05:01,400\nThe switch will eventually become\nsaturated, your network will slow down and\n\n90\n00:05:01,400 --> 00:05:02,508\nyou stop working.\n\n91\n00:05:02,508 --> 00:05:04,640\n>> Yeah.\nIt [COUGH] excuse me.\n\n92\n00:05:04,640 --> 00:05:06,875\nAnd the only solution is\nto interrupt the circle.\n\n93\n00:05:06,875 --> 00:05:08,540\n>> Mm-hm\n>> And if you re-boot a switch,\n\n94\n00:05:08,540 --> 00:05:11,140\nthat'll stop it temporarily, but\nit's just gonna build back up again.\n\n95\n00:05:11,140 --> 00:05:15,845\nSo, Spanning Tree Protocol,\nit detects when that happens.\n\n96\n00:05:15,845 --> 00:05:17,300\n>> Mm-hm.\n>> It watches, and it listens.\n\n97\n00:05:17,300 --> 00:05:18,670\nAnd it says hey, you know what?\n\n98\n00:05:18,670 --> 00:05:20,250\nI see a loop on the network.\n\n99\n00:05:20,250 --> 00:05:22,980\nLet me shut off one of the switch\nports to fix the loop.\n\n100\n00:05:22,980 --> 00:05:25,140\nAll right, so it's a great technology.\n\n101\n00:05:25,140 --> 00:05:28,000\nLoop prevention is something\nwe definitely want.\n\n102\n00:05:28,000 --> 00:05:32,260\nBut there are some attacks that can be\npulled off against Spanning Tree protocol,\n\n103\n00:05:32,260 --> 00:05:34,170\nthat can be a little dangerous.\n\n104\n00:05:34,170 --> 00:05:35,920\nLet me show you guys an example.\n\n105\n00:05:35,920 --> 00:05:39,960\nI drew a picture before the show so I\ncould illustrate this a little bit better.\n\n106\n00:05:39,960 --> 00:05:43,470\nLet's take this environment right here.\n\n107\n00:05:43,470 --> 00:05:47,690\nI've got two switches,\nand these are just 3750's.\n\n108\n00:05:47,690 --> 00:05:51,650\nSo, I've got two switches and I've got\nthem uplinked, via their uplink ports,\n\n109\n00:05:51,650 --> 00:05:53,970\nright there, and\nthey're running and they're happy.\n\n110\n00:05:53,970 --> 00:05:57,210\nNow, Spanning Tree protocol\nis running on these switches,\n\n111\n00:05:57,210 --> 00:06:00,940\nbecause if I were to run a second\ncable between the two switches,\n\n112\n00:06:00,940 --> 00:06:02,830\nit would detect that and\nshut one of them off.\n\n113\n00:06:02,830 --> 00:06:03,440\nRight?\n\n114\n00:06:03,440 --> 00:06:07,990\nSpanning Tree protocol is running by\ndefault on all Cisco switches that have\n\n115\n00:06:07,990 --> 00:06:11,904\na four digit product number.\n\n116\n00:06:11,904 --> 00:06:15,798\nYoue 1900's, your 2960's.\n\n117\n00:06:15,798 --> 00:06:19,700\nYour 3560's, your 3750's.\n\n118\n00:06:19,700 --> 00:06:23,340\nThey're all running Spanning Tree\nprotocol right out of the box,\n\n119\n00:06:23,340 --> 00:06:24,810\nyou don't even have to configure it.\n\n120\n00:06:24,810 --> 00:06:25,900\nIt's doing that loop detection.\n\n121\n00:06:26,960 --> 00:06:30,960\nWell, an attacker can\ntake advantage of this.\n\n122\n00:06:30,960 --> 00:06:33,880\nFor this whole show,\nlet's just think of these switches in\n\n123\n00:06:33,880 --> 00:06:37,270\nterms of being at their default right\nout of the box like Ronnie said.\n\n124\n00:06:37,270 --> 00:06:40,760\nOkay, so\nit's running Spanning Tree out of the box.\n\n125\n00:06:40,760 --> 00:06:45,350\nWhen the two switches uplink together\na Spanning Tree election occurs.\n\n126\n00:06:45,350 --> 00:06:47,070\nAnd one of them becomes the root.\n\n127\n00:06:48,120 --> 00:06:51,577\nThe other one becomes, well, not the root.\n\n128\n00:06:51,577 --> 00:06:55,610\n[LAUGH] And if there's a loop,\nit's up to the not the root guy to fix it.\n\n129\n00:06:55,610 --> 00:06:56,280\nRight?\n\n130\n00:06:56,280 --> 00:06:57,980\nBut in this case, there's no loop, right?\n\n131\n00:06:57,980 --> 00:06:59,360\nIt's just a standard network.\n\n132\n00:06:59,360 --> 00:06:59,960\nRight?\n\n133\n00:06:59,960 --> 00:07:05,800\nNow, right in this environment, I've got\nthe attacker plugged into one switch and\n\n134\n00:07:05,800 --> 00:07:08,300\nI've got a host plugged\ninto that same switch.\n\n135\n00:07:08,300 --> 00:07:11,980\nAnd the switch uplinks to another\nswitch where there's a server attached.\n\n136\n00:07:11,980 --> 00:07:14,740\nAnd apparently I got lazy and\ndidn't type a name for the server.\n\n137\n00:07:14,740 --> 00:07:19,410\nSo this is kind of the network\nthat we've got right now, right.\n\n138\n00:07:19,410 --> 00:07:25,210\nIf that host wants to talk to the server,\nthe communication goes up to it's switch,\n\n139\n00:07:25,210 --> 00:07:30,330\nacross the uplink and\ndown to the server on the other side.\n\n140\n00:07:30,330 --> 00:07:32,990\nRight, so that's the communication\nstream that is happening right now.\n\n141\n00:07:34,190 --> 00:07:38,160\nThe attacker is not in the middle\nof that communication at all.\n\n142\n00:07:38,160 --> 00:07:42,140\nAnd if the attacker's running\na sniffer and their capturing traffic,\n\n143\n00:07:42,140 --> 00:07:48,570\nwell a switch, it sends unicasts directly\nto the ports they need to go on.\n\n144\n00:07:48,570 --> 00:07:50,300\nIt sends broadcasts to every port.\n\n145\n00:07:50,300 --> 00:07:54,153\nSo all the attacker would ever see would\nbe broadcasts between the host and\n\n146\n00:07:54,153 --> 00:07:57,710\nthe server, which they're only\ngoing to do at the very beginning.\n\n147\n00:07:57,710 --> 00:08:00,044\nAfter that, no more broadcast and so,\n\n148\n00:08:00,044 --> 00:08:03,460\nthe attacker's not going to\nbe able to see this traffic.\n\n149\n00:08:03,460 --> 00:08:08,641\nBut, if they're a very talented hacker,\nwhat they can do\n\n150\n00:08:08,641 --> 00:08:14,850\nis they can put a second network\ncard in their computer, okay?\n\n151\n00:08:14,850 --> 00:08:17,350\nAnd if they have a second network card,\n\n152\n00:08:17,350 --> 00:08:21,070\nthey can find a wall\njack somewhere nearby.\n\n153\n00:08:21,070 --> 00:08:25,760\nAnd they can run their cable\nover to the other switch.\n\n154\n00:08:25,760 --> 00:08:26,550\nOkay.\n\n155\n00:08:26,550 --> 00:08:32,980\nIf they can get themselves plugged into\ntwo different switches like this, alright.\n\n156\n00:08:32,980 --> 00:08:37,250\nThey can then,\nbridge their network adapters together.\n\n157\n00:08:37,250 --> 00:08:41,010\nAnd start to participate\nin spanning tree protocol.\n\n158\n00:08:41,010 --> 00:08:43,950\nRemember when that spanning\ntree protocol election occurs\n\n159\n00:08:43,950 --> 00:08:45,937\nsomebody's got to become the route.\n\n160\n00:08:45,937 --> 00:08:51,820\nAnd the route person is simply whoever\nhas the lowest priority number.\n\n161\n00:08:51,820 --> 00:08:53,960\nThe default you might remember is 32,768.\n\n162\n00:08:53,960 --> 00:08:56,870\nThat's the default priority.\n\n163\n00:08:56,870 --> 00:08:58,500\nAn attacker knows this.\n\n164\n00:08:58,500 --> 00:09:00,610\nIt's in the Cisco documentation.\n\n165\n00:09:00,610 --> 00:09:04,040\nSo they could set it to\nsomething really low like 4,096.\n\n166\n00:09:04,040 --> 00:09:04,660\nRight?\n\n167\n00:09:04,660 --> 00:09:06,060\nReally low.\n\n168\n00:09:06,060 --> 00:09:09,730\nAnd by doing that, the attacker\nplugs into the two switches and\n\n169\n00:09:09,730 --> 00:09:12,560\nstarts to participate in\na spanning-tree protocol.\n\n170\n00:09:12,560 --> 00:09:15,670\nThey have a lower priority\nthan the other switches.\n\n171\n00:09:15,670 --> 00:09:19,840\nSo, the attacker is going\nto become the route.\n\n172\n00:09:19,840 --> 00:09:24,290\nAnd that means that we now\nhave a triangle right?\n\n173\n00:09:24,290 --> 00:09:26,890\nBetween these devices, okay?\n\n174\n00:09:26,890 --> 00:09:31,600\nAnd each switch is going to\nidentify what is a route port and\n\n175\n00:09:31,600 --> 00:09:34,670\nwhat is a designated port.\n\n176\n00:09:34,670 --> 00:09:38,740\nYou know, designated being it's a good\nport but not pointing at the route.\n\n177\n00:09:38,740 --> 00:09:43,339\nSo this switch is gonna say hey that's\nthe fastest way to get to the route.\n\n178\n00:09:44,360 --> 00:09:48,080\nThis switch is going to say that this\nis the fastest way to get to the route.\n\n179\n00:09:48,080 --> 00:09:51,860\nThen they're going to turn\noff this cable between them,\n\n180\n00:09:51,860 --> 00:09:54,360\nwhich would be the orange\ncable that I've drawn here.\n\n181\n00:09:54,360 --> 00:09:59,750\nThey're going to turn that off because\nit's not as effective of a path to get to\n\n182\n00:09:59,750 --> 00:10:01,130\nthe route, the attacker.\n\n183\n00:10:01,130 --> 00:10:06,820\nAll right, so when that's done,\nbecause this link gets turned off,\n\n184\n00:10:06,820 --> 00:10:11,670\nif my host wants to talk\nto the server it's gonna go\n\n185\n00:10:11,670 --> 00:10:17,410\nup the cable to the route,\ndown to the other switch.\n\n186\n00:10:17,410 --> 00:10:20,190\nAnd over to the server, okay.\n\n187\n00:10:20,190 --> 00:10:25,430\nThe end result is that the host talks\nto the server just like normal.\n\n188\n00:10:25,430 --> 00:10:27,440\nDoesn't even notice anything's different.\n\n189\n00:10:27,440 --> 00:10:31,360\nBut all traffic is now\nflowing through the attacker.\n\n190\n00:10:31,360 --> 00:10:35,250\nThe attacker is able to change\nthe direction of our traffic and now,\n\n191\n00:10:35,250 --> 00:10:37,650\nthey get broadcasts as well as unicasts.\n\n192\n00:10:37,650 --> 00:10:40,890\nAnd, they're able to intercept and\nrecord all of that traffic.\n\n193\n00:10:40,890 --> 00:10:45,540\n>> This is kind of, an amazing thing\nbecause Spanning Tree Protocol\n\n194\n00:10:45,540 --> 00:10:47,640\nhelps this to actually be able to happen.\n\n195\n00:10:47,640 --> 00:10:52,530\nWith the Spanning Tree Protocol and\nthe attacker now becoming the route.\n\n196\n00:10:52,530 --> 00:10:54,810\nAll traffic in that particular VLAN,\n\n197\n00:10:54,810 --> 00:10:59,620\nand all VLANs if we've got it set that\nway, will flow through that route bridge.\n\n198\n00:10:59,620 --> 00:11:00,580\nThere is nothing else we can do,\n\n199\n00:11:00,580 --> 00:11:02,880\ncuz that's the default\nnature of spanning tree.\n\n200\n00:11:02,880 --> 00:11:05,490\nSo this is something an attacker\ncan really take advantage of,\n\n201\n00:11:05,490 --> 00:11:06,640\njust by simply adding in what?\n\n202\n00:11:06,640 --> 00:11:09,730\nA nick, and\nthen another cable being able to do that.\n\n203\n00:11:09,730 --> 00:11:10,800\nSo it's kind of amazing,\n\n204\n00:11:10,800 --> 00:11:13,600\nonce you actually have a little bit\nof knowledge, how easy this is.\n\n205\n00:11:13,600 --> 00:11:16,520\nAnd they just have to experiment around a\nbit if they could chuck a cable up into if\n\n206\n00:11:16,520 --> 00:11:20,540\nyou have drop ceiling, chuck a cable up\nin there and run down in another room.\n\n207\n00:11:20,540 --> 00:11:23,590\nIt just takes a little bit of time to find\na port some where else they can plug into.\n\n208\n00:11:23,590 --> 00:11:27,860\nI've even seen this pulled of\nwhere they had a physical nick and\n\n209\n00:11:27,860 --> 00:11:30,580\na wireless adapter, and\nthey were forming it that way.\n\n210\n00:11:30,580 --> 00:11:32,610\nNow you normally take a performance\nhit when you do that, so\n\n211\n00:11:32,610 --> 00:11:34,960\nit's a little more noticeable,\nbut it can be effective.\n\n212\n00:11:34,960 --> 00:11:39,310\nI've seen the attack done a few different\nways, but it's a very real attack and\n\n213\n00:11:39,310 --> 00:11:41,610\nit doesn't take a lot of sophistication.\n\n214\n00:11:41,610 --> 00:11:43,900\n>> No.\n>> It's actually pretty easy to pull off.\n\n215\n00:11:43,900 --> 00:11:47,910\nSo, we need to be able to protect our\nswitch from environments like this.\n\n216\n00:11:47,910 --> 00:11:51,560\nNow, the root cause here of this problem\n\n217\n00:11:51,560 --> 00:11:55,730\nis not Spanning Tree protocol itself,\nbut the election process.\n\n218\n00:11:55,730 --> 00:11:58,226\nThe fact that somebody\nwas able to come in and\n\n219\n00:11:58,226 --> 00:12:01,740\nbecome the route of our\nSpanning Tree protocol environment.\n\n220\n00:12:01,740 --> 00:12:03,240\nThat's a real problem.\n\n221\n00:12:03,240 --> 00:12:07,530\nSo we need to find a way to protect from\nthat, and we'll see a few methods for\n\n222\n00:12:07,530 --> 00:12:09,220\nthat a little bit later all right.\n\n223\n00:12:09,220 --> 00:12:14,080\nSo that's one of the big attacks\nthat we need to worry about.\n\n224\n00:12:14,080 --> 00:12:15,380\nWhat else is on our list Ronnie?\n\n225\n00:12:15,380 --> 00:12:18,380\nSo we've got, or\nshould we talk about the solution.\n\n226\n00:12:18,380 --> 00:12:21,210\nI worry, if we talk about\nthe solutions with each problem,\n\n227\n00:12:21,210 --> 00:12:22,790\nwe might miss a solution.\n\n228\n00:12:22,790 --> 00:12:25,810\n>> Oh, that's true.\n\n229\n00:12:25,810 --> 00:12:26,650\n>> Oh, now I'm torn.\n\n230\n00:12:26,650 --> 00:12:27,150\nWhich way do I?\n\n231\n00:12:27,150 --> 00:12:27,690\nYou know what?\n\n232\n00:12:27,690 --> 00:12:29,500\nLet's do it.\nLet's talk about the solution with\n\n233\n00:12:29,500 --> 00:12:30,020\nthe problem.\n\n234\n00:12:30,020 --> 00:12:32,360\nJust so\nit's all fresh in our minds, right?\n\n235\n00:12:32,360 --> 00:12:38,000\nSo how do we stop\nsomebody from doing this?\n\n236\n00:12:38,000 --> 00:12:38,850\nRight.\n\n237\n00:12:38,850 --> 00:12:42,350\nWell I can think of three different\nways just right off hand,\n\n238\n00:12:42,350 --> 00:12:44,600\nbuilt into the switch but not turned on.\n\n239\n00:12:44,600 --> 00:12:48,610\nThat we just need to choose to turn on.\n\n240\n00:12:48,610 --> 00:12:53,030\nBasically the switch,\nwell when you buy a Cisco switch.\n\n241\n00:12:53,030 --> 00:12:53,670\nLike Ronnie said.\n\n242\n00:12:53,670 --> 00:12:55,110\nYou take it out of the box.\n\n243\n00:12:55,110 --> 00:12:58,670\nAll the ports are turned on and\nready to rock, right?\n\n244\n00:12:58,670 --> 00:13:03,810\nThe other thing is all the ports are set\nto run the dynamic trunking protocol,\n\n245\n00:13:03,810 --> 00:13:05,150\nDTP, all right?\n\n246\n00:13:05,150 --> 00:13:06,560\nLet me show you what I mean.\n\n247\n00:13:06,560 --> 00:13:14,000\nI'm gonna pull up a switch here and\nlet me just take a look at port ten.\n\n248\n00:13:14,000 --> 00:13:20,660\nSo on this switch,\nsee how it says interface FA0/10 and end.\n\n249\n00:13:20,660 --> 00:13:22,310\nThis is the default.\n\n250\n00:13:22,310 --> 00:13:24,740\nAbsolutely no configuration\ndone on this port.\n\n251\n00:13:25,980 --> 00:13:32,460\nIf I do show interface FA0/10 trunk.\n\n252\n00:13:32,460 --> 00:13:37,180\nI can see that the mode for\nthis port is set to auto.\n\n253\n00:13:38,380 --> 00:13:42,870\nWhen a port is set to auto\nthat means that it will become\n\n254\n00:13:42,870 --> 00:13:47,650\na trunk if somebody else asks us too.\n\n255\n00:13:47,650 --> 00:13:51,990\nSo if an attacker plugs in a PC,\nthis will come up as an access port.\n\n256\n00:13:51,990 --> 00:13:57,000\nBut if their PC then requests to be\na trunk, the switch will automatically\n\n257\n00:13:57,000 --> 00:14:01,410\nflip over to a trunk and now the attacker\nhas access to all of our VLANs.\n\n258\n00:14:01,410 --> 00:14:06,010\nSo that is unfortunately the default\nconfiguration on these Cisco switchers and\n\n259\n00:14:06,010 --> 00:14:09,230\nattackers know about it.\n\n260\n00:14:09,230 --> 00:14:12,940\nThis is a Cisco 3560,\nit's what you're going to see on the exam.\n\n261\n00:14:12,940 --> 00:14:15,460\nIf you have older switches like 3550's.\n\n262\n00:14:15,460 --> 00:14:18,900\nThey default to desirable, and\nthat's where the switch will\n\n263\n00:14:18,900 --> 00:14:22,500\nactually try to become a trunk,\neven if the other side doesn't ask for it.\n\n264\n00:14:22,500 --> 00:14:27,270\nAnd again, it's just that much easier for\nthe attacker to take advantage of it.\n\n265\n00:14:27,270 --> 00:14:29,060\nI know I've said this in other shows.\n\n266\n00:14:29,060 --> 00:14:35,210\nI hate dynamically negotiating stuff,\nso I almost always turn this off,\n\n267\n00:14:35,210 --> 00:14:38,400\nand that's one of the first tools\nof the trade that we can do.\n\n268\n00:14:38,400 --> 00:14:41,600\nIf you don't want port ten to be a trunk.\n\n269\n00:14:41,600 --> 00:14:44,000\nTurn off trunking on it, right.\n\n270\n00:14:44,000 --> 00:14:49,830\nIf I get into FA0/10,\nI can say switchboard, mode, access.\n\n271\n00:14:49,830 --> 00:14:52,500\nSwitchboard no negotiate.\n\n272\n00:14:52,500 --> 00:14:55,680\nThat turns off dynamic trunking protocol,\n\n273\n00:14:55,680 --> 00:14:58,560\nit forces us to be an access switch,\nand that's it.\n\n274\n00:14:58,560 --> 00:15:00,120\nYou cannot be a trunk on this port.\n\n275\n00:15:02,230 --> 00:15:05,170\n>> There's another way that\nwe can also prevent this too.\n\n276\n00:15:05,170 --> 00:15:09,040\nWhen Don was telling us about the idea of\ndropping a particular cable over the wall\n\n277\n00:15:09,040 --> 00:15:12,962\nand finding wall jackets\nthat he can plug into.\n\n278\n00:15:12,962 --> 00:15:16,320\nRemember because the default\nnature of those ports are just on.\n\n279\n00:15:16,320 --> 00:15:20,110\nIn other words, when we plug it in,\nyou plug a cable into it and it's on.\n\n280\n00:15:20,110 --> 00:15:24,580\nOne of the things we can do,\nwhich is an incredibly simple way to\n\n281\n00:15:24,580 --> 00:15:29,380\nbreak this down is to shut down those\nports administratively as well.\n\n282\n00:15:29,380 --> 00:15:33,590\nWe can go in there and we can actually\ndo that idea of a shut down on the ports\n\n283\n00:15:33,590 --> 00:15:36,350\nthat we're not really\nusing at that point here.\n\n284\n00:15:36,350 --> 00:15:40,180\nAnd that way, even if somebody does plug\ninto a wall jack directly in that switch,\n\n285\n00:15:40,180 --> 00:15:43,890\nunless I go in and manually turn it on,\nthen it's actually gonna be off.\n\n286\n00:15:43,890 --> 00:15:46,140\nSo that could be another\nway to prevent this.\n\n287\n00:15:46,140 --> 00:15:46,945\n>> Yeah, so.\n\n288\n00:15:46,945 --> 00:15:50,525\n>> I'm gonna create a little notepad\nfile here and keep track of this.\n\n289\n00:15:50,525 --> 00:15:52,705\nWe'll post the notes with the show so\nyou guys have them.\n\n290\n00:15:52,705 --> 00:15:56,047\nSo to prevent unauthorized trunks,\nyour first method,\n\n291\n00:15:56,047 --> 00:15:58,005\njust shut down the unused ports.\n\n292\n00:15:58,005 --> 00:16:00,375\nThat's probably the best thing to do.\n\n293\n00:16:00,375 --> 00:16:05,420\nBut they could just unplug a PC though and\nso then we've got a vulnerability there.\n\n294\n00:16:05,420 --> 00:16:10,580\nSo then we can always go and\ntry like my method which is\n\n295\n00:16:10,580 --> 00:16:15,260\ndisable trunking on access ports, right.\n\n296\n00:16:15,260 --> 00:16:17,970\nSo we could do something like that.\n\n297\n00:16:17,970 --> 00:16:22,740\nSo that would disable that switch-port\nmode access switch-port no negotiate.\n\n298\n00:16:22,740 --> 00:16:23,930\n>> Yeah.\n>> All right,\n\n299\n00:16:23,930 --> 00:16:26,190\nthere are other things though.\n\n300\n00:16:26,190 --> 00:16:29,740\nWhat if, for example,\nwe need trunking on that port?\n\n301\n00:16:29,740 --> 00:16:31,392\nWhat if we have voice over IP phones?\n\n302\n00:16:31,392 --> 00:16:35,850\nRight and void phones cuz this is\nhow we are here, here at ITProTV.\n\n303\n00:16:35,850 --> 00:16:40,660\nVoid phones, they generally\nhave a data port on them, and\n\n304\n00:16:40,660 --> 00:16:43,960\na well the phone itself so\nthat you can plug.\n\n305\n00:16:43,960 --> 00:16:46,770\nPlug a phone into the wall and\nplug your PC into the phone.\n\n306\n00:16:46,770 --> 00:16:48,880\nAnd they do that through trunking.\n\n307\n00:16:48,880 --> 00:16:50,640\nThe voice data goes on one VLAN.\n\n308\n00:16:50,640 --> 00:16:52,170\nThe PC data goes on the other VLAN.\n\n309\n00:16:53,180 --> 00:16:55,540\nIn those scenarios,\nwe can't turn off trunking.\n\n310\n00:16:55,540 --> 00:16:56,040\nWe need it.\n\n311\n00:16:57,230 --> 00:17:02,840\nSo what we can do instead,\nis to do some BPDU doctoring, right?\n\n312\n00:17:02,840 --> 00:17:07,330\nWe can say, you know what,\nI'm gonna allow trunking on this port, but\n\n313\n00:17:07,330 --> 00:17:11,200\nI'm gonna watch the BPDUs and\ntake certain actions.\n\n314\n00:17:11,200 --> 00:17:14,770\nOkay, this is important,\nI'm getting ahead of myself I think.\n\n315\n00:17:14,770 --> 00:17:17,190\nBPDUs, you guys should be familiar\nwith those at this point.\n\n316\n00:17:17,190 --> 00:17:20,780\nBut if you aren't,\nit's Bridge Protocol Data Unit.\n\n317\n00:17:20,780 --> 00:17:21,960\nAnd that's the communication,\n\n318\n00:17:21,960 --> 00:17:26,250\nthat's the frames that are sent between\nswitches running spanning tree protocol.\n\n319\n00:17:26,250 --> 00:17:31,060\nSo these BPDUs are how it does an\nelection, how somebody becomes the route,\n\n320\n00:17:31,060 --> 00:17:36,230\nhow this attack is pulled off BPDUs\nof the messages that facilitate that.\n\n321\n00:17:36,230 --> 00:17:42,650\nSo we can step in and we can restrict\n\n322\n00:17:42,650 --> 00:17:50,090\nthe BPDUs, now,\nI got three ways that we can do that.\n\n323\n00:17:50,090 --> 00:17:51,250\nWhy not have three?\n\n324\n00:17:51,250 --> 00:17:53,110\nSo there's BPDU filter.\n\n325\n00:17:53,110 --> 00:17:54,960\n>> And guard.\n\n326\n00:17:54,960 --> 00:17:56,130\n>> BPDU guard.\n\n327\n00:17:57,640 --> 00:17:59,120\nGuard, there we go.\n\n328\n00:17:59,120 --> 00:18:00,840\nAnd Root Guard.\n\n329\n00:18:00,840 --> 00:18:01,540\n>> Root Guard.\n\n330\n00:18:01,540 --> 00:18:02,300\n>> All right.\n\n331\n00:18:02,300 --> 00:18:05,820\nSo there's there different\ntools available for this, okay?\n\n332\n00:18:05,820 --> 00:18:10,760\nLet's just start with kind of a little\ndescription of each one right,\n\n333\n00:18:10,760 --> 00:18:15,980\nBPDU filter, just drop BPDUs on a port.\n\n334\n00:18:15,980 --> 00:18:16,650\nOkay.\n\n335\n00:18:16,650 --> 00:18:19,240\nIf somebody plugs in the switch,\nof their own, and\n\n336\n00:18:19,240 --> 00:18:24,110\nit starts sending BPDUs, like they're\ntrying to become root, we just delete it.\n\n337\n00:18:24,110 --> 00:18:30,410\nWe let the rest of the communications go,\nbut the BPDUs themselves are filtered out.\n\n338\n00:18:30,410 --> 00:18:37,560\n>> BPT, BPDU guard, I'm not gonna be able\nto say that here, to many letters in it.\n\n339\n00:18:37,560 --> 00:18:42,540\nFor us does the same thing except when\nit senses a BPDU, it shuts the port off.\n\n340\n00:18:45,590 --> 00:18:46,090\nYeah.\n\n341\n00:18:47,820 --> 00:18:51,720\n>> So again, if you've got a port that you\nknow a PC is supposed to be plugged into,\n\n342\n00:18:51,720 --> 00:18:54,190\nyou should never CBP to use on that port.\n\n343\n00:18:54,190 --> 00:18:55,780\nIt's a PC, right?\n\n344\n00:18:55,780 --> 00:18:57,480\nOr even on voice over IP phone,\n\n345\n00:18:57,480 --> 00:18:59,910\nthe voice over IP phone might\nuse more than one VLAN.\n\n346\n00:18:59,910 --> 00:19:01,190\nIt might use a trunk.\n\n347\n00:19:01,190 --> 00:19:04,790\nbut it shouldn't participate in\nspanning tree protocol because a VOIP\n\n348\n00:19:04,790 --> 00:19:09,180\nphone shouldn't be able to create a loop,\nit's only got two ports, in and out.\n\n349\n00:19:09,180 --> 00:19:11,910\nThe only way it could create a loop\nis if someone ran a cable in and\n\n350\n00:19:11,910 --> 00:19:15,015\nright back in so\nthe phone would plug in to itself\n\n351\n00:19:15,015 --> 00:19:16,895\nwhich means it wouldn't be\nplugged into your network at all!\n\n352\n00:19:16,895 --> 00:19:20,195\nSo a VOIP phone should\nnever really create a loop.\n\n353\n00:19:20,195 --> 00:19:22,715\nWe shouldn't have to use BPUs there too.\n\n354\n00:19:22,715 --> 00:19:25,335\nSo, BPU guard very aggressive.\n\n355\n00:19:25,335 --> 00:19:26,405\nRight?\nYou see a BPU,\n\n356\n00:19:26,405 --> 00:19:28,555\nthat first BPU, shut the port off.\n\n357\n00:19:29,660 --> 00:19:32,367\nSo really aggressive, it's the one I like.\n\n358\n00:19:32,367 --> 00:19:35,010\n>> [LAUGH]\n>> And then the last one is Root Guard.\n\n359\n00:19:35,010 --> 00:19:38,480\nNow with BPDU filter,\nthis one's very similar.\n\n360\n00:19:38,480 --> 00:19:43,110\nWith BPDU filter if we see BPDUs we just\ndelete them and we let anything else go.\n\n361\n00:19:44,150 --> 00:19:49,130\nWith Root Guard It sees the BPDUs,\nit even allows the BPDUs,\n\n362\n00:19:49,130 --> 00:19:52,750\nit allows the switch to\nparticipate in spamming tree, but\n\n363\n00:19:52,750 --> 00:19:57,730\nit will not allow that\nswitch to become root.\n\n364\n00:19:57,730 --> 00:20:03,142\nSo it filters BPDUs if the switch,\n\n365\n00:20:03,142 --> 00:20:08,376\ntries to become the Root Bridge.\n\n366\n00:20:08,376 --> 00:20:10,460\nIn other words, we'll let them connect.\n\n367\n00:20:10,460 --> 00:20:12,880\nWe'll let them participate\nin spamming tree protocol.\n\n368\n00:20:12,880 --> 00:20:16,200\nGoing back to my diagram,\nwe'll let that attacker connect.\n\n369\n00:20:16,200 --> 00:20:18,980\nWe'll let them participate\nin spamming tree, but\n\n370\n00:20:18,980 --> 00:20:23,320\nthe instant he tries to become rude,\nwell, we stop that.\n\n371\n00:20:23,320 --> 00:20:25,040\nRight?\nAnd we stop it either by shutting the port\n\n372\n00:20:25,040 --> 00:20:27,520\ndown or by deleting the BPDU's.\n\n373\n00:20:27,520 --> 00:20:29,600\nI think the default is actually\nto shut the port down.\n\n374\n00:20:29,600 --> 00:20:33,250\nSo the attacker tries to become root and\nall of a sudden they get blocked.\n\n375\n00:20:33,250 --> 00:20:37,140\nBut if they hadn't done that,\nif they had just plugged in, and\n\n376\n00:20:37,140 --> 00:20:39,280\nbrought themselves up, and\n\n377\n00:20:39,280 --> 00:20:43,380\ncommunicated, it would have allowed that,\nbut when they try to become root.\n\n378\n00:20:43,380 --> 00:20:46,003\nThat's when it says [NOISE]\nwe're done with you, you're out.\n\n379\n00:20:46,003 --> 00:20:47,210\nOkay.\n\n380\n00:20:47,210 --> 00:20:49,300\nSo great way of stopping that.\n\n381\n00:20:49,300 --> 00:20:51,100\nNow, why would you want that?\n\n382\n00:20:51,100 --> 00:20:54,820\nWell, you might want people to be able\nto bring switches into your network.\n\n383\n00:20:54,820 --> 00:20:55,680\nWe do it here, right?\n\n384\n00:20:55,680 --> 00:20:58,280\nSo, I can't think of a day.\n\n385\n00:20:58,280 --> 00:20:59,350\nWell, today's.\n\n386\n00:20:59,350 --> 00:21:00,860\nWe brought up two more switches.\n\n387\n00:21:00,860 --> 00:21:03,830\nAnd every day it seems like we're\nbringing in a switch for some purpose and\n\n388\n00:21:03,830 --> 00:21:09,260\ntaking one out, and adding new machines\nmoving them so we want loop detection.\n\n389\n00:21:09,260 --> 00:21:12,450\nWe wanna prevent loops on our network,\nwe just don't want attackers to\n\n390\n00:21:12,450 --> 00:21:15,640\ntake advantage of it, and so\nRoot Guard allows us to do that.\n\n391\n00:21:17,090 --> 00:21:20,279\nAll right, so let's take a look\nat how all these are configured.\n\n392\n00:21:22,260 --> 00:21:27,717\nI'll start with the easiest\none which is the BPDU guard.\n\n393\n00:21:27,717 --> 00:21:29,900\nWell let's start with BPDU filters.\n\n394\n00:21:29,900 --> 00:21:35,130\nIt's the nice one, so BP2U filter\nsays hey we got all these ports,\n\n395\n00:21:35,130 --> 00:21:37,950\nwe'll allow them to trunk if they need to,\nbut\n\n396\n00:21:37,950 --> 00:21:41,890\nwe do not want them participating\nin spanning tree protocol.\n\n397\n00:21:41,890 --> 00:21:44,640\nSo let's say on this switch here,\non switch one.\n\n398\n00:21:44,640 --> 00:21:46,180\nWhat, what ports am I actually using?\n\n399\n00:21:46,180 --> 00:21:49,049\nI gotta make sure I don't accidentally\ndisconnect myself from the switch,\n\n400\n00:21:51,430 --> 00:21:55,370\nports nine and 11, oh good, so\nokay port ten was my little sample port.\n\n401\n00:21:55,370 --> 00:21:57,800\nI picked one right in the middle\nof the ports I'm using.\n\n402\n00:21:57,800 --> 00:22:03,040\nSo let's take ports one through eight,\nokay.\n\n403\n00:22:03,040 --> 00:22:04,950\nI'll just take the first eight ports.\n\n404\n00:22:04,950 --> 00:22:08,820\nAnd let's say on those first eight ports I\nknow I'm gonna have some VOIP phones, and\n\n405\n00:22:08,820 --> 00:22:10,310\nso I need them to be able to trunk.\n\n406\n00:22:10,310 --> 00:22:12,380\nI wanna leave dynamic trunking turned on.\n\n407\n00:22:12,380 --> 00:22:13,240\nOkay?\n\n408\n00:22:13,240 --> 00:22:15,920\nBut I don't want them to\nparticipate in a spanning tree so\n\n409\n00:22:15,920 --> 00:22:19,270\nthat if an attacker plugs in they\nwon't be able to try and take over.\n\n410\n00:22:19,270 --> 00:22:19,810\nAll right?\n\n411\n00:22:19,810 --> 00:22:23,660\nSo I just wanna delete\nBPDUs on those ports.\n\n412\n00:22:23,660 --> 00:22:24,280\nAll right?\n\n413\n00:22:24,280 --> 00:22:29,660\nWell, BPDU filter is actually a,\npart of the port fast command.\n\n414\n00:22:29,660 --> 00:22:31,540\nOkay, if you have access ports,\n\n415\n00:22:31,540 --> 00:22:33,930\nyou probably don't want to run\nspanning tree on them normally.\n\n416\n00:22:33,930 --> 00:22:36,500\n>> Right.\n>> And so we turn on port fast, right?\n\n417\n00:22:36,500 --> 00:22:40,886\nAnd we do that with a command like\nthis from the global we can say\n\n418\n00:22:40,886 --> 00:22:47,005\nspanning-tree Port fast default,\nor I think that's it, right?\n\n419\n00:22:47,005 --> 00:22:48,145\n>> Mm-hm.\n>> Yeah, in default, okay.\n\n420\n00:22:48,145 --> 00:22:53,570\nSpanning-tree port fast default, that\nturns on port fast for all of our ports.\n\n421\n00:22:53,570 --> 00:22:56,070\nAnd then we just go to the ports\nthat we know are trunks and.\n\n422\n00:22:56,070 --> 00:23:00,930\nAnd we say spanning dash tree or\nno spanning dash tree port fast, and\n\n423\n00:23:00,930 --> 00:23:03,090\nit turns them off on the individual ports.\n\n424\n00:23:03,090 --> 00:23:05,970\nI could also go and\nturn it on on each port individually.\n\n425\n00:23:05,970 --> 00:23:09,040\nBut with eight ports,\nI'd go ahead and do it this way.\n\n426\n00:23:09,040 --> 00:23:09,790\nOkay?\n\n427\n00:23:09,790 --> 00:23:13,860\nSo I've now turned on port fast for\nall my ports.\n\n428\n00:23:13,860 --> 00:23:17,450\nOkay now on port one through eight,\n\n429\n00:23:17,450 --> 00:23:21,360\nI wanna make sure that those\nguys aren't sending out BPDUs.\n\n430\n00:23:21,360 --> 00:23:24,820\nAnd so that's where I can use the BPDU\nfilter now If I want to do that for\n\n431\n00:23:24,820 --> 00:23:28,430\nall of my ports by default,\nthen the command is right here.\n\n432\n00:23:28,430 --> 00:23:33,710\nIt's spanning-tree port fast BPDU filter.\n\n433\n00:23:33,710 --> 00:23:35,820\nIf somebody plugs in\n\n434\n00:23:38,340 --> 00:23:42,980\na switch, they'll be able to send BPDUs,\n\n435\n00:23:42,980 --> 00:23:47,550\nwe're just gonna delete them so they won't\nbe able to participate in spanning tree.\n\n436\n00:23:47,550 --> 00:23:50,600\nOkay, so for example here let's do this.\n\n437\n00:23:50,600 --> 00:23:56,580\nI've got a switch, or Ronnie,\nyou plugged in a switch right?\n\n438\n00:23:56,580 --> 00:23:58,420\nOn fa0/1.\n\n439\n00:23:58,420 --> 00:24:03,450\nSo I've got that port\nshut off right now and\n\n440\n00:24:03,450 --> 00:24:10,170\nif I get into interface fa0/1,\nand I do a no shutdown.\n\n441\n00:24:10,170 --> 00:24:11,880\nAll right so here's that port coming up.\n\n442\n00:24:13,730 --> 00:24:14,450\nOr going down.\n\n443\n00:24:14,450 --> 00:24:14,950\nComing up.\n\n444\n00:24:16,611 --> 00:24:17,328\nUp, down.\nWhat's it doing?\n\n445\n00:24:17,328 --> 00:24:20,331\n[LAUGH] All right, so it's coming up.\n\n446\n00:24:20,331 --> 00:24:21,620\nAll right.\n\n447\n00:24:21,620 --> 00:24:23,300\nSo I've got that port up.\n\n448\n00:24:23,300 --> 00:24:24,390\nIt's running.\n\n449\n00:24:24,390 --> 00:24:27,950\nThe switch on the other side\nis running spanning-tree.\n\n450\n00:24:27,950 --> 00:24:30,640\nAnd Ronnie set it so\nthat it is gonna try and become the root.\n\n451\n00:24:30,640 --> 00:24:33,080\nI mean it's gonna be an aggressive\nswitch on the other side.\n\n452\n00:24:33,080 --> 00:24:34,480\nSo it's up.\n\n453\n00:24:36,350 --> 00:24:40,710\nNow if I do a show spanning-tree,\nall right?\n\n454\n00:24:40,710 --> 00:24:42,234\nHere's that port Fa0/1.\n\n455\n00:24:43,490 --> 00:24:45,670\nIt says that it's learning, so\n\n456\n00:24:45,670 --> 00:24:51,403\nI'm going to wait a second here while it\nadvances through that, and now it's 40,\n\n457\n00:24:51,403 --> 00:24:56,367\nand actually look at that Ronnie,\noh shoot, I know what's happening.\n\n458\n00:24:56,367 --> 00:24:57,947\nIf it were an access port and\n\n459\n00:24:57,947 --> 00:25:01,630\nit where sending BPDU's this\nwould trigger it right.\n\n460\n00:25:01,630 --> 00:25:04,110\nBut it's not an access port is a trunk and\n\n461\n00:25:04,110 --> 00:25:09,810\nwhen you have a trunk the BPDU filter and\nthe port fast all together is disabled.\n\n462\n00:25:09,810 --> 00:25:12,380\nSo, port fast is no longer\nrunning on this port, so,\n\n463\n00:25:12,380 --> 00:25:16,550\nI need to hard set it as an access port,\nfirst, to really get a good example.\n\n464\n00:25:16,550 --> 00:25:18,400\nSo, let me do that real quick.\n\n465\n00:25:18,400 --> 00:25:21,530\nBecause that's the other thing\nwe would do to an access port.\n\n466\n00:25:21,530 --> 00:25:22,470\nI'm going to shut it down.\n\n467\n00:25:22,470 --> 00:25:26,679\nWe would say, switchport mode access, and\n\n468\n00:25:26,679 --> 00:25:30,570\nswitch port, no negotiate, right.\n\n469\n00:25:30,570 --> 00:25:32,800\nWe would hard set it as a access port.\n\n470\n00:25:32,800 --> 00:25:37,105\nNow, the other side is going to try\nsend me the PDU's on this port anyway,\n\n471\n00:25:37,105 --> 00:25:42,330\ncuz the other side is hard set as\na trunk and as a spanning tree member.\n\n472\n00:25:42,330 --> 00:25:46,880\nEven if it wasn't a trunk, it would still\ntry and send BPDUs just over VLAN 1.\n\n473\n00:25:46,880 --> 00:25:49,220\nBut that's why port pass\nwasn't doing its job there.\n\n474\n00:25:49,220 --> 00:25:51,573\nSo let's give that a second try.\n\n475\n00:25:53,733 --> 00:25:55,180\nWe'll wait for that interface to come up.\n\n476\n00:25:56,395 --> 00:25:57,575\nThere we go.\n\n477\n00:25:57,575 --> 00:26:00,175\nI'm kinda glad it did it because\nwe can show you back here,\n\n478\n00:26:00,175 --> 00:26:01,135\nlet me just scroll back up.\n\n479\n00:26:02,255 --> 00:26:06,415\nThat the switch on the other\nend of that phase 0/1 not\n\n480\n00:26:06,415 --> 00:26:10,465\nonly was it participating in spanning\ntree, see how it became the root?\n\n481\n00:26:10,465 --> 00:26:13,905\nSo just immediately that other switch\nbecame the root and took over,\n\n482\n00:26:13,905 --> 00:26:16,110\nhad a lower priority than we did.\n\n483\n00:26:16,110 --> 00:26:20,090\nAnd here we go,\nactually we got an inconsistent port type\n\n484\n00:26:20,090 --> 00:26:22,820\nbecause the other side\nis set to be a trunk and\n\n485\n00:26:22,820 --> 00:26:27,450\nI've disabled trunking on this side and\nso it's not allowed to become a trunk.\n\n486\n00:26:29,070 --> 00:26:31,000\nSo it's going shut off for that,\n\n487\n00:26:31,000 --> 00:26:33,830\nwhich means the bp filter again still not\ngoing to get a chance to do it's job.\n\n488\n00:26:33,830 --> 00:26:38,031\n>> But if you actually see right above\nthat the line that says received a BPDU.\n\n489\n00:26:38,031 --> 00:26:39,344\n[CROSSTALK].\n>> Yeah, so\n\n490\n00:26:39,344 --> 00:26:43,470\nthe filter did pick it up on a non trunk.\n\n491\n00:26:43,470 --> 00:26:46,420\nSometimes it's hard to\nactually break the switches.\n\n492\n00:26:46,420 --> 00:26:48,070\nThis is one of those scenarios.\n\n493\n00:26:48,070 --> 00:26:50,470\nLet me see if I can find an other way.\n\n494\n00:26:50,470 --> 00:26:52,661\nI can leave negotiation on.\n\n495\n00:26:52,661 --> 00:26:58,448\nThat would,\nwouldn't be how I do it in real life.\n\n496\n00:27:03,578 --> 00:27:04,204\nAnd then.\n\n497\n00:27:10,082 --> 00:27:12,986\nLet's give that a shot.\n\n498\n00:27:12,986 --> 00:27:21,318\nLet's do show interface f\na zero slash one trunk.\n\n499\n00:27:30,238 --> 00:27:30,940\nOkay.\n\n500\n00:27:30,940 --> 00:27:35,770\nSo now it's not trunking, right, and\nthe port is up if I do a show IP\n\n501\n00:27:35,770 --> 00:27:40,910\ninterface brief Port one,\nsee how it's got a status of up, up?\n\n502\n00:27:40,910 --> 00:27:46,350\nSo it's not shut down, but\nthe BPDU filter is stopping it.\n\n503\n00:27:47,670 --> 00:27:52,670\nSo when I look, there we go it's actually\nflagged as blocking right now and\n\n504\n00:27:52,670 --> 00:27:54,150\nit's type is inconsistent.\n\n505\n00:27:54,150 --> 00:27:56,410\nSo, letting us know that\nit's not matching up,\n\n506\n00:27:56,410 --> 00:27:58,460\nthat it is unhappy with the other side.\n\n507\n00:27:58,460 --> 00:28:01,360\nSo, the BPDU filter is gonna\nstop it from sending any BPDUs,\n\n508\n00:28:01,360 --> 00:28:05,620\nit's not gonna be able to negotiate\nthat was a switch, and that's it.\n\n509\n00:28:05,620 --> 00:28:07,080\nThat's kind of the end of the line.\n\n510\n00:28:07,080 --> 00:28:11,028\nSo, good way to stop that, now, it will\nactually allow data to pass over the line.\n\n511\n00:28:11,028 --> 00:28:13,540\nThe line was up.\n\n512\n00:28:13,540 --> 00:28:17,854\nThis VLAN is blocking, but other VLANs\nmight be up and we've only got the one.\n\n513\n00:28:17,854 --> 00:28:21,940\nSo that's something the BPU filter does.\n\n514\n00:28:21,940 --> 00:28:25,050\nBPU filter in my opinion is kind\nof passive aggressive, right?\n\n515\n00:28:25,050 --> 00:28:27,990\nIt stops the attacker from\nbeing able to send the BPDU but\n\n516\n00:28:27,990 --> 00:28:30,050\nit still allows them to communicate.\n\n517\n00:28:30,050 --> 00:28:33,750\nAnd so as a result,\nI don't typically use it, I like to go for\n\n518\n00:28:33,750 --> 00:28:36,250\nthe more aggressive BPDU guard.\n\n519\n00:28:36,250 --> 00:28:39,245\nIf we see BPDU on the port, shut it down.\n\n520\n00:28:39,245 --> 00:28:42,505\nStop it and that's the end of it, okay?\n\n521\n00:28:42,505 --> 00:28:43,885\nSo if we wanna see an example of that,\n\n522\n00:28:43,885 --> 00:28:47,620\nwell actually we're kinda\nrunning low on time, aren't we?\n\n523\n00:28:47,620 --> 00:28:50,215\nBPDU guard is pretty easy to turn on, but\n\n524\n00:28:50,215 --> 00:28:53,430\nit does have a few extra little\nfeatures I wanna talk about.\n\n525\n00:28:53,430 --> 00:28:54,740\nSo, let's do this.\n\n526\n00:28:54,740 --> 00:28:56,230\nLet's stop here and take a break.\n\n527\n00:28:56,230 --> 00:29:00,405\nWhen we get back, we'll turn on\nBPDU Guard and we'll take a look at that.\n\n528\n00:29:00,405 --> 00:29:01,891\n>> Sounds great.\n>> Ladies and gentlemen, stay tuned.\n\n529\n00:29:01,891 --> 00:29:07,453\nWhen we get back,\nmore BPDU madness after this.\n\n530\n00:29:07,453 --> 00:29:15,320\n[SOUND] [SOUND] All right,\nwelcome back, everybody.\n\n531\n00:29:15,320 --> 00:29:20,590\nSo what I wanted to do is we're\ngonna show you BPDU Guard,\n\n532\n00:29:20,590 --> 00:29:23,550\nbut I want to go back and And\nrevisit BPDU filter a little bit,\n\n533\n00:29:23,550 --> 00:29:28,460\nbecause while it did functionally work,\nthere were actually two different things\n\n534\n00:29:28,460 --> 00:29:32,170\nfalling into the equation there,\nthe trunking aspect and the BPU filter.\n\n535\n00:29:32,170 --> 00:29:35,850\nSo I want to re-demonstrate this time\nwith just a straight up access port so\n\n536\n00:29:35,850 --> 00:29:38,790\nI make sure that everybody kind of\nunderstands exactly what happened there.\n\n537\n00:29:38,790 --> 00:29:42,800\nI'm going to show you a port here\nthat is nowt just an access port.\n\n538\n00:29:42,800 --> 00:29:47,752\nI'm using a different one, FA0-2,\nwhich I've got switch port mode access,\n\n539\n00:29:47,752 --> 00:29:49,989\nswitch port node negotiate, okay?\n\n540\n00:29:49,989 --> 00:29:54,322\nI've also got port fast turned on on the\nport itself, so that I know that this port\n\n541\n00:29:54,322 --> 00:29:58,532\nis going to just immediately come up\nwithout having to go through listening and\n\n542\n00:29:58,532 --> 00:30:00,430\nlearning and all that other mess.\n\n543\n00:30:00,430 --> 00:30:03,550\nAll right, so\nit is set the way that I want it to.\n\n544\n00:30:03,550 --> 00:30:08,410\nOkay, now the attacking switch\nthat's plugged into this port is\n\n545\n00:30:08,410 --> 00:30:13,180\nsetup not only running spanning tree but\nalso setup with a really low priority so\n\n546\n00:30:13,180 --> 00:30:16,150\nit should become the root\nif it takes over.\n\n547\n00:30:16,150 --> 00:30:21,190\nIf I do a show spanning-tree right now,\n\n548\n00:30:21,190 --> 00:30:24,900\nokay, I can see that\nthis bridge is the root.\n\n549\n00:30:24,900 --> 00:30:27,270\nI am the root on this network.\n\n550\n00:30:27,270 --> 00:30:29,800\nYou can see I lowered my\npriority to do that, right?\n\n551\n00:30:29,800 --> 00:30:31,800\nSo I bumped it down, all right?\n\n552\n00:30:31,800 --> 00:30:34,250\nBut if I do a no shut down on this Port.\n\n553\n00:30:34,250 --> 00:30:36,440\nWhoops, if I get into the port.\n\n554\n00:30:36,440 --> 00:30:40,270\nDang gone it, if I can type and\nget into the port, and do a No Shutdown.\n\n555\n00:30:40,270 --> 00:30:41,180\nThere we go.\n\n556\n00:30:41,180 --> 00:30:42,950\nThe port's gonna come up, and\n\n557\n00:30:42,950 --> 00:30:45,650\nI'm gonna start communicating with\nthe switch that's on the other side.\n\n558\n00:30:45,650 --> 00:30:48,890\nNow the switch on the other side,\nI turned off the trunking piece, so\n\n559\n00:30:48,890 --> 00:30:52,530\nthat we could see that it's just\nBPDU filter doing its work.\n\n560\n00:30:52,530 --> 00:30:57,750\nAnd when I do that,\nif I do a show spanning-tree now,\n\n561\n00:30:57,750 --> 00:31:01,290\nI can see that I am no longer the root.\n\n562\n00:31:01,290 --> 00:31:04,660\nSomebody else is, and\nport FA0/2 is my root port,\n\n563\n00:31:04,660 --> 00:31:09,950\nwhich means the switch on the other side\nof that port just became the root, okay.\n\n564\n00:31:09,950 --> 00:31:12,520\n>> Yep.\n>> And that's not what I wanted,\n\n565\n00:31:12,520 --> 00:31:16,210\nthis is an attacker who just\nbecame the root, all right.\n\n566\n00:31:16,210 --> 00:31:21,159\nNow if I shut that port down again and\nthis time I issue\n\n567\n00:31:21,159 --> 00:31:26,130\nthese spanning-tree bpdu\nfilter enable command.\n\n568\n00:31:26,130 --> 00:31:29,540\nThat's gonna turn on bpdu\nfilter just on this one port.\n\n569\n00:31:29,540 --> 00:31:31,400\nI did it globally before the break.\n\n570\n00:31:31,400 --> 00:31:35,010\nHere I'm doing it right on\nthis one interface, okay?\n\n571\n00:31:35,010 --> 00:31:39,920\nAnd if I do a no shutdown,\nthat's port's gonna come back up.\n\n572\n00:31:39,920 --> 00:31:44,770\nThe attacker is going to send the PDUs\ntrying to become the root, but\n\n573\n00:31:44,770 --> 00:31:46,580\nI'm just gonna delete them, right?\n\n574\n00:31:46,580 --> 00:31:47,830\nI'm not going to allow them through.\n\n575\n00:31:47,830 --> 00:31:51,590\nSo the port should come up, but\nI should stay the root, all right?\n\n576\n00:31:51,590 --> 00:31:53,340\nAnd I'm using my technical term should.\n\n577\n00:31:53,340 --> 00:31:55,349\n>> Should.\n>> In the event that it doesn't happen I\n\n578\n00:31:55,349 --> 00:31:56,750\ncan say, well I did say should.\n\n579\n00:31:56,750 --> 00:32:00,210\nBut let's take a look.\n\n580\n00:32:00,210 --> 00:32:04,588\nSure enough,\nI see port FA0/2 is forwarding, but\n\n581\n00:32:04,588 --> 00:32:07,910\nit's not the root, I am still the root.\n\n582\n00:32:09,030 --> 00:32:12,100\nSo I came up, I am the root, I'm happy.\n\n583\n00:32:12,100 --> 00:32:14,960\nI didn't let the attacker become the root.\n\n584\n00:32:14,960 --> 00:32:18,600\nThat's what BPDU filter does,\nthat port is still up.\n\n585\n00:32:18,600 --> 00:32:22,628\nI can ping the attacker's switch,\nat least I think I can.\n\n586\n00:32:24,613 --> 00:32:26,220\nThere we go,\nI had to do the Art Broadcast.\n\n587\n00:32:26,220 --> 00:32:29,670\nYep.\nI can ping the attacking switch, but\n\n588\n00:32:29,670 --> 00:32:32,110\nit's just not allowed to become the root.\n\n589\n00:32:32,110 --> 00:32:36,254\nBPDU, very non-invasive,\npassive/aggressive way, that kind of stop,\n\n590\n00:32:36,254 --> 00:32:38,580\nsomebody from taking over your route.\n\n591\n00:32:38,580 --> 00:32:43,790\n>> Yeah, and the way that we had the set\nup right, is on that other switch.\n\n592\n00:32:43,790 --> 00:32:48,080\nWhen Don talks about an aggressive\npriority, this is as low as we go.\n\n593\n00:32:48,080 --> 00:32:52,195\nAnd so, even though the lowest priority,\nwe essentially can go.\n\n594\n00:32:52,195 --> 00:32:56,805\nThis switch with the BPDU filter,\nfiltered that out, and\n\n595\n00:32:56,805 --> 00:33:00,105\nstill this one became the root\nwith a higher priority.\n\n596\n00:33:00,105 --> 00:33:01,565\nAnd so it really does work.\n\n597\n00:33:01,565 --> 00:33:02,435\n>> Yep.\n\n598\n00:33:02,435 --> 00:33:04,525\nNow, let's say we wanted to be aggressive.\n\n599\n00:33:04,525 --> 00:33:08,440\nIf we said, hey,\nif somebody tries to become part of our\n\n600\n00:33:08,440 --> 00:33:11,725\nspanning-tree environment, they send\na BPDU on an access port, shut them off.\n\n601\n00:33:11,725 --> 00:33:12,680\n>> Yeah.\n>> Right?\n\n602\n00:33:12,680 --> 00:33:13,850\nNow I wanna get a little hard core.\n\n603\n00:33:14,860 --> 00:33:16,230\nWell we can do that.\n\n604\n00:33:16,230 --> 00:33:17,470\nLet me show you guys, how we do it.\n\n605\n00:33:17,470 --> 00:33:22,240\nSo on the interface I'm going to turn off,\nso I'm gonna say,\n\n606\n00:33:22,240 --> 00:33:24,850\nno spanning-tree BPU filter enabled.\n\n607\n00:33:24,850 --> 00:33:28,496\nSo I'm gonna turn that off, and instead,\n\n608\n00:33:28,496 --> 00:33:33,279\nI'm gonna say,\nspanning-tree BP2U guard enabled.\n\n609\n00:33:33,279 --> 00:33:37,570\nBP2U guard works much\nlike BP2U filter does.\n\n610\n00:33:37,570 --> 00:33:40,220\nIt looks for BPDUs.\n\n611\n00:33:40,220 --> 00:33:43,320\nThe instant it sees one,\nit shuts the port off.\n\n612\n00:33:43,320 --> 00:33:47,690\nYou see it happen pretty fast,\nbecause you send BPDUs every ten seconds.\n\n613\n00:33:47,690 --> 00:33:52,960\nRight there, received BPDU on port\nFA0/2 with BPDU guard enabled,\n\n614\n00:33:52,960 --> 00:33:54,380\ndisabling the port.\n\n615\n00:33:54,380 --> 00:33:55,462\n>> That's pretty harsh.\n\n616\n00:33:55,462 --> 00:33:58,610\n>> This isn't just stopping the BPDUs,\nit shut the port off.\n\n617\n00:33:58,610 --> 00:34:06,350\nIf I do a show IP interface brief,\nI can see that port two is down, down.\n\n618\n00:34:06,350 --> 00:34:08,190\nNot administratively down, it's down,\n\n619\n00:34:08,190 --> 00:34:12,620\ndown, that means the port is in what's\ncalled an Error Disabled State.\n\n620\n00:34:12,620 --> 00:34:19,420\nIf I do a show interface,\nFA0/2 right here, in the first line,\n\n621\n00:34:19,420 --> 00:34:22,055\nit's down, protocol is down-\n>> Per disable.\n\n622\n00:34:22,055 --> 00:34:26,370\n>> Yep, which is just short for\nError Disabled, that means that something\n\n623\n00:34:26,370 --> 00:34:29,070\nhappened, that made the switch\nhave to shut that port off.\n\n624\n00:34:29,070 --> 00:34:30,220\nOkay.\n\n625\n00:34:30,220 --> 00:34:31,240\nSo that's not a good thing.\n\n626\n00:34:31,240 --> 00:34:34,990\nNope, and it means there was an attacker\nthere, and the port shut off.\n\n627\n00:34:34,990 --> 00:34:37,380\nNow, how long is the port shut off for?\n\n628\n00:34:38,410 --> 00:34:43,230\nForever, until either you reboot\nthe switch, or you go in, and\n\n629\n00:34:43,230 --> 00:34:45,370\ndo a shutdown, no shutdown on the port.\n\n630\n00:34:45,370 --> 00:34:48,940\nBut, even if they unplug their\nswitch from the other side,\n\n631\n00:34:48,940 --> 00:34:50,040\nit's gonna stay air disabled.\n\n632\n00:34:50,040 --> 00:34:52,020\nYou know that it's disabled.\n\n633\n00:34:52,020 --> 00:34:56,220\nAnd, if you ever reset it, and they try\nagain, it's just gonna shut it off again.\n\n634\n00:34:56,220 --> 00:34:58,730\nNow, that means that as an administrator,\n\n635\n00:34:58,730 --> 00:35:02,040\nyou're going to have to get involved in\nfixing this problem at some point, and\n\n636\n00:35:02,040 --> 00:35:05,040\nthat's probably a good thing,\nbecause it ensures that you are aware.\n\n637\n00:35:06,370 --> 00:35:09,350\nBut, if you don't,\nif you just want to say, you know what,\n\n638\n00:35:09,350 --> 00:35:14,380\nif somebody tries this junk, shut\nthe port off for ten minutes, okay, and\n\n639\n00:35:14,380 --> 00:35:18,380\nafter ten minutes, bring it back on, and\nif you see BPUs, just shut it off again,\n\n640\n00:35:18,380 --> 00:35:20,770\nbut otherwise let it come back up,\nthat way it can fix itself.\n\n641\n00:35:20,770 --> 00:35:25,300\nIt will stop attackers from being dummies,\nand then, it will allow normal people to\n\n642\n00:35:25,300 --> 00:35:29,140\nfunction without you having to get\ninvolved every time a port is tripped.\n\n643\n00:35:29,140 --> 00:35:35,780\nThe way we do that, is by modifying how\nthe switch handles error disabled ports.\n\n644\n00:35:36,940 --> 00:35:40,380\nBy default,\nwhen a port goes error disabled,\n\n645\n00:35:40,380 --> 00:35:45,250\nIt stays disabled forever, until you\ndeal with it, or reboot the switch.\n\n646\n00:35:45,250 --> 00:35:49,490\nBut there's a couple of commands we\ncan issue to adjust how that works.\n\n647\n00:35:49,490 --> 00:35:54,220\nAt the global prompt of the switch,\nyou can say error disable,\n\n648\n00:35:55,580 --> 00:36:00,280\nand then recovery interval,\n\n649\n00:36:01,310 --> 00:36:07,890\nand you can specify how long it should\nhold the port down, and give it a retry.\n\n650\n00:36:07,890 --> 00:36:09,830\nOkay, bring it back up,\nto give it a retry.\n\n651\n00:36:09,830 --> 00:36:14,410\nAnd the time is in seconds, and so I said\nten minutes, ten minutes would be 600,\n\n652\n00:36:14,410 --> 00:36:15,955\nis it 600 seconds?\n\n653\n00:36:15,955 --> 00:36:17,190\n>> Mm-hm.\n>> Yeah, okay.\n\n654\n00:36:17,190 --> 00:36:19,470\nSo I'll go ahead, and say,\nerror disable recovery interval 600.\n\n655\n00:36:19,470 --> 00:36:23,876\nSo now every ten minutes,\nit'll retry, but that's not enough,\n\n656\n00:36:23,876 --> 00:36:29,780\nthere is more than one thing that can\ncause a port to go error disabled,\n\n657\n00:36:29,780 --> 00:36:32,430\nand so this one command alone,\nis not enough.\n\n658\n00:36:32,430 --> 00:36:40,495\nI also need to say error\ndisable recovery cause,\n\n659\n00:36:40,495 --> 00:36:45,565\nand then, specify what causes I want\nthis to occur on, cuz there's a bunch.\n\n660\n00:36:45,565 --> 00:36:46,685\n>> Oh wow.\n>> I mean look at all these.\n\n661\n00:36:46,685 --> 00:36:48,525\nBPU guard is just one.\n\n662\n00:36:49,920 --> 00:36:54,300\nYou'll also see other thing\nlike in line power, link flaps,\n\n663\n00:36:54,300 --> 00:36:59,490\nloop bags, all sorts of other things\nthat could trigger an error disable,\n\n664\n00:36:59,490 --> 00:37:03,880\nand you may not want some of them\nto come back after a certain time.\n\n665\n00:37:03,880 --> 00:37:10,880\nSo I could say error disabled\nrecovery cause BPUguard, like that.\n\n666\n00:37:10,880 --> 00:37:16,150\nAnd now, it's just when BPUguard\nis trippedwe'll retry it for\n\n667\n00:37:16,150 --> 00:37:22,470\nten minutesor, we could sayall\nerror disabled recovery cause all.\n\n668\n00:37:22,470 --> 00:37:23,680\nAnd if you do that.\n\n669\n00:37:23,680 --> 00:37:28,440\nNo matter what it is that causes\nthe error disable to kick in,\n\n670\n00:37:28,440 --> 00:37:32,030\nit'll retry after our set\ninterval which was ten minutes.\n\n671\n00:37:32,030 --> 00:37:36,590\nAll right, so now every ten minutes, it's\ngonna try, and bring that port back up.\n\n672\n00:37:36,590 --> 00:37:40,120\nNow, as it stands that other switch,\nit's still there.\n\n673\n00:37:40,120 --> 00:37:41,600\nSo in ten minutes, the port will come up,\n\n674\n00:37:41,600 --> 00:37:45,970\nand within ten seconds, it will see a BPU,\nand it will shut it back down again.\n\n675\n00:37:45,970 --> 00:37:48,690\nIt will just continue on like that,\nuntil somebody unplugs that switch.\n\n676\n00:37:48,690 --> 00:37:54,370\nKind of a neat thing, this is aggressive.\n\n677\n00:37:54,370 --> 00:37:58,570\nThey plug into something that sends a BPU,\neven one BPU, and we shut their port down.\n\n678\n00:37:58,570 --> 00:38:00,260\nJust like that,\nthey lose all communications.\n\n679\n00:38:01,480 --> 00:38:04,670\nSo I prefer this to BPDU filter.\n\n680\n00:38:04,670 --> 00:38:06,420\nI don't wanna just delete the BPUs.\n\n681\n00:38:06,420 --> 00:38:08,160\nSomebody's doing something,\nthey shouldn't.\n\n682\n00:38:08,160 --> 00:38:08,795\nI wanna stop it.\n\n683\n00:38:08,795 --> 00:38:12,879\n>> [LAUGH]\n>> So now for most people,\n\n684\n00:38:12,879 --> 00:38:16,181\nBPDU filter, and BPDU guard are enough.\n\n685\n00:38:16,181 --> 00:38:21,850\nBut remember, those voice over IP\nscenarios, and things like that,\n\n686\n00:38:21,850 --> 00:38:28,770\nthere might be a time where you want,\nor you need people to bring in switches.\n\n687\n00:38:28,770 --> 00:38:31,873\nYou just don't want them to become root,\nthat's all.\n\n688\n00:38:31,873 --> 00:38:35,448\nWell, these commands are a little\naggressive for that, and so\n\n689\n00:38:35,448 --> 00:38:37,005\nthat's a slight problem.\n\n690\n00:38:37,005 --> 00:38:39,710\nSo let me do this,\nI'm gonna shut that port down.\n\n691\n00:38:40,850 --> 00:38:44,788\nI keep getting out of the port,\nthere we go, and\n\n692\n00:38:44,788 --> 00:38:51,890\nI'm going to get into my FA0/1 port, which\nis the one I was using before the break.\n\n693\n00:38:53,670 --> 00:38:55,980\nAll right, and\nI've got it set to be a trunk now.\n\n694\n00:38:57,220 --> 00:39:01,610\nAnd on the other end of this, is another\nswitch, which is also set to be a trunk.\n\n695\n00:39:01,610 --> 00:39:07,120\nAnd if I do a do show spanning -tree,\n\n696\n00:39:07,120 --> 00:39:11,290\nI can see right now in the root, and\n\n697\n00:39:11,290 --> 00:39:14,810\nif I do a no shutdown here,\nport number one is gonna come up.\n\n698\n00:39:14,810 --> 00:39:17,840\nI'm gonna see the switch\non the other side.\n\n699\n00:39:17,840 --> 00:39:21,405\nThe switch on the other side is\na lower priority, it's gonna try, and\n\n700\n00:39:21,405 --> 00:39:24,558\nbecome the root, or the root bridge,\nand it should succeed.\n\n701\n00:39:27,298 --> 00:39:29,450\nI guess we've gotta wait\nour thirty seconds.\n\n702\n00:39:29,450 --> 00:39:31,910\nWell, actually the election's\nalready occurred.\n\n703\n00:39:31,910 --> 00:39:34,040\nSo, I can see here,\nI'm no longer the root.\n\n704\n00:39:35,080 --> 00:39:38,790\nAnd this port, while it's in listening,\nit is flagged as a root.\n\n705\n00:39:38,790 --> 00:39:41,000\nThe switch on the other\nside became the root.\n\n706\n00:39:42,240 --> 00:39:46,300\nNow, maybe I want to allow\nthat switch to be there.\n\n707\n00:39:46,300 --> 00:39:48,245\nI want people to be able\nto bring switches in,\n\n708\n00:39:48,245 --> 00:39:52,039\nI just don't want them to become the root,\nbecause that's what facilitates the attack\n\n709\n00:39:52,039 --> 00:39:54,000\nI demonstrated at\nthe beginning of the show.\n\n710\n00:39:54,000 --> 00:39:59,960\nSo the solution there is to use\nanother product called Root Guard.\n\n711\n00:39:59,960 --> 00:40:02,676\nSo we had BPDU filter and BPDU guard.\n\n712\n00:40:02,676 --> 00:40:05,160\nThat was for restricting the whole switch.\n\n713\n00:40:05,160 --> 00:40:07,850\nBut Root Guard says yeah,\nlet the switch come up.\n\n714\n00:40:07,850 --> 00:40:09,770\nLet it participate in\nSpanning Tree if it wants.\n\n715\n00:40:09,770 --> 00:40:14,500\nIt can do loop detection,\njust don't let it become root, all right?\n\n716\n00:40:14,500 --> 00:40:17,440\nAnd we enable it basically\nthe same as the other ones.\n\n717\n00:40:17,440 --> 00:40:23,613\nWe just say, on the interface,\nspanning-tree,\n\n718\n00:40:23,613 --> 00:40:26,710\nshoot, portfast.\n\n719\n00:40:26,710 --> 00:40:29,515\nOr wait a minute, spanning-tree, uh-oh.\n\n720\n00:40:29,515 --> 00:40:32,130\nDid I pick a switch that\ndoesn't support Root Guard?\n\n721\n00:40:32,130 --> 00:40:34,790\nOh no, it's backwards, dadgummit, there.\n\n722\n00:40:34,790 --> 00:40:38,699\nSo, the other ones, it's always\nwritten BPDU guard, BPDU filter, but\n\n723\n00:40:38,699 --> 00:40:40,160\nthis one it's guard root.\n\n724\n00:40:40,160 --> 00:40:45,660\nSo we gotta kinda flip the command around,\nspanning-tree guard root, all right?\n\n725\n00:40:45,660 --> 00:40:47,250\nThat says, go ahead and\n\n726\n00:40:47,250 --> 00:40:50,040\nlet this other switch come up,\njust don't let it become root.\n\n727\n00:40:52,335 --> 00:40:53,269\nSo I'll go ahead and do a no shutdown.\n\n728\n00:40:55,627 --> 00:40:56,985\nAnd we'll see what happens there.\n\n729\n00:41:02,672 --> 00:41:04,155\nAll right, there we go.\n\n730\n00:41:04,155 --> 00:41:07,482\nSo the port came up and\nlook what's happening, right?\n\n731\n00:41:07,482 --> 00:41:10,012\nSpanning Tree is picking up some alerts.\n\n732\n00:41:10,012 --> 00:41:14,262\nRoot Guard block,\nRoot Guard is blocking these ports, okay?\n\n733\n00:41:14,262 --> 00:41:16,722\nThe switch on the other\nside tried to come up.\n\n734\n00:41:16,722 --> 00:41:21,490\nAnd when it did, it tried to become root,\nand we stopped it.\n\n735\n00:41:24,310 --> 00:41:27,530\nAnd if I look,\nI can see that I am blocking that port and\n\n736\n00:41:27,530 --> 00:41:30,320\nthe reason root inconsistent, okay.\n\n737\n00:41:30,320 --> 00:41:34,270\nThe other switch tried to become root and\nthen that triggered this and\n\n738\n00:41:34,270 --> 00:41:35,550\ndropped the port, right.\n\n739\n00:41:35,550 --> 00:41:37,370\nSo it's now disconnected.\n\n740\n00:41:37,370 --> 00:41:40,300\nNow if I do a, let me turn that off.\n\n741\n00:41:40,300 --> 00:41:41,990\nI'm gonna turn off root guard.\n\n742\n00:41:45,010 --> 00:41:46,160\nAnd there we go.\n\n743\n00:41:46,160 --> 00:41:47,193\nNow it's unblocking it.\n\n744\n00:41:49,863 --> 00:41:51,890\nI'm gonna let that port come up.\n\n745\n00:41:51,890 --> 00:41:56,210\nAs soon as the port comes up, I can get\ninto that switch and adjust its priority.\n\n746\n00:41:56,210 --> 00:42:02,050\nI gotta get through listening,\n\n747\n00:42:02,050 --> 00:42:04,895\nlearning, 30 seconds later.\n\n748\n00:42:04,895 --> 00:42:07,730\n>> [LAUGH]\n>> I get so impatient with these things.\n\n749\n00:42:07,730 --> 00:42:10,760\nI should really, before the show,\nI should adjust their interval.\n\n750\n00:42:13,020 --> 00:42:15,160\nI just can't wait 15 seconds.\n\n751\n00:42:15,160 --> 00:42:17,109\nThere we go, all right,\nnow it's forwarding, so.\n\n752\n00:42:19,385 --> 00:42:21,030\nLet me connect to that other switch.\n\n753\n00:42:23,590 --> 00:42:24,090\n>> SSH.\n\n754\n00:42:25,830 --> 00:42:27,320\n>> Good old Telnet's still enabled.\n\n755\n00:42:27,320 --> 00:42:28,793\n>> Oh, is it, oh?\n\n756\n00:42:28,793 --> 00:42:34,582\n>> All right, so\nI'm gonna say spanning-tree\n\n757\n00:42:34,582 --> 00:42:39,995\nvlan 1-4094 root secondary.\n\n758\n00:42:39,995 --> 00:42:40,727\nWell, no, let's not do that.\n\n759\n00:42:40,727 --> 00:42:44,244\nLet's just do priority 32768.\n\n760\n00:42:44,244 --> 00:42:46,415\nI'm gonna put it back to the default,\nokay.\n\n761\n00:42:46,415 --> 00:42:50,627\nSo, now it's got a normal priority and\nit shouldn't override my other switch.\n\n762\n00:42:54,643 --> 00:42:57,905\nLet me just double check and\nmake sure there's nothing crazy in there.\n\n763\n00:42:57,905 --> 00:43:00,719\nThere we go.\nAll right, so that's the other switch.\n\n764\n00:43:01,920 --> 00:43:06,204\nAnd now,\nif I get back into my configuration.\n\n765\n00:43:06,204 --> 00:43:12,705\nAnd I get back into that port,\nI can say spanning-tree guard root.\n\n766\n00:43:16,524 --> 00:43:17,170\nAnd there we go.\n\n767\n00:43:17,170 --> 00:43:20,070\nAnd I'm gonna give it a full shutdown and\n\n768\n00:43:20,070 --> 00:43:22,069\nkinda no shutdown to give\nit a nice good reset.\n\n769\n00:43:23,370 --> 00:43:25,360\nAll right, so the port's down.\n\n770\n00:43:25,360 --> 00:43:26,450\nI'll do a no shutdown.\n\n771\n00:43:26,450 --> 00:43:29,290\nNow, what should happen is\nthe other side should come up.\n\n772\n00:43:29,290 --> 00:43:31,520\nIt should send us BPDUs.\n\n773\n00:43:31,520 --> 00:43:35,100\nBut since our priority is better,\nwe're gonna be root.\n\n774\n00:43:35,100 --> 00:43:38,550\nThe other side's not root, and we'll\nallow it to happen and be happy, right?\n\n775\n00:43:38,550 --> 00:43:41,040\nBecause as long as they\ndon't try to become root,\n\n776\n00:43:41,040 --> 00:43:43,530\nthey won't trip that Root Guard,\nall right?\n\n777\n00:43:43,530 --> 00:43:45,935\nAnd that should have already happened.\n\n778\n00:43:45,935 --> 00:43:50,900\nYep, I can see it's a designated\nport here and I'm listening.\n\n779\n00:43:50,900 --> 00:43:54,458\nI can see that I am the root and\nthe other guy isn't.\n\n780\n00:43:58,770 --> 00:44:03,070\nAll right, so that should be, there it is.\n\n781\n00:44:03,070 --> 00:44:06,090\nSo it's fully transitioned now,\nit's up and it's happy.\n\n782\n00:44:06,090 --> 00:44:09,680\nSo let's revisit those and\nI jotted some notes down here.\n\n783\n00:44:09,680 --> 00:44:14,487\nLet me fix this though cuz I\ndo have this command wrong.\n\n784\n00:44:14,487 --> 00:44:17,414\nThere, all right, so.\n\n785\n00:44:24,692 --> 00:44:27,860\nSo the three methods that we talked about,\n\n786\n00:44:27,860 --> 00:44:32,460\nBPDU Filter, BPDU Guard and\nRoot Guard, all right.\n\n787\n00:44:32,460 --> 00:44:35,170\nAnd here's the basic commands that we did.\n\n788\n00:44:35,170 --> 00:44:40,120\nSo for BPDU guard, right, where we shut\nthe port down if somebody sends a BPDU.\n\n789\n00:44:40,120 --> 00:44:44,680\nWe just say,\nspanning-tree portfast bpduguard.\n\n790\n00:44:44,680 --> 00:44:48,488\nAnd isn't it default?\n\n791\n00:44:48,488 --> 00:44:50,063\nHang on,\nlet me make sure I got that command right.\n\n792\n00:44:50,063 --> 00:44:55,212\nSo it's spanning-tree\n\n793\n00:44:55,212 --> 00:45:01,590\nportfast bpduguard default.\n\n794\n00:45:01,590 --> 00:45:04,380\nYeah I left that little keyword off,\nlet me add that, all right.\n\n795\n00:45:04,380 --> 00:45:08,670\nAnd then if you want you can either\ndo an errdisable recovery cause all.\n\n796\n00:45:08,670 --> 00:45:11,830\nOr bpduguard and\nthen specify an interval, right.\n\n797\n00:45:11,830 --> 00:45:14,070\nSo that was how we turned on BPDU Guard.\n\n798\n00:45:14,070 --> 00:45:17,850\nAnd we could have done it on\nthe individual interface.\n\n799\n00:45:23,851 --> 00:45:29,680\nWhich was spanning-tree bpduguard enable,\nright.\n\n800\n00:45:29,680 --> 00:45:31,320\nIf you want to do it on\nan individual interface.\n\n801\n00:45:32,700 --> 00:45:37,080\nBPDU filter was much the same way, except\nit just doesn't shut the port down right.\n\n802\n00:45:37,080 --> 00:45:41,970\nAnd we did it globally but\nif we want to do it on an individual port,\n\n803\n00:45:43,880 --> 00:45:47,850\nwe would just do this same basic thing,\nall right.\n\n804\n00:45:47,850 --> 00:45:49,490\nRoot Guard was the one that was different.\n\n805\n00:45:49,490 --> 00:45:53,230\nYou go into the interface and\nyou say spanning-tree guard root.\n\n806\n00:45:53,230 --> 00:45:56,560\nAnd I don't think there is a global\ncounterpart to that, is there Ronnie?\n\n807\n00:45:56,560 --> 00:45:57,060\n>> I don't remember.\n\n808\n00:45:59,340 --> 00:46:00,140\n>> Let's just double check.\n\n809\n00:46:00,140 --> 00:46:01,450\nI don't think there is.\n\n810\n00:46:01,450 --> 00:46:01,970\n>> Nope.\n\n811\n00:46:03,520 --> 00:46:06,570\n>> Unless it's under this,\nwhich it is not, nope.\n\n812\n00:46:06,570 --> 00:46:08,290\nOkay, yeah, so there's no global\ncounterpart for that one.\n\n813\n00:46:08,290 --> 00:46:09,170\nBut you don't really need it.\n\n814\n00:46:09,170 --> 00:46:13,216\nIt would be ports that you want to trunk,\nand you just don't want to allow roots.\n\n815\n00:46:13,216 --> 00:46:15,082\nSo these are normally gonna\nbe manually set anyway.\n\n816\n00:46:15,082 --> 00:46:17,900\nBut, so\nyou can designate that on the port.\n\n817\n00:46:17,900 --> 00:46:18,877\nSo those are the three\ndifferent modes there.\n\n818\n00:46:18,877 --> 00:46:20,661\nThe commands are not that bad,\n\n819\n00:46:20,661 --> 00:46:24,260\nit's just a matter of picking\nwhich one is appropriate.\n\n820\n00:46:24,260 --> 00:46:28,445\nSo, do you want to be passive aggressive\nand just filter out the BPDUs?\n\n821\n00:46:28,445 --> 00:46:32,190\nOr do you want to be really aggressive and\nshut that port down?\n\n822\n00:46:32,190 --> 00:46:35,688\nOr do you want to be in between and allow\nthe switch to participate in spanning\n\n823\n00:46:35,688 --> 00:46:38,320\ntree, just don't let it become the root,\nright?\n\n824\n00:46:38,320 --> 00:46:43,216\nThree options, all three of which could be\nused to stop this style attack right here,\n\n825\n00:46:43,216 --> 00:46:47,510\nwhere the attacker puts themselves in\nline of the traffic on your network.\n\n826\n00:46:49,507 --> 00:46:51,901\nAll right, so\ngoing back to our objectives,\n\n827\n00:46:51,901 --> 00:46:55,370\nwhich it feels like it's been\na long time since we've looked at.\n\n828\n00:46:55,370 --> 00:46:57,812\nThat was all just the very\nfirst entry here,\n\n829\n00:46:57,812 --> 00:47:00,190\nSpanning Tree Protocol attacks, right?\n\n830\n00:47:01,280 --> 00:47:07,240\nBut these are all part of right here,\nthe spanning tree issues, right?\n\n831\n00:47:07,240 --> 00:47:10,251\nSo that really covered this 5.4.\n\n832\n00:47:10,251 --> 00:47:13,440\nPotential issues with switch topologies,\nSpanning Tree operations, and\n\n833\n00:47:13,440 --> 00:47:15,092\nresolving issues with Spanning Tree.\n\n834\n00:47:15,092 --> 00:47:19,070\nWe saw the issues as well as the three\ndifferent tools available for\n\n835\n00:47:19,070 --> 00:47:20,073\nus to fix those.\n\n836\n00:47:20,073 --> 00:47:26,443\nAll right,\nthe next type of attack is ARP spoofing.\n\n837\n00:47:26,443 --> 00:47:29,802\nAnd really I like to kinda group\nit together with MAC spoofing.\n\n838\n00:47:29,802 --> 00:47:34,031\nCuz the solution, well even CAM table\noverflow is really the solution to all\n\n839\n00:47:34,031 --> 00:47:35,960\nthree of those is the same tool.\n\n840\n00:47:35,960 --> 00:47:37,370\n>> Right.\n\n841\n00:47:37,370 --> 00:47:40,170\n>> All right, well,\nlet's start with ARP spoofing, okay?\n\n842\n00:47:40,170 --> 00:47:43,700\nWe'll go back to my diagram.\n\n843\n00:47:43,700 --> 00:47:49,441\nAll right, if I have a host and\nthe host wants to talk to a,\n\n844\n00:47:49,441 --> 00:47:54,300\nto another machine that's out there,\nright?\n\n845\n00:47:54,300 --> 00:47:56,840\nSo this host.\n\n846\n00:47:56,840 --> 00:47:58,000\nWhat am I?\n\n847\n00:47:58,000 --> 00:48:01,370\nApparently my touch screen has\ndecided that it is gonna take a break.\n\n848\n00:48:01,370 --> 00:48:02,500\n>> Sure enough.\n\n849\n00:48:02,500 --> 00:48:03,960\nFun.\n\n850\n00:48:03,960 --> 00:48:05,850\nOkay, well, no touch screen.\n\n851\n00:48:05,850 --> 00:48:08,320\nSo now I'm going to draw horrible circles.\n\n852\n00:48:08,320 --> 00:48:13,618\nThis host right here wants to\ntalk to this guy over here.\n\n853\n00:48:13,618 --> 00:48:18,480\nIn any ethernet-based communication,\nwe're gonna use address resolution\n\n854\n00:48:18,480 --> 00:48:20,500\nprotocol to find the person\non the other side.\n\n855\n00:48:20,500 --> 00:48:21,870\nSo we start out by sending a broadcast.\n\n856\n00:48:21,870 --> 00:48:24,280\nAnd we say hey,\nI'm trying to get to this IP address.\n\n857\n00:48:24,280 --> 00:48:25,870\nI'm trying to get to 192.160.0.5.\n\n858\n00:48:25,870 --> 00:48:26,940\nWhat's the Mac address for it?\n\n859\n00:48:28,140 --> 00:48:29,780\nWhat's the layer two address?\n\n860\n00:48:29,780 --> 00:48:34,900\nAnd we broadcast it out,\nand the idea is that\n\n861\n00:48:34,900 --> 00:48:41,940\nthat server will receive the communication\nand reply back saying hey, that's me.\n\n862\n00:48:41,940 --> 00:48:44,370\nHere is my, you know what?\n\n863\n00:48:44,370 --> 00:48:45,290\nA MAC address, right?\n\n864\n00:48:45,290 --> 00:48:45,850\n>> Yeah.\n>> And\n\n865\n00:48:45,850 --> 00:48:49,730\nthen they're able to communicate between\neach other no problem, all right?\n\n866\n00:48:49,730 --> 00:48:55,570\nWell the problem with this attack or\nthis method is broadcast based.\n\n867\n00:48:56,610 --> 00:49:01,190\nSo when the host sends out its\noriginal broadcast to everybody,\n\n868\n00:49:01,190 --> 00:49:06,330\nit goes all across the network,\nincluding to where it's supposed to go.\n\n869\n00:49:07,450 --> 00:49:11,850\nBut that means the attacker\ngets a copy of it too.\n\n870\n00:49:11,850 --> 00:49:15,160\nAnd they can do what's\ncalled Arp poisoning.\n\n871\n00:49:15,160 --> 00:49:21,469\nAnd with Arp poisoning, they reply and say\nhey that's my IP, here's my MAC address.\n\n872\n00:49:22,820 --> 00:49:26,930\nEven though it's not their IP,\neven though it's that other box's, right.\n\n873\n00:49:26,930 --> 00:49:31,140\nIt's actually this guy's IP,\nthe attacker can respond.\n\n874\n00:49:31,140 --> 00:49:35,760\nBy responding with the wrong Mac address,\nany communication the host over here would\n\n875\n00:49:35,760 --> 00:49:40,830\nhave normally sent to this server is\nnow gonna get sent to the attacker.\n\n876\n00:49:41,900 --> 00:49:43,160\nThat's a problem.\n\n877\n00:49:43,160 --> 00:49:47,842\nThe attacker shouldn't be able\nto take over that Mac address.\n\n878\n00:49:47,842 --> 00:49:50,650\nThat's one.\n\n879\n00:49:50,650 --> 00:49:55,640\nThe other thing, as opposed to Arp\npoisoning, was Mac's spoofing.\n\n880\n00:49:55,640 --> 00:49:59,560\nWell Arp poisoning is like Mac's spoofing.\n\n881\n00:49:59,560 --> 00:50:01,690\nThe difference is with Mac spoofing,\n\n882\n00:50:01,690 --> 00:50:04,840\nthe attacker can preemptively\nsend out a message.\n\n883\n00:50:04,840 --> 00:50:08,550\nIt can send out a message saying,\nmy Mac address is this.\n\n884\n00:50:08,550 --> 00:50:12,600\nAnd the switch will add that\nto it's CAM table, right?\n\n885\n00:50:13,650 --> 00:50:15,837\nYou know,\nall switches maintain a Mac address table.\n\n886\n00:50:15,837 --> 00:50:18,730\nA list of what MAC addresses\nare on what ports.\n\n887\n00:50:18,730 --> 00:50:22,560\nAnd it's stored in the CAM table right,\nwhich Ronnie, what did we just say?\n\n888\n00:50:22,560 --> 00:50:24,820\n>> Calm and adjustable memory.\n\n889\n00:50:24,820 --> 00:50:26,901\n>> [LAUGH]\n>> It's a microchip that's on\n\n890\n00:50:26,901 --> 00:50:27,784\nthe motherboard.\n\n891\n00:50:27,784 --> 00:50:31,187\nIt's just another RAM chip,\nit stores all the Mac addresses there.\n\n892\n00:50:31,187 --> 00:50:35,156\nSo when this attacker says,\nhey my Mac address is X Y Z, but\n\n893\n00:50:35,156 --> 00:50:38,770\nthat's actually this server's Mac address.\n\n894\n00:50:38,770 --> 00:50:43,550\nWell, the switch is gonna add that to\nits Mac address table, or its CAM table.\n\n895\n00:50:43,550 --> 00:50:47,910\nSo when the host sends out that\nbroadcast or well not the broadcast, but\n\n896\n00:50:47,910 --> 00:50:50,450\nsends out unicast destined for the server.\n\n897\n00:50:50,450 --> 00:50:53,730\nThat unicast is going to\ntravel up to the switch and\n\n898\n00:50:53,730 --> 00:50:57,970\nthe switch is going to see it and\nforward it along to the attacker,\n\n899\n00:50:57,970 --> 00:51:01,080\non the attackers port and\nthe attacker can get a copy of that.\n\n900\n00:51:01,080 --> 00:51:05,660\nObviously that's a problem there too.\n\n901\n00:51:05,660 --> 00:51:07,110\nSo what was the third one?\n\n902\n00:51:07,110 --> 00:51:08,720\n>> CAM table overflow.\n\n903\n00:51:08,720 --> 00:51:10,820\n>> Oh, and then the CAM table overflow.\n\n904\n00:51:10,820 --> 00:51:15,585\nThe CAM table overflow, that one is\nthe take a hammer to it attack right?\n\n905\n00:51:15,585 --> 00:51:17,960\n>> [LAUGH]\n>> A switch,\n\n906\n00:51:17,960 --> 00:51:21,690\nit doesn't forward Unicast at\nevery port like a hub does.\n\n907\n00:51:21,690 --> 00:51:26,770\nA switch will say, all right if\na unicast is coming from this host and\n\n908\n00:51:26,770 --> 00:51:30,310\nis destined for\nthat server It's gonna come in one port.\n\n909\n00:51:30,310 --> 00:51:34,290\nIt's gonna get forwarded to the uplink,\nit's gonna get forwarded across\n\n910\n00:51:34,290 --> 00:51:39,920\nthe uplink, and from there,\nit's gonna get sent to the server port and\n\n911\n00:51:39,920 --> 00:51:43,650\nthen on down to the server itself, okay?\n\n912\n00:51:43,650 --> 00:51:45,760\nSo that's gonna happen.\n\n913\n00:51:45,760 --> 00:51:49,160\nAny other port not involved\nin the communication.\n\n914\n00:51:49,160 --> 00:51:50,130\nNot gonna get that data, right?\n\n915\n00:51:50,130 --> 00:51:52,130\n>> Yeah.\n>> Not gonna get that communication.\n\n916\n00:51:52,130 --> 00:51:54,720\nSo the attacker wouldn't even\nsee this communication happen.\n\n917\n00:51:56,300 --> 00:51:57,690\nBut.\n>> [LAUGH]\n\n918\n00:51:57,690 --> 00:51:58,670\n>> This entire\n\n919\n00:51:58,670 --> 00:52:00,750\nprocess is dependent on the MAC address.\n\n920\n00:52:00,750 --> 00:52:03,480\n>> Yeah.\n>> Knowing what MACs are on what ports.\n\n921\n00:52:03,480 --> 00:52:06,800\nWell, every switch has\na certain amount of memory.\n\n922\n00:52:06,800 --> 00:52:09,260\n>> Yeah.\n>> And that memory is where it's storing,\n\n923\n00:52:09,260 --> 00:52:10,165\nit was that CAM table.\n\n924\n00:52:10,165 --> 00:52:10,800\n>> Mm-hm.\n\n925\n00:52:10,800 --> 00:52:12,060\nWhat if it gets full?\n\n926\n00:52:12,060 --> 00:52:16,190\n>> Yeah.\n>> If it gets overrun with addresses,\n\n927\n00:52:16,190 --> 00:52:18,205\nthen the switch defaults to flooding.\n\n928\n00:52:18,205 --> 00:52:20,300\n>> Mm-hm.\n>> And it acts like a hub.\n\n929\n00:52:20,300 --> 00:52:23,520\nEven Unicast will get sent\nout every single port.\n\n930\n00:52:23,520 --> 00:52:27,440\nWhich means, now, the attacker would\nbe able to see this communication,\n\n931\n00:52:27,440 --> 00:52:29,265\nbecause it would be\nflooded out every port.\n\n932\n00:52:29,265 --> 00:52:29,900\n>> Mm-hm.\n\n933\n00:52:29,900 --> 00:52:31,506\n>> All right.\nIf you're ever curious,\n\n934\n00:52:31,506 --> 00:52:35,863\nyou can see how much memory a switch has,\nlet's see if I can remember this command.\n\n935\n00:52:45,429 --> 00:52:46,500\nThat's not what I want.\n\n936\n00:52:46,500 --> 00:52:50,680\nLet's see so\nthat the switches have a PDM and the PDM.\n\n937\n00:52:50,680 --> 00:52:56,320\nIt's the memory templates that\nyou can assign on the switch.\n\n938\n00:52:56,320 --> 00:52:57,870\nYou know I don't remember\nthe command off hand.\n\n939\n00:52:57,870 --> 00:53:01,070\nIt's not on the exam but\nit is something kinda fun to know.\n\n940\n00:53:01,070 --> 00:53:02,030\nLet's see Cisco switch.\n\n941\n00:53:02,030 --> 00:53:04,740\nLet's see if I can look it up real quick.\n\n942\n00:53:04,740 --> 00:53:08,150\nAnd PM installations,\nnot something you install.\n\n943\n00:53:08,150 --> 00:53:08,840\n>> Firewalls.\n\n944\n00:53:08,840 --> 00:53:14,017\n>> Yeah, that's not what I want.\n\n945\n00:53:17,434 --> 00:53:18,090\nOh, you know what?\n\n946\n00:53:18,090 --> 00:53:19,620\nThat's because it's not PM, it's SDM.\n\n947\n00:53:19,620 --> 00:53:28,870\nThat would explain why I am not seeing\nit there, there it is, there we go.\n\n948\n00:53:30,240 --> 00:53:33,530\nOkay so every switch has this SDM,\nand the SDM.\n\n949\n00:53:33,530 --> 00:53:41,250\nLet's just find it here, here we go.\n\n950\n00:53:41,250 --> 00:53:43,180\nSwitch database management.\n\n951\n00:53:43,180 --> 00:53:45,870\nIt's the database that's\nbasically the memory.\n\n952\n00:53:45,870 --> 00:53:48,290\nHow the switch manages its memory.\n\n953\n00:53:48,290 --> 00:53:54,110\nIf you do a show us dm prefer,\nit'll show your current switch template.\n\n954\n00:53:54,110 --> 00:53:56,500\nSo on this switch, I'm on a 3560,\n\n955\n00:53:56,500 --> 00:54:01,590\nyou'll see the number of\nUnicast Mac addresses Is 6000.\n\n956\n00:54:01,590 --> 00:54:08,900\nThat means my CAM table can currently\nhold 6000 Mac addresses and that's it.\n\n957\n00:54:08,900 --> 00:54:13,090\nIf we send anything more to it,\nit's going to get overwhelmed and\n\n958\n00:54:13,090 --> 00:54:16,760\nit's going to start to act like a hub.\n\n959\n00:54:16,760 --> 00:54:20,890\nWhat if you work somewhere you have more\nthan 6000 machines on a single, not even\n\n960\n00:54:20,890 --> 00:54:25,510\njust single on all your VLAN's cuz it\ncan be learned across all the switches.\n\n961\n00:54:25,510 --> 00:54:30,190\nWell you can modify this template,\nnotice how it's got like IPv4 and\n\n962\n00:54:30,190 --> 00:54:33,010\nIPv6 memory, or\nthis one doesn't have IPv6.\n\n963\n00:54:33,010 --> 00:54:37,460\nBut you've got all these other things that\nare taking up memory and you can adjust\n\n964\n00:54:37,460 --> 00:54:41,140\nthis to give more memory to one thing and\ntake memory away from another.\n\n965\n00:54:41,140 --> 00:54:46,220\nSo for example, if I'm not using\nlayer three routing on this switch I\n\n966\n00:54:46,220 --> 00:54:48,820\ndon't need 8000 Unicast\nroutes to be stored.\n\n967\n00:54:48,820 --> 00:54:52,300\nI could free that memory up for\nmy Mac address table.\n\n968\n00:54:52,300 --> 00:54:55,470\nAnd so we can kind of\nmanipulate that if we need to.\n\n969\n00:54:55,470 --> 00:54:59,730\nAnd we do that through a couple of means.\n\n970\n00:54:59,730 --> 00:55:02,650\nAgain, kinda beyond the scope\nof what you need for this exam.\n\n971\n00:55:02,650 --> 00:55:03,950\n>> Yeah.\n>> But just be aware that that is\n\n972\n00:55:03,950 --> 00:55:04,935\nsomething you can manipulate.\n\n973\n00:55:04,935 --> 00:55:05,460\n>> Mm-hm.\n\n974\n00:55:05,460 --> 00:55:07,500\n>> But right now, 6,000 MAC addresses.\n\n975\n00:55:07,500 --> 00:55:09,480\nThat's my target, right?\n\n976\n00:55:09,480 --> 00:55:16,070\nAn attack can fire up a MAC spoofer and\njust start throwing out one frame.\n\n977\n00:55:16,070 --> 00:55:19,550\nWith a Mac address and then a second\nframe with another one and a third frame.\n\n978\n00:55:19,550 --> 00:55:22,970\nThey could send out 6,000 frames,\nwhich would take about a minute.\n\n979\n00:55:22,970 --> 00:55:24,130\n>> Hm.\n>> 6,000 frames,\n\n980\n00:55:24,130 --> 00:55:28,870\neach one with a different Mac address,\nfilling up my CAM table, and\n\n981\n00:55:28,870 --> 00:55:31,960\nmaking my switch default\nto basically a hub.\n\n982\n00:55:31,960 --> 00:55:33,200\n>> A hub.\n\n983\n00:55:33,200 --> 00:55:35,090\n>> So that would be pretty bad.\n\n984\n00:55:35,090 --> 00:55:36,490\nIt's extremely easy to do.\n\n985\n00:55:36,490 --> 00:55:40,710\nIt would take you two minutes on\nGoogle to find a Mac address flooder.\n\n986\n00:55:40,710 --> 00:55:46,500\nOnce you've got one, CAM table\nattacks are now within your grasp.\n\n987\n00:55:46,500 --> 00:55:49,750\nThat is a very prominent\nattack that's out there.\n\n988\n00:55:49,750 --> 00:55:53,670\nAll three of those attack types,\nwhere did we go here?\n\n989\n00:55:53,670 --> 00:55:56,800\nARP spoofing, MAC spoofing,\nand CAM overflows.\n\n990\n00:55:56,800 --> 00:56:02,520\nAll of them center around somebody using\na MAC address that is not theirs, okay?\n\n991\n00:56:02,520 --> 00:56:05,170\nSo I've talked too long, and\nwe're at our break stop.\n\n992\n00:56:05,170 --> 00:56:05,730\nSo why don't we do this?\n\n993\n00:56:05,730 --> 00:56:08,756\nWhy don't we stop and take a break and\nwhen we get back we'll talk about\n\n994\n00:56:08,756 --> 00:56:11,495\nthe tools that are available for\nus to fix that, to stop those.\n\n995\n00:56:11,495 --> 00:56:19,830\n[SOUND].\n\n996\n00:56:19,830 --> 00:56:21,620\nAll right, welcome back everybody.\n\n997\n00:56:21,620 --> 00:56:24,680\nSo at the end of the last segment, we\nkinda painted a picture of some gloom and\n\n998\n00:56:24,680 --> 00:56:25,280\ndoom, right?\n\n999\n00:56:25,280 --> 00:56:29,060\nSo those are several different types\nof attacks that are available.\n\n1000\n00:56:29,060 --> 00:56:31,930\nNow, we wanna tackle the tools that\nare available to fix all those,\n\n1001\n00:56:31,930 --> 00:56:35,968\nand they all centered around people using\nMAC addresses that weren't theirs, right?\n\n1002\n00:56:35,968 --> 00:56:39,580\nSo there's actually three different\ntools available for us to try and\n\n1003\n00:56:39,580 --> 00:56:40,530\ndeal with that.\n\n1004\n00:56:40,530 --> 00:56:43,550\n>> The three different tools that\nwe have actually available to us,\n\n1005\n00:56:43,550 --> 00:56:46,810\none is what we call the idea\nof port security here, and\n\n1006\n00:56:46,810 --> 00:56:49,940\nwe'll actually talk about that a little\nbit in detail in a moment here.\n\n1007\n00:56:49,940 --> 00:56:54,670\nWe also have DHCP snooping and\ndynamic art inspection.\n\n1008\n00:56:54,670 --> 00:56:58,690\nI always get the DIA I don't\nknow why it's some sort of DAI.\n\n1009\n00:56:58,690 --> 00:57:02,410\nThose are the three that we\nactually do want to deal with here.\n\n1010\n00:57:02,410 --> 00:57:06,699\nAll of them pretty much limit\nthe idea of how many mac addresses\n\n1011\n00:57:06,699 --> 00:57:10,841\nthat we enter into the mac address\ntable in some way or form.\n\n1012\n00:57:10,841 --> 00:57:16,548\n>> I'm going to create a little note here,\nand what we'll keep track of each one.\n\n1013\n00:57:16,548 --> 00:57:18,768\nRonnie, why don't you\ndescribe port security and\n\n1014\n00:57:18,768 --> 00:57:20,170\nthen I'll add in the other two.\n\n1015\n00:57:20,170 --> 00:57:24,518\n>> For us, remember that the default\nnature of how the switch ends up working\n\n1016\n00:57:24,518 --> 00:57:25,710\nfor us here.\n\n1017\n00:57:25,710 --> 00:57:28,170\nEverything is pretty much on and\navailable and\n\n1018\n00:57:28,170 --> 00:57:32,960\nthis means that a particular user can\nactually go ahead and start plugging in so\n\n1019\n00:57:32,960 --> 00:57:38,850\nmany different devices and that one port\ncan actually learn multiple MAC addresses.\n\n1020\n00:57:38,850 --> 00:57:42,810\nWhat we can do with port security\nis limit the number MAC addresses\n\n1021\n00:57:42,810 --> 00:57:46,030\nthat we can learn on a particular port and\nthen when somebody tries\n\n1022\n00:57:46,030 --> 00:57:49,150\nto put in more than that it\nsays no I'm not gonna take it.\n\n1023\n00:57:49,150 --> 00:57:52,390\nAnd it can either shut it down or\ndo some other options for us.\n\n1024\n00:57:52,390 --> 00:57:57,480\n>> Yeah, so if somebody is doing the MAC\nflood attack or whatever you can stop them\n\n1025\n00:57:57,480 --> 00:58:01,210\nway beneath where they normally\nhit that kind of limit.\n\n1026\n00:58:01,210 --> 00:58:05,600\nAnd you can even restrict it done to one\nMAC so their initial MAC and any secondary\n\n1027\n00:58:05,600 --> 00:58:10,090\nMACs that come up you can cut them off\nreal fast, so that's a pretty cool one.\n\n1028\n00:58:10,090 --> 00:58:16,820\nDynamic ARP inspection is a much more\nadvanced method of really doing the same\n\n1029\n00:58:16,820 --> 00:58:21,730\nthing, with port security, we just count\nthe number of MACs and we stop them.\n\n1030\n00:58:21,730 --> 00:58:27,290\nWith dynamic ARP inspection it watches\nthe ARP responses on your network and\n\n1031\n00:58:27,290 --> 00:58:32,225\nit says if you responded\nto one MAC address and\n\n1032\n00:58:32,225 --> 00:58:35,535\nnow you're responding to MAC\naddresses that aren't yours.\n\n1033\n00:58:35,535 --> 00:58:37,615\nThat's an attack, and it stops you.\n\n1034\n00:58:37,615 --> 00:58:45,310\nSo it blocks hosts from responding\nto alternate MAC addresses.\n\n1035\n00:58:45,310 --> 00:58:50,280\nAll right, so when an attacker comes up,\nthey've got their own MAC address, right?\n\n1036\n00:58:50,280 --> 00:58:52,310\nAnd there's already a server,\n\n1037\n00:58:52,310 --> 00:58:56,530\nthe target of the attack, that's\nresponding to MAC addresses of it's own.\n\n1038\n00:58:56,530 --> 00:58:59,960\nWhen it sees this new port start\nresponding to a MAC address that's not\n\n1039\n00:58:59,960 --> 00:59:03,710\nits, dynamic ARP inspection\npicks that up and it stops it.\n\n1040\n00:59:03,710 --> 00:59:04,400\nOkay.\n\n1041\n00:59:04,400 --> 00:59:08,280\nNow it does create a little bit of\na performance burden on the system and\n\n1042\n00:59:08,280 --> 00:59:11,320\nthat's one of the reasons why\nit's turned off by default and\n\n1043\n00:59:11,320 --> 00:59:13,080\nthat's how a lot of these things are.\n\n1044\n00:59:13,080 --> 00:59:16,320\nRoot Guard, BPDU Guard,\nBPDU Filter, port security,\n\n1045\n00:59:16,320 --> 00:59:19,490\nDynamic ARP Inspections, and we haven't\ntalked about it yet, but DHCP Snooping.\n\n1046\n00:59:19,490 --> 00:59:24,500\nMost of these are all turned off by\ndefault because people just don't,\n\n1047\n00:59:24,500 --> 00:59:26,170\nthey're not aware of that behavior.\n\n1048\n00:59:26,170 --> 00:59:27,560\nThey don't go in and configure it, and so\n\n1049\n00:59:27,560 --> 00:59:32,350\nit might make a switch look broken when it\ncomes out of the box when it isn't, right?\n\n1050\n00:59:32,350 --> 00:59:37,390\nThe last one is DHCP snooping and\nit is turned\n\n1051\n00:59:37,390 --> 00:59:40,660\non on some switches,\noff on some switches, just depends,\n\n1052\n00:59:40,660 --> 00:59:44,440\nkind of a crap shoot whether it's gonna\nbe on or off on the switch that you buy.\n\n1053\n00:59:44,440 --> 00:59:49,330\nBut what DHCP snooping does,\nis it watches DHCP requests and\n\n1054\n00:59:49,330 --> 00:59:53,610\nit limits ports to an amount\nof requests per second.\n\n1055\n00:59:53,610 --> 00:59:58,420\nIt does package per second restrictions\nand it also allows us to set up\n\n1056\n00:59:58,420 --> 01:00:02,900\na trust model where you can restrict\nwhich ports are allowed to reply.\n\n1057\n01:00:02,900 --> 01:00:08,990\nSo the rate limit of requests, that helps\nus to block MAC address spoofing and\n\n1058\n01:00:08,990 --> 01:00:12,870\ncam table overflows but\nthe trusted responses\n\n1059\n01:00:12,870 --> 01:00:16,460\nallows us to stop people from\nbringing up rogue DHCP servers.\n\n1060\n01:00:16,460 --> 01:00:20,010\nYou can say my DHCP server\nis plugged into port five.\n\n1061\n01:00:20,010 --> 01:00:22,670\nSo DHCP responses should\nonly come from port five.\n\n1062\n01:00:22,670 --> 01:00:26,500\nYou can say that and\nit ineffectively limits that.\n\n1063\n01:00:26,500 --> 01:00:27,025\nSo-\n>> [LAUGH]\n\n1064\n01:00:27,025 --> 01:00:30,916\n>> It restricts the amount of DHCP\n\n1065\n01:00:30,916 --> 01:00:36,304\nrequests from a port and restricts which,\n\n1066\n01:00:36,304 --> 01:00:42,439\nyeah I know I spelled it\nwrong the same way twice,\n\n1067\n01:00:42,439 --> 01:00:47,678\nports can reply to DHCP requests Stopping\n\n1068\n01:00:47,678 --> 01:00:52,685\nrogue DHCP servers.\n>> I'm not ever going to complain\n\n1069\n01:00:52,685 --> 01:00:55,970\nabout somebody who brought up a rogue\nDHCP server on our network before, but\n\n1070\n01:00:55,970 --> 01:00:59,280\nI will say it was me, [LAUGH],\nand I didn't mean to.\n\n1071\n01:00:59,280 --> 01:01:00,400\n>> I did it once, too.\n\n1072\n01:01:00,400 --> 01:01:01,440\n>> Yeah.\n\n1073\n01:01:01,440 --> 01:01:06,640\n>> The one that killed me,\nI taught a VMware class years ago and\n\n1074\n01:01:06,640 --> 01:01:09,290\nwhen you install VMware server,\n\n1075\n01:01:09,290 --> 01:01:13,240\nthe older software,\nit would be a DHCP server by default.\n\n1076\n01:01:13,240 --> 01:01:16,780\nSo we had like 15 rogue DHCP\nservers on the network.\n\n1077\n01:01:16,780 --> 01:01:17,795\nSo it's a common thing.\n\n1078\n01:01:17,795 --> 01:01:19,900\n>> [LAUGH]\n>> So\n\n1079\n01:01:19,900 --> 01:01:22,510\ngreat way to mess up [INAUDIBLE] network.\n\n1080\n01:01:22,510 --> 01:01:23,030\n>> Oh, yeah.\n\n1081\n01:01:23,030 --> 01:01:27,100\n>> So let's take a look at\nthe configurations of each of these and\n\n1082\n01:01:27,100 --> 01:01:28,910\nRonnie, you've got port security.\n\n1083\n01:01:28,910 --> 01:01:30,630\nLet me bring this up here.\n\n1084\n01:01:30,630 --> 01:01:31,200\n>> Yeah.\n\n1085\n01:01:31,200 --> 01:01:32,820\nNow, for port security for\n\n1086\n01:01:32,820 --> 01:01:36,678\nus, the configuration's\nactually fairly simple here.\n\n1087\n01:01:36,678 --> 01:01:39,410\nWhat we wanna do is we want to\nbring up either a single port or\n\n1088\n01:01:39,410 --> 01:01:41,340\na range of ports here.\n\n1089\n01:01:41,340 --> 01:01:44,915\nAnd we begin here in terms of the\nconfiguration by issuing out switchport\n\n1090\n01:01:44,915 --> 01:01:46,710\nport-security.\n\n1091\n01:01:46,710 --> 01:01:48,460\nThat has to be first.\n\n1092\n01:01:48,460 --> 01:01:51,480\nThat's how we turn on\nthe initial port security.\n\n1093\n01:01:51,480 --> 01:01:54,830\nFrom that point, we want to limit\nthe actual number of MAC addresses.\n\n1094\n01:01:54,830 --> 01:01:59,000\nNow Don's got one that's set to two\nusually when I do it I set it to one,\n\n1095\n01:01:59,000 --> 01:01:59,831\ncuz I'm a little bit paranoid.\n\n1096\n01:01:59,831 --> 01:02:01,898\n>> [LAUGH]\n>> Now that somebody else may\n\n1097\n01:02:01,898 --> 01:02:02,765\nactually get it.\n\n1098\n01:02:02,765 --> 01:02:03,905\nBut, what does this do?\n\n1099\n01:02:03,905 --> 01:02:05,970\nThis means that we have\na couple of options here,\n\n1100\n01:02:05,970 --> 01:02:11,260\nbut this means that two maximum MAC\naddresses, a third one comes in,\n\n1101\n01:02:11,260 --> 01:02:13,930\nthen we have to tell it what to do, and\nthat's where that third line comes in,\n\n1102\n01:02:13,930 --> 01:02:18,400\nwhich is to say if it violates what\nI've set up here in the policy either\n\n1103\n01:02:18,400 --> 01:02:23,720\nturn it off restricted, or\nthe idea of protect here is what we have.\n\n1104\n01:02:23,720 --> 01:02:27,540\nShutting down is by far the most\naggressive and the most protective here.\n\n1105\n01:02:27,540 --> 01:02:31,307\nRestricting again limits us to only those\ntwo of the third one kind of tries to get\n\n1106\n01:02:31,307 --> 01:02:33,908\nin, it says [SOUND] don't\nworry about doing anything.\n\n1107\n01:02:33,908 --> 01:02:38,480\nThe protect one of course allows us to do\nthe same thing to restrict to those two,\n\n1108\n01:02:38,480 --> 01:02:40,580\nbut then it tells us about it.\n\n1109\n01:02:40,580 --> 01:02:42,990\nIt can give us a message\nof some sort that said,\n\n1110\n01:02:42,990 --> 01:02:44,650\nsomebody tried to do something about this.\n\n1111\n01:02:48,190 --> 01:02:50,389\nSo that's where we have\nthe idea of port security.\n\n1112\n01:02:50,389 --> 01:02:54,479\nNow, this is the one I see configured most\noften, just about every place that I go,\n\n1113\n01:02:54,479 --> 01:02:56,950\nwhen I get to take a look at the switches.\n\n1114\n01:02:56,950 --> 01:02:59,590\n>> Yeah, now I said maximum too, right?\n\n1115\n01:02:59,590 --> 01:03:02,690\nBut if you're just trying to stop\ncam table overflows and stuff,\n\n1116\n01:03:02,690 --> 01:03:03,830\nyou can do a maximum of 20.\n\n1117\n01:03:03,830 --> 01:03:05,790\nYou can do a maximum of a hundred, right?\n\n1118\n01:03:05,790 --> 01:03:10,910\nThe SDM could store on this switch\nsix thousand MAC addresses and\n\n1119\n01:03:10,910 --> 01:03:14,240\nso if you've only got a thousand\ncomputers in your network.\n\n1120\n01:03:14,240 --> 01:03:18,220\nIf somebody were gonna perform a true cam\ntable overflow they'd have to generate\n\n1121\n01:03:18,220 --> 01:03:20,180\nfive thousand MAC addresses.\n\n1122\n01:03:20,180 --> 01:03:25,680\nSo setting a limit at 50, 500 would still\nbe affective at stopping a cam overflow.\n\n1123\n01:03:25,680 --> 01:03:26,634\nSo it doesn't have to be to low.\n\n1124\n01:03:26,634 --> 01:03:29,880\nNow If somebody's gonna spoof\na MAC address what do they do?\n\n1125\n01:03:29,880 --> 01:03:33,280\nWell, they bring their own computer up,\nthere's one MAC address and\n\n1126\n01:03:33,280 --> 01:03:35,940\nthen they normally will bring\nup either a virtual machine or\n\n1127\n01:03:35,940 --> 01:03:40,710\na modified nick driver to add on a second\nMAC and so it will be the second one.\n\n1128\n01:03:40,710 --> 01:03:44,170\nThat's why Ronnie said he prefers\nto do one MAC address, all right?\n\n1129\n01:03:44,170 --> 01:03:48,837\nWell, the only issue there is if you ever\nhave to replace a machine, you have to\n\n1130\n01:03:48,837 --> 01:03:53,365\nunplug one and wait the five minutes,\nI think it's five minutes that the MAC\n\n1131\n01:03:53,365 --> 01:03:58,500\naddress cable defaults to, for that MAC to\nage out, and then plug in the new machine.\n\n1132\n01:03:58,500 --> 01:04:00,380\nIf you set it to two you can swap it.\n\n1133\n01:04:00,380 --> 01:04:03,455\nSo, if you set it to two\nlike I had in the example,\n\n1134\n01:04:03,455 --> 01:04:07,670\nyou'd still be susceptible\nto MACs spoofing attacks.\n\n1135\n01:04:07,670 --> 01:04:09,870\nI normally rely on.\n\n1136\n01:04:09,870 --> 01:04:11,790\nDynamic harp inspection\nto take care of that.\n\n1137\n01:04:11,790 --> 01:04:16,290\nSo if you're just trying to\nstop the flooding attacks,\n\n1138\n01:04:16,290 --> 01:04:20,070\nyou can set it to a really high number,\nand go that way, so now it would be to\n\n1139\n01:04:20,070 --> 01:04:24,180\nchange it to allow the first 20 to\ncommunicate, block the others, right?\n\n1140\n01:04:24,180 --> 01:04:26,350\nSo it's effective either way.\n\n1141\n01:04:27,470 --> 01:04:28,270\nAll right.\n\n1142\n01:04:28,270 --> 01:04:29,810\nDynamic ARP inspection.\n\n1143\n01:04:29,810 --> 01:04:33,030\nI mentioned that one,\nthat one is more complex\n\n1144\n01:04:33,030 --> 01:04:36,490\nbecause the switch is actually\nperforming an operation.\n\n1145\n01:04:36,490 --> 01:04:40,040\nIt's having to keep track of those MAC\naddresses, it already does that, but\n\n1146\n01:04:40,040 --> 01:04:44,510\nnow it's having to watch as new people\nstart responding to ARP packets or\n\n1147\n01:04:44,510 --> 01:04:47,390\nARP frames, so it's getting\na little more involved with that.\n\n1148\n01:04:47,390 --> 01:04:53,180\nSo to turn it on,\nYou say IP ARP inspection VLAN and\n\n1149\n01:04:53,180 --> 01:04:56,080\nthen number of the VLAN\nthat you want to track.\n\n1150\n01:04:56,080 --> 01:04:59,310\nAt that point it's gonna start\nwatching that VLAN and looking for\n\n1151\n01:04:59,310 --> 01:05:04,690\npeople inappropriately taking over\nthe MAC address of another system.\n\n1152\n01:05:04,690 --> 01:05:08,370\nYou could stop there, but\nyou can also go a little further and\n\n1153\n01:05:08,370 --> 01:05:09,990\nconfigure a log buffer.\n\n1154\n01:05:09,990 --> 01:05:14,450\nAnd you can keep track of a certain amount\nof entries, and so basically they're\n\n1155\n01:05:14,450 --> 01:05:20,770\nsaying track the last 1,024 MAC addresses\nthat were in use on the network.\n\n1156\n01:05:20,770 --> 01:05:22,780\nMachines will age out over time, and\n\n1157\n01:05:22,780 --> 01:05:26,250\nyou might still wanna track that\nto see port changes and so on.\n\n1158\n01:05:26,250 --> 01:05:28,050\nAnd so that's what they're doing here.\n\n1159\n01:05:28,050 --> 01:05:30,800\nIf we set an interval on there that's us\n\n1160\n01:05:30,800 --> 01:05:35,560\nallowing a certain amount of time to pass\nbefore we'll allow that port to move.\n\n1161\n01:05:35,560 --> 01:05:39,130\nIn case somebody unplugs a PC and plugs\nit in somewhere else that does happen.\n\n1162\n01:05:39,130 --> 01:05:42,010\nSo you've got some flexibility there,\nbut the main command that\n\n1163\n01:05:42,010 --> 01:05:45,410\nyou need to remember, really the only one\nyou need for the exam, is this first one.\n\n1164\n01:05:45,410 --> 01:05:48,840\nWhere we say IP ARP inspection, VLAN, and\n\n1165\n01:05:48,840 --> 01:05:50,570\nthen whichever VLAN\nwe're turning it on for.\n\n1166\n01:05:50,570 --> 01:05:52,790\nYou might turn it on for\nall your VLANs, or just want it for\n\n1167\n01:05:52,790 --> 01:05:55,880\ncertain ones where security is a concern.\n\n1168\n01:05:55,880 --> 01:06:00,860\nIf you've got this turned on, and\nyou've got port security setup at\n\n1169\n01:06:00,860 --> 01:06:05,910\na reasonable number,\nthen you've prevented cam overflows and\n\n1170\n01:06:05,910 --> 01:06:09,990\nARP poisoning or MAC spoofing,\nyou're kind of protected from both of us.\n\n1171\n01:06:09,990 --> 01:06:11,860\nIf you don't want to use DAI,\n\n1172\n01:06:11,860 --> 01:06:14,670\nthen you'll want to set this to\na lower number like Ronnie suggested.\n\n1173\n01:06:14,670 --> 01:06:16,150\nAnd you can knock it\nout with one protocol,\n\n1174\n01:06:16,150 --> 01:06:20,110\nor one technology instead of two.\n\n1175\n01:06:20,110 --> 01:06:22,730\nThe last one is DHCP snooping.\n\n1176\n01:06:22,730 --> 01:06:25,640\nDHCP snooping by itself, on the switch,\n\n1177\n01:06:25,640 --> 01:06:31,320\nif you just run IP DHCP snooping VLAN one.\n\n1178\n01:06:31,320 --> 01:06:32,350\nRight.\n\n1179\n01:06:32,350 --> 01:06:35,810\nThat by itself,\nwill turn on DHCP snooping, and\n\n1180\n01:06:35,810 --> 01:06:37,942\ndo rate limiting of the DHCP.\n\n1181\n01:06:37,942 --> 01:06:39,190\nAll right, the default is,\n\n1182\n01:06:39,190 --> 01:06:43,890\nit limits you to ten packet per second, or\nten requests per second, and that's it.\n\n1183\n01:06:43,890 --> 01:06:45,320\nOr actually I think it's 15 shoot,\n\n1184\n01:06:45,320 --> 01:06:48,620\nwhich is what I put in my own notes\nright here, so 15 is the default.\n\n1185\n01:06:48,620 --> 01:06:49,120\nThere we go.\n\n1186\n01:06:50,230 --> 01:06:55,837\nIf you want to adjust that rate,\nyou can say IP DHCP snooping limit and\n\n1187\n01:06:55,837 --> 01:07:00,670\nthen rate 15, this would limit\nyou to 15 requests per second\n\n1188\n01:07:00,670 --> 01:07:03,790\nthat's still quite a lot so\nthat might be beyond what we want.\n\n1189\n01:07:03,790 --> 01:07:04,370\nAll right.\n\n1190\n01:07:04,370 --> 01:07:08,830\nBut this will stop somebody from\nrequesting 6,000 MAC addresses,\n\n1191\n01:07:08,830 --> 01:07:10,290\nand flooding up that table.\n\n1192\n01:07:10,290 --> 01:07:13,300\nOr, 6,000 IP addresses.\n\n1193\n01:07:13,300 --> 01:07:16,340\n>> Now, the way that Don shows the\nconfiguration here on this one particular\n\n1194\n01:07:16,340 --> 01:07:19,570\ninterface, that means that's the only\ninterface that's gonna be able\n\n1195\n01:07:19,570 --> 01:07:21,830\nto respond to the DHCP request.\n\n1196\n01:07:21,830 --> 01:07:25,690\nThat means by default, all the other ones\nthough, aren't gonna be able to as well,\n\n1197\n01:07:25,690 --> 01:07:27,387\nwhich is rogue ETP server.\n\n1198\n01:07:27,387 --> 01:07:27,957\n[LAUGH].\n\n1199\n01:07:27,957 --> 01:07:29,454\n>> Right, you mentioned that,\nI skipped over the command.\n\n1200\n01:07:29,454 --> 01:07:33,880\nI skipped over the most important command,\nwhich is IP DHCP snooping trust.\n\n1201\n01:07:33,880 --> 01:07:38,040\nIf we turn on snooping,\nnobody can respond to DHCP requests.\n\n1202\n01:07:38,040 --> 01:07:43,490\nYou have to go into the port that your\nDHCP runs on and enable it there.\n\n1203\n01:07:43,490 --> 01:07:45,363\nUnless DHCP runs form your switch, cuz you\ncould use the switch as a DHCP server.\n\n1204\n01:07:45,363 --> 01:07:47,069\n>> Oh yeah.\n\n1205\n01:07:47,069 --> 01:07:51,170\n>> But otherwise it'll be the port\nthat your DHCP server is plugged into.\n\n1206\n01:07:51,170 --> 01:07:52,620\nYou trust that port.\n\n1207\n01:07:52,620 --> 01:07:55,660\nNow, you wouldn't want to put a rate limit\n\n1208\n01:07:55,660 --> 01:07:57,870\non the port that the DHCP\nserver is plugged into.\n\n1209\n01:07:57,870 --> 01:07:58,830\n>> No.\n>> So, these are gonna\n\n1210\n01:07:58,830 --> 01:08:00,210\nbe two different ports.\n\n1211\n01:08:00,210 --> 01:08:00,820\nRight?\n>> Yeah.\n\n1212\n01:08:00,820 --> 01:08:04,590\nBut that will limit those communications\nand stop that type of attack.\n\n1213\n01:08:06,000 --> 01:08:11,840\nSo if we couple all three of these\ntechnologies, along with BPU guard,\n\n1214\n01:08:11,840 --> 01:08:16,790\nRoot Guard, and BPU filter, these\ntechnologies all combined start to trim\n\n1215\n01:08:16,790 --> 01:08:21,440\noff some of those attacks that are very,\nvery real and really easy to pull off.\n\n1216\n01:08:21,440 --> 01:08:23,040\nHere we've already got\nthe tools to stop them.\n\n1217\n01:08:24,520 --> 01:08:25,250\nAll right.\n\n1218\n01:08:25,250 --> 01:08:27,350\nSo, that's gonna tackle those.\n\n1219\n01:08:27,350 --> 01:08:29,680\nThey're pretty straightforward.\n\n1220\n01:08:29,680 --> 01:08:31,600\nIt's just a matter of turning them on.\n\n1221\n01:08:31,600 --> 01:08:34,690\nAnd some switches even have\nwhere you can do this globally.\n\n1222\n01:08:34,690 --> 01:08:36,180\nLet me see here.\n\n1223\n01:08:36,180 --> 01:08:36,877\nI'm on a 3560?\n\n1224\n01:08:36,877 --> 01:08:37,515\n>> Yeah.\n\n1225\n01:08:37,515 --> 01:08:41,330\n>> So if I do IP DHCP snooping.\n\n1226\n01:08:41,330 --> 01:08:42,030\nYeah, this one has it.\n\n1227\n01:08:42,030 --> 01:08:44,740\nSo instead of doing VLAN,\nI can just stop right there, and\n\n1228\n01:08:44,740 --> 01:08:47,900\nit'll turn it on globally for\nthe whole switch.\n\n1229\n01:08:47,900 --> 01:08:50,620\nAnd in fact, I think on a 3560,\nit's a default.\n\n1230\n01:08:52,050 --> 01:08:55,900\nSo let me just see if that\nshows up in the config.\n\n1231\n01:08:55,900 --> 01:08:56,950\nOh no, I guess it's not.\n\n1232\n01:08:56,950 --> 01:08:58,500\nSo it's not on by default then.\n\n1233\n01:08:58,500 --> 01:09:01,860\nOn some switches it is,\nthat's why I say you kind of have to look.\n\n1234\n01:09:01,860 --> 01:09:07,890\nbut so there I have that DHCP snooping so\nnow I'm kind of restricting that.\n\n1235\n01:09:07,890 --> 01:09:12,430\nI would need to go into whatever interface\nI want to allow DHCP requests to be\n\n1236\n01:09:12,430 --> 01:09:19,210\nanswered from, and\non those I would say that I trust them.\n\n1237\n01:09:19,210 --> 01:09:21,350\nAnd it's a good idea to\nthat on your trunk ports,\n\n1238\n01:09:21,350 --> 01:09:25,560\nif the DHCP server is on another switch.\n\n1239\n01:09:25,560 --> 01:09:28,500\nSo you'll have to configure DHCP\nsnooping across all of your switches to\n\n1240\n01:09:28,500 --> 01:09:30,840\nmake sure that it's all kind of,\ntrusted along the way.\n\n1241\n01:09:30,840 --> 01:09:32,944\nAnd on your trunk ports,\ngo ahead and trust those.\n\n1242\n01:09:36,520 --> 01:09:38,651\nThose are a couple of technologies.\n\n1243\n01:09:38,651 --> 01:09:41,091\nWhat is next in our objective list?\n\n1244\n01:09:41,091 --> 01:09:44,550\n>> Talk about CDP and LLDP here.\n\n1245\n01:09:44,550 --> 01:09:45,374\n>> All right.\n\n1246\n01:09:45,374 --> 01:09:51,178\nI'm kind of curious why my touch screen\nhas decided to just cut out on me,\n\n1247\n01:09:51,178 --> 01:09:53,578\nthis is another Dell moment.\n\n1248\n01:09:53,578 --> 01:09:58,770\nAnyhow, so, when we talk about.\n\n1249\n01:09:58,770 --> 01:09:59,760\nOh yeah, that's the last one.\n\n1250\n01:09:59,760 --> 01:10:00,590\nCDP and LDP.\n\n1251\n01:10:01,850 --> 01:10:04,427\nSo, let's do a quick summary\nof what CDP and LDP are, and\n\n1252\n01:10:04,427 --> 01:10:06,377\nthen we'll talk about how to secure that.\n\n1253\n01:10:06,377 --> 01:10:09,176\n>> CDP for\nus is our Cisco discovery protocol.\n\n1254\n01:10:09,176 --> 01:10:12,650\nThis is a proprietary Cisco protocol for\nus.\n\n1255\n01:10:12,650 --> 01:10:17,460\nThat allows for pretty much all Cisco\ndevices to communicate with each other,\n\n1256\n01:10:17,460 --> 01:10:22,030\nover layer two and find out quite\na bit of information for us as well.\n\n1257\n01:10:22,030 --> 01:10:26,450\nAnd so, we, are they,\nit's not really enabled is it?\n\n1258\n01:10:26,450 --> 01:10:27,790\nOr is it?\n\n1259\n01:10:27,790 --> 01:10:29,220\n>> On routers and switches, yes.\n\n1260\n01:10:29,220 --> 01:10:30,070\nOn firewalls, no.\n\n1261\n01:10:30,070 --> 01:10:31,080\n>> Oh, yeah.\n\n1262\n01:10:31,080 --> 01:10:35,200\nSo, when they're enabled,\nthat means when we plug these devices in\n\n1263\n01:10:35,200 --> 01:10:39,020\nthey are ready to start learning\ninformation about each other.\n\n1264\n01:10:39,020 --> 01:10:42,940\nAnd then you can actually pull up quite\na bit of information from one switch\n\n1265\n01:10:42,940 --> 01:10:45,570\nabout all of the other\nneighbors that it actually has.\n\n1266\n01:10:45,570 --> 01:10:47,890\nSo, it's quite a powerful protocol for us.\n\n1267\n01:10:47,890 --> 01:10:50,720\nNow, there's also that open source one,\nright?\n\n1268\n01:10:50,720 --> 01:10:52,090\nLLDP\n>> Yeah.\n\n1269\n01:10:52,090 --> 01:10:54,690\n>> And\nthat's the link layer discovery protocol.\n\n1270\n01:10:54,690 --> 01:10:57,240\nIt's just a open\nstandardized version of CDP.\n\n1271\n01:10:57,240 --> 01:11:01,210\nCDP is Cisco proprietary so\nyou'll only discover Cisco devices.\n\n1272\n01:11:01,210 --> 01:11:06,280\nLLDP is kinda open to\nanybody to use right.\n\n1273\n01:11:06,280 --> 01:11:08,840\nSo, the only thing we need to\nremember about these protocols,\n\n1274\n01:11:08,840 --> 01:11:13,190\nis that they can give away\ntoo much information.\n\n1275\n01:11:13,190 --> 01:11:15,170\nAnd let me show you what I mean.\n\n1276\n01:11:15,170 --> 01:11:16,230\n>> And there it is, no joke.\n\n1277\n01:11:16,230 --> 01:11:21,470\n>> If we do a, actually do I have,\nhere, let me do a show CDP neighbor.\n\n1278\n01:11:21,470 --> 01:11:25,520\nAlright, so show CDP neighbor, I can see\nthat I'm plugged into another switch and\n\n1279\n01:11:25,520 --> 01:11:26,820\na router, right.\n\n1280\n01:11:26,820 --> 01:11:28,480\nAnd I can see what model they are.\n\n1281\n01:11:28,480 --> 01:11:32,680\nThis is pretty benign data, right,\n\n1282\n01:11:32,680 --> 01:11:35,140\nan attacker can't really\ndo much with this data.\n\n1283\n01:11:35,140 --> 01:11:35,810\nRight?\n\n1284\n01:11:35,810 --> 01:11:40,476\nBut if I do show CDP entry sw2,\nthat's gonna show me all\n\n1285\n01:11:40,476 --> 01:11:44,548\nthe information that switch\ntwo is sending me and\n\n1286\n01:11:44,548 --> 01:11:50,130\nI'm gonna find some stuff in here\nthat is useful for doing damage.\n\n1287\n01:11:50,130 --> 01:11:54,210\nI've got the IP address,\nI've got the specific model, right?\n\n1288\n01:11:54,210 --> 01:11:58,543\nVery specific, it's a 35/60/48ps And\n\n1289\n01:11:58,543 --> 01:12:03,297\nit gives me the exact IOS\nversion that it's running,\n\n1290\n01:12:03,297 --> 01:12:06,900\nright here, 12.2 release 46 SE.\n\n1291\n01:12:08,500 --> 01:12:15,050\nAll I have to do is go to Cisco's website\nand look up if there's been an update.\n\n1292\n01:12:15,050 --> 01:12:17,480\nIs there a 12.2 release 47 or higher?\n\n1293\n01:12:17,480 --> 01:12:22,680\nAnd any bug that was\nfixed in that new release\n\n1294\n01:12:22,680 --> 01:12:27,470\nis a bug that exists in this release and\nI can use that to exploit the switch.\n\n1295\n01:12:27,470 --> 01:12:32,430\nI now know exactly what iOS it's running.\n\n1296\n01:12:32,430 --> 01:12:34,220\nThat is a big deal.\n\n1297\n01:12:34,220 --> 01:12:38,110\nI also know that it's running\nVLAN Trunking protocol and\n\n1298\n01:12:38,110 --> 01:12:43,460\nthat it's in the ITProTV VTP domain so\nI could pull of a VTP attack if I wanted.\n\n1299\n01:12:43,460 --> 01:12:46,110\nAnd I know the management\naddress if I want to try and\n\n1300\n01:12:46,110 --> 01:12:48,230\ntelnet another SSH into it.\n\n1301\n01:12:48,230 --> 01:12:52,130\nThis is not data you want to get out,\nall right.\n\n1302\n01:12:52,130 --> 01:12:55,040\nNow this is running CDP, right?\n\n1303\n01:12:55,040 --> 01:12:58,640\nDoes this one support LLDP?\n\n1304\n01:12:58,640 --> 01:12:59,910\nIt does.\n\n1305\n01:12:59,910 --> 01:13:04,140\nAll right, if we do LLDP, and\n\n1306\n01:13:04,140 --> 01:13:08,892\nlet me telnet into the other one.\n\n1307\n01:13:22,606 --> 01:13:24,910\nOkay so I'm just turning on lldp.\n\n1308\n01:13:24,910 --> 01:13:27,043\nLldp is the open standard, right?\n\n1309\n01:13:27,043 --> 01:13:30,340\nSo anybody supports this one 3Com,\nHP, whatever.\n\n1310\n01:13:30,340 --> 01:13:32,976\nAnd so I can see that I am running LLDP.\n\n1311\n01:13:32,976 --> 01:13:36,660\nLLDP is nice cuz all\nthe commands are the same.\n\n1312\n01:13:36,660 --> 01:13:40,300\nSo any CDP command you would issue,\nyou just swap it out for LLDP, and\n\n1313\n01:13:40,300 --> 01:13:41,620\nit's the same command.\n\n1314\n01:13:41,620 --> 01:13:46,520\nIt is timer based, so I've gotta wait\nto detect the person on the other side.\n\n1315\n01:13:46,520 --> 01:13:48,330\nAnd I haven't detected them yet.\n\n1316\n01:13:48,330 --> 01:13:54,880\nBut eventually I'll detect them, and we'll\nsee that LLDP gives us a lot of data also.\n\n1317\n01:13:54,880 --> 01:13:56,280\nThere we go.\n\n1318\n01:13:56,280 --> 01:13:57,580\nSo I just picked up switch two.\n\n1319\n01:13:57,580 --> 01:14:02,400\nAnd if I do show lldp entry SW2.\n\n1320\n01:14:02,400 --> 01:14:08,960\nI can see here with LLDP it gave me\nalso exactly what iOS version's running\n\n1321\n01:14:08,960 --> 01:14:15,270\non the other side, what the management\nIP is, basically the same information.\n\n1322\n01:14:15,270 --> 01:14:18,730\nEven a little bit more,\nphysical capabilities, and stuff.\n\n1323\n01:14:18,730 --> 01:14:22,710\nSo both of these protocols give\naway more data than we want.\n\n1324\n01:14:22,710 --> 01:14:23,980\n>> Right.\n>> All right.\n\n1325\n01:14:23,980 --> 01:14:27,630\nNow, we need to think about\nwhat CDP does for us, and LLDP.\n\n1326\n01:14:27,630 --> 01:14:29,820\nIt helps us map our network.\n\n1327\n01:14:29,820 --> 01:14:33,100\nWell, if you've already got a good\nnetwork map, what else does CDP do?\n\n1328\n01:14:33,100 --> 01:14:34,850\nNot much, right?\n\n1329\n01:14:34,850 --> 01:14:39,770\nIf you have Cisco voice over IP phones,\nCDP can be used to discover them,\n\n1330\n01:14:39,770 --> 01:14:41,580\nand automatically configure them.\n\n1331\n01:14:41,580 --> 01:14:44,775\nBut if you don't have Cisco voice\nover IP phones, then CDP and\n\n1332\n01:14:44,775 --> 01:14:48,710\nLLDP merely create an attack factor and\nthat's it.\n\n1333\n01:14:48,710 --> 01:14:51,470\nSo the best solution is to turn it off.\n\n1334\n01:14:51,470 --> 01:14:52,970\nJust turn them off, don't use them, right?\n\n1335\n01:14:52,970 --> 01:14:56,501\nTurn them on when you need them for\ntroubleshooting and\n\n1336\n01:14:56,501 --> 01:14:57,920\nthen turn them off when your done.\n\n1337\n01:14:57,920 --> 01:15:00,090\nAnd just don't run them.\n\n1338\n01:15:00,090 --> 01:15:03,310\n>> This is an unusual protocol here\nbecause we've talked about this before\n\n1339\n01:15:03,310 --> 01:15:04,250\nat some point.\n\n1340\n01:15:04,250 --> 01:15:05,700\nWhere even though it\nsays layer two protocol,\n\n1341\n01:15:05,700 --> 01:15:07,730\nit still gives us layer three information.\n\n1342\n01:15:07,730 --> 01:15:10,900\nSo it's quite interesting in how\nthey figured out how to do that.\n\n1343\n01:15:10,900 --> 01:15:12,440\n>> And it's management information,\n\n1344\n01:15:12,440 --> 01:15:15,580\nso it's stuff that you don't\nnecessarily want out there.\n\n1345\n01:15:15,580 --> 01:15:18,350\nSo the other option is,\nwhat if you need CDP?\n\n1346\n01:15:18,350 --> 01:15:20,228\nWhat if you need it for some reason?\n\n1347\n01:15:20,228 --> 01:15:24,530\nWell, turn it on for the ports that\nyou need it and turn it off for\n\n1348\n01:15:24,530 --> 01:15:25,480\nthe ports that you don't.\n\n1349\n01:15:25,480 --> 01:15:28,060\nFor example, any port on\na router that points to an ISP?\n\n1350\n01:15:28,060 --> 01:15:31,110\nWhy would you run CDP pointing to the ISP?\n\n1351\n01:15:31,110 --> 01:15:32,340\nTurn it off, right?\n\n1352\n01:15:32,340 --> 01:15:34,640\nSo, you've got a couple\nof commands to remember.\n\n1353\n01:15:34,640 --> 01:15:37,400\nLet me, I just have them in my notepad,\nthat'll be the faster way.\n\n1354\n01:15:37,400 --> 01:15:38,580\nLet me just bring them up in here.\n\n1355\n01:15:39,770 --> 01:15:44,380\nSo a CDP, I thought I had it\nin my notepad, here we go.\n\n1356\n01:15:44,380 --> 01:15:48,692\nLet me just bring this back\nup here where we were.\n\n1357\n01:15:48,692 --> 01:15:52,545\nWith CDP, there's global commands and\nthere's interface commands.\n\n1358\n01:15:52,545 --> 01:15:56,655\nGlobally you can do CDP run or\n\n1359\n01:15:56,655 --> 01:16:00,315\nno CDP run, that'll turn CDP on or\noff for the whole device.\n\n1360\n01:16:01,315 --> 01:16:07,625\nOr you can go per interface and you can\ndo CDP enable or no CDP enable, right?\n\n1361\n01:16:07,625 --> 01:16:10,375\nSo what I normally do,\nis I normally go on the switch and\n\n1362\n01:16:10,375 --> 01:16:13,820\ndo a no CDP run to turn it off for\nthe whole switch.\n\n1363\n01:16:13,820 --> 01:16:18,660\nAnd then, go to individual ports and\nsay, CDP enable to turn it\n\n1364\n01:16:18,660 --> 01:16:23,220\non just on the ones that I want and\nleave it off on all the others.\n\n1365\n01:16:23,220 --> 01:16:26,950\nLLDP, it's really just the same thing.\n\n1366\n01:16:26,950 --> 01:16:31,655\nIf we take the same information,\nexcept we replace Cisco with\n\n1367\n01:16:31,655 --> 01:16:36,492\nLink-Layer, it would be no LLDP run.\n\n1368\n01:16:36,492 --> 01:16:39,500\nAnd thhen you go into\nthe individual ports,\n\n1369\n01:16:39,500 --> 01:16:42,590\nand LLDP enable wherever you want it.\n\n1370\n01:16:42,590 --> 01:16:45,600\nSo really easy to switch between the two.\n\n1371\n01:16:45,600 --> 01:16:46,100\n>> Yep.\n\n1372\n01:16:47,177 --> 01:16:49,959\n>> All right, so\nas far as CDP is concerned,\n\n1373\n01:16:49,959 --> 01:16:52,670\nit really is a matter of shutting it off.\n\n1374\n01:16:52,670 --> 01:16:54,020\nMost of the environments I've worked in,\n\n1375\n01:16:54,020 --> 01:16:56,310\nwe've just kept kept it\nshut off all the time.\n\n1376\n01:16:56,310 --> 01:16:57,350\nExcept when we needed it for\n\n1377\n01:16:57,350 --> 01:17:00,270\ntroubleshooting, we'd turn it on then,\nturn it off when we were done.\n\n1378\n01:17:00,270 --> 01:17:02,560\nThat's really the best\nroute to deal with that.\n\n1379\n01:17:03,860 --> 01:17:08,340\nAll right, so that pretty much wraps up\nour five different attack types there, and\n\n1380\n01:17:08,340 --> 01:17:10,080\nhow to deal with those.\n\n1381\n01:17:10,080 --> 01:17:15,500\nWe've already talked about some of\nour other stuff, which was our,\n\n1382\n01:17:16,700 --> 01:17:21,180\nmy touch screen was working for a second\nthere and now it's died off again.\n\n1383\n01:17:21,180 --> 01:17:23,530\nBut so\nwe talked about some of those things.\n\n1384\n01:17:23,530 --> 01:17:29,030\nThe only thing left are objectives 6.2 and\n6.3, which have to do with VLANs.\n\n1385\n01:17:29,030 --> 01:17:31,120\nAnd so why don't we do this,\nwhy don't we stop and take a break.\n\n1386\n01:17:31,120 --> 01:17:34,810\nAnd when we get back for our last segment,\nwe'll tackle some of the VLAN attacks that\n\n1387\n01:17:34,810 --> 01:17:38,670\nare out there, how we can protect from\nthem, and get a chance to see that.\n\n1388\n01:17:38,670 --> 01:17:39,691\n>> Yep.\n>> All right,\n\n1389\n01:17:39,691 --> 01:17:43,525\nstay tuned, when we get back, the exciting\nconclusion of layer two security.\n\n1390\n01:17:43,525 --> 01:17:44,314\n>> That's right.\n\n1391\n01:17:44,314 --> 01:17:51,445\n[MUSIC]\n\n1392\n01:17:52,853 --> 01:17:54,360\nAll right welcome back.\n\n1393\n01:17:54,360 --> 01:17:57,020\nSo we talked about a lot of the-\n>> [LAUGH]\n\n1394\n01:17:57,020 --> 01:17:58,155\n>> [LAUGH] I know, this is abrupt,\n\n1395\n01:17:58,155 --> 01:17:59,260\nthat's it, welcome back.\n\n1396\n01:17:59,260 --> 01:18:03,023\n[LAUGH] So we've talked about,\nreally, all the exciting stuff.\n\n1397\n01:18:03,023 --> 01:18:05,310\n[LAUGH] Hate to put it that way.\n\n1398\n01:18:05,310 --> 01:18:09,840\nThe last part here though we\nneed to deal with 5.2, 5.3,\n\n1399\n01:18:09,840 --> 01:18:13,580\nwhich is some of the VLAN\nissues that we can deal with.\n\n1400\n01:18:13,580 --> 01:18:17,000\nAnd it looks like a lot, but it really\ndoes boil down to just a couple of things.\n\n1401\n01:18:18,140 --> 01:18:21,910\nBasically, when you implement\nVLANs in your network,\n\n1402\n01:18:21,910 --> 01:18:26,940\nyou're dividing your physical switches up\ninto virtual switches to isolate traffic.\n\n1403\n01:18:26,940 --> 01:18:31,160\nBut there are a number of attacks that\ncan kind of take advantage of your VLANs,\n\n1404\n01:18:31,160 --> 01:18:33,330\nto gain access to networks\nthey shouldn't have access to.\n\n1405\n01:18:33,330 --> 01:18:34,960\nOne we've already talked about,\n\n1406\n01:18:34,960 --> 01:18:39,090\nwhich is people gaining trunk access\nwhen we don't want them to have it.\n\n1407\n01:18:40,150 --> 01:18:43,710\nAnd we can solve that easily\nby disabling trunking.\n\n1408\n01:18:43,710 --> 01:18:44,240\nRight.\n\n1409\n01:18:44,240 --> 01:18:46,590\nTurn off trunking on your access ports.\n\n1410\n01:18:46,590 --> 01:18:48,920\nOr, shutting down unused ports, right?\n\n1411\n01:18:50,230 --> 01:18:52,350\nBut there are scenarios\nwhere we can't do that.\n\n1412\n01:18:52,350 --> 01:18:56,120\nAnd a great example is a Voice VLAN, okay?\n\n1413\n01:18:56,120 --> 01:18:59,976\nA Voice VLAN is where we have\na voice over IP phone, and\n\n1414\n01:18:59,976 --> 01:19:06,000\nit needs to participate on more than one\nVLAN, one for data, and one for the voice.\n\n1415\n01:19:06,000 --> 01:19:07,809\nThere we go, for the phone itself, right?\n\n1416\n01:19:07,809 --> 01:19:08,963\nSo we need to have two, and\n\n1417\n01:19:08,963 --> 01:19:11,385\nI know I talked about that\na little earlier in the show.\n\n1418\n01:19:11,385 --> 01:19:15,072\nBut there's some easy configurations\nwe can use to help protect this.\n\n1419\n01:19:15,072 --> 01:19:19,272\nThe fear is that an attacker\ncan gain trunk access and\n\n1420\n01:19:19,272 --> 01:19:23,030\nnow be able to access all of your VLANs.\n\n1421\n01:19:23,030 --> 01:19:26,440\nSo we can use what's called\nallowed VLANs to restrict that.\n\n1422\n01:19:26,440 --> 01:19:31,060\nLet me show you an example,\nI've got a code snippet,\n\n1423\n01:19:31,060 --> 01:19:34,420\nnot a code snippet but\na config example here somewhere.\n\n1424\n01:19:35,490 --> 01:19:40,399\nLet's see buried in my notes,\nI had to reboot during the break and\n\n1425\n01:19:40,399 --> 01:19:43,173\nso of course now I've lost my place.\n\n1426\n01:19:43,173 --> 01:19:47,838\nThere we go, all right, so let me just\nshow you guys a couple of examples here,\n\n1427\n01:19:47,838 --> 01:19:51,463\nand the first one here I'm doing\nis a Voice VLAN, all right?\n\n1428\n01:19:51,463 --> 01:19:55,307\nHere we've got a port that we need\nto support a voice over IP phone,\n\n1429\n01:19:55,307 --> 01:19:59,020\nwhich means it needs to support trunking,\nright?\n\n1430\n01:19:59,020 --> 01:20:03,770\nIf it's a Cisco phone,\nyou can say switchboard, access, VLAN,\n\n1431\n01:20:03,770 --> 01:20:07,490\nand then what you want\nyour data VLAN to be.\n\n1432\n01:20:07,490 --> 01:20:10,840\nAnd then you can say switchboard,\nvoice, VLAN, and\n\n1433\n01:20:10,840 --> 01:20:13,080\nwhat you want the voice phone to be,\nright?\n\n1434\n01:20:13,080 --> 01:20:18,130\nSo, this is, if you Cisco voice phones.\n\n1435\n01:20:20,990 --> 01:20:22,940\nI shouldn't capitalize that.\n\n1436\n01:20:22,940 --> 01:20:24,864\nAll right, so one set the data VLAN.\n\n1437\n01:20:24,864 --> 01:20:28,410\nAnd then, two, set the voice for\n\n1438\n01:20:28,410 --> 01:20:33,230\nthe VoIP VLAN,\nif you want to be particular.\n\n1439\n01:20:34,400 --> 01:20:37,890\nSo you set those two,\nnow when you plug in that Cisco phone,\n\n1440\n01:20:37,890 --> 01:20:41,430\nthe data goes on VLAN one,\nthe voice goes on VLAN ten, and\n\n1441\n01:20:41,430 --> 01:20:43,879\nevery other VLAN is pruned off and\nthat's the end of it.\n\n1442\n01:20:45,020 --> 01:20:50,170\nThat's great if your running Cisco phones,\nbut what if your not running Cisco phones.\n\n1443\n01:20:50,170 --> 01:20:54,020\nWhat if you've got PolyCom or\nsomebody else that.\n\n1444\n01:20:54,020 --> 01:20:58,390\nWell, in that scenario\nyou've got to be trunking.\n\n1445\n01:20:58,390 --> 01:21:00,596\nAnd so\nyou'll say switch port mode dynamic auto.\n\n1446\n01:21:00,596 --> 01:21:04,830\nThat will say, hey we're going to\nallow this other side to negotiate and\n\n1447\n01:21:04,830 --> 01:21:08,230\nbuild up a trunk, or you might actually\njust hardest it, switchport mode trunk.\n\n1448\n01:21:08,230 --> 01:21:12,020\nBut you're going to allow\ntrunking on that interface.\n\n1449\n01:21:12,020 --> 01:21:17,750\nThe problem here is that a trunk by\ndefault carries every single VLAN.\n\n1450\n01:21:17,750 --> 01:21:23,393\nSo we need to go one step further and\nsay switchport trunk allowed VLAN and\n\n1451\n01:21:23,393 --> 01:21:28,220\nthen specify the two VLANs,\nthe data VLAN and the voice VLAN.\n\n1452\n01:21:28,220 --> 01:21:29,720\nIt doesn't matter what\norder you put them in.\n\n1453\n01:21:29,720 --> 01:21:32,450\nAlthough, they're supposed to\nbe from lowest to highest.\n\n1454\n01:21:32,450 --> 01:21:36,070\nSo, we're just designating what we\nwant our data to be on, in my case,\n\n1455\n01:21:36,070 --> 01:21:39,438\nI said VLAN one, and\nwhat we want our voice to be on, VLAN 10.\n\n1456\n01:21:39,438 --> 01:21:41,960\nIn fact, you're not even really\ndesignating that you're just saying,\n\n1457\n01:21:41,960 --> 01:21:42,620\nthese two VLAN.\n\n1458\n01:21:42,620 --> 01:21:46,960\nWe don't care what the traffic is,\nwe'll allow these two VLANs on this port,\n\n1459\n01:21:46,960 --> 01:21:51,345\neffectively pruning off\nall of your other VLANs.\n\n1460\n01:21:51,345 --> 01:21:55,510\nSo, if an attacker comes in and says, oh\nlook, a void phone, I know that's a trunk.\n\n1461\n01:21:55,510 --> 01:22:00,020\nThey can't just unplug that phone, plug\ninto their PC, and then do a VLAN scan.\n\n1462\n01:22:00,020 --> 01:22:00,640\nIt won't work.\n\n1463\n01:22:00,640 --> 01:22:03,650\nThey'll only see the two VLANs\nthat are related to that data,\n\n1464\n01:22:03,650 --> 01:22:06,610\nwhich they would've had access to\nanyway because the phone is there.\n\n1465\n01:22:06,610 --> 01:22:09,140\nSo it's not any less secure than normal.\n\n1466\n01:22:09,140 --> 01:22:12,750\nAll right, but that's the secret sauce\nright there, doing that restricted port.\n\n1467\n01:22:12,750 --> 01:22:17,430\nI've seen people do that even\nif they have Cisco phones.\n\n1468\n01:22:17,430 --> 01:22:19,470\nAnd there's no damage.\n\n1469\n01:22:19,470 --> 01:22:23,850\nIt doesn't make things worse, but\nit doesn't really achieve anything either.\n\n1470\n01:22:23,850 --> 01:22:27,980\nWith the Cisco phones just designating\nthese the access and voice VLANs,\n\n1471\n01:22:27,980 --> 01:22:31,090\nthat knocks it out and it stops you\nfrom having to designate the rest.\n\n1472\n01:22:31,090 --> 01:22:34,700\nSo this is what you use with\nnon Cisco phones down here.\n\n1473\n01:22:34,700 --> 01:22:36,950\nLet me just add that.\n\n1474\n01:22:36,950 --> 01:22:43,291\nIf you use third-party phones, Right,\n\n1475\n01:22:43,291 --> 01:22:47,032\nso slight variation there\nin what we would do.\n\n1476\n01:22:47,032 --> 01:22:51,940\nAll right,\nthe other thing we need to talk about\n\n1477\n01:22:51,940 --> 01:22:54,680\nare VLAN hopping attacks\n>> Right, and\n\n1478\n01:22:54,680 --> 01:22:59,930\nthat's where somebody sends traffic on one\nVLAN and tries to hop to another VLAN.\n\n1479\n01:22:59,930 --> 01:23:03,670\nRight?\nSo that's not an uncommon attack either.\n\n1480\n01:23:03,670 --> 01:23:06,820\n>> There's a couple of different methods\nfor this, but a lot of times what\n\n1481\n01:23:06,820 --> 01:23:10,760\npeople talk about here are things like\nwhat they call double tagging where they\n\n1482\n01:23:10,760 --> 01:23:14,890\ncan actually do that and that's where they\nend up putting two different VLAN tags.\n\n1483\n01:23:14,890 --> 01:23:16,640\nOn that same packet, and\n\n1484\n01:23:16,640 --> 01:23:21,000\nthen they're actually able to get to\nthe VLAN that they really want to get to.\n\n1485\n01:23:21,000 --> 01:23:23,990\n>> What happens is,\nif they pretag their packet and\n\n1486\n01:23:23,990 --> 01:23:27,330\nthen the switch adds another tag,\nnow they've got two tags.\n\n1487\n01:23:27,330 --> 01:23:32,590\nWhen it goes to the next switch down the\nline, it trims off one tag, but it'll see\n\n1488\n01:23:32,590 --> 01:23:37,770\nthe original tag first, and so it\nbasically swaps it over to another VLAN.\n\n1489\n01:23:37,770 --> 01:23:38,980\nThat's a problem, right?\n\n1490\n01:23:38,980 --> 01:23:41,760\nLet me go to my little\nVisio diagram again.\n\n1491\n01:23:42,930 --> 01:23:44,900\nAnd, you know,\nI closed my little screen writer.\n\n1492\n01:23:44,900 --> 01:23:45,960\nThere we go.\n\n1493\n01:23:45,960 --> 01:23:51,270\nAll right, so,\nbasically if I've already got one tag,\n\n1494\n01:23:51,270 --> 01:23:54,190\nthat's not what I wanted, there we go.\n\n1495\n01:23:54,190 --> 01:23:58,150\nIf the attacker already\ntags their frame and\n\n1496\n01:23:58,150 --> 01:24:02,330\nsends it to the switch,\nthe switch then adds a second frame.\n\n1497\n01:24:02,330 --> 01:24:05,380\nBut the attacker's frame is first and\n\n1498\n01:24:05,380 --> 01:24:10,050\nso when that frame jumps to\nthe other switch it's gonna see\n\n1499\n01:24:10,050 --> 01:24:15,350\nthe attacker's frame first and not\nthe switches frame that was added second.\n\n1500\n01:24:15,350 --> 01:24:18,950\nIt's gonna see the attacker's frame and\nmove them to the other VLAN,\n\n1501\n01:24:18,950 --> 01:24:20,660\nthat VLAN they designated.\n\n1502\n01:24:20,660 --> 01:24:24,330\nSo this port might be hard set to VLAN 10.\n\n1503\n01:24:24,330 --> 01:24:29,530\nBut if the attacker tags\nthemselves as VLAN 1,\n\n1504\n01:24:29,530 --> 01:24:35,090\nit comes over,\nit gets VLAN 10 added as a second tag.\n\n1505\n01:24:35,090 --> 01:24:38,740\nWhen it comes over here,\nthis switch sees VLAN 1.\n\n1506\n01:24:38,740 --> 01:24:40,300\nAnd puts him onto VLAN 1.\n\n1507\n01:24:40,300 --> 01:24:46,070\nNow on a negative, they just sent\ntraffic to a VLAN that they're not on.\n\n1508\n01:24:46,070 --> 01:24:48,940\nOn a positive,\nthey're not gonna get any replies\n\n1509\n01:24:48,940 --> 01:24:53,507\ncuz their replies are gonna be on VLAN\n1 and their port is fiber VLAN 10.\n\n1510\n01:24:53,507 --> 01:24:55,338\nThey won't be able to get a reply.\n\n1511\n01:24:55,338 --> 01:25:00,250\nSo that means this is a limited utility\nhack, that you can only perform\n\n1512\n01:25:00,250 --> 01:25:05,080\nunidirectional attacks which are typically\ngonna be denial of service attacks and\n\n1513\n01:25:05,080 --> 01:25:06,680\nUDP based attacks.\n\n1514\n01:25:06,680 --> 01:25:09,930\nAnd if you've got an intrusion prevention\nsystem in place, these should be picked up\n\n1515\n01:25:09,930 --> 01:25:14,730\nvery very quickly, but if you don't have\nan IPS, if you don't have something like\n\n1516\n01:25:14,730 --> 01:25:18,080\nthat in place, those are real attacks\nthat can be pulled off unidirectionally.\n\n1517\n01:25:19,780 --> 01:25:22,370\nAlright, so,\nhow do we prevent things like this?\n\n1518\n01:25:22,370 --> 01:25:26,355\nWell, fortunately double tagging\nis taken care of for us.\n\n1519\n01:25:26,355 --> 01:25:29,005\nCisco switches actually detect that and\nstop it.\n\n1520\n01:25:29,005 --> 01:25:33,736\nIf they see a frame that's already tagged,\nas least on an access port,\n\n1521\n01:25:33,736 --> 01:25:36,375\nthey expect it on a trunk, but on\nan access port, if they see a frame that's\n\n1522\n01:25:36,375 --> 01:25:40,900\nalready tagged they don't just add\na tag they replace, they swap it out.\n\n1523\n01:25:40,900 --> 01:25:44,320\nSo, they say, don't trust the tag\ncoming from this other system.\n\n1524\n01:25:44,320 --> 01:25:48,670\nUnless it's a CDP Cisco Discovered System,\nit won't trust the tag and\n\n1525\n01:25:48,670 --> 01:25:49,530\nit will replace it.\n\n1526\n01:25:49,530 --> 01:25:50,329\nSo that's good.\n\n1527\n01:25:51,400 --> 01:25:57,050\nBut there are still ways that we can\nunintentionally create an attack.\n\n1528\n01:25:57,050 --> 01:26:02,300\nAttackers may know that the native VLAN,\n\n1529\n01:26:02,300 --> 01:26:07,389\nso every trunk,\nif we run 802.1Q on a switch,\n\n1530\n01:26:08,430 --> 01:26:12,640\nthe trunk that we're building across here,\n802.1Q trunking or\n\n1531\n01:26:12,640 --> 01:26:16,210\nVLAN tagging is the most\npopular form of trunking, and\n\n1532\n01:26:16,210 --> 01:26:19,880\nit assumes that we have a native VLAN,\none VLAN that doesn't get tagged.\n\n1533\n01:26:19,880 --> 01:26:20,670\n>> Right.\n>> Right?\n\n1534\n01:26:20,670 --> 01:26:24,230\nThat will usually be VLAN 1 by default.\n\n1535\n01:26:24,230 --> 01:26:28,040\nAnd what is the management\nVLAN on a switch by default?\n\n1536\n01:26:28,040 --> 01:26:31,198\nVLAN 1, so\nattackers know if I can get on VLAN 1 or\n\n1537\n01:26:31,198 --> 01:26:35,830\nget on this untagged VLAN then we\ncan pull off all sorts of attacks.\n\n1538\n01:26:35,830 --> 01:26:39,435\nAnd one way they can do that is\nIs if they can build a trunk,\n\n1539\n01:26:39,435 --> 01:26:44,945\nthey can start to send untagged frames on\nthat trunk, and it's VLAN1 traffic, right?\n\n1540\n01:26:44,945 --> 01:26:49,385\nOr if they can put a corrupt\ntag on their frame, and\n\n1541\n01:26:49,385 --> 01:26:53,040\nthey send it along,\nthis switch will see it as corrupt and\n\n1542\n01:26:53,040 --> 01:26:57,370\nview it as untagged traffic and\ntrust it as being on VLAN 1, right.\n\n1543\n01:26:57,370 --> 01:26:58,970\nThat's one type of attack.\n\n1544\n01:26:58,970 --> 01:27:03,620\nAnother type of attack is one that we\ncause ourselves, if we have the native\n\n1545\n01:27:03,620 --> 01:27:09,800\nVLAN set to 10 over here and\nthe native VLAN over here set to 1.\n\n1546\n01:27:09,800 --> 01:27:13,590\nWell, if traffic comes along that is\n\n1547\n01:27:13,590 --> 01:27:19,050\nVLAN 10 traffic here, it doesn't get\ntagged cuz that's the native VLAN.\n\n1548\n01:27:19,050 --> 01:27:22,840\nIt comes over here, but\non this end the native VLAN is VLAN 1.\n\n1549\n01:27:22,840 --> 01:27:26,480\nAnd so\nit effectively flips over to VLAN 1 and\n\n1550\n01:27:26,480 --> 01:27:29,320\nthen it gets released onto this\nnetwork on the wrong VLAN.\n\n1551\n01:27:29,320 --> 01:27:31,110\nThat's our mistake, right?\n\n1552\n01:27:31,110 --> 01:27:34,510\nBy setting not the same\nnative VLAN on both sides.\n\n1553\n01:27:34,510 --> 01:27:37,770\nSo, we can easily adjust that and\nwe can manage this and\n\n1554\n01:27:37,770 --> 01:27:41,020\nwe do it through some simple commands.\n\n1555\n01:27:41,020 --> 01:27:45,980\nBasically on your trunk board,\nCisco recommends two things.\n\n1556\n01:27:45,980 --> 01:27:49,500\nNumber one,\nmanually define your native VLAN.\n\n1557\n01:27:49,500 --> 01:27:54,630\nAll right, the native VLAN defaults to\nVLAN 1, don't leave it there, all right?\n\n1558\n01:27:54,630 --> 01:27:56,090\nAnd that's the second part\nof the recommendation.\n\n1559\n01:27:56,090 --> 01:28:01,000\nNumber two,\nset the native VLAN to an unused number.\n\n1560\n01:28:01,000 --> 01:28:04,596\nDon't set it to, you used to set it to\nyour highest traffic VLAN because it\n\n1561\n01:28:04,596 --> 01:28:07,787\nwould improve performance, but\non newer switches, they're so\n\n1562\n01:28:07,787 --> 01:28:11,346\nmuch more advanced that it doesn't\naffect performance at all anymore.\n\n1563\n01:28:11,346 --> 01:28:15,262\nAnd so, we need to set it to an unused\nVLAN, so if a hacker tries to jump to your\n\n1564\n01:28:15,262 --> 01:28:19,332\nuntagged VLAN, they're just jumping\nonto an empty one that's got nothing.\n\n1565\n01:28:19,332 --> 01:28:21,934\nI usually pick 999, right, so\n\n1566\n01:28:21,934 --> 01:28:27,540\nI'll say switchport trunk native\nvlan 999 on that interface.\n\n1567\n01:28:27,540 --> 01:28:31,220\nNow if somebody does manage to jump to it,\nthere's nothing there.\n\n1568\n01:28:31,220 --> 01:28:33,420\nGood luck,\nhave fun with your empty network.\n\n1569\n01:28:33,420 --> 01:28:36,500\nI was reading on a good recommendation\nas well that when you do set this native\n\n1570\n01:28:36,500 --> 01:28:39,980\nVLAN, just make sure you don't\nput any ports on it as well.\n\n1571\n01:28:39,980 --> 01:28:43,674\nAnd that way even if they were able to\ndo something, they get into that VLAN,\n\n1572\n01:28:43,674 --> 01:28:46,210\nthey don't have a path to get out of.\n\n1573\n01:28:46,210 --> 01:28:47,390\nThat's a good idea.\n\n1574\n01:28:47,390 --> 01:28:49,510\nYeah, yeah,\nif you're doing like Layer 3 switching or\n\n1575\n01:28:49,510 --> 01:28:52,240\nrouting, you just wouldn't\nassign a VLAN interface on it.\n\n1576\n01:28:52,240 --> 01:28:53,660\nIt would be completely closed off.\n\n1577\n01:28:53,660 --> 01:28:55,050\nIt's like a black hole, right?\n\n1578\n01:28:56,380 --> 01:29:02,102\nOne thing I will mention is that\nyou'll find people out there that say,\n\n1579\n01:29:02,102 --> 01:29:09,590\nwell, you know what, you can actually\ntell the 802.1q to tag the native VLAN.\n\n1580\n01:29:09,590 --> 01:29:13,758\nYou can run this command right here,\nswitchport trunk native vlan tag.\n\n1581\n01:29:13,758 --> 01:29:19,450\nThat'll tell 802.1q to tag everything,\nto not do untagged traffic.\n\n1582\n01:29:19,450 --> 01:29:24,270\nThat command will trim off\na lot of VLAN attacks, right?\n\n1583\n01:29:24,270 --> 01:29:26,940\nIt'll basically kill off any untagged\nVLAN attack because you won't\n\n1584\n01:29:26,940 --> 01:29:28,320\nhave any untagged VLANs.\n\n1585\n01:29:28,320 --> 01:29:30,880\nRight.\nWell, just like this command above,\n\n1586\n01:29:30,880 --> 01:29:34,870\nyou've got to make sure you do it\non both ends of the cable, right?\n\n1587\n01:29:34,870 --> 01:29:37,970\nSo this is generally something you'll\ndo throughout your entire environment.\n\n1588\n01:29:37,970 --> 01:29:41,970\nBut one thing a lot of people\ndon't know is that if you leave it\n\n1589\n01:29:41,970 --> 01:29:46,640\nwith your native VLAN being VLAN 1,\nand you issue this command right here,\n\n1590\n01:29:46,640 --> 01:29:51,480\na switchboard trunk native vlan tag,\nit will still leave it untagged, okay?\n\n1591\n01:29:51,480 --> 01:29:54,970\nIt's a little unknown thing\na lot of people aren't aware of.\n\n1592\n01:29:54,970 --> 01:29:58,310\nSo you need to follow that\ncommand up with one more thing.\n\n1593\n01:29:58,310 --> 01:30:04,110\nAt the global prompt,\nyou need to say vlan dot1q tag native.\n\n1594\n01:30:04,110 --> 01:30:08,685\nAnd that's gonna force 802.1q to tag\nthe native VLAN even if it is VLAN 1 and\n\n1595\n01:30:08,685 --> 01:30:12,386\neven if it's been pruned off or\nwhatever through allowed VLANs or\n\n1596\n01:30:12,386 --> 01:30:14,289\nwhatever it is gonna take it off.\n\n1597\n01:30:14,289 --> 01:30:18,271\nIt's really a two command command,\na two step command.\n\n1598\n01:30:18,271 --> 01:30:18,874\nThere we go.\n\n1599\n01:30:18,874 --> 01:30:22,477\nSo we want to make sure that first\nwe designate that we want it to tag\n\n1600\n01:30:22,477 --> 01:30:25,228\nthe native VLAN, and\nthen we turn it on globally so\n\n1601\n01:30:25,228 --> 01:30:27,780\nthat it knows to do it across the board.\n\n1602\n01:30:27,780 --> 01:30:29,230\nAll right.\n\n1603\n01:30:29,230 --> 01:30:35,170\nSo that's another way that we can prevent\nthose untagged frames from jumping\n\n1604\n01:30:35,170 --> 01:30:36,230\naround, all right?\n\n1605\n01:30:36,230 --> 01:30:38,010\nSo pretty easy to do.\n\n1606\n01:30:38,010 --> 01:30:40,455\nIn one,\nwe're just restricting what VLANs happen.\n\n1607\n01:30:40,455 --> 01:30:44,350\nIn another, we're saying, all right,\nwe know this is a vulnerable VLAN, so\n\n1608\n01:30:44,350 --> 01:30:46,249\nlet's swap it out with an empty VLAN.\n\n1609\n01:30:46,249 --> 01:30:47,921\nAll right.\n\n1610\n01:30:47,921 --> 01:30:51,660\nAll right, so those are a couple of ones.\n\n1611\n01:30:51,660 --> 01:30:55,210\nAnother one they bring up\nhere is private VLANs.\n\n1612\n01:30:55,210 --> 01:31:00,100\nAnd if you haven't watched it already,\nwe recorded two shows on ACLs.\n\n1613\n01:31:00,100 --> 01:31:04,170\nAnd it was in the ACL part two show that\nwe went into private VLANs in depth, so\n\n1614\n01:31:04,170 --> 01:31:06,460\nwe kind of showed how those work, so\n\n1615\n01:31:06,460 --> 01:31:10,060\nwe're not gonna cover them here because\nwe were pretty thorough last time.\n\n1616\n01:31:10,060 --> 01:31:14,525\nBut private VLANs are another way because\nthey don't use tags the same way.\n\n1617\n01:31:14,525 --> 01:31:18,140\nThey use an extra added layer of\nsecurity to restrict who gets where.\n\n1618\n01:31:18,140 --> 01:31:20,680\nThey're not suitable for LAN use.\n\n1619\n01:31:20,680 --> 01:31:24,060\nThey're really designed for DMZs,\nright, for exposed networks.\n\n1620\n01:31:24,060 --> 01:31:29,169\nAll right, so the only other thing\nthat we really need to talk about,\n\n1621\n01:31:29,169 --> 01:31:33,133\nbecause we kind of talked\nabout most of this already,\n\n1622\n01:31:33,133 --> 01:31:38,790\nis that when we have VLANs, by default,\nthey are isolated from each other.\n\n1623\n01:31:38,790 --> 01:31:40,530\nYou cannot communicate between the VLANs\n\n1624\n01:31:42,110 --> 01:31:46,150\nuntil we set up inter-VLAN routing,\nall right?\n\n1625\n01:31:46,150 --> 01:31:50,370\nAnd then we need to be aware of how we can\nsecure traffic passing through our VLANs,\n\n1626\n01:31:50,370 --> 01:31:54,260\nright, thinking about how our traffic\nmoves from a source to a destination and\n\n1627\n01:31:54,260 --> 01:31:56,650\nhow we can restrict that traffic,\nall right?\n\n1628\n01:31:56,650 --> 01:31:59,150\nSo let me give you guys\nan example of that, and\n\n1629\n01:31:59,150 --> 01:32:01,531\nI think that's the last thing that\nwe need to cover for this one.\n\n1630\n01:32:01,531 --> 01:32:02,360\nYeah.\nSure is.\n\n1631\n01:32:02,360 --> 01:32:04,621\nSo let me get back into\none of my switches here.\n\n1632\n01:32:14,320 --> 01:32:15,980\nI'm gonna just make sure\nthat we are trunking.\n\n1633\n01:32:15,980 --> 01:32:17,059\nGood.\nOkay.\n\n1634\n01:32:17,059 --> 01:32:21,783\nSo I have a switch, and you'll notice all\nthe VLANs that I have, VLAN 1, 10, 20, 30,\n\n1635\n01:32:21,783 --> 01:32:24,165\n40, 50 60, 70, and 999, right?\n\n1636\n01:32:24,165 --> 01:32:26,330\nSo I've got a bunch of VLANs\nthat are sitting there.\n\n1637\n01:32:26,330 --> 01:32:33,560\nWell if I look at my interfaces,\nall right, I've got a VLAN 1 interface.\n\n1638\n01:32:33,560 --> 01:32:37,020\nThat's my management VLAN, and that's it.\n\n1639\n01:32:37,020 --> 01:32:37,560\nOkay.\n\n1640\n01:32:37,560 --> 01:32:40,640\nSo this switch is not doing any routing.\n\n1641\n01:32:40,640 --> 01:32:44,500\nIf I do a show IP route,\nthis is what I expect to see for\n\n1642\n01:32:44,500 --> 01:32:46,685\na switch that's not routing between VLANs.\n\n1643\n01:32:47,930 --> 01:32:51,760\nBut let's say that I was, that I wanted\nto route traffic between these VLANs.\n\n1644\n01:32:51,760 --> 01:32:53,220\nWell that's fine, but\n\n1645\n01:32:53,220 --> 01:32:58,070\nyou lose the security that you gain\nfrom VLANs by routing between them.\n\n1646\n01:32:58,070 --> 01:33:02,135\nWe need to combine routing\nbetween VLANs with ACLs,\n\n1647\n01:33:02,135 --> 01:33:06,310\nright, using access control lists\nto restrict access between them.\n\n1648\n01:33:06,310 --> 01:33:09,820\nSo let me just show you\nguys an example of that.\n\n1649\n01:33:09,820 --> 01:33:18,387\nI had VLAN 10, and so let's say\nthat that's the 192.60.10 network.\n\n1650\n01:33:18,387 --> 01:33:23,239\nAlright, and I'll do VLAN 20, and\nI'll make that the 20 network.\n\n1651\n01:33:23,239 --> 01:33:26,010\nI guess these are up by default,\nso I don't have to do that.\n\n1652\n01:33:27,290 --> 01:33:27,920\nOh, you know what?\n\n1653\n01:33:27,920 --> 01:33:30,820\nI'm not doing my terminal monitor, so\n\n1654\n01:33:30,820 --> 01:33:33,650\nI don't really know if these\nare up by default or not.\n\n1655\n01:33:33,650 --> 01:33:34,834\nI'll just do three of them for now.\n\n1656\n01:33:43,981 --> 01:33:45,142\nOkay.\n\n1657\n01:33:45,142 --> 01:33:45,676\nSo.\n\n1658\n01:33:48,521 --> 01:33:52,869\nSo now I've got these four interfaces,\nright, VLAN 10, VLAN 20,\n\n1659\n01:33:52,869 --> 01:33:57,860\nVLAN 30 in addition to VLAN 1, and\nI just gave them 192.168.10.1,\n\n1660\n01:33:57,860 --> 01:34:00,026\n20.1, and 30.1, right?\n\n1661\n01:34:00,026 --> 01:34:02,570\nEach of them are still separate VLANs.\n\n1662\n01:34:02,570 --> 01:34:05,880\nThis switch just happens to\nhave an interface on all three.\n\n1663\n01:34:05,880 --> 01:34:08,970\nNow on this switch,\nif I look at my routing table,\n\n1664\n01:34:08,970 --> 01:34:13,690\nit's still empty because IP routing is\nturned off on your switch by default.\n\n1665\n01:34:13,690 --> 01:34:19,600\nSo I'm just going to issue the IP routing\ncommand, and once that's done, now I've\n\n1666\n01:34:19,600 --> 01:34:24,438\ngot a routing table, and I am allowing\ntraffic to pass between the VLANs.\n\n1667\n01:34:24,438 --> 01:34:25,113\nRight.\n\n1668\n01:34:25,113 --> 01:34:25,654\nOkay.\n\n1669\n01:34:25,654 --> 01:34:30,680\nIf I stop right here,\nanybody on any one of these VLANs could\n\n1670\n01:34:30,680 --> 01:34:35,240\nset my switch as the default gateway, and\nnow they could access all of the VLANs.\n\n1671\n01:34:35,240 --> 01:34:38,823\nI've lost all the security that I\nhad hoped to get with VLANs, and\n\n1672\n01:34:38,823 --> 01:34:43,142\nthe only thing I've achieved now is to\nlimit the size of my broadcast domains.\n\n1673\n01:34:43,142 --> 01:34:43,839\nRight.\n\n1674\n01:34:43,839 --> 01:34:44,721\nRight?\nAnd that's it.\n\n1675\n01:34:44,721 --> 01:34:46,556\nSo I just lost security by doing this.\n\n1676\n01:34:46,556 --> 01:34:49,899\nBut that doesn't mean we have\nto give up on everything, right?\n\n1677\n01:34:49,899 --> 01:34:53,820\nWe just need to implement security for\nour environment.\n\n1678\n01:34:53,820 --> 01:34:56,950\nWe need to think about how\nwe wanna secure traffic, and\n\n1679\n01:34:56,950 --> 01:34:58,141\nthen we can apply it with ACLs, all right.\n\n1680\n01:34:59,610 --> 01:35:05,420\nSo let's pretend that VLAN\n30 is my server room.\n\n1681\n01:35:05,420 --> 01:35:07,410\nThat's where all my servers are.\n\n1682\n01:35:07,410 --> 01:35:10,550\nAnd so I want to protect VLAN 30.\n\n1683\n01:35:10,550 --> 01:35:15,150\nI don't want people being able to get into\nVLAN 30 except on certain ports to do\n\n1684\n01:35:15,150 --> 01:35:16,180\ncertain things.\n\n1685\n01:35:16,180 --> 01:35:17,030\nAll right.\n\n1686\n01:35:17,030 --> 01:35:24,302\nSo what I can do is I can craft an ACL,\nso I can say like access list 101,\n\n1687\n01:35:24,302 --> 01:35:29,330\npermit tcp any 192.168.30.200.\n\n1688\n01:35:29,330 --> 01:35:31,911\nWe'll say that 30.200 is my web server.\n\n1689\n01:35:31,911 --> 01:35:32,689\nOkay.\n\n1690\n01:35:32,689 --> 01:35:39,770\nSo I'm going to, oh shoot,\nI need to say host.\n\n1691\n01:35:39,770 --> 01:35:40,880\nThere we go.\n\n1692\n01:35:40,880 --> 01:35:45,182\nAll right, so\nI'm going to permit anybody to get to\n\n1693\n01:35:45,182 --> 01:35:51,000\n192.168.30.200 when\nthe destination port is 80.\n\n1694\n01:35:51,000 --> 01:35:53,750\nAnd then I'll add 443, so\n\n1695\n01:35:53,750 --> 01:35:59,800\nthey can get to it securely\nMaybe I've got a web server at 201.\n\n1696\n01:35:59,800 --> 01:36:02,090\nOr an email server.\n\n1697\n01:36:02,090 --> 01:36:03,500\nSo I'll have an email server at 201.\n\n1698\n01:36:03,500 --> 01:36:07,280\nSo I'm going to allow SMTP and POP 3.\n\n1699\n01:36:07,280 --> 01:36:08,480\nDo you remember IMAP?\n\n1700\n01:36:08,480 --> 01:36:10,430\n>> 143.\n>> 143, all right.\n\n1701\n01:36:10,430 --> 01:36:14,350\nSo we'll allow those to the email server.\n\n1702\n01:36:14,350 --> 01:36:19,510\nAnd so on, so I craft this ACL\njust allowing what I want.\n\n1703\n01:36:19,510 --> 01:36:24,920\nIf I stop right here,\nthe hosts that are on the other VLANS\n\n1704\n01:36:24,920 --> 01:36:28,180\nwould be able to pass through this ACL and\n\n1705\n01:36:28,180 --> 01:36:32,520\nbe able to communicate in,\nonly when the traffic matches these ports.\n\n1706\n01:36:34,100 --> 01:36:38,150\nBut I need to think about the direction\nthis traffic is going to flow.\n\n1707\n01:36:38,150 --> 01:36:44,236\nIt's gonna come from VLAN 10,\nit's going to go in the VLAN 10 interface,\n\n1708\n01:36:44,236 --> 01:36:49,750\nit's going to come out the VLAN 30\ninterface and go to my servers.\n\n1709\n01:36:49,750 --> 01:36:54,140\nSo I could apply this as\nincoming on VLAN 10's interface,\n\n1710\n01:36:54,140 --> 01:36:56,940\nbut that's gonna filter other\ntraffic that I don't want.\n\n1711\n01:36:56,940 --> 01:37:02,620\nSo it would be easier to apply this\nas an outgoing ACL on VLAN 30.\n\n1712\n01:37:02,620 --> 01:37:06,270\nLet me draw a picture to try and\nillustrate this a little bit.\n\n1713\n01:37:06,270 --> 01:37:10,100\nSo let's say, for example,\n\n1714\n01:37:10,100 --> 01:37:15,610\nthat the red ports here were VLAN 30,\nmy server VLAN.\n\n1715\n01:37:15,610 --> 01:37:19,500\nAnd the blue ports over here were\nall VLAN 10, my workstation VLAN.\n\n1716\n01:37:20,690 --> 01:37:25,430\nWell my traffic would be going In VLAN 10,\n\n1717\n01:37:25,430 --> 01:37:31,150\njumping to VLAN 30, and coming out VLAN\n30 to get to the server, all right.\n\n1718\n01:37:31,150 --> 01:37:35,510\nSo I could apply it when it comes\nin to the VLAN 10 interface, or\n\n1719\n01:37:35,510 --> 01:37:37,800\nout of the VLAN 30 interface.\n\n1720\n01:37:37,800 --> 01:37:40,990\nIf I do it going in to\nthe VLAN 10 interface,\n\n1721\n01:37:40,990 --> 01:37:42,908\nmy problem is what about VLAN 20?\n\n1722\n01:37:42,908 --> 01:37:45,450\nLet's say these are VLAN 20,\nand VLAN 40 and all those.\n\n1723\n01:37:45,450 --> 01:37:49,630\nIf you're getting it in this interface\nit's going to effect traffic\n\n1724\n01:37:49,630 --> 01:37:51,440\ngoing everywhere.\n\n1725\n01:37:51,440 --> 01:37:53,256\nBut if I just get it out to this one,\n\n1726\n01:37:53,256 --> 01:37:56,342\nthen it will only effect traffic\ngoing to the server room.\n\n1727\n01:37:56,342 --> 01:37:58,410\nIt would be more specific,\ncloser to the destination.\n\n1728\n01:37:58,410 --> 01:38:02,700\nThe closer to the destination,\nthe more specific we can be in this case.\n\n1729\n01:38:02,700 --> 01:38:04,320\nSo I can do that.\n\n1730\n01:38:04,320 --> 01:38:05,920\nThe other thing I need to think about,\nthough,\n\n1731\n01:38:05,920 --> 01:38:09,970\nwhen it comes to direction of traffic,\nis what if my server wants to go out\n\n1732\n01:38:09,970 --> 01:38:15,070\nto the Internet to do a Windows or\nLinux update or whatever, right?\n\n1733\n01:38:15,070 --> 01:38:20,440\nIt's gonna go in the VLAN 30 interface and\nout to the Internet.\n\n1734\n01:38:20,440 --> 01:38:25,560\nAnd the Internet is gonna reply back and\nit's gonna come out this interface also.\n\n1735\n01:38:25,560 --> 01:38:29,980\nWell, the ACL that I wrote is not gonna\nmatch this traffic coming back, so\n\n1736\n01:38:29,980 --> 01:38:34,460\nit's important to add one more\nline to this and say, access-list\n\n1737\n01:38:34,460 --> 01:38:39,594\n101 permit ip any any established.\n\n1738\n01:38:39,594 --> 01:38:46,610\nActually I need to do tcp, because\nudp doesn't do established sessions.\n\n1739\n01:38:46,610 --> 01:38:48,650\nSo we'll do tcp any any established.\n\n1740\n01:38:48,650 --> 01:38:54,680\nAnd that's going to say If we sent the\nrequest out, allow the reply back, okay?\n\n1741\n01:38:54,680 --> 01:38:59,980\nBut otherwise, we'll only allow people to\ninitiate these connections right here.\n\n1742\n01:38:59,980 --> 01:39:03,400\nAnd now I can get into the VLAN\n30 interface where I can say\n\n1743\n01:39:03,400 --> 01:39:06,780\nip access-group 101 out.\n\n1744\n01:39:06,780 --> 01:39:11,920\nAnd now I've created a secure network for\n\n1745\n01:39:11,920 --> 01:39:16,060\nmy server, for my server farm and\nI've restricted it.\n\n1746\n01:39:16,060 --> 01:39:18,970\nVLAN 10 and VLAN 20 can get to VLAN 30,\n\n1747\n01:39:18,970 --> 01:39:23,310\nbut their traffic will pass\nthrough that ACL and get filtered.\n\n1748\n01:39:26,300 --> 01:39:28,430\nAnd so\nthat ACL's going to kick in right there,\n\n1749\n01:39:28,430 --> 01:39:32,080\nwhich is going to limit that traffic and\nmake sure that we're secure.\n\n1750\n01:39:33,280 --> 01:39:37,650\nACLs on switches are not perfect,\nin particular they're not so\n\n1751\n01:39:37,650 --> 01:39:39,120\ngood about tracking state.\n\n1752\n01:39:39,120 --> 01:39:42,320\nSo there are times where they can\nget tricked, it can break things.\n\n1753\n01:39:42,320 --> 01:39:45,210\nI'm not allowing UDP traffic\nto come back in at all.\n\n1754\n01:39:45,210 --> 01:39:48,370\nSo no UDP traffic is gonna\nmake it to the server farm.\n\n1755\n01:39:48,370 --> 01:39:50,400\nSo there's some problems.\n\n1756\n01:39:50,400 --> 01:39:54,670\nYou're always better off using a firewall\nto do this when possible, okay?\n\n1757\n01:39:54,670 --> 01:39:59,000\nSo while layer three routing sounds\nlike a great idea on a switch,\n\n1758\n01:39:59,000 --> 01:40:00,700\nit does create a security problem.\n\n1759\n01:40:00,700 --> 01:40:05,730\nYou are better off using a firewall\nwhen possible or maybe a router\n\n1760\n01:40:05,730 --> 01:40:08,420\nwith firewall functionality,\nbut you take a performance hit.\n\n1761\n01:40:08,420 --> 01:40:10,260\nSo you've really gotta\nevaluate the networks.\n\n1762\n01:40:10,260 --> 01:40:12,390\nHow well do you trust the networks?\n\n1763\n01:40:12,390 --> 01:40:14,540\nIf you trust them enough\nto not worry about routing,\n\n1764\n01:40:14,540 --> 01:40:19,310\nif you're just trying to achieve a smaller\nbroadcast domain, then great, go for it.\n\n1765\n01:40:19,310 --> 01:40:21,740\nBut if you're trying to achieve security,\n\n1766\n01:40:21,740 --> 01:40:24,790\nswitch ACLs like these\nwill only get you so far.\n\n1767\n01:40:24,790 --> 01:40:27,480\nAnd so you'll probably need to\nimplement an ASA or whatever.\n\n1768\n01:40:27,480 --> 01:40:31,448\nAnd if you've got a big 6500 switch,\none of the really expensive ones,\n\n1769\n01:40:31,448 --> 01:40:35,715\nthey make an ASA board that goes right\ninto it that will filter at wire speed.\n\n1770\n01:40:35,715 --> 01:40:38,960\nYou'd have no need to do layer\nthree switching at that point.\n\n1771\n01:40:38,960 --> 01:40:40,000\n>> Right.\n\n1772\n01:40:40,000 --> 01:40:41,340\n>> So keep that in mind.\n\n1773\n01:40:41,340 --> 01:40:43,810\nYou know, that's one of\nthe bigger security concerns.\n\n1774\n01:40:43,810 --> 01:40:47,460\nSo, when they're talking about that,\nconsider traffic source to destination\n\n1775\n01:40:47,460 --> 01:40:51,050\npaths, that's understand where\nwe would apply the ACLs.\n\n1776\n01:40:51,050 --> 01:40:54,070\nWhat interface does the traffic go in,\nwhat interface does it come out?\n\n1777\n01:40:54,070 --> 01:40:58,550\nAnd notice that I apply that ACL to\nthe VLAN interface, not the physical\n\n1778\n01:40:58,550 --> 01:41:03,060\ninterface, on a router, your IP address\nis attached to a physical interface,\n\n1779\n01:41:03,060 --> 01:41:05,400\nthat's why you apply the ACL there.\n\n1780\n01:41:05,400 --> 01:41:09,465\nOn a switch, the IP address is\nattached to the VLAN interface.\n\n1781\n01:41:09,465 --> 01:41:12,420\nThe ACL follows the address.\n\n1782\n01:41:12,420 --> 01:41:13,728\nSo its gotta attach to the VLAN's.\n\n1783\n01:41:13,728 --> 01:41:16,800\nAll right.\n\n1784\n01:41:16,800 --> 01:41:20,050\nRonnie, you know that's-\n>> I think that's it.\n\n1785\n01:41:20,050 --> 01:41:21,930\n>> That's about all i've got on that one,\n\n1786\n01:41:21,930 --> 01:41:23,720\ncan you think of anything\nelse to throw in on VLAN's?\n\n1787\n01:41:23,720 --> 01:41:26,620\n>> I don't think so\n>> This really, for most of you guys,\n\n1788\n01:41:26,620 --> 01:41:29,320\nis probably the third or\nfourth time you've heard our VLAN speech.\n\n1789\n01:41:29,320 --> 01:41:34,190\nCuz we talk about it in our CCENT show, we\ndid it in CCNA routing and switching and\n\n1790\n01:41:34,190 --> 01:41:35,810\nnow we're doing it in CCNA security.\n\n1791\n01:41:35,810 --> 01:41:40,150\nI think we also did it in security\nplus show, so it's a common thing But\n\n1792\n01:41:40,150 --> 01:41:40,880\nit is important.\n\n1793\n01:41:40,880 --> 01:41:42,430\nIt's something we need to be aware of.\n\n1794\n01:41:43,990 --> 01:41:44,840\nAll right.\n\n1795\n01:41:44,840 --> 01:41:48,780\nRonnie, can you think of anything else\nwe need to add before we wrap up?\n\n1796\n01:41:48,780 --> 01:41:50,870\n>> The only last thing,\nI don't know if we really touched on it,\n\n1797\n01:41:50,870 --> 01:41:53,208\nwere the different trunking protocols.\n\n1798\n01:41:53,208 --> 01:41:55,640\nJust the ISL and.\n\n1799\n01:41:55,640 --> 01:41:59,450\n>> Yeah, okay, so\nthey still leave that one on there.\n\n1800\n01:41:59,450 --> 01:42:01,410\nLet me see if the switch\nstill supports it,\n\n1801\n01:42:01,410 --> 01:42:04,970\nbecause a lot of switched don't support\nmultiple trunking protocols anymore.\n\n1802\n01:42:04,970 --> 01:42:09,884\nLet's see, switchport,\ntrunk, encapsulation.\n\n1803\n01:42:12,484 --> 01:42:14,635\nOh, I'm in a VLAN interface.\n\n1804\n01:42:14,635 --> 01:42:16,285\nLet me get into a real interface.\n\n1805\n01:42:22,850 --> 01:42:23,400\nOh it does.\n\n1806\n01:42:23,400 --> 01:42:24,090\nGood.\n>> Sure enough.\n\n1807\n01:42:24,090 --> 01:42:28,588\n>> So this switch right here\nsupports 802.1q and ISL.\n\n1808\n01:42:28,588 --> 01:42:32,470\nISL is Inter-Switch Link, it's the old\nCisco proprietary trunking protocol.\n\n1809\n01:42:33,650 --> 01:42:37,490\nYeah, I kind of know why Cisco's\ngot this in their objectives,\n\n1810\n01:42:37,490 --> 01:42:39,650\nISL doesn't do tagging.\n\n1811\n01:42:39,650 --> 01:42:43,240\nIt doesn't insert a tag inside of a frame.\n\n1812\n01:42:43,240 --> 01:42:45,580\nInstead, it encapsulates it.\n\n1813\n01:42:45,580 --> 01:42:50,330\nWraps up the frame in another frame\nthat has the VLAN information.\n\n1814\n01:42:50,330 --> 01:42:54,130\nAs a result ISL does not use native VLANS.\n\n1815\n01:42:54,130 --> 01:42:54,830\n>> Right.\n\n1816\n01:42:54,830 --> 01:42:56,260\n>> It doesn't have them, right?\n\n1817\n01:42:56,260 --> 01:42:57,540\nEverything is encapsulated.\n\n1818\n01:42:58,700 --> 01:43:02,620\nThe other thing is if you try and\ndouble encapsulate.\n\n1819\n01:43:02,620 --> 01:43:05,450\n>> It doesn't work, cuz now the frame\ndoesn't make any sense and so\n\n1820\n01:43:05,450 --> 01:43:06,950\nit just gets thrown out.\n\n1821\n01:43:06,950 --> 01:43:09,490\nSo, ISL does provide just\n\n1822\n01:43:09,490 --> 01:43:13,600\nout of the box a little bit better\nprotection from some of those attacks.\n\n1823\n01:43:13,600 --> 01:43:16,320\nHowever, it's Cisco proprietary so\n\n1824\n01:43:16,320 --> 01:43:20,650\nyou can use ISL till the cows come home\nif you've got all Cisco equipment.\n\n1825\n01:43:20,650 --> 01:43:26,850\nBut, if you've got HP switches and\nJuniper, 3Com, whoever, Extreme.\n\n1826\n01:43:26,850 --> 01:43:29,790\nIf you've got any of those guys, well,\n>> 1Q\n\n1827\n01:43:29,790 --> 01:43:31,380\n>> ISL's out the door, right?\n\n1828\n01:43:31,380 --> 01:43:32,040\n>> Yeah.\n\n1829\n01:43:32,040 --> 01:43:33,060\n>> So you're gonna use 802.1Q, and\n\n1830\n01:43:33,060 --> 01:43:35,860\neven Cisco switches pretty\nmuch default to 802.1Q.\n\n1831\n01:43:35,860 --> 01:43:38,880\nIf you're doing auto negotiation\nbetween two Cisco switches,\n\n1832\n01:43:38,880 --> 01:43:40,820\nthough, a lot of times they'll end up ISL.\n\n1833\n01:43:40,820 --> 01:43:44,780\nSo just be aware of that, they don't have\nnative VLANs, they're not susceptible to\n\n1834\n01:43:44,780 --> 01:43:47,850\na lot of attacks, so\nyou do get some added security.\n\n1835\n01:43:47,850 --> 01:43:50,700\nIn fact, if we take these two switches,\nlet's see what happens here.\n\n1836\n01:43:53,750 --> 01:43:57,341\nLet me just, I'm gonna connect\nto the other switch first.\n\n1837\n01:44:00,881 --> 01:44:03,007\nSo its interface is hard set.\n\n1838\n01:44:03,007 --> 01:44:04,480\nSo let's fix that.\n\n1839\n01:44:04,480 --> 01:44:10,360\nI will say,\nswitch-port trunk encap negotiate.\n\n1840\n01:44:10,360 --> 01:44:18,495\nAnd it's got, can not be configured\nto negotiate encapsulation, great.\n\n1841\n01:44:18,495 --> 01:44:23,140\nSwitch-port mode,\nit's gonna disconnect me I know already.\n\n1842\n01:44:23,140 --> 01:44:31,520\nI'll go ahead and just set it do dynamic\ndesirable, and so we'll negotiate there,\n\n1843\n01:44:33,000 --> 01:44:36,150\nwhich should be pretty close to\nthe default except auto is the default.\n\n1844\n01:44:36,150 --> 01:44:37,110\nSo all right, so\n\n1845\n01:44:37,110 --> 01:44:42,750\nI've got this port set up to automatically\nnegotiate out to be a trunk, all right.\n\n1846\n01:44:42,750 --> 01:44:45,122\nAnd let me take a look at this one.\n\n1847\n01:44:49,324 --> 01:44:52,410\nAll right so here I'm gonna say\nswitch-port mode dynamic auto.\n\n1848\n01:44:52,410 --> 01:44:55,450\nActually let me shut it down just so\nit doesn't get squirrely on me.\n\n1849\n01:44:55,450 --> 01:45:01,348\nAnd then I'll say switch-port\n\n1850\n01:45:01,348 --> 01:45:06,170\ntrunk end cap negotiate.\n\n1851\n01:45:06,170 --> 01:45:12,800\nSo, a moment ago, I had, well I can\nleave the other things on, that's fine.\n\n1852\n01:45:12,800 --> 01:45:14,300\nThere we go.\n\n1853\n01:45:14,300 --> 01:45:17,140\nSo now, you know we're pretty\nmuch at the defaults on this one.\n\n1854\n01:45:17,140 --> 01:45:22,260\nI've got root guard turned on,\nturn that off and\n\n1855\n01:45:22,260 --> 01:45:24,570\nnow I can do the DHCP snooping trust.\n\n1856\n01:45:28,380 --> 01:45:30,150\nThere we go.\nNow it's completely defaulted.\n\n1857\n01:45:30,150 --> 01:45:34,100\nThe other one the only default is that\nI overrode it to be desirable instead\n\n1858\n01:45:34,100 --> 01:45:34,990\nof auto.\n\n1859\n01:45:34,990 --> 01:45:39,110\nSo this will be a fully negotiated\nconnection when it comes up.\n\n1860\n01:45:39,110 --> 01:45:42,280\nThe two are gonna talk, they're gonna\nrecognize they can build up a trunk and\n\n1861\n01:45:42,280 --> 01:45:43,210\nthey'll do that.\n\n1862\n01:45:43,210 --> 01:45:48,394\nThey'll recognize that they\nsupport ISL and .1Q, and\n\n1863\n01:45:48,394 --> 01:45:54,341\nif I remember correctly it'll\ndefault to ISL, once let's see.\n\n1864\n01:45:54,341 --> 01:45:56,252\nSure enough, negotiated ISL.\n\n1865\n01:45:56,252 --> 01:45:59,840\nSo inner switch link,\nISL is still out there, you still see it.\n\n1866\n01:45:59,840 --> 01:46:03,790\nYou do get a little benefit because you\ndon't have native V land attacks but at\n\n1867\n01:46:03,790 --> 01:46:09,020\nthe end of the day most of us run 802.1Q\nbecause of the multi-vendor support.\n\n1868\n01:46:09,020 --> 01:46:12,960\n>> That was about the last,\nobjective that we had to cover.\n\n1869\n01:46:12,960 --> 01:46:13,510\n>> Excellent.\n\n1870\n01:46:13,510 --> 01:46:14,210\n>> Yeah.\n\n1871\n01:46:14,210 --> 01:46:17,200\n>> All right, well that pretty\nmuch wraps up layer two devices,\n\n1872\n01:46:17,200 --> 01:46:23,340\nnow remember the exam is implementing\nCisco iOS network security,\n\n1873\n01:46:23,340 --> 01:46:28,020\nand iOS, the inter-network operating\nsystem runs on Cisco routers.\n\n1874\n01:46:28,020 --> 01:46:29,280\nAnd switches.\n\n1875\n01:46:29,280 --> 01:46:32,660\nSo while the bulk of this show, and\nthe bulk of the exam objectives,\n\n1876\n01:46:32,660 --> 01:46:37,030\nare based on Cisco routers,\nthis switch stuff shouldn't be overlooked.\n\n1877\n01:46:37,030 --> 01:46:40,400\nIt makes it on the exam, too, but\nit is just this one set of objectives, and\n\n1878\n01:46:40,400 --> 01:46:41,010\nthat's it.\n\n1879\n01:46:41,010 --> 01:46:43,285\nSwitches are people, too.\n\n1880\n01:46:43,285 --> 01:46:47,250\n[LAUGH] We gotta make sure we secure them.\n\n1881\n01:46:47,250 --> 01:46:50,830\nOF course the ASAs turn up on the exam\na bit, and they don't run iOS at all.\n\n1882\n01:46:50,830 --> 01:46:53,700\nWho knows what Cisco wants anymore?\n\n1883\n01:46:53,700 --> 01:46:56,500\nDefinitely be aware for\nthe switches, there's just some\n\n1884\n01:46:56,500 --> 01:47:00,690\nbasic layer two technologies, a lot of\nwhich just we need to know to turn on.\n\n1885\n01:47:02,800 --> 01:47:07,423\nAll right, well, let me just remind you\nguys that if you ever have any questions,\n\n1886\n01:47:07,423 --> 01:47:10,505\nlive during the show,\nyou can go to itpro.tv/live.\n\n1887\n01:47:10,505 --> 01:47:13,610\nRight there, you'll see the live video,\nand beneath it is the chat box.\n\n1888\n01:47:13,610 --> 01:47:14,970\nYou can post your questions.\n\n1889\n01:47:14,970 --> 01:47:16,400\nWe monitor and answer during the show.\n\n1890\n01:47:16,400 --> 01:47:19,900\nIf you have questions after the show,\nlike if you're watching this recorded down\n\n1891\n01:47:19,900 --> 01:47:22,790\nthe road,\nyou can still use the Q&A on our website.\n\n1892\n01:47:22,790 --> 01:47:27,250\nIf you go to itpro.tv at the top of\nevery page is a link that says Q&A.\n\n1893\n01:47:27,250 --> 01:47:30,420\nYou can click on that, it'll take you\nto the questions and answers field, and\n\n1894\n01:47:30,420 --> 01:47:31,780\nyou can post your questions.\n\n1895\n01:47:31,780 --> 01:47:32,780\nWe monitor and answer.\n\n1896\n01:47:34,332 --> 01:47:35,980\nAll right so\nI hope you guys enjoyed the show.\n\n1897\n01:47:35,980 --> 01:47:39,380\nSigning off for ITProTV, I'm Don Pezet\n>> And I'm Ronnie Wong.\n\n1898\n01:47:39,380 --> 01:47:40,877\n>> And we'll see you next time.\n\n1899\n01:47:40,877 --> 01:47:50,877\n[MUSIC]\n\n1900\n01:47:53,037 --> 01:47:53,537\n[SOUND]\n\n",
          "vimeoId": "86417319"
        }
      ],
      "title": "Common Layer 2 Attacks"
    },
    {
      "episodes": [
        {
          "description": "As one striving to achieve the CCNA Security certification, it is important one at least has a basic understanding of how to configure firewalls and Cisco ASA as well as knows the operational strengths and weaknesses of the different firewall technologies. Viewers will hear about different Cisco firewall technologies including different types of firewalls and see the implementation of the Cisco IOS firewall as well as the basic configuration of Cisco ASA.",
          "length": "6552",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/iins/009-Firewall-Technologies.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/iins/009-Firewall-Technologies-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/iins/009-Firewall-Technologies-sm.jpg",
          "title": "Firewall Technologies",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:15,381 --> 00:00:22,744\n[SOUND]\n\n3\n00:00:22,744 --> 00:00:32,744\n[MUSIC]\n\n4\n00:00:34,288 --> 00:00:34,830\nAll right.\n\n5\n00:00:34,830 --> 00:00:37,360\nGood morning, good afternoon, and\ngood evening and welcome back!\n\n6\n00:00:37,360 --> 00:00:40,879\nTo another episode of ITProTV,\nI'm your host Don Pezet, today with Mr.\n\n7\n00:00:40,879 --> 00:00:41,570\nRonnie Wong.\n\n8\n00:00:41,570 --> 00:00:42,350\nHow's it going Ronnie?\n\n9\n00:00:42,350 --> 00:00:43,930\n>> It is going well today.\n\n10\n00:00:43,930 --> 00:00:46,860\nI am doing super today because,\n\n11\n00:00:46,860 --> 00:00:50,560\nonce again, I have now claimed\nmy second Olympic gold medal.\n\n12\n00:00:50,560 --> 00:00:51,130\n>> Have you now?\n\n13\n00:00:51,130 --> 00:00:52,810\n>> Yes.\n>> Which sport were you competing and\n\n14\n00:00:52,810 --> 00:00:54,525\nthis must have happened this weekend,\nright?\n\n15\n00:00:54,525 --> 00:00:56,095\n>> Yes, it did happen this weekend.\n\n16\n00:00:56,095 --> 00:01:00,325\n>> I was competing in the mixed\ndoubles in the ice skating.\n\n17\n00:01:00,325 --> 00:01:02,627\n>> Mixed doubles ice skating?\n\n18\n00:01:02,627 --> 00:01:03,875\n[LAUGH]\n>> [LAUGH]\n\n19\n00:01:03,875 --> 00:01:05,015\n>> Do I even want\n\n20\n00:01:05,015 --> 00:01:07,090\nto ask what song you performed to?\n\n21\n00:01:07,090 --> 00:01:09,360\n>> Some Miley Cyrus hit.\n\n22\n00:01:09,360 --> 00:01:10,480\nI don't know.\n\n23\n00:01:10,480 --> 00:01:11,194\n>> Wrecking Ball.\n\n24\n00:01:11,194 --> 00:01:13,243\n[LAUGH]\n>> That's right.\n\n25\n00:01:13,243 --> 00:01:15,310\nJudges were quite impressed.\n\n26\n00:01:15,310 --> 00:01:17,650\n>> I don't know if that was Miley Cyrus or\nnot, but\n\n27\n00:01:17,650 --> 00:01:20,402\nthat was the only pop song\nI could think of briefly.\n\n28\n00:01:20,402 --> 00:01:23,680\nAll right, so\nbeside absurd non olympic sporting events,\n\n29\n00:01:23,680 --> 00:01:27,510\ntoday we are going to\nbe tackling Cisco IINS.\n\n30\n00:01:27,510 --> 00:01:29,280\nImplementing IINS network security.\n\n31\n00:01:29,280 --> 00:01:31,970\nSo, once again we're gonna be\njumping into the world of router and\n\n32\n00:01:31,970 --> 00:01:34,830\nfirewall security in the Cisco world.\n\n33\n00:01:34,830 --> 00:01:38,150\nWe are gonna deviate a little bit today.\n\n34\n00:01:38,150 --> 00:01:40,680\nIn all of our previous, well.\n\n35\n00:01:40,680 --> 00:01:42,840\nNot all.\nMost of our previous episodes,\n\n36\n00:01:42,840 --> 00:01:44,550\nwe've been dealing with routers, right?\n\n37\n00:01:44,550 --> 00:01:46,410\nImplementing security on routers.\n\n38\n00:01:46,410 --> 00:01:48,030\nWe did spend one episode.\n\n39\n00:01:48,030 --> 00:01:49,500\nWas it the last one?\n\n40\n00:01:49,500 --> 00:01:50,550\nNo I'm switching.\n\n41\n00:01:50,550 --> 00:01:53,070\nSo we did spend one episode\nthat was all switches.\n\n42\n00:01:53,070 --> 00:01:55,934\nToday we're gonna kind\nof head to the fence and\n\n43\n00:01:55,934 --> 00:01:59,839\nwe're going to do some routers and\nsome ACAs, the firewalls.\n\n44\n00:01:59,839 --> 00:02:04,171\n>> For us, these two separate\nproducts are really kind\n\n45\n00:02:04,171 --> 00:02:08,360\nagain developmental\nproducts along the way.\n\n46\n00:02:08,360 --> 00:02:12,360\nWe have firewalls, and then there was\nCisco SA which was an advanced firewall.\n\n47\n00:02:12,360 --> 00:02:17,210\nYou have kind of the Cisco iOS which\nis not kind of the most basic one, but\n\n48\n00:02:17,210 --> 00:02:20,400\nkind of in between the idea\nof like an ASA and\n\n49\n00:02:20,400 --> 00:02:23,140\nkind of the simplest types of\nfirewalls that we can actually work.\n\n50\n00:02:23,140 --> 00:02:26,530\nSo we as CCNAs,\nheading towards our security,\n\n51\n00:02:26,530 --> 00:02:30,080\nwe need to at least know the basic\nunderstanding of how to configure both.\n\n52\n00:02:32,260 --> 00:02:35,630\n>> So Cisco starts off with\na nice general objective for us.\n\n53\n00:02:35,630 --> 00:02:38,670\nWhich is basically stating, there's a\nnumber of types of firewalls that are out\n\n54\n00:02:38,670 --> 00:02:40,680\nthere, let's understand the differences.\n\n55\n00:02:40,680 --> 00:02:43,120\nSo we've got describe\nthe operational strengths and\n\n56\n00:02:43,120 --> 00:02:46,710\nweaknesses of the different firewall\ntechnologies, and they just read all four.\n\n57\n00:02:47,770 --> 00:02:50,300\nThese are firewall technologies that\nhave been around a long time, right.\n\n58\n00:02:50,300 --> 00:02:54,290\nNone of these are new ideas, but when\nyou implement security on your network,\n\n59\n00:02:54,290 --> 00:02:56,450\nyou've got to pick between\nthese four things and\n\n60\n00:02:56,450 --> 00:02:59,519\nfigure out which is going to be the\nsuitable solution for your environment.\n\n61\n00:03:00,930 --> 00:03:02,890\nThe very first one is\nprobably the oldest one.\n\n62\n00:03:02,890 --> 00:03:05,190\nAnd it's what's called a proxy firewall.\n\n63\n00:03:05,190 --> 00:03:09,160\nIn today's world these are fairly rare.\n\n64\n00:03:09,160 --> 00:03:12,710\nMost people just have computers that\nare directly connected to the Internet and\n\n65\n00:03:12,710 --> 00:03:13,480\noff you go.\n\n66\n00:03:13,480 --> 00:03:15,360\nAnd that's it.\n\n67\n00:03:15,360 --> 00:03:17,488\nBut in the old days, in the early days.\n\n68\n00:03:17,488 --> 00:03:21,180\nIn the non-routed protocol days and\nthings like that these were really,\n\n69\n00:03:21,180 --> 00:03:22,310\nreally common.\n\n70\n00:03:22,310 --> 00:03:27,250\nAnd what you basically had was one host\non your network that was allowed to go\n\n71\n00:03:27,250 --> 00:03:31,400\nout to the Internet or some other network,\nbut it was typically the Internet.\n\n72\n00:03:31,400 --> 00:03:33,650\nThis one host was allowed\nto go out to the Internet.\n\n73\n00:03:33,650 --> 00:03:37,220\nIf anybody else on your network\nwanted to go out onto the internet,\n\n74\n00:03:37,220 --> 00:03:40,270\nthey had to reach out and\ntalk to that one host.\n\n75\n00:03:40,270 --> 00:03:42,270\nThat one host was called a proxy.\n\n76\n00:03:42,270 --> 00:03:48,340\nIt would receive connections from the\ninside and then on that person's behalf.\n\n77\n00:03:48,340 --> 00:03:52,620\nThe proxy would then go out to the\nInternet and retrieve whatever document or\n\n78\n00:03:52,620 --> 00:03:54,650\npage or\nwhatever it was that we were asking for.\n\n79\n00:03:54,650 --> 00:03:55,370\nRight?\n\n80\n00:03:55,370 --> 00:03:57,530\nOn a positive side,\n\n81\n00:03:57,530 --> 00:04:00,650\nnone of your internal clients were\ndirectly exposed to the Internet.\n\n82\n00:04:00,650 --> 00:04:04,330\nThe proxy server, that was the only\nthing that was exposed to the Internet.\n\n83\n00:04:04,330 --> 00:04:08,470\nAnd the other thing was, if five\npeople all requested the same page,\n\n84\n00:04:08,470 --> 00:04:13,530\nthe proxy server would get one copy of it\nand then distribute it to all five people,\n\n85\n00:04:13,530 --> 00:04:18,790\nso you reduced your bandwidth, which back\nin the '80s and '90s, that was a big deal.\n\n86\n00:04:18,790 --> 00:04:21,235\n>> Yeah, so offered a bit of better\nperformance at the same time.\n\n87\n00:04:21,235 --> 00:04:22,420\n>> Mm-hm.\n\n88\n00:04:22,420 --> 00:04:26,420\nNow, there is a, so those are good\nthings about a proxy, right?\n\n89\n00:04:26,420 --> 00:04:29,060\nBut there's bad things about a proxy,\nalso, right?\n\n90\n00:04:29,060 --> 00:04:35,323\nThe biggest bad thing, big bad thing,\nwhatever, the worst negative or whatever.\n\n91\n00:04:35,323 --> 00:04:36,910\nThere's no good phrasing for\nthis, is there?\n\n92\n00:04:36,910 --> 00:04:40,100\nThe bad things about proxies,\nthe reason we don't use them so\n\n93\n00:04:40,100 --> 00:04:43,490\nmuch today,\nis that they kill encrypted protocols.\n\n94\n00:04:43,490 --> 00:04:47,660\nIf you send an encrypted session across\nthe Internet, for example, like SSL.\n\n95\n00:04:47,660 --> 00:04:50,940\nYour proxy server can't\ndo that on behalf of you.\n\n96\n00:04:50,940 --> 00:04:52,170\nAnd so it's gonna break it.\n\n97\n00:04:52,170 --> 00:04:53,850\nIt just has to pass it straight through.\n\n98\n00:04:53,850 --> 00:04:56,510\nWhich defeats the purpose\nof having a proxy.\n\n99\n00:04:56,510 --> 00:05:01,340\nWell in this day and age we do\nencrypted communications all the time.\n\n100\n00:05:01,340 --> 00:05:05,950\nSSL, secure FTP,\nVPN technologies, all that stuff.\n\n101\n00:05:05,950 --> 00:05:08,240\nAnd it basically breaks proxies.\n\n102\n00:05:08,240 --> 00:05:11,360\nThere's also some applications\nthat won't work through a proxy,\n\n103\n00:05:11,360 --> 00:05:15,000\nlike a lot of UDP traffic and\nstuff like that, can get hosed up.\n\n104\n00:05:15,000 --> 00:05:19,210\nSo, back in the old days,\nthe simpler days, when it was email and\n\n105\n00:05:19,210 --> 00:05:22,610\nbasic web traffic, proxies were great and\nthey worked really well,\n\n106\n00:05:22,610 --> 00:05:26,500\nToday you really only see them in schools\nthat wanna do Internet filtering, right?\n\n107\n00:05:26,500 --> 00:05:28,860\nThey wanna filter what\nweb site people get to,\n\n108\n00:05:28,860 --> 00:05:32,110\nbut you really don't see\nthem much outside from that.\n\n109\n00:05:32,110 --> 00:05:33,070\n>> Yeah.\n\n110\n00:05:33,070 --> 00:05:36,150\nOur second firewall technology that we\nwant to look at is the idea of what\n\n111\n00:05:36,150 --> 00:05:38,380\nour objectives call is packet.\n\n112\n00:05:38,380 --> 00:05:40,400\nAnd state full packet here.\n\n113\n00:05:40,400 --> 00:05:44,140\nNow on this idea you sometimes\nhear it called static filtering or\n\n114\n00:05:44,140 --> 00:05:45,710\nstatic packet filtering.\n\n115\n00:05:45,710 --> 00:05:48,880\nAnd the idea of state full\npacket filtering here.\n\n116\n00:05:48,880 --> 00:05:52,360\nIn the most basic idea of the firewall,\nright.\n\n117\n00:05:52,360 --> 00:05:55,380\nWe have rules that allow us to\nhave data that goes inbound and\n\n118\n00:05:55,380 --> 00:05:57,430\nthen we can filter out the rest of it.\n\n119\n00:05:57,430 --> 00:06:01,610\nWith the static packet filtering it\nonly really looks at that information.\n\n120\n00:06:01,610 --> 00:06:03,970\nIt doesn't care if there's a connection or\nnot.\n\n121\n00:06:03,970 --> 00:06:07,320\nIt just says, okay, it matches this\nrule according to where it's going,\n\n122\n00:06:07,320 --> 00:06:09,430\nand where it's from at times.\n\n123\n00:06:09,430 --> 00:06:10,850\nBut, it doesn't do anything else.\n\n124\n00:06:10,850 --> 00:06:13,820\nSo, when you actually have something\nlike that, it really does work.\n\n125\n00:06:13,820 --> 00:06:16,370\nOur ACLs simply kind of do that thing.\n\n126\n00:06:16,370 --> 00:06:20,750\nBut, at the same time, it doesn't work\nas efficiently as it needs to, nor\n\n127\n00:06:20,750 --> 00:06:22,280\nas well as it can.\n\n128\n00:06:22,280 --> 00:06:25,370\nBesides the idea of the staple.\n\n129\n00:06:25,370 --> 00:06:26,685\nI couldn't remember what I was gonna say.\n\n130\n00:06:26,685 --> 00:06:27,720\n[LAUGH]\n>> And you know Ronnie,\n\n131\n00:06:27,720 --> 00:06:28,340\nyou mentioned ACLs.\n\n132\n00:06:28,340 --> 00:06:31,740\nFor those of you that have already watched\nthe ACL episode, which I think was two or\n\n133\n00:06:31,740 --> 00:06:33,280\nthree episodes ago.\n\n134\n00:06:33,280 --> 00:06:38,080\nWe talked about ACLs and\nhow you can use them as a firewall.\n\n135\n00:06:38,080 --> 00:06:41,510\nBut they had that big glaring\nproblem that they don't track state.\n\n136\n00:06:41,510 --> 00:06:43,660\nSo let me just bring up this diagram here.\n\n137\n00:06:43,660 --> 00:06:50,050\nA packet firewall is simply a firewall\nthat is looking at packets and based\n\n138\n00:06:50,050 --> 00:06:54,530\non the merit of that one packet, deciding\nwether it should get through or not.\n\n139\n00:06:54,530 --> 00:06:57,740\nA staple firewall is one\nthat looks at a packet and\n\n140\n00:06:57,740 --> 00:07:00,440\nbased not just on the merits\nof that one packet.\n\n141\n00:07:00,440 --> 00:07:04,980\nBut the conversation tied around that\npacket whether or not we allow it through.\n\n142\n00:07:04,980 --> 00:07:05,550\nAll right.\n\n143\n00:07:05,550 --> 00:07:09,950\nSo an example would be like if I'm using,\nlet's say I'm using routers okay.\n\n144\n00:07:09,950 --> 00:07:12,150\nSo I'm using these routers right here.\n\n145\n00:07:12,150 --> 00:07:19,040\nAnd I have a ACL applied on router A and\nI've got this ACL applied right here.\n\n146\n00:07:19,040 --> 00:07:24,310\nAnd I basically say that\nanybody on my inside network\n\n147\n00:07:24,310 --> 00:07:26,160\nis allowed to get out to the Internet.\n\n148\n00:07:26,160 --> 00:07:30,770\nSo, somebody here on the private network\nis allowed to get out to the Internet.\n\n149\n00:07:30,770 --> 00:07:34,910\nBut, then nobody on the Internet\nis allowed to get back in, right?\n\n150\n00:07:34,910 --> 00:07:37,930\nWe don't want anybody on the Internet\ngetting inside my network.\n\n151\n00:07:37,930 --> 00:07:41,290\nWell the problem is when somebody\nfrom the private network goes out,\n\n152\n00:07:41,290 --> 00:07:44,880\nthat host on the outside has to reply.\n\n153\n00:07:44,880 --> 00:07:49,970\nAnd if I'm just doing a packet firewall,\nwhen that reply comes back.\n\n154\n00:07:49,970 --> 00:07:53,375\nIts gonna get blocked,\nit's not gonna be allowed to pass through.\n\n155\n00:07:53,375 --> 00:07:54,847\nWe're never gonna get the reply,\n\n156\n00:07:54,847 --> 00:07:58,675\ncommunications are effectively broken cuz\nwe create a unidirectional communication.\n\n157\n00:07:58,675 --> 00:07:59,545\n>> Right.\n\n158\n00:07:59,545 --> 00:08:03,545\n>> So, in a packet firewall you\nhave to create two sets of rules.\n\n159\n00:08:03,545 --> 00:08:07,585\nOne set of rules for outgoing traffic and\nanother set of rules for incoming traffic.\n\n160\n00:08:07,585 --> 00:08:09,875\nYou gotta do your work twice.\n\n161\n00:08:09,875 --> 00:08:13,853\nA stateful firewall,\non the other hand, says, all right,\n\n162\n00:08:13,853 --> 00:08:18,221\nI'm not gonna allow anybody from\nthe internet to come back in, but\n\n163\n00:08:18,221 --> 00:08:22,901\nwhen it sees this connection from our\nprivate LAN go out to the outside,\n\n164\n00:08:22,901 --> 00:08:27,360\nwhen it sees that happen,\nIt expects a reply to come back.\n\n165\n00:08:27,360 --> 00:08:30,530\nAnd it matches that reply with\nthe communication that went out in\n\n166\n00:08:30,530 --> 00:08:31,180\nthe first place.\n\n167\n00:08:31,180 --> 00:08:34,510\nAnd it says, oh, this is a reply\nto something I allowed earlier.\n\n168\n00:08:34,510 --> 00:08:36,520\nI'll let it pass through.\n\n169\n00:08:36,520 --> 00:08:41,080\nAnd it does that by tracking the state\nof every communication we make.\n\n170\n00:08:41,080 --> 00:08:42,200\nWe open a state.\n\n171\n00:08:42,200 --> 00:08:43,820\nWe open a session when we reach out.\n\n172\n00:08:43,820 --> 00:08:47,260\nAnd the firewall will automatically\nallow the replies to it.\n\n173\n00:08:47,260 --> 00:08:49,050\n>> Yeah.\nAnd this really helps us because it\n\n174\n00:08:49,050 --> 00:08:51,140\nmeans also from the outside\non the internet, right?\n\n175\n00:08:51,140 --> 00:08:52,930\nIf traffic originates from out there,\n\n176\n00:08:52,930 --> 00:08:56,110\nwe don't have to set up another\ndefault rule to block it.\n\n177\n00:08:57,480 --> 00:09:01,130\nAs long as it actually came from\nthe inside out then we're okay.\n\n178\n00:09:01,130 --> 00:09:04,930\nIf it starts from the outside going in,\nthen it blocks it for us and\n\n179\n00:09:04,930 --> 00:09:06,490\nagain much more efficient.\n\n180\n00:09:06,490 --> 00:09:09,370\nIt helps us out with again not\nhaving to configure as many rules.\n\n181\n00:09:09,370 --> 00:09:11,820\nSo, less administrative effort overall.\n\n182\n00:09:11,820 --> 00:09:12,460\n>> Yeah.\n\n183\n00:09:12,460 --> 00:09:15,040\nAbsolutely, and\nit's pretty much a given these days.\n\n184\n00:09:15,040 --> 00:09:15,760\n>> Yeah.\n>> That if you're going\n\n185\n00:09:15,760 --> 00:09:18,510\nimplement a firewall it's going\nto be a stateful firewall.\n\n186\n00:09:18,510 --> 00:09:23,965\nBut if you're trying to force a Cisco\nrouter to be a firewall using just\n\n187\n00:09:23,965 --> 00:09:29,740\nACLs you're effectively a packet\nfilter and not a stateful firewall.\n\n188\n00:09:29,740 --> 00:09:32,760\nAnd it can work, but\nit does take a lot of juggling.\n\n189\n00:09:32,760 --> 00:09:35,010\nThere's a lot of tricky\nprotocols out there.\n\n190\n00:09:35,010 --> 00:09:38,510\nSome protocols that start as TCP and\nflip to UDP and so on,\n\n191\n00:09:38,510 --> 00:09:41,700\nit's really difficult to write\nthe rules to be able to match that.\n\n192\n00:09:41,700 --> 00:09:43,620\nFTP is a particular challenge.\n\n193\n00:09:43,620 --> 00:09:44,810\nDNS can be.\n\n194\n00:09:44,810 --> 00:09:48,480\nThere's some other protocols too\nthat we have to really tweak and\n\n195\n00:09:48,480 --> 00:09:50,620\nwork with to get them going smooth.\n\n196\n00:09:50,620 --> 00:09:51,120\n>> Right.\n\n197\n00:09:52,160 --> 00:09:57,000\nAll right, so that takes care of proxy and\npacket and stateful firewalls.\n\n198\n00:09:57,000 --> 00:09:57,860\nWhat's next on the list?\n\n199\n00:09:57,860 --> 00:09:59,870\n>> It looks like\napplication firewalls here.\n\n200\n00:09:59,870 --> 00:10:01,020\n>> Application firewalls.\n\n201\n00:10:01,020 --> 00:10:07,270\nNow, I mentioned that certain\nprotocols like FTP are pretty tricky.\n\n202\n00:10:07,270 --> 00:10:13,180\nThat, when they go out, like FTP will\nbuild a session using TCP on port 21.\n\n203\n00:10:13,180 --> 00:10:16,930\nBut when it goes to transfer a file,\na lot of times it uses passive mode, and\n\n204\n00:10:16,930 --> 00:10:21,000\nit'll do UDP transfers\non a random port number.\n\n205\n00:10:21,000 --> 00:10:22,282\nWe don't know what.\n\n206\n00:10:22,282 --> 00:10:23,020\nOkay.\nSo\n\n207\n00:10:23,020 --> 00:10:24,660\nreally frustrating to be able to try and\n\n208\n00:10:24,660 --> 00:10:29,480\nallow that through a firewall if you\ndon't know what port it's going to pick.\n\n209\n00:10:29,480 --> 00:10:32,160\nSo a application gateway.\n\n210\n00:10:32,160 --> 00:10:33,990\nThere's a few different terms here, right.\n\n211\n00:10:33,990 --> 00:10:37,650\nSo in a lot of the Cisco books you'll\nsee where they call it an ASG,\n\n212\n00:10:37,650 --> 00:10:39,670\nan applications services gateway.\n\n213\n00:10:39,670 --> 00:10:42,940\nIn the objectives they just call\nit an application firewall.\n\n214\n00:10:42,940 --> 00:10:46,770\nBut it's a firewall that\nhas special rules in it,\n\n215\n00:10:46,770 --> 00:10:49,680\nwritten to recognize that kind of traffic.\n\n216\n00:10:49,680 --> 00:10:53,790\nAnd oftentimes they have to look further\ninto the packet than they normally would.\n\n217\n00:10:54,840 --> 00:10:58,530\nSo, let me see if I\ncould do a FTP example.\n\n218\n00:10:58,530 --> 00:10:59,450\nI'm trying\n\n219\n00:11:01,200 --> 00:11:05,360\nto think if I know of an exposed FTP\nserver out there that I could use.\n\n220\n00:11:05,360 --> 00:11:12,030\nIf I FTP to,\nlet me see if old cdrom.com is still up.\n\n221\n00:11:12,030 --> 00:11:13,410\nNope.\n>> You could do dell.com.\n\n222\n00:11:13,410 --> 00:11:14,860\n>> Oh, that's right.\n\n223\n00:11:14,860 --> 00:11:17,390\nIt's like support.dell.com or\nsomething, isn't it?\n\n224\n00:11:17,390 --> 00:11:18,830\n>> I think they just used to be.\n\n225\n00:11:18,830 --> 00:11:20,915\n>> Do you think it's just dell.com?\n\n226\n00:11:20,915 --> 00:11:21,440\n>> Yeah, I think it is.\n\n227\n00:11:21,440 --> 00:11:22,820\nI think it's ftp.dell.com.\n\n228\n00:11:22,820 --> 00:11:26,998\n>> Let's try that and\nwe'll see if they support passive mode.\n\n229\n00:11:26,998 --> 00:11:28,732\n[LAUGH]\n>> Oh, nope.\n\n230\n00:11:28,732 --> 00:11:31,780\n[CROSSTALK]\n>> I'm just not going to get out.\n\n231\n00:11:31,780 --> 00:11:36,650\nSo anyhow, the way it works,\nif we FTP into a passive server, you open\n\n232\n00:11:36,650 --> 00:11:41,210\na session and you send a user name and\na password and now your session is up.\n\n233\n00:11:41,210 --> 00:11:44,970\nAnd when you go to request a file\nyou send a message that says\n\n234\n00:11:44,970 --> 00:11:48,750\nplease give me this file and\nsend it on this port number.\n\n235\n00:11:48,750 --> 00:11:52,580\nSo you're actually communicating\nthat in the data of your session,\n\n236\n00:11:52,580 --> 00:11:55,560\nyou're saying,\nhey send it to me on this port number.\n\n237\n00:11:55,560 --> 00:11:57,700\nAnd the server will then\nreply on this port number.\n\n238\n00:11:57,700 --> 00:12:01,890\nNow, that's the first time that\nit's talked using that port number.\n\n239\n00:12:01,890 --> 00:12:04,490\nSo the communication coming into\nyour firewall is going to look like\n\n240\n00:12:04,490 --> 00:12:07,040\na brand new communication, not a reply.\n\n241\n00:12:07,040 --> 00:12:09,350\nAnd a stateful firewall will block it,\nit won't pick that up.\n\n242\n00:12:09,350 --> 00:12:11,500\n>> Right.\n>> And it will stop it.\n\n243\n00:12:11,500 --> 00:12:15,090\nAlright.\nBut an application firewall, will say, oh,\n\n244\n00:12:15,090 --> 00:12:15,940\nyou're doing FTP.\n\n245\n00:12:15,940 --> 00:12:18,940\nLet me watch every frame or\n\n246\n00:12:18,940 --> 00:12:23,840\npacket that you send and I'm gonna\nlook for when you issue a get command.\n\n247\n00:12:23,840 --> 00:12:25,260\nAnd when you issue a get command,\n\n248\n00:12:25,260 --> 00:12:28,312\nI'm gonna look at the end of that\nto see what port number you picked.\n\n249\n00:12:28,312 --> 00:12:31,250\nAnd then based on that,\nI'll create a temporary rule\n\n250\n00:12:31,250 --> 00:12:34,720\nallowing that external host to talk\non that port number to come through.\n\n251\n00:12:34,720 --> 00:12:36,650\nBut in order to do that, it had to.\n\n252\n00:12:36,650 --> 00:12:39,240\nOne, it had to know to look for\nthat and then,\n\n253\n00:12:39,240 --> 00:12:43,540\ntwo it had to code the packet all\nthe way down to the payload level.\n\n254\n00:12:43,540 --> 00:12:46,840\nGet that command and\nthen create a temporary rule allowing it.\n\n255\n00:12:46,840 --> 00:12:50,790\nThat's advanced stuff and FTP, SIP.\n\n256\n00:12:50,790 --> 00:12:52,370\nRight?\nIf you're doing voiceover IP,\n\n257\n00:12:52,370 --> 00:12:55,100\nthese are great examples where,\n\n258\n00:12:55,100 --> 00:13:00,260\nSIP a lot of times will set up a session\non TCP port 5650 and then after that,\n\n259\n00:13:00,260 --> 00:13:05,460\nyour actual voice call happens on\na UDP port that can be anything.\n\n260\n00:13:05,460 --> 00:13:07,250\nSo those are really tricky and\n\n261\n00:13:07,250 --> 00:13:09,910\nan application gateway is\ndesigned to handle that.\n\n262\n00:13:09,910 --> 00:13:14,950\n>> Now Don let me ask a question here,\nlike for an example for us in our email.\n\n263\n00:13:14,950 --> 00:13:20,850\n>> We have a Barracuda which is\na type of filter or firewall.\n\n264\n00:13:20,850 --> 00:13:24,020\nWould that be the same as an application\nfirewall, or would that not be?\n\n265\n00:13:24,020 --> 00:13:26,710\nIt is, it is and it isn't okay?\n\n266\n00:13:26,710 --> 00:13:28,460\n>> Right.\n>> So this is where it gets kind of.\n\n267\n00:13:28,460 --> 00:13:30,060\n>> Yeah.\n>> Triicky right?\n\n268\n00:13:30,060 --> 00:13:34,540\nNobody, we have this Barracuda\nanti-spam and virus firewall.\n\n269\n00:13:34,540 --> 00:13:37,130\nThat's what they call a firewall.\n\n270\n00:13:37,130 --> 00:13:38,890\nIt's more like a proxy, in a way,\n\n271\n00:13:38,890 --> 00:13:41,840\nnobody actually communicates\nthrough that firewall.\n\n272\n00:13:41,840 --> 00:13:45,230\nStuff is destined for\nthat firewall, as an endpoint.\n\n273\n00:13:45,230 --> 00:13:48,760\nAnd then it filters through the emails and\nlooks for viruses, looks for\n\n274\n00:13:48,760 --> 00:13:51,710\ninappropriate activity and then\nwhether it's allowed to communicate or\n\n275\n00:13:51,710 --> 00:13:53,670\nnot, it then forwards it along.\n\n276\n00:13:53,670 --> 00:13:58,340\nBut, when we think of a firewall,\nit's typically something we pass through.\n\n277\n00:13:58,340 --> 00:14:02,010\nWith the Barracuda box we have\nit's actually an endpoint and\n\n278\n00:14:02,010 --> 00:14:04,925\nso it is in a way.\n\n279\n00:14:04,925 --> 00:14:07,900\n>> It's an endpoint that is\neffectively running its own firewall.\n\n280\n00:14:07,900 --> 00:14:10,180\n>> Okay.\n>> So its kinda more than one thing.\n\n281\n00:14:10,180 --> 00:14:12,720\nAnd guys this is how it really is.\n\n282\n00:14:12,720 --> 00:14:14,310\n>> Yeah.\n>> That's Cisco draws these four\n\n283\n00:14:14,310 --> 00:14:17,210\ncategories, but man there are just so\n\n284\n00:14:17,210 --> 00:14:21,245\nmany technologies out there\nthat kind of blend the lines.\n\n285\n00:14:21,245 --> 00:14:23,755\nLet me show you guys something.\n\n286\n00:14:23,755 --> 00:14:24,913\nSwitch over to mine.\n\n287\n00:14:24,913 --> 00:14:27,885\nSo it's ftp.dell.com.\n\n288\n00:14:27,885 --> 00:14:32,165\nSo I connected to Dell and\nI just did a user name and a password and\n\n289\n00:14:32,165 --> 00:14:33,030\nI just got in.\n\n290\n00:14:33,030 --> 00:14:35,870\n>> And I issued an ls command,\njust to pull up a directory listing, and\n\n291\n00:14:35,870 --> 00:14:39,760\nas soon as I did it,\nI got a Windows security alert.\n\n292\n00:14:39,760 --> 00:14:41,370\nNow I'm already connected.\n\n293\n00:14:41,370 --> 00:14:43,290\nWhy is the Windows Firewall bothering me?\n\n294\n00:14:43,290 --> 00:14:46,434\nAnd that's because Windows says,\noh, you're about to FTP.\n\n295\n00:14:46,434 --> 00:14:50,870\nWell, they're going to communicate\nback on a random port.\n\n296\n00:14:50,870 --> 00:14:52,410\nWe need to allow that to happen.\n\n297\n00:14:52,410 --> 00:14:56,920\nWhen I allow that access,\nit's allowing me to listen for that port.\n\n298\n00:14:56,920 --> 00:14:58,740\nI'm waiting for\nthat connection to come back.\n\n299\n00:14:58,740 --> 00:15:01,850\nI probably waited too long and\nit's probably going to die out.\n\n300\n00:15:01,850 --> 00:15:04,570\nWhich means I should probably\ncancel it and try again.\n\n301\n00:15:04,570 --> 00:15:07,614\nLet me just reconnect here.\n\n302\n00:15:11,576 --> 00:15:14,810\nAll right, so now I'm logged in and\nI'll do a directory listing.\n\n303\n00:15:14,810 --> 00:15:17,920\nSo now I get my nice directory listing,\nwhich is.\n\n304\n00:15:17,920 --> 00:15:18,490\n>> A lot.\n\n305\n00:15:18,490 --> 00:15:20,745\n>> Apparently,\nthere's a few folders in here, Ronnie.\n\n306\n00:15:20,745 --> 00:15:23,130\n>> [LAUGH] There's a lot\nof folders in that one.\n\n307\n00:15:23,130 --> 00:15:25,980\n>> Do they have a folder for every single-\n>> Yes.\n\n308\n00:15:25,980 --> 00:15:27,550\n>> Laptop they've ever sold or something.\n\n309\n00:15:27,550 --> 00:15:28,780\n>> Yes they do.\n\n310\n00:15:28,780 --> 00:15:29,650\nEvery server, every laptop-\n>> Wow,\n\n311\n00:15:29,650 --> 00:15:31,440\nthis is just going to rattle on forever,\nisn't it?\n\n312\n00:15:31,440 --> 00:15:32,160\n>> It is.\n\n313\n00:15:32,160 --> 00:15:32,800\nHoly moly.\n\n314\n00:15:34,670 --> 00:15:37,680\nWell, let's just change into some\ndirectory where I can find a file.\n\n315\n00:15:37,680 --> 00:15:41,110\nSome directory that isn't like\nten thousand folders long.\n\n316\n00:15:41,110 --> 00:15:41,978\nThat was effective.\n\n317\n00:15:41,978 --> 00:15:44,590\n[LAUGH] Alright, so here we go.\n\n318\n00:15:44,590 --> 00:15:46,500\nSo when we go to get a file.\n\n319\n00:15:46,500 --> 00:15:51,541\nLike if I switched to binary\nmode to get a file and\n\n320\n00:15:51,541 --> 00:15:55,583\nlet me just, see how big that file is.\n\n321\n00:15:58,833 --> 00:15:59,793\nWell.\n>> Wow.\n\n322\n00:15:59,793 --> 00:16:01,173\n>> Yeah, that kind of, yeah.\n\n323\n00:16:01,173 --> 00:16:04,660\nSo [LAUGH] anyhow,\nI was gonna try and get the file.\n\n324\n00:16:04,660 --> 00:16:08,130\nAnd when you get the file, a lot of\ntimes you'll see the pass v command, or\n\n325\n00:16:08,130 --> 00:16:11,750\nthe passive command,\nthat will list that port to use, right?\n\n326\n00:16:11,750 --> 00:16:15,130\nAnd so,\nsee this 200 port command successful?\n\n327\n00:16:15,130 --> 00:16:17,530\nThat's me telling it, hey,\ngive me a directory listing and\n\n328\n00:16:17,530 --> 00:16:19,590\nsend it on this other port.\n\n329\n00:16:19,590 --> 00:16:21,600\nThat's why we have that port command.\n\n330\n00:16:21,600 --> 00:16:27,310\nIn fact, if I do a question mark, we\nshould be able to find the port command.\n\n331\n00:16:27,310 --> 00:16:31,280\nThey don't show it in here, do they?\n\n332\n00:16:31,280 --> 00:16:33,540\nYeah, that's the extensive,\nget help there, all right.\n\n333\n00:16:33,540 --> 00:16:36,590\nWell, I wonder if we put it in verbose.\n\n334\n00:16:36,590 --> 00:16:39,200\nOh, I was already in verbose mode,\nand that's all it was giving me.\n\n335\n00:16:39,200 --> 00:16:41,748\nWell, anyhow the point is, you guys\ncan see there's other ports are used.\n\n336\n00:16:41,748 --> 00:16:46,756\nSo, application gateways take that into\naccount and they allow us to basically\n\n337\n00:16:46,756 --> 00:16:51,256\nparticipate in these communications\nthat would normally be blocked.\n\n338\n00:16:51,256 --> 00:16:54,486\nAll right,\nour last one is my favorite, right?\n\n339\n00:16:54,486 --> 00:16:56,679\nI was making fun of it before the show,\nwhich the personal firewall.\n\n340\n00:16:56,679 --> 00:16:58,307\n>> The personal pan firewall.\n\n341\n00:16:58,307 --> 00:16:59,138\n>> The personal pan pizza.\n\n342\n00:16:59,138 --> 00:17:02,700\n>> [LAUGH]\n>> So, the personal firewall,\n\n343\n00:17:02,700 --> 00:17:06,197\nthat's probably the most common\nof the ones here on the list, and\n\n344\n00:17:06,197 --> 00:17:09,260\nthat's a firewall that you\nrun directly on your system.\n\n345\n00:17:10,550 --> 00:17:12,630\nNow, a lot of times these\nare called by another name.\n\n346\n00:17:12,630 --> 00:17:17,305\nThey can be called hips or hosts,\nbased, I guess it's host dash based.\n\n347\n00:17:17,305 --> 00:17:22,720\nHost-based intrusion prevention system,\nand usually it's the anti-virus,\n\n348\n00:17:22,720 --> 00:17:27,410\nanti-malware software firewall that\nruns on your own operating system.\n\n349\n00:17:28,530 --> 00:17:30,570\nAlmost all Linux distros have it.\n\n350\n00:17:30,570 --> 00:17:33,270\nUsually it's IP tables, or whatever.\n\n351\n00:17:33,270 --> 00:17:36,120\nOSX has it, I think it uses pf.\n\n352\n00:17:36,120 --> 00:17:40,230\nAnd Windows has Windows firewall or\nWindows Defender,\n\n353\n00:17:40,230 --> 00:17:41,960\nkind of all combined these days.\n\n354\n00:17:41,960 --> 00:17:45,210\nSo a lot of our operation\nsystems have it built in.\n\n355\n00:17:45,210 --> 00:17:46,170\nThese are effective,\n\n356\n00:17:46,170 --> 00:17:48,970\nthey run right on your machine,\nyou saw mine trigger a minute ago.\n\n357\n00:17:50,010 --> 00:17:53,090\nThe only problem with them,\nis that if an attacker is\n\n358\n00:17:53,090 --> 00:17:54,600\nhitting that firewall-\n>> They're right there.\n\n359\n00:17:54,600 --> 00:17:57,700\n>> That means they've all ready\nmade it to your computer, so\n\n360\n00:17:57,700 --> 00:18:02,190\nyou are now the last line of defense and\nif that software firewall breaks, for\n\n361\n00:18:02,190 --> 00:18:06,132\nwhatever reason, then you're done.\n\n362\n00:18:06,132 --> 00:18:09,145\n>> So this particular last\ntype of firewall really does,\n\n363\n00:18:09,145 --> 00:18:13,665\nat least is supposed to be, where they've\nalready gotten through your perimeter\n\n364\n00:18:13,665 --> 00:18:18,069\nfirewall, that this is what actually what\nshould stop them even at this level.\n\n365\n00:18:18,069 --> 00:18:19,860\n>> Yep, yep.\n\n366\n00:18:19,860 --> 00:18:22,770\nAll right, so those are some of the types\nof firewalls that are out there.\n\n367\n00:18:22,770 --> 00:18:27,460\nNow, we're gonna talk a little bit about\nusing a Cisco router as a firewall.\n\n368\n00:18:27,460 --> 00:18:29,000\nI kind of already talked about that.\n\n369\n00:18:29,000 --> 00:18:31,130\nAnd we're gonna talk about\nusing a Cisco ASA, so\n\n370\n00:18:31,130 --> 00:18:33,660\nwhere do they fall in these objectives?\n\n371\n00:18:33,660 --> 00:18:36,430\nWell, the Cisco routers,\n\n372\n00:18:36,430 --> 00:18:41,900\nif you just have the base\nIP services iOS on there,\n\n373\n00:18:41,900 --> 00:18:46,810\nthen they can act as a packet firewall and\nif you're\n\n374\n00:18:46,810 --> 00:18:51,170\nusing established connections, they can\nsort of act as staple packet firewalls.\n\n375\n00:18:51,170 --> 00:18:54,550\nBut, they're not truly, truly staple.\n\n376\n00:18:54,550 --> 00:18:59,140\nIf you install the firewall feature set or\nbuy that firewall license for\n\n377\n00:18:59,140 --> 00:19:03,390\nyour router, then it can be\na true staple packet filter,\n\n378\n00:19:03,390 --> 00:19:05,580\nas well as an application firewall.\n\n379\n00:19:05,580 --> 00:19:10,050\nIt can go even deeper into those packets\nwhen you have the firewall feature set.\n\n380\n00:19:11,110 --> 00:19:11,895\nAll right.\n\n381\n00:19:11,895 --> 00:19:14,750\nAnd ASA, on the other hand,\nright out of the box,\n\n382\n00:19:14,750 --> 00:19:19,270\nan ASA is a staple packet filter and\nan application firewall.\n\n383\n00:19:19,270 --> 00:19:22,280\nIt also has support for\nbasic proxy functionality,\n\n384\n00:19:22,280 --> 00:19:23,990\nalthough I don't recommend using it.\n\n385\n00:19:23,990 --> 00:19:26,080\nIt does have it.\n\n386\n00:19:26,080 --> 00:19:28,690\nSo, it kinda falls into\nall of these models, and\n\n387\n00:19:28,690 --> 00:19:31,370\nthat goes back to something I\nsaid earlier in the series,\n\n388\n00:19:31,370 --> 00:19:36,900\nwhich is the ASA they are designed\nas security devices from day one,\n\n389\n00:19:36,900 --> 00:19:42,350\nversus your router where it's more\nlike an add-on functionality.\n\n390\n00:19:42,350 --> 00:19:46,790\nAll right, and then as far a personal\nfirewall, just to mention it here,\n\n391\n00:19:46,790 --> 00:19:51,530\nCisco does actually make a personal\nfirewall, shoot, what is it called Ronnie?\n\n392\n00:19:51,530 --> 00:19:54,660\nThe Cisco Clean Agent,\nsomething like that.\n\n393\n00:19:54,660 --> 00:19:56,490\nDo you remember?\n\n394\n00:19:56,490 --> 00:19:57,360\n>> No I don't remember.\n\n395\n00:19:57,360 --> 00:19:58,940\n>> It's-\n>> Access Agent.\n\n396\n00:19:58,940 --> 00:20:01,330\n>> No the Access Agent is for MAC.\n\n397\n00:20:01,330 --> 00:20:02,660\nThere, Cisco Clean Access.\n\n398\n00:20:02,660 --> 00:20:03,870\n>> There you go.\n\n399\n00:20:03,870 --> 00:20:04,470\n>> Close.\n\n400\n00:20:06,110 --> 00:20:09,500\nSo this is somebody's random web site.\n\n401\n00:20:09,500 --> 00:20:10,130\nBut anyhow,\n\n402\n00:20:10,130 --> 00:20:14,540\nCisco does have a little anti-virus,\npersonal firewall product you can install.\n\n403\n00:20:14,540 --> 00:20:16,050\n>> Nice.\n>> The Cisco VPN client\n\n404\n00:20:16,050 --> 00:20:17,650\ncan actually act as a firewall, too.\n\n405\n00:20:17,650 --> 00:20:19,920\nA lot of people don't know that.\n\n406\n00:20:19,920 --> 00:20:22,050\nBut there's some functionality there.\n\n407\n00:20:22,050 --> 00:20:25,010\nIt's tough because Cisco's\nnot the greatest company for\n\n408\n00:20:25,010 --> 00:20:27,110\nkeeping their software agents up to date.\n\n409\n00:20:27,110 --> 00:20:28,380\nNow, let me clarify.\n\n410\n00:20:28,380 --> 00:20:29,500\nNot their definitions, right?\n\n411\n00:20:29,500 --> 00:20:32,290\nTheir security definitions are top notch,\nright?\n\n412\n00:20:32,290 --> 00:20:34,460\nBut, when Windows 8 came out,\n\n413\n00:20:34,460 --> 00:20:39,990\nit was a good 7 months before their VPN\nclient was updated, and stuff like that.\n\n414\n00:20:39,990 --> 00:20:43,880\nThey're usually a little behind on that\nbecause they are a hardware company\n\n415\n00:20:43,880 --> 00:20:46,020\nfirst and a software company second.\n\n416\n00:20:46,020 --> 00:20:49,506\nSo, if you're somebody's who is on\nthe bleeding edge of technology,\n\n417\n00:20:49,506 --> 00:20:53,100\nthen you probably wanna stick with\nthe other vendors that are out there.\n\n418\n00:20:53,100 --> 00:20:58,470\nBut if you want a stable network,\nif you take it slow and kind of slowly\n\n419\n00:20:58,470 --> 00:21:02,430\ntransition to new technologies, then\nthe Cisco pace is perfectly fine for you.\n\n420\n00:21:02,430 --> 00:21:06,270\n>> That's where every company meets,\nseven or\n\n421\n00:21:06,270 --> 00:21:11,083\neight months behind on their [LAUGH]\n>> We actually had the Q&A\n\n422\n00:21:11,083 --> 00:21:15,310\nsection on the IT ProTV website,\nit's really cool.\n\n423\n00:21:15,310 --> 00:21:17,770\nYou post your questions,\nand we monitor and answer.\n\n424\n00:21:17,770 --> 00:21:20,560\nWe've gotten some neat ones in there, and\nthere's a lot of people out there that\n\n425\n00:21:20,560 --> 00:21:24,410\nstill have Windows XP fully\ndeployed through their environment.\n\n426\n00:21:24,410 --> 00:21:28,630\nSo we get questions on like, hey,\nare you guys gonna do a Windows 7 show?\n\n427\n00:21:28,630 --> 00:21:31,230\nBecause our company's about\nto migrate to Windows 7.\n\n428\n00:21:31,230 --> 00:21:35,810\nAnd you see that and you think, man,\nthey're about to migrate to Windows 7,\n\n429\n00:21:35,810 --> 00:21:39,790\nan OS that's already three-years-old, and\nthey're just now about to migrate to it.\n\n430\n00:21:39,790 --> 00:21:45,500\nNow that's not a bad thing, it just means\nthat they need a stable environment.\n\n431\n00:21:45,500 --> 00:21:48,430\nRunning on the bleeding edge does\nnot create a stable environment.\n\n432\n00:21:48,430 --> 00:21:51,100\nSo you take your time,\nyou make sure the OSs are ready, and\n\n433\n00:21:51,100 --> 00:21:53,450\nyou move into them when you're ready,\nright?\n\n434\n00:21:53,450 --> 00:21:56,920\nAt least they're moving now and not\nwaiting until after XPs out of support,\n\n435\n00:21:56,920 --> 00:21:58,550\nthat would be even worse.\n\n436\n00:21:58,550 --> 00:22:01,196\n>> But that is coming up, so there we go.\n\n437\n00:22:01,196 --> 00:22:03,696\n>> And\nit's almost worse on the networking side.\n\n438\n00:22:03,696 --> 00:22:06,456\nI can't tell you how many times I've\ngone to a company where they had\n\n439\n00:22:06,456 --> 00:22:07,432\nsome kind of a problem.\n\n440\n00:22:07,432 --> 00:22:09,600\nRouter, switch problem, whatever.\n\n441\n00:22:09,600 --> 00:22:13,610\nAnd I took a look at it, and they were\nrunning an iOS from seven years ago or\n\n442\n00:22:13,610 --> 00:22:14,310\nsomething like that.\n\n443\n00:22:14,310 --> 00:22:17,850\nCuz Cisco equipment will stay up and\nrunning for a long time.\n\n444\n00:22:17,850 --> 00:22:20,610\nAnd when you buy a brand new Cisco router,\n\n445\n00:22:20,610 --> 00:22:23,560\nthe iOS that's on there is gonna\nbe at least six months old.\n\n446\n00:22:23,560 --> 00:22:26,200\nAnd if you're not updating them,\nthey get out of date pretty quickly,\n\n447\n00:22:26,200 --> 00:22:28,220\nand you need to keep those up to date.\n\n448\n00:22:30,000 --> 00:22:30,760\nAll right, so\n\n449\n00:22:30,760 --> 00:22:33,650\nthose are some of the different types\nof firewalls that are out there.\n\n450\n00:22:33,650 --> 00:22:36,990\nNow we're gonna talk a little bit\nabout actually using some of these.\n\n451\n00:22:36,990 --> 00:22:38,830\nNow staple firewalls,\n\n452\n00:22:38,830 --> 00:22:41,550\nwhich is the next objective we kind\nof already talked about, right?\n\n453\n00:22:41,550 --> 00:22:44,700\nThat it's keeping track of\nthe communications on their way out, so\n\n454\n00:22:44,700 --> 00:22:48,460\nthat it can match them up with replies on\nthe way back in and allowing them through.\n\n455\n00:22:48,460 --> 00:22:50,827\nThat's pretty important, all right?\n\n456\n00:22:50,827 --> 00:22:55,676\nNow, from a firewall only perspective,\nthat's the only part we really care about.\n\n457\n00:22:55,676 --> 00:23:00,355\nBut almost every firewall is doing\nanother thing in addition to that,\n\n458\n00:23:00,355 --> 00:23:01,791\nwhich is NAT, okay?\n\n459\n00:23:01,791 --> 00:23:06,369\nThe firewall not only has to keep track of\nthe outbound and inbound communications\n\n460\n00:23:06,369 --> 00:23:10,610\nto match them up, but it has to keep track\nof the IP addresses of the hosts that\n\n461\n00:23:10,610 --> 00:23:14,820\nare involved and there are several\ndifferent ways we can manipulate that.\n\n462\n00:23:16,110 --> 00:23:18,540\nNow, when we take a look at\nthe different types of NAT,\n\n463\n00:23:18,540 --> 00:23:23,640\nNetwork Address Translation, in another\nepisode we kind of put them in I guess in\n\n464\n00:23:23,640 --> 00:23:26,160\nlike popularity in order\n>> [LAUGH]\n\n465\n00:23:26,160 --> 00:23:27,430\n>> That we actually did.\n\n466\n00:23:27,430 --> 00:23:31,920\nSo I think that's probably a good way for\nus to address this as well, right?.\n\n467\n00:23:31,920 --> 00:23:35,151\nSo probably the least popular one is\nthe one that you see right there,\n\n468\n00:23:35,151 --> 00:23:36,300\nit's called dynamic.\n\n469\n00:23:36,300 --> 00:23:39,484\nAnd then we have static, and\nthen we have the idea of PAT, or\n\n470\n00:23:39,484 --> 00:23:41,016\nPort Address Translation,\n\n471\n00:23:41,016 --> 00:23:44,420\nwhich is probably the one you\nsee implemented most often here.\n\n472\n00:23:44,420 --> 00:23:48,787\nSo, when we start talking about the idea\nof just dynamic NAT, this is where you\n\n473\n00:23:48,787 --> 00:23:53,350\ntake a pool of public IP addresses, let's\nsay five or six of them, and then you can\n\n474\n00:23:53,350 --> 00:23:57,620\ntake your internal addresses and\nessentially again, map them up to those.\n\n475\n00:23:57,620 --> 00:23:59,670\nBut remember that there's\na limitation minus.\n\n476\n00:23:59,670 --> 00:24:02,816\nYou have six people connected and\nthe seventh one comes along,\n\n477\n00:24:02,816 --> 00:24:05,511\nwell he's not gonna get\na connection on the outside.\n\n478\n00:24:05,511 --> 00:24:10,870\n>> Yeah, now NAT and its variations\nare used pretty much everywhere, right?\n\n479\n00:24:10,870 --> 00:24:14,580\nYou can't go to a tech news site\nwithout seeing somebody mention the IP\n\n480\n00:24:14,580 --> 00:24:16,370\naddress shortage.\n\n481\n00:24:16,370 --> 00:24:19,760\nNow that sky is falling,\nIP address shortage\n\n482\n00:24:19,760 --> 00:24:23,280\nthing has been kind of thrown around for\nat least the last ten years.\n\n483\n00:24:23,280 --> 00:24:24,850\nBut definitely a long time.\n\n484\n00:24:24,850 --> 00:24:28,520\nSo it's not as urgent as they make it\nout to be, but it is a real thing.\n\n485\n00:24:28,520 --> 00:24:30,760\nWe are really running out of IP addresses.\n\n486\n00:24:30,760 --> 00:24:34,120\nAnd there are not enough\nIP addresses to give true\n\n487\n00:24:34,120 --> 00:24:37,030\npublic external IPs to all\nof our internal stations.\n\n488\n00:24:37,030 --> 00:24:39,660\nOr at least not In the IPv4 address space.\n\n489\n00:24:39,660 --> 00:24:41,820\nSo NAT solves that problem.\n\n490\n00:24:41,820 --> 00:24:46,960\nIt allows to take our private IPs on\nthe inside network and when a host passes\n\n491\n00:24:46,960 --> 00:24:52,330\nthrough our router or whatever, to change\nour IP to reflect an external address.\n\n492\n00:24:52,330 --> 00:24:55,780\nNow that process can take\na few different forms.\n\n493\n00:24:55,780 --> 00:24:57,780\nThese guys that are here in the list.\n\n494\n00:24:57,780 --> 00:25:00,790\nAnd for\nthose of you that watched our CCNA show,\n\n495\n00:25:00,790 --> 00:25:02,270\nyou've already seen all these in-depth.\n\n496\n00:25:02,270 --> 00:25:05,670\nBut for those of you that are coming\nstraight out of our CCENT show,\n\n497\n00:25:05,670 --> 00:25:07,390\nyou might not have seen those at all.\n\n498\n00:25:07,390 --> 00:25:10,940\nSo let's talk a little bit\nabout how they work, all right?\n\n499\n00:25:10,940 --> 00:25:13,090\nLet me start with the most simple first.\n\n500\n00:25:13,090 --> 00:25:14,390\nRonnie, you're exactly right,\n\n501\n00:25:14,390 --> 00:25:18,020\ndynamic net is the least common\njust cuz it's kind of weird.\n\n502\n00:25:18,020 --> 00:25:22,490\nBut the most simple one is\nwhat's called static net.\n\n503\n00:25:22,490 --> 00:25:28,890\nStatic net is where I take an internal\nhost, let's go to my little diagram here.\n\n504\n00:25:28,890 --> 00:25:29,390\nLet's see.\n\n505\n00:25:30,400 --> 00:25:33,190\nDid I break my little pointer?\n\n506\n00:25:33,190 --> 00:25:33,835\n>> I guess you did.\n\n507\n00:25:33,835 --> 00:25:35,420\n>> [LAUGH] Where's it?\n\n508\n00:25:35,420 --> 00:25:36,840\nHello?\n\n509\n00:25:36,840 --> 00:25:37,910\nThere we go!\nAll right.\n\n510\n00:25:37,910 --> 00:25:39,090\nI couldn't get my marker to work.\n\n511\n00:25:39,090 --> 00:25:41,100\nApparently it got nadded or something.\n\n512\n00:25:41,100 --> 00:25:45,030\nSo the idea is that on the inside of our\n\n513\n00:25:45,030 --> 00:25:50,000\nnetwork, what it is going on here?\n\n514\n00:25:50,000 --> 00:25:52,540\nI've had a complete meltdown.\n\n515\n00:25:52,540 --> 00:25:55,780\n>> It looks good.\n[LAUGH]\n\n516\n00:25:55,780 --> 00:25:56,440\n>> That is too funny.\n\n517\n00:25:56,440 --> 00:25:56,980\nAll right.\n\n518\n00:25:56,980 --> 00:25:59,570\nSo anyhow, so I have an internal\nhost like this one, all right?\n\n519\n00:25:59,570 --> 00:26:02,328\nThe private LAN is the 192.168.\n\n520\n00:26:02,328 --> 00:26:05,012\n.1.0.24 network.\n\n521\n00:26:05,012 --> 00:26:08,650\nWell that's a private address.\n\n522\n00:26:08,650 --> 00:26:12,380\nBy private I mean RFC 19 18 address.\n\n523\n00:26:12,380 --> 00:26:17,365\nAnything that starts with192.168.0.0 or\nif it starts with\n\n524\n00:26:17,365 --> 00:26:22,259\n172.16 all the way through 172.31.0.0 and\n\n525\n00:26:22,259 --> 00:26:27,180\nthen 10.0.0, those networks right there\nThey're not allowed on the internet.\n\n526\n00:26:27,180 --> 00:26:31,600\nSo if this private VLAN were to try and go\nout to the internet just like it is right\n\n527\n00:26:31,600 --> 00:26:35,890\nnow, you could do it,\nyou could send it out there.\n\n528\n00:26:35,890 --> 00:26:39,590\nBut your internet service provider,\nit's in their rules, in order for\n\n529\n00:26:39,590 --> 00:26:42,920\nthem to maintain their connection to the\ninternet backbone, they have to drop this\n\n530\n00:26:42,920 --> 00:26:45,830\ntraffic, so that traffic's just gonna be\ndropped and it's not gonna get anywhere.\n\n531\n00:26:47,120 --> 00:26:52,450\nSo, what we can do is on our\nfirewall we can have it look\n\n532\n00:26:52,450 --> 00:26:57,780\nat our packets and then say, all right,\nyou have a fake address on the inside.\n\n533\n00:26:57,780 --> 00:27:02,360\nI'm gonna map that to\na public IP on the outside.\n\n534\n00:27:02,360 --> 00:27:04,070\nAnd so it does that.\n\n535\n00:27:04,070 --> 00:27:08,280\nAnd sends it out to the internet\nwith a different address, and\n\n536\n00:27:08,280 --> 00:27:14,550\nwhoever is out there on the internet is\ngoing to reply to that different address.\n\n537\n00:27:14,550 --> 00:27:18,660\nThe firewall will see it and say, oh,\nyeah, yeah, that's this guy on the inside.\n\n538\n00:27:18,660 --> 00:27:22,590\nAnd send it back to that internal person,\nall lright.\n\n539\n00:27:22,590 --> 00:27:25,070\nThe most simple way we can\ndo that is static map.\n\n540\n00:27:25,070 --> 00:27:30,270\nWere we map one internal\nIP to one external IP.\n\n541\n00:27:30,270 --> 00:27:35,870\nSo we just create a little rule and\nwe say for\n\n542\n00:27:35,870 --> 00:27:41,560\nexample 192.168.0.100 on the inside.\n\n543\n00:27:41,560 --> 00:27:48,575\nAnd then on the outside\n209.251 It's 209.251.133.187.\n\n544\n00:27:48,575 --> 00:27:51,185\nOkay?\nSo, we create\n\n545\n00:27:51,185 --> 00:27:56,185\na rule on the firewall\nthat maps these together.\n\n546\n00:27:56,185 --> 00:27:59,235\nThis internal IP becomes this external IP.\n\n547\n00:27:59,235 --> 00:28:04,455\nAnyone on the Internet can send a message\nto 209.251.133.187, and the firewall will\n\n548\n00:28:04,455 --> 00:28:09,640\nknow to send that to 193.168.0.100.\n\n549\n00:28:09,640 --> 00:28:15,120\nAnd the best part, the firewall actually\nedits that packet to change the source or\n\n550\n00:28:15,120 --> 00:28:19,160\ndestination address to match this so\nthat end units, the PC on the inside and\n\n551\n00:28:19,160 --> 00:28:22,810\nthe host on the outside, they don't\neven know this is happening, right.\n\n552\n00:28:22,810 --> 00:28:26,300\nIt's all invisible to them,\nthe firewall takes care of it all.\n\n553\n00:28:26,300 --> 00:28:29,480\nAnd it's doing it in a translation table,\n\n554\n00:28:29,480 --> 00:28:32,220\nwhich is very closely\nrelated to the state table.\n\n555\n00:28:32,220 --> 00:28:35,623\nThe state table is tracking\nhosts talking to destinations.\n\n556\n00:28:35,623 --> 00:28:38,660\n>> Now, Don, when you take a look at\nthe internal address, did you mean for\n\n557\n00:28:38,660 --> 00:28:41,620\nthat IP to be in the DMZ LAN, or?\n\n558\n00:28:41,620 --> 00:28:43,293\n>> I was just typing out of my head.\n\n559\n00:28:43,293 --> 00:28:45,390\n>> I was going to ask you another\nquestion if you actually meant that.\n\n560\n00:28:45,390 --> 00:28:46,640\nSo.\n>> No, no.\n\n561\n00:28:46,640 --> 00:28:47,340\nI screwed it up.\n\n562\n00:28:47,340 --> 00:28:48,350\n>> Okay.\nI just wanna make sure.\n\n563\n00:28:48,350 --> 00:28:50,580\n>> So, you ruin everything, Ronnie.\n\n564\n00:28:50,580 --> 00:28:51,420\n>> I didn't mean to ruin it.\n\n565\n00:28:51,420 --> 00:28:52,280\nI just.\n>> Oh yeah, yeah.\n\n566\n00:28:52,280 --> 00:28:53,780\nSo it was supposed to be like this.\n\n567\n00:28:53,780 --> 00:28:54,460\n>> Yeah.\n>> 192.168.1.100 and then\n\n568\n00:28:54,460 --> 00:28:58,960\nour external was, let's see if I\ncan make up the same address again.\n\n569\n00:28:58,960 --> 00:28:59,600\nI'm gonna give it 187.\n\n570\n00:28:59,600 --> 00:29:02,640\nThere we go.\n\n571\n00:29:02,640 --> 00:29:04,290\nThat's what I had in the previous.\n\n572\n00:29:04,290 --> 00:29:06,070\n>> That's nice.\nSo the internal IP in there.\n\n573\n00:29:06,070 --> 00:29:10,020\nYou know we could be doing it for\nthe DMZ or for the research LAN also.\n\n574\n00:29:10,020 --> 00:29:15,700\nNotice three of those\nnetworks are private so\n\n575\n00:29:15,700 --> 00:29:18,490\nthey would have to be natted\nto go out to the internet.\n\n576\n00:29:19,800 --> 00:29:24,750\nThe big problem with static nat, it is\na one to one mapping, so it's great for\n\n577\n00:29:24,750 --> 00:29:25,430\nservers.\n\n578\n00:29:25,430 --> 00:29:27,360\nIf I've got servers in my DMZ,\n\n579\n00:29:27,360 --> 00:29:31,390\nI want to map one external\nIP to that server, perfect.\n\n580\n00:29:31,390 --> 00:29:33,940\nStatic network's great,\nwe use it here, right?\n\n581\n00:29:33,940 --> 00:29:35,890\nWe use it for several of our servers.\n\n582\n00:29:35,890 --> 00:29:38,010\nBut, what about my work stations?\n\n583\n00:29:38,010 --> 00:29:40,670\nWhat if I have a thousand\nwork stations over here?\n\n584\n00:29:40,670 --> 00:29:42,510\nWell, then it's not gonna be enough.\n\n585\n00:29:42,510 --> 00:29:43,890\nRight?\nSo we need to attack it\n\n586\n00:29:43,890 --> 00:29:45,410\nfrom a slightly different perspective.\n\n587\n00:29:46,540 --> 00:29:47,820\nAll right?\nBut looking at the clock,\n\n588\n00:29:47,820 --> 00:29:49,050\nwe're running a little low on time.\n\n589\n00:29:49,050 --> 00:29:50,620\nSo, why don't we do this.\n\n590\n00:29:50,620 --> 00:29:54,460\nI've kind of demonstrated how static\nnetwork, just one-to-one mapping.\n\n591\n00:29:54,460 --> 00:29:57,870\nWhen we back, let's take a look at some of\nthe variations, some of the other ways.\n\n592\n00:29:57,870 --> 00:29:59,290\nAnd then we're going to\nshow how to configure it.\n\n593\n00:29:59,290 --> 00:30:03,250\nActually how to get this set up inside\nyour router or switch or whatever.\n\n594\n00:30:03,250 --> 00:30:03,880\nSo stay tuned.\n\n595\n00:30:03,880 --> 00:30:06,670\nWhen we get back,\nmore NAT action after this.\n\n596\n00:30:06,670 --> 00:30:13,507\n[MUSIC]\n\n597\n00:30:13,507 --> 00:30:15,170\nWelcome back, everybody.\n\n598\n00:30:15,170 --> 00:30:20,880\nBefore the break I was talking about\none to one network address translation,\n\n599\n00:30:20,880 --> 00:30:26,660\nhow we map that internal IP to an external\nIP and vice versa and that works great.\n\n600\n00:30:26,660 --> 00:30:32,250\nBut we normally have more than just one\ninternal host, and we may not have a whole\n\n601\n00:30:32,250 --> 00:30:36,530\ncollection of IPs that are out there, so\nit's not necessarily a great solution.\n\n602\n00:30:36,530 --> 00:30:40,990\nWell, the next one is the one that\nRonnie mentioned, which is dynamic NAT.\n\n603\n00:30:40,990 --> 00:30:42,100\nAnd dynamic NAT,\n\n604\n00:30:42,100 --> 00:30:46,500\nthe way I think of it is, you've got\na bag full of IP addresses, right?\n\n605\n00:30:46,500 --> 00:30:50,410\nAnd when a host on the inside wants to\ngo out, they just swing by that bag and\n\n606\n00:30:50,410 --> 00:30:53,540\nthey just grab an address and\nrun with it, right.\n\n607\n00:30:53,540 --> 00:30:58,530\nBut it's just like Ronnie said eventually\nif enough of your host go out you're\n\n608\n00:30:58,530 --> 00:31:00,930\ngoing to run out of IP\naddresses in that bag, and\n\n609\n00:31:00,930 --> 00:31:03,350\nthen the next person\nthat tries to go can't.\n\n610\n00:31:03,350 --> 00:31:04,660\nThe deal there,\n\n611\n00:31:04,660 --> 00:31:09,810\nthe idea behind dynamic NAT, is that\nyou have a pool of public addresses.\n\n612\n00:31:09,810 --> 00:31:12,810\nSo, you might have thousands of\nclients on your internal network, but\n\n613\n00:31:12,810 --> 00:31:17,430\nmaybe you have 100 public IPs, and\nas the clients go out to the internet,\n\n614\n00:31:17,430 --> 00:31:20,100\nthey just grab one of those public IPs,\ngrab it at random.\n\n615\n00:31:20,100 --> 00:31:23,430\nAnd go out, and now they're using it,\nnobody else can.\n\n616\n00:31:23,430 --> 00:31:26,820\nSo it's still one to one mappings, but\n\n617\n00:31:26,820 --> 00:31:28,860\nyou don't know what IP\nyou're going to get, right?\n\n618\n00:31:28,860 --> 00:31:32,170\nAnd this is how most cable service and\nDSL providers work.\n\n619\n00:31:32,170 --> 00:31:33,120\nYour cable modem or\n\n620\n00:31:33,120 --> 00:31:37,430\nDSL, when you fire it up, you're just\ngrabbing an IP from a pool of addresses.\n\n621\n00:31:37,430 --> 00:31:41,150\nYou don't which one you're gonna get, and\nyou have it for a certain period of time.\n\n622\n00:31:41,150 --> 00:31:43,220\nIn fact, they'll normally\nmake you change it every so\n\n623\n00:31:43,220 --> 00:31:47,230\noften, cuz they don't want you\nrunning servers out of your home.\n\n624\n00:31:47,230 --> 00:31:49,500\nYou just grab an IP, and you go.\n\n625\n00:31:49,500 --> 00:31:52,491\nThe thing is, the cable company,\nor DSL or whoever it is,\n\n626\n00:31:52,491 --> 00:31:56,290\nthey have to make sure they have enough\nIP addresses for their customers.\n\n627\n00:31:56,290 --> 00:32:00,926\nSo if they have 50,000 customers,\nthey've got to have 50,000 public IPs for\n\n628\n00:32:00,926 --> 00:32:03,250\nthose customers to grab and\ngo with, right?\n\n629\n00:32:03,250 --> 00:32:07,620\nAnd in some places like our European\nviewers probably know this all to well,\n\n630\n00:32:07,620 --> 00:32:10,830\nthey may not have those\n50,000 IPs anymore.\n\n631\n00:32:10,830 --> 00:32:15,500\nAnd so we're starting to get where the\nISPs are giving us private addresses and\n\n632\n00:32:15,500 --> 00:32:18,680\nthen adding us together with\nother customers on the way out so\n\n633\n00:32:18,680 --> 00:32:21,870\nwe're starting to share IPs and that's\nwhere things start to get a little shady\n\n634\n00:32:21,870 --> 00:32:24,550\nin my opinion but it is a common practice.\n\n635\n00:32:25,600 --> 00:32:28,840\nNot so much in the US,\ndo you get a public IP, Ronnie?\n\n636\n00:32:28,840 --> 00:32:29,640\n>> I do not.\n\n637\n00:32:29,640 --> 00:32:33,320\n>> You do not, so\nyou are behind this false firewall.\n\n638\n00:32:33,320 --> 00:32:38,090\n>> Yeah, mine is actually a ten network so\nI know it's not a public IP address.\n\n639\n00:32:38,090 --> 00:32:41,560\n>> I guess I'm fortunate,\nI still get a public IP at home.\n\n640\n00:32:41,560 --> 00:32:47,250\nThe real problem is if you're a home user\nand you get a private IP from your ISP.\n\n641\n00:32:47,250 --> 00:32:49,500\nThen there is really no way for\n\n642\n00:32:49,500 --> 00:32:53,610\nyou to remote into your systems without\nextensive software to handle that.\n\n643\n00:32:53,610 --> 00:32:57,231\nWhereas if you have a public IP, you can\nchoose a dynamic DNS service, or whatever,\n\n644\n00:32:57,231 --> 00:32:59,090\nto be able to connect to your home.\n\n645\n00:32:59,090 --> 00:33:01,710\nIt is a shame to loose that\nkind of functionality.\n\n646\n00:33:01,710 --> 00:33:03,915\nBut your basic services are still there.\n\n647\n00:33:03,915 --> 00:33:06,530\nYou can still get to the internet and\ndo those things.\n\n648\n00:33:06,530 --> 00:33:10,820\n>> Yep.\n>> The last version of NAT that we want to\n\n649\n00:33:10,820 --> 00:33:14,650\ntalk about is the idea of, sometimes\nwe call it port address translation,\n\n650\n00:33:14,650 --> 00:33:17,760\na lot of times you'll hear\nthe term NAT overloading.\n\n651\n00:33:17,760 --> 00:33:21,210\nThis is where we take all of\nour private IP addresses and\n\n652\n00:33:21,210 --> 00:33:26,432\nis able to translate them into\na single public IP address instead.\n\n653\n00:33:26,432 --> 00:33:29,910\nThe way they do this is by adding\nin additional port numbers\n\n654\n00:33:29,910 --> 00:33:31,380\nto help that translation go through.\n\n655\n00:33:32,380 --> 00:33:36,010\n>> Yeah and\nthis is the most common form of NAT so\n\n656\n00:33:36,010 --> 00:33:40,720\nlike going back to my diagram here,\nhere we go.\n\n657\n00:33:40,720 --> 00:33:44,190\nIf I've got these three private networks\non the inside I might thousands or\n\n658\n00:33:44,190 --> 00:33:45,550\ntens of thousands of hosts.\n\n659\n00:33:45,550 --> 00:33:48,000\nProbably not since I\nhave only three class Cs.\n\n660\n00:33:48,000 --> 00:33:52,440\nI might have hundreds of hosts and\nas they go out to the internet,\n\n661\n00:33:52,440 --> 00:33:56,730\ntheir private addresses,\nall of these guys are private addresses.\n\n662\n00:33:56,730 --> 00:34:03,150\nThey're going to this router on their\nway out to the internet, right?\n\n663\n00:34:03,150 --> 00:34:08,380\nAnd that router can then translate\nthem into shared addresses.\n\n664\n00:34:08,380 --> 00:34:12,750\nAnd the most common way that you see it is\nthe router will have an external IP and so\n\n665\n00:34:12,750 --> 00:34:16,100\nit'll just translate all of these\nguys to that external IP and\n\n666\n00:34:16,100 --> 00:34:17,610\nsend them out to the internet.\n\n667\n00:34:17,610 --> 00:34:23,370\nIt's called overload because a single IP\naddress is designed to handle traffic for\n\n668\n00:34:23,370 --> 00:34:24,530\na single host, right.\n\n669\n00:34:24,530 --> 00:34:26,120\nThat's how it was designed.\n\n670\n00:34:26,120 --> 00:34:31,670\nBut we can actually stack thousands\nof hosts on a single IP address,\n\n671\n00:34:31,670 --> 00:34:34,600\nand the only problem is,\nhow do you tell them apart?\n\n672\n00:34:34,600 --> 00:34:38,080\nWhen you start to get replies,\nthe replies for that external IP and\n\n673\n00:34:38,080 --> 00:34:42,800\nthe external IP is now mapped to all these\ninternal hosts So, what the firewall or\n\n674\n00:34:42,800 --> 00:34:47,220\nrouter does, is it tracks the port numbers\nthat are used in the communications.\n\n675\n00:34:48,370 --> 00:34:52,075\nEvery communication has a port number,\nand let me just show you an example.\n\n676\n00:34:52,075 --> 00:34:56,760\nEarlier, I FTPed to Dell.com, and so\n\n677\n00:34:56,760 --> 00:35:00,770\nI opened up a session, and\nlet me just open this and leave it open.\n\n678\n00:35:02,050 --> 00:35:02,890\nAll right.\n\n679\n00:35:02,890 --> 00:35:05,740\nAnd I'll open up another window here and\n\n680\n00:35:05,740 --> 00:35:09,250\nlet me just do an NS\nlookup of FTP.dell.com.\n\n681\n00:35:09,250 --> 00:35:09,920\nAll right.\n\n682\n00:35:09,920 --> 00:35:13,619\nSo that was, oh wait, there.\n\n683\n00:35:13,619 --> 00:35:17,933\nOh, it was143.166.147.12.\n\n684\n00:35:17,933 --> 00:35:18,799\nAll right.\n\n685\n00:35:18,799 --> 00:35:25,800\nSo if I do a, netstat -an, and\nI'm looking for this 143.166 address.\n\n686\n00:35:32,880 --> 00:35:33,840\nThere we go.\n\n687\n00:35:33,840 --> 00:35:35,390\nLet me see if we can find this.\n\n688\n00:35:35,390 --> 00:35:36,420\nHere it is.\n\n689\n00:35:36,420 --> 00:35:39,450\nSo here's me reaching out to Dell.\n\n690\n00:35:42,010 --> 00:35:43,610\nRight there.\n\n691\n00:35:43,610 --> 00:35:46,410\nOkay, so\nyou can see the source is 10.1.230.26.\n\n692\n00:35:46,410 --> 00:35:49,190\nThat's me and that's a private IP.\n\n693\n00:35:49,190 --> 00:35:55,720\nAnd then Dell is 143.166.135.12 port 21,\nbecause it was FTP.\n\n694\n00:35:56,960 --> 00:35:59,780\nBut that source port was 2543.\n\n695\n00:35:59,780 --> 00:36:05,820\nWhen Dell replies to me,\nthe source of that reply will be port 21,\n\n696\n00:36:05,820 --> 00:36:09,950\nbut the destination will be port 2543.\n\n697\n00:36:09,950 --> 00:36:13,873\nAnd the firewall can use that port number\nto identify that it was me that initiated\n\n698\n00:36:13,873 --> 00:36:14,570\nthe traffic.\n\n699\n00:36:14,570 --> 00:36:18,030\n10.1.230.26 and\nyou can send it back to me.\n\n700\n00:36:18,030 --> 00:36:18,730\nAlright.\n\n701\n00:36:18,730 --> 00:36:21,949\nNow these port numbers, by and\nlarge, are randomly generated.\n\n702\n00:36:23,480 --> 00:36:27,610\nThat means that it is\npossible that two hosts could\n\n703\n00:36:27,610 --> 00:36:32,470\nboth be going to Dell at the same time,\nand both generate the same port number.\n\n704\n00:36:32,470 --> 00:36:34,780\nIt's uncommon, but it does happen.\n\n705\n00:36:34,780 --> 00:36:39,990\nIf it happens, the firewall will\nactually change the port number so\n\n706\n00:36:39,990 --> 00:36:41,320\nthey don't conflict.\n\n707\n00:36:41,320 --> 00:36:42,830\nIt will change on the firewall and\n\n708\n00:36:42,830 --> 00:36:45,460\nwhen the reply comes back\nit will change it again.\n\n709\n00:36:45,460 --> 00:36:48,110\nSo, the host never knows\nthat change occurred but\n\n710\n00:36:48,110 --> 00:36:50,390\nit's using the port to manipulate that.\n\n711\n00:36:50,390 --> 00:36:53,000\nWe're not just doing\nnetwork address translation\n\n712\n00:36:53,000 --> 00:36:55,730\nwe're also doing port address translation.\n\n713\n00:36:55,730 --> 00:36:58,320\nWe gotta change the port along\nwith the network address.\n\n714\n00:36:59,570 --> 00:37:03,190\nSo very cool, allows multiple\nhosts to share a single IP,\n\n715\n00:37:03,190 --> 00:37:05,240\nit's perfect for home and small office.\n\n716\n00:37:06,510 --> 00:37:09,520\nBut you can also blend it,\nand we do that here.\n\n717\n00:37:09,520 --> 00:37:10,680\nLet me go back to this diagram.\n\n718\n00:37:10,680 --> 00:37:13,790\nI'll show you guys what we\ndo at the ITProTV studio.\n\n719\n00:37:13,790 --> 00:37:18,230\nSo when you log in to the ITProTV website,\nor you watch\n\n720\n00:37:18,230 --> 00:37:22,277\nsome of our shows online, absolutely\nnone of that is rendered from here.\n\n721\n00:37:22,277 --> 00:37:23,130\n>> [LAUGH]\n>> In the building.\n\n722\n00:37:23,130 --> 00:37:25,230\nSo our entire building\ncould power down and\n\n723\n00:37:25,230 --> 00:37:28,520\nthe entire ITProTV infrastructure\nstays up and running.\n\n724\n00:37:28,520 --> 00:37:32,100\nBut our studio is here and\nwe've got some servers and\n\n725\n00:37:32,100 --> 00:37:36,940\nother devices here that we use to\ngenerate the content that you guys watch.\n\n726\n00:37:36,940 --> 00:37:41,600\nWell, those servers, some of them have\npublic IPs that we can give to them and\n\n727\n00:37:41,600 --> 00:37:45,560\nthere are email filter and stuff like that\nthat needs to be exposed to the internet.\n\n728\n00:37:45,560 --> 00:37:47,560\nSo we actually do a mixture.\n\n729\n00:37:47,560 --> 00:37:49,119\nSo let's go back to our diagram here.\n\n730\n00:37:50,700 --> 00:37:53,070\nFirst off, our network is a little\nmore simple than this one.\n\n731\n00:37:53,070 --> 00:37:57,980\nSo let me just kinda catch that, and\nwe'll do an all new diagram here so\n\n732\n00:37:57,980 --> 00:37:59,790\nI can manipulate it a bit.\n\n733\n00:37:59,790 --> 00:38:07,560\nIn that, our network, we really don't\nhave this whole external piece here.\n\n734\n00:38:07,560 --> 00:38:12,390\nSo we just have our internal network and\nthen our internal network\n\n735\n00:38:12,390 --> 00:38:16,320\nis plugged into a firewall that's\nthen connected to the internet.\n\n736\n00:38:17,550 --> 00:38:21,180\nSo this is basically what we\nhave here in our building.\n\n737\n00:38:22,480 --> 00:38:25,850\nOur private land is, well it's not this.\n\n738\n00:38:25,850 --> 00:38:34,190\nYou guys have seen it on\nthe show enough times probably.\n\n739\n00:38:34,190 --> 00:38:34,990\nIt's 10.1.230.0.\n\n740\n00:38:34,990 --> 00:38:39,489\nThe history of why it's 10.1.230 is long\nand sordid, but that's what it is [LAUGH].\n\n741\n00:38:39,489 --> 00:38:44,700\nSo, 10.1.230.0 And then we've got our DMZ.\n\n742\n00:38:44,700 --> 00:38:50,460\nI don't know if I can remember\nthe IP range that we used there.\n\n743\n00:38:50,460 --> 00:38:51,500\nI'll just make one up.\n\n744\n00:38:51,500 --> 00:38:56,719\nSo, we'll say that it's 10.1.240.0.\n\n745\n00:38:56,719 --> 00:38:57,780\nOkay.\n\n746\n00:38:57,780 --> 00:39:04,650\nSo, what we do is for our private LAN,\nfor these guys that are on the inside.\n\n747\n00:39:05,760 --> 00:39:10,190\nWhen they go out to the internet,\nwe do port address translation.\n\n748\n00:39:10,190 --> 00:39:14,350\nThey go through our firewall and we\ndon't have a router, we have a firewall.\n\n749\n00:39:14,350 --> 00:39:19,930\nIt translate it into the IP address\nthat's on the external interface,\n\n750\n00:39:19,930 --> 00:39:22,920\nand then sends it along to the internet.\n\n751\n00:39:22,920 --> 00:39:26,350\nRight now, my video is being recorded\nby a video switch right over there,\n\n752\n00:39:26,350 --> 00:39:27,850\nas is Ronnie's and\n\n753\n00:39:27,850 --> 00:39:31,020\nthe rest of the set, all the various\ncameras here run on this one switch.\n\n754\n00:39:31,020 --> 00:39:33,964\nAnd the switch then sends a signal\nout to the hosted servers,\n\n755\n00:39:33,964 --> 00:39:35,590\nthat you guys are watching from.\n\n756\n00:39:35,590 --> 00:39:40,245\nSo that switch, is going out through\nthe router and translating into that IP\n\n757\n00:39:40,245 --> 00:39:44,550\naddress, the IP address attached\nto our external interface, okay.\n\n758\n00:39:44,550 --> 00:39:49,710\nBut, then we've got servers\ndown here in our DMZ.\n\n759\n00:39:49,710 --> 00:39:54,772\nAnd each one of them,\nwhen they go through the firewall,\n\n760\n00:39:54,772 --> 00:40:02,630\nthey have a static one-to-one mapping so\nthat each server has its own IP address.\n\n761\n00:40:02,630 --> 00:40:07,930\nSo all of the hosts that are here on\nour internal network share one IP.\n\n762\n00:40:09,010 --> 00:40:15,620\nBut each server has its own individual\nIP that's a one-to-one mapping.\n\n763\n00:40:15,620 --> 00:40:20,640\nOn the internal network, all of our\nIPs are private, even the DMZ ones,\n\n764\n00:40:20,640 --> 00:40:24,270\neven the servers that are out there on\nthe internet that have private addresses.\n\n765\n00:40:24,270 --> 00:40:27,720\nThey, in most cases,\ndon't even know what their public IP is.\n\n766\n00:40:27,720 --> 00:40:30,850\nThere's only one exception to that,\nbut most of them have no idea.\n\n767\n00:40:30,850 --> 00:40:33,710\nSo it's a blend between the two.\n\n768\n00:40:33,710 --> 00:40:35,450\nNow, that's why this is important,\n\n769\n00:40:35,450 --> 00:40:37,930\nand on the objectives,\nkinda what they're calling out is\n\n770\n00:40:37,930 --> 00:40:42,470\ndon't just understand the different types\nof NAT, but understand what's involved.\n\n771\n00:40:42,470 --> 00:40:44,390\nWhen we create a NAT rule,\n\n772\n00:40:44,390 --> 00:40:50,290\nyou have to create an ACL that specifies\nwhat hosts are allowed to get translated.\n\n773\n00:40:50,290 --> 00:40:56,400\nSo when we create our rules,\nthere's one rule that says these hosts\n\n774\n00:40:56,400 --> 00:41:02,970\nare allowed to be NAT'd, and that's it,\nand that rule is the one that does PAT.\n\n775\n00:41:02,970 --> 00:41:05,910\nAnd then we have another ACL that says\n\n776\n00:41:05,910 --> 00:41:10,390\nthis one server right here\nis allowed to be NAT'd.\n\n777\n00:41:10,390 --> 00:41:13,430\nAnd it's a one-to-one\nmapping to a single address.\n\n778\n00:41:13,430 --> 00:41:17,880\nSo you use ACLs to control who\ngets what rule applied to them.\n\n779\n00:41:17,880 --> 00:41:21,790\nAnd so it's very closely related to what\nyou're gonna be doing on the firewall\n\n780\n00:41:21,790 --> 00:41:25,280\nitself, not to mention the fact that you\nthen have firewall rules that come into\n\n781\n00:41:25,280 --> 00:41:28,000\nplay also allowing traffic to some IPs and\nnot to others.\n\n782\n00:41:29,102 --> 00:41:32,400\nAll right, so let's take a look\nat how this is implemented.\n\n783\n00:41:32,400 --> 00:41:36,720\nNow, this is one of the more unusual\nsections in the objectives cuz\n\n784\n00:41:36,720 --> 00:41:39,350\nthey reference routers and firewalls.\n\n785\n00:41:39,350 --> 00:41:43,095\nSo let's start with routers\nfirst cuz I'm already connected.\n\n786\n00:41:43,095 --> 00:41:46,359\nNow I already have NAT configured\non this router over here\n\n787\n00:41:46,359 --> 00:41:50,919\ncuz my laptop is plugged into it, but we\ncan kinda take a look at what is in there.\n\n788\n00:41:50,919 --> 00:41:56,057\nIf we drill into our router,\nyou'll see a folder in here labeled NAT,\n\n789\n00:41:56,057 --> 00:42:00,846\nand you've got a nice little NAT\nwizard that you can run through,\n\n790\n00:42:00,846 --> 00:42:02,609\nwhich is pretty handy.\n\n791\n00:42:02,609 --> 00:42:05,259\nOr if you've already got NAT implemented,\nyou can go in here and\n\n792\n00:42:05,259 --> 00:42:06,840\nedit the configuration, all right?\n\n793\n00:42:06,840 --> 00:42:12,110\nAnd you can see right here\nthe ACL that I was mentioning.\n\n794\n00:42:12,110 --> 00:42:15,180\nHere's where we're defining\nwhat's the original address and\n\n795\n00:42:15,180 --> 00:42:16,560\nwhat's the translated address.\n\n796\n00:42:16,560 --> 00:42:20,507\nNow on that router, the one in\nthe background here that we keep using\n\n797\n00:42:20,507 --> 00:42:24,177\nin the show,\nI just gave it a 192.168.0 address, and\n\n798\n00:42:24,177 --> 00:42:29,000\nthen I plugged its outside interface\nto our studio network, 10.1.230.\n\n799\n00:42:29,000 --> 00:42:33,988\nAnd so I created a rule that said any of\nthese hosts on the 192.168.0 network,\n\n800\n00:42:33,988 --> 00:42:37,403\nthey can be translated as they\npass through the router, and\n\n801\n00:42:37,403 --> 00:42:42,118\nthey are just being translated to its\npublic IP which is 101230.16, and\n\n802\n00:42:42,118 --> 00:42:46,460\nyou will see that role type is dynamic,\nbut it's also allowing overload.\n\n803\n00:42:46,460 --> 00:42:49,056\nNow you can't tell from looking at this,\nright, so\n\n804\n00:42:49,056 --> 00:42:52,242\nI want to walk through the wizard and\nkind of show this process and\n\n805\n00:42:52,242 --> 00:42:54,851\nwhat's involved, so\nI'm gonna delete that rule.\n\n806\n00:42:57,928 --> 00:42:59,943\nSo I'm disabling NAT on the router, and\n\n807\n00:42:59,943 --> 00:43:03,980\nthen we'll see what's involved with\ngoing through and getting it configured.\n\n808\n00:43:06,590 --> 00:43:08,620\nEventually.\n[LAUGH] There we go.\n\n809\n00:43:10,130 --> 00:43:10,630\nAll right.\n\n810\n00:43:12,070 --> 00:43:14,978\nThe first thing we need to\ndo when we implement NAT,\n\n811\n00:43:14,978 --> 00:43:17,831\nwe need to understand where\nwe want to translate.\n\n812\n00:43:17,831 --> 00:43:20,801\nThis router really just\nhas two interfaces.\n\n813\n00:43:20,801 --> 00:43:24,070\nIf I go up here to interface management,\n\n814\n00:43:24,070 --> 00:43:28,020\nit's really just got\nthese two gig interfaces.\n\n815\n00:43:28,020 --> 00:43:31,080\nI have a cellular and a serial card,\nbut I'm not using either of them.\n\n816\n00:43:31,080 --> 00:43:34,200\nIn fact, I should probably just go and\ndisable that cellular one.\n\n817\n00:43:34,200 --> 00:43:36,650\nThere.\nSo I've got these two gig cards,\n\n818\n00:43:36,650 --> 00:43:37,830\nand that's it.\n\n819\n00:43:37,830 --> 00:43:41,610\nOne of them is gonna be inside my network,\nand one of them's gonna be outside, right?\n\n820\n00:43:41,610 --> 00:43:44,490\nOne's pointing to the internet or\nwhoever, right?\n\n821\n00:43:44,490 --> 00:43:47,800\nBut if you have three interfaces or\nmore, you gotta think about that and\n\n822\n00:43:47,800 --> 00:43:51,690\nunderstand where it is that you wanna\ntranslate addresses because if you've got\n\n823\n00:43:51,690 --> 00:43:57,940\na DMZ like this, all right,\nwell we definitely want to NAT\n\n824\n00:43:57,940 --> 00:44:03,210\nwhen DMZ goes out to the internet and when\nthe private LAN goes out to the internet.\n\n825\n00:44:03,210 --> 00:44:05,735\nRight we definitely want to NAT then, but\n\n826\n00:44:05,735 --> 00:44:11,215\nwhat about when the private network\ntalks to the DMZ or vice versa, right?\n\n827\n00:44:11,215 --> 00:44:13,155\nDo I need to NAT that?\n\n828\n00:44:13,155 --> 00:44:15,865\nNo, right, and in fact,\nit could break things if I do.\n\n829\n00:44:15,865 --> 00:44:18,045\nSo I likely don't want to NAT that, so\n\n830\n00:44:18,045 --> 00:44:21,960\nwe need to think about the directions,\nwhat traffic is going where,\n\n831\n00:44:21,960 --> 00:44:25,620\nand where we want to provide that network\naddress translation, and it's all built\n\n832\n00:44:25,620 --> 00:44:29,720\naround the interfaces as you're going\nin and out of the various interfaces.\n\n833\n00:44:29,720 --> 00:44:33,777\nAll right.\n\n834\n00:44:33,777 --> 00:44:37,716\nSo we can just jump down in here into\nout NAT wizard, and we can fire it up.\n\n835\n00:44:37,716 --> 00:44:39,336\nNow, you've got basic NAT.\n\n836\n00:44:39,336 --> 00:44:41,061\nBasic NAT is really simple.\n\n837\n00:44:41,061 --> 00:44:43,824\nIt's gonna assume that all of your\ninternal people want to get translated on\n\n838\n00:44:43,824 --> 00:44:46,150\nthe way out, and\nthat's what a lot of people want.\n\n839\n00:44:46,150 --> 00:44:51,140\nIf you go to advanced NAT, see how\nthe diagram changed to bring in a DMZ.\n\n840\n00:44:51,140 --> 00:44:52,890\nBasic NAT, no DMZ.\n\n841\n00:44:52,890 --> 00:44:53,980\nAdvanced NAT, a DMZ.\n\n842\n00:44:53,980 --> 00:44:54,910\nAll right?\n\n843\n00:44:54,910 --> 00:44:58,270\nNow, your wizard choice is\njust influencing this wizard.\n\n844\n00:44:58,270 --> 00:44:59,850\nYou can always go and change it later on.\n\n845\n00:44:59,850 --> 00:45:01,794\nYou can add a DMZ if you want, but\n\n846\n00:45:01,794 --> 00:45:05,842\nthat's really all they're asking\nhere is do you have a DMZ or not.\n\n847\n00:45:05,842 --> 00:45:08,588\nWe'll go with basic for right now.\n\n848\n00:45:08,588 --> 00:45:09,850\nAll right.\n\n849\n00:45:09,850 --> 00:45:12,660\nAnd then when we launch the task, it's\njust gonna walk us through a series of\n\n850\n00:45:12,660 --> 00:45:19,370\nquestions where it determines what's\nthe best way to set up NAT for us.\n\n851\n00:45:19,370 --> 00:45:22,766\nAll right, now it doesn't know which\ninterface is considered connected to\n\n852\n00:45:22,766 --> 00:45:25,270\nthe internet and\nwhich one is considered on the inside.\n\n853\n00:45:25,270 --> 00:45:26,400\nSo that's the first thing it asks.\n\n854\n00:45:26,400 --> 00:45:30,120\nSo it says which of your\ninterfaces points to the internet?\n\n855\n00:45:30,120 --> 00:45:34,024\nAnd so I've got my choices between\nthe interfaces that are up right now,\n\n856\n00:45:34,024 --> 00:45:35,243\nso my gig interfaces.\n\n857\n00:45:35,243 --> 00:45:39,386\nI could chose GI01 or\nGI02 based on what I've got.\n\n858\n00:45:39,386 --> 00:45:43,909\nSo GI00 is the one for\nme that's facing the internet.\n\n859\n00:45:43,909 --> 00:45:45,740\nAll right.\n\n860\n00:45:45,740 --> 00:45:48,650\nThen down here you'll see\nthe following ranges of IPs\n\n861\n00:45:48,650 --> 00:45:51,750\nare allocated to the network,\ndirectly connected to the router.\n\n862\n00:45:51,750 --> 00:45:56,380\nCheck the box next to each network that is\nto share the connection that you specify.\n\n863\n00:45:56,380 --> 00:46:00,600\nThis is basically saying who's\nallowed to use NAT on that interface.\n\n864\n00:46:00,600 --> 00:46:02,070\nAnd why isn't it letting me check that?\n\n865\n00:46:03,430 --> 00:46:04,381\n>> I don't know.\n\n866\n00:46:05,751 --> 00:46:06,843\n>> Well, then.\n\n867\n00:46:08,857 --> 00:46:10,210\n>> It does give you a Next button, though.\n\n868\n00:46:12,020 --> 00:46:13,250\n>> Oh, you know what's going on here?\n\n869\n00:46:13,250 --> 00:46:14,980\nIt's a little confused.\n\n870\n00:46:14,980 --> 00:46:17,546\nSo we set up these interfaces\nprior to using the CCP, and\n\n871\n00:46:17,546 --> 00:46:19,458\nthe Cisco Configuration Professional,\n\n872\n00:46:19,458 --> 00:46:21,870\nit expects to have interfaces\nmapped a certain way.\n\n873\n00:46:21,870 --> 00:46:22,980\nI'm gonna cancel this.\n\n874\n00:46:24,020 --> 00:46:28,620\nBack here, under Edit NAT Configuration,\nyou'll see things like\n\n875\n00:46:28,620 --> 00:46:33,620\ndesignate NAT interfaces, and\nI've technically already done it because\n\n876\n00:46:33,620 --> 00:46:36,800\nI had it configured from the command line,\nso that's what it's upset about.\n\n877\n00:46:36,800 --> 00:46:38,210\nI'm just gonna clear those values.\n\n878\n00:46:40,880 --> 00:46:41,510\nThere we go.\n\n879\n00:46:41,510 --> 00:46:44,770\nWe turned off NAT, but\nit still had some of the remnants.\n\n880\n00:46:44,770 --> 00:46:48,330\nNow if I go back into the wizard,\nit should be a little happier.\n\n881\n00:46:48,330 --> 00:46:49,890\nThere we go.\n\n882\n00:46:49,890 --> 00:46:53,440\nNow I can pick which interface is\nconnected to the internet, and\n\n883\n00:46:53,440 --> 00:46:57,062\nthen I can tell it which network\nit is that I want to translate.\n\n884\n00:46:57,062 --> 00:46:58,040\nAll right.\n\n885\n00:46:58,040 --> 00:47:02,230\nNormally you'll see your public network\nin here and your private network.\n\n886\n00:47:02,230 --> 00:47:04,710\nNow for us, the 192.168.0 is the private.\n\n887\n00:47:04,710 --> 00:47:08,970\n10.1.230, that's technically a private,\nbut we're treating that as the internet,\n\n888\n00:47:08,970 --> 00:47:09,840\nas the public network.\n\n889\n00:47:10,930 --> 00:47:12,380\nSo I'm gonna just check that one off.\n\n890\n00:47:12,380 --> 00:47:15,150\nThat's the network that's gonna\nbe allowed to be translated.\n\n891\n00:47:17,200 --> 00:47:22,430\nAll right, when that's done,\nit implements the basic NAT for us.\n\n892\n00:47:22,430 --> 00:47:23,190\nReally straightforward,\n\n893\n00:47:23,190 --> 00:47:25,920\nit just says hey that internal network\nis gonna get translated translated to\n\n894\n00:47:25,920 --> 00:47:31,220\nthe IP address of that interface,\nof the GI00 interface on its way out.\n\n895\n00:47:31,220 --> 00:47:35,610\nAnd you can see the CLI commands\nthat need to be issued for that.\n\n896\n00:47:35,610 --> 00:47:40,290\nWe start off with an access list,\nsaying that the 192.168.0\n\n897\n00:47:40,290 --> 00:47:44,590\nnetwork is allowed to be NAT'd,\nand that's it, nobody else.\n\n898\n00:47:44,590 --> 00:47:48,167\nAnd then we designate an IP NAT inside and\noutside, saying which interface\n\n899\n00:47:48,167 --> 00:47:51,250\nis the inside interface and\nwhich one is the outside interface.\n\n900\n00:47:51,250 --> 00:47:53,000\nAnd lastly, we tie it all together.\n\n901\n00:47:53,000 --> 00:47:56,210\nAnd let's take a look at that line\ncuz that's the most important one.\n\n902\n00:47:56,210 --> 00:48:00,130\nThis is the most common\nexample of NAT right here.\n\n903\n00:48:00,130 --> 00:48:03,180\nIp nat,\nthat means that we're turning on NAT.\n\n904\n00:48:03,180 --> 00:48:04,830\nInside source.\n\n905\n00:48:04,830 --> 00:48:07,540\nSo where do our inside IPs come from?\n\n906\n00:48:07,540 --> 00:48:08,950\nAnd we say list four.\n\n907\n00:48:08,950 --> 00:48:12,090\nThe inside IPs are coming\nfrom access list number four\n\n908\n00:48:12,090 --> 00:48:14,960\nwhich up above shows 192.168.00.\n\n909\n00:48:14,960 --> 00:48:16,620\nThat's our inside IPs.\n\n910\n00:48:17,890 --> 00:48:20,660\nThen, that's the source,\nnow the destination.\n\n911\n00:48:20,660 --> 00:48:26,300\nThe destination is interface,\nGigabitEthernet0/0, so when they go out,\n\n912\n00:48:26,300 --> 00:48:30,670\ntranslate them to whatever IP\naddress is on GigabitEthernet0/0.\n\n913\n00:48:30,670 --> 00:48:33,000\nNow if we stopped right there,\nthat's one IP.\n\n914\n00:48:33,000 --> 00:48:37,070\nThe first person going through would be\nable to go out, everybody else would stop.\n\n915\n00:48:37,070 --> 00:48:39,950\nThat's why they add that keyword overload.\n\n916\n00:48:39,950 --> 00:48:45,380\nOverload means go ahead and do pat, let\nthem share that IP and now off they go.\n\n917\n00:48:45,380 --> 00:48:48,030\nAll right.\n\n918\n00:48:48,030 --> 00:48:52,990\nThat is basic NAT right there,\nbasic network address translation.\n\n919\n00:48:52,990 --> 00:48:56,510\nIf we cancel that though we can\nsee where we can do advanced.\n\n920\n00:48:56,510 --> 00:48:57,600\nAnd do I have to undo that?\n\n921\n00:48:57,600 --> 00:48:58,100\nNo, good.\n\n922\n00:48:59,880 --> 00:49:02,160\nLet's go into advanced.\n\n923\n00:49:02,160 --> 00:49:07,210\nAnd in advanced you have a few more\noptions here as far as designating\n\n924\n00:49:07,210 --> 00:49:09,540\nadditional public IP addresses.\n\n925\n00:49:09,540 --> 00:49:13,780\nAnd this is where we can start to\ndo things like one to one NAT or\n\n926\n00:49:13,780 --> 00:49:15,270\ndynamic with a pool.\n\n927\n00:49:15,270 --> 00:49:15,800\nRight?\n\n928\n00:49:15,800 --> 00:49:20,620\nSo I might come in and say sure,\nGI00 is my internet connection.\n\n929\n00:49:20,620 --> 00:49:21,191\nRight?\n\n930\n00:49:21,191 --> 00:49:23,662\nThat's my public address range.\n\n931\n00:49:23,662 --> 00:49:24,640\nRight?\n\n932\n00:49:24,640 --> 00:49:29,301\nBut then I can define my pool,\nand I can say you know what,\n\n933\n00:49:29,301 --> 00:49:31,643\nmy ISP gave me a bunch of IPs.\n\n934\n00:49:31,643 --> 00:49:35,788\nRight?\nSo maybe they gave me 180 through 187.\n\n935\n00:49:35,788 --> 00:49:43,230\nWill it not let me do a range here?\n\n936\n00:49:43,230 --> 00:49:44,253\n>> No, I think you have to\nenter them in one at a time.\n\n937\n00:49:44,253 --> 00:49:44,792\n>> Well, that's fun.\nThis would\n\n938\n00:49:44,792 --> 00:49:45,433\nbe faster from the command line.\n\n939\n00:49:45,433 --> 00:49:45,971\n>> [LAUGH]\n>> From the command line\n\n940\n00:49:45,971 --> 00:49:46,552\nyou can specify a whole range.\n\n941\n00:49:46,552 --> 00:49:48,850\nBut yeah, I guess here I'll\njust plug them in one by one.\n\n942\n00:49:48,850 --> 00:49:53,092\nAnd what I'm doing is I'm creating the\npool of IP addresses that, as people would\n\n943\n00:49:53,092 --> 00:49:56,914\ncome through, they'd be able to grab\nthese addresses and run with them.\n\n944\n00:49:56,914 --> 00:49:57,414\nRight?\n\n945\n00:50:00,141 --> 00:50:02,840\nAnd then here we defined who it is\nthat's gonna be NATed on the inside.\n\n946\n00:50:02,840 --> 00:50:06,230\nI'll pick my inside network,\nand we can add other networks.\n\n947\n00:50:06,230 --> 00:50:08,170\nIf we had a DMZ for example.\n\n948\n00:50:08,170 --> 00:50:11,644\nSo maybe I had this other network.\n\n949\n00:50:14,942 --> 00:50:16,860\nAnd so I can start to add that in.\n\n950\n00:50:16,860 --> 00:50:22,080\nAnd now I can specify all of\nthose in place, and, next,\n\n951\n00:50:22,080 --> 00:50:24,100\nany public IP addresses for servers.\n\n952\n00:50:24,100 --> 00:50:27,050\nIn other words, one-to-one mappings.\n\n953\n00:50:27,050 --> 00:50:29,390\nHere's where I can come in and\ndo true NAT.\n\n954\n00:50:29,390 --> 00:50:35,150\nI can say 192.168.0.200 is my email\nserver, and I'm gonna map that to 181.\n\n955\n00:50:35,150 --> 00:50:36,440\nAll right?\n\n956\n00:50:36,440 --> 00:50:38,955\nAnd I can even specify what\ntype of server it is if\n\n957\n00:50:38,955 --> 00:50:43,215\nyou really wanna go crazy with this stuff,\nbut you don't really have to do that.\n\n958\n00:50:43,215 --> 00:50:48,235\nIf you just leave it,\nit gets the whole thing.\n\n959\n00:50:48,235 --> 00:50:49,235\nThere we go.\n\n960\n00:50:49,235 --> 00:50:53,600\nAnd then I could add in,\nmaybe, 192.168.0.201 is 182.\n\n961\n00:50:53,600 --> 00:50:57,460\nAll right?\n\n962\n00:50:57,460 --> 00:51:00,160\nSo again, just direct one-to-one mapping.\n\n963\n00:51:00,160 --> 00:51:02,020\nThe other IPs will become\npart of the pool, but\n\n964\n00:51:02,020 --> 00:51:04,600\nthese are now designated permanently for\nthat host.\n\n965\n00:51:05,940 --> 00:51:06,770\nAll right?\n\n966\n00:51:06,770 --> 00:51:09,815\nAnd so when we finish that up,\nnow the commands are a little bit bigger.\n\n967\n00:51:09,815 --> 00:51:11,290\nRight?\nNow we've got a little bit more\n\n968\n00:51:11,290 --> 00:51:12,750\ninformation in here.\n\n969\n00:51:12,750 --> 00:51:17,540\nI hate it when they don't\nlet you resize the windows.\n\n970\n00:51:17,540 --> 00:51:18,880\nIs that too much to ask?\n\n971\n00:51:18,880 --> 00:51:19,610\nApparently so.\n\n972\n00:51:24,823 --> 00:51:25,981\nAll right.\n\n973\n00:51:25,981 --> 00:51:26,560\nLet's take a look at it here.\n\n974\n00:51:26,560 --> 00:51:27,520\nRight?\n\n975\n00:51:27,520 --> 00:51:30,330\nSo here we still have our\naccess list designating\n\n976\n00:51:30,330 --> 00:51:34,130\nnow more than one network as\nallowed to be translated.\n\n977\n00:51:34,130 --> 00:51:36,520\nWe have our inside and\noutside interface, but\n\n978\n00:51:36,520 --> 00:51:40,670\nyou'll see two different\nsets of IP NAT commands.\n\n979\n00:51:40,670 --> 00:51:45,780\nOne is ip nat inside source list 4\njust like in the last example, but\n\n980\n00:51:45,780 --> 00:51:48,050\nthe other two are one-to-one mappings.\n\n981\n00:51:48,050 --> 00:51:51,720\nSaying, ip nat inside source static.\n\n982\n00:51:51,720 --> 00:51:56,300\nStatically mapping this internal\nIP to this external IP, right?\n\n983\n00:51:58,018 --> 00:52:00,750\nThat's a one-to-one mapping, and\nthat's a pretty common thing for\n\n984\n00:52:00,750 --> 00:52:02,030\nserver rooms and DMZs.\n\n985\n00:52:03,580 --> 00:52:04,080\nAll right.\n\n986\n00:52:05,840 --> 00:52:10,277\nSo, I guess that really\ndoesn't show a pool does it?\n\n987\n00:52:10,277 --> 00:52:10,795\n>> No.\n[LAUGH]\n\n988\n00:52:10,795 --> 00:52:12,420\n>> I can do that from the command line.\n\n989\n00:52:12,420 --> 00:52:18,047\nLet me whip up the command line here,\nand I will show you guys the hard way.\n\n990\n00:52:18,047 --> 00:52:19,954\n>> [LAUGH]\n\n991\n00:52:23,077 --> 00:52:27,947\n>> All right.\n\n992\n00:52:27,947 --> 00:52:32,764\nSo to do it that hard way, to have\na pool where people just grab the first\n\n993\n00:52:32,764 --> 00:52:37,173\naddress as they go through,\nwhat we have to do is we have to create\n\n994\n00:52:37,173 --> 00:52:41,430\na pool of addresses in an ACL\nto allow people to use them.\n\n995\n00:52:41,430 --> 00:52:43,484\nSo, let's see if I already have an ACL.\n\n996\n00:52:43,484 --> 00:52:44,590\nI don't know if I do.\n\n997\n00:52:45,630 --> 00:52:46,904\nAccess number one.\n\n998\n00:52:46,904 --> 00:52:49,234\nSo I already have an access list.\n\n999\n00:52:53,275 --> 00:52:55,580\nRight here.\n\n1000\n00:52:55,580 --> 00:52:57,810\nThat basically says,\npermit 192.168.0.0 0.0.0.255, right?\n\n1001\n00:52:57,810 --> 00:52:59,460\nSo that's my internal network.\n\n1002\n00:52:59,460 --> 00:53:02,495\nSo I'm gonna use that access list,\n\n1003\n00:53:02,495 --> 00:53:05,830\naccess-list 1 identifies\nmy internal network.\n\n1004\n00:53:07,030 --> 00:53:11,320\nThis little remark statement here let's me\nknow that this ACL was actually created by\n\n1005\n00:53:11,320 --> 00:53:15,590\nthe Cisco configuration professional,\nso it's probably in use somewhere else.\n\n1006\n00:53:15,590 --> 00:53:19,330\nAnd for that reason I might wanna create\nmy own ACL just to be on the safe side.\n\n1007\n00:53:19,330 --> 00:53:20,360\nI guess we can do that.\n\n1008\n00:53:20,360 --> 00:53:22,206\nI mean it's the same syntax.\n\n1009\n00:53:29,223 --> 00:53:33,200\nLet's see access list two.\n\n1010\n00:53:33,200 --> 00:53:33,702\nThere we go.\n\n1011\n00:53:33,702 --> 00:53:36,230\nAll right.\nSo now I've got an access list.\n\n1012\n00:53:36,230 --> 00:53:38,618\nAll right?\nNext, I need to create a pool.\n\n1013\n00:53:38,618 --> 00:53:44,880\nNow, the pool is created with\nthe ip nat pool command.\n\n1014\n00:53:44,880 --> 00:53:45,398\nAll right?\n\n1015\n00:53:45,398 --> 00:53:46,900\nAnd it's a pretty easy thing.\n\n1016\n00:53:46,900 --> 00:53:48,030\nYou give it a name.\n\n1017\n00:53:48,030 --> 00:53:52,525\nRight?\nSo I'll call this the itprotv-net-pool.\n\n1018\n00:53:53,610 --> 00:53:54,370\nAll right?\n\n1019\n00:53:54,370 --> 00:53:58,532\nAnd then you specify a starting IP and\nan ending IP.\n\n1020\n00:53:58,532 --> 00:54:02,020\nAnd so, maybe for me,\n\n1021\n00:54:02,020 --> 00:54:08,140\nI've got 209.251.133.180\nthrough 209.251.133.187.\n\n1022\n00:54:08,140 --> 00:54:12,020\nRight?\nFollowed by the netmask, and\n\n1023\n00:54:12,020 --> 00:54:16,580\nyou have to type this\nobnoxious netmask command, but\n\n1024\n00:54:16,580 --> 00:54:20,632\nbasically you just come in and specify\nthe network range that they're a part of.\n\n1025\n00:54:20,632 --> 00:54:21,890\nAll right?\n\n1026\n00:54:21,890 --> 00:54:25,420\nThat creates the pool of addresses\navailable for my host to use.\n\n1027\n00:54:25,420 --> 00:54:27,640\nAnd I just created a pool of eight IPs.\n\n1028\n00:54:27,640 --> 00:54:28,140\nAll right?\n>> Yeah.\n\n1029\n00:54:28,140 --> 00:54:30,230\nAnd I can't tell you how many\n\n1030\n00:54:30,230 --> 00:54:32,220\ntimes I've tried to do this, and\nI've just forgotten the key word netmask.\n\n1031\n00:54:32,220 --> 00:54:36,600\nThen i read netmask, and I think,\noh, that's all it means.\n\n1032\n00:54:36,600 --> 00:54:38,260\nBut they literally mean for\nyou to type that in.\n\n1033\n00:54:38,260 --> 00:54:38,950\n>> Yeah.\n\n1034\n00:54:38,950 --> 00:54:39,956\n>> Man, that's frustrating.\n\n1035\n00:54:39,956 --> 00:54:41,340\n[LAUGH]\n>> I forget it every time.\n\n1036\n00:54:41,340 --> 00:54:47,430\nWell, I remember that I forget it which\nis kind of ironic, and so now I type it.\n\n1037\n00:54:47,430 --> 00:54:51,515\nAll right,\nnow we just need to tie it together.\n\n1038\n00:54:51,515 --> 00:54:54,210\nSo we say ip net source list 2.\n\n1039\n00:54:54,210 --> 00:54:58,358\nSo my internal IPs are coming from\nan access list, access list number 2.\n\n1040\n00:54:58,358 --> 00:54:58,940\nRight?\n\n1041\n00:54:58,940 --> 00:55:04,313\nSo my nat source is access list number\ntwo, and then for my destination,\n\n1042\n00:55:04,313 --> 00:55:09,069\ninstead of specifying an interface\nlike in the other examples,\n\n1043\n00:55:09,069 --> 00:55:11,270\nI'm gonna specify a pool.\n\n1044\n00:55:11,270 --> 00:55:12,780\nI shouldn't say my destination.\n\n1045\n00:55:12,780 --> 00:55:14,895\nMy translated address, right?\n\n1046\n00:55:14,895 --> 00:55:15,564\nMy new source.\n\n1047\n00:55:15,564 --> 00:55:16,340\n>> The pools.\nYeah.\n\n1048\n00:55:16,340 --> 00:55:18,690\n>> So I can specify a pool.\n\n1049\n00:55:18,690 --> 00:55:22,807\nAnd I'll say itprotv-net-pool.\n\n1050\n00:55:22,807 --> 00:55:24,420\nAll right?\n\n1051\n00:55:24,420 --> 00:55:30,230\nIf I stop right there,\nit is a one-to-one feeding frenzy.\n\n1052\n00:55:30,230 --> 00:55:32,940\nAs everybody goes out,\nthey're gonna grab an IP.\n\n1053\n00:55:32,940 --> 00:55:35,420\nIf I have eight hosts, perfect.\n\n1054\n00:55:35,420 --> 00:55:38,080\nEverybody gets their own IP,\nand that's the end of it.\n\n1055\n00:55:38,080 --> 00:55:40,670\nBut if I have nine hosts, the number nine?\n\n1056\n00:55:40,670 --> 00:55:42,300\n>> Yeah.\n>> Number nine gets the shaft right?\n\n1057\n00:55:42,300 --> 00:55:45,420\nSo it can't get to the Internet, and\nthey're just out of luck, right?\n\n1058\n00:55:45,420 --> 00:55:49,455\nUnless, and I don't think the textbooks\ndon't normally show this, but\n\n1059\n00:55:49,455 --> 00:55:52,590\nyou can actually use the overload\ncommand with the pool.\n\n1060\n00:55:52,590 --> 00:55:53,670\nA lot of people don't know that.\n\n1061\n00:55:53,670 --> 00:55:54,550\n>> I did not know that.\n\n1062\n00:55:54,550 --> 00:55:56,954\n>> I created a pool of eight addresses,\n\n1063\n00:55:56,954 --> 00:56:00,214\nthe first seven are given\nout on a one-to-one and\n\n1064\n00:56:00,214 --> 00:56:05,052\nthen when it gets to the eighth one\nit'll start padding on the eighth one.\n\n1065\n00:56:05,052 --> 00:56:08,806\nAll right, so\nnot the best solution in the world, but\n\n1066\n00:56:08,806 --> 00:56:13,143\nthe first seven people get their\nown IP and it's awesome, and\n\n1067\n00:56:13,143 --> 00:56:18,579\nthen the remainder that get stuck on\nthat eighth one, they would get padded.\n\n1068\n00:56:18,579 --> 00:56:22,571\nBut normally if we're going through\nthe trouble of designated pool, we're not\n\n1069\n00:56:22,571 --> 00:56:26,579\ngonna do a path statement on the end of\nit, and so we're going to map it together.\n\n1070\n00:56:26,579 --> 00:56:31,320\nNow as people go out they are going to get\na random IP generated from this pool, and\n\n1071\n00:56:31,320 --> 00:56:35,923\nyou know if we, oh I'm forgetting a step,\nI haven't designated my inside and\n\n1072\n00:56:35,923 --> 00:56:39,593\noutside interfaces, so for\nme gi0/0 is my outside, and,\n\n1073\n00:56:46,675 --> 00:56:51,918\nIt's thinking about it,\nThere we go, just you know pause,\n\n1074\n00:56:51,918 --> 00:56:57,802\nmaking you doubt yourself, that's what the\nrouters do, and then this ones my inside.\n\n1075\n00:56:57,802 --> 00:57:00,380\nAll right, you've got to do that step or\nit won't work,\n\n1076\n00:57:00,380 --> 00:57:05,940\nyou will only translate when you pass from\ninside to outside, or outside to inside.\n\n1077\n00:57:05,940 --> 00:57:10,420\nIf you go inside to untagged, or you know,\noutside to untagged or whatever,\n\n1078\n00:57:10,420 --> 00:57:13,682\nit won't NAT, you know, it's got to be\ninside to outside or outside to inside.\n\n1079\n00:57:13,682 --> 00:57:17,900\nAll right, now that it's done,\nit's Natting and\n\n1080\n00:57:17,900 --> 00:57:22,030\nyou can run the show IP NAT\ntranslations command,\n\n1081\n00:57:24,862 --> 00:57:26,957\nAnd see what translations are in place,\n\n1082\n00:57:26,957 --> 00:57:31,466\nnobody's passing through this router right\nnow, let me generate some fake traffic.\n\n1083\n00:57:31,466 --> 00:57:36,589\nLet's see, I'm gonna have to get a little\ncreative here, aren't I, route add.\n\n1084\n00:57:36,589 --> 00:57:43,610\nOh wait, Windows has their own little,\n\n1085\n00:57:43,610 --> 00:57:47,534\nis it mask or netmask,\n\n1086\n00:57:47,534 --> 00:57:51,878\nI think it's just mask.\n\n1087\n00:57:51,878 --> 00:57:55,070\n>> I think it's mask, yeah.\n\n1088\n00:57:55,070 --> 00:57:56,590\n>> And it's gonna maybe change that,\n\n1089\n00:57:56,590 --> 00:58:02,250\nWindows gets a little picky\nabout this stuff sometimes, oh,\n\n1090\n00:58:02,250 --> 00:58:05,630\nI forgot to run it with administrative\nprivileges, thank you Windows for\n\n1091\n00:58:05,630 --> 00:58:10,965\nprotecting me from myself, God forbid I\nwas able to put a route in on this thing.\n\n1092\n00:58:10,965 --> 00:58:15,606\n[LAUGH] There we go, route add 192.16,\n\n1093\n00:58:15,606 --> 00:58:20,125\nthat's not what I wanted, 4.2.2.0\n\n1094\n00:58:20,125 --> 00:58:26,390\nnetmask, Or wait,\ndidn't we say it was just mask?\n\n1095\n00:58:26,390 --> 00:58:26,920\n>> Yeah it was mask.\n\n1096\n00:58:26,920 --> 00:58:27,420\n>> Yeah, It's just mask.\n\n1097\n00:58:33,044 --> 00:58:37,297\nNow this isn't gonna work cuz I'm\ngonna get translated to a bad, oh,\n\n1098\n00:58:37,297 --> 00:58:40,846\nI say it's not gonna work and\nthen it works, doesn't it?\n\n1099\n00:58:40,846 --> 00:58:44,028\nAll right so, I just started up a ping,\nand it's running, and\n\n1100\n00:58:44,028 --> 00:58:47,347\nI didn't really think it was gonna work,\nbut apparently it did.\n\n1101\n00:58:50,053 --> 00:58:51,760\nOh, I'm not actually passing\nthrough this router,\n\n1102\n00:58:53,250 --> 00:58:54,440\n>> How's that possible?\n\n1103\n00:58:54,440 --> 00:58:57,010\nOh, you could be going out\nover your other connection.\n\n1104\n00:58:57,010 --> 00:58:59,660\n>> Yeah,\nI've got more than one connection, and\n\n1105\n00:58:59,660 --> 00:59:03,900\nhere I am doing Cisco commands, and\nWindows apparently decided to ignore my\n\n1106\n00:59:03,900 --> 00:59:09,690\nroute statement that I just put in there,\n4.2.2.0 should be sent to 192.168.0.1.\n\n1107\n00:59:09,690 --> 00:59:13,660\n>> And still ignore it.\n\n1108\n00:59:13,660 --> 00:59:17,739\n>> Well see what I've got here,\nlike this one has a metric of 21, but\n\n1109\n00:59:17,739 --> 00:59:22,120\nthis default gateway here as a metric\nof 10, so Windows is being dumb.\n\n1110\n00:59:22,120 --> 00:59:26,645\nAll right, well there's not much I'm going\nto be able to do about that, actually,\n\n1111\n00:59:26,645 --> 00:59:30,150\ncan't I stick like metric 1,\nyou know, it's stuff like this,\n\n1112\n00:59:30,150 --> 00:59:32,220\nthis is why people get mad at Windows.\n\n1113\n00:59:36,329 --> 00:59:40,010\nYou can't abbreviate delete,\nno, that would be crazy talk.\n\n1114\n00:59:40,010 --> 00:59:44,185\n>> Yes you can, you can change the metric.\n\n1115\n00:59:44,185 --> 00:59:51,072\n>> Let's try it now,\nThat's not going the right way though,\n\n1116\n00:59:51,072 --> 00:59:54,046\nso I know it's not going the right\nway because when I do a show IP NAT\n\n1117\n00:59:54,046 --> 00:59:57,980\ntranslation, the translation should\nshow up there and it's not showing up.\n\n1118\n00:59:57,980 --> 01:00:02,666\nIf I had done like a static NAT mapping,\n\n1119\n01:00:02,666 --> 01:00:10,478\nif I had said ip nat source\nstatic 192.168.0.222,\n\n1120\n01:00:10,478 --> 01:00:15,590\nthat's my IP, and then for the outside put\n\n1121\n01:00:15,590 --> 01:00:23,555\nin like 209.251.133.180A,\nright, like that.\n\n1122\n01:00:26,306 --> 01:00:28,268\nAnd then it's not gonna\nshow until I trigger it and\n\n1123\n01:00:28,268 --> 01:00:31,351\nI'm not triggering it right now cuz I'm\nnot going through it, dadgummit, so\n\n1124\n01:00:31,351 --> 01:00:33,560\nI'm not gonna be able\nto see it there either.\n\n1125\n01:00:33,560 --> 01:00:36,330\nAll right, well, you'll normally\nsee that translation occurring,\n\n1126\n01:00:36,330 --> 01:00:39,720\nI'm just not passing through the system,\nmy laptop has to be connected to more than\n\n1127\n01:00:39,720 --> 01:00:43,000\none network so that you guys can see the\nscreen, but I can also pass that router,\n\n1128\n01:00:43,000 --> 01:00:45,730\nso it's just not sending\nit along very nicely.\n\n1129\n01:00:45,730 --> 01:00:50,030\nSo anyhow, that's what's involved\nwith doing that translation,\n\n1130\n01:00:50,030 --> 01:00:56,380\nit is important that if you're going to do\nNAT, you want to do it on your firewall,\n\n1131\n01:00:56,380 --> 01:00:59,040\nbecause otherwise it's a nightmare\nto figure out your rules.\n\n1132\n01:00:59,040 --> 01:01:02,140\nWhat IP is a host gonna have at\na certain point in your network?\n\n1133\n01:01:02,140 --> 01:01:03,840\nWell, if your firewall\ndoes the translation,\n\n1134\n01:01:03,840 --> 01:01:06,800\nthen it knows where it's gonna happen,\nand that's why we talk about NAT\n\n1135\n01:01:06,800 --> 01:01:10,890\nin the security show, you know,\nit may not seem like a security topic, but\n\n1136\n01:01:10,890 --> 01:01:13,380\nit is something you want to\nimplement on your security device.\n\n1137\n01:01:14,930 --> 01:01:16,390\n>> Yeah after we get\nback from our break we'll\n\n1138\n01:01:16,390 --> 01:01:19,050\ntake a look at doing it on the ASA right?\n\n1139\n01:01:19,050 --> 01:01:21,270\n>> You know I forgot all about\nthat Ronnie, absolutely, so\n\n1140\n01:01:21,270 --> 01:01:25,590\nwhat we've got is we still have\nimplementing the firewall on the router\n\n1141\n01:01:25,590 --> 01:01:27,850\nand implementing the firewall on the ASA.\n\n1142\n01:01:27,850 --> 01:01:32,330\nAnd when we do the ASA we'll take a look\nat NAT and Pat and all that on the ASA\n\n1143\n01:01:32,330 --> 01:01:37,160\nalso, so let's tackle that and\nthat should actually be\n\n1144\n01:01:37,160 --> 01:01:40,430\nquite a bit of stuff right there so I hope\nwe can get through it all in one show.\n\n1145\n01:01:40,430 --> 01:01:43,385\nAll right, well ladies and\ngentlemen stay tuned,\n\n1146\n01:01:43,385 --> 01:01:47,449\nwhen we get back actual firewall\nimplementation on Routers and ASAs.\n\n1147\n01:01:47,449 --> 01:01:54,805\n[MUSIC]\n\n1148\n01:01:54,805 --> 01:01:57,627\nAll right, welcome back everybody, so\n\n1149\n01:01:57,627 --> 01:02:01,610\nnow we took a look at NAT\non a Cisco router, right?\n\n1150\n01:02:01,610 --> 01:02:04,200\nNow we're gonna take a look at an ASA,\nall right?\n\n1151\n01:02:04,200 --> 01:02:09,130\nNow technically this is the first time\nin the IINS Show that we've really\n\n1152\n01:02:09,130 --> 01:02:12,040\ntouched an ASA, so, on the router side,\n\n1153\n01:02:12,040 --> 01:02:14,680\nwe've been using\nthe Cisco Configuration Professional,\n\n1154\n01:02:14,680 --> 01:02:18,690\npretty much the whole time because it is,\neven on the exam, it's really GUI-based.\n\n1155\n01:02:18,690 --> 01:02:24,540\nOn the ASA, you almost always use the\ngraphical user interface, on the router,\n\n1156\n01:02:24,540 --> 01:02:29,570\nit's the Cisco Configuration Professional,\non the firewall, it is the ASDM or\n\n1157\n01:02:29,570 --> 01:02:34,570\nthe Adaptive security device manager,\nASDM,\n\n1158\n01:02:34,570 --> 01:02:37,280\nand that's the utility were going\nto use to manage our firewalls.\n\n1159\n01:02:37,280 --> 01:02:41,200\nNow every complaint that I have about the\nCisco Configuration Professional is pretty\n\n1160\n01:02:41,200 --> 01:02:45,788\nmuch the same in the ASDM, right, it is\njava-based, and so you have some little\n\n1161\n01:02:45,788 --> 01:02:50,530\nquirks there, I had to downgrade Java\non my laptop to make this thing work.\n\n1162\n01:02:50,530 --> 01:02:55,110\nBut they are a little bit better about\nupdating the ASDM than they are with\n\n1163\n01:02:55,110 --> 01:02:59,240\nupdating the CCP, so\nlet's jump over to my computer and\n\n1164\n01:02:59,240 --> 01:03:02,320\nI've got the ASDM fired up and going.\n\n1165\n01:03:02,320 --> 01:03:06,670\nSo, when you log into a Cisco ASA the\nfirst time this is basically the screen\n\n1166\n01:03:06,670 --> 01:03:11,160\nthat you see, it's a home screen that\ngives you a summary of what's going on,\n\n1167\n01:03:11,160 --> 01:03:12,020\non the firewall.\n\n1168\n01:03:12,020 --> 01:03:14,820\nYou see some information\nabout the firewall here,\n\n1169\n01:03:14,820 --> 01:03:19,270\nyou see some traffic statistics down here,\nshowing how much is passing through, and\n\n1170\n01:03:19,270 --> 01:03:22,020\nhere's the actual\nactivity on the firewall.\n\n1171\n01:03:22,020 --> 01:03:26,909\nThen you see your list of interfaces and\nthe IPs attached to them and so\n\n1172\n01:03:26,909 --> 01:03:30,876\non, it's all just kind of laid out in a,\nat a glance type view.\n\n1173\n01:03:30,876 --> 01:03:34,410\n>> Fairly similar though, to the CCP\nthough is the configuration side of it,\n\n1174\n01:03:34,410 --> 01:03:38,053\nif you take a look at that top bar, you\nactually do see that there is a link there\n\n1175\n01:03:38,053 --> 01:03:41,811\nfor configuration and from that point,\nyou're really looking down on the left\n\n1176\n01:03:41,811 --> 01:03:45,545\nhand side here to find what it is that\nwe're going to need to configure for NAT.\n\n1177\n01:03:45,545 --> 01:03:49,338\n>> Now, if you are just starting out,\nyou'll probably need to launch this start\n\n1178\n01:03:49,338 --> 01:03:52,729\nup wizard where it walks you through\nsetting IPs on your interfaces and\n\n1179\n01:03:52,729 --> 01:03:55,160\nuser names and passwords and\nall that good stuff.\n\n1180\n01:03:55,160 --> 01:03:58,050\nIf you've already done\nthe configuration you might need to\n\n1181\n01:03:58,050 --> 01:04:02,590\nStep over to interfaces to adjust some\nIP addresses, enable and disable things.\n\n1182\n01:04:02,590 --> 01:04:05,340\nSo you can work with\nall of that from there.\n\n1183\n01:04:05,340 --> 01:04:06,120\nAll right?\n\n1184\n01:04:06,120 --> 01:04:09,940\nBut what we're concerned about\nis network address translation.\n\n1185\n01:04:09,940 --> 01:04:13,660\nWell, the device setup, that's all\njust like basic functionality, but\n\n1186\n01:04:13,660 --> 01:04:16,270\nright beneath that, you'll see Firewall.\n\n1187\n01:04:16,270 --> 01:04:20,020\nAnd you'll see where Cisco has\ngrouped together access rules,\n\n1188\n01:04:20,020 --> 01:04:25,250\nwhich is the actual filtering of traffic,\nand NAT rules, or translation.\n\n1189\n01:04:25,250 --> 01:04:29,020\nAnd it goes back to what I said before\nthe break, it's always best to do NAT\n\n1190\n01:04:29,020 --> 01:04:33,310\non your firewall, so that your firewall\nunderstands that machines might have\n\n1191\n01:04:33,310 --> 01:04:36,150\nmore than one IP and it can use\nthat when it's applying the rules.\n\n1192\n01:04:36,150 --> 01:04:37,730\n>> Right.\n\n1193\n01:04:37,730 --> 01:04:39,946\n>> All right,\nnow NAT rules on a firewall are weird.\n\n1194\n01:04:39,946 --> 01:04:40,512\nAll right.\n\n1195\n01:04:40,512 --> 01:04:43,463\n>> [LAUGH]\n>> They're weird just because the firewall\n\n1196\n01:04:43,463 --> 01:04:46,770\nis doing,\nusually a lot more detailed work.\n\n1197\n01:04:46,770 --> 01:04:49,695\nAnd so\nit lays out the rules in two directions.\n\n1198\n01:04:49,695 --> 01:04:53,265\nNow you only create the rule once,\nbut it just shows on screen twice.\n\n1199\n01:04:53,265 --> 01:04:56,540\nAnd so you'll see,\nlike if you look at rule number two,\n\n1200\n01:04:56,540 --> 01:04:59,620\nthere's inside to outside and\nthere's outside to inside.\n\n1201\n01:04:59,620 --> 01:05:03,120\nAnd if you look across the line you'll see\nwhere all the fields are just reversed.\n\n1202\n01:05:03,120 --> 01:05:03,630\nRight?\n\n1203\n01:05:03,630 --> 01:05:05,790\nSo it's NATing from both directions,\n\n1204\n01:05:05,790 --> 01:05:09,200\nfor us going out as well\nas the outside coming in.\n\n1205\n01:05:09,200 --> 01:05:13,970\nBased on this rule alone,\nthis would allow all traffic from\n\n1206\n01:05:13,970 --> 01:05:17,970\nan internal host to an outside and all\ntraffic from the outside to the inside.\n\n1207\n01:05:17,970 --> 01:05:21,380\nSo we couple this with access rules,\nwith those firewall rules,\n\n1208\n01:05:21,380 --> 01:05:24,624\nto filter what traffic is\nallowed to get through.\n\n1209\n01:05:24,624 --> 01:05:25,936\nAll right.\n\n1210\n01:05:25,936 --> 01:05:28,970\nSo as we kinda go down the list here,\nwell these are a little confusing, so\n\n1211\n01:05:28,970 --> 01:05:29,800\nlet's create a new one.\n\n1212\n01:05:29,800 --> 01:05:31,800\nI'm gonna add an all new rule.\n\n1213\n01:05:31,800 --> 01:05:35,650\nAnd when you add a NAT rule\nyou're basically specifying\n\n1214\n01:05:35,650 --> 01:05:40,250\nwhat is the address on the inside and\nwhat do you want it to be on the outside.\n\n1215\n01:05:40,250 --> 01:05:42,840\nAnd so you'll see that's really\nwhat this form amounts to.\n\n1216\n01:05:42,840 --> 01:05:48,450\nIf you're gonna be doing PAT\nyou can specify ports also.\n\n1217\n01:05:48,450 --> 01:05:52,795\nSo you'll see not only just destination\naddress but you'll also see service.\n\n1218\n01:05:52,795 --> 01:05:55,048\nRight?\nWhat port number is it using?\n\n1219\n01:05:55,048 --> 01:05:57,550\nAnd you could translate to a different\nport number if you want to.\n\n1220\n01:05:57,550 --> 01:06:00,150\nThat's what a lot of people do on their\nhome routers when they're doing like port\n\n1221\n01:06:00,150 --> 01:06:03,800\nforwarding, you're really\ndoing PAT when you do that.\n\n1222\n01:06:03,800 --> 01:06:05,150\n>> So,\nif you would take a look at that top\n\n1223\n01:06:05,150 --> 01:06:07,382\nsection there where it talks\nabout original packet.\n\n1224\n01:06:07,382 --> 01:06:10,620\nThat's gonna be our pool of\naddresses that we want translated.\n\n1225\n01:06:10,620 --> 01:06:14,330\nAnd then the action down there where\nwe talk about translated packet,\n\n1226\n01:06:14,330 --> 01:06:15,865\nthat's what's gonna be on the output side.\n\n1227\n01:06:15,865 --> 01:06:19,734\n>> Yep.\nAnd you'll see where we can create Static,\n\n1228\n01:06:19,734 --> 01:06:21,695\nDynamic or Dynamic PAT.\n\n1229\n01:06:21,695 --> 01:06:23,860\nRight?\nSo Static, a one-to-one mapping.\n\n1230\n01:06:23,860 --> 01:06:26,570\nDynamic, a one to a pool mapping.\n\n1231\n01:06:26,570 --> 01:06:31,640\nAnd then Dynamic PAT where we do\noverloading or whatever on a single IP.\n\n1232\n01:06:31,640 --> 01:06:33,750\nSo a couple of different choices there.\n\n1233\n01:06:33,750 --> 01:06:35,284\nLet's just create that basic rule.\n\n1234\n01:06:35,284 --> 01:06:39,720\nSo, I'll come in here and I'll say my\nsource interface, my inside interface and\n\n1235\n01:06:39,720 --> 01:06:43,880\nmy source address is going to be 192.168.,\n\n1236\n01:06:43,880 --> 01:06:49,532\nI didn't even pay attention to inside,\nwe'll say 0.0/24.\n\n1237\n01:06:49,532 --> 01:06:52,310\nAll right,\nthe destination will be anybody, but\n\n1238\n01:06:52,310 --> 01:06:55,380\nI'm gonna say going out\nmy outside interface.\n\n1239\n01:06:55,380 --> 01:07:01,370\nSo when I have traffic going from\ninside to outside from these ranges,\n\n1240\n01:07:01,370 --> 01:07:05,290\nthis network,\nwhat do I wanna translate it into?\n\n1241\n01:07:05,290 --> 01:07:07,930\nAnd I can do Static,\nDynamic, or Dynamic PAT.\n\n1242\n01:07:07,930 --> 01:07:12,950\nAnd normally we would do Dynamic PAT\nwith the source address changing\n\n1243\n01:07:12,950 --> 01:07:14,980\nto be the interface address.\n\n1244\n01:07:14,980 --> 01:07:16,510\nAnd you can go through here and pick, and\n\n1245\n01:07:16,510 --> 01:07:18,550\nI'll pick the outside\ninterface right here.\n\n1246\n01:07:20,200 --> 01:07:21,590\nAnd I'll say OK.\n\n1247\n01:07:21,590 --> 01:07:24,896\nSo now it's saying when\nanybody on this network,\n\n1248\n01:07:24,896 --> 01:07:30,486\nthe 192.168.0.0 network, when they\ngo to the outside network, change\n\n1249\n01:07:30,486 --> 01:07:35,862\ntheir source address to whatever the other\naddress of the outside interface is.\n\n1250\n01:07:35,862 --> 01:07:36,692\nAll right.\n\n1251\n01:07:36,692 --> 01:07:42,490\nSo that's the typical example of doing\nPort Address Translation with overload.\n\n1252\n01:07:42,490 --> 01:07:47,630\nWe're overloading that outside interface\nto carry traffic for many, many machines.\n\n1253\n01:07:49,160 --> 01:07:52,735\nAll right, and when I say OK to that,\nwe didn't get any [CROSSTALK]\n\n1254\n01:07:52,735 --> 01:07:53,985\n>> Source address.\n\n1255\n01:07:53,985 --> 01:07:57,750\n>> I didn't pay attention to\nwhat the inside network was.\n\n1256\n01:07:57,750 --> 01:07:59,300\nThere should be an alias for\nit though, right?\n\n1257\n01:07:59,300 --> 01:08:03,070\nLet's see if I can find the alias here.\n\n1258\n01:08:03,070 --> 01:08:05,670\nAll insights, they're using a class B.\n\n1259\n01:08:05,670 --> 01:08:06,810\nSo we'll just take that one.\n\n1260\n01:08:08,820 --> 01:08:09,360\nThat'll make it happy.\n\n1261\n01:08:10,920 --> 01:08:14,260\nThere we go, there.\n\n1262\n01:08:14,260 --> 01:08:18,330\nSo now I've got that in there and it's put\nin place and now I'm able to translate.\n\n1263\n01:08:18,330 --> 01:08:23,450\nNow on an ASA these rules are applied in\norder starting from the top to bottom.\n\n1264\n01:08:23,450 --> 01:08:25,960\nSo keep that in mind that you\nmight need to adjust the order,\n\n1265\n01:08:25,960 --> 01:08:29,150\nyou'll see you've got little up and\ndown arrows to move things around so\n\n1266\n01:08:29,150 --> 01:08:31,970\nthat you can kind of tweak\nwhat's tied to what.\n\n1267\n01:08:31,970 --> 01:08:32,720\nAll right?\n\n1268\n01:08:32,720 --> 01:08:37,750\nNow up here,\nthese are general really network rules.\n\n1269\n01:08:37,750 --> 01:08:41,420\nThey collect traffic from\na number of machines.\n\n1270\n01:08:41,420 --> 01:08:43,990\nBut down here these are what\nare called network object rules.\n\n1271\n01:08:43,990 --> 01:08:47,822\nThese are generally one to ones,\nsee how I've got an object,\n\n1272\n01:08:47,822 --> 01:08:52,480\n10.1.1.10 and\nit's being mapped to 100.1.1.100.\n\n1273\n01:08:52,480 --> 01:08:56,570\nAnd you'll see here's another one where\nyou get these one-to-one mappings.\n\n1274\n01:08:56,570 --> 01:09:01,750\nAnd so if you do one-to-one mappings,\nthose override the network ones up above.\n\n1275\n01:09:01,750 --> 01:09:06,060\nSo they are applied in order from top to\nbottom, but technically these bottom ones\n\n1276\n01:09:06,060 --> 01:09:10,030\nare applied first, and then the ones up\nhere are applied again from top to bottom.\n\n1277\n01:09:10,030 --> 01:09:10,915\nIt's a little weird.\n\n1278\n01:09:10,915 --> 01:09:12,560\n>> Yeah.\n\n1279\n01:09:12,560 --> 01:09:15,270\n>> Another thing worth mentioning,\n\n1280\n01:09:15,270 --> 01:09:20,530\nif you're running iOS on the Cisco ASAs,\nthe ASA operating system,\n\n1281\n01:09:20,530 --> 01:09:23,970\nCisco calls it the iOS but it really\nisn't cuz it's kind of its own thing.\n\n1282\n01:09:23,970 --> 01:09:28,270\nAnd it changed in iOS 8.2, and\n\n1283\n01:09:28,270 --> 01:09:34,340\nearlier the NAT rules written one way,\n\n1284\n01:09:34,340 --> 01:09:37,060\nand then in 8.3 and later,\nthey're written another way.\n\n1285\n01:09:37,060 --> 01:09:40,080\nSo if you're in 8.2 or earlier,\nyou won't see this bottom part.\n\n1286\n01:09:40,080 --> 01:09:42,984\nWe didn't have network object\nNAT in 8.2 and earlier.\n\n1287\n01:09:42,984 --> 01:09:47,657\nBut in 8.3 and higher you do, and so your\noutput on this screen might be a little\n\n1288\n01:09:47,657 --> 01:09:52,022\nbit different based on the version of\niOS you're running on the firewall.\n\n1289\n01:09:52,022 --> 01:09:54,022\nAll right, so just keep that in mind.\n\n1290\n01:09:54,022 --> 01:09:57,823\nNAT is a little more complex to configure,\nbut you're better off doing it here\n\n1291\n01:09:57,823 --> 01:10:01,451\nbecause this is where you're gonna be\nconfiguring your firewall rules and\n\n1292\n01:10:01,451 --> 01:10:04,230\nsetting up your zones and\naccess and all that good stuff.\n\n1293\n01:10:04,230 --> 01:10:07,440\n>> Now Don,\ncorrect me if I'm wrong here on this one.\n\n1294\n01:10:07,440 --> 01:10:09,940\nWhat happens if I don't hit Apply on this,\nis that okay?\n\n1295\n01:10:09,940 --> 01:10:11,110\n>> No.\n\n1296\n01:10:11,110 --> 01:10:12,480\n>> [LAUGH]\n>> No, no it's not.\n\n1297\n01:10:12,480 --> 01:10:13,980\nA common mistake, right?\n\n1298\n01:10:13,980 --> 01:10:16,488\nSo when you make changes\non the ASA like this,\n\n1299\n01:10:16,488 --> 01:10:19,000\nit doesn't take effect\nuntil you hit Apply.\n\n1300\n01:10:20,127 --> 01:10:26,001\nAnd even when you hit Apply that\ntakes effect on the firewall itself,\n\n1301\n01:10:26,001 --> 01:10:29,949\nbut if you look down here,\nI was gonna try and,\n\n1302\n01:10:29,949 --> 01:10:34,220\nwhen I resized it,\nit made the symbol disappear.\n\n1303\n01:10:34,220 --> 01:10:35,730\nI wanted to show this symbol.\n\n1304\n01:10:37,120 --> 01:10:37,990\nLet's see what I can do here.\n\n1305\n01:10:37,990 --> 01:10:42,688\nLet me just disable this rule and\nthen I'll re-enable it.\n\n1306\n01:10:46,148 --> 01:10:46,938\nThere.\n\n1307\n01:10:46,938 --> 01:10:48,488\nSee this little symbol\nthat appeared down here?\n\n1308\n01:10:48,488 --> 01:10:53,688\nIt's right [CROSSTALK].\n\n1309\n01:10:53,688 --> 01:10:54,760\nIt just went away.\n\n1310\n01:10:54,760 --> 01:10:59,105\nAnyhow, that little floppy disk icon,\nwhen you save on an ASA.\n\n1311\n01:10:59,105 --> 01:11:01,110\n>> [LAUGH]\n>> It's basically saving it to the running\n\n1312\n01:11:01,110 --> 01:11:02,320\nconfiguration.\n\n1313\n01:11:02,320 --> 01:11:05,690\nIt doesn't save it to the startup\nconfiguration until you hit the Save\n\n1314\n01:11:05,690 --> 01:11:10,085\nbutton up top and then when you hit that\nnow it actually saves to the startup.\n\n1315\n01:11:10,085 --> 01:11:13,125\nIf you don't hit that, when you reboot\nyou're gonna lose all those changes.\n\n1316\n01:11:13,125 --> 01:11:14,745\nSo you've gotta keep that in mind.\n\n1317\n01:11:14,745 --> 01:11:16,675\nA little bit different than the CCP.\n\n1318\n01:11:17,975 --> 01:11:21,920\n>> Again, I want to say who's actually\ncreated these and not hit Apply before.\n\n1319\n01:11:21,920 --> 01:11:22,529\n>> [LAUGH] It's easy to forget.\n\n1320\n01:11:22,529 --> 01:11:27,029\n>> Yeah, [LAUGH] make sure you\napply those rules clearly.\n\n1321\n01:11:27,029 --> 01:11:31,649\n>> So, the firewalls, obviously they\ngive you a lot more control over NAT.\n\n1322\n01:11:31,649 --> 01:11:33,347\nThey give you a lot more options and\n\n1323\n01:11:33,347 --> 01:11:37,038\nstuff that makes them a little more\ncomplex to configure but very useful and\n\n1324\n01:11:37,038 --> 01:11:39,850\nvery important that we make\nthose configurations here so\n\n1325\n01:11:39,850 --> 01:11:43,272\nthat the firewall is aware of\nthe multiple IPs that a host might have.\n\n1326\n01:11:43,272 --> 01:11:44,322\n>> Yeah.\n\n1327\n01:11:44,322 --> 01:11:45,112\n>> All right.\n\n1328\n01:11:45,112 --> 01:11:48,730\nSo that pretty much knocks out NAT,\nNetwork Address Translation.\n\n1329\n01:11:48,730 --> 01:11:50,410\nPAT and so on.\n\n1330\n01:11:50,410 --> 01:11:53,660\nFor the exam definitely be familiar\nwith the three different types of\n\n1331\n01:11:53,660 --> 01:11:54,700\nNAT that we can do.\n\n1332\n01:11:54,700 --> 01:11:59,880\nStraight up one-to-one NAT, dynamic NAT,\nand then dynamic PAT with overload.\n\n1333\n01:11:59,880 --> 01:12:02,710\nThose are kinda the three\ndifferent types that we have.\n\n1334\n01:12:02,710 --> 01:12:06,029\nAs far as implementing them\non a router and on ASA,\n\n1335\n01:12:06,029 --> 01:12:09,670\non the exam you'll see\nthe graphical user interface.\n\n1336\n01:12:09,670 --> 01:12:12,089\nThe command line on a router though,\nisn't that bad,\n\n1337\n01:12:12,089 --> 01:12:14,670\nyou guys saw some of\nthe examples that I did before.\n\n1338\n01:12:14,670 --> 01:12:17,240\nOn the ASAs,\nthey don't get into command line.\n\n1339\n01:12:17,240 --> 01:12:18,260\n>> Yeah.\n\n1340\n01:12:18,260 --> 01:12:24,580\nJust remember, though, you go, Ronnie,\nI don't have an ASA of 5505 or 5525 here.\n\n1341\n01:12:24,580 --> 01:12:30,570\nYou can always, if you can get a hold of\nit, you can get a hold of the demo mode of\n\n1342\n01:12:30,570 --> 01:12:35,190\nthat ASA and you go out on the Internet,\nsearch on how to run ASA in demo mode and\n\n1343\n01:12:35,190 --> 01:12:37,150\nthey show you how to\nactually configure it.\n\n1344\n01:12:37,150 --> 01:12:41,030\nEnough to, at least, get you through to\nseeing the most important aspects of that,\n\n1345\n01:12:41,030 --> 01:12:43,760\neven though you might not be able\nto configure everything on it.\n\n1346\n01:12:43,760 --> 01:12:45,620\n>> Yeah.\nIn fact, if you just do a Google search\n\n1347\n01:12:48,140 --> 01:12:51,846\nfor ASA demo or actually,\nnot ASA demo, do AS DM demo.\n\n1348\n01:12:51,846 --> 01:12:54,170\n[INAUDIBLE] There we go.\n\n1349\n01:12:54,170 --> 01:12:55,940\nIf you do a search for ASDM demo,\n\n1350\n01:12:55,940 --> 01:12:59,210\nyou'll find the very first link\ntakes you to the Cisco website.\n\n1351\n01:12:59,210 --> 01:13:03,420\nYou need a CCO account but a CCO account\nis free, you can sign up for that, and\n\n1352\n01:13:03,420 --> 01:13:05,340\nthen you can download and fire it up.\n\n1353\n01:13:05,340 --> 01:13:08,040\nThis that I'm running right\nhere is the ASDM demo,\n\n1354\n01:13:08,040 --> 01:13:13,030\nit's the full ASDM interface with fake\ndata already populated in, so it gives you\n\n1355\n01:13:13,030 --> 01:13:16,400\na chance to kind of experiment with it and\nfool around with it.\n\n1356\n01:13:16,400 --> 01:13:18,810\nThere is no substitute for\nthe actual equipment but\n\n1357\n01:13:18,810 --> 01:13:22,770\nthe IINS exam by and\nlarge is a router exam, so\n\n1358\n01:13:22,770 --> 01:13:26,090\nyou're gonna see very little in the way\nof configuring an ASA on there.\n\n1359\n01:13:26,090 --> 01:13:28,710\nThey more want you to be kind of\nfamiliar with the concepts and\n\n1360\n01:13:28,710 --> 01:13:31,260\nknow when it's appropriate to use a router\n\n1361\n01:13:31,260 --> 01:13:33,400\nversus when you should be\nswitching over to a firewall.\n\n1362\n01:13:36,990 --> 01:13:39,760\nAs far as NAT is concerned,\nthat's basically it.\n\n1363\n01:13:39,760 --> 01:13:42,940\nIt is the same concept no\nmatter where you apply it,\n\n1364\n01:13:42,940 --> 01:13:44,300\njust that the screens\nare a little bit different.\n\n1365\n01:13:47,060 --> 01:13:49,320\n>> Our last objective that\nwe need to tackle for\n\n1366\n01:13:49,320 --> 01:13:53,910\nthis one is the actual\nfirewall rules themselves.\n\n1367\n01:13:53,910 --> 01:13:57,970\nWe've already seen access control\nlists and we know how they work but\n\n1368\n01:13:57,970 --> 01:14:01,780\nI kept saying that the limiting\nfactor of an ACL is that they are for\n\n1369\n01:14:01,780 --> 01:14:04,530\nthe most part unidirectional.\n\n1370\n01:14:04,530 --> 01:14:08,740\nIf we wanna use ACLs to filter traffic\non a network, we have to write rules for\n\n1371\n01:14:08,740 --> 01:14:14,500\ngoing out, as well as rules for\ncoming back in and it's a pain.\n\n1372\n01:14:14,500 --> 01:14:19,160\n>> There's also a limitation in that\nit's applied per interface as well, and\n\n1373\n01:14:19,160 --> 01:14:22,240\nthe very fact that, once you apply those,\n\n1374\n01:14:22,240 --> 01:14:25,299\nit doesn't matter what\ntraffic you're trying to do.\n\n1375\n01:14:25,299 --> 01:14:30,430\nIf you start to try and apply ACLs and\ngo, this is only gonna apply between my\n\n1376\n01:14:30,430 --> 01:14:33,920\ninternal network and\ngoing out to the internet here,\n\n1377\n01:14:33,920 --> 01:14:38,935\nit might also end up applying if you\ngo outside, maybe even to your own DMZ.\n\n1378\n01:14:38,935 --> 01:14:41,845\n>> So you gotta be careful there\nbecause those rules can be applied just\n\n1379\n01:14:41,845 --> 01:14:42,820\nper interface in that way.\n\n1380\n01:14:42,820 --> 01:14:44,565\n>> Yep.\n\n1381\n01:14:44,565 --> 01:14:50,195\n>> Let's say that we want to implement\na firewall on our router and\n\n1382\n01:14:50,195 --> 01:14:51,775\nwe know the limitations of the ACL.\n\n1383\n01:14:51,775 --> 01:14:52,620\n>> Right.\n\n1384\n01:14:52,620 --> 01:14:55,964\nSo we step up to the plate,\nwe pay some extra money and\n\n1385\n01:14:55,964 --> 01:14:59,470\nwe get a iOS license that has\nthe firewall feature set.\n\n1386\n01:14:59,470 --> 01:14:59,970\n>> Right.\n\n1387\n01:15:01,240 --> 01:15:02,180\nThere's several ones that do it.\n\n1388\n01:15:02,180 --> 01:15:05,730\nThere's the firewall ones,\nthere's the enterprise license.\n\n1389\n01:15:07,060 --> 01:15:09,630\nActually, IP Advanced Services\ndoesn't have it, does it?\n\n1390\n01:15:09,630 --> 01:15:12,420\nSo you buy the appropriate\nlicense that adds that firewall\n\n1391\n01:15:12,420 --> 01:15:14,300\nfunctionality to your router.\n\n1392\n01:15:14,300 --> 01:15:18,340\nWhen you do that,\nyou now have a fully functional,\n\n1393\n01:15:18,340 --> 01:15:23,210\nstateful packet filter that's running\nin software, so the performance is not\n\n1394\n01:15:23,210 --> 01:15:26,930\ngonna be the same as if you did it on ASA,\nit is gonna perform a little bit slower.\n\n1395\n01:15:26,930 --> 01:15:31,510\nYour end users may not even notice but\njust because you bought the license,\n\n1396\n01:15:31,510 --> 01:15:35,950\nthat's not it, it's actually not turned\non, so you need to go a step further and\n\n1397\n01:15:35,950 --> 01:15:40,570\nactually enable the firewall functionality\nand get that set up and going.\n\n1398\n01:15:40,570 --> 01:15:45,150\nSo that's kind of the next step\nwith that type of a configuration.\n\n1399\n01:15:45,150 --> 01:15:49,110\nNow, if we want to see how to set that up,\n\n1400\n01:15:49,110 --> 01:15:53,260\nin the Cisco Configuration Professional,\nwe just go under Configure and\n\n1401\n01:15:53,260 --> 01:15:59,040\nif we go into our security folder, you'll\nsee the Firewall folder right there.\n\n1402\n01:16:00,060 --> 01:16:03,350\nNow, if you don't have\nthe firewall license,\n\n1403\n01:16:03,350 --> 01:16:07,085\nyou'll see a gray screen here that let's\nyou know that in no uncertain terms,\n\n1404\n01:16:07,085 --> 01:16:09,720\nthen you need to go and\npay Cisco more money.\n\n1405\n01:16:09,720 --> 01:16:11,090\n[LAUGH]\n>> That's pretty much it.\n\n1406\n01:16:11,090 --> 01:16:14,960\nSo you'll see that but if you do have\nthe firewall feature set installed,\n\n1407\n01:16:14,960 --> 01:16:18,010\nyou'll see this screen right\nhere that's letting you know,\n\n1408\n01:16:18,010 --> 01:16:22,050\nif you want to set it up, we can start\nwith either a basic or advanced.\n\n1409\n01:16:22,050 --> 01:16:26,570\nNotice it's the same as the NatWizard,\nwe're really saying we don't have a DMZ or\n\n1410\n01:16:26,570 --> 01:16:27,700\nwe do have a DMZ.\n\n1411\n01:16:29,370 --> 01:16:31,420\nWe don't have a DMZ on\nthis particular router,\n\n1412\n01:16:31,420 --> 01:16:34,792\nso I'm just going to say that we don't,\nand I'll hit Launch the selected text.\n\n1413\n01:16:34,792 --> 01:16:39,730\nNow it's going to walk through and\nit's just going to ask a few questions\n\n1414\n01:16:39,730 --> 01:16:43,350\nabout what I want to do to secure\nthe communications through my router.\n\n1415\n01:16:44,560 --> 01:16:49,940\nAs we move through, it's gonna start with\nwhat interfaces are inside versus outside,\n\n1416\n01:16:49,940 --> 01:16:52,400\ntrusted network versus untrusted network.\n\n1417\n01:16:52,400 --> 01:16:57,360\nMy GI00 is pointing to the Internet, so\nI'll call that my untrusted and my GI01,\n\n1418\n01:16:57,360 --> 01:17:00,370\nthat is my inside or my trusted.\n\n1419\n01:17:01,810 --> 01:17:05,650\nBy default, you will not be\nable to connect with the CCP\n\n1420\n01:17:05,650 --> 01:17:09,250\nto the external IP of the router,\nit's a security risk but\n\n1421\n01:17:09,250 --> 01:17:13,010\nyou can override that right here if\nyou want to, not really a good idea.\n\n1422\n01:17:15,100 --> 01:17:21,040\nI'll hit Next and it's just warning me\nthat there's some ACLs in place already\n\n1423\n01:17:21,040 --> 01:17:26,625\non this router cuz we created them in\nthe ACL show but you wanna be careful.\n\n1424\n01:17:26,625 --> 01:17:30,305\nI'm going to say no,\njust go ahead and do it and\n\n1425\n01:17:30,305 --> 01:17:33,985\nthen it picked up that I also\nhave the voice license on here.\n\n1426\n01:17:33,985 --> 01:17:38,875\nSo the Cisco CallManager Express or CME,\nI could actually do voice over IP on this\n\n1427\n01:17:38,875 --> 01:17:42,750\nrouter, it's offering if I want to let\nthat traffic through the firewall.\n\n1428\n01:17:42,750 --> 01:17:44,970\nWhile I do have the voice\nfeature set installed,\n\n1429\n01:17:44,970 --> 01:17:49,390\nI am not actually using it, I don't want\nto allow it through the firewall now.\n\n1430\n01:17:49,390 --> 01:17:53,426\nDown the road, if I decide to turn it on,\nthen I can go in and add it in myself but\n\n1431\n01:17:53,426 --> 01:17:57,242\nfor right now, I don't want to and\nthen it's giving you one last warning\n\n1432\n01:17:57,242 --> 01:17:57,985\n>> [LAUGH]\n\n1433\n01:17:57,985 --> 01:18:00,230\n>> If I'm connected with the CCP on\n\n1434\n01:18:00,230 --> 01:18:04,305\ngigabit Ethernet 0/0,\nI'm about to get locked out but\n\n1435\n01:18:04,305 --> 01:18:07,320\nI'm connected on GI 0/1 so I'm okay.\n\n1436\n01:18:07,320 --> 01:18:09,910\nI'll go ahead and hit OK and\n\n1437\n01:18:09,910 --> 01:18:12,610\nnow it's gonna ask what level\nof security I wanna apply.\n\n1438\n01:18:12,610 --> 01:18:17,210\nNow this is a neat one because\ntechnically, the ACL rule it creates\n\n1439\n01:18:17,210 --> 01:18:21,040\nis the same for all three of these\noptions, low, medium, and high.\n\n1440\n01:18:21,040 --> 01:18:26,370\nWhat's different is what's\ncalled the Cisco MFP, or\n\n1441\n01:18:28,480 --> 01:18:33,070\nthe modular policy framework,\nMPF, there we go.\n\n1442\n01:18:33,070 --> 01:18:33,890\n>> I can't say it either.\n\n1443\n01:18:33,890 --> 01:18:37,933\n>> Modular policy framework,\nwhich basically,\n\n1444\n01:18:37,933 --> 01:18:40,780\nit's kind of like an application gateway.\n\n1445\n01:18:40,780 --> 01:18:45,210\nIt's what allows us to do deep packet\ninspection to actually look at the packets\n\n1446\n01:18:45,210 --> 01:18:48,240\npassing through and\nmake decisions based on it.\n\n1447\n01:18:48,240 --> 01:18:50,720\nYou'll see some of the things that\nit's talking about over here,\n\n1448\n01:18:50,720 --> 01:18:52,770\nthat it's not just looking\nat typical traffic.\n\n1449\n01:18:52,770 --> 01:18:56,010\nIt's also looking at HTTP and\n\n1450\n01:18:56,010 --> 01:18:59,660\nemail traffic for\nspecific non-compliant traffic,\n\n1451\n01:18:59,660 --> 01:19:04,110\ntraffic with corrupt headers or\nwhatever, it can get really advanced.\n\n1452\n01:19:05,110 --> 01:19:07,350\nOn an ASA, that's a great thing.\n\n1453\n01:19:07,350 --> 01:19:12,270\nOn a router, with every advanced feature\nyou turn on, that's a bigger and\n\n1454\n01:19:12,270 --> 01:19:15,680\nbigger performance hit and we don't\nnormally want to go crazy here and\n\n1455\n01:19:15,680 --> 01:19:16,530\nturn a bunch of these on.\n\n1456\n01:19:16,530 --> 01:19:19,030\nIn fact,\nI'm going to go down to low security,\n\n1457\n01:19:19,030 --> 01:19:21,760\nI want to use this as\na staple packet filter.\n\n1458\n01:19:21,760 --> 01:19:23,680\nI don't want to deep packet\ninspection on my router.\n\n1459\n01:19:26,700 --> 01:19:27,630\nWe'll go ahead and hit Next.\n\n1460\n01:19:28,770 --> 01:19:31,530\nNow it's just going to\nsummarize what it's doing and\n\n1461\n01:19:31,530 --> 01:19:35,770\nwhat it's doing is saying, if we're\ngoing to use these firewall rules,\n\n1462\n01:19:35,770 --> 01:19:39,270\nwe don't want you to have to earn\ntwo rules, an in and an out.\n\n1463\n01:19:39,270 --> 01:19:42,460\nWe want to manage them for you,\nso it's going to manage them for\n\n1464\n01:19:42,460 --> 01:19:46,970\nus by creating what are called zones and\nzones are really neat.\n\n1465\n01:19:46,970 --> 01:19:50,810\nI'm going to hit Finish on this so\nit'll apply while we discuss zones.\n\n1466\n01:19:50,810 --> 01:19:54,220\nIt's just warning about blocking voice\ntraffic again, I'm okay with that.\n\n1467\n01:19:55,490 --> 01:19:56,200\nThere we go.\n\n1468\n01:19:56,200 --> 01:20:00,420\nWhile it's thinking,\nlet me go back here and talk about zones.\n\n1469\n01:20:00,420 --> 01:20:05,460\nAll right, I mentioned earlier\nthat if we just do a traditional\n\n1470\n01:20:05,460 --> 01:20:09,370\npacket filter,\nthat it's not tracking state.\n\n1471\n01:20:09,370 --> 01:20:11,300\nAnd so\nit doesn't know about return traffic.\n\n1472\n01:20:11,300 --> 01:20:14,675\nAnd so have to write rules for\nincoming and outgoing, and\n\n1473\n01:20:14,675 --> 01:20:17,570\nthe problem there is how\nmany rules that can be.\n\n1474\n01:20:17,570 --> 01:20:18,180\nOops.\n\n1475\n01:20:18,180 --> 01:20:23,970\nYou know, cuz you might have from\nthe Private LAN to the Internet,\n\n1476\n01:20:23,970 --> 01:20:28,820\nand the Private LAN to the DMZ,\nand then you've got the DMZ\n\n1477\n01:20:28,820 --> 01:20:32,230\nback to the Private LAN and\nthe DMZ out to the Internet.\n\n1478\n01:20:32,230 --> 01:20:35,000\nAnd then you've got the Internet\nback to the Private LAN, and\n\n1479\n01:20:35,000 --> 01:20:36,290\nthe Internet down to the DMZ.\n\n1480\n01:20:36,290 --> 01:20:40,090\nSo you've got a total of what,\nsix sets of rules here-\n\n1481\n01:20:40,090 --> 01:20:41,030\n>> Yeah, that's a lot of rules.\n\n1482\n01:20:41,030 --> 01:20:42,358\n>> That we have to negotiate.\n\n1483\n01:20:42,358 --> 01:20:48,810\nWith a zone-based firewall, what it does\nis it comes in and it creates zones.\n\n1484\n01:20:48,810 --> 01:20:53,458\nAnd it says all right, so\nyou've got zone one which is\n\n1485\n01:20:53,458 --> 01:20:57,813\ngoing to be the Private LAN\nconnecting to the DMZ.\n\n1486\n01:20:57,813 --> 01:20:59,503\nAnd then you've got zone two,\n\n1487\n01:20:59,503 --> 01:21:02,433\nwhich is gonna be the DMZ\nconnecting to the Internet.\n\n1488\n01:21:02,433 --> 01:21:04,880\nAnd then lastly you've got the third zone,\n\n1489\n01:21:04,880 --> 01:21:08,970\nwhich will be the Internet\nconnecting to the private LAN, okay?\n\n1490\n01:21:08,970 --> 01:21:11,310\nAnd when you write your rules,\n\n1491\n01:21:11,310 --> 01:21:15,300\nyou're just defining what traffic's\nallowed to pass through those zones.\n\n1492\n01:21:15,300 --> 01:21:19,420\nAnd when you add an outbound rule,\nit's stateful.\n\n1493\n01:21:19,420 --> 01:21:23,210\nSo the replies are allowed\nback in automatically.\n\n1494\n01:21:23,210 --> 01:21:26,610\nAnd so you're not having to manage\nall of these individually anymore.\n\n1495\n01:21:26,610 --> 01:21:30,660\nYou just write one set of rules and\nit automatically does the, they call it\n\n1496\n01:21:30,660 --> 01:21:35,100\nthe reflexive rule, right, the replies,\nand it puts those in place for us.\n\n1497\n01:21:35,100 --> 01:21:37,370\nSo instead of having to manage\nsix different sets of rules,\n\n1498\n01:21:37,370 --> 01:21:39,180\nwe really only have to manage three,\nright?\n\n1499\n01:21:39,180 --> 01:21:40,210\nIt becomes much more simple.\n\n1500\n01:21:41,580 --> 01:21:45,840\nNow each zone will be assigned a name,\nand they're not very awesome names,\n\n1501\n01:21:45,840 --> 01:21:48,600\nit's normally like inside to outside,\noutside to inside.\n\n1502\n01:21:48,600 --> 01:21:50,700\nInside to DMZ,\nyou know that kind of thing.\n\n1503\n01:21:50,700 --> 01:21:53,680\nAnd so\nthey're descriptive names of the zones.\n\n1504\n01:21:53,680 --> 01:21:57,780\nAnd we attach our rules,\nnot to an interface, but to a zone.\n\n1505\n01:21:57,780 --> 01:22:01,610\nAnd that might sound weird, but the reason\nis if we really wanted to be easy about\n\n1506\n01:22:01,610 --> 01:22:09,110\nthis we could say that the Private LAN and\nthe DMZ, maybe that's not a DMZ.\n\n1507\n01:22:09,110 --> 01:22:11,860\nMaybe that's just a research network,\nright?\n\n1508\n01:22:11,860 --> 01:22:18,416\nSo, it's not so much that it's\na special secure network or whatever.\n\n1509\n01:22:18,416 --> 01:22:22,656\nIn fact, maybe this is the third floor and\n\n1510\n01:22:22,656 --> 01:22:26,298\nthis down here is the fourth floor.\n\n1511\n01:22:30,883 --> 01:22:34,080\nAll right, so they're separate sub nets,\nbut they're both private.\n\n1512\n01:22:34,080 --> 01:22:36,230\nThey're both inside, all right.\n\n1513\n01:22:36,230 --> 01:22:41,300\nWe could create one zone for\nthese guys, and put them in one zone.\n\n1514\n01:22:42,320 --> 01:22:48,680\nAnd then have the Internet be attached\nwith its own, like outside, and then\n\n1515\n01:22:48,680 --> 01:22:53,190\nwhat we're doing is simply writing rules\nfor traffic passing between these, right.\n\n1516\n01:22:53,190 --> 01:22:57,090\nSo traffic from the inside to the outside,\nfrom the outside to the inside.\n\n1517\n01:22:57,090 --> 01:23:01,130\nAnd by doing that, we're configuring\nmore than one network at the same time.\n\n1518\n01:23:01,130 --> 01:23:03,580\nAnd that's where zone-based\nfirewalls really shine.\n\n1519\n01:23:03,580 --> 01:23:05,130\nIt makes life a lot easier.\n\n1520\n01:23:05,130 --> 01:23:11,099\nAll right, so let's get back to our\nrouter now and see where we're at.\n\n1521\n01:23:12,340 --> 01:23:13,400\nWhoops, that's not our router.\n\n1522\n01:23:14,690 --> 01:23:16,190\nThere we go.\nAll right,\n\n1523\n01:23:16,190 --> 01:23:18,840\nthat command takes a little while,\nso I was waiting.\n\n1524\n01:23:18,840 --> 01:23:22,150\nAnd you'll see, it takes a while cuz it's\ngenerating, how many commands is this?\n\n1525\n01:23:22,150 --> 01:23:24,450\n>> You'll have to see when you hit.\n\n1526\n01:23:24,450 --> 01:23:25,880\n>> Yeah, when I hit deliver.\n\n1527\n01:23:25,880 --> 01:23:28,140\nI mean, it's creating some ACLs.\n\n1528\n01:23:28,140 --> 01:23:30,110\nIt's doing a few other\nthings to get it set up.\n\n1529\n01:23:30,110 --> 01:23:33,170\nThe modular policy framework\nis being set up in there.\n\n1530\n01:23:33,170 --> 01:23:36,150\nYou'll see a bunch of match\nprotocol statements for inspection.\n\n1531\n01:23:36,150 --> 01:23:38,720\nI'll talk about those in a minute.\n\n1532\n01:23:38,720 --> 01:23:41,320\nSo you see just a ton of commands.\n\n1533\n01:23:41,320 --> 01:23:43,840\nWe'll go ahead and deliver that.\n\n1534\n01:23:43,840 --> 01:23:44,610\n128, yeah.\n>> Quite a few.\n\n1535\n01:23:44,610 --> 01:23:46,840\nAnd that's on the low end.\n\n1536\n01:23:46,840 --> 01:23:48,545\n>> I can imagine typing all that out.\n\n1537\n01:23:50,588 --> 01:23:51,343\n>> There you go.\n\n1538\n01:23:51,343 --> 01:23:56,419\n>> All right, once you have\nthe zone-based firewall turned on,\n\n1539\n01:23:56,419 --> 01:24:01,530\nit's important that you don't\ngo mess with the ACLs anymore.\n\n1540\n01:24:01,530 --> 01:24:05,840\nThat you configure your security right\nhere through the firewall screen.\n\n1541\n01:24:05,840 --> 01:24:08,480\nAnd in the firewall screen you'll\nsee your firewall policies, and\n\n1542\n01:24:08,480 --> 01:24:13,760\nthen here you'll see where we've got\nthese names, like in zone to out zone.\n\n1543\n01:24:16,180 --> 01:24:19,610\nAnd if we scroll down,\nlike out zone to self, and so on.\n\n1544\n01:24:19,610 --> 01:24:22,370\nThese are the names of\nthe zones that it created.\n\n1545\n01:24:22,370 --> 01:24:26,420\nFor us, we have an inside interface and\nan outside interface.\n\n1546\n01:24:26,420 --> 01:24:30,140\nAnd so it created an in zone for our\ninternal networks, and then out zone for\n\n1547\n01:24:30,140 --> 01:24:31,390\nour external.\n\n1548\n01:24:31,390 --> 01:24:36,290\nAnd we just come in and\nwe define traffic in one direction, and\n\n1549\n01:24:36,290 --> 01:24:38,420\nthen it automatically\ntakes care of the replies.\n\n1550\n01:24:38,420 --> 01:24:42,681\nAnd so we can see in here where we're\nallowing quite a bit of traffic.\n\n1551\n01:24:42,681 --> 01:24:47,149\nWe're allowing basically\nanybody on the in zone to go to\n\n1552\n01:24:47,149 --> 01:24:51,150\nanybody on the out zone,\nand we allow it through.\n\n1553\n01:24:51,150 --> 01:24:54,020\nThe only thing we're doing\nis we're doing inspection,\n\n1554\n01:24:54,020 --> 01:24:57,240\nwhich is that modular policy framework,\nlooking at these packets\n\n1555\n01:24:57,240 --> 01:25:00,470\nto make sure they don't have malformed\nheaders or anything like that.\n\n1556\n01:25:00,470 --> 01:25:03,460\nAnd if they do it'll throw them out,\nbut otherwise it'll allow them through.\n\n1557\n01:25:03,460 --> 01:25:06,810\nThe other reason it's inspecting,\nit's now watching traffic.\n\n1558\n01:25:06,810 --> 01:25:08,710\nIt's watching things like FTP.\n\n1559\n01:25:08,710 --> 01:25:10,490\nSo it'll say, all right,\nI'm gonna watch this.\n\n1560\n01:25:10,490 --> 01:25:13,180\nSo when you do that get command and\nspecify a random port number,\n\n1561\n01:25:13,180 --> 01:25:14,400\nI'm gonna see it.\n\n1562\n01:25:14,400 --> 01:25:17,350\nSo I can allow that other\nport to have a reply back.\n\n1563\n01:25:17,350 --> 01:25:18,240\nThat's the real power.\n\n1564\n01:25:18,240 --> 01:25:21,600\nThat's what you're really paying for\nwhen you buy the firewall feature set.\n\n1565\n01:25:21,600 --> 01:25:23,870\nIs you're paying for\nthat ability to inspect traffic.\n\n1566\n01:25:25,860 --> 01:25:28,890\nAll right, on the exam you may\nsee that referred to as DPI,\n\n1567\n01:25:28,890 --> 01:25:31,035\nor Deep Packet Inspection.\n\n1568\n01:25:31,035 --> 01:25:33,630\nCuz you're going beyond\nthe layer three and\n\n1569\n01:25:33,630 --> 01:25:35,990\neven layer four data that\na router normally looks at.\n\n1570\n01:25:35,990 --> 01:25:38,400\nAnd you're looking at layer five,\nlayer six, layer seven.\n\n1571\n01:25:38,400 --> 01:25:41,170\nYou're looking at this\nhigher-layer stuff to determine\n\n1572\n01:25:41,170 --> 01:25:43,700\nwhat's about to happen with that protocol.\n\n1573\n01:25:43,700 --> 01:25:45,890\n>> On those actions there's\nusually three actions.\n\n1574\n01:25:45,890 --> 01:25:51,420\nThere's a drop,\nthere's the allow, and inspect.\n\n1575\n01:25:51,420 --> 01:25:53,440\n>> I thought it was permit.\n\n1576\n01:25:53,440 --> 01:25:54,780\n>> Permit, I can't remember.\n\n1577\n01:25:54,780 --> 01:25:57,420\n>> Here, we can see it's inspect,\nallow, and drop.\n\n1578\n01:25:57,420 --> 01:25:58,500\nNo, you were right, Ronnie.\n\n1579\n01:25:58,500 --> 01:25:59,175\n>> I was right.\n\n1580\n01:25:59,175 --> 01:26:00,525\n[LAUGH] You know, it happens.\n\n1581\n01:26:00,525 --> 01:26:01,945\n>> Yeah, every once in a while.\n\n1582\n01:26:01,945 --> 01:26:03,620\n[LAUGH]\n>> So if we say allow,\n\n1583\n01:26:03,620 --> 01:26:06,120\nthat just means don't bother\ninspecting it, just move it through.\n\n1584\n01:26:06,120 --> 01:26:08,460\nAnd if your router is being hurt for\nperformance or whatever,\n\n1585\n01:26:08,460 --> 01:26:11,280\nyou may choose to switch to\nthat to bypass inspection.\n\n1586\n01:26:11,280 --> 01:26:14,230\nBut some protocols like FTP\nwill suddenly stop working.\n\n1587\n01:26:16,010 --> 01:26:19,150\nBut yes, those are options right there,\nand you'll see in here,\n\n1588\n01:26:19,150 --> 01:26:21,340\nthey make writing these rules really easy.\n\n1589\n01:26:21,340 --> 01:26:23,770\nThere's a lot of protocols\nthat are already defined, and\n\n1590\n01:26:23,770 --> 01:26:25,580\nwe can go through and flag those.\n\n1591\n01:26:25,580 --> 01:26:27,560\nAnd then you can really\nkind of create your own.\n\n1592\n01:26:27,560 --> 01:26:30,300\nThe other thing is,\nto help you remember how these zones work,\n\n1593\n01:26:30,300 --> 01:26:31,545\nthey give you a little diagram.\n\n1594\n01:26:31,545 --> 01:26:35,165\nIt's not so handy here, but\nif you have multiple interfaces,\n\n1595\n01:26:35,165 --> 01:26:38,853\nthey can help you keep track of\nwhich zone you're about to edit,\n\n1596\n01:26:38,853 --> 01:26:41,405\ncuz you may have more than one zone,\nright?\n\n1597\n01:26:41,405 --> 01:26:45,633\nRight now looking at this,\nI've got myself to out,\n\n1598\n01:26:45,633 --> 01:26:49,830\nI've got in to out, and\nI've got out to self.\n\n1599\n01:26:49,830 --> 01:26:53,640\nOut to self means outside traffic\ngoing to the router itself.\n\n1600\n01:26:53,640 --> 01:26:58,020\nAnd you'll see there's one rule\nthat says unmatch traffic drop.\n\n1601\n01:26:58,020 --> 01:27:01,520\nIn other words, anything that's not a\nreply to a specific communication we just\n\n1602\n01:27:01,520 --> 01:27:04,590\nthrow out, and so\nthat's really all you have there.\n\n1603\n01:27:04,590 --> 01:27:08,060\nBut what if I wanted to allow somebody\non the Internet to get to a server\n\n1604\n01:27:08,060 --> 01:27:09,270\ninside of my network?\n\n1605\n01:27:09,270 --> 01:27:11,540\nWell, I would need to add a new zone.\n\n1606\n01:27:11,540 --> 01:27:14,410\nThere is no out to in, is there?\n\n1607\n01:27:14,410 --> 01:27:15,090\n>> Nope.\n>> And so\n\n1608\n01:27:15,090 --> 01:27:17,660\nI would need to create a new\nzone to be able to handle that.\n\n1609\n01:27:17,660 --> 01:27:21,360\nAnd so when you drop down this list,\nyou'll see new zone policy.\n\n1610\n01:27:21,360 --> 01:27:23,580\nSo I can create a new policy, and\n\n1611\n01:27:23,580 --> 01:27:27,020\nthen go from there and\nbuild up the traffic that we need.\n\n1612\n01:27:27,020 --> 01:27:31,390\nAll right, so for my source zone,\nI'm gonna say that's my out zone,\n\n1613\n01:27:32,540 --> 01:27:36,450\nand for my destination zone,\nthat's gonna be my in zone.\n\n1614\n01:27:36,450 --> 01:27:39,210\nSo this is gonna be outside\ntraffic going to inside.\n\n1615\n01:27:39,210 --> 01:27:43,250\nNow, this zone pair, when you connect two\nzones like that it's called a zone pair.\n\n1616\n01:27:43,250 --> 01:27:45,830\nAnd this zone pair didn't exist before.\n\n1617\n01:27:45,830 --> 01:27:49,570\nAnd that means that any traffic like\nthis would've been dropped, right?\n\n1618\n01:27:49,570 --> 01:27:52,540\nNobody in the outside would be\nallowed to talk to the inside.\n\n1619\n01:27:52,540 --> 01:27:54,080\n>> That's the default, yep.\n\n1620\n01:27:54,080 --> 01:27:55,990\n>> All right, but\nthen I can come through and\n\n1621\n01:27:55,990 --> 01:27:59,000\nI can specify what traffic is\nthat I'm wanting to allow, right?\n\n1622\n01:27:59,000 --> 01:28:01,870\nThe source and destination networks.\n\n1623\n01:28:01,870 --> 01:28:06,958\nAnd so I can come through and\nI can create an entry here and\n\n1624\n01:28:06,958 --> 01:28:11,730\nI'll say,\nmaybe this is a web server and, or here.\n\n1625\n01:28:11,730 --> 01:28:15,120\nI'll just call it outside\nto inside traffic and\n\n1626\n01:28:15,120 --> 01:28:18,000\nthen I'm gonna add in something.\n\n1627\n01:28:18,000 --> 01:28:19,330\nSo I'll say.\n\n1628\n01:28:19,330 --> 01:28:23,750\nFor my source network,\nit's going to be anybody, right.\n\n1629\n01:28:23,750 --> 01:28:25,040\nAnybody out on the internet.\n\n1630\n01:28:25,040 --> 01:28:29,870\nBut the destination network, that might be\na particular host that I'm running FTP on.\n\n1631\n01:28:29,870 --> 01:28:34,920\nAnd so I can say, you know,\n192.168.0.200, all right.\n\n1632\n01:28:34,920 --> 01:28:38,900\nThat traffic right there\nI want to permit it.\n\n1633\n01:28:38,900 --> 01:28:41,550\nNow I need to tell it that it's FTP.\n\n1634\n01:28:41,550 --> 01:28:44,640\nWhich I think is under file transfer,\nyep there we go FTP and\n\n1635\n01:28:44,640 --> 01:28:46,830\nmaybe I'm doing FTPS also.\n\n1636\n01:28:46,830 --> 01:28:50,260\nIn an ACL I would have to write separate\nlines for multiple protocols but in\n\n1637\n01:28:50,260 --> 01:28:54,190\nthe zone based firewall I can just add in\nall the different protocols right there.\n\n1638\n01:28:54,190 --> 01:28:56,940\nAnd I'll leave it at inspect because\nI need to make sure I match up\n\n1639\n01:28:56,940 --> 01:28:57,780\nthose sessions.\n\n1640\n01:28:57,780 --> 01:28:58,630\nSo I'll leave that be.\n\n1641\n01:28:58,630 --> 01:29:04,220\nLet's see, service name cannot be empty\nwith services added to the member list.\n\n1642\n01:29:04,220 --> 01:29:05,445\nOh, service name right here.\n\n1643\n01:29:05,445 --> 01:29:07,600\n[LAUGH] So I'll call it FTP.\n\n1644\n01:29:09,640 --> 01:29:10,850\nThere we go.\n\n1645\n01:29:10,850 --> 01:29:12,150\nSo we'll go ahead and deliver that in.\n\n1646\n01:29:12,150 --> 01:29:14,420\nThat's gonna create that zone.\n\n1647\n01:29:14,420 --> 01:29:17,380\nAnd now as I look in here\nI should have a new zone.\n\n1648\n01:29:20,240 --> 01:29:21,290\nThere it is.\n\n1649\n01:29:21,290 --> 01:29:24,250\nOut to in and you'll see that anybody on\n\n1650\n01:29:24,250 --> 01:29:28,690\nthe outside is now allowed to reach\nout to my FTP server on the inside.\n\n1651\n01:29:28,690 --> 01:29:32,040\nAny other traffic would\nhit my implicit denial.\n\n1652\n01:29:32,040 --> 01:29:33,070\nAll right.\nIt doesn't show up here.\n\n1653\n01:29:33,070 --> 01:29:34,280\nIt's just implied.\n\n1654\n01:29:34,280 --> 01:29:36,080\nAnd so it'll hit data and get blocked.\n\n1655\n01:29:36,080 --> 01:29:36,720\nAll right.\n\n1656\n01:29:36,720 --> 01:29:38,010\nBut I don't have to go and\n\n1657\n01:29:38,010 --> 01:29:41,680\ncreate a rule allowing the FTP center\nto communicate to the outside.\n\n1658\n01:29:41,680 --> 01:29:43,020\nIt's gonna take care of that for me.\n\n1659\n01:29:43,020 --> 01:29:43,630\nRight.\n\n1660\n01:29:43,630 --> 01:29:46,050\nIf I wasn't allowing any\ntraffic from the outside in,\n\n1661\n01:29:46,050 --> 01:29:47,339\nI wouldn't need to\ncreate this zone at all.\n\n1662\n01:29:48,840 --> 01:29:49,740\n>> Yeah.\nDon't forget,\n\n1663\n01:29:49,740 --> 01:29:54,370\nthere are some general rules that apply\nto ACLs that kind of still apply here,\n\n1664\n01:29:54,370 --> 01:29:59,230\nin the fact that we want to still put our\nmost specific rules in terms of these\n\n1665\n01:29:59,230 --> 01:30:02,940\nzones up at the top, and the more\ngeneralized ones toward the bottom.\n\n1666\n01:30:02,940 --> 01:30:05,418\nSo that's why you also still\nsee that move up and move down.\n\n1667\n01:30:05,418 --> 01:30:06,992\nPair up.\n\n1668\n01:30:06,992 --> 01:30:09,150\n>> Yep, and you'll have to reorganize it.\n\n1669\n01:30:09,150 --> 01:30:11,770\nLike here where it's a bunch of any\nanys it doesn't really matter, but\n\n1670\n01:30:11,770 --> 01:30:15,390\nif we had specific IPs and\nespecially network ranges,\n\n1671\n01:30:15,390 --> 01:30:17,100\nyou would need to use these move up and\n\n1672\n01:30:17,100 --> 01:30:21,660\nmove down to change that order based\non what it was you were trying to do.\n\n1673\n01:30:21,660 --> 01:30:25,720\nSo, you know, I like, Ronnie, how I\ntold it not to allow voice traffic, but\n\n1674\n01:30:25,720 --> 01:30:26,340\nit still did it.\n\n1675\n01:30:26,340 --> 01:30:27,400\n>> Yeah, isn't that interesting?\n\n1676\n01:30:27,400 --> 01:30:28,120\nSeems kind of fun.\n\n1677\n01:30:29,120 --> 01:30:34,220\nYou've got SIP and H323 and\nall that, strange.\n\n1678\n01:30:34,220 --> 01:30:36,840\nYou can go through and\nmanipulate all this.\n\n1679\n01:30:36,840 --> 01:30:39,910\nThe main point, first off,\nit's a lot easier.\n\n1680\n01:30:39,910 --> 01:30:44,050\nIt's a lot easier to manage this stuff\nthan ACLs and secondly, it's reflexive.\n\n1681\n01:30:44,050 --> 01:30:45,810\nYou're only creating\none direction of rules.\n\n1682\n01:30:45,810 --> 01:30:48,600\nIt's not like an ACL where you have\nto get a little more involved.\n\n1683\n01:30:48,600 --> 01:30:52,010\nSo if you're gonna be using\nyour router as a firewall,\n\n1684\n01:30:52,010 --> 01:30:54,580\nthis is the feature you want\nto pay the extra money to get.\n\n1685\n01:30:54,580 --> 01:30:55,450\nAll right.\n\n1686\n01:30:55,450 --> 01:30:59,640\nBut it comes at a price,\nnot just money, performance.\n\n1687\n01:30:59,640 --> 01:31:00,430\nAll right.\n\n1688\n01:31:00,430 --> 01:31:03,110\nSo, Ronnie I think we talked\na little long on that one.\n\n1689\n01:31:03,110 --> 01:31:05,340\n>> Yep. Yep. >> So\nlet's do this, let's stop.\n\n1690\n01:31:05,340 --> 01:31:08,440\nWe still have the firewalls to talk\nabout as far as creating the rules on\n\n1691\n01:31:08,440 --> 01:31:09,330\nan ASA and stuff.\n\n1692\n01:31:09,330 --> 01:31:11,940\nSo we'll stop here and when we get back,\n\n1693\n01:31:11,940 --> 01:31:16,690\nwe'll take a look at doing the same thing\non the ASAs and wrap up from there.\n\n1694\n01:31:16,690 --> 01:31:17,690\n>> Sounds good.\n\n1695\n01:31:17,690 --> 01:31:19,180\n>> All right.\nLadies and gentlemen, stay tuned.\n\n1696\n01:31:19,180 --> 01:31:20,180\nWe'll be back after this.\n\n1697\n01:31:20,180 --> 01:31:27,886\n[SOUND].\n\n1698\n01:31:27,886 --> 01:31:29,426\nAll right, welcome back everybody.\n\n1699\n01:31:29,426 --> 01:31:34,260\nSo for the last little segment here we're\ngoing to take a look at firewall rules on\n\n1700\n01:31:34,260 --> 01:31:34,766\nan ASA.\n\n1701\n01:31:34,766 --> 01:31:37,660\nAnd we're going to see that\nthey're similar to the routers but\n\n1702\n01:31:37,660 --> 01:31:41,070\nthere are some little differences\nthat we need to be aware of.\n\n1703\n01:31:41,070 --> 01:31:43,310\nLet's jump back to the ASA here.\n\n1704\n01:31:43,310 --> 01:31:47,180\nSo I'm still on the NAT screen from\nearlier where we configured network\n\n1705\n01:31:47,180 --> 01:31:51,540\naddress translation and right above that,\nI've got my access rules and\n\n1706\n01:31:51,540 --> 01:31:53,129\nthis is where we can define the rules.\n\n1707\n01:31:54,250 --> 01:31:55,430\nPassing between our interfaces.\n\n1708\n01:31:55,430 --> 01:31:58,210\nNow, zones are handled a little\n\n1709\n01:31:58,210 --> 01:32:01,650\ndifferently on an ASA than\nthey are on the routers.\n\n1710\n01:32:01,650 --> 01:32:05,240\nIn fact, on the router side,\nit pretty much created everything for us.\n\n1711\n01:32:05,240 --> 01:32:07,050\n>> Right.\n>> On the firewall we have a lot more\n\n1712\n01:32:07,050 --> 01:32:08,540\ncontrol.\n\n1713\n01:32:08,540 --> 01:32:11,280\nSo one of the best places to start\nis not right here where we're doing\n\n1714\n01:32:11,280 --> 01:32:12,410\nthe ACLs themselves.\n\n1715\n01:32:12,410 --> 01:32:14,420\nBut where we setup our zones.\n\n1716\n01:32:14,420 --> 01:32:17,570\nWhich we do that on our interfaces.\n\n1717\n01:32:17,570 --> 01:32:19,340\nSo what we do on an ASA,\n\n1718\n01:32:19,340 --> 01:32:24,660\nis we map our physical interfaces\nto these logical interfaces.\n\n1719\n01:32:24,660 --> 01:32:27,380\nWhich are basically the same\nthing as a zone on a router.\n\n1720\n01:32:27,380 --> 01:32:30,810\nAnd you'll see where it's already\nmapped some of my interfaces.\n\n1721\n01:32:30,810 --> 01:32:34,160\nLike GI00 is mapped to my inside.\n\n1722\n01:32:34,160 --> 01:32:36,040\nGI01 is outside.\n\n1723\n01:32:36,040 --> 01:32:39,040\nGI02 is DMZ and\nthen we've got several others.\n\n1724\n01:32:39,040 --> 01:32:42,321\nWell, we can take these, like these\nseveral others that I mentioned.\n\n1725\n01:32:42,321 --> 01:32:44,590\n>> [LAUGH]\n>> You know, I can take like, you know,\n\n1726\n01:32:44,590 --> 01:32:49,920\nfour, or five or whatever and we can map\nthem to a zone that's already in use.\n\n1727\n01:32:49,920 --> 01:32:52,310\nYou know, you can take them and.\n\n1728\n01:32:52,310 --> 01:32:54,370\nLet's see it's buried it here somewhere.\n\n1729\n01:32:54,370 --> 01:32:58,030\nDid I, well here's where we\nattach it to a different name.\n\n1730\n01:32:58,030 --> 01:33:02,470\nYou know, actually I'm not seeing,\nbecause normally another screen that we\n\n1731\n01:33:02,470 --> 01:33:06,680\nget that let's us see the actual zones and\nwe can attach interfaces there.\n\n1732\n01:33:06,680 --> 01:33:11,260\nThis is the older ASM so it's not actually\nshowing it, but we can attach them so\n\n1733\n01:33:11,260 --> 01:33:12,940\nif I needed a new zone.\n\n1734\n01:33:12,940 --> 01:33:16,100\nIf I need a zone for\nsome kind of like public wireless or\n\n1735\n01:33:16,100 --> 01:33:20,850\nwhatever, I can take this interface\nhere and give it an interface name of\n\n1736\n01:33:20,850 --> 01:33:25,670\nPublic Wireless and\nthat's gonna create that zone.\n\n1737\n01:33:27,200 --> 01:33:31,080\nSo when I say OK to that,\nnow I've got a public wireless zone and\n\n1738\n01:33:31,080 --> 01:33:33,660\nI can define rules going in and out of it.\n\n1739\n01:33:33,660 --> 01:33:36,120\nWell, here in the demo it's not\nactually gonna let me create that zone,\n\n1740\n01:33:36,120 --> 01:33:37,980\nbut that's how it would work.\n\n1741\n01:33:37,980 --> 01:33:43,390\nThe other thing is, you can then\ndefine rules between the zones.\n\n1742\n01:33:43,390 --> 01:33:47,490\nBut there's some implicit rules that\nare different here then on a router.\n\n1743\n01:33:47,490 --> 01:33:48,340\nOkay.\n\n1744\n01:33:48,340 --> 01:33:53,210\nOn a router, it's implied that all\ntraffic gets denied, and that's it.\n\n1745\n01:33:53,210 --> 01:33:57,050\nSo if you Create an ACL\nwith even one entry in it,\n\n1746\n01:33:57,050 --> 01:33:59,090\neverything else is gonna get blocked.\n\n1747\n01:33:59,090 --> 01:34:03,870\nWell on a ASA,\nit's not quite that certain.\n\n1748\n01:34:03,870 --> 01:34:05,610\nWhen you create a zone or\n\n1749\n01:34:05,610 --> 01:34:10,610\nan interface name like this,\nyou also assign a security level.\n\n1750\n01:34:10,610 --> 01:34:13,110\nYou'll see the security level\nright here in this column for\n\n1751\n01:34:13,110 --> 01:34:14,990\nevery interface that has a name.\n\n1752\n01:34:14,990 --> 01:34:16,090\nAll right.\n\n1753\n01:34:16,090 --> 01:34:23,090\nTraffic from a high number,\nis allowed to pass to any lower number.\n\n1754\n01:34:23,090 --> 01:34:27,460\nAnd traffic from a lower number is not\nallowed to pass to any higher number.\n\n1755\n01:34:27,460 --> 01:34:32,150\nSo the higher the number\nthe more trusted the network,\n\n1756\n01:34:32,150 --> 01:34:34,690\nthe lower the number,\nthe more untrusted the network.\n\n1757\n01:34:34,690 --> 01:34:36,650\nLet me zoom in on that a bit.\n\n1758\n01:34:36,650 --> 01:34:39,530\nSo you'll see they took the outside and\nthey gave it a zero.\n\n1759\n01:34:39,530 --> 01:34:42,470\nThat means it is the least\ntrusted network possible.\n\n1760\n01:34:42,470 --> 01:34:43,200\n>> Right.\n\n1761\n01:34:43,200 --> 01:34:45,340\n>> Versus the inside\nthey gave a one hundred.\n\n1762\n01:34:45,340 --> 01:34:48,102\nThat's the highest\ntrusted possible network.\n\n1763\n01:34:48,102 --> 01:34:52,010\nAll right, then you've got like the DMZ\nwhich is fifty right in the middle.\n\n1764\n01:34:52,010 --> 01:34:54,240\nWell the inside network is a one hundred.\n\n1765\n01:34:54,240 --> 01:34:59,512\nSo the inside network is allowed to\naccess the entire DMZ and the outside.\n\n1766\n01:34:59,512 --> 01:35:05,660\nAll right but the outside is not allowed\nto access the DMZ or the inside.\n\n1767\n01:35:05,660 --> 01:35:10,730\nThe DMZ is allowed to access the outside\nbecause 50 is higher than zero, but\n\n1768\n01:35:10,730 --> 01:35:14,980\nthe DMZ is not allowed to access\nthe inside because 50 is lower than 100.\n\n1769\n01:35:14,980 --> 01:35:20,670\nIt's this security level that\nsets up our default rules.\n\n1770\n01:35:20,670 --> 01:35:23,780\nIf we don't add any ACLs,\nthis is the default.\n\n1771\n01:35:23,780 --> 01:35:25,330\nThis is what's gonna happen.\n\n1772\n01:35:25,330 --> 01:35:29,250\nHigher numbers are allowed\nto access any lower numbers,\n\n1773\n01:35:29,250 --> 01:35:31,140\nlower numbers are not allowed\nto access higher numbers.\n\n1774\n01:35:31,140 --> 01:35:31,750\n>> Yeah.\n\n1775\n01:35:31,750 --> 01:35:33,990\nNow just as a little pneumonic,\nI was reading this the other day.\n\n1776\n01:35:33,990 --> 01:35:37,190\nThey talk about that there's a little\nkind of jingle, I say a jingle,\n\n1777\n01:35:37,190 --> 01:35:40,610\nI guess a rhyme that you could use,\nhigh to low.\n\n1778\n01:35:40,610 --> 01:35:41,450\nYou know, free to go.\n\n1779\n01:35:41,450 --> 01:35:43,890\nAnd then, low to high, simply deny.\n\n1780\n01:35:45,090 --> 01:35:46,070\n>> All right.\n>> Go figure.\n\n1781\n01:35:46,070 --> 01:35:47,600\nYeah, I was reading that.\n\n1782\n01:35:47,600 --> 01:35:50,740\n>> It's not a Barry Manilow jingle.\n\n1783\n01:35:50,740 --> 01:35:53,506\nBut, you know.\n>> I'm not gonna make a million dollars\n\n1784\n01:35:53,506 --> 01:35:54,340\noff of this.\n\n1785\n01:35:54,340 --> 01:35:57,250\n>> So, high to low, free to go.\n\n1786\n01:35:57,250 --> 01:35:58,800\nLow to high.\n\n1787\n01:35:58,800 --> 01:35:59,590\n>> Denied.\n\n1788\n01:35:59,590 --> 01:36:01,050\n>> Okay, denied.\n\n1789\n01:36:01,050 --> 01:36:01,800\n>> Simply denied.\n\n1790\n01:36:01,800 --> 01:36:03,000\n>> Simply denied.\n\n1791\n01:36:03,000 --> 01:36:03,750\nI was thinking prepare to die.\n\n1792\n01:36:03,750 --> 01:36:07,677\nBut, you know, [LAUGH] All right so,\njust keep that in mind,\n\n1793\n01:36:07,677 --> 01:36:11,464\nthese security levels,\nwe don't have those on routers.\n\n1794\n01:36:11,464 --> 01:36:12,736\n>> No.\n>> That's a big difference.\n\n1795\n01:36:12,736 --> 01:36:14,670\n>> Yeah.\n>> On a router it's very simple,\n\n1796\n01:36:14,670 --> 01:36:16,060\nthe default is you deny.\n\n1797\n01:36:16,060 --> 01:36:18,140\nRight?\nThat's how it is on a router but\n\n1798\n01:36:18,140 --> 01:36:21,675\non an ASA the default is not always deny.\n\n1799\n01:36:21,675 --> 01:36:23,670\n>> Yeah.\n>> If its a high number going to a lower\n\n1800\n01:36:23,670 --> 01:36:25,410\nnumber, the default is allow.\n\n1801\n01:36:25,410 --> 01:36:26,578\n>> Yeah.\n\n1802\n01:36:26,578 --> 01:36:28,930\n>> And the lower number going to\na higher number, the default is deny.\n\n1803\n01:36:28,930 --> 01:36:30,410\nSo be aware of that.\n\n1804\n01:36:30,410 --> 01:36:34,750\nThe default is when you set up the ASA,\nif you just do an inside and\n\n1805\n01:36:34,750 --> 01:36:38,020\nan outside Inside is a 100,\noutside is zero.\n\n1806\n01:36:38,020 --> 01:36:39,650\nIf you bring a DMZ into the mix it's 50.\n\n1807\n01:36:39,650 --> 01:36:40,680\nAll right?\n\n1808\n01:36:40,680 --> 01:36:44,980\nThose are the defaults that the initial\nsetup wizard of an ASA creates.\n\n1809\n01:36:44,980 --> 01:36:47,225\nAny other interface, you have to pick.\n\n1810\n01:36:47,225 --> 01:36:49,020\n>> Yeah.\n>> And so they did like a partner\n\n1811\n01:36:49,020 --> 01:36:51,970\nnetwork at 25, and\na management network at 90.\n\n1812\n01:36:51,970 --> 01:36:54,370\nSo those are those are different.\n\n1813\n01:36:54,370 --> 01:36:56,370\nThose are numbers they\npicked out of their heads.\n\n1814\n01:36:56,370 --> 01:36:57,960\nRight?\nThe system didn't do those for them.\n\n1815\n01:36:57,960 --> 01:36:58,780\n>> Yeah.\n\n1816\n01:36:58,780 --> 01:37:02,190\n>> And actually, this brings up a good\npoint on that inside interface.\n\n1817\n01:37:02,190 --> 01:37:02,800\nRight?\n\n1818\n01:37:02,800 --> 01:37:06,147\nThat you actually have to assign\nthat name to it, as well.\n\n1819\n01:37:06,147 --> 01:37:09,715\nYou don't assign a name to that interface,\nI'm just gonna pick this one.\n\n1820\n01:37:09,715 --> 01:37:11,695\nIt's not gonna work very well for you.\n\n1821\n01:37:11,695 --> 01:37:12,455\nSo, yeah.\n\n1822\n01:37:12,455 --> 01:37:14,145\n>> Yeah.\nIf you use the setup wizard,\n\n1823\n01:37:14,145 --> 01:37:14,716\nit'll do it for you.\n\n1824\n01:37:14,716 --> 01:37:15,585\n>> Yeah.\n>> But if you do it by hand,\n\n1825\n01:37:15,585 --> 01:37:19,064\nand you forget to assign it a name,\nthe interface might as well be disabled.\n\n1826\n01:37:19,064 --> 01:37:19,970\n>> Yeah.\n>> In fact look at\n\n1827\n01:37:19,970 --> 01:37:21,375\ninterfaces four through seven.\n\n1828\n01:37:21,375 --> 01:37:23,230\n>> No.\n>> They don't have names and so\n\n1829\n01:37:23,230 --> 01:37:25,120\ntheir current state is disabled.\n\n1830\n01:37:25,120 --> 01:37:25,620\n>> Disabled, yeah.\n>> All right?\n\n1831\n01:37:25,620 --> 01:37:27,230\nThe only difference is it wouldn't let me\n\n1832\n01:37:27,230 --> 01:37:27,861\ndo it in GUI.\n\n1833\n01:37:27,861 --> 01:37:30,380\n>> Yeah.\n>> But on an actual ASA\n\n1834\n01:37:30,380 --> 01:37:32,955\nyou can assign more than one\ninterface to the same name.\n\n1835\n01:37:32,955 --> 01:37:35,480\n>> Right.\n>> You're basically creating like a Vlan.\n\n1836\n01:37:35,480 --> 01:37:40,270\nIf I assign four, five, six, and seven to\nthe inside name, they would all be part of\n\n1837\n01:37:40,270 --> 01:37:43,740\nthe inside zone, and it would be like\na little five port switch, where I could\n\n1838\n01:37:43,740 --> 01:37:46,572\nplug in various servers or whatever and\nhave them all be on the inside.\n\n1839\n01:37:46,572 --> 01:37:47,960\nAll right.\n\n1840\n01:37:47,960 --> 01:37:50,690\nSo, that is something that\nyou can do on the ASAs.\n\n1841\n01:37:50,690 --> 01:37:52,760\nOn a router, you can do the same thing.\n\n1842\n01:37:52,760 --> 01:37:56,640\nExcept on a router,\neach interface has to have an IP.\n\n1843\n01:37:56,640 --> 01:38:00,860\nOn an ASA, the IP is actually\nbeing attached to that name,\n\n1844\n01:38:00,860 --> 01:38:02,610\nnot the physical interface.\n\n1845\n01:38:02,610 --> 01:38:05,030\nSo you can have more than one\ninterface sharing the same IP,\n\n1846\n01:38:05,030 --> 01:38:06,810\nit is a litter bit\ndifferent functionality.\n\n1847\n01:38:08,260 --> 01:38:11,070\nAll right,\nonce we've got these created though,\n\n1848\n01:38:11,070 --> 01:38:14,210\nthat's where our firewall rules come in.\n\n1849\n01:38:14,210 --> 01:38:17,740\nSo when we go under our access rules,\nyou'll see several divisions.\n\n1850\n01:38:17,740 --> 01:38:19,780\nLet me just collapse all of these.\n\n1851\n01:38:19,780 --> 01:38:24,380\nYou'll see several divisions in\nhere which are traffic going\n\n1852\n01:38:24,380 --> 01:38:26,760\ninto the inside interface.\n\n1853\n01:38:26,760 --> 01:38:28,970\nTraffic going into the outside interface.\n\n1854\n01:38:28,970 --> 01:38:31,550\nTraffic going into the partner DMZ or\n\n1855\n01:38:31,550 --> 01:38:35,770\ntraffic going into global which is passing\nthrough the firewall all together.\n\n1856\n01:38:35,770 --> 01:38:36,380\nAll right?\n\n1857\n01:38:36,380 --> 01:38:39,250\nYou'll notice that there's\nno traffic going out of.\n\n1858\n01:38:39,250 --> 01:38:42,020\nAll right?\nWe don't typically do outbound rules on\n\n1859\n01:38:42,020 --> 01:38:43,070\nan ASA.\n\n1860\n01:38:43,070 --> 01:38:46,400\nASAs are doing filtering in hardware and\n\n1861\n01:38:46,400 --> 01:38:49,660\nthey've got acceleration circuits just for\nthis.\n\n1862\n01:38:49,660 --> 01:38:54,370\nAnd so they're more efficient when\nthey've processed traffic as it comes in.\n\n1863\n01:38:54,370 --> 01:38:56,810\nAll right, so\nall of these are incoming rules.\n\n1864\n01:38:56,810 --> 01:38:59,818\nTraffic coming into these virtual\ninterfaces or these zone names.\n\n1865\n01:38:59,818 --> 01:39:01,483\nAll right?\n\n1866\n01:39:01,483 --> 01:39:02,730\nAnd whoops.\n\n1867\n01:39:02,730 --> 01:39:07,220\nAnd if we take a look at inside,\nhere they're allowing certain traffic in.\n\n1868\n01:39:07,220 --> 01:39:11,780\nMost people will do a rule just like\nthis that will say, any traffic going\n\n1869\n01:39:11,780 --> 01:39:15,350\ninto the inside interface is\nallowed to go to any destination.\n\n1870\n01:39:15,350 --> 01:39:18,100\nAnd here they're saying\nthe protocol is just IP as a whole.\n\n1871\n01:39:18,100 --> 01:39:21,230\nSo then they're pretty\nmuch allowing everything.\n\n1872\n01:39:21,230 --> 01:39:22,170\nAnd, that's what we want.\n\n1873\n01:39:22,170 --> 01:39:24,024\nOur inside networks, our trusted networks,\n\n1874\n01:39:24,024 --> 01:39:26,810\nwe generally want them to be\nable to get to everywhere else.\n\n1875\n01:39:26,810 --> 01:39:29,650\nBut they've created a bunch of other\nnetworks in here that are allowing\n\n1876\n01:39:29,650 --> 01:39:32,320\ncertain hosts to get to\ncertain destinations.\n\n1877\n01:39:32,320 --> 01:39:35,475\nAnd in fact, looking at these rules,\nalmost all of them are pointless.\n\n1878\n01:39:35,475 --> 01:39:38,580\n>> [LAUGH]\n>> Some of these, like here, HTTP and\n\n1879\n01:39:38,580 --> 01:39:42,010\nHTTPS, from the inside network to the DMZ.\n\n1880\n01:39:42,010 --> 01:39:44,150\nWell, that's covered by this last rule.\n\n1881\n01:39:44,150 --> 01:39:45,600\nSo it's kind of redundant.\n\n1882\n01:39:45,600 --> 01:39:48,840\nThe only reason you'd do a rule like that\nwould be if you wanted to turn on logging\n\n1883\n01:39:48,840 --> 01:39:50,370\nto be able to check that traffic.\n\n1884\n01:39:50,370 --> 01:39:53,270\nOr if you had something else you\nwanted to do, some other action to it.\n\n1885\n01:39:53,270 --> 01:39:55,009\nBut otherwise it's a little redundant.\n\n1886\n01:39:56,440 --> 01:40:01,400\nAnd then we can a look at like our\noutside rules, here, where they're saying\n\n1887\n01:40:01,400 --> 01:40:09,130\nbasically, any traffic from the outside\nheaded towards the inside they're denying.\n\n1888\n01:40:09,130 --> 01:40:10,450\nRight?\nWhich is what we normally want,\n\n1889\n01:40:10,450 --> 01:40:11,830\nwe want to block that traffic.\n\n1890\n01:40:11,830 --> 01:40:14,390\nAnd then here's the things above\nit that we want to permit.\n\n1891\n01:40:14,390 --> 01:40:18,650\nWhat we want to allow in and you'll see\nthe different things they're allowing in.\n\n1892\n01:40:18,650 --> 01:40:23,722\nHTTP traffic to their web server, FTP\ntraffic to their file server, and so on.\n\n1893\n01:40:26,009 --> 01:40:26,550\nAll right.\n\n1894\n01:40:26,550 --> 01:40:29,300\nOne of the convenient things about\nthe ASA is it allows you to assign\n\n1895\n01:40:29,300 --> 01:40:30,930\naliases to everything.\n\n1896\n01:40:30,930 --> 01:40:33,670\nThe router does it, too, but\nit's much easier on the firewall.\n\n1897\n01:40:33,670 --> 01:40:35,660\nSo you can assign names to the IPs,\n\n1898\n01:40:35,660 --> 01:40:38,620\nit makes it easy to spot what\nyou're assigning permissions to.\n\n1899\n01:40:38,620 --> 01:40:39,540\nSo, kind of cool.\n\n1900\n01:40:39,540 --> 01:40:40,346\nAll right,\n\n1901\n01:40:40,346 --> 01:40:45,754\nnow one thing you won't notice in here is\nthat when we define one of these rules.\n\n1902\n01:40:48,391 --> 01:40:53,010\nThe actions are permit or\ndeny and that's it.\n\n1903\n01:40:53,010 --> 01:40:56,600\nBut on the router we had a third option,\nwhich was to inspect and\n\n1904\n01:40:56,600 --> 01:40:57,420\nthat's missing here.\n\n1905\n01:40:57,420 --> 01:41:00,340\nSo, why don't we have that\non this more secure device?\n\n1906\n01:41:00,340 --> 01:41:02,070\nWhy don't we have inspect?\n\n1907\n01:41:02,070 --> 01:41:05,090\nWell, it's not that we don't have it,\nit's just that it's so\n\n1908\n01:41:05,090 --> 01:41:09,825\nmuch more advanced on the firewalls, that\nit's moved off into a different location.\n\n1909\n01:41:09,825 --> 01:41:11,750\n>> Right.\n>> So, here we're just doing\n\n1910\n01:41:11,750 --> 01:41:13,880\nthe packet filter type thing,\nsaying allow or\n\n1911\n01:41:13,880 --> 01:41:16,450\ndeny, don't get too involved\nin the traffic itself.\n\n1912\n01:41:18,510 --> 01:41:22,030\nThen, we stack on top of it\nwhat's called a service policy.\n\n1913\n01:41:22,030 --> 01:41:25,670\nNow a service policy, that's part\nof that modular policy framework.\n\n1914\n01:41:25,670 --> 01:41:30,070\nYou basically have class\nmaps that identify traffic,\n\n1915\n01:41:30,070 --> 01:41:36,880\nyou have a service policy which is where\nwe say what we're gonna do to this stuff.\n\n1916\n01:41:36,880 --> 01:41:40,130\nAnd then we actually attach it to\nan interface where it does its filtering.\n\n1917\n01:41:40,130 --> 01:41:42,162\nAnd so\nif we look under our service policy here.\n\n1918\n01:41:42,162 --> 01:41:46,680\nWe're gonna see a default\ntraffic inspection rule.\n\n1919\n01:41:46,680 --> 01:41:47,450\nAll right.\n\n1920\n01:41:47,450 --> 01:41:51,840\nAnd ASA, by default,\ninspects all the traffic.\n\n1921\n01:41:51,840 --> 01:41:55,520\nSo any rule that you have set to permit,\nit's gonna be inspecting that traffic\n\n1922\n01:41:55,520 --> 01:41:58,810\nunless you choose to manipulate\nthis rule right here.\n\n1923\n01:41:58,810 --> 01:42:02,440\nThis rule just says any\nsource to any destination.\n\n1924\n01:42:02,440 --> 01:42:04,000\nWe want to inspect it.\n\n1925\n01:42:04,000 --> 01:42:04,820\nAll right.\n\n1926\n01:42:04,820 --> 01:42:06,470\nNormally you want to leave that on.\n\n1927\n01:42:06,470 --> 01:42:08,750\nYou might want to tweak\nyour inspections a bit, but\n\n1928\n01:42:08,750 --> 01:42:11,590\notherwise you probably\nwant to leave it on.\n\n1929\n01:42:11,590 --> 01:42:13,930\nSo if we take a look at this default rule.\n\n1930\n01:42:13,930 --> 01:42:16,680\nRight?\nThis is default inspection traffic, and\n\n1931\n01:42:16,680 --> 01:42:20,940\nif I go to the default inspections,\nhere's the traffic that it's watching.\n\n1932\n01:42:20,940 --> 01:42:22,920\nIt's watching FTP.\n\n1933\n01:42:22,920 --> 01:42:25,310\nWatching for\nthat port switch that I talked about.\n\n1934\n01:42:25,310 --> 01:42:26,620\nIt's watching VOIP traffic.\n\n1935\n01:42:26,620 --> 01:42:28,245\nYou'll see SIP down here.\n\n1936\n01:42:28,245 --> 01:42:29,000\n>> Yeah.\n>> Right?\n\n1937\n01:42:29,000 --> 01:42:30,430\n5060.\nWatching for that again.\n\n1938\n01:42:30,430 --> 01:42:33,010\nThat port jumped that I talked\nabout earlier in the show.\n\n1939\n01:42:33,010 --> 01:42:35,450\nThe firewall knows about these things.\n\n1940\n01:42:35,450 --> 01:42:36,910\nIt knows to expect them.\n\n1941\n01:42:36,910 --> 01:42:38,410\nIt's watching out for it.\n\n1942\n01:42:38,410 --> 01:42:41,910\nAnd you'll see a number of standard\nprotocols that are in the list.\n\n1943\n01:42:41,910 --> 01:42:43,800\nMost of them are ones that do port jumps.\n\n1944\n01:42:43,800 --> 01:42:44,400\n>> Right.\n\n1945\n01:42:44,400 --> 01:42:48,710\n>> Other ones are unencrypted protocols\nthat have well-known exploits.\n\n1946\n01:42:48,710 --> 01:42:51,700\nSo you'll see HTTP in the list and SMTP.\n\n1947\n01:42:51,700 --> 01:42:53,420\nThey don't do port jumps.\n\n1948\n01:42:53,420 --> 01:42:53,930\n>> Yeah.\n>> Right?\n\n1949\n01:42:53,930 --> 01:42:55,190\nThey're straight and narrow.\n\n1950\n01:42:55,190 --> 01:42:57,480\nPort 80, port 25, that's it.\n\n1951\n01:42:57,480 --> 01:43:03,345\nBut there's malformed HTTP get\nrequests and malformed SMTP messages.\n\n1952\n01:43:03,345 --> 01:43:07,160\nThat are types of attacks that\nthe ASA can quickly recognize and\n\n1953\n01:43:07,160 --> 01:43:09,460\nblock before theyeven get to your system.\n\n1954\n01:43:09,460 --> 01:43:11,222\nSo, those inspections are turned on also.\n\n1955\n01:43:11,222 --> 01:43:12,510\nAll right?\n\n1956\n01:43:12,510 --> 01:43:16,200\nBut, I will say the bulk of these\nare ones that do port jumps and so\n\n1957\n01:43:16,200 --> 01:43:18,400\nthat's kinda what it's watching for.\n\n1958\n01:43:18,400 --> 01:43:21,580\nSome of them like DNS,\nwhere it jumps from to TCP to UDP and\n\n1959\n01:43:21,580 --> 01:43:24,650\nsome of the others are like that.\n\n1960\n01:43:24,650 --> 01:43:26,552\nOr ICMP where there is no state.\n\n1961\n01:43:26,552 --> 01:43:27,064\n>> RIght.\n>> Right?\n\n1962\n01:43:27,064 --> 01:43:28,730\nWhen you send a ping out,\n\n1963\n01:43:28,730 --> 01:43:30,795\nit's not like you have a port\nnumber attached to a ping.\n\n1964\n01:43:30,795 --> 01:43:33,240\n>> Right.\n>> And so it's a tough one to match up.\n\n1965\n01:43:33,240 --> 01:43:34,920\nSo these are all there by default.\n\n1966\n01:43:34,920 --> 01:43:37,820\nNow you can tweak any of these\nif you go into Rule Actions.\n\n1967\n01:43:37,820 --> 01:43:39,140\nYou can turn them on and off, and\n\n1968\n01:43:39,140 --> 01:43:42,690\nyou'll see there's even more protocols\nin here that aren't turned on.\n\n1969\n01:43:42,690 --> 01:43:46,740\nAnd, so we can turn some of them on and\nsome of them even support configurations.\n\n1970\n01:43:46,740 --> 01:43:51,830\nSo, you'll see like, if I go under HTTP,\nI can go to configure.\n\n1971\n01:43:51,830 --> 01:43:56,880\nAnd in here we can create\nan HTTP inspect map.\n\n1972\n01:43:56,880 --> 01:43:59,760\nAnd we can specify very\nspecific commands and\n\n1973\n01:43:59,760 --> 01:44:04,250\ntypes of traffic that we want to\ninspect or block or allow or whatever.\n\n1974\n01:44:04,250 --> 01:44:05,920\nYou can really get granular.\n\n1975\n01:44:05,920 --> 01:44:10,480\nBut you really got to know your stuff\nto manipulate these in a useful manner,\n\n1976\n01:44:10,480 --> 01:44:11,200\nall right.\n\n1977\n01:44:11,200 --> 01:44:16,024\nAnd so you'll see here, I can create this\nand specify what it is we want to do,\n\n1978\n01:44:16,024 --> 01:44:20,480\ndropping connections, looking for\nrequests with non ASCII headers,\n\n1979\n01:44:20,480 --> 01:44:25,255\nURI filtering, all sorts of really neat\nstuff that you can choose to block.\n\n1980\n01:44:25,255 --> 01:44:29,995\nI have seen environments where.\n\n1981\n01:44:29,995 --> 01:44:31,535\nWell actually we bumped into it here.\n\n1982\n01:44:31,535 --> 01:44:32,525\nWhere is it?\n\n1983\n01:44:32,525 --> 01:44:34,045\nTFTP, there we go.\n\n1984\n01:44:34,045 --> 01:44:38,745\nWhere here at our office we actually have\n\n1985\n01:44:38,745 --> 01:44:41,005\nthree different locations\nwhere we have systems.\n\n1986\n01:44:41,005 --> 01:44:44,515\nAnd so we have firewalls in between and\nthey build up VPN tunnels.\n\n1987\n01:44:44,515 --> 01:44:49,130\nAnd we have a TFTP server here that\nwe use for our voice over IP phones.\n\n1988\n01:44:49,130 --> 01:44:51,950\nAnd the phones at the other locations\nneed to be able to reach out and hit it.\n\n1989\n01:44:51,950 --> 01:44:58,530\nWell, TFTP uses UDP, it's not safe,\nit doesn't use a session,\n\n1990\n01:44:58,530 --> 01:45:02,220\nit's a sessionless protocol, and so it\nhas all sorts of weird, quirky problems.\n\n1991\n01:45:02,220 --> 01:45:05,520\nAnd we have to have TFTP\ninspection turned on,\n\n1992\n01:45:05,520 --> 01:45:08,270\nor that traffic doesn't make\nit through firewalls, right?\n\n1993\n01:45:08,270 --> 01:45:10,043\nSo that's a scenario where\nwe had to come in and\n\n1994\n01:45:10,043 --> 01:45:12,510\nturn that on to make sure that it\nwould pass through our systems.\n\n1995\n01:45:13,520 --> 01:45:17,580\nNow what Don was describing here\nyou can also find to a point\n\n1996\n01:45:17,580 --> 01:45:23,260\nin the Cisco IOS under that three,\nC3PL, is that right?\n\n1997\n01:45:23,260 --> 01:45:26,920\nThe service policies and\n\n1998\n01:45:26,920 --> 01:45:29,570\nthe class maps and the\n>> Oh yeah,\n\n1999\n01:45:29,570 --> 01:45:31,280\nyou know what I turned that off.\n\n2000\n01:45:31,280 --> 01:45:36,080\nBut you know, when we see the service\npolicy in an ASA we just see one thing,\n\n2001\n01:45:36,080 --> 01:45:40,160\nbut on the router you see it in\nall of it's pieces, the class map,\n\n2002\n01:45:40,160 --> 01:45:42,640\nthe policy map, and the service policy.\n\n2003\n01:45:42,640 --> 01:45:46,630\n>> And I think it's called three, C-\n>> C3PO?\n\n2004\n01:45:46,630 --> 01:45:48,158\n>> It's not C3PO, but it's close.\n\n2005\n01:45:48,158 --> 01:45:49,779\n>> [LAUGH]\n>> It's C3PL.\n\n2006\n01:45:49,779 --> 01:45:51,508\nC3PL.\n\n2007\n01:45:51,508 --> 01:45:53,370\n>> What does that stand for?\n\n2008\n01:45:53,370 --> 01:45:57,930\n>> Cisco configuration,\ncommon configuration.\n\n2009\n01:45:57,930 --> 01:46:01,550\n>> Cisco Common Classification\nPolicy Language, CCCPL.\n\n2010\n01:46:01,550 --> 01:46:05,330\n>> See, you thought I was joking,\nthat's hard to.\n\n2011\n01:46:05,330 --> 01:46:07,460\nBut that's where it's actually found,\n\n2012\n01:46:07,460 --> 01:46:11,870\nunderneath the CCP setting\nunderneath security.\n\n2013\n01:46:11,870 --> 01:46:16,260\nSo it's kind of doing the same things but\nagain remember, we do it on router.\n\n2014\n01:46:16,260 --> 01:46:20,375\nMore performance hits on the ASA\nis what it's designed to do.\n\n2015\n01:46:20,375 --> 01:46:21,790\n>> Mm-hm.\n>> That's why we want to do it there.\n\n2016\n01:46:21,790 --> 01:46:22,520\n>> Yeah absolutely.\n\n2017\n01:46:22,520 --> 01:46:23,550\n>> Yeah.\n\n2018\n01:46:23,550 --> 01:46:26,870\n>> Alright so\nlet's see that is the bulk of that.\n\n2019\n01:46:28,730 --> 01:46:29,360\nGee, Ronnie, is that it?\n\n2020\n01:46:29,360 --> 01:46:30,530\nWhat else is in our objective, Ronnie?\n\n2021\n01:46:30,530 --> 01:46:32,400\n>> I think that is actually everything.\n\n2022\n01:46:32,400 --> 01:46:33,400\n>> All right.\n\n2023\n01:46:33,400 --> 01:46:38,140\nKeep in mind that on the exam when\nyou get to the lab parts of the exam,\n\n2024\n01:46:38,140 --> 01:46:40,300\nthey generally are going\nto be on the routers.\n\n2025\n01:46:40,300 --> 01:46:43,850\nIt is going to be GUI-based for\nalmost all of the questions.\n\n2026\n01:46:43,850 --> 01:46:44,650\nI don't know.\n\n2027\n01:46:44,650 --> 01:46:47,540\nThere's only so much we're allowed to\ntalk about with what's on the exam.\n\n2028\n01:46:47,540 --> 01:46:49,420\nBut generally it's gonna be GUI based.\n\n2029\n01:46:49,420 --> 01:46:52,910\nOn the ASA side of things, they know\nthis is your first exposure to them.\n\n2030\n01:46:54,050 --> 01:46:56,420\nIf you wanna learn more\nabout working with ASAs,\n\n2031\n01:46:56,420 --> 01:46:58,560\nthere's an entirely separate\ncertification for that.\n\n2032\n01:46:58,560 --> 01:47:00,560\nRight?\nThe CCMP security\n\n2033\n01:47:00,560 --> 01:47:02,410\n>> Moves into the ASA as one of the exams\n\n2034\n01:47:02,410 --> 01:47:04,690\nis entirely done on the ASA's.\n\n2035\n01:47:04,690 --> 01:47:07,610\nSo, this exam focuses\nmore on the router side\n\n2036\n01:47:07,610 --> 01:47:10,990\nof things to leave the other exam to\nfocus on the firewall side of things.\n\n2037\n01:47:10,990 --> 01:47:14,230\nBut, it is a good idea to be at\nleast basically familiar with it.\n\n2038\n01:47:14,230 --> 01:47:17,790\nYou can use the ASDM demo right from\nCisco's webpage to kind of mess around\n\n2039\n01:47:17,790 --> 01:47:19,890\nwith it, explore it, see what it's like.\n\n2040\n01:47:19,890 --> 01:47:21,950\nSo you know it's cool stuff.\n\n2041\n01:47:21,950 --> 01:47:25,660\nThere's also other resources out\nthere on the Internet that may or\n\n2042\n01:47:25,660 --> 01:47:27,530\nmay not be Cisco approved.\n\n2043\n01:47:27,530 --> 01:47:30,690\nBut ways that you can run\nan ASA on your own machine and\n\n2044\n01:47:30,690 --> 01:47:32,810\nkind of get exposed to it a little bit.\n\n2045\n01:47:32,810 --> 01:47:35,540\nBut definitely don't neglect to work\non the router side of this thing.\n\n2046\n01:47:35,540 --> 01:47:36,280\n>> Definitely.\n\n2047\n01:47:36,280 --> 01:47:40,600\nThe CCP you know, fired up connected to\neither a physical router or you know,\n\n2048\n01:47:40,600 --> 01:47:41,710\nyou can use gns3\n>> Right.\n\n2049\n01:47:41,710 --> 01:47:43,010\n>> Or something like that to work with it.\n\n2050\n01:47:43,010 --> 01:47:44,165\nIt's a little bit slow\n>> Yeah.\n\n2051\n01:47:44,165 --> 01:47:46,240\n>> But for learning purposes it's perfect.\n\n2052\n01:47:46,240 --> 01:47:47,580\nAnd it'll give you a chance to do it.\n\n2053\n01:47:47,580 --> 01:47:49,005\n>> Yeah.\n>> You know, we've got\n\n2054\n01:47:49,005 --> 01:47:50,625\n>> Physical routers here that we use which\n\n2055\n01:47:50,625 --> 01:47:51,185\nare nice and fast.\n\n2056\n01:47:51,185 --> 01:47:51,815\n>> Right.\n\n2057\n01:47:51,815 --> 01:47:54,175\n>> But in a lab environment\nyou can do virtual routers and\n\n2058\n01:47:54,175 --> 01:47:55,965\nthey'll usually keep up just fine for you.\n\n2059\n01:47:57,395 --> 01:47:58,395\n>> Sounds good.\n\n2060\n01:47:58,395 --> 01:48:01,360\n>> All right, well ladies and\ngentlemen that pretty much wraps up our\n\n2061\n01:48:01,360 --> 01:48:03,120\n>> Firewall technologies.\n\n2062\n01:48:03,120 --> 01:48:06,750\nKey take aways there that you can use your\nrouters you can use your firewalls, and\n\n2063\n01:48:06,750 --> 01:48:08,140\nfunctionality is there.\n\n2064\n01:48:08,140 --> 01:48:11,100\nIt is a matter of making sure you buy\nthe right license if you're gonna use\n\n2065\n01:48:11,100 --> 01:48:12,370\nthe router side of things.\n\n2066\n01:48:12,370 --> 01:48:15,800\nThe firewall's all ready got\nthe license it'll do it just fine.\n\n2067\n01:48:15,800 --> 01:48:16,460\n>> Right.\n\n2068\n01:48:16,460 --> 01:48:20,150\n>> If you have any questions, let me just\nremind you guys that live during the show\n\n2069\n01:48:20,150 --> 01:48:22,590\nyou can go to itpro.tv/live,\n\n2070\n01:48:22,590 --> 01:48:25,040\nyou'll see the chat box right\nthere beneath the video.\n\n2071\n01:48:25,040 --> 01:48:29,680\nYou can post your questions, we will\nmonitor and answer like we do every day.\n\n2072\n01:48:29,680 --> 01:48:30,450\n>> Right.\n>> You can\n\n2073\n01:48:30,450 --> 01:48:32,080\nalso post questions after the show.\n\n2074\n01:48:32,080 --> 01:48:34,320\nAt the top of every page,\nthere's a link that says Q&A.\n\n2075\n01:48:34,320 --> 01:48:37,320\nYou can click on that,\npost your questions right there\n\n2076\n01:48:37,320 --> 01:48:38,295\n>> And again, we monitor and\n\n2077\n01:48:38,295 --> 01:48:40,160\nanswer, we make sure you get\nthose questions answered so\n\n2078\n01:48:40,160 --> 01:48:44,030\nyou've got the information you\nneed to go in and pass that test.\n\n2079\n01:48:44,030 --> 01:48:46,080\nSo, definitely take\nadvantage of that resource.\n\n2080\n01:48:46,080 --> 01:48:47,050\nIt is there for you.\n\n2081\n01:48:48,170 --> 01:48:49,610\nAll right,\nwell I hoped you guys enjoyed the show.\n\n2082\n01:48:49,610 --> 01:48:52,180\nSigning off for ITProTV, I'm Don Pezet.\n\n2083\n01:48:52,180 --> 01:48:52,865\n>> And I'm Ronnie Wong.\n\n2084\n01:48:52,865 --> 01:48:53,921\n>> And we'll see you next time.\n\n2085\n01:48:53,921 --> 01:49:03,921\n[MUSIC]\n\n2086\n01:49:04,938 --> 01:49:12,900\n[SOUND]\n\n",
          "vimeoId": "86988768"
        }
      ],
      "title": "Cisco Firewall Technologies"
    },
    {
      "episodes": [
        {
          "description": "An intrusion prevention system is a device that monitors traffic, looks at the traffic patterns and analyzes it to determine whether or not an attack is happening. Viewers will hear discussions of the use of Cisco Intrusion Prevention Systems (IPS) as a security implementation in the network, the most common implementations as well as configuring the Cisco IOS IPS using the CCP.",
          "length": "5445",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/iins/010-Intrusion-Prevention-Systems.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/iins/010-Intrusion-Prevention-Systems-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/iins/010-Intrusion-Prevention-Systems-sm.jpg",
          "title": "Intrusion Prevention Systems",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:33,886 --> 00:00:36,360\nAll right, good morning,\ngood afternoon, good evening and\n\n3\n00:00:36,360 --> 00:00:38,181\nwelcome back to another\nepisode of ITProTV.\n\n4\n00:00:38,181 --> 00:00:40,960\nI'm your host Don Pezet today with Mr.\nRonnie Wong.\n\n5\n00:00:40,960 --> 00:00:42,160\nHow's it going, Ronnie?\n\n6\n00:00:42,160 --> 00:00:43,940\n>> It's going very well this morning.\n\n7\n00:00:43,940 --> 00:00:47,316\nI was not killed on\nthe Walking Dead last night.\n\n8\n00:00:47,316 --> 00:00:50,150\n[LAUGH]\n>> No.\n\n9\n00:00:50,150 --> 00:00:51,550\nFunny aside about the Walking Dead.\n\n10\n00:00:51,550 --> 00:00:52,510\nDo you actually watch this show?\n\n11\n00:00:52,510 --> 00:00:54,630\n>> Yes I do.\n>> My wife watches it religiously.\n\n12\n00:00:54,630 --> 00:00:56,540\nAnd I watched the first\ncouple of episodes.\n\n13\n00:00:56,540 --> 00:00:59,730\nAnd I said honey,\nI've never seen a show before,\n\n14\n00:00:59,730 --> 00:01:04,810\nwhere I was completely impartial\nto any of the characters dying.\n\n15\n00:01:04,810 --> 00:01:06,620\nIf they killed of everyone\nI'd be perfectly fine.\n\n16\n00:01:06,620 --> 00:01:10,390\nSo no emotional attachment to that show.\n\n17\n00:01:10,390 --> 00:01:12,306\nBut do you know what I do have\nan emotional attachment to Ronnie?\n\n18\n00:01:12,306 --> 00:01:14,653\nIntrusion prevention systems.\n\n19\n00:01:14,653 --> 00:01:19,047\n>> I knew that, he hearts it, he hearts it\n>> [LAUGH] Probably you see I got a.\n\n20\n00:01:19,047 --> 00:01:19,940\n>> That's right.\n\n21\n00:01:19,940 --> 00:01:22,145\n>> I can get bumper stickers made.\n\n22\n00:01:22,145 --> 00:01:23,010\n>> [LAUGH]\n>> So\n\n23\n00:01:23,010 --> 00:01:27,100\nwe've got another exciting\nepisode of the Cisco IINS show.\n\n24\n00:01:27,100 --> 00:01:29,930\nThe Implementing iOS\nNetwork Security show.\n\n25\n00:01:29,930 --> 00:01:33,010\nAnd what we're gonna take a look at today\nis actually kinda neat because we're gonna\n\n26\n00:01:33,010 --> 00:01:36,290\ntake a look some devices that don't\nrun the iOS because why would you have\n\n27\n00:01:36,290 --> 00:01:38,425\nconsistency in the name\nof an exam certification.\n\n28\n00:01:38,425 --> 00:01:39,060\n>> [LAUGH]\n>> So\n\n29\n00:01:39,060 --> 00:01:43,570\nwe're gonna take a look at\nCisco Intrusion Prevention Systems.\n\n30\n00:01:43,570 --> 00:01:47,450\nWhat they are, how they work, how they\ndo what they do, and most importantly,\n\n31\n00:01:47,450 --> 00:01:49,210\nwhat we need to know for the exam.\n\n32\n00:01:49,210 --> 00:01:50,540\n>> All right.\n\n33\n00:01:50,540 --> 00:01:54,350\nYeah, for Cisco Intrusion Prevention\nSystems here, this actually covers, I hate\n\n34\n00:01:54,350 --> 00:01:59,090\nsaying it, a completely different product\nline than the actual Cisco iOS itself.\n\n35\n00:01:59,090 --> 00:02:01,730\nSo, instead of actually just\nlooking directly on the router,\n\n36\n00:02:01,730 --> 00:02:04,740\ndon't get me wrong they do have components\nthat you can add in to routers here.\n\n37\n00:02:04,740 --> 00:02:08,370\nBut they're really talking about just\nspecific devices that we can add on\n\n38\n00:02:08,370 --> 00:02:14,040\nin addition to the iOS that can\nreally help us to specifically block\n\n39\n00:02:14,040 --> 00:02:16,340\ndata that's actually\ncoming in to our network.\n\n40\n00:02:16,340 --> 00:02:19,870\nYeah, and so I mean that's basically\nthe core function of an IPS.\n\n41\n00:02:19,870 --> 00:02:22,380\nRight?\nSo an IPS, like the name implies,\n\n42\n00:02:22,380 --> 00:02:25,050\nIntrusion Prevention System.\n\n43\n00:02:25,050 --> 00:02:25,680\nWhat it is?\n\n44\n00:02:25,680 --> 00:02:29,830\nA device that monitors traffic, and\nwatches traffic on your network, and\n\n45\n00:02:29,830 --> 00:02:31,430\nit looks at the traffic patterns.\n\n46\n00:02:31,430 --> 00:02:34,720\nAnd based on the data that it sees,\n\n47\n00:02:34,720 --> 00:02:38,750\nwe can make an assumption or\nan educated guess or whatever.\n\n48\n00:02:38,750 --> 00:02:41,310\nThen it can analyze the traffic and\ndetermine whether or\n\n49\n00:02:41,310 --> 00:02:42,390\nnot an attack is happening.\n\n50\n00:02:42,390 --> 00:02:48,050\nNow, the cool part about that is\nbecause it's seeing it on the network.\n\n51\n00:02:48,050 --> 00:02:51,710\nOften times it can stop the attack\nbefore it gets the intended targets.\n\n52\n00:02:51,710 --> 00:02:53,870\n>> Right.\n>> The intended target never sees it.\n\n53\n00:02:53,870 --> 00:02:56,070\nI know I mentioned it\nin another episode how,\n\n54\n00:02:56,070 --> 00:03:00,070\nwhere if you are running like host\nbased intrusion prevention systems.\n\n55\n00:03:00,070 --> 00:03:04,010\nIf you're running antivirus and\nanti-malware on your laptop, for example.\n\n56\n00:03:04,010 --> 00:03:07,770\nAnd it kicks in that means\nthe attacker made it all the way to\n\n57\n00:03:07,770 --> 00:03:09,410\nyour laptop before they were stopped.\n\n58\n00:03:09,410 --> 00:03:10,690\nThat's kind of a bad thing.\n\n59\n00:03:10,690 --> 00:03:11,360\n>> Right.\n\n60\n00:03:11,360 --> 00:03:13,710\n>> It'd be nice to stop it on the network.\n\n61\n00:03:13,710 --> 00:03:15,880\nAll right.\nNow, the problem with an IPS is we've\n\n62\n00:03:15,880 --> 00:03:19,610\ngot to put it somewhere in the network\nwhere it can see all the traffic and so.\n\n63\n00:03:20,840 --> 00:03:23,520\nWhat device sees all\nthe traffic on your network?\n\n64\n00:03:23,520 --> 00:03:24,680\n>> A router.\n>> A router.\n\n65\n00:03:24,680 --> 00:03:28,430\nAnd so Cisco does have\na software IPS feature set.\n\n66\n00:03:28,430 --> 00:03:30,300\nThey support it on most routers.\n\n67\n00:03:30,300 --> 00:03:32,130\nThat you can install or\n\n68\n00:03:32,130 --> 00:03:35,350\nactivate on the router then\nthe router will start to scan it.\n\n69\n00:03:35,350 --> 00:03:37,220\nBut just like the firewalls,\n\n70\n00:03:37,220 --> 00:03:40,965\nremember we did the zone based\nfirewalls the last episode or two?\n\n71\n00:03:40,965 --> 00:03:42,880\n>> Yeah.\n>> And with zone based firewalls,\n\n72\n00:03:42,880 --> 00:03:45,980\nI said hey, you can do it on the router,\nand that's great.\n\n73\n00:03:45,980 --> 00:03:49,920\nBut in a high traffic environment,\nyou're gonna want a hardware firewall.\n\n74\n00:03:49,920 --> 00:03:51,380\nSame thing goes for IPS.\n\n75\n00:03:51,380 --> 00:03:55,910\nYou can do IPS on your router if you want,\nand that's great for a small office or\n\n76\n00:03:55,910 --> 00:03:57,260\na branch office.\n\n77\n00:03:57,260 --> 00:04:03,120\nBut, because it's having to scan every\npacket in transit, it hurts performance.\n\n78\n00:04:03,120 --> 00:04:07,090\nAnd so you'll probably want to\ngo to a hardware IPS solution\n\n79\n00:04:07,090 --> 00:04:09,070\ninstead of relying on your router.\n\n80\n00:04:09,070 --> 00:04:10,360\n>> Right.\n\n81\n00:04:10,360 --> 00:04:12,990\n>> Now when I say it scans the traffic,\nwhat am I talking about there?\n\n82\n00:04:12,990 --> 00:04:16,360\nWell, think of it like your antivirus\nsoftware on your laptop or desktop.\n\n83\n00:04:16,360 --> 00:04:18,162\nRight?\nHopefully, you run an antivirus.\n\n84\n00:04:18,162 --> 00:04:18,675\nRight?\n>> [LAUGH]\n\n85\n00:04:18,675 --> 00:04:20,765\n>> And what that software does is\n\n86\n00:04:20,765 --> 00:04:23,980\nevery time you access a file or\nwhatever, it scans the file.\n\n87\n00:04:23,980 --> 00:04:25,980\nAnd determines whether or\nnot there's virus in there.\n\n88\n00:04:25,980 --> 00:04:31,400\nWell, IPS works the same way except it's\nlooking at packets instead of files.\n\n89\n00:04:31,400 --> 00:04:36,590\nAnd so it's looking at commands that\npeople using, ports people are using\n\n90\n00:04:36,590 --> 00:04:41,145\nin repetitious patterns like if you're\ndoing a ping sweep or a port scan.\n\n91\n00:04:41,145 --> 00:04:42,795\nRight?\nIf you're doing a port scan,\n\n92\n00:04:42,795 --> 00:04:45,510\nyou're hitting port after\nport after port on a system.\n\n93\n00:04:45,510 --> 00:04:49,010\nIt's pretty easy to spot that pattern and\nso an IPS can do that.\n\n94\n00:04:49,010 --> 00:04:50,970\nIt watches for those patterns.\n\n95\n00:04:50,970 --> 00:04:56,230\nIt does that utilizing signatures which\nare basically like anti-virus definitions.\n\n96\n00:04:56,230 --> 00:05:00,430\nExcept the signatures in an IPS\nare identifying types of network activity,\n\n97\n00:05:00,430 --> 00:05:02,660\nnot necessarily specific\nfiles to look for.\n\n98\n00:05:02,660 --> 00:05:06,343\n>> All right, now when we start\ntalking about the IPS then,\n\n99\n00:05:06,343 --> 00:05:09,973\nDon there's gotta just be one\nplace I would put the IPS.\n\n100\n00:05:09,973 --> 00:05:11,787\nRight?\nRight behind the firewall and\n\n101\n00:05:11,787 --> 00:05:14,076\nI'm not worried about\ntouching it ever again.\n\n102\n00:05:14,076 --> 00:05:15,983\n>> Okay, absolutely right.\n\n103\n00:05:15,983 --> 00:05:17,765\n[LAUGH]\n>> That covers every single of traffic\n\n104\n00:05:17,765 --> 00:05:19,337\nthat we have coming into our network.\n\n105\n00:05:19,337 --> 00:05:22,069\n>> No, unfortunately as you've,\nI'm sure, guessed from Ronnie's tone.\n\n106\n00:05:22,069 --> 00:05:24,770\n>> [LAUGH]\n>> There are many different ways to\n\n107\n00:05:24,770 --> 00:05:25,900\nimplement an IPS,\n\n108\n00:05:25,900 --> 00:05:29,600\nand the big thing comes down to what\nit is that you purchased exactly.\n\n109\n00:05:29,600 --> 00:05:30,100\n>> Right.\n>> Right?\n\n110\n00:05:30,100 --> 00:05:31,260\nCuz there's different solutions to\n\n111\n00:05:31,260 --> 00:05:32,670\nimplement in different ways.\nRight.\n\n112\n00:05:32,670 --> 00:05:35,230\nSo, I already mentioned that\nthere's software that we can run\n\n113\n00:05:35,230 --> 00:05:36,570\nright on the router.\n\n114\n00:05:36,570 --> 00:05:40,780\nAnd if that's the case when you set up\nan IPS, an Intrusion Prevention System.\n\n115\n00:05:40,780 --> 00:05:42,290\nIt's gonna go on your router.\n\n116\n00:05:42,290 --> 00:05:45,680\nWell, if you have a Cisco ASA firewall,\n\n117\n00:05:45,680 --> 00:05:50,340\nthey actually make a hardware card that\nyou can pop inside of the firewall.\n\n118\n00:05:50,340 --> 00:05:51,773\nNow you're doing IPS in hardware.\n\n119\n00:05:51,773 --> 00:05:52,849\n>> Yeah.\n>> That's even better.\n\n120\n00:05:52,849 --> 00:05:53,380\nRight?\n\n121\n00:05:53,380 --> 00:05:55,920\nBut it's more expensive because\nyou have to buy that card.\n\n122\n00:05:55,920 --> 00:06:00,410\nSo in that case, you'll do your\nIPS functions on the firewall.\n\n123\n00:06:00,410 --> 00:06:01,160\nRight?\n\n124\n00:06:01,160 --> 00:06:05,560\nOr the third option is you can say,\njust forget the router and firewall.\n\n125\n00:06:05,560 --> 00:06:08,550\nI'm gonna buy a dedicated IPS appliance.\n\n126\n00:06:08,550 --> 00:06:09,450\n>> Right.\n\n127\n00:06:09,450 --> 00:06:13,810\n>> And Cisco makes a line, the 4200\nseries of, they call them IPS sensors.\n\n128\n00:06:13,810 --> 00:06:14,630\n>> Yes.\n>> Right?\n\n129\n00:06:14,630 --> 00:06:16,030\nAnd the sensor line.\n\n130\n00:06:16,030 --> 00:06:18,670\nAnd it's just a set of equipment.\n\n131\n00:06:18,670 --> 00:06:22,400\nAnd you can then take that and\ninstall it pretty much wherever you want.\n\n132\n00:06:22,400 --> 00:06:25,452\nBut where you install it is gonna\ninfluence the way that it works.\n\n133\n00:06:25,452 --> 00:06:28,540\nAll right?\n\n134\n00:06:28,540 --> 00:06:29,730\nSo let's kinda show that.\n\n135\n00:06:29,730 --> 00:06:31,320\nI'm trying to make sure I\ndon't get too far ahead.\n\n136\n00:06:31,320 --> 00:06:34,500\n>> Right. Yeah. >> So let's take\na look at some of the products first.\n\n137\n00:06:34,500 --> 00:06:35,428\nRight?\nSo.\n\n138\n00:06:37,761 --> 00:06:41,960\nLet's just pull this up real quick.\n\n139\n00:06:41,960 --> 00:06:45,570\nNormally I'd go to CDW or whatever,\nbut we can see it right here.\n\n140\n00:06:45,570 --> 00:06:47,110\nSo I'm on Cisco's website, and\n\n141\n00:06:47,110 --> 00:06:51,230\nI'm just going to their intrusion\nprevention systems page.\n\n142\n00:06:51,230 --> 00:06:54,240\nAnd basically they'll show here some of\nthe different product lines they have.\n\n143\n00:06:54,240 --> 00:07:00,650\nAnd notice the very first line they have\nis the Cisco ASA 5500 Series platform.\n\n144\n00:07:00,650 --> 00:07:05,590\nThe ASA 5500 is not an IPS,\nit's a firewall.\n\n145\n00:07:05,590 --> 00:07:10,640\nAnd so what they're really talking about\nare add-on cards to these firewalls to\n\n146\n00:07:10,640 --> 00:07:13,110\nadd that IPS functionality in them.\n\n147\n00:07:13,110 --> 00:07:16,990\nNotice, they don't even list the routers,\nthey just cut straight to the firewalls.\n\n148\n00:07:16,990 --> 00:07:19,090\nAnd then the dedicated sensors.\n\n149\n00:07:19,090 --> 00:07:22,630\nAnd so here you'll see, oh I mentioned\nthe 4200s that had been replaced.\n\n150\n00:07:22,630 --> 00:07:25,800\nSo now we have the 4300 and\n4500 series sensors.\n\n151\n00:07:25,800 --> 00:07:29,312\nThese are the appliances that these if\nyou ever worked with iron port equipment.\n\n152\n00:07:29,312 --> 00:07:31,270\n>> Yeah.\n>> It should look a little familiar.\n\n153\n00:07:31,270 --> 00:07:37,010\nBut with these 4300s, the original Cisco\nones and basically you can implement and\n\n154\n00:07:37,010 --> 00:07:41,470\nscan and monitor your network and\ndo all that with hardware appliances.\n\n155\n00:07:41,470 --> 00:07:42,921\nNow they're not cheap.\n\n156\n00:07:42,921 --> 00:07:43,421\n>> Yeah.\n>> RIght?\n\n157\n00:07:43,421 --> 00:07:45,480\nThey're several thousands of dollars,\n\n158\n00:07:45,480 --> 00:07:49,122\nand actually these guys are tens of\nthousands of dollars in a lot of cases,\n\n159\n00:07:49,122 --> 00:07:52,444\nbut the DSA ones aren't that bad.\nThe thing we have to remember\n\n160\n00:07:52,444 --> 00:07:55,319\nwith the cost on these is\nthat there's two pieces.\n\n161\n00:07:55,319 --> 00:07:56,833\nThere's the hardware.\n\n162\n00:07:56,833 --> 00:07:59,363\nAnd then there's a software subscription\n\n163\n00:07:59,363 --> 00:08:02,801\nyou have to pay to continue\nto get signature updates.\n\n164\n00:08:02,801 --> 00:08:04,081\nIf you're not updating your signatures,\n\n165\n00:08:04,081 --> 00:08:06,701\nyou might as well not have an IPS.\nIt's not gonna be very effective.\n\n166\n00:08:06,701 --> 00:08:08,331\nSo, you need that subscription so\n\n167\n00:08:08,331 --> 00:08:12,430\nthere is an ongoing cost to\nmaintaining IPS on your system.\n\n168\n00:08:12,430 --> 00:08:13,320\n>> Cisco wouldn't do that.\n\n169\n00:08:13,320 --> 00:08:14,190\nYou buy it one time.\n\n170\n00:08:14,190 --> 00:08:15,223\nYou don't pay for anything else.\n\n171\n00:08:15,223 --> 00:08:17,560\n[LAUGH] You're just\nabout ready to go here.\n\n172\n00:08:17,560 --> 00:08:21,100\nNow in each of these you might go,\nwell which one should I pick?\n\n173\n00:08:21,100 --> 00:08:24,560\nWell a lot of times on these products\nit really depends on the size network\n\n174\n00:08:24,560 --> 00:08:26,200\nthat you're actually trying to protect.\n\n175\n00:08:26,200 --> 00:08:31,220\nSo again it doesn't necessarily\nmean that you can't go out and\n\n176\n00:08:31,220 --> 00:08:33,730\nblow $10,000 on that 4500\nseries if you want to.\n\n177\n00:08:33,730 --> 00:08:36,250\nBut a lot of times when you\nstart out small, medium and\n\n178\n00:08:36,250 --> 00:08:40,390\nlarge is where you go in and\nyour company may pick one or\n\n179\n00:08:40,390 --> 00:08:44,120\nthe other products here because of\nall the extra benefits you do get.\n\n180\n00:08:44,120 --> 00:08:48,850\nSo that is why it actually provides such\na wide variety of coverages that you get.\n\n181\n00:08:48,850 --> 00:08:51,590\nBut in terms of the iOS for us,\n\n182\n00:08:51,590 --> 00:08:55,590\nit is part of that but again that's\nwhere we're not having dedicated\n\n183\n00:08:55,590 --> 00:09:00,690\nhardware to help support all of the things\nthat a true IPS can really do for us.\n\n184\n00:09:00,690 --> 00:09:04,440\n>> Right, and just keep in mind we're\ngoing to talk about the Cisco solutions\n\n185\n00:09:04,440 --> 00:09:06,700\nhere and on the exam,\nit's going to be the Cisco solutions.\n\n186\n00:09:06,700 --> 00:09:08,430\n>> Yeah.\n>> Because it's a Cisco exam.\n\n187\n00:09:08,430 --> 00:09:10,070\n>> But in real life there are many,\n\n188\n00:09:10,070 --> 00:09:13,560\nmany vendors out there that\nmanufacture IPS devices.\n\n189\n00:09:13,560 --> 00:09:16,400\nSo you can get appliances\nthat are less expensive, or\n\n190\n00:09:16,400 --> 00:09:18,500\nyou can even find some open-source ones.\n\n191\n00:09:18,500 --> 00:09:20,890\nNot terribly effective, but they do exist.\n\n192\n00:09:20,890 --> 00:09:24,930\nThere are other alternatives, those\nthat are out there, aside from Cisco.\n\n193\n00:09:24,930 --> 00:09:27,210\nBecause it does add up pretty quickly.\n\n194\n00:09:27,210 --> 00:09:29,620\nI was just pulling up on CDW,\nreally quick.\n\n195\n00:09:29,620 --> 00:09:31,170\nI was gonna look for some of these.\n\n196\n00:09:31,170 --> 00:09:34,120\nAnd you know, some of these you\nsee that are really expensive and\n\n197\n00:09:34,120 --> 00:09:35,890\nthese are actually just\nadvanced replacements.\n\n198\n00:09:35,890 --> 00:09:37,720\nThat's not even the unit itself.\n\n199\n00:09:37,720 --> 00:09:40,840\nSo, that's more like\na deposit on a replacement,\n\n200\n00:09:40,840 --> 00:09:45,010\nbut I was hoping to find, let's see, for\n\n201\n00:09:45,010 --> 00:09:50,510\nan ASA one of those cards to see what\nit would take to add on the AIPS.\n\n202\n00:09:50,510 --> 00:09:51,080\nYeah.\n\n203\n00:09:52,100 --> 00:09:53,920\nAnd they're just not turning\nup here really fast,\n\n204\n00:09:53,920 --> 00:09:55,400\nthese are all just signatures.\n\n205\n00:09:55,400 --> 00:10:00,260\nSo, you know, you'll see the definitions\nthemselves kind of range in price from as\n\n206\n00:10:00,260 --> 00:10:01,940\nlow $200 up to $1,400, and\n\n207\n00:10:01,940 --> 00:10:06,290\nthose are the annual fees you know\nto keep those updated signatures.\n\n208\n00:10:06,290 --> 00:10:11,030\nAnd somewhere in here I imagine\nwe'll find the actual card.\n\n209\n00:10:11,030 --> 00:10:12,650\nMaybe if I add the word card to my search.\n\n210\n00:10:15,520 --> 00:10:20,230\nOr we'll just look for the AIP.\n\n211\n00:10:20,230 --> 00:10:24,710\nWell, there's one that has it but,\nyeah, it doesn't really show us.\n\n212\n00:10:24,710 --> 00:10:26,550\nAll right, well anyhow, oh there we go.\n\n213\n00:10:26,550 --> 00:10:27,320\nHere's an actual card.\n\n214\n00:10:27,320 --> 00:10:27,960\nSo here.\n\n215\n00:10:27,960 --> 00:10:32,080\nThe advanced inspection and\nprevention security services module for\n\n216\n00:10:32,080 --> 00:10:33,180\nan ASA, right.\n\n217\n00:10:33,180 --> 00:10:36,880\nSo this is what you would use if you\nwere adding Intrusion Prevention to\n\n218\n00:10:36,880 --> 00:10:37,900\na 5510 or higher.\n\n219\n00:10:37,900 --> 00:10:42,790\nThe card alone,\nif you look at it, is $6,000.\n\n220\n00:10:42,790 --> 00:10:44,960\nAnd that's the ASA-S.\n\n221\n00:10:44,960 --> 00:10:48,460\nAnd then you've got the,\nthat's probably gig module.\n\n222\n00:10:48,460 --> 00:10:53,222\nIf you step down to 100 megabit,\nit has the price to about $3400.\n\n223\n00:10:53,222 --> 00:10:56,010\nSo $3400 would be about\nas low as you can get by.\n\n224\n00:10:56,010 --> 00:10:58,210\nYou'd be getting one of these AIPs.\n\n225\n00:10:58,210 --> 00:11:01,850\nAnd then, they make an AIM for\nthe 5505 which is a little less expensive.\n\n226\n00:11:01,850 --> 00:11:03,420\nI think it's $1000.\n\n227\n00:11:03,420 --> 00:11:08,350\nBut, these solutions, they're expensive\nbecause of the ASICs that are on board.\n\n228\n00:11:08,350 --> 00:11:09,900\n>> Right.\n>> And remember, ASICs.\n\n229\n00:11:09,900 --> 00:11:12,980\nApplication Specific Integrated Circuit.\n\n230\n00:11:12,980 --> 00:11:17,620\nThat means there's circuitry on the board,\nspecifically designed for\n\n231\n00:11:17,620 --> 00:11:19,080\nexamining this traffic.\n\n232\n00:11:19,080 --> 00:11:22,900\nThat means it can do it in real time,\nin near wire speed.\n\n233\n00:11:22,900 --> 00:11:26,030\nSo there's very little\nperformance degradation when you\n\n234\n00:11:26,030 --> 00:11:28,620\nactually use hardware to do the scan.\n\n235\n00:11:28,620 --> 00:11:30,350\nVersus software.\n\n236\n00:11:30,350 --> 00:11:33,130\nWhere there is a kind of\na penalty that we hit.\n\n237\n00:11:33,130 --> 00:11:33,900\nAll right?\n\n238\n00:11:33,900 --> 00:11:38,660\nSo keep that in mind and we'll take a look\nat both solutions as the episode moves on.\n\n239\n00:11:38,660 --> 00:11:41,890\nWe'll take a look at doing it in a soft\nrunner router versus doing it with\n\n240\n00:11:41,890 --> 00:11:45,460\nhardware but typically we're gonna\nwant to do this with hardware.\n\n241\n00:11:45,460 --> 00:11:46,760\nAll right.\n\n242\n00:11:46,760 --> 00:11:50,410\nNow regardless of which IPS we purchase.\n\n243\n00:11:50,410 --> 00:11:54,030\nWhen we purchase the IPS, we're gonna\nneed to install it on our network.\n\n244\n00:11:54,030 --> 00:11:57,110\nAnd there's some kind of interesting\nthings to keep in mind when we do this.\n\n245\n00:11:57,110 --> 00:11:59,450\nYou will see out on the Internet and\n\n246\n00:11:59,450 --> 00:12:02,720\nin various books that you\npurchase two different terms.\n\n247\n00:12:02,720 --> 00:12:07,000\nYou'll see IPS, for\nIntrusion Prevention System, and\n\n248\n00:12:07,000 --> 00:12:10,690\nIDS for Intrusion Detection System.\n\n249\n00:12:10,690 --> 00:12:14,760\nSo, what's the difference well,\naside from the name?\n\n250\n00:12:14,760 --> 00:12:15,960\nI guess right.\n\n251\n00:12:15,960 --> 00:12:17,530\nWell let's look at that name.\n\n252\n00:12:17,530 --> 00:12:21,260\nSo, one detects and one prevents.\n\n253\n00:12:21,260 --> 00:12:23,420\nLike their name implies,\n\n254\n00:12:23,420 --> 00:12:25,870\nif you can prevent that means\nthat it's gotta detect also.\n\n255\n00:12:25,870 --> 00:12:32,000\nSo it detects the attack and it prevents\nit, it stops it from happening.\n\n256\n00:12:32,000 --> 00:12:35,660\nBut an IDS,\nthat's an Intrusion Detection System,\n\n257\n00:12:35,660 --> 00:12:39,160\nit detects but it does not prevent.\n\n258\n00:12:39,160 --> 00:12:40,880\nIt sees the attack.\n\n259\n00:12:40,880 --> 00:12:45,420\nIt reports the attack, but\nit doesn't actually stop it.\n\n260\n00:12:46,960 --> 00:12:48,720\nYou might ask yourself.\n\n261\n00:12:48,720 --> 00:12:49,950\nWhy would I want that?\n\n262\n00:12:49,950 --> 00:12:54,860\nWell, there is a specific set of\nconditions where you may well want or\n\n263\n00:12:54,860 --> 00:12:56,450\nprefer that over prevention.\n\n264\n00:12:56,450 --> 00:12:58,110\nAnd I'll show it to you here in a moment.\n\n265\n00:12:58,110 --> 00:13:01,100\nBut, before we can understand that, we\nneed to understand where we install these\n\n266\n00:13:01,100 --> 00:13:03,880\nthings on our network and\nthat kind of helps to clear all this up.\n\n267\n00:13:03,880 --> 00:13:05,080\nSo, let's tackle that first.\n\n268\n00:13:05,080 --> 00:13:09,490\nWhen we take a look at the diagram you\nnotice that we have a router up there and\n\n269\n00:13:09,490 --> 00:13:11,380\nwe have on one side the Internet and\n\n270\n00:13:11,380 --> 00:13:16,170\nthen we have essentially our network\non the inside with a DMZ and a LAN.\n\n271\n00:13:16,170 --> 00:13:19,600\nSo the first thing that I mentioned\njust a few minutes ago was simple.\n\n272\n00:13:19,600 --> 00:13:23,510\nThe easiest place that I would think to\nplace it would be between the router and\n\n273\n00:13:23,510 --> 00:13:24,410\nthe firewall, right?\n\n274\n00:13:24,410 --> 00:13:26,980\nThat captures every bit\nof traffic that I need.\n\n275\n00:13:26,980 --> 00:13:28,940\nIt really does help me at that point,\nthen,\n\n276\n00:13:28,940 --> 00:13:32,220\nto allow for every single piece\nof traffic going to the DMZ,\n\n277\n00:13:32,220 --> 00:13:37,570\nas well as my LAN to be inspected by\nthe Intrusion Prevention System here and\n\n278\n00:13:37,570 --> 00:13:40,320\nmake the decision whether or\nnot it wants to allow it through.\n\n279\n00:13:40,320 --> 00:13:44,110\n>> Yeah, and this kind of installation\nis called a inline installation.\n\n280\n00:13:44,110 --> 00:13:49,510\nAnd you'll hear Cisco refer to these\nas out-of-band and inline, all right?\n\n281\n00:13:49,510 --> 00:13:51,040\nSo this is inline.\n\n282\n00:13:51,040 --> 00:13:53,170\nIt's in the line of traffic.\n\n283\n00:13:53,170 --> 00:13:55,600\nAll traffic from my LAN and\n\n284\n00:13:55,600 --> 00:14:01,280\nmy DMZ are going to pass through that\nIDS/IPS on the way out to the Internet.\n\n285\n00:14:01,280 --> 00:14:05,060\nAnd any traffic from the Internet\ncoming back is going to pass\n\n286\n00:14:05,060 --> 00:14:09,280\nthrough that IDS/IPS to get to the DMZ or\nthe LAN.\n\n287\n00:14:09,280 --> 00:14:15,950\nThis ensures us that we will have 100% of\nour traffic passing through the IDS/IPS.\n\n288\n00:14:15,950 --> 00:14:17,890\nAnd getting scanned, all right?\n\n289\n00:14:17,890 --> 00:14:20,720\nSo it's a great place to\nimplement it if you can.\n\n290\n00:14:20,720 --> 00:14:23,040\nThere are certain limitations that\nmight make it where you couldn't.\n\n291\n00:14:23,040 --> 00:14:24,270\nSo for example, you might say, well,\n\n292\n00:14:24,270 --> 00:14:27,690\nwhat if I put it because this is not\ngoing to scan traffic to the router.\n\n293\n00:14:27,690 --> 00:14:33,570\nSo what if I moved it and stuck it out\nhere between the router and the Internet?\n\n294\n00:14:33,570 --> 00:14:36,170\nWell the problem here is what\nif your internet connection is\n\n295\n00:14:36,170 --> 00:14:37,050\na serial connection?\n\n296\n00:14:37,050 --> 00:14:39,220\nYou know, a T1 or a frame relay, whatever.\n\n297\n00:14:39,220 --> 00:14:43,400\nYou're not going to find IDS and\nIPS boxes with cereal connections on them.\n\n298\n00:14:43,400 --> 00:14:46,710\nSo, you do need to terminate your\nInternet connection to your router, and\n\n299\n00:14:46,710 --> 00:14:50,730\nthen your router will normally have\nan ethernet jack on the inside and\n\n300\n00:14:50,730 --> 00:14:52,790\nIPS's typically have ethernet jacks.\n\n301\n00:14:52,790 --> 00:14:55,790\nSo, you run into the IPS and\nthen from there to your firewall and\n\n302\n00:14:55,790 --> 00:14:57,680\ninto the rest of your network.\n\n303\n00:14:57,680 --> 00:15:02,110\nWhen you implement an IPS or an IDS you\ncan implement them, and you normally do,\n\n304\n00:15:02,110 --> 00:15:03,970\nin whats called transparent mode.\n\n305\n00:15:03,970 --> 00:15:05,650\nSo they're invisible on the network.\n\n306\n00:15:05,650 --> 00:15:07,310\nBasically, they have two ports.\n\n307\n00:15:07,310 --> 00:15:11,870\nThey'll often be labeled in and out, but\ntraffic goes in and out both ports so\n\n308\n00:15:11,870 --> 00:15:13,950\nit doesn't really the direction so much.\n\n309\n00:15:13,950 --> 00:15:16,770\nBut basically any traffic\nthat hits one port\n\n310\n00:15:16,770 --> 00:15:20,740\nwill then be reflected out the other\nport without being modified.\n\n311\n00:15:20,740 --> 00:15:23,060\nNobody on the network even\nknows this is happening.\n\n312\n00:15:23,060 --> 00:15:26,900\nIt's just passing right through as if it\nwere like a hub or a crossover cable or\n\n313\n00:15:26,900 --> 00:15:28,690\nwhatever, as if the IPS wasn't there.\n\n314\n00:15:28,690 --> 00:15:30,700\nRight, unless it hits a red flag.\n\n315\n00:15:30,700 --> 00:15:33,180\nIf it hits a red flag,\nthat's a different story.\n\n316\n00:15:33,180 --> 00:15:35,220\nThat traffic's going to pass through.\n\n317\n00:15:35,220 --> 00:15:40,360\nNow, there is a key issue we have\nto deal with inline deployments,\n\n318\n00:15:40,360 --> 00:15:41,370\nthere's actually two issues.\n\n319\n00:15:41,370 --> 00:15:46,310\nThe primary issue though is that the IPS\nbecomes a single point of failure.\n\n320\n00:15:46,310 --> 00:15:50,410\nIf your IDS IPS fails, what happens?\n\n321\n00:15:50,410 --> 00:15:51,006\n>> Traffic's blocked.\n\n322\n00:15:51,006 --> 00:15:52,834\n>> Yeah, you're dead in the water.\n\n323\n00:15:52,834 --> 00:15:57,639\nSo when you buy a hardware IPS,\none like the Cisco sensors.\n\n324\n00:15:57,639 --> 00:16:03,140\nThey have what's called fail open and\nfail closed modes.\n\n325\n00:16:03,140 --> 00:16:09,050\nIn fail closed mode, which is the default,\nif the IDS IPS fails then that's it.\n\n326\n00:16:09,050 --> 00:16:11,920\nYour network is just dead in the water and\nthat's the end of it, all right.\n\n327\n00:16:11,920 --> 00:16:15,160\nBut you can chose to\nrun in fail open mode.\n\n328\n00:16:15,160 --> 00:16:17,680\nIn fail open mode when the device fails.\n\n329\n00:16:17,680 --> 00:16:20,800\nIn hardware,\nthe network adapter has two ports.\n\n330\n00:16:20,800 --> 00:16:23,830\nThey usually have more, but\nthe two that you're using, and\n\n331\n00:16:23,830 --> 00:16:28,770\nit bonds them together so that it is\nliterally a hub that traffic just\n\n332\n00:16:28,770 --> 00:16:30,540\npasses right through\nwithout being filtered.\n\n333\n00:16:30,540 --> 00:16:35,720\nIf you were to go and yank the power\ncable out of that IDS/IPS in hardware,\n\n334\n00:16:35,720 --> 00:16:39,200\nit'll flip so\nthose ports are bonded together and\n\n335\n00:16:39,200 --> 00:16:45,570\ntraffic will continue to pass through the\nIDS/IPS even with the unit powered off.\n\n336\n00:16:45,570 --> 00:16:49,440\nSo that helps to insulate us from\nthat single point of failure.\n\n337\n00:16:49,440 --> 00:16:52,690\nThe negative being that your\ntraffic is no longer being scanned.\n\n338\n00:16:52,690 --> 00:16:55,970\nYour traffic is gonna pass\nright through that IPS/IDS\n\n339\n00:16:55,970 --> 00:16:58,950\nwithout being scanned because\nthe device is off, and you go.\n\n340\n00:16:58,950 --> 00:17:02,630\nSo it kinda comes down to\nwhat your requirements are.\n\n341\n00:17:02,630 --> 00:17:06,200\nIf you want the device there normally but\n\n342\n00:17:06,200 --> 00:17:10,280\nif it were off it's not the end of\nthe world, then fine, have it fail open.\n\n343\n00:17:10,280 --> 00:17:13,350\nBut if you're in a mission critical,\nhigh sensitivity,\n\n344\n00:17:13,350 --> 00:17:17,210\nhigh security environment,\nyou want your traffic to be scanned.\n\n345\n00:17:17,210 --> 00:17:20,610\nAnd if the IDS IPS fails you would\nrather the network went down\n\n346\n00:17:20,610 --> 00:17:23,970\nthan have unfiltered traffic\npassing on the network.\n\n347\n00:17:23,970 --> 00:17:25,340\nAlright.\n>> Ya.\n\n348\n00:17:25,340 --> 00:17:28,760\n>> So that's one concern we\nhave with IDS IPS installation.\n\n349\n00:17:28,760 --> 00:17:31,460\nWith in line installations.\n\n350\n00:17:31,460 --> 00:17:34,540\nThe other concern we have is performance.\n\n351\n00:17:34,540 --> 00:17:35,770\n>> Yeah.\n\n352\n00:17:35,770 --> 00:17:36,530\n>> All of my traffic.\n\n353\n00:17:36,530 --> 00:17:40,270\n100 percent of my traffic is\npassing through that IPS now and\n\n354\n00:17:40,270 --> 00:17:42,270\nthat means that it's all getting scanned.\n\n355\n00:17:42,270 --> 00:17:47,390\nThe traffic is received, decoded, scanned,\nre-encoded, and then sent on the wire.\n\n356\n00:17:47,390 --> 00:17:48,750\n>> That's got to slow it down.\n\n357\n00:17:48,750 --> 00:17:49,690\n>> Absolutely.\n\n358\n00:17:49,690 --> 00:17:52,980\nEven a hardware IPS,\nit's doing really well, but\n\n359\n00:17:52,980 --> 00:17:54,640\nif you're sending a gigabit of traffic.\n\n360\n00:17:54,640 --> 00:17:56,440\nIf you're sending a lot of data.\n\n361\n00:17:56,440 --> 00:17:58,230\nIt is a performance hit.\n\n362\n00:17:58,230 --> 00:17:59,590\nNormally we don't even notice, right?\n\n363\n00:17:59,590 --> 00:18:02,060\nYou know, if you are browsing\nthe internet, checking your email, or\n\n364\n00:18:02,060 --> 00:18:04,310\nwhatever, you don't\nnotice this stuff at all.\n\n365\n00:18:04,310 --> 00:18:06,930\nBut what if you are making\na Voice Over IP call?\n\n366\n00:18:06,930 --> 00:18:09,420\nRight?\nVOIP traffic would be getting scanned,\n\n367\n00:18:09,420 --> 00:18:13,850\nwould be exposed to what could be\na fraction of a section of a delay, but\n\n368\n00:18:13,850 --> 00:18:18,720\nin a phone call, it is super annoying and\nit can be disruptive to the call.\n\n369\n00:18:18,720 --> 00:18:24,500\nSo this is not a good implementation for\na high performance network.\n\n370\n00:18:24,500 --> 00:18:28,500\nHigh security networks will want\nan inline deployment like this.\n\n371\n00:18:28,500 --> 00:18:32,010\nA high performance network\nwill not want this, right?\n\n372\n00:18:33,160 --> 00:18:37,180\nBut the big advantage of going this way,\nlet me turn on my little screen writer.\n\n373\n00:18:37,180 --> 00:18:42,780\nThe big advantage of going this way is\nthat because it is implemented in-line.\n\n374\n00:18:42,780 --> 00:18:45,550\nThere we go.\n\n375\n00:18:45,550 --> 00:18:52,310\nBecause it's implemented in-line, traffic\nfrom the Internet is gonna come in.\n\n376\n00:18:52,310 --> 00:18:56,870\nPass through the IPS and pass through\nto wherever it's going, right?\n\n377\n00:18:56,870 --> 00:18:58,200\nMore than likely the DMZ.\n\n378\n00:18:59,850 --> 00:19:03,560\nIf it's malicious traffic,\nwhen it passes through,\n\n379\n00:19:03,560 --> 00:19:08,050\nthe IDS/IPS can see it,\nstop it, and block it.\n\n380\n00:19:08,050 --> 00:19:10,460\nThat's an intrusion prevention system,\n\n381\n00:19:10,460 --> 00:19:13,680\nit prevents the attack\nfrom making it to the DMZ.\n\n382\n00:19:13,680 --> 00:19:16,660\nThat's often times what we want,\nyou know, high security environment.\n\n383\n00:19:16,660 --> 00:19:19,630\nThat may be what we want.\n\n384\n00:19:19,630 --> 00:19:23,390\nBut that performance hit we take,\nthat might be discouraging and\n\n385\n00:19:23,390 --> 00:19:28,010\nso that will change where we\nchose to implement that IPS IDS.\n\n386\n00:19:28,010 --> 00:19:33,780\nFor example, maybe I don't allow\ntraffic from the Internet to the LAN.\n\n387\n00:19:33,780 --> 00:19:38,700\nSo just in my default policy\non the firewall, any traffic\n\n388\n00:19:38,700 --> 00:19:44,000\nfrom the Internet going to the LAN network\nover here, maybe I just block that.\n\n389\n00:19:44,000 --> 00:19:47,640\nAnd since I block it all,\nis there any point in inspecting it?\n\n390\n00:19:47,640 --> 00:19:49,620\nNot if I'm just gonna drop it anyway.\n\n391\n00:19:49,620 --> 00:19:53,360\nSo for performance reasons,\nI'm going to go in and\n\n392\n00:19:53,360 --> 00:19:58,740\nmove that IDS/IPS over here so\nthat traffic going\n\n393\n00:20:00,710 --> 00:20:05,710\nthrough to the DMZ is getting scanned.\n\n394\n00:20:05,710 --> 00:20:07,480\nBut traffic going to the LAN isn't, right?\n\n395\n00:20:07,480 --> 00:20:13,200\nAnd this is going to facilitate things\nlike, as I browse out to the internet or\n\n396\n00:20:13,200 --> 00:20:17,380\nmake that VOIP call, or whatever,\nI'm no longer being filtered, right?\n\n397\n00:20:17,380 --> 00:20:19,450\nBut any traffic to and\n\n398\n00:20:19,450 --> 00:20:26,190\nfrom that DMZ Is passing through\nthe IPS IDS and then getting scanned.\n\n399\n00:20:26,190 --> 00:20:29,370\nSo, where you put this\ndevice is going to influence\n\n400\n00:20:29,370 --> 00:20:32,050\nwhat equipment it can actually scan,\nright?\n\n401\n00:20:32,050 --> 00:20:36,105\nAnd you may have to buy more than one\nIPS IDS depending on your network.\n\n402\n00:20:36,105 --> 00:20:40,045\nIf it's a big enough network, you might\nneed one for your DMZ, a separate one for\n\n403\n00:20:40,045 --> 00:20:41,055\nyour LAN and a separate.\n\n404\n00:20:41,055 --> 00:20:44,016\nSo you might end up purchasing four or\nfive of these to cover all your various\n\n405\n00:20:44,016 --> 00:20:47,725\nnetworks if you don't go with\na straight in-line deployment.\n\n406\n00:20:47,725 --> 00:20:49,675\n>> Now speaking of the idea of in-line,\nthen.\n\n407\n00:20:49,675 --> 00:20:50,335\nIf there's an in-line,\n\n408\n00:20:50,335 --> 00:20:54,525\nthere has to be the idea of what we\ncall out of band deployment as well.\n\n409\n00:20:54,525 --> 00:20:55,750\n>> Yeah.\n\n410\n00:20:55,750 --> 00:21:00,280\nSo out of band is where we say,\nalright, we want the IDS IPS stuff,\n\n411\n00:21:00,280 --> 00:21:03,200\nbut we don't want it\nto effect performance.\n\n412\n00:21:03,200 --> 00:21:05,570\n>> Right.\n>> Alright, so what we do, for\n\n413\n00:21:05,570 --> 00:21:08,240\nexample, you know, if I wanted to.\n\n414\n00:21:09,470 --> 00:21:11,220\nLet's see,\nwhat would be the best way to do this one?\n\n415\n00:21:12,780 --> 00:21:16,310\nLet's say that I wanted to\nscan all of my traffic,\n\n416\n00:21:16,310 --> 00:21:22,040\n100% of my traffic but I didn't want\nto impact performance on my network.\n\n417\n00:21:22,040 --> 00:21:27,280\nOkay, what I can do is I\ncould take a switch, and\n\n418\n00:21:27,280 --> 00:21:30,140\nput a switch in this path.\n\n419\n00:21:31,320 --> 00:21:35,089\nThank you Visio for making my life\na little more difficult each day.\n\n420\n00:21:35,089 --> 00:21:36,190\n>> [LAUGH]\n>> So.\n\n421\n00:21:36,190 --> 00:21:36,690\n[LAUGH] Here we go.\nSo.\n\n422\n00:21:40,484 --> 00:21:42,850\nNot quite what I was setting out to do.\n\n423\n00:21:42,850 --> 00:21:44,190\nIt's close.\n\n424\n00:21:45,390 --> 00:21:47,330\nAnd, disco.\n\n425\n00:21:47,330 --> 00:21:48,090\nAll right.\n\n426\n00:21:48,090 --> 00:21:51,220\nWe put a switch in between our router and\nour firewall.\n\n427\n00:21:51,220 --> 00:21:52,010\nAll right?\n\n428\n00:21:52,010 --> 00:21:56,490\nNow all of our traffic is\ngoing through that switch.\n\n429\n00:21:56,490 --> 00:21:58,300\nWe can then take the IDS/IPS.\n\n430\n00:21:58,300 --> 00:22:01,278\nAnd we can deploy it out of band.\n\n431\n00:22:01,278 --> 00:22:02,080\nAnd out of band\n\n432\n00:22:03,860 --> 00:22:09,020\nmeans that instead of having it where\ntraffic flows right through it.\n\n433\n00:22:09,020 --> 00:22:11,500\nWe can kinda have it off to the side here.\n\n434\n00:22:11,500 --> 00:22:13,080\nAnd so I'm just gonna run it.\n\n435\n00:22:13,080 --> 00:22:14,640\nAnd connect it on that same switch.\n\n436\n00:22:14,640 --> 00:22:15,390\nThat wasn't what I wanted.\n\n437\n00:22:16,540 --> 00:22:17,070\n>> There ya go.\n\n438\n00:22:17,070 --> 00:22:18,400\n>> All right.\n\n439\n00:22:18,400 --> 00:22:22,520\nSo I can have a connection to that\nsame switch, and on the switch,\n\n440\n00:22:22,520 --> 00:22:27,010\nmost switches these days support\nwhat's called port mirroring.\n\n441\n00:22:27,010 --> 00:22:28,880\nAnd vendors call it different things,\nright.\n\n442\n00:22:28,880 --> 00:22:31,843\nSo like if you have an HP Pro Curve,\n\n443\n00:22:31,843 --> 00:22:37,071\nthey call it port mirroring,\nthat's you know, what it is.\n\n444\n00:22:37,071 --> 00:22:41,271\nBut Cisco, they're a little higher end,\nso they have a different name for it.\n\n445\n00:22:41,271 --> 00:22:46,170\nSo it is port mirroring but\nthey call it span.\n\n446\n00:22:46,170 --> 00:22:51,012\nAnd span, if you're not familiar with it,\nit's short for switch port analyzer.\n\n447\n00:22:51,012 --> 00:22:52,440\nLet me fire up old Notepad,\nso we can jot this down.\n\n448\n00:22:52,440 --> 00:22:54,222\nAlright, so we've thrown out\na lot of acronyms this show, so\n\n449\n00:22:54,222 --> 00:22:55,543\nlet's kinda just make our little glossary.\n\n450\n00:22:56,810 --> 00:22:57,470\nA little glossary.\n\n451\n00:22:57,470 --> 00:23:03,108\nSo we have intrusion detection system and\n\n452\n00:23:03,108 --> 00:23:08,530\nintrusion prevention system.\n\n453\n00:23:08,530 --> 00:23:11,798\nAll right, and then.\n\n454\n00:23:11,798 --> 00:23:14,505\nSPAN.\n\n455\n00:23:14,505 --> 00:23:21,510\nSwitch Port Analyzer.\n\n456\n00:23:21,510 --> 00:23:22,860\nAll right.\n\n457\n00:23:22,860 --> 00:23:24,520\nWhoops.\n>> [LAUGH]\n\n458\n00:23:24,520 --> 00:23:26,180\n>> All sorts of new spelling there.\n\n459\n00:23:26,180 --> 00:23:27,990\nSwitch Port Analyzer, all right?\n\n460\n00:23:27,990 --> 00:23:30,980\nSPAN, they get the A-N from analyzer so\nit's not.\n\n461\n00:23:30,980 --> 00:23:32,290\n>> I don't think we need\nan A right after the Y,\n\n462\n00:23:32,290 --> 00:23:35,860\nor right before the Y\n>> Analayzer.\n\n463\n00:23:35,860 --> 00:23:37,354\nYes, analyzer, there we go, all right, so.\n\n464\n00:23:37,354 --> 00:23:41,141\n[LAUGH].\nAll right, so, switchboard analyzer.\n\n465\n00:23:41,141 --> 00:23:44,957\nAnd what the span system does is it says,\n\n466\n00:23:44,957 --> 00:23:50,700\nI can take traffic going to or\nfrom or both a particular port.\n\n467\n00:23:50,700 --> 00:23:53,595\nAnd just send a copy\nof it to another port.\n\n468\n00:23:53,595 --> 00:23:54,180\nAll right.\n\n469\n00:23:54,180 --> 00:23:57,190\nSo on the switch,\nwe can say, you know what,\n\n470\n00:23:57,190 --> 00:24:00,330\nas you send traffic through the system.\n\n471\n00:24:00,330 --> 00:24:02,600\nOh hang on let's make this bigger.\n\n472\n00:24:04,860 --> 00:24:09,160\nSo as that internet traffic is passing\nthrough and going to the DMZ for\n\n473\n00:24:09,160 --> 00:24:14,520\nexample on the switch, we can say hey,\nany traffic going to or\n\n474\n00:24:14,520 --> 00:24:18,990\nfrom the port that Router A is plugged\ninto, any time traffic moves through\n\n475\n00:24:18,990 --> 00:24:25,120\nthere, copy it and send a clone\nout this other port, all right.\n\n476\n00:24:25,120 --> 00:24:27,500\nIt's just cloning the traffic,right.\n\n477\n00:24:27,500 --> 00:24:30,500\nAnd, it's not a big deal at all,\nthe switch does it in hardware,\n\n478\n00:24:30,500 --> 00:24:33,280\nthere's no performance hit,\nit just forwards it along.\n\n479\n00:24:34,490 --> 00:24:38,170\nWith span,\nwe get a mirror of all that data,\n\n480\n00:24:38,170 --> 00:24:42,920\nand then the IDS IPS,\nit can scan that data and take its time.\n\n481\n00:24:42,920 --> 00:24:43,840\nIt can take its time.\n\n482\n00:24:43,840 --> 00:24:45,700\nIt can delay it if it wants, whatever.\n\n483\n00:24:45,700 --> 00:24:50,010\nBecause the actual traffic has\nalready passed on through.\n\n484\n00:24:50,010 --> 00:24:53,080\nSo there is zero performance hit.\n\n485\n00:24:53,080 --> 00:24:54,530\nBut what's the tradeoff?\n\n486\n00:24:54,530 --> 00:24:56,100\n>> It's already there.\n\n487\n00:24:56,100 --> 00:24:58,270\n>> The tradeoff is that\nit is already there,\n\n488\n00:24:58,270 --> 00:25:01,300\nthe traffic has already\nmade it to the destination.\n\n489\n00:25:01,300 --> 00:25:07,050\nSo there is one way to prevent\nthe attack when deployed this way.\n\n490\n00:25:07,050 --> 00:25:12,290\nRIDSIPS becomes an IDS,\nan intrusion Detection System.\n\n491\n00:25:12,290 --> 00:25:16,685\nWe can detect the attack but there's\nno way to stop it because it's already\n\n492\n00:25:16,685 --> 00:25:20,148\npassed through and\nit's already made it to the other end.\n\n493\n00:25:20,148 --> 00:25:23,000\n>> Another generic term here that you\nmight hear is the idea of what we call\n\n494\n00:25:23,000 --> 00:25:25,110\nthe promiscuous node as well.\n\n495\n00:25:25,110 --> 00:25:27,759\nAnd so\nthat this is also implemented in that, so\n\n496\n00:25:27,759 --> 00:25:32,330\nsometime you read about it on the internet\nand they talk about promiscuous modes,\n\n497\n00:25:32,330 --> 00:25:35,397\ncensor, this is what we\nactually have here is the IDS.\n\n498\n00:25:35,397 --> 00:25:42,311\n>> So this allows us to\nmirror traffic to an IDS.\n\n499\n00:25:42,311 --> 00:25:43,959\nAll right.\n>> Yeah.\n\n500\n00:25:43,959 --> 00:25:49,632\nSo, when you go to the store, you go\nto firewall mart, right, and you go to.\n\n501\n00:25:49,632 --> 00:25:50,300\n>> [LAUGH] Firewall mart.\n\n502\n00:25:50,300 --> 00:25:51,170\n>> That's pretty witty isn't it?\n\n503\n00:25:51,170 --> 00:25:52,850\n>> I like it.\n>> So you go to firewall mart and\n\n504\n00:25:52,850 --> 00:25:55,740\nyou're gonna buy a new firewall,\nan IDS and IPS and all this stuff right,\n\n505\n00:25:55,740 --> 00:25:59,500\nso you go to buy this equipment,\nand you walk up to the shelf.\n\n506\n00:25:59,500 --> 00:26:01,640\nAnd you don't see any IDSs.\n\n507\n00:26:01,640 --> 00:26:02,920\nYou only see IPSs.\n\n508\n00:26:02,920 --> 00:26:03,650\nRight.\n\n509\n00:26:03,650 --> 00:26:04,540\nYou say to yourself, well,\n\n510\n00:26:04,540 --> 00:26:07,703\nwow I guess there must have been\na sale on IDSs, they are all sold out.\n\n511\n00:26:07,703 --> 00:26:08,330\nRight.\n\n512\n00:26:08,330 --> 00:26:09,920\nIt's not that they are sold out.\n\n513\n00:26:09,920 --> 00:26:14,490\nIt's that an IDS and\nan IPS are the same exact equipment.\n\n514\n00:26:14,490 --> 00:26:18,070\nThey don't make just IDSs or just IPSs.\n\n515\n00:26:18,070 --> 00:26:23,520\nThey're both IDS IPSs, and it's how you\ninstall them that makes the difference.\n\n516\n00:26:23,520 --> 00:26:24,140\nAll right?\n\n517\n00:26:24,140 --> 00:26:29,750\nSo, if you install it inline\nwhere all the traffic is passing\n\n518\n00:26:29,750 --> 00:26:34,940\nthrough the IPS, and you can actually\ndo prevention, you're now an IPS.\n\n519\n00:26:34,940 --> 00:26:38,780\nBut if you take that same exact box,\nthat same exact IPS, and\n\n520\n00:26:38,780 --> 00:26:40,520\nyou move it out of band.\n\n521\n00:26:40,520 --> 00:26:44,630\nYou move it off to the side like this,\nnow it's an IDS.\n\n522\n00:26:44,630 --> 00:26:46,570\nYou just made it a detection system.\n\n523\n00:26:46,570 --> 00:26:49,020\nIt's the same equipment,\n\n524\n00:26:49,020 --> 00:26:52,500\nit's just where we install it\nthat makes it an IDS or an IPS.\n\n525\n00:26:52,500 --> 00:26:56,060\n>> So that would be the same true when\nyou mentioned the idea of inline and\n\n526\n00:26:56,060 --> 00:26:59,500\nout of band management as well then, okay?\n\n527\n00:26:59,500 --> 00:27:01,183\n>> Yeah, so if we wanna add that here.\n\n528\n00:27:01,183 --> 00:27:09,420\nIn line deployments\n\n529\n00:27:09,420 --> 00:27:14,753\nversus out of\n\n530\n00:27:14,753 --> 00:27:22,420\nband deployments.\n\n531\n00:27:22,420 --> 00:27:26,909\nKind of help me remember what's what and\nhow everything matches up is that with\n\n532\n00:27:26,909 --> 00:27:29,639\neach of these,\nthere's pros and cons, okay?\n\n533\n00:27:29,639 --> 00:27:34,029\nSo with an inline deployment, for example,\n\n534\n00:27:34,029 --> 00:27:41,201\nthat's where we're gonna be doing IPS\nversus an out of band deployment.\n\n535\n00:27:41,201 --> 00:27:42,838\nThat's where we're gonna be doing IDS,\nright?\n\n536\n00:27:42,838 --> 00:27:50,020\nAnd with an in-line deployment,\nour pros and our cons.\n\n537\n00:27:50,020 --> 00:27:52,580\nAnd so we'll kind of lay this out for\neach one of these.\n\n538\n00:27:52,580 --> 00:27:55,900\nSo, we got pros and cons.\n\n539\n00:27:55,900 --> 00:27:59,830\nAll right.\nSo our pros of an in-line.\n\n540\n00:27:59,830 --> 00:28:02,020\nSo, we can prevent attacks.\n\n541\n00:28:04,130 --> 00:28:08,095\nSo we can stop the attack before it\ngets to whoever it was the target.\n\n542\n00:28:08,095 --> 00:28:09,870\nThat's the nice thing about IPS.\n\n543\n00:28:12,540 --> 00:28:18,240\nCan fail open to eliminate\nsingle point of failure.\n\n544\n00:28:20,610 --> 00:28:21,653\nSo we do not have to worry about that.\n\n545\n00:28:21,653 --> 00:28:24,639\nA lot of people say, oh, I would never do\nIPS, there's a single point of failure.\n\n546\n00:28:24,639 --> 00:28:29,434\nWell you would never do an in line\ndeployment with cheap hardware right?\n\n547\n00:28:29,434 --> 00:28:33,357\nIf you buy an actual sensor,\nlike a Juniper or a Cisco sensor,\n\n548\n00:28:33,357 --> 00:28:35,854\nthey've got fail open capabilities.\n\n549\n00:28:35,854 --> 00:28:40,684\nIf you build your own, I see a lot of\npeople do this, I took an old desktop and\n\n550\n00:28:40,684 --> 00:28:43,138\nI threw Snort on it and fired up Squid or\n\n551\n00:28:43,138 --> 00:28:46,518\nwhatever open source\nIPS they wanted to use.\n\n552\n00:28:46,518 --> 00:28:48,850\nAnd they're like, but\nevery time it would lock up and\n\n553\n00:28:48,850 --> 00:28:50,110\nthe traffic would stop so I took it out.\n\n554\n00:28:50,110 --> 00:28:52,060\nAnd like well, you used cheap crap.\n\n555\n00:28:52,060 --> 00:28:53,510\n>> Yeah. [LAUGH]. >> And\nthat's what's going to happen,\n\n556\n00:28:53,510 --> 00:28:56,120\nyou use the real stuff and\nit'll run just fine.\n\n557\n00:28:56,120 --> 00:28:59,450\nSo it can fail open to eliminate\na single point of failure which is good.\n\n558\n00:28:59,450 --> 00:29:01,710\nSo it's very effective.\n\n559\n00:29:01,710 --> 00:29:07,290\nIt ensures all traffic is inspected.\n\n560\n00:29:07,290 --> 00:29:09,590\nIf we choose, right?\n\n561\n00:29:09,590 --> 00:29:12,210\nLike I said, it's all about your\nplacement, so you can move this\n\n562\n00:29:12,210 --> 00:29:15,660\nIPS to different areas in network to\ninfluence what traffic gets inspected and\n\n563\n00:29:15,660 --> 00:29:16,710\nwhat doesn't.\n\n564\n00:29:16,710 --> 00:29:17,660\nOkay?\n\n565\n00:29:17,660 --> 00:29:21,830\nOn the con side,\neven though it's preventable,\n\n566\n00:29:21,830 --> 00:29:26,025\nit is a single point of failure,\nso we need to remember that.\n\n567\n00:29:26,025 --> 00:29:26,908\n>> [INAUDIBLE]\n>> Oh, no, go ahead.\n\n568\n00:29:26,908 --> 00:29:31,010\n>> I was gonna say performance.\n\n569\n00:29:31,010 --> 00:29:33,520\n>> No, that's probably the biggest con,\nright?\n\n570\n00:29:33,520 --> 00:29:40,750\nThe performance impacts due\nto in line scanning, right.\n\n571\n00:29:40,750 --> 00:29:44,810\nSo traffic may get buffered, may get\nstored while it's being scanned and so\n\n572\n00:29:44,810 --> 00:29:46,960\nthat can create a performance hit.\n\n573\n00:29:46,960 --> 00:29:49,980\nSo that's probably the biggest\nconduit we need to be aware of.\n\n574\n00:29:49,980 --> 00:29:53,270\nNow for IDS we pretty much kind\nof reverse these things, right.\n\n575\n00:29:53,270 --> 00:30:01,390\nSo on the pro side of things, it is not\nin-line so no single point of failure.\n\n576\n00:30:02,720 --> 00:30:05,780\nWe don't care if it fails open or fails\nclosed or whatever cuz it's not in line,\n\n577\n00:30:05,780 --> 00:30:08,400\nwho cares and\nit's not gonna impact our traffic.\n\n578\n00:30:08,400 --> 00:30:15,853\nAnd no performance hit because it\nscans copies of the traffic, right?\n\n579\n00:30:18,159 --> 00:30:19,430\nAnd not the real thing.\n\n580\n00:30:19,430 --> 00:30:21,810\nBut that leads to it's biggest con.\n\n581\n00:30:21,810 --> 00:30:26,640\nThe biggest con is,\ncannot prevent an attack.\n\n582\n00:30:26,640 --> 00:30:27,140\nRight?\n\n583\n00:30:29,440 --> 00:30:30,500\nOnly detect.\n\n584\n00:30:30,500 --> 00:30:35,250\nAll right, so it can just detect that\nthe attack is happening and report it.\n\n585\n00:30:35,250 --> 00:30:35,930\nNow.\n\n586\n00:30:35,930 --> 00:30:38,610\nWe're going to talk about some\nneat stuff a little bit later on.\n\n587\n00:30:38,610 --> 00:30:41,120\nBut, if you're sitting there,\nout there in TV land, and\n\n588\n00:30:41,120 --> 00:30:42,920\nyou're thinking, why would I want that?\n\n589\n00:30:42,920 --> 00:30:45,490\nWhy would I want to detect the attack but\nnot do anything about it?\n\n590\n00:30:45,490 --> 00:30:49,060\nWell, it's not that the IDS,\nwell I guess it is.\n\n591\n00:30:49,060 --> 00:30:52,220\nThe IDS can't stop the attack.\n\n592\n00:30:52,220 --> 00:30:55,850\nBut it's not that it can't do anything,\nthere is something it can do.\n\n593\n00:30:55,850 --> 00:30:59,870\nIf you have additional security\nequipment on your network,\n\n594\n00:30:59,870 --> 00:31:05,430\nlike a Cisco ASA, or a Cisco MARS box,\nCisco switch, Cisco routers,\n\n595\n00:31:05,430 --> 00:31:10,060\nthe IPS and IDS,\nit can talk to those other devices.\n\n596\n00:31:10,060 --> 00:31:13,390\nAnd so, it can take reactionary measures.\n\n597\n00:31:13,390 --> 00:31:14,490\nIt can say, you know what?\n\n598\n00:31:14,490 --> 00:31:16,350\nI just saw an attack come in from this IP.\n\n599\n00:31:16,350 --> 00:31:18,720\nSo let me reach out to this router and\ntell the router,\n\n600\n00:31:18,720 --> 00:31:22,010\nhey, can you create a quick\ntemporary ACL and block that IP?\n\n601\n00:31:22,010 --> 00:31:27,790\nAnd then the router can implement that ACL\nand stop that traffic temporarily, right.\n\n602\n00:31:27,790 --> 00:31:32,720\nSo, while the initial attack did make it\nthrough, we cut any follow up traffic and\n\n603\n00:31:32,720 --> 00:31:35,644\nthat stops the attack from spreading and\nbecoming worse, right.\n\n604\n00:31:35,644 --> 00:31:40,586\nWell, we can't prevent it outright,\n\n605\n00:31:40,586 --> 00:31:45,088\nbut we can stop it from continuing.\n\n606\n00:31:45,088 --> 00:31:48,714\nI'm going to add that as a pro.\n\n607\n00:31:48,714 --> 00:31:52,747\nWhile it can't Prevent.\n\n608\n00:31:52,747 --> 00:31:55,571\n>> It can react.\n\n609\n00:31:55,571 --> 00:31:58,313\n>> It can react with the correct hardware.\n\n610\n00:31:58,313 --> 00:32:00,774\nRight?\nSo, we haven't talk about it,\n\n611\n00:32:00,774 --> 00:32:05,457\nwe'll talk about it later but\nwe have what's called Global Correlations\n\n612\n00:32:05,457 --> 00:32:09,070\nwhere Cisco equipment can\ntalk to Cisco equipment.\n\n613\n00:32:09,070 --> 00:32:10,920\nAnd so if you're all Cisco,\nthis stuff, I mean,\n\n614\n00:32:10,920 --> 00:32:11,668\n>> Yeah, it's amazing.\n\n615\n00:32:11,668 --> 00:32:14,030\n>> It fits together like puzzle pieces,\nit talks to each other.\n\n616\n00:32:14,030 --> 00:32:15,610\nIt learns and it reacts.\n\n617\n00:32:15,610 --> 00:32:17,230\nAnd it's really impressive.\n\n618\n00:32:17,230 --> 00:32:21,000\nBut if you're mixing vendors,\nif you have Juniper firewalls and\n\n619\n00:32:21,000 --> 00:32:23,874\nCisco routers and HP switches.\n\n620\n00:32:23,874 --> 00:32:24,410\n>> Yeah.\n\n621\n00:32:24,410 --> 00:32:28,350\n>> None of them talk to each other and\nthen yeah the IDS just detects.\n\n622\n00:32:28,350 --> 00:32:30,620\nYour IDS becomes basically\nlike a logging agency.\n\n623\n00:32:30,620 --> 00:32:35,753\nYou just go there for\nlooking at logs and that's about it.\n\n624\n00:32:35,753 --> 00:32:37,080\n>> Yeah.\n>> All right.\n\n625\n00:32:37,080 --> 00:32:39,550\nSo, that's kind of the biggest con.\n\n626\n00:32:39,550 --> 00:32:42,490\nI mean do we have any other cons\nthat we want to list on that one?\n\n627\n00:32:42,490 --> 00:32:43,810\n>> I think that's pretty good.\n\n628\n00:32:43,810 --> 00:32:44,310\n>> Yeah.\n\n629\n00:32:47,418 --> 00:32:48,950\nYeah, that's basically it.\n\n630\n00:32:48,950 --> 00:32:49,900\nThat's just the big thing.\n\n631\n00:32:49,900 --> 00:32:51,980\nIt really does come\ndown to performance and\n\n632\n00:32:51,980 --> 00:32:54,500\nwhat we're gonna be capturing in scanning.\n\n633\n00:32:54,500 --> 00:32:57,220\nSo just be aware of that\nwhen comparing the two.\n\n634\n00:32:57,220 --> 00:32:58,200\n>> Yeah.\n>> All right?\n\n635\n00:32:58,200 --> 00:32:59,550\nBut the hardware is the same.\n\n636\n00:32:59,550 --> 00:33:05,010\nSo when you go to Cisco's website, and you\ngo to buy a Cisco IPS sensor or whatever.\n\n637\n00:33:05,010 --> 00:33:07,677\nRight?\nSo if I'll go in CDW here, and\n\n638\n00:33:07,677 --> 00:33:11,962\nI'll do a search here,\nI'm gonna spell sensor wrong,\n\n639\n00:33:11,962 --> 00:33:16,264\nthis is just going terrible,\nthere we go Cisco Sensor.\n\n640\n00:33:16,264 --> 00:33:19,610\nAll right, so we go in here and\nfind some Cisco Sensors.\n\n641\n00:33:19,610 --> 00:33:23,509\n>> I see a $30,000 one.\n\n642\n00:33:23,509 --> 00:33:27,561\n>> Here is a 42.60 for 15 grand.\n\n643\n00:33:27,561 --> 00:33:30,356\nSo, it's a Cisco IPS 4260 sensor,\n\n644\n00:33:30,356 --> 00:33:35,054\nI'm not gonna find a Cisco IDS\n4260 sensor, it's just there.\n\n645\n00:33:35,054 --> 00:33:35,579\n>> It's there.\n\n646\n00:33:35,579 --> 00:33:38,640\n>> And, I mentioned the 4200s because\nthat's what I've always worked with.\n\n647\n00:33:38,640 --> 00:33:40,800\nOn their website, they're doing the 4300s,\n\n648\n00:33:40,800 --> 00:33:43,240\nbut apparently old CDW\nhasn't stepped up either.\n\n649\n00:33:43,240 --> 00:33:46,022\nSo maybe I'm curious when those came out.\n\n650\n00:33:50,504 --> 00:33:54,325\nBut yeah, let's do a search for Cisco IDS\nand see if it even turns anything up.\n\n651\n00:33:57,667 --> 00:33:58,370\n>> Nope.\n\n652\n00:33:58,370 --> 00:33:59,200\n>> Expansion module.\n\n653\n00:34:01,150 --> 00:34:04,100\nYeah, these aren't even sensors.\n\n654\n00:34:04,100 --> 00:34:06,150\n>> No, controllers.\n\n655\n00:34:06,150 --> 00:34:08,350\n>> Yeah.\nSo it's not even turning anything up.\n\n656\n00:34:08,350 --> 00:34:10,560\nSo, you won't find anything\nspecifically marked that way.\n\n657\n00:34:10,560 --> 00:34:12,930\nAnd that's because the IPS is\nthe more powerful solution.\n\n658\n00:34:12,930 --> 00:34:14,650\nSo that's what they normally call them.\n\n659\n00:34:14,650 --> 00:34:16,360\nBut then you can implement it.\n\n660\n00:34:16,360 --> 00:34:22,250\nIn a way that makes it\nless amazing device.\n\n661\n00:34:22,250 --> 00:34:22,775\nRight?\n>> Right.\n\n662\n00:34:22,775 --> 00:34:24,075\n>> They're still very effective though.\n\n663\n00:34:24,075 --> 00:34:25,370\nThey're very, very cool things.\n\n664\n00:34:25,370 --> 00:34:29,741\nAnd really when you run anti-virus and\nanti-malware on your laptop or desktop,\n\n665\n00:34:29,741 --> 00:34:32,481\nyou're running intrusion\nprevention software.\n\n666\n00:34:32,481 --> 00:34:33,310\n>> Right.\n>.\n\n667\n00:34:33,310 --> 00:34:35,230\nIt's just right there on your device.\n\n668\n00:34:35,230 --> 00:34:35,740\n>> Right.\n\n669\n00:34:35,740 --> 00:34:39,352\n>> And so\nCisco brands that as HIPS or H-I-P-S,\n\n670\n00:34:39,352 --> 00:34:41,890\nHost-based Intrusion Prevention Systems.\n\n671\n00:34:41,890 --> 00:34:44,999\nLet me add that to our\nlittle episode glossary.\n\n672\n00:34:49,249 --> 00:34:51,016\nI need to do a hyphen\nto get rid of that B.\n\n673\n00:34:51,016 --> 00:34:57,320\n[LAUGH]\nAnd these are effective,\n\n674\n00:34:57,320 --> 00:35:00,220\nbut it does mean the attacker has\nalready made it to the target machine.\n\n675\n00:35:00,220 --> 00:35:03,500\nSo it's not as secure as if we could\nhave cut it on the network, and\n\n676\n00:35:03,500 --> 00:35:06,926\nstopped it ahead of time.\n\n677\n00:35:06,926 --> 00:35:08,550\nSo, all right.\nWell Ronnie, looking at the clock,\n\n678\n00:35:08,550 --> 00:35:09,250\nit's time for a break.\n\n679\n00:35:09,250 --> 00:35:10,750\nSo why don't we stop here.\n\n680\n00:35:10,750 --> 00:35:13,650\nWhen we get back, we've been talking\nabout all concepts up until now.\n\n681\n00:35:13,650 --> 00:35:16,650\nWe need to dive into some\nof the actual technologies.\n\n682\n00:35:16,650 --> 00:35:20,081\nPretty much everything we've talked\nabout there applies to Cisco, Juniper,\n\n683\n00:35:20,081 --> 00:35:23,770\nwhoever but we need to get into some\nof the Cisco specifics after this.\n\n684\n00:35:23,770 --> 00:35:25,620\nSo let's stop here and take a break.\n\n685\n00:35:25,620 --> 00:35:27,161\nYou got anything else\nto add before we stop?\n\n686\n00:35:27,161 --> 00:35:32,220\n>> Nope, when we get back we can talk\na little bit about what the devices can\n\n687\n00:35:32,220 --> 00:35:36,140\nreally do in terms of the attack responses\nand different things that we have.\n\n688\n00:35:36,140 --> 00:35:37,010\n>> Awesome.\n\n689\n00:35:37,010 --> 00:35:38,420\nAll right.\nWell, let's stop here, we'll take a break.\n\n690\n00:35:38,420 --> 00:35:42,250\nWhen we get back more Intrusion Prevention\nexcitement after this.\n\n691\n00:35:42,250 --> 00:35:44,912\n[SOUND]\n\n692\n00:35:44,912 --> 00:35:50,238\nAll right.\n\n693\n00:35:50,238 --> 00:35:51,860\nWelcome back everybody.\n\n694\n00:35:51,860 --> 00:35:52,884\nSo before the break.\n\n695\n00:35:52,884 --> 00:35:53,444\n>> Yep.\n>> We were\n\n696\n00:35:53,444 --> 00:35:56,270\ntalking about the differences\nbetween IDS and IPS.\n\n697\n00:35:56,270 --> 00:36:00,210\nAnd we talked about some of the pros and\ncons and I left one thing off.\n\n698\n00:36:00,210 --> 00:36:03,300\nWe were talking about it during\nthe break and I want to mention it here.\n\n699\n00:36:03,300 --> 00:36:05,725\nIn the exam objectives,\nthe official objectives.\n\n700\n00:36:05,725 --> 00:36:07,340\n>> [LAUGH]\n>> They mention for\n\n701\n00:36:07,340 --> 00:36:09,295\nexample that we have caveats.\n\n702\n00:36:09,295 --> 00:36:09,810\nRight?\n\n703\n00:36:09,810 --> 00:36:12,430\nAnd those caveats is what we\nwere talking about, the pros and\n\n704\n00:36:12,430 --> 00:36:14,620\ncons of each one that\nwe need to be aware of.\n\n705\n00:36:14,620 --> 00:36:18,480\nBut there is one big glaring\ncaveat that I forgot to mention\n\n706\n00:36:18,480 --> 00:36:20,552\nwhich is encrypted traffic.\n\n707\n00:36:20,552 --> 00:36:23,020\nAll right?\nAn IPS or and\n\n708\n00:36:23,020 --> 00:36:25,820\nIDS cannot scan encrypted traffic.\n\n709\n00:36:25,820 --> 00:36:30,200\nThe traffic is encrypted so if it looks\ninside of that packet, what does it see?\n\n710\n00:36:30,200 --> 00:36:33,012\n>> It doesn't have understand\n>> Yeah, it just sees a hash or\n\n711\n00:36:33,012 --> 00:36:34,770\na cipher text or whatever.\n\n712\n00:36:34,770 --> 00:36:36,920\nThere's nothing in there for it to see.\n\n713\n00:36:36,920 --> 00:36:40,830\nSo we need to keep that in mind\nwhen we deal with IPSs that,\n\n714\n00:36:40,830 --> 00:36:43,630\nif we have web servers that are using SSL.\n\n715\n00:36:43,630 --> 00:36:44,170\nRight?\n\n716\n00:36:44,170 --> 00:36:46,290\nWell, that traffic is encrypted.\n\n717\n00:36:46,290 --> 00:36:49,170\nWell, it's not encrypted 100% of the time.\n\n718\n00:36:49,170 --> 00:36:52,200\nRight?\nIt's unencrypted on the source machine,\n\n719\n00:36:52,200 --> 00:36:54,600\nit gets encrypted and\nsent over the network.\n\n720\n00:36:54,600 --> 00:36:57,331\nAnd when it reaches the destination\nmachine it's decrypted there.\n\n721\n00:36:57,331 --> 00:37:00,210\nRight?\nSo, you can scan it at the source or\n\n722\n00:37:00,210 --> 00:37:02,380\nthe destination,\nif you're running a web server,\n\n723\n00:37:02,380 --> 00:37:06,620\nyou could run a host-based\nIPS right on that web server.\n\n724\n00:37:06,620 --> 00:37:08,840\n>> Right.\n>> And scan the traffic there.\n\n725\n00:37:08,840 --> 00:37:11,600\nAll right.\nBut there is another scenario out there.\n\n726\n00:37:11,600 --> 00:37:12,230\nVPN Tunnels.\n\n727\n00:37:12,230 --> 00:37:12,870\n>> Yeah.\n>> Right?\n\n728\n00:37:12,870 --> 00:37:15,250\nLet me go back to my little diagram here.\n\n729\n00:37:15,250 --> 00:37:19,640\nAnd let's say that we had a branch\noffice that was out here,\n\n730\n00:37:19,640 --> 00:37:24,678\nout somewhere and,\ncan I zoom in a little bit?\n\n731\n00:37:24,678 --> 00:37:29,475\nOh, I can, look at that,\na Visio with secret abilities here.\n\n732\n00:37:29,475 --> 00:37:31,770\n>> [LAUGH]\n>> All right, so if I have a branch office\n\n733\n00:37:31,770 --> 00:37:35,460\nthat is out here and so\nthis would be my branch office.\n\n734\n00:37:35,460 --> 00:37:39,005\n>> [LAUGH]\n>> The branch office has a VPN tunnel.\n\n735\n00:37:39,005 --> 00:37:46,025\nSo, they've a firewall and their firewall\nbuilds a VPN tunnel into my firewall.\n\n736\n00:37:46,025 --> 00:37:47,115\nAll right?\n\n737\n00:37:47,115 --> 00:37:51,806\nWell, when they generate traffic,\nwhen work stations out there at the branch\n\n738\n00:37:51,806 --> 00:37:56,170\ngenerate traffic,\nthat traffic is going over this firewall.\n\n739\n00:37:56,170 --> 00:38:00,100\nInto my network and then passing over into\nmy LAN or wherever it is they're going.\n\n740\n00:38:00,100 --> 00:38:00,910\nAll right?\n\n741\n00:38:00,910 --> 00:38:05,390\nBut basically from this point here\n\n742\n00:38:05,390 --> 00:38:10,070\nall the way through to this point here,\nthe traffic is encrypted.\n\n743\n00:38:10,070 --> 00:38:13,590\n>> So if I'm doing a span port.\n\n744\n00:38:13,590 --> 00:38:14,200\nRight?\nIf I'm\n\n745\n00:38:14,200 --> 00:38:17,370\nsending a copy of that\ntraffic down to this IDS/IPS.\n\n746\n00:38:17,370 --> 00:38:20,592\nI'm sending a copy of encrypted\ntraffic which can't be scanned.\n\n747\n00:38:20,592 --> 00:38:21,930\nAll right?\n\n748\n00:38:21,930 --> 00:38:26,150\nIf however,\nI took that IDS/IPS and moved it.\n\n749\n00:38:26,150 --> 00:38:26,660\nRight?\n\n750\n00:38:26,660 --> 00:38:31,210\nIf I moved it to be inline right here,\nnotice that traffic is\n\n751\n00:38:31,210 --> 00:38:35,930\nencrypted as it passes across and\nthe tunnel ends on this firewall.\n\n752\n00:38:35,930 --> 00:38:40,258\nNow the traffic is decrypted\nright here and I can scan it.\n\n753\n00:38:40,258 --> 00:38:41,180\n>> Right.\n>> All right?\n\n754\n00:38:41,180 --> 00:38:44,930\nBut, the problem there is,\nif I move it that way.\n\n755\n00:38:44,930 --> 00:38:47,770\nRight?\nSo if I move this guy over here and\n\n756\n00:38:47,770 --> 00:38:51,060\nthat's not quite what I wanted,\nbut you know?\n\n757\n00:38:51,060 --> 00:38:58,670\nSo if I move it over here and\nshow off my horrible Visio skills.\n\n758\n00:38:58,670 --> 00:39:03,110\nIf I move it over here, the problem\nwith this is, well, it's inline, and so\n\n759\n00:39:03,110 --> 00:39:06,690\nnow that branch traffic that's passing\nacross here decrypts at the firewall.\n\n760\n00:39:06,690 --> 00:39:08,420\nNow I can scan it and decrypt it.\n\n761\n00:39:08,420 --> 00:39:09,300\nAll right?\n\n762\n00:39:09,300 --> 00:39:11,290\nBut, what about my DMZ?\n\n763\n00:39:11,290 --> 00:39:11,910\n>> Yeah.\n\n764\n00:39:11,910 --> 00:39:15,030\n>> Now I'm not scanning\nthe DMZ anymore either.\n\n765\n00:39:15,030 --> 00:39:18,000\nRight?\nSo I have a couple of choices here.\n\n766\n00:39:18,000 --> 00:39:22,590\nI could buy a second IDS/IPS,\nand stick it over here.\n\n767\n00:39:22,590 --> 00:39:25,350\nRight?\nThat would be somewhat effective.\n\n768\n00:39:25,350 --> 00:39:31,100\nOr I could get an IDS/IPS with more\nthan one set of network adapters in it.\n\n769\n00:39:31,100 --> 00:39:32,360\nRight?\n\n770\n00:39:32,360 --> 00:39:36,400\nSo I could have an in and an out that's\nprocessing this side of the network.\n\n771\n00:39:36,400 --> 00:39:40,592\nAnd I could have another in and\nout that's processing the DMZ.\n\n772\n00:39:40,592 --> 00:39:43,172\nSo I might run out of this firewall.\n\n773\n00:39:43,172 --> 00:39:46,850\nAnd instead of running.\n\n774\n00:39:46,850 --> 00:39:50,599\nStraight into the DMZ,\nI could take this connection and\n\n775\n00:39:50,599 --> 00:39:55,110\nrun it also down so that I've got\ntwo connections to the IDS/IPS.\n\n776\n00:39:55,110 --> 00:39:56,530\nAnd then I could have, whoops.\n\n777\n00:39:56,530 --> 00:40:00,500\nWell, that's going crazy.\n\n778\n00:40:00,500 --> 00:40:03,040\nHere we go.\n\n779\n00:40:04,600 --> 00:40:07,063\nAnd then I could have\nthe DMZ run into here.\n\n780\n00:40:07,063 --> 00:40:10,672\nAnd what you're doing\nis creating port pairs.\n\n781\n00:40:10,672 --> 00:40:15,852\nAnd with the port pairs,\nthe way it works is basically you would\n\n782\n00:40:15,852 --> 00:40:20,835\nhave one pair that was an in and\nout that was linking the DMZ and\n\n783\n00:40:20,835 --> 00:40:25,560\nanother port pair that was in and\nout linking the LAN.\n\n784\n00:40:25,560 --> 00:40:29,980\nNow the negative here is that if\nan attacker can pull off an attack\n\n785\n00:40:29,980 --> 00:40:34,080\non the IPS itself, they might be able\nto jump between the networks, right?\n\n786\n00:40:34,080 --> 00:40:36,600\n>> Right.\nThat's why it's real important\n\n787\n00:40:36,600 --> 00:40:40,580\nto utilize a dedicated\nmanagement interface.\n\n788\n00:40:40,580 --> 00:40:45,080\nThere should be an extra network adapter\nthat's on this IPS, IDS, whatever,\n\n789\n00:40:45,080 --> 00:40:47,640\nthat runs to your management network,\nright.\n\n790\n00:40:47,640 --> 00:40:51,980\nAnd remember that we want our management\nnetwork to be a separate network\n\n791\n00:40:51,980 --> 00:40:53,200\nwhenever possible.\n\n792\n00:40:53,200 --> 00:40:55,530\nSo a separate adapter\nthat's running there, so\n\n793\n00:40:55,530 --> 00:40:57,490\nthat an attacker can't access the device.\n\n794\n00:40:57,490 --> 00:41:01,630\nSo, if the device is transparent,\nthey can't attack the IDS or IPS.\n\n795\n00:41:01,630 --> 00:41:02,850\nTraffic passes through it.\n\n796\n00:41:02,850 --> 00:41:07,510\nSo you may be able to leverage one\nIPS to monitor multiple networks\n\n797\n00:41:07,510 --> 00:41:08,920\nif it's got enough network adapters.\n\n798\n00:41:08,920 --> 00:41:10,530\nWhen you buy it, that's an option.\n\n799\n00:41:10,530 --> 00:41:12,350\nHow many ports are on the device.\n\n800\n00:41:13,510 --> 00:41:18,980\nSo I used to work with Juniper, I guess\nwe shouldn't say that in the Cisco show,\n\n801\n00:41:18,980 --> 00:41:22,830\nbut I used to work with\nJuniper IPSes all the time and\n\n802\n00:41:22,830 --> 00:41:25,830\nthey would typically come with\nfour adapters out of the box.\n\n803\n00:41:25,830 --> 00:41:29,000\nWhich was enough for scanning two\ndifferent networks, an in and an out for\n\n804\n00:41:29,000 --> 00:41:30,150\ntwo different networks.\n\n805\n00:41:30,150 --> 00:41:33,960\nBut you can get them with 16 ports,\nyou can get really big configurations.\n\n806\n00:41:33,960 --> 00:41:35,218\nAnd the Cisco ones are the same way.\n\n807\n00:41:35,218 --> 00:41:38,430\nThe Cisco IPSes normally come with\njust two ports, an in and an out.\n\n808\n00:41:38,430 --> 00:41:41,102\nAnd then you can add more depending\non the model that you get.\n\n809\n00:41:41,102 --> 00:41:43,990\nAll right, so\nthat's kind of a caveat there,\n\n810\n00:41:43,990 --> 00:41:48,980\njust to remember the key thing there,\nyou can't inspect encrypted traffic.\n\n811\n00:41:48,980 --> 00:41:50,990\nIt's encrypted,\nwho knows what's inside there.\n\n812\n00:41:50,990 --> 00:41:52,528\nRight?\nThat's the whole point of encryption.\n\n813\n00:41:52,528 --> 00:41:56,126\nAll right.\n\n814\n00:41:56,126 --> 00:41:59,570\nSo, with that out of\nthe way we're going to go\n\n815\n00:41:59,570 --> 00:42:02,160\na little bit out of order\non the objectives here.\n\n816\n00:42:02,160 --> 00:42:07,200\nI want to take a look at IPS\non a Cisco router, right?\n\n817\n00:42:07,200 --> 00:42:11,100\nEvery Cisco router has\nthe ability to do IPS.\n\n818\n00:42:11,100 --> 00:42:12,720\nIt's not there by default.\n\n819\n00:42:12,720 --> 00:42:14,110\nYou've gotta pay for a license.\n\n820\n00:42:14,110 --> 00:42:16,710\nYou've gotta have subscription for\nthe IPS definitions.\n\n821\n00:42:16,710 --> 00:42:19,700\nAnd then once you've got that,\nyou can activate IPS and\n\n822\n00:42:19,700 --> 00:42:23,260\nthe router begins to scan\nthat traffic in software.\n\n823\n00:42:23,260 --> 00:42:26,500\nWhich is not great,\nI think we've said that enough.\n\n824\n00:42:26,500 --> 00:42:28,990\nBut it does work, it does do it.\n\n825\n00:42:28,990 --> 00:42:34,580\nSo let's take a look at that,\nwhich I have open around here somewhere.\n\n826\n00:42:34,580 --> 00:42:37,040\nLet me just get back to a normal screen.\n\n827\n00:42:37,040 --> 00:42:39,740\nAll right.\n\n828\n00:42:39,740 --> 00:42:42,770\nSo here I've fired up\nthe Cisco Configuration Professional.\n\n829\n00:42:42,770 --> 00:42:44,790\nAnd I'm connected to a router.\n\n830\n00:42:44,790 --> 00:42:47,860\nIt's a 2800 sitting here\non table behind us.\n\n831\n00:42:47,860 --> 00:42:51,560\nAnd this particular device, it's up,\n\n832\n00:42:51,560 --> 00:42:54,950\nit's running,\nit's not doing any IPS stuff yet, right?\n\n833\n00:42:54,950 --> 00:42:57,190\nThis is the same router we've been\nusing throughout the whole show.\n\n834\n00:42:57,190 --> 00:42:59,081\nSo you guys have seen this one before.\n\n835\n00:42:59,081 --> 00:43:03,776\nBut if we do under Security and\nunder Intrusion Prevention,\n\n836\n00:43:03,776 --> 00:43:09,309\nwe'll see the IPS screen where we can\ngo in and turn on and activate IPS.\n\n837\n00:43:09,309 --> 00:43:13,309\n>> The nice thing about the IPS here\nis that it really is a wizard which\n\n838\n00:43:13,309 --> 00:43:17,800\nis really beneficial to us as we\nactually get started here on this.\n\n839\n00:43:17,800 --> 00:43:20,060\nSo when, yes,\nshe launched the actual IPS wizard,\n\n840\n00:43:20,060 --> 00:43:22,910\nit takes us step-by-step\nthrough what we need to do.\n\n841\n00:43:22,910 --> 00:43:26,960\nBut once again without that extra benefit\nof that subscription that we have,\n\n842\n00:43:26,960 --> 00:43:30,458\nwe're kind of limited on some\nof the things that we have.\n\n843\n00:43:30,458 --> 00:43:32,610\n>> Now, Ronnie, actually,\nI want to show them something,\n\n844\n00:43:32,610 --> 00:43:35,830\nsomething that didn't happen here,\nbut I know should have happened.\n\n845\n00:43:38,400 --> 00:43:42,696\nIf this is the very first time,\n\n846\n00:43:42,696 --> 00:43:46,341\nthat you have [CROSSTALK].\n\n847\n00:43:46,341 --> 00:43:51,186\nIf it's the very first time that\nyou've come over to this IPS page,\n\n848\n00:43:51,186 --> 00:43:53,830\na lot of times you'll get a message.\n\n849\n00:43:53,830 --> 00:43:57,790\nYou'll get a little pop-up\nthat'll tell you that SDEE is\n\n850\n00:43:57,790 --> 00:44:01,775\nnot enabled on your router and\nthat you need to enable it for IPS.\n\n851\n00:44:01,775 --> 00:44:05,107\nAnd I didn't get that pop-up and\n\n852\n00:44:05,107 --> 00:44:08,680\nso I kind of assumed that it was enabled,\nbut looking in here.\n\n853\n00:44:08,680 --> 00:44:10,860\n>> I think it happens right\nwhen you start the wizard.\n\n854\n00:44:10,860 --> 00:44:11,600\n>> Oh does it?\n\n855\n00:44:11,600 --> 00:44:14,250\nSo maybe I've jumped ahead of myself.\n\n856\n00:44:14,250 --> 00:44:18,386\nBefore that happens, what is SDEE?\n\n857\n00:44:18,386 --> 00:44:22,960\n>> [LAUGH] SDEE, I'll just say SD now,\n\n858\n00:44:22,960 --> 00:44:29,380\nSDEEs are Security Device Event Exchange.\n\n859\n00:44:29,380 --> 00:44:32,720\nI mean who would have guess that we\nwould of come up an acronym like that.\n\n860\n00:44:32,720 --> 00:44:36,350\nSecurity Device Event Exchange here.\n\n861\n00:44:36,350 --> 00:44:42,780\nAnd so this is really what we turn on on\nthe device itself to allow it to send\n\n862\n00:44:42,780 --> 00:44:47,570\nmessages out when we're monitoring the\nactually traffic that we need to monitor.\n\n863\n00:44:47,570 --> 00:44:50,720\nSo, this is one of the first\nones that we have here.\n\n864\n00:44:50,720 --> 00:44:53,780\n>> We already covered syslog\nin another episode, and\n\n865\n00:44:53,780 --> 00:44:57,720\nsyslog is a great way to take log message\ngenerated by a router, or switch,\n\n866\n00:44:57,720 --> 00:45:00,860\nfirewall, or whatever, and\nsend it to a centralized location.\n\n867\n00:45:00,860 --> 00:45:01,790\nThe problem is,\n\n868\n00:45:01,790 --> 00:45:06,660\nwhile syslog defines exactly how to\nhand of the information, syslog doesn't\n\n869\n00:45:06,660 --> 00:45:11,250\nhave like a standards body that defines\nexactly what that message should contain.\n\n870\n00:45:11,250 --> 00:45:14,150\nVendors can just put whatever\nthe heck they want in those messages.\n\n871\n00:45:14,150 --> 00:45:19,310\nSo SDEE,\nthe Security Device Event Exchange,\n\n872\n00:45:19,310 --> 00:45:24,250\nit's a standardized format that\nall the security vendors basically\n\n873\n00:45:24,250 --> 00:45:29,490\ngot together and put their heads together\nand said, let's come up with a common\n\n874\n00:45:29,490 --> 00:45:33,370\nevent reporting mechanism so\nthat we can send these messages out.\n\n875\n00:45:33,370 --> 00:45:36,080\nAnd that they're formatted the same way.\n\n876\n00:45:36,080 --> 00:45:39,860\nSo if I get a security alert from\nCisco Box or I get a security alert from\n\n877\n00:45:39,860 --> 00:45:42,970\na Juniper Box or a FireWall-1 Box or\nwhatever check point.\n\n878\n00:45:42,970 --> 00:45:43,540\nRight?\nSo\n\n879\n00:45:43,540 --> 00:45:47,020\nwhen we get those messages,\nthey're in the same format.\n\n880\n00:45:47,020 --> 00:45:49,000\nWe can interpret them and\nact upon them in the same way.\n\n881\n00:45:49,000 --> 00:45:53,370\nSo it's a very compatible,\nnon-vendor specific kind of format for\n\n882\n00:45:53,370 --> 00:45:54,540\nthose alert messages.\n\n883\n00:45:54,540 --> 00:45:58,000\nSo the first time you enable IPS,\nit's gonna say,\n\n884\n00:45:58,000 --> 00:46:00,620\nhey, you don't have SDEE turned on.\n\n885\n00:46:00,620 --> 00:46:04,860\nLet's enable that functionality so that we\ncan use it, and kinda fire that up and go.\n\n886\n00:46:06,710 --> 00:46:10,390\nIt is turned off by\ndefault on Cisco routers.\n\n887\n00:46:10,390 --> 00:46:13,660\nAnd so I kind of expected to get that\npop-up ahead of time, but it didn't.\n\n888\n00:46:13,660 --> 00:46:15,520\nSo we'll see if it happens here.\n\n889\n00:46:15,520 --> 00:46:18,870\nWhen we fire up IPS,\nwe need to turn it on and\n\n890\n00:46:18,870 --> 00:46:21,410\ntell it to start doing what it's gonna do.\n\n891\n00:46:21,410 --> 00:46:22,650\nAnd one of the actions,\n\n892\n00:46:22,650 --> 00:46:26,110\nlike if we're doing IDS,\nif we're detecting, is we generate logs.\n\n893\n00:46:26,110 --> 00:46:31,626\nAnd those are gonna be SDEE logs\nthat will go somewhere, right?\n\n894\n00:46:31,626 --> 00:46:34,575\nSomewhere being, maybe you have\na server that's just collecting it,\n\n895\n00:46:34,575 --> 00:46:39,220\nnut more often than not, you're gonna have\nsomething like a Qualys scan guard box or\n\n896\n00:46:39,220 --> 00:46:43,150\na Cisco MARS appliance, something\nlike that, that can take this data,\n\n897\n00:46:43,150 --> 00:46:45,390\ninterpret it, and act upon it.\n\n898\n00:46:45,390 --> 00:46:47,750\nExtremely important for an IDS.\n\n899\n00:46:47,750 --> 00:46:48,970\nNot so important for an IPS.\n\n900\n00:46:48,970 --> 00:46:51,020\nCuz the IPS can take its own action.\n\n901\n00:46:51,020 --> 00:46:53,140\nAll right.\n\n902\n00:46:53,140 --> 00:46:55,440\nSo, I'll go ahead and\nlaunch the Rule Wizard here.\n\n903\n00:46:55,440 --> 00:46:56,320\nAnd, let's see.\n\n904\n00:46:56,320 --> 00:46:58,570\n>> There is is.\n>> Oh, okay.\n\n905\n00:46:58,570 --> 00:47:00,510\nSo I get a message and\nit's letting me know,\n\n906\n00:47:00,510 --> 00:47:03,740\nlet me zoom in on this,\nthe Cisco Configuration Professional\n\n907\n00:47:03,740 --> 00:47:07,480\nwill open a subscription with\nthe router to get SDEE events.\n\n908\n00:47:07,480 --> 00:47:11,970\nSo, it's connecting my CCP,\nthe software I'm running, to the router so\n\n909\n00:47:11,970 --> 00:47:13,585\nwe can see those events\nas they're generated.\n\n910\n00:47:15,070 --> 00:47:16,493\nAll right.\nI knew that would pop up sooner or later.\n\n911\n00:47:16,493 --> 00:47:17,015\n>> Yeah.\n\n912\n00:47:17,015 --> 00:47:19,000\n>> [LAUGH]\n>> Yeah.\n\n913\n00:47:19,000 --> 00:47:22,900\nHere on the actual policy wizard as\nwe begin, we just simply go ahead and\n\n914\n00:47:22,900 --> 00:47:27,710\nwalk through this and you're gonna see\nthat it's gonna turn on that SDEE for us.\n\n915\n00:47:27,710 --> 00:47:31,780\nAlmost one of the first things we do and\nit's actually fairly incredible.\n\n916\n00:47:31,780 --> 00:47:33,100\nIt doesn't even say you can cancel it.\n\n917\n00:47:33,100 --> 00:47:34,695\nIt just says, click Okay.\n\n918\n00:47:34,695 --> 00:47:37,280\n>> [LAUGH]\n>> It doesn't even give you an option\n\n919\n00:47:37,280 --> 00:47:38,510\na lot of times.\n\n920\n00:47:38,510 --> 00:47:40,112\nOr it might have actually just done it and\nI didn't realize it.\n\n921\n00:47:40,112 --> 00:47:41,246\n>> Yeah, it did it right there.\n\n922\n00:47:41,246 --> 00:47:46,884\nThat was it, it will be turned on in\na minute once the wizard is finished.\n\n923\n00:47:46,884 --> 00:47:47,419\n>> But I mean it's amazing.\n\n924\n00:47:47,419 --> 00:47:51,005\nIt doesn't give you an option like,\ndo you want to run this?\n\n925\n00:47:51,005 --> 00:47:52,515\nIt just says you're running it.\n\n926\n00:47:52,515 --> 00:47:55,392\n[LAUGH]\n>> So\n\n927\n00:47:55,392 --> 00:47:58,360\non the first screen where\nwe actually have choices.\n\n928\n00:47:58,360 --> 00:48:01,880\nIt's basically asking us which of our\ninterfaces are inside of our network\n\n929\n00:48:01,880 --> 00:48:04,325\nversus outside of our network and.\n\n930\n00:48:04,325 --> 00:48:06,485\nOr actually you hear it,\nit's not even asking that.\n\n931\n00:48:06,485 --> 00:48:09,230\nIt's saying if we want to scan traffic.\n\n932\n00:48:09,230 --> 00:48:09,735\n>> Mm-hm.\n\n933\n00:48:09,735 --> 00:48:12,595\n>> Do we want to scan that traffic\nas it's coming into our network?\n\n934\n00:48:12,595 --> 00:48:14,075\nOr going out of our network?\n\n935\n00:48:14,075 --> 00:48:14,985\nOr both.\n\n936\n00:48:14,985 --> 00:48:17,845\nOr this interface versus\nthat interface and so on.\n\n937\n00:48:17,845 --> 00:48:19,855\nWhen you're running this on the router,\n\n938\n00:48:19,855 --> 00:48:22,190\nyou can scan that traffic\nany number of ways.\n\n939\n00:48:22,190 --> 00:48:24,245\n>> Mm-hm.\n>> As it's coming in one interface,\n\n940\n00:48:24,245 --> 00:48:25,665\nin another interface, out.\n\n941\n00:48:25,665 --> 00:48:28,820\nYou might do both directions,\nit's up to you.\n\n942\n00:48:28,820 --> 00:48:31,510\n>> For my router, GI0/0,\n\n943\n00:48:31,510 --> 00:48:35,200\nthat's my interface that is\npointing towards the Internet.\n\n944\n00:48:35,200 --> 00:48:39,620\nI might want to scan traffic going in and\nout that Internet connection.\n\n945\n00:48:39,620 --> 00:48:41,160\nI also might say,\n\n946\n00:48:41,160 --> 00:48:44,430\nI don't want to scan my people going out,\nI just don't trust the Internet.\n\n947\n00:48:44,430 --> 00:48:48,220\nI might just want to scan\nInternet traffic coming in.\n\n948\n00:48:48,220 --> 00:48:52,570\nThe only problem is, if there's VPN\ntunnels that terminate on the router,\n\n949\n00:48:52,570 --> 00:48:55,880\nthen that traffic will be\nencrypted as it's coming in.\n\n950\n00:48:55,880 --> 00:49:01,390\nAnd so, that, I might want to scan\noutbound on GI0/1 to catch it when\n\n951\n00:49:01,390 --> 00:49:05,470\nit's decrypted, cuz it would be decrypted\nby the time it goes out that interface.\n\n952\n00:49:05,470 --> 00:49:09,230\nSo we just need to think about our\ntraffic, and how we want to catch that.\n\n953\n00:49:09,230 --> 00:49:12,860\nAt a minimum, we'll normally\nbe scanning inbound traffic.\n\n954\n00:49:12,860 --> 00:49:20,200\nOn our Internet connection and so I'm just\ngonna flag that one and I'll hit next.\n\n955\n00:49:20,200 --> 00:49:21,538\nNow the most important screen and\n\n956\n00:49:21,538 --> 00:49:23,602\nthe screen that's gonna\nmake this not work for us.\n\n957\n00:49:23,602 --> 00:49:27,517\nIn order to use the IPS\nservices on a router.\n\n958\n00:49:27,517 --> 00:49:32,418\nYou've got to have a current subscription,\na paid subscription with Cisco,\n\n959\n00:49:32,418 --> 00:49:36,140\nto be able to download updated\ndefinitions or signatures.\n\n960\n00:49:36,140 --> 00:49:41,028\nSo that's what it's asking me here is\nwhat signature file do I wanna use for\n\n961\n00:49:41,028 --> 00:49:41,736\nthis IPS?\n\n962\n00:49:41,736 --> 00:49:44,070\nAnd if I have one locally,\nI can browse and get it.\n\n963\n00:49:44,070 --> 00:49:49,610\nOr we can come through and we can say\nget the latest signature from cisco.com.\n\n964\n00:49:49,610 --> 00:49:50,500\nAnd save it to our PC.\n\n965\n00:49:50,500 --> 00:49:53,290\nThis will just reach out and\ndownload it and then we can load it.\n\n966\n00:49:53,290 --> 00:49:57,820\nBut I'm gonna need a public key designated\nhere which is gonna identify my license.\n\n967\n00:49:57,820 --> 00:49:59,960\nAnd I'm not gonna have that.\n\n968\n00:49:59,960 --> 00:50:02,580\nBut if you have valid subscription,\nyou can go and download it.\n\n969\n00:50:02,580 --> 00:50:07,240\nNow I I do have a valid subscription\njust not for this particular router.\n\n970\n00:50:07,240 --> 00:50:09,830\nSo I can just log in\nto Cisco's website and\n\n971\n00:50:09,830 --> 00:50:12,080\nI can download these\ndefinitions right now.\n\n972\n00:50:12,080 --> 00:50:15,270\nBut it won't do me any good cuz it won't\nallow me to load them on this router\n\n973\n00:50:15,270 --> 00:50:17,300\nbecause it doesn't have\nan active subscription.\n\n974\n00:50:17,300 --> 00:50:18,920\nSo keep that in mind.\n\n975\n00:50:18,920 --> 00:50:24,360\nSome routers do come with a sample set of\nsignatures just so you can verify it works\n\n976\n00:50:24,360 --> 00:50:29,620\nbut they're significantly out of date so\nyou really need to get the current stuff.\n\n977\n00:50:29,620 --> 00:50:35,310\nIf I want to go and download one,\nlet's go see what that's like.\n\n978\n00:50:35,310 --> 00:50:35,810\nWhoops.\n\n979\n00:50:38,130 --> 00:50:42,870\nSo I'm just gonna go to Cisco's\nwebsite and Cisco does not provide\n\n980\n00:50:42,870 --> 00:50:46,220\na direct mechanism for the router to\nreach out to Cisco and download it.\n\n981\n00:50:46,220 --> 00:50:50,640\nAnd the reason is they don't want to have\nto deal with the bandwidth requirements\n\n982\n00:50:50,640 --> 00:50:53,380\nand the uptime requirements of\nproviding signature definitions.\n\n983\n00:50:53,380 --> 00:50:57,050\nSo what they do is they make\nit where you manually go and\n\n984\n00:50:57,050 --> 00:51:01,510\ndownload the definitions and then you can\nhost them on an FTP server internally and\n\n985\n00:51:01,510 --> 00:51:04,400\nhave all your routers connect to it and\nget them that way.\n\n986\n00:51:04,400 --> 00:51:06,510\nOr if you use products like Cisco Works.\n\n987\n00:51:06,510 --> 00:51:08,680\nThe Cisco Works software suite\ncan actually reach out and\n\n988\n00:51:08,680 --> 00:51:12,190\nget these definitions and\nmanage it for you.\n\n989\n00:51:12,190 --> 00:51:12,710\nSo anyhow,\n\n990\n00:51:12,710 --> 00:51:17,560\nI'm just gonna go in here and let me get,\nactually what is my login name here?\n\n991\n00:51:17,560 --> 00:51:21,430\nI gotta try and\nremember all my credentials so\n\n992\n00:51:21,430 --> 00:51:23,020\nI can get logged into the Cisco site.\n\n993\n00:51:23,020 --> 00:51:27,450\nNow anybody can create a CCO account\non Cisco's website and log in.\n\n994\n00:51:27,450 --> 00:51:31,660\nBut you do have to have valid,\ncurrent Cisco SMARTnet agreements for\n\n995\n00:51:31,660 --> 00:51:34,610\ndevices to be able to go in and\nactually download things.\n\n996\n00:51:34,610 --> 00:51:35,740\nSo I do have that.\n\n997\n00:51:35,740 --> 00:51:36,960\nSo if I find this 2820.\n\n998\n00:51:36,960 --> 00:51:39,640\nWhoops, that was a switch.\n\n999\n00:51:39,640 --> 00:51:40,800\nI clicked on the one.\n\n1000\n00:51:40,800 --> 00:51:45,873\n>> 2021, I think is the actual.\n\n1001\n00:51:47,323 --> 00:51:48,729\n>> [INAUDIBLE] back here.\n\n1002\n00:51:54,162 --> 00:51:54,950\nOh, I went back too far.\n\n1003\n00:51:54,950 --> 00:51:58,680\nAll right, hang on,\nlet's get back to our screen, here.\n\n1004\n00:51:58,680 --> 00:52:01,600\nSo I have a 2821 integrated\nservices router.\n\n1005\n00:52:01,600 --> 00:52:02,570\nThere we go.\n>> That's the one.\n\n1006\n00:52:02,570 --> 00:52:06,630\n>> I clicked on the right thing this time.\n\n1007\n00:52:06,630 --> 00:52:10,700\nAll right.\n\n1008\n00:52:10,700 --> 00:52:15,350\nSo when I go and look at the downloads\nthat are available for a 2821.\n\n1009\n00:52:15,350 --> 00:52:16,010\nWe zoom in on that.\n\n1010\n00:52:16,010 --> 00:52:18,160\nYou'll see all the different\nthings that we can get.\n\n1011\n00:52:18,160 --> 00:52:19,810\nSoftware on Chassis, so\n\n1012\n00:52:19,810 --> 00:52:23,770\nthat's the software that we're actually\nrunning on the device, and then you'll see\n\n1013\n00:52:23,770 --> 00:52:27,510\nother things like you know the interface\ncards have firmware you can download,\n\n1014\n00:52:27,510 --> 00:52:32,120\nand integrated storage, Unity Express for\nthe Voice and all that.\n\n1015\n00:52:32,120 --> 00:52:34,495\nSo I need to go into Software on Chassis.\n\n1016\n00:52:37,258 --> 00:52:41,560\nThen from here we can find\nsome important things.\n\n1017\n00:52:41,560 --> 00:52:47,410\nThe iOS ROM Mon Software, that's that low\nlayer like the Bootstrap code and all,\n\n1018\n00:52:47,410 --> 00:52:52,200\nnot every router has updatable software\nfor that so you don't normally see that.\n\n1019\n00:52:52,200 --> 00:52:54,428\nIOS Software, that is my base IOS.\n\n1020\n00:52:54,428 --> 00:53:01,284\nAnd then PDLM,\nthe Protcol Description Language Module.\n\n1021\n00:53:01,284 --> 00:53:05,270\nIf you're using quality of service and\nyou're doing PDLM.\n\n1022\n00:53:05,270 --> 00:53:08,730\nThen what it can do is this helps it\nto identify what traffic falls in what\n\n1023\n00:53:08,730 --> 00:53:10,876\nprotocol for quality of service purposes.\n\n1024\n00:53:10,876 --> 00:53:13,298\nOn some routers,\nif you go into their iOS software,\n\n1025\n00:53:13,298 --> 00:53:15,950\nyou'll actually see the IPS\nsignatures in here.\n\n1026\n00:53:15,950 --> 00:53:18,950\nI don't recall if this one does or not,\nso I'm just going to look real quick and\n\n1027\n00:53:18,950 --> 00:53:20,590\nsee if the signatures are in here.\n\n1028\n00:53:20,590 --> 00:53:21,390\nIf they aren't,\n\n1029\n00:53:21,390 --> 00:53:24,530\nthere's another place you can go to\nactually download the signatures directly.\n\n1030\n00:53:24,530 --> 00:53:30,880\nSo, as I look through here these are all\niOS files so it's not present on this one.\n\n1031\n00:53:30,880 --> 00:53:32,920\nAnd let's just see if it's\nburied under All Releases.\n\n1032\n00:53:32,920 --> 00:53:36,200\nIf not, nope so\nwe'll have to go the other way.\n\n1033\n00:53:36,200 --> 00:53:39,420\nSo the other way is if we go all\nthe way back to our product screen.\n\n1034\n00:53:43,640 --> 00:53:47,680\nThen in here, we can go under security.\n\n1035\n00:53:47,680 --> 00:53:52,570\nAnd in here we can find.\n\n1036\n00:53:52,570 --> 00:53:54,140\n>> Intrusion prevention, yep.\n\n1037\n00:53:54,140 --> 00:53:54,860\n>> There.\nWhoops.\n\n1038\n00:53:56,140 --> 00:53:57,650\nHelps if I click the right way.\n\n1039\n00:53:57,650 --> 00:53:59,860\nWe can go in and we can download\nthose signatures from here,\n\n1040\n00:53:59,860 --> 00:54:02,310\nif you have a current subscription.\n\n1041\n00:54:02,310 --> 00:54:03,600\nLet's see.\n\n1042\n00:54:03,600 --> 00:54:04,270\n>> The second one?\n\n1043\n00:54:04,270 --> 00:54:10,840\n>> (BLANK_AUDIO) Let's see,\nthat's the module,\n\n1044\n00:54:12,350 --> 00:54:17,760\nand well, let's go in here and\nsee if it has of our signatures.\n\n1045\n00:54:21,520 --> 00:54:22,820\nSignature updates, there we go.\n\n1046\n00:54:25,840 --> 00:54:28,580\nAll right, so in here we can go and\nwe can find the update and\n\n1047\n00:54:28,580 --> 00:54:30,600\nI can see the most current update.\n\n1048\n00:54:30,600 --> 00:54:33,220\nLet me zoom in on this a little bit.\n\n1049\n00:54:33,220 --> 00:54:37,940\nThe current update is labeled S773 and\nif I look, it was released February 19th.\n\n1050\n00:54:37,940 --> 00:54:41,820\nToday's date is actually February 24th,\nso that a few days old.\n\n1051\n00:54:41,820 --> 00:54:44,770\nNormally they're pretty good about\ngetting updates out about every two days,\n\n1052\n00:54:44,770 --> 00:54:46,200\nabout every 48 hours.\n\n1053\n00:54:46,200 --> 00:54:51,070\nThere must not have been any significant\nchanges out there recently Although it is,\n\n1054\n00:54:51,070 --> 00:54:52,470\ntoday is Monday.\n\n1055\n00:54:52,470 --> 00:54:54,900\nDepending on when you watch this show, who\nknows what day it is for you guys, but for\n\n1056\n00:54:54,900 --> 00:54:55,830\nus it's Monday.\n\n1057\n00:54:55,830 --> 00:54:58,950\nAnd so, you know,\nmaybe nothing happened over the weekend.\n\n1058\n00:54:58,950 --> 00:55:00,400\nBut here's the updated definitions.\n\n1059\n00:55:00,400 --> 00:55:03,320\nAnd you'll see it's just a package file,\na little pkg.\n\n1060\n00:55:03,320 --> 00:55:07,080\nAnd I can go and download that and we can\nkind of run through the whole routine.\n\n1061\n00:55:07,080 --> 00:55:11,050\nIt's not very big, so\npoint nine megabytes, it's small.\n\n1062\n00:55:11,050 --> 00:55:18,550\nBecause what the signature\nfile is is really just\n\n1063\n00:55:18,550 --> 00:55:26,130\na list of the pattern that\nan attack would follow.\n\n1064\n00:55:26,130 --> 00:55:29,420\nAnd so the thing that\nidentifies the attack is some\n\n1065\n00:55:29,420 --> 00:55:33,500\nextra code that's added to the end of\na url when they're going to a website.\n\n1066\n00:55:33,500 --> 00:55:34,030\nRight?\n\n1067\n00:55:34,030 --> 00:55:36,390\nSo the signature will\nhave that extra code.\n\n1068\n00:55:36,390 --> 00:55:42,300\nIt'll be identified right there, and, if\nit sees any traffic with that code in it,\n\n1069\n00:55:42,300 --> 00:55:44,810\nit matches it, and it'll flag\nit as being part of that attack.\n\n1070\n00:55:44,810 --> 00:55:46,340\nThat's really what\nthe signatures are made up of.\n\n1071\n00:55:46,340 --> 00:55:49,134\nThere's actually several different\nsignature types we'll talk about later.\n\n1072\n00:55:49,134 --> 00:55:51,308\nBut that's kind of what's in there.\n\n1073\n00:55:51,308 --> 00:55:51,965\nSo.\n\n1074\n00:55:51,965 --> 00:55:53,559\nAll right so that's downloaded.\n\n1075\n00:55:53,559 --> 00:55:57,399\nAnd so now I can come in here and I can\nsay specify to the signature file and\n\n1076\n00:55:57,399 --> 00:55:58,750\nI can browse and find it.\n\n1077\n00:55:59,830 --> 00:56:02,002\nAnd let's see it is on my PC.\n\n1078\n00:56:11,683 --> 00:56:15,204\nAnd-\n>> Zip format.\n\n1079\n00:56:15,204 --> 00:56:19,587\n>> Oh no, see it's telling me I need\nthe sig version five SDM and so\n\n1080\n00:56:19,587 --> 00:56:21,427\nI didn't get the SDM one.\n\n1081\n00:56:21,427 --> 00:56:24,546\nI got apparently something different.\n\n1082\n00:56:28,092 --> 00:56:29,113\nYeah, let me go back.\n\n1083\n00:56:29,113 --> 00:56:30,260\nSo I grabbed the wrong one.\n\n1084\n00:56:30,260 --> 00:56:30,950\nWell either way.\n\n1085\n00:56:30,950 --> 00:56:32,800\nBut when I load it,\nI know what's going to happen.\n\n1086\n00:56:32,800 --> 00:56:35,020\nIt's going to tell me I don't\nhave a valid subscription.\n\n1087\n00:56:35,020 --> 00:56:36,950\nAnd so I can't use that signature file.\n\n1088\n00:56:36,950 --> 00:56:39,630\nSo it's kind of self defeating to try and\ndo the whole thing.\n\n1089\n00:56:39,630 --> 00:56:41,680\nBut basically it's going\nto error out on that.\n\n1090\n00:56:41,680 --> 00:56:44,450\nAnd you'll notice you can't\nfinish the wizard without loading\n\n1091\n00:56:44,450 --> 00:56:45,350\na signature data base.\n\n1092\n00:56:45,350 --> 00:56:46,890\nSo there's our problem.\n\n1093\n00:56:46,890 --> 00:56:48,400\nNow, that doesn't mean we\ncan't show this to you.\n\n1094\n00:56:48,400 --> 00:56:51,594\nI've actually got another set of systems\nwe're going to look at that have\n\n1095\n00:56:51,594 --> 00:56:52,839\nthe subscriptions on them.\n\n1096\n00:56:52,839 --> 00:56:53,963\nSo we can peek at that.\n\n1097\n00:56:53,963 --> 00:56:57,743\nBut you're basically feeding it the\ndefinition so it knows what to scan for\n\n1098\n00:56:57,743 --> 00:56:58,463\nand look for.\n\n1099\n00:56:58,463 --> 00:57:02,167\nAnd you can update these definitions\nwhile the device is running.\n\n1100\n00:57:02,167 --> 00:57:04,358\nYou don't have to take\nit offline to do this.\n\n1101\n00:57:04,358 --> 00:57:05,540\nBut you've got to remember to do it.\n\n1102\n00:57:05,540 --> 00:57:06,990\nYou've got to update these.\n\n1103\n00:57:06,990 --> 00:57:09,680\nAnd there's ways to schedule it and\nautomate it.\n\n1104\n00:57:09,680 --> 00:57:12,490\nOn the IPs they do it automatically,\non the routers they don't.\n\n1105\n00:57:12,490 --> 00:57:16,400\nAnd it's kind of the throwback to\nif you want a real solid system,\n\n1106\n00:57:16,400 --> 00:57:17,550\nyou don't deploy it on the router.\n\n1107\n00:57:17,550 --> 00:57:19,420\nYou do deploy it in hardware.\n\n1108\n00:57:19,420 --> 00:57:22,220\n>> And, now, sometimes though,\nlike on that different file,\n\n1109\n00:57:22,220 --> 00:57:26,690\nthe signature file size that we just saw\nis an update which is relatively small.\n\n1110\n00:57:26,690 --> 00:57:30,120\nSometimes, it can be large\nat the very beginning.\n\n1111\n00:57:30,120 --> 00:57:33,580\nAnd, so you do also have to watch out for\nthe hardware on your router.\n\n1112\n00:57:33,580 --> 00:57:38,090\nIf you get one that's too big and\nit may not actually fit it and\n\n1113\n00:57:38,090 --> 00:57:39,530\nmay kind of cause some problems here.\n\n1114\n00:57:39,530 --> 00:57:42,740\nSo, be sure you actually take a look\nat the hardware space that you have\n\n1115\n00:57:42,740 --> 00:57:43,800\non your router as well.\n\n1116\n00:57:43,800 --> 00:57:45,490\n>> Yeah and\njust like updating an iOS file.\n\n1117\n00:57:45,490 --> 00:57:47,960\nYou've got a certain amount of\nflash to be able to store stuff and\n\n1118\n00:57:47,960 --> 00:57:49,650\nyour signature files\ncount against that flash.\n\n1119\n00:57:49,650 --> 00:57:51,882\nSo it's important to be aware of that.\n\n1120\n00:57:51,882 --> 00:57:54,797\nBut also to delete old signatures\nwhen you're putting in new ones.\n\n1121\n00:57:54,797 --> 00:57:57,620\nAnd that should happen automatically,\nbut sometimes it doesn't.\n\n1122\n00:57:57,620 --> 00:57:59,080\nSo it's just something\nto keep an eye out for.\n\n1123\n00:58:03,370 --> 00:58:06,556\nBasically once we have that signature\nactivated then the IPS goes active.\n\n1124\n00:58:06,556 --> 00:58:10,330\nAnd what your able to do is\ncome in here under edit IPS.\n\n1125\n00:58:10,330 --> 00:58:14,470\nAnd you will see, it was complaining\nabout my signatures there.\n\n1126\n00:58:14,470 --> 00:58:19,010\nBut you will see a list of all of\nthe signatures and what it's watching for.\n\n1127\n00:58:19,010 --> 00:58:20,459\nAnd you'll see where it categorizes them.\n\n1128\n00:58:20,459 --> 00:58:22,592\nSo I've got operating system attacks.\n\n1129\n00:58:22,592 --> 00:58:27,207\nI've got denial of service,\nlayer two three and four protocol attacks,\n\n1130\n00:58:27,207 --> 00:58:29,210\nadware spyware and so on.\n\n1131\n00:58:29,210 --> 00:58:30,790\nThey're all categorized and\n\n1132\n00:58:30,790 --> 00:58:35,130\nthe reason is you may have\ntraffic on your network that's\n\n1133\n00:58:35,130 --> 00:58:38,950\nlegitimate traffic that gets flagged by\none of these signatures accidentally.\n\n1134\n00:58:38,950 --> 00:58:43,120\nSo you may need to go in and manipulate\nthese signatures either disabling them.\n\n1135\n00:58:43,120 --> 00:58:44,930\nOr changing their response.\n\n1136\n00:58:44,930 --> 00:58:48,520\nAnd their response is what I wanna talk\nabout next, but looking at the clock,\n\n1137\n00:58:48,520 --> 00:58:50,470\nit's about time to stop for a break.\n\n1138\n00:58:50,470 --> 00:58:51,960\nSo why don't we do this, Ronnie?\n\n1139\n00:58:51,960 --> 00:58:53,640\nWhy don't we stop here and take a break.\n\n1140\n00:58:53,640 --> 00:58:57,750\nWhen we get back I wanna talk about\nthe different signature engines,\n\n1141\n00:58:57,750 --> 00:59:00,870\nso how we scan for stuff and\nthe responses they take.\n\n1142\n00:59:00,870 --> 00:59:03,883\nWhat they do when an attack is detected\nbecause it is some pretty neat stuff.\n\n1143\n00:59:03,883 --> 00:59:06,084\nSo, anything else to add before we stop?\n\n1144\n00:59:06,084 --> 00:59:08,570\n>> Nope, sounds good.\n\n1145\n00:59:08,570 --> 00:59:12,332\n>> So we're going to stop here, and\nwhen we get back, more signature scanning,\n\n1146\n00:59:12,332 --> 00:59:12,965\nafter this.\n\n1147\n00:59:12,965 --> 00:59:22,328\n[MUSIC]\n\n1148\n00:59:22,328 --> 00:59:23,840\nWelcome back everybody.\n\n1149\n00:59:23,840 --> 00:59:25,620\nSo during the break I went ahead and\n\n1150\n00:59:25,620 --> 00:59:28,980\nforced the virus signatures\nonto that router.\n\n1151\n00:59:28,980 --> 00:59:32,730\nIf you don't have a valid subscription\nthe router's not going to use them.\n\n1152\n00:59:32,730 --> 00:59:35,240\nBut the definitions do\nkind of show up now.\n\n1153\n00:59:35,240 --> 00:59:39,530\nYou'll see I loaded a full definition\nfile which contains literally\n\n1154\n00:59:39,530 --> 00:59:42,610\nthousands of signatures and\nonly three show up.\n\n1155\n00:59:42,610 --> 00:59:46,130\nAnd that's what happens when you\ndon't have a subscription so\n\n1156\n00:59:46,130 --> 00:59:48,350\nyou can kind of spot what this looks like.\n\n1157\n00:59:48,350 --> 00:59:51,450\nAnd here is, kind of force-fed in there.\n\n1158\n00:59:51,450 --> 00:59:54,430\nIf you want to see what a device\nlooks like that actually has the full\n\n1159\n00:59:54,430 --> 00:59:59,050\nsignature database, well let me\nswitch over to another tool I've got.\n\n1160\n00:59:59,050 --> 01:00:04,600\nIf you only have one device that's\nrunning the IPS software then,\n\n1161\n01:00:04,600 --> 01:00:07,250\nsure, you might use\nthe Cisco Configuration Professional.\n\n1162\n01:00:07,250 --> 01:00:11,040\nBut if your company warrants\npurchasing hardware IPSs,\n\n1163\n01:00:11,040 --> 01:00:12,500\nyou probably have more than one.\n\n1164\n01:00:12,500 --> 01:00:13,060\nAnd so for\n\n1165\n01:00:13,060 --> 01:00:19,088\nthose type of people you'll step up to the\nCisco IPS Management Engine, or the IME.\n\n1166\n01:00:19,088 --> 01:00:26,130\nThe Cisco IME lets us manage all of\nour IPS boxes from one location.\n\n1167\n01:00:26,130 --> 01:00:30,520\nAnd so you can have one nice little\ngraphical user interface here\n\n1168\n01:00:30,520 --> 01:00:32,010\nwhere you can manage all of your systems.\n\n1169\n01:00:32,010 --> 01:00:37,580\nAnd so here we can see a bunch of IPS\nsensors and ASAs and things like that.\n\n1170\n01:00:37,580 --> 01:00:40,330\nAll right here and\nwe can manage them from one place.\n\n1171\n01:00:40,330 --> 01:00:42,720\nSo I'm just going to pick one\nhere we've got a branch ASA.\n\n1172\n01:00:42,720 --> 01:00:47,410\nSo this is a firewall with\nthe IPS module inserted in it.\n\n1173\n01:00:47,410 --> 01:00:50,230\nAnd, whoops I want to kind\nof manipulate that device.\n\n1174\n01:00:50,230 --> 01:00:52,850\nSo let's go to Configuration.\n\n1175\n01:00:54,810 --> 01:01:01,050\nAnd we'll find our policies and\nour signatures.\n\n1176\n01:01:01,050 --> 01:01:02,050\nHere we go.\n\n1177\n01:01:02,050 --> 01:01:06,460\nHere's a system with the full\nsignature database on it and so\n\n1178\n01:01:06,460 --> 01:01:08,040\nI'm just going to pull this up here.\n\n1179\n01:01:08,040 --> 01:01:12,370\nWhat you'll see is there\nare literally tons, hundreds,\n\n1180\n01:01:12,370 --> 01:01:15,310\nof definitions based on whatever\nit is that you're filtering.\n\n1181\n01:01:15,310 --> 01:01:19,890\nSo like if I go to operating system here\nI'll see a bunch of operating system\n\n1182\n01:01:20,990 --> 01:01:22,700\nsignatures that are being scanned.\n\n1183\n01:01:22,700 --> 01:01:27,450\nSo like the very first one there,\nIP options Bad Option List.\n\n1184\n01:01:27,450 --> 01:01:32,050\nEvery IP based packet that goes\non the network has certain option\n\n1185\n01:01:32,050 --> 01:01:35,130\nfields at the beginning where you can\ndesignate things like quality of service,\n\n1186\n01:01:35,130 --> 01:01:37,090\ntype of service, you know stuff like that.\n\n1187\n01:01:37,090 --> 01:01:39,360\nThey're optional fields,\nthey're not required.\n\n1188\n01:01:39,360 --> 01:01:42,910\nBut you can put things in there to\nimpact what happens to the packet.\n\n1189\n01:01:42,910 --> 01:01:46,040\nNormally quality of service stuff,\nbut it can even like VLAN tags and\n\n1190\n01:01:46,040 --> 01:01:46,630\nthings like that.\n\n1191\n01:01:46,630 --> 01:01:48,090\nBut that's not really IP.\n\n1192\n01:01:48,090 --> 01:01:53,710\nBut with this signature it has a list of\noptions that are used in known attacks.\n\n1193\n01:01:53,710 --> 01:01:55,070\nSo bad options.\n\n1194\n01:01:55,070 --> 01:01:58,020\nAnd so we can just look at the option\nfield on every packet that goes through it\n\n1195\n01:01:58,020 --> 01:02:01,300\nand see these bad options\nit can take action.\n\n1196\n01:02:01,300 --> 01:02:03,260\nThat's the real power of these signatures,\n\n1197\n01:02:03,260 --> 01:02:05,460\nis that we can turn the signatures on and\noff.\n\n1198\n01:02:05,460 --> 01:02:09,070\nYou'll see the Enabled value here,\nwhether they're turned on or off.\n\n1199\n01:02:09,070 --> 01:02:13,800\nAnd then what we do about it,\nthe Signature Actions,\n\n1200\n01:02:13,800 --> 01:02:17,390\nthe response we can take when one\nof these signatures is triggered.\n\n1201\n01:02:17,390 --> 01:02:20,870\nSo, we as the end user have\ntotal control over this.\n\n1202\n01:02:20,870 --> 01:02:23,579\nIf you load Cisco's definitions,\nthere's default values,\n\n1203\n01:02:23,579 --> 01:02:25,224\nyou can just run with that if you want.\n\n1204\n01:02:25,224 --> 01:02:29,040\nBut you can override any and\nall of it if you want.\n\n1205\n01:02:29,040 --> 01:02:32,990\nTurning the signatures on or off, changing\ntheir reaction, changing what they do.\n\n1206\n01:02:34,210 --> 01:02:37,240\nAll right, so Ronnie, let's talk\nabout those responses real quick.\n\n1207\n01:02:37,240 --> 01:02:40,450\nWe made a list during\nthe break of those reactions.\n\n1208\n01:02:41,740 --> 01:02:43,230\nLet's jump down to that.\n\n1209\n01:02:44,860 --> 01:02:45,780\nHere we go.\n\n1210\n01:02:45,780 --> 01:02:49,680\nSo, in the event that a signature is\ntriggered it's gonna take, really,\n\n1211\n01:02:49,680 --> 01:02:51,840\none of five different actions.\n\n1212\n01:02:51,840 --> 01:02:54,470\n>> Yeah, the first one that\nwe have here is simple deny.\n\n1213\n01:02:54,470 --> 01:02:56,905\nJust like on our ACLs we have a deny.\n\n1214\n01:02:56,905 --> 01:03:02,915\nWe can actually go ahead and have if data\ncomes in to tell it we want to stop it or\n\n1215\n01:03:02,915 --> 01:03:04,695\nblock it right then.\n\n1216\n01:03:04,695 --> 01:03:06,335\nWhen we start doing it.\n\n1217\n01:03:06,335 --> 01:03:09,615\nSo it actually does prevent it\nfrom passing through the IPS.\n\n1218\n01:03:09,615 --> 01:03:12,035\nNow don't get me wrong there is\nmore granularity in this but\n\n1219\n01:03:12,035 --> 01:03:14,555\nit really is about\nthe idea of denying here.\n\n1220\n01:03:15,800 --> 01:03:18,090\n>> The second one is it can log.\n\n1221\n01:03:18,090 --> 01:03:20,410\nAnd you can actually do more than\none of these actions too, so\n\n1222\n01:03:20,410 --> 01:03:22,170\nyou could deny and log.\n\n1223\n01:03:22,170 --> 01:03:25,860\nBut for example, log is where\nwe just create a record for it.\n\n1224\n01:03:25,860 --> 01:03:31,616\nSo we would create an SDEE event\n\n1225\n01:03:31,616 --> 01:03:37,460\ncontaining alert information.\n\n1226\n01:03:37,460 --> 01:03:40,514\nAnd that's what we would really\nuse in an IDS environments.\n\n1227\n01:03:40,514 --> 01:03:44,129\nSo we've detected it and we're generating\na log message but it would create that\n\n1228\n01:03:44,129 --> 01:03:47,016\nevent, send it out and\nnow we've got a record that it occurred.\n\n1229\n01:03:47,016 --> 01:03:48,844\n>> We also have the idea\nof the alert here.\n\n1230\n01:03:48,844 --> 01:03:51,130\nThe alert is exactly like it sounds.\n\n1231\n01:03:51,130 --> 01:03:52,958\nAn event happens on the device.\n\n1232\n01:03:52,958 --> 01:03:54,468\nNot only can we tell it to log it.\n\n1233\n01:03:54,468 --> 01:03:56,370\nHey, make a record of it here.\n\n1234\n01:03:56,370 --> 01:03:58,440\nBut let's go ahead and contact someone or\n\n1235\n01:03:58,440 --> 01:04:01,680\nlet someone else know that\nsomething has happened here.\n\n1236\n01:04:01,680 --> 01:04:05,210\nI used to tease our friend Charlie about\nthis, that I could get our printer.\n\n1237\n01:04:05,210 --> 01:04:09,425\nActually send them an email every time\na page was printed off of our big printer.\n\n1238\n01:04:09,425 --> 01:04:10,720\n[LAUGH]\n>> Yeah.\n\n1239\n01:04:10,720 --> 01:04:11,649\n>> And he said you're fired.\n\n1240\n01:04:11,649 --> 01:04:13,520\n>> [LAUGH]\n>> And that's what he said.\n\n1241\n01:04:13,520 --> 01:04:16,700\nBut it was just one of those different\nthings that we actually had.\n\n1242\n01:04:16,700 --> 01:04:19,300\nBut alerts can actually happen\nlike this as well, right?\n\n1243\n01:04:19,300 --> 01:04:22,550\nWe want somebody to be alerted\nto an event that's happened.\n\n1244\n01:04:22,550 --> 01:04:26,230\nAnd so instead of actually having to wait\non it and read a report on it later on,\n\n1245\n01:04:26,230 --> 01:04:27,840\ndon't get me wrong, those are good.\n\n1246\n01:04:27,840 --> 01:04:30,860\nBut it actually can send it\nwhen it occurs right then.\n\n1247\n01:04:30,860 --> 01:04:34,325\n>> Yep, another option we have is\nwhat's called a request block.\n\n1248\n01:04:34,325 --> 01:04:36,880\n>> Mm-hm.\n>> Now, when we say deny up top,\n\n1249\n01:04:36,880 --> 01:04:38,240\nwe're denying that traffic.\n\n1250\n01:04:38,240 --> 01:04:40,505\nWe're just dropping those packets and\nthey don't make it through.\n\n1251\n01:04:40,505 --> 01:04:41,650\n>> Mm-hm.\n>> All right, but\n\n1252\n01:04:41,650 --> 01:04:43,650\nwhat about follow-up packets?\n\n1253\n01:04:43,650 --> 01:04:45,390\nMore stuff that comes through.\n\n1254\n01:04:45,390 --> 01:04:49,990\nEach one is handled individually so\nyou may continue to deny or you may not.\n\n1255\n01:04:49,990 --> 01:04:54,650\nIf somebody tries an attack but starts\nsending legitimate traffic you would deny\n\n1256\n01:04:54,650 --> 01:04:57,740\nthe attack but the legitimate\ntraffic would still get through.\n\n1257\n01:04:57,740 --> 01:05:00,460\nSo another option is we\ncan request a block.\n\n1258\n01:05:00,460 --> 01:05:06,160\nA block is different than deny, because\na block does not just affect one packet,\n\n1259\n01:05:06,160 --> 01:05:08,400\nit affects the entire communication.\n\n1260\n01:05:08,400 --> 01:05:12,020\nAnd it takes two forms,\na connection block and a host block.\n\n1261\n01:05:12,020 --> 01:05:13,540\nI usually do a host block.\n\n1262\n01:05:13,540 --> 01:05:18,810\nIf somebody sends an attack,\nnot only do we block and deny that attack,\n\n1263\n01:05:18,810 --> 01:05:23,598\nbut we block and deny any other traffic\nthat comes from that host, right?\n\n1264\n01:05:23,598 --> 01:05:26,220\nThey try and attack,\nwe want them off the network, and\n\n1265\n01:05:26,220 --> 01:05:28,580\nthat's the most aggressive\nway that we can go about it.\n\n1266\n01:05:28,580 --> 01:05:29,790\nAnd it's usually what I pick.\n\n1267\n01:05:29,790 --> 01:05:30,740\n>> Yeah, right.\n\n1268\n01:05:30,740 --> 01:05:33,550\n>> But you can also do what's\ncalled a connection reset.\n\n1269\n01:05:34,740 --> 01:05:39,080\nIf somebody has opened up a HTTP session,\nor\n\n1270\n01:05:39,080 --> 01:05:43,610\na whatever, with your web server and\nyou detect an attack.\n\n1271\n01:05:43,610 --> 01:05:46,630\nYou can block that session.\n\n1272\n01:05:46,630 --> 01:05:50,500\nWhich means that attacker would still\nbe able to connect on other ports,\n\n1273\n01:05:50,500 --> 01:05:52,670\nwill be able to open up a new session,\n\n1274\n01:05:52,670 --> 01:05:55,990\nbasically start a new web connection\nto the server, and continue on.\n\n1275\n01:05:55,990 --> 01:05:58,490\nYou stop their attack, but\n\n1276\n01:05:58,490 --> 01:06:02,880\nthen they're able to continue with\nother potentially legitimate traffic.\n\n1277\n01:06:02,880 --> 01:06:05,490\nMore than likely they're just gonna\nfind other ways to attack again\n\n1278\n01:06:05,490 --> 01:06:06,400\nand you block again.\n\n1279\n01:06:06,400 --> 01:06:09,330\nSo, it's up to you how\naggressive you wanna be.\n\n1280\n01:06:09,330 --> 01:06:12,850\nIf you just want to stop the attack and\nreset that session,\n\n1281\n01:06:12,850 --> 01:06:16,760\nto end the communication they were doing,\nthen you can do the block connection.\n\n1282\n01:06:16,760 --> 01:06:17,510\nAll right?\n>> Mm-hm.\n\n1283\n01:06:17,510 --> 01:06:19,690\n>> But if you wanna be really aggressive,\nyou block the host, and\n\n1284\n01:06:19,690 --> 01:06:21,160\nthat just stops them out right.\n\n1285\n01:06:21,160 --> 01:06:22,860\nBut you've got that choice, that control.\n\n1286\n01:06:22,860 --> 01:06:23,480\n>> Yeah.\n\n1287\n01:06:23,480 --> 01:06:25,580\nThat last one there is a simple reset.\n\n1288\n01:06:25,580 --> 01:06:27,700\nWhen stuff actually starts to happen here.\n\n1289\n01:06:27,700 --> 01:06:33,060\nInstead we go just go okay let's just\n\n1290\n01:06:33,060 --> 01:06:37,755\nkind of reset\n\n1291\n01:06:37,755 --> 01:06:42,880\nthe entire TCP\n\n1292\n01:06:42,880 --> 01:06:47,833\nconnect at this point and\nallows somebody to try again.\n\n1293\n01:06:47,833 --> 01:06:53,049\n[INAUDIBLE]\n\n1294\n01:06:53,049 --> 01:06:57,740\nAll right, so it blocks current and\n\n1295\n01:06:59,380 --> 01:07:02,360\nfuture traffic on the session protocol.\n\n1296\n01:07:02,360 --> 01:07:05,050\nSo if it's HTTP then that's\ngoing to be blocked but\n\n1297\n01:07:05,050 --> 01:07:06,950\nthey can still connect with HTTPS or\nwhatever.\n\n1298\n01:07:06,950 --> 01:07:09,970\nThe reason I wanted to write that out\nis it sounds similar to reset, right?\n\n1299\n01:07:11,030 --> 01:07:15,350\nReset ends the current session.\n\n1300\n01:07:15,350 --> 01:07:15,970\nSession, yeah.\n\n1301\n01:07:17,320 --> 01:07:19,890\nSo it resets like your HTTP session,\nright?\n\n1302\n01:07:19,890 --> 01:07:21,800\nSo if you were logged in,\nnow you're logged out, right?\n\n1303\n01:07:21,800 --> 01:07:25,600\nAnd you gotta build a new session and\nconnect and start over again, but they can\n\n1304\n01:07:25,600 --> 01:07:29,460\nconnect right back on that same port,\nversus when we do a connection block.\n\n1305\n01:07:29,460 --> 01:07:31,100\nThey wouldn't be able to\nreconnect on that same port,\n\n1306\n01:07:31,100 --> 01:07:33,280\nthey'd have to connect on another port or\nwhatever.\n\n1307\n01:07:33,280 --> 01:07:38,730\nSo very similar action, reset, I always\ncall this one the passive aggressive one.\n\n1308\n01:07:38,730 --> 01:07:40,855\nYou see the attack so\nyou kind of inconvenience them.\n\n1309\n01:07:40,855 --> 01:07:43,010\n>> [LAUGH]\n>> You reset their session and\n\n1310\n01:07:43,010 --> 01:07:44,730\nthey can just try again, right?\n\n1311\n01:07:44,730 --> 01:07:47,660\nSo it does really help when you're\ndealing with things with denial of\n\n1312\n01:07:47,660 --> 01:07:49,280\nservice attacks.\n\n1313\n01:07:49,280 --> 01:07:52,320\nWith a denial of service attack\nan attacker might send one connection but\n\n1314\n01:07:52,320 --> 01:07:54,480\nthen opens fifty different sessions.\n\n1315\n01:07:54,480 --> 01:07:59,570\nBut by resetting those sessions, that lets\nthe target close all those sessions and\n\n1316\n01:07:59,570 --> 01:08:02,820\nso it's not getting overwhelmed\nwith thousands of open sessions.\n\n1317\n01:08:02,820 --> 01:08:04,450\nThat's how denial of service attacks work.\n\n1318\n01:08:04,450 --> 01:08:07,880\nYou get all these unused open sessions\nthat are sitting there waiting.\n\n1319\n01:08:07,880 --> 01:08:08,690\nThe firewall or\n\n1320\n01:08:08,690 --> 01:08:12,230\nrouter will reset those sessions,\nso that the host machine, or the.\n\n1321\n01:08:12,230 --> 01:08:16,530\n>> Yeah. . >> You know, the target, is\nno longer waiting for responses on them.\n\n1322\n01:08:16,530 --> 01:08:19,750\nSo, reset, it's really only useful for\ndenial of service, or\n\n1323\n01:08:19,750 --> 01:08:21,430\njust annoying the attacker, you know?\n\n1324\n01:08:21,430 --> 01:08:22,380\nOne or the other.\n\n1325\n01:08:22,380 --> 01:08:23,860\nVersus, like, a request block.\n\n1326\n01:08:23,860 --> 01:08:25,265\nThat's gonna be a lot more aggressive.\n\n1327\n01:08:25,265 --> 01:08:25,810\n>> Mm-hm.\n\n1328\n01:08:25,810 --> 01:08:26,390\n>> All right.\n\n1329\n01:08:26,390 --> 01:08:28,050\nSo those are some of\nthe responses we can take.\n\n1330\n01:08:28,050 --> 01:08:30,080\nAnd Cisco, if we go back here.\n\n1331\n01:08:30,080 --> 01:08:35,400\nYou'll see that under the alert, and\nlog, deny, other, they've got signature\n\n1332\n01:08:35,400 --> 01:08:40,470\nactions that are defined based on what\nthey feel is the appropriate response.\n\n1333\n01:08:40,470 --> 01:08:43,170\nBut you can edit any of these, really.\n\n1334\n01:08:43,170 --> 01:08:44,320\nYou can go through and\n\n1335\n01:08:44,320 --> 01:08:49,370\nchange what is going to happen based\non the needs of your organization.\n\n1336\n01:08:49,370 --> 01:08:51,500\nAnd you can drill down into any of these.\n\n1337\n01:08:51,500 --> 01:08:56,630\nAnd manipulate that response,\nso here's where I've got\n\n1338\n01:08:56,630 --> 01:09:01,850\nthe information on my alert frequency,\nhow often I generate the alerts and so on.\n\n1339\n01:09:01,850 --> 01:09:03,450\nAnd what we're going to do,\n\n1340\n01:09:03,450 --> 01:09:06,970\nyou'll see all the things in here as\nfar as the event calendar for logging.\n\n1341\n01:09:06,970 --> 01:09:12,090\nThe engine we're gonna talk about in\na minute, so I'll hold off on that.\n\n1342\n01:09:12,090 --> 01:09:14,410\nAnd so several of the other\nsettings that are in there.\n\n1343\n01:09:14,410 --> 01:09:18,110\nIt's pretty cool though cuz you can\nmanipulate a lot of this stuff and\n\n1344\n01:09:18,110 --> 01:09:20,270\nreally kind of change it.\n\n1345\n01:09:20,270 --> 01:09:24,150\nHere's the responses and\nyou can see alert and log.\n\n1346\n01:09:24,150 --> 01:09:25,700\nDo we just produce an alert?\n\n1347\n01:09:25,700 --> 01:09:27,080\nIs it verbose?\n\n1348\n01:09:27,080 --> 01:09:29,520\nDo we actually log the packets?\n\n1349\n01:09:29,520 --> 01:09:32,650\nThat can be tough because you run out\nof memory in your system pretty quick.\n\n1350\n01:09:32,650 --> 01:09:34,849\nDo we do an SN&P trap?\n\n1351\n01:09:34,849 --> 01:09:36,910\nDo we deny the packet?\n\n1352\n01:09:36,910 --> 01:09:38,100\nDeny the connection?\n\n1353\n01:09:38,100 --> 01:09:39,150\nDeny the attacker?\n\n1354\n01:09:39,150 --> 01:09:42,580\nRight, we have all sorts of control\nover how you want to do that deny.\n\n1355\n01:09:42,580 --> 01:09:46,970\nAnd then down at the bottom, reset the TCP\nconnection, request block connection, and\n\n1356\n01:09:46,970 --> 01:09:48,330\nrequest block host, right?\n\n1357\n01:09:48,330 --> 01:09:50,850\nSo you pick and\nchoose what's gonna happen.\n\n1358\n01:09:50,850 --> 01:09:53,310\nThis one that I picked,\nthe default is just produce alert.\n\n1359\n01:09:53,310 --> 01:09:54,460\nThat's all it's gonna do.\n\n1360\n01:09:54,460 --> 01:09:57,820\nBut if I wanna do more, I can just go\nthrough and I can check, you know what,\n\n1361\n01:09:57,820 --> 01:10:01,620\nI wanna deny the packet and\ndeny some of these other ones.\n\n1362\n01:10:01,620 --> 01:10:05,410\nAnd notice that little note\nonly works if we're in line.\n\n1363\n01:10:05,410 --> 01:10:10,073\nAll these deny's are inline only,\nwe can't do them if we're out of band or\n\n1364\n01:10:10,073 --> 01:10:11,194\nif a deny, a IDS.\n\n1365\n01:10:13,275 --> 01:10:14,620\nNow.\n\n1366\n01:10:16,450 --> 01:10:18,420\nWell, on the exam and stuff,\n\n1367\n01:10:18,420 --> 01:10:21,950\nthe big thing we want to push here\nis that you can customize all this.\n\n1368\n01:10:21,950 --> 01:10:24,130\nOne of the problems is, it's a lot.\n\n1369\n01:10:24,130 --> 01:10:27,700\nThere are thousands of signatures, so\nyou're not normally gonna go in and\n\n1370\n01:10:27,700 --> 01:10:28,780\ncustomize all of these.\n\n1371\n01:10:28,780 --> 01:10:30,290\nYou're typically gonna hunt for\n\n1372\n01:10:30,290 --> 01:10:33,970\nspecific scenarios where you need to\noverride the default Cisco behavior.\n\n1373\n01:10:33,970 --> 01:10:36,950\nAnd then you need to be careful\nas you update your signatures and\n\n1374\n01:10:36,950 --> 01:10:39,630\nstuff to make sure that the settings\ndon't revert to some other value.\n\n1375\n01:10:39,630 --> 01:10:43,870\nAll right, so\nthat's kinda how the signatures work.\n\n1376\n01:10:43,870 --> 01:10:47,240\nAnd those are the actions that occur.\n\n1377\n01:10:47,240 --> 01:10:52,420\nThe other thing I need to mention is one\nof the things we see here in our readout.\n\n1378\n01:10:52,420 --> 01:10:56,420\nSo we've got what the signature is and\nwhat actions can it take.\n\n1379\n01:10:56,420 --> 01:10:59,770\nAnd then there's this column\nover here that says Engine.\n\n1380\n01:10:59,770 --> 01:11:02,120\nAll right.\nWhat the heck is the engine?\n\n1381\n01:11:02,120 --> 01:11:05,890\nWell, as the traffic passes\nthrough the router or firewall,\n\n1382\n01:11:05,890 --> 01:11:09,140\nit needs to get scanned and\n\n1383\n01:11:09,140 --> 01:11:13,660\nthere are different scanning engines for\nfinding different types of attacks.\n\n1384\n01:11:13,660 --> 01:11:17,380\nAnd so as we look,\nyou'll see things like flood hosed,\n\n1385\n01:11:17,380 --> 01:11:22,180\natomic IP String ICMP,\nsweep, service, right.\n\n1386\n01:11:22,180 --> 01:11:24,060\nEach of these are different engines.\n\n1387\n01:11:24,060 --> 01:11:25,830\nThere's actually about 11\n\n1388\n01:11:25,830 --> 01:11:26,750\ndifferent engines-\n>> Yeah.\n\n1389\n01:11:26,750 --> 01:11:31,450\n>> But on the exam, you'll only see\nthe five main ones which Ronnie and\n\n1390\n01:11:31,450 --> 01:11:34,750\nI listed during the break, right up here.\n\n1391\n01:11:34,750 --> 01:11:39,080\nSo here's the five main signature engines.\n\n1392\n01:11:39,080 --> 01:11:41,320\nThink of these as like antivirus software,\nright?\n\n1393\n01:11:41,320 --> 01:11:46,256\nWe're running five different antivirus\nsoftware on this router, or firewall, or\n\n1394\n01:11:46,256 --> 01:11:50,297\nwhatever, and each one is scanning for\ndifferent types of traffic.\n\n1395\n01:11:50,297 --> 01:11:53,260\n>> The atomic one that's listed\nhere really is the most simple.\n\n1396\n01:11:53,260 --> 01:11:54,550\nIt scans.\n\n1397\n01:11:54,550 --> 01:11:56,458\nEssentially the packet itself,\n\n1398\n01:11:56,458 --> 01:12:00,350\nand makes a determination based on\nthe actual simple packets here.\n\n1399\n01:12:00,350 --> 01:12:03,730\nSo you can take, for\nan example, ICMP and UDP here.\n\n1400\n01:12:03,730 --> 01:12:05,480\nThen go ahead and just scan that, and\n\n1401\n01:12:05,480 --> 01:12:09,660\nsay hey, here's the way we're gonna\ntreat this particular information.\n\n1402\n01:12:09,660 --> 01:12:13,910\n>> The name atomic comes from the fact\nthat it's sessionless protocols.\n\n1403\n01:12:13,910 --> 01:12:15,830\nWith IPMP, you send a ping out.\n\n1404\n01:12:15,830 --> 01:12:18,980\nIt's not like you've got TCP\nsequence numbers or whatever.\n\n1405\n01:12:18,980 --> 01:12:21,810\nIt's just a single packet\nout there on its own.\n\n1406\n01:12:21,810 --> 01:12:25,110\nSame thing with UDP, you're just\nthrowing that traffic out there.\n\n1407\n01:12:25,110 --> 01:12:31,220\nSo atomic engines will scan\nindividual packets that stand alone,\n\n1408\n01:12:31,220 --> 01:12:35,390\nnot a part of some greater conversation,\nand it is typically ICMP and UDP.\n\n1409\n01:12:36,680 --> 01:12:40,530\nNow the alternative would\nbe ones that were stable,\n\n1410\n01:12:40,530 --> 01:12:43,415\nthat did create a session and\ncarry on like that.\n\n1411\n01:12:43,415 --> 01:12:48,440\nSession-based protocols are usually\nidentifiable by what service they are,\n\n1412\n01:12:48,440 --> 01:12:51,440\nand that's where the service\nengine comes in.\n\n1413\n01:12:51,440 --> 01:12:55,007\nSo it scans particular protocols for\n\n1414\n01:12:55,007 --> 01:12:59,620\nconversation-related attacks, all right?\n\n1415\n01:12:59,620 --> 01:13:03,640\nIf I'm going to pull off a HTTP exploit,\n\n1416\n01:13:03,640 --> 01:13:07,750\nI open up the session,\nI get the web page, I craft a URL,\n\n1417\n01:13:07,750 --> 01:13:12,700\nor I do a sequel injection, and\nI provide it via an HTTP form.\n\n1418\n01:13:12,700 --> 01:13:15,480\nSo, you send that traffic that way.\n\n1419\n01:13:15,480 --> 01:13:20,260\nThe firewall, or router, or whatever is\nactually tracking that whole communication\n\n1420\n01:13:20,260 --> 01:13:23,350\nand putting it together to see\nif that attack is occurring.\n\n1421\n01:13:23,350 --> 01:13:28,520\nThis type of scan is different for\nevery protocol, so it might be\n\n1422\n01:13:30,340 --> 01:13:37,290\nHTTP, it might be FTP, or\nmore commonly SMTP, right, email attacks.\n\n1423\n01:13:37,290 --> 01:13:39,230\nYou see those a lot.\n\n1424\n01:13:39,230 --> 01:13:43,610\nNotice I'm not listing HTTPS or\nSSH or whatever.\n\n1425\n01:13:43,610 --> 01:13:44,430\nThose are encrypted.\n\n1426\n01:13:44,430 --> 01:13:45,390\nWe can't scan them.\n\n1427\n01:13:45,390 --> 01:13:47,160\n>> Right.\nYeah.\n\n1428\n01:13:47,160 --> 01:13:50,470\nThe string one that we have listed\nhere really does take a look inside of\n\n1429\n01:13:50,470 --> 01:13:54,610\nthe actual packets themselves, and\nthat looks for a particular string,\n\n1430\n01:13:54,610 --> 01:13:59,570\nlike it says, or a combination or\nthose picker words or patterns.\n\n1431\n01:13:59,570 --> 01:14:00,865\nI don't know how to describe it.\n\n1432\n01:14:00,865 --> 01:14:03,730\nYeah.\n>> Well, think of like if I'm gonna\n\n1433\n01:14:03,730 --> 01:14:07,520\ndo a shell exploit, and\nI'm trying to Telnet into a device or\n\n1434\n01:14:07,520 --> 01:14:11,980\nwhatever, well then it can scan the actual\nstrings that people are typing or\n\n1435\n01:14:11,980 --> 01:14:15,860\nthe URLs that they're typing, and\nit just looks for keywords, right?\n\n1436\n01:14:15,860 --> 01:14:19,400\nMost viruses have a name, and there's\na name given by the virus vendors, but\n\n1437\n01:14:19,400 --> 01:14:24,250\na lot of the virus writers will create\na name, and they'll say something like\n\n1438\n01:14:24,250 --> 01:14:27,060\nin their code, they'll have\nthe word code red or whatever.\n\n1439\n01:14:27,060 --> 01:14:28,880\nThat's the name of their virus.\n\n1440\n01:14:28,880 --> 01:14:30,970\nAnd so we can scan and\nlook for that string, and\n\n1441\n01:14:30,970 --> 01:14:34,765\ntry and identify it to find\nsomething that needs to be blocked.\n\n1442\n01:14:34,765 --> 01:14:35,337\n>> Right.\n\n1443\n01:14:35,337 --> 01:14:35,910\n>> All right.\n\n1444\n01:14:35,910 --> 01:14:40,630\nNow, when we stay string, that is\na string that is basically a word or\n\n1445\n01:14:40,630 --> 01:14:43,090\na phrase that's located together.\n\n1446\n01:14:43,090 --> 01:14:45,125\nWe do have the more advanced multi-string.\n\n1447\n01:14:46,490 --> 01:14:52,345\nSo it scans packets for\nrelated text strings.\n\n1448\n01:14:54,830 --> 01:14:57,985\nAnd this is useful when\nyou're dealing with malicious\n\n1449\n01:14:57,985 --> 01:15:01,425\ncode that's being loaded into\nweb pages like PHP exploits and\n\n1450\n01:15:01,425 --> 01:15:03,925\nstuff where it's not just\none string that does it.\n\n1451\n01:15:03,925 --> 01:15:06,545\nIt's actually a series of communications.\n\n1452\n01:15:06,545 --> 01:15:09,245\nWe see this in email a lot with email\nexploits where it's a series of\n\n1453\n01:15:09,245 --> 01:15:12,230\ncommunications that\ncombined are the attack.\n\n1454\n01:15:12,230 --> 01:15:13,679\nTaken individually, they're innocuous.\n\n1455\n01:15:13,679 --> 01:15:17,986\nThey don't look like malicious traffic,\nall right.\n\n1456\n01:15:17,986 --> 01:15:18,775\nAnd that leaves my favorite one.\n\n1457\n01:15:18,775 --> 01:15:19,360\n>> Yes.\n\n1458\n01:15:19,360 --> 01:15:21,085\n>> Other.\n\n1459\n01:15:21,085 --> 01:15:22,220\n>> [LAUGH] This is everything else.\n\n1460\n01:15:22,220 --> 01:15:23,933\n>> Everything else, yeah.\n\n1461\n01:15:23,933 --> 01:15:28,597\nThere are attacks that are out there that\ndon't fit the molds listed in the above\n\n1462\n01:15:28,597 --> 01:15:33,189\nengines, and so when Cisco has that,\nthey will write a specific signature for\n\n1463\n01:15:33,189 --> 01:15:36,252\nthat attack that's unique\nto everything else, and\n\n1464\n01:15:36,252 --> 01:15:38,572\nthey just throw it in the other engine.\n\n1465\n01:15:38,572 --> 01:15:43,406\nSo this scans traffic that does not\n\n1466\n01:15:43,406 --> 01:15:47,935\nmatch normal engine patterns.\n\n1467\n01:15:47,935 --> 01:15:51,775\nSo it's just a little different than\nwhat we're used to in the other ones.\n\n1468\n01:15:51,775 --> 01:15:53,575\n>> Yeah.\n>> All right, so\n\n1469\n01:15:53,575 --> 01:15:54,365\nthose are our main engines.\n\n1470\n01:15:54,365 --> 01:15:55,815\nThere are others right, and\n\n1471\n01:15:55,815 --> 01:16:00,915\nI think we saw that in the IME that there\nwere some other ones that were out there.\n\n1472\n01:16:00,915 --> 01:16:02,862\nHere's string ICMP.\n\n1473\n01:16:02,862 --> 01:16:05,655\nIt's the string engine specifically for\nICMP.\n\n1474\n01:16:05,655 --> 01:16:09,290\nNow, it is still being scanned\nby the atomic engine, also, so\n\n1475\n01:16:09,290 --> 01:16:12,308\nyou'll see here's the atomic IP for\nping of death,\n\n1476\n01:16:12,308 --> 01:16:16,373\nso more than one engine being used for\nICMP attacks that are out there.\n\n1477\n01:16:16,373 --> 01:16:18,780\nHere's service, service generic.\n\n1478\n01:16:18,780 --> 01:16:23,109\nSweep, that's looking for a series of\naccess on multiple ports to identify when\n\n1479\n01:16:23,109 --> 01:16:26,163\nsomebody's doing a ping sweep or\na port scan, right, so\n\n1480\n01:16:26,163 --> 01:16:28,279\nthat's a special engine for that one.\n\n1481\n01:16:28,279 --> 01:16:32,982\nIt's not one of the main five that we\nneed to know for the exam, though.\n\n1482\n01:16:32,982 --> 01:16:34,720\nAll right.\n\n1483\n01:16:34,720 --> 01:16:39,553\nSo those are some of the responses we can\ntake to the traffic, when we identify it,\n\n1484\n01:16:39,553 --> 01:16:42,680\nand the engines that we use\nto identify the traffic.\n\n1485\n01:16:42,680 --> 01:16:44,730\nNow, the engines, you don't install those.\n\n1486\n01:16:44,730 --> 01:16:46,880\nThey're a part of your router or\nfirewall or\n\n1487\n01:16:46,880 --> 01:16:50,680\na part of that IPS, and so\nyou're just loading the definitions with\n\n1488\n01:16:50,680 --> 01:16:53,570\nsignature files that they use\nto identify their attacks.\n\n1489\n01:16:53,570 --> 01:16:54,360\n>> Yeah.\n\n1490\n01:16:54,360 --> 01:16:57,560\nNow, these things can go off constantly,\nright, especially if we have these alerts,\n\n1491\n01:16:57,560 --> 01:16:59,800\nespecially if these attacks are going on.\n\n1492\n01:16:59,800 --> 01:17:03,220\nThe problem that we have here is\nthe idea of monitoring, right?\n\n1493\n01:17:03,220 --> 01:17:05,180\nYou have to have vigilance\nat doing this stuff.\n\n1494\n01:17:05,180 --> 01:17:08,180\nIt's not enough just to set it up and\ngo okay, I've set it up,\n\n1495\n01:17:08,180 --> 01:17:11,010\nI've told it exactly what to do,\nI'm gonna walk away from it.\n\n1496\n01:17:11,010 --> 01:17:14,610\nWe have to be now taking a look at\nthe idea of monitoring here for\n\n1497\n01:17:14,610 --> 01:17:16,744\nus is what we wanna take a look at.\n\n1498\n01:17:16,744 --> 01:17:20,250\n>> Yeah, and if you have a single device,\n\n1499\n01:17:20,250 --> 01:17:23,110\nyou can monitor right from that single\ndevice, and you're done, right?\n\n1500\n01:17:23,110 --> 01:17:25,720\nBut if you have tons of devices,\n\n1501\n01:17:25,720 --> 01:17:29,638\nwell you're gonna need some type of\ncentralized repository for this data, and\n\n1502\n01:17:29,638 --> 01:17:32,270\nthere's some really expensive appliances\nout there like the Cisco MARS boxes\n\n1503\n01:17:32,270 --> 01:17:35,600\nthat'll do it for you, or you can\nuse software like what I'm in here.\n\n1504\n01:17:35,600 --> 01:17:39,270\nThis is the Cisco IME and you'll see that,\nas far as working with it,\n\n1505\n01:17:39,270 --> 01:17:41,750\nit looks like the Cisco\nconfiguration professionally.\n\n1506\n01:17:41,750 --> 01:17:44,890\nI can go into my sensor setups and\nmy configurations and stuff, but\n\n1507\n01:17:44,890 --> 01:17:48,140\nthe real power of the IME is\nnot the configuration side.\n\n1508\n01:17:48,140 --> 01:17:49,950\nIt's the event monitoring.\n\n1509\n01:17:49,950 --> 01:17:53,700\nYou can go into the event monitoring\npiece, and you can create\n\n1510\n01:17:53,700 --> 01:17:57,250\nreports based on whatever it is that\nyou want to be able to get data.\n\n1511\n01:17:57,250 --> 01:17:59,390\nIn fact, event monitoring here,\nthis is really used for\n\n1512\n01:17:59,390 --> 01:18:04,070\nshowing me my live data or\ncustom queries, but if I have a report,\n\n1513\n01:18:04,070 --> 01:18:08,810\nsome data that I'm pulling all the time,\nyou can define it here under Reports, and\n\n1514\n01:18:08,810 --> 01:18:13,250\nyou can pull it up, and you basically\nhave this canned query already in place.\n\n1515\n01:18:13,250 --> 01:18:17,880\nSo if I wanna see the top ten, let's see,\n\n1516\n01:18:17,880 --> 01:18:20,700\nyou'll see like the top ten attackers,\ntop ten victims.\n\n1517\n01:18:20,700 --> 01:18:24,750\nHere's what I want,\ntop ten signatures in the last one hour.\n\n1518\n01:18:24,750 --> 01:18:27,860\nOkay, so\nI want to see what attacks are being\n\n1519\n01:18:27,860 --> 01:18:31,290\npulled off the most\ncommonly on my network.\n\n1520\n01:18:31,290 --> 01:18:31,960\nAll right.\n\n1521\n01:18:31,960 --> 01:18:33,430\nAnd so I'm gonna go ahead and\ngenerate that.\n\n1522\n01:18:33,430 --> 01:18:39,080\nAnd it's gonna lay it out for me here so\nI can see what is the most common, right?\n\n1523\n01:18:39,080 --> 01:18:42,000\nAnd it's laying out in a way\nthat's kinda hard for me to see.\n\n1524\n01:18:42,000 --> 01:18:45,060\nCan I not resize that top window?\n\n1525\n01:18:45,060 --> 01:18:45,890\nWell, whatever.\n\n1526\n01:18:45,890 --> 01:18:48,100\nThe pie chart is nice but\nnot all that useful.\n\n1527\n01:18:48,100 --> 01:18:52,883\nSo down here I can see that the Kelvir\nWorm appears to be taking the record with\n\n1528\n01:18:52,883 --> 01:18:56,122\nover 14,000 instances\nin the last one hour.\n\n1529\n01:18:56,122 --> 01:19:00,131\nSo let me resize my window so\nwe can see all that.\n\n1530\n01:19:00,131 --> 01:19:01,740\nThere.\n\n1531\n01:19:01,740 --> 01:19:06,990\nSo I can see down here at the bottom that\nthe Kelvir Worm is weighing in at 14,000.\n\n1532\n01:19:06,990 --> 01:19:07,831\nYeah, I'll zoom in.\n\n1533\n01:19:07,831 --> 01:19:13,280\nAt 14,916 instances in the last hour,\nand that's the Kelvir Worm.\n\n1534\n01:19:13,280 --> 01:19:15,130\nSo, how is that useful to me?\n\n1535\n01:19:15,130 --> 01:19:19,115\nWell, I need to double check that\nall of my IPSs have a signature for\n\n1536\n01:19:19,115 --> 01:19:22,855\nthe Kelvir worm, and\nI might want to adjust its response.\n\n1537\n01:19:22,855 --> 01:19:25,525\nInstead of logging or whatever, I might\nwant to change it to be a little more\n\n1538\n01:19:25,525 --> 01:19:28,315\naggressive and reset or\nwhatever, all right?\n\n1539\n01:19:28,315 --> 01:19:32,150\nThe other thing is, I can start to\ncheck my workstations and servers, and\n\n1540\n01:19:32,150 --> 01:19:34,790\nI can look to see whether their HIPs,\n\n1541\n01:19:34,790 --> 01:19:38,550\nthe host based intrusion prevention,\nis updated to protect from that worm, and\n\n1542\n01:19:38,550 --> 01:19:40,891\nI can start to scan them to see\nif any of them already got it.\n\n1543\n01:19:40,891 --> 01:19:42,480\nMaybe it made it through, right?\n\n1544\n01:19:42,480 --> 01:19:46,360\nAt 14,000 attempts in an hour,\nit is possible that some got through.\n\n1545\n01:19:46,360 --> 01:19:48,525\n>> Yeah.\n>> After that I got the Nachi Worm, ZOTOB,\n\n1546\n01:19:48,525 --> 01:19:51,428\nand different ones, so\nyou can kind of go down that list and\n\n1547\n01:19:51,428 --> 01:19:54,351\nyou can look at them and\nsee which ones are the most common.\n\n1548\n01:19:54,351 --> 01:19:56,633\nJust because they're on this list,\ndoesn't mean they got through, right?\n\n1549\n01:19:56,633 --> 01:19:59,205\nIt means most of these got blocked,\nthey were identified.\n\n1550\n01:19:59,205 --> 01:20:02,455\nBut helps me to see what the biggest\nthreats are on my network.\n\n1551\n01:20:02,455 --> 01:20:05,950\nAnd those threats change from day to day,\nright?\n\n1552\n01:20:05,950 --> 01:20:08,540\nSo one day it might be one\nparticular virus that's big, but\n\n1553\n01:20:08,540 --> 01:20:09,780\nthe next day it might\nbe something different.\n\n1554\n01:20:09,780 --> 01:20:15,920\nSo you can get this Is kind of view to\nsee what changes over time, and all that.\n\n1555\n01:20:15,920 --> 01:20:16,510\n>> Yeah.\n\n1556\n01:20:16,510 --> 01:20:20,140\nSo when it comes down to event\nmonitoring and reporting, right?\n\n1557\n01:20:20,140 --> 01:20:24,280\nThe event monitoring is useful for us when\nwe're looking at real time monitoring.\n\n1558\n01:20:24,280 --> 01:20:27,530\nWe're taking look at it right then and\nthere, and we need that information.\n\n1559\n01:20:27,530 --> 01:20:31,950\nBut reports are where we tend to generate,\nagain, over time.\n\n1560\n01:20:31,950 --> 01:20:35,370\nIn other words, this is archived\nmaterial a lot of times and\n\n1561\n01:20:35,370 --> 01:20:37,500\nnow we can take to actually\nmake other decisions.\n\n1562\n01:20:37,500 --> 01:20:39,500\nWe may have to modify our policy.\n\n1563\n01:20:39,500 --> 01:20:41,370\nWe may have to actually go in there and\ncheck and\n\n1564\n01:20:41,370 --> 01:20:44,070\nsee if we need to update other\nthings that are going on.\n\n1565\n01:20:44,070 --> 01:20:47,470\nSo make sure you know the difference here\nbetween the event monitoring side and\n\n1566\n01:20:47,470 --> 01:20:49,400\nthe reporting side as well.\n\n1567\n01:20:49,400 --> 01:20:53,810\n>> Now you can do all this on\nan individual device using the SDM or\n\n1568\n01:20:53,810 --> 01:20:58,220\nASPM, CCP whatever management tool it is\nyou use to control your router, firewall,\n\n1569\n01:20:58,220 --> 01:21:00,110\nor sensor.\n\n1570\n01:21:00,110 --> 01:21:02,870\nBut it's just the data on that one device.\n\n1571\n01:21:02,870 --> 01:21:05,165\nSo if you want that big picture, right?\n\n1572\n01:21:05,165 --> 01:21:09,410\nAll your devices and all your information,\nthat you need something centralized and\n\n1573\n01:21:09,410 --> 01:21:14,980\nthe IME is designed to be\nan inexpensive solution for\n\n1574\n01:21:14,980 --> 01:21:18,310\nmonitoring a small collection of devices.\n\n1575\n01:21:18,310 --> 01:21:20,890\nIf you've got even more,\nthen that's where Cisco Works comes in.\n\n1576\n01:21:20,890 --> 01:21:24,040\nAnd that's that big management package\nthey have, which is pretty pricey, but\n\n1577\n01:21:24,040 --> 01:21:26,010\nallows you to control all those devices.\n\n1578\n01:21:26,010 --> 01:21:27,900\nSo just keep that in mind.\n\n1579\n01:21:27,900 --> 01:21:29,950\nThat's where a lot of\nthat power comes from.\n\n1580\n01:21:29,950 --> 01:21:32,310\nThe other thing though is if\nwe come back to our homepage,\n\n1581\n01:21:32,310 --> 01:21:36,880\nyou can keep track of other things\non here like the sensor health, and\n\n1582\n01:21:36,880 --> 01:21:40,130\nthat's real important,\ncuz you'll see some of these are critical.\n\n1583\n01:21:40,130 --> 01:21:42,020\nAnd if I look at why they are critical.\n\n1584\n01:21:42,020 --> 01:21:45,820\nUnder license expiration,\nI can see their licensing.\n\n1585\n01:21:45,820 --> 01:21:50,100\nThe IPS are only effective if\nthey have a current license.\n\n1586\n01:21:50,100 --> 01:21:54,600\nSo, I'll see many of these devices still\nhave a license that's good for 275 days.\n\n1587\n01:21:54,600 --> 01:21:57,430\nSo, they will expire this year,\nbut it's later.\n\n1588\n01:21:57,430 --> 01:22:00,960\nAnd then I see other ones that\neither don't have a license or\n\n1589\n01:22:00,960 --> 01:22:02,390\nthey may not have\na license that's expired.\n\n1590\n01:22:02,390 --> 01:22:06,157\nI think we've got at\nleast one that's expired.\n\n1591\n01:22:06,157 --> 01:22:10,778\n>> There's one that says critical but\nI don't know if that.\n\n1592\n01:22:10,778 --> 01:22:14,825\n>> Actually I think these ones that have\nno license are actually just expired.\n\n1593\n01:22:14,825 --> 01:22:18,025\nSo let's go to our licensing tab and,\noh yeah.\n\n1594\n01:22:18,025 --> 01:22:21,426\nYep.\nSo, so this one it does have a license,\n\n1595\n01:22:21,426 --> 01:22:26,648\nit's just expired so\nthe signatures that it got are from 2008,\n\n1596\n01:22:26,648 --> 01:22:28,677\nso that's nice current.\n\n1597\n01:22:28,677 --> 01:22:30,460\nBut that's it.\nThe license status,\n\n1598\n01:22:30,460 --> 01:22:32,400\nthere's no license because it's expired.\n\n1599\n01:22:32,400 --> 01:22:34,940\nIt was getting definitions now it's not.\n\n1600\n01:22:34,940 --> 01:22:38,840\nSo I would need to go and\nupdate that and then I'd be in business.\n\n1601\n01:22:38,840 --> 01:22:39,530\nRight.\n\n1602\n01:22:39,530 --> 01:22:43,290\nThe other cool thing is, remember I said\nthat Cisco devices can talk to each other.\n\n1603\n01:22:43,290 --> 01:22:47,690\nThat activity of talking to each other,\nthat's called global correlation.\n\n1604\n01:22:47,690 --> 01:22:50,750\nAnd that's where if you've got all\nCisco equipment, they can talk,\n\n1605\n01:22:50,750 --> 01:22:52,210\nthey can exchange information.\n\n1606\n01:22:52,210 --> 01:22:54,990\nYou do need a controller to be\nable to manage all that, and\n\n1607\n01:22:54,990 --> 01:22:58,020\nthe controller is called the Cisco MARS,\nM-A-R-S.\n\n1608\n01:22:58,020 --> 01:22:59,990\nAnd it's an appliance that will manage.\n\n1609\n01:22:59,990 --> 01:23:02,380\nIt will reach out to your switches,\nrouters, firewalls,\n\n1610\n01:23:02,380 --> 01:23:04,233\nips sensors the whole shebang.\n\n1611\n01:23:04,233 --> 01:23:07,860\nAnd start to exchange the security\ninformation in a meaningful way,\n\n1612\n01:23:07,860 --> 01:23:11,220\ntaking actions based on\nthe information that it gets.\n\n1613\n01:23:11,220 --> 01:23:15,120\nAnd so if you've got that you'll also\nsee the global correlation health and\n\n1614\n01:23:15,120 --> 01:23:18,330\nthis is where we can see if that\ninformation is being reported or not.\n\n1615\n01:23:18,330 --> 01:23:21,140\nNotice how a lot of my devices\nhere it say not supported.\n\n1616\n01:23:21,140 --> 01:23:27,200\nBut if I take this sensor and I take\na look at its information, I can see that.\n\n1617\n01:23:27,200 --> 01:23:29,345\nOh, well, it's supported,\nbut it's not turned on.\n\n1618\n01:23:29,345 --> 01:23:30,310\n>> [LAUGH]\n>> So\n\n1619\n01:23:30,310 --> 01:23:34,680\nyou'll see where it's got a time\nsince last update, never.\n\n1620\n01:23:34,680 --> 01:23:37,920\nBut update server address and\nupdate server.\n\n1621\n01:23:37,920 --> 01:23:41,610\nThat's where we specify who that\ncentral governing entity is, and\n\n1622\n01:23:41,610 --> 01:23:43,590\nit'll normally be like a Cisco MARS box.\n\n1623\n01:23:43,590 --> 01:23:46,780\nAnd it's what's correlating that data and\nkeeping it together.\n\n1624\n01:23:46,780 --> 01:23:51,440\nThat gives you the best visibility\nthroughout your network because sometimes\n\n1625\n01:23:51,440 --> 01:23:55,540\na router by itself may see\ntraffic that looks normal, but\n\n1626\n01:23:55,540 --> 01:23:57,490\nit's actually an attack and\nit doesn't know it.\n\n1627\n01:23:57,490 --> 01:24:00,400\nA switch might see traffic,\nby itself it looks normal,\n\n1628\n01:24:00,400 --> 01:24:01,960\nbut it's actually part of an attack.\n\n1629\n01:24:01,960 --> 01:24:06,080\nBut if the two talked and combined their\ndata it may become obvious that it is\n\n1630\n01:24:06,080 --> 01:24:08,980\nan attack and that's the real\npower of sharing that information.\n\n1631\n01:24:08,980 --> 01:24:09,480\n>> Yeah.\n\n1632\n01:24:09,480 --> 01:24:13,190\nThis even extends even beyond\nthe enterprise itself, right.\n\n1633\n01:24:13,190 --> 01:24:17,270\nWe can actually go in and Cisco\nactually runs their own entire S.I.O.\n\n1634\n01:24:17,270 --> 01:24:21,040\nthe Security Information Operations.\n\n1635\n01:24:21,040 --> 01:24:25,140\nA cloud that's actually out there that can\nreally help to feed that system back into\n\n1636\n01:24:25,140 --> 01:24:29,180\nyour network again and\nit does it for the entire world.\n\n1637\n01:24:29,180 --> 01:24:29,710\n>> Yeah.\n\n1638\n01:24:29,710 --> 01:24:32,820\nThat's how they straighten their\nsignatures, the signature data base.\n\n1639\n01:24:32,820 --> 01:24:34,360\n>> Yeah.\n>> If they put signatures for\n\n1640\n01:24:34,360 --> 01:24:37,850\nevery known attack in there,\n>> The signature files would be massive\n\n1641\n01:24:37,850 --> 01:24:39,590\nand you wouldn't have enough memory for\nit.\n\n1642\n01:24:39,590 --> 01:24:43,860\nSo everyday they're running analyses and\nthey're creating signature files that\n\n1643\n01:24:43,860 --> 01:24:47,930\nare very small that contain predominant or\nprevalent attacks that are out\n\n1644\n01:24:47,930 --> 01:24:51,310\nthere on the Internet, out in the real\nworld that we need to protect from.\n\n1645\n01:24:51,310 --> 01:24:55,010\nAnd so as they add new ones in, they\nare also removing some old ones, you know?\n\n1646\n01:24:55,010 --> 01:24:59,030\nCuz there's viruses out there like the\nMichelangelo virus that was a really big\n\n1647\n01:24:59,030 --> 01:25:05,020\ndeal in 1989, but\nhere we are 30 years later and\n\n1648\n01:25:05,020 --> 01:25:08,895\nyou really can't even get that virus\nanymore, and so no sense keeping that\n\n1649\n01:25:08,895 --> 01:25:11,385\nsignature around they prune that\nout to make room for new stuff.\n\n1650\n01:25:11,385 --> 01:25:12,465\nAnd that is happening everyday.\n\n1651\n01:25:12,465 --> 01:25:14,487\n>> Come on, you still have your floppy\ndrive around somewhere and you know it.\n\n1652\n01:25:14,487 --> 01:25:14,987\n[LAUGH].\n>> That's right.\n\n1653\n01:25:14,987 --> 01:25:16,728\nIt probably is.\n\n1654\n01:25:16,728 --> 01:25:17,775\nThat one was a pretty bad one.\n\n1655\n01:25:17,775 --> 01:25:19,159\nAnd it spread by\n\n1656\n01:25:19,159 --> 01:25:19,981\nfoot.\nThat's\n\n1657\n01:25:19,981 --> 01:25:20,911\nthe amazing part it.\n>> Yeah.\n\n1658\n01:25:20,911 --> 01:25:22,296\n>> Not like today's viruses.\n\n1659\n01:25:22,296 --> 01:25:23,585\n>> No.\n\n1660\n01:25:23,585 --> 01:25:24,475\n>> Anyhow.\n\n1661\n01:25:24,475 --> 01:25:27,315\nSo keep that in mind as you\nstart to deploy IPS and\n\n1662\n01:25:27,315 --> 01:25:30,815\nIDS that there's a lot of\ndifferent systems involved,\n\n1663\n01:25:30,815 --> 01:25:35,790\na lot of different pieces and\nmanaging those together in one big entity.\n\n1664\n01:25:35,790 --> 01:25:37,220\nIt can really be handy.\n\n1665\n01:25:37,220 --> 01:25:40,790\nSo have something like the IME\nto do that is pretty useful.\n\n1666\n01:25:41,860 --> 01:25:44,170\nAll right, well Ronnie we\ngot a couple little odds and\n\n1667\n01:25:44,170 --> 01:25:46,000\nends that we haven't talked about yet.\n\n1668\n01:25:46,000 --> 01:25:49,250\nBut I think we've actually\ncovered the majority of it.\n\n1669\n01:25:49,250 --> 01:25:52,850\nLet's see, I know we're out of time on\nthis segment but you wanna know something,\n\n1670\n01:25:52,850 --> 01:25:55,560\nI think we've actually covered everything.\n\n1671\n01:25:55,560 --> 01:25:59,840\n>> We've talked about monitoring system,\nlog SDs, signature engines and signatures.\n\n1672\n01:26:02,280 --> 01:26:03,580\n>> I think we've covered it all.\n\n1673\n01:26:03,580 --> 01:26:05,100\n>> That is basically it.\n\n1674\n01:26:05,100 --> 01:26:06,820\nA couple other things to remember.\n\n1675\n01:26:06,820 --> 01:26:10,810\nWe did show configuring\nthe IOS using the CCP.\n\n1676\n01:26:10,810 --> 01:26:12,270\nThat's great for a single device.\n\n1677\n01:26:12,270 --> 01:26:15,060\nWe also show the IME,\nwhich is a little bit beyond what\n\n1678\n01:26:15,060 --> 01:26:17,830\nthey specifically call for, but\nit's a little more real world.\n\n1679\n01:26:17,830 --> 01:26:18,790\nSo just be familiar with that,\n\n1680\n01:26:18,790 --> 01:26:23,660\nthat on the exam, you're more than\nlikely going to see that CCP layout.\n\n1681\n01:26:23,660 --> 01:26:26,670\nSo let me go back to that real quick just\nto make sure, but it's familiar with it.\n\n1682\n01:26:26,670 --> 01:26:29,230\nIt's basically the same as\nwhat we have in the IME,\n\n1683\n01:26:29,230 --> 01:26:33,090\nexcept it's just arranged\na little bit differently.\n\n1684\n01:26:33,090 --> 01:26:34,680\nSo you can go through and spot things.\n\n1685\n01:26:34,680 --> 01:26:38,710\nYou'll have your attacks here\nfiltered by what types of attacks and\n\n1686\n01:26:38,710 --> 01:26:40,610\nthen you modifying them.\n\n1687\n01:26:40,610 --> 01:26:44,670\nThe actions that they take,\nit's the same here as it was in the IME.\n\n1688\n01:26:44,670 --> 01:26:45,640\nThe difference was in the IME.\n\n1689\n01:26:45,640 --> 01:26:47,930\nI could show you a full\nsignature data base versus here.\n\n1690\n01:26:47,930 --> 01:26:49,710\nSo just keep that in mind.\n\n1691\n01:26:49,710 --> 01:26:52,610\nYou also have your security dashboard\nwhere you can see things that\n\n1692\n01:26:52,610 --> 01:26:54,780\nare currently active on your router.\n\n1693\n01:26:54,780 --> 01:26:57,730\nSome of the things that might\nbe getting triggered and so on.\n\n1694\n01:26:57,730 --> 01:27:00,200\nAnd you've got this\nupdate top threats list,\n\n1695\n01:27:00,200 --> 01:27:03,830\nwhere it'll actually reach out to Cisco\nand get what are the current ones.\n\n1696\n01:27:03,830 --> 01:27:05,800\nI don't know if that will\nwork without a signature.\n\n1697\n01:27:07,350 --> 01:27:08,820\nOr it'll just erase what's in there.\n\n1698\n01:27:08,820 --> 01:27:11,810\n>> And then scroll that, SDF there.\n\n1699\n01:27:11,810 --> 01:27:16,490\n>> Yeah, see, I've already loaded it, but\nwithout a subscription it won't do that.\n\n1700\n01:27:16,490 --> 01:27:18,630\nSo anyhow you go out and get that update.\n\n1701\n01:27:18,630 --> 01:27:20,573\nYou'll get that information, it is useful.\n\n1702\n01:27:20,573 --> 01:27:25,160\nThey also have an IPS migration tab that\nyou can use to migrate your IPS setting.\n\n1703\n01:27:25,160 --> 01:27:28,470\nSo if you're moving from\nan appliance to a firewall or\n\n1704\n01:27:28,470 --> 01:27:31,640\nfrom a firewall to an appliance you\ndon't have to reinvent the wheel.\n\n1705\n01:27:31,640 --> 01:27:34,450\nIf you've customized a lot\nof alerts you'll really\n\n1706\n01:27:34,450 --> 01:27:35,280\nappreciate that-\n>> Oh, yeah.\n\n1707\n01:27:35,280 --> 01:27:37,890\n>> Because you don't want to have to go\nthrough and re-enter all that stuff in.\n\n1708\n01:27:37,890 --> 01:27:40,294\nSo you do have that functionality.\n\n1709\n01:27:40,294 --> 01:27:42,214\nAll right.\n\n1710\n01:27:42,214 --> 01:27:45,373\nThat's really about it.\n\n1711\n01:27:45,373 --> 01:27:46,212\nIf you can think of anything else.\n\n1712\n01:27:46,212 --> 01:27:47,376\n>> No.\n\n1713\n01:27:47,376 --> 01:27:50,568\nThe only other thing worth mentioning\nis on host-based intrusion\n\n1714\n01:27:50,568 --> 01:27:52,000\nprevention systems or HIPS.\n\n1715\n01:27:53,790 --> 01:27:58,280\nIn the real world we think, oh they're\ntalking about Symantec antivirus, or\n\n1716\n01:27:58,280 --> 01:28:01,570\nMicrosoft Security\nEssentials/Forefront/WindowsDefender,\n\n1717\n01:28:01,570 --> 01:28:06,430\nwhatever they call it this year,\nand McAfee antivirus.\n\n1718\n01:28:06,430 --> 01:28:07,880\nYou've got Trend Micro.\n\n1719\n01:28:07,880 --> 01:28:09,790\nYou know all those different,\nwe think of those products, and\n\n1720\n01:28:09,790 --> 01:28:13,120\na lot of those are host-based\nintrusion prevention.\n\n1721\n01:28:13,120 --> 01:28:17,700\nCisco does actually have their own,\nthe Cisco Clean Access Agent or whatever.\n\n1722\n01:28:17,700 --> 01:28:21,931\nHost-based, here let's just do Cisco HIPS.\n\n1723\n01:28:21,931 --> 01:28:25,759\nLet's see if I can find it real quick.\n\n1724\n01:28:26,760 --> 01:28:29,440\nThey kinda go back and forth on it.\n\n1725\n01:28:29,440 --> 01:28:31,080\nHere we go, Cisco Security Agent, CSA.\n\n1726\n01:28:32,260 --> 01:28:32,914\nThere we go.\n\n1727\n01:28:32,914 --> 01:28:35,100\nSo, Cisco does have their own HIPS.\n\n1728\n01:28:35,100 --> 01:28:38,250\nThey actually license their\nengines from Trend Micro, so\n\n1729\n01:28:38,250 --> 01:28:41,702\nit's technically Trend Micro antivirus,\nbut it is branded Cisco.\n\n1730\n01:28:41,702 --> 01:28:46,700\nAnd so on the exam, if you do see any kind\nof HIPS stuff, it'll normally be really\n\n1731\n01:28:46,700 --> 01:28:51,070\ngeneric, not referring to a single vendor,\nor if it does, if it gets specific and\n\n1732\n01:28:51,070 --> 01:28:54,980\nshows you a screen, it'll typically\nbe from the Cisco Security Agent.\n\n1733\n01:28:54,980 --> 01:28:56,750\nBut you have to be careful with the CSA.\n\n1734\n01:28:56,750 --> 01:28:57,990\nThey end-of-lifed it.\n\n1735\n01:28:57,990 --> 01:29:00,290\nAnd I don't know if we\nreached the end of life yet,\n\n1736\n01:29:00,290 --> 01:29:03,250\nso Cisco was gonna stop selling it soon.\n\n1737\n01:29:03,250 --> 01:29:07,340\nBut you'll see here where they make it for\nWindows, Linux, Solaris, and so\n\n1738\n01:29:07,340 --> 01:29:09,150\nyou can license it right from them.\n\n1739\n01:29:09,150 --> 01:29:12,750\nIt is effectivelyTrend Micro\nthough under the hood.\n\n1740\n01:29:12,750 --> 01:29:15,550\nBut not a lot of\n\n1741\n01:29:15,550 --> 01:29:19,390\norganizations are running it because\nit is kind of being end-of-lifed soon.\n\n1742\n01:29:19,390 --> 01:29:24,360\nBut, Cisco does have their own HIPS,\nand it would basically\n\n1743\n01:29:24,360 --> 01:29:29,350\ntake the place of McAfee Total Secure or\nwhatever that thing is called.\n\n1744\n01:29:30,650 --> 01:29:33,100\nSo all right,\nwell I guess that's about it.\n\n1745\n01:29:33,100 --> 01:29:34,380\nSo we'll go ahead and\nwrap it up from there.\n\n1746\n01:29:34,380 --> 01:29:35,830\nCan you think of anything else Ronnie?\n\n1747\n01:29:35,830 --> 01:29:36,960\n>> I cannot.\n\n1748\n01:29:36,960 --> 01:29:37,630\nYeah.\n\n1749\n01:29:37,630 --> 01:29:40,940\n>> All right, well ladies and\ngentlemen, as always, if you have any\n\n1750\n01:29:40,940 --> 01:29:44,790\nquestions on this, live during the show\nyou can go to itpro.tv/live, and\n\n1751\n01:29:44,790 --> 01:29:47,530\nyou'll see the chat room\nright beneath the video.\n\n1752\n01:29:47,530 --> 01:29:49,240\nYou can post your\nquestions during the show.\n\n1753\n01:29:49,240 --> 01:29:51,880\nWe monitor and answer and try to make\nsure everything gets covered for you.\n\n1754\n01:29:51,880 --> 01:29:54,790\nIf you're watching this show\nrecorded after the fact,\n\n1755\n01:29:54,790 --> 01:29:57,060\nobviously the live chat's\nnot going to help you much.\n\n1756\n01:29:57,060 --> 01:30:01,240\nSo, take advantage of the Q&A\nsection on the ITProTV website.\n\n1757\n01:30:01,240 --> 01:30:05,130\nOn the top of every page is a link that\nsays Q&A, and when you click on that it'll\n\n1758\n01:30:05,130 --> 01:30:07,890\ngo to our questions and answers field\nwhere you can post your questions and\n\n1759\n01:30:07,890 --> 01:30:09,710\nwe, again, monitor and answer.\n\n1760\n01:30:09,710 --> 01:30:12,701\nSo, we wanna make sure you guys get\nanswers to your questions, that when you\n\n1761\n01:30:12,701 --> 01:30:16,050\ngo to the testing booth you're going in\nwith answers, not going in with questions.\n\n1762\n01:30:16,050 --> 01:30:17,650\nThat's important to us.\n\n1763\n01:30:17,650 --> 01:30:18,800\nTake advantage of that resource.\n\n1764\n01:30:18,800 --> 01:30:19,460\nIt is there for you.\n\n1765\n01:30:20,690 --> 01:30:23,940\nAll right, well signing off for\nITProTV, I'm your host Don Pezet.\n\n1766\n01:30:23,940 --> 01:30:25,060\n>> And I'm Ronnie Wong.\n\n1767\n01:30:25,060 --> 01:30:25,949\n>> And we'll see you next time.\n\n1768\n01:30:25,949 --> 01:30:35,949\n[MUSIC]\n\n",
          "vimeoId": "87500180"
        }
      ],
      "title": "Cisco IPS"
    },
    {
      "episodes": [
        {
          "description": "A Virtual Private Network (VPN) is a tool that helps secure traffic passing across untrusted networks. Viewers will hear about encryption methodologies and the basic concepts of remote access and site-to-site virtual private networks (VPN) as well as see implementations of an IPSec VPN tunnel on Cisco routers and the configuring of an SSL VPN on a Cisco ASA.",
          "length": "6272",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/iins/011-Virtual-Private-Networks.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/iins/011-Virtual-Private-Networks-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/iins/011-Virtual-Private-Networks-sm.jpg",
          "title": "Virtual Private Networks",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:15,289 --> 00:00:22,648\n[NOISE]\n\n3\n00:00:22,648 --> 00:00:33,623\n[MUSIC]\n\n4\n00:00:33,623 --> 00:00:35,942\nAll right, good morning,\ngood afternoon and good evening,\n\n5\n00:00:35,942 --> 00:00:37,781\nand welcome back to another\nepisode of ITProTV.\n\n6\n00:00:37,781 --> 00:00:40,170\nI'm your host, Don Pezet,\ntoday with Mr. Ronnie Wong.\n\n7\n00:00:40,170 --> 00:00:41,380\nHow's it going Ronnie?\n\n8\n00:00:41,380 --> 00:00:42,910\n>> I'm deeply saddened.\n\n9\n00:00:42,910 --> 00:00:44,900\n>> Oh.\n>> Yeah, I watched the Olympic ceremony,\n\n10\n00:00:44,900 --> 00:00:46,910\nthe closing ceremonies, and I cried.\n\n11\n00:00:46,910 --> 00:00:47,920\n>> For real?\n>> Yes.\n\n12\n00:00:47,920 --> 00:00:48,980\n>> I think that makes you a sissy, Ronnie.\n\n13\n00:00:48,980 --> 00:00:49,790\n>> I know.\n>> [LAUGH]\n\n14\n00:00:49,790 --> 00:00:51,270\n>> It is what it is.\n\n15\n00:00:51,270 --> 00:00:55,190\n>> I have to check my man guide, but\nI'm pretty sure it's in there that if you\n\n16\n00:00:55,190 --> 00:01:00,070\ncry while watching TV and\nJohn Wayne's not involved, then you know.\n\n17\n00:01:00,070 --> 00:01:02,100\n>> And\nthey extinguished the Olympic flame,\n\n18\n00:01:02,100 --> 00:01:03,990\nand there went the tears\nstarted coming down.\n\n19\n00:01:03,990 --> 00:01:06,360\n>> They extinguished all your hopes and\ndreams at the same time.\n\n20\n00:01:06,360 --> 00:01:06,940\n>> At the same time.\n\n21\n00:01:06,940 --> 00:01:08,928\nI will never ever be able\nto fit in that bobsled.\n\n22\n00:01:08,928 --> 00:01:12,170\n>> [LAUGH]\n>> No matter what I try to do.\n\n23\n00:01:12,170 --> 00:01:14,188\nNot prior to being cremated at least.\n\n24\n00:01:14,188 --> 00:01:16,160\n>> [LAUGH]\n>> That's how we're going to send you off,\n\n25\n00:01:16,160 --> 00:01:17,820\nRonnie, going to put you in a bobsled and\noff you go.\n\n26\n00:01:17,820 --> 00:01:18,448\n>> That's right.\n\n27\n00:01:18,448 --> 00:01:22,345\n>> All right, well, speaking of\ncramming Ronnie into a bobsled,\n\n28\n00:01:22,345 --> 00:01:24,229\nlet's talk about [LAUGH] VPNs.\n\n29\n00:01:24,229 --> 00:01:26,770\nThat's the best segue\nI've got on this one.\n\n30\n00:01:26,770 --> 00:01:28,630\nWe've got another exciting episode today.\n\n31\n00:01:28,630 --> 00:01:31,130\nWe're going to be wrapping up IINS.\n\n32\n00:01:31,130 --> 00:01:33,500\nThis should be our final objective here.\n\n33\n00:01:33,500 --> 00:01:36,650\nAs we move into objective nine,\nwhich is VPN or virtual\n\n34\n00:01:36,650 --> 00:01:41,270\nprivate network technologies, more and\nmore companies are relying on the Iiternet\n\n35\n00:01:41,270 --> 00:01:45,080\nto connect their branch offices and remote\nlocations, teleworkers, people like that.\n\n36\n00:01:45,080 --> 00:01:48,160\nAnd boy,\nit's just not a trusted network, right?\n\n37\n00:01:48,160 --> 00:01:52,050\nI mean there's bad people out there,\nand we gotta watch out for them.\n\n38\n00:01:52,050 --> 00:01:54,220\nVPNs are one of the tools we\ncan use to do that, right?\n\n39\n00:01:54,220 --> 00:01:59,350\nSo it helps to secure our traffic as\nit's passing across untrusted networks.\n\n40\n00:01:59,350 --> 00:02:03,270\nBut while that sounds simple, there's\nactually a lot involved, a lot of choices.\n\n41\n00:02:03,270 --> 00:02:06,190\nAnd so we need to be aware of\nwhat those choices are, and for\n\n42\n00:02:06,190 --> 00:02:10,390\nthe exam, we need to know which choices\nare right for which scenarios, and\n\n43\n00:02:10,390 --> 00:02:12,200\nthat's what we're gonna\ntake a look at here.\n\n44\n00:02:12,200 --> 00:02:15,040\n>> Yeah, now before the existence\nof just VPN technologies,\n\n45\n00:02:15,040 --> 00:02:17,450\nright, we had to branch\noff to the main office.\n\n46\n00:02:17,450 --> 00:02:19,050\nWe still had to connect them.\n\n47\n00:02:19,050 --> 00:02:23,183\nWe again actually used private networks to\nactually help connect this to do so, but\n\n48\n00:02:23,183 --> 00:02:25,670\nit was incredibly expensive to do that.\n\n49\n00:02:25,670 --> 00:02:29,570\nAs so as technology got better, people\nfound out ways that we can instead just\n\n50\n00:02:29,570 --> 00:02:33,890\nuse the internet, provide the same type of\nprivate connection, the same benefits to\n\n51\n00:02:33,890 --> 00:02:37,790\nit, but without really having to go and\nuse those private networks instead.\n\n52\n00:02:37,790 --> 00:02:40,520\nYou might think well what is\nthe big deal behind that.\n\n53\n00:02:40,520 --> 00:02:43,583\nIt's one of the biggest technologies\nthat we use inside of an enterprise.\n\n54\n00:02:43,583 --> 00:02:44,617\n>> Yeah.\n>> Crazy.\n\n55\n00:02:44,617 --> 00:02:47,729\n>> With a point-to-point or\na private network, with those networks,\n\n56\n00:02:47,729 --> 00:02:51,002\nyou didn't really have to worry about\nencryption because the only people\n\n57\n00:02:51,002 --> 00:02:53,690\non those networks were you,\nyou and your branches.\n\n58\n00:02:53,690 --> 00:02:57,120\nAnd so you can just throw traffic on\nthere, not worry about it at all, but\n\n59\n00:02:57,120 --> 00:03:02,880\non the internet, you will pass through\none or many, usually like a good 20,\n\n60\n00:03:02,880 --> 00:03:07,410\nthird party routers that are networks that\nyou have no control over, likely even have\n\n61\n00:03:07,410 --> 00:03:12,080\nno idea where they are geographically and\nare just completely unknowns to you.\n\n62\n00:03:12,080 --> 00:03:14,780\nYou don't know what kind of\nemployees they have, the staff.\n\n63\n00:03:14,780 --> 00:03:18,159\nYou don't know what customers are\nmalicious customers on those networks that\n\n64\n00:03:18,159 --> 00:03:20,368\ncould potentially be gaining\naccess to your data.\n\n65\n00:03:20,368 --> 00:03:25,951\nSo a public network like the internet\nIs missing some of the components that\n\n66\n00:03:25,951 --> 00:03:31,990\nwe need as part of our security triad,\nright, the dumbest analogy in security.\n\n67\n00:03:31,990 --> 00:03:36,591\nBut in security, we have that security\ntriad, right, where all the security we\n\n68\n00:03:36,591 --> 00:03:40,651\nprovide is supposed to provide at\nleast one of three different things,\n\n69\n00:03:40,651 --> 00:03:42,343\nand it's confidentiality,\n\n70\n00:03:42,343 --> 00:03:46,811\nwhich means making sure only the intended\nrecipient can read the data we send,\n\n71\n00:03:46,811 --> 00:03:51,549\nintegrity, which means ensuring that the\ndata is unmodified in transit, and then\n\n72\n00:03:51,549 --> 00:03:56,329\naccessibility, which is ensuring that we\ncan use the system when we want to use it.\n\n73\n00:03:56,329 --> 00:03:56,841\n>> Yeah.\n\n74\n00:03:56,841 --> 00:04:01,000\n>> VPNs restore two of those\nthree to the internet.\n\n75\n00:04:01,000 --> 00:04:03,357\nWith the internet,\nthere is no confidentiality, and\n\n76\n00:04:03,357 --> 00:04:04,390\nthere is no integrity.\n\n77\n00:04:04,390 --> 00:04:07,510\nWhen you send data on the internet, you\nare trusting that it'll get to the other\n\n78\n00:04:07,510 --> 00:04:11,400\nside intact, and\nit's definitely not a guarantee.\n\n79\n00:04:11,400 --> 00:04:14,750\nWith a VPN tunnel,\nwe can encrypt our data, and\n\n80\n00:04:14,750 --> 00:04:20,100\nwhen we do that, we can ensure that only\nthe intended recipient is able to read it.\n\n81\n00:04:20,100 --> 00:04:23,900\nAnd if we've digitally signed it,\nwe can even see if somebody's modified it.\n\n82\n00:04:23,900 --> 00:04:25,780\nSo it gives us confidentiality and\n\n83\n00:04:25,780 --> 00:04:29,660\nintegrity, which we already have on\na point-to-point or a private network, but\n\n84\n00:04:29,660 --> 00:04:33,250\nthose are a lot more expensive than\na shared network like the internet.\n\n85\n00:04:33,250 --> 00:04:37,510\nThe internet combined with a VPN can\ngive you a very secure connection and\n\n86\n00:04:37,510 --> 00:04:40,450\nreplace the need for\nthose point-to-point links.\n\n87\n00:04:40,450 --> 00:04:43,180\nThe example I gave, I used to work for\nan insurance company, and\n\n88\n00:04:43,180 --> 00:04:45,050\nwe had 110 branches.\n\n89\n00:04:45,050 --> 00:04:50,762\nAnd when I started work there, we had a\nfractional T1 line at every single branch.\n\n90\n00:04:50,762 --> 00:04:55,637\n110 branches, fractional T1s, our phone\nbill was over $50,000 a month for\n\n91\n00:04:55,637 --> 00:04:56,343\nthose lines.\n\n92\n00:04:56,343 --> 00:04:57,757\nIt was really expensive.\n\n93\n00:04:57,757 --> 00:04:59,620\nThose were private lines, and\n\n94\n00:04:59,620 --> 00:05:02,710\nwe connected directly out from our\nhome office to all those branches.\n\n95\n00:05:02,710 --> 00:05:06,520\nWhen we migrated over to\nbroadband connections, cable and\n\n96\n00:05:06,520 --> 00:05:10,200\nDSL, we stuck VPN firewalls\nout at every branch, and\n\n97\n00:05:10,200 --> 00:05:12,890\nthey would just VPN over\nthe internet back to us.\n\n98\n00:05:12,890 --> 00:05:18,080\nWe actually got more bandwidth with the\nbroadband connections, and our phone bill\n\n99\n00:05:18,080 --> 00:05:23,620\ndropped to a little over $10,000 a month,\nbasically a 75% reduction.\n\n100\n00:05:23,620 --> 00:05:26,700\nIt was a significant cost savings\nover the course of a year.\n\n101\n00:05:26,700 --> 00:05:29,470\nIt was over, I mean, it was almost\nhalf a million dollars a year that\n\n102\n00:05:29,470 --> 00:05:31,910\nwe saved by switching to broadband links,\nbut\n\n103\n00:05:31,910 --> 00:05:35,060\nyou can't do that if you can't\ntrust the security on it.\n\n104\n00:05:35,060 --> 00:05:36,820\n>> Right.\n>> We were pushing financial and\n\n105\n00:05:36,820 --> 00:05:38,940\neven medical data in some cases, and\n\n106\n00:05:38,940 --> 00:05:42,690\nyou can't do that across the internet\nwithout securing the data first.\n\n107\n00:05:42,690 --> 00:05:43,400\n>> Yeah.\n\n108\n00:05:43,400 --> 00:05:46,890\nSo, security is of course\nthe topmost idea here.\n\n109\n00:05:46,890 --> 00:05:51,500\nSo when you see the term virtual\nprivate network, the privacy is really\n\n110\n00:05:51,500 --> 00:05:55,380\nthe key function behind us,\nprivacy over a public network here.\n\n111\n00:05:55,380 --> 00:05:58,980\nThe idea of virtual means we do\nit in software instead of using,\n\n112\n00:05:58,980 --> 00:06:01,850\nagain, a private node that already\nhas an infrastructure built up.\n\n113\n00:06:03,060 --> 00:06:07,840\n>> Now what if one of our viewers has\nnever even heard of encryption before.\n\n114\n00:06:07,840 --> 00:06:11,590\nLet's start off real basic there, and\nreally by this point you should have heard\n\n115\n00:06:11,590 --> 00:06:16,420\nit before, but if you haven't,\nencryption is simply a way of taking\n\n116\n00:06:16,420 --> 00:06:21,380\ndata that's represented by a set of\ncharacters and changing those characters\n\n117\n00:06:21,380 --> 00:06:25,480\ninto something else that a person on the\nother end would know how to change back.\n\n118\n00:06:25,480 --> 00:06:28,920\nAnd I always equate it to something like\nwhen you're a kid you might have gotten\n\n119\n00:06:28,920 --> 00:06:33,860\none of those decoder rings from\na box of cereal or some kind of kit.\n\n120\n00:06:33,860 --> 00:06:37,570\nBut we can even come up with\njust a real simple example here.\n\n121\n00:06:37,570 --> 00:06:39,520\nLet me just fire up my notepad here.\n\n122\n00:06:39,520 --> 00:06:45,300\nWe could do something like,\nhere, let's lay it out here.\n\n123\n00:06:45,300 --> 00:06:48,210\nWe could do something like\ntaking the alphabet, right?\n\n124\n00:06:48,210 --> 00:06:50,900\nAnd we could create our own\nwhat's called a cipher.\n\n125\n00:06:51,910 --> 00:06:55,326\nAnd you know the alphabet\nis pretty simple.\n\n126\n00:06:58,204 --> 00:07:00,020\nYou know, it's something like this.\n\n127\n00:07:00,020 --> 00:07:03,620\nAnd so we could say A, B, C, D, and\nthen all the letters in-between, and\n\n128\n00:07:03,620 --> 00:07:04,800\nthen X, Y, Z.\n\n129\n00:07:04,800 --> 00:07:10,340\nAnd instead of having letters,\nwe could substitute them for numbers.\n\n130\n00:07:10,340 --> 00:07:15,740\nAnd so I could say A is one,\nand B is 2, C is 3, D is 4,\n\n131\n00:07:15,740 --> 00:07:21,070\nall the way down to 24, 25, and 26.\n\n132\n00:07:21,070 --> 00:07:27,830\nOkay, and when I send somebody an email,\ninstead of writing letters in there,\n\n133\n00:07:27,830 --> 00:07:32,960\nI can use this cypher to translate\nwhat I'm going to type, right.\n\n134\n00:07:32,960 --> 00:07:38,350\nSo if I wanted to type the word,\nlets see what can I spell here?\n\n135\n00:07:38,350 --> 00:07:40,580\nLet's say caddy, right.\n\n136\n00:07:40,580 --> 00:07:45,940\nSo if I wanted to write the word caddy,\ninstead of C-A-D-D-Y,\n\n137\n00:07:45,940 --> 00:07:50,770\nin my message, I might send, and I might\npad these with zeroes or I might not.\n\n138\n00:07:50,770 --> 00:07:57,804\nIt's up to me, but so,\nI might write like 3 1 4 4 25.\n\n139\n00:07:57,804 --> 00:07:58,840\nLike that.\n\n140\n00:07:58,840 --> 00:08:04,630\nOkay, and when I send the email to\nsomebody, all they see is 3 1 4 4 25.\n\n141\n00:08:04,630 --> 00:08:06,960\nAll right, and they look at that and\ngo, what is that?\n\n142\n00:08:06,960 --> 00:08:08,670\nIt means nothing to me.\n\n143\n00:08:08,670 --> 00:08:13,195\nBut if they have this cipher right\nhere they can go down the list and\n\n144\n00:08:13,195 --> 00:08:17,800\nthey can say okay, well, a 3,\nthat's the letter C and then a 1,\n\n145\n00:08:17,800 --> 00:08:20,300\nthat's the letter A, and a 4 is D.\n\n146\n00:08:20,300 --> 00:08:23,250\nHere is another 4 and a 25 is Y.\n\n147\n00:08:23,250 --> 00:08:24,960\nThat's the word caddy.\n\n148\n00:08:24,960 --> 00:08:25,560\nDone.\nRight?\n\n149\n00:08:25,560 --> 00:08:26,270\n>> Right.\n\n150\n00:08:26,270 --> 00:08:30,746\n>> That's how a cipher works, or\na cipher at a very basic level.\n\n151\n00:08:30,746 --> 00:08:35,820\nWhat I'm showing you here is what's called\na stream cipher where we're just taking\n\n152\n00:08:35,820 --> 00:08:41,930\neach character and translating\nthat into some other character.\n\n153\n00:08:41,930 --> 00:08:43,250\n>> Yeah.\n>> Right.\n\n154\n00:08:43,250 --> 00:08:44,990\nYou probably did these\nwhen you were a kid,.\n\n155\n00:08:44,990 --> 00:08:47,330\nYou know, write secret messages or\nwhatever.\n\n156\n00:08:47,330 --> 00:08:51,440\nThey are somewhat vulnerable to breaking,\nright, because in the English language,\n\n157\n00:08:51,440 --> 00:08:53,440\nthe letter E is the most common.\n\n158\n00:08:53,440 --> 00:08:56,967\nAnd so, when they look at\na section of cipher text, right,\n\n159\n00:08:56,967 --> 00:09:01,766\nthe encoded text they just look for the\nmost common value and that's probably E,\n\n160\n00:09:01,766 --> 00:09:04,254\nright, and then you've got T and R and S.\n\n161\n00:09:04,254 --> 00:09:06,120\nThose are other ones that are very common.\n\n162\n00:09:06,120 --> 00:09:09,390\nAnd so they can start to look for\nwords like the word the, T-H-E.\n\n163\n00:09:09,390 --> 00:09:12,100\nI think that is the most common\nword in the English language, and\n\n164\n00:09:12,100 --> 00:09:17,690\nstart to kind of reverse engineer your\ncipher from that and they can break it.\n\n165\n00:09:17,690 --> 00:09:22,010\nBut this is a good example of\njust a kinda standard cipher\n\n166\n00:09:22,010 --> 00:09:24,600\nwhere we're converting one\ncharacter into another character.\n\n167\n00:09:24,600 --> 00:09:25,470\n>> Yeah.\n\n168\n00:09:25,470 --> 00:09:27,740\nSince Don brought up\nsome terminology here.\n\n169\n00:09:27,740 --> 00:09:31,901\nWhat we're really trying to do\nin terms of our encryption.\n\n170\n00:09:31,901 --> 00:09:32,580\nI was trying to remember\nwhat the words were.\n\n171\n00:09:32,580 --> 00:09:36,510\nIs that we're taking something that\nwe know that we call clear text or\n\n172\n00:09:36,510 --> 00:09:40,740\nplain text and we're changing it\nby sending it through that cipher,\n\n173\n00:09:40,740 --> 00:09:45,370\nthrough that key, into something that\nwe don't know that we call cipher text.\n\n174\n00:09:45,370 --> 00:09:47,630\nThat usually is what we have here.\n\n175\n00:09:47,630 --> 00:09:50,730\nSo those terminologies are actually fairly\nimportant, right, when you take something\n\n176\n00:09:50,730 --> 00:09:53,670\nthat you know and you're changing it\ninto something that you don't know.\n\n177\n00:09:53,670 --> 00:09:58,630\nYou can be using a substitutionary\nsystem like what Don showed us.\n\n178\n00:09:58,630 --> 00:10:00,510\nYou can even, again, go one off.\n\n179\n00:10:00,510 --> 00:10:05,280\nIn other words, you say, hey, on Mondays,\nan A is gonna be a number 1 but\n\n180\n00:10:05,280 --> 00:10:07,520\non Tuesdays, it could be a number 2.\n\n181\n00:10:07,520 --> 00:10:09,730\nSo it just depends on\nwhat you wanna do here.\n\n182\n00:10:09,730 --> 00:10:13,240\nBut that particular aspect of\nit is relatively the same.\n\n183\n00:10:13,240 --> 00:10:16,221\nAnd, today, especially in simple\nciphering when we're doing it.\n\n184\n00:10:16,221 --> 00:10:21,790\n>> Yeah, and when you do these,\nwhen you create ciphertext or\n\n185\n00:10:21,790 --> 00:10:26,100\nwhatever, we don't have notes for the exam\nso much but there is really two different\n\n186\n00:10:26,100 --> 00:10:29,340\ntypes of ciphers that are out there,\nthe stream ciphers and block ciphers.\n\n187\n00:10:29,340 --> 00:10:32,910\nAnd the stream ciphers are the fastest,\nyou know they are just changing character\n\n188\n00:10:32,910 --> 00:10:35,830\nby character, but\nthey're the easiest to reverse.\n\n189\n00:10:35,830 --> 00:10:38,660\nBlock ciphers are what\nnormally use in computing.\n\n190\n00:10:38,660 --> 00:10:41,230\nAnd with a block cipher it doesn't\nencode character by character,\n\n191\n00:10:41,230 --> 00:10:42,900\nit encodes by blocks of text.\n\n192\n00:10:42,900 --> 00:10:47,072\nAnd so it'll grab several characters and\nencode them all at once.\n\n193\n00:10:47,072 --> 00:10:49,260\nAnd so\njust because you use the E over and and\n\n194\n00:10:49,260 --> 00:10:52,995\nover again, that E may be encoded\ndifferently each time, because it's being\n\n195\n00:10:52,995 --> 00:10:57,380\ncoded with other letters next to it so\nit makes a stronger cipher.\n\n196\n00:10:57,380 --> 00:10:59,905\nSo there's a little bit of\na difference there within that, but\n\n197\n00:10:59,905 --> 00:11:02,570\nwe won't have to worry too\nterribly much about that.\n\n198\n00:11:02,570 --> 00:11:06,100\nThe important part is that we do have to\ncome up with some kind of advanced cipher.\n\n199\n00:11:06,100 --> 00:11:09,590\nAnd the one that I did on my notes there,\nthat is something that,\n\n200\n00:11:09,590 --> 00:11:12,140\nlike a third-grader should be able to do.\n\n201\n00:11:12,140 --> 00:11:15,290\nIt's not complex, and\nit's fairly easy to reverse.\n\n202\n00:11:15,290 --> 00:11:18,230\nSo, obviously that's not suitable for\nour enterprise data, right?\n\n203\n00:11:18,230 --> 00:11:22,860\nInstead, we're gonna rely on systems\nthat are far more sophisticated, right,\n\n204\n00:11:22,860 --> 00:11:28,320\nsystems that use key modules\nthat are over 1,000 bits and\n\n205\n00:11:28,320 --> 00:11:30,800\njust massive things that you can't\npossibly do in your head and\n\n206\n00:11:30,800 --> 00:11:33,980\neven a lot of computers can't do\nin any reasonable amount of time.\n\n207\n00:11:33,980 --> 00:11:37,000\nIt might take years to break\nsome of this text even for\n\n208\n00:11:37,000 --> 00:11:38,550\na very high powered computer.\n\n209\n00:11:38,550 --> 00:11:42,150\nSo we wanna make sure to pick\nsomething that is secure.\n\n210\n00:11:42,150 --> 00:11:45,220\nNow the cipher here is the main component.\n\n211\n00:11:45,220 --> 00:11:48,200\nAnd there's a number of different\nalgorithms that are out there for\n\n212\n00:11:48,200 --> 00:11:51,610\nus to use, and it's up to us to\nkinda pick the one that we want.\n\n213\n00:11:51,610 --> 00:11:58,140\nSome of the early ones like DES,\nDigital Encryption System.\n\n214\n00:11:58,140 --> 00:12:02,380\nDES was one of the earliest encryption\nalgorithms that was widely accepted.\n\n215\n00:12:02,380 --> 00:12:03,890\nIt was developed by IBM.\n\n216\n00:12:03,890 --> 00:12:07,310\nAnd it, by today's standards,\nis viewed as very weak.\n\n217\n00:12:07,310 --> 00:12:09,400\n>> Oh, yeah.\n>> Because modern computers can break it\n\n218\n00:12:09,400 --> 00:12:10,530\nvery, very fast.\n\n219\n00:12:10,530 --> 00:12:14,180\nBut when it was invented 30 years ago,\nit was near impossible for\n\n220\n00:12:14,180 --> 00:12:15,610\ncomputers to break that.\n\n221\n00:12:15,610 --> 00:12:19,720\nBut that just shows that as time goes by,\nwe need to come up with newer and\n\n222\n00:12:19,720 --> 00:12:22,630\nnewer encryption algorithms\nthat are stronger and stronger.\n\n223\n00:12:22,630 --> 00:12:25,110\nThat have much more\ndifficult keys to break.\n\n224\n00:12:25,110 --> 00:12:27,800\nWe don't wanna rely on one protocol for\ntoo long.\n\n225\n00:12:29,620 --> 00:12:30,128\nAll right.\n\n226\n00:12:30,128 --> 00:12:32,556\nThe other thing is that\nyou can't just go out and\n\n227\n00:12:32,556 --> 00:12:36,760\ninvent a new security algorithm and\nexpect it to get any kind of traction.\n\n228\n00:12:36,760 --> 00:12:41,030\nIn the security world, they expect to see\nan encryption standard be out there for\n\n229\n00:12:41,030 --> 00:12:45,295\nat least ten years to show that it\ncan withstand the common attacks and\n\n230\n00:12:45,295 --> 00:12:47,330\nthere's no hidden flaws that\npeople don't know about.\n\n231\n00:12:47,330 --> 00:12:51,380\nSo most of the algorithms we're gonna\ntalk about in this show, they're not new.\n\n232\n00:12:51,380 --> 00:12:52,970\n>> No.\n>> They've been around for years and\n\n233\n00:12:52,970 --> 00:12:55,290\nyears because they've gotten\nthe field testing and\n\n234\n00:12:55,290 --> 00:12:57,560\nthey're now generally accepted.\n\n235\n00:12:57,560 --> 00:13:01,320\nThere are probably thousands of encryption\nalgorithms that are out there but\n\n236\n00:13:01,320 --> 00:13:05,600\nthere's really only a handful that make\nit into commercial equipment, into Cisco,\n\n237\n00:13:05,600 --> 00:13:10,380\nJuniper, 3Com equipment,\nthat are enterprise ready.\n\n238\n00:13:10,380 --> 00:13:14,100\n>> When you go out there and you start\nreading, you get some books and you go and\n\n239\n00:13:14,100 --> 00:13:18,230\nvisit some websites, you'll see some of\nthe algorithms have been around a long\n\n240\n00:13:18,230 --> 00:13:23,565\ntime, yet they're saying newly\naccepted [LAUGH] and just brand new.\n\n241\n00:13:23,565 --> 00:13:27,620\nAnd it's just because that, it takes a\nlong time for anything to become tested to\n\n242\n00:13:27,620 --> 00:13:30,910\nthe point where they feel like they're\nconfident they can put it on equipment.\n\n243\n00:13:30,910 --> 00:13:32,090\n>> Yes.\n\n244\n00:13:32,090 --> 00:13:36,380\nNow, what we've been talking about so\nfar are encryption algorithms or\n\n245\n00:13:36,380 --> 00:13:37,390\nciphers, right?\n\n246\n00:13:37,390 --> 00:13:43,290\nSo those ciphers, that allows us to create\nconfidentiality, right, ensuring that\n\n247\n00:13:43,290 --> 00:13:47,360\nif anybody intercepts our traffic, they're\nnot gonna be able to read it, all right.\n\n248\n00:13:47,360 --> 00:13:51,860\nBut it's important to remember that\nit does not provide integrity.\n\n249\n00:13:51,860 --> 00:13:55,950\nIn other words, somebody could modify\nthat data if they wanted to, if they had,\n\n250\n00:13:55,950 --> 00:13:59,370\nyou know, access to some of our keys or if\nthey just wanted to damage it, they could.\n\n251\n00:13:59,370 --> 00:14:03,990\nSo if we want to provide integrity also\nto ensure the data doesn't get modified,\n\n252\n00:14:03,990 --> 00:14:05,726\nwe'll need something else.\n\n253\n00:14:05,726 --> 00:14:09,480\nAnd so\nwe will normally combine our cipher,\n\n254\n00:14:09,480 --> 00:14:14,290\nour encryption algorithm with\na digital signature of some sort.\n\n255\n00:14:14,290 --> 00:14:18,580\nAnd digital signatures typically\ntake the form of hashes, all right?\n\n256\n00:14:18,580 --> 00:14:20,150\nHere's the way a hash works.\n\n257\n00:14:20,150 --> 00:14:22,160\nBasically you take a string of text,\nright?\n\n258\n00:14:22,160 --> 00:14:26,420\nYou know, whatever that text happens to\nbe, your message, an e-mail, or whatever.\n\n259\n00:14:26,420 --> 00:14:31,548\nAnd then you take that text and\nwhat's called a private key.\n\n260\n00:14:31,548 --> 00:14:35,390\nA key, 's a sequence of letters and\nnumbers that you create and\n\n261\n00:14:35,390 --> 00:14:37,285\nyou run both of those through a formula.\n\n262\n00:14:37,285 --> 00:14:41,960\nAnd that mathematical formula\nwill then generate a text string,\n\n263\n00:14:41,960 --> 00:14:44,310\nwhich is a hash, all right.\n\n264\n00:14:44,310 --> 00:14:47,984\nThen you can send your data to\nsomebody else on the internet.\n\n265\n00:14:47,984 --> 00:14:52,710\nAnd when they receive it,\nif they have the same key as you,\n\n266\n00:14:52,710 --> 00:14:59,300\nthe same hashing key, then they can run\nthe same formula with the same key.\n\n267\n00:14:59,300 --> 00:15:02,500\nAnd if they come up with\nthe same result that you did,\n\n268\n00:15:02,500 --> 00:15:06,110\nif they match, then that means\nthe data wasn't modified, but\n\n269\n00:15:06,110 --> 00:15:09,000\nif they no longer match,\nthat means the data was modified.\n\n270\n00:15:09,000 --> 00:15:12,555\nNow that whole key part\nis what facilitates that.\n\n271\n00:15:12,555 --> 00:15:15,330\nAnd for me to just say it,\nit can be a little confusing.\n\n272\n00:15:15,330 --> 00:15:20,070\nSo I like to use a picture to kinda\nshow that process that's happening and\n\n273\n00:15:20,070 --> 00:15:22,090\nkinda detail what's going on there.\n\n274\n00:15:22,090 --> 00:15:28,650\nSo let's start with like\na hashing algorithm.\n\n275\n00:15:29,720 --> 00:15:34,050\nWith a hashing algorithm, there's a couple\nthat are very popular that are out there,\n\n276\n00:15:34,050 --> 00:15:40,860\nlike MD5 is probably one of the most\npopular ones, which is Message Digest 5.\n\n277\n00:15:40,860 --> 00:15:46,152\nAnd you know, this episode we\nare gonna have just tons of acronyms.\n\n278\n00:15:46,152 --> 00:15:48,894\n>> [LAUGH]\n>> So let me just start now.\n\n279\n00:15:48,894 --> 00:15:52,669\nMD5 is Message Digest 5 and\n\n280\n00:15:52,669 --> 00:15:59,127\nSHA-1 which is\nthe Secure Hashing Algorithm.\n\n281\n00:15:59,127 --> 00:16:02,047\nI'll throw in a few extra\nletters at no charge.\n\n282\n00:16:02,047 --> 00:16:03,877\nThere we go, secure hashing algorithm.\n\n283\n00:16:03,877 --> 00:16:10,087\nSo these guys right here\nare hashing algorithms.\n\n284\n00:16:10,087 --> 00:16:13,290\nAnd they're some of the most common\nones that are out there, MD5 and SHA-1.\n\n285\n00:16:13,290 --> 00:16:17,228\nThere are others, but\nthese are the most common, these two.\n\n286\n00:16:17,228 --> 00:16:19,060\nThey both work the same way.\n\n287\n00:16:19,060 --> 00:16:21,510\nThe difference is\nthe mathematical formula.\n\n288\n00:16:21,510 --> 00:16:24,025\nMD5 uses a different formula than SHA-1.\n\n289\n00:16:24,025 --> 00:16:24,639\nAnd so\n\n290\n00:16:24,639 --> 00:16:29,500\nSHA-1 is technically the stronger of\nthe two, but they both work equally well.\n\n291\n00:16:30,940 --> 00:16:35,290\nSo, the way it works is on our system.\n\n292\n00:16:35,290 --> 00:16:39,050\nSo let's say I'm a host, and\nI'm sending some data up to a web server.\n\n293\n00:16:39,050 --> 00:16:42,510\nAnd I wanna make sure that it doesn't\nget tampered with in transit.\n\n294\n00:16:42,510 --> 00:16:45,800\nSo, what I do is I take some text, right?\n\n295\n00:16:45,800 --> 00:16:48,600\nSo, let me just,\n\n296\n00:16:52,267 --> 00:16:55,680\nIt doesn't want to add\nmy little text block.\n\n297\n00:16:57,190 --> 00:16:58,350\nLet's try that again.\n\n298\n00:16:58,350 --> 00:17:00,937\nHere.\n\n299\n00:17:00,937 --> 00:17:03,706\n[LAUGH] I'm gonna encrypt\nit just by making it so\n\n300\n00:17:03,706 --> 00:17:05,840\nsmall nobody can possibly read it.\n\n301\n00:17:05,840 --> 00:17:09,111\nThat's my new security plan.\n\n302\n00:17:09,111 --> 00:17:09,870\nSo here we go.\n\n303\n00:17:09,870 --> 00:17:13,900\nWe got some unencrypted text, right?\n\n304\n00:17:13,900 --> 00:17:19,072\nAnd with unencrypted text,\nanybody could intercept this and\n\n305\n00:17:19,072 --> 00:17:21,690\nread it and whatever, right?\n\n306\n00:17:21,690 --> 00:17:25,619\nBut we takes this unencrypted text and\n\n307\n00:17:25,619 --> 00:17:29,437\nwe combine that with some kinda key.\n\n308\n00:17:29,437 --> 00:17:33,456\nAnd the key is pseudo-random,\nyou need to generate this letter and\n\n309\n00:17:33,456 --> 00:17:35,726\nnumber combination to be able to use.\n\n310\n00:17:35,726 --> 00:17:40,978\nAnd that is what often times we\nwill refer to as our private key.\n\n311\n00:17:40,978 --> 00:17:45,140\nSo I'm going to combine that\nunencrypted text with this key and\n\n312\n00:17:45,140 --> 00:17:47,113\nrun it through an algorithm.\n\n313\n00:17:47,113 --> 00:17:50,933\nAnd in my case, that'll be like MD5, so.\n\n314\n00:17:54,231 --> 00:17:57,598\nLet me just make that just a little bit\nbigger so it matches the other text and\n\n315\n00:17:57,598 --> 00:17:59,530\nwe get some kinda consistency out of this.\n\n316\n00:18:01,670 --> 00:18:02,800\nThat worked out great.\n\n317\n00:18:02,800 --> 00:18:04,664\nThat worked exactly\nthe way I wanted it to.\n\n318\n00:18:04,664 --> 00:18:09,095\n>> [LAUGH]\n>> All right.\n\n319\n00:18:09,095 --> 00:18:09,904\nOkay.\n\n320\n00:18:09,904 --> 00:18:15,460\nSo [LAUGH] all right.\n\n321\n00:18:15,460 --> 00:18:16,840\nThere we go.\n\n322\n00:18:16,840 --> 00:18:22,770\nWhen I take that unencrypted text and\nI feed it through the MD5 algorithm,\n\n323\n00:18:22,770 --> 00:18:29,350\nand I use this private key,\nthe result will be cypher text.\n\n324\n00:18:29,350 --> 00:18:30,160\nAll right?\n\n325\n00:18:30,160 --> 00:18:34,550\nAnd cipher text is, in this case it\nactually wouldn't be cipher text, sorry.\n\n326\n00:18:34,550 --> 00:18:36,330\nIt would be a digital signature.\n\n327\n00:18:36,330 --> 00:18:44,370\nSo, that digital signature will be,\nyou know who knows what it could be.\n\n328\n00:18:44,370 --> 00:18:45,780\nAll sorts of things.\n\n329\n00:18:48,590 --> 00:18:50,499\nYou know, something crazy like this.\n\n330\n00:18:51,690 --> 00:18:56,400\nThat's the result of that formula,\nall right?\n\n331\n00:18:56,400 --> 00:19:01,530\nSo we run that against the program,\nit generates this little signature and\n\n332\n00:19:01,530 --> 00:19:05,340\nnow we can send our unencrypted text\n\n333\n00:19:05,340 --> 00:19:08,550\nwith this signature over to\nthe web server on the other side.\n\n334\n00:19:08,550 --> 00:19:09,800\nAll right.\n\n335\n00:19:09,800 --> 00:19:12,630\nThe web server on the other side\ncan take the data that we sent.\n\n336\n00:19:12,630 --> 00:19:16,890\nNow we only sent the unencrypted text and\nthe digital signature.\n\n337\n00:19:16,890 --> 00:19:22,060\nAt the other side, they can take the\nunencrypted text and the digital signature\n\n338\n00:19:22,060 --> 00:19:26,500\nand they can run it through the MD5\nalgorithm using the private key.\n\n339\n00:19:26,500 --> 00:19:29,000\nThey've got to have the key also.\n\n340\n00:19:29,000 --> 00:19:34,180\nAnd they run it through using that key,\nand they can generate their own signature.\n\n341\n00:19:34,180 --> 00:19:38,690\nAnd they can compare what\nthey got to what we got.\n\n342\n00:19:38,690 --> 00:19:41,300\nAnd if they match,\nif they got the same value,\n\n343\n00:19:41,300 --> 00:19:45,350\nthen we know the unencrypted\ntext must be the same, right?\n\n344\n00:19:45,350 --> 00:19:50,010\nBut if they get a different result, then\nthe unencrypted text must have changed,\n\n345\n00:19:50,010 --> 00:19:52,290\nand that's why the results\nno longer match.\n\n346\n00:19:52,290 --> 00:19:52,860\nAll right?\n\n347\n00:19:52,860 --> 00:19:56,560\nSo hashing algorithms let us\nquickly identify that stuff.\n\n348\n00:19:56,560 --> 00:20:01,823\nAnd you can see these,\nRonnie didn't you have a website or\n\n349\n00:20:01,823 --> 00:20:06,563\nsomething that had a like\na digital hash generator.\n\n350\n00:20:09,109 --> 00:20:16,351\nThought you had pulled one up, but-\n>> Oh, HMAC generator.\n\n351\n00:20:16,351 --> 00:20:18,140\n>> That'll work.\n\n352\n00:20:18,140 --> 00:20:19,240\n>> I think is what I had to search for.\n\n353\n00:20:20,290 --> 00:20:22,010\n>> There we go, a HMAC Generator.\n\n354\n00:20:22,010 --> 00:20:24,560\nSo here's an example of one and\n\n355\n00:20:24,560 --> 00:20:27,700\nbasically the way it works\nis you type in some message.\n\n356\n00:20:27,700 --> 00:20:33,850\nSo, This is Don's sensitive data.\n\n357\n00:20:35,060 --> 00:20:36,850\nPlease do not tamper with it.\n\n358\n00:20:38,022 --> 00:20:42,020\nAll right, so there's my unencrypted\ntext and then I put in a secret key.\n\n359\n00:20:44,360 --> 00:20:45,890\nSo, I'll put in ITProTV-INS.\n\n360\n00:20:45,890 --> 00:20:48,130\nThat's my secret key, all right?\n\n361\n00:20:48,130 --> 00:20:51,770\nAnd then I select my algorithm and\nlook at all these hashing algorithms.\n\n362\n00:20:51,770 --> 00:20:54,040\nThere are a ton of them, right?\n\n363\n00:20:54,040 --> 00:20:58,180\nMany of them are very popular,\nwidely accepted.\n\n364\n00:20:58,180 --> 00:21:00,760\nYou see SHA-1 at the top and\nMD5 right here.\n\n365\n00:21:00,760 --> 00:21:05,370\nBut then there's plenty of other\nones that are not as popular, right?\n\n366\n00:21:05,370 --> 00:21:08,200\nAnd so you may or may not have support for\nthem in your system.\n\n367\n00:21:08,200 --> 00:21:11,650\nMany of these like DES and\nRC2 are broken and so\n\n368\n00:21:11,650 --> 00:21:13,200\nyou don't want to use\nthem if you can avoid it.\n\n369\n00:21:14,720 --> 00:21:18,990\nBut I'll use MD5 here and\nI'll go ahead and compute it.\n\n370\n00:21:18,990 --> 00:21:21,560\nWhen it computes, here it is.\n\n371\n00:21:21,560 --> 00:21:23,820\nHere's the hash that it created.\n\n372\n00:21:23,820 --> 00:21:25,570\nLet me throw all this into Notepad.\n\n373\n00:21:26,740 --> 00:21:35,337\nSo, what I did is I started with,\n\n374\n00:21:35,337 --> 00:21:40,562\nunencrypted text.\n\n375\n00:21:40,562 --> 00:21:41,790\nAll right.\n\n376\n00:21:41,790 --> 00:21:45,861\nAnd then I had a secret key,\n\n377\n00:21:45,861 --> 00:21:50,646\nwhich was just ITPROTV-IINS.\n\n378\n00:21:50,646 --> 00:21:52,130\nI pick my algorithm.\n\n379\n00:21:53,140 --> 00:21:56,790\nWhich was MD5, and\n\n380\n00:21:56,790 --> 00:22:02,384\nthe Resultant Signature was,\n\n381\n00:22:05,421 --> 00:22:07,557\nThat.\n\n382\n00:22:07,557 --> 00:22:11,820\nNow, if any of you guys are sitting\nat home, you could go, and\n\n383\n00:22:11,820 --> 00:22:17,760\nyou could take this unencrypted text and\nthis signature, you could go\n\n384\n00:22:17,760 --> 00:22:21,610\na hashing algorithm site of your choice,\ngo to any one of them on the Internet.\n\n385\n00:22:21,610 --> 00:22:24,270\nAnd you could punch in this text,\nsame case,\n\n386\n00:22:24,270 --> 00:22:28,190\nsame spacing, same punctuation,\nit's gotta be identical.\n\n387\n00:22:28,190 --> 00:22:33,374\nAnd if you type in this secret key and\ngenerate an MD5 hash,\n\n388\n00:22:33,374 --> 00:22:37,321\nyou should generate\nthis same exact number.\n\n389\n00:22:37,321 --> 00:22:40,700\nIf you generate the same number,\nthen you got a match.\n\n390\n00:22:40,700 --> 00:22:44,180\nIf you generate something different,\nthen it's been tampered with.\n\n391\n00:22:44,180 --> 00:22:47,019\nAnd so if I go back to this\npage I'm just going to remove.\n\n392\n00:22:47,019 --> 00:22:51,160\nIt looks like I had a trailing space\non the end and I'll remove that period.\n\n393\n00:22:51,160 --> 00:22:51,715\nOkay?.\nSo\n\n394\n00:22:51,715 --> 00:22:57,680\nI am going to remove that little bit from\nthe end and then I'll compute an HMAC.\n\n395\n00:22:57,680 --> 00:23:02,735\nAnd when I do that, it generated a number.\n\n396\n00:23:02,735 --> 00:23:04,139\nAnd if I compare it.\n\n397\n00:23:04,139 --> 00:23:04,885\n>> It's different.\n\n398\n00:23:04,885 --> 00:23:05,695\n>> They don't match.\n\n399\n00:23:05,695 --> 00:23:06,473\nAnd it's not just a little difference.\n\n400\n00:23:06,473 --> 00:23:07,015\n>> No.\n\n401\n00:23:07,015 --> 00:23:08,775\n>> It's completely different.\n\n402\n00:23:08,775 --> 00:23:12,825\n>> Yeah, now this idea of the complete\ndifference here that you see.\n\n403\n00:23:12,825 --> 00:23:15,485\nRemember that Don only removed\nthe space and the period.\n\n404\n00:23:15,485 --> 00:23:16,405\nIs that what you removed as well?\n\n405\n00:23:16,405 --> 00:23:17,995\n>> Yeah, there was a space and\nperiod at the end.\n\n406\n00:23:17,995 --> 00:23:22,730\n>> You remove the space and the period,\nbut the resultant value that we got was so\n\n407\n00:23:22,730 --> 00:23:24,550\ndifferent there, it's amazing.\n\n408\n00:23:24,550 --> 00:23:28,230\nNow, this comes from something that we\ntechnically call the avalanche effect,\n\n409\n00:23:28,230 --> 00:23:29,520\nis what happens here.\n\n410\n00:23:29,520 --> 00:23:32,470\nIs that a little small\nchange really did end up\n\n411\n00:23:32,470 --> 00:23:35,620\nculminating in a huge change\nin terms of the result.\n\n412\n00:23:35,620 --> 00:23:39,270\nAnd so this is exactly why\nwe want something like this.\n\n413\n00:23:39,270 --> 00:23:42,210\nIs because we want to make sure\nthat the smallest minor change\n\n414\n00:23:42,210 --> 00:23:45,340\nlet's us know immediately that\nsomething's been tampered with.\n\n415\n00:23:45,340 --> 00:23:48,480\n>> And I put the period and\nspace back and I reran it and\n\n416\n00:23:48,480 --> 00:23:50,710\nI got the original number again.\n\n417\n00:23:50,710 --> 00:23:53,560\nSo digital signatures,\nthey don't encrypt your data,\n\n418\n00:23:53,560 --> 00:23:58,135\nyour data's still being sent in plain\ntext, they just give us a mechanism to\n\n419\n00:23:58,135 --> 00:24:01,425\nuse and see whether or\nnot our data has been tampered with.\n\n420\n00:24:01,425 --> 00:24:02,215\nThat's all they do.\n\n421\n00:24:02,215 --> 00:24:04,675\nIntegrity is the only thing they provide.\n\n422\n00:24:04,675 --> 00:24:07,085\nShowing your data hasn't\nbeen tampered with.\n\n423\n00:24:07,085 --> 00:24:11,668\nSo very simple IF someone gets\na hold of this signature,\n\n424\n00:24:11,668 --> 00:24:15,870\nbig deal,\nthe data is not stored in the signature.\n\n425\n00:24:15,870 --> 00:24:20,270\nThe signature is useless by itself,\nand your data is probably unencrypted\n\n426\n00:24:20,270 --> 00:24:23,990\nalong with it anyway, so they're not gonna\nbother messing with the signature but\n\n427\n00:24:23,990 --> 00:24:29,260\nif they modify the text, they've gotta\nrecreate the signature and it won't match.\n\n428\n00:24:29,260 --> 00:24:31,770\nIt won't match what you\noriginally generated.\n\n429\n00:24:31,770 --> 00:24:35,060\nSo that's the real trick with these\nthings, it's very easy to verify,\n\n430\n00:24:35,060 --> 00:24:37,670\nthe person on the other end\nwould need to know your secret\n\n431\n00:24:37,670 --> 00:24:40,445\nkey in order to be able to\nrun the algorithm themselves.\n\n432\n00:24:40,445 --> 00:24:42,130\n>> Mm-hm.\n>> If they don't know the secret key,\n\n433\n00:24:42,130 --> 00:24:46,190\nthey can't do it and the secret key is\nnot transmitted in line with the data,\n\n434\n00:24:46,190 --> 00:24:47,690\notherwise that defeats the purpose.\n\n435\n00:24:47,690 --> 00:24:51,780\nYou need to make sure that somebody\nreceives your secret key a different way,\n\n436\n00:24:51,780 --> 00:24:53,980\nby phone or fax or whatever but\n\n437\n00:24:53,980 --> 00:24:56,980\nnot sent along with the data\nthat you're protecting.\n\n438\n00:24:58,910 --> 00:25:02,880\nAnyhow, that's basically how\na digital signature works and\n\n439\n00:25:02,880 --> 00:25:06,992\nwe used that term HMAC\na couple of times and\n\n440\n00:25:06,992 --> 00:25:12,760\nHMAC is a general term that kind of refers\nto hashing algorithms all together.\n\n441\n00:25:13,820 --> 00:25:15,564\nLet's see if I can remember this, hash.\n\n442\n00:25:15,564 --> 00:25:16,740\n>> Based.\n\n443\n00:25:16,740 --> 00:25:18,560\n>> Hash based messaging.\n\n444\n00:25:18,560 --> 00:25:19,560\n>> Authentication code.\n\n445\n00:25:19,560 --> 00:25:20,610\n>> There we go.\n\n446\n00:25:20,610 --> 00:25:25,049\nSo a hash based message authenticating\ncode, it can be any of number of\n\n447\n00:25:25,049 --> 00:25:28,790\nalgorithms out there but\nthey all do the same exact thing.\n\n448\n00:25:28,790 --> 00:25:31,690\nThe only thing that is different\nis the algorithm they're\n\n449\n00:25:31,690 --> 00:25:33,960\nusing to generate this string right here.\n\n450\n00:25:33,960 --> 00:25:36,420\nEveryone uses a slightly\ndifferent algorithm.\n\n451\n00:25:36,420 --> 00:25:41,130\nFor example, if I go back to that\ngenerator and I'll take my same data but\n\n452\n00:25:41,130 --> 00:25:46,870\nthis time I'll do a SHA one,\nwhich is the other popular one and\n\n453\n00:25:46,870 --> 00:25:53,740\nnow it generates a code and\nit's different.\n\n454\n00:25:53,740 --> 00:25:56,370\nIt's longer, so\nit's a little bit more secure but\n\n455\n00:25:56,370 --> 00:26:01,532\nit is just different and\nthat's basically that.\n\n456\n00:26:01,532 --> 00:26:05,730\nI'm gonna post these notes with\nthe episode, so you can have them.\n\n457\n00:26:05,730 --> 00:26:12,200\nThis is the original and then I altered\n\n458\n00:26:12,200 --> 00:26:17,620\nthe source text here and then I corrected\n\n459\n00:26:17,620 --> 00:26:22,810\nthe source text here, so you can see where\nit went bad, then it got good again.\n\n460\n00:26:22,810 --> 00:26:27,910\nThen down here is where I did SHA-1\ninstead, the other ones were all MD5.\n\n461\n00:26:32,210 --> 00:26:36,910\nIf I add that little note, just so we can\nremember and the notes will make sense.\n\n462\n00:26:36,910 --> 00:26:41,580\n>> Yeah, now remember that the whole\npurpose behind the hashing algorithm is\n\n463\n00:26:41,580 --> 00:26:45,610\nthe ability to verify that\nnobody has messed with the text\n\n464\n00:26:45,610 --> 00:26:48,420\nfrom the source as it\narrives on the destination.\n\n465\n00:26:48,420 --> 00:26:52,990\nNow you may think, who the heck would mess\nwith this data as it's being sent here?\n\n466\n00:26:52,990 --> 00:26:56,890\nWell, when you send it across the\ninternet, you have no idea who may choose\n\n467\n00:26:56,890 --> 00:27:01,780\nto take that text instead, modify it,\nand then send it along its way.\n\n468\n00:27:01,780 --> 00:27:04,020\nSo this is one of\nthe reasons why we do it.\n\n469\n00:27:04,020 --> 00:27:09,550\nNow, it's the protection in that\nsense that allows us to know that\n\n470\n00:27:09,550 --> 00:27:15,288\nthe data was original is the data that\nI receive even if I'm 1,000 miles away.\n\n471\n00:27:15,288 --> 00:27:18,559\n>> Now you might ask why we're\nharping on this so much and\n\n472\n00:27:18,559 --> 00:27:22,400\nthe reason is that when we do\na VPN tunnel across the internet,\n\n473\n00:27:22,400 --> 00:27:25,940\na lot times your company\ndeals in public information.\n\n474\n00:27:25,940 --> 00:27:27,940\nLet's say you work for\nthe U.S. government,\n\n475\n00:27:27,940 --> 00:27:32,190\nwe have certain Freedom of Information Act\nand in Florida, we have what's called\n\n476\n00:27:32,190 --> 00:27:36,780\nthe Sunshine Law, which is that every\ngovernment communication in the state of\n\n477\n00:27:36,780 --> 00:27:40,840\nFlorida is considered public record and\nthis is a pretty uncommon thing.\n\n478\n00:27:40,840 --> 00:27:45,590\nFor example, If I wanted to right now, I\ncould go to the State of Florida's website\n\n479\n00:27:45,590 --> 00:27:50,300\nand, on their website,\nI can access the Governor's email box.\n\n480\n00:27:50,300 --> 00:27:54,100\nYou can actually open up the Governor's\nemail and read through his email.\n\n481\n00:27:54,100 --> 00:27:56,060\nYou can't send emails,\nI'm saying obviously, but\n\n482\n00:27:56,060 --> 00:27:59,270\nyou can read them because all\nof his email are public record.\n\n483\n00:27:59,270 --> 00:28:03,720\nSo if he's sending data across\nthe Internet, do we need to encrypt it?\n\n484\n00:28:03,720 --> 00:28:04,980\nNo, it's public record anyway.\n\n485\n00:28:04,980 --> 00:28:07,300\nWhat do we care if somebody intercepts and\nreads it?\n\n486\n00:28:07,300 --> 00:28:09,720\nBut do we want to allow\npeople to tamper with it?\n\n487\n00:28:09,720 --> 00:28:14,960\nNo, so no matter what,\nwhen we do a VPN tunnel,\n\n488\n00:28:14,960 --> 00:28:21,382\nat a minimum,\nwe're going to do want to digital signing.\n\n489\n00:28:21,382 --> 00:28:25,245\nWe're going to want to maintain integrity,\n\n490\n00:28:25,245 --> 00:28:30,031\nso that we know people haven't\ntampered with our data.\n\n491\n00:28:30,031 --> 00:28:34,656\nEncryption, we may or may not choose\nto do but a digital signature,\n\n492\n00:28:34,656 --> 00:28:37,024\nthat's almost always required.\n\n493\n00:28:37,024 --> 00:28:40,034\nThat's basically how the hashing\nalgorithms work, a key is involved.\n\n494\n00:28:40,034 --> 00:28:43,620\nThat's what I wad trying to show in my\npicture, you take that unencrypted text,\n\n495\n00:28:43,620 --> 00:28:47,750\nplus an algorithm, plus a private key,\nwhich was that secret that we generated.\n\n496\n00:28:47,750 --> 00:28:51,052\nThat creates a digital signature,\nwe send our data to the other side, and\n\n497\n00:28:51,052 --> 00:28:54,960\nthey're able to reverse it, I shouldn't\nsay, reverse it cuz it's non reversible.\n\n498\n00:28:54,960 --> 00:28:57,700\nYou can't get the text\nout of this signature.\n\n499\n00:28:57,700 --> 00:28:58,460\n>> Should be able to verify it.\n\n500\n00:28:58,460 --> 00:29:01,290\n>> They just repeat the process\nto get the same result.\n\n501\n00:29:02,920 --> 00:29:04,400\nSo that's digital signatures.\n\n502\n00:29:04,400 --> 00:29:07,030\nWe still have encryption to talk about,\nwhich is the bigger piece and\n\n503\n00:29:07,030 --> 00:29:10,480\nthen actually creating these VPN\ntunnels but looking at the clock,\n\n504\n00:29:10,480 --> 00:29:11,610\nwe're right at our break time.\n\n505\n00:29:11,610 --> 00:29:13,750\nRonnie, do you have anything else to\nthrow in before we stop for break?\n\n506\n00:29:13,750 --> 00:29:14,680\n>> Nope, let's go ahead and do it and\n\n507\n00:29:14,680 --> 00:29:16,890\nthen get back and\nget ready to do some configuration.\n\n508\n00:29:16,890 --> 00:29:19,304\n>> Excellent, so stay tuned,\nwe'll be back after this.\n\n509\n00:29:19,304 --> 00:29:26,466\n[MUSIC]\n\n510\n00:29:26,466 --> 00:29:28,340\nWelcome back everybody.\n\n511\n00:29:28,340 --> 00:29:32,180\nBefore the break, we were talking about\nproviding integrity through digital\n\n512\n00:29:32,180 --> 00:29:35,220\nsignatures, so\nwe got a chance to see that.\n\n513\n00:29:35,220 --> 00:29:39,810\nNow we need to move the word that's gonna\nmake you money if you're a security\n\n514\n00:29:39,810 --> 00:29:41,600\nprofessional, which is encryption.\n\n515\n00:29:41,600 --> 00:29:43,292\n>> Everybody loves that word.\n\n516\n00:29:43,292 --> 00:29:44,502\n[LAUGH]\n>> It is a bit of a buzzword.\n\n517\n00:29:44,502 --> 00:29:45,800\nHot topic.\n>> [LAUGH]\n\n518\n00:29:45,800 --> 00:29:46,940\n>> So encryption,\n\n519\n00:29:46,940 --> 00:29:50,560\nremember that's the act of\nchanging our data in a way\n\n520\n00:29:50,560 --> 00:29:53,600\nthat if anybody intercepts it,\nthey won't be able to read it.\n\n521\n00:29:53,600 --> 00:29:55,330\nIt makes it useless to them, so\n\n522\n00:29:55,330 --> 00:30:01,460\nthat only the intended recipient is able\nto read that data, it's confidentiality.\n\n523\n00:30:01,460 --> 00:30:06,810\nWe do that by applying\na cipher to our text,\n\n524\n00:30:06,810 --> 00:30:10,050\nto any data that we send over the line,\nso that it becomes cypher text.\n\n525\n00:30:10,050 --> 00:30:14,670\nIt's encoded, and someone with\nthe proper key can decode it and\n\n526\n00:30:14,670 --> 00:30:15,860\nget that information.\n\n527\n00:30:15,860 --> 00:30:21,090\nSo, unlike a digital signature, where\nthe digital signature doesn't contain\n\n528\n00:30:21,090 --> 00:30:26,780\nthe data, the cypher text does contain\nthe data and if somebody's got that key,\n\n529\n00:30:26,780 --> 00:30:31,270\nthey can reverse it and get it\nunencrypted and view that data again.\n\n530\n00:30:31,270 --> 00:30:34,610\nThere a lot of algorithms\nthat are out there but\n\n531\n00:30:34,610 --> 00:30:37,250\nthey all work based on\nthe same principles.\n\n532\n00:30:37,250 --> 00:30:41,080\nLet's start really generic,\nnot actually naming a protocol and\n\n533\n00:30:41,080 --> 00:30:43,140\nkind of work through the process\nof doing encryption.\n\n534\n00:30:44,950 --> 00:30:48,260\nFirst off, encryption is\ncompletely dependent on those\n\n535\n00:30:48,260 --> 00:30:51,470\nsecret keys that are used\nto exchange information.\n\n536\n00:30:51,470 --> 00:30:57,808\nSo let's start with a simple model that\nkind of uses that idea of the keys.\n\n537\n00:30:58,990 --> 00:31:04,010\nFor example,\nlet's say that I got a computer,\n\n538\n00:31:04,010 --> 00:31:06,700\nand I'm going to be sharing\ninformation with the server and\n\n539\n00:31:06,700 --> 00:31:10,500\nI know that information is going over the\ninternet, so I want it to be encrypted.\n\n540\n00:31:11,810 --> 00:31:18,780\nWhat I do is for my host here,\nI come up with, somehow, a private key,\n\n541\n00:31:18,780 --> 00:31:23,130\nand that private key, I may be just\nmaking it up off the top of my head.\n\n542\n00:31:23,130 --> 00:31:25,910\nOr it might be something that I create and\n\n543\n00:31:25,910 --> 00:31:29,655\nget signed through a provider like\nVerisign or something like that but\n\n544\n00:31:29,655 --> 00:31:34,837\none way or another, I get a private key.\n\n545\n00:31:34,837 --> 00:31:39,855\nThen, I take that key and I share it,\n\n546\n00:31:39,855 --> 00:31:45,095\nI send it over to the other side,\nover to that web server or\n\n547\n00:31:45,095 --> 00:31:50,010\nwhatever, so we send it, when we transmit\nthat private key to the other side,\n\n548\n00:31:50,010 --> 00:31:53,830\nthere is now going to be\ntwo copies of this key.\n\n549\n00:31:53,830 --> 00:31:58,090\nOne copy on my system and\none copy over there on the web server.\n\n550\n00:31:58,090 --> 00:32:03,035\nThe cool part is I can then\ntake my unencrypted text\n\n551\n00:32:03,035 --> 00:32:07,861\nhere I can encrypt it using this key,\nthis code,\n\n552\n00:32:07,861 --> 00:32:10,804\nright, to encrypt my data and\n\n553\n00:32:10,804 --> 00:32:17,060\nthen send just the encrypted\ndata over to the web server.\n\n554\n00:32:17,060 --> 00:32:21,850\nAnd the web server can use the same\nkey there to decode the data into\n\n555\n00:32:21,850 --> 00:32:22,790\nplain text, right?\n\n556\n00:32:22,790 --> 00:32:27,930\nThe cool part here is that in transit\nacross the internet is just the encoded\n\n557\n00:32:27,930 --> 00:32:29,580\ndata, the encrypted information.\n\n558\n00:32:29,580 --> 00:32:30,960\nIf somebody intercepts it,\n\n559\n00:32:30,960 --> 00:32:35,030\nthat information is useless\nwithout the Private Key.\n\n560\n00:32:35,030 --> 00:32:38,970\nMy host and the web server both have that\nPrivate Key, so we're able to encrypt and\n\n561\n00:32:38,970 --> 00:32:40,120\ndecrypt the data.\n\n562\n00:32:40,120 --> 00:32:44,980\n>> Now in this type of encryption,\nremember that the key is exactly the same.\n\n563\n00:32:44,980 --> 00:32:49,120\nSo we're actually having one key that can\nencrypt as well as decrypt that data,\n\n564\n00:32:49,120 --> 00:32:51,900\nand when we start talking about that,\nthat is where we move into\n\n565\n00:32:51,900 --> 00:32:56,090\nthe world of what we call\nsymmetric key encryption here.\n\n566\n00:32:56,090 --> 00:32:59,290\nThe same key encrypts and\ndecrypts when we do this.\n\n567\n00:32:59,290 --> 00:33:05,060\nSo, when we do this, there is only one\nreal problem with the idea of this stuff,\n\n568\n00:33:05,060 --> 00:33:07,520\nthat we have in terms of\nsymmetric key encryption.\n\n569\n00:33:07,520 --> 00:33:14,300\nThe problem happens to be how do I get my\nPrivate Key from the host machine over\n\n570\n00:33:14,300 --> 00:33:20,730\nthat web server without anybody actually\nbeing able to grab a copy of that?\n\n571\n00:33:20,730 --> 00:33:22,430\nAnd we'll get in that\na little bit later on here.\n\n572\n00:33:22,430 --> 00:33:26,480\nBut that's where the real problem of this\nactually lies for us, when we do this.\n\n573\n00:33:27,610 --> 00:33:28,310\n>> Whoops.\n\n574\n00:33:28,310 --> 00:33:29,930\nI jumped between my windows.\n\n575\n00:33:29,930 --> 00:33:33,250\nSo yeah, just like Ronnie was, whoops.\n\n576\n00:33:33,250 --> 00:33:35,220\nAs I zoom in like crazy.\n\n577\n00:33:35,220 --> 00:33:39,140\nSo just like Ronnie was saying,\nyou know, it's unencrypted here.\n\n578\n00:33:39,140 --> 00:33:41,470\nAs it crosses the internet,\nit's encrypted.\n\n579\n00:33:41,470 --> 00:33:44,070\nAnd as it reaches the other\nend it's unencrypted.\n\n580\n00:33:44,070 --> 00:33:51,280\nThe hard part is having that same\nkey on both ends of the line, right?\n\n581\n00:33:51,280 --> 00:33:55,200\nBoth sides have to have that same\nkey to be able to encode and\n\n582\n00:33:55,200 --> 00:33:56,660\nthen decode the data.\n\n583\n00:33:56,660 --> 00:33:59,080\nWell, how do I get that\nkey to the other side?\n\n584\n00:33:59,080 --> 00:34:01,250\nWell, I could email it to them.\n\n585\n00:34:01,250 --> 00:34:03,020\nBut, if there's an attacker\nthat's out there and\n\n586\n00:34:03,020 --> 00:34:06,020\nthey're capturing my email traffic,\nemail's not encrypted, right?\n\n587\n00:34:06,020 --> 00:34:07,640\nSo they can see the key right there.\n\n588\n00:34:07,640 --> 00:34:11,610\nOr if I just write the key\non a website and say,\n\n589\n00:34:11,610 --> 00:34:12,680\ncome to this website and download it.\n\n590\n00:34:12,680 --> 00:34:15,190\nWell, again somebody could intercept and\nget that key.\n\n591\n00:34:15,190 --> 00:34:17,840\nThe Private Key has to stay private.\n\n592\n00:34:17,840 --> 00:34:22,210\nIf an attacker gets your Private Key, they\ncan read and interpret all that data and\n\n593\n00:34:22,210 --> 00:34:23,950\nthen you're out of luck.\n\n594\n00:34:23,950 --> 00:34:27,890\nSo more commonly,\nyou're going to burn the key to a CD and\n\n595\n00:34:27,890 --> 00:34:31,150\nphysically mail it or\nyou're going to call them on the phone and\n\n596\n00:34:31,150 --> 00:34:35,750\nread off the digits to that key, or\nletters, numbers, characters, whatever.\n\n597\n00:34:35,750 --> 00:34:38,710\nSo you've got to find some way\nto get that exchange to happen.\n\n598\n00:34:38,710 --> 00:34:42,210\nThe problem is, what if this host,\nwhat if that's me at home,\n\n599\n00:34:42,210 --> 00:34:46,440\nsitting on my computer, and\nthe web server is Amazon.com, right.\n\n600\n00:34:46,440 --> 00:34:51,610\nI can't just call up Amazon and say,\nhey, guys, Amazon, good to talk to you.\n\n601\n00:34:51,610 --> 00:34:52,990\nHere's my SSL key.\n\n602\n00:34:52,990 --> 00:34:55,740\nI need you to punch this in on\nyour web servers, all right.\n\n603\n00:34:55,740 --> 00:34:56,880\nThey're gonna say, well what?\n\n604\n00:34:56,880 --> 00:34:58,989\nYou know, are you gonna buy something?\n\n605\n00:34:58,989 --> 00:35:01,276\n[LAUGH] You know, you can't reach out and\n\n606\n00:35:01,276 --> 00:35:04,650\nexpect all these people to store\na copy of your Private Key.\n\n607\n00:35:04,650 --> 00:35:08,370\nAnd even if you could, how do you know\nthat you should trust them, right?\n\n608\n00:35:08,370 --> 00:35:09,430\nYou know, you hand out this key,\n\n609\n00:35:09,430 --> 00:35:11,640\nhow do you know that they're\nsecuring it properly.\n\n610\n00:35:11,640 --> 00:35:16,320\nSo this model,\nright here is symmetric encryption.\n\n611\n00:35:16,320 --> 00:35:21,190\nSymmetric is the same keys being used\nto encrypt and decrypt the data, but\n\n612\n00:35:21,190 --> 00:35:24,880\nit's not very effective in a public\ninfrastructure type model.\n\n613\n00:35:24,880 --> 00:35:31,620\nSo instead, more commonly, we're going to\nuse what's called asymmetric encryption.\n\n614\n00:35:31,620 --> 00:35:34,560\nAn asymmetric encryption is different,\nall right.\n\n615\n00:35:34,560 --> 00:35:38,570\nThe way asymmetric encryption\nworks is basically,\n\n616\n00:35:38,570 --> 00:35:40,550\nwe start off with a Private Key.\n\n617\n00:35:40,550 --> 00:35:42,270\nSo if I'm a Host and\n\n618\n00:35:42,270 --> 00:35:47,970\nI browse to Amazon's website,\nat Amazon, they've got a Private Key.\n\n619\n00:35:47,970 --> 00:35:54,780\nAll right, and from that Private Key, they\ngenerate what's called a Public Key and\n\n620\n00:35:54,780 --> 00:36:02,190\nthe Public Key is generated\nbased on that Private Key.\n\n621\n00:36:02,190 --> 00:36:06,140\nNow the Private Key can encrypt and\ndecrypt data, but\n\n622\n00:36:06,140 --> 00:36:09,880\nthe Public Key can only encrypt data.\n\n623\n00:36:09,880 --> 00:36:10,670\nIt can't decrypt.\n\n624\n00:36:10,670 --> 00:36:13,420\nIt's just used for encrypting data.\n\n625\n00:36:13,420 --> 00:36:19,440\nSo they generate that Public Key, and they\nsend me a copy right over the Internet.\n\n626\n00:36:19,440 --> 00:36:22,240\nThey just send it right across\nthe Internet to me at the time I go\n\n627\n00:36:22,240 --> 00:36:23,310\nto the web page.\n\n628\n00:36:23,310 --> 00:36:24,710\nAll right?\n\n629\n00:36:24,710 --> 00:36:30,190\nThen, when I have that key I\ncan take my unencrypted text,\n\n630\n00:36:30,190 --> 00:36:33,900\nand I can encrypt it\nusing that Public Key.\n\n631\n00:36:33,900 --> 00:36:37,240\nNow it becomes ciphertext, and\nI can send it to their side.\n\n632\n00:36:37,240 --> 00:36:39,468\nAnd they can decrypt it\nusing the Private Key.\n\n633\n00:36:41,135 --> 00:36:46,215\nIf a hacker were sitting in between and\nthey intercept this Public Key while\n\n634\n00:36:46,215 --> 00:36:51,355\nit's in transit, the Public Key,\nit actually originated from over there and\n\n635\n00:36:51,355 --> 00:36:56,505\ncrossed the internet, so if a hacker\nintercepts that what can they do?\n\n636\n00:36:56,505 --> 00:36:58,985\n>> They can encrypt, they can't decrypt,\n\n637\n00:36:58,985 --> 00:37:03,210\nthey can't read what I'm sending\n>> So I get my confidentiality.\n\n638\n00:37:03,210 --> 00:37:05,580\nI know they're not reading my text.\n\n639\n00:37:05,580 --> 00:37:08,980\nThey could encrypt stuff and\ntry to inject it in the message, but\n\n640\n00:37:08,980 --> 00:37:11,840\nif they don't know my sequence numbers,\nif they don't know what communication is\n\n641\n00:37:11,840 --> 00:37:13,470\nhappening, it's not going\nto do them a lot of good.\n\n642\n00:37:13,470 --> 00:37:15,870\nThey're just garbage packets\nthat are gonna get thrown away.\n\n643\n00:37:15,870 --> 00:37:18,630\nSo it's very, very effective.\n\n644\n00:37:18,630 --> 00:37:23,560\nNow when we connect up like this,\nthis is allowing us to encrypt data and\n\n645\n00:37:23,560 --> 00:37:25,880\nsend it to Amazon, but\n\n646\n00:37:25,880 --> 00:37:29,490\nwhat if Amazon wants to encrypt data\nto send back to us for the reply?\n\n647\n00:37:29,490 --> 00:37:32,240\nSo we need to go another step further.\n\n648\n00:37:32,240 --> 00:37:38,560\nWe take this Public Key and\nwe use it to create a temporary one time,\n\n649\n00:37:38,560 --> 00:37:45,350\nsession only, Private Pey that we use\njust for this session with Amazon.\n\n650\n00:37:45,350 --> 00:37:46,760\nAnd based on that Private Key,\n\n651\n00:37:46,760 --> 00:37:50,900\nwe then generate a Public Key that\ngets transmitted to the other side so\n\n652\n00:37:50,900 --> 00:37:55,540\nthat they then have something\nthey can use to encrypt data.\n\n653\n00:37:55,540 --> 00:37:58,440\nAnd send to us,\nwhich we can decrypt, all right?\n\n654\n00:37:58,440 --> 00:38:03,160\nAnd if we go back to\nthe idea of transmission,\n\n655\n00:38:03,160 --> 00:38:05,930\nwe sent them this Public Key.\n\n656\n00:38:05,930 --> 00:38:08,800\nThey sent us that Public Key.\n\n657\n00:38:08,800 --> 00:38:13,170\nThe Private Keys never\ncrossed the network.\n\n658\n00:38:13,170 --> 00:38:17,793\nSo that hacker, so\nif I've got a hacker out here on\n\n659\n00:38:17,793 --> 00:38:25,410\nthe Internet, Yep, like that, there we go.\n\n660\n00:38:25,410 --> 00:38:29,250\nThat hacker, if they're monitoring all\nof this traffic right here, right,\n\n661\n00:38:29,250 --> 00:38:31,960\nthey can see everything\ncrossing the Internet.\n\n662\n00:38:31,960 --> 00:38:35,120\nIf they're monitoring that,\nthey can get our Private Keys.\n\n663\n00:38:35,120 --> 00:38:39,360\nSo they can encrypt and throw it in their\ncommunication, but they can't decrypt.\n\n664\n00:38:39,360 --> 00:38:41,680\nThis is a secure communications path.\n\n665\n00:38:41,680 --> 00:38:43,290\nAnd it's all done dynamic, right?\n\n666\n00:38:43,290 --> 00:38:44,730\nAll done on the spot.\n\n667\n00:38:44,730 --> 00:38:49,310\nWhen you go to Amazon.com, heck when you\ngo to ITPro.TV and you click on that login\n\n668\n00:38:49,310 --> 00:38:51,900\nlink, that's exactly what\nyou're doing with our servers.\n\n669\n00:38:51,900 --> 00:38:55,630\nWe have a Private Key\nalready on our website and\n\n670\n00:38:55,630 --> 00:38:58,990\nwe are generating a Public Key,\nit's stored up there on the website.\n\n671\n00:38:58,990 --> 00:39:00,650\nAnd we're sending you a copy of it.\n\n672\n00:39:00,650 --> 00:39:05,080\nAnd then this negotiation,\nthis asymmetric negotiation happens.\n\n673\n00:39:05,080 --> 00:39:11,160\nAsymmetric just means that we have one key\nfor encryption and one key for decryption.\n\n674\n00:39:11,160 --> 00:39:12,930\nDifferent keys are used for\n\n675\n00:39:12,930 --> 00:39:17,970\nboth processes or processes,\nwhatever the right word is there.\n\n676\n00:39:17,970 --> 00:39:21,590\nSo symmetric encryption,\none key does the whole job.\n\n677\n00:39:21,590 --> 00:39:23,080\nAsymmetric, two keys.\n\n678\n00:39:24,090 --> 00:39:27,580\nNow you might ask yourself,\nwell if asymmetric uses two keys,\n\n679\n00:39:27,580 --> 00:39:28,830\nisn't it more secure?\n\n680\n00:39:28,830 --> 00:39:29,710\nDon't we want to use that?\n\n681\n00:39:29,710 --> 00:39:31,190\nWhy do we even have symmetric?\n\n682\n00:39:31,190 --> 00:39:34,420\nWell, there is one nice thing\nabout symmetric encryption.\n\n683\n00:39:34,420 --> 00:39:35,600\nIt's a lot more efficient.\n\n684\n00:39:35,600 --> 00:39:36,880\nIt's fast.\n\n685\n00:39:36,880 --> 00:39:41,640\nBecause it's the same key encrypting and\ndecrypting your systems can do it faster.\n\n686\n00:39:41,640 --> 00:39:44,920\nWhen you have different keys,\nit's more of a performance hit.\n\n687\n00:39:44,920 --> 00:39:45,987\nSo if possible,\n\n688\n00:39:45,987 --> 00:39:51,402\nyou'd prefer to do symmetric encryption\nbecause it is more efficient, but you'll\n\n689\n00:39:51,402 --> 00:39:56,300\nhave to overcome some of the weaknesses\ninvolved in exchanging those keys.\n\n690\n00:39:56,300 --> 00:40:00,620\nAnd that's where we lead into one of the\nfirst encryption algorithms I wanna talk\n\n691\n00:40:00,620 --> 00:40:04,000\nabout Which is the Diffie-Hellman\nkey exchange, all right?\n\n692\n00:40:04,000 --> 00:40:05,340\nIt's a bit of a mouthful.\n\n693\n00:40:05,340 --> 00:40:09,130\nDiffie-Hellman refers to two people,\nDiffie and Hellman [LAUGH].\n\n694\n00:40:09,130 --> 00:40:11,730\nIt's easy to remember.\n\n695\n00:40:11,730 --> 00:40:18,560\nAnd they came up with a secure way to\nexchange keys without allowing them to be\n\n696\n00:40:18,560 --> 00:40:22,050\nintercepted, and there's actually several\ndifferent versions of Diffie-Hellman now.\n\n697\n00:40:22,050 --> 00:40:25,580\nThe popular ones are one,\ntwo, three, five,\n\n698\n00:40:25,580 --> 00:40:26,180\nand seven\n>> Yes\n\n699\n00:40:26,180 --> 00:40:28,150\n>> Right, those are the popular ones.\n\n700\n00:40:28,150 --> 00:40:31,060\nSo there's quite a few out there but\nthere's a secure\n\n701\n00:40:31,060 --> 00:40:36,720\nway of doing a key exchange and\nyou can do symmetric encryption.\n\n702\n00:40:36,720 --> 00:40:41,055\nIf you use a Diffie-Hellman key exchange,\nwhat happens is you actually use\n\n703\n00:40:41,055 --> 00:40:45,570\nasymmetric encryption to build\nup an initial session, and\n\n704\n00:40:45,570 --> 00:40:49,905\nthen you exchange symmetric keys\ninside of that temporary session.\n\n705\n00:40:49,905 --> 00:40:50,530\n>> Mm-hm.\n\n706\n00:40:50,530 --> 00:40:53,830\n>> And once the private keys\nare exchanged, then you flip over.\n\n707\n00:40:53,830 --> 00:40:56,760\nAnd so\nnow you're doing symmetric encryption.\n\n708\n00:40:56,760 --> 00:41:00,280\nYou start asymmetric, and\nthen flip to symmetric.\n\n709\n00:41:00,280 --> 00:41:01,720\nAnd by doing that,\n\n710\n00:41:01,720 --> 00:41:06,280\nyou get the benefits of having nice\nefficient speedy communications.\n\n711\n00:41:06,280 --> 00:41:09,700\nAnd you see that in VPN tunnels\nall the time, all right?\n\n712\n00:41:09,700 --> 00:41:12,700\nIn SSL, you don't normally see that\nbecause those sessions are coming and\n\n713\n00:41:12,700 --> 00:41:13,700\ngoing so fast.\n\n714\n00:41:13,700 --> 00:41:15,880\nBut in VPN tunnels,\nit pretty much always does that.\n\n715\n00:41:15,880 --> 00:41:17,855\nYou start asymmetric and\nflip over to symmetric.\n\n716\n00:41:17,855 --> 00:41:20,240\n>> Mm-hm.\n\n717\n00:41:20,240 --> 00:41:21,610\n>> So we don't use one or the other,\n\n718\n00:41:21,610 --> 00:41:23,910\nwe really use a combination of\nthe two in our networks today.\n\n719\n00:41:23,910 --> 00:41:24,520\n>> Yeah.\n\n720\n00:41:24,520 --> 00:41:26,710\nNow speaking of the combination\nof the two, then,\n\n721\n00:41:26,710 --> 00:41:30,230\nwe wanna make sure that we understand that\nthere's gonna be really a few different\n\n722\n00:41:30,230 --> 00:41:34,980\nprotocols that we need to make sure\nthat you know, just as an example here.\n\n723\n00:41:34,980 --> 00:41:39,570\nSo in terms of symmetric encryption\nthe earliest and most common one that\n\n724\n00:41:39,570 --> 00:41:42,040\nwe would have used widely would have been,\nI say the earliest,\n\n725\n00:41:42,040 --> 00:41:46,440\none of the earliest, is gonna be D-E-S or\nsometimes you hear people call it DES.\n\n726\n00:41:46,440 --> 00:41:49,920\nThat data encryption standard or\nsystem that we've talked about.\n\n727\n00:41:49,920 --> 00:41:54,780\nThat was actually used by the government\nfor about ten years before it was retired.\n\n728\n00:41:54,780 --> 00:41:57,820\nNow, they didn't retire it\nbecause it was broken, but\n\n729\n00:41:57,820 --> 00:42:01,160\nthey retired it because it was\nnearly ten years out there.\n\n730\n00:42:01,160 --> 00:42:02,360\nThey said look.\n\n731\n00:42:02,360 --> 00:42:07,090\nSomebody's going to break this soon and\nthen they retired it.\n\n732\n00:42:07,090 --> 00:42:10,650\nNow during that mean time,\nas you take a look at some of the other\n\n733\n00:42:10,650 --> 00:42:12,820\nsymmetric encryption\nprotocols that we have,\n\n734\n00:42:12,820 --> 00:42:18,240\nthat the rest of these were essentially\ndesigned to replace that first one there.\n\n735\n00:42:18,240 --> 00:42:22,290\nSo you see the three dash or\ntriple dash is what you see.\n\n736\n00:42:22,290 --> 00:42:26,690\nAES, which is actually the standard that\nthe United States government today uses,\n\n737\n00:42:26,690 --> 00:42:31,140\nand then you have some other older ones\nthat are out there too, RC4 and Blowfish,\n\n738\n00:42:31,140 --> 00:42:34,715\nwritten by the guy that's considered\nthe dean of encryption, right?\n\n739\n00:42:34,715 --> 00:42:36,310\n>> [LAUGH]\n>> Bruce Schneier.\n\n740\n00:42:36,310 --> 00:42:38,220\n>> I don't know how to say it.\n\n741\n00:42:38,220 --> 00:42:41,085\n>> I don't know how you say it,\nbut sorry if you're listening.\n\n742\n00:42:41,085 --> 00:42:42,650\n>> [LAUGH]\n>> There you go, but-\n\n743\n00:42:42,650 --> 00:42:43,900\n>> Now you insulted him.\n\n744\n00:42:43,900 --> 00:42:44,460\n>> Yeah.\n\n745\n00:42:44,460 --> 00:42:48,763\n>> [LAUGH]\n>> Now he's\n\n746\n00:42:48,763 --> 00:42:54,110\ngoing to encrypt me to death.\n\n747\n00:42:54,110 --> 00:42:59,150\nThere's several of these that\n\n748\n00:42:59,150 --> 00:43:04,820\nhave been out there for a long time.\n\n749\n00:43:04,820 --> 00:43:09,750\nAnd some of these other ones like AES in\nits secure form gives you 256 bits, so\n\n750\n00:43:09,750 --> 00:43:12,760\nit's quite a difference between\nthe old protocols and the new.\n\n751\n00:43:12,760 --> 00:43:16,000\nAnd some of this stuff, it really\ntook geniuses to come up with this.\n\n752\n00:43:16,000 --> 00:43:17,060\nSome of it didn't.\n\n753\n00:43:17,060 --> 00:43:21,920\nLike triple DES they said all right,\nif DES can get broken one day, what if we\n\n754\n00:43:21,920 --> 00:43:26,670\ntake data and we encrypt it with DES and\nthen we encrypt it a second time with DES.\n\n755\n00:43:26,670 --> 00:43:28,170\nAnd then we encrypt it\na third time with DES.\n\n756\n00:43:28,170 --> 00:43:30,120\nIf we do it three times,\nit's more secure, right?\n\n757\n00:43:30,120 --> 00:43:32,220\nIt doesn't take a rocket\nscientist to come up with that.\n\n758\n00:43:32,220 --> 00:43:34,620\nBut there's actually\na flaw in triple-DES even,\n\n759\n00:43:34,620 --> 00:43:36,620\nwhere you don't actually get\nthree times the security.\n\n760\n00:43:36,620 --> 00:43:37,320\nYou get two times.\n\n761\n00:43:37,320 --> 00:43:38,950\nYou get basically double.\n\n762\n00:43:38,950 --> 00:43:41,730\nSo it's not as secure as\nthey originally felt.\n\n763\n00:43:41,730 --> 00:43:46,240\nBut even the secure ones over time,\nas computers get more and more advanced,\n\n764\n00:43:46,240 --> 00:43:47,970\nthese become easier and easier to break.\n\n765\n00:43:47,970 --> 00:43:49,940\nSo we've got to be careful with those.\n\n766\n00:43:49,940 --> 00:43:53,460\nYou know that it's amazing that DES\nitself, right, was really cracked about\n\n767\n00:43:53,460 --> 00:43:57,860\nsix months after it was retired, which is\nkind of the weirdest thing in the world.\n\n768\n00:43:57,860 --> 00:43:59,970\nFinally a group said,\nyep, we just cracked it.\n\n769\n00:43:59,970 --> 00:44:03,430\nAnd you go, oh, good thing that was\nactually retired at that point and\n\n770\n00:44:03,430 --> 00:44:04,800\nthey hadn't figured it out.\n\n771\n00:44:04,800 --> 00:44:09,330\nBut that six months is what it took,\nten years and six months.\n\n772\n00:44:09,330 --> 00:44:12,770\nBut today, people are cracking\nthese things that are old.\n\n773\n00:44:12,770 --> 00:44:14,000\nI mean, minutes.\n\n774\n00:44:14,000 --> 00:44:16,460\n>> The big difference is\ndistributed computing.\n\n775\n00:44:16,460 --> 00:44:19,500\nSo, in the old days, if you wanted\nto break an encryption algorithm,\n\n776\n00:44:19,500 --> 00:44:21,290\nyou just had one computer to use to do it.\n\n777\n00:44:21,290 --> 00:44:22,980\nAnd if you had a super computer,\ngreat, but\n\n778\n00:44:22,980 --> 00:44:24,945\nif you had a desktop, You couldn't do it.\n\n779\n00:44:24,945 --> 00:44:27,410\n>> [LAUGH]\n>> Now people use distribute.\n\n780\n00:44:27,410 --> 00:44:29,610\nLike if you go to distributed.net,\nthey were really cool.\n\n781\n00:44:29,610 --> 00:44:31,370\nLet me pull up that site.\n\n782\n00:44:31,370 --> 00:44:36,770\nWhat they do is they have thousands\nof people run a little client\n\n783\n00:44:36,770 --> 00:44:42,176\non their distribute,\nam I spelling that right?\n\n784\n00:44:42,176 --> 00:44:47,780\n[LAUGH] Distributed.net, there we go.\n\n785\n00:44:47,780 --> 00:44:52,070\nThey have thousands of people run a little\nclient on their computer and it uses\n\n786\n00:44:52,070 --> 00:44:56,310\nthe spare CPU cycles on your computer\nto try and break security algorithms.\n\n787\n00:44:56,310 --> 00:44:58,290\nSo, they will have tens of thousands or\n\n788\n00:44:58,290 --> 00:45:02,240\neven hundreds of thousands of PCs all\nworking away on these algorithms.\n\n789\n00:45:02,240 --> 00:45:07,830\nAnd it makes algorithms that\nuse to be extremely secure.\n\n790\n00:45:07,830 --> 00:45:09,220\nIt does make them vulnerable.\n\n791\n00:45:09,220 --> 00:45:12,890\nAnd you'll see where right now\nthey're working on RC5 and OGR.\n\n792\n00:45:12,890 --> 00:45:15,320\nLet's look at their RC5 progress.\n\n793\n00:45:15,320 --> 00:45:20,638\nWhoa, that's not a very recent\nupdate right there, May of 2007.\n\n794\n00:45:20,638 --> 00:45:24,900\n>> [LAUGH]\n>> I wonder if they've stopped working.\n\n795\n00:45:24,900 --> 00:45:25,590\n>> Oh, look they have a prize.\n\n796\n00:45:25,590 --> 00:45:26,800\nLook at that, to the winner.\n\n797\n00:45:26,800 --> 00:45:27,410\n>> You get a prize.\n\n798\n00:45:27,410 --> 00:45:28,400\nYou get a stuffed cow!\n\n799\n00:45:28,400 --> 00:45:30,730\n>> No, it looks like actual money.\n\n800\n00:45:30,730 --> 00:45:32,460\n>> So they have broken several.\n\n801\n00:45:32,460 --> 00:45:35,490\nI mean, these were the guys that did,\nI think they broke RC4 first.\n\n802\n00:45:35,490 --> 00:45:37,360\nSo they moved through several of them.\n\n803\n00:45:37,360 --> 00:45:40,710\n>> But by having thousands of\ncomputers at your disposal you can\n\n804\n00:45:40,710 --> 00:45:44,130\nbreak their algorithms that they used\nto be just impossible to break, so\n\n805\n00:45:44,130 --> 00:45:45,310\nwe have to keep that in mind.\n\n806\n00:45:45,310 --> 00:45:47,590\n>> Yeah.\n>> As we pick our algorithms to make sure\n\n807\n00:45:47,590 --> 00:45:52,485\nthat we're picking ones that are secur and\nstrong enough for the data we're sending,\n\n808\n00:45:52,485 --> 00:45:56,270\nalso keep in mind that a hacker\ncould intercept your data, copy it.\n\n809\n00:45:56,270 --> 00:45:58,045\n>> Mm-hm.\n>> And just hold on to it.\n\n810\n00:45:58,045 --> 00:45:59,805\nAnd wait for\ncomputers to get more advanced.\n\n811\n00:45:59,805 --> 00:46:02,775\n>> Right.\n>> You know some datas might be sensitive\n\n812\n00:46:02,775 --> 00:46:04,710\njust for a day or a week, right.\n\n813\n00:46:04,710 --> 00:46:06,255\n>> Mm-hm.\n>> So let's say I'm going to be on\n\n814\n00:46:06,255 --> 00:46:07,540\nvacation.\n\n815\n00:46:07,540 --> 00:46:11,920\nAnd so if somebody found that out, they\nwould know that my house was empty and\n\n816\n00:46:11,920 --> 00:46:13,970\nit was the perfect time to break in,\nright?\n\n817\n00:46:13,970 --> 00:46:17,320\nWell if I'm on vacation for\na week, for one solid week and\n\n818\n00:46:17,320 --> 00:46:19,680\nthe time leading up to that\nweek that data is sensitive.\n\n819\n00:46:19,680 --> 00:46:22,850\nBut once my vacation is over,\ndo I care if somebody finds out about it?\n\n820\n00:46:22,850 --> 00:46:23,570\n>> Nope.\n>> No.\n\n821\n00:46:23,570 --> 00:46:27,240\nSo if it's just a week,\nI can pick any encryption algorithm I know\n\n822\n00:46:27,240 --> 00:46:29,500\nthat would take longer\nthan a week to break.\n\n823\n00:46:30,750 --> 00:46:35,035\nBut what if I was dealing with sensitive\nnational security information, right?\n\n824\n00:46:35,035 --> 00:46:37,580\n>> [LAUGH]\n>> That might have a 50-year seal on it.\n\n825\n00:46:37,580 --> 00:46:40,800\nI would need to pick an encryption\nalgorithm that I knew would take longer\n\n826\n00:46:40,800 --> 00:46:42,130\nthan 50 years to break.\n\n827\n00:46:42,130 --> 00:46:45,120\nAnd that's not just 50 years\nwith today's computers.\n\n828\n00:46:45,120 --> 00:46:49,610\nI need to think about 25 years from now,\nI still need this to last 25 more years.\n\n829\n00:46:49,610 --> 00:46:52,089\nSo you've got to pick an algorithm\nthat's appropriate for that, right?\n\n830\n00:46:53,240 --> 00:46:55,430\nSo paranoia is sometimes important.\n\n831\n00:46:55,430 --> 00:47:00,955\nSo those are all symmetric\nencryption algorithms right there.\n\n832\n00:47:00,955 --> 00:47:03,020\nAsymmetric are the other\nones that we talk about.\n\n833\n00:47:03,020 --> 00:47:07,735\nAnd I mentioned Diffie-Hellman which\nwe use all the time in VPN tunnels.\n\n834\n00:47:07,735 --> 00:47:11,760\nThere is also RSA which is\nalso the key component of SSL.\n\n835\n00:47:11,760 --> 00:47:15,520\nWhen we are building up secure socket\nlevel communications, we are using RSA\n\n836\n00:47:15,520 --> 00:47:20,340\ncertificates to authenticate and\nvalidate our systems as well as generate\n\n837\n00:47:20,340 --> 00:47:25,094\nthe public and private keys that we use\nto encrypt and decrypt our data for SSL.\n\n838\n00:47:25,094 --> 00:47:29,190\nAll right, and then at the beginning\nof the show we talk hashing algorithms.\n\n839\n00:47:29,190 --> 00:47:32,190\nMD5 and SHA-1 are the most common.\n\n840\n00:47:32,190 --> 00:47:33,860\nThere are others that are out there.\n\n841\n00:47:33,860 --> 00:47:35,260\nWe saw them earlier.\n\n842\n00:47:35,260 --> 00:47:38,210\nBut for the exam these\nare the main ones that you'll see.\n\n843\n00:47:38,210 --> 00:47:41,100\nAnd it's probably a good idea to\nmemorize this list right here.\n\n844\n00:47:41,100 --> 00:47:42,750\n>> Yeah.\n>> Because these can pop up on the exam\n\n845\n00:47:42,750 --> 00:47:46,710\nand they can ask you which is what type\nor, do a drag and drop and you drag it in.\n\n846\n00:47:46,710 --> 00:47:48,780\nDifferent things like that can pop up and\n\n847\n00:47:48,780 --> 00:47:51,580\nit's a good thing to\ncommit to the old memory.\n\n848\n00:47:51,580 --> 00:47:52,319\n>> Yeah.\nYou said,\n\n849\n00:47:52,319 --> 00:47:57,059\nit's fairly relatively easy points here on\nthe exam if you actually have I have some\n\n850\n00:47:57,059 --> 00:47:59,170\nof this stuff memorized here for us.\n\n851\n00:47:59,170 --> 00:48:02,960\n>> All right, so\nlet me jump back to our objectives here.\n\n852\n00:48:02,960 --> 00:48:06,717\nSo, if we're dealing with a lot\nof keys and certificates and\n\n853\n00:48:06,717 --> 00:48:11,000\nthings like that, how could we keep\ntrack of all this stuff, right?\n\n854\n00:48:11,000 --> 00:48:12,670\nIt becomes quite a bit.\n\n855\n00:48:12,670 --> 00:48:16,616\nAnd when you're dealing with like the\nAmazon.coms of the world, stuff like that,\n\n856\n00:48:16,616 --> 00:48:19,380\nfinding trusted keys\nbecomes very difficult.\n\n857\n00:48:19,380 --> 00:48:23,520\nAnd so if we're gonna be implementing\nsymmetric and asymmetric encryption, and\n\n858\n00:48:23,520 --> 00:48:27,210\nwe're gonna be using digital signatures\nand all that, we'll probably need to\n\n859\n00:48:27,210 --> 00:48:33,310\ncombine this with a PKI,\nwhich is a public key infrastructure.\n\n860\n00:48:33,310 --> 00:48:36,380\nThat's where we have servers that\nare called certificate authorities\n\n861\n00:48:36,380 --> 00:48:40,700\nthat are designed to issue out trusted\ncertificates for us to use for encryption.\n\n862\n00:48:40,700 --> 00:48:42,745\nAnd they can manage if\na certificate gets lost.\n\n863\n00:48:42,745 --> 00:48:46,870\nThey can expire it or nullify it so\nthe certificate's no longer trusted.\n\n864\n00:48:46,870 --> 00:48:51,440\nBut they can manage it and maintain\nthat only authorized people are getting\n\n865\n00:48:51,440 --> 00:48:54,160\ncertificates and\nusing those for communications.\n\n866\n00:48:54,160 --> 00:48:57,850\nThere is a public infrastructure\nalready in place on the Internet.\n\n867\n00:48:57,850 --> 00:49:04,330\nYou have a lot of registrars like\nVerisign, and Thawte, and GeoTrust.\n\n868\n00:49:04,330 --> 00:49:05,750\nWho are some of the other big ones?\n\n869\n00:49:05,750 --> 00:49:09,880\nI know GoDaddy and register.com,\nbut they are a Sub.\n\n870\n00:49:11,140 --> 00:49:13,340\n>> I can't remember one\nthat we saw on Google.\n\n871\n00:49:13,340 --> 00:49:15,590\nI think they may be one now.\n\n872\n00:49:15,590 --> 00:49:16,560\n>> Google?\n>> Yeah.\n\n873\n00:49:16,560 --> 00:49:17,382\n>> I could believe it.\n\n874\n00:49:17,382 --> 00:49:18,270\nThey're definitely big enough.\n\n875\n00:49:18,270 --> 00:49:21,820\nSo a lot of these providers that\nare out there, that your web browsers,\n\n876\n00:49:21,820 --> 00:49:24,430\nlike Internet Explorer and\nFirefox and Chrome and\n\n877\n00:49:24,430 --> 00:49:28,080\nstuff, that they automatically trust those\nvarious providers that are out there.\n\n878\n00:49:28,080 --> 00:49:31,000\nSo as long as we get certificates\nfrom them, great, they're trusted,\n\n879\n00:49:31,000 --> 00:49:32,030\nwe can use them.\n\n880\n00:49:32,030 --> 00:49:33,720\nThe only problem is they cost-\n>> Money.\n\n881\n00:49:33,720 --> 00:49:36,100\n>> Money.\nSo if you need thousands of certificates,\n\n882\n00:49:36,100 --> 00:49:37,610\nit gets expensive fast.\n\n883\n00:49:37,610 --> 00:49:40,220\nYou can create your own\npublic key infrastructure,\n\n884\n00:49:40,220 --> 00:49:42,270\nyou can bring up your\nown certificate server.\n\n885\n00:49:42,270 --> 00:49:44,050\nBut all the laptops and\n\n886\n00:49:44,050 --> 00:49:48,400\ndesktops in your organization, they're\nnot gonna trust your CA by default.\n\n887\n00:49:48,400 --> 00:49:52,491\nSo you'll have to generate what's called\na root certificate and you'll need to\n\n888\n00:49:52,491 --> 00:49:56,655\ninstall that root certificate on all the\nclients that you want to trust your root.\n\n889\n00:49:56,655 --> 00:49:59,818\nAnd when you do that, now you can\nissue out certificates like crazy and\n\n890\n00:49:59,818 --> 00:50:03,430\nthey'll be valid and you don't have\nto pay out an outside provider.\n\n891\n00:50:03,430 --> 00:50:07,910\nSo Cisco does not have a PKI offering for\nyou.\n\n892\n00:50:07,910 --> 00:50:12,350\nSo if you want to do that, you'll have\nto pick an operating system, Linux, OSX,\n\n893\n00:50:12,350 --> 00:50:13,890\nWindows, they can all do it.\n\n894\n00:50:13,890 --> 00:50:16,100\nThere's different ways for\ndoing it on each one.\n\n895\n00:50:16,100 --> 00:50:18,150\nYou'll need to research the OS.\n\n896\n00:50:18,150 --> 00:50:19,680\nAs an IT Pro TV subscriber,\n\n897\n00:50:19,680 --> 00:50:23,760\nyou have the Windows Server 2012\nshows as part of your subscription.\n\n898\n00:50:23,760 --> 00:50:27,340\nIf you jump over to the Is\nit the 70-411 show?\n\n899\n00:50:27,340 --> 00:50:29,610\n>> I can't remember it's 410 or 411 yes.\n\n900\n00:50:29,610 --> 00:50:33,690\n>> It's one of those where we go\ninto how to set up a certificate\n\n901\n00:50:33,690 --> 00:50:36,680\nauthority on a Windows machine,\non a Windows server.\n\n902\n00:50:36,680 --> 00:50:39,480\nSo if you want to see that, you can jump\nover to that show and catch it there.\n\n903\n00:50:39,480 --> 00:50:42,860\nIf you want to do it on Linux or\nOSX, well,\n\n904\n00:50:42,860 --> 00:50:46,090\nwe actually will have a Linux show here\nin a few months that will cover that.\n\n905\n00:50:46,090 --> 00:50:50,520\nI don't know that we'll ever have an OSX\none, because not anything against OSX, but\n\n906\n00:50:50,520 --> 00:50:53,900\nApple really doesn't push\nhard on the server market.\n\n907\n00:50:53,900 --> 00:50:56,240\nAnd they're more of an end user thing.\n\n908\n00:50:56,240 --> 00:50:59,280\nSo that's just the decision\nthat they've made internally so\n\n909\n00:50:59,280 --> 00:51:02,680\nI don't know that we'll ever tackle that\nbut you can find instructions online.\n\n910\n00:51:02,680 --> 00:51:04,040\nIt doesn't mean you can't do it right?\n\n911\n00:51:04,040 --> 00:51:09,120\nOSX runs on top of BSD and\nBSD absolutely supports being a CA.\n\n912\n00:51:09,120 --> 00:51:11,510\n>> Now Don, we've only got a few\nminutes before the break, but\n\n913\n00:51:11,510 --> 00:51:15,640\nlets just talk a little bit about,\nbecause you mentioned that today we use\n\n914\n00:51:15,640 --> 00:51:19,620\nthe idea of symmetric and\nasymmetric in combination hit.\n\n915\n00:51:19,620 --> 00:51:20,300\nRight?\n\n916\n00:51:20,300 --> 00:51:22,080\nSo we're not just fully doing symmetric.\n\n917\n00:51:22,080 --> 00:51:24,550\nWe're not just fully\ndoing asymmetric here.\n\n918\n00:51:24,550 --> 00:51:27,420\nSo, what's the combination about Don?\n\n919\n00:51:27,420 --> 00:51:28,170\n>> I don't know.\n\n920\n00:51:28,170 --> 00:51:28,728\nWhat is it?\n\n921\n00:51:28,728 --> 00:51:29,976\n[LAUGH]\n>> [LAUGH]\n\n922\n00:51:29,976 --> 00:51:30,740\n>> All right.\n\n923\n00:51:30,740 --> 00:51:33,745\nSo for us, I was hoping Don\nwould actually jump in on this.\n\n924\n00:51:33,745 --> 00:51:35,020\n>> [LAUGH]\n>> But maybe not.\n\n925\n00:51:35,020 --> 00:51:39,230\nWell for us, we take our regular data,\nthe data that we need to transmit over to\n\n926\n00:51:39,230 --> 00:51:44,470\nthe over side, and we encrypt\nthat with a symmetric encryption.\n\n927\n00:51:44,470 --> 00:51:49,240\nThen what we do is we take that key,\nand we actually now use that public key\n\n928\n00:51:49,240 --> 00:51:54,440\nencryption or the asymmetric encryption\nto send that key over instead.\n\n929\n00:51:54,440 --> 00:51:57,110\nThis provides us security for the key and\n\n930\n00:51:57,110 --> 00:52:01,460\nactually also provides us security for the\nactual data we're gonna be sending across.\n\n931\n00:52:01,460 --> 00:52:03,660\nIt's a combination of both here,\nis what we have.\n\n932\n00:52:03,660 --> 00:52:07,630\n>> Yeah, and the nice part about\nthat is with the symmetric side\n\n933\n00:52:07,630 --> 00:52:08,720\nwe know we get better efficiency.\n\n934\n00:52:08,720 --> 00:52:12,050\nBut we just start out asymmetric,\nget that key exchange, and\n\n935\n00:52:12,050 --> 00:52:13,360\nthen flip over to symmetric.\n\n936\n00:52:13,360 --> 00:52:16,290\nSo we get the best of both worlds,\nincreased security,\n\n937\n00:52:16,290 --> 00:52:17,700\nefficient encryption and decryption.\n\n938\n00:52:17,700 --> 00:52:19,060\nIt is the best to have.\n\n939\n00:52:19,060 --> 00:52:19,690\n>> Yep.\n>> So\n\n940\n00:52:19,690 --> 00:52:23,390\nwe'll see that when we set up a VPN tunnel\non these routers here in a few minutes,\n\n941\n00:52:23,390 --> 00:52:25,540\nwe'll get a chance to kinda\nsee as we set that up,\n\n942\n00:52:25,540 --> 00:52:28,690\nthough I actually have to pick\ntwo different sets of encryption.\n\n943\n00:52:28,690 --> 00:52:30,620\n>> Right.\n>> One for the initial phase one where\n\n944\n00:52:30,620 --> 00:52:34,800\nwe're doing asymmetric and then for\nphase two where we're doing symmetric, so\n\n945\n00:52:34,800 --> 00:52:35,770\nwe'll get a chance to see that.\n\n946\n00:52:35,770 --> 00:52:37,060\n>> Right, that's pretty cool.\n\n947\n00:52:37,060 --> 00:52:37,690\nYep.\n\n948\n00:52:37,690 --> 00:52:39,740\nLet's see.\nWe talked about SSL a little bit, but\n\n949\n00:52:39,740 --> 00:52:41,280\nwe do still need to talk about, okay.\n\n950\n00:52:41,280 --> 00:52:42,970\nAll right, guys.\nSo I think we're good.\n\n951\n00:52:42,970 --> 00:52:43,920\nSo why don't we stop here?\n\n952\n00:52:43,920 --> 00:52:47,570\nWhen we get back, we're gonna talk about\nsome VPN technologies, IPsec and SSL,\n\n953\n00:52:47,570 --> 00:52:51,540\nand then we're gonna dive into how we\nactually get all this stuff set up and\n\n954\n00:52:51,540 --> 00:52:52,530\nget a chance to kinda see it.\n\n955\n00:52:52,530 --> 00:52:53,850\nSo stay tuned.\n\n956\n00:52:53,850 --> 00:52:56,366\nWhen we get back,\nmore VPN action after this.\n\n957\n00:52:56,366 --> 00:53:04,716\n[MUSIC]\n\n958\n00:53:04,716 --> 00:53:06,020\nAll right.\nWelcome back, everybody.\n\n959\n00:53:06,020 --> 00:53:10,190\nSo enough talking about standards and\nprotocols.\n\n960\n00:53:10,190 --> 00:53:13,891\nEven our director over here\nis trying to choke himself.\n\n961\n00:53:13,891 --> 00:53:15,984\n>> [LAUGH]\n>> You can only take so many letters and\n\n962\n00:53:15,984 --> 00:53:17,800\nacronyms and stuff thrown at you.\n\n963\n00:53:17,800 --> 00:53:20,140\nSo let's see this in action.\n\n964\n00:53:20,140 --> 00:53:20,680\n>> That's right.\n\n965\n00:53:20,680 --> 00:53:24,160\n>> Now, if we wanna build\na VPN on a Cisco router, and\n\n966\n00:53:24,160 --> 00:53:27,680\non the exam it is gonna be router\nbased VPNs, not ASA based.\n\n967\n00:53:27,680 --> 00:53:30,230\nSo we wanna build a VPN on a router,\nthere's actually two choices for\n\n968\n00:53:30,230 --> 00:53:32,010\nwhat type of VPN we want.\n\n969\n00:53:32,010 --> 00:53:35,790\nThere's IPsec,\nwhich is Internet Protocol Security.\n\n970\n00:53:35,790 --> 00:53:36,920\nMore acronyms.\n\n971\n00:53:36,920 --> 00:53:40,290\nAnd there's SSL, Secure Socket Layer,\nyou can build SSL VPNs.\n\n972\n00:53:40,290 --> 00:53:42,060\nWe're going to talk about SSL VPNs later.\n\n973\n00:53:42,060 --> 00:53:44,930\nRight now,\nwere are going to focus on IPsec and\n\n974\n00:53:44,930 --> 00:53:49,280\nIPsec VPNs are what we normally use for\nwhat are called site-to-site VPNs.\n\n975\n00:53:49,280 --> 00:53:54,015\nThat means this isn't somebody firing up\ntheir laptop or desktop and VPNing in.\n\n976\n00:53:54,015 --> 00:53:58,305\nThis is a router to a router, or\na router to a firewall, or two firewalls\n\n977\n00:53:58,305 --> 00:54:02,085\nbuilding a tunnel to each other that\nallows an entire facility to be connected.\n\n978\n00:54:02,085 --> 00:54:05,655\nThese are very common in home office,\nbranch office scenarios.\n\n979\n00:54:05,655 --> 00:54:07,415\n>> Yeah, the advantage of this for\n\n980\n00:54:07,415 --> 00:54:10,790\nmost end users is that they don't\neven know what's going on right?\n\n981\n00:54:10,790 --> 00:54:13,790\nSo they don't know that they're actually\nconnecting with the branch office and\n\n982\n00:54:13,790 --> 00:54:16,010\nthat all of the traffic\nis secured in between.\n\n983\n00:54:16,010 --> 00:54:16,750\nIt doesn't affect them.\n\n984\n00:54:16,750 --> 00:54:20,050\nThey don't have to worry about whether or\nnot they're connecting correctly or\n\n985\n00:54:20,050 --> 00:54:21,570\nif they've set it up here.\n\n986\n00:54:21,570 --> 00:54:24,940\nIt's done for them and\nwe're ready to go once it's set up.\n\n987\n00:54:24,940 --> 00:54:25,880\n>> All right.\n\n988\n00:54:25,880 --> 00:54:29,380\nSo let me fire up this little\ndocument here I've got.\n\n989\n00:54:29,380 --> 00:54:32,260\nAnd I wanna give you\nguys a sample scenario.\n\n990\n00:54:32,260 --> 00:54:33,970\nHere's what we're gonna work with.\n\n991\n00:54:33,970 --> 00:54:36,660\nI've got two routers,\nrouter one and router two.\n\n992\n00:54:36,660 --> 00:54:39,780\nRouter one is gonna be\nthe ITProTV network right here.\n\n993\n00:54:39,780 --> 00:54:44,400\nSo we use the 10.1.230 network for\nour LAN and\n\n994\n00:54:44,400 --> 00:54:50,220\nI've got a router with a public\nIP of 209.251.133.186, all right?\n\n995\n00:54:50,220 --> 00:54:52,580\nOut there on the internet,\nthere's another router.\n\n996\n00:54:52,580 --> 00:54:58,258\nThis'll be my branch office and\nits got a public IP of 209.21.133.187.\n\n997\n00:54:58,258 --> 00:55:02,352\nIt happens to be in the same subnet but\nit could be on any subnet in the world.\n\n998\n00:55:02,352 --> 00:55:07,435\nAnd on the other end of that router,\nwe have a bunch of networks.\n\n999\n00:55:07,435 --> 00:55:11,206\n172.16.0.1 .2 .3, all over there and\n\n1000\n00:55:11,206 --> 00:55:16,165\nI have mislabeled that as the Internet and\nnow I've sent it all crazy.\n\n1001\n00:55:16,165 --> 00:55:21,955\nThis is like my branch LAN or I can\ncall it my home office LAN or whatever.\n\n1002\n00:55:23,530 --> 00:55:24,040\nThere we go.\n\n1003\n00:55:24,040 --> 00:55:26,710\nAll right.\nSo, that's the network that's remote.\n\n1004\n00:55:26,710 --> 00:55:31,196\nNow, right now I could communicate [SOUND]\nright across these, and off we go.\n\n1005\n00:55:31,196 --> 00:55:34,400\nBut, these are private IPs,\nwhich are not allowed on the internet.\n\n1006\n00:55:34,400 --> 00:55:37,100\nThese are private IPs also\nnot allowed on the internet.\n\n1007\n00:55:37,100 --> 00:55:40,460\nAnd somebody could intercept my traffic,\nand capture it.\n\n1008\n00:55:40,460 --> 00:55:41,260\nSo that's a problem.\n\n1009\n00:55:42,280 --> 00:55:43,730\nSo, we need some way to encrypt it.\n\n1010\n00:55:43,730 --> 00:55:47,500\nWell first off, let's verify\nthat we really have a problem.\n\n1011\n00:55:47,500 --> 00:55:51,325\nI've got a sniffer set up to\n[COUGH] excuse me, monitor and\n\n1012\n00:55:51,325 --> 00:55:55,787\nintercept traffic on this link so\nwe can look at it and see whether or\n\n1013\n00:55:55,787 --> 00:55:58,040\nnot it is being encrypted or not.\n\n1014\n00:55:58,040 --> 00:56:00,330\nAnd I'm gonna use a non secure protocol.\n\n1015\n00:56:00,330 --> 00:56:04,590\nI'm going to use Telnet because I know\nthat Telnet is not secure, all right?\n\n1016\n00:56:04,590 --> 00:56:10,522\nSo let me go fire up my Wireshark, which\nI thought I had running, there it is.\n\n1017\n00:56:10,522 --> 00:56:13,710\nAll right, so I'm gonna fire up Wireshark,\nand I'll just start that up.\n\n1018\n00:56:15,290 --> 00:56:16,030\nThere we go.\n\n1019\n00:56:16,030 --> 00:56:21,450\nSo now I'm capturing traffic on that link,\nand I'm gonna fire up a Telnet session\n\n1020\n00:56:21,450 --> 00:56:27,303\nto a router over there on the other side,\nso I'll remote into a router over there.\n\n1021\n00:56:27,303 --> 00:56:28,389\nAll right.\n\n1022\n00:56:28,389 --> 00:56:32,700\nAnd I'm gonna log in with\nmy super secret password,\n\n1023\n00:56:32,700 --> 00:56:34,270\nwhich I think I just spelled wrong.\n\n1024\n00:56:34,270 --> 00:56:36,170\nI did.\nLet me try that again.\n\n1025\n00:56:37,250 --> 00:56:37,917\nAll right.\n\n1026\n00:56:37,917 --> 00:56:40,610\nAnd I'll go ahead and enable.\n\n1027\n00:56:40,610 --> 00:56:42,120\nSo now I'm in the router.\n\n1028\n00:56:42,120 --> 00:56:43,320\nAnd while I'm in the router,\n\n1029\n00:56:43,320 --> 00:56:46,710\nmaybe I'll do a show version\nto see what iOS I'm running.\n\n1030\n00:56:46,710 --> 00:56:51,380\nI might do a DIR to verify the iOS file.\n\n1031\n00:56:51,380 --> 00:56:55,470\nI might even do a show running-config\nbecause I wanna know what's going on in\n\n1032\n00:56:55,470 --> 00:56:59,090\nthe system, so I go through and\nI start looking, and here's my data.\n\n1033\n00:56:59,090 --> 00:57:00,080\nLife is good.\n\n1034\n00:57:00,080 --> 00:57:00,810\nThat's exciting.\n\n1035\n00:57:00,810 --> 00:57:02,040\nAll right, I'm done working.\n\n1036\n00:57:02,040 --> 00:57:02,840\nOkay.\n\n1037\n00:57:02,840 --> 00:57:04,920\nSo, I just did that whole communication.\n\n1038\n00:57:04,920 --> 00:57:07,870\nNow I'm gonna go back to Wireshark,\nwhere I was intercepting that data.\n\n1039\n00:57:07,870 --> 00:57:08,920\nNow my sniffer,\n\n1040\n00:57:08,920 --> 00:57:12,330\nif I go back to my diagram,\nis inserted on this network right here.\n\n1041\n00:57:12,330 --> 00:57:13,558\nIn the Internet.\n\n1042\n00:57:13,558 --> 00:57:17,960\nSo, my sniffer's running in between\nthese two routers on the public network.\n\n1043\n00:57:17,960 --> 00:57:23,170\nAnd if I go back into my data,\nI can come in and I can filter this down,\n\n1044\n00:57:23,170 --> 00:57:28,320\neither by IP or Protocol or whatever.\n\n1045\n00:57:28,320 --> 00:57:29,796\nBut I can find those packets.\n\n1046\n00:57:29,796 --> 00:57:30,709\n>> [CROSSTALK] packets.\n>> And I can see,\n\n1047\n00:57:30,709 --> 00:57:33,660\nTelnet because Telnet's not encrypted,\nright?\n\n1048\n00:57:33,660 --> 00:57:35,920\nSo it's right there in the packet.\n\n1049\n00:57:35,920 --> 00:57:41,580\nAnd as the attacker,\nif I choose to follow the TCP stream,\n\n1050\n00:57:41,580 --> 00:57:46,610\nWireshark will actually reassemble that\ncommunication for me, and what do I see?\n\n1051\n00:57:46,610 --> 00:57:48,760\nI see everything that happened.\n\n1052\n00:57:49,760 --> 00:57:53,360\nBy default, it shows me both directions\nof traffic, what was sent and\n\n1053\n00:57:53,360 --> 00:57:57,920\nwhat was received, so I'll see double type\non some things, cuz I typed the letter A,\n\n1054\n00:57:57,920 --> 00:58:01,430\nso I sent the letter A, and\nit displayed the letter A on screen.\n\n1055\n00:58:01,430 --> 00:58:06,350\nBut if I change it to just what\nwas entered, so if I go for\n\n1056\n00:58:06,350 --> 00:58:12,350\nwhat was sent, I can see where I log in,\nI typed admin to log in with.\n\n1057\n00:58:12,350 --> 00:58:13,150\n>> There's your password.\n\n1058\n00:58:13,150 --> 00:58:15,200\n>> I did type the wrong\npassword the first time.\n\n1059\n00:58:15,200 --> 00:58:17,000\nAnd then I logged in properly.\n\n1060\n00:58:17,000 --> 00:58:19,290\nI did a show version, DIR show version.\n\n1061\n00:58:19,290 --> 00:58:23,160\nIt's all right here in plain text,\nwhich is not a good thing.\n\n1062\n00:58:23,160 --> 00:58:28,560\nAnd if I switch it over to say show me\nthe responses, in the responses I can see-\n\n1063\n00:58:28,560 --> 00:58:29,840\n>> You get all of the information.\n\n1064\n00:58:29,840 --> 00:58:32,602\n>> There's show version,\nthere's the directory,\n\n1065\n00:58:32,602 --> 00:58:35,600\nh ere's where I did\nthe show runnin-config.\n\n1066\n00:58:35,600 --> 00:58:39,390\nAnd we know, like type seven passwords,\nwe know they're not secure.\n\n1067\n00:58:39,390 --> 00:58:44,089\nSo I could take that and\ngo fire up a web browser here.\n\n1068\n00:58:44,089 --> 00:58:49,999\nAnd let's do decrypt Cisco Type 7.\n\n1069\n00:58:49,999 --> 00:58:54,810\nAnd we'll pull up our friendly\nneighborhood Type 7 decrypter.\n\n1070\n00:58:54,810 --> 00:58:56,758\nYour password is cisco123.\n\n1071\n00:58:56,758 --> 00:58:59,878\nJust like that, the attacker now\nknows the IP address of my system,\n\n1072\n00:58:59,878 --> 00:59:03,517\nthey know the username, they know\nthe password, and they can get in, right?\n\n1073\n00:59:03,517 --> 00:59:07,680\nActually knew the password without doing\nthat because they saw where I typed it in.\n\n1074\n00:59:07,680 --> 00:59:12,000\nSo that's a big problem if you're\nsending traffic over the Internet.\n\n1075\n00:59:12,000 --> 00:59:17,490\n>> Yeah, so we need a way to ensure\nthat we can protect all this traffic.\n\n1076\n00:59:17,490 --> 00:59:20,730\nNow we did talk about the idea\nof encryption first, and\n\n1077\n00:59:20,730 --> 00:59:23,558\nso we actually are going to\nencrypt the traffic that we have.\n\n1078\n00:59:23,558 --> 00:59:26,130\nWe'll also need to provide for\nthe data integrity,\n\n1079\n00:59:26,130 --> 00:59:30,460\nas well as the ability to ensure\nthat we're receiving the data,\n\n1080\n00:59:30,460 --> 00:59:33,730\nhave the right router, and we're\nsending the data from the right router.\n\n1081\n00:59:33,730 --> 00:59:37,240\nSo you might hear also the term\norigin authentication,\n\n1082\n00:59:37,240 --> 00:59:40,790\nto ensure that we are getting the data\nfrom who we say we're gonna get.\n\n1083\n00:59:40,790 --> 00:59:43,670\nAnd that's what our\nVPN's gonna help us do.\n\n1084\n00:59:43,670 --> 00:59:46,330\n>> All right, now we're gonna\nachieve this building a VPN tunnel.\n\n1085\n00:59:46,330 --> 00:59:50,710\nThe hardest part about a VPN tunnel,\nis how many choices we have, all right?\n\n1086\n00:59:50,710 --> 00:59:53,350\nVPN tunnels work in two phases,\nphase one and phase two.\n\n1087\n00:59:53,350 --> 00:59:57,830\nIn phase one, you're doing your asymmetric\nencryption just to initiate a session and\n\n1088\n00:59:57,830 --> 01:00:02,280\nexchange some keys, then you flip over to\nsymmetric encryption where you're using\n\n1089\n01:00:02,280 --> 01:00:03,740\nthe same key to encrypt and decrypt.\n\n1090\n01:00:03,740 --> 01:00:07,520\nThat means we can pick encryption and\n\n1091\n01:00:07,520 --> 01:00:10,530\ndigital signature\nalgorithms at both phases.\n\n1092\n01:00:10,530 --> 01:00:13,020\nSo, you've actually got four\ndifferent protocols to pick from,\n\n1093\n01:00:13,020 --> 01:00:15,520\nas well as some other values and\nit gets very confusing.\n\n1094\n01:00:15,520 --> 01:00:20,870\nSo to help normalize all of this,\nwe have what's called the IPSec framework.\n\n1095\n01:00:20,870 --> 01:00:24,390\nNow, IPSec is not an encryption protocol.\n\n1096\n01:00:24,390 --> 01:00:28,310\nIPsec is a framework of all\nthe different options, and\n\n1097\n01:00:28,310 --> 01:00:33,310\nwe just need to pick the different options\nwe want, and as long as they match on both\n\n1098\n01:00:33,310 --> 01:00:36,120\nends, we'll be able to build up\na tunnel and be happy, right?\n\n1099\n01:00:36,120 --> 01:00:39,590\nIPsec just makes it easier for\ndifferent systems to interconnect.\n\n1100\n01:00:40,608 --> 01:00:43,227\nSo I'm gonna take our router,\nrouter one, and\n\n1101\n01:00:43,227 --> 01:00:47,827\nI'm going to build a VPN tunnel here using\nthe Cisco configuration professional.\n\n1102\n01:00:47,827 --> 01:00:52,700\nI'll go into my configuration screen and\nI'll go under VPN,\n\n1103\n01:00:52,700 --> 01:00:55,988\nand I'm gonna go to site-to-site VPN.\n\n1104\n01:00:55,988 --> 01:00:58,860\nSite-to-site VPN is where we're\nconnecting device to device.\n\n1105\n01:00:58,860 --> 01:01:03,653\nThese are typically our IPSec VPNs.\n\n1106\n01:01:03,653 --> 01:01:06,683\nAnd it's got a nice little wizard in\nhere where we can create a site-to-site\n\n1107\n01:01:06,683 --> 01:01:07,391\nVPN, if we want.\n\n1108\n01:01:07,391 --> 01:01:10,220\nYou'll see another option here for\nGRE tunnels.\n\n1109\n01:01:10,220 --> 01:01:12,960\nThat's a generic routing encapsulation,\nand\n\n1110\n01:01:12,960 --> 01:01:16,770\nthat's where we do an unencrypted tunnel\nused simply for routing purposes.\n\n1111\n01:01:16,770 --> 01:01:17,630\nWe don't need that here.\n\n1112\n01:01:17,630 --> 01:01:21,590\nWe actually want a true VPN,\nand so I'll launch that task.\n\n1113\n01:01:24,405 --> 01:01:26,755\nI could go with the quick setup.\n\n1114\n01:01:26,755 --> 01:01:30,365\nAnd with the quick setup, that's where the\nrouter makes all its choices on its own.\n\n1115\n01:01:30,365 --> 01:01:32,415\nCisco has some defaults.\n\n1116\n01:01:32,415 --> 01:01:35,275\nBut just so we can enlighten our minds,\nwe're gonna do this the full\n\n1117\n01:01:35,275 --> 01:01:38,690\nway where we'll do the step-by-step\nwizard and pick all of our own details.\n\n1118\n01:01:39,980 --> 01:01:45,080\nOn the next screen is where we get into\nour initial identifications, right?\n\n1119\n01:01:45,080 --> 01:01:49,050\nWe need to pick which interface on\nour router is gonna be building this\n\n1120\n01:01:49,050 --> 01:01:52,950\nconnection, and what IP address\nwe're gonna be connecting to.\n\n1121\n01:01:52,950 --> 01:01:55,956\nNow for me,\nI don't think I paid attention, did I?\n\n1122\n01:01:55,956 --> 01:01:58,835\nLet me see,\nI thing my GI00 is my public one.\n\n1123\n01:01:58,835 --> 01:02:00,110\nLet me just verify it.\n\n1124\n01:02:00,110 --> 01:02:00,730\nIt is.\n\n1125\n01:02:00,730 --> 01:02:01,380\nGood.\n\n1126\n01:02:01,380 --> 01:02:04,050\nYou can use the details button\nthere to check your IP.\n\n1127\n01:02:04,050 --> 01:02:07,550\nSo this is my interface that's\npointing out to the Internet, and\n\n1128\n01:02:07,550 --> 01:02:11,780\nmy peer has a static IP, so\nI'm gonna punch that in.\n\n1129\n01:02:11,780 --> 01:02:16,130\nNow, what if my peer has a dynamic IP,\nright?\n\n1130\n01:02:16,130 --> 01:02:21,490\nThat's okay, but at least one end of\nthe VPN tunnel has to have a static IP.\n\n1131\n01:02:21,490 --> 01:02:24,520\nSo, you can't have where\nboth people are dynamic.\n\n1132\n01:02:24,520 --> 01:02:28,060\nThey won't ever know who to talk to, so\nat least one end has to have a static IP.\n\n1133\n01:02:28,060 --> 01:02:30,110\nIt's better to have both ends.\n\n1134\n01:02:31,390 --> 01:02:32,270\nAll right.\n\n1135\n01:02:32,270 --> 01:02:34,930\nAnd then I need to pick a pre-shared key.\n\n1136\n01:02:34,930 --> 01:02:38,484\nNow if I have a public key infrastructure\nand I'm issuing RSA certificates,\n\n1137\n01:02:38,484 --> 01:02:40,180\nyou can use certificates.\n\n1138\n01:02:40,180 --> 01:02:42,437\nI don't have that in my\nlittle lab environment, so\n\n1139\n01:02:42,437 --> 01:02:45,075\nI'll just do a pre-shared key,\nand I can pick a password.\n\n1140\n01:02:45,075 --> 01:02:46,852\nI'll pick Cisco123.\n\n1141\n01:02:50,289 --> 01:02:51,955\nAll right.\n\n1142\n01:02:51,955 --> 01:02:55,205\nNext, it's gonna ask us\nabout the IKE proposals.\n\n1143\n01:02:55,205 --> 01:02:58,315\nNow, IKE is\nthe Inner Network Key Exchange.\n\n1144\n01:02:58,315 --> 01:02:59,185\nThis is phase one.\n\n1145\n01:02:59,185 --> 01:03:02,187\nThis is exchanging keys\nbetween the two ends to say,\n\n1146\n01:03:02,187 --> 01:03:03,960\nall right, this is the asymmetric level.\n\n1147\n01:03:03,960 --> 01:03:08,240\nLet's build up a session, and then we\ncan go and switch over to symmetric.\n\n1148\n01:03:08,240 --> 01:03:12,690\nAnd you'll see that the default\nis to do Triple Des with SHA-1,\n\n1149\n01:03:12,690 --> 01:03:15,790\nand it's gonna do Diffie-Hellman group 2,\nor\n\n1150\n01:03:15,790 --> 01:03:21,440\nDH2, which is going to provide that\nsecure key exchange at the beginning.\n\n1151\n01:03:21,440 --> 01:03:25,140\nOur authentication is a pre-shared key,\nand not a certificate,\n\n1152\n01:03:25,140 --> 01:03:27,600\notherwise it would say RSA there,\nall right?\n\n1153\n01:03:27,600 --> 01:03:32,070\nThat's probably fine for us, but if you\nwant to specify something different,\n\n1154\n01:03:32,070 --> 01:03:36,460\nyou can add in another proposal and\nyou can choose from the other protocol.\n\n1155\n01:03:36,460 --> 01:03:42,150\nSo, I might choose to do Triple Des or\nAES 256, maybe I wanna go hardcore.\n\n1156\n01:03:42,150 --> 01:03:44,950\nI can use MD5 or SHA-1.\n\n1157\n01:03:44,950 --> 01:03:48,620\nI can use RSA or\npre-shared key and Diffie-Hellman.\n\n1158\n01:03:48,620 --> 01:03:50,710\nThis router supports one, two and five.\n\n1159\n01:03:50,710 --> 01:03:53,820\nDifferent routers will support\ndifferent modes, all right?\n\n1160\n01:03:53,820 --> 01:03:54,960\nThat's worth mentioning.\n\n1161\n01:03:54,960 --> 01:03:57,920\nYou need to keep in mind\nthe router on the other end.\n\n1162\n01:03:57,920 --> 01:03:59,983\nIt may not have some of\nthe more advanced ones and\n\n1163\n01:03:59,983 --> 01:04:03,300\nin fact The router I'm on right now,\nthat's a current generation router.\n\n1164\n01:04:03,300 --> 01:04:05,000\nIt supports a lot of the good stuff.\n\n1165\n01:04:05,000 --> 01:04:06,590\nThe router I'm about to connect to?\n\n1166\n01:04:06,590 --> 01:04:10,243\nIt's actually pretty old, and so\nit may not have some of these\n\n1167\n01:04:10,243 --> 01:04:13,700\nadvanced algorithms, so\nI'm gonna add in one extra one.\n\n1168\n01:04:13,700 --> 01:04:17,505\nI'm gonna add in Triple DES with MD5, so\n\n1169\n01:04:17,505 --> 01:04:23,182\njust a little bit lower,\nI'll do DiffieHellman Group 1.\n\n1170\n01:04:24,330 --> 01:04:27,520\nSo I'm picking some of the lower end\nsettings that are still secure enough\n\n1171\n01:04:27,520 --> 01:04:31,270\nto use, but I just wanna make sure I've\ngot compatibility with the other side.\n\n1172\n01:04:31,270 --> 01:04:32,680\n>> Now Don before we move on from here,\n\n1173\n01:04:32,680 --> 01:04:35,385\nlet's talk about that lifetime a little\nbit, so that can be tricky, right?\n\n1174\n01:04:35,385 --> 01:04:35,940\n>> Mm-hm.\nYeah.\n\n1175\n01:04:35,940 --> 01:04:37,795\n>> It has to actually be\n>> One side,\n\n1176\n01:04:37,795 --> 01:04:43,065\nthe client has to always be less\nthan the server, or does it matter?\n\n1177\n01:04:44,135 --> 01:04:45,775\n>> Ideally, they should match.\n\n1178\n01:04:45,775 --> 01:04:48,015\n>> Right.\n>> But if the client side is less,\n\n1179\n01:04:48,015 --> 01:04:48,685\nthen it's fine.\n\n1180\n01:04:48,685 --> 01:04:50,447\nIf the client side is\nlonger it causes problems.\n\n1181\n01:04:50,447 --> 01:04:51,140\n>> Yeah.\n\n1182\n01:04:51,140 --> 01:04:55,920\n>> What happens is the keys that you use,\nthe keys are somewhat randomly generated,\n\n1183\n01:04:55,920 --> 01:04:57,120\nthe symmetric keys.\n\n1184\n01:04:57,120 --> 01:04:59,820\nSo what it'll do is it'll set\na lifetime to say every so\n\n1185\n01:04:59,820 --> 01:05:02,000\noften we need to generate new keys.\n\n1186\n01:05:02,000 --> 01:05:04,820\nIf you keep using the same key for\nlong periods of time\n\n1187\n01:05:04,820 --> 01:05:08,410\nan attacker can capture your data\n>> And if they keep working on it, and\n\n1188\n01:05:08,410 --> 01:05:12,510\nthey finally break it, they can go back to\nyour current data and start to break that.\n\n1189\n01:05:12,510 --> 01:05:16,820\nBut if you change your key every 24 hours,\nlike this is set to, then they would have\n\n1190\n01:05:16,820 --> 01:05:20,820\nto break the key within 24 hours in\norder to be able to decode your data.\n\n1191\n01:05:20,820 --> 01:05:22,690\nThat would be really challenging.\n\n1192\n01:05:22,690 --> 01:05:23,240\nRight?\n\n1193\n01:05:23,240 --> 01:05:26,450\nSo you want to set it for something low,\nCisco defaults to 24 hours, so\n\n1194\n01:05:26,450 --> 01:05:29,850\nwith this configuration we're about\nto do the two sides will be equal.\n\n1195\n01:05:29,850 --> 01:05:33,500\nIf they're not equal what will\nhappen is one side will try and\n\n1196\n01:05:33,500 --> 01:05:37,350\nreset the key before the other, and\nit will cause the VPN tunnel to drop.\n\n1197\n01:05:37,350 --> 01:05:42,250\nNow it will come right back up so that's\nnot a big deal, but during that drop.\n\n1198\n01:05:42,250 --> 01:05:43,970\n>> A lot of software will crash out.\n\n1199\n01:05:43,970 --> 01:05:47,260\nIf you have things like Lotus Notes,\nLotus Notes will absolutely die.\n\n1200\n01:05:47,260 --> 01:05:49,850\nAnd so\nsome software can really experience that.\n\n1201\n01:05:49,850 --> 01:05:54,760\nAnd so your end users will be exposed\nto that which you probably don't want.\n\n1202\n01:05:54,760 --> 01:05:58,140\nAll right, I'll leave it at 24 hours\nhere and that should be fine for us.\n\n1203\n01:05:58,140 --> 01:05:59,380\nAnd now you'll see that I've got two.\n\n1204\n01:05:59,380 --> 01:06:04,260\nNow it won't let me delete the one\nthat was created automatically, so\n\n1205\n01:06:04,260 --> 01:06:07,660\nif I want to change it permanently,\nI have to do it after the wizard, but for\n\n1206\n01:06:07,660 --> 01:06:10,540\nright now I do have my\ntwo little ones created.\n\n1207\n01:06:11,620 --> 01:06:15,230\n>> Now Don, I think we do have to select\nthat one before we move on, don't we?\n\n1208\n01:06:15,230 --> 01:06:16,980\n>> The one that we want to use, or not?\n\n1209\n01:06:16,980 --> 01:06:21,330\n>> On this one, when you set\nthese little proposals like this.\n\n1210\n01:06:21,330 --> 01:06:22,300\nIt's a proposal.\n\n1211\n01:06:22,300 --> 01:06:25,780\nIt will propose one, and if it doesn't\nmatch, then it'll move to the second one.\n\n1212\n01:06:25,780 --> 01:06:28,030\nSo it doesn't matter which one you select.\n\n1213\n01:06:28,030 --> 01:06:30,650\nCuz it'll basically cycle through\nthem until it finds one that\n\n1214\n01:06:30,650 --> 01:06:31,490\nmatches the other side.\n\n1215\n01:06:31,490 --> 01:06:32,200\n>> Yeah, sounds good.\n\n1216\n01:06:33,550 --> 01:06:37,660\n>> All right, on the next screen,\nnow it's talking about the transform set.\n\n1217\n01:06:37,660 --> 01:06:39,100\nNow this is important.\n\n1218\n01:06:39,100 --> 01:06:47,260\nWhen you build the tunnel,\nyou can do ESP or Or ESP and.\n\n1219\n01:06:48,680 --> 01:06:56,650\nAnd that means encrypt my data.\n\n1220\n01:06:56,650 --> 01:07:05,720\nIf we don't want to do\nencryption we turn it off.\n\n1221\n01:07:05,720 --> 01:07:07,500\nIf we wanna do digital signatures,\nwe turn it on.\n\n1222\n01:07:07,500 --> 01:07:08,950\nIf we don't, we turn it off.\n\n1223\n01:07:08,950 --> 01:07:12,880\nIf we want both, we do ESP integrity.\n\n1224\n01:07:12,880 --> 01:07:13,380\nAll right?\n\n1225\n01:07:13,380 --> 01:07:16,250\nThat means we're doing\nEncapsulating Security Payload and\n\n1226\n01:07:16,250 --> 01:07:17,935\nauthentication header together.\n\n1227\n01:07:17,935 --> 01:07:20,690\nAnd we get both, encryption and digital.\n\n1228\n01:07:20,690 --> 01:07:24,865\nThat' the default, so\nI don't have to mess with this.\n\n1229\n01:07:24,865 --> 01:07:27,355\nBut if I wanted to I could go in and\nI could add one.\n\n1230\n01:07:27,355 --> 01:07:32,185\nYou'll see here where we can\nturn off ESP is we want.\n\n1231\n01:07:32,185 --> 01:07:36,585\nIn here we can choose data, address,\nintegrity without encryption,\n\n1232\n01:07:36,585 --> 01:07:39,365\nso we could just do digital signing.\n\n1233\n01:07:39,365 --> 01:07:43,190\nIf it's public data, why worry\nabout the overhead of encrypting?\n\n1234\n01:07:43,190 --> 01:07:45,120\nYou can cut that out and\nyou'll increase performance.\n\n1235\n01:07:45,120 --> 01:07:46,070\n>> All right.\n\n1236\n01:07:46,070 --> 01:07:48,290\nNow, before we move on from here,\nthe idea of the mode right?\n\n1237\n01:07:48,290 --> 01:07:49,230\nWe want to talk about that to.\n\n1238\n01:07:49,230 --> 01:07:54,170\nWe have tunnel mode and we also have\nthe idea of transport mode for us.\n\n1239\n01:07:54,170 --> 01:07:56,300\nTunnel mode is where we are going to,\n\n1240\n01:07:56,300 --> 01:08:00,760\nagain where it says, we're gonna encrypt\nthe data as we're sending it across.\n\n1241\n01:08:00,760 --> 01:08:06,680\nTransport mode is not going to be that.\n\n1242\n01:08:06,680 --> 01:08:16,510\nIt's really going to check\nthe integrity for us.\n\n1243\n01:08:16,510 --> 01:08:19,040\nThat's for site to site VPNs.\n\n1244\n01:08:19,040 --> 01:08:23,460\nAnd in tunnel mode, the actually\ncommunicating nodes, that data,\n\n1245\n01:08:23,460 --> 01:08:25,490\nthe source IP and the destination IP.\n\n1246\n01:08:25,490 --> 01:08:26,760\nThat's encrypted.\n\n1247\n01:08:26,760 --> 01:08:31,090\nAnd so you can't even see the endpoints\nwhen you're in tunnel mode.\n\n1248\n01:08:31,090 --> 01:08:32,980\nAnd that's what we want for site to site.\n\n1249\n01:08:32,980 --> 01:08:36,050\nBut for remote access VPN,\nwhere it's a laptop or\n\n1250\n01:08:36,050 --> 01:08:37,336\na desktop on one end-\n>> They have to see what [CROSSTALK]\n\n1251\n01:08:37,336 --> 01:08:38,917\n>> You need to be able to see what that\n\n1252\n01:08:38,917 --> 01:08:39,960\nend point is.\n\n1253\n01:08:39,960 --> 01:08:42,370\nSo they have transport mode for that.\n\n1254\n01:08:42,370 --> 01:08:45,620\nIn transport mode, if you look,\nsee how it says encrypt data only.\n\n1255\n01:08:45,620 --> 01:08:46,390\n>> There you go.\n\n1256\n01:08:46,390 --> 01:08:49,650\n>> The data is encrypted but\nthe header is not.\n\n1257\n01:08:49,650 --> 01:08:52,690\nThe source and destination IPN,\nthat is non-encrypted.\n\n1258\n01:08:52,690 --> 01:08:58,030\nWhen you're in tunnel mode,\nthe data and the header, the source and\n\n1259\n01:08:58,030 --> 01:09:01,980\ndestination IP, the TCP port and\nall that, all of that is encrypted.\n\n1260\n01:09:01,980 --> 01:09:04,970\nAnd you might ask yourself if we\nencrypt the source and destination IP,\n\n1261\n01:09:04,970 --> 01:09:06,670\nhow the heck do we know where to send it?\n\n1262\n01:09:06,670 --> 01:09:09,290\nWell it's a site to site VPN,\nso the source and\n\n1263\n01:09:09,290 --> 01:09:14,580\ndestination IP change to be the routers\nthat are building that communication.\n\n1264\n01:09:14,580 --> 01:09:15,430\nIt's a little confusing.\n\n1265\n01:09:15,430 --> 01:09:18,280\nLet me show you a picture so\nthat we can see that.\n\n1266\n01:09:18,280 --> 01:09:20,860\nAll right, in this scenario here.\n\n1267\n01:09:22,240 --> 01:09:27,479\nIf I build a VPN tunnel and\nit's between these two routers like this.\n\n1268\n01:09:29,000 --> 01:09:30,220\nThere's my VPN tunnel.\n\n1269\n01:09:30,220 --> 01:09:35,705\nIf I'm on a client that is sitting\nright over here on the ITProTV LAN,\n\n1270\n01:09:35,705 --> 01:09:43,510\n10.1.230.200, and I want to talk to\nsomebody over here at this branch.\n\n1271\n01:09:43,510 --> 01:09:44,045\n172.16.0.200.\n\n1272\n01:09:44,045 --> 01:09:51,165\nMy communication goes into the router and\nthen is sent through that tunnel.\n\n1273\n01:09:51,165 --> 01:09:52,805\nAnd then deposited at the other end.\n\n1274\n01:09:54,255 --> 01:09:56,630\nIf I'm in tunnel mode.\n\n1275\n01:09:56,630 --> 01:10:00,970\nAt this point, right, the,\nhang on let me switch colors.\n\n1276\n01:10:00,970 --> 01:10:06,220\nAt this point when the data is encrypted,\nthe layer three and\n\n1277\n01:10:06,220 --> 01:10:11,150\nhigher data, so layer three, IP addresses,\nlayer four, your TCP session numbers,\n\n1278\n01:10:11,150 --> 01:10:13,380\nlayer five, your session port numbers.\n\n1279\n01:10:13,380 --> 01:10:14,160\nLayer six.\n\n1280\n01:10:14,160 --> 01:10:15,360\nThe data itself.\n\n1281\n01:10:15,360 --> 01:10:15,950\nLayer seven.\n\n1282\n01:10:15,950 --> 01:10:17,590\nAny interactive commands you issued.\n\n1283\n01:10:17,590 --> 01:10:19,950\nAll that stuff gets encrypted.\n\n1284\n01:10:19,950 --> 01:10:25,520\nAnd the layer three data gets\nreplaced with a source IP\n\n1285\n01:10:25,520 --> 01:10:27,530\nof this routers interface.\n\n1286\n01:10:27,530 --> 01:10:30,010\nAnd a destination IP of\nthis routers interface.\n\n1287\n01:10:30,010 --> 01:10:34,860\nSo if somebody intercepts it here on\nthe internet, they see a source and\n\n1288\n01:10:34,860 --> 01:10:37,960\ndestination of these two routers and\nthey see an encrypted payload and\n\n1289\n01:10:37,960 --> 01:10:39,580\nthat's all they see.\n\n1290\n01:10:39,580 --> 01:10:40,950\nThat's tunnel mode.\n\n1291\n01:10:40,950 --> 01:10:45,955\nThat's what we normally want\nwhen it's a site-to-site VPN.\n\n1292\n01:10:45,955 --> 01:10:51,540\nBut if the workstation is one of\nthe endpoints, so if this were,\n\n1293\n01:10:51,540 --> 01:10:56,640\nyou got a laptop here communicating\nwith somebody over here.\n\n1294\n01:10:56,640 --> 01:11:00,040\nAnd the VPN tunnel is\nactually being built.\n\n1295\n01:11:02,804 --> 01:11:03,860\nLike this.\n\n1296\n01:11:06,181 --> 01:11:06,850\nRight?\n\n1297\n01:11:06,850 --> 01:11:09,845\nWhere the tunnel actually runs\nstraight to that station,\n\n1298\n01:11:09,845 --> 01:11:15,615\nwhen that station communicates it\nis the tunnel and so we need to\n\n1299\n01:11:15,615 --> 01:11:20,345\nbe able to see source IP as the original\nstation so we run in transport mode there.\n\n1300\n01:11:20,345 --> 01:11:21,368\nThink of OSI model, right?\n\n1301\n01:11:21,368 --> 01:11:22,647\nTransport layer is layer four.\n\n1302\n01:11:22,647 --> 01:11:27,797\nOr layer four and\nhigher gets encrypted, but layer three,\n\n1303\n01:11:27,797 --> 01:11:31,387\nthe network layer that's the IP address\nand we need that to say unencrypted.\n\n1304\n01:11:31,387 --> 01:11:35,358\nSo it's just saying really\nwe could change this screen.\n\n1305\n01:11:37,900 --> 01:11:40,133\nLet me, there we go.\n\n1306\n01:11:40,133 --> 01:11:43,893\nWe could change the screen to basically\nsay, should I encrypt layer three or not?\n\n1307\n01:11:43,893 --> 01:11:45,503\nRight?\nSo in tunnel mode,\n\n1308\n01:11:45,503 --> 01:11:49,020\nyou encrypt layer three and replace it\nwith the IP address as the end use.\n\n1309\n01:11:49,020 --> 01:11:52,390\nTransport mode,\nyou just encrypt layer four and higher.\n\n1310\n01:11:52,390 --> 01:11:53,960\n>> Sounds cool.\n>> The other way to remember it.\n\n1311\n01:11:53,960 --> 01:11:55,910\nTunnel mode, that's site-to-site.\n\n1312\n01:11:55,910 --> 01:11:57,840\nTransport mode, that's an end station.\n\n1313\n01:11:57,840 --> 01:12:01,630\nAll right, so we'll choose tunnel mode\nbecause we are going site-to-site.\n\n1314\n01:12:01,630 --> 01:12:03,950\nAnd you can do header\ncompression if you want.\n\n1315\n01:12:03,950 --> 01:12:08,500\nThat used to be really handy on dial-up\nnetworks, but I haven't used it in years.\n\n1316\n01:12:08,500 --> 01:12:10,940\nBut the option is still\nthere to do IP compression.\n\n1317\n01:12:10,940 --> 01:12:15,030\n>> Do we need to choose\nan integrity algorithm?\n\n1318\n01:12:15,030 --> 01:12:16,000\n>> Well normally we would.\n\n1319\n01:12:16,000 --> 01:12:18,160\nI was going to cancel this.\n\n1320\n01:12:18,160 --> 01:12:20,001\n>> Okay.\n>> [LAUGH] But you're absolutely right.\n\n1321\n01:12:20,001 --> 01:12:22,434\nIf we're going to do just digital signing,\n\n1322\n01:12:22,434 --> 01:12:26,690\nwe've got to pick which algorithm\nwe wanna use, MD5 or Shot.\n\n1323\n01:12:26,690 --> 01:12:27,960\nAnd that's all this one supports.\n\n1324\n01:12:27,960 --> 01:12:30,661\nAnd, again, you might see other\nthings on production matters.\n\n1325\n01:12:30,661 --> 01:12:35,050\nAll right, but I'm going to cancel that\none because I'm fine with the default,\n\n1326\n01:12:35,050 --> 01:12:37,900\nwhich is to do both, ESP and.\n\n1327\n01:12:37,900 --> 01:12:39,190\n>> Sounds good.\n\n1328\n01:12:39,190 --> 01:12:40,490\nAlright.\n\n1329\n01:12:40,490 --> 01:12:43,390\nOn the next screen it's asking\nthe important question.\n\n1330\n01:12:43,390 --> 01:12:44,110\nIt's saying okay,\n\n1331\n01:12:44,110 --> 01:12:49,470\nif you've got a tunnel, how do we identify\nwhat traffic goes over the tunnel?\n\n1332\n01:12:49,470 --> 01:12:53,365\nSo again,\nmy tunnel is gonna look like this.\n\n1333\n01:12:53,365 --> 01:12:58,605\nHow do I know what traffic should\npass through the tunnel, right?\n\n1334\n01:12:58,605 --> 01:13:01,455\nAnd we identify that using\nan access control list.\n\n1335\n01:13:01,455 --> 01:13:08,655\nAnd the ACL is going to identify\nnetworks on each end of the tunnel.\n\n1336\n01:13:08,655 --> 01:13:11,685\nAnd we can say when networks on\nthe left talk to networks on the right,\n\n1337\n01:13:11,685 --> 01:13:12,920\ngo through the tunnel.\n\n1338\n01:13:12,920 --> 01:13:16,230\nBut if its networks on the left talking to\nthe Internet, don't go through the tunnel.\n\n1339\n01:13:16,230 --> 01:13:20,700\nJust go straight out to the Internet.\n\n1340\n01:13:20,700 --> 01:13:24,975\nSo, over here, locally,\nI've go the 10.1.230 network.\n\n1341\n01:13:24,975 --> 01:13:28,704\n[SOUND] All right.\n\n1342\n01:13:28,704 --> 01:13:31,960\nAnd remotely I've got\na bunch of 172.16 networks.\n\n1343\n01:13:31,960 --> 01:13:37,930\nIf I wanna list them individually, I'll\nneed to manually create an ACL, all right.\n\n1344\n01:13:37,930 --> 01:13:40,940\nBut, we could probably supernet them,\nif they're nice and in order,\n\n1345\n01:13:40,940 --> 01:13:42,110\nwhich in my case they are.\n\n1346\n01:13:42,110 --> 01:13:47,225\nOr we could really just go crazy and\nI could say the entire\n\n1347\n01:13:47,225 --> 01:13:50,730\n172.16 network is over there The important\npart here is that these settings have to\n\n1348\n01:13:50,730 --> 01:13:55,220\nmatch between the two sides, but basically\nyou just punch in that information.\n\n1349\n01:13:55,220 --> 01:13:59,453\nAgain if they're not contiguous networks,\nif you can't combine them into a single\n\n1350\n01:13:59,453 --> 01:14:01,909\nroute, you'll need to\nmanually create an ACL.\n\n1351\n01:14:03,620 --> 01:14:07,250\nManually, it's still got a GUI right here,\nso it's not that bad.\n\n1352\n01:14:08,490 --> 01:14:10,370\nAll right?\nAnd then we should be about done.\n\n1353\n01:14:10,370 --> 01:14:14,610\nWhen you're done, it gives you the summary\nand it offers to test the VPN.\n\n1354\n01:14:14,610 --> 01:14:18,320\nNow it's not gonna work yet, because we\nhaven't set up the other side, right?\n\n1355\n01:14:18,320 --> 01:14:20,750\nBut this sets up our side, so\nI'll just go ahead and finish that.\n\n1356\n01:14:22,120 --> 01:14:24,500\nAnd it's going to deliver\nall the commands of all.\n\n1357\n01:14:24,500 --> 01:14:26,000\nNow, VPN connections or configurations.\n\n1358\n01:14:26,000 --> 01:14:27,160\n>> It's a lot of commands.\n\n1359\n01:14:27,160 --> 01:14:28,650\n>> They're big.\nYou've done it by hand before.\n\n1360\n01:14:28,650 --> 01:14:29,600\nRight, Ronnie?\n>> Yeah.\n\n1361\n01:14:29,600 --> 01:14:30,850\n>> It's a lot of commands.\n\n1362\n01:14:30,850 --> 01:14:32,340\nIt's impossible to memorize.\n\n1363\n01:14:32,340 --> 01:14:33,220\n>> It's 35 or something.\n\n1364\n01:14:34,230 --> 01:14:35,410\n>> But everything's in there.\n\n1365\n01:14:35,410 --> 01:14:38,030\nWe'll go ahead and deliver that.\n\n1366\n01:14:38,030 --> 01:14:39,295\n>> 31. Sorry. I messed it up.\n\n1367\n01:14:39,295 --> 01:14:42,220\n[LAUGH] You just wanna\ntype extra commands.\n\n1368\n01:14:42,220 --> 01:14:43,200\n>> Yes.\n\n1369\n01:14:43,200 --> 01:14:45,810\n>> When the VPN is done, here it is.\n\n1370\n01:14:45,810 --> 01:14:49,780\nIt shows as down but\nit's configured and it's ready to go.\n\n1371\n01:14:49,780 --> 01:14:52,490\nThe next thing is I need to get\nthe configuration on the other side.\n\n1372\n01:14:52,490 --> 01:14:54,820\nNow on the other side,\nwe wanna do it through the CLI,\n\n1373\n01:14:54,820 --> 01:14:56,420\nthe command line interface.\n\n1374\n01:14:56,420 --> 01:14:59,230\nFortunately, let me resize this window.\n\n1375\n01:14:59,230 --> 01:15:02,800\nFortunately for us, right here in\nthe Cisco Configuration Professional,\n\n1376\n01:15:02,800 --> 01:15:06,792\nwhen you choose a VPN Down here you've\ngot this nice little button that says\n\n1377\n01:15:06,792 --> 01:15:07,320\n>> Generate mirror.\n\n1378\n01:15:07,320 --> 01:15:09,110\n>> Exactly I love this button.\n\n1379\n01:15:09,110 --> 01:15:11,660\nBecause the configuration on\nthe other side is really just\n\n1380\n01:15:11,660 --> 01:15:13,820\nflipping the IPs around and that's it.\n\n1381\n01:15:13,820 --> 01:15:14,440\n>> Yeah.\n\n1382\n01:15:14,440 --> 01:15:16,280\n>> So you can generate a mirror and\n\n1383\n01:15:16,280 --> 01:15:21,220\nwill give you a little stencil of\nthe various things that you need to do.\n\n1384\n01:15:21,220 --> 01:15:25,480\nTo get that VPN configured\non the other side.\n\n1385\n01:15:25,480 --> 01:15:28,610\nAnd so I am just going to copy that and\n\n1386\n01:15:28,610 --> 01:15:31,400\nwe don't want to paste it\nstraight into the other router.\n\n1387\n01:15:31,400 --> 01:15:34,030\nBecause there is some little changes\nthat we're going to need to make.\n\n1388\n01:15:34,030 --> 01:15:38,660\nSo I am going to paste that in here and\nwhat we'll do is we'll have to modify this\n\n1389\n01:15:38,660 --> 01:15:41,300\njust a little bit to get everything\nset the way that we want and\n\n1390\n01:15:41,300 --> 01:15:43,230\nit will be ready to put\nit in on the other side.\n\n1391\n01:15:44,240 --> 01:15:44,820\n>> Yep.\n\n1392\n01:15:44,820 --> 01:15:45,320\n>> Alright.\n\n1393\n01:15:46,740 --> 01:15:49,830\nWell, looking at the clock, though,\nwe're a little bit close to our time.\n\n1394\n01:15:49,830 --> 01:15:53,370\nSo why don't we do this,\nwhy don't we stop and take a break, and\n\n1395\n01:15:53,370 --> 01:15:57,138\nwhen we get back, we'll update this\nconfiguration to throw on the other side.\n\n1396\n01:15:57,138 --> 01:16:01,580\nOnce it's on there, then, we'll verify\nthat we're actually encrypting our data,\n\n1397\n01:16:01,580 --> 01:16:04,180\nwe should see a secure\nnetwork at that point, right.\n\n1398\n01:16:04,180 --> 01:16:08,004\nAll right so stay tuned, when we get back\nThe exciting conclusion to VPN tunnels.\n\n1399\n01:16:08,004 --> 01:16:15,178\n[MUSIC]\n\n1400\n01:16:15,178 --> 01:16:16,470\nAll right.\n\n1401\n01:16:16,470 --> 01:16:17,920\nWelcome back, everybody.\n\n1402\n01:16:17,920 --> 01:16:19,290\nSo.\nBefore the break,\n\n1403\n01:16:19,290 --> 01:16:23,560\nwe chose that generate mirror button, and\nwe copied the syntax that it generated for\n\n1404\n01:16:23,560 --> 01:16:24,750\nthe other end of the VPN tunnel.\n\n1405\n01:16:24,750 --> 01:16:25,380\n>> Correct.\n>> But\n\n1406\n01:16:25,380 --> 01:16:27,800\nit is important to note that\nyou just can't copy and\n\n1407\n01:16:27,800 --> 01:16:29,990\npast that because there is some\nstuff that has to be modified.\n\n1408\n01:16:29,990 --> 01:16:31,500\nSo let's take a look at that.\n\n1409\n01:16:31,500 --> 01:16:35,840\nI pasted that configuration into\nnotepad here on my laptop so\n\n1410\n01:16:35,840 --> 01:16:39,390\nthat we can kind of examine it and\nmodify what needs to be modified.\n\n1411\n01:16:39,390 --> 01:16:41,150\nMost of it is pretty straight forward.\n\n1412\n01:16:41,150 --> 01:16:44,690\nYou'll see where it's got\nthe policies that it's defining and\n\n1413\n01:16:44,690 --> 01:16:46,450\nI can manipulate those if I want.\n\n1414\n01:16:46,450 --> 01:16:51,920\nLifetime, 86,400 seconds, that's 24\nhours in seconds, and you'll see some\n\n1415\n01:16:51,920 --> 01:16:55,850\nof the other information designated here\nand the key things I have to watch out for\n\n1416\n01:16:55,850 --> 01:17:01,045\nis whether or not the other side is going\nto support the same algorithms and so on.\n\n1417\n01:17:01,045 --> 01:17:04,285\nSo we'll have to be careful with\nthat as we paste this data in.\n\n1418\n01:17:04,285 --> 01:17:08,795\nAnd as I continue to read down, here's\nwhere things get really kind of sensitive.\n\n1419\n01:17:08,795 --> 01:17:13,480\nI've got an access list defined\nhere called SDM underscore one.\n\n1420\n01:17:13,480 --> 01:17:17,390\nThat's a pretty generic name, I need\nto make sure that name's not already in\n\n1421\n01:17:17,390 --> 01:17:21,660\nuse on the other side, otherwise\nI'll get conflicting ACLs, right?\n\n1422\n01:17:21,660 --> 01:17:26,010\nSame thing with the crypto map, where it's\nactually mapping the algorithms to use for\n\n1423\n01:17:26,010 --> 01:17:28,580\nthe connection for\nphase one and phase two.\n\n1424\n01:17:28,580 --> 01:17:32,100\nIf that map name is already in use on\nthe other side, cause you can support\n\n1425\n01:17:32,100 --> 01:17:36,910\nmore than one VPN tunnel if you want So\nwe might need to modify that name.\n\n1426\n01:17:36,910 --> 01:17:40,170\nIf we modify the name here,\nwe'll also have to go and\n\n1427\n01:17:40,170 --> 01:17:42,320\nmodify the name other places.\n\n1428\n01:17:42,320 --> 01:17:47,370\nIf we modify the ACL name here, we would\nneed to modify the ACL name here also.\n\n1429\n01:17:47,370 --> 01:17:48,926\nSo just be aware of that.\n\n1430\n01:17:48,926 --> 01:17:51,430\nIf there's already a VPN\ntunnel on the other side,\n\n1431\n01:17:51,430 --> 01:17:52,300\nyou may need to come through and\n\n1432\n01:17:52,300 --> 01:17:55,370\nmake these names a little more unique so\nyou don't bump into what's already there.\n\n1433\n01:17:56,910 --> 01:18:00,170\nThe other thing is,\nthey always leave it off.\n\n1434\n01:18:00,170 --> 01:18:02,810\nWhen you do generate Mirror,\nit does all this great stuff.\n\n1435\n01:18:02,810 --> 01:18:04,710\nBut then it forgets something important.\n\n1436\n01:18:04,710 --> 01:18:06,080\nRight here there's a description.\n\n1437\n01:18:06,080 --> 01:18:11,150\nIt says, apply the crypto map on the peer\nrouter's interface, blah blah blah.\n\n1438\n01:18:11,150 --> 01:18:13,960\nThat means that if you were to\npaste all this in just like it is,\n\n1439\n01:18:13,960 --> 01:18:15,640\nit actually doesn't work.\n\n1440\n01:18:15,640 --> 01:18:19,528\nBecause we don't know the interface\nname at the other side.\n\n1441\n01:18:19,528 --> 01:18:23,959\nWe know the other side has an IP\naddress of 209.251.133.186.\n\n1442\n01:18:23,959 --> 01:18:25,624\nI put that in in the Wizard.\n\n1443\n01:18:25,624 --> 01:18:31,790\nBut is that attached to GI0 slash one,\nFA0 slash 0, what's it attached to?\n\n1444\n01:18:31,790 --> 01:18:33,010\nWho knows?\n\n1445\n01:18:33,010 --> 01:18:37,080\nSo we need to go get the interphase\nname from the other side and\n\n1446\n01:18:37,080 --> 01:18:42,575\nonce we have that that in\ninterface fa0 slash 0 in our case.\n\n1447\n01:18:42,575 --> 01:18:48,145\nThen crypto map, and\nthe name of the map we're attaching to it.\n\n1448\n01:18:48,145 --> 01:18:52,870\nSo that's that kind of final piece to\nactually get the configuration correct.\n\n1449\n01:18:52,870 --> 01:18:53,620\nAll right.\n\n1450\n01:18:53,620 --> 01:18:57,880\nAnd then what I like to do, and\nyou don't have to this, but\n\n1451\n01:18:57,880 --> 01:19:05,390\nI like to remote into the system and\npaste this in section by section.\n\n1452\n01:19:05,390 --> 01:19:09,730\nSo if there's ever a problem,\nI can spot where the issue is and\n\n1453\n01:19:09,730 --> 01:19:11,420\nkind of fix it from there.\n\n1454\n01:19:11,420 --> 01:19:13,923\nSo I'm gonna just SSH into that router.\n\n1455\n01:19:18,194 --> 01:19:19,300\nAll right.\n\n1456\n01:19:19,300 --> 01:19:23,880\nAnd now what I can do is section\nby section, we can take this and\n\n1457\n01:19:23,880 --> 01:19:25,028\nwe can just kind of paste it in.\n\n1458\n01:19:25,028 --> 01:19:28,540\nThese crypto-policies here.\n\n1459\n01:19:28,540 --> 01:19:31,050\nI'll just take those and\nwe'll throw them in.\n\n1460\n01:19:31,050 --> 01:19:33,450\nAnd I'm just watching to\nsee if any errors occur.\n\n1461\n01:19:33,450 --> 01:19:35,660\n>> Right.\n>> You know, that way you can handle it.\n\n1462\n01:19:35,660 --> 01:19:38,054\nAnd then we've got our crypto-maps.\n\n1463\n01:19:40,010 --> 01:19:42,380\nOr I mean, not crypto-maps,\nbut our actual transforms.\n\n1464\n01:19:42,380 --> 01:19:44,470\nSo we'll throw those in.\n\n1465\n01:19:44,470 --> 01:19:47,470\nNo error so far, we'll throw in the ACL.\n\n1466\n01:19:47,470 --> 01:19:51,740\nAll right, no problems with the ACL.\n\n1467\n01:19:51,740 --> 01:19:54,958\nAnd now the crypto-map.\n\n1468\n01:19:54,958 --> 01:19:58,435\nNow the crypto-map will probably\nthrow an error, not an error so\n\n1469\n01:19:58,435 --> 01:20:01,975\nmuch, as a warning Letting me know\nthat we've tied it to a ACL, and\n\n1470\n01:20:01,975 --> 01:20:04,460\nif the ACL doesn't exist, it'll get upset.\n\n1471\n01:20:04,460 --> 01:20:05,380\nSo, yeah, here it is.\n\n1472\n01:20:05,380 --> 01:20:08,293\nThis new crypto map will remain\ndisabled until appear and\n\n1473\n01:20:08,293 --> 01:20:10,484\na valid access list have been configured.\n\n1474\n01:20:10,484 --> 01:20:15,533\nBut, that's what we're doing in the next\ncouple of commands, so we can ignore that.\n\n1475\n01:20:15,533 --> 01:20:20,240\nAnd then the last part is just\nto attach it to our interface.\n\n1476\n01:20:20,240 --> 01:20:23,430\nAnd if I do a show ip int brief,\n\n1477\n01:20:23,430 --> 01:20:27,900\nI can see that public address\nis attached to my FA0/0.\n\n1478\n01:20:27,900 --> 01:20:33,930\nSo, we can go in here,\nand just paste that in.\n\n1479\n01:20:34,950 --> 01:20:40,120\nAnd now the VPN is attached to that\ninterface and we should be good to go.\n\n1480\n01:20:40,120 --> 01:20:44,660\nNow here's the thing that always catches\nsomebody the first time they do this.\n\n1481\n01:20:44,660 --> 01:20:45,230\nAll right.\n\n1482\n01:20:45,230 --> 01:20:48,150\nI put the configuration\nin on the other side.\n\n1483\n01:20:48,150 --> 01:20:51,290\nWe already did it on router one,\nso router one and\n\n1484\n01:20:51,290 --> 01:20:55,170\nrouter two now have matching\nmirror configurations.\n\n1485\n01:20:55,170 --> 01:20:56,995\nThe VPN tunnel should be up, right?\n\n1486\n01:20:56,995 --> 01:21:02,886\nAnd if I go over to my Cisco\nconfiguration professional here,\n\n1487\n01:21:02,886 --> 01:21:06,412\nand let me just refresh this window.\n\n1488\n01:21:10,861 --> 01:21:12,320\nHang on, its doing its discovery.\n\n1489\n01:21:12,320 --> 01:21:14,372\nI wanna refresh and\nmake sure I've got the current data.\n\n1490\n01:21:19,868 --> 01:21:24,480\nOnce I refresh, I'm gonna go back and\ncheck to see the status of my VPN.\n\n1491\n01:21:24,480 --> 01:21:28,421\nSo if I go into Monitor and Security and\n\n1492\n01:21:28,421 --> 01:21:33,481\nVPN Status of my IP stacked tunnels,\nall right?\n\n1493\n01:21:33,481 --> 01:21:38,631\nI can come in here and I can look,\neventually, here we go and\n\n1494\n01:21:38,631 --> 01:21:45,770\nlooking at my VPN tunnels right now, I\ndon't show any tunnels that are up, okay?\n\n1495\n01:21:45,770 --> 01:21:47,840\nSo that's odd, right?\n\n1496\n01:21:47,840 --> 01:21:54,690\nAnd if I go back to configure and\nsite-to-site VPN, in here,\n\n1497\n01:21:54,690 --> 01:21:59,250\nI can see the VPN tunnel reflecting as\ndown, so something must be wrong, right?\n\n1498\n01:21:59,250 --> 01:21:59,900\nNope.\n\n1499\n01:21:59,900 --> 01:22:01,780\nNot necessarily, yeah.\n\n1500\n01:22:01,780 --> 01:22:05,770\nThe VPN tunnels will only come up\nwhen the router sees what's called\n\n1501\n01:22:05,770 --> 01:22:07,380\ninteresting traffic.\n\n1502\n01:22:07,380 --> 01:22:11,160\nInteresting traffic is traffic that\nmatches the ACL we defined earlier.\n\n1503\n01:22:11,160 --> 01:22:15,090\nWe said when traffic goes from the\n10.1.230 network to the 172.16 network,\n\n1504\n01:22:16,220 --> 01:22:21,030\nright, in the Wizard we specified that,\nuse the VPN.\n\n1505\n01:22:21,030 --> 01:22:24,720\nUntil we generate traffic like that,\nthe VPN tunnel will not come up.\n\n1506\n01:22:24,720 --> 01:22:29,480\nOne of the easiest ways to do it is\njust to do a bunch of pings, and so\n\n1507\n01:22:29,480 --> 01:22:32,263\nmy IP address is, well that's a lot.\n\n1508\n01:22:32,263 --> 01:22:38,710\nMy IP address is 10.1.230.229.\n\n1509\n01:22:38,710 --> 01:22:44,860\nAnd if I start to ping 172.16.0.1,\nthat's over on the other network,\n\n1510\n01:22:44,860 --> 01:22:47,600\nthat traffic should be interesting.\n\n1511\n01:22:47,600 --> 01:22:48,890\nIt matches that ACL.\n\n1512\n01:22:48,890 --> 01:22:55,800\nNow notice how my first ping failed,\nbut then the other ones are working.\n\n1513\n01:22:55,800 --> 01:22:58,050\nWhy did my first one fail?\n\n1514\n01:22:58,050 --> 01:23:01,000\nWell, normally I blame that on ARP,\nAddress Resolution Protocol, but\n\n1515\n01:23:01,000 --> 01:23:04,190\nyou don't use ARP when you're\ngoing between networks like this.\n\n1516\n01:23:04,190 --> 01:23:07,800\nAnd so in my case it failed because\nthe VPN tunnel was coming up, or\n\n1517\n01:23:07,800 --> 01:23:11,740\nat least it should of, and now my traffic\nshould be going over that VPN tunnel.\n\n1518\n01:23:11,740 --> 01:23:15,170\nNow I said should,\nbecause how do we really know?\n\n1519\n01:23:15,170 --> 01:23:16,390\nIt's invisible to me, right?\n\n1520\n01:23:16,390 --> 01:23:19,100\nHow do we know that we're being encrypted?\n\n1521\n01:23:19,100 --> 01:23:20,920\nWell, two ways.\n\n1522\n01:23:20,920 --> 01:23:25,030\nWay number one is if we\nrefresh this screen,\n\n1523\n01:23:25,030 --> 01:23:27,460\nwhich let's see if it'll work\njust by changing screens.\n\n1524\n01:23:30,050 --> 01:23:31,040\nThere we go.\n\n1525\n01:23:31,040 --> 01:23:33,020\nIt shows as up now, all right?\n\n1526\n01:23:33,020 --> 01:23:39,260\nSo I know the tunnel is up, and if I go to\nmy Monitor tab and I go to IPSec tunnels.\n\n1527\n01:23:39,260 --> 01:23:40,230\nThere we go.\n\n1528\n01:23:40,230 --> 01:23:42,690\nI know the tunnel is up, and\n\n1529\n01:23:42,690 --> 01:23:47,080\nI can even see that there's some\ntraffic being encoded, right?\n\n1530\n01:23:47,080 --> 01:23:51,210\nIf we zoom in down there,\nI can see a little bit.\n\n1531\n01:23:51,210 --> 01:23:53,600\nNow, let me generate like\na constant stream of traffic.\n\n1532\n01:23:53,600 --> 01:23:59,007\nThey're pings, so\nit's not gonna be a ton of traffic,\n\n1533\n01:23:59,007 --> 01:24:01,660\nbut now that I'm doing it.\n\n1534\n01:24:03,185 --> 01:24:06,355\nYeah, we can watch our little charts and\nI can see traffic going up.\n\n1535\n01:24:06,355 --> 01:24:10,375\nSo, that's guarantee telling\nme we're encrypting, right?\n\n1536\n01:24:10,375 --> 01:24:11,405\nNot necessarily.\n\n1537\n01:24:11,405 --> 01:24:15,020\nI don't know if that's my traffic or\nsomeone else's or what.\n\n1538\n01:24:15,020 --> 01:24:17,770\nBut I know that some\ntraffic is being encrypted,\n\n1539\n01:24:17,770 --> 01:24:19,225\nI just don't know if it's mine or not.\n\n1540\n01:24:19,225 --> 01:24:20,130\nAll right.\n\n1541\n01:24:20,130 --> 01:24:22,900\nIf we really wanna be sure that\nour data's being encrypted,\n\n1542\n01:24:22,900 --> 01:24:26,660\nthe only way to truly\ntest it is the sniffer.\n\n1543\n01:24:26,660 --> 01:24:29,940\nWe did an example a few minutes\nago where I fired up Telnet and\n\n1544\n01:24:29,940 --> 01:24:34,070\nwent through that whole thing and\nwe were able to see that traffic.\n\n1545\n01:24:34,070 --> 01:24:36,540\nWell, let's take a look at it now.\n\n1546\n01:24:36,540 --> 01:24:40,560\nAll right.\nSo, let me go back to, actually, here.\n\n1547\n01:24:40,560 --> 01:24:43,147\nLet me stop the ping,\ncuz I don't wanna confuse my traffic.\n\n1548\n01:24:44,860 --> 01:24:46,905\nI wanna try and\nkeep this as clean as possible.\n\n1549\n01:24:48,165 --> 01:24:51,425\nAnd we'll go into Wireshark and\nwe will start a new capture.\n\n1550\n01:24:53,515 --> 01:24:54,405\nAll right.\n\n1551\n01:24:54,405 --> 01:24:55,875\nSo, and let me clear that filter.\n\n1552\n01:24:55,875 --> 01:24:59,169\nSo there we go,\nI got a new capture running and\n\n1553\n01:24:59,169 --> 01:25:03,704\nI'm going to open up a Telnet\nsession just like we did before.\n\n1554\n01:25:03,704 --> 01:25:10,601\nSo I'm gonna Telnet into\na system on the other side.\n\n1555\n01:25:10,601 --> 01:25:14,187\nAnd I'm gonna log in, all right?\n\n1556\n01:25:14,187 --> 01:25:16,940\nAnd I'll enable.\n\n1557\n01:25:16,940 --> 01:25:20,537\nI'll do a show version.\n\n1558\n01:25:20,537 --> 01:25:25,630\nI'll do a DRI and\na show running-config, right?\n\n1559\n01:25:25,630 --> 01:25:28,370\nAll the things that I did before,\nI'm just doing them again.\n\n1560\n01:25:30,130 --> 01:25:35,250\nAll right, and\nthen I'm gonna stop old Wireshark here,\n\n1561\n01:25:35,250 --> 01:25:36,740\nand let me just do a filter.\n\n1562\n01:25:36,740 --> 01:25:42,527\nI'll do the same filter that I\ndid before to find that traffic.\n\n1563\n01:25:42,527 --> 01:25:47,911\nI said show me all of the traffic\nto 172.16.0.1 and there's nothing.\n\n1564\n01:25:47,911 --> 01:25:53,320\nI don't see that there was any traffic\ndestined for that IP, all right?\n\n1565\n01:25:53,320 --> 01:25:54,550\nWhy not?\nI know it worked,\n\n1566\n01:25:54,550 --> 01:25:56,210\nI was able to connect into it.\n\n1567\n01:25:56,210 --> 01:25:59,030\nThe reason is we're doing\ntunnel mode encryption, so\n\n1568\n01:25:59,030 --> 01:26:01,200\nthe endpoints are being encrypted also.\n\n1569\n01:26:01,200 --> 01:26:03,530\nI don't even see that the traffic existed.\n\n1570\n01:26:03,530 --> 01:26:10,320\nIf I were to change that to look for\ntraffic destined for that other router.\n\n1571\n01:26:10,320 --> 01:26:11,480\n>> Yep, there you go.\n\n1572\n01:26:11,480 --> 01:26:14,720\n>> Now I see traffic, but\ndo I know it's Telnet?\n\n1573\n01:26:15,890 --> 01:26:18,250\nOr Ping or anything for that matter?\n\n1574\n01:26:18,250 --> 01:26:21,080\nAll I see is ESP, right?\n\n1575\n01:26:21,080 --> 01:26:25,710\nEncapsulating Security Payload,\nit's encrypted data.\n\n1576\n01:26:25,710 --> 01:26:30,436\nIf I examine one of those packets in\ndetail, all that I can see inside of it,\n\n1577\n01:26:30,436 --> 01:26:32,088\nis cypher-text.\n\n1578\n01:26:32,088 --> 01:26:35,220\nGarbled mess that doesn't mean\nanything to me right there.\n\n1579\n01:26:35,220 --> 01:26:39,195\nIt's just a bunch of junk.\n\n1580\n01:26:39,195 --> 01:26:43,860\nSo, not too much that we can do there,\nand if I try and\n\n1581\n01:26:43,860 --> 01:26:47,930\nreassemble it, that follow TCP\nstream button I used before?\n\n1582\n01:26:48,950 --> 01:26:50,290\nCan't even click on it.\n\n1583\n01:26:50,290 --> 01:26:54,460\nAnd that's because everything is now being\nfully encrypted between these routers.\n\n1584\n01:26:54,460 --> 01:26:57,130\nMy data is safe and secure.\n\n1585\n01:26:57,130 --> 01:27:00,890\nIf somebody were capturing all this,\nthey couldn't tell where a packet begins,\n\n1586\n01:27:00,890 --> 01:27:04,660\nwhere it ends, what protocol it was,\nwho the source was, who the destination,\n\n1587\n01:27:04,660 --> 01:27:06,260\nthey can't tell anything about it.\n\n1588\n01:27:06,260 --> 01:27:08,110\nIt's just garbled mess.\n\n1589\n01:27:08,110 --> 01:27:13,450\nYeah, and that was using a extremely\nnon-secure protocol like Telnet.\n\n1590\n01:27:13,450 --> 01:27:14,880\nYou guys saw the beginning of the show.\n\n1591\n01:27:14,880 --> 01:27:16,360\nIt was wide open.\n\n1592\n01:27:16,360 --> 01:27:18,150\nNow, nice and secure.\n\n1593\n01:27:19,840 --> 01:27:21,690\nSo that's the real\nadvantage of a VPN tunnel.\n\n1594\n01:27:21,690 --> 01:27:24,780\nWe can take a network like the Internet\nthat's super inexpensive to use,\n\n1595\n01:27:24,780 --> 01:27:28,500\ncompared to private lines, and\nwe can make it secure using VPNs.\n\n1596\n01:27:28,500 --> 01:27:29,910\nAnd was it hard?\n\n1597\n01:27:29,910 --> 01:27:30,620\nNot that hard.\n\n1598\n01:27:30,620 --> 01:27:33,369\nThe command line has a lot of steps in it.\n\n1599\n01:27:33,369 --> 01:27:38,276\nBut, use the wizard, you knock it\nright out, not a big deal at all.\n\n1600\n01:27:38,276 --> 01:27:40,190\nAll right.\n\n1601\n01:27:40,190 --> 01:27:42,592\nRonnie, can you think of anything\nelse that we need to mention on\n\n1602\n01:27:42,592 --> 01:27:44,140\nsite-to-site VPNs?\n\n1603\n01:27:44,140 --> 01:27:49,840\nNope, just remember, make sure,\ntake a look at the idea of IPSec again.\n\n1604\n01:27:49,840 --> 01:27:54,650\nDo a little bit of research, understand\nit's not necessarily a protocol, it does\n\n1605\n01:27:54,650 --> 01:27:59,340\ninvolve several components to make it work\nwhen you actually do take a look at it.\n\n1606\n01:27:59,340 --> 01:28:02,408\nSo don't mistake that, if they ask you,\n\n1607\n01:28:02,408 --> 01:28:07,770\nis IPsec an encryption protocol, or\nis it an authentication protocol?\n\n1608\n01:28:07,770 --> 01:28:08,810\nIt's none of those.\n\n1609\n01:28:08,810 --> 01:28:10,480\nIt actually includes more than that.\n\n1610\n01:28:10,480 --> 01:28:13,400\nYeah, so remember,\nit's an entire framework.\n\n1611\n01:28:13,400 --> 01:28:14,730\n>> Excellent.\n\n1612\n01:28:14,730 --> 01:28:18,619\nAll right, now the last objective,\nis mentioning, basically,\n\n1613\n01:28:18,619 --> 01:28:21,960\nthat we've got other types of VPNs,\nthat are out there.\n\n1614\n01:28:21,960 --> 01:28:25,450\nIn addition to IPsec,\nwe also have SSL VPNs.\n\n1615\n01:28:25,450 --> 01:28:28,790\nSSL VPNs, are Secure Socket Layer VPNs.\n\n1616\n01:28:28,790 --> 01:28:31,190\nAnd this is where a client,\nfires up their laptop or\n\n1617\n01:28:31,190 --> 01:28:34,750\ndesktop, and they browse to a web page.\n\n1618\n01:28:34,750 --> 01:28:38,320\n>> On that web page, they provide a\nusername and a password, and via their web\n\n1619\n01:28:38,320 --> 01:28:44,060\nbrowser, a connection gets made between\ntheir machine, and that remote network.\n\n1620\n01:28:44,060 --> 01:28:46,720\nIt builds a VPN, using SSL.\n\n1621\n01:28:46,720 --> 01:28:50,400\nAnd it can be done entirely through\nthe web browser, or using a client.\n\n1622\n01:28:50,400 --> 01:28:51,430\n>> If you install a client, but\n\n1623\n01:28:51,430 --> 01:28:56,000\nobviously, the ease of use with the web\nbrowser, is much more, much preferred.\n\n1624\n01:28:56,000 --> 01:28:57,270\nYou don't have a client to install.\n\n1625\n01:28:57,270 --> 01:28:59,190\nYou don't have to tell\npeople configurations.\n\n1626\n01:28:59,190 --> 01:29:02,793\nThey just browse through a website,\nand log in, and the tunnel is made,\n\n1627\n01:29:02,793 --> 01:29:05,600\nwhen they close that website,\nthe tunnel is closed.\n\n1628\n01:29:05,600 --> 01:29:06,990\nAnd that's it.\nSo very easy way,\n\n1629\n01:29:06,990 --> 01:29:09,710\nto have quick,\ntemporary tunnels, built up.\n\n1630\n01:29:09,710 --> 01:29:12,720\nThese are remote access VPNs,\nnot site to site.\n\n1631\n01:29:12,720 --> 01:29:16,780\nThey're built from a laptop or\ndesktop, to a security appliance.\n\n1632\n01:29:16,780 --> 01:29:18,640\nIt can be a Cisco router.\n\n1633\n01:29:18,640 --> 01:29:21,990\nBut in every documentation on\nCisco's website, they always say,\n\n1634\n01:29:21,990 --> 01:29:25,060\nif you're going to do SSL VPNs,\nyou really need to use an ASA.\n\n1635\n01:29:25,060 --> 01:29:27,850\nActually, use a Cisco firewall.\n\n1636\n01:29:27,850 --> 01:29:31,340\nSo they want us to go ahead and show,\nhow we get this kind of stuff configured.\n\n1637\n01:29:31,340 --> 01:29:32,760\nAnd so, we're gonna take a look at that.\n\n1638\n01:29:32,760 --> 01:29:37,250\nThe objective specifically calls out,\nClientless connections,\n\n1639\n01:29:37,250 --> 01:29:40,310\nvia the website, or AnyConnect.\n\n1640\n01:29:40,310 --> 01:29:43,970\nAnyConnect, the Cisco AnyConnect client,\nis a little software package you can\n\n1641\n01:29:43,970 --> 01:29:47,110\ninstall, and it will build a connection,\nwithout a web browser.\n\n1642\n01:29:47,110 --> 01:29:50,500\nThat's nice, because you don't want a\nuser, accidentally closing their browser,\n\n1643\n01:29:50,500 --> 01:29:51,810\nand losing their network connection.\n\n1644\n01:29:51,810 --> 01:29:52,830\nAnyConnect can take care of it.\n\n1645\n01:29:52,830 --> 01:29:56,700\nNow, if you're sitting on a rented\ncomputer, you don't wanna use AnyConnect,\n\n1646\n01:29:56,700 --> 01:30:00,130\ncuz it'll leave it behind for\nthe next person to log in, and use.\n\n1647\n01:30:00,130 --> 01:30:03,730\nYou want to go Clientless, in those\nscenarios, but it works, either way.\n\n1648\n01:30:03,730 --> 01:30:05,231\nAnd when they connect via the website,\n\n1649\n01:30:05,231 --> 01:30:08,110\nthey actually have the opportunity\nto install AnyConnect, if they want.\n\n1650\n01:30:08,110 --> 01:30:10,860\nSo very simple to do.\n\n1651\n01:30:10,860 --> 01:30:14,401\nTo get it configured,\nit's really just like a site to site VPN,\n\n1652\n01:30:14,401 --> 01:30:18,355\nexcept the remote side, is gonna get\nall of their settings, from you.\n\n1653\n01:30:18,355 --> 01:30:21,691\nSo we have a simple wizard we run,\nto get it set up, and after that,\n\n1654\n01:30:21,691 --> 01:30:24,565\nwe just tell the end users to\nbrowse to a certain webpage.\n\n1655\n01:30:24,565 --> 01:30:25,565\n>> Right.\n\n1656\n01:30:25,565 --> 01:30:28,645\n>> All right, so\nif I take a look at the ASA.\n\n1657\n01:30:28,645 --> 01:30:30,115\nSo this is a Cisco firewall.\n\n1658\n01:30:30,115 --> 01:30:32,510\nI'm connected, via the ASDM.\n\n1659\n01:30:32,510 --> 01:30:37,400\nAnd basically, we just have a very simple\nwizard, up top you can go to wizards, and\n\n1660\n01:30:37,400 --> 01:30:38,530\nVPN wizards.\n\n1661\n01:30:38,530 --> 01:30:40,780\nAnd you'll see a site to site VPN wizard,\n\n1662\n01:30:40,780 --> 01:30:43,950\nwhich is just like what we saw in\nthe routers a few moments ago, and\n\n1663\n01:30:43,950 --> 01:30:48,117\nthen you'll see any connect VPN,\nand Clientless SSL.\n\n1664\n01:30:49,140 --> 01:30:51,900\nThey use the same\ntechnology under the hood,\n\n1665\n01:30:51,900 --> 01:30:54,920\nthe only real difference is whether\nyou have an installed client, so\n\n1666\n01:30:54,920 --> 01:30:57,880\nsomething you're going to be\nusing frequently, or Clientless.\n\n1667\n01:30:57,880 --> 01:30:59,250\nSo it's temporary, right?\n\n1668\n01:30:59,250 --> 01:31:00,760\nComes and goes.\n\n1669\n01:31:00,760 --> 01:31:02,692\nSo, let's take a look at Clientless first.\n\n1670\n01:31:02,692 --> 01:31:07,627\nWith Clientless, basically what we do is,\nwe specify a few things,\n\n1671\n01:31:07,627 --> 01:31:12,150\nand so I'm gonna call this my\nClientless SSL profile, right?\n\n1672\n01:31:12,150 --> 01:31:14,924\nAnd we need to say what interface\nthey're gonna be connecting on,\n\n1673\n01:31:14,924 --> 01:31:16,520\nand I'll pick my outside interface.\n\n1674\n01:31:16,520 --> 01:31:18,488\nIt's normally the interface\npointing to the Internet,\n\n1675\n01:31:18,488 --> 01:31:19,800\ncuz people need to be able to get to it.\n\n1676\n01:31:20,850 --> 01:31:24,220\nThen, if we're doing certificate signing,\nwe need to pick it here.\n\n1677\n01:31:24,220 --> 01:31:29,100\nI say if, when you're doing Clientless\nSSL, you have to do certificates.\n\n1678\n01:31:29,100 --> 01:31:32,170\nAnd so, if you don't have one,\nyou'll need to create one.\n\n1679\n01:31:32,170 --> 01:31:33,840\nNow, here's the tricky part.\n\n1680\n01:31:33,840 --> 01:31:37,040\nThe remote station needs\nto trust your certificate.\n\n1681\n01:31:37,040 --> 01:31:40,300\nSo, you can purchase one\nfrom a certificate vendor,\n\n1682\n01:31:40,300 --> 01:31:41,830\ncertification authority.\n\n1683\n01:31:41,830 --> 01:31:45,480\nOr if you have your own PKI,\nyou can generate your own certificates.\n\n1684\n01:31:45,480 --> 01:31:47,870\nI'm gonna do a self\nsigned certificate here.\n\n1685\n01:31:47,870 --> 01:31:52,510\nAnd that's not the greatest idea,\nin a actual public,\n\n1686\n01:31:52,510 --> 01:31:56,470\ncommercial VPN, but for us it'll work.\n\n1687\n01:31:56,470 --> 01:32:01,620\nWe'll just come in here, and\ngenerate a quick self signed certificate.\n\n1688\n01:32:01,620 --> 01:32:05,460\nNormally we rely, on a certification\nauthority, to issue our certificate.\n\n1689\n01:32:05,460 --> 01:32:07,220\nHere we're gonna generate it ourself.\n\n1690\n01:32:07,220 --> 01:32:08,650\nAnd I don't even have a key pair?\n\n1691\n01:32:10,700 --> 01:32:14,140\nThere we go.\nI'm gonna generate a 1024 bit RSA key\n\n1692\n01:32:14,140 --> 01:32:14,772\nto use.\n\n1693\n01:32:14,772 --> 01:32:18,472\nI thought I already had one,\noh shoot, I forgot.\n\n1694\n01:32:18,472 --> 01:32:19,312\n>> You're in demo.\n\n1695\n01:32:19,312 --> 01:32:22,880\n>> We already have one on the router, I'm\non the ASA demo, so it doesn't have one,\n\n1696\n01:32:22,880 --> 01:32:25,148\nyeah, but so\nwe'll just generate a fake one here.\n\n1697\n01:32:25,148 --> 01:32:26,268\nYeah that'll work.\n\n1698\n01:32:26,268 --> 01:32:27,018\nAll right.\n\n1699\n01:32:34,318 --> 01:32:35,148\nThere we go.\n\n1700\n01:32:35,148 --> 01:32:38,780\nSo it's gonna have a certificate now,\nto use for validation.\n\n1701\n01:32:38,780 --> 01:32:42,250\nWe would need to take the public key for\nthis certificate, and on the other end,\n\n1702\n01:32:42,250 --> 01:32:45,950\neither every time they connect, they're\ngetting a warning about not trusting it.\n\n1703\n01:32:45,950 --> 01:32:47,750\nOr we would need to\ninstall that certificate,\n\n1704\n01:32:47,750 --> 01:32:50,030\non the operating system that's connecting.\n\n1705\n01:32:50,030 --> 01:32:55,900\nIt does support Windows, OS X, and Linux,\nand so they do have support for those.\n\n1706\n01:32:55,900 --> 01:32:58,934\nThey even have support for iOS now,\nlike iPads and iPhones, so\n\n1707\n01:32:58,934 --> 01:33:01,520\nyou can connect from all\nsorts of different clients.\n\n1708\n01:33:01,520 --> 01:33:04,020\nIt doesn't seem to be happy about that.\n\n1709\n01:33:04,020 --> 01:33:08,130\n>> [LAUGH]\n>> Well, we'll give it a few more minutes.\n\n1710\n01:33:08,130 --> 01:33:11,950\nBut when it's done, on the next page of\nthe Wizard, the only other information we\n\n1711\n01:33:11,950 --> 01:33:15,340\nreally have to provide,\nis a name that people are gonna browse to.\n\n1712\n01:33:15,340 --> 01:33:18,920\nNow your firewall has a public IP address,\nor at least it should,\n\n1713\n01:33:18,920 --> 01:33:20,390\nthat they're gonna browse to.\n\n1714\n01:33:20,390 --> 01:33:22,780\nYou probably wanna create a DNS name,\nand tie it to that.\n\n1715\n01:33:22,780 --> 01:33:26,970\nSo I might do, vpn.itpro.tv,\nor something like that.\n\n1716\n01:33:26,970 --> 01:33:27,550\nRight?\n\n1717\n01:33:27,550 --> 01:33:32,500\nSo that the end users, just browse to that\nweb page, punch in their credentials, and\n\n1718\n01:33:32,500 --> 01:33:36,080\nthey'll log in and connect,\nusing this certificate,\n\n1719\n01:33:36,080 --> 01:33:40,120\nacting as their public key for encrypting\nthe data, and sending it across the wire.\n\n1720\n01:33:40,120 --> 01:33:40,950\nPretty cool.\n\n1721\n01:33:40,950 --> 01:33:44,950\n>> Pretty straight forward,\nand that's really about it.\n\n1722\n01:33:44,950 --> 01:33:47,650\nWow.\n\n1723\n01:33:47,650 --> 01:33:50,940\nI don't know if it's actually just stuck,\nor if it is.\n\n1724\n01:33:50,940 --> 01:33:54,214\n>> [LAUGH]\n>> Let's see if it's just stuck,\n\n1725\n01:33:54,214 --> 01:33:58,270\nmaybe we can, maybe it'll let\nme advance without doing that.\n\n1726\n01:33:58,270 --> 01:34:01,451\nBut you'll see down here\nwhere it's got the URL, so\n\n1727\n01:34:01,451 --> 01:34:06,294\nright now they would browse to HTTPS, and\nthen the IP address of this firewall,\n\n1728\n01:34:06,294 --> 01:34:11,150\n198.52.1.1, or you can tie it\nto a subdirectory, if you want.\n\n1729\n01:34:11,150 --> 01:34:13,200\nNotice the subdirectory here, of admin.\n\n1730\n01:34:13,200 --> 01:34:14,620\nThat's for getting to the ASDN.\n\n1731\n01:34:14,620 --> 01:34:18,770\nFor the VPN tunnel, if you want an alias,\nyou would actually type it here.\n\n1732\n01:34:18,770 --> 01:34:21,480\nSo now, they would browse to,\n\n1733\n01:34:21,480 --> 01:34:27,230\nhttps://198.52.1.1/vpn, cuz\nI typed that in.\n\n1734\n01:34:27,230 --> 01:34:30,361\nSo you can make that, you don't have to,\n\n1735\n01:34:30,361 --> 01:34:34,310\nbecause you can also just\ngo straight to the root IP.\n\n1736\n01:34:34,310 --> 01:34:37,706\nAnd they do it that way, because it's\nreally easy to put a DNS name in,\n\n1737\n01:34:37,706 --> 01:34:40,780\nthat points to that IP, so\nyou can go straight to it.\n\n1738\n01:34:40,780 --> 01:34:45,380\nThe challenge there, if you do a DNS name,\nthe certificate that you generate up here,\n\n1739\n01:34:45,380 --> 01:34:50,840\nthe certificate needs to be tied to\nthe name, not the IP, that people type in.\n\n1740\n01:34:50,840 --> 01:34:54,344\nIf they're typing in the IP, then fine,\nthe certificate can be tied to the IP, but\n\n1741\n01:34:54,344 --> 01:34:56,110\nwe normally need it to\nbe tied to the name.\n\n1742\n01:34:58,730 --> 01:34:59,610\nAll right.\n\n1743\n01:34:59,610 --> 01:35:02,350\nOn the next screen, if it'll,\nyeah, it'll let me go forward.\n\n1744\n01:35:02,350 --> 01:35:04,700\nHere we set who's allowed to use it.\n\n1745\n01:35:04,700 --> 01:35:09,840\nNow, you can authenticate against\nthe local user database, if you want.\n\n1746\n01:35:09,840 --> 01:35:13,240\nBut normally, you're gonna authenticate\nagainst the radius, or TACACS server.\n\n1747\n01:35:13,240 --> 01:35:19,110\nAnd we did a radius configuration,\nway back early on, in the INS show.\n\n1748\n01:35:19,110 --> 01:35:21,840\nWe showed connecting,\nto a Windows Active Directory.\n\n1749\n01:35:21,840 --> 01:35:22,960\nSo you can do that.\n\n1750\n01:35:22,960 --> 01:35:26,150\nAnd now you just authenticate using your\nWindows account, so that's even better.\n\n1751\n01:35:29,560 --> 01:35:30,610\nAll right.\n\n1752\n01:35:30,610 --> 01:35:33,120\nAnd then we can create a policy,\nif we don't have one.\n\n1753\n01:35:33,120 --> 01:35:34,900\nI'll create one.\n\n1754\n01:35:34,900 --> 01:35:36,806\nSSL VPN policy.\n\n1755\n01:35:36,806 --> 01:35:40,456\nAnd the policy here, is just defining\nthe encryption types that are being used,\n\n1756\n01:35:40,456 --> 01:35:42,453\nin the lifetime, and all that other stuff.\n\n1757\n01:35:42,453 --> 01:35:44,810\nThe clients are going to\ndownload that from you.\n\n1758\n01:35:46,910 --> 01:35:51,480\nOnce they've logged in, the tunnel is up,\nand they can access your network.\n\n1759\n01:35:51,480 --> 01:35:54,420\nBut you also have the option to display,\nwhat's called a bookmark page.\n\n1760\n01:35:54,420 --> 01:35:58,080\nThe bookmark page, is a web page, and\nit can have links on it, that link your to\n\n1761\n01:35:58,080 --> 01:36:02,090\nyour intranet server, terminal servers,\nwhatever it is that you want, all right.\n\n1762\n01:36:02,090 --> 01:36:04,390\nIf you don't want to use that,\nif you just want the tunnel,\n\n1763\n01:36:04,390 --> 01:36:05,961\nyou leave this at none and you're done.\n\n1764\n01:36:05,961 --> 01:36:09,726\nBut if you want to have a nice web\npage with links that steer people\n\n1765\n01:36:09,726 --> 01:36:13,283\nto the servers they want,\nyou can create a bookmarks page and\n\n1766\n01:36:13,283 --> 01:36:16,290\nyou can list the different servers and\nso on.\n\n1767\n01:36:16,290 --> 01:36:19,079\nYou basically add in what it is you want,\na title and a URL, and\n\n1768\n01:36:19,079 --> 01:36:22,798\nit just gives them a series of links where\nthey can jump straight to those systems.\n\n1769\n01:36:27,247 --> 01:36:27,940\nAll right.\n\n1770\n01:36:27,940 --> 01:36:29,890\nJust warning you,\nI haven't picked a bookmark link.\n\n1771\n01:36:29,890 --> 01:36:32,220\nI'm not sure, and i'll say yeah fine.\n\n1772\n01:36:32,220 --> 01:36:33,110\nAll right.\n\n1773\n01:36:33,110 --> 01:36:35,000\nWhen that's done, that's it.\n\n1774\n01:36:35,000 --> 01:36:37,250\nIt's now configured, it's now up.\n\n1775\n01:36:37,250 --> 01:36:41,285\nPeople can browse that URL They can\nuse the client list connection.\n\n1776\n01:36:41,285 --> 01:36:42,705\nThey just need to know the URL.\n\n1777\n01:36:42,705 --> 01:36:43,788\nJust remember that link.\n\n1778\n01:36:43,788 --> 01:36:47,647\nThey can browse to it and build up\na temporary VPN tunnel from their computer\n\n1779\n01:36:47,647 --> 01:36:51,458\nor other computers that they're maybe\nborrowing or temporarily using.\n\n1780\n01:36:51,458 --> 01:36:54,290\nAnd you don't have to worry about\nthem configuring software and\n\n1781\n01:36:54,290 --> 01:36:57,210\nyou don't have to worry about\nthem leaving behind the settings.\n\n1782\n01:36:57,210 --> 01:36:59,275\nCuz when they close the tunnel, it's gone.\n\n1783\n01:36:59,275 --> 01:37:00,985\nAll right.\n\n1784\n01:37:00,985 --> 01:37:02,350\nReally cool stuff.\n\n1785\n01:37:02,350 --> 01:37:06,100\nNow the tunnel does build using\na plugin in the web browser, and so\n\n1786\n01:37:06,100 --> 01:37:09,940\nthey do need to have administrative\naccess on the machine they're using.\n\n1787\n01:37:09,940 --> 01:37:11,820\nSo if they're a guest user on the machine,\n\n1788\n01:37:11,820 --> 01:37:14,870\nthey may not have the permissions\nto install that temporary plugin.\n\n1789\n01:37:14,870 --> 01:37:17,550\nSo there are some concerns\non the client side.\n\n1790\n01:37:17,550 --> 01:37:19,600\nThe IINS exam doesn't get into that.\n\n1791\n01:37:19,600 --> 01:37:23,490\nThey really just want you to remember that\nthis is supposed to be simple and easy and\n\n1792\n01:37:23,490 --> 01:37:26,700\nthey can login via a web page and\nthat its really designed for\n\n1793\n01:37:26,700 --> 01:37:28,260\nfirewalls not for routers.\n\n1794\n01:37:28,260 --> 01:37:30,410\n>> Right, athough the routers support it.\n\n1795\n01:37:30,410 --> 01:37:34,300\nThe routers actually come with two\nlicences, all CIsco routers come with two\n\n1796\n01:37:34,300 --> 01:37:39,010\nSSL licences out of the box, designed for\nadministrative use not for end users.\n\n1797\n01:37:40,890 --> 01:37:47,240\nAnd the only other VPN type they mentioned\nis the one that uses a client right?\n\n1798\n01:37:47,240 --> 01:37:50,670\nAny connect, and\nthe any connect client is included.\n\n1799\n01:37:50,670 --> 01:37:55,860\nNow I will say licensing on ASAs are\nweird, a lot of ASAs will come with like\n\n1800\n01:37:55,860 --> 01:38:01,100\n25 licences for user VPNs but\nonly come with two AnyConnect licenses.\n\n1801\n01:38:01,100 --> 01:38:03,710\nSo the AnyConnect client,\nthat's their new VPN client.\n\n1802\n01:38:03,710 --> 01:38:05,890\nThe old VPN client they've end of lifed.\n\n1803\n01:38:05,890 --> 01:38:07,540\nThe old one you get like 25 licenses.\n\n1804\n01:38:07,540 --> 01:38:09,510\nThe new one, just two.\n\n1805\n01:38:09,510 --> 01:38:15,590\nBut AnyConnect will run on iOS,\niPhone, Android, Os X, Windows, Linux.\n\n1806\n01:38:15,590 --> 01:38:17,990\nIt runs on anything,\nthat's why they call it AnyConnect.\n\n1807\n01:38:19,045 --> 01:38:19,920\nAnd it's another one,\n\n1808\n01:38:19,920 --> 01:38:24,850\nwe just have a simple wizard, we can\ngo under VPN wizards and any connect.\n\n1809\n01:38:26,160 --> 01:38:28,980\nAnd you run through the same basic\nprocess, the only difference is we're not\n\n1810\n01:38:28,980 --> 01:38:32,500\ntying to a website now,\nwe're actually tying to a server.\n\n1811\n01:38:32,500 --> 01:38:37,040\nAnd so I'll create a NA connect profile.\n\n1812\n01:38:37,040 --> 01:38:38,750\nIt's connecting on the outside interface.\n\n1813\n01:38:40,770 --> 01:38:43,650\nAnd it supports SSL and IPSec.\n\n1814\n01:38:43,650 --> 01:38:48,732\nNow you can check both, and it will try\none and if it fails, try the other.\n\n1815\n01:38:48,732 --> 01:38:49,535\nRight?\nAnyconnect\n\n1816\n01:38:49,535 --> 01:38:51,135\nis designed to be very flexible.\n\n1817\n01:38:51,135 --> 01:38:53,955\nBased on firewall rules and stuff for\nthe location somebody's at,\n\n1818\n01:38:53,955 --> 01:38:57,435\nmaybe IPsec won't work, and so\nit can flip over and try and use SSL.\n\n1819\n01:38:57,435 --> 01:39:01,275\nWe would specify our certificates here,\nwhich mine didn't generate, so\n\n1820\n01:39:01,275 --> 01:39:02,415\nI'll just leave those blank for now.\n\n1821\n01:39:04,225 --> 01:39:06,395\nOh, it's not gonna let me, shoot.\n\n1822\n01:39:06,395 --> 01:39:08,413\nWell, let's see if it'll\nactually let me generate one.\n\n1823\n01:39:15,290 --> 01:39:17,940\nIt wouldn't let me generate one before but\nanyhow.\n\n1824\n01:39:17,940 --> 01:39:22,502\nSo maybe it'll just forget\nabout it there and be okay.\n\n1825\n01:39:22,502 --> 01:39:26,200\nAll right,well,\nthere's not too much more to it.\n\n1826\n01:39:26,200 --> 01:39:29,910\nBasically you specify these settings\njust like with the SSL settings.\n\n1827\n01:39:29,910 --> 01:39:33,590\nThe only real difference,\nyou can specify your client images.\n\n1828\n01:39:33,590 --> 01:39:36,860\nThat's your software that's gonna\nbe loaded on the remote machine.\n\n1829\n01:39:36,860 --> 01:39:40,790\nSo you'll have a Linux image,\nan OSX image, a Windows image, each one.\n\n1830\n01:39:40,790 --> 01:39:43,270\nAnd those can be updated over time and\nstuff.\n\n1831\n01:39:43,270 --> 01:39:48,090\nYou just load them right on here, and the\nend users can choose to download them and\n\n1832\n01:39:48,090 --> 01:39:49,800\nload them on their system.\n\n1833\n01:39:49,800 --> 01:39:52,340\nThen you specify how you\nwanna do authentication, so\n\n1834\n01:39:52,340 --> 01:39:54,190\nnormally a radius server.\n\n1835\n01:39:54,190 --> 01:39:57,090\nYou specify your client addressing,\nall right?\n\n1836\n01:39:57,090 --> 01:39:59,190\nYou'll need to set up a DACP pool,\n\n1837\n01:39:59,190 --> 01:40:03,060\na pool of addresses to hand out\nto these people for them to use.\n\n1838\n01:40:03,060 --> 01:40:05,290\nLastly, you specify your NAT exempt rules,\n\n1839\n01:40:05,290 --> 01:40:08,160\nwhich say when you want to NAT\nthese people and when you don't.\n\n1840\n01:40:08,160 --> 01:40:10,810\nAnd then you wrap it up and you're done.\n\n1841\n01:40:10,810 --> 01:40:14,560\nIt creates any connect\nclient deployment packages.\n\n1842\n01:40:14,560 --> 01:40:18,330\nPackages that you can download and\ninstall on all your laptops and PCs.\n\n1843\n01:40:18,330 --> 01:40:21,650\nAnd then all they do is fire up\nAny Connect and they are connected.\n\n1844\n01:40:21,650 --> 01:40:23,500\nThey close it and they're disconnected.\n\n1845\n01:40:23,500 --> 01:40:26,350\nNo end user configuration needed\nthey just install the package and\n\n1846\n01:40:26,350 --> 01:40:27,570\nthey're in business.\n\n1847\n01:40:27,570 --> 01:40:32,790\nSo it's really neat stuff, it is designed\nfor that remote access type connectivity.\n\n1848\n01:40:32,790 --> 01:40:37,620\nIf you wanna learn more about it,\nthe Cisco CCMP security track\n\n1849\n01:40:37,620 --> 01:40:42,990\nhas a specific certification\nexam that is called VPN and\n\n1850\n01:40:42,990 --> 01:40:46,070\nit goes into the remote access\nstuff really in detail.\n\n1851\n01:40:46,070 --> 01:40:52,490\nFor the INS show, or IINS exam, they just\nwant you to know the concepts, the idea\n\n1852\n01:40:52,490 --> 01:40:57,960\nwith any connects you actually have a\nclient installed with SSL BPN, you don't.\n\n1853\n01:40:57,960 --> 01:40:59,460\nIt's a plug in through the browser.\n\n1854\n01:40:59,460 --> 01:41:00,180\nIt's dynamic.\n\n1855\n01:41:00,180 --> 01:41:03,504\nIt comes and goes when you need it,\ndesigned for temporary installations.\n\n1856\n01:41:05,530 --> 01:41:08,210\nAll right, so that's pretty much those.\n\n1857\n01:41:08,210 --> 01:41:12,190\nKeep in mind, that is on the ASA,\nyour routers do have support for it.\n\n1858\n01:41:12,190 --> 01:41:16,482\nIf I jump back to my CCP, back in here,\n\n1859\n01:41:16,482 --> 01:41:22,080\nif I go back to configuration and\nVPN whoops.\n\n1860\n01:41:22,080 --> 01:41:25,790\nIf we look at the VPN,\nyou'll see in here where I've got SSL VPN,\n\n1861\n01:41:25,790 --> 01:41:30,390\nand I can go in and\nI can create the SSL VPN on the router.\n\n1862\n01:41:30,390 --> 01:41:34,800\nThe problem is,\nit is 100% done in software, so\n\n1863\n01:41:34,800 --> 01:41:37,030\nall of that's being encrypted and\ndecrypted in software.\n\n1864\n01:41:37,030 --> 01:41:38,730\nIt's not very efficient and\n\n1865\n01:41:38,730 --> 01:41:43,750\nthat's where Cisco recommends\nthat you use the ASA to do it.\n\n1866\n01:41:43,750 --> 01:41:47,920\nThis particular router doesn't support any\nconnect, I'm not sure that any routers do.\n\n1867\n01:41:47,920 --> 01:41:50,740\nI haven't seen any routers that do,\nit doesn't mean they haven't made any.\n\n1868\n01:41:50,740 --> 01:41:55,120\nBut they can do easy VPN,\nwhich is the old technology.\n\n1869\n01:41:55,120 --> 01:41:58,160\nAs they can also,\nsome of them can do PPTP and LPTP, but\n\n1870\n01:41:58,160 --> 01:41:59,620\nyou don't see that too, whoa!\n\n1871\n01:41:59,620 --> 01:42:00,761\nToo often anymore, either.\n\n1872\n01:42:00,761 --> 01:42:02,370\n>> [LAUGH]\n>> Now I just need something to secure my\n\n1873\n01:42:02,370 --> 01:42:02,894\ncup on the table.\n\n1874\n01:42:02,894 --> 01:42:06,800\n>> [LAUGH]\n>> All right, so\n\n1875\n01:42:06,800 --> 01:42:09,957\nI feel like that's about it.\n\n1876\n01:42:09,957 --> 01:42:11,203\nCan you think of anything I left out?\n\n1877\n01:42:11,203 --> 01:42:14,622\n>> The only thing to remember,\nespecially if you're doing in this\n\n1878\n01:42:14,622 --> 01:42:17,154\nreal production networks\nhere is on the ASDM and\n\n1879\n01:42:17,154 --> 01:42:21,043\nprobably on the CCP, make sure you\nhit apply when you make your changes.\n\n1880\n01:42:21,043 --> 01:42:25,182\n>> [LAUGH]\n>> I know that seems like it's\n\n1881\n01:42:25,182 --> 01:42:26,088\nsomething silly.\n\n1882\n01:42:26,088 --> 01:42:29,773\nBut it really does make a difference,\nbecause changes don't really take place\n\n1883\n01:42:29,773 --> 01:42:32,770\nuntil you actually finish\napplying everything.\n\n1884\n01:42:32,770 --> 01:42:34,430\nSo make sure you take LAN.\n\n1885\n01:42:34,430 --> 01:42:37,060\nI'd do it on the exam as well.\n\n1886\n01:42:37,060 --> 01:42:42,000\n>> All right, well, with this episode we\nhave officially filmed content covering\n\n1887\n01:42:42,000 --> 01:42:44,250\nevery single objective for the IINS exam.\n\n1888\n01:42:44,250 --> 01:42:48,100\nSo we have kind of moved through and\ncovered all of these which is awesome.\n\n1889\n01:42:48,100 --> 01:42:51,420\nThat doesn't mean the show is over.\n\n1890\n01:42:51,420 --> 01:42:56,700\nIf you ever have any questions at all,\ngo to the ITPro.TV website.\n\n1891\n01:42:56,700 --> 01:42:58,720\nAt the top of every page\nis a link that says Q&A.\n\n1892\n01:42:58,720 --> 01:43:01,910\nYou can post your questions there,\nand we'll answer them.\n\n1893\n01:43:01,910 --> 01:43:04,338\nIf they're easy questions,\nwe just answer in the Q&A.\n\n1894\n01:43:04,338 --> 01:43:07,690\nBut if they're really good questions,\nwe'll film another episode and\n\n1895\n01:43:07,690 --> 01:43:09,460\npost that answer in here.\n\n1896\n01:43:09,460 --> 01:43:13,140\nThe other thing is, Cisco does\nupdate the exam from time to time.\n\n1897\n01:43:13,140 --> 01:43:16,540\nAnd, whenever there's an update we'll\ncome and film that content, again.\n\n1898\n01:43:16,540 --> 01:43:18,690\nAdd onto this to keep it up to date.\n\n1899\n01:43:18,690 --> 01:43:22,430\nSo, don't feel like this is the last\ntime you'll see us talking about IINS.\n\n1900\n01:43:22,430 --> 01:43:27,740\nWe're always willing to answer questions\nand we'll film new episodes as necessary.\n\n1901\n01:43:27,740 --> 01:43:29,091\nBut, with what we've got here,\n\n1902\n01:43:29,091 --> 01:43:32,003\nwe've covered everything that's\ngonna get thrown at you on the exam.\n\n1903\n01:43:32,003 --> 01:43:36,080\nSo, study up, work hard, post any\nquestions you have to us, make sure that\n\n1904\n01:43:36,080 --> 01:43:40,126\nany uncertainty you have gets answered\nbefore you go into that exam booth.\n\n1905\n01:43:40,126 --> 01:43:41,260\n>> Right.\n\n1906\n01:43:41,260 --> 01:43:45,246\n>> I think you'll find that the IINS exam,\nit's not the most challenging,\n\n1907\n01:43:45,246 --> 01:43:46,671\nit is a lot of new content.\n\n1908\n01:43:46,671 --> 01:43:49,708\nBut, it's not the hardest exam\nin the world, that's for sure.\n\n1909\n01:43:49,708 --> 01:43:54,460\nSo, definitely just relax,\nstay calm, study.\n\n1910\n01:43:54,460 --> 01:43:54,980\nAnd you'll do fine.\n\n1911\n01:43:54,980 --> 01:43:56,910\n>> Right.\n>> All right, Ronnie,\n\n1912\n01:43:56,910 --> 01:43:59,390\nany other pearls of wisdom we\nwant to impart on our viewers?\n\n1913\n01:43:59,390 --> 01:44:02,310\n>> Nope.\nJust, again, keep working at it,\n\n1914\n01:44:02,310 --> 01:44:06,650\nas frustrating as it gets,\nit's worth it in the end, so keep working.\n\n1915\n01:44:06,650 --> 01:44:08,820\n>> All right, well ladies and\ngentlemen, I hope you enjoyed the show.\n\n1916\n01:44:08,820 --> 01:44:12,680\nSigning off for itprotv, I'm Don Peset\n>> I'm Ronnie Wong and\n\n1917\n01:44:12,680 --> 01:44:14,255\nwe'll see you next time.\n\n1918\n01:44:14,255 --> 01:44:24,255\n[MUSIC]\n\n1919\n01:44:26,120 --> 01:44:32,820\n[SOUND]\n\n",
          "vimeoId": "87568648"
        }
      ],
      "title": "VPN Technologies"
    }
  ],
  "url": "ccna-security",
  "vLab": false
}
