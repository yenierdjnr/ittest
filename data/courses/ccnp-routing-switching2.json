{
  "description": "Troubleshooting and Maintaining Cisco IP Networks exam is one of three exams required to obtain the Cisco Certified Network Professional - Routing and Switching certification. This exam focuses on troubleshooting Layer 2 and Layer 3 devices, planning regular maintenance, and troubleshooting methodology  in complex medium and large environments. The topics include Systematic Troubleshooting Principles, Layer 2 and Layer 3 technology, Infrastructure Services and Security, and VPN technologies. The typical viewer would be anyone responsible for the maintenance and implementation and administration of Cisco Layer 2 and Layer 3 technologies in complex organizations.",
  "descriptionMD": "",
  "length": "68120",
  "name": "CCNP Routing and Switching - TSHOOT",
  "practiceExam": false,
  "subtitle": "Troubleshooting and Maintaining Cisco IP Networks",
  "tagUrl": "network-admin",
  "topics": [
    {
      "episodes": [
        {
          "description": "Troubleshooting and Maintaining Cisco IP Networks exam is one of three exams required to obtain the Cisco Certified Network Professional - Routing and Switching certification. This exam focuses on troubleshooting Layer 2 and Layer 3 devices, planning regular maintenance, and troubleshooting methodology in complex medium and large environments. The topics include Systematic Troubleshooting Principles, Layer 2 and Layer 3 technology, Infrastructure Services and Security, and VPN technologies. The typical viewer would be anyone responsible for the maintenance and implementation and administration of Cisco Layer 2 and Layer 3 technologies in complex organizations.",
          "length": "697",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-0-0-overview-102115-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-0-0-overview-102115-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-0-0-overview-102115-1-sm.jpg",
          "title": "CCNP Routing and Switching - Overview",
          "transcript": "WEBVTT\n\n1\n00:00:00.188 --> 00:00:06.143\n[MUSIC]\n\n2\n00:00:06.143 --> 00:00:10.418\nHello, in this video we're gonna\nbe talking about CCNP routing and\n\n3\n00:00:10.418 --> 00:00:11.870\nswitching t-shoot.\n\n4\n00:00:11.870 --> 00:00:13.936\nSo Don,\nwhat can you tell us about this exam?\n\n5\n00:00:13.936 --> 00:00:16.300\n>> All right, well t-shoot is\none of the CCNP routing and\n\n6\n00:00:16.300 --> 00:00:19.670\nswitching exams as most of you know if\nyou're here at this point probably.\n\n7\n00:00:19.670 --> 00:00:23.830\nThere's three different exams associated\nwith getting your CCNP routing and\n\n8\n00:00:23.830 --> 00:00:27.440\nswitching and\nthis one is typically the third exam.\n\n9\n00:00:27.440 --> 00:00:30.620\nThat's kind of important,\nright, where you start, and\n\n10\n00:00:30.620 --> 00:00:32.680\nsome of them are interchangeable so\nit doesn't really matter.\n\n11\n00:00:32.680 --> 00:00:34.880\nLet me show you what I\nmean on Cisco's website.\n\n12\n00:00:34.880 --> 00:00:38.160\nSo I've got their CCNP Routing and\nSwitching site pulled up, and\n\n13\n00:00:38.160 --> 00:00:42.110\nfor the Routing and Switching cert, you'll\nsee those three exams listed right here.\n\n14\n00:00:42.110 --> 00:00:46.260\nROUTE, SWITCH, and TSHOOT,\nand Cisco doesn't really care\n\n15\n00:00:46.260 --> 00:00:50.110\nwhich order you take them in so you could\nstart with TSHOOT if you wanted and\n\n16\n00:00:50.110 --> 00:00:53.530\ndo ROUTE last or\nvice versa it's up to you.\n\n17\n00:00:53.530 --> 00:00:57.475\nBut I'll tell you in real life LAN you\ntypically wanna start with ROUTE or\n\n18\n00:00:57.475 --> 00:00:58.001\nSWITCH.\n\n19\n00:00:58.001 --> 00:01:00.951\nIt doesn't really matter which\none you start with there but\n\n20\n00:01:00.951 --> 00:01:03.257\nTSHOOT needs to be last and\nlet me tell you why.\n\n21\n00:01:03.257 --> 00:01:07.000\nRouting that covers,\nwell Cisco routers, right?\n\n22\n00:01:07.000 --> 00:01:08.880\nAll the routing technologies\nhow you implement them and\n\n23\n00:01:08.880 --> 00:01:10.570\nhow they're supposed to work.\n\n24\n00:01:10.570 --> 00:01:12.420\nSWITCH covers the later\ntwo side of the things.\n\n25\n00:01:12.420 --> 00:01:15.370\nThe switches and how you implement\nthem and how they're supposed to work.\n\n26\n00:01:15.370 --> 00:01:18.590\nTSHOOT covers both routing and\n\n27\n00:01:18.590 --> 00:01:22.810\nswitching and it's covering when they\ndon't work the way they're supposed to.\n\n28\n00:01:22.810 --> 00:01:25.970\nSo, it's kinda hard to troubleshoot\nsomething if you don't know how it's\n\n29\n00:01:25.970 --> 00:01:27.670\nsupposed to work in the first place.\n\n30\n00:01:27.670 --> 00:01:29.160\nSo you want to make sure\nyou've done ROUTE and\n\n31\n00:01:29.160 --> 00:01:32.740\nSWITCH first, before moving into TSHOOT.\n\n32\n00:01:32.740 --> 00:01:37.250\nAnd when you pass all three of them,\nyou'll have your CCNP Routing and\n\n33\n00:01:37.250 --> 00:01:38.430\nSwitching certification.\n\n34\n00:01:38.430 --> 00:01:42.280\nSo, it's a lot of work, but\nit's a lot of reward too.\n\n35\n00:01:42.280 --> 00:01:46.190\n>> All right so Don, if I was\nthinking about getting into IT, I've\n\n36\n00:01:46.190 --> 00:01:50.350\ntaken a couple of certifications before,\nwho is this certification geared for?\n\n37\n00:01:50.350 --> 00:01:52.200\nIs that for somebody like me?\n\n38\n00:01:52.200 --> 00:01:54.700\n>> Well it certainly can be, right?\n\n39\n00:01:54.700 --> 00:01:57.520\nThe CCNP routing and\nswitching it's the next step right?\n\n40\n00:01:57.520 --> 00:02:00.930\nSo in Cisco certification you have CCENT,\nthat's the beginning right?\n\n41\n00:02:00.930 --> 00:02:03.290\nThat's for somebody just\ngetting started in networking.\n\n42\n00:02:03.290 --> 00:02:05.420\nAnd then you have the CCNA,\n\n43\n00:02:05.420 --> 00:02:07.890\nhere's somebody who's moving\ninto a networking career.\n\n44\n00:02:07.890 --> 00:02:10.800\nThey work at a help desk, or\na network operations center, and\n\n45\n00:02:10.800 --> 00:02:12.230\nthey're kind of assisting.\n\n46\n00:02:12.230 --> 00:02:14.500\nBut the CCNP, that's the next level up.\n\n47\n00:02:14.500 --> 00:02:15.130\nRight?\n\n48\n00:02:15.130 --> 00:02:17.950\nIn the CCNA side of things,\nyou're supporting between one and\n\n49\n00:02:17.950 --> 00:02:19.070\nten network devices.\n\n50\n00:02:19.070 --> 00:02:23.420\nBut CCNP here's where we're moving up to\nthe large and enterprise level networks.\n\n51\n00:02:23.420 --> 00:02:27.810\nNetworks that have 50, 100,\n1,000 devices, routers, and switches,\n\n52\n00:02:27.810 --> 00:02:31.210\ntons of equipment,\nmuch more complex networks.\n\n53\n00:02:31.210 --> 00:02:34.862\nSo if you're in that environment,\nif you're working in a network operations\n\n54\n00:02:34.862 --> 00:02:38.628\ncenter and you're doing network design,\nyou're implementing and supporting\n\n55\n00:02:38.628 --> 00:02:42.249\nnetworks, you're doing consulting,\nthen this is the right place for you.\n\n56\n00:02:42.249 --> 00:02:46.287\nIf you're just getting started,\nthough, don't get started with CCMP.\n\n57\n00:02:46.287 --> 00:02:49.510\nIt's really gonna be too high up for you.\n\n58\n00:02:49.510 --> 00:02:50.970\nIt gets confusing really fast.\n\n59\n00:02:50.970 --> 00:02:52.970\nYou've gotta have\nthe foundational knowledge first.\n\n60\n00:02:52.970 --> 00:02:54.250\nThe CCENT and the CCNA.\n\n61\n00:02:54.250 --> 00:02:56.810\nThose are the best places to start.\n\n62\n00:02:56.810 --> 00:03:00.410\nIf you have absolutely no networking\nknowledge, well, the compt and\n\n63\n00:03:00.410 --> 00:03:03.480\nnetwork plus certification might\nactually be a better place to start\n\n64\n00:03:03.480 --> 00:03:07.610\nbecause you'll learn a lot of theories and\nfundamentals that are extremely valuable.\n\n65\n00:03:07.610 --> 00:03:09.210\nBecause that creates the foundation for\n\n66\n00:03:09.210 --> 00:03:11.705\nall the additional technology\nthat we stack on it.\n\n67\n00:03:11.705 --> 00:03:15.550\nCCNA, you start to learn\nimplementing technologies and\n\n68\n00:03:15.550 --> 00:03:20.550\nhow they work in a general functionality\ntype of environment CC TNP,\n\n69\n00:03:20.550 --> 00:03:23.120\nwe really start getting\ninto specializations.\n\n70\n00:03:23.120 --> 00:03:26.110\nWe take things like EIGRP and OSPF and\n\n71\n00:03:26.110 --> 00:03:28.920\nother routing protocols we would\ngo far more advanced on them and\n\n72\n00:03:28.920 --> 00:03:33.280\nin TSHOOT it's the most advanced of all\nof them because we're troubleshooting,\n\n73\n00:03:33.280 --> 00:03:37.250\nwe're having to really dig into the deep\ndetails of each protocol to identify\n\n74\n00:03:37.250 --> 00:03:40.320\nwhat's going wrong and what's causing\nyour network not to function.\n\n75\n00:03:40.320 --> 00:03:45.320\nSo this is gonna be for somebody who is a\nfull time network engineer, who's already\n\n76\n00:03:45.320 --> 00:03:50.200\nstarted in their IT career and\nis now looking to advance farther along.\n\n77\n00:03:50.200 --> 00:03:50.840\n>> Yeah, sure.\n\n78\n00:03:50.840 --> 00:03:54.120\nAnd, some of the things I've seen in\nsome of my studies, a lot of jargon,\n\n79\n00:03:54.120 --> 00:03:56.530\na lot of procedures,\na lot of different technologies.\n\n80\n00:03:56.530 --> 00:03:57.230\nWhat can we expect?\n\n81\n00:03:57.230 --> 00:03:58.790\nWhat kind of topics can we expect to see?\n\n82\n00:03:58.790 --> 00:04:01.834\nI'm sure it's going to be a little bit\nof jargon and acronyms, but maybe not?\n\n83\n00:04:01.834 --> 00:04:02.640\n>> [LAUGH]\n>> [LAUGH]\n\n84\n00:04:02.640 --> 00:04:07.280\nYou can't have an IT certification without\njust an alphabet soup of acronyms.\n\n85\n00:04:07.280 --> 00:04:10.370\nBut on this one, it's actually a little\nbit easier going because in theory,\n\n86\n00:04:10.370 --> 00:04:13.220\nyou've already learned all the acronyms,\nand theory, and\n\n87\n00:04:13.220 --> 00:04:14.970\nfundamentals in previous certifications.\n\n88\n00:04:14.970 --> 00:04:17.790\nThis just really focuses on tools,\ntroubleshooting,\n\n89\n00:04:17.790 --> 00:04:19.050\ntroubleshooting methodology.\n\n90\n00:04:19.050 --> 00:04:21.260\nSo let's take a look at\nthe exam objectives and\n\n91\n00:04:21.260 --> 00:04:23.200\nI'll walk you through what it hits.\n\n92\n00:04:23.200 --> 00:04:24.700\nThe first thing you're gonna notice is,\n\n93\n00:04:24.700 --> 00:04:29.860\nunlike the other exams,\nthis one has between 15 and 25 questions.\n\n94\n00:04:29.860 --> 00:04:34.672\nThat's a huge difference compared to\nthe other exams that might have 100, 150,\n\n95\n00:04:34.672 --> 00:04:36.765\neven 200 questions in some cases.\n\n96\n00:04:36.765 --> 00:04:38.844\nHere as few as 15.\n\n97\n00:04:38.844 --> 00:04:39.924\nWhat the heck's that all about?\n\n98\n00:04:39.924 --> 00:04:43.340\nWell this exam is not\nlike the other exams.\n\n99\n00:04:43.340 --> 00:04:46.050\nThis exam is very hands on.\n\n100\n00:04:46.050 --> 00:04:49.360\nEvery question is tied to\na simulation of some sort and\n\n101\n00:04:49.360 --> 00:04:52.000\nyou might not be changing\nanything in the simulation.\n\n102\n00:04:52.000 --> 00:04:55.420\nYou might just be getting information\nout of it, identifying a problem, and\n\n103\n00:04:55.420 --> 00:04:57.740\nit doesn't take many questions to do that.\n\n104\n00:04:57.740 --> 00:04:59.520\nBut it's still a two hour exam.\n\n105\n00:04:59.520 --> 00:05:02.470\nCould you imagine taking two\nhours to only do 15 questions?\n\n106\n00:05:02.470 --> 00:05:04.640\nThat shows you the difficulty\nlevel of these questions.\n\n107\n00:05:04.640 --> 00:05:07.150\nIt's hard stuff,\nyou need to be ready for this.\n\n108\n00:05:07.150 --> 00:05:07.780\nAll right.\n\n109\n00:05:07.780 --> 00:05:08.790\nBut if we look at the topics,\n\n110\n00:05:08.790 --> 00:05:10.820\nit does start off with some\nbasic network principles.\n\n111\n00:05:10.820 --> 00:05:11.410\nRight?\nAnd\n\n112\n00:05:11.410 --> 00:05:13.810\nthese are the tools that we have\navailable for troubleshooting, and\n\n113\n00:05:13.810 --> 00:05:17.240\nsome of the methodologies that\nwe can use as we go through and\n\n114\n00:05:17.240 --> 00:05:19.560\ndesign how we're going to\ntroubleshoot that network.\n\n115\n00:05:19.560 --> 00:05:21.960\nAnd then it moves into layer two.\n\n116\n00:05:21.960 --> 00:05:23.670\nAnd if you look at what's in layer two,\n\n117\n00:05:23.670 --> 00:05:27.160\na lot of this reads like the objectives\nright out of the switch certification.\n\n118\n00:05:27.160 --> 00:05:28.400\nAnd that's because they are, right?\n\n119\n00:05:28.400 --> 00:05:30.599\nThese are the same things you\nlearned on the switch exam.\n\n120\n00:05:31.660 --> 00:05:34.850\nBut on the switch exam, things\nare working the way they're supposed to,\n\n121\n00:05:34.850 --> 00:05:35.570\nhere they're not.\n\n122\n00:05:35.570 --> 00:05:39.090\nSo we're gonna see all the things that\ncan go wrong with VLANs, with trunking,\n\n123\n00:05:39.090 --> 00:05:42.610\nwith EtherChannel, all the stuff that\ncan go wrong to cause problems and\n\n124\n00:05:42.610 --> 00:05:45.640\nmake things not work the way\nthat we expect them to work.\n\n125\n00:05:45.640 --> 00:05:46.308\nAnd how we can fix them.\n\n126\n00:05:46.308 --> 00:05:48.977\nAfter that we move into layer\nthree which is the routing side.\n\n127\n00:05:48.977 --> 00:05:50.475\nSo we start to take a look at those.\n\n128\n00:05:50.475 --> 00:05:54.903\nAnd again this kinda lines up with the\nroute exam that we see our dynamic routing\n\n129\n00:05:54.903 --> 00:05:55.653\nprotocols.\n\n130\n00:05:55.653 --> 00:05:59.957\nWe see static routing, VRFs, all of\nthose different technologies that we\n\n131\n00:05:59.957 --> 00:06:03.345\nimplemented in the other certs,\njust not working right.\n\n132\n00:06:03.345 --> 00:06:06.830\n[LAUGH] What we need to do\nto actually get them up.\n\n133\n00:06:06.830 --> 00:06:07.640\nAnd functional.\n\n134\n00:06:07.640 --> 00:06:09.720\nAnd you'll see where route\nis a huge part of it.\n\n135\n00:06:09.720 --> 00:06:14.590\nWe've got VPNs thrown in there too,\na lot of easy mistakes to be made in VPNs.\n\n136\n00:06:14.590 --> 00:06:18.660\nWe've got infrastructure security, so, how\nwe lock our systems down and protect them.\n\n137\n00:06:18.660 --> 00:06:21.020\nWe'll see Triple A and SSH.\n\n138\n00:06:21.020 --> 00:06:25.090\nOur axis list will come into that,\nand then finally we wrap it up with\n\n139\n00:06:25.090 --> 00:06:28.900\ninfrastructure services so\nyou'll see things like snmp, and\n\n140\n00:06:28.900 --> 00:06:33.520\nNetflow, ntp and these other technologies\nthat we implemented that, again,\n\n141\n00:06:33.520 --> 00:06:37.150\nthere's spots where you can make\nmistakes or things can not work right.\n\n142\n00:06:37.150 --> 00:06:39.770\nWe need to find out why and\ntake the action to fix it.\n\n143\n00:06:39.770 --> 00:06:42.110\nSo, those are the things\nthat are on the exam.\n\n144\n00:06:42.110 --> 00:06:45.670\nIt does look like route and switch and\n\n145\n00:06:45.670 --> 00:06:47.630\nsome people get that false\nsense of security and say well,\n\n146\n00:06:47.630 --> 00:06:50.850\nI already passed route, I already passed\nswitch I'll just go take the exam.\n\n147\n00:06:50.850 --> 00:06:53.520\nWell, troubleshooting these\nthings can be really tricky and\n\n148\n00:06:53.520 --> 00:06:57.270\nit does require an intimate knowledge\nof how these protocols work and\n\n149\n00:06:57.270 --> 00:06:59.480\ninteract together to troubleshoot nicely.\n\n150\n00:06:59.480 --> 00:07:04.120\nAnd that's why this is an entirely\ndedicated show all to itself, you know\n\n151\n00:07:04.120 --> 00:07:06.420\nhow to troubleshoot these technologies\n>> That sounds really fun,\n\n152\n00:07:06.420 --> 00:07:08.890\nnow let's say that I've\ndone all of my research.\n\n153\n00:07:08.890 --> 00:07:12.213\nI've looked at the minutiae,\nmaybe I've taken the objectives,\n\n154\n00:07:12.213 --> 00:07:14.000\nI've done my hands-on practice.\n\n155\n00:07:14.000 --> 00:07:14.680\nI've got in there.\n\n156\n00:07:14.680 --> 00:07:16.380\nI've broken a couple of labs.\n\n157\n00:07:16.380 --> 00:07:18.750\nI've fixed a couple of labs,\nhence troubleshooting.\n\n158\n00:07:18.750 --> 00:07:21.050\nNow, how am I gonna take the exam?\n\n159\n00:07:21.050 --> 00:07:21.630\nWhere do I go?\n\n160\n00:07:21.630 --> 00:07:22.340\nWhat do I do?\n\n161\n00:07:22.340 --> 00:07:23.940\n>> Well, just like the other Cisco exams,\n\n162\n00:07:23.940 --> 00:07:26.240\nthis one's administered\nthrough Pearson VUE.\n\n163\n00:07:26.240 --> 00:07:29.030\nAnd Pearson View has testing\ncenters all over the world.\n\n164\n00:07:29.030 --> 00:07:32.380\nSo you actually just go to their web site\nand you locate a testing center near you.\n\n165\n00:07:32.380 --> 00:07:35.390\nYou will be able to sign up for\nthe exam, register, and go and take it.\n\n166\n00:07:35.390 --> 00:07:38.450\nSo you can watch our show,\nyou can read whatever books you read.\n\n167\n00:07:38.450 --> 00:07:40.080\nYou can watch other people's shows.\n\n168\n00:07:40.080 --> 00:07:41.380\nOnce you're ready for the exam,\n\n169\n00:07:41.380 --> 00:07:44.687\neverybody kinda funnels down to that one\ndestination, they all end up going to Vue.\n\n170\n00:07:44.687 --> 00:07:47.072\nIf you've never been to their site, well,\n\n171\n00:07:47.072 --> 00:07:51.583\nI guess if you're watching this show you\nshould already have your CC&A and CC&T so\n\n172\n00:07:51.583 --> 00:07:55.127\nthat might be an indicator that\nyou're not in the right spot, but\n\n173\n00:07:55.127 --> 00:07:59.268\nif just somehow you haven't been there\nbefore the Vue website is Vue.com.\n\n174\n00:07:59.268 --> 00:08:01.994\nIf you go to Vue.com,\nI've got their page pulled up right here.\n\n175\n00:08:01.994 --> 00:08:03.230\nIt'll take you to this page.\n\n176\n00:08:03.230 --> 00:08:06.220\nIt actually forwards to\nhome.pearsonvue.com.\n\n177\n00:08:06.220 --> 00:08:07.100\nAnd when you go to their site,\n\n178\n00:08:07.100 --> 00:08:11.100\nthey've got a whole section here\nwhere it says for test takers, right?\n\n179\n00:08:11.100 --> 00:08:14.090\nNot test owners or test centers,\nbut for test takers.\n\n180\n00:08:14.090 --> 00:08:15.530\nAnd if you jump into\nthe test takers' side,\n\n181\n00:08:15.530 --> 00:08:18.920\nyou'll see review does testing exams for\na lot of different people.\n\n182\n00:08:18.920 --> 00:08:21.880\nAnd so we can come in here and\njust type Cisco.\n\n183\n00:08:21.880 --> 00:08:25.670\nAnd it'll find the link to take\nus to the Cisco exams, and\n\n184\n00:08:25.670 --> 00:08:26.930\nat least it's supposed to.\n\n185\n00:08:26.930 --> 00:08:27.720\nIt's kinda stalling here.\n\n186\n00:08:27.720 --> 00:08:29.070\nI'll do the A to Z list.\n\n187\n00:08:29.070 --> 00:08:33.110\nIt's an IT exam, so you can find\nit under the IT category also.\n\n188\n00:08:33.110 --> 00:08:33.890\nBut if we just look for\n\n189\n00:08:33.890 --> 00:08:37.360\nCisco, it's in there too, and you can\nfind a testing center that's near you.\n\n190\n00:08:37.360 --> 00:08:39.040\nHere's Cisco Systems.\n\n191\n00:08:39.040 --> 00:08:41.630\nAnd so it'll give you additional\ninformation about the exam itself,\n\n192\n00:08:41.630 --> 00:08:45.240\nas far as how much it costs and\nwhen you need to register.\n\n193\n00:08:45.240 --> 00:08:48.570\nAnd it does vary from country to country,\nso that's why it's important that you go\n\n194\n00:08:48.570 --> 00:08:51.620\nto this website to verify\nthe information for you.\n\n195\n00:08:51.620 --> 00:08:53.880\nBut once you're ready you've\ngot this link right over here.\n\n196\n00:08:53.880 --> 00:08:55.270\nFind a testing center.\n\n197\n00:08:55.270 --> 00:08:57.300\nAnd you can find one\nthat's located near you.\n\n198\n00:08:57.300 --> 00:09:03.970\nSo if I'm in Brisbane,\nlet's see if it can just find Brisbane.\n\n199\n00:09:03.970 --> 00:09:06.595\nOh, did I mean,\nI mean Brisbane Australia, there we go.\n\n200\n00:09:06.595 --> 00:09:10.045\nSo if I'm in Brisbane, Australia, here we\ngo, I've got five testing centers that\n\n201\n00:09:10.045 --> 00:09:14.445\nare right there near downtown, we can\nlocate the one, go and schedule the exam,\n\n202\n00:09:14.445 --> 00:09:17.925\ntake it, pass, and get our CCMP\nrouting and switching certification.\n\n203\n00:09:17.925 --> 00:09:18.775\n>> Very good, very good.\n\n204\n00:09:18.775 --> 00:09:21.510\nSo a lot of, stuff in here.\n\n205\n00:09:21.510 --> 00:09:23.990\nThe CCMP routing and switching T-shoot.\n\n206\n00:09:23.990 --> 00:09:26.530\nGot anything else to throw in there Don?\n\n207\n00:09:26.530 --> 00:09:27.370\n>> That's really it.\n\n208\n00:09:27.370 --> 00:09:31.140\nYou know, like I said,\nif this is an interesting topic for you,\n\n209\n00:09:31.140 --> 00:09:33.800\nif you're already in the networking field\nand you really wanna get in there and\n\n210\n00:09:33.800 --> 00:09:36.070\nget this certification,\nthis is a great place to be.\n\n211\n00:09:36.070 --> 00:09:37.920\nEven if you're not pursuing certification,\n\n212\n00:09:37.920 --> 00:09:41.020\nif you just work with Cisco equipment,\nit's kind of nice to know all\n\n213\n00:09:41.020 --> 00:09:43.010\nthe troubleshooting skills that\nwe're gonna see in this show.\n\n214\n00:09:43.010 --> 00:09:44.530\nSo you'll definitely\nwant to stay tuned for\n\n215\n00:09:44.530 --> 00:09:47.460\nall of our episodes coming up because we\nreally do get to see some neat stuff.\n\n216\n00:09:47.460 --> 00:09:50.620\nMost vendors don't like to acknowledge\nwhen their equipment doesn't work\n\n217\n00:09:50.620 --> 00:09:51.930\nthe way it's supposed to.\n\n218\n00:09:51.930 --> 00:09:54.821\nBut here it's all about Cisco saying\nsometimes stuff doesn't work and\n\n219\n00:09:54.821 --> 00:09:58.161\nhere's how you fix it, so it's a lot of\nfun you'll definitely wanna stay tuned.\n\n220\n00:09:58.161 --> 00:10:02.265\n>> Very good, very good, so\nwe've got a lot of great topics and\n\n221\n00:10:02.265 --> 00:10:03.885\ntechnology coming up.\n\n222\n00:10:03.885 --> 00:10:08.216\nSo if CCMP's, routing and switch, TSHOOT\nis something you think you'd like and\n\n223\n00:10:08.216 --> 00:10:11.628\nwant to be a part of, stick around,\ncuz we got a lot more coming.\n\n224\n00:10:11.628 --> 00:10:13.965\n[MUSIC]\n\n225\n00:10:13.965 --> 00:10:15.788\n[SOUND]\n\n",
          "vimeoId": "145323669"
        },
        {
          "description": "In this episode Don and Wes show you how to use different utilities to troubleshoot network communications. They look at using the debug command to extract information out of a switch as well as filtering the debug command to a specific piece of information. They talk about how to use ping to test connectivity to the network and other nodes on the network. They also look at using traceroute to determine paths taken in end to end communications.",
          "length": "1750",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-1-troubleshooting_tools_pt1-102115-high.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-1-troubleshooting_tools_pt1-102115-high-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-1-troubleshooting_tools_pt1-102115-high-sm.jpg",
          "title": "IOS Troubleshooting Tools",
          "transcript": "WEBVTT\n\n1\n00:00:00.181 --> 00:00:10.181\n[MUSIC]\n\n2\n00:00:11.808 --> 00:00:15.563\nHello and welcome back to another\nexciting episode here at ITProTV.\n\n3\n00:00:15.563 --> 00:00:16.730\nI'm your host, Wes Bryan.\n\n4\n00:00:16.730 --> 00:00:20.970\nWe're gonna be talking about\nmaintaining Cisco IP based networks.\n\n5\n00:00:20.970 --> 00:00:23.640\nI'm back here with a networking guru Mr.\nDon Pezet.\n\n6\n00:00:23.640 --> 00:00:24.880\nHow are we doing today, Don?\n\n7\n00:00:24.880 --> 00:00:25.860\n>> I am doing good Wes,\n\n8\n00:00:25.860 --> 00:00:29.950\nglad to be back on the show and ready to\njump into the world of troubleshooting.\n\n9\n00:00:29.950 --> 00:00:32.890\nNow here at the beginning of the series\nit's important that we understand some\n\n10\n00:00:32.890 --> 00:00:34.950\nof the different tools that\nare available to us and\n\n11\n00:00:34.950 --> 00:00:36.310\nthat's what we're gonna look at today.\n\n12\n00:00:36.310 --> 00:00:39.930\nSome of the just basic tools that we're\ngonna see all throughout this series that\n\n13\n00:00:39.930 --> 00:00:44.160\nare really kind of important as we isolate\nwhere our problem is on our network.\n\n14\n00:00:44.160 --> 00:00:45.020\n>> Very good, very good.\n\n15\n00:00:45.020 --> 00:00:49.744\nSo, in networking here in Cisco land, I\nam sure, cuz I know I've talked to you in\n\n16\n00:00:49.744 --> 00:00:54.148\nthe background before that they are just\npacked full of different utilities.\n\n17\n00:00:54.148 --> 00:00:56.260\nSo, you can help sort that out and\n\n18\n00:00:56.260 --> 00:00:59.390\nfigure out what tools we use at\nthe appropriate times today?\n\n19\n00:00:59.390 --> 00:01:03.310\n>> Absolutely and this whole series we\ngot a lot of episodes lined up, and\n\n20\n00:01:03.310 --> 00:01:06.180\nyou guys are going to see a ton of\ndifferent tools that are out there.\n\n21\n00:01:06.180 --> 00:01:10.270\nI just wanna focus on two or three that\nwe're going to use every time, right?\n\n22\n00:01:10.270 --> 00:01:11.530\nThat we know that we're\nalways going to use, and\n\n23\n00:01:11.530 --> 00:01:15.120\nyou guys should already be familiar with\nthese tools, but I want to make sure, and\n\n24\n00:01:15.120 --> 00:01:16.950\nso that's where we're going to start.\n\n25\n00:01:16.950 --> 00:01:19.100\nIf you're already familiar with these, and\n\n26\n00:01:19.100 --> 00:01:21.590\nyou want to skip pass the episode\nyou're not going to hurt my feelings.\n\n27\n00:01:21.590 --> 00:01:23.550\nBut if you don't know these,\nwe're gonna use them a lot, so\n\n28\n00:01:23.550 --> 00:01:24.850\nyou definitely need to\nbe familiar with them.\n\n29\n00:01:24.850 --> 00:01:28.240\nAnd so I wanna start with a tool\nthat's pretty important, and\n\n30\n00:01:28.240 --> 00:01:30.440\nthat's the debug utility.\n\n31\n00:01:30.440 --> 00:01:33.180\n>> All right, now with debugging,\none of the first things I think of, Don,\n\n32\n00:01:33.180 --> 00:01:34.450\nis software development.\n\n33\n00:01:34.450 --> 00:01:37.430\nI know enough about code to spell C++.\n\n34\n00:01:37.430 --> 00:01:39.310\nAnd when they talk about debugging,\n\n35\n00:01:39.310 --> 00:01:42.210\none of the things that they talk\nabout is a lot of information.\n\n36\n00:01:42.210 --> 00:01:43.802\nIs that where we're going here,\na lot of output?\n\n37\n00:01:43.802 --> 00:01:47.467\n>> Absolutely, you know, if you connect\ninto a Cisco router, or a Cisco switch,\n\n38\n00:01:47.467 --> 00:01:51.151\nand you do a show log you see the logging\ninformation that's in the background.\n\n39\n00:01:51.151 --> 00:01:54.186\nAnd it's not really a ton of data, but\nthere's good data there you can use for\n\n40\n00:01:54.186 --> 00:01:55.490\ntroubleshooting.\n\n41\n00:01:55.490 --> 00:02:00.030\nBut there's a lot more that happens behind\nthe scenes that we don't even notice.\n\n42\n00:02:00.030 --> 00:02:02.520\nRight, they're just kind of invisible\nto us because the router, or\n\n43\n00:02:02.520 --> 00:02:03.540\nthe switch hides it.\n\n44\n00:02:03.540 --> 00:02:06.720\nSo if we need to see that\ninformation to help troubleshoot,\n\n45\n00:02:06.720 --> 00:02:10.640\nwe've gotta turn that on to be able\nto see it and debug let's us do it.\n\n46\n00:02:10.640 --> 00:02:14.160\nNow most of you guys have probably\nused debugging for other things or\n\n47\n00:02:14.160 --> 00:02:19.180\ndefinitely used it in the other shows\nas we debug things like PPP and\n\n48\n00:02:19.180 --> 00:02:21.440\nother network connectivity issues.\n\n49\n00:02:21.440 --> 00:02:22.940\nSo it's pretty handy.\n\n50\n00:02:22.940 --> 00:02:25.330\nWhat I want to show you is a few\nadvanced things that you may or\n\n51\n00:02:25.330 --> 00:02:27.410\nmay not know about debug so.\n\n52\n00:02:27.410 --> 00:02:29.330\nI've got a switch pulled up here and\n\n53\n00:02:29.330 --> 00:02:31.830\nI just wanna show you guys\na couple of neat things here.\n\n54\n00:02:31.830 --> 00:02:34.280\nFirst off,\nlet's just talk about debug itself.\n\n55\n00:02:34.280 --> 00:02:37.900\nI'm SSHed into this switch,\nso I have a remote shell.\n\n56\n00:02:37.900 --> 00:02:39.250\nAnd with a remote shell,\n\n57\n00:02:39.250 --> 00:02:43.410\nit will not show you debug\ninformation by default, all right?\n\n58\n00:02:43.410 --> 00:02:47.160\nI'm not gonna see what's going on on\nthe network or any information, but\n\n59\n00:02:47.160 --> 00:02:48.120\nit is actually happening.\n\n60\n00:02:48.120 --> 00:02:51.360\nCisco wants to make sure that\nyou plug in to the console port\n\n61\n00:02:51.360 --> 00:02:55.320\nof a switch when you debug it, and\nnot remote into it like I'm doing here.\n\n62\n00:02:55.320 --> 00:02:58.510\nBecause you can get so much information,\n\n63\n00:02:58.510 --> 00:03:03.300\nthat it overwhelms your session, and\nyou lock yourself out of the device.\n\n64\n00:03:03.300 --> 00:03:08.100\nSo for example,\na great one is debug ip packets, or\n\n65\n00:03:08.100 --> 00:03:10.420\neven better, debug ip packets detail.\n\n66\n00:03:10.420 --> 00:03:11.330\nIf you run this command,\n\n67\n00:03:11.330 --> 00:03:15.330\nif I were to run this right now and I were\nmonitoring that information on my switch,\n\n68\n00:03:15.330 --> 00:03:18.080\nI would get overwhelmed and\nlocked out of the switch, all right?\n\n69\n00:03:18.080 --> 00:03:19.790\nWell I say that.\n\n70\n00:03:19.790 --> 00:03:20.820\nIt's actually not gonna happen though,\n\n71\n00:03:20.820 --> 00:03:25.160\nbecause the debugs are not going\nto be displayed by default.\n\n72\n00:03:25.160 --> 00:03:28.640\nSo if I run something\nlike debug ip routing,\n\n73\n00:03:28.640 --> 00:03:32.380\nthat's gonna show me any changes\nto my routing table, all right.\n\n74\n00:03:32.380 --> 00:03:33.110\nSo if I go and\n\n75\n00:03:33.110 --> 00:03:36.430\nstart making changes at the routing\ntable I should see debug information.\n\n76\n00:03:36.430 --> 00:03:40.080\nBut I'm not gonna see that\nunless I run terminal monitor.\n\n77\n00:03:40.080 --> 00:03:44.400\nSo when you're remotely connected into\na switch or a router if you wanna see\n\n78\n00:03:44.400 --> 00:03:47.880\nthe debug output you've gotta run\nterminal monitor to be able to see it.\n\n79\n00:03:47.880 --> 00:03:53.350\nIf you want to turn that back off\nagain it's terminal no monitor.\n\n80\n00:03:53.350 --> 00:03:56.120\nThe no command we normally put at\nthe begging, not this time, right.\n\n81\n00:03:56.120 --> 00:03:59.989\nTerminal no monitor, and that will make it\nwhere I don't see those messages anymore,\n\n82\n00:03:59.989 --> 00:04:03.010\nbut now that I'm de-bugging IP\nrouting if I start making changes to\n\n83\n00:04:03.010 --> 00:04:05.451\nthe routing table I'll get\nthose messages popped up.\n\n84\n00:04:05.451 --> 00:04:08.452\nAnd I can do a show debug to\nshow the debugging that I've got\n\n85\n00:04:08.452 --> 00:04:11.221\nturned on because I might\nturn on more than one thing.\n\n86\n00:04:11.221 --> 00:04:16.839\nI might say debug ip rip or debug ip\nospf events or something like that,\n\n87\n00:04:16.839 --> 00:04:23.320\nand if I do a show debug I can see all\nthe different things that I've turned on.\n\n88\n00:04:23.320 --> 00:04:26.451\nNow the key thing about these\ndebugs is that if I leave them on,\n\n89\n00:04:26.451 --> 00:04:29.601\nthey keep generating messages,\nand they can fill up my logs.\n\n90\n00:04:29.601 --> 00:04:32.763\nIt could just be a bunch of wasted\nresources on the switch, so\n\n91\n00:04:32.763 --> 00:04:36.220\nwhenever you're done debugging,\nyou gotta turn it off.\n\n92\n00:04:36.220 --> 00:04:40.970\nAnd the easiest way to do that is to type,\nundebug all, or no debug all,\n\n93\n00:04:40.970 --> 00:04:42.480\neither way, they do the same thing.\n\n94\n00:04:42.480 --> 00:04:45.160\nAnd that'll turn all the debugging off,\nand\n\n95\n00:04:45.160 --> 00:04:47.370\nnow we're in the clear and that's that.\n\n96\n00:04:47.370 --> 00:04:49.240\n>> All right now with the information,\n\n97\n00:04:49.240 --> 00:04:51.280\nyou said that it could\nbe a lot of information.\n\n98\n00:04:51.280 --> 00:04:55.970\nIs there any way that maybe we can\ntarget down to more specifics?\n\n99\n00:04:55.970 --> 00:04:58.580\nMaybe a specific piece of\ninformation that we wanna get to?\n\n100\n00:04:58.580 --> 00:04:59.740\n>> Yeah, absolutely right.\n\n101\n00:04:59.740 --> 00:05:02.410\nAnd that's important especially\nif you're doing what I'm doing.\n\n102\n00:05:02.410 --> 00:05:04.260\nI'm remotely monitoring this switch.\n\n103\n00:05:04.260 --> 00:05:07.710\nSo, if I start turning on\ndebugging I could get overwhelmed.\n\n104\n00:05:07.710 --> 00:05:10.580\nWell, wouldn't it be nice if we\ncould filter down the debug output.\n\n105\n00:05:10.580 --> 00:05:15.610\nSo, for example, I said debut ip packets,\nright, or debug ip packets detail, right?\n\n106\n00:05:15.610 --> 00:05:19.310\nIf I just do debug ip packets it\ngives me a single line entry for\n\n107\n00:05:19.310 --> 00:05:21.200\neach packet that's passing\nover an interface.\n\n108\n00:05:21.200 --> 00:05:24.370\nIf I do detail, it actually shows me\nmore information about the payload, too.\n\n109\n00:05:24.370 --> 00:05:26.363\nSo it can be really verbose.\n\n110\n00:05:26.363 --> 00:05:29.850\nIf I run that, it's going to\nshow me all the IP packets for\n\n111\n00:05:29.850 --> 00:05:31.590\nthe whole stinking switch.\n\n112\n00:05:31.590 --> 00:05:33.585\nIt's a lot of information, right?\n\n113\n00:05:33.585 --> 00:05:38.065\nRight, but I can filter that down by using\nwhat's called conditional debugging.\n\n114\n00:05:38.065 --> 00:05:42.875\nConditional debugging is where we apply\na filter to our debug, and one of\n\n115\n00:05:42.875 --> 00:05:46.675\nthe best types of conditional debugging\nwe can do is interface filtering.\n\n116\n00:05:46.675 --> 00:05:51.571\nI can say debug interface fa3/11.\n\n117\n00:05:51.571 --> 00:05:52.920\nThat's the port that I'm plugged into.\n\n118\n00:05:52.920 --> 00:05:56.740\nNow if I run that,\nsee what it said, condition 1 set.\n\n119\n00:05:57.810 --> 00:05:59.110\nWhat does that mean?\n\n120\n00:05:59.110 --> 00:06:00.900\nWell, if I do a show debug,\n\n121\n00:06:00.900 --> 00:06:05.020\ndebug interface fa3/11\ndoesn't actually do anything.\n\n122\n00:06:05.020 --> 00:06:06.380\nIt puts a filter in.\n\n123\n00:06:06.380 --> 00:06:11.072\nAnd, it says, all right, from now on,\nif I do debugging and give you feedback,\n\n124\n00:06:11.072 --> 00:06:15.912\nI'm only gonna show you feedback\ngenerated by interface fa3/11, all right?\n\n125\n00:06:15.912 --> 00:06:18.440\nNow, I'm getting some log\nmessages popped up here.\n\n126\n00:06:18.440 --> 00:06:20.920\nThese aren't from the debug, all right?\n\n127\n00:06:20.920 --> 00:06:23.420\nThese are line protocol,\nup down messages, and\n\n128\n00:06:23.420 --> 00:06:27.750\nI wouldn't normally see these, except\nI've got terminal monitor turned on.\n\n129\n00:06:27.750 --> 00:06:31.280\nAnd, this just means somebody\nprobably rebooted their computer,\n\n130\n00:06:31.280 --> 00:06:32.760\nunplugged the cable and\nplugged it back in.\n\n131\n00:06:32.760 --> 00:06:34.760\nSo I'm seeing that message pop up.\n\n132\n00:06:34.760 --> 00:06:40.060\nBut I know it's not a debug because if I\nlook at the source, %LINEPROTO-5, right?\n\n133\n00:06:40.060 --> 00:06:42.550\nDebugs will actually say they\nare coming from a debug.\n\n134\n00:06:42.550 --> 00:06:48.160\nSo, for example,\nif I do debug ip packets detail,\n\n135\n00:06:48.160 --> 00:06:54.740\nright, now, oops,\nip packet detail, there we go.\n\n136\n00:06:54.740 --> 00:06:57.470\nNow I'm starting to get\ndetailed information and\n\n137\n00:06:57.470 --> 00:06:59.410\nall this data is coming across my screen.\n\n138\n00:06:59.410 --> 00:07:01.670\nI'm getting a lot of information.\n\n139\n00:07:01.670 --> 00:07:03.910\nThese are the debugs I just generated.\n\n140\n00:07:03.910 --> 00:07:09.310\nI'm getting a lot of information, but\nits all coming from interface fa3/11, I've\n\n141\n00:07:09.310 --> 00:07:14.620\nfiltered it down to only get what I want,\nbut even here I'm getting a lot of data.\n\n142\n00:07:14.620 --> 00:07:16.340\nThis is the port that I'm on.\n\n143\n00:07:16.340 --> 00:07:20.880\nIf I were to fire up a web browser and\ngo to a website like Google, for\n\n144\n00:07:20.880 --> 00:07:25.450\nexample, well in here some of this\nis going to be my web traffic\n\n145\n00:07:25.450 --> 00:07:27.340\nas a browsed out to that server.\n\n146\n00:07:27.340 --> 00:07:31.340\nI see a lot of stuff on port 22,\nbecause I'm SSHed into the switch.\n\n147\n00:07:31.340 --> 00:07:32.860\nI expect to see that, right?\n\n148\n00:07:32.860 --> 00:07:37.290\nBut it's more information than I\nnecessarily care to see, all right?\n\n149\n00:07:37.290 --> 00:07:42.670\nSo what I can do, is I can come in, and\nI can start to filter this even more.\n\n150\n00:07:42.670 --> 00:07:46.210\nI'm going to do a quick undebug all\nbecause I'm just getting too much\n\n151\n00:07:46.210 --> 00:07:46.990\ninformation there.\n\n152\n00:07:46.990 --> 00:07:47.560\nAll right.\n\n153\n00:07:47.560 --> 00:07:50.200\nAnd notice how I got debugs\nafter I ran the command?\n\n154\n00:07:50.200 --> 00:07:51.320\nThat's the back log.\n\n155\n00:07:51.320 --> 00:07:54.030\nMy session was getting so\nmuch data I was actually backlogged.\n\n156\n00:07:54.030 --> 00:07:56.890\nSo we have to wait for that to finish and\nnow it is caught up, all right.\n\n157\n00:07:56.890 --> 00:07:59.185\nSo I can filter it even more.\n\n158\n00:07:59.185 --> 00:08:04.042\nWhen you do a debug, you can apply an\naccess control list to filter that down so\n\n159\n00:08:04.042 --> 00:08:06.081\nyou get even less information.\n\n160\n00:08:06.081 --> 00:08:08.845\nAnd that's really helpful\nto control the flow.\n\n161\n00:08:08.845 --> 00:08:11.120\nWe don't wanna get overwhelmed\nwith all this stuff.\n\n162\n00:08:11.120 --> 00:08:14.760\nSo, for example,\nI can create a quick access list.\n\n163\n00:08:14.760 --> 00:08:17.980\nI could say access-list, I'll do 135.\n\n164\n00:08:17.980 --> 00:08:21.380\nI'm just picking a number out of my hat,\nhere.\n\n165\n00:08:21.380 --> 00:08:26.590\nAnd I'm gonna limit this to\nMaybe I'll do tcp traffic\n\n166\n00:08:27.760 --> 00:08:31.520\nand I'll do the source,\nwhich will be me, 10.1.230.21.\n\n167\n00:08:31.520 --> 00:08:34.320\nAnd the destination will\nbe we'll say anybody.\n\n168\n00:08:34.320 --> 00:08:38.940\nAnd should probably just leave it at that,\nright?\n\n169\n00:08:38.940 --> 00:08:42.240\nActually, here I'll say I'm\ngoing to somebody using.\n\n170\n00:08:42.240 --> 00:08:45.010\nPort 23 or port 80 or\nsomething like that, right?\n\n171\n00:08:45.010 --> 00:08:45.520\nSo.\n\n172\n00:08:45.520 --> 00:08:46.340\nWhoops.\n\n173\n00:08:46.340 --> 00:08:47.330\nShoot.\n\n174\n00:08:47.330 --> 00:08:52.650\nI should have done, let's see,\naccess-list 135 permit tcp.\n\n175\n00:08:52.650 --> 00:08:55.670\nThere, I had to remember my syntax.\n\n176\n00:08:55.670 --> 00:08:57.280\nI did some basic\ntroubleshooting right there.\n\n177\n00:08:57.280 --> 00:08:59.370\nSo, I'll put that in place.\n\n178\n00:08:59.370 --> 00:09:02.170\nAnd maybe I wanna add to that and\ndo port 80 also, right?\n\n179\n00:09:02.170 --> 00:09:04.660\nSo web traffic and telnet.\n\n180\n00:09:04.660 --> 00:09:07.440\nI don't want All that Port 22.\n\n181\n00:09:07.440 --> 00:09:10.660\nAll that SSH because I know I'm SSH'd in,\nright?\n\n182\n00:09:10.660 --> 00:09:15.480\nOr I could have written this\naxis list a little different and\n\n183\n00:09:15.480 --> 00:09:19.260\nsaid axis list 135 deny tcp any any eq 22,\nright?\n\n184\n00:09:19.260 --> 00:09:24.200\nI don't want to get traffic that\nis a destination port of 22.\n\n185\n00:09:24.200 --> 00:09:26.130\nI don't want to get the siege traffic.\n\n186\n00:09:26.130 --> 00:09:29.070\nNow, it can apply both ways, too.\n\n187\n00:09:29.070 --> 00:09:32.810\nSo, I might need to add an extra\nline just to get the other one.\n\n188\n00:09:32.810 --> 00:09:34.590\nSo, I'm gonna deny those.\n\n189\n00:09:34.590 --> 00:09:37.380\nAnd I'll permit everything else.\n\n190\n00:09:37.380 --> 00:09:39.920\nSo, I'll just add in\nquick line to do that.\n\n191\n00:09:39.920 --> 00:09:41.950\nAll right.\nSo, here's a filter that's gonna block out\n\n192\n00:09:41.950 --> 00:09:46.000\nSSH traffic coming and going, and\nit's gonna allow everything else.\n\n193\n00:09:46.000 --> 00:09:52.020\nAnd so when I do that debug,\nI could say, debug ip packet And then.\n\n194\n00:09:52.020 --> 00:09:55.230\nI keep putting that S on there.\n\n195\n00:09:55.230 --> 00:09:56.130\nOh shoot.\n\n196\n00:09:56.130 --> 00:09:56.752\nI'm in config.\n\n197\n00:09:56.752 --> 00:10:01.900\nDebug don't work so well from inside of\nconfig, but if I do a debug IP packet.\n\n198\n00:10:01.900 --> 00:10:03.020\nThere we go.\n\n199\n00:10:03.020 --> 00:10:06.580\nNotice how I can say like\ndetail that I did earlier, and\n\n200\n00:10:06.580 --> 00:10:11.130\nI can also specify and access this to\ncontrol exactly what it is I'm debugging.\n\n201\n00:10:11.130 --> 00:10:16.720\nSo, I can say debug ip packet 130,\nwhat was the first one I did?\n\n202\n00:10:16.720 --> 00:10:18.850\n134?\nOh you know what?\n\n203\n00:10:18.850 --> 00:10:21.320\nActually I stacked all that into 135.\n\n204\n00:10:21.320 --> 00:10:22.280\nDidn't I.\nWell, that's fine.\n\n205\n00:10:22.280 --> 00:10:25.060\nI can do 135 and\nnow it's going to debug those packets,\n\n206\n00:10:25.060 --> 00:10:29.050\nbut only give me the stuff\nthat's coming up in that list.\n\n207\n00:10:29.050 --> 00:10:31.920\nI did stick that permit IP any at the end,\nso if I were to turn this on,\n\n208\n00:10:31.920 --> 00:10:36.900\nI'd get myself back in trouble Unless I\nlimit it to an interface first, right?\n\n209\n00:10:36.900 --> 00:10:40.210\nWell, remember that conditional\nformatting that I did?\n\n210\n00:10:40.210 --> 00:10:41.950\nI didn't un debug all.\n\n211\n00:10:41.950 --> 00:10:46.980\nIf I do a show debug, conditional\nformatting survives the un debug all.\n\n212\n00:10:46.980 --> 00:10:50.170\nSo, if I do a debug IP packets and\n\n213\n00:10:50.170 --> 00:10:54.980\nthen I specify that access list, right?\n\n214\n00:10:56.800 --> 00:11:01.760\nIt's going to try and debug everything,\nbut the conditional form,\n\n215\n00:11:01.760 --> 00:11:04.240\nthe conditional filtering\nis still in place and\n\n216\n00:11:04.240 --> 00:11:07.320\nthat's going to bring this down\nto a much more manageable level.\n\n217\n00:11:07.320 --> 00:11:10.753\nAnd so now we can start to debut it and\nsee how it's on detailed for\n\n218\n00:11:10.753 --> 00:11:15.470\naccess 135, and there it goes and\nI seen some traffic happening here.\n\n219\n00:11:15.470 --> 00:11:16.430\nTraffic on fort 123.\n\n220\n00:11:16.430 --> 00:11:18.152\nWest, you remember 123?\n\n221\n00:11:18.152 --> 00:11:19.350\n>> 123, no I don't.\n\n222\n00:11:19.350 --> 00:11:20.365\nNot off the top of my head.\n\n223\n00:11:20.365 --> 00:11:22.520\n[LAUGH]\n>> Well, network time is what we call it.\n\n224\n00:11:22.520 --> 00:11:24.130\n>> Oh, 123 okay.\n>> So,\n\n225\n00:11:24.130 --> 00:11:26.150\nI'm apparent updated my clock,\nor something.\n\n226\n00:11:26.150 --> 00:11:28.840\nWho knows, but if I try and browse to.\n\n227\n00:11:28.840 --> 00:11:32.230\nI wonder if that switch has\na web interface turned on.\n\n228\n00:11:32.230 --> 00:11:35.430\nOh, it doesn't but\nI can see that web traffic there, right?\n\n229\n00:11:35.430 --> 00:11:36.360\nSo.\n\n230\n00:11:36.360 --> 00:11:39.730\nDebugging, it's really\nimportant to use filters if\n\n231\n00:11:39.730 --> 00:11:43.490\nyou can to minimize that\nfire hose of traffic.\n\n232\n00:11:43.490 --> 00:11:45.660\nBut also keep in mind when you're done,\n\n233\n00:11:45.660 --> 00:11:51.400\nmake sure you do that undebug all to\nturn it off and if you put conditional\n\n234\n00:11:51.400 --> 00:11:55.665\ndebugs in place, make sure that you\nremove them when you're done too.\n\n235\n00:11:55.665 --> 00:11:59.780\nSo,I'm just gonna do a no to get\nrid of that and I'll remove it.\n\n236\n00:11:59.780 --> 00:12:03.500\nAnd so now when it's done I can do a show\ndebug, and I should get it empty, and\n\n237\n00:12:03.500 --> 00:12:04.990\nit's all turned off.\n\n238\n00:12:04.990 --> 00:12:07.690\n>> Very good, so\nwe can get a lot of information,\n\n239\n00:12:07.690 --> 00:12:10.580\njust verbose amount of information.\n\n240\n00:12:10.580 --> 00:12:12.880\nWe can filter it down,\nmake it a little bit easier.\n\n241\n00:12:12.880 --> 00:12:17.270\nNow, Don, once we've done our debugging,\nwe've got all this information.\n\n242\n00:12:17.270 --> 00:12:20.970\nWe've determined what portion of the\ninformation we're actually supposed to be\n\n243\n00:12:20.970 --> 00:12:21.916\nlooking at.\n\n244\n00:12:21.916 --> 00:12:25.500\nNow, we've got to start using some\nutilities to make not only some sense out\n\n245\n00:12:25.500 --> 00:12:26.430\nof the information, but\n\n246\n00:12:26.430 --> 00:12:29.830\nto use that information to start\nalong the troubleshooting, right?\n\n247\n00:12:29.830 --> 00:12:30.720\n>> Yeah, absolutely.\n\n248\n00:12:30.720 --> 00:12:34.650\nAnd debug we use a lot, but sometimes\nwe don't need all that information.\n\n249\n00:12:34.650 --> 00:12:36.500\nSo, I don't normally start with debug.\n\n250\n00:12:36.500 --> 00:12:39.730\nI usually end up with debug when\nI can't figure something out.\n\n251\n00:12:39.730 --> 00:12:42.670\nSo, as I'm trying to troubleshoot\na problem, one of the first steps that\n\n252\n00:12:42.670 --> 00:12:46.620\nI usually go through is Trying to\nfigure out the extent of the problem.\n\n253\n00:12:46.620 --> 00:12:47.640\nHow far out is the problem.\n\n254\n00:12:47.640 --> 00:12:49.280\nAnd I do something called\nmeasuring reachability.\n\n255\n00:12:49.280 --> 00:12:51.550\nSo, if I have a computer that\ncan't get on the network,\n\n256\n00:12:51.550 --> 00:12:53.630\nI need to figure out where it's dying,\nright.\n\n257\n00:12:53.630 --> 00:12:57.760\nIs it dying when it hits its switch,\nis it dying when it hits its gateway,\n\n258\n00:12:57.760 --> 00:12:59.290\nis it dying when it hits\nan external network?\n\n259\n00:12:59.290 --> 00:13:01.500\nWhere is it in that path that it dies out?\n\n260\n00:13:01.500 --> 00:13:04.080\nAnd Ping is kinda our go to utility for\nthat.\n\n261\n00:13:04.080 --> 00:13:07.450\nNow, Ping on a Cisco switch or\nrouter is pretty straight forward, right?\n\n262\n00:13:07.450 --> 00:13:09.260\nYou just run Ping and punch in an IP.\n\n263\n00:13:09.260 --> 00:13:11.910\nSo, I might Ping 10.1.230.5, right?\n\n264\n00:13:11.910 --> 00:13:16.890\nI wanna Ping that IP and\nthere it goes, right?\n\n265\n00:13:16.890 --> 00:13:18.280\nPretty cut and dry.\n\n266\n00:13:18.280 --> 00:13:20.740\n>> Very good.\nNow, I've used Ping before and\n\n267\n00:13:20.740 --> 00:13:24.090\nI know that the protocol that I've\nused when I'm using Ping, is ICMP.\n\n268\n00:13:24.090 --> 00:13:27.840\nNow, can you go a little bit further\nwith the ping inside of the switch here?\n\n269\n00:13:27.840 --> 00:13:31.900\nI mean, can we get a little bit more\ndetailed on what exactly we're using and\n\n270\n00:13:31.900 --> 00:13:33.920\nsome of the parameters we set behind ping?\n\n271\n00:13:33.920 --> 00:13:34.640\n>> Yeah.\nThere's\n\n272\n00:13:34.640 --> 00:13:36.340\na ton of stuff that you can do with ping.\n\n273\n00:13:36.340 --> 00:13:39.040\nI'm doing a ping here,\njust a straight up regular ping.\n\n274\n00:13:39.040 --> 00:13:40.700\nThis works for IPv6 also.\n\n275\n00:13:40.700 --> 00:13:43.200\nYou can say ping and\nspecify an IPv6 address and\n\n276\n00:13:43.200 --> 00:13:46.580\nit'll hit that just fine too But\nit's just doing a normal ping.\n\n277\n00:13:46.580 --> 00:13:47.780\nSometimes we want to change that.\n\n278\n00:13:47.780 --> 00:13:49.360\nEspecially on routers.\n\n279\n00:13:49.360 --> 00:13:52.170\nBecause sometimes a ping might\nwork from one network and\n\n280\n00:13:52.170 --> 00:13:53.900\nnot work from another network.\n\n281\n00:13:53.900 --> 00:13:58.930\nAnd so one of the things that I will often\ntimes add, is on ping if you do a question\n\n282\n00:13:58.930 --> 00:14:03.540\nmark after the IP, you'll see where you\ncan add source, I do source all the time.\n\n283\n00:14:03.540 --> 00:14:06.600\nI might want to source traffic\nFrom a particular interface.\n\n284\n00:14:06.600 --> 00:14:11.040\nSo, for example, let's say I have\na loopback interface, right?\n\n285\n00:14:11.040 --> 00:14:13.650\nSo, I whip up a loopback interface.\n\n286\n00:14:13.650 --> 00:14:15.110\nActually, hang on.\n\n287\n00:14:15.110 --> 00:14:17.880\nI don't already have\nthat interface in place.\n\n288\n00:14:17.880 --> 00:14:18.820\nAll right.\n\n289\n00:14:18.820 --> 00:14:23.005\nAnd I might give it an IP address\nthat's in some crazy network And so\n\n290\n00:14:23.005 --> 00:14:25.635\nI'll just kind of bring this one online.\n\n291\n00:14:27.481 --> 00:14:28.133\nAnd it should be up.\n\n292\n00:14:28.133 --> 00:14:28.980\nThere we go.\nAll right.\n\n293\n00:14:28.980 --> 00:14:31.110\nSo, I've got this network.\n\n294\n00:14:31.110 --> 00:14:34.550\nAnd if I ping to another IP.\n\n295\n00:14:34.550 --> 00:14:39.950\nSo, if I do ping to 10.1.230.5 well,\nmy switch is 10.1.230.2.\n\n296\n00:14:39.950 --> 00:14:42.170\nBut I'm the same network.\n\n297\n00:14:42.170 --> 00:14:42.890\nI don't need a router.\n\n298\n00:14:42.890 --> 00:14:44.110\nI should be able to ping that.\n\n299\n00:14:44.110 --> 00:14:44.870\nRight?\n\n300\n00:14:44.870 --> 00:14:50.260\nBut if I add source lo0, now the source\nof my ping is gonna be 10 dot.\n\n301\n00:14:50.260 --> 00:14:54.610\nNo, it's actually gonna be 172 dot,\n16 dot, five dot, one.\n\n302\n00:14:54.610 --> 00:14:58.600\nAnd when I source it from that,\nI can't get there.\n\n303\n00:14:58.600 --> 00:15:00.480\nAnd that's because I'm sourced\nfrom a different network.\n\n304\n00:15:00.480 --> 00:15:02.430\nI've got to go through\na router to get there.\n\n305\n00:15:02.430 --> 00:15:06.600\nAnd this switch is not doing any\nlayer three switching or routing, so\n\n306\n00:15:06.600 --> 00:15:08.820\nit's just not gonna get there.\n\n307\n00:15:08.820 --> 00:15:12.700\nSo, by changing the source, and\nI did the source based on an interface.\n\n308\n00:15:12.700 --> 00:15:16.010\nYou can do the source based on IP also,\nso you'll see,\n\n309\n00:15:16.010 --> 00:15:18.940\nwe've got a few different options\nof how you wanna enter that in.\n\n310\n00:15:18.940 --> 00:15:20.290\nBut you can specify it.\n\n311\n00:15:20.290 --> 00:15:24.240\nAnd now it's gonna reach out that way on a\nrouter that's really useful modification.\n\n312\n00:15:24.240 --> 00:15:27.720\nBut you'll see there's a lot of other\nthings that you can modify, too.\n\n313\n00:15:27.720 --> 00:15:29.480\nFor example, the data pattern.\n\n314\n00:15:29.480 --> 00:15:32.380\nBy default your ping will carry\na certain amount of payload,\n\n315\n00:15:32.380 --> 00:15:33.780\na certain amount of bits of data.\n\n316\n00:15:33.780 --> 00:15:36.830\nAnd all it's doing is taking\nthe alphabet and repeating it.\n\n317\n00:15:36.830 --> 00:15:38.120\nA through Z, A through Z.\n\n318\n00:15:38.120 --> 00:15:39.300\nIf you ever run a packet sniffer and\n\n319\n00:15:39.300 --> 00:15:40.920\nintercept these that's\nwhat's in these pings,\n\n320\n00:15:40.920 --> 00:15:42.630\njust the alphabet over and over again.\n\n321\n00:15:42.630 --> 00:15:46.033\nYou can manipulate the data pattern so\nit's not A through Z or\n\n322\n00:15:46.033 --> 00:15:50.305\nyou can manipulate the size which is how\nmany times it repeats the alphabet so\n\n323\n00:15:50.305 --> 00:15:53.330\nthat it fills up and\ncreate a packet of a certain size.\n\n324\n00:15:53.330 --> 00:15:56.547\nI've trouble shot some broadband\nconnections, cable and\n\n325\n00:15:56.547 --> 00:15:59.635\nDSL where pings of one size\nwould get through just fine and\n\n326\n00:15:59.635 --> 00:16:03.188\nthen when you increase their payload,\nthe would start failing.\n\n327\n00:16:03.188 --> 00:16:07.085\nSo, I would call up the support\npeople at the ISP and say man,\n\n328\n00:16:07.085 --> 00:16:08.700\nthis connection is bad.\n\n329\n00:16:08.700 --> 00:16:10.396\nAnd they say, oh,\nI'm pinging over it just fine.\n\n330\n00:16:10.396 --> 00:16:12.790\nAnd I would say, well,\nactually send some payload.\n\n331\n00:16:12.790 --> 00:16:14.600\nAnd they would say, oh,\nI am sending payload.\n\n332\n00:16:14.600 --> 00:16:19.008\nAnd I would say, all right, do this, make\nyour ping contain at least 500 bytes of\n\n333\n00:16:19.008 --> 00:16:21.447\ndata, or bump it up to 1000 bytes of data.\n\n334\n00:16:21.447 --> 00:16:22.909\nYou got a standard MTU, right?\n\n335\n00:16:22.909 --> 00:16:23.443\n>> Mm-hm.\n\n336\n00:16:23.443 --> 00:16:26.620\n>> And once they put payload in it,\nalso the ping started failing, and\n\n337\n00:16:26.620 --> 00:16:29.260\nthey're like, oh,\nturns out our network is garbage.\n\n338\n00:16:29.260 --> 00:16:32.730\n>> So it was hid the MTU and then it\nwas just dropping it so it's not going?\n\n339\n00:16:32.730 --> 00:16:33.900\n>> No it wasn't even hitting the MTU,\n\n340\n00:16:33.900 --> 00:16:36.320\nit's just that that particular\nsystem was overloaded.\n\n341\n00:16:36.320 --> 00:16:38.450\n>> Okay.\n>> And so it was between the various\n\n342\n00:16:38.450 --> 00:16:40.520\ncustomers and\nit didn't have enough to handle it.\n\n343\n00:16:40.520 --> 00:16:41.190\n>> Interesting.\n\n344\n00:16:41.190 --> 00:16:44.050\n>> Those are the things we can\nsee by manipulating that size.\n\n345\n00:16:44.050 --> 00:16:46.380\nYou can manipulate that time out also.\n\n346\n00:16:46.380 --> 00:16:50.580\nThat's kind of useful because the time out\non a Cisco device is really, really short.\n\n347\n00:16:50.580 --> 00:16:54.150\nOn a Windows machine or\non a Mac, you do a ping and\n\n348\n00:16:54.150 --> 00:16:57.550\nit'll give the other system five,\nten seconds to respond, sometimes longer.\n\n349\n00:16:57.550 --> 00:17:01.000\nOn a Cisco switch, it's like one second,\n\n350\n00:17:01.000 --> 00:17:04.380\nmaybe two on an old device, so\nit doesn't give it a ton of time, and\n\n351\n00:17:04.380 --> 00:17:07.480\nyou might want to manipulate that time\nout to speed that up a little more.\n\n352\n00:17:07.480 --> 00:17:09.180\nSo, these are all different options.\n\n353\n00:17:09.180 --> 00:17:10.700\nYou can do them right here in line, or\n\n354\n00:17:10.700 --> 00:17:14.040\nif you forget them,\nyou can just type ping and press Enter.\n\n355\n00:17:14.040 --> 00:17:16.150\nAnd then it will walk you through\nthe different options, right?\n\n356\n00:17:16.150 --> 00:17:19.256\nYou can choose your protocol\nwhich is normally IP on the exam.\n\n357\n00:17:19.256 --> 00:17:20.115\nIt will always be IP.\n\n358\n00:17:20.115 --> 00:17:24.930\nYou can specify the person you wanna\nping and then the repeat count, right?\n\n359\n00:17:24.930 --> 00:17:28.910\nHow many I want to do, maybe I want to\ndo ten pings instead of the normal five.\n\n360\n00:17:28.910 --> 00:17:32.984\nThe datagram size,\nI want this to be 300 instead of 200.\n\n361\n00:17:32.984 --> 00:17:36.260\nAnd we kinda keep going through and\nspecifying these options.\n\n362\n00:17:36.260 --> 00:17:38.900\n>> Now you mentioned IP, and\na lot of times it's gonna be IP.\n\n363\n00:17:38.900 --> 00:17:41.435\nDo we have parameters in there\nthat maybe we could use, and\n\n364\n00:17:41.435 --> 00:17:43.364\ntest other routable protocols [CROSSTALK].\n\n365\n00:17:43.364 --> 00:17:45.117\n>> Yeah, any routable protocols.\n\n366\n00:17:45.117 --> 00:17:48.630\nSo you can do IPX, you can do,\nwhat are the other ones that are?\n\n367\n00:17:48.630 --> 00:17:50.330\nWell, it depends on your feature set.\n\n368\n00:17:50.330 --> 00:17:51.250\nNot every switch has them.\n\n369\n00:17:51.250 --> 00:17:52.390\nBut a lot of them have IPX.\n\n370\n00:17:52.390 --> 00:17:55.110\nYou can do IPv6, so\nyou could specify those.\n\n371\n00:17:55.110 --> 00:17:57.038\nOn the exam,\nthey just focus on IP and IPv6.\n\n372\n00:17:57.038 --> 00:17:57.676\n>> Very good.\n\n373\n00:17:57.676 --> 00:18:00.120\n>> Now notice I get\nthese extended commands.\n\n374\n00:18:00.120 --> 00:18:02.050\nIf I say no,\nit will just send this ping out here.\n\n375\n00:18:02.050 --> 00:18:05.100\nBut if I say yes, there's even\nmore options like the source so\n\n376\n00:18:05.100 --> 00:18:09.610\nI can specify that and\non the source it's kind of annoying.\n\n377\n00:18:09.610 --> 00:18:13.770\nIt makes you actually type out the full\nthing so if I need to do a loop back I\n\n378\n00:18:13.770 --> 00:18:17.340\ngotta type it out, loopback 0,\nit's annoying but that takes care of it.\n\n379\n00:18:17.340 --> 00:18:21.270\nI can set a TOS value,\nif I'm trying to test quality of service,\n\n380\n00:18:21.270 --> 00:18:25.680\nI might have one TOS set for voice\ntraffic and different TOS set for data.\n\n381\n00:18:25.680 --> 00:18:28.130\nAnd so\nI can manipulate the TOS right here.\n\n382\n00:18:28.130 --> 00:18:32.590\nI can set my DF, my DiffServ Code Point\nagain for quality of service.\n\n383\n00:18:32.590 --> 00:18:34.930\nWe can validate reply data.\n\n384\n00:18:34.930 --> 00:18:38.280\nIs the reply data actually coming from\nthe same path that we sent to, right?\n\n385\n00:18:38.280 --> 00:18:40.950\nAm I getting it from the same destination?\n\n386\n00:18:40.950 --> 00:18:45.289\nAnd the pattern, see how the pattern\nshows that alphabet, right, 0xABCD?\n\n387\n00:18:45.289 --> 00:18:47.960\nIt's just gonna repeat that over and\nover again.\n\n388\n00:18:47.960 --> 00:18:52.530\nAnd then how I want my data to be sent,\nstrict, record, time stamp.\n\n389\n00:18:52.530 --> 00:18:54.350\nThis is the data it's giving us back.\n\n390\n00:18:54.350 --> 00:18:56.780\nAnd we can tell it verbose\nif we really want data.\n\n391\n00:18:56.780 --> 00:18:59.310\nThe default is it's just gonna give\nus this little exclamation point.\n\n392\n00:18:59.310 --> 00:19:01.140\nAnd that's not a ton of information.\n\n393\n00:19:01.140 --> 00:19:03.700\n>> Very good.\nSo we could use the ping utility, right.\n\n394\n00:19:03.700 --> 00:19:06.834\nVery basic and\nwe can add parameters to it.\n\n395\n00:19:06.834 --> 00:19:08.712\nIt definitely get a little\nmore advanced and\n\n396\n00:19:08.712 --> 00:19:10.650\nreally rifle down on what you're testing.\n\n397\n00:19:10.650 --> 00:19:14.000\nDon, what is the next type\nof command that we have for\n\n398\n00:19:14.000 --> 00:19:16.360\ntesting things like connectivity\nacross our networks?\n\n399\n00:19:16.360 --> 00:19:17.608\n>> All right, so the problem with ping.\n\n400\n00:19:17.608 --> 00:19:18.734\nPing has it's uses.\n\n401\n00:19:18.734 --> 00:19:23.160\nAnd if I wanna find out where a fault is\nI can start pinging from one host and\n\n402\n00:19:23.160 --> 00:19:28.024\nstart slowly moving my way out to try and\nisolate where the fault is on a network,\n\n403\n00:19:28.024 --> 00:19:28.905\nright?\n\n404\n00:19:28.905 --> 00:19:32.601\nAnd so if I wanna test something like\nI got a system that can't get to\n\n405\n00:19:32.601 --> 00:19:36.099\nthe Internet, so I usually start\njust by like pinging itself,\n\n406\n00:19:36.099 --> 00:19:38.938\nso this switch is 10.1.230.2, right?\n\n407\n00:19:38.938 --> 00:19:40.702\nSo, I ping itself, yeah!\n\n408\n00:19:40.702 --> 00:19:41.620\nRight.\n\n409\n00:19:41.620 --> 00:19:45.690\nAnd then, whatever its default gateway is,\nI might ping that, so if I take a look at,\n\n410\n00:19:45.690 --> 00:19:47.760\nI actually don't know what\nthis switches gateway is.\n\n411\n00:19:47.760 --> 00:19:49.290\nSo, let's take a look.\n\n412\n00:19:49.290 --> 00:19:50.410\nMan, I don't even have a gateway.\n\n413\n00:19:50.410 --> 00:19:52.750\nSo, I'm gonna take a look\nat what its gateway is.\n\n414\n00:19:52.750 --> 00:19:53.980\nThere we go, 10.1.10.1.\n\n415\n00:19:53.980 --> 00:19:56.250\nSo, then I ping its default gateway.\n\n416\n00:19:56.250 --> 00:19:57.814\nCan I get to that gateway and I can.\n\n417\n00:19:57.814 --> 00:20:01.780\nAll right, if I can get to the gateway,\ncan I get out to the Internet beyond it?\n\n418\n00:20:01.780 --> 00:20:03.900\nAnd then I start to ping out to there.\n\n419\n00:20:03.900 --> 00:20:05.280\nSo, I'll ping out to this guy.\n\n420\n00:20:05.280 --> 00:20:06.160\nAnd I get out there.\n\n421\n00:20:06.160 --> 00:20:07.650\nBut what if I can't?\n\n422\n00:20:07.650 --> 00:20:09.860\nWell, is the whole Internet down?\n\n423\n00:20:09.860 --> 00:20:10.890\nMight be.\n\n424\n00:20:10.890 --> 00:20:12.820\nIs it my ISP that's down?\n\n425\n00:20:12.820 --> 00:20:13.800\nMore likely.\n\n426\n00:20:13.800 --> 00:20:15.610\nIs it just my WAN connection?\n\n427\n00:20:15.610 --> 00:20:16.610\nMost likely.\n\n428\n00:20:16.610 --> 00:20:19.890\nBut I don't know which,\nping doesn't show me that, right?\n\n429\n00:20:19.890 --> 00:20:22.570\nBut we have traceroute that does.\n\n430\n00:20:22.570 --> 00:20:27.605\nAnd I can run traceroute and\nspecify that remote IP.\n\n431\n00:20:27.605 --> 00:20:32.495\nAnd now it's gonna lay out all the hops\nbetween me and that estimation.\n\n432\n00:20:32.495 --> 00:20:36.485\nNow not every network allows traceroutes\nand notice I'm getting blocked down here.\n\n433\n00:20:36.485 --> 00:20:38.555\nBut it is giving me\nthe information I need.\n\n434\n00:20:38.555 --> 00:20:42.515\nI can see that I'm exiting my building and\nI'm jumping to our ISP,\n\n435\n00:20:42.515 --> 00:20:45.170\nwhich is GRU, right,\nthe Gainesville Regional Utilities.\n\n436\n00:20:45.170 --> 00:20:46.680\nSo we jump over to them, and\n\n437\n00:20:46.680 --> 00:20:52.590\nthen we're passing from them out to\nthe Internet to some other GRU networks.\n\n438\n00:20:52.590 --> 00:20:54.660\nAnd then we're jumping all\nthe way down to Miami, Florida.\n\n439\n00:20:54.660 --> 00:20:56.100\nBienvenue a Miami.\n\n440\n00:20:56.100 --> 00:20:58.030\nAnd jumping over to level3.net, and\n\n441\n00:20:58.030 --> 00:21:01.830\nthen at some point there we had hit\na device that had trace route blocked.\n\n442\n00:21:01.830 --> 00:21:05.710\nAnd then we hit the destination of who\nI was pinging, which was the DNS Server\n\n443\n00:21:05.710 --> 00:21:08.870\nthat apparently has an end node\nsomewhere attached to Miami, right?\n\n444\n00:21:08.870 --> 00:21:10.190\nSo I was able to get out there.\n\n445\n00:21:10.190 --> 00:21:11.850\nBut I see each hop along the way.\n\n446\n00:21:11.850 --> 00:21:13.730\nAnd I can spot where the stop was or\n\n447\n00:21:13.730 --> 00:21:17.250\nwhere the slow down was because it gives\nme this kind of average over here.\n\n448\n00:21:17.250 --> 00:21:21.470\nThe minimum, maximum and\naverage times of that communication.\n\n449\n00:21:21.470 --> 00:21:22.840\nSo it's kinda laying it out.\n\n450\n00:21:22.840 --> 00:21:27.250\nSo I can see exactly where my slow down or\nwhere my problems might be.\n\n451\n00:21:27.250 --> 00:21:28.790\nTraceroute is really powerful.\n\n452\n00:21:28.790 --> 00:21:29.570\n>> Very good.\nVery good.\n\n453\n00:21:29.570 --> 00:21:33.370\nSo we can test communications\nfrom source to destination.\n\n454\n00:21:33.370 --> 00:21:38.450\nWe can determine the path a packet takes\nbetween these connectivity devices.\n\n455\n00:21:38.450 --> 00:21:40.050\nWhat else we got, Don?\n\n456\n00:21:40.050 --> 00:21:43.010\n>> All right, now most people never\nmove beyond that with traceroute, but\n\n457\n00:21:43.010 --> 00:21:45.980\nI wanna show you guys this really\ncool stuff with traceroute that most\n\n458\n00:21:45.980 --> 00:21:48.090\npeople just never actually bother to see.\n\n459\n00:21:48.090 --> 00:21:49.596\nIf you do traceroute question mark,\n\n460\n00:21:49.596 --> 00:21:52.130\nthe first thing you'll notice\nis you can do other protocols.\n\n461\n00:21:52.130 --> 00:21:56.532\nI can traceroute for IP and\nIPv6, IPX, Banyan vines.\n\n462\n00:21:56.532 --> 00:21:57.948\nGod forbid, you're having to do that.\n\n463\n00:21:57.948 --> 00:21:59.608\n>> [LAUGH]\n>> So you can do that.\n\n464\n00:21:59.608 --> 00:22:02.905\nYou can do traceroutes to\na host name versus an IP.\n\n465\n00:22:02.905 --> 00:22:04.474\nSo those are kinda cool and\n\n466\n00:22:04.474 --> 00:22:08.350\njust other ways that you can\nkinda track one of those down.\n\n467\n00:22:08.350 --> 00:22:11.800\nSo if I wanna run a traceroute to a host\nlike that, I can punch in the IP or\n\n468\n00:22:11.800 --> 00:22:14.240\nthe name or\nwhatever the protocol's gonna be.\n\n469\n00:22:14.240 --> 00:22:18.110\nBut the one I really wanna point out for\nyou guys is MAC.\n\n470\n00:22:18.110 --> 00:22:20.158\nAll right,\nwhat the heck is the MAC protocol?\n\n471\n00:22:20.158 --> 00:22:26.260\nIt's talking about layer to\nMedia Control addresses, right?\n\n472\n00:22:26.260 --> 00:22:27.610\nWhy the heck would I wanna do that?\n\n473\n00:22:27.610 --> 00:22:30.560\nWell on a router you wouldn't,\nbut on a switch,\n\n474\n00:22:30.560 --> 00:22:35.140\nmaybe I'm trying to trace the path of\ntraffic that's not going through a router,\n\n475\n00:22:35.140 --> 00:22:37.310\nbut is just moving from\nswitch to switch to switch.\n\n476\n00:22:37.310 --> 00:22:41.070\nThis is a layer to a traceroute,\nand it's really cool.\n\n477\n00:22:41.070 --> 00:22:45.060\nWhen you're dealing with traffic\nright here in one system,\n\n478\n00:22:45.060 --> 00:22:48.530\nyou might not pass through a router,\ntraceroute's not gonna show you anything.\n\n479\n00:22:48.530 --> 00:22:50.893\nMy switch is 10.1.\n\n480\n00:22:50.893 --> 00:22:53.640\nOh wait, hang on,\nI got a couple IP's on this turkey.\n\n481\n00:22:53.640 --> 00:22:59.080\nSo if I [LAUGH], let me just do a quick\nshow ip int br and there we go.\n\n482\n00:22:59.080 --> 00:23:03.695\nSo my switch on Vlan10,\nI am 10.1.10.2, that's my IP.\n\n483\n00:23:03.695 --> 00:23:06.821\nAnd let's say that I'm trying\nto connect to a host and\n\n484\n00:23:06.821 --> 00:23:09.895\nthat host is 10.1.10.102, all right?\n\n485\n00:23:09.895 --> 00:23:15.050\nAnd so I do a ping to 10.1.10.102,\nand it's out there, all right?\n\n486\n00:23:15.050 --> 00:23:17.140\nBut maybe I'm losing some pings.\n\n487\n00:23:17.140 --> 00:23:20.780\nSo, if I do a count of 15, right?\n\n488\n00:23:20.780 --> 00:23:22.910\nAnd this is a repeat of 15.\n\n489\n00:23:22.910 --> 00:23:24.300\nThere we go.\n\n490\n00:23:24.300 --> 00:23:24.970\nThere.\n\n491\n00:23:24.970 --> 00:23:27.549\nAnd I find that out of the 15, 5 fail.\n\n492\n00:23:27.549 --> 00:23:29.012\nI'm getting a couple of failures.\n\n493\n00:23:29.012 --> 00:23:31.470\nSo I need to figure out\nwhere the problem is.\n\n494\n00:23:31.470 --> 00:23:33.980\nAnd it's most probably like\na transceiver or a cable problem.\n\n495\n00:23:33.980 --> 00:23:36.050\nSo I need to know where the cabling runs.\n\n496\n00:23:36.050 --> 00:23:37.960\nWell, how do I find that?\n\n497\n00:23:37.960 --> 00:23:38.840\nI could figure it out.\n\n498\n00:23:38.840 --> 00:23:41.639\nNow that I've done a ping I\ncould look at the arp table.\n\n499\n00:23:42.800 --> 00:23:48.060\nAnd I can hunt down 10.1.10.102 and get\nit's MAC address, and then I can do a show\n\n500\n00:23:48.060 --> 00:23:53.650\nmac address-table and I can filter\nthat down to just find this guy.\n\n501\n00:23:53.650 --> 00:23:55.175\nSo I'll just look for\nthe last four of its MAC address.\n\n502\n00:23:55.175 --> 00:23:55.755\nThere we go.\n\n503\n00:23:55.755 --> 00:23:57.495\nSo I'm seeing it on Port-channel1.\n\n504\n00:23:57.495 --> 00:23:58.904\nGreat, that's a connection\nto another switch.\n\n505\n00:23:58.904 --> 00:24:02.468\nNow I've got to go to the other switch and\nlook at its MAC address table and\n\n506\n00:24:02.468 --> 00:24:04.527\nfigure out what port that's on, right.\n\n507\n00:24:04.527 --> 00:24:07.335\nSo it's kind of a long process\nto hunt down a machine.\n\n508\n00:24:07.335 --> 00:24:13.420\nBut if I use trace route,\nI can say trace route, Mac.\n\n509\n00:24:13.420 --> 00:24:17.150\nAnd I can tell it the Mac address\nthat I'm trying to hunt down.\n\n510\n00:24:17.150 --> 00:24:19.959\nAnd so\nI can give it this Mac address right here.\n\n511\n00:24:21.630 --> 00:24:23.520\nAnd I need to go a little bit more and\n\n512\n00:24:23.520 --> 00:24:28.080\nlet it know an interface that this exists\non or sometimes you get to specify a VLAN,\n\n513\n00:24:28.080 --> 00:24:30.460\nand, oh shoot, actually I'm\ndoing this a little bit wrong.\n\n514\n00:24:30.460 --> 00:24:33.150\nI need to do that mac\naddress of the source and\n\n515\n00:24:33.150 --> 00:24:37.700\nthe source is me and then the destination\nwhich would be this Mac here.\n\n516\n00:24:37.700 --> 00:24:39.530\nSo I actually need to add\nmy own Mac address first.\n\n517\n00:24:39.530 --> 00:24:40.910\nSo let me come back here and add that in.\n\n518\n00:24:40.910 --> 00:24:44.180\nNow I know what you guys\nare thinking this is great,\n\n519\n00:24:44.180 --> 00:24:46.670\nbut all the Mac addresses\nI don't know these things.\n\n520\n00:24:46.670 --> 00:24:48.490\nYou can actually do it with IP's also.\n\n521\n00:24:48.490 --> 00:24:51.740\nSo if you know the IP of the system,\nyou can come in here and you can say,\n\n522\n00:24:51.740 --> 00:24:57.050\ntraceroute Mac, and then you can say,\nIP, and specify the IP addresses.\n\n523\n00:24:57.050 --> 00:24:59.770\nAnd it will figure out the Mac addresses\nfor you, which is kinda nice and\n\n524\n00:24:59.770 --> 00:25:01.620\nwill save you the time for\nfiguring that out.\n\n525\n00:25:01.620 --> 00:25:04.750\nSo if I wanna trace it from the switch,\n10, 1, 10, 2, and\n\n526\n00:25:04.750 --> 00:25:09.470\nI wanna do that to\na destination of 10.1.10.102,\n\n527\n00:25:09.470 --> 00:25:13.240\nI can do it this way, and\nsave myself a little bit of trouble.\n\n528\n00:25:13.240 --> 00:25:16.565\nNow if I run that, I may get an error\nabout the Mac being found on multiple\n\n529\n00:25:16.565 --> 00:25:18.700\nVLANs, and\nthat's because I've got a trunk.\n\n530\n00:25:18.700 --> 00:25:21.870\nAnd so, I need to follow that up and\ntell it which VLAN this one's on.\n\n531\n00:25:21.870 --> 00:25:25.420\nAnd so I'm going to have to\nadd a little bit more to that.\n\n532\n00:25:26.640 --> 00:25:31.250\nAnd, oh shoot,\nactually because I have to specify a VLAN,\n\n533\n00:25:31.250 --> 00:25:33.380\nthis is the one time I can't use the IPs.\n\n534\n00:25:33.380 --> 00:25:36.270\nI actually have to use the Mac address\nformat, so it's going to get me.\n\n535\n00:25:36.270 --> 00:25:36.800\nAll right.\n\n536\n00:25:36.800 --> 00:25:40.520\nWell, I'm a lazy typer but\nI am dedicated to the show so,\n\n537\n00:25:40.520 --> 00:25:42.620\nI will type in these Mac addresses for\nus here.\n\n538\n00:25:42.620 --> 00:25:46.150\nSo I'm just going to type in my switches\nMac, oh, actually this is my destination.\n\n539\n00:25:46.150 --> 00:25:47.360\nNo, no that's the switch.\n\n540\n00:25:47.360 --> 00:25:51.460\nYeah, so I'll punch that in and then\nI'll punch in who I'm going to and so,\n\n541\n00:25:51.460 --> 00:25:53.420\nlet me get that one in here.\n\n542\n00:25:53.420 --> 00:25:57.730\nAnd we'll run this same thing, and\nthis time I'll have the VLAN option, so\n\n543\n00:25:57.730 --> 00:25:59.950\nI can tell it, it's on VLAN 10.\n\n544\n00:25:59.950 --> 00:26:03.480\nAnd it's gonna run a traceroute for that\nand it's gonna do something really cool.\n\n545\n00:26:03.480 --> 00:26:05.900\nIt's gonna show, oh,\nyou know, I did it backwards.\n\n546\n00:26:05.900 --> 00:26:06.610\nShoot.\n\n547\n00:26:06.610 --> 00:26:09.530\nI specified my\n>> Destination\n\n548\n00:26:09.530 --> 00:26:10.710\n>> Destination source and my, oh,\n\n549\n00:26:10.710 --> 00:26:11.500\nI got it backwards.\n\n550\n00:26:11.500 --> 00:26:14.750\nBut, well, you guys kind of see\nthat if we look at it backwards\n\n551\n00:26:14.750 --> 00:26:19.450\nwe started here on the 4500 series\nswitch that I'm on, and that's 10.1.0.2.\n\n552\n00:26:19.450 --> 00:26:21.470\nThat's one of my other switch IPs.\n\n553\n00:26:21.470 --> 00:26:25.850\nAnd you can see that if I want to get to\nthat host I'm going to cross port channel\n\n554\n00:26:25.850 --> 00:26:27.720\none to get to the other switch.\n\n555\n00:26:27.720 --> 00:26:29.940\nAnd on the other switch it's on FA0/6.\n\n556\n00:26:29.940 --> 00:26:33.030\nThat's where this person resides.\n\n557\n00:26:33.030 --> 00:26:36.730\nI never connected to that other switch,\nbut that's where that person is, or\n\n558\n00:26:36.730 --> 00:26:38.230\nactually looks like I got a wrong IP,\n\n559\n00:26:38.230 --> 00:26:40.630\nI must have a wrong Mac\naddress all together here.\n\n560\n00:26:40.630 --> 00:26:43.110\nBut you kinda see the steps along the way,\nand\n\n561\n00:26:43.110 --> 00:26:45.970\nactually spot where that\nperson's plugged in.\n\n562\n00:26:45.970 --> 00:26:48.990\n>> Now, that's interesting, because\nthat brings us back to something that's\n\n563\n00:26:48.990 --> 00:26:51.590\ntheoretical, that once we learn it,\nwe never use it again.\n\n564\n00:26:51.590 --> 00:26:54.785\nThat OSI model, it looks like you're\njumping between layer three and\n\n565\n00:26:54.785 --> 00:26:59.435\nlayer two there to kind of isolate\nthe problem down using that OSI model and\n\n566\n00:26:59.435 --> 00:27:01.165\nthe layer three, layer two there.\n\n567\n00:27:01.165 --> 00:27:02.295\nIs that what's going on here?\n\n568\n00:27:02.295 --> 00:27:03.225\n>> That's exactly what it is.\n\n569\n00:27:03.225 --> 00:27:04.885\nNormally trace route is\na layer three thing.\n\n570\n00:27:04.885 --> 00:27:07.032\nYou're seeing the routers in In a path,\nbut\n\n571\n00:27:07.032 --> 00:27:09.822\nwhen we use the Mac protocol\nit's actually layer two.\n\n572\n00:27:09.822 --> 00:27:14.602\nI'm seeing the switches in the path and\nit's even using sysco discovery protocol\n\n573\n00:27:14.602 --> 00:27:18.465\nto find the name of that switch to give\nit to me and let me know that connection.\n\n574\n00:27:18.465 --> 00:27:20.445\n10.1.0.2, that's this switch.\n\n575\n00:27:20.445 --> 00:27:25.058\n10.1.10.31 that's that other switch and\nthese are the ports that I would cross.\n\n576\n00:27:25.058 --> 00:27:28.411\nOn this switch GI2/15 go\ninto the port channel and\n\n577\n00:27:28.411 --> 00:27:32.970\nthen going from the port channel to\nFA0/6 to get to that other person.\n\n578\n00:27:32.970 --> 00:27:35.640\n>> Now that one command that you threw\nin there where you had the Mac and\n\n579\n00:27:35.640 --> 00:27:38.200\nthe IP address, and you said,\nlet it do the work.\n\n580\n00:27:38.200 --> 00:27:40.660\nIs it just kinda slip\nstreaming ARP in there and\n\n581\n00:27:40.660 --> 00:27:42.360\nARPs the one that's doing the work for\nyou?\n\n582\n00:27:42.360 --> 00:27:42.940\n>> Yeah.\n>> And you don't have\n\n583\n00:27:42.940 --> 00:27:43.680\nto do all the leg work?\n\n584\n00:27:43.680 --> 00:27:44.520\n>> Yeah.\n\n585\n00:27:44.520 --> 00:27:46.560\nBasically it does the ARP lookup.\n\n586\n00:27:46.560 --> 00:27:48.910\nKinda like, you know when we do\na Ping that forces an ARP lookup?\n\n587\n00:27:48.910 --> 00:27:51.030\n>> Sure.\n>> So it does an ARP lookup for us.\n\n588\n00:27:51.030 --> 00:27:53.070\n>> Gets the MAC addresses and\nthen populates it in the command.\n\n589\n00:27:53.070 --> 00:27:53.970\nSo it's a lot easier.\n\n590\n00:27:53.970 --> 00:27:57.810\nDon't feel like you get better results,\nbut do know that I had to specify a VLAN\n\n591\n00:27:57.810 --> 00:28:00.890\non this one and so that's why I had\nto go in and use MAC addresses on it.\n\n592\n00:28:00.890 --> 00:28:01.560\n>> All right.\n\n593\n00:28:01.560 --> 00:28:03.390\nVery good, very good.\n\n594\n00:28:03.390 --> 00:28:04.700\nPlenty of good information.\n\n595\n00:28:04.700 --> 00:28:07.460\nDon, do you got anything\nelse to add on this?\n\n596\n00:28:07.460 --> 00:28:08.220\n>> No.\nI know it's\n\n597\n00:28:08.220 --> 00:28:09.620\nsomething you guys are thinking.\n\n598\n00:28:09.620 --> 00:28:14.050\nDid we just spend a whole episode talking\nabout ping and traceroute and debug?\n\n599\n00:28:14.050 --> 00:28:15.070\nAnd yes we did.\n\n600\n00:28:15.070 --> 00:28:16.800\nBut the reason I wanted to do this,\n\n601\n00:28:16.800 --> 00:28:20.180\nis we're going to use those three commands\na ton throughput this whole show.\n\n602\n00:28:20.180 --> 00:28:23.710\nUsually some of the first commands I go\nto to establish the scope of our problem.\n\n603\n00:28:23.710 --> 00:28:26.160\nAnd from there we start to\ntroubleshoot and isolate.\n\n604\n00:28:26.160 --> 00:28:28.710\nSo it's really important that\nwe understand these three tools,\n\n605\n00:28:28.710 --> 00:28:32.250\nhow we can use them, how they work\nas far as troubleshooting some of\n\n606\n00:28:32.250 --> 00:28:34.220\nthe advanced features that\nyou might not be aware of.\n\n607\n00:28:34.220 --> 00:28:36.700\nYou'll see these again in\nthe episodes that are coming up.\n\n608\n00:28:36.700 --> 00:28:39.450\nBut for here, that's a pretty good\nspot for us to wrap this one up.\n\n609\n00:28:39.450 --> 00:28:40.280\n>> Very good.\nVery good.\n\n610\n00:28:40.280 --> 00:28:42.380\nWell Don, thanks for that information.\n\n611\n00:28:42.380 --> 00:28:45.990\nIt's been another great\nepisode here at ITProTv.\n\n612\n00:28:45.990 --> 00:28:49.430\nWe're moving on and Troubleshooting and\nMaintaining Cisco IP Networks,\n\n613\n00:28:49.430 --> 00:28:51.760\nbut I think we've come to\nthe end of our show today.\n\n614\n00:28:51.760 --> 00:28:54.740\nAnd until we see you next time,\nI'm your host Wes Bryan.\n\n615\n00:28:54.740 --> 00:28:55.450\n>> And I'm Don Paset.\n\n616\n00:28:55.450 --> 00:28:56.400\nAnd we'll see you next time.\n\n617\n00:28:56.400 --> 00:29:03.919\n[MUSIC]\n\n",
          "vimeoId": "145146730"
        },
        {
          "description": "In this episode Don and Wes continue their discussion on troubleshooting tools. They introduce using packet sniffers to capture data on the network and how to interpret that data with a tool called a protocol analyzer. They show you how to use the Switch Port Analyzer also known as SPAN. They talk about duplicating data across two ports for the purpose of capturing and analyzing that data through port mirroring.",
          "length": "1522",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-1-troubleshooting_tools_pt2-102215-high.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-1-troubleshooting_tools_pt2-102215-high-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-1-troubleshooting_tools_pt2-102215-high-sm.jpg",
          "title": "Troubleshooting Tools Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.025 --> 00:00:10.025\n[MUSIC]\n\n2\n00:00:11.808 --> 00:00:15.600\nAll right, welcome to another\nexciting episode here at ITPro TV.\n\n3\n00:00:15.600 --> 00:00:19.460\nYour time is valuable and we're glad\nthat you're going to take that time and\n\n4\n00:00:19.460 --> 00:00:20.610\nspend it with us.\n\n5\n00:00:20.610 --> 00:00:25.620\nWe're continuing on in CCMP routing and\nswitching, Tshoot and\n\n6\n00:00:25.620 --> 00:00:29.880\ntoday we're gonna be continuing with\npart two of IOS troubleshooting tools.\n\n7\n00:00:29.880 --> 00:00:33.970\nAnd I've got none other than Mr.\nDon Pezet here to take us on this journey.\n\n8\n00:00:33.970 --> 00:00:35.190\nDon, how you doing today sir?\n\n9\n00:00:35.190 --> 00:00:38.880\n>> I am doing great Wes and\nready to continue our exploration of\n\n10\n00:00:38.880 --> 00:00:42.230\nthe troubleshooting tools available\ninside of Cisco routers and switches.\n\n11\n00:00:42.230 --> 00:00:46.170\nAnd actually this episode,\nI wanna kind of move away from that.\n\n12\n00:00:46.170 --> 00:00:49.826\nIn our first episode,\nwe saw ping and trace routing and\n\n13\n00:00:49.826 --> 00:00:53.550\nmind-boggling tools that\nare just amazingly complex right.\n\n14\n00:00:53.550 --> 00:00:55.010\nBasic stuff.\n\n15\n00:00:55.010 --> 00:00:56.890\nThings that are built into the iOS.\n\n16\n00:00:56.890 --> 00:01:00.530\nBut sometimes there's stuff we need\nthat's not available in the iOS, or\n\n17\n00:01:00.530 --> 00:01:02.470\nit is available but\nit's very limited, right?\n\n18\n00:01:03.470 --> 00:01:08.490\nIn the last episode I showed you\nguys the debug IP packets command.\n\n19\n00:01:08.490 --> 00:01:11.530\nAnd what it did was it let\nme see some of the IP,\n\n20\n00:01:11.530 --> 00:01:15.090\nwell packets that are passing\nthrough a router or a switch.\n\n21\n00:01:15.090 --> 00:01:17.870\nAnd if you do debug IP package detail,\n\n22\n00:01:17.870 --> 00:01:19.850\nyou actually see a little\nbit more there too, right?\n\n23\n00:01:19.850 --> 00:01:22.570\nAnd I could see the source port and\ndestination port.\n\n24\n00:01:22.570 --> 00:01:27.260\nBut, there are times where we need\nto see even more than that, right?\n\n25\n00:01:27.260 --> 00:01:30.620\nWhere maybe we even need to see\nthe payload of the packets.\n\n26\n00:01:30.620 --> 00:01:33.700\nAnd then a great example of this would\nbe if you've got a VPN in place.\n\n27\n00:01:33.700 --> 00:01:34.940\nI run into this all the time.\n\n28\n00:01:34.940 --> 00:01:37.990\nYou put in a VPN, you configure it,\nyou get it in place.\n\n29\n00:01:37.990 --> 00:01:38.845\nIs it actually working?\n\n30\n00:01:38.845 --> 00:01:40.582\nOr an IPsec.\n\n31\n00:01:40.582 --> 00:01:45.200\nAn IPsec's even better because with IPsec,\nit's completely transparent to the end\n\n32\n00:01:45.200 --> 00:01:48.420\nuser, so do they know if\nit's encrypting data or not?\n\n33\n00:01:48.420 --> 00:01:50.740\nWell, if it's working,\nthey should know, right?\n\n34\n00:01:50.740 --> 00:01:53.684\nSo we need a way to verify the data\nis actually being encrypted and\n\n35\n00:01:53.684 --> 00:01:55.155\ndebut IP packets won't tell us that.\n\n36\n00:01:55.155 --> 00:01:56.190\nIt'll tell us a port number.\n\n37\n00:01:56.190 --> 00:01:57.140\nThat's good.\n\n38\n00:01:57.140 --> 00:01:59.320\nBut I don't know if my data's\ntruly being encrypted.\n\n39\n00:01:59.320 --> 00:02:03.460\nSo, we can use other software to be able\n\n40\n00:02:03.460 --> 00:02:08.060\nto intercept that traffic on the network,\nand actually have a good look at it.\n\n41\n00:02:08.060 --> 00:02:10.180\nAnd as a trouble shooting tool,\nit can be really valuable.\n\n42\n00:02:10.180 --> 00:02:11.090\nIt can be really useful for\n\n43\n00:02:11.090 --> 00:02:16.290\nus to make sure that we locate where\nthe actual source of a problem is.\n\n44\n00:02:16.290 --> 00:02:20.880\nAnd just another example might be,\nlet's see,\n\n45\n00:02:20.880 --> 00:02:24.440\nwell you know, Wes, you and I we used to\nwork together at a different building.\n\n46\n00:02:24.440 --> 00:02:27.670\nAnd at this other location\nwe had a lot of students,\n\n47\n00:02:27.670 --> 00:02:29.480\npeople that would come into the building.\n\n48\n00:02:29.480 --> 00:02:33.630\nAnd occasionally somebody\nwould be browsing websites and\n\n49\n00:02:33.630 --> 00:02:34.470\nnot supposed to go to.\n\n50\n00:02:34.470 --> 00:02:36.150\nRight?\n>> Sure. Sure. >> They'd get a machine and\n\n51\n00:02:36.150 --> 00:02:37.900\nit would get infected.\nIt'd get a virus and\n\n52\n00:02:37.900 --> 00:02:40.480\nit would just start spamming\nthe network with junk.\n\n53\n00:02:40.480 --> 00:02:42.530\nRight?\nTrying to infect other machines and so\n\n54\n00:02:42.530 --> 00:02:44.950\nwe'd get reports hey the network is slow.\n\n55\n00:02:44.950 --> 00:02:47.540\nAlright well I can see there's\na lot of traffic on the network.\n\n56\n00:02:47.540 --> 00:02:49.230\nWhere's it coming from right?\n\n57\n00:02:49.230 --> 00:02:52.090\nWho's generating all that traffic?\n\n58\n00:02:52.090 --> 00:02:55.560\nWell there's not really a great way\nto see that in most Cisco equipment.\n\n59\n00:02:55.560 --> 00:02:58.120\nNow in another episode we'll\ntalk about net flow, or\n\n60\n00:02:58.120 --> 00:02:59.670\nmaybe if we have time this\ntime we'll get to it,\n\n61\n00:02:59.670 --> 00:03:02.780\nbut we're gonna talk about net flow later,\nand that does give us a way to see that.\n\n62\n00:03:02.780 --> 00:03:05.710\nBut assuming you don't have\nNetFlow there's not really another\n\n63\n00:03:05.710 --> 00:03:08.415\ngreat way to see it, so\nwe need another option.\n\n64\n00:03:08.415 --> 00:03:10.870\n>> Alright, and\none of the things that you did mention,\n\n65\n00:03:10.870 --> 00:03:14.170\nin one of the other episode\nis that there's a cause and\n\n66\n00:03:14.170 --> 00:03:15.980\nthen there's the symptom\n>> So you're saying,\n\n67\n00:03:15.980 --> 00:03:18.490\nhey the symptom is the network is slow,\nbut\n\n68\n00:03:18.490 --> 00:03:22.050\nthat might not necessarily be the cause so\nwe have to isolate that down, right?\n\n69\n00:03:22.050 --> 00:03:23.480\n>> Absolutely.\n\n70\n00:03:23.480 --> 00:03:25.700\nAnd this is where we can\ngo to third party software.\n\n71\n00:03:25.700 --> 00:03:28.920\nSoftware that's outside of our Cisco\nequipment and on the exam they're not\n\n72\n00:03:28.920 --> 00:03:32.510\nreally gonna expect you to know\na bunch of third party software.\n\n73\n00:03:32.510 --> 00:03:35.110\nBut there is one that they call out.\n\n74\n00:03:35.110 --> 00:03:38.835\nAnd it's a network sniffer and\npacket analyzer.\n\n75\n00:03:38.835 --> 00:03:41.390\nAlright.\nAnd it is actually two different pieces of\n\n76\n00:03:41.390 --> 00:03:41.920\nsoftware.\n\n77\n00:03:41.920 --> 00:03:45.240\nBut what it does is it runs and\nit lets us collect data on the network and\n\n78\n00:03:45.240 --> 00:03:50.900\nlook at it and get an idea of what\nthat traffic is and what it does.\n\n79\n00:03:50.900 --> 00:03:55.410\nNow, you might ask yourself what's the\ndifference between a packet sniffer and\n\n80\n00:03:55.410 --> 00:03:58.340\na, well you know I think\nI said packet analyzer.\n\n81\n00:03:58.340 --> 00:04:00.540\nTechnically it's protocol analyzer, right?\n\n82\n00:04:00.540 --> 00:04:02.570\nSo a packet sniffer.\n\n83\n00:04:02.570 --> 00:04:05.260\nWhat a packet sniffer does is it\nlets you plug into the network and\n\n84\n00:04:05.260 --> 00:04:07.870\njust collect all the traffic it sees.\n\n85\n00:04:07.870 --> 00:04:11.770\nNormally a computer will discard traffic\nthat's not destined for it, right?\n\n86\n00:04:11.770 --> 00:04:13.210\nBut a packet sniffer won't.\n\n87\n00:04:13.210 --> 00:04:15.370\nIt will capture everything.\n\n88\n00:04:15.370 --> 00:04:17.940\nAnd I don't know why they call it a packet\nsniffer cuz it'll actually capture\n\n89\n00:04:17.940 --> 00:04:18.720\nframes too.\n\n90\n00:04:18.720 --> 00:04:20.650\nYou get a lot of good data in there.\n\n91\n00:04:20.650 --> 00:04:23.090\nBut I guess by the time you see it in\nsoftware it's rendered as a packet,\n\n92\n00:04:23.090 --> 00:04:24.830\nso packet sniffer.\n\n93\n00:04:24.830 --> 00:04:27.440\nBut protocol analyzer,\nwhat's that all about?\n\n94\n00:04:27.440 --> 00:04:30.710\nWell, just getting the packets,\nthat's one thing.\n\n95\n00:04:30.710 --> 00:04:34.620\nIf you were to try and read those packets,\nit's actually pretty difficult because\n\n96\n00:04:34.620 --> 00:04:36.950\nin a lot of cases it's just\na hexadecimal data and\n\n97\n00:04:36.950 --> 00:04:39.200\nit doesn't mean anything to us, right?\n\n98\n00:04:39.200 --> 00:04:41.140\nBut a protocol analyzer\nwill take the data and\n\n99\n00:04:41.140 --> 00:04:42.990\ntranslate it into something\nthat's human readable.\n\n100\n00:04:42.990 --> 00:04:46.360\nSomething that we can actually\nbenefit from and read.\n\n101\n00:04:46.360 --> 00:04:49.060\nAnd in the old days you\nused to have to buy both.\n\n102\n00:04:49.060 --> 00:04:51.680\nYou'd get a packet sniffer and\na protocol analyzer.\n\n103\n00:04:51.680 --> 00:04:54.680\nOn Linux and UNIX machines, they\nactually had a packet sniffer built in.\n\n104\n00:04:54.680 --> 00:04:57.030\nThey still do,\ntcpdump that's been around a long time.\n\n105\n00:04:57.030 --> 00:04:59.330\nYou can generate data\nright out of the system.\n\n106\n00:04:59.330 --> 00:05:01.240\nYou don't even have to\ninstall all the software.\n\n107\n00:05:01.240 --> 00:05:02.805\nBut it wouldn't interpret the data for\nyou.\n\n108\n00:05:02.805 --> 00:05:04.790\nIt'd be up to you to interpret it.\n\n109\n00:05:04.790 --> 00:05:06.647\nAnd so you'd have to go out and\nbuy a protocol analyzer.\n\n110\n00:05:06.647 --> 00:05:11.585\nWell, in today's world there is a great\nopen source utility out there called\n\n111\n00:05:11.585 --> 00:05:14.915\nWireshark that does both,\npacket sniffing and protocol analyzing.\n\n112\n00:05:14.915 --> 00:05:18.080\nI've got their web page\npulled up here on my laptop.\n\n113\n00:05:18.080 --> 00:05:20.149\nBasically, if you just\ngo to wireshark.org.\n\n114\n00:05:20.149 --> 00:05:24.140\nIt's open source, it's free, you can\ndownload it, it doesn't cost you a dime.\n\n115\n00:05:24.140 --> 00:05:26.190\nAnd they make it for\nseveral different platforms.\n\n116\n00:05:26.190 --> 00:05:28.620\nSo when you go to download\nit they've got Windows and\n\n117\n00:05:28.620 --> 00:05:33.282\nOSX, you know they don't list it here,\nbut they do have it for Linux also.\n\n118\n00:05:33.282 --> 00:05:37.150\nYou usually get it from a Linux\ndistribution though, a different place.\n\n119\n00:05:37.150 --> 00:05:42.020\nBut basically you can install this and\nit will let you basically\n\n120\n00:05:42.020 --> 00:05:46.020\ncapture traffic on the network, interpret\nit, and really use that to troubleshoot.\n\n121\n00:05:46.020 --> 00:05:49.310\nNow on the exam,\nthey don't expect you to use Wireshark.\n\n122\n00:05:49.310 --> 00:05:51.720\nBut they expect you to know\nwhat a protocol analyzer is and\n\n123\n00:05:51.720 --> 00:05:56.685\nknow what a packet sniffer is and they\nwill show you screenshots of a packet and\n\n124\n00:05:56.685 --> 00:05:59.240\nit'll usually be in Wireshark.\n\n125\n00:05:59.240 --> 00:06:02.520\nIf you know Wireshark you'll\nrecognize it in the image and\n\n126\n00:06:02.520 --> 00:06:05.090\nthey'll ask you to interpret some of\nthe information that it's giving you.\n\n127\n00:06:05.090 --> 00:06:08.220\nSo if you've never used it,\nyou definitely want to get used to it.\n\n128\n00:06:08.220 --> 00:06:11.310\n>> Right, fire it up, give it a chance,\ntake a look at it and see what it does.\n\n129\n00:06:11.310 --> 00:06:11.950\nAlright.\n\n130\n00:06:11.950 --> 00:06:15.700\nNow let's walk through the basic\noperation of using a sniffer.\n\n131\n00:06:15.700 --> 00:06:19.710\nAnd then I'm gonna show you what we have\nto do on our switches to kinda get ready\n\n132\n00:06:19.710 --> 00:06:21.980\nto actually put one of these in use.\n\n133\n00:06:21.980 --> 00:06:22.710\nAlright.\n\n134\n00:06:22.710 --> 00:06:26.650\nNow on the basic operation side,\na sniffer captures traffic, right?\n\n135\n00:06:26.650 --> 00:06:30.390\nSo if I go to Wireshark, which I've got\nrunning somewhere here in my background.\n\n136\n00:06:30.390 --> 00:06:31.730\nHere we go.\n\n137\n00:06:31.730 --> 00:06:33.280\nWell let me not upgrade.\n\n138\n00:06:33.280 --> 00:06:34.010\nThere we go.\nAlright.\n\n139\n00:06:34.010 --> 00:06:35.970\nSo here I am in Wireshark.\n\n140\n00:06:35.970 --> 00:06:37.891\nAnd in Wireshark it\nbasically just fires up and\n\n141\n00:06:37.891 --> 00:06:39.880\nasks me what interface do I wanna capture.\n\n142\n00:06:39.880 --> 00:06:40.440\nAnd I can pick.\n\n143\n00:06:40.440 --> 00:06:42.390\nI'm gonna go to my interface list.\n\n144\n00:06:42.390 --> 00:06:44.520\nAnd I'll see all the interfaces\nhere on my laptop.\n\n145\n00:06:44.520 --> 00:06:45.770\nAnd I can pick the one that I want.\n\n146\n00:06:45.770 --> 00:06:48.180\nNow I've only got one interface\nthat's actually plugged in and\n\n147\n00:06:48.180 --> 00:06:48.980\nI'll see it down here.\n\n148\n00:06:48.980 --> 00:06:50.980\nIt's the one that has\npackets coming in on it.\n\n149\n00:06:50.980 --> 00:06:53.620\nNotice how all of these others are zeroed\nout cause I'm not plugged in, right?\n\n150\n00:06:53.620 --> 00:06:55.250\nOne of those is my wireless adapter and\n\n151\n00:06:55.250 --> 00:06:58.230\nI've got some VPN tunnels,\nthey're all kinda showing up there.\n\n152\n00:06:58.230 --> 00:07:04.160\nBut, I'm gonna pick this ethernet adapter\nhere, EN4, and I'm gonna start a capture.\n\n153\n00:07:04.160 --> 00:07:07.490\nAnd as soon as I start that\nit's watching the network and\n\n154\n00:07:07.490 --> 00:07:10.330\nit's gathering the data that it sees,\nalright?\n\n155\n00:07:10.330 --> 00:07:13.170\nAnd if I, let me resize some of this\nsee if I can't get it where we can\n\n156\n00:07:13.170 --> 00:07:14.940\nactually see what's going on.\n\n157\n00:07:14.940 --> 00:07:17.450\nIt's not gonna let me resize that,\nthere we go.\n\n158\n00:07:17.450 --> 00:07:21.540\nAlright so you'll see I've got some stuff\nkind of scrolling by up here at the top of\n\n159\n00:07:21.540 --> 00:07:22.580\nthe screen.\n\n160\n00:07:22.580 --> 00:07:24.840\nThese are all packets\nthat it's intercepting.\n\n161\n00:07:24.840 --> 00:07:26.980\nAnd it's giving me information\nlike the source IP and\n\n162\n00:07:26.980 --> 00:07:30.285\nthe destination IP,\nwhat protocol it was and so on.\n\n163\n00:07:30.285 --> 00:07:30.840\nAlright.\n\n164\n00:07:30.840 --> 00:07:34.050\nThat is actually the protocol\nanalyzer portion of the screen and so\n\n165\n00:07:34.050 --> 00:07:35.060\nis the middle part.\n\n166\n00:07:35.060 --> 00:07:38.290\nThe bottom part is the sniffer\npart of the screen.\n\n167\n00:07:38.290 --> 00:07:41.540\nAnd what it's showing me down there\nat the bottom is basically saying,\n\n168\n00:07:41.540 --> 00:07:45.200\nokay if I intercept a packet,\nand let me just stop this here.\n\n169\n00:07:45.200 --> 00:07:47.490\nHere's the packet that it intercepted.\n\n170\n00:07:47.490 --> 00:07:51.261\nAnd if you look at that data,\nwe get binary and hexadecimal data.\n\n171\n00:07:51.261 --> 00:07:53.197\nWe get, or\nactually there's no binary here is there,\n\n172\n00:07:53.197 --> 00:07:54.681\nthere's just straight up hexadecimal.\n\n173\n00:07:54.681 --> 00:07:56.460\nAnd then the raw data right there.\n\n174\n00:07:56.460 --> 00:07:59.491\nAnd if I were to give that to you and\nsay can you interpret that for me?\n\n175\n00:07:59.491 --> 00:08:02.887\nIf you could do it,\nI'd be just seriously impressed and\n\n176\n00:08:02.887 --> 00:08:05.140\nprobably turn this show over to you.\n\n177\n00:08:05.140 --> 00:08:06.510\nLooking at this stuff here,\n\n178\n00:08:06.510 --> 00:08:09.875\nit's really not something that\nwe as humans can interpret it.\n\n179\n00:08:09.875 --> 00:08:12.755\nIt's just hexadecimal numbers and\nletters, right?\n\n180\n00:08:12.755 --> 00:08:16.625\nBut the protocol analyzer takes that data,\nand\n\n181\n00:08:16.625 --> 00:08:20.025\nit breaks it down into something\nthat's human readable, and\n\n182\n00:08:20.025 --> 00:08:22.065\nthat's what we're seeing right\nhere in the middle section.\n\n183\n00:08:22.065 --> 00:08:25.985\nAnd so as I start to look at what\nI've got here, we see a frame.\n\n184\n00:08:25.985 --> 00:08:27.255\nThis is frame 528.\n\n185\n00:08:27.255 --> 00:08:30.780\nIt's 66 bytes on the wire,\n528 bits all together.\n\n186\n00:08:30.780 --> 00:08:34.830\nWe've got 66 bytes capture,\nthat means I got the entire frame.\n\n187\n00:08:34.830 --> 00:08:36.110\nWhy is that important?\n\n188\n00:08:36.110 --> 00:08:38.220\nWell, you can have frame fragmentation,\nand\n\n189\n00:08:38.220 --> 00:08:41.670\nif I have a fragmented frame does it\nhelp me to have just one fragment of it?\n\n190\n00:08:41.670 --> 00:08:45.205\nNo, I need the whole thing All right\nnow if you're not familiar with frame\n\n191\n00:08:45.205 --> 00:08:47.795\nfragmentation it's not\nnecessarily a bad thing.\n\n192\n00:08:47.795 --> 00:08:50.715\nThink about MTUs,\nmaximum transmission units.\n\n193\n00:08:50.715 --> 00:08:56.330\nOn an ethernet network your MTU is usually\nsomewhere around 1500 bytes, all right?\n\n194\n00:08:56.330 --> 00:08:58.480\nWell this is a 66 byte frame.\n\n195\n00:08:58.480 --> 00:08:59.790\nThat would fit in one frame.\n\n196\n00:08:59.790 --> 00:09:01.300\nNo big deal, right?\n\n197\n00:09:01.300 --> 00:09:05.980\nBut what if I had a 1500 byte frame\nthat was going across the network,\n\n198\n00:09:05.980 --> 00:09:10.140\nso it's fine, and\nthen it hit something like a PPP line.\n\n199\n00:09:10.140 --> 00:09:12.706\nAnd on that PPP line we've\ngot an M2 of only 1000.\n\n200\n00:09:12.706 --> 00:09:16.920\nNow, it's got to fragment this frame\nto make it Fit over that line and\n\n201\n00:09:16.920 --> 00:09:18.620\nthen reassemble it the other side.\n\n202\n00:09:18.620 --> 00:09:19.650\nSo, it does that.\n\n203\n00:09:19.650 --> 00:09:20.710\nIt takes care of it.\n\n204\n00:09:20.710 --> 00:09:22.430\nBut I might only have\na fragment of the frame.\n\n205\n00:09:22.430 --> 00:09:24.900\nAnd it would show it here to let\nme know that that was happening.\n\n206\n00:09:24.900 --> 00:09:25.720\nRight?\n\n207\n00:09:25.720 --> 00:09:27.330\nThen I've got my ethernet header.\n\n208\n00:09:27.330 --> 00:09:31.910\nI see this is an ethernet two frame and\nits source is and\n\n209\n00:09:31.910 --> 00:09:36.220\nhere's the Mac address of the source and\nthe Mac address of the destination.\n\n210\n00:09:36.220 --> 00:09:37.390\nI can see the Mac addresses.\n\n211\n00:09:37.390 --> 00:09:38.650\nThe layer two header.\n\n212\n00:09:38.650 --> 00:09:40.670\nIf you think about your OSI model, right?\n\n213\n00:09:40.670 --> 00:09:43.970\nThe frame itself on the wire,\nthat's layer 1,\n\n214\n00:09:43.970 --> 00:09:46.830\nthen the layer 2 header,\nthat's the link layer, layer 2.\n\n215\n00:09:46.830 --> 00:09:49.530\nThen we get to internet\nprotocol version 4.\n\n216\n00:09:49.530 --> 00:09:50.780\nLayer 3, right?\n\n217\n00:09:50.780 --> 00:09:54.460\nAnd here's going to be my source and\ndestination IP addresses and\n\n218\n00:09:54.460 --> 00:09:57.780\nif I expand that out I can see a lot more.\n\n219\n00:09:57.780 --> 00:10:02.140\nI can see if we've got DSCPs set for\nquality of service,\n\n220\n00:10:02.140 --> 00:10:05.500\nwe can see if we've got fragments here,\ntime to lose.\n\n221\n00:10:05.500 --> 00:10:09.730\nAll this other information imbedded\nright here in this packet.\n\n222\n00:10:09.730 --> 00:10:13.670\nIt basically reads like you're following\nOSI model, all these different pieces.\n\n223\n00:10:13.670 --> 00:10:16.910\n>> Now, I see that next layer's\nthe TCP Transmission Control Protocol and\n\n224\n00:10:16.910 --> 00:10:17.960\na little bit about the OSI.\n\n225\n00:10:17.960 --> 00:10:22.360\nNow, help me out here, is that going to be\nwhat was it we say the transport layer or\n\n226\n00:10:22.360 --> 00:10:23.670\nis that gonna be the session layer?\n\n227\n00:10:23.670 --> 00:10:26.670\n>> So, it is technically\nthe transport layer, layer four okay.\n\n228\n00:10:26.670 --> 00:10:27.278\n>> Okay.\n>> Now,\n\n229\n00:10:27.278 --> 00:10:31.138\nthis does get a little blurry cause when\nwe say something like telnet, all right.\n\n230\n00:10:31.138 --> 00:10:32.136\n>> Okay.\n>> [INAUDIBLE]\n\n231\n00:10:32.136 --> 00:10:33.620\n>> What port does telnet use?\n\n232\n00:10:33.620 --> 00:10:34.450\n>> 23.\n>> 23, right?\n\n233\n00:10:34.450 --> 00:10:36.380\n>> Yep.\n>> And it's TCP 23 right,\n\n234\n00:10:36.380 --> 00:10:38.730\na transmission control protocol.\n\n235\n00:10:38.730 --> 00:10:41.770\nSo, a lot of us always\ncombine the ports together.\n\n236\n00:10:41.770 --> 00:10:45.605\nWe say TCP 23, or UDP 69,\nwe never just say, well it's.\n\n237\n00:10:45.605 --> 00:10:46.795\nIt's just UDP.\n\n238\n00:10:46.795 --> 00:10:48.875\nThere's usually that port\nnumber associated with it.\n\n239\n00:10:48.875 --> 00:10:50.765\nThe port number is technically\npart of the session.\n\n240\n00:10:50.765 --> 00:10:53.155\nIt's part of layer five,\nright, technically.\n\n241\n00:10:53.155 --> 00:10:56.465\nBut because the two work so\ntightly together, it does blur the line.\n\n242\n00:10:56.465 --> 00:11:00.235\nAnd so your transport and your session\nlayer are kind of working together.\n\n243\n00:11:00.235 --> 00:11:03.045\n>> Okay.\n>> And you can actually see that in here.\n\n244\n00:11:03.045 --> 00:11:05.145\nSo, when I look at my transmission\ncontrol protocol, right?\n\n245\n00:11:05.145 --> 00:11:08.460\nI'm using TCP, right, so\nthere's my layer four.\n\n246\n00:11:08.460 --> 00:11:10.670\nBut down here I've got my source port.\n\n247\n00:11:10.670 --> 00:11:12.930\nAnd my destination port\nwill be right next to it.\n\n248\n00:11:12.930 --> 00:11:16.370\nSo, my source is 443,\nmy destination is 53099.\n\n249\n00:11:16.370 --> 00:11:18.920\nNow, what does that mean to me?\n\n250\n00:11:18.920 --> 00:11:22.930\nWell, just based on this information,\nif my source is 443.\n\n251\n00:11:22.930 --> 00:11:24.720\nWes, do you remember what 443 is?\n\n252\n00:11:24.720 --> 00:11:26.520\n>> That was HTTPS, I believe?\n\n253\n00:11:26.520 --> 00:11:27.060\n>> That's right.\n\n254\n00:11:27.060 --> 00:11:28.380\nSecure web browsing.\n\n255\n00:11:28.380 --> 00:11:32.930\nThis is probably a web server\nresponding to a client.\n\n256\n00:11:32.930 --> 00:11:36.780\nAnd so the web server is\nresponding with a source of 443,\n\n257\n00:11:36.780 --> 00:11:42.180\nresponding to a client who has\na destination here of 53099.\n\n258\n00:11:42.180 --> 00:11:46.290\nThat client reached out to the server\nwith a source of 53099 and\n\n259\n00:11:46.290 --> 00:11:48.480\na destination of 443.\n\n260\n00:11:48.480 --> 00:11:52.070\nThis is simply one packet\nin a communication.\n\n261\n00:11:52.070 --> 00:11:54.970\nAnd there might be hundreds or\nthousands or hundreds of thousands of\n\n262\n00:11:54.970 --> 00:11:58.970\npackets involved in this communication,\nI'm just looking at one piece of it.\n\n263\n00:11:58.970 --> 00:12:00.970\n>> Very good.\nSo, we've got layer two information here.\n\n264\n00:12:00.970 --> 00:12:03.700\nWe've got layer three information,\nlayer four being the transport.\n\n265\n00:12:03.700 --> 00:12:06.695\nNow, it's interesting because\nyou said You see HTTPS.\n\n266\n00:12:06.695 --> 00:12:09.955\nSo, even though we're seeing the transport\nlayer we can still see some of\n\n267\n00:12:09.955 --> 00:12:13.345\nthe application layer technologies\nthat are working in combination with\n\n268\n00:12:13.345 --> 00:12:14.165\nthe transport layer.\n\n269\n00:12:14.165 --> 00:12:14.915\n>> Yeah.\nAbsolutely.\n\n270\n00:12:14.915 --> 00:12:16.265\nI mean it's all right there in the header.\n\n271\n00:12:16.265 --> 00:12:17.825\nThis is how the systems know about it.\n\n272\n00:12:17.825 --> 00:12:19.845\nHow they learn to communicate that way.\n\n273\n00:12:19.845 --> 00:12:23.815\nAnd the cool part, here's where our\nprotocol analyzer comes in really handy,\n\n274\n00:12:23.815 --> 00:12:26.730\nis I know this is one piece\nof a bigger communication.\n\n275\n00:12:26.730 --> 00:12:30.430\nAnd this is an encrypted communication so\nit's kinda hard on this one, but you can\n\n276\n00:12:30.430 --> 00:12:35.060\nactually come up and find one of the\nframes as a part of that communication.\n\n277\n00:12:35.060 --> 00:12:39.260\nAnd if you right click on it, you'll see\nwhere I can do follow TCP stream and\n\n278\n00:12:39.260 --> 00:12:42.110\nit will try and\nreassemble that communication for me and\n\n279\n00:12:42.110 --> 00:12:45.830\nshow me everything that\nhappened in that exchange.\n\n280\n00:12:45.830 --> 00:12:48.650\nNow, if it's encrypted you see just\na bunch of junk like this where you might\n\n281\n00:12:48.650 --> 00:12:53.120\nsee individual notes every now and then\nthat are unencrypted which would usually\n\n282\n00:12:53.120 --> 00:12:56.940\nbe how we did a look up to find that\nserver or how we negotiated which\n\n283\n00:12:56.940 --> 00:13:00.180\nencryption protocol to use, that's\nthe kind of stuff that will show up there.\n\n284\n00:13:00.180 --> 00:13:03.460\n>> Do you see things like,\ncuz it's a knowledge service,\n\n285\n00:13:03.460 --> 00:13:06.580\ndo you see things like aa requests for\nre-transmission?\n\n286\n00:13:06.580 --> 00:13:10.000\nOr maybe checksum in there that said,\nhey we were expecting to see this and\n\n287\n00:13:10.000 --> 00:13:11.590\nit's not a good packet,\nresend the other one.\n\n288\n00:13:11.590 --> 00:13:12.890\nDo you see all that communication there?\n\n289\n00:13:12.890 --> 00:13:13.960\n>> Yeah, absolutely.\n\n290\n00:13:13.960 --> 00:13:18.100\nYou know here let's do something,\nthis is encrypted traffic so\n\n291\n00:13:18.100 --> 00:13:19.040\nthis is not gonna help me.\n\n292\n00:13:19.040 --> 00:13:21.440\nLet's generate some traffic\nthat's not encrypted,\n\n293\n00:13:21.440 --> 00:13:24.090\nsomething that's a little more basic,\nright?\n\n294\n00:13:24.090 --> 00:13:29.355\nSo, what I'm gonna do is two things, first\noff I'm gonna restart Start my capture.\n\n295\n00:13:29.355 --> 00:13:31.375\nSo I'll continue without saving there.\n\n296\n00:13:31.375 --> 00:13:33.965\nAnd I'm gonna generate a couple\nof different types of traffic.\n\n297\n00:13:33.965 --> 00:13:36.665\nSo, first off let me just\nfire up a web browser.\n\n298\n00:13:36.665 --> 00:13:39.075\nAnd I'm gonna browse to\na unencrypted web page.\n\n299\n00:13:39.075 --> 00:13:41.834\nI'm gonna browse to itpro.tv/test.\n\n300\n00:13:42.940 --> 00:13:47.280\nSlash index dot html, and you'll see\nthe most complex web page ever developed.\n\n301\n00:13:47.280 --> 00:13:48.820\n>> All right.\n>> Don's test page.\n\n302\n00:13:48.820 --> 00:13:49.830\nSo, here's a test page.\n\n303\n00:13:49.830 --> 00:13:51.850\nNow, this was just http right.\n\n304\n00:13:51.850 --> 00:13:53.040\nI sent a request to the server.\n\n305\n00:13:53.040 --> 00:13:55.170\nI said could I please\nhave a copy of this page.\n\n306\n00:13:55.170 --> 00:13:56.460\nThe server sent the message back.\n\n307\n00:13:56.460 --> 00:13:58.380\nI sent an acknowledgment saying I got it.\n\n308\n00:13:58.380 --> 00:14:00.780\nRight.\nAll of that happened\n\n309\n00:14:00.780 --> 00:14:04.320\nright here in the background as\nI went to go to the web page.\n\n310\n00:14:04.320 --> 00:14:04.950\nAll right.\n\n311\n00:14:04.950 --> 00:14:08.320\nAnd all of this was\ncaptured by wire shark.\n\n312\n00:14:08.320 --> 00:14:10.810\nAnd so it saw that happen and\nit recorded it.\n\n313\n00:14:10.810 --> 00:14:15.020\nIt's unencrypted, I'm gonna stop that and\nI'm just gonna add a little filter here,\n\n314\n00:14:15.020 --> 00:14:19.240\nactually I've already got that one filter,\nI'm gonna change that filter to just http\n\n315\n00:14:19.240 --> 00:14:23.940\nand I can look in here and try and find\nthe communication that I just did, right?\n\n316\n00:14:23.940 --> 00:14:27.310\nNow, I'm not exactly what the IP\naddress of that server is so\n\n317\n00:14:27.310 --> 00:14:30.710\nthat would probably be\na good place to start.\n\n318\n00:14:30.710 --> 00:14:33.381\nLet me do a quick NS lookup for itpro.tv.\n\n319\n00:14:33.381 --> 00:14:36.840\nAnd I would have gone to one of these IPs,\n192, 198, or 198,\n\n320\n00:14:36.840 --> 00:14:39.830\nso I'm going to look for\nthat communication in here.\n\n321\n00:14:39.830 --> 00:14:40.900\nHere's one right here.\n\n322\n00:14:40.900 --> 00:14:43.860\nOh, actually, I can see in the\ninterpretation, it's probably hard to see\n\n323\n00:14:43.860 --> 00:14:47.140\non the screen because it's white\ntext on a blue background, so it's\n\n324\n00:14:47.140 --> 00:14:51.610\nhard to see in real life, but it actually\nsays over here get/task/index.html.\n\n325\n00:14:51.610 --> 00:14:54.290\nThat was me going for\nthat index page, right?\n\n326\n00:14:54.290 --> 00:14:56.380\nAnd if you look at some of the other data,\n\n327\n00:14:56.380 --> 00:15:00.820\nthe raw data down here actually\nbecomes semi readable.\n\n328\n00:15:00.820 --> 00:15:01.400\nRight?\n\n329\n00:15:01.400 --> 00:15:05.140\nHere's the raw data in hexidecimal, but\nwhen we convert that over into letters and\n\n330\n00:15:05.140 --> 00:15:11.000\nnumbers, I can actually see the get\nrequest for /test/index.html.\n\n331\n00:15:11.000 --> 00:15:13.060\nAnd I can see the accepted connection.\n\n332\n00:15:13.060 --> 00:15:16.070\nAnd if I go and reassemble that stream,\n\n333\n00:15:16.070 --> 00:15:20.190\nwe can see that whole process\nwhere I send a get command.\n\n334\n00:15:20.190 --> 00:15:22.570\nI wanna get a copy of that webpage and\n\n335\n00:15:22.570 --> 00:15:25.490\nI gave them information\nabout my system System.\n\n336\n00:15:25.490 --> 00:15:27.210\nWhat browser I'm using.\n\n337\n00:15:27.210 --> 00:15:30.090\nWhat user name I'm using, right?\n\n338\n00:15:30.090 --> 00:15:32.480\nWhether I've got a cookie set, and so on.\n\n339\n00:15:32.480 --> 00:15:34.840\nAll of this stuff we pass\nwhen we use a web browser and\n\n340\n00:15:34.840 --> 00:15:35.760\nwe don't even normally know it.\n\n341\n00:15:35.760 --> 00:15:37.430\nIt's all in the background, right?\n\n342\n00:15:37.430 --> 00:15:41.580\nI asked for a simple unencrypted page And\nI set a good bit of information.\n\n343\n00:15:42.590 --> 00:15:44.090\nAnd then it responded.\n\n344\n00:15:44.090 --> 00:15:46.392\nOkay here, we'll give you the response.\n\n345\n00:15:46.392 --> 00:15:50.109\nAnd this is kind of neat because on\nthe ITTV site, we actually have a web\n\n346\n00:15:50.109 --> 00:15:54.273\nfirewall.And so, this is the web\nfirewall responding, not our web server.\n\n347\n00:15:54.273 --> 00:15:57.761\nSo I can see that here, which is kind\nof neat And then in the background,\n\n348\n00:15:57.761 --> 00:16:00.552\nI can see that get request\nthat's happening down here and\n\n349\n00:16:00.552 --> 00:16:02.370\nthe raw data that came along with it.\n\n350\n00:16:02.370 --> 00:16:06.810\nSo all of that stuff is being kinda\ntucked away and sent in the background.\n\n351\n00:16:06.810 --> 00:16:11.433\nAnd if I look at that stream up here, so\nI'm looking at the TCP stream as a whole,\n\n352\n00:16:11.433 --> 00:16:15.031\nyou'll see that it actually took\nseveral packets to do that.\n\n353\n00:16:15.031 --> 00:16:17.740\nHere is the original SYN, right?\n\n354\n00:16:17.740 --> 00:16:19.770\nRemember with a TCP connection\nyou do a handshake.\n\n355\n00:16:19.770 --> 00:16:23.254\nYou do a sync,\nthe other side does an acknowledgement and\n\n356\n00:16:23.254 --> 00:16:24.643\na sync to you and so on.\n\n357\n00:16:24.643 --> 00:16:25.863\nSo, I see that right next.\n\n358\n00:16:25.863 --> 00:16:30.719\nFirst, I have the SYN, the\nsynchronization, then I have a SYN ACK.\n\n359\n00:16:30.719 --> 00:16:35.370\nThe other side sent an acknowledgement\nto me and a sync to me.\n\n360\n00:16:35.370 --> 00:16:36.980\nAnd then I acknowledged their sync.\n\n361\n00:16:36.980 --> 00:16:40.110\nThat's the three way TCP handshake\njust happened right there.\n\n362\n00:16:40.110 --> 00:16:43.950\nAnd then I said, okay now that we've done\nthat, can I get a copy of this webpage?\n\n363\n00:16:43.950 --> 00:16:47.450\nAnd then the other side said,\nokay, I acknowledge your request.\n\n364\n00:16:47.450 --> 00:16:48.390\nHere's the copy of the webpage.\n\n365\n00:16:48.390 --> 00:16:51.580\nAnd then I send an acknowledgment\nsaying I got it.\n\n366\n00:16:51.580 --> 00:16:54.250\nThere's that whole\ncommunication right there.\n\n367\n00:16:54.250 --> 00:16:56.270\nAnd I can read it and\nsee it, so if somebody says,\n\n368\n00:16:56.270 --> 00:16:59.460\nI can't get to the web server and\nI ping the web server and\n\n369\n00:16:59.460 --> 00:17:01.440\nI can ping it just fine,\nwhat the heck's wrong with it?\n\n370\n00:17:01.440 --> 00:17:03.660\nWell, I could intercept the communication,\n\n371\n00:17:03.660 --> 00:17:07.770\nsee if there's a breakdown somewhere in\nhere, this information is really valuable.\n\n372\n00:17:07.770 --> 00:17:11.445\n>> Yeah, you know that's interesting that\nyou say that now it makes me want to get\n\n373\n00:17:11.445 --> 00:17:14.284\nthe tin hat out, you know,\nthe tinfoil hat and put that on and\n\n374\n00:17:14.284 --> 00:17:15.971\ncertainly not a security episode.\n\n375\n00:17:15.971 --> 00:17:17.900\nBut boy you definitely have to\nhave encrypted communications\n\n376\n00:17:17.900 --> 00:17:19.320\nif you don't want anybody seeing anything.\n\n377\n00:17:19.320 --> 00:17:19.991\n>> Yeah.\n\n378\n00:17:19.991 --> 00:17:23.406\nNow let's talk about something really\nimportant with these sniffers and\n\n379\n00:17:23.406 --> 00:17:24.820\nprotocol analyzers.\n\n380\n00:17:24.820 --> 00:17:29.290\nWhen I start capturing traffic, you guys\nmight notice a pattern to the traffic.\n\n381\n00:17:29.290 --> 00:17:30.620\nIf I'm capturing the data,\n\n382\n00:17:30.620 --> 00:17:33.610\nlet me get rid of this filter,\nI'm seeing a lot of communications.\n\n383\n00:17:33.610 --> 00:17:38.710\nI'm seeing communications that aren't from\nme like 10.1.230.5 right there, all right.\n\n384\n00:17:38.710 --> 00:17:41.578\nMy laptop is 10.1.230.21.\n\n385\n00:17:41.578 --> 00:17:46.370\nI'm seeing 10.1.230.5, so I must be\nseeing all the traffic out there, right?\n\n386\n00:17:46.370 --> 00:17:47.560\nWell, no.\n\n387\n00:17:47.560 --> 00:17:51.430\nWhen you run a sniffer,\nyou are only going to see traffic to and\n\n388\n00:17:51.430 --> 00:17:55.650\nfrom your device, and broadcasts.\n\n389\n00:17:55.650 --> 00:17:58.430\nAnd the reason that is, is because\nwe plug into switches these days.\n\n390\n00:17:58.430 --> 00:17:59.400\nIf you have a hub, it's different.\n\n391\n00:17:59.400 --> 00:18:03.940\nBut on a switch, a switch will see unicast\ntraffic and direct it to the right port,\n\n392\n00:18:03.940 --> 00:18:05.940\naccording to a destination MAC address.\n\n393\n00:18:05.940 --> 00:18:10.350\nAnd when somebody like 10.1.230.5\ngoes to talk to another computer,\n\n394\n00:18:10.350 --> 00:18:12.210\nit's not talking to my MAC address.\n\n395\n00:18:12.210 --> 00:18:16.220\nSo the traffic never makes it to\nmy port and I don't see it, right.\n\n396\n00:18:16.220 --> 00:18:21.081\nSo whenever I see a different IP here\nin the list, the destination address?\n\n397\n00:18:21.081 --> 00:18:24.921\nI can see broadcast, or 10.1.230.255.\n\n398\n00:18:24.921 --> 00:18:26.390\nThese are broadcast.\n\n399\n00:18:26.390 --> 00:18:31.280\nI'm only seeing unicast to and\nfrom me, and broadcast.\n\n400\n00:18:31.280 --> 00:18:34.345\nSo, if I want to want to see everything,\n\n401\n00:18:34.345 --> 00:18:37.135\nthis is where I've got to rely\non another troubleshooting tool.\n\n402\n00:18:37.135 --> 00:18:40.115\nWe have the switch port analyzer.\n\n403\n00:18:40.115 --> 00:18:41.195\nOn a Cisco switch,\n\n404\n00:18:41.195 --> 00:18:45.650\nyou've got a span which allows you to\nmirror the traffic of one port to another.\n\n405\n00:18:46.690 --> 00:18:49.030\nSo, for example, Wes, your laptop.\n\n406\n00:18:49.030 --> 00:18:51.001\n>> Yeah.\n>> Do you know what your IP is?\n\n407\n00:18:51.001 --> 00:18:55.330\n>> I think it is 10.1.239, or,\n\n408\n00:18:55.330 --> 00:18:59.750\nexcuse me, I'm sorry, 10.1-\n>> .230.195 I\n\n409\n00:18:59.750 --> 00:19:00.510\nthink is-\n>> I think\n\n410\n00:19:00.510 --> 00:19:01.490\nit's 195-\n>> Okay.\n\n411\n00:19:01.490 --> 00:19:02.050\n>> Yeah.\n\n412\n00:19:02.050 --> 00:19:04.487\nAll right.\nSo Wes is basically a,\n\n413\n00:19:04.487 --> 00:19:10.521\nI'm gonna say IP source=10.1.230.195.\n\n414\n00:19:10.521 --> 00:19:11.320\n>> That's it, yep.\n\n415\n00:19:11.320 --> 00:19:15.150\n>> So I'm now filtering for\ntraffic that he's generating.\n\n416\n00:19:15.150 --> 00:19:19.661\nAnd I'm gonna see the traffic that\nWes is generating on his system.\n\n417\n00:19:19.661 --> 00:19:23.022\nNow if I look at it,\nI see some traffic here from Wes\n\n418\n00:19:23.022 --> 00:19:27.361\nat 10.1.230.195 to 10.1.230.128.\n\n419\n00:19:27.361 --> 00:19:28.521\nWell that's not me.\n\n420\n00:19:28.521 --> 00:19:29.280\nWell, actually it is.\n\n421\n00:19:29.280 --> 00:19:31.560\nThat's my Windows virtual\nmachine sitting over here.\n\n422\n00:19:31.560 --> 00:19:34.220\nSo Wes has a little traffic going\nto my Windows virtual machine.\n\n423\n00:19:34.220 --> 00:19:38.210\nBut after that,\nI see Wes sending out some multicasts.\n\n424\n00:19:38.210 --> 00:19:42.220\nI see some other communications that are,\nagain, him talking to my virtual machine.\n\n425\n00:19:42.220 --> 00:19:45.500\nBut I don't see Wes talking\nto anything else, and Wes,\n\n426\n00:19:45.500 --> 00:19:47.830\nI can see you browse out to\nthe Internet and stuff, so.\n\n427\n00:19:47.830 --> 00:19:50.130\n>> Oh, yeah.\n>> He's browsed out to the Internet and\n\n428\n00:19:50.130 --> 00:19:51.680\nI'm not seeing that traffic.\n\n429\n00:19:51.680 --> 00:19:56.630\nBecause the switch is not directing him\nthrough my port, I can't see his data.\n\n430\n00:19:56.630 --> 00:19:59.030\nSo if I wanna see his information,\n\n431\n00:19:59.030 --> 00:20:03.300\nI need to do something like\nusing a switch port analyzer.\n\n432\n00:20:03.300 --> 00:20:05.490\nAnd I just kicked myself\nout of the console.\n\n433\n00:20:05.490 --> 00:20:07.750\nAnd I'm gonna get in here and\nget that set up.\n\n434\n00:20:07.750 --> 00:20:11.950\nSo I'm plugged into port one on this\nswitch, and Wes is plugged into port two.\n\n435\n00:20:11.950 --> 00:20:14.050\nAnd so what I'm gonna do is I'm\njust gonna come in here and\n\n436\n00:20:14.050 --> 00:20:18.600\ntell it to take traffic on port two and\nmirror it to my port so I get a copy.\n\n437\n00:20:18.600 --> 00:20:21.950\nAnd we do that by saying monitor session,\nand we give it a number,\n\n438\n00:20:21.950 --> 00:20:23.110\nI'll say monitor session 1.\n\n439\n00:20:23.110 --> 00:20:30.960\nAnd then I'll do source interface gi1/0/2,\nthat's the port he's on.\n\n440\n00:20:30.960 --> 00:20:34.906\nAnd then I'll come back in here and\nI'll just say the destination\n\n441\n00:20:34.906 --> 00:20:39.165\ninterface is gi1/0/1.\n\n442\n00:20:39.165 --> 00:20:43.050\nI'm gonna take a copy of all\nthe traffic it generates and\n\n443\n00:20:43.050 --> 00:20:45.430\nsend it to the port that I'm\nplugged in on, all right.\n\n444\n00:20:45.430 --> 00:20:50.850\nAnd so now if Wes starts doing something\nlike, Wes can you browse to CNN or\n\n445\n00:20:50.850 --> 00:20:55.180\nany website that's out there, or\nmy test page or whatever you want.\n\n446\n00:20:55.180 --> 00:20:59.350\nNow as he starts to browse out, I'm gonna\nstart seeing unicast, oh there it goes,\n\n447\n00:20:59.350 --> 00:21:01.130\nlet me stop this because it's getting,\ngonna be a lot.\n\n448\n00:21:01.130 --> 00:21:03.890\nThere, I can see him browsing out,\nand here's his IP and\n\n449\n00:21:03.890 --> 00:21:06.280\nhe's talking to someone\ncompletely different, right.\n\n450\n00:21:06.280 --> 00:21:08.990\nThat's really important if\nyou're going to use a sniffer or\n\n451\n00:21:08.990 --> 00:21:13.420\na protocol analyzer you really need\nto be using SPAN also to capture\n\n452\n00:21:13.420 --> 00:21:14.980\nthe port that has the data you want.\n\n453\n00:21:14.980 --> 00:21:17.820\nIf you want to see the whole picture,\nall right.\n\n454\n00:21:17.820 --> 00:21:19.670\nWe talked about this\na lot in the switch show.\n\n455\n00:21:19.670 --> 00:21:21.260\nIf you haven't watched\nthe switch show jump over there.\n\n456\n00:21:21.260 --> 00:21:23.980\nWe did a whole episode on SPAN and RSPAN.\n\n457\n00:21:23.980 --> 00:21:28.010\nHere I'm highlighting more of the sniffer\nand protocol analyzer than I am the SPAN\n\n458\n00:21:28.010 --> 00:21:31.250\nside of things, but it is an important\ntool to be able to capture data.\n\n459\n00:21:31.250 --> 00:21:35.420\nAnd we'll see this later on in the show,\ntoo, as we troubleshoot particular areas\n\n460\n00:21:35.420 --> 00:21:37.550\nwhere it's pretty handy to\nhave a sniffer like this.\n\n461\n00:21:37.550 --> 00:21:38.170\n>> Very good.\nSo,\n\n462\n00:21:38.170 --> 00:21:40.690\nwe've got our collection agency, right?\n\n463\n00:21:40.690 --> 00:21:42.180\nWe've got the sniffer.\n\n464\n00:21:42.180 --> 00:21:45.260\nThe collection agency by itself,\nthe sniffer's not really gonna do us much\n\n465\n00:21:45.260 --> 00:21:47.670\nhelp unless we have some kind\nof way to interpret that data.\n\n466\n00:21:47.670 --> 00:21:49.090\nSo we have the protocol analyzer.\n\n467\n00:21:49.090 --> 00:21:52.860\nThe protocol analyzer is going to\nhelp us actually be able to see and\n\n468\n00:21:52.860 --> 00:21:55.220\nmake some kind of sense of\nwhat that information is.\n\n469\n00:21:55.220 --> 00:21:57.490\nAnd then we have that\nswitchboard analyzer.\n\n470\n00:21:57.490 --> 00:21:58.810\nAll have to work together.\n\n471\n00:21:58.810 --> 00:22:00.110\nAnd if we don't have it together,\n\n472\n00:22:00.110 --> 00:22:03.810\nit might be a little bit tough to\nget the results that you need.\n\n473\n00:22:03.810 --> 00:22:05.110\n>> Yep, and if you're in a bind and\n\n474\n00:22:05.110 --> 00:22:10.120\nyou just need something really quick,\ndon't forget debug IP packets detail.\n\n475\n00:22:10.120 --> 00:22:13.880\nWe saw it in the first or second episode\nwhere we were able to run that and\n\n476\n00:22:13.880 --> 00:22:17.130\nsee a lot of the communications,\nyou don't see the payload, but you are at\n\n477\n00:22:17.130 --> 00:22:20.990\nleast able to see source port, destination\nport and that basic information.\n\n478\n00:22:20.990 --> 00:22:24.530\nAnd you can log that and get it\nrecorded and you can filter it, right?\n\n479\n00:22:24.530 --> 00:22:25.950\nAlways use filtering with that command.\n\n480\n00:22:25.950 --> 00:22:27.770\nIf you have a lot of traffic you're\ngoing to flood your session.\n\n481\n00:22:27.770 --> 00:22:33.200\nSo just be aware that that's kind of like\na sniffer, but it's a little more limited.\n\n482\n00:22:33.200 --> 00:22:34.030\nYou don't see that payload.\n\n483\n00:22:34.030 --> 00:22:36.140\nAnd then there actually is a way\nto make it show the payload.\n\n484\n00:22:36.140 --> 00:22:39.380\nIt is a terrible idea though because\nyou absolutely will overwhelm your\n\n485\n00:22:39.380 --> 00:22:40.280\nsession, so.\n\n486\n00:22:40.280 --> 00:22:42.175\n>> More verbose information than you need.\n\n487\n00:22:42.175 --> 00:22:43.590\n>> Mm-hm.\n>> And then what have you really done?\n\n488\n00:22:43.590 --> 00:22:45.962\nYou've actually made harder, harder for\nyou, more work for yourself.\n\n489\n00:22:45.962 --> 00:22:46.620\n>> [LAUGH] Absolutely.\n\n490\n00:22:46.620 --> 00:22:47.830\n>> Right?\nIt's definitely not going to be\n\n491\n00:22:47.830 --> 00:22:49.540\nthe least amount of administrative effort.\n\n492\n00:22:49.540 --> 00:22:52.230\nWe're probably going to add\na lot complexity to it, right?\n\n493\n00:22:52.230 --> 00:22:53.790\n>> Absolutely.\n>> All right, well very good.\n\n494\n00:22:53.790 --> 00:22:56.150\nDon do you have anything else\nthat we need to know about?\n\n495\n00:22:56.150 --> 00:22:57.990\nThings like the switch port analyzer,\n\n496\n00:22:57.990 --> 00:23:01.630\nor wire, well not Wireshark,\nprotocol analyzers?\n\n497\n00:23:01.630 --> 00:23:04.390\n>> Yeah, just a couple little\nfactoids to throw out at the end.\n\n498\n00:23:04.390 --> 00:23:06.670\nWireshark is completely free so\nthe price is right.\n\n499\n00:23:06.670 --> 00:23:07.970\nIf you haven't used it\ndefinitely try it out.\n\n500\n00:23:07.970 --> 00:23:10.180\nThere's plenty of other ones\nthat are out there though.\n\n501\n00:23:10.180 --> 00:23:15.860\nI used to use Network General Sniffer Pro\na lot and the Fluke network inspectors.\n\n502\n00:23:15.860 --> 00:23:18.240\nAnd those devices are amazing.\n\n503\n00:23:18.240 --> 00:23:20.880\nSo there's plenty of other\nsolutions out there.\n\n504\n00:23:20.880 --> 00:23:22.110\nBut if you're just trying to learn and\n\n505\n00:23:22.110 --> 00:23:25.150\nyou don't have a big budget Wireshark's\nfree and it does a great job.\n\n506\n00:23:25.150 --> 00:23:27.000\nYou'll actually see\npictures of it on the exam.\n\n507\n00:23:27.000 --> 00:23:29.790\nIt's kind of funny so,\ndefinitely think about that.\n\n508\n00:23:29.790 --> 00:23:33.760\nA few other things to remember,\nthe instant I started sniffing that port\n\n509\n00:23:33.760 --> 00:23:37.700\nerror, this instant I configured SPAN,\nit shut my port off.\n\n510\n00:23:37.700 --> 00:23:40.030\nSo my laptop can't get out\nto the Internet anymore.\n\n511\n00:23:40.030 --> 00:23:43.550\nI can't browse the network because\nI'm now tied up in a SPAN port.\n\n512\n00:23:43.550 --> 00:23:47.770\nSo, it's important that if you\nstill need your own access,\n\n513\n00:23:47.770 --> 00:23:49.570\nthat you get a second network adapter,\nright?\n\n514\n00:23:49.570 --> 00:23:52.000\nSo I've got wireless,\nI turned the wireless on on my laptop, and\n\n515\n00:23:52.000 --> 00:23:52.990\nthen I can get out.\n\n516\n00:23:52.990 --> 00:23:56.070\nBut on my physical network adapter\nit's now tied up as part of that\n\n517\n00:23:56.070 --> 00:23:57.250\nmonitor session.\n\n518\n00:23:57.250 --> 00:24:00.270\nAnd so\nI need to remove the monitor session\n\n519\n00:24:00.270 --> 00:24:02.770\nto free my port back up to\nbe able to communicate.\n\n520\n00:24:02.770 --> 00:24:06.230\nSo, you may need to keep a console cable\nhandy, if you've done like I have and\n\n521\n00:24:06.230 --> 00:24:10.100\nbasically cut myself out of the network,\nI can hit the console and fix that.\n\n522\n00:24:10.100 --> 00:24:13.390\nOr go to somebody else's computer and\nenter enough to get out there.\n\n523\n00:24:13.390 --> 00:24:16.180\nThere is a command you can use to make it\nwhere you are able to communicate, but\n\n524\n00:24:16.180 --> 00:24:18.610\nthat's a bad idea because it kind\nof poisons your sniffer logs.\n\n525\n00:24:18.610 --> 00:24:20.651\nSo you don't normally want to do that.\n\n526\n00:24:20.651 --> 00:24:23.760\nThe other thing is be careful\nabout bandwidth, right?\n\n527\n00:24:23.760 --> 00:24:26.110\nI am on a gigabit port.\n\n528\n00:24:26.110 --> 00:24:29.110\nI'm sniffing a gigabit port,\nso we're equal, right?\n\n529\n00:24:29.110 --> 00:24:33.270\nNo matter how much traffic Wes generates,\nif he generates up to a gig of traffic,\n\n530\n00:24:33.270 --> 00:24:34.380\nI can handle that.\n\n531\n00:24:34.380 --> 00:24:37.960\nBut if I'm allowed to talk also,\ncombined we might exceed a gig.\n\n532\n00:24:37.960 --> 00:24:40.200\nAnd that will cause my port to go\ninto the error disabled state.\n\n533\n00:24:40.200 --> 00:24:41.060\nAnd now I can't do anything.\n\n534\n00:24:41.060 --> 00:24:43.080\nIt actually caused your port\nto go error disabled too.\n\n535\n00:24:43.080 --> 00:24:44.455\nSo it'll annoy the hell out of you.\n\n536\n00:24:44.455 --> 00:24:44.960\n>> [LAUGH]\n>> And so\n\n537\n00:24:44.960 --> 00:24:47.800\nif you're trying to do this secretly,\nthat's not a good idea.\n\n538\n00:24:47.800 --> 00:24:50.010\nSo make sure you've got enough\nbandwidth to handle it.\n\n539\n00:24:50.010 --> 00:24:53.860\nIf you have a gig port you want to monitor\nand you're plugged in to a 100 meg port,\n\n540\n00:24:53.860 --> 00:24:55.246\nit's a recipe for disaster.\n\n541\n00:24:55.246 --> 00:24:58.666\nIt'll go into air disable, and you'll\nhave to clear it out, so not a good time.\n\n542\n00:24:58.666 --> 00:25:02.975\n>> All right, plenty of good information\nhere with our iOS troubleshooting tools.\n\n543\n00:25:02.975 --> 00:25:06.855\nIt looks like we're going into a part\nthree, so come back and join us.\n\n544\n00:25:06.855 --> 00:25:09.532\nBut until then,\nI've been you're host Wes Bryan.\n\n545\n00:25:09.532 --> 00:25:10.412\n>> And I'm Don Pezet.\n\n546\n00:25:10.412 --> 00:25:13.312\n>> And we'll see you next time.\n\n547\n00:25:13.312 --> 00:25:18.592\n[MUSIC]\n\n",
          "vimeoId": "145146766"
        },
        {
          "description": "In this episode Don and Wes continue their discussion on troubleshooting tools. They show you the logging command. They demonstrate how not to be limited with temporary logging and export valuable information to an outside location through the syslog command. They look at automating configuration backups and exporting those backups through the archive command. They will also demonstrate how to restore those configurations.",
          "length": "1634",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-1-troubleshooting_tools_pt3-102215-high.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-1-troubleshooting_tools_pt3-102215-high-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-1-troubleshooting_tools_pt3-102215-high-sm.jpg",
          "title": "Troubleshooting Tools Part 3",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:12.403 --> 00:00:16.360\nWelcome back to another exciting\nepisode here at ITProTV.\n\n3\n00:00:16.360 --> 00:00:18.210\nWe know your time's valuable out there, so\n\n4\n00:00:18.210 --> 00:00:20.440\nwe're glad that you're\ncashing it in with us.\n\n5\n00:00:20.440 --> 00:00:24.270\nAnd we're continuing on in\niOS troubleshooting tools and\n\n6\n00:00:24.270 --> 00:00:28.650\nwho better to help demonstrate these\ntools than none other than Don Pezet.\n\n7\n00:00:28.650 --> 00:00:29.630\nHow are we doing today, Don?\n\n8\n00:00:29.630 --> 00:00:34.140\n>> I am doing great Wes, ready to continue\nour iOS troubleshooting tools adventure.\n\n9\n00:00:34.140 --> 00:00:35.520\nI know we've covered\na lot of good stuff so\n\n10\n00:00:35.520 --> 00:00:38.050\nfar but we've got some other neat\nthings we're gonna deal with today.\n\n11\n00:00:38.050 --> 00:00:41.270\nMostly, the fact that there's a lot of\ngood information on our routers and\n\n12\n00:00:41.270 --> 00:00:42.100\nswitches.\n\n13\n00:00:42.100 --> 00:00:43.720\nAnd sometimes,\nwe need to get it off of there,\n\n14\n00:00:43.720 --> 00:00:47.640\nget it somewhere else that we can use it\nin a more centralized store type location.\n\n15\n00:00:47.640 --> 00:00:50.040\nSo we'll get a chance,\nsee a few of those different things,\n\n16\n00:00:50.040 --> 00:00:53.770\nwe move through and continue to work\nwith our troubleshooting tools.\n\n17\n00:00:53.770 --> 00:00:58.020\nNow, the one I want to start off\nwith today are our log files, right.\n\n18\n00:00:58.020 --> 00:01:01.910\nEvery Cisco router and\nevery Cisco switch generates log files.\n\n19\n00:01:01.910 --> 00:01:03.350\nAnd I shouldn't say it that way.\n\n20\n00:01:03.350 --> 00:01:05.320\nThey generate log messages.\n\n21\n00:01:05.320 --> 00:01:07.480\nAnd the log messages can be\nstored in different places.\n\n22\n00:01:07.480 --> 00:01:09.590\nIt might be a file, it might not, right.\n\n23\n00:01:09.590 --> 00:01:13.148\nSo, they're gonna generate log files\nthat keep a record of what's happened.\n\n24\n00:01:13.148 --> 00:01:16.700\nAnd we troubleshoot the log files\non one of those troubleshooting\n\n25\n00:01:16.700 --> 00:01:18.430\ntools that we want to make use of.\n\n26\n00:01:18.430 --> 00:01:21.490\nWe wanna jump in and find out\nwhat's going on from the routers or\n\n27\n00:01:21.490 --> 00:01:22.390\nswitches perspective.\n\n28\n00:01:22.390 --> 00:01:23.181\nAnd they let us do that.\n\n29\n00:01:23.181 --> 00:01:26.817\n>> All right, Don,\nnow you mentioned logs and storage logs.\n\n30\n00:01:26.817 --> 00:01:30.030\nNow, when it comes to these logs and all\nthis information, where can we find that?\n\n31\n00:01:30.030 --> 00:01:31.910\nWhere is that information stored?\n\n32\n00:01:31.910 --> 00:01:33.661\n>> Well, it kinda depends on the device.\n\n33\n00:01:33.661 --> 00:01:35.640\nBut it's supposed to be stored in RAM,\nright?\n\n34\n00:01:35.640 --> 00:01:39.090\nSo when your router, your switch generates\nthese log messages, it sticks in RAM and\n\n35\n00:01:39.090 --> 00:01:40.650\nthat's kinda where it sits.\n\n36\n00:01:40.650 --> 00:01:43.590\nBut there's some devices where it doesn't\nstore it anywhere, some devices actually\n\n37\n00:01:43.590 --> 00:01:46.650\ndon't save their logs and\nthey only display it on the console.\n\n38\n00:01:46.650 --> 00:01:51.660\nSo if you happen to be plugged in to the\nconsole at that time, you see the message.\n\n39\n00:01:51.660 --> 00:01:53.810\nOtherwise, it disappears and that's it.\n\n40\n00:01:53.810 --> 00:01:57.840\nAll right, so one of the first commands\nthat I usually issue on a new device is\n\n41\n00:01:57.840 --> 00:01:59.700\nthe logging buffered command.\n\n42\n00:01:59.700 --> 00:02:02.700\nLet me just show you here\non this switch that I'm on.\n\n43\n00:02:02.700 --> 00:02:05.217\nSo if I jump into config,\nI can run logging buffered, all right.\n\n44\n00:02:05.217 --> 00:02:07.460\nAnd what does that mean?\n\n45\n00:02:07.460 --> 00:02:10.861\nThat means whenever it generates\na log message, stick into RAM.\n\n46\n00:02:10.861 --> 00:02:16.130\nAnd so now, when I do a show logging,\nI can see my log messages.\n\n47\n00:02:16.130 --> 00:02:19.390\nAnd if you ever hit your Space bar here\nand you get absolutely nothing back,\n\n48\n00:02:19.390 --> 00:02:20.380\nthat means it's not logging.\n\n49\n00:02:20.380 --> 00:02:22.990\nBut if you hit your Space bar and\nyou start seeing messages like this,\n\n50\n00:02:22.990 --> 00:02:25.800\nthen it's been logging to RAM and\nthat's great, right?\n\n51\n00:02:25.800 --> 00:02:28.560\nWe've got all the information right\nhere and that's a wonderful things for\n\n52\n00:02:28.560 --> 00:02:32.430\ntroubleshooting until\nyou reboot the device.\n\n53\n00:02:32.430 --> 00:02:35.750\nBecause what happens when we reboot\nthe device, RAM gets erased and\n\n54\n00:02:35.750 --> 00:02:37.130\nthese logs are now gone.\n\n55\n00:02:37.130 --> 00:02:40.301\nAnd so if you are troubleshooting\nsomething like a device crash,\n\n56\n00:02:40.301 --> 00:02:42.330\nthis becomes really challenging.\n\n57\n00:02:42.330 --> 00:02:46.680\nAnd I had just a few years ago, they were,\nactually it was this same model of switch,\n\n58\n00:02:46.680 --> 00:02:52.240\nthis 3750, where we had rolled out\njust a few of them, about 200 of them.\n\n59\n00:02:52.240 --> 00:02:56.250\nAnd I noticed this consistent behavior\nwhere they were locking up every\n\n60\n00:02:56.250 --> 00:02:57.390\ntwo weeks.\n\n61\n00:02:57.390 --> 00:03:00.480\nAnd I thought it was really odd that\nwe were just seeing it consistently\n\n62\n00:03:00.480 --> 00:03:01.960\nacross 200 of these switches.\n\n63\n00:03:01.960 --> 00:03:03.780\nEvery one of them locking\nup about every two weeks.\n\n64\n00:03:03.780 --> 00:03:07.300\nNot the same time but\nat two week intervals.\n\n65\n00:03:07.300 --> 00:03:11.350\nAnd one would lock up and\nI couldn't SSH into it.\n\n66\n00:03:11.350 --> 00:03:13.220\nI couldn't remotely connect to it.\n\n67\n00:03:13.220 --> 00:03:17.420\nI had to have somebody out of the location\nreboot the device and then I could get in.\n\n68\n00:03:17.420 --> 00:03:20.510\nBut once it was rebooted,\nthe log messages were gone.\n\n69\n00:03:20.510 --> 00:03:23.830\nI couldn't see what had happened and\nthen the device would run fine for\n\n70\n00:03:23.830 --> 00:03:24.810\ntwo weeks again.\n\n71\n00:03:24.810 --> 00:03:25.920\nThat was a real challenge.\n\n72\n00:03:25.920 --> 00:03:29.870\nLike, how do we isolate what that problem\nis when we lose our information every\n\n73\n00:03:29.870 --> 00:03:30.900\ntime it reboots.\n\n74\n00:03:30.900 --> 00:03:34.150\nSo that's one of the big challenges\nwe have that it is logging to memory\n\n75\n00:03:34.150 --> 00:03:37.970\nby default, so a lot of times we\nwant to take these log files and\n\n76\n00:03:37.970 --> 00:03:41.510\nsend them somewhere else so\nthey can survive a reboot.\n\n77\n00:03:41.510 --> 00:03:46.230\nNow you can actually configure it to log\nto the internal flash, it's not a great\n\n78\n00:03:46.230 --> 00:03:48.920\nidea though cuz it does create a bit\nperformance hit on the system,\n\n79\n00:03:48.920 --> 00:03:50.750\nwriting to flash is not very effective.\n\n80\n00:03:50.750 --> 00:03:52.190\nAnd you can fill up your flash.\n\n81\n00:03:52.190 --> 00:03:55.872\nSo normally,\nwe'd log to an external system.\n\n82\n00:03:55.872 --> 00:04:01.560\nAnd syslog is a system that is\nwidely used throughout computing and\n\n83\n00:04:01.560 --> 00:04:02.830\nCisco supports it.\n\n84\n00:04:02.830 --> 00:04:05.870\nSo all of these messages here\nare just standard event messages and\n\n85\n00:04:05.870 --> 00:04:10.410\nwe can send them to a syslog server and\nhave the data get recorded there.\n\n86\n00:04:10.410 --> 00:04:12.000\nConfiguring it is pretty easy.\n\n87\n00:04:12.000 --> 00:04:14.760\nThere's really two steps\nto configuring syslog.\n\n88\n00:04:14.760 --> 00:04:17.480\nThe first step is sorting\nout our time stamps.\n\n89\n00:04:17.480 --> 00:04:18.400\nTime stamps are pretty important.\n\n90\n00:04:18.400 --> 00:04:21.710\nAnd then the second step is actually\nconfiguring the syslog server itself.\n\n91\n00:04:21.710 --> 00:04:24.420\nNow the reason I say\nthe time stamp is important.\n\n92\n00:04:24.420 --> 00:04:26.450\nWhen I look at the log files here,\n\n93\n00:04:26.450 --> 00:04:30.740\nI'm seeing the logs as it\npertains to this switch.\n\n94\n00:04:30.740 --> 00:04:35.932\nAnd if I do a show clock, oh,\nI've got to go do show clock, there we go,\n\n95\n00:04:35.932 --> 00:04:41.062\nI can see that this switch thinks\nthat is February 28th, 1993.\n\n96\n00:04:41.062 --> 00:04:42.462\nNow obviously that's wrong, right.\n\n97\n00:04:42.462 --> 00:04:46.130\nI know it's wrong because if I\nlook at the version of my iOS.\n\n98\n00:04:46.130 --> 00:04:49.150\nI can see that it was\ncompiled February 11th, 2015.\n\n99\n00:04:49.150 --> 00:04:56.350\nSo, this was compiled 22 years after the\ndate that this thing thinks that it is.\n\n100\n00:04:56.350 --> 00:04:58.740\nSo the clock is obviously\nwrong on this switch.\n\n101\n00:04:58.740 --> 00:04:59.670\nNow do I care about that?\n\n102\n00:05:00.710 --> 00:05:01.420\nNot really.\n\n103\n00:05:01.420 --> 00:05:05.820\nNot on this one switch, right, because\nwhen I look at the logs I see, all right,\n\n104\n00:05:05.820 --> 00:05:10.630\nthis says it was February 28th\nat hours of 8:27 PM, right?\n\n105\n00:05:10.630 --> 00:05:12.640\nBut, what does that mean to me?\n\n106\n00:05:12.640 --> 00:05:16.339\nWell, in terms of the switch, I can\njust do a quick show clock, and I see,\n\n107\n00:05:16.339 --> 00:05:20.971\nall right, so right now it thinks that\nit's 9:01 PM, on February 28th, 1993.\n\n108\n00:05:20.971 --> 00:05:23.152\nSo, this was less than an hour ago.\n\n109\n00:05:23.152 --> 00:05:25.605\nOr actually, I guess it would be\na little bit more than an hour ago.\n\n110\n00:05:25.605 --> 00:05:27.305\nSo, I can put it into a perspective.\n\n111\n00:05:27.305 --> 00:05:29.055\nI know when that happened.\n\n112\n00:05:29.055 --> 00:05:31.668\nBut, if I am sending this\nto a syslog server and\n\n113\n00:05:31.668 --> 00:05:34.554\nI have got 200 switches\nall sending their data.\n\n114\n00:05:34.554 --> 00:05:37.601\nAnd routers and firewalls all sending\ntheir data to the syslog server,\n\n115\n00:05:37.601 --> 00:05:40.090\nI need to make sure\nthese times are in sync.\n\n116\n00:05:40.090 --> 00:05:42.710\nI need to make sure that my clocks\nare the same across my systems,\n\n117\n00:05:42.710 --> 00:05:44.920\nthat they're reporting their time zone.\n\n118\n00:05:44.920 --> 00:05:49.610\nOr that they're using a zero time zone,\nlike a Zulu time, what is it,\n\n119\n00:05:49.610 --> 00:05:50.920\nthe Greenwich Mean Time.\n\n120\n00:05:50.920 --> 00:05:51.961\n>> Mean Time, yep.\n\n121\n00:05:51.961 --> 00:05:52.821\n>> UTC, there we go.\n\n122\n00:05:52.821 --> 00:05:53.481\nUniversal Time Code.\n\n123\n00:05:53.481 --> 00:05:54.343\n>> Yep, Universal Time Code.\n\n124\n00:05:54.343 --> 00:05:56.373\n>> So I gotta make sure that they're\nusing something like that so\n\n125\n00:05:56.373 --> 00:05:59.560\nI can understand the time stamps\nbetween all the different devices.\n\n126\n00:05:59.560 --> 00:06:03.300\nSo when we configure things like syslog,\none of the first steps that I do is to\n\n127\n00:06:03.300 --> 00:06:06.260\nmake sure that I get these time\nstamps straight and in order.\n\n128\n00:06:06.260 --> 00:06:08.420\nSo that's what I'm gonna\ndo on this system.\n\n129\n00:06:08.420 --> 00:06:11.830\nThe first thing I'm gonna do is I'm gonna\nset myself up to use a time server.\n\n130\n00:06:11.830 --> 00:06:14.130\nNow, you may have a time\nserver on your network or\n\n131\n00:06:14.130 --> 00:06:16.360\nyou might use a public\none that's out there.\n\n132\n00:06:16.360 --> 00:06:18.240\nSo I'm just gonna use a public one.\n\n133\n00:06:18.240 --> 00:06:21.518\nSo I'll say ntp server and\n\n134\n00:06:21.518 --> 00:06:27.631\nthen you can specify like us.pool.ntp.org.\n\n135\n00:06:27.631 --> 00:06:30.800\nThere's several different\npublic NTP servers you can use.\n\n136\n00:06:30.800 --> 00:06:32.200\nYou can always build up\nyour own private one.\n\n137\n00:06:32.200 --> 00:06:34.710\nWe talked about this I think in the route\n\n138\n00:06:34.710 --> 00:06:37.440\nshow we talk about how to set\nup a your own time server.\n\n139\n00:06:37.440 --> 00:06:39.930\nBut I'm gonna specify a server like\nthat and it's gonna reach out.\n\n140\n00:06:39.930 --> 00:06:43.210\nAnd, oh shoot,\nI don't have a DNS Server defined so\n\n141\n00:06:43.210 --> 00:06:46.010\nI need to give it a name-server so\nit can look that up.\n\n142\n00:06:46.010 --> 00:06:49.760\nSo I'll specify one of those and\nlet's try that again.\n\n143\n00:06:49.760 --> 00:06:53.310\nNot looking up, let's drop the us part.\n\n144\n00:06:53.310 --> 00:06:54.720\nAnd, well shoot.\n\n145\n00:06:54.720 --> 00:06:55.916\nYou know what,\nlet me just use an internal one.\n\n146\n00:06:55.916 --> 00:06:59.970\nSo, [LAUGH] sometimes we\njust have to go internal.\n\n147\n00:06:59.970 --> 00:07:01.196\nThere we go.\n[LAUGH] All right, so\n\n148\n00:07:01.196 --> 00:07:04.459\nnow my system's gonna start reaching\nout to this internal server and\n\n149\n00:07:04.459 --> 00:07:06.055\ngetting its time, right?\n\n150\n00:07:06.055 --> 00:07:07.475\nAnd so it's gonna synchronize it, and\n\n151\n00:07:07.475 --> 00:07:09.595\nwithin the next few moments\nthat should happen.\n\n152\n00:07:09.595 --> 00:07:13.378\nAnd so if I do a show clock, I should\nsee my time update and sure enough,\n\n153\n00:07:13.378 --> 00:07:16.087\nit now knows that it's October 22, 2015.\n\n154\n00:07:16.087 --> 00:07:18.165\nAt least I'm in the right decade now.\n\n155\n00:07:18.165 --> 00:07:20.377\nAnd it shows the time.\n\n156\n00:07:20.377 --> 00:07:25.217\nNow the time, see how it's reflecting\n10:58 Eastern Daylight Time.\n\n157\n00:07:25.217 --> 00:07:27.847\nHow did it know that this\nwas Eastern Daylight Time?\n\n158\n00:07:27.847 --> 00:07:29.929\nWell, you may or\nmay not already have this in your config.\n\n159\n00:07:29.929 --> 00:07:31.907\nI do.\n\n160\n00:07:31.907 --> 00:07:35.777\nIf I take a look at my running config,\nand I'm just gonna look for\n\n161\n00:07:35.777 --> 00:07:37.510\nsome clock commands that I threw in there.\n\n162\n00:07:37.510 --> 00:07:40.780\nYou'll see where I've\ndefined a time zone and\n\n163\n00:07:40.780 --> 00:07:43.730\nI've defined daylight savings time, right.\n\n164\n00:07:43.730 --> 00:07:46.413\nAnd we saw those in the route show and\neven in the CCNA show, we've seen those,\n\n165\n00:07:46.413 --> 00:07:47.522\nthose have been around a while.\n\n166\n00:07:47.522 --> 00:07:50.857\nBut I've defined them so that my device\nwould know what time zone it was in.\n\n167\n00:07:50.857 --> 00:07:55.660\nNow where that creates a problem is if I\nhave devices in more than one time zone\n\n168\n00:07:55.660 --> 00:07:59.637\nwhen you generate log messages,\nright, so if I do a show log And\n\n169\n00:07:59.637 --> 00:08:01.756\nI take a look at what's in there.\n\n170\n00:08:01.756 --> 00:08:04.228\nIt tells me the time zone.\n\n171\n00:08:04.228 --> 00:08:09.060\nIt doesn't tell you the time zone by\ndefault, I told it to do that, all right?\n\n172\n00:08:09.060 --> 00:08:11.660\nSo that when I looked at log\nfiles from more than one device,\n\n173\n00:08:11.660 --> 00:08:13.210\nI would know what time zone it was in.\n\n174\n00:08:13.210 --> 00:08:16.290\nNow, you got a few different\nchoices how you wanna handle that.\n\n175\n00:08:16.290 --> 00:08:21.190\nIf I take a look at my config,\nI actually put this line in right here,\n\n176\n00:08:21.190 --> 00:08:26.350\nservice time stamps log, date time.\n\n177\n00:08:26.350 --> 00:08:29.230\nSo right, in my logs I wanna\nhave the date and time, and\n\n178\n00:08:29.230 --> 00:08:31.480\nI put to make it the local time.\n\n179\n00:08:31.480 --> 00:08:34.020\nIf I leave that off, it will do UTC.\n\n180\n00:08:34.020 --> 00:08:37.290\nSo you might want UTC, and that is fine,\nbut I chose to do local time.\n\n181\n00:08:37.290 --> 00:08:41.610\nAnd because I did that,\nI made sure to add show-timezone, so\n\n182\n00:08:41.610 --> 00:08:44.340\nthat it would include what\nthe timezone was in the file.\n\n183\n00:08:44.340 --> 00:08:46.090\nSo now when I'm looking\nat my syslog server and\n\n184\n00:08:46.090 --> 00:08:48.780\nI see all these different times,\nI can recognize what timezone it's in.\n\n185\n00:08:50.000 --> 00:08:53.150\nAll that being said, it might be\neasier just to leave it in UTC.\n\n186\n00:08:53.150 --> 00:08:54.010\nThen you're taken care of.\n\n187\n00:08:54.010 --> 00:08:57.460\nBut at this point, now my log files,\nlike if I get out of config,\n\n188\n00:08:57.460 --> 00:09:00.780\nthat's gonna generate a log message,\nand I'm SSHT so I'm not gonna see it.\n\n189\n00:09:00.780 --> 00:09:02.300\nLet me do a little terminal monitor.\n\n190\n00:09:02.300 --> 00:09:05.200\nI guess it's already too late here but\nif I do a show log and\n\n191\n00:09:05.200 --> 00:09:09.590\nI get to the end here's the logs that\nwere on my system from before and\n\n192\n00:09:09.590 --> 00:09:12.430\nnow that my clock is right,\nI can see this guy.\n\n193\n00:09:12.430 --> 00:09:14.240\nIt's got the right time\nzone Eastern Time Zone.\n\n194\n00:09:14.240 --> 00:09:16.480\nIt's got the right date and time.\n\n195\n00:09:16.480 --> 00:09:16.980\nAll right.\n\n196\n00:09:16.980 --> 00:09:18.920\nSo, I'm good there.\n\n197\n00:09:18.920 --> 00:09:21.940\nNow I'm ready to share information\nwith this external system.\n\n198\n00:09:21.940 --> 00:09:25.200\nTo do that, I just need to\nget back into my config, and\n\n199\n00:09:25.200 --> 00:09:29.000\ndo a quick logging, and\nI did logging buffered earlier, right?\n\n200\n00:09:29.000 --> 00:09:30.410\nWhich logs to memory.\n\n201\n00:09:30.410 --> 00:09:31.590\nThis time, I'm gonna do logging and\n\n202\n00:09:31.590 --> 00:09:35.970\nthen I'll specify the IP address of a\nsyslog server somewhere on my network, and\n\n203\n00:09:35.970 --> 00:09:40.670\nI'm gonna specify one that I know of,\nlet's see it is this guy right here.\n\n204\n00:09:40.670 --> 00:09:45.950\nSo, I'm gonna start sending syslog\nmessages to that server, so that.\n\n205\n00:09:45.950 --> 00:09:47.742\nI have a record of that somewhere else.\n\n206\n00:09:47.742 --> 00:09:50.330\n>> All right now, you're talking\nabout now that you're starting to\n\n207\n00:09:50.330 --> 00:09:54.500\ngenerate this information you said sending\nit outbound to an external system.\n\n208\n00:09:54.500 --> 00:09:55.780\nDon, what's that external system?\n\n209\n00:09:55.780 --> 00:09:59.055\nI know that you mentioned\nthe term syslogs Server.\n\n210\n00:09:59.055 --> 00:10:00.995\nThat's probably relevant here, isn't it?\n\n211\n00:10:00.995 --> 00:10:01.615\n>> Yeah.\n\n212\n00:10:01.615 --> 00:10:04.335\nSo syslog, it's a standard protocol.\n\n213\n00:10:04.335 --> 00:10:07.695\nIt's actually an open standard so\nanybody can support syslog if they wanna.\n\n214\n00:10:07.695 --> 00:10:11.802\nThat's why Cisco chose this cuz they knew\nthere was open compatibility for it.\n\n215\n00:10:11.802 --> 00:10:13.842\nEvery Linux server and\n\n216\n00:10:13.842 --> 00:10:18.982\nevery MacOS machine actually has syslog\nin the background running by default.\n\n217\n00:10:18.982 --> 00:10:21.612\nAgain, there are some that have\nthe system D journaling or whatever.\n\n218\n00:10:21.612 --> 00:10:24.172\nIt is a little bit different but\neven that is compatible with syslog.\n\n219\n00:10:24.172 --> 00:10:28.012\nSo for any Linux, Unix, Mac, they got it.\n\n220\n00:10:28.012 --> 00:10:31.352\nOn Windows you can download\nthird party syslog systems.\n\n221\n00:10:31.352 --> 00:10:33.272\nIn Windows they have their\nown little event manager.\n\n222\n00:10:33.272 --> 00:10:36.050\nIt is a little bit different but\nvery similar to syslog.\n\n223\n00:10:36.050 --> 00:10:38.990\nSo you can get a third-party syslog\nsystem and run it on there and\n\n224\n00:10:38.990 --> 00:10:40.680\nit can collect these logs.\n\n225\n00:10:40.680 --> 00:10:43.330\nI'm actually running one\non this Windows machine,\n\n226\n00:10:43.330 --> 00:10:44.970\nwhich is from a company called SolarWinds.\n\n227\n00:10:44.970 --> 00:10:48.770\nSolarWinds has this\nsyslog collector they do.\n\n228\n00:10:48.770 --> 00:10:51.890\nThey actually bought a company I\nused to use this all the time,\n\n229\n00:10:51.890 --> 00:10:53.360\nit's called kiwi syslog server.\n\n230\n00:10:53.360 --> 00:10:56.150\nIt's one of the greatest\nsyslog servers out there.\n\n231\n00:10:56.150 --> 00:10:58.820\nSolar Winds bought it and made it a lot\nmore expensive than it used to be.\n\n232\n00:10:58.820 --> 00:11:00.160\nBut it's still a good product.\n\n233\n00:11:00.160 --> 00:11:02.800\nBut there's free ones out there,\nlike TFPTD32, you can download that one,\n\n234\n00:11:02.800 --> 00:11:05.750\nit doesn't cost you a dime and\nit will be syslog server.\n\n235\n00:11:05.750 --> 00:11:08.230\nBut in this case,\nI'm using this solar one.\n\n236\n00:11:08.230 --> 00:11:12.770\nAnd you can see that it's already\nrecording some messages here on\n\n237\n00:11:12.770 --> 00:11:18.140\nthe background, so I've got a message\nthat came from .234 that's my switch,\n\n238\n00:11:18.140 --> 00:11:21.540\nthat message came in at 11:00 A.M., and\n\n239\n00:11:21.540 --> 00:11:24.930\nI can see the priority was\nan informational message.\n\n240\n00:11:24.930 --> 00:11:28.670\nAnd then if I look at its facility\nit's just local use seven,\n\n241\n00:11:28.670 --> 00:11:29.820\nthat's kinda default.\n\n242\n00:11:29.820 --> 00:11:33.460\nThen the message that was attached to it,\nlet me re size some of these so\n\n243\n00:11:33.460 --> 00:11:35.510\nwe can see more of that\nmessage over there.\n\n244\n00:11:35.510 --> 00:11:39.410\nBut basically this is the message\ntelling me that we started and\n\n245\n00:11:39.410 --> 00:11:42.850\nstopped syslog and\nthat somebody edited the configuration.\n\n246\n00:11:42.850 --> 00:11:44.780\nThat was me.\nAnd as we start generating\n\n247\n00:11:44.780 --> 00:11:46.990\nmessages on the system\nit's gonna log them here.\n\n248\n00:11:46.990 --> 00:11:51.895\nAnd if I reboot my router or switch, the\nlogs stay here, I've got a record of it.\n\n249\n00:11:51.895 --> 00:11:55.230\nThis is being stored in a database on\nthis system, a searchable database, and\n\n250\n00:11:55.230 --> 00:11:58.364\nthat's really important cuz if I'm\naggregating long stream hundreds of\n\n251\n00:11:58.364 --> 00:12:00.505\ndevices I need to be able\nto search them to find it.\n\n252\n00:12:00.505 --> 00:12:05.339\nBut the other thing is, if I have an error\non one switch I can say show me everything\n\n253\n00:12:05.339 --> 00:12:09.321\nthat happened one minute before and\none minute after that error and\n\n254\n00:12:09.321 --> 00:12:12.900\nI can correlate the logs of\nthat switch with other devices.\n\n255\n00:12:12.900 --> 00:12:16.620\nSo if I saw a port go down on a switch I\ncan look form y routers to see if a port\n\n256\n00:12:16.620 --> 00:12:20.370\nwhen down on a router also and you can\nstart to kinda correlate those things and\n\n257\n00:12:20.370 --> 00:12:22.870\nit helps with that troubleshooting\nprocess there too.\n\n258\n00:12:22.870 --> 00:12:27.430\nHaving a searchable syslog is\nreally super beneficial and\n\n259\n00:12:27.430 --> 00:12:30.690\nthat is something we can do when we are\nexporting those logs to somewhere else.\n\n260\n00:12:30.690 --> 00:12:32.500\n>> Very good.\nSo, we're taking that information.\n\n261\n00:12:32.500 --> 00:12:35.140\nWe're making sure, first of all,\nthat we have that information generated.\n\n262\n00:12:35.140 --> 00:12:38.000\nYou're taking it out of that\nvolatile region of RAM that\n\n263\n00:12:38.000 --> 00:12:40.790\nunfortunately if we lost power,\nthe switch reboots.\n\n264\n00:12:40.790 --> 00:12:43.940\nWe don't have that information and you're\nexporting it to an external location\n\n265\n00:12:43.940 --> 00:12:45.990\nwhere you can centrally manage it or\ncollect it.\n\n266\n00:12:45.990 --> 00:12:49.470\nNow is there any other kind of\ninformation that maybe we need to get\n\n267\n00:12:49.470 --> 00:12:53.515\nout of the switch itself and\nexport it to an external location?\n\n268\n00:12:53.515 --> 00:12:58.800\nYeah, you can get a lot\nof data out of these.\n\n269\n00:12:58.800 --> 00:13:02.445\nAnd when we do logging were normally just\ngetting like informational messages that's\n\n270\n00:13:02.445 --> 00:13:03.790\nkinda what we're getting out of it.\n\n271\n00:13:03.790 --> 00:13:06.440\nBut you can get debugs out of here too,\nright.\n\n272\n00:13:06.440 --> 00:13:08.620\nSo if we wanna pull debugs out.\n\n273\n00:13:08.620 --> 00:13:11.580\nWell it actually doesn't do that\nby default cuz the command that\n\n274\n00:13:11.580 --> 00:13:14.280\nI issued earlier when I enabled debug,\n\n275\n00:13:14.280 --> 00:13:18.070\nnot debug, when I enabled bugging,\nI ran logging buffered, right?\n\n276\n00:13:18.070 --> 00:13:22.010\nSo, I did logging buffered, like that\nwhich is what's gonna go on a RAM.\n\n277\n00:13:22.010 --> 00:13:24.587\nAnd then I ran logging and\nI pointed to my server right?\n\n278\n00:13:24.587 --> 00:13:27.789\n10.1.230.128.\nBut if you do a question mark after that\n\n279\n00:13:27.789 --> 00:13:30.700\nthere's not much to follow.\n\n280\n00:13:30.700 --> 00:13:34.020\nBut when I do logging and question mark.\n\n281\n00:13:34.020 --> 00:13:37.330\nYou will see there's a lot of different\nstuff that we can specify in here as far\n\n282\n00:13:37.330 --> 00:13:40.590\nas other things that we wanna tweak and\ncustomization and so\n\n283\n00:13:40.590 --> 00:13:43.378\non and you've even got logging host.\n\n284\n00:13:43.378 --> 00:13:46.460\nAnd that will let you specify other\nparameters to what you're gonna send to\n\n285\n00:13:46.460 --> 00:13:47.080\nthat system.\n\n286\n00:13:47.080 --> 00:13:51.800\nSo I can say logging host 10.1.230.128 and\nnow I can\n\n287\n00:13:51.800 --> 00:13:56.980\ndo filters and session IDs and additional\nthings to change what's gonna be sent out.\n\n288\n00:13:56.980 --> 00:13:57.850\nTo that system.\n\n289\n00:13:57.850 --> 00:13:59.680\nSame thing goes for logging buffered.\n\n290\n00:13:59.680 --> 00:14:04.270\nIf I do logging buffered in a question\nmark, I can specify alert, debugging,\n\n291\n00:14:04.270 --> 00:14:06.190\ninformational and so on.\n\n292\n00:14:06.190 --> 00:14:09.690\nWell, informational is the default\nthat's got a severity of six.\n\n293\n00:14:09.690 --> 00:14:13.285\nSo anything severity six\nthrough zero is gonna be long.\n\n294\n00:14:13.285 --> 00:14:15.835\nDebugs are severity level seven.\n\n295\n00:14:15.835 --> 00:14:19.355\nSo if I wanna send debugs to\nthe six log server, I can, but\n\n296\n00:14:19.355 --> 00:14:24.890\nwe have to be really careful about that\ncuz you could generate a ton of data.\n\n297\n00:14:24.890 --> 00:14:27.080\nTake for example, here, I'll turn it on.\n\n298\n00:14:27.080 --> 00:14:30.716\nAnd I'm not on a console session,\nwell, we will see,\n\n299\n00:14:30.716 --> 00:14:33.570\nmaybe I'll lock myself out of the system.\n\n300\n00:14:33.570 --> 00:14:36.110\nIt'll be fun.\nSo if I take this one and\n\n301\n00:14:36.110 --> 00:14:39.330\nI do something crazy like debug.\n\n302\n00:14:39.330 --> 00:14:41.880\nSo I did log-in buffer de-bugging.\n\n303\n00:14:41.880 --> 00:14:44.830\nSo I'm actually logging my\nde-bug information, and\n\n304\n00:14:44.830 --> 00:14:49.660\nif I do a de-bug IP packet detail,\nnow every\n\n305\n00:14:49.660 --> 00:14:53.070\nsingle IP packet that is passing through\nthe system is gonna log to my screen.\n\n306\n00:14:53.070 --> 00:14:55.630\nOn a busy switch this\ncould be a lot of data.\n\n307\n00:14:55.630 --> 00:14:57.740\nIt could overwhelm my session.\n\n308\n00:14:57.740 --> 00:15:02.460\nAnd all of this data,\nit's gotta get sent somewhere, right?\n\n309\n00:15:02.460 --> 00:15:05.680\nAnd if I look back here in\nthe background my syslog server.\n\n310\n00:15:05.680 --> 00:15:07.790\nSee how it's starting to\nreceive this stuff, but\n\n311\n00:15:07.790 --> 00:15:10.040\nI'm actually getting a bunch of errors.\n\n312\n00:15:10.040 --> 00:15:11.708\nLet me stop this if I can.\n\n313\n00:15:11.708 --> 00:15:14.490\nWhat we will see if I actually exceeded,\n\n314\n00:15:14.490 --> 00:15:17.590\nit actually kicked me\nout of my session there.\n\n315\n00:15:17.590 --> 00:15:19.042\nI'm not sure if I'm gonna\nbe able to stop this.\n\n316\n00:15:19.042 --> 00:15:22.930\nAll right, let me drop over to a,\nactually hang on a second,\n\n317\n00:15:22.930 --> 00:15:27.140\nlet me see if I can get back\ninto this one to kill it, but\n\n318\n00:15:27.140 --> 00:15:31.080\nbasically what's happening is\nI'm overwhelming my system, and\n\n319\n00:15:31.080 --> 00:15:34.080\nsee how I'm still getting log messages\nthere even though I didn't de-bug all.\n\n320\n00:15:34.080 --> 00:15:35.310\nThat was the back log.\n\n321\n00:15:35.310 --> 00:15:39.790\nAnd if I look back here I start to\nsee these messages, logger dropped.\n\n322\n00:15:39.790 --> 00:15:43.240\nSystem dropped 339\nconsole de-bug messages.\n\n323\n00:15:43.240 --> 00:15:46.430\nLogger dropped 274, 293, 260.\n\n324\n00:15:46.430 --> 00:15:49.832\nI'm dropping a ton of log messages\ncuz I've overwhelmed the system.\n\n325\n00:15:49.832 --> 00:15:52.702\nAll right, so you do have to be careful\nof that from a performance concern.\n\n326\n00:15:52.702 --> 00:15:54.698\nYou don't wanna send out too much data.\n\n327\n00:15:54.698 --> 00:15:57.717\nAll right, now that's on the logging side.\n\n328\n00:15:57.717 --> 00:15:59.772\nThe logs are really useful, but\n\n329\n00:15:59.772 --> 00:16:04.270\nthere's another thing that's useful too,\nour configs.\n\n330\n00:16:04.270 --> 00:16:07.210\nWe want to make sure we\nhave our configuration, and\n\n331\n00:16:07.210 --> 00:16:09.910\nbefore I do that,\nlet me just make sure I fix this.\n\n332\n00:16:09.910 --> 00:16:15.210\nI don't want to do any more\nlogging of the de-bugs.\n\n333\n00:16:15.210 --> 00:16:17.670\nSo I'm just going to put\nthat back to informational.\n\n334\n00:16:17.670 --> 00:16:18.470\nThere we go.\n\n335\n00:16:18.470 --> 00:16:20.490\nAnd so now I'm not going\nto flood my system anymore.\n\n336\n00:16:20.490 --> 00:16:21.340\nVery good.\n\n337\n00:16:21.340 --> 00:16:24.510\n>> Now, one of the things I was going to\nask right before the whole system started\n\n338\n00:16:24.510 --> 00:16:25.900\ndumping all the information.\n\n339\n00:16:25.900 --> 00:16:29.650\nWhen it comes to the logs, when we talk\nabout auditing and logging systems,\n\n340\n00:16:29.650 --> 00:16:31.290\nwe always warn that say,\n\n341\n00:16:31.290 --> 00:16:33.910\nhey those logs, they could start\nto become performance hindrances.\n\n342\n00:16:33.910 --> 00:16:36.790\nI guess we've seen that first hand here\nthat they could become a problem if you\n\n343\n00:16:36.790 --> 00:16:38.450\ngenerate too much of that information.\n\n344\n00:16:38.450 --> 00:16:40.100\n>> Absolutely.\nYou've gotta be careful with debugs.\n\n345\n00:16:40.100 --> 00:16:42.700\nThat's kinda the rule and\nyou guys saw the struggle I had there.\n\n346\n00:16:42.700 --> 00:16:45.700\nIf you're not consoled in,\nit can be a real challenge.\n\n347\n00:16:45.700 --> 00:16:50.490\nAll right, now the configs, if I see a\nproblem and I can't contact that router or\n\n348\n00:16:50.490 --> 00:16:53.900\nswitch anymore,\nI can't get into it to troubleshoot, so\n\n349\n00:16:53.900 --> 00:16:57.060\nI might want to be able to look at its\nconfiguration even without the device or\n\n350\n00:16:57.060 --> 00:16:58.680\nI have to replace the device.\n\n351\n00:16:58.680 --> 00:17:00.100\nI've got to send out a new router.\n\n352\n00:17:00.100 --> 00:17:01.910\nSo I need a copy of its config.\n\n353\n00:17:01.910 --> 00:17:04.130\nWell we need to back\nup our configurations.\n\n354\n00:17:04.130 --> 00:17:08.100\nAnd I know I can take a switch like\nthis and I can copy its configuration.\n\n355\n00:17:08.100 --> 00:17:13.180\nI can say like copy running- config and\nsend it to an ftp server.\n\n356\n00:17:13.180 --> 00:17:16.208\nLet me send it to this one and\n\n357\n00:17:16.208 --> 00:17:22.143\nI'll call this my gmv-c3750-running.txt.\n\n358\n00:17:22.143 --> 00:17:26.319\nSo I can just copy that and\nsend it on over to an FTP server or\n\n359\n00:17:26.319 --> 00:17:28.640\na TFTP server or whatever.\n\n360\n00:17:28.640 --> 00:17:30.140\nAnd now I've got a backup, right?\n\n361\n00:17:30.140 --> 00:17:34.770\nAnd I could do copy startup-config\njust as well to back that one up.\n\n362\n00:17:34.770 --> 00:17:37.040\nThese are great ways to back up\nthe configs and get them out of there.\n\n363\n00:17:37.040 --> 00:17:40.580\nThe only problem with this is it's\nkind of a manual process, isn't it?\n\n364\n00:17:41.750 --> 00:17:45.660\nWhat happens if I make some changes and\nI forget to do this?\n\n365\n00:17:45.660 --> 00:17:47.060\nOops, I forgot to back it up.\n\n366\n00:17:47.060 --> 00:17:47.990\nIt's gonna happen.\n\n367\n00:17:49.060 --> 00:17:53.010\nWouldn't it be nice if we had a routine\nway for this to automatically happen.\n\n368\n00:17:53.010 --> 00:17:54.980\nAnd we do.\nThere is a way to do that.\n\n369\n00:17:54.980 --> 00:17:58.570\nJust like syslogs where it's\nautomatically sending those messages out,\n\n370\n00:17:58.570 --> 00:17:59.880\nwe can do the same thing with our config.\n\n371\n00:17:59.880 --> 00:18:03.550\nInside of our configuration\non a Cisco switch or router,\n\n372\n00:18:03.550 --> 00:18:05.990\nyou actually have\na command called archive.\n\n373\n00:18:05.990 --> 00:18:08.600\nAnd this is one of the commands that\ngets passed over a lot, because you have\n\n374\n00:18:08.600 --> 00:18:12.500\nan exact command called archive also\nthat you use for installing software.\n\n375\n00:18:12.500 --> 00:18:14.870\nBut in the config,\nit's something very different.\n\n376\n00:18:14.870 --> 00:18:19.380\nThis lets us set up automatic\nbackups of our configs.\n\n377\n00:18:19.380 --> 00:18:23.590\nAnd it can back them up on a schedule that\nwe sett, sending them to a FTP server, or\n\n378\n00:18:23.590 --> 00:18:26.410\nsome other system on a routine schedule.\n\n379\n00:18:26.410 --> 00:18:28.960\nGreat way to make sure we\nhave a backup of our configs.\n\n380\n00:18:28.960 --> 00:18:30.050\nIf I want to configure this,\n\n381\n00:18:30.050 --> 00:18:32.650\nthere's really just a couple\ncommands I need to throw in here.\n\n382\n00:18:32.650 --> 00:18:34.690\nFirst off,\nI need to tell it where to backup to.\n\n383\n00:18:34.690 --> 00:18:36.930\nAnd we use the path\ncommand to define that.\n\n384\n00:18:36.930 --> 00:18:38.900\nAnd you'll see I can\nbackup to flash if I want.\n\n385\n00:18:38.900 --> 00:18:40.660\nI can store the backups right\nhere in the system, but\n\n386\n00:18:40.660 --> 00:18:42.775\nthat kinda defeats the purpose.\n\n387\n00:18:42.775 --> 00:18:47.865\nI can also backup to FTP or SCP, so\nI can send it a few different places.\n\n388\n00:18:47.865 --> 00:18:52.827\nI'm gonna do FTP, and I'll send to that\nsame server I just sent to a moment ago,\n\n389\n00:18:52.827 --> 00:18:55.214\nand I'll give it a name for that file.\n\n390\n00:18:55.214 --> 00:19:00.266\nSo I'm just gonna call\nthat my c3750-config.\n\n391\n00:19:00.266 --> 00:19:04.710\nSo that's where I'm gonna back this\nthing up to and I'm gonna send it.\n\n392\n00:19:04.710 --> 00:19:07.430\nNow, I'm giving it just\na simple file name.\n\n393\n00:19:07.430 --> 00:19:11.970\nWhat's gonna happen is, by default,\nit's gonna store ten backups.\n\n394\n00:19:11.970 --> 00:19:15.015\nAnd so when it writes this,\nit'll have a -1 and a -2 and\n\n395\n00:19:15.015 --> 00:19:18.744\na -3 as starts to increment that number,\nand when it gets to 10, and\n\n396\n00:19:18.744 --> 00:19:21.187\nit goes to write -11, it'll delete -1.\n\n397\n00:19:21.187 --> 00:19:23.877\nAnd then it'll do -12,\nand it'll delete -2, so\n\n398\n00:19:23.877 --> 00:19:28.580\nit's this kind of rolling backup of my\nconfigs that I've always got available.\n\n399\n00:19:28.580 --> 00:19:31.480\nSo it's gonna be kind of grabbing those,\nputting those in place,\n\n400\n00:19:31.480 --> 00:19:33.470\nand it'll be ready to rock.\n\n401\n00:19:33.470 --> 00:19:36.260\nNow, when we back it up,\nwhat's it gonna back up?\n\n402\n00:19:36.260 --> 00:19:39.230\nWell, it's gonna back\nup the running config.\n\n403\n00:19:39.230 --> 00:19:43.320\nWhat if I've made changes to the running\nconfig, and I haven't saved them?\n\n404\n00:19:43.320 --> 00:19:47.990\nYou can actually tell it to do a write\nmemory, and it'll save the running config.\n\n405\n00:19:47.990 --> 00:19:51.800\nSo if you forgot to save your changes,\nit's gonna back up the config and\n\n406\n00:19:51.800 --> 00:19:54.520\nit's gonna save it for you,\njust to make sure you've actually saved.\n\n407\n00:19:54.520 --> 00:19:56.500\nSo I'm gonna tell it to do that too.\n\n408\n00:19:56.500 --> 00:19:59.950\nThen I can tell it the interval\nhow often I wanted to do this.\n\n409\n00:19:59.950 --> 00:20:02.940\nIt's done in minutes, and so\nif I wanted to back up once a day\n\n410\n00:20:02.940 --> 00:20:08.030\nI can set it to 1440 and now every 24\nhours it's gonna run and take a backup.\n\n411\n00:20:08.030 --> 00:20:12.170\nOr I could say 60, and\njust once an hour it would do the backup.\n\n412\n00:20:12.170 --> 00:20:14.140\nBut I'll do once a day, all right?\n\n413\n00:20:14.140 --> 00:20:16.020\nYou know what, actually here,\nI'm gonna do something a lot lower.\n\n414\n00:20:16.020 --> 00:20:17.530\nI'm gonna do a time period of one.\n\n415\n00:20:17.530 --> 00:20:18.800\nI want it to back up once a minute,\n\n416\n00:20:18.800 --> 00:20:21.160\nbecause this show isn't\ngoing to be 24 hours long.\n\n417\n00:20:21.160 --> 00:20:22.410\nSo I want to see some back-ups happen.\n\n418\n00:20:22.410 --> 00:20:24.700\nSo I'll crank it down a little bit.\n\n419\n00:20:24.700 --> 00:20:26.340\nI can also adjust the maximum.\n\n420\n00:20:26.340 --> 00:20:27.620\nRemember I said I had a maximum of 10?\n\n421\n00:20:27.620 --> 00:20:31.050\nYou'll see that I can adjust this one\nto as few as one or as many as 14.\n\n422\n00:20:31.050 --> 00:20:33.720\nSo I can kind of tweak that,\nand put it in place.\n\n423\n00:20:33.720 --> 00:20:37.410\nI'm just gonna leave it at the default,\nwhich is ten.\n\n424\n00:20:37.410 --> 00:20:41.660\nAnd then lastly, I can do a log.\n\n425\n00:20:41.660 --> 00:20:44.150\nLog changes to the running configuration.\n\n426\n00:20:44.150 --> 00:20:46.400\nWhen somebody makes a change\nto the running configuration,\n\n427\n00:20:46.400 --> 00:20:49.920\nwe generate a log message for that, and\nI wanna log anytime that that happens.\n\n428\n00:20:49.920 --> 00:20:53.260\nWhen this goes to save and there's\na change, I wanna generate a log message.\n\n429\n00:20:53.260 --> 00:20:54.900\nIf it's saying there's not a change,\n\n430\n00:20:54.900 --> 00:20:56.600\nthen I'm not going to bother\nwith the log message.\n\n431\n00:20:56.600 --> 00:20:59.173\nSo I'll just say logconfig.\n\n432\n00:20:59.173 --> 00:21:01.940\nAnd in the logconfig you have\na lot of different options.\n\n433\n00:21:01.940 --> 00:21:03.940\nYou can set up notifications and stuff.\n\n434\n00:21:03.940 --> 00:21:07.040\nI'm going to talk about those when we get\ninto the embedded event manager which is\n\n435\n00:21:07.040 --> 00:21:08.420\nin another episode.\n\n436\n00:21:08.420 --> 00:21:13.760\nBut for now that's pretty much\nthe archive and if I do a show run and\n\n437\n00:21:13.760 --> 00:21:17.300\nI look for that command,\nyou'll see it's kind of nested them and\n\n438\n00:21:17.300 --> 00:21:20.650\nsome of the commands that I ran might have\ndisappeared because they're defaults but\n\n439\n00:21:20.650 --> 00:21:24.820\nhere's the path I defined, I told it to\nwrite memory and there's that time period.\n\n440\n00:21:24.820 --> 00:21:29.360\nNow once a minute, it's gonna back\nup my config to that FTP server and\n\n441\n00:21:29.360 --> 00:21:33.090\nthat's should be happening all ready\nif I browse to my file system, and\n\n442\n00:21:33.090 --> 00:21:37.180\ntake a look at where my FTP\nserver is storing data.\n\n443\n00:21:37.180 --> 00:21:38.360\nHere we go.\n\n444\n00:21:38.360 --> 00:21:40.450\nI've already got some backups.\n\n445\n00:21:40.450 --> 00:21:45.470\nAnd see how I've got gnv-3750-config,\nthat's the name I put in.\n\n446\n00:21:45.470 --> 00:21:51.119\nAnd then it's got OCT22-11-11-13 EDT-0-1.\n\n447\n00:21:51.119 --> 00:21:52.211\nOh, I guess it starts at -0.\n\n448\n00:21:52.211 --> 00:21:53.330\nI said it started at -1.\n\n449\n00:21:53.330 --> 00:21:57.780\nBut it's got those little number\nthere to indicate what time and\n\n450\n00:21:57.780 --> 00:22:00.210\nwhat increment this back up is.\n\n451\n00:22:00.210 --> 00:22:03.650\nSo it's backing it up for me and\nit's storing it right there.\n\n452\n00:22:03.650 --> 00:22:07.080\nIf I ever need to see the back up,\nwell these are just text files.\n\n453\n00:22:07.080 --> 00:22:12.140\nWe can open them in WordPad or\nwhatever text editor's your favorite.\n\n454\n00:22:12.140 --> 00:22:14.440\nLet me just fire it up\nhere again in Wordpad.\n\n455\n00:22:14.440 --> 00:22:16.190\nDid I click on Wordpad?\n\n456\n00:22:16.190 --> 00:22:19.605\nApparently using a mouse is\nbeyond my technical skills.\n\n457\n00:22:19.605 --> 00:22:21.670\n>> [LAUGH]\n>> But it's all open, there we go, and\n\n458\n00:22:21.670 --> 00:22:24.330\nnow I can just read the config\nit's all right there.\n\n459\n00:22:24.330 --> 00:22:28.310\nAnd once a minute it's gonna take\na backup and store that config.\n\n460\n00:22:28.310 --> 00:22:31.550\nIn fact you can see it just made another\none now I've got -2 and it's gonna\n\n461\n00:22:31.550 --> 00:22:35.260\nkeep incriminating through that as\nthe time goes on I've got a great back up.\n\n462\n00:22:35.260 --> 00:22:39.430\nNow restoring the back-up,\nlet's talk about that.\n\n463\n00:22:39.430 --> 00:22:44.120\nIf something is wrong on the switch and I\nknow it was fine yesterday but today it's\n\n464\n00:22:44.120 --> 00:22:48.150\nhosed, I might just wanna restore the back\nup form yesterday and put in in place.\n\n465\n00:22:48.150 --> 00:22:53.270\nNow if you use the copy command and you\ncopy whatever you had in the beginning and\n\n466\n00:22:53.270 --> 00:22:56.810\nyou copy it to running-start\nit does a merge.\n\n467\n00:22:56.810 --> 00:23:00.020\nSo anybody's additional changes they've\nadded they'll still be there after\n\n468\n00:23:00.020 --> 00:23:02.310\nthe merge and\nthat can be a bit of a problem.\n\n469\n00:23:02.310 --> 00:23:04.609\nMerging configs it leads\nto all sorts of stuff.\n\n470\n00:23:05.610 --> 00:23:08.670\nSo we can actually do\na replace if we want and\n\n471\n00:23:08.670 --> 00:23:11.300\nsay we don't want to merge what we've got.\n\n472\n00:23:11.300 --> 00:23:14.870\nWe want to get this\nexactly put back in place.\n\n473\n00:23:14.870 --> 00:23:17.060\nAnd you can use the archive\ncommand to do that also.\n\n474\n00:23:17.060 --> 00:23:21.280\nIt's actually a little bit different\nbecause we use a command called configure.\n\n475\n00:23:21.280 --> 00:23:23.790\nNow when I say configure,\nwhat do I normally do?\n\n476\n00:23:23.790 --> 00:23:27.350\nI normally say configure terminal or\ncomp t or\n\n477\n00:23:27.350 --> 00:23:29.810\nwhatever to get into my configuration.\n\n478\n00:23:29.810 --> 00:23:33.200\nBut the configure command actually\nhas a lot of other options and\n\n479\n00:23:33.200 --> 00:23:37.130\nyou'll notice that one of\nthe options is configure replace.\n\n480\n00:23:37.130 --> 00:23:40.490\nWe can replace the running\nconfig with a new config file.\n\n481\n00:23:40.490 --> 00:23:42.320\nAnd that's exactly what I want.\n\n482\n00:23:42.320 --> 00:23:45.800\nBecause, whoops, because normally\nthe only way to do that is to\n\n483\n00:23:45.800 --> 00:23:48.310\ncopy it to the start up config and\nthen reboot.\n\n484\n00:23:48.310 --> 00:23:50.280\nWell I don't want to reboot.\n\n485\n00:23:50.280 --> 00:23:52.500\nI want to get in and and replace.\n\n486\n00:23:52.500 --> 00:23:53.237\nLet me show you guys an example.\n\n487\n00:23:53.237 --> 00:23:57.824\nIf I, if I go into my config and\nI create a new interface,\n\n488\n00:23:57.824 --> 00:24:00.378\nright, if I do a vlan 2 Right.\n\n489\n00:24:00.378 --> 00:24:01.538\nThere we go.\n\n490\n00:24:01.538 --> 00:24:03.005\nSo I just created a new interface,\n\n491\n00:24:03.005 --> 00:24:05.480\nan interface that didn't\nexist a few moments ago.\n\n492\n00:24:05.480 --> 00:24:07.240\nOr even like a loopback.\n\n493\n00:24:08.300 --> 00:24:11.870\nSo I might whip something up like that,\njust to have it.\n\n494\n00:24:11.870 --> 00:24:16.080\nBecause who knows when you might\nneed a loopback interface.\n\n495\n00:24:16.080 --> 00:24:18.680\nWhen I go and\nrestore a config, from backup,\n\n496\n00:24:18.680 --> 00:24:21.010\nif I'm just doing copies, it'll merge.\n\n497\n00:24:21.010 --> 00:24:26.100\nIt'll fix my other interfaces, but\nthese new interfaces will still be there.\n\n498\n00:24:26.100 --> 00:24:29.240\nSo that is something that would\nbe left behind in a merge,\n\n499\n00:24:29.240 --> 00:24:34.400\nthis loop back that I just made, but\nif I do a replace it's a different story.\n\n500\n00:24:34.400 --> 00:24:37.660\nSo I can say configure replace, and\n\n501\n00:24:37.660 --> 00:24:41.480\nI can point to the ftp server and\nthe file I want to replace it with.\n\n502\n00:24:41.480 --> 00:24:44.030\nWell I've already forgotten the file name,\nso I'm going to go and\n\n503\n00:24:44.030 --> 00:24:45.170\ncopy and paste that.\n\n504\n00:24:45.170 --> 00:24:49.750\nCuz I just don't have the memory\nto handle that apparently.\n\n505\n00:24:49.750 --> 00:24:51.900\nLet me see if I can find that here.\n\n506\n00:24:51.900 --> 00:24:52.720\nI'll restore.\n\n507\n00:24:52.720 --> 00:24:55.490\nLet me just go back a few\nhere to one from before.\n\n508\n00:24:55.490 --> 00:24:59.509\nSo I'll just copy this file name and\npaste that in there.\n\n509\n00:25:00.850 --> 00:25:03.670\nThere we go, and we'll run that, and\n\n510\n00:25:03.670 --> 00:25:05.410\nnow it's going to tell me\nit's going to do a replace.\n\n511\n00:25:05.410 --> 00:25:08.770\nWhich is gonna basically wipe that\nrunning config and bring this in, and\n\n512\n00:25:08.770 --> 00:25:12.432\nI'll say yes go ahead do it and\nthere it goes.\n\n513\n00:25:12.432 --> 00:25:15.690\nIt's gonna replace the running config\nwith what I just brought in, so\n\n514\n00:25:15.690 --> 00:25:18.990\nsee how it says roll back\nacquired configuration lock.\n\n515\n00:25:18.990 --> 00:25:21.850\nIt locked the config,\nit's applying it, and\n\n516\n00:25:21.850 --> 00:25:25.260\nsee how my loop back zero just went down,\nright?\n\n517\n00:25:25.260 --> 00:25:27.230\nIt's killing that interface.\n\n518\n00:25:27.230 --> 00:25:29.550\nAnd now when it's done,\n\n519\n00:25:29.550 --> 00:25:34.330\nif I run that show IP interface brief\nagain, loop back zero is gone, right?\n\n520\n00:25:34.330 --> 00:25:37.820\nSo, it didn't merge like\na copy would normally do.\n\n521\n00:25:37.820 --> 00:25:42.220\nIt replaced, and so that command\nagain was configure replace and\n\n522\n00:25:42.220 --> 00:25:43.560\nthen the path to a night.\n\n523\n00:25:43.560 --> 00:25:45.790\nI did FTP,\nyou can do whatever yours happened to be,\n\n524\n00:25:45.790 --> 00:25:47.110\nand that brings it back in.\n\n525\n00:25:47.110 --> 00:25:50.580\nSo if a switch is acting up, we might not\nneed to troubleshoot too much at all.\n\n526\n00:25:50.580 --> 00:25:53.050\nWe just restore a backup,\nand you're in business.\n\n527\n00:25:53.050 --> 00:25:55.440\nThese are neat features that\nare built into the switches,\n\n528\n00:25:55.440 --> 00:25:58.460\nbuilt into the routers, but\nthey don't work by default.\n\n529\n00:25:58.460 --> 00:25:59.480\nYou've gotta configure, right?\n\n530\n00:25:59.480 --> 00:26:02.580\nYou've gotta set up a syslog server,\nyou've gotta set up an FTP server to\n\n531\n00:26:02.580 --> 00:26:06.250\nreceive this data, and then you've gotta\ntell the switches and routers to use them.\n\n532\n00:26:06.250 --> 00:26:09.820\nBut they are great for troubleshooting\ncuz you can see what changed.\n\n533\n00:26:09.820 --> 00:26:11.740\nWhat changed between yesterday and today?\n\n534\n00:26:11.740 --> 00:26:16.750\nLet me compare yesterday's config with\ntoday's config and what's different?\n\n535\n00:26:16.750 --> 00:26:19.360\nDo the side-by-side configs and\nlook for what changed.\n\n536\n00:26:19.360 --> 00:26:21.850\nAnd now I know what's more\nthan likely my problem.\n\n537\n00:26:21.850 --> 00:26:22.770\n>> Very good, very good.\n\n538\n00:26:22.770 --> 00:26:24.370\nA lot of good information there.\n\n539\n00:26:24.370 --> 00:26:26.080\nWe've talked about backing up logs,\n\n540\n00:26:26.080 --> 00:26:28.730\nexporting that information\nto an external location.\n\n541\n00:26:28.730 --> 00:26:33.370\nTalked about backing up the configuration,\ncopying, replacing, and merging.\n\n542\n00:26:33.370 --> 00:26:35.880\nDon, we're getting to\nthe end of this episode,\n\n543\n00:26:35.880 --> 00:26:39.450\nyou got anything else that we might need\nto know before we wrap up this show?\n\n544\n00:26:39.450 --> 00:26:41.560\n>> I got a lot of other things\nthat I want to talk to you,\n\n545\n00:26:41.560 --> 00:26:43.750\nI know I mentioned net flow\nin the last episode and\n\n546\n00:26:43.750 --> 00:26:46.010\nsaid we might get to it this time,\nwe didn't get to it here either.\n\n547\n00:26:46.010 --> 00:26:47.990\nSo definitely stay tuned for\nthat, we got net flow,\n\n548\n00:26:47.990 --> 00:26:51.420\nwe got SNMPU,\nwe got all sorts of cool stuff coming up.\n\n549\n00:26:51.420 --> 00:26:53.200\n>> All right, a lot of good information.\n\n550\n00:26:53.200 --> 00:26:57.240\nLooks like we got some more information\ncoming up, in iOS troubleshooting tools,\n\n551\n00:26:57.240 --> 00:26:59.800\nso stick around because we're\ngoing into a part four.\n\n552\n00:26:59.800 --> 00:27:01.420\nThanks, Don, for being here.\n\n553\n00:27:01.420 --> 00:27:04.010\nBut until we see you,\nI've been your host Wes Bryan.\n\n554\n00:27:04.010 --> 00:27:05.577\n>> And I'm Don Pezet.\n>> And we'll see you next time.\n\n555\n00:27:05.577 --> 00:27:12.125\n[MUSIC]\n\n",
          "vimeoId": "145146779"
        },
        {
          "description": "In this episode Don and Wes continue their discussion on troubleshooting tools. They look at a great utility to gather information about devices on the network called SNMP. They demonstrate how to make the OIDs easier to to read through SNMP management software. They discuss how to use NetFlow analyzer to get information about the network.",
          "length": "1762",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-1-troubleshooting_tools_pt4-102215-high.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-1-troubleshooting_tools_pt4-102215-high-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-1-troubleshooting_tools_pt4-102215-high-sm.jpg",
          "title": "Troubleshooting Tools Part 4",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:11.803 --> 00:00:15.241\nAll right, welcome back to another\nexciting episode here at ITPro TV.\n\n3\n00:00:15.241 --> 00:00:17.340\nYour time is valuable, and\n\n4\n00:00:17.340 --> 00:00:20.460\nwe are glad that you're\nspending it here with us today.\n\n5\n00:00:20.460 --> 00:00:25.500\nToday we're going to be continuing on in\ntroubleshooting tools in the Cisco iOS and\n\n6\n00:00:25.500 --> 00:00:30.600\nwho better to show us around\nthe Cisco iOS but Don Pezet.\n\n7\n00:00:30.600 --> 00:00:31.311\nHow you doing today Don?\n\n8\n00:00:31.311 --> 00:00:32.750\n>> I am doing great Wes.\n\n9\n00:00:32.750 --> 00:00:35.938\nReady to jump back into the world\nof troubleshooting tools.\n\n10\n00:00:35.938 --> 00:00:39.210\nYou know, where I think we're on part 4\nnow and we'll probably end up doing 5 or\n\n11\n00:00:39.210 --> 00:00:41.830\n6 parts of this with all the different\ntools that we're gonna be using\n\n12\n00:00:41.830 --> 00:00:43.220\nthroughout the show.\n\n13\n00:00:43.220 --> 00:00:46.730\nThe ones I wanna tackle today are pretty\nneat because they're good monitoring tools\n\n14\n00:00:46.730 --> 00:00:51.385\nand they really help you to do proactive\nand not just reactive trouble shooting.\n\n15\n00:00:51.385 --> 00:00:53.875\nYou know a lot of what we do is reactive,\nit's all putting out fires,\n\n16\n00:00:53.875 --> 00:00:56.315\nsomething breaks and\nnow we got to go in and fix it.\n\n17\n00:00:56.315 --> 00:01:00.871\nBut there's some tools that will actually\nhelp us to see things before they turn\n\n18\n00:01:00.871 --> 00:01:06.125\ninto a full blown problem and the first\none that I want to start off with is SNMP.\n\n19\n00:01:06.125 --> 00:01:11.285\nSNMP is the Simple Network Management\nProtocol and it's been around a long time,\n\n20\n00:01:11.285 --> 00:01:13.210\nactually came out of the Unix world and\n\n21\n00:01:13.210 --> 00:01:15.710\nthe majority of networking\ngear out there supports it.\n\n22\n00:01:15.710 --> 00:01:19.231\nMost servers support it,\nrouters, switches, firewalls.\n\n23\n00:01:19.231 --> 00:01:23.791\nSNMP lets you monitor just\na ton of different things.\n\n24\n00:01:23.791 --> 00:01:25.300\nAll right.\n\n25\n00:01:25.300 --> 00:01:28.382\n>> I was gonna say you had talked about,\nin the last episode,\n\n26\n00:01:28.382 --> 00:01:33.340\nyou had talked about CIS log and what was\nit, the switch packet analyzer I believe?\n\n27\n00:01:33.340 --> 00:01:37.730\nNow we've got those utilities Don, why\nwould we use SNMP over those other ones?\n\n28\n00:01:37.730 --> 00:01:41.440\n>> So, when you talk about, like, span,\nfor example, right, where you're actually\n\n29\n00:01:41.440 --> 00:01:46.540\ngrabbing raw data off the network and then\nyou have to interpret it, that raw data is\n\n30\n00:01:46.540 --> 00:01:51.630\nonly useful, really, kind of right then,\nyou know, it's very real time.\n\n31\n00:01:51.630 --> 00:01:55.020\nAnd a lot of the tools that we've talked\nabout have been just that, real time.\n\n32\n00:01:55.020 --> 00:01:57.772\nIf I use ping,\nI need the ping results from right now,\n\n33\n00:01:57.772 --> 00:01:59.681\nnot the ping results from a week ago.\n\n34\n00:01:59.681 --> 00:02:02.130\nBut what if I wanna do trend analysis?\n\n35\n00:02:02.130 --> 00:02:05.460\nIf I wanna see like, all right, people\nare saying the network is slow today,\n\n36\n00:02:05.460 --> 00:02:07.660\nwhat's my network speed like today,\nall right?\n\n37\n00:02:07.660 --> 00:02:08.700\nWhat was it like last week?\n\n38\n00:02:08.700 --> 00:02:10.731\nWhat was it like the week before and\nthe week before?\n\n39\n00:02:10.731 --> 00:02:12.580\nSNMP can do that.\n\n40\n00:02:12.580 --> 00:02:15.420\nYou can gather the data and\nstore it in a database and render it, and\n\n41\n00:02:15.420 --> 00:02:17.300\nit'll give you just tons of information,\nright?\n\n42\n00:02:17.300 --> 00:02:20.100\nIt's a pretty neat system,\na pretty neat protocol, and\n\n43\n00:02:20.100 --> 00:02:22.200\nit's pretty easy to configure, right?\n\n44\n00:02:22.200 --> 00:02:25.390\nNow, we've seen SNMP\nconfigurations in other episodes,\n\n45\n00:02:25.390 --> 00:02:28.560\nbut just to kinda do a quick refresher\nhere, I'll take this router and\n\n46\n00:02:28.560 --> 00:02:30.050\nI'll get it configured for SNMPs.\n\n47\n00:02:30.050 --> 00:02:35.485\nSo, on Cisco routers,\nthey usually don't run SNMP by default.\n\n48\n00:02:35.485 --> 00:02:38.405\nSwitches, firewalls, same thing,\nthey usually don't run it by default.\n\n49\n00:02:38.405 --> 00:02:41.235\nWe got to get in and turn it on,\nand fortunately turning it on\n\n50\n00:02:41.235 --> 00:02:43.845\nis just a matter of creating\nwhat's called an SNMP community.\n\n51\n00:02:43.845 --> 00:02:49.145\nSo if you run SNMP-server, we can tell it\nthat we're going to create a server and\n\n52\n00:02:49.145 --> 00:02:50.655\nthat we're going to have a community.\n\n53\n00:02:50.655 --> 00:02:53.418\nYou'll see it's one of those\nfirst options right there.\n\n54\n00:02:53.418 --> 00:02:58.510\nTo go in and create that community,\nand I'll call it, we'll do public,\n\n55\n00:02:58.510 --> 00:03:03.120\nand I'm just gonna make this a read\nonly community, now what does that mean?\n\n56\n00:03:03.120 --> 00:03:08.490\nThat means that somebody can reach out to\nthis router and ask it questions via SNMP.\n\n57\n00:03:08.490 --> 00:03:11.570\nThey can say,\nhey how many interfaces do you have?\n\n58\n00:03:11.570 --> 00:03:13.210\nWhat's the bandwidth of that interface?\n\n59\n00:03:13.210 --> 00:03:15.180\nWhat version of iOS are you running?\n\n60\n00:03:15.180 --> 00:03:16.570\nWhat, what's this, what's that?\n\n61\n00:03:16.570 --> 00:03:20.800\nIt can ask it information and\nSNMP is gonna give it the answer.\n\n62\n00:03:20.800 --> 00:03:21.390\nRight?\n\n63\n00:03:21.390 --> 00:03:24.140\nAnd it can read and that's it.\n\n64\n00:03:24.140 --> 00:03:27.720\nBut you can actually do read-write where\nyou can push changes like, all right,\n\n65\n00:03:27.720 --> 00:03:29.630\ntell me about your interface,\nwhat bandwidth does it have?\n\n66\n00:03:29.630 --> 00:03:32.504\nOkay, I'm going to push a new\nbandwidth limit to your interface, and\n\n67\n00:03:32.504 --> 00:03:33.537\nyou can push it via SNMP.\n\n68\n00:03:33.537 --> 00:03:34.271\nThat's pretty advanced.\n\n69\n00:03:34.271 --> 00:03:35.452\n>> Now what you asked about, CIS log.\n\n70\n00:03:35.452 --> 00:03:37.061\n>> Mm-hm.\n\n71\n00:03:37.061 --> 00:03:40.270\n>> With CIS log, we're getting log\nmessages generated on the router or\n\n72\n00:03:40.270 --> 00:03:40.990\nswitch, and\n\n73\n00:03:40.990 --> 00:03:46.420\nwe're sending them out to a server,\nwell, SNMP by default, isn't like that.\n\n74\n00:03:46.420 --> 00:03:49.850\nIt's not gonna tell you about a problem,\nyou have to ask it, right?\n\n75\n00:03:49.850 --> 00:03:51.710\nIt's kind of like when people\nhave a conversation and\n\n76\n00:03:51.710 --> 00:03:57.700\nsay Wes you didn't tell me that I had\na piece of Kleenex stuck to my face.\n\n77\n00:03:57.700 --> 00:03:59.600\nAnd you say, well you didn't ask.\n\n78\n00:03:59.600 --> 00:04:01.406\nRight?\nThat's how SNMP is versus CIS\n\n79\n00:04:01.406 --> 00:04:03.060\nlog that would have told me.\n\n80\n00:04:03.060 --> 00:04:06.690\nNow you can configure what\nare called SNMP traps.\n\n81\n00:04:06.690 --> 00:04:10.370\nAnd in a SNMP trap is where it starts\nto function more like CIS log,\n\n82\n00:04:10.370 --> 00:04:14.550\nwhere it says hey this happened, I'm\ngoing to force it and tell you about it.\n\n83\n00:04:14.550 --> 00:04:15.150\nAll right.\n\n84\n00:04:15.150 --> 00:04:16.460\nBut that's not the default.\n\n85\n00:04:16.460 --> 00:04:22.190\nSo, what I've done right here, this one\ncommand that turned on SNMP, it opened\n\n86\n00:04:22.190 --> 00:04:25.640\nit up for people to be able to ask it\nquestions if they know the community name,\n\n87\n00:04:25.640 --> 00:04:27.515\nand I just used the name of public,\nyou can call it whatever you want,\n\n88\n00:04:27.515 --> 00:04:30.970\nyou can call it Bob, people just\nhave to know the community name.\n\n89\n00:04:30.970 --> 00:04:34.860\nThey can now start to ask it questions and\nit will give us answers.\n\n90\n00:04:34.860 --> 00:04:36.790\nSo, pretty simple to get implemented, but\n\n91\n00:04:36.790 --> 00:04:39.140\nwe'll probably need to tweak it to\nget it to work the way that we want.\n\n92\n00:04:40.180 --> 00:04:42.940\nThe biggest challenge\nthat I have with SNMP is,\n\n93\n00:04:42.940 --> 00:04:45.320\nit's not terribly easy to use, right?\n\n94\n00:04:45.320 --> 00:04:51.210\nSo, if I have a router or switch or\nsomething that's running SNMP and I wanna\n\n95\n00:04:51.210 --> 00:04:55.300\nreach out and get some of the information\nout of it, well, it's all built upon what\n\n96\n00:04:55.300 --> 00:04:59.874\nwe call OIDs and you can actually use,\nlike I'm on a mac here and so\n\n97\n00:04:59.874 --> 00:05:04.930\nthere's a command line usually called SNMP\nwalk, and I'm just gonna use SMNP walk.\n\n98\n00:05:04.930 --> 00:05:08.630\nAnd I'm going to reach out to that\nrouter and ask it some information.\n\n99\n00:05:08.630 --> 00:05:12.180\nNow,I need to tell it what\nversion of SNMP I'm running and\n\n100\n00:05:12.180 --> 00:05:14.010\nI didn't actually set that\nwhen we turned it on.\n\n101\n00:05:14.010 --> 00:05:16.830\nI just did SNMP server and\nset a community.\n\n102\n00:05:16.830 --> 00:05:17.460\nRight?\n\n103\n00:05:17.460 --> 00:05:20.750\nBut you can actually set the version for\nyour community.\n\n104\n00:05:20.750 --> 00:05:25.040\nAnd if I go back here and do like a\nquestion mark you'll see where we can set\n\n105\n00:05:25.040 --> 00:05:28.880\nother things like the ACL if we wanna\nlimit who has access and so on.\n\n106\n00:05:28.880 --> 00:05:32.110\nAnd you can define what\nversion you wanna run at too.\n\n107\n00:05:32.110 --> 00:05:38.560\nNow for me if I'm running in version\n2C versus version 3 or whatever,\n\n108\n00:05:38.560 --> 00:05:41.400\nI'm not really gonna take advantage\nof a lot of those other features.\n\n109\n00:05:41.400 --> 00:05:42.910\nBut for some people they will.\n\n110\n00:05:42.910 --> 00:05:45.670\nIf you need to run in version three for\nexample, you wanna have user names and\n\n111\n00:05:45.670 --> 00:05:46.560\npasswords, right?\n\n112\n00:05:46.560 --> 00:05:49.370\nYou can switch over to the version\nthree mode and then knock that out.\n\n113\n00:05:49.370 --> 00:05:53.000\nIn my scenario, though,\nI'm not too terribly worried about that.\n\n114\n00:05:53.000 --> 00:05:54.950\nAll right, so I'm gonna reach\nout to this other system and\n\n115\n00:05:56.260 --> 00:05:58.610\nI'm gonna query some of that data.\n\n116\n00:05:58.610 --> 00:06:01.970\nSo, I'm gonna reach out to it,\nand I'll do a 2c query on it.\n\n117\n00:06:01.970 --> 00:06:05.360\nAnd I'm gonna tell it that\nthe community is called public, and\n\n118\n00:06:05.360 --> 00:06:07.510\nthen I'm gonna look for some information.\n\n119\n00:06:07.510 --> 00:06:13.720\nI wanna know what version of\nthe iOS this router's running.\n\n120\n00:06:13.720 --> 00:06:14.340\nOkay?\n\n121\n00:06:14.340 --> 00:06:17.570\nSo if I wanna know the version of the iOS\nwell I need to point at the routers.\n\n122\n00:06:17.570 --> 00:06:20.220\nSo the router's 192.168.0.1.\n\n123\n00:06:20.220 --> 00:06:24.550\nAnd then I need to ask it for\nthe iOS version.\n\n124\n00:06:24.550 --> 00:06:25.622\nAnd to do that, I need an OID.\n\n125\n00:06:25.622 --> 00:06:31.248\nIt's an identifier that says, this is\nthe piece of information that I want,\n\n126\n00:06:31.248 --> 00:06:38.030\nand the OID for iOS version is\n1.3.6.1.4.1.9.9 .25.1.1.1.2.\n\n127\n00:06:38.030 --> 00:06:39.700\n>> Rolls right off the tongue.\n\n128\n00:06:39.700 --> 00:06:44.296\n>> Wow I tell you what.\n\n129\n00:06:44.296 --> 00:06:46.634\n>> This is one of those moments where\nif I didn't have it in my show notes,\n\n130\n00:06:46.634 --> 00:06:47.836\nI wouldn't have known it, right?\n\n131\n00:06:47.836 --> 00:06:50.260\nOIDs are not easy for us to use.\n\n132\n00:06:50.260 --> 00:06:52.880\nAnd when I run that query against it,\nhere it comes back, and\n\n133\n00:06:52.880 --> 00:06:58.240\nI can see, hey, I'm running version\n15.1 in this iOS right, on this router.\n\n134\n00:06:58.240 --> 00:07:00.760\nSo I got the information\nI needed right here.\n\n135\n00:07:00.760 --> 00:07:02.420\nBut it's not very usable is it?\n\n136\n00:07:02.420 --> 00:07:04.900\nSo it's rare that we use SNMP by itself.\n\n137\n00:07:04.900 --> 00:07:08.710\nWe normally use it with third party\nmonitoring software that can go in and\n\n138\n00:07:08.710 --> 00:07:09.540\ntrack that.\n\n139\n00:07:09.540 --> 00:07:13.986\nBecause when it comes to these OIDs,\nthere's tens of thousands of them,\n\n140\n00:07:13.986 --> 00:07:17.941\nthere are tons of them for\nevery different aspect of that system.\n\n141\n00:07:17.941 --> 00:07:21.145\nSo, for example if I use software like,\nwhere's my MIB walker,\n\n142\n00:07:21.145 --> 00:07:22.907\nI've got a MIB walker around here.\n\n143\n00:07:22.907 --> 00:07:27.183\nHere we go, I'm gonna use this MIB walker\nand I'm going to point to that system, and\n\n144\n00:07:27.183 --> 00:07:31.090\nI'm just going to tell it I'm doing\npublic and I'll reach out to it.\n\n145\n00:07:31.090 --> 00:07:33.290\nAnd I'm going to connect, all right.\n\n146\n00:07:33.290 --> 00:07:37.930\nHere it goes, it's walking the OID's,\nit's basically getting all the information\n\n147\n00:07:37.930 --> 00:07:42.440\nthat's available from SNMP and\nit's at 600, and 700.\n\n148\n00:07:42.440 --> 00:07:46.890\nIt's gonna cross 1000 and\nthen 2000 and then 3000.\n\n149\n00:07:46.890 --> 00:07:49.887\nIt's going to take awhile because\nSNMP has a ton of information.\n\n150\n00:07:49.887 --> 00:07:52.078\nSo we're not normally going to\nuse it by itself like this,\n\n151\n00:07:52.078 --> 00:07:53.476\nin fact I'm just going to stop this.\n\n152\n00:07:53.476 --> 00:07:55.810\nWell I'll leave it running\nin the background, why not?\n\n153\n00:07:55.810 --> 00:07:58.352\nBut we're gonna use it with third\nparty software, like this one.\n\n154\n00:07:58.352 --> 00:08:01.869\nSo this is the networking performance\nmonitor from Solar Winds and\n\n155\n00:08:01.869 --> 00:08:05.008\nthey've already done it for\nus, they've already gone and\n\n156\n00:08:05.008 --> 00:08:08.990\nput all the OIDs in the system so it\nknows exactly what to reach out and grab.\n\n157\n00:08:08.990 --> 00:08:11.512\nSo I can add a system like that router and\n\n158\n00:08:11.512 --> 00:08:16.020\nI can give it the SNMP community stream\nand now it's gonna reach out and\n\n159\n00:08:16.020 --> 00:08:20.080\nsee how it just pulled to find\nthe interfaces that I had?\n\n160\n00:08:20.080 --> 00:08:21.750\nI'm gonna select all of this to monitor.\n\n161\n00:08:21.750 --> 00:08:23.800\nHere's the interfaces,\nI guess I don't need to monitor null.\n\n162\n00:08:23.800 --> 00:08:25.390\nThat one's not really gonna help me.\n\n163\n00:08:25.390 --> 00:08:27.480\nI've got a NAT virtual interface.\n\n164\n00:08:27.480 --> 00:08:31.400\nI probably don't care about my NAT rates\nand I'm not using the serial interface.\n\n165\n00:08:31.400 --> 00:08:35.700\nYou tweak it to meet what it is\nthat you need in your environment.\n\n166\n00:08:35.700 --> 00:08:39.420\nAnd then when it's done, it's now gonna\nstart monitoring that system, and\n\n167\n00:08:39.420 --> 00:08:42.960\nevery 30 seconds or five minutes or\nwhatever it's gonna reach out and\n\n168\n00:08:42.960 --> 00:08:45.740\nask it for data, and put it in a database.\n\n169\n00:08:45.740 --> 00:08:49.340\nAnd the cool part about that database\nis I can come in and I can say boy,\n\n170\n00:08:49.340 --> 00:08:51.520\nmy network is running slow today.\n\n171\n00:08:51.520 --> 00:08:53.520\nSo let me check my router.\n\n172\n00:08:53.520 --> 00:08:55.790\nAnd I'm going to go into\none of its interfaces and\n\n173\n00:08:55.790 --> 00:09:00.660\npull up a bandwidth chart or\nsomething like that on it\n\n174\n00:09:00.660 --> 00:09:04.010\nto see am I getting errors,\nam I getting a lot of data.\n\n175\n00:09:04.010 --> 00:09:07.610\nWhat's going on, right, and because I\njust added this one it doesn't have any\n\n176\n00:09:07.610 --> 00:09:11.668\ninformation, but I've got another device\non here that should have some information,\n\n177\n00:09:11.668 --> 00:09:15.640\nand let's just take this one in here,\nI'll take CPU load on this one, right?\n\n178\n00:09:15.640 --> 00:09:19.840\nSo I'm gonna pull up the average\nCPU load on this switch and,\n\n179\n00:09:19.840 --> 00:09:22.110\neven it doesn't have enough good data,\ndoes it?\n\n180\n00:09:22.110 --> 00:09:25.329\nYou have to let these things run for\na while to gather all the information and\n\n181\n00:09:25.329 --> 00:09:28.310\nput it together, and apparently,\nI don't have any good data here.\n\n182\n00:09:28.310 --> 00:09:32.500\nBut we'll actually get it soon\nenough even on the router.\n\n183\n00:09:32.500 --> 00:09:34.820\nHere we go,\nit's starting on the router already.\n\n184\n00:09:34.820 --> 00:09:39.580\nSo I can see these little red bars over\nhere that are showing me that my CPU\n\n185\n00:09:39.580 --> 00:09:43.660\nutilization is really low right now,\nI'm just not pulling a lot.\n\n186\n00:09:43.660 --> 00:09:48.470\nSo that's kind of what we expect\non these and we can watch it.\n\n187\n00:09:48.470 --> 00:09:54.630\nAnd if I see like memory consistently\nclimbing up slowly over time.\n\n188\n00:09:54.630 --> 00:09:56.280\nWell, I know I got a problem.\n\n189\n00:09:56.280 --> 00:09:59.632\nI know my memory shouldn't be climbing\nlike that or maybe my network's growing,\n\n190\n00:09:59.632 --> 00:10:01.150\nI'm adding more employees.\n\n191\n00:10:01.150 --> 00:10:03.920\nLet me give you guys a great\nexample this is a true story.\n\n192\n00:10:03.920 --> 00:10:09.810\nSo I used to work for a bank that had\nabout 100 branchoffs just spread across\n\n193\n00:10:09.810 --> 00:10:15.240\nfour states and at every office\nwe had three Cisco 3560 switches.\n\n194\n00:10:15.240 --> 00:10:18.940\nSo there were three switches at\neach office, about 300 switches.\n\n195\n00:10:18.940 --> 00:10:22.390\nAnd I did a really good job of making\nsure that we always stayed up to date,\n\n196\n00:10:22.390 --> 00:10:25.610\nhad the latest IOSes on them and\nthat things were running smoothly.\n\n197\n00:10:25.610 --> 00:10:29.050\nBut I started to notice that\nall of the switches, all 300,\n\n198\n00:10:29.050 --> 00:10:34.840\nwere locking up and\nrequiring a reboot about every two weeks.\n\n199\n00:10:34.840 --> 00:10:37.160\nAbout every two weeks each switch\nwould have to be rebooted.\n\n200\n00:10:37.160 --> 00:10:39.940\nAnd it didn't all happen at the same\ntime but it was always two weeks apart.\n\n201\n00:10:39.940 --> 00:10:41.820\nAnd I thought that was odd, right?\n\n202\n00:10:41.820 --> 00:10:44.980\nAnd so I started kinda monitoring it and\nlooking into the logs.\n\n203\n00:10:44.980 --> 00:10:45.830\nThere was nothing.\n\n204\n00:10:45.830 --> 00:10:48.130\nCuz you'd have to reboot the switch and\nthe logs would get cleared and\n\n205\n00:10:48.130 --> 00:10:49.300\nI'd go to the syslog server and\n\n206\n00:10:49.300 --> 00:10:51.810\nthere really wasn't anything in\nthere indicated a problem either.\n\n207\n00:10:51.810 --> 00:10:53.770\nIt was just all of a sudden locking up.\n\n208\n00:10:53.770 --> 00:10:57.290\nWell, I used a slightly different\nversion of this software.\n\n209\n00:10:57.290 --> 00:10:59.570\nThis the network performance monitor\nyou run on your own machine.\n\n210\n00:10:59.570 --> 00:11:02.460\nBut they have another one that's\nweb based called Orion and\n\n211\n00:11:02.460 --> 00:11:03.930\nthat's the one I was using.\n\n212\n00:11:03.930 --> 00:11:08.221\nAnd what I was able to see was on the\nswitches, when I pulled up their memory,\n\n213\n00:11:08.221 --> 00:11:12.245\ntheir average memory usage,\nthat you expect to see at a certain level,\n\n214\n00:11:12.245 --> 00:11:17.030\nsee how this router is running at about 34\nmegabytes right now of memory consumed.\n\n215\n00:11:17.030 --> 00:11:20.560\nNow it's got a lot more than 34 megs so\nthat's not a big deal.\n\n216\n00:11:20.560 --> 00:11:24.880\nBut what I saw in the switch is, was\nsteadily, over two weeks that memory usage\n\n217\n00:11:24.880 --> 00:11:28.590\nwould grow until it finally hit a point\nwhere the system was out of memory and\n\n218\n00:11:28.590 --> 00:11:29.890\nthe switch would lock up.\n\n219\n00:11:29.890 --> 00:11:32.230\nAnd so there wasn't anything in the logs.\n\n220\n00:11:32.230 --> 00:11:35.450\nBut because I was querying\nmemory utilization with SNMP and\n\n221\n00:11:35.450 --> 00:11:38.930\nstoring in a database where I\ncould see it as a trend chart,\n\n222\n00:11:38.930 --> 00:11:42.710\nI was able to see that I had a memory\nleak and so I reached out to Cisco and\n\n223\n00:11:42.710 --> 00:11:45.630\nthey worked it through with me and\nwe found that there was a memory\n\n224\n00:11:45.630 --> 00:11:48.670\nleak in that version of the IOS and\nthey put an update out that fixed it.\n\n225\n00:11:48.670 --> 00:11:50.973\nSo we rolled that update out\nthrough all of our switches and\n\n226\n00:11:50.973 --> 00:11:53.470\nthen they started staying up for\nmonths on end with no problem.\n\n227\n00:11:53.470 --> 00:11:57.270\nBut I wouldn't have known that if\nI didn't have the trending data.\n\n228\n00:11:57.270 --> 00:11:59.770\nAnd SNMP is what gave me that data.\n\n229\n00:11:59.770 --> 00:12:04.080\nI can see this steady climb from\nnormal memory all the way up to this\n\n230\n00:12:04.080 --> 00:12:05.020\nhigher level.\n\n231\n00:12:05.020 --> 00:12:07.550\nAnd I can even predict when\nthe switch was going to lock up.\n\n232\n00:12:07.550 --> 00:12:10.540\nAnd so that made it where I could\nactually schedule a reboot on it.\n\n233\n00:12:10.540 --> 00:12:12.090\nInstead of having it happen\nin the middle of the day,\n\n234\n00:12:12.090 --> 00:12:14.950\nI could schedule a reboot\nuntil Cisco got me my fix.\n\n235\n00:12:14.950 --> 00:12:18.190\nAnd in their defense I think it took\nlike a whopping three days to get\n\n236\n00:12:18.190 --> 00:12:19.290\na fix outta them.\n\n237\n00:12:19.290 --> 00:12:22.630\nIt really didn't take a long time,\nonce they had isolated the problem,\n\n238\n00:12:22.630 --> 00:12:24.420\nthe fix came very, very quickly.\n\n239\n00:12:24.420 --> 00:12:27.670\nAnd actually just kinda\nword of caution there.\n\n240\n00:12:27.670 --> 00:12:31.580\nWhen you work with Cisco and they actually\nhave a fix that's available just for\n\n241\n00:12:31.580 --> 00:12:34.500\nyou they'll normally give\nyou an experimental release.\n\n242\n00:12:34.500 --> 00:12:36.720\nAnd in your IOS file name\nthere'll be an X in there.\n\n243\n00:12:36.720 --> 00:12:39.350\nIf you ever see and X in the file\nname it's an experimental release and\n\n244\n00:12:39.350 --> 00:12:41.280\nit's usually designed for one customer.\n\n245\n00:12:41.280 --> 00:12:44.210\nSo if you're just downloading\nrandom IOS files and\n\n246\n00:12:44.210 --> 00:12:47.090\nyou get a hold of one of those X ones you\ndon't want to use those in production\n\n247\n00:12:47.090 --> 00:12:49.120\nunless it was specifically made for you.\n\n248\n00:12:49.120 --> 00:12:50.540\nThat's the only time it's okay.\n\n249\n00:12:50.540 --> 00:12:51.680\nAnd so that's how we were.\n\n250\n00:12:51.680 --> 00:12:54.360\nWe ran on one of those X releases for\na week or two.\n\n251\n00:12:54.360 --> 00:12:57.920\nBefore Cisco finally pushed out\nthe next master out to everybody.\n\n252\n00:12:57.920 --> 00:13:01.226\nSo that's where this information\nbecomes really handy.\n\n253\n00:13:01.226 --> 00:13:06.515\nAnd so SNMP, very powerful gives\nus a lot of really good data and\n\n254\n00:13:06.515 --> 00:13:10.055\ncan help you to find problems you\notherwise wouldn't be able to spot.\n\n255\n00:13:10.055 --> 00:13:13.585\n>> Very good, so when it comes\ndown to it being a little bit more\n\n256\n00:13:13.585 --> 00:13:17.855\nproactive on this and being able to see\nthat, hey, I can see that there's a trend\n\n257\n00:13:17.855 --> 00:13:21.435\nspike in the utilization and you don't\nhave to wait until that switch is offline.\n\n258\n00:13:21.435 --> 00:13:24.530\nAnd you get all these calls and\nwell, now we have problems.\n\n259\n00:13:24.530 --> 00:13:25.860\nSo what do we got next here, Don?\n\n260\n00:13:25.860 --> 00:13:29.720\n>> All right, well so\nSNMP does some good stuff, right?\n\n261\n00:13:29.720 --> 00:13:32.210\nBut there's some things\nthat it just can't do.\n\n262\n00:13:32.210 --> 00:13:37.920\nAnd Wes, we were talking before the show\nabout like, what if I get a call,\n\n263\n00:13:37.920 --> 00:13:42.080\na support ticket, and somebody says hey,\nthe network is slow, all right?\n\n264\n00:13:42.080 --> 00:13:45.890\nSo I fire up SNMP and I say well,\nlet me take a look at that interface and\n\n265\n00:13:45.890 --> 00:13:47.890\none it's what's its average bandwidth?\n\n266\n00:13:47.890 --> 00:13:51.310\nI wonder if I have any good data,\nif I've waited long enough now.\n\n267\n00:13:51.310 --> 00:13:51.847\nNo, still not.\n\n268\n00:13:51.847 --> 00:13:55.480\n[LAUGH] If I wait long enough this'll\nactually start to populate and\n\n269\n00:13:55.480 --> 00:13:57.550\nshow how much bandwidth\nthat I'm using on the link.\n\n270\n00:13:57.550 --> 00:14:00.690\nBut it'll start to populate and\nI can look at it, and\n\n271\n00:14:00.690 --> 00:14:03.530\nI can look at it and\nsay wow we're at 98% utilization.\n\n272\n00:14:03.530 --> 00:14:06.610\nWe're consuming all this bandwidth\non the line, I got a problem.\n\n273\n00:14:07.650 --> 00:14:09.990\nBut Where do I go from there?\n\n274\n00:14:09.990 --> 00:14:14.980\nWell, SNMP doesn't tell me who's\nusing that bandwidth, right?\n\n275\n00:14:14.980 --> 00:14:17.270\nIt just tells me that I\nam using the bandwidth.\n\n276\n00:14:17.270 --> 00:14:20.390\nAnd so I don't really have a good\nway to break that down and\n\n277\n00:14:20.390 --> 00:14:22.370\nfind out the nitty gritty details.\n\n278\n00:14:22.370 --> 00:14:27.570\nSo, while SNMP is really useful\nIt's not the be all end all\n\n279\n00:14:27.570 --> 00:14:29.170\nof monitoring solutions.\n\n280\n00:14:29.170 --> 00:14:32.680\nSo in the past what we would do is we\nwould fire up the Network Sniffer, right?\n\n281\n00:14:32.680 --> 00:14:36.590\nOkay I'm at 98% bandwidth utilization,\nwho's doing that?\n\n282\n00:14:36.590 --> 00:14:38.020\nWho's consuming all that bandwidth?\n\n283\n00:14:38.020 --> 00:14:43.460\nSo I fire up a sniffer, I do a span and do\nthe switchboard analyzer I mirror the port\n\n284\n00:14:43.460 --> 00:14:46.850\ntraffic from my router over to my laptop\nand I start recording the traffic and\n\n285\n00:14:46.850 --> 00:14:49.220\nI look and I can analyze it and\nfind out, all right.\n\n286\n00:14:49.220 --> 00:14:51.240\nBut that's a lot of work.\n\n287\n00:14:51.240 --> 00:14:54.920\nWell CISCO routers and switches actually\nhave a technology built into them\n\n288\n00:14:54.920 --> 00:14:57.910\nthat can do that same thing, all right.\n\n289\n00:14:57.910 --> 00:15:03.420\nWhat they do is they can monitor\nthe traffickers going through them,\n\n290\n00:15:03.420 --> 00:15:05.170\nand instead of giving you the raw data,\n\n291\n00:15:05.170 --> 00:15:08.050\nlike when I run a sniffer,\nI'm getting the actual payload.\n\n292\n00:15:08.050 --> 00:15:10.780\nSo if there's a terabyte of\ndata moving across the network,\n\n293\n00:15:10.780 --> 00:15:13.630\nmy capture file is going\nto be a terabyte in size.\n\n294\n00:15:13.630 --> 00:15:16.965\nBut Cisco routers and switches have\na technology in them called NetFlow.\n\n295\n00:15:16.965 --> 00:15:20.700\nAnd what NetFlow does is it says, hey when\nyou're done trouble shooting the network\n\n296\n00:15:20.700 --> 00:15:23.400\nyou usually don't care about the payload.\n\n297\n00:15:23.400 --> 00:15:25.950\nHeck half the time the payload's\nencrypted these days any way so\n\n298\n00:15:25.950 --> 00:15:27.360\nif you get it what good does it do you?\n\n299\n00:15:27.360 --> 00:15:28.690\nNothing, right?\n\n300\n00:15:28.690 --> 00:15:34.110\nSo instead what it does is it\nrecords kind of the metadata,\n\n301\n00:15:34.110 --> 00:15:36.950\nto use our current jargon, right?\n\n302\n00:15:36.950 --> 00:15:39.190\nMeta.\nSo, it gives that metadata information,\n\n303\n00:15:39.190 --> 00:15:42.580\njust the kind of description\nof the communication.\n\n304\n00:15:42.580 --> 00:15:43.460\nWhat was the source IP?\n\n305\n00:15:43.460 --> 00:15:44.750\nWhat was the destination IP?\n\n306\n00:15:44.750 --> 00:15:47.085\nWhat was the source MAC and\nthe destination MAC?\n\n307\n00:15:47.085 --> 00:15:49.095\nWhat protocol was it using?\n\n308\n00:15:49.095 --> 00:15:51.805\nHow big was the packet size wise?\n\n309\n00:15:51.805 --> 00:15:55.484\nNot the actual payload,\njust how big it happened to be.\n\n310\n00:15:55.484 --> 00:15:58.701\nAnd it records that information\nIt puts it into a database and\n\n311\n00:15:58.701 --> 00:16:03.130\nthat's actually a very small amount of\ndata because you've taken on the payload.\n\n312\n00:16:03.130 --> 00:16:05.580\nAnd TCP headers are pretty small as it is.\n\n313\n00:16:05.580 --> 00:16:07.820\nIP headers, your letter two headers.\n\n314\n00:16:07.820 --> 00:16:11.950\nThey're all pretty small and it's\nreally just getting a sub set of that.\n\n315\n00:16:11.950 --> 00:16:15.000\nBut it's able to string it together in\na way that we can look at a system and\n\n316\n00:16:15.000 --> 00:16:17.560\nsee how we're at 98%\nbandwidth utilization.\n\n317\n00:16:17.560 --> 00:16:20.760\nWho is consuming it, and\nwe can find out and see.\n\n318\n00:16:20.760 --> 00:16:24.670\nAnd that's all done through\na service called NetFlow.\n\n319\n00:16:24.670 --> 00:16:28.620\nNow NetFlow is developed by Cisco, they're\nworking on making a bigger standard\n\n320\n00:16:28.620 --> 00:16:31.900\nwhere other vendors can support it,\nbut on most Cisco equipment,\n\n321\n00:16:31.900 --> 00:16:36.050\nyou can fire and\nI say most because behind me here,\n\n322\n00:16:36.050 --> 00:16:39.090\nyou guys can't see it,\nis a stack of Cisco equipment.\n\n323\n00:16:39.090 --> 00:16:43.590\nAnd one of the switches that I've been\nusing in the show a lot of a 3750.\n\n324\n00:16:43.590 --> 00:16:47.075\nAnd I told the guys here at the office\nlike I'm done net folding 3750s\n\n325\n00:16:47.075 --> 00:16:47.730\nseveral times.\n\n326\n00:16:47.730 --> 00:16:48.630\nNo big deal.\n\n327\n00:16:48.630 --> 00:16:51.270\nWell in the first taping of this\nshow I tried to turn it on.\n\n328\n00:16:51.270 --> 00:16:52.853\nIt wasn't there and\nI was like what the heck's going on?\n\n329\n00:16:52.853 --> 00:16:59.250\nWell, I've got a 3750G behind me,\nonly the 3750Xs support NetFlow.\n\n330\n00:16:59.250 --> 00:17:00.770\nSo we've got to be aware of that.\n\n331\n00:17:00.770 --> 00:17:03.620\nYou've got to be aware that not\nall equipment does support it.\n\n332\n00:17:03.620 --> 00:17:05.380\nSo, You gotta check and see.\n\n333\n00:17:05.380 --> 00:17:07.670\nNow I'm gonna use\na router in this show and\n\n334\n00:17:07.670 --> 00:17:11.050\npretty much every router made in the last\nfour or five years supports NetFlow.\n\n335\n00:17:11.050 --> 00:17:12.930\nIt's on the switches where\nit gets a little bit flaky.\n\n336\n00:17:12.930 --> 00:17:14.780\nNot all of them do NetFlow.\n\n337\n00:17:14.780 --> 00:17:17.269\nSo I've got this router here\nthat's running the 15.1 IOS.\n\n338\n00:17:17.269 --> 00:17:21.076\nAnd I can just verify that, right,\nIf I look at it I'm running 15.1-1.\n\n339\n00:17:21.076 --> 00:17:22.655\nWe saw that with SNMP earlier, right?\n\n340\n00:17:22.655 --> 00:17:26.430\nSo I know I'm running that, and\nI should be good to go to support NetFlow.\n\n341\n00:17:26.430 --> 00:17:28.510\nIt's pretty easy to verify,\nif you support it or not.\n\n342\n00:17:28.510 --> 00:17:30.820\nIf you jump into your configuration.\n\n343\n00:17:30.820 --> 00:17:35.960\nIf you just do a IP flow ?, if you see all\nthe various flow commands, you support it.\n\n344\n00:17:35.960 --> 00:17:38.420\nIf you don't see the flow commands,\nyou don't, right?\n\n345\n00:17:38.420 --> 00:17:41.050\nNetFlow, they just call it Flow here,\nyou actually see\n\n346\n00:17:41.050 --> 00:17:44.310\na couple of different names for it because\nover the years it evolved a little bit.\n\n347\n00:17:44.310 --> 00:17:46.360\nBut NetFlow is the official name.\n\n348\n00:17:46.360 --> 00:17:47.460\nAnd when we look at it,\n\n349\n00:17:47.460 --> 00:17:49.790\nyou'll see that there's a lot of\ndifferent commands that we can do here.\n\n350\n00:17:49.790 --> 00:17:53.390\nAnd what we're really doing is\nwhat's called a flow cache.\n\n351\n00:17:53.390 --> 00:17:58.240\nWe're caching data about each flow of\ntraffic that's going across the network,\n\n352\n00:17:58.240 --> 00:18:01.010\nand just storing that to be\ninterpreted by another machine.\n\n353\n00:18:01.010 --> 00:18:05.160\nNow we don't actually store it\non the router itself, all right?\n\n354\n00:18:05.160 --> 00:18:09.220\nIt's gonna gather the data and\nit's going to do what's called an export.\n\n355\n00:18:09.220 --> 00:18:12.490\nWe export the data to a third\nparty monitoring system.\n\n356\n00:18:12.490 --> 00:18:15.460\nAnd Cisco doesn't actually have a third\nparty monitoring system for you or\n\n357\n00:18:15.460 --> 00:18:18.180\na first party monitoring system I guess,\nif it's Cisco.\n\n358\n00:18:18.180 --> 00:18:21.220\nSo, they expect you to bring\nin somebody else's software.\n\n359\n00:18:21.220 --> 00:18:23.940\nSo, I'm already using the Solar Winds\ntoolkit here so I'm gonna go ahead and\n\n360\n00:18:23.940 --> 00:18:27.980\nuse the Solar Winds NetFlow monitor also\nand that way I can send the data to it and\n\n361\n00:18:27.980 --> 00:18:29.420\nget it reported.\n\n362\n00:18:29.420 --> 00:18:33.455\nIf we wanna configure NetFlow, what we\nneed to do is just a couple of things.\n\n363\n00:18:33.455 --> 00:18:36.345\nFirst off, we need to figure out\nwhat interface we want to monitor.\n\n364\n00:18:36.345 --> 00:18:41.255\nSo if you look on my router, I've got\na couple of different interfaces, right?\n\n365\n00:18:41.255 --> 00:18:44.040\nI've got my internal interface,\nwhere my clients connect and\n\n366\n00:18:44.040 --> 00:18:47.090\nI've got my external interface\nthat sends me out to the Internet.\n\n367\n00:18:47.090 --> 00:18:51.970\nNow I also need to be aware of the flow,\nthe direction of the flow.\n\n368\n00:18:51.970 --> 00:18:54.990\nAm I wanting to monitor the traffic\ngoing out of the network or\n\n369\n00:18:54.990 --> 00:18:58.430\nmonitor the traffic coming into the\nnetwork or do I wanna monitor both, right?\n\n370\n00:18:58.430 --> 00:19:00.430\nYou can certainly do both.\n\n371\n00:19:00.430 --> 00:19:03.200\nBut if I'm dealing with\na bandwidth constraint\n\n372\n00:19:03.200 --> 00:19:08.000\npeople are downloading too much data and\nso I'm just running out of bandwidth.\n\n373\n00:19:08.000 --> 00:19:13.680\nWell then what I need to do is\nmonitor either the incoming\n\n374\n00:19:13.680 --> 00:19:18.690\ntraffic on my Internet connection or\nthe outgoing traffic on my LAN connection.\n\n375\n00:19:18.690 --> 00:19:20.240\nThat's why I need to know the direction,\n\n376\n00:19:20.240 --> 00:19:23.800\nthink of it as ACLs, when we apply ACL's\nwe need to apply a direction to them.\n\n377\n00:19:23.800 --> 00:19:27.350\nSame thing with NetFlow we use a direction\nto dictate the traffic from our monitor.\n\n378\n00:19:27.350 --> 00:19:31.090\nIf I'm wanting to do monitor uploads\nthen its just the opposite right?\n\n379\n00:19:31.090 --> 00:19:34.170\nI need to monitor the inbound\ntraffic on my LAN connection and\n\n380\n00:19:34.170 --> 00:19:35.470\nthe outbound traffic on my WAM.\n\n381\n00:19:35.470 --> 00:19:37.900\nBut its usually downloads, right?\n\n382\n00:19:37.900 --> 00:19:41.500\nYou got some users somewhere in your\nbuilding that's watching movies on Netflix\n\n383\n00:19:41.500 --> 00:19:45.170\nright or downloading with Bittorrent and\nthat's what you want to see.\n\n384\n00:19:45.170 --> 00:19:49.580\nSo we normally monitor\nthe incoming of the WAN, but\n\n385\n00:19:49.580 --> 00:19:51.240\nthere is a limitation on\nthe incoming with the WAN.\n\n386\n00:19:51.240 --> 00:19:56.570\nIf somebody has a VPN tunnel\nthat terminates on this router,\n\n387\n00:19:56.570 --> 00:19:59.030\nwhen it's incoming on the WAN,\nthat data's encrypted and\n\n388\n00:19:59.030 --> 00:20:01.530\nyou're not gonna get a lot of\nbenefit out of it, all right?\n\n389\n00:20:01.530 --> 00:20:04.952\nVersus if you measure it\non the outgoing on the LAN.\n\n390\n00:20:04.952 --> 00:20:07.650\nIt's gonna be decrypted at that\npoint because the VPN tunnel\n\n391\n00:20:07.650 --> 00:20:08.750\nterminated on the router.\n\n392\n00:20:08.750 --> 00:20:11.080\nSo, depending on\nthe interface you monitor,\n\n393\n00:20:11.080 --> 00:20:14.030\nit may influence whether that\ntraffic is encrypted or decrypted.\n\n394\n00:20:14.030 --> 00:20:16.202\nSo, be aware of that for your monitoring.\n\n395\n00:20:16.202 --> 00:20:19.008\nAll right, so I'm going to\nmonitor it on my LAN interface.\n\n396\n00:20:19.008 --> 00:20:21.500\nAnd I'm gonna get the traffic as\nit comes out of the LAN interface.\n\n397\n00:20:21.500 --> 00:20:24.080\nSo these will be downloads that\nmy internal users are doing.\n\n398\n00:20:24.080 --> 00:20:27.400\nAnd so I'm just going to get into that\ninterface, and I'm going to say ip\n\n399\n00:20:27.400 --> 00:20:32.220\nflow and you'll see where I can\ndo ingress or egress, all right.\n\n400\n00:20:32.220 --> 00:20:33.710\nAnd I'm gonna specify egress.\n\n401\n00:20:33.710 --> 00:20:37.840\nI wanna monitor the traffic\nas it comes out of this port.\n\n402\n00:20:37.840 --> 00:20:42.720\nNow when you do that notice that there's\nalso this monitor command, all right.\n\n403\n00:20:42.720 --> 00:20:44.870\nWhat a monitor does is allow\nyou to apply a filter.\n\n404\n00:20:44.870 --> 00:20:46.930\nMaybe I don't wanna get all the traffic.\n\n405\n00:20:46.930 --> 00:20:50.720\nMaybe I'm targeting this one IP\nspecifically so I can create a filter.\n\n406\n00:20:50.720 --> 00:20:52.530\nIt's basically an ACL that we apply and\n\n407\n00:20:52.530 --> 00:20:55.010\nwe limit the traffic that we're\nmonitoring now, all right.\n\n408\n00:20:55.010 --> 00:20:56.110\nBut for me, I just want everything.\n\n409\n00:20:56.110 --> 00:20:58.430\nSo, IP, flow, egress,\nthat's all I need, right.\n\n410\n00:20:58.430 --> 00:21:00.332\nSo, now that I've got that turned on,\n\n411\n00:21:00.332 --> 00:21:03.051\nthere's just two other things\nI need to do, all right.\n\n412\n00:21:03.051 --> 00:21:06.970\nOne, I need to decide which\nversion of NetFlow I'm gonna run.\n\n413\n00:21:06.970 --> 00:21:10.000\nThere's two main versions,\nversion five and version nine.\n\n414\n00:21:10.000 --> 00:21:12.209\nDepending on the third party\nsoftware I'm gonna use,\n\n415\n00:21:12.209 --> 00:21:14.030\nit's gonna need one or the other.\n\n416\n00:21:14.030 --> 00:21:16.506\nNow, I mentioned I'm going to\nuse the Solar Winds one, right?\n\n417\n00:21:16.506 --> 00:21:18.293\nSo if I fire up my Solar Winds.\n\n418\n00:21:18.293 --> 00:21:18.995\nOh, hey,\n\n419\n00:21:18.995 --> 00:21:24.130\nmy MIB walker finally finished back\nhere that was running in the background.\n\n420\n00:21:24.130 --> 00:21:25.030\n>> It got some information.\n\n421\n00:21:25.030 --> 00:21:27.070\n>> Yeah, so here's all of those.\n\n422\n00:21:27.070 --> 00:21:29.185\nYou can see there are literally\nthousands of them.\n\n423\n00:21:29.185 --> 00:21:31.732\n21,813 entries that I got.\n\n424\n00:21:31.732 --> 00:21:36.457\nBut I'm gonna use the NetFlow real time\nmonitor here and basically when you set it\n\n425\n00:21:36.457 --> 00:21:41.685\nup to run it's gonna monitor on a port and\nyou'll see mine's defaulting to 2,055.\n\n426\n00:21:41.685 --> 00:21:45.888\nBut, you've got a few different\noptions you can kind of tweak in here,\n\n427\n00:21:45.888 --> 00:21:48.199\nand set different things up coming in,\n\n428\n00:21:48.199 --> 00:21:52.420\nand define your devices and it can\neven help you configure your device.\n\n429\n00:21:52.420 --> 00:21:56.950\nSo like, if I go here to Tools, NetFlow\nConfigurator, you can choose a device, and\n\n430\n00:21:56.950 --> 00:21:59.200\nit'll give you a sample\nconfig to apply to it.\n\n431\n00:21:59.200 --> 00:22:00.920\nNow, I haven't defined\nany devices in here.\n\n432\n00:22:00.920 --> 00:22:06.090\nSo I'm gonna add a NetFlow device and\nI'll specify an IP address, and\n\n433\n00:22:06.090 --> 00:22:12.340\nit's gonna use an SNMP community string\nto talk to the device just to find it.\n\n434\n00:22:12.340 --> 00:22:15.030\nSo I'm just going to add that so\nit can find the device.\n\n435\n00:22:15.030 --> 00:22:16.400\nThere, it found it.\n\n436\n00:22:16.400 --> 00:22:18.680\nSo now it knows about the device.\n\n437\n00:22:18.680 --> 00:22:23.114\nAnd now I can say, if I want to monitor\nthis interface, I can choose it and\n\n438\n00:22:23.114 --> 00:22:28.058\nI can go to the NetFlow Configurator and,\noh shoot, I'm in the eval version so it\n\n439\n00:22:28.058 --> 00:22:32.785\nmight not let me do it, but it'll actually\ngive you the sample config to go and\n\n440\n00:22:32.785 --> 00:22:36.540\nput on your router to get it\nconfigured and get it doing that.\n\n441\n00:22:36.540 --> 00:22:39.440\nSo, actually is it about to let me?\n\n442\n00:22:39.440 --> 00:22:40.427\nLet's see if it'll let me do it here.\n\n443\n00:22:40.427 --> 00:22:42.359\nSo, we're just doing public.\n\n444\n00:22:43.570 --> 00:22:47.490\nAnd oh it needs, if you do rewrite it\nwill actually push the config to it.\n\n445\n00:22:47.490 --> 00:22:48.860\nAnd I'll do the config myself.\n\n446\n00:22:48.860 --> 00:22:50.290\nBut the port number's what's important.\n\n447\n00:22:50.290 --> 00:22:51.390\nAnd then the version number.\n\n448\n00:22:51.390 --> 00:22:53.920\nIs it version five or is it version nine?\n\n449\n00:22:53.920 --> 00:22:56.650\nAnd this one if I remember right it's\nrunning version nine by default.\n\n450\n00:22:56.650 --> 00:22:58.140\nAnd I don't think we can even change it.\n\n451\n00:22:58.140 --> 00:23:01.680\nI think it's always stuck that way so\nI am okay with that.\n\n452\n00:23:01.680 --> 00:23:06.552\nI'm gonna jump back over to my router and\nI'm gonna come in here and\n\n453\n00:23:06.552 --> 00:23:08.590\njust say ip flow-export.\n\n454\n00:23:08.590 --> 00:23:12.980\nRight, I'm exporting my data and\nI'm gonna export of this version nine.\n\n455\n00:23:12.980 --> 00:23:14.730\nif I want to run version\nfive I can do that.\n\n456\n00:23:14.730 --> 00:23:16.500\nYou'll see this router\neven supports version one.\n\n457\n00:23:16.500 --> 00:23:19.050\nI've never actually seen any\nsoftware that supports version one.\n\n458\n00:23:19.050 --> 00:23:21.060\nI'm sure something had to or\nit wouldn't exist.\n\n459\n00:23:21.060 --> 00:23:23.430\nBut I'm gonna do version nine, okay?\n\n460\n00:23:23.430 --> 00:23:26.200\nSo now I'm ready to export that data.\n\n461\n00:23:26.200 --> 00:23:27.840\nI need to tell it who to export it to.\n\n462\n00:23:27.840 --> 00:23:33.000\nSo I'm gonna go ahead and\njust ip flow-export destination and\n\n463\n00:23:33.000 --> 00:23:36.285\nI'm gonna put the IP of my\nworkstation here, this guy.\n\n464\n00:23:36.285 --> 00:23:42.607\nNow my workstation is 101 so\nI'm gonna put 192.168.0.101.\n\n465\n00:23:42.607 --> 00:23:45.740\nAnd if just press Enter it's\ngonna use the default port.\n\n466\n00:23:45.740 --> 00:23:49.070\nUnfortunately there's a little bit of\ndebate over what is the default port.\n\n467\n00:23:49.070 --> 00:23:52.010\nYou'll see Cisco uses 5000 for\na lot of stuff.\n\n468\n00:23:52.010 --> 00:23:56.151\nBut notice back here in my\nsoftware it's defaulting to 2055.\n\n469\n00:23:56.151 --> 00:23:58.906\nSo I'm just gonna come in and\nmanually type that port number in so\n\n470\n00:23:58.906 --> 00:24:00.959\nthat I know it's using the right thing,\nokay.\n\n471\n00:24:00.959 --> 00:24:04.499\nNow Whenever I generate\ntraffic on this link,\n\n472\n00:24:04.499 --> 00:24:08.870\nit's gonna be getting\nrecorded as part of Netflow.\n\n473\n00:24:08.870 --> 00:24:11.561\nSo if I were to fire a webpage up and\n\n474\n00:24:11.561 --> 00:24:16.860\nmaybe I'll browse to ITProTV and\nmaybe I start watching a video.\n\n475\n00:24:16.860 --> 00:24:20.340\nSo I want to come in here and\ncheck out a video of Shirley.\n\n476\n00:24:20.340 --> 00:24:23.025\nA site like ours is going to have\nsome kind of video available.\n\n477\n00:24:23.025 --> 00:24:24.960\n>> [LAUGH]\n>> And so I'll jump in here and\n\n478\n00:24:24.960 --> 00:24:28.580\nwe'll take a course.\n\n479\n00:24:28.580 --> 00:24:29.460\nAnd hey, look at that guy.\n\n480\n00:24:29.460 --> 00:24:31.430\n>> I've seen him before.\n\n481\n00:24:31.430 --> 00:24:33.310\n>> Anyhow, so\nI'm gonna start playing this video, right?\n\n482\n00:24:33.310 --> 00:24:34.540\nSo I'm watching this video.\n\n483\n00:24:34.540 --> 00:24:35.820\nI gotta get a discount.\n\n484\n00:24:35.820 --> 00:24:38.800\nAnd so I'm playing the video and\nI'm generating bandwidth, right?\n\n485\n00:24:38.800 --> 00:24:40.550\nI'm going through that router.\n\n486\n00:24:40.550 --> 00:24:44.670\nNow I'm going out to a CDM on the internet\nsaying can you please give me a video.\n\n487\n00:24:44.670 --> 00:24:46.680\nAnd then the CDM is sending\nthe video down to me.\n\n488\n00:24:46.680 --> 00:24:49.510\nSo I'm downloading a video,\nwhich is generating bandwidth.\n\n489\n00:24:49.510 --> 00:24:52.850\nNow how do I know whether\nNetflow if working or not?\n\n490\n00:24:52.850 --> 00:24:55.660\nOkay, well I guess\ntechnically I don't know.\n\n491\n00:24:55.660 --> 00:24:58.000\nBut we can go in and we can verify right?\n\n492\n00:24:58.000 --> 00:25:05.750\nOn the right router the only real command\nwe have to verify is show IP cache flow.\n\n493\n00:25:05.750 --> 00:25:07.910\nAnd that'll show you the cache data.\n\n494\n00:25:07.910 --> 00:25:11.180\nSo I won't actually see the raw data,\nbut I'll see a little bit of the cache.\n\n495\n00:25:11.180 --> 00:25:15.330\nAnd so I can see here like I've\ngot some www, web browsing.\n\n496\n00:25:15.330 --> 00:25:18.890\nI've got other protocols, TCP and UDP,\nand it's starting to show how many\n\n497\n00:25:18.890 --> 00:25:23.120\nflows it's monitoring and\neven some basic statistics down here.\n\n498\n00:25:23.120 --> 00:25:29.520\nAnd so if I look like 192.168.0.100 that's\nmy Mac and I'm watching that video.\n\n499\n00:25:29.520 --> 00:25:32.950\nSo one of these IPs over here will\nbe the video streaming server,\n\n500\n00:25:32.950 --> 00:25:36.330\nI'm gonna assume it's this one\nthat's got 154 packets already.\n\n501\n00:25:36.330 --> 00:25:40.000\nAnd so if I just keep watching this\nthose numbers should continue to change,\n\n502\n00:25:40.000 --> 00:25:43.980\nright, as it continues to play that video\nand the flow is starting to increase.\n\n503\n00:25:43.980 --> 00:25:49.340\nBut notice a moment ago I had one\nthat had a counter of 154 packets and\n\n504\n00:25:49.340 --> 00:25:51.570\nnow the highest one is 78.\n\n505\n00:25:51.570 --> 00:25:54.090\nWhat happened to the one that was 154?\n\n506\n00:25:54.090 --> 00:25:55.610\nWell, that flow is gone.\n\n507\n00:25:55.610 --> 00:25:58.760\nIf I look, the video in the background\nis done, it stopped playing.\n\n508\n00:25:58.760 --> 00:26:03.200\nAnd so when that stopped playing that\nflow is now over and it's out of here.\n\n509\n00:26:03.200 --> 00:26:06.050\nThe router is not actually\nstoring this data.\n\n510\n00:26:06.050 --> 00:26:10.950\nIt's gathering it and it's exporting\nit and then it's forgetting about it.\n\n511\n00:26:10.950 --> 00:26:14.591\nSo if you're not running a software\npackage to monitor that you're losing\n\n512\n00:26:14.591 --> 00:26:15.120\nthe data.\n\n513\n00:26:15.120 --> 00:26:16.730\nYou might as well not\nhave Netflow turned on.\n\n514\n00:26:16.730 --> 00:26:18.700\nThere is no sense in turning it on,\n\n515\n00:26:18.700 --> 00:26:22.400\nunless you got a Netflow receiver\nsomewhere on the network.\n\n516\n00:26:22.400 --> 00:26:23.630\nNow I did.\n\n517\n00:26:23.630 --> 00:26:27.460\nI had this guy up and running but\n[LAUGH] I kind of forgot to hit the start\n\n518\n00:26:27.460 --> 00:26:31.430\nflow capture button, so that's gonna\ninfluence my numbers here a little bit.\n\n519\n00:26:31.430 --> 00:26:34.260\nI can actually see that it is\ngetting some data over here but\n\n520\n00:26:34.260 --> 00:26:36.480\nit's just getting that through SNMP.\n\n521\n00:26:36.480 --> 00:26:38.280\nI'm gonna start the flow-capture.\n\n522\n00:26:38.280 --> 00:26:41.530\nThere we go.\nSo now it's gonna start capturing data.\n\n523\n00:26:41.530 --> 00:26:45.710\nAnd it's running, it's waiting for that\ndata, it's listening, and I can go and\n\n524\n00:26:45.710 --> 00:26:47.695\nstart to generate some more traffic again.\n\n525\n00:26:47.695 --> 00:26:50.040\n[LAUGH] That wasn't\nexactly what I intended.\n\n526\n00:26:50.040 --> 00:26:51.110\nI wonder if it's gonna cache that.\n\n527\n00:26:51.110 --> 00:26:54.790\nI might need to skip to\nsome other video here.\n\n528\n00:26:54.790 --> 00:26:55.710\nAnd here's that guy again.\n\n529\n00:26:55.710 --> 00:26:58.460\nSo I'm just gonna generate\nsome more traffic and\n\n530\n00:26:58.460 --> 00:27:01.640\nit's gonna start doing this and\nsending it over to that Netflow receiver.\n\n531\n00:27:01.640 --> 00:27:02.490\nAnd there we go,\n\n532\n00:27:02.490 --> 00:27:06.620\nI can see the traffic is already starting\nto appear, it's gathering that data.\n\n533\n00:27:06.620 --> 00:27:08.350\nAnd if I look at my conversations,\n\n534\n00:27:08.350 --> 00:27:12.920\nstart breaking this down,\nI can see who is really consuming it.\n\n535\n00:27:12.920 --> 00:27:15.800\nAnd so that video, right here I can see\nit coming out of Alchamie Technologies,\n\n536\n00:27:15.800 --> 00:27:19.610\nthat's one of our CDNs, and we've got\nthat stuff kind of flowing through and\n\n537\n00:27:19.610 --> 00:27:21.355\nI can start to see the information.\n\n538\n00:27:21.355 --> 00:27:24.370\nWho's generating the most communications,\n\n539\n00:27:24.370 --> 00:27:26.780\nwhat they're doing to generate\nthose communications.\n\n540\n00:27:26.780 --> 00:27:29.280\nSo when I look at my laptop\nhere this 192.168.0.100,\n\n541\n00:27:29.280 --> 00:27:34.980\nI start to get a breakdown of\nwho I'm talking to and so on.\n\n542\n00:27:34.980 --> 00:27:37.860\nNow on my outbound traffic\nis what I'm monitoring.\n\n543\n00:27:37.860 --> 00:27:39.980\nThat's why the bottom part\nof the screen is lit up.\n\n544\n00:27:39.980 --> 00:27:42.580\nThe inbound traffic I'm not\nmonitoring on the interface and\n\n545\n00:27:42.580 --> 00:27:45.250\nthat's why I've got this giant\nno data available warning.\n\n546\n00:27:45.250 --> 00:27:48.250\nSo, that top part isn't gonna update for\nme.\n\n547\n00:27:48.250 --> 00:27:50.150\nBut the bottom part is\nwhat I'm monitoring.\n\n548\n00:27:50.150 --> 00:27:51.050\nI can see that data.\n\n549\n00:27:51.050 --> 00:27:53.060\nIn fact,\nlet me just get rid of the inbound.\n\n550\n00:27:53.060 --> 00:27:53.870\nThere we go.\n\n551\n00:27:53.870 --> 00:27:55.600\nAnd now it's a little bit\nmore meaningful for me.\n\n552\n00:27:55.600 --> 00:28:00.510\nSo I can start to see not only who it is\nthat's actually eating up my bandwidth,\n\n553\n00:28:00.510 --> 00:28:02.520\nbut what protocol it is they're using.\n\n554\n00:28:02.520 --> 00:28:04.500\nAnd who it is they're talking to.\n\n555\n00:28:04.500 --> 00:28:06.230\nRight?\nSo, they're watching a video.\n\n556\n00:28:06.230 --> 00:28:09.810\nI can see them talking to a CDN or\nthey're talking to Amazon web services or\n\n557\n00:28:09.810 --> 00:28:11.830\nwhoever, you can spot that information.\n\n558\n00:28:11.830 --> 00:28:17.680\nThis is really good data that your packets\nand protocol analyzer would give you also,\n\n559\n00:28:17.680 --> 00:28:21.670\nbut here we have the benefit of\nnot actually carrying the payload.\n\n560\n00:28:21.670 --> 00:28:25.350\nThis could be a ten gig\nbandwidth connection and\n\n561\n00:28:25.350 --> 00:28:27.120\nI could be on a 100 megabit connection.\n\n562\n00:28:27.120 --> 00:28:30.072\nAnd that would be okay cuz the Netflow\ndata is not gonna be ten gig.\n\n563\n00:28:30.072 --> 00:28:32.610\nIt's gonna be a very, very small subset.\n\n564\n00:28:32.610 --> 00:28:36.290\nSo we don't have the same demands on our\nsystem that we would with a sniffer or\n\n565\n00:28:36.290 --> 00:28:37.060\na protocol analyzer.\n\n566\n00:28:37.060 --> 00:28:38.450\nSo pretty cool stuff.\n\n567\n00:28:38.450 --> 00:28:39.420\n>> Absolutely, very good.\n\n568\n00:28:39.420 --> 00:28:40.170\nWell thanks, Don.\n\n569\n00:28:40.170 --> 00:28:42.920\nIt looks like we're coming\nto the end of this episode.\n\n570\n00:28:42.920 --> 00:28:47.940\nRemember we've talked about SNMP and\nwhy you might use SNMP over things\n\n571\n00:28:47.940 --> 00:28:52.040\nlike the switch port analyzer and CIS log\nand if you're not familiar with what we're\n\n572\n00:28:52.040 --> 00:28:55.630\ntalking about go back and watch some of\nthe earlier episodes and you'll see that.\n\n573\n00:28:55.630 --> 00:28:59.980\nWe also talked about the net flow analyzer\nand actually identifying who it is,\n\n574\n00:28:59.980 --> 00:29:03.700\nthe culprit behind that\nexcessive bandwidth utilization.\n\n575\n00:29:03.700 --> 00:29:06.925\nBut looks like we're gonna go\ninto a part five of this episode.\n\n576\n00:29:06.925 --> 00:29:09.540\n>> [LAUGH]\n>> And we've got much more to come in\n\n577\n00:29:09.540 --> 00:29:13.270\nour Troubleshooting Tools, but until then,\nI've been your host Wesley Bryan.\n\n578\n00:29:13.270 --> 00:29:13.970\n>> And I'm Don Pezet.\n\n579\n00:29:13.970 --> 00:29:15.416\n>> And we'll see you next time.\n\n580\n00:29:15.416 --> 00:29:21.670\n[MUSIC]\n\n",
          "vimeoId": "145146820"
        },
        {
          "description": "In this episode Don and Wes continue their discussion on troubleshooting tools. They look at how to use the Embedded Event Manager(EEM). They discuss the type of events found in the EEM and how to monitor events. They will talk about creating actions that can be applied to the events that are detected. Theydemonstrate using telnet to troubleshoot protocols used to communicate between nodes.",
          "length": "1626",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-1-troubleshooting_tools_pt5-102215-high.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-1-troubleshooting_tools_pt5-102215-high-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-1-troubleshooting_tools_pt5-102215-high-sm.jpg",
          "title": "Troubleshooting Tools Part 5",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:12.372 --> 00:00:15.041\nWelcome back to another exciting\nepisode here at ITProTV.\n\n3\n00:00:15.041 --> 00:00:20.150\nWe're glad that you have joined us\nwe are moving on in a part 5 of\n\n4\n00:00:20.150 --> 00:00:22.900\niOS troubleshooting tools and\n\n5\n00:00:22.900 --> 00:00:27.010\nnobody better here to dive into\nthis topic with us than Don Pezet.\n\n6\n00:00:27.010 --> 00:00:28.260\nDon, how're you doing today, sir?\n\n7\n00:00:28.260 --> 00:00:30.250\n>> I'm doing great, Wes,\nglad to be back on the show and\n\n8\n00:00:30.250 --> 00:00:33.232\nready to continue on with some of the\ngreat troubleshooting tools we've seen.\n\n9\n00:00:33.232 --> 00:00:35.020\nWe're gonna cover one\nof my favorites today,\n\n10\n00:00:35.020 --> 00:00:37.640\nwhich is the embedded event manager.\n\n11\n00:00:37.640 --> 00:00:40.780\nAnd if you've never heard of the EEM,\nI don't blame you.\n\n12\n00:00:40.780 --> 00:00:42.810\nIt's not a very highly publicized feature,\n\n13\n00:00:42.810 --> 00:00:46.360\nit's important in just about every\nCISCO device that's out today.\n\n14\n00:00:46.360 --> 00:00:49.570\nBut it's one that a lot of people just\ndon't know about or don't mess with.\n\n15\n00:00:49.570 --> 00:00:52.270\nIt's kind of one of those unsung\nheroes in the background.\n\n16\n00:00:52.270 --> 00:00:53.690\nAnd what that EEM is, right?\n\n17\n00:00:53.690 --> 00:00:57.985\nThe Embedded Event Manager,\nit's basically a service that runs in\n\n18\n00:00:57.985 --> 00:01:02.370\nthe background on your equipment and\nit watches for stuff to happen.\n\n19\n00:01:02.370 --> 00:01:05.400\nIt says, all right,\nlet me see when some event occurs, right?\n\n20\n00:01:05.400 --> 00:01:06.810\nThat is the event part.\n\n21\n00:01:06.810 --> 00:01:10.390\nAnd then take some kind\nof action about it.\n\n22\n00:01:10.390 --> 00:01:12.730\nThe router or\nthe switch is kind of already doing that.\n\n23\n00:01:12.730 --> 00:01:13.790\nRight?\n\n24\n00:01:13.790 --> 00:01:17.510\nIf an interface goes down and\na routes tied to that interface,\n\n25\n00:01:17.510 --> 00:01:19.900\nit removes the route from\nthe routing table and\n\n26\n00:01:19.900 --> 00:01:23.360\nit generates a log message that\nsays the interface went down.\n\n27\n00:01:23.360 --> 00:01:25.472\nSo those things are already built in and\n\n28\n00:01:25.472 --> 00:01:30.400\nwhat Cisco's built in place is really\nwhat 99% of the people need anyway.\n\n29\n00:01:30.400 --> 00:01:33.160\nBut with the EEM,\nwe can get really advanced.\n\n30\n00:01:33.160 --> 00:01:36.170\nWe can jump in and tell it to\nmonitor all sorts of cool stuff,\n\n31\n00:01:36.170 --> 00:01:40.470\nto do all sorts of neat things and it's\nreally just limited by our imagination,\n\n32\n00:01:40.470 --> 00:01:41.720\nwhatever we come up with.\n\n33\n00:01:41.720 --> 00:01:44.140\nAnd you can really build\nsome cool stuff with it.\n\n34\n00:01:44.140 --> 00:01:44.770\n>> Well, that's awesome.\n\n35\n00:01:44.770 --> 00:01:47.040\nSo we've got a lot of stuff\nthat we can monitor, Don.\n\n36\n00:01:47.040 --> 00:01:50.270\nWhen it comes to all these different\ncool things that we can monitor,\n\n37\n00:01:50.270 --> 00:01:51.880\nwhat's some of the types of\nstuff that we can monitor?\n\n38\n00:01:51.880 --> 00:01:53.210\nWhat can we see here?\n\n39\n00:01:53.210 --> 00:01:55.410\n>> It's actually a pretty big list.\n\n40\n00:01:55.410 --> 00:01:58.000\nLet me show you guys because it does vary\na little bit from equipment to equipment,\n\n41\n00:01:58.000 --> 00:01:59.310\nso you always wanna test your device and\n\n42\n00:01:59.310 --> 00:02:03.270\nsee what it supports, but I I'll show\nyou here on this router that I've got.\n\n43\n00:02:03.270 --> 00:02:07.750\nBasically on this system\nif jump into my config\n\n44\n00:02:07.750 --> 00:02:11.720\nwell you actually have to start by\ncreating what's called an applet.\n\n45\n00:02:11.720 --> 00:02:15.800\nThe event manager, remember how I said\nit runs as a service in the background?\n\n46\n00:02:15.800 --> 00:02:19.948\nWell, each EEM thing that\nyou configure to monitor.\n\n47\n00:02:19.948 --> 00:02:22.630\n[LAUGH] There's probably a better term for\nit than that but each thing that\n\n48\n00:02:22.630 --> 00:02:26.560\nyou go to monitor basically creates its\nown little service in the background.\n\n49\n00:02:26.560 --> 00:02:29.790\nSo you create what\nare called EEM applets and\n\n50\n00:02:29.790 --> 00:02:32.280\neach applet is monitoring\nsomething different.\n\n51\n00:02:32.280 --> 00:02:37.870\nAnd so I'm gonna create an applet here and\nI'll just call it event manager applet.\n\n52\n00:02:37.870 --> 00:02:39.090\nAnd you have to give it a name.\n\n53\n00:02:39.090 --> 00:02:41.210\nAnd the name can be whatever you want.\n\n54\n00:02:41.210 --> 00:02:43.220\nYou normally name it based on\nwhat it is you're gonna monitor.\n\n55\n00:02:43.220 --> 00:02:45.125\nI'll just call mine eem-xample.\n\n56\n00:02:45.125 --> 00:02:49.660\nOkay.\nThat's gonna create an applet, a service.\n\n57\n00:02:49.660 --> 00:02:51.700\nAnd now I can tell it what to monitor.\n\n58\n00:02:51.700 --> 00:02:53.380\nNow what we monitor for are events.\n\n59\n00:02:53.380 --> 00:02:55.400\nWe monitor for changes in the system.\n\n60\n00:02:55.400 --> 00:02:57.600\nIf something is just running like\nnormal we don't care about it.\n\n61\n00:02:57.600 --> 00:02:59.400\nWe want to know when there's a change.\n\n62\n00:02:59.400 --> 00:03:00.910\nAnd so if you type event?\n\n63\n00:03:02.810 --> 00:03:05.800\nYou'll see a list of all\nthe things that you can monitor.\n\n64\n00:03:05.800 --> 00:03:08.780\nAnd some of the stuff is really powerful,\nsome of it's kinda lame.\n\n65\n00:03:08.780 --> 00:03:10.490\nBut there's some good stuff in here.\n\n66\n00:03:10.490 --> 00:03:14.960\nSome of the ones that I usually monitor,\nthings like counters, right?\n\n67\n00:03:14.960 --> 00:03:18.160\nOn every interface,\nthere's an error counter, right?\n\n68\n00:03:18.160 --> 00:03:21.070\nInput out errors,\noutput errors, and that stuff.\n\n69\n00:03:21.070 --> 00:03:24.360\nSo I can actually monitor for\nwhen those errors start to increase.\n\n70\n00:03:24.360 --> 00:03:25.940\nAnd, then take some kind of action.\n\n71\n00:03:25.940 --> 00:03:28.800\nI can monitor for interface event status,\nif a link goes up or\n\n72\n00:03:28.800 --> 00:03:33.590\na link goes down, we can monitor our\nSLA's, an IP SLA goes up or down or\n\n73\n00:03:33.590 --> 00:03:35.660\nabove a control limit or\nbelow a control limit.\n\n74\n00:03:35.660 --> 00:03:39.330\nWe can monitor for\nsyslog events, snmp traps,\n\n75\n00:03:39.330 --> 00:03:44.270\ntags, track objects, all of these\ndifferent things we can monitor them.\n\n76\n00:03:44.270 --> 00:03:47.870\nAnd if they change,\nwe can do something about it.\n\n77\n00:03:47.870 --> 00:03:48.400\nAll right?\n\n78\n00:03:48.400 --> 00:03:53.220\nSo for example I might wanna monitor for\nany time my configuration changes.\n\n79\n00:03:53.220 --> 00:03:54.430\nRight?\nThink about what happens\n\n80\n00:03:54.430 --> 00:03:55.930\nis when your configuration changes.\n\n81\n00:03:55.930 --> 00:03:57.100\nRight?\nSo I get in to config.\n\n82\n00:03:57.100 --> 00:03:57.790\nI do some stuff.\n\n83\n00:03:57.790 --> 00:03:58.760\nI get out.\n\n84\n00:03:58.760 --> 00:04:01.020\nAnd when I get out, what happens?\n\n85\n00:04:01.020 --> 00:04:03.230\nA little log message is generated, right?\n\n86\n00:04:03.230 --> 00:04:06.760\nIt generates a syslog message to let\nme know that the system was modified.\n\n87\n00:04:06.760 --> 00:04:08.420\nThat somebody was in configuration.\n\n88\n00:04:08.420 --> 00:04:11.380\nRight.\nSo what I can do is I can monitor for\n\n89\n00:04:11.380 --> 00:04:13.910\nwhen this message is displayed,\nI'm just gonna look for\n\n90\n00:04:13.910 --> 00:04:17.210\nright here where it says\npercent SYS-5-CONFIG_I,\n\n91\n00:04:17.210 --> 00:04:22.770\nthat lets me know it's a system message\nand somebody went into configuration.\n\n92\n00:04:22.770 --> 00:04:27.420\nSo I can watch Syslog for\nany time that this message is generated.\n\n93\n00:04:27.420 --> 00:04:29.820\nAnd we can generate\nan alert based on that.\n\n94\n00:04:29.820 --> 00:04:35.720\nSo I could say something like event\nmanager applet eem-config-change, right?\n\n95\n00:04:35.720 --> 00:04:39.420\nSo I'm gonna create\na configuration change applet.\n\n96\n00:04:39.420 --> 00:04:41.750\nAnd I'm gonna monitor for an event.\n\n97\n00:04:41.750 --> 00:04:42.990\nIt's a syslog event.\n\n98\n00:04:42.990 --> 00:04:46.450\nAnd I'm gonna look for the pattern.\n\n99\n00:04:46.450 --> 00:04:51.594\nAnd the pattern I'm gonna look for\nis sys-5-config_i.\n\n100\n00:04:51.594 --> 00:04:57.640\nSo any time I see that message in my\nsyslog, I wanna do something about it.\n\n101\n00:04:57.640 --> 00:05:02.390\n>> Very good, so we can monitor and see if\nsome kind of system configuration changes.\n\n102\n00:05:02.390 --> 00:05:03.740\nBut, are our hands tied on that one?\n\n103\n00:05:03.740 --> 00:05:05.740\nIs there anything that we can implement,\n\n104\n00:05:05.740 --> 00:05:08.790\nany kind of action we can perform\nif we do notice something changes?\n\n105\n00:05:08.790 --> 00:05:10.620\n>> The accent's kind of\nthe most important part.\n\n106\n00:05:10.620 --> 00:05:15.590\nIf I stop here, it's gonna monitor\nit anytime that message is logged in\n\n107\n00:05:15.590 --> 00:05:19.562\nthe syslog it's gonna recognize it and\nthen do absolutely nothing about it.\n\n108\n00:05:19.562 --> 00:05:23.956\n>> [LAUGH] So what I've done here is semi\npointless cuz we already had the event log\n\n109\n00:05:23.956 --> 00:05:25.160\nmesage or syslog message.\n\n110\n00:05:25.160 --> 00:05:27.060\nSo now I need to take an action.\n\n111\n00:05:27.060 --> 00:05:31.090\nAnd remember how I showed you guys if you\ndo event?, you can see all the stuff that\n\n112\n00:05:31.090 --> 00:05:36.982\nyou can monitor\n>> Well if you do action?\n\n113\n00:05:36.982 --> 00:05:39.420\nWell if you type it right,\nyou don't get a whole lot.\n\n114\n00:05:39.420 --> 00:05:40.310\nThere we go.\n\n115\n00:05:40.310 --> 00:05:42.650\nBecause each action gets a name.\n\n116\n00:05:42.650 --> 00:05:44.890\nWhen we monitor something,\nwe only monitor one thing.\n\n117\n00:05:44.890 --> 00:05:45.390\nRight.\n\n118\n00:05:45.390 --> 00:05:48.210\nEach EEM applet monitors one thing.\n\n119\n00:05:48.210 --> 00:05:50.509\nMine's monitoring for\nthat one syslog message.\n\n120\n00:05:51.560 --> 00:05:55.630\n>> But\neach applet can have more than one action.\n\n121\n00:05:55.630 --> 00:05:58.240\nAnd so we have to give the action a name.\n\n122\n00:05:58.240 --> 00:06:01.200\nAnd you can name it whatever you want,\nbut I'll tell you guys,\n\n123\n00:06:01.200 --> 00:06:04.220\nin the places that I learn from and\n\n124\n00:06:04.220 --> 00:06:07.990\nwhat you'll see across the internet,\nis almost everybody uses numbers.\n\n125\n00:06:07.990 --> 00:06:11.570\nWe use numbers because we can\nkind of sort by those numbers and\n\n126\n00:06:11.570 --> 00:06:13.600\nget a nice little order going to things.\n\n127\n00:06:13.600 --> 00:06:14.690\nBut you don't have to use numbers.\n\n128\n00:06:14.690 --> 00:06:15.910\nYou can use names if you want.\n\n129\n00:06:15.910 --> 00:06:18.210\nSo it's really asking for a label.\n\n130\n00:06:18.210 --> 00:06:21.630\nAnd so if I'm gonna take an action,\nmy first action I'll normally do 1.0.\n\n131\n00:06:21.630 --> 00:06:22.170\nRight.\n\n132\n00:06:22.170 --> 00:06:23.440\nThis is actually 1.0.\n\n133\n00:06:23.440 --> 00:06:27.440\nAnd later, I might do an action 2.0, but\nthen I can do an action 1.5 if I wanted to\n\n134\n00:06:27.440 --> 00:06:30.010\nstick one in the middle,\ncuz I left a little bit of room for me.\n\n135\n00:06:30.010 --> 00:06:32.110\nRight.\nOr you could say action 10, 20, 30, 40.\n\n136\n00:06:32.110 --> 00:06:34.620\nOr like we do with ACLs, right,\n\n137\n00:06:34.620 --> 00:06:37.030\nalways skipping in increments\nof 10 to leave room in-between.\n\n138\n00:06:37.030 --> 00:06:40.160\nSo that's kind of what I'm doing here,\nall right.\n\n139\n00:06:40.160 --> 00:06:44.310\nAnd now, if I do a question mark,\nI'll see all the actions I can take and\n\n140\n00:06:44.310 --> 00:06:45.690\nyou'll see there's a lot.\n\n141\n00:06:45.690 --> 00:06:47.860\nThere's a lot of actions that we can do.\n\n142\n00:06:47.860 --> 00:06:52.570\nSome of them are programmatic,\nappending data to a variable,\n\n143\n00:06:52.570 --> 00:06:54.840\nbreaking out of a conditional loop, right?\n\n144\n00:06:54.840 --> 00:06:58.000\nSo we can actually do some\ncomplex logic in our actions.\n\n145\n00:06:58.000 --> 00:07:00.500\nBut other ones are a little\nmore straightforward.\n\n146\n00:07:00.500 --> 00:07:03.660\nWe can force a switchover.\n\n147\n00:07:03.660 --> 00:07:04.180\nRight?\n\n148\n00:07:04.180 --> 00:07:06.950\nIf we've got some kind of like,\nHSRP cluster or whatever,\n\n149\n00:07:06.950 --> 00:07:08.490\nwe can cause that to trigger.\n\n150\n00:07:08.490 --> 00:07:10.150\nYou can run commands.\n\n151\n00:07:10.150 --> 00:07:12.080\nThis CLI, this is the one I normally use.\n\n152\n00:07:12.080 --> 00:07:13.260\nExecute a CLI command.\n\n153\n00:07:13.260 --> 00:07:16.380\nSo we can cause the router\nto do something.\n\n154\n00:07:16.380 --> 00:07:21.870\nIf I'm detecting attack traffic for\nexample, I might want to add a line\n\n155\n00:07:21.870 --> 00:07:26.130\nto an ACL that blocks the IP address\nthat's generating the attack traffic.\n\n156\n00:07:26.130 --> 00:07:29.210\nNow it's not just an action,\nit's a security countermeasure.\n\n157\n00:07:29.210 --> 00:07:30.620\nRight?\nWe're actually getting in there and\n\n158\n00:07:30.620 --> 00:07:31.460\nmaking changes.\n\n159\n00:07:31.460 --> 00:07:34.400\nThis is kind of one of the key\npieces that helps Cisco's self\n\n160\n00:07:34.400 --> 00:07:35.770\nhealing network function.\n\n161\n00:07:35.770 --> 00:07:39.250\nAll the protections they have in there.\n\n162\n00:07:39.250 --> 00:07:42.450\nBut you'll see a lot of this stuff\nis tied to handling variables.\n\n163\n00:07:42.450 --> 00:07:45.710\nWe've got things like foreach loops for\n\n164\n00:07:45.710 --> 00:07:49.890\nas we iterate through some kind\nof outputs to take an action.\n\n165\n00:07:49.890 --> 00:07:51.990\nYou've got error handling and so on.\n\n166\n00:07:51.990 --> 00:07:55.240\nIt can really get bery programmatic.\n\n167\n00:07:55.240 --> 00:07:57.771\nOr you can do simple things,\nlike reload the system, right?\n\n168\n00:07:57.771 --> 00:08:01.621\nIf something goes completely wrong,\nreboot, that solves everything, right?\n\n169\n00:08:01.621 --> 00:08:03.052\nSo we've got that option but\n\n170\n00:08:03.052 --> 00:08:07.411\nyou'll see there's some really cool stuff\nin here You can generate syslog messages.\n\n171\n00:08:07.411 --> 00:08:10.131\nYou can turn tracking on or off.\n\n172\n00:08:10.131 --> 00:08:11.980\nYou can do a lot of neat stuff.\n\n173\n00:08:11.980 --> 00:08:15.540\nSo for action 1.0, I might choose to do,\nwell here, I'll do cli.\n\n174\n00:08:15.540 --> 00:08:17.010\nI've gotta be honest with you guys.\n\n175\n00:08:17.010 --> 00:08:18.120\nI'm not a programmer.\n\n176\n00:08:18.120 --> 00:08:21.930\nSo I recognize the value and all the\nvarious programming options that we saw up\n\n177\n00:08:21.930 --> 00:08:25.270\nhere, but 99% of the time,\nI'm jumping to cli.\n\n178\n00:08:25.270 --> 00:08:26.440\nI wanna take some cli action.\n\n179\n00:08:26.440 --> 00:08:29.780\nSo if I see that somebody\ndid a configuration change,\n\n180\n00:08:29.780 --> 00:08:32.600\nwhat I wanna do,\nis I wanna grab that data.\n\n181\n00:08:32.600 --> 00:08:33.510\nWhat did they change?\n\n182\n00:08:33.510 --> 00:08:34.120\nWho was it?\n\n183\n00:08:34.120 --> 00:08:36.368\nWho did it?\nI wanna gather all that data,\n\n184\n00:08:36.368 --> 00:08:39.905\nI wanna email it to me,\nso I wanna get an email.\n\n185\n00:08:39.905 --> 00:08:43.375\nNot only do I know somebody made a change,\nI'll know who did it and\n\n186\n00:08:43.375 --> 00:08:46.135\nI'll be able to look at the config\nto see what changed, right?\n\n187\n00:08:46.135 --> 00:08:47.935\nSo it is a great little system.\n\n188\n00:08:47.935 --> 00:08:48.765\nI wanna set that up.\n\n189\n00:08:48.765 --> 00:08:51.575\nSo I'm gonna do a cli command, all right?\n\n190\n00:08:51.575 --> 00:08:56.220\nNow, what we have to do is,\nwe have to think of the EEM as being us.\n\n191\n00:08:56.220 --> 00:08:57.730\nIt's gonna log into the router.\n\n192\n00:08:57.730 --> 00:08:58.950\nIt's gotta take some actions.\n\n193\n00:08:58.950 --> 00:09:03.160\nNow it's technically already logged in,\nbut I need it to run a simple command.\n\n194\n00:09:03.160 --> 00:09:07.400\nI need it to run enable, because when it\nruns a command, the first thing it's gonna\n\n195\n00:09:07.400 --> 00:09:10.540\ndo is get connected and it's gonna\nhave an unprivileged user prompt.\n\n196\n00:09:10.540 --> 00:09:14.190\nAnd so then I'm gonna actually\ntell it to do some stuff, right?\n\n197\n00:09:14.190 --> 00:09:18.830\nSo I want it to output for\nme the running configuration.\n\n198\n00:09:18.830 --> 00:09:23.500\nBut if I do show running-config\nwhat happens, right?\n\n199\n00:09:23.500 --> 00:09:25.860\nI can even do it here on the screen.\n\n200\n00:09:25.860 --> 00:09:31.190\nIf I do a show running-config,\nwhen it runs, there's page one.\n\n201\n00:09:31.190 --> 00:09:32.844\nAnd now I've got to hit the spacebar.\n\n202\n00:09:32.844 --> 00:09:34.201\nAnd a spacebar.\n\n203\n00:09:34.201 --> 00:09:35.890\nAnd a spacebar.\n\n204\n00:09:35.890 --> 00:09:39.530\nAnd depending on how long the config is,\nI might have hit space five, six times.\n\n205\n00:09:39.530 --> 00:09:42.250\nI might have it three times,\nI really don't know.\n\n206\n00:09:42.250 --> 00:09:46.220\nSo I need to set it so\nI don't have to do the space bar stuff.\n\n207\n00:09:46.220 --> 00:09:50.590\nSo I'm gonna issue another\ncommand action 2.0, and\n\n208\n00:09:50.590 --> 00:09:56.440\nI'm a do a cli command\nwhich is terminal length 0.\n\n209\n00:09:56.440 --> 00:09:59.970\nNow if you've never seen that command,\nit's not terribly useful normally.\n\n210\n00:09:59.970 --> 00:10:03.820\nIt basically says don't have\na maximum length for my page.\n\n211\n00:10:03.820 --> 00:10:09.030\nShow me the whole config and\ndon't do a more prompt, right?\n\n212\n00:10:09.030 --> 00:10:12.510\nFor a human, it's kind of annoying,\nbut for the EEM it's perfect.\n\n213\n00:10:12.510 --> 00:10:15.149\nI want it to show the config and\nnot have pagination.\n\n214\n00:10:16.180 --> 00:10:21.770\nAnd then I can do action 3.0,\nwhich is going to be a cli command and\n\n215\n00:10:21.770 --> 00:10:24.540\nit's going to be show running-config.\n\n216\n00:10:24.540 --> 00:10:28.090\nI don't know if the attacker,\nI say attacker, whoever it is that made\n\n217\n00:10:28.090 --> 00:10:30.370\nthe change, I don't know if\nthey saved the config or not.\n\n218\n00:10:30.370 --> 00:10:32.430\nSo I want to see what's running, so\n\n219\n00:10:32.430 --> 00:10:35.710\nI'm going to do that running config and\nI'm going to output that.\n\n220\n00:10:35.710 --> 00:10:40.890\nThe next thing I'm going to do is\nanother cli command, which can be \"who\".\n\n221\n00:10:40.890 --> 00:10:43.050\nShow me who's connected to this right now.\n\n222\n00:10:43.050 --> 00:10:46.000\nBecause that's going to\nshow me any VTY sessions\n\n223\n00:10:46.000 --> 00:10:47.670\nthat are connected onto the system, right?\n\n224\n00:10:47.670 --> 00:10:51.270\nSo, and you can even do a show,\nand I'll see anybody connected.\n\n225\n00:10:51.270 --> 00:10:55.020\nNow I'm on console right now, but\nif somebody was SSHed in, right?\n\n226\n00:10:55.020 --> 00:10:58.290\nSo here I'll connect to\nthat router real quick.\n\n227\n00:10:59.600 --> 00:11:03.450\nAnd so if I reach out to it,\nI say I'm gonna connect real quick, but\n\n228\n00:11:03.450 --> 00:11:04.450\nit's taking its time.\n\n229\n00:11:04.450 --> 00:11:05.180\nThere we go.\n\n230\n00:11:05.180 --> 00:11:08.500\nAll right so I'm logged into this system\nas admin and if I run that who command,\n\n231\n00:11:08.500 --> 00:11:09.940\nsee how I've got it right there?\n\n232\n00:11:09.940 --> 00:11:14.776\nAdmin is logged into the system and\nhere's their IP address, so it's got\n\n233\n00:11:14.776 --> 00:11:19.782\nall the salient information I need to\nrecognize who it was that was in there.\n\n234\n00:11:19.782 --> 00:11:24.253\nSo that action I did,\naction 4.0 cli command who.\n\n235\n00:11:24.253 --> 00:11:28.800\nAnd now that I know who,\nI've got all the information I've needed.\n\n236\n00:11:28.800 --> 00:11:32.340\nI've got the running config and\nI've got the who.\n\n237\n00:11:32.340 --> 00:11:38.630\nSo the last thing I'm going to do\nis say action 5.0 cli command.\n\n238\n00:11:38.630 --> 00:11:41.850\nAnd I'm going to put my paging back\notherwise it will annoy me later on.\n\n239\n00:11:41.850 --> 00:11:46.700\nSo I'm going to set my\nterminal length to 24.\n\n240\n00:11:46.700 --> 00:11:49.760\nNow I made a typo there and\nfortunately I corrected it.\n\n241\n00:11:49.760 --> 00:11:51.440\nIt's not able to verify this for me,\n\n242\n00:11:51.440 --> 00:11:54.900\nso it's possible I could put a typo in\na command and then it's not gonna work.\n\n243\n00:11:54.900 --> 00:11:58.460\nSo you do need to double check your syntax\nbecause it's not doing syntax checking\n\n244\n00:11:58.460 --> 00:11:59.440\non these commands.\n\n245\n00:11:59.440 --> 00:12:02.180\nBut I'm just gonna put the terminal\nback to the way it was, so\n\n246\n00:12:02.180 --> 00:12:07.440\nevery 24 lines it will give me\na more prompt and there we go.\n\n247\n00:12:07.440 --> 00:12:13.780\nNow at this point if somebody connects to\nthis router, they go into the config, they\n\n248\n00:12:13.780 --> 00:12:17.760\nmake some changes ,they get out of the\nconfig, the syslog message is generated.\n\n249\n00:12:17.760 --> 00:12:24.410\nThe EEM will see the pattern get detected\nand it will run those five commands, okay?\n\n250\n00:12:24.410 --> 00:12:26.200\nWell, what about it?\n\n251\n00:12:26.200 --> 00:12:29.120\nIt does the short run in config\nit does a who and then it stops.\n\n252\n00:12:29.120 --> 00:12:30.490\nThe data then goes away.\n\n253\n00:12:30.490 --> 00:12:33.770\nSo, again, I've kinda created\na pointless applet, at this point.\n\n254\n00:12:33.770 --> 00:12:38.390\nSo I need to get this data to me, and\nto do that, I wanna generate an email.\n\n255\n00:12:38.390 --> 00:12:41.060\nI want it to email me that data.\n\n256\n00:12:41.060 --> 00:12:42.310\nAnd so, we can do that.\n\n257\n00:12:42.310 --> 00:12:49.380\nI'm gonna say action 6.0, and this time\ninstead of cli, I'm gonna do mail.\n\n258\n00:12:49.380 --> 00:12:50.890\nI'm gonna send an email to me.\n\n259\n00:12:50.890 --> 00:12:55.690\nAnd you'll see where you can specify\nthe body, the from, the to, the subject,\n\n260\n00:12:55.690 --> 00:12:59.290\nthe server, right,\na lot of that information right in here.\n\n261\n00:12:59.290 --> 00:13:03.990\nSo I'm gonna say, server, and I'll specify\nthe server that I'm gonna point to.\n\n262\n00:13:03.990 --> 00:13:05.390\nI'll point to one of ours.\n\n263\n00:13:06.460 --> 00:13:09.230\nAnd oops, there we go.\n\n264\n00:13:10.310 --> 00:13:14.190\nWe'll see if I get the IP address right,\nthat's gonna be 90% of my challenge.\n\n265\n00:13:14.190 --> 00:13:15.780\nAnd then I'm gonna say\nwho it's gonna go to.\n\n266\n00:13:15.780 --> 00:13:18.220\nNow here's where things\nget a little bit weird.\n\n267\n00:13:18.220 --> 00:13:20.860\nWhen we start specifying the to and\nthe from and so\n\n268\n00:13:20.860 --> 00:13:25.070\non, we actually have to put a period at\nthe beginning and the end of each one.\n\n269\n00:13:25.070 --> 00:13:27.420\nYou can use regular expressions\ninside of these things and\n\n270\n00:13:27.420 --> 00:13:29.590\na period actually stands for\nany character.\n\n271\n00:13:29.590 --> 00:13:32.480\nAnd it's because,\nwhen we reach out to that mail server,\n\n272\n00:13:32.480 --> 00:13:35.420\nsometimes it'll put a single tick,\nsometimes it'll do a quote mark\n\n273\n00:13:35.420 --> 00:13:39.020\nbefore the address, sometimes it'll\ndo the little brackets around it.\n\n274\n00:13:39.020 --> 00:13:42.100\nAnd so we're doing these little dots to\nallow for that variation of the address.\n\n275\n00:13:42.100 --> 00:13:44.814\nSo whatever character\nthe server chooses to use,\n\n276\n00:13:44.814 --> 00:13:47.081\nor the router chooses to use in this case.\n\n277\n00:13:47.081 --> 00:13:48.302\nAnd so I'm going to send this one to me.\n\n278\n00:13:48.302 --> 00:13:51.872\nI'll just do Don at ITPro.tv, and\n\n279\n00:13:51.872 --> 00:13:56.279\nI'm putting a dot before and\nafter my name.\n\n280\n00:13:56.279 --> 00:13:58.990\nAnd then I'm going to say who it's from.\n\n281\n00:13:58.990 --> 00:14:03.270\nAnd so this one will be, you know you\ncan use a fake address if you wanted or\n\n282\n00:14:03.270 --> 00:14:06.860\nwhatever, this router is gnv-c2821, and\n\n283\n00:14:06.860 --> 00:14:13.490\nyou know maybe I'll say\nthat's at lab.itpro.tv.\n\n284\n00:14:13.490 --> 00:14:15.330\nAll right, so\nthat's who the email is from.\n\n285\n00:14:15.330 --> 00:14:17.630\nI'm going to then say, subject.\n\n286\n00:14:19.320 --> 00:14:21.570\nAnd I'll set a subject.\n\n287\n00:14:21.570 --> 00:14:27.820\nAnd on the subject, let's go ahead and say\nthis is a configuration change detected.\n\n288\n00:14:29.970 --> 00:14:31.920\nThat's what I'll make my subject.\n\n289\n00:14:31.920 --> 00:14:34.350\nAnd then the last thing\nis the message body.\n\n290\n00:14:34.350 --> 00:14:38.750\nNow the message body is kinda interesting\nbecause what I wanna do here is basically\n\n291\n00:14:38.750 --> 00:14:41.550\nget all the output from\nthe commands that I just ran.\n\n292\n00:14:41.550 --> 00:14:45.640\nWell while the EEM was running,\nit was storing all of that in a variable.\n\n293\n00:14:45.640 --> 00:14:49.160\nSo there's actually a variable that\nhas all the cli output for me.\n\n294\n00:14:49.160 --> 00:14:54.590\nSo for the body, I'm just going\nto say body, and then in quotes,\n\n295\n00:14:54.590 --> 00:14:59.690\nand I don't need the dots this time\ncuz it's going to populate it for\n\n296\n00:14:59.690 --> 00:15:02.290\nme, I'm gonna do $_cli_result.\n\n297\n00:15:02.290 --> 00:15:07.090\nThat's the variable that Cisco creates\nthat stores al the cli's output.\n\n298\n00:15:07.090 --> 00:15:10.030\nSo I'm going to take that and\nput that in the message value.\n\n299\n00:15:10.030 --> 00:15:14.473\nNow, when somebody changes a config,\nan email will be sent to Don@ITPro.tv and\n\n300\n00:15:14.473 --> 00:15:19.540\nit's gonna have the running configuration\nand the output for the who command.\n\n301\n00:15:19.540 --> 00:15:20.260\nWho made the change?\n\n302\n00:15:20.260 --> 00:15:22.520\nAnd it's basically gonna let me see it.\n\n303\n00:15:22.520 --> 00:15:23.020\n>> Very good.\n\n304\n00:15:23.020 --> 00:15:24.520\nSo, now, question.\n\n305\n00:15:24.520 --> 00:15:30.130\nWe know how stable emails and\nemail servers and email systems are.\n\n306\n00:15:30.130 --> 00:15:35.130\nDon, what happens if you send that email\noutbound and the email servers offline or\n\n307\n00:15:35.130 --> 00:15:36.270\nyou just don't receive the email?\n\n308\n00:15:36.270 --> 00:15:37.850\nDo we have a way to see that?\n\n309\n00:15:37.850 --> 00:15:40.050\n>> Yeah.\n[LAUGH] Or even better, right?\n\n310\n00:15:40.050 --> 00:15:43.300\nWhat if this failure is causing us not to\nbe able to get to the mail server, right?\n\n311\n00:15:43.300 --> 00:15:45.990\nWe could have an interface down and\nnow we can't get to the mail server.\n\n312\n00:15:45.990 --> 00:15:49.990\nSo fortunately you can take\nmany different actions, right?\n\n313\n00:15:49.990 --> 00:15:51.972\nSo it's a good idea to set\nup some additional actions.\n\n314\n00:15:51.972 --> 00:15:54.311\nWe can generate a syslog message or\n\n315\n00:15:54.311 --> 00:15:59.321\nsome other kind of message to go out I\nkind of already got a syslog message.\n\n316\n00:15:59.321 --> 00:16:03.961\nBut I'm going to add one anyways just\nto make sure I know the email was sent.\n\n317\n00:16:03.961 --> 00:16:08.920\nSo I'm gonna add an action 7.0,\ncuz you can never have too many actions.\n\n318\n00:16:08.920 --> 00:16:11.330\nAnd this one is gonna be syslog.\n\n319\n00:16:11.330 --> 00:16:16.760\nNot a cli, not a mail this time,\nbut a syslog message.\n\n320\n00:16:16.760 --> 00:16:18.790\nAnd I'm gonna set a priority.\n\n321\n00:16:19.960 --> 00:16:23.300\nPriority, that's spelled right, warning.\n\n322\n00:16:23.300 --> 00:16:27.070\nAnd you can set from the various priority\nlevels, if you wanna do information or\n\n323\n00:16:27.070 --> 00:16:29.080\nalerts or whatever,\nI'm just gonna do a warning.\n\n324\n00:16:29.080 --> 00:16:33.240\nCuz this might be a perfectly legitimate\nchange, I don't necessarily know,\n\n325\n00:16:33.240 --> 00:16:33.880\nso it's a warning.\n\n326\n00:16:33.880 --> 00:16:37.790\nSomebody needs to look into it, but\nit's not necessarily a compromise.\n\n327\n00:16:37.790 --> 00:16:43.130\nAnd then I'll say the message and I'll\nspecify what I want that message to be.\n\n328\n00:16:43.130 --> 00:16:46.490\nAnd so you'll see where we can\ndesignate that and it's just a phrase,\n\n329\n00:16:46.490 --> 00:16:54.010\nwe'll stick it in quotes, and\nso I'll say, EEM email sent.\n\n330\n00:16:54.010 --> 00:16:56.800\nJust so I can spot that and\nsee that the email was sent.\n\n331\n00:16:56.800 --> 00:16:59.640\nI'm already going to have a syslog\nmessage cuz that's what triggered this\n\n332\n00:16:59.640 --> 00:17:00.670\nwhole thing.\n\n333\n00:17:00.670 --> 00:17:04.600\nSo I know the configuration was changed,\nnow I'm just going to generate another one\n\n334\n00:17:04.600 --> 00:17:08.600\nthat will let me know the email was\nsent and I'll put that in place.\n\n335\n00:17:08.600 --> 00:17:10.710\nNow, we've put a lot in here.\n\n336\n00:17:10.710 --> 00:17:15.290\nLet's kind of review that real quick, and,\n\n337\n00:17:15.290 --> 00:17:18.440\nhang on, let me do that.\n\n338\n00:17:18.440 --> 00:17:19.470\nThere we go.\n\n339\n00:17:19.470 --> 00:17:24.280\nSo I started by creating the applet,\nevent manager applet eem chain.\n\n340\n00:17:24.280 --> 00:17:27.330\nAnd then I told it what to monitor.\n\n341\n00:17:27.330 --> 00:17:28.860\nHere in my case for a syslog message.\n\n342\n00:17:28.860 --> 00:17:31.760\nI was looking for SYS-5-CONFIG_I.\n\n343\n00:17:31.760 --> 00:17:37.510\nAnd then after that,\nI generated all of these actions to take.\n\n344\n00:17:37.510 --> 00:17:40.010\nThe first five are all cli commands.\n\n345\n00:17:40.010 --> 00:17:42.070\nRun this command, then this command,\nand then this command.\n\n346\n00:17:42.070 --> 00:17:45.620\nAnd then it fired off an email\nwhere it was supposed to.\n\n347\n00:17:45.620 --> 00:17:48.440\nAfter that it generates a syslog\nmessage and then it's done.\n\n348\n00:17:48.440 --> 00:17:52.380\nSo every time somebody takes or\nchanges the config, that should happen.\n\n349\n00:17:52.380 --> 00:17:58.690\nNow, I got out of the config and\nwhen I did here it did SYS-5-CONFIG_I.\n\n350\n00:17:58.690 --> 00:18:01.680\nSo that message popped up,\nand I know the EEM ran,\n\n351\n00:18:01.680 --> 00:18:04.290\nbecause then I start to get\nsome messages popping up.\n\n352\n00:18:04.290 --> 00:18:10.500\nAnd here's the event manager, that's the\nEM, and SMTP, it tried to send an email.\n\n353\n00:18:10.500 --> 00:18:14.020\nAnd it got error occurred when sending\nemail to server blah, blah, blah,\n\n354\n00:18:14.020 --> 00:18:16.660\nand error in reply from SMTP server.\n\n355\n00:18:16.660 --> 00:18:20.940\nSo I tried to reach out to the server and\nit failed.\n\n356\n00:18:20.940 --> 00:18:23.010\nIt didn't connect, so I've got a problem.\n\n357\n00:18:23.010 --> 00:18:25.730\nI need to figure out what that problem is.\n\n358\n00:18:25.730 --> 00:18:28.140\nIt's nice that I see that that occurred,\nbut for\n\n359\n00:18:28.140 --> 00:18:32.280\nwhatever reason it didn't happen and\nstatement six didn't run.\n\n360\n00:18:32.280 --> 00:18:35.080\nStatements one through five and\nstatement seven did run though.\n\n361\n00:18:35.080 --> 00:18:38.170\nIf I do a show log I should see a system.\n\n362\n00:18:38.170 --> 00:18:39.305\nOh shoot, I'm not logging.\n\n363\n00:18:39.305 --> 00:18:44.340\n[LAUGH] We need to have logging turned\non if we want to actually keep a log.\n\n364\n00:18:44.340 --> 00:18:49.420\nSo I need to do a little logging\nbuffered for that to happen, but\n\n365\n00:18:49.420 --> 00:18:52.090\nnow that that's happened I've gone into\nconfig and changed the end, so its gonna\n\n366\n00:18:52.090 --> 00:18:56.730\ntry and fire off another email which will\nlikely generate another email error.\n\n367\n00:18:56.730 --> 00:18:57.500\nRight there.\n\n368\n00:18:57.500 --> 00:18:59.820\nBut we should be logging\nmy cis log message now, so\n\n369\n00:18:59.820 --> 00:19:02.130\nthat I'm aware that change has happened.\n\n370\n00:19:02.130 --> 00:19:05.250\nSo that's basically how the EEM works,\n\n371\n00:19:05.250 --> 00:19:08.030\nis it takes these actions based on\nsomething that happened on the network.\n\n372\n00:19:08.030 --> 00:19:10.760\nSo for you as an admin,\nif you're monitoring routers,\n\n373\n00:19:10.760 --> 00:19:15.060\nyou're monitoring switches this can\nnotify you of the problem immediately.\n\n374\n00:19:15.060 --> 00:19:17.360\nYou don't have to wait for\nsomebody to find it or\n\n375\n00:19:17.360 --> 00:19:19.070\neven have third party monitoring software.\n\n376\n00:19:19.070 --> 00:19:20.120\nThis can just notify you.\n\n377\n00:19:20.120 --> 00:19:20.860\nShoot you an email.\n\n378\n00:19:20.860 --> 00:19:24.370\nIt can log to a syslog server and\ndo all sorts of really cool stuff\n\n379\n00:19:24.370 --> 00:19:28.400\nto let you know that it's happening, and\nfrom there you can start to take action.\n\n380\n00:19:28.400 --> 00:19:33.430\nIt's one thing to get an email that says,\nhey, somebody changed the configuration.\n\n381\n00:19:33.430 --> 00:19:37.000\nBut it's a lot nicer if that email\nhas the configuration in it,\n\n382\n00:19:37.000 --> 00:19:38.680\nas well as who was connected at the time.\n\n383\n00:19:38.680 --> 00:19:40.750\nAnd now you can say, oh yeah that\nwas just one of the guys, it's fine.\n\n384\n00:19:41.830 --> 00:19:43.360\nDo be careful though.\n\n385\n00:19:43.360 --> 00:19:47.500\nBecause remember that like passwords in\nyour configuration file, might not be\n\n386\n00:19:47.500 --> 00:19:51.320\nencrypted, or they might be encrypted with\nthat really crummy built-in encryption.\n\n387\n00:19:51.320 --> 00:19:54.170\nAnd if that's the case,\nyour email's being sent in plain text.\n\n388\n00:19:54.170 --> 00:19:55.820\nSomebody can intercept it and\nget those passwords.\n\n389\n00:19:55.820 --> 00:19:59.190\nSo you do need to take a little care\nwith what you send out in these.\n\n390\n00:19:59.190 --> 00:20:02.540\nBut it is a nice piece of information to\nhave to be able to isolate whether or\n\n391\n00:20:02.540 --> 00:20:06.030\nnot these are working right,\nand to get that notification.\n\n392\n00:20:06.030 --> 00:20:10.530\nNow, in my case, I\"m having some\nkind of email server problem, so\n\n393\n00:20:10.530 --> 00:20:12.620\nI kind of want to figure that out.\n\n394\n00:20:12.620 --> 00:20:17.570\nSo there is something I can use to test\nthat with, right here on the driver, and\n\n395\n00:20:17.570 --> 00:20:21.430\nthe tool that I'm gonna use is good old,\ntrusty Telnet.\n\n396\n00:20:21.430 --> 00:20:24.740\n>> Using Telnet to test protocols.\n\n397\n00:20:24.740 --> 00:20:26.550\nNow, oldie but goodie.\n\n398\n00:20:26.550 --> 00:20:29.090\nBut what I know about Telnet\nis just remote log ons.\n\n399\n00:20:29.090 --> 00:20:31.900\nTerminal emulation, so\nit can test protocols as well?\n\n400\n00:20:31.900 --> 00:20:36.001\n>> Yeah, and in a lot of episodes we tell\nyou guys, don't use Telnet, use ssh.\n\n401\n00:20:36.001 --> 00:20:38.940\nAnd that's absolutely true for\nshell sessions.\n\n402\n00:20:38.940 --> 00:20:42.420\nBut the Telnet client is actually\na really good troubleshooting protocol.\n\n403\n00:20:42.420 --> 00:20:47.060\nThis is telling me it got an error when it\nwent to send email to the SMTP server, and\n\n404\n00:20:47.060 --> 00:20:51.060\nit's telling me,\nerror in reply from the SMTP server.\n\n405\n00:20:51.060 --> 00:20:53.510\nNow I could turn on some debugs and\ngo and check that out, but\n\n406\n00:20:53.510 --> 00:20:56.440\nI would have to cause whatever\nthis failure was to do it.\n\n407\n00:20:56.440 --> 00:20:59.200\nNow in my case, I'd just have to go in and\nout of configs, no big deal.\n\n408\n00:20:59.200 --> 00:21:02.010\nBut if you were monitoring for an\ninterface to go down, I would have to go\n\n409\n00:21:02.010 --> 00:21:05.000\nand shut the interface down and\nregenerate this for the debugs to work.\n\n410\n00:21:05.000 --> 00:21:07.370\nSo instead of using debugs,\nI could just use Telnet.\n\n411\n00:21:07.370 --> 00:21:11.130\nAnd with Telnet, you specify\na server you want to connect to.\n\n412\n00:21:11.130 --> 00:21:13.010\nSo like I'll specify that email server.\n\n413\n00:21:14.530 --> 00:21:18.210\nAnd you can then specify a port number.\n\n414\n00:21:18.210 --> 00:21:21.300\nAnd this is the part that's\nreally gonna help us.\n\n415\n00:21:21.300 --> 00:21:23.520\nYou know, actually it doesn't\nshow it in here, does it?\n\n416\n00:21:23.520 --> 00:21:24.270\nIs it an undocumented?\n\n417\n00:21:24.270 --> 00:21:25.680\nI didn't think it was\nan undocumented feature.\n\n418\n00:21:25.680 --> 00:21:28.250\nBut yeah,\nyou can type a port number of it.\n\n419\n00:21:28.250 --> 00:21:28.910\nSo I can say 25.\n\n420\n00:21:28.910 --> 00:21:33.100\nI want to connect to that\nIP address on port 25.\n\n421\n00:21:33.100 --> 00:21:38.100\nAnd a lot of protocols like HTTP and\nIMAP, POP3,\n\n422\n00:21:39.410 --> 00:21:44.290\nSMTP, if they're not encrypted, you can\njust connect right to them with Telnet and\n\n423\n00:21:44.290 --> 00:21:48.300\nif you know the commands to issue you\ncan simulate the whole communication.\n\n424\n00:21:48.300 --> 00:21:51.390\nSo if I Telnet,\nI'm connected to that mail server.\n\n425\n00:21:51.390 --> 00:21:53.840\nSo I know I can get there,\nI'm not being blocked by an ACL.\n\n426\n00:21:53.840 --> 00:21:55.291\nThere's not a firewall that's blocking me.\n\n427\n00:21:55.291 --> 00:21:59.344\nCuz I know at home, I have a cable\nconnection to our cable company, and\n\n428\n00:21:59.344 --> 00:22:01.420\nthey block connections port 25.\n\n429\n00:22:01.420 --> 00:22:03.000\nThey will not let you connect.\n\n430\n00:22:03.000 --> 00:22:04.930\nBut here, I'm connecting.\n\n431\n00:22:04.930 --> 00:22:07.940\nAnd I can try to do a hello.\n\n432\n00:22:07.940 --> 00:22:12.690\nI'll just say on work\nstation.lab.itpro.tv, and there you go.\n\n433\n00:22:12.690 --> 00:22:17.060\nIt took my hello, right,\nand I can say mail from.\n\n434\n00:22:17.060 --> 00:22:18.431\nAnd who did I say I was from?\n\n435\n00:22:18.431 --> 00:22:26.331\nI think I just did like\nGNV-C2821@lab.itpro.tv.\n\n436\n00:22:26.331 --> 00:22:27.911\nAll right, and so\nthat's who the mail's from.\n\n437\n00:22:27.911 --> 00:22:29.400\nIt says that's okay.\n\n438\n00:22:29.400 --> 00:22:36.170\nAnd I did receipt to and\nwe're sending that to Don@itpro.tv.\n\n439\n00:22:36.170 --> 00:22:38.300\nIt says that's okay, all right.\n\n440\n00:22:38.300 --> 00:22:43.700\nLet me start to throw some data in here\nand I'll say subject this is a test.\n\n441\n00:22:43.700 --> 00:22:45.420\nOops, which I did typo.\n\n442\n00:22:45.420 --> 00:22:46.480\nThis is a test.\n\n443\n00:22:46.480 --> 00:22:50.400\nVery, very exciting and\nqueued for delivery.\n\n444\n00:22:50.400 --> 00:22:51.020\nAll right.\n\n445\n00:22:51.020 --> 00:22:53.530\nSo I was not only able to\nconnect to the server,\n\n446\n00:22:53.530 --> 00:22:57.299\nI was able to generate an email and\nby doing that\n\n447\n00:22:58.430 --> 00:23:02.670\nI was completely successful, so I actually\ndon't see what the problem is on this one.\n\n448\n00:23:02.670 --> 00:23:06.710\nSo now is where we have to start tweaking\na little bit, and we can use debugs.\n\n449\n00:23:06.710 --> 00:23:13.645\nAnd with the debugs, we can monitor the\nSMTP part of the embedded event manager.\n\n450\n00:23:13.645 --> 00:23:15.485\nWe can also just go and\ntry and make some changes.\n\n451\n00:23:15.485 --> 00:23:17.915\nI mentioned that we had to\nput those dots before and\n\n452\n00:23:17.915 --> 00:23:20.455\nafter our addresses cuz\nthey're regular expressions.\n\n453\n00:23:20.455 --> 00:23:21.875\nIt may not be interpreting those right.\n\n454\n00:23:21.875 --> 00:23:24.665\nSo I can always jump in and\ntry it without those.\n\n455\n00:23:24.665 --> 00:23:27.155\nWe shouldn't have to, but\nI have seen that before.\n\n456\n00:23:27.155 --> 00:23:31.685\nSo let me jump in there,\nand we'll test that out.\n\n457\n00:23:31.685 --> 00:23:34.230\nAll right.\n\n458\n00:23:34.230 --> 00:23:40.293\nSo I'm gonna get back into\nmy applet that I made.\n\n459\n00:23:40.293 --> 00:23:43.857\nAnd I'm just gonna remove the,\n\n460\n00:23:43.857 --> 00:23:48.083\noh it wasn't action 7.0, was it?\n\n461\n00:23:48.083 --> 00:23:50.461\nIt was 6.0, that's my problem.\n\n462\n00:23:50.461 --> 00:23:55.924\nSo I'm gonna pull that line back up And\nI'm gonna just kinda remove it and\n\n463\n00:23:55.924 --> 00:23:59.570\nwe'll try with that rdots, and see.\n\n464\n00:23:59.570 --> 00:24:02.340\nBut that is exactly not what I wanted.\n\n465\n00:24:02.340 --> 00:24:03.650\nNow it looks more than one line.\n\n466\n00:24:03.650 --> 00:24:05.040\nSee this is where we start that has some\n\n467\n00:24:06.900 --> 00:24:10.620\ntough parts with editing\ninside the command line.\n\n468\n00:24:10.620 --> 00:24:13.440\nSo sometime you've got to copy and\npaste into a separate file so\n\n469\n00:24:13.440 --> 00:24:16.610\nyou can get this stuff\nkind of set up correctly.\n\n470\n00:24:16.610 --> 00:24:17.540\nThere we go.\n\n471\n00:24:17.540 --> 00:24:18.890\nAll right, so I'm going to correct this.\n\n472\n00:24:18.890 --> 00:24:21.780\nI'm just going to remove\nthese dots out of here and\n\n473\n00:24:21.780 --> 00:24:23.410\nwe'll see if it gets happy with that.\n\n474\n00:24:24.570 --> 00:24:25.530\nThen we'll retry it.\n\n475\n00:24:25.530 --> 00:24:28.960\nThis is basically a part of\nthe troubleshooting process because we\n\n476\n00:24:28.960 --> 00:24:31.060\ncan't necessarily see these\nthings that are running.\n\n477\n00:24:31.060 --> 00:24:34.620\nWhen it runs the command line it's\ndoing it in the background and\n\n478\n00:24:34.620 --> 00:24:36.170\nwe don't see that.\n\n479\n00:24:36.170 --> 00:24:38.610\nThat's all happening,\njust behind the scenes.\n\n480\n00:24:38.610 --> 00:24:41.910\nSo it's very easy to\nlose some of this stuff.\n\n481\n00:24:41.910 --> 00:24:46.700\nSo I'm gonna remove that action and\nthen I'm gonna just paste this back in.\n\n482\n00:24:48.830 --> 00:24:50.120\nThere we go.\n\n483\n00:24:50.120 --> 00:24:51.920\nAnd let me just pull that back up.\n\n484\n00:24:53.010 --> 00:24:55.510\nNow I can see that 6.0.\n\n485\n00:24:55.510 --> 00:24:57.820\nBasically the same thing\nexcept I removed those dots,\n\n486\n00:24:57.820 --> 00:24:59.760\nand actually there it succeeded.\n\n487\n00:24:59.760 --> 00:25:02.810\nSo it looks like it wasn't happy\nwith my regular expression dots.\n\n488\n00:25:02.810 --> 00:25:07.570\nSo I've got it fired up here and\nI didn't get an error on 6.0, and\n\n489\n00:25:07.570 --> 00:25:11.860\nI can see here is a log message being\ngenerated saying EEM email sent.\n\n490\n00:25:11.860 --> 00:25:15.130\nAnd let me just dork out here,\nand on my watch sure enough,\n\n491\n00:25:15.130 --> 00:25:20.560\nI got an email from GNVC2821 letting\nme know the configuration change.\n\n492\n00:25:20.560 --> 00:25:21.850\nAnd if I were to open that email,\n\n493\n00:25:21.850 --> 00:25:26.330\nI guess a smarter me would open it on\na desktop client or something, but\n\n494\n00:25:26.330 --> 00:25:31.570\nif I open it, what I should see in that\nemail is the output of the command line.\n\n495\n00:25:31.570 --> 00:25:34.850\nAnd the information that was put\ninside of it, and we'll have it.\n\n496\n00:25:34.850 --> 00:25:37.660\nSo that's now up and\nworking and were in business.\n\n497\n00:25:37.660 --> 00:25:41.600\nNow if I do a show log,\nhopefully I see at the end of it.\n\n498\n00:25:41.600 --> 00:25:43.930\nThere it is, email sent.\n\n499\n00:25:43.930 --> 00:25:48.340\nIt's the Embedded Event Manager now doing\nit's job, sending us it's information and\n\n500\n00:25:48.340 --> 00:25:50.640\nwe got a great system to self monitoring.\n\n501\n00:25:50.640 --> 00:25:53.460\nWhen someone goes in and changes\nsomething, going to send me the data.\n\n502\n00:25:53.460 --> 00:25:54.270\n>> Very good, very good.\n\n503\n00:25:54.270 --> 00:25:58.910\nLots of good information here so we been\ntalking about the Embedded Event Manager.\n\n504\n00:25:58.910 --> 00:26:01.810\nTalked about monitoring and\nsetting the criteria for\n\n505\n00:26:01.810 --> 00:26:03.060\nthe things that you want to monitor.\n\n506\n00:26:03.060 --> 00:26:06.010\nAnd also the actions that\ncan be taken based on\n\n507\n00:26:06.010 --> 00:26:07.890\nthe criteria of what you are monitoring.\n\n508\n00:26:07.890 --> 00:26:10.055\nWe've also looked at using Telnet.\n\n509\n00:26:10.055 --> 00:26:13.280\nTelnet's test protocols as well,\nwhich is an interesting concept.\n\n510\n00:26:13.280 --> 00:26:14.662\nAn oldie but a goodie there.\n\n511\n00:26:14.662 --> 00:26:19.120\nDon, do you have any parting words of\nwisdom based on what we're talking about.\n\n512\n00:26:19.120 --> 00:26:20.350\n>> That's really it.\n\n513\n00:26:20.350 --> 00:26:24.300\nAnd as far as trouble shooting tools\nwhat we've seen over the last five parts\n\n514\n00:26:24.300 --> 00:26:28.590\nare really a whole range of tools that\nyou can implement to do proactive and\n\n515\n00:26:28.590 --> 00:26:31.820\nreactive trouble shooting\ndepending on you environment.\n\n516\n00:26:31.820 --> 00:26:36.390\nWe're gonna be shifting focus after\nthis episode and moving into actually\n\n517\n00:26:36.390 --> 00:26:39.590\ntroubleshooting particular areas of the\nnetwork that are having problems and we're\n\n518\n00:26:39.590 --> 00:26:42.260\ngonna be using these same tools that you\nguys have seen over the last five parts.\n\n519\n00:26:42.260 --> 00:26:43.640\nSo that's why I wanted\nto spend time on these,\n\n520\n00:26:43.640 --> 00:26:46.710\nmade sure you got exposed to them and\ngot a chance to see what those were.\n\n521\n00:26:46.710 --> 00:26:47.810\n>> All right, very good.\n\n522\n00:26:47.810 --> 00:26:51.170\nWell it looks like we're coming to\nthe end of this episode but stick around,\n\n523\n00:26:51.170 --> 00:26:54.250\ncuz we got a lot more to come but\nuntil we see you next time\n\n524\n00:26:54.250 --> 00:26:55.980\n>> I've been your host Wes Ryan.\n\n525\n00:26:55.980 --> 00:26:56.950\n>> And I'm Dom Pezet.\n\n526\n00:26:56.950 --> 00:26:59.511\n>> We'll see you next time.\n\n527\n00:26:59.511 --> 00:27:06.370\n[MUSIC]\n\n",
          "vimeoId": "145146839"
        },
        {
          "description": "In this episode Don and Wes talk about using a systematic approach to addressing problems with in a network by applying a troubleshooting methodology. They show you how to use the Open Systems Interconnect(OSI) and TCP/IP models as a guide to troubleshooting problems inside your network. They discuss how to maintain consistency through change documentation.",
          "length": "1566",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-2-troubleshooting_methodologies-102115-high.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-2-troubleshooting_methodologies-102115-high-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-2-troubleshooting_methodologies-102115-high-sm.jpg",
          "title": "Troubleshooting Methods",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:10.000\n[MUSIC]\n\n2\n00:00:12.790 --> 00:00:16.690\nHello and welcome back to another\nexciting episode here at ITProTV.\n\n3\n00:00:16.690 --> 00:00:19.670\nI'm Wes Bryan, your host with the most,\nback with the gentleman that I\n\n4\n00:00:19.670 --> 00:00:22.330\nswear doesn't have DNA in\nhis bloodstream anymore.\n\n5\n00:00:22.330 --> 00:00:23.825\nHe's replaced it with binary.\n\n6\n00:00:23.825 --> 00:00:25.798\nMr. Don Pezet, how are we doing today?\n\n7\n00:00:25.798 --> 00:00:28.080\n>> I am doing great, Wes,\nglad to be back in this show and\n\n8\n00:00:28.080 --> 00:00:31.190\nto jump into another episode\nof CCP routing and switching.\n\n9\n00:00:31.190 --> 00:00:32.380\nParticularly troubleshooting, right?\n\n10\n00:00:32.380 --> 00:00:34.460\nThat's kinda what we're\nfocusing on on this series.\n\n11\n00:00:34.460 --> 00:00:39.040\nAnd we're gonna kick this show off talking\nabout some troubleshooting methodologies,\n\n12\n00:00:39.040 --> 00:00:43.340\nand then really, this isn't the show\nwe're gonna jump into here's some tools.\n\n13\n00:00:43.340 --> 00:00:44.570\nAnd we're gonna dig into this protocol.\n\n14\n00:00:44.570 --> 00:00:48.270\nWe're gonna start really high level with\nthe process that Cisco expects us to\n\n15\n00:00:48.270 --> 00:00:49.240\nfollow.\n\n16\n00:00:49.240 --> 00:00:50.970\nAs we move through\ntroubleshooting a problem,\n\n17\n00:00:50.970 --> 00:00:52.670\nit ultimately resolving a problem.\n\n18\n00:00:52.670 --> 00:00:55.190\nBecause that's what this\nseries is all about.\n\n19\n00:00:55.190 --> 00:00:59.700\nNow, when you ask yourself, okay, how do\nI approach troubleshooting a problem?\n\n20\n00:00:59.700 --> 00:01:03.660\nMost people have kind of an intuitive way,\na way you've learned throughout life,\n\n21\n00:01:03.660 --> 00:01:05.890\nand it probably works just fine for you.\n\n22\n00:01:05.890 --> 00:01:06.990\nAnd that's great.\n\n23\n00:01:06.990 --> 00:01:09.808\nBut on the exam,\nthey expect you to know a certain way.\n\n24\n00:01:09.808 --> 00:01:12.750\nAnd Cisco's gonna changed\na bit over the years and\n\n25\n00:01:12.750 --> 00:01:17.490\nwhat we've kinda settled on now is\na model that conforms with ITIL.\n\n26\n00:01:17.490 --> 00:01:21.815\nAnd now if you haven't heard of ITIL\nthat's the Information technology industry\n\n27\n00:01:21.815 --> 00:01:26.025\nlibrary or ITIL, it was developed by\nthe British government as a way for\n\n28\n00:01:26.025 --> 00:01:30.045\nIT companies to kind of properly manage\nthemselves, to ensure that they're doing\n\n29\n00:01:30.045 --> 00:01:34.165\nthe right types of record keeping, and\noperations and management practices, and\n\n30\n00:01:34.165 --> 00:01:38.010\nthat they're basically trying to\nimprove their odds of success.\n\n31\n00:01:38.010 --> 00:01:39.460\nIt's not something everybody follows.\n\n32\n00:01:39.460 --> 00:01:42.210\nHere in the United States it's pretty\npopular on the west coast, but\n\n33\n00:01:42.210 --> 00:01:44.780\nover here on the east coast you\ndon't see it all that often, but\n\n34\n00:01:44.780 --> 00:01:48.270\nmore IT companies are starting\nto follow this methodology and\n\n35\n00:01:48.270 --> 00:01:52.055\nso Cisco said if we want to create\na consistent troubleshooting methodology.\n\n36\n00:01:52.055 --> 00:01:55.870\nMust just base it on ITIL,\nit's what people are doing already.\n\n37\n00:01:55.870 --> 00:01:58.410\nSo, if you've been working\nin an ITIL environment\n\n38\n00:01:58.410 --> 00:02:01.050\nthen you're actually probably\nalready set up for this.\n\n39\n00:02:01.050 --> 00:02:04.250\n>> All right, so what you're saying here\nis we've gotta have some kind of method to\n\n40\n00:02:04.250 --> 00:02:08.000\nthe madness, so to apply a method\nto that madness where do we start?\n\n41\n00:02:08.000 --> 00:02:10.710\n>> All right, well there's a few\nplaces you could start and\n\n42\n00:02:10.710 --> 00:02:11.410\nthere's one that I like to,\n\n43\n00:02:11.410 --> 00:02:15.250\nI'm actually, a little off the beaten\npath because the ITIL troubleshooting\n\n44\n00:02:15.250 --> 00:02:18.260\nmethodology that I mentioned, they\ndidn't create that from scratch either.\n\n45\n00:02:18.260 --> 00:02:22.195\nThat's actually based off of some\nother things that kinda goes way back.\n\n46\n00:02:22.195 --> 00:02:26.425\nFor those of you who have studied project\nmanagement there was a guy named Deming\n\n47\n00:02:26.425 --> 00:02:31.400\nwho, this is way back right, we're talking\nabout half a decade or half a century ago.\n\n48\n00:02:31.400 --> 00:02:34.132\nWhere he basically came up with\nthis process improvement model and\n\n49\n00:02:34.132 --> 00:02:37.725\nit centered around this idea of four\nsteps that you always go through,\n\n50\n00:02:37.725 --> 00:02:42.780\nright which is plan,\ndo, check, act, right.\n\n51\n00:02:42.780 --> 00:02:45.030\nWe plan our network.\n\n52\n00:02:45.030 --> 00:02:49.111\nWe plan what we're gonna be doing,\nand then we do it.\n\n53\n00:02:49.111 --> 00:02:51.370\nYou never just jump in and\nstart doing something.\n\n54\n00:02:51.370 --> 00:02:54.950\nYou always have a plan first, right\nthis paper idea of what's gonna happen.\n\n55\n00:02:54.950 --> 00:02:58.460\nAnd then you do it, and\nafter you've done it you check.\n\n56\n00:02:58.460 --> 00:03:01.710\nYou check to make sure that things\nactually went according to the plan from\n\n57\n00:03:01.710 --> 00:03:02.810\nthe beginning.\n\n58\n00:03:02.810 --> 00:03:05.380\nAnd then once all that's done,\nyou planned it,\n\n59\n00:03:05.380 --> 00:03:08.030\nyou did it,\nyou checked it to make sure it was right.\n\n60\n00:03:08.030 --> 00:03:11.930\nThen you act and the act part is kind\nof where troubleshooting falls in.\n\n61\n00:03:11.930 --> 00:03:14.900\nAct is now you use whatever\nit is you just implemented.\n\n62\n00:03:14.900 --> 00:03:17.880\nSo, maybe I need a new router\nin my environment so I plan.\n\n63\n00:03:17.880 --> 00:03:19.360\nWhat's the right router for me?\n\n64\n00:03:19.360 --> 00:03:21.570\nI go out and I select,\nI find the right one.\n\n65\n00:03:21.570 --> 00:03:24.680\nAnd I figure out how I wanna\nconfigure it and all that.\n\n66\n00:03:24.680 --> 00:03:27.860\nThen I do,\nI implement that router in my environment.\n\n67\n00:03:27.860 --> 00:03:30.160\nI take my old router out,\nI put the new router in.\n\n68\n00:03:30.160 --> 00:03:33.350\nI put its configuration on there and\nnow I'm running.\n\n69\n00:03:33.350 --> 00:03:34.540\nAnd then I check.\n\n70\n00:03:34.540 --> 00:03:38.790\nI check to make sure that everything is\nworking the way that it's supposed to be.\n\n71\n00:03:38.790 --> 00:03:40.370\nAnd after that we act.\n\n72\n00:03:40.370 --> 00:03:41.850\nThe router is running.\n\n73\n00:03:41.850 --> 00:03:45.980\nIf something goes wrong, we have to\ntake action to correct it, right.\n\n74\n00:03:45.980 --> 00:03:51.610\nNow, that is plan, do, check, act in\nterms of implementing something new.\n\n75\n00:03:51.610 --> 00:03:54.820\nBut, once it's up and\nrunning and a problem happens,\n\n76\n00:03:54.820 --> 00:03:56.140\nwe really do the same thing again.\n\n77\n00:03:56.140 --> 00:03:59.530\nWe plan there's something\nwrong with the network.\n\n78\n00:03:59.530 --> 00:04:00.060\nWhat is it?\n\n79\n00:04:00.060 --> 00:04:00.820\nI've gotta figure it out.\n\n80\n00:04:00.820 --> 00:04:02.950\nI've gotta come up with a plan\nof how i'm gonna fix this.\n\n81\n00:04:02.950 --> 00:04:07.520\nI've gotta find out what the problem\nis first and then I can plan the fix.\n\n82\n00:04:07.520 --> 00:04:08.670\nAnd then do.\n\n83\n00:04:08.670 --> 00:04:10.820\nI do the fix.\n\n84\n00:04:10.820 --> 00:04:14.880\nAnd then check I check to see\nif the fix actually worked.\n\n85\n00:04:14.880 --> 00:04:18.130\nBecause I'll tell you guys a lot\nof times we implement a change and\n\n86\n00:04:18.130 --> 00:04:19.780\nit doesn't fix the problem.\n\n87\n00:04:19.780 --> 00:04:22.770\nAnd what you just did is\nbroke something else.\n\n88\n00:04:22.770 --> 00:04:24.540\nAnd that's a really bad thing.\n\n89\n00:04:24.540 --> 00:04:27.150\nSo, we wanna make sure that we check and\n\n90\n00:04:27.150 --> 00:04:29.870\nassuming that everything's working the way\nthat it's supposed to then we act.\n\n91\n00:04:29.870 --> 00:04:32.580\nWe're back to normal things kind a run,\nand off they go.\n\n92\n00:04:32.580 --> 00:04:34.320\nSo, the pretty straight forward process.\n\n93\n00:04:34.320 --> 00:04:36.390\nOne you can use in pretty\nmuch use in any walk of life.\n\n94\n00:04:36.390 --> 00:04:36.910\n>> All right.\n\n95\n00:04:36.910 --> 00:04:39.450\nVery good.\nSo, one of the things I'm thinking here is\n\n96\n00:04:39.450 --> 00:04:42.130\nover the years I've seen a few\ndifferent troubleshooting models.\n\n97\n00:04:42.130 --> 00:04:43.320\nComp T is one that has.\n\n98\n00:04:43.320 --> 00:04:44.650\nNovell's got one out there.\n\n99\n00:04:44.650 --> 00:04:46.660\nNow, with this troubleshooting model,\n\n100\n00:04:46.660 --> 00:04:49.860\nis this gonna be something that we're\nreally gonna see inside of the exam,\n\n101\n00:04:49.860 --> 00:04:53.230\nthis systematic approach and\nsomething that we're gonna need to know?\n\n102\n00:04:53.230 --> 00:04:54.025\n>> It is and it isn't.\n\n103\n00:04:54.025 --> 00:04:55.740\n>> [LAUGH]\n>> So, remember that the exam,\n\n104\n00:04:55.740 --> 00:04:59.950\nit's only got 12 to 25 questions,\na really short exam.\n\n105\n00:04:59.950 --> 00:05:02.930\nSo, they hit hard and\nheavy on the troubleshooting.\n\n106\n00:05:02.930 --> 00:05:05.670\nYou're probably not gonna see a lot\nof questions on the methodology side.\n\n107\n00:05:05.670 --> 00:05:06.180\nRight?\n\n108\n00:05:06.180 --> 00:05:07.700\nBut you might see one.\n\n109\n00:05:07.700 --> 00:05:10.820\nBut even if you see one,\nif you've only got a 12 question exam,\n\n110\n00:05:10.820 --> 00:05:13.270\nthat 1 question's a pretty\nimportant part of it, right.\n\n111\n00:05:13.270 --> 00:05:14.800\nSo, you definitely wanna be aware of this.\n\n112\n00:05:14.800 --> 00:05:18.112\nI think on the official exam objectives,\nwhich I've got around here somewhere,\n\n113\n00:05:18.112 --> 00:05:19.264\nit's like 5% of the exam.\n\n114\n00:05:19.264 --> 00:05:21.554\nSo we're not talking about\na huge percentage, again,\n\n115\n00:05:21.554 --> 00:05:23.190\nthat falls in this category.\n\n116\n00:05:23.190 --> 00:05:25.990\nBut, as you approach\nthe problems on the exam,\n\n117\n00:05:25.990 --> 00:05:28.750\nif you approach them this way,\nyou'll be fine.\n\n118\n00:05:28.750 --> 00:05:30.681\nLet me tell you what happens if you\ndon't follow the plan, all right.\n\n119\n00:05:30.681 --> 00:05:31.790\nI'll give you a great example.\n\n120\n00:05:31.790 --> 00:05:34.760\nMost of you guys will probably\nbe able to relate to this story.\n\n121\n00:05:34.760 --> 00:05:37.150\nHave you every worked with somebody,\ncause I'm sure it wasn't you, right.\n\n122\n00:05:37.150 --> 00:05:41.006\nSo, I've got a friend that they see a\nproblem on a server, they see a problem on\n\n123\n00:05:41.006 --> 00:05:44.760\na router, they see a problem on a switch,\nand they start troubleshooting.\n\n124\n00:05:44.760 --> 00:05:47.120\nWell I think it might be this,\nlet me change the setting.\n\n125\n00:05:47.120 --> 00:05:47.970\nThat didn't fix it.\n\n126\n00:05:47.970 --> 00:05:49.440\nMaybe it's this, I change the setting.\n\n127\n00:05:49.440 --> 00:05:50.090\nNo that wasn't it.\n\n128\n00:05:50.090 --> 00:05:51.800\nLet me change this other setting.\n\n129\n00:05:51.800 --> 00:05:55.120\nAnd they change four or five things and\nall of a sudden the problem is fixed.\n\n130\n00:05:55.120 --> 00:05:58.660\nAnd they say yep I'm done,\nlet's call it a day, I'm heading home.\n\n131\n00:05:58.660 --> 00:05:59.380\nRight?\n\n132\n00:05:59.380 --> 00:06:01.310\nWell they change five things.\n\n133\n00:06:01.310 --> 00:06:03.140\nWhich of the five things fixed it?\n\n134\n00:06:03.140 --> 00:06:04.450\nWas it the last one?\n\n135\n00:06:04.450 --> 00:06:07.680\nRight, if it was the last one, what\nabout the first four changes that I did?\n\n136\n00:06:07.680 --> 00:06:10.380\nThe first four changes\nI shouldn't have done,\n\n137\n00:06:10.380 --> 00:06:12.500\nthey might have broken something else.\n\n138\n00:06:12.500 --> 00:06:15.570\nAnd so on the exam you might be\nworking through a problem and\n\n139\n00:06:15.570 --> 00:06:19.940\nyou're just doing change after change\nafter change trying to fix the problem and\n\n140\n00:06:19.940 --> 00:06:23.940\nyou might fix the problem,\nbut cause another problem.\n\n141\n00:06:23.940 --> 00:06:26.070\nAnd if you do that you\nget the question wrong.\n\n142\n00:06:26.070 --> 00:06:28.010\nYou might as well have not fixed\nthe problem in the first place cause\n\n143\n00:06:28.010 --> 00:06:28.930\nyou just caused another one.\n\n144\n00:06:28.930 --> 00:06:32.820\nSo, we've gotta make sure that the changes\nwe implement actually fix the problem.\n\n145\n00:06:32.820 --> 00:06:34.710\nThat's part of a check process, right.\n\n146\n00:06:34.710 --> 00:06:35.860\nPlan, do, check, act.\n\n147\n00:06:35.860 --> 00:06:38.830\nWe check to make sure we\nactually fixed the problem.\n\n148\n00:06:38.830 --> 00:06:42.330\nAnd if we didn't fix it,\nwe've gotta make a decision.\n\n149\n00:06:42.330 --> 00:06:44.975\nDo we roll back the change we made?\n\n150\n00:06:44.975 --> 00:06:46.050\nCause it didn't fix the problem.\n\n151\n00:06:46.050 --> 00:06:47.380\nMaybe this need to take that out.\n\n152\n00:06:47.380 --> 00:06:51.386\nOr if there's a second fix I needed\nto put in place that combines with\n\n153\n00:06:51.386 --> 00:06:52.920\nthe first to fix it.\n\n154\n00:06:52.920 --> 00:06:54.130\nI need to understand that.\n\n155\n00:06:54.130 --> 00:06:58.381\nI need to understand that every\nchange I make has consequences.\n\n156\n00:06:58.381 --> 00:07:01.040\nA great example and Wes,\nI'm sure you've seen this.\n\n157\n00:07:01.040 --> 00:07:02.520\nI complain about this all the time.\n\n158\n00:07:02.520 --> 00:07:05.080\nI complain about a lot of things,\nbut this one in particular.\n\n159\n00:07:05.080 --> 00:07:07.450\nIf you have a problem on your computer,\nright?\n\n160\n00:07:07.450 --> 00:07:10.090\nMac, Linux, Windows,\nit doesn't really matter.\n\n161\n00:07:10.090 --> 00:07:13.620\nAnd you go onto the Internet and\nyou do a search, like this isn't working.\n\n162\n00:07:13.620 --> 00:07:19.220\nYou can, in the first ten Google results\nyou'll find somebody in Windows it's UAC,\n\n163\n00:07:19.220 --> 00:07:20.180\nuser access control.\n\n164\n00:07:20.180 --> 00:07:23.570\nThey'll say oh, just turn off UAC and\nthen it'll work just fine.\n\n165\n00:07:23.570 --> 00:07:28.090\nOn Linux you'll see where they say like\nSE Linux, just turn off SE Linux and\n\n166\n00:07:28.090 --> 00:07:28.710\nit'll be find.\n\n167\n00:07:28.710 --> 00:07:31.540\nOr on Mac it'll be the system\nintegrity protection.\n\n168\n00:07:31.540 --> 00:07:33.080\nJust turn that off and you'll be fine.\n\n169\n00:07:33.080 --> 00:07:36.190\nWell, when you turn those off,\nall of those things I just said,\n\n170\n00:07:36.190 --> 00:07:37.860\nthey're security sub layers.\n\n171\n00:07:37.860 --> 00:07:40.310\nAnd if you turn off all\nthe security on your system, yeah,\n\n172\n00:07:40.310 --> 00:07:42.650\na lot of your software will\nstart working just fine.\n\n173\n00:07:42.650 --> 00:07:45.100\nBut, now you're very unsecure.\n\n174\n00:07:45.100 --> 00:07:48.150\nAnd an attacker can get into your system\nand really start to cause some problems.\n\n175\n00:07:48.150 --> 00:07:51.290\nAnd you see this same thing on routers,\nand switches, and firewalls.\n\n176\n00:07:51.290 --> 00:07:52.950\nIf you started disabling this stuff,\n\n177\n00:07:52.950 --> 00:07:55.090\nyou can really be opening\nyourself up to attacks.\n\n178\n00:07:55.090 --> 00:07:56.905\nYou've gotta understand\nthe change you're gonna make.\n\n179\n00:07:56.905 --> 00:08:00.136\n>> Yeah and one of the things I've seen\ntoo is where you're troubleshooting\n\n180\n00:08:00.136 --> 00:08:03.331\nmore so a piece of software and\nit needs to communicate with the network.\n\n181\n00:08:03.331 --> 00:08:06.627\nOne of the first things that you'll\nhear some people in forum say, well,\n\n182\n00:08:06.627 --> 00:08:07.916\njust disable the firewall.\n\n183\n00:08:07.916 --> 00:08:08.913\nThat fixes everything.\n\n184\n00:08:08.913 --> 00:08:09.539\nRight?\n\n185\n00:08:09.539 --> 00:08:12.869\nAnd then now we don't know why all\nten other computers are now having,\n\n186\n00:08:12.869 --> 00:08:14.630\nmanifesting all kinds of problems.\n\n187\n00:08:14.630 --> 00:08:18.820\nSo I don't think that's probably the best\nmethodology, if you will, to implement.\n\n188\n00:08:18.820 --> 00:08:19.890\nRight?\n>> Yeah.\n\n189\n00:08:19.890 --> 00:08:23.585\nWhy are there 10,000 emails a second going\nout on my network, I don't understand.\n\n190\n00:08:23.585 --> 00:08:25.120\n[LAUGH]\n>> Well, they're doing this blacklist now,\n\n191\n00:08:25.120 --> 00:08:26.622\nand I can't figure it out.\n\n192\n00:08:26.622 --> 00:08:27.330\n[LAUGH]\n>> Yeah, and\n\n193\n00:08:27.330 --> 00:08:30.830\nthat does happen all too often, so we've\ngotta be careful with that, we've gotta\n\n194\n00:08:30.830 --> 00:08:34.140\nmake sure we understand the effects\nof the change that we're gonna make.\n\n195\n00:08:34.140 --> 00:08:36.030\nSo plan, do, check, act.\n\n196\n00:08:36.030 --> 00:08:39.340\nNow, the other thing is\nwhen we approach a problem,\n\n197\n00:08:39.340 --> 00:08:41.500\nsometimes we don't know where to start,\nright?\n\n198\n00:08:41.500 --> 00:08:43.440\nThere's a problem and I'm like, man,\n\n199\n00:08:43.440 --> 00:08:45.870\nI really don't understand\nwhat's causing this.\n\n200\n00:08:45.870 --> 00:08:48.280\nIf you've been in the industry\na long time, maybe you know it.\n\n201\n00:08:48.280 --> 00:08:50.350\nOh yeah, I know what's causing that,\nthis is the fix,\n\n202\n00:08:50.350 --> 00:08:51.680\nthat'll take care of it and you're done.\n\n203\n00:08:51.680 --> 00:08:52.370\nRight?\n\n204\n00:08:52.370 --> 00:08:56.490\nBut if somebody says, hey, when I'm\non this computer, I can print to that\n\n205\n00:08:56.490 --> 00:08:59.530\nprinter, but when I'm on this other\ncomputer, I can't print to the printer.\n\n206\n00:08:59.530 --> 00:09:00.810\nWhat's up?\n\n207\n00:09:00.810 --> 00:09:02.140\nWell, where do we start?\n\n208\n00:09:02.140 --> 00:09:04.030\nWe're network engineers,\nso we think network.\n\n209\n00:09:04.030 --> 00:09:06.720\nAll right, well is the cable plugged in,\ndo we have an IP address?\n\n210\n00:09:06.720 --> 00:09:10.260\nBut there's really a number of different\nplaces that problem can originate.\n\n211\n00:09:10.260 --> 00:09:13.820\nAnd so one of the great troubleshooting\nmethodologies we can use\n\n212\n00:09:13.820 --> 00:09:15.880\nIs called the top down model.\n\n213\n00:09:15.880 --> 00:09:20.650\nNow the top down model, what we're really\ntalking about there is the OSI model,\n\n214\n00:09:20.650 --> 00:09:24.440\nthe open systems interconnect,\nyeah that's right.\n\n215\n00:09:24.440 --> 00:09:25.251\n>> Yeah you got it.\n>> [CROSSTALK]\n\n216\n00:09:25.251 --> 00:09:27.295\n>> And the way we can use that model to\n\n217\n00:09:27.295 --> 00:09:28.905\ntroubleshoot a problem.\n\n218\n00:09:28.905 --> 00:09:32.120\n>> Yeah now when you say top down\nwhat I'm thinking of is the fact\n\n219\n00:09:32.120 --> 00:09:34.350\nthat the OSI model is a layered system.\n\n220\n00:09:34.350 --> 00:09:37.510\nSo you're talking about working from\nthe top of the protocol stack or\n\n221\n00:09:37.510 --> 00:09:41.160\nthe top portion that we first\nstart to interact with.\n\n222\n00:09:41.160 --> 00:09:44.320\nAnd then systematically\njust maybe checking\n\n223\n00:09:44.320 --> 00:09:46.400\nthings off as we work down\nthose different layers.\n\n224\n00:09:46.400 --> 00:09:47.450\nIs that what you're talking about there?\n\n225\n00:09:47.450 --> 00:09:48.520\n>> Yeah, absolutely.\n\n226\n00:09:48.520 --> 00:09:50.360\nYou guys know the OSI model.\n\n227\n00:09:50.360 --> 00:09:53.220\nWe saw it way back in CCENT,\nand again in CCNA.\n\n228\n00:09:53.220 --> 00:09:55.300\nSo, why not see it here in CCNP again.\n\n229\n00:09:55.300 --> 00:09:56.800\nI've got it pulled up on my screen here.\n\n230\n00:09:56.800 --> 00:09:59.540\nThis is our seven layer OSI model.\n\n231\n00:09:59.540 --> 00:10:00.760\nIf you're approaching a problem and\n\n232\n00:10:00.760 --> 00:10:04.600\nyou just have no idea where to start,\nThe OSI model can really help you out.\n\n233\n00:10:04.600 --> 00:10:06.560\nWhen I say top down,\n\n234\n00:10:06.560 --> 00:10:12.180\nI mean let's start right up here at\nlayer 7, the application layer, right?\n\n235\n00:10:12.180 --> 00:10:15.380\nIf somebody says, hey, when I'm on one\ncomputer, I can print to a printer.\n\n236\n00:10:15.380 --> 00:10:18.020\nWhen I'm on another computer,\nI can't print to the printer.\n\n237\n00:10:18.020 --> 00:10:20.030\nMaybe it's the software they're using.\n\n238\n00:10:20.030 --> 00:10:22.570\nMaybe they're using\nMicrosoft Word on one computer and\n\n239\n00:10:22.570 --> 00:10:25.290\nthey're using Adobe Acrobat Reader\non the other one.\n\n240\n00:10:25.290 --> 00:10:29.280\nAnd it's the program that's not printing,\nnot the network, not the OS or\n\n241\n00:10:29.280 --> 00:10:30.630\nanything like that.\n\n242\n00:10:30.630 --> 00:10:32.930\nSo we start troubleshooting there.\n\n243\n00:10:32.930 --> 00:10:34.930\nThen we start moving down.\n\n244\n00:10:34.930 --> 00:10:36.350\nAnd troubleshooting additional problems.\n\n245\n00:10:36.350 --> 00:10:37.800\nIt might be the presentation layer.\n\n246\n00:10:37.800 --> 00:10:39.960\nMaybe I've got a bad print driver,\n\n247\n00:10:39.960 --> 00:10:42.040\nand I'm using the wrong print language or\nsomething.\n\n248\n00:10:42.040 --> 00:10:45.020\nThis is kinda outside of the range\nof Cisco troubleshooting.\n\n249\n00:10:45.020 --> 00:10:49.230\nOn the Cisco side, we really start down\nhere at layer five, the session layer.\n\n250\n00:10:49.230 --> 00:10:51.290\nAll right, the session layer,\nI'm printing.\n\n251\n00:10:51.290 --> 00:10:52.860\nSo I'm using a print protocol.\n\n252\n00:10:52.860 --> 00:10:56.590\nWhat protocol am I using, what port\nnumber is it using to cross the network.\n\n253\n00:10:56.590 --> 00:10:58.970\nIs is using Apple Talk or TCPIP?\n\n254\n00:10:58.970 --> 00:11:05.170\nIs is using IPXSPX to get to that printer\nand am I allowing that to pass through,\n\n255\n00:11:05.170 --> 00:11:07.760\ndo I have access control lists\nthat are blocking it, right?\n\n256\n00:11:07.760 --> 00:11:10.590\nThat's the kind of stuff that can\nhappen at the session layer and\n\n257\n00:11:10.590 --> 00:11:12.240\nthe transport layer.\n\n258\n00:11:12.240 --> 00:11:15.920\nThen as we get beneath that we get to\nlayer three, the network layer, all right.\n\n259\n00:11:15.920 --> 00:11:19.010\nAm I able to see the IP\naddress of that printer?\n\n260\n00:11:19.010 --> 00:11:21.090\nIs that printer on\nthe same network as I am?\n\n261\n00:11:21.090 --> 00:11:22.180\nIf it's not on the same network,\n\n262\n00:11:22.180 --> 00:11:25.590\nis there a router in between\nthat can route between the two?\n\n263\n00:11:25.590 --> 00:11:29.490\nDoes that router know about my network and\nthe network the printer is on,\n\n264\n00:11:29.490 --> 00:11:33.470\nas layer three technology, is when you\nhave more than one network involved.\n\n265\n00:11:33.470 --> 00:11:38.060\nMaybe I've only got one network involved\nand so it's just layer two communications.\n\n266\n00:11:38.060 --> 00:11:42.250\nAm I able to do an ARP broadcast and\nfind the Mac address of that printer.\n\n267\n00:11:42.250 --> 00:11:43.920\nCan I even see it that way?\n\n268\n00:11:43.920 --> 00:11:46.960\nCuz if that doesn't work\neverything above it fails, right?\n\n269\n00:11:46.960 --> 00:11:49.080\nThe OSI model stacks together.\n\n270\n00:11:49.080 --> 00:11:52.460\nIf a bottom layer fails,\neverything above it fails.\n\n271\n00:11:52.460 --> 00:11:56.720\nSo we're kind of moving down the model\ntrying to find where that failure is.\n\n272\n00:11:56.720 --> 00:11:59.515\nAnd when we get to the very bottom\nwe're at the physical layer,\n\n273\n00:11:59.515 --> 00:12:01.640\nmaybe the network cable's unplugged.\n\n274\n00:12:01.640 --> 00:12:03.810\nMaybe the wireless access\npoint is powered off.\n\n275\n00:12:03.810 --> 00:12:07.140\nMaybe there's some kind of break\nin the network connection,\n\n276\n00:12:07.140 --> 00:12:11.590\nthe physical network, between this work\nstation and the rest of the network.\n\n277\n00:12:11.590 --> 00:12:18.200\nSo, as we move down, we can really start\nto dial in where that problem is, right.\n\n278\n00:12:18.200 --> 00:12:19.950\nBut from the Cisco perspective,\n\n279\n00:12:19.950 --> 00:12:24.150\nwe're normally focused on layers one\nthrough five, these guys right here.\n\n280\n00:12:24.150 --> 00:12:28.050\nBecause those are the ones that\nrouters and switches pay attention to.\n\n281\n00:12:28.050 --> 00:12:31.090\nRouters and switches don't normally\ncare about layer six and seven.\n\n282\n00:12:31.090 --> 00:12:35.038\n>> All right, so when we talk\nabout those lower layers there,\n\n283\n00:12:35.038 --> 00:12:39.240\nat this point we're not really care about\ntoo much what the application's doing or\n\n284\n00:12:39.240 --> 00:12:41.290\nhow it's bundling it and\ngetting it ready for the network.\n\n285\n00:12:41.290 --> 00:12:46.350\nWe just really need to know when it gets\non that wire, or it's being prepared\n\n286\n00:12:46.350 --> 00:12:50.360\non that wire, the communication between\nthose two end points becomes more crucial?\n\n287\n00:12:50.360 --> 00:12:54.730\n>> Yeah, absolutely, and it's all\nkind of built upon each other, so you\n\n288\n00:12:54.730 --> 00:12:57.820\nhave to target that one layer, and some\nlayers are more important than others.\n\n289\n00:12:57.820 --> 00:13:02.590\nIf you're troubleshooting with Ping for\nexample, Ping doesn't build a session.\n\n290\n00:13:02.590 --> 00:13:04.780\nDoesn't have any special presentation.\n\n291\n00:13:04.780 --> 00:13:07.650\nDoesn't even have really\nan application that we care about.\n\n292\n00:13:07.650 --> 00:13:11.240\nPing is just an echo sound on\nthe network and a reply that comes back.\n\n293\n00:13:11.240 --> 00:13:14.780\nSo it really lets us test\nareas one through four.\n\n294\n00:13:14.780 --> 00:13:15.350\nRight?\n\n295\n00:13:15.350 --> 00:13:18.540\nBut the higher application layers here,\nlike five, six, and seven,\n\n296\n00:13:18.540 --> 00:13:19.730\nthey're important.\n\n297\n00:13:19.730 --> 00:13:20.310\nRight?\n\n298\n00:13:20.310 --> 00:13:23.600\nIf we look at the TCP IP model, right?\n\n299\n00:13:23.600 --> 00:13:26.560\nSo this is not the OSI model itself.\n\n300\n00:13:26.560 --> 00:13:28.400\nThis is kind of boiled down for TCP IP.\n\n301\n00:13:28.400 --> 00:13:31.800\nSee how TCP IP combines those top\nthree layers all into application.\n\n302\n00:13:31.800 --> 00:13:34.660\nBecause as far as TCP IP is concerned,\n\n303\n00:13:34.660 --> 00:13:38.510\nit doesn't really care what application\nyou use, it functions one way.\n\n304\n00:13:38.510 --> 00:13:42.680\nAnd so your routers and your switches\nare all getting involved in these bottom\n\n305\n00:13:42.680 --> 00:13:45.690\nfour layers here so they kind of block\nthat out a little bit differently.\n\n306\n00:13:45.690 --> 00:13:46.270\nAll right.\n\n307\n00:13:46.270 --> 00:13:51.490\nNow I will tell you one thing,\nas far as the top down model is concerned,\n\n308\n00:13:51.490 --> 00:13:56.470\nit's a good model, it certainly works,\nbut for me personally,\n\n309\n00:13:56.470 --> 00:14:01.520\nI've found many times where I prefer\nto use the bottom up model, right?\n\n310\n00:14:01.520 --> 00:14:05.750\nJust because over the years, I've found\nwhere a lot of times, problems are more\n\n311\n00:14:05.750 --> 00:14:09.690\neasily solved from the bottom where you\nget your kind of common sense things and\n\n312\n00:14:09.690 --> 00:14:12.540\nthen go up to the more difficult to\ntroubleshoot things like applications.\n\n313\n00:14:12.540 --> 00:14:13.160\n>> Yeah, definitely.\n\n314\n00:14:13.160 --> 00:14:15.220\nIn fact this is one that\nI've heard of a lot.\n\n315\n00:14:15.220 --> 00:14:16.340\nOne of the first things,\n\n316\n00:14:16.340 --> 00:14:20.140\nin fact I think you've told me before,\nis the cable plugged in?\n\n317\n00:14:20.140 --> 00:14:21.630\nRight. is that the first thing?\nSimple fixes first.\n\n318\n00:14:21.630 --> 00:14:24.940\nIf the cable's not plugged in then\nwe don't have any communications.\n\n319\n00:14:24.940 --> 00:14:26.750\nDo we have any power on the device?\n\n320\n00:14:26.750 --> 00:14:28.110\nWell, that's it we don't have any power,\n\n321\n00:14:28.110 --> 00:14:29.740\nit doesn't matter if\nthe cable's plugged in or not.\n\n322\n00:14:29.740 --> 00:14:32.218\nSo basically you're just\nreversing the order and\n\n323\n00:14:32.218 --> 00:14:34.050\nyou're saying simple fixes first.\n\n324\n00:14:34.050 --> 00:14:36.110\nLet's start with the physical cabling.\n\n325\n00:14:36.110 --> 00:14:38.390\n>> Yeah,\nI like to call it the low hanging fruit.\n\n326\n00:14:38.390 --> 00:14:41.535\nRight?\nIf you go to a tree, like an orange tree,\n\n327\n00:14:41.535 --> 00:14:44.305\nthere's oranges at the very top of the\ntree that are really hard to get to, and\n\n328\n00:14:44.305 --> 00:14:46.840\nthere's oranges at the bottom of the tree\nthat you just reach up and grab, right?\n\n329\n00:14:46.840 --> 00:14:50.760\nSo the bottom layers of the OSI model\nare the easiest to troubleshoot.\n\n330\n00:14:50.760 --> 00:14:51.960\nThe physical layer.\n\n331\n00:14:51.960 --> 00:14:53.230\nIs the cable plugged in?\n\n332\n00:14:53.230 --> 00:14:54.140\nI mean it's so easy.\n\n333\n00:14:54.140 --> 00:14:55.070\nDoes it have link lights.\n\n334\n00:14:55.070 --> 00:14:56.130\nYou just look.\n\n335\n00:14:56.130 --> 00:14:59.364\nAnd so that's far easier than saying okay\nwhat version of this application am I\n\n336\n00:14:59.364 --> 00:15:02.402\nrunning, are there updates available,\nlet me read the release notes and\n\n337\n00:15:02.402 --> 00:15:06.040\nsee if they've addressed this problem,\nlet me go to a knowledge base and search.\n\n338\n00:15:06.040 --> 00:15:07.340\nThat's hard stuff.\n\n339\n00:15:07.340 --> 00:15:10.040\nI'm kind of lazy so\nI don't want to deal with that.\n\n340\n00:15:10.040 --> 00:15:11.390\nI want to deal with the easy stuff.\n\n341\n00:15:11.390 --> 00:15:13.690\nSo physical layer,\nis the cable plugged in?\n\n342\n00:15:13.690 --> 00:15:18.490\nData-link layer, can I do an art broadcast\nand get a Mac address back for their IP?\n\n343\n00:15:18.490 --> 00:15:20.560\nCan I even see the network\nat the layer two side?\n\n344\n00:15:20.560 --> 00:15:23.100\nCan I see that I'm plugged into a switch?\n\n345\n00:15:23.100 --> 00:15:26.450\nLayer three, can I access\nthe network this other side is on?\n\n346\n00:15:26.450 --> 00:15:27.210\nI can use Ping.\n\n347\n00:15:27.210 --> 00:15:28.140\nI can use trace route.\n\n348\n00:15:28.140 --> 00:15:30.310\nWe've got a ton of tools for\ntrouble shooting that stuff.\n\n349\n00:15:30.310 --> 00:15:33.900\nThese are easy to troubleshoot and\nwe can locate where that problem is.\n\n350\n00:15:33.900 --> 00:15:36.810\nAnd if the problem is in one of these\nlayers, we can find it and fix it.\n\n351\n00:15:36.810 --> 00:15:39.730\nIf the problem's up here,\nthey're often complex problems.\n\n352\n00:15:39.730 --> 00:15:41.930\nIt can be very hard to troubleshoot and\nsolve.\n\n353\n00:15:41.930 --> 00:15:45.840\nSo I like bottom up because we can\nknock out the easy stuff first, and\n\n354\n00:15:45.840 --> 00:15:47.210\nif it's a hard problem,\nwe'll deal with it.\n\n355\n00:15:47.210 --> 00:15:50.270\nBut if it's an easy problem, we're solved,\nand we never messed with the hard stuff.\n\n356\n00:15:50.270 --> 00:15:51.710\nThat's the bottom up analysis.\n\n357\n00:15:51.710 --> 00:15:52.337\n>> Very good, very good.\n\n358\n00:15:52.337 --> 00:15:55.682\nSo we're talking about that\nsystematic approach, so\n\n359\n00:15:55.682 --> 00:16:00.419\nwhat's the next thing gonna be for\nus in the method to the madness here, Don?\n\n360\n00:16:00.419 --> 00:16:04.563\nRemember that the OSI model,\nthat's one way to go about it, right?\n\n361\n00:16:04.563 --> 00:16:06.420\nAnd that's simply a suggestion,\nyou don't have to do it.\n\n362\n00:16:06.420 --> 00:16:08.670\nThere's plenty of other\nmethodologies out there.\n\n363\n00:16:08.670 --> 00:16:12.020\nI'll tell you guys, to be really honest\nwith you, when I'm troubleshooting\n\n364\n00:16:12.020 --> 00:16:16.010\nsomething like individual link, I don't\neven think about the OSI models so much.\n\n365\n00:16:16.010 --> 00:16:19.610\nI think, I've got router A and\nit's connected to router B, and\n\n366\n00:16:19.610 --> 00:16:20.620\nsomething's not working right?\n\n367\n00:16:20.620 --> 00:16:26.250\nMaybe the VPN tunnel's not coming up or\na link is not passing traffic,\n\n368\n00:16:26.250 --> 00:16:29.120\nor EIGRP is not exchanging routes,\nall right.\n\n369\n00:16:29.120 --> 00:16:30.830\nBut these two routers\nare connected to each other.\n\n370\n00:16:30.830 --> 00:16:35.010\nSo, I take the config of one router and\nI compared the config to the other router.\n\n371\n00:16:35.010 --> 00:16:38.680\nIf you want them to talk their configs\nshould be pretty close to the same, right?\n\n372\n00:16:38.680 --> 00:16:42.510\nIf I want EIGRP to talk I've gotta have\nthe same autonomous system number.\n\n373\n00:16:42.510 --> 00:16:45.540\nIf authentication is turned on I've gotta\nhave the same password set as one of\n\n374\n00:16:45.540 --> 00:16:47.570\nthe keys to share on my keychain.\n\n375\n00:16:47.570 --> 00:16:53.100\nIf I have OSPF, I need area numbers,\nhello timers, adjacency information.\n\n376\n00:16:53.100 --> 00:16:55.750\nAll that stuff had got to match\nin between the different nodes or\n\n377\n00:16:55.750 --> 00:16:57.410\nthey're not going to exchange routes.\n\n378\n00:16:57.410 --> 00:17:00.040\nSo if I just look at the configs I\ncan compare and I can find it and\n\n379\n00:17:00.040 --> 00:17:03.010\nI don't care if it's layer one or\nlayer five or whatever.\n\n380\n00:17:03.010 --> 00:17:04.310\nWe're just looking at the configs.\n\n381\n00:17:04.310 --> 00:17:07.090\nSo, that's not something\nyou should discard\n\n382\n00:17:07.090 --> 00:17:09.190\nespecially in the exam where\ntime is of the essence.\n\n383\n00:17:09.190 --> 00:17:12.490\nIf you can just compare configs and find\nthe problem, certainly do that, right?\n\n384\n00:17:12.490 --> 00:17:16.960\nSo, don't feel bound to go through and\ntest all the layers of the OSI model.\n\n385\n00:17:16.960 --> 00:17:19.430\nThere's also other things\nsomethings that are easy,\n\n386\n00:17:19.430 --> 00:17:22.790\nsomethings that are hard,\nstuff like debugs, right?\n\n387\n00:17:22.790 --> 00:17:26.930\nThat's another one that we can do to\nreally get in and find some information.\n\n388\n00:17:26.930 --> 00:17:30.950\n>> Now debugging, when talk about dubugs,\nI start to get a little nervous here.\n\n389\n00:17:30.950 --> 00:17:33.860\nBecause I don't know a lot\nabout software development but\n\n390\n00:17:33.860 --> 00:17:37.000\nthe first thing I think about\ndebugging is, man, get ready for it,\n\n391\n00:17:37.000 --> 00:17:38.890\ncuz you're going to get\na whole bunch of information.\n\n392\n00:17:38.890 --> 00:17:43.560\nMaybe it could be a little, I don't know,\ndaunting task or a little confusing.\n\n393\n00:17:43.560 --> 00:17:45.135\nSounds like it might even be overwhelming.\n\n394\n00:17:45.135 --> 00:17:47.025\nAre we talking about the same thing here?\n\n395\n00:17:47.025 --> 00:17:47.925\n>> Yeah, absolutely.\n\n396\n00:17:47.925 --> 00:17:52.255\nAnd on routers and switches, debugging,\nit's turned off for v2i connections, for\n\n397\n00:17:52.255 --> 00:17:53.615\nSSH and Telnet.\n\n398\n00:17:53.615 --> 00:17:56.805\nIt's turned off by default because it can\nbe so much information it can overwhelm\n\n399\n00:17:56.805 --> 00:17:58.645\nyour session and\nlock you out of the device, right?\n\n400\n00:17:58.645 --> 00:18:02.695\nSo Cisco recommends that you\ndebug from the console port.\n\n401\n00:18:02.695 --> 00:18:06.200\nAnd we're gonna see debug several\ntimes throughout this series.\n\n402\n00:18:06.200 --> 00:18:08.690\n>> And it's important that you\nalways keep it filtered to\n\n403\n00:18:08.690 --> 00:18:10.640\njust the information you need.\n\n404\n00:18:10.640 --> 00:18:13.250\nIf you just open it up like a firehose,\nit is so\n\n405\n00:18:13.250 --> 00:18:15.420\nmuch data you're not gonna be able\nto make any use out of it, right?\n\n406\n00:18:15.420 --> 00:18:18.170\nSo we've really got to do targeted debugs.\n\n407\n00:18:18.170 --> 00:18:21.520\nBut it is a great way to get additional\ninformation to find more of what's going\n\n408\n00:18:21.520 --> 00:18:23.030\non behind the scenes.\n\n409\n00:18:23.030 --> 00:18:25.340\nAlso, if you're keeping good\ndocumentation on your network,\n\n410\n00:18:25.340 --> 00:18:28.080\nthis is an important one,\nchange documentation, right?\n\n411\n00:18:28.080 --> 00:18:33.360\nThis is a kind of a concept that comes\nfrom ITEL is you plan any change.\n\n412\n00:18:33.360 --> 00:18:37.270\nIf your network is broken you've got to\nmake a change to fix it so you plan it and\n\n413\n00:18:37.270 --> 00:18:39.030\nyou document it, right?\n\n414\n00:18:39.030 --> 00:18:42.540\nChange documentation is something\na lot of small businesses don't do.\n\n415\n00:18:42.540 --> 00:18:44.120\nCCNP's not about small business.\n\n416\n00:18:44.120 --> 00:18:46.210\nNow we're talking about large business and\nenterprise.\n\n417\n00:18:46.210 --> 00:18:49.070\nYou have more than one network engineer,\nand you've got to\n\n418\n00:18:49.070 --> 00:18:53.280\nkeep each person informed of what's going\non and change documentation does that.\n\n419\n00:18:53.280 --> 00:18:56.160\n>> Yeah, one of the things I'm thinking\nright now is I'm gonna jump in,\n\n420\n00:18:56.160 --> 00:18:57.070\nand I'm gonna fix this, Don.\n\n421\n00:18:57.070 --> 00:19:00.060\nI'm gonna make a whole bunch of changes,\nand nobody's gonna know about it.\n\n422\n00:19:00.060 --> 00:19:03.900\nWhat kind of problems might that introduce\nto our networks I mean doesn't sound like\n\n423\n00:19:03.900 --> 00:19:05.450\na good idea to me honestly.\n\n424\n00:19:05.450 --> 00:19:07.480\n>> Yeah, I've got a great example of this.\n\n425\n00:19:07.480 --> 00:19:12.100\nSo many years ago, over a decade ago, I\nworked at an insurance company with one of\n\n426\n00:19:12.100 --> 00:19:15.260\nour other show hosts here Daniel and\nthere was a gentleman there,\n\n427\n00:19:15.260 --> 00:19:18.970\nhe was a brilliant guy,\nhe did a lot of the networking with me and\n\n428\n00:19:18.970 --> 00:19:21.350\nhe was actually the one who\nsupported all of our firewalls.\n\n429\n00:19:21.350 --> 00:19:25.430\nWe had like 110 firewalls\nspread across the state And\n\n430\n00:19:25.430 --> 00:19:27.500\nwhenever he was gonna go on vacation.\n\n431\n00:19:27.500 --> 00:19:30.490\nYou always knew he was going on\nvacation because he'd get super busy.\n\n432\n00:19:30.490 --> 00:19:34.490\nHe would bust his butt to\nget a lot of work done so\n\n433\n00:19:34.490 --> 00:19:36.290\nthat he could then go on vacation right?\n\n434\n00:19:36.290 --> 00:19:40.910\nWell the problem was he would always\nimplement a ton of change and\n\n435\n00:19:40.910 --> 00:19:42.640\nthen go on vacation.\n\n436\n00:19:42.640 --> 00:19:45.320\nAnd so Monday would roll around,\nI'd come in the office, and\n\n437\n00:19:45.320 --> 00:19:47.880\nwe'd have all these branches down or\nsoftware not working and\n\n438\n00:19:47.880 --> 00:19:52.080\nI'd have to scramble to figure out man,\nwhat the heck did he change?\n\n439\n00:19:52.080 --> 00:19:54.080\nI gotta figure this out, right?\n\n440\n00:19:54.080 --> 00:19:58.470\nThen if we had changed documentation\nwhich we certainly did after a while,\n\n441\n00:19:58.470 --> 00:20:02.260\nbut if we had changed documentation,\nall I had to do was say all right,\n\n442\n00:20:02.260 --> 00:20:05.920\nlet me go pull all the change tickets from\nThursday and Friday and see what changed.\n\n443\n00:20:05.920 --> 00:20:07.690\nI'm having this problem,\nthis software isn't working,\n\n444\n00:20:07.690 --> 00:20:10.130\nwhich of these change tickets\ncould have caused it, right?\n\n445\n00:20:10.130 --> 00:20:13.120\nAnd now I look at it and I have a better\nidea of what happened on the network and\n\n446\n00:20:13.120 --> 00:20:14.070\nI can see that.\n\n447\n00:20:14.070 --> 00:20:17.700\nIf you are a one man IT shop the change\ntickets are right here, right?\n\n448\n00:20:17.700 --> 00:20:18.950\nThey're right in your skull.\n\n449\n00:20:18.950 --> 00:20:20.310\nBut if you've got ten, 20,\n\n450\n00:20:20.310 --> 00:20:23.740\n100 network engineers you've got\na full network operations center.\n\n451\n00:20:23.740 --> 00:20:27.010\nWell one person could make a change and\nthe other people don't know and now\n\n452\n00:20:27.010 --> 00:20:29.730\nit becomes a troubleshooting nightmare,\nespecially if they're not available.\n\n453\n00:20:29.730 --> 00:20:32.730\nSo a change ticket,\nwhen somebody fills out,\n\n454\n00:20:32.730 --> 00:20:34.790\nthey should contain a lot of information.\n\n455\n00:20:34.790 --> 00:20:38.350\nIt really should contain,\nwhat the change is?\n\n456\n00:20:38.350 --> 00:20:40.850\nWhy your making the change,\nor what's the business case?\n\n457\n00:20:40.850 --> 00:20:44.160\nHow does it improve your environment\nknown as to fix the problem, right?\n\n458\n00:20:44.160 --> 00:20:46.060\nWhen you're gonna make the change?\n\n459\n00:20:46.060 --> 00:20:47.850\nWhat systems it's going to impact.\n\n460\n00:20:47.850 --> 00:20:50.760\nSo, what we can expect to happen\nafter the change is in place.\n\n461\n00:20:50.760 --> 00:20:55.600\nAnd then we should also have steps to undo\nthe change should we need to undo it.\n\n462\n00:20:55.600 --> 00:20:57.580\nThat's the one a lot of people leave out.\n\n463\n00:20:57.580 --> 00:21:00.540\nAnd we should also contain in there,\nnot just the steps to undo it,\n\n464\n00:21:00.540 --> 00:21:03.710\nbut what are the triggers that\nindicate we should undo it?\n\n465\n00:21:03.710 --> 00:21:06.330\nHow do I know if, yeah,\nI need to roll this back, right?\n\n466\n00:21:06.330 --> 00:21:09.740\nOne of my kind of, witness test or\n\n467\n00:21:09.740 --> 00:21:12.160\nmeasuring stick that tells me\nwhen I need to roll that back.\n\n468\n00:21:12.160 --> 00:21:14.630\nThose are all things that should\nbe in that change ticket.\n\n469\n00:21:14.630 --> 00:21:18.790\nAnd the most important part of a change\nticket is an authorization signature.\n\n470\n00:21:18.790 --> 00:21:21.740\nIf your following Itel's methodology\nthe organization will have\n\n471\n00:21:21.740 --> 00:21:26.000\nwhat's called a change advisory board or\na CAB And the CAB is a group of people,\n\n472\n00:21:26.000 --> 00:21:27.620\nyou might even be on it, right?\n\n473\n00:21:27.620 --> 00:21:31.160\nThat reviews the change tickets and\napproves them or declines them.\n\n474\n00:21:31.160 --> 00:21:33.460\nIf you decline it,\nit might be because it's a bad change or\n\n475\n00:21:33.460 --> 00:21:34.690\nyou might just need more information.\n\n476\n00:21:34.690 --> 00:21:37.620\nBut if you approve it, it's green-lighted\nand you're gonna move forward and\n\n477\n00:21:37.620 --> 00:21:39.470\nthis is a change that's gonna happen.\n\n478\n00:21:39.470 --> 00:21:42.020\nA CAB, Change Advisory Board,\nhelps to ensure that\n\n479\n00:21:42.020 --> 00:21:46.320\nonly authorized changes happen and that\nthere's good documentation on the changes.\n\n480\n00:21:46.320 --> 00:21:49.020\nIt really improves the stability\nof your environment.\n\n481\n00:21:49.020 --> 00:21:50.050\n>> All right, very good.\n\n482\n00:21:50.050 --> 00:21:54.630\nWell Don, is there anything else\nwe need to know moving on here?\n\n483\n00:21:54.630 --> 00:21:56.120\nWe've got our changed documentation.\n\n484\n00:21:56.120 --> 00:21:58.520\nWe've got a whole bunch\nof verbose information.\n\n485\n00:21:58.520 --> 00:21:59.720\nWhat's next on our list?\n\n486\n00:21:59.720 --> 00:22:02.695\n>> All right, well, so\nwe've kind of trouble shot to\n\n487\n00:22:02.695 --> 00:22:07.285\nfind the source of our problem, we've come\nup with a solution and we've implemented\n\n488\n00:22:07.285 --> 00:22:10.135\na change ticket to get it approved so\nwe could put the solution in place, right?\n\n489\n00:22:10.135 --> 00:22:11.945\nSo we go and put the solution in place.\n\n490\n00:22:11.945 --> 00:22:16.495\nWe did plan and do and\nthat next part is check.\n\n491\n00:22:16.495 --> 00:22:19.045\nYou always verify your solution.\n\n492\n00:22:19.045 --> 00:22:20.925\nDid I actually fix the problem?\n\n493\n00:22:20.925 --> 00:22:21.895\nAnd here's the key thing.\n\n494\n00:22:21.895 --> 00:22:26.570\nA lot of people will implement a change\nAnd they're fixing a symptom and\n\n495\n00:22:26.570 --> 00:22:28.350\nnot the cause, right?\n\n496\n00:22:28.350 --> 00:22:33.450\nA great example of this,\nthis was on a server, not on a router,\n\n497\n00:22:33.450 --> 00:22:37.660\nwhere there was a gentleman where the\nserver was running on hard drive space.\n\n498\n00:22:37.660 --> 00:22:41.190\nAnd so they looked at it and they found\nwhere the anti-virus software was\n\n499\n00:22:41.190 --> 00:22:45.780\ngenerating log files, so many log files\nit was filling up the hard drive.\n\n500\n00:22:45.780 --> 00:22:47.260\nSo, what did he do?\n\n501\n00:22:47.260 --> 00:22:49.440\nHe wrote a script that\nwould run once an hour and\n\n502\n00:22:49.440 --> 00:22:51.510\ndelete the log files, problem solved.\n\n503\n00:22:51.510 --> 00:22:54.310\nNow the server's not on a hard drive\nspace run business, right now.\n\n504\n00:22:54.310 --> 00:22:55.670\nWhat did he do there?\n\n505\n00:22:55.670 --> 00:22:58.610\nHe fixed the symptom, the symptom was that\nwe were running on a hard drive space.\n\n506\n00:22:58.610 --> 00:23:01.170\nThe cause was, the server had a virus.\n\n507\n00:23:01.170 --> 00:23:04.010\nAnd so the antivirus software\nwas logging that information,\n\n508\n00:23:04.010 --> 00:23:05.480\nthat was generating log files.\n\n509\n00:23:05.480 --> 00:23:09.310\nSo he didn't really fix the cause,\nhe fixed the symptom.\n\n510\n00:23:09.310 --> 00:23:11.760\nAnd so\nthat's where we have to be really careful.\n\n511\n00:23:11.760 --> 00:23:13.305\nAnd when we check or we verify.\n\n512\n00:23:13.305 --> 00:23:14.635\nFire solution.\n\n513\n00:23:14.635 --> 00:23:15.915\nWe need to be able to spot that.\n\n514\n00:23:15.915 --> 00:23:20.305\nDid I actually fix what the cause was,\nor is this problem gonna continue on?\n\n515\n00:23:20.305 --> 00:23:23.445\nJust the fact that he had to schedule\nthat script to run, delete the files,\n\n516\n00:23:23.445 --> 00:23:26.385\nthat should have been his indicator\nthat he didn't fix the cause.\n\n517\n00:23:26.385 --> 00:23:31.235\nIf he had removed the virus, or rebuilt\nthe server really, if that had happened,\n\n518\n00:23:31.235 --> 00:23:33.485\nthen it wouldn't be running on a hardware\nspace, and you actually fixed the problem.\n\n519\n00:23:33.485 --> 00:23:35.480\nSo we always have to check and verify.\n\n520\n00:23:35.480 --> 00:23:38.430\nAnd verification needs to\ngo beyond the problem.\n\n521\n00:23:38.430 --> 00:23:40.400\nIf you just verify that you\njust fixed the problem,\n\n522\n00:23:40.400 --> 00:23:44.210\nyou might have fixed it by\nsacrificing some other functionality.\n\n523\n00:23:44.210 --> 00:23:44.830\nRight?\n\n524\n00:23:44.830 --> 00:23:46.920\nI have a web server that\nis getting attacked.\n\n525\n00:23:46.920 --> 00:23:48.850\nSo, how can I fix that?\n\n526\n00:23:48.850 --> 00:23:50.330\nI can unplug its network cord.\n\n527\n00:23:50.330 --> 00:23:53.390\nIt's not getting attacked anymore is it?\n\n528\n00:23:53.390 --> 00:23:55.490\nBut nobody can get to\nthe website anymore either.\n\n529\n00:23:55.490 --> 00:24:01.420\nSo sometimes a solution can break your\nnetwork and break your functionality.\n\n530\n00:24:01.420 --> 00:24:04.220\nSo we gotta make sure that we\nverify that we actually solved it.\n\n531\n00:24:04.220 --> 00:24:06.970\nThat we've removed the problem,\nthe cause of the problem, and\n\n532\n00:24:06.970 --> 00:24:10.040\nthat we still have our normal\nfunctionality when we're done.\n\n533\n00:24:10.040 --> 00:24:11.760\nIf you can't achieve that,\n\n534\n00:24:11.760 --> 00:24:16.100\nif fixing the problem requires\ndisabling some normal functionality.\n\n535\n00:24:16.100 --> 00:24:16.990\nYou gotta do a change to it,\n\n536\n00:24:16.990 --> 00:24:20.610\nyou gotta make sure that That everybody\nin the company is on board with that.\n\n537\n00:24:20.610 --> 00:24:22.680\nThe great example is the finger protocol.\n\n538\n00:24:22.680 --> 00:24:23.990\nDid you ever use Finger, Wes?\n\n539\n00:24:23.990 --> 00:24:24.920\n>> No, no, not at all.\n\n540\n00:24:24.920 --> 00:24:25.830\n>> I know we talked about it.\n\n541\n00:24:25.830 --> 00:24:29.750\nIf any of you guys did the CCNA Security\nshow, we talked about it in there.\n\n542\n00:24:29.750 --> 00:24:33.320\nIt was a great protocol because you\never send somebody an email, and\n\n543\n00:24:33.320 --> 00:24:35.810\nyou're like man, did they get my email,\nhave they read it?\n\n544\n00:24:35.810 --> 00:24:36.930\nI don't know.\n\n545\n00:24:36.930 --> 00:24:40.510\nYou could run Finger and\nthen specify their email address.\n\n546\n00:24:40.510 --> 00:24:43.670\nAnd it would reach up to their\nnail server and it would tell you\n\n547\n00:24:43.670 --> 00:24:47.010\nthe last time the person logged in,\nand if they had any unread email.\n\n548\n00:24:47.010 --> 00:24:50.820\nSo you could say, oh, I sent Wes an email,\nbut he hasn't logged in in two days, so\n\n549\n00:24:50.820 --> 00:24:51.460\nhe hasn't seen it yet.\n\n550\n00:24:51.460 --> 00:24:53.290\nWhich was kind of nice to see that.\n\n551\n00:24:53.290 --> 00:24:57.430\nWell, there was an exploit that could\nuse that to access somebody's mailbox.\n\n552\n00:24:57.430 --> 00:25:01.210\nAnd the exploit was so bad that there\nreally wasn't a good way to fix it and so\n\n553\n00:25:01.210 --> 00:25:02.320\nthey ended up abandoning the protocol.\n\n554\n00:25:02.320 --> 00:25:05.220\nThe solution was to disable the protocol.\n\n555\n00:25:05.220 --> 00:25:08.680\nSo your company had to make a decision,\ndo we rely on that protocol?\n\n556\n00:25:08.680 --> 00:25:10.960\nIf so we need to implement\nsomething else to replace it.\n\n557\n00:25:10.960 --> 00:25:13.840\nIf we don't rely on it It's time to\nbump it and get it out of there, right?\n\n558\n00:25:13.840 --> 00:25:16.940\nSo that's kind of the decision that has\nto be made and sometimes it happens.\n\n559\n00:25:16.940 --> 00:25:19.900\nBut when you verify that's\nthe key thing you need to do is\n\n560\n00:25:19.900 --> 00:25:23.390\nmake sure that your change\nactually solved the problem.\n\n561\n00:25:23.390 --> 00:25:25.450\nAnd that your your network is back up and\n\n562\n00:25:25.450 --> 00:25:27.940\noperational in the way that\nit was intended to do.\n\n563\n00:25:27.940 --> 00:25:29.770\n>> All right Don,\nlots of good information there.\n\n564\n00:25:29.770 --> 00:25:32.730\nDo you have anything else to add on this?\n\n565\n00:25:32.730 --> 00:25:33.980\n>> I think we've been pretty exhaustive.\n\n566\n00:25:33.980 --> 00:25:36.010\nI know it's not the most\nexciting of episodes cuz we were\n\n567\n00:25:36.010 --> 00:25:37.430\ntalking about fundamentals and theory.\n\n568\n00:25:37.430 --> 00:25:40.230\nWe will be deep diving into\nthe whole trouble shooting and\n\n569\n00:25:40.230 --> 00:25:41.920\nreally breaking some\nstuff a little bit later.\n\n570\n00:25:41.920 --> 00:25:44.670\nDefinitely stay tuned for those episodes\nbut this is a pretty good spot for\n\n571\n00:25:44.670 --> 00:25:45.340\nus to wrap this.\n\n572\n00:25:45.340 --> 00:25:49.370\n>> All right, well we've got plenty more\nepisodes coming up in troubleshooting and\n\n573\n00:25:49.370 --> 00:25:53.080\nmaintaining Cisco IP networks so\nstick around and come back for more.\n\n574\n00:25:53.080 --> 00:25:56.320\nBut until we see you I've been your host,\nWes Bryan.\n\n575\n00:25:56.320 --> 00:25:56.990\n>> And I'm Don Pezet.\n\n576\n00:25:56.990 --> 00:26:00.416\n>> And we'll see you next time.\n\n577\n00:26:00.416 --> 00:26:06.530\n>> [MUSIC]\n\n",
          "vimeoId": "145323733"
        }
      ],
      "title": "Network Principles"
    },
    {
      "episodes": [
        {
          "description": "In this episode, Don explains what to expect in the following episodes. Many of the episodes on ITProTV are produced in 30 minute blocks, however troubleshooting is doesn't always fit that format. The following Sets are broken down into more granular segments focusing on specific troubleshooting scenarios.",
          "length": "432",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-0-0-overview-112315-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-0-0-overview-112315-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-0-0-overview-112315-1-sm.jpg",
          "title": "Troubleshooting Overview",
          "transcript": "WEBVTT\n\n1\n00:00:00.026 --> 00:00:10.026\n[MUSIC]\n\n2\n00:00:12.309 --> 00:00:15.198\nAll right, good morning,\ngood afternoon and good evening and\n\n3\n00:00:15.198 --> 00:00:17.283\nwelcome back to another\nepisode of ITProTV.\n\n4\n00:00:17.283 --> 00:00:18.768\nI'm your host Don Pezet,\n\n5\n00:00:18.768 --> 00:00:22.920\nback again with another episode\nof Cisco CCNP troubleshooting.\n\n6\n00:00:22.920 --> 00:00:26.220\nAnd what I wanna do in this\nepisode is kind of set up what\n\n7\n00:00:26.220 --> 00:00:29.330\nwe're about to see in\nthe next set of episodes.\n\n8\n00:00:29.330 --> 00:00:33.020\nSo, in most of our shows, if you've been\nan ITProTV viewer for a while, you know\n\n9\n00:00:33.020 --> 00:00:36.710\nthat we normally take topics and we break\nthem up into these 30 minute episodes.\n\n10\n00:00:36.710 --> 00:00:39.080\nAnd it works great for\nlearning a lot of things.\n\n11\n00:00:39.080 --> 00:00:43.280\nBut with troubleshooting,\nnot every problem is the same.\n\n12\n00:00:43.280 --> 00:00:46.160\nSome troubleshooting problems\nonly take 5 minutes to solve,\n\n13\n00:00:46.160 --> 00:00:48.010\nsome take 45 minutes to solve.\n\n14\n00:00:48.010 --> 00:00:50.370\nSo, there's differing\nlevels of difficulty.\n\n15\n00:00:50.370 --> 00:00:53.353\nAnd so what we're gonna do is for\nthe next set of videos,\n\n16\n00:00:53.353 --> 00:00:56.300\nwe're gonna deviate from\nour normal ITProTV format.\n\n17\n00:00:56.300 --> 00:00:59.090\nWe're gonna take some network\ntopology that have problems, and\n\n18\n00:00:59.090 --> 00:01:01.760\nwe're gonna jump in and\nstart to resolve those problems.\n\n19\n00:01:01.760 --> 00:01:02.580\nWe'll get a chance to see that.\n\n20\n00:01:02.580 --> 00:01:05.000\nAnd if it takes ten minutes,\nit takes ten minutes.\n\n21\n00:01:05.000 --> 00:01:06.658\nIf it takes 45 minutes,\nit takes 45 minutes.\n\n22\n00:01:06.658 --> 00:01:10.259\nWe're just gonna see that process\nas we go through each one, and\n\n23\n00:01:10.259 --> 00:01:11.535\nwe resolve the issue.\n\n24\n00:01:11.535 --> 00:01:14.830\nNow, I had a really neat opportunity for\nthis show.\n\n25\n00:01:14.830 --> 00:01:18.322\nNormally we set up the labs, and\nby we, a lot of the times I mean me.\n\n26\n00:01:18.322 --> 00:01:22.380\nI'll build up routers just to suit\nthe needs for what I wanna teach you guys.\n\n27\n00:01:22.380 --> 00:01:25.660\nBut for this one, I thought it would\nbe fun to go a little different.\n\n28\n00:01:25.660 --> 00:01:28.850\nAnd what we've done is ITProTV's partnered\nwith another organization that can\n\n29\n00:01:28.850 --> 00:01:30.220\nprovide practice labs.\n\n30\n00:01:30.220 --> 00:01:32.400\nThey have rental equipment for\nCisco devices, and\n\n31\n00:01:32.400 --> 00:01:35.710\nthey built up some labs that\nhave a lot of problems.\n\n32\n00:01:35.710 --> 00:01:38.340\nThey built up nine different\nnetwork topologies,\n\n33\n00:01:38.340 --> 00:01:42.150\neach featuring different issues\nthat we need to go in and resolve.\n\n34\n00:01:42.150 --> 00:01:45.050\nAnd they've given me\nthe questions the support ticket.\n\n35\n00:01:45.050 --> 00:01:47.820\nSo I have the little piece of paper\nsitting right here right beside me that'll\n\n36\n00:01:47.820 --> 00:01:51.960\nsay something like, this server is\nunable to access this particular IP.\n\n37\n00:01:51.960 --> 00:01:54.160\nOr this router is not learning this route.\n\n38\n00:01:54.160 --> 00:01:59.152\nOr this other router is choosing\na suboptimal route, why?\n\n39\n00:01:59.152 --> 00:02:00.770\nAnd then we've gotta find out why.\n\n40\n00:02:00.770 --> 00:02:03.380\nWell, the answer to why is, I don't know.\n\n41\n00:02:03.380 --> 00:02:05.330\nI haven't actually seen\nthe solutions on these.\n\n42\n00:02:05.330 --> 00:02:08.086\nI'm seeing these questions for\nthe first time just like you guys are.\n\n43\n00:02:08.086 --> 00:02:11.242\nAnd so this will be a great chance\nto be able to see how we go through\n\n44\n00:02:11.242 --> 00:02:13.470\ntroubleshooting and finding that problem.\n\n45\n00:02:13.470 --> 00:02:15.927\nAnd we'll hope I don't\nstumped on any of them.\n\n46\n00:02:15.927 --> 00:02:17.182\nBecause it's certainly possible.\n\n47\n00:02:17.182 --> 00:02:20.975\nBut as we go through, we're gonna take\nall the tools that we learned about in\n\n48\n00:02:20.975 --> 00:02:24.990\nthe first couple of episodes, and\nwe're gonna start applying them.\n\n49\n00:02:24.990 --> 00:02:27.930\nAnd I'll walk you through\nthe process of how I decide\n\n50\n00:02:27.930 --> 00:02:29.860\nwhich tool to use when, right?\n\n51\n00:02:29.860 --> 00:02:31.535\nWhich one is suitable for which solution.\n\n52\n00:02:31.535 --> 00:02:34.458\nAnd I'll show you guys examples\nof time saving techniques,\n\n53\n00:02:34.458 --> 00:02:37.210\nways that you can get to\nthat information faster.\n\n54\n00:02:37.210 --> 00:02:38.700\nAnd that's really important.\n\n55\n00:02:38.700 --> 00:02:40.530\nFor the first set of labs,\nI'll take my time.\n\n56\n00:02:40.530 --> 00:02:41.330\nWe'll go nice and slow.\n\n57\n00:02:41.330 --> 00:02:44.540\nI'll walk you through the methodology,\nget you guys kind of used to that format.\n\n58\n00:02:44.540 --> 00:02:48.340\nBut as we move on into the later ones,\nI'll start speeding things up.\n\n59\n00:02:48.340 --> 00:02:50.000\nWe'll start using some\ntime saving techniques.\n\n60\n00:02:50.000 --> 00:02:50.920\nThat way we can dive in and\n\n61\n00:02:50.920 --> 00:02:54.880\nget the information, cuz on the exam\nyou don't have a ton of time.\n\n62\n00:02:54.880 --> 00:02:58.056\nBut even in real life, you don't normally\nhave a bunch of time there either.\n\n63\n00:02:58.056 --> 00:03:00.535\nWhen there's a problem on the network,\nyou've got your boss and\n\n64\n00:03:00.535 --> 00:03:01.992\ntheir boss breathing down your neck.\n\n65\n00:03:01.992 --> 00:03:04.315\nYou need to resolve that\nissue as quickly as possible.\n\n66\n00:03:04.315 --> 00:03:07.019\nBeing able to get to\nthe information quickly and\n\n67\n00:03:07.019 --> 00:03:09.800\naccurately is really an important skill.\n\n68\n00:03:09.800 --> 00:03:10.860\nAnd so that's they way that we'll do this.\n\n69\n00:03:10.860 --> 00:03:13.510\nWe'll just ramp up as things go on.\n\n70\n00:03:13.510 --> 00:03:15.720\nWe're gonna cover a lot of stuff.\n\n71\n00:03:15.720 --> 00:03:19.917\nWe've got HSRP issues, IPv6, IPv4.\n\n72\n00:03:19.917 --> 00:03:21.391\nWe've got VPN issues.\n\n73\n00:03:21.391 --> 00:03:23.858\nTons of different problems that\ncan occur on the network, and\n\n74\n00:03:23.858 --> 00:03:25.290\ntons of different causes for them.\n\n75\n00:03:25.290 --> 00:03:29.860\nSo we'll have to narrow that down,\nfind the solution and get it resolved.\n\n76\n00:03:29.860 --> 00:03:33.200\nNow the cool part about this is, the\norganization that we've partnered with on\n\n77\n00:03:33.200 --> 00:03:35.120\nthis, they provide\nthe online lab experience.\n\n78\n00:03:35.120 --> 00:03:38.350\nSo, if you wanna go through these\nyourself, you actually can.\n\n79\n00:03:38.350 --> 00:03:41.952\nWe have that option, or we will soon have\nthat [LAUGH] option available on the site.\n\n80\n00:03:41.952 --> 00:03:43.875\nWhere you'll be able to in and\njump into these labs and\n\n81\n00:03:43.875 --> 00:03:46.270\nactually go through the same\nprocedures on your own.\n\n82\n00:03:46.270 --> 00:03:50.120\nIn which case, you can use my videos\nas basically like a solution,\n\n83\n00:03:50.120 --> 00:03:54.040\na guide that shows you how to solve\nit if you can't solve it yourself.\n\n84\n00:03:54.040 --> 00:03:56.080\nBut if you can solve it yourself, great.\n\n85\n00:03:56.080 --> 00:03:57.937\nThat's how you know you're ready for\nthe exam.\n\n86\n00:03:57.937 --> 00:03:59.776\nSo it's kind of neat to be\nable to work through that.\n\n87\n00:03:59.776 --> 00:04:03.452\nSo, I'm gonna be using a web interface to\nconnect to all of these different devices.\n\n88\n00:04:03.452 --> 00:04:05.433\nAnd it'll let me move around through them.\n\n89\n00:04:05.433 --> 00:04:09.130\nAnd it's cool, because if you do\nparticipate in the same lab environment as\n\n90\n00:04:09.130 --> 00:04:11.920\nI do, you'll have the same router names,\nthe same IPs.\n\n91\n00:04:11.920 --> 00:04:13.238\nYou'll have the same experience and\n\n92\n00:04:13.238 --> 00:04:15.118\nenvironment that I'm using\nright here on the show.\n\n93\n00:04:15.118 --> 00:04:16.678\nSo it's a great opportunity.\n\n94\n00:04:16.678 --> 00:04:18.720\nAnd the topologies, boy they're complex.\n\n95\n00:04:18.720 --> 00:04:19.690\nLet me show you one.\n\n96\n00:04:19.690 --> 00:04:22.060\nI've got one of the topologies\npulled up here.\n\n97\n00:04:22.060 --> 00:04:26.604\nAnd so, you'll see on this network\nwe've got a nice mixture of OSPF, RIP,\n\n98\n00:04:26.604 --> 00:04:29.920\nEIGRP, two different\nautonomous systems there.\n\n99\n00:04:29.920 --> 00:04:32.355\nWe've got routers, we've got switches.\n\n100\n00:04:32.355 --> 00:04:35.518\nWe've got devices that we control,\nlike all of these.\n\n101\n00:04:35.518 --> 00:04:38.781\nAnd there's devices out here that\nare actually controlled, well,\n\n102\n00:04:38.781 --> 00:04:39.970\noutside of our company.\n\n103\n00:04:39.970 --> 00:04:41.360\nJust like in real-life land,\n\n104\n00:04:41.360 --> 00:04:44.470\nyou might have an Internet service\nprovider, and you see their routers,\n\n105\n00:04:44.470 --> 00:04:47.430\nyou communicate to their routers all the\ntime, but you have no control over them.\n\n106\n00:04:47.430 --> 00:04:49.880\nWell, that's how these\ntwo boxes are in the lab.\n\n107\n00:04:49.880 --> 00:04:51.710\nI have no control over these two, but\n\n108\n00:04:51.710 --> 00:04:56.090\nthe whole rest of the environment I do and\nI need to solve those problems.\n\n109\n00:04:56.090 --> 00:04:59.943\nSo, we're gonna break this up\ninto troubleshooting sets.\n\n110\n00:04:59.943 --> 00:05:04.999\nWhat we just saw was one set, and\nits' got six to eight problems.\n\n111\n00:05:04.999 --> 00:05:07.625\nAnd so we'll have to go through and\nresolve all those little problems.\n\n112\n00:05:07.625 --> 00:05:09.835\nAnd then we'll move onto the second set,\nwhich will have,\n\n113\n00:05:09.835 --> 00:05:12.535\nI don't know something like six\nto eight problems there too.\n\n114\n00:05:12.535 --> 00:05:14.545\nAnd then the next set,\nand then the next set.\n\n115\n00:05:14.545 --> 00:05:15.895\nThere's a good nine sets here.\n\n116\n00:05:15.895 --> 00:05:20.145\nThere's a lot of chances to see techniques\nfor troubleshooting different problems,\n\n117\n00:05:20.145 --> 00:05:21.125\ndifferent solutions.\n\n118\n00:05:21.125 --> 00:05:22.485\nSome really good stuff.\n\n119\n00:05:22.485 --> 00:05:23.770\nSo, I'm looking forward to this.\n\n120\n00:05:23.770 --> 00:05:27.365\nIt's always a lot of fun to go full on,\njust hands on troubleshooting and\n\n121\n00:05:27.365 --> 00:05:28.410\nisolating problems.\n\n122\n00:05:28.410 --> 00:05:29.790\nWe've seen all the tools.\n\n123\n00:05:29.790 --> 00:05:30.770\nWe've read all the theory.\n\n124\n00:05:30.770 --> 00:05:33.490\nWe know the different\ntechniques we can use.\n\n125\n00:05:33.490 --> 00:05:34.890\nLet's see them in real life.\n\n126\n00:05:34.890 --> 00:05:37.800\nBecause knowing the syntax for\na command, that's one thing.\n\n127\n00:05:37.800 --> 00:05:40.740\nSeeing the output of a command,\nthat's one thing.\n\n128\n00:05:40.740 --> 00:05:44.220\nBut seeing the output of a command\nunder different scenarios.\n\n129\n00:05:44.220 --> 00:05:46.830\nYou can start to learn the difference\nbetween when it's working right and\n\n130\n00:05:46.830 --> 00:05:47.730\nwhen it's not working right.\n\n131\n00:05:47.730 --> 00:05:50.418\nYou can start to recognize\nwhen something doesn't quite\n\n132\n00:05:50.418 --> 00:05:51.930\nfit the mold that it should fit.\n\n133\n00:05:51.930 --> 00:05:53.869\nAnd that's what we're\ngonna get a chance to see.\n\n134\n00:05:53.869 --> 00:05:56.367\nIt's gonna be a different\ntype of ITProTV episode.\n\n135\n00:05:56.367 --> 00:05:59.466\nBut it'll be neat, it'll be fun and\nit'll be a great experience.\n\n136\n00:05:59.466 --> 00:06:04.190\nThe other thing is that the episodes\naren't dependent on each other.\n\n137\n00:06:04.190 --> 00:06:06.452\nSo, if you wanna skip four or\nfive episodes and\n\n138\n00:06:06.452 --> 00:06:08.540\njump ahead to the next one, you can.\n\n139\n00:06:08.540 --> 00:06:11.850\nEach one is a self-contained,\ntroubleshooting problem.\n\n140\n00:06:11.850 --> 00:06:16.140\nSo if you you just wanna learn about\ntroubleshooting HSRP, you can search for\n\n141\n00:06:16.140 --> 00:06:19.660\nthe episodes that have the keyword\nof HSRP and just watch those.\n\n142\n00:06:19.660 --> 00:06:23.160\nAnd now you'll see five or\nsix episodes just on troubleshooting HSRP.\n\n143\n00:06:23.160 --> 00:06:27.560\nOr if you just wanna learn about IPv6,\nagain, you can filter based on that.\n\n144\n00:06:27.560 --> 00:06:30.230\nSo, feel free to jump around\non these if you want.\n\n145\n00:06:30.230 --> 00:06:32.763\nBut just as a quick warning,\nI'll take it nice and slow for\n\n146\n00:06:32.763 --> 00:06:35.661\nthe first couple of sets and\nthen we'll start to speed things up for\n\n147\n00:06:35.661 --> 00:06:37.954\nthe later sets because\nthat's where you need to be.\n\n148\n00:06:37.954 --> 00:06:41.449\nYou need to be speeding things up too,\nto find those resolutions as fast and\n\n149\n00:06:41.449 --> 00:06:42.620\nas quickly as possible.\n\n150\n00:06:42.620 --> 00:06:45.160\nSo, just keep that in mind\nas you work through these.\n\n151\n00:06:45.160 --> 00:06:48.000\nBut I think that's enough about\nwhat were gonna be doing.\n\n152\n00:06:48.000 --> 00:06:51.360\nI'm really excited to get in here, cuz I\nlove working with the equipment and not\n\n153\n00:06:51.360 --> 00:06:55.542\nboring you guys with pictures and slides\nof bullet points and all that stuff.\n\n154\n00:06:55.542 --> 00:06:57.938\nSo just getting in there and\nactually doing some work,\n\n155\n00:06:57.938 --> 00:06:59.146\nit's gonna be a lot of fun.\n\n156\n00:06:59.146 --> 00:07:01.404\nYou'll definitely wanna stay tuned for it.\n\n157\n00:07:01.404 --> 00:07:07.010\nFor now, signing off for ITProTV,\nI'm Don Pezet, and I'll see you next time.\n\n158\n00:07:07.010 --> 00:07:12.359\n[SOUND]\n\n",
          "vimeoId": "149153646"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #1` from set #1. The trouble ticket states that \"NYACCESS1 is unable to communicate to its configured gateway of 192.168.16.1.\"",
          "length": "1228",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-1-112515-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-1-112515-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-1-112515-1-sm.jpg",
          "title": "Set 1 Issue 1",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:08.025\n[MUSIC]\n\n2\n00:00:08.025 --> 00:00:12.001\nIn this video,\nwe're gonna be tackling Set 1, Issue 1.\n\n3\n00:00:12.001 --> 00:00:15.200\nJumping right into troubleshooting for\nCCMPT shoot, and the problem that\n\n4\n00:00:15.200 --> 00:00:18.810\nwe got today is what looks like\na fairly straightforward one, we've got\n\n5\n00:00:18.810 --> 00:00:22.020\nthe instance of a host that's unable\nto ping another host on the network.\n\n6\n00:00:22.020 --> 00:00:27.160\nSo the troubleshooting problem actually\nreads like this, it says NYACCESS1 is\n\n7\n00:00:27.160 --> 00:00:33.604\nunable to communicate to its configured\ndefault gateway of 192.168.16.1.\n\n8\n00:00:33.604 --> 00:00:37.200\nSo let's look at our topology and\nget an idea of what it's talking about.\n\n9\n00:00:37.200 --> 00:00:40.684\nWhat they are telling us here,\nis, that this guy right here,\n\n10\n00:00:40.684 --> 00:00:45.441\nthis switch NYACCESS1, is unable to\ncommunicate with it's default gateway, and\n\n11\n00:00:45.441 --> 00:00:49.670\nit's telling me that the default\ngateway is 192.168.16.1.\n\n12\n00:00:49.670 --> 00:00:54.651\nWell, when I look at this network map,\nI got a little bit of a problem here\n\n13\n00:00:54.651 --> 00:00:58.510\nin that I don't see who 192.168.16.1 is.\n\n14\n00:00:58.510 --> 00:01:00.989\nSo, one of the first things we're gonna\nhave to do is we're gonna have to figure\n\n15\n00:01:00.989 --> 00:01:02.270\nout that piece of the puzzle, right?\n\n16\n00:01:02.270 --> 00:01:06.050\nWho is it that we're talking to and\nthen why can't we get there?\n\n17\n00:01:06.050 --> 00:01:09.350\nNow, the only IP that I'm really seeing\njump out at me is this guy down here.\n\n18\n00:01:09.350 --> 00:01:14.050\nI've got a server, and\nthat server is 192.168.16.10,\n\n19\n00:01:14.050 --> 00:01:17.020\nso that's apparently on that 16 network.\n\n20\n00:01:17.020 --> 00:01:19.950\nI've got ACCESS1 is apparently\ngonna be on that network.\n\n21\n00:01:19.950 --> 00:01:21.600\nWe're gonna find out a little bit more,\nright?\n\n22\n00:01:21.600 --> 00:01:26.520\nSo the troubleshooting question didn't\ngive us a ton of data about the network.\n\n23\n00:01:26.520 --> 00:01:28.680\nWe're gonna have to do some exploration,\nright?\n\n24\n00:01:28.680 --> 00:01:29.940\nSo first off,\n\n25\n00:01:29.940 --> 00:01:35.690\nif I know that NYACCESS1 is supposed\nto be able to contact 192.168.16.1,\n\n26\n00:01:35.690 --> 00:01:39.350\nI'm assuming that it's going to have\nan IP address in that same network.\n\n27\n00:01:39.350 --> 00:01:40.240\nLet's not assume.\n\n28\n00:01:40.240 --> 00:01:41.751\nLet's find out for sure.\n\n29\n00:01:41.751 --> 00:01:46.329\nSo I'm gonna jump over to NYACCESS1,\nand on that switch,\n\n30\n00:01:46.329 --> 00:01:50.460\nwe're just gonna verify its IP or\nlack of IP, right?\n\n31\n00:01:50.460 --> 00:01:51.000\nWho knows?\n\n32\n00:01:51.000 --> 00:01:52.400\nMaybe it doesn't even have an IP address,\n\n33\n00:01:52.400 --> 00:01:53.780\nand we'll have to figure that out,\nall right?\n\n34\n00:01:53.780 --> 00:01:57.865\nSo I'm just gonna get in here and\njust do a quick show IP interface brief.\n\n35\n00:01:57.865 --> 00:02:02.740\nShow IP interface brief is a great way\nto find out what IPs a switch has, and\n\n36\n00:02:02.740 --> 00:02:03.900\nit usually shows us pretty quick.\n\n37\n00:02:03.900 --> 00:02:06.780\nBut a lot of times, I'll pipe\nthem into the exclude command and\n\n38\n00:02:06.780 --> 00:02:10.960\nexclude the word unassigned so\nI don't get all these extra interfaces.\n\n39\n00:02:10.960 --> 00:02:19.040\nBut as it stands, I can see that I got an\ninterface on Vlan16 that is 192.168.16.7.\n\n40\n00:02:19.040 --> 00:02:21.880\nSo we've got a Vlan and\n\n41\n00:02:21.880 --> 00:02:25.820\nwe've got an IP in the subnet in question\nthat's on that Vlan so that looks good.\n\n42\n00:02:25.820 --> 00:02:29.390\nNow remember I mentioned that there was\nanother server in the diagram, right?\n\n43\n00:02:29.390 --> 00:02:33.270\nIf I go back to my network diagram,\nthere's this server down here\n\n44\n00:02:33.270 --> 00:02:38.280\nwhich is plugged into FA0/1 on ACCESS1.\n\n45\n00:02:38.280 --> 00:02:41.870\nSo, I'm assuming that's on Vlan16 also.\n\n46\n00:02:41.870 --> 00:02:43.590\nIt should be, but I can check port one and\n\n47\n00:02:43.590 --> 00:02:45.830\nsee it's configuration\nreal quick to get an idea.\n\n48\n00:02:45.830 --> 00:02:50.357\nSo, if I jump back to that switch,\nI can just do a quick show run, for\n\n49\n00:02:50.357 --> 00:02:52.890\ninterface FA0/1.\n\n50\n00:02:52.890 --> 00:02:55.560\nAnd sure enough,\nswitchboard access Vlan16.\n\n51\n00:02:55.560 --> 00:03:01.536\nAll right, so it looks like\nthe 192.168.16 network is on Vlan16,\n\n52\n00:03:01.536 --> 00:03:04.760\nmy switch is .7, that server is .10.\n\n53\n00:03:04.760 --> 00:03:09.740\nI'm just going to try and ping that server\njust to see the Vlan is working, right?\n\n54\n00:03:09.740 --> 00:03:13.097\nMaybe there's some kind of Vlan issue,\nlike VTP might delete a Vlan and so it\n\n55\n00:03:13.097 --> 00:03:16.890\ncould break something there, and in which\ncase, I might not be able to communicate.\n\n56\n00:03:16.890 --> 00:03:20.600\nBut I can see this switch is able\nto talk on VLan16, just fine.\n\n57\n00:03:20.600 --> 00:03:24.756\nBut the problem was that I can't\ntalk to my default gateway,\n\n58\n00:03:24.756 --> 00:03:28.271\nwhich is apparently 192.168.16.1.\n\n59\n00:03:28.271 --> 00:03:31.851\nAnd if I try and ping that, well, sure\nenough, it's just gonna sit in there and\n\n60\n00:03:31.851 --> 00:03:32.980\nnothing's happening.\n\n61\n00:03:32.980 --> 00:03:35.680\nSo I definitely have some\nkind of issue going on here.\n\n62\n00:03:35.680 --> 00:03:38.562\nAnd that issue could be\na few different things.\n\n63\n00:03:38.562 --> 00:03:41.960\nIt ould be a problem with the VLAN,\ncould be a problem with that host,\n\n64\n00:03:41.960 --> 00:03:43.690\nI still don't know who .1 is, right?\n\n65\n00:03:43.690 --> 00:03:47.054\nThat could be a router,\na switch on the network somewhere, but\n\n66\n00:03:47.054 --> 00:03:49.221\nit's more than likely not this system.\n\n67\n00:03:49.221 --> 00:03:51.661\nNow this system,\nif I'm trying to get to that,\n\n68\n00:03:51.661 --> 00:03:53.920\nit said I had a default gateway set,\nright?\n\n69\n00:03:53.920 --> 00:03:57.539\nNow the troubleshooting question said I'm\nunable to communicate to the gateway,\n\n70\n00:03:57.539 --> 00:04:00.550\nit doesn't say anything about\nactually going through the gateway.\n\n71\n00:04:00.550 --> 00:04:06.830\nSo I might wanna check the running\nconfiguration and see if I have\n\n72\n00:04:06.830 --> 00:04:11.130\na default gateway actually defined, which\nI can see right here that I do, right?\n\n73\n00:04:11.130 --> 00:04:15.460\nSo I've got that ip default-gateway,\nand there's the IP.\n\n74\n00:04:15.460 --> 00:04:17.934\nBut they didn't actually ask me to\ncheck to see if they gave away worked,\n\n75\n00:04:17.934 --> 00:04:20.560\nthey just want to make sure\nI can communicate to it.\n\n76\n00:04:20.560 --> 00:04:23.180\nBut I do have that line,\nI just can't ping it.\n\n77\n00:04:23.180 --> 00:04:24.710\nI can't get to that IP.\n\n78\n00:04:24.710 --> 00:04:27.730\nSo my next step is gonna be\nfiguring out who the heck that is.\n\n79\n00:04:27.730 --> 00:04:32.340\nIt's not me, I'm .7, so it must be one\nof the other devices on my network.\n\n80\n00:04:32.340 --> 00:04:37.940\nNow normally when it comes to something\nlike a layer three address like this,\n\n81\n00:04:37.940 --> 00:04:40.450\nI'm gonna assume that it's gonna\nbe one of these three routers\n\n82\n00:04:40.450 --> 00:04:41.640\nhere in the LAN, right.\n\n83\n00:04:41.640 --> 00:04:44.400\nYour router is normally gonna\nbe your default gateway.\n\n84\n00:04:44.400 --> 00:04:47.330\nBut I've got these core switches also, and\n\n85\n00:04:47.330 --> 00:04:51.270\nremember in CISCO's recommended\ndesign model, your core, and\n\n86\n00:04:51.270 --> 00:04:54.900\nreally your distribution switches, are\nnormally going to be layer three switches.\n\n87\n00:04:54.900 --> 00:04:56.400\nSo they can be routers also.\n\n88\n00:04:56.400 --> 00:05:03.901\nSo I expect 192.168.16.1 to be\non one of these five devices.\n\n89\n00:05:03.901 --> 00:05:05.320\nI don't know which one.\n\n90\n00:05:05.320 --> 00:05:07.080\nSo to try and make this go faster,\n\n91\n00:05:07.080 --> 00:05:09.850\ncuz on the exam you don't have a ton of\ntime, what you usually wanna do is start\n\n92\n00:05:09.850 --> 00:05:12.490\nwith the devices closest to\nwho you're troubleshooting,\n\n93\n00:05:12.490 --> 00:05:15.850\nbecause usually the gateway is\ngonna be very close to those nodes.\n\n94\n00:05:15.850 --> 00:05:17.640\nSo I'm gonna check these\ntwo switches first.\n\n95\n00:05:17.640 --> 00:05:20.180\nIf it's not them,\nthen I'll check these two routers, and\n\n96\n00:05:20.180 --> 00:05:22.840\nif it's not them,\nI'll check this other router here last.\n\n97\n00:05:22.840 --> 00:05:24.810\nOkay, now how do I check?\n\n98\n00:05:24.810 --> 00:05:29.320\nJust a quick show IP Interface brief on\neach of the systems and we can spot it.\n\n99\n00:05:29.320 --> 00:05:37.490\nSo, I am gonna jump over here to CORE1 and\non CORE1 I will just take that switch.\n\n100\n00:05:37.490 --> 00:05:42.044\nSo here I am on CORE1 and I am gonna\ndo a quick show IP interface brief, and\n\n101\n00:05:42.044 --> 00:05:46.975\nI am going to exclude any unassigned\ninterfaces, so I just see interfaces that\n\n102\n00:05:46.975 --> 00:05:52.230\nhave IP addresses, and I can see on CORE1\nit looks like it's .2 for everything.\n\n103\n00:05:52.230 --> 00:05:54.184\nIt looks like it's dot 1 from\none that we've done here,\n\n104\n00:05:54.184 --> 00:05:55.372\nbut it's not the one I care about.\n\n105\n00:05:55.372 --> 00:06:01.770\nThe one that I care about is 192.168.16.2,\nand that's not .1, so I can move on.\n\n106\n00:06:01.770 --> 00:06:03.900\nNow, I do see that interface\nis administratively down,\n\n107\n00:06:03.900 --> 00:06:08.470\nbut again, the IP doesn't match, and since\nit doesn't match, I don't really care.\n\n108\n00:06:08.470 --> 00:06:10.550\nSo [LAUGH] I'll move on.\n\n109\n00:06:10.550 --> 00:06:12.240\nOn NYCORE2, I'll do the same thing.\n\n110\n00:06:12.240 --> 00:06:15.560\nAnd I'm gonna do another\nshow IP interface brief, and\n\n111\n00:06:15.560 --> 00:06:18.100\nI'll exclude any unassigned addresses.\n\n112\n00:06:18.100 --> 00:06:21.090\nAnd on this one it looks\nlike it's .3 on everything.\n\n113\n00:06:21.090 --> 00:06:23.680\nSo we found .2, we found .3,\nwe've still not .1.\n\n114\n00:06:23.680 --> 00:06:26.170\nSo, now I'm gonna start\nchecking those routers.\n\n115\n00:06:26.170 --> 00:06:28.940\nAnd I had three different routers\nthat were on the network.\n\n116\n00:06:28.940 --> 00:06:32.250\nThere were NYEDGE1 and EDGE2 and NYWAN1.\n\n117\n00:06:32.250 --> 00:06:36.000\nI'm gonna start with the EDGE routers and\njump over to those guys.\n\n118\n00:06:36.000 --> 00:06:37.860\nAnd just kinda rinse and repeat, right?\n\n119\n00:06:37.860 --> 00:06:43.570\nI'm just doing a quick show ip int\nbrief and excluding the unassigned.\n\n120\n00:06:43.570 --> 00:06:45.840\nOn a router I probably don't\nneed to exclude the unassign.\n\n121\n00:06:45.840 --> 00:06:48.020\nThey're usually not gonna\nhave that many interfaces.\n\n122\n00:06:48.020 --> 00:06:50.810\nThis guy is .4 not .1.\n\n123\n00:06:50.810 --> 00:06:58.130\nAnd EDGE2 is, let's see, .5, not .1.\n\n124\n00:06:58.130 --> 00:07:00.740\nWell actually, it doesn't have\na 192.168.16 address at all.\n\n125\n00:07:00.740 --> 00:07:02.200\nSo I just ignore EDGE2.\n\n126\n00:07:02.200 --> 00:07:04.340\nAnd then, we've only got one more,\n\n127\n00:07:04.340 --> 00:07:09.130\nso I think this one's gonna be our winner,\nand this is NYWAN1.\n\n128\n00:07:11.670 --> 00:07:15.160\nAnd oh, that almost got me there.\n\n129\n00:07:15.160 --> 00:07:16.560\nI thought we had a winner.\n\n130\n00:07:16.560 --> 00:07:19.200\nI see 172.16.16.1.\n\n131\n00:07:19.200 --> 00:07:21.380\nIt's got the 16, but\nthe rest of it's wrong.\n\n132\n00:07:21.380 --> 00:07:27.400\nIt doesn't have 192.168.16.1.\nSo now I got a head scratcher, right?\n\n133\n00:07:27.400 --> 00:07:28.460\nI know that this switch,\n\n134\n00:07:28.460 --> 00:07:34.350\nNYACCESS1 is supposed to have\na default gateway of 192.168.16.1.\n\n135\n00:07:34.350 --> 00:07:37.750\nBut nobody has that IP,\nwhose it supposed to be?\n\n136\n00:07:37.750 --> 00:07:40.910\nWell, when I ran through each of\nthese devices, I ran a command,\n\n137\n00:07:40.910 --> 00:07:43.700\nshow IP interface brief, right, and\n\n138\n00:07:43.700 --> 00:07:47.530\nthat will show you the IP addresses\nassigned to all of your interfaces.\n\n139\n00:07:47.530 --> 00:07:51.480\nBut there are sometimes where\nyou can have an IP address, and\n\n140\n00:07:51.480 --> 00:07:53.480\nit won't show up with that command.\n\n141\n00:07:53.480 --> 00:07:55.430\nFor example, a secondary address.\n\n142\n00:07:55.430 --> 00:07:58.649\nAn interface can have more than one IP,\nand if I have a secondary attached to it,\n\n143\n00:07:58.649 --> 00:07:59.768\nit won't show up, right?\n\n144\n00:07:59.768 --> 00:08:03.949\nLet me give you an example here, just so\nyou know what I'm talking about.\n\n145\n00:08:03.949 --> 00:08:07.179\nIf I go, I'll go back to ACCESS1.\n\n146\n00:08:07.179 --> 00:08:11.072\nAnd on ACCESS1,\nlet's say I create a loopback.\n\n147\n00:08:11.072 --> 00:08:13.733\nSo I'm gonna create interface loopback 99.\n\n148\n00:08:13.733 --> 00:08:22.210\nAnd I'm gonna get an IP\naddress of 192.168.99.2.\n\n149\n00:08:22.210 --> 00:08:26.710\nAll right, and so that's the IP address\nthat's gonna be on that interface.\n\n150\n00:08:26.710 --> 00:08:31.710\nNow when I assign that IP, I can do a show\nIP interface brief, and I can exclude\n\n151\n00:08:31.710 --> 00:08:36.080\nthe unassigned interfaces and I'll see\nLoopback99 and there's it's IP right?\n\n152\n00:08:37.240 --> 00:08:41.614\nNow if I do a secondary address,\n\n153\n00:08:41.614 --> 00:08:50.691\nif I say IP address 192.168.99.1\nwith a subnet mask.\n\n154\n00:08:50.691 --> 00:08:51.482\nWhoops!\n\n155\n00:08:51.482 --> 00:08:55.026\nAnd I need to do dotted decimal\nnot slashed decimal and\n\n156\n00:08:55.026 --> 00:08:58.274\nthen I'm just gonna add\nthe key word secondary.\n\n157\n00:08:58.274 --> 00:09:00.712\nOkay, when I add that keyword secondary,\n\n158\n00:09:00.712 --> 00:09:03.740\nthe interface now has two IP addresses,\nright?\n\n159\n00:09:03.740 --> 00:09:07.710\nSo if I do a show run for\ninterface loopback 99,\n\n160\n00:09:07.710 --> 00:09:10.780\nI can see it's got .1 and it's got .2.\n\n161\n00:09:10.780 --> 00:09:12.710\nSo it's got two addresses.\n\n162\n00:09:12.710 --> 00:09:15.020\nBut when I do a show\nIP interface brief and\n\n163\n00:09:15.020 --> 00:09:18.460\nI exclude any unassigned,\nsee how I don't see .1?\n\n164\n00:09:18.460 --> 00:09:20.570\nSo there's times were we can have\nan IP address that doesn't show\n\n165\n00:09:20.570 --> 00:09:23.490\nup on the interface and that's\nprobably what's going on here, okay.\n\n166\n00:09:23.490 --> 00:09:26.710\nSomebody has to have that dot one if\nit's gonna be our default gateway,\n\n167\n00:09:26.710 --> 00:09:28.120\nI just didn't find it.\n\n168\n00:09:28.120 --> 00:09:30.810\nSo I needed to do a better job looking for\nit.\n\n169\n00:09:30.810 --> 00:09:33.200\nAnd so, instead of doing\na show IP interface brief,\n\n170\n00:09:33.200 --> 00:09:35.460\nI can do a show running config.\n\n171\n00:09:35.460 --> 00:09:41.330\nAnd I could just do something like this,\nshow running dash config and\n\n172\n00:09:41.330 --> 00:09:45.794\ninclude lines with 192.168.16.1, right?\n\n173\n00:09:45.794 --> 00:09:47.800\nIs that in here anywhere?\n\n174\n00:09:47.800 --> 00:09:50.750\nAnd I can see that I've got my default\ngateway on this switch but that's it.\n\n175\n00:09:50.750 --> 00:09:53.890\nBut I can run through and\ndo that on my other switches.\n\n176\n00:09:53.890 --> 00:09:56.410\nAnd hopefully find out which one has that.\n\n177\n00:09:56.410 --> 00:09:58.565\nSo I'm just gonna do a quick\nshow running config and\n\n178\n00:09:58.565 --> 00:10:02.580\ninclude lines with 192.168.16.1.\n\n179\n00:10:02.580 --> 00:10:04.800\nAnd we will, oop, there we go.\n\n180\n00:10:04.800 --> 00:10:07.000\nAll right, I mentioned a secondary IP.\n\n181\n00:10:07.000 --> 00:10:10.910\nHere's another example of where an IP\naddress might not show up on an interface.\n\n182\n00:10:10.910 --> 00:10:11.942\nIt's a standby.\n\n183\n00:10:11.942 --> 00:10:13.580\nAll right, what is standby?\n\n184\n00:10:13.580 --> 00:10:14.910\nHSRP.\n\n185\n00:10:14.910 --> 00:10:19.441\nThis switch, I know it has 192.168.16.2.\n\n186\n00:10:19.441 --> 00:10:20.816\nWe saw that earlier.\n\n187\n00:10:20.816 --> 00:10:25.899\nBut, it's also got .1\nas an HSRP virtual IP.\n\n188\n00:10:25.899 --> 00:10:28.121\nThis is a virtual IP so,\nit might be on this switch,\n\n189\n00:10:28.121 --> 00:10:31.485\nit might be on another router, it might\nbe on another system somewhere else,\n\n190\n00:10:31.485 --> 00:10:34.040\nthis one may or may not be active for it.\n\n191\n00:10:34.040 --> 00:10:40.031\nSo, let's find out if it's active, so\nI'm gonna do a show standby for vlan 16.\n\n192\n00:10:42.540 --> 00:10:43.980\nSure enough, I can see we're active.\n\n193\n00:10:43.980 --> 00:10:49.910\nOkay, so this guy is active for Vlan16 and\n\n194\n00:10:49.910 --> 00:10:53.720\nI can see that virtual IP is 192.168.16.1\nand here is the virtual MAC address for\n\n195\n00:10:53.720 --> 00:10:58.470\nit right there, so\nthis guy is the active one.\n\n196\n00:10:58.470 --> 00:11:02.340\nAnd I'm gonna write down that MAC address\nbecause we're probably gonna need that.\n\n197\n00:11:02.340 --> 00:11:05.840\nWith HSRP,\nit dynamically generates the MAC address.\n\n198\n00:11:05.840 --> 00:11:07.555\nSo it's gonna generate this for us and so\n\n199\n00:11:07.555 --> 00:11:09.482\nyou can't always assume\nyou know what it is.\n\n200\n00:11:09.482 --> 00:11:12.983\nAnd so I'm gonna write this one down in\ncase we need to do any tracking based on\n\n201\n00:11:12.983 --> 00:11:13.816\nthe MAC address.\n\n202\n00:11:13.816 --> 00:11:17.823\nSo I'm just writing it down right here on\nmy piece of paper, handy-dandy paper, and\n\n203\n00:11:17.823 --> 00:11:21.290\nremember on the exam, you will have\na piece of paper that you can write on.\n\n204\n00:11:21.290 --> 00:11:24.580\nIf they don't give you one, you can ask\nfor it and they will, and it's handy for\n\n205\n00:11:24.580 --> 00:11:26.010\njotting down things like this MAC address.\n\n206\n00:11:26.010 --> 00:11:29.890\nSo I need that, so\nI've got it and there's my IP.\n\n207\n00:11:29.890 --> 00:11:33.590\nSo I just found 192.168.16.1.\n\n208\n00:11:33.590 --> 00:11:39.070\nAnd if I go back to my diagram,\nthat was right here on NYCORE1.\n\n209\n00:11:39.070 --> 00:11:42.370\nSo when they tell me that\nNYACCESS1 can't ping its gateway,\n\n210\n00:11:42.370 --> 00:11:44.220\nits gateway is right here.\n\n211\n00:11:44.220 --> 00:11:45.790\nThat's not very far away.\n\n212\n00:11:45.790 --> 00:11:49.090\nWell, I've got this link right here.\n\n213\n00:11:49.090 --> 00:11:53.470\nThis link needs to be carrying VLAN16\nin order for me to reach over and\n\n214\n00:11:53.470 --> 00:11:56.760\nget to that other side, so\nif there's a problem with this link\n\n215\n00:11:56.760 --> 00:11:58.620\nthen that may explain why\nI can't get to that host.\n\n216\n00:11:58.620 --> 00:12:00.610\nSo I need to figure that out, all right.\n\n217\n00:12:00.610 --> 00:12:02.840\nSo let's go and\ndo some experimenting there and\n\n218\n00:12:02.840 --> 00:12:04.000\nsee if we can't isolate this problem.\n\n219\n00:12:04.000 --> 00:12:07.670\nSo I'm gonna jump over to NYACCESS1 and\nsee what I can find.\n\n220\n00:12:07.670 --> 00:12:15.375\nSo on NYACCESS1, I know that I've got\nan IP address on the 192.168.16 network.\n\n221\n00:12:15.375 --> 00:12:18.420\nAnd I know I can ping that server so\nI know I'm functional.\n\n222\n00:12:18.420 --> 00:12:21.080\nI just don't know if I can\nget to the other side, right.\n\n223\n00:12:21.080 --> 00:12:24.740\nAnd on my side that trunk\nis right here on port 24.\n\n224\n00:12:24.740 --> 00:12:31.670\nSo I'm just gonna do a quick show run\ninterface fa0/24 And take a look at it.\n\n225\n00:12:31.670 --> 00:12:33.318\nAnd I've got a trunk configured.\n\n226\n00:12:33.318 --> 00:12:37.100\nSo it says switch port mode trunk,\nand the trunk is allowing VLAN 16,\n\n227\n00:12:37.100 --> 00:12:40.750\nso right off the bat,\nthings are looking good there.\n\n228\n00:12:40.750 --> 00:12:43.310\nI'm definitely carrying the VLAN,\nI'm definitely trunking.\n\n229\n00:12:43.310 --> 00:12:49.690\nAnd if I do a show interface trunk,\nI should be able to see, on port 24.\n\n230\n00:12:49.690 --> 00:12:54.710\nThere's VLAN 16, it's allowed and active,\nand it's forwarding and not pruned.\n\n231\n00:12:55.840 --> 00:12:58.410\nIt should be good to go,\non this side, right?\n\n232\n00:12:58.410 --> 00:13:01.820\nLet's go check the other side of this\ntrunk and see if it's actually working.\n\n233\n00:13:01.820 --> 00:13:06.730\nNow the other side of the trunk\nis port 22 on NYCORE1,\n\n234\n00:13:06.730 --> 00:13:08.960\nso I'm going to jump over to NYCORE1.\n\n235\n00:13:10.880 --> 00:13:14.390\nAnd we're gonna take a look at\nthe other end of this trunk.\n\n236\n00:13:14.390 --> 00:13:16.399\nAnd I said that was port 22.\n\n237\n00:13:16.399 --> 00:13:21.649\nSo I'm gonna do a show run int fa1/0/22.\n\n238\n00:13:21.649 --> 00:13:26.060\nAnd well,\nI'm not configured as a trunk here, right?\n\n239\n00:13:26.060 --> 00:13:28.630\nI don't see a trunk encapsulation set.\n\n240\n00:13:28.630 --> 00:13:34.050\nI don't see any allowed VLANs, but\nI might be doing dynamic trunking right?\n\n241\n00:13:34.050 --> 00:13:37.570\nSome Cisco switches default to\ndoing dynamic trunking, some don't.\n\n242\n00:13:37.570 --> 00:13:40.742\nEven within the same model of\nswitch some versions of the iOS do,\n\n243\n00:13:40.742 --> 00:13:42.398\nsome versions of the iOS don't.\n\n244\n00:13:42.398 --> 00:13:45.404\nSo just because I don't see trunking\ncommands here doesn't mean that I'm\n\n245\n00:13:45.404 --> 00:13:46.390\nnot trunking.\n\n246\n00:13:46.390 --> 00:13:48.170\nI might be doing it dynamically right.\n\n247\n00:13:48.170 --> 00:13:51.070\nYou can find that out real fast\nby doing a show interface trunk,\n\n248\n00:13:51.070 --> 00:13:53.090\nbecause it will tell you in there, right?\n\n249\n00:13:53.090 --> 00:13:56.080\nWhen I look at show interface trunk,\nhere's Fa1/0/22 and\n\n250\n00:13:56.080 --> 00:13:59.780\nsee how the mode is auto, right?\n\n251\n00:13:59.780 --> 00:14:01.060\nIt's doing dynamic trunking.\n\n252\n00:14:01.060 --> 00:14:04.450\nAnd I can see that it negotiated 802.1q.\n\n253\n00:14:04.450 --> 00:14:05.903\nSo, it is negotiating, it is trunking,\n\n254\n00:14:05.903 --> 00:14:07.857\neven though I don't see\nthe commands on the interface.\n\n255\n00:14:07.857 --> 00:14:12.969\nAnd looking down here, at port 22,\nit's allowing Vlans 1-4094.\n\n256\n00:14:14.060 --> 00:14:16.800\nVLANs that are active, 1 and 10-16.\n\n257\n00:14:16.800 --> 00:14:21.274\nAnd then down here VLANs in\nspanning tree forwarding state and\n\n258\n00:14:21.274 --> 00:14:24.815\nnot pruned 1 and 10-15, 16 is missing.\n\n259\n00:14:24.815 --> 00:14:26.191\nI think we just found the problem.\n\n260\n00:14:26.191 --> 00:14:26.774\nAll right?\n\n261\n00:14:26.774 --> 00:14:29.110\nNow, what does that mean?\n\n262\n00:14:29.110 --> 00:14:32.870\nIt's telling me here VLANs in spanning\ntree forwarding state, right?\n\n263\n00:14:32.870 --> 00:14:34.020\nAnd not pruned.\n\n264\n00:14:34.020 --> 00:14:37.140\nWhen would spanning tree prune a VLAN?\n\n265\n00:14:37.140 --> 00:14:37.690\nIf there was a loop.\n\n266\n00:14:37.690 --> 00:14:41.080\nIf there was a loop on this interface\nthen it might shut if off, right?\n\n267\n00:14:41.080 --> 00:14:47.196\nAnd if I do a show spanning-tree vlan 16,\nlet's see what we'll get here.\n\n268\n00:14:47.196 --> 00:14:52.566\nSure enough, for\nFa1/0/22 is blocking, right.\n\n269\n00:14:52.566 --> 00:14:57.578\nIt's in a BKN right blocking state and if\nI look all the way over to this side here,\n\n270\n00:14:57.578 --> 00:15:01.857\nI can see where it says ROOT_Inc\nwhich means, root inconsistent and\n\n271\n00:15:01.857 --> 00:15:06.670\nwhat is that, root guard, looks like\nwe're running root guard, right.\n\n272\n00:15:06.670 --> 00:15:10.060\nAnd we saw that on the interface, right\nwhen I do the show running config for\n\n273\n00:15:10.060 --> 00:15:13.600\ninterface fa1/0/22.\n\n274\n00:15:13.600 --> 00:15:15.840\nSpanning tree guard root.\n\n275\n00:15:15.840 --> 00:15:20.400\nSo we will not let the switch on the other\nend of this line become the root.\n\n276\n00:15:20.400 --> 00:15:23.660\nAnd if I go back to my diagram the switch\non the other end of the line ACCESS1.\n\n277\n00:15:23.660 --> 00:15:27.760\nSo if ACCESS1 is trying to become\nthe root I'm gonna block it and\n\n278\n00:15:27.760 --> 00:15:29.310\nthat's gonna cut it off from VLAN 16.\n\n279\n00:15:29.310 --> 00:15:33.735\nNow that's not the end of the world\nbecause ACCESS1 might be able to go\n\n280\n00:15:33.735 --> 00:15:36.441\nthis other way to get to VLAN 16, right?\n\n281\n00:15:36.441 --> 00:15:39.573\nI know it's not cuz the ping fails but\nit could,\n\n282\n00:15:39.573 --> 00:15:42.400\nso do I have root guard over here also?\n\n283\n00:15:42.400 --> 00:15:43.200\nI probably do.\n\n284\n00:15:43.200 --> 00:15:46.060\nI'm gonna go take a look at port 22\non the other switch just to see if we\n\n285\n00:15:46.060 --> 00:15:47.940\nhave root guard there also.\n\n286\n00:15:47.940 --> 00:15:50.620\nAnd what this is gonna do is\nit's gonna help me decide\n\n287\n00:15:50.620 --> 00:15:54.620\ndo I want to disable root guard or do I\nwant to influence who the root is right?\n\n288\n00:15:54.620 --> 00:15:58.100\nWe've got to figure out which\nsolution we're gonna pick, and so\n\n289\n00:15:58.100 --> 00:16:01.148\nI'm gonna look at this guy and\nit's got root guard also.\n\n290\n00:16:01.148 --> 00:16:06.155\nSo whoever set up this network obviously\nintended the core switches to be root,\n\n291\n00:16:06.155 --> 00:16:06.688\nright?\n\n292\n00:16:06.688 --> 00:16:11.448\nThey wanted one of these course which is\nto be root and not some access switch.\n\n293\n00:16:11.448 --> 00:16:14.912\nAnd in my scenario, the access switch\nis trying to become the root, and\n\n294\n00:16:14.912 --> 00:16:17.530\nso it's blocking that port and\nthat's stopping it.\n\n295\n00:16:17.530 --> 00:16:18.400\nThat's going to be our problem.\n\n296\n00:16:18.400 --> 00:16:21.480\nNow, why is ACCESS1 trying\nto become the root?\n\n297\n00:16:21.480 --> 00:16:23.180\nIt might not be intentional.\n\n298\n00:16:23.180 --> 00:16:26.160\nACCESS1 might have a lower MAC address.\n\n299\n00:16:26.160 --> 00:16:29.227\nNow, when it comes to root election\npriorities, what we really care about,\n\n300\n00:16:29.227 --> 00:16:32.122\nright, it is a priority number and\nthat's the one that really matters.\n\n301\n00:16:32.122 --> 00:16:36.406\nBut every Cisco switched\ndefaults to 32,768.\n\n302\n00:16:36.406 --> 00:16:40.274\nIf these are the defaults we have tie,\nand it could be that access one just has\n\n303\n00:16:40.274 --> 00:16:43.980\na lower mac address and\nit's winning the tiebreaker.\n\n304\n00:16:43.980 --> 00:16:46.310\nAnd if that's the case,\nthis could be an innocent mistake.\n\n305\n00:16:46.310 --> 00:16:49.300\nAll we have to do is adjust priority\nto make sure that this guy doesn't\n\n306\n00:16:49.300 --> 00:16:49.859\nwin the election.\n\n307\n00:16:50.990 --> 00:16:54.550\nOr it could be that somebody manually\nset it to WAN, right, someone\n\n308\n00:16:54.550 --> 00:16:58.520\ncould have manually set that priority, and\nif that's the case, then that's going to\n\n309\n00:16:58.520 --> 00:17:01.550\nbe our problem, and we just need to fix\nthat, and that will solve our problem too.\n\n310\n00:17:01.550 --> 00:17:04.920\nAlright, so let's go look at Access One\nand see what is the true case here.\n\n311\n00:17:04.920 --> 00:17:09.377\nSo, on Access One,\nI'm just going to search the config, and\n\n312\n00:17:09.377 --> 00:17:14.040\nI'm going to look for\nany command with spanning tree in it.\n\n313\n00:17:14.040 --> 00:17:16.200\nAll right and I'm looking to see\nif somebody set the priority and\n\n314\n00:17:16.200 --> 00:17:17.363\nsure enough they have right here.\n\n315\n00:17:17.363 --> 00:17:22.809\nI've got spanning tree\nvlan 16 priority 4096.\n\n316\n00:17:22.809 --> 00:17:25.510\nOkay, that's a really low priority and\n\n317\n00:17:25.510 --> 00:17:29.420\nthe lower number wins in\nthe spanning tree election.\n\n318\n00:17:29.420 --> 00:17:33.850\nSo this guy's trying to become the root,\nthe other guys are blocking it and\n\n319\n00:17:33.850 --> 00:17:34.870\nnot allowing it.\n\n320\n00:17:34.870 --> 00:17:38.610\nNow I could just remove this and\nput it back to the default, right?\n\n321\n00:17:38.610 --> 00:17:40.900\nBut I don't know what the priority\nis on the other switches, so\n\n322\n00:17:40.900 --> 00:17:42.570\nI don't necessarily know if\nthat affects the problem.\n\n323\n00:17:42.570 --> 00:17:44.385\nI'm going to go checkout\ntheir priorities real quick.\n\n324\n00:17:44.385 --> 00:17:48.970\nOn NY Core one, I'm just going to do\na shows spinning dash three for vlan 16,\n\n325\n00:17:48.970 --> 00:17:52.220\nI'm being really particular\nhere in saying vlan 16.\n\n326\n00:17:52.220 --> 00:17:55.033\nBecause you can have different\npriorities for different vlans.\n\n327\n00:17:55.033 --> 00:18:01.048\nAnd on this one,\nit's got a priority of 12288, right.\n\n328\n00:18:01.048 --> 00:18:03.470\nSo good to know.\n\n329\n00:18:03.470 --> 00:18:06.250\nAnd then if I take a look\nat the other core switch,\n\n330\n00:18:06.250 --> 00:18:11.380\ncore two, and\nlook at its spanning tree for VLAN16.\n\n331\n00:18:11.380 --> 00:18:16.345\nIt has a priority of 8,192, all right.\n\n332\n00:18:16.345 --> 00:18:20.670\nSo on NY axis one, if I just give\nit a priority higher than 12,188,\n\n333\n00:18:20.670 --> 00:18:24.500\nthen that will solve my problem,\nresetting it to the default.\n\n334\n00:18:24.500 --> 00:18:25.780\nSo we'll do that.\nSo that's what I'm going to do.\n\n335\n00:18:25.780 --> 00:18:27.765\nI'm going to jump over to access one, and\n\n336\n00:18:27.765 --> 00:18:30.840\non access one I'm just going\nto kill this priority line.\n\n337\n00:18:30.840 --> 00:18:34.830\nSo you can just copy and paste it or\nretype it however you want to do it.\n\n338\n00:18:34.830 --> 00:18:36.590\nYou don't have to remember the default.\n\n339\n00:18:36.590 --> 00:18:39.940\nIf you just do a no command for\nthe command that's already in there\n\n340\n00:18:41.830 --> 00:18:45.770\nlike this, that'll remove the command and\nput it back to the defaults.\n\n341\n00:18:45.770 --> 00:18:49.250\nI could have also said spanning\ndash tree vlan 16 priority 32,768,\n\n342\n00:18:49.250 --> 00:18:52.720\nthat would have achieved it also, right?\n\n343\n00:18:52.720 --> 00:18:57.180\nBut in this case it removes it, I should\nbe going back to my default priority.\n\n344\n00:18:57.180 --> 00:19:02.429\nAnd when I do that,\nassuming I can spell here, there we go.\n\n345\n00:19:02.429 --> 00:19:06.805\nThen I should be back to 32,768.\n\n346\n00:19:06.805 --> 00:19:10.634\nAnd now we should start communicating with\nthe other side and we should get some new\n\n347\n00:19:10.634 --> 00:19:13.950\nnegotiations happening and\nsome ports should start to come up.\n\n348\n00:19:13.950 --> 00:19:16.130\nPorts that were blocking\nshould be fine now.\n\n349\n00:19:16.130 --> 00:19:19.130\nNow, technically,\nroot guard was blocking that port.\n\n350\n00:19:19.130 --> 00:19:21.370\nWe need to verify that\nit stopped blocking it.\n\n351\n00:19:21.370 --> 00:19:23.830\nWe might have to reset the port for\nthat to happen.\n\n352\n00:19:23.830 --> 00:19:26.100\nBut oh, oh, I got a message right here.\n\n353\n00:19:26.100 --> 00:19:28.860\nIt's actually telling\nme root guard unblock.\n\n354\n00:19:28.860 --> 00:19:32.837\nRoot guard is unblocking port\nFastEthernet1/0/22 on VLAN0016, so\n\n355\n00:19:32.837 --> 00:19:33.916\nI should be covered.\n\n356\n00:19:33.916 --> 00:19:39.418\nIf we jump back out to NYAccess1,\nwe can test our ping that failed earlier.\n\n357\n00:19:39.418 --> 00:19:45.690\nI'm going to see if I can ping\n192.168.16.1, and we can.\n\n358\n00:19:45.690 --> 00:19:49.430\nAll right looks like our problem is solved\nand I wrote that Mac address down earlier,\n\n359\n00:19:49.430 --> 00:19:52.560\nended up not using it, so\nthat worked out really well.\n\n360\n00:19:52.560 --> 00:19:56.250\nSo you might remember I wrote down that\nMac address for the hsrp cluster earlier.\n\n361\n00:19:56.250 --> 00:19:57.820\nEnded up not needing that right?\n\n362\n00:19:57.820 --> 00:20:00.590\nIt is useful though in the event\nthat I did have to find\n\n363\n00:20:00.590 --> 00:20:03.570\nthe path that I was following across the\nnetwork to see where I had a stoppage or\n\n364\n00:20:03.570 --> 00:20:05.780\nwhatever I could have used\nthat bit neater this time.\n\n365\n00:20:05.780 --> 00:20:07.480\nBetter to have more\ninformation than not enough.\n\n366\n00:20:07.480 --> 00:20:09.160\nYou never know what you're going to need.\n\n367\n00:20:09.160 --> 00:20:12.340\nBut in this case, it turned out\nto be a root bridge election.\n\n368\n00:20:12.340 --> 00:20:13.450\nWe solved that problem.\n\n369\n00:20:13.450 --> 00:20:14.440\nNow the network's up and going.\n\n370\n00:20:14.440 --> 00:20:16.490\nWe were able to ping and\nwe resolved the issue.\n\n371\n00:20:16.490 --> 00:20:18.490\nAnd it's time to move\non to the next problem.\n\n372\n00:20:18.490 --> 00:20:19.950\nSo stay tuned.\n\n373\n00:20:19.950 --> 00:20:22.112\nWe've got more Cisco\ntrouble shooting coming up.\n\n374\n00:20:22.112 --> 00:20:27.800\n[MUSIC]\n\n",
          "vimeoId": "151402713"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #2` from set #1. The trouble ticket states that \"HSRP Group 12 on NYCORE1 and NYCORE2 are both reporting as active, but NYCORE1 should be active for odd numbered VLANs (11,13,15) and NYCORE2 should be active for even numbered VLANs (10,12,14,16) and NYEDGE1 should be the last device to become active in this group.\"",
          "length": "918",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-2-112515-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-2-112515-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-2-112515-1-sm.jpg",
          "title": "Set 1 Issue 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:07.495\n[MUSIC]\n\n2\n00:00:07.495 --> 00:00:11.310\nAll right, welcome back to another\ntroubleshooting scenario for CCMPT shoot.\n\n3\n00:00:11.310 --> 00:00:15.400\nWe're gonna be tackling Set 1, Issue 2,\nand this one is a bit of a doozy.\n\n4\n00:00:15.400 --> 00:00:17.465\nMost of ours are like one sentence,\nthis one's a whole paragraph.\n\n5\n00:00:17.465 --> 00:00:21.996\n[LAUGH] Here's our problem,\nwe've got HSRP group 12, so\n\n6\n00:00:21.996 --> 00:00:28.260\na very particular group, on NYCORE1 and\nNYCORE2 are both reporting as active.\n\n7\n00:00:28.260 --> 00:00:33.294\nBut NYCORE1 should be active for\nodd numbered VLANS, 11, 13 and 15, and\n\n8\n00:00:33.294 --> 00:00:38.420\nNYCORE2 should be active for\neven numbered VLANS 10, 12, 14, and 16.\n\n9\n00:00:38.420 --> 00:00:44.850\nAnd NYEDGE1 should be the last device\nto become active in this group.\n\n10\n00:00:44.850 --> 00:00:48.040\nAll right, so we're gonna have to go to\nthe diagram on this one cuz it sounds\n\n11\n00:00:48.040 --> 00:00:50.550\nlike we got a bizarre love\ntriangle of HSRP here.\n\n12\n00:00:50.550 --> 00:00:52.750\nSo let's take a look at what we've got.\n\n13\n00:00:52.750 --> 00:00:58.770\nTaking a look at our diagram, the three\nnodes they called out were NYCORE1,\n\n14\n00:00:58.770 --> 00:01:04.350\nNYCORE2 and NYEDGE1,\nthese three guys right here, okay.\n\n15\n00:01:04.350 --> 00:01:07.770\nAnd what they told me,\nwas that we're gonna be running HSRP for\n\n16\n00:01:07.770 --> 00:01:09.990\nVLANs 10 through 16, right?\n\n17\n00:01:09.990 --> 00:01:13.430\nSo we've got seven VLANs\nthat we're running this for.\n\n18\n00:01:13.430 --> 00:01:16.270\nAnd for the even numbered VLANs,\n\n19\n00:01:16.270 --> 00:01:22.020\nNYCORE1 should be standby and\nNYCORE2 should be active.\n\n20\n00:01:22.020 --> 00:01:26.300\nAnd for the odd numbered VLANs,\nNYCORE1 should be active, and\n\n21\n00:01:26.300 --> 00:01:29.940\nNYCORE2 should be standby, so\nthey're kinda dividing up the load.\n\n22\n00:01:29.940 --> 00:01:35.620\nBut then for all of the VLANs,\nNYEDGE1 should be in third place,\n\n23\n00:01:35.620 --> 00:01:40.180\nand if you remember HSRP,\nyou have active, standby, and other.\n\n24\n00:01:40.180 --> 00:01:43.300\nSo this is like the other in HSRP.\n\n25\n00:01:43.300 --> 00:01:45.190\nIt's not standby or active.\n\n26\n00:01:45.190 --> 00:01:48.150\nSo that's kind of the priority we\nwant to have, and I'm glad I used\n\n27\n00:01:48.150 --> 00:01:50.800\nthe word priority there because priorities\nare going to come into the mix.\n\n28\n00:01:50.800 --> 00:01:53.810\nIf you want to influence who is active,\nand who's standby, and\n\n29\n00:01:53.810 --> 00:01:55.990\nwho's other, we've got to set priorities.\n\n30\n00:01:55.990 --> 00:01:56.950\nSo right off the bat,\n\n31\n00:01:56.950 --> 00:02:00.500\nI'm starting to remember all\nthe things we've learned about HSRP.\n\n32\n00:02:00.500 --> 00:02:03.310\nI know I gotta set priorities for\neach group to get this set right and\n\n33\n00:02:03.310 --> 00:02:08.050\nI know that the higher the priority\nnumber, the better, right.\n\n34\n00:02:08.050 --> 00:02:11.290\nThis is where things get kinda confusing,\ncuz sometimes, it's the lower number that\n\n35\n00:02:11.290 --> 00:02:15.980\nwins, like in a expanding tree protocol,\nthe lower number becomes root.\n\n36\n00:02:15.980 --> 00:02:19.382\nBut in HSRP,\nthe higher the number becomes active.\n\n37\n00:02:19.382 --> 00:02:22.180\nAnother thing I need to be on\nthe look out for is preemption.\n\n38\n00:02:22.180 --> 00:02:25.940\nIf I got a network failure and\nthen the network failure is corrected,\n\n39\n00:02:25.940 --> 00:02:31.610\nif I don't have preemption turned on,\na lower priority router might stay active\n\n40\n00:02:31.610 --> 00:02:35.650\nbecause the higher priority router isn't\njumping in and taking back over again.\n\n41\n00:02:35.650 --> 00:02:38.000\nSo we'll need to pay attention for\nthose as we go through and\n\n42\n00:02:38.000 --> 00:02:39.190\nwe look at the configurations.\n\n43\n00:02:39.190 --> 00:02:42.580\nNow, I'm gonna start with\nthese two guys down here and\n\n44\n00:02:42.580 --> 00:02:46.750\nI'm kind of going to NYEDGE in the start\nand just kinda put it out of my mind.\n\n45\n00:02:46.750 --> 00:02:49.450\nAnd I'm really just focusing\nin on one VLAN because\n\n46\n00:02:50.850 --> 00:02:54.080\nthe problem told me all\nabout these other VLANs.\n\n47\n00:02:54.080 --> 00:02:58.440\nThe problem itself is HSRP\ngroup 12 on NYCORE1 and\n\n48\n00:02:58.440 --> 00:03:01.180\nNYCORE2 are both reporting as active.\n\n49\n00:03:01.180 --> 00:03:02.050\nOkay?\n\n50\n00:03:02.050 --> 00:03:04.779\nEverything else in the paragraph\nis really just supporting info.\n\n51\n00:03:04.779 --> 00:03:09.422\nSo they're telling you that CORE1 and\nCORE2 are both active, not EDGE1.\n\n52\n00:03:09.422 --> 00:03:11.058\nSo again,\nI'm just gonna put EDGE1 out of my mind.\n\n53\n00:03:11.058 --> 00:03:14.813\nAnd then CORE1 and\nCORE2 are both active and, let's see,\n\n54\n00:03:14.813 --> 00:03:16.970\nwho's suppose to be active?\n\n55\n00:03:16.970 --> 00:03:20.910\nFor an even-numbered network\nwe should have CORE2.\n\n56\n00:03:20.910 --> 00:03:25.310\nSo CORE2 should be active,\nwhich it is, and CORE1 should not.\n\n57\n00:03:25.310 --> 00:03:29.870\nAll right, now before I jump in and\nreally start troubleshooting this,\n\n58\n00:03:29.870 --> 00:03:33.552\nwhat could cause two devices\nto go active at the same time?\n\n59\n00:03:33.552 --> 00:03:35.258\nWell, it's actually really hard for\n\n60\n00:03:35.258 --> 00:03:38.829\nHSRP to have two nodes go active at the\nsame time, cuz they're sending these low\n\n61\n00:03:38.829 --> 00:03:41.406\nlevel broadcast type\ncommunications over the network.\n\n62\n00:03:41.406 --> 00:03:46.430\nIt's pretty straight forward,\nas long as they can see each other.\n\n63\n00:03:46.430 --> 00:03:50.880\nIf these two switches can't see each\nother, then they'll both go active.\n\n64\n00:03:50.880 --> 00:03:53.380\nCuz they both think\nthe other person has failed.\n\n65\n00:03:53.380 --> 00:03:56.200\nSo I'm probably dealing with\na communications problem.\n\n66\n00:03:56.200 --> 00:03:59.390\nAnd HSRP does not like to\npass through routers, so\n\n67\n00:03:59.390 --> 00:04:01.570\nI don't have to worry about\nit going up through this way.\n\n68\n00:04:01.570 --> 00:04:04.570\nYou have to do like GRE tunnels and\nall sorts of craziness to make it happen.\n\n69\n00:04:04.570 --> 00:04:05.680\nIt's not worth it.\n\n70\n00:04:05.680 --> 00:04:12.090\nSo, it's more than likely going to be some\nkind of connectivity issue here or here.\n\n71\n00:04:12.090 --> 00:04:15.640\nAnd you can have all sorts of v-link\nconfiguration, spanning tree and so on\n\n72\n00:04:15.640 --> 00:04:18.710\nthat can break that, but I'll bet we are\ndealing with a communications issue and\n\n73\n00:04:18.710 --> 00:04:20.430\nI haven't even dug into the problem yet.\n\n74\n00:04:20.430 --> 00:04:23.060\nSo, let's get in here and\nstart to take a look at it.\n\n75\n00:04:23.060 --> 00:04:25.920\nI'm gonna focus just on\nHSRP group 12 cuz that's\n\n76\n00:04:25.920 --> 00:04:27.990\nreally what the problem's all about.\n\n77\n00:04:27.990 --> 00:04:32.010\nAnd I wanna see this guy be standby,\nI wanna see this guy be active, and\n\n78\n00:04:32.010 --> 00:04:34.720\nby the end of this, I wanna see\nthis last guy up here, NYEDGE1,\n\n79\n00:04:34.720 --> 00:04:39.000\nI want him to be the other,\nnot active or standby.\n\n80\n00:04:39.000 --> 00:04:41.320\nSo I'm gonna start way over here in CORE2.\n\n81\n00:04:41.320 --> 00:04:43.660\nThe person who's supposed to be active and\nis.\n\n82\n00:04:43.660 --> 00:04:46.810\nI just wanna see their configuration,\ncuz it's more than likely correct.\n\n83\n00:04:46.810 --> 00:04:48.082\nAnd then I can jump and\nlook at the other one.\n\n84\n00:04:48.082 --> 00:04:55.835\nSo if I jump over to CORE2,\nWe can get into that switch.\n\n85\n00:04:55.835 --> 00:04:59.755\nAnd I'm gonna keep the switch names up\nhere in the screen cuz it's easy to get\n\n86\n00:04:59.755 --> 00:05:00.820\nthem mixed up.\n\n87\n00:05:00.820 --> 00:05:07.120\nSo I'm gonna jump into CORE2 here, and\nI'm gonna do a show standby for VLAN 12.\n\n88\n00:05:07.120 --> 00:05:07.670\nAll right?\n\n89\n00:05:07.670 --> 00:05:10.010\nI just wanna look at the configuration for\nVLAN12.\n\n90\n00:05:10.010 --> 00:05:13.674\nAnd so what I can see is that it is\nactive, which is kind of what I wanted.\n\n91\n00:05:13.674 --> 00:05:15.601\nI can see that I've had\nsome state changes,\n\n92\n00:05:15.601 --> 00:05:18.167\nwhich just lets me know that\nit's not completely stable.\n\n93\n00:05:18.167 --> 00:05:24.900\nI've got a virtual IP of 192.168.12.1 and\nsince I'm active, I have that IP fired up.\n\n94\n00:05:24.900 --> 00:05:27.140\nAnd then here's my virtual Mac address for\nit.\n\n95\n00:05:27.140 --> 00:05:28.960\nEnds in ac0c.\n\n96\n00:05:28.960 --> 00:05:35.100\nNow, looking down here, I can see standby\nrouter is unknown, active router is local.\n\n97\n00:05:35.100 --> 00:05:39.740\nNow that standby router is unknown,\nthat's a red flag to me,\n\n98\n00:05:39.740 --> 00:05:44.860\nbecause we have three routers involved\nin this HSRP cluster, so I might not be\n\n99\n00:05:44.860 --> 00:05:48.950\nable to see CORE1, but I should still be\nable to see that other edge router, right?\n\n100\n00:05:48.950 --> 00:05:49.980\nWell, not necessarily.\n\n101\n00:05:49.980 --> 00:05:54.490\nIf we go back to our diagram, NYCORE2,\n\n102\n00:05:54.490 --> 00:05:59.060\nits paths to get to EDGE1\nalways pass through CORE1.\n\n103\n00:05:59.060 --> 00:06:03.050\nSo we're probably dealing with some kind\nof connectivity issue right here where\n\n104\n00:06:03.050 --> 00:06:07.350\nwe're not able to make it to CORE1, which\nmeans we can't make it to EDGE1 also.\n\n105\n00:06:07.350 --> 00:06:10.680\nCuz if CORE1 had dropped off the network,\nEDGE1 should be my backup.\n\n106\n00:06:10.680 --> 00:06:13.740\nThat one should come up as a standby and\nthat's not what I'm seeing.\n\n107\n00:06:13.740 --> 00:06:17.180\nSo, so that's a red flag, the fact\nthat my standby router is unknown.\n\n108\n00:06:17.180 --> 00:06:20.040\nI'm going to also note the priority here.\n\n109\n00:06:20.040 --> 00:06:24.950\nPriority is 100 and preemption is enabled.\n\n110\n00:06:24.950 --> 00:06:28.750\nSo assuming this is all configured\ncorrectly, what should happen here\n\n111\n00:06:28.750 --> 00:06:33.150\nIs the other two routers should have\npriorities lower than a hundred, and\n\n112\n00:06:33.150 --> 00:06:35.540\nI'm set to preempt so\nI should become active, right?\n\n113\n00:06:35.540 --> 00:06:38.100\nSo that's the supporting\ninformation I need before I go and\n\n114\n00:06:38.100 --> 00:06:39.510\nlook at the other guys.\n\n115\n00:06:39.510 --> 00:06:42.530\nI do want to get one more piece of\ninformation since I think I'm dealing with\n\n116\n00:06:42.530 --> 00:06:48.099\na connectivity issue, I need to know\nwhat IP address I have in vlan 12.\n\n117\n00:06:49.150 --> 00:06:51.470\nAnd so this one is dot three, right.\n\n118\n00:06:51.470 --> 00:06:54.045\nI'm just gonna test connectivity,\nso I need to know my own IP.\n\n119\n00:06:54.045 --> 00:06:57.656\nAll right, so now that I've got that,\nI'm gonna jump over to CORE1.\n\n120\n00:06:57.656 --> 00:07:00.522\nAnd I'm gonna basically\ncheck the same thing, right.\n\n121\n00:07:00.522 --> 00:07:03.730\nSo do the same checks that I\njust did on the other switch,\n\n122\n00:07:03.730 --> 00:07:06.412\nbut doing it right here on CORE1,\nall right.\n\n123\n00:07:06.412 --> 00:07:13.798\nAnd on CORE1 if I do\na show standby vlan 12.\n\n124\n00:07:13.798 --> 00:07:17.600\nI can see that it also is active.\n\n125\n00:07:17.600 --> 00:07:20.310\nSo the troubleshooting scenario\nwas telling the truth.\n\n126\n00:07:20.310 --> 00:07:22.490\nI can see that it's got\nthat virtual IP address,\n\n127\n00:07:22.490 --> 00:07:25.090\nit's got the same MAC address so it's up.\n\n128\n00:07:25.090 --> 00:07:26.750\nIt's only showing one state change, so\n\n129\n00:07:26.750 --> 00:07:29.260\nit's a little more stable\nthan what the other one was.\n\n130\n00:07:29.260 --> 00:07:30.948\nI can see that preemption is enabled.\n\n131\n00:07:30.948 --> 00:07:33.549\nIt does have a standby router.\n\n132\n00:07:33.549 --> 00:07:36.508\nIts standby router is 192.168.12.4.\n\n133\n00:07:36.508 --> 00:07:40.656\nThat's not NYCore 2, it must be NYEDGE1.\n\n134\n00:07:40.656 --> 00:07:41.329\nAll right.\n\n135\n00:07:41.329 --> 00:07:46.420\nSo if NYEDGE1 is supposed to be the other\nhere, I can see I still see it.\n\n136\n00:07:46.420 --> 00:07:50.140\nBut it's not an other it's a standby\nbecause I've become the active.\n\n137\n00:07:50.140 --> 00:07:55.560\nAll right, so this switch is active and\nit looks like NYEDGE1 is the other.\n\n138\n00:07:55.560 --> 00:07:57.990\nNow notice that my priority is a 90,\nwhich is good.\n\n139\n00:07:57.990 --> 00:08:03.960\nIt's less than 100, so that should allow\nthe other switch to become the active.\n\n140\n00:08:03.960 --> 00:08:08.340\nAnd then I can see EDGE1 here,\nwith a priority of 85, it's the lowest.\n\n141\n00:08:08.340 --> 00:08:10.910\nSo it looks like my priority\nnumbers are set correctly.\n\n142\n00:08:10.910 --> 00:08:15.280\nKind of recapping that NYCORE2\nhas a priority of 100,\n\n143\n00:08:15.280 --> 00:08:19.010\nNYCORE1 has a priority of 90,\nand NYEDGE1 has a priority of 85.\n\n144\n00:08:19.010 --> 00:08:21.600\nSo, we got our steps are setup right.\n\n145\n00:08:21.600 --> 00:08:23.340\nNYCORE2 should be active.\n\n146\n00:08:23.340 --> 00:08:26.380\nBut again, I think we're just dealing\nwith connectivity at this point.\n\n147\n00:08:26.380 --> 00:08:29.820\nSo, what I'm gonna do next is I'm\ngonna test that connectivity.\n\n148\n00:08:29.820 --> 00:08:34.536\nOn CORE1 we'll see what\nIP address we have.\n\n149\n00:08:34.536 --> 00:08:40.469\nSo on vlan12 I'm 192.168.12.1,\nwell no sorry that's the stand by.\n\n150\n00:08:40.469 --> 00:08:41.293\nThat's our virtual IP.\n\n151\n00:08:41.293 --> 00:08:45.529\nI'm actually 12.2 and\nthe other switch was .3 and so\n\n152\n00:08:45.529 --> 00:08:49.450\nI'm gonna try and ping 192.168.12.3.\n\n153\n00:08:49.450 --> 00:08:51.740\nDo I have basic connectivity?\n\n154\n00:08:51.740 --> 00:08:55.160\nIf I don't have basic connectivity,\nHSRP is not gonna work either.\n\n155\n00:08:55.160 --> 00:08:56.860\nAnd I see that I don't.\n\n156\n00:08:56.860 --> 00:08:58.560\nNow my IP address is correct.\n\n157\n00:08:58.560 --> 00:09:00.090\nMy subnet mask is right.\n\n158\n00:09:00.090 --> 00:09:04.050\nIf I look at the other core router,\nits IP address is right.\n\n159\n00:09:04.050 --> 00:09:05.820\nIts subnet mask is right.\n\n160\n00:09:05.820 --> 00:09:07.590\nSo if things look good there,\n\n161\n00:09:07.590 --> 00:09:11.720\nwe must be dealing with something kind of\nlow-level like a layer two type problem.\n\n162\n00:09:11.720 --> 00:09:15.360\nSo let's target the links\nbetween the switches.\n\n163\n00:09:15.360 --> 00:09:17.080\nLooks like we've got two links here.\n\n164\n00:09:17.080 --> 00:09:19.530\nOne that's a layer three and\none that's a layer two.\n\n165\n00:09:19.530 --> 00:09:22.545\nA layer three link I can rule that\nout because HSRP doesn't pass through\n\n166\n00:09:22.545 --> 00:09:23.357\na router, right?\n\n167\n00:09:23.357 --> 00:09:24.390\nIt's not designed for that.\n\n168\n00:09:24.390 --> 00:09:28.059\nSo, port 24 here,\nthis is the trunk running between them and\n\n169\n00:09:28.059 --> 00:09:31.190\nI should be able to see that\nother switch on port 24.\n\n170\n00:09:31.190 --> 00:09:34.710\nLet's take a look at its configuration and\nsee what's going on there.\n\n171\n00:09:34.710 --> 00:09:37.570\nSo here I am on CORE2 and\n\n172\n00:09:37.570 --> 00:09:42.486\nI'm just gonna do a show run for\ninterface fa1/0/24.\n\n173\n00:09:42.486 --> 00:09:45.301\nAnd [LAUGH] well,\nour problem creeps up right here.\n\n174\n00:09:45.301 --> 00:09:51.082\nI've got switchport trunk encapsulation\ndot1q and I've got switchport trunk\n\n175\n00:09:51.082 --> 00:09:56.617\nallowed vlan 10,11, 13 through 16,\nit's skips right over 12.\n\n176\n00:09:56.617 --> 00:10:01.158\nAll right VLAN12 is not allowed to\npass over this link, and as a result,\n\n177\n00:10:01.158 --> 00:10:04.030\nI'm not gonna be able to\nget to the other side.\n\n178\n00:10:04.030 --> 00:10:07.742\nNow, that's not the only path that I could\nfollow, this could be a trick, right?\n\n179\n00:10:07.742 --> 00:10:11.710\nBecause NYCORE2 might be able\nto go across this other switch.\n\n180\n00:10:11.710 --> 00:10:14.380\nI say the HSRP doesn't like to\nhave a router in between it but\n\n181\n00:10:14.380 --> 00:10:15.310\nit doesn't care if there's a switch.\n\n182\n00:10:15.310 --> 00:10:17.310\nThere could be a switch in between,\nit'd be fine.\n\n183\n00:10:17.310 --> 00:10:19.230\nSo I might be able to go this other route.\n\n184\n00:10:19.230 --> 00:10:20.580\nBut I don't know much\nabout this interface.\n\n185\n00:10:20.580 --> 00:10:24.000\nSo let's take a look at interface 22,\nand see what it's set up for.\n\n186\n00:10:25.800 --> 00:10:30.040\nSo I'm gonna pull up it's running config,\nand it looks like it's a trunk.\n\n187\n00:10:30.040 --> 00:10:31.030\nNothing too exciting there.\n\n188\n00:10:31.030 --> 00:10:36.025\nAnd if I do a show interface trunk,\nI can see that Port 22 is carrying,\n\n189\n00:10:36.025 --> 00:10:38.358\nit's carrying all the VLANs, so\n\n190\n00:10:38.358 --> 00:10:43.188\nin theory VLAN 12 should be passing\nright here across this link, so\n\n191\n00:10:43.188 --> 00:10:48.886\nI might be able to jump to the other side,\nbut if you did issue number one, right?\n\n192\n00:10:48.886 --> 00:10:52.659\nThe first troubleshooting issue for\nset one, you'll remember,\n\n193\n00:10:52.659 --> 00:10:55.433\nthese links were configured just for\nVLAN16.\n\n194\n00:10:55.433 --> 00:10:58.721\nSo it's actually on this end,\nfiltered down to VLAN16 and\n\n195\n00:10:58.721 --> 00:11:01.090\nnot carrying VLAN12, all right?\n\n196\n00:11:01.090 --> 00:11:03.880\nSo I now have to make a choice.\n\n197\n00:11:03.880 --> 00:11:08.920\nI have to add VLAN12 either to\nthis link here, or this link here.\n\n198\n00:11:08.920 --> 00:11:11.940\nAnd on the exam it's kind of up to\nyou how to figure out, how to fix or\n\n199\n00:11:11.940 --> 00:11:13.120\npick the solution.\n\n200\n00:11:13.120 --> 00:11:18.840\nFor us, we wanna pick the optimal solution\nand one hop is better than two hops.\n\n201\n00:11:18.840 --> 00:11:21.010\nAnd so we usually wanna enable it here.\n\n202\n00:11:21.010 --> 00:11:23.710\nI know the VLAN is just\nbeing filtered out here, so\n\n203\n00:11:23.710 --> 00:11:27.580\nI'm just gonna add VLAN12 to that list and\nthat should solve our problem.\n\n204\n00:11:27.580 --> 00:11:30.000\nSo, on CORE2, and let's go do that.\n\n205\n00:11:30.000 --> 00:11:33.140\nWe're gonna make our change and\nwe'll verify that it actually works.\n\n206\n00:11:33.140 --> 00:11:38.510\nSo on CORE2 when I did a show run for\ninterface fa1/0/24 we saw how\n\n207\n00:11:38.510 --> 00:11:44.600\nvlan 12 was left out of that list so\nI'll get into fa1/0/24 and I'll just\n\n208\n00:11:45.860 --> 00:11:51.294\nsay switchport trunk allowed vlan\n\n209\n00:11:51.294 --> 00:11:56.160\nadd 12 so\nI'm going to add the vlan 12 to that list.\n\n210\n00:11:57.170 --> 00:12:01.220\nAnd now,\nwhen I take a look at that configuration,\n\n211\n00:12:01.220 --> 00:12:05.380\nI'll see that it's allowing 10-16 so\nit's flowing through on this side.\n\n212\n00:12:05.380 --> 00:12:08.340\nI need to check the other side too and\nactually need to stall to give\n\n213\n00:12:08.340 --> 00:12:12.660\nHSRP a minute to solve itself anyway so\nlet's verify the other side while we wait.\n\n214\n00:12:12.660 --> 00:12:17.380\nI'll jump over to CORE1 and on CORE1 I'm\njust gonna look at that same interface\n\n215\n00:12:20.080 --> 00:12:23.930\nand it's already carrying VLAN 12 so\nI should be okay.\n\n216\n00:12:23.930 --> 00:12:27.352\nShould be fine, should and\nare are two different things.\n\n217\n00:12:27.352 --> 00:12:29.860\nOh, I stalled long enough, there it is.\n\n218\n00:12:29.860 --> 00:12:32.293\nVlan12 Grp state changed.\n\n219\n00:12:32.293 --> 00:12:35.190\nThis guy just went from Active to Speak.\n\n220\n00:12:35.190 --> 00:12:37.330\nWhat does that mean?\n\n221\n00:12:37.330 --> 00:12:40.220\nThat means it saw somebody else active on\nthe network, so it started speaking to\n\n222\n00:12:40.220 --> 00:12:43.370\nfind out who's gonna stay active,\nwho's gonna become standby.\n\n223\n00:12:43.370 --> 00:12:48.640\nAnd then I just got another message\nthat said I moved from Speak to Standby.\n\n224\n00:12:48.640 --> 00:12:54.238\nThis guy just became the standby router\nfor VLAN12 and if I go look at CORE2,\n\n225\n00:12:54.238 --> 00:12:59.490\nwhat I will hopefully see is if\nI do a show standby vlan 12,\n\n226\n00:12:59.490 --> 00:13:03.860\nI'm hoping to see this guy as\nactive which I saw before, right?\n\n227\n00:13:03.860 --> 00:13:07.380\nThat's no different but\nwhat I'm hoping to see is, there we go.\n\n228\n00:13:07.380 --> 00:13:10.910\nStandby router is 192.168.12.2.\n\n229\n00:13:10.910 --> 00:13:14.220\nNow we know about a standby,\nwe know about the other core router.\n\n230\n00:13:14.220 --> 00:13:18.196\nThe only other person we need to\ncheck is to jump over to NYEDGE1 and\n\n231\n00:13:18.196 --> 00:13:21.817\nmakes sure that it's an other,\nand so when I come over to it,\n\n232\n00:13:21.817 --> 00:13:25.370\nlooks like we got some nice\ninterface failures on this guy.\n\n233\n00:13:25.370 --> 00:13:30.563\nSo on this guy, I'm just gonna come\nover here and do a show standby vlan 12.\n\n234\n00:13:30.563 --> 00:13:32.340\nOh, I get an error.\n\n235\n00:13:32.340 --> 00:13:33.190\nShoot.\n\n236\n00:13:33.190 --> 00:13:34.090\nThis is a router.\n\n237\n00:13:34.090 --> 00:13:35.130\nThis isn't a switch.\n\n238\n00:13:35.130 --> 00:13:38.480\nOn the switches, we configure standby on\nour vlan, our virtual interfaces, right?\n\n239\n00:13:38.480 --> 00:13:41.870\nYour bridge or\nSVI switch virtual interfaces.\n\n240\n00:13:41.870 --> 00:13:44.070\nOn a router we configure it\non the interface itself, and\n\n241\n00:13:44.070 --> 00:13:46.368\nI have no idea what interface it's on,\nso let's find out.\n\n242\n00:13:46.368 --> 00:13:53.550\nIt is GI0/0.12 is more than\nlikely gonna be our winner.\n\n243\n00:13:53.550 --> 00:13:56.570\nSo we'll check that one and\nmake sure that it has the stamp.\n\n244\n00:13:56.570 --> 00:13:57.440\nI can see it does.\n\n245\n00:13:57.440 --> 00:13:57.979\nSo there it is.\n\n246\n00:13:57.979 --> 00:14:06.188\nSo if I do a show standby, it's not on\nthe VLAN interface, it's on gi0/0.12.\n\n247\n00:14:06.188 --> 00:14:10.460\nAnd here I can see it's state is listen.\n\n248\n00:14:10.460 --> 00:14:11.640\nIt's not active.\n\n249\n00:14:11.640 --> 00:14:13.050\nIt's not standby.\n\n250\n00:14:13.050 --> 00:14:13.600\nIt's listen.\n\n251\n00:14:13.600 --> 00:14:14.500\nIt's in third place.\n\n252\n00:14:14.500 --> 00:14:15.570\nIt's an other.\n\n253\n00:14:15.570 --> 00:14:18.110\nIt's sitting there listening for\nthe chance to come active.\n\n254\n00:14:18.110 --> 00:14:22.340\nAnd it knows who the active and\nstandby are, everything's good, right.\n\n255\n00:14:22.340 --> 00:14:27.053\nNow, I haven't looked at the other vlans,\nI didn't look at vlan 10, 11, 13,\n\n256\n00:14:27.053 --> 00:14:28.232\n14, 15, 16.\n\n257\n00:14:28.232 --> 00:14:31.643\nThey told me about those other\nvlans in the problem, but\n\n258\n00:14:31.643 --> 00:14:34.918\nthey were just telling me about them,\nI don't care.\n\n259\n00:14:34.918 --> 00:14:38.083\nThe problem was that\nHSRP Group 12 on NYCORE1 and\n\n260\n00:14:38.083 --> 00:14:40.154\n2 are both reporting as active.\n\n261\n00:14:40.154 --> 00:14:43.680\nThat's no longer happening, I solved\nthe problem, the ticket's done and\n\n262\n00:14:43.680 --> 00:14:44.790\nthis one's resolved.\n\n263\n00:14:44.790 --> 00:14:50.141\nAll right so this was a great example\nright here of what looked like a HSRP\n\n264\n00:14:50.141 --> 00:14:56.220\nproblem, ended up being a vlan filter on\nan interface, right, not HSRP at all.\n\n265\n00:14:56.220 --> 00:14:59.454\nSo understand that high level\ntechnologies are typically affected by\n\n266\n00:14:59.454 --> 00:15:02.918\nlow level technology, you got to look\nat the lower level OSI model as well.\n\n267\n00:15:02.918 --> 00:15:06.523\nAnd going trying to find that, this,\nwe have just to add a vlan to that trunk,\n\n268\n00:15:06.523 --> 00:15:07.364\nproblem solved.\n\n269\n00:15:07.364 --> 00:15:08.756\nI hope you guys enjoined,\n\n270\n00:15:08.756 --> 00:15:12.251\nstay tuned we've got more\ntroubleshooting episodes coming up.\n\n271\n00:15:12.251 --> 00:15:18.439\n[MUSIC]\n\n",
          "vimeoId": "149198918"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #3` from set #1. The trouble ticket states that \"PLABCSCO01 is unable to communicate to 192.168.16.2 which is a standby HSRP router address.\"",
          "length": "488",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-3-set_1_issue_3-113015-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-3-set_1_issue_3-113015-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-3-set_1_issue_3-113015-1-sm.jpg",
          "title": "Set 1 Issue 3",
          "transcript": "WEBVTT\n\n1\n00:00:00.144 --> 00:00:02.645\n[MUSIC]\n\n2\n00:00:07.728 --> 00:00:08.547\nIn this video,\n\n3\n00:00:08.547 --> 00:00:12.530\nwe're gonna take a look at troubleshooting\nset number 1 issue number 3.\n\n4\n00:00:12.530 --> 00:00:15.260\nAnd once again, we've got another host\nthat's who's not communicating right on\n\n5\n00:00:15.260 --> 00:00:19.030\nthe network, and we've gotta troubleshoot\nout, find out why, and get it fixed.\n\n6\n00:00:19.030 --> 00:00:20.980\nLet's start by looking at our\ntroubleshooting ticket, and\n\n7\n00:00:20.980 --> 00:00:22.840\nthe ticket on this one's\npretty straightforward.\n\n8\n00:00:22.840 --> 00:00:25.220\nLooks like our Cisco server\nagain has a problem.\n\n9\n00:00:25.220 --> 00:00:32.120\nPLABCSCO01 is unable to\ncommunicate with 192.168.16.2,\n\n10\n00:00:32.120 --> 00:00:35.460\nwhich is a standby HSRP router address,\nall right?\n\n11\n00:00:35.460 --> 00:00:38.430\nNow, we've seen that HSRP address\nbefore on another system,\n\n12\n00:00:38.430 --> 00:00:42.700\nbut let's go to our network map and get\nan idea of where all this stuff falls in.\n\n13\n00:00:42.700 --> 00:00:47.690\nSo, if we take a look at our diagram, that\nPLABCSCO, that's this guy way down here.\n\n14\n00:00:47.690 --> 00:00:53.450\nAnd I can see his IP address\nis 192.168.16.10, right?\n\n15\n00:00:53.450 --> 00:00:59.955\nSo, that's the person that's trying\nto reach out to 192.168.16.2.\n\n16\n00:00:59.955 --> 00:01:05.404\nNow, if we remember from our earlier\nissues, we've got these two guys up here,\n\n17\n00:01:05.404 --> 00:01:10.640\ncore one and core two, and\nthese guys are running HSRP between them.\n\n18\n00:01:10.640 --> 00:01:14.877\nThis one on the left is 192.168.16.2,\n\n19\n00:01:14.877 --> 00:01:19.499\nthis one on the right is 192.168.16.3, and\n\n20\n00:01:19.499 --> 00:01:26.158\nthey're sharing 192.168.16.1\nbetween them as an HSRP virtual IP.\n\n21\n00:01:26.158 --> 00:01:30.541\nNow the interesting part about this\nquestion is that it's telling me here\n\n22\n00:01:30.541 --> 00:01:36.210\nPLABCSCO01, the server down here,\ncan't communicate with 192.168.16.2.\n\n23\n00:01:36.210 --> 00:01:40.208\nThat's the unique IP assignment to this\nswitch, and then it goes on to say,\n\n24\n00:01:40.208 --> 00:01:42.340\nwhich is a standby HSRP router address.\n\n25\n00:01:42.340 --> 00:01:46.171\nNow, it's funny they add that because\nwe don't really care, do we, right?\n\n26\n00:01:46.171 --> 00:01:49.870\nThe unique IP for a router is always\ngoing to respond regardless of\n\n27\n00:01:49.870 --> 00:01:52.962\nwhether it's active, or\nstandby in an HSRP cluster,\n\n28\n00:01:52.962 --> 00:01:56.610\nor whether it's running HSRP at all,\ndoesn't really matter.\n\n29\n00:01:56.610 --> 00:02:00.114\nSo they've given us a little more\ninformation then we necessarily need,\n\n30\n00:02:00.114 --> 00:02:01.807\nwe can put that out of our minds, and\n\n31\n00:02:01.807 --> 00:02:04.660\nreally boil this down to just\na straight up layer two issue.\n\n32\n00:02:04.660 --> 00:02:11.480\nThis guy down here the server,\nis 192.168.16.10 on a slash 24 network,\n\n33\n00:02:11.480 --> 00:02:15.489\nthis switch should be 192.168.16.2.\n\n34\n00:02:15.489 --> 00:02:17.377\nIt should also be on a /24.\n\n35\n00:02:17.377 --> 00:02:19.010\nWe'll double-check, but it should be.\n\n36\n00:02:19.010 --> 00:02:22.089\nAnd that means these two\nare on the same subnet.\n\n37\n00:02:22.089 --> 00:02:22.985\nThey should be able to\ncommunicate right to each other.\n\n38\n00:02:22.985 --> 00:02:27.385\nNow, I've got NYACCESS1 down here at\nthe bottom that I have to pass through on\n\n39\n00:02:27.385 --> 00:02:32.580\nmy way up to that switch, so I could have\na problem there stopping connectivity.\n\n40\n00:02:32.580 --> 00:02:36.990\nAnd because we're running spanning tree,\nand there is a three way connection\n\n41\n00:02:36.990 --> 00:02:40.490\nright here, we could have\na loop that's being suppressed.\n\n42\n00:02:40.490 --> 00:02:45.710\nAnd in theory, our server might have\nto go ACCESS1 to CORE2 over to CORE1.\n\n43\n00:02:45.710 --> 00:02:48.240\nWe might have to jump through a few\ndifferent systems to actually get\n\n44\n00:02:48.240 --> 00:02:49.960\nto where we need to be, all right?\n\n45\n00:02:49.960 --> 00:02:53.390\nSo we'll need to verify that path and find\nout where our connectivity breaks down.\n\n46\n00:02:53.390 --> 00:02:57.050\nBut where I want to start is way\ndown here on PLABCSCO01, right?\n\n47\n00:02:57.050 --> 00:03:00.630\nI'm going to start on that guy and\njust see what it's experiencing.\n\n48\n00:03:00.630 --> 00:03:06.640\nSo if I jump over to that system,\nI'm just gonna fire up a command prompt,\n\n49\n00:03:06.640 --> 00:03:08.570\nand we'll see where it's getting to.\n\n50\n00:03:08.570 --> 00:03:15.820\nSo if I look at its IP Configuration,\nI can see that it is 192.168.16.10.\n\n51\n00:03:15.820 --> 00:03:18.670\nAnd it does have that 24 bit subnet mask,\nso\n\n52\n00:03:18.670 --> 00:03:21.451\nI know that's accurate here on the client.\n\n53\n00:03:21.451 --> 00:03:30.116\nAnd if I try and ping to 1.82.168.16.2,\nI don't get there.\n\n54\n00:03:30.116 --> 00:03:31.570\nRight so the troubleshooting\nticket didn't lie to me.\n\n55\n00:03:31.570 --> 00:03:36.020\nThis server actually can't get there so\nwe'll need to find out why, right?\n\n56\n00:03:36.020 --> 00:03:39.080\nNow if we start with our troubleshooting,\nthere's a few difference\n\n57\n00:03:39.080 --> 00:03:42.410\nplaces we can go on this, but\nI like to just think of the path and\n\n58\n00:03:42.410 --> 00:03:44.820\nfollow the path around, and\nsee where the problem is, right?\n\n59\n00:03:44.820 --> 00:03:48.165\nSo looking at my path,\nif I go back to my network diagram,\n\n60\n00:03:48.165 --> 00:03:51.512\nthe first step on my journey\nis to jump over to ACCESS1 and\n\n61\n00:03:51.512 --> 00:03:56.252\nI'm doing that on Port 1, so I'm gonna go\ntake a look at port 1 on NYACCESS1 and\n\n62\n00:03:56.252 --> 00:04:00.577\nstart there, and work my way through\nthe rest of this communication, and\n\n63\n00:04:00.577 --> 00:04:04.330\nfigure out where we're going to\nget to the rest of the network.\n\n64\n00:04:04.330 --> 00:04:07.406\nSo, I'll jump over to NYACCESS1, and\n\n65\n00:04:07.406 --> 00:04:13.204\nlet's just get connected to this guy,\nand see what we can find, all right?\n\n66\n00:04:13.204 --> 00:04:16.800\nNow on NYACCESS1, I'm looking for\na few pieces of information on this guy.\n\n67\n00:04:16.800 --> 00:04:20.020\nThe first thing I want to do is I want to\nlook at the interface that the server is\n\n68\n00:04:20.020 --> 00:04:21.970\nplugged in to,\nI need to see how that's configured.\n\n69\n00:04:21.970 --> 00:04:26.220\nSo I'm just gonna do a show\nrunning-config for interface fa0/1,\n\n70\n00:04:26.220 --> 00:04:28.720\nthat's the port that I'm plugged in.\n\n71\n00:04:28.720 --> 00:04:31.960\nI can see it's set for\nswitchport access vlan 16 And\n\n72\n00:04:31.960 --> 00:04:33.160\nit's got spanning-tree portfast.\n\n73\n00:04:33.160 --> 00:04:38.980\nSo we're on vlan 16,\nthe 192.168.16 network is on vlan 16.\n\n74\n00:04:38.980 --> 00:04:45.250\nGreat, and if I do a show vlan,\nI can see who else is on vlan 16.\n\n75\n00:04:45.250 --> 00:04:49.030\nAnd if I If I look here, VLAN 16,\nI'm all by myself, Fa0/1.\n\n76\n00:04:49.030 --> 00:04:53.683\nAll right,\nnow that's not necessarily a bad thing.\n\n77\n00:04:53.683 --> 00:04:55.610\nI know at our first view we're like,\nooh well, it's all by itself,\n\n78\n00:04:55.610 --> 00:04:57.040\nof course you can't ping anybody.\n\n79\n00:04:57.040 --> 00:04:59.710\nBut remember that trunks\ndon't show up in here and so\n\n80\n00:04:59.710 --> 00:05:04.650\nI'm gonna take a trunk off to another\nswitch to get the rest away on my journey.\n\n81\n00:05:04.650 --> 00:05:09.730\nIf I look back on my diagram, by the time\nI get to NYACCESS1, I'm on VLAN 16.\n\n82\n00:05:09.730 --> 00:05:12.830\nNow I need to jump up to\none of these switches,\n\n83\n00:05:12.830 --> 00:05:16.660\nto ultimately end up on this switch, and\n\n84\n00:05:16.660 --> 00:05:21.620\nit should have 192.168.16.2\nassigned to it's VLAN 16 interface.\n\n85\n00:05:21.620 --> 00:05:23.870\nIn fact,\nI could jump up to verify that real quick.\n\n86\n00:05:23.870 --> 00:05:29.020\nMaybe this will turn out to be an easy\nproblem, and just be a bad IP address.\n\n87\n00:05:29.020 --> 00:05:32.400\nNever underestimate easy problems,\nthey do pop up on the exam.\n\n88\n00:05:33.640 --> 00:05:40.820\nSo I'm gonna do a show running-config for\ninterface vlan16, all right?\n\n89\n00:05:43.930 --> 00:05:49.350\nAnd when I look at it I can see\n192.168.16.2 with a 24 bit subnet mask.\n\n90\n00:05:49.350 --> 00:05:51.530\nSo, it's not that simple, right?\n\n91\n00:05:51.530 --> 00:05:53.400\nIt's not just a bat, oh well shoot.\n\n92\n00:05:53.400 --> 00:05:55.220\nIt is gonna be that simple, isn't it?\n\n93\n00:05:55.220 --> 00:05:58.830\nLooking at this one the problem\njumps out right at me here.\n\n94\n00:05:58.830 --> 00:06:03.530\nI can see the IP address is 192.168.16.2\nlike it's supposed to be, the subnet mask\n\n95\n00:06:03.530 --> 00:06:07.980\nis right, I can see that it's got HSRP\nconfigured, but remember what I've said,\n\n96\n00:06:07.980 --> 00:06:12.220\nthat doesn't really matter on this problem\nbecause the unique IP will always respond.\n\n97\n00:06:12.220 --> 00:06:16.530\nBut this next little command right here,\nthat's gonna be a bit of a problem.\n\n98\n00:06:16.530 --> 00:06:18.120\nThis interface is shut down.\n\n99\n00:06:18.120 --> 00:06:20.870\nAs long as the interface is shut down, I'm\nnot gonna be able to communicate with it.\n\n100\n00:06:20.870 --> 00:06:22.665\nThis IP will never respond.\n\n101\n00:06:22.665 --> 00:06:25.950\nNow this might only be part of my problem.\n\n102\n00:06:25.950 --> 00:06:29.540\nIt might not be the whole problem, but\nit's definitely part of the problem.\n\n103\n00:06:29.540 --> 00:06:31.420\nSo I'm gonna jump in and fix this part.\n\n104\n00:06:33.560 --> 00:06:37.720\nAnd I'll just do a no shutdown\non that vlan16 interface.\n\n105\n00:06:37.720 --> 00:06:39.290\nNow I know what you might be thinking.\n\n106\n00:06:39.290 --> 00:06:40.890\nIn real life land,\nhow is this going to happen?\n\n107\n00:06:40.890 --> 00:06:42.050\nWho's going to shut it down?\n\n108\n00:06:42.050 --> 00:06:43.950\nWell there are some Cisco switches,\n\n109\n00:06:43.950 --> 00:06:48.360\nusually older ones, that will have their\nVLAN interfaces shut down by default.\n\n110\n00:06:48.360 --> 00:06:52.400\nSo it could be that somebody\nconfigured this and just never\n\n111\n00:06:52.400 --> 00:06:56.390\nran a no shutdown command on it, so it\ncould be a mistake you find up there, but\n\n112\n00:06:56.390 --> 00:06:58.240\nit would usually be during\nthe deployment of a switch.\n\n113\n00:06:58.240 --> 00:07:00.910\nThis isn't something that\nwould randomly pop up.\n\n114\n00:07:00.910 --> 00:07:04.510\nNow that that's done,\nRIP should be active on that vlan.\n\n115\n00:07:04.510 --> 00:07:06.530\nLet's go see if we can ping it now, and\n\n116\n00:07:06.530 --> 00:07:11.230\nthen if that was our whole\nproblem all in one fell swoop.\n\n117\n00:07:11.230 --> 00:07:15.150\nSo, I'm just gonna connect right back\nhere and try and redo that ping, and\n\n118\n00:07:15.150 --> 00:07:16.560\nsure enough that was it.\n\n119\n00:07:16.560 --> 00:07:18.320\nThis turned out to be\na pretty easy problem.\n\n120\n00:07:18.320 --> 00:07:20.070\nJust a shut down interface.\n\n121\n00:07:20.070 --> 00:07:24.110\nNow, the key takeaway for this is not\nnecessarily that it was an easy problem,\n\n122\n00:07:24.110 --> 00:07:27.490\nbut the way that we\nfound that easy problem.\n\n123\n00:07:27.490 --> 00:07:29.250\nRemember that when you\nstart to troubleshoot this,\n\n124\n00:07:29.250 --> 00:07:33.210\nyou've gotta think about the path across\nyour network that your journey is taking.\n\n125\n00:07:33.210 --> 00:07:38.280\nI knew that I could have problems\nin any of these three switches, but\n\n126\n00:07:38.280 --> 00:07:40.330\nI used the ones that I\nthought were in line, so\n\n127\n00:07:40.330 --> 00:07:42.800\nI didn't waste time over here\nin CORE2 if I didn't need to,\n\n128\n00:07:42.800 --> 00:07:47.630\nand that helped us to dial in, find the\nsolution, and get it resolved, all right?\n\n129\n00:07:47.630 --> 00:07:49.860\nWell that's about it for Set 1, Issue 3.\n\n130\n00:07:49.860 --> 00:07:53.190\nSo we got a chance to see that a shutdown\ninterface doesn't respond to pings.\n\n131\n00:07:53.190 --> 00:07:54.340\nBig surprise there.\n\n132\n00:07:54.340 --> 00:07:57.060\nWe found it, we fixed it,\ntrouble ticket resolved.\n\n133\n00:07:57.060 --> 00:07:58.450\nSo hope you guys enjoyed that one.\n\n134\n00:07:58.450 --> 00:07:59.170\nStay tuned.\n\n135\n00:07:59.170 --> 00:08:01.232\nWe've got more troubleshooting\ntickets coming up.\n\n136\n00:08:01.232 --> 00:08:03.300\n[SOUND]\n\n",
          "vimeoId": "149153560"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #4` from set #1. The trouble ticket states that \"PLABCSCO01 is unable to communicate to 192.168.11.4 which is located on NYEDGE1.\"",
          "length": "841",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-4-set_1_issue_4-113015-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-4-set_1_issue_4-113015-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-4-set_1_issue_4-113015-1-sm.jpg",
          "title": "Set 1 Issue 4",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:07.507\n[MUSIC]\n\n2\n00:00:07.507 --> 00:00:10.431\nAll right it’s time for\nset one, issue four.\n\n3\n00:00:10.431 --> 00:00:13.220\nAnd in this one we've got another\nhost with some connectivity issues.\n\n4\n00:00:13.220 --> 00:00:16.030\nWe’re gonna jump in, try and\nfind the problem and get it resolved.\n\n5\n00:00:16.030 --> 00:00:19.890\nI look at my troubleshooting ticket,\nit tells me here that PLABCISCO, that same\n\n6\n00:00:19.890 --> 00:00:26.030\nserver, is unable to communicate with\n192.168.11.4, which is located on NYEDGE1.\n\n7\n00:00:26.030 --> 00:00:31.210\nThat's convenient that they tell us that,\ncuz that's an IP we haven't seen yet,\n\n8\n00:00:31.210 --> 00:00:34.010\nand I didn't know where it resided,\nfortunately, they let us know.\n\n9\n00:00:34.010 --> 00:00:36.670\nSo, let's take a look at\nour topology map here, and\n\n10\n00:00:36.670 --> 00:00:39.920\nget an idea of where this\nproblem actually exists.\n\n11\n00:00:39.920 --> 00:00:42.330\nNow, PLABCISCO01,\nwe're kind of familiar with that guy,\n\n12\n00:00:42.330 --> 00:00:44.270\nthat server's been our\nproblem child all along.\n\n13\n00:00:44.270 --> 00:00:48.668\nSo, we've got this server way down\nhere at the bottom of our network,\n\n14\n00:00:48.668 --> 00:00:50.130\nand it's 192.168.16.10.\n\n15\n00:00:50.130 --> 00:00:53.270\nWe've seen previously that\nit's on Velan 16, but\n\n16\n00:00:53.270 --> 00:00:56.130\nhere we're having a problem\ncommunicating with 192.168.11.4.\n\n17\n00:00:56.130 --> 00:01:01.790\nThat's going to be on a different velan,\na different subnet somewhere.\n\n18\n00:01:01.790 --> 00:01:05.090\nSo, I'm no longer just\nfacing layer two issues now.\n\n19\n00:01:05.090 --> 00:01:07.810\nI've got layer three in the mix also.\n\n20\n00:01:07.810 --> 00:01:14.720\nAnd when I communicate that IP resides on\nNYEDGE1, which if I look, is way up here.\n\n21\n00:01:14.720 --> 00:01:17.010\nSo now I've got more devices in the mix,\n\n22\n00:01:17.010 --> 00:01:20.170\nif I kinda take a look at\nthe big picture view here.\n\n23\n00:01:20.170 --> 00:01:21.960\nDevices that could be a problem?\n\n24\n00:01:21.960 --> 00:01:26.190\nWell, I'm coming from my server,\nI'm going to NY access one.\n\n25\n00:01:26.190 --> 00:01:28.140\nThen I'm going to one\nof these two switches.\n\n26\n00:01:28.140 --> 00:01:29.670\nCore one or core two.\n\n27\n00:01:29.670 --> 00:01:32.420\nAnd from there I should be\njumping up to edge one.\n\n28\n00:01:32.420 --> 00:01:36.080\nSo I've actually got four different\nhardware devices in between my server and\n\n29\n00:01:36.080 --> 00:01:37.060\nthe destination.\n\n30\n00:01:37.060 --> 00:01:39.570\nWell I guess we really only have three\nin between, but four different Cisco\n\n31\n00:01:39.570 --> 00:01:42.510\ndevices where the problem could exist,\nand I'll have to troubleshoot.\n\n32\n00:01:42.510 --> 00:01:45.930\nAnd just like before,\nI wanna think about that path and\n\n33\n00:01:45.930 --> 00:01:49.310\nsee how we're gonna float\nto get to that destination.\n\n34\n00:01:49.310 --> 00:01:52.410\nAll right, now troubleshooting a problem\nlike this is all about doing things\n\n35\n00:01:52.410 --> 00:01:53.670\nquickly and efficiently.\n\n36\n00:01:53.670 --> 00:01:57.100\nAnd you'll remember the last one\nturned out to be a pretty simple one,\n\n37\n00:01:57.100 --> 00:01:58.650\nin that we had an interface\nthat was shut down.\n\n38\n00:01:58.650 --> 00:02:00.520\nIt could be as simple as that.\n\n39\n00:02:00.520 --> 00:02:03.500\nOr it could be VLAN assignments,\ncould be all sorts of problems, right.\n\n40\n00:02:03.500 --> 00:02:07.970\nSo let's jump in here and take a look,\nand see where our problem is going from.\n\n41\n00:02:07.970 --> 00:02:12.330\nSo I want to start on PLABCSCO01, and just\ntest out the troubleshooting ticket and\n\n42\n00:02:12.330 --> 00:02:13.780\nmake sure they're not lying to me.\n\n43\n00:02:13.780 --> 00:02:18.670\nSo here I am on that server, and I'm gonna\nfire up in my command prompt here, and\n\n44\n00:02:18.670 --> 00:02:22.690\nI'm just gonna do a quick ipconfig\nto verify my configuration.\n\n45\n00:02:22.690 --> 00:02:26.780\nAnd I see I'm 192.160.16.10 on\nthat 24 bit subnet mask, so\n\n46\n00:02:26.780 --> 00:02:29.070\nall that is all I expect it to be.\n\n47\n00:02:29.070 --> 00:02:36.165\nAnd then I'm just gonna run a quick\nping to the ip address in question.\n\n48\n00:02:36.165 --> 00:02:39.920\n192.168.11.4. All right.\nNow I'm doing the ping for two reasons.\n\n49\n00:02:39.920 --> 00:02:42.340\nOne I wanna make sure\nthe problem actually exists.\n\n50\n00:02:42.340 --> 00:02:43.880\nRight?\nThat's one reason.\n\n51\n00:02:43.880 --> 00:02:48.400\nThe other reason I'm doing it,\nis because I've got a default gateway set.\n\n52\n00:02:48.400 --> 00:02:52.550\nAnd if my default gateway doesn't have\na route to get to the destination,\n\n53\n00:02:52.550 --> 00:02:54.420\nI'll get a message here saying\ndestination unreachable.\n\n54\n00:02:54.420 --> 00:02:56.080\nAnd that's not what I'm getting.\n\n55\n00:02:56.080 --> 00:02:57.790\nI'm getting request timed out.\n\n56\n00:02:57.790 --> 00:02:59.610\nAnd so\nthat actually helps me a little bit.\n\n57\n00:02:59.610 --> 00:03:04.430\nIt lets me know that I got tot he gateway,\nthe gateway had a route, and\n\n58\n00:03:04.430 --> 00:03:07.730\nsent me along, and\nI just didn't get to wherever I was going.\n\n59\n00:03:07.730 --> 00:03:10.690\nIf I get destination unreachable,\nthat would tell me the gateway didn't\n\n60\n00:03:10.690 --> 00:03:13.150\nhave a route, and now I know I'm\ndealing with a routing issue.\n\n61\n00:03:13.150 --> 00:03:15.150\nSo I might not be dealing\nwith routing at all.\n\n62\n00:03:15.150 --> 00:03:16.890\nI might be dealing with\nAccess Control List.\n\n63\n00:03:16.890 --> 00:03:18.960\nI might be dealing with Layer two issues.\n\n64\n00:03:18.960 --> 00:03:22.120\nBut routing is more than likely\nfine in this scenario, all right?\n\n65\n00:03:22.120 --> 00:03:24.580\nThis is a really small network, so\nit probably won't work here, but\n\n66\n00:03:24.580 --> 00:03:29.330\non a large network you can use tracert\nto kind of solve that same issue.\n\n67\n00:03:29.330 --> 00:03:32.490\nAnd so if I were to do a trace route and\nsend that along,\n\n68\n00:03:32.490 --> 00:03:33.600\nit'll kind of show me\nwhere the problem is.\n\n69\n00:03:33.600 --> 00:03:37.400\nAnd if I had multiple routers in the mix,\nI would see which router this died on,\n\n70\n00:03:37.400 --> 00:03:39.660\nand then again that help\nme narrow down the problem.\n\n71\n00:03:39.660 --> 00:03:42.800\nIn my scenario, I'm more than\nlikely only to have one router.\n\n72\n00:03:42.800 --> 00:03:45.410\nIf we take a look at our\ndiagram while that's running.\n\n73\n00:03:47.490 --> 00:03:51.495\nRemember from the earlier sets or\nthe earlier issues, that NYCORE1 and\n\n74\n00:03:51.495 --> 00:03:54.370\nCORE2 are running HSRP, and\nthey have a virtual IP, 192.168.16.1, and\n\n75\n00:03:54.370 --> 00:03:58.480\nthat's what I'm using\nas my default gateway.\n\n76\n00:03:58.480 --> 00:04:01.460\nWell, those switches have\ninterfaces on each of the VLANs.\n\n77\n00:04:01.460 --> 00:04:04.870\nSo they're routing me\nfrom VLAN16 to VLAN11,\n\n78\n00:04:04.870 --> 00:04:08.470\nand then that should allow\nme to get over to NYEDGE1.\n\n79\n00:04:08.470 --> 00:04:09.790\nThat's not working.\n\n80\n00:04:09.790 --> 00:04:12.010\nBut the problem is most likely\nnot here on these guys.\n\n81\n00:04:12.010 --> 00:04:15.570\nWe can double check to be sure,\nbut it's most likely not there.\n\n82\n00:04:15.570 --> 00:04:18.990\nAll right, looking back on my server,\nI can see where I got to 192.168.16.3,\n\n83\n00:04:18.990 --> 00:04:25.040\nwhich is the core two switch, right,\nthat's the one that's active right now.\n\n84\n00:04:25.040 --> 00:04:26.600\nAnd then we died out right there.\n\n85\n00:04:26.600 --> 00:04:30.540\nAll right, so if I wanna jump over to core\nthree I can start troubleshooting there.\n\n86\n00:04:30.540 --> 00:04:33.240\nI can skip NYACCESS1.\n\n87\n00:04:33.240 --> 00:04:37.530\nAll right I can skip NYACCESS1 because\nI'm able to reach my default gateway, so\n\n88\n00:04:37.530 --> 00:04:38.960\nI know the problem is not on that switch.\n\n89\n00:04:38.960 --> 00:04:40.780\nAnd that's really important on the exam,\n\n90\n00:04:40.780 --> 00:04:44.500\nyou've got to be able to eliminate\ndevices so you don't waste time on them.\n\n91\n00:04:44.500 --> 00:04:48.260\nAnd I can jump up to CORE2 and\ntake a look at its configuration, and\n\n92\n00:04:48.260 --> 00:04:50.550\nsee where we go from there, all right.\n\n93\n00:04:50.550 --> 00:04:54.040\nSo let me just jump over to CORE2, and\n\n94\n00:04:54.040 --> 00:04:56.680\nwe'll start doing some\ninformation gathering here.\n\n95\n00:04:56.680 --> 00:05:01.730\nNow, CORE2 is part of an HSRP cluster,\nand so if I do a show standby for\n\n96\n00:05:01.730 --> 00:05:06.050\nvlan 16, that's the vlan\nthat our Cisco server is on.\n\n97\n00:05:06.050 --> 00:05:09.790\nAnd we can see that this guy is active for\n192.168.16.1.\n\n98\n00:05:09.790 --> 00:05:12.700\nSo it is what I'm using\nas the default gateway.\n\n99\n00:05:12.700 --> 00:05:14.950\nWhen that server goes out,\nthis is where it ends up.\n\n100\n00:05:16.070 --> 00:05:18.540\nAnd once it gets here\nwe're telling that router,\n\n101\n00:05:18.540 --> 00:05:23.750\nhey we need to get to 193.168.11.4, so\nit's doing a routing table look up.\n\n102\n00:05:23.750 --> 00:05:25.149\nAnd you can do a show ip route.\n\n103\n00:05:26.390 --> 00:05:27.750\nAnd filter down from 192.168.11.whatever.\n\n104\n00:05:27.750 --> 00:05:31.000\ni'll just leave it off.\n\n105\n00:05:31.000 --> 00:05:33.480\nAnd you can see the route there, or\n\n106\n00:05:33.480 --> 00:05:36.380\nI could have actually just done\na show ip route and punch in the IP.\n\n107\n00:05:36.380 --> 00:05:39.750\nThat gives you a little bit\nmore detailed information.\n\n108\n00:05:39.750 --> 00:05:41.300\nAnd we can see that we do have a route.\n\n109\n00:05:41.300 --> 00:05:44.680\nIn fact, it's not even a learn route,\nit's directly connected.\n\n110\n00:05:44.680 --> 00:05:50.360\nThis switch has an interface, which is\nthe VLAN11 interface right on that subnet.\n\n111\n00:05:50.360 --> 00:05:53.980\nAnd so that's why I'm able to get\nrouted from VLAN16 to VLAN11.\n\n112\n00:05:53.980 --> 00:05:56.320\nThis guy has an interface\nright on that network.\n\n113\n00:05:56.320 --> 00:06:01.470\nAnd if I do a show run for\ninterface VLAN11,\n\n114\n00:06:01.470 --> 00:06:04.830\nI can see the switch is\n192.168.11.3 on that network.\n\n115\n00:06:07.040 --> 00:06:10.910\nNow if I'm not positive\nthe routing is working fine,\n\n116\n00:06:10.910 --> 00:06:13.520\nI can always ping this IP and\nthat'll verify it right.\n\n117\n00:06:13.520 --> 00:06:19.730\nSo if I jump back to the server,\nand I know I can't ping.\n\n118\n00:06:20.870 --> 00:06:22.810\nOops, we'll just break out of that,\nthere we go.\n\n119\n00:06:22.810 --> 00:06:26.835\nI know I can't ping 192.168.11.4, cuz\nthat's what the troubleshooting ticket is,\n\n120\n00:06:26.835 --> 00:06:28.040\nright?\n\n121\n00:06:28.040 --> 00:06:29.680\nWe can't get to that.\n\n122\n00:06:29.680 --> 00:06:35.930\nBut if I try and ping .3, well that's\nthe other interface of the switch.\n\n123\n00:06:35.930 --> 00:06:42.810\nSo right there, what that tells me\nis that I can get to that VLAN.\n\n124\n00:06:42.810 --> 00:06:44.200\nI can get to 192.168.11.\n\n125\n00:06:44.200 --> 00:06:45.110\nWhatever.\n\n126\n00:06:45.110 --> 00:06:47.020\nBut for some reason, I can't get to .3.\n\n127\n00:06:47.020 --> 00:06:51.800\nSo, again, trying to eliminate devices,\nif I'm properly being routed, and\n\n128\n00:06:51.800 --> 00:06:57.520\nbeing deposited on VLAN 11,\nthen I should be able to get to NYEDGE1.\n\n129\n00:06:57.520 --> 00:07:01.680\nAt this point, I think we're either\ndealing with a problem on NYEDGE1,\n\n130\n00:07:01.680 --> 00:07:04.335\nor possibly this interface, right here.\n\n131\n00:07:04.335 --> 00:07:08.980\nFa1/0/1, that's where that NY Edge\nis plugged in to this switch.\n\n132\n00:07:08.980 --> 00:07:11.690\nWhat if it's not assigned to VLAN 11?\n\n133\n00:07:11.690 --> 00:07:15.090\nIf it's not on VLAN 11,\nthen I'm misnumbered and\n\n134\n00:07:15.090 --> 00:07:17.340\nI won't be able to get there,\nso that can be my problem.\n\n135\n00:07:17.340 --> 00:07:20.920\nWell, that's over on Core one, so I'm just\ngonna go doublecheck that interface real\n\n136\n00:07:20.920 --> 00:07:24.110\nquick before moving on to Edge 1 itself,\nall right?\n\n137\n00:07:24.110 --> 00:07:27.400\nSo let me jump over to Core one and\nwe'll do a little verification.\n\n138\n00:07:29.200 --> 00:07:35.040\nSo, I'm just going to jump in here, and\nI'll do a show run for interface fa1/0/1.\n\n139\n00:07:35.040 --> 00:07:40.780\nOh, well this will be a little\nbit trickier than I wanted.\n\n140\n00:07:40.780 --> 00:07:45.280\nSo, what I was expecting was to see\nthe interface be an access port and\n\n141\n00:07:45.280 --> 00:07:47.330\nbe assigned the VLAN 11..\n\n142\n00:07:47.330 --> 00:07:49.932\nInstead, I can see that it's a trunk port.\n\n143\n00:07:49.932 --> 00:07:53.040\nAll right, so\nswitchport trunk encapsulation dot1q, or\n\n144\n00:07:53.040 --> 00:07:55.460\nset up as an dot1q trunk.\n\n145\n00:07:55.460 --> 00:07:58.130\nAnd I've got VLAN's being\nallowed ten through 16.\n\n146\n00:07:58.130 --> 00:08:02.100\nNow that includes VLAN 11 and\nthat's the one I'm worried about, right.\n\n147\n00:08:02.100 --> 00:08:03.740\nSo at least there's that.\n\n148\n00:08:03.740 --> 00:08:08.050\nBut it is such a trunk, and\nwhat that means is that the router,\n\n149\n00:08:08.050 --> 00:08:12.640\nthis NYEDGE1 Is configured for\nrouter on a stick.\n\n150\n00:08:12.640 --> 00:08:15.840\nWith router on a stick, we take\na physical interface like GI0/0, and\n\n151\n00:08:15.840 --> 00:08:21.150\nwe divide it into virtual sub-interfaces,\nand assign each sub-interface to a VLAN.\n\n152\n00:08:21.150 --> 00:08:25.380\nSo we've got VLANs ten through\n16 crossing this line.\n\n153\n00:08:25.380 --> 00:08:30.150\nOn this end, I should expect to see\nsub-interfaces handling those seven VLANs.\n\n154\n00:08:30.150 --> 00:08:32.236\nWell, let's go take a look at that.\n\n155\n00:08:32.236 --> 00:08:34.140\nRouter on a stick is not\nthat hard to configure, but\n\n156\n00:08:34.140 --> 00:08:36.130\nit's not something people work with a lot.\n\n157\n00:08:36.130 --> 00:08:38.150\nAnd so if you don't work with it a lot,\n\n158\n00:08:38.150 --> 00:08:40.260\nit's easy to kind of\nforget the configuration.\n\n159\n00:08:40.260 --> 00:08:44.290\nAnd boy, we've got some nice\nlittle messages popping up here.\n\n160\n00:08:44.290 --> 00:08:47.220\nIt looks like we've got a serial\ninterface that is flapping.\n\n161\n00:08:47.220 --> 00:08:50.920\nWell our troubleshooting ticket is not\nbuilt on that serial interface, or\n\n162\n00:08:50.920 --> 00:08:52.280\nat least as far as I know.\n\n163\n00:08:52.280 --> 00:08:56.350\nLooks like that's just\ngonna keep flapping for us.\n\n164\n00:08:56.350 --> 00:09:00.250\nIf you ever bump into this in\nreal life for example, and\n\n165\n00:09:00.250 --> 00:09:03.700\nyou start getting really annoyed with\nmessages that are constantly popping up\n\n166\n00:09:03.700 --> 00:09:07.760\nlike this, there's a few things you can do\nto make life a little bit easier on you.\n\n167\n00:09:07.760 --> 00:09:10.780\nThe real problem with messages popping\nup like this is they interrupt while we\n\n168\n00:09:10.780 --> 00:09:11.510\ntype a command.\n\n169\n00:09:11.510 --> 00:09:14.010\nSo you might be typing, show version, and\n\n170\n00:09:14.010 --> 00:09:17.270\nas you start typing your command\nthe message pops up and interrupts you.\n\n171\n00:09:17.270 --> 00:09:20.260\nSo you can turn on synchronous logging,\nand that will make it basically\n\n172\n00:09:20.260 --> 00:09:24.450\nredraw your line every time you go to\ntype, and that can help out a little bit.\n\n173\n00:09:24.450 --> 00:09:29.730\nTo turn that on you just\nget into line con 0.\n\n174\n00:09:29.730 --> 00:09:30.900\nOops.\n\n175\n00:09:30.900 --> 00:09:32.680\nAnd yeah, see how it's like\ninterrupting me right here and\n\n176\n00:09:32.680 --> 00:09:37.550\nI can hit control R to redraw my line,\nor I can turn on synchronous logging.\n\n177\n00:09:37.550 --> 00:09:39.710\nAnd that'll happen automatically,\nso I'm just gonna come in here and\n\n178\n00:09:39.710 --> 00:09:42.390\nsay logging synchronous.\n\n179\n00:09:42.390 --> 00:09:45.430\nAnd now it will redraw my line\nevery time a message comes up.\n\n180\n00:09:45.430 --> 00:09:46.780\nI can also turn the messages off.\n\n181\n00:09:46.780 --> 00:09:49.860\nLike that serial interface, if I don't\nneed it I can just go and shut it down.\n\n182\n00:09:49.860 --> 00:09:55.050\nOr here in config,\nI could say no logging console, and that\n\n183\n00:09:55.050 --> 00:09:57.930\nwould stop it from logging to the console,\nand I wouldn't get the pop-up messages.\n\n184\n00:09:57.930 --> 00:10:00.960\nI'd just need to remember to turn\nthat back on before I was done.\n\n185\n00:10:00.960 --> 00:10:04.710\nBut for right now I'm just gonna leave\nit be, and kind of ignore the messages.\n\n186\n00:10:04.710 --> 00:10:07.300\nNow that I've got synchronous logging on,\nit'll redraw my lines for\n\n187\n00:10:07.300 --> 00:10:08.360\nme so I should be good.\n\n188\n00:10:09.382 --> 00:10:12.520\nAll right so, I was saying that I\nexpect to see some sub interfaces here.\n\n189\n00:10:12.520 --> 00:10:15.930\nI expect to see these setup for\neach of the different VLAN's, so\n\n190\n00:10:15.930 --> 00:10:18.360\nI'm just gonna do a show\nIP interface brief.\n\n191\n00:10:18.360 --> 00:10:22.051\nSo I can get an idea of\nwhat interfaces there are,\n\n192\n00:10:22.051 --> 00:10:25.780\nand sure enough GI 0\nslash 0 is divided up.\n\n193\n00:10:25.780 --> 00:10:26.560\nOkay.\n\n194\n00:10:26.560 --> 00:10:29.410\nI can see we've got 0.10, 0.11,\n0.12, all the way through 0.16.\n\n195\n00:10:29.410 --> 00:10:35.390\nIt looks like they've taken each VLAN and\ngiven it it's own sub interface.\n\n196\n00:10:35.390 --> 00:10:39.500\nNow remember, the sub interface\nnumber really doesn't matter.\n\n197\n00:10:39.500 --> 00:10:41.300\nYou can number it whatever you want.\n\n198\n00:10:41.300 --> 00:10:46.318\nThis could say gi0/0.16, but\nit could be the interface for VLAN 11.\n\n199\n00:10:46.318 --> 00:10:49.550\nRight?\nThe sub-interface number you make up\n\n200\n00:10:49.550 --> 00:10:53.550\nInside of each sub-interface, we have\nto tell it what VLAN it's attached to.\n\n201\n00:10:53.550 --> 00:10:56.520\nAnd, that's what really matters,\nall right?\n\n202\n00:10:56.520 --> 00:10:59.040\nSo, I could assume that .11 is for\nVLAN 11.\n\n203\n00:10:59.040 --> 00:11:01.160\nThat's what a normal\nnetwork admin would do.\n\n204\n00:11:01.160 --> 00:11:03.170\nOn the exam, don't assume anything.\n\n205\n00:11:03.170 --> 00:11:05.200\nWe need to verify the configuration.\n\n206\n00:11:05.200 --> 00:11:07.990\nSo, I'm gonna do a show running-config.\n\n207\n00:11:07.990 --> 00:11:10.230\nAnd, I'm just gonna pull up\nA full configuration on this one.\n\n208\n00:11:11.380 --> 00:11:13.800\nAnd as we start to look\nat that configuration,\n\n209\n00:11:13.800 --> 00:11:16.540\nwe'll get down to the interfaces\neventually, here we go.\n\n210\n00:11:16.540 --> 00:11:21.610\nAnd here is Gi/0/0.10 and see how it's\ngot this line, encapsulation dot1Q 10.\n\n211\n00:11:21.610 --> 00:11:23.730\nThat's the important line.\n\n212\n00:11:23.730 --> 00:11:27.390\nThat's what's telling us\nto do 80Q.1 trunking, and\n\n213\n00:11:27.390 --> 00:11:32.280\nthis interface is going to be responsible\nfor anything tagged for VLAN 10.\n\n214\n00:11:32.280 --> 00:11:34.630\nWell, I hope to see that for 11.\n\n215\n00:11:34.630 --> 00:11:35.590\nThere we go.\n\n216\n00:11:36.620 --> 00:11:40.530\nAnd, well, here's something kinda\nsticking out at us, isn't it?\n\n217\n00:11:40.530 --> 00:11:42.230\nencapsulation dot1Q 111.\n\n218\n00:11:42.230 --> 00:11:42.730\nRight?\n\n219\n00:11:44.160 --> 00:11:49.370\nThe sub interface is .11, but\nthe encapsulation is set to 111.\n\n220\n00:11:49.370 --> 00:11:54.140\nThis is set to handle traffic for\nVLAN 111, not VLAN 11.\n\n221\n00:11:54.140 --> 00:11:58.240\nAnd this is the IP that I'm trying to\nping, since it's on the wrong subnet,\n\n222\n00:11:58.240 --> 00:12:00.740\nI'm not gonna be able to\ncommunicate to it, right?\n\n223\n00:12:00.740 --> 00:12:02.560\nAnd it's not that\nthe subnet mask is wrong,\n\n224\n00:12:02.560 --> 00:12:05.980\nit's VLANed into the wrong subnet, right?\n\n225\n00:12:05.980 --> 00:12:09.770\nSo Although this looked like\na routing issue at first,\n\n226\n00:12:09.770 --> 00:12:11.420\nit actually turned out to be layer two,\nright.\n\n227\n00:12:11.420 --> 00:12:12.670\nWe're just on the wrong vlan,\n\n228\n00:12:12.670 --> 00:12:16.280\nand we need to fix it right here so\nthat's what we'll do.\n\n229\n00:12:16.280 --> 00:12:22.744\nI'm gonna go ahead and get into my\nconfig and get into interface gi0/0.11.\n\n230\n00:12:22.744 --> 00:12:26.860\nAnd I'll just tell it\nencapsulation dot1Q 11.\n\n231\n00:12:26.860 --> 00:12:30.400\nAnd that's gonna shift it from\nvlan 111 over to vlan 11.\n\n232\n00:12:30.400 --> 00:12:31.020\nThere we go.\n\n233\n00:12:31.020 --> 00:12:36.130\nAnd actually it looks like\nHSRP is kicking up on that.\n\n234\n00:12:36.130 --> 00:12:38.530\nI wasn't paying attention earlier, but\n\n235\n00:12:38.530 --> 00:12:41.650\nI gues HSRP,\nyep it is configured on these guys.\n\n236\n00:12:41.650 --> 00:12:44.990\nSo we should be good there.\n\n237\n00:12:44.990 --> 00:12:46.430\nAnd I'm going to give it just a second,\n\n238\n00:12:46.430 --> 00:12:48.970\nbecause you know how spanning tree\ncan be on some of these things.\n\n239\n00:12:48.970 --> 00:12:53.010\nThat it can take a moment for\nan interface to come all the way up.\n\n240\n00:12:53.010 --> 00:12:57.840\nAnd we'll just make sure that\nthat interface does actually\n\n241\n00:12:57.840 --> 00:13:02.690\nchange to be up, which it is, and\nlet's go see if that fixed our problem.\n\n242\n00:13:02.690 --> 00:13:08.430\nSo I'll jump back over to our server,\nand I was unable to ping .4 earlier,\n\n243\n00:13:08.430 --> 00:13:12.820\nand if I try now, now we're in business.\n\n244\n00:13:12.820 --> 00:13:15.950\nSo this one turned out\nto be router on a stick,\n\n245\n00:13:15.950 --> 00:13:18.550\nin this case it really wasn't\nthat bad of a problem, right?\n\n246\n00:13:18.550 --> 00:13:20.990\nWe had to track down the possible causes,\nand\n\n247\n00:13:20.990 --> 00:13:23.490\nI kinda stepped through each of the switch\nuntil I got to the destination.\n\n248\n00:13:23.490 --> 00:13:25.720\nWe could've done it in reverse,\nI could've started at the destination and\n\n249\n00:13:25.720 --> 00:13:27.740\nwe would've found this problem right off,\nright?\n\n250\n00:13:27.740 --> 00:13:31.790\nBut you never know where the problem is\ngonna be, so really there's no difference.\n\n251\n00:13:31.790 --> 00:13:34.310\nWhether you start at the beginning or\nthe end of the communication, one way or\n\n252\n00:13:34.310 --> 00:13:35.970\nanother you'll find it.\n\n253\n00:13:35.970 --> 00:13:38.070\nHere, once we made it to NYEDGE1,\n\n254\n00:13:38.070 --> 00:13:40.810\nwe were able to recognize that\ninterface was configured wrong.\n\n255\n00:13:40.810 --> 00:13:42.960\nWe fixed the router on\na stick configuration.\n\n256\n00:13:42.960 --> 00:13:45.850\nAnd we were in business, so\nnot that bad on this one.\n\n257\n00:13:45.850 --> 00:13:48.400\nAll right, well that's about it for\nissue number four.\n\n258\n00:13:48.400 --> 00:13:50.700\nStay tuned, got more issues coming up.\n\n259\n00:13:50.700 --> 00:13:53.340\nSome of them easy, some of them hard,\ndefinitely all entertaining.\n\n260\n00:13:53.340 --> 00:13:55.927\nSo stay tuned, I'll see you there.\n\n261\n00:13:55.927 --> 00:14:01.489\n[MUSIC]\n\n",
          "vimeoId": "149155785"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #5` from set #1. The trouble ticket states that \"The route to network 10.6.1.1 is not in the routing table of any device. This route should originate from OSPF Area 61 which is connected to NYEDGE2.\"",
          "length": "789",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-5-set_1_issue_5-113015-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-5-set_1_issue_5-113015-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-5-set_1_issue_5-113015-1-sm.jpg",
          "title": "Set 1 Issue 5",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:07.499\n[MUSIC]\n\n2\n00:00:07.499 --> 00:00:10.684\nAll right it is time for Set 1 Issue 5.\n\n3\n00:00:10.684 --> 00:00:12.422\nWe're gonna jump right\nback into troubleshooting.\n\n4\n00:00:12.422 --> 00:00:15.030\nThis one's going to be a lot of\nfun because this one is definitely\n\n5\n00:00:15.030 --> 00:00:15.955\na routing issue,\n\n6\n00:00:15.955 --> 00:00:18.800\nit's right there in the troubleshooting\nticketfor us, let's read it.\n\n7\n00:00:18.800 --> 00:00:23.705\nThe troubleshooting ticket\nbasically says the route to network\n\n8\n00:00:23.705 --> 00:00:27.420\n10.61.1.1 is not in the routing\ntable of any devices.\n\n9\n00:00:27.420 --> 00:00:32.800\nThis route should originate from OSPF Area\n61, which is connected to NYEDGE2.\n\n10\n00:00:32.800 --> 00:00:37.240\nSo up until now, everything that we've had\nhas really turned out to be a layer 1 or\n\n11\n00:00:37.240 --> 00:00:38.750\nlayer 2 issue.\n\n12\n00:00:38.750 --> 00:00:41.200\nThis is gonna be a good one\nbecause it's going to be routing.\n\n13\n00:00:41.200 --> 00:00:44.050\nNow unfortunately because it is routing,\nit's a lot of stuff we haven't seen yet.\n\n14\n00:00:44.050 --> 00:00:49.110\nSo let's jump over to our diagram and\nkinda get a handle on what is what.\n\n15\n00:00:49.110 --> 00:00:52.890\nFirst off it's telling us that this route\nis not showing up in the routing table of\n\n16\n00:00:52.890 --> 00:00:53.750\nany of our devices.\n\n17\n00:00:53.750 --> 00:00:55.690\nNow, what are our devices?\n\n18\n00:00:55.690 --> 00:01:00.980\nWell, in this network,\nour devices are NYWAN1, NYEDGE1,\n\n19\n00:01:00.980 --> 00:01:03.890\nNYCORE1, NYCORE2, and NYEDGE2.\n\n20\n00:01:03.890 --> 00:01:05.970\nThese five devices right here.\n\n21\n00:01:05.970 --> 00:01:09.049\nAnd we've got a problem with the routing\ntable not containing this one\n\n22\n00:01:09.049 --> 00:01:09.945\nparticular route.\n\n23\n00:01:09.945 --> 00:01:14.471\nNow, the route in question,\n10.61.1.1, everything we've seen so\n\n24\n00:01:14.471 --> 00:01:19.540\nfar has been 192.168.something,\nright, those are our local networks.\n\n25\n00:01:19.540 --> 00:01:20.960\nThis one's outside of the network.\n\n26\n00:01:20.960 --> 00:01:22.940\nAnd so we need to figure out where\nit's supposed to be coming from, and\n\n27\n00:01:22.940 --> 00:01:30.230\nit says here this route should originate\nfrom OSPF Area 61, which is right up here.\n\n28\n00:01:30.230 --> 00:01:35.430\nI can see I've got ISP1 and\nISP2 that are both connected to NYEDGE2,\n\n29\n00:01:35.430 --> 00:01:38.410\nand that's where this route\nis supposed to originate.\n\n30\n00:01:38.410 --> 00:01:42.328\nAnd in fact if I look at my diagram here,\nright there is\n\n31\n00:01:42.328 --> 00:01:47.500\n10.61.1.1 coming from OSPF Area 61,\nthat's that network right there.\n\n32\n00:01:47.500 --> 00:01:50.050\nSo, it's supposed to be coming\nfrom one of these two guys.\n\n33\n00:01:50.050 --> 00:01:52.640\nNow, do I care which one it comes from?\n\n34\n00:01:52.640 --> 00:01:55.440\nNot really, it could come from\neither one of these, that's fine.\n\n35\n00:01:55.440 --> 00:01:58.960\nBut the point is that\nit's coming in NYEDGE2.\n\n36\n00:01:58.960 --> 00:02:03.890\nThat means that NYEDGE2 is\nsupposed to be allowing routes\n\n37\n00:02:03.890 --> 00:02:07.280\nto pass from Area 61 into Area 0.\n\n38\n00:02:07.280 --> 00:02:10.950\nWe've got OSPF in multiple areas, right?\n\n39\n00:02:10.950 --> 00:02:14.150\nNow in my mind I start trying to\nthink of what could cause this route\n\n40\n00:02:14.150 --> 00:02:15.850\nnot to come over, right?\n\n41\n00:02:15.850 --> 00:02:18.647\nThere's easy things,\nthe network could be down, right?\n\n42\n00:02:18.647 --> 00:02:20.943\nWhatever router's connected to\nthat network could be offline and\n\n43\n00:02:20.943 --> 00:02:22.090\nthat's that, right?\n\n44\n00:02:22.090 --> 00:02:24.770\nI don't think that's going\nto be the case here because\n\n45\n00:02:24.770 --> 00:02:27.260\nwe can't control the ISP routers and\n\n46\n00:02:27.260 --> 00:02:30.490\nso if that was the case we wouldn't\nbe able to fix the problem, right?\n\n47\n00:02:30.490 --> 00:02:32.810\nAnd they expect you to fix\nthe problem on the exam.\n\n48\n00:02:32.810 --> 00:02:35.091\nIn real life it very well could\nbe that one of those guys,\n\n49\n00:02:35.091 --> 00:02:36.460\njust the router is down, right?\n\n50\n00:02:36.460 --> 00:02:41.018\nBut assuming the route is up, NYEDGE2 is\nsupposed to be learning the route and\n\n51\n00:02:41.018 --> 00:02:43.570\nthen advertising it to other people.\n\n52\n00:02:43.570 --> 00:02:45.410\nSo I need to find out why\nthat's not happening,\n\n53\n00:02:45.410 --> 00:02:48.740\nwhy isn't this particular\nrouter advertising the routes?\n\n54\n00:02:48.740 --> 00:02:51.370\nNow, it may be that it's not\nlearning it in the first place.\n\n55\n00:02:51.370 --> 00:02:55.510\nWe could have a prefix list or an access\ncontrol list, we could have authentication\n\n56\n00:02:55.510 --> 00:02:58.280\nturned on for OSPF and\nthese guys are failing authentication.\n\n57\n00:02:58.280 --> 00:03:01.090\nThere's all sorts of OSPF type issues\nthat could be causing that route\n\n58\n00:03:01.090 --> 00:03:01.632\nnot to come in, all right.\n\n59\n00:03:02.940 --> 00:03:07.820\nAnd then once it comes in,\nNYEDGE2 is supposed to advertise\n\n60\n00:03:07.820 --> 00:03:12.120\nthat out to everybody else in Area 0,\nthey're supposed to learn it, okay?\n\n61\n00:03:12.120 --> 00:03:17.150\nAnd those area numbers are important\nbecause if this is area 61 up here, and\n\n62\n00:03:17.150 --> 00:03:18.742\nthis down here was, say,\n\n63\n00:03:18.742 --> 00:03:22.140\nArea 1, you wouldn't be allowed to\nadvertise the routes between it.\n\n64\n00:03:22.140 --> 00:03:26.140\nYou can only advertise routes between\none area and Area 0, right, well in this\n\n65\n00:03:26.140 --> 00:03:29.350\ncase I have Area 0, so I'm fine,\nthat's not gonna be our issue, but it is\n\n66\n00:03:29.350 --> 00:03:33.036\nsomething to remember as you troubleshoot\nthese types of problems on the exam.\n\n67\n00:03:33.036 --> 00:03:37.120\nSo, this one's gonna be kind of easy in a\nway because I know exactly where to start.\n\n68\n00:03:37.120 --> 00:03:41.170\nI need to start right here on NYEDGE2\nbecause it's the responsible party,\n\n69\n00:03:41.170 --> 00:03:44.840\nit should be learning the routes and\nadvertising it into my OSPF Area.\n\n70\n00:03:44.840 --> 00:03:48.817\nSo I'm gonna jump over the NYEDGE2 and\nsee what's up, all right?\n\n71\n00:03:48.817 --> 00:03:56.110\nNow on NYEDGE2 I'm just going to\nenable and do a show ip route.\n\n72\n00:03:56.110 --> 00:03:59.880\nI'm gonna take a look at its routing\ntable and see what's learning,\n\n73\n00:03:59.880 --> 00:04:02.660\nand in fact, if the routing table is big,\nI might need to filter that.\n\n74\n00:04:02.660 --> 00:04:05.040\nIn my case, [LAUGH] the routing\ntable is very, very small.\n\n75\n00:04:05.040 --> 00:04:07.490\nLooking at the routing table on NYEDGE2,\n\n76\n00:04:07.490 --> 00:04:10.560\nI see something that is kind\nof indicative of our problem.\n\n77\n00:04:10.560 --> 00:04:15.350\nWe're supposed to be\nparticipating in OSPF Area 0, and\n\n78\n00:04:15.350 --> 00:04:18.420\nwe're supposed to be participating\nin OSPF Area 61, right?\n\n79\n00:04:18.420 --> 00:04:23.210\nThis router is a border router,\nan ABR, an area border router.\n\n80\n00:04:23.210 --> 00:04:26.730\nAnd so it should be participating both\nwhich means I should be learning routes,\n\n81\n00:04:26.730 --> 00:04:30.230\nI should be learning all these routes\nover here in this table, and I'm not.\n\n82\n00:04:30.230 --> 00:04:34.840\nIn fact, when I look at that routing\ntable, it's a little bit sparse, right,\n\n83\n00:04:34.840 --> 00:04:36.890\nthere's no OSPF routes.\n\n84\n00:04:36.890 --> 00:04:38.810\nI've got some directly\nconnected routes and that's it.\n\n85\n00:04:38.810 --> 00:04:41.410\nI'm not learning anything\nabout these other networks.\n\n86\n00:04:41.410 --> 00:04:47.569\nNow that's really odd because I know even\non our LAN, there's 192.168.11, .13, .16,\n\n87\n00:04:47.569 --> 00:04:52.323\nright, all those other networks that are\nout there, I'm not seeing any of those.\n\n88\n00:04:52.323 --> 00:04:54.670\nI should be learning about them,\nand I'm not.\n\n89\n00:04:54.670 --> 00:04:56.440\nSo it could be that we're\nnot even running OSPF,\n\n90\n00:04:56.440 --> 00:04:58.460\nthat would be an interesting problem.\n\n91\n00:04:58.460 --> 00:05:04.020\nWe can verify that real quick with\na show ip protocols and well,\n\n92\n00:05:04.020 --> 00:05:05.970\nwe are, we're running OSPF, right?\n\n93\n00:05:05.970 --> 00:05:10.473\nNow, my protocol, it says ospf 100,\nwell 100 is just the process number,\n\n94\n00:05:10.473 --> 00:05:13.760\nI don't really care about that,\nbut I do care about areas.\n\n95\n00:05:13.760 --> 00:05:19.033\nAnd looking down here I can see\nI've got 172.14.0.0 set for\n\n96\n00:05:19.033 --> 00:05:22.340\nArea 61, 192.168.12.0 for\n\n97\n00:05:22.340 --> 00:05:27.272\nArea 0, and 192.168.255.0 set for\nArea 0 also.\n\n98\n00:05:27.272 --> 00:05:31.326\nSo I've got interfaces in Area 0 and\nArea 61, I'm a border route,\n\n99\n00:05:31.326 --> 00:05:33.123\nthat's kind of what I expect.\n\n100\n00:05:33.123 --> 00:05:36.099\nNow, I don't know what interfaces\nthese are assigned to, so\n\n101\n00:05:36.099 --> 00:05:37.710\nI'm gonna do a show ip int brief.\n\n102\n00:05:39.330 --> 00:05:40.549\nTry and get an idea of that.\n\n103\n00:05:40.549 --> 00:05:45.981\nSo looking at my interfaces\nI've got a serial link,\n\n104\n00:05:45.981 --> 00:05:50.310\nI'm gonna ignore that one for right now.\n\n105\n00:05:50.310 --> 00:05:53.197\nBut my other interfaces\nGi0/1 is 172.14.0.2 and\n\n106\n00:05:53.197 --> 00:05:55.760\nup here I can see 172.14.0 is set for\narea 61.\n\n107\n00:05:55.760 --> 00:05:58.082\nSo that's Gi0/1.\n\n108\n00:05:58.082 --> 00:06:01.840\nIf I go to my diagram,\nthat's this interface right here.\n\n109\n00:06:01.840 --> 00:06:05.807\nSo that interface is associated\nwith Area 61 like I expect.\n\n110\n00:06:05.807 --> 00:06:11.863\nAnd then down here I've got Gi0/0 which\nis pointing to my internal network and\n\n111\n00:06:11.863 --> 00:06:18.290\nif I look, 0/0 is 192.168.12.5,\nso it's on VLAN 12 apparently.\n\n112\n00:06:19.300 --> 00:06:21.210\nAnd that is set for Area 0.\n\n113\n00:06:21.210 --> 00:06:27.790\nSo it looks like my OSPF configuration\nis good, but I'm not seeing any routes.\n\n114\n00:06:27.790 --> 00:06:29.890\nNow, why wouldn't I see routes?\n\n115\n00:06:29.890 --> 00:06:33.570\nWell, it could be that nobody\nout there is running OSPF.\n\n116\n00:06:33.570 --> 00:06:37.070\nMaybe I'm the only person running OSPF and\nnobody else is.\n\n117\n00:06:37.070 --> 00:06:38.940\nAll right,\nfew ways that we could verify that.\n\n118\n00:06:38.940 --> 00:06:42.709\nWe could do a show ip ospf neighbor,\nright?\n\n119\n00:06:42.709 --> 00:06:44.707\nWe'll see if there's any\nneighbors that are out there.\n\n120\n00:06:44.707 --> 00:06:48.990\nAnd I don't have any neighbors,\nwell, that's not good.\n\n121\n00:06:48.990 --> 00:06:51.950\nIf we expect to learn routes,\nwe probably need some neighbors, right?\n\n122\n00:06:51.950 --> 00:06:55.420\nAnd if I don't have any neighbors to find,\nwell I'm not gonna learn any routes.\n\n123\n00:06:55.420 --> 00:06:57.860\nSo that's gonna be an issue, right?\n\n124\n00:06:57.860 --> 00:07:00.600\nIt could be that nobody\nelse is running OSPF, or\n\n125\n00:07:00.600 --> 00:07:02.800\nit could be that my interfaces are down,\nright?\n\n126\n00:07:02.800 --> 00:07:05.580\nMaybe I've got interfaces that aren't\nfunctional, I know they are, right?\n\n127\n00:07:05.580 --> 00:07:08.330\nI can see up here that I've got\na bunch of up ups and stuff, so\n\n128\n00:07:08.330 --> 00:07:12.690\nI know I'm okay, but\nthat's a possible scenario, right?\n\n129\n00:07:12.690 --> 00:07:14.660\nI could test this out\na little bit further.\n\n130\n00:07:14.660 --> 00:07:19.253\nSo if I take NYEDGE2 here and\ntest out to ISP1 and ISP2,\n\n131\n00:07:19.253 --> 00:07:24.914\nthey've given me the IPs,\nright, 172.14.0.3 and .4.\n\n132\n00:07:24.914 --> 00:07:28.180\nI could try and ping those and\nsee how far I get.\n\n133\n00:07:28.180 --> 00:07:30.710\nSo I'm just going to ping\nout to that .3 and .4.\n\n134\n00:07:30.710 --> 00:07:37.678\nSo right here from NYEDGE2 I should\njust be able to ping to 172.14.0.3,\n\n135\n00:07:37.678 --> 00:07:41.480\nand .4, I've got connectivity, right?\n\n136\n00:07:41.480 --> 00:07:44.290\nIf I didn't have connectivity, if I\ncouldn't even get to those other systems,\n\n137\n00:07:44.290 --> 00:07:46.630\nthen I'd have a problem there,\nbut I can get to them.\n\n138\n00:07:46.630 --> 00:07:50.270\nSupposedly, they're running OSPF,\nsupposedly I'm running OSPF,\n\n139\n00:07:50.270 --> 00:07:52.300\nand I'm not seeing them, all right.\n\n140\n00:07:52.300 --> 00:07:54.650\nThey're not in my neighbor table but\nI can ping them, so\n\n141\n00:07:54.650 --> 00:07:56.420\nit's not a reachability issue.\n\n142\n00:07:56.420 --> 00:07:57.825\nSo what else is it from there?\n\n143\n00:07:57.825 --> 00:08:02.300\nWell, maybe they aren't set up for\nOSPF, right?\n\n144\n00:08:02.300 --> 00:08:03.440\nWe can figure that out.\n\n145\n00:08:03.440 --> 00:08:08.066\nIf you do a debug you can\ndo a quick debg ip ospf.\n\n146\n00:08:08.066 --> 00:08:12.882\nAnd then there's a few different, oops,\nI guess I have to spell debug right.\n\n147\n00:08:12.882 --> 00:08:16.450\ndebug ip ospf, and there's a few\ndifferent things we can debug with OSPF,\n\n148\n00:08:16.450 --> 00:08:19.050\npacket is one of the most\nuseful ones right there.\n\n149\n00:08:19.050 --> 00:08:22.287\nBecause regardless of whether OSPF\nis configured right or wrong,\n\n150\n00:08:22.287 --> 00:08:25.716\nyou should at least see packets coming\nin and out from that other host.\n\n151\n00:08:25.716 --> 00:08:30.369\nAnd so I could do a debug ip ospf packet\njust to see whether or not any packets\n\n152\n00:08:30.369 --> 00:08:35.774\nare coming in, and ospf, well it normally\nresponds a little faster than this, oh, I\n\n153\n00:08:35.774 --> 00:08:41.280\nmight have console logging turned off, so\nlet's jump in here and do logging console.\n\n154\n00:08:42.820 --> 00:08:45.700\nOr if you're SSHD, and you might\nhave terminal monitor turned off, so\n\n155\n00:08:45.700 --> 00:08:47.220\nyou just do terminal monitor.\n\n156\n00:08:47.220 --> 00:08:49.910\nAnd so we should start to see\nsome messages, there we go.\n\n157\n00:08:49.910 --> 00:08:53.450\nAnd I just saw an OSPF-100 PAK come in,\nright?\n\n158\n00:08:53.450 --> 00:08:56.780\nOSPF is the protocol,\n100 is my process id.\n\n159\n00:08:56.780 --> 00:08:59.330\nAnd then PAK letting you know\nthis is packet debugging.\n\n160\n00:08:59.330 --> 00:09:04.920\nAnd then I can see Drop packet,\nOSPF not running or passive.\n\n161\n00:09:04.920 --> 00:09:07.420\nWell, now there's a good indicator.\n\n162\n00:09:07.420 --> 00:09:10.050\nOSPF not running,\nI know that's not true, I am running it,\n\n163\n00:09:10.050 --> 00:09:11.990\nI saw it with show ip protocols.\n\n164\n00:09:11.990 --> 00:09:15.700\nOr passive, I might have\na passive interface configured.\n\n165\n00:09:15.700 --> 00:09:18.445\nIf I've got a passive interface\nconfigured, I might be receiving those\n\n166\n00:09:18.445 --> 00:09:20.878\nroutes from the other guys and\njust throwing them away, right?\n\n167\n00:09:20.878 --> 00:09:23.181\nThrowing them away because I\ndon't need them or whatever, so\n\n168\n00:09:23.181 --> 00:09:24.610\nI'll bet that's what my problem is.\n\n169\n00:09:24.610 --> 00:09:28.810\nSo I'm gonna do a quick undebug all and\n\n170\n00:09:28.810 --> 00:09:34.776\njust get that turned off and\nI'm gonna turn off console logging also.\n\n171\n00:09:34.776 --> 00:09:40.230\nAll right, and now I wanna check and\nsee if I've got a passive interface,\n\n172\n00:09:40.230 --> 00:09:42.210\nand the easiest way to do that,\nthere's a few ways.\n\n173\n00:09:42.210 --> 00:09:47.120\nIf you do show ip protocols,\nit's actually in there,\n\n174\n00:09:47.120 --> 00:09:48.650\nwhere you can see passive interfaces,\n\n175\n00:09:48.650 --> 00:09:53.620\nand sure enough, I do right on Gi0/1, so\nI've got a little bit of a problem there.\n\n176\n00:09:53.620 --> 00:09:55.550\nBut I could have also seen\nit in the configuration.\n\n177\n00:09:55.550 --> 00:09:58.250\nIf I do a show running-config and\nI look for\n\n178\n00:09:58.250 --> 00:10:03.940\nthe OSPF section, right in there you'll\nsee that passive interface, all right?\n\n179\n00:10:03.940 --> 00:10:08.870\nNow it's not uncommon to have a passive\ninterface when you're pointing to an ISP.\n\n180\n00:10:08.870 --> 00:10:12.400\nCuz we don't normally want the ISP to\nbe able to propagate routes to us or\n\n181\n00:10:12.400 --> 00:10:14.430\nwe don't want to send them routes.\n\n182\n00:10:14.430 --> 00:10:16.510\nBut in this case I need\nto learn those routes.\n\n183\n00:10:16.510 --> 00:10:19.250\nAnd having a passive interface\nis gonna stop that from working.\n\n184\n00:10:19.250 --> 00:10:21.740\nSo if I want to learn routes on the ISP,\nbut\n\n185\n00:10:21.740 --> 00:10:25.240\nI still want security, what I need to\ndo is couple this to the route map.\n\n186\n00:10:25.240 --> 00:10:29.460\nI can learn routes but not advertise\nroutes, or advertise only specific routes.\n\n187\n00:10:29.460 --> 00:10:30.870\nYou can do all sorts of things, but\n\n188\n00:10:30.870 --> 00:10:32.670\nthat's not what the troubleshooting's\nticket's asking us to do.\n\n189\n00:10:32.670 --> 00:10:35.590\nIt's just asking us to\nlearn from this route so\n\n190\n00:10:35.590 --> 00:10:39.340\nwe're just gonna turn off that passive\ninterface and that should fix this, easy.\n\n191\n00:10:39.340 --> 00:10:41.360\nSo let's go see if it\nis actually that easy.\n\n192\n00:10:41.360 --> 00:10:44.920\nSo I'm gonna get into my configuration and\nrouter ospf 100.\n\n193\n00:10:44.920 --> 00:10:49.931\nI'll do a no passive-interface gi0/1.\n\n194\n00:10:49.931 --> 00:10:54.080\nAnd now I should start receiving those\ncommunications from the other side and\n\n195\n00:10:54.080 --> 00:10:56.010\nI should start learning those routes.\n\n196\n00:10:56.010 --> 00:11:00.150\nSo, we'll find out right here\nif we wait just a moment.\n\n197\n00:11:00.150 --> 00:11:02.730\nAnd OSPF is fairly fast, but\n\n198\n00:11:02.730 --> 00:11:08.390\nI'm gonna just monitor show ip ospf\nneighbor and I've got some neighbors.\n\n199\n00:11:08.390 --> 00:11:12.390\nAnd I'm gonna wait for them to show full,\nwhich they already are, but when they fire\n\n200\n00:11:12.390 --> 00:11:17.050\nup you might see ex start or something\nelse as it goes through the negotiations.\n\n201\n00:11:17.050 --> 00:11:20.330\nBut once you're full you should\nbe exchanging networks with them.\n\n202\n00:11:20.330 --> 00:11:25.710\nAnd if I do a show ip route, hopefully\nI'll see some OSPF routes and I do.\n\n203\n00:11:25.710 --> 00:11:29.640\nAnd there's 10.61.1.1 in my routing table.\n\n204\n00:11:29.640 --> 00:11:33.010\nSo passive interface here was\nblocking those communications,\n\n205\n00:11:33.010 --> 00:11:34.670\nI saw it with the debug.\n\n206\n00:11:34.670 --> 00:11:36.970\nI could have seen it if I\nhad just scanned the config,\n\n207\n00:11:36.970 --> 00:11:39.690\nprobably would have been faster that way,\nbut the debug turned up if you\n\n208\n00:11:39.690 --> 00:11:42.130\nknow the command to run you\ncan find it really quick.\n\n209\n00:11:42.130 --> 00:11:45.842\nNow normally at this point, I would\nstart taking a look at my other devices,\n\n210\n00:11:45.842 --> 00:11:48.511\nright, because the troubleshooting\nquestion said,\n\n211\n00:11:48.511 --> 00:11:52.993\nthe route to network 10.61.1.1 is not in\nthe routing table of any device, right?\n\n212\n00:11:52.993 --> 00:11:55.909\nSo when you say any device to me that\nmakes me think of all the devices in\n\n213\n00:11:55.909 --> 00:11:58.547\nthe network and so I'd run and\nstart checking the other ones.\n\n214\n00:11:58.547 --> 00:12:02.252\nBut in this case I'm gonna hold off on\ndoing that and the reason is we're gonna\n\n215\n00:12:02.252 --> 00:12:05.788\nsee that we still have two more\ntroubleshooting issues in this set, one of\n\n216\n00:12:05.788 --> 00:12:09.860\nwhich is actually stopping this route\nfrom making it to the other devices too.\n\n217\n00:12:09.860 --> 00:12:11.520\nSo I don't wanna overlap my issues and\n\n218\n00:12:11.520 --> 00:12:14.430\nkinda wrap them all up in one, but we'll\nget a chance to see that in a moment.\n\n219\n00:12:14.430 --> 00:12:18.190\nBut for now we've made sure that\nthat route is coming from the ISP,\n\n220\n00:12:18.190 --> 00:12:20.570\ncoming into the edge router, and\n\n221\n00:12:20.570 --> 00:12:24.570\nit's now available to Area 0 assuming\nthe other devices are working properly.\n\n222\n00:12:24.570 --> 00:12:26.000\nWe'll see that some of them aren't but\n\n223\n00:12:26.000 --> 00:12:28.130\nthat's kinda the nature\nof troubleshooting.\n\n224\n00:12:28.130 --> 00:12:31.060\nBut for now we've solved this problem,\nturned out to be a passive interface,\n\n225\n00:12:31.060 --> 00:12:32.410\nwe got it squared away.\n\n226\n00:12:32.410 --> 00:12:34.760\nNow we're learning those routes and\nwe're back in business.\n\n227\n00:12:34.760 --> 00:12:38.410\nNow just keep in mind in real life land\nthat you might wanna go a step further and\n\n228\n00:12:38.410 --> 00:12:42.750\nput a route map in place in between you\nand the ISP, so you can control what\n\n229\n00:12:42.750 --> 00:12:46.010\nroutes they're allowed to tell you and\nwhat routes you're gonna tell them.\n\n230\n00:12:46.010 --> 00:12:48.520\nA great way to do that and\nstill maintain security.\n\n231\n00:12:48.520 --> 00:12:51.470\nSome people don't like to run\ndynamic protocols with an ISP\n\n232\n00:12:51.470 --> 00:12:52.710\nlike this because of that.\n\n233\n00:12:52.710 --> 00:12:55.980\nIt's not that you can't, it's just\nthat you've gotta take precautions,\n\n234\n00:12:55.980 --> 00:12:56.960\nso not such a bad thing.\n\n235\n00:12:56.960 --> 00:12:59.880\nAll right, well that wraps it up for\nthis one, stay tuned, we\n\n236\n00:12:59.880 --> 00:13:03.782\nstill have two more troubleshooting issues\nin this set and they'll be coming up next.\n\n237\n00:13:03.782 --> 00:13:09.519\n[SOUND]\n\n",
          "vimeoId": "149155809"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #6` from set #1. The trouble ticket states that \"The WAN conection between NYEDGE1 and NYEDGE2 is not up. The physical interface is up, however the line protocol is down and the console shows that the interface is flapping.\"",
          "length": "737",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-6-set_1_issue_6-113015-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-6-set_1_issue_6-113015-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-6-set_1_issue_6-113015-1-sm.jpg",
          "title": "Set 1 Issue 6",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:07.362\n[MUSIC]\n\n2\n00:00:07.362 --> 00:00:11.930\nAll right, it's time to take a look at\ntroubleshooting Set 1, Issue number 6.\n\n3\n00:00:11.930 --> 00:00:15.160\nAnd on this one, we're gonna nice little\nbreak that we're not gonna do a lot of\n\n4\n00:00:15.160 --> 00:00:16.820\nhunting and gathering on this one.\n\n5\n00:00:16.820 --> 00:00:20.020\nWe've got a problem that exists\nbetween two particular routers.\n\n6\n00:00:20.020 --> 00:00:22.750\nLooks like a WAN link is down, the\ntroubleshooting ticket reads like this.\n\n7\n00:00:22.750 --> 00:00:28.490\nIt says, the WAN connection between\nNYEDGE 1 and NYEDGE 2 is not up.\n\n8\n00:00:28.490 --> 00:00:30.170\nThe physical interface is up.\n\n9\n00:00:30.170 --> 00:00:31.680\nHowever, the line protocol is down and\n\n10\n00:00:31.680 --> 00:00:34.880\nthe console shows that\nthe interface is flapping.\n\n11\n00:00:34.880 --> 00:00:38.450\nSo we've got a serial interface that's\ngoing up, down, up down over and\n\n12\n00:00:38.450 --> 00:00:39.420\nover and over again.\n\n13\n00:00:39.420 --> 00:00:41.500\nWe need to find out why and\nget it resolved.\n\n14\n00:00:41.500 --> 00:00:44.580\nWell, before we do that,\nlet's jump into our diagram and\n\n15\n00:00:44.580 --> 00:00:47.400\nkind of look at our map of the network and\nget an idea of where this problem is.\n\n16\n00:00:47.400 --> 00:00:51.330\nSo our issue is right here in\nbetween NYEDGE1 and NYEDGE2.\n\n17\n00:00:51.330 --> 00:00:57.090\nAnd you'll see on both of them, it's\nSer0/0/0, that'll make life easy on us.\n\n18\n00:00:57.090 --> 00:01:00.700\nAnd it's a point-to-point WAN link,\nand it's going up, down.\n\n19\n00:01:00.700 --> 00:01:03.270\nNow, with a point-to-point WAN link,\n\n20\n00:01:03.270 --> 00:01:07.820\nit's typically always going to be up, but\nthere's certain things that can go wrong.\n\n21\n00:01:07.820 --> 00:01:10.000\nWhen you've got a serial link like this,\n\n22\n00:01:10.000 --> 00:01:14.840\nyou've got layer 2 protocols like HDLC or\nPPP that could be running.\n\n23\n00:01:14.840 --> 00:01:16.580\nIt could be configured improperly.\n\n24\n00:01:16.580 --> 00:01:21.110\nWe might have other issues going on\nbetween the lines, clock rates and\n\n25\n00:01:21.110 --> 00:01:23.120\ntimings, all sorts of stuff.\n\n26\n00:01:23.120 --> 00:01:25.960\nHeck, this could frame relaying\nencapsulated for all I know.\n\n27\n00:01:25.960 --> 00:01:27.960\nWe'll have to take a look\nat the configurations and\n\n28\n00:01:27.960 --> 00:01:29.340\nsee where that issue is.\n\n29\n00:01:29.340 --> 00:01:31.700\nBut the fact that the line's going up and\nthen down, up and\n\n30\n00:01:31.700 --> 00:01:36.530\nthen down, that tells you that it's more\nthan likely not a layer one problem.\n\n31\n00:01:36.530 --> 00:01:39.040\nThe physical cable is\nmore than likely okay.\n\n32\n00:01:39.040 --> 00:01:42.130\nIt could be, though,\nthat there is a physical cable problem\n\n33\n00:01:42.130 --> 00:01:46.072\nif we have something like UDLD, the\nUnidirectional Link Detection, turned on.\n\n34\n00:01:46.072 --> 00:01:49.540\nMaybe we're sending traffic one way and\nnot getting responses back so\n\n35\n00:01:49.540 --> 00:01:54.220\nthe line goes down, and then it comes back\nup, and then it goes down, and so on.\n\n36\n00:01:54.220 --> 00:01:58.190\nOn the exam, a physical cable failure is\npretty unlikely cuz you can't fix it, but\n\n37\n00:01:58.190 --> 00:02:00.270\nin real life,\nit's something that does happen.\n\n38\n00:02:00.270 --> 00:02:03.530\nThis was more than likely just gonna\nbe a protocol misconfiguration,\n\n39\n00:02:03.530 --> 00:02:05.220\nso let's jump in there and find out.\n\n40\n00:02:05.220 --> 00:02:08.160\nWe don't have to hunt around\na bunch in this topology cuz\n\n41\n00:02:08.160 --> 00:02:10.030\nit's all really gonna be here on EDGE1 and\nEDGE2.\n\n42\n00:02:10.030 --> 00:02:13.090\nDoesn't matter which one you start with,\none's as good as the other.\n\n43\n00:02:13.090 --> 00:02:16.840\nI'll start on EDGE1 and\nsee what we can find.\n\n44\n00:02:16.840 --> 00:02:18.580\nSo if I jump over to EDGE1,\n\n45\n00:02:18.580 --> 00:02:22.810\nwell, before I even get logged in we\ncan see the interface flapping, right.\n\n46\n00:02:22.810 --> 00:02:26.680\nIf you look at all these messages,\nline protocol 5 up, down.\n\n47\n00:02:26.680 --> 00:02:31.075\nLine protocol and interface Ser00/0/0,\nchange state to down, then up,\n\n48\n00:02:31.075 --> 00:02:33.150\nthen down, then up.\n\n49\n00:02:33.150 --> 00:02:38.520\nAnd if I look at the timers on it,\nthey look to be about four seconds apart.\n\n50\n00:02:38.520 --> 00:02:42.260\nWell, it's not always,\nsome of them are a little more spread out.\n\n51\n00:02:42.260 --> 00:02:44.180\nBut some of them are as\nclose as four seconds apart,\n\n52\n00:02:44.180 --> 00:02:45.619\nsome of them are a little bit further.\n\n53\n00:02:45.619 --> 00:02:51.648\nAnd so it is doing this over and over and\nover again, just constantly failing.\n\n54\n00:02:51.648 --> 00:02:53.614\nSo I'm going to go ahead and\nget logged into this and\n\n55\n00:02:53.614 --> 00:02:55.200\nlet's see if we can't find out why.\n\n56\n00:02:55.200 --> 00:02:57.940\nNow, the first thing I want to do is I\nwant to do is I want to figure out what\n\n57\n00:02:57.940 --> 00:02:59.500\nkind of interface this is.\n\n58\n00:02:59.500 --> 00:03:03.150\nIs it frame relay, is it PPP, is it HDLC,\nyou know what the heck is it,\n\n59\n00:03:03.150 --> 00:03:06.540\nand then we can kind of gauge\nour troubleshooting from there.\n\n60\n00:03:06.540 --> 00:03:10.349\nSo I'm gonna do a show run,\nor show running-config, for\n\n61\n00:03:10.349 --> 00:03:14.860\ninterface Ser0/0/0 to see\nwhat I'm dealing with.\n\n62\n00:03:14.860 --> 00:03:19.430\nAnd it looks like we've got\na PPP serial interface,\n\n63\n00:03:19.430 --> 00:03:22.480\nall right, and\nwe've got authentication turned on.\n\n64\n00:03:22.480 --> 00:03:27.850\nNow authentication, if authentication\nis failing the line may come up,\n\n65\n00:03:27.850 --> 00:03:29.611\nyou send your credentials, and\n\n66\n00:03:29.611 --> 00:03:33.670\nthen if your credentials fail the line\ngoes back down again, and then it retries.\n\n67\n00:03:33.670 --> 00:03:36.500\nSo that very well could be\nthe cause of our flapping.\n\n68\n00:03:36.500 --> 00:03:38.940\nCould be a physical cable,\ncould be other things, but\n\n69\n00:03:38.940 --> 00:03:42.080\nI bet that authentication\nis where our problems is.\n\n70\n00:03:42.080 --> 00:03:45.672\nNow looking at it here,\nI've got an ip address, 192.168.255.1.\n\n71\n00:03:45.672 --> 00:03:51.709\nAnd the subnet mask is 255.255.255.252,\nreally small subnet there.\n\n72\n00:03:51.709 --> 00:03:55.392\nThat's a slash 30, and so\nthe only other valid IP is .2.\n\n73\n00:03:55.392 --> 00:03:57.550\nI'll have to make sure\nthe other side has that.\n\n74\n00:03:57.550 --> 00:03:58.630\nEncapsulation is set for ppp.\n\n75\n00:03:58.630 --> 00:04:03.130\nI've got my authentication set for\nchap, challenge handshake.\n\n76\n00:04:03.130 --> 00:04:05.570\nIt's important to pay attention to that\nbecause the other side might be set for\n\n77\n00:04:05.570 --> 00:04:07.690\npap or something that doesn't match.\n\n78\n00:04:07.690 --> 00:04:13.015\nMy chap hostname is NYEDGE1,\nand my chap password is cisco.\n\n79\n00:04:13.015 --> 00:04:15.340\nAnd I've got a 0 here letting\nme know that's unencrypted,\n\n80\n00:04:15.340 --> 00:04:16.985\njust sending the word cisco.\n\n81\n00:04:16.985 --> 00:04:21.580\nWell, this is NYEDGE1, the host name,\nbut they're overridden it here\n\n82\n00:04:21.580 --> 00:04:23.780\nwith the same thing,\nnot really necessary, but they did it.\n\n83\n00:04:23.780 --> 00:04:27.530\nSo that's what we're trying to log\ninto the other router as, okay.\n\n84\n00:04:27.530 --> 00:04:31.790\nThe other router is connecting to us, and\ntrying to log in as, well, something else.\n\n85\n00:04:31.790 --> 00:04:33.175\nLet's go take a look at it real quick.\n\n86\n00:04:33.175 --> 00:04:38.520\nSo if I go to NYEDGE2, I'm just\ngonna do that same exact thing, so\n\n87\n00:04:38.520 --> 00:04:45.240\nI'll jump in here and\ndo a show running-config for int s0/0/0.\n\n88\n00:04:45.240 --> 00:04:48.740\nAnd it does have the .2 ips,\nso that's good.\n\n89\n00:04:48.740 --> 00:04:53.030\nEncapsulation ppp, ppp, authentication\nchap, so those are the same.\n\n90\n00:04:53.030 --> 00:04:57.259\nIt's got a host name of NYEDGE2, and\nit's got a chap password of cisco.\n\n91\n00:04:57.259 --> 00:05:00.453\nNow it's got a clock rate set,\nthe other side didn't, but that's okay,\n\n92\n00:05:00.453 --> 00:05:01.480\nI expect that, right.\n\n93\n00:05:01.480 --> 00:05:05.960\nWith a point-to-point serial line,\nyou have a DTE side and\n\n94\n00:05:05.960 --> 00:05:09.560\na DCE side, right, the data terminal and\nthe data communications.\n\n95\n00:05:09.560 --> 00:05:12.640\nAnd one side determines the clock rate,\nand\n\n96\n00:05:12.640 --> 00:05:15.360\nthe other side listens,\nthe DTE side listens.\n\n97\n00:05:15.360 --> 00:05:17.260\nThis guy must be the DCE side.\n\n98\n00:05:17.260 --> 00:05:21.150\nSo, it's got a clock rate set of 2\nmegabit, and that should be fine.\n\n99\n00:05:21.150 --> 00:05:24.400\nWell, I mean, the clock rate could be set\nto something the line doesn't support,\n\n100\n00:05:24.400 --> 00:05:27.660\nthat could be a problem, but 2 megabits,\nwell within the range for a Cisco router.\n\n101\n00:05:28.840 --> 00:05:32.630\nAll right, so this one is sending\nNYEDGE2 with a password of cisco.\n\n102\n00:05:32.630 --> 00:05:36.750\nThe other side's sending NYEDGE1\nwith a password of cisco, also.\n\n103\n00:05:36.750 --> 00:05:39.570\nSo it looks like authentication\nis set up correctly, right?\n\n104\n00:05:39.570 --> 00:05:42.690\nWell, tricky part about\nppp authentication,\n\n105\n00:05:42.690 --> 00:05:46.560\nthis isn't the whole thing,\nthis is what we're sending.\n\n106\n00:05:46.560 --> 00:05:50.280\nIt's not necessarily what we're receiving,\nright, what we expect to receive.\n\n107\n00:05:50.280 --> 00:05:53.780\nWhen you set up authentication,\nthe password has to match on both sides.\n\n108\n00:05:53.780 --> 00:05:54.910\nWell, I've got cisco here and\n\n109\n00:05:54.910 --> 00:05:58.120\nI've got cisco on the other side,\nas far as what we're sending.\n\n110\n00:05:58.120 --> 00:05:59.940\nBut what are we expecting to receive?\n\n111\n00:05:59.940 --> 00:06:02.880\nWe might be expecting to receive\nsomething different, and\n\n112\n00:06:02.880 --> 00:06:05.620\nif they don't match,\nthen we have a failure, okay.\n\n113\n00:06:05.620 --> 00:06:08.120\nSo I need to look at my user accounts and\nfind that out.\n\n114\n00:06:08.120 --> 00:06:12.380\nNow, there's two ways to go about\nfiguring out if this is the issue.\n\n115\n00:06:12.380 --> 00:06:15.695\nOne way if the password is encrypted,\none way if it isn't.\n\n116\n00:06:15.695 --> 00:06:17.740\nWe'll see if the password is encrypted.\n\n117\n00:06:17.740 --> 00:06:22.260\nI should be receiving a connection from\nthe other router, NYEDGE1, all right.\n\n118\n00:06:22.260 --> 00:06:25.440\nAnd when NYEDGE1 connects,\nthey're sending me a password of cisco, so\n\n119\n00:06:25.440 --> 00:06:28.320\nI expect to receive a password of cisco.\n\n120\n00:06:28.320 --> 00:06:31.510\nSo if I do a show running-config, and\n\n121\n00:06:31.510 --> 00:06:34.560\nI filter that to include\nany line with username.\n\n122\n00:06:34.560 --> 00:06:37.050\nI want to see anywhere where\nI've defined a username.\n\n123\n00:06:37.050 --> 00:06:42.730\nHere I can see username NYEDGE1,\npassword, and then the password.\n\n124\n00:06:42.730 --> 00:06:46.080\nAnd you'll see here it's got an encryption\ntype of 0, so it's plain text and\n\n125\n00:06:46.080 --> 00:06:46.810\nhere's the password.\n\n126\n00:06:46.810 --> 00:06:49.080\nAnd actually here's gonna be our problem,\nright.\n\n127\n00:06:49.080 --> 00:06:52.650\nI've got cisco with an extra o on it.\n\n128\n00:06:52.650 --> 00:06:56.130\nWe saw the other side was set to send\nus cisco with one o at the end of it,\n\n129\n00:06:56.130 --> 00:06:57.420\nhere it's got two.\n\n130\n00:06:57.420 --> 00:06:58.640\nI've got a problem.\n\n131\n00:06:58.640 --> 00:07:00.020\nNow there's two ways to fix this.\n\n132\n00:07:00.020 --> 00:07:03.390\nI could fix it by changing what the other\nrouter is sending, or I could change it\n\n133\n00:07:03.390 --> 00:07:06.890\nright here to fix that password,\nwhich is probably the easier path.\n\n134\n00:07:06.890 --> 00:07:08.450\nI'll go that route, all right.\n\n135\n00:07:08.450 --> 00:07:12.870\nSo, actually before I do that,\nall I did was fix that password and\n\n136\n00:07:12.870 --> 00:07:14.540\nthat will more than likely fix the line,\nand that will come up.\n\n137\n00:07:14.540 --> 00:07:18.820\nBut before I do it, I was lucky here\nthat the password was unencrypted.\n\n138\n00:07:18.820 --> 00:07:21.010\nWhat if the password was encrypted,\nthough?\n\n139\n00:07:21.010 --> 00:07:25.290\nIf it was an encrypted password, could\nI look at it and tell there was a typo?\n\n140\n00:07:25.290 --> 00:07:26.170\nNo.\n\n141\n00:07:26.170 --> 00:07:29.580\nSo I know some people, you'll see this out\non the Internet, where they'll say, hey,\n\n142\n00:07:29.580 --> 00:07:32.240\njust go and reset the password and\nthat way you know what it is, right..\n\n143\n00:07:32.240 --> 00:07:34.620\nYou can certainly do that, right.\n\n144\n00:07:34.620 --> 00:07:38.380\nBut we could also use debug commands to\nfind out whether the password is right or\n\n145\n00:07:38.380 --> 00:07:40.690\nwrong, or if the password is\neven's the problem, right.\n\n146\n00:07:40.690 --> 00:07:42.120\nWhen you do a debug,\n\n147\n00:07:42.120 --> 00:07:45.450\nyou've actually got a whole set\nof ppp debugging that you can do.\n\n148\n00:07:46.880 --> 00:07:47.590\nThere we go.\n\n149\n00:07:47.590 --> 00:07:48.700\nIf you do debug ppp ?, and\n\n150\n00:07:48.700 --> 00:07:52.730\nyou'll see one of the things you\ncan debug is authentication.\n\n151\n00:07:52.730 --> 00:07:55.950\nAnd so you can actually see whether\nauthentication is your problem or not.\n\n152\n00:07:55.950 --> 00:08:00.770\nI'm gonna say debug ppp authentication,\nand we'll turn that on.\n\n153\n00:08:02.680 --> 00:08:04.310\nConsole logging might\nnot be on on this one.\n\n154\n00:08:04.310 --> 00:08:07.670\nLet me go to the other router cuz\nI know it's actually logging.\n\n155\n00:08:07.670 --> 00:08:08.920\nThere we go.\n\n156\n00:08:08.920 --> 00:08:12.870\nSo on this one I'll just do\na debug ppp authentication.\n\n157\n00:08:14.100 --> 00:08:18.290\nThere, and now in addition to seeing the\nline flap, I should see authentication,\n\n158\n00:08:18.290 --> 00:08:19.730\ninformation, and there we go.\n\n159\n00:08:19.730 --> 00:08:23.440\nAnd if you've never debugged PPP, it's\nactually one of the nicer ones to debug.\n\n160\n00:08:23.440 --> 00:08:26.270\nLet me turn off debugging here,\nI'm gonna get inundated with junk.\n\n161\n00:08:27.690 --> 00:08:32.020\nBecause as it communicates, what it does\nis it breaks it up for you with these\n\n162\n00:08:32.020 --> 00:08:37.030\nlittle Os and Is, okay, and O, that's\nan output, that's something you sent.\n\n163\n00:08:37.030 --> 00:08:39.970\nAn I, that's an input,\nit's something you received.\n\n164\n00:08:39.970 --> 00:08:42.590\nSo notice here I've got CHAP, right?\n\n165\n00:08:42.590 --> 00:08:47.540\nSo here we got PPP is turning on,\nand then CHAP does an output.\n\n166\n00:08:47.540 --> 00:08:51.950\nWe've got a challenge, and we're sending\na challenge from us, from NYEDGE1.\n\n167\n00:08:51.950 --> 00:08:54.820\nAnd then I've got an input,\nright, here's an input challenge.\n\n168\n00:08:54.820 --> 00:08:58.570\nIt's coming from NYEDGE2,\nI'm receiving that one.\n\n169\n00:08:58.570 --> 00:09:02.820\nAnd then we're sending a AUTH request,\n\n170\n00:09:02.820 --> 00:09:04.760\njeez my debug's just\nkind of kicked me out.\n\n171\n00:09:04.760 --> 00:09:07.020\nThere we go.\nSo we're sending that AUTH request and\n\n172\n00:09:07.020 --> 00:09:08.360\nwe're getting a response.\n\n173\n00:09:08.360 --> 00:09:10.090\nAnd as we look, we can find,\n\n174\n00:09:10.090 --> 00:09:14.100\nhere I'm outputting a failure, and\nwe've got an authentication failure.\n\n175\n00:09:14.100 --> 00:09:16.900\nSo, I can see that my authentication\nis the problem, right.\n\n176\n00:09:16.900 --> 00:09:19.330\nSo, you can kinda drill it down that way,\n\n177\n00:09:19.330 --> 00:09:22.920\neven if the password is encrypted,\nto find out if that's really the problem.\n\n178\n00:09:22.920 --> 00:09:26.090\nIf I see here that\nauthentication is successful,\n\n179\n00:09:26.090 --> 00:09:30.000\nthen I know it's not a password problem,\nand I can stop from resetting that.\n\n180\n00:09:30.000 --> 00:09:32.748\nWhy change somebody's password if that's\nnot what the problem is, and on the exam,\n\n181\n00:09:32.748 --> 00:09:33.487\nyou gotta be careful.\n\n182\n00:09:33.487 --> 00:09:36.833\nYou don't want to fix a problem that\ndoesn't exist, so that's why I wanted\n\n183\n00:09:36.833 --> 00:09:40.195\nto show you that debug just in case you\nhave to do that on the exam, all right.\n\n184\n00:09:40.195 --> 00:09:43.620\nBut in my case I do just\nhave a bad password, so\n\n185\n00:09:43.620 --> 00:09:48.500\nI'm gonna jump over to NYEdge2,\nand we'll fix that, right?\n\n186\n00:09:48.500 --> 00:09:50.250\nI just need to reset that user name.\n\n187\n00:09:51.770 --> 00:09:55.460\nSo if I take a look at my\nrunning config again, and\n\n188\n00:09:55.460 --> 00:09:58.720\nI look at that username,\nit just has that bad password.\n\n189\n00:09:58.720 --> 00:10:04.300\nSo I'll come in here and\nsay username NYEDGE1 password 0 cisco.\n\n190\n00:10:05.660 --> 00:10:07.470\nAnd that's gonna set it, okay.\n\n191\n00:10:07.470 --> 00:10:12.590\nSo now that that's set, the passwords\nmatch, the line should come up.\n\n192\n00:10:12.590 --> 00:10:17.240\nAnd if I jump back over to NYEDGE1,\nwhich is doing logging, I can see that\n\n193\n00:10:17.240 --> 00:10:21.965\ninterface did just come up and\nit's not flapping, it actually stayed up.\n\n194\n00:10:21.965 --> 00:10:26.300\nAnd I know that because I can see OSPF\njust formed an adjacency over it, right.\n\n195\n00:10:26.300 --> 00:10:30.510\nAnd so if I do a #show ip int br,\n\n196\n00:10:30.510 --> 00:10:38.620\nI expect to see serial 0/0/0 as an up,\nup line, which we'll find right down here.\n\n197\n00:10:38.620 --> 00:10:39.880\nSo it is up, up.\n\n198\n00:10:41.060 --> 00:10:44.460\nAnd now if I watch it, I should see it\nstay up for a longer period of time.\n\n199\n00:10:44.460 --> 00:10:47.600\nIf I do a show interface for s0/0/0, and\n\n200\n00:10:47.600 --> 00:10:51.070\ntake a look at it's counters, before\nwe were having a lot of state changes.\n\n201\n00:10:51.070 --> 00:10:55.550\nIf I look down here at my counters,\nwe should be able to find, now let's see,\n\n202\n00:10:55.550 --> 00:10:58.240\nwhere are the state changes that\nvaried in here, right here.\n\n203\n00:10:58.240 --> 00:11:02.598\n2,037 interface resets,\nit flapped 2,037 times, but\n\n204\n00:11:02.598 --> 00:11:06.110\nnow it's up and it should stay up and\nbe a lot happier.\n\n205\n00:11:07.340 --> 00:11:08.550\nSo we can just wait.\n\n206\n00:11:08.550 --> 00:11:10.538\nIt's a good idea to wait\njust a few moments.\n\n207\n00:11:10.538 --> 00:11:13.400\nWe saw where the failures were as\nlittle as four seconds apart, but\n\n208\n00:11:13.400 --> 00:11:14.170\nas many as 30 seconds.\n\n209\n00:11:14.170 --> 00:11:17.100\nSo I'm just gonna wait and\nmake sure this stays up for 30 seconds.\n\n210\n00:11:17.100 --> 00:11:20.530\nI haven't seen any other messages pop up,\nso I think we're in good shape.\n\n211\n00:11:20.530 --> 00:11:25.360\nAnd we can ping across it,\njust to make sure the line is actually up.\n\n212\n00:11:25.360 --> 00:11:28.840\nSo I'm gonna ping the other side,\nand we're in business, all right?\n\n213\n00:11:28.840 --> 00:11:31.980\nSo this one turned out to be\na little bit of authentication.\n\n214\n00:11:31.980 --> 00:11:35.200\nOnce that was squared away, the line\ncame up, and now we're in business.\n\n215\n00:11:35.200 --> 00:11:37.400\nSo not a bad one to jump into.\n\n216\n00:11:37.400 --> 00:11:39.620\nI used debugs to find this one.\n\n217\n00:11:39.620 --> 00:11:42.510\nYou didn't have to use debugs,\nyou could have just done where you look at\n\n218\n00:11:42.510 --> 00:11:45.350\nthe running configuration and\nspotted the bad password right there.\n\n219\n00:11:45.350 --> 00:11:47.210\nIf it's unencrypted, right.\n\n220\n00:11:47.210 --> 00:11:50.928\nJust remember when you configure PPP\nyou configure a password to send,\n\n221\n00:11:50.928 --> 00:11:54.930\nbut the receive side is\ndefined with a user name.\n\n222\n00:11:54.930 --> 00:11:56.740\nSo you gotta check the user name settings,\nalso,\n\n223\n00:11:56.740 --> 00:11:59.130\noutside of PPP to make sure that's right.\n\n224\n00:11:59.130 --> 00:12:02.130\nBut once you've got that squared away the\nlines come up, and that problem is solved.\n\n225\n00:12:02.130 --> 00:12:04.690\nSo that wraps it up for\nthis troubleshooting issue.\n\n226\n00:12:04.690 --> 00:12:06.620\nStay tuned.\nWe still have a few a few more to tackle\n\n227\n00:12:06.620 --> 00:12:09.020\nhere in Set 1 before we\nmove on to the next set.\n\n228\n00:12:09.020 --> 00:12:10.290\nSo tune back in for that.\n\n229\n00:12:10.290 --> 00:12:11.452\nI look forward to seeing you then.\n\n230\n00:12:11.452 --> 00:12:14.343\n[MUSIC]\n\n231\n00:12:14.343 --> 00:12:17.269\n[SOUND]\n\n",
          "vimeoId": "149153605"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #7` from set #1. The trouble ticket states that \"NYEDGE2 and NYCORE2 are not forming an OSPF adjacency.\"",
          "length": "1023",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-7-set_1_issue_7-113015-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-7-set_1_issue_7-113015-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-7-set_1_issue_7-113015-1-sm.jpg",
          "title": "Set 1 Issue 7",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:07.747\n[MUSIC]\n\n2\n00:00:07.747 --> 00:00:10.390\nAll right, welcome to Set 1 in Issue 7.\n\n3\n00:00:10.390 --> 00:00:12.710\nAnd in this one we've got\nanother troubleshooting issue,\n\n4\n00:00:12.710 --> 00:00:15.580\nand this is actually gonna\ntie back to Issue 5.\n\n5\n00:00:15.580 --> 00:00:18.810\nBack in Issue 5 we troubleshot\na problem with some OSPF\n\n6\n00:00:18.810 --> 00:00:20.900\nroutes not making it into our environment.\n\n7\n00:00:20.900 --> 00:00:23.950\nAnd at the end of Issue 5,\nI made a comment I said.\n\n8\n00:00:23.950 --> 00:00:28.030\nAt this point I normally continue on\nto troubleshoot additional devices.\n\n9\n00:00:28.030 --> 00:00:30.510\nBut there's another problem somewhere\nthat's actually causing it not to work, so\n\n10\n00:00:30.510 --> 00:00:31.870\nwe stopped there.\n\n11\n00:00:31.870 --> 00:00:33.930\nWell, here we're gonna take\na look at that problem.\n\n12\n00:00:33.930 --> 00:00:38.050\nSo if you didn't do Issue 5,\nwhat we basically had was one router.\n\n13\n00:00:38.050 --> 00:00:40.760\nLet me bring up my topology\nhere to recap it for us.\n\n14\n00:00:40.760 --> 00:00:42.420\nBasically what we had\nwas this guy up here,\n\n15\n00:00:42.420 --> 00:00:46.400\nNYEDGE2 was not learning\nsome routes from the ISPs.\n\n16\n00:00:46.400 --> 00:00:49.780\nAnd so we troubleshot that we found\na problem was that NYEDGE2 had a passive\n\n17\n00:00:49.780 --> 00:00:51.840\ninterface, and\nthe route started coming in.\n\n18\n00:00:51.840 --> 00:00:55.710\nNYEDGE2 has nice full routing table,\nall right.\n\n19\n00:00:55.710 --> 00:00:58.660\nNow we need to find out whats going\non with the rest of our routers.\n\n20\n00:00:58.660 --> 00:01:04.090\nWell, in Issue 6 we saw where this\nlink between EDGE2 and EDGE1 was down.\n\n21\n00:01:04.090 --> 00:01:06.160\nWe fixed that in Issue 6,\nso that's up and so\n\n22\n00:01:06.160 --> 00:01:08.550\nnow we're exchanging routes between these.\n\n23\n00:01:08.550 --> 00:01:13.490\nBut in this troubleshooting problem,\nwe've got an issue between NYEDGE2 and\n\n24\n00:01:13.490 --> 00:01:16.820\nNYCORE2 that's causing OSPF\nroutes not to propagate.\n\n25\n00:01:16.820 --> 00:01:20.060\nThe ticket actually reads, NYEDGE2 and\n\n26\n00:01:20.060 --> 00:01:25.880\nNYCORE2 are not forming an OSPF adjacency,\nso these two guys are not communicating.\n\n27\n00:01:25.880 --> 00:01:28.030\nSo at the end of Issue 5.\n\n28\n00:01:28.030 --> 00:01:31.150\nThis link was down, and\nthis link is not forming adjacencies.\n\n29\n00:01:31.150 --> 00:01:35.668\nThat's why the route stated right here in\nEDGE2 and didn't make it to anybody else.\n\n30\n00:01:35.668 --> 00:01:38.150\nIn Issue 6 we solved this problem so\n\n31\n00:01:38.150 --> 00:01:40.800\nnow the routes are kind of\npropagating around this way.\n\n32\n00:01:40.800 --> 00:01:43.070\nBut we still have this\nnice gigabit link here.\n\n33\n00:01:43.070 --> 00:01:45.430\nWell I guess it's only a 100 mega\ncuz this end is 100 megabit.\n\n34\n00:01:45.430 --> 00:01:49.040\nBut we've got this nice link over her that\nwe could be using over the serial link\n\n35\n00:01:49.040 --> 00:01:52.300\nIf the route's propagated properly,\nwe need to find out what's going on.\n\n36\n00:01:52.300 --> 00:01:54.250\nFortunately, this one's narrowed down for\nus.\n\n37\n00:01:54.250 --> 00:01:56.120\nIt's just these two systems, right?\n\n38\n00:01:56.120 --> 00:01:59.550\nNYEDGE2 and\nNYCORE2 are not forming an adjacency.\n\n39\n00:01:59.550 --> 00:02:03.620\nNow we've worked with\nNYEDGE2 previous issues.\n\n40\n00:02:03.620 --> 00:02:04.860\nWe know it's running OSPF.\n\n41\n00:02:04.860 --> 00:02:05.490\nWe know it's up.\n\n42\n00:02:05.490 --> 00:02:08.480\nWe know it's interfaces appear\nto be configured properly.\n\n43\n00:02:08.480 --> 00:02:10.540\nSo, for me to troubleshoot this one.\n\n44\n00:02:10.540 --> 00:02:12.580\nI wanna start way down here on NYCORE2.\n\n45\n00:02:12.580 --> 00:02:16.062\nAnd the only reason I'm doing that is\nbecause I just know we've worked with\n\n46\n00:02:16.062 --> 00:02:19.810\nthe other router so I kind of assume\nmost of the problems are fixed up there.\n\n47\n00:02:19.810 --> 00:02:22.365\nThe problems are more likely to be\non a host we haven't worked on yet.\n\n48\n00:02:22.365 --> 00:02:24.330\nRight.\nBut, on an exam when you're dealing with\n\n49\n00:02:24.330 --> 00:02:26.620\na communication between\ntwo nodes like this.\n\n50\n00:02:26.620 --> 00:02:28.480\nIf this is the very first\ntime you've seen them,\n\n51\n00:02:28.480 --> 00:02:30.260\nit doesn't really matter\nwhich one you pick.\n\n52\n00:02:30.260 --> 00:02:33.200\nThe problem could be on either one,\nso one's as good as another.\n\n53\n00:02:33.200 --> 00:02:34.960\nI'm gonna start down here\non this switch though,\n\n54\n00:02:34.960 --> 00:02:37.959\nand we'll see if we can't find out\nwhy these guys aren't syncing up.\n\n55\n00:02:37.959 --> 00:02:38.730\nAll right?\n\n56\n00:02:38.730 --> 00:02:41.330\nNow if I jump over to NYCORE2.\n\n57\n00:02:43.540 --> 00:02:46.870\nBasically, I just wanna take a look and\nverify that it is running OSPF and\n\n58\n00:02:46.870 --> 00:02:49.380\nall of those things that we've\nalready done on the other router.\n\n59\n00:02:49.380 --> 00:02:52.050\nI need to repeat them here\njust to make sure that\n\n60\n00:02:52.050 --> 00:02:54.820\nit is basically functioning\nthe way it's supposed to.\n\n61\n00:02:54.820 --> 00:02:57.420\nSo, I'm gonna do a quick\nshow IP protocols.\n\n62\n00:02:57.420 --> 00:03:01.440\nAnd just see if it's even running OSPF,\ncuz that'll cause us a problem, right?\n\n63\n00:03:01.440 --> 00:03:04.000\nFrom the diagram,\nI expected this to be in Area 0.\n\n64\n00:03:04.000 --> 00:03:11.600\nAnd so when I look at it, I can see\nthat it's got a network 192.168.16.0.\n\n65\n00:03:11.600 --> 00:03:15.710\nWhich is in Area 0, and\n192.168.30.0, that's in Area 0 also.\n\n66\n00:03:15.710 --> 00:03:17.916\nSo, it's got some interfaces\nthat are up and running.\n\n67\n00:03:17.916 --> 00:03:23.957\nI don't see any passive interfaces It's\ngot a few gateways that are out there,\n\n68\n00:03:23.957 --> 00:03:27.129\nincluding 172.14.0.171.\n\n69\n00:03:27.129 --> 00:03:28.080\nThat's an interesting one.\n\n70\n00:03:28.080 --> 00:03:34.340\nIf I look at my topology here,\nthe 172.14 network is way up here.\n\n71\n00:03:34.340 --> 00:03:36.580\nWhich in theory,\nthis guy shouldn't be able to see.\n\n72\n00:03:36.580 --> 00:03:39.180\nBut it's probably going around\nthis way to get to it, right?\n\n73\n00:03:39.180 --> 00:03:42.090\nSo there's more than one\npath on this network.\n\n74\n00:03:42.090 --> 00:03:46.300\nBut it looks like it's up as far as\njust running OSPF is concerned and\n\n75\n00:03:46.300 --> 00:03:47.410\nit does have a few gateways.\n\n76\n00:03:47.410 --> 00:03:50.320\nIf I do a show ip ospf neighbor.\n\n77\n00:03:51.780 --> 00:03:54.008\nI can see that it does have a few\nneighbors that are out there.\n\n78\n00:03:54.008 --> 00:03:55.110\n1.1.1.1 and 192.168.255.4, okay.\n\n79\n00:03:55.110 --> 00:04:02.200\nNow looking at those\nthat doesn't necessarily\n\n80\n00:04:02.200 --> 00:04:05.045\nhelp me a whole heck of a lot as far\nas figuring out who these people are.\n\n81\n00:04:05.045 --> 00:04:07.090\nRight.\nBecause these are router IDs,\n\n82\n00:04:07.090 --> 00:04:09.700\nOSPF you can assign whatever you want for\na router ID.\n\n83\n00:04:09.700 --> 00:04:12.820\nBy default it's gonna try and\npick the highest IP address that you have.\n\n84\n00:04:12.820 --> 00:04:15.440\nBut you can use loopback\ninterfaces to override that.\n\n85\n00:04:15.440 --> 00:04:18.390\nSo this is probably\nthe actual IP of the unit.\n\n86\n00:04:18.390 --> 00:04:22.960\nBut this guy up here, that's probably just\na loopback interface that's been assigned.\n\n87\n00:04:22.960 --> 00:04:27.520\nBoth of these I'm connected to via VLAN16,\nand so that's how I'm able to get to them.\n\n88\n00:04:27.520 --> 00:04:30.190\nBut I am connected to OSPF.\n\n89\n00:04:30.190 --> 00:04:34.340\nI'm just not seeing my other neighbor\nthat I expect to see, all right?\n\n90\n00:04:34.340 --> 00:04:38.540\nAnd if I do a show ip route and\nfilter that just to OSPF routes.\n\n91\n00:04:39.850 --> 00:04:43.720\nI can see that I am learning some OSPF\nroutes that are coming in including some\n\n92\n00:04:43.720 --> 00:04:48.130\nOE ones and some external routes,\nand they're coming in via VLAN16 and\n\n93\n00:04:48.130 --> 00:04:51.285\nthey're coming in via 192.168.16.4.\n\n94\n00:04:51.285 --> 00:04:54.363\nSo whoever 192.168.16.4 is.\n\n95\n00:04:54.363 --> 00:04:57.860\nThey're pretty much teaching\nme everything that I'm using\n\n96\n00:04:57.860 --> 00:05:00.250\nas far as my routes are concerned,\nall right.\n\n97\n00:05:00.250 --> 00:05:04.080\nWell this is another one where if\nyou remember from earlier labs that\n\n98\n00:05:04.080 --> 00:05:08.180\nwe've already seen 192.168.16.4\nif I remember right.\n\n99\n00:05:08.180 --> 00:05:12.180\nThat is this guy up here, NYEDGE1, right?\n\n100\n00:05:12.180 --> 00:05:14.490\nWhich we can verify\nthat if we're not sure.\n\n101\n00:05:14.490 --> 00:05:15.910\nJump over to NYEDGE1.\n\n102\n00:05:18.390 --> 00:05:22.150\nAnd do a quick show IP interface brief.\n\n103\n00:05:22.150 --> 00:05:25.560\nTo find out whether it's got that .4 or\nnot, and it does, right there.\n\n104\n00:05:25.560 --> 00:05:26.450\nAll right.\n\n105\n00:05:26.450 --> 00:05:30.380\nSo what that tells me,\ngoing back to our topology,\n\n106\n00:05:30.380 --> 00:05:34.970\nis that while NYCORE2 is not building\na neighbor relationship with NYEDGE2.\n\n107\n00:05:34.970 --> 00:05:37.230\nRight?\nIt's not building a relationship here.\n\n108\n00:05:37.230 --> 00:05:39.510\nIt is building a relationship over here.\n\n109\n00:05:39.510 --> 00:05:40.960\nAnd so\nthat's where it's learning its routes.\n\n110\n00:05:40.960 --> 00:05:42.030\nAnd that's working, right?\n\n111\n00:05:42.030 --> 00:05:44.230\nSo our end users might not\neven know there's a problem.\n\n112\n00:05:44.230 --> 00:05:46.950\nThe network might seem a little bit\nslow cuz they're not using this nice,\n\n113\n00:05:46.950 --> 00:05:47.960\ngood route, here.\n\n114\n00:05:47.960 --> 00:05:51.900\nBut everything else is working so\nat least the network is up.\n\n115\n00:05:51.900 --> 00:05:54.600\nThat does make this problem a little\nharder to troubleshoot cuz things like\n\n116\n00:05:54.600 --> 00:05:58.150\npings and stuff that they might be going\ndifferent routes that we're not aware of.\n\n117\n00:05:58.150 --> 00:06:00.380\nSo we have to use traceroute and\nbe careful with that.\n\n118\n00:06:00.380 --> 00:06:03.200\nBut right here,\nthis is a point to point link,\n\n119\n00:06:03.200 --> 00:06:07.465\nassuming the link is up, we should be able\nto build a relationship with NYEDGE2.\n\n120\n00:06:07.465 --> 00:06:08.550\nRight.\n\n121\n00:06:08.550 --> 00:06:10.600\nSo why aren't we?\n\n122\n00:06:10.600 --> 00:06:15.000\nWell, the first thing I need to figure\nout is what is it about this link?\n\n123\n00:06:15.000 --> 00:06:15.890\nIs this a trunk?\n\n124\n00:06:15.890 --> 00:06:17.690\nIs it assigned to a particular VLAN?\n\n125\n00:06:17.690 --> 00:06:20.070\nIs it assigned to something else?\n\n126\n00:06:20.070 --> 00:06:24.790\nCuz right now I'm really only\nseeing 192.168.16, that VLAN16 IP.\n\n127\n00:06:24.790 --> 00:06:27.470\nWhich I don't think NYEDGE2\nhad if I remember, right?\n\n128\n00:06:27.470 --> 00:06:30.230\nLet's jump over to NYEDGE2 and\nsee what it has.\n\n129\n00:06:31.790 --> 00:06:34.480\nSo on this one, I'm just gonna do\na quick show ip interface brief.\n\n130\n00:06:35.860 --> 00:06:37.780\nAnd see what address does it has.\n\n131\n00:06:37.780 --> 00:06:40.550\nAnd yeah, it doesn't have\nan interface on 192.168.16.\n\n132\n00:06:40.550 --> 00:06:46.540\nIt's only got an interface\non 192.168.12 on VLAN12.\n\n133\n00:06:46.540 --> 00:06:50.945\nRight, and if it thinks that\nit's on VLAN12, I need to\n\n134\n00:06:50.945 --> 00:06:56.360\ndouble-check this interface on NYCORE2 to\nmake sure that it is on VLAN12, right?\n\n135\n00:06:56.360 --> 00:06:59.190\nSo we could have a VLAN issue here.\n\n136\n00:06:59.190 --> 00:07:02.485\nSo fa1/0/1 on NYCORE2, so\nI'll jump over and check that.\n\n137\n00:07:06.620 --> 00:07:09.550\nSo I'll just do a quick show run for\ninterface fa1/0/2.\n\n138\n00:07:09.550 --> 00:07:11.616\nAnd well, it just says,\n\n139\n00:07:11.616 --> 00:07:17.478\ninterface FastEthernet1/0/2,\nI do have that right, don't I?\n\n140\n00:07:17.478 --> 00:07:18.720\nIt's, oh, 1/0/1, all right.\n\n141\n00:07:18.720 --> 00:07:22.160\nI thought it was odd that it\nwasn't assigned to anything.\n\n142\n00:07:22.160 --> 00:07:25.530\nWell, remember if it's not assigned\nanything it's actually assigned to VLAN1,\n\n143\n00:07:25.530 --> 00:07:27.320\nwhich we're not using that's\nwhy I thought it was odd.\n\n144\n00:07:27.320 --> 00:07:28.430\nThere we go, all right.\n\n145\n00:07:28.430 --> 00:07:31.680\nSwitch port access VLAN12,\nso it is on VLAN12.\n\n146\n00:07:31.680 --> 00:07:36.330\nAnd, for\nOSPF when I did a show IP protocols.\n\n147\n00:07:36.330 --> 00:07:38.770\nAnd I looked at what I had on this router.\n\n148\n00:07:38.770 --> 00:07:43.140\nWell, I've got routing for\nnetwork 192.168.12.0,\n\n149\n00:07:43.140 --> 00:07:46.680\nso this switch is set\nto communicate on that.\n\n150\n00:07:46.680 --> 00:07:51.610\nI should, and I'll use my favorite IT word\nwhich is should, I should be building\n\n151\n00:07:51.610 --> 00:07:54.790\na neighbor relationship right\nover this link, but I'm not.\n\n152\n00:07:54.790 --> 00:07:55.530\nOkay.\n\n153\n00:07:55.530 --> 00:07:57.760\nWell, let's find out why.\n\n154\n00:07:57.760 --> 00:07:59.510\nI could have a passive\ninterface I suppose, but\n\n155\n00:07:59.510 --> 00:08:03.170\nthat would show up in show ip protocols\nand it's not so I doubt that's it.\n\n156\n00:08:03.170 --> 00:08:06.930\nI could have an ACL that's blocking the\ncommunication, and that's possible, right?\n\n157\n00:08:06.930 --> 00:08:08.640\nI could have a few different things.\n\n158\n00:08:08.640 --> 00:08:10.200\nLet's take a look at these interfaces and\n\n159\n00:08:10.200 --> 00:08:12.277\nsee if we can figure out\nwhat's going on there.\n\n160\n00:08:12.277 --> 00:08:13.080\nAll right.\n\n161\n00:08:13.080 --> 00:08:18.100\nSo on NYCORE2 I'm gonna start just\nby looking at the interfaces.\n\n162\n00:08:18.100 --> 00:08:20.960\nSo there's two interfaces\nthat are in the mix here.\n\n163\n00:08:20.960 --> 00:08:25.250\nOne of them is fa1/0/1,\nthat's this physical interface.\n\n164\n00:08:25.250 --> 00:08:27.710\nSo if it's a layer two issue\nit would be apparent there.\n\n165\n00:08:27.710 --> 00:08:29.850\nSo if I take a look at fa1/0/1.\n\n166\n00:08:29.850 --> 00:08:35.140\nIt's just assigned to that VLAN,\nit's got port fast turned on.\n\n167\n00:08:35.140 --> 00:08:36.010\nIt's not shut down.\n\n168\n00:08:36.010 --> 00:08:38.800\nThere's no ACLs applied to it or\nanything crazy.\n\n169\n00:08:38.800 --> 00:08:40.060\nIt's doubtful there's a problem there.\n\n170\n00:08:40.060 --> 00:08:41.260\nAll right.\n\n171\n00:08:41.260 --> 00:08:45.920\nThe other interface that's in this\nmix is interface vlan12, right?\n\n172\n00:08:45.920 --> 00:08:48.590\nThe virtual interface I have on that VLAN.\n\n173\n00:08:48.590 --> 00:08:54.500\nAnd I can see that I have HSRP configured\nbut I don't really care about that.\n\n174\n00:08:54.500 --> 00:08:56.180\nI do have an IP address, 192.168.12.3.\n\n175\n00:08:56.180 --> 00:08:57.890\nIt appears to be good.\n\n176\n00:08:57.890 --> 00:08:59.240\nThe interface hasn't shut down.\n\n177\n00:08:59.240 --> 00:09:00.800\nI guess I could test a ping.\n\n178\n00:09:00.800 --> 00:09:02.630\nWhat's the IP of the other router?\n\n179\n00:09:02.630 --> 00:09:07.060\nLet's go and look at EDGE2, and\n\n180\n00:09:07.060 --> 00:09:11.860\nit is 192.168.12.5, so\nI'm gonna so over here to CORE2.\n\n181\n00:09:11.860 --> 00:09:15.560\nAnd just see if I can even ping that,\nright?\n\n182\n00:09:15.560 --> 00:09:19.230\nCan I ping 192.168.12.5?\n\n183\n00:09:19.230 --> 00:09:22.170\nAnd, oh, and we can.\n\n184\n00:09:22.170 --> 00:09:25.670\nRight, first ping you know you gotta\nwait for ARP to do its thing and so\n\n185\n00:09:25.670 --> 00:09:26.180\nit might fail.\n\n186\n00:09:26.180 --> 00:09:28.600\nIt always gives me that moment\nof hesitation, but there we go.\n\n187\n00:09:28.600 --> 00:09:31.910\nSo I am able to communicate so\nI'm not dealing with layer one and\n\n188\n00:09:31.910 --> 00:09:33.400\nI'm not dealing with layer two.\n\n189\n00:09:33.400 --> 00:09:35.560\nI can get to that node.\n\n190\n00:09:35.560 --> 00:09:37.820\nI should be able to do\na routing protocol layer three.\n\n191\n00:09:37.820 --> 00:09:38.745\nSo I've get a layer three issue.\n\n192\n00:09:38.745 --> 00:09:39.430\nOkay.\n\n193\n00:09:39.430 --> 00:09:42.780\nAnd it's not IP addressing,\nbecause I was able to ping, so\n\n194\n00:09:42.780 --> 00:09:45.580\nmy nodes are in the right subnet,\nso that's good.\n\n195\n00:09:45.580 --> 00:09:48.660\nThat really just leaves the routing\nprotocol itself, right?\n\n196\n00:09:48.660 --> 00:09:53.380\nOSPF must have an issue,\nbut I don't see anything.\n\n197\n00:09:53.380 --> 00:09:56.200\nOSPF is actually really bad\nabout reporting errors to you.\n\n198\n00:09:56.200 --> 00:09:59.870\nIf we take a look at our logs or whatever,\nyou might not actually see anything.\n\n199\n00:09:59.870 --> 00:10:03.070\nNow I noticed on mine I\nwent into configuration and\n\n200\n00:10:03.070 --> 00:10:04.100\ncame out of configuration and\n\n201\n00:10:04.100 --> 00:10:07.220\ndidn't get a lot on my screen so\nI might have console logging turned off.\n\n202\n00:10:07.220 --> 00:10:09.290\nI'm gonna go ahead and turn that on.\n\n203\n00:10:09.290 --> 00:10:10.740\nSo I'll just say logging console.\n\n204\n00:10:11.900 --> 00:10:15.390\nAnd get out and that way if there's any\nerror messages that are coming up I'll get\n\n205\n00:10:15.390 --> 00:10:16.500\na chance to see that.\n\n206\n00:10:16.500 --> 00:10:19.960\nBut even if I didn't turn that on\nI could probably do a show log.\n\n207\n00:10:19.960 --> 00:10:24.136\nAnd see if there's anything in the logs\nhere that would indicate a problem.\n\n208\n00:10:24.136 --> 00:10:27.280\nAnd sure enough,\nwe can spot some right there.\n\n209\n00:10:27.280 --> 00:10:33.930\nAll right, looks like we've got\nOSPF-4-DUP_RFRID-NBR, okay?\n\n210\n00:10:33.930 --> 00:10:34.870\nWhat is that?\n\n211\n00:10:34.870 --> 00:10:38.900\nWell, that's duplicate router ID neighbor.\n\n212\n00:10:38.900 --> 00:10:42.830\nThat means that one of our neighbors\nhas the same router ID as we do.\n\n213\n00:10:42.830 --> 00:10:46.200\nNow remember router IDs,\nI mentioned that, right?\n\n214\n00:10:46.200 --> 00:10:50.810\nWith router IDs,\nlet me just get out of the log, here.\n\n215\n00:10:50.810 --> 00:10:54.640\nAnd with router IDs,\nwhen I did a show, ip ospf neighbor.\n\n216\n00:10:55.780 --> 00:10:56.830\nI saw these router IDs and\n\n217\n00:10:56.830 --> 00:11:00.330\nI said how they're usually automatically\ngenerated but we can override that.\n\n218\n00:11:00.330 --> 00:11:02.470\nAnd there's two ways to override it.\n\n219\n00:11:02.470 --> 00:11:04.090\nOne way is with a loopback.\n\n220\n00:11:04.090 --> 00:11:06.340\nAnd another way is with\nthe router ID command.\n\n221\n00:11:06.340 --> 00:11:09.310\nWe can statically assign a router ID and\nI do that all the time in real life.\n\n222\n00:11:09.310 --> 00:11:13.060\nI don't like to have to guess what router\nID I have and I don't like to create\n\n223\n00:11:13.060 --> 00:11:15.880\nloopbacks if I don't need to so\nI just statically assign it.\n\n224\n00:11:15.880 --> 00:11:18.480\nBut you can do it any\nnumber of different ways.\n\n225\n00:11:18.480 --> 00:11:20.980\nSo, if I wanna know my\nrouter ID here in NYCORE2.\n\n226\n00:11:22.800 --> 00:11:27.400\nI can do a show IP protocols, and\nOSPF will tell me my router ID.\n\n227\n00:11:27.400 --> 00:11:29.140\nSo this one's got a router ID of 1.1.1.1.\n\n228\n00:11:29.140 --> 00:11:29.640\nAll right?\n\n229\n00:11:31.350 --> 00:11:36.320\nIf I take a look at NYEDGE2,\nI'll bet it has the same one.\n\n230\n00:11:36.320 --> 00:11:37.750\nSo let's go take a look at NYEDGE2.\n\n231\n00:11:37.750 --> 00:11:41.364\nAnd I'll just do a show ip protocols.\n\n232\n00:11:41.364 --> 00:11:47.120\nAnd it's got 1.1.1 also.\n\n233\n00:11:47.120 --> 00:11:50.620\nIf two routers have the same router ID,\nthey will not form an adjacency.\n\n234\n00:11:50.620 --> 00:11:51.760\nAnd that's what's going on here,\n\n235\n00:11:51.760 --> 00:11:53.930\nis that they're repeating that and\nthen being blocked.\n\n236\n00:11:53.930 --> 00:11:56.890\nAll right, now I need to fix this,\nand unfortunately I've got a little\n\n237\n00:11:56.890 --> 00:11:59.410\nbit of a challenge here, because the\ntroubleshooting ticket tells me that I've\n\n238\n00:11:59.410 --> 00:12:01.440\ngot a problem and I need to fix it.\n\n239\n00:12:01.440 --> 00:12:03.320\nI know this is wrong with the route IDs,\nbut\n\n240\n00:12:03.320 --> 00:12:05.680\nI don't necessarily know\nwhat to change it to.\n\n241\n00:12:05.680 --> 00:12:07.250\nSo I've got two choices right?\n\n242\n00:12:07.250 --> 00:12:09.400\nChoice number 1,\nI can remove the router ID and\n\n243\n00:12:09.400 --> 00:12:12.320\nlet it automatically select a new one,\nthat's one way to fix it.\n\n244\n00:12:12.320 --> 00:12:12.990\nRight.\n\n245\n00:12:12.990 --> 00:12:17.120\nChoice number two is, I could look at\nthe other routers and maybe see what their\n\n246\n00:12:17.120 --> 00:12:22.480\nrouter IDs are set to and try and mimic\nthat so we get a consistent environment.\n\n247\n00:12:22.480 --> 00:12:23.940\nEither way would probably fix this one and\n\n248\n00:12:23.940 --> 00:12:26.040\nget us a correct answer\non the exam just right.\n\n249\n00:12:26.040 --> 00:12:30.070\nBut it is nice to be kind of complete and\nmimic what's done on the other systems.\n\n250\n00:12:30.070 --> 00:12:34.062\nSo I'm gonna look at a non-problem\ndevice like NYCORE1.\n\n251\n00:12:34.062 --> 00:12:36.810\nNYCORE1 is not causing any problems.\n\n252\n00:12:36.810 --> 00:12:40.306\nSo I'm gonna take a look at it and\ndo a show ip protocols.\n\n253\n00:12:40.306 --> 00:12:46.450\nAnd its router ID well its\njust set to an IP address and\n\n254\n00:12:46.450 --> 00:12:49.960\nI'll bet that is the highest IP address\non it which means automatic right so\n\n255\n00:12:49.960 --> 00:12:52.370\nif I do a show ip interface brief.\n\n256\n00:12:52.370 --> 00:12:54.407\nAnd exclude the undersigned interfaces.\n\n257\n00:12:54.407 --> 00:12:58.460\nSure enough,\n192.168.30.1 is its highest IP, so\n\n258\n00:12:58.460 --> 00:13:00.970\nit's probably automatically generating it.\n\n259\n00:13:00.970 --> 00:13:05.140\nWe can do a show run and\nlook for the ospf section, and\n\n260\n00:13:05.140 --> 00:13:07.990\nif the router ID command was used, it\nwould show up right there, and it's not.\n\n261\n00:13:07.990 --> 00:13:10.150\nAll right, so\nit looks like on the other systems,\n\n262\n00:13:10.150 --> 00:13:13.180\nthey're automatically generating router\nIDs, so we'll just do that here.\n\n263\n00:13:13.180 --> 00:13:15.480\nI'm gonna go and remove these router IDs.\n\n264\n00:13:15.480 --> 00:13:19.430\nNow, It could have been set by a loop back\nor it could have been set by a router ID\n\n265\n00:13:19.430 --> 00:13:20.932\ncommand so\nI'll have to check both of those.\n\n266\n00:13:20.932 --> 00:13:24.300\nI'm gonna jump over to CORE2.\n\n267\n00:13:24.300 --> 00:13:26.290\nAnd let's see where it's\ngetting its router ID.\n\n268\n00:13:28.170 --> 00:13:30.200\nSo I'll do a show run and I'll look for\n\n269\n00:13:30.200 --> 00:13:36.070\nthe OSPF section, and\nI see a router ID command right there.\n\n270\n00:13:36.070 --> 00:13:40.780\nAnd I guess I could still do a scan to see\nif there's any loopbacks, just in case.\n\n271\n00:13:40.780 --> 00:13:43.490\nIf I take a look at show ip interface\nbrief, and I'm just looking for\n\n272\n00:13:43.490 --> 00:13:45.160\nany loop back interfaces.\n\n273\n00:13:45.160 --> 00:13:49.930\nI got VLANs, I've physical interfaces,\nand no loopbacks on this guy.\n\n274\n00:13:49.930 --> 00:13:52.790\nSo, I'm gonna get into configuration.\n\n275\n00:13:52.790 --> 00:13:55.630\nAnd, oh, I didn't pay attention\nto the OSPF process number.\n\n276\n00:13:55.630 --> 00:13:56.390\nWhat was it?\n\n277\n00:13:56.390 --> 00:13:58.250\nProcess number ten.\n\n278\n00:13:58.250 --> 00:14:02.430\nSo I'm gonna get into router OSPF 10 and\nI'll just do a no router ID.\n\n279\n00:14:02.430 --> 00:14:08.730\nAll right, now, your router ID is\nactually determined when OSPF starts.\n\n280\n00:14:08.730 --> 00:14:12.570\nSo notice it gives me a warning message\nthat I need to clear the OSPF process so\n\n281\n00:14:12.570 --> 00:14:13.649\nthat's what I'm gonna do next.\n\n282\n00:14:14.860 --> 00:14:17.830\nOtherwise it won't actually take\naffect and so I'll run that.\n\n283\n00:14:17.830 --> 00:14:22.435\nIt's gonna dump all of my OSPF adjacencies\nand then rebuild and come back up.\n\n284\n00:14:22.435 --> 00:14:24.290\nOkay.\n\n285\n00:14:24.290 --> 00:14:25.580\nSo that fixed this one.\n\n286\n00:14:25.580 --> 00:14:28.160\nIf I do a show ip protocols.\n\n287\n00:14:28.160 --> 00:14:31.810\nI can see that router ID is now\ndynamically generated right,\n\n288\n00:14:31.810 --> 00:14:32.600\nnot statically set.\n\n289\n00:14:32.600 --> 00:14:37.910\nAnd I'm gonna go and do the same thing on\nEDGE2 so I'll jump over to that router.\n\n290\n00:14:37.910 --> 00:14:40.590\nAnd I'll find out where it's getting\nits router ID and I'll clear that out.\n\n291\n00:14:40.590 --> 00:14:45.940\nNow again, could be a loopback,\nwhich is easy to spot on a router.\n\n292\n00:14:45.940 --> 00:14:48.120\nIn my case, not a loopback, and so\n\n293\n00:14:48.120 --> 00:14:51.850\nthe only other thing then is to\nhave that router ID defined.\n\n294\n00:14:51.850 --> 00:14:54.900\nAnd so if we look at the OSPF section,\nthere it is, and\n\n295\n00:14:54.900 --> 00:14:56.580\nwe can just go and clear that out.\n\n296\n00:14:56.580 --> 00:14:58.540\nNow technically,\nI've already fixed the problem.\n\n297\n00:14:58.540 --> 00:15:00.600\nNow there's only one router with 1.1.1.1.\n\n298\n00:15:00.600 --> 00:15:01.470\nBut I wanna be thorough here.\n\n299\n00:15:01.470 --> 00:15:03.840\nI’m gonna clear this router ID out.\n\n300\n00:15:03.840 --> 00:15:06.920\nBecause all the other ones were\nset to automatically generated.\n\n301\n00:15:06.920 --> 00:15:10.520\nSo it’s kinda odd to have this one just\nbe statically assigned for no reason.\n\n302\n00:15:10.520 --> 00:15:12.332\nSo, I’m just gonna get rid of that one.\n\n303\n00:15:15.302 --> 00:15:18.700\nAnd then we’ll be nice and\nconsistent across our environment.\n\n304\n00:15:18.700 --> 00:15:20.980\nAll of our switches, all of our routers.\n\n305\n00:15:20.980 --> 00:15:24.170\nWill be dynamically\ngenerating the router ID, and\n\n306\n00:15:24.170 --> 00:15:27.140\nthat'll dump all my adjacencies and\nrebuild them.\n\n307\n00:15:27.140 --> 00:15:32.620\nAnd hopefully what we'll see is\nthat we get a relationship built up\n\n308\n00:15:32.620 --> 00:15:35.900\nwith the switch on the other side,\nall right.\n\n309\n00:15:35.900 --> 00:15:40.836\nAnd i'll verify that\nfrom the other switch So,\n\n310\n00:15:40.836 --> 00:15:45.340\nif I come over here to CORE2,\nwhere we didn't have an adjacency before.\n\n311\n00:15:45.340 --> 00:15:48.610\nIf I do a show ip ospf neighbor,\nI can see.\n\n312\n00:15:48.610 --> 00:15:49.328\nWhoops.\n\n313\n00:15:49.328 --> 00:15:51.630\n[LAUGH] I got a couple of different IPs.\n\n314\n00:15:51.630 --> 00:15:52.920\nNow, I'm still seeing 1.1.1.1.\n\n315\n00:15:52.920 --> 00:15:55.240\nI have to wait for that to age out, right?\n\n316\n00:15:55.240 --> 00:15:57.070\nSo, that one will age out eventually.\n\n317\n00:15:57.070 --> 00:15:59.680\nBut I can see that I do have\na neighbor here, 192.168.255.2.\n\n318\n00:15:59.680 --> 00:16:04.530\nAnd if I look over a little bit I've\n\n319\n00:16:04.530 --> 00:16:09.820\ngot 192.168.12.5 is the actual\naddress of that node so\n\n320\n00:16:09.820 --> 00:16:13.580\nthat is NYEDGE2 so\nnow we're building that adjacency.\n\n321\n00:16:13.580 --> 00:16:16.500\nOh, and\nI just saw that 1.1.1.1 aged out, right?\n\n322\n00:16:16.500 --> 00:16:19.862\nThe timer expired and so\nif I do a show ip ospf neighbor.\n\n323\n00:16:19.862 --> 00:16:21.812\nThat one now gone.\n\n324\n00:16:21.812 --> 00:16:25.390\nAll right, so in this case,\nduplicate router ID,\n\n325\n00:16:25.390 --> 00:16:28.670\nand while the message wasn't displayed on\nmy screen in the beginning because console\n\n326\n00:16:28.670 --> 00:16:30.650\nlogging wasn't on, it was in my logs.\n\n327\n00:16:30.650 --> 00:16:33.270\nA show log would have\nturned that up right away.\n\n328\n00:16:33.270 --> 00:16:35.090\nWe see the issue, we get in, we fix it.\n\n329\n00:16:35.090 --> 00:16:37.820\nSo, duplicate router IDs,\nthat will stop an adacency from forming.\n\n330\n00:16:37.820 --> 00:16:41.630\nAll right, well that pretty much wraps\nit up for this troubleshooting ticket.\n\n331\n00:16:41.630 --> 00:16:45.196\nNow, we should have all of our OSPF routes\nspread through our environment nice and\n\n332\n00:16:45.196 --> 00:16:46.643\nhappy, everybody's talking,\n\n333\n00:16:46.643 --> 00:16:49.760\nand exchanging,\nthe way that routes are supposed to work.\n\n334\n00:16:49.760 --> 00:16:53.130\nWe do still have one more troubleshooting\nticket to tackle in this set so\n\n335\n00:16:53.130 --> 00:16:54.319\nwe'll get to that next.\n\n336\n00:16:54.319 --> 00:16:57.252\nStay tuned, I hope to see you there.\n\n337\n00:16:57.252 --> 00:17:03.209\n[MUSIC]\n\n",
          "vimeoId": "149153573"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #8` from set #1. The trouble ticket states that \"PLABCSCO01 is unable to communicate to 192.168.226.0. Routes exist to this subnet, but you are unable to communicate to it from PLABCSCO01 and you can from NYWAN1. \"",
          "length": "1934",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-8-set_1_issue_8-113015-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-8-set_1_issue_8-113015-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-1-8-set_1_issue_8-113015-1-sm.jpg",
          "title": "Set 1 Issue 8",
          "transcript": "WEBVTT\n\n1\n00:00:00.025 --> 00:00:05.976\n[SOUND] Now it's time for\nthe final issue in Set 1 and\n\n2\n00:00:05.976 --> 00:00:12.352\nit looks like we have a doozy here for\nthe grand finale.\n\n3\n00:00:12.352 --> 00:00:15.970\nThis one sounds a little more complex that\nthe other ones we've dealt with before.\n\n4\n00:00:15.970 --> 00:00:19.033\nLet me read the scenario here,\nWe've got PLAB Cisco 01,\n\n5\n00:00:19.033 --> 00:00:20.820\nour good old trusty Cisco server.\n\n6\n00:00:20.820 --> 00:00:26.694\nIt's unable to communicate\nto 192.168.226.0.\n\n7\n00:00:26.694 --> 00:00:28.485\nWell, .0, so that's a whole network.\n\n8\n00:00:28.485 --> 00:00:30.410\nApparently this whole\nnetwork it can't get to.\n\n9\n00:00:30.410 --> 00:00:33.740\nAnd it says,\nwhile routes exists to the subnet,\n\n10\n00:00:33.740 --> 00:00:40.180\nyou are unable to communicate to it from\nPLAB Cisco 01 but you can from NYWAN1.\n\n11\n00:00:40.180 --> 00:00:41.300\nThat's pretty interesting.\n\n12\n00:00:41.300 --> 00:00:44.660\nLet's look at our diagram and\nsee if we can't unravel this mystery.\n\n13\n00:00:44.660 --> 00:00:47.620\nI just want to start by figuring out\nwhat the path of traffic is that\n\n14\n00:00:47.620 --> 00:00:49.380\nwe're even talking about here.\n\n15\n00:00:49.380 --> 00:00:50.510\nWe know our trusty server.\n\n16\n00:00:50.510 --> 00:00:53.930\nThis guy way down at the bottom who's been\nin almost every trouble shooting scenario\n\n17\n00:00:53.930 --> 00:00:55.380\nwe've had to deal with so far.\n\n18\n00:00:55.380 --> 00:00:59.340\nThis guys is where we're trying to\nping from and it's not working.\n\n19\n00:00:59.340 --> 00:01:01.830\nAnd so\nit rattles around all this equipment.\n\n20\n00:01:01.830 --> 00:01:04.410\nA couple of switches,\na couple of routers and\n\n21\n00:01:04.410 --> 00:01:09.110\nthen it's trying to get to 192.168.226\nwhich is a network I haven't seen yet.\n\n22\n00:01:09.110 --> 00:01:12.900\nSo, if we look in our little tables here,\nthere we go.\n\n23\n00:01:12.900 --> 00:01:14.295\nIt's actually staring right at me.\n\n24\n00:01:14.295 --> 00:01:18.011\n192.168.226 and\nit looks like it's subnetted.\n\n25\n00:01:18.011 --> 00:01:23.113\nNow, in the problem it\nspecifically said 192.168.226.0.\n\n26\n00:01:23.113 --> 00:01:27.650\nIt didn't mention 0.32 so I'm going to\nignore that one and focus in on this one.\n\n27\n00:01:27.650 --> 00:01:29.200\nWe've got a /27.\n\n28\n00:01:29.200 --> 00:01:33.831\nSo, this network is residing\nout here in EIGRP 800 and\n\n29\n00:01:33.831 --> 00:01:38.050\nthat's a public network\nhere that we've got.\n\n30\n00:01:38.050 --> 00:01:42.130\nLondon WAN, New York WAN, these\nare ISP's or other vendors or whatever.\n\n31\n00:01:42.130 --> 00:01:43.750\nThis is equipment that we don't control.\n\n32\n00:01:43.750 --> 00:01:46.266\nSo I can't log into this router,\nI can't log into that router.\n\n33\n00:01:46.266 --> 00:01:49.207\nI can't see what's going on in them,\nI just know that they're out there, and\n\n34\n00:01:49.207 --> 00:01:50.915\nthat I should be able\nto communicate to them.\n\n35\n00:01:50.915 --> 00:01:57.910\nAnd it told me in the problem that NYWAN1,\nthis guy, could get to the network.\n\n36\n00:01:57.910 --> 00:01:59.690\nSo this guy's okay reaching out and\n\n37\n00:01:59.690 --> 00:02:02.840\ngetting to wherever that particular\nnetwork happens to reside.\n\n38\n00:02:02.840 --> 00:02:05.760\nIt's people inside of my network,\napparently, that can't, or\n\n39\n00:02:05.760 --> 00:02:07.630\nat least PLABCISCO01.\n\n40\n00:02:07.630 --> 00:02:13.470\nSo, what we need to think about are what\nare some of the possible causes, okay?\n\n41\n00:02:13.470 --> 00:02:18.920\nIf NYWAN1 can get to the network,\nshouldn't everybody?\n\n42\n00:02:18.920 --> 00:02:19.604\nWell, not necessarily.\n\n43\n00:02:19.604 --> 00:02:21.726\nSee how we've got EIGRP right here?\n\n44\n00:02:21.726 --> 00:02:22.969\nEIGRP 500?\n\n45\n00:02:22.969 --> 00:02:28.240\nAnd then we've got OSPF Area 0 here, and\nwe've got our system all behind that.\n\n46\n00:02:28.240 --> 00:02:32.250\nSo if NYWAN1 is sending\nthe route into our network,\n\n47\n00:02:32.250 --> 00:02:35.990\nsomebody's gotta redistribute that route,\nlike NYEDGE1 here.\n\n48\n00:02:35.990 --> 00:02:38.881\nIt's gotta be doing route redistribution\nbetween the two networks or\n\n49\n00:02:38.881 --> 00:02:40.547\nthese guys won't even know about that.\n\n50\n00:02:40.547 --> 00:02:43.075\nIt could be that I'm going\nto my default gateway,\n\n51\n00:02:43.075 --> 00:02:45.132\nwhich is in between these two switches.\n\n52\n00:02:45.132 --> 00:02:47.071\nAnd then they don't have\na route to get there.\n\n53\n00:02:47.071 --> 00:02:51.372\nSo I needed to get an idea of\nwhere the breakdown is happening.\n\n54\n00:02:51.372 --> 00:02:54.066\nThe best way to do that is traceroute.\n\n55\n00:02:54.066 --> 00:02:55.603\nTraceroute will help me spot that, so\n\n56\n00:02:55.603 --> 00:02:57.940\nthat I don't have to go\ndevice to device to device.\n\n57\n00:02:57.940 --> 00:03:00.780\nThere's a lot of devices involved\nin this potential problem.\n\n58\n00:03:00.780 --> 00:03:04.370\nI could have one route where I\ngo through ACCESS1, to CORE1,\n\n59\n00:03:04.370 --> 00:03:06.082\nto EDGE1, to WAN1 and out.\n\n60\n00:03:06.082 --> 00:03:12.621\nAnother route which would be ACCESS1 to\nCORE2 to EDGE2 to EDGE1 to LAN1 and out.\n\n61\n00:03:12.621 --> 00:03:14.280\nSo different ways we could go.\n\n62\n00:03:14.280 --> 00:03:17.530\nI'd have to look at every device, but\ntraceroute's going to help me dial this\n\n63\n00:03:17.530 --> 00:03:19.660\ndown and\nget an idea of where to actually look.\n\n64\n00:03:19.660 --> 00:03:23.200\nSo I'm going to jump over to my\nCisco Server, and I'll start here.\n\n65\n00:03:23.200 --> 00:03:24.840\nRight, so here's the Cisco Server.\n\n66\n00:03:24.840 --> 00:03:29.260\nI'm going to fire open my\ncommand prompt and oh shoot.\n\n67\n00:03:29.260 --> 00:03:30.450\nI'm forgetting something.\n\n68\n00:03:30.450 --> 00:03:32.500\nI probably need something to ping.\n\n69\n00:03:32.500 --> 00:03:33.240\nIn the problem,\n\n70\n00:03:33.240 --> 00:03:36.690\nthey go to great length to tell me about\nthese networks that I can't get to.\n\n71\n00:03:36.690 --> 00:03:40.180\nBut they didn't really give me any host\non the network to test with, right?\n\n72\n00:03:40.180 --> 00:03:42.752\nSo if I read a little\nmore into the problem,\n\n73\n00:03:42.752 --> 00:03:44.975\nif I bother read the documentation.\n\n74\n00:03:44.975 --> 00:03:50.465\nThe very next thing it does is it gives an\nexample and shows pinging 192.168.226.1.\n\n75\n00:03:50.465 --> 00:03:54.445\nSo apparently there is a host out\nthere and before I even start there,\n\n76\n00:03:54.445 --> 00:03:57.200\nI'm gonna go verify that host is active.\n\n77\n00:03:57.200 --> 00:04:01.567\nThey told me that NYWAN1 could get to the\nhost, so I'm gonna jump over the NYWAN1,\n\n78\n00:04:01.567 --> 00:04:05.625\nto this router, and I'm just gonna verify\nthat it can just before I get heavily\n\n79\n00:04:05.625 --> 00:04:10.055\ninvested in troubleshooting a problem that\nmight be a little trickier than we think,\n\n80\n00:04:10.055 --> 00:04:11.923\nso that's why I want to start here.\n\n81\n00:04:11.923 --> 00:04:17.146\nAnd I'm just gonna do a quick\nping to 192.168.226.1.\n\n82\n00:04:17.146 --> 00:04:18.916\nAll right, and I am able to get there.\n\n83\n00:04:18.916 --> 00:04:21.571\nThat host is up and functional,\nthis guy can get there,\n\n84\n00:04:21.571 --> 00:04:23.220\njust like the problem described.\n\n85\n00:04:24.390 --> 00:04:27.900\nSo now I'm gonna go back and\nwe'll do that traceroute.\n\n86\n00:04:27.900 --> 00:04:34.880\nSo I'll switch over to that Cisco Server\nI'm gonna run just a quick traceroute.\n\n87\n00:04:34.880 --> 00:04:37.360\nI guess I could start with a ping just\nto verify that it doesn't work, but\n\n88\n00:04:37.360 --> 00:04:39.520\nthat doesn't really tell us all that much.\n\n89\n00:04:39.520 --> 00:04:41.260\nWe might get a destination\nUnreachable message.\n\n90\n00:04:41.260 --> 00:04:41.830\nThat would help us.\n\n91\n00:04:41.830 --> 00:04:43.500\nThat would let us know\nthe route was missing.\n\n92\n00:04:43.500 --> 00:04:46.890\nBut, in the problem it said\nthe routes do exist so\n\n93\n00:04:46.890 --> 00:04:48.870\nI can probably trust\nthe question on that one.\n\n94\n00:04:48.870 --> 00:04:50.483\nIn this case I'm just getting a time out.\n\n95\n00:04:50.483 --> 00:04:56.608\nI'm gonna do a traceroute\nto 192.168.226.1.\n\n96\n00:04:56.608 --> 00:04:58.385\nAnd I'm going to send that out.\n\n97\n00:04:58.385 --> 00:05:00.321\nNow I know NYWAN1 can get there,\n\n98\n00:05:00.321 --> 00:05:03.375\nI just don't know what other\ndevices know about it.\n\n99\n00:05:03.375 --> 00:05:04.803\nSo I'm going to wait and see.\n\n100\n00:05:04.803 --> 00:05:07.303\nThe first hop is going to\nbe my default gateway, and\n\n101\n00:05:07.303 --> 00:05:09.780\nmy default gateway is that HSRP cluster.\n\n102\n00:05:09.780 --> 00:05:13.444\nSo I'm going to NYCORE1 or\nNYCORE2 and that shared IP.\n\n103\n00:05:13.444 --> 00:05:17.752\nThe next hop is 192.168.16.4.\n\n104\n00:05:17.752 --> 00:05:19.319\nThat's NYEDGE1.\n\n105\n00:05:19.319 --> 00:05:21.170\nRemember from the previous problems.\n\n106\n00:05:21.170 --> 00:05:23.780\nSo I made it to NYEDGE1.\n\n107\n00:05:23.780 --> 00:05:25.700\nNow, that's gonna help me.\n\n108\n00:05:25.700 --> 00:05:28.610\nIt doesn't necessarily tell me where\nthe problem is but what it does,\n\n109\n00:05:28.610 --> 00:05:29.960\nit lets me rule out these guys.\n\n110\n00:05:29.960 --> 00:05:32.160\nSo I can just skip right\nover those switches and\n\n111\n00:05:32.160 --> 00:05:34.980\nnow I've shrunk my world down quite a bit.\n\n112\n00:05:34.980 --> 00:05:39.580\nMy world is basically this server,\nmakes it to EDGE1 and\n\n113\n00:05:39.580 --> 00:05:41.146\nthen times out after EDGE1.\n\n114\n00:05:41.146 --> 00:05:44.530\nWell, EDGE1 is passing through\nWAN1 on its way out, and so\n\n115\n00:05:44.530 --> 00:05:47.710\nI've got a problem on\none of these two nodes.\n\n116\n00:05:47.710 --> 00:05:51.080\nSo, I just went from having five or\nsix devices to troubleshoot to only having\n\n117\n00:05:51.080 --> 00:05:53.790\ntwo devices to troubleshoot, and\nnow we can start to narrow it down.\n\n118\n00:05:55.100 --> 00:05:57.290\nNow one thing I wanna\ndo is jump to EDGE1 and\n\n119\n00:05:57.290 --> 00:06:02.180\nI'm gonna try and do the same ping\nfrom EDGE1 and see if it can get out.\n\n120\n00:06:02.180 --> 00:06:05.770\nBecause if it can't get out then I can\nstop paying attention to the server and\n\n121\n00:06:05.770 --> 00:06:07.390\nI can just work on these two nodes.\n\n122\n00:06:07.390 --> 00:06:10.360\nAgain just trying to minimize the amount\nof devices I have to work with.\n\n123\n00:06:10.360 --> 00:06:11.935\nSo I'm gonna jump over to EDGE1.\n\n124\n00:06:13.990 --> 00:06:15.180\nAnd I don't know if.\n\n125\n00:06:15.180 --> 00:06:18.030\nWe haven't logged into this guy in\na while, so let's jump in here and\n\n126\n00:06:18.030 --> 00:06:20.100\njust see what we have.\n\n127\n00:06:20.100 --> 00:06:23.960\nI'm going to go show IP interface brief,\njust see what interfaces I've got.\n\n128\n00:06:23.960 --> 00:06:25.657\nOh, this is the guy with\nrouter on a stick, I remember.\n\n129\n00:06:25.657 --> 00:06:30.233\nSo we've got a bunch of different\ninterfaces here, to communicate to WAN1.\n\n130\n00:06:30.233 --> 00:06:33.855\nI'm communicating over the serial\ninterface, serial 001.\n\n131\n00:06:33.855 --> 00:06:37.805\nAnd if I look at serial 001,\nI'm 192.168.255.4, and\n\n132\n00:06:37.805 --> 00:06:41.560\nwe could probably guess the person\non the other side, but let's just\n\n133\n00:06:41.560 --> 00:06:46.610\ndo a show CDP neighbor and see if that\nwill show us the person on the other side.\n\n134\n00:06:46.610 --> 00:06:48.960\nThere we go NYWAN1.\n\n135\n00:06:48.960 --> 00:06:53.280\nAnd so\nI'm gonna say show cdp entry NYWAN1,\n\n136\n00:06:53.280 --> 00:06:55.840\njust to get some nice\ndetailed information.\n\n137\n00:06:55.840 --> 00:06:58.848\nAnd so I can see the IP\naddress on the other side.\n\n138\n00:06:58.848 --> 00:07:01.841\nSo it is 192.168.255.5.\n\n139\n00:07:01.841 --> 00:07:04.550\nSo I'm just gonna test that connectivity.\n\n140\n00:07:06.170 --> 00:07:08.190\nAnd see that I can ping across them.\n\n141\n00:07:08.190 --> 00:07:11.650\nSo what I just tested, it was whether or\nnot this serial link was good.\n\n142\n00:07:11.650 --> 00:07:13.840\nThe serial link is up,\nI'm able to ping across it.\n\n143\n00:07:13.840 --> 00:07:17.190\nSo NYEDGE1 can ping across it.\n\n144\n00:07:17.190 --> 00:07:21.553\nAnd it's running EIGRP, so I should have\nan EIGRP adjacency in between those two or\n\n145\n00:07:21.553 --> 00:07:22.248\na neighbor.\n\n146\n00:07:22.248 --> 00:07:27.216\nSo if I do a show ip eigrp neighbor,\nthere it is,\n\n147\n00:07:27.216 --> 00:07:30.708\n192.168.255.5.\n\n148\n00:07:30.708 --> 00:07:33.168\nSo I am talking to it, looks like it's up.\n\n149\n00:07:33.168 --> 00:07:39.366\nIf I do a show ip route eigrp, I should\nsee that I'm learning some eigrp routes,\n\n150\n00:07:39.366 --> 00:07:47.010\nand I am, including 192.168.226.0, I can\nsee it right there in my routing table.\n\n151\n00:07:47.010 --> 00:07:50.458\nSo, I'm learning the routes,\nand they're coming in.\n\n152\n00:07:50.458 --> 00:07:55.568\nRemember, NYEDGE1, this is the guy who\nwould be redistributing between two areas.\n\n153\n00:07:55.568 --> 00:07:57.808\nSo I might have a route\nredistribution problem.\n\n154\n00:07:57.808 --> 00:07:59.188\nWell, be careful with that.\n\n155\n00:07:59.188 --> 00:08:01.306\nRoute redistribution is hard, right.\n\n156\n00:08:01.306 --> 00:08:04.187\nIt's a difficult thing to configure and\nthere's a lot of different options and\n\n157\n00:08:04.187 --> 00:08:05.700\nstuff that can go wrong.\n\n158\n00:08:05.700 --> 00:08:07.510\nBut is that my problem?\n\n159\n00:08:07.510 --> 00:08:09.970\nWell, I never did look at\nthe routing tables down here.\n\n160\n00:08:09.970 --> 00:08:12.585\nBut, let me see if I can ping.\n\n161\n00:08:12.585 --> 00:08:14.410\nCuz if this guy can ping out.\n\n162\n00:08:14.410 --> 00:08:16.350\nThen maybe it is a redistribution problem.\n\n163\n00:08:16.350 --> 00:08:19.731\nBut if this guy can't ping out, that's\nbefore the redistribution even occurs,\n\n164\n00:08:19.731 --> 00:08:22.867\nI might be able to skip past all the\nredistribution stuff to make this problem\n\n165\n00:08:22.867 --> 00:08:23.602\na little easier.\n\n166\n00:08:23.602 --> 00:08:24.800\nSo, I'm gonna try and do that.\n\n167\n00:08:24.800 --> 00:08:31.350\nI'll try and ping to 192.168.226.1,\nand I can get there.\n\n168\n00:08:31.350 --> 00:08:32.050\nOkay.\n\n169\n00:08:32.050 --> 00:08:38.589\nSo, NYEDGE1 is able to\nget to 192.168.226.1.\n\n170\n00:08:38.589 --> 00:08:40.380\nBut I'm not.\n\n171\n00:08:40.380 --> 00:08:43.000\nSo, maybe I'm not\nredistributing that route.\n\n172\n00:08:43.000 --> 00:08:45.350\nBut I know that's not the case,\nnow how do I know that?\n\n173\n00:08:45.350 --> 00:08:48.236\nBecause when I did the traceroute\nfrom this workstation.\n\n174\n00:08:48.236 --> 00:08:51.368\nI was able to make it all the way up here.\n\n175\n00:08:51.368 --> 00:08:54.920\nThese switches would've known to send\nme up here if they didn't have a route.\n\n176\n00:08:54.920 --> 00:08:57.195\nSo I know they have it but\nI'm gonna double check.\n\n177\n00:08:57.195 --> 00:08:58.520\nCuz you never know, right.\n\n178\n00:08:58.520 --> 00:08:59.870\nIt could be wrong.\n\n179\n00:08:59.870 --> 00:09:02.379\nSo I'll jump over and\nI'll just check CORE2.\n\n180\n00:09:04.328 --> 00:09:09.040\nI'm checking CORE2 cuz if I remember right\nit was the active one from my network and\n\n181\n00:09:09.040 --> 00:09:10.400\nwe can verify that too.\n\n182\n00:09:10.400 --> 00:09:13.600\nSo if I do a quick show standby vlan 16.\n\n183\n00:09:13.600 --> 00:09:14.690\nIt should be the active one.\n\n184\n00:09:14.690 --> 00:09:15.345\nIt is.\n\n185\n00:09:15.345 --> 00:09:21.475\nAnd if I do a show IP route for\n192.168.226.1.\n\n186\n00:09:21.475 --> 00:09:23.333\nIt's got a route.\n\n187\n00:09:23.333 --> 00:09:26.160\nSo it is learning the route so\nthis isn't a redistribution problem.\n\n188\n00:09:26.160 --> 00:09:29.925\nI am getting the route and\nI'm learning it's right here.\n\n189\n00:09:29.925 --> 00:09:32.470\nOkay.\nSo if I'm learning it,\n\n190\n00:09:32.470 --> 00:09:34.980\nif I've got the route,\nif I know how to get there.\n\n191\n00:09:34.980 --> 00:09:36.160\nWhere's my problem from here?\n\n192\n00:09:36.160 --> 00:09:38.100\nWell, we're passing along.\n\n193\n00:09:39.320 --> 00:09:44.430\nAnd basically moving to EDGE1, and\nfrom EDGE1 we should move to WAN1,\n\n194\n00:09:44.430 --> 00:09:47.540\nand then from WAN1 we should\nmove on the rest of the way.\n\n195\n00:09:47.540 --> 00:09:49.980\nWell what could stop that from working?\n\n196\n00:09:49.980 --> 00:09:52.360\nLet's think about things that\ncould stop this from working.\n\n197\n00:09:52.360 --> 00:09:54.302\nIf I know that I make it\nall the way up to EDGE1.\n\n198\n00:09:54.302 --> 00:09:57.630\nAnd Edge1 has a route\nthat sends me to WAN1.\n\n199\n00:09:57.630 --> 00:10:00.765\nAnd then on WAN1, I'm kind of dying out,\nsomething's happening there.\n\n200\n00:10:00.765 --> 00:10:03.300\nRight?\nWhat could that be?\n\n201\n00:10:03.300 --> 00:10:05.270\nWell, it could be an access control list.\n\n202\n00:10:05.270 --> 00:10:06.510\nI could be being filtered.\n\n203\n00:10:06.510 --> 00:10:10.370\nThere could be a filter on serial 0/1/0,\nthis interface right here.\n\n204\n00:10:10.370 --> 00:10:11.950\nThere could actually be a filter here.\n\n205\n00:10:11.950 --> 00:10:13.160\nIt would look the same.\n\n206\n00:10:13.160 --> 00:10:14.800\nSo I could be getting\nblocked on those links.\n\n207\n00:10:14.800 --> 00:10:16.460\nI could be getting blocked\non these other links.\n\n208\n00:10:16.460 --> 00:10:18.060\nSo ACLs could be blocking me.\n\n209\n00:10:18.060 --> 00:10:19.820\nI might need to double-check that.\n\n210\n00:10:19.820 --> 00:10:22.190\nWe could also have unidirectional routing.\n\n211\n00:10:22.190 --> 00:10:26.450\nMaybe I know how to get there, and the\nother node doesn't know how to get back.\n\n212\n00:10:26.450 --> 00:10:31.580\nMaybe NYWAN1 does it know how\nto get to 192.168.16.10 right?\n\n213\n00:10:31.580 --> 00:10:33.970\nThat's my server's IP down here.\n\n214\n00:10:33.970 --> 00:10:36.400\nCan NYWAN1 make it back?\n\n215\n00:10:36.400 --> 00:10:37.450\nI don't know.\n\n216\n00:10:37.450 --> 00:10:41.670\nWell, we can test that pretty easy by\npinging from our server to NYWAN1.\n\n217\n00:10:41.670 --> 00:10:44.930\nIf I know a valid IP on that router,\nright?\n\n218\n00:10:44.930 --> 00:10:48.550\nSo let me go to NYWAN1 and\nwe'll find a valid IP.\n\n219\n00:10:48.550 --> 00:10:50.320\nAnd then we can test that out, right?\n\n220\n00:10:50.320 --> 00:10:53.478\nSo, if I do a show IP\ninterface brief on NYWAN1.\n\n221\n00:10:53.478 --> 00:10:57.573\nI've got a few IPs to pick from,\nI'll take this internal IP.\n\n222\n00:10:57.573 --> 00:11:00.780\nCuz that's how it's\ngonna talk to me anyway.\n\n223\n00:11:00.780 --> 00:11:01.905\nSo, 192.168.255.5.\n\n224\n00:11:01.905 --> 00:11:04.170\nAnd I'm gonna go back to my server.\n\n225\n00:11:04.170 --> 00:11:08.360\nAnd I'm just gonna see if\nthe server can ping that.\n\n226\n00:11:08.360 --> 00:11:10.740\nSo I'm gonna ping 192.168.255.5.\n\n227\n00:11:10.740 --> 00:11:16.060\nAnd I'm not getting there.\n\n228\n00:11:16.060 --> 00:11:18.270\nOkay, so I'm not getting there.\n\n229\n00:11:18.270 --> 00:11:19.910\nNow, where am I dying out?\n\n230\n00:11:19.910 --> 00:11:22.150\nI could do a traceroute and find out.\n\n231\n00:11:23.610 --> 00:11:24.850\nJust like we did before, right?\n\n232\n00:11:24.850 --> 00:11:28.060\nSo I'm just gonna do a traceroute to\nthat IP and kinda see where it dies.\n\n233\n00:11:28.060 --> 00:11:29.890\nNow I should be able to get there and\nI'm not.\n\n234\n00:11:29.890 --> 00:11:31.390\nIt could be that I don't have a route for\nit,\n\n235\n00:11:31.390 --> 00:11:33.552\nbut it looks like I am making\nit to my default gateway.\n\n236\n00:11:33.552 --> 00:11:36.240\nAnd then from the default gateway.\n\n237\n00:11:36.240 --> 00:11:38.960\nWe jump over to the next post in line.\n\n238\n00:11:40.390 --> 00:11:44.010\nWhich apparently, we don't get very far\nin, and I got 192.168.0.250, which is\n\n239\n00:11:44.010 --> 00:11:49.340\nan IP that I don't think I've seen before,\nso I'm kinda curious who that is.\n\n240\n00:11:49.340 --> 00:11:51.170\nOn my way out that link.\n\n241\n00:11:51.170 --> 00:11:53.670\nSo, we definitely have\nsome kind of issue there.\n\n242\n00:11:53.670 --> 00:11:55.900\nI could try a different IP on that router.\n\n243\n00:11:55.900 --> 00:12:00.400\nIt had a few different IPs,\nif we wanna kinda narrow that down some.\n\n244\n00:12:00.400 --> 00:12:02.084\nLet's see that was NYWAN1.\n\n245\n00:12:02.084 --> 00:12:06.681\nAnother IP was 172.16.16.1,\nso we could try that.\n\n246\n00:12:06.681 --> 00:12:10.670\nLet me jump back over to my server, and\n\n247\n00:12:10.670 --> 00:12:14.793\nwe'll try 172.16.16.1.\n\n248\n00:12:14.793 --> 00:12:19.080\nAnd that's not looking good.\n\n249\n00:12:19.080 --> 00:12:22.510\nSo [LAUGH] not a lot of\nsuccess there either.\n\n250\n00:12:22.510 --> 00:12:25.340\nSo, we've definitely got\nsome break downs here where.\n\n251\n00:12:25.340 --> 00:12:30.080\nIt seems like we don't know the routes or\nthey don't know the route back.\n\n252\n00:12:30.080 --> 00:12:33.342\nNow, it could be either way so\nunfortunately we are gonna step through\n\n253\n00:12:33.342 --> 00:12:36.010\neach device and\nkinda see where these breakdown occurs.\n\n254\n00:12:36.010 --> 00:12:37.630\nAll right.\nI gotta find out where the breakdown and\n\n255\n00:12:37.630 --> 00:12:39.480\ncommunications occurs so\nwe can troubleshoot and\n\n256\n00:12:39.480 --> 00:12:41.078\nfigure out what our issue is.\n\n257\n00:12:41.078 --> 00:12:46.640\nAll right, so the path that I'm following\nis I'm going to PLABCSCO01 to my.\n\n258\n00:12:46.640 --> 00:12:47.690\nMy router is here, right?\n\n259\n00:12:47.690 --> 00:12:50.680\nThese guys are running HSRP,\nit's got the routing table, so\n\n260\n00:12:50.680 --> 00:12:53.750\nit needs to know both directions,\nit needs to know how to get to NYWAN1.\n\n261\n00:12:53.750 --> 00:12:57.850\nAnd it needs to know how to get to Cisco.\n\n262\n00:12:57.850 --> 00:13:01.230\nThen NYEDGE1 needs to\nknow both directions, and\n\n263\n00:13:01.230 --> 00:13:03.868\nlastly NYWAN1 needs to\nknow both directions.\n\n264\n00:13:03.868 --> 00:13:08.430\nSo I'm gonna step through, and I find it\neasier if you test one direction first.\n\n265\n00:13:08.430 --> 00:13:09.780\nAnd then come back and\ntest the other direction.\n\n266\n00:13:09.780 --> 00:13:11.980\nDon't try and test both at the same time,\nit gets really confusing.\n\n267\n00:13:11.980 --> 00:13:16.380\nSo what I'm gonna do is I'm gonna take\nthis guy right here, 192.168.16.10.\n\n268\n00:13:16.380 --> 00:13:20.300\nAnd I'm gonna see if everybody knows\nhow to get back to it, all right.\n\n269\n00:13:20.300 --> 00:13:21.920\nAnd I'm gonna start right here at CORE2.\n\n270\n00:13:21.920 --> 00:13:26.120\nI already know it does, but\nI just want to make sure and be complete.\n\n271\n00:13:26.120 --> 00:13:27.660\nCuz weird problems could creep up.\n\n272\n00:13:28.790 --> 00:13:33.530\nSo here on CORE2, I'm just gonna\nsay show ip route 192.168.16.10.\n\n273\n00:13:33.530 --> 00:13:38.060\nIt should be directly connected,\nso yep, there we go.\n\n274\n00:13:38.060 --> 00:13:39.910\nSo I've got a route, no big deal there and\n\n275\n00:13:39.910 --> 00:13:43.100\nI can even throw in a ping\njust to be on the safe side.\n\n276\n00:13:43.100 --> 00:13:46.380\nTo see that I can get to it, all right.\n\n277\n00:13:46.380 --> 00:13:49.885\nThen I'm gonna move up to EDGE1,\nEDGE1 is next.\n\n278\n00:13:49.885 --> 00:13:56.630\nAnd on EDGE1, I'm gonna do\na show ip route 192.168.16.10.\n\n279\n00:13:56.630 --> 00:13:58.430\nAnd I've got a route.\n\n280\n00:13:58.430 --> 00:14:00.185\nIt's directly connected, and\n\n281\n00:14:00.185 --> 00:14:03.504\nI'm gonna ping it just to make\nsure I've got connectivity.\n\n282\n00:14:03.504 --> 00:14:06.741\nAnd we're good, okay.\n\n283\n00:14:06.741 --> 00:14:12.380\nAnd lastly, I'm gonna go NYWAN1 and\nrepeat that same process.\n\n284\n00:14:12.380 --> 00:14:18.372\nAnd so on NYWAN1, if we take a look at it.\n\n285\n00:14:18.372 --> 00:14:23.083\nI just want to do a show IP route\n\n286\n00:14:23.083 --> 00:14:28.367\n192.168.16.10.\n\n287\n00:14:28.367 --> 00:14:30.225\nAnd I don't have a route, okay?\n\n288\n00:14:30.225 --> 00:14:35.160\nSo, NYWAN1 does not have a route\nto get to the 192.168.16 network.\n\n289\n00:14:35.160 --> 00:14:37.440\nSo, it's not getting me back there.\n\n290\n00:14:37.440 --> 00:14:39.760\nSo, that's a bit of a problem, right?\n\n291\n00:14:39.760 --> 00:14:41.650\nIt kind of makes me wonder\nwhat routes it does have.\n\n292\n00:14:41.650 --> 00:14:44.130\nSo, I'm gonna go show IP route\njust to see what it does have.\n\n293\n00:14:45.470 --> 00:14:47.410\nAnd I see it's got some EIGRP routes.\n\n294\n00:14:47.410 --> 00:14:49.960\nIt's got EIGRP routes for the public ones.\n\n295\n00:14:49.960 --> 00:14:56.330\nOn the inside, I'm just seeing 172.16,\n172.88 those are all external.\n\n296\n00:14:56.330 --> 00:14:58.890\nActually not seeing any of the internal.\n\n297\n00:14:58.890 --> 00:15:04.030\nI'm not seeing 192.168.10,\n.11, .12, all those VLANs.\n\n298\n00:15:04.030 --> 00:15:07.900\nIt doesn't know about, so it doesn't know\nhow to get to the 192.168.16 network.\n\n299\n00:15:07.900 --> 00:15:12.800\nThat's probably what's breaking\nour solution here, and\n\n300\n00:15:12.800 --> 00:15:14.830\nthe reason why it's able to get out.\n\n301\n00:15:14.830 --> 00:15:19.580\nRemember when I tested to get out,\nI found that NYWAN1 could get out and\n\n302\n00:15:19.580 --> 00:15:21.090\nit did it just fine.\n\n303\n00:15:21.090 --> 00:15:25.220\nAnd NYWAN1 could get out, and\nNYEDGE1 could get out also.\n\n304\n00:15:25.220 --> 00:15:29.890\nWell, NYEDGE1 is plugged into\na network that's the same as NYWAN1.\n\n305\n00:15:29.890 --> 00:15:33.560\nI bet if I'd sourced that from a different\ninterface it would have broken.\n\n306\n00:15:33.560 --> 00:15:36.740\nBut let's test that theory,\nthat'll really help us find our problem.\n\n307\n00:15:36.740 --> 00:15:41.190\nSo on NYEDGE1,\nI've got more than one IP, right?\n\n308\n00:15:41.190 --> 00:15:43.680\nAnd if I do a show ip int brief.\n\n309\n00:15:43.680 --> 00:15:45.268\nWe'll see all the IPs I've got.\n\n310\n00:15:45.268 --> 00:15:49.175\nNow when I do a ping to\nsomebody like a public IP,\n\n311\n00:15:49.175 --> 00:15:55.941\n192.168.226.1 is the WAN address\nwe're pinging in this example.\n\n312\n00:15:55.941 --> 00:16:00.255\nIt's gonna find the best route to get\nthere, and it knows the best route is\n\n313\n00:16:00.255 --> 00:16:05.068\nthrough NYEDGE1, and\nit knows that NYEDGE1 is 192.168.255.5.\n\n314\n00:16:05.068 --> 00:16:07.040\nSo it looks at the interfaces, and\n\n315\n00:16:07.040 --> 00:16:10.570\nit sees that this serial\ninterface is on that network.\n\n316\n00:16:10.570 --> 00:16:14.410\nAnd so when it sends the ping,\nit's gonna source it from that interface.\n\n317\n00:16:14.410 --> 00:16:16.944\nIt's going to show as being\nfrom that interface, right.\n\n318\n00:16:16.944 --> 00:16:23.160\nAnd you can actually hard set that if you\nwant by saying source and then serial0/0/1\n\n319\n00:16:23.160 --> 00:16:28.626\nso that you know it's using the IP address\nfrom that interface as the source.\n\n320\n00:16:28.626 --> 00:16:33.502\nSee how it says packet sent with\na source address of 192.168.225.4.\n\n321\n00:16:33.502 --> 00:16:41.039\nWell, let's see what happens if I send\nit with a source of 192.168.16, right.\n\n322\n00:16:41.039 --> 00:16:45.274\nSo I'm gonna say source gi0/0.16 and\n\n323\n00:16:45.274 --> 00:16:52.840\nthis time it's gonna send with\na source of 192.168.16.4.\n\n324\n00:16:52.840 --> 00:16:59.110\nAnd it fails, all right, so\nthis one really does boil down to NYWAN1.\n\n325\n00:16:59.110 --> 00:17:03.587\nThis guy, not knowing how to get\nback to the 192.168.16 network.\n\n326\n00:17:03.587 --> 00:17:04.930\nNow, how do I fix that?\n\n327\n00:17:06.160 --> 00:17:07.010\nI got two choices.\n\n328\n00:17:07.010 --> 00:17:07.718\nYou got a couple of choices, right?\n\n329\n00:17:07.718 --> 00:17:11.235\nSo first choice, I could just put\na static route on NYWAN1 that says hey,\n\n330\n00:17:11.235 --> 00:17:13.500\nhere's how you get to that network.\n\n331\n00:17:13.500 --> 00:17:16.440\nAnd now it'll now, all right,\nso that's one way.\n\n332\n00:17:16.440 --> 00:17:21.510\nThe other way is,\nI am redistributing routes here between\n\n333\n00:17:21.510 --> 00:17:26.550\nEIGRP 500 and OSPF Area 0, so\nI could redistribute the other direction.\n\n334\n00:17:26.550 --> 00:17:28.210\nThat would work also, right.\n\n335\n00:17:28.210 --> 00:17:29.830\nWhich is the right solution?\n\n336\n00:17:29.830 --> 00:17:31.150\nWell, it's tough to say.\n\n337\n00:17:31.150 --> 00:17:34.048\nOn the exam, they'll normally give you\na clue, and it's normally like really,\n\n338\n00:17:34.048 --> 00:17:36.694\nreally obvious, where they say something\nlike, you need to fix this, and\n\n339\n00:17:36.694 --> 00:17:38.570\nyou're not allowed to use static routes.\n\n340\n00:17:38.570 --> 00:17:39.470\nWell, problem solved.\n\n341\n00:17:39.470 --> 00:17:41.040\nNow there's only one other\nway to go about it, right?\n\n342\n00:17:41.040 --> 00:17:42.180\nI need to do redistribution.\n\n343\n00:17:42.180 --> 00:17:44.190\nSo that happens.\n\n344\n00:17:44.190 --> 00:17:46.470\nIn this case, though,\nthey really didn't tell me.\n\n345\n00:17:46.470 --> 00:17:48.400\nThey didn't tell me whether I\nshould use a static route or not.\n\n346\n00:17:48.400 --> 00:17:51.060\nSo let's take a look at both solutions,\nokay.\n\n347\n00:17:51.060 --> 00:17:55.412\nSolution one would be to put\na static route in, so on NYWAN1,\n\n348\n00:17:55.412 --> 00:17:57.517\nI could come over to this guy.\n\n349\n00:17:57.517 --> 00:18:02.099\nAnd right now, it doesn't have a route\nto those 192.168 networks, right, so\n\n350\n00:18:02.099 --> 00:18:04.066\nI could come in and I could put one in.\n\n351\n00:18:04.066 --> 00:18:11.643\nI could say, ip route 192.168.16.0\nwith a class C subnet mask.\n\n352\n00:18:11.643 --> 00:18:13.431\nAnd then I can tell it who to send it to.\n\n353\n00:18:13.431 --> 00:18:19.966\nAnd I would send that to 192.168.255.4,\n\n354\n00:18:19.966 --> 00:18:24.770\nthat is NYWAN1 going to NYEDGE1.\n\n355\n00:18:24.770 --> 00:18:29.065\nAnd so when I put that in, that'll more\nthan likely fix the problem, right?\n\n356\n00:18:29.065 --> 00:18:35.213\nAnd so now, if I were to do a show\nip route for 192.168.16.10,\n\n357\n00:18:35.213 --> 00:18:40.013\nI've got a route that tells me\nhow to get there and if I try and\n\n358\n00:18:40.013 --> 00:18:46.040\nping it, We might be able to get there or\nwe might not.\n\n359\n00:18:46.040 --> 00:18:47.910\nIt looks like we still\nhave an issue there.\n\n360\n00:18:47.910 --> 00:18:51.390\nSo we might have another problem here,\nwe'll have to check this one out.\n\n361\n00:18:51.390 --> 00:18:54.541\nSo, I put a static route in but\nthat didn't seem to fix the problem,\n\n362\n00:18:54.541 --> 00:18:56.383\nnow I could have put a bad IP in, right.\n\n363\n00:18:56.383 --> 00:19:00.924\nI sent that to 192.168.255.4\nwhich I thought was right but\n\n364\n00:19:00.924 --> 00:19:02.641\nlet's just double check.\n\n365\n00:19:02.641 --> 00:19:04.991\nActually here, let me just jump\nover to the other router and\n\n366\n00:19:04.991 --> 00:19:06.360\nmake sure that that one is proper.\n\n367\n00:19:07.530 --> 00:19:10.740\nAnd we'll do a show IP interface brief.\n\n368\n00:19:10.740 --> 00:19:14.266\nAnd make sure that it has 255.4,\nwhich it does, it's got that interface IP.\n\n369\n00:19:14.266 --> 00:19:17.902\nSo I'm sending it here and\nthen it's kind of trailing off.\n\n370\n00:19:17.902 --> 00:19:21.352\nSo I'm going to do a trace route from\nNYWAN1 and just kind of see where that\n\n371\n00:19:21.352 --> 00:19:24.036\ndied out cuz it definitely\ndied somewhere along the way.\n\n372\n00:19:25.889 --> 00:19:29.526\nAnd I am forgetting one thing I mentioned\nearlier in this segment was that we\n\n373\n00:19:29.526 --> 00:19:31.560\ncould have ACLs that are filtering this.\n\n374\n00:19:31.560 --> 00:19:32.700\nI haven't even looked for ACLs yet.\n\n375\n00:19:32.700 --> 00:19:34.376\nSo we might have to double check that too.\n\n376\n00:19:34.376 --> 00:19:39.504\nBut I'm gonna do a trace\nroute to 192.168.16.10 and\n\n377\n00:19:39.504 --> 00:19:41.617\njust see where we died out.\n\n378\n00:19:41.617 --> 00:19:43.771\nOops, I spelled it the Microsoft way and\nnot the Cisco way.\n\n379\n00:19:43.771 --> 00:19:44.665\nLet me fix that.\n\n380\n00:19:47.307 --> 00:19:49.310\nAnd there we go.\n\n381\n00:19:49.310 --> 00:19:52.460\nAnd now it's going to trace that route and\nshow me where it dies off, and\n\n382\n00:19:52.460 --> 00:19:54.920\nit seems to be taking a while\nto get that first hop in line.\n\n383\n00:19:54.920 --> 00:19:59.090\nSo I'm actually might not be\nmaking it past that first one so\n\n384\n00:19:59.090 --> 00:20:00.230\nwe'll give it a second.\n\n385\n00:20:00.230 --> 00:20:02.933\nWhile it's running,\nlet's take a quick scan for ACLs and\n\n386\n00:20:02.933 --> 00:20:05.760\nmake sure that there's\nnothing blocking us there.\n\n387\n00:20:05.760 --> 00:20:09.810\nI'm gonna jump over to NYEDGE1.\n\n388\n00:20:09.810 --> 00:20:11.600\nThat is this guy right here and\n\n389\n00:20:11.600 --> 00:20:15.710\nI'm just gonna do a quick check to see if\nthere's any ACLs in place on this one.\n\n390\n00:20:15.710 --> 00:20:20.910\nAnd the way I like to do that is to\njust run a, well, there's two ways.\n\n391\n00:20:20.910 --> 00:20:23.720\nShow access dash list is\none of the easiest ways.\n\n392\n00:20:23.720 --> 00:20:27.020\nShow access list, it'll show you if\nyou've actually got any created, and\n\n393\n00:20:27.020 --> 00:20:28.659\nif you don't have any created,\nthen you know you're safe.\n\n394\n00:20:29.960 --> 00:20:33.320\nThing is, usually when you look at an ACL,\nit doesn't necessarily tell you if it's\n\n395\n00:20:33.320 --> 00:20:36.850\napplied or not, so you have to look at the\nmatch count to see if any matches show up.\n\n396\n00:20:36.850 --> 00:20:39.903\nSo another way that I do it is sometimes\nI'll do a show running-config, and\n\n397\n00:20:39.903 --> 00:20:41.780\nI'll just search for\nthe word group, right.\n\n398\n00:20:42.840 --> 00:20:45.810\nBecause you assigned them to an interface\nby saying access dash group, and so\n\n399\n00:20:45.810 --> 00:20:48.010\nyou can look to see that and\nsee if you can spot it there.\n\n400\n00:20:48.010 --> 00:20:50.460\nBut NYEDGE1 doesn't have any ACLs.\n\n401\n00:20:50.460 --> 00:20:53.175\nLet's see if our WAN link has\nfinished its trace route.\n\n402\n00:20:53.175 --> 00:20:59.453\nAll right,\nlooks like we made it to 192.168.255.4.\n\n403\n00:20:59.453 --> 00:21:03.273\nWe made it to EDGE1 and\nthen kind of died out on EDGE1, all right?\n\n404\n00:21:03.273 --> 00:21:05.530\nWhy did that happen?\n\n405\n00:21:05.530 --> 00:21:07.188\nWell, we died out on EDGE1, and\n\n406\n00:21:07.188 --> 00:21:10.050\nthe problem there could be\na number of different things.\n\n407\n00:21:10.050 --> 00:21:12.810\nLooks like we had a communication\nissue in the other direction.\n\n408\n00:21:12.810 --> 00:21:15.110\nSo, let me break out of that.\n\n409\n00:21:17.250 --> 00:21:19.720\nThere we go, and see what we've got here.\n\n410\n00:21:19.720 --> 00:21:24.265\nSo, NYWAN1,\nI just tried to send a ping from NYWAN1\n\n411\n00:21:24.265 --> 00:21:29.520\nthrough NYEDGE1 to get down\nto this server way down here.\n\n412\n00:21:29.520 --> 00:21:33.940\nSo NYEDGE1 appears to be the last\nspot that I was able to talk to,\n\n413\n00:21:33.940 --> 00:21:37.740\nit is directly plugged into 192.168.16,\nso it should have\n\n414\n00:21:37.740 --> 00:21:41.810\nsent me along into here to communicate\nto the host that that didn't work.\n\n415\n00:21:41.810 --> 00:21:45.030\nSo I'm starting to think that we have\nsome kind of redistribution issue or\n\n416\n00:21:45.030 --> 00:21:48.330\npossibly a route map,\nyou know some kind of prefix list,\n\n417\n00:21:48.330 --> 00:21:51.030\na filter,\nsome kind of filtering going on on EDGE1.\n\n418\n00:21:51.030 --> 00:21:55.470\nSo I'm just gonna do a show\nrunning dash config.\n\n419\n00:21:55.470 --> 00:21:59.790\nWhen you start troubleshooting things and\nthe obvious isn't obvious anymore, right,\n\n420\n00:21:59.790 --> 00:22:01.190\nthe normal problems don't come up,\n\n421\n00:22:01.190 --> 00:22:04.060\nsometimes you just have to look at\nthe config and see what you've got.\n\n422\n00:22:04.060 --> 00:22:06.540\nSo I'm going to do a show\nrunning dash config and\n\n423\n00:22:06.540 --> 00:22:08.830\nsee if we can get anything\nthat creeps out at us.\n\n424\n00:22:08.830 --> 00:22:11.600\nMost of this stuff is just normal\nsettings here that we expect to see.\n\n425\n00:22:11.600 --> 00:22:14.530\nI'm more interested in the routing\nprotocols, but I'll just do\n\n426\n00:22:14.530 --> 00:22:18.560\na quick scan over the interfaces, just\nlooking for things like shutdowns or ACLs\n\n427\n00:22:18.560 --> 00:22:22.420\nare really what I'm looking for, which\nwe already know we don't have ACLs here.\n\n428\n00:22:22.420 --> 00:22:27.219\nThen, as we get a little bit further down,\nis where I would expect to see things\n\n429\n00:22:27.219 --> 00:22:30.522\nlike route maps, and so\nhere I can see EIGRP, right?\n\n430\n00:22:30.522 --> 00:22:33.911\nAnd it's configured,\nit's got one network defined, and\n\n431\n00:22:33.911 --> 00:22:38.476\none network only, just 192.168.255,\nwhich I'm okay with that.\n\n432\n00:22:38.476 --> 00:22:39.510\nThat's this network right here.\n\n433\n00:22:39.510 --> 00:22:41.400\nThat's the only one that we need.\n\n434\n00:22:41.400 --> 00:22:43.860\nAnd I've got a redistribution here.\n\n435\n00:22:43.860 --> 00:22:48.880\nWe're redistributing\nEIGRP routes into OSPF.\n\n436\n00:22:48.880 --> 00:22:52.920\nBut up here,\nwe're not going the other way around.\n\n437\n00:22:52.920 --> 00:22:55.225\nSo that's actually gonna be\na bit of breakdown right there.\n\n438\n00:22:55.225 --> 00:23:00.002\nOkay, I put a static route in, and\nwhat the static route did is it\n\n439\n00:23:00.002 --> 00:23:04.885\ntaught NYWAN1 how to get\nto the 192.168.16 network.\n\n440\n00:23:04.885 --> 00:23:07.980\nAnd on a positive note, that could\nhave fixed the problem right there and\n\n441\n00:23:07.980 --> 00:23:09.410\nwe were solved.\n\n442\n00:23:09.410 --> 00:23:12.130\nBut on a not so positive note, it didn't\n\n443\n00:23:12.130 --> 00:23:15.470\ninclude all of our other internal networks\nright, it just included that one.\n\n444\n00:23:15.470 --> 00:23:19.100\nAnd in this scenario, I can see I'm not\nactually redistributing from OSPF and\n\n445\n00:23:19.100 --> 00:23:20.390\nEIGRP at all.\n\n446\n00:23:20.390 --> 00:23:25.390\nSo EIGRP is completely unaware of all the\nvarious networks that we've got over here.\n\n447\n00:23:25.390 --> 00:23:30.200\nSo when I do a ping to a static IP like\nthat, I would have to have static routes\n\n448\n00:23:30.200 --> 00:23:33.280\nfor each of the IPs or at least to\nthe networks that I'm trying to reach.\n\n449\n00:23:33.280 --> 00:23:35.950\nA redistribution here would actually solve\nthis problem a little bit better, so\n\n450\n00:23:35.950 --> 00:23:38.760\nthat would probably be the better route to\ngo on this one as opposed to the static.\n\n451\n00:23:38.760 --> 00:23:40.321\nSo I probably need to\nyank that static out.\n\n452\n00:23:40.321 --> 00:23:43.778\nThe other thing is I could do\nnetwork address translation.\n\n453\n00:23:43.778 --> 00:23:46.810\nBut that's gonna kind of mess things up\na little bit cuz we're probably doing that\n\n454\n00:23:46.810 --> 00:23:48.380\nhere on the way out to the Internet.\n\n455\n00:23:48.380 --> 00:23:49.976\nYou don't typically wanna do double mat.\n\n456\n00:23:49.976 --> 00:23:53.151\nSo I'm gonna set up redistribution for\nthe other direction so\n\n457\n00:23:53.151 --> 00:23:55.358\nwe can learn about\nthe routes to get there.\n\n458\n00:23:55.358 --> 00:24:01.007\nI've probably, with my static route,\nI've probably created a asynchronous\n\n459\n00:24:01.007 --> 00:24:06.280\nrouting environment, where I go out\none way and I come back another.\n\n460\n00:24:06.280 --> 00:24:08.625\nSo for example, my server here,\n\n461\n00:24:08.625 --> 00:24:12.215\nis going out using the HSRP\nshared IP of these routers.\n\n462\n00:24:12.215 --> 00:24:13.655\nThat's just default gateway.\n\n463\n00:24:13.655 --> 00:24:17.965\nAnd from there, it goes to EDGE1 and\nthen EDGE1 to WAN1.\n\n464\n00:24:17.965 --> 00:24:22.264\nBut on the return trip,\nI'm going from WAN1 to EDGE1.\n\n465\n00:24:22.264 --> 00:24:25.500\nAnd EDGE1 is directly plugged\ninto the 192.168.16 network.\n\n466\n00:24:25.500 --> 00:24:29.532\nSo it can skip the HSRP routers and\ngo straight to me.\n\n467\n00:24:29.532 --> 00:24:31.186\nThat would be asynchronous routing and\n\n468\n00:24:31.186 --> 00:24:34.594\nthat can cause problems with things like\nping sometimes, which is stateless and\n\n469\n00:24:34.594 --> 00:24:37.460\ndoesn't necessarily track where\nthese things are coming from.\n\n470\n00:24:37.460 --> 00:24:39.550\nSo that more than likely is my issue.\n\n471\n00:24:39.550 --> 00:24:42.440\nDoing some route redistribution will\nmore than likely solve that for us.\n\n472\n00:24:42.440 --> 00:24:43.236\nAnd we can test it out.\n\n473\n00:24:43.236 --> 00:24:44.560\nFirst of all, though, I'm going to go and\n\n474\n00:24:44.560 --> 00:24:47.780\nremove that static route that I put\nin cuz that is not working for us.\n\n475\n00:24:47.780 --> 00:24:49.340\nAnd that's an important tip for the exam.\n\n476\n00:24:49.340 --> 00:24:53.520\nIf you put a fix in place and\nit doesn't work, make sure you undo it,\n\n477\n00:24:53.520 --> 00:24:57.200\ndon't leave improper commands in there\nif they're not actually necessary.\n\n478\n00:24:57.200 --> 00:25:00.164\nSo I'm gonna go up here to where\nI put that static route in, and\n\n479\n00:25:00.164 --> 00:25:03.259\nwe're just gonna get that out of\nthere with a little no command.\n\n480\n00:25:03.259 --> 00:25:06.667\nAnd that one's gone, and\nnow what I'm gonna do is,\n\n481\n00:25:06.667 --> 00:25:10.308\nI'm gonna go back to EDGE1 and\nI'm gonna tell EDGE1,\n\n482\n00:25:10.308 --> 00:25:14.742\nhey, you're already redistributing\nthe EIGRP routes into OSPF.\n\n483\n00:25:14.742 --> 00:25:17.673\nLet's just do the other way,\nlet's take the OSPF routes and\n\n484\n00:25:17.673 --> 00:25:19.815\nredistribute them into EIGRP, all right.\n\n485\n00:25:19.815 --> 00:25:21.832\nNow EIGRP here is set up for multi family,\n\n486\n00:25:21.832 --> 00:25:25.820\nand I know a lot of you guys probably\nhaven't worked with multi family on this.\n\n487\n00:25:25.820 --> 00:25:28.691\nNormally with EIGRP,\nwe do it for routing ipv4.\n\n488\n00:25:28.691 --> 00:25:30.231\nBut you can route ipv6 also, and\n\n489\n00:25:30.231 --> 00:25:34.203\nif you do that, you have to divide them up\ninto address families, just like with bgp.\n\n490\n00:25:34.203 --> 00:25:35.751\nAnd so that's what they've done here, so\n\n491\n00:25:35.751 --> 00:25:38.780\nI'm gonna have to mimic their commands\na little bit to do the redistribution.\n\n492\n00:25:38.780 --> 00:25:42.230\nAnd the reason I bring it up is that\nredistribution is actually done\n\n493\n00:25:42.230 --> 00:25:44.400\nunder the topology base command.\n\n494\n00:25:44.400 --> 00:25:46.200\nSo if I just get into the address family,\n\n495\n00:25:46.200 --> 00:25:49.600\nthat's not enough,\nI've gotta get into topology base also.\n\n496\n00:25:49.600 --> 00:25:52.320\nLooking at the config here, we see that\ncommands makes it easier to remember.\n\n497\n00:25:53.940 --> 00:25:57.690\nAll right, so\nI'm gonna jump into my configuration.\n\n498\n00:25:57.690 --> 00:26:00.050\nAnd I'm gonna do a router EIGRP and\n\n499\n00:26:00.050 --> 00:26:04.700\nthe name of this EIGRP autonomous\nsystem was just called EIGRP_INTERNAL.\n\n500\n00:26:04.700 --> 00:26:09.460\nSo I'm gonna get in there,\nEIGRP_INTERNAL, there we go.\n\n501\n00:26:09.460 --> 00:26:11.980\nAnd then,\nI'm gonna get into the address family.\n\n502\n00:26:11.980 --> 00:26:14.981\nSo it was ipv4 unicast and\n\n503\n00:26:14.981 --> 00:26:20.470\nour autonomous-system is 500, right?\n\n504\n00:26:20.470 --> 00:26:22.330\nAnd I don't have this memorized.\n\n505\n00:26:22.330 --> 00:26:24.700\nI'm getting it actually right from here,\nif we can see the command and\n\n506\n00:26:24.700 --> 00:26:27.020\nrunning config,\nwe're just mirroring those commands.\n\n507\n00:26:27.020 --> 00:26:29.520\nAnd I'm gonna get right into that AS 500.\n\n508\n00:26:29.520 --> 00:26:30.480\nAll right?\n\n509\n00:26:30.480 --> 00:26:32.729\nAnd then from here,\nI'm just gonna say topology base.\n\n510\n00:26:34.090 --> 00:26:36.882\nAnd see how my prompt changed topology,\nand\n\n511\n00:26:36.882 --> 00:26:39.985\nhere's where we redistribute\ninside of EIGRP.\n\n512\n00:26:39.985 --> 00:26:43.845\nSo, I'm just gonna throw in a quick\ncommand here to redistribute those OSPF\n\n513\n00:26:43.845 --> 00:26:44.820\nroutes into this.\n\n514\n00:26:44.820 --> 00:26:49.840\nNow, remember when you redistribute,\nthe OSPF metric is cost.\n\n515\n00:26:49.840 --> 00:26:54.788\nThe EIGRP metric is a lot more complex,\nit's the result of the dual formula,\n\n516\n00:26:54.788 --> 00:26:55.550\nright.\n\n517\n00:26:55.550 --> 00:26:59.480\nAnd so it's a combination of band\nwidth and delay by default in OSPF,\n\n518\n00:26:59.480 --> 00:27:01.250\nit's just based on band width.\n\n519\n00:27:01.250 --> 00:27:04.020\nSo the metrics aren't compatible, so\nI'm gonna have to specify those metrics.\n\n520\n00:27:04.020 --> 00:27:06.370\nThe command is gonna be\nreally long because of that.\n\n521\n00:27:06.370 --> 00:27:08.620\nAnd my heads probably gonna cover\nup part of it, but I'll try and\n\n522\n00:27:08.620 --> 00:27:09.640\nkeep it on the screen for us.\n\n523\n00:27:09.640 --> 00:27:11.390\nSo, let me go ahead and punch this one in,\n\n524\n00:27:11.390 --> 00:27:16.260\nI'm gonna basically say\nredistribute ospf 100.\n\n525\n00:27:16.260 --> 00:27:19.140\nThat's the osp process ID again,\nI got that from right up here.\n\n526\n00:27:19.140 --> 00:27:21.550\nHere's the process number.\n\n527\n00:27:21.550 --> 00:27:25.650\nSo redistribute ospf 100 and\nthen I'm gonna define the metric.\n\n528\n00:27:25.650 --> 00:27:28.160\nAnd if you forget the metrics,\nyou can use the question mark and\n\n529\n00:27:28.160 --> 00:27:29.160\nkinda get through each one.\n\n530\n00:27:29.160 --> 00:27:30.470\nSo the first one is bandwidth.\n\n531\n00:27:30.470 --> 00:27:34.020\nAnd you wanna mirror what\na link actually is if you can.\n\n532\n00:27:34.020 --> 00:27:38.850\nSo if it's a hundred megabyte link then\nyou need to put in here that it's a 100\n\n533\n00:27:38.850 --> 00:27:44.500\nmegabytes, so I'll put 10,000 or\nsorry, 100,000 there we go.\n\n534\n00:27:44.500 --> 00:27:49.360\nSo now it's gonna be 100 megabyte, and\nthen we can continue to specify and\n\n535\n00:27:50.470 --> 00:27:53.730\nlet's go full screen on this one so\nmy head doesn't cover it all up.\n\n536\n00:27:53.730 --> 00:27:55.620\nBut we've got metric 100,000.\n\n537\n00:27:55.620 --> 00:27:59.340\nAnd then the next metric that\nit wants is the delay, right?\n\n538\n00:27:59.340 --> 00:28:01.300\nNow, delay is constantly changing.\n\n539\n00:28:01.300 --> 00:28:04.280\nSo whatever number you put in here\nis just gonna be made up and fake.\n\n540\n00:28:04.280 --> 00:28:08.770\nSo just pick something that's kind of what\nyour average delay might be on a line.\n\n541\n00:28:08.770 --> 00:28:12.224\nIt's in 10 microsecond units.\n\n542\n00:28:12.224 --> 00:28:16.261\nSo if you wanna say the delay\nis like two nanoseconds,\n\n543\n00:28:16.261 --> 00:28:22.290\nthen you might put in here 200, so\nthat it knows that you've got that delay.\n\n544\n00:28:23.332 --> 00:28:27.375\nAll right, then we can specify\nwhat the reliability is.\n\n545\n00:28:27.375 --> 00:28:31.210\nEIGRP doesn't use reliability by default,\nso we could ignore this, but\n\n546\n00:28:31.210 --> 00:28:36.090\njust know that 255 is 100% reliable,\nso that's what I normally use there.\n\n547\n00:28:36.090 --> 00:28:39.240\nThen after that,\nwe have our affective bandwidth load and\n\n548\n00:28:39.240 --> 00:28:41.520\nload is one that's not\nused by default also.\n\n549\n00:28:41.520 --> 00:28:45.420\nSo you just make this\nknow that one than 255.\n\n550\n00:28:45.420 --> 00:28:47.310\n255 is the line is full.\n\n551\n00:28:47.310 --> 00:28:48.780\nAnd then lastly, the MTU.\n\n552\n00:28:48.780 --> 00:28:52.450\nAn MTU gets ignored, but\nthe default MTU for most people is 1500.\n\n553\n00:28:52.450 --> 00:28:53.780\nSo I'll just punch that one in.\n\n554\n00:28:53.780 --> 00:28:56.270\nSo again,\nyou can put whatever you wanted in these.\n\n555\n00:28:56.270 --> 00:28:58.400\nWe just wanna make sure that\nit's something that is properly\n\n556\n00:28:58.400 --> 00:28:59.230\nreflected in EIGRP.\n\n557\n00:29:00.660 --> 00:29:04.800\nNow, as soon as I run that we're gonna\nstart sharing the OSPF routes with EIGRP\n\n558\n00:29:04.800 --> 00:29:07.440\nand we can go and\nverify that on the other router.\n\n559\n00:29:07.440 --> 00:29:10.690\nNow it may take it moment, but\nI'm gonna get out of my CONFIG.\n\n560\n00:29:10.690 --> 00:29:12.612\nAnd I'm gonna jump over to NYWAN1 and\n\n561\n00:29:12.612 --> 00:29:15.027\nlet's see if it's learning\nthese new routes?\n\n562\n00:29:16.786 --> 00:29:21.140\nAll right, so on NYWAN1,\nI'm just gonna do a show IP route.\n\n563\n00:29:21.140 --> 00:29:24.310\nEIGRP to just kind of filter\nthat down a little bit for me.\n\n564\n00:29:24.310 --> 00:29:29.679\nWhat I'm hoping to see are the 192.168\nnetworks from inside and\n\n565\n00:29:29.679 --> 00:29:31.479\ndid I glance over them?\n\n566\n00:29:31.479 --> 00:29:35.550\nThere's one of them right there,\n192.168.16 is coming in.\n\n567\n00:29:35.550 --> 00:29:39.070\nSo I'm starting to learn those internal\nnetworks and getting the network, and\n\n568\n00:29:39.070 --> 00:29:40.360\nI'm getting it through EIGRP.\n\n569\n00:29:40.360 --> 00:29:42.690\nSo now that we've got\na route exchange happening,\n\n570\n00:29:42.690 --> 00:29:47.740\nnow that the EIGRP autonomous system knows\nabout the OSPF autonomous system and\n\n571\n00:29:47.740 --> 00:29:51.430\nvice versa,\nthat should resolve our reachability.\n\n572\n00:29:51.430 --> 00:29:52.980\nWell let's test it out right?\n\n573\n00:29:52.980 --> 00:29:57.563\nI'm gonna jump all the way back to P lab\nSysco 01 where this kind of all started\n\n574\n00:29:59.814 --> 00:30:03.570\nand we could do pings in steps if we want.\n\n575\n00:30:03.570 --> 00:30:06.310\nWe could do a traceroutes,\nprobably gonna be the best for us.\n\n576\n00:30:06.310 --> 00:30:08.248\nActually let me just pull up\nthe traceroute that we did before.\n\n577\n00:30:08.248 --> 00:30:12.010\nThat way if it dies out in\ntransit we can find out where.\n\n578\n00:30:12.010 --> 00:30:15.090\nBut I'm gonna reach out and do that same\ntraceroute, and let's follow that path and\n\n579\n00:30:15.090 --> 00:30:18.130\nsee where it dies out, and\nwhether or not we can get there.\n\n580\n00:30:18.130 --> 00:30:24.490\nSo my first hop is going to be the HSRP\ndefault gateway between these guys.\n\n581\n00:30:24.490 --> 00:30:26.126\nMy next hop should be NYEDGE1.\n\n582\n00:30:26.126 --> 00:30:31.030\nAnd then after NYEDGE1,\nwe should pass to NYWAN1, and\n\n583\n00:30:31.030 --> 00:30:34.930\nfrom there we should pass outside the\nnetwork to the Internet and sure enough,\n\n584\n00:30:34.930 --> 00:30:38.330\nI hit that one and\nit looks like we're gonna be good to go.\n\n585\n00:30:38.330 --> 00:30:39.060\nAnd we are.\n\n586\n00:30:39.060 --> 00:30:40.580\nSo that solved our issue.\n\n587\n00:30:40.580 --> 00:30:44.230\nI'm just gonna do one more ping\njust to be on the safe side.\n\n588\n00:30:44.230 --> 00:30:47.400\nYou know pinging that specific host\nthat the troubleshooting ticket said we\n\n589\n00:30:47.400 --> 00:30:50.430\ncouldn't ping because there\ncould be other things.\n\n590\n00:30:50.430 --> 00:30:53.140\nThere could be an access controls, could\nbe all sorts of stuff that blocks that.\n\n591\n00:30:53.140 --> 00:30:55.700\nYou always want to verify that\nyou actually fixed what was in\n\n592\n00:30:55.700 --> 00:30:57.150\nthe troubleshooting ticket.\n\n593\n00:30:57.150 --> 00:30:59.390\nAnd in this case, I can see what I have.\n\n594\n00:30:59.390 --> 00:31:04.120\nSo looking at this environment,\nwhat our real problem was,\n\n595\n00:31:04.120 --> 00:31:05.620\nwas a return route problem.\n\n596\n00:31:05.620 --> 00:31:09.975\nWe knew how to get out because EIGRP\nwas being redistributed Into OSPF.\n\n597\n00:31:09.975 --> 00:31:14.425\nBut, they didn't know how to get back\nbecause OSPF was not being redistributed\n\n598\n00:31:14.425 --> 00:31:15.325\ninto EIGRP.\n\n599\n00:31:15.325 --> 00:31:18.615\nAnd we could have fixed that with\nstatic routes, we just would\n\n600\n00:31:18.615 --> 00:31:23.005\nhave needed to like put several of them\nin there as kind of a bad solution.\n\n601\n00:31:23.005 --> 00:31:25.055\nBut, redistributing,\nthat solved our problem.\n\n602\n00:31:25.055 --> 00:31:28.095\nAnd I don't mind redistributing internal\nroutes here because I know that NYWAN1\n\n603\n00:31:28.095 --> 00:31:28.685\nis my router.\n\n604\n00:31:28.685 --> 00:31:29.515\nI control that.\n\n605\n00:31:29.515 --> 00:31:34.510\nI probably don't want to redistribute\nBetween EIGRP 500 and EIGRP 800 cuz\n\n606\n00:31:34.510 --> 00:31:37.540\nthat's the ISP, I probably don't wanna\ntell them about my internal networks.\n\n607\n00:31:37.540 --> 00:31:38.870\nBut these guys, it's okay.\n\n608\n00:31:38.870 --> 00:31:42.310\nNow we've got reachability,\nand now we're in business.\n\n609\n00:31:42.310 --> 00:31:43.960\nSo, that knocks this other one out.\n\n610\n00:31:43.960 --> 00:31:46.750\nIt turned out to probably be\nthe most complex of the issues for\n\n611\n00:31:46.750 --> 00:31:48.860\nset one but\nit was kind of a fun one right?\n\n612\n00:31:48.860 --> 00:31:53.120\nA lot of different problems could have\ncrept up in there and we troubleshot it,\n\n613\n00:31:53.120 --> 00:31:54.640\nwe found it, and we got it resolved.\n\n614\n00:31:54.640 --> 00:31:58.182\nSo in this case, redistributing\nbetween the two routing protocols.\n\n615\n00:31:58.182 --> 00:32:00.150\nAll right, well, ladies and gentleman,\nI hope you guys enjoyed that.\n\n616\n00:32:00.150 --> 00:32:01.560\nThat's it for set one.\n\n617\n00:32:01.560 --> 00:32:02.880\nWe resolved all the issues.\n\n618\n00:32:02.880 --> 00:32:07.617\nStay tuned cause set two coming up, and\nmore Cisco troubleshooting down the road.\n\n619\n00:32:07.617 --> 00:32:13.830\n[MUSIC]\n\n",
          "vimeoId": "149154384"
        }
      ],
      "title": "Set One"
    },
    {
      "episodes": [
        {
          "description": "In this video, Don solves troubleshooting issue #1` from set #2. The trouble ticket states that \"PLABCSCO01 is unable to ping 192.168.16.3 \"",
          "length": "1289",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-2-1-set_2_issue_1-112315-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-2-1-set_2_issue_1-112315-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-2-1-set_2_issue_1-112315-1-sm.jpg",
          "title": "Set 2 Issue 1",
          "transcript": "WEBVTT\n\n1\n00:00:00.025 --> 00:00:05.519\n[SOUND] In this video,\nwe're gonna start with\n\n2\n00:00:05.519 --> 00:00:10.735\nSet 2 of our troubleshooting scenarios.\n\n3\n00:00:10.735 --> 00:00:13.004\nWe've got an all new\nnetwork in front of us and\n\n4\n00:00:13.004 --> 00:00:15.570\nan all new set of problems to try and\nsort out.\n\n5\n00:00:15.570 --> 00:00:19.890\nAnd so we're gonna jump right in with\ntroubleshooting ticket issue number one.\n\n6\n00:00:19.890 --> 00:00:21.870\nAnd we got a straightforward\none on this one,\n\n7\n00:00:21.870 --> 00:00:23.210\nI'm looking at my support\nticket right here.\n\n8\n00:00:23.210 --> 00:00:27.125\nIt says,\nwe've got a server called PLab Cisco 01,\n\n9\n00:00:27.125 --> 00:00:30.877\nit's unable to ping 192.168.16.3.\n\n10\n00:00:30.877 --> 00:00:32.690\nSo, sounds simple enough.\n\n11\n00:00:32.690 --> 00:00:35.548\nI've got a server that,\nit's on my network,\n\n12\n00:00:35.548 --> 00:00:38.934\nit's got an IP,\nI don't actually know what its IP is.\n\n13\n00:00:38.934 --> 00:00:40.500\nAnd it's trying to ping another host and\nit can't get there.\n\n14\n00:00:40.500 --> 00:00:44.040\nSo a whole plethora of problems\n[LAUGH] that could cause that.\n\n15\n00:00:44.040 --> 00:00:46.020\nLet's start by looking at\nour network topology and\n\n16\n00:00:46.020 --> 00:00:48.760\nsee if we can't get an idea of\nwhere that problem is coming from.\n\n17\n00:00:48.760 --> 00:00:51.260\nSo, I've got our network\ntopology pulled up here and\n\n18\n00:00:51.260 --> 00:00:54.720\nlet me just zoom in a bit on it\ncuz it's a big network, right.\n\n19\n00:00:54.720 --> 00:00:56.950\nSo here's all the different systems\nthat we're gonna be working with\n\n20\n00:00:56.950 --> 00:00:57.500\nthis time around.\n\n21\n00:00:57.500 --> 00:00:59.550\nWe've got routers,\nswitches all sorts of stuff.\n\n22\n00:00:59.550 --> 00:01:03.990\nAnd way down here at the bottom\nwe've got our lonely little server.\n\n23\n00:01:03.990 --> 00:01:07.128\nAnd this is PLab Cisco 01, and\n\n24\n00:01:07.128 --> 00:01:14.233\nthis guy is 192.168.16.10,\nthat's its IP right there.\n\n25\n00:01:14.233 --> 00:01:21.307\nSo it's 192.168.16.10, I can see\nit's a /24, so a 24-bit subnet mask.\n\n26\n00:01:21.307 --> 00:01:24.403\nThat means if I can't ping 192.168.16.3,\n\n27\n00:01:24.403 --> 00:01:27.700\nI'm likely dealing with a layer one or\nlayer two issue here.\n\n28\n00:01:27.700 --> 00:01:29.220\nNow, how do I know that?\n\n29\n00:01:29.220 --> 00:01:33.490\nWell, layer three would be routing, and\nwe only route when we go between subnets.\n\n30\n00:01:33.490 --> 00:01:35.810\nI'm trying to ping somebody\nwho's on the same subnet as me.\n\n31\n00:01:35.810 --> 00:01:38.470\nNow, there's a chance there\nstill could be a router issue.\n\n32\n00:01:38.470 --> 00:01:42.700\nFor example, the other node could have\nits subnet mask set wrong, and it could\n\n33\n00:01:42.700 --> 00:01:45.590\nthink that it's on a different network and\nbe trying to go through a router.\n\n34\n00:01:45.590 --> 00:01:47.860\nVersus this guy trying to go direct,\nthat is possible.\n\n35\n00:01:47.860 --> 00:01:50.110\nSo I'll need to double check\nmy IP configurations but\n\n36\n00:01:50.110 --> 00:01:53.410\nassuming those are right, then I can\nput layer three out of my mind and\n\n37\n00:01:53.410 --> 00:01:55.100\nfocus on layer one and layer two.\n\n38\n00:01:55.100 --> 00:01:58.470\nThis'll more than likely turn out\nto be a switching issue, all right?\n\n39\n00:01:58.470 --> 00:02:01.000\nSo I'm gonna verify that subnet mask.\n\n40\n00:02:01.000 --> 00:02:03.620\nThat's probably the first thing I need\nto do is verify that subnet mask on this\n\n41\n00:02:03.620 --> 00:02:09.820\nmachine and on 192.168.16.3\nsince that's who I can't ping.\n\n42\n00:02:09.820 --> 00:02:16.436\nUnfortunately, as I look at my map here,\nI don't see 192.168.16.3, so I'm gonna\n\n43\n00:02:16.436 --> 00:02:21.293\nhave to do a little bit of exploring,\nI'm gonna have to find this node.\n\n44\n00:02:21.293 --> 00:02:24.540\nAnd that's gonna be particularly tricky\nbecause, think about my problem.\n\n45\n00:02:24.540 --> 00:02:25.960\nI can't ping the host.\n\n46\n00:02:25.960 --> 00:02:28.740\nIf I could ping the host I\ncould look at my ARP table and\n\n47\n00:02:28.740 --> 00:02:29.830\nfigure out the MAC address.\n\n48\n00:02:29.830 --> 00:02:31.980\nI could then look at the MAC\naddress table of switches and\n\n49\n00:02:31.980 --> 00:02:33.720\nfigure out where it's plugged in.\n\n50\n00:02:33.720 --> 00:02:36.440\nAnd from there, once I know where\nit's plugged in I know who it is.\n\n51\n00:02:36.440 --> 00:02:40.800\nBut if I can't ping it, I'm gonna have\na hard time finding it on the network.\n\n52\n00:02:40.800 --> 00:02:44.643\nSo sometimes there's no substitute for\njust jumping host to host and looking for\n\n53\n00:02:44.643 --> 00:02:48.160\nwho has that IP and, unfortunately,\nthat's what I'm gonna have to do.\n\n54\n00:02:48.160 --> 00:02:51.600\nNow, because the problem is\nlocated right here on this server,\n\n55\n00:02:51.600 --> 00:02:53.460\nI'm gonna go from the inside out.\n\n56\n00:02:53.460 --> 00:02:56.180\nSo I'm gonna start here, I'll jump to this\nswitch, then I'll jump up to these two\n\n57\n00:02:56.180 --> 00:02:58.720\nswitches, and\nthen I'll jump up to all these routers.\n\n58\n00:02:58.720 --> 00:03:01.860\nOne of them will have the IP I want,\nbut I'm going inside out,\n\n59\n00:03:01.860 --> 00:03:04.920\nbecause that's usually the way you\nmost quickly find the problem.\n\n60\n00:03:04.920 --> 00:03:06.870\nThe further I get away from this host,\n\n61\n00:03:06.870 --> 00:03:09.200\nthe more likely I am to be\njumping to a different subnet.\n\n62\n00:03:09.200 --> 00:03:11.650\nSo that's why I want to start there and\nkind of move out.\n\n63\n00:03:11.650 --> 00:03:13.510\nSo I'm gonna start on that server.\n\n64\n00:03:13.510 --> 00:03:16.310\nSo I'll jump back, and it's a Windows\nServer, I've got it pulled up right here.\n\n65\n00:03:16.310 --> 00:03:18.810\nLet me get into a command prompt.\n\n66\n00:03:20.320 --> 00:03:25.810\nAnd, I'm just gonna start\nwith a quick ip config,\n\n67\n00:03:25.810 --> 00:03:29.350\nto make sure that this is\n192.168.16.10 like the diagram said.\n\n68\n00:03:29.350 --> 00:03:30.300\nAnd it is.\n\n69\n00:03:30.300 --> 00:03:35.240\nAnd I'm gonna make sure that subnet\nmask is set to 255.255.255.0,\n\n70\n00:03:35.240 --> 00:03:41.040\nwhich it is also, so I know that it is\nconfigured according to the documentation.\n\n71\n00:03:41.040 --> 00:03:45.520\nSo somewhere on the network,\nthere's 192.168.16.3 and\n\n72\n00:03:45.520 --> 00:03:48.040\nit could be configured wrong,\nbut at least this guy is right.\n\n73\n00:03:48.040 --> 00:03:50.790\nAnd while I'm here,\nit's probably a good idea for\n\n74\n00:03:50.790 --> 00:03:53.310\nme to verify that\nthe problem actually exists.\n\n75\n00:03:53.310 --> 00:03:55.973\nYou every get a troubleshooting ticket\nfrom a user, and then you go and\n\n76\n00:03:55.973 --> 00:03:58.017\nyou verify it and\nthe problem's not actually there?\n\n77\n00:03:58.017 --> 00:03:59.015\nThat does happen.\n\n78\n00:03:59.015 --> 00:04:03.330\nSo I'm gonna try and ping 192.168.16.3.\n\n79\n00:04:03.330 --> 00:04:06.645\nAnd in fact, I'm gonna leave it as\njust a constantly running ping, so\n\n80\n00:04:06.645 --> 00:04:09.845\nit'll just be pinging in the background so\nthat I'll know when I've fixed my problem.\n\n81\n00:04:09.845 --> 00:04:14.240\nRight, and sure enough, it's not looking\ngood, I'm not pinging out to that host.\n\n82\n00:04:14.240 --> 00:04:16.460\nThe first ping might have failed\nbecause of ARP, I'll wait for\n\n83\n00:04:16.460 --> 00:04:17.530\na second, there we go.\n\n84\n00:04:17.530 --> 00:04:21.932\nAnd now I see two pings failed,\nit's pretty much verified there,\n\n85\n00:04:21.932 --> 00:04:23.590\nwe know we got a problem.\n\n86\n00:04:23.590 --> 00:04:26.482\nSo, going back to my network topology,\n\n87\n00:04:26.482 --> 00:04:30.550\nthe next hop in the path is\nNew York Access 1, right.\n\n88\n00:04:30.550 --> 00:04:35.022\nSo my server plugs into that switch,\nlet's take a look at that switch and see.\n\n89\n00:04:35.022 --> 00:04:38.084\nMaybe this'll be real easy and\nthat will be 192.168.16.3 and\n\n90\n00:04:38.084 --> 00:04:40.282\nwe'll get an idea where that problem is,\nall right.\n\n91\n00:04:40.282 --> 00:04:47.130\nSo I'm gonna jump over to that switch, and\nI wanna find out what IP address it has.\n\n92\n00:04:47.130 --> 00:04:49.640\nNow, one of the best commands for this,\n\n93\n00:04:49.640 --> 00:04:54.330\none that I use all the time,\nis show ip int brief.\n\n94\n00:04:54.330 --> 00:04:57.290\nNow, on a switch that returns\na lot of information, and so\n\n95\n00:04:57.290 --> 00:05:00.710\nI'll normally apply\nan exclude filter to that.\n\n96\n00:05:00.710 --> 00:05:03.950\nAnd I'll exclude the word unassigned,\nokay?\n\n97\n00:05:03.950 --> 00:05:05.360\nSo why am I excluding that?\n\n98\n00:05:05.360 --> 00:05:09.224\nBecause these are interfaces that\ndon't have an IP address, and\n\n99\n00:05:09.224 --> 00:05:12.957\nI can filter those out and\nonly see interfaces that do have IPs.\n\n100\n00:05:12.957 --> 00:05:20.280\nAnd I can see that I've got Vlan16, and\nI've got an IP in there of 192.168.16.7.\n\n101\n00:05:20.280 --> 00:05:24.650\nI'm on the same network, but\nI'm not .3 so I haven't found our target.\n\n102\n00:05:24.650 --> 00:05:27.940\nNow, just as a word of caution,\nsometimes Cisco can be a little sneaky.\n\n103\n00:05:27.940 --> 00:05:32.050\nSometimes there's IP addresses that\ndon't show up here in show ip int brief.\n\n104\n00:05:32.050 --> 00:05:35.002\nFor example, if I had a secondary IP.\n\n105\n00:05:35.002 --> 00:05:37.004\nSecondary IPs don't show up here,\n\n106\n00:05:37.004 --> 00:05:40.200\nI would need to look at\nthe interface itself to see that.\n\n107\n00:05:40.200 --> 00:05:43.925\nSo another useful command is you can so\nshow running-config.\n\n108\n00:05:45.150 --> 00:05:48.150\nAnd if you filter that with\nan include filter and look for\n\n109\n00:05:48.150 --> 00:05:52.300\nthe key words interface and address,\n\n110\n00:05:52.300 --> 00:05:56.690\nthat'll show you each of the interface\nnames followed by primary and\n\n111\n00:05:56.690 --> 00:05:59.890\nsecondary addresses as well as IPv6\naddresses assigned to each one.\n\n112\n00:05:59.890 --> 00:06:01.850\nIt's a great way to\nquickly find all those.\n\n113\n00:06:01.850 --> 00:06:04.800\nAnd so I can run that same command there.\n\n114\n00:06:04.800 --> 00:06:08.690\nAnd there's all my other interfaces and\nthen here's the Vlan interface and so\n\n115\n00:06:08.690 --> 00:06:10.990\nit is the only IP I have, is that one.\n\n116\n00:06:10.990 --> 00:06:14.330\nAnd, just for connectivities sake,\nI'll try and ping that server.\n\n117\n00:06:14.330 --> 00:06:16.730\nSo I'm gonna try and\nping 192.168.16.10 and I can,\n\n118\n00:06:16.730 --> 00:06:20.004\nso I'm able to ping PLab Cisco 01.\n\n119\n00:06:20.004 --> 00:06:24.630\nAnd I'll try and ping .3, and\nit's got the same problem.\n\n120\n00:06:24.630 --> 00:06:27.020\nSo it's got the same problem\nas my workstation or server or\n\n121\n00:06:27.020 --> 00:06:28.970\nwhatever, I'm not able\nto get to that host.\n\n122\n00:06:28.970 --> 00:06:31.680\nSo now I know a little bit more\nof the scope of my problem.\n\n123\n00:06:31.680 --> 00:06:33.792\nIf I go back to my diagram,\n\n124\n00:06:33.792 --> 00:06:38.982\nthe server can't ping whoever .3 is,\nneither can ACCESS1.\n\n125\n00:06:38.982 --> 00:06:42.121\nSo I could kinda put the server out of\nmy mind then start troubleshooting from\n\n126\n00:06:42.121 --> 00:06:42.720\nthis switch.\n\n127\n00:06:42.720 --> 00:06:45.270\nWhy can't this switch get to that IP?\n\n128\n00:06:45.270 --> 00:06:46.800\nNow I need to move on\nto my next switches and\n\n129\n00:06:46.800 --> 00:06:51.520\nsee if I can't find this IP address,\nmaybe it'll be on one of these two.\n\n130\n00:06:51.520 --> 00:06:54.120\nSo I'll look at CORE1 and CORE2,\nI'll go ahead and start with CORE1.\n\n131\n00:06:55.360 --> 00:06:59.510\nSo I'll jump over to that guy, and\nwe'll kind of rinse and repeat,\n\n132\n00:06:59.510 --> 00:07:00.870\nrunning through that same process.\n\n133\n00:07:00.870 --> 00:07:03.140\nSo on this one, let me just get logged in.\n\n134\n00:07:05.580 --> 00:07:07.930\nAnd then I'll do a show ip int brief.\n\n135\n00:07:10.380 --> 00:07:13.799\nAnd I can see it's got 192.168.16.2,\nand then it,\n\n136\n00:07:13.799 --> 00:07:16.550\nwell, it's down, down,\nthat's not a good sign.\n\n137\n00:07:16.550 --> 00:07:21.016\nBut it doesn't matter cuz it's the wrong\nIP anyway, it's 192.168.16.2, so\n\n138\n00:07:21.016 --> 00:07:21.827\nthat was close.\n\n139\n00:07:21.827 --> 00:07:25.846\nAnd just to make sure there's\nnot a secondary in there,\n\n140\n00:07:25.846 --> 00:07:28.677\nmaybe I'll do a show run int vlan16.\n\n141\n00:07:28.677 --> 00:07:30.240\nAnd, well this is a neat one.\n\n142\n00:07:30.240 --> 00:07:34.390\nI don't have a secondary IP,\nbut I do have a standby IP.\n\n143\n00:07:34.390 --> 00:07:35.770\nNow what does mean?\n\n144\n00:07:35.770 --> 00:07:38.490\nHSRP, right,\nthe hot standby routing protocol.\n\n145\n00:07:38.490 --> 00:07:45.643\nSo I've got a primary or\nan active router and I've got a standby.\n\n146\n00:07:45.643 --> 00:07:50.194\nThis one's 192.168.16.2, and\nit's got a standby of 192.168.16.1.\n\n147\n00:07:50.194 --> 00:07:52.095\nSo there's some virtual\nIPs on the network now.\n\n148\n00:07:52.095 --> 00:07:55.311\nBut I'm gonna put that out of my\nmind cuz I don't care about those,\n\n149\n00:07:55.311 --> 00:07:57.624\nI care about .3 and\nneither of these are .3.\n\n150\n00:07:57.624 --> 00:07:58.701\nSo that's not my problem for today.\n\n151\n00:07:58.701 --> 00:08:00.448\nWe'll keep moving on, right?\n\n152\n00:08:00.448 --> 00:08:05.350\nSo as we keep moving on,\nthe next switch in line is CORE2.\n\n153\n00:08:05.350 --> 00:08:08.630\nSo I'll jump over to this guy, and\nlet's see what we can find here.\n\n154\n00:08:08.630 --> 00:08:13.280\nSo on this one,\nI'll do a show running-config, and\n\n155\n00:08:13.280 --> 00:08:17.730\nI'll do the include like I mentioned\nearlier, looking for interface and\n\n156\n00:08:17.730 --> 00:08:21.140\nlooking for address, all right.\n\n157\n00:08:21.140 --> 00:08:23.350\nAnd as I run that,\nI start to get my interfaces back,\n\n158\n00:08:23.350 --> 00:08:25.000\nnothing too exciting there.\n\n159\n00:08:25.000 --> 00:08:28.242\nAnd then here's my VLAN interfaces in,\nthere we go.\n\n160\n00:08:28.242 --> 00:08:34.183\nInterface Vlan16 has an IP address of\n192.168.16.3, I just found our target.\n\n161\n00:08:34.183 --> 00:08:39.780\nAll right, now this is CORE2,\nso if I go back to my diagram.\n\n162\n00:08:39.780 --> 00:08:44.109\nMy Cisco server here\ncan Ping to ACCESS1 and\n\n163\n00:08:44.109 --> 00:08:49.030\nthen it should go from\nACCESS1 up to CORE2.\n\n164\n00:08:49.030 --> 00:08:50.540\nSo we've got a direct link right here.\n\n165\n00:08:50.540 --> 00:08:55.622\nPort 23 on ACCESS1, port 22 on CORE2,\nthat's connecting those two together.\n\n166\n00:08:55.622 --> 00:08:57.700\nI should just be able to jump\nright across that link and\n\n167\n00:08:57.700 --> 00:08:59.740\nget to the destination, right.\n\n168\n00:08:59.740 --> 00:09:03.070\nBut that's apparently not working,\nnow why isn't it working?\n\n169\n00:09:03.070 --> 00:09:04.508\nI don't know, let's find out, right?\n\n170\n00:09:04.508 --> 00:09:08.540\nSo on CORE2,\nI found my IP that was in question, right,\n\n171\n00:09:08.540 --> 00:09:11.610\nso it was right back\nhere on interface Vlan16.\n\n172\n00:09:12.960 --> 00:09:17.780\nAnd if I do a quick show run for\ninterface Vlan16, I can look at its\n\n173\n00:09:17.780 --> 00:09:23.290\nconfiguration and I can see that it's\n192.168.16.3 and the subnet mask is right.\n\n174\n00:09:23.290 --> 00:09:26.000\nRemember at the beginning I said one\npossible problem here is the subnet mask\n\n175\n00:09:26.000 --> 00:09:28.220\ncould be wrong and\nwe could be trying to go through a router.\n\n176\n00:09:28.220 --> 00:09:29.980\nThat's not happening here, it is correct.\n\n177\n00:09:29.980 --> 00:09:35.541\nAll right, it does have a standby IP which\nmeans it's part of the HSRP cluster,\n\n178\n00:09:35.541 --> 00:09:38.448\nbut let's think about that for a moment.\n\n179\n00:09:38.448 --> 00:09:41.430\nThe standby IP is 192.168.16.1.\n\n180\n00:09:41.430 --> 00:09:47.740\nThe active HSRP router will answer\nto that, the standby won't.\n\n181\n00:09:47.740 --> 00:09:50.410\nSo if this guy is the standby,\nit might not answer to that.\n\n182\n00:09:50.410 --> 00:09:51.960\nBut what about my unique IP?\n\n183\n00:09:52.980 --> 00:09:55.260\nIt doesn't matter if you're active or\n\n184\n00:09:55.260 --> 00:09:58.820\nstandby, you always\nanswer to your unique IP.\n\n185\n00:09:58.820 --> 00:10:02.890\nSo, we should be answering to this\nregardless of the status of HSRP.\n\n186\n00:10:02.890 --> 00:10:07.340\nHSRP in this case is just a distraction,\nso we'll put that out of our mind.\n\n187\n00:10:07.340 --> 00:10:10.430\nWe need to find out why we're not\nresponding on this IP, right?\n\n188\n00:10:10.430 --> 00:10:13.100\nWell, what's the status of this interface?\n\n189\n00:10:13.100 --> 00:10:18.830\nIf I do a show interface vlan16 and\nlook at its status, right?\n\n190\n00:10:18.830 --> 00:10:20.770\nThat's gonna roll out here.\n\n191\n00:10:20.770 --> 00:10:23.600\nAnd well, this might be a problem.\n\n192\n00:10:23.600 --> 00:10:25.840\nVlan16 is down, line protocol is down.\n\n193\n00:10:25.840 --> 00:10:28.500\nIf the interface is down,\nI'm not gonna respond to the IP.\n\n194\n00:10:28.500 --> 00:10:32.408\nBut where this is confusing is,\nthis is a virtual interface, Vlan16.\n\n195\n00:10:32.408 --> 00:10:37.120\nI'm not talking about a physical interface\nwhere you unplug a cable and it goes down.\n\n196\n00:10:37.120 --> 00:10:38.690\nThis is a virtual interface.\n\n197\n00:10:38.690 --> 00:10:40.892\nSo, what could cause\nthe interface to go down?\n\n198\n00:10:40.892 --> 00:10:43.641\nI could only think of two things, right.\n\n199\n00:10:43.641 --> 00:10:46.560\nI'm sure there's more, but\nin my mind, I can only think of two.\n\n200\n00:10:46.560 --> 00:10:48.250\nOne is somebody did a shutdown command.\n\n201\n00:10:48.250 --> 00:10:49.840\nAll right, you can manually shut it down.\n\n202\n00:10:49.840 --> 00:10:52.760\nBut if that was the case,\nit wouldn't say down here, it would say\n\n203\n00:10:52.760 --> 00:10:57.040\nadministratively down, and I looked at its\nconfiguration just a moment ago, right?\n\n204\n00:10:57.040 --> 00:11:00.600\nIf we were to scroll back on this,\nright here,\n\n205\n00:11:00.600 --> 00:11:04.660\nI don't see a shut down command, so\nit's not been administratively shut down.\n\n206\n00:11:04.660 --> 00:11:08.340\nSo what's the other scenario where\nour VLAN interface can go down?\n\n207\n00:11:08.340 --> 00:11:10.940\nWell in order for\na VLAN interface to be up,\n\n208\n00:11:10.940 --> 00:11:15.170\nyou have to have at least\none port in that same VLAN.\n\n209\n00:11:16.280 --> 00:11:18.540\nAnd if I don't have\na single port in vlan16,\n\n210\n00:11:18.540 --> 00:11:23.360\nthen the VLAN interface is gonna go down,\nthat's the most likely.\n\n211\n00:11:23.360 --> 00:11:24.854\nNow it doesn't normally happen, and\n\n212\n00:11:24.854 --> 00:11:26.960\nthat's because we normally\nhave at least one trunk.\n\n213\n00:11:26.960 --> 00:11:29.398\nAnd if you have a trunk,\nit carries all your VLANs, and\n\n214\n00:11:29.398 --> 00:11:32.578\nthat means you got at least one port\nin every VLAN, the ports stay up, so\n\n215\n00:11:32.578 --> 00:11:35.360\nit's pretty rare to see\nan interface like this be down.\n\n216\n00:11:35.360 --> 00:11:38.662\nSo I've got an issue,\nlet's see if we can figure out what it is.\n\n217\n00:11:38.662 --> 00:11:40.680\nAll right, so now that I know that,\n\n218\n00:11:42.030 --> 00:11:45.450\nlet's take a look at my VLAN configuration\nto see if they can teach us anything.\n\n219\n00:11:45.450 --> 00:11:47.080\nSo if I do a show vlan,\n\n220\n00:11:47.080 --> 00:11:51.998\nwhat I'm expecting to see here\nis at least one port in vlan16.\n\n221\n00:11:51.998 --> 00:11:53.710\nNow I see a bigger problem.\n\n222\n00:11:53.710 --> 00:11:57.894\nI see VLAN 1, I see VLAN 12,\nI don't even see VLAN 16.\n\n223\n00:11:57.894 --> 00:12:01.180\nSo it's not even in my list.\n\n224\n00:12:01.180 --> 00:12:02.949\nMy switch here doesn't\neven know about VLAN 16.\n\n225\n00:12:02.949 --> 00:12:08.125\nBut I've got a virtual interface,\nso it should exist, right?\n\n226\n00:12:08.125 --> 00:12:10.180\nBut it isn't, so I've got a problem here.\n\n227\n00:12:10.180 --> 00:12:12.079\nSo I might need to go in and\nmanually create VLAN 16.\n\n228\n00:12:12.079 --> 00:12:15.320\nBut I'm gonna hold off on that for a\nsecond, just to verify a few other things.\n\n229\n00:12:15.320 --> 00:12:18.600\nBecause if I have a trunk,\nI should be getting it from there, right?\n\n230\n00:12:18.600 --> 00:12:21.820\nThat should be working,\napparently it isn't, right.\n\n231\n00:12:21.820 --> 00:12:24.380\nSo let's check out our trunk status.\n\n232\n00:12:24.380 --> 00:12:30.977\nWell if I do a show interface trunk, we\ncan get an idea of what's going on there.\n\n233\n00:12:30.977 --> 00:12:33.699\nNow when I look at my trunks,\nif I go back to my diagram,\n\n234\n00:12:33.699 --> 00:12:36.120\nI'm concerned about this one right here.\n\n235\n00:12:36.120 --> 00:12:41.710\nIt's port 22 on NYCORE2 and\nit's port 23 on ACCESS1.\n\n236\n00:12:41.710 --> 00:12:45.800\nSo I'm gonna look at port 22 here and\nsee what it's got, right?\n\n237\n00:12:45.800 --> 00:12:52.520\nAnd when I look at that back here, I can\nsee that port 22 has trunking turned on.\n\n238\n00:12:52.520 --> 00:12:56.050\nIt's set for ISL, which is a little\nweird but not out of the question.\n\n239\n00:12:56.050 --> 00:12:57.682\nISL is Inter-Switch Link, right,\n\n240\n00:12:57.682 --> 00:13:00.810\nthat's Cisco's proprietary\ntrunking encapsulation.\n\n241\n00:13:00.810 --> 00:13:04.554\nAnd it's got a native VLAN, which you\ndon't actually have native VLANs in ISL.\n\n242\n00:13:04.554 --> 00:13:08.241\nAnd then we've got port 24\nwhich we don't care about, or\n\n243\n00:13:08.241 --> 00:13:10.907\nat least, we don't care about right now.\n\n244\n00:13:10.907 --> 00:13:14.003\n[LAUGH] And then we've got port 22 down\nhere showing that it's allowing VLANs 1\n\n245\n00:13:14.003 --> 00:13:14.890\nthrough 4,094.\n\n246\n00:13:14.890 --> 00:13:18.740\nSo if VLAN 16 exists,\nit should cross this line.\n\n247\n00:13:18.740 --> 00:13:23.160\nBut then down here I can see,\nFa1/0/22, VLANs allowed and\n\n248\n00:13:23.160 --> 00:13:28.250\nactive in the management domain,\njust 1 and 12, okay?\n\n249\n00:13:28.250 --> 00:13:33.380\nSo, while VLAN 16 is allowed,\nit's not allowed and\n\n250\n00:13:33.380 --> 00:13:37.260\nactive, and it's not active because\nit's not in our VLAN database.\n\n251\n00:13:37.260 --> 00:13:41.490\nSo if we want to fix that, well,\nwe'll need to create the VLAN, all right?\n\n252\n00:13:41.490 --> 00:13:43.260\nAnd creating a VLAN is\npretty straightforward.\n\n253\n00:13:43.260 --> 00:13:46.929\nYou just go in your configuration,\nand you say vlan 16, right?\n\n254\n00:13:46.929 --> 00:13:49.630\nSo that's gonna create that.\n\n255\n00:13:51.290 --> 00:13:56.050\nAnd now when I do a show vlan and\nI look at my VLAN database,\n\n256\n00:13:56.050 --> 00:14:01.080\nI can see that I've got VLAN 16 right\nthere, right, so I now know about VLAN 16.\n\n257\n00:14:01.080 --> 00:14:06.100\nAnd if I do a show interface trunk,\nI can look at my trunk\n\n258\n00:14:06.100 --> 00:14:10.918\nconfiguration and\nport 22 is now carrying VLAN 16, right.\n\n259\n00:14:10.918 --> 00:14:15.403\nAnd if I wait a moment, it hasn't happened\nyet which is also a little odd, but\n\n260\n00:14:15.403 --> 00:14:20.168\nthe VLAN interface should come up because\nnow I have at least one port on that VLAN.\n\n261\n00:14:20.168 --> 00:14:23.862\nSo if I do a show interface vlan16,\n\n262\n00:14:23.862 --> 00:14:27.920\nwhat I expect to see is it should come up.\n\n263\n00:14:27.920 --> 00:14:30.714\nAnd in fact,\nI see that vlan16 is now up, up.\n\n264\n00:14:30.714 --> 00:14:33.770\nSo looks like I've solved my problem,\nright.\n\n265\n00:14:33.770 --> 00:14:35.220\nThe interface is up.\n\n266\n00:14:35.220 --> 00:14:37.170\nNow here's where things get really tough.\n\n267\n00:14:37.170 --> 00:14:39.210\nOn the exam, you don't have a lot of time.\n\n268\n00:14:39.210 --> 00:14:41.890\nSo you'll be tempted, hey I got\nthe interface up, it's good to go,\n\n269\n00:14:41.890 --> 00:14:43.710\nlet's jump pass it, all right.\n\n270\n00:14:43.710 --> 00:14:46.150\nBut you always need to verify your work,\nright.\n\n271\n00:14:46.150 --> 00:14:49.220\nRemember, I left that work station doing\nPings in the background so I can go and\n\n272\n00:14:49.220 --> 00:14:51.360\ntest it to see if whether or\nnot this is working.\n\n273\n00:14:51.360 --> 00:14:53.560\nDid that solve my problem?\n\n274\n00:14:53.560 --> 00:14:59.640\nAnd so I'll jump back to PLABCSCO01 and\nthings aren't looking good here, right?\n\n275\n00:14:59.640 --> 00:15:01.200\nIt's still failing, so\n\n276\n00:15:01.200 --> 00:15:04.790\nI'm glad that I came here to verify\nit because did I fix a problem?\n\n277\n00:15:04.790 --> 00:15:08.908\nYeah, I fixed a problem on my network,\nbut it's not the only thing,\n\n278\n00:15:08.908 --> 00:15:13.610\nI got that VLAN interface to go up but\nsomething else is stopping me.\n\n279\n00:15:13.610 --> 00:15:15.460\nSo, let's find out what, all right?\n\n280\n00:15:15.460 --> 00:15:17.420\nNow, when I look at my topology,\n\n281\n00:15:18.540 --> 00:15:22.720\nI can see that that interface was up,\nthe trunk appeared to be healthy.\n\n282\n00:15:22.720 --> 00:15:26.180\nWell, actually, I verified one end of it.\n\n283\n00:15:26.180 --> 00:15:30.540\nTrunks are really bad about telling you\nthey're up and healthy when they aren't.\n\n284\n00:15:30.540 --> 00:15:33.450\nAnd the reason is that trunks only\ncheck their side of the configuration.\n\n285\n00:15:33.450 --> 00:15:35.880\nSo there can be a problem on the other\nside and we wouldn't know it.\n\n286\n00:15:35.880 --> 00:15:38.800\nAnd I only verified one side,\nI verified CORE2.\n\n287\n00:15:38.800 --> 00:15:40.745\nCORE2 looked fine.\n\n288\n00:15:40.745 --> 00:15:42.760\nACCESS1, I haven't\nreally looked at at all.\n\n289\n00:15:42.760 --> 00:15:46.580\nSo let's take a look at the two ends of\nthis trunk and verify that configuration.\n\n290\n00:15:46.580 --> 00:15:53.400\nSo on CORE2, if I get back to it,\nso I'll just jump over to CORE2.\n\n291\n00:15:53.400 --> 00:15:57.851\nWe pulled up its configuration way\nback here, well at this point,\n\n292\n00:15:57.851 --> 00:16:00.404\nit would be faster to pull it up again.\n\n293\n00:16:00.404 --> 00:16:01.847\nAll right well, we'll pull it up again.\n\n294\n00:16:01.847 --> 00:16:05.437\n[LAUGH] So\nif we take a look at it's configurations.\n\n295\n00:16:05.437 --> 00:16:07.590\nSo I'm just going to do\na show run interface.\n\n296\n00:16:07.590 --> 00:16:10.109\nFa1/0/22.\n\n297\n00:16:10.109 --> 00:16:13.388\nAll right, and when I look at it\nI can see switchport trunk and\n\n298\n00:16:13.388 --> 00:16:17.390\nencapsulation ISL, switchport mode trunk,\nspanning tree guard root.\n\n299\n00:16:17.390 --> 00:16:19.240\nSo it's got some root guard turned on it.\n\n300\n00:16:19.240 --> 00:16:21.759\nI don't think that's going to be\na problem for him but we'll see.\n\n301\n00:16:21.759 --> 00:16:23.791\nThere could be some root\nelection stuff going on.\n\n302\n00:16:23.791 --> 00:16:27.347\nBut it's set up,\nI'm not blocking VLAN16, and\n\n303\n00:16:27.347 --> 00:16:32.060\nI knew that because I saw it in\nshow interface trunk that VLAN's 1,\n\n304\n00:16:32.060 --> 00:16:35.550\n12 and\n16 were all being carried on port 22.\n\n305\n00:16:35.550 --> 00:16:37.220\nSo things look good here.\n\n306\n00:16:37.220 --> 00:16:40.110\nI don't see any glaring problems, right?\n\n307\n00:16:40.110 --> 00:16:45.330\nIf I jump over to access one I can kind\nof repeat that same process right so\n\n308\n00:16:45.330 --> 00:16:47.530\nover here on access one I'm\ngonna do that same thing.\n\n309\n00:16:49.360 --> 00:16:53.065\nAnd see if this one's good or\nhaving problems too.\n\n310\n00:16:53.065 --> 00:16:57.514\nSo on this side,\nif I go back to my diagram it's port 23.\n\n311\n00:16:57.514 --> 00:17:02.022\nAnd so if I do a show run for\nfa0/23 I can see\n\n312\n00:17:02.022 --> 00:17:06.786\nit's got switchport trunk allowed vlan 16.\n\n313\n00:17:06.786 --> 00:17:11.371\nThat means that I'm set up to be a trunk\nright, switchport mode trunk and\n\n314\n00:17:11.371 --> 00:17:13.337\nI'm only allowing vlan 16.\n\n315\n00:17:13.337 --> 00:17:15.270\nNow is that a problem?\n\n316\n00:17:15.270 --> 00:17:19.530\nWell, it could be if I was using any other\nvlan but vlan 16 is what I care about.\n\n317\n00:17:19.530 --> 00:17:21.800\nAnd so\nthe fact that it only carries vlan 16.\n\n318\n00:17:21.800 --> 00:17:22.960\nI'm okay with that.\n\n319\n00:17:22.960 --> 00:17:26.210\nThe other side of sending vlan 1 and\nvlan 12, we're just throwing it away.\n\n320\n00:17:26.210 --> 00:17:27.200\nWe're just ignoring those right.\n\n321\n00:17:27.200 --> 00:17:29.320\nWe're only doing vlan 16.\n\n322\n00:17:29.320 --> 00:17:29.960\nAnd I'm fine with that.\n\n323\n00:17:31.260 --> 00:17:31.990\nSo that looks good.\n\n324\n00:17:31.990 --> 00:17:36.390\nIf I do a show interface trunk, here's\nwhere I can verify that it is actually\n\n325\n00:17:36.390 --> 00:17:41.618\ntrunking and I can see on port 23 my\ntrunking is on, and here is our problem.\n\n326\n00:17:41.618 --> 00:17:44.695\nEncapsulation 802.1q.\n\n327\n00:17:44.695 --> 00:17:46.330\nSo that doesn't match.\n\n328\n00:17:46.330 --> 00:17:50.246\nThe other end was ISL, this end is A02.1q\nbut it seems to think that it's happy.\n\n329\n00:17:50.246 --> 00:17:54.862\nHey, I'm doing vlan16,\nwe've got it carried on port 23, it's up,\n\n330\n00:17:54.862 --> 00:17:56.549\nit's allowed and active,\n\n331\n00:17:56.549 --> 00:18:01.784\nit doesn't realize the other side isn't\nunderstanding what we're sending to it.\n\n332\n00:18:01.784 --> 00:18:05.630\nSo I need to switch to\na matching protocol.\n\n333\n00:18:05.630 --> 00:18:08.310\nSo on access one I had a choice, right?\n\n334\n00:18:08.310 --> 00:18:12.792\nI could change the other side to be dot1Q\nor I could change this side to ISL.\n\n335\n00:18:12.792 --> 00:18:15.470\nSo let's say I want to change\nthis side to be ISL, right?\n\n336\n00:18:15.470 --> 00:18:22.846\nI can get into interface fa0/23 and\nI can say switchport.\n\n337\n00:18:22.846 --> 00:18:27.478\nTrunk, encapsulation dot1q, right?\n\n338\n00:18:27.478 --> 00:18:29.591\nAnd so I'm gonna set that.\n\n339\n00:18:29.591 --> 00:18:30.932\nThis is a tricky one.\n\n340\n00:18:30.932 --> 00:18:33.760\nAll right, so I tried to set the\nencapsulation, and I got an error, right?\n\n341\n00:18:33.760 --> 00:18:36.830\nIt says switchboard trunk, and\nthen encapsulation gave me an error.\n\n342\n00:18:36.830 --> 00:18:40.960\nAnd so if I do a switchboard trunk\nquestion mark, what's going on there?\n\n343\n00:18:40.960 --> 00:18:42.460\nI don't have an encapsulation command.\n\n344\n00:18:43.540 --> 00:18:44.285\nWhy is that?\n\n345\n00:18:44.285 --> 00:18:49.264\nWell this switch,\nif I do a show version, the switch,\n\n346\n00:18:49.264 --> 00:18:53.832\nthere it is, is a 2960, the Cisco 2960.\n\n347\n00:18:53.832 --> 00:18:58.910\nThe Cisco 2960 is a mid-range switch and\nit doesn't support ISL.\n\n348\n00:18:58.910 --> 00:19:03.720\nIt only supports 802.1Q and that's why I\ndidn't see anything in the configuration.\n\n349\n00:19:03.720 --> 00:19:07.190\nAnd here I can't set it to ISL, so\nthe decisions actually been made for me.\n\n350\n00:19:07.190 --> 00:19:10.273\nI can't set this one to ISL that means I\nhave to change the other side to .1Q or\n\n351\n00:19:10.273 --> 00:19:11.709\nthis isn't going to work, right.\n\n352\n00:19:11.709 --> 00:19:16.582\nSo if I jump over to New York core two,\n\n353\n00:19:16.582 --> 00:19:21.614\nthis guy, I can go into this switch and\n\n354\n00:19:21.614 --> 00:19:26.658\nget into interface FA 1/0/22.\n\n355\n00:19:26.658 --> 00:19:31.589\nAnd I can say switchport\ntrunk encapsulation, and\n\n356\n00:19:31.589 --> 00:19:38.481\nfrom here I can tell it that I wanna\ndo dot1q or ISL and I wanna do dot1q.\n\n357\n00:19:38.481 --> 00:19:39.070\nAll right.\n\n358\n00:19:39.070 --> 00:19:43.840\nNow I should be talking the same language\nas the other side of this trunk.\n\n359\n00:19:43.840 --> 00:19:49.590\nAnd now vlan 16 traffic should be able\nto pass over this link just fine.\n\n360\n00:19:49.590 --> 00:19:51.230\nAll right.\n\n361\n00:19:51.230 --> 00:19:52.380\nHow can we test that?\n\n362\n00:19:52.380 --> 00:19:53.960\nWell, we can jump back\nto our work station.\n\n363\n00:19:53.960 --> 00:19:55.990\nAnd I do wanna wait just a moment.\n\n364\n00:19:55.990 --> 00:19:58.950\nAnd that's because we've got spanning\ntree running, right, loop detection.\n\n365\n00:19:58.950 --> 00:20:01.210\nAnd so sometimes when you bring\na new interface up like this,\n\n366\n00:20:01.210 --> 00:20:03.350\nit can take it a moment\nto get through that.\n\n367\n00:20:03.350 --> 00:20:06.460\nSo for example,\nif I do a show spanning-tree for vlan 16,\n\n368\n00:20:06.460 --> 00:20:09.760\nwhat you might is the ports are still in\nlistening and learning, and sure enough,\n\n369\n00:20:09.760 --> 00:20:11.580\nI see I caught this one in learning.\n\n370\n00:20:11.580 --> 00:20:14.620\nIf it's set to the default, which on\nthe exam it may or may not be, but\n\n371\n00:20:14.620 --> 00:20:17.520\nif it's set to the defaults\nit'll listen for 15 seconds and\n\n372\n00:20:17.520 --> 00:20:22.020\nlearn for 15 seconds so I have to wait 30\nseconds before this link comes active.\n\n373\n00:20:22.020 --> 00:20:23.660\nAnd so I'm gonna do that.\n\n374\n00:20:23.660 --> 00:20:25.510\nThere we go, now it's active.\n\n375\n00:20:25.510 --> 00:20:29.260\nAnd now I'm going to jump\nover to my server and\n\n376\n00:20:29.260 --> 00:20:30.980\nsure enough we fixed our problem.\n\n377\n00:20:30.980 --> 00:20:34.510\nSo right there we got vlan 16 up and\ngoing.\n\n378\n00:20:34.510 --> 00:20:39.040\nWhat this problem boiled down to in the\nend was actually two little issues, right?\n\n379\n00:20:39.040 --> 00:20:43.184\nThe first issue was that NYCORE2\ndidn't know about vlan 16,\n\n380\n00:20:43.184 --> 00:20:46.440\nI had to create vlan 16 on that switch.\n\n381\n00:20:46.440 --> 00:20:51.170\nThe other problem was that\nthe trunking protocol was mismatched.\n\n382\n00:20:51.170 --> 00:20:54.020\nWe had ISL on one side and\n.Q on the other.\n\n383\n00:20:54.020 --> 00:20:55.590\nThose are completely different protocols.\n\n384\n00:20:55.590 --> 00:20:59.802\nIt could've been that they were set with\nauto negotiation wrong, right, it wasn't\n\n385\n00:20:59.802 --> 00:21:02.330\nauto negotiating, but here we manually\nset it, so it didn't really matter.\n\n386\n00:21:02.330 --> 00:21:05.800\nBut once those are set it came up healthy,\nand our problem is solved.\n\n387\n00:21:05.800 --> 00:21:07.430\nSo that takes care of this one.\n\n388\n00:21:07.430 --> 00:21:10.360\nSounded like a pretty simple one,\none host couldn't ping another host,\n\n389\n00:21:10.360 --> 00:21:11.840\nturned out to be quite\na bit of digging there.\n\n390\n00:21:11.840 --> 00:21:14.650\nBut you guys get an idea of how\nwe can isolate those problems and\n\n391\n00:21:14.650 --> 00:21:16.570\nget them resolved and\nthen move forward on it.\n\n392\n00:21:16.570 --> 00:21:19.666\nSo that's it for question number one or\nissue number one.\n\n393\n00:21:19.666 --> 00:21:22.836\nStay tuned cuz we've got the remaining\nissues for set two coming up.\n\n394\n00:21:22.836 --> 00:21:29.570\n[NOISE]\n\n",
          "vimeoId": "149150774"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #2` from set #2. The trouble ticket states that \"VLANs are not being propagated to NYACCESS1 when you create them on NYCORE1 or NYCORE2. \"",
          "length": "1008",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-2-2-set_2_issue_2-112315-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-2-2-set_2_issue_2-112315-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-2-2-set_2_issue_2-112315-1-sm.jpg",
          "title": "Set 2 Issue 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.025 --> 00:00:05.188\n[SOUND] In this video, we're gonna\n\n2\n00:00:05.188 --> 00:00:10.716\nbe taking a look at set two issue two.\n\n3\n00:00:10.716 --> 00:00:12.734\nSo we're continuing with\nthe same network environment,\n\n4\n00:00:12.734 --> 00:00:14.390\nwe got a slightly different\nproblem this time.\n\n5\n00:00:14.390 --> 00:00:18.990\nSo let me read to you the support ticket\nis VLANs are not being propagated to\n\n6\n00:00:18.990 --> 00:00:22.890\nNew York access one, when you create\nthem on New York core one and\n\n7\n00:00:22.890 --> 00:00:23.850\nNew York core two.\n\n8\n00:00:23.850 --> 00:00:27.610\nNow it's a short question, just a little\nbit of information given us there.\n\n9\n00:00:27.610 --> 00:00:29.520\nReally just the names of three switches,\nand\n\n10\n00:00:29.520 --> 00:00:31.350\nthe fact that VLANs aren't propagating.\n\n11\n00:00:31.350 --> 00:00:33.640\nAnd if I take a look at my topology,\n\n12\n00:00:33.640 --> 00:00:36.830\nwe kinda get an idea of where\nthis problem is occurring.\n\n13\n00:00:36.830 --> 00:00:40.040\nI've got New York access one,\nNew York core one and New York core two.\n\n14\n00:00:40.040 --> 00:00:42.660\nThese three, which have or\n\n15\n00:00:42.660 --> 00:00:46.050\nmore than likely have trunks that in\nbetween them to exchange VLAN information.\n\n16\n00:00:46.050 --> 00:00:49.070\nNow, when they say VLANs\naren't propagating,\n\n17\n00:00:49.070 --> 00:00:51.850\nthey mean if I create a Vlan here.\n\n18\n00:00:51.850 --> 00:00:53.240\nAccess one is not learning about it.\n\n19\n00:00:53.240 --> 00:00:56.230\nOr if I create a VLAN here access\none is not learning about it.\n\n20\n00:00:56.230 --> 00:00:59.950\nNow, how can switches learn about VLANs?\n\n21\n00:00:59.950 --> 00:01:01.970\nWell, VLAN Trunking Protocol,\nit's the only way.\n\n22\n00:01:01.970 --> 00:01:05.000\nThere's no other technology on\nthe Cisco switches where they can learn\n\n23\n00:01:05.000 --> 00:01:06.120\nabout a VLAN.\n\n24\n00:01:06.120 --> 00:01:08.460\nSo this is a VTP problem, right?\n\n25\n00:01:08.460 --> 00:01:11.920\nI'm gonna have some kind of issue where\nVLAN Trunking Protocol's not working.\n\n26\n00:01:11.920 --> 00:01:14.760\nWell, whenever I hear about a VTP problem,\n\n27\n00:01:14.760 --> 00:01:17.070\nthe first thing I always\nthink about are the trunks.\n\n28\n00:01:17.070 --> 00:01:20.690\nA lot of people, it's hard to connect\nwhen you read the Cisco documentation,\n\n29\n00:01:20.690 --> 00:01:24.320\nbut VTP only works over trunks.\n\n30\n00:01:24.320 --> 00:01:26.870\nSo if I have access ports\nbetween these switches,\n\n31\n00:01:26.870 --> 00:01:28.760\nthey're not gonna propagate information.\n\n32\n00:01:28.760 --> 00:01:32.140\nSo I need to have valid trunks\nin between these switches for\n\n33\n00:01:32.140 --> 00:01:33.960\nthem to learn about the networks.\n\n34\n00:01:33.960 --> 00:01:36.990\nNow they're telling me if I\ncreate VLANs on CORE1 or CORE2,\n\n35\n00:01:36.990 --> 00:01:40.830\nthey're not making it down here, I'm\ngonna narrow this down a little bit and\n\n36\n00:01:40.830 --> 00:01:43.570\nstart my troubleshooting just\nbetween Core 1 and Access 1.\n\n37\n00:01:43.570 --> 00:01:47.930\nIt's a good idea to kind of narrow it down\nand then spread out from there as needed.\n\n38\n00:01:47.930 --> 00:01:50.390\nSo I'm gonna look at these guys and\njust see what's going on.\n\n39\n00:01:50.390 --> 00:01:52.580\nAnd I'll start with Access 1,\nsince it's our problem child.\n\n40\n00:01:52.580 --> 00:01:55.780\nMaybe this will be easy and\nI can spot it right there, right.\n\n41\n00:01:55.780 --> 00:02:01.960\nSo if I jump over to Access 1 and\nget logged into hat switch.\n\n42\n00:02:03.180 --> 00:02:05.890\nSo let me just get into that one here,\nreal quick.\n\n43\n00:02:05.890 --> 00:02:08.260\nAnd on Access 1,\nwe're gonna take a look at a few things.\n\n44\n00:02:08.260 --> 00:02:10.620\nI want to verify that VTP configuration.\n\n45\n00:02:10.620 --> 00:02:15.600\nSo I'm gonna do a show VTP status\njust to see if I am running VTP.\n\n46\n00:02:15.600 --> 00:02:17.110\nAnd I can see that I am.\n\n47\n00:02:17.110 --> 00:02:19.980\nAnd I've got a domain name\nof practicelabs right there.\n\n48\n00:02:19.980 --> 00:02:21.300\nSo it's up and happy.\n\n49\n00:02:21.300 --> 00:02:23.920\nAnd everything seems to be okay, right?\n\n50\n00:02:23.920 --> 00:02:25.310\nSo it's got VTP in place, and\n\n51\n00:02:25.310 --> 00:02:28.260\nI should be exchanging\ninformation with other switches.\n\n52\n00:02:28.260 --> 00:02:32.760\nIf I do a show VLAN and\nI take a look at that.\n\n53\n00:02:32.760 --> 00:02:37.430\nWell, I can see that I've got VLAN 1 and\nI've got VLAN 16 and that's about it.\n\n54\n00:02:37.430 --> 00:02:40.530\nSo I don't have a bunch of other VLANs.\n\n55\n00:02:40.530 --> 00:02:43.400\nThey're telling me I'm not learning\nabout VLANs, that I should be.\n\n56\n00:02:43.400 --> 00:02:47.260\nHere, I just see that I've got\nthese two and that's it, allright?\n\n57\n00:02:47.260 --> 00:02:50.430\nAs far as the trunk situation goes,\nif I do a show interface trunk\n\n58\n00:02:51.730 --> 00:02:55.300\nI can take a look at that and I can see\nthat ports 23 and 24 are both trunks.\n\n59\n00:02:55.300 --> 00:02:57.160\nAnd if I look at my diagram, ports 23 and\n\n60\n00:02:57.160 --> 00:03:00.510\n24 are the trunks that run\nto the other two switches.\n\n61\n00:03:00.510 --> 00:03:02.450\nSo I kind of expect to see that.\n\n62\n00:03:02.450 --> 00:03:07.620\nThey're up and\nthey're only carrying VLAN 16 which\n\n63\n00:03:07.620 --> 00:03:09.440\nmight be a problem, it might not, right?\n\n64\n00:03:09.440 --> 00:03:12.310\nIt might be that I only have\nports available on port 16, but\n\n65\n00:03:12.310 --> 00:03:17.310\nas long as at least one VLAN is\nfunctioning, then I should be okay, right?\n\n66\n00:03:17.310 --> 00:03:20.680\nVTP will function as long as there's at\nleast one VLAN functioning on that trunk,\n\n67\n00:03:20.680 --> 00:03:22.260\nand I've got VLAN 16.\n\n68\n00:03:22.260 --> 00:03:27.400\nSo if I take a look at the other switches,\nI should expect to see something similar.\n\n69\n00:03:27.400 --> 00:03:29.110\nAnd so let's do that.\n\n70\n00:03:29.110 --> 00:03:31.310\nLet's jump over to CORE1.\n\n71\n00:03:32.480 --> 00:03:34.310\nAnd I'll do the same basic thing here.\n\n72\n00:03:34.310 --> 00:03:36.320\nSo I'm gonna get into that switch.\n\n73\n00:03:37.780 --> 00:03:39.680\nAnd I'll do a show VTP status.\n\n74\n00:03:40.940 --> 00:03:44.270\nAnd when I look at its VTP status here,\nI get its information.\n\n75\n00:03:44.270 --> 00:03:49.170\nIt's up, it's got practice labs, I can\nsee, everything seems to be okay here.\n\n76\n00:03:49.170 --> 00:03:54.430\nAnd if I do a show VLAN, on the other\nswitch I knew about VLAN one and\n\n77\n00:03:54.430 --> 00:03:57.240\n16, here I see VLAN 112 and 16.\n\n78\n00:03:57.240 --> 00:04:00.350\nSo, I'm reaffirming what\nthey told me in the problem.\n\n79\n00:04:00.350 --> 00:04:03.560\nThe problem said,\nyou've got another switch out there.\n\n80\n00:04:03.560 --> 00:04:07.720\nAnd it's, VLAN, or\nit's not learning about new VLANs.\n\n81\n00:04:07.720 --> 00:04:09.530\nI've got VLAN 12 here.\n\n82\n00:04:09.530 --> 00:04:11.830\nThat other switch should have learned\nabout VLAN 12, but it didn't have it.\n\n83\n00:04:11.830 --> 00:04:13.470\nSo it's not learning about VLANs.\n\n84\n00:04:13.470 --> 00:04:15.850\nIf I really wanted to verify it\nI could go a step further and\n\n85\n00:04:15.850 --> 00:04:17.320\nI could create my own VLAN.\n\n86\n00:04:17.320 --> 00:04:18.590\nRight, so I could do VLAN 999, right.\n\n87\n00:04:18.590 --> 00:04:21.689\nSo I'm just gonna whip\nthat VLAN up real quick.\n\n88\n00:04:22.930 --> 00:04:26.780\nAnd if I do a show VLAN on this guy,\n\n89\n00:04:26.780 --> 00:04:30.130\nnow I can see that I've got VLAN\n999 right there, all right.\n\n90\n00:04:30.130 --> 00:04:32.350\nAnd, in theory,\nthat should propagate over.\n\n91\n00:04:32.350 --> 00:04:35.570\nIf I'm running vtp, and it's exchanging\ninformation with the other side,\n\n92\n00:04:35.570 --> 00:04:37.310\nthen it should be there, right.\n\n93\n00:04:37.310 --> 00:04:41.040\nAnd I guess I could verify on Core 2 and\nmake sure Core 2 is learning.\n\n94\n00:04:41.040 --> 00:04:43.950\nSo if I jump over to CORE2.\n\n95\n00:04:43.950 --> 00:04:45.380\nWhere is CORE2?\n\n96\n00:04:45.380 --> 00:04:50.360\nThere it is, if I jump over to CORE2 we\ncan kind of repeat that same exercise.\n\n97\n00:04:52.410 --> 00:04:56.410\nAnd do a show VLAN.\n\n98\n00:04:56.410 --> 00:04:58.140\nAnd see if it's learning, right?\n\n99\n00:04:58.140 --> 00:05:01.270\nAnd it knows about VLANs 1,\n12, 16 and 999.\n\n100\n00:05:01.270 --> 00:05:05.910\nSo, it looks like I've got good VTP\nexchanges going on between core 1 and\n\n101\n00:05:05.910 --> 00:05:09.510\ncore 2, but I don't have good\nexchanges going down to access 1.\n\n102\n00:05:09.510 --> 00:05:12.550\nSo it looks like I've got a bit\nof a problem there, all right.\n\n103\n00:05:12.550 --> 00:05:15.940\nNow, I started on access 1, and in fact,\nI'm gonna double back to access 1,\n\n104\n00:05:15.940 --> 00:05:17.790\njust to make sure that\n999 isn't showing up.\n\n105\n00:05:18.820 --> 00:05:19.930\nAnd we'll see what's happening here.\n\n106\n00:05:19.930 --> 00:05:23.580\nNow there's a couple of things we need to\nthink about with VTP that could be causing\n\n107\n00:05:25.210 --> 00:05:26.100\nthis problem.\n\n108\n00:05:26.100 --> 00:05:29.020\nIf VLAN 999 starts to\nshow up all of a sudden,\n\n109\n00:05:29.020 --> 00:05:31.510\nthat can tell me that I've got\na certain kind of problem.\n\n110\n00:05:31.510 --> 00:05:33.040\nAnd if VLAN 999 doesn't show up,\nwhich is not for\n\n111\n00:05:33.040 --> 00:05:34.540\nme, then I know I've got a different kind.\n\n112\n00:05:34.540 --> 00:05:36.850\nNow what are the two problems?\n\n113\n00:05:36.850 --> 00:05:39.150\nIf VLAN 999 all of a sudden showed up.\n\n114\n00:05:39.150 --> 00:05:42.190\nMy problem could have simply\nbeen configuration revisions.\n\n115\n00:05:42.190 --> 00:05:44.910\nIf I'm running VTP and I've got\ntwo nodes and they've got the same\n\n116\n00:05:44.910 --> 00:05:48.690\nconfiguration revision number, then\nthey assume they have the same database.\n\n117\n00:05:48.690 --> 00:05:50.470\nAnd they don't exchange information.\n\n118\n00:05:50.470 --> 00:05:55.450\nIf you do a show VTP status,\nmixed in with your status,\n\n119\n00:05:55.450 --> 00:05:59.070\nyou'll find a configuration\nrevision number right there.\n\n120\n00:05:59.070 --> 00:06:04.050\nAnd in my case, I can look at it and I\nsee I've got that revision number of two.\n\n121\n00:06:04.050 --> 00:06:08.070\nIf the other side has a revision number\nof two also, then ours match and\n\n122\n00:06:08.070 --> 00:06:10.160\nwe won't exchange information.\n\n123\n00:06:10.160 --> 00:06:11.880\nAnd so looking this up,\ngot the revision two,\n\n124\n00:06:11.880 --> 00:06:14.100\nnow I made a change on the other side.\n\n125\n00:06:14.100 --> 00:06:18.450\nAnd when I made a change on the other\nside, that should have moved it up.\n\n126\n00:06:18.450 --> 00:06:21.230\nSo even if they did match before,\nnow they shouldn't match and\n\n127\n00:06:21.230 --> 00:06:24.130\nI should have learned it, and\nthat hasn't happened, right?\n\n128\n00:06:24.130 --> 00:06:26.930\nYou do have to be a little careful to VTP,\nbecause it uses timers.\n\n129\n00:06:26.930 --> 00:06:28.930\nAnd so it may be that I just\nhaven't waited long enough.\n\n130\n00:06:28.930 --> 00:06:33.080\nBut in this case I'm pretty sure I've\nwaited long enough and if I keep looking\n\n131\n00:06:33.080 --> 00:06:38.210\nat VTP and I keep looking at my VLANs I'm\nprobably not gonna see anything new.\n\n132\n00:06:38.210 --> 00:06:39.350\nAnd sure enough, I'm not.\n\n133\n00:06:39.350 --> 00:06:40.770\nI'm not learning things.\n\n134\n00:06:41.940 --> 00:06:45.290\nI don't see any giant red\nflags coming off of me,\n\n135\n00:06:45.290 --> 00:06:48.410\nbut I need to verify those trunks, right?\n\n136\n00:06:48.410 --> 00:06:53.120\nRemember on this side I had a trunk, but\nit was only set to carry VLAN 16, and\n\n137\n00:06:53.120 --> 00:06:54.210\nthat was it.\n\n138\n00:06:54.210 --> 00:06:56.000\nWell, if I jump over and\n\n139\n00:06:56.000 --> 00:07:00.620\ntake a look at the other side,\nI need to see basically VLAN 16.\n\n140\n00:07:00.620 --> 00:07:03.980\nRemember I said I need to have at least\none v land up in order for this to work,\n\n141\n00:07:03.980 --> 00:07:06.520\nand actually I guess I should\nclarify that a little bit more.\n\n142\n00:07:06.520 --> 00:07:08.500\nVTP is kind of weird.\n\n143\n00:07:08.500 --> 00:07:10.786\nIt needs at least one VLAN to be up,\n\n144\n00:07:10.786 --> 00:07:13.250\nbut it really needs is\nthe native VLAN to be up.\n\n145\n00:07:13.250 --> 00:07:15.030\nBecause that's what\nVTP's communicating on.\n\n146\n00:07:15.030 --> 00:07:19.720\nAnd if you have at least one VLAN up,\nthen your native VLAN should be up also.\n\n147\n00:07:19.720 --> 00:07:22.550\nBut it can be a little weird\nbecause like here I don't actually,\n\n148\n00:07:22.550 --> 00:07:24.640\nI didn't pay attention\nwith my native VLAN was.\n\n149\n00:07:24.640 --> 00:07:29.840\nIt could be that because we're blocking\njust down the one VLAN, just VLAN 16.\n\n150\n00:07:29.840 --> 00:07:33.250\nIf VLAN 16 isn't my native VLAN\n\n151\n00:07:33.250 --> 00:07:35.490\nthen VTP might be using a VLAN\nthat's getting blocked.\n\n152\n00:07:35.490 --> 00:07:38.540\nThis is a weird behavior of of VTP\nthat you've got to be familiar with.\n\n153\n00:07:38.540 --> 00:07:40.690\nNormally, people leave\nthe native VLAN at VLAN 1.\n\n154\n00:07:40.690 --> 00:07:43.300\nAnd that means VTP is using VLAN 1.\n\n155\n00:07:43.300 --> 00:07:45.000\nAnd we need it moving.\n\n156\n00:07:45.000 --> 00:07:48.470\nSo my block might be causing\na bit of a problem here.\n\n157\n00:07:48.470 --> 00:07:53.330\nSo I'm gonna jump over to CORE1 and just\nkind of verify its trunk configuration\n\n158\n00:07:54.900 --> 00:07:56.319\nwith a little show interface trunk.\n\n159\n00:07:57.780 --> 00:08:01.000\nAnd if I look at my diagram, it's port\n22 on Core1 that's going down there.\n\n160\n00:08:01.000 --> 00:08:03.260\nSo I want to look at port 22.\n\n161\n00:08:03.260 --> 00:08:05.890\nAnd port 22 is set to carry every VLAN.\n\n162\n00:08:05.890 --> 00:08:07.390\nAnd here it is, it's good to go.\n\n163\n00:08:07.390 --> 00:08:10.060\nSo it's got all those\nVLAN moving across it.\n\n164\n00:08:10.060 --> 00:08:11.590\nVLAN1, 12, 16, 999.\n\n165\n00:08:11.590 --> 00:08:13.730\nEverything looks fine here.\n\n166\n00:08:13.730 --> 00:08:16.620\nSo VTP should be healthy and happy.\n\n167\n00:08:16.620 --> 00:08:19.290\nIt's 802.1q trunking and\nif I compare that with Access1.\n\n168\n00:08:19.290 --> 00:08:23.880\nSo I'm just gonna do a show int trunk,\n\n169\n00:08:23.880 --> 00:08:26.550\nand we'll take a look at the trunk\nend configuration here again.\n\n170\n00:08:26.550 --> 00:08:30.390\nAnd on port 23, going back to my diagram,\nactually, it's port 24,\n\n171\n00:08:30.390 --> 00:08:34.730\nso I'm glad I double checked on port 24,\nmy trunking is on.\n\n172\n00:08:34.730 --> 00:08:36.780\nIt's 802.1q.\nMy native VLAN is 1.\n\n173\n00:08:36.780 --> 00:08:38.920\nAll right, so, now we got an issue.\n\n174\n00:08:38.920 --> 00:08:41.620\nThe native VLAN, VLAN 1, is being pruned.\n\n175\n00:08:41.620 --> 00:08:43.320\nRight, so, it's being cut off here.\n\n176\n00:08:43.320 --> 00:08:45.910\nSo, why is it being cut off?\n\n177\n00:08:45.910 --> 00:08:48.350\nThere's a few things that\ncould cause it to be cut off.\n\n178\n00:08:48.350 --> 00:08:52.530\nIf the virtual interface is shut down, if\nI don't have any interfaces in VLAN one.\n\n179\n00:08:52.530 --> 00:08:55.050\nThose are things that can cause it\nto be shut down, but in this case,\n\n180\n00:08:55.050 --> 00:08:57.080\nif I remember right,\nit's just a straight up filter, right.\n\n181\n00:08:57.080 --> 00:09:03.740\nIf I do a show run for interface fa0/24,\nI think we've got the allowed VLAN, yeah.\n\n182\n00:09:03.740 --> 00:09:05.360\nSee, it's just being filtered.\n\n183\n00:09:05.360 --> 00:09:07.380\nIf you ever filter out the native VLAN,\n\n184\n00:09:07.380 --> 00:09:10.910\nit can cause all sorts of weird\nproblems I have two solutions here.\n\n185\n00:09:10.910 --> 00:09:14.900\nOne, I could make VLAN 16 my native VLAN,\nbut in my case I'm just gonna\n\n186\n00:09:14.900 --> 00:09:18.030\nadd VLAN 1 to the list, or\nI could remove the filter altogether.\n\n187\n00:09:18.030 --> 00:09:21.400\nThe problem didn't really give\nus any direction on that.\n\n188\n00:09:21.400 --> 00:09:25.060\nSo I could just remove the filter\naltogether, which will work for me too.\n\n189\n00:09:25.060 --> 00:09:30.100\nSo if I get into Fa0/24 I\ncold say switchport\n\n190\n00:09:30.100 --> 00:09:33.890\ntrunk allowed VLAN 1-4094.\n\n191\n00:09:33.890 --> 00:09:37.020\nI'm just gonna turn them all on.\n\n192\n00:09:37.020 --> 00:09:41.390\nIn reality, VLAN 1 is truly the only\none that I needed active on this.\n\n193\n00:09:41.390 --> 00:09:44.770\nAnd so now,\nif I do a show interface trunk,\n\n194\n00:09:47.710 --> 00:09:50.980\nwhat I should see Is on port 24.\n\n195\n00:09:50.980 --> 00:09:54.450\nSee how VLANs 1 and\n16 are allowed and active.\n\n196\n00:09:54.450 --> 00:09:56.870\nRight, so they've gone active and\nthat's important.\n\n197\n00:09:56.870 --> 00:09:59.480\nSpanning tree is still kinda doing\nsomething in the background here.\n\n198\n00:09:59.480 --> 00:10:02.380\nSo let's see what spanning\ntree is doing with VLAN 1.\n\n199\n00:10:02.380 --> 00:10:06.560\nAnd see what it's doing to that port.\n\n200\n00:10:06.560 --> 00:10:07.520\nThere we go, it's still learning.\n\n201\n00:10:07.520 --> 00:10:09.940\nSo I just need to wait for\nit to finish listening and learning.\n\n202\n00:10:09.940 --> 00:10:13.640\nAnd as soon as that's done,\nthere we go now it's forwarding.\n\n203\n00:10:13.640 --> 00:10:17.480\nAnd so if I take a look at that show\ninterface trunk again, this time,\n\n204\n00:10:17.480 --> 00:10:19.010\nnow it's showing that it's up and healthy.\n\n205\n00:10:19.010 --> 00:10:21.080\nAlright, so I'm good there.\n\n206\n00:10:21.080 --> 00:10:23.950\nNow VTP should be doing its magic, right?\n\n207\n00:10:23.950 --> 00:10:29.410\nAnd if I do a show VTP status I'm up,\nhealthy.\n\n208\n00:10:29.410 --> 00:10:31.610\nI really don't see\nanything different there.\n\n209\n00:10:31.610 --> 00:10:34.771\nAnd if I do a shoe VLAN.\n\n210\n00:10:34.771 --> 00:10:38.210\nWell, I'm still not getting my VLAsN.\n\n211\n00:10:38.210 --> 00:10:39.830\nNow, that's odd, okay.\n\n212\n00:10:39.830 --> 00:10:42.670\nSo if I know that my native VLAN is up and\nhealthy.\n\n213\n00:10:42.670 --> 00:10:45.970\nAnd I know that VTP should be\ncommunicating over this link just fine,\n\n214\n00:10:46.970 --> 00:10:48.870\nwhat the heck is going on here, right?\n\n215\n00:10:48.870 --> 00:10:54.290\nWhen I do a show span and if we just\n\n216\n00:10:54.290 --> 00:10:57.780\ntake a look at each of the different VLANs\nthat we have, looking at that interface.\n\n217\n00:10:57.780 --> 00:10:59.370\nWhich actually I guess I\ncan kind of filter this,\n\n218\n00:10:59.370 --> 00:11:01.060\nmake life a little easier for me.\n\n219\n00:11:01.060 --> 00:11:04.640\nIf I filter it and\njust look for 0/24, right?\n\n220\n00:11:04.640 --> 00:11:08.180\nI can see that I've got a route port for\none VLAN and I've got a designated port\n\n221\n00:11:08.180 --> 00:11:10.400\nfor the other one, that shouldn't be\nforwarding for either one, right?\n\n222\n00:11:10.400 --> 00:11:11.460\nSays they're both forwarding.\n\n223\n00:11:11.460 --> 00:11:13.380\nSo I'm not blocking any of those ports.\n\n224\n00:11:13.380 --> 00:11:17.630\nThat's up and that's healthy, and if I\ndo the same thing for core one, right.\n\n225\n00:11:17.630 --> 00:11:22.920\nI take a look at it's port 22, and\ndo that same basic experiment, right.\n\n226\n00:11:22.920 --> 00:11:29.090\nJust do the show span, and\nI'll filter that for 0/22.\n\n227\n00:11:29.090 --> 00:11:33.120\nAnd I can see they're forwarding,\nso I know they're healthy,\n\n228\n00:11:33.120 --> 00:11:37.180\nI know I'm talking on VLAN one and\n16 and VTP should be running.\n\n229\n00:11:37.180 --> 00:11:40.900\nVTP isn't working, all right,\nnow why isn't VTP working?\n\n230\n00:11:40.900 --> 00:11:42.980\nWell, I probably just have some\nmix up in the configuration, so\n\n231\n00:11:42.980 --> 00:11:43.800\nlet's take a look at that.\n\n232\n00:11:43.800 --> 00:11:45.870\nSo I'll do a show VTP status, and\n\n233\n00:11:45.870 --> 00:11:48.840\nI'm gonna pay a little more\nattention to other things this time.\n\n234\n00:11:48.840 --> 00:11:52.110\nThings like,\ndoes the VTP domain name match?\n\n235\n00:11:52.110 --> 00:11:52.630\nAlright?\n\n236\n00:11:52.630 --> 00:11:57.720\nOn core 1, mine's set to practice labs,\nmy version is set to version 2.\n\n237\n00:11:57.720 --> 00:12:01.550\nI don't have any pruning turned on,\ntraps I don't really care about.\n\n238\n00:12:01.550 --> 00:12:04.400\nI can see my last update here,\nI don't really care about that either.\n\n239\n00:12:04.400 --> 00:12:07.680\nMy operating mode is server,\nmy existing VLAN number.\n\n240\n00:12:07.680 --> 00:12:09.480\nSo I'm just kind of looking\nat some of the stuff and\n\n241\n00:12:09.480 --> 00:12:10.810\nI can see I've got an MD5 digest set.\n\n242\n00:12:10.810 --> 00:12:12.540\nAnd what does that mean?\n\n243\n00:12:12.540 --> 00:12:14.090\nThat means I got a password.\n\n244\n00:12:14.090 --> 00:12:15.820\nSo, there's a password on the system.\n\n245\n00:12:15.820 --> 00:12:19.450\nSo, I need to make sure that the domain\nname matches, the version names.\n\n246\n00:12:19.450 --> 00:12:21.150\nThe version names\nare backwards compatible,\n\n247\n00:12:21.150 --> 00:12:22.970\nI mean the version numbers\nare backwards compatible.\n\n248\n00:12:22.970 --> 00:12:24.680\nBut you typically want them to match.\n\n249\n00:12:24.680 --> 00:12:27.210\nAnd then I need to make sure\nmy passwords match too.\n\n250\n00:12:27.210 --> 00:12:29.320\nNow matching the password\ncan be a little hard,\n\n251\n00:12:29.320 --> 00:12:31.400\nbecause I don't know what the password is,\nright.\n\n252\n00:12:31.400 --> 00:12:33.800\nAnd if you take a look at\nyour running configuration,\n\n253\n00:12:33.800 --> 00:12:37.130\nwell vtp doesn't store its config.\n\n254\n00:12:37.130 --> 00:12:38.620\nIn the running configuration.\n\n255\n00:12:38.620 --> 00:12:40.830\nSo if you wanna see that,\nyou can do show VTP?.\n\n256\n00:12:40.830 --> 00:12:46.920\nAnd there's the VTP password command,\nso I can say show VTP password.\n\n257\n00:12:48.060 --> 00:12:49.000\nWoops!\nI guess if I\n\n258\n00:12:49.000 --> 00:12:50.830\ndon't type it twice, that'll help.\n\n259\n00:12:50.830 --> 00:12:54.550\nIf I do a show VTP password,\nI can see that password is set to Cisco.\n\n260\n00:12:54.550 --> 00:12:59.020\nSo let's go take a look at Access1 and\nsee what it's doing, all right.\n\n261\n00:12:59.020 --> 00:13:03.760\nSo on this one we'll do a show VTP status.\n\n262\n00:13:04.800 --> 00:13:07.990\nAnd I can see my version number is 2,\nthat's good.\n\n263\n00:13:07.990 --> 00:13:10.450\nMy Domain Name is practicelabs,\nso that matches.\n\n264\n00:13:10.450 --> 00:13:13.300\nI'm not doing any pruning,\nso I'm okay there.\n\n265\n00:13:13.300 --> 00:13:16.930\nI'm set to a Server,\nmy revision number is revision number two,\n\n266\n00:13:16.930 --> 00:13:18.710\nI didn't pay attention to my\nrevision number on the other side.\n\n267\n00:13:18.710 --> 00:13:19.310\nI probably should have.\n\n268\n00:13:19.310 --> 00:13:22.500\nLet me just jump back and\nverify that real quick and\n\n269\n00:13:22.500 --> 00:13:24.810\nmake sure my revision number\nisn't something silly here.\n\n270\n00:13:24.810 --> 00:13:26.260\nNope, revision number is four.\n\n271\n00:13:26.260 --> 00:13:29.470\nThat's a higher number so access one\nshould be learning that new one.\n\n272\n00:13:29.470 --> 00:13:33.130\nAnd I've got a password, I guess I\ndon't know what that password is so\n\n273\n00:13:33.130 --> 00:13:34.100\nwe can verify that, right.\n\n274\n00:13:34.100 --> 00:13:41.190\nSo let's see what that password is I do a\nshow vtp password, and there's a problem.\n\n275\n00:13:41.190 --> 00:13:45.200\nAll right, now, this problem should\nhave been a lot more obvious to us.\n\n276\n00:13:45.200 --> 00:13:48.390\nRight here,\nI can see VTP Password Cisco111, right?\n\n277\n00:13:48.390 --> 00:13:50.990\nIt doesn't match, the other side\nwas set to Cisco, this one's Cisco.\n\n278\n00:13:50.990 --> 00:13:53.850\nAll right, now,\nI say it should have been more obvious.\n\n279\n00:13:53.850 --> 00:13:55.440\nAnd that's because right here,\n\n280\n00:13:55.440 --> 00:14:00.070\nit shows the MD five digest, no one\nknows the MD five digest number, right.\n\n281\n00:14:00.070 --> 00:14:04.960\nSo if it doesn't match you actually\nnormally get a little status message that\n\n282\n00:14:04.960 --> 00:14:08.590\npops up to let, I didn't get that, I don't\nknow why I didn't get it, I should have,\n\n283\n00:14:08.590 --> 00:14:09.630\nbut it didn't happen.\n\n284\n00:14:09.630 --> 00:14:11.570\nIt doesn't matter now, because I\nsee the password doesn't match so\n\n285\n00:14:11.570 --> 00:14:12.810\nI'm gonna get in and fix it.\n\n286\n00:14:12.810 --> 00:14:16.570\nBut in the back of my mind, I'm thinking\nI didn't get that status message.\n\n287\n00:14:16.570 --> 00:14:19.260\nSo I probably have another issue.\n\n288\n00:14:19.260 --> 00:14:22.450\nVTP is probably not communicating or\nI would've gotten that message.\n\n289\n00:14:22.450 --> 00:14:23.870\nShould be there, but it's not.\n\n290\n00:14:23.870 --> 00:14:28.960\nSo I'm gonna go in here, and\nI'm just gonna say, VTP password Cisco.\n\n291\n00:14:28.960 --> 00:14:32.000\nI'm gonna set it to match the other side,\nokay.\n\n292\n00:14:32.000 --> 00:14:34.140\nSo now I've got that set,\nand as soon as that's done,\n\n293\n00:14:34.140 --> 00:14:35.520\nI should start learning\nfrom the other side.\n\n294\n00:14:35.520 --> 00:14:38.310\nNow, before I changed that it looks,\nit looks simple right?\n\n295\n00:14:38.310 --> 00:14:42.100\nI changed the password, but the back of\nmind I'm thinking about other things,.\n\n296\n00:14:42.100 --> 00:14:47.040\nThe revision number, if my revision number\nwas higher than the other switches.\n\n297\n00:14:47.040 --> 00:14:51.330\nI'm now gonna overwrite those\nswitches with my VTP configuration.\n\n298\n00:14:51.330 --> 00:14:54.920\nBut their VTP configuration had\na revision number of six or eight, or\n\n299\n00:14:54.920 --> 00:14:55.720\nsomething like that.\n\n300\n00:14:55.720 --> 00:14:58.170\nSo they're gonna overwrite me,\nand that's okay.\n\n301\n00:14:58.170 --> 00:15:01.000\nBut in real life land, be aware of this.\n\n302\n00:15:01.000 --> 00:15:03.800\nBe aware that you could be\nbringing in a bad switch and\n\n303\n00:15:03.800 --> 00:15:06.100\noverwriting your VTP database\nall across you network.\n\n304\n00:15:06.100 --> 00:15:07.080\nThat'd be really bad.\n\n305\n00:15:07.080 --> 00:15:08.910\nSo you might need to tweak\nthe revision number.\n\n306\n00:15:08.910 --> 00:15:10.440\nIn this case, I didn't need to do it.\n\n307\n00:15:10.440 --> 00:15:11.550\nBut if you ever need to,\n\n308\n00:15:11.550 --> 00:15:16.080\nthe easiest way is just go into config and\ndo a VTP mode transparent.\n\n309\n00:15:16.080 --> 00:15:17.890\nAnd that'll flip your\nrevision number back to zero.\n\n310\n00:15:17.890 --> 00:15:22.190\nAnd then you can say VTP mode server or\nVTP mode client to flip back.\n\n311\n00:15:22.190 --> 00:15:23.770\nAnd your revision number will be zero.\n\n312\n00:15:23.770 --> 00:15:24.970\nThe other people will overwrite you.\n\n313\n00:15:24.970 --> 00:15:26.750\nYou always wanna do\nthat with a new switch.\n\n314\n00:15:26.750 --> 00:15:31.110\nBut in my scenario, my number was already\nlower, so I didn't care about it.\n\n315\n00:15:31.110 --> 00:15:32.650\nAll right, so that's already done.\n\n316\n00:15:32.650 --> 00:15:37.690\nAnd if I do a show VTP status,\nI can look in here and\n\n317\n00:15:37.690 --> 00:15:39.140\nmy revision number went up a little bit.\n\n318\n00:15:39.140 --> 00:15:43.650\nI'm revision number 4, so\nsomething's going on in the background.\n\n319\n00:15:43.650 --> 00:15:48.130\nAnd if I do a show VLAN and\nstart to look at what I've got here.\n\n320\n00:15:48.130 --> 00:15:49.835\nI've got VLAN 1, 12, 16 and 999.\n\n321\n00:15:49.835 --> 00:15:53.262\nVLAN are propagating now\nlike they're supposed to.\n\n322\n00:15:53.262 --> 00:15:58.930\nAll right, so at the end of the day my\nproblem boiled down to two problems, okay.\n\n323\n00:15:58.930 --> 00:16:02.130\nMy first problem was\nthat the native VLAN for\n\n324\n00:16:02.130 --> 00:16:03.890\nthe link was being blocked on the trunk.\n\n325\n00:16:03.890 --> 00:16:10.090\nAnd that's a bad idea, because it breaks\nsomethings like CDP and, VTP in this case.\n\n326\n00:16:10.090 --> 00:16:12.650\nSo those can start to break,\nif you block your native VLAN.\n\n327\n00:16:12.650 --> 00:16:15.040\nI chose not to change my native VLAN,\nbut just to allow it.\n\n328\n00:16:15.040 --> 00:16:16.670\nSo I added VLAN one to that trunk.\n\n329\n00:16:16.670 --> 00:16:19.840\nAll right, and then my second problem,\npasswords didn't match.\n\n330\n00:16:19.840 --> 00:16:21.610\nMy VTP passwords, they just weren't right.\n\n331\n00:16:21.610 --> 00:16:23.440\nOnce I fixed that, now I'm in business.\n\n332\n00:16:23.440 --> 00:16:28.020\nSo two little problems knocked away, now\nVLAN are propagating through the network\n\n333\n00:16:28.020 --> 00:16:29.400\nand it looks like we're in good shape.\n\n334\n00:16:29.400 --> 00:16:32.830\nSo always be aware that a problem\ncan have more than one cause,\n\n335\n00:16:32.830 --> 00:16:35.630\nyou might have to fix two\nthings to solve one problem.\n\n336\n00:16:35.630 --> 00:16:36.620\nAnd that's how this scenario was.\n\n337\n00:16:36.620 --> 00:16:39.080\nAll right,\nwell that wraps up this problem.\n\n338\n00:16:39.080 --> 00:16:42.975\nStay tuned, we've got more\ntroubleshooting problems coming up.\n\n339\n00:16:42.975 --> 00:16:44.434\n[MUSIC]\n\n",
          "vimeoId": "149150703"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #3` from set #2. The trouble ticket states that \"Unable to communicate from PLABCSCO01 to 192.168.11.4 (NYEDGE1) \"",
          "length": "911",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-2-3-112415-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-2-3-112415-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-2-3-112415-1-sm.jpg",
          "title": "Set 2 Issue 3",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:05.098\n[SOUND] All right,\nin this video we're gonna be\n\n2\n00:00:05.098 --> 00:00:10.850\ncontinuing on with our\ntroubleshooting lab set 2,\n\n3\n00:00:10.850 --> 00:00:14.519\nand moving into issue number 3.\n\n4\n00:00:14.519 --> 00:00:17.144\nAnd we've got another communications\nerror on the network.\n\n5\n00:00:17.144 --> 00:00:20.008\nIt looks like we've got\nour PLABCISCO01 server,\n\n6\n00:00:20.008 --> 00:00:22.945\nthat's unable to communicate\nwith another system.\n\n7\n00:00:22.945 --> 00:00:28.939\nThe way the ticket reads,is it says we're\nunable to communicate from PLABCISCO01,\n\n8\n00:00:28.939 --> 00:00:33.075\nto 192.168.11.4,\nwhich is New York Edge One.\n\n9\n00:00:33.075 --> 00:00:35.175\nWell, just hearing that\ndoesn't mean a lot to us.\n\n10\n00:00:35.175 --> 00:00:38.630\nLet's take a look at the diagram and\nget an idea of what that actually means.\n\n11\n00:00:38.630 --> 00:00:43.536\nSo here's my network topology and way down\nhere at the bottom there's our server,\n\n12\n00:00:43.536 --> 00:00:48.513\nour PLABCISCO01 and it's communicating\nto this guy up here in NYEDGE1, right,\n\n13\n00:00:48.513 --> 00:00:53.000\nso we're passing across quite a few\ndevices to get there than any one of those\n\n14\n00:00:53.000 --> 00:00:55.131\ndevices to be causing our problem.\n\n15\n00:00:55.131 --> 00:00:57.067\nNow before we dive into\nthe router configuration,\n\n16\n00:00:57.067 --> 00:00:58.652\nwe need to think about a few other things.\n\n17\n00:00:58.652 --> 00:01:03.519\nIf I zoom in on the diagram here,\nyou can see where that server\n\n18\n00:01:03.519 --> 00:01:07.930\nis 192.168.16.10/24, all right?\n\n19\n00:01:07.930 --> 00:01:14.070\nIt told me in the problem that I'm\ntrying to get to 192.168.11.4.\n\n20\n00:01:14.070 --> 00:01:16.540\nSo right off the bat,\n\n21\n00:01:16.540 --> 00:01:19.930\nI need to be aware that there's some\nlayer three routing going on, right?\n\n22\n00:01:19.930 --> 00:01:25.250\nAnd in the first two questions on this\nset, we just had layer two issues.\n\n23\n00:01:25.250 --> 00:01:27.155\nNow, we're starting to move\na little higher in the OSI model.\n\n24\n00:01:27.155 --> 00:01:28.810\nRouting might be working fine.\n\n25\n00:01:28.810 --> 00:01:30.230\nIt might still be a layer two issue,\n\n26\n00:01:30.230 --> 00:01:33.510\nbut we may need to do a little\nadditional troubleshooting.\n\n27\n00:01:33.510 --> 00:01:36.130\nAny time that I have a question\nwhere routing is involved,\n\n28\n00:01:36.130 --> 00:01:38.720\nthe first thing I usually start with\nis what's called scoping the problem.\n\n29\n00:01:38.720 --> 00:01:42.670\nI'm trying to figure out where\nthe problem actually exists.\n\n30\n00:01:42.670 --> 00:01:45.790\nAnd our topology's actually\na little bit complex, right?\n\n31\n00:01:45.790 --> 00:01:48.650\nBecause we've got more than one\npath through the network, and\n\n32\n00:01:48.650 --> 00:01:51.290\nwe've got some tricky protocols going on.\n\n33\n00:01:51.290 --> 00:01:56.152\nSo NYEDGE1 is a router, and\nit's got three interfaces.\n\n34\n00:01:56.152 --> 00:02:00.356\nIt's got Ser/0/0/0, Gi0/0, Ser0/0/1.\n\n35\n00:02:00.356 --> 00:02:00.955\nOh, it's got four.\n\n36\n00:02:00.955 --> 00:02:02.191\nActually it's got Gi0/1 up there.\n\n37\n00:02:02.191 --> 00:02:04.820\nSo it's got four different interfaces.\n\n38\n00:02:04.820 --> 00:02:08.080\nOne of those interfaces could\nbe on the 192.168.11 network and\n\n39\n00:02:08.080 --> 00:02:12.790\nanother interface could be\non the 192.168.16 network.\n\n40\n00:02:12.790 --> 00:02:15.370\nSo it could be doing\nthe routing right there and\n\n41\n00:02:15.370 --> 00:02:17.470\nI'm getting lost in the unit itself.\n\n42\n00:02:17.470 --> 00:02:22.120\nI might actually be making it to\nNYEDGE1 and dying there, all right, but\n\n43\n00:02:22.120 --> 00:02:23.500\nI don't know.\n\n44\n00:02:23.500 --> 00:02:26.040\nI could also be having\na problem down here.\n\n45\n00:02:26.040 --> 00:02:30.630\nThese two switches, NYCORE1 and\nNYCORE2, are layer three switches and\n\n46\n00:02:30.630 --> 00:02:33.170\nthat means they can do routing also.\n\n47\n00:02:33.170 --> 00:02:35.890\nSo I might be getting routed there, right?\n\n48\n00:02:35.890 --> 00:02:38.710\nAnd you might remember from\nthe earlier questions in this set,\n\n49\n00:02:38.710 --> 00:02:40.550\nthese guys are running HSRP.\n\n50\n00:02:40.550 --> 00:02:45.459\nThe one on the left is 192.168.16.2, and\n\n51\n00:02:45.459 --> 00:02:49.310\nthe one on the right is 192.168.16.3.\n\n52\n00:02:49.310 --> 00:02:54.637\nAnd they're sharing\n192.168.16.1 between them.\n\n53\n00:02:54.637 --> 00:03:01.860\nSo there's .1, .2, and .3, and NYEDGE1\nup here has all the .4 addresses on it.\n\n54\n00:03:01.860 --> 00:03:05.960\nSo those are the systems that are going to\nbe involved in this and that means that my\n\n55\n00:03:05.960 --> 00:03:11.670\nserver could be going to ACCESS1\nup to CORE1, and then up to EDGE1.\n\n56\n00:03:12.700 --> 00:03:18.570\nOr I could be going from the server\nto ACCESS1, then to CORE2,\n\n57\n00:03:19.670 --> 00:03:23.970\nover to CORE1, over to EDGE1, right, so\nI could be going two different paths.\n\n58\n00:03:23.970 --> 00:03:25.820\nI don't know which path I'm following.\n\n59\n00:03:25.820 --> 00:03:27.300\nSo when it comes to a routing issue,\n\n60\n00:03:27.300 --> 00:03:30.370\nthe easiest way to determine\na path is to use traceroute.\n\n61\n00:03:30.370 --> 00:03:32.900\nAnd it's also a great way\nto scope the problem.\n\n62\n00:03:32.900 --> 00:03:37.220\nBecause if the traceroute stops, then\nyou know where your problem is, right?\n\n63\n00:03:37.220 --> 00:03:40.400\nYou hit a point where you stopped on\nthe network and that was the end, right?\n\n64\n00:03:40.400 --> 00:03:42.510\nSo it helps us to scope it and\nfind the issue.\n\n65\n00:03:42.510 --> 00:03:43.510\nOn the small network,\n\n66\n00:03:43.510 --> 00:03:46.530\nlike what you'll see on the exam,\nit's usually not that big of a deal.\n\n67\n00:03:46.530 --> 00:03:49.950\nBut in real life you might have 16\nhops between you and the destination.\n\n68\n00:03:49.950 --> 00:03:52.470\nThe problem could be\nanywhere along that path.\n\n69\n00:03:52.470 --> 00:03:53.840\nSo let's take a look at that.\n\n70\n00:03:53.840 --> 00:03:54.900\nNow for this one,\n\n71\n00:03:54.900 --> 00:03:57.630\nI'm gonna use the Windows machine\ndown here to do the traceroute from.\n\n72\n00:03:57.630 --> 00:03:59.357\nThat's the source of our problem anyway,\nright?\n\n73\n00:03:59.357 --> 00:04:02.862\nBut in real life you might not\nhave access to that machine.\n\n74\n00:04:02.862 --> 00:04:06.350\nI could use ACCESS1 down here and\ndo the traceroute from there.\n\n75\n00:04:06.350 --> 00:04:09.900\nBut if I can, I want to do it from\nthe unit where they reported the problem.\n\n76\n00:04:09.900 --> 00:04:12.840\nIn this case,\nthe problem was reported from that server.\n\n77\n00:04:12.840 --> 00:04:18.120\nSo I'm gonna jump back to that server,\nand I'll fire up a command prompt, and\n\n78\n00:04:18.120 --> 00:04:20.860\nI'm just gonna do a couple\nof quick things, right?\n\n79\n00:04:20.860 --> 00:04:25.500\nFirst off, I'm gonna verify the IP\nconfiguration on this system, and\n\n80\n00:04:25.500 --> 00:04:29.300\njust make sure it's got the right IP\naddress and subnet mask, that basic stuff.\n\n81\n00:04:29.300 --> 00:04:31.964\nThose are easy problems that\ncan slip by sometimes, and\n\n82\n00:04:31.964 --> 00:04:35.373\nthen I waste a lot of time troubleshooting\nwhen it turned out to be easy.\n\n83\n00:04:35.373 --> 00:04:39.021\nSo I'm gonna do a quick ipconfig and\nwhat I'm looking for\n\n84\n00:04:39.021 --> 00:04:44.799\nis on the 192.168.16 network, I wanna make\nsure I have the right subnet mask and\n\n85\n00:04:44.799 --> 00:04:50.806\nthe right default gateway, and looking\nat this I've got 192.168.16.10, and\n\n86\n00:04:50.806 --> 00:04:57.829\nI've got 255.255.255.0, that's a 24- bit\nsubnet mask, and my default gateway is .1.\n\n87\n00:04:57.829 --> 00:04:59.909\nSo things are looking correct there.\n\n88\n00:04:59.909 --> 00:05:05.304\nI might wanna do a quick test to see if\nI can even get to my default gateway,\n\n89\n00:05:05.304 --> 00:05:08.502\nso can I ping 192.168.16.1?\n\n90\n00:05:08.502 --> 00:05:09.897\nAnd I can, all right.\n\n91\n00:05:09.897 --> 00:05:13.196\nSo, it looks like this system\nis set up right for its end, but\n\n92\n00:05:13.196 --> 00:05:18.185\nit's trying to get to 192.168.11.4, so\nthere's any number of problems that\n\n93\n00:05:18.185 --> 00:05:22.190\ncould happen down the road, but\nit looks like this server is fine.\n\n94\n00:05:22.190 --> 00:05:24.190\nAnd that's what you'll\nnormally see on the exam.\n\n95\n00:05:24.190 --> 00:05:27.480\nThey're not normally gonna give you\na problem in a Windows machine,\n\n96\n00:05:27.480 --> 00:05:30.770\nbecause it's a trouble shooting Sysco\nexam, not a trouble shooting Windows.\n\n97\n00:05:30.770 --> 00:05:33.190\nSo it's not normally gonna be here.\n\n98\n00:05:33.190 --> 00:05:35.010\nBut I am going to do a trace route.\n\n99\n00:05:35.010 --> 00:05:38.800\nAnd remember on a Sysco router or switch,\nthe command is traceroute fully written\n\n100\n00:05:38.800 --> 00:05:43.310\nout, but on a Windows box it's tracert,\nso I'm just going to do tracert.\n\n101\n00:05:43.310 --> 00:05:46.480\nAnd I'm gonna punch in the IP\naddress I'm trying to get to.\n\n102\n00:05:46.480 --> 00:05:50.380\nNow, I know I can get to my default\ngateway so my first entry in my trace\n\n103\n00:05:50.380 --> 00:05:53.830\nroute should be my default gateway,\nand so here it's coming back.\n\n104\n00:05:53.830 --> 00:05:58.400\nI expect to see 192.168.16.,\nwell, I got .3.\n\n105\n00:05:58.400 --> 00:06:00.240\nWhy did I get .3?\n\n106\n00:06:00.240 --> 00:06:03.014\nWell, my default gateway is .1, but\n\n107\n00:06:03.014 --> 00:06:08.909\nyou'll remember that that's actually\nHSRP between these two switches, right?\n\n108\n00:06:08.909 --> 00:06:13.413\nSo they're sharing .1,\nthis guy is .2, this guy is .3.\n\n109\n00:06:13.413 --> 00:06:17.910\nI got .3 back in my traceroute, which\ntells me I'm actually going to CORE2.\n\n110\n00:06:17.910 --> 00:06:23.310\nSo I need to put that in my mind,\nthat my path is going over to ACCESS1,\n\n111\n00:06:23.310 --> 00:06:28.010\nup to CORE2, over to CORE1 most likely,\nand then up here to EDGE1, so\n\n112\n00:06:28.010 --> 00:06:30.350\nI'm following this roundabout path.\n\n113\n00:06:30.350 --> 00:06:34.300\nOr it's even possible that I'm going up to\nEDGE2 and over this serial line, right?\n\n114\n00:06:34.300 --> 00:06:37.740\nThose are all possibilities, so\nI'll have to check those out.\n\n115\n00:06:37.740 --> 00:06:39.680\nAnd that's assuming I've\ngot layer three issues.\n\n116\n00:06:39.680 --> 00:06:41.600\nThere could be layer two\nissues still in the mix,\n\n117\n00:06:41.600 --> 00:06:45.020\ntoo, I'll have to verify those, all right?\n\n118\n00:06:45.020 --> 00:06:47.380\nWell, look at my trace route,\nthings die there.\n\n119\n00:06:47.380 --> 00:06:50.870\nSo I really don't get beyond 192.168.16.3,\nbut I do get there.\n\n120\n00:06:52.630 --> 00:06:54.970\nSo I know, looking at my diagram,\n\n121\n00:06:54.970 --> 00:06:58.420\nat a minimum,\nI was able to make it here to CORE2.\n\n122\n00:06:58.420 --> 00:07:00.930\nSo for my next stage of troubleshooting,\nI'm gonna move to CORE2 and\n\n123\n00:07:00.930 --> 00:07:03.340\nlook at things from its perspective.\n\n124\n00:07:03.340 --> 00:07:06.149\nSo I'm gonna jump over to that switch.\n\n125\n00:07:08.140 --> 00:07:10.440\nAnd looks like I'm already logged in here.\n\n126\n00:07:10.440 --> 00:07:13.780\nSo, we'll just pick right\nback up with that one.\n\n127\n00:07:13.780 --> 00:07:17.330\nAnd taking a look at this switch,\nI just need to verify a few things.\n\n128\n00:07:17.330 --> 00:07:20.905\nRight, the first think I want to do is I\nknow the switch is doing routing, right?\n\n129\n00:07:20.905 --> 00:07:22.535\nIt's running HSRP.\n\n130\n00:07:22.535 --> 00:07:24.781\nAnd you can do a show standby to see that.\n\n131\n00:07:24.781 --> 00:07:28.668\nAnd Vlan16 is the 192.168.16 network.\n\n132\n00:07:28.668 --> 00:07:30.137\nAnd so I can say, whoops.\n\n133\n00:07:30.137 --> 00:07:33.181\n[LAUGH] I can see that it's up and\nit's active, right?\n\n134\n00:07:33.181 --> 00:07:38.307\nThis is the active node for it, so\nit is the one answering to 192.168.16.1.\n\n135\n00:07:38.307 --> 00:07:40.641\nAnd we already knew that\nfrom our traceroute, right?\n\n136\n00:07:40.641 --> 00:07:43.757\nSo it's up and happy,\nas far as Vlan16 is concerned.\n\n137\n00:07:43.757 --> 00:07:45.672\nBut what about all the other VLANs?\n\n138\n00:07:45.672 --> 00:07:51.625\nI'm trying to get to 192.168.11.4,\nso I'm gonna do a show IP route,\n\n139\n00:07:51.625 --> 00:07:55.961\nand I wanna look at my routing table and\nsee if I have a route for\n\n140\n00:07:55.961 --> 00:08:00.490\n192.168.11, and sure enough,\nI can see that I do.\n\n141\n00:08:00.490 --> 00:08:01.640\nIt's right there.\n\n142\n00:08:01.640 --> 00:08:05.190\nAll right, and\nthat route is directly connected.\n\n143\n00:08:05.190 --> 00:08:10.280\nThat means that this switch is able\nto route between vlan16 and vlan11.\n\n144\n00:08:10.280 --> 00:08:14.268\nSo this switch has an interface\ndirectly on vlan11,\n\n145\n00:08:14.268 --> 00:08:18.990\nseems odd that my workstation\ncouldn't ping across that VLAN.\n\n146\n00:08:18.990 --> 00:08:26.060\nAnd if I look I can see this switch is\n192.168.11.3 on that network also, okay?\n\n147\n00:08:26.060 --> 00:08:29.480\nWell, if it's 11.3,\nI can do just a quick test.\n\n148\n00:08:29.480 --> 00:08:33.281\nIf I jump over to my server.\n\n149\n00:08:33.281 --> 00:08:38.534\nEarlier, I was trying to ping,\nlet me break out of that, there we go.\n\n150\n00:08:38.534 --> 00:08:43.490\nEarlier, I was trying to\nping 192.168.11.4, right?\n\n151\n00:08:43.490 --> 00:08:48.070\nAnd it didn't get me there, that was\nEDGE1 that I couldn't contact, right?\n\n152\n00:08:48.070 --> 00:08:50.450\nWell, what if I try .3, .3 is that switch.\n\n153\n00:08:50.450 --> 00:08:52.240\nI know I can make it to the switch.\n\n154\n00:08:52.240 --> 00:08:55.280\nAnd if I do that, it's working.\n\n155\n00:08:55.280 --> 00:08:57.420\nSo that takes routing out of the picture.\n\n156\n00:08:57.420 --> 00:09:00.340\nI'm getting routed to vlan11,\n\n157\n00:09:00.340 --> 00:09:04.710\nbut I'm not actually making it to 11.4,\nthat particular IP.\n\n158\n00:09:04.710 --> 00:09:07.360\nNow, there could still be\nan ACL in the mix, right, but\n\n159\n00:09:07.360 --> 00:09:08.670\nthe ACLs aren't technically routing.\n\n160\n00:09:08.670 --> 00:09:10.050\nIt's security filtering.\n\n161\n00:09:10.050 --> 00:09:12.130\nSo I may still need to\npay attention to that.\n\n162\n00:09:12.130 --> 00:09:16.520\nBut otherwise, it looks like I can jump\nover that VLAN, just not getting to .4.\n\n163\n00:09:16.520 --> 00:09:21.400\nAnd when something like that happens,\nwe really do narrow it down to two things.\n\n164\n00:09:21.400 --> 00:09:25.760\nIt could be that there's an ACL\non CORE2 that's filtering my\n\n165\n00:09:25.760 --> 00:09:30.530\ncommunications between those VLANs, or\nit could be a problem up here on EDGE1\n\n166\n00:09:30.530 --> 00:09:34.930\nwith a slight possibility of\nbeing an issue here on CORE1.\n\n167\n00:09:34.930 --> 00:09:37.310\nHSRP makes this a lot more complex.\n\n168\n00:09:37.310 --> 00:09:40.270\nI might be active for one VLAN but\nnot active for another, so\n\n169\n00:09:40.270 --> 00:09:43.400\nwe've gotta pay attention to that and\nsee how that's configured.\n\n170\n00:09:43.400 --> 00:09:45.650\nThis could also be a return trip issue.\n\n171\n00:09:45.650 --> 00:09:48.450\nMy traffic could be making it to EDGE1,\nand\n\n172\n00:09:48.450 --> 00:09:50.840\nEDGE1 might not have\na route to get back to me.\n\n173\n00:09:50.840 --> 00:09:52.570\nSo I'm gonna have to verify that.\n\n174\n00:09:52.570 --> 00:09:56.980\nBut I do wanna test one more thing on\nCORE2 before I jump over to EDGE1, and\n\n175\n00:09:56.980 --> 00:09:58.038\ntest from there.\n\n176\n00:09:58.038 --> 00:10:04.273\nSo on CORE2, what I want to test\nis whether it can get to EDGE1,\n\n177\n00:10:04.273 --> 00:10:08.661\nso if I jump over to CORE2,\nI'm just gonna do\n\n178\n00:10:08.661 --> 00:10:13.521\na quick ping here to 192.168.11.4.\n\n179\n00:10:13.521 --> 00:10:15.634\nI know my server can't get there.\n\n180\n00:10:15.634 --> 00:10:16.609\nCan this switch?\n\n181\n00:10:16.609 --> 00:10:21.746\nThis switch is directly\nplugged into 192.168.11.0/24.\n\n182\n00:10:21.746 --> 00:10:25.152\nSo if it can't do it,\nI can take routing out of the picture now.\n\n183\n00:10:25.152 --> 00:10:29.970\nIt's not a routing problem, it's gonna\nbe layer two, something going on there.\n\n184\n00:10:29.970 --> 00:10:32.590\nOr I guess there is still\nthe possibility we could have\n\n185\n00:10:32.590 --> 00:10:34.040\na misconfiguration on the other side.\n\n186\n00:10:34.040 --> 00:10:36.740\nLet's go take a look at that other side,\nwe'll rule that out real quick.\n\n187\n00:10:36.740 --> 00:10:41.120\nSo, at NYCORE2, I get get there,\njust like the server can't.\n\n188\n00:10:41.120 --> 00:10:45.400\nSo, now I'm going to jump over to\nNYEDGE1 and see how it's set up, right?\n\n189\n00:10:45.400 --> 00:10:47.430\nNYEDGE1 is who I'm trying to get to.\n\n190\n00:10:47.430 --> 00:10:52.060\nThat's the node I'm trying to get into,\nand it's just not working, right?\n\n191\n00:10:52.060 --> 00:10:55.260\nWell, I can at least see the node is\npowered on, that counts for something, and\n\n192\n00:10:55.260 --> 00:10:58.520\nthen from here I can try and\nisolate what's actually wrong with it.\n\n193\n00:10:58.520 --> 00:11:01.512\nSo I'm gonna do a quick show\nIP interface brief, and\n\n194\n00:11:01.512 --> 00:11:04.241\njust see what I'm dealing\nwith on this system.\n\n195\n00:11:04.241 --> 00:11:11.827\nSo looking at it, it's got an interface\n192.168.11 well shoot .44.\n\n196\n00:11:11.827 --> 00:11:13.594\nThis is gonna turn out to be an easy one,\nright?\n\n197\n00:11:13.594 --> 00:11:17.826\nI'm trying to ping 192.168.11.4.\n\n198\n00:11:17.826 --> 00:11:20.610\nLook at these IPs, I don't see a .4.\n\n199\n00:11:20.610 --> 00:11:24.800\nNow, always be weary that it could\nbe just hidden away in the config.\n\n200\n00:11:24.800 --> 00:11:27.350\nI might have a secondary IP on this.\n\n201\n00:11:27.350 --> 00:11:29.500\nLooks like we're doing router\non a stick though, and\n\n202\n00:11:29.500 --> 00:11:34.160\nso I'll only have one interface on vlan11,\nwhich is probably this one.\n\n203\n00:11:34.160 --> 00:11:35.460\nI say probably because remember,\n\n204\n00:11:35.460 --> 00:11:39.620\nthese sub-interface numbers,\nthey don't have to match the VLAN number.\n\n205\n00:11:39.620 --> 00:11:41.500\nIt's the encoding that has to match.\n\n206\n00:11:41.500 --> 00:11:43.943\nSo let me take a look at\nthat actual interface.\n\n207\n00:11:43.943 --> 00:11:49.690\nSo I'll just do a show running\nconfig interface gi0/0.11,\n\n208\n00:11:49.690 --> 00:11:55.340\nand I don't see any secondary IPs,\nbut I do see a standby.\n\n209\n00:11:55.340 --> 00:11:58.120\nThis guy's actually\nparticipating in HSRP also, but\n\n210\n00:11:58.120 --> 00:12:01.630\nI don't really care about that because\nit's .1, and I'm concerned about .4.\n\n211\n00:12:01.630 --> 00:12:05.500\nNotice there's no secondary IP,\nthere's just this one and\n\n212\n00:12:05.500 --> 00:12:07.550\nit's the wrong IP, right?\n\n213\n00:12:07.550 --> 00:12:09.080\nIn fact, not only is it the wrong IP,\n\n214\n00:12:09.080 --> 00:12:11.650\nif I look a little more at it,\nit's the wrong subnet mask.\n\n215\n00:12:11.650 --> 00:12:14.230\nRight, this is just\ncompletely assigned wrong.\n\n216\n00:12:14.230 --> 00:12:16.840\nWell, I assume it's assigned wrong.\n\n217\n00:12:16.840 --> 00:12:18.720\nWhat if it's not?\nWhat if they meant for\n\n218\n00:12:18.720 --> 00:12:20.130\nthis to be assigned?\n\n219\n00:12:20.130 --> 00:12:21.280\nI don't really know.\n\n220\n00:12:21.280 --> 00:12:24.200\nSo, I gotta make a decision,\nthere's two ways I can fix this, right?\n\n221\n00:12:24.200 --> 00:12:27.410\nOne way, I can replace this with\nwhat I think is the correct IP,\n\n222\n00:12:27.410 --> 00:12:29.410\nand that's probably what\nwe need to do here.\n\n223\n00:12:29.410 --> 00:12:32.350\nBut if the instructions\nspecifically tell you not\n\n224\n00:12:32.350 --> 00:12:33.840\nto remove anything, you'll see that.\n\n225\n00:12:33.840 --> 00:12:35.360\nSometimes it will say,\nyou've gotta fix this problem,\n\n226\n00:12:35.360 --> 00:12:38.050\nyou're not allowed to remove\nany configuration lines.\n\n227\n00:12:38.050 --> 00:12:41.530\nIf you see that, I can always add\nthe right IP as a secondary IP,\n\n228\n00:12:41.530 --> 00:12:44.070\nand then that would fix our problem,\nright?\n\n229\n00:12:44.070 --> 00:12:45.420\nSo, it's kind of done the same way.\n\n230\n00:12:45.420 --> 00:12:46.440\nI'll show you guys.\n\n231\n00:12:46.440 --> 00:12:52.424\nIf I jump into that interface, so\nI'm going to jump into 0/0.11 and\n\n232\n00:12:52.424 --> 00:12:58.805\nI'll say IP address 192.168.11.4\nwith the correct subnet ask.\n\n233\n00:12:58.805 --> 00:12:59.387\nAll right,\n\n234\n00:12:59.387 --> 00:13:03.124\nnow if I press enter right now it's\ngonna replace the IP I've all ready got.\n\n235\n00:13:03.124 --> 00:13:08.982\nBut if I type the word secondary after\nthat, when I do that secondary now,\n\n236\n00:13:08.982 --> 00:13:13.910\nit's gonna add that as an addition IP and\nleave the other one.\n\n237\n00:13:13.910 --> 00:13:16.750\nSo if they tell me not to remove anything,\nI could always do this.\n\n238\n00:13:16.750 --> 00:13:19.230\nBut in my case,\nI'm pretty sure it's just the wrong IP, so\n\n239\n00:13:19.230 --> 00:13:22.560\nI'm going to replace it, and\nI'll bet that'll solve our problem.\n\n240\n00:13:22.560 --> 00:13:26.092\nWhile I'm in here, I'm just gonna\ndouble check the encapsulation line and\n\n241\n00:13:26.092 --> 00:13:28.035\nmake sure that it says vlan11, right?\n\n242\n00:13:28.035 --> 00:13:30.179\nThat's another common\nmistake that people make.\n\n243\n00:13:30.179 --> 00:13:33.129\nThey assume the subinterface\nnumber has to match when it\n\n244\n00:13:33.129 --> 00:13:36.140\nis actually the encapsulation\nline that has to match, so\n\n245\n00:13:36.140 --> 00:13:39.104\nI'm just gonna double check it,\nnut that should be it.\n\n246\n00:13:39.104 --> 00:13:45.734\nI can do a quick test from here to\nsee if I can ping 192.168.11.3,\n\n247\n00:13:45.734 --> 00:13:49.510\nwhich should be my switch,\nand there we go.\n\n248\n00:13:49.510 --> 00:13:52.580\nAnd that's getting through, so\nI'll bet our problem is solved.\n\n249\n00:13:52.580 --> 00:13:56.242\nAlthough that ping problem would have gone\nthrough before cuz we had a .44 address,\n\n250\n00:13:56.242 --> 00:13:59.710\nbut I had the wrong subnet mask, so that\nwhat it caused its own little problems.\n\n251\n00:13:59.710 --> 00:14:02.565\nSo let's go take a look at our server and\nsee if that fixed our issue, and\n\n252\n00:14:02.565 --> 00:14:05.530\nif it did, this will turn out to be\none of our easier problems, all right?\n\n253\n00:14:05.530 --> 00:14:09.586\nSo I'm just gonna come right\nback to the server where\n\n254\n00:14:09.586 --> 00:14:13.364\nwe started this whole thing and\nI'm gonna try and\n\n255\n00:14:13.364 --> 00:14:18.909\nping 192.168.11.4,\nwhich I guess I never actually did.\n\n256\n00:14:18.909 --> 00:14:20.936\nSo let's do it there and\nnow we're getting through.\n\n257\n00:14:20.936 --> 00:14:25.737\nAll right, so this problem turned out to\nbe straight, easy, just wrong IP address,\n\n258\n00:14:25.737 --> 00:14:27.350\nand just wrong subnet mask.\n\n259\n00:14:27.350 --> 00:14:33.417\nSo our traffic, when it did an ARP\nbroadcast to say who is 192.168.11.4,\n\n260\n00:14:33.417 --> 00:14:39.087\nnobody responded, and so we had a layer\n2 breakdown because nobody had that IP.\n\n261\n00:14:39.087 --> 00:14:41.740\nWe fixed it,\nnow the problem is solved, right?\n\n262\n00:14:41.740 --> 00:14:43.960\nSo pretty straightforward one there,\nnot so bad.\n\n263\n00:14:43.960 --> 00:14:47.480\nIt did take us awhile to find it just\nbecause of how much equipment is involved.\n\n264\n00:14:47.480 --> 00:14:50.090\nBetter documentation could have\nsaved us a lot of trouble there.\n\n265\n00:14:50.090 --> 00:14:51.660\nBut you get what you get right.\n\n266\n00:14:51.660 --> 00:14:54.530\nOn the exam, they give you some diagrams\nand you gotta make do with what you got.\n\n267\n00:14:54.530 --> 00:14:56.860\nSometimes exploring is\nhalf the troubleshooting.\n\n268\n00:14:56.860 --> 00:14:58.795\nSo this one turned out to be not so bad.\n\n269\n00:14:58.795 --> 00:15:00.760\nAll right,\nwell that wraps up this problem,\n\n270\n00:15:00.760 --> 00:15:03.926\ndefinitely stay tuned we got more\ntrouble shooting scenario coming up.\n\n271\n00:15:03.926 --> 00:15:09.195\n[MUSIC]\n\n",
          "vimeoId": "149150904"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #4` from set #2. The trouble ticket states that \"From PLABCSCO01 you are unable to ping 172.16.16.2, a host on NYWAN1’s Gi0/1 interface: \"",
          "length": "1062",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-2-4-112415.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-2-4-112415-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-2-4-112415-sm.jpg",
          "title": "Set 2 Issue 4",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:08.090\n[MUSIC]\n\n2\n00:00:08.090 --> 00:00:10.912\nIn this video, we're going to\ncontinue on to set number two,\n\n3\n00:00:10.912 --> 00:00:12.880\nwe're taking a look at issue number four.\n\n4\n00:00:12.880 --> 00:00:15.480\nAnd on this one we've got\nMore communications issues.\n\n5\n00:00:15.480 --> 00:00:16.570\nI tell you, this network's terrible.\n\n6\n00:00:16.570 --> 00:00:21.440\nSo, we've got PLAB Cisco 01,\nour little Windows server out there.\n\n7\n00:00:21.440 --> 00:00:23.250\nThis time it's unable to ping a host but\n\n8\n00:00:23.250 --> 00:00:26.530\nthis one is a lot different cuz\nthe host is way outside of our network.\n\n9\n00:00:26.530 --> 00:00:29.670\nThe host is 172.16.16.2.\n\n10\n00:00:29.670 --> 00:00:33.400\nAnd all they tell us\nhere is that it's a host\n\n11\n00:00:33.400 --> 00:00:38.080\nout NY wan one's gigabit\nzero slash one interface.\n\n12\n00:00:38.080 --> 00:00:41.340\nNow, where is that,\nthis is all new for us right.\n\n13\n00:00:41.340 --> 00:00:42.680\nIf I pull up my topology,\n\n14\n00:00:42.680 --> 00:00:46.160\nlet me just kind of zoom in here and\nwe'll try and find that.\n\n15\n00:00:46.160 --> 00:00:49.540\nSo, it mentioned that it was outside\nNY wan one, this guy right here.\n\n16\n00:00:49.540 --> 00:00:54.240\nNow, NY wan one that's a router we\ncontrol, we have access to that But\n\n17\n00:00:54.240 --> 00:00:57.370\nit's a router that's on the edge\nof our autonomous system.\n\n18\n00:00:57.370 --> 00:01:00.650\nWhich means, that it's the last\nrouter that we actually control.\n\n19\n00:01:00.650 --> 00:01:03.710\nAnything beyond that, we don't control.\n\n20\n00:01:03.710 --> 00:01:08.520\nAnd we're trying to get to 172.16.16.2,\nthat's this network, right here.\n\n21\n00:01:08.520 --> 00:01:10.940\nWhich points to the NWRKWAN1.\n\n22\n00:01:10.940 --> 00:01:12.940\nSo, that server or\n\n23\n00:01:12.940 --> 00:01:15.950\nwhatever it is that we're trying to reach\nis on the network that we don't control.\n\n24\n00:01:15.950 --> 00:01:18.050\nWe don't have access to this router,\nwe can't view it,\n\n25\n00:01:18.050 --> 00:01:21.430\nwe can't see its config,\nit's out on the Internet, right?\n\n26\n00:01:21.430 --> 00:01:25.910\nSo, we know that, we only have so\nmuch control over this.\n\n27\n00:01:25.910 --> 00:01:29.890\nAnd our problem is really\nsend it around ping And\n\n28\n00:01:29.890 --> 00:01:32.390\nthe ping is coming from this server.\n\n29\n00:01:32.390 --> 00:01:34.530\nAnd so\nit's bouncing through some switches.\n\n30\n00:01:34.530 --> 00:01:36.170\nIt's coming up to New York edge one.\n\n31\n00:01:36.170 --> 00:01:38.620\nIt's jumping over to NY Win one and\nheading out.\n\n32\n00:01:38.620 --> 00:01:41.300\nThat's a lot of equipment\nin between point A and\n\n33\n00:01:41.300 --> 00:01:44.930\npoint B and the problem can\nbe anywhere along that path.\n\n34\n00:01:44.930 --> 00:01:46.510\nAnd so we're going to have to jump in and\n\n35\n00:01:46.510 --> 00:01:50.230\nScope this problem just like\nwe did with issue three.\n\n36\n00:01:50.230 --> 00:01:52.620\nSo, I'm really gonna start this one\nthe same way we did issue three,\n\n37\n00:01:52.620 --> 00:01:53.610\nwhich is traceroute.\n\n38\n00:01:53.610 --> 00:01:56.720\nTraceroute's a great way to\nidentify where that problem is.\n\n39\n00:01:56.720 --> 00:02:00.950\nSo, I'm gonna jump over to that server and\nthat's where we'll start.\n\n40\n00:02:00.950 --> 00:02:07.000\nSo, here I am on that server, and\nI'm just gonna do a quick Trace route\n\n41\n00:02:07.000 --> 00:02:12.435\nto the host that we're trying to get to,\nso the host is 172.16.16.2.\n\n42\n00:02:12.435 --> 00:02:13.331\nAll right.\n\n43\n00:02:13.331 --> 00:02:14.910\nAnd let's see where this dies out,\n\n44\n00:02:14.910 --> 00:02:17.740\nI'm assuming it'll die out since\nthat's what the tickets all about.\n\n45\n00:02:17.740 --> 00:02:21.590\nSo, the first hop should be my default\ngateway and assuming we haven't messed up\n\n46\n00:02:21.590 --> 00:02:24.120\nanything on our local network,\nwe should be able to get there.\n\n47\n00:02:24.120 --> 00:02:26.520\nAnd after that,\nI really don't know what's gonna happen.\n\n48\n00:02:26.520 --> 00:02:30.190\nIf we go back to the diagram, my default\ngateway you'll remember from the earlier\n\n49\n00:02:30.190 --> 00:02:34.300\nquestions is an HSRP shared IP\nbetween these two switches.\n\n50\n00:02:34.300 --> 00:02:36.080\nSo, I'm gonna get there.\n\n51\n00:02:36.080 --> 00:02:40.140\nFrom there, I'll get routed over to\nthe other VLANs where I should end up\n\n52\n00:02:40.140 --> 00:02:40.980\non NYEDGE1.\n\n53\n00:02:40.980 --> 00:02:45.030\nThat should be the next step in my\njourney or what I expect to see.\n\n54\n00:02:45.030 --> 00:02:47.670\nAnd then from there we should\nbe jumping over to N1WAN1.\n\n55\n00:02:47.670 --> 00:02:53.113\nAnd if I go back to my server I can\nsee the next IP I got was 1.92.\n\n56\n00:02:53.113 --> 00:02:54.121\n168.13.5.\n\n57\n00:02:54.121 --> 00:02:58.960\nThat's not really what expected\nto see 13.5 because N1EDGE1,\n\n58\n00:02:58.960 --> 00:03:04.170\nif you remember from the last question,\nall of it's IPs ended in .4.\n\n59\n00:03:04.170 --> 00:03:04.760\nI'm seeing dot five.\n\n60\n00:03:04.760 --> 00:03:09.870\nAlright, well I don't who dot five is and\nthe diagram doesn't really show me either.\n\n61\n00:03:09.870 --> 00:03:12.630\nSo we might have to do a little bit of\nexploration to figure out who the heck is\n\n62\n00:03:12.630 --> 00:03:15.380\ndot five cuz that's my next hop..\n\n63\n00:03:15.380 --> 00:03:18.800\nAnd then whoever dot five is,\nthat's the end of my journey.\n\n64\n00:03:18.800 --> 00:03:23.790\nAnd so, their either the problem or\nwhoever their next hop is the problem.\n\n65\n00:03:23.790 --> 00:03:26.990\nBut I don't know who their next hop\nis I'm gonna need to go to them\n\n66\n00:03:26.990 --> 00:03:27.560\none way or another.\n\n67\n00:03:27.560 --> 00:03:31.480\nI'm gonna have to go to whoever .5 is\nto figure out if they are the issue or\n\n68\n00:03:31.480 --> 00:03:34.060\nat least to figure out\nwho their next hop is.\n\n69\n00:03:34.060 --> 00:03:36.340\nSo, let's go find who's .5.\n\n70\n00:03:36.340 --> 00:03:40.460\nMaybe it is EDGE1,\nit would make sense I guess, and\n\n71\n00:03:40.460 --> 00:03:42.810\nit just has an extra IP that\nI didn't notice before.\n\n72\n00:03:42.810 --> 00:03:45.600\nSo, let's jump over to EDGE1 and\nsee if we can't figure that out.\n\n73\n00:03:45.600 --> 00:03:51.160\nSo, if I jump over to EDGE1,\nThis is that router and\n\n74\n00:03:51.160 --> 00:03:53.190\nI'm gonna do a show IP interface brief.\n\n75\n00:03:54.290 --> 00:03:58.240\nAnd we'll just pull up its interface list\nand see how everything ends in .4 here,\n\n76\n00:03:58.240 --> 00:03:59.490\nI don't see any .5's.\n\n77\n00:03:59.490 --> 00:04:03.520\nI guess it's possible it could be\nhidden away in the configuration.\n\n78\n00:04:03.520 --> 00:04:11.005\nSo, if I do a show run, and I filter to\ninclude and hunt specifically for that IP.\n\n79\n00:04:11.005 --> 00:04:15.210\n192.168.16.5.\n\n80\n00:04:15.210 --> 00:04:18.030\nI got nothing, right.\n\n81\n00:04:18.030 --> 00:04:21.600\nSo, this guy is not .5,\nthis is not my problem, all right.\n\n82\n00:04:21.600 --> 00:04:25.950\nWell, when I go and\nlook at my diagram again.\n\n83\n00:04:25.950 --> 00:04:30.380\nI'm hitting Access One, and then I'm going\nup to one of these core switches, and\n\n84\n00:04:30.380 --> 00:04:33.110\nthen they're sending me usually to\none of these two routers up here.\n\n85\n00:04:33.110 --> 00:04:35.400\nI have NYEDGE2, so\nmaybe that's where I'm going, right?\n\n86\n00:04:35.400 --> 00:04:36.930\nMaybe I'm jumping over to that other one.\n\n87\n00:04:36.930 --> 00:04:41.430\nSo, I'm going to jump over to NYEDGE2 and\ncheck it out to see what it's set for.\n\n88\n00:04:41.430 --> 00:04:48.070\nSo, jumping over to NYEDGE2 I'm\ngonna get connected into this guy,\n\n89\n00:04:49.860 --> 00:04:53.780\nthere we go, and\nI just wanna see what its IPs are.\n\n90\n00:04:53.780 --> 00:04:55.430\nWhoops, if I remember that command,\n\n91\n00:04:55.430 --> 00:05:00.080\nshow IP int brief, and well,\nit's close, 192.168.12.5.\n\n92\n00:05:00.080 --> 00:05:04.000\nI was kinda looking for 192.168.16.\n\n93\n00:05:04.000 --> 00:05:04.830\nOr am I wrong?\n\n94\n00:05:04.830 --> 00:05:06.010\nI might be transposing IPs.\n\n95\n00:05:06.010 --> 00:05:10.060\nLet me jump back to the server and\nsee if I'm transposing IPs.\n\n96\n00:05:10.060 --> 00:05:11.485\nI might be wrong there.\n\n97\n00:05:11.485 --> 00:05:12.435\nAnd oh, I am.\n\n98\n00:05:12.435 --> 00:05:13.105\nSo, it's 192.168.13.5.\n\n99\n00:05:13.105 --> 00:05:14.390\nSorry, that's really small.\n\n100\n00:05:14.390 --> 00:05:17.385\n13.5.\nThat's the next hop that I was looking for\n\n101\n00:05:17.385 --> 00:05:22.035\nso I need to find that IP, so I was\nactually searching for the wrong thing.\n\n102\n00:05:22.035 --> 00:05:24.845\nAnd that's a mistake you\ncan make on the exam.\n\n103\n00:05:24.845 --> 00:05:28.785\nAll of the sudden,\nyou're troubleshooting the wrong thing.\n\n104\n00:05:28.785 --> 00:05:30.795\nEither way, I don't see 13.5 here.\n\n105\n00:05:30.795 --> 00:05:34.050\nI can do a quick show running config.\n\n106\n00:05:34.050 --> 00:05:37.490\nAnd filter for 192.168.13.5, just to see\n\n107\n00:05:37.490 --> 00:05:42.800\nif it's hidden away as a secondary IP or\na virtual IP, and I'm not seeing it here.\n\n108\n00:05:42.800 --> 00:05:45.930\nI need to jump back to EDGE1 because\nI'm pretty certain I searched for\n\n109\n00:05:45.930 --> 00:05:47.440\nthe wrong IP back there.\n\n110\n00:05:47.440 --> 00:05:48.350\nAnd I did.\n\n111\n00:05:48.350 --> 00:05:50.170\nYeah, I searched for 16.5.\n\n112\n00:05:50.170 --> 00:05:51.708\nSo, I'm gonna fix that.\n\n113\n00:05:51.708 --> 00:05:55.300\nAnswers for 13.5, still no winner.\n\n114\n00:05:55.300 --> 00:05:59.560\nOkay, so now what I would think would\nbe the next top is not the next top, so\n\n115\n00:05:59.560 --> 00:06:02.420\nI'm kinda scratching my head here,\nwho the heck is this?\n\n116\n00:06:02.420 --> 00:06:03.790\nLet's just check our other systems.\n\n117\n00:06:03.790 --> 00:06:06.070\nThere's really only one other system,\nright,\n\n118\n00:06:06.070 --> 00:06:12.040\nif we go back to our diagram that 13.5,\nit's probably in NYWAN1 I guess.\n\n119\n00:06:12.040 --> 00:06:14.190\nLet's jump over and\ntake a look at that one.\n\n120\n00:06:14.190 --> 00:06:14.980\nSee if we can't find it.\n\n121\n00:06:17.680 --> 00:06:19.760\nNow, if you have a problem\nlike this on the exam and\n\n122\n00:06:19.760 --> 00:06:22.420\nyou're having a hard time finding an ip,\nremember that's part of the process.\n\n123\n00:06:22.420 --> 00:06:24.090\nWe've got to locate these machines.\n\n124\n00:06:24.090 --> 00:06:26.400\nThe faster we do it,\nthe better, obviously.\n\n125\n00:06:26.400 --> 00:06:28.240\nSo, you want to get good at jumping and\n\n126\n00:06:28.240 --> 00:06:30.740\nrunning the right command\nto locate what you want.\n\n127\n00:06:30.740 --> 00:06:32.760\nCommands like show ip interface\nbrief are really handy for\n\n128\n00:06:32.760 --> 00:06:34.460\nthat and Sure enough there's our winner.\n\n129\n00:06:34.460 --> 00:06:36.020\nAnd I'm kinda curious how that works.\n\n130\n00:06:36.020 --> 00:06:38.020\nWe'll have to look at our path for this.\n\n131\n00:06:38.020 --> 00:06:40.090\nBut this guy is 192.168.13.5.\n\n132\n00:06:40.090 --> 00:06:48.440\nIt's right there on it's gi0/0 interface\nand if I go back to my diagram that is\n\n133\n00:06:48.440 --> 00:06:53.450\nlooking at this guy an interface\nthat's not even on the diagram.\n\n134\n00:06:53.450 --> 00:06:54.010\nWell, that's fun.\n\n135\n00:06:54.010 --> 00:06:56.190\nYou know to have an interface\nnot in the diagram.\n\n136\n00:06:57.200 --> 00:06:58.970\nDiagram's not always accurate, I suppose.\n\n137\n00:06:58.970 --> 00:07:02.960\nBut in this case I don't see that\ninterface so it must be running right into\n\n138\n00:07:02.960 --> 00:07:05.860\nthat VLAN so that's why we're able\nto bypass these guys up here.\n\n139\n00:07:05.860 --> 00:07:09.450\nSo, looks like we got an interesting\npath to sort out here.\n\n140\n00:07:09.450 --> 00:07:12.620\nSo, Point being we are able\nto get to that IP.\n\n141\n00:07:12.620 --> 00:07:13.990\nWe can get to NYWAN1.\n\n142\n00:07:13.990 --> 00:07:16.650\nWe're just not getting beyond it so\n\n143\n00:07:16.650 --> 00:07:20.530\nwe need to figure that out and\nfind out why we're stopping right here.\n\n144\n00:07:20.530 --> 00:07:24.730\nNow, on my server I wasn't able\nto ping the IP, the 172.16.16.2.\n\n145\n00:07:24.730 --> 00:07:30.690\nThis guy has an IP right on that network\nso I'm going to try and ping from here.\n\n146\n00:07:32.160 --> 00:07:35.870\nAnd see where I can get, and\nit can get there, all right?\n\n147\n00:07:35.870 --> 00:07:41.980\nSo, going back to my diagram, my server\ncan make it all the way to NYWAN1.\n\n148\n00:07:41.980 --> 00:07:46.090\nI can get all the way to here,\nI can't get to that next host.\n\n149\n00:07:46.090 --> 00:07:48.480\nBut from here, I can get to the next host.\n\n150\n00:07:49.510 --> 00:07:51.320\nSo, what's the problem?\n\n151\n00:07:51.320 --> 00:07:52.210\nThat doesn't make any sense.\n\n152\n00:07:52.210 --> 00:07:54.270\nIf I can get to this node and\nnot get beyond it.\n\n153\n00:07:54.270 --> 00:07:57.100\nWell, there's a few things that\ncan cause that problem, right?\n\n154\n00:07:57.100 --> 00:08:01.090\nThe most common is that I\ndon't have a return path.\n\n155\n00:08:01.090 --> 00:08:02.275\nIn other words In other words,\n\n156\n00:08:02.275 --> 00:08:06.885\nmy traffic might actually be making it all\nthe way to the host on the other side.\n\n157\n00:08:06.885 --> 00:08:09.205\nBut the host on the other side\nmight not have a route back.\n\n158\n00:08:09.205 --> 00:08:13.975\nIt might be able to get to NYWAN1\nbecause it shares an IP or subnet.\n\n159\n00:08:13.975 --> 00:08:15.265\nIt's on the same subnet.\n\n160\n00:08:15.265 --> 00:08:16.525\nIt doesn't need to be routed.\n\n161\n00:08:16.525 --> 00:08:18.635\nBut to get back to it's gotta be routed.\n\n162\n00:08:18.635 --> 00:08:20.575\nSo, I might not have a return path.\n\n163\n00:08:20.575 --> 00:08:22.675\nUnfortunately, I can't check that.\n\n164\n00:08:22.675 --> 00:08:25.890\nI check that because I don't\nhave access to this router.\n\n165\n00:08:25.890 --> 00:08:28.760\nI don't have access to that network,\nso I have to hope that's not the case.\n\n166\n00:08:29.960 --> 00:08:34.170\nAnother problem could be network\naddress translation, right?\n\n167\n00:08:34.170 --> 00:08:38.400\nA lot of times when we pass from a LAN to\na WAN, we're translating addresses, so\n\n168\n00:08:38.400 --> 00:08:40.150\nI could have a problem there.\n\n169\n00:08:40.150 --> 00:08:43.300\nA third problem is I could\nhave an access control list.\n\n170\n00:08:43.300 --> 00:08:45.960\nThe ACL can be blocking me from\npassing out, and for that matter,\n\n171\n00:08:45.960 --> 00:08:49.050\nthe ACL could be anywhere here\nin the network Stopping these.\n\n172\n00:08:49.050 --> 00:08:52.070\nProbably not though because we saw that\ntrace route go all the way through.\n\n173\n00:08:52.070 --> 00:08:54.050\nSo, that's another type of issue.\n\n174\n00:08:54.050 --> 00:08:57.020\nSo, there's several different things\nthat could cause this problem.\n\n175\n00:08:57.020 --> 00:08:58.530\nI'm gonna have to figure\nout which one it is.\n\n176\n00:08:58.530 --> 00:08:59.990\nAll right.\n\n177\n00:08:59.990 --> 00:09:04.300\nSo To start, well, let's just take\na look at NYWAN1's configuration and\n\n178\n00:09:04.300 --> 00:09:07.110\ntry and\nrule out some of these things, okay?\n\n179\n00:09:07.110 --> 00:09:09.590\nThe reverse path, there's not much\nI can do to rule that one out.\n\n180\n00:09:09.590 --> 00:09:13.290\nI'm just gonna have to sit on that one and\nthat'll be my last stitch effort to go to.\n\n181\n00:09:13.290 --> 00:09:16.570\nAnd if that's the case we can\nuse NAT to fix it, right?\n\n182\n00:09:16.570 --> 00:09:18.450\nIt could be an Access control list.\n\n183\n00:09:18.450 --> 00:09:22.710\nAnd so if I do show access-list\nI can answer that real quick.\n\n184\n00:09:22.710 --> 00:09:24.500\nI do have two access lists.\n\n185\n00:09:24.500 --> 00:09:27.960\nI have one that's saying\npermit ip any any.\n\n186\n00:09:27.960 --> 00:09:32.320\nWell, if I'm doing pings,\ndoes permit ip any any cover it?\n\n187\n00:09:33.410 --> 00:09:38.040\nWell, it's a little bit tricky because\nyou could say permit icmp any any, right?\n\n188\n00:09:38.040 --> 00:09:40.830\nSo, it's potential there that\nI'm getting blocked, but\n\n189\n00:09:40.830 --> 00:09:43.870\nnotice how there's no matches on that ACL?\n\n190\n00:09:43.870 --> 00:09:45.730\nThat makes me think\nit's not even attached.\n\n191\n00:09:45.730 --> 00:09:48.380\nIf an ACL is attached and there's\nany traffic flowing on the network,\n\n192\n00:09:48.380 --> 00:09:49.980\nyou should see some matches beside it.\n\n193\n00:09:49.980 --> 00:09:54.300\nIf you don't see matches, it means the\nACL's either not attached, in other words,\n\n194\n00:09:54.300 --> 00:09:55.470\nyou can ignore it.\n\n195\n00:09:55.470 --> 00:09:59.480\nOr it means the ACL is being used for\nsomething other than security filtering.\n\n196\n00:09:59.480 --> 00:10:02.390\nSo again, both those scenarios\nwould not be stopping me.\n\n197\n00:10:02.390 --> 00:10:03.690\nSame thing with this other ACL.\n\n198\n00:10:03.690 --> 00:10:06.240\nWe've got a ACL here that's\npermitting some traffic.\n\n199\n00:10:06.240 --> 00:10:09.860\nIt's permitting some TCP and\nit's permitting ICMP.\n\n200\n00:10:09.860 --> 00:10:13.510\nIn fact it's got one line\nthat's permitting ICMP traffic\n\n201\n00:10:13.510 --> 00:10:17.460\nfrom 192.168.16.0 to 172.16.16.1 or\n\n202\n00:10:17.460 --> 00:10:23.050\nthe one above it right here\npermitting ICMP traffic.\n\n203\n00:10:23.050 --> 00:10:24.790\nTo the host I'm trying to ping.\n\n204\n00:10:24.790 --> 00:10:26.940\nNow, that looks like a real winner.\n\n205\n00:10:26.940 --> 00:10:29.930\nExcept again no matches\nlisted over the side.\n\n206\n00:10:29.930 --> 00:10:31.580\nNormally I expect to see parentheses and\n\n207\n00:10:31.580 --> 00:10:34.100\nmatches followed by a number,\nI don't see that.\n\n208\n00:10:34.100 --> 00:10:36.880\nAnd that makes me think\nthese are not security ACLs.\n\n209\n00:10:36.880 --> 00:10:38.280\nThese are probably ACLs being used for\n\n210\n00:10:38.280 --> 00:10:43.170\nsomething else like route maps,\npolicy based routing, nat.\n\n211\n00:10:43.170 --> 00:10:45.070\nRight?\nWhich we need to look for nat anyway.\n\n212\n00:10:45.070 --> 00:10:47.910\nAnd actually this ACL has a name\nif I'd bothered to look at it.\n\n213\n00:10:47.910 --> 00:10:49.710\nThe name is NATME.\n\n214\n00:10:49.710 --> 00:10:52.630\nSo, this is more than likely\na network address translation ACL.\n\n215\n00:10:53.650 --> 00:10:56.120\nWell, let's find out if that's the case.\n\n216\n00:10:56.120 --> 00:10:59.680\nSo, if I do a show run and\ntake a look at my running configuration,\n\n217\n00:11:00.700 --> 00:11:03.830\nI can look from my Gigabit interfaces.\n\n218\n00:11:03.830 --> 00:11:06.620\nHere we go.\n\n219\n00:11:06.620 --> 00:11:08.880\nOn GI-0/0,\nthat's the 192.168.13.5 interface,\n\n220\n00:11:08.880 --> 00:11:13.170\nthe one I know I can get to,\nand ip nat enabled, right?\n\n221\n00:11:13.170 --> 00:11:15.040\nSo, it's got nat turned on.\n\n222\n00:11:15.040 --> 00:11:18.540\nThere's no ACL attached to it, and GI-0/1,\n\n223\n00:11:18.540 --> 00:11:23.490\nthe one that's on the 172.16.16.1,\nip nat enable, and no ACL.\n\n224\n00:11:23.490 --> 00:11:26.830\nSo, I can put ACLs out of my mind now,\nthat's not what's filtering it,\n\n225\n00:11:26.830 --> 00:11:29.390\nand we're more than likely\ndealing with a NAT issue.\n\n226\n00:11:29.390 --> 00:11:33.306\nAnd if I continue looking\nat that configuration, and\n\n227\n00:11:33.306 --> 00:11:37.830\njust continue to move through it\nuntil I get down to the ACLs and\n\n228\n00:11:37.830 --> 00:11:41.674\nthe NAT configuration,\nI can find NAT right there.\n\n229\n00:11:41.674 --> 00:11:44.559\nIP nat source list NATME.\n\n230\n00:11:44.559 --> 00:11:45.676\nThere's that acl.\n\n231\n00:11:45.676 --> 00:11:51.197\nSo, we're taking any traffic that matches\nNATME and we're nating it on it's way out\n\n232\n00:11:51.197 --> 00:11:56.968\nGI0/1 and we're overloading so it'll just\ntake on the IP address of that interface.\n\n233\n00:11:56.968 --> 00:12:00.702\nNow, that's important because if I go\nback to my diagram on of the things I\n\n234\n00:12:00.702 --> 00:12:04.180\nworried about was what if I\ndon't have a return trip.\n\n235\n00:12:04.180 --> 00:12:08.890\nWell, if my router is passing\nthrough this router, and\n\n236\n00:12:08.890 --> 00:12:10.860\nmy server is passing through this router,\nand\n\n237\n00:12:10.860 --> 00:12:14.090\nit gets NATTed to the external interface\nto 172.16.16.1, and whoever the host is\n\n238\n00:12:14.090 --> 00:12:19.715\nout here doesn't need a return path,\nit's on the same network as them.\n\n239\n00:12:19.715 --> 00:12:21.990\n,I'm not dealing with a return path issue.\n\n240\n00:12:21.990 --> 00:12:22.740\nI can rule that out.\n\n241\n00:12:22.740 --> 00:12:25.750\nIn fact, I've ruled out ACLs,\nnow I've ruled out return path.\n\n242\n00:12:25.750 --> 00:12:27.310\nThe only thing left is NAT.\n\n243\n00:12:27.310 --> 00:12:29.470\nSo, I'm more than likely have a NAT issue.\n\n244\n00:12:30.550 --> 00:12:36.310\nNow, on NYWAN1 there's a few ways we can\nverify NAT's working or not working.\n\n245\n00:12:36.310 --> 00:12:41.700\nYou know, one way is you can\ndo a show IP NAT translations.\n\n246\n00:12:41.700 --> 00:12:44.620\nAnd look at what translations we have\nwhich I've got a massive table of\n\n247\n00:12:44.620 --> 00:12:47.810\ntranslations here which are clearly empty,\nright?\n\n248\n00:12:47.810 --> 00:12:51.920\nSo, I don't have any translations, or\nmy translations are terminating so fast,\n\n249\n00:12:51.920 --> 00:12:55.630\nthey're not staying recorded, which can\nhappen with pings sometimes, right?\n\n250\n00:12:55.630 --> 00:12:56.990\nPings are sessionless.\n\n251\n00:12:56.990 --> 00:12:57.750\nThey just throw it out and\n\n252\n00:12:57.750 --> 00:13:01.440\nhope to get a response, so you don't\nalways see those in your translations.\n\n253\n00:13:02.930 --> 00:13:07.020\nSo, if I don't have any translations, then\nI'm likely dealing with an ACL problem,\n\n254\n00:13:07.020 --> 00:13:09.044\nand if I do a show access-list.\n\n255\n00:13:10.400 --> 00:13:12.160\nAnd look at that ACL again.\n\n256\n00:13:12.160 --> 00:13:15.250\nIt's saying permit TCP traffic for\n\n257\n00:13:15.250 --> 00:13:18.120\nthe entire 19.168.16 network\nwhich is what my servers on.\n\n258\n00:13:18.120 --> 00:13:22.020\nBut I'm not dealing with TCP,\nI'm dealing with ICMP.\n\n259\n00:13:22.020 --> 00:13:25.865\nSo, I've got two permit ICMP's and they're\npermitting it to 172.16.16.2 and .1 and\n\n260\n00:13:25.865 --> 00:13:33.010\n.2 is the one I'm trying to get to,\nbut it's not working.\n\n261\n00:13:33.010 --> 00:13:33.860\nAnd it's not working.\n\n262\n00:13:33.860 --> 00:13:38.694\nBecause, if we look at it,\nwho's it permitting for?\n\n263\n00:13:38.694 --> 00:13:40.761\n192.168.16.128.\n\n264\n00:13:40.761 --> 00:13:44.050\nAnd, it's got a 0.0.0.127 wildcard mask.\n\n265\n00:13:44.050 --> 00:13:46.610\nThat's the second half of that class c.\n\n266\n00:13:46.610 --> 00:13:48.506\nOf that 192.168.16 network.\n\n267\n00:13:48.506 --> 00:13:51.160\nMy server is 192.168.16.10\nin the first half.\n\n268\n00:13:51.160 --> 00:13:55.660\nSo, it's not matching this line.\n\n269\n00:13:55.660 --> 00:13:57.930\nIf it doesn't match the line\nit's not gonna get NAT'ed.\n\n270\n00:13:57.930 --> 00:13:59.330\nIt's gonna get go out with its own IP.\n\n271\n00:13:59.330 --> 00:14:02.960\nAnd then I probably am dealing\nwith a return path issue.\n\n272\n00:14:02.960 --> 00:14:05.370\nSo, how do I fix this\n\n273\n00:14:05.370 --> 00:14:08.010\nThis is another one where we've got\nmore than one way to fix it, right?\n\n274\n00:14:08.010 --> 00:14:09.120\nMethod one.\n\n275\n00:14:09.120 --> 00:14:15.670\nI could go and adjust this and widen that\none line to include the whole network.\n\n276\n00:14:15.670 --> 00:14:18.775\nOr I could add an additional\nline that just fixed my host.\n\n277\n00:14:18.775 --> 00:14:19.365\nRight?\n\n278\n00:14:19.365 --> 00:14:22.385\nMaybe I need to do that, right, maybe I\njust need to fix my one particular host.\n\n279\n00:14:22.385 --> 00:14:25.525\nWe'll have to rely on the question to\ngive us boundaries, and in this question,\n\n280\n00:14:25.525 --> 00:14:29.525\nit really didn't give us any boundaries,\nso I can kinda do whatever we want, right?\n\n281\n00:14:29.525 --> 00:14:30.835\nSo, however we wanna fix this, we can.\n\n282\n00:14:30.835 --> 00:14:32.915\nI could replace that line or\nadd another one.\n\n283\n00:14:32.915 --> 00:14:35.615\nI'm gonna add another line,\ncuz that's normally the safer route.\n\n284\n00:14:35.615 --> 00:14:39.935\nSo, if I wanna fix this, I just need\nto go in and fix that nat line.\n\n285\n00:14:39.935 --> 00:14:41.255\nI'm gonna go into my configuration.\n\n286\n00:14:42.430 --> 00:14:47.380\nAnd I'm gonna go into that access list,\nright, which it's a named named ACL,\n\n287\n00:14:47.380 --> 00:14:49.270\nso I have to tell it whether\nit's extended or standard.\n\n288\n00:14:49.270 --> 00:14:51.990\nI know it's extended because I\nhave sources and destinations and\n\n289\n00:14:51.990 --> 00:14:53.300\nI've got protocols.\n\n290\n00:14:53.300 --> 00:14:59.200\nSo, I'm gonna go into that ACL,\nand I'm just gonna do a new line.\n\n291\n00:14:59.200 --> 00:14:59.750\nI'll say 40.\n\n292\n00:14:59.750 --> 00:15:01.280\nLike I said,\nI don't have to do the line number,\n\n293\n00:15:01.280 --> 00:15:03.350\nbecause it's automatically\ngonna stick it at the end.\n\n294\n00:15:03.350 --> 00:15:08.950\nAnd I'm gonna permit ICMP and\nI'm just gonna be super literal here and\n\n295\n00:15:08.950 --> 00:15:12.040\nI'm just gonna fix the station\nthat's in the exam.\n\n296\n00:15:12.040 --> 00:15:17.170\nSo, the question asked for\nme for that one server.\n\n297\n00:15:17.170 --> 00:15:23.650\nSo, I'm gonna permit\nICMP from host 192.168.\n\n298\n00:15:23.650 --> 00:15:31.260\nlet's see IM 16.10 And then I'm going to\nsay a destination of host 172.16.16.2.\n\n299\n00:15:31.260 --> 00:15:31.760\nOkay.\n\n300\n00:15:34.470 --> 00:15:36.860\nNow, I'm probably being over literal here.\n\n301\n00:15:36.860 --> 00:15:38.340\nRight?\nI'm being really specific.\n\n302\n00:15:38.340 --> 00:15:41.720\nI could go ahead and\n\n303\n00:15:41.720 --> 00:15:46.390\njust say the network 192.168.16.0\nwith a 0.0.0.255 wild card mass.\n\n304\n00:15:47.780 --> 00:15:49.490\nAnd then for\nthe destination I could put any.\n\n305\n00:15:49.490 --> 00:15:50.910\nI won't allow them to ping anywhere.\n\n306\n00:15:50.910 --> 00:15:55.260\nI could allow ICMP for any any and\ndisallow it for everybody.\n\n307\n00:15:55.260 --> 00:15:58.850\nSo, how far I want to limit\nthis is kinda up to me.\n\n308\n00:15:58.850 --> 00:16:02.780\nBut if I want to be really super literal,\nI'm just trying to fix this one node.\n\n309\n00:16:02.780 --> 00:16:04.760\nThis is a nice,\nspecific line that's gonna do that.\n\n310\n00:16:05.810 --> 00:16:10.850\nAnd then I can do a show\nIf I spell it right here.\n\n311\n00:16:10.850 --> 00:16:12.160\nshow access list.\n\n312\n00:16:14.510 --> 00:16:17.180\nAnd I can verify that it's in there,\nwhoops.\n\n313\n00:16:17.180 --> 00:16:17.730\nAnd there we go.\nSo,\n\n314\n00:16:17.730 --> 00:16:19.840\nI've got that line right there and\nit did give it line number 40.\n\n315\n00:16:19.840 --> 00:16:21.110\nIt's right at the end.\n\n316\n00:16:21.110 --> 00:16:22.870\nIt's gonna permit that traffic in.\n\n317\n00:16:22.870 --> 00:16:25.340\nIn theory,\nI should be able to get there now, right.\n\n318\n00:16:25.340 --> 00:16:26.560\nOr at least I should be NAT'ed.\n\n319\n00:16:26.560 --> 00:16:27.540\nWe might still have another problem.\n\n320\n00:16:27.540 --> 00:16:29.670\nSo, let's go see if I can get there,\nright.\n\n321\n00:16:29.670 --> 00:16:32.960\nSo, I'll jump back over\nto that server And,\n\n322\n00:16:32.960 --> 00:16:36.070\nit still kind of churning along with\nits trace routs, let me just kill that.\n\n323\n00:16:37.520 --> 00:16:40.490\nLet me try and kill that, there we go, and\n\n324\n00:16:40.490 --> 00:16:45.290\nI'm going to try and ping to 172.16.16.2\nwhich is what failed way back in\n\n325\n00:16:45.290 --> 00:16:49.650\nthe beginning of this episode and\nnow I'm getting there.\n\n326\n00:16:49.650 --> 00:16:51.210\nRIght?\nSo, now its working.\n\n327\n00:16:51.210 --> 00:16:52.440\nI didn't fix it for\nthe rest of my network.\n\n328\n00:16:52.440 --> 00:16:53.660\nI just fixed it for this host.\n\n329\n00:16:53.660 --> 00:16:56.250\nBut that's what the ticket was,\nand it's now resolved.\n\n330\n00:16:56.250 --> 00:17:01.820\nSo, this one turned out to be a bad access\ncontrol list in a NAT configuration.\n\n331\n00:17:01.820 --> 00:17:05.140\nSo, the hardest part here was just\nfiguring out where the problem was and\n\n332\n00:17:05.140 --> 00:17:09.010\nhaving an inaccurate network diagram\nthat's a bit of a problem, too.\n\n333\n00:17:09.010 --> 00:17:13.480\nI didn't know that we could bypass\nthose edge routers, so I kinda wasted\n\n334\n00:17:13.480 --> 00:17:16.940\ntime looking at the edge routers when I\ncould've jumped right over to NYWAN 1.\n\n335\n00:17:16.940 --> 00:17:19.630\nSo, just be aware that sometimes\nthere can be a red herring there.\n\n336\n00:17:19.630 --> 00:17:22.220\nYou're gonna follow the wrong path\nas you troubleshoot something.\n\n337\n00:17:22.220 --> 00:17:25.570\nAnd it's always important to verify\nyour work and just assume nothing.\n\n338\n00:17:25.570 --> 00:17:27.120\nRight?\nJump and check each unit if you can.\n\n339\n00:17:27.120 --> 00:17:30.220\nYou just want to make sure you\ndo it as quickly as possible.\n\n340\n00:17:30.220 --> 00:17:32.340\nAll right, well that wraps up\nthis troubleshooting problem.\n\n341\n00:17:32.340 --> 00:17:33.240\nI hope you guys enjoyed it.\n\n342\n00:17:33.240 --> 00:17:36.276\nStay tuned, we've got more\ntroubleshooting scenarios coming up.\n\n343\n00:17:36.276 --> 00:17:42.519\n[MUSIC]\n\n",
          "vimeoId": "149150881"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #5` from set #2. The trouble ticket states that \"Time is not synchronised on NYCORE1, all the other devices show the same time, but this switch does not. \"",
          "length": "588",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-2-5-112415-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-2-5-112415-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-2-5-112415-1-sm.jpg",
          "title": "Set 2 Issue 5",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:05.006\n[MUSIC]\n\n2\n00:00:07.806 --> 00:00:10.270\nAll right,\nwelcome back to troubleshooting, set 2.\n\n3\n00:00:10.270 --> 00:00:14.130\nWe're moving on to issue 5 on this one,\nand it looks like we've got some time\n\n4\n00:00:14.130 --> 00:00:17.945\nprotocol errors on this one, so\nit'll be a good time, no pun intended.\n\n5\n00:00:17.945 --> 00:00:21.440\n[LAUGH] So we'll pick this one up, the\ntroubleshooting ticket reads like this.\n\n6\n00:00:21.440 --> 00:00:25.480\nIt says,\ntime is not synchronized on NYCORE1.\n\n7\n00:00:25.480 --> 00:00:28.869\nAll other devices show the same time,\nbut the switch does not.\n\n8\n00:00:28.869 --> 00:00:31.938\nSo we've got one switch that's\nnot synchronizing its time.\n\n9\n00:00:31.938 --> 00:00:34.670\nEverybody else is fine,\nthis one guy, not doing it.\n\n10\n00:00:34.670 --> 00:00:36.490\nSo, we need to find out why.\n\n11\n00:00:36.490 --> 00:00:40.420\nSo, lets find out why.\n\n12\n00:00:40.420 --> 00:00:41.780\nLets take a look in our topology.\n\n13\n00:00:41.780 --> 00:00:44.110\nSo in our topology we have a bunch\nof devices, a bunch of routers,\n\n14\n00:00:44.110 --> 00:00:45.200\na bunch of switches.\n\n15\n00:00:45.200 --> 00:00:48.490\nThis one is nice cuz they've\nreally narrowed us down to one.\n\n16\n00:00:48.490 --> 00:00:50.190\nSo by reading the question we're like, oh,\n\n17\n00:00:50.190 --> 00:00:54.130\nwe're gonna have a time problem right\nhere in NYCORE1, this is gonna be easy.\n\n18\n00:00:54.130 --> 00:00:57.730\nBut remember that when it comes\nto a time problem like this,\n\n19\n00:00:57.730 --> 00:01:00.520\nit can actually be something far,\nfar different.\n\n20\n00:01:00.520 --> 00:01:03.920\nFor example, maybe the time server is\nout there and I just can't reach it.\n\n21\n00:01:03.920 --> 00:01:08.330\nAnd if I can't reach the time server,\nwell, I might have a routing issue,\n\n22\n00:01:08.330 --> 00:01:11.010\nI might have access control lists,\nI might have NAD issues, there's\n\n23\n00:01:11.010 --> 00:01:14.530\nall sorts of issues that might be blocking\nme from getting to the time server.\n\n24\n00:01:14.530 --> 00:01:17.440\nSo all of a sudden what seems\nlike a simple NTP question,\n\n25\n00:01:17.440 --> 00:01:19.940\nbecomes a layer three routing question.\n\n26\n00:01:19.940 --> 00:01:23.511\nSo always be aware of that on the exam\nthat you've gotta just be ready for\n\n27\n00:01:23.511 --> 00:01:25.380\nanything as we jump into these.\n\n28\n00:01:25.380 --> 00:01:28.143\nSo on this one though, NYCORE1,\ncan't synchronize its time,\n\n29\n00:01:28.143 --> 00:01:30.380\neverybody else is doing it just fine.\n\n30\n00:01:30.380 --> 00:01:32.010\nLet's find out why, okay?\n\n31\n00:01:32.010 --> 00:01:37.750\nSo, on NYCORE1, I'm just gonna\njump over to it, and I wanna see\n\n32\n00:01:37.750 --> 00:01:42.110\nwhat its current setup is, and on this\none, I just wanna start with a simple one.\n\n33\n00:01:42.110 --> 00:01:43.840\nI'll do a show clock, right?\n\n34\n00:01:43.840 --> 00:01:47.490\nAnd when I do a show clock on this one,\nI can see that I've got good old Monday,\n\n35\n00:01:47.490 --> 00:01:51.680\nMarch 1st, 1993,\nwhich is just a little bit wrong, right?\n\n36\n00:01:51.680 --> 00:01:55.760\nSo, 1993, that's 22 years ago.\n\n37\n00:01:55.760 --> 00:01:57.190\nSo that's a long time ago.\n\n38\n00:01:57.190 --> 00:02:00.100\nAnd this is definitely wrong,\nso my time's not synced.\n\n39\n00:02:00.100 --> 00:02:06.930\nIf I take a look at somebody else, I'll\ntake CORE2, and take a look at this guy.\n\n40\n00:02:06.930 --> 00:02:08.529\nWe can just do a quick show clock.\n\n41\n00:02:11.090 --> 00:02:13.760\nAnd, here we've got November 24th, 2015.\n\n42\n00:02:13.760 --> 00:02:16.010\nWhich, let me verify that,\nis indeed today.\n\n43\n00:02:16.010 --> 00:02:17.220\nSo, this one's current.\n\n44\n00:02:17.220 --> 00:02:19.330\nSo, this guy is getting a valid clock.\n\n45\n00:02:19.330 --> 00:02:20.410\nThe other guy's not, all right?\n\n46\n00:02:20.410 --> 00:02:21.920\nSo, why is that?\n\n47\n00:02:21.920 --> 00:02:22.970\nLet's find out.\n\n48\n00:02:22.970 --> 00:02:23.780\nWell, first off,\n\n49\n00:02:23.780 --> 00:02:27.010\nwe need to figure out who it is that\nwe're getting our time from, right?\n\n50\n00:02:27.010 --> 00:02:29.040\nSo, where am I getting my time from?\n\n51\n00:02:29.040 --> 00:02:30.620\nThere's a few different\nways you can find out.\n\n52\n00:02:30.620 --> 00:02:33.530\nWhat I normally do is\njust show running-config.\n\n53\n00:02:33.530 --> 00:02:35.880\nAnd piped it in the include command and\nlooked for NTP, right?\n\n54\n00:02:35.880 --> 00:02:38.460\nSo I'm just gonna look for\nany instance of NTP,\n\n55\n00:02:38.460 --> 00:02:40.570\nand then we can find\nout who our server is.\n\n56\n00:02:40.570 --> 00:02:46.724\nSo you can see I've got a time\nserver of 192.168.12.55, all right?\n\n57\n00:02:46.724 --> 00:02:49.760\nSo that's one way we can figure out\nwho we're synchronizing against.\n\n58\n00:02:49.760 --> 00:02:52.480\nNow notice when I look here\nI've got at authentication key.\n\n59\n00:02:52.480 --> 00:02:53.660\nAuthentication is turned on.\n\n60\n00:02:53.660 --> 00:02:57.130\nI've got a trusted key,\nI've got all the stuff set.\n\n61\n00:02:57.130 --> 00:02:58.900\nAny one of those could be a problem,\nright?\n\n62\n00:02:58.900 --> 00:03:00.140\nI could have a bad key.\n\n63\n00:03:00.140 --> 00:03:01.970\nI could have all sorts of stuff, but\n\n64\n00:03:01.970 --> 00:03:04.598\nI'm just trying to figure out who that is,\nright?\n\n65\n00:03:04.598 --> 00:03:07.376\nAnd now I know that there's other\nways I could have done it, right?\n\n66\n00:03:07.376 --> 00:03:12.676\nThere's show ntp associations.\n\n67\n00:03:12.676 --> 00:03:16.156\nWhen you set up an NTP server,\nyou create an association with it, and\n\n68\n00:03:16.156 --> 00:03:19.586\nshow ntp associations will tell you\nwho you're set to reach out to.\n\n69\n00:03:19.586 --> 00:03:23.966\nSo I can see, 192.168.12.55.\n\n70\n00:03:23.966 --> 00:03:25.980\nNow, if you can remember that command,\ngreat.\n\n71\n00:03:25.980 --> 00:03:29.180\nIf you can't, the show running\nconfig works just as well.\n\n72\n00:03:29.180 --> 00:03:29.880\nBut in here,\n\n73\n00:03:29.880 --> 00:03:34.830\nI get a little more information like this,\nthat my session is still initializing.\n\n74\n00:03:34.830 --> 00:03:37.850\nI'm not actually communicating with it,\nokay?\n\n75\n00:03:37.850 --> 00:03:42.460\nSo when I reach out to it,\nit's got this little tilde to the left.\n\n76\n00:03:42.460 --> 00:03:46.930\nAnd if I scroll over here, I can see that\nthe tilde says that I'm configured, right,\n\n77\n00:03:46.930 --> 00:03:49.610\nbut I'm not selected or a candidate.\n\n78\n00:03:49.610 --> 00:03:53.420\nI'm not getting a lot of good data\nfrom there really at all, all right?\n\n79\n00:03:53.420 --> 00:03:56.530\nSo, that's not necessarily a good sign.\n\n80\n00:03:56.530 --> 00:03:58.890\nI've got this host,\nI know that's who I'm talking to, but\n\n81\n00:03:58.890 --> 00:04:00.990\nit doesn't look like I'm\nactually communicating.\n\n82\n00:04:00.990 --> 00:04:02.880\nNow, I could test and\nsee if I can get to it.\n\n83\n00:04:02.880 --> 00:04:06.160\nI'll do a quick ping,\nwe'll see if I can even ping that guy.\n\n84\n00:04:06.160 --> 00:04:10.310\nAnd when I go and ping,\nI don't get there, right?\n\n85\n00:04:10.310 --> 00:04:13.120\nOr well, let's wait, okay, sometimes\nyou lose that first ping just for\n\n86\n00:04:13.120 --> 00:04:14.870\nthe ARP broadcast, so\nI'll just wait a second.\n\n87\n00:04:14.870 --> 00:04:16.510\nBut this time it's failing.\n\n88\n00:04:16.510 --> 00:04:17.200\nI can't ping it.\n\n89\n00:04:17.200 --> 00:04:22.113\nNow, be careful with this, because\nthe ping could be being blocked by an ACL,\n\n90\n00:04:22.113 --> 00:04:24.578\nand NTP's working just fine, right?\n\n91\n00:04:24.578 --> 00:04:27.259\nSo pings aren't always a guarantee,\nbut it's a great way to test,\n\n92\n00:04:27.259 --> 00:04:29.766\nat least basically, whether or\nnot you're able to get there.\n\n93\n00:04:29.766 --> 00:04:31.046\nAnd I'm not getting there.\n\n94\n00:04:31.046 --> 00:04:38.460\nIf I do a show ip route for 192.168.12.55,\nI can see if I even have a route.\n\n95\n00:04:38.460 --> 00:04:40.880\nI do have a route, oh,\nit's actually a really good route.\n\n96\n00:04:40.880 --> 00:04:42.610\nKnown via connected.\n\n97\n00:04:42.610 --> 00:04:44.750\nI'm directly plugged into\nthe 192.168.12 network, so\n\n98\n00:04:44.750 --> 00:04:48.860\nthat tells me I'm not\ndealing with a routing issue.\n\n99\n00:04:48.860 --> 00:04:52.800\nAnd if I am dealing with an ACL,\nit's either on me or on that host, and\n\n100\n00:04:52.800 --> 00:04:54.770\nif it's a time server,\nit probably doesn't have an ACL.\n\n101\n00:04:54.770 --> 00:04:59.550\nSo in this case, I really just ruled out\nseveral different possible problems there\n\n102\n00:04:59.550 --> 00:05:03.580\non the routing side, because I'm\ndirectly plugged into that network, so\n\n103\n00:05:03.580 --> 00:05:07.060\nI should be able to get to\nthat host right, but I can't.\n\n104\n00:05:07.060 --> 00:05:09.070\nNow, why not?\n\n105\n00:05:09.070 --> 00:05:10.730\nWell let's check somebody else right.\n\n106\n00:05:10.730 --> 00:05:13.150\nWe saw NYCORE2 was\nsynchronizing just fine.\n\n107\n00:05:13.150 --> 00:05:16.970\nSo if I jump over to NYCORE2, this guy,\n\n108\n00:05:16.970 --> 00:05:21.659\nwell I can do a quick\nshow ntp associations.\n\n109\n00:05:22.750 --> 00:05:28.700\nAnd when I do that, I can see that\nit's got 192.168.12.5 set up.\n\n110\n00:05:28.700 --> 00:05:32.640\nAnd instead of having the init like it\nwas initializing, it shows that I've got\n\n111\n00:05:32.640 --> 00:05:36.510\na local reference clock, that I'm actually\nfunctioning here, that I'm communicating.\n\n112\n00:05:36.510 --> 00:05:40.630\nI've got a delay and\nan offset listed off to the side here.\n\n113\n00:05:40.630 --> 00:05:42.180\nI'm communicating with this one.\n\n114\n00:05:42.180 --> 00:05:45.240\nAnd I don't just have a tilde over here,\nI also have an asterisk,\n\n115\n00:05:45.240 --> 00:05:47.400\nwhich tells me I've got a system here.\n\n116\n00:05:47.400 --> 00:05:50.750\nI've peered with the system,\nI'm communicating, and\n\n117\n00:05:50.750 --> 00:05:52.460\nI'm getting that time, right?\n\n118\n00:05:52.460 --> 00:05:53.420\nI know it's working.\n\n119\n00:05:53.420 --> 00:05:56.170\nOn the other side it's not, right?\n\n120\n00:05:56.170 --> 00:05:58.402\nWell you might have already\nnoticed the problem here,\n\n121\n00:05:58.402 --> 00:06:00.158\nit's a different IP address, isn't it?\n\n122\n00:06:00.158 --> 00:06:03.238\nThis guy's not peered with 192.168.12.55.\n\n123\n00:06:03.238 --> 00:06:05.038\nIn fact, I bet the host doesn't exist.\n\n124\n00:06:05.038 --> 00:06:09.796\nWe're probably just dealing with\nthe wrong IP and let's see, wait for\n\n125\n00:06:09.796 --> 00:06:11.700\nthat first one, and yeah.\n\n126\n00:06:11.700 --> 00:06:12.660\nSo, we're not getting there.\n\n127\n00:06:12.660 --> 00:06:15.970\nSo more than likely this is just\nas simple as having the wrong IP.\n\n128\n00:06:15.970 --> 00:06:18.780\nIf I set the other one to .5\nit will probably be fine.\n\n129\n00:06:18.780 --> 00:06:21.090\nThis one is already set to .5,\nthat's why it's working.\n\n130\n00:06:21.090 --> 00:06:23.570\nSo, if I change that IP,\nwe'll probably be in business.\n\n131\n00:06:23.570 --> 00:06:25.630\nNow, let's say that wasn't the case.\n\n132\n00:06:25.630 --> 00:06:29.470\nLet's say that this was actually\na little bit harder than a wrong IP.\n\n133\n00:06:29.470 --> 00:06:33.398\nWell, there's other commands we can use to\ntroubleshoot NTP which are pretty handy.\n\n134\n00:06:33.398 --> 00:06:37.506\nSo for example, while I've got this one\nconfigured wrong before I can fix it,\n\n135\n00:06:37.506 --> 00:06:40.068\nif we do something like show ntp status,\nright?\n\n136\n00:06:40.068 --> 00:06:46.450\nShow ntp status will let us see\nwhat our reference time is.\n\n137\n00:06:46.450 --> 00:06:49.350\nAnd, if you're communicating with an NTP\nserver, you will have a time there.\n\n138\n00:06:49.350 --> 00:06:52.995\nIf it's all zeroes, like mine, then you're\nnot communicating with an NTP server.\n\n139\n00:06:52.995 --> 00:06:55.495\nSo that's a good way to spot that and\nkind of see.\n\n140\n00:06:55.495 --> 00:06:58.915\nAnd also down here I've got this\nsystem poll interval is 64,\n\n141\n00:06:58.915 --> 00:07:02.975\nnever updated, so\nI'm not really communicating with anybody.\n\n142\n00:07:02.975 --> 00:07:06.855\nBut even outside from that,\nwe could use debugs, right?\n\n143\n00:07:06.855 --> 00:07:09.565\nSo there's several NTP debugs you can do.\n\n144\n00:07:09.565 --> 00:07:11.975\nI usually do debug NTP packet.\n\n145\n00:07:11.975 --> 00:07:14.950\nThat's a great way just to see the packet\ncommunications that are happening.\n\n146\n00:07:14.950 --> 00:07:19.270\nBut you could do debug NTP all, and\nsee everything that's going on.\n\n147\n00:07:19.270 --> 00:07:24.420\nBut if I do a debug ntp packet,\nit's gonna start that debug,\n\n148\n00:07:24.420 --> 00:07:29.010\nand when my system goes to send out those\nchecks, they're trying to send it out to\n\n149\n00:07:29.010 --> 00:07:32.120\nthat other host, and I would see\nthat I never get a response back.\n\n150\n00:07:32.120 --> 00:07:34.460\nAnd this one's gonna just sit\nhere idle for the most part.\n\n151\n00:07:34.460 --> 00:07:36.890\nSo, let me undebug that.\n\n152\n00:07:36.890 --> 00:07:39.580\nBut that's another command that you\ncan use that's pretty useful for\n\n153\n00:07:39.580 --> 00:07:40.480\ntroubleshooting this.\n\n154\n00:07:40.480 --> 00:07:43.310\nBut I'm pretty certain here that\nI just happen to have a wrong IP.\n\n155\n00:07:43.310 --> 00:07:47.520\nSo if we take a look at that\ncommand that we had before,\n\n156\n00:07:47.520 --> 00:07:51.680\nlet me get that show\nrunning-config back up.\n\n157\n00:07:51.680 --> 00:07:53.728\nI'm gonna take that other server out.\n\n158\n00:07:53.728 --> 00:08:00.868\nSo I'll do a no ntp server 192.168.12.55,\nand then I'll put the new one in.\n\n159\n00:08:03.478 --> 00:08:04.730\nThere we go.\n\n160\n00:08:04.730 --> 00:08:07.850\nAnd as soon as we do that we should\nstart talking to it in the background.\n\n161\n00:08:07.850 --> 00:08:12.379\nAnd if I do a show ntp associations,\n\n162\n00:08:14.250 --> 00:08:16.880\nI can see I'm still initializing\nI still have that tilde.\n\n163\n00:08:16.880 --> 00:08:18.060\nI need to wait for it communicate.\n\n164\n00:08:18.060 --> 00:08:20.130\nI guess I could ping it and\nmake sure I can actually get there.\n\n165\n00:08:21.450 --> 00:08:23.750\nAnd I can, so\nI'm gonna give that just a moment.\n\n166\n00:08:23.750 --> 00:08:26.560\nIt's not necessarily the fastest\nthing in the planet.\n\n167\n00:08:26.560 --> 00:08:28.950\nSo we have to give it some time,\nit can take 30 seconds,\n\n168\n00:08:28.950 --> 00:08:30.830\neven 60 seconds in some cases.\n\n169\n00:08:30.830 --> 00:08:36.300\nAnd I guess we could be doing like a debug\nNTP all right now, and see that happen.\n\n170\n00:08:36.300 --> 00:08:39.080\nBut basically, it's gonna reach out and\nstart to sync with that host, and\n\n171\n00:08:39.080 --> 00:08:40.920\nthere we go, I'm starting to\nsee some traffic going on here.\n\n172\n00:08:40.920 --> 00:08:42.200\nI'm receiving that communication,\n\n173\n00:08:42.200 --> 00:08:46.450\nand then that last line right here\ntelling me clock is synchronized, right?\n\n174\n00:08:46.450 --> 00:08:50.820\nSo it just happened and\nnow if I do a show ntp associations,\n\n175\n00:08:52.350 --> 00:08:54.530\nI can see that I've got a reference clock.\n\n176\n00:08:54.530 --> 00:08:59.560\nAnd I've got that asterisk over to\nthe side so that I'm peered, and\n\n177\n00:08:59.560 --> 00:09:04.280\nshow ntp status, I can see that I actually\nhave that reference time filled in,\n\n178\n00:09:04.280 --> 00:09:07.740\nit's not all zeroes, and\nI can see that system poll interval,\n\n179\n00:09:07.740 --> 00:09:11.240\nlast update was 23 seconds ago,\nso I know I'm communicating.\n\n180\n00:09:11.240 --> 00:09:13.858\nAnd if I do a show clock, there we go.\n\n181\n00:09:13.858 --> 00:09:16.318\nNovember 24th, 2015, all right?\n\n182\n00:09:16.318 --> 00:09:19.593\nSo this one turned out to be really easy,\nit was just a bad IP address,\n\n183\n00:09:19.593 --> 00:09:23.060\nwrong NPT server defined, but\nbe aware of the things it could have been.\n\n184\n00:09:23.060 --> 00:09:26.470\nIt could have been routing issues,\ncould have been access control lists,\n\n185\n00:09:26.470 --> 00:09:29.550\ncould have been a number of other things\nlike that, so that's why I wanted to make\n\n186\n00:09:29.550 --> 00:09:31.470\nsure I showed you guys some of\nthe other commands, the debugs,\n\n187\n00:09:31.470 --> 00:09:34.660\nthings you might bump into, but this one\nturned out to be pretty straightforward.\n\n188\n00:09:34.660 --> 00:09:36.230\nSo that one is all wrapped up.\n\n189\n00:09:36.230 --> 00:09:37.808\nAll right, well,\nI hope you guys enjoyed that one.\n\n190\n00:09:37.808 --> 00:09:40.708\nStay tuned,\nwe've got more troubleshooting coming up.\n\n191\n00:09:40.708 --> 00:09:48.274\n[SOUND]\n\n",
          "vimeoId": "149150841"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #6` from set #2. The trouble ticket states that \"You are unable to ping 172.14.0.2 from PLABCSCO01 \"",
          "length": "912",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-2-6-112415-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-2-6-112415-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-2-6-112415-1-sm.jpg",
          "title": "Set 2 Issue 6",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:04.837\n[SOUND] All right welcome back to\n\n2\n00:00:04.837 --> 00:00:10.240\ntroubleshooting set number two.\n\n3\n00:00:10.240 --> 00:00:12.330\nWe're moving onto issue number six.\n\n4\n00:00:12.330 --> 00:00:14.320\nAnd we've got another reachability issue.\n\n5\n00:00:14.320 --> 00:00:16.620\nReachability issues are common\non the exam because.\n\n6\n00:00:16.620 --> 00:00:18.290\nThey can be caused by\nany number of things so\n\n7\n00:00:18.290 --> 00:00:20.170\nit really makes you have to work hard for\nit.\n\n8\n00:00:20.170 --> 00:00:25.290\nFor this one, the way the problem reads,\nit says, from our PLAB Cisco 01 server,\n\n9\n00:00:25.290 --> 00:00:28.259\nwe're unable to ping 172.14.0.2.\n\n10\n00:00:28.259 --> 00:00:31.780\nNow that IP address is new to me, so\n\n11\n00:00:31.780 --> 00:00:33.770\nI don't really know who\nwe're trying to ping there.\n\n12\n00:00:33.770 --> 00:00:37.120\nSo let's start by looking\nat our network diagram.\n\n13\n00:00:37.120 --> 00:00:40.600\nAnd looking at my network diagram,\nI know that that server,\n\n14\n00:00:40.600 --> 00:00:45.880\nthe server in question is this guy\ndown here, 192.168.16.10, right?\n\n15\n00:00:45.880 --> 00:00:47.170\nThat's our server.\n\n16\n00:00:47.170 --> 00:00:49.020\nAnd that in my LAN,\n\n17\n00:00:49.020 --> 00:00:53.120\nall of my IPs are really 192.168\ndot something dot something.\n\n18\n00:00:53.120 --> 00:00:58.083\nAnd here they're telling me I'm trying to\nping 172.14 dot something dot something,\n\n19\n00:00:58.083 --> 00:00:59.120\nor 14.0.2.\n\n20\n00:00:59.120 --> 00:01:02.270\nSo, I need to look around on my diagram,\nand\n\n21\n00:01:02.270 --> 00:01:04.800\nsee if I can't spot that network anywhere.\n\n22\n00:01:04.800 --> 00:01:09.970\nAnd I know I've got 16.16 there,\ngot some public networks over here.\n\n23\n00:01:09.970 --> 00:01:13.040\nSome public networks over here,\nwhich I'm just scanning real quickly.\n\n24\n00:01:13.040 --> 00:01:15.480\nAnd oh, there we go.\n\n25\n00:01:15.480 --> 00:01:18.610\nHere's 172.14.0.4.\n\n26\n00:01:18.610 --> 00:01:24.060\nSo it looks like this ISP here is on\nthat network, and our other ISP is also.\n\n27\n00:01:24.060 --> 00:01:26.880\nSo our these guys are 172.14.0.3 and 0.4.\n\n28\n00:01:26.880 --> 00:01:32.160\nSo, there's a host out here on\nthis network that's 172.14.0.2 and\n\n29\n00:01:32.160 --> 00:01:33.610\nwe're unable to ping it.\n\n30\n00:01:33.610 --> 00:01:36.806\nNow it was important for me to find that\nbecause I need to understand the path that\n\n31\n00:01:36.806 --> 00:01:38.290\nI'm gonna follow, right?\n\n32\n00:01:38.290 --> 00:01:43.280\nMy server is gonna go to these switches,\nhit the switches, probably get routed\n\n33\n00:01:43.280 --> 00:01:47.140\nto EDGE2, but it's possible that I could\ngo to EDGE1 first and then over to EDGE2.\n\n34\n00:01:47.140 --> 00:01:49.300\nAnd then up to this network up here.\n\n35\n00:01:49.300 --> 00:01:52.475\nAnd with any luck,\nthat IP might even be assigned to EDGE2.\n\n36\n00:01:52.475 --> 00:01:54.445\nIf it is, that's good,\ncuz we have control of it.\n\n37\n00:01:54.445 --> 00:01:56.865\nIf it's a host out here,\nwe don't have control over it, right?\n\n38\n00:01:56.865 --> 00:01:58.415\nSo we always have to\nkinda be aware of that.\n\n39\n00:01:58.415 --> 00:02:00.775\nSo, let's actually verify it real quick.\n\n40\n00:02:00.775 --> 00:02:03.775\nLet's go see what IP address EDGE2 has,\nand that'll help us out.\n\n41\n00:02:03.775 --> 00:02:05.135\nSo, I'm gonna jump over to EDGE2.\n\n42\n00:02:06.515 --> 00:02:12.210\nAnd on this one, I'm just gonna do\na real quick, show IP interface brief.\n\n43\n00:02:13.240 --> 00:02:15.780\nAnd you'll see what IP it is,\nit has assignment, there we go.\n\n44\n00:02:15.780 --> 00:02:16.520\nWinner.\n\n45\n00:02:16.520 --> 00:02:17.270\nWe've got 172.14.0.2.\n\n46\n00:02:17.270 --> 00:02:20.510\nAssigned right here to EDGE2.\n\n47\n00:02:20.510 --> 00:02:22.910\nSo on my server\n\n48\n00:02:22.910 --> 00:02:27.430\nI'm not able to ping what's affectively\nthe WAN interface of this router.\n\n49\n00:02:27.430 --> 00:02:30.130\nAll right, so that's what they're\ntelling me and we can verify that.\n\n50\n00:02:30.130 --> 00:02:32.770\nJust by jumping over to the server.\n\n51\n00:02:32.770 --> 00:02:33.900\nAnd giving that a shot, right.\n\n52\n00:02:33.900 --> 00:02:36.610\nSo I can try and ping 172.14.0.2.\n\n53\n00:02:36.610 --> 00:02:42.500\nAnd there we go, destination unreachable.\n\n54\n00:02:42.500 --> 00:02:46.910\nNow, I'm glad I did that ping and\nI haven't even done a traceroute yet.\n\n55\n00:02:46.910 --> 00:02:51.740\nI'm glad I did this ping though because\nlook at the error message I got back.\n\n56\n00:02:51.740 --> 00:02:54.850\nI got a destination host unreachable,\nand I got it from 192.168.16.3.\n\n57\n00:02:54.850 --> 00:02:59.570\nNow if you remember from\nthe earlier questions,\n\n58\n00:02:59.570 --> 00:03:05.745\nmy default gateway is 192.168.16.1.\n\n59\n00:03:05.745 --> 00:03:10.360\nAnd .16.1 is the HSRP address.\n\n60\n00:03:10.360 --> 00:03:13.980\nIt's shared between New York CORE1 and\nNew York CORE2.\n\n61\n00:03:13.980 --> 00:03:16.492\nAnd I got that destination\nunreachable from CORE2.\n\n62\n00:03:16.492 --> 00:03:18.590\nSo CORE2 is the active one for\n\n63\n00:03:18.590 --> 00:03:22.620\nthat HSRP cluster and I'm getting\nthe destination unreachable from the hit.\n\n64\n00:03:22.620 --> 00:03:26.790\nSo that means that this problem\nis not limited just to my server.\n\n65\n00:03:26.790 --> 00:03:30.550\nThat the problem also extends\nout to my core switches.\n\n66\n00:03:30.550 --> 00:03:32.530\nSo my core switches\ncan't get there either.\n\n67\n00:03:32.530 --> 00:03:34.540\nSo that's a good indicator of a problem.\n\n68\n00:03:34.540 --> 00:03:38.740\nThe core switches are routing so let's\ngo see if it even has a routing table.\n\n69\n00:03:38.740 --> 00:03:41.860\nThis could be ACLs or whatever but\nwhen you get destination unreachable.\n\n70\n00:03:41.860 --> 00:03:43.390\nIt's usually a routing table issue.\n\n71\n00:03:43.390 --> 00:03:45.190\nI don't have route to get there so\n\n72\n00:03:45.190 --> 00:03:47.065\nthe destination is unreachable,\nI don't have a way.\n\n73\n00:03:47.065 --> 00:03:48.040\nRight?\n\n74\n00:03:48.040 --> 00:03:49.990\nSo let's go take a look at\nCORE2s routing table and\n\n75\n00:03:49.990 --> 00:03:51.060\nget an idea of what's happening there.\n\n76\n00:03:53.370 --> 00:03:55.960\nAll right so I'm gonna jump over to CORE2.\n\n77\n00:03:55.960 --> 00:03:57.716\nAnd let me just zoom in\non this a little bit.\n\n78\n00:03:57.716 --> 00:04:04.080\nAll right so\nI'm just gonna do a show IP route.\n\n79\n00:04:05.190 --> 00:04:08.680\nAnd punch in the IP that I'm\ntrying to get to 172.14.0.2.\n\n80\n00:04:08.680 --> 00:04:12.140\nSo I'm doing a show IP route\ninstead of just a ping.\n\n81\n00:04:12.140 --> 00:04:14.010\nBecause with a ping an ACL can block it.\n\n82\n00:04:14.010 --> 00:04:14.620\nBut show ip route.\n\n83\n00:04:14.620 --> 00:04:16.440\nI just wanna look at the routing table.\n\n84\n00:04:16.440 --> 00:04:17.590\nShow me what you want to do.\n\n85\n00:04:17.590 --> 00:04:18.820\nYou don't actually have to do it.\n\n86\n00:04:18.820 --> 00:04:21.632\nNow when I run that network not in table.\n\n87\n00:04:21.632 --> 00:04:26.200\nAll right now it's easy to look at\nthat and say well I can't get there.\n\n88\n00:04:26.200 --> 00:04:28.789\nRight?\nBut you'll get network not in table.\n\n89\n00:04:28.789 --> 00:04:33.110\nEven if you have a default route,\na gateway of last resort to find.\n\n90\n00:04:33.110 --> 00:04:36.060\nSo it's possible I have a gateway\nof last resort that would work here\n\n91\n00:04:36.060 --> 00:04:38.520\neven though I don't have\na route in the table.\n\n92\n00:04:38.520 --> 00:04:42.420\nSo I'm gonna do a show IP route just to\nsee if I have a gateway of last resort.\n\n93\n00:04:42.420 --> 00:04:43.090\nAnd I don't.\n\n94\n00:04:43.090 --> 00:04:43.690\nRight?\nSo that's it.\n\n95\n00:04:43.690 --> 00:04:46.440\nSo I don't have a default gateway or\na default route.\n\n96\n00:04:46.440 --> 00:04:48.080\nI have to have in route on\nthe table to get there.\n\n97\n00:04:48.080 --> 00:04:49.740\nI don't have a route.\n\n98\n00:04:49.740 --> 00:04:52.968\nTo get to 172.14.0.\n\n99\n00:04:52.968 --> 00:04:53.663\nWhatever.\n\n100\n00:04:53.663 --> 00:04:57.662\nSo without a route I'm not gonna get there\nthat's more than likely what my problem is\n\n101\n00:04:57.662 --> 00:04:58.190\ngonna be.\n\n102\n00:04:58.190 --> 00:05:03.490\nNow looking at the diagram I'm supposed\nto be running RIP Version 2 in\n\n103\n00:05:03.490 --> 00:05:08.900\nbetween NYWAN1, NYEDGE2 And NYCORE2.\n\n104\n00:05:08.900 --> 00:05:11.200\nThese three guys are supposed\nto be running RIP, and\n\n105\n00:05:11.200 --> 00:05:13.840\nthey should be exchanging routes.\n\n106\n00:05:13.840 --> 00:05:18.320\nIf NYEDGE2 is directly plugged\ninto the 172.14 network.\n\n107\n00:05:18.320 --> 00:05:21.190\nIt should be sharing\nthat to CORE2 via RIP.\n\n108\n00:05:21.190 --> 00:05:22.225\nBut that's not happening.\n\n109\n00:05:22.225 --> 00:05:22.810\nRight.\n\n110\n00:05:22.810 --> 00:05:25.420\nIn fact, is it sharing anything via RIP?\n\n111\n00:05:25.420 --> 00:05:27.050\nI don't know, let's find out.\n\n112\n00:05:27.050 --> 00:05:29.410\nFirst off I need to know what\nthe internal IP of EDGE2 is.\n\n113\n00:05:29.410 --> 00:05:32.227\nLIke, what is the IP on GI0/0,\nI wanna know that, and\n\n114\n00:05:32.227 --> 00:05:35.360\nthen we'll see what routes\nare coming across from it.\n\n115\n00:05:35.360 --> 00:05:37.965\nSo, I'm gonna jump over to EDGE2.\n\n116\n00:05:37.965 --> 00:05:45.150\nAnd on EDGE2, that GI00 is 192.168.12.5.\n\n117\n00:05:45.150 --> 00:05:48.271\nNow I wanted to know that because that's\nletting me know that it's on VLAN12.\n\n118\n00:05:48.271 --> 00:05:50.750\nAnd I need to make sure I've\ngot VLAN12 connectivity.\n\n119\n00:05:50.750 --> 00:05:51.760\nRemember RIP.\n\n120\n00:05:51.760 --> 00:05:55.460\nRIP just broadcasts, or it's version\ntwo here, so it multicasts, right?\n\n121\n00:05:55.460 --> 00:06:00.050\nBut a multicast won't cross between VLANs\nunless we have that set to forward.\n\n122\n00:06:00.050 --> 00:06:01.710\nSo this is on VLAN12.\n\n123\n00:06:01.710 --> 00:06:04.950\nI need to make sure that CORE2\nis listening on VLAN12 also.\n\n124\n00:06:04.950 --> 00:06:08.270\nI'm trying to build this network map out\na little more than what they gave me.\n\n125\n00:06:09.490 --> 00:06:10.710\nAll right, so, I've got that information.\n\n126\n00:06:10.710 --> 00:06:14.170\nAnd, heck, while I'm in here, I can\nsee if I even have that route, right?\n\n127\n00:06:14.170 --> 00:06:15.370\nWe've got that network.\n\n128\n00:06:15.370 --> 00:06:16.870\nWell, we have to have that route.\n\n129\n00:06:16.870 --> 00:06:17.860\nWe're directly plugged into it.\n\n130\n00:06:17.860 --> 00:06:18.780\nThat is us.\n\n131\n00:06:18.780 --> 00:06:20.320\nObviously, we're gonna\nbe able to get there.\n\n132\n00:06:20.320 --> 00:06:20.850\nIt is us.\n\n133\n00:06:20.850 --> 00:06:23.800\nThe interface is up, so\nI don't even really have to look for that.\n\n134\n00:06:23.800 --> 00:06:28.939\nAll right, so, let's jump into CORE2 and\nverify that it's on VLAN12.\n\n135\n00:06:30.410 --> 00:06:37.430\nAnd so on this guy, I'm gonna do just\nthat quick, show ip interface brief.\n\n136\n00:06:39.110 --> 00:06:41.620\nAnd I'll exclude\nthe unassigned interfaces.\n\n137\n00:06:41.620 --> 00:06:43.920\nAnd I'm looking for VLAN12, there we go.\n\n138\n00:06:43.920 --> 00:06:44.770\nSo I'm on VLAN12, 192.168.12.3.\n\n139\n00:06:44.770 --> 00:06:49.840\nAnd I'm gonna test my connectivity.\n\n140\n00:06:49.840 --> 00:06:52.846\nTo that edge router which was .5.\n\n141\n00:06:52.846 --> 00:06:55.650\nand I can get there so\nI'm good communications wise, right?\n\n142\n00:06:55.650 --> 00:06:59.670\nSo that's telling me back\non my diagram I am able to\n\n143\n00:06:59.670 --> 00:07:02.660\ncommunicate across this line\nin between these two systems.\n\n144\n00:07:02.660 --> 00:07:06.160\nSo assuming that RIP is configured\nright we should be exchanging routes.\n\n145\n00:07:06.160 --> 00:07:07.510\nAnd I should be getting a route.\n\n146\n00:07:07.510 --> 00:07:09.488\nBut I'm not, it's not on my routing table.\n\n147\n00:07:09.488 --> 00:07:11.326\nWhy not?\n\n148\n00:07:11.326 --> 00:07:15.010\nWell keep in mind when a route doesn't\nmake it into your routing table it can be\n\n149\n00:07:15.010 --> 00:07:16.580\na number of different things.\n\n150\n00:07:16.580 --> 00:07:20.310\nIt can be ACLs,\nit can be route maps, prefix lists.\n\n151\n00:07:20.310 --> 00:07:25.920\nIt can be routing metrics, administrative\ndistance, maximum hop count, there's\n\n152\n00:07:25.920 --> 00:07:29.380\na ton of things that can stop a route\nfrom making it into your routing table.\n\n153\n00:07:29.380 --> 00:07:31.000\nBut before we jump into\nthe complex things,\n\n154\n00:07:31.000 --> 00:07:32.610\nthere's some basic\nthings that it could be.\n\n155\n00:07:32.610 --> 00:07:33.660\nBe an interface being down.\n\n156\n00:07:33.660 --> 00:07:36.250\nThat's why I did that ping,\ncan I even communicate?\n\n157\n00:07:36.250 --> 00:07:36.820\nRight?\n\n158\n00:07:36.820 --> 00:07:38.780\nIt could be a misconfiguration.\n\n159\n00:07:38.780 --> 00:07:41.940\nNow, there's not a lot of\nRIP to configure, right?\n\n160\n00:07:41.940 --> 00:07:44.600\nWith OSPF, maybe we have mismatched areas.\n\n161\n00:07:44.600 --> 00:07:48.050\nWith EIGRP, maybe we have summary routes,\nor bad AS numbers.\n\n162\n00:07:48.050 --> 00:07:49.130\nThings like that.\n\n163\n00:07:49.130 --> 00:07:52.700\nBut in RIP, you really just turn it on and\nyou set some interfaces.\n\n164\n00:07:52.700 --> 00:07:54.580\nWe could have some passive interfaces,\nright?\n\n165\n00:07:54.580 --> 00:07:57.220\nThese interfaces are up and\nmaybe they're passive, right?\n\n166\n00:07:57.220 --> 00:07:58.550\nThat could cause this problem.\n\n167\n00:07:58.550 --> 00:08:01.180\nSo I need to verify my RIP\nconfiguration [COUGH].\n\n168\n00:08:01.180 --> 00:08:02.890\nAnd get in here and\nverify this is gonna work.\n\n169\n00:08:02.890 --> 00:08:04.420\nNow before I do that.\n\n170\n00:08:05.450 --> 00:08:08.790\nMy problem is that CORE2\nis missing some routes.\n\n171\n00:08:08.790 --> 00:08:11.340\nAnd one of the things that I like to do.\n\n172\n00:08:11.340 --> 00:08:14.140\nIs if I'm gonna fix the problem,\nI wanna know when it works.\n\n173\n00:08:14.140 --> 00:08:16.200\nI wanna know when those routes show up,\nand so\n\n174\n00:08:16.200 --> 00:08:19.080\nthere's a little debug command we can run,\ndebug IP routing.\n\n175\n00:08:19.080 --> 00:08:23.725\nAnd what it does is it says any\ntime that a route goes in or\n\n176\n00:08:23.725 --> 00:08:26.010\ncomes out of the routing\ntable we get a message.\n\n177\n00:08:26.010 --> 00:08:28.210\nAnd I like to run that\nbefore I get started just so\n\n178\n00:08:28.210 --> 00:08:29.540\nI can see when I've fixed the problem.\n\n179\n00:08:29.540 --> 00:08:31.650\nSo, I'm gonna do that on CORE2.\n\n180\n00:08:31.650 --> 00:08:36.068\nSo I'm gonna jump back over to CORE2.\n\n181\n00:08:36.068 --> 00:08:40.532\nAnd I'm just gonna run debug ip routing.\n\n182\n00:08:40.532 --> 00:08:41.210\nRight?\n\n183\n00:08:41.210 --> 00:08:43.110\nAnd now anytime a route gets added or\n\n184\n00:08:43.110 --> 00:08:46.040\nremoved from the routing table I'll see\na message about it, and so that cool,\n\n185\n00:08:46.040 --> 00:08:48.410\nthat's gonna let me know\nwhen I've fixed the problem.\n\n186\n00:08:48.410 --> 00:08:52.239\nThen I'm gonna do a show run or\nshow running-config.\n\n187\n00:08:52.239 --> 00:08:55.110\nAnd I wanna view the section for RIP.\n\n188\n00:08:55.110 --> 00:08:56.620\nAll right?\n\n189\n00:08:56.620 --> 00:08:58.580\nAnd so when I run that, there we go.\n\n190\n00:08:58.580 --> 00:09:01.850\nI can see my RIP configuration,\nI see router rip version 2.\n\n191\n00:09:01.850 --> 00:09:03.870\nAnd I see a bunch of\nnetworks that are added.\n\n192\n00:09:03.870 --> 00:09:07.034\nNow, on this guy,\nI need it to learn rip routes.\n\n193\n00:09:07.034 --> 00:09:07.708\nFrom the EDGE router.\n\n194\n00:09:07.708 --> 00:09:10.510\nAnd the EDGE router we saw\nwas on 192.168.12, and\n\n195\n00:09:10.510 --> 00:09:13.040\nI've got that network added in.\n\n196\n00:09:13.040 --> 00:09:15.700\nSo technically that's\nthe only line I care about.\n\n197\n00:09:15.700 --> 00:09:17.265\nI don't really care\nabout these other lines.\n\n198\n00:09:17.265 --> 00:09:20.360\nCuz I'm just trying to learn\nfrom that one EDGE router for\n\n199\n00:09:20.360 --> 00:09:21.880\nthe sake of this troubleshooting question.\n\n200\n00:09:21.880 --> 00:09:23.350\nSo I've got it.\n\n201\n00:09:23.350 --> 00:09:25.390\nRip is set for version two.\n\n202\n00:09:25.390 --> 00:09:28.110\nThere's not really much\nelse to do on that.\n\n203\n00:09:28.110 --> 00:09:29.710\nIt seems to be right.\n\n204\n00:09:29.710 --> 00:09:31.820\nI don't have any passive\ninterfaces to find.\n\n205\n00:09:31.820 --> 00:09:34.930\nI guess I could be overriding\nsomething on the interface itself, so\n\n206\n00:09:34.930 --> 00:09:37.690\nlet's take a look there,\njust to be on the safe side.\n\n207\n00:09:37.690 --> 00:09:39.420\nAnd, nope, no RIP commands.\n\n208\n00:09:39.420 --> 00:09:41.920\nCuz there are interface RIP\ncommands that you can run.\n\n209\n00:09:41.920 --> 00:09:42.990\nIn this case they are not set.\n\n210\n00:09:42.990 --> 00:09:45.170\nI don't have any crazy route maps.\n\n211\n00:09:45.170 --> 00:09:46.820\nThis really looks simple.\n\n212\n00:09:46.820 --> 00:09:47.390\nAll right.\n\n213\n00:09:47.390 --> 00:09:48.840\nSo I think we're good here.\n\n214\n00:09:48.840 --> 00:09:49.990\nLet's go take a look at the other end.\n\n215\n00:09:51.370 --> 00:09:56.180\nIf I jump over to our other one\nwhich remember that's EDGE2 up here.\n\n216\n00:09:56.180 --> 00:09:59.160\nIf I jump up to EDGE2.\n\n217\n00:09:59.160 --> 00:10:01.690\nAnd kind of repeat that process, right.\n\n218\n00:10:01.690 --> 00:10:04.370\nNow in this guy, I'm not gonna bother\ndebugging it's routing table because it\n\n219\n00:10:04.370 --> 00:10:06.550\nalready has the route in question, right.\n\n220\n00:10:06.550 --> 00:10:08.650\nIt's directly plugged in so it has to.\n\n221\n00:10:08.650 --> 00:10:09.750\nWhen I look at it 172.\n\n222\n00:10:09.750 --> 00:10:14.230\nWoops.\n172.14, right there,\n\n223\n00:10:14.230 --> 00:10:16.860\nis always gonna be in it's routing\ntable unless the interface is down.\n\n224\n00:10:16.860 --> 00:10:20.295\nSo I don't need to run any\ncrazy debug to see that.\n\n225\n00:10:20.295 --> 00:10:20.951\nRight?\nBut\n\n226\n00:10:20.951 --> 00:10:23.310\nI do wanna verify it's RIP configuration.\n\n227\n00:10:23.310 --> 00:10:27.335\nSo I'm gonna do a show run, and\nI'll filter that for this section for RIP.\n\n228\n00:10:29.020 --> 00:10:30.840\nAnd here I've got it.\n\n229\n00:10:30.840 --> 00:10:32.090\nIt's gotten network 172.14.0.0.\n\n230\n00:10:32.090 --> 00:10:34.170\nSo that's the network I wanna learn.\n\n231\n00:10:34.170 --> 00:10:38.070\nAnd it's got 192.168.12.0, that where I\nwant it to advertise, so that looks good.\n\n232\n00:10:38.070 --> 00:10:41.050\nLooks like a good configuration, right?\n\n233\n00:10:42.220 --> 00:10:42.920\nAlmost.\n\n234\n00:10:42.920 --> 00:10:44.440\nYou've probably spotted it already.\n\n235\n00:10:44.440 --> 00:10:47.740\nThere was one command that was on\nthe other router that's not on this one.\n\n236\n00:10:47.740 --> 00:10:50.110\nAnd that command was version 2.\n\n237\n00:10:50.110 --> 00:10:53.850\nOkay this router is running in version 1.\n\n238\n00:10:53.850 --> 00:10:56.265\nThe other router is running in version 2.\n\n239\n00:10:56.265 --> 00:10:58.460\nNow why is that a problem?\n\n240\n00:10:58.460 --> 00:11:01.190\nWell there is actually a little bit\nof compatibility between the two.\n\n241\n00:11:01.190 --> 00:11:04.960\nBut version 1 uses\nbroadcast to communicate.\n\n242\n00:11:04.960 --> 00:11:08.170\nVersion 2 uses multicast to communicate.\n\n243\n00:11:08.170 --> 00:11:12.060\nEven communication mechanisms so\nthey probably don't see each other at all.\n\n244\n00:11:12.060 --> 00:11:16.730\nThe more than likely broadcasting and not\neven seeing each other because of that.\n\n245\n00:11:16.730 --> 00:11:21.230\nA show IP protocols would have turned off\nalso when you run show IP protocols and\n\n246\n00:11:21.230 --> 00:11:22.945\nit gives you a list of\nthe protocols you running.\n\n247\n00:11:22.945 --> 00:11:28.640\nhere's RIP and see you on my\ninterfaces I'm sending version 1.\n\n248\n00:11:28.640 --> 00:11:31.570\nAnd I'm set to receive version 1 and\nversion 2.\n\n249\n00:11:31.570 --> 00:11:34.220\nRight.\nAnd so that, sending version 1,\n\n250\n00:11:34.220 --> 00:11:36.620\nthat's how I could have spot for\nthat right here.\n\n251\n00:11:36.620 --> 00:11:40.920\nSo to fix this, I should just able to move\nto version 2, and we'll be in business.\n\n252\n00:11:40.920 --> 00:11:41.480\nRight.\nSo\n\n253\n00:11:41.480 --> 00:11:43.010\nlet's see if that's\ntake care of this here.\n\n254\n00:11:43.010 --> 00:11:46.560\nSo I'm gonna go to configuration and\nrouter rip and\n\n255\n00:11:46.560 --> 00:11:48.150\nI'll just throw in a version 2.\n\n256\n00:11:48.150 --> 00:11:49.050\nWhoops.\n\n257\n00:11:49.050 --> 00:11:50.230\nThere we go.\n\n258\n00:11:50.230 --> 00:11:52.620\nAnd now,\nI should be communicating the new way, and\n\n259\n00:11:52.620 --> 00:11:54.870\nI can do a show IP\nprotocols to verify that.\n\n260\n00:11:55.990 --> 00:11:58.850\nAnd now, what I should see,\nis that I'm sending version 2.\n\n261\n00:11:58.850 --> 00:12:03.120\nAnd see how, when I put myself into\nversion 2, what happened to my receives.\n\n262\n00:12:03.120 --> 00:12:05.750\nThey went to receive only version 2.\n\n263\n00:12:05.750 --> 00:12:06.650\nSo, on the other side,\n\n264\n00:12:06.650 --> 00:12:09.830\nit was only receiving version 2,\nwhen I was sending version 1.\n\n265\n00:12:09.830 --> 00:12:11.100\nIt was getting ignored.\n\n266\n00:12:11.100 --> 00:12:12.930\nSo we weren't communicating, right?\n\n267\n00:12:12.930 --> 00:12:15.880\nA debug ip rip probably would\nhave turned that up also.\n\n268\n00:12:15.880 --> 00:12:20.590\nYou can do, what is it,\ndebug ip rip, packets or events.\n\n269\n00:12:20.590 --> 00:12:21.410\nEvents.\n\n270\n00:12:21.410 --> 00:12:24.230\nDebug ip rip events probably\nwould have turned that up.\n\n271\n00:12:24.230 --> 00:12:25.690\nDebug ip packets would\nhave turned it up too,\n\n272\n00:12:25.690 --> 00:12:28.540\nbut it probably would have\nbeen way too much information.\n\n273\n00:12:28.540 --> 00:12:31.170\nWe found it without doing a debug, really.\n\n274\n00:12:31.170 --> 00:12:34.590\nNow I'm kind of stalling here\nbecause RIP runs on timers.\n\n275\n00:12:34.590 --> 00:12:37.240\nSo every 30 seconds it's\nsending out table updates.\n\n276\n00:12:37.240 --> 00:12:39.370\nSo I'm just waiting for\nthat 30 seconds to pass.\n\n277\n00:12:39.370 --> 00:12:41.630\nThe other side should learn about it and\nstart to learn the routes.\n\n278\n00:12:41.630 --> 00:12:45.020\nNow I am running debug IP\nrouting on the other side.\n\n279\n00:12:45.020 --> 00:12:48.545\nSo if those routes make it in the routing\ntable I should see them on debug messages.\n\n280\n00:12:48.545 --> 00:12:50.550\nWell, let's see if that happen.\n\n281\n00:12:50.550 --> 00:12:54.050\nSo I'm gonna jump over to the other side\nhere and take a look at New York CORE2.\n\n282\n00:12:54.050 --> 00:12:56.450\nAnd well this isn't what I wanted to see.\n\n283\n00:12:56.450 --> 00:12:58.100\nSo I left a debug running.\n\n284\n00:12:58.100 --> 00:12:59.340\nRight?\nIt was supposed to debug and\n\n285\n00:12:59.340 --> 00:13:01.690\ntell me when a route got\nadded to the routing table.\n\n286\n00:13:01.690 --> 00:13:03.080\nNothing has happened.\n\n287\n00:13:03.080 --> 00:13:05.190\nRight?\nIt's still just kinda sitting here and\n\n288\n00:13:05.190 --> 00:13:09.140\nmaybe I turned it on on the wrong switch,\nbut I was pretty sure I turned it on here.\n\n289\n00:13:09.140 --> 00:13:12.320\nLet's see.\nI've got IP routing turned on.\n\n290\n00:13:12.320 --> 00:13:15.010\nI'm probably not logging to console for\nthis one so\n\n291\n00:13:15.010 --> 00:13:16.160\nthat's probably why I'm not seeing it.\n\n292\n00:13:16.160 --> 00:13:17.790\nSo its too late to fix that.\n\n293\n00:13:17.790 --> 00:13:21.550\nIf you ever this, if you turn on\ndebugging and you don't get any messages.\n\n294\n00:13:21.550 --> 00:13:25.080\nIf your SSH or terminal end,\nremember that you need to run terminal\n\n295\n00:13:25.080 --> 00:13:28.080\nmonitor like that or\nyou won't see the commands.\n\n296\n00:13:28.080 --> 00:13:31.720\nBut I'm in the console and so the command\nI have to run is logging console and\n\n297\n00:13:31.720 --> 00:13:35.290\nyou do that from config, so it's turned\noff here but I'm not worried about it.\n\n298\n00:13:35.290 --> 00:13:37.780\nLet's take a look at the routing table and\nsee if that route made it.\n\n299\n00:13:37.780 --> 00:13:39.720\nI'm gonna do a show IP route.\n\n300\n00:13:39.720 --> 00:13:43.120\nAnd I'm gonna filter it to just\nshow me rip routes, right?\n\n301\n00:13:43.120 --> 00:13:44.650\nBecause that's all I care about.\n\n302\n00:13:44.650 --> 00:13:46.840\nAnd so I'm gonna go to show IP route rip.\n\n303\n00:13:46.840 --> 00:13:51.960\nAnd now I can see 172.14.0.0\nis in the routing table,\n\n304\n00:13:51.960 --> 00:13:54.640\nand that will most likely fix our problem.\n\n305\n00:13:54.640 --> 00:13:58.140\nSo if I try and ping out to that host,\nthat's who I couldn't get to, and\n\n306\n00:13:58.140 --> 00:14:01.770\nI do need to troubleshoot from my server,\ncuz that's where all this originated.\n\n307\n00:14:01.770 --> 00:14:03.200\nThis guy right here.\n\n308\n00:14:03.200 --> 00:14:04.430\nAnd so, I'm gonna jump back to it.\n\n309\n00:14:06.440 --> 00:14:09.736\nAnd I'm gonna repeat the ping\nthat started it all.\n\n310\n00:14:09.736 --> 00:14:13.916\nI'm gonna try and ping 172.14.0.2.\n\n311\n00:14:13.916 --> 00:14:15.193\nAnd now we can get there.\n\n312\n00:14:15.193 --> 00:14:15.797\nRight?\n\n313\n00:14:15.797 --> 00:14:20.430\nSo this problem blow down\nto RIP version mismatches.\n\n314\n00:14:20.430 --> 00:14:23.310\nIf somebody's set to RIP version 1 and\nsomebody else is set to RIP version 2.\n\n315\n00:14:23.310 --> 00:14:25.630\nThey're not going to communicate.\n\n316\n00:14:25.630 --> 00:14:28.172\nNow there was another way\nI could have solved this.\n\n317\n00:14:28.172 --> 00:14:32.390\nI could've set the version 2 router\nto accept version 1 messages or\n\n318\n00:14:32.390 --> 00:14:34.000\nI could have even\ndowngraded it to version 1.\n\n319\n00:14:34.000 --> 00:14:37.590\nBut in this case the easiest solution\nwas to move to version 2 which is\n\n320\n00:14:37.590 --> 00:14:38.230\npreferred, right.\n\n321\n00:14:38.230 --> 00:14:40.280\nWe always wanna deploy\nversion 2 if we can.\n\n322\n00:14:40.280 --> 00:14:41.630\nBecause it's classless.\n\n323\n00:14:42.730 --> 00:14:46.790\nRIP version 1 is classful and that can\ncause some other problems on the network.\n\n324\n00:14:46.790 --> 00:14:51.330\nSo going version 2 is the easiest solution\nhere and more than likely the correct one.\n\n325\n00:14:51.330 --> 00:14:54.360\nAll right, well that is another\ntroublingshooting issue under our belts.\n\n326\n00:14:54.360 --> 00:14:55.990\nThat one's wrapped up,\nturned out to be not so\n\n327\n00:14:55.990 --> 00:14:57.850\nbad once we tracked down the problem.\n\n328\n00:14:57.850 --> 00:15:00.290\nThe fixes usually are kinda\neasy at that point.\n\n329\n00:15:00.290 --> 00:15:01.630\nBut, hope you guys enjoyed it.\n\n330\n00:15:01.630 --> 00:15:05.824\nStay tuned, we've got more\ntroubleshooting issues coming up.\n\n331\n00:15:05.824 --> 00:15:10.153\n[SOUND]\n\n",
          "vimeoId": "149150818"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #7` from set #2. The trouble ticket states that \"You are unable to ping 100.10.10.10 which is a loopback interface on NYCORE1 from PLABCSCO01 \"",
          "length": "858",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-2-7-112415-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-2-7-112415-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-2-7-112415-1-sm.jpg",
          "title": "Set 2 Issue 7",
          "transcript": "WEBVTT\n\n1\n00:00:00.012 --> 00:00:04.924\n[SOUND] All right welcome\n\n2\n00:00:04.924 --> 00:00:09.593\nback to Set number 2.\n\n3\n00:00:09.593 --> 00:00:12.630\nWe're moving into the final issue\non this one, Issue number 7.\n\n4\n00:00:12.630 --> 00:00:14.830\nAnd well, wouldn't you know it,\n\n5\n00:00:14.830 --> 00:00:17.560\nlooks like our Cisco server is\nunable to ping an IP address.\n\n6\n00:00:17.560 --> 00:00:19.020\nCan this guy ping anybody?\n\n7\n00:00:19.020 --> 00:00:21.371\nI mean, really, the troubleshooting\nquestion reads like this.\n\n8\n00:00:21.371 --> 00:00:25.911\nIt says you are unable\nto ping 100.10.10.10,\n\n9\n00:00:25.911 --> 00:00:29.726\neasy to remember, 100.10.10.10,\n\n10\n00:00:29.726 --> 00:00:35.283\nwhich is a loopback interface on\nNew York Core 1, from PLab Cisco 01.\n\n11\n00:00:35.283 --> 00:00:37.390\nWell, this actually\nsounds like an easy one.\n\n12\n00:00:37.390 --> 00:00:38.880\nLet's take a look at the topology.\n\n13\n00:00:38.880 --> 00:00:41.050\nThe easier it sounds,\nthe harder it probably is though, so\n\n14\n00:00:41.050 --> 00:00:42.230\nI'm a little cautious.\n\n15\n00:00:42.230 --> 00:00:46.542\nBut, they're telling me that\nthere's a loopback interface here\n\n16\n00:00:46.542 --> 00:00:49.857\non NYCORE1 that's 100.10.10.10.\n\n17\n00:00:49.857 --> 00:00:51.901\nAnd I'm trying to ping\nit from this server,\n\n18\n00:00:51.901 --> 00:00:54.670\nthere's not a whole lot\ninvolved in this equation.\n\n19\n00:00:54.670 --> 00:00:57.237\nI've got a work station that's\ngonna ping to ACCESS1, and\n\n20\n00:00:57.237 --> 00:01:00.073\nthen it's gonna go to one of these\ntwo guys cuz it has to get routed.\n\n21\n00:01:00.073 --> 00:01:02.442\nAnd if it's anything\nlike the previous issues,\n\n22\n00:01:02.442 --> 00:01:04.910\nI'm gonna get sent to CORE2 to get routed.\n\n23\n00:01:04.910 --> 00:01:09.970\nCuz I've gotta get routed from the\n192.168.16 network that that sever resides\n\n24\n00:01:09.970 --> 00:01:15.120\non, over to this other system, this\nother loopback to then pass over there.\n\n25\n00:01:15.120 --> 00:01:18.744\nSo I got a few little hops that\nI'm gonna have to go through but\n\n26\n00:01:18.744 --> 00:01:22.741\nit should just be a simple path\nlike that and, that's it, right?\n\n27\n00:01:22.741 --> 00:01:24.971\nJust three devices I need to look at and\nkinda solve that problem.\n\n28\n00:01:24.971 --> 00:01:27.408\nNow, I am going to have to get routed.\n\n29\n00:01:27.408 --> 00:01:29.923\nI'm on the 192.168.16 network,\n\n30\n00:01:29.923 --> 00:01:34.950\n100.10.10.10 is a different network\nno matter what subnet mask I use.\n\n31\n00:01:34.950 --> 00:01:39.680\nSo, in order to get to that one,\nI'm gonna have to get routed and\n\n32\n00:01:39.680 --> 00:01:41.790\nI know that my default\ngateway is 192.168.16.1.\n\n33\n00:01:41.790 --> 00:01:46.576\nAnd as we've seen time and\ntime again, that is right here,\n\n34\n00:01:46.576 --> 00:01:49.852\nthis is the active HSRP node for that IP.\n\n35\n00:01:49.852 --> 00:01:51.382\nSo I should be going there,\n\n36\n00:01:51.382 --> 00:01:55.650\nand then somehow magically hopping\nover to CORE1 to access this loopback.\n\n37\n00:01:55.650 --> 00:01:59.530\nNow that means my problem is\nmost likely not on NYACCESS1.\n\n38\n00:01:59.530 --> 00:02:02.220\nIf I can ping my default gateway\nthen I can rule that one out, and\n\n39\n00:02:02.220 --> 00:02:05.090\nI can narrow my troubleshooting\ndown to just these two hosts.\n\n40\n00:02:05.090 --> 00:02:05.720\nSo let's do that.\n\n41\n00:02:05.720 --> 00:02:07.600\nI'm gonna go see if I can\nping my default gateway,\n\n42\n00:02:07.600 --> 00:02:11.290\nand then I'll see if I can ping the IP\nthat actually in trouble anyway.\n\n43\n00:02:11.290 --> 00:02:15.987\nSo I'm gonna jump back to that server,\nso here's the server in question.\n\n44\n00:02:15.987 --> 00:02:18.055\nAnd if I do a quick ipconfig,\n\n45\n00:02:18.055 --> 00:02:23.067\nI can see that my IP address\nis indeed 192.168.16.10.\n\n46\n00:02:23.067 --> 00:02:28.390\nAnd my default gateway is .1, and\nlet's see if I can ping that gateway.\n\n47\n00:02:28.390 --> 00:02:34.690\nSo if I do a quick ping to 192.168.16.1,\nI am able to ping it, okay.\n\n48\n00:02:34.690 --> 00:02:38.340\nSo, at that point I can kind of rule out\nthis work station as the problem and\n\n49\n00:02:38.340 --> 00:02:40.300\nI can rule out NYACCESS1.\n\n50\n00:02:40.300 --> 00:02:44.490\nAnd I can focus the rest of my\nefforts on NYCORE1 and CORE2, right,\n\n51\n00:02:44.490 --> 00:02:46.910\nnarrow down the scope of the problem.\n\n52\n00:02:46.910 --> 00:02:48.950\nSo let's jump over to CORE2.\n\n53\n00:02:48.950 --> 00:02:50.800\nWell actually, let's start on CORE1.\n\n54\n00:02:50.800 --> 00:02:52.900\nThey're telling me it's\na loopback interface.\n\n55\n00:02:52.900 --> 00:02:55.090\nI don't recall seeing it earlier so\nmaybe it's missing,\n\n56\n00:02:55.090 --> 00:02:58.510\nor maybe just magically appeared\nin time for this exam question.\n\n57\n00:02:58.510 --> 00:02:59.850\n[LAUGH] That can happen.\n\n58\n00:02:59.850 --> 00:03:01.430\nSo let me jump over to CORE1, and\n\n59\n00:03:01.430 --> 00:03:04.958\nlet's verify that it is actually set\nup the way they say it's set up.\n\n60\n00:03:04.958 --> 00:03:09.543\nSo on CORE1, I'm just gonna do\na quick show ip int brief and\n\n61\n00:03:09.543 --> 00:03:11.848\nkinda see what's out there.\n\n62\n00:03:14.554 --> 00:03:17.220\nAnd I'll exclude\nthe unassigned interfaces.\n\n63\n00:03:17.220 --> 00:03:20.201\nAnd so if I look at it,\nI do have a loopback way down here and,\n\n64\n00:03:20.201 --> 00:03:22.362\nsure enough 100.10.10.10.\n\n65\n00:03:22.362 --> 00:03:26.752\nThat's its IP and it is up,\nup ,as loopbacks typically tend to be.\n\n66\n00:03:26.752 --> 00:03:31.508\nAnd if I do a quick\nshow running-config for\n\n67\n00:03:31.508 --> 00:03:34.553\nlo0, for that loopback.\n\n68\n00:03:34.553 --> 00:03:36.759\nWhoops, for int lo0.\n\n69\n00:03:38.917 --> 00:03:40.427\nWell, it's not liking that.\n\n70\n00:03:40.427 --> 00:03:43.100\nOh, it's loopback 10,\nI'm reading it wrong.\n\n71\n00:03:43.100 --> 00:03:45.160\nSo, sometimes you gotta pay\nattention to what's on the screen.\n\n72\n00:03:45.160 --> 00:03:47.600\nIt is loopback 10, not loopback 0.\n\n73\n00:03:47.600 --> 00:03:49.960\nSo I'm gonna do a quick\nshow running-config for\n\n74\n00:03:49.960 --> 00:03:52.900\nint lo10, just to see if there's\nany weird on there, right?\n\n75\n00:03:52.900 --> 00:03:56.080\nYou might have access lists,\nyou might have policies,\n\n76\n00:03:56.080 --> 00:03:58.210\nthere's all sorts of things\nyou can have on there.\n\n77\n00:03:58.210 --> 00:04:01.860\nNot on a loopback normally though, this\none looks to be up and happy, all right.\n\n78\n00:04:01.860 --> 00:04:04.521\nSo it's up and happy,\nit's there, it's great.\n\n79\n00:04:04.521 --> 00:04:06.260\nI can get to it, right?\n\n80\n00:04:06.260 --> 00:04:08.020\nWell, hopefully, we'll see.\n\n81\n00:04:08.020 --> 00:04:11.280\nWhen you create loopback interfaces on\na switch, they're layer three ports,\n\n82\n00:04:11.280 --> 00:04:12.660\nthey're not switch ports.\n\n83\n00:04:12.660 --> 00:04:15.590\nAnd that means they don't have a VLAN\nnumber assigned to it, so there is no\n\n84\n00:04:15.590 --> 00:04:19.276\nVLAN number assigned to this interface,\nit's just a layer three interface.\n\n85\n00:04:19.276 --> 00:04:21.595\nSo there's gonna have to\nbe some routing involved,\n\n86\n00:04:21.595 --> 00:04:23.187\nI'm gonna have to get routed to it.\n\n87\n00:04:23.187 --> 00:04:27.640\nWell, the other switch, CORE2, that's\nthe one that's active for HSRP right now.\n\n88\n00:04:27.640 --> 00:04:30.710\nSo I'm going there,\nthat's where the routing has to happen.\n\n89\n00:04:30.710 --> 00:04:34.510\nBut the route then has to send somebody\nover here, it's kinda convoluted.\n\n90\n00:04:34.510 --> 00:04:38.330\nAnd so a dynamic routing protocol\nis what would normally work.\n\n91\n00:04:38.330 --> 00:04:42.305\nBut if I go back to my diagram here,\nI can see that I am running RIP for\n\n92\n00:04:42.305 --> 00:04:45.252\nNYWAN1, NYEDGE2, and NYCORE2.\n\n93\n00:04:45.252 --> 00:04:48.400\nNYCORE1 is not participating in RIP.\n\n94\n00:04:48.400 --> 00:04:53.640\nSo, that means NYCORE2 doesn't necessarily\nknow about that loopback, does it?\n\n95\n00:04:53.640 --> 00:04:56.650\nWell, it might, maybe we put it in\nthere with the static route, right?\n\n96\n00:04:56.650 --> 00:05:00.020\nOr, maybe it's undocumented that this\nguy is actually participating in RIP,\n\n97\n00:05:00.020 --> 00:05:01.140\nwe don't really know.\n\n98\n00:05:01.140 --> 00:05:02.410\nLet's take a look, right?\n\n99\n00:05:02.410 --> 00:05:04.970\nSo I'll start here in CORE1 and\nsee if it's running a routing protocol.\n\n100\n00:05:06.910 --> 00:05:11.610\nEasiest way to find that is show ip\nprotocols, so I will do exactly that.\n\n101\n00:05:13.110 --> 00:05:17.996\nAnd, well I am running ospf, that's\ngood to know, so ospf 100 is running.\n\n102\n00:05:17.996 --> 00:05:20.944\nI'm running it for a couple of networks,\nneither of which are my loopback, and\n\n103\n00:05:20.944 --> 00:05:22.290\nthat's not gonna help me.\n\n104\n00:05:22.290 --> 00:05:23.510\nBut I am running ospf.\n\n105\n00:05:23.510 --> 00:05:26.337\nThe other router,\nI mean the other switch in this case,\n\n106\n00:05:26.337 --> 00:05:29.478\nmay not be running ospf though,\nso this may not help me at all.\n\n107\n00:05:29.478 --> 00:05:33.906\nBut I am running it, I am running\nit on the 192.168.16 network, but\n\n108\n00:05:33.906 --> 00:05:35.660\nmy loopback is not a part of it.\n\n109\n00:05:35.660 --> 00:05:39.200\nAnd hey, maybe that 's the problem,\nmaybe the loopback should be a part of it.\n\n110\n00:05:39.200 --> 00:05:42.690\nBut, if the other side's not running ospf\nthen I'm gonna have a problem there.\n\n111\n00:05:42.690 --> 00:05:44.380\nAll right, so\nlet's go take a look at the other side,\n\n112\n00:05:44.380 --> 00:05:45.840\nI'm gonna switch over to CORE2.\n\n113\n00:05:47.910 --> 00:05:53.460\nAnd on CORE2,\nI'm gonna do a show ip protocols,\n\n114\n00:05:53.460 --> 00:05:55.320\nand just verify that it\nis running something.\n\n115\n00:05:55.320 --> 00:05:58.590\nIt's running RIP, so\nI've got that, and that's it.\n\n116\n00:05:58.590 --> 00:06:01.810\nSo I'm just running RIP,\nnot running OSPF or anything else.\n\n117\n00:06:01.810 --> 00:06:05.410\nSo I'm not gonna learn OSPF routes\nfrom the other side anyway.\n\n118\n00:06:05.410 --> 00:06:09.800\nSo even I brought that loopback\ninterface into OSPF, it wouldn't matter,\n\n119\n00:06:09.800 --> 00:06:11.690\nwe're not gonna learn it here, all right.\n\n120\n00:06:11.690 --> 00:06:15.570\nWell, do I have a route for\nthat network at all, right?\n\n121\n00:06:15.570 --> 00:06:20.512\nI'm gonna do a show ip route and\nI'm gonna filter that for 100.10.10.\n\n122\n00:06:20.512 --> 00:06:24.200\nSo I'm just gonna look for any line on\nthat and, hey I got a route for it, right?\n\n123\n00:06:24.200 --> 00:06:26.840\nHere's a route, 100.10.10.10.\n\n124\n00:06:26.840 --> 00:06:29.300\nSomebody took the time to put\na static route in there so\n\n125\n00:06:29.300 --> 00:06:30.390\nI'd be able to get to it.\n\n126\n00:06:30.390 --> 00:06:31.770\nThat was very nice of them, right?\n\n127\n00:06:31.770 --> 00:06:35.070\nSo I've got a static route, now I don't\nhave to worry about the routing protocol.\n\n128\n00:06:35.070 --> 00:06:38.892\nIn theory what's happening is\nmy traffic leaves my server,\n\n129\n00:06:38.892 --> 00:06:41.996\ncrosses ACCESS1 and\ngoes to my default gateway at CORE2.\n\n130\n00:06:41.996 --> 00:06:47.072\nAnd at CORE2 it says, all right, I need\nto get you to the 100.10.10.10 network,\n\n131\n00:06:47.072 --> 00:06:50.124\nI've got a static route and\nit tells me where to send you.\n\n132\n00:06:50.124 --> 00:06:57.722\nAnd it's sending me to .5,\nit's sending me to 192.168.12.5.\n\n133\n00:06:57.722 --> 00:06:59.160\nWell who is that?\n\n134\n00:06:59.160 --> 00:07:03.664\nWell, if you just did Issue number\n6 you'll remember that 12.5 is our\n\n135\n00:07:03.664 --> 00:07:04.990\nEdge router.\n\n136\n00:07:04.990 --> 00:07:08.140\nThat is this guy up here, NYEDGE2.\n\n137\n00:07:08.140 --> 00:07:12.170\nSo this guy is gonna send that route and\nsend that traffic up to here.\n\n138\n00:07:12.170 --> 00:07:14.390\nThat's not really the right way, is it?\n\n139\n00:07:14.390 --> 00:07:17.973\nWell it could be, right, we could set it\nup here and then send it over to EDGE1 and\n\n140\n00:07:17.973 --> 00:07:19.477\nthen send it back down to CORE1.\n\n141\n00:07:19.477 --> 00:07:23.950\nLittle bit round about way of\ngoing about it but it might work.\n\n142\n00:07:23.950 --> 00:07:25.000\nThe problem with that is there's so\n\n143\n00:07:25.000 --> 00:07:28.420\nmany hops that you'll have to have return\npaths back to get the traffic back.\n\n144\n00:07:28.420 --> 00:07:30.775\nIt can be really messy,\nit may or may not work.\n\n145\n00:07:30.775 --> 00:07:32.640\nYou'll probably have to do a static here,\na static here,\n\n146\n00:07:32.640 --> 00:07:34.070\nto get it all the way around.\n\n147\n00:07:34.070 --> 00:07:37.300\nSo, what's more than likely going on\nhere is that we just have it pointing to\n\n148\n00:07:37.300 --> 00:07:41.100\nthe wrong place, right,\nnot going where we want it.\n\n149\n00:07:41.100 --> 00:07:43.620\nNow, I probably could've\nspotted this a different way.\n\n150\n00:07:43.620 --> 00:07:46.149\nFrom the server,\nI could have done a tracert.\n\n151\n00:07:46.149 --> 00:07:49.865\nSo if I go back to my server and,\ninstead of doing a ping,\n\n152\n00:07:49.865 --> 00:07:52.805\nI could do a tracert out to that one,\nright?\n\n153\n00:07:52.805 --> 00:08:01.620\nSo I could do a tracert to 100.10.10.10\nto see what path I follow.\n\n154\n00:08:01.620 --> 00:08:04.190\nAnd the first step on that journey\nis gonna be my Default Gateway,\n\n155\n00:08:04.190 --> 00:08:07.090\nwhich I did the ping here\nto verify I could get to.\n\n156\n00:08:07.090 --> 00:08:12.530\nThe second hop would be 192.168.12.5,\nwhich would be that Edge server.\n\n157\n00:08:12.530 --> 00:08:15.360\nAnd looks like I can get to that\ntoo cuz I'm getting a response.\n\n158\n00:08:15.360 --> 00:08:20.070\nBut then that guy needs to send me\nsomewhere, and where's it gonna send me?\n\n159\n00:08:20.070 --> 00:08:22.770\nWell, it depends,\nit could have a route, but\n\n160\n00:08:22.770 --> 00:08:25.550\ninstead it's telling me\nDestination host unreachable.\n\n161\n00:08:25.550 --> 00:08:28.210\nSo because of that,\n\n162\n00:08:28.210 --> 00:08:32.120\nI know that this Edge server up here\ndoesn't have a route to get there.\n\n163\n00:08:32.120 --> 00:08:35.170\nI mean, I can go and verify it, let's go\nand verify it just for completeness so\n\n164\n00:08:35.170 --> 00:08:36.770\nwe can say we did it all, right.\n\n165\n00:08:36.770 --> 00:08:42.660\nSo I'll go to NYEDGE2 and,\nlet me get logged back into this thing.\n\n166\n00:08:42.660 --> 00:08:48.331\nAnd on NYEDGE2,\nI'm just gonna do a show ip route for\n\n167\n00:08:48.331 --> 00:08:51.619\n100.10.10.10.\n\n168\n00:08:51.619 --> 00:08:52.896\nNetwork not in table.\n\n169\n00:08:52.896 --> 00:08:56.970\nAnd if I do a show ip route,\ndo I have a gateway of last resort?\n\n170\n00:08:56.970 --> 00:08:59.050\nI don't, so\nI have no gateway of last resort and\n\n171\n00:08:59.050 --> 00:09:02.740\nthat network is not in my table,\nso this guy has no route.\n\n172\n00:09:02.740 --> 00:09:05.770\nSo it looks like I've got a choice\nhere on how I'm gonna fix this one.\n\n173\n00:09:07.090 --> 00:09:12.500\nMy traffic is leaving the server and\nmaking it to NYCORE2,\n\n174\n00:09:12.500 --> 00:09:17.440\nand from here, a static route is sending\nit to NYEDGE1, so now I've got a choice.\n\n175\n00:09:17.440 --> 00:09:20.860\nI could put a static route on,\nNYEDGE2, sorry, so\n\n176\n00:09:20.860 --> 00:09:23.510\nwe're leaving NYCORE2 to go to NYEDGE2.\n\n177\n00:09:23.510 --> 00:09:28.090\nI could put a static route on NYEDGE2\nto send the traffic to NYEDGE1.\n\n178\n00:09:28.090 --> 00:09:32.740\nAnd then I could put a static route\nhere to send it back to CORE1, right.\n\n179\n00:09:32.740 --> 00:09:34.320\nThat's a lot of routes.\n\n180\n00:09:34.320 --> 00:09:37.310\nOr, I could just change\nthe static route on CORE2\n\n181\n00:09:37.310 --> 00:09:41.385\nto send this directly over to CORE1,\nthat's probably the better path, okay.\n\n182\n00:09:41.385 --> 00:09:44.120\nS that's what I'm gonna do,\nis I'm gonna take this static route, and\n\n183\n00:09:44.120 --> 00:09:46.890\njust redirect it and\npoint it to the other place, all right.\n\n184\n00:09:46.890 --> 00:09:48.960\nAnd that's easy enough for us.\n\n185\n00:09:48.960 --> 00:09:53.080\nWell, assuming that static route\nisn't some crazy policy-based thing.\n\n186\n00:09:53.080 --> 00:09:54.168\nSo let's go verify that.\n\n187\n00:09:54.168 --> 00:09:56.400\nSometimes you can get over\nyour head real fast on these.\n\n188\n00:09:57.850 --> 00:10:04.200\nAll right, so let's do a show run and\nI'm just gonna look for that static route.\n\n189\n00:10:04.200 --> 00:10:07.570\nSo when you do a static route,\nyou say ip route something.\n\n190\n00:10:07.570 --> 00:10:11.090\nSo I'm just gonna search for\nthat line, and there it is.\n\n191\n00:10:11.090 --> 00:10:12.220\nSo, nothing special here.\n\n192\n00:10:12.220 --> 00:10:16.170\nNo track objects, nothing crazy to worry\nabout, just a straight-up IP route for\n\n193\n00:10:16.170 --> 00:10:20.520\nthat network being sent\nto that destination.\n\n194\n00:10:20.520 --> 00:10:24.930\nAnd notice that subnet mask,\nall 255s so a 32-bit subnet mask, so\n\n195\n00:10:24.930 --> 00:10:27.838\nwere just routing to that one IP and\nthat's it.\n\n196\n00:10:27.838 --> 00:10:30.688\nNow I have to be careful here\nbecause if I add a route, well,\n\n197\n00:10:30.688 --> 00:10:34.990\nthey'll both make it in the routing table,\nthey'll have an equal-cost metric.\n\n198\n00:10:34.990 --> 00:10:38.480\nSo I need to remove the route that's\nthere before I put my new route in.\n\n199\n00:10:38.480 --> 00:10:42.500\nSo I'm gonna say, no ip route,\nand get rid of that route.\n\n200\n00:10:44.600 --> 00:10:49.180\nAnd we'll just get rid of that one so\nthat it's outta there.\n\n201\n00:10:49.180 --> 00:10:52.149\nAnd I'm gonna verify that it's actually\ngone cuz sometimes you don't get proper\n\n202\n00:10:52.149 --> 00:10:52.760\nconfirmation.\n\n203\n00:10:52.760 --> 00:10:56.877\nSo, I'm just gonna rerun\nthat show run command and\n\n204\n00:10:56.877 --> 00:10:59.668\nkinda filter it, and it's gone.\n\n205\n00:10:59.668 --> 00:11:02.400\nAnd now I'm gonna put\na new route in place.\n\n206\n00:11:02.400 --> 00:11:05.990\nAnd when I put that new route in place,\nI'm gonna send it to the other switch.\n\n207\n00:11:05.990 --> 00:11:08.460\nNow, what IP address I'm gonna use for\n\n208\n00:11:08.460 --> 00:11:11.140\nthat destination because\nI've got choices here.\n\n209\n00:11:11.140 --> 00:11:12.490\nIt's nice to have choices.\n\n210\n00:11:12.490 --> 00:11:16.860\nSo, NYCORE2 needs to be\nable to talk to NYCORE1.\n\n211\n00:11:16.860 --> 00:11:19.180\nAnd it can communicate, probably,\n\n212\n00:11:19.180 --> 00:11:21.880\non several different networks cuz\nthey're routing for several VLANs.\n\n213\n00:11:21.880 --> 00:11:25.630\nIt doesn't really matter which one I pick,\nI just need to pick one of them.\n\n214\n00:11:25.630 --> 00:11:30.578\nWell, I was talking to this guy up here\non VLAN12, so maybe I'll stick with that.\n\n215\n00:11:30.578 --> 00:11:35.165\nWe were using VLAN12 up here, I'll bet\nNYCORE1 has an interface on VLAN12 also.\n\n216\n00:11:35.165 --> 00:11:39.882\nLet's test that though,\nI'll jump over to CORE1, and\n\n217\n00:11:39.882 --> 00:11:45.896\njust do a quick show ip int brief and\nexclude the unassigned interfaces.\n\n218\n00:11:45.896 --> 00:11:50.086\nAnd I'm gonna look for anything on 12,\nthere we go we've got 12.2, so\n\n219\n00:11:50.086 --> 00:11:51.638\nI'll try and route to that.\n\n220\n00:11:51.638 --> 00:11:54.550\nI should probably test\nreachability before I get too far.\n\n221\n00:11:54.550 --> 00:11:57.308\nI don't wanna put a route in for\nsome IP that I can't even get to, right?\n\n222\n00:11:57.308 --> 00:12:03.883\nSo let me just do a quick\nping to 192.168.12.2 and,\n\n223\n00:12:03.883 --> 00:12:07.510\nthere we go, and it's good.\n\n224\n00:12:07.510 --> 00:12:12.460\nAll right, so originally, the way the\nroute read, you can see it up here where\n\n225\n00:12:12.460 --> 00:12:18.471\nwe did a route for 100.10.10.10 and\nwe pointed it to 192.168.12.5.\n\n226\n00:12:18.471 --> 00:12:23.159\nI'm just gonna change it, so\nthat it points to .2 instead,\n\n227\n00:12:23.159 --> 00:12:25.850\nwhich is the other switch.\n\n228\n00:12:25.850 --> 00:12:27.179\nSo we're gonna redirect that.\n\n229\n00:12:30.904 --> 00:12:34.730\nAnd point it to that other IP, okay?\n\n230\n00:12:34.730 --> 00:12:36.360\nAnd once I've got that in place,\n\n231\n00:12:36.360 --> 00:12:38.780\nnow I have a route that should\nbe a little more valid.\n\n232\n00:12:38.780 --> 00:12:42.340\nAnd this switch didn't have\na valid route before so\n\n233\n00:12:42.340 --> 00:12:45.850\nwe should be able to ping now,\nwhat we couldn't ping a moment ago.\n\n234\n00:12:47.090 --> 00:12:49.620\nAnd if I do that ping,\nit's working from here.\n\n235\n00:12:49.620 --> 00:12:55.890\nThe ultimate test is going to be jumping\nover to our server and testing from here.\n\n236\n00:12:55.890 --> 00:12:58.662\nSo, looking at this guy,\n\n237\n00:12:58.662 --> 00:13:04.585\nif I just do a quick ping to 100.10.10.10,\n\n238\n00:13:04.585 --> 00:13:08.999\nand survey says, mm, not looking good.\n\n239\n00:13:08.999 --> 00:13:13.195\nOh there we go, all right, so [LAUGH] that\nfirst one we might lose because of ARPs,\n\n240\n00:13:13.195 --> 00:13:15.130\nbut the other one should succeed.\n\n241\n00:13:15.130 --> 00:13:17.370\nIf they don't,\nI might stall another issue.\n\n242\n00:13:17.370 --> 00:13:20.600\nI fixed the path on the way there, but\nas is the way with static routes, we have\n\n243\n00:13:20.600 --> 00:13:23.999\nto worry about the return path also, that\nwould be the next thing I troubleshot.\n\n244\n00:13:23.999 --> 00:13:26.662\nBut in this case, it actually did work,\nwe're able to get there and\n\n245\n00:13:26.662 --> 00:13:27.987\ncommunicate with that network.\n\n246\n00:13:27.987 --> 00:13:32.790\nSo, this problem really boiled down to\na static route that was pointing to\n\n247\n00:13:32.790 --> 00:13:34.770\nthe wrong destination.\n\n248\n00:13:34.770 --> 00:13:36.420\nAnd we always have to\nbe careful with those,\n\n249\n00:13:36.420 --> 00:13:40.260\nbecause static routes can override\ndynamic routing protocols.\n\n250\n00:13:40.260 --> 00:13:44.470\nThey have a really low administrative\ndistance, right, an admin distance of one.\n\n251\n00:13:44.470 --> 00:13:47.320\nThe only thing that beats a static\nroute is a directly connected route.\n\n252\n00:13:47.320 --> 00:13:49.999\nSo I could have a perfectly\nvalid RIP route coming in and\n\n253\n00:13:49.999 --> 00:13:51.581\nthe static route overrides it.\n\n254\n00:13:51.581 --> 00:13:53.891\nSo always be on the lookout for\nstatic routes and\n\n255\n00:13:53.891 --> 00:13:55.810\ndon't assume that they're correct.\n\n256\n00:13:55.810 --> 00:13:59.262\nOftentimes they can point the wrong way\nand that's exactly what we had right here.\n\n257\n00:13:59.262 --> 00:14:03.374\nAll right, well that wraps up Issue 7,\nand it wraps up Set 2.\n\n258\n00:14:03.374 --> 00:14:07.099\nBut stay tuned cuz we're gonna be\nstarting Set 3 next as we continue our\n\n259\n00:14:07.099 --> 00:14:08.726\ntroubleshooting adventure.\n\n260\n00:14:08.726 --> 00:14:09.887\nHope to see you then.\n\n261\n00:14:09.887 --> 00:14:17.679\n[SOUND]\n\n",
          "vimeoId": "149150789"
        }
      ],
      "title": "Set Two"
    },
    {
      "episodes": [
        {
          "description": "In this video, Don solves troubleshooting issue #1` from set #3. The trouble ticket states that \"PLABCSCO01 is unable to ping its default gateway \"",
          "length": "565",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-3-1-set_3_issue_1-120115-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-3-1-set_3_issue_1-120115-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-3-1-set_3_issue_1-120115-1-sm.jpg",
          "title": "Set 3 Issue 1",
          "transcript": "WEBVTT\n\n1\n00:00:00.025 --> 00:00:08.550\n[MUSIC]\n\n2\n00:00:08.550 --> 00:00:12.890\nWell, it's that time again, the time to\nstart a new set of troubleshooting issues.\n\n3\n00:00:12.890 --> 00:00:16.970\nWe're gonna be kicking off with set number\nthree now as we move into a slightly\n\n4\n00:00:16.970 --> 00:00:19.500\ndifferent topology than what\nwe had in the earlier sets.\n\n5\n00:00:19.500 --> 00:00:21.360\nFew little things have been moved around,\nand\n\n6\n00:00:21.360 --> 00:00:24.600\nthat means we need to have our eyes on,\nwe need to be looking for\n\n7\n00:00:24.600 --> 00:00:26.840\nslight changes that could influence\nthe way that our problems work.\n\n8\n00:00:26.840 --> 00:00:29.410\nIt's really easy on the exam as\nyou move between question and\n\n9\n00:00:29.410 --> 00:00:32.270\nquestion to start assuming\nthings about the topology.\n\n10\n00:00:32.270 --> 00:00:33.910\nWe have to make sure we don't do that.\n\n11\n00:00:33.910 --> 00:00:37.540\nWell, here we've got what looks like\nmostly the same equipment as before,\n\n12\n00:00:37.540 --> 00:00:38.970\ncouple of variations and\n\n13\n00:00:38.970 --> 00:00:42.440\nwe've got a problem that really sounds\nlike something we've before also.\n\n14\n00:00:42.440 --> 00:00:46.970\nOur troubleshooting issue number one is,\nPLABCISCO01, that server we've\n\n15\n00:00:46.970 --> 00:00:51.540\nworked with so many times,\nis unable to ping its default gateway.\n\n16\n00:00:51.540 --> 00:00:55.120\nAll right, well I know in the previous\nsets the default gateway for\n\n17\n00:00:55.120 --> 00:00:59.400\nthat server was actually a virtual\nIP assigned to an HSRP cluster and\n\n18\n00:00:59.400 --> 00:01:01.110\nwe had to deal with that a good bit.\n\n19\n00:01:01.110 --> 00:01:03.480\nWell I don't know if\nthat's still the same way.\n\n20\n00:01:03.480 --> 00:01:06.210\nSo when we kick this problem off,\nI kind of need to start off with a little\n\n21\n00:01:06.210 --> 00:01:09.200\nresearch and let's start with\nthe network topology here first.\n\n22\n00:01:09.200 --> 00:01:11.500\nThe server that's causing,\nwell not causing the problem,\n\n23\n00:01:11.500 --> 00:01:15.890\nthat's being affected by the problem\nis PLABCSCO01, this guy down here.\n\n24\n00:01:15.890 --> 00:01:18.080\nAnd I can see that is is 192.168.16.10,\nso that's good.\n\n25\n00:01:18.080 --> 00:01:23.110\nIt's got an IP and\nit's ready to communicate on the network.\n\n26\n00:01:23.110 --> 00:01:25.450\nNow, it doesn't tell me who\nthe default gateway is, and\n\n27\n00:01:25.450 --> 00:01:28.920\nthat default gateway used to be\nshared between these guys up here.\n\n28\n00:01:28.920 --> 00:01:31.050\nI don't know if that's the case anymore,\nall right?\n\n29\n00:01:31.050 --> 00:01:34.250\nSo let's dive in here and\nsee if we can verify this information and\n\n30\n00:01:34.250 --> 00:01:36.690\nfigure out how that path is working.\n\n31\n00:01:36.690 --> 00:01:38.780\nSo I'm gonna start right on that server.\n\n32\n00:01:39.810 --> 00:01:42.510\nAnd the first thing I'm going to do is\njust look at that server's configuration,\n\n33\n00:01:42.510 --> 00:01:46.470\nso I'll do a quick ipconfig on here,\njust to see how it's set.\n\n34\n00:01:46.470 --> 00:01:50.090\nAnd I can see that it's 192.168.16.10, and\n\n35\n00:01:50.090 --> 00:01:52.180\nit's got a default\ngateway of 192.168.16.1.\n\n36\n00:01:52.180 --> 00:01:55.600\nSo that hasn't changed\nfrom the previous sets.\n\n37\n00:01:57.050 --> 00:02:02.070\nNow, in the previous sets we had\nthose two switches that were\n\n38\n00:02:02.070 --> 00:02:06.990\nrunning HSRP and they were sharing\nthat virtual IP between them and\n\n39\n00:02:06.990 --> 00:02:10.320\nthat's where we had that\ndefault gateway IP residing.\n\n40\n00:02:10.320 --> 00:02:12.450\nI could assume that's still the same but\nlet's go and verify it.\n\n41\n00:02:12.450 --> 00:02:15.810\nCore 2 used to be the active one so\nI'll jump over to Core 2 and\n\n42\n00:02:15.810 --> 00:02:19.580\nwe'll take a look and kind of see where\nit sits in the middle of all this.\n\n43\n00:02:21.300 --> 00:02:23.770\nLet me just get that kind of reset for me.\n\n44\n00:02:23.770 --> 00:02:27.700\nAnd what I'm going to do is\nbasically just jump right in and\n\n45\n00:02:27.700 --> 00:02:29.640\nsee if we can't figure out where that is.\n\n46\n00:02:29.640 --> 00:02:32.870\nSo I'm going to do a show\nI P interface brief and\n\n47\n00:02:32.870 --> 00:02:35.560\nI'm going to exclude all\nthe unassigned interfaces.\n\n48\n00:02:35.560 --> 00:02:38.820\nI'm just trying to find out where\nthe 192.168.16 network is and\n\n49\n00:02:38.820 --> 00:02:40.950\nit's still on VLAN 16.\n\n50\n00:02:40.950 --> 00:02:43.770\nAgain, I could have guessed that from\nthe previous sets, but I want to be\n\n51\n00:02:43.770 --> 00:02:47.630\nbetter safe than sorry here and make\nsure I know where that actually resides.\n\n52\n00:02:47.630 --> 00:02:52.254\nThen if I do a show run for\ninterface VLAN 16.\n\n53\n00:02:53.330 --> 00:02:53.990\nThere we go.\n\n54\n00:02:53.990 --> 00:02:56.420\nI see that it's running HSRP.\n\n55\n00:02:56.420 --> 00:03:02.440\nIt's got that standby IP address so this\nis the default gateway for PLABCISCO 01.\n\n56\n00:03:02.440 --> 00:03:03.980\nSo I found the default gateway.\n\n57\n00:03:03.980 --> 00:03:08.000\nAnd the problem was that PLABCISCO 01\ncould not reach this default gateway.\n\n58\n00:03:08.000 --> 00:03:11.960\nSo, well, actually,\nI say this is the default gateway.\n\n59\n00:03:11.960 --> 00:03:15.640\nthis is one node of an HSRP cluster,\nit might not be the active node.\n\n60\n00:03:15.640 --> 00:03:18.650\nSo let me do a quick show standby for\nvlan 16.\n\n61\n00:03:18.650 --> 00:03:21.040\nAnd see, we are active, okay.\n\n62\n00:03:21.040 --> 00:03:23.820\nSo this is the active one,\nthis is the default gateway and for\n\n63\n00:03:23.820 --> 00:03:27.450\nsome reason that server can't get to us.\n\n64\n00:03:27.450 --> 00:03:30.610\nAnd if I do a quick ping to 196.168.16.10\n\n65\n00:03:30.610 --> 00:03:33.660\nI can see that core two\ncan't get to it either.\n\n66\n00:03:33.660 --> 00:03:35.550\nAlright, so I've got a bit of a problem.\n\n67\n00:03:35.550 --> 00:03:40.810\nNow, if this were separate subnets\nthen I might use traceroute and\n\n68\n00:03:40.810 --> 00:03:44.680\ntry to figure out where in a path\na particular connection fails, but\n\n69\n00:03:44.680 --> 00:03:47.450\nin my scenario we're on the same subnet.\n\n70\n00:03:47.450 --> 00:03:51.290\nI'm trying to get to my default gateway,\nso I've got two hosts on\n\n71\n00:03:51.290 --> 00:03:54.700\nthe 192.168.16 network tools like\nTraceRoute really aren't gonna help me.\n\n72\n00:03:54.700 --> 00:03:58.110\nI just know that one node\nisn't able to see the other.\n\n73\n00:03:58.110 --> 00:04:00.290\nNow if I look at my network topology,\n\n74\n00:04:00.290 --> 00:04:03.410\nthere's a lot of places\nthis problem could occur.\n\n75\n00:04:03.410 --> 00:04:07.140\nPLABCSCO01, if it wants to go to\nthe gateway, it's gotta get to NYCORE2.\n\n76\n00:04:07.140 --> 00:04:13.040\nIt could go to ACCESS1, and\nfrom ACCESS1 up to CORE2\n\n77\n00:04:13.040 --> 00:04:17.430\nor, it could go from access1\nto core1 over to core2, right?\n\n78\n00:04:17.430 --> 00:04:18.340\nTwo different paths.\n\n79\n00:04:18.340 --> 00:04:20.860\nAnd, there could be something\nwrong with either path\n\n80\n00:04:20.860 --> 00:04:22.290\nthat's causing this to break down.\n\n81\n00:04:22.290 --> 00:04:24.480\nSo, I need to figure out what\npath it's gonna take and,\n\n82\n00:04:24.480 --> 00:04:27.770\nwhat's gonna determine the path,\nwell, spanning tree.\n\n83\n00:04:27.770 --> 00:04:30.120\nSpanning tree is gonna\nsee this as a loop and\n\n84\n00:04:30.120 --> 00:04:31.690\nit's gonna block a port somewhere on it.\n\n85\n00:04:31.690 --> 00:04:32.580\nI don't know where, right.\n\n86\n00:04:32.580 --> 00:04:35.560\nAnd, one of these switches will be\nthe master now or the root bridge and\n\n87\n00:04:35.560 --> 00:04:37.000\nthat'll keep its ports up.\n\n88\n00:04:37.000 --> 00:04:40.990\nSomebody else will have to turn F port\noff and that's gonna affect that path.\n\n89\n00:04:40.990 --> 00:04:42.160\nSo I can just look.\n\n90\n00:04:42.160 --> 00:04:44.220\nThe easiest way to find out\nis right here on ACCESS1.\n\n91\n00:04:44.220 --> 00:04:46.910\nI can just look at\nthe spanning tree topology for\n\n92\n00:04:46.910 --> 00:04:49.740\nVLAN16 and get an idea of where\nthat traffic's going to go.\n\n93\n00:04:49.740 --> 00:04:55.630\nSo I'm going to jump over to NYACCESS1 and\nsee if I can't figure that out, all right?\n\n94\n00:04:55.630 --> 00:05:01.160\nSo on NYaccess1,\nI'm just gonna come in here and\n\n95\n00:05:01.160 --> 00:05:06.420\nget into theat switch and\nI'm gonna do a quick show.\n\n96\n00:05:06.420 --> 00:05:08.760\nWell, first off, I'm gonna do\na show of VLan.Well first off,\n\n97\n00:05:08.760 --> 00:05:13.520\nI'm doing a show of VLan because VLan\n16 is the one that I care about, right?\n\n98\n00:05:13.520 --> 00:05:17.280\nAnd I wanna make sure that\nVLan is present and, Oh well,\n\n99\n00:05:17.280 --> 00:05:19.280\nactually I think I've spotted\nour problem right here.\n\n100\n00:05:19.280 --> 00:05:21.580\nI wanted to make sure\nthe VLAN was present, right?\n\n101\n00:05:21.580 --> 00:05:24.210\nAnd the reason I was doing that is you\nmight have things like VLAN trunking\n\n102\n00:05:24.210 --> 00:05:26.470\nprotocol where the VLAN gets deleted.\n\n103\n00:05:26.470 --> 00:05:29.870\nAnd it might still exist on a port but\nit's deleted in the database and so\n\n104\n00:05:29.870 --> 00:05:31.200\nwhich it was missing here.\n\n105\n00:05:31.200 --> 00:05:35.420\nWell, it's not missing, I see VLAN 16,\nit's there like I expected it, right?\n\n106\n00:05:35.420 --> 00:05:39.340\nAnd When I look at Spanning Tree what I\nwas really intending to do when I came\n\n107\n00:05:39.340 --> 00:05:43.500\nhere was to look and\nsee if my trunks were carrying that VLAN.\n\n108\n00:05:43.500 --> 00:05:49.105\nSo, what I wanted to do is show\nspanning-dash for VLAN 16,\n\n109\n00:05:49.105 --> 00:05:54.005\nand take a look at which\nport we were sending out.\n\n110\n00:05:54.005 --> 00:05:58.035\nAnd see how I've got port\n23 here is forwarding and\n\n111\n00:05:58.035 --> 00:06:01.145\nport 24 is blocking; that's\nthe information I was actually going for.\n\n112\n00:06:01.145 --> 00:06:05.705\nAnd that was gonna tell me that if I\nlook at my network map here, port 23,\n\n113\n00:06:05.705 --> 00:06:08.530\nthat's the one that was forwarding,\nwhich goes to CORE2.\n\n114\n00:06:08.530 --> 00:06:10.670\nPort 24 was blocking, that goes to core 1.\n\n115\n00:06:10.670 --> 00:06:16.330\nThat told me my path that I'm going from\nPLABCISCO 01 to NYACCESS1 to NYCORE2.\n\n116\n00:06:16.330 --> 00:06:18.800\nThat's the path that I\nshould be following.\n\n117\n00:06:18.800 --> 00:06:22.700\nThat's what I was looking for\nwhen I came here and as often happens,\n\n118\n00:06:22.700 --> 00:06:27.000\naccidentally while looking for\nthat information, I found the problem.\n\n119\n00:06:27.000 --> 00:06:32.170\nThe problem, which you guys might have\nnoticed was back here when I ran show vlan\n\n120\n00:06:32.170 --> 00:06:33.940\nand let me just bring that back up again.\n\n121\n00:06:33.940 --> 00:06:38.360\nWhen when I ran show vlan to pull\nup my VLAN list, I was just making\n\n122\n00:06:38.360 --> 00:06:41.810\nsure VLAN 16 wasn't deleted,\nright, or that it wasn't disabled.\n\n123\n00:06:41.810 --> 00:06:43.670\nSee how I've got this\nactive status over here?\n\n124\n00:06:43.670 --> 00:06:46.430\nIt could be suspended and\nthen it wouldn't be moving traffic either.\n\n125\n00:06:46.430 --> 00:06:48.030\nSo I was just doing a quick glance for\n\n126\n00:06:48.030 --> 00:06:52.070\nthat, but what I didn't expect\nis what I see over here.\n\n127\n00:06:52.070 --> 00:06:53.600\nWhat ports are assigned to VLAN 16?\n\n128\n00:06:53.600 --> 00:06:54.920\nNone.\n\n129\n00:06:54.920 --> 00:06:56.890\nThere's no ports assigned to VLAN 16.\n\n130\n00:06:56.890 --> 00:06:59.970\nNow for my trunks I'm ok with that, right?\n\n131\n00:06:59.970 --> 00:07:05.110\nRemember when I did a show spanning\ntree for VLAN 16 I saw the ports 23 and\n\n132\n00:07:05.110 --> 00:07:08.310\n24 for participating in VLAN 16 and\nthat's because their trunks.\n\n133\n00:07:08.310 --> 00:07:09.769\nSo if I do a show interface trunk.\n\n134\n00:07:10.920 --> 00:07:13.740\nI'll see those guys\nare both carrying VLAN 16,\n\n135\n00:07:13.740 --> 00:07:17.740\nbut trunks don't show up\nin the show VLAN output.\n\n136\n00:07:17.740 --> 00:07:20.030\nWhen you run show VLAN\ntrunks are left out, right?\n\n137\n00:07:20.030 --> 00:07:24.550\nSo anytime you see a port missing from\nshow VLAN, it's either been converted to\n\n138\n00:07:24.550 --> 00:07:29.320\na layer three port instead of a switch\nport or it is a trunk, one or the other.\n\n139\n00:07:29.320 --> 00:07:31.920\nIn this case they're trunked,\nso I know they're okay, but\n\n140\n00:07:31.920 --> 00:07:37.812\nwhat I'm not seeing is the port that\nPLABCISCO 01 is plugged into, right.\n\n141\n00:07:37.812 --> 00:07:40.590\nPLABCISCO 01 is supposed to be on vlan16,\nit's plugged.\n\n142\n00:07:41.825 --> 00:07:46.355\nPlugged into port 1, I expect to see\nport 1 in the show VLAN output for\n\n143\n00:07:46.355 --> 00:07:48.155\nVLAN 16 and I didn't see it.\n\n144\n00:07:48.155 --> 00:07:50.375\nSo while I wasn't intending\nto find the problem that way,\n\n145\n00:07:50.375 --> 00:07:51.845\nit certainly worked out, didn't it?\n\n146\n00:07:51.845 --> 00:07:58.215\nSo, if I do a show VLAN again, I can just\nverify VLAN 16 and port 1 is not there.\n\n147\n00:07:58.215 --> 00:08:02.760\nIn fact, port 1 is right here On VLAN10.\n\n148\n00:08:02.760 --> 00:08:04.970\nOn the wrong VLAN.\n\n149\n00:08:04.970 --> 00:08:08.802\nAnd I can verify that again by\ndoing a show running-config for\n\n150\n00:08:08.802 --> 00:08:13.120\ninterface fa0/1 and\nsure enough, VLAN10, right?\n\n151\n00:08:14.750 --> 00:08:17.580\nSo that's what I'm gonna need to fix,\nis I'm gonna need to jump in there and\n\n152\n00:08:17.580 --> 00:08:18.590\nmove it to the right VLAN.\n\n153\n00:08:18.590 --> 00:08:24.600\nSo I'll just get into fa0/1 and\nsay switch-port access vlan 16.\n\n154\n00:08:24.600 --> 00:08:29.020\nThat will move that over and\nthat should solve our problem.\n\n155\n00:08:29.020 --> 00:08:31.700\nNow to test that out, what can I do?\n\n156\n00:08:31.700 --> 00:08:34.500\nWell I can jump back to the original\nserver and I can test from here, or\n\n157\n00:08:34.500 --> 00:08:38.230\nI could test from the gateway really, but\nI'll test from here just to make sure that\n\n158\n00:08:38.230 --> 00:08:41.970\nI'm in line with what the question\nwas originally asking me to do.\n\n159\n00:08:41.970 --> 00:08:46.430\nSo I'm gonna try and ping my default\ngateway, 192.168.16.1 and now we succeed.\n\n160\n00:08:46.430 --> 00:08:51.310\nAll right, so\nthis one turned out to be not so bad.\n\n161\n00:08:51.310 --> 00:08:54.550\nI was running through my standard\ntroubleshooting process and just happened\n\n162\n00:08:54.550 --> 00:08:58.150\nto find the problem before I actually got\nto the information I was even looking for.\n\n163\n00:08:58.150 --> 00:08:58.920\nThat's kinda nice, right?\n\n164\n00:08:58.920 --> 00:09:01.850\nIt makes for a quick and easy answer and\nwe move onto the next question and\n\n165\n00:09:01.850 --> 00:09:02.490\nwe're in business.\n\n166\n00:09:02.490 --> 00:09:06.680\nSo in this case, it just came down to\nthe port the host was plugged into\n\n167\n00:09:06.680 --> 00:09:08.260\nwas assigned to the wrong VLAN.\n\n168\n00:09:08.260 --> 00:09:11.852\nMoved him to the right VLAN,\nconnectivity restored and then we're done.\n\n169\n00:09:11.852 --> 00:09:13.630\nAll right,\nwell I hope you guys enjoyed that one.\n\n170\n00:09:13.630 --> 00:09:17.712\nStay tuned, we got more troubleshooting\nissues for set number three coming up.\n\n171\n00:09:17.712 --> 00:09:25.524\n[MUSIC]\n\n",
          "vimeoId": "151013768"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #2` from set #3. The trouble ticket states that \"You are unable to create VLANs on NYCORE1, you should be able to create VLANs on both NYCORE1 and NYCORE2 \"",
          "length": "405",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-3-2-set_3_issue_2-120115-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-3-2-set_3_issue_2-120115-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-3-2-set_3_issue_2-120115-1-sm.jpg",
          "title": "Set 3 Issue 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.102 --> 00:00:08.714\n[MUSIC]\n\n2\n00:00:08.714 --> 00:00:12.801\nIn this video we're gonna tackle Set 3,\nIssue 2.\n\n3\n00:00:12.801 --> 00:00:15.830\nAnd once again we've got\nanother issue on our switches.\n\n4\n00:00:15.830 --> 00:00:18.430\nThis one looks to be more switch\nrelated than server related though, so\n\n5\n00:00:18.430 --> 00:00:19.810\nwe get to mix things up a bit.\n\n6\n00:00:19.810 --> 00:00:21.680\nThe trouble ticket we've\ngot reads like this.\n\n7\n00:00:21.680 --> 00:00:26.790\nIt says your are unable to\ncreate VLANs on NYCORE1.\n\n8\n00:00:26.790 --> 00:00:32.190\nYou should be able to create a VLANs\non both, NYCORE1 and NYCORE2.\n\n9\n00:00:32.190 --> 00:00:35.410\nWell this one actually sounds like\na pretty straightforward problem.\n\n10\n00:00:35.410 --> 00:00:39.470\nThere's really only a couple of things\nthat can stop you from creating VLANs on\n\n11\n00:00:39.470 --> 00:00:40.350\na switch.\n\n12\n00:00:40.350 --> 00:00:44.010\nFor example you might have a switch\nthat doesn't support VLANs, right?\n\n13\n00:00:44.010 --> 00:00:47.390\nWhich pretty much every\nsingle Cisco switch does so\n\n14\n00:00:47.390 --> 00:00:49.130\nthat's more than likely not the case.\n\n15\n00:00:49.130 --> 00:00:52.184\nWe could be out of VLAN numbers, right?\n\n16\n00:00:52.184 --> 00:00:55.240\nYou've only gotten one through\n4,094 on most switches, so\n\n17\n00:00:55.240 --> 00:00:58.530\nif we've gone beyond that, then we\nmight not be able create VLANs there.\n\n18\n00:00:58.530 --> 00:01:02.810\nAnd then, a third thing might be that\nwe're in the VTP client mode, right?\n\n19\n00:01:02.810 --> 00:01:07.270\nClient mode can't create VLANs,\nserver mode, and transfer mode can.\n\n20\n00:01:07.270 --> 00:01:09.480\nAny one of those could be the problem.\n\n21\n00:01:09.480 --> 00:01:12.500\nAfter that,\nI'm hard pressed to think of anything\n\n22\n00:01:12.500 --> 00:01:14.800\nthat could stop us from\ncreating a VLAN on a switch.\n\n23\n00:01:14.800 --> 00:01:17.980\nSo, we should be pretty well set and\ntaken care of, we just have to jump in and\n\n24\n00:01:17.980 --> 00:01:19.049\ncheck for those things.\n\n25\n00:01:19.049 --> 00:01:22.664\nThey're telling me that NYCORE1 is\nthe problem, let's just jump to CORE1 and\n\n26\n00:01:22.664 --> 00:01:23.684\nsee what's going on.\n\n27\n00:01:23.684 --> 00:01:27.965\nSo if I look at my topology, NYCORE1 and\nNYCORE2, that's these two switches right\n\n28\n00:01:27.965 --> 00:01:32.305\nhere, they've got a trunk in between them\nthat's some kind of port channel, right,\n\n29\n00:01:32.305 --> 00:01:34.340\nso there's bonding interfaces.\n\n30\n00:01:34.340 --> 00:01:39.030\nSo they're up and they're communicating,\nand because we've got that port channel\n\n31\n00:01:39.030 --> 00:01:41.960\nthere, if it's configured as a trunk,\nthis is a great scenario for running VTP.\n\n32\n00:01:41.960 --> 00:01:45.860\nSo that's more than likely gonna\nbe our issue, we'll verify, right.\n\n33\n00:01:45.860 --> 00:01:48.650\nThe easiest way to verify this one is\ngonna be to jump to NYCORE1 and just\n\n34\n00:01:48.650 --> 00:01:52.750\ntry and create a VLAN, cuz the odds are if\nwe can't create a VLAN, it'll tell us why.\n\n35\n00:01:52.750 --> 00:01:55.240\nIt'll just say it and\nthat'll solve that problem, right.\n\n36\n00:01:55.240 --> 00:01:58.810\nSo let's jump over to CORE1 and\nsee what it tells us.\n\n37\n00:01:58.810 --> 00:02:01.360\nSo I'm gonna jump over to this switch.\n\n38\n00:02:01.360 --> 00:02:03.380\nLet me just see if I\ncan't get into it first.\n\n39\n00:02:05.050 --> 00:02:08.110\nAnd we'll just jump in and try and\ncreate a VLAN and see what happens.\n\n40\n00:02:08.110 --> 00:02:12.930\nSo if I do a show VLAN, I can look right\nhere and see what VLANs I have already.\n\n41\n00:02:12.930 --> 00:02:14.770\nI've got one and ten through 16.\n\n42\n00:02:14.770 --> 00:02:16.110\nMaybe I'll create VLAN17.\n\n43\n00:02:16.110 --> 00:02:20.450\nSo I'm gonna jump into configuration and\nI'll just type VLAN17.\n\n44\n00:02:20.450 --> 00:02:25.230\nAll right, and sure enough it\ntells us exactly why it won't.\n\n45\n00:02:25.230 --> 00:02:29.640\nVTP VLAN configuration not allowed\nwhen device is in client mode.\n\n46\n00:02:29.640 --> 00:02:31.650\nAll right, so that's gonna be our problem,\n\n47\n00:02:31.650 --> 00:02:35.100\nwhen you're in client mode\nyou can create any VLANs.\n\n48\n00:02:35.100 --> 00:02:36.558\nSo, the solution to this.\n\n49\n00:02:36.558 --> 00:02:38.804\nWell, here's where things get\na little bit tricky, right.\n\n50\n00:02:38.804 --> 00:02:41.510\nThe solution is actually easy.\n\n51\n00:02:41.510 --> 00:02:45.970\nI can switch to VTP server mode,\nor VTP transparent, right.\n\n52\n00:02:45.970 --> 00:02:48.891\nVTP transparent is effective\ngonna break VTP for this switch.\n\n53\n00:02:48.891 --> 00:02:51.933\nIt's not gonna really\nparticipate in VTP anymore.\n\n54\n00:02:51.933 --> 00:02:54.611\nThey said in the question that I\nshould be able to create VLANs\n\n55\n00:02:54.611 --> 00:02:55.830\non both CORE1 and CORE2.\n\n56\n00:02:55.830 --> 00:02:58.760\nSo that means I more than likely\nneed to be in server mode and\n\n57\n00:02:58.760 --> 00:03:01.520\ncore2 needs to be in server mode also,\nright?\n\n58\n00:03:01.520 --> 00:03:04.220\nCORE2 is not causing us any problems,\nI'll bet it's already in server mode but\n\n59\n00:03:04.220 --> 00:03:06.440\nwe'll verify that before\nwe wrap this question up.\n\n60\n00:03:06.440 --> 00:03:10.310\nNow where I say things get tricky,\nthis is in client mode.\n\n61\n00:03:10.310 --> 00:03:15.560\nSo right now I can't make new VLANs, but\nI can still advertise them out, right?\n\n62\n00:03:15.560 --> 00:03:17.520\nI can advertise out to other switches, and\n\n63\n00:03:17.520 --> 00:03:20.360\nif I switched to server\nmode what's gonna happen?\n\n64\n00:03:20.360 --> 00:03:23.370\nWell I continue to advertise out\nright I can still create things.\n\n65\n00:03:23.370 --> 00:03:27.360\nBut if there was a VTP problem, something\nlike a password problem or whatever,\n\n66\n00:03:27.360 --> 00:03:32.900\nmy revision number might make it where I\ncould overwrite other people's settings.\n\n67\n00:03:32.900 --> 00:03:34.860\nAnd so\nwe can run into some problems there.\n\n68\n00:03:34.860 --> 00:03:37.890\nSwitching between transparent mode and\nserver mode, or transparent mode and\n\n69\n00:03:37.890 --> 00:03:39.410\nclient mode will fix that.\n\n70\n00:03:39.410 --> 00:03:42.470\nUsually going from client mode to\nserver mode is pretty safe though.\n\n71\n00:03:42.470 --> 00:03:45.759\nMy revision number in my database should\nbe the same as the other switches that\n\n72\n00:03:45.759 --> 00:03:47.638\nare out there but\nit doesn't hurt to check.\n\n73\n00:03:47.638 --> 00:03:51.894\nSo I'm gonna do a quick show VTP status\njust to make sure that I'm receiving\n\n74\n00:03:51.894 --> 00:03:56.762\ncommunications from somebody else, and I\ndo have configuration last modified by and\n\n75\n00:03:56.762 --> 00:04:01.520\nwe don't know the IP, but we did get a\nmodification, and I've got my seven VLANs.\n\n76\n00:04:01.520 --> 00:04:05.320\nMy revision number is seven,\nnot the number of VLANs.\n\n77\n00:04:05.320 --> 00:04:09.204\nI've actually got 12 VLANs, but if we\ntake away the reserved ones, we've got,\n\n78\n00:04:09.204 --> 00:04:11.716\nwhat is it, eight or\nnine actual VLANs on our system.\n\n79\n00:04:11.716 --> 00:04:15.407\nSo revision number is seven, I'm just\ngonna double check against CORE2 and\n\n80\n00:04:15.407 --> 00:04:17.791\nmake sure it's got the same\nrevision number, and\n\n81\n00:04:17.791 --> 00:04:21.790\nthat way I don't have to run the risk\nof overriding anything too crazy.\n\n82\n00:04:21.790 --> 00:04:26.590\nSo, on this guy,\nI'm gonna do a show VTP status, and\n\n83\n00:04:26.590 --> 00:04:30.540\nthis one, if I kinda look at it here,\nit's operating mode is set to server, so\n\n84\n00:04:30.540 --> 00:04:32.960\nI'm okay there and\nits revision number is seven.\n\n85\n00:04:32.960 --> 00:04:35.500\nSo, we're okay,\nthese guys should be the same.\n\n86\n00:04:35.500 --> 00:04:39.106\nI should just be able to flip from client\nover to server, no big deal there, right?\n\n87\n00:04:39.106 --> 00:04:42.090\nSo I'm gonna take CORE1 and I'll just say,\n\n88\n00:04:42.090 --> 00:04:46.240\nVTP mode server and\nnow I'm in server mode, okay.\n\n89\n00:04:46.240 --> 00:04:49.460\nAnd once I'm in server mode,\nnow I should be able to create VLANs.\n\n90\n00:04:49.460 --> 00:04:53.190\nAnd so if I go back and\nI do VLAN17, I can give it a name.\n\n91\n00:04:53.190 --> 00:04:59.810\nI'll just call this my test VLAN and\nI'll get out.\n\n92\n00:04:59.810 --> 00:05:01.466\nAnd there we go, all right.\n\n93\n00:05:01.466 --> 00:05:03.390\nIt let me create it this time so\nit didn't stop me.\n\n94\n00:05:03.390 --> 00:05:05.250\nLet's just make sure that VTP is working.\n\n95\n00:05:05.250 --> 00:05:10.720\nI created the VLAN here,\nI'm gonna jump over to CORE2 and\n\n96\n00:05:10.720 --> 00:05:13.500\nthe VLAN should get learned here.\n\n97\n00:05:13.500 --> 00:05:19.378\nSo if I do a show VLAN, I should\nsee VLAN 17, Test VLAN, all right.\n\n98\n00:05:19.378 --> 00:05:21.390\nNow technically we're done, right?\n\n99\n00:05:21.390 --> 00:05:26.301\nThe problem was that we couldn't create\nVLANs on CORE1, it was in client mode.\n\n100\n00:05:26.301 --> 00:05:28.518\nWe flipped it to the server mode,\nproblem solved.\n\n101\n00:05:28.518 --> 00:05:31.881\nBut, they did say right at the last\nlittle part of that sentence,\n\n102\n00:05:31.881 --> 00:05:35.700\nyou should be able to create VLANs\non both on NYCORE1 and NYCORE2.\n\n103\n00:05:35.700 --> 00:05:39.470\nSo, just to be on the safe side I'm\ngonna create another VLAN here on CORE2,\n\n104\n00:05:39.470 --> 00:05:41.743\nand make sure that it syncs back again,\nright?\n\n105\n00:05:41.743 --> 00:05:43.740\nThat we've got two way\nsynchronization here.\n\n106\n00:05:43.740 --> 00:05:46.600\nJust in case, right, this problem\ncould be bigger than we think.\n\n107\n00:05:46.600 --> 00:05:52.230\nSo, I'm gonna create VLAN18 which I'll\ncall test VLAN 2, which I probably\n\n108\n00:05:52.230 --> 00:05:57.770\nneed to use the name command to set, there\nwe go and so now I've got that extra VLAN.\n\n109\n00:05:59.420 --> 00:06:01.950\nI'll just do a show VLAN to make\nsure it's there on my database.\n\n110\n00:06:01.950 --> 00:06:03.530\nNow I've got test VLAN and test VLAN 2 and\n\n111\n00:06:03.530 --> 00:06:08.780\nI'm gonna switch over to CORE1 and\njust make sure it shows up here.\n\n112\n00:06:08.780 --> 00:06:10.560\nIf it shows up here, then we're done.\n\n113\n00:06:10.560 --> 00:06:11.740\nPretty straightforward problem.\n\n114\n00:06:12.800 --> 00:06:15.370\nIf it doesn't show up here,\nthen we start troubleshooting that.\n\n115\n00:06:15.370 --> 00:06:18.120\nBut it does, I've got both test VLANs.\n\n116\n00:06:18.120 --> 00:06:21.700\nSo now I'm able to create VLANs on\nboth switches and we're in business.\n\n117\n00:06:21.700 --> 00:06:24.940\nIn this case, it simply turned out\nto be that one of them was set for\n\n118\n00:06:24.940 --> 00:06:27.570\nclient mode and not server mode and\ncouldn't create VLANs.\n\n119\n00:06:27.570 --> 00:06:29.380\nSo pretty straightforward on that one.\n\n120\n00:06:29.380 --> 00:06:30.952\nWe've knocked it out and now it's done.\n\n121\n00:06:30.952 --> 00:06:32.920\nAll right,\nwell that was any easy one for us.\n\n122\n00:06:32.920 --> 00:06:34.547\nWe'll see if we get some\nharder ones coming up.\n\n123\n00:06:34.547 --> 00:06:35.767\nDefinitely stay tuned for\n\n124\n00:06:35.767 --> 00:06:38.881\nthat cuz we got more troubleshooting\nissues coming down the line.\n\n125\n00:06:38.881 --> 00:06:41.161\n[MUSIC]\n\n",
          "vimeoId": "151013770"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #3` from set #3. The trouble ticket states that \"The etherchannel between NYCORE1 and NYCORE2 is not operating correctly as shown by the output of the following command: show interface port-channel 1 etherchannel\"",
          "length": "554",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-3-3-set_3_issue_3-120115-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-3-3-set_3_issue_3-120115-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-3-3-set_3_issue_3-120115-1-sm.jpg",
          "title": "Set 3 Issue 3",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:07.171\n[MUSIC]\n\n2\n00:00:07.171 --> 00:00:09.840\nIt is time for next issue.\n\n3\n00:00:09.840 --> 00:00:12.870\nWe're gonna be jumping into\nissue three for set three, and\n\n4\n00:00:12.870 --> 00:00:16.280\nit looks like we've got some\nproblems with our switches again.\n\n5\n00:00:16.280 --> 00:00:19.960\nIn the middle of our network we've got\nthese two switches that are providing\n\n6\n00:00:19.960 --> 00:00:22.760\ngateway services for some of our clients,\nthese guys right here.\n\n7\n00:00:22.760 --> 00:00:26.010\nAnd I know we've seen in our topology\nthat we've got that port channel running\n\n8\n00:00:26.010 --> 00:00:28.500\nbetween them, and that's what\nthis trouble ticket surrounds it.\n\n9\n00:00:28.500 --> 00:00:30.200\nLet me just read the ticket to us here.\n\n10\n00:00:30.200 --> 00:00:35.430\nIt says the EtherChannel between\nNYCORE1 and NYCORE2 is not\n\n11\n00:00:35.430 --> 00:00:39.050\noperating correctly as shown by\nthe output of the following command, and\n\n12\n00:00:39.050 --> 00:00:43.380\nthen it gives us a command, show\ninterface port-channel 1 ether channel.\n\n13\n00:00:44.410 --> 00:00:48.050\nSo they're giving us a specific command\nthat we need to run to see the output of,\n\n14\n00:00:48.050 --> 00:00:50.280\nso we can see what an issue happens to be.\n\n15\n00:00:50.280 --> 00:00:51.870\nAnd then based on\nthe output of that command,\n\n16\n00:00:51.870 --> 00:00:53.560\nwe need to come up with a solution.\n\n17\n00:00:53.560 --> 00:00:56.230\nSo well we need to go and check that out.\n\n18\n00:00:56.230 --> 00:01:00.760\nSo this is the link here that there\nshowing us we should have ports 23 and\n\n19\n00:01:00.760 --> 00:01:04.990\n24 bonded together into a single link,\nit should be a port channel and\n\n20\n00:01:04.990 --> 00:01:05.870\nit should be up and going.\n\n21\n00:01:05.870 --> 00:01:08.520\nAnd in the syntax here where they give\nus the command, they tell us to run in\n\n22\n00:01:08.520 --> 00:01:12.160\nNYCORE 2, so we'll start our\ntroubleshooting right there in NYCORE 2.\n\n23\n00:01:12.160 --> 00:01:14.840\nSo I'm gonna jump over to that switch.\n\n24\n00:01:16.270 --> 00:01:17.961\nAnd just get logged in to it.\n\n25\n00:01:21.712 --> 00:01:24.900\nAnd well, I guess I should start off with\nrunning the command that they gave us.\n\n26\n00:01:24.900 --> 00:01:25.480\nThey gave it to us for a reason.\n\n27\n00:01:25.480 --> 00:01:32.237\nSo I'm gonna run show interface\nport-channel 1 etherchannel.\n\n28\n00:01:32.237 --> 00:01:36.810\nThat's the command they gave us\nin the problem, gonna run it and\n\n29\n00:01:36.810 --> 00:01:37.730\nsee if we have a problem.\n\n30\n00:01:37.730 --> 00:01:39.360\nAnd so, here I can look at it and\n\n31\n00:01:39.360 --> 00:01:44.170\nit's telling me that we've got\nan etherchannel, one does exist.\n\n32\n00:01:44.170 --> 00:01:45.290\nIt's been up for 51 minutes, so\n\n33\n00:01:45.290 --> 00:01:49.650\nmine's been up almost an hour now,\nI've got number of ports one.\n\n34\n00:01:50.730 --> 00:01:53.160\nWell, I kind of expected\nto see number of ports two.\n\n35\n00:01:53.160 --> 00:01:58.710\nI should see ports 23 and 24 and as I look\ndown here, I've got the port channels up.\n\n36\n00:01:58.710 --> 00:02:01.090\nIt's using port aggregation protocol or\nPAGP.\n\n37\n00:02:01.090 --> 00:02:05.550\nI can see that port 24 is up and\n\n38\n00:02:05.550 --> 00:02:10.090\ndesirable and,\nport 23 is not even on the list.\n\n39\n00:02:10.090 --> 00:02:13.880\nSo, it looks like my problem here\nis that I'm missing a port and\n\n40\n00:02:13.880 --> 00:02:15.260\nwhy am I missing it?\n\n41\n00:02:15.260 --> 00:02:17.450\nWell, maybe it never got\nadded to the port channel,\n\n42\n00:02:17.450 --> 00:02:19.810\nwe need to look at the configuration and\nsee.\n\n43\n00:02:19.810 --> 00:02:22.360\nThere's a few different\nways we can go about this.\n\n44\n00:02:22.360 --> 00:02:24.410\nThis command that they gave us,\nit's not one of my favorites,\n\n45\n00:02:24.410 --> 00:02:27.540\nthis one show interface\nport-channel 1 etherchannel.\n\n46\n00:02:27.540 --> 00:02:28.940\nIt give you some information but\n\n47\n00:02:28.940 --> 00:02:32.390\nit's not as forthcoming with the data\nas some of the other commands.\n\n48\n00:02:32.390 --> 00:02:36.080\nSo for example I like to run,\nshow eitherchannel summary.\n\n49\n00:02:37.160 --> 00:02:39.730\nShow eitherchannel summary\ngives you a nice breakdown and\n\n50\n00:02:39.730 --> 00:02:42.740\nyou see basically the same information.\n\n51\n00:02:42.740 --> 00:02:45.970\nBut it shows us one thing\nthe other one doesn't.\n\n52\n00:02:45.970 --> 00:02:50.060\nThe command they gave us doesn't show\nus when you've got problem interfaces.\n\n53\n00:02:50.060 --> 00:02:52.280\nYou have to know that they're missing.\n\n54\n00:02:52.280 --> 00:02:56.490\nI knew from our diagram that port 23 and\n24 should have been that channel, but\n\n55\n00:02:56.490 --> 00:02:58.010\nit wasn't there.\n\n56\n00:02:58.010 --> 00:02:59.580\nI knew that cuz they gave\nme that information, but\n\n57\n00:02:59.580 --> 00:03:02.470\nif they hadn't given me the information,\nI wouldn't necessarily know that.\n\n58\n00:03:02.470 --> 00:03:05.690\nBut here, see I've got port channel 1 and\n\n59\n00:03:05.690 --> 00:03:10.080\nit's got a status of SU which is it's\nlayer2 and it's in use that's good.\n\n60\n00:03:10.080 --> 00:03:15.150\nAnd then over here I can see the ports and\nit shows port 24 with\n\n61\n00:03:15.150 --> 00:03:19.730\na P which let's me know that it's bundled\nin the port channel right, so it's good.\n\n62\n00:03:19.730 --> 00:03:22.490\nBut it's also got port 23,\nit's got a bad port and\n\n63\n00:03:22.490 --> 00:03:24.128\nthat's something we didn't\nsee in the other command.\n\n64\n00:03:24.128 --> 00:03:31.300\nSo with Fa1/0/23(s) it's got a lower case\nS and if I look up here it's suspended.\n\n65\n00:03:31.300 --> 00:03:35.010\nNow all that really tells me, you know\nthat I didn't get with the other command,\n\n66\n00:03:35.010 --> 00:03:38.700\nis that it is actually\njoined to the port channel.\n\n67\n00:03:38.700 --> 00:03:40.390\nIt's just not coming up.\n\n68\n00:03:40.390 --> 00:03:43.280\nAnd there's usually really\njust two reasons for that.\n\n69\n00:03:44.450 --> 00:03:49.760\nOne reason might be that port 24\nhas a higher speed than port 23,\n\n70\n00:03:49.760 --> 00:03:50.790\nand that's not the case here.\n\n71\n00:03:50.790 --> 00:03:52.210\nSee how both of mine are FAs.\n\n72\n00:03:52.210 --> 00:03:53.330\nThey're fast ethernet.\n\n73\n00:03:53.330 --> 00:03:53.830\nThey're 100 megabit.\n\n74\n00:03:54.900 --> 00:03:58.910\nBut, if one was a gigabit and\nthe other one was 100 megabit.\n\n75\n00:03:58.910 --> 00:04:03.280\nAnd I would expect to see the gigabit\nports go active in the bundle and\n\n76\n00:04:03.280 --> 00:04:06.600\nthe 100 megs go suspended and\nwait until all the gigs fail.\n\n77\n00:04:06.600 --> 00:04:07.350\nThat's the way that, that works.\n\n78\n00:04:07.350 --> 00:04:09.130\nYou're not supposed to\nmix bandwidth like that.\n\n79\n00:04:09.130 --> 00:04:10.100\nThat's not what's going on here.\n\n80\n00:04:11.560 --> 00:04:15.130\nThe other option is that\nit's misconfigured.\n\n81\n00:04:15.130 --> 00:04:17.090\nWhen you bond ports\ntogether in a port channel,\n\n82\n00:04:17.090 --> 00:04:18.880\ntheir configuration needs to be the same.\n\n83\n00:04:18.880 --> 00:04:23.870\nAnd so, in the switch shows we kinda told\nyou guys about how you should really\n\n84\n00:04:23.870 --> 00:04:26.970\nuse the range command anytime you're\nconfiguring interfaces in a bundle,\n\n85\n00:04:26.970 --> 00:04:28.980\nto make sure they all get\nthe same configuration.\n\n86\n00:04:28.980 --> 00:04:31.760\nOr, put the config on the port-channel,\nand\n\n87\n00:04:31.760 --> 00:04:34.730\nit'll apply to the interfaces underneath.\n\n88\n00:04:34.730 --> 00:04:37.670\nIn this case, I'll bet we've just got\nsome kind of different configuration, and\n\n89\n00:04:37.670 --> 00:04:39.910\nfortunately that's a really\neasy one to troubleshoot.\n\n90\n00:04:39.910 --> 00:04:42.268\nWe just have to look at\nthe configuration of the good port and\n\n91\n00:04:42.268 --> 00:04:44.211\ncompare it to the configuration\nof the bad port.\n\n92\n00:04:44.211 --> 00:04:51.004\nSo if I do a show running-config for\nfa1/0/24 that's the good port, right.\n\n93\n00:04:51.004 --> 00:04:53.860\nAnd, well, it's not the good command here,\nI forgot interface.\n\n94\n00:04:53.860 --> 00:04:54.670\nThere we go.\n\n95\n00:04:54.670 --> 00:04:58.070\nSo, here's a good one,\nswitchport trunk encapsulation dot1q,\n\n96\n00:04:58.070 --> 00:05:01.030\nswitchport trunk allowed\nvlan 10 through 16,\n\n97\n00:05:01.030 --> 00:05:04.870\nswitchport mode trunk,\nchannel-group 1 mode desirable.\n\n98\n00:05:04.870 --> 00:05:07.340\nSo, there's the configuration\nwe have on our good port.\n\n99\n00:05:07.340 --> 00:05:09.860\nNow let's look at\na configuration on the bad port.\n\n100\n00:05:09.860 --> 00:05:13.650\nAnd when I bring that one up, all I\nhave to do is look for the differences.\n\n101\n00:05:13.650 --> 00:05:16.520\nIt's encapsulating dot1q,\nit's supporting VLANs 10 through 16.\n\n102\n00:05:16.520 --> 00:05:18.860\nOh here's a winner.\n\n103\n00:05:18.860 --> 00:05:21.520\nSwitchport mode access.\n\n104\n00:05:21.520 --> 00:05:24.230\nThe good port is set to trunk,\nswitchport mode trunk.\n\n105\n00:05:24.230 --> 00:05:27.190\nThis one is set to access,\nswitchport mode access.\n\n106\n00:05:27.190 --> 00:05:29.110\nAnd then we've got channel\ngroup 1 mode desirable.\n\n107\n00:05:29.110 --> 00:05:31.660\nWe just looked for the difference,\nwe found the difference.\n\n108\n00:05:31.660 --> 00:05:33.750\nIf we fix the difference,\nthat'll likely fix the problem.\n\n109\n00:05:33.750 --> 00:05:36.020\nNow let me give you\nguys a word of caution.\n\n110\n00:05:36.020 --> 00:05:38.790\nPort channels can be a little finicky\nsometimes when you start messing with\n\n111\n00:05:38.790 --> 00:05:40.720\nthe individual ports underneath it.\n\n112\n00:05:40.720 --> 00:05:43.350\nSo anytime you change\na port's configuration,\n\n113\n00:05:43.350 --> 00:05:46.170\nI recommend you shut\nthe interface down first.\n\n114\n00:05:46.170 --> 00:05:49.290\nAnd so that's what I'm gonna do is\nI'm gonna jump into my configuration.\n\n115\n00:05:49.290 --> 00:05:50.690\nI'm gonna get into fa1/0/23 and\n\n116\n00:05:50.690 --> 00:05:53.260\nthe first thing I'm gonna do\nis I'm gonna shut it down.\n\n117\n00:05:54.480 --> 00:05:57.930\nBecause right now it's suspended,\nbut it's trying to go active.\n\n118\n00:05:57.930 --> 00:06:01.360\nAnd as I start making changes,\nif I have to make more than one change,\n\n119\n00:06:01.360 --> 00:06:04.700\nit can really get things a little wonky\nand potentially bring the line down.\n\n120\n00:06:04.700 --> 00:06:05.660\nSo you gotta be careful with that.\n\n121\n00:06:05.660 --> 00:06:07.110\nSo I'm gonna shut it down first,\n\n122\n00:06:07.110 --> 00:06:10.670\nwhich is gonna stop it from\ntrying to join the port channel.\n\n123\n00:06:10.670 --> 00:06:14.730\nThen I can say switchport mode trunk so\n\n124\n00:06:14.730 --> 00:06:17.610\nthat it's now set just\nlike the other port.\n\n125\n00:06:17.610 --> 00:06:20.660\nThe two ports should have a near\nidentical configuration at this point\n\n126\n00:06:20.660 --> 00:06:22.580\nwhich we can verify.\n\n127\n00:06:22.580 --> 00:06:25.850\nHere's our good port and\nhere's our bad port.\n\n128\n00:06:25.850 --> 00:06:28.580\nAnd I say they are near identical,\nthey should be actually identical\n\n129\n00:06:28.580 --> 00:06:31.830\nbetween the two now except for\nthat shut down command.\n\n130\n00:06:31.830 --> 00:06:36.360\nAnd so, now that's in business I can do\na no shut down, and it should come up and\n\n131\n00:06:36.360 --> 00:06:38.700\ntry to rejoin the core port channel.\n\n132\n00:06:38.700 --> 00:06:42.490\nAnd since they're identical,\nit shouldn't have any problems.\n\n133\n00:06:42.490 --> 00:06:46.890\nNow I'm gonna wait for just a moment and\nI can continue to do some\n\n134\n00:06:46.890 --> 00:06:49.590\nshow ether channel summary,\nwhich is a command I like.\n\n135\n00:06:50.770 --> 00:06:52.040\nAnd we can run that.\n\n136\n00:06:52.040 --> 00:06:53.720\nAnd I'm waiting for port 23 and\n\n137\n00:06:53.720 --> 00:06:57.169\n24 both to go with a capital P letting me\nknow they're active and in the bundle.\n\n138\n00:06:58.230 --> 00:07:03.070\nAnd then, I can go back to the command\nthey gave us originally, which I'm sure is\n\n139\n00:07:03.070 --> 00:07:08.330\nin my command history here somewhere, show\ninterface port-channel 1 etherchannel.\n\n140\n00:07:08.330 --> 00:07:10.840\nAnd what I should see is that\nI now have the two ports\n\n141\n00:07:10.840 --> 00:07:13.210\nparticipating right in there.\n\n142\n00:07:13.210 --> 00:07:16.340\nYou'll find that etherchannel\nis pretty easy to troubleshoot\n\n143\n00:07:16.340 --> 00:07:19.920\ncuz as long as you have one good port, you\ncan just look at it's config and compare.\n\n144\n00:07:21.290 --> 00:07:25.540\nBe aware though, that the configuration\ncould actually be wrong between the ports\n\n145\n00:07:25.540 --> 00:07:26.820\nand the port channel.\n\n146\n00:07:26.820 --> 00:07:32.070\nSo, if I still have problems I would wanna\ntake a look at that configuration for\n\n147\n00:07:32.070 --> 00:07:33.980\nthe port channel itself.\n\n148\n00:07:33.980 --> 00:07:37.980\nAnd look there and make sure that my\nhardware ports are matching this virtual\n\n149\n00:07:37.980 --> 00:07:41.530\nports configuration cuz if those don't\nmatch they won't go active either.\n\n150\n00:07:41.530 --> 00:07:44.220\nBut in that scenario, I probably would\nhave had all of my physical interfaces\n\n151\n00:07:44.220 --> 00:07:46.030\nsuspended and not just the one.\n\n152\n00:07:46.030 --> 00:07:48.450\nIn this case it's fixed, it's up and\n\n153\n00:07:48.450 --> 00:07:50.940\nnow the port channel is working\nthe way that it needed to.\n\n154\n00:07:50.940 --> 00:07:55.270\nThe other thing is I fixed it\non one side of the port channel,\n\n155\n00:07:55.270 --> 00:07:58.390\nmaybe I'm having a problem on the other\nside of the port channel also.\n\n156\n00:07:58.390 --> 00:07:59.940\nThe mistake was made here.\n\n157\n00:07:59.940 --> 00:08:01.860\nIt makes sense it could have\nhappened on the other side.\n\n158\n00:08:01.860 --> 00:08:04.400\nNow I doubt that's the case,\ncuz these did come up in bond,\n\n159\n00:08:04.400 --> 00:08:08.730\nand they are set to desirable,\nso they're trying to bond.\n\n160\n00:08:08.730 --> 00:08:13.520\nIt's still auto though, so\nif it failed then they could go back to\n\n161\n00:08:13.520 --> 00:08:16.250\nnot being in the bundle, and that\ndidn't happen, they're not standalone.\n\n162\n00:08:16.250 --> 00:08:18.620\nSo we should be good, but\njust to be on the safe side,\n\n163\n00:08:18.620 --> 00:08:23.880\nI'm gonna jump over to CORE1 and verify\nthe configuration on that switch too and\n\n164\n00:08:23.880 --> 00:08:26.880\njust make sure that it's showing\na healthy bundle on its side.\n\n165\n00:08:26.880 --> 00:08:28.690\nSo I'll just do a show\neither channel summary.\n\n166\n00:08:30.360 --> 00:08:34.610\nAnd ports 23 and\n24 are both active in the bundle.\n\n167\n00:08:34.610 --> 00:08:35.830\nLooks like we're good.\n\n168\n00:08:35.830 --> 00:08:38.420\nAll right so in this case it simply\ncame down to one port having\n\n169\n00:08:38.420 --> 00:08:41.430\na different configuration for\na another port in the same port channel.\n\n170\n00:08:41.430 --> 00:08:44.280\nAnd the lower port number one,\nit's the one that went active.\n\n171\n00:08:44.280 --> 00:08:46.640\nThe other one or actually it was\na higher one that won in this case,\n\n172\n00:08:46.640 --> 00:08:48.570\nit was the one that went active and\ntrunking,.\n\n173\n00:08:48.570 --> 00:08:51.890\nThe other was in access mode and\nit was suspended at the end of the day.\n\n174\n00:08:51.890 --> 00:08:55.770\nThe reason the higher port one is it\nmatched the port channel configuration.\n\n175\n00:08:55.770 --> 00:08:59.930\nAnd once we got all that squared away, it\nwas up, it was running and now we're done.\n\n176\n00:08:59.930 --> 00:09:01.600\nAnd that wraps it up for\nthis troubleshooting question.\n\n177\n00:09:01.600 --> 00:09:03.120\nStay tuned we've got more coming up.\n\n178\n00:09:03.120 --> 00:09:05.005\nWe'll do issue number four next for\nset number three.\n\n179\n00:09:05.005 --> 00:09:06.120\nStay tuned for that.\n\n180\n00:09:08.860 --> 00:09:11.591\nMore troubleshooting adventures coming up.\n\n181\n00:09:11.591 --> 00:09:12.630\n[SOUND]\n\n",
          "vimeoId": "151013769"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #4` from set #3. The trouble ticket states that \"You are unable to communicate from PLABCSCO01 to 172.16.16.2 \"",
          "length": "1000",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-3-4-set_3_issue_4-120115-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-3-4-set_3_issue_4-120115-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-3-4-set_3_issue_4-120115-1-sm.jpg",
          "title": "Set 3 Issue 4",
          "transcript": "WEBVTT\n\n1\n00:00:00.160 --> 00:00:08.881\n[MUSIC]\n\n2\n00:00:08.881 --> 00:00:12.192\nIn this video we're gonna take\na look at Set 3, Issue 4, yet\n\n3\n00:00:12.192 --> 00:00:15.632\nanother problem with our Cisco\ntopology here, and on this one,\n\n4\n00:00:15.632 --> 00:00:19.220\nwe've got another server can't\nping an IP type problem, right?\n\n5\n00:00:19.220 --> 00:00:21.190\nSo the troubleshooting ticket\nreads like this, it says.\n\n6\n00:00:21.190 --> 00:00:24.300\nYou are unable to communicate\nfrom PLABCISCO01,\n\n7\n00:00:24.300 --> 00:00:30.280\nwhich is our server that we've\nused before, to 172.16.16.2.\n\n8\n00:00:30.280 --> 00:00:32.450\nSo just some random IP out there.\n\n9\n00:00:32.450 --> 00:00:34.317\nLet's start by taking\na look at our topology and\n\n10\n00:00:34.317 --> 00:00:36.290\nsee if we can't figure out\nwhere that problem is.\n\n11\n00:00:36.290 --> 00:00:37.791\nNow, our server, I know that one,\n\n12\n00:00:37.791 --> 00:00:40.103\nwe've worked with it in\na number of problems, right?\n\n13\n00:00:40.103 --> 00:00:43.400\n192.168.16.10, that one\nhasn't changed much.\n\n14\n00:00:45.160 --> 00:00:49.090\nBut the other network that I'm\ntrying to get to, 172.16.16.2,\n\n15\n00:00:49.090 --> 00:00:51.000\nI'm not familiar with that.\n\n16\n00:00:51.000 --> 00:00:54.652\nSo we might need to zoom out a bit and\ntry and find out where that topology is.\n\n17\n00:00:54.652 --> 00:00:56.720\nI'm gonna look at some of\nthese external networks, and\n\n18\n00:00:56.720 --> 00:00:58.990\nI don't see it in that list over here and\n\n19\n00:00:58.990 --> 00:01:03.190\nI don't see it in this list over here,\nthere we go, there's our culprit.\n\n20\n00:01:03.190 --> 00:01:08.104\nSo, way out here in-between NYWAN1 and\nthis external network NWRKWAN1,\n\n21\n00:01:08.104 --> 00:01:13.481\nwe don't have access to that system,\nthat's out on our fake, kind of, Internet.\n\n22\n00:01:13.481 --> 00:01:14.540\nI can't get to that, right?\n\n23\n00:01:14.540 --> 00:01:21.780\nSo, my server PLABCISCO1 way down here,\ncan't get to this network out here.\n\n24\n00:01:21.780 --> 00:01:23.750\nNow, that's a big jump.\n\n25\n00:01:23.750 --> 00:01:25.830\nIf you look at the topology here,\n\n26\n00:01:25.830 --> 00:01:29.760\nI know that PLABCISCO1 has to go to\nAccess1 because it's plugged into it.\n\n27\n00:01:29.760 --> 00:01:34.550\nAnd I know that NYCORE2 is active for\nHSRP so that's my default gateway, so\n\n28\n00:01:34.550 --> 00:01:35.900\nI've got to go to it.\n\n29\n00:01:35.900 --> 00:01:40.090\nAnd then it's gonna send me to CORE1\nwhich is gonna send me to EDGE1\n\n30\n00:01:40.090 --> 00:01:43.830\nwhich then sends me to WAN1,\nwhich then sends me onto that network.\n\n31\n00:01:43.830 --> 00:01:48.030\nThat is a lot of stuff in-between\nmy host and where it's going.\n\n32\n00:01:49.110 --> 00:01:53.280\nSo I can eat up a ton of time here,\ntroubleshooting each step along the way,\n\n33\n00:01:53.280 --> 00:01:55.500\ntrying to figure out where\nthis problem sets in.\n\n34\n00:01:56.520 --> 00:01:59.470\nBut we can probably rein that\nin a little bit faster and\n\n35\n00:01:59.470 --> 00:02:02.460\nuse a tool like traceroute to be able to\nquickly isolate where that problem is.\n\n36\n00:02:02.460 --> 00:02:05.730\nWhat traceroute does is\ntraceroute lets you kind of\n\n37\n00:02:05.730 --> 00:02:09.240\nnarrow down the source of\nthe problem to two devices.\n\n38\n00:02:09.240 --> 00:02:10.440\nBasically, when we run traceroute,\n\n39\n00:02:10.440 --> 00:02:13.320\nit's gonna send those pings out to\neach hop along this journey, well,\n\n40\n00:02:13.320 --> 00:02:16.248\neach layer of three hops, so\nit wouldn't send one to access one.\n\n41\n00:02:16.248 --> 00:02:20.750\nBut it's gonna hit each hop along\nthe journey and wherever it stops,\n\n42\n00:02:20.750 --> 00:02:25.750\nthe node that it stops on is either the\nproblem or the next hop, is the problem.\n\n43\n00:02:25.750 --> 00:02:27.480\nSo it gets me down to those two hosts,\n\n44\n00:02:27.480 --> 00:02:29.460\njust those two people that\ncould be part of the problem.\n\n45\n00:02:29.460 --> 00:02:30.700\nSo let's do that.\n\n46\n00:02:30.700 --> 00:02:32.580\nLet's see if we can't narrow this\ndown to a couple of hosts and\n\n47\n00:02:32.580 --> 00:02:34.940\nthen we'll go from there as far as\nfiguring out what the problem is.\n\n48\n00:02:34.940 --> 00:02:38.690\nSo I'm gonna jump down to PLABCISCO01 and\n\n49\n00:02:38.690 --> 00:02:42.990\non that server,\nI'm just gonna do that traceroute.\n\n50\n00:02:42.990 --> 00:02:46.196\nI guess I should verify the problem,\nright, so I'll go ahead and\n\n51\n00:02:46.196 --> 00:02:47.020\ndo a quick ping.\n\n52\n00:02:47.020 --> 00:02:52.635\nI'll try and do a ping to 172.16.16.2 and\n\n53\n00:02:52.635 --> 00:02:55.640\nI expect it to fail, right?\n\n54\n00:02:55.640 --> 00:02:58.190\nThat's the trouble shooting ticket so\nwe'll give that a moment.\n\n55\n00:02:58.190 --> 00:03:01.350\nAnd assuming it fails, then that's that.\n\n56\n00:03:01.350 --> 00:03:05.080\nNow we always wanna let the first one fail\nbecause of AARP, but after that, yeah.\n\n57\n00:03:05.080 --> 00:03:08.240\nThat's a good solid failure right there,\nso we'll just wait a moment for\n\n58\n00:03:08.240 --> 00:03:11.710\nthat to finish and\nthen I'm just gonna run a trace route.\n\n59\n00:03:11.710 --> 00:03:17.910\nAnd the trace route, I expect it to\nhit the default gateway first, right?\n\n60\n00:03:17.910 --> 00:03:21.980\nSo when I do that\ntraceroute to 172.16.16.2,\n\n61\n00:03:21.980 --> 00:03:25.240\nthe first hop is my default gateway.\n\n62\n00:03:25.240 --> 00:03:27.390\nIf I can't even get to\nthe default gateway,\n\n63\n00:03:27.390 --> 00:03:32.170\nthen I've got either a problem on\nNYACCESS1 or a problem on NYCORE2, right?\n\n64\n00:03:32.170 --> 00:03:37.220\nMy default gateway, but I got there and\nthen if we kind of look back at\n\n65\n00:03:37.220 --> 00:03:44.740\nour topology, we go from NYCORE2 we\npass through CORE1 to get up to EDGE1.\n\n66\n00:03:44.740 --> 00:03:47.971\nSo I expect to see EDGE1 next and I do.\n\n67\n00:03:47.971 --> 00:03:52.348\nRight, that .4 right there is EDGE1 and\nthen from EDGE1,\n\n68\n00:03:52.348 --> 00:03:57.750\nwe expect to see NYWAN1 next and\nI sure do, 192.168.255.5.\n\n69\n00:03:57.750 --> 00:04:01.710\nNow if you don't have the IPs memorized,\nI don't blame you.\n\n70\n00:04:01.710 --> 00:04:04.310\nIt's a lot of different IPs\nthat we've seen in the show.\n\n71\n00:04:04.310 --> 00:04:07.840\nBut we can always jump to these devices\nand do a quick show IP interface brief and\n\n72\n00:04:07.840 --> 00:04:10.580\nverify these IPs are assigned\nwhere they say they are.\n\n73\n00:04:10.580 --> 00:04:13.890\nA good network document would\nhave that also, mine doesn't,\n\n74\n00:04:13.890 --> 00:04:15.960\nbut that's what they provided me with.\n\n75\n00:04:15.960 --> 00:04:18.180\nAnd on the exam, you only have\nthe information they give you.\n\n76\n00:04:18.180 --> 00:04:20.800\nSo you might have to jump around\nthrough some devices to check.\n\n77\n00:04:20.800 --> 00:04:25.171\nNow, the important takeaway here for\nme Is that it stopped,\n\n78\n00:04:25.171 --> 00:04:33.080\nthat 192.168.255.5, that's the last top\nin my traceroute and that's NYWAN1.\n\n79\n00:04:33.080 --> 00:04:38.990\nI can verify that if I go to NYWAN1 and\ndo a show IP interface brief.\n\n80\n00:04:42.330 --> 00:04:47.710\nI can look and see if I've got that\n192.168.255.5, and I sure do, there it is.\n\n81\n00:04:47.710 --> 00:04:50.820\nSo this is the host,\nthis is where it stopped, okay?\n\n82\n00:04:50.820 --> 00:04:57.155\nI was able to get all the way through\nmy LAN and then I stop right there.\n\n83\n00:04:57.155 --> 00:05:00.694\nSo I don't have to look in access 1,\nI don't have to look at CORE1 and CORE2.\n\n84\n00:05:00.694 --> 00:05:02.295\nI don't even have to look at EDGE1.\n\n85\n00:05:02.295 --> 00:05:04.405\nI can just go straight to NYWAN1.\n\n86\n00:05:04.405 --> 00:05:07.325\nThe problem is either gonna be here or\nthe next hop.\n\n87\n00:05:07.325 --> 00:05:10.280\nNow, the next hop is the host\nthat I'm trying to get to.\n\n88\n00:05:10.280 --> 00:05:13.580\nIt's possible that host could just be\nturned off and that's outside my network.\n\n89\n00:05:13.580 --> 00:05:14.230\nThat's not my problem.\n\n90\n00:05:14.230 --> 00:05:15.990\nThat's somebody else's problem, right?\n\n91\n00:05:15.990 --> 00:05:19.410\nSo if that's the case, then this is gonna\nbe easiest troubleshooting ticket ever.\n\n92\n00:05:19.410 --> 00:05:22.160\nWe just say, not our problem and\nmove on to the next one.\n\n93\n00:05:22.160 --> 00:05:28.080\nWe can verify that really easy on NYWAN1,\ncan it get to 172.16.16.2?\n\n94\n00:05:28.080 --> 00:05:31.470\nIf it can,\nthen the problem is right here on NYWAN1.\n\n95\n00:05:31.470 --> 00:05:34.450\nNow I know the device where\nthe problem exists, I can then,\n\n96\n00:05:34.450 --> 00:05:36.180\nwork on the problem, alright?\n\n97\n00:05:36.180 --> 00:05:39.430\nBut, if it can't get there,\nthen I know it's not my fault.\n\n98\n00:05:39.430 --> 00:05:43.492\nSo, I'm gonna jump over to NYWAN1 and\nwe'll just do a quick test ping,\n\n99\n00:05:43.492 --> 00:05:44.460\nall right?\n\n100\n00:05:44.460 --> 00:05:49.518\nSo I'm gonna do a ping to 172.16.16.2\nright here from NYWAN1 and it can\n\n101\n00:05:49.518 --> 00:05:54.520\nget there so that host, the person sitting\noutside of the network, they're up.\n\n102\n00:05:54.520 --> 00:05:58.017\nThey're ready to listen, but\nour server can't get there, and\n\n103\n00:05:58.017 --> 00:06:00.360\nit's something going on here on NYWAN1.\n\n104\n00:06:00.360 --> 00:06:04.825\nNow I say that, it's not a 100%\nsure that it's here on NYWAN1.\n\n105\n00:06:04.825 --> 00:06:08.645\nThere could be other issues throughout\nthe network, we've seen things like\n\n106\n00:06:08.645 --> 00:06:12.985\nroute redistribution where you don't have\na return route, or access control lists,\n\n107\n00:06:12.985 --> 00:06:16.345\nwhere you filter the traffic that could be\nhappening anywhere throughout our network\n\n108\n00:06:16.345 --> 00:06:18.855\nbut the odds are it is\nsomething right here.\n\n109\n00:06:18.855 --> 00:06:20.975\nI've got a bad NAT configuration or\n\n110\n00:06:20.975 --> 00:06:23.205\nsomething like that that's in place\nthat's causing this not to work.\n\n111\n00:06:23.205 --> 00:06:25.971\nSo let's see what happens right.\n\n112\n00:06:25.971 --> 00:06:29.990\nWhen that traffic comes in one of\nmy interfaces, it's coming in this\n\n113\n00:06:29.990 --> 00:06:35.211\n192.168.255.5 interface because that's\nwhats I saw in the trace route.\n\n114\n00:06:35.211 --> 00:06:40.750\nAnd then I'm routing it to\nthe 172.16.16.1 interface.\n\n115\n00:06:40.750 --> 00:06:47.340\nOkay, well if you look at it,\nthe 192.168.255.5 that's Serial0/1/0 and\n\n116\n00:06:47.340 --> 00:06:51.640\nif I look at my diagram that's\nthis interface right here.\n\n117\n00:06:51.640 --> 00:06:56.570\nThe only interface that has the points to\nmy LAN, but the 172.16.16.0 interface,\n\n118\n00:06:56.570 --> 00:07:00.016\nsee where it shows GI0/1?\n\n119\n00:07:00.016 --> 00:07:03.130\nIt shows that it's on\na gigabyte interface.\n\n120\n00:07:03.130 --> 00:07:07.780\nBut when I looked at that switch it\nwasn't on the gigabit interface, was it?\n\n121\n00:07:07.780 --> 00:07:12.009\nWell it sort of is, if I look up\nhere I've got Gigabitethernet0/1 and\n\n122\n00:07:12.009 --> 00:07:18.360\nthere's 172.16.16.1 but\nI also have it again for NVI0, right?\n\n123\n00:07:19.590 --> 00:07:21.340\nNVI0, what the heck is that?\n\n124\n00:07:21.340 --> 00:07:22.950\nNAT virtual interface.\n\n125\n00:07:22.950 --> 00:07:24.030\nSo I am NATing.\n\n126\n00:07:24.030 --> 00:07:25.870\nI'm NATing my internal host.\n\n127\n00:07:25.870 --> 00:07:28.320\nWell, I assume,\nI haven't looked at the configuration yet.\n\n128\n00:07:28.320 --> 00:07:31.835\nI'm NATing those internal hosts to\nthe IP address of this interface before\n\n129\n00:07:31.835 --> 00:07:32.630\nsending it out.\n\n130\n00:07:32.630 --> 00:07:36.570\nAnd that's important because\nthe external host is 172.16.16.2.\n\n131\n00:07:36.570 --> 00:07:41.000\nWhat if it doesn't have\na return route to 192.168.16?\n\n132\n00:07:41.000 --> 00:07:42.550\nIt probably doesn't, but here,\n\n133\n00:07:42.550 --> 00:07:46.855\nit won't need it cuz it's gonna see\nthe traffic coming from 172.16.16.1,\n\n134\n00:07:46.855 --> 00:07:51.400\nthat's an overloaded IP which is\nwhy I see it assigned to that NVI0.\n\n135\n00:07:51.400 --> 00:07:56.630\nSo, I know NATs in play and it's a great\npossibility that, that's our problem.\n\n136\n00:07:56.630 --> 00:07:58.444\nIf we're being excluded from NAT,\n\n137\n00:07:58.444 --> 00:08:01.840\nthen the traffic's not gonna be\nallowed to come back to us, okay?\n\n138\n00:08:01.840 --> 00:08:05.970\nAnd you could run a quick\nshow IP nat translations\n\n139\n00:08:05.970 --> 00:08:08.599\nto see if you have any in place.\n\n140\n00:08:08.599 --> 00:08:11.320\nThis command is great in real life land.\n\n141\n00:08:11.320 --> 00:08:15.670\nBut I'll tell you in a lab and on an exam\nit's not terribly useful and that's\n\n142\n00:08:15.670 --> 00:08:19.680\nbecause on the exam and here in the labs\nwe're usually using ping to test things.\n\n143\n00:08:19.680 --> 00:08:23.580\nAnd pings are session-less, they just\nthrow their data and it comes back.\n\n144\n00:08:23.580 --> 00:08:27.030\nSo their sessions don't stay\nin your NAT tables very long.\n\n145\n00:08:27.030 --> 00:08:30.270\nSo it's pretty common that your NAT tables\njust be empty in a lab environment, and\n\n146\n00:08:30.270 --> 00:08:31.420\nthat's what I'm seeing here.\n\n147\n00:08:31.420 --> 00:08:34.110\nSo it's not like I can see whether\nthe translations are working.\n\n148\n00:08:34.110 --> 00:08:36.940\nI'm gonna have to look at the\nconfiguration and verify it, all right.\n\n149\n00:08:36.940 --> 00:08:41.940\nSo I'm just gonna do a show\nrunning-config and we'll verify it, okay?\n\n150\n00:08:41.940 --> 00:08:44.220\nNow, with NAT you're looking for\ntwo things.\n\n151\n00:08:44.220 --> 00:08:47.500\nFirst off, you're looking to make\nsure the interfaces are flagged.\n\n152\n00:08:47.500 --> 00:08:52.126\nWhen we look at our topology,\nmy traffic is coming\n\n153\n00:08:52.126 --> 00:08:56.652\nin serial 0/1/0 and going out, GI0/1.\n\n154\n00:08:56.652 --> 00:09:00.310\nSo those are the two interfaces I need to\nmake sure that they're set up for NAT.\n\n155\n00:09:00.310 --> 00:09:05.170\nAnd so if I go back to the router, I'm\njust gonna scroll down here until I get to\n\n156\n00:09:05.170 --> 00:09:10.510\nthose interfaces, here's GI0/1 and\nI can see IP NAT enable.\n\n157\n00:09:10.510 --> 00:09:12.590\nOkay, so it does have nat turned on.\n\n158\n00:09:12.590 --> 00:09:15.970\nAnd then if I go down to Serial0/1/0,\n\n159\n00:09:15.970 --> 00:09:19.980\nit's got IP nat enabled so\nthe interfaces are set up properly.\n\n160\n00:09:19.980 --> 00:09:21.910\nThat was the first thing\nI was looking for.\n\n161\n00:09:21.910 --> 00:09:26.240\nThe second thing I'm looking for is\nthe line that defines how NAT is working.\n\n162\n00:09:26.240 --> 00:09:31.280\nNormally, we've got an access list\nthat's tied to an interface IP, and\n\n163\n00:09:31.280 --> 00:09:32.500\nis set to overload, right?\n\n164\n00:09:32.500 --> 00:09:34.040\nThose are kind of\nthe things I expect to see.\n\n165\n00:09:34.040 --> 00:09:37.200\nSo I'm gonna look for\nthe line that starts with ipnat, and\n\n166\n00:09:37.200 --> 00:09:40.700\nit'll be buried in here somewhere,\nunless I scrolled past it.\n\n167\n00:09:40.700 --> 00:09:43.718\nI might need to do a search to\nfind it a little easier, but\n\n168\n00:09:43.718 --> 00:09:45.720\nit'll be buried in here somewhere.\n\n169\n00:09:45.720 --> 00:09:50.429\nAnd what, here, let me just I'll\ndo a show running config and\n\n170\n00:09:50.429 --> 00:09:53.339\nI'll filter that for IP nat, right?\n\n171\n00:09:53.339 --> 00:09:55.100\nAnd this is what I'm looking for\nright here.\n\n172\n00:09:55.100 --> 00:09:58.460\nIP nat source list NATME, okay?\n\n173\n00:09:58.460 --> 00:10:03.514\nSo there's an access list called NATME and\nanybody who matches that ACL,\n\n174\n00:10:03.514 --> 00:10:08.326\nis gonna be natted to the IP address\nof GigabitEthernet0/1 which is\n\n175\n00:10:08.326 --> 00:10:12.340\n172.16.16.16.1 and it's overloading.\n\n176\n00:10:12.340 --> 00:10:14.300\nIt's doing port address translation so\n\n177\n00:10:14.300 --> 00:10:16.670\nthat more than one person\ncan share that IP.\n\n178\n00:10:16.670 --> 00:10:19.504\nSo, if my client is not in that ACL,\n\n179\n00:10:19.504 --> 00:10:23.760\nthen I'm not gonna match;\nI'm not gonna get NATed.\n\n180\n00:10:23.760 --> 00:10:25.690\nI'm not gonna be able to\nget to the destination.\n\n181\n00:10:25.690 --> 00:10:27.790\nSo let's take a look at that access list.\n\n182\n00:10:27.790 --> 00:10:34.200\nI'm gonna do a show access-list,\nand here's the NATME ACL.\n\n183\n00:10:34.200 --> 00:10:40.220\nNow looking at the NATME ACL,\nI can see line number 10, permit ip\n\n184\n00:10:40.220 --> 00:10:47.550\nany any time range allowed time inactive\nand that's the only line, all right?\n\n185\n00:10:47.550 --> 00:10:53.150\nNow permit ip any any, if it was left\nlike that, any IP address would be\n\n186\n00:10:53.150 --> 00:10:57.790\nallowed to be matted and we'd pass right\nthrough and that'd be the end of it, okay?\n\n187\n00:10:57.790 --> 00:11:02.700\nBut I might not be being added and the\nreason I'm not is because permit ip any\n\n188\n00:11:02.700 --> 00:11:06.320\nany is great, it catches everybody, but\nthere's a time range attached to this.\n\n189\n00:11:06.320 --> 00:11:09.660\nAnd the time range is called ALLOW_TIMED,\nand\n\n190\n00:11:09.660 --> 00:11:13.730\nthen based on ALLOW_TIMED,\nit's set to inactive.\n\n191\n00:11:13.730 --> 00:11:17.980\nAnd so right now, whatever time ranges\nset for this ACL, we're not inside of it.\n\n192\n00:11:17.980 --> 00:11:19.560\nWe're outside of that time range.\n\n193\n00:11:19.560 --> 00:11:21.240\nAnd because we're outside\nof the time range,\n\n194\n00:11:21.240 --> 00:11:23.320\nit's inactive this line isn't applying.\n\n195\n00:11:23.320 --> 00:11:28.820\nWell in an ACL, what happens if I\ndon't match the one line that's there?\n\n196\n00:11:28.820 --> 00:11:31.730\nThere's an implicit deny\nall right after it, okay.\n\n197\n00:11:31.730 --> 00:11:34.870\nAnd so when this goes inactive,\neverybody is being denied.\n\n198\n00:11:34.870 --> 00:11:38.920\nI mean nobody is being NAT'ed when they\npass through this router right now and\n\n199\n00:11:38.920 --> 00:11:40.790\nI'll be that's what's causing our problem.\n\n200\n00:11:40.790 --> 00:11:42.960\nFortunately, it's easy to test,\nwe can just turn off the timer.\n\n201\n00:11:42.960 --> 00:11:44.610\nWell, you get two choices I guess.\n\n202\n00:11:44.610 --> 00:11:48.540\nWe could correct the timer to encompass\nthe time that we're doing right now.\n\n203\n00:11:48.540 --> 00:11:52.400\nOn the exam that's a bad idea,\njust because you don't necessarily know\n\n204\n00:11:52.400 --> 00:11:55.470\nhow it's handling time in a virtual\nenvironment like those labs are.\n\n205\n00:11:55.470 --> 00:11:56.920\nThis is real equipment so it'd be easy for\n\n206\n00:11:56.920 --> 00:12:01.830\nme to do that, but it's probably easier\njust to turn the time off on this one.\n\n207\n00:12:01.830 --> 00:12:06.140\nAnd so all I need to do is take a look\nat that axis list and we can jump in and\n\n208\n00:12:06.140 --> 00:12:07.630\nget that kind of squared away.\n\n209\n00:12:07.630 --> 00:12:13.340\nSo, if we wanna try and fix that,\nwell, it's tied to a time range.\n\n210\n00:12:13.340 --> 00:12:16.960\nWe can just modify the time range or\nmodify the ACL.\n\n211\n00:12:16.960 --> 00:12:19.880\nThe time range itself if\nyou want to go that route.\n\n212\n00:12:19.880 --> 00:12:22.270\nWhat I'm gonna do is I'm\njust gonna do a show run and\n\n213\n00:12:22.270 --> 00:12:24.850\nI'm gonna tell it to\nbegin with the word time.\n\n214\n00:12:24.850 --> 00:12:26.920\nSo that I can jump right to, oh shoot,\n\n215\n00:12:26.920 --> 00:12:28.700\nI got more than one\ninstance of the word time.\n\n216\n00:12:28.700 --> 00:12:31.870\nAll right, well we'll just hunt for\nthe time range defined in the config.\n\n217\n00:12:31.870 --> 00:12:33.070\nIt'll be buried in here.\n\n218\n00:12:33.070 --> 00:12:35.980\nLet me just kind of skim through,\nwe'll find it and\n\n219\n00:12:35.980 --> 00:12:37.170\nthen you can see the time range.\n\n220\n00:12:37.170 --> 00:12:39.510\nSo if you wanna go the route\nof modifying the time range,\n\n221\n00:12:39.510 --> 00:12:41.130\nit's not a hard thing to do.\n\n222\n00:12:41.130 --> 00:12:44.800\nThe hardest part,\nis apparently finding it in our config.\n\n223\n00:12:44.800 --> 00:12:49.650\nIt is, somewhere in here.\n\n224\n00:12:49.650 --> 00:12:52.120\nThere it is,\nway down at the bottom, all right.\n\n225\n00:12:52.120 --> 00:12:56.510\nSo here we've got time-range,\nALLOW TIMED that's the time range.\n\n226\n00:12:56.510 --> 00:13:01.720\nAnd it's got an absolute start of\nmidnight, January first, 2034.\n\n227\n00:13:01.720 --> 00:13:03.440\nWe are in the future, right?\n\n228\n00:13:03.440 --> 00:13:05.260\nThat's the problem,\nit's not starting for a long, long time.\n\n229\n00:13:05.260 --> 00:13:09.100\nAnd then it's got an end\ndate of January first 2035.\n\n230\n00:13:09.100 --> 00:13:10.670\nSo there's our problem.\n\n231\n00:13:10.670 --> 00:13:16.370\nSo solution one, we could modify the time\nrange, and set it to start in a realistic\n\n232\n00:13:16.370 --> 00:13:21.100\ntime that it would run solution two would\njust be to remove the time range, right?\n\n233\n00:13:21.100 --> 00:13:23.670\nAnd if I keep looking at my configuration,\n\n234\n00:13:23.670 --> 00:13:29.440\nI can find where the ACL was defined,\nright here.\n\n235\n00:13:29.440 --> 00:13:31.900\nAnd we could just remove the time range,\nright?\n\n236\n00:13:31.900 --> 00:13:34.016\nThat time range is kinda dumb anyway, and\n\n237\n00:13:34.016 --> 00:13:36.801\nthey didn't really give me\nan ideal time range to use.\n\n238\n00:13:36.801 --> 00:13:40.865\nSo if I go and adjust the time, I'm just\npicking something arbitrary probably be\n\n239\n00:13:40.865 --> 00:13:42.972\neasier just to go in and remove that line.\n\n240\n00:13:42.972 --> 00:13:44.420\nAnd so that's what I'm gonna do.\n\n241\n00:13:44.420 --> 00:13:47.330\nI'll just jump in there and\nchange it and remove that line.\n\n242\n00:13:47.330 --> 00:13:51.010\nSo, to fix this one,\nthis is kind of line 10.\n\n243\n00:13:51.010 --> 00:13:54.320\nIn fact, I could even leave it in there if\nI wanted to, just insert a line five that\n\n244\n00:13:54.320 --> 00:13:58.600\npermits my host or everybody else and then\nwe can even leave that in if we wanted.\n\n245\n00:13:58.600 --> 00:14:01.489\nMaybe I'll go that route, we got more\nthan one solution to our problem.\n\n246\n00:14:02.890 --> 00:14:07.050\nAll right so, whoops, [LAUGH] I'm gonna\nexit the router, that's all of my plan.\n\n247\n00:14:07.050 --> 00:14:08.171\nI'm gonna get into my configuration.\n\n248\n00:14:08.171 --> 00:14:12.952\nI'll do an ip access-list extended and\n\n249\n00:14:12.952 --> 00:14:16.190\nthe list was called NATME.\n\n250\n00:14:16.190 --> 00:14:19.390\nAnd actually I don't remember if\nit had a space in its name or not.\n\n251\n00:14:19.390 --> 00:14:20.310\nI don't think it did.\n\n252\n00:14:21.750 --> 00:14:24.879\nI guess we can verify that real quick.\n\n253\n00:14:24.879 --> 00:14:28.830\nLet me just do a, show access-list,\nmake sure I didn't create a new one.\n\n254\n00:14:28.830 --> 00:14:33.320\nYeah, it was just called NATME an I could\nremove line 10 and just add another one.\n\n255\n00:14:33.320 --> 00:14:38.890\nSo I could say, no 10, and get 10 out of\nthere, and then put in a new line 10.\n\n256\n00:14:38.890 --> 00:14:43.010\nSo I could say permit ip any any,\n\n257\n00:14:43.010 --> 00:14:48.350\nand now I've got it with no crazy\ntime range, it's just removed.\n\n258\n00:14:48.350 --> 00:14:52.979\nAnd if I get out of that,\nI can do a show access-list, whoops,\n\n259\n00:14:52.979 --> 00:14:54.870\nwhich I might be able to spell.\n\n260\n00:14:57.060 --> 00:14:59.520\nAnd now I've got that NATME set up\n\n261\n00:14:59.520 --> 00:15:03.510\nwhere it'll permit everybody through to\nget NATed, no time applied to it anymore.\n\n262\n00:15:03.510 --> 00:15:05.710\nAll right, so\nthat's more than likely our problem.\n\n263\n00:15:05.710 --> 00:15:06.610\nWe could stop right here.\n\n264\n00:15:06.610 --> 00:15:09.350\nBut we definitely need to test it because\nthere's other things that could be\n\n265\n00:15:09.350 --> 00:15:10.310\na problem, too.\n\n266\n00:15:10.310 --> 00:15:13.260\nI fixed NAT, maybe there's\nsomething else going on, right?\n\n267\n00:15:13.260 --> 00:15:17.100\nI do see there's another access list\nup here that's doing something and\n\n268\n00:15:17.100 --> 00:15:18.270\nI haven't seen that one.\n\n269\n00:15:18.270 --> 00:15:22.490\nAlthough it's got a big fat permit ip any\nany, so I'm probably safe with this one.\n\n270\n00:15:22.490 --> 00:15:28.060\nBut you never know, so let's go and test\nit out, I'm gonna jump over to PLABCISCO01\n\n271\n00:15:28.060 --> 00:15:33.240\nand we'll just retest that\nping from the very beginning.\n\n272\n00:15:33.240 --> 00:15:36.080\nAnd now we can get there, all right?\n\n273\n00:15:36.080 --> 00:15:41.970\nSo this one turned out to be\nNAT which was actually caused\n\n274\n00:15:41.970 --> 00:15:46.250\nby an ACL which was actually caused by\na time range assigned to a particular ACE,\n\n275\n00:15:46.250 --> 00:15:48.230\nan access control entry, on that list.\n\n276\n00:15:48.230 --> 00:15:50.270\nSo kind of a cascading problem, right?\n\n277\n00:15:50.270 --> 00:15:51.290\nEach one was a symptom,\n\n278\n00:15:51.290 --> 00:15:55.330\nthe actual cause being that the time\nrange was set to the wrong year.\n\n279\n00:15:55.330 --> 00:15:58.060\nAnd that made this ACL not apply,\nand we weren't getting that.\n\n280\n00:15:58.060 --> 00:16:00.270\nAnd now we are, and\nwe're up and we're going and\n\n281\n00:16:00.270 --> 00:16:02.820\nwe're communicated so\nthat kind of solves this one.\n\n282\n00:16:02.820 --> 00:16:04.690\nA little bit trickier\nbecause we had to dig deep.\n\n283\n00:16:04.690 --> 00:16:07.850\nFortunately, we used traceroute to\nfind the source of the problem, right?\n\n284\n00:16:07.850 --> 00:16:08.884\nTo get right to that point and\n\n285\n00:16:08.884 --> 00:16:11.590\nnot have to look at a bunch of\nequipment that wasn't involved.\n\n286\n00:16:11.590 --> 00:16:14.790\nAnd then we were able to troubleshoot it\nfrom there and kind of locate that issue.\n\n287\n00:16:14.790 --> 00:16:17.650\nDoing a show running dash config was\nreally useful here because there were so\n\n288\n00:16:17.650 --> 00:16:19.370\nmany different possible problems.\n\n289\n00:16:19.370 --> 00:16:21.770\nIt just allow us to skim\nover the config and look for\n\n290\n00:16:21.770 --> 00:16:23.820\nthe issues that kind of\njump right out at us.\n\n291\n00:16:23.820 --> 00:16:25.840\nAll right, well,\nthat knocks this problem out.\n\n292\n00:16:25.840 --> 00:16:26.390\nStayed tuned,\n\n293\n00:16:26.390 --> 00:16:28.910\nwe've got more troubleshooting issues\nbefore we're done with set three.\n\n294\n00:16:28.910 --> 00:16:35.015\nSo I hope to see you then, otherwise,\ngood luck with your troubleshooting.\n\n295\n00:16:35.015 --> 00:16:39.874\n[SOUND]\n\n",
          "vimeoId": "151013767"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #5` from set #3. The trouble ticket states that \"NYCORE1 is the active HSRP member for VLAN 14, this should be NYCORE2 \"",
          "length": "1267",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-3-5-set_3_issue_5-120115-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-3-5-set_3_issue_5-120115-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-3-5-set_3_issue_5-120115-1-sm.jpg",
          "title": "Set 3 Issue 5",
          "transcript": "WEBVTT\n\n1\n00:00:00.025 --> 00:00:04.206\n[SOUND] All right,\n\n2\n00:00:04.206 --> 00:00:11.180\nit is time for Set 3 Issue 5.\n\n3\n00:00:11.180 --> 00:00:12.754\nAnd we've got a winner on this one.\n\n4\n00:00:12.754 --> 00:00:16.021\nIt's gonna be a nice complex one if you\ngot used to some of the easy I can't\n\n5\n00:00:16.021 --> 00:00:16.620\nping stuff.\n\n6\n00:00:16.620 --> 00:00:17.790\nNow we get some fun.\n\n7\n00:00:17.790 --> 00:00:22.230\nThis one, it's sounds like a pretty easy\none, but it's actually pretty difficult.\n\n8\n00:00:22.230 --> 00:00:27.593\nWhat we're dealing with here is an HSRP\nissue and the ticket reads like this,\n\n9\n00:00:27.593 --> 00:00:32.890\nNYCORE1 is the active HSRP member for\nVLAN 14, this should be NYCORE2.\n\n10\n00:00:32.890 --> 00:00:35.060\nSounds easy enough, right?\n\n11\n00:00:35.060 --> 00:00:37.900\nGot HSRP configured between\nthese two switches.\n\n12\n00:00:37.900 --> 00:00:40.440\nOne's supposed to be active,\none's supposed to be standby and for\n\n13\n00:00:40.440 --> 00:00:41.550\nsome reason it's backwards.\n\n14\n00:00:41.550 --> 00:00:45.660\nIn my mind I'm listening to that and\nI'm thinking, all right well one node must\n\n15\n00:00:45.660 --> 00:00:49.890\nbe down or one node has the wrong\npriority, this will be an easy fix.\n\n16\n00:00:49.890 --> 00:00:52.130\nBut if we take a look\nat that configuration,\n\n17\n00:00:52.130 --> 00:00:54.180\nwe'll actually see that\nthat's not the case.\n\n18\n00:00:54.180 --> 00:00:57.740\nSo we're gonna have to do a little work\non this to figure out why that is.\n\n19\n00:00:57.740 --> 00:01:00.070\nLet's take a look at our\ntopology before we get started.\n\n20\n00:01:00.070 --> 00:01:04.110\nThe two switches in question are these\nguys right here, NYCORE1 and NYCORE2.\n\n21\n00:01:04.110 --> 00:01:08.330\nThey have an ether\nchannel in between them.\n\n22\n00:01:08.330 --> 00:01:10.940\nTwo bonded connections,\nthey're just 100 megabit connections, so\n\n23\n00:01:10.940 --> 00:01:13.110\nit's got a 200 megabit\nconnection between them.\n\n24\n00:01:13.110 --> 00:01:16.270\nAnd should be up, should be healthy,\nthey should see each other.\n\n25\n00:01:16.270 --> 00:01:24.390\nAnd for VLAN 14, we expect NYCORE2 to be\nactive but instead, NYCORE1 is active.\n\n26\n00:01:24.390 --> 00:01:27.600\nAll right, so\nI wanna start by looking at NYCORE2.\n\n27\n00:01:27.600 --> 00:01:30.100\nIt's the one that's supposed to be active.\n\n28\n00:01:30.100 --> 00:01:32.980\nSo if it's got a downed interface or\nsomething like that,\n\n29\n00:01:32.980 --> 00:01:34.880\nthat's where the problem's\ngonna be evident.\n\n30\n00:01:34.880 --> 00:01:37.980\nThis guy over here, NYCORE1,\nis probably just doing its job.\n\n31\n00:01:37.980 --> 00:01:42.280\nIt's probably, hey there's a failure on\nCORE2 so CORE1 steps up and takes over.\n\n32\n00:01:42.280 --> 00:01:43.820\nSo that's more than likely what we have.\n\n33\n00:01:43.820 --> 00:01:46.610\nIt could be though,\nthat CORE1 is configured wrong.\n\n34\n00:01:46.610 --> 00:01:50.010\nCORE1 could have a higher priority\nthan it's supposed to and\n\n35\n00:01:50.010 --> 00:01:52.780\nthen that would make it take over,\nand the problem could be over here.\n\n36\n00:01:52.780 --> 00:01:57.450\nSo I don't wanna ignore that one, but\nassuming that HSRP is working the way that\n\n37\n00:01:57.450 --> 00:02:00.600\nit's supposed to CORE2 more\nthan like like has an issue and\n\n38\n00:02:00.600 --> 00:02:03.420\nthat's more than likely why it's\nnot active when it should be.\n\n39\n00:02:03.420 --> 00:02:04.930\nSo that's why I'm gonna start on CORE2.\n\n40\n00:02:04.930 --> 00:02:07.740\nThe reality is you could start on\neither one, it really wouldn't matter.\n\n41\n00:02:07.740 --> 00:02:09.830\nJust you rule one out,\nyou move to the other.\n\n42\n00:02:09.830 --> 00:02:11.960\nI'm gonna start on the most likely one,\nwhich is CORE2.\n\n43\n00:02:11.960 --> 00:02:17.570\nSo, over on CORE2, the first thing I\nwanna look at really are the interfaces.\n\n44\n00:02:17.570 --> 00:02:21.530\nAn interface going down is the most\ncommon reason for HSRP to fail over.\n\n45\n00:02:21.530 --> 00:02:24.520\nSo, I'm just gonna do a quick\nshow IP interface brief.\n\n46\n00:02:24.520 --> 00:02:29.430\nNow where this gets tricky is that on\na switch you've got tons of interfaces,\n\n47\n00:02:29.430 --> 00:02:31.680\nvirtual interfaces and\nphysical interfaces.\n\n48\n00:02:31.680 --> 00:02:32.860\nThis is VLAN 14.\n\n49\n00:02:32.860 --> 00:02:36.400\nSo, HSRP is actually tied\nto the VLAN interface.\n\n50\n00:02:36.400 --> 00:02:40.020\nSo as long as that VLAN interface is up,\nwe should be in good shape.\n\n51\n00:02:40.020 --> 00:02:44.210\nAnd so, what I'm gonna do is I'm gonna\nfilter this to only include ports\n\n52\n00:02:44.210 --> 00:02:48.450\nthat have IP addresses, so\nI'll just exclude in the unassigned ports.\n\n53\n00:02:48.450 --> 00:02:51.620\nSo I can see VLAN 14 right here.\n\n54\n00:02:51.620 --> 00:02:54.260\nAnd what I'm looking for\nis the status of that port.\n\n55\n00:02:54.260 --> 00:02:56.550\nI want to make sure that\nit shows us up up, and\n\n56\n00:02:56.550 --> 00:02:58.280\nsure enough I can see that it does.\n\n57\n00:02:58.280 --> 00:03:00.320\nThe interface is up.\n\n58\n00:03:00.320 --> 00:03:01.850\nIf all of my interface,\n\n59\n00:03:01.850 --> 00:03:05.840\nmy physical interfaces on VLAN 14 are\ndown, this VLAN interface would go down.\n\n60\n00:03:05.840 --> 00:03:08.660\nOr if my trunks were down,\nthis would go down.\n\n61\n00:03:08.660 --> 00:03:13.500\nBut it's up, so that tells me that at a\nminimum I've got at least one port in VLAN\n\n62\n00:03:13.500 --> 00:03:14.500\n14 that's working.\n\n63\n00:03:14.500 --> 00:03:17.300\nAnd at a minimum, I probably have\nat least one trunk that's working.\n\n64\n00:03:17.300 --> 00:03:19.250\nWe could actually find\nthat out really easy.\n\n65\n00:03:19.250 --> 00:03:24.340\nIf we do a show VLAN, I can look for VLAN\n14, and it doesn't look like I have any\n\n66\n00:03:24.340 --> 00:03:30.340\naccess ports in VLAN 14, but if I do\na show interface trunk, there we go.\n\n67\n00:03:30.340 --> 00:03:33.110\nI can see that I've actually got\ntwo trunks carrying VLAN 14.\n\n68\n00:03:33.110 --> 00:03:38.150\nI've got a trunk on port 22 and\na trunk on PO 1, that port channel, right?\n\n69\n00:03:38.150 --> 00:03:40.810\nThey're both carrying VLAN 14.\n\n70\n00:03:40.810 --> 00:03:44.070\nSo they're up and my VLAN interface is up.\n\n71\n00:03:44.070 --> 00:03:48.610\nSo if this guy is set to be the active\nHSRP router, interfaces are up,\n\n72\n00:03:48.610 --> 00:03:50.240\nit should be good to go.\n\n73\n00:03:50.240 --> 00:03:51.380\nLet's take a look at that.\n\n74\n00:03:51.380 --> 00:03:54.020\nI'm gonna do a show standby for VLAN 14.\n\n75\n00:03:54.020 --> 00:04:00.160\nI should be active, but\nwhen I look my state is listen.\n\n76\n00:04:00.160 --> 00:04:02.850\nNow that's a really interesting\nstate to have, listen.\n\n77\n00:04:02.850 --> 00:04:05.960\nI'm not active and I'm not standby.\n\n78\n00:04:05.960 --> 00:04:06.890\nI'm listen.\n\n79\n00:04:06.890 --> 00:04:08.330\nWhat the heck is that all about?\n\n80\n00:04:08.330 --> 00:04:11.690\nWell, they told me\nNYCORE1 should be active.\n\n81\n00:04:11.690 --> 00:04:13.320\nNYCORE2 should be standby.\n\n82\n00:04:13.320 --> 00:04:15.700\nThey didn't say anybody should be listen.\n\n83\n00:04:15.700 --> 00:04:18.270\nRight?\nListen is technically the other state\n\n84\n00:04:18.270 --> 00:04:18.850\nin HSRP.\n\n85\n00:04:18.850 --> 00:04:23.550\nYou can have an HSRP cluster with\n16 routers in it if you want.\n\n86\n00:04:23.550 --> 00:04:24.950\nOne will go active.\n\n87\n00:04:24.950 --> 00:04:26.410\nAnother will go standby.\n\n88\n00:04:26.410 --> 00:04:30.570\nAnd the other 14 will go into\nthe other state, which is listen.\n\n89\n00:04:30.570 --> 00:04:32.130\nAnd that's what I'm seeing here.\n\n90\n00:04:32.130 --> 00:04:34.630\nSo I'm not active or\nstandby, which is odd.\n\n91\n00:04:34.630 --> 00:04:40.066\nAnd if I look down here I can see I've\ngot an active router, 192.168.14.2,\n\n92\n00:04:40.066 --> 00:04:43.922\nand I've got a standby router,\n192.168.14.4.\n\n93\n00:04:43.922 --> 00:04:50.508\nWell, those IPs, if you remember them from\nthe other sets, that is CORE1 and EDGE1.\n\n94\n00:04:50.508 --> 00:04:53.860\nEDGE1 is a part of this HSRP cluster also.\n\n95\n00:04:53.860 --> 00:04:57.800\nAnd so NYCORE1 has gone active.\n\n96\n00:04:57.800 --> 00:05:00.180\nNYEDGE1 has gone standby.\n\n97\n00:05:00.180 --> 00:05:01.360\nAnd I'm even lower than that.\n\n98\n00:05:01.360 --> 00:05:02.550\nAll right?\n\n99\n00:05:02.550 --> 00:05:06.140\nNow that's a big red flag for\nme because that means that either my\n\n100\n00:05:06.140 --> 00:05:11.110\npriority is set really low, or\nI've got a true fault on this system and\n\n101\n00:05:11.110 --> 00:05:13.120\nthat's making the other\ntwo guys take over for me.\n\n102\n00:05:13.120 --> 00:05:15.480\nI'm not even good enough\nto be stand by right now.\n\n103\n00:05:15.480 --> 00:05:18.240\nSo there's more than likely going to\nbe an issue right here on CORE2, so\n\n104\n00:05:18.240 --> 00:05:21.580\nwe are in the right place I think for\nfinding this program.\n\n105\n00:05:21.580 --> 00:05:22.110\nRight.\n\n106\n00:05:22.110 --> 00:05:23.670\nNow as I look at it.\n\n107\n00:05:23.670 --> 00:05:28.370\nI can see the active\nrouter is 192.168.14.2.\n\n108\n00:05:28.370 --> 00:05:29.610\nAnd it's priority is 90.\n\n109\n00:05:29.610 --> 00:05:32.520\nNow the default priority in HRSP is 100.\n\n110\n00:05:32.520 --> 00:05:35.480\nIt's a good thing to have memorized for\nthe exam.\n\n111\n00:05:35.480 --> 00:05:38.830\nDefault is 100 and the higher number wins.\n\n112\n00:05:38.830 --> 00:05:42.550\nThis one's set to 90, so somebody\nhas purposefully lowered it by ten.\n\n113\n00:05:42.550 --> 00:05:46.530\nI can see the standby router,\nwhich is NYEDGE1 has a priority of 85.\n\n114\n00:05:46.530 --> 00:05:50.650\nSo somebody has purposely\nlowered it by 15.\n\n115\n00:05:50.650 --> 00:05:54.880\nBut then when I look at my priority,\nmy priority is 70.\n\n116\n00:05:54.880 --> 00:05:57.950\nSo I've got a lower priority\nthan the other guys,\n\n117\n00:05:57.950 --> 00:06:00.620\nso that's gonna make me\ngo into the listen mode.\n\n118\n00:06:00.620 --> 00:06:05.270\nSo this may be as simple as changing that,\nexcept it's not quite that simple.\n\n119\n00:06:05.270 --> 00:06:09.450\nNotice the next line,\nthis is what makes this a complex problem.\n\n120\n00:06:09.450 --> 00:06:12.700\nIf it were just a matter of changing\npriority, this would be super easy.\n\n121\n00:06:12.700 --> 00:06:15.362\nI could go and set my priority to 91 or\nhigher, right?\n\n122\n00:06:15.362 --> 00:06:17.630\n255 is the highest number,\n100 is the default.\n\n123\n00:06:17.630 --> 00:06:20.690\nSo I could myself back to default and\nI'd become active.\n\n124\n00:06:20.690 --> 00:06:26.528\nBut the very next line tells me,\ntrack object 14 state Down decrement 30.\n\n125\n00:06:26.528 --> 00:06:30.410\nAll right,\nthat's telling me that my default is 100.\n\n126\n00:06:30.410 --> 00:06:31.520\nI am set to 100.\n\n127\n00:06:31.520 --> 00:06:36.090\nBut I'm tracking an object and\nthe track object is down.\n\n128\n00:06:36.090 --> 00:06:39.100\nAnd when it went down it set to decrement\nme 30 and that's why I'm at 70.\n\n129\n00:06:39.100 --> 00:06:43.380\nSo I've got a fault on my network,\nmy track object is failing.\n\n130\n00:06:43.380 --> 00:06:47.517\nAnd as long as it's failing my\npriority was deducted by 30.\n\n131\n00:06:47.517 --> 00:06:50.320\nNow I could,\n[LAUGH] we could cheat, right.\n\n132\n00:06:50.320 --> 00:06:54.340\nWe could set our priority to 130 and\nthen it'll decrement us by 31 but\n\n133\n00:06:54.340 --> 00:06:55.980\n100 will stay active.\n\n134\n00:06:55.980 --> 00:06:57.540\nBut that doesn't really fix the problem.\n\n135\n00:06:57.540 --> 00:06:59.430\nThe problem here is that our\ntrack object is failing,\n\n136\n00:06:59.430 --> 00:07:01.480\nwe need to find out why and get it fixed.\n\n137\n00:07:01.480 --> 00:07:05.970\nCuz as soon as we fix that track object\nour priority will go up 30 points, and\n\n138\n00:07:05.970 --> 00:07:07.460\nnow we should be active again.\n\n139\n00:07:07.460 --> 00:07:08.040\nOkay.\n\n140\n00:07:08.040 --> 00:07:11.540\nSo while it was described as\nan HSRP problem in the ticket,\n\n141\n00:07:11.540 --> 00:07:13.780\nit really isn't an HSRP problem, is it?\n\n142\n00:07:13.780 --> 00:07:16.690\nIt's really figuring\nout this track object.\n\n143\n00:07:16.690 --> 00:07:21.700\nIf I do a show track, I can get\nan idea of what that track object is,\n\n144\n00:07:21.700 --> 00:07:26.460\nand I can see that we've got track 14 and\nit's set to monitor for a route.\n\n145\n00:07:26.460 --> 00:07:30.517\nIt's looking for\nroute 192.168.224.0, all right?\n\n146\n00:07:30.517 --> 00:07:31.936\nAnd it's tracking reachability.\n\n147\n00:07:31.936 --> 00:07:35.430\nSo can we do a routing table lookup for\nthat route?\n\n148\n00:07:35.430 --> 00:07:37.950\nIf we can, great, this passes.\n\n149\n00:07:37.950 --> 00:07:39.840\nIf we can't, it fails, all right?\n\n150\n00:07:39.840 --> 00:07:42.870\nAnd I can see right now my reachability\nis down, I've got no route.\n\n151\n00:07:42.870 --> 00:07:48.339\nAnd if I don't trust it I can always\ndo a show ip route 192.168.224.0.\n\n152\n00:07:48.339 --> 00:07:50.430\nAnd network not in table.\n\n153\n00:07:50.430 --> 00:07:54.675\nOkay, so, my priority is being\ndirectly affected by that.\n\n154\n00:07:54.675 --> 00:07:57.170\nAnd if I do a show run for\ninterface VLAN 14,\n\n155\n00:07:57.170 --> 00:07:59.748\nI should be able to see\nwhere that's defined.\n\n156\n00:07:59.748 --> 00:08:00.433\nRight here.\n\n157\n00:08:00.433 --> 00:08:04.787\nStandby 14 track 14 decrement 30, right.\n\n158\n00:08:04.787 --> 00:08:09.559\nSo, when that route came out of my routing\ntable, then we decremented by 30, and\n\n159\n00:08:09.559 --> 00:08:14.740\nnow we're not active or standby, the other\nrouters are better than us, all right.\n\n160\n00:08:14.740 --> 00:08:18.160\nSo we need to find out why that\nroute is not in our routing table.\n\n161\n00:08:18.160 --> 00:08:21.290\nWell, the first piece of that puzzle is\ngonna be to figure out where that route\n\n162\n00:08:21.290 --> 00:08:22.360\neven comes from, right.\n\n163\n00:08:22.360 --> 00:08:27.027\n192.168.224 is not a network I'm familiar\nwith so I'm gonna assume that it's coming\n\n164\n00:08:27.027 --> 00:08:30.753\nfrom one of these outside networks and\nsure enough, we've got it right here.\n\n165\n00:08:30.753 --> 00:08:37.840\n192.168.224 is a network coming from\noutside, right, it's coming from beyond.\n\n166\n00:08:37.840 --> 00:08:42.300\nAnd it's in EIGRP autonomous system 800,\nwhich is kind of like our Internet or\n\n167\n00:08:42.300 --> 00:08:43.810\nexternal network.\n\n168\n00:08:43.810 --> 00:08:47.315\nThe first router that I control is NYWAN1.\n\n169\n00:08:47.315 --> 00:08:50.090\nNYWAN1 should know about that network.\n\n170\n00:08:50.090 --> 00:08:53.011\nAnd if I want my internal\nrouters to know about it,\n\n171\n00:08:53.011 --> 00:08:56.572\nit's gonna need to advertise\nit into EIGRP 500, right.\n\n172\n00:08:56.572 --> 00:09:03.596\nAnd then NYEDGE1 is going to need to\nredistribute it over into OSFP, right.\n\n173\n00:09:03.596 --> 00:09:09.095\nAnd if EDGE1 redistributes into OSPF\nthen my other devices, including CORE2,\n\n174\n00:09:09.095 --> 00:09:13.700\nshould learn about it, and\nit makes it into the routing table.\n\n175\n00:09:13.700 --> 00:09:16.510\nSo somewhere along the journey\nthat's breaking down, all right?\n\n176\n00:09:16.510 --> 00:09:18.990\nAnd if you look, there's several\nplaces where it could break down,\n\n177\n00:09:18.990 --> 00:09:22.140\nI should be learning about that\nfrom EDGE2 as well as CORE1.\n\n178\n00:09:22.140 --> 00:09:26.610\nThey should both be telling me, CORE2,\nabout that route, all right, but\n\n179\n00:09:26.610 --> 00:09:28.010\nneither of them are.\n\n180\n00:09:28.010 --> 00:09:32.990\nAnd then EDGE1 should be telling them,\nand then WAN1 should be telling them.\n\n181\n00:09:32.990 --> 00:09:34.810\nI don't know where the breakdown is,\n\n182\n00:09:34.810 --> 00:09:37.620\nI just know that I want to work\non a few devices as possible.\n\n183\n00:09:37.620 --> 00:09:41.090\nSo I'm gonna start as close to\nthe route as I can, which is NYWAN1,\n\n184\n00:09:41.090 --> 00:09:44.840\nand then work my way back to see\nwhere the breakdown happens.\n\n185\n00:09:44.840 --> 00:09:46.710\nSo I'm gonna jump over to NYWAN1 and\n\n186\n00:09:46.710 --> 00:09:50.470\nsee if it knows about that network and\nfigure things out from there.\n\n187\n00:09:50.470 --> 00:09:51.770\nSo I'm gonna jump over to that router.\n\n188\n00:09:53.760 --> 00:09:56.170\nAnd the first thing I'm gonna do is\njust take a look at this routing table,\n\n189\n00:09:56.170 --> 00:09:57.840\ndoes it even know about that route.\n\n190\n00:09:57.840 --> 00:10:01.090\nCuz if it doesn't know it, then I'm\nnot gonna get very far at all, right.\n\n191\n00:10:01.090 --> 00:10:04.359\nAnd so if I look at my routing table,\nand I guess I did this the long way,\n\n192\n00:10:04.359 --> 00:10:07.258\nI could have filtered it a little\nbit better, but there it is.\n\n193\n00:10:07.258 --> 00:10:12.900\n192.168.224.0, it's right there,\nit's learning it from EIGRP, all right.\n\n194\n00:10:12.900 --> 00:10:13.960\nI kind of expected that, right?\n\n195\n00:10:13.960 --> 00:10:17.270\nWe're learning it from EIGRP 800, and\nit's coming into this router, right?\n\n196\n00:10:18.650 --> 00:10:23.795\nNow EIGRP, this router's running\nmore than one instance of EIGRP.\n\n197\n00:10:23.795 --> 00:10:26.914\nIt's running one for autonomous\nsystem 800, and it's running one for\n\n198\n00:10:26.914 --> 00:10:28.460\nautonomous system 500, right?\n\n199\n00:10:29.790 --> 00:10:33.080\nEIGRP does not redistribute\nroutes by default, so\n\n200\n00:10:33.080 --> 00:10:36.910\nroutes I learn from 800 are not\nbeing redistributed in the 500.\n\n201\n00:10:36.910 --> 00:10:38.930\nIf I want that,\nI'm gonna need to turn that on,\n\n202\n00:10:38.930 --> 00:10:40.820\nI'm gonna need to tell it to do that.\n\n203\n00:10:40.820 --> 00:10:41.740\nIt might already be doing it.\n\n204\n00:10:41.740 --> 00:10:44.350\nLet's have a look and\nsee if that's set up.\n\n205\n00:10:44.350 --> 00:10:48.010\nSo if I jump back to WAN1 and\n\n206\n00:10:48.010 --> 00:10:53.000\ndo just a quick show run and\nlook for the EIGRP section.\n\n207\n00:10:54.060 --> 00:10:56.250\nWe can see if that's set up and\nactually it is.\n\n208\n00:10:56.250 --> 00:11:03.134\nSo here in eigrp 800,\nit's set to redistribute eigrp 500.\n\n209\n00:11:03.134 --> 00:11:08.820\nAnd then up here, for autonomous-system\n500, it's set to redistribute 800.\n\n210\n00:11:08.820 --> 00:11:11.640\nSo it's actually redistributing both ways,\nall right?\n\n211\n00:11:11.640 --> 00:11:14.264\nSo that [INAUDIBLE],\nwe are set to redistribute both ways.\n\n212\n00:11:14.264 --> 00:11:20.661\nSo let's go see if NYEDGE1, this guy\nover here, let's see if it's getting it.\n\n213\n00:11:20.661 --> 00:11:22.922\nIf we're redistributing 800 to 500,\n\n214\n00:11:22.922 --> 00:11:25.330\nNYEDGE1 should be learning about it,\nright.\n\n215\n00:11:25.330 --> 00:11:26.270\nLet's see if it is.\n\n216\n00:11:27.970 --> 00:11:30.530\nWe're trying to just narrow\ndown where the problem is.\n\n217\n00:11:30.530 --> 00:11:33.030\nRoutes are a little more difficult to\ntroubleshoot because we can't just use\n\n218\n00:11:33.030 --> 00:11:34.940\ntrace route to find them,\nthat doesn't help us so much.\n\n219\n00:11:36.070 --> 00:11:39.190\nAll right, so I'm gonna take a look\nat my routing table here and\n\n220\n00:11:40.230 --> 00:11:44.350\nI'm gonna filter just the EIGRP route so\nthat I only see routes that I'm learning.\n\n221\n00:11:44.350 --> 00:11:50.063\nAnd I'm looking for 192.168.224 and\nI don't see it, okay?\n\n222\n00:11:50.063 --> 00:11:54.916\nRoute redistribution was\nconfigured on the other router but\n\n223\n00:11:54.916 --> 00:11:57.897\nI'm not getting that route, okay.\n\n224\n00:11:57.897 --> 00:11:59.610\nWhy not?\n\n225\n00:11:59.610 --> 00:12:02.850\nWell, there's a few reasons why\na route might not show up, and\n\n226\n00:12:02.850 --> 00:12:04.730\nwe need to think about them.\n\n227\n00:12:04.730 --> 00:12:08.180\nOne is we might have an administrative\ndistance type issue.\n\n228\n00:12:08.180 --> 00:12:10.910\nIf I already know the route\nfrom another path, right.\n\n229\n00:12:10.910 --> 00:12:13.780\nSo EIGRP's got a really good\nadministrative distance, so\n\n230\n00:12:13.780 --> 00:12:17.650\nit'd really have to be like a static\nroute or a BGP route to override me.\n\n231\n00:12:17.650 --> 00:12:19.054\nI filter this just to EIGRP so\n\n232\n00:12:19.054 --> 00:12:21.871\nit's possible that one of\nthose other routes are there.\n\n233\n00:12:21.871 --> 00:12:26.910\nI'm gonna go a show IP route for\n192.168.224.0.\n\n234\n00:12:26.910 --> 00:12:28.350\nNetwork not in table.\n\n235\n00:12:28.350 --> 00:12:31.530\nAll right, so\nit's not an administrative distance thing.\n\n236\n00:12:31.530 --> 00:12:34.630\nI could have policy based routing or\n\n237\n00:12:34.630 --> 00:12:38.020\na route map in place, well, a policy\nbased routing would use a route map.\n\n238\n00:12:38.020 --> 00:12:39.323\nI could have a prefix list.\n\n239\n00:12:39.323 --> 00:12:42.720\nI could have all sorts of filters\nconfigured on this router to stop\n\n240\n00:12:42.720 --> 00:12:44.390\nthe route from coming in.\n\n241\n00:12:44.390 --> 00:12:45.500\nLet's see if we've got that.\n\n242\n00:12:46.630 --> 00:12:49.055\nSo I'm gonna look for\nthe EIGRP section and\n\n243\n00:12:49.055 --> 00:12:52.690\njust see if I've got any kind of\nfilters configured here, all right?\n\n244\n00:12:52.690 --> 00:12:55.090\nAnd looking at it,\nwe've got EIGRP turned on.\n\n245\n00:12:55.090 --> 00:12:57.220\nWe've got it set up for\nautonomous-system 500.\n\n246\n00:12:57.220 --> 00:13:02.000\nIt's redistributing OSPF but\nthat's not a big deal.\n\n247\n00:13:02.000 --> 00:13:04.270\nI'm participating in\nthe network 192.168.255.4,\n\n248\n00:13:04.270 --> 00:13:08.370\nthat's the network that faces WAN1,\nI want that.\n\n249\n00:13:08.370 --> 00:13:12.530\nAnd I don't really see anything\ncreeping out here that would stop\n\n250\n00:13:12.530 --> 00:13:14.870\nthat stuff from coming in, all right.\n\n251\n00:13:14.870 --> 00:13:18.240\nSo I don't have a filter applied here,\nbut you know what?\n\n252\n00:13:18.240 --> 00:13:22.240\nI'm thinking of incoming filters,\nI could have an outbound filter too.\n\n253\n00:13:22.240 --> 00:13:24.030\nWhen I look at this,\n\n254\n00:13:24.030 --> 00:13:28.170\nI know NYWAN1 is redistributing from\none network to the other, all right?\n\n255\n00:13:28.170 --> 00:13:30.479\nAnd so\nit should be sending the route to EDGE1.\n\n256\n00:13:30.479 --> 00:13:34.807\nEDGE1 could have a filter for inbound\nroutes, but it doesn't, I just looked,\n\n257\n00:13:34.807 --> 00:13:36.890\nI didn't see it, right?\n\n258\n00:13:36.890 --> 00:13:41.400\nBut NYWAN1 could have a filter for\ninbound routes,\n\n259\n00:13:41.400 --> 00:13:44.730\nwhich I know it doesn't because\nthe route made it into its routed table.\n\n260\n00:13:44.730 --> 00:13:48.170\nIt could have a filter\non the redistribution or\n\n261\n00:13:48.170 --> 00:13:50.160\nit can have a filter on\nthe outbound routes.\n\n262\n00:13:50.160 --> 00:13:53.560\nSo there's a lot of different places\nwhere we can have a filter applied\n\n263\n00:13:53.560 --> 00:13:55.900\nin our routing topology here.\n\n264\n00:13:55.900 --> 00:13:59.130\nBut I think at this point NYWAN1\nis more than likely our culprit.\n\n265\n00:13:59.130 --> 00:14:02.168\nSo let's go look and see if there's\nany filters on there, and honestly,\n\n266\n00:14:02.168 --> 00:14:05.598\nI probably should have noticed a filter\nbecause we've already looked at NYWAN1.\n\n267\n00:14:05.598 --> 00:14:08.450\nI must have just skimmed over it too fast,\nright.\n\n268\n00:14:08.450 --> 00:14:12.100\nWe get in a hurry sometimes and you can\nover, yeah, we can over look things.\n\n269\n00:14:12.100 --> 00:14:14.790\nIt's actually right here on my screen,\nI don't even have to run a command.\n\n270\n00:14:14.790 --> 00:14:18.219\nWhen we run NYWAN1 last,\nI ran show run and\n\n271\n00:14:18.219 --> 00:14:22.360\nI filtered it to just the section for\nEIGRP.\n\n272\n00:14:22.360 --> 00:14:26.960\nAnd as I looked at it, I was laser beamed\nfocused, I was looking for a redistribute.\n\n273\n00:14:26.960 --> 00:14:30.420\nAnd so I saw a redistribute 800\nunder autonomous-system 500.\n\n274\n00:14:30.420 --> 00:14:32.770\nThat's what I looked at and\nthat's all that registered in my mind.\n\n275\n00:14:32.770 --> 00:14:36.430\nI didn't look at the end of the line\nbecause in my mind, I'll tell you exactly\n\n276\n00:14:36.430 --> 00:14:39.010\nwhat I did is I said, oh, they're metrics,\nI don't care about those.\n\n277\n00:14:39.010 --> 00:14:45.300\nWell, if I looked past the metric,\nI would have seen this, route-map ALLOWED.\n\n278\n00:14:45.300 --> 00:14:48.680\nI've got a filter on what\nroutes I'm redistributing.\n\n279\n00:14:48.680 --> 00:14:49.920\nNow as I look at the rest of it here,\n\n280\n00:14:49.920 --> 00:14:52.300\nI don't have any other\nfilters that I can see.\n\n281\n00:14:52.300 --> 00:14:55.690\nWith EIGRP, you can actually do\nstatic neighbor definitions, and so\n\n282\n00:14:55.690 --> 00:14:59.490\nyou can say neighbor put the IP, and\nyou can apply a filter to that also.\n\n283\n00:14:59.490 --> 00:15:02.680\nThat's how we do outbound filters,\nyou can also do interface filters.\n\n284\n00:15:02.680 --> 00:15:05.930\nYou can attach a route map to\nan interface to block it that way too.\n\n285\n00:15:05.930 --> 00:15:08.750\nSo for example on this one,\n\n286\n00:15:08.750 --> 00:15:13.890\nif I look at serial 0/1/0, I could have\na filter attached there, and I don't.\n\n287\n00:15:13.890 --> 00:15:15.430\nSo the only filter I've got is this one.\n\n288\n00:15:15.430 --> 00:15:20.070\nI've got a route-map in place that's\nallowing certain routes to be\n\n289\n00:15:20.070 --> 00:15:23.110\nredistributed from EIGRP 800 to 500.\n\n290\n00:15:23.110 --> 00:15:27.250\nWell, does that include 192.168.224?\n\n291\n00:15:27.250 --> 00:15:28.348\nMaybe, right.\n\n292\n00:15:28.348 --> 00:15:32.620\nThat's going 800 to 500,\nthat's going from here to here, and\n\n293\n00:15:32.620 --> 00:15:37.740\nI need 192.168.224 to go from here\nto here, maybe that's not happening.\n\n294\n00:15:37.740 --> 00:15:41.370\nSo, let's take a look at that filter and\nsee if we can't figure it out.\n\n295\n00:15:41.370 --> 00:15:44.286\nSo, the route map is just called allowed,\nand so\n\n296\n00:15:44.286 --> 00:15:46.504\nI'm gonna do a quick show route map.\n\n297\n00:15:48.768 --> 00:15:52.620\nAnd we'll see what that\nroute map is doing.\n\n298\n00:15:52.620 --> 00:15:55.210\nSo I'm doing show route-map and\nthen the name of the map and\n\n299\n00:15:55.210 --> 00:15:56.430\nI've got route-map ALLOWED.\n\n300\n00:15:56.430 --> 00:15:57.865\nIt's not a very big route map.\n\n301\n00:15:57.865 --> 00:16:03.276\nIt's got a match clause, it's matching an\naccess list that is also called ALLOWED.\n\n302\n00:16:03.276 --> 00:16:07.982\nAnd it's got a set clause of nothing, it's\ngot policy routing matches set to nothing,\n\n303\n00:16:07.982 --> 00:16:08.880\nand that's it.\n\n304\n00:16:08.880 --> 00:16:10.860\nSo basically it's matching an ACL.\n\n305\n00:16:10.860 --> 00:16:16.150\nAnd what this means is, any route that\nmatches the ACL will be permitted.\n\n306\n00:16:16.150 --> 00:16:20.120\nAny route that doesn't match\nthe ACL will be denied.\n\n307\n00:16:20.120 --> 00:16:21.910\nSo I need to look at this ACL.\n\n308\n00:16:21.910 --> 00:16:23.764\nSo I'll do a show access-list.\n\n309\n00:16:25.330 --> 00:16:28.639\nAnd there's that access\nlist called ALLOWED and\n\n310\n00:16:28.639 --> 00:16:33.484\n[LAUGH] right off the bat\ndeny IP 192.168.224.0, right,\n\n311\n00:16:33.484 --> 00:16:38.180\nso its blocking that route and\nthen its permitting everything else.\n\n312\n00:16:38.180 --> 00:16:42.935\nNow on the exam be careful with these\nbecause when you have an ACL that's\n\n313\n00:16:42.935 --> 00:16:47.890\nspecifying a route, the wild card mask\ncan be a little bit weird, right?\n\n314\n00:16:47.890 --> 00:16:52.130\nSo the wild card mask\nhere is basically saying\n\n315\n00:16:52.130 --> 00:16:55.120\nblock any network that's\nin the 192.168.244 range.\n\n316\n00:16:55.120 --> 00:16:56.640\nSo I might have more than one network,\n\n317\n00:16:56.640 --> 00:17:00.430\nlike multiple subnets under here,\nand this would catch them all.\n\n318\n00:17:00.430 --> 00:17:02.460\nIn my case,\nit should just be one, I think.\n\n319\n00:17:02.460 --> 00:17:04.820\nLet me go back to the topology here.\n\n320\n00:17:04.820 --> 00:17:06.900\nSee how 192.168.226 is subnetted?\n\n321\n00:17:06.900 --> 00:17:10.550\nSo that one line would\nactually catch both of those.\n\n322\n00:17:10.550 --> 00:17:14.300\nBut 224, it's just a straight up class C,\nso no big deal there.\n\n323\n00:17:14.300 --> 00:17:16.210\nAll right, so\nwe need to get that line out of there.\n\n324\n00:17:16.210 --> 00:17:19.350\nIf it's not coming into the network,\nthen we're never gonna learn it,\n\n325\n00:17:19.350 --> 00:17:21.370\nwhich means our track object\nis always gonna fail,\n\n326\n00:17:21.370 --> 00:17:25.540\nwhich means we'll always have our HSRP\npriority decremented by 30, right?\n\n327\n00:17:25.540 --> 00:17:26.800\nRemember where we started on this.\n\n328\n00:17:26.800 --> 00:17:28.710\nSo, I'm gonna remove that line.\n\n329\n00:17:28.710 --> 00:17:31.190\nThere's really no point in\nhaving that line in there.\n\n330\n00:17:31.190 --> 00:17:35.691\nSo I'm gonna do a ip access-list\n\n331\n00:17:35.691 --> 00:17:41.470\nextended allowed, and I'll just say,\nno 10 to get rid of that line.\n\n332\n00:17:41.470 --> 00:17:49.040\nAnd then I'll do a show access-list to\nverify that it now says permit ip any any,\n\n333\n00:17:49.040 --> 00:17:51.844\nand now every route should be\nallowed to pass through it, okay?\n\n334\n00:17:51.844 --> 00:17:56.823\nNow, funny thing about EIGRP is\na lot of times it won't advertise\n\n335\n00:17:56.823 --> 00:17:59.005\nroutes unless they change.\n\n336\n00:17:59.005 --> 00:18:02.385\nOtherwise you have to wait for a timer\nto hit and then it'll re-advertise.\n\n337\n00:18:02.385 --> 00:18:05.685\nSo this could actually take effect\nvery fast depending on where I fall on\n\n338\n00:18:05.685 --> 00:18:09.885\nthe timers, or I might have to wait\na little bit for it to take effect.\n\n339\n00:18:09.885 --> 00:18:11.185\nAnd even if it took effect immediately,\n\n340\n00:18:11.185 --> 00:18:12.885\nwe have to give it a few\nseconds to propagate.\n\n341\n00:18:12.885 --> 00:18:15.465\nSo we might need to wait 30 or\neven 45 seconds for\n\n342\n00:18:15.465 --> 00:18:19.570\nthis to clear itself out, but\nI'll bet this happens pretty quick.\n\n343\n00:18:19.570 --> 00:18:20.800\nI'm gonna jump over to NYEDGE1.\n\n344\n00:18:20.800 --> 00:18:26.280\nAnd remember,\nNYEDGE1 was not seeing anything before.\n\n345\n00:18:26.280 --> 00:18:29.886\nActually, I see some HSRP\nnotices there at the bottom, so\n\n346\n00:18:29.886 --> 00:18:33.210\nit's a pretty good chance\nthat we fixed our problem.\n\n347\n00:18:33.210 --> 00:18:38.359\nBut I just want to do a quick show\nip route from 192.168.224.0 and\n\n348\n00:18:38.359 --> 00:18:41.190\nI have a route in my routing table now.\n\n349\n00:18:41.190 --> 00:18:45.740\nAnd so, I'm gonna jump all the way back\nto our original problem child, NYCORE2.\n\n350\n00:18:45.740 --> 00:18:48.360\nNYCORE2 was supposed to be active, but\n\n351\n00:18:48.360 --> 00:18:50.420\nit wasn't because the track\nobject was failing.\n\n352\n00:18:50.420 --> 00:18:52.990\nWell let's go take a look\nat that track object now.\n\n353\n00:18:55.560 --> 00:18:57.540\nAnd we'll see where we're at.\n\n354\n00:18:57.540 --> 00:18:59.960\nSo I'm gonna do a show track.\n\n355\n00:18:59.960 --> 00:19:03.290\nIt was track number 14, but it was the\nonly one, so I'll just do a show track.\n\n356\n00:19:03.290 --> 00:19:06.680\nAnd on this one,\nI can see that I have reachability.\n\n357\n00:19:06.680 --> 00:19:07.990\nThe route is up.\n\n358\n00:19:07.990 --> 00:19:13.340\nSo I got that route, this one's up,\nand if I do a show standby for\n\n359\n00:19:13.340 --> 00:19:19.510\nVLAN 14, I can see that my priority\nis 100, my default is 100,\n\n360\n00:19:19.510 --> 00:19:24.970\nand the track object state is up,\nso I'm not being decremented.\n\n361\n00:19:24.970 --> 00:19:28.960\nAnd as a result, my priority is now 100,\nand I've gone active.\n\n362\n00:19:28.960 --> 00:19:31.660\nNow, I went active on the exam\nthat might not happen\n\n363\n00:19:31.660 --> 00:19:34.800\ndepending on whether preemption\nis turned on, right?\n\n364\n00:19:34.800 --> 00:19:37.310\nAnd I can see on mine preempt is enabled.\n\n365\n00:19:37.310 --> 00:19:42.250\nAnd so that means as soon as my priority\nwas high enough, I took back over again.\n\n366\n00:19:42.250 --> 00:19:45.680\nIf my preemption wasn't turned on,\nI'd still be in a listen state, so\n\n367\n00:19:45.680 --> 00:19:49.790\nwe have to be aware of that little\nvariation that you can have depending on\n\n368\n00:19:49.790 --> 00:19:52.220\nthe scenario in the lab, but\nin my case preemption's turned on.\n\n369\n00:19:52.220 --> 00:19:53.850\nI'm now active.\n\n370\n00:19:53.850 --> 00:19:55.152\nWe've resolved the problem.\n\n371\n00:19:55.152 --> 00:19:58.090\nSo let's recap that one cuz that\nwas a long chain of events.\n\n372\n00:19:58.090 --> 00:20:01.610\nWe started off with one router,\nin this case a layer three switch.\n\n373\n00:20:01.610 --> 00:20:05.060\nIt should have been active for\nHSRP and it wasn't.\n\n374\n00:20:05.060 --> 00:20:08.230\nAnd it turned out that it's priority\nwas lower than everybody else's, and\n\n375\n00:20:08.230 --> 00:20:12.920\nthe priority was low because\nthe track object was failing and\n\n376\n00:20:12.920 --> 00:20:15.990\ndecrementing it by 30 points,\ndecrementing the priority, right?\n\n377\n00:20:15.990 --> 00:20:17.190\nThe track object was looking for\n\n378\n00:20:17.190 --> 00:20:20.390\nreachability to a route, which we traced\nall the way back out to the edge of our\n\n379\n00:20:20.390 --> 00:20:23.010\nnetwork where it wasn't\nbeing redistributed.\n\n380\n00:20:23.010 --> 00:20:26.440\nThere was a route map on the redistribute\ncommand that was filtering the routes that\n\n381\n00:20:26.440 --> 00:20:27.220\ncould come through.\n\n382\n00:20:27.220 --> 00:20:30.780\nWe made sure the desired route was\nallowed through that filter, and\n\n383\n00:20:30.780 --> 00:20:34.570\nas soon that propagated through the\nnetwork, the track object went healthy,\n\n384\n00:20:34.570 --> 00:20:37.720\nour priority went back to 100,\nand our node took over.\n\n385\n00:20:37.720 --> 00:20:40.740\nSo it looked like an HSRP\nproblem in the beginning,\n\n386\n00:20:40.740 --> 00:20:44.080\nturned out to be a route map\non a redistribute command.\n\n387\n00:20:44.080 --> 00:20:47.460\nCompletely different, and that's the thing\nabout troubleshooting, we gotta really\n\n388\n00:20:47.460 --> 00:20:50.790\nkeep our mind open to all the different\npossible causes of a problem.\n\n389\n00:20:50.790 --> 00:20:54.040\nBut for this one, we can go ahead and\ncall this one done, it is wrapped up.\n\n390\n00:20:54.040 --> 00:20:55.366\nBut stay tuned,\n\n391\n00:20:55.366 --> 00:21:01.250\nwe've got a few more troubleshooting\nissues before we wrap up set three.\n\n392\n00:21:01.250 --> 00:21:03.230\nI hope to see you then.\n\n393\n00:21:03.230 --> 00:21:07.410\n[MUSIC]\n\n",
          "vimeoId": "151013766"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #6` from set #3. The trouble ticket states that \"The path from PLABCSCO01 to 192.168.100.1 is going via NYEDGE1 and not directly via NYEDGE2 from NYCORE2 \"",
          "length": "967",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-3-6-set_3_issue_6-120115-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-3-6-set_3_issue_6-120115-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-3-6-set_3_issue_6-120115-1-sm.jpg",
          "title": "Set 3 Issue 6",
          "transcript": "WEBVTT\n\n1\n00:00:00.087 --> 00:00:08.545\n[SOUND]\nWelcome back,\n\n2\n00:00:08.545 --> 00:00:12.860\nand it looks like we've got another\nreachability issue for set 3 issue 6.\n\n3\n00:00:12.860 --> 00:00:16.340\nWe've got a bit of a routing\nproblem that's going on here.\n\n4\n00:00:16.340 --> 00:00:20.480\nSo it's not so much reachability as\nthat we can get to where we want to go,\n\n5\n00:00:20.480 --> 00:00:21.620\nwe're just going the wrong way.\n\n6\n00:00:21.620 --> 00:00:27.070\nThe troubleshooting ticket reads like\nthis, it says the path from P Lab Cisco 01\n\n7\n00:00:27.070 --> 00:00:33.660\nto the destination of 192.168.100.1\nis going via NY edge 1 and\n\n8\n00:00:33.660 --> 00:00:39.430\nnot directly via NY edge 2 from CORE2,\nso we need to find out why.\n\n9\n00:00:39.430 --> 00:00:42.646\nNow a lot of it doesn't make any\nsense unless we see our diagram, so\n\n10\n00:00:42.646 --> 00:00:46.797\nlet's jump over to our network diagram and\nkinda put this into perspective, right?\n\n11\n00:00:46.797 --> 00:00:51.560\nSo our server, that's this guy way down\nhere at the bottom, PLABCISCO01, and\n\n12\n00:00:51.560 --> 00:00:56.754\nwe're trying to get to a network,\n192.168.100., what did it say, .1.\n\n13\n00:00:56.754 --> 00:01:00.193\nAll right, so that's the host\nthat I'm trying to get to, and\n\n14\n00:01:00.193 --> 00:01:03.280\nit's saying that I should\nbe going to Core2.\n\n15\n00:01:03.280 --> 00:01:06.200\nWhich I know it's running\nHHRP it's the active node.\n\n16\n00:01:06.200 --> 00:01:08.190\nI should be going to that\nas my default gateway.\n\n17\n00:01:08.190 --> 00:01:10.120\nI should be going to Core2 and\n\n18\n00:01:10.120 --> 00:01:14.980\nthen directly to Edge 2 which will\ndirectly connect me to this other network.\n\n19\n00:01:14.980 --> 00:01:18.940\nThe other networks apparently\nout there in OSPF Area 61.\n\n20\n00:01:18.940 --> 00:01:25.040\nBut it's telling me instead of doing that,\nI'm going through EDGE 1 and\n\n21\n00:01:25.040 --> 00:01:28.240\nthen to EDGE2 and out to the network.\n\n22\n00:01:28.240 --> 00:01:30.980\nSo I'm going through what's\ncalled a sub-optimal path.\n\n23\n00:01:30.980 --> 00:01:33.550\nI can get there,\nI can still get routed out, but\n\n24\n00:01:33.550 --> 00:01:37.770\nI'm just not going the way that I\nreally intend to go, that I want to go.\n\n25\n00:01:37.770 --> 00:01:41.670\nSo I need to find out why and\nsee if I can get that corrected, okay?\n\n26\n00:01:41.670 --> 00:01:44.980\nThis is more than likely just\na routing issue, we probably have some\n\n27\n00:01:44.980 --> 00:01:49.150\nSome invalid metrics defined or\na route that's not being advertised.\n\n28\n00:01:49.150 --> 00:01:51.330\nSomebody's not participating in routing\nprotocols, something like that.\n\n29\n00:01:51.330 --> 00:01:53.840\nThose are different things that\ncould pop up that could cause this.\n\n30\n00:01:53.840 --> 00:01:56.180\nBut it's more than likely\ngonna be a routing issue.\n\n31\n00:01:56.180 --> 00:01:58.690\nCould be, could be ACLs,\ncould be route maps,\n\n32\n00:01:58.690 --> 00:02:00.420\ncould be all sorts of other crazy things.\n\n33\n00:02:00.420 --> 00:02:03.680\nBut usually the simpler problems\nare a little more More accurate, for\n\n34\n00:02:03.680 --> 00:02:06.540\nexample, it could just be\nthese interfaces here or down.\n\n35\n00:02:06.540 --> 00:02:08.940\nIf these link were down between CORE2 and\nEDGE2,\n\n36\n00:02:08.940 --> 00:02:14.030\nthen I would expect to go up to\nEDGE1 over to EDGE2 and then out.\n\n37\n00:02:14.030 --> 00:02:16.890\nSo it could be as simple\nas an interface shut down.\n\n38\n00:02:16.890 --> 00:02:21.030\nBut before I start diving into all that\nLet's do a traceroute to make sure that\n\n39\n00:02:21.030 --> 00:02:24.710\nwe're actually seeing what they say,\nthey're saying that if I were to do\n\n40\n00:02:24.710 --> 00:02:29.720\na traceroute from this server,\nI should go to Core 2, I should then go\n\n41\n00:02:29.720 --> 00:02:34.900\nup to edge 1 over to Edge 2 and\nthen out, okay?\n\n42\n00:02:34.900 --> 00:02:38.530\nSo let's see if that's happening,\nI'm going to jump over to that server And\n\n43\n00:02:38.530 --> 00:02:41.910\nwe're just gonna do a quick trace\nroute to see if we can get to it.\n\n44\n00:02:41.910 --> 00:02:44.780\nI'm just gonna start with a ping\nto see if I can even ping that IP\n\n45\n00:02:44.780 --> 00:02:46.220\nthey're telling me about.\n\n46\n00:02:46.220 --> 00:02:48.990\nAnd I can so at least we've got that.\n\n47\n00:02:48.990 --> 00:02:51.850\nAnd then I'll do my trace\nroute to the same IP.\n\n48\n00:02:52.980 --> 00:02:54.760\nlooking at the path that we follow.\n\n49\n00:02:54.760 --> 00:02:58.710\nSo, I expect to hit Core2,\nwhich is 192.168.16.3.\n\n50\n00:02:58.710 --> 00:03:01.920\nMy default gateway is .1, but it's HSRP.\n\n51\n00:03:01.920 --> 00:03:03.360\nSo, I'll see that unique IP.\n\n52\n00:03:03.360 --> 00:03:04.390\nThere it is.\n\n53\n00:03:04.390 --> 00:03:08.110\nAnd then they're saying I'm gonna\njump over to Edge1, which is .4.\n\n54\n00:03:08.110 --> 00:03:10.160\nSo, there we go, 192.168.16.4.\n\n55\n00:03:10.160 --> 00:03:11.140\nWe went to Edge1.\n\n56\n00:03:11.140 --> 00:03:15.860\nFrom edge 1,\nit should jump us over to edge 2.\n\n57\n00:03:15.860 --> 00:03:18.490\nWhich is apparently where\n192.168.100.1 resides\n\n58\n00:03:18.490 --> 00:03:21.080\nbecause that's where it terminated.\n\n59\n00:03:21.080 --> 00:03:24.540\nSo I see that I'm kind of going\nthe wrong way about things.\n\n60\n00:03:24.540 --> 00:03:25.800\nI need to fix that.\n\n61\n00:03:25.800 --> 00:03:29.330\nWell, I need to look at some routing\ntables to figure out why that happened.\n\n62\n00:03:29.330 --> 00:03:31.120\nAnd if you think about\nthe routing tables here,\n\n63\n00:03:31.120 --> 00:03:33.450\nwe can actually locate\nthe problem pretty easy.\n\n64\n00:03:33.450 --> 00:03:36.760\nBecause, the route only had three hops.\n\n65\n00:03:36.760 --> 00:03:42.340\nThe first hop was core two, the second hop\nwas edge one, and the third hop was our\n\n66\n00:03:42.340 --> 00:03:46.000\ndestination, edge two, that that IP must\nbe a loop back interface on that router or\n\n67\n00:03:46.000 --> 00:03:48.510\nsomething, something directly plugged\ninto it, cause it didn't go very far.\n\n68\n00:03:48.510 --> 00:03:53.250\nSo,if I've only got three hops,\nand edge one is\n\n69\n00:03:53.250 --> 00:03:57.360\nalready passed my mistake then that person\nwho's making that decision is Core2.\n\n70\n00:03:57.360 --> 00:04:02.780\nCore 2 is actively making a decision not\nto go to Edge2 and instead to go to Edge1.\n\n71\n00:04:02.780 --> 00:04:05.930\nSo let's jump over to Core2 and\nfind out why it's making that decision.\n\n72\n00:04:05.930 --> 00:04:08.080\nRight.\nWhat's influencing it?\n\n73\n00:04:08.080 --> 00:04:12.220\nSo if I jump over to Core2,\nwe can take a look at its routing table.\n\n74\n00:04:14.130 --> 00:04:15.390\nAnd I'm gonna do a show IP route and\n\n75\n00:04:15.390 --> 00:04:18.850\nI'm just going to just filter\nthat down from 192.68.100.\n\n76\n00:04:18.850 --> 00:04:19.350\nWhoops.\n\n77\n00:04:21.060 --> 00:04:22.250\nThere we go.\n\n78\n00:04:22.250 --> 00:04:23.030\nAnd sure enough,\n\n79\n00:04:23.030 --> 00:04:26.100\nI've got that route and it's telling\nme I can get there via 192.168.16.4.\n\n80\n00:04:26.100 --> 00:04:30.640\nSo I can get to it via that network.\n\n81\n00:04:30.640 --> 00:04:34.330\nAnd .4 that's Edge1.\n\n82\n00:04:34.330 --> 00:04:37.220\nSo I'm going to edge one\ninstead of edge two.\n\n83\n00:04:37.220 --> 00:04:40.410\nNow edge two,\nI actually don't remember its IP address.\n\n84\n00:04:40.410 --> 00:04:43.420\nI want to say it doesn't\nhave an IP on Vlan16.\n\n85\n00:04:43.420 --> 00:04:45.400\nI think its on Vlan12 if I remember it.\n\n86\n00:04:45.400 --> 00:04:46.240\nLet's find out.\n\n87\n00:04:46.240 --> 00:04:51.910\nSo, if I jump over to edge two, I'm gonna\n\n88\n00:04:51.910 --> 00:04:57.010\njust do a quick show IP interface brief\nhere to see what I've got working here.\n\n89\n00:04:57.010 --> 00:04:59.820\nAnd yeah, it's 192.162.12.5 so\n\n90\n00:04:59.820 --> 00:05:04.200\nit's on this different network\nthan the other ones right.\n\n91\n00:05:04.200 --> 00:05:06.080\nIt doesn't have one on V-LAN 16,\nit's on V-LAN 12.\n\n92\n00:05:06.080 --> 00:05:09.350\nIt's not a big deal,\nI should still be communicating with it.\n\n93\n00:05:09.350 --> 00:05:13.890\nSo let's find out where my problem is,\nnow if I go back to my topology here\n\n94\n00:05:15.130 --> 00:05:18.740\neverybody, all four of these\nguys are in OSPF Area 0.\n\n95\n00:05:18.740 --> 00:05:22.480\nSo we should all be exchanging and\nlearning routes the same way.\n\n96\n00:05:22.480 --> 00:05:24.800\nI'm learning a route to\n192.168.100 via NYEDGE1 via OSPF.\n\n97\n00:05:24.800 --> 00:05:33.080\nI should be learning a route from\nNYEDGE2 via OSPF also all right?\n\n98\n00:05:33.080 --> 00:05:36.920\nBut I'm not, or maybe I am and\nthe metric is not as good.\n\n99\n00:05:36.920 --> 00:05:38.300\nNow that doesn't make any sense.\n\n100\n00:05:38.300 --> 00:05:40.790\nIf I am learning the route\nfrom NYEDGE2 directly,\n\n101\n00:05:40.790 --> 00:05:44.560\nthat metric should be better than a metric\nthat I'm learning through somebody else\n\n102\n00:05:44.560 --> 00:05:47.910\nespecially since there's a serial line,\nthis is 100 mega line.\n\n103\n00:05:47.910 --> 00:05:50.650\nBut maybe somebody's overwritten\nthe bandwidth setting on the line and\n\n104\n00:05:50.650 --> 00:05:52.130\nI think this is worse.\n\n105\n00:05:52.130 --> 00:05:56.070\nThen, if I go through the other side,\nremember OSPFs metric is cost.\n\n106\n00:05:56.070 --> 00:05:58.880\nAnd cost is calculated based on bandwidth,\nright?\n\n107\n00:05:58.880 --> 00:06:01.050\nIt takes the reference\nbandwidth of 100 megabit,\n\n108\n00:06:01.050 --> 00:06:04.130\nthen divides that by whatever your\nactual bandwidth is to get your cost.\n\n109\n00:06:04.130 --> 00:06:06.620\nAnd that's the metric that OSPF uses.\n\n110\n00:06:06.620 --> 00:06:08.090\nSo maybe that's been manipulated.\n\n111\n00:06:08.090 --> 00:06:10.620\nMaybe I do have a downed interface or\nsomething.\n\n112\n00:06:10.620 --> 00:06:13.800\nA downed interface is easy to spot, cuz\nyou won't have a neighbor relationship.\n\n113\n00:06:13.800 --> 00:06:15.730\nLet's see if we have\na neighbor relationship.\n\n114\n00:06:15.730 --> 00:06:18.320\nEdge2 should be talking to Core2.\n\n115\n00:06:18.320 --> 00:06:19.650\nMaybe it isn't, right?\n\n116\n00:06:19.650 --> 00:06:23.890\nSo if I jump back over to CORE2,\nI'm gonna do\n\n117\n00:06:23.890 --> 00:06:28.690\na show ip ospf neighbor and\njust to see what I've got on this one.\n\n118\n00:06:30.230 --> 00:06:34.760\nAnd see if I do have a neighbor with it,\nokay?\n\n119\n00:06:34.760 --> 00:06:38.630\nAnd I see I've got two neighbors,\n192.168.16.2, that's NYCORE1.\n\n120\n00:06:38.630 --> 00:06:40.520\nAnd, 192.168.255.4, that's NYEDGE1,\n\n121\n00:06:40.520 --> 00:06:45.840\nI don't have a neighbor\nrelationship with NYCORE2.\n\n122\n00:06:45.840 --> 00:06:47.600\nI mean, NYEDGE2.\n\n123\n00:06:47.600 --> 00:06:50.850\nSo, if I don't have a neighbor\nrelationship with Edge2,\n\n124\n00:06:50.850 --> 00:06:52.700\nI'm not learning its routes.\n\n125\n00:06:52.700 --> 00:06:56.130\nAnd, I'm gonna learn the route through\nEdge1, and that's the end of the story.\n\n126\n00:06:56.130 --> 00:06:59.300\nI don't have a neighbor\nrelationship with that one router.\n\n127\n00:06:59.300 --> 00:07:00.760\nWhy is that?\n\n128\n00:07:00.760 --> 00:07:04.030\nOkay, well in this case, I'm not sure.\n\n129\n00:07:04.030 --> 00:07:05.350\nI'm not sure why that is.\n\n130\n00:07:05.350 --> 00:07:08.420\nThere's more than likely some\nkind of issue with my adjacency.\n\n131\n00:07:08.420 --> 00:07:11.300\nI'm just gonna do a quick double check,\na real common cause for\n\n132\n00:07:11.300 --> 00:07:12.510\nthis is authentication.\n\n133\n00:07:12.510 --> 00:07:13.090\nRight?\n\n134\n00:07:13.090 --> 00:07:17.460\nAnd so I can do a show run and look for\n\n135\n00:07:17.460 --> 00:07:23.080\nthe OSPF section and, oh, apparently that\ncommand is not supported in this iOS.\n\n136\n00:07:23.080 --> 00:07:25.800\nNot every iOS supports\nthe section command, so\n\n137\n00:07:25.800 --> 00:07:29.630\nI'll just do a show run and\nI'll begin with the keyword ospf.\n\n138\n00:07:29.630 --> 00:07:34.090\nAnd I'm just gonna look and\nsee that ospf configuration,\n\n139\n00:07:34.090 --> 00:07:36.170\nI'm looking to see if\nauthentication is turned on.\n\n140\n00:07:36.170 --> 00:07:40.040\nBecause if I've got a bad\npassword in between Core2 and\n\n141\n00:07:40.040 --> 00:07:42.320\nEdge2 then that's gonna\nstop that adjacency.\n\n142\n00:07:42.320 --> 00:07:46.430\nBut I don't see any passwords I\ndo have passive interface default\n\n143\n00:07:46.430 --> 00:07:48.650\nwhich could be a problem.\n\n144\n00:07:48.650 --> 00:07:51.770\nExcept I got no passive\ninterface vland 12.\n\n145\n00:07:51.770 --> 00:07:55.930\nAnd I know that edge 2 is on vland 12 so\nthat should be okay.\n\n146\n00:07:55.930 --> 00:08:00.660\nSo, I should be able to talk to it, and\ni've got that network 192.168.12.0,\n\n147\n00:08:00.660 --> 00:08:05.620\nits added into my OSBF process, so\nI should be able to communicate.\n\n148\n00:08:05.620 --> 00:08:08.090\nI am redistributing some routes but\nthere's no filters there either.\n\n149\n00:08:08.090 --> 00:08:09.660\nSo I'm not too worried about that.\n\n150\n00:08:09.660 --> 00:08:11.930\nAnd it looks good, right.\n\n151\n00:08:11.930 --> 00:08:16.090\nI'm gonna double check that vlan interface\njust to see if there's any ACLs cuz you\n\n152\n00:08:16.090 --> 00:08:18.550\ncan write an ACL to\nblock OSPF if you want.\n\n153\n00:08:18.550 --> 00:08:22.290\nNot a whole lot of need for\nthat, but some people do.\n\n154\n00:08:22.290 --> 00:08:24.744\nSo I'm gonna do a show run for\ninterface vlan 12.\n\n155\n00:08:25.890 --> 00:08:27.330\nAnd nothing exciting there.\n\n156\n00:08:27.330 --> 00:08:30.490\nI do have HSRP configured,\nbut no big deal.\n\n157\n00:08:30.490 --> 00:08:33.790\nOSPF will continue to run regardless\nof whether we're active or standby.\n\n158\n00:08:33.790 --> 00:08:36.870\nCuz we need to know the routes\nif we do become active, right.\n\n159\n00:08:36.870 --> 00:08:38.080\nSo that's gonna be running.\n\n160\n00:08:38.080 --> 00:08:40.230\nSo I don't see an OSPF problem here.\n\n161\n00:08:40.230 --> 00:08:42.230\nAt least not one that's jumping out at me.\n\n162\n00:08:42.230 --> 00:08:44.330\nBut I know that OSPF isn't working.\n\n163\n00:08:44.330 --> 00:08:46.030\nSo What do I do?\n\n164\n00:08:46.030 --> 00:08:48.730\nWell, I could do a debug, right?\n\n165\n00:08:48.730 --> 00:08:53.110\nOSPF actually has several debugs that\nwe can do, and you'll see debug events,\n\n166\n00:08:53.110 --> 00:08:55.440\ndebug packet, and so on.\n\n167\n00:08:55.440 --> 00:08:57.580\nWhen you're dealing with\nneighbor relationships,\n\n168\n00:08:57.580 --> 00:09:03.400\none of the easier ones to do is debugging\nadjacencies, adj, and packet, right?\n\n169\n00:09:03.400 --> 00:09:05.950\nI wanna see the packets and\nthe adjacencies.\n\n170\n00:09:05.950 --> 00:09:09.930\nThe bigger your network, though, the more\nof these messages you're going to see.\n\n171\n00:09:09.930 --> 00:09:13.900\nSo oftentimes you might need\nto apply a filter to debug so\n\n172\n00:09:13.900 --> 00:09:15.900\nthat you don't get overwhelmed with data.\n\n173\n00:09:15.900 --> 00:09:20.240\nSo for example when you do a debug if you\ndo a question mark there you'll see that\n\n174\n00:09:20.240 --> 00:09:24.140\nyou can actually do\na debug Interface command.\n\n175\n00:09:24.140 --> 00:09:27.040\nAnd when you look at it,\nlet me just get to where it shows,\n\n176\n00:09:27.040 --> 00:09:29.560\nright here, debug interface.\n\n177\n00:09:29.560 --> 00:09:32.240\nWe can actually start to put\nkind of limits in place to\n\n178\n00:09:32.240 --> 00:09:36.510\nfilter how much data we're gonna get back\nand tie it to a particular interface or\n\n179\n00:09:36.510 --> 00:09:40.040\nsomething of that nature to create\nconstraints on the amount of data.\n\n180\n00:09:40.040 --> 00:09:41.300\nThis network's pretty small though, so\n\n181\n00:09:41.300 --> 00:09:43.700\nI should just be able\nto a debug ip ospf adj.\n\n182\n00:09:44.880 --> 00:09:47.040\nAnd the debug ip ospf packet.\n\n183\n00:09:48.600 --> 00:09:52.680\nSo then I can see that information and I\nimmediately start getting some information\n\n184\n00:09:53.710 --> 00:09:56.900\nand if I, let me zoom out of it so\nI can see the whole thing.\n\n185\n00:09:56.900 --> 00:10:00.958\nI can see that I am receiving\nsome communications from\n\n186\n00:10:00.958 --> 00:10:03.120\n192.168.12.5 all right.\n\n187\n00:10:03.120 --> 00:10:07.160\nSo I'm receiving messages From that host.\n\n188\n00:10:07.160 --> 00:10:10.750\nAnd we should be building\nup an adjacency then.\n\n189\n00:10:10.750 --> 00:10:14.270\n192.168.12.5 is NYEDGE2.\n\n190\n00:10:14.270 --> 00:10:15.580\nWe can verify that real quick.\n\n191\n00:10:15.580 --> 00:10:19.810\nI'm just gonna jump over to edge\ntwo where we had done a show IP\n\n192\n00:10:19.810 --> 00:10:24.090\ninterface brief earlier, and I can see\nthat it is 192 dot 168 dot 12 dot five.\n\n193\n00:10:24.090 --> 00:10:28.530\nSo, on Core 2 I'm receiving\nOSPF hello] messages, but\n\n194\n00:10:28.530 --> 00:10:30.760\nI'm not building the adjacency.\n\n195\n00:10:30.760 --> 00:10:32.610\nWhy would that happen?\n\n196\n00:10:32.610 --> 00:10:36.370\nWell, I could have incorrect area numbers.\n\n197\n00:10:36.370 --> 00:10:40.880\nI could be Area5 and it could be Area6 and\nwe're not gonna build them [adjacency?].\n\n198\n00:10:40.880 --> 00:10:41.910\nArea numbers have to match.\n\n199\n00:10:41.910 --> 00:10:43.910\nIn fact, when you send hellos,\n\n200\n00:10:43.910 --> 00:10:46.810\nthere's actually a number of criteria\nin there that have to match.\n\n201\n00:10:46.810 --> 00:10:51.920\nPassword, area number,\nwe've got hello and dead intervals.\n\n202\n00:10:51.920 --> 00:10:53.820\nThose have to match, what else is there.\n\n203\n00:10:53.820 --> 00:10:57.960\nThere's several other, oh area type,\nI might be sent to a stub and\n\n204\n00:10:57.960 --> 00:10:58.750\nit might not be.\n\n205\n00:10:58.750 --> 00:11:01.910\nThose are all things that can\nthis adjacency not to build.\n\n206\n00:11:01.910 --> 00:11:03.880\nAnd in this case I see I'm\ngetting the hellos but\n\n207\n00:11:03.880 --> 00:11:07.290\nI'm not getting any messages\nabout the adjacency not building.\n\n208\n00:11:07.290 --> 00:11:10.780\nNow the problem here is this has\nprobably been down a little while.\n\n209\n00:11:10.780 --> 00:11:14.180\nAnd so I'm not necessarily gonna get\nall the messages that I want to see.\n\n210\n00:11:14.180 --> 00:11:18.580\nSo I might need to clear my OSPF process\nto get it to retry everything and\n\n211\n00:11:18.580 --> 00:11:21.180\nsee if it actually builds something up and\ngives me some good errors.\n\n212\n00:11:21.180 --> 00:11:25.320\nBut I don't wanna down this guy because\nhe's kinda in the middle of my network, so\n\n213\n00:11:25.320 --> 00:11:27.270\nI might choose to down the other router.\n\n214\n00:11:27.270 --> 00:11:29.380\nBut, honestly,\nsomething that might be a little better,\n\n215\n00:11:29.380 --> 00:11:33.160\nlet me do an un-debug all here real\nquick and get all that turned off.\n\n216\n00:11:35.010 --> 00:11:36.590\nAnd there we go.\n\n217\n00:11:36.590 --> 00:11:39.340\nAnd I'm just gonna take a look at\nthe configuration on the other side.\n\n218\n00:11:39.340 --> 00:11:43.590\nI checked this guy for passwords, and\nI checked with this guy for filters,\n\n219\n00:11:43.590 --> 00:11:45.260\nroute maps, but\nI never checked the other side.\n\n220\n00:11:45.260 --> 00:11:47.940\nSo let me go check EDGE1, and\nmaybe we can save, I mean EDGE2,\n\n221\n00:11:47.940 --> 00:11:51.940\nand maybe we can save ourselves\nresetting an OSPF process.\n\n222\n00:11:51.940 --> 00:11:55.065\nIt's a lab, so it's really not a big deal,\nbut in real life and,\n\n223\n00:11:55.065 --> 00:11:57.775\nyou don't wanna reset an ospf process\nunless you absolutely have to,\n\n224\n00:11:57.775 --> 00:12:01.165\ncuz you're gonna dump your routing table,\nwhich means you're gonna create downtime.\n\n225\n00:12:01.165 --> 00:12:03.205\nAnd, so we do wanna avoid that,\nif possible.\n\n226\n00:12:03.205 --> 00:12:07.485\nSo, on this guy, I'm just gonna do\na show run, and we'll begin with ospf,\n\n227\n00:12:07.485 --> 00:12:08.895\nlike before.\n\n228\n00:12:08.895 --> 00:12:12.115\nAnd, oops, looks like we have some\nper-interface configurations.\n\n229\n00:12:12.115 --> 00:12:14.895\nSo, I've got an interface where\nit's statically set to area 0.\n\n230\n00:12:14.895 --> 00:12:17.090\nSo, that's not a big deal.\n\n231\n00:12:17.090 --> 00:12:21.030\nSo we'll kinda continue these guys.\n\n232\n00:12:21.030 --> 00:12:22.290\nI see a problem right there.\n\n233\n00:12:22.290 --> 00:12:26.240\nWith OSPF you can set configurations\nglobally in the router OSPF command.\n\n234\n00:12:26.240 --> 00:12:28.040\nOr you can set them on the interfaces.\n\n235\n00:12:28.040 --> 00:12:30.180\nLike here they're setting\nthis one to area 16.\n\n236\n00:12:30.180 --> 00:12:35.030\nAnd just in scanning here,\nwe can see this guy.\n\n237\n00:12:35.030 --> 00:12:39.090\nWhere it's got custom, dead intervals,\nand hello intervals defined.\n\n238\n00:12:39.090 --> 00:12:39.590\nRight?\n\n239\n00:12:39.590 --> 00:12:40.360\nRemember when I said for\n\n240\n00:12:40.360 --> 00:12:44.260\nan ospf adjacency to build up is\na lot of stuff that has to match.\n\n241\n00:12:44.260 --> 00:12:46.270\nDead interval and\nhello interval is one of those things,\n\n242\n00:12:46.270 --> 00:12:48.560\nor are two of those things\nthat have to match.\n\n243\n00:12:48.560 --> 00:12:52.370\nThis is on gigabit 0/0,\nif I look at my topology,\n\n244\n00:12:53.570 --> 00:12:56.770\nthat's this interface right\nhere pointing to Core2.\n\n245\n00:12:56.770 --> 00:12:57.450\nAll right.\n\n246\n00:12:57.450 --> 00:13:00.560\nSo Core2 didn't have those settings.\n\n247\n00:13:00.560 --> 00:13:03.520\nIt didn't have them and\nI could double check like Fas1/0/1 but\n\n248\n00:13:03.520 --> 00:13:06.220\nthat's not a routed port, right?\n\n249\n00:13:06.220 --> 00:13:09.340\nThat's a layer two port so\nit had to be on the VLAN interface.\n\n250\n00:13:09.340 --> 00:13:11.540\nAnd I could go and\nset that if I really wanted to.\n\n251\n00:13:11.540 --> 00:13:13.860\nBut in this case I have\nto make a decision.\n\n252\n00:13:13.860 --> 00:13:17.900\nI can fix Core2 to match\nthe intervals of Edge2 Or\n\n253\n00:13:17.900 --> 00:13:20.750\nI can fix edge two,\nto match the intervals of core two.\n\n254\n00:13:20.750 --> 00:13:24.050\nAnd in this case, I got to imagine fixing\nedge two is gonna be our better solution.\n\n255\n00:13:24.050 --> 00:13:26.670\nWe just need to remove the custom\nhello and dead intervals, so\n\n256\n00:13:26.670 --> 00:13:27.930\nthey go back to the default.\n\n257\n00:13:27.930 --> 00:13:31.020\nSo if I jump over to NY edge two,\nwe can do that.\n\n258\n00:13:32.250 --> 00:13:35.940\nBy basically removing those\ncommands that we see right there.\n\n259\n00:13:35.940 --> 00:13:39.400\nSo I'm gonna get into\ninterface GI0/0 Whoops,\n\n260\n00:13:39.400 --> 00:13:43.130\nI guess I'll get into Config first,\nalright, and\n\n261\n00:13:43.130 --> 00:13:47.190\nthen all we have to do is do some nos\non these for the dead interval and\n\n262\n00:13:47.190 --> 00:13:53.820\nhello interval, so I'll say no ip ospf\ndead-interval, and the hello-interval.\n\n263\n00:13:53.820 --> 00:13:56.700\nI don't even need to type the number,\nif you just leave that off it will put it\n\n264\n00:13:56.700 --> 00:14:00.589\nback to the default, and so\nnow if I take a look at that interface\n\n265\n00:14:01.760 --> 00:14:06.280\nIt's still enabled but it doesn't have\nthose custom intervals on it, all right?\n\n266\n00:14:06.280 --> 00:14:11.030\nSo that should take care of that,\nand we may have fixed our problem.\n\n267\n00:14:11.030 --> 00:14:13.560\nI guess I could do a show\nip ospf neighbor here and\n\n268\n00:14:13.560 --> 00:14:18.740\nsee if we've got a neighbor relationship\nwith the other switch, which we do.\n\n269\n00:14:18.740 --> 00:14:25.190\nAnd I can jump over to that other switch,\nCore2, and I see its got a new adjacency.\n\n270\n00:14:28.490 --> 00:14:29.220\nAnd there it is 192.168.12.5.\n\n271\n00:14:29.220 --> 00:14:32.690\nSo now we have an adjacency.\n\n272\n00:14:32.690 --> 00:14:37.150\nAnd if I do a show IP route for\n192.168.100.0,\n\n273\n00:14:37.150 --> 00:14:41.190\nI've got a routing entry\nstraight through Vlan12.\n\n274\n00:14:41.190 --> 00:14:44.530\nAll right, so now we're learning\nthe route that we're supposed to learn.\n\n275\n00:14:44.530 --> 00:14:48.520\nNow core two knows that it can get to that\nnumber by going right up to edge two.\n\n276\n00:14:48.520 --> 00:14:51.690\nAnd if we jump back to our server\nwe should be able to verify that,\n\n277\n00:14:51.690 --> 00:14:52.500\nthat's working.\n\n278\n00:14:55.350 --> 00:14:58.010\nSo I've got the tracer out from before\nstill right here on the screen.\n\n279\n00:14:58.010 --> 00:15:01.440\nI'm gonna run a new tracer out,\nreally just the same tracer out again.\n\n280\n00:15:01.440 --> 00:15:04.550\nAnd so we'll run it, and what we should\nsee is a shorter path this time.\n\n281\n00:15:04.550 --> 00:15:09.620\nThat we go to CORE2 and then we go right\nup to EDGE2 and we get to our destination.\n\n282\n00:15:09.620 --> 00:15:12.110\nSo I expected to see .3 first,\nwhich we do.\n\n283\n00:15:12.110 --> 00:15:16.214\nAnd then hopefully we see 12.5 or 100.1.\n\n284\n00:15:16.214 --> 00:15:18.400\nThere we go, 100.1.\n\n285\n00:15:18.400 --> 00:15:21.060\nWent right to it, and\nnow we're in business, right?\n\n286\n00:15:21.060 --> 00:15:23.760\nSo, now we're following\nthe optimal routing path.\n\n287\n00:15:23.760 --> 00:15:26.650\nIn this case, it wasn't that\nthe metrics were messed with,\n\n288\n00:15:26.650 --> 00:15:28.040\nit wasn't that the interface was down.\n\n289\n00:15:28.040 --> 00:15:31.230\nAlthough, those are all possible causes,\nthis time, it just turned out to be,\n\n290\n00:15:31.230 --> 00:15:32.120\nthere was no adjacency.\n\n291\n00:15:32.120 --> 00:15:35.390\nThere was no way for us to learn\nthe route that was supposed to be there.\n\n292\n00:15:35.390 --> 00:15:37.400\nAs soon as we fix that, problem resolved.\n\n293\n00:15:37.400 --> 00:15:39.860\nWe are now following the path as for\non the ticket.\n\n294\n00:15:39.860 --> 00:15:43.570\nSo this one turned out not to be so bad,\nwe really already knew that it was gonna\n\n295\n00:15:43.570 --> 00:15:47.090\nbe down to two host just because\nof the path they were discussing.\n\n296\n00:15:47.090 --> 00:15:49.930\nWe got in there and fixed the problem and\nit's solved, right?\n\n297\n00:15:49.930 --> 00:15:51.950\nThat's kind of all we can ask for\nwith the troubleshooting ticket.\n\n298\n00:15:51.950 --> 00:15:53.680\nAll right, well that wraps this one up.\n\n299\n00:15:53.680 --> 00:15:56.067\nStay tuned, we've got one more\ntroubleshooting ticket for\n\n300\n00:15:56.067 --> 00:15:58.421\nset three so you'll definitely\nwanna stay tuned for that.\n\n301\n00:15:58.421 --> 00:16:00.670\nAnd I look forward to seeing you then.\n\n302\n00:16:00.670 --> 00:16:06.789\n[SOUND]\n\n",
          "vimeoId": "151825528"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #7` from set #3. The trouble ticket states that \"You are unable to ping 10.61.1.1 from any device \"",
          "length": "600",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-3-7-set_3_issue_7-120115-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-3-7-set_3_issue_7-120115-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-3-7-set_3_issue_7-120115-1-sm.jpg",
          "title": "Set 3 Issue 7",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:07.383\n[MUSIC]\n\n2\n00:00:07.383 --> 00:00:11.103\nIt's time for the final troubleshooting\nissue we have for Set 3,\n\n3\n00:00:11.103 --> 00:00:12.530\nthis is Issue number 7.\n\n4\n00:00:12.530 --> 00:00:15.220\nAnd we've got another\nroute reachability issue.\n\n5\n00:00:15.220 --> 00:00:20.000\nSo the troubleshooting ticket for\nthis one says you are unable\n\n6\n00:00:20.000 --> 00:00:22.620\nto ping 10.61.1.1 from any device, right?\n\n7\n00:00:22.620 --> 00:00:24.160\nThis is a big scope on this on.\n\n8\n00:00:24.160 --> 00:00:26.780\nNone of our devices can\nping this particular IP.\n\n9\n00:00:26.780 --> 00:00:29.730\nSo it looks like there's a route for\na network that's just missing and\n\n10\n00:00:29.730 --> 00:00:30.770\nwe don't have a way to get there.\n\n11\n00:00:30.770 --> 00:00:32.070\nNow, I assume that's it.\n\n12\n00:00:32.070 --> 00:00:34.930\nI guess there could be some ACLs or\nother things in place, but\n\n13\n00:00:34.930 --> 00:00:36.680\nit sounds more like a routing issue to me.\n\n14\n00:00:36.680 --> 00:00:40.120\nSo let's dive in and\nsee if we can't find out why that is.\n\n15\n00:00:40.120 --> 00:00:43.140\nI'm gonna start just by looking\nat a node on our system.\n\n16\n00:00:43.140 --> 00:00:46.590\nNow, it's nice they told us\non any device on our network.\n\n17\n00:00:46.590 --> 00:00:50.790\nSo 10.61.1.1's the destination, but\nthe source could really be anybody.\n\n18\n00:00:50.790 --> 00:00:52.790\nThat means I don't have to mess\nwith a Windows server this time.\n\n19\n00:00:52.790 --> 00:00:55.000\nI can just pick one of my other devices.\n\n20\n00:00:55.000 --> 00:00:56.695\nLike I'll take CORE2.\n\n21\n00:00:56.695 --> 00:00:59.889\nCORE2's that switch that's kind of the\nactive gateway for most of our networks.\n\n22\n00:00:59.889 --> 00:01:05.416\nAnd if I use that guy as my tester,\nit needs to be able to get to 10.61.1.1.\n\n23\n00:01:05.416 --> 00:01:08.090\nWell, where is that network?\n\n24\n00:01:08.090 --> 00:01:09.860\nIf I look around on my topology map here,\n\n25\n00:01:09.860 --> 00:01:14.352\nI can actually spot it right here,\n10.61.1.1.\n\n26\n00:01:14.352 --> 00:01:16.960\nIt's a /32.\nIt's a single IP.\n\n27\n00:01:16.960 --> 00:01:19.111\nAnd it's up here in OSPF Area 61, so\n\n28\n00:01:19.111 --> 00:01:22.894\nthat means it exists in this network\nup here that I don't control.\n\n29\n00:01:22.894 --> 00:01:24.702\nI don't control ISP1 or ISP2.\n\n30\n00:01:24.702 --> 00:01:25.950\nI can't get to those routers.\n\n31\n00:01:25.950 --> 00:01:27.470\nI can't even look at their configs.\n\n32\n00:01:27.470 --> 00:01:29.130\nIt's completely invisible to me.\n\n33\n00:01:29.130 --> 00:01:31.242\nBut NYEDGE2, I do control.\n\n34\n00:01:31.242 --> 00:01:33.591\nIt should be learning about that route and\n\n35\n00:01:33.591 --> 00:01:36.686\nit should be advertising\nthat route into OSPF Area 0.\n\n36\n00:01:36.686 --> 00:01:38.048\nSo that's how we should be learning it.\n\n37\n00:01:38.048 --> 00:01:43.758\nSo if I'm missing the route, I expect\nit to be EDGE2 that's the problem.\n\n38\n00:01:43.758 --> 00:01:45.807\nIf it's an ACL that's blocking access,\n\n39\n00:01:45.807 --> 00:01:49.914\nbecause they said I can't ping it from any\ndevice, I expect the ACL to be on EDGE2.\n\n40\n00:01:49.914 --> 00:01:53.305\nSo it looks like everything points\nto EDGE2 as being the source of our\n\n41\n00:01:53.305 --> 00:01:54.420\nproblem here.\n\n42\n00:01:54.420 --> 00:01:57.740\nAlthough could just be that IP is\ndown out there on a remote network.\n\n43\n00:01:57.740 --> 00:02:00.060\nI can't fix that, so\nI doubt that's the case.\n\n44\n00:02:00.060 --> 00:02:03.326\nAll right, well, just to start,\nI'm gonna use CORE2 as my tester.\n\n45\n00:02:03.326 --> 00:02:04.686\nSo I'm gonna connect to it.\n\n46\n00:02:04.686 --> 00:02:07.100\nI'm gonna try and ping the IP and\nmake sure it doesn't work, and\n\n47\n00:02:07.100 --> 00:02:09.610\nI'm gonna check my routing table\nto see if I know the route.\n\n48\n00:02:09.610 --> 00:02:13.675\nSo let me jump over to CORE2 and\nwe'll start our test right there.\n\n49\n00:02:13.675 --> 00:02:19.703\nAll right, so on CORE2,\nI'm gonna do a ping to 10.61.1.1,\n\n50\n00:02:19.703 --> 00:02:23.225\njust to see if I can even get to it,\nright?\n\n51\n00:02:23.225 --> 00:02:27.260\nIf I can get to it, this troubleshooting\nticket might be over, easy problem, right?\n\n52\n00:02:27.260 --> 00:02:28.910\nSo I sent out my ping.\n\n53\n00:02:28.910 --> 00:02:30.310\nYeah, it's not looking so good.\n\n54\n00:02:30.310 --> 00:02:31.885\nAll right, so I can't get there.\n\n55\n00:02:31.885 --> 00:02:38.060\nThen I'm gonna do a show ip route for\n10.61.1.1, and network not in table.\n\n56\n00:02:38.060 --> 00:02:39.604\nSo I don't know how to get there.\n\n57\n00:02:39.604 --> 00:02:43.240\nNow, don't act too hasty there,\nI get network not in table.\n\n58\n00:02:43.240 --> 00:02:44.250\nThat's fine.\n\n59\n00:02:44.250 --> 00:02:48.240\nBut I could still have a gateway of\nlast resort or a default gateway.\n\n60\n00:02:48.240 --> 00:02:50.240\nSo I'm gonna do a show IP route, and\n\n61\n00:02:50.240 --> 00:02:53.080\njust look to see if I have a gateway\nof last resort, and I don't.\n\n62\n00:02:53.080 --> 00:02:58.210\nOkay, so I need a specific route for\n10.61 or I need a gateway of last resort.\n\n63\n00:02:58.210 --> 00:03:00.530\nOne or the other, to be able to try and\nget to this other network.\n\n64\n00:03:00.530 --> 00:03:03.676\nBut right now I don't have either, and so\nthere's no way I can get to the network.\n\n65\n00:03:03.676 --> 00:03:06.668\nSo if EDGE2 is suppose to be\nlearning on that network and\n\n66\n00:03:06.668 --> 00:03:10.230\nadvertising it to us,\nit's apparently failing, right?\n\n67\n00:03:10.230 --> 00:03:14.940\nAnd if I do a show IP OSPF neighbor.\n\n68\n00:03:14.940 --> 00:03:17.900\nYou'll remember from the last\ntroubleshooting ticket that we did,\n\n69\n00:03:17.900 --> 00:03:21.250\nwe have a neighbor relationship\nbuilt with EDGE2 right there.\n\n70\n00:03:21.250 --> 00:03:25.760\nSo we should be learning routes from it,\nit's just not telling us the route.\n\n71\n00:03:25.760 --> 00:03:26.891\nSo let's go found out why.\n\n72\n00:03:26.891 --> 00:03:32.658\nI'm gonna go look at EDGE2, and I am gonna\nstart with EDGE2's OSPF configuration.\n\n73\n00:03:32.658 --> 00:03:34.120\nSo let's get in here.\n\n74\n00:03:35.540 --> 00:03:37.193\nAnd we'll enable.\n\n75\n00:03:37.193 --> 00:03:42.516\nAnd I'm just gonna do a show run and\nI'm gonna look for router OSPF.\n\n76\n00:03:42.516 --> 00:03:44.283\nI wanna see the OSPF configuration.\n\n77\n00:03:44.283 --> 00:03:45.740\nAll right, and there it is.\n\n78\n00:03:45.740 --> 00:03:49.620\nI can see that we've got OSPF 100\nwhich is just our process ID.\n\n79\n00:03:49.620 --> 00:03:54.578\nAnd then I've got a network 192.168.12.0,\nwhich is set to area 0.\n\n80\n00:03:54.578 --> 00:03:58.620\nAnd 192.168.255.0, which is set to area 0.\n\n81\n00:03:58.620 --> 00:04:03.190\nThose two networks, if I go back to\nmy topology, that's this network and\n\n82\n00:04:03.190 --> 00:04:05.490\nthis network, the LAN interfaces.\n\n83\n00:04:05.490 --> 00:04:07.020\nThese guys are set to area 0.\n\n84\n00:04:07.020 --> 00:04:08.440\nThat's what I expect to see.\n\n85\n00:04:08.440 --> 00:04:11.480\nAnd I know I've got an adjacency\nover here so I know that's working.\n\n86\n00:04:11.480 --> 00:04:16.750\nAll right, but we're also supposed to be\nparticipating in OSPF area 61, aren't we?\n\n87\n00:04:17.990 --> 00:04:21.000\nWell, when I looked at that config,\nI didn't see it.\n\n88\n00:04:21.000 --> 00:04:23.561\nAnd that's because there's two\nways to configure OSPF, right?\n\n89\n00:04:23.561 --> 00:04:26.060\nOne way is to configure it here\nwith the global commands, but\n\n90\n00:04:26.060 --> 00:04:29.648\nthere's another way which is where we can\nconfigure it on the individual interfaces.\n\n91\n00:04:29.648 --> 00:04:33.100\nAnd if you remember the last ticket we\nsaw, that is actually what's done here.\n\n92\n00:04:33.100 --> 00:04:34.920\nSo that's why I don't see those commands.\n\n93\n00:04:34.920 --> 00:04:37.550\nI can do a quick show IP protocols.\n\n94\n00:04:39.032 --> 00:04:40.658\nAnd I'll see it in there.\n\n95\n00:04:40.658 --> 00:04:42.954\nSo I've got OSPF 100.\n\n96\n00:04:42.954 --> 00:04:44.790\nThese guys are separate area 0.\n\n97\n00:04:44.790 --> 00:04:45.690\nThat's exciting.\n\n98\n00:04:45.690 --> 00:04:49.020\nAnd I kind of expected\nto see a little more.\n\n99\n00:04:49.020 --> 00:04:52.638\nI expected to see either\nanother OSPF process or\n\n100\n00:04:52.638 --> 00:04:56.715\nother interfaces that were in area 16 or\narea 61.\n\n101\n00:04:56.715 --> 00:04:57.995\nAnd I don't see that.\n\n102\n00:04:57.995 --> 00:04:59.940\nSo that's interesting.\n\n103\n00:04:59.940 --> 00:05:01.650\nSo let's find out what's going on there.\n\n104\n00:05:01.650 --> 00:05:05.010\nSo if I do a,\nlet's just do a show run, and\n\n105\n00:05:05.010 --> 00:05:07.480\nwe'll take a look at\nthose other interfaces.\n\n106\n00:05:07.480 --> 00:05:12.390\nAnd as we scan down the interfaces,\nwhat we see are here's some\n\n107\n00:05:12.390 --> 00:05:17.710\nserial interfaces, and then we get\nto our gigabit interfaces back here.\n\n108\n00:05:17.710 --> 00:05:18.990\nHere we go, all right.\n\n109\n00:05:18.990 --> 00:05:24.780\nSo I've got 172.14.0.2, and\nif I go to my topology,\n\n110\n00:05:24.780 --> 00:05:28.060\nI can see that's the one that's\nsupposed to be in OSPF area 61.\n\n111\n00:05:28.060 --> 00:05:34.130\nAnd if we look on the interface, IP OSPF\n100, area 61, so we've got it right there.\n\n112\n00:05:34.130 --> 00:05:36.950\nIt's defined, and it's not working.\n\n113\n00:05:36.950 --> 00:05:41.090\nWhen I do a show IP protocols,\nI'm not seeing that area,\n\n114\n00:05:41.090 --> 00:05:42.212\nwhich is pretty interesting.\n\n115\n00:05:42.212 --> 00:05:46.180\nNow, what would cause\nan area not to show up\n\n116\n00:05:46.180 --> 00:05:48.430\nif it's actually defined right\nthere in the configuration?\n\n117\n00:05:49.510 --> 00:05:51.580\nWell, if we have no adjacencies.\n\n118\n00:05:51.580 --> 00:05:55.015\nIf you have absolutely no adjacencies, the\nprocess fails, and it won't show up here.\n\n119\n00:05:55.015 --> 00:05:57.048\nThat's more than likely what I'm seeing.\n\n120\n00:05:57.048 --> 00:06:00.753\nNow, if it were a separate process,\nI would see that in the config,\n\n121\n00:06:00.753 --> 00:06:03.130\nand I didn't see that in the config.\n\n122\n00:06:03.130 --> 00:06:05.720\nSo it's running as part of this process,\n\n123\n00:06:05.720 --> 00:06:09.280\nit's just not showing up\nhere as being routed.\n\n124\n00:06:09.280 --> 00:06:11.550\nSo I could have a downed interface, right?\n\n125\n00:06:11.550 --> 00:06:12.910\nWhich I doubt is the case here.\n\n126\n00:06:12.910 --> 00:06:16.060\nWe could do a show IP interface brief and\nfigure that out.\n\n127\n00:06:16.060 --> 00:06:18.855\nOr, I could just not have\nan interface configured.\n\n128\n00:06:18.855 --> 00:06:20.126\nBut I saw that I did, right?\n\n129\n00:06:20.126 --> 00:06:20.950\nI had one.\n\n130\n00:06:20.950 --> 00:06:25.078\nWhen I look at this I've got\nthat interface right here, and\n\n131\n00:06:25.078 --> 00:06:29.453\nit does show as up up, and\nwhen I looked at that configuration,\n\n132\n00:06:29.453 --> 00:06:31.366\nI saw that it was set [LAUGH].\n\n133\n00:06:31.366 --> 00:06:35.460\nAll right, I saw that it was set for\narea 61, right?\n\n134\n00:06:35.460 --> 00:06:36.554\nWell, this is it again.\n\n135\n00:06:36.554 --> 00:06:37.978\nA symptom of moving too fast.\n\n136\n00:06:37.978 --> 00:06:41.063\nSo I skimmed over it really quickly.\n\n137\n00:06:41.063 --> 00:06:43.359\nAnd said, oh yeah, it's set for area 61.\n\n138\n00:06:43.359 --> 00:06:45.309\nBut it's not set for area 61.\n\n139\n00:06:45.309 --> 00:06:48.154\nIt's set for area 16.\n\n140\n00:06:48.154 --> 00:06:51.590\nWell, 16, it's 61 transposed,\nand when I saw 16,\n\n141\n00:06:51.590 --> 00:06:55.550\nI just kinda registered that as 61,\nnot thinking about it.\n\n142\n00:06:55.550 --> 00:06:56.260\nBut that's wrong.\n\n143\n00:06:56.260 --> 00:06:57.610\nThat's the wrong area number.\n\n144\n00:06:57.610 --> 00:06:59.900\nSo if I do a show IP OSPF neighbor,\n\n145\n00:07:01.340 --> 00:07:04.220\nI don't have any adjacencies\nwith the 172 network.\n\n146\n00:07:04.220 --> 00:07:06.130\nThis network that's up here.\n\n147\n00:07:06.130 --> 00:07:08.960\nThe ISP's,\nI don't have any adjacencies up here.\n\n148\n00:07:08.960 --> 00:07:11.130\nSo I'm not learning any of these networks.\n\n149\n00:07:11.130 --> 00:07:13.311\nI bet that network's not\neven in my routing table.\n\n150\n00:07:13.311 --> 00:07:15.933\nEven though I'm supposed to\nhave a direct connection to it.\n\n151\n00:07:15.933 --> 00:07:23.820\nIf I do a show IP route for 10.61.1.1,\nI don't have a route for it.\n\n152\n00:07:23.820 --> 00:07:26.550\nI can't tell the rest of the network\nabout a route that I don't even have\n\n153\n00:07:26.550 --> 00:07:27.380\na route for.\n\n154\n00:07:27.380 --> 00:07:30.580\nAnd, in this case, it looks like I don't\nhave a route because I'm configured for\n\n155\n00:07:30.580 --> 00:07:32.000\nthe wrong area.\n\n156\n00:07:32.000 --> 00:07:33.320\nSo I'm gonna fix that.\n\n157\n00:07:33.320 --> 00:07:37.982\nWe'll get into,\nwhat interface was that, gi0/1.\n\n158\n00:07:37.982 --> 00:07:44.138\nAnd we'll say IP OSPF 100,\narea 61, instead of area 16.\n\n159\n00:07:44.138 --> 00:07:47.380\nAnd as soon as we do that,\nour area number changes, and\n\n160\n00:07:47.380 --> 00:07:50.212\nI kind of expect to see\nsome adjacencies pop up.\n\n161\n00:07:50.212 --> 00:07:51.331\nThey'll pop up eventually.\n\n162\n00:07:51.331 --> 00:07:56.165\nI can do a show IP OSPF, sorry, neighbor.\n\n163\n00:07:56.165 --> 00:07:58.705\nThere we go.\n\n164\n00:07:58.705 --> 00:07:59.681\nAnd wait for those to pop up.\n\n165\n00:07:59.681 --> 00:08:02.820\nThere we go.\nWe've got the 172.14's are appearing.\n\n166\n00:08:02.820 --> 00:08:04.500\nThose are the two ISPs that are out there.\n\n167\n00:08:04.500 --> 00:08:06.127\nI should start learning routes.\n\n168\n00:08:06.127 --> 00:08:11.693\nAnd if I do a show IP route for\n10.61.1.1, I now have a route.\n\n169\n00:08:11.693 --> 00:08:15.230\nAnd if I start to look at my other nodes,\nthey should be learning that too.\n\n170\n00:08:15.230 --> 00:08:18.600\nSo if I jump back to CORE2,\nthe one I kind of designated as my tester.\n\n171\n00:08:19.610 --> 00:08:23.290\nWhen I come over to this guy,\nI should be able to do\n\n172\n00:08:24.430 --> 00:08:27.810\na show IP route for 10.61.1.1,\nand I do have a route.\n\n173\n00:08:27.810 --> 00:08:32.740\nAnd, if I try and ping it,\nI can get to it, right?\n\n174\n00:08:32.740 --> 00:08:35.442\nSo, this turned out to simply\nbe a wrong area number.\n\n175\n00:08:35.442 --> 00:08:40.094\nWhen we look at our topology,\nright up here, we've got area 61.\n\n176\n00:08:40.094 --> 00:08:41.862\nThese two guys were in area 61.\n\n177\n00:08:41.862 --> 00:08:44.687\nThis guy was configured for area 16.\n\n178\n00:08:44.687 --> 00:08:47.360\nThe area numbers do not match,\nand it fails.\n\n179\n00:08:47.360 --> 00:08:50.220\nIt's really the same kind of problem\nwe saw in the last issue where we had\n\n180\n00:08:50.220 --> 00:08:52.330\nhello and dead timers that didn't match.\n\n181\n00:08:52.330 --> 00:08:54.900\nIf those don't match,\nyou can't build an adjacency.\n\n182\n00:08:54.900 --> 00:08:58.370\nHere the area number didn't match,\nand so we couldn't build an adjacency.\n\n183\n00:08:58.370 --> 00:09:01.340\nIt's not like other routing protocols\nwhere you don't have to worry about that,\n\n184\n00:09:01.340 --> 00:09:04.470\nwith OSPF, your area numbers have to\nmatch, or you don't exchange routes.\n\n185\n00:09:04.470 --> 00:09:08.210\nSo that was our problem, once we fixed it,\nwe now learned about the route and\n\n186\n00:09:08.210 --> 00:09:09.470\nwe're able to ping.\n\n187\n00:09:09.470 --> 00:09:12.371\nSo on this one we started out with\na route missing from our routing table,\n\n188\n00:09:12.371 --> 00:09:14.390\nit turned out to be an adjacency problem.\n\n189\n00:09:14.390 --> 00:09:17.080\nThe adjacency turned out to be\na misconfigured area number.\n\n190\n00:09:17.080 --> 00:09:19.090\nOnce we resolved that, routers came up.\n\n191\n00:09:19.090 --> 00:09:22.180\nWe learned the route, now we've got\nthe connectivity we were looking for.\n\n192\n00:09:22.180 --> 00:09:23.622\nProblem solved and we moved on.\n\n193\n00:09:23.622 --> 00:09:25.610\nNow, that wraps up Set number 3.\n\n194\n00:09:25.610 --> 00:09:29.460\nWe've got more troubleshooting sets coming\nup, and we've been moving kinda slow on\n\n195\n00:09:29.460 --> 00:09:31.930\nthese as we go through our\nbasic troubleshooting steps.\n\n196\n00:09:31.930 --> 00:09:34.600\nStarting with Set number 4, we're gonna\nstart moving a little bit faster,\n\n197\n00:09:34.600 --> 00:09:37.990\nas we dial in and get to that\ninformation as quickly as possible\n\n198\n00:09:37.990 --> 00:09:39.950\nto solve the problems,\nand move forward with it.\n\n199\n00:09:39.950 --> 00:09:43.160\nBut we've seen a lot of great examples\nhere of ways to troubleshoot and\n\n200\n00:09:43.160 --> 00:09:45.740\nisolate an issue, solve it,\nand then move on, right?\n\n201\n00:09:45.740 --> 00:09:47.120\nWhich is what the exam is all about.\n\n202\n00:09:47.120 --> 00:09:48.920\nYou gotta solve those problems and\nget moving, so\n\n203\n00:09:48.920 --> 00:09:50.792\nyou can get through it in\nthe amount of time that you have.\n\n204\n00:09:50.792 --> 00:09:52.210\nAll right, well,\nI hope you guys enjoyed it.\n\n205\n00:09:52.210 --> 00:09:54.535\nStay tuned, we've got Set 4 coming up.\n\n206\n00:09:54.535 --> 00:10:00.189\n[MUSIC]\n\n",
          "vimeoId": "151825537"
        }
      ],
      "title": "Set Three"
    },
    {
      "episodes": [
        {
          "description": "In this video, Don solves troubleshooting issue #1` from set #4. The trouble ticket states that \"An error keeps appearing on the console of NYACCESS1 that needs resolving \"",
          "length": "581",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-4-1-set_4_issue_1-120215-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-4-1-set_4_issue_1-120215-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-4-1-set_4_issue_1-120215-1-sm.jpg",
          "title": "Set 4 Issue 1",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:08.510\n[MUSIC]\n\n2\n00:00:08.510 --> 00:00:12.200\nAll right it's time to kick off\nan all new troubleshooting set and\n\n3\n00:00:12.200 --> 00:00:14.559\nwe're ready to jump into Set 4 Issue 1.\n\n4\n00:00:14.559 --> 00:00:16.670\nAnd it looks like we gotta\nfun one this time around.\n\n5\n00:00:16.670 --> 00:00:18.300\nThe troubleshooting\nticket reads like this.\n\n6\n00:00:18.300 --> 00:00:24.780\nIt says, an error keeps appearing on the\nconsole of NYACCESS1 that needs resolving.\n\n7\n00:00:24.780 --> 00:00:28.110\nSo that's a pretty real\nworld example right there.\n\n8\n00:00:28.110 --> 00:00:29.200\nYou log into a router and\n\n9\n00:00:29.200 --> 00:00:31.860\nyou see that you're starting to get\nthese on-screen error messages.\n\n10\n00:00:31.860 --> 00:00:34.170\nYou gotta figure out what it means and\nresolve it.\n\n11\n00:00:34.170 --> 00:00:37.590\nSo let's just jump over and take a look at\nthat router and see what we can find, or\n\n12\n00:00:37.590 --> 00:00:40.960\nit said NY access one,\nwhich in our topology is a switch.\n\n13\n00:00:40.960 --> 00:00:43.510\nIn fact, let's review that\ntopology real quick just so\n\n14\n00:00:43.510 --> 00:00:45.560\nwe can remember what we're dealing with.\n\n15\n00:00:45.560 --> 00:00:48.920\nThe topology in set four is very\nsimilar to the previous sets,\n\n16\n00:00:48.920 --> 00:00:50.670\nit hasn't changed all that much.\n\n17\n00:00:50.670 --> 00:00:53.420\nBut there's a few little differences\nthat we need to be aware of so let's\n\n18\n00:00:53.420 --> 00:00:57.740\ntake a look at the map here on my computer\nand you'll see that we basically have that\n\n19\n00:00:57.740 --> 00:01:02.310\nsame kind of hardware layout looks like\nwe've introduced some elements up here\n\n20\n00:01:02.310 --> 00:01:07.180\nwith it looks like HSRP 100 running\nbetween these routers up top so we might\n\n21\n00:01:07.180 --> 00:01:10.890\nnot be running HSRP between these switches\ndown here anymore we'll have to see.\n\n22\n00:01:10.890 --> 00:01:14.470\nBut in our case, the troubleshooting\nticket centers around this guy right here,\n\n23\n00:01:14.470 --> 00:01:17.620\nNYACCESS1, and\nit's getting an on screen error.\n\n24\n00:01:17.620 --> 00:01:20.700\nSo let's just jump over to that one and\nsee what we've got.\n\n25\n00:01:20.700 --> 00:01:23.810\nAnd sure enough,\nwhen I pull up the console of that system,\n\n26\n00:01:23.810 --> 00:01:27.320\nI am seeing a few errors\nsitting there on my screen.\n\n27\n00:01:27.320 --> 00:01:30.030\nLet's zoom in on that and\nsee if we can't see what it's telling us.\n\n28\n00:01:30.030 --> 00:01:34.560\nIt's telling us here\nCDP-4-Native_VLAN_mismatch.\n\n29\n00:01:34.560 --> 00:01:36.640\nNative VLAN mismatch discovered on FA0-24.\n\n30\n00:01:36.640 --> 00:01:44.730\nAnd then it just says here with\nNYCORE1 FastEthernet 1/0/22.\n\n31\n00:01:44.730 --> 00:01:48.560\nAll right well that is an extremely\ndetailed error message I don't think we're\n\n32\n00:01:48.560 --> 00:01:50.400\ngonna have to do a lot of\nhunting around on this one.\n\n33\n00:01:50.400 --> 00:01:54.650\nIt's telling us our local port and\nthe remote port of this connection and\n\n34\n00:01:54.650 --> 00:01:55.640\nwhat the problem is.\n\n35\n00:01:55.640 --> 00:01:57.470\nRight here the native VLAN mismatch.\n\n36\n00:01:57.470 --> 00:01:58.220\nSo this is this is\n\n37\n00:01:58.220 --> 00:02:00.590\nprobably gonna be one of the easier\nones that we have to deal with.\n\n38\n00:02:00.590 --> 00:02:01.800\nLooking at our topology,\n\n39\n00:02:03.150 --> 00:02:08.360\nthe error that it's reporting\nis in between ACCESS1 and CORE1.\n\n40\n00:02:08.360 --> 00:02:11.900\nAnd thanks to Cisco Discovery Protocol,\nit knows the names of the devices and\n\n41\n00:02:11.900 --> 00:02:15.440\nit's telling us that and it's telling\nus the port numbers that are involved.\n\n42\n00:02:15.440 --> 00:02:19.330\nIt's port 24 here on ACCESS1 and\nport 22 up there on CORE1.\n\n43\n00:02:19.330 --> 00:02:22.630\nAnd if I've got a native VLAN mismatch,\n\n44\n00:02:22.630 --> 00:02:27.060\nall I've gotta do is take a look at this\ntrunk and figure out how they're set.\n\n45\n00:02:27.060 --> 00:02:28.440\nOne of them's right, one of them's wrong.\n\n46\n00:02:28.440 --> 00:02:30.050\nI just need to make them match and\nwe'll be in business.\n\n47\n00:02:30.050 --> 00:02:34.913\nNow, if you don't remember native VLANs,\nwhen you have an 802.1Q trunk,\n\n48\n00:02:34.913 --> 00:02:39.440\nyou have to pick one VLAN to be\nrepresented by traffic that has no tags.\n\n49\n00:02:39.440 --> 00:02:44.750\nSo, if on one side it's VLAN1 and\non the other side it's VLAN5\n\n50\n00:02:44.750 --> 00:02:48.360\nsince they're not being tagged, the system\ndoesn't know that they're different, and\n\n51\n00:02:48.360 --> 00:02:50.930\nyou'd have traffic jumping\nfrom one VLAN to another.\n\n52\n00:02:50.930 --> 00:02:52.750\nAnd so\nthat can cause all sorts of problems.\n\n53\n00:02:52.750 --> 00:02:54.180\nWe need to get it fixed.\n\n54\n00:02:54.180 --> 00:02:55.440\nCDP tests for that.\n\n55\n00:02:55.440 --> 00:02:58.830\nIf you're not running CDP it's a lot\nharder to recognize this problem.\n\n56\n00:02:58.830 --> 00:03:00.290\nWe have to work a lot harder to spot it.\n\n57\n00:03:00.290 --> 00:03:02.070\nBut a CDP tells us right away.\n\n58\n00:03:02.070 --> 00:03:03.040\nAnd we can solve it.\n\n59\n00:03:03.040 --> 00:03:06.380\nSo, I'll just start right here on\nthis switch, and see how it's set up.\n\n60\n00:03:06.380 --> 00:03:10.290\nAnd it was telling me right here,\nthe mismatch was discovered on fa0/24.\n\n61\n00:03:10.290 --> 00:03:15.570\nSo I already know the port to look at and\neverything, that really saves some time.\n\n62\n00:03:15.570 --> 00:03:18.290\nSo, let's jump in and take a look at that.\n\n63\n00:03:18.290 --> 00:03:22.970\nSo I'm gonna do a show run,\nfor interface fa0/24.\n\n64\n00:03:22.970 --> 00:03:27.260\nAnd I can see that I really don't have\nanything too special set up here, right.\n\n65\n00:03:27.260 --> 00:03:29.470\nIt says switchport trunk\nallowed vlan 16 so\n\n66\n00:03:29.470 --> 00:03:35.230\nI'm only carrying one vlan, switchport\nmode trunk so I'm trunking and that's it.\n\n67\n00:03:35.230 --> 00:03:39.710\nNow on this switch,\nis it defaulting to 802.1Q trunking or\n\n68\n00:03:39.710 --> 00:03:40.760\nis it defaulting to ISL?\n\n69\n00:03:41.780 --> 00:03:42.290\nI don't know.\n\n70\n00:03:42.290 --> 00:03:43.700\nWell actually I kinda do know.\n\n71\n00:03:43.700 --> 00:03:46.480\nISL doesn't have a native VLAN.\n\n72\n00:03:46.480 --> 00:03:49.820\nISL it encapsulates and\nit encapsulates everything.\n\n73\n00:03:49.820 --> 00:03:51.820\nSo there is no native VLAN with ISL.\n\n74\n00:03:51.820 --> 00:03:54.020\nAnd because I'm getting\na native VLAN error,\n\n75\n00:03:54.020 --> 00:03:56.040\nI know that this is\nactually running 802.1Q.\n\n76\n00:03:56.040 --> 00:03:59.640\nAnd it's set for VLAN 16 and\nit's set to trunk.\n\n77\n00:03:59.640 --> 00:04:03.800\nAnd there's no native VLAN defined here\nwhich means that it's the default.\n\n78\n00:04:03.800 --> 00:04:05.760\nAnd the default native VLAN for 802.1Q.\n\n79\n00:04:05.760 --> 00:04:06.270\nIs VLAN 1, right?\n\n80\n00:04:06.270 --> 00:04:10.580\nNow VLAN 1 is not being allowed on this\ntrunk, but that's not a big deal for\n\n81\n00:04:10.580 --> 00:04:11.970\nthe sake of this example.\n\n82\n00:04:11.970 --> 00:04:16.930\nSo I'm not too worried about that,\nbut I am sending untagged traffic for\n\n83\n00:04:16.930 --> 00:04:18.880\nVLAN 1 across this link.\n\n84\n00:04:18.880 --> 00:04:20.500\nLet's go take a look at the other side.\n\n85\n00:04:20.500 --> 00:04:24.180\nThe other side is NYCORE1 Port FA1/0/22.\n\n86\n00:04:24.180 --> 00:04:33.020\nSo I'm going to jump over to core one and\nwe'll see how it's set on that port.\n\n87\n00:04:33.020 --> 00:04:37.211\nSo I'm going to jump over into that\nport and just look at its configuration.\n\n88\n00:04:40.322 --> 00:04:45.787\nAnd here I can see switchport\ntrunk native vlan 16,\n\n89\n00:04:45.787 --> 00:04:48.720\nspanning-tree guard too.\n\n90\n00:04:48.720 --> 00:04:53.660\nAll right, now this one is not even, it's\nnot even set for switchport mode trunk.\n\n91\n00:04:53.660 --> 00:04:55.320\nRight, so is it trunking?\n\n92\n00:04:55.320 --> 00:04:55.930\nWell probably.\n\n93\n00:04:55.930 --> 00:04:58.330\nIt's probably doing dynamic negotiation,\nright.\n\n94\n00:04:58.330 --> 00:05:00.770\nSo, negotiating a trunk\nto come up that way.\n\n95\n00:05:00.770 --> 00:05:06.410\nBut when it does, If it's coming up 8\nto 2 at queue, the native VLAN is 16.\n\n96\n00:05:06.410 --> 00:05:08.840\nSo untag traffic on VLAN 16.\n\n97\n00:05:08.840 --> 00:05:13.590\nSo, that could be a problem in this case,\nif I'm sending VLAN 16 traffic with no\n\n98\n00:05:13.590 --> 00:05:18.390\ntag and it gets to the other side and\nit's gonna assume that's on VLAN 1.\n\n99\n00:05:18.390 --> 00:05:20.840\nVLAN 1 is not allowed on\nthe trunk in the other side and so\n\n100\n00:05:20.840 --> 00:05:21.720\nit's just gonna get drop.\n\n101\n00:05:21.720 --> 00:05:23.880\nThe traffic is not gonna\nmake it to the other side.\n\n102\n00:05:23.880 --> 00:05:25.970\nBut it technically makes it to the other\nside, it just gets thrown away.\n\n103\n00:05:25.970 --> 00:05:31.210\nSo if I want to verify this as trunking,\nI can do a show interface trunk, and\n\n104\n00:05:31.210 --> 00:05:37.190\nI should be able to spot in here\nthat Fa1/0/22 is trunking and\n\n105\n00:05:37.190 --> 00:05:39.100\nthat's our trouble port here.\n\n106\n00:05:39.100 --> 00:05:42.730\nSo it is trunking, it did negotiate and\nit negotiated 802.1q.\n\n107\n00:05:42.730 --> 00:05:43.300\nAll right,\n\n108\n00:05:43.300 --> 00:05:47.060\nthis is also a good command because I\ncan see who the native Vlan is up here.\n\n109\n00:05:47.060 --> 00:05:48.310\nNative Vlan is 16.\n\n110\n00:05:48.310 --> 00:05:50.080\nAll right, so\nI need to fix the problem, and\n\n111\n00:05:50.080 --> 00:05:52.720\nthere's two ways I can fix this problem,\nright?\n\n112\n00:05:52.720 --> 00:05:57.880\nOne way, I can put this one, NYCORE1,\nback to having the default native VLAN\n\n113\n00:05:57.880 --> 00:06:02.330\nof 1, or I can go to the other side and\nchange its native Vlan to 16.\n\n114\n00:06:02.330 --> 00:06:05.570\nThe important part is they just need\nto match, and so you can go either way,\n\n115\n00:06:05.570 --> 00:06:06.550\nall right?\n\n116\n00:06:06.550 --> 00:06:11.110\nNow on a modern switch there's really no\ndifference between the two solutions.\n\n117\n00:06:11.110 --> 00:06:13.470\nI could go either way on this one,\nit would get the same result,\n\n118\n00:06:13.470 --> 00:06:15.600\nit'll fix the problem, we'll be done.\n\n119\n00:06:15.600 --> 00:06:20.220\nBut on older switches the hardware on\nthe older switches wasn't as good and\n\n120\n00:06:20.220 --> 00:06:24.530\nso the act of tagging a frame before\nsending it took a little work, we had to\n\n121\n00:06:24.530 --> 00:06:29.350\nrecalculate a CRC If we had untagged\nframes, it actually moved a little faster.\n\n122\n00:06:29.350 --> 00:06:30.640\nSo a little faster.\n\n123\n00:06:30.640 --> 00:06:33.700\nStuff that we as humans wouldn't\nnotice but the switch would.\n\n124\n00:06:33.700 --> 00:06:38.840\nSo what you used to do is you would pick\nthe VLAN that carried the most traffic and\n\n125\n00:06:38.840 --> 00:06:41.390\nthat's the one you'd set\nto be the native VLAN.\n\n126\n00:06:41.390 --> 00:06:44.880\nWell, on the other side of this\ntrunk we're only allowing VLAN16.\n\n127\n00:06:45.890 --> 00:06:47.620\nAnd here you'll see it's\nallowing a lot more but\n\n128\n00:06:47.620 --> 00:06:50.000\non the other side it's\nonly allowing VLAN16.\n\n129\n00:06:50.000 --> 00:06:53.820\nAnd since it's just pushing VLAN 16 and\nthat's it,\n\n130\n00:06:53.820 --> 00:06:59.150\nwe can make that untagged and now no\ntraffic on that link would be tagged.\n\n131\n00:06:59.150 --> 00:07:01.890\nAnd that means that it would get\nbetter performance out of that link.\n\n132\n00:07:01.890 --> 00:07:05.460\nSo the better option here might be to\nleave this one with the native VLAN 16 and\n\n133\n00:07:05.460 --> 00:07:07.320\nthen go to other side and\n\n134\n00:07:07.320 --> 00:07:11.840\nbasically issue the same command,\nswitchport trunk native VLAN 16.\n\n135\n00:07:11.840 --> 00:07:13.850\nAnd then we'll be in business, right.\n\n136\n00:07:13.850 --> 00:07:15.240\nLet's go do that.\n\n137\n00:07:15.240 --> 00:07:19.870\nSo solution one would be to go into\nthis interface here on NYCORE1 and\n\n138\n00:07:19.870 --> 00:07:22.370\njust do a no,\nswitchport trunk native vlan 16.\n\n139\n00:07:22.370 --> 00:07:25.180\nAnd that would remove it and\nput it back in the default of one.\n\n140\n00:07:25.180 --> 00:07:27.130\nOr you could save switchport\ntrunk native vlan 1.\n\n141\n00:07:27.130 --> 00:07:29.040\nThat would do the same thing, all right.\n\n142\n00:07:29.040 --> 00:07:30.510\nSo that's solution one.\n\n143\n00:07:30.510 --> 00:07:33.180\nSolution two is to go to the other side.\n\n144\n00:07:33.180 --> 00:07:34.660\nGo to access one.\n\n145\n00:07:34.660 --> 00:07:36.570\nAnd just set its native VLAN to match.\n\n146\n00:07:36.570 --> 00:07:39.480\nSo make its native VLAN to be\nVLAN 16 on that interface.\n\n147\n00:07:39.480 --> 00:07:40.840\nAnd so that's what I'm gonna do.\n\n148\n00:07:41.890 --> 00:07:46.925\nI'm gonna get into fa0/24 and\n\n149\n00:07:46.925 --> 00:07:54.760\nI'll say, switchport trunk native VLAN 16.\n\n150\n00:07:54.760 --> 00:07:55.530\nAll right and\n\n151\n00:07:55.530 --> 00:08:00.300\nas soon as I issue that now I'm gonna\nsend untagged traffic across the link\n\n152\n00:08:00.300 --> 00:08:03.530\nthey're going to send untag traffic across\nthe link and their both set for VLAN 16.\n\n153\n00:08:03.530 --> 00:08:08.290\nAnd because we're running CDP,\nCDP will start exchanging information and\n\n154\n00:08:08.290 --> 00:08:10.500\nit will recognize that we're\non the right VLAN's and\n\n155\n00:08:10.500 --> 00:08:14.140\nthat error message should stop coming\nup now with any message like this\n\n156\n00:08:14.140 --> 00:08:18.500\nwe do have to pay attention to how often\nits coming up And so if I do a show log,\n\n157\n00:08:18.500 --> 00:08:22.580\nI can kinda get an idea of how far\napart those error messages are, right.\n\n158\n00:08:22.580 --> 00:08:26.770\nSo if I look at the times on these,\nit looks like it's about every.\n\n159\n00:08:26.770 --> 00:08:29.120\nIs it once a minute?\n\n160\n00:08:29.120 --> 00:08:33.890\nSo, you know, looking at this you've\ngot hours, then minutes, then seconds.\n\n161\n00:08:33.890 --> 00:08:35.800\nAnd so see how they all end in 53 seconds?\n\n162\n00:08:35.800 --> 00:08:38.370\nSo it looks like it's\nabout a minute apart.\n\n163\n00:08:38.370 --> 00:08:42.060\nSo, really to be certain\nthat this was corrected,\n\n164\n00:08:42.060 --> 00:08:44.920\nI would need to wait a full minute.\n\n165\n00:08:44.920 --> 00:08:45.820\nRight.\n60 seconds.\n\n166\n00:08:45.820 --> 00:08:48.680\nJust to make sure I don't get that\nerror message popped back up again.\n\n167\n00:08:48.680 --> 00:08:49.830\nI know it's fixed.\n\n168\n00:08:49.830 --> 00:08:54.520\nI could just move on, but it's usually\nbetter safe than sorry on this stuff.\n\n169\n00:08:54.520 --> 00:08:57.640\nAnd if we do a little show clock here,\n\n170\n00:08:57.640 --> 00:09:02.640\nI can see that I'm already at 29:58, so I\nshould have gotten another error at 29:53,\n\n171\n00:09:02.640 --> 00:09:07.640\nand I can see that I'm at 29:58,\nso I'm fine, right?\n\n172\n00:09:07.640 --> 00:09:10.530\nI'm not getting that error message,\nwe've solved the problem, and\n\n173\n00:09:10.530 --> 00:09:11.340\nwe're ready to move on.\n\n174\n00:09:11.340 --> 00:09:16.940\nSo, when a troubleshooting ticket\nthat surrounds a error on screen.\n\n175\n00:09:16.940 --> 00:09:20.350\nKind of counted as an easy one cuz the air\nis usually fairly detailed as far as\n\n176\n00:09:20.350 --> 00:09:21.960\ntelling you what the problem is.\n\n177\n00:09:21.960 --> 00:09:25.190\nSometimes they're not but in this case,\nit told us exactly what we needed.\n\n178\n00:09:25.190 --> 00:09:28.160\nWe got in, we fixed it and now we're\nready to move on to the next set.\n\n179\n00:09:28.160 --> 00:09:30.860\nSo, that wraps up this one\npretty straightforward issue.\n\n180\n00:09:30.860 --> 00:09:34.351\nStay tuned, though,\nwe've got more troubleshooting issues for\n\n181\n00:09:34.351 --> 00:09:35.297\nset 4 coming up.\n\n182\n00:09:35.297 --> 00:09:40.939\n[MUSIC]\n\n",
          "vimeoId": "151013765"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #2` from set #4. The trouble ticket states that \"PLABCSCO01 is unable to ping 192.168.16.2, and NYCORE1 is the active router for VLAN16, NYCORE2 should be the active router. \"",
          "length": "918",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-4-2-set_4_issue_2-120215-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-4-2-set_4_issue_2-120215-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-4-2-set_4_issue_2-120215-1-sm.jpg",
          "title": "Set 4 Issue 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:08.648\n[MUSIC]\n\n2\n00:00:08.648 --> 00:00:11.414\nIn this video,\nwe're gonna be taking a look at Set 4,\n\n3\n00:00:11.414 --> 00:00:14.620\nIssue 2, another troubleshooting\nproblem in our topology.\n\n4\n00:00:14.620 --> 00:00:18.120\nAnd the ticket for this one, well,\nit indicates a couple of problems for us.\n\n5\n00:00:18.120 --> 00:00:22.460\nFirst off, it's telling us that the server\nPLABCSCO01 is unable to ping 192.168.16.2,\n\n6\n00:00:22.460 --> 00:00:27.500\nso we've got some kind of\nconnectivity issue there.\n\n7\n00:00:27.500 --> 00:00:32.892\nAnd then it says also,\nNYCORE1 is the active router for\n\n8\n00:00:32.892 --> 00:00:38.020\nVLAN 16,\nwhen NYCORE2 should be the active router.\n\n9\n00:00:38.020 --> 00:00:43.040\nWell, if you remember from the previous\nset, NYCORE1 and NCORE2 are running HSRP,\n\n10\n00:00:43.040 --> 00:00:47.810\nand apparently for this particular VLAN,\nNYCORE1 is not supposed to be active.\n\n11\n00:00:47.810 --> 00:00:49.790\nBut it is, and we need to find out why.\n\n12\n00:00:49.790 --> 00:00:53.620\nSo, we've got two different\nproblems here in the same question.\n\n13\n00:00:53.620 --> 00:00:57.160\nThey're probably related, but\nwe can't make assumptions on that.\n\n14\n00:00:57.160 --> 00:00:59.580\nIt's not beyond Cisco to add more than one\n\n15\n00:00:59.580 --> 00:01:02.660\nkinda separate problem to the same\nquestion, make you do more work.\n\n16\n00:01:02.660 --> 00:01:05.270\nSo let's dive in here and\ntake a look at what we've got.\n\n17\n00:01:05.270 --> 00:01:09.820\nNow our server that's complaining\nis this guy down here, PLABCSCO01.\n\n18\n00:01:09.820 --> 00:01:14.531\nAnd we know from the previous\nones that it's 192.168.16.10.\n\n19\n00:01:14.531 --> 00:01:20.180\nAnd they're telling me that\nit can't ping 192.168.16.2.\n\n20\n00:01:20.180 --> 00:01:27.273\nWell, again, if we remember from\nprevious sets, NYCORE1 is 192.168.16.2.\n\n21\n00:01:27.273 --> 00:01:31.001\nNYCORE2 is 192.168.16.3.\n\n22\n00:01:31.001 --> 00:01:33.079\nSo, you've got .2 and .3 right here.\n\n23\n00:01:33.079 --> 00:01:35.945\nThey've got a port channel between them,\nand\n\n24\n00:01:35.945 --> 00:01:40.439\nthey're running HSRP with\na virtual IP of 192.168.16.1.\n\n25\n00:01:40.439 --> 00:01:45.090\nNow in the troubleshooting ticket, it told\nme that this server could not ping .2,\n\n26\n00:01:45.090 --> 00:01:47.960\nwhich means it can't ping this switch.\n\n27\n00:01:47.960 --> 00:01:53.960\nIt also told me that NYCORE1 was\nactive for HSRP when it shouldn't be.\n\n28\n00:01:53.960 --> 00:01:57.620\nSo at first, I might think, well if I\ncan't ping it, maybe that switch is down.\n\n29\n00:01:57.620 --> 00:02:00.320\nMaybe it's offline, but if it's gone\nactive, that means the switch is up and\n\n30\n00:02:00.320 --> 00:02:02.530\nrunning, and for some reason,\nI'm not getting there.\n\n31\n00:02:02.530 --> 00:02:05.360\nNow the challenge here is I've\ngot two ways to get there.\n\n32\n00:02:05.360 --> 00:02:08.740\nMy workstation is gonna go to ACCESS1,\nand from here,\n\n33\n00:02:08.740 --> 00:02:10.730\nI could go straight up to CORE1.\n\n34\n00:02:10.730 --> 00:02:13.370\nOr I could go over this way through CORE2.\n\n35\n00:02:13.370 --> 00:02:15.610\nTwo different ways to get\nto the same destination.\n\n36\n00:02:15.610 --> 00:02:19.910\nBut either way, I should be able\nto get there and maybe I'm not.\n\n37\n00:02:19.910 --> 00:02:23.820\nNow, I don't know which way I'm going on\nmy journey over to that other system.\n\n38\n00:02:23.820 --> 00:02:25.090\nSo I need to take a look at that.\n\n39\n00:02:25.090 --> 00:02:27.510\nAnd I know that spanning tree\nis running in this environment,\n\n40\n00:02:27.510 --> 00:02:28.710\ncuz I've got a loop here, right?\n\n41\n00:02:28.710 --> 00:02:29.840\nI assume it is.\n\n42\n00:02:29.840 --> 00:02:33.070\nIt's possible these links are in different\nVLANs, so we might not have a loop at all.\n\n43\n00:02:33.070 --> 00:02:36.660\nBut I need to get a handle on that\ntopology before I can really jump in and\n\n44\n00:02:36.660 --> 00:02:37.522\nfigure out what's going on, all right.\n\n45\n00:02:38.628 --> 00:02:42.460\nI also wanna take a look at NYCORE1 and\njust kind of see what it's seeing.\n\n46\n00:02:42.460 --> 00:02:45.850\nThey're telling me that NYCORE1\nhas gone active for the VLAN, and\n\n47\n00:02:45.850 --> 00:02:47.550\nit shouldn't be active.\n\n48\n00:02:47.550 --> 00:02:50.630\nSo if it went active, that means that for\n\n49\n00:02:50.630 --> 00:02:53.490\nsome reason it's no\nlonger able to see CORE2.\n\n50\n00:02:53.490 --> 00:02:56.740\nNow, that makes me think the problem\nis here on the port channel.\n\n51\n00:02:56.740 --> 00:02:59.120\nWe should be able to see CORE2\nright on the port channel.\n\n52\n00:02:59.120 --> 00:03:02.910\nAnd if spanning tree is available,\nit's gonna be shutting down interfaces.\n\n53\n00:03:02.910 --> 00:03:06.164\nBut it'll shut down lower bandwidth\nlinks before it'll shut down higher\n\n54\n00:03:06.164 --> 00:03:07.010\nbandwidth links.\n\n55\n00:03:07.010 --> 00:03:09.760\nSo I expect this link to be up,\nwhich means CORE1 and\n\n56\n00:03:09.760 --> 00:03:12.050\nCORE2 should be directly connected,\nall right?\n\n57\n00:03:12.050 --> 00:03:17.230\nAnd if they are, CORE2 should be active\nfor HSRP and CORE1 should be standby.\n\n58\n00:03:17.230 --> 00:03:20.690\nSo that's making me think our\nproblem is right here on the link.\n\n59\n00:03:20.690 --> 00:03:22.950\nAnd that's an important skill when\nyou're troubleshooting in the exam,\n\n60\n00:03:22.950 --> 00:03:25.880\nis you've gotta kind of formulate\nwhere you think the problem is so\n\n61\n00:03:25.880 --> 00:03:28.730\nyou don't waste time\nlooking at other devices.\n\n62\n00:03:28.730 --> 00:03:31.550\nSo I'm gonna start from CORE1 and\njust look at its kind of point of view,\n\n63\n00:03:31.550 --> 00:03:34.490\nand then we'll start to look at the other\nswitches and figure out things from there.\n\n64\n00:03:34.490 --> 00:03:35.996\nSo if I jump over to CORE1,\n\n65\n00:03:35.996 --> 00:03:40.326\nthe first thing I wanna do is I wanna\nverify that they're telling me the truth.\n\n66\n00:03:40.326 --> 00:03:44.968\nI wanna make sure that it is\nactually active for VLAN 16.\n\n67\n00:03:44.968 --> 00:03:48.728\nSo I'm gonna do a show standby for\n\n68\n00:03:48.728 --> 00:03:52.632\nVLAN 16 and I see that it's not.\n\n69\n00:03:52.632 --> 00:03:54.300\nIts state is Init.\n\n70\n00:03:54.300 --> 00:03:56.050\nIt says interface down.\n\n71\n00:03:56.050 --> 00:03:57.790\nIt's not active for VLAN 16 at all.\n\n72\n00:03:57.790 --> 00:03:58.930\nBut in the troubleshooting question,\n\n73\n00:03:58.930 --> 00:04:02.638\nit said, NYCORE1 is the active router for\nVLAN 16.\n\n74\n00:04:04.340 --> 00:04:05.130\nIt's not, right?\n\n75\n00:04:05.130 --> 00:04:08.240\nI've got that it's in an Init state,\ninterface down.\n\n76\n00:04:08.240 --> 00:04:11.050\nSo, I've got something that's a little\nbit different than what they're\n\n77\n00:04:11.050 --> 00:04:11.620\nwarning me about.\n\n78\n00:04:11.620 --> 00:04:14.700\nAnd they're saying NYCORE2\nshould be the active router.\n\n79\n00:04:14.700 --> 00:04:16.330\nAnd in theory, this should be the standby.\n\n80\n00:04:16.330 --> 00:04:19.240\nWell, this guy isn't active or\nstandby, it's not seeing anybody.\n\n81\n00:04:19.240 --> 00:04:20.190\nThere's no active router.\n\n82\n00:04:20.190 --> 00:04:21.135\nThere's no standby router.\n\n83\n00:04:21.135 --> 00:04:22.890\nAnd that's really, really weird.\n\n84\n00:04:24.850 --> 00:04:29.280\nIf I don't see an active or\na standby, shouldn't I become active?\n\n85\n00:04:29.280 --> 00:04:31.170\nI should, but I'm not.\n\n86\n00:04:31.170 --> 00:04:34.240\nWell what's a scenario that would cause\n\n87\n00:04:34.240 --> 00:04:38.770\nHSRP on this guy to not come up even\nthough I can't see an active or standby?\n\n88\n00:04:38.770 --> 00:04:42.235\nWell, if my interface is down,\nwhich is what it's telling me,\n\n89\n00:04:42.235 --> 00:04:46.100\nand this is for VLAN 16, I may not\nhave a valid interface on VLAN 16.\n\n90\n00:04:47.160 --> 00:04:50.710\nThat's pretty unlikely, but\nit's certainly possible.\n\n91\n00:04:50.710 --> 00:04:53.090\nSo let's go in and\nsee if we can figure that out.\n\n92\n00:04:53.090 --> 00:04:56.250\nWhy don't I have an interface\nthat's active for VLAN 16?\n\n93\n00:04:56.250 --> 00:05:00.118\nIf I do a show vlan, I can look and\nsee if I can spot VLAN 16.\n\n94\n00:05:02.620 --> 00:05:06.538\nThere it is, and it shows as active,\nbut it's got no ports assigned.\n\n95\n00:05:06.538 --> 00:05:09.498\nBut that's not the end of\nthe journey here, right?\n\n96\n00:05:09.498 --> 00:05:10.799\nWe could still have a trunk.\n\n97\n00:05:10.799 --> 00:05:13.178\nSo I'll do a show interface trunk.\n\n98\n00:05:13.178 --> 00:05:18.395\nAnd when I look at my trunks,\nI've got Fa1/0/22, with VLANs 1 and\n\n99\n00:05:18.395 --> 00:05:23.459\n10 through 16 allowed and\nactive in the management domain, okay.\n\n100\n00:05:24.490 --> 00:05:28.393\nSo, VLAN 16 should be active\nright there on port 22.\n\n101\n00:05:28.393 --> 00:05:30.470\nThe VLAN interface should be up.\n\n102\n00:05:30.470 --> 00:05:31.660\nLet's see if it is.\n\n103\n00:05:31.660 --> 00:05:33.480\nI'll do a show IP interface brief.\n\n104\n00:05:33.480 --> 00:05:37.887\nAnd I'm just gonna exclude any\ninterface that doesn't have an IP, and\n\n105\n00:05:37.887 --> 00:05:42.710\nI'll find VLAN 16 right there and\nVLAN 16 is showing as up down.\n\n106\n00:05:42.710 --> 00:05:48.240\nNow, that's kinda odd that it would show\nas up down when I just looked up here,\n\n107\n00:05:48.240 --> 00:05:52.115\nand I saw where it says I'm\ncarrying VLANs over that interface.\n\n108\n00:05:52.115 --> 00:05:53.105\nWell, did I, oh, you know what?\n\n109\n00:05:53.105 --> 00:05:56.230\nActually I think I, nope, all right.\n\n110\n00:05:56.230 --> 00:05:58.240\nSorry, I thought I had screwed\nup my interface numbers.\n\n111\n00:05:58.240 --> 00:06:05.150\nNow if we look up here, I've got VLAN1 and\n10 through 16 as allowed and active.\n\n112\n00:06:05.150 --> 00:06:08.910\nBut on the very next line, VLANs in\nspanning tree forwarding state and\n\n113\n00:06:08.910 --> 00:06:10.560\nnot pruned.\n\n114\n00:06:10.560 --> 00:06:13.425\nNotice that I've only got 1 and\n10 through 15.\n\n115\n00:06:13.425 --> 00:06:16.290\n16 is actually being\npruned off of that trunk.\n\n116\n00:06:16.290 --> 00:06:18.300\nSo while it was allowed and active,\n\n117\n00:06:18.300 --> 00:06:22.128\nit's not actually active because\nspanning tree is pruning it off.\n\n118\n00:06:22.128 --> 00:06:27.978\nAnd so we can verify that with\na show spanning-tree vlan 16.\n\n119\n00:06:27.978 --> 00:06:31.932\nAnd when I look at it,\nthere it is, port 22.\n\n120\n00:06:31.932 --> 00:06:34.050\nIt's a designated port and it's blocking.\n\n121\n00:06:34.050 --> 00:06:37.727\nAnd how many other ports\ndo I have in VLAN 16?\n\n122\n00:06:37.727 --> 00:06:38.460\nNone.\n\n123\n00:06:38.460 --> 00:06:40.890\nI don't have any other ports\nthat this one's blocking.\n\n124\n00:06:40.890 --> 00:06:42.060\nWhy is it blocking?\n\n125\n00:06:42.060 --> 00:06:43.050\nThat's odd.\n\n126\n00:06:43.050 --> 00:06:47.410\nWell if you look at it, it'll actually\ntell us why it's blocking right over here.\n\n127\n00:06:47.410 --> 00:06:49.820\nROOT inconsistent.\n\n128\n00:06:49.820 --> 00:06:50.540\nI've got a problem.\n\n129\n00:06:53.150 --> 00:06:57.280\nRoute inconsistent, that's root guard,\nright, so I've got root guard configured\n\n130\n00:06:57.280 --> 00:07:01.810\non this interface and the switch on\nthe other side has tried to go as root.\n\n131\n00:07:01.810 --> 00:07:04.620\nAnd I blocked it, and so\nthat's stopping that link from coming up.\n\n132\n00:07:04.620 --> 00:07:05.700\nSo, that's a problem.\n\n133\n00:07:05.700 --> 00:07:07.150\nThat's stopping this link from coming up.\n\n134\n00:07:07.150 --> 00:07:10.560\nBut there's another problem that I'm not\nseeing here, which is, remember in my\n\n135\n00:07:10.560 --> 00:07:16.800\ntopology, I've got this link between\nCORE1 and CORE2 on this port channel.\n\n136\n00:07:16.800 --> 00:07:19.020\nI'm not seeing that port\nchannel in any of this stuff.\n\n137\n00:07:19.020 --> 00:07:22.958\nI'm not seeing it in my list of trunks,\nI'm not seeing it in spanning tree for\n\n138\n00:07:22.958 --> 00:07:25.360\nVLAN 16, it's not showing up.\n\n139\n00:07:25.360 --> 00:07:28.720\nThis port channel, if it's there,\nit must not be configured as a trunk.\n\n140\n00:07:29.840 --> 00:07:31.870\nWhich means that it would be\nconfigured as an access port.\n\n141\n00:07:31.870 --> 00:07:35.180\nAnd if it's an access port,\nit's on some VLAN other than VLAN 16.\n\n142\n00:07:35.180 --> 00:07:40.020\nSo if I'm blocking this port for\nVLAN 16 because of a loop, and\n\n143\n00:07:40.020 --> 00:07:44.810\nI'm not allowing VLAN 16 to pass over this\nlink, then I'm losing sight of that VLAN.\n\n144\n00:07:44.810 --> 00:07:49.576\nAnd if I lose site of that VLAN,\nI've got no other interfaces in VLAN 16.\n\n145\n00:07:49.576 --> 00:07:52.470\nHSRP is not gonna to see an active or\na standby, but\n\n146\n00:07:52.470 --> 00:07:55.770\nit's not gonna go active itself because\nbecause no interface is functionable.\n\n147\n00:07:55.770 --> 00:07:56.340\nAll right.\n\n148\n00:07:56.340 --> 00:08:00.410\nSo I've got a couple of problems here and\nI can fix it a few different ways.\n\n149\n00:08:00.410 --> 00:08:03.610\nFirst off, root guard is what's\nholding this interface down.\n\n150\n00:08:03.610 --> 00:08:08.320\nSo if I go in and\nturn root guard off, or I stop this\n\n151\n00:08:08.320 --> 00:08:12.080\nswitch down here from trying to become\nroot, then that would solve that problem.\n\n152\n00:08:12.080 --> 00:08:15.030\nIt would bring this link up, and\nassuming that that traffic can\n\n153\n00:08:15.030 --> 00:08:17.740\npass over to the other switch,\nthen I should be in good shape, right?\n\n154\n00:08:17.740 --> 00:08:20.520\nIt's a couple of assumptions there,\nbut that's one solution.\n\n155\n00:08:20.520 --> 00:08:23.160\nThe other solution is I could\nget this port channel up and\n\n156\n00:08:23.160 --> 00:08:25.280\ntrunking like it's probably supposed to.\n\n157\n00:08:25.280 --> 00:08:26.400\nI say probably.\n\n158\n00:08:26.400 --> 00:08:30.650\nWhy would I have NYCORE1 go to\nNYCORE2 through this access switch,\n\n159\n00:08:30.650 --> 00:08:32.533\nwhen I've got a direct\nport channel between them?\n\n160\n00:08:32.533 --> 00:08:36.280\nRight, so, while I could fix it\nby fixing this link down here,\n\n161\n00:08:36.280 --> 00:08:39.230\nI think the better solution\nis to fix it across the top.\n\n162\n00:08:39.230 --> 00:08:41.250\nAt the end of the day, it doesn't\nreally matter which one I choose.\n\n163\n00:08:41.250 --> 00:08:43.660\nI just need to get it fixed for the exam.\n\n164\n00:08:43.660 --> 00:08:45.800\nBut in real life land,\nwe wanna choose the best solution.\n\n165\n00:08:45.800 --> 00:08:48.520\nAnd here the best solution is gonna\nbe to get this port channel trunking.\n\n166\n00:08:48.520 --> 00:08:52.060\nLet's take a look at its configuration and\nsee what it's set up for right now.\n\n167\n00:08:52.060 --> 00:08:56.280\nSo I'm gonna do a show run for\ninterface po1.\n\n168\n00:08:56.280 --> 00:09:00.190\nThat's our port channel,\nand incomplete command,\n\n169\n00:09:00.190 --> 00:09:02.030\nthat's a little different, isn't it.\n\n170\n00:09:02.030 --> 00:09:04.720\nSo, why is it doing that?\n\n171\n00:09:04.720 --> 00:09:08.280\nSo, if I do a show running-config for\n\n172\n00:09:08.280 --> 00:09:13.860\ninterface port-channel 1,\ndoesn't seem to like that.\n\n173\n00:09:13.860 --> 00:09:15.990\nSo let me see if I've\neven got a port channel.\n\n174\n00:09:15.990 --> 00:09:19.120\nSo I'm assuming the document is\ngiving me accurate information here.\n\n175\n00:09:19.120 --> 00:09:21.460\nI'm going to do a show\netherChannel summary and\n\n176\n00:09:21.460 --> 00:09:25.530\nsee if I even have a port channel,\nand I don't.\n\n177\n00:09:25.530 --> 00:09:27.350\nWell, that's pretty interesting.\n\n178\n00:09:27.350 --> 00:09:30.456\nIt's kind of in the documentation that I\nhave a port channel between these guys,\n\n179\n00:09:30.456 --> 00:09:31.790\nand if I look at it here, I don't.\n\n180\n00:09:31.790 --> 00:09:33.990\nLet's look at the configuration\non those ports.\n\n181\n00:09:33.990 --> 00:09:38.941\nIf I look at fa1/0/23 and 24,\nokay, these two are supposed to be\n\n182\n00:09:38.941 --> 00:09:43.910\nin a port channel between the switches\naccording to the documentation.\n\n183\n00:09:43.910 --> 00:09:46.428\nAnd when I look at it, they're not, right?\n\n184\n00:09:46.428 --> 00:09:48.631\nThey're here, I've got the interface.\n\n185\n00:09:48.631 --> 00:09:51.660\nIn fact,\nport 24 is configured to be a trunk.\n\n186\n00:09:51.660 --> 00:09:55.990\nIt's configured for encapsulation dot1q,\nallowing VLANs 10 though 16.\n\n187\n00:09:55.990 --> 00:09:59.780\nIt's set up as an access port.\n\n188\n00:09:59.780 --> 00:10:01.510\nSo all that trunk stuff doesn't matter.\n\n189\n00:10:01.510 --> 00:10:02.990\nIt's set up as an access port.\n\n190\n00:10:02.990 --> 00:10:06.460\nAnd looking at the other one,\nthe other one is set up as a layer 3 port.\n\n191\n00:10:06.460 --> 00:10:08.750\nIt's not even a switch port anymore.\n\n192\n00:10:08.750 --> 00:10:12.160\nAnd so, it's not participating in\nspanning tree and all those other things.\n\n193\n00:10:12.160 --> 00:10:14.140\nIt's its own kind of separate entity.\n\n194\n00:10:14.140 --> 00:10:17.750\nSo I've really got some crazy\nstuff going on here on this link.\n\n195\n00:10:17.750 --> 00:10:20.520\nIt's definitely not what I expected\nto see from the documentation.\n\n196\n00:10:20.520 --> 00:10:22.850\nLet's look at CORE2 and\nsee if it's all screwed up like this too.\n\n197\n00:10:24.740 --> 00:10:26.221\nSo if I jump over to CORE2.\n\n198\n00:10:28.101 --> 00:10:33.200\nOn this one,\nI want to do a show etherchannel summary.\n\n199\n00:10:33.200 --> 00:10:36.170\nLet's just see if it's got\nany port channels defined.\n\n200\n00:10:36.170 --> 00:10:37.720\nIt doesn't look like it does.\n\n201\n00:10:37.720 --> 00:10:41.600\nAnd I'll take a look at its ports.\n\n202\n00:10:41.600 --> 00:10:44.270\nAnd I can see that it's got\na layer three port also, and\n\n203\n00:10:44.270 --> 00:10:46.580\nit's got port 24 configured as a trunk.\n\n204\n00:10:46.580 --> 00:10:50.040\nSo it looks like they're using port 23 for\nsomething else.\n\n205\n00:10:50.040 --> 00:10:51.540\nThe port channel's not here.\n\n206\n00:10:51.540 --> 00:10:53.480\nPort 24 is configured as a trunk.\n\n207\n00:10:53.480 --> 00:10:56.090\nIt is carrying VLANs 10 through 16.\n\n208\n00:10:56.090 --> 00:11:01.840\nBut it's set to be a trunk, and it's\nset to be able to do that all the time.\n\n209\n00:11:01.840 --> 00:11:02.940\nSee this nonegotiate?\n\n210\n00:11:02.940 --> 00:11:04.450\nSo it won't even come\nup as an access port.\n\n211\n00:11:04.450 --> 00:11:05.960\nIt's either trunk or nothing.\n\n212\n00:11:05.960 --> 00:11:07.410\nSo that's what's stopping\nme from trunking.\n\n213\n00:11:07.410 --> 00:11:10.790\nNow, I don't know because they didn't\nsay in the question whether or\n\n214\n00:11:10.790 --> 00:11:12.980\nnot I need to fix that port channel or\nnot.\n\n215\n00:11:12.980 --> 00:11:14.710\nBut at a minimum,\n\n216\n00:11:14.710 --> 00:11:18.640\nport 24 should be trunking between\nthese guys to carry the extra VLANs.\n\n217\n00:11:18.640 --> 00:11:20.710\nAnd that'll more than\nlikely solve our problem.\n\n218\n00:11:20.710 --> 00:11:22.250\nSo let's see if that'll\ntake care of it for us.\n\n219\n00:11:22.250 --> 00:11:24.830\nWe'll jump over to CORE1, and\nwe'll get that squared away.\n\n220\n00:11:24.830 --> 00:11:26.872\nSo I'm gonna jump into CORE1.\n\n221\n00:11:26.872 --> 00:11:31.924\nAnd what I'm gonna do is I'm just\ngonna jump into interface fa1/0/24,\n\n222\n00:11:31.924 --> 00:11:34.870\nand I shouldn't have to change much here.\n\n223\n00:11:34.870 --> 00:11:38.658\nIt's got switchport mode access, so\nI'm just gonna say switchport mode trunk.\n\n224\n00:11:38.658 --> 00:11:40.330\nSo that it flips over for that.\n\n225\n00:11:40.330 --> 00:11:44.387\nIt's already set for dot1q,\nit's already allowing VLANS 10 through 16.\n\n226\n00:11:44.387 --> 00:11:45.530\nThat should kick over.\n\n227\n00:11:45.530 --> 00:11:48.357\nAnd just to be sure,\nI'm gonna do a shutdown and\n\n228\n00:11:48.357 --> 00:11:51.680\nlet that sit for a second and\nthen do a no shutdown.\n\n229\n00:11:51.680 --> 00:11:53.470\nLooks like I've got console\nlogging turned off, so\n\n230\n00:11:53.470 --> 00:11:55.170\nI'm not getting any pop ups on that.\n\n231\n00:11:55.170 --> 00:11:56.339\nBut that's gonna make this one trunk.\n\n232\n00:11:57.600 --> 00:12:00.360\nAnd so now,\nwhen I do a show interface trunk,\n\n233\n00:12:01.370 --> 00:12:03.710\nI can see that additional port in there.\n\n234\n00:12:03.710 --> 00:12:07.130\nAnd down here, VLANs in spanning tree\nforwarding state and not pruned says none,\n\n235\n00:12:07.130 --> 00:12:08.100\nwhich is bad.\n\n236\n00:12:08.100 --> 00:12:10.940\nBut that's because spanning tree is\nmore than likely doing the listening and\n\n237\n00:12:10.940 --> 00:12:11.530\nthe learning.\n\n238\n00:12:11.530 --> 00:12:16.264\nAnd so, if I do show spanning-tree for\nVLAN 16, I expect to see listening and\n\n239\n00:12:16.264 --> 00:12:16.980\nlearning.\n\n240\n00:12:16.980 --> 00:12:18.580\nIt only does that for 30 seconds.\n\n241\n00:12:18.580 --> 00:12:20.000\nThere it is, it's learning.\n\n242\n00:12:20.000 --> 00:12:24.640\nAnd so 15 seconds listening, 15 seconds\nlearning, and as soon as that's done,\n\n243\n00:12:24.640 --> 00:12:27.420\none of them will hopefully\ngo to forwarding.\n\n244\n00:12:27.420 --> 00:12:29.573\nThe other one might go to\nblocking if there's a loop.\n\n245\n00:12:29.573 --> 00:12:30.584\nAnd there we go.\n\n246\n00:12:30.584 --> 00:12:33.271\nI can see port 24 just went to forwarding.\n\n247\n00:12:33.271 --> 00:12:36.740\nAnd so if I do a show interface trunk,\nthere we go.\n\n248\n00:12:36.740 --> 00:12:41.390\nNow I can see port 24 is carrying all\nthose VLANs not being pruned, all right?\n\n249\n00:12:41.390 --> 00:12:44.530\nAnd notice that port 22 is\nnot pruning VLAN 16 any more.\n\n250\n00:12:44.530 --> 00:12:46.230\nIt's probably still in the learning phase.\n\n251\n00:12:46.230 --> 00:12:49.590\nIt'll probably start pruning it again here\nin just a moment if we give it some time.\n\n252\n00:12:49.590 --> 00:12:54.060\nBut in the meantime,\nif I do a show ip interface brief again,\n\n253\n00:12:55.330 --> 00:12:59.570\nI should see that the interface for\nVLAN 16 is now up up, which it is.\n\n254\n00:13:01.140 --> 00:13:05.582\nAnd given enough time,\nwe'll probably see HSRP react to that.\n\n255\n00:13:05.582 --> 00:13:09.200\nAnd so I'll do a quick show standby on it.\n\n256\n00:13:09.200 --> 00:13:13.690\nAnd I can see that I've gone into standby\nmode, which is what I'm supposed to be.\n\n257\n00:13:13.690 --> 00:13:16.240\nAnd NYCORE2 is supposed to be active.\n\n258\n00:13:16.240 --> 00:13:20.625\nAnd so down here,\nI can see active router is 192.168.16.3,\n\n259\n00:13:20.625 --> 00:13:25.310\nwhich is NYCORE2, so\nthat just fixed our HSRP problem, right?\n\n260\n00:13:25.310 --> 00:13:26.020\nBut we're not done.\n\n261\n00:13:26.020 --> 00:13:28.090\nRemember, this question\nwas made up of two pieces.\n\n262\n00:13:28.090 --> 00:13:32.340\nThe original problem was that\nPLABCSCO01 could not ping us.\n\n263\n00:13:32.340 --> 00:13:36.500\nWhich makes sense cuz there was no way for\nVLAN 16 to get to this switch until now.\n\n264\n00:13:36.500 --> 00:13:38.920\nSo we probably fixed that\nproblem at the same time.\n\n265\n00:13:38.920 --> 00:13:43.030\nSo let's jump over to our server and\nsee if that is truly fixed.\n\n266\n00:13:43.030 --> 00:13:44.810\nI'm gonna fire up the old\ncommand prompt here.\n\n267\n00:13:46.820 --> 00:13:53.260\nAnd we'll just do a quick\nping to 192.168.16.2.\n\n268\n00:13:53.260 --> 00:13:53.760\nAnd there we go.\n\n269\n00:13:53.760 --> 00:13:58.120\nAll right, now like I said, there was\nmore than one way to solve this problem.\n\n270\n00:13:58.120 --> 00:14:01.840\nThe other solutions kind of\ncenter around different things.\n\n271\n00:14:01.840 --> 00:14:07.130\nFor example,\nI could have fixed VLAN 16 on this trunk,\n\n272\n00:14:07.130 --> 00:14:09.690\nand checked to make sure that\nit was working on this trunk.\n\n273\n00:14:09.690 --> 00:14:13.070\nAnd then CORE1 would have\nseen CORE through ACCESS1.\n\n274\n00:14:13.070 --> 00:14:16.720\nBut it's pretty obvious in a network like\nthis that's not the intended behavior.\n\n275\n00:14:16.720 --> 00:14:18.890\nSo it came down to fixing\nthis link up here.\n\n276\n00:14:18.890 --> 00:14:21.028\nWe fixed port 24 to make it trunk.\n\n277\n00:14:21.028 --> 00:14:26.400\nWe could have also gone in and reset\nport 23, made it a switch port again,\n\n278\n00:14:26.400 --> 00:14:29.130\ncreated a port channel, and\ngone through all that extra work.\n\n279\n00:14:29.130 --> 00:14:31.620\nBut at the end of the day, the question\ndidn't really ask us for that.\n\n280\n00:14:31.620 --> 00:14:35.474\nIt just wanted us to make sure\nthat CSCO1 could ping CORE1,\n\n281\n00:14:35.474 --> 00:14:40.810\nwhich we did, and to make sure that\nCORE1 was standby and CORE2 was active.\n\n282\n00:14:40.810 --> 00:14:41.520\nOur solution did it.\n\n283\n00:14:41.520 --> 00:14:43.570\nAnd technically, we did it in one command.\n\n284\n00:14:43.570 --> 00:14:47.820\nWe went into port 24 on CORE1 and\nsaid switchport mode trunk.\n\n285\n00:14:47.820 --> 00:14:50.290\nAnd that was what took care of it,\ngot VLAN 16 up, and\n\n286\n00:14:50.290 --> 00:14:52.270\ngot us working with the least\nadministrative effort.\n\n287\n00:14:52.270 --> 00:14:55.440\nSo that's a good solution right there and\nthat solves this problem.\n\n288\n00:14:55.440 --> 00:14:57.760\nAll right, well,\nthat wraps it up for this one.\n\n289\n00:14:57.760 --> 00:14:59.790\nTurned out to be just\na trunking issue in our case,\n\n290\n00:14:59.790 --> 00:15:02.380\nbut one with a lot of possible\nalternative solutions.\n\n291\n00:15:02.380 --> 00:15:04.070\nSo always be on the look out for those.\n\n292\n00:15:04.070 --> 00:15:04.990\nBut that'll wrap this one up.\n\n293\n00:15:04.990 --> 00:15:06.140\nHope you guys enjoyed it.\n\n294\n00:15:06.140 --> 00:15:09.465\nStay tuned,\nwe've got more troubleshooting coming up.\n\n295\n00:15:09.465 --> 00:15:16.099\n[MUSIC]\n\n",
          "vimeoId": "151013761"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #3` from set #4. The trouble ticket states that \"An interface on NYCORE2 is showing an err-disable state, this needs to be resolved \"",
          "length": "769",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-4-3-set_4_issue_3-120215-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-4-3-set_4_issue_3-120215-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-4-3-set_4_issue_3-120215-1-sm.jpg",
          "title": "Set 4 Issue 3",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:04.991\n[SOUND].\nSo now we're going to move on to Set 4\n\n2\n00:00:04.991 --> 00:00:11.045\nIssue 3,\nthe next troubleshooting problem for\n\n3\n00:00:11.045 --> 00:00:14.190\nthis particular set.\n\n4\n00:00:14.190 --> 00:00:17.300\nAnd on this one we've got another\nerror that we need to resolve.\n\n5\n00:00:17.300 --> 00:00:19.070\nSo it's going to be localized\nto a single switch.\n\n6\n00:00:19.070 --> 00:00:21.120\nThese are always nice questions,\ncuz you don't have to hunt around for\n\n7\n00:00:21.120 --> 00:00:22.170\nwhere the problem is.\n\n8\n00:00:22.170 --> 00:00:26.070\nSo this one says on\nan interface on NYCORE2,\n\n9\n00:00:26.070 --> 00:00:28.540\nwe're showing the error disabled state.\n\n10\n00:00:28.540 --> 00:00:30.260\nThis needs to be resolved.\n\n11\n00:00:30.260 --> 00:00:32.110\nThey don't give us a ton of details here,\n\n12\n00:00:32.110 --> 00:00:36.250\njust there is a port,\nsome port, on NYCORE2.\n\n13\n00:00:36.250 --> 00:00:39.600\nIt's error disabled,\nwe need to find out why and fix it.\n\n14\n00:00:39.600 --> 00:00:42.450\nAnd there's a lot of different things\nthat can cause a port to go into\n\n15\n00:00:42.450 --> 00:00:43.052\nerror disabled.\n\n16\n00:00:43.052 --> 00:00:48.800\nThings like root guard, BPDU guard,\n\n17\n00:00:48.800 --> 00:00:53.630\nport security,\nUDLD can even do it in some scenarios.\n\n18\n00:00:54.840 --> 00:00:55.710\nPort mirroring, or\n\n19\n00:00:55.710 --> 00:00:58.250\nSPAN that's misconfigured can\ncause a port to go error disabled.\n\n20\n00:00:58.250 --> 00:01:00.120\nThere's a lot of stuff\nthat can cause that.\n\n21\n00:01:00.120 --> 00:01:02.270\nWe need to find out what it is and fix it.\n\n22\n00:01:02.270 --> 00:01:05.710\nSo let's jump on over to NYCORE2 and\nsee if we can't figure that out.\n\n23\n00:01:05.710 --> 00:01:08.251\nWe don't even need to mess with our\ntopology on this one cuz it's all\n\n24\n00:01:08.251 --> 00:01:09.240\nlocalized to one switch.\n\n25\n00:01:09.240 --> 00:01:14.070\nThis guy right here, which we've already\nworked on in some previous sets.\n\n26\n00:01:14.070 --> 00:01:17.060\nSo if we jump in here, the first\nthing we need to do is figure out\n\n27\n00:01:17.060 --> 00:01:18.790\nwhat port they're talking about, right?\n\n28\n00:01:18.790 --> 00:01:23.470\nAnd there's a few different ways you\ncan spot the port that's kinda damaged.\n\n29\n00:01:23.470 --> 00:01:26.820\nIf you do a show ip interface brief,\nyou don't always see it, right?\n\n30\n00:01:26.820 --> 00:01:29.190\nSo when you do a show ip interface brief,\nyou can run down and\n\n31\n00:01:29.190 --> 00:01:31.620\nyou can see ports that are up,\nports that are down.\n\n32\n00:01:31.620 --> 00:01:33.270\nAnd as you scroll through,\n\n33\n00:01:33.270 --> 00:01:36.840\nit doesn't really say whether\none's error disabled or not.\n\n34\n00:01:36.840 --> 00:01:39.790\nAnd if most of the ports are down,\nit's really easy to overlook that and\n\n35\n00:01:39.790 --> 00:01:41.830\njust not even be able to see it.\n\n36\n00:01:41.830 --> 00:01:46.130\nSo if we wanna try and figure out\nwhich it is that is err-disabled,\n\n37\n00:01:46.130 --> 00:01:49.080\nwell, show interface is one\nof the best ways to do it,\n\n38\n00:01:49.080 --> 00:01:51.380\nbecause it'll be in the interface output.\n\n39\n00:01:51.380 --> 00:01:57.830\nThe problem is you get a lot of\ninformation when you run show interface.\n\n40\n00:01:57.830 --> 00:02:01.290\nAnd so what I like to do is\na quick show interface, and\n\n41\n00:02:01.290 --> 00:02:03.280\nfilter that to include a few lines.\n\n42\n00:02:03.280 --> 00:02:06.110\nI like to include lines\nwith line protocol,\n\n43\n00:02:06.110 --> 00:02:08.360\ncuz that's where it gives me\nthe name of the interface.\n\n44\n00:02:08.360 --> 00:02:11.155\nAnd then I'm gonna look for disabled.\n\n45\n00:02:11.155 --> 00:02:15.750\nAnd that's gonna help me to jump through\nand spot which one is err-disabled.\n\n46\n00:02:15.750 --> 00:02:19.260\nAnd as you go down the line of what comes\nout, we can start to see these interfaces.\n\n47\n00:02:19.260 --> 00:02:23.110\nI get their interface names and\nit's keying off of that line protocol.\n\n48\n00:02:23.110 --> 00:02:25.480\nAnd then I can see not connected,\nnot connected.\n\n49\n00:02:25.480 --> 00:02:29.235\nAnd then when I get down to port 12,\nright here, this guy.\n\n50\n00:02:29.235 --> 00:02:35.930\nFastEthernet1/0/12 is down,\nline protocol is down, (err-disabled).\n\n51\n00:02:35.930 --> 00:02:39.500\nSo there's the one that's err-disabled,\nwe spotted it, we kind of found it.\n\n52\n00:02:39.500 --> 00:02:40.240\nAnd that command,\n\n53\n00:02:40.240 --> 00:02:44.510\nagain, I just did show interface,\nwhich gives me way too much data.\n\n54\n00:02:44.510 --> 00:02:49.570\nAnd then I said, only include lines\nthat have the word, line protocol.\n\n55\n00:02:49.570 --> 00:02:52.640\nBecause line protocol,\nthat's where we get the name of the port.\n\n56\n00:02:52.640 --> 00:02:54.340\nAnd then I looked for the word, disabled.\n\n57\n00:02:54.340 --> 00:02:57.096\nI did an or disabled, and so\nthat's why I got kinda both,\n\n58\n00:02:57.096 --> 00:02:59.000\nI guess I could've left that part out.\n\n59\n00:02:59.000 --> 00:03:02.420\nBut now I get it, and we kinda spot\nthat and see which one is disabled.\n\n60\n00:03:02.420 --> 00:03:05.110\nNow that we know that it's that port,\n\n61\n00:03:05.110 --> 00:03:08.260\nwe can start to take a look\nat why it's err-disabled.\n\n62\n00:03:08.260 --> 00:03:10.245\nAnd I'll do a show interface fa1/0/12.\n\n63\n00:03:10.245 --> 00:03:12.711\nLooking at the port specifically,\n\n64\n00:03:12.711 --> 00:03:16.500\nsometimes we can get a little\nextra information on it.\n\n65\n00:03:16.500 --> 00:03:18.360\nSometimes you can, sometimes you can't.\n\n66\n00:03:18.360 --> 00:03:22.430\nAnd so, in my case, I can see here's\nthe port, it is err-disabled.\n\n67\n00:03:22.430 --> 00:03:25.665\nAs I start to look down the rest\nof it here, what I can look for\n\n68\n00:03:25.665 --> 00:03:31.405\nare things like UDLD errors and stuff\nthat might come up here in our inputs.\n\n69\n00:03:31.405 --> 00:03:35.515\nAnd as I scan across this I'm not,\nactually just seeing a bunch of 0s for\n\n70\n00:03:35.515 --> 00:03:39.715\nmy errors and things, so\nnothing too crazy popping up there.\n\n71\n00:03:39.715 --> 00:03:43.875\nAnd I'm really not seeing anything\nhere that would be a red flag for me.\n\n72\n00:03:43.875 --> 00:03:47.570\nThis is all just normal, kinda run of\nthe mill stuff, what we'd expect to see.\n\n73\n00:03:48.850 --> 00:03:53.760\nThere's another command that we can run,\nwhich is show interface status.\n\n74\n00:03:53.760 --> 00:03:56.450\nAnd that'll show us additional\ninformation about the interface.\n\n75\n00:03:56.450 --> 00:03:59.420\nAnd you'll see that you\ncan specify err-disabled,\n\n76\n00:03:59.420 --> 00:04:01.550\nwhich will show us the interfaces\nthat are in that error.\n\n77\n00:04:01.550 --> 00:04:06.330\nSo I'll go ahead and do that,\nshow interface status err-disabled.\n\n78\n00:04:06.330 --> 00:04:09.250\nAnd now I can look at it, and\nthis is a little bit better for me,\n\n79\n00:04:09.250 --> 00:04:15.540\nbecause it tells me the port, that it's\nerr-disabled, and why it's err-disabled.\n\n80\n00:04:15.540 --> 00:04:17.860\nAnd that's exactly what I needed to know.\n\n81\n00:04:17.860 --> 00:04:21.970\nSo, show interface status err-disabled\ngot me right to where I needed,\n\n82\n00:04:21.970 --> 00:04:26.780\nand it gave me this little clue\nright here, psecure-violation.\n\n83\n00:04:26.780 --> 00:04:28.710\nWhat is psecure?\n\n84\n00:04:28.710 --> 00:04:30.340\nPort security, right?\n\n85\n00:04:30.340 --> 00:04:33.430\nPort security is how we can limit\nthe MAC addresses on a port,\n\n86\n00:04:33.430 --> 00:04:34.770\nwe can limit other resources.\n\n87\n00:04:34.770 --> 00:04:36.460\nAnd in this case,\n\n88\n00:04:36.460 --> 00:04:39.060\napparently I've violated whatever\nthat limit was that was implemented.\n\n89\n00:04:39.060 --> 00:04:40.620\nSo we need to take a look at that.\n\n90\n00:04:40.620 --> 00:04:45.061\nAnd you can do a show port-security.\n\n91\n00:04:46.290 --> 00:04:49.490\nAnd we can look at the ports that\nare in violation and kinda get an idea.\n\n92\n00:04:49.490 --> 00:04:56.200\nAnd sure enough, here's port Fa1/0/12,\nit's got a maximum mac address count of 1.\n\n93\n00:04:56.200 --> 00:05:00.256\nIt's currently got 1, but\nit's in a security violation of 1,\n\n94\n00:05:00.256 --> 00:05:03.690\nthat means that a second one came along.\n\n95\n00:05:03.690 --> 00:05:08.344\nNow, you might ask yourself, if it says\ncurrent of 1 and max 1, isn't that equal,\n\n96\n00:05:08.344 --> 00:05:09.630\naren't I okay?\n\n97\n00:05:09.630 --> 00:05:12.440\nWell, it depends on the way\nport-security is set up.\n\n98\n00:05:12.440 --> 00:05:16.640\nIf it's set to enforcing,\nthen what it's gonna do is it's gonna stop\n\n99\n00:05:16.640 --> 00:05:20.300\nthe second address from being added,\nand put us into err-disabled.\n\n100\n00:05:20.300 --> 00:05:22.679\nWhich is exactly what it's done,\nthat's why we're shut down right here.\n\n101\n00:05:23.710 --> 00:05:25.880\nIf it's just set to alerting though,\n\n102\n00:05:25.880 --> 00:05:29.970\nthen it'll let the current address\ncount exceed what the maximum is.\n\n103\n00:05:29.970 --> 00:05:31.650\nAnd then you get your\nviolation count over here.\n\n104\n00:05:31.650 --> 00:05:33.260\nSo that's why we have those columns.\n\n105\n00:05:33.260 --> 00:05:39.030\nBut this one looks like it's going\nto boil down to port-security.\n\n106\n00:05:39.030 --> 00:05:41.551\nSo if I do a show run for\ninterface fa1/0/12,\n\n107\n00:05:41.551 --> 00:05:45.560\nI expect to see a port-security\nconfiguration, and there it is, right?\n\n108\n00:05:45.560 --> 00:05:48.156\nSo we've got switchport port-security,\n\n109\n00:05:48.156 --> 00:05:51.251\nswitchport port-security\nmac-address sticky.\n\n110\n00:05:51.251 --> 00:05:53.520\nSo, by default when you\nturn on port security,\n\n111\n00:05:53.520 --> 00:05:56.260\nthe default limit is one mac-address,\nall right?\n\n112\n00:05:56.260 --> 00:05:59.250\nIf there was a count assigned,\nthen it could be something higher,\n\n113\n00:05:59.250 --> 00:06:02.065\nbut right now it's just set\nto the defaults, which is 1.\n\n114\n00:06:02.065 --> 00:06:07.010\nmac-address sticky is, it learned whatever\nthe first MAC address was that it saw.\n\n115\n00:06:07.010 --> 00:06:09.710\nAnd the very next line I\ncan see what it learned.\n\n116\n00:06:09.710 --> 00:06:11.270\nIt learned this mac-address right here,\n0001.12ad.45a1.\n\n117\n00:06:11.270 --> 00:06:14.120\nSo it learned that one,\n\n118\n00:06:14.120 --> 00:06:18.970\nthat's what's assigned on it, okay.\n\n119\n00:06:18.970 --> 00:06:23.438\nNow, as long as I plug a computer into\nthis port that matches that mac-address,\n\n120\n00:06:23.438 --> 00:06:24.370\nit'll be fine.\n\n121\n00:06:24.370 --> 00:06:29.380\nBut if some other mac-address comes along,\nI'll get a violation, all right?\n\n122\n00:06:29.380 --> 00:06:31.170\nThat's more than likely what happened.\n\n123\n00:06:31.170 --> 00:06:36.056\nIf I do a show mac address table,\nand I filter that for 1/0/12,\n\n124\n00:06:36.056 --> 00:06:41.200\nwell, actually I'm not really\nshowing anything in there, am I?\n\n125\n00:06:41.200 --> 00:06:44.660\nSo, I kind of expected to\nsee a mac address in there.\n\n126\n00:06:44.660 --> 00:06:46.410\nAt least one, right?\n\n127\n00:06:46.410 --> 00:06:47.800\nWe've got the static assignment.\n\n128\n00:06:47.800 --> 00:06:53.420\nAnd, oh, sorry, the default is that\nthe action that we're taking is enforcing.\n\n129\n00:06:53.420 --> 00:06:55.820\nSo it's stopping that second one from\neven making it into the MAC address.\n\n130\n00:06:55.820 --> 00:06:58.812\nSo whatever's plugged into the other\nend of this line is more than likely\n\n131\n00:06:58.812 --> 00:06:59.410\nstill there.\n\n132\n00:06:59.410 --> 00:07:02.010\nBut it's not even allows to make\nit into the MAC address table.\n\n133\n00:07:02.010 --> 00:07:07.550\nSo we could temporarily turn off port\nsecurity to see that MAC address appear.\n\n134\n00:07:07.550 --> 00:07:11.710\nThis is gonna boil down to whether the\nthing on the other end of this is good or\n\n135\n00:07:11.710 --> 00:07:12.790\nbad, right?\n\n136\n00:07:12.790 --> 00:07:14.390\nI've got something plugged in to port 12.\n\n137\n00:07:14.390 --> 00:07:18.040\nIs it an approved device or\nnot an approved device?\n\n138\n00:07:18.040 --> 00:07:20.510\nIf it's not an approved device,\nI don't want to fix this problem.\n\n139\n00:07:20.510 --> 00:07:22.970\nWe're blocking it,\nthat's exactly what we want, right?\n\n140\n00:07:22.970 --> 00:07:25.580\nSo I need to go to the physical\nlocation and find that.\n\n141\n00:07:25.580 --> 00:07:30.210\nBut if it is an approved device,\nmaybe somebody's computer failed, and\n\n142\n00:07:30.210 --> 00:07:31.480\nthey had to get a replacement.\n\n143\n00:07:31.480 --> 00:07:32.940\nSo the MAC address changed.\n\n144\n00:07:32.940 --> 00:07:37.820\nOr maybe their computer is now\nplugged in to a VoIP phone, and\n\n145\n00:07:37.820 --> 00:07:39.290\nthe VoIP phone is plugged into the wall.\n\n146\n00:07:39.290 --> 00:07:40.530\nRight, so we're kinda daisy chaining.\n\n147\n00:07:40.530 --> 00:07:43.600\nSo now there's two MAC addresses\non this port instead of one.\n\n148\n00:07:43.600 --> 00:07:45.240\nAnd I know that and I'm okay with it.\n\n149\n00:07:45.240 --> 00:07:46.760\nThen I just need to come in here and\nadjust it.\n\n150\n00:07:46.760 --> 00:07:48.340\nSo how do I adjust it?\n\n151\n00:07:48.340 --> 00:07:50.000\nOne, I could turn off port security.\n\n152\n00:07:50.000 --> 00:07:51.566\nIt's probably not what we want.\n\n153\n00:07:51.566 --> 00:07:54.010\nTwo, I could increase the MAC\naddress count to two, and\n\n154\n00:07:54.010 --> 00:07:56.324\nthat would allow the second\nMAC address on the port.\n\n155\n00:07:56.324 --> 00:08:01.990\nThree, I could switch it from\nenforcing to just alerting,\n\n156\n00:08:01.990 --> 00:08:04.820\nand then that way it'd let the MAC\naddress count go a little bit higher.\n\n157\n00:08:04.820 --> 00:08:05.800\nThat would work too.\n\n158\n00:08:05.800 --> 00:08:07.257\nSo, few different solutions that,\n\n159\n00:08:07.257 --> 00:08:09.330\nI could actually think of\na few other solutions too.\n\n160\n00:08:09.330 --> 00:08:13.790\nBut of those, I just need to\nkind of understand the scenario.\n\n161\n00:08:13.790 --> 00:08:16.680\nIf this new MAC address is gonna\nbe replacing the existing one,\n\n162\n00:08:16.680 --> 00:08:20.480\nlike somebody got a replacement computer,\nthen I just need to clear the sticky MAC.\n\n163\n00:08:20.480 --> 00:08:21.940\nAnd then it'll learn the new MAC, and\n\n164\n00:08:21.940 --> 00:08:24.330\nthat'll become the new one\nthat's approved on the port.\n\n165\n00:08:24.330 --> 00:08:27.120\nSince they didn't really tell us in\nthe question, they just say hey,\n\n166\n00:08:27.120 --> 00:08:30.110\nit's err-disabled,\nwe need to resolve it, let's just assume\n\n167\n00:08:30.110 --> 00:08:33.780\nthat this is a replacement computer and\nthe new MAC address is the one I want.\n\n168\n00:08:33.780 --> 00:08:37.400\nAll I've gotta do is clear out\nthe existing MAC and reset the port.\n\n169\n00:08:37.400 --> 00:08:39.760\nIt'll learn the new MAC and\nthen we'll be in business.\n\n170\n00:08:39.760 --> 00:08:41.900\nSo, let's do that.\n\n171\n00:08:41.900 --> 00:08:47.277\nI'm going to do a show run for\ninterface 1/0/12 again.\n\n172\n00:08:47.277 --> 00:08:52.895\nAnd I will jump into configuration,\nget into fa1/0/12,\n\n173\n00:08:52.895 --> 00:08:58.625\nand I'm gonna do a no switchport\nport-security mac-address.\n\n174\n00:08:58.625 --> 00:09:05.124\nAnd then I'm gonna feed in that\naddress to get it out of there.\n\n175\n00:09:05.124 --> 00:09:10.560\nAnd let's see, 12ad.45a1, yyping\nmac-addresses is always a good time.\n\n176\n00:09:12.050 --> 00:09:15.540\nThere we go, and so I'm just gonna\nget rid of that mac-address.\n\n177\n00:09:15.540 --> 00:09:20.530\nAnd if I look at my configuration again,\nsee how I still have that sticky port.\n\n178\n00:09:20.530 --> 00:09:23.332\nAnd I'm gonna do a shutdown\nto turn the port off, and\n\n179\n00:09:23.332 --> 00:09:25.060\na no shutdown to turn it back on.\n\n180\n00:09:25.060 --> 00:09:29.050\nAnd I'm doing that because that\nwill clear the err-disabled state.\n\n181\n00:09:29.050 --> 00:09:31.590\nIf I wait, we might have\nerr-disable recovery turned on, and\n\n182\n00:09:31.590 --> 00:09:32.510\nit might recover on it's own.\n\n183\n00:09:32.510 --> 00:09:34.650\nBut I'm in a hurry so I'll just\nshut it down and no shut it down.\n\n184\n00:09:34.650 --> 00:09:38.610\nThat'll bring it back up, and\nwe should learn the new mac-address.\n\n185\n00:09:38.610 --> 00:09:41.030\nThe mac-address sticky\ncommand is still there, so\n\n186\n00:09:41.030 --> 00:09:43.840\nit's gonna learn the next mac-address and\nrepopulate it.\n\n187\n00:09:43.840 --> 00:09:44.720\nNow, in this lab,\n\n188\n00:09:44.720 --> 00:09:48.190\nI don't actually know if there's\nanything plugged into port 12 or not.\n\n189\n00:09:48.190 --> 00:09:53.500\nBut if there is, we'll know it cuz a new\nmac-address should show up in here.\n\n190\n00:09:53.500 --> 00:09:58.110\nAnd I'm thinking that there isn't\nanything plugged into it, so\n\n191\n00:09:58.110 --> 00:10:02.490\nlet's take a look at\nwhether it's turning up.\n\n192\n00:10:02.490 --> 00:10:05.850\nThe port is up up, so\nthere is something plugged into it.\n\n193\n00:10:05.850 --> 00:10:08.440\nWe just haven't learned\nwhatever it is yet.\n\n194\n00:10:08.440 --> 00:10:10.730\nWhatever it is isn't talking, apparently.\n\n195\n00:10:10.730 --> 00:10:13.060\nAnd that's a common problem\nwith this kind of stuff.\n\n196\n00:10:13.060 --> 00:10:15.840\nSometimes the devices just\ndon't want to chatter, and so\n\n197\n00:10:15.840 --> 00:10:19.790\nyou end up kinda waiting a long time\nto verify that something is working.\n\n198\n00:10:19.790 --> 00:10:20.970\nYeah, it's not talking.\n\n199\n00:10:20.970 --> 00:10:24.320\nSo, what I'm doing here is just show\nMac address-table, and I'm looking for\n\n200\n00:10:24.320 --> 00:10:25.220\nport 1/0/12.\n\n201\n00:10:25.220 --> 00:10:29.981\nAnd I never type the speed of the port cuz\nI can never remember if it's a capital F\n\n202\n00:10:29.981 --> 00:10:34.430\nor lowercase f, is it fa, or\nfast Ethernet, how is it written out?\n\n203\n00:10:34.430 --> 00:10:39.220\nSo I'm just trying make sure this command\nworks, regardless of which case it is.\n\n204\n00:10:39.220 --> 00:10:43.020\nBut whatever device is plugged into\nthere should chat at some point.\n\n205\n00:10:43.020 --> 00:10:46.210\nAnd as soon as it does, it should\nshow up here in my Mac Address table.\n\n206\n00:10:46.210 --> 00:10:50.160\nAnd as soon as that Mac Address shows up,\nthe sticky Mac should learn it, and\n\n207\n00:10:50.160 --> 00:10:52.490\nit should now get entered in and\nput into the system.\n\n208\n00:10:52.490 --> 00:10:55.490\nAnd now that'll become\nthe new single port.\n\n209\n00:10:55.490 --> 00:10:58.650\nBut I can go all the way back\nto show interface status.\n\n210\n00:11:03.160 --> 00:11:06.180\nIf I can type it.\n\n211\n00:11:06.180 --> 00:11:10.620\nLet's see, status err-disabled.\n\n212\n00:11:10.620 --> 00:11:15.140\nAnd now I don't have any\ninterfaces that are err-disabled.\n\n213\n00:11:15.140 --> 00:11:17.401\nI can do a show interface fa1/0/12.\n\n214\n00:11:17.401 --> 00:11:23.920\nAnd on it, I'm now showing that it's\nup and connected, and not err-disabled.\n\n215\n00:11:23.920 --> 00:11:28.188\nAnd if I do a show port-security,\nI can see that\n\n216\n00:11:28.188 --> 00:11:33.315\nfa1/0/12 still has that\nmaximum mac address set,\n\n217\n00:11:33.315 --> 00:11:38.020\nand security violation is set to 0,\nall right?\n\n218\n00:11:38.020 --> 00:11:41.140\nNow it says a current address count of 1,\nwhich is interesting.\n\n219\n00:11:41.140 --> 00:11:43.170\nSo let's see if it finally learned that,\n\n220\n00:11:43.170 --> 00:11:46.330\nmaybe while I was talking there\nwhatever devices on it chatted.\n\n221\n00:11:46.330 --> 00:11:47.230\nYep, it sure did.\n\n222\n00:11:47.230 --> 00:11:51.260\nYep, so at some point while I was\nrambling on there, it started to chat and\n\n223\n00:11:51.260 --> 00:11:53.890\nI can see the new mac-address\nhas been learned.\n\n224\n00:11:53.890 --> 00:11:57.476\nAnd so it's in there,\napparently just took its time.\n\n225\n00:11:57.476 --> 00:12:00.740\nAnd there it is in the mac address-table.\n\n226\n00:12:00.740 --> 00:12:03.610\nSo now we've learned it,\nwe've cleared the problem, and we move on.\n\n227\n00:12:03.610 --> 00:12:05.830\nNow if I was supposed to\nhave two MAC addresses,\n\n228\n00:12:05.830 --> 00:12:08.290\nthis problem isn't technically solved,\nbut they didn't tell me that.\n\n229\n00:12:08.290 --> 00:12:11.470\nSo I only see one other one,\nwe're clear, and we're ready to move on.\n\n230\n00:12:11.470 --> 00:12:14.230\nSo, couple of neat commands\nthat helped us there.\n\n231\n00:12:14.230 --> 00:12:17.370\nI used show interfaces first with the\nlittle filter command because that's what\n\n232\n00:12:17.370 --> 00:12:18.360\nI kinda like to do.\n\n233\n00:12:18.360 --> 00:12:22.290\nBut also show interface status was a good\none to let us find the err-disabled port.\n\n234\n00:12:22.290 --> 00:12:24.520\nShow port-security let us find it too.\n\n235\n00:12:24.520 --> 00:12:28.330\nBut at the end of the day, it was really\nshow running config that solved it for us.\n\n236\n00:12:28.330 --> 00:12:31.450\nRight, we looked at the configuration\nof that interface, cleared out the MAC\n\n237\n00:12:31.450 --> 00:12:33.970\naddress, let it relearn the new one,\nand we were in business.\n\n238\n00:12:33.970 --> 00:12:37.280\nSo that resolved this error, and now\nwe're ready to move on to the next one.\n\n239\n00:12:37.280 --> 00:12:38.380\nSo hope you guys enjoyed it.\n\n240\n00:12:38.380 --> 00:12:43.814\nStay tuned, we've got another\ntroubleshooting issue coming up.\n\n241\n00:12:43.814 --> 00:12:48.719\n[SOUND]\n\n",
          "vimeoId": "151013763"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #4` from set #4. The trouble ticket states that \"All of the standby groups on NYEDGE1 are active, when these should be active on NYCORE1 and NYCORE2, NYEDGE1 is the last resort router. \"",
          "length": "714",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-4-4-set_4_issue_4-120215-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-4-4-set_4_issue_4-120215-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-4-4-set_4_issue_4-120215-1-sm.jpg",
          "title": "Set 4 Issue 4",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:08.714\n[MUSIC]\n\n2\n00:00:08.714 --> 00:00:11.430\nAll right,\nlet's move on to set 4, issue 4.\n\n3\n00:00:11.430 --> 00:00:13.880\nLooks like we've got\nan HSSRP problem again.\n\n4\n00:00:13.880 --> 00:00:15.120\nSo let's take a look at this one.\n\n5\n00:00:15.120 --> 00:00:16.770\nThe troubleshooting\nticket reads like this.\n\n6\n00:00:16.770 --> 00:00:22.160\nIt says, all of the standby\ngroups on NYEDGE1 are active\n\n7\n00:00:22.160 --> 00:00:25.810\nWhen these should be active on NYCORE1 and\nNYCORE2.\n\n8\n00:00:25.810 --> 00:00:29.570\nNYEDGE1 is the last resort router.\n\n9\n00:00:29.570 --> 00:00:32.670\nSo, you might remember from some of\nthe previous sets that we have HSSRP\n\n10\n00:00:32.670 --> 00:00:36.485\nrunning between NYCORE1,\nNYCORE2 and NYEDGE1.\n\n11\n00:00:36.485 --> 00:00:39.500\nAnd NYCORE 1 and NYCORE 2,\n\n12\n00:00:39.500 --> 00:00:44.360\nthey're kinda dividing up seven VLANs\nwhere one of them is active for\n\n13\n00:00:44.360 --> 00:00:47.890\nthe odd number VLANs and the other\nis active for the even number VLANs.\n\n14\n00:00:47.890 --> 00:00:50.940\nSo they're standby and\nactive, kind of an even mix.\n\n15\n00:00:50.940 --> 00:00:55.650\nBut NY edge 1,\nit's supposed to be third place router.\n\n16\n00:00:55.650 --> 00:00:58.840\nNot active, not standby, just listening.\n\n17\n00:00:58.840 --> 00:01:00.490\nIt's called the other state.\n\n18\n00:01:00.490 --> 00:01:02.460\nAnd so it's supposed to be\nin that other state for\n\n19\n00:01:02.460 --> 00:01:06.310\nHSRP, and just serving as a backup\nif the other guys fail and\n\n20\n00:01:06.310 --> 00:01:08.170\nnormally the way we achieve\nthat is with priority.\n\n21\n00:01:08.170 --> 00:01:12.062\nSo you'll have somebody at priority 100,\nsomebody at priority 90, somebody at\n\n22\n00:01:12.062 --> 00:01:16.810\npriority 80 And NYEDGE1 would be the one\nat priority 80, the lowest priority.\n\n23\n00:01:16.810 --> 00:01:19.930\nIt should only come active if\nthe other two routers are gone.\n\n24\n00:01:19.930 --> 00:01:21.860\nWell in this scenario that's\nwhat's happened, right.\n\n25\n00:01:21.860 --> 00:01:23.910\nNYEDGE1 has gone active.\n\n26\n00:01:23.910 --> 00:01:28.850\nSo either NYCORE1 and NYCORE2 are down,\nor I got some other kind of problem.\n\n27\n00:01:28.850 --> 00:01:30.820\nSo let's dive in and take a look.\n\n28\n00:01:30.820 --> 00:01:35.370\nNow looking at our topology, these are the\nthree devices that are in the mix, right?\n\n29\n00:01:35.370 --> 00:01:37.360\nWe've got CORE1, CORE2 and\n\n30\n00:01:37.360 --> 00:01:41.500\nEDGE1 and I know the problem is more\nthan likely on EDGE1 cuz it's active for\n\n31\n00:01:41.500 --> 00:01:45.510\neverything when it shouldn't be,\nbut just to be sure, I want to take\n\n32\n00:01:45.510 --> 00:01:50.490\na quick look at these other switches, just\nto make sure they're working right, okay?\n\n33\n00:01:50.490 --> 00:01:55.220\nCORE1 should be active for the odd\nnetworks and CORE2 should be active for\n\n34\n00:01:55.220 --> 00:01:56.550\nthe even networks.\n\n35\n00:01:56.550 --> 00:02:00.830\nI wanna see if they are because this could\nbe as simple as this link being down.\n\n36\n00:02:00.830 --> 00:02:04.430\nIf the link between CORE1 and\nEDGE1 is down, EDGE1 won't be able to see\n\n37\n00:02:04.430 --> 00:02:07.880\neither of the CORE switches and\nit would go active for everything.\n\n38\n00:02:07.880 --> 00:02:11.490\nBut if that's the case,\nthen these guys would still be active for\n\n39\n00:02:11.490 --> 00:02:15.200\ntheir associated VLANs, and\nthat kinda tells us where that problem is.\n\n40\n00:02:15.200 --> 00:02:16.920\nIt lets us know to go up to EDGE1,\n\n41\n00:02:16.920 --> 00:02:19.880\nbut I just wanna verify that before\nI get too deep into this problem.\n\n42\n00:02:19.880 --> 00:02:23.780\nSo I'm gonna jump down to Core 1 and\non Core 1,\n\n43\n00:02:23.780 --> 00:02:25.820\nI'm just gonna do a quick show standby.\n\n44\n00:02:25.820 --> 00:02:27.360\nNow I see a quick one.\n\n45\n00:02:27.360 --> 00:02:30.960\nThe show standby command actually\nshows you a lot of information, right?\n\n46\n00:02:30.960 --> 00:02:35.570\nAnd when you're running standby for more\nthan one VLAN, it can quite a bit, right?\n\n47\n00:02:35.570 --> 00:02:39.880\nYou can get a little overwhelmed with it\nall and so I normally only do show standby\n\n48\n00:02:39.880 --> 00:02:42.770\nwhen I'm specifying a particular VLAN,\nbut I wanna see them all.\n\n49\n00:02:42.770 --> 00:02:44.160\nSo there's a variation of that command,\n\n50\n00:02:44.160 --> 00:02:48.800\nshow standby brief, that's kinda nice when\nyou want to get a great big overview.\n\n51\n00:02:48.800 --> 00:02:54.180\nAnd what I can see looking down\nthe line Is that I'm active for\n\n52\n00:02:54.180 --> 00:02:58.580\nVlan11 and I'm active for Vlan13 and\nI'm active for Vlan15, right?\n\n53\n00:02:58.580 --> 00:03:02.970\nSee it says local is active that's me and\n\n54\n00:03:02.970 --> 00:03:07.325\nthen I can see that\n192.168.something.3 is active for\n\n55\n00:03:07.325 --> 00:03:11.270\nVlan10,12,14 and 16 that's in my corp too.\n\n56\n00:03:11.270 --> 00:03:14.620\nAnd I can see that I'm\nthe standby in those scenarios.\n\n57\n00:03:14.620 --> 00:03:18.440\nSo looking at this, NY Core 1, and\n\n58\n00:03:18.440 --> 00:03:21.800\nby association NY Core 2,\nthey're showing the right stuff.\n\n59\n00:03:21.800 --> 00:03:23.450\nThings are running the right way.\n\n60\n00:03:23.450 --> 00:03:26.700\nSo as far as these guys are concerned,\nHSRP is working fine.\n\n61\n00:03:26.700 --> 00:03:30.000\nWe've got a priority of 100 for\nthe active router and a priority of 90 for\n\n62\n00:03:30.000 --> 00:03:30.580\nthe standby.\n\n63\n00:03:31.740 --> 00:03:35.890\nIt could be that NYEDGE1\nhas a higher priority, but\n\n64\n00:03:35.890 --> 00:03:39.860\nthat would affect these guys and\nI'm not seeing that here, right?\n\n65\n00:03:39.860 --> 00:03:44.170\nSo that's what's gonna tell me we more\nthan likely have a link issue here.\n\n66\n00:03:44.170 --> 00:03:48.270\nThat the link between NYCORE1 and\nNYEDGE1 is probably down and\n\n67\n00:03:48.270 --> 00:03:53.400\nif it's down then that's why I'm not\ngoing to be able to communicate over.\n\n68\n00:03:53.400 --> 00:03:56.000\nAnd this one's going to go active,\nbut let's go see if it's active.\n\n69\n00:03:56.000 --> 00:03:59.790\nI'm going to go to NYEDGE1,\nmaybe it isn't active, right?\n\n70\n00:03:59.790 --> 00:04:04.150\nMaybe it's in the other state already and\nthe question's just wrong.\n\n71\n00:04:04.150 --> 00:04:05.730\nSo, I'm going to get in here and\n\n72\n00:04:05.730 --> 00:04:10.150\njust do that same show standby\nbrief to get my summary.\n\n73\n00:04:10.150 --> 00:04:13.600\nWell, unfortunately the question\nis right this time, I can see.\n\n74\n00:04:13.600 --> 00:04:17.510\nIt is active for\nevery one of these networks.\n\n75\n00:04:17.510 --> 00:04:21.290\nNow NY Core 1 and Core 2 are switches, and\nso they were doing everything off of their\n\n76\n00:04:21.290 --> 00:04:24.570\nvlan interfaces, but\nNY Edge 1 is a router.\n\n77\n00:04:24.570 --> 00:04:29.530\nAnd so it's got virtual interfaces,\nit's doing router on a stick and\n\n78\n00:04:29.530 --> 00:04:34.420\nso I see GI0/0, 10, 11, 12 and\nso on, one for each vlan.\n\n79\n00:04:34.420 --> 00:04:36.980\nAnd it has gone active on\nevery single one of them.\n\n80\n00:04:36.980 --> 00:04:39.090\nStandby is unknown.\n\n81\n00:04:39.090 --> 00:04:42.050\nIt's not seeing NYCORE1 or NYCORE2.\n\n82\n00:04:42.050 --> 00:04:46.096\nSo again, I'm thinking interface problem,\nall right?\n\n83\n00:04:46.096 --> 00:04:47.730\nSo let's verify that.\n\n84\n00:04:47.730 --> 00:04:49.070\nLet's take a look at the interface.\n\n85\n00:04:49.070 --> 00:04:53.380\nI'm gonna do a show ip interface brief and\n\n86\n00:04:53.380 --> 00:04:57.970\ntake a look at my interfaces, and I can\nsee that gi0/0, that's the interface.\n\n87\n00:04:57.970 --> 00:04:59.760\nI saw that in the topology, right?\n\n88\n00:04:59.760 --> 00:05:01.800\nThat's this interface here.\n\n89\n00:05:01.800 --> 00:05:05.160\nIt is showing as up, up,\nwhich is good, right?\n\n90\n00:05:05.160 --> 00:05:09.060\nIf it was down, then we'd kind of have our\nproblem right there, but it is showing as\n\n91\n00:05:09.060 --> 00:05:13.270\nup, up, so we're in good shape there,\nbut that doesn't help me, right?\n\n92\n00:05:13.270 --> 00:05:14.910\nAll these interfaces are up, up.\n\n93\n00:05:14.910 --> 00:05:17.360\nSo it thinks that it's up.\n\n94\n00:05:17.360 --> 00:05:21.120\nI could try and do a quick ping, right.\n\n95\n00:05:21.120 --> 00:05:22.500\nI've got an ip 192.168.16.4.\n\n96\n00:05:22.500 --> 00:05:24.800\nThe other switches are 192.168.16.2 and\n.3.\n\n97\n00:05:24.800 --> 00:05:27.090\nLet's see if I can ping those.\n\n98\n00:05:27.090 --> 00:05:31.080\nSo I'm just gonna test\nsome basic connectivity.\n\n99\n00:05:32.220 --> 00:05:35.650\nTrying to ping .2 and\nI'll let the first one fail.\n\n100\n00:05:35.650 --> 00:05:37.440\nWell, and then the second one,\nthat's that.\n\n101\n00:05:38.500 --> 00:05:40.460\nLet me try .3 and\nsee if I get the same result.\n\n102\n00:05:40.460 --> 00:05:44.350\nAll right, so it looks like we\ndefinitely have a connectivity issue but\n\n103\n00:05:44.350 --> 00:05:48.170\nit's not player one, because my\ninterface shows as up-up, right?\n\n104\n00:05:48.170 --> 00:05:51.410\nSo my interface isn't showing as down,\nI should be good there.\n\n105\n00:05:51.410 --> 00:05:53.750\nWe had some error disabled\nstuff in another episode, so\n\n106\n00:05:53.750 --> 00:05:59.210\nmaybe I'll do a show interface status for\ngi0/0 and,\n\n107\n00:05:59.210 --> 00:06:06.250\nlet's see Is it not gonna let me see that?\n\n108\n00:06:06.250 --> 00:06:08.410\nOh here, we'll do it like err-disabled,\nthere we go.\n\n109\n00:06:08.410 --> 00:06:11.690\nSo I don't have anything err-disabled, so\nthat's fine, and if I do a show int gi0/0,\n\n110\n00:06:11.690 --> 00:06:18.300\nall it shows is up up, it seems healthy.\n\n111\n00:06:18.300 --> 00:06:21.570\nLook at my errors down here,\nwe'll see if we got any errors.\n\n112\n00:06:21.570 --> 00:06:22.800\nNot really seeing any errors.\n\n113\n00:06:22.800 --> 00:06:25.620\nI got one interface reset, but\nthat's not necessarily a big deal.\n\n114\n00:06:25.620 --> 00:06:27.040\nThe interface is up now.\n\n115\n00:06:27.040 --> 00:06:29.760\nSo I'm not really seeing anything\njump out on the interface, but\n\n116\n00:06:29.760 --> 00:06:32.670\nI'm definitely having some\nconnectivity issues, and\n\n117\n00:06:32.670 --> 00:06:34.790\nI'm probably having them on all the VLANs,\nright?\n\n118\n00:06:34.790 --> 00:06:37.650\nSo if I kinda,\nI'll just single out NYCORE2.\n\n119\n00:06:37.650 --> 00:06:41.800\nSo I'm gonna try and ping NYCORE2 and\nI tried it on VLAN16.\n\n120\n00:06:43.140 --> 00:06:47.490\nI'm just gonna try a few other vlans, now,\nwhere this gets challenging is it's really\n\n121\n00:06:47.490 --> 00:06:53.100\nhard to troubleshoot vlans on a router\nbecause it doesn't know about the vlans.\n\n122\n00:06:53.100 --> 00:06:55.370\nSo, it just sees these\nas subinterfaces and\n\n123\n00:06:55.370 --> 00:06:57.720\nthe tagging is kind of\nhappening on the back end.\n\n124\n00:06:57.720 --> 00:07:02.130\nSo, normally I could do like\na show interface trunk, right?\n\n125\n00:07:02.130 --> 00:07:08.260\nThat would work on a switch, but\non a router I get nothing back, okay?\n\n126\n00:07:08.260 --> 00:07:11.230\nBut I know this should be trunk,\nbecause this is router on a stick.\n\n127\n00:07:11.230 --> 00:07:15.840\nI've got multiple sub-interfaces tied\nto VLans, it should be trunking, but\n\n128\n00:07:15.840 --> 00:07:17.640\nI don't have my normal\ntroubleshooting commands.\n\n129\n00:07:17.640 --> 00:07:19.910\nSo, I'm just gonna do\na show running-config.\n\n130\n00:07:19.910 --> 00:07:22.730\nSometimes looking at the running-config\nis the best way, and\n\n131\n00:07:22.730 --> 00:07:25.180\nI wanna look at how that\ninterface is set up.\n\n132\n00:07:25.180 --> 00:07:28.100\nRemembering how router on a stick\nis supposed to be configured.\n\n133\n00:07:28.100 --> 00:07:31.490\nWith router on a stick\nyour parent interface, so\n\n134\n00:07:31.490 --> 00:07:35.610\nin my case Gi0/0,\nthat's the native VLAN, all right?\n\n135\n00:07:35.610 --> 00:07:38.750\nAnd I've got no ip address,\nit's not turned on, I mean,\n\n136\n00:07:38.750 --> 00:07:43.540\nit is turned on, I'm not using it for\nIPV4, and so it just sits there.\n\n137\n00:07:43.540 --> 00:07:45.289\nSo I affectively am not\nusing my native VLAN.\n\n138\n00:07:46.300 --> 00:07:51.660\nAfter that, I've got all the other vlans,\ndot 10, 11, 12 and so on.\n\n139\n00:07:51.660 --> 00:07:55.250\nAnd they've got encapsulation.dot1Q10.\n\n140\n00:07:55.250 --> 00:07:57.980\nSo as far as being a trunk,\nthey're set up right?\n\n141\n00:07:57.980 --> 00:08:00.210\nWell at least the ones on\nmy screen are set up right.\n\n142\n00:08:00.210 --> 00:08:03.100\nThere might be ones with problems down\nthe road, but I'm having a problem with\n\n143\n00:08:03.100 --> 00:08:06.950\nevery one of my vlans so\nI'm just gonna look at a couple of them.\n\n144\n00:08:06.950 --> 00:08:09.480\nSo I see 10, I see 11, I see 12.\n\n145\n00:08:09.480 --> 00:08:11.160\nThey've got their IP addresses.\n\n146\n00:08:11.160 --> 00:08:15.390\nPriority is 85, so I do have\nthe lowest priority of the 3 devices.\n\n147\n00:08:15.390 --> 00:08:17.020\nThat should put me in the right state,\n\n148\n00:08:17.020 --> 00:08:20.400\nand I'm set to preempt, but\nthat's not really gonna affect us here.\n\n149\n00:08:20.400 --> 00:08:24.750\nSo everything looks good here and\nif everything looks good here,\n\n150\n00:08:24.750 --> 00:08:27.210\nthen where do I go from here?\n\n151\n00:08:27.210 --> 00:08:31.000\nWell it could be that the problem\nisn't actually on this end, right?\n\n152\n00:08:31.000 --> 00:08:32.640\nA trunk has two ends.\n\n153\n00:08:32.640 --> 00:08:35.810\nWhen I look at this cable here\nthat I said could be our problem,\n\n154\n00:08:35.810 --> 00:08:39.710\nthe problem could be on the router side or\nit could be on the switch side.\n\n155\n00:08:39.710 --> 00:08:43.540\nWhen you set up router on a stick you\ncreate all your sub-interfaces here and\n\n156\n00:08:43.540 --> 00:08:47.970\nyou tag them for the v-lens.The other\nside has to be set up to handle that too.\n\n157\n00:08:47.970 --> 00:08:49.400\nSo let's go take a look and\nsee if it's got it.\n\n158\n00:08:50.590 --> 00:08:56.380\nSo I'm gonna go back over to CORE1 and on\nCORE1, I wanna look at the configuration\n\n159\n00:08:56.380 --> 00:09:01.420\nfor this interface right here,\nFas1/0/1, and see what it's got.\n\n160\n00:09:01.420 --> 00:09:05.720\nSo if I jump into that fa1/0/1.\n\n161\n00:09:05.720 --> 00:09:10.580\nI can see switchport mode trunk,\nencapsulation dot1q, so it's using\n\n162\n00:09:10.580 --> 00:09:15.095\nthe same encapsulation, switchport trunk\nallowed vlan 10-16, so that's good.\n\n163\n00:09:15.095 --> 00:09:18.820\nSwitch-port mode access,\nall right, that's a problem.\n\n164\n00:09:18.820 --> 00:09:22.720\nWhen we go into switchport mode access,\nnow, we're only moving the native VLAN,\n\n165\n00:09:22.720 --> 00:09:26.110\nin this case, VLAN one, since we're\nnot really assigned to a VLAN here.\n\n166\n00:09:26.110 --> 00:09:28.650\nSo only VLAN 1 is crossing a line.\n\n167\n00:09:28.650 --> 00:09:30.790\nAll the other VLANs are being trimmed off.\n\n168\n00:09:30.790 --> 00:09:35.190\nAnd since they're being trimmed off,\nH S R P can't communicate over it and\n\n169\n00:09:35.190 --> 00:09:37.870\nthat's why H S R P is going\nactive on the other side.\n\n170\n00:09:37.870 --> 00:09:41.412\nIf we fix this,\nif we just get into fa1/0/1 and\n\n171\n00:09:41.412 --> 00:09:47.120\nswitch-port mode trunk,\nthe interface should start trunking.\n\n172\n00:09:47.120 --> 00:09:51.320\nHSRP should see that and\nthen start to take action, and\n\n173\n00:09:51.320 --> 00:09:56.750\nif I do a show interface trunk, I should\nsee that 1/0/1 is now trunking for\n\n174\n00:09:56.750 --> 00:10:01.300\nVLANs 10 through 16, and I'll bet that\nspanning-tree is still holding it down.\n\n175\n00:10:02.810 --> 00:10:05.680\nSo, let's just take a look\nat one of these VLANs.\n\n176\n00:10:05.680 --> 00:10:09.410\nAnd, yeah, so I've got 1/0/1 right\nthere is learning right now.\n\n177\n00:10:09.410 --> 00:10:12.880\nWe gotta give it 15 seconds for\nlistening, 15 seconds for learning, and\n\n178\n00:10:12.880 --> 00:10:14.150\nthen the port will come up.\n\n179\n00:10:14.150 --> 00:10:18.080\nAnd then we've gotta give it up to 10\nseconds for HSRP to recognize it, and\n\n180\n00:10:18.080 --> 00:10:20.940\nstart to adjust HSRP.\n\n181\n00:10:20.940 --> 00:10:24.190\nSo all that's kinda going on\nin the background here, and\n\n182\n00:10:24.190 --> 00:10:25.180\nI'm just gonna wait a second.\n\n183\n00:10:25.180 --> 00:10:27.530\nThere we go, just transitioned to forward.\n\n184\n00:10:27.530 --> 00:10:30.390\nAnd so now, I'll jump up to NYEDGE1 and\n\n185\n00:10:30.390 --> 00:10:35.260\non this guy, I'm just gonna give\nit a few moments and then I'm\n\n186\n00:10:35.260 --> 00:10:40.390\ngonna run that show standby brief command\nagain, so I can see all my standby zones.\n\n187\n00:10:40.390 --> 00:10:45.090\nAnd what I'm hoping to see is that I\nswitch from active to listen and that\n\n188\n00:10:45.090 --> 00:10:51.970\nthe active and standby router show up as\nNY core one and NY core two which they do.\n\n189\n00:10:51.970 --> 00:10:56.100\nSo now,\nI've gone into that listening state.\n\n190\n00:10:56.100 --> 00:11:00.240\nI'm not active for any of those,\nI am actually active on GIs 0/1 but\n\n191\n00:11:00.240 --> 00:11:02.050\nthat's a different problem, right.\n\n192\n00:11:02.050 --> 00:11:08.630\nIf we go back to our topology That's this\nHSRP up here out connecting to our ISP.\n\n193\n00:11:08.630 --> 00:11:12.050\nSo that's not on the inside, so\nthat's a problem for another day, but\n\n194\n00:11:12.050 --> 00:11:17.010\nas far as the internal side,\nI see the output that I expect to see.\n\n195\n00:11:17.010 --> 00:11:18.280\nWe're not active.\n\n196\n00:11:18.280 --> 00:11:21.980\nWe are the last resort router for\nHSRP, and our problem is solved.\n\n197\n00:11:21.980 --> 00:11:25.830\nSo just because you've got router on a\nstick, just because you've got one router\n\n198\n00:11:25.830 --> 00:11:29.270\nthat's not behaving right doesn't mean\nthat router's the one that's at fault.\n\n199\n00:11:29.270 --> 00:11:31.960\nIn this case the problem actually\nturned out to be on NYCORE1 with\n\n200\n00:11:31.960 --> 00:11:33.170\na mis-configured trunk.\n\n201\n00:11:33.170 --> 00:11:36.350\nWe got the other end of the line fixed and\nnow, we're communicating and\n\n202\n00:11:36.350 --> 00:11:37.160\neverybody's happy.\n\n203\n00:11:37.160 --> 00:11:38.620\nSo, not so bad on that one.\n\n204\n00:11:38.620 --> 00:11:42.070\nWe just had to kind of isolate the\nproblem, resolve it, and then we move on.\n\n205\n00:11:42.070 --> 00:11:43.340\nSo I hope you guys enjoyed that.\n\n206\n00:11:43.340 --> 00:11:46.288\nStayed tuned.\nWe've got more issues from set\n\n207\n00:11:46.288 --> 00:11:47.629\nfour coming up.\n\n208\n00:11:47.629 --> 00:11:52.379\n[MUSIC]\n\n",
          "vimeoId": "151013760"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #5` from set #4. The trouble ticket states that \"Another HSRP issue exists, this time between NYEDGE1 and NYEDGE2. It appears that both routers are active for group 100 \"",
          "length": "510",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-4-5-set_4_issue_5-120215.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-4-5-set_4_issue_5-120215-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-4-5-set_4_issue_5-120215-sm.jpg",
          "title": "Set 4 Issue 5",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:08.378\n[MUSIC]\n\n2\n00:00:08.378 --> 00:00:11.351\nAll right, welcome to Set 4 Issue 5, and\n\n3\n00:00:11.351 --> 00:00:14.580\nwe're gonna continue\nwith our HSRP debacle.\n\n4\n00:00:14.580 --> 00:00:16.980\nWe've got another HSRP problem\nto work on in this one.\n\n5\n00:00:16.980 --> 00:00:19.340\nThe troubleshooting\nticket reads like this.\n\n6\n00:00:19.340 --> 00:00:22.760\nIt says another HSRP issue exist,\nsurprise, surprise.\n\n7\n00:00:22.760 --> 00:00:25.810\nThis time between ny edge 1 and ny edge 2.\n\n8\n00:00:25.810 --> 00:00:30.440\nIt appears that both routers\nare active for group 100.\n\n9\n00:00:30.440 --> 00:00:34.046\nWell lets take a look at our topology and\nsee what they're talking about here.\n\n10\n00:00:34.046 --> 00:00:38.220\nSo edge 1 and edge 2, their two routers\nare up at the top of out topology, right?\n\n11\n00:00:38.220 --> 00:00:41.629\nSo this is kind off to the area\nwe haven't messed with too much.\n\n12\n00:00:41.629 --> 00:00:43.380\nIt's facing some ISPs.\n\n13\n00:00:43.380 --> 00:00:46.463\nAnd it looks like they're\nrunning HHRP between each other.\n\n14\n00:00:46.463 --> 00:00:47.880\nOn this pubic network.\n\n15\n00:00:47.880 --> 00:00:49.690\nNow it's kind of hard\nto tell on the diagram.\n\n16\n00:00:49.690 --> 00:00:51.480\nThey could be running on\nthis serial interface.\n\n17\n00:00:51.480 --> 00:00:53.230\nWe'll have to look at that and see, or\n\n18\n00:00:53.230 --> 00:00:55.440\nthey could be running it\non this gigabit interface.\n\n19\n00:00:55.440 --> 00:01:00.380\nBut either way that HSRP group 100,\nand they're both active for\n\n20\n00:01:00.380 --> 00:01:03.460\nthat group when really only\none of them should be active.\n\n21\n00:01:03.460 --> 00:01:04.546\nOne of them should be standby.\n\n22\n00:01:04.546 --> 00:01:06.550\nSo let's go and found out.\n\n23\n00:01:06.550 --> 00:01:10.790\nSo I'm gonna start on NYEDGE1 since we've\nkind of worked on that one a few times\n\n24\n00:01:10.790 --> 00:01:12.330\nthis series.\n\n25\n00:01:12.330 --> 00:01:14.255\nAnd we'll just kind of see what we spot.\n\n26\n00:01:14.255 --> 00:01:16.276\nNow because I don't know\nwhat interface it's on,\n\n27\n00:01:16.276 --> 00:01:18.270\nI could go hunting through the config.\n\n28\n00:01:18.270 --> 00:01:22.320\nBut this is another area where\nshow standby brief comes in handy,\n\n29\n00:01:22.320 --> 00:01:24.400\ncuz we can just see all\nthe standby groups.\n\n30\n00:01:24.400 --> 00:01:26.330\nAnd we can spot where group 100 is.\n\n31\n00:01:26.330 --> 00:01:27.670\nHere's group 100.\n\n32\n00:01:27.670 --> 00:01:30.540\nAnd it's on GI0/1, all right.\n\n33\n00:01:30.540 --> 00:01:35.354\nNow the reason I wanted to do that is\nI can, from here do a show standby for\n\n34\n00:01:35.354 --> 00:01:40.670\nGI0/1, and I can see the detailed\ninformation about just that interface.\n\n35\n00:01:40.670 --> 00:01:45.230\nI can see its state is active, so\nwe are active like the problem described.\n\n36\n00:01:45.230 --> 00:01:50.100\nI can see that I've got this\nvirtual IP of 172.14.0.1.\n\n37\n00:01:50.100 --> 00:01:54.600\nI can see that, I'm the active router,\nand that the standby router is unknown.\n\n38\n00:01:54.600 --> 00:01:55.680\nAll right.\n\n39\n00:01:55.680 --> 00:01:59.610\nSo, I can't see the standby router,\nwhoever that happens to be.\n\n40\n00:01:59.610 --> 00:02:01.860\nRight.\nWhich is NY edge two.\n\n41\n00:02:01.860 --> 00:02:07.631\nNow, I see that,\nthat virtual IP is 172.14.0.1.\n\n42\n00:02:07.631 --> 00:02:12.503\nIf I do a show run for interface gi0/1\n\n43\n00:02:12.503 --> 00:02:17.087\nI can see that my unique IP is .10.\n\n44\n00:02:17.087 --> 00:02:20.575\nNow the reason I want to note that is, I'm\nabout to go to the other router and just\n\n45\n00:02:20.575 --> 00:02:24.470\nsee if I have connectivity, see if I can\nping between them using their unique IPs.\n\n46\n00:02:24.470 --> 00:02:26.650\nAnd then if I can, I'll go from there.\n\n47\n00:02:26.650 --> 00:02:29.420\nNow, while I'm looking at the interface,\nI'm going to note a few things.\n\n48\n00:02:29.420 --> 00:02:31.140\nFirst off,\nI'm gonna take my trusty pen, and\n\n49\n00:02:31.140 --> 00:02:33.560\nI'm gonna write that IP down\ncuz I doubt I'll remember it.\n\n50\n00:02:33.560 --> 00:02:42.046\nSo this is 172.14.0.10 is the unique\nIP and .1 is the shared IP.\n\n51\n00:02:42.046 --> 00:02:47.280\nNow, as I look at it, I can see that\npriority is not defined on this, right.\n\n52\n00:02:47.280 --> 00:02:49.740\nSo that means I've got\na default priority of 100.\n\n53\n00:02:49.740 --> 00:02:52.000\nThey didn't really tell me who\nwas supposed to be active, and\n\n54\n00:02:52.000 --> 00:02:53.580\nwho was supposed to be standby.\n\n55\n00:02:53.580 --> 00:02:55.270\nThey just said that both were active and\nthat's bad.\n\n56\n00:02:55.270 --> 00:02:58.379\nSo I don't know if lab priority on\nthe other one or not, we'll have to see.\n\n57\n00:02:58.379 --> 00:03:02.870\nI see preemption is turned on but\nI also see authentication is turned on.\n\n58\n00:03:02.870 --> 00:03:04.180\nAll right?\n\n59\n00:03:04.180 --> 00:03:05.796\nAuthentication could\ncause this problem too.\n\n60\n00:03:05.796 --> 00:03:08.410\nIt might be that I can\nsee the other router.\n\n61\n00:03:08.410 --> 00:03:11.180\nBut that it's failing authentication and\nyou know it kinda makes sense that\n\n62\n00:03:11.180 --> 00:03:14.990\nauthentication would be turned on\nhere because this is an ISP network.\n\n63\n00:03:14.990 --> 00:03:18.900\nSo maybe we don't trust the ISP so\nwhen we configure HSRP here,\n\n64\n00:03:18.900 --> 00:03:22.130\nwe configure it with authentication\nto make sure that somebody\n\n65\n00:03:22.130 --> 00:03:25.410\nelse couldn't jump in and\nstart to take over our virtual IP.\n\n66\n00:03:25.410 --> 00:03:27.860\nSo, that does make a little\nbit of sense I suppose.\n\n67\n00:03:27.860 --> 00:03:30.380\nMore sense would be not to use this, but\nto use something else for load balancing,\n\n68\n00:03:30.380 --> 00:03:31.610\nbut we'll set that aside.\n\n69\n00:03:31.610 --> 00:03:37.080\nSo we've got a key-chain to find, and\nthe key-chain is called HSRP-AUTH.\n\n70\n00:03:37.080 --> 00:03:41.910\nAnd so if I do a show running config,\nwe can find that key-chain.\n\n71\n00:03:41.910 --> 00:03:44.836\nAnd what I need to note in the key chain,\n\n72\n00:03:44.836 --> 00:03:48.670\nhere we go Is the key number and\nkey string, right.\n\n73\n00:03:48.670 --> 00:03:51.295\nI've got key number 1, so\nI don't have more than one key.\n\n74\n00:03:51.295 --> 00:03:54.212\nAnd I've got a string of AUTHME.\n\n75\n00:03:54.212 --> 00:03:57.195\nI'm gonna write that down too,\nit's just all capitalized.\n\n76\n00:03:57.195 --> 00:04:00.170\nA-U-T-H-M-E.\n\n77\n00:04:00.170 --> 00:04:00.797\nAUTHME.\n\n78\n00:04:00.797 --> 00:04:02.610\nGot it.\nAll right,\n\n79\n00:04:02.610 --> 00:04:06.060\nthe reason I'm writing that down, is I\nneed to make sure that the password's set\n\n80\n00:04:06.060 --> 00:04:08.780\nthe same on the other side or\nthis is all gonna fail.\n\n81\n00:04:08.780 --> 00:04:10.290\nSo then I'm gonna jump over to EDGE2.\n\n82\n00:04:10.290 --> 00:04:13.810\nAnd we'll kind of just repeat\nthe same process over hear on EDGE2.\n\n83\n00:04:13.810 --> 00:04:16.910\nI'm gonna do a show standby brief\n\n84\n00:04:18.320 --> 00:04:22.210\njust to make sure the interface number\nis the same and it is, Gi0/1 is Grp 100.\n\n85\n00:04:22.210 --> 00:04:30.090\nAnd if I do a show run int gi0/1 Oh, and\nI can see that it was active up there.\n\n86\n00:04:30.090 --> 00:04:32.740\nThat was the other thing, is we need\nto make sure they were both active.\n\n87\n00:04:32.740 --> 00:04:35.940\nAnd I can see that this one's\nactually .11 for its unique IP, so\n\n88\n00:04:35.940 --> 00:04:37.250\nI'm just gonna write that down.\n\n89\n00:04:38.450 --> 00:04:42.970\nAnd I've got a standby IP that's that\nvirtual IP, I've got preemption turned on.\n\n90\n00:04:42.970 --> 00:04:45.120\nNo priority defined, so\nthis guy is a priority of 100 also.\n\n91\n00:04:45.120 --> 00:04:49.090\nThat means if there's a tie, and\nsince preemption is turned on,\n\n92\n00:04:49.090 --> 00:04:52.140\nthis one's gonna boil down to Mac\naddress as it kind of negotiates\n\n93\n00:04:52.140 --> 00:04:55.660\nwho's gonna be the winner on this one,\nto determine who's gonna pick it up.\n\n94\n00:04:55.660 --> 00:05:00.597\nI see that authentication is turned on,\nand it's got HSRP-AUTH as that key chain.\n\n95\n00:05:00.597 --> 00:05:03.080\nThe key chain name doesn't have to match.\n\n96\n00:05:03.080 --> 00:05:06.080\nI just needed to make sure that\nthere was a key chain, and so\n\n97\n00:05:06.080 --> 00:05:10.920\nI just need to verify that key chain\nactually has a matching password.\n\n98\n00:05:10.920 --> 00:05:17.400\nAnd so I'll do a show running-config,\nand I'll find that key chain.\n\n99\n00:05:17.400 --> 00:05:18.560\nHere it is.\n\n100\n00:05:18.560 --> 00:05:20.800\nOh, well, this is gonna turn\nout to be another easy problem.\n\n101\n00:05:20.800 --> 00:05:23.500\nAnd I can see right here, the key chain.\n\n102\n00:05:23.500 --> 00:05:25.560\nHas a wrong password, right?\n\n103\n00:05:25.560 --> 00:05:28.890\nIt's AUTHM3 instead of AUTHME.\n\n104\n00:05:28.890 --> 00:05:31.980\nIf the password doesn't match,\nthis is going to fail, right?\n\n105\n00:05:31.980 --> 00:05:35.320\nSo pretty easy to jump in here and\nspot that, now we need to fix that, so\n\n106\n00:05:35.320 --> 00:05:39.825\nI'm going to jump into configuration and\nI'll say key chain\n\n107\n00:05:39.825 --> 00:05:44.770\nHSRP-AUTH, that's the name\nof the key chain.\n\n108\n00:05:44.770 --> 00:05:46.050\nAnd I'm gonna say no key 1.\n\n109\n00:05:46.050 --> 00:05:50.630\nAnd then I'm gonna recreate key 1, so\nI need to get back into my key chain.\n\n110\n00:05:50.630 --> 00:05:53.550\nSince that was the only key,\nit just kicked me out of the key chain.\n\n111\n00:05:53.550 --> 00:05:55.040\nSo I'm gonna get back into it.\n\n112\n00:05:55.040 --> 00:05:59.710\nAnd I'll do key 1, key-string and\n\n113\n00:05:59.710 --> 00:06:05.120\nthen I'm gonna give it AUTHME so\nit matches the other side.\n\n114\n00:06:05.120 --> 00:06:09.590\nAll right, now, HSRP will likely\ncorrect itself and come up\n\n115\n00:06:09.590 --> 00:06:13.700\nhere on it's own in a few moments, but if\nyou get impatient like I do, sometimes it\n\n116\n00:06:13.700 --> 00:06:17.490\nhelps to just shut the interface down, and\nwait a second and then turn it back on.\n\n117\n00:06:17.490 --> 00:06:21.780\nThat'll kind of give HSRP a kick in the\nbutt and make it renegotiate right away.\n\n118\n00:06:21.780 --> 00:06:25.070\nIf you're trying to avoid down time that's\na bad idea, but we probably already have\n\n119\n00:06:25.070 --> 00:06:27.930\ndown time right now anyway cuz we have\ntwo systems active for the same IP.\n\n120\n00:06:29.110 --> 00:06:29.837\nAll right.\n\n121\n00:06:29.837 --> 00:06:33.293\nHopefully this will resolve the\nauthentication issue, then the two devices\n\n122\n00:06:33.293 --> 00:06:37.160\nshould see each other, and one should go\nactive, and the other should go stand-by.\n\n123\n00:06:37.160 --> 00:06:39.620\nI don't know which one because I\nhaven't looked at MAC addresses yet\n\n124\n00:06:39.620 --> 00:06:41.760\nbut that's hopefully what we'll see.\n\n125\n00:06:41.760 --> 00:06:42.640\nAll right.\n\n126\n00:06:42.640 --> 00:06:46.837\nThat might not be our only problem but\nit certainly was a problem.\n\n127\n00:06:46.837 --> 00:06:48.650\nNow we resolved it and\nwe should be good there.\n\n128\n00:06:48.650 --> 00:06:51.341\nNow, what I was actually setting out to do\nwhen I came over here before we stumbled\n\n129\n00:06:51.341 --> 00:06:53.258\non that problem,\nis I was just gonna test connectivity.\n\n130\n00:06:53.258 --> 00:06:58.360\nThis guy is 172.14.0.11 and\n\n131\n00:06:58.360 --> 00:07:03.480\nthe other switch is 172.14.0.\n\n132\n00:07:03.480 --> 00:07:04.770\n10.\nAnd so\n\n133\n00:07:04.770 --> 00:07:07.350\nI was just gonna see if I could\nping across to the other guy.\n\n134\n00:07:07.350 --> 00:07:09.920\nIf I can't ping across, then I'm not\ngonna be able to communicate at all.\n\n135\n00:07:09.920 --> 00:07:12.320\nBut I can see that I am\nable to ping across.\n\n136\n00:07:12.320 --> 00:07:14.000\nSometimes you might wanna\nbe careful with this ping,\n\n137\n00:07:14.000 --> 00:07:15.980\ncuz you have a virtual IP in the mix.\n\n138\n00:07:15.980 --> 00:07:20.580\nAnd so you might wanna specify a source\nfor where to ping it from, and\n\n139\n00:07:20.580 --> 00:07:24.880\ngive it the particular IP address,\ninstead of relying on the interface.\n\n140\n00:07:24.880 --> 00:07:29.176\nSo if I wanted to try and ping from\n172.14.0.11, or if I wanted to ping\n\n141\n00:07:29.176 --> 00:07:33.680\nfrom the virtual IP,\nI could try it that way.\n\n142\n00:07:33.680 --> 00:07:34.960\nSo source is kind of helpful.\n\n143\n00:07:34.960 --> 00:07:37.920\nAnd that's what I had intended to\ndo when I came over to this router.\n\n144\n00:07:37.920 --> 00:07:39.660\nBut we may have already found the problem.\n\n145\n00:07:39.660 --> 00:07:44.645\nSo let's go ahead and\ntake a look at show standby for gi0/1, and\n\n146\n00:07:44.645 --> 00:07:47.504\nI can see that my state is now standby.\n\n147\n00:07:47.504 --> 00:07:50.660\nThe active router is 172.14.0.10.\n\n148\n00:07:50.660 --> 00:07:52.920\nThe standby router is local.\n\n149\n00:07:52.920 --> 00:07:55.970\nThat's me and now it looks like\nthings are working properly.\n\n150\n00:07:55.970 --> 00:07:59.504\nIf I jump over NYEDGE1 I can verify\nthat it's seeing the same thing.\n\n151\n00:08:01.940 --> 00:08:04.920\nAnd so I'll pull up that show standby.\n\n152\n00:08:04.920 --> 00:08:05.570\nAnd i'll look at that one.\n\n153\n00:08:05.570 --> 00:08:09.660\nI can see that it is active and\nit's got a standby router of .11.\n\n154\n00:08:09.660 --> 00:08:12.580\nSo in this case it looks like\nwe just had a bad password.\n\n155\n00:08:12.580 --> 00:08:13.920\nPretty easy to spot that one.\n\n156\n00:08:13.920 --> 00:08:15.070\nGet it resolved.\n\n157\n00:08:15.070 --> 00:08:15.711\nAnd now it's up an running.\n\n158\n00:08:15.711 --> 00:08:19.470\nSo HHRP is safe once more and\nwe can move onto our next issue.\n\n159\n00:08:19.470 --> 00:08:20.530\nHope you guys enjoyed it.\n\n160\n00:08:20.530 --> 00:08:24.045\nStay tuned.\nWe've got issue six coming up next.\n\n161\n00:08:24.045 --> 00:08:30.299\n[MUSIC]\n\n",
          "vimeoId": "151013762"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #6` from set #4. The trouble ticket states that \"NYEDGE1 and NYEDGE2 are not forming an OSPF adjacency between them. \"",
          "length": "894",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-4-6-set_4_issue_6-120215-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-4-6-set_4_issue_6-120215-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-4-6-set_4_issue_6-120215-1-sm.jpg",
          "title": "Set 4 Issue 6",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:07.782\n[MUSIC]\n\n2\n00:00:07.782 --> 00:00:09.500\nAll right.\n\n3\n00:00:09.500 --> 00:00:13.790\nFor Issue 6, it looks like we're\ngonna move away from HSRP and\n\n4\n00:00:13.790 --> 00:00:16.120\nget a chance to look\nat some OSPF problems.\n\n5\n00:00:16.120 --> 00:00:19.981\nSo, our troubleshooting ticket for\nIssue 6 is NYEDGE1 and\n\n6\n00:00:19.981 --> 00:00:23.790\nNYEDGE2 are not forming an OSPF\nadjacency between them.\n\n7\n00:00:23.790 --> 00:00:26.290\nSo, OSPF's not happy, let's find out why.\n\n8\n00:00:26.290 --> 00:00:29.760\nNow if we look at our topology,\nNYEDGE1 and NYEDGE2,\n\n9\n00:00:29.760 --> 00:00:33.320\nthey've got a dedicated serial\nlink between each other.\n\n10\n00:00:33.320 --> 00:00:37.060\nSo an OSPF adjacency should be\npretty easy to build, right?\n\n11\n00:00:37.060 --> 00:00:39.430\nAs long as these networks\nare a part of the OSPF process,\n\n12\n00:00:39.430 --> 00:00:43.050\nthey should see each other, and we should\nhave a neighbor relationship built up.\n\n13\n00:00:43.050 --> 00:00:47.580\nIf not, we may still have an adjacency\nthrough other means, right?\n\n14\n00:00:47.580 --> 00:00:50.850\nEDGE1 is connected to OSPF Area 0.\n\n15\n00:00:50.850 --> 00:00:52.190\nEDGE2 is connected to OSPF Area 0.\n\n16\n00:00:52.190 --> 00:00:55.530\nThey should be able to see each\nother through these other links, and\n\n17\n00:00:55.530 --> 00:00:57.620\nwe can learn the routes\nthrough our neighbors, right?\n\n18\n00:00:57.620 --> 00:01:00.510\nSo, there should be plenty of different\nways that we can see that that\n\n19\n00:01:00.510 --> 00:01:01.810\nrouter exists.\n\n20\n00:01:01.810 --> 00:01:04.450\nWorst case scenario,\nwe could go across the WAN link here, but\n\n21\n00:01:04.450 --> 00:01:06.010\nI doubt that's gonna be configured.\n\n22\n00:01:06.010 --> 00:01:08.680\nI'm gonna start with this serial link\ncuz that should be the most obvious.\n\n23\n00:01:08.680 --> 00:01:11.410\nNow at a minimum, we should have\na neighbor relationship there.\n\n24\n00:01:11.410 --> 00:01:14.330\nAnd if we don't, well,\nwe can just create one,\n\n25\n00:01:14.330 --> 00:01:16.560\nand that'll probably solve this\nproblem and we'll be done.\n\n26\n00:01:16.560 --> 00:01:18.200\nSo, I'm gonna start over on NYEDGE1,\n\n27\n00:01:18.200 --> 00:01:21.592\nand the first thing I wanna do is\njust verify OSPF's configuration.\n\n28\n00:01:21.592 --> 00:01:24.650\nSo, on EDGE1, I guess\n\n29\n00:01:25.680 --> 00:01:29.260\nthe first thing I really need to know are\nwhat the IP address are on these systems.\n\n30\n00:01:29.260 --> 00:01:31.470\nWith OSPF, it can be a little\nhard to troubleshoot sometimes.\n\n31\n00:01:31.470 --> 00:01:36.540\nCuz if you do like a show ip ospf\nneighbor, you see your neighbors.\n\n32\n00:01:36.540 --> 00:01:40.000\nBut if you don't know the router ID for\neach neighbor,\n\n33\n00:01:40.000 --> 00:01:41.480\nit gets to be a little bit challenging.\n\n34\n00:01:41.480 --> 00:01:46.230\nSo I see that I've got\na relationship with 192.168.255.2.\n\n35\n00:01:46.230 --> 00:01:47.460\nWho is that?\n\n36\n00:01:47.460 --> 00:01:49.000\nI don't really know, okay.\n\n37\n00:01:49.000 --> 00:01:53.320\nSo what I'm going to do is on NYEDGE1,\nI'm going to do a show ip protocols.\n\n38\n00:01:55.080 --> 00:01:57.490\nAnd I'm gonna look for\nmy OSPF configuration, and\n\n39\n00:01:57.490 --> 00:01:59.450\nremember you might be running\nmore than one protocol.\n\n40\n00:01:59.450 --> 00:02:01.610\nI can see here's the IGRP.\n\n41\n00:02:01.610 --> 00:02:05.550\nAnd then after that I've got OSPF, here we\ngo, so OSPF 100, and what I'm looking for\n\n42\n00:02:05.550 --> 00:02:06.830\nis my router ID.\n\n43\n00:02:06.830 --> 00:02:09.690\nAnd I'm gonna take my best\ntroubleshooting tool, this pen, and\n\n44\n00:02:09.690 --> 00:02:11.359\nI'm gonna write down that router ID.\n\n45\n00:02:11.359 --> 00:02:19.140\nSo, EDGE1 has a router\nID of 192.168.255.4.\n\n46\n00:02:19.140 --> 00:02:20.100\nAll right.\n\n47\n00:02:20.100 --> 00:02:22.520\nAnd then I'm gonna jump over to EDGE2,\nthe one\n\n48\n00:02:22.520 --> 00:02:26.140\nwe're supposed to be forming an adjacency\nwith, and I'm gonna do the same thing.\n\n49\n00:02:26.140 --> 00:02:28.460\nJust to show ip protocols.\n\n50\n00:02:28.460 --> 00:02:32.220\nAnd if I spell it right, we'll\nactually get the output that we want.\n\n51\n00:02:32.220 --> 00:02:39.470\nAnd there's OSPF 100, and\nI can see my router ID is 192.168.255.2.\n\n52\n00:02:39.470 --> 00:02:43.210\nSo now what that information does\n\n53\n00:02:43.210 --> 00:02:48.010\nis it gives me the router IDs so\nthat when I jump back over to NYEDGE1.\n\n54\n00:02:48.010 --> 00:02:53.170\nAnd I run that show ip ospf neighbor,\n\n55\n00:02:54.170 --> 00:02:57.410\nnow I see that I've got\na neighbor of 192.168.255.2.\n\n56\n00:02:57.410 --> 00:03:00.380\nAnd I know that that's EDGE2, all right?\n\n57\n00:03:00.380 --> 00:03:03.430\nSo, I'm not forming\nan adjacency with EDGE2.\n\n58\n00:03:03.430 --> 00:03:05.365\nIt could be connectivity, right?\n\n59\n00:03:05.365 --> 00:03:07.460\nI could have a bad connection\nto the other side, but\n\n60\n00:03:07.460 --> 00:03:12.330\nin this case,\nwhat I see is the state as initializing.\n\n61\n00:03:12.330 --> 00:03:15.520\nAnd I see that router ID right there,\nnow that's interesting.\n\n62\n00:03:15.520 --> 00:03:17.359\nWhat this is gonna tell\nme is one of two things.\n\n63\n00:03:17.359 --> 00:03:21.208\nEither one, I've statically defined a\nneighbor, and that's how I know about it.\n\n64\n00:03:21.208 --> 00:03:24.460\nBut I've got a connectivity issue,\nand I can't see them.\n\n65\n00:03:24.460 --> 00:03:28.950\nOr two, I do have connectivity with\nthat router, I am able to see it, but\n\n66\n00:03:28.950 --> 00:03:32.120\nI'm not just building\nthe rest of the adjacency.\n\n67\n00:03:32.120 --> 00:03:35.630\nOkay, so what the heck is going on there?\n\n68\n00:03:35.630 --> 00:03:37.615\nAnd we could do debugs on this and\ntry and find it.\n\n69\n00:03:37.615 --> 00:03:39.720\nBut let's just start by\nlooking at the configuration.\n\n70\n00:03:39.720 --> 00:03:42.070\nMaybe we can save digging\nthrough a bunch of debug output.\n\n71\n00:03:42.070 --> 00:03:45.330\nOn the exam, debug output just takes\na long time to read through, so\n\n72\n00:03:45.330 --> 00:03:47.720\nany time we can avoid that we should.\n\n73\n00:03:47.720 --> 00:03:51.960\nI know that I've got OSPF configured so\nI'm gonna do a show run.\n\n74\n00:03:51.960 --> 00:03:54.050\nAnd I'm just gonna begin on\nthe first line with OSPF and\n\n75\n00:03:54.050 --> 00:03:56.210\nkind of take a look at\nwhat I've got on here.\n\n76\n00:03:56.210 --> 00:04:00.400\nSo here I've got Router OSPF100,\nwe're doing some route redistribution.\n\n77\n00:04:00.400 --> 00:04:02.990\nI've got network\n192.168.255.0 configured so\n\n78\n00:04:02.990 --> 00:04:08.150\nthe serial interface is\nin the OSPF process.\n\n79\n00:04:08.150 --> 00:04:12.780\nIt's set for area 0, and what I'm looking\nfor are things that might be a problem.\n\n80\n00:04:12.780 --> 00:04:15.690\nLike hello and\ndead intervals that might not match,\n\n81\n00:04:15.690 --> 00:04:17.780\nor area numbers that might not match.\n\n82\n00:04:17.780 --> 00:04:20.910\nAuthentication that's turned\non that might be blocking this\n\n83\n00:04:20.910 --> 00:04:21.790\nadjacency from building up.\n\n84\n00:04:21.790 --> 00:04:23.510\nThose are all different\nthings that I'm looking for.\n\n85\n00:04:23.510 --> 00:04:25.345\nI don't really care about redistributes,\n\n86\n00:04:25.345 --> 00:04:28.970\ncuz that's not gonna stop\nan adjacency from building, right?\n\n87\n00:04:28.970 --> 00:04:31.930\nI'm looking for statically defined\nneighbors, which I don't see any.\n\n88\n00:04:31.930 --> 00:04:35.650\nAnd I really need to look at that\ninterface which, what interface was that?\n\n89\n00:04:35.650 --> 00:04:36.650\nIt was Serial0/0/0.\n\n90\n00:04:36.650 --> 00:04:39.880\nSo I need to look at that interface and\nmake sure that it's okay.\n\n91\n00:04:42.356 --> 00:04:45.450\nAnd so far I'm seeing just normal stuff.\n\n92\n00:04:45.450 --> 00:04:48.890\nLooks like I do have PPP authentication,\nbut\n\n93\n00:04:48.890 --> 00:04:51.050\nif that fails,\nthe line itself won't come up.\n\n94\n00:04:51.050 --> 00:04:54.360\nAnd I see this neighbor,\nat least I think I see the neighbor.\n\n95\n00:04:54.360 --> 00:04:56.790\nAnd so I don't think that's the case.\n\n96\n00:04:56.790 --> 00:05:02.280\nNow, I could try and\nping across the line, I'm 192.168.255.1.\n\n97\n00:05:02.280 --> 00:05:07.470\nOn the other side, because it's a slash 30\nnetwork, I know that it has to be dot two.\n\n98\n00:05:07.470 --> 00:05:13.207\nSo if I ping 192.168.255.2,\ndo I have connectivity to it, okay?\n\n99\n00:05:13.207 --> 00:05:17.710\nAnd I'm gonna try and ping it,\nand that's interesting.\n\n100\n00:05:17.710 --> 00:05:19.560\nI'm getting a destination unreachable.\n\n101\n00:05:19.560 --> 00:05:23.360\nNow unreachable is an odd one,\ncuz it normally means that\n\n102\n00:05:23.360 --> 00:05:26.120\nI didn't have a direct connection so\nI went through some kind of router.\n\n103\n00:05:26.120 --> 00:05:27.270\nWell, I am the router.\n\n104\n00:05:27.270 --> 00:05:30.670\nAnd so that means that I didn't\nhave a route to get there.\n\n105\n00:05:30.670 --> 00:05:31.740\nWell, that's odd.\n\n106\n00:05:31.740 --> 00:05:33.380\nI'm directly connected, aren't I?\n\n107\n00:05:33.380 --> 00:05:40.550\nIf I do a show ip route, 192.168.255.2,\nI've got a route for it.\n\n108\n00:05:40.550 --> 00:05:42.430\nAnd it says I'm directly connected, so\n\n109\n00:05:42.430 --> 00:05:45.030\nI should be able to cross\nright over that link.\n\n110\n00:05:45.030 --> 00:05:48.407\nAnd I'm directly connected\nvia Serial0/0/0.\n\n111\n00:05:48.407 --> 00:05:50.215\nI should be good, right?\n\n112\n00:05:50.215 --> 00:05:52.550\nThat interface is up, isn't it?\n\n113\n00:05:52.550 --> 00:05:56.670\nIf I do a show ip interface brief,\nthat interface should be up.\n\n114\n00:05:56.670 --> 00:05:58.420\nIf it were down I wouldn't see the route.\n\n115\n00:05:58.420 --> 00:06:01.760\nAnd so here it is,\nI kinda see it in my list.\n\n116\n00:06:01.760 --> 00:06:04.310\nAnd if I look at its status\nit's showing as up up.\n\n117\n00:06:05.610 --> 00:06:08.520\nSo it's up up, but I can't ping across it?\n\n118\n00:06:08.520 --> 00:06:11.740\nThat really does seem odd, so\nlet's look at that configuration again.\n\n119\n00:06:13.490 --> 00:06:14.060\nSerial0/0/0.\n\n120\n00:06:14.060 --> 00:06:20.315\nAnd it is 192.168.255.1 is my IP,\nand I've got that subnet mask.\n\n121\n00:06:20.315 --> 00:06:23.580\nI'm gonna check the other side, make\nsure they've got the same subnet mask.\n\n122\n00:06:23.580 --> 00:06:26.265\nI also need to verify that\nmy authentication is good.\n\n123\n00:06:26.265 --> 00:06:28.580\nNow, I'm certain\nthe authentication is good,\n\n124\n00:06:28.580 --> 00:06:31.820\nbecause if it isn't,\nthe interface would be up down, right?\n\n125\n00:06:31.820 --> 00:06:34.730\nSo, in this case it's up up so\nit should be fine.\n\n126\n00:06:34.730 --> 00:06:36.850\nBut you can see my username and password.\n\n127\n00:06:36.850 --> 00:06:41.910\nAnd I just need to verify that username\nis actually set with a password of cisco,\n\n128\n00:06:41.910 --> 00:06:42.910\nwhich it is.\n\n129\n00:06:42.910 --> 00:06:45.010\nAnd then I'll go double\ncheck the other side.\n\n130\n00:06:45.010 --> 00:06:46.989\nSo I'm gonna jump over to EDGE2.\n\n131\n00:06:46.989 --> 00:06:51.770\nAnd I'm gonna run through that same\ntroubleshooting process I just did\n\n132\n00:06:51.770 --> 00:06:54.700\non EDGE1 to basically verify this guy.\n\n133\n00:06:54.700 --> 00:06:58.217\nSo I want to do a show int s0/0/0.\n\n134\n00:07:00.140 --> 00:07:02.520\nOops, well I guess I can start here.\n\n135\n00:07:02.520 --> 00:07:06.980\nI meant to do a show running config,\nbut I can see that it's up up.\n\n136\n00:07:06.980 --> 00:07:09.610\nI can get that information while\nI'm in here, so that looks fine.\n\n137\n00:07:09.610 --> 00:07:13.770\nAnd I don't see any crazy input errors,\nso that's fine.\n\n138\n00:07:13.770 --> 00:07:20.036\nIf I do a show running-config s0/0/0 or\n\n139\n00:07:20.036 --> 00:07:23.970\nint s0/0/0, I can look at the config.\n\n140\n00:07:23.970 --> 00:07:25.450\nAnd I see it's 192.168.255.2,\n\n141\n00:07:25.450 --> 00:07:30.500\nwhich is what I want with\na subnet mask that's correct.\n\n142\n00:07:30.500 --> 00:07:34.400\nI've got PPP and CHAP,\nI think I might see what our issue is.\n\n143\n00:07:34.400 --> 00:07:38.460\nI see PPP and CHAP are turned on,\nit's got cisco as that password.\n\n144\n00:07:38.460 --> 00:07:39.940\nAnd if I do a show run and\n\n145\n00:07:39.940 --> 00:07:44.100\ninclude username,\nI can verify that password is cisco also.\n\n146\n00:07:44.100 --> 00:07:46.480\nSo authentication looks like it's good and\nset up there.\n\n147\n00:07:46.480 --> 00:07:50.000\nBut I got this one extra\nline creeping up right here.\n\n148\n00:07:50.000 --> 00:07:52.560\nLooks like there's an access\nlist on the interface, okay.\n\n149\n00:07:52.560 --> 00:07:55.330\nSo, I've got an access group\nthat's saying LIMITWAN in, so\n\n150\n00:07:55.330 --> 00:07:57.510\nthere's an incoming ACL here.\n\n151\n00:07:57.510 --> 00:08:02.330\nIf you ever have an interface that's up,\nlike mine is, and you start doing pings\n\n152\n00:08:02.330 --> 00:08:05.705\nand other things and it's not working and\nyou're kind of scratching your head.\n\n153\n00:08:05.705 --> 00:08:08.520\nACLs are a great way to\ninterfere with traffic.\n\n154\n00:08:08.520 --> 00:08:10.760\nSo it could be that the interface\nis up and happy, but\n\n155\n00:08:10.760 --> 00:08:12.000\nwe're blocking traffic on it.\n\n156\n00:08:12.000 --> 00:08:14.000\nWhich is why I would get\nthose unreachable messages,\n\n157\n00:08:14.000 --> 00:08:18.670\nor why I think the interface looks\ngood but I'm not able to communicate.\n\n158\n00:08:18.670 --> 00:08:21.750\nSo let's take a look at that ACL and\nsee if we can figure out what it is or\n\n159\n00:08:21.750 --> 00:08:22.940\nwhat it's doing.\n\n160\n00:08:22.940 --> 00:08:25.010\nSo I'm gonna do a show access-list.\n\n161\n00:08:25.010 --> 00:08:26.880\nAnd here's the LIMITWAN ACL.\n\n162\n00:08:26.880 --> 00:08:28.730\nNow going back to my diagram,\n\n163\n00:08:28.730 --> 00:08:33.000\nthis is incoming traffic\non Serial0/0/0 right here.\n\n164\n00:08:33.000 --> 00:08:35.400\nSo when I did a ping\nfrom EDGE1 over to EDGE2,\n\n165\n00:08:35.400 --> 00:08:38.560\nit was incoming on this interface and\nit died.\n\n166\n00:08:38.560 --> 00:08:42.030\nAnd my neighbor relationship,\nI see the other router, so\n\n167\n00:08:42.030 --> 00:08:44.130\nit might be advertising to me.\n\n168\n00:08:44.130 --> 00:08:48.190\nBut then when I try and\ngo two-way with it, it fails, right?\n\n169\n00:08:48.190 --> 00:08:51.880\nI stay in init, I never go to two-way\nwhich means I never get to x-start.\n\n170\n00:08:51.880 --> 00:08:56.100\nWhich means I never get to a full\nadjacency, the OSPF negotiation process.\n\n171\n00:08:56.100 --> 00:09:00.754\nSo it might be that I can't talk to it but\nit's talking to me and ACL can do that, so\n\n172\n00:09:00.754 --> 00:09:03.480\nlet's see if this one is doing it.\n\n173\n00:09:03.480 --> 00:09:08.400\nSo looking at the ACL here, we've got\nthat we're permitting some TCP traffic\n\n174\n00:09:08.400 --> 00:09:12.508\nfrom a particular address 100.10.40.0.\n\n175\n00:09:12.508 --> 00:09:13.870\nI'm going to skip that line.\n\n176\n00:09:13.870 --> 00:09:15.740\nRemember that NYEDGE1 is 192.168.255.1 so\n\n177\n00:09:15.740 --> 00:09:21.750\nany line that doesn't match that I\nreally don't care about right now.\n\n178\n00:09:21.750 --> 00:09:24.160\nSo I see I'm permitting some other host.\n\n179\n00:09:24.160 --> 00:09:28.100\nI'm permitting another host,\nanother host, nothing too exciting here.\n\n180\n00:09:28.100 --> 00:09:31.730\nOh, these are promising, line 60 and 70.\n\n181\n00:09:31.730 --> 00:09:37.420\nPermit ip host 224.0.0.5 to any.\n\n182\n00:09:37.420 --> 00:09:40.202\nAnd permit ip host 224.0.0.6 to any.\n\n183\n00:09:40.202 --> 00:09:42.320\nWhy is that interesting?\n\n184\n00:09:42.320 --> 00:09:46.450\nWell OSPF uses multicast to\ncommunicate between routers and\n\n185\n00:09:46.450 --> 00:09:49.930\nit uses 224.0.0.5 and .6.\n\n186\n00:09:49.930 --> 00:09:54.620\nIt uses one to talk to any old\nneighbor for routing updates, and\n\n187\n00:09:54.620 --> 00:09:58.330\nit uses the other for\ntalking to a designated router.\n\n188\n00:09:58.330 --> 00:10:01.977\nIf you're on a multiaccess network\nyou'll have a DR and a BDR.\n\n189\n00:10:01.977 --> 00:10:06.330\nAnd you talk to the DR and the BDR through\ntheir dedicated multicast address.\n\n190\n00:10:06.330 --> 00:10:08.460\nSo there's the multicast addresses for\nOSPF.\n\n191\n00:10:08.460 --> 00:10:09.990\nAnd I can see they're being allowed.\n\n192\n00:10:09.990 --> 00:10:13.290\nI'm permitting that OSPF\ntraffic to go through, right?\n\n193\n00:10:13.290 --> 00:10:15.590\nWell, not so much.\n\n194\n00:10:15.590 --> 00:10:19.660\nIf I was, I would see some match\ncommands over here, or match numbers.\n\n195\n00:10:19.660 --> 00:10:21.210\nAnd I don't.\nSee down here on the deny,\n\n196\n00:10:21.210 --> 00:10:24.320\ndeny ip any any, 847 matches.\n\n197\n00:10:24.320 --> 00:10:26.720\nIt's blocking a lot of\ntraffic on this link, but\n\n198\n00:10:26.720 --> 00:10:29.660\nthese permits aren't matching anything.\n\n199\n00:10:29.660 --> 00:10:30.470\nWhy is that?\n\n200\n00:10:30.470 --> 00:10:33.360\nIf I know that OSPF is using\nthese multicast addresses,\n\n201\n00:10:33.360 --> 00:10:35.040\nshouldn't I see some matches here?\n\n202\n00:10:35.040 --> 00:10:39.890\nWell, when you say permit IP,\nCisco gets really literal.\n\n203\n00:10:39.890 --> 00:10:44.250\nThey're actually talking\nabout standard IP traffic.\n\n204\n00:10:44.250 --> 00:10:50.450\nOSPF is an IP routing protocol, and Cisco\ndoesn't count that as standard IP traffic.\n\n205\n00:10:50.450 --> 00:10:54.940\nSo while this line looks right,\nit's actually not right.\n\n206\n00:10:54.940 --> 00:10:57.000\nIt's not matching that OSPF traffic.\n\n207\n00:10:57.000 --> 00:10:59.300\nAnd we actually have\na different command we can use.\n\n208\n00:10:59.300 --> 00:11:03.570\nWe can say permit OSPF host blah,\nblah, blah.\n\n209\n00:11:03.570 --> 00:11:09.260\nYou can permit OSPF specifically, and\nthat is what we have to do, not IP.\n\n210\n00:11:09.260 --> 00:11:12.199\nSo these two lines look right,\nbut they're actually not.\n\n211\n00:11:12.199 --> 00:11:16.931\nAnd this next line,\npermit ip 224.0.0.0 0.0.0.225,\n\n212\n00:11:16.931 --> 00:11:20.860\nthat's permitting all sorts\nof multicast addresses.\n\n213\n00:11:20.860 --> 00:11:23.874\nBut again, no matches on it,\nit's not working.\n\n214\n00:11:23.874 --> 00:11:28.960\nSo OSPF is being blocked, ping is\nkind of falling into this same range.\n\n215\n00:11:28.960 --> 00:11:33.520\nI can do permit ICMP blah, blah,\nblah, to allow ping through, and\n\n216\n00:11:33.520 --> 00:11:36.320\nthat's not done on any of these, right?\n\n217\n00:11:36.320 --> 00:11:41.460\nNow, a permit ip any any will actually\ninclude ICMP, Cisco does that.\n\n218\n00:11:41.460 --> 00:11:45.430\nBut I've just got a deny ip any any,\nand it's logging it which is good.\n\n219\n00:11:45.430 --> 00:11:48.560\nSo, I should be able to look in the logs\nand see what's being blocked, right?\n\n220\n00:11:48.560 --> 00:11:52.360\nSo if I do a show log and\nkinda jump down to the end of it,\n\n221\n00:11:52.360 --> 00:11:54.816\nwhich I'm gonna have 847 entries.\n\n222\n00:11:54.816 --> 00:11:59.360\nWe got some HSRP authentication errors,\n\n223\n00:11:59.360 --> 00:12:01.809\nwhich was a previous\ntroubleshooting problem.\n\n224\n00:12:01.809 --> 00:12:05.790\nBut as I look down here I can\nstart to see where here's\n\n225\n00:12:05.790 --> 00:12:10.090\nthat access list LIMITWAN denied ospf,\ndenied icmp.\n\n226\n00:12:10.090 --> 00:12:12.220\nSee how they're being treated separately?\n\n227\n00:12:12.220 --> 00:12:16.840\nIt's not blocking IP,\nit's blocking OSPF, it's blocking ICMP.\n\n228\n00:12:16.840 --> 00:12:18.810\nSo I need to fix that to allow it through.\n\n229\n00:12:18.810 --> 00:12:22.640\nNow, technically I don't need to fix ICMP,\nthat's not what my problem is.\n\n230\n00:12:22.640 --> 00:12:25.550\nThe troubleshooting ticket\nspecifically just says OSPF.\n\n231\n00:12:25.550 --> 00:12:27.470\nSo I need to fix that, all right.\n\n232\n00:12:27.470 --> 00:12:31.400\nSo if I do a show access-list,\n\n233\n00:12:31.400 --> 00:12:34.068\nI need to take lines 60 and\n70 and get them out of there.\n\n234\n00:12:34.068 --> 00:12:38.400\nNow line 80, I don't know if\nthat one needs to stay or not.\n\n235\n00:12:38.400 --> 00:12:41.280\nLine 80, that might be applying to\nsome other multicast traffic for\n\n236\n00:12:41.280 --> 00:12:43.410\nsome other program, so\nI'm gonna leave it alone.\n\n237\n00:12:43.410 --> 00:12:46.780\nBut line 60 and 70 specifically apply\nto OSPF and they're just wrong.\n\n238\n00:12:46.780 --> 00:12:47.730\nSo I'm gonna get rid of them, and\n\n239\n00:12:47.730 --> 00:12:52.150\nI'm gonna replace them with\na line that will work for OSPF.\n\n240\n00:12:52.150 --> 00:12:54.919\nSo, I'm gonna get into my configuration,\nand we'll get that set.\n\n241\n00:12:54.919 --> 00:12:58.869\nSo I'll start by saying ip\n\n242\n00:12:58.869 --> 00:13:04.265\naccess-list extended LIMITWAN.\n\n243\n00:13:04.265 --> 00:13:11.270\nAnd then I'm gonna do a no 60 and a no 70,\nI'm just gonna wipe those two lines out.\n\n244\n00:13:11.270 --> 00:13:16.250\nAnd I'm gonna put in a new line 60,\nwhere I will permit ospf.\n\n245\n00:13:16.250 --> 00:13:21.710\nAnd then I could say a particular host or\nwhatever if I wanted to.\n\n246\n00:13:21.710 --> 00:13:23.880\nBut the reality is this\nis a point to point link.\n\n247\n00:13:23.880 --> 00:13:26.352\nSo I'm just gonna say,\npermit ospf any any, right?\n\n248\n00:13:26.352 --> 00:13:30.010\nI don't need to get any more specific\nthan that cuz it's point to point.\n\n249\n00:13:30.010 --> 00:13:31.840\nAnd there's nobody else on\nthe other end of the line.\n\n250\n00:13:31.840 --> 00:13:34.768\nAnd that should match the OSPF traffic.\n\n251\n00:13:34.768 --> 00:13:39.740\nNow, the ticket's not asking me to do it,\nbut if I really wanted to I could do\n\n252\n00:13:39.740 --> 00:13:44.180\na 70 permit icmp any any, and\nthat would let my pings go through.\n\n253\n00:13:44.180 --> 00:13:47.120\nOn the exam I wouldn't do that,\nbecause it's not asking me to fix that.\n\n254\n00:13:47.120 --> 00:13:48.820\nI don't want to do more than I have to.\n\n255\n00:13:48.820 --> 00:13:50.000\nBut in real life I probably would.\n\n256\n00:13:50.000 --> 00:13:52.720\nSo I'll go ahead and put that in there,\njust so I can test the link and\n\n257\n00:13:52.720 --> 00:13:53.610\nmake sure that it's working.\n\n258\n00:13:54.820 --> 00:13:56.870\nNow that that's done,\nI can jump back to EDGE1.\n\n259\n00:13:58.018 --> 00:14:03.270\nAnd on EDGE1 I can try and ping the other\nside which wasn't working for me earlier.\n\n260\n00:14:04.510 --> 00:14:07.090\nAnd now if I try and ping, it does.\n\n261\n00:14:07.090 --> 00:14:11.660\nAnd if I do a show ip opsf neighbor,\nI saw the neighbor earlier,\n\n262\n00:14:11.660 --> 00:14:15.060\nit's just stuck in the init state,\nnow it's gone full.\n\n263\n00:14:15.060 --> 00:14:17.284\nSo in this case it looks like that\naccess list was what was blocking us.\n\n264\n00:14:17.284 --> 00:14:19.890\nNow that that's fixed, we're in business.\n\n265\n00:14:19.890 --> 00:14:21.070\nSo we just had to remember,\n\n266\n00:14:21.070 --> 00:14:25.560\nhey, it's great that they approved\nthose multicast addresses specifically.\n\n267\n00:14:25.560 --> 00:14:27.310\nBut ACLs don't treat OSPF that way, and\n\n268\n00:14:27.310 --> 00:14:29.650\nthey don't treat the other routing\nprotocols that way either.\n\n269\n00:14:29.650 --> 00:14:33.890\nEIGRP, RIP, BGP,\nthey all have access list names,\n\n270\n00:14:33.890 --> 00:14:36.770\nprotocol names that you can use, and\nyou need to to allow them through.\n\n271\n00:14:36.770 --> 00:14:39.670\nOnce that was fixed, now we've got\nour adjacency and we're in business.\n\n272\n00:14:39.670 --> 00:14:42.310\nSo troubleshooting ticket number six,\nresolved.\n\n273\n00:14:42.310 --> 00:14:43.750\nPut a check mark on it.\n\n274\n00:14:43.750 --> 00:14:45.755\nAnd we're ready to move\non to number seven.\n\n275\n00:14:45.755 --> 00:14:53.759\n[MUSIC]\n\n",
          "vimeoId": "151013757"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #7` from set #4. The trouble ticket states that \"You are unable to ping 172.16.16.1 from PLABCSCO01 \"",
          "length": "1494",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-4-7-set_4_issue_7-120215-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-4-7-set_4_issue_7-120215-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-4-7-set_4_issue_7-120215-1-sm.jpg",
          "title": "Set 4 Issue 7",
          "transcript": "WEBVTT\n\n1\n00:00:00.008 --> 00:00:04.796\n[MUSIC]\n\n2\n00:00:08.796 --> 00:00:13.130\nIn this video,\nwe're gonna take a look at Set 4 Issue 7.\n\n3\n00:00:13.130 --> 00:00:16.129\nAnd it looks like we've got a reachability\nissue on this one, those are always fun.\n\n4\n00:00:16.129 --> 00:00:19.678\nThe troubleshooting\nticket reads like this,\n\n5\n00:00:19.678 --> 00:00:25.504\nit says you are unable to ping\n172.16.16.1 from PLABCSCO01.\n\n6\n00:00:25.504 --> 00:00:28.284\nWell, before we dive into troubleshooting\nthat, let's look at our topology and\n\n7\n00:00:28.284 --> 00:00:30.110\nget a handle on what we're talking about.\n\n8\n00:00:30.110 --> 00:00:35.795\nThe server in question is our good old\ntrusty PLABCSCO01 right down here,\n\n9\n00:00:35.795 --> 00:00:40.410\n192.168.16.10, and\nthe network in question that we're\n\n10\n00:00:40.410 --> 00:00:45.750\ntrying to get to is 172.16.16.1,\nwhich is this guy right up here.\n\n11\n00:00:45.750 --> 00:00:48.346\nAnd in fact,\nif you remember from the previous sets,\n\n12\n00:00:48.346 --> 00:00:55.010\n172.16.16.1 is actually\nthe external IP of NYWAN1.\n\n13\n00:00:55.010 --> 00:00:59.440\nSo it's saying that I'm crossing my\nnetwork, jumping through all these devices\n\n14\n00:00:59.440 --> 00:01:02.880\non the way over, and I'm not able\nto ping the external interface.\n\n15\n00:01:02.880 --> 00:01:06.260\nNow, we've seen troubleshooting\ntickets like this in other sets, and\n\n16\n00:01:06.260 --> 00:01:10.440\nremember that there's more than one\npossible cause for something like this.\n\n17\n00:01:10.440 --> 00:01:12.690\nWe could have access control\nlists that are blocking us,\n\n18\n00:01:12.690 --> 00:01:15.095\nwe could have bad nat rolls in place,\n\n19\n00:01:15.095 --> 00:01:18.360\nwe could be missing routes,\nwe could have routes we shouldn't have,\n\n20\n00:01:18.360 --> 00:01:21.425\nstatic routes go in the wrong direction,\nwe could have interfaces being down.\n\n21\n00:01:21.425 --> 00:01:24.600\nThere's a whole ton of things\nthat could cause a problem.\n\n22\n00:01:24.600 --> 00:01:28.520\nAnd so, when I deal with a troubleshooting\nissue like this, one that covers multiple\n\n23\n00:01:28.520 --> 00:01:31.950\ndevices, this is where I normally\nstart with that trace route.\n\n24\n00:01:31.950 --> 00:01:35.450\nI do a trace route to find out\nwhere my traffic stops, and\n\n25\n00:01:35.450 --> 00:01:38.720\nthen I can troubleshoot from there, and\nkind of figure out where the problem is.\n\n26\n00:01:38.720 --> 00:01:39.862\nSo, let's do that.\n\n27\n00:01:39.862 --> 00:01:41.730\nI'm gonna jump over to PLABCSCO01, and\n\n28\n00:01:41.730 --> 00:01:45.350\nI'm gonna do a trace route to\nthe external IP on NYWAN1.\n\n29\n00:01:45.350 --> 00:01:46.680\nAnd we'll see what happens.\n\n30\n00:01:46.680 --> 00:01:48.921\nActually, you know what,\nI'm gonna backtrack.\n\n31\n00:01:48.921 --> 00:01:52.004\nJust to be safe,\nbecause we are in set number four,\n\n32\n00:01:52.004 --> 00:01:56.254\nI wanna make sure that this\nguy is actually 172.16.16.1.\n\n33\n00:01:56.254 --> 00:01:57.277\nI'm pretty sure it is, but\n\n34\n00:01:57.277 --> 00:01:59.462\nI'm gonna verify that first\nbefore we do the trace route.\n\n35\n00:01:59.462 --> 00:02:03.993\nSo, let me jump over to NYWAN1,\nand on this router,\n\n36\n00:02:03.993 --> 00:02:08.046\nI'm just gonna do a quick show_ip_int_br.\n\n37\n00:02:08.046 --> 00:02:12.921\nAnd I'm looking for that 172.16.16.1\naddress that's right there, so we're good.\n\n38\n00:02:12.921 --> 00:02:15.540\nAll right, now I'm gonna go do that\ntrace route I was talking about.\n\n39\n00:02:15.540 --> 00:02:19.480\nSo I'm gonna jump over to this Windows\nserver, and I'll just fire open a Cmd\n\n40\n00:02:19.480 --> 00:02:24.270\nprompt here, and let's do a little trace\nroute action and see what we can find.\n\n41\n00:02:24.270 --> 00:02:29.870\nSo I'll do a quick trace\nroute to 172.16.16.1,\n\n42\n00:02:29.870 --> 00:02:32.080\nand we're gonna see where it stops, right?\n\n43\n00:02:32.080 --> 00:02:34.420\nIt's gonna start passing\nthrough our equipment and\n\n44\n00:02:34.420 --> 00:02:35.970\nwe'll see where our dead end is.\n\n45\n00:02:35.970 --> 00:02:38.620\nThe first hop should be my default\ngateway, which is 192.168.16.1, but\n\n46\n00:02:38.620 --> 00:02:42.470\nremember that's an HSRP address.\n\n47\n00:02:42.470 --> 00:02:46.850\nSo, what I'll see here is the unique\nIP of the router that I got to,\n\n48\n00:02:46.850 --> 00:02:48.400\nin this case is .3.\n\n49\n00:02:48.400 --> 00:02:49.550\nThat's NYCORE2.\n\n50\n00:02:49.550 --> 00:02:53.510\nAnd then after that,\nI get a response from 192.168.16.3,\n\n51\n00:02:53.510 --> 00:02:56.970\nDestination host unreachable, all right.\n\n52\n00:02:58.130 --> 00:03:01.080\nSo, we stopped pretty\nearly in our journey.\n\n53\n00:03:01.080 --> 00:03:05.670\nBasically, I jumped from my\nserver over to NYACCESS1, and\n\n54\n00:03:05.670 --> 00:03:08.670\nfrom NYACCESS1 I jumped up to NYCORE2,\nright?\n\n55\n00:03:08.670 --> 00:03:12.330\nAnd then NYCORE2 is the one that\nreported to me that it couldn't get to\n\n56\n00:03:12.330 --> 00:03:12.940\nthe destination.\n\n57\n00:03:12.940 --> 00:03:15.480\nSo that's where I'm gonna\nstart my examination.\n\n58\n00:03:15.480 --> 00:03:19.070\nNow, understand that\nwhen a trace route fails,\n\n59\n00:03:19.070 --> 00:03:21.630\nit's really just narrowing\nyou down to two devices.\n\n60\n00:03:21.630 --> 00:03:25.980\nEither the device it's stopped at or\nwhoever's the next hop.\n\n61\n00:03:25.980 --> 00:03:28.240\nWell, I don't know who the next hop is for\nNYCORE2.\n\n62\n00:03:28.240 --> 00:03:32.430\nIt could be to go up here to NYEDGE2 and\nover that way.\n\n63\n00:03:32.430 --> 00:03:35.200\nIt could be that it goes\ndirectly to NYEDGE1 and over.\n\n64\n00:03:35.200 --> 00:03:38.360\nSo, either of these edge\nrouters can be involved.\n\n65\n00:03:38.360 --> 00:03:40.190\nSo to make things easy,\nI just won't pick either, [LAUGH] and\n\n66\n00:03:40.190 --> 00:03:43.500\nI'll start with NYCORE2 and I'll look\nthere and see what I can find out, and\n\n67\n00:03:43.500 --> 00:03:45.240\nwe'll figure out the next hop from there.\n\n68\n00:03:45.240 --> 00:03:46.070\nAll right.\nSo\n\n69\n00:03:46.070 --> 00:03:51.020\nI'll jump over to NYCORE2, and\nwe'll take a look at what's going on.\n\n70\n00:03:51.020 --> 00:03:53.220\nIt's saying,\nDestination host unreachable, so\n\n71\n00:03:53.220 --> 00:03:55.380\nthat's kind of\nan interesting error to get.\n\n72\n00:03:55.380 --> 00:03:58.879\nIt means that it had no way to get there,\nright.\n\n73\n00:03:58.879 --> 00:04:03.567\nSo, on this guy,\nif I do a show_ip_route for\n\n74\n00:04:03.567 --> 00:04:08.630\n172.16.16.1, no network in table.\n\n75\n00:04:08.630 --> 00:04:12.794\nSo, my default gateway doesn't have\na route to get there, so traffic dies\n\n76\n00:04:12.794 --> 00:04:16.840\nin line, I don't get anywhere,\nunless I have a gateway of last resort.\n\n77\n00:04:16.840 --> 00:04:18.640\nSo let me do a show_ip_route and\n\n78\n00:04:18.640 --> 00:04:20.840\nsee if I have a gateway of last resort,\nand I don't.\n\n79\n00:04:20.840 --> 00:04:25.850\nGateway of last resort not set, so I don't\nhave a route, this is where we stop.\n\n80\n00:04:25.850 --> 00:04:28.588\nSo remember how I said I don't\nknow who the next hop is?\n\n81\n00:04:28.588 --> 00:04:29.461\nWell, I don't.\n\n82\n00:04:29.461 --> 00:04:32.744\nI don't know who the next hop is, and I'm\nnot gonna find out from here either cuz\n\n83\n00:04:32.744 --> 00:04:35.270\nthis router doesn't know\nwho the next hop is either.\n\n84\n00:04:35.270 --> 00:04:37.820\nSo now I kind of have\nto guess a little bit.\n\n85\n00:04:37.820 --> 00:04:40.070\nSo let's go back to the topology, and\n\n86\n00:04:40.070 --> 00:04:44.530\nlooking at the topology here,\nwho do we think the next hop should be?\n\n87\n00:04:44.530 --> 00:04:48.740\nWell, I've got NYCORE2,\nNYCORE1, and NYEDGE1.\n\n88\n00:04:48.740 --> 00:04:52.450\nYou will remember from the previous sets,\nthey're all running HSRP.\n\n89\n00:04:52.450 --> 00:04:57.129\nThey all have interfaces\non the 192.168.16 network.\n\n90\n00:04:57.129 --> 00:05:00.170\nThey've actually got interfaces\non several different VLANs.\n\n91\n00:05:00.170 --> 00:05:04.700\nThey should be seeing each other and\nthey should all be in OSPF Area 0.\n\n92\n00:05:04.700 --> 00:05:08.420\nAssuming that's true,\nthey should be learning about\n\n93\n00:05:08.420 --> 00:05:13.720\nthe 172.16.16 network from NYEDGE1,\nsince it's sitting on the border.\n\n94\n00:05:13.720 --> 00:05:16.370\nRegardless of whether I learned\nit through EDGE2 like that or\n\n95\n00:05:16.370 --> 00:05:19.130\njust straight from EDGE1,\nwhich is how it should be, either way,\n\n96\n00:05:19.130 --> 00:05:21.710\nI should be learning\nthat route from NYEDGE1.\n\n97\n00:05:21.710 --> 00:05:23.300\nLet's see if NYEDGE1 has the route.\n\n98\n00:05:23.300 --> 00:05:25.170\nMaybe it doesn't have the route either and\n\n99\n00:05:25.170 --> 00:05:26.970\nwe might need to go further\nout of our networks.\n\n100\n00:05:26.970 --> 00:05:31.587\nSo I'm gonna jump to NYEDGE1, and\nlet's see what we've got there.\n\n101\n00:05:31.587 --> 00:05:37.587\nSo on NYEDGE1, I'm gonna start with just\nshow_ip_route for that missing network.\n\n102\n00:05:37.587 --> 00:05:42.388\nSo show IP route 172.16.16.1.\n\n103\n00:05:42.388 --> 00:05:47.097\nAnd it doesn't have a route in its routing\ntable, so it's not able to get there.\n\n104\n00:05:47.097 --> 00:05:51.837\nAnd if I look for a gateway of last\nresorts, it doesn't have one either.\n\n105\n00:05:51.837 --> 00:05:54.671\nSo, no Gateway of last resort,\nit's got no way to get to that network.\n\n106\n00:05:54.671 --> 00:05:58.814\nSo, going back to the topology diagram,\nNYEDGE1,\n\n107\n00:05:58.814 --> 00:06:01.740\nhas no way to get to that network.\n\n108\n00:06:01.740 --> 00:06:04.010\nWell, the next hop is NYWAN1.\n\n109\n00:06:04.010 --> 00:06:07.380\nNYWAN1 should be telling us about\nthat network, maybe it isn't.\n\n110\n00:06:07.380 --> 00:06:13.000\nWe're running EIGRP 500 here, so we\nshould be learning about it from NYWAN1.\n\n111\n00:06:13.000 --> 00:06:13.920\nLet's go find out why.\n\n112\n00:06:15.710 --> 00:06:17.546\nSo if I go to NYWAN1.\n\n113\n00:06:20.797 --> 00:06:24.880\nI can do a show_ip_route 172.16.16.1.\n\n114\n00:06:24.880 --> 00:06:27.350\nNow, I should be directly connected,\nand I am.\n\n115\n00:06:27.350 --> 00:06:30.190\nSo I fully expected to\nhave the route there.\n\n116\n00:06:30.190 --> 00:06:34.060\nBut why isn't this guy telling\nus about the missing route?\n\n117\n00:06:34.060 --> 00:06:36.630\nWhy isn't it telling us\nthat this route exists?\n\n118\n00:06:36.630 --> 00:06:39.270\nWell, in my diagram we\nsaw that was EIGRP 500.\n\n119\n00:06:39.270 --> 00:06:43.880\nSo let's take a look at\nthe configuration for EIGRP 500.\n\n120\n00:06:43.880 --> 00:06:47.984\nSo I'll pull up the configuration for\n\n121\n00:06:47.984 --> 00:06:51.837\nEIGRP, and here's EIGRP 500.\n\n122\n00:06:51.837 --> 00:06:54.420\nNotice, I actually have\ntwo autonomous systems.\n\n123\n00:06:54.420 --> 00:07:00.545\nI've got eigrp 80 down here and\nEIGRP_INTERNAL up here.\n\n124\n00:07:00.545 --> 00:07:03.461\nIt's got a name instead of a number,\nbut if I look inside of it,\n\n125\n00:07:03.461 --> 00:07:06.840\nI'll see address-family ipv4\nunicast autonomous-system 500.\n\n126\n00:07:06.840 --> 00:07:08.380\nSo that's EIGRP 500 right there.\n\n127\n00:07:10.360 --> 00:07:13.810\nIt should be advertising\nthe 172.16 network.\n\n128\n00:07:13.810 --> 00:07:18.524\nWell, if I look down here under eigrp 80,\nI can see network 172.16,\n\n129\n00:07:18.524 --> 00:07:23.060\nright, so it's down there in\nthe network statement for eigrp 80.\n\n130\n00:07:23.060 --> 00:07:26.710\nLooking up here, it's not in EIGRP 500,\n\n131\n00:07:26.710 --> 00:07:30.270\nso it's not natively in\nthat autonomous system.\n\n132\n00:07:30.270 --> 00:07:32.280\nBut, I'm redistributing.\n\n133\n00:07:32.280 --> 00:07:37.570\nSo right here,\nredistribute eigrp 800 with a metric and\n\n134\n00:07:37.570 --> 00:07:39.940\na route map specifying what's allowed.\n\n135\n00:07:39.940 --> 00:07:40.879\nOkay?\n\n136\n00:07:40.879 --> 00:07:44.898\nSo that route map might be excluding\nour network from coming in, and\n\n137\n00:07:44.898 --> 00:07:47.379\nthat'll cause this not to work, right?\n\n138\n00:07:47.379 --> 00:07:55.138\nLooking down here I can clearly\nsee network 172.16.16.0 0.0.0.255.\n\n139\n00:07:55.138 --> 00:07:59.410\nThat network is functioning\ninside of EIGRP80.\n\n140\n00:07:59.410 --> 00:08:03.382\n[LAUGH] So,\nit is functioning inside EIGRP 80.\n\n141\n00:08:03.382 --> 00:08:06.710\nI don't even need to look at the route-map\nnow, I just spotted the problem.\n\n142\n00:08:06.710 --> 00:08:11.130\nWhen you look at the redistribute,\nredistribute EIGRP 800, but\n\n143\n00:08:11.130 --> 00:08:15.210\nwhen I look down here, this is EIGRP 80.\n\n144\n00:08:15.210 --> 00:08:18.090\nThey almost got me there,\nbecause the numbers are really close.\n\n145\n00:08:18.090 --> 00:08:20.690\nI clearly see the network.\n\n146\n00:08:20.690 --> 00:08:23.560\nIn EIGRP 80, it's the wrong number.\n\n147\n00:08:23.560 --> 00:08:25.920\nWell, one of these is wrong,\neither this number is wrong and\n\n148\n00:08:25.920 --> 00:08:29.860\nI'm in the wrong autonomous system or\nthe number is wrong in the redistribute.\n\n149\n00:08:29.860 --> 00:08:32.531\nLet's hope it's the redistribute\ncuz that's easier to fix.\n\n150\n00:08:32.531 --> 00:08:33.959\n[LAUGH] We'll see.\n\n151\n00:08:33.959 --> 00:08:37.375\nIf I go to my topology,\ndarn it it's never the easy one.\n\n152\n00:08:37.375 --> 00:08:39.950\nSo it is supposed to be EIGRP 800.\n\n153\n00:08:39.950 --> 00:08:44.500\nAll right, so it looks like whoever set\nup NYWAN1 just was going a little too\n\n154\n00:08:44.500 --> 00:08:49.440\nfast and left out a 0 and so when they\ncreated that EIGRP autonomous system,\n\n155\n00:08:49.440 --> 00:08:52.120\nthey defined it as 80 instead of 800.\n\n156\n00:08:52.120 --> 00:08:55.730\nUnfortunately, there's really no way for\nme to change that number.\n\n157\n00:08:55.730 --> 00:08:58.410\nI can't just change\nthe autonomous system number.\n\n158\n00:08:58.410 --> 00:09:02.300\nI actually have to delete it which\ndeletes all of this configuration and\n\n159\n00:09:02.300 --> 00:09:03.640\nthen I have to put it back in.\n\n160\n00:09:03.640 --> 00:09:07.790\nSo that kind of stinks, but\nI guess there are worse things in life,\n\n161\n00:09:07.790 --> 00:09:10.000\nthis isn't such a bad problem\nat the end of the day.\n\n162\n00:09:10.000 --> 00:09:13.630\nSo let's get in here and fix that so\nwe've got the right number.\n\n163\n00:09:13.630 --> 00:09:17.741\nSo the first thing I'm gonna do is\nI'm just gonna do a quick show run\n\n164\n00:09:17.741 --> 00:09:20.110\nsection EIGRP.\n\n165\n00:09:20.110 --> 00:09:22.590\nI want to get that fresh on my screen so\n\n166\n00:09:22.590 --> 00:09:24.570\nI can just retype\nthe commands as I see them.\n\n167\n00:09:24.570 --> 00:09:26.370\nIn real life land I'd copy and\npaste them but\n\n168\n00:09:26.370 --> 00:09:28.380\nthis user interface I'm using\ndoesn't like that very much.\n\n169\n00:09:28.380 --> 00:09:32.470\nSo what I'm going to do\nis a no router EIGRP 80.\n\n170\n00:09:32.470 --> 00:09:35.570\nSo I just killed off that autonomous\nsystem 80 which never really\n\n171\n00:09:35.570 --> 00:09:37.060\nexisted anyway.\n\n172\n00:09:37.060 --> 00:09:39.050\nAnd then I'm gonna say, router EIGRP 800,\n\n173\n00:09:39.050 --> 00:09:42.210\nso now we are creating\nautonomous system 800.\n\n174\n00:09:42.210 --> 00:09:47.830\nAnd I can start to put in the various\nnetworks that we want to advertise.\n\n175\n00:09:47.830 --> 00:09:51.040\nAnd I'm just gonna mimic\nexactly what was done up top.\n\n176\n00:09:51.040 --> 00:09:53.980\nI know some commands we could use\nto kind of optimize this, but\n\n177\n00:09:53.980 --> 00:09:54.800\nI'm not gonna bother.\n\n178\n00:09:54.800 --> 00:09:57.680\nI just wanna put it back in exactly\nthe way that they've got it.\n\n179\n00:09:57.680 --> 00:09:59.070\nBecause they may have a reason for\n\n180\n00:09:59.070 --> 00:10:01.720\nsome of these things being\nset the way that they are.\n\n181\n00:10:01.720 --> 00:10:04.590\nSo we will just plug those in.\n\n182\n00:10:04.590 --> 00:10:09.270\nAnd, whoops, now I get a syntax error\nbecause I forgot to say network.\n\n183\n00:10:09.270 --> 00:10:11.110\nAnd let's see, we've got a redistribute.\n\n184\n00:10:12.930 --> 00:10:14.930\nI see some adjacencies\nstarting to come up.\n\n185\n00:10:14.930 --> 00:10:18.060\nI never saw adjacencies go down\nwhen I removed the EIGRP 80 cuz\n\n186\n00:10:18.060 --> 00:10:20.210\nit never existed in the first place,\nright?\n\n187\n00:10:20.210 --> 00:10:26.060\nSo I'm going to do this redistribute and\nwe'll get the metrics in here.\n\n188\n00:10:26.060 --> 00:10:30.890\nYou know the metrics are always nice and\nlong so this'll wrap around my screen.\n\n189\n00:10:30.890 --> 00:10:32.520\nWe'll get that in.\n\n190\n00:10:32.520 --> 00:10:37.978\nAnd then I just have to set one\npassive interface which I can't spell.\n\n191\n00:10:37.978 --> 00:10:40.420\nWhich was serial 000.256.\n\n192\n00:10:40.420 --> 00:10:46.820\nSo we'll just punch that one in.\n\n193\n00:10:46.820 --> 00:10:48.100\nThere we go.\n\n194\n00:10:48.100 --> 00:10:52.190\nAll right, so now that I've got\nsome passive interfaces defined.\n\n195\n00:10:52.190 --> 00:10:53.930\nI got that configuration\nput back in place,\n\n196\n00:10:53.930 --> 00:10:58.460\nI can verify it by looking\nat my EIGRP config.\n\n197\n00:10:58.460 --> 00:11:01.360\nAnd what I should see is that\nit looks exactly the same except\n\n198\n00:11:01.360 --> 00:11:02.640\nnow I have EIGRP 800.\n\n199\n00:11:02.640 --> 00:11:06.100\nKind of pain when you\ngotta redo that AS number.\n\n200\n00:11:06.100 --> 00:11:08.980\nBut now,\nthis redistribute command should match and\n\n201\n00:11:08.980 --> 00:11:12.780\nI should start advertising that network\nout assuming everything's done correctly.\n\n202\n00:11:12.780 --> 00:11:15.130\nI do still have that route\nmap that I haven't looked at.\n\n203\n00:11:15.130 --> 00:11:17.210\nIn theory,\nthe route map could be blocking it, so\n\n204\n00:11:17.210 --> 00:11:19.810\nI'm just gonna double check\nthat route map real quick.\n\n205\n00:11:19.810 --> 00:11:26.510\nI'll do a show route dash map allowed,\nand here's the route map.\n\n206\n00:11:26.510 --> 00:11:30.280\nIt's got a match clause that it's matching\nan access list called allowed, and\n\n207\n00:11:30.280 --> 00:11:33.500\nthen it's just permitting those,\nso I need to look at that ACL.\n\n208\n00:11:33.500 --> 00:11:38.170\nSo I'll do a show access\ndash list allowed, and\n\n209\n00:11:38.170 --> 00:11:40.910\nit's gonna permit IP any any,\nthat's a very useful list.\n\n210\n00:11:40.910 --> 00:11:43.860\nSo basically this round map is doing\nabsolutely nothing, it's just allowing\n\n211\n00:11:43.860 --> 00:11:46.350\neverything through, you might as well not\nhave the round map in the first place.\n\n212\n00:11:46.350 --> 00:11:50.690\nSo that one's just a red herring,\nit was put there to possibly trip us up.\n\n213\n00:11:50.690 --> 00:11:54.820\nIn this case we're fine, so\nnow I need to see if this is working, so\n\n214\n00:11:54.820 --> 00:11:57.680\nI'm gonna jump out to NYEDGE1.\n\n215\n00:11:57.680 --> 00:12:03.705\nAnd NYEDGE1 did not have a route for\n172.16.16.1 earlier.\n\n216\n00:12:03.705 --> 00:12:08.840\nAnd if I do that show IP route\ncommand now, now I do have a route.\n\n217\n00:12:08.840 --> 00:12:10.370\nAnd I could walk back through the network.\n\n218\n00:12:10.370 --> 00:12:13.550\nI'm gonna jump all the way back to\nCORE 2 kind of where we started, and\n\n219\n00:12:13.550 --> 00:12:16.050\nit's another one that didn't\nhave that route before.\n\n220\n00:12:16.050 --> 00:12:18.640\nAnd now, whoops, that's not what I wanted.\n\n221\n00:12:18.640 --> 00:12:22.330\nNow if I re-run that command,\nI can see it does have a route.\n\n222\n00:12:22.330 --> 00:12:25.420\nSo, it looks like we're learning it,\nlet's jump back to the original host and\n\n223\n00:12:25.420 --> 00:12:26.810\nsee if it can ping.\n\n224\n00:12:29.100 --> 00:12:32.510\nSo it wasn't able to ping before,\nor I tried a trace route, right?\n\n225\n00:12:32.510 --> 00:12:34.080\nI'll do the trace route again, and\n\n226\n00:12:34.080 --> 00:12:37.100\nthen this time,\nwe should see it move all the way through.\n\n227\n00:12:37.100 --> 00:12:40.280\nNow, the reason I wanna test this,\neven though I know the route is there,\n\n228\n00:12:40.280 --> 00:12:44.700\nis I know the routes made it across,\nbut it is still possible that I've got\n\n229\n00:12:44.700 --> 00:12:46.630\nunidirectional routing or\nasynchronous routing.\n\n230\n00:12:46.630 --> 00:12:48.080\nSo there could be other problems.\n\n231\n00:12:48.080 --> 00:12:49.280\nSo I just want to do a test here.\n\n232\n00:12:49.280 --> 00:12:53.150\nMake sure that I do get all the way across\nthis link and get to the other side.\n\n233\n00:12:53.150 --> 00:12:56.520\nAnd if we do this problem will\njust have turned out to be a wrong\n\n234\n00:12:56.520 --> 00:12:58.100\nautonomous system number.\n\n235\n00:12:58.100 --> 00:13:00.610\nSo this is the slowest trace route ever.\n\n236\n00:13:00.610 --> 00:13:05.410\nLooks like I made it pretty far, but\nsomething's happening there at the end.\n\n237\n00:13:05.410 --> 00:13:07.080\nNow I'm using trace route, and\n\n238\n00:13:07.080 --> 00:13:09.960\nsometimes a trace route can be\nblocked when a ping wouldn't.\n\n239\n00:13:09.960 --> 00:13:12.800\nAnd the exam question here\nis telling me to use ping.\n\n240\n00:13:12.800 --> 00:13:16.650\nSo let me switch out and use ping,\nand see if I get that same issue.\n\n241\n00:13:16.650 --> 00:13:21.710\nIf I do, Well,\nthen I still have another problem, okay.\n\n242\n00:13:21.710 --> 00:13:23.520\nI did fix one problem, definintely.\n\n243\n00:13:23.520 --> 00:13:26.820\nI didn't know how to get to that network,\nbut now I do.\n\n244\n00:13:26.820 --> 00:13:30.187\nNow I know how to get to the network and\nI'm getting a request timed out, so\n\n245\n00:13:30.187 --> 00:13:31.575\nwhy is that?\n\n246\n00:13:31.575 --> 00:13:34.505\nWell, I fixed the way out.\n\n247\n00:13:34.505 --> 00:13:37.515\nI could have a problem with\nthe way back in, all right?\n\n248\n00:13:37.515 --> 00:13:42.395\nSo I need to see does that router,\ndoes NYEDGE1 or\n\n249\n00:13:42.395 --> 00:13:46.735\nNYWAN1, does NYWAN1 have\na route to get back to me.\n\n250\n00:13:46.735 --> 00:13:51.655\nTo get back to this server,\nthe 192.168.16.10 server.\n\n251\n00:13:51.655 --> 00:13:53.210\nSo we'll find out.\n\n252\n00:13:53.210 --> 00:13:57.220\nLet's jump all the way out to NYWAN1.\n\n253\n00:13:57.220 --> 00:14:00.753\nSo going back to the topology, I'm jumping\nway back out there to the edge here,\n\n254\n00:14:00.753 --> 00:14:02.511\nthis guy is plugged into that network.\n\n255\n00:14:02.511 --> 00:14:05.136\nAnd I just wanna see if he has a route for\nthat.\n\n256\n00:14:05.136 --> 00:14:13.150\nSo, I can do a show IP route\n192.168.10.16.10, that's my server.\n\n257\n00:14:13.150 --> 00:14:14.056\nWe'll see if we have a route.\n\n258\n00:14:14.056 --> 00:14:19.710\nNetwork on table, okay so we don't have\na return route to get back to that one.\n\n259\n00:14:19.710 --> 00:14:21.460\nAnd if I do a show IP route,\n\n260\n00:14:21.460 --> 00:14:25.550\nlet see if I have a gateway of\nlast resort, and I do not, right?\n\n261\n00:14:25.550 --> 00:14:26.830\nSo, I don't have a route.\n\n262\n00:14:26.830 --> 00:14:28.110\nI can't get there.\n\n263\n00:14:28.110 --> 00:14:30.250\nThat's gonna be my problem,\nI don't have a return trip.\n\n264\n00:14:30.250 --> 00:14:32.660\nSo, let's double check that.\n\n265\n00:14:32.660 --> 00:14:36.930\nGoing back to our topology\nNYWAN1 only has one way\n\n266\n00:14:36.930 --> 00:14:40.800\nto get to 192.168.10 network and\nthat's from NYEDGE1.\n\n267\n00:14:40.800 --> 00:14:44.810\nNYEDGE1 should be telling us\nabout that network and we're not.\n\n268\n00:14:44.810 --> 00:14:46.900\nWe're not hearing it in EIGRP 500.\n\n269\n00:14:46.900 --> 00:14:49.760\nNow, it's possible we've got\na route map or prefixed list or\n\n270\n00:14:49.760 --> 00:14:52.670\nsomething filtering\nincoming routes on NYWAN1.\n\n271\n00:14:52.670 --> 00:14:54.680\nAnd we can double check,\nI don't recall seeing one but\n\n272\n00:14:54.680 --> 00:14:55.820\nwe'll check just to be safe.\n\n273\n00:14:57.110 --> 00:14:59.900\nSo I'm gonna look at the EIGRP\nconfiguration on this guy.\n\n274\n00:15:01.270 --> 00:15:04.710\nSo I'll do a quick show run section EIGRP.\n\n275\n00:15:06.450 --> 00:15:08.470\nAnd what I'm looking is an EIGRP 500.\n\n276\n00:15:08.470 --> 00:15:12.620\nI'm just looking to see if\nI have any prefixed list or\n\n277\n00:15:12.620 --> 00:15:15.330\nanything like that and\nI don't see anything on here.\n\n278\n00:15:15.330 --> 00:15:18.630\nAnd I guess potentially there could\nbe something on the interface itself,\n\n279\n00:15:18.630 --> 00:15:20.230\nlike an access list.\n\n280\n00:15:20.230 --> 00:15:24.750\nLet's look on that serial 010,\nso if I do a show-run for\n\n281\n00:15:24.750 --> 00:15:26.900\ninterface serial 010, no ACLs.\n\n282\n00:15:28.470 --> 00:15:32.396\nAll right, so it doesn't look like we're\nblocking anything coming in from EIGRP\n\n283\n00:15:32.396 --> 00:15:39.970\n500, let's go look at NYEDGE1 and\nsee if it's just not advertising it to us.\n\n284\n00:15:39.970 --> 00:15:44.990\nSo on EDGE1 I'm going to do a show run and\n\n285\n00:15:44.990 --> 00:15:51.300\npull up the EIGRP section and I'm looking\nat autonomous system 500 right here.\n\n286\n00:15:51.300 --> 00:15:56.276\nAnd I'm trying to figure out why it's not\ntelling me about the 192.168.16 network.\n\n287\n00:15:56.276 --> 00:15:58.415\nAnd as I look down the line here,\n\n288\n00:15:58.415 --> 00:16:03.496\nI see that it's got the interface that\npoints to NYWAN1 is here and active.\n\n289\n00:16:03.496 --> 00:16:06.701\nBut that's the only interface\nthat's active in EIGRP,\n\n290\n00:16:06.701 --> 00:16:09.830\nthe rest of its routes\nare coming from OSPF.\n\n291\n00:16:09.830 --> 00:16:14.010\nSo I've got to redistribute here,\nredistribute OSPF 100 with a metric that\n\n292\n00:16:14.010 --> 00:16:16.510\nit's throwing in and\nthat's where we're getting that.\n\n293\n00:16:16.510 --> 00:16:20.300\nAnd then down here, I've got this strange\nredistribute command just kinda sticking\n\n294\n00:16:20.300 --> 00:16:24.630\nout in the open here,\nredistributing EIGRP 500.\n\n295\n00:16:24.630 --> 00:16:28.210\nThat's actually a weird symptom\nof the section command.\n\n296\n00:16:28.210 --> 00:16:30.950\nSection will sometimes grab\nEIGRP commands from other areas.\n\n297\n00:16:30.950 --> 00:16:32.790\nAnd this one's coming out\nof the OSPF configuration.\n\n298\n00:16:32.790 --> 00:16:35.230\nWe've got two way\nredistribution turned on, and\n\n299\n00:16:35.230 --> 00:16:36.960\nthat's where that command is coming from.\n\n300\n00:16:36.960 --> 00:16:41.300\nBut in this case it looks like I'm\njust openly redistributing OSPF\n\n301\n00:16:42.530 --> 00:16:47.310\nright into EIGRP and\nthat should be that, right?\n\n302\n00:16:47.310 --> 00:16:50.790\nBut it must not be working cuz I'm not\nlearning about it on the other side.\n\n303\n00:16:50.790 --> 00:16:51.550\nSo I want to look for\n\n304\n00:16:51.550 --> 00:16:55.770\na couple of other possible things that\ncould cause this to break, right?\n\n305\n00:16:55.770 --> 00:16:58.510\nSo we've got OSPF being redistributed.\n\n306\n00:16:58.510 --> 00:17:01.640\nWe've got the metric defined, and\nthat's usually the one people leave off.\n\n307\n00:17:01.640 --> 00:17:03.600\nIf you forget to put the metric,\n\n308\n00:17:03.600 --> 00:17:06.010\nthen it assumes you'll have\na default metric to find.\n\n309\n00:17:06.010 --> 00:17:08.150\nAnd if you don't have\na default metric to find,\n\n310\n00:17:08.150 --> 00:17:11.380\nthen the routes don't actually\nredistribute, that can break it.\n\n311\n00:17:11.380 --> 00:17:15.881\nThere is another one, sometimes when you\ndo a redistribution, if you leave off\n\n312\n00:17:15.881 --> 00:17:20.010\nthe subnets keyword that it can break\nthings, and notice like here where they're\n\n313\n00:17:20.010 --> 00:17:24.000\nredistributing the OSPF at the very end\nthey've got that keyword subnets which is\n\n314\n00:17:24.000 --> 00:17:26.810\nwhat makes sure that works, but\nthat really applies to the OSPF side,\n\n315\n00:17:26.810 --> 00:17:31.160\nmy problem is on the EIGRP side, and this\nlooks like it should be redistributing.\n\n316\n00:17:31.160 --> 00:17:33.650\nSo why am I not seeing it?\n\n317\n00:17:33.650 --> 00:17:35.790\nWell, It could be that\nI just wasn't patient.\n\n318\n00:17:35.790 --> 00:17:38.600\nI wasn't giving it enough\ntime to learn that new route,\n\n319\n00:17:38.600 --> 00:17:41.170\nwhich I guess I could double check and\nsee if it came in.\n\n320\n00:17:41.170 --> 00:17:44.620\nBut otherwise,\nI'm not sure cuz things look good.\n\n321\n00:17:45.670 --> 00:17:51.370\nSo I'm just gonna kinda pull this\nback up and just see, still no route.\n\n322\n00:17:51.370 --> 00:17:56.630\nAnd if I do a show IP route on it, and\nI look at the EIGRP routes that are coming\n\n323\n00:17:56.630 --> 00:18:00.670\nin, right, these D EXs, those are ones\nthat are coming from an external source,\n\n324\n00:18:00.670 --> 00:18:03.310\nand I see the ones that\nare coming from my ISPs.\n\n325\n00:18:03.310 --> 00:18:07.910\nWhen I look for 192.168 networks I\ndon't see any of those VLANs being\n\n326\n00:18:07.910 --> 00:18:12.750\nrepresented here, you know the 192.168\n.10, .11, .12 all the way through .16.\n\n327\n00:18:12.750 --> 00:18:18.530\nNone of those are being represented here\nso they're not making it to this side.\n\n328\n00:18:18.530 --> 00:18:23.458\nAll right, so, let's go back and\njump back over to NYEDGE1 and\n\n329\n00:18:23.458 --> 00:18:27.120\nwe're just gonna revisit this guy.\n\n330\n00:18:27.120 --> 00:18:30.930\nAnd when I look at its routing table,\nI wanna make sure that it has routes for\n\n331\n00:18:30.930 --> 00:18:31.760\nall of those networks.\n\n332\n00:18:31.760 --> 00:18:34.308\nI'm pretty certain it does, but\nit's a good idea to check and\n\n333\n00:18:34.308 --> 00:18:36.220\nsee if it's got all\nthose VLANs represented.\n\n334\n00:18:36.220 --> 00:18:40.333\nAnd at a minimum, I see 192.168.10 right\nthere, but I see .11, .12, .13, 14,\n\n335\n00:18:40.333 --> 00:18:40.918\n15, 16.\n\n336\n00:18:40.918 --> 00:18:43.900\nThey're all there, and\n\n337\n00:18:43.900 --> 00:18:49.221\nthey're all directly connected, all right?\n\n338\n00:18:49.221 --> 00:18:51.190\nNow why is that important?\n\n339\n00:18:51.190 --> 00:18:53.570\nWell, look at how we redistributed, right?\n\n340\n00:18:53.570 --> 00:18:57.100\nRemember when I did\nthe show run section EIGRP,\n\n341\n00:18:57.100 --> 00:19:02.600\nand I looked at EIGRP 500,\nwhat were we redistributing?\n\n342\n00:19:02.600 --> 00:19:07.690\nWe were redistributing our OSPF routes,\nOSPF 100 into EIGRP.\n\n343\n00:19:07.690 --> 00:19:13.810\nAnd if I go out to my topology, OSPF\n100 is the process but it's Area Zero.\n\n344\n00:19:13.810 --> 00:19:19.500\nWe're redistributing OSPF routes in the\nEIGRP, but the administrative distance for\n\n345\n00:19:19.500 --> 00:19:23.330\nour directly connected routes\nis lower than the OSPF routes.\n\n346\n00:19:23.330 --> 00:19:25.810\nOSPF routes have an admin distance of 110,\n\n347\n00:19:25.810 --> 00:19:28.930\ndirectly connected has\nan admin distance of one.\n\n348\n00:19:28.930 --> 00:19:30.670\nSo what makes it into the routing table?\n\n349\n00:19:30.670 --> 00:19:32.270\nThe directly connected.\n\n350\n00:19:32.270 --> 00:19:37.100\nAnd you will only redistribute routes\nthat are active in your routing table.\n\n351\n00:19:37.100 --> 00:19:41.330\nSo it doesn't matter that I learned\nabout all these other networks via OSPF,\n\n352\n00:19:41.330 --> 00:19:45.130\nbecause I have a better route in my\nrouting table, I won't put them in.\n\n353\n00:19:45.130 --> 00:19:49.850\nAnd so I'm not redistributing those and\nthat's why I'm not seeing them in EIGRP.\n\n354\n00:19:49.850 --> 00:19:53.180\nSo I've got two choices about\nhow I want to handle this.\n\n355\n00:19:53.180 --> 00:19:56.890\nChoice number one, I can redistribute\nthe connected routes into EIGRP,\n\n356\n00:19:56.890 --> 00:19:58.000\nthat's probably going to be the best.\n\n357\n00:19:59.000 --> 00:20:02.730\nOption number two,\nis I can use the network command and\n\n358\n00:20:02.730 --> 00:20:05.990\nI can specify each of those subnets and\nput them into EIGRP also.\n\n359\n00:20:05.990 --> 00:20:08.060\nI can have an interface in both EIGRP and\nOSPF.\n\n360\n00:20:08.060 --> 00:20:13.230\nWhat it's going to boil down to is how\nmany interfaces I wanna advertise.\n\n361\n00:20:13.230 --> 00:20:16.480\nI might not want to advertise\nthese internet interfaces up here,\n\n362\n00:20:16.480 --> 00:20:17.700\nthese guys in OSPF Area 61.\n\n363\n00:20:17.700 --> 00:20:21.850\nI might wanna be a little more specific,\nand if I don't wanna do route maps and\n\n364\n00:20:21.850 --> 00:20:24.710\nall that stuff, the network commands\nwill be more convenient, and so\n\n365\n00:20:24.710 --> 00:20:26.980\nI can put those in and\nthat'll save some time, but\n\n366\n00:20:26.980 --> 00:20:31.190\nif I wanna do all of my interfaces, it'll\nbe easier just to redistribute connected.\n\n367\n00:20:31.190 --> 00:20:33.930\nAnd so I could just take that command\nwhere we're redistributing OSPF and\n\n368\n00:20:33.930 --> 00:20:37.200\nchange it to redistribute connected,\nand pump those routes in there and\n\n369\n00:20:37.200 --> 00:20:38.550\nthen we'll have it, right?\n\n370\n00:20:38.550 --> 00:20:40.430\nBut, just to keep it simple,\nI'll go ahead and\n\n371\n00:20:40.430 --> 00:20:45.090\nuse the network command to push those\ninto EIGRP, and that'll solve that too.\n\n372\n00:20:45.090 --> 00:20:49.570\nI can use the network command because I\nam directly connected to those networks.\n\n373\n00:20:49.570 --> 00:20:56.533\nSo if I go back to NYEDGE1 I\ncan jump into EIGRP for\n\n374\n00:20:56.533 --> 00:21:02.767\nAS500, so I'm gonna say Conf T\nrouter EIGRP EIGRP_INTERNAL.\n\n375\n00:21:05.070 --> 00:21:10.409\nAnd we can specify the address family,\nthis is good old IPV4 Unicast.\n\n376\n00:21:11.980 --> 00:21:14.190\nAutonomous system 500.\n\n377\n00:21:14.190 --> 00:21:18.480\nAnd once I'm in autonomous system 500,\nthen I've got a choice.\n\n378\n00:21:18.480 --> 00:21:21.110\nIf I wanted to redistribute connected,\nI would come in here and\n\n379\n00:21:21.110 --> 00:21:26.200\nI would say topology base, and\nthen I would do redistribute connected.\n\n380\n00:21:26.200 --> 00:21:28.230\nAnd then go on and specify the metric,\n\n381\n00:21:28.230 --> 00:21:31.230\nand then that would bring all those\nconnected ones in in one command.\n\n382\n00:21:31.230 --> 00:21:35.700\nBut if you wanna do network,\nyou don't need to be in the topology base,\n\n383\n00:21:35.700 --> 00:21:42.373\nyou can just be right here in the address\nfamily, and you can say network\n\n384\n00:21:42.373 --> 00:21:48.460\n192.168.10.0, along with a wildcard\nmask for it, and then 11, and so on.\n\n385\n00:21:48.460 --> 00:21:51.390\nAnd so I'm basically moving\nthese guys directly into EIGRP.\n\n386\n00:21:51.390 --> 00:21:54.480\nNow on a positive side,\nthat's gonna bring the routes in.\n\n387\n00:21:54.480 --> 00:21:57.470\nOn a negative side I'm now advertising\nEIGRP on those networks and\n\n388\n00:21:57.470 --> 00:21:58.520\nI might not want that.\n\n389\n00:21:58.520 --> 00:22:00.770\nRedistributing connected would\nhave been a more effective there.\n\n390\n00:22:00.770 --> 00:22:02.690\nThey didn't really give me any\ndirection in the question,\n\n391\n00:22:02.690 --> 00:22:04.760\nso no preference either way.\n\n392\n00:22:04.760 --> 00:22:07.660\nSo I'm going this route just to make\nsure that I don't advertise any networks\n\n393\n00:22:07.660 --> 00:22:08.300\nthat I don't want.\n\n394\n00:22:08.300 --> 00:22:10.140\nThis will be a little more specific.\n\n395\n00:22:10.140 --> 00:22:11.590\nAlthough I do have to run seven commands,\n\n396\n00:22:11.590 --> 00:22:14.860\nwhich is a little heavy on\nthe command side but it'll work.\n\n397\n00:22:14.860 --> 00:22:16.270\nSo we'll go ahead and\nget these punched in.\n\n398\n00:22:17.470 --> 00:22:22.040\nAnd as soon as they're there, then NYWAN1\nshould have the return route to be\n\n399\n00:22:22.040 --> 00:22:26.390\nable to get back to us and\nwe should be in good shape, all right?\n\n400\n00:22:26.390 --> 00:22:29.050\nSo all of those are in there now.\n\n401\n00:22:29.050 --> 00:22:31.410\nI guess I could have adjusted\nthe wildcard mask, but\n\n402\n00:22:31.410 --> 00:22:34.375\nI didn't wanna calculate out the binary\nbits there, it takes too much time.\n\n403\n00:22:34.375 --> 00:22:38.960\n[LAUGH] So actually I don't think I could\nhave gotten a good binary wildcard mask\n\n404\n00:22:38.960 --> 00:22:42.180\nthat would have covered just those ranges,\nthat would have been hard to do.\n\n405\n00:22:42.180 --> 00:22:46.400\nAll right, so let's go ahead and jump over\nto NYWAN1, and see what it's getting now.\n\n406\n00:22:46.400 --> 00:22:51.380\nThe EIGRP is really fast so it'll\nlearn those routes pretty quickly, and\n\n407\n00:22:51.380 --> 00:22:56.330\nif I do a Show IP route from\n192.168.16.10, I've got a route now.\n\n408\n00:22:58.140 --> 00:23:02.820\nAnd if I do a Show IP route EIGRP and\n\n409\n00:23:02.820 --> 00:23:08.660\nI'll filter that for\n192.168, I should see.\n\n410\n00:23:08.660 --> 00:23:09.500\nThere they all are, right?\n\n411\n00:23:09.500 --> 00:23:12.100\nThere's all those routes\nthat just came in via EIGRP.\n\n412\n00:23:12.100 --> 00:23:14.280\nSo now I've got those return routes,\nall right?\n\n413\n00:23:14.280 --> 00:23:18.400\nSo I know how to get back to the network,\nlet's see if that fixed it, all right?\n\n414\n00:23:18.400 --> 00:23:22.530\nSo if I jump all the way\nback to PLab Cisco 01,\n\n415\n00:23:22.530 --> 00:23:27.190\nI can retry that ping,\nand now we're successful.\n\n416\n00:23:27.190 --> 00:23:29.610\nAll right, so\na few different solutions for this one.\n\n417\n00:23:29.610 --> 00:23:31.246\nFew different problems for it, right?\n\n418\n00:23:31.246 --> 00:23:34.800\nThe first problem we had\nto solve was that NYWAN1\n\n419\n00:23:34.800 --> 00:23:39.800\nwas not advertising\nthe 172.16.16 network into our\n\n420\n00:23:39.800 --> 00:23:43.600\ninternal environment because the EIGRP\nautonomous system number was wrong.\n\n421\n00:23:43.600 --> 00:23:46.790\nSo we fixed that and\nnow we've started advertising it, right?\n\n422\n00:23:46.790 --> 00:23:51.430\nThe second problem that we had,\nwas that our routes weren't being\n\n423\n00:23:51.430 --> 00:23:56.290\nadvertised to NYWAN1 because of\nan administrative distance miscalculation.\n\n424\n00:23:56.290 --> 00:24:00.320\nI solved that by using network statements\nand advertising them right into the EIGRP.\n\n425\n00:24:00.320 --> 00:24:02.290\nWe could have redistributed connected.\n\n426\n00:24:02.290 --> 00:24:03.880\nWe could have also done some NAT.\n\n427\n00:24:03.880 --> 00:24:06.760\nI could have NATed that\ntraffic on this guy to\n\n428\n00:24:06.760 --> 00:24:08.650\nan IP that NYWAN1 already knew about.\n\n429\n00:24:08.650 --> 00:24:10.580\nThat's another solution,\nthat would have worked.\n\n430\n00:24:10.580 --> 00:24:13.060\nLittle heavy on the config there,\nbut it certainly would have worked.\n\n431\n00:24:13.060 --> 00:24:15.010\nSo more than one way\nto solve that problem.\n\n432\n00:24:15.010 --> 00:24:18.150\nBut in this case, now we've got our\ndynamic routing protocols doing\n\n433\n00:24:18.150 --> 00:24:19.700\nwhat they're supposed to be doing.\n\n434\n00:24:19.700 --> 00:24:21.110\nThey're learning about the routes.\n\n435\n00:24:21.110 --> 00:24:23.920\nThey know the topology, and\nnow they can make intelligent decisions.\n\n436\n00:24:23.920 --> 00:24:27.680\nSo with that in place, we're good\nto go and that solves this problem.\n\n437\n00:24:27.680 --> 00:24:32.040\nSo, it was one problem with\na multi-part solution.\n\n438\n00:24:32.040 --> 00:24:32.820\nWe gotta watch out for those.\n\n439\n00:24:32.820 --> 00:24:36.080\nThose are complex, but they're very\nreal and very possible on the exam.\n\n440\n00:24:36.080 --> 00:24:37.630\nSo definitely something\nyou want to remember.\n\n441\n00:24:37.630 --> 00:24:40.000\nAll right,\nwell I hope you guys enjoyed that one.\n\n442\n00:24:40.000 --> 00:24:40.550\nStay tuned,\n\n443\n00:24:40.550 --> 00:24:43.930\nwe've got one more issue in set four\nbefore we move on to the next set.\n\n444\n00:24:43.930 --> 00:24:45.240\nSo stay tuned for that,\nit's coming up next.\n\n445\n00:24:45.240 --> 00:24:54.000\n[MUSIC]\n\n",
          "vimeoId": "151013759"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #8` from set #4. The trouble ticket states that \"You are unable to ping 192.168.224.1 from PLABCSCO01 \"",
          "length": "240",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-4-8-set_4_issue_8-120215-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-4-8-set_4_issue_8-120215-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-4-8-set_4_issue_8-120215-1-sm.jpg",
          "title": "Set 4 Issue 8",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:07.036\n[MUSIC]\n\n2\n00:00:07.036 --> 00:00:11.668\nWelcome back to another\nCisco troubleshooting video.\n\n3\n00:00:11.668 --> 00:00:14.840\nWe're gonna take a look at set\nfour issue number eight, and\n\n4\n00:00:14.840 --> 00:00:17.642\nwe've got another reachability\nissue on this one.\n\n5\n00:00:17.642 --> 00:00:20.246\nThe troubleshooting ticket reads,\n\n6\n00:00:20.246 --> 00:00:25.544\nyou are unable to ping\n192.168.224.1 from PLABCISCO01.\n\n7\n00:00:25.544 --> 00:00:27.069\nSo we've got more reachability.\n\n8\n00:00:27.069 --> 00:00:29.319\nLet's take a look at our\noverall network diagram,\n\n9\n00:00:29.319 --> 00:00:30.949\nget an idea of where this problem is.\n\n10\n00:00:30.949 --> 00:00:35.901\nSo we know our good old trusty PLABCISCO\nserver way down here at the bottom of\n\n11\n00:00:35.901 --> 00:00:38.344\nthe topology, that's the source.\n\n12\n00:00:38.344 --> 00:00:43.545\nAnd when it's trying to get to\n192.168.224.1 it's not getting there.\n\n13\n00:00:43.545 --> 00:00:46.552\nSo if I zoom back out we can find,\nhere we go.\n\n14\n00:00:46.552 --> 00:00:53.480\n192.168.224.1, it's one of these\nexternal networks up here in EIRGP 800.\n\n15\n00:00:53.480 --> 00:00:57.890\nSo it's telling me that we can't get\nthere and well, we need to find out why.\n\n16\n00:00:57.890 --> 00:01:01.668\nNow as always, when we're dealing\nwith a big topology like this.\n\n17\n00:01:01.668 --> 00:01:03.652\nWhen you've got a lot\nof devices in the mix,\n\n18\n00:01:03.652 --> 00:01:05.428\na traceroute is a great place to start.\n\n19\n00:01:05.428 --> 00:01:09.146\nSo, I'm gonna jump back to that server and\nthat's where we'll start.\n\n20\n00:01:09.146 --> 00:01:13.147\nWe'll do a little traceroute and\nsee where our communication breaks down.\n\n21\n00:01:13.147 --> 00:01:22.087\nSo, I'll do a traceroute to\n192.168.224.1 and here it goes.\n\n22\n00:01:22.087 --> 00:01:27.613\nNow my first top should be the default\ngateway, which for me is 192.168.16.1.\n\n23\n00:01:27.613 --> 00:01:30.804\nI'll see the unique IP,\nbecause that's an HSRP cluster.\n\n24\n00:01:30.804 --> 00:01:31.575\nSo there we go.\n\n25\n00:01:31.575 --> 00:01:34.561\nWe got dot three,\nwhich is actually NY core two.\n\n26\n00:01:34.561 --> 00:01:37.486\nSo I just jumped over to\none of those switches,\n\n27\n00:01:37.486 --> 00:01:41.611\nthen we go up to NY edge 1,\nwhich is 192.168.12.5.\n\n28\n00:01:41.611 --> 00:01:46.155\nThen we go to NYWAN1,\nwhich is 192.168.255.1 and\n\n29\n00:01:46.155 --> 00:01:49.799\nthen we're jumping to some\nIPs I don't recognize.\n\n30\n00:01:49.799 --> 00:01:53.791\n192.168.255.5, that one\nmust be outside and\n\n31\n00:01:53.791 --> 00:01:56.380\nthat's not what we expect to see is it.\n\n32\n00:01:56.380 --> 00:02:01.968\nSo then I get a nice little\nresponse from 192.168.224.1.\n\n33\n00:02:01.968 --> 00:02:03.267\nWhat's that all about?\n\n34\n00:02:03.267 --> 00:02:04.344\nWell, let's try to ping.\n\n35\n00:02:04.344 --> 00:02:07.961\nRemember, the troubleshooting tip it say,\nwe can't ping this one IP.\n\n36\n00:02:07.961 --> 00:02:12.430\nLet's see what we get if we ping\nover to it and we can ping it.\n\n37\n00:02:12.430 --> 00:02:16.169\nNow, why can we ping this IP\nwhen we're not suppose to?\n\n38\n00:02:16.169 --> 00:02:21.003\nWell, that is a great question and I'm\ngonna do something I don't normally do,\n\n39\n00:02:21.003 --> 00:02:23.645\nwhich is look at the answer\nto see [LAUGH] why.\n\n40\n00:02:23.645 --> 00:02:26.438\nI try not to look at the answers\nto these before I do them,\n\n41\n00:02:26.438 --> 00:02:28.112\nbecause it kind of ruins the fun.\n\n42\n00:02:28.112 --> 00:02:30.084\nSo oh, jeez.\n\n43\n00:02:30.084 --> 00:02:33.720\nWell, I guess I should have\nlooked at the answer on this one.\n\n44\n00:02:33.720 --> 00:02:39.777\nSo the problem here is we're supposed\nto have a problem with EIGRP,\n\n45\n00:02:39.777 --> 00:02:44.041\nbut we already solved it\nin issue number seven.\n\n46\n00:02:44.041 --> 00:02:47.089\nIn issue number seven,\nwe had a really similar problem.\n\n47\n00:02:47.089 --> 00:02:51.440\nWe had PLABCISCO01 was\nunable to ping the outside\n\n48\n00:02:51.440 --> 00:02:54.891\ninterface of NYWAN1 and we fixed that.\n\n49\n00:02:54.891 --> 00:03:00.458\nThe problem was that EIGRP was set for\nautonomous system 80 instead of 800.\n\n50\n00:03:00.458 --> 00:03:03.586\nAnd you'll remember if you've watched that\none that I went through and fixed it.\n\n51\n00:03:03.586 --> 00:03:06.931\nIt was one of the first things we fixed\nbefore we started fixing the other\n\n52\n00:03:06.931 --> 00:03:10.128\ndirection of the traffic to get\nthat kind of route advertised down.\n\n53\n00:03:10.128 --> 00:03:11.275\nSo we fixed that and\n\n54\n00:03:11.275 --> 00:03:15.309\nthen did a second correction to\nget the internal traffic flowing.\n\n55\n00:03:15.309 --> 00:03:19.799\nWell, in doing that, we've actually\nfixed the problem here for issue eight.\n\n56\n00:03:19.799 --> 00:03:23.835\nSo if you're just starting with issue\neight, if you're kind of jumping around\n\n57\n00:03:23.835 --> 00:03:27.814\nin the troubleshooting tickets, just\njump back and watch the solution set for\n\n58\n00:03:27.814 --> 00:03:30.486\nissue seven and\nit's the first thing that we fixed.\n\n59\n00:03:30.486 --> 00:03:33.654\nThat system number was wrong,\nwe had to get that corrected.\n\n60\n00:03:33.654 --> 00:03:34.529\nWe've put it back in place.\n\n61\n00:03:34.529 --> 00:03:38.977\nBut in this case, because we've already\nfixed it, more gold and more able to pin.\n\n62\n00:03:38.977 --> 00:03:41.964\nThis troubleshooting ticket is\nsolved before it even began.\n\n63\n00:03:41.964 --> 00:03:43.853\nOne of the easiest ones we're gonna do.\n\n64\n00:03:43.853 --> 00:03:47.064\nAnd with that,\nthat wraps up set number four.\n\n65\n00:03:47.064 --> 00:03:49.258\nStay tuned, we get set number\nfive coming down the road.\n\n66\n00:03:49.258 --> 00:03:52.915\nI hope you guys have enjoyed this so\nfar and I look forward to seeing you then.\n\n67\n00:03:52.915 --> 00:03:59.769\n[MUSIC]\n\n",
          "vimeoId": "151013755"
        }
      ],
      "title": "Set Four"
    },
    {
      "episodes": [
        {
          "description": "In this video, Don solves troubleshooting issue #1` from set #5. The trouble ticket states that \"You are unable to ping 192.168.224.1 which is in the WAN connected to NYWAN1 from NYWAN1 itself \"",
          "length": "912",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-5-1-set_5_issue_1-120315-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-5-1-set_5_issue_1-120315-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-5-1-set_5_issue_1-120315-1-sm.jpg",
          "title": "Set 5 Issue 1",
          "transcript": "WEBVTT\n\n1\n00:00:00.025 --> 00:00:02.128\n[MUSIC]\n\n2\n00:00:02.128 --> 00:00:06.589\n[SOUND] Alright, welcome to another\n\n3\n00:00:06.589 --> 00:00:12.101\ntroubleshooting episode here on IT Pro TV.\n\n4\n00:00:12.101 --> 00:00:15.480\nAnd in this episode we're\nkicking off set five issue one.\n\n5\n00:00:15.480 --> 00:00:16.900\nThat means an all new set.\n\n6\n00:00:16.900 --> 00:00:18.450\nWe need to be on the lookout for\n\n7\n00:00:18.450 --> 00:00:22.690\nany subtle changes in our infrastructure,\nbecause the topology is now different.\n\n8\n00:00:22.690 --> 00:00:25.780\nWe're gonna kick off some slightly\nmore complex troubleshooting examples,\n\n9\n00:00:25.780 --> 00:00:26.950\nwe'll see a few different things here,\n\n10\n00:00:26.950 --> 00:00:30.920\nwhich is always great for you know,\nenhancing our troubleshooting skills.\n\n11\n00:00:30.920 --> 00:00:34.480\nSo let's take a look at this\ntroubleshooting ticket, and what it's\n\n12\n00:00:34.480 --> 00:00:39.410\ntelling us here is it says you\nare unable to ping 192.168.224.1,\n\n13\n00:00:39.410 --> 00:00:42.727\nwhich is in the WAN connected ,to NYWAN1,\n\n14\n00:00:42.727 --> 00:00:46.260\nand we're failing to\nping from NYWAN1 itself.\n\n15\n00:00:46.260 --> 00:00:49.550\nSo, we've got an EDGE router\nsitting on the Internet,\n\n16\n00:00:49.550 --> 00:00:53.140\nand it's trying to ping an Internet\nsubnet, and it's not able to do it.\n\n17\n00:00:53.140 --> 00:00:54.670\nSo we need to find out why.\n\n18\n00:00:54.670 --> 00:00:56.580\nSo let's take a look at\nwhat's going on there.\n\n19\n00:00:56.580 --> 00:01:00.270\nI wanna start with our topology map,\nand I'll just pull up the topology.\n\n20\n00:01:00.270 --> 00:01:02.770\nYou'll see it looks pretty similar to\nwhat we've had in the previous sets, but\n\n21\n00:01:02.770 --> 00:01:04.180\nthings are a little bit different.\n\n22\n00:01:04.180 --> 00:01:09.720\nNotice some of the OSPF regions are gone,\nor areas are gone.\n\n23\n00:01:09.720 --> 00:01:11.050\nIEGRP 500 is gone.\n\n24\n00:01:11.050 --> 00:01:13.710\nSo we definitely have some\nrouting topology changes.\n\n25\n00:01:13.710 --> 00:01:15.610\nBut I can put most of that out of my mind,\n\n26\n00:01:15.610 --> 00:01:19.220\nbecause the problem as described\nin the ticket is up here.\n\n27\n00:01:19.220 --> 00:01:24.950\nThen I've got NYWAN1,\nmy edge router that's sitting\n\n28\n00:01:24.950 --> 00:01:30.150\non the internet, and it's trying to get to\n192.168.224.1, this network right here,\n\n29\n00:01:30.150 --> 00:01:33.790\nthat's out on the Internet, out on all\nthis equipment that I don't control, and\n\n30\n00:01:33.790 --> 00:01:35.530\nfor some reason it can't get there.\n\n31\n00:01:35.530 --> 00:01:39.010\nNow, in my mind I'm trying to think\nof why it can't get there, right.\n\n32\n00:01:39.010 --> 00:01:41.640\nAnd there's a ton of problems that\ncould happen out on these devices, but\n\n33\n00:01:41.640 --> 00:01:43.200\nwe don't control those.\n\n34\n00:01:43.200 --> 00:01:47.020\nSo, what could be going on here on\nNYWAN1 that could cause this to fail?\n\n35\n00:01:47.020 --> 00:01:50.340\nIt could be that its\nWAN interface is down.\n\n36\n00:01:50.340 --> 00:01:51.220\nIt's got two of them.\n\n37\n00:01:51.220 --> 00:01:52.740\nIt's got one frame relay link and\n\n38\n00:01:52.740 --> 00:01:55.030\nit's got one Ethernet link here\nat Gi0/1 and Serial 0/0/0/.\n\n39\n00:01:55.030 --> 00:01:59.710\nOne of those could be down, that could\nbe stopping me from getting there.\n\n40\n00:01:59.710 --> 00:02:01.890\nIt could be an access control list,\nalthough it's unlikely.\n\n41\n00:02:01.890 --> 00:02:04.120\nThe ACL would probably\nhave to be somewhere else.\n\n42\n00:02:04.120 --> 00:02:08.430\nIt could be that I don't have a route,\nor a gateway of last resort.\n\n43\n00:02:08.430 --> 00:02:09.720\nNormally when we're\nconnected to the Internet,\n\n44\n00:02:09.720 --> 00:02:11.270\nwe have a gateway of last resort.\n\n45\n00:02:11.270 --> 00:02:13.600\nHere we probably don't,\nsince there is two WAN connections.\n\n46\n00:02:13.600 --> 00:02:17.810\nOr maybe we have a static gateway of last\nresort with metrics that are choosing it.\n\n47\n00:02:17.810 --> 00:02:20.450\nThese are all different things that\ncould be impacting why we're not getting\n\n48\n00:02:20.450 --> 00:02:21.810\nto that network.\n\n49\n00:02:21.810 --> 00:02:25.060\nFortunately, we just have one\nplace to troubleshoot, right?\n\n50\n00:02:25.060 --> 00:02:27.640\nWe don't control these devices,\nso we can't touch them.\n\n51\n00:02:27.640 --> 00:02:30.760\nAnd this is the guy who can't ping so,\nlet's get started on NYWAN1.\n\n52\n00:02:30.760 --> 00:02:35.700\nI'm gonna jump over to that router,\nand we'll just take a look at it, and\n\n53\n00:02:35.700 --> 00:02:39.450\nsee if we can find out why that\none is not playing nice today.\n\n54\n00:02:39.450 --> 00:02:41.420\nSo, I'm gonna get logged in here.\n\n55\n00:02:41.420 --> 00:02:44.040\nAnd the first thing I'm gonna do is I'm\njust gonna see if I'm directly plugged\n\n56\n00:02:44.040 --> 00:02:44.840\ninto that network.\n\n57\n00:02:44.840 --> 00:02:45.970\nI don't really know.\n\n58\n00:02:45.970 --> 00:02:47.750\nSo I'll do a show ip interface brief.\n\n59\n00:02:47.750 --> 00:02:51.790\nIt's one of my favorite commands there\njust to see if I've got a direct\n\n60\n00:02:51.790 --> 00:02:55.130\nconnection to 192.168.224,\nand I can see that I don't.\n\n61\n00:02:55.130 --> 00:02:58.515\nRight?\nI've got some things that are close\n\n62\n00:02:58.515 --> 00:03:03.680\n192.168.1 But I don't have 192.168.224,\nthat's the network I'm trying to get to.\n\n63\n00:03:03.680 --> 00:03:07.702\nSo, I'll do a show ip route for\n192.168.224 and\n\n64\n00:03:07.702 --> 00:03:12.720\n.1's the ip that I'm trying to get to so\nI'll try that one.\n\n65\n00:03:12.720 --> 00:03:14.670\nNetwork not in table.\n\n66\n00:03:14.670 --> 00:03:19.060\nAll right, so, if I don't have\nan interface on that network, and\n\n67\n00:03:19.060 --> 00:03:22.090\nI don't have a route to get to it,\nwhat am I gonna do?\n\n68\n00:03:22.090 --> 00:03:23.000\nWell, one of two things.\n\n69\n00:03:23.000 --> 00:03:25.030\nEither one, I'm gonna use\na gateway of last resort, or two,\n\n70\n00:03:25.030 --> 00:03:27.940\nI'm gonna fail,\nwhich well could be happening here.\n\n71\n00:03:27.940 --> 00:03:31.890\nNow I'm gonna do a show IP route just to\nsee if I have a gateway of last resort,\n\n72\n00:03:31.890 --> 00:03:33.250\nand I don't.\n\n73\n00:03:33.250 --> 00:03:35.860\nSo if I don't have a route\nin the routing table, and\n\n74\n00:03:35.860 --> 00:03:39.550\nI don't have a gateway of last resort I've\ngot no way to get to that network, and\n\n75\n00:03:39.550 --> 00:03:41.400\nof course the ping is gonna fail.\n\n76\n00:03:41.400 --> 00:03:48.260\nSo if I try and\nping 192.168.224.1, I get nothing.\n\n77\n00:03:48.260 --> 00:03:53.910\nNow we saw in the diagram that we're\nconnected to a wide area network out here.\n\n78\n00:03:53.910 --> 00:03:55.300\nAnd it's EIGRP 800.\n\n79\n00:03:55.300 --> 00:04:00.970\nNow I don't know which one of these\nrouters is actually hosting 192.168.224.\n\n80\n00:04:00.970 --> 00:04:06.000\nIt could be LDNWN1,\nIt could be NWRKWAN1, I don't know.\n\n81\n00:04:06.000 --> 00:04:10.210\nSo I should be learning from one of them,\nbut I'm not.\n\n82\n00:04:10.210 --> 00:04:13.700\nSo, I'm not gonna find out\nwhy I'm not learning it.\n\n83\n00:04:13.700 --> 00:04:15.090\nRight?\nI should be learning it.\n\n84\n00:04:15.090 --> 00:04:16.310\nAm I?\nI don't know.\n\n85\n00:04:16.310 --> 00:04:19.160\nBut EIGRP,\nwe do have an EIGRP database that we can\n\n86\n00:04:19.160 --> 00:04:20.950\nlook at to see if we're\ngetting the routes.\n\n87\n00:04:20.950 --> 00:04:22.610\nAnd we've got our neighbor relationships.\n\n88\n00:04:22.610 --> 00:04:24.890\nI should have neighbor relationships\nwith both of these guys for\n\n89\n00:04:24.890 --> 00:04:28.410\nEIGRP 800 and I should be having\nroutes coming in from them.\n\n90\n00:04:28.410 --> 00:04:30.440\nSo let's see if I even have\nneighbor relationships.\n\n91\n00:04:30.440 --> 00:04:32.410\nThat's a great place to start.\n\n92\n00:04:32.410 --> 00:04:36.650\nSo, I guess I could see if\nI'm even running EIGRP,\n\n93\n00:04:36.650 --> 00:04:40.450\nwhen I looked at my routing table up here,\nI didn't view the full routing table, but\n\n94\n00:04:40.450 --> 00:04:45.060\nI noticed a bunch of OSPF routes, I didn't\nsee any EIGRP routes jumping out at me, so\n\n95\n00:04:45.060 --> 00:04:51.480\nif I do a show IP route EIGRP,\nI don't have any EIGRP routes.\n\n96\n00:04:51.480 --> 00:04:52.390\nThat seems odd.\n\n97\n00:04:52.390 --> 00:04:55.630\nSeems like I should at least getting\nsomething from these other providers.\n\n98\n00:04:55.630 --> 00:05:00.550\nAnd if I do a show ip protocols,\nlet's see if I'm even running EIGRP.\n\n99\n00:05:00.550 --> 00:05:04.890\nSo, the first thing that comes\nup is the OSPF environment, and\n\n100\n00:05:04.890 --> 00:05:09.390\nthen right after that,\nI see I am running EIGRP 800 right here.\n\n101\n00:05:09.390 --> 00:05:11.360\nAnd it's up and it's going.\n\n102\n00:05:11.360 --> 00:05:13.620\nIP protocol, or\nshow IP protocol is a neat command,\n\n103\n00:05:13.620 --> 00:05:16.050\nbecause I can see if I've\ngot things like filters.\n\n104\n00:05:16.050 --> 00:05:19.320\nBecause filters can be stopping\nroutes from coming in or going out.\n\n105\n00:05:19.320 --> 00:05:21.010\nAnd so I can see here I don't have any.\n\n106\n00:05:21.010 --> 00:05:22.410\nRight?\nIt says that they're not set.\n\n107\n00:05:22.410 --> 00:05:25.350\nI can see I've got default\nnetworks are set up.\n\n108\n00:05:25.350 --> 00:05:27.280\nYou know they are being accepted.\n\n109\n00:05:27.280 --> 00:05:30.050\nSo, I'm not seeing\nanything too crazy there.\n\n110\n00:05:30.050 --> 00:05:34.750\nAnd as I look down, I can see that\nI am summarizing for some networks.\n\n111\n00:05:34.750 --> 00:05:38.665\nI got some networks that are in place and\nthen under routing information sources,\n\n112\n00:05:38.665 --> 00:05:43.050\nI've got nothing, I got nobody alright,\nso I have no neighbors.\n\n113\n00:05:43.050 --> 00:05:46.944\nI could have also found that with show IP,\n\n114\n00:05:46.944 --> 00:05:50.930\nEIGRP neighbor, and I've got nothing.\n\n115\n00:05:50.930 --> 00:05:53.050\nSo if I don't have any\nneighbor adjacencies,\n\n116\n00:05:53.050 --> 00:05:57.050\nthen I'm not gonna be able to exchange\nany routes, I'm not gonna learn anything,\n\n117\n00:05:57.050 --> 00:05:58.320\nI'm not gonna know about the network.\n\n118\n00:05:58.320 --> 00:06:02.580\nSo, I more than likely have an issue\nhere with just my EIGRP configuration.\n\n119\n00:06:02.580 --> 00:06:05.500\nRight now,\nwhy don't I have a neighbor relationship?\n\n120\n00:06:05.500 --> 00:06:08.080\nWell the easiest solution here would\nbe if the interfaces were down.\n\n121\n00:06:08.080 --> 00:06:09.120\nMaybe we can luck out, right?\n\n122\n00:06:09.120 --> 00:06:12.000\nSo I'll do a show IP\ninterface brief again, and\n\n123\n00:06:12.000 --> 00:06:17.610\nthis time I wanna pay attention to,\nMy GI0/1 and my serial 000 interface.\n\n124\n00:06:17.610 --> 00:06:20.870\nI just wanna make sure they're up, up.\n\n125\n00:06:20.870 --> 00:06:21.690\nAnd so here's gi0/1.\n\n126\n00:06:21.690 --> 00:06:27.350\nWhen I look at it,\nI've got that it's got an unassigned\n\n127\n00:06:27.350 --> 00:06:29.530\nIP address, and\nit's administratively down.\n\n128\n00:06:29.530 --> 00:06:33.400\nMy gi0/1 interface doesn't\nseem to be configured at all.\n\n129\n00:06:33.400 --> 00:06:35.720\nSo, that, that might be a problem.\n\n130\n00:06:35.720 --> 00:06:40.340\nAnd then my serial 000,\nwell this one, it's also unassigned.\n\n131\n00:06:40.340 --> 00:06:43.861\nIt's up, up, which is good, but\nit's got subinterfaces, and\n\n132\n00:06:43.861 --> 00:06:48.560\nI see I've got subinterfaces for\n172.88.0.9 and 172.88.0.1.\n\n133\n00:06:48.560 --> 00:06:54.040\nAnd the two subinterfaces are up for\nthose two different networks.\n\n134\n00:06:54.040 --> 00:06:59.360\nNow, When I look at this topology, I see\nthat I'm hitting that frame relay WAN,\n\n135\n00:06:59.360 --> 00:07:00.970\nand we probably have some DLCs or\nwhatever.\n\n136\n00:07:00.970 --> 00:07:04.110\nThey're sending this to LDNWAN and\nwho knows where else, right?\n\n137\n00:07:04.110 --> 00:07:06.540\nMaybe even NWRKWAN1, I don't know.\n\n138\n00:07:06.540 --> 00:07:11.940\nIt shows that link as 172.16.16,\nand when I looked at the router\n\n139\n00:07:11.940 --> 00:07:16.590\nI don't have 172.16.16 assigned\nto any of these interfaces so\n\n140\n00:07:16.590 --> 00:07:20.770\nit looks like my connection to\nNWRKWAN1 is not configured.\n\n141\n00:07:20.770 --> 00:07:24.630\nNow that may or\nmay not be a problem, because\n\n142\n00:07:24.630 --> 00:07:29.480\nremember our troubleshooting ticket\nis that we can't get to 192.168.224.\n\n143\n00:07:29.480 --> 00:07:32.080\nAnd I don't really know\nwhere that's coming from.\n\n144\n00:07:32.080 --> 00:07:35.450\nIs it coming from NWRKWAN or\nis it coming from LDNWAN?\n\n145\n00:07:35.450 --> 00:07:38.690\nI don't know.\nAll right, so when it comes to solving\n\n146\n00:07:38.690 --> 00:07:43.040\nthis problem, I need to target\nthe equipment that I can see first,\n\n147\n00:07:43.040 --> 00:07:44.532\nbefore I target equipment I can't see.\n\n148\n00:07:44.532 --> 00:07:49.250\nSo LDNWAN1, I'm connected to it via\nthe frame relay, and that link is up and\n\n149\n00:07:49.250 --> 00:07:50.280\nconfigured.\n\n150\n00:07:50.280 --> 00:07:51.390\nIf 192.168.224 is coming from here,\n\n151\n00:07:51.390 --> 00:07:55.760\nthen I just need to get that\nneighborhood relationship up.\n\n152\n00:07:55.760 --> 00:07:59.260\nIf it's coming from down here though,\nnow I'm gonna configure IPs and\n\n153\n00:07:59.260 --> 00:07:59.890\ndo a little more.\n\n154\n00:07:59.890 --> 00:08:01.430\nSo I'm gonna start with\nthe easier one first.\n\n155\n00:08:01.430 --> 00:08:03.890\nThis guy up here LDNWAN1.\n\n156\n00:08:03.890 --> 00:08:07.790\nWhy am I not building an adjacency\nwith LDNWAN1 if that link is up?\n\n157\n00:08:07.790 --> 00:08:09.990\nAnd I'm getting connections, right?\n\n158\n00:08:09.990 --> 00:08:11.820\nWell, a few easy ways to find this out.\n\n159\n00:08:11.820 --> 00:08:13.570\nActually, I'm gonna say easy,\nit's not terribly easy.\n\n160\n00:08:13.570 --> 00:08:17.920\nIf I want to find out why the adjacencies\nare coming up, if I have control of\n\n161\n00:08:17.920 --> 00:08:21.850\nboth devices, I could just look at the\nrunning configs and compare them, right.\n\n162\n00:08:21.850 --> 00:08:24.570\nI could also just look at my\nEIGRP config and look for\n\n163\n00:08:24.570 --> 00:08:26.200\nthings that are out of the ordinary.\n\n164\n00:08:26.200 --> 00:08:30.280\nBut since I can't see the other side,\nsomething out of the ordinary here\n\n165\n00:08:30.280 --> 00:08:32.980\nmight also be configured on the other\nside, so now it becomes ordinary.\n\n166\n00:08:32.980 --> 00:08:34.820\nSo I can't necessarily trust that.\n\n167\n00:08:34.820 --> 00:08:37.800\nBut a debug,\na debug will show us some good data here.\n\n168\n00:08:37.800 --> 00:08:40.650\nAnd we can maybe get a hint\nas to why that's failing.\n\n169\n00:08:40.650 --> 00:08:43.140\nAll right, now when you go to debug EIGRP,\n\n170\n00:08:43.140 --> 00:08:46.420\nthere's a lot of different\nthings that we can debug.\n\n171\n00:08:46.420 --> 00:08:50.970\nYou'll see you can debug specific\nneighbors, notifications, summaries, vrfs.\n\n172\n00:08:50.970 --> 00:08:53.950\nYou can also debug a particular autonomous\nsystem if you've got more than one.\n\n173\n00:08:53.950 --> 00:08:56.030\nI've got autonomous system 800.\n\n174\n00:08:56.030 --> 00:08:57.130\nAnd then inside of that,\n\n175\n00:08:57.130 --> 00:09:01.310\nI can start specifying how I\nwanna monitor that, right?\n\n176\n00:09:01.310 --> 00:09:06.330\nNow, unfortunately in my scenario, I don't\nreally know my neighbor's IP address.\n\n177\n00:09:06.330 --> 00:09:07.010\nRight?\n\n178\n00:09:07.010 --> 00:09:09.090\nIf I did,\nthat would really make this easy,\n\n179\n00:09:09.090 --> 00:09:11.100\ncuz then I could filter\njust based on that.\n\n180\n00:09:11.100 --> 00:09:15.280\nBut since I don't,\nI can just do straight up neighbor and\n\n181\n00:09:15.280 --> 00:09:18.450\nthen, well, even there I still\nhave to provide an IP address.\n\n182\n00:09:18.450 --> 00:09:22.575\nBut if you just press enter, that'll turn\non debugging for all the neighbors, right?\n\n183\n00:09:22.575 --> 00:09:24.820\nSee how it didn't show\nthe carriage return?\n\n184\n00:09:24.820 --> 00:09:27.470\nSometimes the output doesn't show that.\n\n185\n00:09:27.470 --> 00:09:31.480\nAnd in this case I can just say,\ndebug the neighbors and let me see that.\n\n186\n00:09:31.480 --> 00:09:33.990\nThere's a few other things\nthat we can do in here.\n\n187\n00:09:33.990 --> 00:09:36.720\nYou know, if you just try and\nturn it on for 800, you can do that, and\n\n188\n00:09:36.720 --> 00:09:39.800\nit's just gonna turn on\nthat event debugging.\n\n189\n00:09:39.800 --> 00:09:43.080\nSo I'm gonna get that turned on, and\nI really feel like I should've seen\n\n190\n00:09:43.080 --> 00:09:46.360\nsomething by now, and\nI haven't seen anything.\n\n191\n00:09:46.360 --> 00:09:49.990\nSo I'm gonna make sure that I'm\ndoing debug logging to console.\n\n192\n00:09:49.990 --> 00:09:53.760\nThe debugs, they're supposed to\nshow up on console by default.\n\n193\n00:09:53.760 --> 00:09:55.220\nI am on the console.\n\n194\n00:09:55.220 --> 00:09:57.470\nAnd if they're not,\nyou can just jump into config and\n\n195\n00:09:57.470 --> 00:10:02.000\nrun logging console and\nthat should take care of it.\n\n196\n00:10:02.000 --> 00:10:02.720\nThere we go.\n\n197\n00:10:03.920 --> 00:10:06.460\nAnd looks like we got some\ninformation coming in.\n\n198\n00:10:06.460 --> 00:10:10.495\nI'm gonna give it just a second for\na few more things to come in before I do\n\n199\n00:10:10.495 --> 00:10:14.250\nan un-debug all.\n\n200\n00:10:14.250 --> 00:10:15.070\nThere we go.\n\n201\n00:10:15.070 --> 00:10:17.180\nSo I got a little bit of\ndebug feedback there, and\n\n202\n00:10:17.180 --> 00:10:21.100\nI'm just gonna look at what we got,\nand then try and interpret that, and\n\n203\n00:10:21.100 --> 00:10:24.290\nactually, here I'm starting to\nget some information right here.\n\n204\n00:10:24.290 --> 00:10:29.840\nDual five neighbor change, so dual, the\ndefusing update algorithm that is EIGRP.\n\n205\n00:10:29.840 --> 00:10:34.230\nSo I got a neighbor change,\nI see why console logging was turned off.\n\n206\n00:10:34.230 --> 00:10:37.820\nCuz it's just gonna keep\nspamming my screen here, so\n\n207\n00:10:37.820 --> 00:10:39.920\nlet me turn that back off again.\n\n208\n00:10:39.920 --> 00:10:40.450\nThere we go.\n\n209\n00:10:40.450 --> 00:10:43.770\nSo I've got dual five neighbor change, and\n\n210\n00:10:43.770 --> 00:10:48.750\nthen I can see EIGRP IPv4 800, so\nthis is autonomous system 800.\n\n211\n00:10:48.750 --> 00:10:53.698\nNeighbor and I've got two neighbors.\n\n212\n00:10:53.698 --> 00:10:54.900\n172.88.0.10 and 172.16.1.1.\n\n213\n00:10:54.900 --> 00:11:00.620\nAnd then it says that they\nare down because K value mismatch.\n\n214\n00:11:00.620 --> 00:11:02.300\nAll right, remember with OSPF,\n\n215\n00:11:02.300 --> 00:11:05.450\nwhen you have neighbors there's\na lot of things that have to match.\n\n216\n00:11:05.450 --> 00:11:08.821\nYou have to have matching area numbers,\nyou have to have matching authentication,\n\n217\n00:11:08.821 --> 00:11:11.270\nyou have to have matching hello and\ndead intervals.\n\n218\n00:11:11.270 --> 00:11:14.310\nWell eigrp is the same way,\nthere's a lot of stuff that has to match.\n\n219\n00:11:14.310 --> 00:11:17.410\nWe have to have matching\nautonomous system numbers, and\n\n220\n00:11:17.410 --> 00:11:20.410\nwe've gotta have matching K-values.\n\n221\n00:11:20.410 --> 00:11:25.100\nAnd in my case, either the person on the\nother end has changed their K-values or\n\n222\n00:11:25.100 --> 00:11:27.518\nI've changed mine, one or the other.\n\n223\n00:11:27.518 --> 00:11:31.830\nAnd if I scroll back to some of\nmy debugs that we did, you'll see\n\n224\n00:11:31.830 --> 00:11:35.610\nmaybe a little bit more information,\nlets see if we got it in here.\n\n225\n00:11:35.610 --> 00:11:37.550\nNah, it's pretty much\nthe same information,\n\n226\n00:11:37.550 --> 00:11:41.980\nwe got that K value mismatch,\nwe see the peer going down, and that's it.\n\n227\n00:11:41.980 --> 00:11:46.180\nSo yeah, I'm not really seeing\nextra detailed in there, but\n\n228\n00:11:46.180 --> 00:11:48.930\nin this case I'm just dealing\nwith a K value mismatch.\n\n229\n00:11:48.930 --> 00:11:50.530\nSo lets see if I've changed mine.\n\n230\n00:11:50.530 --> 00:11:54.270\nIf you know the K values, if you have\nthem all memorized, show IP protocols,\n\n231\n00:11:54.270 --> 00:11:56.160\nit'll actually show that difference.\n\n232\n00:11:56.160 --> 00:11:57.320\nAnd when you look in here for\n\n233\n00:11:57.320 --> 00:12:02.050\nthe EIGRP section, you'll be able to find\nthe K values defined right in there.\n\n234\n00:12:02.050 --> 00:12:06.290\nAnd eventually, let's see,\nwhy is it not scrolling forward?\n\n235\n00:12:06.290 --> 00:12:07.930\nThere we go, I'm being impatient.\n\n236\n00:12:07.930 --> 00:12:10.140\nAll right, so\nhere I can see my metric weights.\n\n237\n00:12:10.140 --> 00:12:14.330\nAnd as I look at the weights,\nI see some K values and\n\n238\n00:12:14.330 --> 00:12:16.330\nthey are definitely different\nthat what I expect.\n\n239\n00:12:16.330 --> 00:12:20.050\nAll right, when you look at the K values,\nremember that\n\n240\n00:12:20.050 --> 00:12:23.250\none of them applies to bandwidth and\none of them applies to delay,\n\n241\n00:12:23.250 --> 00:12:28.130\nand the others apply to reliability load.\n\n242\n00:12:28.130 --> 00:12:32.790\nNot reliability,\nno it is reliability and load.\n\n243\n00:12:32.790 --> 00:12:35.320\nAnd then there's the MTU one\nthat really never counts.\n\n244\n00:12:35.320 --> 00:12:38.210\nSo what I expect to see is 10100, right?\n\n245\n00:12:38.210 --> 00:12:41.270\nK1 should be 1 because that is\nthe one that affects bandwidth if I\n\n246\n00:12:41.270 --> 00:12:42.060\nremember right.\n\n247\n00:12:42.060 --> 00:12:46.280\nAnd then K3 should be 1 because\nthat's the one that affects delay.\n\n248\n00:12:46.280 --> 00:12:50.580\nBut the others should be 0 because they're\nthe ones that affect the other metrics.\n\n249\n00:12:50.580 --> 00:12:53.410\nThese are not the standard\nmetrics right here.\n\n250\n00:12:53.410 --> 00:12:56.710\nNow, that may or may not be a problem,\nI may want it this way.\n\n251\n00:12:56.710 --> 00:12:59.270\nI may have manipulated this for\na specific reason, and\n\n252\n00:12:59.270 --> 00:13:03.110\nthe neighbors need to update theirs\nto reflect my K values, all right?\n\n253\n00:13:03.110 --> 00:13:05.440\nBut the odds are,\nthis is not what's right, right?\n\n254\n00:13:05.440 --> 00:13:08.590\nWe probably want to have\nthe correct K values, so\n\n255\n00:13:08.590 --> 00:13:13.310\nwhat I'm gonna do is just do a quick\n#show run of the EIGRP section.\n\n256\n00:13:14.660 --> 00:13:17.150\nAnd there we can see where the metric\nweights have been overridden.\n\n257\n00:13:18.330 --> 00:13:20.150\nAnd so I'm just gonna remove that command,\n\n258\n00:13:20.150 --> 00:13:26.400\nand then we'll be able to hopefully see\nsome neighbor relationships come up.\n\n259\n00:13:26.400 --> 00:13:27.570\nSo I'm gonna get into EIGRP.\n\n260\n00:13:28.820 --> 00:13:34.370\nI'll get into the ipv4 unicast family for\nautonomous system 800.\n\n261\n00:13:34.370 --> 00:13:37.480\nAnd then in here,\n\n262\n00:13:37.480 --> 00:13:42.040\nI'm gonna say no metric weights, and\nthen we can specify the weights.\n\n263\n00:13:42.040 --> 00:13:45.270\nNow, I just did the no metric weights and\nI didn't bother specifying the rest of it,\n\n264\n00:13:45.270 --> 00:13:48.020\nand that's because that should\nreset me back to default.\n\n265\n00:13:48.020 --> 00:13:52.010\nIf I do a show run, and I filter that for\n\n266\n00:13:52.010 --> 00:13:55.530\nthe EIGRP section, you'll see\nthat the metric command is gone.\n\n267\n00:13:55.530 --> 00:14:00.130\nAnd if I do a show IP protocols,\nand I go in and\n\n268\n00:14:00.130 --> 00:14:05.930\ntake a look at EIGRP, I can see\nthe values are now 1, 0, 1, 0, 0, 0.\n\n269\n00:14:05.930 --> 00:14:10.730\nThe K values are set to the ones\nthat we expect them to be.\n\n270\n00:14:10.730 --> 00:14:14.730\nOne's for delay and bandwidth,\nand zeros for everything else.\n\n271\n00:14:14.730 --> 00:14:18.737\nAnd now that they're set that way,\nassuming my neighbors are set that way,\n\n272\n00:14:18.737 --> 00:14:20.500\nthat should resolve that issue.\n\n273\n00:14:20.500 --> 00:14:23.180\nAnd if I do a show ip eigrp nei,\n\n274\n00:14:23.180 --> 00:14:27.600\nI now have some neighbor relationships,\nthat's a good sign.\n\n275\n00:14:27.600 --> 00:14:34.930\nAnd if I do a show ip route 192.168.224.1\nlet's see if we learned it.\n\n276\n00:14:34.930 --> 00:14:40.320\nI've got a route, and so\nnow I can try and ping, and there we go.\n\n277\n00:14:40.320 --> 00:14:41.590\nFive successful pings.\n\n278\n00:14:41.590 --> 00:14:45.310\nSo in this case, my router wasn't able\nto ping that I P because I didn't have\n\n279\n00:14:45.310 --> 00:14:49.990\na route and I didn't have a route because\nthe K values in EIGRP had been changed to\n\n280\n00:14:49.990 --> 00:14:53.580\na nonstandard value, and that caused the\nneighboring adjacencies not to come up.\n\n281\n00:14:53.580 --> 00:14:54.870\nWe fixed the values.\n\n282\n00:14:54.870 --> 00:14:56.640\nNow it's resolved, we can ping across.\n\n283\n00:14:56.640 --> 00:14:58.980\nWe're ready to move on to our\nnext troubleshooting question.\n\n284\n00:14:58.980 --> 00:15:00.530\nSo that wraps this one up.\n\n285\n00:15:00.530 --> 00:15:01.760\nHope you guys enjoyed it.\n\n286\n00:15:01.760 --> 00:15:04.662\nStay tuned,\nwe've got more troubleshooting coming up.\n\n287\n00:15:04.662 --> 00:15:12.499\n[MUSIC]\n\n",
          "vimeoId": "151013756"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #2` from set #5. The trouble ticket states that \"VRRP on NYEDGE2 is in a backup state, this should be the master \"",
          "length": "1167",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-5-2-set_5_issue_2-120315-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-5-2-set_5_issue_2-120315-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-5-2-set_5_issue_2-120315-1-sm.jpg",
          "title": "Set 5 Issue 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.210 --> 00:00:07.188\n[MUSIC]\n\n2\n00:00:07.188 --> 00:00:10.090\nWelcome back to another\ntroubleshooting video here on ITProTV.\n\n3\n00:00:10.090 --> 00:00:12.860\nAnd we're gonna be jumping into Set 5,\nIssue 2.\n\n4\n00:00:12.860 --> 00:00:16.100\nLooks like you've got some VRRP\ntroubles this time around.\n\n5\n00:00:16.100 --> 00:00:19.180\nLet me read the support ticket to you and\nwe'll see what we've got to work with.\n\n6\n00:00:19.180 --> 00:00:26.782\nTelling us here that VRRP on NYEDGE2 is in\na backup state, this should be the master.\n\n7\n00:00:26.782 --> 00:00:28.590\nAll right,\nwell let's look at our topology here and\n\n8\n00:00:28.590 --> 00:00:30.690\nwe'll kinda get an idea of\nwhere this is coming from.\n\n9\n00:00:30.690 --> 00:00:35.560\nSo, it doesn't look like I have anything\non my diagram that indicates how VRRP is\n\n10\n00:00:35.560 --> 00:00:39.100\nconfigured, so I don't know who's\nthe backup or anything like that.\n\n11\n00:00:39.100 --> 00:00:43.160\nI just know that NYEDGE2 is running\nVRRP cuz they told me that and\n\n12\n00:00:43.160 --> 00:00:44.890\nI know it's supposed to be the master.\n\n13\n00:00:44.890 --> 00:00:47.660\nBut I don't really know anything about\nthe configuration beyond that so\n\n14\n00:00:47.660 --> 00:00:50.630\nthere's a lot of missing holes we're\ngonna have to figure out here.\n\n15\n00:00:50.630 --> 00:00:54.990\nAnd we're just gonna start on NYEDGE2 and\nfind out why this one isn't kicking up.\n\n16\n00:00:54.990 --> 00:00:59.780\nIn my mind, I'm trying to think of all the\ndifferent things that can cause VRRP not\n\n17\n00:00:59.780 --> 00:01:00.750\nto function.\n\n18\n00:01:00.750 --> 00:01:03.870\nI'm thinking about connectivity\nwith whoever the backup is.\n\n19\n00:01:03.870 --> 00:01:08.270\nI'm thinking about priority levels and\npreemption and all of those.\n\n20\n00:01:08.270 --> 00:01:10.220\nThose are the things that we're\ngonna have to keep an eye out for.\n\n21\n00:01:10.220 --> 00:01:13.970\nBut, for the most part VRRP is\nfairly easy to troubleshoot.\n\n22\n00:01:13.970 --> 00:01:16.400\nSo if we just look at our configuration\nwe're more than likely spot what\n\n23\n00:01:16.400 --> 00:01:17.170\nthe problem is.\n\n24\n00:01:17.170 --> 00:01:20.820\nSo let's jump over to NYEDGE2 and\nsee what we can find.\n\n25\n00:01:20.820 --> 00:01:24.910\nMaybe this will turn out to be an easy\none, and we'll be in and out on this one.\n\n26\n00:01:24.910 --> 00:01:27.420\nAll right, so jumping over to NYEDGE2 I'm\n\n27\n00:01:27.420 --> 00:01:32.570\ngonna start just by doing\na quick show VRRP brief.\n\n28\n00:01:32.570 --> 00:01:36.270\nShow VRRP brief will give me kind of the\nbasic information that I need to figure\n\n29\n00:01:36.270 --> 00:01:40.180\nout how VRRP is configured without having\nto hunt around on the router too much.\n\n30\n00:01:40.180 --> 00:01:45.090\nI can see that I'm running VRRP\nright here on GI0/1, so I'm only\n\n31\n00:01:45.090 --> 00:01:48.340\nrunning in on one interface, again\ntrying to make my life a little easier.\n\n32\n00:01:48.340 --> 00:01:50.075\nI can see that I'm configured for\ngroup 10.\n\n33\n00:01:50.075 --> 00:01:52.234\nMy priority is 99.\n\n34\n00:01:52.234 --> 00:01:58.340\nNow, I know the default for VRRP has a\npriority of 100, this is not the default.\n\n35\n00:01:58.340 --> 00:02:04.160\nSo that tells me either somebody has\nstatically assigned the priority to 99 or\n\n36\n00:02:04.160 --> 00:02:06.590\nI'm being decremented because\nof some kinda track object.\n\n37\n00:02:06.590 --> 00:02:10.080\nThose are the two times that\nwe see a nonstandard priority.\n\n38\n00:02:10.080 --> 00:02:12.640\nAnd then as I look over here,\nmy state is Init.\n\n39\n00:02:12.640 --> 00:02:14.850\nI should be the master, but I'm not.\n\n40\n00:02:14.850 --> 00:02:20.070\nI'm in Init, and as I scroll over I can\nsee that that the master address is 0.0.0.\n\n41\n00:02:20.070 --> 00:02:24.250\nSo not only am I not the master,\nif somebody else is the master,\n\n42\n00:02:24.250 --> 00:02:24.960\nI don't know about them.\n\n43\n00:02:24.960 --> 00:02:26.040\nI can't see them.\n\n44\n00:02:26.040 --> 00:02:29.810\nSo that makes me think connectivity issue,\nthat whoever is the standby,\n\n45\n00:02:29.810 --> 00:02:32.050\nI might not be able to\nsee them on the network.\n\n46\n00:02:32.050 --> 00:02:35.350\nBut if that was the case,\nI should become the master.\n\n47\n00:02:36.810 --> 00:02:39.650\nUnless that interface being down is\nwhat's actually decrementing my priority,\n\n48\n00:02:39.650 --> 00:02:43.850\ncuz a lot of stuff then cascade with VRRP,\nso I have to pay attention to that.\n\n49\n00:02:43.850 --> 00:02:50.340\nBut my group address is 172.14.0.10,\nmy individual IP on that interface I don't\n\n50\n00:02:50.340 --> 00:02:55.400\nactually know, so let's just quickly take\na look at that interface configuration.\n\n51\n00:02:55.400 --> 00:03:01.110\nAnd when we pull that up,\nmy IP is 172.14.0.12.\n\n52\n00:03:01.110 --> 00:03:03.386\nAnd the shared IP is .10.\n\n53\n00:03:03.386 --> 00:03:08.800\nAnd as I look at it, all right I'm\nkinda seeing a few possible problems.\n\n54\n00:03:08.800 --> 00:03:11.410\nThis one's jumping out at\nme pretty big right here.\n\n55\n00:03:11.410 --> 00:03:12.890\nThe interface is shutdown.\n\n56\n00:03:12.890 --> 00:03:16.360\nIf it's shutdown, I'm probably\nnot gonna become a VRRP master.\n\n57\n00:03:16.360 --> 00:03:19.160\nSo there's possible problem number one.\n\n58\n00:03:19.160 --> 00:03:23.080\nPossible problem number two,\nmy priority is not of the default.\n\n59\n00:03:23.080 --> 00:03:29.480\nIt's 149 and there's a track object right\nafter it that says to decrement by 50.\n\n60\n00:03:29.480 --> 00:03:31.170\nWell 149 minus 50 is 99,\n\n61\n00:03:31.170 --> 00:03:36.080\nand I saw in show VRRP brief that\nthat's what my priority was at.\n\n62\n00:03:36.080 --> 00:03:39.570\nSo that means that not only\nis my interface shutdown but\n\n63\n00:03:39.570 --> 00:03:43.910\nmy track object is failing also,\nand so I'm being decremented 50.\n\n64\n00:03:43.910 --> 00:03:47.130\nNow, my track object could be\ntracking this interface, and\n\n65\n00:03:47.130 --> 00:03:49.720\nthis interface is down, so\nthey could be related, and\n\n66\n00:03:49.720 --> 00:03:52.890\ndoing a no shutdown might solve all\nour problems, and this one goes away.\n\n67\n00:03:52.890 --> 00:03:54.650\nSo, let's see if that's the case.\n\n68\n00:03:54.650 --> 00:03:57.560\nSo, I'm gonna get into gi0/1, and\n\n69\n00:03:57.560 --> 00:04:00.100\nsee if this is gonna be the easiest\nquestion we deal with today.\n\n70\n00:04:00.100 --> 00:04:03.620\nI'll issue a no shutdown on it, and\nthen I'll give it just a moment.\n\n71\n00:04:03.620 --> 00:04:07.220\nI'll do a show IP interface brief\nto make sure that it goes up, up.\n\n72\n00:04:07.220 --> 00:04:10.480\nWhenever you turn an interface on, you've\nalways gotta give it at least a moment to\n\n73\n00:04:10.480 --> 00:04:13.870\nrun because we might have spanning\ntree doing calculations or whatever.\n\n74\n00:04:13.870 --> 00:04:14.670\nAll right, there we go.\n\n75\n00:04:14.670 --> 00:04:15.804\nThat interface is now up.\n\n76\n00:04:15.804 --> 00:04:23.745\nAnd if I do a show VRRP brief I see\nthat I still have that priority of 99.\n\n77\n00:04:23.745 --> 00:04:27.495\nAnd I might have to wait a moment,\nI can do a full show VRRP and\n\n78\n00:04:27.495 --> 00:04:29.378\nnot the brief output.\n\n79\n00:04:29.378 --> 00:04:32.680\nAnd just kinda see if any other errors\nare jumping out at me here while I wait.\n\n80\n00:04:32.680 --> 00:04:37.765\nPreemption is enabled, my priority is\nstill 99 even though I'm configured for\n\n81\n00:04:37.765 --> 00:04:38.450\n149.\n\n82\n00:04:38.450 --> 00:04:41.830\nMy track object is still down, all right.\n\n83\n00:04:41.830 --> 00:04:47.310\nSo the track object is tracking something\nother than the interface status of GI0/1,\n\n84\n00:04:47.310 --> 00:04:51.150\nso I've got a bigger problem,\nsome kinda secondary issue.\n\n85\n00:04:51.150 --> 00:04:54.210\nSo, turning interface on,\nthat's obviously gonna help, and\n\n86\n00:04:54.210 --> 00:04:57.310\nnotice that my state is now Backup.\n\n87\n00:04:57.310 --> 00:04:58.527\nI'm not init anymore.\n\n88\n00:04:58.527 --> 00:05:02.526\nThat means that somebody else has become\nthe master router, and I can see them,\n\n89\n00:05:02.526 --> 00:05:03.971\n172.14.0.11.\n\n90\n00:05:03.971 --> 00:05:10.680\nSo I've solved part of my problem, VRRP\nis now working, but I'm not the master.\n\n91\n00:05:10.680 --> 00:05:12.890\nI'm supposed to be the master,\ninstead I'm the backup.\n\n92\n00:05:12.890 --> 00:05:15.690\nAnd that's probably because\nmy priority is too low.\n\n93\n00:05:15.690 --> 00:05:19.311\nIf you look at this Master Router\nits priority is 100.\n\n94\n00:05:19.311 --> 00:05:20.576\nMine is 99.\n\n95\n00:05:20.576 --> 00:05:23.768\nIf I can get this track object to come up,\nmy priority to go 149 and\n\n96\n00:05:23.768 --> 00:05:26.880\nbecause preemption is enabled,\nwe'll become the master.\n\n97\n00:05:26.880 --> 00:05:30.230\nSo now our entire world rotates\naround this track object,\n\n98\n00:05:30.230 --> 00:05:32.260\nlet's see what's going on there.\n\n99\n00:05:32.260 --> 00:05:37.090\nNow, when I look at the config, I saw that\nI was tracking a particular object and\n\n100\n00:05:38.100 --> 00:05:40.270\nwe saw that in the interface.\n\n101\n00:05:41.420 --> 00:05:44.540\nRight here, so it's doing track 1.\n\n102\n00:05:44.540 --> 00:05:46.040\nSo I need to take a look at that one, so\n\n103\n00:05:46.040 --> 00:05:50.030\nif I do show track 1 we can take\na look at what that's doing.\n\n104\n00:05:50.030 --> 00:05:53.276\nIt's monitoring a route,\nso it's looking for\n\n105\n00:05:53.276 --> 00:06:00.250\na route 192.168.17.32 with\na 255.255.255.224 subnet mask.\n\n106\n00:06:00.250 --> 00:06:01.530\nAnd it's just testing reachability,\n\n107\n00:06:01.530 --> 00:06:04.830\nwhich means is that route\npresent in our routing table?\n\n108\n00:06:04.830 --> 00:06:07.270\nAnd if it's not,\nthen the track object fails.\n\n109\n00:06:07.270 --> 00:06:08.870\nAnd that's what it's telling me,\nreachability is down,\n\n110\n00:06:08.870 --> 00:06:11.970\nwe don't have that route and\nthat's the end of it.\n\n111\n00:06:11.970 --> 00:06:13.080\nSo we're being decremented.\n\n112\n00:06:13.080 --> 00:06:15.300\nSo, why am I missing that route?\n\n113\n00:06:15.300 --> 00:06:19.684\nWell, I guess first off I can verify\nthat I am missing that route.\n\n114\n00:06:19.684 --> 00:06:22.678\nI mean I trust the track object,\nit's not gonna lie to me, but\n\n115\n00:06:22.678 --> 00:06:26.321\nwe can see if we've got anything\nthat starts with 192.168.17.\n\n116\n00:06:26.321 --> 00:06:30.024\nAnd I do have a couple of routes,\nbut I don't have this one.\n\n117\n00:06:30.024 --> 00:06:31.615\nI don't have the .32.\n\n118\n00:06:31.615 --> 00:06:33.623\nI've got .0 and .64.\n\n119\n00:06:33.623 --> 00:06:35.504\nI don't have .32.\n\n120\n00:06:35.504 --> 00:06:39.170\nAll right, now where's that route\nsupposed to be coming from?\n\n121\n00:06:39.170 --> 00:06:40.720\nLet's look at our topology here,\n\n122\n00:06:40.720 --> 00:06:44.870\ncuz that network isn't striking me as\nsomething that I'm familiar with, and so\n\n123\n00:06:44.870 --> 00:06:50.640\nwhen we look for that 192.168.17,\nwhere is that supposed to come from?\n\n124\n00:06:50.640 --> 00:06:57.875\nWell, if I look at my tables here from\noutside the network I don't see any\n\n125\n00:06:57.875 --> 00:07:01.760\n192.168 addresses, so it must be coming\nfrom inside of my network somewhere.\n\n126\n00:07:01.760 --> 00:07:05.690\nAnd inside of my network I don't\nhave very good documentation.\n\n127\n00:07:05.690 --> 00:07:09.760\nNYEDGE2, I see this little cloud here\nwhich indicates I've got a dynamic routing\n\n128\n00:07:09.760 --> 00:07:12.910\nprotocol, but it's not really telling\nme about that protocol at all.\n\n129\n00:07:12.910 --> 00:07:13.820\nI don't know what it is.\n\n130\n00:07:13.820 --> 00:07:17.520\nI could assume it's EIGRP cuz\nthe EIGRP is blue over here.\n\n131\n00:07:17.520 --> 00:07:19.700\nBut at this point,\nI don't really trust this diagram at all.\n\n132\n00:07:19.700 --> 00:07:23.790\nSo let's just look at the router,\nand we'll figure it out from here.\n\n133\n00:07:23.790 --> 00:07:26.940\nYou can trust your router,\na diagram is suspect.\n\n134\n00:07:26.940 --> 00:07:31.283\nSo I'm just gonna do a quick show IP\nprotocols to see what I'm running.\n\n135\n00:07:31.283 --> 00:07:37.801\nAnd when I look at it, I can see that I\nam running eigrp 800, and is that it?\n\n136\n00:07:37.801 --> 00:07:42.248\nLet's see, yeah, so it looks like\nwe've got EIGRP 800 and that's it.\n\n137\n00:07:42.248 --> 00:07:43.559\nAnd if I go back to my diagram,\n\n138\n00:07:43.559 --> 00:07:45.976\nthat's where this kinda\ngets a little weird, right?\n\n139\n00:07:45.976 --> 00:07:51.502\nI've got EIGRP 800 way out here, and\napparently it's extending over to NYEDGE2.\n\n140\n00:07:51.502 --> 00:07:57.280\nSo I'm in this EIGRP range and I guess\nin theory I'm supposed to be learning\n\n141\n00:07:57.280 --> 00:08:02.522\nthis 192.168.17.32 network\nfrom the EIGRP 800.\n\n142\n00:08:02.522 --> 00:08:04.750\nIt's gotta come from somewhere.\n\n143\n00:08:04.750 --> 00:08:08.790\nAnd we could kinda verify that if we\nlook at the other 192.168.17 routes and\n\n144\n00:08:08.790 --> 00:08:10.570\nwhere they're coming from.\n\n145\n00:08:10.570 --> 00:08:13.720\nSo, when I looked at my routing table and\n\n146\n00:08:13.720 --> 00:08:19.390\nI did a show IP route, well here,\nI can just pull it up on my history.\n\n147\n00:08:19.390 --> 00:08:23.030\nSo I have those two networks and\nbecause they're external routes,\n\n148\n00:08:23.030 --> 00:08:25.120\nthe output is kind of obscuring it.\n\n149\n00:08:25.120 --> 00:08:27.820\nLet me just do a full show IP route, and\n\n150\n00:08:27.820 --> 00:08:30.775\nwe can look in here and figure out\nwhere those routes are coming from.\n\n151\n00:08:30.775 --> 00:08:35.020\nAnd because 192.168.17.32 is\nin-between the other two routes,\n\n152\n00:08:35.020 --> 00:08:38.540\nit makes sense that it'll be\ncoming from the same area.\n\n153\n00:08:38.540 --> 00:08:44.726\nSo as I look at it, I can see they're\ncoming from somewhere outside of EIGRP and\n\n154\n00:08:44.726 --> 00:08:51.883\nthat we learned them via 192.168.16.1 and\nvia 192.168.15.1.\n\n155\n00:08:51.883 --> 00:08:57.200\nIn our previous sets,\nwe saw where 192.168.16.1\n\n156\n00:08:57.200 --> 00:09:02.917\nwas an HSRP address that was shared\nbetween NYCORE1 and NYCORE2,\n\n157\n00:09:02.917 --> 00:09:09.254\nand looking at my topology, NYCORE1 and\nNYCORE2 are not a part of EIGRP.\n\n158\n00:09:09.254 --> 00:09:11.110\nThey're over here in OSPF.\n\n159\n00:09:12.120 --> 00:09:14.870\nSo if the routes\nare originating from OSPF,\n\n160\n00:09:14.870 --> 00:09:19.050\nthen NYEDGE1 should be\nlearning those routes and\n\n161\n00:09:19.050 --> 00:09:23.860\nthen sharing them, redistributing them in\nthe EIGRP 800 so we get them from there.\n\n162\n00:09:23.860 --> 00:09:26.547\nSo let's see if NYEDGE1 has\nthe route that we're missing.\n\n163\n00:09:26.547 --> 00:09:30.587\nSo, we'll jump over to NYEDGE1 and\nsee what it's got.\n\n164\n00:09:30.587 --> 00:09:37.165\nWhen I get into its routing table,\nI'll just do a show IP route.\n\n165\n00:09:37.165 --> 00:09:41.425\nAnd I'm gonna look for\nthose 192.168.17 routes.\n\n166\n00:09:41.425 --> 00:09:43.585\nAnd particularly I'm looking for\nthe .32 one.\n\n167\n00:09:43.585 --> 00:09:46.858\nAnd so when I look through here,\n\n168\n00:09:46.858 --> 00:09:51.346\nwe've got some 192.168.1s, and\n\n169\n00:09:51.346 --> 00:09:56.683\nI am not seeing 192.168.17.anything,\n\n170\n00:09:56.683 --> 00:09:59.481\nso that's not a good sign.\n\n171\n00:09:59.481 --> 00:10:04.452\nI'm just gonna do a real quick show\nIP route for 192.168.17.32, since\n\n172\n00:10:04.452 --> 00:10:09.930\nthat's the target network we're looking\nfor, and I don't have it here either.\n\n173\n00:10:09.930 --> 00:10:14.480\nSo, if neither of my edge routers have it,\nthen it's not like I can learn it,\n\n174\n00:10:14.480 --> 00:10:14.980\nthey don't have it.\n\n175\n00:10:14.980 --> 00:10:17.260\nSo I need to find out where\nthis route's originating from.\n\n176\n00:10:17.260 --> 00:10:20.381\nSo let's take a look at some of the other\ndevices and we'll see if we can spot it.\n\n177\n00:10:20.381 --> 00:10:24.210\nI'm gonna jump over to one of my core\nswitches since this is where I was\n\n178\n00:10:24.210 --> 00:10:26.470\nlearning the other two routes, right?\n\n179\n00:10:26.470 --> 00:10:32.412\nI learned 192.168.17.0 and .64.\n\n180\n00:10:32.412 --> 00:10:36.330\nBut I didn't learn .32 so\nI'm just gonna see if .32 exists here.\n\n181\n00:10:36.330 --> 00:10:42.110\nSo I'll do a show IP route, and\nI'm gonna skim through on this one and\n\n182\n00:10:42.110 --> 00:10:46.160\nlook for those 192.168.17 networks and\nsee if we can find them.\n\n183\n00:10:46.160 --> 00:10:50.830\nWe got a bunch of them, but no .17,\nso it doesn't exist here either.\n\n184\n00:10:52.930 --> 00:10:56.720\nAnd that seems odd cuz it\ncame from one of these guys.\n\n185\n00:10:56.720 --> 00:11:01.465\nLet's see if we can find\nany of these routes.\n\n186\n00:11:01.465 --> 00:11:02.457\nAll right, they're not there.\n\n187\n00:11:02.457 --> 00:11:05.210\nI'm sorry, we might have\na head scratcher on this one.\n\n188\n00:11:05.210 --> 00:11:07.390\nLet's jump over to CORE2 and double check.\n\n189\n00:11:07.390 --> 00:11:10.174\nNow I am using an assumption here.\n\n190\n00:11:10.174 --> 00:11:16.408\nI'm assuming that 192.168.16.1 is an HSRP\naddress shared between these guys.\n\n191\n00:11:16.408 --> 00:11:21.048\nI guess I should check that and see,\ncuz this is a new topology, and so\n\n192\n00:11:21.048 --> 00:11:24.419\nit looks like it's not\nan HSRP instance anymore.\n\n193\n00:11:24.419 --> 00:11:27.481\nSo that's where we have to be careful,\nwhen you move from question to question,\n\n194\n00:11:27.481 --> 00:11:30.227\nyou can't assume what existed in one\ntopology still exists here, and so\n\n195\n00:11:30.227 --> 00:11:31.099\nI can see this is gone.\n\n196\n00:11:31.099 --> 00:11:36.230\nI need to find who is 192.168.16.1.\n\n197\n00:11:36.230 --> 00:11:40.428\nBecause on EDGE2 when I\nlearned those other routes,\n\n198\n00:11:40.428 --> 00:11:47.330\n192.168.16.1 and 15.1,\nthose were the sources that I had.\n\n199\n00:11:47.330 --> 00:11:50.874\nAnd I was learning them on\nGigabitEthernet0/0.16 and\n\n200\n00:11:50.874 --> 00:11:54.218\n.15 which I'll bet our router\non a stick interfaces.\n\n201\n00:11:54.218 --> 00:11:56.889\nSo that means they're tied to a VLAN.\n\n202\n00:11:56.889 --> 00:11:58.108\nAnd that means they could be anywhere.\n\n203\n00:11:58.108 --> 00:12:01.696\nAnd if I pull up those interfaces and\nlook at it,\n\n204\n00:12:01.696 --> 00:12:06.080\nsure enough I see those\nencapsulation commands.\n\n205\n00:12:06.080 --> 00:12:09.560\nAnd those are going to\nbe tied to somebody.\n\n206\n00:12:09.560 --> 00:12:14.750\nNow just looking in here, I happen to\nnotice we have an IP policy map on here,\n\n207\n00:12:14.750 --> 00:12:17.040\na route map, with policy-based routing.\n\n208\n00:12:17.040 --> 00:12:19.400\nSo there's some route\nmanipulation going on here.\n\n209\n00:12:19.400 --> 00:12:21.360\nBut before I can figure out\nwhether that's right or wrong,\n\n210\n00:12:21.360 --> 00:12:24.550\nI still need to figure out who .1 is.\n\n211\n00:12:24.550 --> 00:12:27.210\nAnd so to to help me out here,\nactually you know what,\n\n212\n00:12:27.210 --> 00:12:29.580\nlet's see if we can cheat a little bit and\ndo a show CDP neighbor,\n\n213\n00:12:29.580 --> 00:12:33.450\nand if we're running CDP it might be\nable to help me figure out who that is.\n\n214\n00:12:34.570 --> 00:12:38.563\nSo if I do a show CDP entry for NYCORE2,\n\n215\n00:12:38.563 --> 00:12:43.860\nlet's see what IP I'm\npicking that one up on.\n\n216\n00:12:43.860 --> 00:12:48.500\nAnd It's 15.1, I'll bet it's 16.1 also.\n\n217\n00:12:48.500 --> 00:12:50.474\nGood.\nAll right, so let's jump over to CORE2 and\n\n218\n00:12:50.474 --> 00:12:51.526\ntake a look at that guy.\n\n219\n00:12:51.526 --> 00:12:56.338\nAll right, so here's CORE2, and\non CORE2, if I do a show IP route,\n\n220\n00:12:56.338 --> 00:13:00.918\nI'm expecting to find these\nnetworks that I'm supposed to have.\n\n221\n00:13:00.918 --> 00:13:03.266\nIf they're not here, we're really\ngonna have to do some searching.\n\n222\n00:13:03.266 --> 00:13:04.810\nAll right, there they go, good.\n\n223\n00:13:04.810 --> 00:13:07.980\nAll right, so here's 192.168.17,\nso we finally found it.\n\n224\n00:13:07.980 --> 00:13:11.792\nAnd I've got 192.168.17.1,\n\n225\n00:13:11.792 --> 00:13:16.431\nI've got 17.32, and 17.64, all right.\n\n226\n00:13:16.431 --> 00:13:21.514\nAnd in the routing table of NYEDGE2,\nI had 192.168.17.0 and\n\n227\n00:13:21.514 --> 00:13:26.390\nI had .64, I was missing .32,\nwhich is in between them.\n\n228\n00:13:26.390 --> 00:13:28.300\nAll right, but I can see it right here.\n\n229\n00:13:28.300 --> 00:13:31.500\nSo this is the router where\nthose routes originate.\n\n230\n00:13:31.500 --> 00:13:32.630\nAnd it's a switch.\n\n231\n00:13:32.630 --> 00:13:33.670\nIt's this guy right here,\n\n232\n00:13:33.670 --> 00:13:38.610\nNYCORE2, and I should be learning\nthose routes on this link, right?\n\n233\n00:13:38.610 --> 00:13:39.940\nWell, not necessarily.\n\n234\n00:13:39.940 --> 00:13:44.210\nNotice how NYCORE2 is not showing as\nbeing in any dynamic routing protocol.\n\n235\n00:13:44.210 --> 00:13:46.860\nSo I don't really know\nhow I'm learning those.\n\n236\n00:13:46.860 --> 00:13:48.390\nExcept I do.\n\n237\n00:13:48.390 --> 00:13:52.480\nI saw them in EIGRP 800, and\nI saw them as external routes.\n\n238\n00:13:52.480 --> 00:13:56.230\nSo EIGRP is not necessarily running here.\n\n239\n00:13:56.230 --> 00:14:00.510\nIt could be in OSPF Area 0 and\nthe diagram could just be wrong, right?\n\n240\n00:14:00.510 --> 00:14:02.880\nLet's see if we've got any\nrouting protocols on this thing.\n\n241\n00:14:02.880 --> 00:14:09.970\nSo if I do a show IP protocols,\nNYCORE2 is running a routing protocol.\n\n242\n00:14:09.970 --> 00:14:13.200\nIt's running EIGRP 800,\nthe stinking document is wrong.\n\n243\n00:14:13.200 --> 00:14:15.350\nSo, that's really gonna throw us for\na loop, right?\n\n244\n00:14:15.350 --> 00:14:20.440\nThis guy is actually in EIGRP 800,\nand I'm in EIGRP 800.\n\n245\n00:14:20.440 --> 00:14:22.212\nLet's see what interfaces are active for\nit.\n\n246\n00:14:22.212 --> 00:14:27.088\nSo if I get down to the bottom here, I'll\nsee that I'm routing for 192.168.15 and\n\n247\n00:14:27.088 --> 00:14:27.600\n.16.\n\n248\n00:14:27.600 --> 00:14:30.932\nIn fact, if I do a show IP,\nEIGRP neighbor,\n\n249\n00:14:30.932 --> 00:14:36.621\nI expect we've got a neighbor adjacency\nbuilt between these two systems.\n\n250\n00:14:36.621 --> 00:14:37.747\nAnd we do.\n\n251\n00:14:37.747 --> 00:14:43.053\n192.160.16.5 and 15.5, that's NYEDGE2.\n\n252\n00:14:43.053 --> 00:14:46.940\nAnd I've got a neighbor relationship\nbuilt right up with it,\n\n253\n00:14:46.940 --> 00:14:49.070\nright here on VLAN 15 and 16.\n\n254\n00:14:49.070 --> 00:14:52.400\nSo this problem should actually be an easy\none to solve, even though we've had to do\n\n255\n00:14:52.400 --> 00:14:55.070\na lot of research to figure\nout where the problem is.\n\n256\n00:14:55.070 --> 00:14:59.240\nWe're running EIGRP right\nacross this link, and NYEDGE2,\n\n257\n00:14:59.240 --> 00:15:02.680\nwe've got a neighbor relationship, we\nshould be telling them about that network.\n\n258\n00:15:02.680 --> 00:15:05.860\nWell, unless we forgot to\nput it in the EIGRP process.\n\n259\n00:15:05.860 --> 00:15:06.928\nLet's see if that's the case.\n\n260\n00:15:06.928 --> 00:15:11.743\nWhen I do a show IP route and\nfound those interfaces,\n\n261\n00:15:11.743 --> 00:15:16.024\nin fact,\nwe should be able to filter this one.\n\n262\n00:15:16.024 --> 00:15:19.948\nIf I look for 192.168.17, there we go.\n\n263\n00:15:19.948 --> 00:15:23.125\nThey're directly connected to\nthese VLAN interfaces, right?\n\n264\n00:15:23.125 --> 00:15:27.778\nAnd, if I do a show run for\nthe EIGRP section,\n\n265\n00:15:27.778 --> 00:15:33.424\nwe can see the network\ncommands that are advertising.\n\n266\n00:15:33.424 --> 00:15:39.217\nAnd then I've got a network 192.168.15,\nand a network 192.168.16.\n\n267\n00:15:39.217 --> 00:15:45.430\nI don't have a network for 192.168.17, so\nthey're not in the EIGRP process, right?\n\n268\n00:15:45.430 --> 00:15:48.240\nWell, the very next thing\nis redistribute connected.\n\n269\n00:15:48.240 --> 00:15:52.488\nSo it's redistributing the connected\nroutes into EIGRP, which would include all\n\n270\n00:15:52.488 --> 00:15:56.020\nof these VLAN interfaces including\nthe network that I'm concerned with.\n\n271\n00:15:56.020 --> 00:16:00.780\nBut right at the end of that command\nis a route map that says whether or\n\n272\n00:16:00.780 --> 00:16:05.730\nnot we're pushing certain routes, so\nlet's take a look at that route map.\n\n273\n00:16:05.730 --> 00:16:10.290\nAnd see if we're listed, okay.\n\n274\n00:16:10.290 --> 00:16:12.150\nLooks like we're matching an access list.\n\n275\n00:16:12.150 --> 00:16:15.320\nSo we've got access list\n1 tied to that route map.\n\n276\n00:16:15.320 --> 00:16:20.767\nAnd so if I do a show access list 1,\nit's doing 192.160.17.0 and\n\n277\n00:16:20.767 --> 00:16:26.810\n.64 the two that I'm getting, and\nconveniently, .32 is left out, all right?\n\n278\n00:16:26.810 --> 00:16:28.350\nSo, there's gonna be our problem.\n\n279\n00:16:28.350 --> 00:16:32.240\nIt's not redistributing that\nconnected route in the EIGRP.\n\n280\n00:16:32.240 --> 00:16:35.090\nSo, I've got two ways to solve this.\n\n281\n00:16:35.090 --> 00:16:37.420\nMethod one, I could just add it\nright here to this access list.\n\n282\n00:16:37.420 --> 00:16:38.149\nAnd, that's probably the best.\n\n283\n00:16:38.149 --> 00:16:42.622\nMethod two, I could add that interface\nright into the EIGRP process, but\n\n284\n00:16:42.622 --> 00:16:46.242\nsince they have this nice ACL\nhere we can just add on to that.\n\n285\n00:16:46.242 --> 00:16:47.310\nSo that's what I'm gonna do.\n\n286\n00:16:47.310 --> 00:16:55.238\nSo I'll say ip access-list\n1 permit 192.168.17.32.\n\n287\n00:16:55.238 --> 00:17:00.342\nAnd they've got a 31-bit\nsubnet mask on this one, so\n\n288\n00:17:00.342 --> 00:17:06.751\na really tight network, so\nit's just gonna be 0.0.0.0.1,\n\n289\n00:17:06.751 --> 00:17:10.351\nand it was access list 1, wasn't it?\n\n290\n00:17:10.351 --> 00:17:13.790\nLet's see, you know what,\nI did IP at the beginning.\n\n291\n00:17:13.790 --> 00:17:17.330\nWhen you do the old style access list,\nyou don't need the IP keyword.\n\n292\n00:17:17.330 --> 00:17:20.050\nSo let me get rid of that,\nand there we go.\n\n293\n00:17:20.050 --> 00:17:24.690\nSo now our route is a part of that access\nlist, and we should be good to go, right?\n\n294\n00:17:24.690 --> 00:17:27.100\nSo that'll start advertising\nout usually pretty quick, so\n\n295\n00:17:27.100 --> 00:17:32.000\nlet's jump over to NYEDGE2 and\nsee if it's starting to get that route.\n\n296\n00:17:32.000 --> 00:17:39.130\nSo I had a route for the other ones and\nI'm gonna filter for 192.168.17.\n\n297\n00:17:39.130 --> 00:17:42.020\nAnd now I've got 32 in the network also.\n\n298\n00:17:42.020 --> 00:17:45.740\nSo going back to my original\ntroubleshooting ticket, it was telling me\n\n299\n00:17:45.740 --> 00:17:50.780\nthat we had VRRP failing because this\nroute wasn't in the routing table.\n\n300\n00:17:50.780 --> 00:17:53.090\nI know it's been a long time\nsince we talked about VRRP.\n\n301\n00:17:53.090 --> 00:17:55.430\nNow that the route is\nin the routing table,\n\n302\n00:17:55.430 --> 00:17:59.500\nif I look at that track object,\nthere we go.\n\n303\n00:17:59.500 --> 00:18:05.080\nNow I can see reachability is up, learned\nvia EIGRP, so we should be good there.\n\n304\n00:18:05.080 --> 00:18:07.590\nAnd, if I do a show VRRP,\n\n305\n00:18:07.590 --> 00:18:13.340\nwhat I hope to see is that my priority\nis now 149, and I'm the master.\n\n306\n00:18:13.340 --> 00:18:16.160\nSo we had a lot of exploration\nto do on this one to solve what\n\n307\n00:18:16.160 --> 00:18:18.030\noriginally was a VRRP problem, right?\n\n308\n00:18:18.030 --> 00:18:19.630\nWe saw that we weren't the master.\n\n309\n00:18:19.630 --> 00:18:23.990\nWe saw that our priority was being\ndecremented because of a failed track.\n\n310\n00:18:23.990 --> 00:18:26.410\nAnd then we had an interface down,\nwe fixed that.\n\n311\n00:18:26.410 --> 00:18:29.840\nThen we had to figure out where that route\nwas coming from cuz the documentation\n\n312\n00:18:29.840 --> 00:18:30.690\ndidn't give it to us.\n\n313\n00:18:30.690 --> 00:18:32.140\nSo I had to do a little exploring.\n\n314\n00:18:32.140 --> 00:18:33.710\nWe did finally find that route.\n\n315\n00:18:33.710 --> 00:18:39.020\nAnd once we found it we fixed the route\nmap that was filtering that route out,\n\n316\n00:18:39.020 --> 00:18:42.625\ngot it advertised back into EIGRP,\nour track object went up.\n\n317\n00:18:42.625 --> 00:18:47.080\nVRRP became happy, our priority went\nback to 149 and we became the master.\n\n318\n00:18:47.080 --> 00:18:51.720\nThat was a series of events that\nwe had to kinda jump through and\n\n319\n00:18:51.720 --> 00:18:53.430\nthat was a pretty hard one, right?\n\n320\n00:18:53.430 --> 00:18:56.220\nThere was a moment there where I\ndidn't know if I was gonna be able to\n\n321\n00:18:56.220 --> 00:18:57.090\nfind that spot.\n\n322\n00:18:57.090 --> 00:18:59.442\nYou just keep digging, keep looking,\ngathering information.\n\n323\n00:18:59.442 --> 00:19:03.967\nAt the end of the day we really only\nmade two changes, no shutdown on one\n\n324\n00:19:03.967 --> 00:19:08.282\ninterface and we added one line to\nan ACL to add that extra network.\n\n325\n00:19:08.282 --> 00:19:12.690\nSo the fix was easy, but figuring out\nwhat to do was actually pretty hard.\n\n326\n00:19:12.690 --> 00:19:15.410\nSo that was a fun problem right there,\nI hope we get more like that.\n\n327\n00:19:15.410 --> 00:19:18.130\nAll right, well that wraps up this\nparticular troubleshooting issue.\n\n328\n00:19:18.130 --> 00:19:21.015\nStay tuned, we've got more\ntroubleshooting issues coming up.\n\n329\n00:19:21.015 --> 00:19:27.564\n[SOUND]\n\n",
          "vimeoId": "149155848"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #3` from set #5. The trouble ticket states that \"The routes for the SVI’s on NYCORE2 are not being propagated to NYWAN1 resulting in a failure to be able to ping 192.168.224.1 on PLABCSCO01 as there is no return path for the remote end point in its routing table \"",
          "length": "1138",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-5-3-set_5_issue_3-120315-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-5-3-set_5_issue_3-120315-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-5-3-set_5_issue_3-120315-1-sm.jpg",
          "title": "Set 5 Issue 3",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:04.629\n[MUSIC]\n\n2\n00:00:08.421 --> 00:00:12.160\nAll right, welcome back to another\ntroubleshooting episode here on IT Pro TV.\n\n3\n00:00:12.160 --> 00:00:16.170\nWe're going to be jumping into set five,\nissue three, and I imagine we're in for\n\n4\n00:00:16.170 --> 00:00:19.660\na doozy on this one cuz it's a lot of\nwords in this troubleshooting ticket,\n\n5\n00:00:19.660 --> 00:00:20.690\nmost of them are one sentence.\n\n6\n00:00:20.690 --> 00:00:22.090\nThis one's got a little bit more.\n\n7\n00:00:22.090 --> 00:00:23.200\nLet's take a look at the ticket.\n\n8\n00:00:23.200 --> 00:00:29.490\nWhat it says is the routes for the SVIs\non NY Core 2 are not being propagated\n\n9\n00:00:29.490 --> 00:00:37.000\nto NY WAN 1 resulting in a failure being\nable to ping 192.168.224.1 On PLABCISCO01\n\n10\n00:00:37.000 --> 00:00:41.690\nas there is no return path for\nthe remote end point in its routing table.\n\n11\n00:00:41.690 --> 00:00:43.560\nThat is a long sentence right there.\n\n12\n00:00:43.560 --> 00:00:45.920\nAll right, let's break this\ndown by what it actually means.\n\n13\n00:00:45.920 --> 00:00:49.040\nI'm gonna bring up the topology here so\nwe can kinda get a handle on it.\n\n14\n00:00:49.040 --> 00:00:52.410\nSo, what they're telling me\nis that we got a problem.\n\n15\n00:00:52.410 --> 00:00:54.820\nActually if we kinda read\nthe question backwards,\n\n16\n00:00:54.820 --> 00:00:56.240\nit almost makes a little more sense.\n\n17\n00:00:56.240 --> 00:01:02.240\nThat PLABCISCO01, this server way down\nhere is trying to ping 192.168.224.0.\n\n18\n00:01:02.240 --> 00:01:07.530\nThat's a route way up here in\nthis external cloud, right?\n\n19\n00:01:07.530 --> 00:01:12.380\nSo, it's kind of traveling across\nthe network on its way out to get there.\n\n20\n00:01:12.380 --> 00:01:14.160\nAll right, but it's telling me...\n\n21\n00:01:15.960 --> 00:01:17.150\nThis is on a VLAN, right?\n\n22\n00:01:17.150 --> 00:01:19.840\nP Lab Cisco 01 is on a VLAN 16.\n\n23\n00:01:19.840 --> 00:01:24.190\nAnd NYCORE2 has a bunch\nof VLAN interfaces,\n\n24\n00:01:24.190 --> 00:01:27.070\nor SVI, switch virtual interfaces.\n\n25\n00:01:27.070 --> 00:01:32.810\nAnd the SVIs are not being advertised\ninto eigrp for some reason.\n\n26\n00:01:32.810 --> 00:01:37.330\nSo, it's not advertising them,\nand NYWAN1 is not learning them.\n\n27\n00:01:37.330 --> 00:01:42.100\nAnd as a result, my traffic might\nmake it all the way to NYWAN1, but\n\n28\n00:01:42.100 --> 00:01:47.010\nNYWAN1 doesn't have a return path\nto get back to my server, right?\n\n29\n00:01:47.010 --> 00:01:52.910\nSo, I need to find out why NYWAN1 is not\nlearning about my internal networks.\n\n30\n00:01:52.910 --> 00:01:57.080\nAnd looking at this topology,\nNYCORE2 is way down here.\n\n31\n00:01:57.080 --> 00:01:59.370\nSo, for NYWAN1 to learn,\n\n32\n00:01:59.370 --> 00:02:04.710\nNYCORE2 has to advertise out to NYCORE1 or\nNYEDGE2 or both.\n\n33\n00:02:04.710 --> 00:02:11.380\nThey have to advertise to NYEDGE1 and\nthen NYEDGE1 has to advertise to NYWAN1.\n\n34\n00:02:11.380 --> 00:02:14.660\nAnd so, somewhere along that line,\nwe've got a break down.\n\n35\n00:02:14.660 --> 00:02:17.170\nNow, the break down is\nmore than likely not here\n\n36\n00:02:17.170 --> 00:02:20.320\non NYCORE2 since that's\nwhere the routes originate.\n\n37\n00:02:20.320 --> 00:02:24.840\nIf the problem was here, nobody would\nbe able to get to those networks.\n\n38\n00:02:24.840 --> 00:02:27.370\nWe can test that pretty easily\nwith a quick trace route.\n\n39\n00:02:27.370 --> 00:02:30.290\nA trace route will show us kind of where\nthe breakdown is and that is where we\n\n40\n00:02:30.290 --> 00:02:33.210\ncan go an start to look so\nthat is exactly where i'm going to start.\n\n41\n00:02:33.210 --> 00:02:39.300\nI'm going to jump over to my server and\nwe'll fire up a command prompt here and\n\n42\n00:02:39.300 --> 00:02:42.870\ni'm just going to do a quick trace\nroute to see where this one dies out.\n\n43\n00:02:42.870 --> 00:02:45.800\nSo, I'm gonna ping all the way to\n192.168.224.1 which is the IP they gave\n\n44\n00:02:45.800 --> 00:02:49.490\nme in the troubleshooting ticket.\n\n45\n00:02:49.490 --> 00:02:51.380\nThe first hop will be my default gateway.\n\n46\n00:02:51.380 --> 00:02:54.160\nAnd the way they've described it in\nthe troubleshooting ticket that should be\n\n47\n00:02:54.160 --> 00:02:55.760\nNYCORE2.\n\n48\n00:02:55.760 --> 00:02:57.520\nAnd so, we'll see if that comes up.\n\n49\n00:02:57.520 --> 00:03:00.440\nI got 192.168.16.1.\nWhile this is running,\n\n50\n00:03:00.440 --> 00:03:06.520\nI'm gonna jump over to NYCORE2 And\nverify that I P exists right here.\n\n51\n00:03:06.520 --> 00:03:10.240\nSo, I'm just going to do\na show i p interface brief and\n\n52\n00:03:10.240 --> 00:03:12.470\nI'll exclude the unassigned interfaces.\n\n53\n00:03:12.470 --> 00:03:13.920\nAnd I'm expecting to see 192.168.16.1 and\nI do.\n\n54\n00:03:13.920 --> 00:03:17.360\nSo there it is right on that interface,\nall right.\n\n55\n00:03:18.850 --> 00:03:22.590\nSo from there it should move\non to the other routers.\n\n56\n00:03:22.590 --> 00:03:24.230\nExcept I can see here.\n\n57\n00:03:24.230 --> 00:03:25.850\nThat it didn't.\n\n58\n00:03:25.850 --> 00:03:30.250\nI made it to 192.168.16.1 and\nI didn't get anywhere past that.\n\n59\n00:03:30.250 --> 00:03:33.760\nThat switch said destination\nhost unreachable.\n\n60\n00:03:33.760 --> 00:03:37.890\nRight?\nSo it couldn't get to that network.\n\n61\n00:03:37.890 --> 00:03:39.570\nSo we died out right there.\n\n62\n00:03:39.570 --> 00:03:42.940\nAnd that response came from 192,168.16.1\nSo I didn't get any further than that.\n\n63\n00:03:42.940 --> 00:03:45.540\nI need to find out what's going on there,\nright?\n\n64\n00:03:45.540 --> 00:03:48.700\nSo, I know my problem as described\nin the troubleshooting ticket is\n\n65\n00:03:48.700 --> 00:03:51.030\nthat I don't have a return path back.\n\n66\n00:03:51.030 --> 00:03:54.450\nI feel like I should have gotten further\nthan this in my traceroute but I didn't.\n\n67\n00:03:54.450 --> 00:03:56.840\nSo, we've likely got\nmultiple issues on this one.\n\n68\n00:03:56.840 --> 00:03:58.590\nLet's go see what NYCORE2 is up to.\n\n69\n00:03:58.590 --> 00:04:01.590\nAll right, so this is NYCORE2.\n\n70\n00:04:01.590 --> 00:04:03.110\nAnd from here.\n\n71\n00:04:03.110 --> 00:04:05.650\nThis was the first hop of my journey, and\n\n72\n00:04:05.650 --> 00:04:07.860\nit should have sent me\nalong to 192.168.224.1.\n\n73\n00:04:07.860 --> 00:04:13.140\nSo I'm gonna do a show ip route for\n192.168.224.1 to\n\n74\n00:04:13.140 --> 00:04:18.320\nsee what route it would have taken.\n\n75\n00:04:18.320 --> 00:04:21.260\nAnd I can see the network\nis not in the table.\n\n76\n00:04:21.260 --> 00:04:22.810\nAnd if I do a show ip route and look for\n\n77\n00:04:22.810 --> 00:04:27.000\na gateway of last resort I don't\nhave a gateway of last resort.\n\n78\n00:04:27.000 --> 00:04:30.960\nSo, this router doesn't know\nhow to get to that network, so\n\n79\n00:04:30.960 --> 00:04:31.840\nI'm not even getting this far.\n\n80\n00:04:31.840 --> 00:04:34.410\nNow, the troubleshooting ticket\ndidn't really indicate that.\n\n81\n00:04:34.410 --> 00:04:36.000\nIt said something about return path.\n\n82\n00:04:36.000 --> 00:04:38.870\nWe might have a return path problem,\nbut we don't even have a forward path\n\n83\n00:04:38.870 --> 00:04:42.410\nto go to have that problem, so\nwe're gonna have to get that squared away.\n\n84\n00:04:42.410 --> 00:04:45.160\nNow, why don't I have a forward path?\n\n85\n00:04:45.160 --> 00:04:48.600\nWell, we're running EIGRP, right, or\n\n86\n00:04:48.600 --> 00:04:52.160\nI assume we are,\nlet's try a protocols and make sure.\n\n87\n00:04:52.160 --> 00:04:56.310\nIn a previous set, we were running\nEIGRP 800 and I could see we still are.\n\n88\n00:04:56.310 --> 00:05:01.830\nOkay, so this switch is running EIGRP 800,\nand it's supposed to be advertising\n\n89\n00:05:01.830 --> 00:05:05.690\nits interfaces and it's supposed to\nbe learning other people, and so\n\n90\n00:05:05.690 --> 00:05:10.410\nI can see that we are routing for networks\n192.168.16, so that network is there,\n\n91\n00:05:10.410 --> 00:05:15.270\nthat's where PLAB Cisco 01 is, and I'm\nadvertising on 192.168.15 and 10.1.1.0/31,\n\n92\n00:05:15.270 --> 00:05:21.110\nthat's a very small network, so\nthat's more than likely just local.\n\n93\n00:05:21.110 --> 00:05:25.680\nAnd I do have two neighbors,\n\n94\n00:05:25.680 --> 00:05:29.490\nwhich are 192.168.15.5 and 16.5, and if\nyou remember from our last troubleshooting\n\n95\n00:05:29.490 --> 00:05:33.630\nticket That's going to be NYEDGE2,\nthis guy up here.\n\n96\n00:05:33.630 --> 00:05:36.600\nSo, I've got a neighbor\nrelationship built up with NYEDGE2.\n\n97\n00:05:36.600 --> 00:05:39.400\nI do not appear to have a neighbor\nrelationship with Core 1.\n\n98\n00:05:39.400 --> 00:05:42.480\nSo, it looks like I just got Edge2,\n\n99\n00:05:42.480 --> 00:05:45.070\nI guess unless we happen\nto have something simple.\n\n100\n00:05:45.070 --> 00:05:46.750\nLet's just do a quick\ndoublecheck on that one.\n\n101\n00:05:46.750 --> 00:05:50.400\nI wanna see what neighbors we've\ngot beyond what it's telling me.\n\n102\n00:05:50.400 --> 00:05:54.470\nSo, if I look at my neighbor\ntable yeah I've just got the two\n\n103\n00:05:54.470 --> 00:05:57.088\nthat are both NY edge two.\n\n104\n00:05:57.088 --> 00:06:01.820\nAll right so\nNY edge two would have to be the person\n\n105\n00:06:01.820 --> 00:06:06.210\ntelling you about the 192.168.224\nnetwork let's see if it knows about it.\n\n106\n00:06:06.210 --> 00:06:07.799\nSo, I'll jump over to NY edge 2.\n\n107\n00:06:08.920 --> 00:06:11.620\nAnd I'm gonna do a showip route for\n192.168.224.1.\n\n108\n00:06:11.620 --> 00:06:13.430\nAnd it does have a route.\n\n109\n00:06:13.430 --> 00:06:17.238\nSo, it's got a route for\n192.168.224.1, and\n\n110\n00:06:17.238 --> 00:06:21.570\nit's not sharing it with me for\nsome reason.\n\n111\n00:06:21.570 --> 00:06:24.230\nIt says known via eigrp 800.\n\n112\n00:06:24.230 --> 00:06:28.190\nSo, it learned it via eigrp 800.\n\n113\n00:06:28.190 --> 00:06:30.030\nBut it's not telling me about it, so\n\n114\n00:06:30.030 --> 00:06:32.730\nI don't know about it to\nbe able to get out, right?\n\n115\n00:06:32.730 --> 00:06:33.850\nWhy is that, hm?\n\n116\n00:06:33.850 --> 00:06:35.730\nMaybe there's a route map,\nmaybe there's a filter.\n\n117\n00:06:35.730 --> 00:06:39.250\nWe saw there was a route map on here\nbefore, so let's double check that.\n\n118\n00:06:39.250 --> 00:06:42.450\nThis guy has the route,\nit knows that route, and\n\n119\n00:06:42.450 --> 00:06:45.270\nit knows it via another\nhost that's on the network.\n\n120\n00:06:45.270 --> 00:06:47.480\nIt should be sharing that with us,\nall right?\n\n121\n00:06:47.480 --> 00:06:49.980\nSo, I'm gonna do a #show run and\n\n122\n00:06:49.980 --> 00:06:55.040\npull up the section for eigrp and\njust see what we've got here.\n\n123\n00:06:55.040 --> 00:06:58.400\nAnd looking at it I can see\nthe networks that I've got defined and\n\n124\n00:06:58.400 --> 00:07:00.530\nI am supporting the network 192.168.16.0.\n\n125\n00:07:00.530 --> 00:07:04.850\nThat's why I've got the neighbor\nrelationship with the other switch.\n\n126\n00:07:04.850 --> 00:07:11.940\nAnd as I look at it,\nI've got eigrp stub connected summary.\n\n127\n00:07:11.940 --> 00:07:14.150\nAll right, what does that mean?\n\n128\n00:07:14.150 --> 00:07:18.300\nWell, with eigrp we can limit the routes\nthat we advertise, and connected and\n\n129\n00:07:18.300 --> 00:07:19.480\nsummary is the default.\n\n130\n00:07:19.480 --> 00:07:21.020\nThat's what we normally expect to see.\n\n131\n00:07:21.020 --> 00:07:25.040\nBut this one has the stub flag on it,\nall right?\n\n132\n00:07:25.040 --> 00:07:25.680\nWhat's that all about?\n\n133\n00:07:25.680 --> 00:07:27.550\nThis has been flagged as a sub.\n\n134\n00:07:27.550 --> 00:07:33.030\nNow, being a stub isn't necessarily\na bad thing in internal AS, right?\n\n135\n00:07:33.030 --> 00:07:38.480\nBut the route that I needed; this guy\nup here it says I know a via eigrp.\n\n136\n00:07:38.480 --> 00:07:42.740\nAnd then I've learned it from another\nsystem, so we've got it here.\n\n137\n00:07:42.740 --> 00:07:45.750\nIf it's an internal route\nwhich it says it is,\n\n138\n00:07:45.750 --> 00:07:48.140\nthen it really shouldn't matter\nwhether I'm a stub or not.\n\n139\n00:07:48.140 --> 00:07:48.890\nRIght?\n\n140\n00:07:48.890 --> 00:07:53.120\nIf it's an external route,\na stub won't advertise an external route.\n\n141\n00:07:53.120 --> 00:07:55.750\nSo, I just double checked to\nmake sure it was internal so\n\n142\n00:07:55.750 --> 00:07:58.950\nthat really shouldn't affect us,\nthe fact that this was a sub, but\n\n143\n00:07:58.950 --> 00:08:02.330\nwe do need to be aware of it cuz that\ncan mess with our external routes.\n\n144\n00:08:02.330 --> 00:08:04.230\nSo, this one's got the route and\n\n145\n00:08:04.230 --> 00:08:07.810\nlet me just pull up the full\nrouting table here real quick.\n\n146\n00:08:07.810 --> 00:08:13.200\nAnd, I'm looking for\nthe 192.168.224 network right there and\n\n147\n00:08:13.200 --> 00:08:17.850\nI'm just double-checking just to make sure\nit's not a DX cuz a DX we want forward.\n\n148\n00:08:17.850 --> 00:08:19.920\nBut here I've got these Ds and\n\n149\n00:08:19.920 --> 00:08:22.520\nit says I'm learning it via 172.16.1.2\nwhich I really don't know who that is.\n\n150\n00:08:22.520 --> 00:08:25.330\nWe'll have to find that oh, actually,\n\n151\n00:08:25.330 --> 00:08:29.530\nwe can figure out right here,\nthe route is coming in Serial0/0/1.\n\n152\n00:08:29.530 --> 00:08:34.040\nAnd so, looking at my topology,\nthat means it's coming from NYEDGE1, or\n\n153\n00:08:34.040 --> 00:08:35.455\nno it doesn't, does it?\n\n154\n00:08:35.455 --> 00:08:37.620\nSerial0/0/1 is not on my diagram.\n\n155\n00:08:38.930 --> 00:08:41.710\nWell, this diagram is turning out\nto be terribly useful, isn't it?\n\n156\n00:08:41.710 --> 00:08:47.000\nSo [LAUGH] So, it's coming in on\nan interface that apparently I don't\n\n157\n00:08:47.000 --> 00:08:53.620\nhave anything on, so let's see if we can't\nexplore and learn that a little bit.\n\n158\n00:08:53.620 --> 00:08:57.900\nSo, 0001 I'm showing just that 172.16.1.2,\nand that's up, I'm exchanging,\n\n159\n00:08:57.900 --> 00:09:02.820\nlet's see if that is NY edge one and maybe\nthe document is just labeled wrong, so\n\n160\n00:09:02.820 --> 00:09:08.630\nif I go to NY edge one And\ndo a show IP interface brief.\n\n161\n00:09:10.810 --> 00:09:12.920\nThis guy is not that one.\n\n162\n00:09:12.920 --> 00:09:16.220\nSo, actually I don't really know who\nI'm learning that from then am I?\n\n163\n00:09:16.220 --> 00:09:18.690\nIf this router is Isn't the one.\n\n164\n00:09:18.690 --> 00:09:21.420\nAnd I've got an undocumented\nserial connection,\n\n165\n00:09:21.420 --> 00:09:22.690\nI don't necessarily know who that is.\n\n166\n00:09:22.690 --> 00:09:24.450\nLet's see if CDP will tell me who it is.\n\n167\n00:09:24.450 --> 00:09:27.480\nIt could be one of the ISP routers.\n\n168\n00:09:27.480 --> 00:09:32.460\n172.16.1, if I look at my\nnetworks here on the diagram,\n\n169\n00:09:32.460 --> 00:09:35.980\nthat network really\ndoesn't show up anywhere.\n\n170\n00:09:35.980 --> 00:09:38.090\nI don't see that network on the diagram.\n\n171\n00:09:38.090 --> 00:09:40.930\nSo, we've got a mystery host\nkind of floating out there\n\n172\n00:09:40.930 --> 00:09:41.840\nwhere we're learning this from.\n\n173\n00:09:41.840 --> 00:09:45.390\nNow at the end of the day, it really\nshouldn't matter who I'm learning it from.\n\n174\n00:09:45.390 --> 00:09:48.350\nIt just means there's somebody\nout there that's in eigrp 800.\n\n175\n00:09:48.350 --> 00:09:52.770\nIt bothers me that I don't know who it is,\nbut they're advertising it to me, and\n\n176\n00:09:52.770 --> 00:09:53.870\nI'm learning it.\n\n177\n00:09:53.870 --> 00:09:58.360\nI should be turning around and\nadvertising it out to NYCORE2.\n\n178\n00:09:58.360 --> 00:10:00.630\nBut I'm not, all right?\n\n179\n00:10:00.630 --> 00:10:03.330\nSo, let's focus on the two different\nproblems that we've got here.\n\n180\n00:10:03.330 --> 00:10:06.120\nI'm gonna do a show CDP neighbor here,\n\n181\n00:10:06.120 --> 00:10:09.940\njust to see if we can\nfigure out who that is.\n\n182\n00:10:09.940 --> 00:10:13.509\nIt says I've got a connection\nto NYCORE2 and NYWAN1.\n\n183\n00:10:15.860 --> 00:10:18.540\nAnd NYWAN1, that's interesting.\n\n184\n00:10:18.540 --> 00:10:22.150\nSo, going back to the diagram, it says\nI've got a direct connection to NYWAN1,\n\n185\n00:10:22.150 --> 00:10:25.110\nbut I don't see that connection\nhere in the diagram.\n\n186\n00:10:25.110 --> 00:10:30.150\nAnd so I'll bet NYWAN1 is that 172.16.1.2,\nlet's find out.\n\n187\n00:10:30.150 --> 00:10:35.933\nSo, we'll jump over to NYWAN1, And\n\n188\n00:10:35.933 --> 00:10:40.692\nwe'll do a #show ip int br,\nand hopefully we'll see,\n\n189\n00:10:40.692 --> 00:10:44.662\nthere it is, 172.16.1.2, okay.\n\n190\n00:10:44.662 --> 00:10:47.680\nSo, NYWAN1 learns about\n192.168.224 from outside.\n\n191\n00:10:47.680 --> 00:10:52.600\nIt takes it It's in eigrp 800.\n\n192\n00:10:52.600 --> 00:10:57.030\nIt should be exchanging with MYEDGE2 and\ntelling it about this network.\n\n193\n00:10:57.030 --> 00:11:01.230\nI can verify that here\nif I do a show ip route.\n\n194\n00:11:01.230 --> 00:11:03.810\nAnd I look for 192.168.224.\n\n195\n00:11:03.810 --> 00:11:09.930\nIt does have that route and\nit's learning it through eigrp and\n\n196\n00:11:09.930 --> 00:11:13.600\nsince we only have EIGRP 800,\nthat's the one that it's learning on and\n\n197\n00:11:13.600 --> 00:11:20.070\nNYEDGE1 is in EIGRP 800 and NYCORE2 is\nin EIGRP 800, I should be learning it.\n\n198\n00:11:20.070 --> 00:11:23.380\nIf I'm not learning it,\nit's gonna be one of two things.\n\n199\n00:11:23.380 --> 00:11:26.840\nIt's either gonna be a route map and\nfilter somewhere or\n\n200\n00:11:26.840 --> 00:11:30.600\nit's gonna be that I have another route\nthat's better but I don't have another\n\n201\n00:11:30.600 --> 00:11:33.310\nroute that's better, because NY Core\n2 just doesn't have a route.\n\n202\n00:11:33.310 --> 00:11:34.700\nSo, let me go look for route maps or\n\n203\n00:11:34.700 --> 00:11:37.665\nfilters that might be blocking this\nroute from coming across the link.\n\n204\n00:11:37.665 --> 00:11:39.690\nCuz it should be there and it's not.\n\n205\n00:11:39.690 --> 00:11:40.500\nAll right,\n\n206\n00:11:40.500 --> 00:11:43.830\nI'll start on NY Edge 2 cause it's the one\nwho's supposed to be advertising to me.\n\n207\n00:11:43.830 --> 00:11:45.520\nAnd we'll just see what it's got.\n\n208\n00:11:45.520 --> 00:11:50.470\nSo, on NY Edge 2,\nI'm gonna do a show run for\n\n209\n00:11:50.470 --> 00:11:56.100\nthe eigrp section And, I can see\nthe networks that it's participating in.\n\n210\n00:11:56.100 --> 00:12:00.870\nThe 192.168.15 and\n16 are the connections to the switch, and\n\n211\n00:12:00.870 --> 00:12:06.291\nthen this 172.16.1 that's\nthe connection to the LAN1.\n\n212\n00:12:06.291 --> 00:12:10.100\nI've got router-id set.\n\n213\n00:12:10.100 --> 00:12:14.150\nI'm set as a stub, which would bother my\nexternal stuff and not my internal stuff.\n\n214\n00:12:14.150 --> 00:12:19.900\nSo, I should be good there,\nand yep, all right.\n\n215\n00:12:19.900 --> 00:12:22.370\nSo, I'm not seeing anything there,\nlet me just look on the interface,\n\n216\n00:12:22.370 --> 00:12:23.400\njust to be sure.\n\n217\n00:12:24.430 --> 00:12:29.400\nAnd there was .16 and .15, I'm just\ngonna look at their configurations and\n\n218\n00:12:29.400 --> 00:12:32.470\njust see if there's anything crazy on\nthe interfaces I need to be worried about.\n\n219\n00:12:32.470 --> 00:12:34.600\nOh and I forgot we saw this earlier.\n\n220\n00:12:34.600 --> 00:12:36.290\nThere was a route map\nattached to the 16 one.\n\n221\n00:12:36.290 --> 00:12:39.120\nThere's not a route map\nattached to the 15 one there,\n\n222\n00:12:39.120 --> 00:12:41.400\nso I doubt the route map\nwhat's causing our problem.\n\n223\n00:12:41.400 --> 00:12:44.510\nBut let's just take a look at\nthat route map to be sure.\n\n224\n00:12:44.510 --> 00:12:46.600\nBecause there is a little\npolicy based routing on here.\n\n225\n00:12:46.600 --> 00:12:48.390\nSo, the route map is influencing traffic,\nbut\n\n226\n00:12:48.390 --> 00:12:49.720\nit's really just changing the next hop.\n\n227\n00:12:49.720 --> 00:12:51.620\nThat's not going to mess\nwith our route coming in so\n\n228\n00:12:51.620 --> 00:12:55.320\nthat's not our problem there that's not\nwhat's stopping it so I don't see anything\n\n229\n00:12:55.320 --> 00:12:59.300\nhere that's jumping out at me that would\ncause this problem if I jump over to\n\n230\n00:12:59.300 --> 00:13:04.210\nNY core two maybe it's blocking stuff on\nthe way in right so we can check that\n\n231\n00:13:04.210 --> 00:13:08.060\nit'll be on one of its vlan interfaces\nmore than likely so I'll start there.\n\n232\n00:13:08.060 --> 00:13:12.270\nIf I look at the interface for\nvlan 16 and the interface for\n\n233\n00:13:12.270 --> 00:13:18.020\nvlan 15 those are pretty sparse, nothing\ntoo crazy there, so that should be okay.\n\n234\n00:13:18.020 --> 00:13:22.060\nAnd then let me just look\nat its eigrp configuration.\n\n235\n00:13:22.060 --> 00:13:27.080\nAnd on eigrp,\nthat's pretty straightforward also.\n\n236\n00:13:27.080 --> 00:13:30.010\nReally not seeing anything jumping out\nthat would stop that route from making it\n\n237\n00:13:30.010 --> 00:13:31.090\ninto the routing table.\n\n238\n00:13:32.790 --> 00:13:35.870\nI know it's not there, right,\nif I go and double check.\n\n239\n00:13:35.870 --> 00:13:36.800\nIt's not there.\n\n240\n00:13:36.800 --> 00:13:38.350\nSo, what's going on here?\n\n241\n00:13:38.350 --> 00:13:39.970\nWhy is this not working?\n\n242\n00:13:39.970 --> 00:13:44.490\nWell, there's really only one thing\nI've seen jump out that could stop us.\n\n243\n00:13:44.490 --> 00:13:47.350\nAnd that was the eigrp stub.\n\n244\n00:13:47.350 --> 00:13:51.180\nBut the eigrp stub shouldn't be\na problem cuz if I go back to NYEDGE2,\n\n245\n00:13:51.180 --> 00:13:55.640\nthe route that I learned\nshowed as internal.\n\n246\n00:13:55.640 --> 00:14:00.620\nOkay, so if I do that show IP route,\nand I go and I find that 192.168.224\n\n247\n00:14:00.620 --> 00:14:04.940\nnetwork that I'm not learning about,\nand we find it in here.\n\n248\n00:14:04.940 --> 00:14:06.230\nHere it is.\n\n249\n00:14:06.230 --> 00:14:10.270\nIt's got that D that lets me know that\nit's just a regular E.I.G.R.P. route.\n\n250\n00:14:10.270 --> 00:14:10.980\nIt's not external.\n\n251\n00:14:10.980 --> 00:14:12.580\nLike up here I can see D EX.\n\n252\n00:14:12.580 --> 00:14:15.660\nThose I expect not to learn,\nbut \"D\" is internal.\n\n253\n00:14:15.660 --> 00:14:16.800\nI should learn it.\n\n254\n00:14:16.800 --> 00:14:17.670\nRight?\n\n255\n00:14:17.670 --> 00:14:20.190\nBut I'm not and why not?\n\n256\n00:14:20.190 --> 00:14:24.570\nWell, in this case, I think what\nwe're gonna be dealing with here,\n\n257\n00:14:24.570 --> 00:14:29.710\nthere are some situations where even an\ninternal route can be treated as external.\n\n258\n00:14:29.710 --> 00:14:32.240\nStubs don't like to be transits.\n\n259\n00:14:32.240 --> 00:14:34.480\nThey don't like to have\ntraffic passing through them.\n\n260\n00:14:34.480 --> 00:14:38.850\nAnd so it very well could be that it's\nviewing that as making it a transit and\n\n261\n00:14:38.850 --> 00:14:40.300\nAnd I know that 192.168.224,\n\n262\n00:14:40.300 --> 00:14:45.620\nit actually is an external route\nfrom the way it originates.\n\n263\n00:14:45.620 --> 00:14:49.740\nIf you look at the diagram here; well,\nI guess it really isn't, is it?\n\n264\n00:14:49.740 --> 00:14:57.190\nEven out here in our WAN,\n192.168.226 is part of EIGRP 800.\n\n265\n00:14:57.190 --> 00:15:00.790\nAnd NYWAN1 is part of the EIGRP800,\n\n266\n00:15:00.790 --> 00:15:05.750\nand NYEDGE2 is part of the EIGRP800,\nand NYCORE2 is part of the EIGRP800.\n\n267\n00:15:05.750 --> 00:15:11.060\nSo they're all EIGRP800, there really\nshouldn't be a reason for that to stop.\n\n268\n00:15:11.060 --> 00:15:12.550\nAnd in fact, NYEDGE2,\n\n269\n00:15:12.550 --> 00:15:15.950\nthere's really no reason for\nit to be a stub either, is there?\n\n270\n00:15:15.950 --> 00:15:19.960\nIt It's not like it's got a connection\nto another autonomous system.\n\n271\n00:15:19.960 --> 00:15:21.990\nIt's entirely within that one AS.\n\n272\n00:15:21.990 --> 00:15:26.830\nSo, this may just be a messed\nup configuration there.\n\n273\n00:15:26.830 --> 00:15:29.640\nLet's pull that stub and\nsee what that does for us, and\n\n274\n00:15:29.640 --> 00:15:31.170\nsee if that takes care of our problem.\n\n275\n00:15:31.170 --> 00:15:34.060\nIt's an easy one to implement the change\nand then undo it if it doesn't work.\n\n276\n00:15:34.060 --> 00:15:40.270\nSo, on NYEDGE2 If we look back at that\nEIGRP section, there's that command\n\n277\n00:15:40.270 --> 00:15:44.240\nwhere we were set as a stub right there,\nand I'm just gonna go in and remove that.\n\n278\n00:15:44.240 --> 00:15:49.879\nSo I'll do #router eigrp, and\nget into the address family.\n\n279\n00:15:53.007 --> 00:16:00.240\nAnd Once we're in there,\nI'm just gonna say no eigrp stub, right.\n\n280\n00:16:02.770 --> 00:16:05.740\nSo, I'm gonna turn that off.\n\n281\n00:16:05.740 --> 00:16:09.110\nAnd then if I take a look\nat that configuration again\n\n282\n00:16:10.750 --> 00:16:12.480\nsee how that whole command disappeared?\n\n283\n00:16:12.480 --> 00:16:15.100\nThat EIGRP stub connected summary\ncommand is completely gone.\n\n284\n00:16:15.100 --> 00:16:18.930\nAnd that's because the connected and\nsummary those are the defaults, right.\n\n285\n00:16:18.930 --> 00:16:20.630\nThat's what it's normally gonna do.\n\n286\n00:16:20.630 --> 00:16:21.840\nAnd so that one's out.\n\n287\n00:16:21.840 --> 00:16:23.610\nAnd let's see if that\ntakes care of our problem.\n\n288\n00:16:23.610 --> 00:16:28.150\nThis could just be an issue of EDGE2\nnot wanting to transit those routes\n\n289\n00:16:28.150 --> 00:16:31.490\neven though they were internal,\nwhich is odd but certainly could happen.\n\n290\n00:16:33.030 --> 00:16:36.480\nWhen you change the stub status of\na router, all of its adjacencies drop, so\n\n291\n00:16:36.480 --> 00:16:38.780\nI expected to see all these\nneighbor relationships drop.\n\n292\n00:16:38.780 --> 00:16:43.780\nLet's see if it came back up,\nwhich it should have, there we go.\n\n293\n00:16:43.780 --> 00:16:50.830\nAnd let's see if we got a route for\nthat 224, and we did.\n\n294\n00:16:50.830 --> 00:16:54.270\nAll right, so in this case, it being\nflagged as a stub was enough to stop us.\n\n295\n00:16:54.270 --> 00:16:57.880\nNow, EIGRP, you really, OSPF too,\n\n296\n00:16:57.880 --> 00:17:00.190\nwhen you have stubs they do\nget a little bit sensitive.\n\n297\n00:17:00.190 --> 00:17:03.280\nIt's supposed to filter out the external\nroutes so we don't have transit traffic\n\n298\n00:17:03.280 --> 00:17:06.620\nbut when you have nodes that don't match,\nyou can end up with a problem there too.\n\n299\n00:17:06.620 --> 00:17:08.370\nNow, EIGRP is normally resilient for\nthat but\n\n300\n00:17:08.370 --> 00:17:10.680\nin this case,\nthat is what our problem was.\n\n301\n00:17:10.680 --> 00:17:14.000\nSo, now we are learning that route and\nwe're in business.\n\n302\n00:17:14.000 --> 00:17:17.420\nBut, Let's not lose sight of\nwhat our original problem was.\n\n303\n00:17:17.420 --> 00:17:19.500\nI'm still working on the forward path.\n\n304\n00:17:19.500 --> 00:17:22.830\nI now have the forward path\nto get to 192.168.244,\n\n305\n00:17:22.830 --> 00:17:26.930\nbut if we revisit the original question,\nit was telling me that\n\n306\n00:17:26.930 --> 00:17:31.690\nNYWAN1 didn't have a return\npath back to my routes.\n\n307\n00:17:31.690 --> 00:17:34.960\nAnd so, I wouldn't be surprised if\nwe're still failing to communicate.\n\n308\n00:17:34.960 --> 00:17:36.930\nSo, let's jump over to the server.\n\n309\n00:17:38.430 --> 00:17:42.680\nAnd I'm gonna retry that trace route and\nwe'll see how far we get this time.\n\n310\n00:17:42.680 --> 00:17:45.880\nI should get past my first hop,\nbecause it now has another route.\n\n311\n00:17:45.880 --> 00:17:50.940\nI should hit and then we should hit and\n\n312\n00:17:50.940 --> 00:17:53.700\nfrom there,\nwe should go directly over to NYWAN1.\n\n313\n00:17:53.700 --> 00:17:57.360\nAnd it looks like I am hitting and\nthen we should NYWAN1.\n\n314\n00:17:57.360 --> 00:18:02.630\nAnd if NYWAN1 has a return path,\nthen I'll get its information and\n\n315\n00:18:02.630 --> 00:18:06.460\nwe do so it looks like we've got\nthat return path present now also.\n\n316\n00:18:06.460 --> 00:18:10.990\nSo, let's just test out a straight\nup ping and make sure we can get\n\n317\n00:18:10.990 --> 00:18:15.310\nto the IP in question and then I\nthink we're going to be in business.\n\n318\n00:18:15.310 --> 00:18:16.790\nAnd, sure enough, we are.\n\n319\n00:18:16.790 --> 00:18:21.920\nSo, in this scenario,\nour main problem was that NYEDGE2\n\n320\n00:18:21.920 --> 00:18:26.580\nwas flagged as a stub, and so\nit wasn't pushing those networks across.\n\n321\n00:18:26.580 --> 00:18:29.880\nAnd, like I said, normally that\nwould just apply to external routes.\n\n322\n00:18:29.880 --> 00:18:32.620\nIn this case it was an internal\nroute that it wasn't\n\n323\n00:18:32.620 --> 00:18:34.310\npushing through to stop\nthat transit traffic.\n\n324\n00:18:34.310 --> 00:18:36.330\nSo, when we removed the stub,\nthat solved it.\n\n325\n00:18:36.330 --> 00:18:37.310\nAnd now we're in business.\n\n326\n00:18:37.310 --> 00:18:41.380\nSo, kind of an odd one there, hard one\nto track down, but we've solved it and\n\n327\n00:18:41.380 --> 00:18:42.590\nnow we can move on to our next one.\n\n328\n00:18:42.590 --> 00:18:45.080\nSo, all right that wraps up\nthis troubleshooting question.\n\n329\n00:18:45.080 --> 00:18:46.270\nHope you guys enjoyed it.\n\n330\n00:18:46.270 --> 00:18:52.087\nStay tuned, we've got more coming up,\nall inside of Set 5, I'll see you then.\n\n331\n00:18:52.087 --> 00:18:56.629\n[MUSIC]\n\n",
          "vimeoId": "151013754"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #4` from set #5. The trouble ticket states that \"You are unable to communicate to 10.1.1.1 from either PLABCSCO01 or NYCORE2 \"",
          "length": "791",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-5-4-set_5_issue_4-120315-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-5-4-set_5_issue_4-120315-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-5-4-set_5_issue_4-120315-1-sm.jpg",
          "title": "Set 5 Issue 4",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:08.373\n[SOUND]\nAll right,\n\n2\n00:00:08.373 --> 00:00:11.059\nwelcome back to another troubleshooting\nepisode here on ITproTV.\n\n3\n00:00:11.059 --> 00:00:13.585\nWe're gonna be jumping into\nset five 5 Issue 4, and\n\n4\n00:00:13.585 --> 00:00:15.784\nlooks like we got a simple\non this time around.\n\n5\n00:00:15.784 --> 00:00:21.761\nIt says we are unable to communicate\nwith 10.1.1.1 from either PLABCISCO01 or\n\n6\n00:00:21.761 --> 00:00:25.585\nNYCORE2, so\nthey give me a couple of devices here.\n\n7\n00:00:25.585 --> 00:00:29.883\nSo it sounds like we got a reachability\nproblem with whoever 10.1.1.1 is.\n\n8\n00:00:29.883 --> 00:00:33.866\nNow, our biggest challenge is gonna be,\nif we look at our documentation,\n\n9\n00:00:33.866 --> 00:00:35.774\nI don't know who 10.1.1 is.\n\n10\n00:00:35.774 --> 00:00:38.927\nI've got a pretty big network at\nthis point and there's a couple of\n\n11\n00:00:38.927 --> 00:00:42.150\nnetworks documented up at the top\nright and top left of the diagram.\n\n12\n00:00:42.150 --> 00:00:46.933\nThere's a few networks that are scattered\nabout, but none of them are 10.1.1.1.\n\n13\n00:00:46.933 --> 00:00:51.978\nAll they're telling me is that PLABSCO1,\nthis server down here, and NYCORE2,\n\n14\n00:00:51.978 --> 00:00:57.183\nthis switch over here, are not able to\nget to whoever it is that 10.1.1.1 is.\n\n15\n00:00:57.183 --> 00:00:59.790\nNow where do we start?\n\n16\n00:00:59.790 --> 00:01:01.380\nWell, I'm just gonna start at NYCORE2.\n\n17\n00:01:01.380 --> 00:01:04.320\nI could go to the Windows station,\nbut again,\n\n18\n00:01:04.320 --> 00:01:08.820\nI'm thinking on a Cisco exam they're not\ngonna expect me to fix a Windows problem.\n\n19\n00:01:08.820 --> 00:01:11.610\nSo I'm gonna jump to NYCORE2 and\nwe'll troubleshoot it from there.\n\n20\n00:01:11.610 --> 00:01:13.060\nAnd if we can resolve the issue there,\n\n21\n00:01:13.060 --> 00:01:15.830\nI bet we'll find that\nthe server is resolved also.\n\n22\n00:01:15.830 --> 00:01:16.913\nSo I'm gonna jump to NYCORE2, and\n\n23\n00:01:16.913 --> 00:01:19.670\nI'll just see if I have some kind\nof routes to get to this and\n\n24\n00:01:19.670 --> 00:01:23.120\nwe can follow the interfaces back to\nfigure out which ever host this is.\n\n25\n00:01:23.120 --> 00:01:30.185\nSo if I go over here to NYCORE2,\nI can just do a quick show IP route for\n\n26\n00:01:30.185 --> 00:01:34.920\n10.1.1.1 and\nI don't have a route in the routing table.\n\n27\n00:01:34.920 --> 00:01:38.060\nSo that's not too convenient.\n\n28\n00:01:38.060 --> 00:01:41.650\nIf I do a show ip int brief,\n\n29\n00:01:41.650 --> 00:01:46.570\nlet's see if maybe it's like an interface\nright here that we've shut down.\n\n30\n00:01:46.570 --> 00:01:50.700\nAnd you know, let me redo that and\nexclude all these unassigned interfaces,\n\n31\n00:01:50.700 --> 00:01:52.570\notherwise we get a ton of data.\n\n32\n00:01:52.570 --> 00:01:55.320\nThere we go, and we got something close.\n\n33\n00:01:55.320 --> 00:01:58.220\nSo what I was looking for was wondering if\nit was an interface here that maybe was\n\n34\n00:01:58.220 --> 00:02:00.976\nshut down, but\ninstead I see this guy right here.\n\n35\n00:02:00.976 --> 00:02:06.550\nFast Ethernet 1/0/24 10.1.1.2,\nnow I don't care how\n\n36\n00:02:06.550 --> 00:02:10.340\nyou subnet this thing, that's gonna be\nthe same network as whoever 10.1.1.1 is\n\n37\n00:02:10.340 --> 00:02:14.660\nunless they do a slash 32, which isn't\ngoing to happen on a physical interface.\n\n38\n00:02:14.660 --> 00:02:18.930\nSo that's more than\nlikely one end of a cable\n\n39\n00:02:18.930 --> 00:02:21.030\nthat's running to the hose\nthat's in question.\n\n40\n00:02:21.030 --> 00:02:23.035\nIn fact, if I look at the diagram,\n\n41\n00:02:23.035 --> 00:02:28.169\nit shows where I've got these two layer 3\nconnections between NYCORE2 and NYCORE1.\n\n42\n00:02:28.169 --> 00:02:33.404\nIt looks like in this scenario,\nport 24 is 10.1.1.2.\n\n43\n00:02:33.404 --> 00:02:39.440\nI think it's probably safe to assume that\nport 24 over here is 10.1.1.1 on NYCORE1.\n\n44\n00:02:39.440 --> 00:02:41.380\nSo let's go take a look,\nmaybe we'll luck out and\n\n45\n00:02:41.380 --> 00:02:43.500\nthat interface will just be shut down,\nright?\n\n46\n00:02:43.500 --> 00:02:48.399\nI know it's up up on this end, and if it's\na directly connected cable I imagine it's\n\n47\n00:02:48.399 --> 00:02:51.716\nup on the other side, but\nlet's just go see what we have.\n\n48\n00:02:51.716 --> 00:02:56.277\nSo on this one I'm gonna do\na show ip interface brief, and\n\n49\n00:02:56.277 --> 00:03:01.897\nI'm looking for port 24, and\nsure enough it is 10.1.1.1.\n\n50\n00:03:01.897 --> 00:03:04.997\nUnfortunately, I can see that it is up up.\n\n51\n00:03:04.997 --> 00:03:06.980\nIt is one of the few\ntimes it's unfortunate.\n\n52\n00:03:06.980 --> 00:03:10.120\nI was hoping that it would be down down,\nor administratively down, and\n\n53\n00:03:10.120 --> 00:03:12.130\nthis question would be\nover before we started.\n\n54\n00:03:12.130 --> 00:03:15.750\nBut it's up, and my end is up on NYCORE2.\n\n55\n00:03:15.750 --> 00:03:19.680\nBut it told me that NYCORE2 couldn't\nping this guy, so what's that all about?\n\n56\n00:03:19.680 --> 00:03:25.410\nWell, let me go to CORE2, and\nI'm gonna do a ping to 10.1.1.1, and\n\n57\n00:03:25.410 --> 00:03:30.360\nI'll let one fail for ARP, and\nthen sure enough, it's continuing to fail.\n\n58\n00:03:30.360 --> 00:03:32.820\nSo if this is a point to point link,\n\n59\n00:03:32.820 --> 00:03:35.650\nif I'm directly connected\nto that other switch and\n\n60\n00:03:35.650 --> 00:03:40.770\nI'm getting a failure like this, the IP\naddresses are right next to each other.\n\n61\n00:03:40.770 --> 00:03:43.280\nIt doesn't make a whole heck\nof a lot of sense, right?\n\n62\n00:03:43.280 --> 00:03:44.660\nAnd let's try the other direction.\n\n63\n00:03:44.660 --> 00:03:49.080\nIf I go over to NYCORE1, I would\nimagine this direction would fail also.\n\n64\n00:03:49.080 --> 00:03:55.650\nIf I ping 10.1.1.2, and\nsure enough it's failing there, okay.\n\n65\n00:03:55.650 --> 00:03:58.340\nSo what can cause this to fail?\n\n66\n00:03:58.340 --> 00:04:02.220\nWell, the interface might be up up, but\nthere might be something else going on.\n\n67\n00:04:02.220 --> 00:04:06.800\nWe could be error disabled or\nUDLD could be doing something crazy.\n\n68\n00:04:06.800 --> 00:04:09.160\nWe could have mismatched VLANs.\n\n69\n00:04:09.160 --> 00:04:11.900\nOne side could be on VLAN five\nthe other side could be on VLAN ten,\n\n70\n00:04:11.900 --> 00:04:13.570\nand now they don't match.\n\n71\n00:04:13.570 --> 00:04:16.750\nExcept in this case they're routed ports,\nthey're layer three ports, so\n\n72\n00:04:16.750 --> 00:04:18.510\nwe don't have VLANs, do we?\n\n73\n00:04:18.510 --> 00:04:21.120\nSo that rules out a VLAN issue.\n\n74\n00:04:21.120 --> 00:04:22.605\nIt actually rules out\na lot of layer two issues,\n\n75\n00:04:22.605 --> 00:04:26.080\ncuz this is just a straight\nup layer three connection.\n\n76\n00:04:26.080 --> 00:04:30.620\nThere is the potential that they're not\nshowing it here in the diagram, but\n\n77\n00:04:30.620 --> 00:04:32.170\nthere could be a device in between here.\n\n78\n00:04:32.170 --> 00:04:35.540\nIt might not be a direct connection,\nbut let's just assume it is.\n\n79\n00:04:35.540 --> 00:04:37.369\nLet's start by looking\nat those interfaces.\n\n80\n00:04:37.369 --> 00:04:42.396\nSo it's port 24 on both switches, and\nI'll start here on core one and just do\n\n81\n00:04:42.396 --> 00:04:47.878\na show run for interface fa1/0/24, and\nI can see that it sent to no switchport,\n\n82\n00:04:47.878 --> 00:04:53.209\nso it's layer three, and it's got an IP\naddress of 10.1.1.1 with a subnet\n\n83\n00:04:53.209 --> 00:04:58.040\nmask of 255.255.255.252,\nso that's a /30 network.\n\n84\n00:04:58.040 --> 00:05:02.997\nThat means the network\nconsists of 10.1.1.1 and\n\n85\n00:05:02.997 --> 00:05:06.040\n10.1.1.2, so that all looks right.\n\n86\n00:05:06.040 --> 00:05:09.520\nI don't have a shutdown command, there's\nno fancy access lists or route maps,\n\n87\n00:05:09.520 --> 00:05:12.200\nany craziness like that, no policies.\n\n88\n00:05:12.200 --> 00:05:13.650\nIt's just an IP on an interface.\n\n89\n00:05:13.650 --> 00:05:16.232\nYou can't realy ask for anything simpler.\n\n90\n00:05:16.232 --> 00:05:18.560\nAll right, let me jump over to CORE2 and\n\n91\n00:05:18.560 --> 00:05:21.120\nwe'll verify we've got that\nsame basic configuration.\n\n92\n00:05:22.330 --> 00:05:24.140\nI was actually expecting\nsomething a lot worse.\n\n93\n00:05:24.140 --> 00:05:27.160\nWe could have had a port channel,\nwe could have had trunks,\n\n94\n00:05:27.160 --> 00:05:30.370\ncould have all sorts of stuff,\nbut we didn't.\n\n95\n00:05:30.370 --> 00:05:33.190\nOh, actually, well this one is\ngonna trounce me not so bad.\n\n96\n00:05:33.190 --> 00:05:36.879\nSo here on this side, I can see I'm\nno switchport, so I'm layer three.\n\n97\n00:05:36.879 --> 00:05:41.384\nI've got the IP address, 10.1.1.2, but\nlook at that subnet mask, all right?\n\n98\n00:05:41.384 --> 00:05:48.680\nThat is a /31 subnet mask,\n255.255.255.254.\n\n99\n00:05:48.680 --> 00:05:54.616\nWith that subnet mask,\nwhat IPs does 10.1.1.2 contain?\n\n100\n00:05:54.616 --> 00:05:58.331\nWell, technically it's got .2 and\n.3, and that's it.\n\n101\n00:05:58.331 --> 00:06:00.620\nThose are the two IPs that are in it.\n\n102\n00:06:00.620 --> 00:06:03.240\nIt doesn't have .1 in it.\n\n103\n00:06:03.240 --> 00:06:06.839\nAnd so as far as it's concerned, the\ndevice on the other end is on a different\n\n104\n00:06:06.839 --> 00:06:08.651\nsubnet, and we're not able to talk.\n\n105\n00:06:08.651 --> 00:06:13.509\nSo it looks like we have an incorrect\nsubnet mask here, which we should be able\n\n106\n00:06:13.509 --> 00:06:18.098\nto fix pretty easily if we just jump\nin here and reassign that IP address.\n\n107\n00:06:18.098 --> 00:06:24.180\nSo I'm going to reassign it, and we'll\nput that back to a 252 like it should be.\n\n108\n00:06:26.600 --> 00:06:28.270\nAnd we'll get out of that.\n\n109\n00:06:28.270 --> 00:06:33.260\nAnd now that that one's set, there we go.\n\n110\n00:06:34.800 --> 00:06:40.600\nI should be able to ping across and\nthere we go,\n\n111\n00:06:40.600 --> 00:06:44.230\nand just to be on the safe side,\nI'm going to double check on NYCORE1 and\n\n112\n00:06:44.230 --> 00:06:49.600\nmake sure that it can ping across also,\nand now I got some connectivity.\n\n113\n00:06:49.600 --> 00:06:53.520\nOkay, looks like this one was\nsimple just a bad subnet mask, but\n\n114\n00:06:53.520 --> 00:06:55.630\nlet's wait a second here,\ncuz in the troubleshooting question,\n\n115\n00:06:55.630 --> 00:07:02.282\nit mentioned I couldn't ping that IP\nfrom either NYCORE2, or PLABCISCO01.\n\n116\n00:07:02.282 --> 00:07:06.265\nNow, PLABCISCO01,\nif I look at the diagram,\n\n117\n00:07:06.265 --> 00:07:11.505\nit's on a different VLAN 192.168.16.10,\nso I'll just probably look really easy,\n\n118\n00:07:11.505 --> 00:07:14.475\nI could still have routing issues\nstopping me from getting that network,\n\n119\n00:07:14.475 --> 00:07:18.985\nso let's see if we can ping from that\nserver, even I was trying to dodge it.\n\n120\n00:07:18.985 --> 00:07:22.745\nTo really be complete here,\nwe're gonna have to make sure we can, so\n\n121\n00:07:22.745 --> 00:07:27.390\nI'm gonna try and ping to 10.1.1.1,\nand hopefully we'll get there.\n\n122\n00:07:27.390 --> 00:07:29.550\nIf not, we'll have a little bit\nof routing troubleshooting to do.\n\n123\n00:07:29.550 --> 00:07:31.940\nAnd, it's not looking good.\n\n124\n00:07:31.940 --> 00:07:32.910\nLet's give it a second.\n\n125\n00:07:32.910 --> 00:07:33.820\nI'm holding out hope.\n\n126\n00:07:34.860 --> 00:07:35.810\nYeah, it's not looking good.\n\n127\n00:07:35.810 --> 00:07:39.014\nAll right, so we still can't get there\nfrom here so our work is not done.\n\n128\n00:07:39.014 --> 00:07:42.984\nNow we've got to find out why\nthis guy can't get to 10.1.1.1.\n\n129\n00:07:42.984 --> 00:07:45.829\nAnd I want to start just by\nlooking at my default gateway.\n\n130\n00:07:45.829 --> 00:07:49.472\nMy default gateway should be NYCORE2, and\n\n131\n00:07:49.472 --> 00:07:54.199\nso if look up here I am 192.168.16.10, and\n\n132\n00:07:54.199 --> 00:07:58.540\nmy default gateway is 192.168.16.1.\n\n133\n00:07:58.540 --> 00:08:04.020\nThat is NYCORE2 so I've got this out of\nmy gateway, I should be getting there.\n\n134\n00:08:04.020 --> 00:08:07.660\nAll right, but\nonce I get there I'm dying out, right?\n\n135\n00:08:07.660 --> 00:08:10.540\nSo if I do a trace route to my IP,\n\n136\n00:08:10.540 --> 00:08:14.360\nI should see that I get to\nthe first hop and then die out.\n\n137\n00:08:14.360 --> 00:08:19.380\nNow, if NYCORE2 is directly\nplugged into this network,\n\n138\n00:08:19.380 --> 00:08:21.870\nhow can I be dying out right there?\n\n139\n00:08:21.870 --> 00:08:24.970\nWell, what's more than likely happening is\nwe're getting to the other side of that\n\n140\n00:08:24.970 --> 00:08:28.360\nlink and it just doesn't have\na return path back to us, right?\n\n141\n00:08:28.360 --> 00:08:32.283\nSo, I'm probably getting\nall the way to NYCORE1.\n\n142\n00:08:32.283 --> 00:08:37.375\nWe're probably passing from our\nserver to NYACCESS1 up to NYCORE2 and\n\n143\n00:08:37.375 --> 00:08:41.548\nover to NYCORE1, but\nnow it has never returned path back to\n\n144\n00:08:41.548 --> 00:08:46.405\n192.168.16.10, and\nit probably doesn't have one.\n\n145\n00:08:46.405 --> 00:08:50.131\nSo we probably just need to educate it and\nthen it'll be able to get back, and\n\n146\n00:08:50.131 --> 00:08:51.760\nthat'll fix our problem.\n\n147\n00:08:51.760 --> 00:08:53.010\nBut, it could be something else.\n\n148\n00:08:53.010 --> 00:08:54.390\nThere could be an ACL blocking it.\n\n149\n00:08:54.390 --> 00:08:56.940\nThere could be other things, but\nwe need to continue to troubleshoot here.\n\n150\n00:08:56.940 --> 00:09:01.920\nAll right, so back at my server, yeah,\nI can see it just dies out right there.\n\n151\n00:09:01.920 --> 00:09:03.790\nAnd so, we'll stop that.\n\n152\n00:09:03.790 --> 00:09:06.140\nAnd let's jump back over to CORE2.\n\n153\n00:09:07.480 --> 00:09:09.406\nLet's jump over to CORE1 and\nget an idea here.\n\n154\n00:09:09.406 --> 00:09:11.426\nI wanna make sure I actually\ndon't have that route.\n\n155\n00:09:11.426 --> 00:09:16.405\nSo I'm gonna do a show IP route for\n192.168.16.10 to see if I have a way back\n\n156\n00:09:16.405 --> 00:09:19.190\nto get to that server,\nand I don't, all right?\n\n157\n00:09:19.190 --> 00:09:21.200\nSo I need to get a route.\n\n158\n00:09:21.200 --> 00:09:22.270\nThere's a couple of ways I could that.\n\n159\n00:09:22.270 --> 00:09:24.222\nI could do a static route,\nthat would be the easiest.\n\n160\n00:09:24.222 --> 00:09:26.930\nThrow a static route need it to be done.\n\n161\n00:09:26.930 --> 00:09:29.590\nMaybe we're running a dynamic routing\nprotocol and we can learn it that way.\n\n162\n00:09:29.590 --> 00:09:32.715\nSo I'll do show IP protocols and\nwe're see what we're running.\n\n163\n00:09:32.715 --> 00:09:34.642\nI am running a routing protocol,\nlooks like I'm running two.\n\n164\n00:09:34.642 --> 00:09:38.490\nSo I've got ospf ten and\nI've got eigrp 800.\n\n165\n00:09:38.490 --> 00:09:41.590\nSo I got two different routing protocols,\nand\n\n166\n00:09:41.590 --> 00:09:47.710\nif I do a show IP eigrp neighbor,\nI don't have any eigrp neighbors.\n\n167\n00:09:47.710 --> 00:09:54.569\nIf I do a show ip ospf neighbor, I do have\nan ospf neighbor, and it's 192.168.1.1.\n\n168\n00:09:54.569 --> 00:09:56.270\nI don't really know who that is and\n\n169\n00:09:56.270 --> 00:09:58.860\nmy documentation hasn't\nbeen too helpful on that.\n\n170\n00:09:58.860 --> 00:10:01.120\nSo, let me just see if\nthat happens to be CORE2.\n\n171\n00:10:01.120 --> 00:10:06.710\nSo I'm gonna pull off its\nlist of IP addresses,\n\n172\n00:10:06.710 --> 00:10:09.400\nand oh, it's not CORE2, all right.\n\n173\n00:10:09.400 --> 00:10:11.140\nSo I got two different routing protocols,\n\n174\n00:10:11.140 --> 00:10:13.880\nneither of which have\nan adjacency with CORE2.\n\n175\n00:10:13.880 --> 00:10:17.270\nAnd on CORE2,\nlet's see what protocols are running here.\n\n176\n00:10:17.270 --> 00:10:20.160\nIf we have some overlap I'll use that,\noh we do, this guy.\n\n177\n00:10:20.160 --> 00:10:26.380\nSo this guy's running routing protocol\neigrp 800, and that's it, just eigrp 800.\n\n178\n00:10:26.380 --> 00:10:28.850\nAnd NYCORE1 was running eigrp 800.\n\n179\n00:10:28.850 --> 00:10:32.040\nSo, since they're both running\nthat routing protocol, if\n\n180\n00:10:32.040 --> 00:10:36.290\nI build an adjacency between them, then we\nshould start learning these networks and\n\n181\n00:10:36.290 --> 00:10:37.530\nbe able to communicate across it.\n\n182\n00:10:37.530 --> 00:10:40.390\nSo that could solve our problem right\nthere, if we just bring that in.\n\n183\n00:10:40.390 --> 00:10:43.470\nAll right, now when I look at\nmy routing statements here,\n\n184\n00:10:43.470 --> 00:10:46.600\nsee how I'm already routing for 10.1.1.0?\n\n185\n00:10:46.600 --> 00:10:51.569\nBut I'm routing for it as a /31,\nand that's not right.\n\n186\n00:10:51.569 --> 00:10:55.168\nI'm a /30 on this one, right?\n\n187\n00:10:55.168 --> 00:11:00.330\nAnd if I look at NYCORE1, and\nwe go back to its eigrp configuration,\n\n188\n00:11:00.330 --> 00:11:05.550\nit shows that it's routing for\nnetworks 10.1.1.0/30.\n\n189\n00:11:05.550 --> 00:11:10.170\nSo I've fixed the subnet mask\nissue on that interface, but\n\n190\n00:11:10.170 --> 00:11:13.828\nit looks like the subnet mask is\nwrong in the routing protocol also.\n\n191\n00:11:13.828 --> 00:11:18.699\nSo that /31 carried over there,\nso I need to fix that,\n\n192\n00:11:18.699 --> 00:11:22.869\nand we can spot that in\nour eigrp configuration.\n\n193\n00:11:22.869 --> 00:11:25.878\nSure enough, right here,\nthey've just got that network defined and\n\n194\n00:11:25.878 --> 00:11:28.534\nthe wildcard mask is wrong for\nit, so we just need to fix that.\n\n195\n00:11:28.534 --> 00:11:33.984\nSo we can get into router eiqrp 800 and\nI can do a no network\n\n196\n00:11:33.984 --> 00:11:39.870\n10.1.1.0 0.0.0.1 to get\nthat one out of there.\n\n197\n00:11:39.870 --> 00:11:45.487\nAnd then I can do a network 10.1.1.0\n0.0.0.2 and that'll get us put,\n\n198\n00:11:45.487 --> 00:11:49.530\nwell actually wait a minute,\n\n199\n00:11:49.530 --> 00:11:54.150\nthat was a 252,\nI need a .3 on that one, don't I?\n\n200\n00:11:55.820 --> 00:11:59.690\nSo, we can put that one in there, and\nnow I see an adjacency come up, so\n\n201\n00:11:59.690 --> 00:12:00.380\nthat's a good sign.\n\n202\n00:12:00.380 --> 00:12:02.580\nAnd I just want to make sure\nI didn't do bad math there.\n\n203\n00:12:02.580 --> 00:12:07.222\nSo I'm going to do show IP protocol make\nsure I got a /30 on that network and I do.\n\n204\n00:12:07.222 --> 00:12:10.224\nGood, all right, so,\nwe've got that /30 in place and\n\n205\n00:12:10.224 --> 00:12:12.875\nwe should be exchanging\nroutes with the other guy.\n\n206\n00:12:12.875 --> 00:12:18.232\nSo let's go see if NYCORE1 has\nthe route that it needs for\n\n207\n00:12:18.232 --> 00:12:23.820\n192.168.16.10, and it's got a route.\n\n208\n00:12:23.820 --> 00:12:30.130\nAnd I bet that'll solve our problem, let's\njump back to our server, and we'll see\n\n209\n00:12:30.130 --> 00:12:35.712\nif we can ping now, so if I do that ping\nto 10.1.1.1, sure enough, there we go.\n\n210\n00:12:35.712 --> 00:12:39.280\nAll right, so I had to fix the subnet\nmask on the interface, and\n\n211\n00:12:39.280 --> 00:12:43.460\nI had to fix the wildcard mask on the\nroute being advertised out in eqigrp, and\n\n212\n00:12:43.460 --> 00:12:47.840\nonce we had that fixed, now NYCORE1\nhad the routes it needed, NYCORE2\n\n213\n00:12:47.840 --> 00:12:52.860\nwas able to communicate with NYCORE1, And\nPLABCISCO01 was able to ping through it.\n\n214\n00:12:52.860 --> 00:12:54.370\nAll of the issues on\nthe ticket are resolved,\n\n215\n00:12:54.370 --> 00:12:56.100\nand that's going to wrap this one up.\n\n216\n00:12:56.100 --> 00:12:58.880\nAll right, well that's another\ntroubleshooting ticket under our belt.\n\n217\n00:12:58.880 --> 00:13:01.763\nWe still have a few more to tackle\nbefore we're done with Set 5, so\n\n218\n00:13:01.763 --> 00:13:02.754\nstay tuned for those.\n\n219\n00:13:02.754 --> 00:13:05.563\nBut that wraps this one up, and\nI hope to see you next time.\n\n220\n00:13:05.563 --> 00:13:06.617\n[SOUND]\n\n",
          "vimeoId": "149155909"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #5` from set #5. The trouble ticket states that \"You are unable to ping 172.88.88.1 which is a loopback on NYWAN1 from PLABCSCO01 \"",
          "length": "424",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-5-5-set_5_issue_5-120315-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-5-5-set_5_issue_5-120315-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-5-5-set_5_issue_5-120315-1-sm.jpg",
          "title": "Set 5 Issue 5",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:04.129\n[MUSIC]\n\n2\n00:00:08.587 --> 00:00:11.004\nAll right, it's time for\nset five, issue five.\n\n3\n00:00:11.004 --> 00:00:12.640\nWe've got another\ntroubleshooting ticket here.\n\n4\n00:00:12.640 --> 00:00:14.800\nLet's dive into it and\nsee if we can cause or\n\n5\n00:00:14.800 --> 00:00:16.963\nwhat kind of trouble\nwe can get into today.\n\n6\n00:00:16.963 --> 00:00:23.730\n[LAUGH] We've got, you are unable to ping\n172.88.88.1, that's a new IP for us.\n\n7\n00:00:23.730 --> 00:00:28.421\nWhich is a loopback on\nNYWAN1 from PLABCSCO01.\n\n8\n00:00:28.421 --> 00:00:29.129\nAll right, good.\n\n9\n00:00:29.129 --> 00:00:30.856\nWell at least they told us\nwhere the IP was this time,\n\n10\n00:00:30.856 --> 00:00:32.129\nwe didn't have to hunt around for it.\n\n11\n00:00:32.129 --> 00:00:33.821\nIf we take a look at NYWAN1,\n\n12\n00:00:33.821 --> 00:00:38.890\nit's gonna have an IP 172.88.88.1\non a loopback interface.\n\n13\n00:00:38.890 --> 00:00:42.090\nAnd we've got PLABCSCO01, our server,\nthat just needs to be able to ping it and\n\n14\n00:00:42.090 --> 00:00:43.600\napparently that's not working.\n\n15\n00:00:43.600 --> 00:00:47.460\nSo if we look at our topology, we can kind\nof get an idea of what we're looking at.\n\n16\n00:00:47.460 --> 00:00:50.990\nNow from our previous troubleshooting\ntickets here in set five,\n\n17\n00:00:50.990 --> 00:00:55.300\nwe know that we've got EIGRP 800 that's\nrunning on most of this equipment.\n\n18\n00:00:55.300 --> 00:00:58.030\nAnd so\nwhen PLABCSCO hits its default gateway,\n\n19\n00:00:58.030 --> 00:01:03.370\nNYCORE2, there should be a route for\nthe 172.88.88 network.\n\n20\n00:01:03.370 --> 00:01:08.198\nAnd that should send us up to EDGE1, which\nEDGE1 has an undocumented connection to\n\n21\n00:01:08.198 --> 00:01:10.649\nWAN1 that we found in the earlier ticket.\n\n22\n00:01:10.649 --> 00:01:14.990\nAnd then once we get to WAN1,\nit's a loopback interface right there.\n\n23\n00:01:14.990 --> 00:01:19.360\nSo we should be able to do that,\nright, assuming the route exists.\n\n24\n00:01:19.360 --> 00:01:22.170\nNow because there's enough\ndevices in the mix here,\n\n25\n00:01:22.170 --> 00:01:25.250\nI wanna use trace route to figure\nout where this network is dying or\n\n26\n00:01:25.250 --> 00:01:27.010\nmissing and\nwhere were having that problem.\n\n27\n00:01:27.010 --> 00:01:29.920\nAnd so we'll kinda jump through the steps\nhere to figure out where that is.\n\n28\n00:01:29.920 --> 00:01:34.421\nI'm gonna start down on my server,\nwhere we can do the trace route.\n\n29\n00:01:34.421 --> 00:01:36.587\nSo I'm gonna start just by\ndoing a quick ping, right.\n\n30\n00:01:36.587 --> 00:01:41.683\nI'm gonna ping 172.88.88.1, and\nI get destination host unreachable,\n\n31\n00:01:41.683 --> 00:01:45.647\nand I'm getting that\nresponse from 192.168.16.1,\n\n32\n00:01:45.647 --> 00:01:48.660\nthat's my default gateway, that's NYCORE2.\n\n33\n00:01:48.660 --> 00:01:51.630\nIf I do a trace route to 127.88.88.1,\nit's just gonna\n\n34\n00:01:53.160 --> 00:01:58.090\ndie off at that first hop,\nI really didn't need to do a trace route\n\n35\n00:01:58.090 --> 00:02:01.350\nhere cuz I know I got that\nreply from my gateway.\n\n36\n00:02:01.350 --> 00:02:03.930\nAll right, so\nI'm dying right at my first hop.\n\n37\n00:02:03.930 --> 00:02:10.080\nSo NYCORE2 most likely doesn't have\na route to the 172.88.88 network.\n\n38\n00:02:10.080 --> 00:02:13.710\nSo now we need to start tracing that\nback to figure out where the failure is.\n\n39\n00:02:13.710 --> 00:02:15.129\nI can verify it doesn't have a route.\n\n40\n00:02:15.129 --> 00:02:20.892\nIf I jump over to NYCORE2,\nand I do a show ip route,\n\n41\n00:02:20.892 --> 00:02:29.050\nand I'll include 172.88.88,\nand it's got nothing.\n\n42\n00:02:29.050 --> 00:02:34.180\nLet me just punch it in like this,\nwe'll do it a slightly different way.\n\n43\n00:02:34.180 --> 00:02:35.330\nThere we go, subnet not in table.\n\n44\n00:02:35.330 --> 00:02:37.060\nAll right, so I don't have a route.\n\n45\n00:02:37.060 --> 00:02:41.010\nAnd if I do a show ip eigrp neighbor,\n\n46\n00:02:41.010 --> 00:02:43.420\nI can see those neighbor\nrelationships that I have.\n\n47\n00:02:43.420 --> 00:02:48.690\nOne with NYCORE1, but\nthe other ones are connections to NYEDGE2.\n\n48\n00:02:48.690 --> 00:02:50.490\nSo that's the connection\nbetween NYCORE2 and\n\n49\n00:02:50.490 --> 00:02:52.610\nEDGE2 that we fixed in an earlier ticket.\n\n50\n00:02:52.610 --> 00:02:54.410\nAnd I know that EDGE2\nis connected to WAN1,\n\n51\n00:02:54.410 --> 00:02:56.490\nwhich we also fixed in an earlier ticket.\n\n52\n00:02:56.490 --> 00:02:58.360\nSo that's where I should\nbe learning the route from.\n\n53\n00:02:58.360 --> 00:03:01.220\nLet's go see if EDGE2 has that route,\nI doubt it does.\n\n54\n00:03:01.220 --> 00:03:05.552\nSo if I look at EDGE2,\nwe can get into this system and\n\n55\n00:03:05.552 --> 00:03:09.592\ndo a show ip route 172.88.88.1, and\n\n56\n00:03:09.592 --> 00:03:13.547\nit doesn't have the route either,\nall right.\n\n57\n00:03:13.547 --> 00:03:15.422\nIt might have a gateway of last resort,\nI don't know, but\n\n58\n00:03:15.422 --> 00:03:18.430\nit doesn't have that route and\nthat's what's important to me, all right.\n\n59\n00:03:18.430 --> 00:03:22.750\nSo if it doesn't have the route,\nthat takes us all the way back to NYWAN1.\n\n60\n00:03:22.750 --> 00:03:28.210\nThis interface is on NYWAN1,\nit's supposed to be teaching us about it.\n\n61\n00:03:28.210 --> 00:03:32.670\nWhoops and [LAUGH],\nI'm gonna do a little typo there.\n\n62\n00:03:32.670 --> 00:03:38.820\nSee this is where you do the no IP domain\nlookup, you kind of turn off that lookup.\n\n63\n00:03:38.820 --> 00:03:42.046\nYou don't have to sit here and\nwait for this to error out.\n\n64\n00:03:42.046 --> 00:03:45.212\nAnd Ctrl+Shift+6 is not working for\nme today.\n\n65\n00:03:45.212 --> 00:03:47.660\nWell, we'll give that a second\nwhile it errors out, there we go.\n\n66\n00:03:47.660 --> 00:03:52.110\nAnd I'm gonna do a quick\nshow IP interface brief,\n\n67\n00:03:52.110 --> 00:03:57.990\nthis guy is supposed to have 172.88.88.1\naccording to the troubleshooting ticket.\n\n68\n00:03:57.990 --> 00:04:01.910\nAnd I see some that are close, it said it\nwas a loopback, so let's keep looking,\n\n69\n00:04:01.910 --> 00:04:03.570\nand there it is.\n\n70\n00:04:03.570 --> 00:04:07.940\nSo we've got 172.88.88.1 right there.\n\n71\n00:04:07.940 --> 00:04:12.020\nAnd if I keep looking\nat my screen [LAUGH],\n\n72\n00:04:12.020 --> 00:04:15.740\nthis might be a really easy ticket for\nus, it's administratively down.\n\n73\n00:04:15.740 --> 00:04:17.430\nI don't care what routing\nprotocol you're running,\n\n74\n00:04:17.430 --> 00:04:21.250\nwe're not gonna advertise a route if\nthe interface is administratively down.\n\n75\n00:04:21.250 --> 00:04:22.670\nThis one appears to be shut down,\n\n76\n00:04:22.670 --> 00:04:25.710\nI'll bet our problem is as\nlimited as that, all right.\n\n77\n00:04:25.710 --> 00:04:28.690\nBut before I turn that on, I'm just\ngonna double check one other thing,\n\n78\n00:04:28.690 --> 00:04:32.370\nI wanna look at my EIGRP configuration and\n\n79\n00:04:32.370 --> 00:04:36.910\njust see if that network is even a part\nof EIGRP and I can see that it is.\n\n80\n00:04:36.910 --> 00:04:39.640\nSo it's actively part of EIGRP so\n\n81\n00:04:39.640 --> 00:04:41.980\nit should be advertised\nout as long as it's up.\n\n82\n00:04:41.980 --> 00:04:44.940\nWhat I was kind of expecting to find here\nwas like a redistribute connected with\n\n83\n00:04:44.940 --> 00:04:46.920\na route map to make it all complex.\n\n84\n00:04:46.920 --> 00:04:49.180\nBut this one, it's just right there.\n\n85\n00:04:49.180 --> 00:04:51.380\nSo if we get in and\nturn that interface on,\n\n86\n00:04:51.380 --> 00:04:55.890\nwhich I guess I should have looked at what\nthe loopback number was, it was Loopback1.\n\n87\n00:04:55.890 --> 00:04:58.820\nSo if I get into Loopback1 and\ndo a no shutdown,\n\n88\n00:04:58.820 --> 00:05:03.200\nloopbacks are always up unless you issue\nthe shutdown command, which somebody did.\n\n89\n00:05:03.200 --> 00:05:06.040\nSo when I do a no shutdown,\nthat should come up.\n\n90\n00:05:06.040 --> 00:05:09.120\nAnd I'm not getting any output\non my screen which means\n\n91\n00:05:09.120 --> 00:05:10.810\nconsole logging is probably off.\n\n92\n00:05:10.810 --> 00:05:13.880\nSo let me do a show IP\ninterface brief again and\n\n93\n00:05:13.880 --> 00:05:18.730\njust make sure that loopback interface did\ncome up and I can see that it is up up.\n\n94\n00:05:18.730 --> 00:05:19.752\nSo I'm good there.\n\n95\n00:05:19.752 --> 00:05:23.930\nAnd EIGRP should run with that,\nit should take it, advertise it out, and\n\n96\n00:05:23.930 --> 00:05:27.720\nit should start passing across the lines\nso I can follow the path back if I want.\n\n97\n00:05:27.720 --> 00:05:32.150\nI get in to NYEDGE2 which didn't have\na route just a few moments ago and\n\n98\n00:05:32.150 --> 00:05:35.250\nif I do a show ip route, now it does.\n\n99\n00:05:35.250 --> 00:05:40.480\nAnd if I jump over to NYCORE2,\nit didn't have a route either,\n\n100\n00:05:40.480 --> 00:05:45.400\nand so, now if I do that show ip route\nagain, I can see it has a route.\n\n101\n00:05:45.400 --> 00:05:48.810\nAnd if I jump all the way back to my\nserver that wasn't able to ping in\n\n102\n00:05:48.810 --> 00:05:52.720\nthe very beginning, now, I can ping.\n\n103\n00:05:52.720 --> 00:05:55.190\nThis actually turned out to be a pretty\nstraightforward troubleshooting\n\n104\n00:05:55.190 --> 00:05:56.230\nticket for us.\n\n105\n00:05:56.230 --> 00:05:58.831\nSo on this one,\nwe weren't able to ping an IP and\n\n106\n00:05:58.831 --> 00:06:03.324\nit's because the interface where that\nrouter originated from was shut down, and\n\n107\n00:06:03.324 --> 00:06:06.796\nif it's shut down,\nit's not going to be able to advertise it.\n\n108\n00:06:06.796 --> 00:06:10.452\nRemember, the thing I always\nremember is you'll never\n\n109\n00:06:10.452 --> 00:06:14.830\nadvertise a route unless it's\nin your own routing table.\n\n110\n00:06:14.830 --> 00:06:17.660\nSo if I'm a router and\nI've got 20 interfaces and\n\n111\n00:06:17.660 --> 00:06:20.740\nI'm learning stuff, if I have routes\nthat I don't put in my own routing table\n\n112\n00:06:20.740 --> 00:06:22.110\nI'm not gonna advertise them.\n\n113\n00:06:22.110 --> 00:06:23.850\nSo if interfaces are shut down or\n\n114\n00:06:23.850 --> 00:06:26.010\nif administrative distances\noverride something.\n\n115\n00:06:26.010 --> 00:06:30.970\nIf I use a policy based routing,\nor whatever, to remove a route,\n\n116\n00:06:30.970 --> 00:06:34.270\nany of that kind of stuff will\naffect what I'm gonna advertise out.\n\n117\n00:06:34.270 --> 00:06:35.910\nSo in this case, it was that simple.\n\n118\n00:06:35.910 --> 00:06:38.730\nWe did a no shut down on the interface,\nthe interface came healthy and\n\n119\n00:06:38.730 --> 00:06:42.370\nwent into that router's routing table,\nnow it advertised it out,\n\n120\n00:06:42.370 --> 00:06:43.828\neverybody else learned it, and we're done.\n\n121\n00:06:43.828 --> 00:06:47.290\nSo it's straightforward, knocked it out,\nand we can wrap this one up.\n\n122\n00:06:47.290 --> 00:06:49.330\nAll right, so\nthat takes care of issue number five.\n\n123\n00:06:49.330 --> 00:06:51.990\nWe still have two more issues with set\nfive, they're gonna come up next, so\n\n124\n00:06:51.990 --> 00:06:53.750\ndefinitely stay tuned for that.\n\n125\n00:06:53.750 --> 00:06:58.712\nHope you guys enjoyed this one and\nI'll see you for the next.\n\n126\n00:06:58.712 --> 00:07:03.739\n[MUSIC]\n\n",
          "vimeoId": "151013753"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #6` from set #5. The trouble ticket states that \"You are unable to ping from PLABCSCO01 to 150.100.50.1, also a loopback on NYWAN1 \"",
          "length": "922",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-5-6-set_5_issue_6-120315-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-5-6-set_5_issue_6-120315-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-5-6-set_5_issue_6-120315-1-sm.jpg",
          "title": "Set 5 Issue 6",
          "transcript": "WEBVTT\n\n1\n00:00:00.058 --> 00:00:05.100\n[MUSIC]\n\n2\n00:00:08.475 --> 00:00:12.222\nAll right welcome back to another\ntroubleshooting episode here on ITProTV.\n\n3\n00:00:12.222 --> 00:00:15.490\nWe're gonna be jumping into\nset five issue number six.\n\n4\n00:00:15.490 --> 00:00:17.460\nWe're kind of getting down\nto the end of set five.\n\n5\n00:00:17.460 --> 00:00:20.260\nAnd we've got a troubleshooting\nticket that's actually eerily\n\n6\n00:00:20.260 --> 00:00:22.740\nsimilar to issue number five.\n\n7\n00:00:22.740 --> 00:00:27.898\nThis one says,\nyou are unable to ping from PLABCISCO01 to\n\n8\n00:00:27.898 --> 00:00:33.380\n150.100.50.1, which is\na loopback on NYWAN1.\n\n9\n00:00:33.380 --> 00:00:36.569\nWell the last issue was that we\ncouldn't ping a loopback on NYWAN1, and\n\n10\n00:00:36.569 --> 00:00:38.046\nit turned out to be easy, right?\n\n11\n00:00:38.046 --> 00:00:39.930\nThe interface was shut down.\n\n12\n00:00:39.930 --> 00:00:41.357\nMaybe we get lucky on this one, right?\n\n13\n00:00:41.357 --> 00:00:44.748\nIn fact, let's just jump and double-check\nthat before we dive too deep into this.\n\n14\n00:00:44.748 --> 00:00:47.607\nI'm gonna go and\npull up NYWAN1 real quick.\n\n15\n00:00:47.607 --> 00:00:52.214\nAnd I just wanna verify that,\nthat interface is on.\n\n16\n00:00:52.214 --> 00:00:59.328\nSo I'm gonna do show IP interface brief,\nand find Loopback0 is 150.100.50.1.\n\n17\n00:00:59.328 --> 00:01:01.140\nAnd well, it's up, up.\n\n18\n00:01:01.140 --> 00:01:04.230\nAll right so, it's not as simple as\nan interface being shut down this time,\n\n19\n00:01:04.230 --> 00:01:06.320\nwe're gonna have a little\nbit more work to do.\n\n20\n00:01:06.320 --> 00:01:10.795\nSo what they're telling us is\nthat PLABCISCO01 is unable\n\n21\n00:01:10.795 --> 00:01:15.008\nto ping this loop back\ninterface right here on NYWAN1.\n\n22\n00:01:15.008 --> 00:01:18.366\nAnd if we remember from our\nprevious tickets here in set five,\n\n23\n00:01:18.366 --> 00:01:23.270\nthe path that we follow PLABCISCO01\nhas a default gateway of NYCORE2.\n\n24\n00:01:23.270 --> 00:01:28.208\nNYCORE2 is using EIGRP to\nexchange routes with NYEDGE2.\n\n25\n00:01:28.208 --> 00:01:32.995\nAnd then NYEDGE2 is using EIGRP to\nexchange routes directly with NYWAN1\n\n26\n00:01:32.995 --> 00:01:35.940\nwith a link that's not\nhere on our topology.\n\n27\n00:01:35.940 --> 00:01:38.100\nWe discovered that in one\nof the earlier issues.\n\n28\n00:01:38.100 --> 00:01:41.880\nAnd so we should be learning\nthat route from NYWAN1\n\n29\n00:01:41.880 --> 00:01:44.390\nto NYCORE2 down to our workstation.\n\n30\n00:01:44.390 --> 00:01:45.690\nThat should be the path we follow.\n\n31\n00:01:45.690 --> 00:01:48.056\nJust three devices in between\nour source and the destination.\n\n32\n00:01:48.056 --> 00:01:52.128\nSo, as far as troubleshooting, we don't\nhave a lot of places to look here.\n\n33\n00:01:52.128 --> 00:01:55.540\nAnd I'm gonna start out in typical\nfashion and do a trace route and\n\n34\n00:01:55.540 --> 00:01:57.280\nsee what we can find.\n\n35\n00:01:57.280 --> 00:02:01.800\nI'll jump over to that server and\nhere I am on the server.\n\n36\n00:02:01.800 --> 00:02:03.316\nAnd first I'll just start off with a ping,\nright.\n\n37\n00:02:03.316 --> 00:02:09.370\nSo I'm going to try and ping 150.100.50.1\nand see if I can ping it, right.\n\n38\n00:02:09.370 --> 00:02:14.110\nThat's our trouble IP and if I can ping\nthat then the ticket's over, but I can't.\n\n39\n00:02:14.110 --> 00:02:20.808\nSo then we'll do a trace\nroute to 150.100.50.1.\n\n40\n00:02:20.808 --> 00:02:22.588\nAnd we'll see how far we're getting,\nright?\n\n41\n00:02:22.588 --> 00:02:28.082\nThe first hop should be our default\ngateway which is 192.168.16.1,\n\n42\n00:02:28.082 --> 00:02:29.998\nand then that's NYCORE2.\n\n43\n00:02:29.998 --> 00:02:34.810\nThen we should see NYEDGE2 and\nwell, that's a little interesting.\n\n44\n00:02:34.810 --> 00:02:39.900\nSo my default gateway is 192.168.16.1.\n\n45\n00:02:39.900 --> 00:02:44.207\nBut my first hop is 192.168.16.5.\n\n46\n00:02:44.207 --> 00:02:45.860\nThat's not normal, right?\n\n47\n00:02:45.860 --> 00:02:47.520\nSo, what happened?\n\n48\n00:02:47.520 --> 00:02:49.620\nWell, there's a few things\nthat can happen, right?\n\n49\n00:02:49.620 --> 00:02:52.830\nIt's not a Windows troubleshooting show,\nbut in Windows you can actually put static\n\n50\n00:02:52.830 --> 00:02:56.730\nroutes in the operating system and\nthat might send us a different way, right?\n\n51\n00:02:56.730 --> 00:03:00.392\nOur routers can manipulate where we're\ngoing by doing things like policy based\n\n52\n00:03:00.392 --> 00:03:03.738\nrouting, and you can use route maps\nto manipulate all sorts of traffic.\n\n53\n00:03:03.738 --> 00:03:06.494\nSo something could be happening\nout there in the network too,\n\n54\n00:03:06.494 --> 00:03:08.146\nbut it seems kind of odd to have this.\n\n55\n00:03:08.146 --> 00:03:10.206\nBut either way,\nthat's where I'm dying off.\n\n56\n00:03:10.206 --> 00:03:14.703\nAnd 192.168.16.5 if we\ngo back to our topology,\n\n57\n00:03:14.703 --> 00:03:20.151\nthat's NYEDGE2, so my workstation\nis effectively skipping NYCORE2,\n\n58\n00:03:20.151 --> 00:03:25.710\ngoing right to EDGE2, and\ngetting a message that it can't get back.\n\n59\n00:03:25.710 --> 00:03:27.560\nThat seems really weird.\n\n60\n00:03:27.560 --> 00:03:28.780\nWhy is that happening?\n\n61\n00:03:28.780 --> 00:03:29.490\nWell, I don't know.\n\n62\n00:03:29.490 --> 00:03:32.379\nFirst off,\nlet's make sure I'm not lying to you and\n\n63\n00:03:32.379 --> 00:03:36.068\nthat my default gateway is\nactually 192.168 .16.1.\n\n64\n00:03:36.068 --> 00:03:40.468\nSo I'm gonna stop this,\nand just do an ipconfig.\n\n65\n00:03:40.468 --> 00:03:45.450\nAnd looking at my configuration,\nI'm 192.168.16.10,\n\n66\n00:03:45.450 --> 00:03:49.296\nand 192.168.16.1 is my default gateway.\n\n67\n00:03:49.296 --> 00:03:51.794\nWhich means I am going to NYCORE2, but\n\n68\n00:03:51.794 --> 00:03:55.960\nsomehow it's invisible on the network so\nwhy is that?\n\n69\n00:03:55.960 --> 00:04:00.148\nWell if I jump to NYCORE2, I'm gonna\nverify that it does still have that IP\n\n70\n00:04:00.148 --> 00:04:04.078\naddress and something didn't change\nin between the questions here.\n\n71\n00:04:04.078 --> 00:04:10.018\nSo I'll do a show IP interface brief and\nI'll exclude the unassigned interfaces and\n\n72\n00:04:10.018 --> 00:04:13.126\nthere it is, 192.168.16.1.\n\n73\n00:04:13.126 --> 00:04:19.200\nSo I came to this system on my way to\nthe network that I'm trying to get to.\n\n74\n00:04:19.200 --> 00:04:23.060\nBut then for some reason,\nI got moved off which\n\n75\n00:04:23.060 --> 00:04:25.790\nmakes me think that there's something\nin here manipulating that path.\n\n76\n00:04:25.790 --> 00:04:28.202\nSo, maybe there's like\na policy-based route, right?\n\n77\n00:04:28.202 --> 00:04:31.507\nWell policy-based routes are easy to spot\nbecause they're assigned on the interface\n\n78\n00:04:31.507 --> 00:04:33.220\nand there will be a route\nmap that ties it.\n\n79\n00:04:33.220 --> 00:04:38.040\nSo I came in interface vlan 16,\nso I'll do a show run for\n\n80\n00:04:38.040 --> 00:04:41.800\ninterface vlan 16 and,\nwell, there's nothing.\n\n81\n00:04:41.800 --> 00:04:43.390\nAll right, so that rules out PBR.\n\n82\n00:04:43.390 --> 00:04:45.050\nIt's not policy-based routing.\n\n83\n00:04:45.050 --> 00:04:47.938\nSo, why did I see that other node?\n\n84\n00:04:47.938 --> 00:04:51.305\nWell, let's look at our routing table, see\nif we can't figure this out from there.\n\n85\n00:04:51.305 --> 00:04:57.658\nI'm gonna do a show IP route for\n150.100.50.1.\n\n86\n00:04:57.658 --> 00:04:59.435\nThat's the IP we're trying to get to and\n\n87\n00:04:59.435 --> 00:05:02.170\nI've got a route, and\nI've got a static route.\n\n88\n00:05:02.170 --> 00:05:08.320\nOh, and more importantly I've got a static\nroute that's pointing me to 192.168.16.5.\n\n89\n00:05:08.320 --> 00:05:12.780\nI've got a static route that's pointing to\nanother IP on the same network as me, and\n\n90\n00:05:12.780 --> 00:05:14.620\nit's the same network as my server.\n\n91\n00:05:14.620 --> 00:05:18.510\nSo let's go back to our diagram and see\nwhat effect that's gonna have, all right?\n\n92\n00:05:18.510 --> 00:05:22.812\nBasically the server is 192.168.16.10.\n\n93\n00:05:22.812 --> 00:05:26.920\nNYCORE2 is on the same network, .1.\n\n94\n00:05:26.920 --> 00:05:30.632\nAnd NYEDGE2 is on the same network .5.\n\n95\n00:05:30.632 --> 00:05:34.012\nSo you've got .10, .1, and .5.\n\n96\n00:05:34.012 --> 00:05:36.748\nI'm coming from .10 and\nmy default gateway is .1.\n\n97\n00:05:36.748 --> 00:05:41.592\nBut when I hit there I hit a static\nroute that send me out .5.\n\n98\n00:05:41.592 --> 00:05:44.710\nAll right,\nanother IP on the same network, so\n\n99\n00:05:44.710 --> 00:05:47.230\nthat's the way I'm going on the way out.\n\n100\n00:05:47.230 --> 00:05:50.340\nThat router would then send me on\nto the destination, which NYWAN1.\n\n101\n00:05:50.340 --> 00:05:56.220\nAnd when the traffic comes back,\nit comes to .5, and it's going to .10,\n\n102\n00:05:56.220 --> 00:05:59.600\nwell this guy's .5, the other one is .10,\nthey're on the same network,\n\n103\n00:05:59.600 --> 00:06:03.310\nit goes direct,\nit goes straight to my work station.\n\n104\n00:06:03.310 --> 00:06:06.020\nAnd bypasses NYCORE2.\n\n105\n00:06:06.020 --> 00:06:09.424\nSo on the way out,\nI am going through NYCORE2 but\n\n106\n00:06:09.424 --> 00:06:12.588\non the way back, we're skipping NYCORE2.\n\n107\n00:06:12.588 --> 00:06:15.591\nSo when I get the ping responses,\nthe echo replies,\n\n108\n00:06:15.591 --> 00:06:20.096\nthey're coming directly from .5, and\nthat's why I'm seeing a trace route\n\n109\n00:06:20.096 --> 00:06:23.520\nresponse from a host that's\nnot my default gateway.\n\n110\n00:06:23.520 --> 00:06:26.740\nNot policy-based routing,\nthis is just straight up normal traffic.\n\n111\n00:06:26.740 --> 00:06:29.830\nI say normal, this is what's\ncalled asynchronous routing.\n\n112\n00:06:29.830 --> 00:06:33.090\nI'm going out one way and\ncoming back another.\n\n113\n00:06:33.090 --> 00:06:36.510\nAnd sometimes that's okay,\nand sometimes it's a problem.\n\n114\n00:06:36.510 --> 00:06:39.500\nFor example, if I was doing\nan IP sec tunnel across this,\n\n115\n00:06:39.500 --> 00:06:44.710\nIP sec hates asynchronous routing and\nit will probably break my tunnel, right.\n\n116\n00:06:44.710 --> 00:06:46.390\nBut I'm just doing pings,\nand pings don't care.\n\n117\n00:06:46.390 --> 00:06:48.010\nPings are stateless, sessionless.\n\n118\n00:06:48.010 --> 00:06:50.580\nThey just go out there and\nwe get our responses back.\n\n119\n00:06:50.580 --> 00:06:53.960\nSo I'm not so\nworried about the asynchronous routing.\n\n120\n00:06:53.960 --> 00:06:55.380\nIn fact I'm just gonna\nput it out of my mind for\n\n121\n00:06:55.380 --> 00:06:58.220\nright now, we'll come back to\nit if it's a problem later.\n\n122\n00:06:58.220 --> 00:07:01.800\nPoint is,\nI do have a route here on NYCORE2, but\n\n123\n00:07:01.800 --> 00:07:04.810\nit's a static route, it's telling\nme how to get to this network.\n\n124\n00:07:04.810 --> 00:07:08.690\nThat tells me I'm not learning the route\nfrom a dynamic routing protocol.\n\n125\n00:07:08.690 --> 00:07:12.928\nAnd so if I jump up to EDGE2, I kind\nof expect to see a static route there.\n\n126\n00:07:12.928 --> 00:07:17.788\nAlso, that's telling it how\nto get to 150.100.50.1.\n\n127\n00:07:17.788 --> 00:07:22.176\nSo, let's go take a look at EDGE2, and see\nif it's got a static route for that one.\n\n128\n00:07:22.176 --> 00:07:27.793\nAnd so on EDGE2,\nI'm gonna do a show IP route for\n\n129\n00:07:27.793 --> 00:07:34.098\n150.100.50.1 and I don't have a route.\n\n130\n00:07:34.098 --> 00:07:36.410\nAll right, I don't have a dynamic or\na static route.\n\n131\n00:07:36.410 --> 00:07:38.150\nI just don't have a route to get there.\n\n132\n00:07:38.150 --> 00:07:41.100\nSo my workstation made it to NYEDGE2 and\n\n133\n00:07:41.100 --> 00:07:44.182\nthen died off because there's no\nroute here to tell me where to go.\n\n134\n00:07:44.182 --> 00:07:48.620\nAll right, so I need this router to\nknow how to get to that network.\n\n135\n00:07:48.620 --> 00:07:50.320\nNow normally, I'm thinking,\nlet's just go and\n\n136\n00:07:50.320 --> 00:07:52.740\nconfigure a dynamic routing protocol and\nget it done.\n\n137\n00:07:52.740 --> 00:07:54.640\nBut in the troubleshooting ticket, and\n\n138\n00:07:54.640 --> 00:07:57.870\nthis is actually one where they give us\na little bit of a hint, and in the hint,\n\n139\n00:07:57.870 --> 00:08:02.270\nit tells us, use trace route to see which\ndevice is potentially causing the issue.\n\n140\n00:08:02.270 --> 00:08:07.550\nWe did that, and then it says this\nis not a routing table issue.\n\n141\n00:08:07.550 --> 00:08:09.980\nObserve the configuration for\nthe specific address.\n\n142\n00:08:09.980 --> 00:08:14.380\nSo what they're telling us is we should\nnot mess with our routing table.\n\n143\n00:08:14.380 --> 00:08:17.840\nWhen I look at this,\nI've got some possible solutions.\n\n144\n00:08:17.840 --> 00:08:20.360\nI could use a dynamic routing\nprotocol to learn the route.\n\n145\n00:08:20.360 --> 00:08:21.940\nI could put a static route in.\n\n146\n00:08:21.940 --> 00:08:23.970\nBut both of those modify\nthe routing table, and\n\n147\n00:08:23.970 --> 00:08:27.840\nwhat they're telling me here in the hint\nis don't modify the routing table.\n\n148\n00:08:27.840 --> 00:08:32.380\nWell, how can I route traffic\nwithout modifying the routing table?\n\n149\n00:08:32.380 --> 00:08:35.612\nWell actually, kind of mentioned\nit earlier, policy-based routing.\n\n150\n00:08:35.612 --> 00:08:39.830\nPBR, policy-based routing,\nlets you override the routing table.\n\n151\n00:08:39.830 --> 00:08:42.300\nThe routing table still exists,\nit's got all of its routes, but\n\n152\n00:08:42.300 --> 00:08:43.120\nyou can override it.\n\n153\n00:08:43.120 --> 00:08:44.590\nYou can change people's next hop.\n\n154\n00:08:44.590 --> 00:08:48.100\nYou can do all sorts of\ncrazy things with PBR and\n\n155\n00:08:48.100 --> 00:08:52.320\nassuming that this is right,\nit should be set for that.\n\n156\n00:08:52.320 --> 00:08:54.380\nOr it's missing it and we need to add it.\n\n157\n00:08:54.380 --> 00:08:58.650\nSo let's take a look at our\nrunning configuration and\n\n158\n00:08:58.650 --> 00:09:00.230\nsee if it's set up for\npolicy-based routing.\n\n159\n00:09:00.230 --> 00:09:02.420\nNow, I actually don't need to\nlook at the whole configuration.\n\n160\n00:09:02.420 --> 00:09:06.470\nIf we're doing PBR,\nit should be capturing traffic on the way\n\n161\n00:09:06.470 --> 00:09:10.720\nin gi0/0 and then adjusting\nthe next hop of that traffic.\n\n162\n00:09:10.720 --> 00:09:13.380\nThat's the way you kind of\nbasically create a static route\n\n163\n00:09:13.380 --> 00:09:15.470\nwithout actually modifying\nthe routing table.\n\n164\n00:09:15.470 --> 00:09:19.020\nSome people view it as cheating,\nbut it is really useful.\n\n165\n00:09:19.020 --> 00:09:20.870\nIn real life networks there\nare times you need to\n\n166\n00:09:20.870 --> 00:09:22.460\nmanipulate the direction of traffic.\n\n167\n00:09:22.460 --> 00:09:24.810\nAnother way we can do it\nis with a GRE tunnel.\n\n168\n00:09:24.810 --> 00:09:27.120\nWe could create a GRE\ntunnel between one host and\n\n169\n00:09:27.120 --> 00:09:29.860\nanother to hide other\nhosts in the background.\n\n170\n00:09:29.860 --> 00:09:32.740\nAnd, that can solve missing routes\nwithout adjusting the routing table too.\n\n171\n00:09:32.740 --> 00:09:35.340\nSo, couple of different ways\nwe could solve this one.\n\n172\n00:09:35.340 --> 00:09:36.700\nLet's take a look at EDGE2 though, and\n\n173\n00:09:36.700 --> 00:09:41.725\nsee what it's got on its\ngigabit 0/0 interface.\n\n174\n00:09:41.725 --> 00:09:44.640\nAnd when I look at it, I've got nothing.\n\n175\n00:09:44.640 --> 00:09:45.840\nWell, that's, not good.\n\n176\n00:09:45.840 --> 00:09:48.980\nSo, oh shoot, I forgot,\nthis guy's router on a stick.\n\n177\n00:09:48.980 --> 00:09:53.047\nSo I've got 0/0, but this is VLAN\n16 that I'm dealing with, and so\n\n178\n00:09:53.047 --> 00:09:55.860\nit's actually set up for\nthat on a sub interface.\n\n179\n00:09:55.860 --> 00:09:58.100\nAnd we'd see that if we\ndid a show running config.\n\n180\n00:09:58.100 --> 00:09:59.090\nBut here we go.\n\n181\n00:09:59.090 --> 00:10:01.760\nSo I've got encapsulation.1q for VLAN 16.\n\n182\n00:10:01.760 --> 00:10:05.628\nThere's that IP address, 192.168.16.5 and\n\n183\n00:10:05.628 --> 00:10:09.116\nsure enough we've got a PBR\npolicy in place, right?\n\n184\n00:10:09.116 --> 00:10:11.800\nIP policy route-map.\n\n185\n00:10:11.800 --> 00:10:15.410\nSo any traffic coming in this interface\nis gonna have a route map applied to it.\n\n186\n00:10:15.410 --> 00:10:17.970\nAnd it's normally gonna tell us\nhow to access certain networks,\n\n187\n00:10:17.970 --> 00:10:20.770\nor drop our trafficking,\ndo all sorts of crazy things.\n\n188\n00:10:20.770 --> 00:10:25.450\nSo I'm gonna take a look at that route\nmap, so I'll do a show route-map PBR.\n\n189\n00:10:25.450 --> 00:10:27.540\nIt's only got one entry\nthat'll make this easy.\n\n190\n00:10:27.540 --> 00:10:29.150\nIt got a match clause.\n\n191\n00:10:29.150 --> 00:10:32.540\nIt's matching a certain access-list and\nthe access-list is called PBR.\n\n192\n00:10:32.540 --> 00:10:33.870\nSo I'll have to look at that.\n\n193\n00:10:33.870 --> 00:10:38.265\nAnd then it's taking into the next\nsetting its next-hop to 172.16.1.1 right,\n\n194\n00:10:38.265 --> 00:10:40.675\nwhich should be the way to\nget to our next network.\n\n195\n00:10:41.760 --> 00:10:44.110\nNow let's look at that access-list.\n\n196\n00:10:44.110 --> 00:10:48.884\nSo I'm gonna show access-list PBR,\nand it's only got one line,\n\n197\n00:10:48.884 --> 00:10:51.195\nit's got a lot of matches on it.\n\n198\n00:10:51.195 --> 00:10:57.460\nSo it's looking for 192.168.16.0,\nthat's where PLABCISCO01 is.\n\n199\n00:10:57.460 --> 00:11:05.520\nAny traffic coming from that network going\nto 150.100.50.0, that whole /24 network.\n\n200\n00:11:05.520 --> 00:11:06.940\nThen this list is going to match.\n\n201\n00:11:06.940 --> 00:11:08.110\nThat is my traffic.\n\n202\n00:11:08.110 --> 00:11:11.800\nThe traffic from my server\ngoing to that destination.\n\n203\n00:11:11.800 --> 00:11:17.398\nIt's going to modify it and it's going\nto change its next hop to 172.16.1.1.\n\n204\n00:11:17.398 --> 00:11:20.920\nNow, I don't know that IP so\nlet's see if we could get to that.\n\n205\n00:11:20.920 --> 00:11:26.950\nIf I do a ping to 172.16.1.1,\nI can ping it so it works out.\n\n206\n00:11:26.950 --> 00:11:30.064\nSo when I receive this traffic\nI'm forwarding along to that IP,\n\n207\n00:11:30.064 --> 00:11:31.226\nwe should be good to go.\n\n208\n00:11:31.226 --> 00:11:34.916\nAll right, well, let's look at our map and\nsee if we can't figure out who that is.\n\n209\n00:11:34.916 --> 00:11:41.510\n172.16.1 is conveniently not on our map,\nso now I don't really know who it is.\n\n210\n00:11:41.510 --> 00:11:43.340\nLet's see if we can't\nfigure it out another way.\n\n211\n00:11:44.640 --> 00:11:46.440\nI am running some routing protocols so\n\n212\n00:11:46.440 --> 00:11:48.588\nmaybe one of our neighbors\nwill have that IP.\n\n213\n00:11:48.588 --> 00:11:55.498\nIf I do a show ip eigrp neighbor,\nI see 172.16.1.2, that's close.\n\n214\n00:11:55.498 --> 00:11:56.720\nWell, now that's interesting.\n\n215\n00:11:56.720 --> 00:11:58.830\nIt's on my serial interface.\n\n216\n00:11:58.830 --> 00:12:01.530\nMy serial interfaces\nare all point to point.\n\n217\n00:12:01.530 --> 00:12:06.348\nAnd if I've got 172.16.1.2 on a serial\ninterface, where does that mean .1 is?\n\n218\n00:12:06.348 --> 00:12:07.520\nThat's probably my own IP.\n\n219\n00:12:07.520 --> 00:12:09.520\nLet me do a show IP interface brief.\n\n220\n00:12:11.430 --> 00:12:13.000\nAnd sure enough that's my own IP.\n\n221\n00:12:13.000 --> 00:12:18.044\nSo I've got a route map that's\ncapturing traffic coming from\n\n222\n00:12:18.044 --> 00:12:25.670\n192.168.16 that's going to 150.100.50 and\nit's changing it's next hop to me.\n\n223\n00:12:25.670 --> 00:12:27.080\nI'm basically creating a loop.\n\n224\n00:12:27.080 --> 00:12:30.410\nTraffic comes to me, I redirect it to me,\nand then it does that over and over and\n\n225\n00:12:30.410 --> 00:12:32.883\nover again,\nexcept it's really only gonna happen once,\n\n226\n00:12:32.883 --> 00:12:35.518\nbecause this is only applying\nto traffic coming in Gi0/0.\n\n227\n00:12:35.518 --> 00:12:38.280\nAnd after we apply this,\nit's not coming in the interface again,\n\n228\n00:12:38.280 --> 00:12:40.420\nit's just getting lost and thrown away.\n\n229\n00:12:40.420 --> 00:12:43.220\nAnd so that's where the traffic is dying,\nso my next hop is wrong.\n\n230\n00:12:43.220 --> 00:12:45.950\nThe next hop is most\nlikely supposed to be .2.\n\n231\n00:12:45.950 --> 00:12:51.850\nLet's find out, i'm going to jump NYWAN1\nand make sure it is actually .2 and\n\n232\n00:12:51.850 --> 00:12:55.430\nif it is then we found our person right.\n\n233\n00:12:55.430 --> 00:13:01.970\nSo if I do a show IP interface brief, I\nexpect to see 172.16.1.2 and there it is.\n\n234\n00:13:01.970 --> 00:13:05.420\nSo let's go fix that route map,\nand then we should be in business.\n\n235\n00:13:07.030 --> 00:13:08.900\nOr it's not, oh yeah it is,\nit's the route map.\n\n236\n00:13:08.900 --> 00:13:13.770\nAll right, so if I get back here and\nI do that show route-map PBR.\n\n237\n00:13:13.770 --> 00:13:16.250\nThat's the one where it's got that\nnext hop that's wrong, and so\n\n238\n00:13:16.250 --> 00:13:17.068\nI need to fix that.\n\n239\n00:13:17.068 --> 00:13:23.360\nAnd if we jump into our config here and\n\n240\n00:13:23.360 --> 00:13:25.520\nkind of find that,\nit will actually be after the interfaces.\n\n241\n00:13:25.520 --> 00:13:28.720\nLet's find that route mapping, here it is.\n\n242\n00:13:28.720 --> 00:13:32.340\nThere's the route map that I need to fix,\nand so I'll just get it into my config.\n\n243\n00:13:32.340 --> 00:13:36.381\nI'll do a route-map PBR permit 10, so\n\n244\n00:13:36.381 --> 00:13:41.576\nI'm going to edit line 10,\nand I'm going to say set\n\n245\n00:13:41.576 --> 00:13:47.367\nip next-hop 172.16.1.2, instead of 1.1.\n\n246\n00:13:47.367 --> 00:13:51.810\nAll right, now this should override\nthe existing next-hop command.\n\n247\n00:13:51.810 --> 00:13:53.740\nBut just to be sure,\n\n248\n00:13:53.740 --> 00:13:59.450\nI'm gonna do a show route-map PBR and\nmake sure that took effect.\n\n249\n00:13:59.450 --> 00:14:02.410\nAnd I'm glad I checked\nbecause see what it's doing?\n\n250\n00:14:02.410 --> 00:14:06.899\nIt's now got two next-hops, and\nthat can cause some problems, so\n\n251\n00:14:06.899 --> 00:14:08.648\nI actually need to do a no.\n\n252\n00:14:12.428 --> 00:14:13.972\nAnd let's remove that one and\n\n253\n00:14:13.972 --> 00:14:17.320\nmake sure the route map actually\nupdated to reflect what I want.\n\n254\n00:14:17.320 --> 00:14:17.890\nThere we go.\n\n255\n00:14:17.890 --> 00:14:20.878\nNow it's just got a next-hop of .2.\n\n256\n00:14:20.878 --> 00:14:23.876\nAll right, so once that's in place,\nnow all our traffic should be getting sent\n\n257\n00:14:23.876 --> 00:14:26.710\nto the right direction,\nlet's see if that solved our problem.\n\n258\n00:14:26.710 --> 00:14:31.740\nI'm gonna go all the way back to our\nserver from the very beginning, and\n\n259\n00:14:31.740 --> 00:14:35.500\nI'll try to ping that IP,\nand now we've got a success.\n\n260\n00:14:35.500 --> 00:14:38.470\nSo in this case, we had a policy based\nroute that was influencing it, and\n\n261\n00:14:38.470 --> 00:14:39.320\nkind of damaging things.\n\n262\n00:14:39.320 --> 00:14:43.120\nNow, in real life land I probably would\nhave just set up a dynamic routing\n\n263\n00:14:43.120 --> 00:14:46.180\nprotocol and taken care of this, but\nbecause the question told us not to mess\n\n264\n00:14:46.180 --> 00:14:49.580\nwith any static routes, I mean mess with\nthe routing table, I couldn't do that.\n\n265\n00:14:49.580 --> 00:14:52.850\nAnd that's what got me on the line of\nthinking PBR, the policy-based routing.\n\n266\n00:14:52.850 --> 00:14:55.980\nWe found a bad route in there, fixed it,\nand now the problem is solved.\n\n267\n00:14:55.980 --> 00:14:58.440\nSo that wraps this one up,\na little bit convoluted,\n\n268\n00:14:58.440 --> 00:15:01.330\nthere was more than one way to solve\nthat problem, that's for certain.\n\n269\n00:15:01.330 --> 00:15:03.480\nBut I think we solved it in\nthe spirit of the question and\n\n270\n00:15:03.480 --> 00:15:05.630\nkind of got it solved\nthe way they wanted it to.\n\n271\n00:15:05.630 --> 00:15:07.310\nSo that kind of took care of that one.\n\n272\n00:15:07.310 --> 00:15:09.990\nAnd now, we're ready to move on to\nour final troubleshooting question.\n\n273\n00:15:09.990 --> 00:15:11.298\nSo that wraps up issue six.\n\n274\n00:15:11.298 --> 00:15:15.958\nStay tuned, we've got issue\nnumber seven coming up next.\n\n275\n00:15:15.958 --> 00:15:22.509\n[MUSIC]\n\n",
          "vimeoId": "151013752"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #7` from set #5. The trouble ticket states that \"There are no routes for the connected interfaces on NYCORE1 across the network. Therefore we are unable to communicate to hosts on those VLAN’s, for example you are unable to ping 192.168.5.1 which is SVI 5 on NYCORE1 from PLABCSCO01 \"",
          "length": "480",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-5-7-set_5_issue_7-120315-high.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-5-7-set_5_issue_7-120315-high-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-5-7-set_5_issue_7-120315-high-sm.jpg",
          "title": "Set 5 Issue 7",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:01.984\n[MUSIC]\n\n2\n00:00:06.381 --> 00:00:11.620\nWelcome back to another troubleshooting\nticket here on ITProTV.\n\n3\n00:00:11.620 --> 00:00:15.510\nWe're gonna be jumping into Set 5,\nIssue 7, the final issue for Set 5.\n\n4\n00:00:15.510 --> 00:00:19.320\nAnd once this is done,\nour Set 5 topology should be perfect and\n\n5\n00:00:19.320 --> 00:00:21.370\neverything running nice and smoothly.\n\n6\n00:00:21.370 --> 00:00:23.270\nLet's look at this troubleshooting ticket.\n\n7\n00:00:23.270 --> 00:00:25.830\nThis one says, there are no routes for\n\n8\n00:00:25.830 --> 00:00:29.610\nthe connected interfaces on\nNYCORE1 around the network.\n\n9\n00:00:29.610 --> 00:00:32.090\nSo, we've got some\nconnected interfaces there.\n\n10\n00:00:32.090 --> 00:00:34.530\nIt's a switch so\nthere'd be VLAN interfaces, and\n\n11\n00:00:34.530 --> 00:00:36.870\nnone of the other devices\nseem to know about it.\n\n12\n00:00:36.870 --> 00:00:39.730\nTherefore, we are unable to\ncommunicate to host on those VLANs.\n\n13\n00:00:39.730 --> 00:00:43.910\nFor example,\nyou are unable to ping 192.168.5.1.\n\n14\n00:00:43.910 --> 00:00:48.930\nWhich is one of the SVI's on\nNYCORE1 from PLABCISCO01.\n\n15\n00:00:48.930 --> 00:00:50.770\nSo, this sounds cut and dry.\n\n16\n00:00:50.770 --> 00:00:53.980\nSounds like I've got some interfaces\nthat are on networks that are not being\n\n17\n00:00:53.980 --> 00:00:57.140\nadvertised into my routing protocol and\nwe can go and figure that out and\n\n18\n00:00:57.140 --> 00:00:58.160\nsee pretty quick.\n\n19\n00:00:58.160 --> 00:01:02.040\nLooking at our topology, let's pull\nthis up, our topology doesn't show it,\n\n20\n00:01:02.040 --> 00:01:06.610\nbut we've seen through all of our\nearlier tickets that NYCORE1, NYCORE2,\n\n21\n00:01:06.610 --> 00:01:09.090\nEDGE1, EDGE2, NYWAN1.\n\n22\n00:01:09.090 --> 00:01:11.210\nThey're all in EIGRP 800.\n\n23\n00:01:11.210 --> 00:01:15.620\nSo, they're all operating in\nthat same autonomous system,\n\n24\n00:01:15.620 --> 00:01:17.360\nthey should know about\neach other's routes.\n\n25\n00:01:17.360 --> 00:01:20.480\nAnd we know we're exchanging routes again\nfrom some of the earlier tickets where\n\n26\n00:01:20.480 --> 00:01:21.970\nwe've solved those problems.\n\n27\n00:01:21.970 --> 00:01:26.200\nSo, we should be learning about all\nthe routes, but we aren't, right?\n\n28\n00:01:26.200 --> 00:01:30.190\nSo, what's more than likely happening\nis either NYCORE1 is not advertising\n\n29\n00:01:30.190 --> 00:01:34.740\nthe routes, that would do it,\nor we've got some kind of\n\n30\n00:01:34.740 --> 00:01:38.200\nfilters that are blocking the routes from\npropagating to the rest of the network.\n\n31\n00:01:38.200 --> 00:01:42.060\nThere's a few different scenarios there\nthat could occur, so let's go in and see.\n\n32\n00:01:42.060 --> 00:01:44.940\nI'm just gonna jump right into NYCORE1\ncuz I feel like that's more than\n\n33\n00:01:44.940 --> 00:01:46.730\nlikely gonna be our issue.\n\n34\n00:01:46.730 --> 00:01:48.990\nSo, looking at NYCORE1,\n\n35\n00:01:48.990 --> 00:01:54.980\nwhat I wanna do is I wanna get a handle on\nthe networks that they're taking about.\n\n36\n00:01:54.980 --> 00:01:58.071\nThey said there's some directly\nconnected networks, so\n\n37\n00:01:58.071 --> 00:02:02.498\nthat means I should have them with IPs and\nso I'm gonna do a show IP interface brief.\n\n38\n00:02:02.498 --> 00:02:04.080\nAnd here's 192.168.5, 6, 7, 8, 9.\n\n39\n00:02:04.080 --> 00:02:08.886\nAll right, we've seen other VLANS,\nVLANS 10 through 16,\n\n40\n00:02:08.886 --> 00:02:11.120\nand those have been working.\n\n41\n00:02:11.120 --> 00:02:15.110\nThose have been spread\nthroughout our network.\n\n42\n00:02:15.110 --> 00:02:18.350\nBut looking down this list I'm seeing\nsome that I haven't seen before.\n\n43\n00:02:18.350 --> 00:02:18.850\nRight?\n\n44\n00:02:18.850 --> 00:02:19.930\nAnd they are up, up.\n\n45\n00:02:19.930 --> 00:02:22.270\nAll of these are up, up and functioning.\n\n46\n00:02:22.270 --> 00:02:23.900\nSo it looks like they're healthy.\n\n47\n00:02:23.900 --> 00:02:28.360\nAnd if I jump over to NYCORE2,\nwhich is one of our neighbors.\n\n48\n00:02:28.360 --> 00:02:34.040\nAnd I do a show IP route for\nany of the 192s.\n\n49\n00:02:34.040 --> 00:02:36.560\nRight?\nSo I'll just look for 192.168.\n\n50\n00:02:36.560 --> 00:02:41.448\nIf I look in here,\nI can see 192.168.16 and .17, .226, but\n\n51\n00:02:41.448 --> 00:02:43.980\nI don't see .5, .6, .7, .8.\n\n52\n00:02:43.980 --> 00:02:49.743\nI don't see all those other networks\nthat they were talking about.\n\n53\n00:02:49.743 --> 00:02:53.905\nSo, what I need to do is find out\nwhy I'm not getting those networks.\n\n54\n00:02:53.905 --> 00:02:55.935\nAnd this could be a neighbor problem, or\n\n55\n00:02:55.935 --> 00:02:57.375\nit could be that they're\nnot being advertised.\n\n56\n00:02:57.375 --> 00:03:01.085\nI'm going to take a look at my\neigrp configuration real quick and\n\n57\n00:03:01.085 --> 00:03:03.505\njust see if that's where our problem is.\n\n58\n00:03:03.505 --> 00:03:05.265\nI expect to see those\nnetworks be advertised.\n\n59\n00:03:05.265 --> 00:03:11.150\nAnd when I look at it I can see eigrp 800,\nI can see that it's up and going.\n\n60\n00:03:11.150 --> 00:03:15.020\nIt's routing for network 10.1.1.0, and\n\n61\n00:03:15.020 --> 00:03:19.896\nit is passive-interface default,\nthe only non-passive-interface is port 24.\n\n62\n00:03:19.896 --> 00:03:26.020\nOkay, well port 24, that's this\nconnection right here to NYCORE2 and\n\n63\n00:03:26.020 --> 00:03:29.730\nthat's where my neighbor should be so I\nshould have a neighbor relationship there.\n\n64\n00:03:29.730 --> 00:03:34.600\nLet's just verify that there real\nquick with a show IP eigrp neighbor.\n\n65\n00:03:36.920 --> 00:03:39.099\nIf I spell eigrp right, that'll help.\n\n66\n00:03:40.740 --> 00:03:41.750\nThere we go.\n\n67\n00:03:41.750 --> 00:03:43.520\nAnd so I do have a neighbor, 10.1.1.2.\n\n68\n00:03:43.520 --> 00:03:46.220\nAnd we saw in an earlier\nticket that that is NYCORE2.\n\n69\n00:03:46.220 --> 00:03:49.730\nSo I've got a neighbor, and\nit's not a passive-interface so,\n\n70\n00:03:49.730 --> 00:03:53.080\nI am talking with them and I'm only\ndoing network 10.1.1.0, all right.\n\n71\n00:03:53.080 --> 00:03:57.050\nSo it looks like this is\ngoing to be a simple case of\n\n72\n00:03:57.050 --> 00:03:59.050\nwe're not advertising the networks right.\n\n73\n00:03:59.050 --> 00:04:01.200\nSo, how do I wanna advertise the networks?\n\n74\n00:04:01.200 --> 00:04:02.780\nI gotta couple of choices, right.\n\n75\n00:04:02.780 --> 00:04:06.460\nOne I can add them directly into\neigrp with a network statement.\n\n76\n00:04:06.460 --> 00:04:08.820\nSo I can just say network blah,\nblah, blah.\n\n77\n00:04:08.820 --> 00:04:12.790\nOr I could redistribute them in,\nredistribute connected routes into it.\n\n78\n00:04:12.790 --> 00:04:16.270\nNow when I look at the question\nit says there are no routes for\n\n79\n00:04:16.270 --> 00:04:19.610\nthe connected interfaces on NYCORE1.\n\n80\n00:04:19.610 --> 00:04:22.200\nSo, I can look at all\nthe connected interfaces and\n\n81\n00:04:22.200 --> 00:04:26.060\nthen put network a statement in for\neach one, it would be a lot of commands.\n\n82\n00:04:26.060 --> 00:04:29.690\nRedistributing it would be faster, so I'm\ngonna be lazy and go the faster route and\n\n83\n00:04:29.690 --> 00:04:30.200\nredistribute.\n\n84\n00:04:30.200 --> 00:04:34.090\nJust say, take whatever's connected and\nredistribute into eigrp 800.\n\n85\n00:04:34.090 --> 00:04:39.990\nSo I'm gonna jump into my configuration\nand I'll do router eigrp 800, and\n\n86\n00:04:39.990 --> 00:04:46.460\ni'm going to say redistribute connected\nand then I need to tell it a metric.\n\n87\n00:04:46.460 --> 00:04:49.560\nIf you don't tell it a metric it's\nnot going to bring it in right.\n\n88\n00:04:49.560 --> 00:04:52.810\nSo I've got to set a metric, and if you\ncan't remember the metric on the exam it's\n\n89\n00:04:52.810 --> 00:04:55.740\nno big deal because you can always use the\nquestion mark to find out each one, right.\n\n90\n00:04:55.740 --> 00:04:59.370\nCause we've got bandwidth, delay,\nload, reliability, and mtu and\n\n91\n00:04:59.370 --> 00:05:01.170\nyou got to specify each one.\n\n92\n00:05:01.170 --> 00:05:05.200\nSo the first one is bandwidth and\nthese links, they're SVIs.\n\n93\n00:05:05.200 --> 00:05:06.820\nThey're Switch Virtual Interfaces.\n\n94\n00:05:06.820 --> 00:05:09.370\nI could say that it's\n100 megabit if I wanted.\n\n95\n00:05:09.370 --> 00:05:14.450\nIt's actually done in kilobits though, so\nI need to say 100,000 for that bandwidth.\n\n96\n00:05:14.450 --> 00:05:16.980\nAnd this is going to be a long command,\nso my head's gonna cover up part of it.\n\n97\n00:05:16.980 --> 00:05:19.630\nWe might need to go full-screen\non that one so we can see it all.\n\n98\n00:05:19.630 --> 00:05:24.760\nBut as I continue on my next metric\nhere that it wants is the delay.\n\n99\n00:05:24.760 --> 00:05:26.220\nLower number is better.\n\n100\n00:05:26.220 --> 00:05:28.410\nSince these are SVIs,\nI don't really have a delay on them, so\n\n101\n00:05:28.410 --> 00:05:30.040\nI'm gonna set it to the lowest value,\nwhich is one.\n\n102\n00:05:30.040 --> 00:05:34.180\nYou can actually set it to zero, but\none's the lowest that it expects.\n\n103\n00:05:34.180 --> 00:05:37.680\nThe reliability metric, 0 to 255,\nwhere 255 is 100% reliable,\n\n104\n00:05:37.680 --> 00:05:39.930\nso I'll go with that one.\n\n105\n00:05:39.930 --> 00:05:42.990\nAnd then the effective bandwidth loading.\n\n106\n00:05:42.990 --> 00:05:44.720\nThis is 0 to 255 also, or 1 to 255.\n\n107\n00:05:44.720 --> 00:05:46.569\n255 is 100% loaded, that's bad.\n\n108\n00:05:46.569 --> 00:05:49.140\nI want 1, that's good.\n\n109\n00:05:49.140 --> 00:05:53.030\nAll right, and then the last\nmetric that I need is the MTU,\n\n110\n00:05:53.030 --> 00:05:58.080\nthe MTU gets ignored but I'll put 1500\nin there because 1500 is my actual MTU.\n\n111\n00:05:58.080 --> 00:06:00.590\nAnd so once I've got that, now\n\n112\n00:06:00.590 --> 00:06:05.580\nI've got enough in there to redistribute\nthose connected routes into eigrp 800.\n\n113\n00:06:05.580 --> 00:06:11.360\nAnd I review my configuration I'll\ndo a show run for section eigrp,\n\n114\n00:06:11.360 --> 00:06:15.600\nand I can see that redistribute\ncommand right there.\n\n115\n00:06:15.600 --> 00:06:19.760\nSo now all my connected interfaces are\ncoming into that eigrp autonomous system,\n\n116\n00:06:19.760 --> 00:06:21.450\nand hopefully that'll solve our problem.\n\n117\n00:06:21.450 --> 00:06:25.827\nI'm gonna look at CORE2, and\nCORE2 didn't have those routes before,\n\n118\n00:06:25.827 --> 00:06:27.600\nwe'll see if it has them now.\n\n119\n00:06:27.600 --> 00:06:30.600\nAnd what I'm looking for are those .5,\n.6, .7, all those networks.\n\n120\n00:06:30.600 --> 00:06:34.820\nAnd sure enough, there they are.\n\n121\n00:06:34.820 --> 00:06:39.020\nNow because I redistributed them,\nthey're showing as external eigrp routes.\n\n122\n00:06:39.020 --> 00:06:41.910\nIf I had used network statements for\neach one they would show as internal,\n\n123\n00:06:41.910 --> 00:06:43.440\nit doesn't really matter to me.\n\n124\n00:06:43.440 --> 00:06:46.410\nThe question didn't tell me which it\nprefers, at least I don't think it did.\n\n125\n00:06:46.410 --> 00:06:49.470\nLet's see if we have any\nrules to follow here.\n\n126\n00:06:49.470 --> 00:06:54.770\nOh it actually has a hint that says,\nuse redistribution on NYCORE1.\n\n127\n00:06:54.770 --> 00:06:55.970\nWell that's exactly what I did.\n\n128\n00:06:55.970 --> 00:06:58.720\nI redistributed and brought it in, so\nwe kind of lucked out on that one.\n\n129\n00:06:58.720 --> 00:07:00.580\nThe alternative was doing\nthe network statements.\n\n130\n00:07:00.580 --> 00:07:04.403\nThose are there, and in the question\nit actually mentioned pinging from\n\n131\n00:07:04.403 --> 00:07:06.982\nP-lab Cisco 01 to 192.168.5.1.\n\n132\n00:07:06.982 --> 00:07:12.083\nSo let's go test that and see if that\nworks, and if it does then this question\n\n133\n00:07:12.083 --> 00:07:17.840\nis done, so I'm gonna try and\nping 192.168.5.1 and we're successful.\n\n134\n00:07:17.840 --> 00:07:22.760\nSo in this case we just needed\nto redistribute those routes in,\n\n135\n00:07:22.760 --> 00:07:24.720\nnow we've got them and we're in business.\n\n136\n00:07:24.720 --> 00:07:26.410\nSo this one wasn't so\n\n137\n00:07:26.410 --> 00:07:28.970\nmuch about troubleshooting something that\nwasn't working the way it was supposed to.\n\n138\n00:07:28.970 --> 00:07:31.880\nWe were troubleshooting something\nthat was completely missing.\n\n139\n00:07:31.880 --> 00:07:34.420\nNobody ever advertised those networks,\nso we couldn't learn about them.\n\n140\n00:07:34.420 --> 00:07:35.460\nWe didn't know they route to get there.\n\n141\n00:07:35.460 --> 00:07:36.550\nNow that we've done it.\n\n142\n00:07:36.550 --> 00:07:40.030\nWe've fixed it.\nThe network is stable and off it goes.\n\n143\n00:07:40.030 --> 00:07:43.957\nAll right, well, that issue solves all\nof Set 5's trouble shooting issues so\n\n144\n00:07:43.957 --> 00:07:45.450\nthat wraps that one up.\n\n145\n00:07:45.450 --> 00:07:48.210\nStay tuned though cuz we\ngot set six coming up next.\n\n146\n00:07:48.210 --> 00:07:49.270\nDefinitely gonna be a fun one there.\n\n147\n00:07:49.270 --> 00:07:51.130\nWe got a lot more\ntroubleshooting to get through.\n\n148\n00:07:51.130 --> 00:07:59.624\nI hope to see you then.\n[MUSIC]\n\n",
          "vimeoId": "151013751"
        }
      ],
      "title": "Set Five"
    },
    {
      "episodes": [
        {
          "description": "In this video, Don solves troubleshooting issue #1` from set #6. The trouble ticket states that \"The tunnel interface on NYEDGE2 is showing as down causing problems with routes being propagated throughout the network \"",
          "length": "921",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-6-1-set_6_issue_1-120415-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-6-1-set_6_issue_1-120415-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-6-1-set_6_issue_1-120415-1-sm.jpg",
          "title": "Set 6 Issue 1",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:07.474\n[MUSIC]\n\n2\n00:00:07.474 --> 00:00:11.730\nAll right, welcome back to another\ntroubleshooting episode here on ITProTV.\n\n3\n00:00:11.730 --> 00:00:15.200\nAnd we're gonna be kicking off\nan all-new troubleshooting set,\n\n4\n00:00:15.200 --> 00:00:16.610\nwe're jumping into set number 6.\n\n5\n00:00:16.610 --> 00:00:21.220\nWe've got a new topology, and that means\nnew problems that we've got to sort out,\n\n6\n00:00:21.220 --> 00:00:23.800\nso let's just dive right into it.\n\n7\n00:00:23.800 --> 00:00:25.130\nWe've got a troubleshooting ticket here.\n\n8\n00:00:25.130 --> 00:00:25.870\nIt looks like short one and\n\n9\n00:00:25.870 --> 00:00:31.830\nit says the tunnel interface on N Y edge\ntwo is showing as down which is causing\n\n10\n00:00:31.830 --> 00:00:34.970\nproblems with routes being propagated\nthroughout the network, all right.\n\n11\n00:00:34.970 --> 00:00:37.140\nSo we've got a tunnel interface.\n\n12\n00:00:37.140 --> 00:00:41.380\nNot telling us if it's a V P N\nlike an encrypted V P N or\n\n13\n00:00:41.380 --> 00:00:42.850\njust a G R E tunnel or anything like that.\n\n14\n00:00:42.850 --> 00:00:44.350\nBut we're going to have to sort that out,\nbut\n\n15\n00:00:44.350 --> 00:00:45.860\nit looks like we've got\nsome tunnel issues.\n\n16\n00:00:45.860 --> 00:00:49.820\nNow, let's look at our topology so we can\nget an idea of where this is coming from.\n\n17\n00:00:49.820 --> 00:00:51.200\nSo our new topology for\n\n18\n00:00:51.200 --> 00:00:55.550\nset six is a little bit simplified\nfrom the topologies we've seen before.\n\n19\n00:00:55.550 --> 00:00:58.050\nWe've still got our switch\ntriangle down here, and\n\n20\n00:00:58.050 --> 00:01:02.990\nit looks like we've got an ether channel,\nlike a bonded trunk here, or some sort.\n\n21\n00:01:02.990 --> 00:01:06.780\nActually, it says it's layer three, so\nthat's just a single port channel there.\n\n22\n00:01:06.780 --> 00:01:09.470\nOur switches are running up to EDGE2.\n\n23\n00:01:09.470 --> 00:01:12.200\nEDGE2 is running to EDGE1 just\nlike it has in previous sets.\n\n24\n00:01:12.200 --> 00:01:14.200\nAnd we got NYWAN1 over here.\n\n25\n00:01:14.200 --> 00:01:18.150\nBut we've got the addition of\na little bit of extra infrastructure.\n\n26\n00:01:18.150 --> 00:01:21.850\nWe've got a tunnel running\nbetween these two systems,\n\n27\n00:01:21.850 --> 00:01:27.320\nbetween EDGE2 NYWAN1 and that's the tunnel\nthat's giving us some problems.\n\n28\n00:01:27.320 --> 00:01:31.574\nNow looking at the diagram here I see\nthat I've got tunnel 0 and tunnel 0 and\n\n29\n00:01:31.574 --> 00:01:32.317\nthat's it.\n\n30\n00:01:32.317 --> 00:01:35.084\nI don't actually see what physical\ninterface these are bonded on but\n\n31\n00:01:35.084 --> 00:01:36.763\nwe can probably make some guesses right.\n\n32\n00:01:36.763 --> 00:01:41.370\nHere you've got Serial 000 and\nhere we have Serial 010.\n\n33\n00:01:41.370 --> 00:01:44.350\nThat's probably it but\nwe'll have to double check that too and\n\n34\n00:01:44.350 --> 00:01:47.430\nsee where that tunnel is coming from and\ngoing to.\n\n35\n00:01:47.430 --> 00:01:48.640\nFind out why it's wrong.\n\n36\n00:01:48.640 --> 00:01:49.640\nBut in the troubleshooting question,\n\n37\n00:01:49.640 --> 00:01:53.650\nit tells us it's the tunnel\ninterface on NYEDGE2, so\n\n38\n00:01:53.650 --> 00:01:56.440\nthat's probably the best place for\nus to start troubleshooting right there.\n\n39\n00:01:56.440 --> 00:01:58.840\nNow be thinking,\n\n40\n00:01:58.840 --> 00:02:02.610\nas you go into this problem about\nwhere the possible cause could be.\n\n41\n00:02:02.610 --> 00:02:06.140\nWhen you're dealing with a tunnel,\na tunnel's got two ends, and\n\n42\n00:02:06.140 --> 00:02:10.630\nthe problem can be on either end or any of\nthe infrastructure in-between the ends.\n\n43\n00:02:10.630 --> 00:02:13.070\nSo I could have a bad tunnel\nconfiguration on NYEDGE2.\n\n44\n00:02:13.070 --> 00:02:16.160\nI could have a bad tunnel\nconfiguration on NYWAN1.\n\n45\n00:02:16.160 --> 00:02:20.510\nOr, I could have connectivity\nissues between the two.\n\n46\n00:02:20.510 --> 00:02:23.840\nIf they can't see each other, they're\nnot gonna be able to build up a tunnel.\n\n47\n00:02:23.840 --> 00:02:25.460\nAnd that can cause a problem.\n\n48\n00:02:25.460 --> 00:02:29.820\nAnother scenario is, with tunnels,\nsometimes you can have flapping routes, or\n\n49\n00:02:29.820 --> 00:02:34.120\neven flapping interfaces, where\nthe tunnel comes up and then goes down.\n\n50\n00:02:34.120 --> 00:02:36.100\nAnd you see that really frequently,\n\n51\n00:02:36.100 --> 00:02:41.150\nwhen a tunnel learns its physical\nnetwork's route inside of the tunnel.\n\n52\n00:02:41.150 --> 00:02:43.530\nDynamic routing protocols\ncan cause that sometimes.\n\n53\n00:02:43.530 --> 00:02:47.720\nAnd we do have EIGRP 800 between\nall three of these guys.\n\n54\n00:02:47.720 --> 00:02:49.060\nSo we'll need to pay attention to that,\ntoo.\n\n55\n00:02:49.060 --> 00:02:51.330\nThat's a particularly\ntricky one to troubleshoot.\n\n56\n00:02:51.330 --> 00:02:55.050\nSo, let's see what kind of level of\ndifficulty we're dealing with here.\n\n57\n00:02:55.050 --> 00:03:00.660\nI'm gonna jump over the NYEdge 2 and\nwe'll get an idea of where our problem is.\n\n58\n00:03:00.660 --> 00:03:04.780\nSo, on NYEdge 2,\nI'm just gonna get connected in here and\n\n59\n00:03:04.780 --> 00:03:08.000\nthey're telling me the interface is called\nTunnel 0 and they're telling me it's down,\n\n60\n00:03:08.000 --> 00:03:10.330\nso I expect to see that interface be down.\n\n61\n00:03:10.330 --> 00:03:13.120\nBut let's make sure that\nthat is indeed the case.\n\n62\n00:03:13.120 --> 00:03:14.180\nI'm just gonna do a show IP brief,\n\n63\n00:03:14.180 --> 00:03:17.510\nsince this is a router it doesn't\nhave that many interfaces.\n\n64\n00:03:17.510 --> 00:03:19.770\nAnd I can see right here I've got Tunnel0.\n\n65\n00:03:19.770 --> 00:03:24.600\nAnd looking at its status I see\nthe interface status is up, but\n\n66\n00:03:24.600 --> 00:03:28.370\nif I scroll over, well,\nactually I see the protocol is up.\n\n67\n00:03:28.370 --> 00:03:31.250\nLooks like this tunnel is up and healthy.\n\n68\n00:03:31.250 --> 00:03:33.260\nWell, here's the thing about tunnels.\n\n69\n00:03:33.260 --> 00:03:36.230\nWhen you look at tunnel interfaces,\nit's not uncommon for\n\n70\n00:03:36.230 --> 00:03:39.170\na tunnel to show as up\nwhen it actually isn't.\n\n71\n00:03:39.170 --> 00:03:42.960\nThe tunnel itself might be up but\nI might be having encryption issues or\n\n72\n00:03:42.960 --> 00:03:45.630\nother issues on it that's stopping\nme from communicating over it.\n\n73\n00:03:45.630 --> 00:03:51.280\nBut at first glance here on NYEDGE2 it\nlooks like the tunnel is up and happy.\n\n74\n00:03:51.280 --> 00:03:54.460\nAll right, so if we jump over\nto the other end of the tunnel,\n\n75\n00:03:54.460 --> 00:03:56.650\nthe other end of the tunnel was on NYWAN1.\n\n76\n00:03:56.650 --> 00:04:03.020\nAnd I'm just gonna do the same thing over\nhere and get logged into this router.\n\n77\n00:04:03.020 --> 00:04:05.930\nAnd do a quick show ip interface\nbrief to show what this one's got.\n\n78\n00:04:08.450 --> 00:04:11.368\nAll right looking on this one,\nI've got Tunnel0.\n\n79\n00:04:11.368 --> 00:04:15.580\nIt's got 172.24.24.2 as its IP address.\n\n80\n00:04:15.580 --> 00:04:18.970\nIt's showing as up down, all right.\n\n81\n00:04:18.970 --> 00:04:21.230\nSee how this the end of\nthe tunnel is showing as down.\n\n82\n00:04:21.230 --> 00:04:23.020\nNow that's pretty interesting.\n\n83\n00:04:23.020 --> 00:04:27.040\nOne end of the tunnel shows up up,\nand the other one says up down.\n\n84\n00:04:27.040 --> 00:04:28.500\nWhat does that mean?\n\n85\n00:04:28.500 --> 00:04:32.640\nWell what that's telling me is that\nthe tunnel did build one way, and\n\n86\n00:04:32.640 --> 00:04:34.380\nit didn't build the other way.\n\n87\n00:04:34.380 --> 00:04:36.740\nSo I've got basically a unidirectional\ntunnel at this point.\n\n88\n00:04:36.740 --> 00:04:38.550\nAnd they said in\nthe troubleshooting ticket that,\n\n89\n00:04:38.550 --> 00:04:41.740\nit's causing problems with routes\nbeing propagated through the network.\n\n90\n00:04:41.740 --> 00:04:43.390\nI would certainly expect that.\n\n91\n00:04:43.390 --> 00:04:44.950\nIf this was a unidirectional link,\n\n92\n00:04:44.950 --> 00:04:48.620\none side's telling the other router about\nroutes, but the second router is not\n\n93\n00:04:48.620 --> 00:04:51.230\ntelling the first router about\nthose same routes or other routes.\n\n94\n00:04:51.230 --> 00:04:53.770\nAnd so we end up with this kind\nof messed up routing table.\n\n95\n00:04:53.770 --> 00:04:55.240\nSo we need to find out\nwhat's going on there and\n\n96\n00:04:55.240 --> 00:04:57.620\nwhy that tunnel is actually down.\n\n97\n00:04:57.620 --> 00:05:02.060\nNow, sometimes we luck out and we get nice\nlittle status messages up on our screen\n\n98\n00:05:02.060 --> 00:05:03.830\nthat kind of tell us what that problem is.\n\n99\n00:05:03.830 --> 00:05:05.970\nAnd I'm not actually seeing anything.\n\n100\n00:05:05.970 --> 00:05:09.710\nI guess I could do a show log here and see\nif there's anything in my log files that\n\n101\n00:05:09.710 --> 00:05:14.640\njumps right out and tells us about why\nthat tunnel is down, and looking in here,\n\n102\n00:05:14.640 --> 00:05:19.210\nlooks like we've got our boot stuff\ngoing on, the EIGRP's not terribly.\n\n103\n00:05:19.210 --> 00:05:22.140\nOh, no, that's just EIGRP negotiating.\n\n104\n00:05:22.140 --> 00:05:26.060\nYeah, not really seeing any errors jumping\nout in here, although I do see, you know,\n\n105\n00:05:26.060 --> 00:05:28.780\nsome of these interfaces coming\nup as the system booted up.\n\n106\n00:05:28.780 --> 00:05:32.090\nYeah nothing really indicating\nanything crazy there.\n\n107\n00:05:32.090 --> 00:05:36.400\nAnd remember on NYEDGE2 the tunnel\nshows as up up it's happy about it.\n\n108\n00:05:36.400 --> 00:05:39.770\nRight so let's take a look\nat that tunnel configuration\n\n109\n00:05:39.770 --> 00:05:44.510\nwhen I did a show ip interface brief I\nsaw the tunnel was just tunnel zero and\n\n110\n00:05:44.510 --> 00:05:49.180\nit's got an ip of 172.24.24.1 well, let's\ntake a look at that configuration and\n\n111\n00:05:49.180 --> 00:05:51.030\nmake sure there isn't\nanything crazy in there.\n\n112\n00:05:51.030 --> 00:05:55.450\nSo I'm gonna do a show running config for\ninterface tunnel zero.\n\n113\n00:05:56.670 --> 00:05:59.550\nAnd what I'm looking for,\njust a few basic things.\n\n114\n00:05:59.550 --> 00:06:02.890\nThe source address, the destination\naddress, and then whether or\n\n115\n00:06:02.890 --> 00:06:06.120\nnot I've got things like a wrong\nsubnet mask or an encryption policy,\n\n116\n00:06:06.120 --> 00:06:10.100\nan IP set policy attached, stuff like that\nthat could start to indicate problems.\n\n117\n00:06:10.100 --> 00:06:14.920\nNow looking at this one, it's pretty\nstraightforward, it's got the 172.24.24.1.\n\n118\n00:06:14.920 --> 00:06:17.811\nIt's a class c subnet mask, or a /24.\n\n119\n00:06:17.811 --> 00:06:21.277\nThe tunnel source is Serial0/0/0,\n\n120\n00:06:21.277 --> 00:06:27.027\nwhich looking up here is\nthe 193.177.16.10 address.\n\n121\n00:06:27.027 --> 00:06:31.397\nSo that's where the tunnel is coming\nfrom and then the tunnel destination is\n\n122\n00:06:31.397 --> 00:06:35.960\n193.188.16.10 that's what\nwe're trying to get to.\n\n123\n00:06:35.960 --> 00:06:40.850\nSo if I go back to my topology diagram,\nthe tunnel source is defined\n\n124\n00:06:40.850 --> 00:06:46.540\nas serial 0000 and it's using that\nto try and get over to NYWAN1.\n\n125\n00:06:46.540 --> 00:06:49.970\nAlright, now just to test\nout connectivity real quick.\n\n126\n00:06:49.970 --> 00:06:53.090\nI want to ping that destination IP and\nmake sure I can get there.\n\n127\n00:06:53.090 --> 00:06:53.990\nI'm pretty certain I can.\n\n128\n00:06:53.990 --> 00:06:55.520\nOtherwise the tunnel\nwouldn't show as up up.\n\n129\n00:06:55.520 --> 00:06:57.472\nBut we'll just make sure.\n\n130\n00:06:57.472 --> 00:07:02.046\nSo, I'm going to try and\nping 193.188.16.10.\n\n131\n00:07:02.046 --> 00:07:03.521\nAnd I can.\n\n132\n00:07:03.521 --> 00:07:07.681\nAnd then because the tunnel is being\nsourced from my serial interface,\n\n133\n00:07:07.681 --> 00:07:11.631\nI'm going to rerun that ping and\nI'm just going to add source Serial\n\n134\n00:07:11.631 --> 00:07:16.440\n0/0/0 on the end to make sure that I'm\nactually pinging from that source IP.\n\n135\n00:07:16.440 --> 00:07:18.700\nRemember your router might\nhave more than one interface.\n\n136\n00:07:18.700 --> 00:07:22.210\nIt could be that one interface can\nget there when a different one can't,\n\n137\n00:07:22.210 --> 00:07:24.550\nso it's important to ping with\nthe source of that tunnel.\n\n138\n00:07:24.550 --> 00:07:26.010\nSo it looks like I'm good.\n\n139\n00:07:26.010 --> 00:07:27.560\nI'm able to reach across and\nget to that IP.\n\n140\n00:07:27.560 --> 00:07:30.990\nAll right, let's jump over and\nlook at the other end.\n\n141\n00:07:30.990 --> 00:07:33.341\nThe other end was NYWAN1.\n\n142\n00:07:33.341 --> 00:07:37.832\nAnd on this one, if I do a show run for\ninterface tunnel 0,\n\n143\n00:07:37.832 --> 00:07:43.154\nI can see this one's got a tunnel\nsource of GigabitEthernet0/1,\n\n144\n00:07:43.154 --> 00:07:47.857\nand a tunnel destination of 193.177.16.10.\n\n145\n00:07:47.857 --> 00:07:50.585\nNow I'm gonna double check\nthat IP right there, that 193.\n\n146\n00:07:50.585 --> 00:07:55.204\nI need to make sure that that's the IP\nthe other end had set as the source.\n\n147\n00:07:55.204 --> 00:07:59.626\nSo 193.177, I can tell already I'm not\ngonna remember this, so let me write it\n\n148\n00:07:59.626 --> 00:08:04.001\ndown, I've been using my most important\ntroubleshooting tool, the pen or pencil.\n\n149\n00:08:04.001 --> 00:08:08.040\n193.177.16.10.\n\n150\n00:08:08.040 --> 00:08:12.230\nAnd I expect to see that on\nthe serial interface on NYEDGE2.\n\n151\n00:08:12.230 --> 00:08:18.420\nAnd so on NYEDGE2 I still have my show IP\ninterface brief here up on the screen.\n\n152\n00:08:18.420 --> 00:08:23.070\nAnd I can see 193.177.16.10, that is\nthe serial interface so that is correct.\n\n153\n00:08:24.540 --> 00:08:32.550\nNow the reverse, the tunnel destination\nhere on EDGE2 was set as 193.188.16.10,\n\n154\n00:08:32.550 --> 00:08:37.060\nand so I'm gonna double check on NYWAN1.\n\n155\n00:08:37.060 --> 00:08:42.280\nNYWAN1 shows that the tunnel is being\nsource from Gigabitethernet0/1 I\n\n156\n00:08:42.280 --> 00:08:45.370\ndon't know the IP address of that,\nbut I can find it right up here.\n\n157\n00:08:45.370 --> 00:08:51.390\nAnd GigabitEthernet0/1 is 172.16.16.1,\nthat's not the right IP, all right?\n\n158\n00:08:51.390 --> 00:08:56.040\nNow I mean it is a right IP,\nthat is an IP for this router.\n\n159\n00:08:56.040 --> 00:08:58.420\nBut it's not the one that's\ndefined on the other end.\n\n160\n00:08:58.420 --> 00:09:00.970\nWhen you create a tunnel,\nthe source and destination IPs,\n\n161\n00:09:00.970 --> 00:09:02.820\nthey've gotta match on both ends, right?\n\n162\n00:09:02.820 --> 00:09:05.340\nThey've gotta reflect\nthe other router's settings.\n\n163\n00:09:05.340 --> 00:09:08.380\nSo in this scenario mine don't match.\n\n164\n00:09:08.380 --> 00:09:11.110\nI've got a different source IP here\n\n165\n00:09:11.110 --> 00:09:14.000\nthan what the destination\nIP is on the other side.\n\n166\n00:09:14.000 --> 00:09:20.285\nIf I look at my other interfaces I'll see\n193.188.16.10 right here on my serial\n\n167\n00:09:20.285 --> 00:09:26.790\n010 and that's the IP I should be using as\nmy source for the tunnel and not this one.\n\n168\n00:09:26.790 --> 00:09:30.610\nAnd so this tunnel is down most likely\nbecause of that, but again tunnels\n\n169\n00:09:30.610 --> 00:09:35.260\nare tricky to troubleshoot, because if I\ndo a show log, we may or may not actually\n\n170\n00:09:35.260 --> 00:09:40.270\nsee any log messages in here about\nthe tunnel and so if I bring that up here.\n\n171\n00:09:40.270 --> 00:09:42.380\nI'm just kinda skimming\nthrough the logs real quick.\n\n172\n00:09:43.570 --> 00:09:47.580\nI can see here where the tunnel\nstatus changed to up,\n\n173\n00:09:47.580 --> 00:09:48.910\ntunnel status changed to down.\n\n174\n00:09:48.910 --> 00:09:51.678\nAnd it doesn't really\ngive you any details.\n\n175\n00:09:51.678 --> 00:09:54.320\nIt's not telling me why\nthe tunnel went down, and\n\n176\n00:09:54.320 --> 00:09:55.610\nthat's what makes these things difficult.\n\n177\n00:09:55.610 --> 00:09:59.840\nAnd with tunnels, the best way to\ntroubleshoot them, there are debugs and\n\n178\n00:09:59.840 --> 00:10:03.580\nother things you can run, but honestly,\nthe best way to troubleshoot them is just\n\n179\n00:10:03.580 --> 00:10:06.710\nto look at the tunnel configuration on\nboth ends and make sure they match.\n\n180\n00:10:06.710 --> 00:10:09.490\nAnd that the source and destinations\nare the opposite of the other ones and\n\n181\n00:10:09.490 --> 00:10:10.460\nso in this case, they're not.\n\n182\n00:10:10.460 --> 00:10:12.470\nSo I just need to fix that and\n\n183\n00:10:12.470 --> 00:10:17.620\nwe can do that pretty easily, so\nI'm going to jump into my config.\n\n184\n00:10:17.620 --> 00:10:19.910\nI'm going to get into\ninterface tunnel zero.\n\n185\n00:10:19.910 --> 00:10:23.340\nI'm going to do a shut down\nto turn the tunnel off.\n\n186\n00:10:23.340 --> 00:10:24.670\nTechnically you don't have to do that, but\n\n187\n00:10:24.670 --> 00:10:27.370\nit's been my experience of when you\nhave things like routing protocols and\n\n188\n00:10:27.370 --> 00:10:30.200\nespecially if you have\nIP Sec policies on there,\n\n189\n00:10:30.200 --> 00:10:33.890\nit's best to shut the interface off while\nyou make changes and then turn it back on.\n\n190\n00:10:33.890 --> 00:10:35.870\nInterface is already down,\nso by shutting it down,\n\n191\n00:10:35.870 --> 00:10:38.230\nit's not like I'm creating\nsome unexpected down time.\n\n192\n00:10:38.230 --> 00:10:40.300\nThe system is already down.\n\n193\n00:10:40.300 --> 00:10:43.810\nAnd now I can say tunnel source and\n\n194\n00:10:43.810 --> 00:10:48.180\nI can specify that serial\ninterface from way back here.\n\n195\n00:10:48.180 --> 00:10:52.990\nSerial 010, right, that's where I\nwant it to actually be sourced from.\n\n196\n00:10:52.990 --> 00:10:56.350\nAnd so\nI'll put that in there as the new source.\n\n197\n00:10:56.350 --> 00:11:00.140\nAnd then, I can just do a no shutdown\nto bring it up, but before I do that,\n\n198\n00:11:00.140 --> 00:11:02.860\nlet me just bring the configuration for\nthat back up.\n\n199\n00:11:02.860 --> 00:11:05.700\nAnd so\nI'll see now that my tunnel destination is\n\n200\n00:11:05.700 --> 00:11:09.450\nthe IP address of the other router,\nand my source is now Serial0/1/0.\n\n201\n00:11:09.450 --> 00:11:11.570\nAnd I'll do a no shutdown.\n\n202\n00:11:14.180 --> 00:11:16.420\nAnd that'll bring that interface up.\n\n203\n00:11:16.420 --> 00:11:19.720\nAnd it should come up and stay up.\n\n204\n00:11:19.720 --> 00:11:23.990\nIf I look at my log from earlier,\nI can see in the,\n\n205\n00:11:23.990 --> 00:11:28.840\nwhoops, I can try and\nsee in the logs, there we go.\n\n206\n00:11:28.840 --> 00:11:31.635\nWhere it went up and then down again.\n\n207\n00:11:31.635 --> 00:11:34.119\nAnd the reason I wanna look at that is\nI wanna look at the time in between.\n\n208\n00:11:34.119 --> 00:11:39.899\nSo see here where it was at\n14:26:05 when it came up and\n\n209\n00:11:39.899 --> 00:11:42.801\n14:26:15 went down.\n\n210\n00:11:42.801 --> 00:11:47.970\nIt took ten seconds for that connection\nto come up and go down again.\n\n211\n00:11:47.970 --> 00:11:50.310\nSo when I bring this interface back up.\n\n212\n00:11:50.310 --> 00:11:53.680\nI want to make sure that I\nwait at least ten seconds\n\n213\n00:11:53.680 --> 00:11:56.090\nbefore I decide this\ntroubleshooting ticket is done.\n\n214\n00:11:56.090 --> 00:11:59.120\nCuz its interface might come up and\nI say woo, I'm done, I get out of here and\n\n215\n00:11:59.120 --> 00:12:01.270\nmove on to the next question,\nand then it just turns around and\n\n216\n00:12:01.270 --> 00:12:04.010\nfalls again after ten seconds,\nI just didn't wait long enough.\n\n217\n00:12:04.010 --> 00:12:05.420\nTen seconds is really fast,\n\n218\n00:12:05.420 --> 00:12:07.970\nwe'd have to be in a super\nhurry not to notice that one.\n\n219\n00:12:07.970 --> 00:12:10.580\nThere's other things that might\ntake 30 seconds, 60 seconds, so\n\n220\n00:12:10.580 --> 00:12:13.860\nyou gotta kinda wait that out and\nmake sure that it actually stays up, and\n\n221\n00:12:13.860 --> 00:12:17.620\nin this case, it's up and it's\ndefinitely been more than ten seconds.\n\n222\n00:12:17.620 --> 00:12:23.493\nIf I do a show ip interface brief, I can\nsee Tunnel0 now has that status of up up,\n\n223\n00:12:23.493 --> 00:12:26.231\nso it is up and it appears to be happy.\n\n224\n00:12:26.231 --> 00:12:29.261\nI'm gonna try and\nping the other side of that tunnel.\n\n225\n00:12:29.261 --> 00:12:33.267\nMy Tunnel ip is 172.24.24.2.\n\n226\n00:12:33.267 --> 00:12:38.677\nThe other side, if I remember right,\nwas 172, yeah there we go.\n\n227\n00:12:38.677 --> 00:12:39.860\n172.24.24.1.\n\n228\n00:12:39.860 --> 00:12:42.124\nSo I'm gonna try and ping that one.\n\n229\n00:12:42.124 --> 00:12:47.040\nAnd so I'll get a ping to 172.24.24.1.\n\n230\n00:12:47.040 --> 00:12:49.440\nAnd I'm able to ping it.\n\n231\n00:12:49.440 --> 00:12:52.050\nSo the interface is up and\nI'm able to ping.\n\n232\n00:12:52.050 --> 00:12:55.160\nNow in the troubleshooting exam,\nor in the question here it said,\n\n233\n00:12:55.160 --> 00:12:58.070\nthat the interface was down,\nwhich we've now resolved.\n\n234\n00:12:58.070 --> 00:13:01.420\nAnd it said it was causing problems\nwith routes being propagated\n\n235\n00:13:01.420 --> 00:13:02.870\nthrough the network.\n\n236\n00:13:02.870 --> 00:13:05.770\nSo the only other thing I need to\nverify before this ticket is done is\n\n237\n00:13:05.770 --> 00:13:09.330\nI just need to make sure that\nI'm set up to exchange routes.\n\n238\n00:13:09.330 --> 00:13:11.660\nLooking at my topology diagram,\n\n239\n00:13:11.660 --> 00:13:15.740\nthese serial interfaces\nare listed as being in EIGRP 800.\n\n240\n00:13:15.740 --> 00:13:20.524\nThe tunnel interface isn't really\nlisted as being in a particular A S or\n\n241\n00:13:20.524 --> 00:13:21.650\neven protocol.\n\n242\n00:13:21.650 --> 00:13:22.681\nWe have B G P out here, but\n\n243\n00:13:22.681 --> 00:13:25.102\nit's just coincidental that\ntunnel crosses through it.\n\n244\n00:13:25.102 --> 00:13:27.020\nIt's not actually in B G P.\n\n245\n00:13:27.020 --> 00:13:30.240\nSo I'm going to have make\na little bit of an assumption and\n\n246\n00:13:30.240 --> 00:13:33.210\nassume that they intend for\nthis tunnel to be in E I G R P 800.\n\n247\n00:13:33.210 --> 00:13:38.510\nSo I just want to verify that and when\nwe brought the tunnel up, I actually saw\n\n248\n00:13:38.510 --> 00:13:44.140\nright here an EIGRP neighbor relationship\ncoming up on the Tunnel interface.\n\n249\n00:13:44.140 --> 00:13:46.370\nSee, it's got that right there for\nTunnel0?\n\n250\n00:13:46.370 --> 00:13:51.240\nI'm just gonna do a real quick\nshow ip EIGRP neighbor, and\n\n251\n00:13:51.240 --> 00:13:54.760\nI wanna make sure that I am showing that\nneighbor on there, and sure enough I do.\n\n252\n00:13:54.760 --> 00:13:56.420\nAnd I don't have a neighbor any other way,\nso\n\n253\n00:13:56.420 --> 00:14:00.710\nthis is the only way that I'm gonna\nbe learning EIGRP routes on NYWAN1.\n\n254\n00:14:00.710 --> 00:14:05.355\nI've got Tunnel0 for the interface and\nif I do a show ip route EIGRP,\n\n255\n00:14:05.355 --> 00:14:08.310\nwe'll see if I'm learning any routes.\n\n256\n00:14:08.310 --> 00:14:10.250\nAnd I am.\nI'm learning the EIGRP routes.\n\n257\n00:14:10.250 --> 00:14:13.410\nSo now routes are propagating through the\nnetwork and I can check the other side.\n\n258\n00:14:13.410 --> 00:14:17.060\nI know the other side will be fine but if\nyou've got the extra time on the exam you\n\n259\n00:14:17.060 --> 00:14:19.580\nshould definitely spend it\nverifying your answers.\n\n260\n00:14:19.580 --> 00:14:21.450\nSo I'll go over here and just verify.\n\n261\n00:14:21.450 --> 00:14:24.020\nI see the neighbor relationship\nright here anyway.\n\n262\n00:14:24.020 --> 00:14:29.700\nBut I'll do a show ip eigrp neighbor,\nand I've got two neighbors here.\n\n263\n00:14:29.700 --> 00:14:35.360\nAnd if I do a show ip route and\nI just ask for eigrp routes,\n\n264\n00:14:35.360 --> 00:14:40.780\nI'll see I've got a few including\none that I'm learning from Tunnel0.\n\n265\n00:14:40.780 --> 00:14:44.050\nSo I am learning a route over Tunnel0,\nand we are in good shape.\n\n266\n00:14:44.050 --> 00:14:45.910\nSo that's gonna knock this one out.\n\n267\n00:14:45.910 --> 00:14:49.620\nSo in this case, what our troubleshooting\nticket boiled down to is we\n\n268\n00:14:49.620 --> 00:14:54.140\nhad a tunnel that wasn't up and it really\njust came down to the tunnel configuration\n\n269\n00:14:54.140 --> 00:14:56.330\nnot being the same on both ends.\n\n270\n00:14:56.330 --> 00:14:58.760\nOnce we corrected that,\nit came up and we were in business.\n\n271\n00:14:58.760 --> 00:15:01.820\nThis is a great example as far as\ntroubleshooting methodology of just doing\n\n272\n00:15:01.820 --> 00:15:03.480\nconfiguration comparisons.\n\n273\n00:15:03.480 --> 00:15:05.515\nTunnels, that's the easiest\nway to troubleshoot them and\n\n274\n00:15:05.515 --> 00:15:07.438\nthat'll get you the answer\nyou need really quick.\n\n275\n00:15:07.438 --> 00:15:09.150\nSo here, this one's taken care of and\n\n276\n00:15:09.150 --> 00:15:10.590\nnow we're ready to move\non to the next question.\n\n277\n00:15:10.590 --> 00:15:11.091\nSo, I hope you guys enjoyed it.\n\n278\n00:15:11.091 --> 00:15:13.482\nStay tuned,\nwe've got issue two coming up next.\n\n279\n00:15:13.482 --> 00:15:21.439\n[MUSIC]\n\n",
          "vimeoId": "151018055"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #2` from set #6. The trouble ticket states that \"The routes that are being propagated from NYCORE1 are appearing as both external and internal \"",
          "length": "847",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-6-2-set_6_issue_2-120415-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-6-2-set_6_issue_2-120415-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-6-2-set_6_issue_2-120415-1-sm.jpg",
          "title": "Set 6 Issue 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:07.523\n[MUSIC]\n\n2\n00:00:07.523 --> 00:00:09.190\nAll right.\n\n3\n00:00:09.190 --> 00:00:13.110\nWelcome back to another Cisco\nTroubleshooting show here on IT PRO TV.\n\n4\n00:00:13.110 --> 00:00:17.210\nWe're jumping right back into Set 6 and\nwe're ready for Issue number 2.\n\n5\n00:00:17.210 --> 00:00:19.530\nAnd looks like we got\na routing issue on this one.\n\n6\n00:00:19.530 --> 00:00:23.025\nThe troubleshooting ticket reads\nthe routes that are being propagated from\n\n7\n00:00:23.025 --> 00:00:29.070\nNYCORE1 are appearing as both external and\ninternal.\n\n8\n00:00:29.070 --> 00:00:32.570\nAnd on this question they're actually\nbeing very specific about what routes I\n\n9\n00:00:32.570 --> 00:00:33.380\nshould look out for.\n\n10\n00:00:33.380 --> 00:00:35.777\nSo they're telling me to\njump over to NYWAN1 and\n\n11\n00:00:35.777 --> 00:00:38.530\nrun a particular command to\nsee the routes in question.\n\n12\n00:00:38.530 --> 00:00:41.610\nBefore I do that, though,\nLet's take a look at our topology and\n\n13\n00:00:41.610 --> 00:00:43.850\nget an idea of the devices\nthat are involved in this.\n\n14\n00:00:43.850 --> 00:00:49.710\nSo, what they're telling me is that\nI've got good old NYCORE1 down here,\n\n15\n00:00:49.710 --> 00:00:54.650\nand it's propagating routes into EIGRP\n800, and by the time they make it all\n\n16\n00:00:54.650 --> 00:00:59.550\nthe way down here to NYWAN1, some of\nthe routes are appearing as internal and\n\n17\n00:00:59.550 --> 00:01:01.370\nsome of them are appearing as external.\n\n18\n00:01:01.370 --> 00:01:03.910\nNow that's a pretty weird problem to have.\n\n19\n00:01:03.910 --> 00:01:09.130\nI normally expect to see external routes\nif I'm somebody like here, EDGE1.\n\n20\n00:01:09.130 --> 00:01:12.980\nEDGE1 has a connection in the EIGRP 800,\nthose are the internal routes, and\n\n21\n00:01:12.980 --> 00:01:14.870\nit's got a connection to BGP, so\n\n22\n00:01:14.870 --> 00:01:18.550\nif I'm redistributing BGP into EIGRP\nthose would show up as external.\n\n23\n00:01:18.550 --> 00:01:20.230\nThat's what I expect to see.\n\n24\n00:01:20.230 --> 00:01:23.950\nBut they're telling me the routes\nthat are originating from NYCORE1 and\n\n25\n00:01:23.950 --> 00:01:27.200\nNYCORE1 is entirely in EIGRP 800.\n\n26\n00:01:27.200 --> 00:01:31.420\nIt has no interfaces in any\nother autonomous system, so\n\n27\n00:01:31.420 --> 00:01:34.300\nit really shouldn't really have\nany external route, should it?\n\n28\n00:01:34.300 --> 00:01:36.820\nWell there is one scenario where we might.\n\n29\n00:01:36.820 --> 00:01:40.140\nIf you're redistributing\nconnective routes, right?\n\n30\n00:01:40.140 --> 00:01:43.290\nSometimes it's easier than putting\nthe interfaces into the routing protocols.\n\n31\n00:01:43.290 --> 00:01:47.000\nNow, if we redistribute connector routes\nand we expect them to be external.\n\n32\n00:01:47.000 --> 00:01:49.010\nBut it's kinda all or nothing thing.\n\n33\n00:01:49.010 --> 00:01:51.100\nI guess you could route maps and\nget really complex with it but\n\n34\n00:01:51.100 --> 00:01:55.080\nnormally, either all your connector\nroutes be external or all of them will be\n\n35\n00:01:55.080 --> 00:01:58.610\ninternal depending on whether you\nadded them to the routing process or\n\n36\n00:01:58.610 --> 00:02:02.550\nif you redistributed them into the routing\nprocess that would make the decision.\n\n37\n00:02:02.550 --> 00:02:06.050\nBut here we're dealing with both,\nsome internal, some external.\n\n38\n00:02:06.050 --> 00:02:09.890\nAnd so for the routes, they're telling\nme to look at the NYWAN1, and so\n\n39\n00:02:09.890 --> 00:02:13.960\nI'll jump over to NYWAN1, and they want\nme to run a specific command here.\n\n40\n00:02:13.960 --> 00:02:17.213\nSo I'm gonna get in here, and\n\n41\n00:02:17.213 --> 00:02:21.638\nthey want me to run\nshow ip route EIGRP and\n\n42\n00:02:21.638 --> 00:02:26.207\nto filter that for 192.168.1.\n\n43\n00:02:26.207 --> 00:02:31.110\nAll right, and here's four\nroutes that are originating from\n\n44\n00:02:31.110 --> 00:02:34.870\nthat other system, from NYCORE1.\n\n45\n00:02:34.870 --> 00:02:37.510\nAnd they're telling me in\nthe instructions here the note it says,\n\n46\n00:02:37.510 --> 00:02:40.400\nthe first route should be left alone.\n\n47\n00:02:40.400 --> 00:02:41.891\nSo we don't want to mess with that one.\n\n48\n00:02:41.891 --> 00:02:45.041\nBut the remaining three are the trouble\nroutes that we need to resolve in\n\n49\n00:02:45.041 --> 00:02:45.682\nthis ticket.\n\n50\n00:02:45.682 --> 00:02:52.502\nAnd sure enough if I look at the remaining\nthree, I've got 192.168.16.0/23,\n\n51\n00:02:52.502 --> 00:02:57.660\nI've got 192.168.18.0 and 192.168.19.0.\n\n52\n00:02:57.660 --> 00:03:02.410\nAnd the first one shows\nus internal it's got a D.\n\n53\n00:03:02.410 --> 00:03:06.650\nBut the other two show up as external and\ngot a D EX and so\n\n54\n00:03:06.650 --> 00:03:08.280\nthere it is there's that mix.\n\n55\n00:03:08.280 --> 00:03:11.370\nAnd if I look at where they came from,\nwell they came from tunnel zero.\n\n56\n00:03:11.370 --> 00:03:13.740\nIf I start following this back close and\n\n57\n00:03:13.740 --> 00:03:18.390\ncloser to the router I should be able to\nfind that those come from NYCORE1, right?\n\n58\n00:03:18.390 --> 00:03:21.690\nThis router NYWAN1,\nif I look at my topology,\n\n59\n00:03:21.690 --> 00:03:25.380\nit only has that connection that's on that\ntunnel, I guess it's got the serial one,\n\n60\n00:03:25.380 --> 00:03:29.090\nbut it's not running EIGRP there,\nso that's coming from NYEDGE1.\n\n61\n00:03:29.090 --> 00:03:34.260\nIf I go to NYCORE2, let's look there,\nlet's look a little closer to the problem.\n\n62\n00:03:34.260 --> 00:03:37.389\nIf I go to NYCORE2 and\nI look at those same routes,\n\n63\n00:03:39.190 --> 00:03:44.040\nwhat I should see is the same results\nhere that I saw on the other side.\n\n64\n00:03:44.040 --> 00:03:45.960\nIt really shouldn't be any different.\n\n65\n00:03:47.140 --> 00:03:49.020\nAnd sure enough there they are.\n\n66\n00:03:49.020 --> 00:03:52.850\nI've got D, right, so\nthis one is showing up as internal, and\n\n67\n00:03:52.850 --> 00:03:55.730\nthen ex is those guys\nare showing up as external.\n\n68\n00:03:55.730 --> 00:03:58.930\nAnd they're coming from my port channel,\nPort-channel1.\n\n69\n00:03:58.930 --> 00:04:02.100\nAnd if I go to the topology that's the\nport channel that's connected in-between\n\n70\n00:04:02.100 --> 00:04:02.880\nCORE2 and CORE1.\n\n71\n00:04:02.880 --> 00:04:05.270\nSo those are originating from CORE1.\n\n72\n00:04:05.270 --> 00:04:08.250\nSo lets go over to CORE1 and see where\nthese networks are actually coming from.\n\n73\n00:04:09.320 --> 00:04:15.300\nAnd on CORE1, I'll bet they're just\nassigned to VLAN interfaces, right?\n\n74\n00:04:15.300 --> 00:04:17.299\nBecause that's what we normally see for\nsomething like this.\n\n75\n00:04:19.280 --> 00:04:21.280\nAnd so\nI'll do a show IP interface brief and\n\n76\n00:04:21.280 --> 00:04:24.640\nI'm gonna exclude any unassigned\ninterfaces, and there we go.\n\n77\n00:04:24.640 --> 00:04:29.435\nAll right, so\nwhen I looked at that routing table,\n\n78\n00:04:29.435 --> 00:04:34.570\nI saw 192.168.16.0/23, right?\n\n79\n00:04:34.570 --> 00:04:37.195\nIf I jump back over to NYWAN1.\n\n80\n00:04:37.195 --> 00:04:42.102\n192.168.16.0/23.\n\n81\n00:04:42.102 --> 00:04:44.702\nThe others are slash 24s, all right?\n\n82\n00:04:44.702 --> 00:04:48.222\nNow, that slash 23, we'll have to verify,\n\n83\n00:04:48.222 --> 00:04:52.710\nI'm pretty sure I'm wrong\nbecause if I go back to NYCORE2,\n\n84\n00:04:52.710 --> 00:04:58.281\nI've got 192.168.16.1, and 192.168.17.1.\n\n85\n00:04:58.281 --> 00:05:06.430\nNow if 192.168.16.1, if that was a slash\n23, then these two would overlap.\n\n86\n00:05:06.430 --> 00:05:10.760\nAnd Cisco will not let you have\ntwo interfaces on the same subnet,\n\n87\n00:05:10.760 --> 00:05:11.990\nit's against the rules.\n\n88\n00:05:11.990 --> 00:05:12.540\nRight.\n\n89\n00:05:12.540 --> 00:05:17.030\nSo in this scenario,\nthese have to be in different subnets.\n\n90\n00:05:17.030 --> 00:05:21.350\nBut I saw a /23 over there and so\nI think that's going to be our problem.\n\n91\n00:05:21.350 --> 00:05:24.640\nThen as I look down here\nI've got VLAN 18 and 19.\n\n92\n00:05:24.640 --> 00:05:28.147\nThey're just 192.68.18.1 and 19.1.\n\n93\n00:05:28.147 --> 00:05:31.240\nAnd so all of these are VLAN interfaces,\nso they're my,\n\n94\n00:05:31.240 --> 00:05:33.670\nmy switch virtual interfaces, or SVIs.\n\n95\n00:05:33.670 --> 00:05:38.630\nAnd they're probably being either\nredistributed in the EIGRP or\n\n96\n00:05:38.630 --> 00:05:43.750\nactually added to EIGRP which we can find\nthat our really easy by doing a show run\n\n97\n00:05:43.750 --> 00:05:45.640\nand filter that for the EIGRP section.\n\n98\n00:05:45.640 --> 00:05:49.300\nAnd when I look at my EIGRP config,\n\n99\n00:05:49.300 --> 00:05:52.120\nwell that came back a little\nbit weird didn't it?\n\n100\n00:05:52.120 --> 00:05:53.600\nBut I can see a few things here.\n\n101\n00:05:53.600 --> 00:05:58.000\nWhat I was really looking for was this\nsection right here, router EIGRP 800.\n\n102\n00:05:58.000 --> 00:06:03.570\nAnd I can see network 192.168.1.0\nwhich you know doesn't include 16,\n\n103\n00:06:03.570 --> 00:06:05.358\n17, 18 and 19.0.\n\n104\n00:06:05.358 --> 00:06:08.053\nAnd then I can see redistribute connected.\n\n105\n00:06:08.053 --> 00:06:10.020\nSo there's what I was\ntalking about earlier.\n\n106\n00:06:10.020 --> 00:06:14.700\nThat's why those routes are showing\nup as external because we're\n\n107\n00:06:14.700 --> 00:06:19.837\nredistributing them into EIGRP verses\njust saying network 192.168.16.0,\n\n108\n00:06:19.837 --> 00:06:21.590\nnetwork 192.168.17.0 and so on.\n\n109\n00:06:21.590 --> 00:06:22.887\nHere they're being redistributed.\n\n110\n00:06:22.887 --> 00:06:25.350\nAll right,\nthat's why they're showing up as external.\n\n111\n00:06:25.350 --> 00:06:26.702\nAnd let's see if there's\na route map tacked onto that.\n\n112\n00:06:26.702 --> 00:06:27.260\nNope.\n\n113\n00:06:27.260 --> 00:06:32.233\nNo route map or anything so\nall of the interfaces, VLAN 16, 17, 18,\n\n114\n00:06:32.233 --> 00:06:35.360\nand 19, they're all being redistributed.\n\n115\n00:06:35.360 --> 00:06:37.580\nThey all should be external, alright?\n\n116\n00:06:38.840 --> 00:06:41.180\nBut that's not what's happening.\n\n117\n00:06:41.180 --> 00:06:42.240\n16 and 17.\n\n118\n00:06:42.240 --> 00:06:44.360\nAren't showing up as external,\n17s not showing up at all,\n\n119\n00:06:44.360 --> 00:06:49.400\nand 16 is showing up as a slash 23, and\nI get the big hint from that right here.\n\n120\n00:06:49.400 --> 00:06:54.280\nWhen I did show run, and filtered that to\nthe EIGRP section, the command actually\n\n121\n00:06:54.280 --> 00:06:57.730\ndoes something interesting, it doesn't\njust show you the EIGRP section,\n\n122\n00:06:57.730 --> 00:07:01.790\nit shows you every command in\nthe config that deals with EIGRP.\n\n123\n00:07:01.790 --> 00:07:05.056\nAnd on one of my interfaces,\nI've got a summary address and\n\n124\n00:07:05.056 --> 00:07:08.077\nthis explains why I'm seeing\nthat wrong subnet mask.\n\n125\n00:07:08.077 --> 00:07:12.699\nI've got 192.168.16.0 is being\n\n126\n00:07:12.699 --> 00:07:17.446\nsummarized to 255.255.254.0.\n\n127\n00:07:17.446 --> 00:07:21.910\nThere's my slash 23, right?\nIt's not a slash 24, now it's a slash 23.\n\n128\n00:07:21.910 --> 00:07:25.900\nAnd because it's summarizing,\nwhat's it gonna do?\n\n129\n00:07:25.900 --> 00:07:30.560\nIt's gonna wrap up 16 and\n17, so 192.168.16.0,\n\n130\n00:07:30.560 --> 00:07:35.910\nthe slash 24, and\n192.168.17.0 the slash 24,\n\n131\n00:07:35.910 --> 00:07:41.980\nyou combine into 192.168.16.0 slash 23.\n\n132\n00:07:41.980 --> 00:07:45.350\nNow here's the neat part about this,\nthese are external routes, right?\n\n133\n00:07:45.350 --> 00:07:51.430\nBut when I summarize them,\nthe summary is internal.\n\n134\n00:07:51.430 --> 00:07:55.720\nYou created the summary inside of your\nEIGRP process so it becomes internal.\n\n135\n00:07:55.720 --> 00:08:02.350\nSo the summary route is internal, the ones\nthat aren't summarized are external.\n\n136\n00:08:02.350 --> 00:08:02.870\nOkay.\n\n137\n00:08:02.870 --> 00:08:04.500\nSo that's why we're seeing a mix, and\n\n138\n00:08:04.500 --> 00:08:08.120\nthis is something you really\nprobably wouldn't want in real life.\n\n139\n00:08:08.120 --> 00:08:10.340\nIn real life land you'd want\nit to be one or the other.\n\n140\n00:08:10.340 --> 00:08:12.130\nAnd so we've gotta figure out\nhow we want to solve this.\n\n141\n00:08:12.130 --> 00:08:14.150\nAll right,\nI can solve it two different ways.\n\n142\n00:08:15.310 --> 00:08:18.340\nOne solution is I can remove the summary.\n\n143\n00:08:18.340 --> 00:08:22.040\nIf I remove the summary,\nthey'll all become external.\n\n144\n00:08:22.040 --> 00:08:25.040\nAnd you know, in the troubleshooting\nquestion it just says the routes that\n\n145\n00:08:25.040 --> 00:08:30.130\nare being propagating from NYCORE1 are\nappearing as both external and internal.\n\n146\n00:08:30.130 --> 00:08:33.920\nThey don't really tell me which\none I should make it, right?\n\n147\n00:08:33.920 --> 00:08:36.290\nShould I make them all internal or\nmake them all external?\n\n148\n00:08:36.290 --> 00:08:37.240\nIt doesn't say.\n\n149\n00:08:37.240 --> 00:08:38.640\nSo I've got a choice, right.\n\n150\n00:08:38.640 --> 00:08:42.570\nIf I turn off this summary then all\nof those routes will go back to\n\n151\n00:08:42.570 --> 00:08:45.900\nbeing advertised individually and\nthen 16, 17,\n\n152\n00:08:45.900 --> 00:08:50.810\n18 and 19 will all be kind of just\nlisted as external and that's it, right?\n\n153\n00:08:51.880 --> 00:08:55.070\nBut somebody went through\nthe trouble of putting in a summary.\n\n154\n00:08:55.070 --> 00:08:55.980\nIt's a bad summary, but\n\n155\n00:08:55.980 --> 00:08:58.300\nsomebody went through the trouble\nof putting it in there, right?\n\n156\n00:08:58.300 --> 00:09:01.740\nSo I imagine they were trying to\nmake their routing table smaller.\n\n157\n00:09:01.740 --> 00:09:05.790\nSo the alternative solution is, why don't\nI just summarize the other routes, too?\n\n158\n00:09:05.790 --> 00:09:10.180\nAnd when I do that,\nnow they all become internal.\n\n159\n00:09:10.180 --> 00:09:12.340\nAnd I get the advantage of having\na smaller routing table, so\n\n160\n00:09:12.340 --> 00:09:13.790\neither one's going to fix this.\n\n161\n00:09:13.790 --> 00:09:17.100\nI either kill the summary or\nI fix the summary.\n\n162\n00:09:17.100 --> 00:09:17.930\nKilling the summary's easy.\n\n163\n00:09:17.930 --> 00:09:21.200\nWe just say go to the interface where it's\nattached, which I guess we should find.\n\n164\n00:09:21.200 --> 00:09:25.600\nWell it should be on the port channel,\nit's really the only place it can be.\n\n165\n00:09:25.600 --> 00:09:29.850\nAnd we can just do a no IP summary\naddress and wipe that one out, right?\n\n166\n00:09:29.850 --> 00:09:33.490\nBut if I want to fix it,\nall I have to do is go in and\n\n167\n00:09:33.490 --> 00:09:37.670\nfigure out a subnet mask to use that\nwill encompass my four networks.\n\n168\n00:09:37.670 --> 00:09:39.430\nNow fortunately my four\nnetworks are all in a row.\n\n169\n00:09:39.430 --> 00:09:45.960\n16, 17, 18, and 19 and I already know that\n16 and 17 are wrapped up in this slash 23.\n\n170\n00:09:45.960 --> 00:09:51.680\nSo if I go to a slash 22,\nthat'll get 16, 17, 18, and 19.\n\n171\n00:09:51.680 --> 00:09:54.680\nIf I just add one more bit to the host ID,\n\n172\n00:09:54.680 --> 00:09:57.850\ntake away one more bit from the network\nID, that makes it a little bit bigger, and\n\n173\n00:09:57.850 --> 00:10:01.360\nit'll grab all four of those networks and\nroll them up into one summary.\n\n174\n00:10:01.360 --> 00:10:03.670\nAnd that one summary will be internal,\nright?\n\n175\n00:10:03.670 --> 00:10:04.660\nSo let's do that.\n\n176\n00:10:04.660 --> 00:10:08.260\nFirst off, I'm gonna verify that this\nsummary is actually on Port-channel1,\n\n177\n00:10:08.260 --> 00:10:09.930\ncuz I'm kind of assuming that right now.\n\n178\n00:10:11.240 --> 00:10:12.710\nI can't imagine it's anywhere else.\n\n179\n00:10:12.710 --> 00:10:17.734\nYeah, there it is, and\nI'll get into Port-channel1,\n\n180\n00:10:17.734 --> 00:10:21.537\nand I'm gonna do a no IP summary, address.\n\n181\n00:10:21.537 --> 00:10:27.800\nWhoops, I actually have\nto tell it what it is.\n\n182\n00:10:27.800 --> 00:10:29.160\nEIGRP 800 192.168.16.0.\n\n183\n00:10:29.160 --> 00:10:34.710\nAnd then that crazy subnet mask that\nis just a little too small, right?\n\n184\n00:10:34.710 --> 00:10:37.130\nSo I'll throw that in there\nto knock that one out.\n\n185\n00:10:37.130 --> 00:10:41.430\nAnd then I'm gonna put it back in, so\nI'm just gonna get rid of the no at\n\n186\n00:10:41.430 --> 00:10:47.410\nthe beginning, and at the end of\nthat line we're gonna take that and\n\n187\n00:10:47.410 --> 00:10:54.030\nchange it from a 254 to something\na little bit smaller like a 252.\n\n188\n00:10:54.030 --> 00:10:55.430\nRight?\nSo if I go to a 22 bit submit\n\n189\n00:10:55.430 --> 00:10:56.030\nmask 255.255.252.\n\n190\n00:10:56.030 --> 00:11:01.537\nOr actually wait a minute that wouldn't be\na 22 bit, that would be a let's see I was\n\n191\n00:11:01.537 --> 00:11:07.200\nat a, I'm trying to consolidate class c's\nso instead of a 24 we're going to go to a,\n\n192\n00:11:07.200 --> 00:11:11.654\noh no, that is a 22, shoot I should\nhave trusted my first number.\n\n193\n00:11:11.654 --> 00:11:13.652\nSo we'll go to that one.\n\n194\n00:11:13.652 --> 00:11:20.548\nAnd now it should grab 192.168.16,\n192.168.17,\n\n195\n00:11:20.548 --> 00:11:25.785\n192.168.18, and 192.168.19.\n\n196\n00:11:25.785 --> 00:11:28.064\nIt should grab all four of those and\n\n197\n00:11:28.064 --> 00:11:33.580\nsummarize them into a single external\nroute, or a single internal route, right?\n\n198\n00:11:33.580 --> 00:11:34.810\nSummaries are always internal.\n\n199\n00:11:34.810 --> 00:11:36.570\nWe're creating them from right here.\n\n200\n00:11:36.570 --> 00:11:38.430\nWell, unless you redistribute a summary,\nbut that's,\n\n201\n00:11:38.430 --> 00:11:39.760\nthat starts to get really complex, so.\n\n202\n00:11:39.760 --> 00:11:43.010\nFor the sake of this, that summary\nwe just made is an internal route.\n\n203\n00:11:43.010 --> 00:11:45.720\nNow I'm not going to see\nmuch here on NYCORE1.\n\n204\n00:11:45.720 --> 00:11:50.320\nI can verify the interface configuration.\n\n205\n00:11:50.320 --> 00:11:53.930\nAnd I can see that summary address\nright there, and then I can go and\n\n206\n00:11:53.930 --> 00:11:55.350\nlook at it on another router.\n\n207\n00:11:55.350 --> 00:12:00.350\nI'm gonna jump over to NYCORE2, and I can\nsee my neighbor relationship is already\n\n208\n00:12:01.430 --> 00:12:06.320\nreadjusted and\nI'm just gonna do a show ip route EIGRP\n\n209\n00:12:07.990 --> 00:12:12.780\nand what I expect to see is\n192.168.16.0 /22, there you go.\n\n210\n00:12:12.780 --> 00:12:15.230\nIt was a /22 after all.\n\n211\n00:12:15.230 --> 00:12:18.940\nAnd I don't see .16, .17, .18, or .19.\n\n212\n00:12:18.940 --> 00:12:20.120\nI don't see them at all.\n\n213\n00:12:20.120 --> 00:12:23.180\nThey've been rolled up here\ninto the summary route and\n\n214\n00:12:23.180 --> 00:12:24.330\nthe summary route is internal.\n\n215\n00:12:24.330 --> 00:12:26.550\nSo no more external routes\nin my routing table.\n\n216\n00:12:26.550 --> 00:12:33.180\nAnd if I jump over to NYWAN1,\nwhich is all the way at the end of the, if\n\n217\n00:12:33.180 --> 00:12:37.770\nI go back to the topology diagram, NYWAN1\nis all the way at the end of this path.\n\n218\n00:12:37.770 --> 00:12:42.520\nSo we go NYCORE1 to CORE2, to EDGE2,\nacross the tunnel to WAN1.\n\n219\n00:12:43.640 --> 00:12:46.561\nAnd if we take a look at its routing table\n\n220\n00:12:49.903 --> 00:12:57.520\nI expect to see just 192.168.16.0/22, I\ndon't see the others, it's just internal.\n\n221\n00:12:57.520 --> 00:13:00.630\nAnd we can test some basic\nconnectivity if I wanna try and\n\n222\n00:13:00.630 --> 00:13:05.750\nping out to each of those individual\nsubnets, just to be on the safe side.\n\n223\n00:13:05.750 --> 00:13:07.950\nThere's .16.1.\n.17.1.18.1 and .19.1, I got full\n\n224\n00:13:09.070 --> 00:13:14.792\nconnectivity to all four networks,\nand now we're in business.\n\n225\n00:13:14.792 --> 00:13:19.560\nAll right, so in this troubleshooting\nscenario, what we have was\n\n226\n00:13:19.560 --> 00:13:22.200\nsome route showing is internal and\nsome route showing is external.\n\n227\n00:13:23.290 --> 00:13:26.530\nThe internal routes were showing as\nexternal because of a summary address.\n\n228\n00:13:26.530 --> 00:13:28.850\nThe external routes were\njust being redistributed in,\n\n229\n00:13:28.850 --> 00:13:30.030\nand that's the way they are.\n\n230\n00:13:30.030 --> 00:13:32.730\nSo it wasn't really bad behavior,\nit's just\n\n231\n00:13:32.730 --> 00:13:35.880\nthe summary route didn't encompass all\nthe networks that were in question.\n\n232\n00:13:35.880 --> 00:13:39.620\nSo I increased the size of that\nsummary address that would wrap up all\n\n233\n00:13:39.620 --> 00:13:41.730\nfour networks, and\nnow they're all internal.\n\n234\n00:13:41.730 --> 00:13:44.350\nAlternative solution would have been\nto just kill the summary address,\n\n235\n00:13:44.350 --> 00:13:46.990\nand then I would have all\nfour networks as externals.\n\n236\n00:13:46.990 --> 00:13:47.930\nDepending on what they wanna do,\n\n237\n00:13:47.930 --> 00:13:49.870\nthey didn't really tell\nme which one they wanted.\n\n238\n00:13:49.870 --> 00:13:52.660\nWe just went with what would be\nthe most optimal solution right.\n\n239\n00:13:52.660 --> 00:13:56.450\nWhich is just to summarize them all but\nthat knocks out this ticket and\n\n240\n00:13:56.450 --> 00:13:57.620\nwe're ready to move onto the next one.\n\n241\n00:13:57.620 --> 00:13:59.439\nI hope you guys enjoyed it and\nI'll see you next time.\n\n242\n00:13:59.439 --> 00:14:07.339\n[MUSIC]\n\n",
          "vimeoId": "151018056"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #3` from set #6. The trouble ticket states that \"Logs from NYCORE1 should be sent to the Syslog server on PLABCSCO01 (192.168.16.10). Currently there are no logs being sent \"",
          "length": "463",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-6-3-set_6_issue_3-120415-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-6-3-set_6_issue_3-120415-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-6-3-set_6_issue_3-120415-1-sm.jpg",
          "title": "Set 6 Issue 3",
          "transcript": "WEBVTT\n\n1\n00:00:00.025 --> 00:00:04.517\n[SOUND] It's that time again for\n\n2\n00:00:04.517 --> 00:00:12.123\nanother troubleshooting\nepisode here at ITProTV.\n\n3\n00:00:12.123 --> 00:00:15.246\nOn this one we're jumping into set six,\nissue three, and\n\n4\n00:00:15.246 --> 00:00:17.620\nwe're going to a different area this time.\n\n5\n00:00:17.620 --> 00:00:21.390\nLooks like we've got Syslog problem\non one of our router's switches.\n\n6\n00:00:21.390 --> 00:00:25.370\nThe troubleshooting ticket reads like\nthis, it says logs from NYCORE1,\n\n7\n00:00:25.370 --> 00:00:31.270\nthat's one of our switches, should be\nsent to the Syslog server on PLABCISCO01,\n\n8\n00:00:31.270 --> 00:00:33.813\nwhich is 192.168.16.10.\n\n9\n00:00:33.813 --> 00:00:36.760\nCurrently, there are no logs being sent.\n\n10\n00:00:37.770 --> 00:00:38.690\nThat's not good, right.\n\n11\n00:00:38.690 --> 00:00:40.650\nSo, we've got a logging server set up.\n\n12\n00:00:40.650 --> 00:00:41.720\nLogs aren't making it.\n\n13\n00:00:41.720 --> 00:00:42.620\nWe need to find out why.\n\n14\n00:00:42.620 --> 00:00:45.940\nNow, In our minds we need to be\nthinking of possible causes so\n\n15\n00:00:45.940 --> 00:00:46.960\nwe can start to look for this.\n\n16\n00:00:46.960 --> 00:00:49.720\nAnd let's take a look at\nour topology to kind of see\n\n17\n00:00:49.720 --> 00:00:53.000\nwhat some of the stuff is that\nmight actually be in the way.\n\n18\n00:00:53.000 --> 00:00:56.910\nNow our main switch that's in\nquestion here is NYCORE1, this guy.\n\n19\n00:00:56.910 --> 00:01:00.110\nThis is the one that is supposed\nto be generating sys log messages.\n\n20\n00:01:00.110 --> 00:01:05.438\nAnd it's supposed to be sending\nthem to PLABCSCO01 192.68.16.10.\n\n21\n00:01:05.438 --> 00:01:10.191\nNow, we saw in earlier issues in this\nset that NYCORE1 had a number of VLAN\n\n22\n00:01:10.191 --> 00:01:13.719\ninterfaces, but\nI can't remember off hand whether or\n\n23\n00:01:13.719 --> 00:01:18.115\nnot I had an interface on\nthe 192.168.16 network or not.\n\n24\n00:01:18.115 --> 00:01:20.841\nSo we'll need to double check and I'm\npretty sure it did because I think that\n\n25\n00:01:20.841 --> 00:01:23.030\nwas one of the networks we just\nsummarized in the last issue.\n\n26\n00:01:23.030 --> 00:01:25.530\nSo I'm pretty sure it's\ngot an interface on that.\n\n27\n00:01:25.530 --> 00:01:28.830\nBut the reason I'm concerned about\nthat is we need to test connectivity.\n\n28\n00:01:28.830 --> 00:01:32.870\nIf we have an interface on the network,\ncan we see the server on it?\n\n29\n00:01:32.870 --> 00:01:35.690\nCause if we can't see the server the\nSyslog messages aren't gonna get there.\n\n30\n00:01:35.690 --> 00:01:38.910\nAll right,\nthe other thing I need to think about is\n\n31\n00:01:38.910 --> 00:01:40.930\nwhat could be stopping this in transit?\n\n32\n00:01:40.930 --> 00:01:45.060\nI could have an ACL or\nsomething like that here on NYACCESS1 if\n\n33\n00:01:45.060 --> 00:01:49.050\nNYCORE1 is having to be\nrouted to get to 192.168.16,\n\n34\n00:01:49.050 --> 00:01:52.940\nthen whoever that router is could\nbe stopping that traffic, right?\n\n35\n00:01:52.940 --> 00:01:55.890\nSo, those are all different things\nthat'd be kinda getting involved in\n\n36\n00:01:55.890 --> 00:01:59.600\nthat communications flow and\ncould be stopping Syslog from working.\n\n37\n00:01:59.600 --> 00:02:04.370\nBut let's not overlook the easiest\npossibility which is, maybe Syslog's not\n\n38\n00:02:04.370 --> 00:02:08.870\neven configured, or it's just configured\nwrong, right here on NYCORE1.\n\n39\n00:02:08.870 --> 00:02:13.170\nSo I wanna jump in there and just kinda\ntake a look at how Syslog is configured\n\n40\n00:02:13.170 --> 00:02:14.920\nand get an idea of what's\nsupposed to be in place.\n\n41\n00:02:14.920 --> 00:02:18.130\nNow, before I start making any tweaks,\n\n42\n00:02:18.130 --> 00:02:21.850\nI need to make sure that I actually do\nhave a Syslog server set up on PLABCSCO01.\n\n43\n00:02:21.850 --> 00:02:24.430\nIt needs to be listening so\nthat I can see that it's working.\n\n44\n00:02:24.430 --> 00:02:28.110\nSo let me just jump over to PLABCSCO01 and\nsee what we've got.\n\n45\n00:02:28.110 --> 00:02:31.410\nAnd sure enough we've got a Tftpd32.\n\n46\n00:02:31.410 --> 00:02:32.970\nIf you've never used it,\n\n47\n00:02:32.970 --> 00:02:37.570\nthat's an open source Tftp server\nis the main thing that it does.\n\n48\n00:02:37.570 --> 00:02:41.030\nBut it also does DHCP's,\nSyslog, and other things.\n\n49\n00:02:41.030 --> 00:02:45.850\nSo it's up and running on 192.168.16.10.\n\n50\n00:02:45.850 --> 00:02:49.170\nAnd it's running as a Syslog server, and\nsure enough I can see right here it's got\n\n51\n00:02:49.170 --> 00:02:53.550\nno log messages in it, it's just sitting\nhere waiting to receive log messages.\n\n52\n00:02:53.550 --> 00:02:55.350\nSo we'll know if we get this thing fixed.\n\n53\n00:02:56.410 --> 00:03:01.995\nAll right, let's jump over to NYCORE1,\nand I wanna take a look at a few things,\n\n54\n00:03:01.995 --> 00:03:05.195\njust even before I get too\ncrazy into the hard stuff.\n\n55\n00:03:05.195 --> 00:03:07.185\nLet's just see if we're dealing\nwith the connectivity issue,\n\n56\n00:03:07.185 --> 00:03:09.795\nmaybe I can't even get\nto the Syslog server.\n\n57\n00:03:09.795 --> 00:03:14.431\nIf I do a show ip int br, and\nI'll exclude the unassigned addresses.\n\n58\n00:03:14.431 --> 00:03:19.864\nI have an IP on VLAN 16, 192.168.16.1.\n\n59\n00:03:19.864 --> 00:03:24.575\nAnd the Syslog server is 192.168.16.10.\n\n60\n00:03:24.575 --> 00:03:25.715\nSo we're on the same network.\n\n61\n00:03:25.715 --> 00:03:29.415\nThat means we're not being routed and\nACLs are probably not an issue here.\n\n62\n00:03:29.415 --> 00:03:31.335\nThat's not a guarantee, right.\n\n63\n00:03:31.335 --> 00:03:35.065\nAccess controllers based on IP are not\ngoing to be an issue because I'm not being\n\n64\n00:03:35.065 --> 00:03:38.097\nrouted so there's not really\nanything to filter me here, right.\n\n65\n00:03:38.097 --> 00:03:41.207\nBut you can add an access control that's\nbased on a MAC address, couldn't you?\n\n66\n00:03:41.207 --> 00:03:44.037\nAnd that could be taking affect,\nor a VLAN ACL, right,\n\n67\n00:03:44.037 --> 00:03:47.987\nthey can really take affect here cuz they\napply even to traffic that's not routed.\n\n68\n00:03:47.987 --> 00:03:52.827\nBut, it's doubtful, but let's just\nsee if I can ping that other system.\n\n69\n00:03:52.827 --> 00:03:59.100\nSo I'm gonna ping 192.168.16.10 and\nthere we go, all right.\n\n70\n00:03:59.100 --> 00:04:00.330\nHad me worried for a moment there.\n\n71\n00:04:00.330 --> 00:04:03.310\nThat first ping was waiting for\nthe ARP request to come back.\n\n72\n00:04:03.310 --> 00:04:05.210\nBut looks like we have\ngood connectivity there.\n\n73\n00:04:05.210 --> 00:04:07.120\nSo it's not gonna be something simple,\n\n74\n00:04:07.120 --> 00:04:10.580\nthere's gonna be something in\nthe configuration here that's wrong.\n\n75\n00:04:10.580 --> 00:04:15.770\nAll right, so next I wanna see am I\neven generating log messages at all?\n\n76\n00:04:15.770 --> 00:04:20.270\nRight, if you do a show log or\nshow logging, you'll get the logs of this\n\n77\n00:04:20.270 --> 00:04:26.250\nsystem and I can see console logging\ngeneration 46 messages, all right.\n\n78\n00:04:26.250 --> 00:04:27.130\nMonitor logging,\n\n79\n00:04:27.130 --> 00:04:30.250\nthat would be terminal monitoring when\nyour mode in is zero, that's fine.\n\n80\n00:04:30.250 --> 00:04:31.660\nBuffer logging is 46.\n\n81\n00:04:31.660 --> 00:04:36.440\nSo I've generated 46 messages and\nI've displayed them on the console and\n\n82\n00:04:36.440 --> 00:04:37.810\nsaved them into memory.\n\n83\n00:04:37.810 --> 00:04:39.730\nSo we do have logging configured.\n\n84\n00:04:40.890 --> 00:04:43.360\nAnd then as I look at\nthe rest of the log files,\n\n85\n00:04:43.360 --> 00:04:46.050\nI'll see that there's actually\nplenty of log messages in here.\n\n86\n00:04:46.050 --> 00:04:49.100\nSo we are generating log messages.\n\n87\n00:04:49.100 --> 00:04:52.240\nThen I'm just gonna do\na show running-config and\n\n88\n00:04:52.240 --> 00:04:55.830\nI'm gonna filter that for\nthe word logging, right.\n\n89\n00:04:55.830 --> 00:04:59.160\nWhen you configure a Syslog server,\nyou use the logging command to do it.\n\n90\n00:04:59.160 --> 00:05:02.954\nAnd when you configure the logging levels,\nyou use the login command.\n\n91\n00:05:02.954 --> 00:05:05.879\nAnd so I'm just looking for any command\nwith the word logging in it and\n\n92\n00:05:05.879 --> 00:05:06.391\nhere it is.\n\n93\n00:05:06.391 --> 00:05:11.940\nLogging host 192.168.16.11.\n\n94\n00:05:11.940 --> 00:05:15.934\nI'm set to log to a Syslog\nserver that's not .10.\n\n95\n00:05:15.934 --> 00:05:18.950\nNow you can log to multiple\nSyslog servers if you want.\n\n96\n00:05:18.950 --> 00:05:22.919\nIt doesn't care about that, but\nif I'm supposed to be sending logs to .10,\n\n97\n00:05:22.919 --> 00:05:26.130\nI kind of expected to see that\nserver in here and I don't.\n\n98\n00:05:26.130 --> 00:05:30.635\nSo at a minimum I'm going to need to add\nthat in and so I can do logging host\n\n99\n00:05:30.635 --> 00:05:37.790\n192.168.16.10 and we can just stop right\nthere and we'll send to the server or\n\n100\n00:05:37.790 --> 00:05:42.230\nyou can continue on and specify filters,\nsession ID's, and other things.\n\n101\n00:05:42.230 --> 00:05:44.159\nNow, it will tell me that\nhere in the question,\n\n102\n00:05:44.159 --> 00:05:47.540\nit just says we're supposed to be\nsending logs to this IP and we're not.\n\n103\n00:05:47.540 --> 00:05:51.030\nI think it's pretty obvious we're just\nnot configured to send to that server so\n\n104\n00:05:51.030 --> 00:05:56.390\nI'm going to add that and\nif I do a show running config and\n\n105\n00:05:56.390 --> 00:05:59.710\nlook for logging, I'm now setup for\ntwo Syslog servers.\n\n106\n00:05:59.710 --> 00:06:05.230\nNow, you might be tempted to remove .11\nand I certainly could, but, it didn't\n\n107\n00:06:05.230 --> 00:06:08.300\ntell me that it was a problem there,\nI might actually have a Syslog server .11.\n\n108\n00:06:08.300 --> 00:06:10.610\nIt's just telling me I need\nto be logged in to .10.\n\n109\n00:06:10.610 --> 00:06:14.110\nSo I'm gonna add that as a server and I'm\njust gonna leave the other one in there.\n\n110\n00:06:14.110 --> 00:06:15.590\nBecause I just don't know.\n\n111\n00:06:15.590 --> 00:06:19.640\nAnd I can see I got a status message here,\nlogginghost_startstop.\n\n112\n00:06:19.640 --> 00:06:25.980\nAnd I want to generate a log message here\njust to make sure that it's logging.\n\n113\n00:06:25.980 --> 00:06:30.020\nAnd one of the easiest ways to do that is\nif you go into config and then get out.\n\n114\n00:06:30.020 --> 00:06:32.580\nEvery time you exit config,\nwhat do you get?\n\n115\n00:06:32.580 --> 00:06:35.020\nYou get a little message that\npops up on the screen that says,\n\n116\n00:06:35.020 --> 00:06:39.690\nconfigured from console by console,\nor configured by\n\n117\n00:06:40.860 --> 00:06:44.810\nfrom VTY7, or whatever it is,\nyou'll get a message just like that.\n\n118\n00:06:44.810 --> 00:06:48.800\nSo that generates a message and\nthat should be sent to the Syslog server.\n\n119\n00:06:48.800 --> 00:06:52.770\nAnd so now I can go look at the Syslog\nserver and see if it got that.\n\n120\n00:06:52.770 --> 00:06:55.970\nAnd I'll jump down to PLABCSCO01 and\n\n121\n00:06:55.970 --> 00:06:59.690\nsure enough I can see that it is now\nreceiving some of those messages.\n\n122\n00:06:59.690 --> 00:07:02.960\nAnd we've got that logging host\nwhere the logging was turned on and\n\n123\n00:07:02.960 --> 00:07:05.420\nthere's configured from\nconsole by console.\n\n124\n00:07:05.420 --> 00:07:08.550\nThat's the message for my configuration\nchanges just a second ago.\n\n125\n00:07:08.550 --> 00:07:12.850\nAnd so now Syslog is working, so this one\nactually turned out to be really simple.\n\n126\n00:07:12.850 --> 00:07:16.350\nHere we had we weren't logging to\na Syslog server, and we checked,\n\n127\n00:07:16.350 --> 00:07:18.800\nand just IP address of\nthe Syslog server was wrong.\n\n128\n00:07:18.800 --> 00:07:22.390\nWe didn't have ACLs or anything crazy like\nthat, it could have been a lot of things.\n\n129\n00:07:22.390 --> 00:07:25.160\nIt could have been routing, it could\nhave been all sorts of neat stuff.\n\n130\n00:07:25.160 --> 00:07:26.340\nIn this case just wrong IP.\n\n131\n00:07:26.340 --> 00:07:30.040\nSo that knocks that one out, and takes\ncare of another troubleshooting issue.\n\n132\n00:07:30.040 --> 00:07:31.370\nSo that's issue three.\n\n133\n00:07:31.370 --> 00:07:33.080\nWe got a couple more for set six.\n\n134\n00:07:33.080 --> 00:07:38.595\nDefinitely stay tuned for that,\nbecause they're coming up next.\n\n135\n00:07:38.595 --> 00:07:43.164\n[SOUND]\n\n",
          "vimeoId": "151018054"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #4` from set #6. The trouble ticket states that \"NYEDGE2 and NYCORE2 are using LLDP, not CDP to exchange information between each other, however for some reason we can’t see the capabilities of NYCORE2 when you look at the neighbors on NYEDGE2 \"",
          "length": "385",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-6-4-set_6_issue_4-120415-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-6-4-set_6_issue_4-120415-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-6-4-set_6_issue_4-120415-1-sm.jpg",
          "title": "Set 6 Issue 4",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:08.804\n[MUSIC]\n\n2\n00:00:08.804 --> 00:00:12.110\nAll right welcome back for another\ntroubleshooting episode here on IT Pro TV.\n\n3\n00:00:12.110 --> 00:00:15.110\nFor this one we're jumping\ninto set six issue four,\n\n4\n00:00:15.110 --> 00:00:18.280\nand boy have we got a mind bender\non the schedule for today.\n\n5\n00:00:18.280 --> 00:00:21.030\nThis one, get ready for the challenge.\n\n6\n00:00:21.030 --> 00:00:22.955\nWe've got LLDP not working right.\n\n7\n00:00:22.955 --> 00:00:25.580\n[LAUGH] Troubleshooting\nticket reads like this.\n\n8\n00:00:25.580 --> 00:00:30.570\nNYEDGE2 and NYCORE2 are using LLDP\n\n9\n00:00:30.570 --> 00:00:33.960\nnot CDP to exchange\ninformation between each other.\n\n10\n00:00:33.960 --> 00:00:38.280\nHowever for some reason we can't\nsee the capabilities of NYCORE2\n\n11\n00:00:38.280 --> 00:00:40.710\nwhen you look at the neighbors on NYEDGE2.\n\n12\n00:00:40.710 --> 00:00:43.520\nNow, I kinda make fun of\nthis question a little bit.\n\n13\n00:00:43.520 --> 00:00:47.730\nI love these on the exam though cuz\nthe instant you see CDP or LLDP or\n\n14\n00:00:47.730 --> 00:00:49.960\nreally any Layer 2 protocol for\nthat matter.\n\n15\n00:00:49.960 --> 00:00:52.805\nYou can just kinda wipe your forehead and\nsay, [NOISE] This one's an easy one.\n\n16\n00:00:52.805 --> 00:00:54.960\nWe're gonna get some points and\nmove onto the next.\n\n17\n00:00:54.960 --> 00:00:58.700\nLayer 2 protocols are awesome\nbecause there's really only so\n\n18\n00:00:58.700 --> 00:01:00.180\nmuch that can go wrong with them.\n\n19\n00:01:00.180 --> 00:01:03.680\nThe protocol itself Is pretty rock solid.\n\n20\n00:01:03.680 --> 00:01:07.230\nSo if you're having a layer 2 problem,\nit's almost always just a missed\n\n21\n00:01:07.230 --> 00:01:10.680\nconfiguration, and you can simply\nlook at the configs on both sides.\n\n22\n00:01:10.680 --> 00:01:13.560\nWell, this one is a little\nbit trickier than that,\n\n23\n00:01:13.560 --> 00:01:16.820\nbecause it looks like LLDP is working,\nit's working.\n\n24\n00:01:16.820 --> 00:01:19.060\nIt's exchanging information\nbetween these systems, but\n\n25\n00:01:19.060 --> 00:01:21.210\nit's missing some of its data.\n\n26\n00:01:21.210 --> 00:01:25.699\nIt says for some reason we can't\nsee the capabilities of NYCORE2\n\n27\n00:01:25.699 --> 00:01:28.725\nwhen you look at the neighbors on NYEDGE2.\n\n28\n00:01:28.725 --> 00:01:30.687\nLet's see what they're talking about.\n\n29\n00:01:30.687 --> 00:01:35.260\nIn my topology,\nwe're talking about NYCORE2 and NYEDGE2.\n\n30\n00:01:35.260 --> 00:01:37.670\nThey're directly plugged\ninto each other right here.\n\n31\n00:01:37.670 --> 00:01:40.870\nSo LLDP is running on this link.\n\n32\n00:01:40.870 --> 00:01:42.300\nAnd exchanging data.\n\n33\n00:01:42.300 --> 00:01:44.600\nAnd they're saying,\nwhen I look on NYEDGE2,\n\n34\n00:01:44.600 --> 00:01:49.140\nit sees NYCORE2 but\nit can't see it's capabilities.\n\n35\n00:01:49.140 --> 00:01:50.350\nWhat are capabilities?\n\n36\n00:01:50.350 --> 00:01:52.650\nWhere it detects it's a bridge or\n\n37\n00:01:52.650 --> 00:01:56.010\na router; where it detects that kind\nof information and says what it is.\n\n38\n00:01:56.010 --> 00:01:59.080\nApparently we're missing that,\nso let's go jump to EDGE2 and\n\n39\n00:01:59.080 --> 00:02:00.600\nsee if we can't replicate that.\n\n40\n00:02:01.920 --> 00:02:07.130\nSo one EDGE2 I'm just going to\ndo a quick show LLDP neighbor.\n\n41\n00:02:10.740 --> 00:02:15.960\nAnd when I look at it, sure enough it sees\nNYCORE2, it's on gigabit ethernet 0/0.\n\n42\n00:02:15.960 --> 00:02:17.220\nIt's got a hold time of 120.\n\n43\n00:02:17.220 --> 00:02:21.010\nThe capability is indeed blank.\n\n44\n00:02:21.010 --> 00:02:25.280\nAnd then it's on port\nID Fa1/0/1 on the other side.\n\n45\n00:02:25.280 --> 00:02:28.010\nSo I'm missing some of the data.\n\n46\n00:02:28.010 --> 00:02:29.680\nNow why am I missing data?\n\n47\n00:02:30.740 --> 00:02:33.520\nWith LLDP we normally just turn it on and\nthat's it,\n\n48\n00:02:33.520 --> 00:02:37.510\nand it moves the information and\nwe really don't have to sweat it anymore.\n\n49\n00:02:37.510 --> 00:02:41.450\nBut in this case it is working,\nit's just part of it is now missing.\n\n50\n00:02:41.450 --> 00:02:42.230\nI should see some letters.\n\n51\n00:02:42.230 --> 00:02:43.190\nSee these letters up here?\n\n52\n00:02:43.190 --> 00:02:46.500\nR for Router, B for Bridge,\nI should at least see those here, because\n\n53\n00:02:46.500 --> 00:02:50.910\nNYCORE2 is a layer three switch, so it\nshould show up as a bridge and a router.\n\n54\n00:02:50.910 --> 00:02:53.280\nBut it might also show up as\nsome of these other components,\n\n55\n00:02:53.280 --> 00:02:56.080\ndepending on how it's set up.\n\n56\n00:02:56.080 --> 00:02:57.720\nBut as it stands, I'm not, so\n\n57\n00:02:57.720 --> 00:03:01.170\nthat tells me right a way that we're\nreally just dealing with a LLDP problem.\n\n58\n00:03:01.170 --> 00:03:04.150\nWith LLDP you have a lot\nmore control than CDP.\n\n59\n00:03:04.150 --> 00:03:06.360\nCDP you just turn on and\nthat's basically it.\n\n60\n00:03:06.360 --> 00:03:08.270\nYou can set some timers and you're done.\n\n61\n00:03:08.270 --> 00:03:13.510\nWith LLDP we can actually control\nwhat information is being exchanged.\n\n62\n00:03:13.510 --> 00:03:18.310\nAnd I bet we'll find that this is either\nactively being blocked or just being\n\n63\n00:03:18.310 --> 00:03:21.930\nleft out of the config, and so we can\nthrow it back in to exchange capabilities.\n\n64\n00:03:21.930 --> 00:03:23.530\nSo let's go find out.\n\n65\n00:03:23.530 --> 00:03:25.160\nThe problem's not gonna be here on EDGE2.\n\n66\n00:03:25.160 --> 00:03:29.330\nOn EDGE2 you can't filter\nthe LLDP traffic coming in.\n\n67\n00:03:29.330 --> 00:03:30.490\nYou can block it.\n\n68\n00:03:30.490 --> 00:03:33.120\nBut you can't filter out just\none particular component.\n\n69\n00:03:33.120 --> 00:03:34.310\nThere's no way to do that.\n\n70\n00:03:34.310 --> 00:03:36.290\nSo I know the problem's not here.\n\n71\n00:03:36.290 --> 00:03:37.650\nBut if I jump over to NYCORE2,\n\n72\n00:03:37.650 --> 00:03:42.760\nit's the one that's originating\nthe data and it can filter that.\n\n73\n00:03:42.760 --> 00:03:45.280\nYou can filter the data you send out.\n\n74\n00:03:45.280 --> 00:03:49.050\nYou just can't filter what's coming in,\nother than blocking it outright.\n\n75\n00:03:49.050 --> 00:03:55.100\nSo, what I imagine we're gonna\nsee here is if I do a show run,\n\n76\n00:03:55.100 --> 00:03:57.590\nand look for any command with LLDP.\n\n77\n00:03:57.590 --> 00:04:02.890\nI'll bet we find our problem right in\nhere, and it's sure enough there is.\n\n78\n00:04:02.890 --> 00:04:05.650\nLLDP run,\nthat's how I know it's turned on, right?\n\n79\n00:04:05.650 --> 00:04:08.110\nSo we are running LLDP,\nwe already knew that.\n\n80\n00:04:08.110 --> 00:04:14.200\nBut then right here,\nno LLDP TLV-select system-capabilities.\n\n81\n00:04:14.200 --> 00:04:15.720\nAnd so, what this is doing is the same.\n\n82\n00:04:15.720 --> 00:04:22.070\nWe're gonna exchange LLDP data but, we're\ngonna filter out the system capabilities.\n\n83\n00:04:22.070 --> 00:04:22.850\nAnd that's that.\n\n84\n00:04:22.850 --> 00:04:25.950\nSo, if I go in and\njust turn that on, right?\n\n85\n00:04:25.950 --> 00:04:32.360\nLLDP TLV-select,\nSystem-capabilities and run that.\n\n86\n00:04:32.360 --> 00:04:33.990\nThat will turn it on, okay.\n\n87\n00:04:33.990 --> 00:04:36.180\nBut I do have to be a little\nbit careful with this.\n\n88\n00:04:36.180 --> 00:04:41.630\nThere are some of these options that we\ncan turn on and when we turn them on.\n\n89\n00:04:41.630 --> 00:04:44.660\nNow it's assuming that's the only\nthing we want to send out, and\n\n90\n00:04:44.660 --> 00:04:47.000\nit turns off everything else.\n\n91\n00:04:47.000 --> 00:04:49.770\nAnd so instead of running it\nlike this I might have needed to\n\n92\n00:04:49.770 --> 00:04:52.260\nremove the other command, I don't\nthink that's gonna be the case here.\n\n93\n00:04:52.260 --> 00:04:53.560\nSo we should be all right.\n\n94\n00:04:53.560 --> 00:04:56.110\nAnd I'm just gonna do a quick show run and\n\n95\n00:04:56.110 --> 00:05:00.780\nlook for LLDP commands, and\nI should just see the one command now.\n\n96\n00:05:00.780 --> 00:05:01.630\nThere we go.\n\n97\n00:05:01.630 --> 00:05:02.230\nLLDP run.\n\n98\n00:05:02.230 --> 00:05:04.280\nSo now we should be\nrunning the default and\n\n99\n00:05:04.280 --> 00:05:07.620\nthe default is to exchange\nsystem capabilities.\n\n100\n00:05:07.620 --> 00:05:11.158\nNow on one hand, I'm really glad when\nI see layer two questions on the exam\n\n101\n00:05:11.158 --> 00:05:13.173\nbecause I know they're going to be easy.\n\n102\n00:05:13.173 --> 00:05:17.410\nOn the other hand they can be\nkind of bad sometimes because.\n\n103\n00:05:17.410 --> 00:05:19.130\nThe protocol's run on a timer.\n\n104\n00:05:19.130 --> 00:05:22.890\nLLDP, it's exchanging it's information,\nand you guys saw on the other one\n\n105\n00:05:22.890 --> 00:05:25.900\nthat we had a 120 second timer on it,\nthat's two minutes.\n\n106\n00:05:25.900 --> 00:05:29.610\nThat means I could have to wait up to two\nminutes for this change to make it over.\n\n107\n00:05:29.610 --> 00:05:31.320\nLet's hope that it happens really fast.\n\n108\n00:05:31.320 --> 00:05:34.200\nIf it takes too long, I could always do\nsomething like shutting the interface down\n\n109\n00:05:34.200 --> 00:05:37.880\nand bringing it back up, trying and kick\nit in the butt and make it happen faster.\n\n110\n00:05:37.880 --> 00:05:40.510\nBut, let's see if it just happened for\nus in that time.\n\n111\n00:05:40.510 --> 00:05:41.730\nAnd it did.\n\n112\n00:05:41.730 --> 00:05:44.030\nNow I can see I've got NYCORE2.\n\n113\n00:05:44.030 --> 00:05:49.870\nIt's up and running on GI0/0, hold down\ntime of 120 and then capability B and R.\n\n114\n00:05:49.870 --> 00:05:51.790\nI can see that it's a bridge and a router.\n\n115\n00:05:51.790 --> 00:05:55.140\nIt's a layer three switch and\nI've got the information I needed.\n\n116\n00:05:55.140 --> 00:05:58.000\nSo, turned out to be a pretty\neasy one in this case.\n\n117\n00:05:58.000 --> 00:06:01.500\nLLDP wasn't showing all of the information\nthat should have been there, and\n\n118\n00:06:01.500 --> 00:06:05.070\nit turns out that the originating piece\nof equipment was just excluding the data.\n\n119\n00:06:05.070 --> 00:06:07.040\nWe put it back in, and now we're covered.\n\n120\n00:06:07.040 --> 00:06:08.800\nPretty cut and dry, not a hard one for\n\n121\n00:06:08.800 --> 00:06:11.530\nus there, and that wraps up\nthis troubleshooting question.\n\n122\n00:06:11.530 --> 00:06:13.845\nNow we've got one more issue\navailable in set six, so\n\n123\n00:06:13.845 --> 00:06:15.348\nwe're gonna cover that one next.\n\n124\n00:06:15.348 --> 00:06:18.771\nStay tuned because it's coming up.\n\n125\n00:06:18.771 --> 00:06:25.239\n[MUSIC]\n\n",
          "vimeoId": "151018058"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #5` from set #6. The trouble ticket states that \"BGP is not working between NYEDGE1 and the ISP router, we are receiving no routes \"",
          "length": "663",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-6-5-set_6_issue_5-120415-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-6-5-set_6_issue_5-120415-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-6-5-set_6_issue_5-120415-1-sm.jpg",
          "title": "Set 6 Issue 5",
          "transcript": "WEBVTT\n\n1\n00:00:00.067 --> 00:00:08.478\n[MUSIC]\n\n2\n00:00:08.478 --> 00:00:12.038\nAll right it's time for\nthe final troubleshooting issue of Set 6.\n\n3\n00:00:12.038 --> 00:00:13.710\nSo we're gonna jump right back into it and\n\n4\n00:00:13.710 --> 00:00:17.010\nget a chance to see what's going on in the\nnetwork, figure it out, and resolve it.\n\n5\n00:00:17.010 --> 00:00:18.980\nFor this one we've got a BGP issue,\n\n6\n00:00:18.980 --> 00:00:20.850\nthis is our first\ntroubleshooting ticket with BGP.\n\n7\n00:00:20.850 --> 00:00:27.170\nIt says here that BGP is not working\nbetween NYEDGE1 and the ISP router.\n\n8\n00:00:27.170 --> 00:00:30.110\nWe are receiving no routes.\n\n9\n00:00:30.110 --> 00:00:32.050\nWell, if I look at my topology,\n\n10\n00:00:32.050 --> 00:00:35.460\nNYEDGE1 has a neighbor that's\ndefined with one of the ISPs.\n\n11\n00:00:35.460 --> 00:00:37.930\nSo I've got it kinda pulled up here.\n\n12\n00:00:37.930 --> 00:00:43.270\nNYEDGE1 has a gigabit ethernet interface\nthat's pointing out to an ISP.\n\n13\n00:00:43.270 --> 00:00:47.030\nThe ISP is 172.14.0.3 and\nwe're not getting any routes.\n\n14\n00:00:47.030 --> 00:00:50.600\nNow, I immediately start trying\nto think of reasons why we might\n\n15\n00:00:50.600 --> 00:00:52.470\nnot be getting routes from the outside.\n\n16\n00:00:52.470 --> 00:00:55.760\nMisconfiguration is more than\nlikely what it's gonna be.\n\n17\n00:00:55.760 --> 00:01:00.072\nBut it could be an authentication problem\nright BGP does support authentication and\n\n18\n00:01:00.072 --> 00:01:02.450\nfor a WAN link like this\nwe'd probably use it.\n\n19\n00:01:02.450 --> 00:01:05.410\nSo that's probably\na really likely culprit.\n\n20\n00:01:05.410 --> 00:01:07.930\nWe could have a misconfiguration,\nbad neighbor statements,\n\n21\n00:01:07.930 --> 00:01:10.390\nwe could have a bad autonomous\nsystem number defined.\n\n22\n00:01:10.390 --> 00:01:12.840\nA bad remote AS number defined.\n\n23\n00:01:12.840 --> 00:01:15.730\nThere's all sorts of different things\nthat cause us not to get any routes.\n\n24\n00:01:15.730 --> 00:01:17.750\nWe'll need to jump into that\nsystem to find out why.\n\n25\n00:01:17.750 --> 00:01:21.410\nNow before I do that again, I'm gonna take\nmy most important troubleshooting tool and\n\n26\n00:01:21.410 --> 00:01:24.895\nI'm gonna write down the IP\naddress of that ISP.\n\n27\n00:01:24.895 --> 00:01:27.251\n172.14.0.3.\n\n28\n00:01:27.251 --> 00:01:29.973\nAnd the reason is I might have\nmore than one BGP neighbor.\n\n29\n00:01:29.973 --> 00:01:31.650\nThey don't tell me that in the question.\n\n30\n00:01:31.650 --> 00:01:36.380\nBut it's saying that we're not receiving\nroutes from, apparently the ISP router,\n\n31\n00:01:36.380 --> 00:01:37.420\nwhich would be this guy.\n\n32\n00:01:37.420 --> 00:01:40.220\nSo I want to make sure that when I'm\ntroubleshooting that I'm actually\n\n33\n00:01:40.220 --> 00:01:44.010\ntroubleshooting this one's connections and\nnot a connection from some other router\n\n34\n00:01:44.010 --> 00:01:45.980\nout there that's not\na part of this question.\n\n35\n00:01:45.980 --> 00:01:49.120\nAll right, so let's jump over to\nNYEDGE1 and see what it's seeing.\n\n36\n00:01:49.120 --> 00:01:51.080\nI don't have any access\nto the ISP router so\n\n37\n00:01:51.080 --> 00:01:54.040\nEDGE1's really the only place\nwe can troubleshoot from.\n\n38\n00:01:54.040 --> 00:01:58.570\nAnd it looks like EDGE1's getting\na few errors on it's screen.\n\n39\n00:01:58.570 --> 00:02:00.920\nMaybe just one or\ntwo kinda popping up here.\n\n40\n00:02:00.920 --> 00:02:03.190\nSo lets look at what we're seeing.\n\n41\n00:02:03.190 --> 00:02:07.910\nWhat I'm seeing here is security\nalerts for an IP access list.\n\n42\n00:02:07.910 --> 00:02:11.120\nAnd so it's logging these and\nwe've got some kind of protect\n\n43\n00:02:11.120 --> 00:02:15.470\nstatement that's going on saying\ndenied TCP from 172.14.0.3,\n\n44\n00:02:15.470 --> 00:02:21.830\nthat's that ISP router coming\nto us 172.14.0.1 on port 179.\n\n45\n00:02:21.830 --> 00:02:26.680\nNow what uses port 179?\n\n46\n00:02:26.680 --> 00:02:27.180\nBGP.\n\n47\n00:02:29.150 --> 00:02:32.420\nBGP builds all of it's\nconnections on TCP port 179.\n\n48\n00:02:32.420 --> 00:02:36.460\nIt's one of the few routing\nprotocols that uses just straight up\n\n49\n00:02:36.460 --> 00:02:41.020\nunicast TCP communications,\nbecause it's designed for the Internet.\n\n50\n00:02:41.020 --> 00:02:46.340\nRemember that OSPF, EIGRP, RIP they all\nuse multi cast addresses to communicate.\n\n51\n00:02:46.340 --> 00:02:49.837\nAnd so port numbers don't really matter to\nthem they're just multi casting it out on\n\n52\n00:02:49.837 --> 00:02:52.930\na particular address everybody\nelse listens on that address.\n\n53\n00:02:52.930 --> 00:02:57.110\nBGP on the other hand uses\nunicast TCP communications and\n\n54\n00:02:57.110 --> 00:03:00.060\nit looks like we've got\nan ACL that's blocking it.\n\n55\n00:03:00.060 --> 00:03:03.160\nNow one of the issues we're gonna\nhave with troubleshooting this is,\n\n56\n00:03:03.160 --> 00:03:07.100\nhow annoying these messages can be,\ncuz they're gonna continually pop up.\n\n57\n00:03:07.100 --> 00:03:11.967\nSo I'm just gonna jump up into my config\n\n58\n00:03:11.967 --> 00:03:17.133\nreal quick and say, no logging console.\n\n59\n00:03:17.133 --> 00:03:20.461\nThere we go, to try and stop those log\nmessages from popping up on my screen so\n\n60\n00:03:20.461 --> 00:03:22.100\nthat I can work on this thing.\n\n61\n00:03:22.100 --> 00:03:25.240\nThat is something important, you know\nsometimes we just need those commands to\n\n62\n00:03:25.240 --> 00:03:28.350\nstop, or the errors to stop so\nwe can work on it.\n\n63\n00:03:28.350 --> 00:03:31.360\nThe real problem here is somebody's\ncreated an ACL and turned logging on for\n\n64\n00:03:31.360 --> 00:03:32.820\nit, and left it on.\n\n65\n00:03:32.820 --> 00:03:35.140\nAnd so we should really turn\nthat off in the access list,\n\n66\n00:03:35.140 --> 00:03:36.560\nwe can always sort that out later.\n\n67\n00:03:36.560 --> 00:03:38.120\nBut I'm just gonna turn that off.\n\n68\n00:03:38.120 --> 00:03:40.490\nI do need to remember to turn\nthat back on when I'm done,\n\n69\n00:03:40.490 --> 00:03:43.430\ncuz otherwise I might not see other\nerror messages that are coming up.\n\n70\n00:03:43.430 --> 00:03:46.930\nThe error messages are still occurring,\nI'm just not gonna see them.\n\n71\n00:03:46.930 --> 00:03:50.760\nAll right, so now, I can jump in and\ntry and find out what this problem is.\n\n72\n00:03:50.760 --> 00:03:55.050\nApparently, I've got an access list,\nand it's blocking BGP, so\n\n73\n00:03:55.050 --> 00:03:58.580\nI wanna take a look at a few things\njust before I dive too far into this.\n\n74\n00:03:58.580 --> 00:04:01.570\nI'm gonna start with show ip bgp.\n\n75\n00:04:01.570 --> 00:04:03.810\nThey told me that I'm\nnot learning any routes.\n\n76\n00:04:03.810 --> 00:04:06.070\nI wanna verify if that's true.\n\n77\n00:04:06.070 --> 00:04:09.660\nYou can do a show ip route but\nthe problem with BGP routes\n\n78\n00:04:09.660 --> 00:04:12.750\nis they do get over ridden sometimes or\nthey're incomplete.\n\n79\n00:04:12.750 --> 00:04:14.280\nThey don't make it into the routing table.\n\n80\n00:04:14.280 --> 00:04:18.340\nSo I just wanna do a show ip bgp which\nlets me see the routing table from its\n\n81\n00:04:18.340 --> 00:04:19.230\nperspective.\n\n82\n00:04:19.230 --> 00:04:21.830\nAnd when I look at it, it's empty right.\n\n83\n00:04:21.830 --> 00:04:25.490\nAnd if I do a show ip route bgp\nI imagine that's empty too.\n\n84\n00:04:25.490 --> 00:04:26.490\nAnd it sure is.\n\n85\n00:04:26.490 --> 00:04:30.600\nSo I'm not seeing any BGP\nroutes either good or bad.\n\n86\n00:04:30.600 --> 00:04:33.420\nThe show IP route will only\nshow you BGP routes that made\n\n87\n00:04:33.420 --> 00:04:35.050\nit into the routing table.\n\n88\n00:04:35.050 --> 00:04:38.090\nShow ip bgp will show\nyou all of the routes\n\n89\n00:04:38.090 --> 00:04:40.000\nregardless of whether they made\nit in the routing table or not.\n\n90\n00:04:40.000 --> 00:04:41.960\nSo that's why I started with that command.\n\n91\n00:04:41.960 --> 00:04:45.120\nI'm also gonna do a show ip bgp summary,\n\n92\n00:04:45.120 --> 00:04:47.260\nwhich is a great way\nto see your neighbors.\n\n93\n00:04:47.260 --> 00:04:51.170\nAnd I can see I've got a neighbor,\n172.14.0.3, that's the ISP.\n\n94\n00:04:51.170 --> 00:04:57.340\nBut as I look at the details, messages\nsent zero, messages received zero.\n\n95\n00:04:57.340 --> 00:04:59.680\nI've never talked to this person, right?\n\n96\n00:04:59.680 --> 00:05:01.630\nAnd if I look at the InQ and\n\n97\n00:05:01.630 --> 00:05:05.830\nOutQ, I have not learned any\nroutes from them, Up/Down, never.\n\n98\n00:05:05.830 --> 00:05:08.920\nState is active, it's active,\nI should be talking to it.\n\n99\n00:05:08.920 --> 00:05:11.610\nBut I've never actually\ncommunicated to it.\n\n100\n00:05:11.610 --> 00:05:15.590\nWhich is in line with having\nan access list blocking our traffic,\n\n101\n00:05:15.590 --> 00:05:18.610\nthat's kind of what I expected to see,\nso that's what I've got here.\n\n102\n00:05:18.610 --> 00:05:22.170\nSo I more than likely just have\nan ACL blocking this traffic.\n\n103\n00:05:22.170 --> 00:05:23.050\nLet's look at that.\n\n104\n00:05:23.050 --> 00:05:28.650\nIf I look at my topology diagram, I'm\nconnected to it via this GI0/1 interface.\n\n105\n00:05:28.650 --> 00:05:30.770\nSo that's where the ACL would need to be.\n\n106\n00:05:30.770 --> 00:05:32.390\nLet's see what we've got.\n\n107\n00:05:32.390 --> 00:05:36.740\nSo if I look at interface GI0/1's config,\n\n108\n00:05:36.740 --> 00:05:40.180\nsure enough it's got an access\ngroup called PROTECT.\n\n109\n00:05:40.180 --> 00:05:46.460\nAnd if I do a show access-list PROTECT,\nhere it is.\n\n110\n00:05:46.460 --> 00:05:50.751\nAnd I can see it's permitting some\nemail traffic, permitting web and SSL,\n\n111\n00:05:50.751 --> 00:05:52.302\npermitting pop3 and DNS.\n\n112\n00:05:52.302 --> 00:05:55.875\nAnd then blocking everything else with\na nice little log command which is a super\n\n113\n00:05:55.875 --> 00:05:58.914\nway to annoy the heck out of\nan administrator to generate too many log\n\n114\n00:05:58.914 --> 00:05:59.830\nmessages.\n\n115\n00:05:59.830 --> 00:06:06.290\nSo looking at this list I do not\nsee you know BGP in this list.\n\n116\n00:06:06.290 --> 00:06:10.180\nI do not see that TCP port 179,\nand so it's blocking it.\n\n117\n00:06:10.180 --> 00:06:13.700\nSo I just need to update this ACL to\ninclude it and that'll fix that problem.\n\n118\n00:06:13.700 --> 00:06:15.790\nWe'll still have to make sure our\nneighbor relationship comes up.\n\n119\n00:06:15.790 --> 00:06:19.300\nWe'll have to make sure we get our routes,\nbut this one looks like an ACL issue.\n\n120\n00:06:19.300 --> 00:06:21.980\nSo let's jump into our configuration.\n\n121\n00:06:21.980 --> 00:06:26.220\nAnd I'm gonna do ip access-list.\n\n122\n00:06:26.220 --> 00:06:29.040\nThis is a extended access list.\n\n123\n00:06:29.040 --> 00:06:30.180\nAnd it is called protect.\n\n124\n00:06:30.180 --> 00:06:35.970\nAnd I'm gonna start by injecting\na new line before that deny,\n\n125\n00:06:35.970 --> 00:06:39.290\nor actually I could remove the deny\nto get rid of that log message.\n\n126\n00:06:39.290 --> 00:06:41.050\nOr we could leave it in.\n\n127\n00:06:41.050 --> 00:06:45.270\nThe question isn't really asking for us\nto fix this insane amount of logging, so\n\n128\n00:06:45.270 --> 00:06:46.590\nI should probably leave it be.\n\n129\n00:06:46.590 --> 00:06:51.850\nIn real life land, I would delete line 60,\ncreate a new line 60 allowing BGP,\n\n130\n00:06:51.850 --> 00:06:54.950\nand then just not include a deny line.\n\n131\n00:06:54.950 --> 00:06:58.840\nCuz the implicit deny all will do\nexactly what this line is doing, but\n\n132\n00:06:58.840 --> 00:07:00.060\nwithout the logging.\n\n133\n00:07:00.060 --> 00:07:03.820\nThey're logging it here, which on a WAN\ninterface would generate tons of data,\n\n134\n00:07:03.820 --> 00:07:05.270\nit's probably not a good idea.\n\n135\n00:07:05.270 --> 00:07:07.320\nBut they're not telling me to fix that,\nso I'll leave it be,\n\n136\n00:07:07.320 --> 00:07:09.800\nand I'm gonna inject a line in between.\n\n137\n00:07:09.800 --> 00:07:13.190\nI'm gonna do, 55 permit TCP.\n\n138\n00:07:14.590 --> 00:07:18.630\nAnd then, I can say any any,\nif I want, because I just have this\n\n139\n00:07:18.630 --> 00:07:22.090\none neighbor to find, but\nI can also be really restrictive, too.\n\n140\n00:07:22.090 --> 00:07:25.430\nI could say allowing it from that host,\n\n141\n00:07:25.430 --> 00:07:29.650\nfrom the ISP to me, so we can be as\nrestrictive or specific as we want.\n\n142\n00:07:29.650 --> 00:07:34.930\nI'm just gonna go a little general on this\none and say, any any where the destination\n\n143\n00:07:34.930 --> 00:07:38.730\nis equal to 179, TCP 179.\n\n144\n00:07:38.730 --> 00:07:44.970\nAnd now, if I didn't know that port number\nI'd have a hard time allowing this right?\n\n145\n00:07:44.970 --> 00:07:48.872\nAnd sometimes we have some of\nthe protocols that are stored in here and\n\n146\n00:07:48.872 --> 00:07:50.158\nyou'll see BGP does.\n\n147\n00:07:50.158 --> 00:07:53.607\nSo even if you forget it you really\njust have to remember that it's TCP\n\n148\n00:07:53.607 --> 00:07:54.270\nand not UDP.\n\n149\n00:07:54.270 --> 00:07:58.550\nAnd then there's a named alias for\nBGP that we could use.\n\n150\n00:07:58.550 --> 00:08:02.520\nOr again if we had forgotten it we could\nhave just looked at those logs, cuz every\n\n151\n00:08:02.520 --> 00:08:06.850\nlog message that was popping up was\ntelling us that it was on port 179 right.\n\n152\n00:08:06.850 --> 00:08:10.450\nBut now that I've got that in place,\nif I pull up that ACL,\n\n153\n00:08:10.450 --> 00:08:14.650\nI'll do a show access-list PROTECT.\n\n154\n00:08:16.450 --> 00:08:20.410\nAnd if I spell that right that command\nwill work just a little bit better.\n\n155\n00:08:20.410 --> 00:08:21.410\nThere we go.\n\n156\n00:08:21.410 --> 00:08:24.310\nAnd now I can see that I'm\npermitting BGP traffic.\n\n157\n00:08:24.310 --> 00:08:26.530\nI've already got seven matches on it.\n\n158\n00:08:26.530 --> 00:08:28.700\nAnd now that traffic\nshould be getting through.\n\n159\n00:08:28.700 --> 00:08:31.080\nNow I've suppressed\nthe logging on my console.\n\n160\n00:08:31.080 --> 00:08:32.800\nSo I don't see that happening.\n\n161\n00:08:32.800 --> 00:08:35.320\nIt's probably safe to go ahead and\nturn that on.\n\n162\n00:08:35.320 --> 00:08:37.990\nSo I'll go ahead and say logging console.\n\n163\n00:08:37.990 --> 00:08:41.730\nBut it's probably too late for me to see\nthings like the adjacency coming up or\n\n164\n00:08:41.730 --> 00:08:42.670\nany of that stuff.\n\n165\n00:08:42.670 --> 00:08:45.410\nSo I'll use my other\ncommands to view that.\n\n166\n00:08:45.410 --> 00:08:49.320\nI'm gonna do a show ip bgp summary.\n\n167\n00:08:50.700 --> 00:08:55.340\nAnd I already saw my neighbor, but\nwhat I see now is not only do I have\n\n168\n00:08:55.340 --> 00:09:00.520\na neighbor but I've sent five messages and\nreceived seven.\n\n169\n00:09:00.520 --> 00:09:07.080\nAnd if I scroll over here,\nI've received ten prefixes on this link.\n\n170\n00:09:07.080 --> 00:09:09.560\nSo I've actually learned networks.\n\n171\n00:09:09.560 --> 00:09:12.820\nNow those networks may or may not make\nit into my routing table, I don't know.\n\n172\n00:09:12.820 --> 00:09:17.115\nBut if I do a show ip bgp I'll\nbe able to see them, and so\n\n173\n00:09:17.115 --> 00:09:21.043\nthat's what I'm gonna do next,\nis show ip bgp.\n\n174\n00:09:21.043 --> 00:09:24.207\nAnd in the output for that command,\nhere's the routes that come in and\n\n175\n00:09:24.207 --> 00:09:26.296\nremember routes that\nhave a star beside them,\n\n176\n00:09:26.296 --> 00:09:28.620\nthose are ones that made\nit into the routing table.\n\n177\n00:09:28.620 --> 00:09:30.010\nIf there's no star, it didn't.\n\n178\n00:09:30.010 --> 00:09:32.870\nActually it looks like all the routes that\nI learned made it into the routing table.\n\n179\n00:09:32.870 --> 00:09:37.570\nSo I've got several routes here that\nare coming in from BGP from that neighbor.\n\n180\n00:09:37.570 --> 00:09:43.112\nAnd if I do a show ip route bgp,\nthere they are active in my routing table.\n\n181\n00:09:43.112 --> 00:09:45.280\nAll right, and including a default route.\n\n182\n00:09:45.280 --> 00:09:47.000\nSo we're actually getting\nsome pretty good stuff there.\n\n183\n00:09:47.000 --> 00:09:50.588\nSo we've got all those routes,\nwe've learned them and now BFP is working.\n\n184\n00:09:50.588 --> 00:09:54.320\nSo it seemed like a BGP issue\naccording to the question but\n\n185\n00:09:54.320 --> 00:09:57.310\nat the end of the day this was really\njust an access-list issue right.\n\n186\n00:09:57.310 --> 00:10:01.380\nWhen ACL that was a little too\nrestrictive blocking our BGP traffic.\n\n187\n00:10:01.380 --> 00:10:03.170\nOnce we approved it we were in business.\n\n188\n00:10:03.170 --> 00:10:07.890\nNow I approved the BGP protocol itself,\nI could've just removed the ACL,\n\n189\n00:10:07.890 --> 00:10:10.650\nor I could've done a permit\nip any any in that ACL.\n\n190\n00:10:10.650 --> 00:10:13.440\nI could've just gone crazy with it and\nkilled our security.\n\n191\n00:10:13.440 --> 00:10:18.170\nBut I was specific enough\nto have proved the problem,\n\n192\n00:10:18.170 --> 00:10:20.000\nget it fixed, and get this one in play.\n\n193\n00:10:20.000 --> 00:10:23.290\nSo again, more than one solution\nto this type of problem and\n\n194\n00:10:23.290 --> 00:10:24.540\nthis one gets a pass list.\n\n195\n00:10:24.540 --> 00:10:28.950\nWe're fortunate here that we didn't have\nany really deeper dive stuff into BGP.\n\n196\n00:10:28.950 --> 00:10:30.730\nWe could've had a bad neighbor command.\n\n197\n00:10:30.730 --> 00:10:32.235\nThe remote AS could've been wrong.\n\n198\n00:10:32.235 --> 00:10:35.740\nThere's a lot of other problems in BGP\nthat could've resulted in this same\n\n199\n00:10:35.740 --> 00:10:38.390\nexact scenario, but\nwe knew to look at the ACL\n\n200\n00:10:38.390 --> 00:10:40.060\nbecause the error message was\nright there on the screen.\n\n201\n00:10:40.060 --> 00:10:41.990\nIt was popping up over and\nover and over again.\n\n202\n00:10:41.990 --> 00:10:44.110\nIt really guided us right\nto what that problem was.\n\n203\n00:10:44.110 --> 00:10:45.780\nSo that really does help out.\n\n204\n00:10:45.780 --> 00:10:48.840\nBut that wraps up this issue,\nissue number five.\n\n205\n00:10:48.840 --> 00:10:52.090\nAnd that's the last issue for\nSet 6, so that one is done.\n\n206\n00:10:52.090 --> 00:10:57.144\nBut stay tuned,\ncuz we've got set Set 7 coming up next.\n\n207\n00:10:57.144 --> 00:11:03.489\n[MUSIC]\n\n",
          "vimeoId": "151018053"
        }
      ],
      "title": "Set Six"
    },
    {
      "episodes": [
        {
          "description": "In this video, Don solves troubleshooting issue #1` from set #7. The trouble ticket states that \"Packets from PLABCSCO01 are not reaching NYCORE1 SVI VLAN 16. For example pings are failing \"",
          "length": "1748",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-7-1-set_7_issue_1-120715-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-7-1-set_7_issue_1-120715-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-7-1-set_7_issue_1-120715-1-sm.jpg",
          "title": "Set 7 Issue 1",
          "transcript": "WEBVTT\n\n1\n00:00:00.215 --> 00:00:05.723\n[MUSIC]\n\n2\n00:00:08.540 --> 00:00:11.912\nWelcome back to another troubleshooting\nsegment here on IT Pro TV.\n\n3\n00:00:11.912 --> 00:00:14.987\nToday, we're kicking off\nset number seven issue one,\n\n4\n00:00:14.987 --> 00:00:17.481\nthat means we got all\nnew topology to look at.\n\n5\n00:00:17.481 --> 00:00:18.800\nAnd this one looks like a doozy.\n\n6\n00:00:18.800 --> 00:00:20.880\nWe've got a little bit of BGP,\na little IBGP,\n\n7\n00:00:20.880 --> 00:00:22.920\na couple of neat protocols mixed in there.\n\n8\n00:00:22.920 --> 00:00:25.713\nThat we haven't seen yet\nin some of our troubleshooting episodes so\n\n9\n00:00:25.713 --> 00:00:27.431\nI'm really excited to get into this one.\n\n10\n00:00:27.431 --> 00:00:28.894\nAnd we'll start off\nwith ticket number one.\n\n11\n00:00:28.894 --> 00:00:29.666\nIt reads like this.\n\n12\n00:00:29.666 --> 00:00:35.540\nIt says, packets from Plab Cisco 01\nare not reaching NY Core 1 SVI VLAN 16.\n\n13\n00:00:35.540 --> 00:00:40.660\nWe'll see how many abbreviations we\ncan get in one troubleshooting ticket.\n\n14\n00:00:40.660 --> 00:00:42.726\nFor example pings are failing.\n\n15\n00:00:42.726 --> 00:00:45.150\nAll right so\nwhat do we take away from that statement?\n\n16\n00:00:45.150 --> 00:00:47.230\nWell first, let's go ahead and\npull up our topology so\n\n17\n00:00:47.230 --> 00:00:49.770\nwe can get an idea of what\nthis is really talking about.\n\n18\n00:00:49.770 --> 00:00:52.570\nOur topology for\nset seven is a little bit different and\n\n19\n00:00:52.570 --> 00:00:55.040\nwe have a few less devices\nto worry about here.\n\n20\n00:00:55.040 --> 00:00:58.850\nNotice that we've still got our\nthree switches down here except,\n\n21\n00:00:58.850 --> 00:01:02.330\nwe've got a layer two link between\nthese switches and a layer three link.\n\n22\n00:01:02.330 --> 00:01:05.280\nSo that's a little bit different\nthan what we've seen in other sets.\n\n23\n00:01:05.280 --> 00:01:09.610\nWe've also got BGP up here on NY edge one,\nand\n\n24\n00:01:09.610 --> 00:01:13.240\ninterior IBGP running between it and\ncore two.\n\n25\n00:01:13.240 --> 00:01:17.530\nSo a little bit of extra topology there,\nwe've got EIGRP800 in the mix,\n\n26\n00:01:17.530 --> 00:01:19.120\na few different routing protocols.\n\n27\n00:01:19.120 --> 00:01:20.749\nAll stuff we need to be aware of.\n\n28\n00:01:20.749 --> 00:01:26.310\nNow, the troubleshooting ticket is\ntelling me that we've got packets failing\n\n29\n00:01:26.310 --> 00:01:31.460\nfrom PLABCISCO01 right here and\ngoing to NYCORE1 which is right here.\n\n30\n00:01:31.460 --> 00:01:34.770\nNow, I don't necessarily know\nthe path of that traffic.\n\n31\n00:01:34.770 --> 00:01:38.010\nOne path, is that we could\nbe coming across to ACCESS1,\n\n32\n00:01:38.010 --> 00:01:41.059\ngoing right up this link and\nhitting CORE1, right?\n\n33\n00:01:41.059 --> 00:01:43.620\nThis is 192.168.16.10.\n\n34\n00:01:43.620 --> 00:01:48.590\nThey told me it's on VLAN 16 when\nthey said this is a S V I VLAN 16.\n\n35\n00:01:48.590 --> 00:01:51.781\nAnd then I can see this\nlink is VLAN 16 and so\n\n36\n00:01:51.781 --> 00:01:54.896\nI should just be able\nto jump right across.\n\n37\n00:01:54.896 --> 00:01:55.940\nBut let's assume for\n\n38\n00:01:55.940 --> 00:01:59.080\na moment that maybe spanning tree\nprotocol shut this link down.\n\n39\n00:01:59.080 --> 00:02:02.630\nThe other path is I can\njump up here to NYCORE2.\n\n40\n00:02:02.630 --> 00:02:05.210\nAnd cross one these links\nto get to the other side.\n\n41\n00:02:05.210 --> 00:02:09.090\nProbably not this top link since it's a\nlayer three link and I'm not being routed.\n\n42\n00:02:09.090 --> 00:02:12.310\nI'm a person on VLAN 16\npinging somebody on VLAN 16,\n\n43\n00:02:12.310 --> 00:02:15.280\nso it would probably be\nthis bottom link down here.\n\n44\n00:02:15.280 --> 00:02:18.020\nSo, those are really the three\nlinks I need to look at to try and\n\n45\n00:02:18.020 --> 00:02:20.830\nfind out why my ping\nis not getting across.\n\n46\n00:02:20.830 --> 00:02:26.100\nCould be a layer 2 issue, could be a layer\n3 issue, but it's pretty unlikely, right?\n\n47\n00:02:26.100 --> 00:02:28.760\nBecause I'm pinging somebody\nelse on the same VLAN as me,\n\n48\n00:02:28.760 --> 00:02:30.770\nand that means I'm not getting routed.\n\n49\n00:02:30.770 --> 00:02:34.590\nSo, regular ACLs aren't going to apply,\nbut we could have VLAN ACLs,\n\n50\n00:02:34.590 --> 00:02:36.880\nso they could be\nintercepting this traffic.\n\n51\n00:02:36.880 --> 00:02:41.458\nI do find it out that this question says,\nHackets from PLABCSCO01.\n\n52\n00:02:41.458 --> 00:02:44.900\nThey're not singling out something\nspecific like just pings.\n\n53\n00:02:44.900 --> 00:02:49.610\nSo in this case it looks like all traffic\nfrom PLABCSCO01 is not getting over to\n\n54\n00:02:49.610 --> 00:02:50.608\ncore, core 2.\n\n55\n00:02:50.608 --> 00:02:52.482\nThey're just using pings as an example.\n\n56\n00:02:52.482 --> 00:02:55.012\nSo, let's jump in and\nsee if we can't troubleshoot this and\n\n57\n00:02:55.012 --> 00:02:56.340\nif we can't figure this out.\n\n58\n00:02:56.340 --> 00:02:59.790\nThe first thing I want to do is, well,\nI guess I wanna start with the ping and\n\n59\n00:02:59.790 --> 00:03:01.940\nsee whether or not I can ping across.\n\n60\n00:03:01.940 --> 00:03:04.600\nBut the other thing I need to do is\nfind out what the path would be.\n\n61\n00:03:04.600 --> 00:03:06.667\nOnce I get to NYACESS1.\n\n62\n00:03:06.667 --> 00:03:12.227\nWhere do I go from there if I'm trying\nto get to NYCORE1's VLAN16 interface,\n\n63\n00:03:12.227 --> 00:03:17.160\nand I don't even know the IP address\nof NYCORE1's VLAN16 address.\n\n64\n00:03:17.160 --> 00:03:20.820\nSo maybe I should start there and figure\nout the IP address they're using to test\n\n65\n00:03:20.820 --> 00:03:23.440\nwith, and\nthen troubleshoot the rest beyond that.\n\n66\n00:03:23.440 --> 00:03:26.210\nSo, I'm gonna jump over to NYCORE1 and\n\n67\n00:03:26.210 --> 00:03:28.490\nI'm gonna solve the mystery\nof that IP address.\n\n68\n00:03:30.550 --> 00:03:34.948\nSo, I'll just do a quick\nshow IP interface brief.\n\n69\n00:03:34.948 --> 00:03:36.856\nAnd I'll exclude out those\nunassigned interfaces.\n\n70\n00:03:36.856 --> 00:03:43.011\nAnd so on VLAN 16, it is 192.168.16.1,\nthat's it right there.\n\n71\n00:03:43.011 --> 00:03:46.890\nAnd so that's who Key Lab Cisco\n01 is unable to contact.\n\n72\n00:03:46.890 --> 00:03:49.050\nI can see it's on VLAN 16,\nand while I'm in here,\n\n73\n00:03:49.050 --> 00:03:52.505\nI can save a little bit of time and\njust make sure that interface is up, up.\n\n74\n00:03:52.505 --> 00:03:54.906\nCuz if it was up down then we might\nhave found our problem already.\n\n75\n00:03:54.906 --> 00:03:58.774\nBut here it's up, up so\nthat's not gonna be an easy one today.\n\n76\n00:03:58.774 --> 00:04:03.840\nAll right I'm gonna jump over\nPLABCS01 where I'll just fire\n\n77\n00:04:03.840 --> 00:04:10.554\nup one of the command prompts here and\nsee if I can ping 192.168.16.1.\n\n78\n00:04:10.554 --> 00:04:12.818\nNow I'm 192.168.16.10.\n\n79\n00:04:12.818 --> 00:04:16.430\n192.168.16.1 should be on\nthe same network as me.\n\n80\n00:04:16.430 --> 00:04:19.310\nSo I should be able to send\nthem our broadcast and say,\n\n81\n00:04:19.310 --> 00:04:21.300\nwhat's the mac address for this IP?\n\n82\n00:04:21.300 --> 00:04:24.666\nAnd that node should get it and respond\nback and say, here's my mac address and\n\n83\n00:04:24.666 --> 00:04:26.000\nthen we should be able to ping.\n\n84\n00:04:27.080 --> 00:04:28.700\nBut that's not happening here.\n\n85\n00:04:28.700 --> 00:04:33.745\nAnd, if I wanna see that for\nsure I can always do an arp-a.\n\n86\n00:04:33.745 --> 00:04:34.880\nAnd there's my ARP table.\n\n87\n00:04:34.880 --> 00:04:38.990\nAnd 192.168.16.1 is not in that list.\n\n88\n00:04:38.990 --> 00:04:40.850\nSo I'm definitely not seeing.\n\n89\n00:04:40.850 --> 00:04:42.550\nI'm not getting an ARP response back.\n\n90\n00:04:42.550 --> 00:04:45.660\nIt's like that machines not even\non the same equipment as I am.\n\n91\n00:04:45.660 --> 00:04:46.650\nAll right?\n\n92\n00:04:46.650 --> 00:04:49.979\nI could also do a quick check just to\nmake sure my Subnet Mask is right.\n\n93\n00:04:51.020 --> 00:04:54.418\nBecause that's a big enough difference\nin numbers that we could be on different\n\n94\n00:04:54.418 --> 00:04:56.054\nsubnets but it looks fine to me right.\n\n95\n00:04:56.054 --> 00:04:59.170\nWe've got that standard\nslash 24 subnet mass there.\n\n96\n00:04:59.170 --> 00:05:02.090\nSo, I doubt we've got a problem\nhere on our work station.\n\n97\n00:05:02.090 --> 00:05:06.190\nBut, now I need to take a look at\nthe path we follow on the traffic.\n\n98\n00:05:06.190 --> 00:05:09.850\nNow I don't actually know the path, so\nwe're gonna have to unravel that mystery.\n\n99\n00:05:09.850 --> 00:05:13.728\nBut I do know the first step on\nmy journey is NYACCESS1, and\n\n100\n00:05:13.728 --> 00:05:16.453\nI know that my port should be on VLAN 16.\n\n101\n00:05:16.453 --> 00:05:20.713\nAnd then one of these links, at least\none if not both, of these links for\n\n102\n00:05:20.713 --> 00:05:22.420\nVLAN 16 should be active.\n\n103\n00:05:22.420 --> 00:05:24.959\nSo let's jump over to ACCESS1 and\nsee what we've got on that one.\n\n104\n00:05:26.400 --> 00:05:28.415\nAll right, jumping onto access one.\n\n105\n00:05:31.853 --> 00:05:36.853\nI'm just gonna do a quick show run for\n\n106\n00:05:36.853 --> 00:05:39.927\ninterface FA0/1.\n\n107\n00:05:39.927 --> 00:05:42.916\nI'm just looking at this\ninterface right here.\n\n108\n00:05:42.916 --> 00:05:47.209\nI wanna make sure that it's on VLAN 16 so\nthat my work station is on the right VLAN.\n\n109\n00:05:48.370 --> 00:05:49.059\nAnd sure enough it is.\n\n110\n00:05:49.059 --> 00:05:53.850\nSwitchport access vlan 16 and\nspanning-tree portfast, right.\n\n111\n00:05:53.850 --> 00:05:58.270\nSo, that's a typical access port\nright there, we should be good to go.\n\n112\n00:05:58.270 --> 00:06:01.600\nNow, I'm on VLAN 16,\nwho else is on VLAN 16?\n\n113\n00:06:01.600 --> 00:06:07.390\nIf I do a show vlan, what I'm looking for\nnow, are these two links here.\n\n114\n00:06:07.390 --> 00:06:12.072\nIt says that port 23 and\nport 24 should be on VLAN 16, and so\n\n115\n00:06:12.072 --> 00:06:17.649\nI'm going to pull up that output,\nand I'm looking for ports 23 and 24.\n\n116\n00:06:17.649 --> 00:06:19.450\nAnd sure enough they are.\n\n117\n00:06:19.450 --> 00:06:20.940\nSo all three of us are on VLAN 16, and\n\n118\n00:06:20.940 --> 00:06:23.029\nI should be able to pass\nover any of those links.\n\n119\n00:06:24.330 --> 00:06:29.260\nAnd I'm just gonna do a real quick show\nrun for interface FA0/23 and 24 and\n\n120\n00:06:29.260 --> 00:06:32.056\nthe reason I wanna look\nat these interfaces,\n\n121\n00:06:32.056 --> 00:06:34.500\nI'm just looking for anything weird.\n\n122\n00:06:34.500 --> 00:06:36.021\nAny kind of policies or\n\n123\n00:06:36.021 --> 00:06:41.600\nany kind of crazy settings that might\nbe in place that might cause a problem.\n\n124\n00:06:41.600 --> 00:06:45.022\nBut I'm disappointed because all I\nget is a nice, normal configuration.\n\n125\n00:06:45.022 --> 00:06:48.815\nSwitch board access vlan\n16 spanning-tree portfast.\n\n126\n00:06:48.815 --> 00:06:52.600\nNow because Cisco switches can\ndo dynamic trunk negotiations\n\n127\n00:06:52.600 --> 00:06:56.170\nI can't necessarily trust\nthat these are access ports.\n\n128\n00:06:56.170 --> 00:06:59.957\nThey could be showing this config but\nstill trunk afterwards and if they\n\n129\n00:06:59.957 --> 00:07:04.310\nare trunk VLANs can get pruned by VTP,\nthere's other things that could there too.\n\n130\n00:07:04.310 --> 00:07:06.488\nNot to mention old spanning\ntree is running so\n\n131\n00:07:06.488 --> 00:07:10.112\nI still need to take a look at that and\njust make sure these ports are active.\n\n132\n00:07:10.112 --> 00:07:13.672\nSo, one thing I'm gonna do is just\na quick show interface trunk so\n\n133\n00:07:13.672 --> 00:07:16.408\nI can find out if ports 23 and\n24 are trunking.\n\n134\n00:07:16.408 --> 00:07:17.099\nAnd they're not.\n\n135\n00:07:17.099 --> 00:07:19.420\nAll right, so\nthey are standard access ports.\n\n136\n00:07:19.420 --> 00:07:22.670\nThey're just moving VLAN 16 and that's it.\n\n137\n00:07:22.670 --> 00:07:25.350\nAnd that means I can do\na show spanning tree.\n\n138\n00:07:25.350 --> 00:07:26.920\nAnd just look at vlan16.\n\n139\n00:07:26.920 --> 00:07:31.760\nAnd if I do a space there that\nwill work a little better.\n\n140\n00:07:31.760 --> 00:07:32.816\nThere we go.\n\n141\n00:07:32.816 --> 00:07:36.800\nI can see that I've got port 1,\nport 23 and port 24.\n\n142\n00:07:36.800 --> 00:07:41.175\nI've got forwarding on port one,\nthat's where Cisco 01 is plugged in.\n\n143\n00:07:41.175 --> 00:07:45.122\nAnd I've got forwarding on port 23,\nport 24 is blocking.\n\n144\n00:07:45.122 --> 00:07:49.115\nI expected to see at least one blocking\nbecause we do have a loop here.\n\n145\n00:07:49.115 --> 00:07:50.563\nSo somebody's got to block.\n\n146\n00:07:50.563 --> 00:07:53.145\nSo, looking at this port 23 is active.\n\n147\n00:07:53.145 --> 00:07:56.005\nThat's this link over here and\nthis link is being held down.\n\n148\n00:07:56.005 --> 00:07:59.760\nSo now I know my traffic is\ngonna cross to this switch.\n\n149\n00:07:59.760 --> 00:08:04.110\nAnd then it's gonna cross up\nthis link over to NYCORE2.\n\n150\n00:08:04.110 --> 00:08:07.180\nSo NYCORE2 is going to\nbe our next culprit.\n\n151\n00:08:07.180 --> 00:08:12.190\nBut before I jump over to that, let me\njust do one more test from this switch and\n\n152\n00:08:12.190 --> 00:08:16.950\nsee if we have a interface, we don't.\n\n153\n00:08:16.950 --> 00:08:19.460\nIf this switch had an IP address,\nI'd like to try\n\n154\n00:08:19.460 --> 00:08:23.690\npinging from here also just to test\nconnectivity but it doesn't so.\n\n155\n00:08:23.690 --> 00:08:28.284\nWe'll leave it at that and\nmove on over to CORE2.\n\n156\n00:08:28.284 --> 00:08:33.400\nAll right, CORE2, going back to\nour typology, that's this guy.\n\n157\n00:08:33.400 --> 00:08:35.170\nI know he's the second hop of my journey,\nright?\n\n158\n00:08:35.170 --> 00:08:39.170\nSo I come out of PLABCSCO01, I go to\nACCESS1 and I go up to CORE2, right?\n\n159\n00:08:39.170 --> 00:08:40.490\nSo that's where I am right now.\n\n160\n00:08:40.490 --> 00:08:42.498\nAnd from CORE2 I should\nbe jumping over to CORE1.\n\n161\n00:08:42.498 --> 00:08:48.050\nBut on CORE 2 I immediately see\nsome DHCP snooping errors., right?\n\n162\n00:08:48.050 --> 00:08:49.680\nSo DHCP snooping is tripping,\n\n163\n00:08:49.680 --> 00:08:52.826\nit looks like we've got a rogue\nDHCP server on the network.\n\n164\n00:08:52.826 --> 00:09:00.117\nIt's telling me it's on FA1/0/22 vlan 16,\nright?\n\n165\n00:09:00.117 --> 00:09:03.409\nNow Fa1/0/22, what port is that?\n\n166\n00:09:03.409 --> 00:09:04.451\nI don't really know, we'll have to look.\n\n167\n00:09:04.451 --> 00:09:08.117\nAnd then vlan 16,\nthat's the vlan I'm working with.\n\n168\n00:09:08.117 --> 00:09:12.600\nAnd so this is a red flag for me that this\nmay actually be a problem with the system.\n\n169\n00:09:12.600 --> 00:09:16.862\nSo if I go back to my topology and\ntake a look,\n\n170\n00:09:16.862 --> 00:09:21.540\n422 is right here, that's the link\nthat's pointing back towards me, right?\n\n171\n00:09:21.540 --> 00:09:24.410\nAnd it's generating these\nDHCP snooping errors.\n\n172\n00:09:24.410 --> 00:09:27.400\nNow, what can DHCP snooping do?\n\n173\n00:09:27.400 --> 00:09:30.320\nIf it triggers an alarm,\nit can shut the interface down.\n\n174\n00:09:30.320 --> 00:09:33.200\nSo this interface could,\nin theory, be down.\n\n175\n00:09:33.200 --> 00:09:35.745\nAll right,\nI don't really know if it is, though.\n\n176\n00:09:35.745 --> 00:09:38.210\nDHCP snooping can just be set to alarm,\nand\n\n177\n00:09:38.210 --> 00:09:41.640\nif that's the case then it would\nnotify us that we had a problem but\n\n178\n00:09:41.640 --> 00:09:44.010\nit wouldn't actually stop\nthe traffic from flowing.\n\n179\n00:09:44.010 --> 00:09:45.920\nSo, this could be a red herring.\n\n180\n00:09:45.920 --> 00:09:48.190\nI know there's a DHCP\nsnooping error popping up but\n\n181\n00:09:48.190 --> 00:09:52.550\nthat might be intended behavior, though I\ndon't know if that's stopping my traffic.\n\n182\n00:09:52.550 --> 00:09:56.420\nSo back on CORE2 what I can do is\na couple of quick test to see if this is\n\n183\n00:09:56.420 --> 00:09:58.480\nactually affecting me, all right?\n\n184\n00:09:58.480 --> 00:10:04.340\nThe first thing im gonna do though is the\nerror message is coming up lets how often.\n\n185\n00:10:04.340 --> 00:10:09.950\nLooks like every 11 seconds ten or 11\nseconds which would be enough to annoy me.\n\n186\n00:10:09.950 --> 00:10:12.790\nSo sometimes, if you get messages like\nthis that are really annoying the heck out\n\n187\n00:10:12.790 --> 00:10:15.260\nof you,\nyou might need to turn off logging.\n\n188\n00:10:15.260 --> 00:10:17.086\nActually, it looks like these\nare far apart, so I can leave it be.\n\n189\n00:10:17.086 --> 00:10:22.080\nAll right,\nI'm gonna do a show IP interface brief\n\n190\n00:10:24.570 --> 00:10:28.840\nand what I'm looking for\nis port 22 and port 23.\n\n191\n00:10:28.840 --> 00:10:31.670\nThese are the two ports that I\nthink are gonna be important to me.\n\n192\n00:10:31.670 --> 00:10:34.285\nPort 22 cuz that's the port my\ntraffic's coming in on, and\n\n193\n00:10:34.285 --> 00:10:37.117\nport 23 cuz that's the way my\ntraffic should be going out again.\n\n194\n00:10:37.117 --> 00:10:43.784\nAnd so, I'm gonna look down here and\nfind 22 and 23 and here they are.\n\n195\n00:10:43.784 --> 00:10:47.200\nAnd they're both showing\na current status of up, up right?\n\n196\n00:10:47.200 --> 00:10:52.118\nSo the ports appear to be healthy and\nI'm gonna do a show run for\n\n197\n00:10:52.118 --> 00:10:55.250\ninterface 1/0/22 and for 23.\n\n198\n00:10:55.250 --> 00:11:01.800\nNow 22 is showing standard access\nport on VLAN 16, nothing crazy there.\n\n199\n00:11:01.800 --> 00:11:05.490\nAnd port 23, switchport access vlan 16,\n\n200\n00:11:05.490 --> 00:11:08.575\nswitchport mode access,\nIP arp inspection trust.\n\n201\n00:11:08.575 --> 00:11:14.250\nSo it's a trusted interface there and\nit appears to be\n\n202\n00:11:14.250 --> 00:11:18.289\nconfigured nice and normal too and there\ngoes my snooping again, which is awesome.\n\n203\n00:11:19.390 --> 00:11:21.270\nAll right, looking at this config,\n\n204\n00:11:21.270 --> 00:11:25.780\nI'm not seeing anything jumping out at me\nhere to indicate that I've got a problem.\n\n205\n00:11:25.780 --> 00:11:29.150\nAnd if I do a show interface, Fa1/0/22,\n\n206\n00:11:29.150 --> 00:11:33.430\nwe can make sure that we're not\ngetting error disabled, right?\n\n207\n00:11:33.430 --> 00:11:35.730\nAnd that's kind of my other concern.\n\n208\n00:11:35.730 --> 00:11:39.520\nIs that if DHCP Snooping or ARP Inspection\nis configured a different way,\n\n209\n00:11:39.520 --> 00:11:42.240\nit can disable a port but\nit's not like that.\n\n210\n00:11:42.240 --> 00:11:47.010\nI can see right here Fa1/0/22 is up,\nline protocol is up and connected.\n\n211\n00:11:47.010 --> 00:11:51.786\nIt's not saying error disabled,\nso I know I'm okay there.\n\n212\n00:11:51.786 --> 00:11:55.267\nAll right, we could have also done a show\ninterface status error disabled that would\n\n213\n00:11:55.267 --> 00:11:56.505\nhave brought that one up too.\n\n214\n00:11:56.505 --> 00:11:58.095\nBut, in this case, I see what I need.\n\n215\n00:11:58.095 --> 00:12:01.860\nSo I'm gonna say here that the DHCP\nsnooping, while there is a problem,\n\n216\n00:12:01.860 --> 00:12:04.785\nit's not the problem causing\nmy network to breakdown.\n\n217\n00:12:04.785 --> 00:12:08.245\nAll right, let's take a look\nat Spanning Tree then and\n\n218\n00:12:08.245 --> 00:12:10.865\nsee if it's seeing what\nwe saw on the other side.\n\n219\n00:12:10.865 --> 00:12:12.940\nNow When I was looking\nat the other switch,\n\n220\n00:12:12.940 --> 00:12:16.148\nNYACCESS1, it showed Fa0/23\nas the root port, right?\n\n221\n00:12:16.148 --> 00:12:21.620\nWhich means NYCORE2 should be the root\nof the spanning tree topology and\n\n222\n00:12:21.620 --> 00:12:24.801\nthat's why that ports up and\nthat's why I shut down my port NYCORE1.\n\n223\n00:12:24.801 --> 00:12:29.736\nCORE2, if it is the root\nshould be forwarding on 23 and\n\n224\n00:12:29.736 --> 00:12:31.989\n22 so let's see if it is.\n\n225\n00:12:33.150 --> 00:12:36.820\nAnd sure enough root would\nbe I expect it to do that.\n\n226\n00:12:36.820 --> 00:12:40.080\nAnd so it's fording on both of\nthose ports so that looks good.\n\n227\n00:12:40.080 --> 00:12:43.500\nNow this guy does have IP\naddresses I think let's find out.\n\n228\n00:12:44.520 --> 00:12:48.100\nAnd it's got IP addresses but\n\n229\n00:12:48.100 --> 00:12:51.460\nnothing on VLAN 16, so\nnot a great place to test from here.\n\n230\n00:12:51.460 --> 00:12:54.520\nI might have to whip one up to test from,\nbut for now we'll leave that be.\n\n231\n00:12:54.520 --> 00:12:56.110\nAll right, so that one looks good,\n\n232\n00:12:56.110 --> 00:12:58.580\nI didn't see anything\nglaringly jumping out at me.\n\n233\n00:13:00.290 --> 00:13:03.170\nJust pretty normal topology here.\n\n234\n00:13:03.170 --> 00:13:05.260\nAll right,\nlastly I'm gonna jump over to CORE1.\n\n235\n00:13:05.260 --> 00:13:10.310\nNow, on CORE1 I'm really just concerned\nabout this one port right here, port 23.\n\n236\n00:13:10.310 --> 00:13:12.870\nThat one needs to be up and\nallowing traffic in order for\n\n237\n00:13:12.870 --> 00:13:14.830\nmy little connection to\nmake it all through.\n\n238\n00:13:14.830 --> 00:13:20.700\nSo, over on CORE1, all right,\n\n239\n00:13:20.700 --> 00:13:24.020\nwe connected to it earlier and\nsaw that its vlan interface was up.\n\n240\n00:13:25.550 --> 00:13:29.470\nAnd I'm just gonna pull up\nthe interface configuration for\n\n241\n00:13:29.470 --> 00:13:32.490\nport number 23 and have a look there.\n\n242\n00:13:32.490 --> 00:13:33.406\nSwitch port mode or\n\n243\n00:13:33.406 --> 00:13:37.810\nswitch port access vlan 16 switch\nport mode access looks pretty normal.\n\n244\n00:13:37.810 --> 00:13:39.650\nAnd if I do a show trunk or\n\n245\n00:13:39.650 --> 00:13:43.150\na show interface trunk,\nport 23 shouldn't be trunking.\n\n246\n00:13:43.150 --> 00:13:45.810\nWell, if I can overcome my\nown spelling challenges,\n\n247\n00:13:45.810 --> 00:13:48.410\nthat is what we'll see eventually.\n\n248\n00:13:48.410 --> 00:13:50.570\nThere we go, nothing trunking and\n\n249\n00:13:50.570 --> 00:13:57.140\nI will do a show spanning-tree vlan 16 and\ntake a look here.\n\n250\n00:13:57.140 --> 00:14:00.660\nAnd we've got that we're designated\non one port, we're root on the other.\n\n251\n00:14:00.660 --> 00:14:05.220\nLooking at all of this, I'm not really\nseeing anything jump out here that would\n\n252\n00:14:05.220 --> 00:14:07.250\nstop this from communicating.\n\n253\n00:14:07.250 --> 00:14:12.367\nAs far as spanning tree is concerned, the\nlinks are good all the way through, right?\n\n254\n00:14:12.367 --> 00:14:15.715\n423 shows as root for that VLAN and\n\n255\n00:14:15.715 --> 00:14:20.850\nthat connects us to the other side,\nit seems right.\n\n256\n00:14:20.850 --> 00:14:23.280\nI don't see that breakdown and yet\n\n257\n00:14:23.280 --> 00:14:26.190\neven after all that its still not working,\nis it?\n\n258\n00:14:26.190 --> 00:14:28.492\nRight, I'm still not able to communicate.\n\n259\n00:14:28.492 --> 00:14:31.330\nNYCORE1 is on VLAN 16,\n\n260\n00:14:31.330 --> 00:14:37.140\nit does have an IP address but\nI can't see it, right?\n\n261\n00:14:37.140 --> 00:14:40.970\nSo, I'm gonna default to\nanother tactic that I've got.\n\n262\n00:14:40.970 --> 00:14:42.260\nWhen you see a problem like this,\n\n263\n00:14:42.260 --> 00:14:47.150\nwhere things get a little bit weird and\nyou're just not seeing why, right?\n\n264\n00:14:47.150 --> 00:14:50.410\nWell, what's more than\nlikely happening here is,\n\n265\n00:14:50.410 --> 00:14:52.280\nI'm sending out our broadcasts, right?\n\n266\n00:14:52.280 --> 00:14:55.950\nSo, let's say that we're PLABCSCO01,\nwe're sending out our broadcasts.\n\n267\n00:14:55.950 --> 00:14:57.620\nAnd I know I'm not getting a reply back.\n\n268\n00:14:57.620 --> 00:15:00.780\nI'm not getting a reply back\nbecause I'm not seeing it in my ARP\n\n269\n00:15:00.780 --> 00:15:01.940\ntable on that server.\n\n270\n00:15:01.940 --> 00:15:04.090\nOr vice versa I could do it from CORE1.\n\n271\n00:15:04.090 --> 00:15:09.070\nIf I go to CORE1 let's test from the Cisco\nside because on the exam you'll likely\n\n272\n00:15:09.070 --> 00:15:10.210\nhave to do it from the Cisco side.\n\n273\n00:15:10.210 --> 00:15:15.670\nSo here if I do an IP config [LAUGH].\n\n274\n00:15:15.670 --> 00:15:18.820\nGet out of Windows world here.\n\n275\n00:15:18.820 --> 00:15:25.080\nSo if I do a show IP interface brief\nI see this guy is 192.168.16.1 and\n\n276\n00:15:25.080 --> 00:15:31.195\nif I do a ping to 192.168.16.10,\nI get nothing, right?\n\n277\n00:15:31.195 --> 00:15:35.090\nThat first maybe I was waiting for\nan odd broadcast to come back but\n\n278\n00:15:35.090 --> 00:15:38.520\nhere I can tell we're actually dead,\nwe're not getting there, right?\n\n279\n00:15:38.520 --> 00:15:40.520\nBut what that did,\nis something interesting.\n\n280\n00:15:40.520 --> 00:15:46.170\nIf I do a show interface VLAN 16, I can\nspot this switches MAC address, right?\n\n281\n00:15:46.170 --> 00:15:49.700\nEvery switch has a MAC address on\nevery interface, and heres mine, okay?\n\n282\n00:15:49.700 --> 00:15:54.065\nAnd what I'm gonna do is I'm gonna take\nmy most favorite trouble shooting tool,\n\n283\n00:15:54.065 --> 00:15:57.220\nthe pen and I'm gonna write\ndown the MAC address, right?\n\n284\n00:15:57.220 --> 00:16:01.690\nAnd I really that last four digits, that's\nenough to get something close to unique.\n\n285\n00:16:01.690 --> 00:16:04.170\nBut I'm gonna write the whole thing down,\njust to be careful.\n\n286\n00:16:04.170 --> 00:16:08.963\nAll right, when I tried to do that ping,\nI should have sent out an ARP broadcast.\n\n287\n00:16:08.963 --> 00:16:12.814\nAnd regardless of whether it made it\nall the way to the other end or not,\n\n288\n00:16:12.814 --> 00:16:16.341\nthe switches in between should\nhave heard that ARP broadcast and\n\n289\n00:16:16.341 --> 00:16:18.860\nadded me to the MAC address table.\n\n290\n00:16:18.860 --> 00:16:21.510\nAnd so I'm going to look at the MAC\naddress table on each of switches and\n\n291\n00:16:21.510 --> 00:16:24.430\nsee where it stops,\nsee who didn't get my reply.\n\n292\n00:16:24.430 --> 00:16:27.726\nAnd I have to do this within five minutes,\notherwise it's going to age out, right, so\n\n293\n00:16:27.726 --> 00:16:28.690\nI can't stall too long.\n\n294\n00:16:28.690 --> 00:16:33.796\nLet me jump over into NYCORE2 and\nwe'll start there.\n\n295\n00:16:33.796 --> 00:16:39.694\nNow NYCORE2 is the one who's having\nthe DHCP snooping messages pop up,\n\n296\n00:16:39.694 --> 00:16:43.379\nand I'm gonna do a show mac address-table.\n\n297\n00:16:43.379 --> 00:16:48.004\nAnd I'm gonna include lines with, and\nI'll just do the last four digits, 6042.\n\n298\n00:16:48.004 --> 00:16:49.370\nThere we go, all right.\n\n299\n00:16:49.370 --> 00:16:54.434\nSo I see that I learned\nthe mac address of CORE1 right\n\n300\n00:16:54.434 --> 00:17:00.087\nhere on my Fa1/0/23, right,\nso I did hear it here.\n\n301\n00:17:00.087 --> 00:17:04.500\nNow let's go to ACCESS1,\nand do the same thing.\n\n302\n00:17:04.500 --> 00:17:09.523\nSo on ACCESS1,\nI'm gonna do a show mac address-table,\n\n303\n00:17:09.523 --> 00:17:12.504\nand I'm gonna include 6042.\n\n304\n00:17:13.640 --> 00:17:15.770\nAnd I learned it here, on my port 23.\n\n305\n00:17:15.770 --> 00:17:21.460\nAnd so going back here,\nI saw where CORE2 learned it,\n\n306\n00:17:21.460 --> 00:17:25.690\nright on that port, and\nACCESS 1 learned it, right on that port.\n\n307\n00:17:25.690 --> 00:17:28.550\nSo that means it's making it\nall the way back to here.\n\n308\n00:17:28.550 --> 00:17:30.860\nIf it's making it back to here,\nif I can see that MAC address,\n\n309\n00:17:30.860 --> 00:17:34.230\nif I'm learning that it's out there,\nwhy can't I get there?\n\n310\n00:17:34.230 --> 00:17:37.640\nWell, now I've got to go the other\ndirection and see where the breakdown is.\n\n311\n00:17:38.700 --> 00:17:42.030\nSo we go back here to PLABCSCO01 and\nkind of go the other way.\n\n312\n00:17:42.030 --> 00:17:47.337\nNow on PLABCSCO01, I ran an ipconfig\nearlier, but in Windows you have\n\n313\n00:17:47.337 --> 00:17:52.860\nto do an ipconfig/all to get\neverything including the MAC address.\n\n314\n00:17:52.860 --> 00:17:56.590\nAnd so I'm gonna do that, and here we go,\n\n315\n00:17:56.590 --> 00:18:00.690\nwe can find the MAC address and\nagain, I'm just gonna jot that down.\n\n316\n00:18:00.690 --> 00:18:04.068\nWe'll just do the last four here,\nthat 4c1a,\n\n317\n00:18:04.068 --> 00:18:09.280\nall right, and I'm gonna repeat that ping.\n\n318\n00:18:09.280 --> 00:18:14.336\nOn a Windows box we can just do like a -t\non the ping, it'll keep pinging forever.\n\n319\n00:18:14.336 --> 00:18:17.610\nSo I'm just gonna let that run and\nthey're gonna keep failing.\n\n320\n00:18:17.610 --> 00:18:20.270\nBut now I can jump over to NYACCESS1 and\n\n321\n00:18:20.270 --> 00:18:23.390\nlet's see if that's making it into\nour mac address-table, all right.\n\n322\n00:18:23.390 --> 00:18:29.150\nAnd so I can do show mac address-table and\ninclude 4c1a, all right.\n\n323\n00:18:29.150 --> 00:18:32.421\nAnd there it is on port 1 like I expected.\n\n324\n00:18:32.421 --> 00:18:37.058\nNow that traffic comes in port 1, it\nshould be exiting port 23 over to NYCORE2,\n\n325\n00:18:37.058 --> 00:18:39.460\nNYCORE2 should be learning on port 22.\n\n326\n00:18:39.460 --> 00:18:42.629\nSo let's go look at NYCORE2 and\nsee if that's happening.\n\n327\n00:18:50.004 --> 00:18:54.000\nSo I'm gonna do a show mac address-table\nand I'm gonna include 4c1a.\n\n328\n00:18:54.000 --> 00:19:00.640\nAnd there we go, it's showing up\non port 22 like we expected, okay?\n\n329\n00:19:00.640 --> 00:19:04.230\nAnd then the last leg of that journey is,\n\n330\n00:19:04.230 --> 00:19:08.400\nit should cross port 23 here over to\nCORE1 and we should learn it there.\n\n331\n00:19:08.400 --> 00:19:12.559\nAnd if I look on CORE1 and\njust do the same thing,\n\n332\n00:19:12.559 --> 00:19:18.254\nshow mac address-table, and\nI'll include 4c1a, all right?\n\n333\n00:19:18.254 --> 00:19:20.470\nIt's not making it here.\n\n334\n00:19:20.470 --> 00:19:24.480\nSo it's stopping before it\ngets all the way over here.\n\n335\n00:19:24.480 --> 00:19:29.890\nAnd if I go back to my topology, that\nmeans on NYCORE2 something is happening.\n\n336\n00:19:29.890 --> 00:19:34.610\nWhere the MAC address for this machine,\nor just communications from this machine,\n\n337\n00:19:34.610 --> 00:19:41.130\nthey cross over to ACCESS1, they cross up\nto CORE2, and then they stop, all right.\n\n338\n00:19:41.130 --> 00:19:46.824\nNow, because this is intra-VLAN traffic,\nit's VLAN traffic within a single VLAN,\n\n339\n00:19:46.824 --> 00:19:50.760\nit's not going to be a routing issue,\nright, or extremely unlikely.\n\n340\n00:19:50.760 --> 00:19:54.128\nSo at this point it's gotta\nbe something Layer 2.\n\n341\n00:19:54.128 --> 00:19:57.615\nAnd I just verified the MAC address of\nCORE1 was able to make it in the MAC\n\n342\n00:19:57.615 --> 00:19:59.837\naddress table all the way\nto the last switch.\n\n343\n00:19:59.837 --> 00:20:03.754\nBut the MAC address of this work\nstation isn't, that's really weird.\n\n344\n00:20:03.754 --> 00:20:07.933\nIt's not true uni-directional traffic\nbecause I am actually getting a majority\n\n345\n00:20:07.933 --> 00:20:08.546\nof the way.\n\n346\n00:20:08.546 --> 00:20:12.299\nBut something's happening here on CORE2\nto stop the communication going the rest\n\n347\n00:20:12.299 --> 00:20:12.840\nof the way.\n\n348\n00:20:12.840 --> 00:20:15.720\nNow, what could do that?\n\n349\n00:20:15.720 --> 00:20:19.820\nWell, I know I've been ignoring that\nDHCP snooping error this whole time,\n\n350\n00:20:19.820 --> 00:20:24.660\nbut it might not be DHCP\nsnooping after all.\n\n351\n00:20:24.660 --> 00:20:30.629\nIn DHCP snooping, one thing you'll\nnotice in the error here, see this DAI?\n\n352\n00:20:30.629 --> 00:20:34.334\nDHCP snooping is the process that\nwe turn on that enables this, and\n\n353\n00:20:34.334 --> 00:20:36.990\nthat let's us monitor for\nrogue DHCP servers.\n\n354\n00:20:36.990 --> 00:20:39.150\nAnd I said DHCP is not my problem,\nI'm gonna ignore that.\n\n355\n00:20:39.150 --> 00:20:45.110\nBut there's another part of DHCP\nsnooping called dynamic ARP inspection.\n\n356\n00:20:45.110 --> 00:20:49.650\nAnd what dynamic ARP inspection does is,\nit says if I learn a MAC address for\n\n357\n00:20:49.650 --> 00:20:51.720\na particular IP on a particular port, and\n\n358\n00:20:51.720 --> 00:20:55.170\nsomeone else tries to take\nthat MAC address, I can\n\n359\n00:20:55.170 --> 00:20:59.450\nrecognize that as not being right, like\na spoofing attack, and I can block it.\n\n360\n00:20:59.450 --> 00:21:03.660\nAnd so it might be thinking that\nwe're trying to spoof ourselves and\n\n361\n00:21:03.660 --> 00:21:05.770\nthat MAC address is showing up on port 22.\n\n362\n00:21:05.770 --> 00:21:10.880\nAnd then we're suppressing it and stopping\nit from going the rest of the way.\n\n363\n00:21:10.880 --> 00:21:15.900\nSo I think we need to take look at\nthat DHCP snooping configuration\n\n364\n00:21:15.900 --> 00:21:17.400\nto get a better idea.\n\n365\n00:21:17.400 --> 00:21:21.040\nAnd just to stop these errors on my\nscreen, I'm gonna go into config and\n\n366\n00:21:21.040 --> 00:21:25.580\ndo a no logging console, just to get those\nto stop popping up every few seconds, or\n\n367\n00:21:25.580 --> 00:21:27.270\nthey're gonna drive me crazy.\n\n368\n00:21:27.270 --> 00:21:32.046\nAll right, and now that I've done that,\nlet me just do a show running-config.\n\n369\n00:21:33.546 --> 00:21:35.519\nAnd we'll take a look\nat our configurations,\n\n370\n00:21:35.519 --> 00:21:37.870\nsee if we can't spot the issue in here,\nokay?\n\n371\n00:21:37.870 --> 00:21:40.230\nNow most of our configuration's\ngonna be pretty straightforward,\n\n372\n00:21:40.230 --> 00:21:43.200\nI'm not expecting to see anything\ntoo crazy jump out at me.\n\n373\n00:21:43.200 --> 00:21:48.450\nHere I've got some spanning-tree, I do\nhave spanning-tree vlan 16 priority 4096.\n\n374\n00:21:48.450 --> 00:21:52.810\nSo this switch is set with the lowest\npriority that you're allowed to set.\n\n375\n00:21:52.810 --> 00:21:55.200\nIf you go zero it doesn't work right.\n\n376\n00:21:55.200 --> 00:21:57.590\nSo that's really the best one,\nthis guy is going to be the root,\n\n377\n00:21:57.590 --> 00:22:00.680\nand I've been seeing that\nit is indeed the root.\n\n378\n00:22:00.680 --> 00:22:02.340\nSo that's not too crazy.\n\n379\n00:22:02.340 --> 00:22:07.089\nScroll up just a little bit, here we've\ngot ip arp inspection for vlan 16-17.\n\n380\n00:22:07.089 --> 00:22:09.797\nAll right, so\nwe are inspecting that traffic.\n\n381\n00:22:09.797 --> 00:22:13.421\nAnd then as we look down a little further,\n\n382\n00:22:13.421 --> 00:22:18.505\nI'm seeing pretty typical\nconfigurations down the way.\n\n383\n00:22:18.505 --> 00:22:24.713\nAnd so far nothing jumping\nout here as a real problem.\n\n384\n00:22:28.130 --> 00:22:32.100\nYeah, I actually really did expect to find\nsomething a little more amazing than that.\n\n385\n00:22:32.100 --> 00:22:33.620\nSo [LAUGH] what I was looking for\n\n386\n00:22:33.620 --> 00:22:36.160\nwas potentially to have\na hard coded MAC address.\n\n387\n00:22:36.160 --> 00:22:39.220\nRight, like a static MAC put in or\nsomething like that and\n\n388\n00:22:39.220 --> 00:22:42.040\nI'm kind of surprised to\nnot see any of that so.\n\n389\n00:22:43.870 --> 00:22:47.200\nYeah, it looks like ARP Inspection\nis not our problem on this one.\n\n390\n00:22:48.590 --> 00:22:51.200\nSo let's see,\nwhat else could be causing our problem?\n\n391\n00:22:51.200 --> 00:22:54.240\nLet's take a look over\nat NYCORE1 real quick.\n\n392\n00:22:54.240 --> 00:23:00.640\nThere is the possibility that\nthe MAC address is clearing NYCORE2,\n\n393\n00:23:00.640 --> 00:23:04.290\nbeing sent to NYCORE1, and\nNYCORE1 is rejecting it.\n\n394\n00:23:04.290 --> 00:23:06.040\nThat's a possibility also.\n\n395\n00:23:06.040 --> 00:23:07.380\nSo we'll go and take a look at it and\n\n396\n00:23:07.380 --> 00:23:09.350\nsee if anything jumps out\nin the configuration here.\n\n397\n00:23:10.710 --> 00:23:16.087\nSo on NYCORE1,\nI'm gonna do a show running-config.\n\n398\n00:23:16.087 --> 00:23:19.172\nAnd we'll basically repeat\nthe process here, looking through for\n\n399\n00:23:19.172 --> 00:23:22.030\nanything that jumps out at\nus as being kinda crazy.\n\n400\n00:23:22.030 --> 00:23:23.610\nAnd just looking at it so far,\n\n401\n00:23:23.610 --> 00:23:26.500\nI'm seeing pretty much normal stuff,\nnothing too crazy.\n\n402\n00:23:26.500 --> 00:23:29.904\nWe've got spanning-tree configured,\nper vlan, spanning-tree and\n\n403\n00:23:29.904 --> 00:23:31.420\nactually that's a good point.\n\n404\n00:23:31.420 --> 00:23:34.210\nI haven't been paying attention\ntoo much to the different\n\n405\n00:23:34.210 --> 00:23:36.490\ntypes of spanning-tree\nthat we could be running.\n\n406\n00:23:36.490 --> 00:23:40.047\nI know that NYCORE2\nshowed up as being root.\n\n407\n00:23:40.047 --> 00:23:43.579\nBut there's also the possibility that\none's set up for rapid spanning-tree and\n\n408\n00:23:43.579 --> 00:23:45.610\none's just regular spanning-tree.\n\n409\n00:23:45.610 --> 00:23:47.799\nWe'll have to see,\nif we still don't find our problem.\n\n410\n00:23:49.010 --> 00:23:51.010\nAll right, so continuing to look here.\n\n411\n00:23:51.010 --> 00:23:53.632\nLooks like we have a pretty\nstraightforward interface configuration.\n\n412\n00:23:53.632 --> 00:23:57.620\nI don't see any security options or\nanything too crazy like that.\n\n413\n00:23:57.620 --> 00:24:03.580\nAnd yeah, that one that one\nlooks pretty Pretty okay also.\n\n414\n00:24:03.580 --> 00:24:05.170\nThat'll be my official\ntech term of the day.\n\n415\n00:24:05.170 --> 00:24:06.850\nPretty okay.\n\n416\n00:24:06.850 --> 00:24:07.420\nSo.\nAll right.\n\n417\n00:24:08.970 --> 00:24:11.710\nIt looks like they've cooked up a pretty\ngood troubleshooting problem for\n\n418\n00:24:11.710 --> 00:24:13.910\nus on this one.\n\n419\n00:24:13.910 --> 00:24:14.590\nI am curious.\n\n420\n00:24:14.590 --> 00:24:16.980\nLet's doublecheck our spanning tree.\n\n421\n00:24:16.980 --> 00:24:18.500\nWith spanning tree,\nusually if you have a problem,\n\n422\n00:24:18.500 --> 00:24:22.130\nit manifests itself as having a port\nblocking that shouldn't be blocking.\n\n423\n00:24:22.130 --> 00:24:24.110\nAnd in my case,\neverything seemed to be fine.\n\n424\n00:24:24.110 --> 00:24:26.290\nI didn't spot any actual loop or\nanything like that.\n\n425\n00:24:26.290 --> 00:24:27.840\nSo I doubt that's our issue.\n\n426\n00:24:28.990 --> 00:24:31.560\nAnd we talked about\ndynamic arp inspection.\n\n427\n00:24:31.560 --> 00:24:33.400\nThere's an easy way to test whether or\nnot that's a problem.\n\n428\n00:24:33.400 --> 00:24:36.230\nWe can always just turn it off and\nsee if the problem goes away.\n\n429\n00:24:36.230 --> 00:24:39.040\nTurn it back on and\nsee if a problem comes back.\n\n430\n00:24:39.040 --> 00:24:40.910\nThat's kind of one way to resolve it.\n\n431\n00:24:40.910 --> 00:24:45.410\nI left PLABCSCO01 here just\ndoing a constant ping.\n\n432\n00:24:45.410 --> 00:24:47.250\nSo it's running in the background.\n\n433\n00:24:47.250 --> 00:24:50.286\nAnd if I go over to Core 2,\n\n434\n00:24:50.286 --> 00:24:55.807\nthe commanding question is,\nlet's see here.\n\n435\n00:24:59.367 --> 00:25:04.050\nLet's do, There we go.\n\n436\n00:25:04.050 --> 00:25:08.550\nWe've got that IP arp\ninspection VLAN 16 through 17.\n\n437\n00:25:08.550 --> 00:25:12.370\nOh, you know what, I forgot about\nsomething kind of important.\n\n438\n00:25:12.370 --> 00:25:16.510\nAll right, so,\nwith arp inspection turned on,\n\n439\n00:25:16.510 --> 00:25:22.480\nwhat we're expecting is an access port\nshould only be carrying a single IP.\n\n440\n00:25:22.480 --> 00:25:23.040\nAll right.\n\n441\n00:25:23.040 --> 00:25:24.220\nI'm glad I ran this command, though,\n\n442\n00:25:24.220 --> 00:25:26.580\nI 've stumbled on the problem\naccidentally, I think.\n\n443\n00:25:26.580 --> 00:25:32.120\nSo, we expect an access port to have one\nIP, the problem is, in our topology here,\n\n444\n00:25:32.120 --> 00:25:37.220\nour trunks are actually set\nup as access ports, right?\n\n445\n00:25:37.220 --> 00:25:38.810\nThis is an access for VLAN 16.\n\n446\n00:25:38.810 --> 00:25:40.820\nThis is access for VLAN 16.\n\n447\n00:25:40.820 --> 00:25:44.330\nNow, up here,\nI'm not having a problem because I've got\n\n448\n00:25:45.860 --> 00:25:48.890\nthis guy right here,\nIP arp inspection trust.\n\n449\n00:25:48.890 --> 00:25:50.980\nI'm trusting that interface.\n\n450\n00:25:50.980 --> 00:25:55.130\nAnd let me just make sure that is actually\nport 23 that's returning that command.\n\n451\n00:25:55.130 --> 00:25:59.180\nSo, I'm gonna do a show run for\ninterface FA1/0/23 And\n\n452\n00:25:59.180 --> 00:26:01.420\nsure enough that one's being trusted,\nokay?\n\n453\n00:26:01.420 --> 00:26:03.510\nSo we're trusting it because it's a trunk.\n\n454\n00:26:03.510 --> 00:26:06.350\nI mean it's not actually a trunk, but we\nknow it's going to be carrying traffic for\n\n455\n00:26:06.350 --> 00:26:08.320\nmore than one system.\n\n456\n00:26:08.320 --> 00:26:10.180\nBut this link down here, port 22.\n\n457\n00:26:10.180 --> 00:26:12.170\nThat one.\n\n458\n00:26:12.170 --> 00:26:17.160\nI bet we'll see it's trusted, because\nit didn't come back any other command.\n\n459\n00:26:17.160 --> 00:26:18.554\nSo I look at FA1/0/22.\n\n460\n00:26:19.590 --> 00:26:20.390\nThere we go.\n\n461\n00:26:20.390 --> 00:26:21.520\nIt's not trusted.\n\n462\n00:26:21.520 --> 00:26:25.550\nThat means it's expecting only\none MAC address on there as you\n\n463\n00:26:25.550 --> 00:26:29.950\nwould expect to see with arp inspection\nwith just a regular access client.\n\n464\n00:26:29.950 --> 00:26:31.475\nBut I'm using it as a trunk.\n\n465\n00:26:31.475 --> 00:26:36.345\nSo I'll bet if we just add this one to\nour trusted list, that'll allow more than\n\n466\n00:26:36.345 --> 00:26:39.745\none MAC address on the interface,\nand I bet that'll solve our problem.\n\n467\n00:26:39.745 --> 00:26:41.445\nSo let's get in there and\nmake that change.\n\n468\n00:26:41.445 --> 00:26:43.515\nI'm gonna go into fa1/0/22.\n\n469\n00:26:43.515 --> 00:26:48.075\nI'll do an IP arp inspection trust.\n\n470\n00:26:49.115 --> 00:26:52.268\nAnd I should be able to\nturn on logging console now\n\n471\n00:26:55.147 --> 00:26:59.149\nBecause now that I trust that interface,\nnow I should start learning MAC addresses\n\n472\n00:26:59.149 --> 00:27:01.830\non, or\nallowing the MAC addresses to propagate.\n\n473\n00:27:01.830 --> 00:27:03.930\nAnd we should see that pass on through.\n\n474\n00:27:03.930 --> 00:27:06.890\nNow I'm gonna give that a moment, because\nMAC address changes like this usually\n\n475\n00:27:06.890 --> 00:27:10.000\ndo take a moment, but\nwe can repeat what I did before,\n\n476\n00:27:10.000 --> 00:27:14.870\nwhich is to go to each switch in the path\nstarting with Access1, then Core2,\n\n477\n00:27:14.870 --> 00:27:17.870\nthen Core1, looking to see if that\nMAC address shows up in the table.\n\n478\n00:27:17.870 --> 00:27:22.100\nAnd I'll do show MAC address table,\nI'll include anybody with 4c1a.\n\n479\n00:27:22.100 --> 00:27:24.628\nSo here I am, on Access1,\njust like I was before.\n\n480\n00:27:26.465 --> 00:27:29.300\nAnd then, we'll jump over to Core2.\n\n481\n00:27:29.300 --> 00:27:34.110\nCore2 was able to see it before, also,\nright, so I expect that to still turn up.\n\n482\n00:27:34.110 --> 00:27:35.410\nAnd there it is on port 22.\n\n483\n00:27:35.410 --> 00:27:43.310\nAnd then what I'm hoping is that we're\nnow showing up over here on Core1.\n\n484\n00:27:43.310 --> 00:27:44.260\nAnd so I'll just do a check.\n\n485\n00:27:44.260 --> 00:27:45.930\nAnd sure enough, there it is.\n\n486\n00:27:45.930 --> 00:27:48.260\nAnd I'll bet our ping just started.\n\n487\n00:27:48.260 --> 00:27:52.640\nLet's jump back to the Cisco sever,\nand sure enough, there it is.\n\n488\n00:27:52.640 --> 00:27:55.540\nWe're able to ping across and\nthere it goes.\n\n489\n00:27:55.540 --> 00:27:58.730\nSo that one turned out to\nbe a bit of a tricky one.\n\n490\n00:27:58.730 --> 00:28:03.350\nEverything looked fine from a quick\nglance, right, I was expecting a VLAN ACL\n\n491\n00:28:03.350 --> 00:28:07.030\nor some other kind of restriction\nlike a port security restriction.\n\n492\n00:28:07.030 --> 00:28:09.120\nBut in this case it came\ndown to that arp inspection.\n\n493\n00:28:09.120 --> 00:28:12.250\nAnd I didn't think to\nlook there first because.\n\n494\n00:28:12.250 --> 00:28:17.220\nDHCP snooping is the error message and\nI wasn't having a DHCP problem right?\n\n495\n00:28:17.220 --> 00:28:20.750\nBut we have to remember that aro\ninspection is actually a sub setting\n\n496\n00:28:20.750 --> 00:28:25.950\nof DHCP snooping and it builds off of\nthat so its kind of a tricky one there,\n\n497\n00:28:25.950 --> 00:28:28.420\nbut now that we trusted that port\nits allowing that to happen.\n\n498\n00:28:28.420 --> 00:28:31.580\nWhen you use aro inspection,\nyou need to trust all of your trunks.\n\n499\n00:28:31.580 --> 00:28:35.550\nAny trunk link In this case we had access\nports that we were treating as trunks and\n\n500\n00:28:35.550 --> 00:28:38.250\nthat's why we had to go through\nthat extra step of trusting it and\n\n501\n00:28:38.250 --> 00:28:39.070\nonce it was done it was there.\n\n502\n00:28:39.070 --> 00:28:42.600\nNow I only made that change on Core2\nbecause that's the only place I was\n\n503\n00:28:42.600 --> 00:28:43.940\nrunning arp inspection.\n\n504\n00:28:43.940 --> 00:28:46.650\nIf I was running arp inspection on the\nother switches I would have had to turn it\n\n505\n00:28:46.650 --> 00:28:50.430\non there also to make sure that we had\nconsistent behavior across the network.\n\n506\n00:28:50.430 --> 00:28:51.970\nBut in this case that solves the problem.\n\n507\n00:28:51.970 --> 00:28:54.030\nNow we're able to ping across the link.\n\n508\n00:28:54.030 --> 00:28:55.220\nAnd we're in business.\n\n509\n00:28:55.220 --> 00:28:56.180\nSo that will wrap this one up.\n\n510\n00:28:56.180 --> 00:28:57.300\nHope you guys enjoyed it.\n\n511\n00:28:57.300 --> 00:28:57.870\nStay tuned.\n\n512\n00:28:57.870 --> 00:29:03.402\nWe've got more trouble\nshooting issues coming up.\n\n513\n00:29:03.402 --> 00:29:07.650\n>> [SOUND]\n\n",
          "vimeoId": "151018051"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #2` from set #7. The trouble ticket states that \"You are unable to see the route for 192.168.16.0 on NYCORE2 but NYCORE1 can see the route for 192.168.17.0, i.e. NYCORE1 and NYCORE2 are exchanging routes across their layer 3 link. \"",
          "length": "600",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-7-2-set_7_issue_2-120715-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-7-2-set_7_issue_2-120715-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-7-2-set_7_issue_2-120715-1-sm.jpg",
          "title": "Set 7 Issue 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.025 --> 00:00:06.088\n[SOUND] All right, welcome back to another\n\n2\n00:00:06.088 --> 00:00:11.814\ntroubleshooting episode on ITProTV.\n\n3\n00:00:11.814 --> 00:00:15.398\nIt's time for Set 7, Issue 2, and\nwe've got a troubleshooting ticket.\n\n4\n00:00:15.398 --> 00:00:17.420\nLooks like we do have\na routing issue this time.\n\n5\n00:00:17.420 --> 00:00:21.790\nThe ticket reads,\nyou are unable to see the route for\n\n6\n00:00:21.790 --> 00:00:25.467\n192.168.16.0 on NYCORE2 but\n\n7\n00:00:25.467 --> 00:00:30.570\nNYCORE1 can see the route for\n192.168.17.0.\n\n8\n00:00:30.570 --> 00:00:35.570\nIt says, for example, NYCORE1 and\n\n9\n00:00:35.570 --> 00:00:40.130\nNYCORE2 are exchanging routes\nacross their layer three link.\n\n10\n00:00:40.130 --> 00:00:41.740\nWhich is kind of interesting.\n\n11\n00:00:41.740 --> 00:00:44.960\nSo, the question is worded\na little strange here.\n\n12\n00:00:44.960 --> 00:00:46.360\nSo, let's go to our topology, and\n\n13\n00:00:46.360 --> 00:00:48.930\nsee if we can't kind of unravel\nwhat they're talking about here.\n\n14\n00:00:48.930 --> 00:00:54.590\nBasically, what's going on,\nis on NYCORE2, we have a VLAN, VLAN 17.\n\n15\n00:00:54.590 --> 00:00:56.850\nAnd VLAN 17 is 192.168.17.0/24.\n\n16\n00:00:56.850 --> 00:01:00.542\nAnd it's present right here in core 2.\n\n17\n00:01:00.542 --> 00:01:03.510\nIt is not present anywhere else,\njust on this switch.\n\n18\n00:01:04.770 --> 00:01:09.170\nAnd then, on this switch, NYCORE1,\nwe have 192.168.16.0/24 and\n\n19\n00:01:09.170 --> 00:01:14.960\nthat's actually present here and\ndown here with this server.\n\n20\n00:01:14.960 --> 00:01:17.401\nRight?\nThese guys carry the VLAN for it but\n\n21\n00:01:17.401 --> 00:01:21.236\nthey're not seeing it from\na layer three perspective, right?\n\n22\n00:01:21.236 --> 00:01:22.450\nJust from layer two.\n\n23\n00:01:22.450 --> 00:01:24.036\nSo, 192.168.17 is here.\n\n24\n00:01:24.036 --> 00:01:26.240\nAnd .16 is here.\n\n25\n00:01:26.240 --> 00:01:30.380\nAnd these two guys are exchanging\nroutes over this FA1/0/24 link.\n\n26\n00:01:30.380 --> 00:01:33.730\nThey've got a layer three link\nbetween the two switches and\n\n27\n00:01:33.730 --> 00:01:35.268\nthey're exchanging routes.\n\n28\n00:01:35.268 --> 00:01:37.680\nNow, it's kinda hard to see\nhere in the topology, but\n\n29\n00:01:37.680 --> 00:01:40.370\nthey way they're exchanging\nroutes is this EIGRP 800.\n\n30\n00:01:40.370 --> 00:01:43.910\nSo, they're running EIGRP and\nexchanging routes, and\n\n31\n00:01:43.910 --> 00:01:48.870\nthey're saying that NYCORE1 Is\nlearning 192.168.17.\n\n32\n00:01:48.870 --> 00:01:51.680\nIt's learning it from this guy, but\n\n33\n00:01:51.680 --> 00:01:55.950\nthe other direction NYCORE2 is not\nlearning 192.168.16 from NYCORE1.\n\n34\n00:01:55.950 --> 00:01:57.830\nSo that's our problem.\n\n35\n00:01:57.830 --> 00:02:02.460\nWe've got routes going one way,\nbut not another.\n\n36\n00:02:02.460 --> 00:02:03.560\nSo the first thing I wanna do,\n\n37\n00:02:03.560 --> 00:02:06.240\ncuz the wording of the question\nis a little strange here.\n\n38\n00:02:06.240 --> 00:02:09.430\nThe first thing I wanna do is just\nverify the facts as I read them.\n\n39\n00:02:09.430 --> 00:02:11.012\nRight?\nWhat they're explaining to me.\n\n40\n00:02:11.012 --> 00:02:14.210\nI wanna see it, and make sure that\nI'm seeing what they're telling me.\n\n41\n00:02:14.210 --> 00:02:18.510\nIf I look at NYCORE1,\nI should see that it's running EIGRP 800,\n\n42\n00:02:18.510 --> 00:02:23.100\nand it's learning the 192.168.17 network,\nand\n\n43\n00:02:23.100 --> 00:02:27.082\nit's learning it via port\n24 to the other switch.\n\n44\n00:02:27.082 --> 00:02:30.490\nAll right, so let's verify that before\nwe dive too deep into this problem.\n\n45\n00:02:32.810 --> 00:02:33.880\nSome of the things I need to know.\n\n46\n00:02:33.880 --> 00:02:36.805\nI need to know the configuration\nof that port 24 so\n\n47\n00:02:36.805 --> 00:02:40.886\nI can kind of understand what's really\ngoing on and if we do a show run for\n\n48\n00:02:40.886 --> 00:02:46.619\ninterface 1/0/24, I can see that it's\n192.168.1.1 with a /30 subnet mass.\n\n49\n00:02:46.619 --> 00:02:50.510\nThat means there's only one other\nvalid ip here, which is .2.\n\n50\n00:02:50.510 --> 00:02:55.270\nThe other side of this line\nshould be 192.168.1.2.\n\n51\n00:02:55.270 --> 00:02:59.090\nAnd if I do a show ip route,\n\n52\n00:02:59.090 --> 00:03:05.210\nI expect to see a route from\n192.168.17 which I do right here.\n\n53\n00:03:05.210 --> 00:03:08.640\nI expect it to be learned from EIGRP,\nwhich it is.\n\n54\n00:03:08.640 --> 00:03:13.353\nAnd I expect it to be learned\nfrom 192.168.1.2 on my\n\n55\n00:03:13.353 --> 00:03:17.850\nFA1/0/24 interface so\nthat's exactly as we expect it to be.\n\n56\n00:03:17.850 --> 00:03:20.570\nWe are learning that route\nfrom the other side.\n\n57\n00:03:21.690 --> 00:03:28.190\nNow, we have a direct connection\nto 192.168.16, right there.\n\n58\n00:03:28.190 --> 00:03:31.960\nWe should be teaching that to CORE2,\nto the other switch.\n\n59\n00:03:31.960 --> 00:03:35.920\nWe're learning their routes but apparently\nwe're not telling them our routes.\n\n60\n00:03:35.920 --> 00:03:38.830\nSo, we've got a problem there and\nI'm just gonna verify that real quick.\n\n61\n00:03:38.830 --> 00:03:42.890\nI'm gonna jump over to CORE2 and\n\n62\n00:03:42.890 --> 00:03:45.020\nwe'll just take a quick\npeek at it's configuration.\n\n63\n00:03:45.020 --> 00:03:49.100\nI'm gonna do a show run for\ninterface fa1/0/24.\n\n64\n00:03:49.100 --> 00:03:50.730\nWhere we expect it to be .2.\n\n65\n00:03:50.730 --> 00:03:53.790\nWe expect it to have that /30 subnet mask,\nwhich it does.\n\n66\n00:03:55.180 --> 00:04:00.980\nIf I do a show IP route,\nI'm expecting not to see 192.168.16,\n\n67\n00:04:00.980 --> 00:04:04.310\nand sure enough,\nit gets skipped over right between those.\n\n68\n00:04:04.310 --> 00:04:05.860\nDon't glance at this too fast.\n\n69\n00:04:05.860 --> 00:04:09.500\nLike, you've got 193.177.16,\nwhich is close, right?\n\n70\n00:04:09.500 --> 00:04:11.390\nBut it's not the same network.\n\n71\n00:04:11.390 --> 00:04:13.350\nSo I am not seeing it.\n\n72\n00:04:13.350 --> 00:04:19.490\nIf I do a show ip eigrp neighbor, I am\nneighbored up with that router, though.\n\n73\n00:04:19.490 --> 00:04:21.000\nRight, so I am talking to it and\n\n74\n00:04:21.000 --> 00:04:24.585\nexchanging information,\nI'm just not learning anything.\n\n75\n00:04:24.585 --> 00:04:27.000\nRight?\nI'm not actually getting any data from it,\n\n76\n00:04:27.000 --> 00:04:30.920\nas far as that particular route\nto add to the routing table.\n\n77\n00:04:30.920 --> 00:04:31.652\nI am getting other routes.\n\n78\n00:04:31.652 --> 00:04:37.660\nAll right, so it looks like we got a bit\nof a problem, and what could cause this?\n\n79\n00:04:37.660 --> 00:04:42.140\nIf I've got two devices that are\nexchanging routes between each other and\n\n80\n00:04:42.140 --> 00:04:45.410\nI'm just missing one route,\nwhat could cause that?\n\n81\n00:04:45.410 --> 00:04:48.750\nWell, it could be just a misconfiguration\non the originating switch.\n\n82\n00:04:48.750 --> 00:04:50.750\nMaybe its not advertising it at all.\n\n83\n00:04:50.750 --> 00:04:52.740\nIt could be a passive interface, right?\n\n84\n00:04:52.740 --> 00:04:53.760\nWhere it's participating.\n\n85\n00:04:53.760 --> 00:04:55.077\nBut that would break communication, so\n\n86\n00:04:55.077 --> 00:04:57.200\nit's more than likely\nnot a passive interface.\n\n87\n00:04:57.200 --> 00:04:59.790\nIt could be that I have\nan outgoing prefix list or\n\n88\n00:04:59.790 --> 00:05:03.170\nroute map that's filtering\nthe routes that I advertise out.\n\n89\n00:05:03.170 --> 00:05:04.520\nThat's a possibility.\n\n90\n00:05:04.520 --> 00:05:05.910\nYou could say the opposite.\n\n91\n00:05:05.910 --> 00:05:07.880\nThere could be an incoming prefix list or\n\n92\n00:05:07.880 --> 00:05:10.870\nroute map on the other side that's\nstopping them from coming in.\n\n93\n00:05:10.870 --> 00:05:15.095\nSo those are all things we need to look\nat, and since I'm on CORE2 I might as well\n\n94\n00:05:15.095 --> 00:05:18.990\njust check it first,\nthen we'll jump over and check CORE1.\n\n95\n00:05:18.990 --> 00:05:22.110\nSo on CORE2,\nI'm just gonna do a show run, and whoops,\n\n96\n00:05:22.110 --> 00:05:25.760\n[LAUGH] and I was gonna filter that for\nthe section.\n\n97\n00:05:25.760 --> 00:05:27.990\nThere we go, for the section of eigrp.\n\n98\n00:05:29.660 --> 00:05:32.510\nAnd apparently I don't get\nthe section command for this one so\n\n99\n00:05:32.510 --> 00:05:34.720\nwe'll do a show run and\nwe'll just begin with eigrp.\n\n100\n00:05:36.920 --> 00:05:43.190\nAnd what I'm expecting to see here, there\nwe go, are my network statements, right?\n\n101\n00:05:43.190 --> 00:05:45.140\nAnd that's about it.\n\n102\n00:05:45.140 --> 00:05:47.320\nI don't see any authentication configured.\n\n103\n00:05:47.320 --> 00:05:48.900\nThat's something to watch out for.\n\n104\n00:05:48.900 --> 00:05:50.580\nAnd everything else looks\npretty straightforward.\n\n105\n00:05:50.580 --> 00:05:52.020\nWe looked at the interface\na few moments ago.\n\n106\n00:05:52.020 --> 00:05:53.940\nThere wasn't anything crazy there, either.\n\n107\n00:05:53.940 --> 00:05:56.440\nSo, this one appears to be okay.\n\n108\n00:05:56.440 --> 00:05:57.840\nI've got router eigrp 800.\n\n109\n00:05:57.840 --> 00:06:01.310\nSo, my AS number is correct and you\nalways got to look for a mistake there.\n\n110\n00:06:01.310 --> 00:06:03.860\nAnd I've got the network statement that\n\n111\n00:06:03.860 --> 00:06:07.920\ncovers the point-to-point link with the\nother switch, that layer three interface.\n\n112\n00:06:07.920 --> 00:06:10.860\nAnd I've got the network statement that's\nadvertising my network, all right?\n\n113\n00:06:10.860 --> 00:06:11.670\nSo, those are good.\n\n114\n00:06:11.670 --> 00:06:13.130\nI've got one extra here\nthrown into the mix.\n\n115\n00:06:13.130 --> 00:06:15.090\nBut that's not part of our problem.\n\n116\n00:06:15.090 --> 00:06:17.720\nAll right, let's go take a look at\nCORE1 and see if it's the same way.\n\n117\n00:06:19.912 --> 00:06:23.250\nOn CORE1, I don't remember if\nI looked at that interface, so\n\n118\n00:06:23.250 --> 00:06:24.380\nI'm gonna just pull that up again.\n\n119\n00:06:24.380 --> 00:06:25.320\nBetter safe than sorry.\n\n120\n00:06:26.530 --> 00:06:27.630\nAnd looking at the interface.\n\n121\n00:06:27.630 --> 00:06:30.060\nOkay, nothing crazy there.\n\n122\n00:06:30.060 --> 00:06:33.170\nAnd then, if I do a show run for\nsection eigrp.\n\n123\n00:06:33.170 --> 00:06:37.750\nApparently, whatever iOS this is\njust doesn't seem to like that, so\n\n124\n00:06:37.750 --> 00:06:39.520\nlet me just do a begin again.\n\n125\n00:06:41.580 --> 00:06:42.833\nAnd, what do we have here?\n\n126\n00:06:44.168 --> 00:06:48.560\nAll right, that is an awfully small\nrouting configuration for eigrp.\n\n127\n00:06:48.560 --> 00:06:50.390\nIt's just two lines.\n\n128\n00:06:50.390 --> 00:06:53.680\nRouter eigrp 800, that turned on eigrp.\n\n129\n00:06:53.680 --> 00:06:55.450\nThat's good.\n\n130\n00:06:55.450 --> 00:07:01.110\nAnd then network 192.168.1.0, that's\nthe link between me and the other switch.\n\n131\n00:07:01.110 --> 00:07:03.924\nBetween CORE1 and CORE2.\n\n132\n00:07:03.924 --> 00:07:06.430\nAnd it's gotta 0.0.0.3 wildcard mask,\nbut if we work that out,\n\n133\n00:07:06.430 --> 00:07:08.862\nthat actually covers the two switches,\nright?\n\n134\n00:07:08.862 --> 00:07:10.010\n192.168.1.1 and 192.168.1.2.\n\n135\n00:07:10.010 --> 00:07:14.700\nSo that's actually the right statement for\nthat link, but\n\n136\n00:07:14.700 --> 00:07:19.650\nmy problem here is there's nothing to\n\n137\n00:07:19.650 --> 00:07:24.550\nadvertise the 192.168.16 network or\nreally any other network, for that matter.\n\n138\n00:07:24.550 --> 00:07:28.380\nSo, I'm not advertising\nout those other networks.\n\n139\n00:07:28.380 --> 00:07:31.310\nIf I'm not originating the network,\nhow's anybody else gonna learn about it?\n\n140\n00:07:31.310 --> 00:07:32.600\nThey're not.\n\n141\n00:07:32.600 --> 00:07:33.900\nSo I need to fix this and\n\n142\n00:07:33.900 --> 00:07:37.030\nthe easiest way is just to add\nit in as a network statement.\n\n143\n00:07:37.030 --> 00:07:39.650\nI do need to make a decision,\nlike how many networks do I have?\n\n144\n00:07:39.650 --> 00:07:43.790\nIf I do a show ip interface brief and\nexclude the unassigned.\n\n145\n00:07:43.790 --> 00:07:46.570\nI've only got two networks,\nso there's only one missing.\n\n146\n00:07:46.570 --> 00:07:50.842\nSo the easiest way to do this is to\njust add a network statement for\n\n147\n00:07:50.842 --> 00:07:52.540\n192.168.16, right?\n\n148\n00:07:52.540 --> 00:07:55.330\nNow if I did a show IP interface brief and\nsaw that I had\n\n149\n00:07:55.330 --> 00:07:59.195\nlike 20 different connected networks, I\nwould do a redistribute connected, right?\n\n150\n00:07:59.195 --> 00:08:00.880\nNow, that would work\nout really well there.\n\n151\n00:08:00.880 --> 00:08:08.480\nBut since it's just one network, I'll do a\nnetwork statement, that'll save some time.\n\n152\n00:08:08.480 --> 00:08:10.840\nAnd we'll do a router eigrp 800,\n\n153\n00:08:10.840 --> 00:08:14.270\nnetwork 192.168.16.0 with\na 0.0.0.255 wildcard mask.\n\n154\n00:08:14.270 --> 00:08:19.470\nSo, I'm gonna run that and that's gonna\nbring that network into the routing table.\n\n155\n00:08:19.470 --> 00:08:21.630\nWell, the network is already\nin the routing table.\n\n156\n00:08:21.630 --> 00:08:24.400\nIt's gonna bring it into EIGRP's\nrouting database, and that way,\n\n157\n00:08:24.400 --> 00:08:27.870\nwe'll advertise it out and\nthe other side should start to learn it.\n\n158\n00:08:27.870 --> 00:08:30.170\nNow, I'm not gonna see anything\ndifferent here on this router.\n\n159\n00:08:30.170 --> 00:08:33.610\nI need to jump over to CORE2, and\nthat's where I would see a difference.\n\n160\n00:08:34.710 --> 00:08:39.390\nSo on this guy, it should happen\npretty fast, if I do a show ip route.\n\n161\n00:08:39.390 --> 00:08:44.120\nI'll just filter it down to eigrp routes.\n\n162\n00:08:44.120 --> 00:08:47.820\nAnd there it is,\n192.168.16 is now showing up in my list.\n\n163\n00:08:47.820 --> 00:08:54.250\nAnd if I try and ping it, I get\nconnectivity, so we are in good shape.\n\n164\n00:08:54.250 --> 00:08:57.630\nSo in this case it turns out just\nthe originating router was not\n\n165\n00:08:57.630 --> 00:08:58.868\nadvertising the route.\n\n166\n00:08:58.868 --> 00:09:01.590\nAnd we could solve that by manually\nadding it to the routing process,\n\n167\n00:09:01.590 --> 00:09:05.780\nwhich is what I did, or we could of\nredistributed it in as a connected route.\n\n168\n00:09:05.780 --> 00:09:06.880\nThat would have worked, too.\n\n169\n00:09:06.880 --> 00:09:09.230\nEither solution would have been fine.\n\n170\n00:09:09.230 --> 00:09:12.910\nFor me, if it's just one or two networks,\nI'll normally do the network command.\n\n171\n00:09:12.910 --> 00:09:16.435\nIf it's a lot of networks, though,\nthen I'll use the redistribute command.\n\n172\n00:09:16.435 --> 00:09:17.430\nRight?\n\n173\n00:09:17.430 --> 00:09:18.670\nThere is one more thing to add, though.\n\n174\n00:09:18.670 --> 00:09:19.850\nWhen you use the network command,\n\n175\n00:09:19.850 --> 00:09:22.590\nsometimes you need to go in to passive\ninterface commands also to secure it\n\n176\n00:09:22.590 --> 00:09:25.190\na little bit, versus redistributes\nwhere you don't have to do that.\n\n177\n00:09:25.190 --> 00:09:27.330\nSo it's up to you how you\nwant to solve that one.\n\n178\n00:09:27.330 --> 00:09:29.990\nOftentimes there's more than\none solution to a problem.\n\n179\n00:09:29.990 --> 00:09:32.410\nI just went with kinda\nthe path of least resistance.\n\n180\n00:09:32.410 --> 00:09:36.540\nThat network command is a lot easier than\nredistribute command because an EIGRP you\n\n181\n00:09:36.540 --> 00:09:38.380\nhave to put in all those metrics and\nit's kind of a pain.\n\n182\n00:09:38.380 --> 00:09:41.280\nSo this was a little bit\nof the faster solution.\n\n183\n00:09:41.280 --> 00:09:42.490\nBut, that knocks this one out,\n\n184\n00:09:42.490 --> 00:09:45.970\nwe've got the connectivity, the routes\nare up, it's present, everything's happy.\n\n185\n00:09:45.970 --> 00:09:48.730\nWe've resolved what was stated\nin the troubleshooting ticket.\n\n186\n00:09:48.730 --> 00:09:49.670\nSo, that wraps this one up.\n\n187\n00:09:49.670 --> 00:09:50.740\nHope you guys enjoyed it.\n\n188\n00:09:50.740 --> 00:09:56.390\nStay tuned we've got more\ntroubleshooting tickets coming up.\n\n189\n00:09:56.390 --> 00:10:00.439\n[SOUND]\n\n",
          "vimeoId": "151018049"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #3` from set #7. The trouble ticket states that \"When you shutdown Fas1/0/22 on NYCORE1 you are unable to ping 192.168.16.1 from PLABCSCO01 (the default gateway). You want to ensure that you access to the default gateway has an alternative path in case the link between NYACCESS1 and NYCORE1 fails. \"",
          "length": "265",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-7-3-set_7_issue_3-120715-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-7-3-set_7_issue_3-120715-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-7-3-set_7_issue_3-120715-1-sm.jpg",
          "title": "Set 7 Issue 3",
          "transcript": "WEBVTT\n\n1\n00:00:00.025 --> 00:00:08.990\n[SOUND]\n>> All\n\n2\n00:00:08.990 --> 00:00:12.510\nright welcome back to another\ntroubleshooting episode here on ITProTV.\n\n3\n00:00:12.510 --> 00:00:16.490\nThis is going to be set\n7 issue number 3 and\n\n4\n00:00:16.490 --> 00:00:18.960\nthis one is gonna be a short one,\nlet me tell you why.\n\n5\n00:00:18.960 --> 00:00:21.680\nThe troubleshooting ticket for number 3,\nlet me just read this out to you.\n\n6\n00:00:21.680 --> 00:00:27.120\nIt says when you shut down\nFA1/0/22 on NY core one,\n\n7\n00:00:27.120 --> 00:00:31.980\nyou are unable to ping 192.168.16.1\nfrom ping lab Cisco 01,\n\n8\n00:00:31.980 --> 00:00:36.510\nyou want to ensure you have access\n\n9\n00:00:36.510 --> 00:00:40.980\nto the default gateway as an alternative\npath that's a strange sentence.\n\n10\n00:00:40.980 --> 00:00:44.890\nYou want to ensure that your access to the\ndefault gateway has an alternative path,\n\n11\n00:00:44.890 --> 00:00:49.490\nin case the link because NYACCESS1 and\nNYCORE1 fails, all right.\n\n12\n00:00:49.490 --> 00:00:50.500\nLet me bring up the topology and\n\n13\n00:00:50.500 --> 00:00:53.520\nI'll give you chance to see why this\nis gonna be a short one for us.\n\n14\n00:00:53.520 --> 00:00:57.690\nBasically what they're telling me is that,\nif I go to NYCORE1 and\n\n15\n00:00:57.690 --> 00:01:03.100\nI shut down this link right here,\nnow I'm no longer able to ping across\n\n16\n00:01:03.100 --> 00:01:07.242\nto NYCORE1 from my server down here, okay?\n\n17\n00:01:07.242 --> 00:01:10.340\nAll right, if you've been doing all\nthese troubleshooting tickets in order,\n\n18\n00:01:10.340 --> 00:01:15.050\nstarting with set seven issue one,\nyou'll know that the path for\n\n19\n00:01:15.050 --> 00:01:18.450\nour traffic right now\nisn't crossing that link.\n\n20\n00:01:18.450 --> 00:01:22.240\nThat when we ping from\nthis server up to NYCORE1.\n\n21\n00:01:22.240 --> 00:01:25.530\nWe followed that path back\nin ticket number one, and\n\n22\n00:01:25.530 --> 00:01:29.118\nthe path actually went around like this.\n\n23\n00:01:29.118 --> 00:01:31.600\nWell remember when you troubleshoot and\n\n24\n00:01:31.600 --> 00:01:36.140\nresolve a ticket, you actually have more\nthan one way that you can solve a problem.\n\n25\n00:01:36.140 --> 00:01:38.020\nSo when we were troubleshooting\nthat first ticket,\n\n26\n00:01:38.020 --> 00:01:42.050\nwe saw where the communications\nweren't crossing this line.\n\n27\n00:01:42.050 --> 00:01:45.440\nAnd we fixed it, and that got it where we\nwere able to come across like this and\n\n28\n00:01:45.440 --> 00:01:47.160\nget to our destination.\n\n29\n00:01:47.160 --> 00:01:54.010\nWell another possible solution would have\nbeen to make this guy the route switch,\n\n30\n00:01:54.010 --> 00:01:57.210\nor to make this one, either one of these\nguys could've become the route switch.\n\n31\n00:01:57.210 --> 00:02:00.470\nAnd if they were the route switch,\nthis link would've come up and\n\n32\n00:02:00.470 --> 00:02:05.330\nthen our traffic would have gone this way,\nand bypassed the bad link over here.\n\n33\n00:02:05.330 --> 00:02:05.920\nAll right?\n\n34\n00:02:05.920 --> 00:02:08.820\nThat would have solved\nthe problem in ticket number one.\n\n35\n00:02:08.820 --> 00:02:14.140\nIf we had done that, shutting down port\n22 would stop us from communicating.\n\n36\n00:02:14.140 --> 00:02:16.330\nWe wouldn't be able to communicate\nhere because it was shut down, and\n\n37\n00:02:16.330 --> 00:02:19.660\nwe wouldn't be able to\ncommunicate here because the link\n\n38\n00:02:19.660 --> 00:02:21.810\nhad dynamic arp inspection turned on,\nright?\n\n39\n00:02:21.810 --> 00:02:25.040\nAnd so it would have blocked us and\nwe would have been dead in the water,\n\n40\n00:02:25.040 --> 00:02:29.080\nbut we chose to fix dynamic\narp inspection instead and so\n\n41\n00:02:29.080 --> 00:02:34.640\nour traffic is able to flow this way\nalready and so we don't have that problem.\n\n42\n00:02:34.640 --> 00:02:39.150\nIn ticket number one, we actually\nsolved both tickets at the same time,\n\n43\n00:02:39.150 --> 00:02:41.700\nissue number one and issue number three.\n\n44\n00:02:41.700 --> 00:02:45.120\nSo if you haven't watched issue number\none, jump back to it and watch it and\n\n45\n00:02:45.120 --> 00:02:49.300\nyou'll see how we traced out that path\nto figure out where we were going.\n\n46\n00:02:49.300 --> 00:02:52.860\nWe found where the problem was,\ntracked it down to CORE2 and\n\n47\n00:02:52.860 --> 00:02:57.540\nwe fixed Dynamic ARP Inspection by\ntrusting port 22 and once that happened,\n\n48\n00:02:57.540 --> 00:02:59.350\nthe communications came up.\n\n49\n00:02:59.350 --> 00:03:01.780\nSo in my scenario that we've got now\n\n50\n00:03:01.780 --> 00:03:03.610\nthis troubleshooting tickets\nalready been resolved.\n\n51\n00:03:03.610 --> 00:03:05.460\nAnd we can just verify that real quick.\n\n52\n00:03:05.460 --> 00:03:11.100\nIf I go to my P Lab Cisco 01,\nand I do a ping,\n\n53\n00:03:11.100 --> 00:03:16.850\nI'll do a continual ping, to 192.168.16.1,\nright, which I can ping it.\n\n54\n00:03:16.850 --> 00:03:20.710\nAnd then if I go into NYCore1, and\n\n55\n00:03:20.710 --> 00:03:23.860\nI shut down the interface\nthey're telling me to shut down.\n\n56\n00:03:23.860 --> 00:03:27.900\nMy network should survive that\njust fine and we shall see.\n\n57\n00:03:27.900 --> 00:03:31.600\nIf I get into FA1/0/22 and do a shut down.\n\n58\n00:03:31.600 --> 00:03:34.440\nThat interface is gonna go down.\n\n59\n00:03:34.440 --> 00:03:36.280\nSo I just shut down this link.\n\n60\n00:03:36.280 --> 00:03:37.350\nThis link just went down.\n\n61\n00:03:38.420 --> 00:03:43.320\nAnd now if my server were reliant\non that link it would stop.\n\n62\n00:03:43.320 --> 00:03:45.770\nBut since my server isn't reliant on it.\n\n63\n00:03:45.770 --> 00:03:49.810\nWhen I go back to my server it's\nstill pinging away just fine.\n\n64\n00:03:49.810 --> 00:03:50.430\nRight?\nSo\n\n65\n00:03:50.430 --> 00:03:53.060\nwe actually managed to resolved\ntwo tickets at the same time, and\n\n66\n00:03:53.060 --> 00:03:55.090\nthat's not an uncommon thing, right?\n\n67\n00:03:55.090 --> 00:03:57.830\nYou could have one issue on the network.\n\n68\n00:03:57.830 --> 00:04:00.040\nIt leads to multiple symptoms.\n\n69\n00:04:00.040 --> 00:04:02.920\nAnd in this scenario, the symptoms from\nquestion one and the symptoms from\n\n70\n00:04:02.920 --> 00:04:05.690\nquestion three could both be resolved\nwith just one fix which is what we did.\n\n71\n00:04:05.690 --> 00:04:08.760\nSo again, if you haven't already watched\nissue number one, be sure to jump back and\n\n72\n00:04:08.760 --> 00:04:09.910\ncheck that one out.\n\n73\n00:04:09.910 --> 00:04:11.040\nSolves the same problem.\n\n74\n00:04:11.040 --> 00:04:15.460\nBut otherwise, that takes care of\nthis one so we'll call it a day and\n\n75\n00:04:15.460 --> 00:04:16.110\nget ready to move on.\n\n76\n00:04:16.110 --> 00:04:17.450\nAnd the next one, stay tuned.\n\n77\n00:04:17.450 --> 00:04:19.692\nI'll see you back for issue four.\n\n78\n00:04:19.692 --> 00:04:23.999\n[MUSIC]\n\n",
          "vimeoId": "151018050"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #4` from set #7. The trouble ticket states that \"You only see the BGP route for 22.33.44.0 in NYCORE2’s routing table, but the BGP table has a lot more routes \"",
          "length": "1148",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-7-4-set_7_issue_4-120715-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-7-4-set_7_issue_4-120715-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-7-4-set_7_issue_4-120715-1-sm.jpg",
          "title": "Set 7 Issue 4",
          "transcript": "WEBVTT\n\n1\n00:00:00.008 --> 00:00:02.926\n[SOUND]\n\n2\n00:00:02.926 --> 00:00:08.762\nAll right.\n\n3\n00:00:08.762 --> 00:00:11.710\nWelcome back to another troubleshooting\nepisode here on IT Pro TV.\n\n4\n00:00:11.710 --> 00:00:17.580\nWe're ready for Set 7 Issue number 4, and\nwe got a BGP issue today which is awesome.\n\n5\n00:00:17.580 --> 00:00:18.940\nSo issue number 4 reads like this.\n\n6\n00:00:18.940 --> 00:00:24.355\nIt says you only see the BGP route for\n\n7\n00:00:24.355 --> 00:00:27.970\n22.33.4.0 in NYCORE2's routing table.\n\n8\n00:00:27.970 --> 00:00:31.680\nBut the BGP table has a lot more routes.\n\n9\n00:00:31.680 --> 00:00:36.330\nSo this is an example of where a route\nis not making it to your routing table.\n\n10\n00:00:36.330 --> 00:00:38.260\nIt's making it into the BGP database.\n\n11\n00:00:38.260 --> 00:00:40.010\nBut it's not making it\ninto the routing table.\n\n12\n00:00:40.010 --> 00:00:42.380\nAnd there's a number of\nthings that can cause it.\n\n13\n00:00:42.380 --> 00:00:45.400\nYou can have rib failures and\nmetrics and all sorts of craziness\n\n14\n00:00:45.400 --> 00:00:47.590\nthat can cause a route not to\nmake it into the routing table.\n\n15\n00:00:48.690 --> 00:00:52.070\nRegardless of what the cause is, one of\nthe first things that we really we need to\n\n16\n00:00:52.070 --> 00:00:54.000\ndo is we need to verify that\nthis is actually happening,\n\n17\n00:00:54.000 --> 00:00:57.710\nthat we are supposed to be seeing a route\nand for some reason we're not seeing it.\n\n18\n00:00:57.710 --> 00:00:58.240\nAll right?\n\n19\n00:00:58.240 --> 00:01:01.460\nSo they're pretty much singling out\nNYCORE2 on this one we might as well just\n\n20\n00:01:01.460 --> 00:01:04.790\njump straight to NYCORE2 and\nsee what its got.\n\n21\n00:01:04.790 --> 00:01:09.070\nNow I guess before we do that, let's\ngo take a quick glance at our topology.\n\n22\n00:01:09.070 --> 00:01:12.470\nAnd here's NYCORE2 and\nthey're signaling out BGP.\n\n23\n00:01:12.470 --> 00:01:16.520\nAnd I can see that we\nare running iBGP on NYCORE2.\n\n24\n00:01:16.520 --> 00:01:20.280\nAnd it's supposed to be talking to,\nNYEDGE1, so\n\n25\n00:01:20.280 --> 00:01:24.460\nI've got interior BGP configured\nbetween these two guys.\n\n26\n00:01:24.460 --> 00:01:27.380\nNow looking at them, it doesn't look\nlike they have a direct connection, so\n\n27\n00:01:27.380 --> 00:01:30.160\nthere might be an undocumented\nlink here in between these two.\n\n28\n00:01:30.160 --> 00:01:31.820\nI'm not entirely sure.\n\n29\n00:01:31.820 --> 00:01:36.230\nBut if there isn't, then that means\nNYEDGE is sitting in between them,\n\n30\n00:01:36.230 --> 00:01:38.070\nand that could be a problem,\n\n31\n00:01:38.070 --> 00:01:44.210\nbecause looking at this topology I've\ngot IBGP in between NYEDGE1 and NYCORE1.\n\n32\n00:01:44.210 --> 00:01:47.020\nI don't have IBGP for NYEDGE2.\n\n33\n00:01:47.020 --> 00:01:49.510\nAnd IBGP hates it\n\n34\n00:01:49.510 --> 00:01:53.310\nwhen there's extra devices in\nthe mix that aren't a part of it.\n\n35\n00:01:53.310 --> 00:01:57.920\nRemember IBGP always expects a full\nmesh topology, so I'm hoping there's\n\n36\n00:01:57.920 --> 00:02:01.030\nan undocumented link between these\ntwo guys, but we'll see here.\n\n37\n00:02:01.030 --> 00:02:05.100\nIn a minute, since that's where our\nexternal BGP routes are coming from.\n\n38\n00:02:05.100 --> 00:02:08.789\nNow the route they're singling\nout is 22.33.44.0 and\n\n39\n00:02:08.789 --> 00:02:10.941\nI don't know where that routes from.\n\n40\n00:02:10.941 --> 00:02:14.447\nSo I imagine it's coming\nfrom this ISP in coming in.\n\n41\n00:02:14.447 --> 00:02:17.821\nBut I guess we should probably, actually,\nfigure out where that routes coming from\n\n42\n00:02:17.821 --> 00:02:21.050\nbefore we start passing judgement on\nwhether or not it makes it to us or not.\n\n43\n00:02:21.050 --> 00:02:24.250\nLet's ship up to NYEDGE1 and\njust have a quick look at that guy and\n\n44\n00:02:24.250 --> 00:02:27.480\nsee Where that route is even coming from.\n\n45\n00:02:27.480 --> 00:02:31.580\nSo here on NYEDGE1,\n\n46\n00:02:31.580 --> 00:02:36.060\nthe first thing I'm gonna do is just\na quick show IPBGP summary, right?\n\n47\n00:02:36.060 --> 00:02:39.300\nThat's a great way to see your neighbors,\nsee who you're talking to, and\n\n48\n00:02:39.300 --> 00:02:41.640\nsee whether your exchanging any prefixes.\n\n49\n00:02:41.640 --> 00:02:42.330\nAll right.\n\n50\n00:02:42.330 --> 00:02:45.379\nThe first entry I see is 172.14.0.3.\n\n51\n00:02:45.379 --> 00:02:47.140\nThat's the ISP.\n\n52\n00:02:47.140 --> 00:02:48.780\nSo, I am connected to my ISP.\n\n53\n00:02:48.780 --> 00:02:53.760\nAnd if I look all the way over here on\nthe side, I can see prefixes received, 10.\n\n54\n00:02:53.760 --> 00:02:55.358\nSo, I've exchanged ten\nroutes with that guy.\n\n55\n00:02:55.358 --> 00:02:57.294\nI've learned ten routes from that guy.\n\n56\n00:02:57.294 --> 00:02:59.065\nRight, I've probably sent more.\n\n57\n00:02:59.065 --> 00:03:05.040\nThen the next line,\n192.168.17.1, that's NYCORE2.\n\n58\n00:03:05.040 --> 00:03:06.800\nAnd I'm running IBGP with.\n\n59\n00:03:06.800 --> 00:03:09.970\nAnd over here I can see\nprefixes received zero.\n\n60\n00:03:09.970 --> 00:03:12.700\nNow, that's not necessarily a problem.\n\n61\n00:03:12.700 --> 00:03:16.300\nThat means I haven't received any\nroutes from the interior guy.\n\n62\n00:03:16.300 --> 00:03:19.170\nI could've sent him some, but\nhe didn't have anything to teach me, and\n\n63\n00:03:19.170 --> 00:03:20.720\nthat's not uncommon for IBGP.\n\n64\n00:03:20.720 --> 00:03:22.480\nIf he just has interior routes,\n\n65\n00:03:22.480 --> 00:03:25.049\nthere's not much he's gonna teach me that\nI don't already know through other means.\n\n66\n00:03:26.210 --> 00:03:30.380\nAll right, so let's take just a quick\ngander here at our routing table.\n\n67\n00:03:31.600 --> 00:03:33.140\nAnd so\nI'm gonna look at the routing table.\n\n68\n00:03:33.140 --> 00:03:37.580\nAnd I'm looking for\nthat 22.33.44 network right there.\n\n69\n00:03:37.580 --> 00:03:40.880\nAnd I can see that it's directly\nconnected on a loopback right here.\n\n70\n00:03:40.880 --> 00:03:42.530\nIt's not even involving another ISP.\n\n71\n00:03:42.530 --> 00:03:44.680\nThis one's directly\nconnected to my loopback,\n\n72\n00:03:44.680 --> 00:03:46.330\nand that's where it's coming from.\n\n73\n00:03:46.330 --> 00:03:48.390\nAnd it's a loopback, so it's always up.\n\n74\n00:03:48.390 --> 00:03:50.050\nSo, as long as i'm advertising into BGP,\n\n75\n00:03:50.050 --> 00:03:52.330\nit should make it to the other side,\nal right?\n\n76\n00:03:52.330 --> 00:03:56.350\nNow in the trouble shooting question it\nsaid it was making it to the other side,\n\n77\n00:03:56.350 --> 00:04:00.480\nso let's jump over here to NYEDGE2.\n\n78\n00:04:00.480 --> 00:04:05.200\nAnd on NYCORE2,\nif I can get to the right device.\n\n79\n00:04:05.200 --> 00:04:07.810\nThey're the ones mentioned in\nthe trouble shooting ticket.\n\n80\n00:04:09.050 --> 00:04:15.930\nI can do a show BGP summary, or\nIPBGP summary to see my neighbors.\n\n81\n00:04:17.250 --> 00:04:23.370\nAnd, there we go, I've got 193.177.16.1,\nthat's an odd IP address.\n\n82\n00:04:23.370 --> 00:04:26.330\nI'm assuming that's the other router,\nbut I didn't really pay attention.\n\n83\n00:04:26.330 --> 00:04:28.300\nSo let's jump back over to the other one.\n\n84\n00:04:28.300 --> 00:04:30.800\nAnd see if that's actually the case.\n\n85\n00:04:30.800 --> 00:04:36.350\nSo if I jump back over to NYEDGE1 and\njust do a quick show IP interface for you.\n\n86\n00:04:36.350 --> 00:04:39.330\nI just want to make sure that is this one,\nand sure enough there it is.\n\n87\n00:04:39.330 --> 00:04:45.040\n193.177.16.1 that's assigned in this post.\n\n88\n00:04:45.040 --> 00:04:49.430\nAll right, so that's the other guy and\nif I look all the way over here\n\n89\n00:04:49.430 --> 00:04:54.440\n10 prefixes received, right, or\nnine, nine prefixes received.\n\n90\n00:04:54.440 --> 00:04:55.770\nNine instead of 10.\n\n91\n00:04:55.770 --> 00:04:57.120\nNow, I'm not too worried about that.\n\n92\n00:04:57.120 --> 00:05:00.140\nThat just means they probably sent me\na prefix that I already knew about or\n\n93\n00:05:00.140 --> 00:05:04.230\nsomething like that, but I've got nine\nreceived, so I am receiving routes.\n\n94\n00:05:04.230 --> 00:05:12.620\nAnd if I do a show IP route BGP I\nshould see nine prefixes right?\n\n95\n00:05:12.620 --> 00:05:16.950\nWell, not necessarily some of the prefixes\ncan be beaten by somebody else\n\n96\n00:05:16.950 --> 00:05:22.070\nnotice my BGP routes have\nan administrative distance of 200, okay?\n\n97\n00:05:22.070 --> 00:05:26.020\nIBGP routes have an admin\ndistance of 200 EGBP is 20,\n\n98\n00:05:26.020 --> 00:05:30.890\nso EGBP is pretty hard to beat but\nIBGP gets beaten all the time.\n\n99\n00:05:30.890 --> 00:05:36.210\nSo while I receive nine prefixes if I knew\nthem from any dynamic routing protocol,\n\n100\n00:05:37.210 --> 00:05:42.200\nRIP with an admin distance of 120,\nOSPF with an admin distance of 110,\n\n101\n00:05:42.200 --> 00:05:43.970\nEIGRP with an admin distance of 90.\n\n102\n00:05:43.970 --> 00:05:45.750\nAll three of those would\nhave beaten it out so\n\n103\n00:05:45.750 --> 00:05:48.820\nI'm not surprised to only see one\nroute here in the routing table.\n\n104\n00:05:48.820 --> 00:05:53.050\nAnd what I am surprised to see though\nis that, it's 22.33.44.0, right?\n\n105\n00:05:53.050 --> 00:05:59.060\nThe route they told me that wasn't\ngonna show up is right here.\n\n106\n00:05:59.060 --> 00:06:01.840\nSo, what's that all about if\nthey're telling me it made it\n\n107\n00:06:01.840 --> 00:06:05.820\ninto the routing table but\nit said I couldn't, and here it is.\n\n108\n00:06:05.820 --> 00:06:10.340\nSo, what that means is we've got\nsome kinda issue here that isn't\n\n109\n00:06:10.340 --> 00:06:11.640\nmaking a whole lot of sense, right?\n\n110\n00:06:11.640 --> 00:06:13.760\nLet me see if I have reachability to that.\n\n111\n00:06:14.780 --> 00:06:17.806\nWhich I guess I didn't pay attention what\nactual IP was set on that other node.\n\n112\n00:06:17.806 --> 00:06:21.517\nLet's jump back over to NYEDGE1,\n\n113\n00:06:21.517 --> 00:06:25.480\nand it was 22.33.44.10.\n\n114\n00:06:25.480 --> 00:06:32.493\nSo, I'll go back to CORE2, and\nwe'll try to ping 22.33.44.10.\n\n115\n00:06:33.790 --> 00:06:35.230\nAnd I got some unreachables.\n\n116\n00:06:35.230 --> 00:06:38.383\nNow that's interesting cuz that\nmade it to my routing table, but\n\n117\n00:06:38.383 --> 00:06:40.231\nI'm getting that I can't get there.\n\n118\n00:06:40.231 --> 00:06:42.598\nSo what route did I learn for that one?\n\n119\n00:06:42.598 --> 00:06:48.630\nHere's 22.33.44.0 and\n\n120\n00:06:48.630 --> 00:06:52.050\nit's a slash 24.\n\n121\n00:06:52.050 --> 00:06:55.780\nAnd I learned via 193.177.16.1 but\nI can't get there, all right?\n\n122\n00:06:55.780 --> 00:06:56.730\nWhy not?\n\n123\n00:06:56.730 --> 00:06:58.660\nWell, I don't know.\n\n124\n00:06:58.660 --> 00:06:59.310\nRight, I mean why not?\n\n125\n00:06:59.310 --> 00:07:04.461\nIf I look at my routes, I've got an EIGRP\nroute here from 193.177.16.0, right?\n\n126\n00:07:04.461 --> 00:07:06.888\nSo I know how to get to that network,\nor at least I think I do.\n\n127\n00:07:06.888 --> 00:07:09.150\nAnd I learned that via EIGRP.\n\n128\n00:07:09.150 --> 00:07:16.360\nSo if I try and do a ping to 193.177.16.1,\nwhich is where it tells me.\n\n129\n00:07:16.360 --> 00:07:18.570\nAnd I'm learning that BGP route.\n\n130\n00:07:18.570 --> 00:07:19.540\nI can try and ping that in.\n\n131\n00:07:20.620 --> 00:07:22.130\nI can get there.\n\n132\n00:07:22.130 --> 00:07:28.117\nBut if I ping 22.33.44.10,\nI can't get there.\n\n133\n00:07:28.117 --> 00:07:28.980\nAll right.\n\n134\n00:07:28.980 --> 00:07:32.460\nSo where's this problem boiling down to?\n\n135\n00:07:32.460 --> 00:07:34.430\nWell, this is a tough one.\n\n136\n00:07:34.430 --> 00:07:36.070\nIt looks like I know how to get there.\n\n137\n00:07:36.070 --> 00:07:39.230\nIt looks like it from this\nrouting table entry here, but\n\n138\n00:07:39.230 --> 00:07:41.960\nI know how to get there\nbased on this particular IP.\n\n139\n00:07:41.960 --> 00:07:44.730\nAnd I know I could get to this\nIP if I don't get beyond it.\n\n140\n00:07:44.730 --> 00:07:47.550\nLet's make sure I've actually got this\nIP address right cause this could be as\n\n141\n00:07:47.550 --> 00:07:50.210\nsimple as me messing something up and\n\n142\n00:07:50.210 --> 00:07:51.910\nsure enough when I look\nwe've got a loopback 10.\n\n143\n00:07:51.910 --> 00:07:53.430\n22.33.44.10.\n\n144\n00:07:53.430 --> 00:07:54.570\nIt's right there.\n\n145\n00:07:54.570 --> 00:07:55.920\nAll right.\n\n146\n00:07:55.920 --> 00:07:58.060\nSo, that's not too odd.\n\n147\n00:07:58.060 --> 00:08:02.180\nWell, I might be having a return trip\ntype problem, but that's kinda doubtful.\n\n148\n00:08:02.180 --> 00:08:07.420\nWhen I did my ping, my ping originated\nfrom, well, what did it originate from?\n\n149\n00:08:07.420 --> 00:08:08.220\nI'm not entirely sure.\n\n150\n00:08:08.220 --> 00:08:10.820\nLet's jump back over to CORE2 and\nsee what we originated from.\n\n151\n00:08:10.820 --> 00:08:16.485\nSo, if I was sending that\nping out to 22.33.44.0.\n\n152\n00:08:16.485 --> 00:08:18.042\nIt says I can get there via this IP.\n\n153\n00:08:18.042 --> 00:08:21.517\n193.177.16.1.\n\n154\n00:08:21.517 --> 00:08:25.170\nAnd on my routing table: 193.177.16.1,\n\n155\n00:08:25.170 --> 00:08:30.311\nwould fall under this routing entry,\nwhich is via 192.168.2.1.\n\n156\n00:08:30.311 --> 00:08:31.100\nRight?\n\n157\n00:08:31.100 --> 00:08:37.060\nSo I've got another network there,\nwhich is my FA1/0/1 interface, apparently.\n\n158\n00:08:37.060 --> 00:08:39.890\nIs the one that's gonna get\nme the closest to that.\n\n159\n00:08:39.890 --> 00:08:41.152\nLet's see what my configuration\nis like on that interface.\n\n160\n00:08:41.152 --> 00:08:46.319\nFA1/0/1, and there it is.\n\n161\n00:08:46.319 --> 00:08:52.020\nSo, I've got 192.168.2.2 on my end, and\nit's a /30 network, a really small one.\n\n162\n00:08:52.020 --> 00:08:55.650\nSo we should have 2.1 on the other end,\nand if I jump over to edge 1.\n\n163\n00:08:59.447 --> 00:09:01.282\nI don't see that, all right.\n\n164\n00:09:01.282 --> 00:09:05.600\nSo now I've got a break in communications.\n\n165\n00:09:05.600 --> 00:09:07.600\nRemember how when I looked\nat that topology, I said,\n\n166\n00:09:07.600 --> 00:09:12.390\nboy I really do hope that there's an\nundocumented link between these two guys.\n\n167\n00:09:12.390 --> 00:09:14.210\nWell, it turns out, there isn't.\n\n168\n00:09:14.210 --> 00:09:17.920\nIt turns out that we are actually\ngoing through NYEDGE2.\n\n169\n00:09:17.920 --> 00:09:20.670\nAnd because we're going through NYEDGE2,\n\n170\n00:09:20.670 --> 00:09:25.870\nthere's an extra hop in between us and\nwhere we're actually going.\n\n171\n00:09:25.870 --> 00:09:27.969\nAnd IBGP hates that.\n\n172\n00:09:27.969 --> 00:09:28.864\nIt absolutely hates that.\n\n173\n00:09:28.864 --> 00:09:30.330\nIn fact, it hates it so much,\n\n174\n00:09:30.330 --> 00:09:33.745\nI'm kinda surprised the route\nis even in our routing table.\n\n175\n00:09:33.745 --> 00:09:37.325\nWhat'll happen a lot of times is the route\nwon't even make it into the routing table,\n\n176\n00:09:37.325 --> 00:09:39.585\nwhich is what the troubleshooting\nquestion described.\n\n177\n00:09:39.585 --> 00:09:44.470\nIt said, you only see the BGP route for\n\n178\n00:09:44.470 --> 00:09:49.055\n22.33.44.0 in NYCORE2's routing table,\nbut the BGP table has a lot more routes.\n\n179\n00:09:49.055 --> 00:09:54.100\nAnd sure enough, when we do a show IP\nroute, BGP, that is the only one we see.\n\n180\n00:09:54.100 --> 00:09:55.996\nAnd if I do a show IPBGP,\n\n181\n00:09:55.996 --> 00:10:00.420\nwhich will show me that BGP database,\nI see all these other ones.\n\n182\n00:10:00.420 --> 00:10:03.540\nAnd none of them made it into\nthe routing table, all right.\n\n183\n00:10:03.540 --> 00:10:07.580\nAnd as I look at these other guys, I know\nthey're not in the routing table because,\n\n184\n00:10:07.580 --> 00:10:10.160\nif you look,\nthis little greater than symbol here,\n\n185\n00:10:10.160 --> 00:10:13.600\nthat's when it tells you it's the best\nroute and the star tells you it's valid.\n\n186\n00:10:13.600 --> 00:10:17.060\nWell, all these guys down here\ndon't have a little best marker.\n\n187\n00:10:17.060 --> 00:10:20.270\nThat means they're either being beaten\nout by another routing protocol, or\n\n188\n00:10:20.270 --> 00:10:23.140\nsomething else stopped them from\ngoing into the routing table.\n\n189\n00:10:23.140 --> 00:10:27.654\nAnd if I do a, show IP route, and start\nlooking for some of these other guys, 122,\n\n190\n00:10:27.654 --> 00:10:29.115\n152, 172, those.\n\n191\n00:10:29.115 --> 00:10:31.280\nWe can look through here.\n\n192\n00:10:31.280 --> 00:10:34.600\nAnd I don't see those guys turning up,\nRight?\n\n193\n00:10:34.600 --> 00:10:39.830\nSo 152.196.30 and if I look down\nhere 152 it's not even in the list.\n\n194\n00:10:41.820 --> 00:10:42.410\nAll right.\n\n195\n00:10:43.530 --> 00:10:46.330\nSo, what's stopping those\nguys from getting there?\n\n196\n00:10:46.330 --> 00:10:49.700\nWell, I can almost guarantee you on\nthis one it's gonna be that extra hop.\n\n197\n00:10:49.700 --> 00:10:52.270\nSo how do we fix that?\n\n198\n00:10:52.270 --> 00:10:55.240\nThere's going to be a few different\nsolutions for how we can fix this one.\n\n199\n00:10:56.710 --> 00:11:00.370\nOne example is we could go in and\nlike static route ourselves to crazy and\n\n200\n00:11:00.370 --> 00:11:02.230\njust put a bunch of routes\nall over the place.\n\n201\n00:11:02.230 --> 00:11:04.820\nIt's almost always a bad idea, so\nI don't want to go that route.\n\n202\n00:11:04.820 --> 00:11:06.163\nOption two.\n\n203\n00:11:06.163 --> 00:11:09.970\nI could just ditch IBGP all together and\ngo with EIGRP.\n\n204\n00:11:09.970 --> 00:11:11.960\nWe've got EIGRP 800 here.\n\n205\n00:11:11.960 --> 00:11:16.000\nWe can start redistributing routes in\nto ERGP8100 and learn them that way.\n\n206\n00:11:16.000 --> 00:11:19.080\nThat's another way and honestly\nthat's probably the easiest solution.\n\n207\n00:11:19.080 --> 00:11:23.592\nBut another solution would be\nif I could take NYEDGE1 and\n\n208\n00:11:23.592 --> 00:11:28.110\nsomehow hide this complexity\nin between it, right?\n\n209\n00:11:28.110 --> 00:11:30.280\nMake it where if we learn a route and\n\n210\n00:11:30.280 --> 00:11:33.990\nwe don't necessarily know a way to get\nthere or something we kinda cover that up.\n\n211\n00:11:33.990 --> 00:11:36.290\nAnd bring it in a slightly different way.\n\n212\n00:11:36.290 --> 00:11:37.819\nAnd so,\nthat's something that we may have to do.\n\n213\n00:11:37.819 --> 00:11:39.793\nLook at how these routes are documented,\nright?\n\n214\n00:11:39.793 --> 00:11:44.066\n22.33.44.0, that made it\ninto my routing table, and\n\n215\n00:11:44.066 --> 00:11:50.136\nit did that because the next hop was\n193.177.16.1, and I knew how to get there.\n\n216\n00:11:50.136 --> 00:11:55.060\nBut look at these other guys,\n172.14.0.3 is the next hop.\n\n217\n00:11:57.020 --> 00:11:58.790\nAnd who is that.\n\n218\n00:11:58.790 --> 00:12:02.410\nWell that's actually going to be our ISP1.\n\n219\n00:12:02.410 --> 00:12:03.660\nRight here.\n\n220\n00:12:03.660 --> 00:12:05.220\nThat guy.\n\n221\n00:12:05.220 --> 00:12:10.137\nWhen BGP learns a route and\nthen advertises it into your network\n\n222\n00:12:10.137 --> 00:12:13.401\nit doesn't change the next hop for IBGP.\n\n223\n00:12:13.401 --> 00:12:15.650\nThat's why you're supposed\nto have a full mesh.\n\n224\n00:12:15.650 --> 00:12:17.490\nSo with BGP,\n\n225\n00:12:17.490 --> 00:12:22.740\nthese routes are coming in with the true\nunmodified next hop, and we don't\n\n226\n00:12:22.740 --> 00:12:26.970\nknow how to get to the next hop because we\ndon't have a full mesh topology in place.\n\n227\n00:12:26.970 --> 00:12:29.720\nWe've got systems that are kinda\nskipping that little branch and\n\n228\n00:12:29.720 --> 00:12:31.280\nwe're not learning that network.\n\n229\n00:12:31.280 --> 00:12:35.060\nSo again, EIGRP could solve this,\nyou ditch IBGP altogether and\n\n230\n00:12:35.060 --> 00:12:37.150\nkinda push it out with that.\n\n231\n00:12:37.150 --> 00:12:42.440\nOr we could try and hide that public\nIP by doing like a BGP next hop.\n\n232\n00:12:42.440 --> 00:12:44.460\nAnd honestly if you're doing IBGP and\n\n233\n00:12:44.460 --> 00:12:49.090\nit's not a full mesh, you're almost always\ngoing to be doing a next hop statement.\n\n234\n00:12:49.090 --> 00:12:51.260\nAnd so that's more than likely\nwhat we need to do here.\n\n235\n00:12:51.260 --> 00:12:56.990\nBy doing that we can make it where\nwhen NYEDGE1 tells NYCORE2 about.\n\n236\n00:12:56.990 --> 00:12:59.860\nThese routes, that it just shows\nitself as being the next hop.\n\n237\n00:12:59.860 --> 00:13:02.370\nAnd we know how to get to NYEDGE1 and\n\n238\n00:13:02.370 --> 00:13:04.690\nthat'll make those guys start\nto turn up in the routing table.\n\n239\n00:13:04.690 --> 00:13:08.520\nAnd that should solve that problem and\nstart to get the routes showing up again.\n\n240\n00:13:08.520 --> 00:13:11.330\nNow we might still have a reachability\nissue, but the troubleshooting ticket\n\n241\n00:13:11.330 --> 00:13:14.080\nis really just asking for\nthese to show up in the routing table, so.\n\n242\n00:13:14.080 --> 00:13:14.970\nI bet this will solve it.\n\n243\n00:13:14.970 --> 00:13:19.960\nAnd we can knock this one out in probably\none or two commands if we do it right.\n\n244\n00:13:19.960 --> 00:13:22.210\nSo that's the route I'm gonna take.\n\n245\n00:13:22.210 --> 00:13:24.390\nLet's jump over to NYEDGE1 real quick.\n\n246\n00:13:25.820 --> 00:13:30.170\nAnd on NYEDGE1, I wanna look at\nthe BGP configuration on this one.\n\n247\n00:13:30.170 --> 00:13:33.470\nSo I'm gonna do a show run,\nand I'll begin with BGP.\n\n248\n00:13:35.940 --> 00:13:37.110\nHere we go.\n\n249\n00:13:37.110 --> 00:13:40.590\nAll right so\nmy connection to the ISP is right here.\n\n250\n00:13:40.590 --> 00:13:45.301\nSo this is the ISP and you'll see I've\ngot a remote autonomous system of 64,000,\n\n251\n00:13:45.301 --> 00:13:47.735\na local autonomous system of 32,000.\n\n252\n00:13:47.735 --> 00:13:48.419\nAll right.\n\n253\n00:13:48.419 --> 00:13:53.850\nThen I've got this neighbor 192.168.17.1.\n\n254\n00:13:53.850 --> 00:13:55.640\nThat's NYCORE2.\n\n255\n00:13:55.640 --> 00:14:00.210\nAnd we've got a remote\nautonomous system of 65534,\n\n256\n00:14:00.210 --> 00:14:04.180\nbecause that's our internal or\nIBGP as number.\n\n257\n00:14:04.180 --> 00:14:06.780\nAnd it looks like we've got a prefix\nlist filtering what's going out.\n\n258\n00:14:06.780 --> 00:14:08.189\nI'm not really worried\nabout that prefix list.\n\n259\n00:14:09.310 --> 00:14:11.640\nBecause I am seeing\nthe networks on the other side.\n\n260\n00:14:11.640 --> 00:14:14.540\nI'm just not putting them into the routing\ntable because I don't know the next hop.\n\n261\n00:14:14.540 --> 00:14:18.030\nSo what I'm gonna do is I'm gonna add\none more neighbor command to tell it,\n\n262\n00:14:18.030 --> 00:14:22.140\nwhen I advertise that neighbor,\nmake me the next hop.\n\n263\n00:14:22.140 --> 00:14:29.955\nAnd so we can do that by getting into\nour configuration saying router BGP,\n\n264\n00:14:29.955 --> 00:14:34.504\nand then my BGP as here is that 65534,\n\n265\n00:14:36.767 --> 00:14:44.801\nAnd then I'm gonna say\nneighbor 192.168.17.1.\n\n266\n00:14:44.801 --> 00:14:51.025\nAnd then here's the important part,\nis we can specify there it is.\n\n267\n00:14:51.025 --> 00:14:54.380\nNext-hop-self.\n\n268\n00:14:54.380 --> 00:14:55.120\nRight there.\n\n269\n00:14:55.120 --> 00:14:59.540\nThe default is to advertise the normal\nnext hop, we're gonna change it to us.\n\n270\n00:14:59.540 --> 00:15:06.320\nAnd so, when I add that, next-hop-self,\nnow when I advertise the routes,\n\n271\n00:15:06.320 --> 00:15:09.920\nit'll show us this guy's IP, and\nnot some external router's IP.\n\n272\n00:15:11.330 --> 00:15:16.800\nAnd it will take effect\non its own eventually,\n\n273\n00:15:16.800 --> 00:15:19.070\nbut I'm usually in a hurry,\nI don't want to wait and\n\n274\n00:15:19.070 --> 00:15:21.860\nif we're already got down time, it's\nnot that big of a deal to interrupt it.\n\n275\n00:15:21.860 --> 00:15:26.720\nSo, we can just really\nquick say clear IPBGP *.\n\n276\n00:15:26.720 --> 00:15:27.990\nSoft.\nAll right,\n\n277\n00:15:27.990 --> 00:15:31.590\nthen it says reset all my neighbor\nadjacencies and do it soft.\n\n278\n00:15:31.590 --> 00:15:34.500\nIn other words,\ndon't dump my whole routing table.\n\n279\n00:15:34.500 --> 00:15:36.050\nInstead just reach out to them and\n\n280\n00:15:36.050 --> 00:15:38.530\nrequest a whole copy of their\nrouting table over again.\n\n281\n00:15:38.530 --> 00:15:42.310\nAnd that should reset that and we'll\nprobably get a status message or two.\n\n282\n00:15:42.310 --> 00:15:45.080\nAnd I'm gonna jump over to NYCORE2.\n\n283\n00:15:46.760 --> 00:15:50.380\nAnd on NYCORE2, if I go back up here.\n\n284\n00:15:50.380 --> 00:15:54.070\nSo a moment ago I ran show IPBGP.\n\n285\n00:15:54.070 --> 00:15:57.514\nAnd all these routes down\nhere that were missing,\n\n286\n00:15:57.514 --> 00:16:01.050\nthey all have a next hop of 172.14.0.3.\n\n287\n00:16:01.050 --> 00:16:03.150\nNow that I did that next hop self,\n\n288\n00:16:03.150 --> 00:16:08.970\nI expect to see 193.177.16.1 as\nthe next hop for all these guys also.\n\n289\n00:16:08.970 --> 00:16:12.194\nAnd if I see that, then they should all\nmake it into my routing table unless\n\n290\n00:16:12.194 --> 00:16:15.785\nsomebody else is beating him out for\nadministrative distance, but I know that's\n\n291\n00:16:15.785 --> 00:16:19.033\nnot the case, because I just didn't\nsee these in my routing table at all.\n\n292\n00:16:19.033 --> 00:16:20.700\nIt's not like there was a better route.\n\n293\n00:16:20.700 --> 00:16:24.060\nWe weren't making it because we didn't\nknow how to get to that next top.\n\n294\n00:16:24.060 --> 00:16:24.590\nAll right?\n\n295\n00:16:24.590 --> 00:16:27.060\nSo that should solve that and\nthat should fix our routing table.\n\n296\n00:16:27.060 --> 00:16:29.950\nWe'll still have connectivity issues,\nI'll wager, but\n\n297\n00:16:29.950 --> 00:16:32.950\nI think that's gonna end up being\nanother troubleshooting ticket for us.\n\n298\n00:16:32.950 --> 00:16:34.630\nSo I think I've stalled long enough here.\n\n299\n00:16:34.630 --> 00:16:38.030\nLet's see what show IPBGP returns now.\n\n300\n00:16:40.160 --> 00:16:41.870\nAnd sure enough, look at all these routes.\n\n301\n00:16:41.870 --> 00:16:44.110\nNow they have all got that next hop, and\n\n302\n00:16:44.110 --> 00:16:46.300\nthe next hop is an IP\naddress that I recognize.\n\n303\n00:16:46.300 --> 00:16:48.550\nI know that IP, I know how to get there.\n\n304\n00:16:48.550 --> 00:16:53.280\nAnd, they've all got that best\nroute flag on the left side.\n\n305\n00:16:53.280 --> 00:16:58.180\nAnd if I do a, show IP route BGP,\nnow they're all in my routing table.\n\n306\n00:16:58.180 --> 00:17:01.492\nThey're in my routing table because i\nknow how to get to the next hop and so\n\n307\n00:17:01.492 --> 00:17:02.808\nnow I'll use them, right.\n\n308\n00:17:02.808 --> 00:17:07.723\nBGP will not put a route in the routing\ntable unless we know how to get to that\n\n309\n00:17:07.723 --> 00:17:08.764\nhop all right.\n\n310\n00:17:08.764 --> 00:17:13.980\nThere are certain ways to get this that\ndoesn't actually fix the problem though.\n\n311\n00:17:13.980 --> 00:17:18.580\nWhat you're doing here is they\ncall it route synchronization\n\n312\n00:17:18.580 --> 00:17:22.200\nwhere if we don't know the route,\nwell actually\n\n313\n00:17:22.200 --> 00:17:24.700\ntechnically route synchronization\nis off on this one I believe.\n\n314\n00:17:24.700 --> 00:17:28.020\nSo there is another scenario that\ncan cause these not to show up and\n\n315\n00:17:28.020 --> 00:17:32.350\nit's called route synchronization and on\nnewer equipment route synchronization is\n\n316\n00:17:32.350 --> 00:17:38.260\noff by default, on older equipment it's on\nby default and if it's on it says I will\n\n317\n00:17:38.260 --> 00:17:43.550\nnot put a BGP route in my routing table\nunless I learned it through an IGP also.\n\n318\n00:17:43.550 --> 00:17:48.130\nIn other words if I learned it\nthrough like OSPF or RIP or EIGRP.\n\n319\n00:17:48.130 --> 00:17:51.030\nAnd if I didn't learn it that way I'm not\ngoing to put it in the routing table.\n\n320\n00:17:51.030 --> 00:17:53.940\nAnd the reason we had routing\nsynchronization back in the day\n\n321\n00:17:53.940 --> 00:17:57.760\nwas because you knew if you learned it\nthrough an IGP that you knew how to get to\n\n322\n00:17:57.760 --> 00:17:59.600\nthe next hop, right?\n\n323\n00:17:59.600 --> 00:18:02.790\nBut on modern routers,\nthat route synchronization is off or,\n\n324\n00:18:02.790 --> 00:18:03.950\nit is off, by default.\n\n325\n00:18:03.950 --> 00:18:06.760\nSo that means I can put a BGP\nroute in my routing table,\n\n326\n00:18:06.760 --> 00:18:09.250\neven though I didn't learn it from an IGP.\n\n327\n00:18:09.250 --> 00:18:11.640\nAnd that means I might be attempting\nto put something in a routing table and\n\n328\n00:18:11.640 --> 00:18:12.720\nI don't know how to get to the next hop.\n\n329\n00:18:12.720 --> 00:18:14.740\nAnd that's exactly what we\njust bumped up against.\n\n330\n00:18:14.740 --> 00:18:21.530\nWe fixed that by saying let's make sure\nwe have that next top be an IP we know,\n\n331\n00:18:21.530 --> 00:18:24.230\nbut we still have reachability\nissues because the IGP problem.\n\n332\n00:18:24.230 --> 00:18:27.960\nWe may not know how to route to get there,\nnecessarily, and so we can start to bump\n\n333\n00:18:27.960 --> 00:18:31.270\ninto issues there which I think we'll\nsee in a later ticket on this one.\n\n334\n00:18:31.270 --> 00:18:34.870\nI haven't read through each of the tickets\ncuz I didn't wanna spoil the surprise but\n\n335\n00:18:34.870 --> 00:18:37.600\nI'll wager that ones gonna\ncome up on an upcoming issue.\n\n336\n00:18:37.600 --> 00:18:40.550\nBut for now what the troubleshooting\nticket asked for they said,\n\n337\n00:18:40.550 --> 00:18:44.920\nwe only saw the BGP route for 22.33.44.0,\nbut there were a lot more in the show\n\n338\n00:18:44.920 --> 00:18:50.190\nIPBGP output,\nwhy aren't they making it into the table?\n\n339\n00:18:50.190 --> 00:18:52.470\nWell we found that problem,\nwe fixed it, and\n\n340\n00:18:52.470 --> 00:18:55.070\nnow our routing table has\nthe networks in place.\n\n341\n00:18:55.070 --> 00:18:56.090\nAnd we should be good to go.\n\n342\n00:18:56.090 --> 00:18:58.010\nSo that wraps up this\ntrouble shooting ticket.\n\n343\n00:18:58.010 --> 00:19:03.535\nStay tuned we got issue\nfive coming up next.\n\n344\n00:19:03.535 --> 00:19:08.204\n[SOUND].\n\n",
          "vimeoId": "151018048"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #5` from set #7. The trouble ticket states that \"The network 219.253.183.192/26 is not being propagated from NYEDGE1 to NYCORE2 \"",
          "length": "408",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-7-5-set_7_issue_5-120715-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-7-5-set_7_issue_5-120715-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-7-5-set_7_issue_5-120715-1-sm.jpg",
          "title": "Set 7 Issue 5",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:08.418\n[MUSIC]\n\n2\n00:00:08.418 --> 00:00:10.358\nAll right, it's that time again.\n\n3\n00:00:10.358 --> 00:00:13.349\nTime for another troubleshooting\nproblem on ITProTV, and\n\n4\n00:00:13.349 --> 00:00:15.214\nwe're jumping into Set 7 Issue 5.\n\n5\n00:00:15.214 --> 00:00:18.106\nAnd this one looks like another\nBGP issue for us today.\n\n6\n00:00:18.106 --> 00:00:23.626\nIt says the network 219.253.183.192/26\n\n7\n00:00:23.626 --> 00:00:28.620\nit is not being propagated\nfrom NY edge one to NY core 2.\n\n8\n00:00:28.620 --> 00:00:29.120\nWhy not?\n\n9\n00:00:30.420 --> 00:00:32.150\nRight.\nSo we got a route that's not making it,\n\n10\n00:00:32.150 --> 00:00:33.410\nand fortunately in BGP,\n\n11\n00:00:33.410 --> 00:00:36.180\nthere's usually only a couple of\nreasons why that's gonna happen.\n\n12\n00:00:36.180 --> 00:00:39.060\nWe could have a route map or\na prefix list in place that stopping it.\n\n13\n00:00:39.060 --> 00:00:42.000\nWe could have, well the whole neighbor\nrelationship could be dead, but\n\n14\n00:00:42.000 --> 00:00:43.980\nwe know from our previous issues\nthat's not the case, right?\n\n15\n00:00:43.980 --> 00:00:45.120\nWe are exchanging routes.\n\n16\n00:00:45.120 --> 00:00:46.340\nOther things are working.\n\n17\n00:00:46.340 --> 00:00:49.990\nSo we can kind of rule out a lot of BGP\ntroubleshooting right off the bat just\n\n18\n00:00:49.990 --> 00:00:54.510\nbecause our previous ticket, where we've\nalready seen BGP communicating just fine.\n\n19\n00:00:54.510 --> 00:00:57.130\nSo that makes me immediately\nthink route map or\n\n20\n00:00:57.130 --> 00:00:58.960\nprefix list that's gonna\nbe stopping this one.\n\n21\n00:00:58.960 --> 00:01:02.240\nSo let's go in and\nsee if we can't find out which one it is.\n\n22\n00:01:02.240 --> 00:01:04.690\nNow when it comes to\na route not making it,\n\n23\n00:01:04.690 --> 00:01:07.240\nI usually look to\nthe originating router first.\n\n24\n00:01:07.240 --> 00:01:09.320\nThe originating router is normally\nthe one that causes the problem, and\n\n25\n00:01:09.320 --> 00:01:11.560\nthen I look to the receiving\nrouter after that.\n\n26\n00:01:11.560 --> 00:01:15.010\nAnd in our scenario,\nthe originating router is NY Edge 1.\n\n27\n00:01:15.010 --> 00:01:16.810\nSo I'm going to jump over to NY Edge 1,\nand\n\n28\n00:01:16.810 --> 00:01:21.790\nwhat I'm going to do is look for\nanything that would stop\n\n29\n00:01:21.790 --> 00:01:24.830\nThe 219.253.183.192 network\nfrom being advertised out.\n\n30\n00:01:24.830 --> 00:01:32.250\nWell, the first thing that would stop\nit is if it wasn't in my routing table.\n\n31\n00:01:32.250 --> 00:01:36.630\nSo I'm gonna do a show IP route, and\n\n32\n00:01:36.630 --> 00:01:40.070\nI'm gonna look for 219.253 And\nsee if we can spot it in here.\n\n33\n00:01:40.070 --> 00:01:42.550\nIf it's a big routing table I'll\nmodify the command to filter, but\n\n34\n00:01:42.550 --> 00:01:43.330\nit's not that big.\n\n35\n00:01:43.330 --> 00:01:44.460\nThere it is.\n\n36\n00:01:44.460 --> 00:01:52.310\nSo I'm looking for 219.53.183.192/26 and\nsure enough that's this guy right here.\n\n37\n00:01:52.310 --> 00:01:54.430\nSo it is in my routing table.\n\n38\n00:01:54.430 --> 00:01:57.320\nAll right and\nI didn't really care if it was BGB or\n\n39\n00:01:57.320 --> 00:02:00.170\nEIGRP or directly connected for\nthat matter.\n\n40\n00:02:00.170 --> 00:02:02.575\nI just needed to make sure that\nit was actually in my table.\n\n41\n00:02:02.575 --> 00:02:05.830\nCuz if it's not in my table, I'm not\ngonna advertise it to anybody else.\n\n42\n00:02:05.830 --> 00:02:08.010\nSo that's a big red\nflag if it's not there.\n\n43\n00:02:08.010 --> 00:02:09.160\nIn my case it is.\n\n44\n00:02:09.160 --> 00:02:12.730\nAnother thing that could stop me from\nadvertising is if I didn't have a neighbor\n\n45\n00:02:12.730 --> 00:02:17.720\nrelationship, but we saw back in issues\nthree and four that we do have a neighbor\n\n46\n00:02:17.720 --> 00:02:24.730\nrelationship, definitely issue four we saw\nit so if I do a show ip bgp summary, I can\n\n47\n00:02:24.730 --> 00:02:29.370\nlook in here and there is that neighbor\nrelationship we have with NYCORE2.\n\n48\n00:02:29.370 --> 00:02:32.980\nSo, we see them,\nwe're exchanging information with them.\n\n49\n00:02:32.980 --> 00:02:36.660\nWe're just not telling them\nwith this route up here.\n\n50\n00:02:36.660 --> 00:02:40.730\nAll right, so next let's look for\nour route map or prefix lists.\n\n51\n00:02:40.730 --> 00:02:44.060\nNow, route maps and prefix lists\nare really easy to implement and\n\n52\n00:02:44.060 --> 00:02:46.090\nthen forget about, overlook them.\n\n53\n00:02:46.090 --> 00:02:49.630\nSo what we do is look for\nthe neighbor statements in BGP.\n\n54\n00:02:49.630 --> 00:02:54.520\nAnd I'm gonna look for\nthe neighbor statement for 192.168.17.1.\n\n55\n00:02:54.520 --> 00:02:55.970\nAnd see what that turns up.\n\n56\n00:02:55.970 --> 00:03:00.990\nSo I'm gonna do a show run and\nfilter that for the neighbor command and\n\n57\n00:03:00.990 --> 00:03:05.100\nI'm gonna find 192.168.17.1 and\nthere we go.\n\n58\n00:03:05.100 --> 00:03:07.850\nI was looking for\nroute maps or prefix lists and\n\n59\n00:03:07.850 --> 00:03:10.120\nwe found a prefix list right here.\n\n60\n00:03:10.120 --> 00:03:11.250\nPrefix lists,\n\n61\n00:03:11.250 --> 00:03:14.700\nespecially outgoing ones, are used\nto filter what routes we send out.\n\n62\n00:03:14.700 --> 00:03:17.900\nWe may not want to send them every\nroute so we want to pick and choose And\n\n63\n00:03:17.900 --> 00:03:20.120\nI'll bet that's what's\ngoing on right here.\n\n64\n00:03:20.120 --> 00:03:24.580\nSo, we can do a quick show command on this\none and determine what that's going to be.\n\n65\n00:03:24.580 --> 00:03:30.160\nSo I'm just gonna do a show run and\nI'll include prefix dash list and\n\n66\n00:03:30.160 --> 00:03:31.780\nthat should turn up all\nthe prefix list commands.\n\n67\n00:03:31.780 --> 00:03:34.860\nSo, this is prefix list number ten.\n\n68\n00:03:34.860 --> 00:03:36.540\nI'm gonna have a hard time saying it.\n\n69\n00:03:36.540 --> 00:03:39.830\nIt looks like prefix list\nnumber ten is quite big.\n\n70\n00:03:39.830 --> 00:03:45.350\nAnd as I look down the list,\nthese are the networks that I'm allowing\n\n71\n00:03:45.350 --> 00:03:51.600\nto be advertised out to NYCORE2,\nand I see a lot of stuff in here.\n\n72\n00:03:51.600 --> 00:03:53.090\nI do not see 219.253.183.192.\n\n73\n00:03:53.090 --> 00:03:57.800\nThat one's missing from the list,\nso we need to get it put in there.\n\n74\n00:03:57.800 --> 00:04:01.220\nNow, when I go to put it in, I'm gonna\njust need to remember the syntax for\n\n75\n00:04:01.220 --> 00:04:03.480\nthis and how they work,\nhow it works kinda like ACLs, right?\n\n76\n00:04:03.480 --> 00:04:06.480\nWhen I add an entry,\nit's just gonna add onto this list.\n\n77\n00:04:06.480 --> 00:04:09.700\nAnd we can just stick it right on the end\nhere cause we don't have any denys or\n\n78\n00:04:09.700 --> 00:04:11.070\nanything to worry about on this list.\n\n79\n00:04:11.070 --> 00:04:12.130\nThat makes it easy.\n\n80\n00:04:12.130 --> 00:04:13.900\nSo, I'll just tack it right to the end.\n\n81\n00:04:13.900 --> 00:04:16.070\nAnd it's a slash 26.\n\n82\n00:04:16.070 --> 00:04:18.990\nAnd so, I need to make sure that\nwhen I add it I do kind of like what\n\n83\n00:04:18.990 --> 00:04:21.750\nyou see they're doing up\nhere with the slash 26, and\n\n84\n00:04:21.750 --> 00:04:25.920\nthey're doing this less than or\nequal to with the next range in line.\n\n85\n00:04:25.920 --> 00:04:28.860\nI just wanna make sure that I kinda\nfollow what they're doing to put it in as\n\n86\n00:04:28.860 --> 00:04:30.040\ncomparable as possible.\n\n87\n00:04:30.040 --> 00:04:31.250\nThey didn't really ask me to do that.\n\n88\n00:04:31.250 --> 00:04:32.970\nThey just want us to do /26.\n\n89\n00:04:32.970 --> 00:04:34.960\nSo either way would more than likely work.\n\n90\n00:04:34.960 --> 00:04:38.060\nAll right, so\nI'm going to jump into my configuration.\n\n91\n00:04:38.060 --> 00:04:40.160\nI'll do ip prefix-list.\n\n92\n00:04:40.160 --> 00:04:44.580\n10 sequence 60.\n\n93\n00:04:44.580 --> 00:04:49.660\nI'm just gonna add right\nonto the end of that one.\n\n94\n00:04:49.660 --> 00:04:55.360\nAnd I'm gonna permit 219\ndot 253 dot 183 dot 192.\n\n95\n00:04:55.360 --> 00:04:59.550\nAnd then I need to just add\na little bit more to that\n\n96\n00:04:59.550 --> 00:05:03.570\nto make sure that it knows\nthe mask that I'm using.\n\n97\n00:05:03.570 --> 00:05:09.003\nSo I'm gonna put slash 25 LE 26, right?\n\n98\n00:05:09.003 --> 00:05:13.060\nSo, /25 would be the parent\nnetwork less than or\n\n99\n00:05:13.060 --> 00:05:17.850\nequal to /26 that we're grabbing\nanything that fits inside of that range.\n\n100\n00:05:17.850 --> 00:05:21.810\nSo I'm going to add that on,\nand once that's in place,\n\n101\n00:05:21.810 --> 00:05:27.330\nif I do that show run and\ninclude prefix-list,\n\n102\n00:05:27.330 --> 00:05:29.920\nwe can verify that it made it in there and\nkind of tacked on to the end.\n\n103\n00:05:29.920 --> 00:05:30.420\nThere it is.\n\n104\n00:05:31.430 --> 00:05:33.480\nAnd we should be good to go.\n\n105\n00:05:33.480 --> 00:05:36.990\nNow prefix lists apply every time\nyou advertise the traffic out.\n\n106\n00:05:36.990 --> 00:05:40.210\nSo within a few moments that\nshould kick in and start working.\n\n107\n00:05:40.210 --> 00:05:43.510\nI doubt we'll even have to reset\nthat process, but we could always do\n\n108\n00:05:43.510 --> 00:05:46.860\na soft reset if we wanted to be on\nthe safe side just to clear that out.\n\n109\n00:05:46.860 --> 00:05:48.520\nBut we, we should be good to go.\n\n110\n00:05:48.520 --> 00:05:51.770\nSo let's jump over to the other side and\nsee if that's the case.\n\n111\n00:05:51.770 --> 00:05:53.605\nSo I'm gonna jump back over to core two.\n\n112\n00:05:53.605 --> 00:05:59.830\nAnd, I never really did check to see if\nit was missing in the first place, right?\n\n113\n00:05:59.830 --> 00:06:02.540\nI always like to verify the problem\nexists, before I trouble shoot it.\n\n114\n00:06:02.540 --> 00:06:04.080\nBut I, I didn't do that this time.\n\n115\n00:06:04.080 --> 00:06:05.379\nBut I'm gonna do a show i-p route.\n\n116\n00:06:06.760 --> 00:06:09.550\nAnd I'm gonna look for\nthat 219 network, and\n\n117\n00:06:09.550 --> 00:06:11.940\nsee if it made it over, and there it is.\n\n118\n00:06:11.940 --> 00:06:15.840\nNice, shiny, and new, I can see I've\nknown about it for 19 seconds now.\n\n119\n00:06:15.840 --> 00:06:19.330\nSo that's good enough for me to know\nthat I just received that recently,\n\n120\n00:06:19.330 --> 00:06:23.360\nversus some of these other BGP routes that\nI've known for 18 minutes, or an hour and\n\n121\n00:06:23.360 --> 00:06:25.920\na half, this one I've only known for\n19 seconds.\n\n122\n00:06:25.920 --> 00:06:27.680\nSo I learned that one and\n\n123\n00:06:27.680 --> 00:06:31.040\nnow it's in place so, just a simple\nprefix list excluding a route.\n\n124\n00:06:31.040 --> 00:06:33.450\nOnce we put that in,\nthis one was fixed and\n\n125\n00:06:33.450 --> 00:06:35.860\nthat's another trouble shooting\nticket under our belts.\n\n126\n00:06:35.860 --> 00:06:37.420\nSo, that will wrap this one up.\n\n127\n00:06:37.420 --> 00:06:38.047\nStay tuned,\n\n128\n00:06:38.047 --> 00:06:42.208\nwe've got one more troubleshooting ticket\nin this set that we'll be getting to next.\n\n129\n00:06:42.208 --> 00:06:47.826\n[MUSIC]\n\n",
          "vimeoId": "151018047"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #6` from set #7. The trouble ticket states that \"The loopback interface 20 on NYEDGE1 is not being propagated through to NYCORE2 \"",
          "length": "538",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-7-6-set_7_issue_6-120715-PGM.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-7-6-set_7_issue_6-120715-PGM-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-7-6-set_7_issue_6-120715-PGM-sm.jpg",
          "title": "Set 7 Issue 6",
          "transcript": "WEBVTT\n\n1\n00:00:00.205 --> 00:00:08.344\n[MUSIC]\n\n2\n00:00:08.344 --> 00:00:12.170\nAll right, welcome back to the last\ntroubleshooting issue for Set 7.\n\n3\n00:00:12.170 --> 00:00:15.070\nWe got a final BGP issue, or probably BGP.\n\n4\n00:00:15.070 --> 00:00:20.070\nIt says that the loopback interface,\nloopback interface number 20\n\n5\n00:00:20.070 --> 00:00:24.960\non NYEDGE1 is not being\npropagated through to NYCORE2.\n\n6\n00:00:24.960 --> 00:00:26.720\nSo another route that's\nnot making it across.\n\n7\n00:00:26.720 --> 00:00:29.790\nRemember, in the last ticket we had\na route that wasn't making it across\n\n8\n00:00:29.790 --> 00:00:31.580\nbecause of a prefix list.\n\n9\n00:00:31.580 --> 00:00:32.530\nMaybe this one's the same.\n\n10\n00:00:32.530 --> 00:00:34.790\nWe'll luck out, same problem,\nbe done, and be in business.\n\n11\n00:00:34.790 --> 00:00:38.280\nSo, just loopback interface 20 on NYEDGE1.\n\n12\n00:00:38.280 --> 00:00:41.400\nLet's jump in and\nlook at good old NYEDGE1.\n\n13\n00:00:42.420 --> 00:00:45.064\nAnd we'll go ahead and enable and\n\n14\n00:00:45.064 --> 00:00:51.111\nI'm gonna do a show IP interface brief\njust to figure what loopback 20 is,\n\n15\n00:00:51.111 --> 00:00:56.039\nand there it is, so\nloopback 20 is 15.20.0.33.\n\n16\n00:00:56.039 --> 00:00:59.914\nAll right, and\nif I do a show run interface lo20,\n\n17\n00:00:59.914 --> 00:01:04.065\nit is a 255.255.255.224 network, so\n\n18\n00:01:04.065 --> 00:01:08.060\na slightly different subnet mask for\nus there.\n\n19\n00:01:08.060 --> 00:01:11.770\nBut, basically, it's up, it's going,\nand it appears to be happy.\n\n20\n00:01:11.770 --> 00:01:14.990\nIt's up, up, and I'm sure it's in our\nrouting table, I'll double check.\n\n21\n00:01:14.990 --> 00:01:17.900\nIt's a directly connected route, you\nknow it's gonna be in the routing table.\n\n22\n00:01:17.900 --> 00:01:20.920\nBut just to be on the safe\nside we'll just scan that\n\n23\n00:01:20.920 --> 00:01:23.460\nreal quick to make sure\nnothing crazy's going on.\n\n24\n00:01:23.460 --> 00:01:24.715\nAnd there it is.\n\n25\n00:01:24.715 --> 00:01:26.182\n15.20.0.32/27.\n\n26\n00:01:26.182 --> 00:01:27.230\nAll right.\n\n27\n00:01:27.230 --> 00:01:30.850\nSo, we've got it right here and\n\n28\n00:01:30.850 --> 00:01:35.450\nif we jump over to NYCORE 2 we can\nverify that it's not showing up there.\n\n29\n00:01:35.450 --> 00:01:40.410\nSo I'll jump over to NYCORE2 and,\njust do a show IP route,\n\n30\n00:01:40.410 --> 00:01:42.279\nand I'm gonna look for that network.\n\n31\n00:01:43.570 --> 00:01:46.580\nAnd I know right away there's\nnothing here that starts with 15 and\n\n32\n00:01:46.580 --> 00:01:48.580\nthat's where it should be and\nit's not there.\n\n33\n00:01:48.580 --> 00:01:50.620\nSo it's definitely not\nmaking it to this side.\n\n34\n00:01:50.620 --> 00:01:52.320\nSo, let's double check that prefix list,\n\n35\n00:01:52.320 --> 00:01:55.420\nsee if we've got revenge of\nthe prefix list going on.\n\n36\n00:01:55.420 --> 00:01:57.760\nOops, if I jump to the right\ndevice that'll make a difference.\n\n37\n00:01:57.760 --> 00:02:00.921\nSo I jump back to EDGE1 and\nI'm just gonna look and\n\n38\n00:02:00.921 --> 00:02:03.568\nsee if that network is in the prefix list.\n\n39\n00:02:05.274 --> 00:02:07.040\nAnd so we'll pull that up.\n\n40\n00:02:07.040 --> 00:02:10.680\nI'm doing a show running dash config and\nI'm going to use the include command to\n\n41\n00:02:10.680 --> 00:02:13.350\nfilter it just tp lines\nincluding prefix list.\n\n42\n00:02:13.350 --> 00:02:18.910\nAnd there is prefix list number ten and\nas I look down the line, well I've got\n\n43\n00:02:18.910 --> 00:02:23.950\nthis guy right here,\n15.0.0.0/8 less than or equal to 24.\n\n44\n00:02:23.950 --> 00:02:31.180\nSo that's gonna get anything that's\na /24 or smaller, /25, /26 and so on.\n\n45\n00:02:31.180 --> 00:02:33.990\nThat's not gonna include this one, is it?\n\n46\n00:02:33.990 --> 00:02:37.177\nThis one's a slash,\ndid we say it was a /27?\n\n47\n00:02:37.177 --> 00:02:38.290\nLet's see.\n\n48\n00:02:38.290 --> 00:02:39.180\nThis on is a /27.\n\n49\n00:02:39.180 --> 00:02:44.810\nSo that should get, I'm trying to think\nif that's gonna get wrapped up or not.\n\n50\n00:02:44.810 --> 00:02:46.450\nThat should, well, you know what?\n\n51\n00:02:46.450 --> 00:02:47.540\nLet's just be on the safe side here.\n\n52\n00:02:47.540 --> 00:02:50.200\nI'm gonna go ahead and manually add and\nI'll add it the right way.\n\n53\n00:02:50.200 --> 00:02:57.097\nSo, I'm gonna jump in here and\ndo an ip prefix-list 10 seq 70.\n\n54\n00:02:57.097 --> 00:02:59.120\nI'm just gonna tack right\nonto the end of this one.\n\n55\n00:02:59.120 --> 00:03:00.430\nBetter safe than sorry on this one.\n\n56\n00:03:00.430 --> 00:03:03.640\nI'll make sure I put the list in\nthe right way so I know that it works.\n\n57\n00:03:03.640 --> 00:03:07.647\nSo, I'm gonna do seq 70 permit and\nI'm gonna punch in this network, right?\n\n58\n00:03:07.647 --> 00:03:15.200\nThe 15.20.0.32/26 less than or\nequal to 27.\n\n59\n00:03:15.200 --> 00:03:16.590\nRight?\n\n60\n00:03:16.590 --> 00:03:21.330\nAnd that way I know I'm getting this\n/27 the way that I need it to be so\n\n61\n00:03:21.330 --> 00:03:22.730\nthat it gets wrapped up in that one.\n\n62\n00:03:22.730 --> 00:03:27.010\nAll right, now once that's done if\nthe prefix list is our problem,\n\n63\n00:03:27.010 --> 00:03:28.500\nwhich it looks like it was.\n\n64\n00:03:28.500 --> 00:03:30.810\nThen we should start learning\nthat route on the other side.\n\n65\n00:03:30.810 --> 00:03:33.740\nAnd we saw in issue number six that\nit only took about 19 seconds,\n\n66\n00:03:33.740 --> 00:03:36.360\nprobably less than that,\nto get learned on the other side.\n\n67\n00:03:36.360 --> 00:03:38.930\nSo I'm gonna jump over to the other\nside and we'll see what we've got.\n\n68\n00:03:38.930 --> 00:03:40.764\nSo jumping over to NYCORE2.\n\n69\n00:03:42.645 --> 00:03:45.500\nI'm just gonna do a show ip route.\n\n70\n00:03:47.440 --> 00:03:51.180\nAnd it is not there which I might\nnot have waited long enough but\n\n71\n00:03:51.180 --> 00:03:52.840\nwe can also look at the bgp database.\n\n72\n00:03:52.840 --> 00:03:56.720\nI'll do a show IP bgp and\nwe can look at the bgp database and\n\n73\n00:03:56.720 --> 00:04:01.440\nmaybe it just hasn't made it through and\nit is not here either.\n\n74\n00:04:01.440 --> 00:04:04.770\nSo let's see it has been\n19 seconds I'm sure.\n\n75\n00:04:04.770 --> 00:04:05.930\nAnd it's not here.\n\n76\n00:04:05.930 --> 00:04:06.930\nAll right.\n\n77\n00:04:06.930 --> 00:04:08.780\nSo still not getting that route.\n\n78\n00:04:08.780 --> 00:04:11.370\nI thought we had an easy one, I thought\nit was gonna be the prefix list again,\n\n79\n00:04:11.370 --> 00:04:11.950\nbut it was not.\n\n80\n00:04:11.950 --> 00:04:16.490\nSo in this scenario,\nI've got some other problem.\n\n81\n00:04:16.490 --> 00:04:19.718\nOkay, it could be that the route's not\ncoming in here and I'm filtering it,\n\n82\n00:04:19.718 --> 00:04:21.900\nmaybe I've got a route map or\na prefix list on my end,\n\n83\n00:04:21.900 --> 00:04:24.205\nalthough incoming prefix\nlists are pretty uncommon.\n\n84\n00:04:24.205 --> 00:04:27.755\nIt's not impossible,\na route map would be more realistic there.\n\n85\n00:04:27.755 --> 00:04:32.090\nSo, let's just do a show run, and\nI'm going to jump to the bgp section and\n\n86\n00:04:32.090 --> 00:04:33.550\nsee what we've got in here.\n\n87\n00:04:33.550 --> 00:04:38.500\nAnd what I'm looking for are route maps\nand I'm looking for prefix lists and\n\n88\n00:04:38.500 --> 00:04:39.620\nI don't see any.\n\n89\n00:04:39.620 --> 00:04:43.778\nSo I've got BGP turned on for BGPAS 65534.\n\n90\n00:04:43.778 --> 00:04:45.972\nI know that's working because\nI am exchanging routes.\n\n91\n00:04:45.972 --> 00:04:48.629\nI've got a neighbor with\nan update source of Vlan17.\n\n92\n00:04:48.629 --> 00:04:51.938\nAnd again I know that's working\nbecause I am exchanging routes.\n\n93\n00:04:51.938 --> 00:04:54.574\nI don't see anything here\nthat's jumping out at me.\n\n94\n00:04:54.574 --> 00:04:59.820\nSo let's jump back to the other side and\ntake a look at what we've got over there.\n\n95\n00:04:59.820 --> 00:05:02.854\nSo im going to jump back over to NYEDGE1.\n\n96\n00:05:02.854 --> 00:05:07.275\nAnd let's just do a show run and\nI'll begin that with BGP and\n\n97\n00:05:07.275 --> 00:05:09.851\nsee what we've got going on here.\n\n98\n00:05:09.851 --> 00:05:12.723\nAll right so I've got router bgp 65534.\n\n99\n00:05:12.723 --> 00:05:17.605\nAnd we've got quite a lot,\nwe've got our connection with the other\n\n100\n00:05:17.605 --> 00:05:22.232\nISP here we've got our connection\nwith NYCORE2 where we do have\n\n101\n00:05:22.232 --> 00:05:25.935\na prefix list that we've\nkind of already resolve.\n\n102\n00:05:25.935 --> 00:05:30.239\nSo that's fine and\nwe've got our network statements and oh,\n\n103\n00:05:30.239 --> 00:05:34.610\nactually I think that's gonna\nbe our issue right there.\n\n104\n00:05:34.610 --> 00:05:38.258\nIf you take a look at that network\nstatement, there's a network statement for\n\n105\n00:05:38.258 --> 00:05:39.927\nthe 15.20.0.0 network.\n\n106\n00:05:39.927 --> 00:05:43.909\nBut look at that subnet\nmask 255.255.255.0.\n\n107\n00:05:43.909 --> 00:05:45.510\nAll right?\n\n108\n00:05:45.510 --> 00:05:49.120\nWith BGP the subnet masks\nare really specific.\n\n109\n00:05:49.120 --> 00:05:51.020\nIt's gonna match the subnet mask for\nthat interface.\n\n110\n00:05:51.020 --> 00:05:54.360\nAnd in this case that doesn't match,\nright?\n\n111\n00:05:54.360 --> 00:05:57.060\nWe saw earlier that it was, what was it,\n\n112\n00:05:57.060 --> 00:06:01.670\nit was 255.255.25, was it,\n255.224, I think is what it was.\n\n113\n00:06:01.670 --> 00:06:03.310\nLet's verify that.\n\n114\n00:06:03.310 --> 00:06:08.530\nI'm gonna do a quick show run int lo20.\n\n115\n00:06:08.530 --> 00:06:12.002\nAnd there it is, 255.255.255.224, right?\n\n116\n00:06:12.002 --> 00:06:17.790\nSignificantly smaller that the one that's\nbeing used in that network statement.\n\n117\n00:06:17.790 --> 00:06:21.770\nSo looks like we have a bad network\nstatement, so we can get in and fix that.\n\n118\n00:06:21.770 --> 00:06:25.063\nWe'll do router bpg 65534.\n\n119\n00:06:25.063 --> 00:06:29.339\nAnd then, once we're in there,\n\n120\n00:06:29.339 --> 00:06:35.297\nwe can do network, and 15.20.0.32\n\n121\n00:06:35.297 --> 00:06:42.570\nmask 255.255.255.224, all right?\n\n122\n00:06:42.570 --> 00:06:44.950\nAnd while we're in there, it wouldn't\nhurt to take the other one out,\n\n123\n00:06:44.950 --> 00:06:48.090\nsince it's kind of not really\ndoing anything for us.\n\n124\n00:06:48.090 --> 00:06:52.060\nSo that was that 15.20.0\nwith a class c mask on it.\n\n125\n00:06:52.060 --> 00:06:55.410\nSo I'll just take this.\n\n126\n00:06:55.410 --> 00:06:59.330\nAnd we'll get that one out of there, so\nwe don't have a bad statement in our link.\n\n127\n00:07:00.420 --> 00:07:08.570\nSo, once I do that, let's take\na look at that configuration again.\n\n128\n00:07:08.570 --> 00:07:11.890\nAnd so now when I look at it I've got\na network statement that 15.20.0.32\n\n129\n00:07:11.890 --> 00:07:13.700\nwith the correct masks.\n\n130\n00:07:13.700 --> 00:07:16.200\nThat matches exactly what we've got.\n\n131\n00:07:16.200 --> 00:07:20.920\nAnd the prefix list has been updated,\nwhich still was an issue and so\n\n132\n00:07:20.920 --> 00:07:22.860\nwe've got that taken care of.\n\n133\n00:07:22.860 --> 00:07:23.979\nLet's see if our route shows up now.\n\n134\n00:07:25.395 --> 00:07:30.900\nI'm gonna jump over to CORE2 and on\nCORE2 I'm just gonna do a show ip route.\n\n135\n00:07:30.900 --> 00:07:36.580\nAnd Whoop, there we go.\n\n136\n00:07:36.580 --> 00:07:39.720\nWay down here at the bottom because\nit just came in, well 51 seconds ago,\n\n137\n00:07:39.720 --> 00:07:40.550\nit says.\n\n138\n00:07:40.550 --> 00:07:45.110\nSo looking at this I can see I've got\nthat 15.20.0.32, made it right in there.\n\n139\n00:07:45.110 --> 00:07:51.500\nWe've got that route in place, and if I do\na show ip bgp, it should be in there too.\n\n140\n00:07:51.500 --> 00:07:52.850\nAnd there it is right at the top.\n\n141\n00:07:52.850 --> 00:07:54.880\nWe didn't see that earlier but now it is.\n\n142\n00:07:54.880 --> 00:07:58.070\nSo in this case we had\na bad network statement and\n\n143\n00:07:58.070 --> 00:07:59.890\nwe had the prefix list\nthat we're capturing.\n\n144\n00:07:59.890 --> 00:08:02.010\nAnd we fixed those two problems,\nit came right over.\n\n145\n00:08:02.010 --> 00:08:04.340\nThey had me, I thought it was\njust the prefix list again but\n\n146\n00:08:04.340 --> 00:08:06.120\nthis one turned out to\nbe a little bit more.\n\n147\n00:08:06.120 --> 00:08:09.840\nNow on the exam, there are other problems\nthat can creep up that could cause this,\n\n148\n00:08:09.840 --> 00:08:15.880\nthings like bad next hops, we saw that,\nprefix lists, bad network statements.\n\n149\n00:08:15.880 --> 00:08:17.770\nBad redistribution,\nthat's another big one.\n\n150\n00:08:17.770 --> 00:08:22.590\nWhere they redistribute into BGP and the\nredistribute command has a route map or\n\n151\n00:08:22.590 --> 00:08:25.370\na filter assigned to it, and it excludes\nthe network you're looking for.\n\n152\n00:08:25.370 --> 00:08:27.700\nSo, those are all things you\nwant to keep an eye out for.\n\n153\n00:08:27.700 --> 00:08:29.730\nBut, in this scenario, that wraps it up.\n\n154\n00:08:29.730 --> 00:08:32.460\nThat one gets our route\nin the routing table.\n\n155\n00:08:32.460 --> 00:08:33.990\nAnd that troubleshooting\nticket is resolved.\n\n156\n00:08:33.990 --> 00:08:37.430\nA loopback interface is now being\npropagated in the network, and\n\n157\n00:08:37.430 --> 00:08:39.480\nwe can chalk that one up to being done.\n\n158\n00:08:39.480 --> 00:08:43.570\nAnd that's the last problem here for set\nnumber seven, so that one's taken care of.\n\n159\n00:08:43.570 --> 00:08:48.190\nDefinitely stay tuned cuz we're gonna\nbe kicking off set number eight next.\n\n160\n00:08:48.190 --> 00:08:49.946\nIt'll be a good time, and\nI hope to see you then.\n\n161\n00:08:51.246 --> 00:08:57.264\n[MUSIC]\n\n",
          "vimeoId": "151018045"
        },
        {
          "description": "In this episode Don revisits Issue #4 to solve the issue of establishing reachability.",
          "length": "433",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-7-b-set_7_bonus-120715-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-7-b-set_7_bonus-120715-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-7-b-set_7_bonus-120715-1-sm.jpg",
          "title": "Set 7 Bonus",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:08.790\n[MUSIC]\n\n2\n00:00:08.790 --> 00:00:12.073\nAll right, welcome back to another\ntroubleshooting segment here on ITPro TV,\n\n3\n00:00:12.073 --> 00:00:14.970\nand this one, well we're going off\nthe paper a little bit on this one.\n\n4\n00:00:14.970 --> 00:00:18.100\nI wanna double back to\nan issue we had earlier.\n\n5\n00:00:18.100 --> 00:00:22.070\nIssue number four where the troll\nshooting ticket was a network that wasn't\n\n6\n00:00:22.070 --> 00:00:24.270\nbeing advertised to a BGP partner, right?\n\n7\n00:00:24.270 --> 00:00:27.210\nAnd we resolved issue number four,\nif you haven't watched that go ahead and\n\n8\n00:00:27.210 --> 00:00:29.430\ngo back and\nwatch that before you do this bonus.\n\n9\n00:00:29.430 --> 00:00:32.520\nBut by the end of the episode\nwe had solved the problem.\n\n10\n00:00:32.520 --> 00:00:35.480\nThe route that wasn't being advertised,\nwe were now learning.\n\n11\n00:00:35.480 --> 00:00:38.070\nLet me read to you the topology here,\nI'll show you what I'm talking about.\n\n12\n00:00:38.070 --> 00:00:41.340\nThe routing question was\noriginating here on NYEDGE1.\n\n13\n00:00:41.340 --> 00:00:47.420\nIt was 22.33.44.0/24, I believe,\nso that was the network.\n\n14\n00:00:47.420 --> 00:00:50.210\nAnd it wasn't making it over to NYCORE2\n\n15\n00:00:50.210 --> 00:00:52.460\nbecause there was a prefix\nlist that was stopping it.\n\n16\n00:00:52.460 --> 00:00:57.570\nOr actually, the problem wasn't that,\nthe problem was the 22.33.44.0\n\n17\n00:00:57.570 --> 00:01:01.810\nwas making it over to NYCORE2,\nthe other routes weren't making it there.\n\n18\n00:01:01.810 --> 00:01:04.780\nAnd when we looked at NYCORE2 we saw where\nthe other routes actually made it to us.\n\n19\n00:01:04.780 --> 00:01:06.680\nIt wasn't the prefix list,\nthe routes did make it.\n\n20\n00:01:06.680 --> 00:01:10.140\nIt's just we didn't put them\ninto our routing table,\n\n21\n00:01:10.140 --> 00:01:12.540\nbecause we didn't know the next hop.\n\n22\n00:01:12.540 --> 00:01:14.810\nAnd so to solve ticket number four,\n\n23\n00:01:14.810 --> 00:01:19.340\nwhat we did is we did a next hop\nself command up here on NYEDGE1.\n\n24\n00:01:19.340 --> 00:01:22.270\nSo the NYCORE2 would know how\nto get to those networks.\n\n25\n00:01:22.270 --> 00:01:25.790\nAnd that made them show up in the routing\ntable and that solved the ticket.\n\n26\n00:01:25.790 --> 00:01:28.390\nBut I didn't really like the way\nthat ticket ended because\n\n27\n00:01:28.390 --> 00:01:31.540\nwhile we saw the networks\nthey weren't reachable.\n\n28\n00:01:31.540 --> 00:01:33.570\nWhen we tried to Pinged them,\nthey couldn't reach.\n\n29\n00:01:33.570 --> 00:01:37.200\nAnd I made a comment at the end of\nissue number four, where I said\n\n30\n00:01:37.200 --> 00:01:40.980\nI'm sure that will turn up as one of the\nquestions that are coming up after this.\n\n31\n00:01:40.980 --> 00:01:42.960\nCuz I haven't read the questions, right?\n\n32\n00:01:42.960 --> 00:01:44.930\nI'm figuring these out\nthe way that you guys would.\n\n33\n00:01:44.930 --> 00:01:47.170\nAnd it didn't, it didn't come back up.\n\n34\n00:01:47.170 --> 00:01:49.340\nThey never actually had us\nestablish reachability.\n\n35\n00:01:49.340 --> 00:01:52.580\nSo I wanted to revisit that and show you\nguys why we don't have reachability.\n\n36\n00:01:52.580 --> 00:01:57.680\nThe main thing to remember is that BGP\nactually doesn't care about reachability.\n\n37\n00:01:57.680 --> 00:02:00.480\nBGP is not a very good routing protocol.\n\n38\n00:02:00.480 --> 00:02:04.120\nIt's designed to handle very, very,\nvery large and complex networks.\n\n39\n00:02:04.120 --> 00:02:06.390\nAnd it sacrifices accuracy for that.\n\n40\n00:02:06.390 --> 00:02:09.530\nIt doesn't worry about the little\nhops in between networks.\n\n41\n00:02:09.530 --> 00:02:13.850\nIt assumes that you have an interior\nrouting protocol there to help you.\n\n42\n00:02:13.850 --> 00:02:16.280\nAnd if you don't have an interior protocol\n\n43\n00:02:16.280 --> 00:02:18.330\nthen you'll have reachabiity\nissues like we did.\n\n44\n00:02:18.330 --> 00:02:20.600\nWhere we learn the network but\nwe can't get to it right.\n\n45\n00:02:20.600 --> 00:02:23.770\nNow if you take a look at this topology,\nwe got BGP but\n\n46\n00:02:23.770 --> 00:02:25.890\nin the background there's EIGRP 800.\n\n47\n00:02:25.890 --> 00:02:31.600\nThe real problem here is that while we\nmight have known how to get to NYEDGE2 and\n\n48\n00:02:31.600 --> 00:02:34.860\nback again with BGP,\nwe didn't know of the other protocol and\n\n49\n00:02:34.860 --> 00:02:36.530\nwe didn't know that intermediary hops.\n\n50\n00:02:36.530 --> 00:02:40.440\nThis guy, NYEDGE2 is in the mix and\ncausing us problems.\n\n51\n00:02:40.440 --> 00:02:44.240\nNow, iBGP really wants you to have\nfull match across your routers, but\n\n52\n00:02:44.240 --> 00:02:47.160\nyou don't have to have it as\nlong as you've got a good\n\n53\n00:02:47.160 --> 00:02:49.860\ninterior routing protocol running too.\n\n54\n00:02:49.860 --> 00:02:51.670\nLet me show you how easy it is for\nus to fix this.\n\n55\n00:02:51.670 --> 00:02:53.310\nI'm gonna go back to NYCORE2, right?\n\n56\n00:02:53.310 --> 00:02:55.840\nThat's kind of where our\nadventure starts here.\n\n57\n00:02:55.840 --> 00:03:01.310\nAnd on NYCORE2 the network that I\ncouldn't get to was 22.33.44.10,\n\n58\n00:03:01.310 --> 00:03:04.010\nthat was the host.\n\n59\n00:03:04.010 --> 00:03:07.380\nAnd if I try and\nping to it I get some unreachables, right?\n\n60\n00:03:07.380 --> 00:03:10.810\nAnd it's the weird unreachable where you\nget the little dot in between cuz it takes\n\n61\n00:03:10.810 --> 00:03:12.350\nso long to time out.\n\n62\n00:03:12.350 --> 00:03:14.600\nAnd it's really weird if\nwe do a trace route, right?\n\n63\n00:03:14.600 --> 00:03:17.760\nIf I try and trace route To that address.\n\n64\n00:03:17.760 --> 00:03:20.410\nIt's gonna show me\nthe path that I follow and\n\n65\n00:03:20.410 --> 00:03:24.450\nin my routing table it says\nI learned a BGP route.\n\n66\n00:03:24.450 --> 00:03:30.300\nAnd the routing table says go\nstraight from NYCORE2 to NYEDGE1 and\n\n67\n00:03:30.300 --> 00:03:32.870\nif you remember I made that comment where\nwe were talking about I said boy I hope\n\n68\n00:03:32.870 --> 00:03:36.150\nthere's an undocumented link between these\ntwo otherwise this isn't gonna work.\n\n69\n00:03:36.150 --> 00:03:39.500\nWell there wasn't an undocumented link and\nit didn't work.\n\n70\n00:03:39.500 --> 00:03:42.220\nI can't go to a next hop\nthat's away like this.\n\n71\n00:03:42.220 --> 00:03:45.100\nI need to be directly connected somehow,\nor BGP chokes.\n\n72\n00:03:45.100 --> 00:03:47.330\nAnd in this case BGP chokes.\n\n73\n00:03:47.330 --> 00:03:49.970\nI learned a BGP route and\nit's not good enough.\n\n74\n00:03:49.970 --> 00:03:53.820\nI really need to learn an interior route,\nwhich I would have to learn from EDGE2,\n\n75\n00:03:53.820 --> 00:03:58.450\nwho is not really participating in BGP at\nall, and so it doesn't have that route.\n\n76\n00:03:58.450 --> 00:04:00.440\nAnd there's where our breakdown comes in.\n\n77\n00:04:00.440 --> 00:04:03.190\nAll right, and so\nif I look at the trace route,\n\n78\n00:04:03.190 --> 00:04:07.570\nmy next hop is that other edge router,\nNYEDGE2.\n\n79\n00:04:07.570 --> 00:04:09.670\nAnd look at that response.\n\n80\n00:04:09.670 --> 00:04:12.665\nHost unreachable, it can't get there,\nit doesn't know how.\n\n81\n00:04:12.665 --> 00:04:15.565\nMy next hop doesn't know\nhow to get to that network.\n\n82\n00:04:15.565 --> 00:04:22.265\nSo I need to get my IGP working before\nI can expect my EGP to function right.\n\n83\n00:04:22.265 --> 00:04:24.705\nAnd so, just as a quick and\neasy solution here,\n\n84\n00:04:24.705 --> 00:04:27.205\ncuz I don't wanna spend a huge\nton of time on this one.\n\n85\n00:04:27.205 --> 00:04:30.915\nBut if we just go around and fix IRGP\nto route for our various networks,\n\n86\n00:04:30.915 --> 00:04:31.895\nthat'll solve the problem.\n\n87\n00:04:31.895 --> 00:04:37.020\nSo if I go into NYEDGE1, and\nI go into router EIGRP 800.\n\n88\n00:04:37.020 --> 00:04:41.240\nNormally I would do a network command for\neach of the interior networks,\n\n89\n00:04:41.240 --> 00:04:44.960\nbut I'll just do all zero's here, right?\n\n90\n00:04:44.960 --> 00:04:48.620\nSo, I'm turning on EIGRP 800 for\nall of my internal networks.\n\n91\n00:04:48.620 --> 00:04:51.590\nWell and my WAN interface too so we'd\nwant to do some passive interfaces and\n\n92\n00:04:51.590 --> 00:04:52.320\nstuff to solve all that.\n\n93\n00:04:52.320 --> 00:04:54.450\nBut I'll go ahead and throw that in.\n\n94\n00:04:54.450 --> 00:04:57.690\nAnd then I'll jump to NYEDGE2, and\nI'm gonna do the exact same thing.\n\n95\n00:04:59.560 --> 00:05:05.230\nSo I'll get into router EIGRP 800 and\nI'll just enable it for all my networks.\n\n96\n00:05:05.230 --> 00:05:08.390\nAnd again, in real life lan, I would be a\nlittle more specific here and take care of\n\n97\n00:05:08.390 --> 00:05:13.050\nit, but I don't wanna waste you guys\ntime on a bonus one here but we'll churn\n\n98\n00:05:13.050 --> 00:05:17.660\nthrough and knock all these out and\nI'll do the same thing here on CORE2.\n\n99\n00:05:17.660 --> 00:05:22.645\nAll right so whats gonna happen\nis the EIGRP is gonna kick in\n\n100\n00:05:22.645 --> 00:05:27.640\nit's gonna start advertising\nthese internal networks.\n\n101\n00:05:27.640 --> 00:05:31.900\nNow that network 22.33.44.10\nI'm learning it via BGP.\n\n102\n00:05:33.040 --> 00:05:36.580\nIt's iBGP with an admin distance of 200.\n\n103\n00:05:36.580 --> 00:05:42.410\nNow I'm gonna learn it through EIGRP and\nI'm going to know how to get there.\n\n104\n00:05:42.410 --> 00:05:44.710\nEven if I excluded it from EIGRP though,\n\n105\n00:05:44.710 --> 00:05:46.930\nI would at least know how\nto get to my next hop.\n\n106\n00:05:46.930 --> 00:05:49.580\nAnd my next hop would know how\nto get to the network and so\n\n107\n00:05:49.580 --> 00:05:51.540\nthen we're gonna have that connectivity.\n\n108\n00:05:51.540 --> 00:05:57.030\nAnd so now if I try and\nget to 22.33.44.10, there we go,\n\n109\n00:05:57.030 --> 00:06:00.290\nI can ping it just fine.\n\n110\n00:06:00.290 --> 00:06:06.250\nAnd if I do a trace route to 22.33.44.10,\n\n111\n00:06:06.250 --> 00:06:10.400\nit should ping over and we should see that\nwe're able to successfully get there.\n\n112\n00:06:10.400 --> 00:06:12.020\nSo, that's the important part.\n\n113\n00:06:12.020 --> 00:06:14.690\nRemember that BGP is not\ndesigned to work by itself.\n\n114\n00:06:14.690 --> 00:06:18.230\nIt's and exterior gateway protocol,\nit really requires and\n\n115\n00:06:18.230 --> 00:06:22.350\ninterior gateway protocol to run alongside\nit in order to have proper communications\n\n116\n00:06:22.350 --> 00:06:26.340\nthat work the way we expect to be able\nto get our five successful pings and\n\n117\n00:06:26.340 --> 00:06:27.680\ncommunicate across the network.\n\n118\n00:06:27.680 --> 00:06:30.730\nSo always look for that,\nespecially on the exam.\n\n119\n00:06:30.730 --> 00:06:33.750\nWhen you have routes that you're\nlearning through BGP that you don't have\n\n120\n00:06:33.750 --> 00:06:36.390\na corresponding route to be\nable to get to your next hop.\n\n121\n00:06:36.390 --> 00:06:38.610\nOr your next stop doesn't have\na corresponding route to get to its\n\n122\n00:06:38.610 --> 00:06:39.630\ndestination.\n\n123\n00:06:39.630 --> 00:06:42.920\nYou normally need to fix the IGP, not BGP.\n\n124\n00:06:42.920 --> 00:06:45.070\nIn our scenario we had prefix lists and\n\n125\n00:06:45.070 --> 00:06:46.800\nother things,\nthat was what we had to deal with.\n\n126\n00:06:46.800 --> 00:06:49.400\nBut an underlying routing protocol\ncan be the cause of a problem too.\n\n127\n00:06:49.400 --> 00:06:50.790\nSo I wanted to point that out, and\n\n128\n00:06:50.790 --> 00:06:53.100\nthat's why we did this little\nbonus segment for you guys.\n\n129\n00:06:53.100 --> 00:06:55.560\nJust to kind of show\nyou a possibility there\n\n130\n00:06:55.560 --> 00:06:57.460\nthat might be a little outside the normal.\n\n131\n00:06:57.460 --> 00:06:59.690\nAll right, well I hope you guys enjoyed\nthat, and definitely stay tuned.\n\n132\n00:06:59.690 --> 00:07:03.215\nWe got set number eight coming up next,\nit'll be full of action and adventure,\n\n133\n00:07:03.215 --> 00:07:04.696\nsurprises around every corner.\n\n134\n00:07:04.696 --> 00:07:07.900\nStay tuned,\nI look forward to seeing you then.\n\n135\n00:07:07.900 --> 00:07:13.124\n[MUSIC]\n\n",
          "vimeoId": "151018052"
        }
      ],
      "title": "Set Seven"
    },
    {
      "episodes": [
        {
          "description": "In this video, Don solves troubleshooting issue #1` from set #8. The trouble ticket states that \"PLABCSCO01 is unable to ping its default gateway at 192.168.16.1 \"",
          "length": "1426",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-8-1-set_8_issue_1-120815-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-8-1-set_8_issue_1-120815-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-8-1-set_8_issue_1-120815-1-sm.jpg",
          "title": "Set 8 Issue 1",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:04.163\n[MUSIC]\n\n2\n00:00:04.163 --> 00:00:12.081\nAll right, welcome back to another\ntroubleshooting segment here on ITProTV.\n\n3\n00:00:12.081 --> 00:00:16.050\nAnd we're gonna be diving into an all\nnew set, Set number 8, Issue 1.\n\n4\n00:00:16.050 --> 00:00:19.270\nWe've got a slightly different topology,\nso we'll have to keep an eye out for that.\n\n5\n00:00:19.270 --> 00:00:22.520\nWe've got some new routing protocols in\nthe mix and some different rearrangements.\n\n6\n00:00:22.520 --> 00:00:24.970\nBut this troubleshooting\nticket sure sounds familiar.\n\n7\n00:00:24.970 --> 00:00:30.010\nWe've got PLab Cisco 01 is unable to ping\nit's default gateway at 192.168.16.1.\n\n8\n00:00:30.010 --> 00:00:36.110\nNow let's take a look at our topology and\ntry and get an idea of where that is.\n\n9\n00:00:36.110 --> 00:00:38.690\nYou'll see the extra protocols\nI was talking about.\n\n10\n00:00:38.690 --> 00:00:43.570\nWe've got OSPF Area 0, we've got eBGP\nup here, iBGP over here couple of\n\n11\n00:00:43.570 --> 00:00:48.100\nthings in the network, but what I care\nabout is way down here at the bottom.\n\n12\n00:00:48.100 --> 00:00:49.570\nGood old PLABCSCO01.\n\n13\n00:00:49.570 --> 00:00:54.790\nAnd I can see that it's 192.188.16.10 and\nit's trying to ping 192.168.16.1.\n\n14\n00:00:54.790 --> 00:00:59.430\nThe only problem is when\nI look at this diagram,\n\n15\n00:00:59.430 --> 00:01:04.330\nI don't see who's 192.168.16.1.\n\n16\n00:01:04.330 --> 00:01:09.198\nLooking at all this, nobody here's\nreally labelled with that address.\n\n17\n00:01:09.198 --> 00:01:12.100\nSo I'm gonna have to do a little exploring\nbecause it can really be any of these\n\n18\n00:01:12.100 --> 00:01:13.060\ndevices.\n\n19\n00:01:13.060 --> 00:01:17.480\nI know in the earlier episodes\nwe saw where 192.168.16.1 was\n\n20\n00:01:17.480 --> 00:01:21.270\nalways on one of these two\ndevices NYCORE1 or NYCORE2 so\n\n21\n00:01:21.270 --> 00:01:24.140\nwanna check those, but\nultimately will have to look at them all.\n\n22\n00:01:24.140 --> 00:01:28.910\nSo let's just jump through each of these\nand see if we can't find that IP address.\n\n23\n00:01:28.910 --> 00:01:31.890\nNow I have to be careful when\nI'm hunting for an IP address.\n\n24\n00:01:31.890 --> 00:01:34.400\nAnd I'm gonna start way\ndown here at NYACCESS1,\n\n25\n00:01:34.400 --> 00:01:36.290\nthis is as good a spot as any to start.\n\n26\n00:01:38.200 --> 00:01:43.660\nAnd when I look for an IP address,\nI'm always tempted to do show\n\n27\n00:01:43.660 --> 00:01:48.900\nIP interface brief, and just filter that\nfor the address that I'm looking for.\n\n28\n00:01:48.900 --> 00:01:50.020\nWell, if I type it right.\n\n29\n00:01:50.020 --> 00:01:51.000\nThere we go.\n\n30\n00:01:51.000 --> 00:01:52.470\nSo that's one way that we can do it.\n\n31\n00:01:52.470 --> 00:01:56.210\nThe problem is this won't show\nthings like HSRP addresses or\n\n32\n00:01:56.210 --> 00:01:58.680\nother kind of virtual addresses\nthat might be hidden.\n\n33\n00:01:58.680 --> 00:02:01.760\nSo if I just rely on this I might miss it.\n\n34\n00:02:01.760 --> 00:02:07.440\nSo I prefer to do a show running dash\nconfig and look for the IP that way.\n\n35\n00:02:07.440 --> 00:02:08.060\nRight?\nSo,\n\n36\n00:02:08.060 --> 00:02:10.450\nI'm just looking to see if that\naddress is in here and it's not.\n\n37\n00:02:10.450 --> 00:02:12.340\nAnd so I'll just move on to the next one.\n\n38\n00:02:12.340 --> 00:02:14.610\nWe'll go to NYCORE1 and NYCORE2.\n\n39\n00:02:14.610 --> 00:02:20.950\nThis is where the IP was before so I kind\nof expect it to be on one of these guys.\n\n40\n00:02:20.950 --> 00:02:24.180\nBut I have been wrong before so\nthat could happen.\n\n41\n00:02:24.180 --> 00:02:29.060\nAnd we've got an ACL that references\nit but not the actual IP assignment so\n\n42\n00:02:29.060 --> 00:02:29.720\nit's not NYCORE1.\n\n43\n00:02:29.720 --> 00:02:36.920\nWe'll jump over to NYCORE2 and\ndo a show run.\n\n44\n00:02:36.920 --> 00:02:40.750\nAnd again I'm just looking for\nthat same address.\n\n45\n00:02:40.750 --> 00:02:43.490\nJust trying to hunt it down\nas quickly as possible.\n\n46\n00:02:43.490 --> 00:02:44.960\nWell now that's interesting,\nit's not there either.\n\n47\n00:02:44.960 --> 00:02:46.160\nSo I'm starting to run out of devices.\n\n48\n00:02:46.160 --> 00:02:48.840\nSo I just checked my three switches and\n\n49\n00:02:48.840 --> 00:02:52.390\nin all the previous sets that IP address\nresided on one of these three guys, so\n\n50\n00:02:52.390 --> 00:02:54.600\nit must be actually up on\none of these routers now.\n\n51\n00:02:54.600 --> 00:02:57.310\nLet's do EDGE1 and EDGE2 and\nthen we'll look at WAN1.\n\n52\n00:02:57.310 --> 00:02:58.810\nHopefully we'll we'll find it eventually.\n\n53\n00:02:58.810 --> 00:02:59.720\nOr maybe it doesn't exist.\n\n54\n00:02:59.720 --> 00:03:01.530\nMaybe that's our troubleshooting\nticket right there.\n\n55\n00:03:01.530 --> 00:03:03.970\nWe can't ping it because\nthe IP's not assigned anywhere.\n\n56\n00:03:03.970 --> 00:03:05.140\nThat would be a fun one.\n\n57\n00:03:05.140 --> 00:03:09.470\nSo, let me jump over to NYEDGE1 and\nwe'll check that guy next.\n\n58\n00:03:10.850 --> 00:03:15.964\nI'm just going to do that show run and\nlook for 192.168.16.1.\n\n59\n00:03:17.080 --> 00:03:18.280\nAnd we got a winner on this one.\n\n60\n00:03:18.280 --> 00:03:22.250\nHere it is 192.168.16.1 255.255.255.0 and\nI don't know what interface it's on,\n\n61\n00:03:22.250 --> 00:03:27.780\nso let's see if we can spot that.\n\n62\n00:03:27.780 --> 00:03:29.650\nAnd there it is, all right.\n\n63\n00:03:29.650 --> 00:03:31.596\nSo the default gateway or\n\n64\n00:03:31.596 --> 00:03:37.440\nPLab Cisco 01 is the GigabitEthernet0/0\ninterface on NYEDGE1.\n\n65\n00:03:37.440 --> 00:03:40.960\nSo, if I go back to my topology and\nlook at it,\n\n66\n00:03:40.960 --> 00:03:46.180\nhere is my client and\nthe router's way up here, NYEDGE1.\n\n67\n00:03:46.180 --> 00:03:47.830\nSo, when I go to connect that system,\n\n68\n00:03:47.830 --> 00:03:50.390\nthere's a few different\nways that I can get there.\n\n69\n00:03:50.390 --> 00:03:53.440\nI'm crossing VLAN 16 to get to NYACCESS1.\n\n70\n00:03:53.440 --> 00:03:58.500\nAnd then from here,\nI can either go up VLAN16 to NYCORE1, or\n\n71\n00:03:58.500 --> 00:04:00.140\nup VLAN16 to NYCORE2.\n\n72\n00:04:00.140 --> 00:04:04.000\nIf I go to CORE1, then I should be\nable to jump right up to NYEDGE1.\n\n73\n00:04:04.000 --> 00:04:08.855\nThis NYEDGE1 has an interface,\nGI00, or GI01, whatever it was.\n\n74\n00:04:08.855 --> 00:04:11.090\n[LAUGH] GI00.\n\n75\n00:04:11.090 --> 00:04:14.720\nThat's hopefully on VLAN16, so\nthat we'll be able to connect to it.\n\n76\n00:04:14.720 --> 00:04:18.080\nSo it might be just a matter of\npassing through these two switches.\n\n77\n00:04:18.080 --> 00:04:21.840\nOr I might be jumping into a third switch\ncoming back over and going up that way.\n\n78\n00:04:21.840 --> 00:04:26.150\nI'm gonna need to figure out that path so\nI can find out where my traffic is dying.\n\n79\n00:04:26.150 --> 00:04:28.890\nSomething's not passing along the way,\nand we've gotta find it.\n\n80\n00:04:28.890 --> 00:04:32.930\nSo, let me jump over to, let's see.\n\n81\n00:04:32.930 --> 00:04:34.480\nWe'll jump over to NYACCESS1.\n\n82\n00:04:37.200 --> 00:04:41.425\nAnd what I wanna do is I want to find\nthe path that we're taking for VLAN16.\n\n83\n00:04:41.425 --> 00:04:45.530\nActually, one thing I wanna check before\nI even start dealing with the path.\n\n84\n00:04:45.530 --> 00:04:50.110\nThe diagram shows my server plugged\ninto port Fa0/1 right here.\n\n85\n00:04:50.110 --> 00:04:51.210\nNow it says that I'm on VLAN16.\n\n86\n00:04:51.210 --> 00:04:56.880\nThis troubleshooting ticket could\nbe as easy as I'm not on VLAN16.\n\n87\n00:04:56.880 --> 00:05:00.350\nSo let's look at the configuration\nof that port real quick.\n\n88\n00:05:00.350 --> 00:05:08.320\nSo I'm just gonna do a show run for\nfa0/1 or interface fa0/1.\n\n89\n00:05:08.320 --> 00:05:11.795\nAnd we're just gonna make sure that\nit is actually assigned to VLAN16.\n\n90\n00:05:11.795 --> 00:05:19.202\nAnd when I look at that,\nshow run int fa0/1, it's not on VLAN16.\n\n91\n00:05:19.202 --> 00:05:22.990\nNow the diagram clearly says\nthat I should be on VLAN16 but\n\n92\n00:05:22.990 --> 00:05:26.492\nI'm not, so\nthat may well be our problem right there.\n\n93\n00:05:26.492 --> 00:05:28.489\nThis could be the easiest\nticket we've done today.\n\n94\n00:05:28.489 --> 00:05:32.330\nSo if I do a,\nlet me do just a quick show of VLAN and\n\n95\n00:05:32.330 --> 00:05:38.497\nwhen I take a look at my VLAN\nconfiguration, VLAN16 doesn't even exist.\n\n96\n00:05:38.497 --> 00:05:40.100\nAll right, so there's a problem.\n\n97\n00:05:40.100 --> 00:05:43.350\nNow we gotta sort through that and\nfind out why VLAN16 doesn't exist.\n\n98\n00:05:43.350 --> 00:05:45.270\nNow, why doesn't it exist?\n\n99\n00:05:45.270 --> 00:05:48.880\nWell I don't know maybe I'm supposed\nto be running VTP to learn it,\n\n100\n00:05:48.880 --> 00:05:50.920\nmaybe I just didn't define it right?\n\n101\n00:05:50.920 --> 00:05:56.590\nSo I'm gonna do a show VTP status and\nlet's see if we're running VTP.\n\n102\n00:05:56.590 --> 00:06:02.990\nLooks like we've got VTP as a server and\nmy VTP domain name is null.\n\n103\n00:06:02.990 --> 00:06:04.881\nWhen you see a null value for\na VTP domain,\n\n104\n00:06:04.881 --> 00:06:08.520\nthat just means that hasn't been\nconfigured, hasn't been set in place.\n\n105\n00:06:08.520 --> 00:06:12.730\nSo I'm not really running VTP here,\nif I'm supposed to be on VLAN16,\n\n106\n00:06:12.730 --> 00:06:14.860\nI should be set for VLAN16, right?\n\n107\n00:06:14.860 --> 00:06:16.450\nWell, maybe.\n\n108\n00:06:16.450 --> 00:06:17.980\nThere is another option here.\n\n109\n00:06:17.980 --> 00:06:21.320\nSo the diagram says that I'm\nsupposed to be on VLAN16.\n\n110\n00:06:21.320 --> 00:06:29.920\nAll of my ACCESS1 ports were I mean all my\nNYACCESS1 ports were on VLAN1 all right.\n\n111\n00:06:29.920 --> 00:06:33.162\nWell I've got these links running up\nhere that say they're supposed to be on\n\n112\n00:06:33.162 --> 00:06:34.070\nVLAN16 also.\n\n113\n00:06:34.070 --> 00:06:38.660\nIt's possible that this entire switch\ncould just be set up as access ports and\n\n114\n00:06:38.660 --> 00:06:39.800\nnot trunks.\n\n115\n00:06:39.800 --> 00:06:41.110\nAnd that these are running up here.\n\n116\n00:06:41.110 --> 00:06:44.730\nAnd if their access ports up here,\nthese ports might be on VLAN 16,\n\n117\n00:06:44.730 --> 00:06:47.680\nwhich would effectively place\nthis whole switch on VLAN 16.\n\n118\n00:06:47.680 --> 00:06:50.250\nIt's a weird configuration,\nbut it would work.\n\n119\n00:06:50.250 --> 00:06:51.870\nSo let's see if that's what's going on.\n\n120\n00:06:51.870 --> 00:06:55.960\nBecause I'm pretty sure 24 and\n23 showed up in that output a moment ago.\n\n121\n00:06:55.960 --> 00:06:57.680\nSo I'm gonna do a show VLAN.\n\n122\n00:06:58.810 --> 00:07:01.080\nAnd when I take a look at\nthat VLAN configuration.\n\n123\n00:07:02.100 --> 00:07:03.180\nHere I've got VLAN 1.\n\n124\n00:07:03.180 --> 00:07:06.280\nAnd when I look at all the ports,\nsure enough 23 and\n\n125\n00:07:06.280 --> 00:07:09.170\n24 are showing up right there\nwhich means we are not trunking.\n\n126\n00:07:09.170 --> 00:07:14.370\nSo if I do a show interface trunk,\nno trunks.\n\n127\n00:07:14.370 --> 00:07:19.780\nSo all of my ports are in VLAN 1, not VLAN\n16, but that's not necessarily a bad thing\n\n128\n00:07:19.780 --> 00:07:25.220\nassuming the other end of these two links\nright port 22 and these two switches.\n\n129\n00:07:25.220 --> 00:07:28.500\nAs long as those are in VLAN 16\nthen I'm still going be in VLAN 16.\n\n130\n00:07:28.500 --> 00:07:31.500\nSo let's look at NYCORE1 and\nsee if that's the case.\n\n131\n00:07:31.500 --> 00:07:33.130\nSo I'm gonna jump over to NYCORE1.\n\n132\n00:07:35.390 --> 00:07:40.920\nAnd I just wanna do a show run for\nint fa0/22 and what I'm expecting\n\n133\n00:07:40.920 --> 00:07:45.930\nto see is that it's an access\nport that's been statically set\n\n134\n00:07:47.180 --> 00:07:51.230\nto VLAN16 and, it's fa1/0/22.\n\n135\n00:07:51.230 --> 00:07:51.879\nThere we go.\n\n136\n00:07:51.879 --> 00:07:56.631\nAnd I don't see that, right, I see this\nis just, I mean it is an access board or\n\n137\n00:07:56.631 --> 00:07:59.296\nit might be dynamically chunking, right?\n\n138\n00:07:59.296 --> 00:08:01.130\nBut it's not assigned to a VLAN and\n\n139\n00:08:01.130 --> 00:08:03.730\nthat was the port that I\nexpected to see that way.\n\n140\n00:08:03.730 --> 00:08:09.380\nNow, again,\nit's possible that NYCORE1 is set up where\n\n141\n00:08:09.380 --> 00:08:13.750\nall the ports are in VLAN 1 also, but then\nthis starts to get really kind of weird.\n\n142\n00:08:13.750 --> 00:08:17.310\nIt could be that my diagram is wrong,\nbut that would seem odd.\n\n143\n00:08:17.310 --> 00:08:20.210\nSo let's take a look at NY, well let's\nlook at the rest of the configuration\n\n144\n00:08:20.210 --> 00:08:22.630\nin NYCORE1 before we move on,\nbut I wanna look at NYCORE2 and\n\n145\n00:08:22.630 --> 00:08:23.890\nsee if it's the same way.\n\n146\n00:08:23.890 --> 00:08:26.340\nWe'll continue to look\nat NYCORE1 first though.\n\n147\n00:08:26.340 --> 00:08:29.640\nSo on NYCORE1,\nI'm just gonna do a show vlan and\n\n148\n00:08:29.640 --> 00:08:31.550\nsee what we're even dealing with here.\n\n149\n00:08:31.550 --> 00:08:35.430\nAnd in that output I see\nI only have VLAN 1 and\n\n150\n00:08:35.430 --> 00:08:40.090\nit looks most of the ports are showing\nup in here, there's port 22.\n\n151\n00:08:40.090 --> 00:08:44.300\nAnd if I think about this port here\nthat's gonna be running up to NYEDGE1,\n\n152\n00:08:44.300 --> 00:08:48.330\nthat's my gateway that I'm trying\nto get to, that's FA1/0/1.\n\n153\n00:08:48.330 --> 00:08:52.830\nAnd I can see it right\nthere also in VLAN 1.\n\n154\n00:08:52.830 --> 00:08:56.192\nSo, so far it's looking like\neverything is in VLAN 1,\n\n155\n00:08:56.192 --> 00:08:58.634\neven though the diagram says VLAN 16.\n\n156\n00:08:58.634 --> 00:09:01.925\nNow I don't really care about the VLAN\nnumber at the end of the day.\n\n157\n00:09:01.925 --> 00:09:04.788\nThe troubleshooting question\njust said I need P lab Cisco to\n\n158\n00:09:04.788 --> 00:09:07.000\nbe able to ping its default gateway.\n\n159\n00:09:07.000 --> 00:09:11.730\nIf the diagram says I'm supposed to be on\nVLAN 16, but all the ports are on VLAN 1,\n\n160\n00:09:11.730 --> 00:09:14.876\nthat's not necessarily a problem,\nas long as I have my good connectivity.\n\n161\n00:09:14.876 --> 00:09:17.720\nWorst case scenario, I'll just go\nthrough and map all these to VLAN 16 and\n\n162\n00:09:17.720 --> 00:09:19.350\nthat will solve that problem.\n\n163\n00:09:19.350 --> 00:09:20.820\nAll right.\n\n164\n00:09:20.820 --> 00:09:26.670\nSo, looking at this, well, I probably\ndon't even need to look at NYCORE2,\n\n165\n00:09:26.670 --> 00:09:28.000\nbut let's just double check NYCORE2.\n\n166\n00:09:28.000 --> 00:09:31.140\nWe'll make sure it's the same way,\njust for completeness.\n\n167\n00:09:31.140 --> 00:09:35.650\nAll right, on NYCORE2,\nI'm just gonna do a show vlan.\n\n168\n00:09:35.650 --> 00:09:39.100\nWe'll skip the other steps cuz I kind of\nassumed this is all going to be VLAN 1.\n\n169\n00:09:39.100 --> 00:09:41.444\nSure enough.\nAnd ports 22, 23, 24,\n\n170\n00:09:41.444 --> 00:09:43.097\nthey're all that way too.\n\n171\n00:09:43.097 --> 00:09:46.904\nAll right, so, the diagram in\nour case is either incorrect, or\n\n172\n00:09:46.904 --> 00:09:48.890\nit's the source of our problem.\n\n173\n00:09:48.890 --> 00:09:51.560\nWe're supposed to be on VLAN 16,\ninstead we're on VLAN 1.\n\n174\n00:09:51.560 --> 00:09:52.780\nAll right.\n\n175\n00:09:52.780 --> 00:09:55.220\nNow, I still don't\nnecessarily know my path.\n\n176\n00:09:55.220 --> 00:09:58.050\nI know my VLAN numbers are wrong,\nbut I don't necessarily know my path\n\n177\n00:09:58.050 --> 00:10:00.470\nthat I'm crossing through this\nnetwork to get to the other side.\n\n178\n00:10:00.470 --> 00:10:05.510\nIf everybody thinks they're on VLAN 1,\nthen I should be able to ping, I should be\n\n179\n00:10:05.510 --> 00:10:11.100\nable to ping from P lab Cisco 01 over to\nNYEDGE1, and I know that's not working.\n\n180\n00:10:11.100 --> 00:10:15.210\nWell I say it's not working, I guess I\ndidn't really double check that, did I?\n\n181\n00:10:15.210 --> 00:10:18.900\nSo if I jump back to that server,\nI can fire up a command prompt,\n\n182\n00:10:18.900 --> 00:10:21.424\nand we can test that\ntheory out real quick.\n\n183\n00:10:21.424 --> 00:10:27.316\nIf I just do a quick ping to 192.168.16.1,\nwhat happens?\n\n184\n00:10:27.316 --> 00:10:29.693\nWell, looks like it's gonna fail, right?\n\n185\n00:10:29.693 --> 00:10:31.278\nSo it's just kinda sitting here.\n\n186\n00:10:31.278 --> 00:10:33.533\nNothing too crazy is happening.\n\n187\n00:10:33.533 --> 00:10:36.032\nAnd that's that, right?\n\n188\n00:10:36.032 --> 00:10:39.971\nAnd if I do an arp -a,\nI can look at my arp table, and\n\n189\n00:10:39.971 --> 00:10:43.753\nI do actually show 192.168.16.1.\n\n190\n00:10:43.753 --> 00:10:47.653\nI have learned a MAC address for\nit, which is little bit odd, right?\n\n191\n00:10:47.653 --> 00:10:51.648\nNormally if you can't ping somebody,\nand it's like a connectivity issue or\n\n192\n00:10:51.648 --> 00:10:55.830\na mismatched VLAN or whatever,\nyou don't even learn their MAC address.\n\n193\n00:10:55.830 --> 00:11:01.420\nBut here, I couldn't ping them,\nbut I did learn their MAC address.\n\n194\n00:11:01.420 --> 00:11:03.650\nNow I'm kinda thinking about this.\n\n195\n00:11:03.650 --> 00:11:06.565\nThere's really only one scenario I\ncan think of where that happens.\n\n196\n00:11:06.565 --> 00:11:12.600\nThere might be ones that I don't\nknow about, but as far as this goes,\n\n197\n00:11:12.600 --> 00:11:16.020\nusually this is what you see with an ACL,\nan access-control list, right?\n\n198\n00:11:16.020 --> 00:11:19.087\nYou send out the arp broadcast, you get\nthe response, you go to talk to the host,\n\n199\n00:11:19.087 --> 00:11:20.448\nand the host blocks you.\n\n200\n00:11:20.448 --> 00:11:25.700\nRight, if an ACL blocks you,\nthen you'll learn the MAC address,\n\n201\n00:11:25.700 --> 00:11:28.140\nbut you won't be able to get\nto the destination, right.\n\n202\n00:11:28.140 --> 00:11:32.250\nNow, in my case though,\nI'm trying to ping my default gateway.\n\n203\n00:11:32.250 --> 00:11:37.234\nI'm just going from my computer over\nto my gateway and I'm not being routed,\n\n204\n00:11:37.234 --> 00:11:39.390\nso ACLs cant be applied, right?\n\n205\n00:11:39.390 --> 00:11:41.854\nWell, normally ACLs can't be applied.\n\n206\n00:11:41.854 --> 00:11:43.784\nBut there's VLAN ACLs.\n\n207\n00:11:43.784 --> 00:11:46.323\nThere could be a MAC address\nACL that's blocking me, right?\n\n208\n00:11:46.323 --> 00:11:48.970\nThose apply just when I cross a VLAN.\n\n209\n00:11:48.970 --> 00:11:51.040\nAnd so,\nthat could be what's blocking us here.\n\n210\n00:11:51.040 --> 00:11:53.450\nSo we need to take a look and\nsee if there's one of those in the way.\n\n211\n00:11:53.450 --> 00:11:55.280\nBut I still need to know my path.\n\n212\n00:11:55.280 --> 00:11:58.160\nI need to know the path that I'm\nusing to transit this network.\n\n213\n00:11:58.160 --> 00:12:00.830\nBecause that's how I'm gonna\nfind where that ACL might be.\n\n214\n00:12:00.830 --> 00:12:03.070\nAnd I'm pretty certain there will be one,\nbut we'll see.\n\n215\n00:12:03.070 --> 00:12:08.010\nSo let me go back to NYACCESS1,\nand we're gonna look at this\n\n216\n00:12:08.010 --> 00:12:13.360\ncrazy VLAN 1 mess and kind of figure out\nwhat path we're following, all right.\n\n217\n00:12:13.360 --> 00:12:16.062\nSo I know my traffic's\ngonna go to NYACCESS1,\n\n218\n00:12:16.062 --> 00:12:18.233\nthat's the first step on my journey.\n\n219\n00:12:18.233 --> 00:12:25.080\nSo on this guy, I'm just gonna start right\nhere and do a show spanning-tree vlan 1.\n\n220\n00:12:25.080 --> 00:12:30.030\nNow, why am I bringing up spanning tree\nall of a sudden in the middle of this?\n\n221\n00:12:30.030 --> 00:12:30.880\nWell, remember,\n\n222\n00:12:30.880 --> 00:12:34.890\nwhen you've got a loop in your network,\nspanning tree is gonna block that loop.\n\n223\n00:12:34.890 --> 00:12:37.560\nSo spanning tree is gonna shut\noff one of these three links.\n\n224\n00:12:37.560 --> 00:12:38.604\nI don't know which one.\n\n225\n00:12:38.604 --> 00:12:42.598\nAnd depending on which one it shuts off,\nit's gonna determine whether or\n\n226\n00:12:42.598 --> 00:12:44.089\nnot I go through NYCORE2.\n\n227\n00:12:44.089 --> 00:12:47.248\nIf it shuts off this link, or\nif it shuts off this link,\n\n228\n00:12:47.248 --> 00:12:49.630\nthen I'm not gonna go through CORE2.\n\n229\n00:12:49.630 --> 00:12:53.010\nI'm gonna go straight to CORE1 and\nend up to my destination.\n\n230\n00:12:53.010 --> 00:12:56.560\nBut if it shuts off this link,\nthen I will go through CORE2 on my way up.\n\n231\n00:12:56.560 --> 00:12:57.430\nSo I need to know that.\n\n232\n00:12:58.640 --> 00:13:01.010\nAnd that's what I'm looking for\nhere on NYACCESS1.\n\n233\n00:13:01.010 --> 00:13:08.500\nAnd I can see right here that it flagged\nport 23 as my route, and 24, it blocked.\n\n234\n00:13:08.500 --> 00:13:13.440\nSo looking at my diagram,\n24 is the link to NYCORE1.\n\n235\n00:13:13.440 --> 00:13:17.340\nThat means my traffic is gonna leave here,\ncome to NYACCESS1,\n\n236\n00:13:17.340 --> 00:13:21.650\ngo to NYCORE2, go over to NYCORE1,\nand then up to EDGE1.\n\n237\n00:13:22.920 --> 00:13:25.540\nThat means we're on the long path,\nand that kind of stinks, right?\n\n238\n00:13:25.540 --> 00:13:27.510\nSo we're going the long route around.\n\n239\n00:13:27.510 --> 00:13:30.310\nAnd that means,\nif there is an ACL blocking this traffic,\n\n240\n00:13:30.310 --> 00:13:32.298\nit could be at any stage along that way.\n\n241\n00:13:32.298 --> 00:13:35.430\nSo I'm gonna have to look at all\nthese devices to spot it, all right?\n\n242\n00:13:35.430 --> 00:13:39.550\nWell, fortunately, these kind of\nthings are usually easy to spot.\n\n243\n00:13:39.550 --> 00:13:42.120\nSo if I've got some kind of access list,\nwe can just run through and\n\n244\n00:13:42.120 --> 00:13:45.050\nlook at each of the configs and\ntry and figure out where that is.\n\n245\n00:13:45.050 --> 00:13:49.670\nAnd so I'll start on NYACCESS1, and\nwe'll see if we can find it, right?\n\n246\n00:13:49.670 --> 00:13:54.510\nSo what I'm gonna do is,\nthe easiest way to find it is if you\n\n247\n00:13:54.510 --> 00:13:57.370\nremember the command for\ncreating a VLAN ACL.\n\n248\n00:13:57.370 --> 00:13:59.600\nVLAN ACLs are different than regular ACLs,\nright?\n\n249\n00:13:59.600 --> 00:14:04.270\nRegular ACLs, you say access-list1\npermit blah, blah, blah, or\n\n250\n00:14:04.270 --> 00:14:08.080\nIP access-list standard and\nyou give it a name, right?\n\n251\n00:14:08.080 --> 00:14:09.050\nSo there're the different commands there.\n\n252\n00:14:09.050 --> 00:14:13.180\nAnd they're really designed to\nfilter layer 3 traffic, right,\n\n253\n00:14:13.180 --> 00:14:16.380\nIP addresses, IPx, Apple Talk,\nthose kinds of addresses.\n\n254\n00:14:16.380 --> 00:14:18.660\nBut they can do MAC addresses too, right?\n\n255\n00:14:18.660 --> 00:14:21.630\nBut those ACLs only apply\nwhen you're being routed.\n\n256\n00:14:21.630 --> 00:14:24.060\nVLAN ACLs are filters.\n\n257\n00:14:24.060 --> 00:14:27.860\nThey apply to traffic passing through a\nVLAN, not necessarily being routed, and so\n\n258\n00:14:27.860 --> 00:14:31.250\nthey have a different command and\nthat word filter is the part to remember.\n\n259\n00:14:31.250 --> 00:14:34.270\nA lot of people don't call them VLAN ACLs,\nthey just call them VLAN filters, and\n\n260\n00:14:34.270 --> 00:14:35.205\nit's because of the command.\n\n261\n00:14:35.205 --> 00:14:39.960\nSo if I just do a quick show run and\ninclude the keyword filter,\n\n262\n00:14:39.960 --> 00:14:43.210\nI can spot really fast whether or\nnot I've got any ACLs that are on here\n\n263\n00:14:43.210 --> 00:14:47.010\nthat might be blocking this traffic, and\nin my case, I can see I don't, right.\n\n264\n00:14:47.010 --> 00:14:52.260\nAnd so I can just jump to each of these\ndevices running that same command.\n\n265\n00:14:52.260 --> 00:14:57.120\nJust doing a show run include filter\nto see if I have any filters to find.\n\n266\n00:14:57.120 --> 00:14:59.229\nAnd I don't here on CORE2.\n\n267\n00:14:59.229 --> 00:15:01.017\nLet jump over to CORE1.\n\n268\n00:15:02.968 --> 00:15:09.290\nAnd on CORE1, I could be running\ndown the completely wrong path here.\n\n269\n00:15:09.290 --> 00:15:10.553\nOh, but I'm not.\n\n270\n00:15:10.553 --> 00:15:15.938\nRight here, here we go,\nwe've got vlan filter BLOCK vlan-list 1.\n\n271\n00:15:15.938 --> 00:15:19.026\nSo it looks like we do\nhave a filter in place,\n\n272\n00:15:19.026 --> 00:15:22.960\nthe filter is named BLOCK and\nit's applying to VLAN 1.\n\n273\n00:15:22.960 --> 00:15:26.320\nWell, what vlan is my traffic on?\n\n274\n00:15:26.320 --> 00:15:29.310\nI know the diagram says I'm on VLAN 16,\nbut the diagram is not accurate.\n\n275\n00:15:29.310 --> 00:15:31.610\nOr at least not accurate\nwith the proper topology.\n\n276\n00:15:31.610 --> 00:15:35.320\nSo in my scenario, I'm on VLAN 16.\n\n277\n00:15:35.320 --> 00:15:37.190\nMy traffic is passing.\n\n278\n00:15:37.190 --> 00:15:38.480\nI mean, I'm sorry, I'm on VLAN 1.\n\n279\n00:15:38.480 --> 00:15:39.730\nMy traffic is passing into VLAN 1,\n\n280\n00:15:39.730 --> 00:15:43.540\ntrying to get to this destination,\nwhich means this block list does apply.\n\n281\n00:15:43.540 --> 00:15:48.200\nSo, let's see what that list contains.\n\n282\n00:15:48.200 --> 00:15:50.860\nSo I'm gonna go quick show run and\nwe'll find it.\n\n283\n00:15:50.860 --> 00:15:55.043\nSo here we go, we've got a VLAN\nfilter called block, and up here,\n\n284\n00:15:55.043 --> 00:15:58.330\nI can see the VLAN access\nmap that was created.\n\n285\n00:15:58.330 --> 00:16:01.754\nIt's got match ip address\nBLOCK action drop.\n\n286\n00:16:01.754 --> 00:16:02.700\nAnd then everything else it's forwarding.\n\n287\n00:16:02.700 --> 00:16:06.450\nSo I've got a ACL called block\nthat I need to take a look at.\n\n288\n00:16:07.450 --> 00:16:12.850\nAnd if we do a show access-list block.\n\n289\n00:16:12.850 --> 00:16:13.790\nHere we go.\n\n290\n00:16:13.790 --> 00:16:15.560\nWe've got permit.\n\n291\n00:16:15.560 --> 00:16:18.788\nWell, looks like this one\nis pretty straight forward.\n\n292\n00:16:18.788 --> 00:16:24.213\nIt is blocking traffic from\n192.168.16.10 which is PLABSCSO01,\n\n293\n00:16:24.213 --> 00:16:30.966\ngoing to 192.168.16.1 and it's blocking\nthe reverse and there's been 315 matches.\n\n294\n00:16:30.966 --> 00:16:33.440\nI think it's pretty obvious\nthat one's causing our problem.\n\n295\n00:16:33.440 --> 00:16:35.450\nAll right, so\nwe just tracked that one down.\n\n296\n00:16:35.450 --> 00:16:39.210\nRemember the hint that told\nme where was VLAN ACL.\n\n297\n00:16:39.210 --> 00:16:42.914\nI couldn't ping the destination,\nand I wasn't being routed, right?\n\n298\n00:16:42.914 --> 00:16:45.369\nSo it's not like there was a bad route,\nhost unreachable,\n\n299\n00:16:45.369 --> 00:16:48.278\nloop in the routing network,\nit wasn't anything like that, right?\n\n300\n00:16:48.278 --> 00:16:53.010\nI couldn't ping the destination but\nI was learning the mac address.\n\n301\n00:16:53.010 --> 00:16:54.670\nAnd that's just a big\nred flag right there.\n\n302\n00:16:54.670 --> 00:16:57.090\nThat's what let me know\nthat ACL was in place.\n\n303\n00:16:57.090 --> 00:16:59.300\nNow how do I fix this?\n\n304\n00:16:59.300 --> 00:17:00.850\nI got two possibilities, right?\n\n305\n00:17:00.850 --> 00:17:02.770\nOne, this ACLlooks pretty pointless.\n\n306\n00:17:02.770 --> 00:17:06.560\nLike its specific job is\njust to block PLABSCSO01,\n\n307\n00:17:06.560 --> 00:17:11.520\nto get to its defunct gateway\nwhich is kind of silly, right?\n\n308\n00:17:11.520 --> 00:17:14.150\nSo I'll probably just delete this list.\n\n309\n00:17:14.150 --> 00:17:16.810\nJust take out this VLAN filter and\nthe problem goes away.\n\n310\n00:17:16.810 --> 00:17:18.840\nThat's one solution, right?\n\n311\n00:17:18.840 --> 00:17:21.790\nBut there's actually another solution we\ncan do here if we wanted to be like really\n\n312\n00:17:21.790 --> 00:17:23.620\nover achievers, right?\n\n313\n00:17:23.620 --> 00:17:27.110\nIf we want to be a true overachiever,\nremember our diagram is wrong.\n\n314\n00:17:27.110 --> 00:17:33.250\nOur diagram says that all of this is on\nVLAN 16 and we're not on VLAN 16, are we?\n\n315\n00:17:33.250 --> 00:17:34.820\nWe were on VLAN 1.\n\n316\n00:17:34.820 --> 00:17:37.890\nSo if I were to switch all\nthese ports over to VLAN 16,\n\n317\n00:17:37.890 --> 00:17:42.840\nlike the diagram says,\nthen I'd be passing on VLAN 16 and\n\n318\n00:17:42.840 --> 00:17:47.180\nthat filters on VLAN 1,\nit would no longer apply.\n\n319\n00:17:47.180 --> 00:17:48.640\nAnd so\nthat's the solution I'm going to use.\n\n320\n00:17:48.640 --> 00:17:51.520\nI'm going to move us over to VLAN 16,\nwhere we're supposed to be.\n\n321\n00:17:51.520 --> 00:17:53.590\nAnd then I should be able to\ncommunicate with that host.\n\n322\n00:17:53.590 --> 00:17:55.660\nBe able to move through the network and\nget there.\n\n323\n00:17:55.660 --> 00:17:57.800\nAnd leave the VLAN filter alone.\n\n324\n00:17:57.800 --> 00:17:59.150\nYou know, I don't care about that thing.\n\n325\n00:17:59.150 --> 00:18:02.410\nIt doesn't really make any difference\nif I'm on a different VLAN, all right?\n\n326\n00:18:02.410 --> 00:18:04.500\nSo I just need to pay\nattention to my ports.\n\n327\n00:18:04.500 --> 00:18:07.140\nIf you think about the path\nthat I'm following.\n\n328\n00:18:07.140 --> 00:18:10.655\nWell, I guess I could update\nall of these interfaces here,\n\n329\n00:18:10.655 --> 00:18:14.396\nputting them on the appropriate VLANS,\nand getting that set.\n\n330\n00:18:14.396 --> 00:18:19.724\nSo if we want to be nice and specific here\nit'll be ports 1, 23, and 24 on Access 1.\n\n331\n00:18:19.724 --> 00:18:21.236\nSo that's where I'll start.\n\n332\n00:18:21.236 --> 00:18:24.378\nSo back on Access 1.\n\n333\n00:18:24.378 --> 00:18:27.898\nI'll get into my configuration.\n\n334\n00:18:27.898 --> 00:18:30.346\nAnd I'll use the range command, right.\n\n335\n00:18:30.346 --> 00:18:37.878\nI'll do interface range fa 0/1,\nand fa0/23- 24.\n\n336\n00:18:37.878 --> 00:18:40.878\nRight, so\nthat's the range that I wanna work with.\n\n337\n00:18:40.878 --> 00:18:44.480\nAnd I'll just say\nswitchport access VLAN 16.\n\n338\n00:18:44.480 --> 00:18:45.480\nOkay?\n\n339\n00:18:45.480 --> 00:18:48.190\nAnd VLAN 16 didn't exist, so\nit just got created for me.\n\n340\n00:18:49.740 --> 00:18:51.230\nAnd so we should be good there.\n\n341\n00:18:51.230 --> 00:18:53.960\nAnd I can just do real quick show VLAN.\n\n342\n00:18:55.270 --> 00:18:58.912\nAnd when we look at the show VLAN output,\nI've got it,\n\n343\n00:18:58.912 --> 00:19:03.890\nVLAN 16 is active, and\nwe've got those 30 ports assigned to it.\n\n344\n00:19:03.890 --> 00:19:07.518\nNow, I'm gonna start getting some CDP\nwarnings, right, some VLAN mismatches.\n\n345\n00:19:07.518 --> 00:19:10.678\nI'm 16 on this side, and\nthe other side is still set to VLAN1.\n\n346\n00:19:10.678 --> 00:19:13.368\nSo I'm just going to jump over and\ntackle those other ones.\n\n347\n00:19:13.368 --> 00:19:19.628\nOn NYCORE1 I need to update port 22\nhere to be on VLAN 16, all right?\n\n348\n00:19:19.628 --> 00:19:21.388\nSo, I jump over to NYCORE1.\n\n349\n00:19:21.388 --> 00:19:25.384\nOh, actually not just port 22,\nI needed to do this other port,\n\n350\n00:19:25.384 --> 00:19:29.248\nFA1/0/1, because that's\nthe port that NYEDGE1 is on.\n\n351\n00:19:29.248 --> 00:19:32.908\nNot to mention these other devices\nout here, NYWAN1, NYEDGE2.\n\n352\n00:19:32.908 --> 00:19:35.718\nI don't really know what networks\nthey're on, so I might have to fix them.\n\n353\n00:19:35.718 --> 00:19:39.160\nBut I'm gonna have to go here and\njust kind of add onto these guys.\n\n354\n00:19:39.160 --> 00:19:41.340\nAnd we'll just tackle the ones\nthat are necessary for now.\n\n355\n00:19:41.340 --> 00:19:44.360\nWe can worry about the other ones if\nthey come up in a later question.\n\n356\n00:19:44.360 --> 00:19:48.780\nSo for NYCORE1 I need to do ports 22 and\nport 1.\n\n357\n00:19:48.780 --> 00:19:49.750\nAnd get them put over and\n\n358\n00:19:49.750 --> 00:19:53.460\nactually that should be enough to\nget this topology working for me.\n\n359\n00:19:53.460 --> 00:20:01.640\nSo on NYCORE1, I'm gonna do an interphase\nrange for FA1/0/1 and FA1/0/22, and\n\n360\n00:20:01.640 --> 00:20:06.840\nI'll just say switch port.\n\n361\n00:20:09.190 --> 00:20:13.870\nAccess VLAN 16 and\nthat will move them over.\n\n362\n00:20:13.870 --> 00:20:19.000\nAnd then lastly I don't have to\nmove NYEDGE1 because it's a router.\n\n363\n00:20:19.000 --> 00:20:20.478\nIt doesn't know about VLANS anyway.\n\n364\n00:20:20.478 --> 00:20:25.411\nBut I do need to think about NYCORE2\nover here that it's port 22 needs to be\n\n365\n00:20:25.411 --> 00:20:26.346\non vlan 16.\n\n366\n00:20:26.346 --> 00:20:27.370\nSo I'm gonna go over to NYCORE2.\n\n367\n00:20:29.460 --> 00:20:33.920\nAnd we'll get into interface fa1/0/22 and\n\n368\n00:20:33.920 --> 00:20:41.090\nwe'll just assign it to VLAN\n16 just like the others.\n\n369\n00:20:41.090 --> 00:20:44.269\nAll right, so now,\nlike the diagram indicated,\n\n370\n00:20:44.269 --> 00:20:47.230\nI moved these 3 interfaces\nover to VLAN 16.\n\n371\n00:20:47.230 --> 00:20:49.000\nRight, so they're all set.\n\n372\n00:20:50.020 --> 00:20:54.732\nAnd I took this link that had no VLAN\ndenoted on it, and moved it over to\n\n373\n00:20:54.732 --> 00:20:59.718\nVLAN 16 also because NYEDGE1's IP\naddress is in the VLAN 16 range.\n\n374\n00:20:59.718 --> 00:21:04.496\nNow, that VLAN filter's applied to VLAN 1,\nI'm on VLAN 16.\n\n375\n00:21:04.496 --> 00:21:05.900\nI should be able to communicate just fine.\n\n376\n00:21:05.900 --> 00:21:09.119\nSo, let's jump over to PLABCSCO01,\nand let's see what we get this time.\n\n377\n00:21:10.420 --> 00:21:16.620\nSo taking a look at this guy,\nif I just pull my ping back up,\n\n378\n00:21:16.620 --> 00:21:18.710\nand right now it's doing\nit's ARP broadcast,\n\n379\n00:21:18.710 --> 00:21:25.070\nthat should travel across the network and,\nthat's not a good sign, right?\n\n380\n00:21:25.070 --> 00:21:28.200\nSo, we're basically reaching out on the\nnetwork, trying to get to the other side,\n\n381\n00:21:28.200 --> 00:21:30.100\nand still not getting there.\n\n382\n00:21:30.100 --> 00:21:32.570\nSo, something else is wrong.\n\n383\n00:21:32.570 --> 00:21:33.490\nWell, what is wrong?\n\n384\n00:21:33.490 --> 00:21:35.580\nOh, apparently,\nwhat's wrong is me being impatient.\n\n385\n00:21:35.580 --> 00:21:39.890\nIt knows that last ping just came through,\napparently arp may have taken a while.\n\n386\n00:21:39.890 --> 00:21:41.370\nAnd you can see sometimes,\n\n387\n00:21:41.370 --> 00:21:44.450\nif you adjusted the VLAN of more\nthan one link across the network.\n\n388\n00:21:44.450 --> 00:21:47.670\nRemember, I had to jump through more than\none switch, so the arp broadcast were kind\n\n389\n00:21:47.670 --> 00:21:49.830\nof happening throughout and\nI just didn't gave enough time.\n\n390\n00:21:49.830 --> 00:21:52.815\nBut now I'm glad I stalled for\na second there, cuz it went through and\n\n391\n00:21:52.815 --> 00:21:55.046\nnow we're able to communicate\nwith that gateway.\n\n392\n00:21:55.046 --> 00:21:59.762\nAll right, now, one thing I do need to\nbe aware of, the diagram is not very\n\n393\n00:21:59.762 --> 00:22:04.728\nfeature complete as far as telling me\nwhat interfaces should be on what VLAN.\n\n394\n00:22:04.728 --> 00:22:08.617\nSo I need to remember for\nthe rest of this set that I've moved those\n\n395\n00:22:08.617 --> 00:22:13.018\ninterfaces over to VLAN16 just in case\nwe have some other kind of issue.\n\n396\n00:22:13.018 --> 00:22:15.408\nIf they intended me to stay on VLAN 1,\n\n397\n00:22:15.408 --> 00:22:18.260\nthen I could always put\nthese back to VLAN 1.\n\n398\n00:22:18.260 --> 00:22:20.640\nAnd I would just need\nto remove that filter.\n\n399\n00:22:20.640 --> 00:22:22.230\nAnd removing the filter's really easy.\n\n400\n00:22:22.230 --> 00:22:25.000\nIn fact, the filter's not even\ndoing anything at this point.\n\n401\n00:22:25.000 --> 00:22:26.850\nSo if I want to put that filter, or\n\n402\n00:22:26.850 --> 00:22:29.930\ntake that filter out,\nI can jump back to NYCORE1.\n\n403\n00:22:32.400 --> 00:22:35.610\nAnd on this one if we just\ntake a look at that command.\n\n404\n00:22:35.610 --> 00:22:39.390\nRight, if we do a show run and\ninclude the word filter.\n\n405\n00:22:39.390 --> 00:22:42.628\nThe command to implement that\nis just this one right here.\n\n406\n00:22:42.628 --> 00:22:45.368\nVlan filter BLOCK vlan-list 1..\n\n407\n00:22:45.368 --> 00:22:52.110\nSo we can say no vlan\nfilter BLOCK vlan-list 1.\n\n408\n00:22:52.110 --> 00:22:55.470\nAnd that's gonna remove that filter and\nget it off of there.\n\n409\n00:22:55.470 --> 00:22:59.160\nIt was just blocking\nPLABSCSO01's IP anyway.\n\n410\n00:22:59.160 --> 00:23:00.510\nSo that gets it outta there.\n\n411\n00:23:00.510 --> 00:23:04.955\nAnd now, if I do have to move us back to\nVLAN 1, then that will be easy enough for\n\n412\n00:23:04.955 --> 00:23:06.505\nus to do, and it won't be a problem there.\n\n413\n00:23:06.505 --> 00:23:07.025\nAll right.\n\n414\n00:23:07.025 --> 00:23:10.405\nSo, we should be in good shape and,\nready to move on to the next question.\n\n415\n00:23:10.405 --> 00:23:14.315\nSo, for this one,\nthe problem turned out to be a VLAN ACL.\n\n416\n00:23:14.315 --> 00:23:15.315\nRemember the red flag.\n\n417\n00:23:15.315 --> 00:23:20.585\nIf you can't communicate with the host,\nbut you are learning their Mac address,\n\n418\n00:23:20.585 --> 00:23:24.890\nand you're not being routed, that's\nthe big indicator you got a VLAN ACL.\n\n419\n00:23:24.890 --> 00:23:25.970\nJust have to find it, right?\n\n420\n00:23:25.970 --> 00:23:29.270\nAnd you look for that keyword filter in\neach of your configs that'll turn up,\n\n421\n00:23:29.270 --> 00:23:31.900\nthen you'll be able to solve that problem\nand knock that one off the list and\n\n422\n00:23:31.900 --> 00:23:33.430\nmove onto the next one on the exam.\n\n423\n00:23:33.430 --> 00:23:35.108\nWhich is exactly what we're gonna do here.\n\n424\n00:23:35.108 --> 00:23:40.040\nSo, stay tuned, we've got more\ntroubleshooting questions coming up.\n\n425\n00:23:40.040 --> 00:23:45.640\n[SOUND]\n\n",
          "vimeoId": "151018046"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #2` from set #8. The trouble ticket states that \"NYEDGE2 and NYCORE2 are not establishing a neighbor relationship in OSPF. \"",
          "length": "738",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-8-2-set_8_issue_2-120815-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-8-2-set_8_issue_2-120815-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-8-2-set_8_issue_2-120815-1-sm.jpg",
          "title": "Set 8 Issue 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.107 --> 00:00:08.440\n[MUSIC]\n\n2\n00:00:08.440 --> 00:00:11.840\nAll right, welcome back to another\ntroubleshooting segment here on ITProTV.\n\n3\n00:00:11.840 --> 00:00:14.160\nWe're gonna be jumping right\nback into set eight, and\n\n4\n00:00:14.160 --> 00:00:15.930\nwe've got issue two on the table.\n\n5\n00:00:15.930 --> 00:00:18.330\nLooks like we've got an OSPF\nissue this time around.\n\n6\n00:00:18.330 --> 00:00:20.960\nThe ticket reads NYEDGE2 and\n\n7\n00:00:20.960 --> 00:00:24.970\nNYCORE2 are not establishing\na neighbor relationship in OSPF.\n\n8\n00:00:24.970 --> 00:00:26.830\nSo we've got a bit of an OSPF problem.\n\n9\n00:00:26.830 --> 00:00:28.950\nWe need to figure that out and\nsee what's going on.\n\n10\n00:00:28.950 --> 00:00:31.400\nNow, before we do that,\nlet's take a look at our topology and\n\n11\n00:00:31.400 --> 00:00:35.330\nget an idea of which devices\nare gonna be involved in this.\n\n12\n00:00:35.330 --> 00:00:39.540\nSo they're telling me NYEDGE2,\nand NYCORE2.\n\n13\n00:00:39.540 --> 00:00:41.950\nThat's these two guys right here.\n\n14\n00:00:41.950 --> 00:00:47.560\nNYEDGE2 and NYCORE2, and they're directly\nconnected, so I've got a gigabit ethernet\n\n15\n00:00:47.560 --> 00:00:53.390\nconnection here, GI00, connecting to\na fast ethernet connection here FA101, but\n\n16\n00:00:53.390 --> 00:00:56.880\neither way it's a direct connection and\nwe should be establishing a neighborship.\n\n17\n00:00:56.880 --> 00:00:59.630\nIt's telling me we're not,\nso I need to find out why.\n\n18\n00:00:59.630 --> 00:01:04.340\nNow, NYEDGE2 is a router, and\nI expect it to be able to connect up.\n\n19\n00:01:04.340 --> 00:01:07.590\nDown here on NYCORE2 I've got a switch,\nnow that means it's more\n\n20\n00:01:07.590 --> 00:01:10.110\nthan likely a layer three\nswitch running an OSPF process,\n\n21\n00:01:10.110 --> 00:01:13.779\nbut that configuration can be\na little more complex, right?\n\n22\n00:01:13.779 --> 00:01:18.820\nBecause this link, running in front\nin from NYEDGE2, it might be a VLAN\n\n23\n00:01:18.820 --> 00:01:23.277\ninterface, or\nit might be a routed interface, right?\n\n24\n00:01:23.277 --> 00:01:26.590\nSo different kind of complexities\nthat can come into the mix there.\n\n25\n00:01:26.590 --> 00:01:29.730\nSo I actually kinda wanna start\non NYCORE2 and see what it's got.\n\n26\n00:01:29.730 --> 00:01:34.270\nThis is port FA101 so I want to see\nwhat that port's configured like, and\n\n27\n00:01:34.270 --> 00:01:37.060\njust take a glance at OSPF, and\nsee if we can't immediately spot it.\n\n28\n00:01:37.060 --> 00:01:39.300\nMaybe there's log files\ntelling us what's going on.\n\n29\n00:01:39.300 --> 00:01:40.450\nWe can always use debugs and\n\n30\n00:01:40.450 --> 00:01:43.960\nother things to find out why OSPF\nis not building that adjacency.\n\n31\n00:01:43.960 --> 00:01:47.860\nSo let's jump over to NYCORE2,\nand see what we can see.\n\n32\n00:01:47.860 --> 00:01:50.180\nNow I haven't really logged\ninto NYCORE2 yet, so\n\n33\n00:01:50.180 --> 00:01:54.225\nthis will be interesting to see if\nthere's any crazy logs popping up.\n\n34\n00:01:54.225 --> 00:01:54.820\nOops.\nOr\n\n35\n00:01:54.820 --> 00:01:57.640\nI can just start typing the wrong thing,\nthat'll help.\n\n36\n00:01:57.640 --> 00:02:02.200\nBut what I'm looking for,\nis I'm looking for\n\n37\n00:02:02.200 --> 00:02:08.740\nany kind of log messages that would\nindicate a OSPF adjacency failure,\n\n38\n00:02:08.740 --> 00:02:11.970\nand a lot of the times you'll see\nthose in the log file in the system.\n\n39\n00:02:11.970 --> 00:02:16.960\nSo I'm just going to do a show log real\nquick, and skip forward and, sure enough,\n\n40\n00:02:16.960 --> 00:02:19.980\nwe've got plenty of OSPF\nerrors right there.\n\n41\n00:02:19.980 --> 00:02:23.190\nOPSF4, error received.\n\n42\n00:02:23.190 --> 00:02:24.570\nReceived invalid packet.\n\n43\n00:02:24.570 --> 00:02:30.550\nMismatched area ID found\nfrom 192.168.16.5 on VLAN1.\n\n44\n00:02:30.550 --> 00:02:33.930\nAll right, so that's pretty clear, right?\n\n45\n00:02:33.930 --> 00:02:36.160\nIt's telling me I've got an area mismatch,\nand\n\n46\n00:02:36.160 --> 00:02:40.680\nit's telling me, connections must be from\nbackbone, or must be from a virtual link,\n\n47\n00:02:40.680 --> 00:02:43.870\nand in this scenario,\nit's telling me that neither is the case.\n\n48\n00:02:43.870 --> 00:02:48.640\nWell, looking at my topology, I'm\nsupposed to be in OSPF Area Zero, right?\n\n49\n00:02:48.640 --> 00:02:53.120\nSo I expect Area Zero across all of this\nstuff, and that means I shouldn't have to\n\n50\n00:02:53.120 --> 00:02:56.830\nworry about not connecting\nto the backbone area or not.\n\n51\n00:02:56.830 --> 00:02:59.010\nI shouldn't even have to\nworry about virtual links.\n\n52\n00:02:59.010 --> 00:03:04.860\nIf everybody is in OSPF Area Zero, there's\nno use for a virtual link anywhere here.\n\n53\n00:03:04.860 --> 00:03:09.690\nSo, in this case, I probably just have the\nwrong area ID set on one end or the other.\n\n54\n00:03:09.690 --> 00:03:10.340\nI don't know which end.\n\n55\n00:03:10.340 --> 00:03:12.820\nSo we'll have to figure that out.\n\n56\n00:03:12.820 --> 00:03:16.350\nThe other thing I need\nto pay attention to is,\n\n57\n00:03:16.350 --> 00:03:20.040\nnotice that IP address,\n192.168.16.5 on VLAN1.\n\n58\n00:03:20.040 --> 00:03:24.420\nIn issue number one,\nwe had that issue with the VLAN filter.\n\n59\n00:03:24.420 --> 00:03:29.310\nAnd we notice that our machines weren't on\nVLAN16 like they were supposed to be, and\n\n60\n00:03:29.310 --> 00:03:32.060\nhere we might be dealing\nwith the same thing.\n\n61\n00:03:32.060 --> 00:03:36.700\nWe've got that 192.168.16 address on\nVLAN1 when it should be on VLAN16.\n\n62\n00:03:36.700 --> 00:03:40.985\nSo one of the things I said when\nI first came to this device,\n\n63\n00:03:40.985 --> 00:03:42.720\nwas I wanted to look at that port, FA101.\n\n64\n00:03:42.720 --> 00:03:43.920\nI still do.\n\n65\n00:03:43.920 --> 00:03:46.680\nLet's take a look at that one and\nsee what we've got.\n\n66\n00:03:46.680 --> 00:03:51.900\nSo I'm just gonna do a show run for\ninterface 1/0/1, and I want to see if\n\n67\n00:03:51.900 --> 00:03:56.730\nit's a routed port or a switched port, and\nI can see it is, indeed, a switched port.\n\n68\n00:03:56.730 --> 00:04:01.720\nAll right, so it's a switched port and\nthat means that it's a sign to a VLAN,\n\n69\n00:04:01.720 --> 00:04:05.840\nin this case, VLAN1, the default, and that\ntraffic from the other side that is coming\n\n70\n00:04:05.840 --> 00:04:10.880\nin and ending up in on VLAN1 and on my\nswitch if I do a show IP interface brief,\n\n71\n00:04:12.300 --> 00:04:17.950\nI can see that it's got an address\nof 192.168.16.6 on VLAN1 also.\n\n72\n00:04:17.950 --> 00:04:23.730\nAll right, now, that's wrong, according to\nthe diagram, but we saw that in set one,\n\n73\n00:04:23.730 --> 00:04:27.820\nthese things didn't match, and what I said\nat the end of issue one, not set one,\n\n74\n00:04:27.820 --> 00:04:30.650\nit was at the end of set eight, issue one.\n\n75\n00:04:30.650 --> 00:04:34.270\nAt the end of that issue, I said, I'm\ngonna move the devices over to VLAN16, but\n\n76\n00:04:34.270 --> 00:04:38.085\nif it ever turns out to be a problem,\nI can either move the other people over to\n\n77\n00:04:38.085 --> 00:04:40.728\nVLAN16 or\nI can just move everybody back to VLAN1.\n\n78\n00:04:40.728 --> 00:04:43.770\nWell there's no easy way to move an IP\n\n79\n00:04:43.770 --> 00:04:46.330\naddress from one VLAN\ninterface to another.\n\n80\n00:04:46.330 --> 00:04:51.370\nI would have to basically remove this\nVLAN's IP, add VLAN16, add that IP.\n\n81\n00:04:51.370 --> 00:04:53.330\nIt be a lot work, and so in this case,\n\n82\n00:04:53.330 --> 00:04:56.660\nI think its going to be easier just\nto move everybody back to VLAN1.\n\n83\n00:04:56.660 --> 00:04:59.930\nWe've removed that VLAN ACL from\nthe first question, so that's gone.\n\n84\n00:04:59.930 --> 00:05:01.880\nSo we can just move people back to VLAN1,\n\n85\n00:05:01.880 --> 00:05:04.160\nand that should kind\nof sort that part out.\n\n86\n00:05:04.160 --> 00:05:07.770\nNow we still have our mismatched area ID\nto sort out, but I wanna fix that AC,\n\n87\n00:05:07.770 --> 00:05:08.520\nnot ACL.\n\n88\n00:05:08.520 --> 00:05:11.320\nI wanna fix that VLAN\nassignment issue first,\n\n89\n00:05:11.320 --> 00:05:14.490\nbecause otherwise we're gonna\nhave some devices in VLAN16, and\n\n90\n00:05:14.490 --> 00:05:18.760\nsome devices in VLAN1 and we're gonna\nhave other connectivity issues creep up.\n\n91\n00:05:18.760 --> 00:05:22.270\nSo if you remember,\nI changed to these three interfaces here,\n\n92\n00:05:22.270 --> 00:05:26.990\nas well as these two interfaces up here,\nand the interface that faced EDGE1.\n\n93\n00:05:26.990 --> 00:05:29.020\nThose are the three that\nI moved over into VLAN16.\n\n94\n00:05:29.020 --> 00:05:31.600\nI'm just gonna move them back to VLAN1,\n\n95\n00:05:31.600 --> 00:05:35.590\nand that should take care of any\nkind of things that creep up there.\n\n96\n00:05:35.590 --> 00:05:37.970\nAnd actually,\nI don't remember if I fixed it on NYCORE2.\n\n97\n00:05:37.970 --> 00:05:38.750\nDid I?\n\n98\n00:05:38.750 --> 00:05:39.890\nLet's find out.\n\n99\n00:05:39.890 --> 00:05:42.500\nYeah.\nI do have one interface on VLAN16 here.\n\n100\n00:05:42.500 --> 00:05:47.080\nSo I'm gonna go and just move it\nback over to where I want it to be,\n\n101\n00:05:47.080 --> 00:05:50.680\nwhich is good old switchport access VLAN1.\n\n102\n00:05:50.680 --> 00:05:53.200\nAnd that'll put that one back.\n\n103\n00:05:53.200 --> 00:05:55.157\nThen I just need to tackle access one.\n\n104\n00:05:58.147 --> 00:06:01.810\nAnd basically run through that same thing.\n\n105\n00:06:01.810 --> 00:06:06.540\nLet me do a show VLAN and\nsee which interfaces are on VLAN16.\n\n106\n00:06:06.540 --> 00:06:11.120\nSo I got one, 23, and 24, so\nwe're just gonna move those back.\n\n107\n00:06:13.730 --> 00:06:17.660\nAnd so I'm gonna use the range command,\nmake that a little bit easier on me.\n\n108\n00:06:17.660 --> 00:06:20.300\nAnd set those back to VLAN1, all right.\n\n109\n00:06:20.300 --> 00:06:25.100\nNow, if I hadn't removed that\nVLAN ACL before, then I would\n\n110\n00:06:25.100 --> 00:06:28.490\nactually need to remove it here, but we\ndid, we removed it before, so it's gone.\n\n111\n00:06:28.490 --> 00:06:30.290\nNow, let's see, that just leaves core one.\n\n112\n00:06:31.860 --> 00:06:35.200\nThis last guy, which apparently,\nI left in my config, which is convenient.\n\n113\n00:06:36.820 --> 00:06:39.850\nAnd for it, what does it have on VLAN16?\n\n114\n00:06:39.850 --> 00:06:47.940\nPorts one and 22, so\nwe'll just set those in the right spot.\n\n115\n00:06:51.280 --> 00:06:51.890\nRange command.\n\n116\n00:06:51.890 --> 00:06:53.750\nSometimes, they save you time,\nsometimes they don't.\n\n117\n00:06:53.750 --> 00:06:56.500\nAnd then you have to type\nout these crazy things.\n\n118\n00:06:56.500 --> 00:06:58.494\nAll right.\nSwitchboard access, VLAN1, and\n\n119\n00:06:58.494 --> 00:06:59.870\nthat's fixed, all right.\n\n120\n00:06:59.870 --> 00:07:02.440\nSo now they're all nice and neat,\n\n121\n00:07:02.440 --> 00:07:07.170\nback to VLAN1 where they're supposed to\nbe, and now I don't have VLAN16 anymore.\n\n122\n00:07:07.170 --> 00:07:11.710\nAnd so basically all of these ports are on\nVLAN1, just across this whole topology.\n\n123\n00:07:11.710 --> 00:07:12.880\nAnd I'm okay with that.\n\n124\n00:07:12.880 --> 00:07:16.170\nAnd over here in NYCORE2,\nI've got that VLAN1\n\n125\n00:07:16.170 --> 00:07:21.080\ninterface that has 192.168.16.something,\nI don't remember, and it's\n\n126\n00:07:21.080 --> 00:07:25.220\nreaching over this link up to NYEDGE2, and\nwere supposed to be building adjacency.\n\n127\n00:07:25.220 --> 00:07:27.400\nNow we can start to\ntroubleshoot that adjacency,\n\n128\n00:07:27.400 --> 00:07:31.130\nand not have to worry about weird VLAN\nnumbers is getting the mix, all right.\n\n129\n00:07:31.130 --> 00:07:35.080\nSo troubleshooting this adjacency,\nthere's two ways to go about it.\n\n130\n00:07:35.080 --> 00:07:39.650\nI know that I'm getting a report of\na mismatched error ID, I mean, an area ID.\n\n131\n00:07:39.650 --> 00:07:43.480\nSo the easiest way to troubleshoot this is\nto do what's called the config comparison.\n\n132\n00:07:43.480 --> 00:07:45.680\nLook at the configuration of OSPF up here.\n\n133\n00:07:45.680 --> 00:07:47.720\nLook at the configuration\nof OSPF down here.\n\n134\n00:07:47.720 --> 00:07:48.950\nWhichever one's not set for\n\n135\n00:07:48.950 --> 00:07:52.490\nArea Zero, that's the problem,\nyou put it in Area Zero, and you're fixed.\n\n136\n00:07:52.490 --> 00:07:59.090\nOr I could do debug IP OSPF ADJ,\nand debug IP OSPF Packet,\n\n137\n00:07:59.090 --> 00:08:02.780\nand what that would do is they would\nshow me the communications, right?\n\n138\n00:08:02.780 --> 00:08:06.080\nPacket, I would see the actual\nOSPF packets coming through, and\n\n139\n00:08:06.080 --> 00:08:07.960\nADJ would be the adjacency events.\n\n140\n00:08:07.960 --> 00:08:11.770\nAnd so I can see if there is hello and\ndead timer mixups, and so on.\n\n141\n00:08:11.770 --> 00:08:13.940\nIn this case we just know it's\nan area ID mixup though so\n\n142\n00:08:13.940 --> 00:08:15.880\nI just need to look at the config,\nthat'll be faster,\n\n143\n00:08:15.880 --> 00:08:18.130\nand we don't have to mess\naround with debug commands.\n\n144\n00:08:18.130 --> 00:08:21.070\nSo I'm just going to\njump over to NYCORE2 and\n\n145\n00:08:21.070 --> 00:08:24.780\njust do a quick show IP protocols, right?\n\n146\n00:08:24.780 --> 00:08:27.270\nShow IP protocols will show\nme the OSPF process, and\n\n147\n00:08:27.270 --> 00:08:32.190\nit will show me the areas that I'm in,\nand, well, here's our problem.\n\n148\n00:08:32.190 --> 00:08:36.520\nThis guy is showing 192.168.16.0\nas being in Area One,\n\n149\n00:08:36.520 --> 00:08:39.680\ninstead of Area Zero, and that's more\nthan likely why we're getting a mismatch,\n\n150\n00:08:39.680 --> 00:08:44.310\nbecause we're receiving information\nfrom another node that's in Area Zero.\n\n151\n00:08:44.310 --> 00:08:47.170\nNow, I don't know if I have\nthat problem with anybody else,\n\n152\n00:08:47.170 --> 00:08:52.050\nso I'm gonna do a quick show\nIP OSPF Neighbor, and I have no neighbors.\n\n153\n00:08:52.050 --> 00:08:53.941\nSo it's not like anybody\nelse is in Area One.\n\n154\n00:08:53.941 --> 00:08:56.655\nIt looks like it's just me in Area One,\nso I'm the problem.\n\n155\n00:08:56.655 --> 00:08:59.613\n[NOISE] You know, it's me not you.\n\n156\n00:08:59.613 --> 00:09:02.080\n[LAUGH] And so we need to fix that.\n\n157\n00:09:02.080 --> 00:09:04.550\nI'll do a show run and\nlook for the OSPF section.\n\n158\n00:09:05.900 --> 00:09:08.530\nAnd looks like we got a simple\nnetwork statement on this one.\n\n159\n00:09:08.530 --> 00:09:09.850\nOSPF is tricky remember.\n\n160\n00:09:09.850 --> 00:09:14.170\nOSPF can be configured here in the global\narea, the global router config, or\n\n161\n00:09:14.170 --> 00:09:16.400\nit can be done on the interface.\n\n162\n00:09:16.400 --> 00:09:21.540\nSomebody could have gone onto an interface\nand said IP OSPF 100 Area One.\n\n163\n00:09:21.540 --> 00:09:23.430\nAnd so then I wouldn't see\nit here in this section.\n\n164\n00:09:23.430 --> 00:09:25.480\nSo you might have to check\nthe interfaces also.\n\n165\n00:09:25.480 --> 00:09:29.400\nBut in this case it is right\nhere in the router process.\n\n166\n00:09:29.400 --> 00:09:30.710\nAnd I can just say network.\n\n167\n00:09:30.710 --> 00:09:35.280\nWell actually I have to get\nthat one out of there first.\n\n168\n00:09:35.280 --> 00:09:36.816\nSo lets do a no network 192.168.16.0.\n\n169\n00:09:38.880 --> 00:09:43.810\nAnd we'll take that one out, and then I'm\njust going to rerun that same command,\n\n170\n00:09:43.810 --> 00:09:46.525\nwithout the no, and put it into Area Zero.\n\n171\n00:09:46.525 --> 00:09:50.250\nAnd once that's in Area Zero, now I'll\nstart receiving the communications from\n\n172\n00:09:50.250 --> 00:09:53.080\nthe other router that's in Area Zero, and\n\n173\n00:09:53.080 --> 00:09:57.900\nan adjacency should form up, and\nthat usually doesn't take to long.\n\n174\n00:09:57.900 --> 00:10:00.560\nAnd so that process, there we go,\nit's already running.\n\n175\n00:10:00.560 --> 00:10:04.080\nI didn't get any pop-ups on my screen, so\napparently console logging is turned off,\n\n176\n00:10:04.080 --> 00:10:08.150\nbut either way,\nI can see I now have a couple of peers,\n\n177\n00:10:08.150 --> 00:10:12.509\nincluding 192.168.16.5,\nwhich I'll imagine is that Edge router.\n\n178\n00:10:12.509 --> 00:10:16.990\n172.14.0.2 that could be it also.\n\n179\n00:10:16.990 --> 00:10:20.898\nI'm not sure who it is, so maybe I'll\njump over and verify that on NYEDGE2.\n\n180\n00:10:20.898 --> 00:10:24.830\nI'm just going to do a quick\nshow IP interface brief here so\n\n181\n00:10:24.830 --> 00:10:26.200\nI can figure out who it is.\n\n182\n00:10:30.460 --> 00:10:35.590\nAnd oh it is 172.14.0.2,\nthat's it, and so when I look\n\n183\n00:10:35.590 --> 00:10:41.230\nback on NYCORE2, I now have an adjacency\nwith that router right here,\n\n184\n00:10:41.230 --> 00:10:43.010\nand we should be exchanging routes.\n\n185\n00:10:43.010 --> 00:10:46.870\nIf I do a show IP route,\nlet's see if we've learned anything.\n\n186\n00:10:46.870 --> 00:10:49.300\nThey didn't specify it in the question\nthat we should be learning anything, so\n\n187\n00:10:49.300 --> 00:10:52.030\neven if we're not,\nit's not that big of a deal.\n\n188\n00:10:52.030 --> 00:10:55.460\nBut looks like yeah I really haven't\nlearned anything from them yet.\n\n189\n00:10:55.460 --> 00:10:57.820\nBut I do have an adjacency,\nand so we are up.\n\n190\n00:10:57.820 --> 00:11:00.130\nIt says in the ticket, NYEDGE2 and\n\n191\n00:11:00.130 --> 00:11:03.740\nNYCORE2 are not establishing\na neighbor relationship in OSPF.\n\n192\n00:11:03.740 --> 00:11:04.590\nWe resolved that.\n\n193\n00:11:04.590 --> 00:11:07.700\nIt doesn't say anything about routes,\nso that's going to resolve this one.\n\n194\n00:11:07.700 --> 00:11:11.000\nI'm just going to do one more thing to\ndouble check before we wrap this one up.\n\n195\n00:11:11.000 --> 00:11:13.060\nI'm going to jump over to NYEDGE2, and\n\n196\n00:11:13.060 --> 00:11:15.050\njust make sure I have\na neighbor relationship here.\n\n197\n00:11:15.050 --> 00:11:18.850\nSo I'll do a show IP OSPF Neighbor.\n\n198\n00:11:18.850 --> 00:11:22.250\nI fully expect it, because a neighbor\nrelationship is a two way thing, but\n\n199\n00:11:22.250 --> 00:11:24.490\nI just wanna be on the safe side, and\n\n200\n00:11:24.490 --> 00:11:28.700\nI can see that I do have a couple of\nconnections out on that V line interface.\n\n201\n00:11:28.700 --> 00:11:32.290\nI don't know which one\nis actually NYCORE2, so\n\n202\n00:11:32.290 --> 00:11:34.100\nlet's go find out what it's got.\n\n203\n00:11:35.540 --> 00:11:39.170\nIf I do a show IP INT Brief and\n\n204\n00:11:39.170 --> 00:11:44.070\nI can see that it is 192.168.16.6,\nand so when I look at EDGE2,\n\n205\n00:11:45.300 --> 00:11:50.800\nthat's the second neighbor\nstatement right here, 192.168.16.6.\n\n206\n00:11:50.800 --> 00:11:51.770\nAll right, so we resolved it.\n\n207\n00:11:51.770 --> 00:11:54.190\nIn this case,\nas simple as an area mismatch.\n\n208\n00:11:54.190 --> 00:11:55.900\nWe turned up just by doing a show log.\n\n209\n00:11:55.900 --> 00:11:58.310\nIt was right there in the log file,\nwe could see what was wrong,\n\n210\n00:11:58.310 --> 00:11:59.320\nyou go in and fix it.\n\n211\n00:11:59.320 --> 00:12:01.120\nA debug would've turned that up also,\n\n212\n00:12:01.120 --> 00:12:03.550\nbut it's more trouble than\nit's worth sometimes.\n\n213\n00:12:03.550 --> 00:12:04.560\nThis one turned out to be pretty easy.\n\n214\n00:12:04.560 --> 00:12:07.250\nWe fixed that, and\nnow ready to move on to the next question.\n\n215\n00:12:07.250 --> 00:12:08.510\nSo hope you guys enjoyed it.\n\n216\n00:12:08.510 --> 00:12:11.427\nStay tuned,\nwe've got issue number three coming up.\n\n217\n00:12:11.427 --> 00:12:17.859\n[MUSIC]\n\n",
          "vimeoId": "151018044"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #3` from set #8. The trouble ticket states that \"NYWAN1 and NYEDGE2 are configured for iBGP but they are not establishing a connection \"",
          "length": "950",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-8-3-set_8_issue_3-120815-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-8-3-set_8_issue_3-120815-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-8-3-set_8_issue_3-120815-1-sm.jpg",
          "title": "Set 8 Issue 3",
          "transcript": "WEBVTT\n\n1\n00:00:00.227 --> 00:00:05.985\n[MUSIC]\n\n2\n00:00:08.505 --> 00:00:12.433\nAll right, ladies and gentlemen, welcome\nback to another troubleshooting episode on\n\n3\n00:00:12.433 --> 00:00:15.509\nITProTV, and we're going to be\njumping into Set Eight Issue Three,\n\n4\n00:00:15.509 --> 00:00:18.420\nanother exciting troubleshooting\nadventure ahead of us.\n\n5\n00:00:18.420 --> 00:00:20.130\nLooks like this time\nwe've got a BGP issue.\n\n6\n00:00:20.130 --> 00:00:21.460\nThose are some of my favorites.\n\n7\n00:00:21.460 --> 00:00:24.040\nSo, this one says that NYWAN1.\n\n8\n00:00:24.040 --> 00:00:27.870\nAnd NYEDGE2 are configured for iBGP.\n\n9\n00:00:27.870 --> 00:00:30.580\nBut they are not\nestablishing a connection.\n\n10\n00:00:30.580 --> 00:00:34.700\nNow, we've seen BGP issues like this\nin previous troubleshooting tickets.\n\n11\n00:00:34.700 --> 00:00:38.450\nIt uses TCP, it basically\nestablishes a dedicated connection.\n\n12\n00:00:38.450 --> 00:00:40.760\niBGP can be really finicky about things.\n\n13\n00:00:40.760 --> 00:00:44.640\nIt expects this full mesh, it expects to\nknow the network in between two nodes.\n\n14\n00:00:44.640 --> 00:00:47.930\nSo, it can be pretty picky,\nI'm not surprised to see a problem here.\n\n15\n00:00:47.930 --> 00:00:49.620\nAnd there's a lot of different\nthings that can cause it.\n\n16\n00:00:49.620 --> 00:00:52.530\nSo, this isn't one where I'm saying,\nI bet it's this.\n\n17\n00:00:52.530 --> 00:00:53.690\nAnd I just jump right in and find it.\n\n18\n00:00:53.690 --> 00:00:56.090\nHere we're gonna have to\nexplore around a little bit.\n\n19\n00:00:56.090 --> 00:00:59.310\nLet's start with our typology to see\nexactly where we have to explore.\n\n20\n00:00:59.310 --> 00:01:02.980\nThey're telling me that it's NYWAN1,\nand NY EDGE2.\n\n21\n00:01:02.980 --> 00:01:06.410\nSo, they've conveniently chosen\ndevices pretty far spread out.\n\n22\n00:01:06.410 --> 00:01:11.680\nSo, NYWAN1 has an iBGP connection\nto NYEDGE2 way up here.\n\n23\n00:01:11.680 --> 00:01:16.350\nSo, that means in order to get there\nNYWAN1 has to pass through NYCORE1,\n\n24\n00:01:16.350 --> 00:01:20.850\nthrough NYCORE2 and\nup to EDGE2, all right?\n\n25\n00:01:20.850 --> 00:01:25.230\nI'm hoping and we'll see, my hopes\nwill probably be just trashed, but\n\n26\n00:01:25.230 --> 00:01:29.410\nI'm hoping that these guys are both on\nVLAN 16, or at least on the same subnet.\n\n27\n00:01:29.410 --> 00:01:31.370\nAnd that way they can just talk\ndirectly to each other, and\n\n28\n00:01:31.370 --> 00:01:33.360\nthen I don't have to worry\nabout anything crazy.\n\n29\n00:01:33.360 --> 00:01:35.280\nBut the odds are these guys\nwill be in different VLANS,\n\n30\n00:01:35.280 --> 00:01:38.370\nwhich means we'll get routed, and that's\nwhere all the headaches start to come in.\n\n31\n00:01:38.370 --> 00:01:41.530\nSo, let's see what we're dealing with.\n\n32\n00:01:41.530 --> 00:01:44.500\nI know that NYEDGE2 is on\nthe 192.168.16 network,\n\n33\n00:01:44.500 --> 00:01:46.390\ncuz we saw that in a previous issue.\n\n34\n00:01:46.390 --> 00:01:48.590\nBut if you haven't watched that one,\nlet's just verify.\n\n35\n00:01:48.590 --> 00:01:53.330\nI'm gonna go here to NYEDGE2, and\nI'm gonna verify its IP address.\n\n36\n00:01:53.330 --> 00:01:55.170\nSo, I'll just do a quick\nshow IP interface brief.\n\n37\n00:01:56.500 --> 00:02:02.220\nAnd I can see that,\non it's LAN interface, this inside one.\n\n38\n00:02:02.220 --> 00:02:04.300\nThe one that's on IBGP is GI00.\n\n39\n00:02:04.300 --> 00:02:09.960\nAnd on the GI00 side of things,\nit's 192.168.16.2.\n\n40\n00:02:09.960 --> 00:02:12.230\nSo, I'm going to use the most\nimportant troubleshooting tool I have,\n\n41\n00:02:12.230 --> 00:02:13.820\nwhich is the pen.\n\n42\n00:02:13.820 --> 00:02:20.410\nAnd I'm just going to write that down,\nso I don't forget.\n\n43\n00:02:20.410 --> 00:02:21.800\nSo NYEDGE2 is 192.168.16.2.\n\n44\n00:02:21.800 --> 00:02:27.540\nAnd then,\non the other end of this is NYWAN1.\n\n45\n00:02:27.540 --> 00:02:29.520\nNYWAN1 is way over here.\n\n46\n00:02:29.520 --> 00:02:32.250\nI've got some kind of layer\n3 interface here, which.\n\n47\n00:02:32.250 --> 00:02:35.743\nAgain, doesn't bode well for me hoping\nthese guys are on the same subnet.\n\n48\n00:02:35.743 --> 00:02:37.370\n[LAUGH] So let's jump over to NYWAN1.\n\n49\n00:02:37.370 --> 00:02:39.880\nThey have not labeled that interface for\nme, so\n\n50\n00:02:39.880 --> 00:02:42.140\nI really don't know\nwhat network to expect.\n\n51\n00:02:42.140 --> 00:02:43.830\nAnd actually,\nthat's going to be a bit of a problem.\n\n52\n00:02:43.830 --> 00:02:45.550\nHopefully it's running CDP at least, so\n\n53\n00:02:45.550 --> 00:02:47.760\nI can see which port is\nplugged into NYCORE1.\n\n54\n00:02:47.760 --> 00:02:50.800\nSo, let's jump over to NYWAN1 and\nsee if we can't figure that out.\n\n55\n00:02:53.020 --> 00:02:57.080\nSo, on NYWAN1, I'm gonna start with\nthe show cdp neighbor, just so\n\n56\n00:02:57.080 --> 00:02:58.770\nI can figure out the interfaces.\n\n57\n00:02:58.770 --> 00:03:02.240\nAnd it's connected to NYCORE1\non its Gig 0/0 interface.\n\n58\n00:03:02.240 --> 00:03:06.508\nSo while it's not documented here\non the diagram, this is Gig 0/0.\n\n59\n00:03:06.508 --> 00:03:12.780\nAnd so I'm just gonna do a show run for\ninterface gi0/0, and it's 192.168.15.1.\n\n60\n00:03:12.780 --> 00:03:18.000\nI should have known they\nwere on different sub nets.\n\n61\n00:03:18.000 --> 00:03:22.805\nSo, all right,\nlet me just write that down.\n\n62\n00:03:22.805 --> 00:03:26.226\nNYWAN1 is 192.168.15.1.\n\n63\n00:03:26.226 --> 00:03:31.520\nAll right, now, the reason I was\nhoping they were on the same subnet.\n\n64\n00:03:31.520 --> 00:03:32.990\nIf they're on the same subnet,\n\n65\n00:03:32.990 --> 00:03:35.160\nthey can build a neighbor\nrelationship to each other.\n\n66\n00:03:35.160 --> 00:03:38.670\nIt's gonna come right up, and\nthere's no big deal, whatsoever.\n\n67\n00:03:38.670 --> 00:03:44.260\nBut, the instant you put a single\nrouter in between two iBGP nodes,\n\n68\n00:03:44.260 --> 00:03:46.140\nthings do start to get really flaky.\n\n69\n00:03:46.140 --> 00:03:50.260\nAnd the main reason is,\nBGP expects you to have.\n\n70\n00:03:50.260 --> 00:03:51.400\nAn IGP.\n\n71\n00:03:51.400 --> 00:03:53.360\nAnd interior gateway\nprotocol under the hood.\n\n72\n00:03:53.360 --> 00:03:56.050\nAnd we've seen that in previous\ntroubleshooting issues too.\n\n73\n00:03:56.050 --> 00:03:58.290\nIt needs to know that, to figure out\nhow to get to these other networks.\n\n74\n00:03:58.290 --> 00:04:01.110\nWhen you start having routers in the mix,\nthat can be a problem.\n\n75\n00:04:01.110 --> 00:04:05.470\nBut before I dive in to complex network\ntopology stuff, this could be as simple as\n\n76\n00:04:05.470 --> 00:04:09.540\nbad authentication, or\nwrong autonomous system number.\n\n77\n00:04:09.540 --> 00:04:12.780\nThere's some basic BGP configurations\nthat could be wrong here.\n\n78\n00:04:12.780 --> 00:04:14.910\nAnd I can save myself a lot of trouble.\n\n79\n00:04:14.910 --> 00:04:18.100\nAnd the easiest way to spot that,\nis to do a config compare.\n\n80\n00:04:18.100 --> 00:04:21.360\nCompare the config on one side\nwith the config on the other side.\n\n81\n00:04:21.360 --> 00:04:23.270\nAnd so I'm just gonna do that real quick.\n\n82\n00:04:23.270 --> 00:04:26.180\nHere on NYWAN1 I wanna know,\nI'm gonna do a show run for\n\n83\n00:04:26.180 --> 00:04:31.430\nthe BGPsection, and\nit's nice and small, right?\n\n84\n00:04:31.430 --> 00:04:32.750\nI've got a router BGP 65543.\n\n85\n00:04:32.750 --> 00:04:34.610\nThat's my autonomous system number.\n\n86\n00:04:34.610 --> 00:04:36.780\nWe've got BGP log neighbor changes.\n\n87\n00:04:36.780 --> 00:04:37.770\nThat's a default command.\n\n88\n00:04:37.770 --> 00:04:39.220\nI can ignore it.\n\n89\n00:04:39.220 --> 00:04:45.422\nAnd then I've got neighbor\n192.168.16.2 remote-as 65534.\n\n90\n00:04:45.422 --> 00:04:48.786\nThat as number matches mine,\nso I know it's IBGP.\n\n91\n00:04:48.786 --> 00:04:51.936\nAnd 192.168.16.2\n\n92\n00:04:51.936 --> 00:04:56.610\nis the IP address I wrote down earlier\nof EDGE2, so I know that that's right.\n\n93\n00:04:56.610 --> 00:04:57.890\nAnd that's configured.\n\n94\n00:04:57.890 --> 00:05:01.890\nOkay, now there's no source added to this.\n\n95\n00:05:01.890 --> 00:05:06.460\nWhen I configure BGP, I almost always do a\nneighbor 192.168.16.2 update dash source.\n\n96\n00:05:06.460 --> 00:05:12.200\nAnd specify the IP address or interface\nI want to use in my update source.\n\n97\n00:05:12.200 --> 00:05:15.260\nBecause sometimes we might use\nloop backs or other things.\n\n98\n00:05:15.260 --> 00:05:17.000\nand in this scenario they haven't done it.\n\n99\n00:05:17.000 --> 00:05:20.410\nSo, it's going to use whatever\ninterface is closest to that network.\n\n100\n00:05:20.410 --> 00:05:23.490\nIf we want to find out\nwhat that interface is,\n\n101\n00:05:23.490 --> 00:05:28.160\nyou can just do a show IP route For\nthat network.\n\n102\n00:05:28.160 --> 00:05:32.280\nAnd well, that's going to be\na little bit of a problem there.\n\n103\n00:05:32.280 --> 00:05:35.080\nApparently I don't have a route for\nthat network.\n\n104\n00:05:35.080 --> 00:05:36.750\nThis is one of the problems with BGP,\n\n105\n00:05:36.750 --> 00:05:39.920\nis that we don't necessarily\nlearn those networks.\n\n106\n00:05:39.920 --> 00:05:41.360\nShow ip bgp.\n\n107\n00:05:41.360 --> 00:05:44.990\nI'll see the BGP database,\nand my database is empty.\n\n108\n00:05:44.990 --> 00:05:47.130\nI don't have anything, right?\n\n109\n00:05:47.130 --> 00:05:50.140\nAnd I didn't have any network\nstatements up here in BGP, so\n\n110\n00:05:50.140 --> 00:05:51.820\nI'm not advertizing any networks.\n\n111\n00:05:51.820 --> 00:05:55.620\nThis is like just the bare minimum,\n\n112\n00:05:55.620 --> 00:05:58.250\nleast amount of work you\ncould do type configuration.\n\n113\n00:05:58.250 --> 00:06:00.700\nLet me just make sure there's\nno commands being excluded.\n\n114\n00:06:00.700 --> 00:06:06.350\nI'm gonna do a,\nbegin with BGP instead of a section BGP.\n\n115\n00:06:06.350 --> 00:06:08.470\nAnd nope, no hidden commands.\n\n116\n00:06:08.470 --> 00:06:10.090\nThere's just not much set up here.\n\n117\n00:06:10.090 --> 00:06:10.860\nRight?\n\n118\n00:06:10.860 --> 00:06:13.050\nAnd if I can't get to that destination,\n\n119\n00:06:13.050 --> 00:06:14.960\nthen I'm going to have my own\nlittle problems right there.\n\n120\n00:06:14.960 --> 00:06:15.880\nAnd that's more than likely.\n\n121\n00:06:15.880 --> 00:06:17.610\nWe're just dealing with reachability.\n\n122\n00:06:17.610 --> 00:06:19.240\nIf I do a show IP route,\n\n123\n00:06:19.240 --> 00:06:24.310\nmy routing table only has one directly\nconnected route, and that's it.\n\n124\n00:06:24.310 --> 00:06:27.624\nAnd so if I try and ping 198.168.16.2,\n\n125\n00:06:27.624 --> 00:06:30.790\nwhich is NYEDGE2 I'm\nnot going to get there.\n\n126\n00:06:30.790 --> 00:06:33.755\nCuz it's not on my routing table, and\nI don't have a gateway of last resort.\n\n127\n00:06:33.755 --> 00:06:35.770\nIf I can't even ping the host.\n\n128\n00:06:35.770 --> 00:06:38.760\nThere's no way I'm going to build\nup a BGP relationship, right.\n\n129\n00:06:38.760 --> 00:06:41.980\nSo, there's going to be at\nleast once side of our problem.\n\n130\n00:06:41.980 --> 00:06:44.210\nWe can have these same problems\nover on the other side.\n\n131\n00:06:44.210 --> 00:06:47.050\nI don't know, but at a minimum we're\ngoing to have to fix this guy, all right.\n\n132\n00:06:47.050 --> 00:06:49.990\nLet's go take a look at the other side,\nand just see how bad a mess it is.\n\n133\n00:06:49.990 --> 00:06:51.630\nSo, I'm going to jump over to NYEDGE2.\n\n134\n00:06:51.630 --> 00:06:53.090\nSo again, looking at the topology.\n\n135\n00:06:53.090 --> 00:06:58.090\nI'm jumping from this router over here,\nall the way up to the top right, up to\n\n136\n00:06:58.090 --> 00:07:03.050\nNYEDGE2, this guy so that I can jump in\nthere and find out what it's looking like.\n\n137\n00:07:03.050 --> 00:07:06.820\nAnd so on this one,\nI'm gonna do a show run,\n\n138\n00:07:06.820 --> 00:07:10.220\nand I'll pull up the BgP section and\nthis one's a little better route.\n\n139\n00:07:10.220 --> 00:07:11.810\nI got a couple external neighbors.\n\n140\n00:07:11.810 --> 00:07:15.430\nMy autonomous system number is 65534.\n\n141\n00:07:15.430 --> 00:07:21.991\nAnd I've got a neighbor\nstatement from 192.168.15.1.\n\n142\n00:07:21.991 --> 00:07:23.187\nThat's NYLAN1.\n\n143\n00:07:23.187 --> 00:07:28.480\nAnd its remote-as is 65534, so I do have\na proper neighbor statement in there.\n\n144\n00:07:28.480 --> 00:07:34.460\nI don't have a update-source defined, so\nit's just gonna use the closest interface\n\n145\n00:07:34.460 --> 00:07:37.790\nto that guy, which I don't really know,\nso again, I can do a show ip route.\n\n146\n00:07:39.110 --> 00:07:43.670\nFor 192.168.15.1, and\nI do have a route for\n\n147\n00:07:43.670 --> 00:07:45.090\nthat network so I know how to get there.\n\n148\n00:07:45.090 --> 00:07:47.150\nI'm learning an ospf, and\n\n149\n00:07:47.150 --> 00:07:52.670\nif I look at it says that I can\nget there on my Gi0/0 interface.\n\n150\n00:07:52.670 --> 00:08:00.127\nAnd so if I do a show ip interface brief\nmy Gi0/0 well, that was 192.168.16.2.\n\n151\n00:08:00.127 --> 00:08:01.630\nThat's important,\n\n152\n00:08:01.630 --> 00:08:07.190\nbecause I need that number to match the\nneighbor number defined on the other side.\n\n153\n00:08:07.190 --> 00:08:10.240\nThe neighbor on the other\nside was set to 192.168.16.2.\n\n154\n00:08:10.240 --> 00:08:13.390\nIf I was reaching out to it with this IP,\nthey wouldn't match, and\n\n155\n00:08:13.390 --> 00:08:14.620\nI wouldn't get an adjacency, right.\n\n156\n00:08:14.620 --> 00:08:16.710\nSo, I've gotta check that out, all right.\n\n157\n00:08:16.710 --> 00:08:19.500\nBut honestly this side seems\nto be in really good shape.\n\n158\n00:08:19.500 --> 00:08:23.000\nWe've got our neighbor statement,\nwe don't have any networks to find,\n\n159\n00:08:23.000 --> 00:08:23.870\nwhich is a little odd.\n\n160\n00:08:23.870 --> 00:08:26.716\nYou know seems like you'd want\nat least one network in there.\n\n161\n00:08:26.716 --> 00:08:29.380\nBut there's nothing,\nthere's no redistribute commands, so\n\n162\n00:08:29.380 --> 00:08:33.408\nI am running iBGP but\nim not actually advertising any networks.\n\n163\n00:08:33.408 --> 00:08:37.160\nNow, that's okay I might be learning from\nsomebody else and pushing them along.\n\n164\n00:08:37.160 --> 00:08:39.070\nAnd do a quick show iBGP.\n\n165\n00:08:40.130 --> 00:08:43.630\nAnd see if we are getting anything, and it\nlooks like I am getting a default gateway.\n\n166\n00:08:43.630 --> 00:08:48.015\nSo, I'm learning a default gateway\nvia BGP, and it's got a next hop of\n\n167\n00:08:48.015 --> 00:08:52.490\n172.14.0.4, which I know how to get to cuz\nI'm directly connected to that network.\n\n168\n00:08:52.490 --> 00:08:53.610\nAnd did we see that?\n\n169\n00:08:53.610 --> 00:08:56.780\nIf I do a show IP route do I,\nlet's see if it actually made it.\n\n170\n00:08:56.780 --> 00:08:59.650\nOh it did it made it into\nthe routing table there it is.\n\n171\n00:08:59.650 --> 00:09:04.390\nBut I already had a 196.168.15 round, to\nget to the other system, learn via ospf.\n\n172\n00:09:04.390 --> 00:09:08.870\nAnd that's that interior\nrounding protocol again, right?\n\n173\n00:09:08.870 --> 00:09:11.410\nBGP really expect to have that, or\n\n174\n00:09:11.410 --> 00:09:14.770\nit expects to have a full mesh typology\nwhere all the routers are connected.\n\n175\n00:09:14.770 --> 00:09:16.390\nAnd in mine I don't have a full mesh.\n\n176\n00:09:16.390 --> 00:09:19.990\nNYWAN1 is not directly\nplugged into NYEDGE2.\n\n177\n00:09:19.990 --> 00:09:24.260\nSo, it's not a full mesh, and so\niBGP breaks, and the way to fix that,\n\n178\n00:09:24.260 --> 00:09:31.700\nthe easiest way to fix that is, well,\nto bring NYWAN1 into my OSPF area, right?\n\n179\n00:09:31.700 --> 00:09:35.080\nI've got OSPF area zero spread\nacross these guys right here, but\n\n180\n00:09:35.080 --> 00:09:36.520\nit doesn't extend to NYWAN1.\n\n181\n00:09:36.520 --> 00:09:39.410\nIf I have control of that router, then\n\n182\n00:09:39.410 --> 00:09:44.010\nthe best thing to do is to stretch OSPF\narea zero to encompass this router too.\n\n183\n00:09:44.010 --> 00:09:44.850\nRight?\n\n184\n00:09:44.850 --> 00:09:47.010\nBut if I don't have\ncontrol of this router,\n\n185\n00:09:47.010 --> 00:09:48.870\nI might not wanna do\na dynamic routing protocol.\n\n186\n00:09:48.870 --> 00:09:50.090\nI might wanna do a static route.\n\n187\n00:09:50.090 --> 00:09:53.000\nAnd we can have a static route put it\nin here by whoever managed that device.\n\n188\n00:09:53.000 --> 00:09:54.530\nRight?\nBut in this case we do manage it.\n\n189\n00:09:54.530 --> 00:09:59.830\nSo let's just extend out OSPF, and then\nNYWAN1 will know how to get to NYEDGE2,\n\n190\n00:09:59.830 --> 00:10:01.740\nand that should fix our BGP issue.\n\n191\n00:10:01.740 --> 00:10:08.070\nAll right, so NYWAN1 has a layer\nthree link running down to NYCORE1.\n\n192\n00:10:08.070 --> 00:10:09.610\nAnd on NYCORE1 it's port two.\n\n193\n00:10:09.610 --> 00:10:12.948\nSo, let's look at NYCORE1 and\nsee if that's set up for ospf or not.\n\n194\n00:10:12.948 --> 00:10:20.020\nSo, on NYCORE1, I'm just gonna look\nat the ospf configuration here.\n\n195\n00:10:22.550 --> 00:10:27.520\nSo I'll pull up the OSPF section and\nit looks like we've got FA1/0/2 is\n\n196\n00:10:27.520 --> 00:10:32.475\npassive and that's actually\nthe interface that I care about.\n\n197\n00:10:32.475 --> 00:10:36.980\nAnd then 192.168.15 and\n192.168.16 are both being advertised.\n\n198\n00:10:38.320 --> 00:10:42.950\nOkay, so I'm going to need to kill\nthat passive interface command.\n\n199\n00:10:42.950 --> 00:10:46.650\nBecause I want to build\nan adjacency over that link now.\n\n200\n00:10:46.650 --> 00:10:48.980\nSo, I'm gonna get into router ospf 100.\n\n201\n00:10:48.980 --> 00:10:52.820\nAnd I'll do a no passive-\ninterface fa1/0/2.\n\n202\n00:10:52.820 --> 00:10:58.790\nSo now if I just verify\nthat configuration.\n\n203\n00:11:00.060 --> 00:11:03.012\nNYCORE1 is advertising for\nboth of those networks, right?\n\n204\n00:11:03.012 --> 00:11:05.470\n192.168.15, and 192.168.16.\n\n205\n00:11:05.470 --> 00:11:07.620\nSo that's good.\n\n206\n00:11:07.620 --> 00:11:11.480\nNow I can jump up to NYWAN1, and\nI can get it set up for OSPF.\n\n207\n00:11:13.270 --> 00:11:14.690\nSo I'm going to jump in here.\n\n208\n00:11:14.690 --> 00:11:19.260\nAnd looking at my interfaces,\nI really just need to get it up and\n\n209\n00:11:19.260 --> 00:11:20.600\ngoing for GI00, right?\n\n210\n00:11:21.640 --> 00:11:22.630\nSo that it'll be able to learn.\n\n211\n00:11:22.630 --> 00:11:24.520\nActually, all my other\ninterfaces are shut down, so\n\n212\n00:11:24.520 --> 00:11:26.550\nI guess it doesn't really\nmatter which ones I turn on.\n\n213\n00:11:26.550 --> 00:11:28.230\nBut I'll go ahead and be specific.\n\n214\n00:11:28.230 --> 00:11:31.600\nI'm gonna say router ospf and\nthen whatever process number I want.\n\n215\n00:11:31.600 --> 00:11:36.190\nI like to use 100, it's what I always\nlearned, so I'll punch that in.\n\n216\n00:11:36.190 --> 00:11:38.710\nI can advertise a network, and so\n\n217\n00:11:38.710 --> 00:11:44.930\nI'll put 192.168.15.0 with\na 0.0.0.255 wildcard mask.\n\n218\n00:11:44.930 --> 00:11:51.810\nAnd then I'm gonna put that in area zero,\nright.\n\n219\n00:11:51.810 --> 00:11:55.640\nMy entire OSPF environment is in area\nzero, so I'll just bring that in and\n\n220\n00:11:55.640 --> 00:11:57.300\nI see an adjacency come up.\n\n221\n00:11:57.300 --> 00:11:59.726\nAnd when that adjacency comes up,\nI should start learning.\n\n222\n00:11:59.726 --> 00:12:04.940\nThe 192.168.16 network that wasn't in\nmy routing table a few moments ago.\n\n223\n00:12:04.940 --> 00:12:10.420\nSo, if I scroll back to where I did a,\nlet's see, where did I do that?\n\n224\n00:12:10.420 --> 00:12:15.840\nWhere I did a show ip route and\nI got that it wasn't in the routing table.\n\n225\n00:12:15.840 --> 00:12:17.742\nI know I ran the command,\nit's back here somewhere.\n\n226\n00:12:17.742 --> 00:12:21.210\nSo [LAUGH] I know I ran that command, and\nit didn't turn up in the routing table.\n\n227\n00:12:21.210 --> 00:12:26.000\nSo, anyhow, we'll just verify\nthat it should show up now.\n\n228\n00:12:26.000 --> 00:12:32.280\nIf I do a show ip router it should\nhave some osp routes coming in.\n\n229\n00:12:32.280 --> 00:12:33.140\nAnd I do.\n\n230\n00:12:33.140 --> 00:12:37.440\nAnd I know 192.168.15,\ncuz I'm plugged into it.\n\n231\n00:12:37.440 --> 00:12:38.750\nNow I know 192.168.16 also.\n\n232\n00:12:38.750 --> 00:12:43.860\nAnd so, if I try and ping 192.168.16.2,\nwhich is NYEDGE2 now I can get there.\n\n233\n00:12:43.860 --> 00:12:48.060\nAnd since I'm getting there,\nI imagine BGP is gonna come up.\n\n234\n00:12:48.060 --> 00:12:54.545\nAnd so if I do an ip bgp summary,\nI have a neighbor,\n\n235\n00:12:54.545 --> 00:13:00.680\n192.168.16.2, and as I look across here,\nMsgSent and MsgRcvd, 5 and 4.\n\n236\n00:13:00.680 --> 00:13:03.580\nAnd I've even got some prefixes\nthat are exchanging, right?\n\n237\n00:13:03.580 --> 00:13:05.050\nOr at least one.\n\n238\n00:13:05.050 --> 00:13:09.840\nAnd so, if I do a show ip bgp, we'll see\nif we get that default gateway coming in.\n\n239\n00:13:09.840 --> 00:13:10.440\nThere it is.\n\n240\n00:13:10.440 --> 00:13:12.820\nI've got the default gateway coming in.\n\n241\n00:13:12.820 --> 00:13:16.790\nAnd it's got a little lowercase i,\nletting me know that I got it.\n\n242\n00:13:16.790 --> 00:13:19.920\nWith and IGP is where it came from, so\nit much be redistributed on the the end,\n\n243\n00:13:19.920 --> 00:13:20.790\nand its got a star.\n\n244\n00:13:20.790 --> 00:13:23.610\nNow it doesnt have a greater\nthan symbol by it.\n\n245\n00:13:23.610 --> 00:13:28.280\nIts not showing as being the best,\nand if I do show IP route and\n\n246\n00:13:28.280 --> 00:13:30.018\nlook at my routing table.\n\n247\n00:13:30.018 --> 00:13:32.420\nAnd its okay in this case,\n\n248\n00:13:32.420 --> 00:13:35.080\ni mean if I want that to\nfunction I'm going to need it.\n\n249\n00:13:35.080 --> 00:13:38.480\nBut we got some next hop issue more\nthan likely is our problem there, so\n\n250\n00:13:38.480 --> 00:13:39.680\nit's not making it in.\n\n251\n00:13:39.680 --> 00:13:42.400\nThis is one of those cases where you have\nto decide how far we want to troubleshoot\n\n252\n00:13:42.400 --> 00:13:43.600\nthis, right?\n\n253\n00:13:43.600 --> 00:13:47.910\nThe question if we go back and\nrevisit it it says.\n\n254\n00:13:47.910 --> 00:13:51.100\nNYWAN1 and\nNWEDGE2 are configured for IBGP, but\n\n255\n00:13:51.100 --> 00:13:53.870\nthey are not establishing a connection.\n\n256\n00:13:53.870 --> 00:13:54.500\nSo, we've done that.\n\n257\n00:13:54.500 --> 00:13:56.830\nNow, we've established a connection,\nright.\n\n258\n00:13:56.830 --> 00:13:58.860\nIt doesn't say anything about whether or\nnot we're learning routes.\n\n259\n00:13:58.860 --> 00:14:00.760\nSo technically we solved the problem.\n\n260\n00:14:00.760 --> 00:14:04.140\nBut if you want to be really thorough, my\ndefault gateway is not making it in, and\n\n261\n00:14:04.140 --> 00:14:10.470\nif I go back to that show IP BGP and look\nat the database, it's not making it in.\n\n262\n00:14:10.470 --> 00:14:15.120\nIt's showing that I got it from in an IBGP\nsomewhere, it originated from IBGP, and it\n\n263\n00:14:15.120 --> 00:14:18.310\ndoesn't have the greater than symbol right\nthere so I know it's not being installed.\n\n264\n00:14:18.310 --> 00:14:22.790\nIf I look at that next hop,\nIt's 172.14.0.4.\n\n265\n00:14:22.790 --> 00:14:30.020\nIf I look at my own routing table,\nI don't have a route for 172.14.0.4.\n\n266\n00:14:30.020 --> 00:14:33.170\nIf I don't have a route\nto get to the gateway for\n\n267\n00:14:33.170 --> 00:14:34.810\nthat network, then I'm not gonna use it.\n\n268\n00:14:34.810 --> 00:14:38.440\nAnd that's gonna result in it not\nmaking it to the routing table, so,\n\n269\n00:14:38.440 --> 00:14:39.850\nI have a little bit more work to do.\n\n270\n00:14:39.850 --> 00:14:42.660\nThis actually wouldn't be that hard\nto fix, if we wanted to fix it,\n\n271\n00:14:42.660 --> 00:14:43.710\nand I'm gonna hold off,\n\n272\n00:14:43.710 --> 00:14:46.870\ncuz it might turn off in one of the other\nquestions in this set, I don't know.\n\n273\n00:14:46.870 --> 00:14:52.040\nBut to fix it,\nall you would have to do is go to NYEDGE2,\n\n274\n00:14:52.040 --> 00:14:56.860\nwhich is plugged into that 172.14 network,\nand just tell it to advertise that, right?\n\n275\n00:14:56.860 --> 00:14:58.600\nAdvertise that in the network.\n\n276\n00:14:58.600 --> 00:15:00.890\nOr, [INAUDIBLE] like OSPF.\n\n277\n00:15:00.890 --> 00:15:04.580\nOr, in BGP, make sure that it\nuses a next hop self command.\n\n278\n00:15:04.580 --> 00:15:07.080\nAnd I know we saw that in\nanother troubleshooting ticket.\n\n279\n00:15:07.080 --> 00:15:10.070\nAnd that way,\nwhen NYWAN1 learns that default gateway,\n\n280\n00:15:10.070 --> 00:15:12.620\nit will learn NYEDGE2 is the next hop.\n\n281\n00:15:12.620 --> 00:15:14.610\nInstead of some public address out there.\n\n282\n00:15:14.610 --> 00:15:16.730\nSo, either of those solutions\nwould fix that problem.\n\n283\n00:15:16.730 --> 00:15:19.380\nbut it goes a little bit beyond\nwhat the ticket is asking for.\n\n284\n00:15:19.380 --> 00:15:20.780\nAs far as the ticket though,\n\n285\n00:15:20.780 --> 00:15:24.400\nthis one turned out to boil down\nto just not having a route, right?\n\n286\n00:15:24.400 --> 00:15:27.050\nNYWAN1 did not have\na route to get to NYEDGE2.\n\n287\n00:15:27.050 --> 00:15:30.030\nCan't build a neighbor\nrelationship like that.\n\n288\n00:15:30.030 --> 00:15:32.690\nWe fixed it by extending\nOSPF out to the node.\n\n289\n00:15:32.690 --> 00:15:34.060\nNow, it knows how to get there.\n\n290\n00:15:34.060 --> 00:15:36.330\nNeighbor relationship comes up and\nnow we're exchanging routes.\n\n291\n00:15:36.330 --> 00:15:38.172\nThings are working the way\nthey're supposed to.\n\n292\n00:15:38.172 --> 00:15:40.280\nAll right, so that wraps up\nthis troubleshooting question.\n\n293\n00:15:40.280 --> 00:15:43.878\nStay tuned we got more\ncoming up after this.\n\n294\n00:15:43.878 --> 00:15:50.249\n[MUSIC]\n\n",
          "vimeoId": "151018043"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #4` from set #8. The trouble ticket states that \"NYCORE2 and NYEDGE2 are configured for iBGP but they are not establishing a connection \"",
          "length": "408",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-8-4-set_8_issue_4-120815-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-8-4-set_8_issue_4-120815-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-8-4-set_8_issue_4-120815-1-sm.jpg",
          "title": "Set 8 Issue 4",
          "transcript": "WEBVTT\n\n1\n00:00:00.025 --> 00:00:06.032\n[SOUND] All right, welcome back to another\n\n2\n00:00:06.032 --> 00:00:12.734\ntroubleshooting adventure here on ITProTV.\n\n3\n00:00:12.734 --> 00:00:15.605\nWe've got Set 8 Issue 4 coming at us,\nand for\n\n4\n00:00:15.605 --> 00:00:18.630\nthis one It's more BGP\nneighbor problems here.\n\n5\n00:00:18.630 --> 00:00:22.480\nLooks like NYCORE2 and\nNYEDGE2 are configured for\n\n6\n00:00:22.480 --> 00:00:25.350\niBGP, but\nthere are not establishing a connection.\n\n7\n00:00:25.350 --> 00:00:29.330\nSo just like in our last issue, we've\ngot two systems that are not peering up.\n\n8\n00:00:29.330 --> 00:00:31.950\nAnd NYEDGE2 we saw was in our last one,\n\n9\n00:00:31.950 --> 00:00:34.320\nso I've actually still got\nthe IP address from it,\n\n10\n00:00:34.320 --> 00:00:36.990\nbecause you remember reachability was\nwhat turned out to be the problem there.\n\n11\n00:00:36.990 --> 00:00:38.310\nMaybe it is here too.\n\n12\n00:00:38.310 --> 00:00:42.750\nWell, let's look at our topology and\nget an idea of what we're talking about.\n\n13\n00:00:42.750 --> 00:00:45.810\nSo this was NYCORE2 and NYEDGE2.\n\n14\n00:00:45.810 --> 00:00:49.060\nNow these two guys are directly\nconnected to each other,\n\n15\n00:00:49.060 --> 00:00:50.840\nI've got a point to point link.\n\n16\n00:00:50.840 --> 00:00:55.680\nSo for these two not to be peering\nup is pretty unlikely, right?\n\n17\n00:00:55.680 --> 00:00:58.270\nI had reachability issues before\nbecause it was a huge network.\n\n18\n00:00:58.270 --> 00:01:00.020\nI was being routed in between it.\n\n19\n00:01:00.020 --> 00:01:02.810\nBut, this is point to point\nbetween EDGE 2 and CORE 2.\n\n20\n00:01:02.810 --> 00:01:05.180\nWell, it doesn't have to\nbe point to point though.\n\n21\n00:01:05.180 --> 00:01:08.210\nFor example,\nwhen you define a neighbor relationship,\n\n22\n00:01:08.210 --> 00:01:10.960\nyou can peer with a loopback address.\n\n23\n00:01:10.960 --> 00:01:12.760\nAnd when you peer with a loopback address,\n\n24\n00:01:12.760 --> 00:01:15.860\nit's actually like you got\nmore than one hop, right?\n\n25\n00:01:15.860 --> 00:01:19.150\nAnd with eBGP,\nwe have that whole ebgp-multihop command.\n\n26\n00:01:19.150 --> 00:01:20.870\nBut with IBGP that's okay.\n\n27\n00:01:20.870 --> 00:01:22.160\nYou can be more than one hop.\n\n28\n00:01:22.160 --> 00:01:23.360\nIt's all right.\n\n29\n00:01:23.360 --> 00:01:24.890\nBut we just need to be on the lookout for\nthat.\n\n30\n00:01:24.890 --> 00:01:26.300\nAnd then other issues that can arise.\n\n31\n00:01:26.300 --> 00:01:29.300\nI don't really know how these appeared so\nwe'll have to find out.\n\n32\n00:01:29.300 --> 00:01:31.030\nLet's start up here on EDGE2.\n\n33\n00:01:31.030 --> 00:01:34.250\nAnd actually I really just\nneed to know what their IP\n\n34\n00:01:34.250 --> 00:01:36.150\naddresses are first before\nI even get too far.\n\n35\n00:01:36.150 --> 00:01:38.328\nCuz that's BGP is all keying off of.\n\n36\n00:01:38.328 --> 00:01:43.232\nAnd I know from the last question that\n\n37\n00:01:43.232 --> 00:01:48.936\nNYEDGE2 is 192.168.16.2.\n\n38\n00:01:48.936 --> 00:01:50.708\nAnd I'm just writing this down again so\nI've got it.\n\n39\n00:01:50.708 --> 00:01:52.870\nSo that was EDGE2.\n\n40\n00:01:52.870 --> 00:01:57.680\nBut CORE2, I don't know what it's IP\naddress is, so I'm actually gonna start\n\n41\n00:01:57.680 --> 00:02:01.830\nover on CORE2, since it's the one that's\ngot information that I don't know.\n\n42\n00:02:01.830 --> 00:02:02.880\nSo over here on CORE2.\n\n43\n00:02:03.890 --> 00:02:08.720\nWe'll just start with a show ip int br,\n\n44\n00:02:10.410 --> 00:02:12.730\nand I'll exclude any\nunassigned interfaces.\n\n45\n00:02:12.730 --> 00:02:16.170\nSo this one is 192.168.16.6.\n\n46\n00:02:16.170 --> 00:02:19.970\nSo, if you'll remember on the last issue,\nI said,\n\n47\n00:02:19.970 --> 00:02:22.540\nboy, I really hope these\nguys are on the same subnet.\n\n48\n00:02:22.540 --> 00:02:24.230\nIn this case my wish has come true, right.\n\n49\n00:02:24.230 --> 00:02:26.244\nThese guys are on the same subnet, and so\n\n50\n00:02:26.244 --> 00:02:29.868\nif I wanna test connectivity,\nthis should be pretty straightforward.\n\n51\n00:02:29.868 --> 00:02:33.793\nIf NYCORE2 is 192.168.16.6 and\n\n52\n00:02:33.793 --> 00:02:40.138\nNYEDGE2 is 192.168.16.2,\nI should be able to ping and I am.\n\n53\n00:02:40.138 --> 00:02:41.959\nSo I've got good communications back and\n\n54\n00:02:41.959 --> 00:02:45.110\nforth between these two systems\nas far as base connectivity.\n\n55\n00:02:45.110 --> 00:02:48.460\nWell, if I'm not building\na neighbor relationship, why not?\n\n56\n00:02:48.460 --> 00:02:52.080\nWell, now is where we\ncome to misconfiguration.\n\n57\n00:02:52.080 --> 00:02:54.820\nEven beside from that,\nwe could have an acl, right?\n\n58\n00:02:54.820 --> 00:02:58.070\nWhen you look at this topology,\nyes, it's a point to point link.\n\n59\n00:02:58.070 --> 00:02:59.730\nBut it is a link, none the less.\n\n60\n00:02:59.730 --> 00:03:01.950\nAnd there could be an access control list.\n\n61\n00:03:01.950 --> 00:03:05.760\nThis is a switch and so\nthis is a VLAN interface down here.\n\n62\n00:03:05.760 --> 00:03:09.820\nSo we're probably not being routed so\nI doubt it's a regular ACL but\n\n63\n00:03:09.820 --> 00:03:13.060\nwe could have a VLAN ACL in\nplace that's blocking this.\n\n64\n00:03:13.060 --> 00:03:17.165\nOr we could just have a bad BGP\nconfiguration between them.\n\n65\n00:03:17.165 --> 00:03:21.590\nSo let's review the BGP configuration,\nthat's probably our easiest solution here.\n\n66\n00:03:23.120 --> 00:03:25.660\nAnd so if I take NYCORE2 I can do\n\n67\n00:03:25.660 --> 00:03:30.880\na showIP BGP summary just to see\nwhat neighbors I have out there.\n\n68\n00:03:30.880 --> 00:03:35.021\nAnd I've got a neighbor 192.168.16.20,\nbut I'm looking for\n\n69\n00:03:35.021 --> 00:03:38.598\na neighbor 192.168.16.2 and\nthat is not in the list.\n\n70\n00:03:38.598 --> 00:03:41.931\nSo I'm not building a neighbor\nrelationship with the other guy,\n\n71\n00:03:41.931 --> 00:03:43.148\nkind of expected that.\n\n72\n00:03:43.148 --> 00:03:47.711\nAnd if I do a show run for the BGP\nsection, I can see that I've got again,\n\n73\n00:03:47.711 --> 00:03:53.571\nI've got that neighbor, .20, but\nI don't have 192.68.16.2 on the list,\n\n74\n00:03:53.571 --> 00:03:58.400\nso I'm missing it and that's more\nthan likely gonna be our problem.\n\n75\n00:03:58.400 --> 00:04:03.140\nKinda hard to peer with somebody if you\ndon't have a neighbor command for them.\n\n76\n00:04:03.140 --> 00:04:06.960\nRight so let's see if the other side\nis still configured properly for\n\n77\n00:04:06.960 --> 00:04:07.920\nthe other direction.\n\n78\n00:04:07.920 --> 00:04:13.310\nI'm gonna jump up to NYEDGE2 and\njust kinda do that same thing right.\n\n79\n00:04:13.310 --> 00:04:17.339\nI'm gonna do a show run section bgp.\n\n80\n00:04:17.339 --> 00:04:22.020\nAnd NYCORE2 the person we're supposed to\n\n81\n00:04:22.020 --> 00:04:25.960\npeer with is 192.168.16.6 and I can see\nthat neighbor statement right there.\n\n82\n00:04:25.960 --> 00:04:27.450\nSo we've got a neighbor\nstatement on one end,\n\n83\n00:04:27.450 --> 00:04:29.940\nwe're missing the neighbor\nstatement on the other end,\n\n84\n00:04:29.940 --> 00:04:33.910\nthat's at least part of our problem,\nif not the whole problem in and of itself.\n\n85\n00:04:33.910 --> 00:04:35.930\nSo let's jump back over to NYCORE2,\n\n86\n00:04:35.930 --> 00:04:39.930\nand I'm gonna add a neighbor\nstatement to fix this.\n\n87\n00:04:39.930 --> 00:04:41.190\nIn fact you know,\n\n88\n00:04:41.190 --> 00:04:44.340\nI'd have to look at all the other devices,\nthis might just be a typo.\n\n89\n00:04:44.340 --> 00:04:47.420\nLike maybe this isn't supposed\n\n90\n00:04:47.420 --> 00:04:52.240\nto be 192.168.16.20 maybe that was\nsupposed to be 192.168.16.2, I don't know.\n\n91\n00:04:52.240 --> 00:04:55.330\nAnd the reality is on the exam\nyou're kind of pressed for time.\n\n92\n00:04:55.330 --> 00:04:58.420\nSo I don't want to go hop around all\nthese different devices to see if .20\n\n93\n00:04:58.420 --> 00:04:59.440\nexists somewhere else.\n\n94\n00:04:59.440 --> 00:05:02.128\nSo it's going to be easier to just\nadd another neighbor statement.\n\n95\n00:05:02.128 --> 00:05:06.071\nSo I'm going to get into configuration and\n\n96\n00:05:06.071 --> 00:05:11.219\nI'll do router BGP65534,\nand then I'll just say\n\n97\n00:05:11.219 --> 00:05:17.366\nneighbor 192.168.16.2\nremote dash A S 65534.\n\n98\n00:05:17.366 --> 00:05:21.129\nYou have to get that A S member right\nthat's how it knows it's going to be\n\n99\n00:05:21.129 --> 00:05:22.150\nI B G P and not E B G P.\n\n100\n00:05:22.150 --> 00:05:26.900\nAnd once we run that It should reach\nout and BGP peers really fast.\n\n101\n00:05:26.900 --> 00:05:30.180\nSo if I do a show IP BGP summary.\n\n102\n00:05:30.180 --> 00:05:30.680\nWhoops.\n\n103\n00:05:33.170 --> 00:05:34.680\nThere we go.\n\n104\n00:05:34.680 --> 00:05:35.500\nI see it.\n\n105\n00:05:35.500 --> 00:05:38.340\nI've got a neighbor\nrelationship with 192.168.16.2.\n\n106\n00:05:38.340 --> 00:05:41.270\nAnd as I look across the way\nI've sent four messages.\n\n107\n00:05:41.270 --> 00:05:43.020\nI've received four messages.\n\n108\n00:05:43.020 --> 00:05:47.120\nAnd I've even exchanged a prefix at\nthis point so we are communicating,\n\n109\n00:05:47.120 --> 00:05:50.770\nand now that I look at that other line,\nlook at this guy down here.\n\n110\n00:05:50.770 --> 00:05:53.160\nZero messages sent,\nzero messages received,\n\n111\n00:05:53.160 --> 00:05:56.340\nzero prefixes, up down state never.\n\n112\n00:05:56.340 --> 00:05:59.480\nThis one never come up,\nI'm pretty sure this is a typo, right.\n\n113\n00:05:59.480 --> 00:06:02.700\nSo if that was a typo,\nthen we just fixed it but\n\n114\n00:06:02.700 --> 00:06:05.210\nwe could go back and\nremove this other neighbor statement and\n\n115\n00:06:05.210 --> 00:06:08.310\nget it out of there If it's not\ncommunicating with anybody right?\n\n116\n00:06:08.310 --> 00:06:12.080\nSo somebody just entered a .20\ninstead of a .2 but in this case,\n\n117\n00:06:12.080 --> 00:06:14.310\nit's just a bad neighbor statement, right?\n\n118\n00:06:14.310 --> 00:06:16.340\nWhen you're dealing with\nBGP period problems and\n\n119\n00:06:16.340 --> 00:06:19.090\nthere on the same subnet,\nthat's when you go whoo,\n\n120\n00:06:19.090 --> 00:06:22.209\nthis is gonna be an easy on cuz there's\njuts not a whole heck of a lot involved.\n\n121\n00:06:23.270 --> 00:06:24.440\nI'm exchanging prefixes.\n\n122\n00:06:24.440 --> 00:06:28.700\nIf I do a show IP BGP I should have\nat least one in there and I do,\n\n123\n00:06:28.700 --> 00:06:32.310\nso I've learned the route and\nBGP is up and running.\n\n124\n00:06:32.310 --> 00:06:33.580\nAll right,\nwell that turned out to be an easy one.\n\n125\n00:06:33.580 --> 00:06:37.000\nWe'll knock that one off our list and\nwe've got one more troubleshooting\n\n126\n00:06:37.000 --> 00:06:40.320\nquestion coming up here in set\nnumber eight, so stay tuned.\n\n127\n00:06:40.320 --> 00:06:41.468\nIt's coming up next.\n\n128\n00:06:41.468 --> 00:06:48.209\n[MUSIC]\n\n",
          "vimeoId": "151018042"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #5` from set #8. The trouble ticket states that \"NYCORE1 and NYEDGE2 are configured for iBGP but they are also not establishing a relationship \"",
          "length": "383",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-8-5-set_8_issue_5-120815-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-8-5-set_8_issue_5-120815-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-8-5-set_8_issue_5-120815-1-sm.jpg",
          "title": "Set 8 Issue 5",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:08.469\n[MUSIC]\n\n2\n00:00:08.469 --> 00:00:12.250\nAll right, welcome back to another\nCisco Troubleshooting segment here on\n\n3\n00:00:12.250 --> 00:00:12.797\nI T Pro TV.\n\n4\n00:00:12.797 --> 00:00:16.262\nWe are jumping into Set 8 Issue 5,\nthe final issue for this set,\n\n5\n00:00:16.262 --> 00:00:20.120\nthis is one of the shorter ones and\nwe've got, yet another BGP problem.\n\n6\n00:00:20.120 --> 00:00:23.230\nWhoever set up BGP in this network,\nthey're probably out of a job.\n\n7\n00:00:23.230 --> 00:00:24.970\nSo issue 5 reads like this.\n\n8\n00:00:24.970 --> 00:00:29.920\nIt says, NYCORE1 and\nNYEDGE2 are configured for IBGP.\n\n9\n00:00:29.920 --> 00:00:32.890\nBut they are not establishing\na neighbor relationship.\n\n10\n00:00:32.890 --> 00:00:35.360\nSo we got another neighbor problem.\n\n11\n00:00:35.360 --> 00:00:37.600\nLet's take a look at our map and\nsee what we're dealing with.\n\n12\n00:00:37.600 --> 00:00:42.120\nSo here at the topology what\nthey are calling out is NYCORE1,\n\n13\n00:00:42.120 --> 00:00:47.540\nthis guy right here, this switch and\nNYEDGE2, this guy up here.\n\n14\n00:00:47.540 --> 00:00:49.700\nSo these two are suppose to be\nbuilding a neighbor relationship.\n\n15\n00:00:49.700 --> 00:00:53.500\nNow there is a switch in-between them, I\ndon't know if they're being routed or not,\n\n16\n00:00:53.500 --> 00:00:56.580\nand then you guys know from the previous\nquestions, I love it when they're not\n\n17\n00:00:56.580 --> 00:00:59.020\nbeing routed because that means\nit's going to be an easy question.\n\n18\n00:00:59.020 --> 00:01:01.740\nIf they are being routed than we've got\na couple of things we have to deal with,\n\n19\n00:01:01.740 --> 00:01:05.880\nbut in this scenario NYCORE1,\nNYEDGE2 they're not peering up.\n\n20\n00:01:05.880 --> 00:01:10.270\nNow I know from the previous questions\nthat NYEDGE2 is 192.168.16.2,\n\n21\n00:01:10.270 --> 00:01:14.140\nwe've seen that a few times.\n\n22\n00:01:14.140 --> 00:01:17.880\nBut CORE1, I don't know it's IP address.\n\n23\n00:01:17.880 --> 00:01:19.200\nWe haven't dealt with it yet.\n\n24\n00:01:19.200 --> 00:01:21.130\nSo I'm gonna jump over to Core1 and\n\n25\n00:01:21.130 --> 00:01:25.400\nwe'll kind of start there,\nbecause it's got information that I need.\n\n26\n00:01:25.400 --> 00:01:30.040\nSo I'm gonna get logged into this one and\ndo a quick show IP interface brief and\n\n27\n00:01:30.040 --> 00:01:32.980\nI'll just exclude any\nunassigned interfaces.\n\n28\n00:01:32.980 --> 00:01:33.818\nThere we go.\n\n29\n00:01:33.818 --> 00:01:36.263\nAll right, it looks like I've\ngot two interfaces on this one.\n\n30\n00:01:36.263 --> 00:01:42.510\nI've got 192.168.16.5 and 192.168.15.2.\n\n31\n00:01:42.510 --> 00:01:44.590\nI'm going to assume.\n\n32\n00:01:44.590 --> 00:01:49.347\nAnd you know what happens when you assume,\nthat it's 192.168.16.5 that we're\n\n33\n00:01:49.347 --> 00:01:53.060\ngonna be using to appear with\nthe other guy 192.168.16.6.\n\n34\n00:01:53.060 --> 00:01:57.330\nThey're on the same network, so again\nthis looks like it might be an easy one.\n\n35\n00:01:57.330 --> 00:01:58.300\nThey're on the same subnet.\n\n36\n00:01:58.300 --> 00:01:59.970\nThey don't have to get routed.\n\n37\n00:01:59.970 --> 00:02:01.810\nThe main thing I need to\ncheck is connectivity.\n\n38\n00:02:01.810 --> 00:02:03.880\nIf I can't connect to the other guy,\n\n39\n00:02:03.880 --> 00:02:06.740\nthen I'm definitely not going to\nbuild a peer relationship with him.\n\n40\n00:02:06.740 --> 00:02:09.950\nSo I'm going to try and ping 192.168.16.2,\nand I can ping it, all right,\n\n41\n00:02:09.950 --> 00:02:15.070\nso I've got connectivity between NYCORE1.\n\n42\n00:02:16.110 --> 00:02:16.957\nRight here.\n\n43\n00:02:16.957 --> 00:02:19.711\nAnd NYEDGE2 up here.\n\n44\n00:02:19.711 --> 00:02:23.200\nAnd they're on the same subnet, so they're\njust passing right through this switch.\n\n45\n00:02:23.200 --> 00:02:24.920\nNYCORE2 is not routing us.\n\n46\n00:02:24.920 --> 00:02:26.630\nAnd so we're just talking directly.\n\n47\n00:02:26.630 --> 00:02:29.500\nSo I don't have to worry about\ncrazy things like extra hops.\n\n48\n00:02:29.500 --> 00:02:33.910\nI don't have to worry about not knowing\nthe next hop or anything crazy like that.\n\n49\n00:02:33.910 --> 00:02:36.000\nThis should be a straightforward\nneighbor statement.\n\n50\n00:02:36.000 --> 00:02:40.300\nAnd if that's the case,\nthen I should just be able config compare.\n\n51\n00:02:40.300 --> 00:02:42.210\nSpot the difference and fix it.\n\n52\n00:02:42.210 --> 00:02:44.300\nThere's a few weird things\nthat could pop up but\n\n53\n00:02:44.300 --> 00:02:46.200\nI'll bet this one just\nboils down to config.\n\n54\n00:02:46.200 --> 00:02:49.730\nSo since I'm already on core one,\nlet's start here.\n\n55\n00:02:49.730 --> 00:02:52.950\nAnd I'll just do a show run and\nI'll pull the BGP section.\n\n56\n00:02:52.950 --> 00:02:57.370\nAnd what I'm looking for are the neighbor\nstatements that point to EDGE2,\n\n57\n00:02:57.370 --> 00:02:59.050\nwhich is gonna be this guy right here.\n\n58\n00:02:59.050 --> 00:03:05.010\nNeighbor 192.168.16.2 and,\nI think we see the problem right there.\n\n59\n00:03:05.010 --> 00:03:09.020\nLooking a little closer at this,\nremember that it's iBGP.\n\n60\n00:03:09.020 --> 00:03:11.150\nInterior Border Gateway Protocol.\n\n61\n00:03:11.150 --> 00:03:16.430\nWhen you do iBGP you're peering with\npeople in the same AS number as you.\n\n62\n00:03:16.430 --> 00:03:20.287\nWhile I'm in AS number 6 5 5 3 4.\n\n63\n00:03:20.287 --> 00:03:27.557\nBut this statement says neighbor\n192.168.16.2 remote-as 65535.\n\n64\n00:03:27.557 --> 00:03:32.778\nAll right, that's different and\nthat means this is eBGP not iBGP.\n\n65\n00:03:32.778 --> 00:03:35.890\nWell, unless it's like\na confederation define,\n\n66\n00:03:35.890 --> 00:03:38.525\nwhich we don't see a confederation here so\nthat's not a problem.\n\n67\n00:03:38.525 --> 00:03:43.170\nSo in this case, these two don't match,\nthat's probably the issue,\n\n68\n00:03:43.170 --> 00:03:47.720\nnow it is possible that the local AS is\nbeing overwritten on the other side so\n\n69\n00:03:47.720 --> 00:03:51.080\nlet's just double check that to be\nsure before we start making changes.\n\n70\n00:03:51.080 --> 00:03:53.720\nAnd we'll verify everything is\nworking the way it should, so\n\n71\n00:03:53.720 --> 00:03:57.170\nI'll jump over to EDGE 2.\n\n72\n00:03:57.170 --> 00:04:00.900\nAnd I'm gonna do a show run and look for\nthat BGP section and I'm gonna look for\n\n73\n00:04:00.900 --> 00:04:06.861\nthe neighbor statement that's\npointing to 192.168.16.5 and\n\n74\n00:04:06.861 --> 00:04:11.080\nthe local AS is Is not being overridden,\nit is just set to 6 5 5 3 4.\n\n75\n00:04:11.080 --> 00:04:14.710\nAnother trick to look out for\nis if there's a route map attached to it.\n\n76\n00:04:14.710 --> 00:04:17.370\nCuz the route map can actually\nchange the AS number also.\n\n77\n00:04:17.370 --> 00:04:19.760\nThere's a couple of crazy things\nyou can do with route maps.\n\n78\n00:04:19.760 --> 00:04:22.130\nBut in this case,\nit's just straight forward.\n\n79\n00:04:22.130 --> 00:04:24.980\nYou've got 65534 on this end,\n65535 on the other.\n\n80\n00:04:24.980 --> 00:04:29.070\nAnd so we just need to go and\nfix that, and, again,\n\n81\n00:04:29.070 --> 00:04:33.130\nthat might not be our whole problem, but\nit's definitely part of our problem.\n\n82\n00:04:33.130 --> 00:04:37.818\nSo we'll jump over here,\nand we'll put a fix in.\n\n83\n00:04:37.818 --> 00:04:43.242\nSo I'm gonna go ahead and get into\nconfiguration, get into router bgp 65534.\n\n84\n00:04:43.242 --> 00:04:46.083\nAnd I'm just gonna do a no neighbor.\n\n85\n00:04:46.083 --> 00:04:52.430\n192.168.16.2 Remote-as 65535.\n\n86\n00:04:52.430 --> 00:04:59.910\nSo I'm gonna remove that command, and then\nI'm gonna redo it with 65534 at the end.\n\n87\n00:05:01.290 --> 00:05:08.647\nAnd, BGPs pretty fast so I expect\nto get a neighbor up pretty quick.\n\n88\n00:05:08.647 --> 00:05:13.897\nAnd I have a neighbor of\n192.168.16.2 which is EDGE2.\n\n89\n00:05:13.897 --> 00:05:19.858\nI've got messages sent for, messages\nreceived for, and prefixes exchanged one.\n\n90\n00:05:19.858 --> 00:05:22.710\nSo we have exchanged some prefixes\nthere which is a good sign.\n\n91\n00:05:22.710 --> 00:05:24.120\nAnd if I do a, show ip bgp,\n\n92\n00:05:24.120 --> 00:05:28.230\nI should have that default route that's\nkind of pushing through the network.\n\n93\n00:05:28.230 --> 00:05:29.890\nLooks like we're in good shape.\n\n94\n00:05:29.890 --> 00:05:32.890\nI'm just gonna verify that neighbor\nover on the other side too, on EDGE2.\n\n95\n00:05:32.890 --> 00:05:37.690\nSo I'll do a quick show ip bgp summary.\n\n96\n00:05:39.520 --> 00:05:44.130\nAnd we're looking for 192.168.16.5,\nwhich is right there.\n\n97\n00:05:44.130 --> 00:05:45.660\nAnd it looks like it's up and healthy.\n\n98\n00:05:45.660 --> 00:05:49.380\nSo in this case, the AS numbers just\ndidn't match on the two different sides.\n\n99\n00:05:49.380 --> 00:05:52.030\nFixed that and it's taken care of, right?\n\n100\n00:05:52.030 --> 00:05:54.020\nSo not a crazy mind-bending\nexercise there,\n\n101\n00:05:54.020 --> 00:05:56.160\njust a matter of doing\na little fact checking, right?\n\n102\n00:05:56.160 --> 00:05:59.810\nLooking at the configs, making sure they\nmatched up, and they're squared away.\n\n103\n00:05:59.810 --> 00:06:02.130\nAll right,\nwell that wraps up set number eight.\n\n104\n00:06:02.130 --> 00:06:05.500\nWe still have a few more troubleshooting\nsets to move through In fact,\n\n105\n00:06:05.500 --> 00:06:07.560\nthe next three are going\nto be moving into IPv6.\n\n106\n00:06:07.560 --> 00:06:09.040\nSo, stay tuned for that.\n\n107\n00:06:09.040 --> 00:06:10.250\nIt's going to be exciting.\n\n108\n00:06:10.250 --> 00:06:12.940\nBut as far as set eight, that one's done,\nso we'll wrap it up here.\n\n109\n00:06:12.940 --> 00:06:17.438\nThanks for watching, and I'll see you for\nthe next troubleshooting incident.\n\n110\n00:06:17.438 --> 00:06:23.199\n[MUSIC]\n\n",
          "vimeoId": "151018041"
        }
      ],
      "title": "Set Eight"
    },
    {
      "episodes": [
        {
          "description": "In this video, Don solves troubleshooting issue #1` from set #9. The trouble ticket states that \"The port channel between the two core switches is not showing as up. This port-channel is configured as a layer 3 link between the two switches. \"",
          "length": "586",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-9-1-set_9_issue_1-120915-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-9-1-set_9_issue_1-120915-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-9-1-set_9_issue_1-120915-1-sm.jpg",
          "title": "Set 9 Issue 1",
          "transcript": "WEBVTT\n\n1\n00:00:00.118 --> 00:00:08.558\n[MUSIC]\n\n2\n00:00:08.558 --> 00:00:11.750\nAll right, welcome back to another\ntroubleshooting set here on ITProTV.\n\n3\n00:00:11.750 --> 00:00:15.700\nWe're going to be kicking off set nine,\njumping into issue one.\n\n4\n00:00:15.700 --> 00:00:20.410\nAnd looks like we got some layer two\nport channel type issues this time.\n\n5\n00:00:20.410 --> 00:00:22.090\nSo the ticket reads like this,\n\n6\n00:00:22.090 --> 00:00:27.830\nit says the port channel between the two\ncore switches is not showing as up.\n\n7\n00:00:27.830 --> 00:00:32.180\nThis port channel is configured as a layer\nthree link between the two switches.\n\n8\n00:00:32.180 --> 00:00:36.074\nSo let's take a look at the typology\ngetting an idea what we're working with,\n\n9\n00:00:36.074 --> 00:00:38.320\nthe typology for\nthis one is a bit different.\n\n10\n00:00:38.320 --> 00:00:40.330\nRight, again we have that reduced network.\n\n11\n00:00:40.330 --> 00:00:42.250\nWe don't have as many devices out there.\n\n12\n00:00:42.250 --> 00:00:44.870\nWe've got NY access one\ndown here at the bottom.\n\n13\n00:00:44.870 --> 00:00:47.040\nNY core one and two, and so on.\n\n14\n00:00:47.040 --> 00:00:51.660\nNow, looking at the diagram here,\nI've got NYCORE1 and NYCORE2.\n\n15\n00:00:51.660 --> 00:00:57.700\nAnd it shows them as being an OSPF area 1\nbut there's no interface on the diagram.\n\n16\n00:00:57.700 --> 00:01:01.450\nI don't see a link there but they're\ntelling me that there is a port channel\n\n17\n00:01:01.450 --> 00:01:05.130\nconfigured between these two switches and\nthen it's not showing it up.\n\n18\n00:01:05.130 --> 00:01:07.270\nSo that's where we're gonna\nneed to take a look and try and\n\n19\n00:01:07.270 --> 00:01:10.570\nfind out what the heck is going\non there and why isn't it up.\n\n20\n00:01:10.570 --> 00:01:13.690\nWell, port channels have two ends,\neither end can be the problem or\n\n21\n00:01:13.690 --> 00:01:16.270\nboth ends can be the problem so it\ndoesn't really matter which one we pick.\n\n22\n00:01:16.270 --> 00:01:19.710\nWell let's just pick NYCORE1 and\nstart there and see what we can find.\n\n23\n00:01:19.710 --> 00:01:22.400\nSo, I'm gonna jump into my topology here.\n\n24\n00:01:22.400 --> 00:01:23.880\nAnd I'll go into NYCORE1.\n\n25\n00:01:25.410 --> 00:01:28.870\nAnd let's just dive into that switch.\n\n26\n00:01:28.870 --> 00:01:32.170\nAnd I'm gonna do a quick\nshow IP interface brief.\n\n27\n00:01:32.170 --> 00:01:34.200\nJust to see if there is a port channel or\nnot.\n\n28\n00:01:34.200 --> 00:01:36.200\nI guess I could have done\na show EtherChannel summary.\n\n29\n00:01:36.200 --> 00:01:37.760\nThat would have been just as good.\n\n30\n00:01:37.760 --> 00:01:39.850\nBut here I can see all my VLAN interfaces.\n\n31\n00:01:39.850 --> 00:01:44.290\nThose SVIs and I've got my physical\ninterfaces, ports one through 24.\n\n32\n00:01:44.290 --> 00:01:47.040\nAnd then a couple of gig interfaces and\nsure enough,\n\n33\n00:01:47.040 --> 00:01:49.060\nthere's a port channel right there.\n\n34\n00:01:49.060 --> 00:01:52.700\nSo I do have a port channel in place and\nit is showing as down.\n\n35\n00:01:52.700 --> 00:01:56.330\nSo it's not a functional port,\nat least, as of right now.\n\n36\n00:01:56.330 --> 00:01:59.120\nAnd so\nif I do that show EtherChannel summary.\n\n37\n00:02:00.160 --> 00:02:02.490\nWhich probably would have been\nthe better command to run first.\n\n38\n00:02:02.490 --> 00:02:04.420\nI can see that I've got port channel one.\n\n39\n00:02:04.420 --> 00:02:09.910\nIt's status is RD and if I look up here\nR tells me that it's layer three and\n\n40\n00:02:09.910 --> 00:02:11.530\nD tells me that it's down.\n\n41\n00:02:11.530 --> 00:02:12.800\nSo, it's not happy.\n\n42\n00:02:12.800 --> 00:02:13.500\nIt's using LACP.\n\n43\n00:02:14.510 --> 00:02:17.138\nAnd it's got ports 23 and 24.\n\n44\n00:02:17.138 --> 00:02:20.380\nAnd they have a lowercase s which\ntells me they are suspended.\n\n45\n00:02:20.380 --> 00:02:24.550\nNow in my mind I'm thinking the most\ncommon time where you see a port as being\n\n46\n00:02:24.550 --> 00:02:27.730\nsuspended is when the configuration\ndoesn't match the port channel.\n\n47\n00:02:27.730 --> 00:02:29.970\nRight?\nOur configuration needs to be the same.\n\n48\n00:02:29.970 --> 00:02:33.530\nBut if they've made some kind of change\nlike the port channel is set for trunking,\n\n49\n00:02:33.530 --> 00:02:35.780\nand the interface is\nset as an access port.\n\n50\n00:02:35.780 --> 00:02:36.900\nThat'll cause it to go suspended.\n\n51\n00:02:37.970 --> 00:02:42.050\nSo we may just have a simple configuration\nissue which we can spot by doing a show\n\n52\n00:02:42.050 --> 00:02:44.750\nrun for interface port channel one.\n\n53\n00:02:44.750 --> 00:02:48.115\nAnd here's the configuration for\nmy port channel no switch port so\n\n54\n00:02:48.115 --> 00:02:52.990\nit's layer three and then we've got an IP\naddress assigned and its out in OSPF area\n\n55\n00:02:52.990 --> 00:02:57.550\none hundred or area one for process one\nhundred and was this suppose to area one.\n\n56\n00:02:57.550 --> 00:03:00.710\nLets check out our topology yeah it is\narea one okay so that's not a problem.\n\n57\n00:03:01.835 --> 00:03:05.050\nAll right then I wanna look at\nthe individual interfaces ports 23 and\n\n58\n00:03:05.050 --> 00:03:08.120\n24 is suppose to be apart\nof that port channel so\n\n59\n00:03:08.120 --> 00:03:13.060\nI'll do a show run interface\nFA 1 slash 0 slash 23 and 24.\n\n60\n00:03:13.060 --> 00:03:14.770\nI want to look at these two.\n\n61\n00:03:14.770 --> 00:03:15.480\nOkay.\n\n62\n00:03:15.480 --> 00:03:16.280\nAnd when I look at it,\n\n63\n00:03:16.280 --> 00:03:20.010\nthey're both set as no switchboard\nthey both have no IP address.\n\n64\n00:03:20.010 --> 00:03:23.930\nNow they need to be set as no switch board\nso they'll operate like layer three ports.\n\n65\n00:03:23.930 --> 00:03:27.135\nBut they also need no IP address\nbecause the IP address is attached to\n\n66\n00:03:27.135 --> 00:03:29.520\nthe port channel, not the interface.\n\n67\n00:03:29.520 --> 00:03:34.190\nAnd then I've got\nchannel-group 1 mode passive.\n\n68\n00:03:34.190 --> 00:03:36.565\nNow, that's an interesting\none right there, right?\n\n69\n00:03:36.565 --> 00:03:38.540\nChannel-group 1 mode passive.\n\n70\n00:03:38.540 --> 00:03:44.170\nWhen we're in passive mode that\nmeans that we're doing LACP but\n\n71\n00:03:44.170 --> 00:03:46.770\nwe're not gonna actively try and\njoin the port channel.\n\n72\n00:03:46.770 --> 00:03:50.890\nSomebody has to ask us to join,\notherwise we're not gonna do it.\n\n73\n00:03:50.890 --> 00:03:53.960\nAnd if we don't join the port channel\nwe just come up as regular ports.\n\n74\n00:03:53.960 --> 00:03:56.150\nAnd that's more than likely\nwhat's going on here.\n\n75\n00:03:56.150 --> 00:03:58.080\nNow, it can be a little\nhard to see on this switch.\n\n76\n00:03:58.080 --> 00:03:59.730\nCuz we're also not showing\nup as an access port.\n\n77\n00:03:59.730 --> 00:04:01.410\nWe're a layer three port.\n\n78\n00:04:01.410 --> 00:04:03.240\nBut we're just kinda sitting there.\n\n79\n00:04:03.240 --> 00:04:08.170\nIf I do a show IP interface brief again,\nand go and\n\n80\n00:04:08.170 --> 00:04:13.340\nlook at ports 23 and 24, I should at least\nbe able to see whether they're up or not.\n\n81\n00:04:13.340 --> 00:04:15.790\nAnd looking at 23 and 24,\n\n82\n00:04:15.790 --> 00:04:21.250\nboth of them have a kind of interesting\nstatus here of being up, down, right?\n\n83\n00:04:21.250 --> 00:04:23.300\nSo they're up, but they're down.\n\n84\n00:04:23.300 --> 00:04:25.440\nThey're up because\nthe interface is turned up but\n\n85\n00:04:25.440 --> 00:04:28.900\nthe line protocol is down\nbecause they have no IP address.\n\n86\n00:04:28.900 --> 00:04:32.420\nNo IP address on a layer three port\nis gonna bring that interface down.\n\n87\n00:04:32.420 --> 00:04:35.910\nSo it's gonna stay like that unless\nthe port channel goes active.\n\n88\n00:04:35.910 --> 00:04:39.380\nWell, let's look at the other side of this\nthing and see if it's set to passive also.\n\n89\n00:04:39.380 --> 00:04:41.850\nIf that's the case,\nif you have two ends that are passive,\n\n90\n00:04:41.850 --> 00:04:45.130\nnobody asks to build a port channel,\nthen the channel doesn't come up.\n\n91\n00:04:45.130 --> 00:04:47.860\nAnd if that's the case,\nwe can just set one side to active and\n\n92\n00:04:47.860 --> 00:04:48.720\nthe problem is solved.\n\n93\n00:04:48.720 --> 00:04:51.650\nSo, let's go look at NYCORE2 and\nsee if that's what's going on here.\n\n94\n00:04:53.510 --> 00:04:55.770\nAll right, so,\nI'm gonna jump over to NYCORE2.\n\n95\n00:04:57.490 --> 00:05:01.150\nAnd I'm gonna do a show, we'll do\na show EtherChannel summary this time.\n\n96\n00:05:01.150 --> 00:05:02.500\nSave us a little bit of time.\n\n97\n00:05:03.660 --> 00:05:06.050\nAnd I see that we've got\nport channel one over here.\n\n98\n00:05:06.050 --> 00:05:07.510\nIt's doing LACP.\n\n99\n00:05:07.510 --> 00:05:11.830\nIt's got ports 23 and 24, and they're\nboth suspended just like we saw before.\n\n100\n00:05:11.830 --> 00:05:12.500\nStatus RD.\n\n101\n00:05:12.500 --> 00:05:14.989\nSo exactly like we saw on the other side.\n\n102\n00:05:16.110 --> 00:05:19.050\nAnd if I do a show run for\ninterface port channel one,\n\n103\n00:05:20.330 --> 00:05:24.000\nI see it's got no switchboard, it's got\nan IP address and it's in OSPF area 100.\n\n104\n00:05:24.000 --> 00:05:26.380\nThat's the same as we\nsaw in the other side.\n\n105\n00:05:26.380 --> 00:05:29.400\nAnd if I do a show run for\ninterface 23 and 24,\n\n106\n00:05:29.400 --> 00:05:34.310\nsure enough, both ends are set to passive.\n\n107\n00:05:34.310 --> 00:05:37.230\nIf both ends are passive this\nis not going to come up and so\n\n108\n00:05:37.230 --> 00:05:41.560\nthat's maybe not the whole problem, but\nat least part of the problem, right.\n\n109\n00:05:41.560 --> 00:05:46.688\nSo, I'm gonna do an interface range\ncommand here, and edit ports 23 and 24.\n\n110\n00:05:46.688 --> 00:05:50.577\nAnd whenever you're messing around with\na port channel, it's always a good idea to\n\n111\n00:05:50.577 --> 00:05:53.645\nshut down the physical interfaces,\nbefore you make the changes,\n\n112\n00:05:53.645 --> 00:05:56.638\notherwise you run the risk of it\ncoming up with a partial config.\n\n113\n00:05:56.638 --> 00:05:59.582\nWorst case scenario you can go into\nair disabled and not noticing it,\n\n114\n00:05:59.582 --> 00:06:02.540\nand then you got to troubleshoot\nwhy the interface isn't coming up.\n\n115\n00:06:02.540 --> 00:06:05.490\nSo that's to shut it down\nwhile you make the changes.\n\n116\n00:06:05.490 --> 00:06:11.910\nAnd I'm just gonna say channel-group 1\nmode, and we wanna make it active, right?\n\n117\n00:06:11.910 --> 00:06:14.160\nPassive I can see as LACP.\n\n118\n00:06:14.160 --> 00:06:16.520\nAnd we'll only respond if asked.\n\n119\n00:06:16.520 --> 00:06:19.280\nActive means we're gonna go unconditional.\n\n120\n00:06:19.280 --> 00:06:22.180\nAnd I really only have to\nmake the change on one side.\n\n121\n00:06:22.180 --> 00:06:23.890\nI can leave the other side passive.\n\n122\n00:06:23.890 --> 00:06:27.378\nThis side will go active and reach out\nto it and the other side should come up.\n\n123\n00:06:27.378 --> 00:06:28.440\nRight?\n\n124\n00:06:28.440 --> 00:06:29.940\nNow I can just do a no shutdown.\n\n125\n00:06:31.300 --> 00:06:34.260\nAnd those interfaces should just\nstart doing their work pretty quick.\n\n126\n00:06:34.260 --> 00:06:34.910\nAll right?\n\n127\n00:06:34.910 --> 00:06:37.459\nWe can watch that with\na show EtherChannel summary.\n\n128\n00:06:39.200 --> 00:06:41.880\nWhoops, there we go, and\n\n129\n00:06:41.880 --> 00:06:45.440\nwhat I hope to see is them\nchange to a capital P like that.\n\n130\n00:06:45.440 --> 00:06:49.120\nAnd if I look up here, the capital P\nmeans bundled in the port channel.\n\n131\n00:06:49.120 --> 00:06:51.590\nSo they went active and\nthey became a part of it.\n\n132\n00:06:51.590 --> 00:06:56.420\nAnd my status is RU, R because I'm\nlayer three, U because I'm in use.\n\n133\n00:06:56.420 --> 00:06:57.980\nThis one looks healthy.\n\n134\n00:06:57.980 --> 00:06:59.450\nLet's look at the other side.\n\n135\n00:06:59.450 --> 00:07:06.010\nSo if I jump over to NYCORE one\nit is still set for passive.\n\n136\n00:07:06.010 --> 00:07:07.300\nBut I'm okay with that.\n\n137\n00:07:08.880 --> 00:07:10.450\nBecause the other side is set for active.\n\n138\n00:07:10.450 --> 00:07:11.810\nSo it should come up.\n\n139\n00:07:11.810 --> 00:07:14.560\nAnd sure enough I see it\nswitched to P's also.\n\n140\n00:07:14.560 --> 00:07:16.720\nAnd the EtherChannel's now happy.\n\n141\n00:07:16.720 --> 00:07:24.290\nIf I do a show CDP neighbor I expect\nto see NYCORE2 on ports 23 and 24.\n\n142\n00:07:24.290 --> 00:07:27.910\nThey're up and communicating and\nOSPF should be working.\n\n143\n00:07:27.910 --> 00:07:31.710\nSo if I do a show ip ospf neighbor, well I\n\n144\n00:07:31.710 --> 00:07:34.350\ndon't have any neighbor relationships\nthere, so that's interesting.\n\n145\n00:07:34.350 --> 00:07:37.640\nThe interface might still be coming up,\nwe can verify that real quick.\n\n146\n00:07:37.640 --> 00:07:41.845\nIf I do a show ip interface brief and\nexclude all the unassigneds,\n\n147\n00:07:41.845 --> 00:07:45.908\nport channel one on this\nguy is 192.168.255.1.\n\n148\n00:07:45.908 --> 00:07:49.472\nLet's check the other side and make sure\nthat they're able to ping each other,\n\n149\n00:07:49.472 --> 00:07:50.400\nall right?\n\n150\n00:07:50.400 --> 00:07:53.060\nSo, I'll jump over to NYCORE2.\n\n151\n00:07:53.060 --> 00:07:57.080\nAnd I'll just do the same thing,\nshow ip interface brief,\n\n152\n00:07:57.080 --> 00:07:58.358\nI'll exclude the unassigned.\n\n153\n00:07:58.358 --> 00:08:01.498\nAnd it's 192.168.255.2.\n\n154\n00:08:01.498 --> 00:08:05.278\nSo I'm just gonna try and\nping 192.168.255.1 and\n\n155\n00:08:05.278 --> 00:08:07.850\nsee if I can ping across that link.\n\n156\n00:08:07.850 --> 00:08:12.140\nAnd, well I didn't do hard broadcast,\nbut it did finally go across.\n\n157\n00:08:12.140 --> 00:08:14.310\nNow OSPF's not peering up and\nI gotta figure out whether or\n\n158\n00:08:14.310 --> 00:08:15.516\nnot I wanna troubleshoot that.\n\n159\n00:08:15.516 --> 00:08:16.980\nRight?\n\n160\n00:08:16.980 --> 00:08:19.760\nIt's possible that it's gonna come up in\nanother troubleshooting question later on,\n\n161\n00:08:19.760 --> 00:08:22.190\nand I might solve a problem\nbefore I'm supposed to.\n\n162\n00:08:22.190 --> 00:08:26.640\nTechnically the port channel is up, we are\nable to communicate from it, across it.\n\n163\n00:08:26.640 --> 00:08:31.460\nSo the questions as put forth in\nour troubleshooting scenario here\n\n164\n00:08:31.460 --> 00:08:32.840\nhas been solved.\n\n165\n00:08:32.840 --> 00:08:35.140\nBut, that OSPF thing is kinda an odd one.\n\n166\n00:08:36.420 --> 00:08:38.360\nLet's see if we can't\njust spot it real quick.\n\n167\n00:08:38.360 --> 00:08:41.060\nIf I do a show run for\ninterface port channel one,\n\n168\n00:08:42.060 --> 00:08:45.330\nthis end is set to IP OSPF 100, area one.\n\n169\n00:08:45.330 --> 00:08:48.260\nAll right, so\nit's set up to be in area one and\n\n170\n00:08:48.260 --> 00:08:50.890\non the other side,\nI believe it was set the same way.\n\n171\n00:08:51.900 --> 00:08:55.230\nSo let's do a quick show run for\ninterface port channel one.\n\n172\n00:08:55.230 --> 00:08:58.010\nAnd it's IP OSPF 100 area 1 also.\n\n173\n00:08:58.010 --> 00:09:02.420\nSo it looks like, as far as the basic\nconfiguration there it should be fine.\n\n174\n00:09:02.420 --> 00:09:04.780\nBut I'm not getting that neighbor.\n\n175\n00:09:04.780 --> 00:09:06.750\nSo there's definitely a problem there.\n\n176\n00:09:06.750 --> 00:09:08.840\nLet's hold off on this one,\nwe'll table this one.\n\n177\n00:09:08.840 --> 00:09:11.450\nIf we get through all the trouble\nshooting scenarios and\n\n178\n00:09:11.450 --> 00:09:14.410\nI haven't solved this OSPF problem\nas one of those questions,\n\n179\n00:09:14.410 --> 00:09:17.040\nthen we'll come back and\nwe'll nail it as a bonus round at the end.\n\n180\n00:09:17.040 --> 00:09:20.930\nBut the port channel itself is up and\nI know that I'm able to ping across it, so\n\n181\n00:09:20.930 --> 00:09:22.380\nwe're good and safe there.\n\n182\n00:09:22.380 --> 00:09:26.510\nThis one really just boiled down to\nhaving two ends of a dynamic trunk, or\n\n183\n00:09:26.510 --> 00:09:27.900\na dynamic port channel.\n\n184\n00:09:27.900 --> 00:09:30.150\nBoth being set to passive,\nwhich you can't do.\n\n185\n00:09:30.150 --> 00:09:31.580\nAt least one has to be active or\n\n186\n00:09:31.580 --> 00:09:34.380\nboth can be active, but\nyou can't have them both be passive.\n\n187\n00:09:34.380 --> 00:09:35.270\nIt's not gonna build up.\n\n188\n00:09:35.270 --> 00:09:38.970\nSo, we fixed that and we're ready to move\non to our next troubleshooting question.\n\n189\n00:09:38.970 --> 00:09:40.701\nI'll see you then.\n\n190\n00:09:40.701 --> 00:09:46.279\n[MUSIC]\n\n",
          "vimeoId": "151031002"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #2` from set #9. The trouble ticket states that \"Once the port-channel is up, OSPF is not establishing a relationship across the port-channel. \"",
          "length": "777",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-9-2-set_9_issue_2-120915-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-9-2-set_9_issue_2-120915-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-9-2-set_9_issue_2-120915-1-sm.jpg",
          "title": "Set 9 Issue 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:08.252\n[MUSIC]\n\n2\n00:00:08.252 --> 00:00:12.872\nAll right welcome to another Cisco\ntroubleshooting segment here on ITpro TV,\n\n3\n00:00:12.872 --> 00:00:15.350\nwe're ready to jump into Set 9 Issue 2.\n\n4\n00:00:15.350 --> 00:00:18.700\nAnd for this one, well wouldn't you know,\nwe got an OSPF problem.\n\n5\n00:00:18.700 --> 00:00:21.920\nIf you watched issue number one,\nyou'll know at the end of that segment we\n\n6\n00:00:21.920 --> 00:00:25.590\nverified that we did bring the port\nchannel up they were talking about and\n\n7\n00:00:25.590 --> 00:00:28.060\nI noticed an OSPF problem\nthat we kind of tabled.\n\n8\n00:00:28.060 --> 00:00:30.170\nWell, that turned out to\nbe question number two.\n\n9\n00:00:30.170 --> 00:00:35.150\nIt says, once the port channel is up\nOSPF is not establishing a relationship\n\n10\n00:00:35.150 --> 00:00:36.580\nacross the port channel.\n\n11\n00:00:36.580 --> 00:00:38.540\nWe need to find out why.\n\n12\n00:00:38.540 --> 00:00:40.720\nWell, if you didn't\nwatch issue number one,\n\n13\n00:00:40.720 --> 00:00:44.330\nbasically we had a port channel set up\nacross two links between two switches.\n\n14\n00:00:44.330 --> 00:00:47.560\nThey were layer three switches,\nand we took two interfaces,\n\n15\n00:00:47.560 --> 00:00:50.780\nbonded them together with LACP and\ncreated a port channel.\n\n16\n00:00:50.780 --> 00:00:52.270\nThe port channel was\nset up as layer three,\n\n17\n00:00:52.270 --> 00:00:56.000\nso we had IP addresses on each end and\nwe were able to ping across that link.\n\n18\n00:00:56.000 --> 00:00:58.940\nAnd I verified that the interfaces\nwere set-up for OSPF.\n\n19\n00:00:58.940 --> 00:01:00.050\nLet me show you,.\n\n20\n00:01:00.050 --> 00:01:04.420\nSo going to my topology, the two switches\nin question are these guys right here,\n\n21\n00:01:04.420 --> 00:01:05.680\nNYCORE1 and NYCORE2.\n\n22\n00:01:05.680 --> 00:01:09.350\nAnd they've got two links between\neach other on ports 23 and 24,\n\n23\n00:01:09.350 --> 00:01:13.590\nand those links are bonded\ninto a port channel.\n\n24\n00:01:13.590 --> 00:01:17.460\nAnd the port channel is set up for\nOSPF Area 1, just like we see right here.\n\n25\n00:01:17.460 --> 00:01:22.480\nOkay, but\nthe OSPF adjacency is not coming up.\n\n26\n00:01:22.480 --> 00:01:26.690\nAnd if I go back to my switches here,\nI can take a look at, here's NYCORE1,\n\n27\n00:01:26.690 --> 00:01:31.930\nand I can do a show run\ninterface port channel 1.\n\n28\n00:01:31.930 --> 00:01:37.020\nAnd I can see where it's got\nan IP address of 192.168.255.1.\n\n29\n00:01:37.020 --> 00:01:41.600\nAnd it's set up for\nOSPF process 100, area 1, right.\n\n30\n00:01:41.600 --> 00:01:44.228\nSo it appears to be set up correctly.\n\n31\n00:01:44.228 --> 00:01:50.116\nAnd if I ping across that line, the other\nend of the line is 192.168.255.2,\n\n32\n00:01:50.116 --> 00:01:53.110\nI can try to ping it and it succeeds.\n\n33\n00:01:53.110 --> 00:01:55.985\nIt's a good idea to test this from the\nother side though, because I might have\n\n34\n00:01:55.985 --> 00:02:00.450\nuni-directional traffic,\nsomething that UDLD could protect us from.\n\n35\n00:02:00.450 --> 00:02:02.330\nBut we'll just verify it here.\n\n36\n00:02:02.330 --> 00:02:05.500\nYou can see where I did a show run\ninterface port channel here or\n\n37\n00:02:05.500 --> 00:02:06.740\nshow run interface Port-chanel1.\n\n38\n00:02:06.740 --> 00:02:12.040\nAnd you'll see that its got the other IP\naddress and it's set up for OSPF area 1,\n\n39\n00:02:12.040 --> 00:02:18.150\nand if it tries to send a ping across\nthat link its successful also.\n\n40\n00:02:18.150 --> 00:02:21.230\nSo I've got two-way network\ncommunications over the link.\n\n41\n00:02:21.230 --> 00:02:25.860\nAnd OSPF is enable everything works right,\nokay?\n\n42\n00:02:25.860 --> 00:02:28.070\nBut the adjacencies not coming up.\n\n43\n00:02:28.070 --> 00:02:31.500\nIf I do a show IP OSPF neighbor\nthere's nothing there.\n\n44\n00:02:31.500 --> 00:02:33.000\nAll right?\n\n45\n00:02:33.000 --> 00:02:35.000\nSo now I need to troubleshoot this and\nfind out why.\n\n46\n00:02:35.000 --> 00:02:37.840\nWhen it comes to troubleshooting\nOSPF there's really a couple of\n\n47\n00:02:37.840 --> 00:02:38.580\ndifferent ways to do it.\n\n48\n00:02:38.580 --> 00:02:40.560\nThere's three main ways that I use.\n\n49\n00:02:40.560 --> 00:02:44.340\nYou can just do a show running config on\none, a show running config on the other,\n\n50\n00:02:44.340 --> 00:02:45.630\nand look for the differences, right.\n\n51\n00:02:45.630 --> 00:02:46.710\nAnd that'll usually turn it up.\n\n52\n00:02:46.710 --> 00:02:48.140\nBut it's time-consuming.\n\n53\n00:02:48.140 --> 00:02:49.800\nWe can fire up debugs.\n\n54\n00:02:49.800 --> 00:02:52.700\nAnd the debugs will show us\ninformation about what's going on.\n\n55\n00:02:52.700 --> 00:02:55.470\nBut the third method is simply\nto use the logs of our router.\n\n56\n00:02:55.470 --> 00:02:58.750\nThe logging on these things is\nreally good, especially with OSPF.\n\n57\n00:02:58.750 --> 00:03:01.170\nAnd so normally if there's a problem\nwith OSPF, it'll turn up in the log.\n\n58\n00:03:01.170 --> 00:03:03.190\nSo that's usually the first place I go.\n\n59\n00:03:03.190 --> 00:03:05.710\nAnd if it's not there,\nthen we can start looking at debugging.\n\n60\n00:03:05.710 --> 00:03:08.210\nSo, I'm gonna do a show log on NYCORE 2,\n\n61\n00:03:08.210 --> 00:03:11.260\nand let's just see if we have any\nmessages kinda tucked away in here.\n\n62\n00:03:11.260 --> 00:03:13.440\nLooks like I have some\ninterfaces coming up.\n\n63\n00:03:13.440 --> 00:03:16.870\nSome power over ethernet being detected.\n\n64\n00:03:16.870 --> 00:03:20.570\nNot, here is an entry\nthat has to do with OSPF.\n\n65\n00:03:20.570 --> 00:03:24.510\nSo, I got an entry here, OSPF-4.\n\n66\n00:03:24.510 --> 00:03:29.610\nAnd it says no router\nID OSPF process 100 failed.\n\n67\n00:03:29.610 --> 00:03:31.990\nLet's see why did it fail?\n\n68\n00:03:31.990 --> 00:03:34.880\nFailed to allocate unique router ID and\ncannot start.\n\n69\n00:03:34.880 --> 00:03:36.100\nThat's an interesting one.\n\n70\n00:03:36.100 --> 00:03:39.980\nThat's an error that you would get if a\nsystem booted up with OSPF configured and\n\n71\n00:03:39.980 --> 00:03:41.860\nno valid IP addresses.\n\n72\n00:03:41.860 --> 00:03:42.380\nAll right?\n\n73\n00:03:42.380 --> 00:03:46.560\nWell this system if the only valid\nIP address we had was tied to that\n\n74\n00:03:46.560 --> 00:03:47.440\nport channel.\n\n75\n00:03:47.440 --> 00:03:49.100\nthe port channel is down in issue one, and\n\n76\n00:03:49.100 --> 00:03:51.500\nthat might be what generated\nthat error message.\n\n77\n00:03:51.500 --> 00:03:54.740\nI can verify that really easy\nwith the show IP protocols.\n\n78\n00:03:54.740 --> 00:03:57.820\nIf we still don't have a router ID,\nit'll show up in here.\n\n79\n00:03:57.820 --> 00:04:02.770\nBut I can see I've got routing protocol\nOSPF 100, and I've got a router ID.\n\n80\n00:04:02.770 --> 00:04:06.610\nSo, that error is already gone,\nthat one's not going to apply.\n\n81\n00:04:06.610 --> 00:04:08.230\nAlright im going to do a show log and\n\n82\n00:04:08.230 --> 00:04:11.712\nI'm going to just include lines with\nOSPF to make our job a little easier.\n\n83\n00:04:11.712 --> 00:04:16.255\nAll right that was the only error message\nin my logs that had to do with OSPF there\n\n84\n00:04:16.255 --> 00:04:17.570\nwasn't anything else.\n\n85\n00:04:17.570 --> 00:04:22.090\nSo I'm not getting any hints there as to\nwhy my neighbor ships not building up.\n\n86\n00:04:22.090 --> 00:04:25.490\nIf it was a router ID problem that\nwould cause it not to happen but\n\n87\n00:04:25.490 --> 00:04:29.220\nin this case that's not the case.\n\n88\n00:04:29.220 --> 00:04:32.150\nSo I'm going to have to go a step\nfurther and do some debugging and\n\n89\n00:04:32.150 --> 00:04:33.210\ntry to find out what's going on here.\n\n90\n00:04:33.210 --> 00:04:37.710\nI'm going to jump into my configuration\nand I'm going to turn on logging console\n\n91\n00:04:37.710 --> 00:04:40.450\njust to make sure that I can see\nany messages that are happening.\n\n92\n00:04:40.450 --> 00:04:43.890\nAnd then I'm going to do,\ndebug ip ospf packet.\n\n93\n00:04:45.040 --> 00:04:49.480\nAnd debug ip ospf adj, okay?\n\n94\n00:04:49.480 --> 00:04:53.300\nDebug ip ospf packet will show me all\nthe ospf packages as they come and go.\n\n95\n00:04:53.300 --> 00:04:56.440\nSo I can see if I'm even,\nif I'm even seeing a neighbor.\n\n96\n00:04:56.440 --> 00:04:59.100\nAnd debug ip ospf adj\n\n97\n00:04:59.100 --> 00:05:02.900\nwill show me any problems might happen\nwhen adjacencies are being built up.\n\n98\n00:05:02.900 --> 00:05:06.490\nAnd so I do see some packets\nhere that I'm receiving.\n\n99\n00:05:06.490 --> 00:05:08.618\nSo I'm receiving these\ncommunications coming in.\n\n100\n00:05:08.618 --> 00:05:11.090\nAnd therefore aid:0.0.0.1.\n\n101\n00:05:11.090 --> 00:05:13.618\nSo I know I don't have any\nkind like area mismatch.\n\n102\n00:05:13.618 --> 00:05:19.350\nAnd it's 192.168.255.1,\nthat's the switch on the other side.\n\n103\n00:05:19.350 --> 00:05:23.310\nSo I am receiving communications, but\n\n104\n00:05:23.310 --> 00:05:26.320\nnotice how I haven't gotten\nany adjacency messages here.\n\n105\n00:05:26.320 --> 00:05:30.220\nAll right, so while it looks like I\nam communicating with the other side,\n\n106\n00:05:30.220 --> 00:05:33.520\nI'm not trying to build\nan adjacency with it.\n\n107\n00:05:33.520 --> 00:05:34.470\nWhy not?\n\n108\n00:05:34.470 --> 00:05:36.800\nWell, with OSPF, in order for\n\n109\n00:05:36.800 --> 00:05:39.600\nan adjacency to build, there's\na number of things that have to match.\n\n110\n00:05:39.600 --> 00:05:41.150\nThe area ID is one of them.\n\n111\n00:05:41.150 --> 00:05:43.830\nAnd if the area ID doesn't match,\nyou'll get all sorts of warnings.\n\n112\n00:05:43.830 --> 00:05:47.300\nBut there's other things that have to\nmatch too, like our authentication.\n\n113\n00:05:47.300 --> 00:05:48.990\nAnd you'll see mine has\nauthentication zero,\n\n114\n00:05:48.990 --> 00:05:50.930\nthat means I'm not doing authentication.\n\n115\n00:05:50.930 --> 00:05:53.370\nSo if that didn't match,\nit would fail to come up.\n\n116\n00:05:53.370 --> 00:05:55.640\nOur hello and dead timer intervals,\n\n117\n00:05:55.640 --> 00:05:58.530\nthose would cause us not to\ncome up if they didn't match.\n\n118\n00:05:58.530 --> 00:06:01.230\nSo these are all different\nthings that might happen,\n\n119\n00:06:01.230 --> 00:06:02.940\nsome of them don't\ngenerate error messages.\n\n120\n00:06:02.940 --> 00:06:05.030\nAnd so\nI can debug until my face turns blue, and\n\n121\n00:06:05.030 --> 00:06:06.060\nit's not going to make a difference.\n\n122\n00:06:06.060 --> 00:06:09.450\nSo I'm going to un-debug all,\nand turn off my debugging.\n\n123\n00:06:09.450 --> 00:06:11.500\nAnd I'm just going to take\na look at my configuration.\n\n124\n00:06:11.500 --> 00:06:15.150\nSo I'm going to do a show run,\nand pull up the OSPF section.\n\n125\n00:06:15.150 --> 00:06:17.210\nApparently I don't have my\nsection command assigned.\n\n126\n00:06:17.210 --> 00:06:19.450\nSo I'll do a show run,\nand I'll begin with OSPF.\n\n127\n00:06:20.870 --> 00:06:22.430\nAnd when I look at OSPF out.\n\n128\n00:06:22.430 --> 00:06:26.070\nOh, I forgot about the OSPF commands on\nthe interface, so I'll just get past that.\n\n129\n00:06:26.070 --> 00:06:27.172\nWhen I get down to the OSPF.\n\n130\n00:06:27.172 --> 00:06:31.110\n[LAUGH] Let me begin with router OSPF.\n\n131\n00:06:31.110 --> 00:06:33.400\nThat'll get me right to\nthe spot that I actually want.\n\n132\n00:06:36.410 --> 00:06:38.930\nWhen I get to that configuration,\nI can look in here and\n\n133\n00:06:38.930 --> 00:06:43.080\nsee router OSPF 100 with nothing\nelse special on it at all.\n\n134\n00:06:43.080 --> 00:06:44.380\nRight, logging adjacentcy changes.\n\n135\n00:06:44.380 --> 00:06:45.300\nThat's a default command.\n\n136\n00:06:45.300 --> 00:06:51.780\nSo we've turned on OSPF and if I do a show\nrun for interface port channel one.\n\n137\n00:06:51.780 --> 00:06:54.830\nWe've got IP OSPF 100 area 1.\n\n138\n00:06:54.830 --> 00:06:59.990\nSo no sneaky passive interfaces, no crazy\nhold down timers or anything like that.\n\n139\n00:06:59.990 --> 00:07:01.460\nThis side looks perfectly normal.\n\n140\n00:07:01.460 --> 00:07:03.380\nI don't see anything out\nof the ordinary here.\n\n141\n00:07:03.380 --> 00:07:06.780\nSo let's jump over to NYCORE2 and\nhope we have some better luck over there.\n\n142\n00:07:06.780 --> 00:07:08.180\nI'll jump over to NYCORE2 and\n\n143\n00:07:08.180 --> 00:07:12.290\nI'm basically going to repeat the same\nexact process we just went through.\n\n144\n00:07:12.290 --> 00:07:16.490\nI'm going to do a show log and I'm going\nto look for anything with OSPF in it.\n\n145\n00:07:17.560 --> 00:07:19.830\nAnd I've got one of those no\nrouter ID messages again.\n\n146\n00:07:19.830 --> 00:07:20.900\nLet's make sure that's gone.\n\n147\n00:07:20.900 --> 00:07:25.360\nI'll do a show IP protocol to make sure\nthat I actually do have a router ID and,\n\n148\n00:07:25.360 --> 00:07:26.350\nsure enough, I do.\n\n149\n00:07:26.350 --> 00:07:27.600\nSo there we go, I've got a router ID.\n\n150\n00:07:28.640 --> 00:07:32.640\nAnd I can do, whoops,\nI can log out, that'll help.\n\n151\n00:07:32.640 --> 00:07:34.190\nI can do some debugging if I want.\n\n152\n00:07:34.190 --> 00:07:41.560\nI can debug IP ospf packet,\nand debug ip ospf adj, right?\n\n153\n00:07:41.560 --> 00:07:43.230\nAnd so\n\n154\n00:07:43.230 --> 00:07:47.180\nnow as those ospf communications start\ncoming through I should start to see them.\n\n155\n00:07:47.180 --> 00:07:50.360\nI'm not seeing them so that means\nI need to turn on logging console.\n\n156\n00:07:52.890 --> 00:07:53.450\nThere we go.\n\n157\n00:07:53.450 --> 00:07:57.530\nAnd so our search should start to see\nthis OSPF messages coming through here\n\n158\n00:07:57.530 --> 00:07:58.900\nas we communicate with the other side.\n\n159\n00:07:58.900 --> 00:08:00.950\nAll right, and here they go.\n\n160\n00:08:00.950 --> 00:08:04.240\nThere starting to get, I'm receiving\ncommunications from 192.168.20.1,\n\n161\n00:08:04.240 --> 00:08:09.370\nI don't know who that is,\nthat's somebody else on the network.\n\n162\n00:08:09.370 --> 00:08:12.100\nSo if I wait long enough, I should see\ncommunications from the other side.\n\n163\n00:08:12.100 --> 00:08:13.960\nIf I don't I might have a problem there.\n\n164\n00:08:13.960 --> 00:08:17.830\nNow why may I not receive communications\nfrom the other side if I don't look.\n\n165\n00:08:17.830 --> 00:08:20.056\nLet's just assume that I\ndon't have any pop-up here.\n\n166\n00:08:20.056 --> 00:08:22.070\nI could have a passive interface.\n\n167\n00:08:22.070 --> 00:08:23.860\nI could have an access control list.\n\n168\n00:08:23.860 --> 00:08:27.090\nI could have all sorts of things that\nblock those communications from coming in.\n\n169\n00:08:27.090 --> 00:08:33.640\nAnd as I watch this, I'm seeing a lot of\nstuff coming from router id 192.168.20.1.\n\n170\n00:08:33.640 --> 00:08:37.810\nBut I'm not really seeing anything\nfrom the switch on the other side.\n\n171\n00:08:37.810 --> 00:08:41.840\nSo I'm gonna do an undebug all,\nand get that turned off.\n\n172\n00:08:41.840 --> 00:08:45.530\nAnd let me just see if 192.168.20.1\nis the router id for CORE2.\n\n173\n00:08:45.530 --> 00:08:48.620\nI don't, I don't think it is, but\nlet's, let's find out, all right?\n\n174\n00:08:48.620 --> 00:08:52.080\nYou know I did a show ip protocols\non this one a while back,\n\n175\n00:08:52.080 --> 00:08:54.370\nwhich is already scrolled\nout of my buffer.\n\n176\n00:08:54.370 --> 00:08:55.880\nSo let me do that again.\n\n177\n00:08:55.880 --> 00:08:58.630\nI just want to see what my router ID is.\n\n178\n00:08:58.630 --> 00:08:59.920\nOh my router ID is 192.168.20.1.\n\n179\n00:08:59.920 --> 00:09:02.720\nI'm glad we checked that.\n\n180\n00:09:02.720 --> 00:09:06.110\nSo that means that I am receiving\ncommunications from the other side.\n\n181\n00:09:06.110 --> 00:09:07.628\nThere's no ACL blocking this.\n\n182\n00:09:07.628 --> 00:09:11.035\nI'm getting them and I'm not even\nbothering to build an adjacent,\n\n183\n00:09:11.035 --> 00:09:13.498\nso I'll bet we have one\nof those settings wrong.\n\n184\n00:09:13.498 --> 00:09:18.100\nSo lets take a look at Show run interface\nPO1 and the port channel that's\n\n185\n00:09:18.100 --> 00:09:22.860\npretty straightforward it's just\nassigned ospf process 100 area 1.\n\n186\n00:09:22.860 --> 00:09:26.280\nThen I'll do a show run and\nbegin that with router ospf,\n\n187\n00:09:26.280 --> 00:09:32.340\nand we'll look here and see what we got,\nand now we have a difference.\n\n188\n00:09:32.340 --> 00:09:33.100\nOkay.\n\n189\n00:09:33.100 --> 00:09:37.970\nRight here we've got router\nospf 100 area 1 stub.\n\n190\n00:09:37.970 --> 00:09:40.390\nThis one is flagged as a stub.\n\n191\n00:09:40.390 --> 00:09:41.590\nThe other one isn't.\n\n192\n00:09:41.590 --> 00:09:44.100\nI mentioned hello and\ndead intervals have to match.\n\n193\n00:09:44.100 --> 00:09:45.770\nAuthentication has to match.\n\n194\n00:09:45.770 --> 00:09:47.690\nArea number has to match.\n\n195\n00:09:47.690 --> 00:09:50.510\nThe stub flag has to match also.\n\n196\n00:09:50.510 --> 00:09:52.750\nAnd in this case the stub\nfind doesn't match.\n\n197\n00:09:52.750 --> 00:09:54.080\nThis one's fine as a stub.\n\n198\n00:09:54.080 --> 00:09:55.160\nThe other side isn't.\n\n199\n00:09:55.160 --> 00:09:56.930\nIt's not gonna build an adjacentcy.\n\n200\n00:09:56.930 --> 00:09:58.750\nSo I need to get in here and correct that,\n\n201\n00:09:58.750 --> 00:10:01.270\nnow this is where it\ngets a little bit tough.\n\n202\n00:10:01.270 --> 00:10:02.740\nWhich router is wrong?\n\n203\n00:10:02.740 --> 00:10:03.830\nOkay, who's wrong?\n\n204\n00:10:03.830 --> 00:10:08.740\nIs it, is it NYCORE1 wrong to\nthink that area one is a stub?\n\n205\n00:10:08.740 --> 00:10:11.480\nOr is NYCORE2 wrong,\nto think that it's a stub.\n\n206\n00:10:11.480 --> 00:10:15.140\nWell, maybe they're not wrong at all,\nmaybe it is a stub and\n\n207\n00:10:15.140 --> 00:10:17.100\nI should make them both\nthink that it is a stub.\n\n208\n00:10:17.100 --> 00:10:18.230\nI need to figure that out.\n\n209\n00:10:19.250 --> 00:10:21.140\nFirst off, OSPF area 0.\n\n210\n00:10:21.140 --> 00:10:23.150\nArea 0 should never be a stub, right.\n\n211\n00:10:23.150 --> 00:10:27.190\nIt should always be a transit network,\nso we don't expect to see a stub there.\n\n212\n00:10:27.190 --> 00:10:31.920\nBut area 1, if there's only one way in and\none way out and no exit network,\n\n213\n00:10:31.920 --> 00:10:33.820\nno external networks in it.\n\n214\n00:10:33.820 --> 00:10:35.980\nThen it's a stub.\n\n215\n00:10:35.980 --> 00:10:39.380\nWe don't want other people flowing through\nus to get somewhere else because we're\n\n216\n00:10:39.380 --> 00:10:41.760\nArea 1, that's what Area 0 is for.\n\n217\n00:10:41.760 --> 00:10:46.760\nSo what I usually do is just look and\nif I see redistribute commands\n\n218\n00:10:46.760 --> 00:10:49.710\nthen it's not a stub,\nI need to make this not a stub.\n\n219\n00:10:49.710 --> 00:10:54.140\nBut if I don't see any redistribute\ncommands then it is a stub.\n\n220\n00:10:54.140 --> 00:10:58.430\nWell, when I look, we looked at the router\nOSPF process on both of these guys, right?\n\n221\n00:10:58.430 --> 00:11:03.200\nSo on this one, I've got router\nOSPF 100 no redistribution.\n\n222\n00:11:03.200 --> 00:11:05.090\nSo no external networks brought into that.\n\n223\n00:11:05.090 --> 00:11:06.360\nAnd if I look at the other one,\n\n224\n00:11:06.360 --> 00:11:10.250\nlet's find,\noh it's already scrolled out of my buffer.\n\n225\n00:11:10.250 --> 00:11:11.220\nLet me get it back up here.\n\n226\n00:11:12.420 --> 00:11:17.090\nIf I look at this one it didn't\nhave any of those either right.\n\n227\n00:11:17.090 --> 00:11:21.600\nIt didn't have any redistributes in it,\nat least not that I recall.\n\n228\n00:11:21.600 --> 00:11:25.170\nSo looking at it here, yeah, it's right\nhere, there's no redistribute commands.\n\n229\n00:11:25.170 --> 00:11:27.290\nSo there's no external networks.\n\n230\n00:11:27.290 --> 00:11:29.720\nArea one is effectively a stub.\n\n231\n00:11:29.720 --> 00:11:32.070\nSo if I wanna fix this,\nI can just take this guy and\n\n232\n00:11:32.070 --> 00:11:36.850\ngo into router OSPF 100 and\nsay area 1 stub.\n\n233\n00:11:37.900 --> 00:11:40.190\nNow this one's a stub,\nthe other side's a stub.\n\n234\n00:11:40.190 --> 00:11:41.640\nThe stub flag now matches.\n\n235\n00:11:41.640 --> 00:11:45.850\nAnd if that was the only difference,\nthen we should see the adjacency come up.\n\n236\n00:11:45.850 --> 00:11:49.660\nAnd there it goes, I stalled just long\nenough to make that adjacency come up.\n\n237\n00:11:49.660 --> 00:11:53.080\nAnd if I do a show IP OSPF neighbor,\nthere it is.\n\n238\n00:11:53.080 --> 00:11:56.030\nI've got a full relationship and\nif I do a show IP route.\n\n239\n00:11:57.470 --> 00:11:58.660\nWell, I'm not running any routes.\n\n240\n00:11:58.660 --> 00:12:00.360\nBut we haven't looked at\nwhat's redistributed.\n\n241\n00:12:00.360 --> 00:12:02.820\nThe important part here is,\nor not redistributed, but\n\n242\n00:12:02.820 --> 00:12:04.310\njust what's being advertised\non the other side.\n\n243\n00:12:04.310 --> 00:12:07.150\nBut the important part here\nis that we do have a full\n\n244\n00:12:07.150 --> 00:12:09.680\nadjacency built up with our neighbor.\n\n245\n00:12:09.680 --> 00:12:13.070\nAnd OSPF is now functioning the way\nit's supposed to, all right.\n\n246\n00:12:13.070 --> 00:12:15.020\nWhether or not we've advertised\nroutes doesn't really matter.\n\n247\n00:12:15.020 --> 00:12:17.920\nThe question said, the OSPF\n\n248\n00:12:17.920 --> 00:12:22.420\nis not establishing a relationship across\nthe port channel, now it is, right?\n\n249\n00:12:22.420 --> 00:12:23.460\nSo we've solved that problem.\n\n250\n00:12:23.460 --> 00:12:25.570\nThis one turned out to be the stub flag.\n\n251\n00:12:25.570 --> 00:12:28.030\nIt was set on one, not set on the other.\n\n252\n00:12:28.030 --> 00:12:31.740\nOnce we got them in agreement it was fixed\nand I fixed it by setting it as a stub.\n\n253\n00:12:31.740 --> 00:12:34.400\nI could have also fixed it by\nnot setting it as a stub, right?\n\n254\n00:12:34.400 --> 00:12:36.260\nRemoving the stub flag\non the other router.\n\n255\n00:12:36.260 --> 00:12:38.040\nThat would have solved the problem too.\n\n256\n00:12:38.040 --> 00:12:40.010\nBut since there weren't any\nredistribute commands here,\n\n257\n00:12:40.010 --> 00:12:43.200\nit effectively was a stub so\nwe might as well call it what it is.\n\n258\n00:12:43.200 --> 00:12:45.327\nSet it as a stub and now we're done.\n\n259\n00:12:45.327 --> 00:12:47.224\nAll right, well that's it for\nissue number two.\n\n260\n00:12:47.224 --> 00:12:48.448\nStay tuned for number three.\n\n261\n00:12:48.448 --> 00:12:49.688\nIt's coming up next.\n\n262\n00:12:49.688 --> 00:12:56.964\n[SOUND]\n\n",
          "vimeoId": "151030999"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #3` from set #9. The trouble ticket states that \"NYEDGE1 and NYEDGE2 are unable to communicate to each other. This can be seen when using ipv6 ping \"",
          "length": "1942",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-9-3-set_9_issue_3-120915-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-9-3-set_9_issue_3-120915-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-9-3-set_9_issue_3-120915-1-sm.jpg",
          "title": "Set 9 Issue 3",
          "transcript": "WEBVTT\n\n1\n00:00:08.503 --> 00:00:12.220\nAlright, welcome back to another\ntroubleshooting segment here on IT Pro TV.\n\n2\n00:00:12.220 --> 00:00:16.400\nWe're jumping into set nine,\nissue three and this one says basically\n\n3\n00:00:16.400 --> 00:00:21.070\nthat NYEDGE1 and NYEDGE2 are unable\nto communicate to each other.\n\n4\n00:00:21.070 --> 00:00:22.930\nThis can be seen when using IPv6 ping.\n\n5\n00:00:22.930 --> 00:00:27.980\nOh great, all right, so we've got some\nIPv6 communications to worry about here,\n\n6\n00:00:27.980 --> 00:00:31.390\nand we need to find out why these two\nsystems can't communicate to each other.\n\n7\n00:00:31.390 --> 00:00:34.070\nWell, let's take a look\nat our topology and\n\n8\n00:00:34.070 --> 00:00:36.600\nget an idea of the devices\nwe're talking about.\n\n9\n00:00:36.600 --> 00:00:41.770\nSo the systems in question are NYEDGE1 and\nNYEDGE2, these two routers.\n\n10\n00:00:41.770 --> 00:00:43.390\nThey can't talk to each other.\n\n11\n00:00:43.390 --> 00:00:47.370\nNow I know there's a serial link\nright here between the two, so\n\n12\n00:00:47.370 --> 00:00:51.630\nmaybe we talk between those, so maybe we\njust have a problem with that serial link.\n\n13\n00:00:51.630 --> 00:00:53.730\nBut they're specifically calling out IPv6.\n\n14\n00:00:53.730 --> 00:00:56.020\nWell IPv6 could run over\nthat serial link just fine.\n\n15\n00:00:56.020 --> 00:00:59.866\nBut we also have another path to be\nable to get between the systems,\n\n16\n00:00:59.866 --> 00:01:03.430\nwhich would be NYEDGE1\njumping over to NYCORE1.\n\n17\n00:01:03.430 --> 00:01:07.810\nJumping over to well,\na couple of different ways, right?\n\n18\n00:01:07.810 --> 00:01:13.320\nIf NYEDGE1 and NYEDGE2 are in the same\nsubnet, then in theory I should be\n\n19\n00:01:13.320 --> 00:01:19.940\nable to go from NYEDGE1 to NYCORE1 down\nto ACCESS1 up to CORE2 and over to EDGE2.\n\n20\n00:01:21.200 --> 00:01:23.010\nIn some of our previous\ntroubleshooting scenarios,\n\n21\n00:01:23.010 --> 00:01:27.100\nwe had a trunk in between these two\nswitches, but we don't in this set.\n\n22\n00:01:27.100 --> 00:01:29.860\nIn this set,\nwe've gotta layer three link between here.\n\n23\n00:01:29.860 --> 00:01:32.050\nSo this would be like a routed link.\n\n24\n00:01:32.050 --> 00:01:34.780\nIf these two guys were in the same subnet,\nthey're not gonna use that routed link.\n\n25\n00:01:34.780 --> 00:01:36.770\nThey're gonna go around it.\n\n26\n00:01:36.770 --> 00:01:38.440\nBut if they're on different subnets,\n\n27\n00:01:38.440 --> 00:01:40.160\nthen in theory we should be\nable to come through here and\n\n28\n00:01:40.160 --> 00:01:43.540\nget routed to the other side and\ncome up and skip ACCESS1 altogether.\n\n29\n00:01:43.540 --> 00:01:47.430\nI don't really know which way it's going\nto go, so we need to go and find out.\n\n30\n00:01:47.430 --> 00:01:50.030\nSo the first think I want to do is\na little address reconnaissance.\n\n31\n00:01:50.030 --> 00:01:53.530\nI know we're using IPv6, but I have no\nidea what address range we're using.\n\n32\n00:01:53.530 --> 00:01:57.840\nSo I'm gonna look at EDGE1 and EDGE2 and\njust see what addresses they have.\n\n33\n00:01:57.840 --> 00:02:02.940\nSo, if I jump over to NYEDGE1 right here.\n\n34\n00:02:04.310 --> 00:02:05.850\nI just wanna take a look at the addresses.\n\n35\n00:02:05.850 --> 00:02:12.180\nNow, my favorite command, the one I always\nrun on this show, is show ip int br.\n\n36\n00:02:12.180 --> 00:02:15.670\nBut that doesn't really help me when\nI'm dealing with IPv6, does it?\n\n37\n00:02:15.670 --> 00:02:20.150\nI need to do a show IPv6 interface brief.\n\n38\n00:02:20.150 --> 00:02:22.350\nAnd now I get the IPv6 addresses.\n\n39\n00:02:22.350 --> 00:02:25.470\nThat will show IPv6 interface brief.\n\n40\n00:02:25.470 --> 00:02:28.160\nAnd as I look at the interfaces that I got\n\n41\n00:02:28.160 --> 00:02:30.800\nI've got a management\ninterface that's down.\n\n42\n00:02:30.800 --> 00:02:34.760\nI've got a gig interface that's\nup with an IPv6 address.\n\n43\n00:02:34.760 --> 00:02:39.210\nI've got a serial interface\nthat's up with an IPv6 address.\n\n44\n00:02:39.210 --> 00:02:41.230\nAnd so\nI've got a few different things here.\n\n45\n00:02:41.230 --> 00:02:45.180\nThe serial interface is\nthe one that interests me.\n\n46\n00:02:45.180 --> 00:02:48.040\nBecause if I look at my topology,\nSer/0/0/0,\n\n47\n00:02:48.040 --> 00:02:50.540\nthat's this link between the two routers.\n\n48\n00:02:50.540 --> 00:02:52.330\nAnd its got an IPv6 address.\n\n49\n00:02:53.610 --> 00:02:56.760\nThat interface should be\na great candidate to talk over.\n\n50\n00:02:56.760 --> 00:02:58.870\nAnd then EDGE2 same thing on the way back,\n\n51\n00:02:58.870 --> 00:03:00.760\nif we look at it,\nwe can kind of verify it.\n\n52\n00:03:00.760 --> 00:03:02.390\nSo I'm just gonna look at these and\n\n53\n00:03:02.390 --> 00:03:05.660\nI'm gonna have to use my handy\ndandy troubleshooting tool here.\n\n54\n00:03:05.660 --> 00:03:08.340\nI wanna write down these interfaces so\nI can remember it.\n\n55\n00:03:08.340 --> 00:03:11.600\nNow there's one slight problem\nthat I have when I look at this.\n\n56\n00:03:11.600 --> 00:03:15.610\nAnd that is that it doesn't really\ngive me the sub nets for it.\n\n57\n00:03:15.610 --> 00:03:19.965\nSo a little bit more helpful sometimes\nis show IPv6 route because it'll\n\n58\n00:03:19.965 --> 00:03:22.025\nshow you your connected interfaces.\n\n59\n00:03:22.025 --> 00:03:24.975\nAnd in your connected interfaces you\ncan see what subnet mask was used.\n\n60\n00:03:24.975 --> 00:03:26.705\nRight?\nA lot of people just assume that we're\n\n61\n00:03:26.705 --> 00:03:31.225\nalways gonna use a /64 in IPv6 but\nthat's not necessarily true.\n\n62\n00:03:31.225 --> 00:03:35.445\nAnd so, what I'm looking for\nare the L interfaces.\n\n63\n00:03:35.445 --> 00:03:37.360\nRight?\nThe ones that are locally assigned.\n\n64\n00:03:37.360 --> 00:03:41.100\nThat's gonna be my IP\nfollowed by the subnet mask.\n\n65\n00:03:41.100 --> 00:03:46.070\nAnd so I can see on GI0/0, which would be\n\n66\n00:03:47.080 --> 00:03:52.160\nthis interface down here, right,\non GI0/0 I've got this 2001:A001:1:1::1,\n\n67\n00:03:52.160 --> 00:03:57.610\nthat's a nice easy to remember one.\n\n68\n00:03:59.400 --> 00:04:03.296\nThen if I look at its masks\nthat it's using it's a /96.\n\n69\n00:04:03.296 --> 00:04:08.003\nSo I'm just going to write that down so\nI can remember it for EDGE1.\n\n70\n00:04:08.003 --> 00:04:17.152\nIt is 2001:A001:1:1::1/96,\n\n71\n00:04:17.152 --> 00:04:19.312\nall right.\n\n72\n00:04:19.312 --> 00:04:22.870\nAnd that's on its GI00 interface.\n\n73\n00:04:22.870 --> 00:04:23.820\nAll right?\n\n74\n00:04:23.820 --> 00:04:26.790\nAnd then the other interface that I\ncared about was the serial interface.\n\n75\n00:04:26.790 --> 00:04:30.840\nSo I'm gonna look at the same table and\nfind that serial interface.\n\n76\n00:04:30.840 --> 00:04:33.077\nHere's Serial0/0/1 and\n\n77\n00:04:33.077 --> 00:04:38.672\nif I keep looking somewhere in here\nI'll find Serial0/0/0 right here.\n\n78\n00:04:38.672 --> 00:04:39.750\nThere it is.\n\n79\n00:04:39.750 --> 00:04:41.547\nAnd so,\nI can get an idea of what it's got.\n\n80\n00:04:41.547 --> 00:04:46.920\nIt's got 2001::D000:1::5/126.\n\n81\n00:04:46.920 --> 00:04:56.421\nAll right.\n\n82\n00:04:56.421 --> 00:04:58.810\nSo, I've got that 126\ncame from right there.\n\n83\n00:04:58.810 --> 00:05:01.010\nSo, now I know what it's got.\n\n84\n00:05:01.010 --> 00:05:02.510\nWhat address it has.\n\n85\n00:05:02.510 --> 00:05:04.980\nAnd how I can communicate\nacross that link.\n\n86\n00:05:04.980 --> 00:05:12.120\nAll right, so now if I do a show,\nlet's see, how do I wanna go about this?\n\n87\n00:05:12.120 --> 00:05:14.770\nI'm just gonna do a show\ninterface serial 0/0/0.\n\n88\n00:05:14.770 --> 00:05:18.100\nI'm gonna take IPv4,\nIPv6 just kinda out of the mix and\n\n89\n00:05:18.100 --> 00:05:19.840\nlooking at the layer 2 side.\n\n90\n00:05:19.840 --> 00:05:23.215\nIt's a serial link, and there's a lot\nthat can go wrong with a serial link.\n\n91\n00:05:23.215 --> 00:05:25.750\nOne end could be PPP,\none end could be HDLC.\n\n92\n00:05:25.750 --> 00:05:27.420\nThere could be authentication.\n\n93\n00:05:27.420 --> 00:05:32.740\nI just want to see the serial 0/0/0 is\nworking, and I've got line protocol is up.\n\n94\n00:05:32.740 --> 00:05:37.790\nRight, so the interface itself thinks that\nit's up and not really showing any errors.\n\n95\n00:05:37.790 --> 00:05:40.270\nI've got HDLC and it looks like it's okay.\n\n96\n00:05:40.270 --> 00:05:41.426\nAnd if I do just a quick.\n\n97\n00:05:41.426 --> 00:05:43.940\nShow run int s0/0/0.\n\n98\n00:05:43.940 --> 00:05:44.860\nOops, too many zeroes.\n\n99\n00:05:44.860 --> 00:05:51.990\nI can see that it's got an IPv6 address\nand it's configured for OSPF 100 area 0.\n\n100\n00:05:54.030 --> 00:05:58.230\nSo let's look at the other side and see if\nit's getting the same thing over there.\n\n101\n00:05:58.230 --> 00:06:03.010\nSo if I jump over to NYEDGE2 I can\n\n102\n00:06:04.670 --> 00:06:09.680\nbring it up, and\nI'll just do a show IPv6 interface brief.\n\n103\n00:06:11.100 --> 00:06:15.790\nAnd I'm looking for\nGI00 see how it shows as up up, and\n\n104\n00:06:15.790 --> 00:06:17.050\nI can see the address for it.\n\n105\n00:06:17.050 --> 00:06:21.696\nNow looking at that\naddress on the other side\n\n106\n00:06:21.696 --> 00:06:27.330\nEDGE1 was 2001:A001:1:1::1.\n\n107\n00:06:27.330 --> 00:06:29.681\nThis one is two, all right?\n\n108\n00:06:29.681 --> 00:06:34.660\nSo it's in the same subnet\non the GI00 interface.\n\n109\n00:06:34.660 --> 00:06:38.225\nAnd if I look at serial zero zero,\nthis guy down here.\n\n110\n00:06:38.225 --> 00:06:41.304\nI see 2001:D000:1::6,\n\n111\n00:06:41.304 --> 00:06:46.480\nwell the other side was ::5 so\nthey're on the same subnet.\n\n112\n00:06:46.480 --> 00:06:50.758\nSo at a minimum I should be able to see\nmy neighbor via that serial interface.\n\n113\n00:06:50.758 --> 00:06:55.470\nSo let's try it.\n\n114\n00:06:55.470 --> 00:06:59.480\nI'm going to do a ping to 2001:D000:1::5.\n\n115\n00:06:59.480 --> 00:07:00.330\nRight?\n\n116\n00:07:02.000 --> 00:07:03.660\nI am six.\n\n117\n00:07:03.660 --> 00:07:05.150\nThe other side is five.\n\n118\n00:07:05.150 --> 00:07:07.540\nI'm just going to try and ping it.\n\n119\n00:07:07.540 --> 00:07:09.770\nAnd, when I run that,\nI get five successes.\n\n120\n00:07:09.770 --> 00:07:13.260\nI can see EDGE 1 just\nfine over my serial link.\n\n121\n00:07:13.260 --> 00:07:17.180\nSo, going back to my topology,\nthe serial link's working just fine.\n\n122\n00:07:17.180 --> 00:07:20.080\nNow the troubleshooting\nticket said NYEDGE1 and\n\n123\n00:07:20.080 --> 00:07:22.280\nNYEDGE2 are unable to\ncommunicate to each other,\n\n124\n00:07:22.280 --> 00:07:27.290\nthis can be seen when using IPv6 ping and\nthen that's kinda what they leave us at.\n\n125\n00:07:27.290 --> 00:07:32.080\nWell they actually do give us a little\nexample where they do a ping and\n\n126\n00:07:32.080 --> 00:07:32.670\nthey ping 2001:A001.\n\n127\n00:07:32.670 --> 00:07:35.004\nThey're pinging on the ethernet side.\n\n128\n00:07:35.004 --> 00:07:39.407\nSo the serial interface is good,\nwe can flag that one as done, but\n\n129\n00:07:39.407 --> 00:07:43.893\napparently the ethernet side is\nhaving a problem and I looked, and\n\n130\n00:07:43.893 --> 00:07:46.935\nthe ethernet ones are in\nthe same subset too so\n\n131\n00:07:46.935 --> 00:07:51.210\nwe should just be able to ping\nbetween those, so let's try it.\n\n132\n00:07:51.210 --> 00:07:55.450\nSo I'm going to try and\nping 2001:A001:1:1::1, right?\n\n133\n00:07:55.450 --> 00:07:59.363\nBecause I saw in my output up\nthere that I am two and so\n\n134\n00:07:59.363 --> 00:08:01.729\nI'm going to try and ping one.\n\n135\n00:08:01.729 --> 00:08:06.040\nAnd when I try and ping that,\nwell sure enough I don't get a connection.\n\n136\n00:08:06.040 --> 00:08:08.430\nOkay, well, of course this\nwould be the hard one,right?\n\n137\n00:08:08.430 --> 00:08:10.960\nThe other one was a little bit easier,\nthe serial interface.\n\n138\n00:08:10.960 --> 00:08:14.660\nIt was a point to point link,\nthere were only two systems involved, but\n\n139\n00:08:14.660 --> 00:08:18.510\nwhen I'm dealing with this site,\nthe ethernet side, remember our typology.\n\n140\n00:08:18.510 --> 00:08:21.570\nThere's actually a lot of\ndevices involved here, right?\n\n141\n00:08:21.570 --> 00:08:25.820\nEDGE1 and EDGE2 are right here at\nthe top and they come down, and\n\n142\n00:08:25.820 --> 00:08:29.470\nif it was routed traffic, if they were on\ndifferent subnets, then they might get\n\n143\n00:08:29.470 --> 00:08:33.930\nrouted across that port channel here and\nsent back up to the top, but\n\n144\n00:08:33.930 --> 00:08:36.780\nbecause they're in the same subnet,\nthey're not being routed.\n\n145\n00:08:36.780 --> 00:08:39.180\nSo they're not gonna cross\nthat layer three link.\n\n146\n00:08:39.180 --> 00:08:43.500\nInstead, they're gonna have to rattle\nall the way down here to ACCESS1 and\n\n147\n00:08:43.500 --> 00:08:44.030\ncome back up.\n\n148\n00:08:45.580 --> 00:08:48.980\nSo this is probably not going\nto be IPv6 related at all\n\n149\n00:08:50.130 --> 00:08:53.080\nbecause if these guys\nare on the same subnet and\n\n150\n00:08:53.080 --> 00:08:56.490\nthey're plugged into the switches,\nthere's no routers involved.\n\n151\n00:08:56.490 --> 00:08:57.310\nWe're on the same subnet.\n\n152\n00:08:57.310 --> 00:08:58.500\nWe should be able to ping and\nhit each other.\n\n153\n00:08:58.500 --> 00:09:01.820\nIf we can't we're probably\ndealing with a layer two issue.\n\n154\n00:09:01.820 --> 00:09:04.520\nThis is probably going to be a bad trunk.\n\n155\n00:09:04.520 --> 00:09:07.780\nOr maybe a port on the wrong VLAN.\n\n156\n00:09:07.780 --> 00:09:08.840\nThat's a great place to start.\n\n157\n00:09:08.840 --> 00:09:11.510\nI don't even know what VLAN these\nguys are supposed to be on.\n\n158\n00:09:11.510 --> 00:09:15.030\nRemember, people who cited this with IPv6,\nyou still had VLANs just like IPv4.\n\n159\n00:09:15.030 --> 00:09:18.070\nThese two notes can be on different VLANs.\n\n160\n00:09:18.070 --> 00:09:21.820\nSo, unfortunately, for me,\nthese interfaces aren't labelled so\n\n161\n00:09:21.820 --> 00:09:23.270\nI don't really know NYEDGE1.\n\n162\n00:09:23.270 --> 00:09:25.640\nI don't know what port it's\nplugged into over here.\n\n163\n00:09:25.640 --> 00:09:29.500\nAnd NYEDGE2, looks like there's a 1 in the\ndocument but that doesn't really help me.\n\n164\n00:09:29.500 --> 00:09:31.990\nI still don't really know\nwhat port it's plugged into.\n\n165\n00:09:31.990 --> 00:09:34.500\nSo let's hope this cdp is running and\nit'll show us.\n\n166\n00:09:34.500 --> 00:09:36.600\nIf not, we can always turn it on, right.\n\n167\n00:09:36.600 --> 00:09:41.030\nSo I'm gonna jump over to NYCORE1,\nand I'm going to do a,\n\n168\n00:09:41.030 --> 00:09:45.140\nshow CDP neighbor, and\nlet's see what port EDGE1 is plugged into.\n\n169\n00:09:48.440 --> 00:09:51.520\nSo I just do a, show cdp neighbor, and\n\n170\n00:09:51.520 --> 00:09:56.328\nthere's NYEDGE1 showing up\non my fa1/0/1 interface.\n\n171\n00:09:56.328 --> 00:10:01.110\nAnd if I do a show run for\ninterface fa1/0/1.\n\n172\n00:10:01.110 --> 00:10:04.190\nI can see it's assigned to vlan 66,\nall right?\n\n173\n00:10:04.190 --> 00:10:08.540\nvlan 66, if I do a show vlan,\nI can find it in my output.\n\n174\n00:10:08.540 --> 00:10:12.870\nHere is vlan 66 and what I'm looking for\nis whether it's active or inactive.\n\n175\n00:10:12.870 --> 00:10:15.550\nAnd it is showing as active,\nor it's actually active or\n\n176\n00:10:15.550 --> 00:10:19.150\nsuspended, but either way here\nit's active, that's what I wanted.\n\n177\n00:10:19.150 --> 00:10:23.060\nAll right, so we're on vlan 66,\nlet's go take a look at the other one.\n\n178\n00:10:23.060 --> 00:10:26.800\nI'm gonna go to NYCORE2 and\nrepeat that same process.\n\n179\n00:10:26.800 --> 00:10:29.770\nI'll do a show cdp neighbor\n\n180\n00:10:31.450 --> 00:10:36.210\njust to see what port EDGE2 is plugged\ninto, and it's plugged into port 1.\n\n181\n00:10:36.210 --> 00:10:42.867\nAnd then I'll pull up a show run interface\nfor fa1/0/1 And it's on vlan 66.\n\n182\n00:10:42.867 --> 00:10:44.728\nWell that's about the same.\n\n183\n00:10:44.728 --> 00:10:49.939\nAnd if I do a show vlan,\nI expect to see vlan 66 as,\n\n184\n00:10:49.939 --> 00:10:56.268\nwhoops, [LAUGH] I expect to see\nvlan 66 as active, and it is.\n\n185\n00:10:56.268 --> 00:10:57.635\nIt's not suspended.\n\n186\n00:10:57.635 --> 00:10:58.648\nAll right so that's good.\n\n187\n00:10:58.648 --> 00:11:05.217\nNow when I did a show\nrun interface fa1/0/1.\n\n188\n00:11:05.217 --> 00:11:07.740\nI noticed that this guy's a switchport and\nthere's only one command.\n\n189\n00:11:07.740 --> 00:11:09.610\nI could have swore I saw two\ncommands on the other side.\n\n190\n00:11:09.610 --> 00:11:13.960\nSo let me jump back to NYCORE1 and\nI did show two commands, but\n\n191\n00:11:13.960 --> 00:11:16.430\nthat second command is\nspanning-tree portfast, right.\n\n192\n00:11:16.430 --> 00:11:20.210\nSo does it really matter if portfast is\nconfigured on one side verses the other?\n\n193\n00:11:20.210 --> 00:11:22.800\nNo, it just creates a 30\nsecond delay on the other one.\n\n194\n00:11:22.800 --> 00:11:24.870\nAnd I'd been talking for\na lot more than 30 seconds.\n\n195\n00:11:24.870 --> 00:11:26.780\nSo that's not our problem.\n\n196\n00:11:26.780 --> 00:11:28.640\nAll right so, we're both on vlan 66.\n\n197\n00:11:28.640 --> 00:11:31.430\nWhy can't we talk?\n\n198\n00:11:31.430 --> 00:11:33.350\nWell again we need to\nthink about our path.\n\n199\n00:11:33.350 --> 00:11:41.410\nWhat I just verified is that this link is\non vlan 66 and this link is on vlan 66.\n\n200\n00:11:41.410 --> 00:11:44.980\nBut how do I get between those systems.\n\n201\n00:11:44.980 --> 00:11:46.490\nThrough here, right?\n\n202\n00:11:46.490 --> 00:11:51.770\nSo I need to check and make sure\nthat we're trunking with access 1 or\n\n203\n00:11:51.770 --> 00:11:53.730\nthat these are access\nports also set to vlan 66.\n\n204\n00:11:53.730 --> 00:11:57.800\nI just need to have a path across\nthe network and any one of these switches\n\n205\n00:11:57.800 --> 00:12:01.190\ncould be the problem here, so i just need\nto check each of those trunk interfaces.\n\n206\n00:12:01.190 --> 00:12:04.210\nIt'll be four interfaces in\ntotal that need me to look at.\n\n207\n00:12:04.210 --> 00:12:08.790\nIt's port 22 on this one and port 22 on\nthe other core, but then it's ports 23 and\n\n208\n00:12:08.790 --> 00:12:11.190\n24 down on ACCESS, all right?\n\n209\n00:12:11.190 --> 00:12:15.650\nOn the ACCESS switch, I can actually\ncheck two interfaces on the same device,\n\n210\n00:12:15.650 --> 00:12:18.130\nthat'll be a little bit faster, so\nI'm gonna jump down to that one.\n\n211\n00:12:18.130 --> 00:12:20.990\nOtherwise I can only check one\ninterface on each of these.\n\n212\n00:12:20.990 --> 00:12:22.990\nActually I think I'm already\non one of the cores, so\n\n213\n00:12:22.990 --> 00:12:24.610\nI might as well check it while I'm on it.\n\n214\n00:12:24.610 --> 00:12:27.830\nAnd then jump down to Access1, where I\ncan check two ports at the same time.\n\n215\n00:12:27.830 --> 00:12:29.420\nSo whichever one I'm on.\n\n216\n00:12:29.420 --> 00:12:31.800\nI'm on CORE1,\nI'm gonna take a look at it's port 22.\n\n217\n00:12:31.800 --> 00:12:36.030\nAnd this is how we have to think during\nthe exam, is how can I save time?\n\n218\n00:12:36.030 --> 00:12:39.350\nAnd switching between devices takes time.\n\n219\n00:12:39.350 --> 00:12:44.390\nSo, I'm gonna pull up fa1/0/22,\nand I see this set for\n\n220\n00:12:44.390 --> 00:12:48.280\nswitchport trunk encapsulation dot1q,\nso it's an area dot1q trunk.\n\n221\n00:12:48.280 --> 00:12:51.850\nSwitchport trunk allowed vlan 10-17 and\n66,\n\n222\n00:12:51.850 --> 00:12:55.700\nso it's allowing vlan 66 and\nit's got switchport mode trunk.\n\n223\n00:12:55.700 --> 00:13:01.300\nAnd if I do a show interface trunk,\nI should see that port 22 is up.\n\n224\n00:13:01.300 --> 00:13:05.960\nAnd it's got only vlan 66 as allowed and\nactive and not pruned by spanning tree.\n\n225\n00:13:05.960 --> 00:13:09.920\nSo, it's up, it's good, and\nas far as this switch is concerned,\n\n226\n00:13:09.920 --> 00:13:14.210\nvlan 66 will cross this link and\nget down to ACCESS1.\n\n227\n00:13:14.210 --> 00:13:18.060\nAll right, now I want to check ACCESS1\neven more because I've ruled out one leg\n\n228\n00:13:18.060 --> 00:13:18.870\nof the journey.\n\n229\n00:13:18.870 --> 00:13:21.860\nThis guy's in the middle, he's a great\nculprit if he wants to cause the problem.\n\n230\n00:13:21.860 --> 00:13:23.710\nSo let's jump down to ACCESS1.\n\n231\n00:13:23.710 --> 00:13:24.500\nAnd see what it's up to.\n\n232\n00:13:24.500 --> 00:13:29.120\nAll right, so on ACCESS1,\nI'm just gonna do a show\n\n233\n00:13:29.120 --> 00:13:32.640\ninterface trunk right off the bat and\nsee if it's even configured for trunking.\n\n234\n00:13:32.640 --> 00:13:34.440\nAnd those could be access ports.\n\n235\n00:13:34.440 --> 00:13:35.960\nAnd I can see I've got ports 23 and 24.\n\n236\n00:13:35.960 --> 00:13:42.530\nThey're both set to carry Vlan 66 and\nit's active and\n\n237\n00:13:42.530 --> 00:13:47.082\nnot pruned, so its two interfaces\nare trunking the running 802.1q.\n\n238\n00:13:47.082 --> 00:13:50.500\nOne is statically set one is dynamic but\nthat's ok it doesn't\n\n239\n00:13:50.500 --> 00:13:54.900\nmatter as long as they end up trunking and\nthey're both set to carry Vlan 66.\n\n240\n00:13:54.900 --> 00:13:58.345\nSo I'm not seeing a problem\nthere this guy looks good.\n\n241\n00:13:58.345 --> 00:14:01.580\nThere's some other weird things like\nthis ones carrying Vlan one and\n\n242\n00:14:01.580 --> 00:14:04.540\nthis guy isn't that's\na little odd to see that, but\n\n243\n00:14:04.540 --> 00:14:07.240\nall I care about is Vlan 66\nwhich appears to be intact.\n\n244\n00:14:08.260 --> 00:14:13.850\nAnd if I really wanted to be sure,\nI could verify the individual interfaces,\n\n245\n00:14:13.850 --> 00:14:18.520\nbut I've kind of already seen all\nthe configuration that I need to see.\n\n246\n00:14:18.520 --> 00:14:20.630\nWell, fa0/24 has no configuration but\n\n247\n00:14:20.630 --> 00:14:23.030\non a switch like this it's\ndoing dynamic trunking, right.\n\n248\n00:14:23.030 --> 00:14:26.200\nThat was one we saw negotiate and\nso it learned everything it needed.\n\n249\n00:14:26.200 --> 00:14:27.775\nIt's working as far as I can tell.\n\n250\n00:14:27.775 --> 00:14:30.100\n[LAUGH] So, I guess we'll see.\n\n251\n00:14:30.100 --> 00:14:32.480\nIf we do have any problems with it we can\nalways come back and statically assign it.\n\n252\n00:14:32.480 --> 00:14:33.540\nBut it should be fine.\n\n253\n00:14:33.540 --> 00:14:35.800\nRight, show interface trunk\ntold me everything was good.\n\n254\n00:14:35.800 --> 00:14:38.110\nAll right,\nwell that only leaves one person.\n\n255\n00:14:38.110 --> 00:14:39.820\nI was trying to save time and\n\n256\n00:14:39.820 --> 00:14:42.480\nunfortunately it's going to end up\nbeing the last device that I check.\n\n257\n00:14:42.480 --> 00:14:45.360\nIf we have a problem it's most likely here\njust because I haven't seen a problem on\n\n258\n00:14:45.360 --> 00:14:46.450\nthe other devices.\n\n259\n00:14:46.450 --> 00:14:49.080\nSo let's go take a look at CORE2 and\nsee what he's doing.\n\n260\n00:14:49.080 --> 00:14:51.310\nAll right, so\n\n261\n00:14:51.310 --> 00:14:56.000\nhere on CORE2 I'm basically gonna repeat\nthe same process I've done on the others.\n\n262\n00:14:56.000 --> 00:15:00.070\nI'll do a show interface trunk, and\nlet's take a look at our trunks here, and\n\n263\n00:15:00.070 --> 00:15:02.830\nimmediately I see a glaring problem for\nus.\n\n264\n00:15:02.830 --> 00:15:06.870\nFirst off I see port 22 which is\nthe port that we want to be trunking.\n\n265\n00:15:06.870 --> 00:15:08.650\nThat's this port right here.\n\n266\n00:15:08.650 --> 00:15:09.500\nAll right?\n\n267\n00:15:09.500 --> 00:15:12.710\nBut I don't see vlan 66\nanywhere in the list.\n\n268\n00:15:12.710 --> 00:15:15.010\nIt's not even here in the allowed part,\n\n269\n00:15:15.010 --> 00:15:17.960\nwhich means that it's\nbeen specifically denied.\n\n270\n00:15:17.960 --> 00:15:19.510\nIf I take a look at the configuration for\n\n271\n00:15:19.510 --> 00:15:22.510\nthat interface I bet\nwe'll see it left out.\n\n272\n00:15:22.510 --> 00:15:24.708\nAnd sure enough it's left out right there.\n\n273\n00:15:24.708 --> 00:15:27.330\nSo vlan 66 is not present on that link,\nand\n\n274\n00:15:27.330 --> 00:15:29.880\nthat's going to stop our\nsystems from seeing each other.\n\n275\n00:15:29.880 --> 00:15:34.680\nIf I get into fa1/0/22,\nI can do a switchport trunk\n\n276\n00:15:35.980 --> 00:15:42.820\nallowed vlan add 66 and\nI can tack that on to the list.\n\n277\n00:15:42.820 --> 00:15:46.413\nNow, spanning-tree is going to have to\ndo its work, it's gotta check it for\n\n278\n00:15:46.413 --> 00:15:49.287\nloops and all that stuff, so\nwe'll have to give it a second but\n\n279\n00:15:49.287 --> 00:15:52.630\nassuming it works when we run show\ninterface trunk, it should turn up.\n\n280\n00:15:52.630 --> 00:15:57.523\nSee how right now,\nvlan 66 is being pruned by spanning tree?\n\n281\n00:15:57.523 --> 00:15:59.490\nThat's cuz it's in the listening and\nlearning phase.\n\n282\n00:15:59.490 --> 00:16:04.529\nIf I do a show spanning-tree For\nVLAN 66 I expect to see.\n\n283\n00:16:04.529 --> 00:16:05.409\nThere we go.\n\n284\n00:16:05.409 --> 00:16:07.270\nSee that port in the learning phase?\n\n285\n00:16:07.270 --> 00:16:10.970\nSo I just need to wait 30 seconds and\nit'll finish learning.\n\n286\n00:16:10.970 --> 00:16:12.720\nAnd once it goes to forwarding,\n\n287\n00:16:12.720 --> 00:16:15.700\nthen might show interface\ntrunk command should update.\n\n288\n00:16:15.700 --> 00:16:17.530\nThere we go.\nSo they're both forwarding.\n\n289\n00:16:17.530 --> 00:16:19.469\nAnd if I do a show interface trunk\n\n290\n00:16:21.110 --> 00:16:24.690\nI see VLAN 66 carried across the link,\nall right.\n\n291\n00:16:24.690 --> 00:16:27.080\nThat should resolve our problem.\n\n292\n00:16:27.080 --> 00:16:30.270\nWhat we've got is an unbroken chain now.\n\n293\n00:16:30.270 --> 00:16:34.790\nVLAN 66 is able to pass across all\nthese links, which means our two edge\n\n294\n00:16:34.790 --> 00:16:38.460\nrouters should be able to see each\nother via their Ethernet interfaces.\n\n295\n00:16:38.460 --> 00:16:41.938\nSo I'm going to jump over to NYEDGE1,\nor EDGE2.\n\n296\n00:16:41.938 --> 00:16:42.937\nLet's see, where did we test from?\n\n297\n00:16:42.937 --> 00:16:45.668\nWe tested from EDGE2, so\nI'll just jump over to NYEDGE2 and\n\n298\n00:16:45.668 --> 00:16:49.000\nhere's the ping that I ran just\na few moments ago that failed.\n\n299\n00:16:49.000 --> 00:16:50.480\nI'm gonna rerun that ping.\n\n300\n00:16:51.510 --> 00:16:54.410\nA hard broadcast is gonna happen, it's\ngonna pass through a couple of switches,\n\n301\n00:16:54.410 --> 00:16:55.456\nso we might lose one or two.\n\n302\n00:16:55.456 --> 00:17:00.750\nAnd, [LAUGH] all right,\nwe might have another issue.\n\n303\n00:17:00.750 --> 00:17:02.710\nLet's just try it one\nmore time to be safe.\n\n304\n00:17:02.710 --> 00:17:06.420\nSo remember the spanning tree has to\ncalculate across the topology so I might\n\n305\n00:17:06.420 --> 00:17:10.510\nnot have waited long enough, but it could\nbe that I only fixed part of the problem.\n\n306\n00:17:10.510 --> 00:17:15.320\nThere was definitely an issue with VLAN\n66 not carrying across all the links.\n\n307\n00:17:15.320 --> 00:17:17.570\nI feel like I resolved that.\n\n308\n00:17:17.570 --> 00:17:19.210\nWhat else could stop this?\n\n309\n00:17:19.210 --> 00:17:21.820\nWell, I could have VLAN ACL's.\n\n310\n00:17:21.820 --> 00:17:25.370\nSo while I'm waiting on spanning tree\nto kind of sort itself out I'm gonna\n\n311\n00:17:25.370 --> 00:17:27.000\ncheck for ACL filters.\n\n312\n00:17:27.000 --> 00:17:28.280\nYou know VLAN ACL's.\n\n313\n00:17:28.280 --> 00:17:29.340\nI'm gonna go to each switch.\n\n314\n00:17:29.340 --> 00:17:33.850\nI'll go to NYCORE1 first, and the easiest\nway for me to spot them is to go to\n\n315\n00:17:33.850 --> 00:17:37.170\na quick show run and\ninclude lines with the word filter.\n\n316\n00:17:37.170 --> 00:17:37.750\nAll right.\n\n317\n00:17:37.750 --> 00:17:41.130\nAnd so I'm just looking for\nVLAN ACL filters.\n\n318\n00:17:41.130 --> 00:17:43.980\nTo see if we got anything crazy\nthat can be causing this problem.\n\n319\n00:17:43.980 --> 00:17:48.690\nThe reason I'm looking for VLAN ACLs and\nnot regular ACLs is that I know that this\n\n320\n00:17:48.690 --> 00:17:54.520\nis not routed traffic, so only a VLAN ACL\ncould actually interfere with us.\n\n321\n00:17:54.520 --> 00:17:57.852\nAnd VLAN ACLs use the filter command,\nso that's what I'm looking for there, so\n\n322\n00:17:57.852 --> 00:18:00.858\nI'm just gonna hunt for these, and\nwhat I'm really doing is stalling.\n\n323\n00:18:00.858 --> 00:18:04.633\nI think if I just give it enough time for\nspanning tree to kinda\n\n324\n00:18:04.633 --> 00:18:09.016\nresolve its topology then our problem\nwill be solved, so we'll see.\n\n325\n00:18:09.016 --> 00:18:12.088\nAll right, so let me check this last one,\nand all right,\n\n326\n00:18:12.088 --> 00:18:14.700\nno vlan acls anywhere on the switches.\n\n327\n00:18:14.700 --> 00:18:18.940\nLet me go back to edge two and\nhere's my failed ping from before.\n\n328\n00:18:18.940 --> 00:18:21.077\nI'm gonna try it one more time.\n\n329\n00:18:21.077 --> 00:18:25.677\nAnd, still not looking good.\n\n330\n00:18:25.677 --> 00:18:28.747\nAll right, so now,\nwe've got a bit of a quandary, right?\n\n331\n00:18:28.747 --> 00:18:33.150\nI'm not able to connect to that host even\nthough I know I've got an unbroken chain\n\n332\n00:18:33.150 --> 00:18:35.170\nof VLANs across the link.\n\n333\n00:18:35.170 --> 00:18:37.390\nWell I think I've got an unbroken chain.\n\n334\n00:18:37.390 --> 00:18:40.120\nI guess we could have some port\nbeing held down somewhere.\n\n335\n00:18:40.120 --> 00:18:44.840\nBut one quick test we could do here,\nis let's take IPv6 out of the picture.\n\n336\n00:18:44.840 --> 00:18:49.280\nAm I even getting an arp reply\nback from the other side.\n\n337\n00:18:49.280 --> 00:18:52.460\nIf I do a show arp I\nget my arp table back.\n\n338\n00:18:52.460 --> 00:18:55.680\nThe problem with arp table though,\nis that normally it shows\n\n339\n00:18:55.680 --> 00:19:00.550\nMac addresses mapped to ip addresses,\nto ipv4 addresses.\n\n340\n00:19:00.550 --> 00:19:03.890\nAnd some commands like ping are smart\nenough to tell the difference, but\n\n341\n00:19:03.890 --> 00:19:05.920\nyou'll see where arp really doesn't.\n\n342\n00:19:05.920 --> 00:19:09.030\nSo we actually need to use\na little bit different of command.\n\n343\n00:19:09.030 --> 00:19:10.880\nIf you do show ipv6.\n\n344\n00:19:10.880 --> 00:19:15.860\nYou'll see that it's got its own way of\nshowing its various typologies and tables.\n\n345\n00:19:15.860 --> 00:19:19.060\nAnd IPv6, we don't use arp.\n\n346\n00:19:19.060 --> 00:19:21.380\nInstead we use neighbor discovery.\n\n347\n00:19:21.380 --> 00:19:26.410\nAnd so, you can see your neighbors\nright there to be able to spot that.\n\n348\n00:19:26.410 --> 00:19:27.900\nAnd mld,\n\n349\n00:19:27.900 --> 00:19:31.610\nmulticast group membership information\nwill sometimes show those neighbors also.\n\n350\n00:19:31.610 --> 00:19:37.220\nSo I'm gonna do a show ipv6 neighbors and\nneighbors there either.\n\n351\n00:19:37.220 --> 00:19:39.200\nSo I may have another problem.\n\n352\n00:19:39.200 --> 00:19:42.590\nLet's jump through and\nsee if we can spot what's going on here.\n\n353\n00:19:42.590 --> 00:19:46.510\nI'm still suspecting spanning tree cuz\nonce you, when you have a layer two issue\n\n354\n00:19:46.510 --> 00:19:50.170\nlike this beyond VLAN ACL it's not\nmuch that can cause an interrupt,\n\n355\n00:19:50.170 --> 00:19:52.050\nI guess I could be pinging\nthe wrong IP address.\n\n356\n00:19:52.050 --> 00:19:53.370\nThat's another possibility.\n\n357\n00:19:53.370 --> 00:19:54.578\nLet me double check that.\n\n358\n00:19:54.578 --> 00:19:58.186\nIt would not be out of\nthe realm of possibility for\n\n359\n00:19:58.186 --> 00:20:00.565\nme to just be using the wrong IP.\n\n360\n00:20:00.565 --> 00:20:03.942\nAll right, so looking at mine,\n\n361\n00:20:03.942 --> 00:20:08.698\nI'm 2001:A001:1:1::2 and\n\n362\n00:20:08.698 --> 00:20:14.088\nI am pinging 2001:A001:1:1::1.\n\n363\n00:20:14.088 --> 00:20:15.167\nThat is right.\n\n364\n00:20:15.167 --> 00:20:16.987\nOkay, so that's not working.\n\n365\n00:20:16.987 --> 00:20:20.697\nAnd then let me just jump to the other\nside of this thing, I'll go to NYEDGE1.\n\n366\n00:20:25.677 --> 00:20:30.389\nAnd I'm gonna pull up\nthe configuration for gi0/0 and\n\n367\n00:20:30.389 --> 00:20:33.147\nlooking at gi0/0 on this one.\n\n368\n00:20:33.147 --> 00:20:39.658\nI've got IPv6 address 2001:A001:1:1::1,\nright so the address was right.\n\n369\n00:20:39.658 --> 00:20:47.364\nAnd if if I try and\nping 2001: A001:1:1::2.\n\n370\n00:20:47.364 --> 00:20:48.504\nI get successes.\n\n371\n00:20:48.504 --> 00:20:52.932\nAll right, I'm able to ping the other\nside, but they can't ping me,\n\n372\n00:20:52.932 --> 00:20:57.889\nand I see this great big traffic filter\nsitting right here on the interface, so\n\n373\n00:20:57.889 --> 00:21:01.597\nit is very likely that we're\nfiltering traffic, right?\n\n374\n00:21:01.597 --> 00:21:06.806\nThat we've got an access list in\nplace that's blocking them and\n\n375\n00:21:06.806 --> 00:21:12.882\nif I do a show access-list here it is and\nI'll see it's permitting icmp for\n\n376\n00:21:12.882 --> 00:21:20.120\n2001:A001:1:1::2 going to\nhost 2001:A001:1:1::1,\n\n377\n00:21:20.120 --> 00:21:23.317\nand I've six matches on that, right?\n\n378\n00:21:23.317 --> 00:21:27.447\nSo it's matching traffic for\npermitting icmp traffic.\n\n379\n00:21:27.447 --> 00:21:30.924\nAnd then I'll see some of the other\nentries that just got entered in, and\n\n380\n00:21:30.924 --> 00:21:34.740\nthen is denying icmp for everybody else,\nand it's got 50 matches.\n\n381\n00:21:34.740 --> 00:21:35.870\nAll right?\n\n382\n00:21:35.870 --> 00:21:37.290\nWhat's that all about?\n\n383\n00:21:37.290 --> 00:21:39.240\nWell, if you look at this ACL,\n\n384\n00:21:39.240 --> 00:21:43.660\nit's applied to traffic coming in,\nnot traffic going out.\n\n385\n00:21:43.660 --> 00:21:46.840\nAnd so that's why I was able\nto ping from this side and\n\n386\n00:21:46.840 --> 00:21:48.880\nnot ping from the other side.\n\n387\n00:21:48.880 --> 00:21:50.520\nAnd this ACL, the way that it's written,\n\n388\n00:21:50.520 --> 00:21:53.570\nit's only filtering that\none particular direction.\n\n389\n00:21:53.570 --> 00:21:56.420\nAnd so we've got a bit of a problem\nthere with our traffic not being able to\n\n390\n00:21:56.420 --> 00:21:56.970\ncome back in.\n\n391\n00:21:56.970 --> 00:21:59.870\nNow, I don't know why\nthis ACL is in place.\n\n392\n00:21:59.870 --> 00:22:04.350\nAnyway, it looks like it's specifically\ndesigned to block icmp for\n\n393\n00:22:04.350 --> 00:22:10.120\neverybody except for that host, but\nit sitting there at 50 matches.\n\n394\n00:22:10.120 --> 00:22:11.470\nIt certainly is not working.\n\n395\n00:22:11.470 --> 00:22:14.210\nSo we may need to modify\nthis ACL a little bit.\n\n396\n00:22:14.210 --> 00:22:19.641\nSo this is catching traffic coming in,\ngi0/0 If the traffic\n\n397\n00:22:19.641 --> 00:22:24.768\nis coming from that colon colon\ntwo address, coming to us.\n\n398\n00:22:24.768 --> 00:22:29.033\nNow, the problem here is that this\ntraffic is not really being routed.\n\n399\n00:22:29.033 --> 00:22:32.128\nAnd ACLs normally apply when\ntraffic is being routed and so\n\n400\n00:22:32.128 --> 00:22:36.380\nthis one, it's certainly applying\nto our traffic coming out.\n\n401\n00:22:36.380 --> 00:22:38.150\nMm, that is interesting.\n\n402\n00:22:38.150 --> 00:22:40.970\nYou know another problem we're having is\nwhen we're talking to another host that is\n\n403\n00:22:40.970 --> 00:22:44.010\non the same network as us,\nwe might ping with one of these IPs and\n\n404\n00:22:44.010 --> 00:22:48.370\nthen it switches to use link local\naddresses to communicate across the link.\n\n405\n00:22:48.370 --> 00:22:51.620\nAnd so\nit actually comes in as an FE80: bla, bla,\n\n406\n00:22:51.620 --> 00:22:54.600\nbla, so we could be coming in\nunder a different address.\n\n407\n00:22:54.600 --> 00:22:58.520\nEasy way to test if that's what our\nproblem is, we could turn this ACL off.\n\n408\n00:22:58.520 --> 00:23:01.270\nAnd then see if the pings go through.\n\n409\n00:23:01.270 --> 00:23:04.150\nSo let's see.\n\n410\n00:23:04.150 --> 00:23:12.920\nIf we just do a show run interface gi0/0\nwe can jump into config, get into gi/0/0/.\n\n411\n00:23:12.920 --> 00:23:13.420\nWoops.\n\n412\n00:23:15.920 --> 00:23:19.729\nAnd I'm just going to do a no IPV6\n\n413\n00:23:19.729 --> 00:23:27.900\ntraffic-filter BLOCK in, all right?\n\n414\n00:23:27.900 --> 00:23:28.740\nIt's gonna turn off.\n\n415\n00:23:28.740 --> 00:23:31.325\nWe'll turn it off and then we'll\ngo test from the other system and\n\n416\n00:23:31.325 --> 00:23:33.827\nif it gets through then we know\nthat ACL is going to be our issue.\n\n417\n00:23:33.827 --> 00:23:35.868\nIf it doesn't get through,\nwe got another problem so.\n\n418\n00:23:35.868 --> 00:23:38.800\nOver here, I'll just repeat that ping.\n\n419\n00:23:38.800 --> 00:23:40.870\nAnd this time we get through, all right.\n\n420\n00:23:40.870 --> 00:23:44.280\nSo if you think about it, the ping here\nis originating from colon colon two.\n\n421\n00:23:44.280 --> 00:23:49.810\nAnd it's going to the other side,\ncolon colon one and it's failing.\n\n422\n00:23:49.810 --> 00:23:52.650\nBut the ACL looked like it was\nwritten correctly, didn't it?\n\n423\n00:23:52.650 --> 00:23:54.861\nIt looked like it was approving that.\n\n424\n00:23:54.861 --> 00:23:56.630\nBut it certainly wasn't matching for us.\n\n425\n00:23:56.630 --> 00:23:59.646\nWe were coming from colon colon\ntwp and- What I'm looking for\n\n426\n00:23:59.646 --> 00:24:03.130\nis sometimes there will be a typo\nthat's just not incredibly obvious.\n\n427\n00:24:03.130 --> 00:24:03.690\nRight?\n\n428\n00:24:03.690 --> 00:24:09.947\nLike you'll expect a :1:1 and maybe\nleave one of the one's off or something.\n\n429\n00:24:09.947 --> 00:24:12.890\nBut looking at this, it does look correct.\n\n430\n00:24:12.890 --> 00:24:15.230\nAnd we were getting matches on it.\n\n431\n00:24:15.230 --> 00:24:18.020\nAnother way to solve this would be\nto turn logging on for that ACL.\n\n432\n00:24:18.020 --> 00:24:22.720\nAnd that way you can kind of spot why\nit's logged or why it's matching and\n\n433\n00:24:22.720 --> 00:24:24.330\nwhat traffic pattern is showing.\n\n434\n00:24:24.330 --> 00:24:27.150\nCuz what we might be seeing is that\n\n435\n00:24:28.570 --> 00:24:34.210\nthe traffic is coming in over one of those\nFE80, one of those link local addresses.\n\n436\n00:24:34.210 --> 00:24:36.350\nSo we could turn on logging for\nthis deny statement and\n\n437\n00:24:36.350 --> 00:24:39.850\nthen actually see where that's coming\nin as opposed to turning the ACL off.\n\n438\n00:24:39.850 --> 00:24:42.530\nThe ACL doesn't really seem to do\nmuch except for mess with ICMP, so\n\n439\n00:24:42.530 --> 00:24:44.230\nwe're probably safe to disable it.\n\n440\n00:24:44.230 --> 00:24:47.705\nBut, I'm gonna turn it back on and\nthen I'm gonna modify that ACL.\n\n441\n00:24:47.705 --> 00:24:49.284\nSo I'm gonna turn that back on.\n\n442\n00:24:51.750 --> 00:24:55.619\nAnd then if we do a show run and\n\n443\n00:24:55.619 --> 00:24:59.979\nwe'll begin with access-list\n\n444\n00:25:03.046 --> 00:25:06.985\nAll right, so here's the access list as it\nwas defined, and it has sequence numbers.\n\n445\n00:25:06.985 --> 00:25:08.482\nThey're not really showing up here.\n\n446\n00:25:08.482 --> 00:25:13.172\nBut each one of these has a sequence\nnumber, and they're just 10, 20, 30,\n\n447\n00:25:13.172 --> 00:25:17.870\n40, 50, you probably saw it when I did\nthe show access-list command up here.\n\n448\n00:25:17.870 --> 00:25:20.999\nHere we go, see how each one of the end\nhas a sequence number even though they're\n\n449\n00:25:20.999 --> 00:25:22.000\nnot assigned?\n\n450\n00:25:22.000 --> 00:25:25.260\nAnd what I wanna do is I wanna\nkill that deny icmp any any and\n\n451\n00:25:25.260 --> 00:25:28.200\nput it back in with the log\ncommand at the end.\n\n452\n00:25:28.200 --> 00:25:29.390\nSince that's the one that's matching and\n\n453\n00:25:29.390 --> 00:25:32.500\nstopping our traffic I can find\nout why that one's being blocked.\n\n454\n00:25:32.500 --> 00:25:34.970\nAnd figure out why this isn't matching,\nright?\n\n455\n00:25:34.970 --> 00:25:39.332\nSo, I wanna go in here and\nbasically do the ipv6\n\n456\n00:25:39.332 --> 00:25:46.220\naccess-list BLOCK.\n\n457\n00:25:46.220 --> 00:25:48.550\nAnd then the line that's in question for\nme.\n\n458\n00:25:48.550 --> 00:25:50.730\nIf I go back here was sequence number 40.\n\n459\n00:25:50.730 --> 00:25:52.128\nThat's the deny one, right?\n\n460\n00:25:52.128 --> 00:25:56.320\nSo I wanna get rid of that one, and\nthe formatting for the command.\n\n461\n00:25:56.320 --> 00:26:01.290\nYou have that sequence command,\nso I can say no sequence 40.\n\n462\n00:26:01.290 --> 00:26:06.250\nAnd then I can say sequence 40 and start\nto rewrite the line the way that I want.\n\n463\n00:26:06.250 --> 00:26:10.565\nAnd so I'm gonna say deny icmp any any.\n\n464\n00:26:10.565 --> 00:26:13.732\nAnd then what I wanna do is\ntack onto the end of that,\n\n465\n00:26:13.732 --> 00:26:18.384\nthe log command, so that I'll have\na record of why it was blocked, right?\n\n466\n00:26:18.384 --> 00:26:19.787\nMy head is gonna cover that up a bit.\n\n467\n00:26:19.787 --> 00:26:25.801\nBut it's sequence 40\ndeny icmp any any log.\n\n468\n00:26:25.801 --> 00:26:30.607\nAnd so that's gonna put that in if I do a\nshow access-list now, the access list will\n\n469\n00:26:30.607 --> 00:26:35.640\nappear the same, except I'll have logging\nturned on for that one right there.\n\n470\n00:26:35.640 --> 00:26:41.115\nAnd so now, if I jump back over to EDGE2,\nand repeat my ping, my ping should fail.\n\n471\n00:26:44.678 --> 00:26:47.535\nOr not, or it'll succeed,\nthat's pretty exciting.\n\n472\n00:26:47.535 --> 00:26:51.000\nSo, [LAUGH] so in this case it's pinging\nthrough and it's actually getting through.\n\n473\n00:26:51.000 --> 00:26:52.103\nDid I not turn that back on?\n\n474\n00:26:52.103 --> 00:26:54.564\nLet me make sure I turned the ACL back on.\n\n475\n00:26:58.207 --> 00:27:00.230\nJust do a show access list here and see.\n\n476\n00:27:02.200 --> 00:27:03.060\nYou know, that's interesting.\n\n477\n00:27:03.060 --> 00:27:06.530\nI got matches on the deny and yet\n\n478\n00:27:06.530 --> 00:27:08.490\nI got succesful ping\nresponses on the other side.\n\n479\n00:27:08.490 --> 00:27:12.163\nLet's do a show log and\nsee what kinda happened on the end here.\n\n480\n00:27:12.163 --> 00:27:14.768\nWhat may have happened here is,\n\n481\n00:27:14.768 --> 00:27:19.883\nI did the ping while the access-list\nwas off and it succeeded.\n\n482\n00:27:19.883 --> 00:27:23.450\nAnd that means that IPv6 Neighbor\nDiscovery was able to succeed.\n\n483\n00:27:23.450 --> 00:27:26.210\nAnd so, I've probably cashed\nthe neighbor information, and now,\n\n484\n00:27:26.210 --> 00:27:27.410\nI'm just sending the ping.\n\n485\n00:27:27.410 --> 00:27:29.430\nAnd so, the ping is succeeding, right?\n\n486\n00:27:29.430 --> 00:27:32.524\nAnd so, if I wait for\nmy neighbor information to expire,\n\n487\n00:27:32.524 --> 00:27:35.623\nthen the ping will probably stop or\nstart failing again.\n\n488\n00:27:35.623 --> 00:27:41.024\nSo yeah, looking in here I do have some\naccess entries here where I'm denying it,\n\n489\n00:27:41.024 --> 00:27:45.899\nand it's, see, if we look right here\nwe'll see the crux of the problem.\n\n490\n00:27:45.899 --> 00:27:52.570\nSo here's the ping from 2001:A001:1:1::2.\n\n491\n00:27:52.570 --> 00:27:57.100\nAnd look at that destination, it's\nthe link local address, that FE80, right?\n\n492\n00:27:57.100 --> 00:28:01.340\nWhen Neighbor Discovery runs, you might\nbe pinging a specific address, but\n\n493\n00:28:01.340 --> 00:28:02.620\nit gets that FE80.\n\n494\n00:28:02.620 --> 00:28:06.320\nIt gets that link local address to\nactually communicate on the same subnet.\n\n495\n00:28:06.320 --> 00:28:08.420\nIf we were being routed,\nit'd be a different story.\n\n496\n00:28:08.420 --> 00:28:10.560\nHere, we're not being routed,\nwe're on the same subnet.\n\n497\n00:28:10.560 --> 00:28:11.930\nSo, that's our problem.\n\n498\n00:28:12.950 --> 00:28:14.398\nAnd I got two choices.\n\n499\n00:28:14.398 --> 00:28:19.402\nWhat I probably need to do is just add\nanother ACL entry in here that covers\n\n500\n00:28:19.402 --> 00:28:23.927\nwhen that host pings the FE80,\npings that link local address.\n\n501\n00:28:23.927 --> 00:28:26.552\nIf I don't do that, I'm gonna\ncontinue to have failures like this.\n\n502\n00:28:26.552 --> 00:28:29.129\nSo, and we can do that easy enough.\n\n503\n00:28:29.129 --> 00:28:34.620\nIf I do a show ipv6 Int brief,\nI can get that address up on my screen and\n\n504\n00:28:34.620 --> 00:28:37.769\nthat address is right here, this one.\n\n505\n00:28:37.769 --> 00:28:42.331\nAnd see if it will let me copy, let's\nsee if I can copy and paste on this one.\n\n506\n00:28:42.331 --> 00:28:47.101\nAll right, so I'm gonna copy that and\nthen what I'm gonna do is get back\n\n507\n00:28:47.101 --> 00:28:51.485\ninto that access-list and\nwe had sequence 40 was the deny all.\n\n508\n00:28:51.485 --> 00:28:54.710\nIf I do a, let me pull that\naccess-list back up again.\n\n509\n00:28:54.710 --> 00:28:59.450\nI'll do a show access-list and\nthen we can see here where it was,\n\n510\n00:28:59.450 --> 00:29:03.692\nactually, this very first one, sequence\n10 that approved me to being the host.\n\n511\n00:29:03.692 --> 00:29:09.470\nI'm gonna add a sequence 11,\nthat'll permit ICMP from host.\n\n512\n00:29:09.470 --> 00:29:12.125\nAnd I'm gonna specify my guy\non the other side, right?\n\n513\n00:29:12.125 --> 00:29:17.582\nSo 2001:A001 :1:1::2.\n\n514\n00:29:19.852 --> 00:29:23.678\nAnd then the destination,\nI'm gonna put host.\n\n515\n00:29:23.678 --> 00:29:25.818\nAnd then I'll paste in\nthat link local address,\n\n516\n00:29:25.818 --> 00:29:28.290\nwhich I thought it wasn't\ngonna let me ping.\n\n517\n00:29:28.290 --> 00:29:30.970\nSo I'm gonna have to write\nthis kind of the hard way.\n\n518\n00:29:30.970 --> 00:29:31.776\nSo let's see, it's.\n\n519\n00:29:33.775 --> 00:29:34.913\nLet me do a.\n\n520\n00:29:37.374 --> 00:29:38.755\nIt's not gonna like that, is it?\n\n521\n00:29:38.755 --> 00:29:45.835\nSo, let me do a show ipv6 int brief and\n\n522\n00:29:45.835 --> 00:29:50.051\njust include 0/0.\n\n523\n00:29:50.051 --> 00:29:51.212\nYep.\n\n524\n00:29:53.804 --> 00:29:55.676\nTrying to think of the best way to get\nthis up on my screen, since I can copy and\n\n525\n00:29:55.676 --> 00:29:57.367\npaste on this one, I should've\njust written the whole thing down.\n\n526\n00:29:57.367 --> 00:29:59.260\nThere we go.\n\n527\n00:29:59.260 --> 00:30:05.565\nAll right, so now I can come in here and\njust type this in and\n\n528\n00:30:05.565 --> 00:30:10.715\nso, it's going to be\nsequence 11 permit icmp\n\n529\n00:30:10.715 --> 00:30:15.507\nhost 2001:A001:1:1::2.\n\n530\n00:30:15.507 --> 00:30:16.646\nRolls right off the tongue.\n\n531\n00:30:16.646 --> 00:30:19.989\nHost and then it's FE80.\n\n532\n00:30:19.989 --> 00:30:25.759\nWhoops, FE80: And now for\nthe long part here, right?\n\n533\n00:30:25.759 --> 00:30:29.404\n::1AE7.\n\n534\n00:30:29.404 --> 00:30:35.924\nThis is the part everybody\ndreads about IPV6,\n\n535\n00:30:35.924 --> 00:30:40.977\nhaving to write these long numbers,\n\n536\n00:30:40.977 --> 00:30:44.896\n28FF:FEDD:5658.\n\n537\n00:30:44.896 --> 00:30:47.588\nThere we go.\n\n538\n00:30:47.588 --> 00:30:54.994\nAll right, and if we do a show access-list\nnow, and take a look at that ACL.\n\n539\n00:30:54.994 --> 00:30:59.261\nI've got the first line permitting\nmy IP to ping this ones IP and\n\n540\n00:30:59.261 --> 00:31:02.249\nthen my IP pinging that\nlink local address.\n\n541\n00:31:02.249 --> 00:31:06.063\nOkay, so that should take care of that\nproblem and now we should be able to ping\n\n542\n00:31:06.063 --> 00:31:09.012\nacross, even if we come across\non that link local address.\n\n543\n00:31:09.012 --> 00:31:12.083\nNow if I jump back to NYEDGE2\ncan test it out one more time,\n\n544\n00:31:12.083 --> 00:31:15.450\nwe'll just do that ping and\nwe've got our successes, right?\n\n545\n00:31:15.450 --> 00:31:21.050\nAnd if we jump back over\nhere to NYEDGE1 and\n\n546\n00:31:21.050 --> 00:31:24.560\ntake a look at here, we should have\nsome nice little matches that ACL.\n\n547\n00:31:24.560 --> 00:31:28.240\nAnd that looks like it matched off\nthe main address that time, so\n\n548\n00:31:28.240 --> 00:31:29.750\nit looks like we're going back and forth.\n\n549\n00:31:29.750 --> 00:31:32.736\nBut either way, now we're approved we\nshould be good to go for the ping, and\n\n550\n00:31:32.736 --> 00:31:33.356\nit's solved.\n\n551\n00:31:33.356 --> 00:31:35.966\nAll right, so this problem actually\nboiled down to two things.\n\n552\n00:31:35.966 --> 00:31:41.030\nFirst off we had a broken VLAN 66 along\nthe path from point A to point B.\n\n553\n00:31:41.030 --> 00:31:44.160\nAnd then secondly, we had\nan access-list that blocking our ping,\n\n554\n00:31:44.160 --> 00:31:47.440\nour neighbor discovery wasn't working\nright, and we weren't able to get there.\n\n555\n00:31:47.440 --> 00:31:49.900\nWe removed the ACL that kinda solved that.\n\n556\n00:31:49.900 --> 00:31:53.310\nWe put the ACL back in, technically\nthe problem was still there, but\n\n557\n00:31:53.310 --> 00:31:55.640\nwe weren't seeing it,\ncuz neighbor discovery already happened.\n\n558\n00:31:55.640 --> 00:32:00.050\nWhen we fixed that ACL by adding an extra\nentry for the link local address,\n\n559\n00:32:00.050 --> 00:32:02.450\nthat took care of that and now we know\nthe problem won't come back for us.\n\n560\n00:32:02.450 --> 00:32:04.540\nSo, that takes care of this one.\n\n561\n00:32:04.540 --> 00:32:06.842\nLittle bit of a long solution for\nwhat seemed like a simple problem.\n\n562\n00:32:06.842 --> 00:32:08.818\nTwo routers can't see each other.\n\n563\n00:32:08.818 --> 00:32:11.001\nWell, we got it resolved,\ngot it knocked out.\n\n564\n00:32:11.001 --> 00:32:13.299\nAnd now we're ready to move on to\nthe next troubleshooting ticket.\n\n565\n00:32:13.299 --> 00:32:15.261\nI hope to see you then.\n\n566\n00:32:15.261 --> 00:32:21.700\n[MUSIC]\n\n",
          "vimeoId": "151030998"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #4` from set #9. The trouble ticket states that \"NYEDGE1 and NYEDGE2 are not forming an OSPF neighbor adjacency even though they are on the same IPv6 subnet. We should see an adjacency on Gi0/0 \"",
          "length": "648",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-9-4-set_9_issue_4-121015-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-9-4-set_9_issue_4-121015-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-9-4-set_9_issue_4-121015-1-sm.jpg",
          "title": "Set 9 Issue 4",
          "transcript": "WEBVTT\n\n1\n00:00:00.050 --> 00:00:06.340\n[MUSIC]\n\n2\n00:00:08.360 --> 00:00:12.740\nAll right, welcome back to another Cisco\ntroubleshooting segment here on ITProTV.\n\n3\n00:00:12.740 --> 00:00:16.693\nAnd we're ready to jump right back\ninto Set 9 with Issue number 4.\n\n4\n00:00:16.693 --> 00:00:21.778\nAnd the ticket reads like this,\nit says, NYEDGE1 and NYEDGE2 are not\n\n5\n00:00:21.778 --> 00:00:27.820\nforming an OSPF neighbor adjacencies even\nthough they are on the same IPv6 subnet.\n\n6\n00:00:27.820 --> 00:00:31.540\nWe should see an adjacency on GI0/0.\n\n7\n00:00:31.540 --> 00:00:35.960\nNow these are the same interfaces that we\nwere troubleshooting a few moments ago in\n\n8\n00:00:35.960 --> 00:00:39.780\nissue number three, where they\ncouldn't ping each other via IPv6.\n\n9\n00:00:39.780 --> 00:00:40.650\nWe've resolved that.\n\n10\n00:00:40.650 --> 00:00:43.986\nWe've got them pinging, but\nnow we're not forming an OSPF adjacency.\n\n11\n00:00:43.986 --> 00:00:45.530\nSo we need like to kinda\nfigure that out and\n\n12\n00:00:45.530 --> 00:00:49.550\nsee what's going on there, and\ntroubleshoot and resolve, right?\n\n13\n00:00:49.550 --> 00:00:51.740\nSo, before we do that,\nlet's take a look at our topology again,\n\n14\n00:00:51.740 --> 00:00:53.290\njust to refresh our memory.\n\n15\n00:00:53.290 --> 00:00:58.780\nAnd the two devices in question here\nare NYEDGE1 and NYEDGE2, these two guys.\n\n16\n00:00:58.780 --> 00:01:01.440\nAnd they've got a serial link between\nthem, and that's all well and good.\n\n17\n00:01:01.440 --> 00:01:05.290\nBut the troubleshooting ticket is telling\nus that we should be getting an adjacency\n\n18\n00:01:05.290 --> 00:01:08.940\nhere on our GI0/0 interfaces\nthese internal interfaces.\n\n19\n00:01:08.940 --> 00:01:11.730\nAnd those are the ones we fixed last\ntime where they have that problem\n\n20\n00:01:11.730 --> 00:01:15.960\nrunning all the way down through these\nswitches and back up to each other.\n\n21\n00:01:15.960 --> 00:01:19.650\nAnd we're able to see that that did\nwork by the time we were done with it.\n\n22\n00:01:19.650 --> 00:01:22.350\nOne node was able to ping the other.\n\n23\n00:01:22.350 --> 00:01:26.205\nBut OSPF is not working, so\nwe need to find out why and go from there.\n\n24\n00:01:26.205 --> 00:01:28.775\nNow when you're dealing with\nan OSPF adjacency like this it\n\n25\n00:01:28.775 --> 00:01:31.925\ndoesn't necessarily matter which one we\nstart with, we could look at either node.\n\n26\n00:01:31.925 --> 00:01:36.225\nAlthough, kind of looking at this chart\nhere I'm seeing some interesting things.\n\n27\n00:01:36.225 --> 00:01:39.975\nSo if I look at this topology, let me\njust kinda go a little big picture here.\n\n28\n00:01:39.975 --> 00:01:43.505\nWe've got OSPF Area 1 down\nhere at the bottom and\n\n29\n00:01:43.505 --> 00:01:46.610\nwe've got OSPF Area 0\nover here on the side.\n\n30\n00:01:46.610 --> 00:01:50.560\nAnd NYEDGE2 doesn't really show\nup in any of the OSPF areas.\n\n31\n00:01:50.560 --> 00:01:51.540\nRight?\n\n32\n00:01:51.540 --> 00:01:52.990\nWell, actually it does.\n\n33\n00:01:52.990 --> 00:02:00.370\nThese are the IPv4 OSPF areas but way over\nhere I've got IPv6 OSPF Area 0 in purple.\n\n34\n00:02:00.370 --> 00:02:03.750\nAnd that purple cloud is extending\nto encompass both of them.\n\n35\n00:02:03.750 --> 00:02:08.890\nSo I need to make sure that I'm\ntroubleshooting the IPv6 OSPF and\n\n36\n00:02:08.890 --> 00:02:10.110\nnot the IPv4.\n\n37\n00:02:10.110 --> 00:02:12.790\nSo I mentioned it wasn't forming\na neighbor relationship earlier.\n\n38\n00:02:12.790 --> 00:02:16.170\nI don't remember, I might have checked for\nIPv4 and not IPv6.\n\n39\n00:02:16.170 --> 00:02:18.570\nSo let's go back and revisit that.\n\n40\n00:02:18.570 --> 00:02:21.010\nAnd really,\none side is as good as another.\n\n41\n00:02:21.010 --> 00:02:23.649\nI'll start with NYEDGE1,\njust because it's number one.\n\n42\n00:02:23.649 --> 00:02:25.370\nAnd see what we're getting there.\n\n43\n00:02:25.370 --> 00:02:28.670\nSo let's just jump in on this guy and,\nfirst off, I am gonna go ahead and\n\n44\n00:02:28.670 --> 00:02:30.880\nverify that I can ping\nacross to the other side.\n\n45\n00:02:30.880 --> 00:02:35.520\nIf I do a show ipv6 int brief,\nI can see my IPs.\n\n46\n00:02:35.520 --> 00:02:39.736\nAnd on my serial interface, I've got this\n\n47\n00:02:39.736 --> 00:02:45.125\n2001:D000:1::5, and on my GI0/0,\n\n48\n00:02:45.125 --> 00:02:49.941\nI've got 2001:A001:1:1::2.\n\n49\n00:02:49.941 --> 00:02:53.204\nAnd that's the interface we were working\nwith back in issue three trying to figure\n\n50\n00:02:53.204 --> 00:02:55.490\nout why we weren't able to\nping between those two hosts.\n\n51\n00:02:55.490 --> 00:02:56.850\nSo we should still be able to ping.\n\n52\n00:02:56.850 --> 00:03:00.300\nHere, let me test that out just\nto make sure I'm not going crazy.\n\n53\n00:03:00.300 --> 00:03:05.338\nSo I'm gonna ping to 2001:A001:1:1::2 is\n\n54\n00:03:05.338 --> 00:03:10.180\nthe other side, and\nsure enough I can ping across there.\n\n55\n00:03:10.180 --> 00:03:13.760\nSo I've got communications\non my GI0/0 interface.\n\n56\n00:03:13.760 --> 00:03:18.290\nAnd I also have IPV6 configured\non this Serial0/0 interface.\n\n57\n00:03:18.290 --> 00:03:22.163\nAnd those are the two interfaces that\nI should be able to connect to EDGE2\n\n58\n00:03:22.163 --> 00:03:22.870\non, right?\n\n59\n00:03:22.870 --> 00:03:27.250\nSo, EDGE1 has that serial interface\nthat's direct as well as GI00.\n\n60\n00:03:27.250 --> 00:03:31.430\nSo I really should see two OSPF\nneighbor adjacencies for that.\n\n61\n00:03:31.430 --> 00:03:36.536\nSo if I jump back to it,\nwe can jump in here and\n\n62\n00:03:36.536 --> 00:03:40.140\ndo a show ipv6 ospf neighbor.\n\n63\n00:03:40.140 --> 00:03:43.660\nAnd when I do that, I can see I've\ngot two neighbor relationships.\n\n64\n00:03:43.660 --> 00:03:46.780\nNow, it's showing a 32-bit IP address.\n\n65\n00:03:46.780 --> 00:03:47.570\nWhy is that?\n\n66\n00:03:47.570 --> 00:03:50.830\nWell remember, with OSPF,\nwe might be routing for IPv6,\n\n67\n00:03:50.830 --> 00:03:54.930\nbut the router ID is still 32-bit, right?\n\n68\n00:03:54.930 --> 00:03:57.786\nThey never change that,\ncuz there really wasn't a need.\n\n69\n00:03:57.786 --> 00:04:02.683\n32-bit address, that gives you\nthe ability to do just billions of IPs or\n\n70\n00:04:02.683 --> 00:04:05.105\nbillions of router IDs in this case.\n\n71\n00:04:05.105 --> 00:04:09.160\nAnd then nobody's ever gonna have more\nrouters than that in an OSPF environment.\n\n72\n00:04:09.160 --> 00:04:11.810\nSo there's no sense in changing number,\nand they didn't, so\n\n73\n00:04:11.810 --> 00:04:16.070\nwe still see that 32-bit number right\nthere, which is not really an IP address.\n\n74\n00:04:16.070 --> 00:04:18.860\nSo the problem here is\nI'm troubleshooting IPv6.\n\n75\n00:04:18.860 --> 00:04:22.690\nI actually don't know the IPv4\naddress is that other router.\n\n76\n00:04:22.690 --> 00:04:26.720\nI just know that I can get to v\non my Serial0/0/0 interface and\n\n77\n00:04:26.720 --> 00:04:28.270\nmy GI0/0 interface.\n\n78\n00:04:28.270 --> 00:04:30.195\nSo I'm gonna look over\nhere to the side and\n\n79\n00:04:30.195 --> 00:04:33.110\nI can see that one of these\nconnection is on Serial0/0/1.\n\n80\n00:04:33.110 --> 00:04:34.690\nThat's gonna be to somebody else.\n\n81\n00:04:34.690 --> 00:04:38.110\nBut I do have a neighbor\nrelationship on Serial0/0/0.\n\n82\n00:04:38.110 --> 00:04:40.710\nSo as far as OSPF is concerned,\n\n83\n00:04:40.710 --> 00:04:47.550\nI am able to see NYEDGE2 right\nacross this link, so that's working.\n\n84\n00:04:47.550 --> 00:04:49.442\nBut I don't see the GI0/0 interface,\n\n85\n00:04:49.442 --> 00:04:52.090\nthe one that's supposed\nto be appearing up here.\n\n86\n00:04:52.090 --> 00:04:55.600\nI should see two neighbor relationships\nto the other side and I'm not.\n\n87\n00:04:55.600 --> 00:05:01.580\nAll right, so we fixed one issue\nin the last troubleshooting issue,\n\n88\n00:05:01.580 --> 00:05:03.530\nwhich was just reachability\nbetween these two host.\n\n89\n00:05:03.530 --> 00:05:06.980\nSo I know I've got reachability,\nI just did a ping to test that.\n\n90\n00:05:06.980 --> 00:05:09.010\nWhy isn't OSPF working?\n\n91\n00:05:09.010 --> 00:05:11.070\nWell, let's see if this is a simple one.\n\n92\n00:05:11.070 --> 00:05:15.330\nOSPF normally does a pretty good\njob of logging into the router log,\n\n93\n00:05:15.330 --> 00:05:16.790\nwhy it's not working?\n\n94\n00:05:16.790 --> 00:05:18.650\nSo if I jump in here to my config and\n\n95\n00:05:18.650 --> 00:05:23.490\njust do a show logging,\nI can look in the log and maybe I'll\n\n96\n00:05:23.490 --> 00:05:29.340\njust see an OSPF warning popping up just\nlike I'm seeing on my screen right here.\n\n97\n00:05:29.340 --> 00:05:33.630\nSo what I'm seeing are a ton\nof area mismatch warnings.\n\n98\n00:05:33.630 --> 00:05:38.191\nAnd if I look at it the interface\nis gabitEthernet0/0, for\n\n99\n00:05:38.191 --> 00:05:42.241\narea 0.0.0.0, packet area 0.0.0.1.\n\n100\n00:05:42.241 --> 00:05:45.621\nSo, I can see my interface\nis on area 0 and\n\n101\n00:05:45.621 --> 00:05:50.361\nsomebody is trying to peer with me and\nthey're in area 1.\n\n102\n00:05:50.361 --> 00:05:52.040\nAll right, so I've got a problem.\n\n103\n00:05:52.040 --> 00:05:56.150\nNow if I go back to my diagram,\nI can see right here,\n\n104\n00:05:56.150 --> 00:06:02.060\nOSPF for IPv6 is Area 0,\nI don't have an Area 1 for IPv6.\n\n105\n00:06:02.060 --> 00:06:06.640\nSo, more than likely NYEDGE2 is just\nconfigured with the wrong Area ID\n\n106\n00:06:06.640 --> 00:06:09.620\non this interface right here,\non it's GI0/0, right?\n\n107\n00:06:09.620 --> 00:06:13.250\nThat's more than likely our issue,\nand I just see that right in the logs.\n\n108\n00:06:13.250 --> 00:06:15.700\nWe could have found it other ways too,\nright?\n\n109\n00:06:15.700 --> 00:06:17.580\nIt was in my logs, that makes it easy.\n\n110\n00:06:17.580 --> 00:06:19.931\nIf it wasn't there,\nI could have done debugs, right?\n\n111\n00:06:19.931 --> 00:06:23.339\nAnd debugging IPv6 or\nSPF is just like IPv4.\n\n112\n00:06:23.339 --> 00:06:30.970\nI could have done a little, well I wanna\nlet me make sure my console logging is on.\n\n113\n00:06:30.970 --> 00:06:36.395\nAnd then we could do like debug ipv6 ospf\n\n114\n00:06:36.395 --> 00:06:41.660\nadj to troubleshoot adjacencies.\n\n115\n00:06:41.660 --> 00:06:47.200\nAnd debug ipv6 ospf packets, if I wanna\nsee the actual packets coming though.\n\n116\n00:06:47.200 --> 00:06:49.820\nAnd when I debug those packets,\nI'm gonna see if\n\n117\n00:06:49.820 --> 00:06:52.690\ncommunication's coming in form the other\nside, and I'll be able to spot it.\n\n118\n00:06:52.690 --> 00:06:55.360\nBut the problem with both of these\ncommands is just the amount of data we\n\n119\n00:06:55.360 --> 00:06:58.570\nstart getting back can be a little\nbit on the excessive side.\n\n120\n00:06:58.570 --> 00:07:00.810\nAnd so it can overwhelm your\nconnection if you're not careful.\n\n121\n00:07:00.810 --> 00:07:03.390\nAnd so I don't normally use it that much.\n\n122\n00:07:03.390 --> 00:07:05.860\nInstead the log had\nexactly what we needed.\n\n123\n00:07:05.860 --> 00:07:07.810\nBut there's those messages popping up.\n\n124\n00:07:07.810 --> 00:07:11.590\nAnd I'm just gonna do an undebug all and\nget that turned off,\n\n125\n00:07:11.590 --> 00:07:13.220\nand then we'll go fix the problem.\n\n126\n00:07:13.220 --> 00:07:17.800\nAll right, now the OSPF configuration for\nIPv6 is not that bad.\n\n127\n00:07:17.800 --> 00:07:19.630\nI'm gonna do a show running config.\n\n128\n00:07:19.630 --> 00:07:23.060\nBasically for IPv6,\nyou go into each individual interface and\n\n129\n00:07:23.060 --> 00:07:24.990\nthat's where you define the area.\n\n130\n00:07:24.990 --> 00:07:27.000\nSo when I look at my config here.\n\n131\n00:07:27.000 --> 00:07:31.091\nIf I scroll through and\nfind my gigabit interfaces.\n\n132\n00:07:31.091 --> 00:07:35.416\nHere is GI0/0 and\nI can see IPv6 OSPF 100 area 0, so\n\n133\n00:07:35.416 --> 00:07:41.090\nit's configured for area 0 and my serial\ninterface should be the same way.\n\n134\n00:07:41.090 --> 00:07:43.810\nAnd sure enough, I see that is area 0 too.\n\n135\n00:07:43.810 --> 00:07:46.940\nSo this router does not\nappear to be the issue.\n\n136\n00:07:46.940 --> 00:07:48.740\nIt's gonna be the other side,\nand I already knew that,\n\n137\n00:07:48.740 --> 00:07:50.500\nbecause of the way the log message reads.\n\n138\n00:07:50.500 --> 00:07:54.940\nThe log message is telling me I'm in\narea 0.0.0.0, they're in area 0.0.0.1.\n\n139\n00:07:54.940 --> 00:07:59.330\nI know area 0.0.0.1 doesn't exist,\nand so they're the problem.\n\n140\n00:07:59.330 --> 00:08:03.000\nSo we need to jump over to our\nother router and fix that.\n\n141\n00:08:03.000 --> 00:08:07.180\nSo if I jump over here to EDGE2,\nwe can get logged in.\n\n142\n00:08:07.180 --> 00:08:10.760\nAnd what I expect to see,\nis this guy is set for area 1.\n\n143\n00:08:10.760 --> 00:08:14.580\nAnd there's a few other things I\ncould have done to troubleshoot this.\n\n144\n00:08:14.580 --> 00:08:19.610\nLike instead of digging through the logs\nor whatever, I could have done a show ipv6\n\n145\n00:08:19.610 --> 00:08:23.720\nprotocols, which would show the dynamic\nrouting protocols for ipv6.\n\n146\n00:08:23.720 --> 00:08:27.860\nAnd right in here, I can see where\nthe serial interface is in area 0.\n\n147\n00:08:27.860 --> 00:08:30.050\nAnd the gigabit interface is in area 1.\n\n148\n00:08:30.050 --> 00:08:32.330\nSo, I could have spotted it that way too.\n\n149\n00:08:32.330 --> 00:08:35.480\nIn fact, this guy should be getting\nlog messages about the mismatch,\n\n150\n00:08:35.480 --> 00:08:36.920\njust like the other one was.\n\n151\n00:08:36.920 --> 00:08:37.900\nBut it'll be the other way around.\n\n152\n00:08:37.900 --> 00:08:40.250\nIt'll say were in area 1.\n\n153\n00:08:40.250 --> 00:08:41.180\nYeah, sure enough.\n\n154\n00:08:41.180 --> 00:08:43.060\nWe're in area 1 and they're in area 0.\n\n155\n00:08:43.060 --> 00:08:46.100\nAnd so from there we just have to figure\nout who it is that needs to be fixed.\n\n156\n00:08:47.310 --> 00:08:48.630\nSo it's gonna be this guy.\n\n157\n00:08:48.630 --> 00:08:51.639\nSo I'm gonna get into interface GI0/0.\n\n158\n00:08:51.639 --> 00:08:56.260\nWhere I'll say IPv6, ospf100.\n\n159\n00:08:56.260 --> 00:08:59.710\nOh, I'm saying 100, but I don't actually\nknow if that's the process number.\n\n160\n00:08:59.710 --> 00:09:03.360\nLet' see, the process number is 100,\nso we're okay.\n\n161\n00:09:03.360 --> 00:09:07.580\nSo process 100 area 0.\n\n162\n00:09:07.580 --> 00:09:11.880\nAnd so that's gonna move that over to\narea 0, that should solve the mismatch.\n\n163\n00:09:11.880 --> 00:09:17.210\nNow these two gigabit\ninterfaces are both in area 0.\n\n164\n00:09:17.210 --> 00:09:19.060\nAnd so an adjacency should form up.\n\n165\n00:09:19.060 --> 00:09:22.170\nAnd we can always test\nthat right from here.\n\n166\n00:09:22.170 --> 00:09:28.170\nSo, we can just do a quick\nshow ipv6 ospf nei.\n\n167\n00:09:28.170 --> 00:09:31.892\nAnd what I'm expecting to see is\na neighbor relationship on my Serial\n\n168\n00:09:31.892 --> 00:09:34.600\ninterface and\non my GigabitEthernet interface.\n\n169\n00:09:34.600 --> 00:09:38.720\nAnd just to be on the safe side, I'm gonna\ndouble check from NYEDGE1 over here.\n\n170\n00:09:38.720 --> 00:09:42.784\nAnd I can see where it's been getting\nthose error messages popping up every,\n\n171\n00:09:42.784 --> 00:09:44.230\nwhat would you say that is?\n\n172\n00:09:44.230 --> 00:09:49.030\nAbout every, I don't know,\nten seconds, nine seconds or so.\n\n173\n00:09:49.030 --> 00:09:51.870\nSo, it's been popping up a lot, but\nit's not popping up anymore, so\n\n174\n00:09:51.870 --> 00:09:53.820\nthe messages have stopped coming up.\n\n175\n00:09:53.820 --> 00:09:57.130\nAnd if I do a show ipv6 ospf nei.\n\n176\n00:09:57.130 --> 00:10:02.870\nNow I've got three adjacencies,\nincluding the one on GigabitEthernet0/0.\n\n177\n00:10:02.870 --> 00:10:04.960\nSo, that fixed the problem.\n\n178\n00:10:04.960 --> 00:10:07.510\nThis another one of those, where we didn't\nhave to do a whole heck of a lot of\n\n179\n00:10:07.510 --> 00:10:10.860\ntroubleshooting here, because the log\nmessage was extremely detailed.\n\n180\n00:10:10.860 --> 00:10:13.360\nIt told us exactly what\nthe problem was and\n\n181\n00:10:13.360 --> 00:10:15.980\nwe just had to figure out who was\nthe one that needed to be fixed.\n\n182\n00:10:15.980 --> 00:10:17.520\nSo, that takes care of this one.\n\n183\n00:10:17.520 --> 00:10:21.240\nAgain, OSPF, there's a lot of stuff that\nhas to match for an adjacency to build up.\n\n184\n00:10:21.240 --> 00:10:27.080\nThe area number, the stub flag, the hello\nand dead timer intervals, authentication.\n\n185\n00:10:27.080 --> 00:10:29.530\nThose are all different\nthings that have to match up.\n\n186\n00:10:29.530 --> 00:10:32.869\nAnd if something like the area number\nis wrong, they're not gonna match,\n\n187\n00:10:32.869 --> 00:10:36.270\nthey're not gonna build an adjacency and\nwe'll see what we had right here.\n\n188\n00:10:36.270 --> 00:10:40.150\nWell that wraps this one up stay tuned,\nwe're gonna move into issue five next.\n\n189\n00:10:42.290 --> 00:10:48.349\n[MUSIC]\n\n",
          "vimeoId": "151031000"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #5` from set #9. The trouble ticket states that \"The route for NYWAN1’s lopback 6 interface is not being propagated throughout the network, but loopback 16 and 26 are \"",
          "length": "602",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-9-5-set_9_issue_5-121015-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-9-5-set_9_issue_5-121015-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-9-5-set_9_issue_5-121015-1-sm.jpg",
          "title": "Set 9 Issue 5",
          "transcript": "WEBVTT\n\n1\n00:00:00.012 --> 00:00:09.205\n[SOUND]\nAll right,\n\n2\n00:00:09.205 --> 00:00:13.350\nit's that time again for another Cisco\ntroubleshooting segment here on ITPro TV.\n\n3\n00:00:13.350 --> 00:00:15.100\nWe're jumping into Set 9,\n\n4\n00:00:15.100 --> 00:00:19.080\nIssue 5, and looks like we've got\nanother IPv6 routing issue on this one.\n\n5\n00:00:19.080 --> 00:00:21.110\nThe troubleshooting\nticket reads like this.\n\n6\n00:00:21.110 --> 00:00:26.396\nIt says, the route for\nNYWAN1's loopback6 interface is not\n\n7\n00:00:26.396 --> 00:00:32.793\nbeing propagated throughout the network,\nbut loopback16 and 26 are.\n\n8\n00:00:32.793 --> 00:00:33.340\nWell, isn't that great.\nSo,\n\n9\n00:00:33.340 --> 00:00:36.510\nlooks like we got three loopback\ninterfaces on this one router.\n\n10\n00:00:36.510 --> 00:00:41.040\nThey're supposed to be advertised\nout into, did it say a protocol?\n\n11\n00:00:41.040 --> 00:00:42.300\nIt's not saying a protocol,\n\n12\n00:00:42.300 --> 00:00:45.130\nbut I'm pretty sure it's gonna\nbe ospf because of our diagram.\n\n13\n00:00:45.130 --> 00:00:49.740\nAnd for whatever reason,\ntwo of the loop backs are showing up.\n\n14\n00:00:49.740 --> 00:00:51.180\nOne of them is not.\n\n15\n00:00:51.180 --> 00:00:52.670\nWe just need to find out why.\n\n16\n00:00:52.670 --> 00:00:55.120\nUsually problems like this aren't that\nhard because all you have to do is look at\n\n17\n00:00:55.120 --> 00:00:58.320\nthe ones that are working and see what's\ndifferent on the one that isn't working.\n\n18\n00:00:58.320 --> 00:01:01.900\nBut there could be things like\nroute maps in place, prefix lists.\n\n19\n00:01:01.900 --> 00:01:03.990\nThere could be bad route summarization.\n\n20\n00:01:03.990 --> 00:01:05.350\nThey could all stop this.\n\n21\n00:01:05.350 --> 00:01:10.750\nAlso, think about how a connected\ninterface gets into routing protocol.\n\n22\n00:01:10.750 --> 00:01:12.240\nThere's really only two ways.\n\n23\n00:01:12.240 --> 00:01:16.480\nEither, one, you put that connected\ninterface into the routing protocol.\n\n24\n00:01:16.480 --> 00:01:20.770\nOr two, you redistribute connected\ninterfaces into the routing protocol.\n\n25\n00:01:20.770 --> 00:01:22.290\nSo I'll need to look for\nthose two things also.\n\n26\n00:01:22.290 --> 00:01:24.620\nThose are all some of the different\ntargets I wanna look for\n\n27\n00:01:24.620 --> 00:01:26.440\nwhen I start troubleshooting this.\n\n28\n00:01:26.440 --> 00:01:30.280\nBut before I dive in, let's just\nstart with our old network topology.\n\n29\n00:01:30.280 --> 00:01:32.750\nI'm gonna bring up the diagram here.\n\n30\n00:01:32.750 --> 00:01:35.360\nAnd the router in\nquestion today is NYWAN1,\n\n31\n00:01:35.360 --> 00:01:37.740\nway over here on the edge of our network.\n\n32\n00:01:37.740 --> 00:01:42.695\nAnd NYWAN1 only has one\nconnection inside of our network,\n\n33\n00:01:42.695 --> 00:01:47.530\nSer0/1/0, and it's in IPv6 OSPF Area 0.\n\n34\n00:01:47.530 --> 00:01:53.380\nSo it's connected interfaces are being\nadvertised into OSPF Area 0 and\n\n35\n00:01:53.380 --> 00:01:56.180\ntwo out of the three are showing up and\ntwo out of three is not bad.\n\n36\n00:01:56.180 --> 00:01:58.360\nMaybe we just call it a day\nright there and end the ticket.\n\n37\n00:01:58.360 --> 00:02:00.310\nBut I bet we can get that third one up and\ngoing.\n\n38\n00:02:00.310 --> 00:02:01.220\nSo let's go take a look at it.\n\n39\n00:02:01.220 --> 00:02:06.080\nI'm gonna jump over to NYWAN1 and\nsee what we've got going on.\n\n40\n00:02:06.080 --> 00:02:09.360\nThe first thing I wanna do is I just\nwanna see what addresses those interfaces\n\n41\n00:02:09.360 --> 00:02:11.200\nare using so I can recognize them.\n\n42\n00:02:11.200 --> 00:02:15.477\nSo I'm gonna do a show\nIPv6 interface brief.\n\n43\n00:02:17.893 --> 00:02:20.380\nAnd I'm gonna look for\nthose loopback interfaces.\n\n44\n00:02:20.380 --> 00:02:25.440\nIt was Loopback6, 16, and 26,\nthat's these guys right down here.\n\n45\n00:02:25.440 --> 00:02:29.183\nAnd so looking at those interfaces,\n\n46\n00:02:29.183 --> 00:02:34.505\nwe've got a couple of different networks,\nright?\n\n47\n00:02:34.505 --> 00:02:37.256\nWe've got the 2001:600::1 and\n\n48\n00:02:37.256 --> 00:02:42.670\n2001:606:606::6 these are just\ngreat numbers aren't they?\n\n49\n00:02:42.670 --> 00:02:48.647\nOn Loopback6, so those are a couple of\ninterfaces there or addresses there.\n\n50\n00:02:48.647 --> 00:02:54.550\nOn Loopback16 and on Loopback26\nwe've got 2001:1600 and :2600.\n\n51\n00:02:54.550 --> 00:02:59.140\nSo, supposedly these two are making\nit throughout the network.\n\n52\n00:02:59.140 --> 00:03:00.340\nAnd the others aren't.\n\n53\n00:03:00.340 --> 00:03:01.610\nLet's go verify that.\n\n54\n00:03:01.610 --> 00:03:03.890\nI'm gonna jump over to,\nlet's see, who's next in line?\n\n55\n00:03:03.890 --> 00:03:08.060\nThis guy should be neighbored up with,\nwe're neighboring between NYWAN1 and\n\n56\n00:03:08.060 --> 00:03:10.690\nNYEDGE1, so\nlet's go see what NYEDGE1 is getting.\n\n57\n00:03:10.690 --> 00:03:15.069\nThat's a pretty good spot to look and\nsee what our network looks like.\n\n58\n00:03:15.069 --> 00:03:18.501\nSo, I'm just going to do\na show ipv6 route and\n\n59\n00:03:18.501 --> 00:03:23.429\nI'll filter that down to ospf,\nI just want to see ospf routes, and\n\n60\n00:03:23.429 --> 00:03:29.770\nI can see sure enough I got 2001:1600 and\n2001:2600, all right.\n\n61\n00:03:29.770 --> 00:03:32.310\nNow there's a little bit more\ninformation that I can get from here.\n\n62\n00:03:32.310 --> 00:03:34.920\nFor example,\nthese guys show up as OI routes.\n\n63\n00:03:36.290 --> 00:03:40.070\nOkay, and\nif you look up here in your legend,\n\n64\n00:03:40.070 --> 00:03:46.040\nyou'll see like O is just\nan OSPF intra area route.\n\n65\n00:03:46.040 --> 00:03:50.360\nIn other words this came from another\nrouter that's in the same area as me and\n\n66\n00:03:50.360 --> 00:03:54.210\nthere's OI which is inter area.\n\n67\n00:03:54.210 --> 00:03:59.130\nThis came from an OSPF router in\na different area than what I'm in.\n\n68\n00:03:59.130 --> 00:04:01.810\nBut then right beside that,\nyou'll see OU1 and OU2.\n\n69\n00:04:01.810 --> 00:04:03.320\nThose are externals.\n\n70\n00:04:03.320 --> 00:04:05.490\nAnd I'm not seeing OE1 or\n\n71\n00:04:05.490 --> 00:04:10.320\nOE2, so that means the odds are, I'm not\ndealing with a redistribution issue here.\n\n72\n00:04:10.320 --> 00:04:12.780\nCuz, if those connected routes\nare being redistributed,\n\n73\n00:04:12.780 --> 00:04:15.590\nthese would show up as OE1 or OE2s, right?\n\n74\n00:04:15.590 --> 00:04:17.800\nCuz that's what an external\nroute would show up as.\n\n75\n00:04:17.800 --> 00:04:19.220\nWhat they're showing is OIs.\n\n76\n00:04:19.220 --> 00:04:23.530\nSo, that means that those loopback\ninterfaces are directly added into OSPF\n\n77\n00:04:23.530 --> 00:04:26.590\nthey're just in a different area\nthan what NYEDGE1 happens to be in.\n\n78\n00:04:26.590 --> 00:04:29.060\nAll right, so\nthat's not necessarily a bad thing.\n\n79\n00:04:29.060 --> 00:04:31.100\nAlthough I guess you could\nsay it's a bad thing.\n\n80\n00:04:31.100 --> 00:04:36.940\nIf I look at my topology\nIPV6 OSPF area zero is on the map.\n\n81\n00:04:36.940 --> 00:04:39.140\nI don't have any other areas on the map.\n\n82\n00:04:39.140 --> 00:04:39.640\nRight?\n\n83\n00:04:39.640 --> 00:04:42.330\nSo everybody should be in Area 0.\n\n84\n00:04:42.330 --> 00:04:47.090\nSo that might be part of my problem too is\nif these are in some kind of outside area.\n\n85\n00:04:47.090 --> 00:04:48.980\nBut it could just be\nan undocumented area too.\n\n86\n00:04:48.980 --> 00:04:50.350\nThat's another possibility.\n\n87\n00:04:50.350 --> 00:04:53.330\nThe troubleshooting ticket at the end\nof the day didn't really harp on areas.\n\n88\n00:04:53.330 --> 00:04:56.420\nIt really just said,\nwe need these routes to propagate out.\n\n89\n00:04:56.420 --> 00:04:59.550\nAnd those two interfaces\nare already propagating out.\n\n90\n00:04:59.550 --> 00:05:02.070\nSo let's just assume that those\ntwo interfaces are right.\n\n91\n00:05:02.070 --> 00:05:05.410\nThose two networks are okay so\nwhatever area they're set for,\n\n92\n00:05:05.410 --> 00:05:07.910\nwe just need to get that working for\nthe third loop back.\n\n93\n00:05:07.910 --> 00:05:09.100\nLet's go look at this third loop back.\n\n94\n00:05:09.100 --> 00:05:11.270\nWe haven't actually seen much about it,\nhave we?\n\n95\n00:05:11.270 --> 00:05:12.360\nI'm gonna go to NYWAN1,\n\n96\n00:05:12.360 --> 00:05:17.190\nand I wanna get a better handle\non how this network is set up.\n\n97\n00:05:17.190 --> 00:05:19.410\nSo I'm gonna do a show ipv6 protocols,\n\n98\n00:05:19.410 --> 00:05:23.710\nwhich will give me a nice little\nsummary of how SPF is set up.\n\n99\n00:05:23.710 --> 00:05:26.920\nAnd I can see here that we're\nrunning ospf process ID 100.\n\n100\n00:05:26.920 --> 00:05:32.860\nI've got a router ID and\nI've got two interfaces in a normal area.\n\n101\n00:05:32.860 --> 00:05:34.438\nNo stubs and no nssas.\n\n102\n00:05:34.438 --> 00:05:40.320\nOkay, right there, I only see two\ninterfaces in the normal, I should\n\n103\n00:05:40.320 --> 00:05:44.020\nsee three, I should have those three loop\nbacks and that's not even counting like\n\n104\n00:05:44.020 --> 00:05:48.670\nthe serial interface, right, which in\ntheory should get us up to four right?\n\n105\n00:05:48.670 --> 00:05:51.570\nBut if they're in the same\narea that will come down, and\n\n106\n00:05:51.570 --> 00:05:54.500\nI do have two normal area's here.\n\n107\n00:05:54.500 --> 00:05:57.630\nSo, I assume that I've got more than\none interface in the same area.\n\n108\n00:05:57.630 --> 00:06:01.700\nLooking at it here I've got\nthe serial interface in area zero and\n\n109\n00:06:01.700 --> 00:06:03.560\nsure enough those\nloopbacks are in area one.\n\n110\n00:06:03.560 --> 00:06:08.310\nSo I've only got two areas and that's\nwhy my number of areas is up to two.\n\n111\n00:06:08.310 --> 00:06:10.140\nSerial 010 is in Area 0.\n\n112\n00:06:10.140 --> 00:06:12.470\nLoopback 16, Loopback 26, are in Area 1.\n\n113\n00:06:12.470 --> 00:06:16.090\nLoopback 6, is not here.\n\n114\n00:06:16.090 --> 00:06:19.810\nIt should be in Area 1 we presume,\nbut it isn't.\n\n115\n00:06:19.810 --> 00:06:21.830\nOkay, so what does that mean?\n\n116\n00:06:21.830 --> 00:06:23.750\nWell, the interface could be shut down.\n\n117\n00:06:23.750 --> 00:06:25.710\nThe interface could be not configured.\n\n118\n00:06:25.710 --> 00:06:27.110\nThe interface might not exist.\n\n119\n00:06:27.110 --> 00:06:29.850\nThere's all sorts of stuff like that but\nI know the interface existed.\n\n120\n00:06:29.850 --> 00:06:31.990\nThen I can do a show run.\n\n121\n00:06:31.990 --> 00:06:37.110\nFor interface lo6, and\npull it up, and see where it is.\n\n122\n00:06:37.110 --> 00:06:38.570\nNow, I do have an ospf command here.\n\n123\n00:06:38.570 --> 00:06:41.840\nIpv6 ospf network point to point.\n\n124\n00:06:41.840 --> 00:06:45.910\nBut I don't have a command\nputting it in an area.\n\n125\n00:06:45.910 --> 00:06:48.840\nRemember, when you configure ipv6 for\nospf.\n\n126\n00:06:48.840 --> 00:06:50.770\nit's a little bit different that IPv4.\n\n127\n00:06:50.770 --> 00:06:55.780\nIn IPv4, I can add an interface to an area\nright here from the interface if I want.\n\n128\n00:06:55.780 --> 00:07:00.760\nI can say IP OSPF and a process number,\narea, and an area number.\n\n129\n00:07:00.760 --> 00:07:02.860\nAnd then I'll put that\ninterface in the area.\n\n130\n00:07:02.860 --> 00:07:06.400\nBut in IPv4 I can also do\nit in OSPF's configuration.\n\n131\n00:07:06.400 --> 00:07:08.490\nRight, but IPV6 you can't.\n\n132\n00:07:08.490 --> 00:07:10.390\nYou have to do it on the interface and\n\n133\n00:07:10.390 --> 00:07:13.120\nlooking at this interface\nit doesn't have it.\n\n134\n00:07:13.120 --> 00:07:15.740\nSo this interface is actually\nnot participating in OSPF.\n\n135\n00:07:15.740 --> 00:07:17.790\nThat's it, plain and simple.\n\n136\n00:07:17.790 --> 00:07:20.240\nIt's not being advertised because\nit's not participating in it.\n\n137\n00:07:20.240 --> 00:07:24.600\nNow it could be being redistributed, but\nI didn't see any redistributed routes so\n\n138\n00:07:24.600 --> 00:07:25.940\nI don't think that's the case.\n\n139\n00:07:25.940 --> 00:07:30.240\nBut let's do a show run and\nlook for the OSPF section and\n\n140\n00:07:30.240 --> 00:07:33.290\nwe'll see if were doing any\nredistribution and we're not.\n\n141\n00:07:33.290 --> 00:07:35.540\nI just have IPV6 router OSPF 100.\n\n142\n00:07:35.540 --> 00:07:37.400\nAnd that's it.\n\n143\n00:07:37.400 --> 00:07:38.840\nAnd nothing else attached to that.\n\n144\n00:07:38.840 --> 00:07:40.530\nRight?\nIf we do a show run and\n\n145\n00:07:40.530 --> 00:07:46.000\nbegin with that line you'll see\nthat that config is pretty simple.\n\n146\n00:07:46.000 --> 00:07:48.000\nAnd it usually is with IPV6.\n\n147\n00:07:48.000 --> 00:07:50.450\nYou might have a static\nrouter ID set here, but\n\n148\n00:07:50.450 --> 00:07:54.050\notherwise we don't really set much\nunder the routing process itself.\n\n149\n00:07:54.050 --> 00:07:56.080\nStatic router IDs and redistributions.\n\n150\n00:07:56.080 --> 00:07:59.170\nThat's kind of what will show up here,\nmaybe route maps for neighbors.\n\n151\n00:07:59.170 --> 00:08:03.310\nBut, if it's empty like that, everything\nelse boils down to the interface.\n\n152\n00:08:03.310 --> 00:08:08.120\nAnd if I look at loopback 16 or\nloopback 26,\n\n153\n00:08:08.120 --> 00:08:13.020\nsee how they both have an area\nassignment on the interface?\n\n154\n00:08:13.020 --> 00:08:16.950\nBut when I looked at Loopback6, it didn't.\n\n155\n00:08:16.950 --> 00:08:21.450\nAnd so if we add that interface, into,\n\n156\n00:08:21.450 --> 00:08:25.660\nwhat was it OSPF100, yep.\n\n157\n00:08:25.660 --> 00:08:31.267\nSo I need to say IPv6 OSPF100\n\n158\n00:08:31.267 --> 00:08:35.610\narea 1 that's gonna move it into area\n1 just like the other loopbacks and\n\n159\n00:08:35.610 --> 00:08:37.540\nthat should bring it into\nthe ospf environment.\n\n160\n00:08:37.540 --> 00:08:40.190\nIt should start getting\nadvertised across the network and\n\n161\n00:08:40.190 --> 00:08:41.020\nthat should solve our problem.\n\n162\n00:08:41.020 --> 00:08:45.850\nSo somebody just left the interface\nout and that's kinda that.\n\n163\n00:08:45.850 --> 00:08:49.210\nSo I'm gonna do a show ipv6 protocols.\n\n164\n00:08:49.210 --> 00:08:52.990\nAnd let's verify, we should still have two\nareas, right, I didn't add any more areas.\n\n165\n00:08:52.990 --> 00:08:56.540\nBut now I can see I've got\nthree interfaces in Area 1.\n\n166\n00:08:56.540 --> 00:09:00.830\nAnd, if I jump over to NYEDGE 1.\n\n167\n00:09:00.830 --> 00:09:05.060\nBefore, it was only\nshowing those two routes.\n\n168\n00:09:05.060 --> 00:09:09.300\nNow, now we have four.\n\n169\n00:09:09.300 --> 00:09:09.850\nRight?\n\n170\n00:09:09.850 --> 00:09:15.240\nThere was the 2001:600 and the 2001:606\nwhich are both now showing up.\n\n171\n00:09:15.240 --> 00:09:18.600\nAs well as the 1600 and\n2600 that were there previously.\n\n172\n00:09:18.600 --> 00:09:23.510\nAnd they all show up as OI, so now it's\nnice and normal and propagated out.\n\n173\n00:09:23.510 --> 00:09:26.520\nSo the ticket, so they weren't\npropagating out, we found out why,\n\n174\n00:09:26.520 --> 00:09:29.200\nthat interface wasn't\nadded to the OSPF process.\n\n175\n00:09:29.200 --> 00:09:33.260\nOnce we did that, it's now part of\narea one, and it gets advertised out.\n\n176\n00:09:33.260 --> 00:09:34.750\nThat really resolves that one.\n\n177\n00:09:34.750 --> 00:09:37.640\nThe other option would've been I\ncould've redistributed it in but\n\n178\n00:09:37.640 --> 00:09:39.860\nsince the other two interfaces\nweren't redistributed,\n\n179\n00:09:39.860 --> 00:09:42.050\nwe just kinda followed what\nthey were already doing.\n\n180\n00:09:42.050 --> 00:09:43.510\nThey probably had a reason for that.\n\n181\n00:09:43.510 --> 00:09:46.550\nBut, again,\nmore than one solution to a problem.\n\n182\n00:09:46.550 --> 00:09:48.490\nThis one was probably\nthe path of least resistance.\n\n183\n00:09:48.490 --> 00:09:49.890\nBut that one wraps this up.\n\n184\n00:09:49.890 --> 00:09:51.040\nHope you guys enjoyed it.\n\n185\n00:09:51.040 --> 00:09:53.780\nStay tuned,\nwe've got more troubleshooting issues.\n\n186\n00:09:53.780 --> 00:09:59.200\nComing up next.\n\n187\n00:10:00.813 --> 00:10:01.706\n[SOUND]\n\n",
          "vimeoId": "151031001"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #6` from set #9. The trouble ticket states that \"You are unable to ping loopback 6 on NYWAN1 from NYEDGE2, you can ping the other two loopback interfaces, but not this one \"",
          "length": "1009",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-9-6-set_9_issue_6-121015-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-9-6-set_9_issue_6-121015-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-9-6-set_9_issue_6-121015-1-sm.jpg",
          "title": "Set 9 Issue 6",
          "transcript": "WEBVTT\n\n1\n00:00:00.038 --> 00:00:04.998\n[MUSIC]\n\n2\n00:00:08.418 --> 00:00:12.773\nAll right, welcome back for the final\nCisco troubleshooting ticket in Set 9,\n\n3\n00:00:12.773 --> 00:00:17.460\nwe're on Set 9 Issue 6, and we've got some\nmore reachability issues to deal with.\n\n4\n00:00:17.460 --> 00:00:24.920\nThis ticket reads, you are unable to\nping loopback 6 on NYWAN1 from NYEDGE2.\n\n5\n00:00:24.920 --> 00:00:29.040\nYou can ping the other two loopback\ninterfaces, but not this one.\n\n6\n00:00:29.040 --> 00:00:34.480\nWell, if you remember from Issue 5, we\nhad three loopback interfaces on NYWAN1,\n\n7\n00:00:34.480 --> 00:00:37.250\ntwo of them were showing up on OSPF,\none wasn't.\n\n8\n00:00:37.250 --> 00:00:39.160\nWell, we fixed that, so\nall three are in OSPF.\n\n9\n00:00:39.160 --> 00:00:43.200\nNow they're saying if we go to one\nof our EDGE routers and we try and\n\n10\n00:00:43.200 --> 00:00:46.720\nping the three addresses,\ntwo of them work and one of them doesn't,\n\n11\n00:00:46.720 --> 00:00:48.720\nwhich does seem a little odd.\n\n12\n00:00:48.720 --> 00:00:51.580\nSo let's go and\nsee if we can't verify that, all right?\n\n13\n00:00:51.580 --> 00:00:52.890\nNow I wanna start on my topologies, so\n\n14\n00:00:52.890 --> 00:00:56.010\nwe can make sure we understand\nthe path that we're going through.\n\n15\n00:00:56.010 --> 00:00:59.530\nIn that last troubleshooting ticket, the\nthree loopback interfaces were right here\n\n16\n00:00:59.530 --> 00:01:05.800\non NYWAN1 and they were advertising out,\nand I did my verification here on NYEDGE1.\n\n17\n00:01:05.800 --> 00:01:08.130\nI never actually looked at any\nof the other routers out there,\n\n18\n00:01:08.130 --> 00:01:11.920\nI just used that one as my test and\nI saw the routes show up.\n\n19\n00:01:11.920 --> 00:01:15.420\nWell, they're saying,\nif I go all the way over here to NYEDGE2\n\n20\n00:01:16.610 --> 00:01:19.800\nthat I can ping two of the networks and\nnot the third one.\n\n21\n00:01:19.800 --> 00:01:22.530\nThey actually don't tell me, although\nthey tell me it's loopback six, so\n\n22\n00:01:22.530 --> 00:01:25.150\nI at least know the IP range for it.\n\n23\n00:01:25.150 --> 00:01:28.180\nIf you didn't watch the last issue, then\nyou might not know those IP ranges, so\n\n24\n00:01:28.180 --> 00:01:29.510\nlet's jump over to NYWAN1 and\n\n25\n00:01:29.510 --> 00:01:33.480\nsee those real quick before we go\ninto the rest of the troubleshooting.\n\n26\n00:01:33.480 --> 00:01:37.572\nIn NYLAN1, there's three loopback\ninterfaces that they're talking about,\n\n27\n00:01:37.572 --> 00:01:41.380\nloopback 6, 16, and 26.\n\n28\n00:01:41.380 --> 00:01:45.660\nIf I do a show IPV6 interface brief and\n\n29\n00:01:45.660 --> 00:01:50.938\nlook at the interfaces, here we can\nsee loopback 6, 16, and 26, all right?\n\n30\n00:01:50.938 --> 00:01:56.520\nThese two down here were the ones\nthat were working fine before,\n\n31\n00:01:56.520 --> 00:02:00.750\nand apparently they're\nstill working just fine.\n\n32\n00:02:00.750 --> 00:02:03.410\nWe should be able to ping 2001:1600::1 and\n2001:2600::1, but\n\n33\n00:02:03.410 --> 00:02:06.880\nthen we've got Loopback6 up here, and\n\n34\n00:02:06.880 --> 00:02:12.630\nit actually has two addresses and they're\ntelling me that we can't ping those.\n\n35\n00:02:12.630 --> 00:02:13.610\nThey should show up in OSPF.\n\n36\n00:02:13.610 --> 00:02:17.100\nThey did when we fixed it at the end\nof the last troubleshooting problem,\n\n37\n00:02:17.100 --> 00:02:17.810\nbut who knows?\n\n38\n00:02:17.810 --> 00:02:22.600\nMaybe they don't, so let's jump over\nto NYEDGE2 and see what we've got.\n\n39\n00:02:22.600 --> 00:02:26.180\nThe first thing I wanna verify, just\nbecause I didn't do it on the last ticket,\n\n40\n00:02:26.180 --> 00:02:29.370\nwas whether or not we even learned\nthe routes on this one, right?\n\n41\n00:02:29.370 --> 00:02:33.290\nIt may not know those routes yet, so\nwe just need to get that verified, so\n\n42\n00:02:33.290 --> 00:02:40.870\nI'll do a show ipv6 route, and\nI'm just gonna filter down to ospf.\n\n43\n00:02:40.870 --> 00:02:45.610\nThat's all I need to see, and, well,\nactually they're all showing up.\n\n44\n00:02:45.610 --> 00:02:49.870\nI've got 2001:600, 2001:606, 2001:1600,\nand 2001:2600, there they are.\n\n45\n00:02:49.870 --> 00:02:54.250\nThose are the three loopback interfaces,\n\n46\n00:02:54.250 --> 00:02:58.270\nthese are Loopback 16 and\n26, and these are Loopback6.\n\n47\n00:02:58.270 --> 00:03:02.410\nAll right, so we've got routes and the\nroutes all go to the same place, right?\n\n48\n00:03:02.410 --> 00:03:06.470\nSee the destination address here,\nit all ends in D3BO,\n\n49\n00:03:06.470 --> 00:03:10.220\nall four of those D3BO,\nall out Gigabit Ethernet 0/0.\n\n50\n00:03:10.220 --> 00:03:13.010\nIf one route's good, any of the other\nroutes should be good, too,\n\n51\n00:03:13.010 --> 00:03:15.500\nso I bet we're not dealing\nwith a routing problem.\n\n52\n00:03:15.500 --> 00:03:16.920\nWe could, but\n\n53\n00:03:16.920 --> 00:03:20.270\nwe're probably more than likely dealing\nwith something a little bit different.\n\n54\n00:03:20.270 --> 00:03:23.260\nMaybe it's unidirectional routing, maybe\nthe other side doesn't know how to get\n\n55\n00:03:23.260 --> 00:03:26.670\nback to us, but I haven't looked at\nRIP range yet, that could be it.\n\n56\n00:03:26.670 --> 00:03:28.590\nThere could be access lists or\n\n57\n00:03:28.590 --> 00:03:31.910\nVLAN ACLs in between,\nthere could be VLAN issues, right?\n\n58\n00:03:31.910 --> 00:03:34.360\nWe might be learning these routes but\nwe're on the wrong VLAN.\n\n59\n00:03:34.360 --> 00:03:36.380\nThere's all sorts of stuff\nthat it could be, so\n\n60\n00:03:36.380 --> 00:03:38.640\nlet's see if we can't figure that out.\n\n61\n00:03:38.640 --> 00:03:42.080\nNow I don't wanna just trust that\nthese pings won't go through, so\n\n62\n00:03:42.080 --> 00:03:43.810\nI'm gonna do some quick tests.\n\n63\n00:03:43.810 --> 00:03:48.610\nI'm gonna try and\nping 2001:600::1, that's one of\n\n64\n00:03:48.610 --> 00:03:55.080\nthe interfaces that are present on\nLoopback6, and I don't get there, right?\n\n65\n00:03:55.080 --> 00:03:58.440\nSee, I get a bunch of As in return so\nI'm not getting there, and\n\n66\n00:03:58.440 --> 00:04:08.520\nif I tried 2001:606:606::6,\nI don't get there either, right?\n\n67\n00:04:08.520 --> 00:04:10.070\nAnd those were the two IPs.\n\n68\n00:04:10.070 --> 00:04:14.600\nLet's just verify I still got that right,\nand yes, those are the two IPs that I\n\n69\n00:04:14.600 --> 00:04:19.110\njust tried to ping right there and\nI didn't get to either one of them.\n\n70\n00:04:19.110 --> 00:04:23.860\nSo then, I'm going to test the two that\n\n71\n00:04:23.860 --> 00:04:28.630\nthey're telling me are working.\n\n72\n00:04:28.630 --> 00:04:35.290\nSo I wanna ping 2001:1600::1, and I wanna\nping 2001:2600::1, and I get there, too.\n\n73\n00:04:35.290 --> 00:04:38.700\nAll right, well,\nI'm getting to some of the networks,\n\n74\n00:04:38.700 --> 00:04:40.660\nI'm not getting to others, right?\n\n75\n00:04:40.660 --> 00:04:44.660\nSo because they're different networks\nthis could be a routing issue, right?\n\n76\n00:04:44.660 --> 00:04:46.600\nI'm not just not getting\nrouted to the right place, or\n\n77\n00:04:46.600 --> 00:04:50.220\nit could be something else, so\nlet's do a little more troubleshooting.\n\n78\n00:04:50.220 --> 00:04:53.710\nI need to understand the path that\nI'm taking to get to these networks.\n\n79\n00:04:53.710 --> 00:04:59.000\nWhen I look at my diagram, I know that\nI have a route that sends me to gi00.\n\n80\n00:04:59.000 --> 00:05:04.340\nIt sends me out this route, and these\nswitches down here are just doing layer 2.\n\n81\n00:05:04.340 --> 00:05:07.100\nWell, actually we do have an OSPF\narea down there, but it's IPv4,\n\n82\n00:05:07.100 --> 00:05:11.880\nso these switches down here aren't\nrunning IPv6 in this model, and so\n\n83\n00:05:11.880 --> 00:05:15.910\nI should be jumping\nstraight over to NYEDGE1.\n\n84\n00:05:15.910 --> 00:05:20.030\nFrom there, going down to\nOSPF Area 0 down to NYWAN1, so we\n\n85\n00:05:20.030 --> 00:05:24.240\nshould just be hopping right across these\nlinks, but let me verify that real quick.\n\n86\n00:05:24.240 --> 00:05:28.780\nOn NYEDGE2, I saw on the routing\ntable who my next hop was, and\n\n87\n00:05:28.780 --> 00:05:32.330\nit was this link local\naddress that ended in D3B0.\n\n88\n00:05:32.330 --> 00:05:37.150\nI need to verify that that is NYEDGE1,\nso I know my path, and\n\n89\n00:05:37.150 --> 00:05:39.412\nI'm gonna go to NYEDGE1 and\nverify that right here.\n\n90\n00:05:39.412 --> 00:05:43.920\nWe'll just do a show\n\n91\n00:05:44.920 --> 00:05:51.380\nipv6 int brief, and when I look at\nthe Serial Interface, it ends in D3B0.\n\n92\n00:05:51.380 --> 00:05:55.612\nWhen I look at the GigabitEthernet\ninterface, it ends in D3B0.\n\n93\n00:05:55.612 --> 00:05:57.980\nAll right, I got myself into\na little bit of trouble here, so\n\n94\n00:05:57.980 --> 00:06:03.370\none of the problems we have with\nIPV6 is it can do what's called a,\n\n95\n00:06:03.370 --> 00:06:05.140\nwell, they used to call anycast addresses.\n\n96\n00:06:05.140 --> 00:06:09.080\nNow they're just global addresses,\nwhere you can have one address\n\n97\n00:06:09.080 --> 00:06:13.730\nyou answer to on more than one interface,\nso when I look at this,\n\n98\n00:06:13.730 --> 00:06:17.680\nI've got that same link local address\non every one of these interfaces.\n\n99\n00:06:17.680 --> 00:06:20.830\nThe address doesn't actually\ntell me where I went, all right?\n\n100\n00:06:20.830 --> 00:06:25.910\nBut I do know, I know because when I\nlooked at my routing table back here.\n\n101\n00:06:25.910 --> 00:06:32.220\nThe next hop isn't just the address,\nit's also the interface, okay?\n\n102\n00:06:32.220 --> 00:06:35.730\nAnd they do that because they know this\naddress might be used on more than one\n\n103\n00:06:35.730 --> 00:06:37.650\ninterface, exactly as it is now.\n\n104\n00:06:37.650 --> 00:06:40.180\nAnd I'm going out my\nGigabitEthernet interface, right?\n\n105\n00:06:40.180 --> 00:06:45.820\nAnd so what that tells me is I'm\nnot crossing this serial link.\n\n106\n00:06:45.820 --> 00:06:48.220\nAnd I'm definitely not leaving\nthe Gi0/0 interface and\n\n107\n00:06:48.220 --> 00:06:50.480\nthen magically coming in\nthe serial interface here.\n\n108\n00:06:50.480 --> 00:06:53.510\nSo, I know the traffic\nis going down this way.\n\n109\n00:06:53.510 --> 00:06:58.980\nAround here, around here, back up to\nEDGE1 and then over to the destination.\n\n110\n00:06:58.980 --> 00:07:00.920\nOkay, so\nthat's the path that I'm following.\n\n111\n00:07:00.920 --> 00:07:05.360\nSo there could be an access\ncontrol list or a VLAN ACL.\n\n112\n00:07:05.360 --> 00:07:09.310\nAnywhere along that path,\nthat's stopping me.\n\n113\n00:07:09.310 --> 00:07:09.970\nOkay?\n\n114\n00:07:09.970 --> 00:07:13.000\nWell, these switches down here,\nI'm pretty sure they're not routing,\n\n115\n00:07:13.000 --> 00:07:17.450\nbecause I'm on a sub-net,\nthat's the same sub-net as over here.\n\n116\n00:07:17.450 --> 00:07:19.530\nSo there is probably a VLAN in the mix, so\n\n117\n00:07:19.530 --> 00:07:24.910\nI'm crossing a VLAN to get to the other\nside, and that is actually working.\n\n118\n00:07:24.910 --> 00:07:27.650\nI know that's working because\nwhen I did the pings for\n\n119\n00:07:27.650 --> 00:07:31.540\nthe other two subnets they went through,\nright, and they went over that same link.\n\n120\n00:07:31.540 --> 00:07:34.700\nSo if I'm on a VLAN I know\nI'm on the right VLAN.\n\n121\n00:07:34.700 --> 00:07:37.220\nBut what I don't know is\nif there's a VLAN ACL\n\n122\n00:07:37.220 --> 00:07:38.650\nbecause there could be\none that's blocking.\n\n123\n00:07:38.650 --> 00:07:41.610\nBut VLAN ACLs normally block\nbased on Mac address and\n\n124\n00:07:41.610 --> 00:07:45.790\nit would usually block all of my traffic\nand not just one little thing, but\n\n125\n00:07:45.790 --> 00:07:49.680\nthere's a really quick way that we\ncan test to see if we have an ACL.\n\n126\n00:07:49.680 --> 00:07:52.630\nWe can just do a show run config and\nlook for the keyword filter.\n\n127\n00:07:52.630 --> 00:07:56.400\nVLAN ACLs use that filter as a great way\nto spot that real quick on these guys.\n\n128\n00:07:56.400 --> 00:08:00.140\nSo I can just jump to each switch and\n\n129\n00:08:00.140 --> 00:08:05.440\ndo a show run and\nfilter that to use the include command and\n\n130\n00:08:05.440 --> 00:08:08.600\njust include any line\nwith the word filter.\n\n131\n00:08:08.600 --> 00:08:11.840\nAnd if there's a VLAN filter\nit'll turn up, right.\n\n132\n00:08:11.840 --> 00:08:13.070\nBut I don't see one there.\n\n133\n00:08:13.070 --> 00:08:16.346\nAnd go to NYCORE2 and\nwe'll look for the same thing.\n\n134\n00:08:19.678 --> 00:08:22.610\nAnd so I'm just looking for\nthat word filter.\n\n135\n00:08:22.610 --> 00:08:24.290\nAnd we got nothing.\n\n136\n00:08:24.290 --> 00:08:26.420\nAnd the last one is access one.\n\n137\n00:08:26.420 --> 00:08:32.630\nAnd we'll do the same thing.\n\n138\n00:08:32.630 --> 00:08:33.310\nAnd no.\n\n139\n00:08:33.310 --> 00:08:36.310\nOK, so we're not dealing\nwith a VLAN acl on this one.\n\n140\n00:08:36.310 --> 00:08:40.190\nAnd I know what you're thinking is that\nmaybe we've got a spamming tree issue or\n\n141\n00:08:40.190 --> 00:08:41.820\na VLAN trunk or whatever.\n\n142\n00:08:41.820 --> 00:08:45.500\nBut anything at layer two would it\nblock my ability to get back to all\n\n143\n00:08:45.500 --> 00:08:47.150\nthree loopback interfaces?\n\n144\n00:08:47.150 --> 00:08:51.020\nAnd I can get to two out of\nthe three loopback interfaces, so\n\n145\n00:08:51.020 --> 00:08:53.390\nthat means layer two is pretty\nmuch out of the question.\n\n146\n00:08:53.390 --> 00:08:56.990\nIve got layer three traffic\nthat's making it through.\n\n147\n00:08:56.990 --> 00:08:58.680\nTwo out of three times, right?\n\n148\n00:08:58.680 --> 00:09:02.730\nSo if it's not these guys,\nI need to start looking at routers and\n\n149\n00:09:02.730 --> 00:09:04.800\nthe first router in my path is NYEDGE1.\n\n150\n00:09:04.800 --> 00:09:06.930\nThe second router's my destination.\n\n151\n00:09:06.930 --> 00:09:08.860\nThe problem is not normally\nat the destination but\n\n152\n00:09:08.860 --> 00:09:11.030\nI could have an incoming ACL here or\n\n153\n00:09:11.030 --> 00:09:16.640\nI could have some static route that's\noverriding the return trip to NYEDGE2.\n\n154\n00:09:16.640 --> 00:09:18.180\nAnd sending my traffic off into nowhere.\n\n155\n00:09:18.180 --> 00:09:20.410\nI don't even know where\nthis traffic stops.\n\n156\n00:09:20.410 --> 00:09:23.740\nAnd a great way to spot where the traffic\nstops is to use a tool like Traceroute.\n\n157\n00:09:23.740 --> 00:09:27.980\nTraceroute will show me, am I getting\nthrough EDGE1 and dying down here or\n\n158\n00:09:27.980 --> 00:09:29.890\nam I dying right NYEDGE1.\n\n159\n00:09:29.890 --> 00:09:34.890\nAnd so if I go back to NYEDGE2,\nwe can test that theory out and\n\n160\n00:09:34.890 --> 00:09:35.870\nsee where it's dying.\n\n161\n00:09:35.870 --> 00:09:41.950\nNow the trace route utility\nworks with both IPv4 and IPv6.\n\n162\n00:09:41.950 --> 00:09:48.008\nSo I'm gonna do a trace route to a network\nthat I know I can get to, 2001:1600::1.\n\n163\n00:09:48.008 --> 00:09:53.007\nAnd I'm gonna try and trace the route\nto that, and it's gonna think,\n\n164\n00:09:53.007 --> 00:09:57.760\nand it's gonna think some more,\nand it's gonna think some more.\n\n165\n00:09:57.760 --> 00:09:59.040\nApparently it's gonna take forever.\n\n166\n00:09:59.040 --> 00:10:00.890\nSo the first hob should be NYEDGE1.\n\n167\n00:10:00.890 --> 00:10:05.990\nSo I should get a response back on that\nand then it's gonna jump down to NYWAN1.\n\n168\n00:10:05.990 --> 00:10:13.510\nSo here I get my first response\nfrom 2001:A001:1:1::1.\n\n169\n00:10:13.510 --> 00:10:16.120\nAnd then I get a response\nfrom the other end, right?\n\n170\n00:10:16.120 --> 00:10:18.450\n2001 colon D zero zero\ncolon one colon colon one.\n\n171\n00:10:18.450 --> 00:10:21.550\nAll right, so,\nmy trace shot made it through just fine.\n\n172\n00:10:21.550 --> 00:10:23.190\nI saw both hops.\n\n173\n00:10:23.190 --> 00:10:28.420\nI'm gonna repeat that except this\ntime I'm gonna do 2001 colon 600.\n\n174\n00:10:28.420 --> 00:10:33.750\nThat was one of the addresses\nthat I couldn't get to before.\n\n175\n00:10:33.750 --> 00:10:36.330\nAnd I just wanna see what\nthe trace route looks like here.\n\n176\n00:10:36.330 --> 00:10:37.980\nDo I make it to the first router?\n\n177\n00:10:37.980 --> 00:10:38.780\nYes or no.\n\n178\n00:10:38.780 --> 00:10:40.330\nIf I don't even make it\nto the first router,\n\n179\n00:10:40.330 --> 00:10:44.140\nthen we more than likely have an ACL\nthat's blocking our traffic on the way in.\n\n180\n00:10:44.140 --> 00:10:48.010\nIf I do make it to the first router,\nand I don't make it to the second one,\n\n181\n00:10:48.010 --> 00:10:50.960\nI could still have a problem\non the first router but\n\n182\n00:10:50.960 --> 00:10:52.530\nI more than likely have\na problem on the second router.\n\n183\n00:10:52.530 --> 00:10:55.390\nOn the first router, we could be\nfiltering traffic on its way out or\n\n184\n00:10:55.390 --> 00:10:56.500\neven route it inside of it.\n\n185\n00:10:56.500 --> 00:10:58.000\nThere's various things\nthat could happen there.\n\n186\n00:10:59.740 --> 00:11:02.040\nWell now that's an interesting one.\n\n187\n00:11:02.040 --> 00:11:06.580\nMy trace route made it through,\nbut my ping didn't.\n\n188\n00:11:07.630 --> 00:11:13.690\nSo when I do a ping, I get success rate\n0 percent I'm not making it through but\n\n189\n00:11:13.690 --> 00:11:16.430\nmy trace route went through just fine.\n\n190\n00:11:16.430 --> 00:11:17.280\nWhat the heck is that?\n\n191\n00:11:18.320 --> 00:11:19.990\nAll right.\nWell I can only think of one scenario\n\n192\n00:11:19.990 --> 00:11:21.240\nwhere this happens.\n\n193\n00:11:21.240 --> 00:11:24.250\nAnd that would be if I had an access list.\n\n194\n00:11:24.250 --> 00:11:29.410\nBecause pings use ICMP and they actually\nuse something different than traceroute.\n\n195\n00:11:29.410 --> 00:11:33.520\nSo we could have an ACL that's\nfiltering ICMP and not anything else.\n\n196\n00:11:33.520 --> 00:11:37.270\nIn fact, now that I say that out loud,\nI think back to,\n\n197\n00:11:37.270 --> 00:11:40.380\nwe just had a troubleshooting\nissue a couple of tickets ago\n\n198\n00:11:40.380 --> 00:11:42.390\nwhere we had some reachability issues.\n\n199\n00:11:42.390 --> 00:11:46.110\nAnd there was an ACL on NYEDGE1\nthat was filtering ICMP.\n\n200\n00:11:46.110 --> 00:11:47.470\nI had forgotten all about it.\n\n201\n00:11:47.470 --> 00:11:48.990\nLet's go take a look at that.\n\n202\n00:11:48.990 --> 00:11:50.990\nIt was on NYEDGE1.\n\n203\n00:11:50.990 --> 00:11:55.990\nAnd if I remember right,\nwe couldn't ping between the hosts and\n\n204\n00:11:55.990 --> 00:11:59.320\nwe had to add an extra entry\nto it to get it to function.\n\n205\n00:11:59.320 --> 00:12:01.190\nAnd it was right here on edge one.\n\n206\n00:12:01.190 --> 00:12:02.150\nIf I remember right, it was on.\n\n207\n00:12:02.150 --> 00:12:04.600\nWell, here, we can just do a show,\nrun, and config, and\n\n208\n00:12:04.600 --> 00:12:05.810\nspot which interface it was on.\n\n209\n00:12:05.810 --> 00:12:08.560\nI think it was on the gigabit interface,\nif I remember right.\n\n210\n00:12:08.560 --> 00:12:11.820\nSo this is where it's important to\nremember your tickets as you go through.\n\n211\n00:12:11.820 --> 00:12:14.430\nBut if I look at, there it is.\n\n212\n00:12:14.430 --> 00:12:17.370\nOn gigabit ethernet 0/0.\n\n213\n00:12:17.370 --> 00:12:20.690\nThere it is, IPv6 traffic-filter BLOCK in.\n\n214\n00:12:20.690 --> 00:12:22.820\nAnd we saw that,\nit was in either issue number one or\n\n215\n00:12:22.820 --> 00:12:23.960\nissue number two for this set.\n\n216\n00:12:23.960 --> 00:12:27.760\nSo we had seen that before and\nhad to work with it a little bit and\n\n217\n00:12:27.760 --> 00:12:31.590\nif I keep scrolling down,\nI'll get to where that is defined.\n\n218\n00:12:31.590 --> 00:12:32.990\nThere it goes.\n\n219\n00:12:32.990 --> 00:12:36.886\nAnd it's permitting ICMP host.\n\n220\n00:12:36.886 --> 00:12:46.320\n2001:A001:1:1::2 to ping 2::1, that was\nallowing edge two to ping edge one.\n\n221\n00:12:46.320 --> 00:12:50.130\nAnd then it's allowing us to ping 1600 and\n2600,\n\n222\n00:12:50.130 --> 00:12:55.490\nbut no 600, and\nthen it's blocking every other ping.\n\n223\n00:12:55.490 --> 00:13:00.140\nSo that's almost a guarantee right there,\nwe just, we're missing a line, right, so\n\n224\n00:13:00.140 --> 00:13:02.400\nwe need to get in here and add this entry.\n\n225\n00:13:02.400 --> 00:13:05.730\nAdd these other IPs to\nbe able to ping to them.\n\n226\n00:13:05.730 --> 00:13:08.950\nNow in order to do that, we're going to\nneed to know some sequence numbers, so\n\n227\n00:13:08.950 --> 00:13:10.470\nlet's take a look at that ACL this way.\n\n228\n00:13:10.470 --> 00:13:12.980\nI'm just going to do\na show access dash list,\n\n229\n00:13:12.980 --> 00:13:15.430\nbecause that will display\nthe sequence numbers for me.\n\n230\n00:13:15.430 --> 00:13:17.140\nSo here are the two being permitted,\n\n231\n00:13:17.140 --> 00:13:20.020\nyou'll see that they're\nsequence numbers 20 and 30 So\n\n232\n00:13:20.020 --> 00:13:24.180\nI just need to add these new lines in\nbetween there or around them or whatever.\n\n233\n00:13:24.180 --> 00:13:27.370\nSo maybe I'll make like,\nI don't know, 15 and 16, or\n\n234\n00:13:27.370 --> 00:13:30.860\nsomething to make them appear before that.\n\n235\n00:13:30.860 --> 00:13:33.390\nSo I'll get into my configuration.\n\n236\n00:13:33.390 --> 00:13:39.460\nI'll do, ipv6 access-list block.\n\n237\n00:13:41.470 --> 00:13:49.030\nAnd then I'll do sequence, and we're\ngonna do a, we'll do 15 permit icmp and\n\n238\n00:13:50.460 --> 00:13:55.300\nI'll just say any host, cuz we're supposed\nto be able to reach to the sub aside.\n\n239\n00:13:55.300 --> 00:13:58.380\nAnd I'm gonna put in 2001:600 Colon,\ncolon and\n\n240\n00:13:58.380 --> 00:14:01.090\nmy head's gonna get on top of this\ncuz it's kind of a long command.\n\n241\n00:14:01.090 --> 00:14:03.730\nBut 2001:600::1.\nThat was the IP assigned to the other side\n\n242\n00:14:03.730 --> 00:14:08.320\nand I guess I could do\nthe whole network instead\n\n243\n00:14:08.320 --> 00:14:13.260\nof just the host, but\nI'll leave it as the host.\n\n244\n00:14:13.260 --> 00:14:17.600\nThat's what the question asked, that to\ndo is to be able to ping that one host.\n\n245\n00:14:17.600 --> 00:14:20.460\nSo I'm gonna permit that and\n\n246\n00:14:20.460 --> 00:14:26.130\nthen I'm gonna do the same thing for\nthat 606:606::6.\n\n247\n00:14:26.130 --> 00:14:28.930\nThat was the other address, and\n\n248\n00:14:28.930 --> 00:14:31.650\nI need to give it a difference sequence\nnumber or I\"m gonna kinda break this.\n\n249\n00:14:33.150 --> 00:14:34.050\nThere we go.\n\n250\n00:14:34.050 --> 00:14:35.300\nSo I've got lines 15 and 16.\n\n251\n00:14:35.300 --> 00:14:38.260\nSo these two lines right here\n\n252\n00:14:38.260 --> 00:14:42.010\nare going to add the ability\nto ping those other Loopbacks.\n\n253\n00:14:42.010 --> 00:14:45.580\nAnd if I do a show access-list\nto look at the completed one,\n\n254\n00:14:46.580 --> 00:14:48.530\nthere they all are nice and in order.\n\n255\n00:14:48.530 --> 00:14:53.840\nThere's the four addresses assigned to\nthe three Loopback interfaces on NY Wan1.\n\n256\n00:14:53.840 --> 00:14:58.060\nI guess another option is I could've\njust removed this ACL all together but\n\n257\n00:14:58.060 --> 00:14:59.620\nthat should solve the problem.\n\n258\n00:14:59.620 --> 00:15:01.830\nLet's go test this out on NYEDGE2.\n\n259\n00:15:01.830 --> 00:15:07.450\nAnd on NYEDGE2, I'm just gonna repeat\nthose pings that were failing before.\n\n260\n00:15:07.450 --> 00:15:13.310\nI know that I was able\nto ping 2001:1600::1.\n\n261\n00:15:13.310 --> 00:15:19.064\nAnd I was able to ping 2600::1,\nbut I wasn't able to ping 600.\n\n262\n00:15:20.200 --> 00:15:23.590\nAnd I wasn't able to ping 606:606::6,\nand now I can.\n\n263\n00:15:23.590 --> 00:15:29.860\nSo now I can ping them all.\n\n264\n00:15:29.860 --> 00:15:32.540\nSo this was a case of an acl blocking us.\n\n265\n00:15:32.540 --> 00:15:35.520\nNow I remembered seeing that\nacl in an earlier ticket, so\n\n266\n00:15:35.520 --> 00:15:36.980\nwe kinda had that advantage.\n\n267\n00:15:36.980 --> 00:15:39.750\nBut, had I not remembered,\nhad we had to hunt it down.\n\n268\n00:15:39.750 --> 00:15:42.640\nBe aware that, that ACL could've\nbeen more than one place.\n\n269\n00:15:42.640 --> 00:15:48.440\nIt was here, on traffic coming\nin the Gi0/0 interface on EDGE1.\n\n270\n00:15:48.440 --> 00:15:52.210\nIt just as easily could've\nbeen here on outbound traffic,\n\n271\n00:15:52.210 --> 00:15:55.110\non Serial 0/0/1, or here.\n\n272\n00:15:55.110 --> 00:15:57.010\nOn input traffic for 010 on NYWAN1.\n\n273\n00:15:57.010 --> 00:16:01.510\nThe reverse path it could have stopped\nthis anywhere along the way there too.\n\n274\n00:16:01.510 --> 00:16:05.260\nSo there's many places you can put\nan ACL on here that could've stopped\n\n275\n00:16:05.260 --> 00:16:06.360\nthat traffic.\n\n276\n00:16:06.360 --> 00:16:10.210\nBut anytime you got a situation where\nsome traffic makes it across the link and\n\n277\n00:16:10.210 --> 00:16:12.980\nother traffic doesn't,\nif they're on the same network,\n\n278\n00:16:12.980 --> 00:16:14.490\nit's probably not a routing issue.\n\n279\n00:16:14.490 --> 00:16:17.530\nIn this case,\nthey're on different networks and\n\n280\n00:16:17.530 --> 00:16:20.710\nthat's why I was thinking routing issue,\nbut it turned out to be ACL.\n\n281\n00:16:20.710 --> 00:16:25.090\nI guess you argue that ACL are routing\nissues since ACL is route traffic, but\n\n282\n00:16:25.090 --> 00:16:26.070\neither way.\n\n283\n00:16:26.070 --> 00:16:29.290\nWe were able to track down the ACL,\nfix the problem, and\n\n284\n00:16:29.290 --> 00:16:31.110\nnow we're able to ping across\njust like we needed to.\n\n285\n00:16:31.110 --> 00:16:33.810\nSo that's gonna resolve this ticket.\n\n286\n00:16:33.810 --> 00:16:36.170\nAll right.\nWell that wraps up set number nine.\n\n287\n00:16:36.170 --> 00:16:38.430\nStay tuned.\nWe got another set coming up next.\n\n288\n00:16:38.430 --> 00:16:40.429\nHope you guys enjoyed this one,\nand I'll see you back.\n\n289\n00:16:44.380 --> 00:16:46.146\nFor set number 10.\n\n290\n00:16:46.146 --> 00:16:48.774\n[SOUND]\n\n",
          "vimeoId": "151030997"
        }
      ],
      "title": "Set Nine"
    },
    {
      "episodes": [
        {
          "description": "In this video, Don solves troubleshooting issue #1` from set #10. The trouble ticket states that \"EIGRP is not forming a relationship across the WAN link between NYEDGE2 and NYWAN1 \"",
          "length": "565",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-10-1-set_10_issue_1-121015-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-10-1-set_10_issue_1-121015-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-10-1-set_10_issue_1-121015-1-sm.jpg",
          "title": "Set 10 Issue 1",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:08.637\n[MUSIC]\n\n2\n00:00:08.637 --> 00:00:13.080\nAll right, welcome back to an all new\nset of Cisco IP troubleshooting episodes\n\n3\n00:00:13.080 --> 00:00:16.190\nhere on ITProTV,\nwe're kicking off set number 10.\n\n4\n00:00:16.190 --> 00:00:21.190\nAnd it looks like we've got an IPv6 EIGRP\nissue right to kick things off with.\n\n5\n00:00:21.190 --> 00:00:26.100\nThe ticket reads like this, it says\nEIGRP is not forming a relationship\n\n6\n00:00:26.100 --> 00:00:30.600\nacross the WAN link between NYEDGE2 and\nNYWAN1.\n\n7\n00:00:30.600 --> 00:00:34.860\nSo, we've got two routers not forming\nan EIGRP neighbor relationship.\n\n8\n00:00:34.860 --> 00:00:36.560\nWe need to find out why.\n\n9\n00:00:36.560 --> 00:00:39.840\nWell, before we dive into the routers\nthemselves, let's look at our topology and\n\n10\n00:00:39.840 --> 00:00:41.090\nget a handle on that.\n\n11\n00:00:41.090 --> 00:00:42.880\nBecause the topology has changed, right?\n\n12\n00:00:42.880 --> 00:00:46.030\nBut please listen for\na menu because items have changed.\n\n13\n00:00:46.030 --> 00:00:49.100\nSo, if we look at our routers, we actually\nhave a well-documented diagram this time.\n\n14\n00:00:49.100 --> 00:00:54.148\nWe got all sorts of addresses on here and\nwhat the ticket said was NYEDGE2 and\n\n15\n00:00:54.148 --> 00:00:56.980\nNYWAN1 were not forming\na neighbor relationship and\n\n16\n00:00:56.980 --> 00:01:02.220\nif I look at the diagram, well, I've got\na direct link between the two right here.\n\n17\n00:01:02.220 --> 00:01:06.345\nIt says,\nit's EIGRP autonomous system one and\n\n18\n00:01:06.345 --> 00:01:12.430\nI've got Ser0/0/1 on\nthe EDGE2 is 2001:DA03::1 and\n\n19\n00:01:12.430 --> 00:01:16.349\nit's a /92 on Ser0/1/1 on NYWAN1,\n\n20\n00:01:16.349 --> 00:01:20.410\nwe've got 2001:DA03::2/92.\n\n21\n00:01:20.410 --> 00:01:24.070\nSo, those are the systems or\nthe interfaces.\n\n22\n00:01:24.070 --> 00:01:26.770\nAnd I'm just grabbing my favorite\ntroubleshooting tool, the pen.\n\n23\n00:01:26.770 --> 00:01:29.222\nCuz I'm gonna need to write these down or\nI'm not gonna remember them.\n\n24\n00:01:29.222 --> 00:01:36.238\nSo, it was Ser0/0/1 on EDGE2.\n\n25\n00:01:36.238 --> 00:01:42.847\nAnd its address was 2001:da03::1/92.\n\n26\n00:01:42.847 --> 00:01:44.693\nImportant to write that down, because I\nneed to compare it to the other side.\n\n27\n00:01:44.693 --> 00:01:49.350\nWe could have an IP mismatch or an ACL,\nand I'll need to remember these addresses.\n\n28\n00:01:49.350 --> 00:01:54.389\nAnd then, on WAN1,\nwe're talking Ser0/0/1/1.\n\n29\n00:01:55.450 --> 00:02:00.196\nAnd then, we're talking about ::2 for\nthat guy.\n\n30\n00:02:00.196 --> 00:02:03.920\nAll right, so now, that I got that\nhandy let's go see what we can see.\n\n31\n00:02:03.920 --> 00:02:08.600\nNow, as far as troubleshooting this link\nissue, one side's as good as another.\n\n32\n00:02:08.600 --> 00:02:12.240\nNow, what I normally try and do here to\nmake life easier on me is if I see one of\n\n33\n00:02:12.240 --> 00:02:15.630\nthe routers only have one routing\nprotocol, I'll usually start there.\n\n34\n00:02:15.630 --> 00:02:18.800\nBut in this case, it looks like they\nall have multiple routing protocols.\n\n35\n00:02:18.800 --> 00:02:21.810\nWell, actually it's not so\nbad because EIGRP here is IPv4.\n\n36\n00:02:21.810 --> 00:02:25.540\nThe only IPv6 routing protocol is EIGRP.\n\n37\n00:02:25.540 --> 00:02:27.220\nSo, they all just have one,\nso it's really not that bad.\n\n38\n00:02:27.220 --> 00:02:29.350\nLet's just start with the guy\nin the middle, NYWAN1.\n\n39\n00:02:30.630 --> 00:02:32.470\nSo, I will jump over to NYWAN1.\n\n40\n00:02:33.490 --> 00:02:35.690\nAnd let's see what we've\ngot set up on this one.\n\n41\n00:02:35.690 --> 00:02:36.320\nAll right.\n\n42\n00:02:36.320 --> 00:02:39.820\nThe first thing I just wanna do is\nsee if I have basic reachability.\n\n43\n00:02:39.820 --> 00:02:40.430\nRight?\n\n44\n00:02:40.430 --> 00:02:43.810\nIf I, even the routing protocol, I don't\neven necessarily need to look that up.\n\n45\n00:02:43.810 --> 00:02:46.125\nI can't even ping the neighbor.\n\n46\n00:02:46.125 --> 00:02:48.285\nThen, I've got a problem, right?\n\n47\n00:02:48.285 --> 00:02:52.352\nAnd what they've told me was that, NYWAN1,\n\n48\n00:02:52.352 --> 00:02:57.256\nwas, let's see we were 2001:DA03::2, and\n\n49\n00:02:57.256 --> 00:03:01.032\nthe guy on the other side was ::1 right?\n\n50\n00:03:01.032 --> 00:03:04.515\nSo, I should be able to\nping from here to there.\n\n51\n00:03:04.515 --> 00:03:09.717\nSo, let's just see, what we get if we\ntry and ping the other side, right?\n\n52\n00:03:09.717 --> 00:03:13.317\n2001:DA03::1.\n\n53\n00:03:13.317 --> 00:03:17.030\nAll right, so, when I try and ping that,\nI get no valid route for destination.\n\n54\n00:03:17.030 --> 00:03:19.530\nNow, that's not what I expected to get.\n\n55\n00:03:19.530 --> 00:03:23.670\nWhat I expected to get was either\nsuccesses or something else but\n\n56\n00:03:23.670 --> 00:03:27.180\nno valid route, for something that\nshould be directly connected,\n\n57\n00:03:27.180 --> 00:03:30.010\nright, I'm supposed to be\ndirectly plugged into this link.\n\n58\n00:03:30.010 --> 00:03:31.760\nSo, maybe we do have an IP mismatch.\n\n59\n00:03:31.760 --> 00:03:35.770\nLet's look at how that interface is\nconfigured and see what we've got there.\n\n60\n00:03:35.770 --> 00:03:42.980\nSo, I'm gonna do a show run for\ninterface serial 011, all right.\n\n61\n00:03:42.980 --> 00:03:47.520\nAnd, looking at it,\nits got IPv6 address 2001:D0,\n\n62\n00:03:47.520 --> 00:03:52.460\nwell that doesn't match what they told me,\nright?\n\n63\n00:03:52.460 --> 00:03:56.330\nSo, this IP address is not the IP\naddress they told me in the diagram.\n\n64\n00:03:56.330 --> 00:04:00.370\nWhen I looked in the diagram,\nit says here NYWAN1 is\n\n65\n00:04:00.370 --> 00:04:04.010\nsupposed to have serial 0/1/1,\n2000:DA03::2/92.\n\n66\n00:04:04.010 --> 00:04:10.970\nAnd when I looked at the interface myself,\nthat's not what I see.\n\n67\n00:04:10.970 --> 00:04:13.870\nRight.\nSo, it looks like either the diagram is\n\n68\n00:04:13.870 --> 00:04:16.270\nwrong, or the router is wrong.\n\n69\n00:04:16.270 --> 00:04:16.770\nWhich one?\n\n70\n00:04:17.860 --> 00:04:20.320\nI don't know.\nI imagine the diagram.\n\n71\n00:04:20.320 --> 00:04:22.930\nWe have to imagine the diagram is right,\nthat's the information they gave us.\n\n72\n00:04:22.930 --> 00:04:25.600\nBut we've seen in previous issues where\nsometimes the diagram is missing some\n\n73\n00:04:25.600 --> 00:04:27.890\ninformation, so I'm not really sure which.\n\n74\n00:04:27.890 --> 00:04:31.408\nWhat I'm going to do, is I'm going to\nwrite this address down, so, I've got it.\n\n75\n00:04:31.408 --> 00:04:37.061\nThis is 2001:D000:2::2/126\n\n76\n00:04:37.061 --> 00:04:41.614\nthat's a pretty small network there.\n\n77\n00:04:41.614 --> 00:04:45.422\nAnd I'm going to jump to\nthe other side up to NYEDGE2 and\n\n78\n00:04:45.422 --> 00:04:48.350\nsee what it's got on its serial 0001.\n\n79\n00:04:48.350 --> 00:04:49.850\nSo, if I jump up to EDGE2.\n\n80\n00:04:51.670 --> 00:04:55.257\nAnd I'm just gonna do a show run for\n\n81\n00:04:55.257 --> 00:05:00.453\ninterface serial 0002, oh sorry, hang on,\n\n82\n00:05:00.453 --> 00:05:07.400\nlet me make sure I got the right\ninterface here, serial 0001.\n\n83\n00:05:07.400 --> 00:05:12.990\nThen I can see on this one 2001:D00:2::1,\nso\n\n84\n00:05:12.990 --> 00:05:18.735\nthat's the same network as the other end,\nit's just apparently the diagram is wrong.\n\n85\n00:05:18.735 --> 00:05:21.790\nSo, I set myself for this, didn't I?\n\n86\n00:05:21.790 --> 00:05:23.730\nAt the very beginning of\nthe episode I said look,\n\n87\n00:05:23.730 --> 00:05:28.190\nwe've got a well documented diagram and\nthe IP's are wrong on it.\n\n88\n00:05:28.190 --> 00:05:29.370\nSo, that doesn't help us much.\n\n89\n00:05:29.370 --> 00:05:31.360\nSo, we'll have to put\nthe diagram out of our mind.\n\n90\n00:05:31.360 --> 00:05:36.421\nBut this range here, if I try and\nping to the other side,\n\n91\n00:05:36.421 --> 00:05:41.387\n2001:D000:2::2, was the other side.\n\n92\n00:05:41.387 --> 00:05:45.388\nIf I try and ping that, there we go,\nno valid route for destination.\n\n93\n00:05:45.388 --> 00:05:50.140\nI'm still getting the same thing as I got\nbefore which again is not what I expected.\n\n94\n00:05:50.140 --> 00:05:51.780\nI have that IP,\n\n95\n00:05:51.780 --> 00:05:55.890\nthat's what's assigned to the interface,\nI should be able to get to that person.\n\n96\n00:05:56.920 --> 00:05:58.690\nBut I'm not, right?\n\n97\n00:05:58.690 --> 00:06:00.950\nSo, it says no valid route,\nand that's odd.\n\n98\n00:06:00.950 --> 00:06:02.450\nIf I do a show IP route,\n\n99\n00:06:02.450 --> 00:06:06.000\na directly connected interface\nshould always have a route.\n\n100\n00:06:06.000 --> 00:06:09.890\nOops, if I do a show IPv6 rather,\nhelps if I use the right protocol.\n\n101\n00:06:09.890 --> 00:06:15.220\nA directly connected route,\nwe should always have a route for that.\n\n102\n00:06:15.220 --> 00:06:20.090\nAnd so, when I look I can see\nlike 2001:A001 and A600, B600.\n\n103\n00:06:20.090 --> 00:06:27.457\nHere's 2001:D000:1 but\nI'm dealing with 2001:D000:2.\n\n104\n00:06:27.457 --> 00:06:29.860\nAnd sure enough,\nit's not in the routing table.\n\n105\n00:06:29.860 --> 00:06:31.640\nNow, think in your minds.\n\n106\n00:06:31.640 --> 00:06:33.030\nLet's do a quick pop quiz here.\n\n107\n00:06:34.030 --> 00:06:36.480\nWhat's the one scenario,\n'cuz there's only one.\n\n108\n00:06:36.480 --> 00:06:39.850\nWhat's the one scenario where\na directly connected interface\n\n109\n00:06:39.850 --> 00:06:41.120\nwouldn't show up in the routing table?\n\n110\n00:06:42.350 --> 00:06:43.280\nIf it's shut down.\n\n111\n00:06:43.280 --> 00:06:44.580\nIf the interface, itself, is down.\n\n112\n00:06:44.580 --> 00:06:49.130\nIf the line protocol is down, then it's\nnot gonna make it into the routing table.\n\n113\n00:06:49.130 --> 00:06:51.370\nOtherwise, connected\ninterfaces always show up.\n\n114\n00:06:51.370 --> 00:06:51.870\nSo.\n\n115\n00:06:53.380 --> 00:06:58.140\nIf I do a show IPv6 interface brief,\nand I look for\n\n116\n00:06:58.140 --> 00:07:02.670\nthat serial interface on this\nguy at serial 001, there it is,\n\n117\n00:07:04.060 --> 00:07:09.050\nand that's probably a red flag right there\nthat the interface is administratively\n\n118\n00:07:09.050 --> 00:07:14.850\ndown so I didn't notice that when I\nran the show run interface serial 001.\n\n119\n00:07:14.850 --> 00:07:17.040\nBut sure enough,\nI just looked right past it.\n\n120\n00:07:17.040 --> 00:07:22.030\nI was so focused on looking at that IP,\nI didn't even bother to look at that.\n\n121\n00:07:22.030 --> 00:07:24.010\nAnd so, the interface is shut down.\n\n122\n00:07:24.010 --> 00:07:28.220\nThat'll cause a little bit\nof a difficulty in working.\n\n123\n00:07:28.220 --> 00:07:32.160\nInterfaces that are shut down tend not to\nflow traffic, so I'll do no shut down to\n\n124\n00:07:32.160 --> 00:07:35.900\nbring that interface up and now we should\nstart flowing some traffic over it.\n\n125\n00:07:35.900 --> 00:07:37.720\nAnd so,\nthere I see the line protocol coming up.\n\n126\n00:07:37.720 --> 00:07:41.160\nAnd, in fact, I see EIGRP coming up.\n\n127\n00:07:41.160 --> 00:07:45.850\nAnd remember our original ticket was EIGRP\nis not forming a relationship across\n\n128\n00:07:45.850 --> 00:07:48.320\nthe WAN link between NYEDGE2 and NYWAN1.\n\n129\n00:07:48.320 --> 00:07:51.040\nI'll bet we just did.\n\n130\n00:07:51.040 --> 00:07:54.530\nNow, it's telling me we formed\na neighbor relationship with somebody\n\n131\n00:07:54.530 --> 00:07:56.680\nwhose IP ends in 9b50.\n\n132\n00:07:56.680 --> 00:07:59.440\nI don't know who that is but\nit's on Serial0/0/1.\n\n133\n00:07:59.440 --> 00:08:04.020\nI do know who that is, right,\nand that points to NYWAN1.\n\n134\n00:08:04.020 --> 00:08:06.750\nSo, it looks like we\njust solved our problem.\n\n135\n00:08:06.750 --> 00:08:09.410\nNow, I do wanna do just a quick test.\n\n136\n00:08:09.410 --> 00:08:13.000\nI wanna take that ping that we did\nbefore and I just wanna rerun it and\n\n137\n00:08:13.000 --> 00:08:14.330\nmake sure it actually gets across.\n\n138\n00:08:14.330 --> 00:08:17.530\nSo, at this rate it\nwould've been faster for\n\n139\n00:08:17.530 --> 00:08:19.050\nme to type it than to find it this way.\n\n140\n00:08:19.050 --> 00:08:22.490\nBut there we go, and\nI am indeed able to ping across.\n\n141\n00:08:22.490 --> 00:08:24.900\nAll right, so\nlooks like dealing with a few things here.\n\n142\n00:08:24.900 --> 00:08:28.560\nThe main challenge for\nme on this one was simply the diagram.\n\n143\n00:08:28.560 --> 00:08:31.830\nThese IPs are wrong, right,\nit's got the wrong IPs in the diagram.\n\n144\n00:08:31.830 --> 00:08:35.320\nBut once we had the right IPs,\nwe could see the interface was down.\n\n145\n00:08:35.320 --> 00:08:38.840\nWe brought it up here on NYEDGE2, and\nthen we were able to ping across.\n\n146\n00:08:38.840 --> 00:08:40.450\nAnd now, we have an adjacency.\n\n147\n00:08:40.450 --> 00:08:42.200\nAnd now, we've got to make a decision.\n\n148\n00:08:42.200 --> 00:08:46.750\nAnd the decision is, those IPv6\naddresses are wrong, do I go back and\n\n149\n00:08:46.750 --> 00:08:49.020\ncorrect them to match the diagram.\n\n150\n00:08:49.020 --> 00:08:52.910\nI could, but at the end of\nthe day the question told me.\n\n151\n00:08:52.910 --> 00:08:56.060\nI need to form a neighbor relationship\nacross that link, that's all it said.\n\n152\n00:08:56.060 --> 00:08:58.610\nIt didn't say anything about\nusing right IP's or wrong IP's,\n\n153\n00:08:58.610 --> 00:09:00.950\nso at this point we'll just leave it be.\n\n154\n00:09:00.950 --> 00:09:04.220\nWe can always come back and fix it later\nif we need to or we can just add these as\n\n155\n00:09:04.220 --> 00:09:07.520\nsecondary IP's if we just wanted it\nto be accurate with the diagram.\n\n156\n00:09:07.520 --> 00:09:10.950\nFor right now, the link's up,\nit's happy and our work is done.\n\n157\n00:09:10.950 --> 00:09:13.690\nSo, we'll wrap this one up and move on\nto the next trouble shooting ticket.\n\n158\n00:09:13.690 --> 00:09:14.780\nHope you guys enjoyed it.\n\n159\n00:09:14.780 --> 00:09:15.800\nStay tuned.\n\n160\n00:09:15.800 --> 00:09:20.345\nIssue two is coming up next.\n\n161\n00:09:20.345 --> 00:09:25.054\n[SOUND]\n\n",
          "vimeoId": "151030996"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #2` from set #10. The trouble ticket states that \"Whilst it’s not causing a problem, there is a configuration error on NYEDGE1 which may be confusing to an engineer if they view the configuration of the interfaces on NYEDGE1. \"",
          "length": "682",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-10-2-set_10_issue_2-121015-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-10-2-set_10_issue_2-121015-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-10-2-set_10_issue_2-121015-1-sm.jpg",
          "title": "Set 10 Issue 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:05.979\n[MUSIC]\n\n2\n00:00:08.620 --> 00:00:12.850\nAll right, welcome back to another Cisco\ntroubleshooting episode here on ITProTV.\n\n3\n00:00:12.850 --> 00:00:14.930\nWe're picking back up with Set 10.\n\n4\n00:00:14.930 --> 00:00:16.730\nJumping into issue number two.\n\n5\n00:00:16.730 --> 00:00:18.730\nAnd we've got an odd one for us here.\n\n6\n00:00:18.730 --> 00:00:23.241\nNot so much a problem as it is\na recommendation for action.\n\n7\n00:00:23.241 --> 00:00:27.896\nThe statement, or the issue,\nsays whilst it's not causing a problem,\n\n8\n00:00:27.896 --> 00:00:32.246\nthere is a configuration error on\nNYEDGE1 which may be confusing to\n\n9\n00:00:32.246 --> 00:00:37.076\nan engineer if they view the configuration\nof the interfaces on NYEDGE1.\n\n10\n00:00:37.076 --> 00:00:39.585\nSo they're telling us that\nthere's something wrong, but\n\n11\n00:00:39.585 --> 00:00:41.700\nit's not something wrong\nthat affects traffic.\n\n12\n00:00:41.700 --> 00:00:45.210\nTraffic is going like normal, and\nthen so we don't really notice it.\n\n13\n00:00:45.210 --> 00:00:47.090\nBut, if somebody from\nthe outside were to come in and\n\n14\n00:00:47.090 --> 00:00:50.580\ntry and troubleshoot this,\nthey're gonna get confused, right?\n\n15\n00:00:50.580 --> 00:00:53.060\nBecause there's something in here\nthat just shouldn't be right.\n\n16\n00:00:53.060 --> 00:00:55.570\nAnd they gave us a little\nhint that just says check\n\n17\n00:00:55.570 --> 00:00:58.180\nthe autonomous systems\nconfigured on the interfaces.\n\n18\n00:00:58.180 --> 00:01:00.970\nSo it looks like we're dealing\nwith an AS type issue.\n\n19\n00:01:00.970 --> 00:01:03.240\nAnd when we talk about\nAS type configurations,\n\n20\n00:01:03.240 --> 00:01:06.590\nwell, RIP doesn't use autonomous systems.\n\n21\n00:01:06.590 --> 00:01:08.580\nOSPF doesn't use autonomous systems.\n\n22\n00:01:08.580 --> 00:01:10.570\nIt's technically just one.\n\n23\n00:01:10.570 --> 00:01:14.950\nEIGRP does use autonomous systems,\nand BGP uses autonomous systems.\n\n24\n00:01:14.950 --> 00:01:18.810\nSo I'm probably dealing with an EIGRP or\na BGP type issue.\n\n25\n00:01:18.810 --> 00:01:24.210\nAnd they don't specify IPv4 or IPv6 so\nwe need to be kind of on the lookout for\n\n26\n00:01:24.210 --> 00:01:27.090\nthose things and see if we can\nspot something that's not right.\n\n27\n00:01:27.090 --> 00:01:31.140\nWell before we do that, let's take\na look at our topology diagram so\n\n28\n00:01:31.140 --> 00:01:32.690\nwe can see what we should be expecting.\n\n29\n00:01:32.690 --> 00:01:36.980\nAnd the router in question\nis NYEDGE1 up here.\n\n30\n00:01:36.980 --> 00:01:41.352\nAnd so if we look at NYEDGE1, what you'll\nsee is that it's got three interfaces.\n\n31\n00:01:41.352 --> 00:01:46.289\nTwo of which are in EIGRP\nautonomous system 1 for IPv6.\n\n32\n00:01:46.289 --> 00:01:50.440\nWe've got a third interface,\nand possibly all three of them,\n\n33\n00:01:50.440 --> 00:01:54.840\nthat are in EIGRP autonomous system 10 for\nIPv4 and that's it.\n\n34\n00:01:54.840 --> 00:01:56.360\nI don't show any other routing protocols.\n\n35\n00:01:56.360 --> 00:01:58.230\nSo I mentioned BGP a moment ago,\n\n36\n00:01:58.230 --> 00:02:01.740\nwe should be able to put that out of\nour mind because it's on the diagram.\n\n37\n00:02:01.740 --> 00:02:06.460\nSo rip's out, OSPF's out, BGP's out,\nEIGRP's really all that's left and\n\n38\n00:02:06.460 --> 00:02:11.690\nthey told us to look for autonomous system\nnumbers so I'm looking for an EIGRP issue.\n\n39\n00:02:11.690 --> 00:02:15.974\nSomething that's wrong but that's not\nactually causing a problem with routing.\n\n40\n00:02:15.974 --> 00:02:19.611\nSo, let's jump into NYEDGE1 and\nsee if we can spot something like that.\n\n41\n00:02:19.611 --> 00:02:23.793\nNow, on NYEDGE1, there's any number of\ncommands we could jump in here to start\n\n42\n00:02:23.793 --> 00:02:25.660\ntroubleshooting this one.\n\n43\n00:02:25.660 --> 00:02:29.400\nOne challenge that I'm gonna have is\nthat I'm running IPv4 and IPv6, so\n\n44\n00:02:29.400 --> 00:02:33.270\nevery bit of troubleshooting I do,\nI'm gonna have to do twice, right?\n\n45\n00:02:33.270 --> 00:02:34.740\nOnce for each protocol.\n\n46\n00:02:34.740 --> 00:02:37.650\nThe other thing is they're telling\nme that something's wrong, but\n\n47\n00:02:37.650 --> 00:02:39.700\nthat it's not affecting routing.\n\n48\n00:02:39.700 --> 00:02:43.120\nAnd so that means I'm probably\nnot gonna have errors.\n\n49\n00:02:43.120 --> 00:02:46.780\nNormally I would do a show log,\nor do some debugs.\n\n50\n00:02:46.780 --> 00:02:49.390\nBut apparently nothing is\nactually happening, so\n\n51\n00:02:49.390 --> 00:02:51.110\nI don't expect to get much back on that.\n\n52\n00:02:51.110 --> 00:02:53.060\nRight, if I do a show log.\n\n53\n00:02:53.060 --> 00:02:55.030\nAnd I start to look at what's in here.\n\n54\n00:02:55.030 --> 00:02:57.820\nWell I might not see\nanything in here too crazy.\n\n55\n00:02:57.820 --> 00:02:59.720\nRight here's my normal boot stuff.\n\n56\n00:02:59.720 --> 00:03:01.290\nI got a VPN tunnel coming up.\n\n57\n00:03:01.290 --> 00:03:03.850\nInterfaces changing status.\n\n58\n00:03:03.850 --> 00:03:06.080\nAnd that's about it.\n\n59\n00:03:06.080 --> 00:03:07.890\nIt looks like we have a neighbor\nadjacentcy coming up.\n\n60\n00:03:10.270 --> 00:03:11.430\nAnd that's it right.\n\n61\n00:03:11.430 --> 00:03:12.509\nIf I do a show clock.\n\n62\n00:03:13.510 --> 00:03:18.100\nMy system hasn't reported any log\nmessages in like 45 minutes, all right?\n\n63\n00:03:18.100 --> 00:03:23.080\nIt's been a while since it's reported\na log message, so I'm pretty stable.\n\n64\n00:03:23.080 --> 00:03:28.350\nAnd if I do a show IP interface brief, I\ncan look at the interfaces and see whether\n\n65\n00:03:28.350 --> 00:03:34.620\nthey're up up, and all the interfaces\nthat have IP addresses are up, up.\n\n66\n00:03:34.620 --> 00:03:35.540\nSo that looks good.\n\n67\n00:03:35.540 --> 00:03:36.880\nAnd that's kind of what I expected.\n\n68\n00:03:36.880 --> 00:03:41.140\nAnd if I do a show ipv6 interface brief,\nI expect to see the same thing.\n\n69\n00:03:41.140 --> 00:03:44.040\nThat most everything is gonna be up, up.\n\n70\n00:03:44.040 --> 00:03:46.700\nOr if doesn't have an address,\nit's administratively down.\n\n71\n00:03:46.700 --> 00:03:47.840\nBut I'm not worried about those.\n\n72\n00:03:47.840 --> 00:03:49.600\nThe ones that have addresses are all up,\nups.\n\n73\n00:03:49.600 --> 00:03:53.900\nAnd I expected that because they told me\nit wasn't actually causing a problem.\n\n74\n00:03:53.900 --> 00:03:57.720\nSo all our normal trouble-shooting tools,\nkinda out the window.\n\n75\n00:03:57.720 --> 00:04:00.710\nAnd all we're left with is\nour verification tools.\n\n76\n00:04:00.710 --> 00:04:02.660\nI could do a show running dash config and\n\n77\n00:04:02.660 --> 00:04:05.570\njust start reading through it from\nthe very top and see if we can find things\n\n78\n00:04:05.570 --> 00:04:09.350\nthat are wrong, but let's see if we can't\nmake this a little bit easier for us.\n\n79\n00:04:09.350 --> 00:04:13.498\nI know it's an EIGRP problem and they told\nme to look out for autonomous systems so\n\n80\n00:04:13.498 --> 00:04:17.280\nI can run show IP protocols and that'll\nshow me the information that I need\n\n81\n00:04:17.280 --> 00:04:19.612\nas far as autonomous\nsystems are concerned.\n\n82\n00:04:19.612 --> 00:04:24.391\nSo for example, I know from looking\nat my diagram that I should be\n\n83\n00:04:24.391 --> 00:04:28.918\nan EIGRP autonomous system 10,\nand that's it for IPv4.\n\n84\n00:04:28.918 --> 00:04:33.342\nSo if I run a show IP protocols, I expect\nto see that I'm running EIGRP, and\n\n85\n00:04:33.342 --> 00:04:36.504\nthat I'm running it for\nautonomous system 10, and\n\n86\n00:04:36.504 --> 00:04:39.900\nsure enough there it is,\nEIGRP autonomous system 10.\n\n87\n00:04:39.900 --> 00:04:42.830\nI've got K values and\nother things defined here.\n\n88\n00:04:42.830 --> 00:04:46.910\nAutomatic summarization's disabled, and\nI should have some interfaces in there.\n\n89\n00:04:48.080 --> 00:04:49.230\nAnd I'm routing for networks, right?\n\n90\n00:04:49.230 --> 00:04:53.200\nEverything there looks pretty normal,\nnothing too crazy there.\n\n91\n00:04:53.200 --> 00:04:57.250\nAll right, then if I do a show\nIPv6 protocols I should\n\n92\n00:04:57.250 --> 00:04:59.790\nbe able to see the EIGRP side there.\n\n93\n00:04:59.790 --> 00:05:03.900\nAnd going back to my diagram, I expect\nto see autonomous system 1 for this one,\n\n94\n00:05:03.900 --> 00:05:05.080\nall right.\n\n95\n00:05:05.080 --> 00:05:08.600\nAnd so when I run that, I get my output.\n\n96\n00:05:08.600 --> 00:05:12.770\nAnd so right here I'm seeing EIGRP for\nautonomous system 1, that's good,\n\n97\n00:05:12.770 --> 00:05:15.020\nI've got K values and other things.\n\n98\n00:05:15.020 --> 00:05:16.640\nI've got some interfaces\nthat are thrown in there.\n\n99\n00:05:16.640 --> 00:05:18.004\nThat's all very exciting.\n\n100\n00:05:18.004 --> 00:05:20.239\nAnd there's something odd.\n\n101\n00:05:20.239 --> 00:05:24.098\nI've got IPv6 Routing Protocol is eigrp 2,\nright?\n\n102\n00:05:24.098 --> 00:05:27.370\nSo I've got another eigrp\nautonomous system here.\n\n103\n00:05:27.370 --> 00:05:31.331\nAnd if I look at it,\nK values are pretty normal.\n\n104\n00:05:31.331 --> 00:05:36.228\nSerial0/0/1 is in eigrp\nautonomous system 2.\n\n105\n00:05:36.228 --> 00:05:40.569\nNow unlike OSPF, where I might\nhave an Area 0 and an Area 1 and\n\n106\n00:05:40.569 --> 00:05:44.172\nthey talk to each other,\nhere it's AS2 and AS1.\n\n107\n00:05:44.172 --> 00:05:47.747\nThey're completely separate,\nunless I'm redistributing between them,\n\n108\n00:05:47.747 --> 00:05:48.850\nwhich we probably are.\n\n109\n00:05:48.850 --> 00:05:50.490\nBut we can verify that in a moment.\n\n110\n00:05:50.490 --> 00:05:55.580\nBy looking at the diagram,\nI'm not supposed to be in EIGRP autonomous\n\n111\n00:05:55.580 --> 00:06:00.520\nsystem 2 and that was configured for\nserial 001 and\n\n112\n00:06:01.950 --> 00:06:06.990\ngoing back to my diagram, serial 001 is\nsupposed to be in autonomous system one,\n\n113\n00:06:06.990 --> 00:06:11.410\nbut they told me it wasn't\naffecting routing, right?\n\n114\n00:06:11.410 --> 00:06:14.600\nWell if this interface is in the wrong AS,\nwouldn't that affect routing?\n\n115\n00:06:14.600 --> 00:06:15.773\nWell, it's not.\n\n116\n00:06:15.773 --> 00:06:17.929\nIf I go back to my config here, and\n\n117\n00:06:17.929 --> 00:06:23.250\nI go back to the part where it's telling\nme about AS1 and I look at the interfaces.\n\n118\n00:06:23.250 --> 00:06:27.040\nSerial 001 is an as1 also.\n\n119\n00:06:27.040 --> 00:06:32.230\nA single interface can be in more\nthan one eigrp autonomous system\n\n120\n00:06:32.230 --> 00:06:34.290\nthat's different from ospf\nwhere you can't do that.\n\n121\n00:06:34.290 --> 00:06:36.070\nIn eigrp you can.\n\n122\n00:06:36.070 --> 00:06:41.120\nAnd so in this case, the eigrp two,\nit's not really causing any problem.\n\n123\n00:06:41.120 --> 00:06:43.960\nAutonomous system one\nis working like normal.\n\n124\n00:06:43.960 --> 00:06:48.520\nBut the fact that eigrp two exists\ncould cause some confusions.\n\n125\n00:06:48.520 --> 00:06:51.450\nSo that's more than likely what\nthey're trying to point out for us.\n\n126\n00:06:51.450 --> 00:06:55.820\nAnd if we do a show run for\n\n127\n00:06:55.820 --> 00:07:02.670\ninterface serial 001,\nI can see right here it's got ipv6 eigrp\n\n128\n00:07:02.670 --> 00:07:07.689\ntwo It doesn't have ipv6_ergp 1.\n\n129\n00:07:07.689 --> 00:07:10.479\nSo how is it operating in both?\n\n130\n00:07:10.479 --> 00:07:14.903\nWell let's do a show run, and look for\n\n131\n00:07:14.903 --> 00:07:20.159\nthe eigrp section, and\nwhat I'll see in here\n\n132\n00:07:20.159 --> 00:07:26.265\nis that I've got a IPv4 for\nautonomous system ten.\n\n133\n00:07:26.265 --> 00:07:31.746\nI've got IPv6 for autonomous system one,\nand IPv6 for autonomous system two,\n\n134\n00:07:31.746 --> 00:07:36.831\nand you know what I'm not seeing\nthe network command that is dragging this,\n\n135\n00:07:36.831 --> 00:07:40.470\nI expected to see a network\ncommand to drag it in.\n\n136\n00:07:40.470 --> 00:07:44.690\nYou know I'm actually not\nseeing it attached to EIGRP1,\n\n137\n00:07:44.690 --> 00:07:46.220\nlike we saw in the diagrams.\n\n138\n00:07:46.220 --> 00:07:47.330\nSo that's interesting.\n\n139\n00:07:47.330 --> 00:07:51.530\nSo, that would be a problem, but they're\nsaying it's not affecting routing and\n\n140\n00:07:51.530 --> 00:07:53.340\nI'm not sure why that would be.\n\n141\n00:07:53.340 --> 00:07:59.150\nIf we're not participating in EIGRP1 like\nwe're supposed to, then in theory NYEDGE1\n\n142\n00:08:00.440 --> 00:08:04.180\nwould not know about this network\nover here between these two routers.\n\n143\n00:08:04.180 --> 00:08:06.410\nIt wouldn't know about what was there.\n\n144\n00:08:06.410 --> 00:08:08.150\nAnd that would affect routing.\n\n145\n00:08:08.150 --> 00:08:13.120\nSo, we do have some issue here, but\neither way the best thing to do is get\n\n146\n00:08:13.120 --> 00:08:16.330\nrid of the IGRP autonomous system\n2 all together, we don't need it.\n\n147\n00:08:16.330 --> 00:08:19.520\nAnd put that interface in autonomous\nsystem 1 like it's supposed to be,\n\n148\n00:08:19.520 --> 00:08:23.460\nso I'll go ahead do that real quick and\nget that squared away.\n\n149\n00:08:23.460 --> 00:08:28.148\nSo I'm gonna get into\ninterface serial 0/0/1 and\n\n150\n00:08:28.148 --> 00:08:29.970\nwe saw up here what I was looking for.\n\n151\n00:08:29.970 --> 00:08:32.490\nThis command, IPv6 EIGRP 2.\n\n152\n00:08:32.490 --> 00:08:33.856\nWe're just gonna undo that.\n\n153\n00:08:33.856 --> 00:08:38.200\nNo IPv6 EIGRP 2.\n\n154\n00:08:38.200 --> 00:08:43.770\nAnd then we'll say ipv6 eigrp 1, just\nstick into the right autonomous system.\n\n155\n00:08:43.770 --> 00:08:49.062\nAnd now if I get out of my config,\nand I do a show ipv6 protocols,\n\n156\n00:08:49.062 --> 00:08:54.060\nall right, I expect to see eigrp for\nautonomous system one,\n\n157\n00:08:54.060 --> 00:08:57.784\nright here, and\nas I look down the list here,\n\n158\n00:08:57.784 --> 00:09:03.384\nwe can see we've got our K values,\nK1, K2, and oh you know what?\n\n159\n00:09:03.384 --> 00:09:05.841\nI just noticed that right there,\nVR(TSHOOT).\n\n160\n00:09:05.841 --> 00:09:07.704\nSo we're actually dealing with a VRF,\n\n161\n00:09:07.704 --> 00:09:09.970\nthat's why I didn't see\nthe network command.\n\n162\n00:09:09.970 --> 00:09:11.970\nIt'll be a little further in the config.\n\n163\n00:09:11.970 --> 00:09:15.340\nAnd as I look down, I'll see that it's\nalready in autonomous system one.\n\n164\n00:09:15.340 --> 00:09:17.510\nIn fact, I might've broken it by\nputting that command in there, so\n\n165\n00:09:17.510 --> 00:09:19.080\nwe'll have to doublecheck that.\n\n166\n00:09:19.080 --> 00:09:23.210\nAutonomous system 2 still exists\nthough with no interfaces.\n\n167\n00:09:23.210 --> 00:09:25.270\nAnd that's because I need\nto get rid of its command.\n\n168\n00:09:25.270 --> 00:09:26.680\nLet me do a show run and config.\n\n169\n00:09:26.680 --> 00:09:30.000\nSo I wanna show you the mistake that I\nthink I made and make sure that I'm right.\n\n170\n00:09:30.000 --> 00:09:33.198\nSo when I look at this config and\nI start scrolling down here,\n\n171\n00:09:33.198 --> 00:09:35.030\nI've got my various interfaces.\n\n172\n00:09:35.030 --> 00:09:37.835\nAnd kinda going down the line here.\n\n173\n00:09:37.835 --> 00:09:42.090\nSee how serial 0000 is\ndirectly in the eigrp 1?\n\n174\n00:09:42.090 --> 00:09:46.580\nBut when I got serial 001,\nit wasn't directly in eigrp 1, was it?\n\n175\n00:09:46.580 --> 00:09:47.880\nIt didn't show up there.\n\n176\n00:09:47.880 --> 00:09:50.510\nBut when I go down a little bit, you'll\nsee I've got that virtual router creator\n\n177\n00:09:50.510 --> 00:09:55.070\nright there called TSHOOT, and that's\nwhere they're doing the unicast family.\n\n178\n00:09:55.070 --> 00:09:59.630\nTo bring it in for IPv4,\nand I know, you know,\n\n179\n00:09:59.630 --> 00:10:02.670\nI'm not actually seeing\nany vrf's in here so.\n\n180\n00:10:02.670 --> 00:10:03.540\nYeah, interesting.\n\n181\n00:10:03.540 --> 00:10:04.860\nAll right.\n\n182\n00:10:04.860 --> 00:10:07.510\nWell, I guess I didn't make\nthe mistake I thought I made.\n\n183\n00:10:07.510 --> 00:10:10.470\nSo I am in EIGRP autonomous system one.\n\n184\n00:10:10.470 --> 00:10:14.700\nI was expecting to see a VRF defined and\nI should have put the interface into that\n\n185\n00:10:14.700 --> 00:10:18.470\nVRF instead of out of here but no, it's\nactually defined on the real interface.\n\n186\n00:10:18.470 --> 00:10:19.955\nBut I do need to get rid of this command,\n\n187\n00:10:19.955 --> 00:10:21.762\nto actually get rid of\nthat autonomous system.\n\n188\n00:10:21.762 --> 00:10:25.392\nSo let me get into the config and\n\n189\n00:10:25.392 --> 00:10:30.985\nI'm just gonna say no ipv6,\nrouter eigrp 2.\n\n190\n00:10:30.985 --> 00:10:32.814\nAnd that's gonna get rid of that one.\n\n191\n00:10:32.814 --> 00:10:38.895\nAnd now, when I do a show ipv6 protocols,\nwhile it wasn't causing any real problems,\n\n192\n00:10:38.895 --> 00:10:42.362\nnow, autonomous system 2 will be gone,\nright?\n\n193\n00:10:42.362 --> 00:10:44.529\nSo here's everything for\nautonomous system 1.\n\n194\n00:10:45.590 --> 00:10:48.290\nAnd then, as I continue on, that's it.\n\n195\n00:10:48.290 --> 00:10:50.430\nAnd that's gonna solve that problem.\n\n196\n00:10:50.430 --> 00:10:55.160\nSo this is an example of just some extra\nconfig junk that was left in there\n\n197\n00:10:55.160 --> 00:10:56.950\nthat we could have ignored,\njust left it be.\n\n198\n00:10:56.950 --> 00:10:58.730\nBut if somebody is troubleshooting\nlater on down the road.\n\n199\n00:10:58.730 --> 00:10:59.630\nThey come across this.\n\n200\n00:10:59.630 --> 00:11:01.020\nAnd they're, like,\nwhy do I have AS number 2?\n\n201\n00:11:01.020 --> 00:11:03.600\nAnd it's just an extra thing to confuse\nus and have to sort through it.\n\n202\n00:11:03.600 --> 00:11:07.100\nSo, whenever you have lines of\nconfig that aren't used anymore.\n\n203\n00:11:07.100 --> 00:11:08.090\nIt's important to remove them.\n\n204\n00:11:08.090 --> 00:11:10.181\nClean them up.\nAnd that's what this ticket was all about.\n\n205\n00:11:10.181 --> 00:11:15.605\nSo, that takes care of this one and we're\nready to move on to issue number three.\n\n206\n00:11:15.605 --> 00:11:22.549\n[MUSIC]\n\n",
          "vimeoId": "151030992"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #3` from set #10. The trouble ticket states that \"IPv6 network on NYWAN1, Loopback 6 is not being propagated to NYEDGE1 and NYEDGE2 routers. \"",
          "length": "747",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-10-3-set_10_issue_3-121015-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-10-3-set_10_issue_3-121015-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-10-3-set_10_issue_3-121015-1-sm.jpg",
          "title": "Set 10 Issue 3",
          "transcript": "WEBVTT\n\n1\n00:00:00.016 --> 00:00:07.644\n[MUSIC]\n\n2\n00:00:07.644 --> 00:00:12.910\nAll right welcome back to another Cisco\ntroubleshooting episode here on ITpro TV.\n\n3\n00:00:12.910 --> 00:00:16.450\nWe're jumping into set ten\nissue number three and\n\n4\n00:00:16.450 --> 00:00:18.370\nwe've got,\nwell we've got an issue on our hands.\n\n5\n00:00:18.370 --> 00:00:23.378\nLet me read the ticket to you guys,\nit says IPV6 network on NYWAN1 for\n\n6\n00:00:23.378 --> 00:00:29.510\nloop back six is not being propagated to\nNYEDGE1 and NYEDGE2 routers, all right?\n\n7\n00:00:29.510 --> 00:00:32.940\nSo let's look at our topology,\nand kind of figure all this out.\n\n8\n00:00:32.940 --> 00:00:36.570\nSo they're talking about NYWAN1,\nthis guy right here in the middle.\n\n9\n00:00:36.570 --> 00:00:40.930\nAnd it's got an interface,\nit's loop back six and\n\n10\n00:00:40.930 --> 00:00:46.320\nwhatever network is on loop back six is\nnot making it out to NYEDGE1 and NYEDGE2.\n\n11\n00:00:46.320 --> 00:00:50.940\nAnd I've got EIGRP autonomous system one,\nand so that AS should\n\n12\n00:00:50.940 --> 00:00:54.550\nbe carrying those networks across and\nfor some reason it isn't, all right?\n\n13\n00:00:54.550 --> 00:00:57.460\nSo, first off, we need to figure out what\nnetwork it is, cuz I don't know, and\n\n14\n00:00:57.460 --> 00:01:00.060\nthey don't tell me in the ticket,\nso I need to find that out and\n\n15\n00:01:00.060 --> 00:01:03.080\nthen we need to look and see,\nare none of my networks making it over?\n\n16\n00:01:03.080 --> 00:01:06.020\nDo I even have an EIGRP neighbor\nrelationship with those guys?\n\n17\n00:01:06.020 --> 00:01:08.410\nLike, how big is this problem?\n\n18\n00:01:08.410 --> 00:01:11.030\nOr is it as simple as just a little\nnetwork that's not making it\n\n19\n00:01:11.030 --> 00:01:12.020\nto the other side?\n\n20\n00:01:12.020 --> 00:01:12.570\nSo, let's find out.\n\n21\n00:01:12.570 --> 00:01:17.720\nI'm gonna jump to NYWAN1 and\ndo a little information gathering first.\n\n22\n00:01:17.720 --> 00:01:21.450\nAnd we'll be able to figure things out a\nlittle better from there once we have some\n\n23\n00:01:21.450 --> 00:01:22.560\nmore information to act on.\n\n24\n00:01:22.560 --> 00:01:28.150\nSo the first thing I'm gonna do is,\nI'll just do a show run for interface lo6.\n\n25\n00:01:28.150 --> 00:01:31.435\nI wanna look at loop back six and\nthere it is, it's got one network on it.\n\n26\n00:01:31.435 --> 00:01:34.150\nAnd I'm gonna write that down\nwith my trusty pen here.\n\n27\n00:01:34.150 --> 00:01:38.497\nSo on NYWAN1's loop back six,\n\n28\n00:01:38.497 --> 00:01:45.101\nwe've got 2001:606:606::6.\n\n29\n00:01:45.101 --> 00:01:47.172\nAll right?\n\n30\n00:01:47.172 --> 00:01:50.430\nAnd it's a /64 network.\n\n31\n00:01:50.430 --> 00:01:53.390\nSo, that's the address I've got on\nthere and they're telling me that this\n\n32\n00:01:53.390 --> 00:01:56.050\nnetwork is not making it to\nthe other sides, all right?\n\n33\n00:01:56.050 --> 00:01:57.380\nWell, who are the other sides?\n\n34\n00:01:57.380 --> 00:02:03.990\nIf I do a show IPV6 EIGRP neighbor, I can\nfigure out who's the other sides, right?\n\n35\n00:02:03.990 --> 00:02:09.560\nAnd I do have two neighbors, one on Serial\n011 and one on Serial 10, all right?\n\n36\n00:02:09.560 --> 00:02:12.640\nAnd if I go and look at my diagram,\nSerial 010 and 011.\n\n37\n00:02:12.640 --> 00:02:16.720\nThose are my connections to NYEDGE2 and\nNYEDGE1.\n\n38\n00:02:16.720 --> 00:02:20.980\nSo I do have an EIGRP\nneighbor relationship up and\n\n39\n00:02:20.980 --> 00:02:23.180\nI'm assuming it's for\nautonomous system one.\n\n40\n00:02:23.180 --> 00:02:25.410\nI guess we could double-check\nthat just to be sure.\n\n41\n00:02:25.410 --> 00:02:29.140\nWhen we look here in the output for\nshow IPV6 EIGRP neighbor,\n\n42\n00:02:29.140 --> 00:02:33.680\nit shows us things like the hold down\ntimer, the sequence number and that.\n\n43\n00:02:33.680 --> 00:02:37.860\nBut one thing it doesn't tell us is the\nneighbor, I mean the autonomous system.\n\n44\n00:02:37.860 --> 00:02:43.170\nFor that we can do a show\nIPv6 protocols and\n\n45\n00:02:43.170 --> 00:02:46.990\nwhen we see the configuration for\nEIGRP 1 right here.\n\n46\n00:02:46.990 --> 00:02:48.780\nThat's autonomous system one.\n\n47\n00:02:48.780 --> 00:02:53.580\nIn here, I'll be able to see whether or\nnot I'm in the right areas and so on.\n\n48\n00:02:53.580 --> 00:02:55.955\nSo, I said area, areas always PF right,\n\n49\n00:02:55.955 --> 00:02:57.600\nautonomous system that's\nwhat I'm looking for.\n\n50\n00:02:57.600 --> 00:03:02.070\nSo, EIGRP 1, I am in the right autonomous\nsystem and looking down here I can see\n\n51\n00:03:02.070 --> 00:03:05.560\nthe interface is participating in it and\nthere's the two interfaces that\n\n52\n00:03:05.560 --> 00:03:11.330\nare pointing out to my neighbors and\nI've got a redistribute command here.\n\n53\n00:03:11.330 --> 00:03:16.100\nIt says I am redistributing connected\nroutes over to the other guys.\n\n54\n00:03:16.100 --> 00:03:19.203\nWell, my loop back interface is\na connected interface, so that means I'm\n\n55\n00:03:19.203 --> 00:03:22.280\nredistributing connected in the EIGRP and\nthey should learn it that way.\n\n56\n00:03:22.280 --> 00:03:24.530\nLet me see if I have any\nother interfaces on here,\n\n57\n00:03:24.530 --> 00:03:27.940\nI'm gonna do a show IPV6 interface brief.\n\n58\n00:03:27.940 --> 00:03:29.829\nAnd if we're redistributing\nconnected routes,\n\n59\n00:03:30.900 --> 00:03:32.300\nall of my interfaces should make it over.\n\n60\n00:03:32.300 --> 00:03:36.131\nLooks like I've got some other loop back\ninterfaces here, like loop back 16 and\n\n61\n00:03:36.131 --> 00:03:39.230\nloop back 26,\nthey should be redistributed also, right?\n\n62\n00:03:39.230 --> 00:03:40.892\nSo I'm going to write\nthose networks down and\n\n63\n00:03:40.892 --> 00:03:42.869\nwe'll just see if they're\nmaking it over there too.\n\n64\n00:03:42.869 --> 00:03:49.232\nSo I've got 2001:1600 and 2001:2600.\n\n65\n00:03:49.232 --> 00:03:52.320\nJust writing those down so when I jump\nto the other guys I can verify it.\n\n66\n00:03:52.320 --> 00:03:54.342\nNow that was NYWAN1.\n\n67\n00:03:54.342 --> 00:03:56.537\nI'm gonna jump over to NYEDGE1.\n\n68\n00:03:56.537 --> 00:04:00.136\nAnd let's just see what's\nmaking it over here, all right?\n\n69\n00:04:00.136 --> 00:04:03.329\nSo I'm gonna do a show ipv6 route and\n\n70\n00:04:03.329 --> 00:04:07.760\nI'm gonna filter it down\nto just the EIGRP routes.\n\n71\n00:04:07.760 --> 00:04:09.790\nI don't want to mess around\nwith any other protocols.\n\n72\n00:04:09.790 --> 00:04:13.976\nBecause EIGRP is what they're\ntalking about and when I look at it,\n\n73\n00:04:13.976 --> 00:04:16.086\nthere's 2001:2600.\n\n74\n00:04:16.086 --> 00:04:19.740\nI don't see 2001:1600 and\nI see a couple of other routes.\n\n75\n00:04:19.740 --> 00:04:22.370\nBut this guy right here, 2001:2600,\n\n76\n00:04:22.370 --> 00:04:27.855\nthat's one of the loop back\ninterfaces from from and NYWAN1 and\n\n77\n00:04:27.855 --> 00:04:32.965\nit's showing as EX an EIGRP\nexternal route and\n\n78\n00:04:32.965 --> 00:04:36.425\nthat's exactly what I expect to see for\nsomething that's being redistributed.\n\n79\n00:04:36.425 --> 00:04:40.625\nSo that network is being redistributed\nfrom connected into EIGRP for IPv6.\n\n80\n00:04:40.625 --> 00:04:44.175\nAnd I'm seeing it right here\nin autonomous system one, so\n\n81\n00:04:44.175 --> 00:04:48.130\nsome of my other loop backs aren't\nshowing up, but this one is.\n\n82\n00:04:48.130 --> 00:04:51.400\nLet's take a look at NYEDGE2 and\nsee if it's the same thing.\n\n83\n00:04:51.400 --> 00:04:56.200\nI expect that it is, so if we look here,\nI'm gonna do the same thing,\n\n84\n00:04:56.200 --> 00:05:02.100\nshow IPV6 route, and\njust show me the EIGRP routes.\n\n85\n00:05:02.100 --> 00:05:04.954\nAnd when we look at that,\nit's the same exact thing, right?\n\n86\n00:05:04.954 --> 00:05:09.530\nI've got that 2001:2600 and\nit's an external EIGRP route and\n\n87\n00:05:09.530 --> 00:05:12.280\nI'm not seeing any of the others.\n\n88\n00:05:12.280 --> 00:05:16.584\nSo I am learning some routes and\nI'm not learning others and\n\n89\n00:05:16.584 --> 00:05:22.195\nwhat that immediately makes me think\nof is, we could have pre-fixed lists.\n\n90\n00:05:22.195 --> 00:05:23.884\nWe could route maps, right?\n\n91\n00:05:23.884 --> 00:05:26.459\nThat are filtering the routes we\nadvertised with the routes we learned.\n\n92\n00:05:27.540 --> 00:05:30.880\nWe could have bad metrics, if the metrics\nare too large, they won't come in.\n\n93\n00:05:30.880 --> 00:05:33.290\nWe could have interfaces that are down.\n\n94\n00:05:33.290 --> 00:05:36.190\nWe're not going to advertise a route\nunless it's in our own routing table.\n\n95\n00:05:36.190 --> 00:05:39.340\nSo there's a number of different\nthings that could be stopping us.\n\n96\n00:05:39.340 --> 00:05:44.270\nBecause I'm not seeing\nthe route on EDGE1 or EDGE2,\n\n97\n00:05:44.270 --> 00:05:47.940\nthen best place to start troubleshooting\nthis is going to be NYWAN1, right?\n\n98\n00:05:47.940 --> 00:05:52.570\nIf NYWAN1 is not advertising the route,\nneither of these guys will get it.\n\n99\n00:05:52.570 --> 00:05:55.970\nIf it was a problem up here, it's unlikely\nthat we would have the same problem\n\n100\n00:05:55.970 --> 00:05:58.880\non EDGE1 and EDGE2, so\nI doubt the problem's on the other side.\n\n101\n00:05:58.880 --> 00:06:01.490\nBut that's the logic behind me\npicking where I\"m going to start.\n\n102\n00:06:01.490 --> 00:06:05.370\nI'm gonna start at NYWAN1, cause it's\nthe most likely source of the problem.\n\n103\n00:06:05.370 --> 00:06:07.050\nSo I'm gonna jump over to NYWAN1 and\n\n104\n00:06:07.050 --> 00:06:09.500\nI just wanna take a look\nat its configuration.\n\n105\n00:06:09.500 --> 00:06:14.920\nGet a little better understanding of how\nit's set up, and kinda go from there.\n\n106\n00:06:14.920 --> 00:06:16.680\nAnd I'm just gonna do a show run, and\n\n107\n00:06:16.680 --> 00:06:18.760\nwe'll look at the whole running\nconfiguration this time.\n\n108\n00:06:18.760 --> 00:06:23.540\nWell just kinda parse through it and\nthe reason I'm doing that, is EIGRP under\n\n109\n00:06:23.540 --> 00:06:28.290\nIPv6 is configured partly in the routing\nprocess and partly on the interface.\n\n110\n00:06:28.290 --> 00:06:30.470\nSo I really need to look both places and\n\n111\n00:06:30.470 --> 00:06:33.300\na show running config is\nthe easiest way to spot that.\n\n112\n00:06:33.300 --> 00:06:39.870\nSo when I come through the running config,\nremember this guy right here 2001:2600.\n\n113\n00:06:39.870 --> 00:06:43.570\nThat's the only route that was actually\nshowing up on the other sides.\n\n114\n00:06:43.570 --> 00:06:46.410\nI saw that one over on EDGE1 and EDGE2.\n\n115\n00:06:46.410 --> 00:06:49.590\nBut this guy, 2001:1600,\nhe didn't show up.\n\n116\n00:06:49.590 --> 00:06:52.180\nNow he's not mentioned in\nthe troubleshooting ticket, so\n\n117\n00:06:52.180 --> 00:06:54.870\nthat may be okay, but\nthe one that's really important to me,\n\n118\n00:06:54.870 --> 00:06:57.690\nthis guy right here,\nhe didn't show up either.\n\n119\n00:06:57.690 --> 00:07:00.280\nAnd if I look at the configuration\nof those three interfaces,\n\n120\n00:07:00.280 --> 00:07:01.660\nthey're all the same, right?\n\n121\n00:07:01.660 --> 00:07:05.390\nThere's no EIGRP configuration to be\nfound right here on the interface.\n\n122\n00:07:05.390 --> 00:07:08.280\nAnd that's what I really wanted to do,\nI wanted to compare and\n\n123\n00:07:08.280 --> 00:07:12.450\ninterface that worked against and\ninterface that didn't work and\n\n124\n00:07:12.450 --> 00:07:15.700\njust look to see if there's a different\ncommand there, some kind of variation.\n\n125\n00:07:15.700 --> 00:07:16.880\nI don't see one.\n\n126\n00:07:16.880 --> 00:07:22.360\nSo now I need to keep moving and\nlook at the routing protocol itself.\n\n127\n00:07:22.360 --> 00:07:26.588\nI guess I also should probably\npay attention to Serial 010 and\n\n128\n00:07:26.588 --> 00:07:29.650\nSerial 011, those outbound interfaces.\n\n129\n00:07:29.650 --> 00:07:32.270\nThat were sending\nthe route those interfaces.\n\n130\n00:07:32.270 --> 00:07:34.720\nThere could be something on them\nthat's causing the problem.\n\n131\n00:07:35.870 --> 00:07:38.780\nAnd so if I look at Serial 10 and\n\n132\n00:07:38.780 --> 00:07:43.303\nSerial 11, that's these guys right\nhere and see how they're in EIGRP?\n\n133\n00:07:43.303 --> 00:07:47.840\nSo they've got IPv6 EIGRP1 right there,\nthat's, like I said,\n\n134\n00:07:47.840 --> 00:07:50.470\nthe EIGRP configuration is\npartly on the interface and\n\n135\n00:07:50.470 --> 00:07:52.684\npartly on the routing process,\nso I see them here.\n\n136\n00:07:52.684 --> 00:07:57.360\nNow, my loop backs didn't\nhave IPv6 EIGRP1 and\n\n137\n00:07:57.360 --> 00:08:00.300\nthat's because we're redistributing,\nright, so we don't need them in here.\n\n138\n00:08:00.300 --> 00:08:03.570\nThey stay as connected routes, and\nwe redistribute them into EIGRP, but\n\n139\n00:08:03.570 --> 00:08:07.050\nthese guys are actively\nparticipating in EIGRP, and\n\n140\n00:08:07.050 --> 00:08:10.160\nI know that's working cuz I am seeing some\nof my routes make it to the other side.\n\n141\n00:08:11.570 --> 00:08:14.640\nAll right,\nthen here's my EIGRP configuration.\n\n142\n00:08:14.640 --> 00:08:18.525\nRouter EIGRP 10 or wait,\nnope, that's for IPV4.\n\n143\n00:08:18.525 --> 00:08:21.030\n[LAUGH] Those are not IPV6 addresses.\n\n144\n00:08:21.030 --> 00:08:24.770\nSo, that's not it, but if I look\na little bit further down, there we go.\n\n145\n00:08:24.770 --> 00:08:26.640\nIPV6 router EIGRP1.\n\n146\n00:08:26.640 --> 00:08:30.250\nAll right, so\nit's got the redistribute command, and\n\n147\n00:08:30.250 --> 00:08:33.470\nhere we can redistributing connected,\nit's got a metric defined.\n\n148\n00:08:33.470 --> 00:08:36.760\nAnd you've got to remember your metric,\nhow it's got bandwidth and\n\n149\n00:08:36.760 --> 00:08:41.390\ndelay and load reliability and MTU.\n\n150\n00:08:41.390 --> 00:08:44.790\nAnd some of these can be bad, some can\nbe good, but at the end of the day,\n\n151\n00:08:44.790 --> 00:08:48.910\nthe only ones we use by default\nare bandwidth and delay.\n\n152\n00:08:48.910 --> 00:08:52.100\nAnd so no matter how low or\nhigh those are, it's gonna be okay.\n\n153\n00:08:52.100 --> 00:08:55.623\nWe have maximum metrics on other things,\nbut not on bandwidth and delay, so\n\n154\n00:08:55.623 --> 00:08:57.250\nthey can actually be quite large.\n\n155\n00:08:57.250 --> 00:08:59.140\nA thousand each is no big deal, right?\n\n156\n00:08:59.140 --> 00:09:01.100\nThose are nice,\nnormal numbers right there.\n\n157\n00:09:01.100 --> 00:09:05.400\nAnd so I'm not worried about any crazy\nmetric stuff, at least not right now.\n\n158\n00:09:05.400 --> 00:09:08.810\nAnd then as I look a little bit\nfurther on the redistribute command,\n\n159\n00:09:08.810 --> 00:09:12.010\nI can see there is a route map, so\nthere's a route map in place and\n\n160\n00:09:12.010 --> 00:09:14.970\nthat very well could be\nfiltering out our traffic.\n\n161\n00:09:14.970 --> 00:09:17.583\nFortunately that's the next\nthing in the config,\n\n162\n00:09:17.583 --> 00:09:21.607\nI can see the route map right here and\nit's saying match IPv6 address REDIST.\n\n163\n00:09:21.607 --> 00:09:25.590\nAnd that means there's an address list,\nwhich is right down here.\n\n164\n00:09:25.590 --> 00:09:29.950\nAnd sure enough,\nIPv6 access-list REDIST and\n\n165\n00:09:29.950 --> 00:09:34.040\nit's got the 2001:2600 network.\n\n166\n00:09:34.040 --> 00:09:36.650\nThat's the one that is making it across.\n\n167\n00:09:36.650 --> 00:09:39.290\nNobody else is on the list, and\nso they're not making it across.\n\n168\n00:09:39.290 --> 00:09:42.560\nNow, I know there was more than one\nloop back that wasn't making it over but\n\n169\n00:09:42.560 --> 00:09:46.140\nat the end of the day the troubleshooting\nticket is only talking about loop back\n\n170\n00:09:46.140 --> 00:09:51.040\nsix's interface and so what we need\nto do is update this access list\n\n171\n00:09:51.040 --> 00:09:54.560\nto include loop back six's address, right?\n\n172\n00:09:54.560 --> 00:09:56.750\nAnd so, I can do a show run for\n\n173\n00:09:56.750 --> 00:10:02.300\ninterface loopback 6 to get its network\nand I'm gonna add that to the access list.\n\n174\n00:10:02.300 --> 00:10:09.720\nSo, if I do a IPv6 access-list and\nit was called REDIST, right.\n\n175\n00:10:09.720 --> 00:10:13.150\nThat was the distribution list and\nthen I just need to get us added to it.\n\n176\n00:10:13.150 --> 00:10:17.919\nI'm gonna say permit IPv6\n\n177\n00:10:17.919 --> 00:10:23.519\n2001:606:606 and\n\n178\n00:10:23.519 --> 00:10:29.330\nthen it was ::/64, right?\n\n179\n00:10:29.330 --> 00:10:31.681\nI'm looking at my notes here,\nbecause I wrote that down earlier on,\n\n180\n00:10:31.681 --> 00:10:33.277\notherwise I wouldn't have remembered that.\n\n181\n00:10:33.277 --> 00:10:38.978\nBut it was 2001:606:606 ::6/64.\n\n182\n00:10:38.978 --> 00:10:41.979\nI'm just saying :: so\nwe get that whole network, right?\n\n183\n00:10:41.979 --> 00:10:44.630\nSo I'm gonna be permitting that.\n\n184\n00:10:44.630 --> 00:10:49.200\nAnd with IPv6 access list, they're always\nextended, so you have a source and\n\n185\n00:10:49.200 --> 00:10:52.590\na destination, and when it's a route map,\nyou don't really need that destination, so\n\n186\n00:10:52.590 --> 00:10:55.180\nI'm just gonna put any on that to flag it.\n\n187\n00:10:55.180 --> 00:10:58.710\nAnd that should fix that,\nif I look at my access list now, so\n\n188\n00:10:58.710 --> 00:11:05.290\nI'm gonna do a show access-list.\n\n189\n00:11:05.290 --> 00:11:10.230\nAll right, I can see the access-list and\nit's got that 2001:2600 network.\n\n190\n00:11:10.230 --> 00:11:12.270\nAnd now it's got\nthe 2001:606:606 network and\n\n191\n00:11:12.270 --> 00:11:16.720\nit's already got four matches on it,\nright?\n\n192\n00:11:16.720 --> 00:11:18.990\nThat means traffic is already\nhitting this route map.\n\n193\n00:11:18.990 --> 00:11:23.660\nEIGRP is fast, it starts advertising right\naway, and soit's already getting matches.\n\n194\n00:11:23.660 --> 00:11:25.610\nI bet we'll see that solves our problem.\n\n195\n00:11:25.610 --> 00:11:28.490\nSo, let's jump out to NYEDGE1 and see.\n\n196\n00:11:28.490 --> 00:11:30.920\nSo I still have my show IP route here,\n\n197\n00:11:30.920 --> 00:11:36.340\nwhich showed the 2001 2600 network,\nbut not the 2001 606 network.\n\n198\n00:11:36.340 --> 00:11:42.030\nAnd if I rerun that command, there it is,\n\n199\n00:11:42.030 --> 00:11:45.210\nnow I've got 2001 606 right there,\nand we're in business.\n\n200\n00:11:45.210 --> 00:11:49.120\nI'll check EDGE2 just to be on the safe\nside, again, you might think we've\n\n201\n00:11:49.120 --> 00:11:52.390\nsolved the whole problem, and it turns\nout they sneak a second part into it.\n\n202\n00:11:52.390 --> 00:11:55.840\nSo I definitely want to double check that,\nbut I've got it there too.\n\n203\n00:11:55.840 --> 00:12:00.930\nAll right, so in this case the problem was\nthat it just wasn't redistributed right?\n\n204\n00:12:00.930 --> 00:12:04.430\nThe redistribute had a route map,\nthe route map used an access list.\n\n205\n00:12:04.430 --> 00:12:08.350\nThe access list did not include\nloop back six's network.\n\n206\n00:12:08.350 --> 00:12:10.350\nOnce we added that on there, it was fixed.\n\n207\n00:12:10.350 --> 00:12:12.040\nAnd now it shows up in the other routers.\n\n208\n00:12:12.040 --> 00:12:13.630\nSo, this problem is solved.\n\n209\n00:12:13.630 --> 00:12:15.050\nSo that takes care of this ticket.\n\n210\n00:12:15.050 --> 00:12:20.524\nStay tuned we've got more\ntroubleshooting tickets coming up next.\n\n211\n00:12:20.524 --> 00:12:26.679\n[MUSIC]\n\n",
          "vimeoId": "151030989"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #4` from set #10. The trouble ticket states that \"You are unable to ping 192.168.32.5 (NYCORE2) from 192.168.16.5 (NYCORE1), yet you can ping 192.168.32.1. \"",
          "length": "1061",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-10-4-set_10_issue_4-121015-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-10-4-set_10_issue_4-121015-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-10-4-set_10_issue_4-121015-1-sm.jpg",
          "title": "Set 10 Issue 4",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:07.928\n[MUSIC]\n\n2\n00:00:07.928 --> 00:00:13.610\nAll right, welcome back to another Cisco\ntroubleshooting episode here on ITProTV.\n\n3\n00:00:13.610 --> 00:00:17.550\nWe're jumping back into set ten and\ntackling issue number four, and\n\n4\n00:00:17.550 --> 00:00:21.160\nit looks like we're gonna take\na step back into the world of IPv4.\n\n5\n00:00:21.160 --> 00:00:24.350\nWe've been doing IPv6 the last few,\nbut this ticket reads like this.\n\n6\n00:00:24.350 --> 00:00:29.747\nIt says,\nyou are unable to ping 192.168.32.5,\n\n7\n00:00:29.747 --> 00:00:34.420\nwhich is NYCORE2 from 192.168.16.5,\n\n8\n00:00:34.420 --> 00:00:40.980\nwhich is NYCORE1, yet\nyou can ping 192.168.32.1.\n\n9\n00:00:40.980 --> 00:00:42.210\nWell, that's just confusing.\n\n10\n00:00:42.210 --> 00:00:44.480\nAll right, so the ticket doesn't\nmake a while lot of sense.\n\n11\n00:00:44.480 --> 00:00:47.460\nWe need to go and basically see\nthis in action to get an idea.\n\n12\n00:00:47.460 --> 00:00:48.550\nBut at a minimum,\n\n13\n00:00:48.550 --> 00:00:54.140\nwhat we can take away from is that NYCORE1\nis having a problem pinging NYCORE2.\n\n14\n00:00:54.140 --> 00:00:56.390\nAnd it looks like we've got two\ndifferent networks involved.\n\n15\n00:00:56.390 --> 00:00:58.610\nSo we've probably got\na routing issue on this one,\n\n16\n00:00:58.610 --> 00:01:00.560\nand we just need to find\nout what's happening.\n\n17\n00:01:00.560 --> 00:01:04.420\nSo let's jump over to NYCORE1,\nsince it's our problem.\n\n18\n00:01:04.420 --> 00:01:09.040\nAnd if I look at the topology,\nNYCORE1 that's this switch, right here.\n\n19\n00:01:09.040 --> 00:01:11.268\nAnd it's 192.168.16.5.\n\n20\n00:01:11.268 --> 00:01:15.539\nAnd it's trying to ping 192.168.32.5,\n\n21\n00:01:15.539 --> 00:01:20.470\nwhich is NYCORE2 right here,\nand that's failing.\n\n22\n00:01:20.470 --> 00:01:24.259\nBut it's telling me that\nwe can ping 192.168.32.1.\n\n23\n00:01:24.259 --> 00:01:26.250\nNow, what is that?\n\n24\n00:01:26.250 --> 00:01:29.270\nThat is NYEDGE2 way up here.\n\n25\n00:01:29.270 --> 00:01:34.300\nSo basically, if NYCORE1 tries\nto ping edge two, it gets there.\n\n26\n00:01:34.300 --> 00:01:36.710\nIf it tries to ping core two, it doesn't.\n\n27\n00:01:36.710 --> 00:01:38.240\nAnd looking at this topology,\n\n28\n00:01:38.240 --> 00:01:41.860\nthere's actually a few different paths\nwe can take to get to that destination.\n\n29\n00:01:41.860 --> 00:01:44.360\nSo we're gonna need to figure out\nthose paths and look at that.\n\n30\n00:01:44.360 --> 00:01:47.430\nBut before we start, let's just jump\nover to CORE1 and verify that we\n\n31\n00:01:47.430 --> 00:01:51.720\nare interpreting the question properly cuz\nI might be reading this question wrong.\n\n32\n00:01:51.720 --> 00:01:52.870\nIt's kind of written confusingly.\n\n33\n00:01:52.870 --> 00:01:56.320\nSo let's jump over to CORE1 and\nsee if we can't sort that out.\n\n34\n00:01:56.320 --> 00:02:01.010\nSo on NYCORE1, I'm basically\ngonna verify it's IP address.\n\n35\n00:02:01.010 --> 00:02:07.280\nIt's telling me that I'm 192.168.16.5 and\nI doubt it's lying on that.\n\n36\n00:02:07.280 --> 00:02:08.520\nSo let's find out.\n\n37\n00:02:08.520 --> 00:02:13.630\nIf I do a show IP Interface brief, and\nI'll exclude the other signed interfaces,\n\n38\n00:02:13.630 --> 00:02:17.720\nSure enough my Vlan1\ninterface is 192.168.16.5.\n\n39\n00:02:17.720 --> 00:02:24.320\nNow, I'm trying to ping 192.168.32.5,\nthat's a different network.\n\n40\n00:02:24.320 --> 00:02:26.650\nA network that I'm not plugged in to.\n\n41\n00:02:26.650 --> 00:02:29.300\nAnd so that means I'm gonna need\nto know a route to get there or\n\n42\n00:02:29.300 --> 00:02:30.870\nhave a default gateway.\n\n43\n00:02:30.870 --> 00:02:32.920\nWell if this is a layer two switch,\n\n44\n00:02:32.920 --> 00:02:37.800\nyou can spot gateways really easy\nin the config by doing a show run,\n\n45\n00:02:37.800 --> 00:02:42.440\npiping it into the include command and\nlooking for the word gateway, all right?\n\n46\n00:02:42.440 --> 00:02:46.780\nI don't have one or you could\neven search for the word default.\n\n47\n00:02:46.780 --> 00:02:50.610\nThat's another one that it might turn\nup under, and it's not there either.\n\n48\n00:02:50.610 --> 00:02:55.320\nIf this is a layer three switch, then we\nmight have a static default route defined.\n\n49\n00:02:55.320 --> 00:02:58.530\nAnd if that's the case, we'll just see it\nin our routing table or dynamic protocol,\n\n50\n00:02:58.530 --> 00:03:00.470\nwe'll see it in the routing table also.\n\n51\n00:03:00.470 --> 00:03:05.171\nSo I'll just do a show IP route and see if\nI have a default route there and I don't.\n\n52\n00:03:05.171 --> 00:03:08.825\nOkay, so if I don't have a default route\nto be able to get to it, the only other\n\n53\n00:03:08.825 --> 00:03:12.520\nway I'm gonna get there is if I learn\nit from a dynamic routing protocol.\n\n54\n00:03:12.520 --> 00:03:17.450\nAnd as I look at my list,\nsure enough I'm learning 192.168.32,\n\n55\n00:03:17.450 --> 00:03:19.691\nI'm actually learning it twice.\n\n56\n00:03:19.691 --> 00:03:22.570\nAnd we look at that,\nwhat's the difference?\n\n57\n00:03:22.570 --> 00:03:25.072\nWell it's actually not much of\na difference at all here, is it?\n\n58\n00:03:25.072 --> 00:03:30.459\nI'm learning 192.160.32 twice with\ntwo different subnet masks, right?\n\n59\n00:03:30.459 --> 00:03:33.094\nI'm learning a /24 and a /27.\n\n60\n00:03:33.094 --> 00:03:35.900\nNow normally that would be a red flag for\nme.\n\n61\n00:03:35.900 --> 00:03:37.333\nI'd say oop, there's a problem, right?\n\n62\n00:03:37.333 --> 00:03:41.757\nI'm learning two routes,\none more specific than the other.\n\n63\n00:03:41.757 --> 00:03:46.089\nRemember, when you learn\na route like this,\n\n64\n00:03:46.089 --> 00:03:49.423\nthe /27 will trump the /24.\n\n65\n00:03:49.423 --> 00:03:52.230\nThe /27 is more specific.\n\n66\n00:03:52.230 --> 00:03:57.164\nWell in this case,\nI'm pinging 192.168.32.5, and\n\n67\n00:03:57.164 --> 00:04:03.259\n32.5 would fall under this /27 so\nit's gonna match this one and not match.\n\n68\n00:04:03.259 --> 00:04:04.210\nWell, it does match the one above it.\n\n69\n00:04:04.210 --> 00:04:05.530\nBut it's gonna use the bottom one, and\n\n70\n00:04:05.530 --> 00:04:08.150\nI say that would normally\nbe a red flag for me.\n\n71\n00:04:08.150 --> 00:04:09.250\nWhy isn't it?\n\n72\n00:04:09.250 --> 00:04:12.450\nWell it's not a red flag for me,\nbecause if I look over here,\n\n73\n00:04:12.450 --> 00:04:16.400\nI've got two different routes to\nget there, and where do they go?\n\n74\n00:04:16.400 --> 00:04:17.171\nThey go to the same place.\n\n75\n00:04:17.171 --> 00:04:21.800\nThey both go to 192.168.16.1\non my Vlan1 interface.\n\n76\n00:04:21.800 --> 00:04:24.770\nAnd since they go to the same place,\nwhat do I care which one they follow.\n\n77\n00:04:24.770 --> 00:04:28.450\nSo yes, I've got two routes and\nno it doesn't bother me, right?\n\n78\n00:04:28.450 --> 00:04:30.270\nSo [LAUGH] that's not our problem.\n\n79\n00:04:30.270 --> 00:04:32.105\nBut we do need to be aware of it, okay?\n\n80\n00:04:32.105 --> 00:04:35.425\nNow I don't know who 192.168.16.1 is.\n\n81\n00:04:35.425 --> 00:04:39.141\nLet's look at our diagram and\nsee if they've names to tell us.\n\n82\n00:04:39.141 --> 00:04:47.464\n192.168.16.1, looking at my topology\nthat is NYEDGE1 right here, okay?\n\n83\n00:04:47.464 --> 00:04:52.642\nSo when I try and reach 192.168.32.5,\n\n84\n00:04:52.642 --> 00:04:58.298\nI'm going up here to NYEDGE1,\nthat seems a little odd.\n\n85\n00:04:58.298 --> 00:05:02.838\nBut NYEDGE1 could send me over here\nto NYEDGE2, and I could get to that\n\n86\n00:05:02.838 --> 00:05:07.240\ndestination, so that works for\nme but it's crossing a serial link.\n\n87\n00:05:07.240 --> 00:05:09.770\nThat seems a little sub optimal,\nall right?\n\n88\n00:05:09.770 --> 00:05:12.980\nI've got Ethernet links down here that\nshould be able to get me to it, and\n\n89\n00:05:12.980 --> 00:05:14.360\nthat would be faster.\n\n90\n00:05:14.360 --> 00:05:17.530\nBut it looks like I'm taking\na sub-optimal route that even in itself\n\n91\n00:05:17.530 --> 00:05:19.950\nisn't a problem either because\nremember the troubleshooting ticket.\n\n92\n00:05:19.950 --> 00:05:22.940\nThey're not telling me we need\nthe fastest route or best route.\n\n93\n00:05:22.940 --> 00:05:27.350\nThey're just saying I can't even ping,\nso I'm not getting to the other side.\n\n94\n00:05:27.350 --> 00:05:28.890\nLet's see if we can find out why.\n\n95\n00:05:28.890 --> 00:05:33.366\nSo when I exit NYCORE1,\nwe're exiting Vlan 1, and\n\n96\n00:05:33.366 --> 00:05:37.747\nVlan 1 is apparently taking\nus up here to NYEDGE1.\n\n97\n00:05:37.747 --> 00:05:39.000\nLet's make sure it really is.\n\n98\n00:05:39.000 --> 00:05:42.950\nLet me make sure that I\ncan truly ping 16.1 and\n\n99\n00:05:42.950 --> 00:05:46.715\nverify that information is all correct and\nI'm not being kinda led astray.\n\n100\n00:05:46.715 --> 00:05:48.285\nSo that happens.\n\n101\n00:05:48.285 --> 00:05:50.485\nSometimes you see something in\na config and you're like oh,\n\n102\n00:05:50.485 --> 00:05:53.245\nthat's got to be the problem, and\nit turns out not to be the problem.\n\n103\n00:05:53.245 --> 00:05:55.475\nBut it's like a distraction\nthat kind of draws you into it.\n\n104\n00:05:55.475 --> 00:06:02.445\nSo what I'm gonna do is I'm gonna ping\n192.168.16.1 that's my default gateway.\n\n105\n00:06:02.445 --> 00:06:03.839\nSo right now, if I try and\n\n106\n00:06:03.839 --> 00:06:09.501\nget to that 192.168.32.5 I'm going\nto 192.168.16.1 and I can get there.\n\n107\n00:06:09.501 --> 00:06:11.486\nAll right, so I am able to get there.\n\n108\n00:06:11.486 --> 00:06:20.240\nAnd if I try and ping 192.168.32.5,\nI don't get there.\n\n109\n00:06:20.240 --> 00:06:25.640\nOkay, so I am making it to the next stop,\nbut I'm not getting beyond it.\n\n110\n00:06:25.640 --> 00:06:27.900\nWell, where's the breakdown?\n\n111\n00:06:27.900 --> 00:06:29.730\nI've said this in multiple\ntroubleshooting issues.\n\n112\n00:06:29.730 --> 00:06:32.980\nWhen you've got more than one device in\nbetween you and a destination, it's always\n\n113\n00:06:32.980 --> 00:06:37.090\na good idea to do a traceroute and see\nif you can turn up where the failure is.\n\n114\n00:06:37.090 --> 00:06:43.570\nSo I'm gonna go traceroute to\n192.168.32.5, so I can see where it stops.\n\n115\n00:06:43.570 --> 00:06:44.730\nI know the first part.\n\n116\n00:06:44.730 --> 00:06:47.430\nI know I'm gonna leave NYCORE1.\n\n117\n00:06:47.430 --> 00:06:51.680\nAnd I'm gonna go up to NYEDGE1 and\nI know I can get there.\n\n118\n00:06:51.680 --> 00:06:53.820\nBut I don't know where\nI'm going from there, and\n\n119\n00:06:53.820 --> 00:06:56.140\nthat's what I want the trace\nroute to show me and so\n\n120\n00:06:56.140 --> 00:07:00.470\nif I come back here to the trace route,\nI can see it's still thinking.\n\n121\n00:07:00.470 --> 00:07:01.370\nThere we go.\n\n122\n00:07:01.370 --> 00:07:06.510\nI made it to NYEDGE1, so I hit that\nfirst step that I knew I could get to,\n\n123\n00:07:06.510 --> 00:07:10.030\nI'm really curious to see what that\nsecond step is and third and beyond that.\n\n124\n00:07:10.030 --> 00:07:15.800\nSo the next step is 192.168.1.3 and\nthen it dies, okay.\n\n125\n00:07:15.800 --> 00:07:21.275\nSo I need to figure out who 192.168.1.3\nis because they're either the problem or\n\n126\n00:07:21.275 --> 00:07:24.026\nthey're directly connected to the problem.\n\n127\n00:07:24.026 --> 00:07:27.220\nThey're gonna help me narrow\nthis down to just two devices.\n\n128\n00:07:27.220 --> 00:07:33.360\nAnd so if I go back to my diagram,\nI'm just gonna look for 192.168.1.3.\n\n129\n00:07:33.360 --> 00:07:38.844\nNow looking at it, this link right here,\non edge one it's serial\n\n130\n00:07:38.844 --> 00:07:44.443\n001 interface is 192.168.1.2 and\nit's a /31.\n\n131\n00:07:44.443 --> 00:07:47.497\nThat's kind of a weird\nsubnet to use right there.\n\n132\n00:07:47.497 --> 00:07:51.160\n/31 would include 0.2 And 0.3, so\n\n133\n00:07:51.160 --> 00:07:57.210\nthat would indicate that it's this\nlink which is leading me to NYWAN1.\n\n134\n00:07:57.210 --> 00:08:00.780\nNow, this network is getting\na little bit weird, isn't it?\n\n135\n00:08:00.780 --> 00:08:06.210\nIt looks like I'm going up to NYEDGE1,\nand down to NYWAN1,\n\n136\n00:08:06.210 --> 00:08:10.680\nbut NYWAN1 Is apparently\nkilling off my traffic.\n\n137\n00:08:10.680 --> 00:08:12.970\nSo let's go see if we\ncan't figure that out.\n\n138\n00:08:12.970 --> 00:08:17.480\nFirst off I want to verify\nthis guy is actually 0.3,\n\n139\n00:08:17.480 --> 00:08:21.000\n192.168.1.3 since that's\nwhat next in my list.\n\n140\n00:08:21.000 --> 00:08:24.590\nAnd if it is then I'll see what it can\nget to and what it can't, all right.\n\n141\n00:08:24.590 --> 00:08:27.070\nSo let me jump over to NYWAN1.\n\n142\n00:08:28.830 --> 00:08:31.780\nAnd we'll start off with just\na show IP interface brief to make\n\n143\n00:08:31.780 --> 00:08:33.620\nsure we're on the right host.\n\n144\n00:08:33.620 --> 00:08:39.450\nSo I'm expecting to see\nan interface that's 192.168.1.3 and\n\n145\n00:08:39.450 --> 00:08:42.881\nsure enough, there it is on serial 1/0.\n\n146\n00:08:42.881 --> 00:08:45.820\nSo my trace route stopped here.\n\n147\n00:08:45.820 --> 00:08:49.270\nI got to NYWAN1 and then I stopped.\n\n148\n00:08:49.270 --> 00:08:54.102\nNYWAN1 has a direct\nconnection NYEDGE2 which is\n\n149\n00:08:54.102 --> 00:09:00.150\n192.168.32.1 and\nit said I was able to ping that.\n\n150\n00:09:00.150 --> 00:09:04.900\nBut I wasn't able to ping 192.168.32.5\nwhich is the guy down here.\n\n151\n00:09:04.900 --> 00:09:09.990\nAnd so in theory, if I ping and\nget to here it should route me up to here,\n\n152\n00:09:09.990 --> 00:09:13.030\nand NYEDGE2 should be able\nto route me down to here.\n\n153\n00:09:13.030 --> 00:09:15.789\nNow since my trace route\nstopped at this node,\n\n154\n00:09:15.789 --> 00:09:20.260\nthat means either this guy is the problem\nor this guy up here is the problem.\n\n155\n00:09:20.260 --> 00:09:23.530\nI've kind of narrowed it down to these\ntwo devices now to find out connectivity.\n\n156\n00:09:23.530 --> 00:09:26.780\nNow, I doubt the problem is NYEDGE2.\n\n157\n00:09:26.780 --> 00:09:30.421\nBecause it's directly connected\nto the 192.168.32 network.\n\n158\n00:09:30.421 --> 00:09:32.800\nIt could have an ACL that's stopping me.\n\n159\n00:09:32.800 --> 00:09:33.880\nThat's possible.\n\n160\n00:09:33.880 --> 00:09:36.222\nIt could be that this serial\ninterface is down, but\n\n161\n00:09:36.222 --> 00:09:37.917\nI'll see that over here on NYWAN1.\n\n162\n00:09:37.917 --> 00:09:40.340\nSo let's start here on NYWAN1 and\nsee what it's got.\n\n163\n00:09:42.140 --> 00:09:46.985\nSo that link that runs in between\nNYWAN1 and NYEDGE2, that's this serial\n\n164\n00:09:46.985 --> 00:09:52.696\n0/1/1 link and they didn't put an IPv4\naddress on here so it might not have one.\n\n165\n00:09:52.696 --> 00:09:53.254\nLet's look at it.\n\n166\n00:09:53.254 --> 00:10:01.260\nSerial 011 on NYWAN1 and sure enough,\nit doesn't have an IPv4 address at all.\n\n167\n00:10:01.260 --> 00:10:03.842\nWell does that mean I can't\nflow IP before traffic over it?\n\n168\n00:10:03.842 --> 00:10:04.957\nNot necessarily.\n\n169\n00:10:04.957 --> 00:10:08.220\nThere could be an IPv6 tunnel,\nlike a 6 to 4 tunnel on there or\n\n170\n00:10:08.220 --> 00:10:11.928\none of the various other tunnel types\nlike a Teredo tunnel or whatever.\n\n171\n00:10:11.928 --> 00:10:18.760\nLet's just see if there's anything\non that interface, serial 0/1/1.\n\n172\n00:10:18.760 --> 00:10:24.240\nNo, not looking like a tunnel this time.\n\n173\n00:10:24.240 --> 00:10:27.604\nActually if we had a tunnel, I would have\nseen it under show IP interface brief,\n\n174\n00:10:27.604 --> 00:10:28.420\nwouldn't I've?\n\n175\n00:10:28.420 --> 00:10:32.650\nTunnels show up as interfaces, and\nI don't have any tunnel interfaces.\n\n176\n00:10:32.650 --> 00:10:39.220\nAll right, so now when NYCORE1\ngoes to ping 192.168.32.5, right?\n\n177\n00:10:39.220 --> 00:10:41.470\nThat was the ping that I did originally.\n\n178\n00:10:41.470 --> 00:10:48.220\nI went up to EDGE1,\nI went down to WAN1, and WAN1,\n\n179\n00:10:48.220 --> 00:10:54.840\nI can't use this link cuz it's IPv6 only\nwith no tunnel, and I kinda stopped here.\n\n180\n00:10:54.840 --> 00:10:57.010\nWell, look at the possible\noutcomes of that.\n\n181\n00:10:57.010 --> 00:11:00.640\nI could go back this link to EDGE1,\nthat would mean I have a loop or\n\n182\n00:11:00.640 --> 00:11:02.960\nI could go back down to CORE1.\n\n183\n00:11:02.960 --> 00:11:05.240\nThis interface is a trunk.\n\n184\n00:11:05.240 --> 00:11:09.010\nBut it's trunking on the other networks,\nnot the 192.168.32 network, and so\n\n185\n00:11:09.010 --> 00:11:13.650\nI'd have to bounce through yet\nanother router on my way to a destination.\n\n186\n00:11:13.650 --> 00:11:14.795\nIt looks like I'm being\nrouted to a dead end.\n\n187\n00:11:14.795 --> 00:11:18.750\nAll right, it looks like I'm being\nsent to not the right place.\n\n188\n00:11:18.750 --> 00:11:21.010\nSo I need to figure out\nwhat's going on there.\n\n189\n00:11:21.010 --> 00:11:23.000\nAnd let's look NYWAN1's routing table.\n\n190\n00:11:24.070 --> 00:11:27.590\nThis one is actually looking like\na pretty good problem for us.\n\n191\n00:11:27.590 --> 00:11:29.570\nI think we're just being\nrouted in the wrong direction.\n\n192\n00:11:29.570 --> 00:11:33.936\nSo what I'm looking for here in\nthe routing table is 192.168.32, and\n\n193\n00:11:33.936 --> 00:11:34.651\nthere it is.\n\n194\n00:11:34.651 --> 00:11:42.800\n[LAUGH] There's two different connections\nto it, and look at these connections.\n\n195\n00:11:42.800 --> 00:11:44.770\nOne's a EIGRP route.\n\n196\n00:11:44.770 --> 00:11:50.620\nI can get to 192.168.32.0 via 192.168.1.2,\nokay?\n\n197\n00:11:50.620 --> 00:11:54.103\nSo I can get there by going\nright back across this link,\n\n198\n00:11:54.103 --> 00:11:57.150\nthat's that loop I was talking about,\nright?\n\n199\n00:11:57.150 --> 00:12:00.080\nNYWAN1 knows it can get there\nby going through this loop.\n\n200\n00:12:00.080 --> 00:12:03.434\nBut the second route, that's the one\nthat's gonna be our problem.\n\n201\n00:12:03.434 --> 00:12:04.850\nI guess second and third.\n\n202\n00:12:04.850 --> 00:12:09.566\nLook at this, 192.168.32.0/27 there's\n\n203\n00:12:09.566 --> 00:12:14.099\na specific route is directly\nconnected via Loopback1.\n\n204\n00:12:14.099 --> 00:12:14.889\nIt's a deadend.\n\n205\n00:12:14.889 --> 00:12:16.572\nThis is a bad route.\n\n206\n00:12:16.572 --> 00:12:22.879\nThe 192.168.32.0/27 network is\noverlapping with our other network and\n\n207\n00:12:22.879 --> 00:12:27.007\nbecause it's got a better\nprefix it's being preferred.\n\n208\n00:12:27.007 --> 00:12:31.582\nBecause it's a more specific prefix\nbecause of that /27 that it knows\n\n209\n00:12:31.582 --> 00:12:36.307\nthat this is better than the /24 and\nit's sending me to the sloop back and\n\n210\n00:12:36.307 --> 00:12:39.157\nthat's when my trace\nroute died here right?\n\n211\n00:12:39.157 --> 00:12:43.878\nMy trace route,\nI left in my core one I went to NYEDGE1,\n\n212\n00:12:43.878 --> 00:12:47.000\nI came to NYWAN1, and then it died.\n\n213\n00:12:47.000 --> 00:12:50.070\nBecause the next hop was a loop-back\ninterface with no other devices on\n\n214\n00:12:50.070 --> 00:12:51.170\nthe other end of it.\n\n215\n00:12:51.170 --> 00:12:53.330\nAnd that was the end of that path,\nall right.\n\n216\n00:12:53.330 --> 00:12:56.050\nSo I've got just a bad route.\n\n217\n00:12:56.050 --> 00:12:58.230\nIf I take that route out,\nwhat's gonna happen?\n\n218\n00:12:58.230 --> 00:13:01.670\nThis guy will stop advertising that /27.\n\n219\n00:13:01.670 --> 00:13:05.470\nAnd now the only one that'd be left\nis /24 and hopefully it's correct.\n\n220\n00:13:05.470 --> 00:13:06.930\nMaybe it isn't, but we'll find out.\n\n221\n00:13:06.930 --> 00:13:08.640\nBut let's get that bad one out of here.\n\n222\n00:13:08.640 --> 00:13:11.270\nNow there's a few different ways I\ncan get the bad one out of here.\n\n223\n00:13:11.270 --> 00:13:14.170\nThe easiest one is just to shut\nthe interface down, right?\n\n224\n00:13:14.170 --> 00:13:16.160\nIf I shut that loop back interface down,\n\n225\n00:13:16.160 --> 00:13:18.940\nthe route comes out of the routing table\nand this guy stops advertising it.\n\n226\n00:13:18.940 --> 00:13:20.490\nSo that's what I'm gonna do.\n\n227\n00:13:21.650 --> 00:13:23.580\nThat's attached to my loop back one.\n\n228\n00:13:23.580 --> 00:13:25.240\nSo I'm just going jump\ninto configuration and\n\n229\n00:13:25.240 --> 00:13:29.030\ngo into interface loop back one and\njust do a shut down, all right.\n\n230\n00:13:29.030 --> 00:13:31.450\nNow pros and cons with this.\n\n231\n00:13:31.450 --> 00:13:34.670\nOn a positive note it's very easy for\nme to undo this.\n\n232\n00:13:34.670 --> 00:13:36.850\nIf I make this change and\n\n233\n00:13:36.850 --> 00:13:39.050\nI decide it's not the right thing\nI can just come and undo it.\n\n234\n00:13:39.050 --> 00:13:40.890\nDo a no shutdown and it's back.\n\n235\n00:13:40.890 --> 00:13:45.220\nBut if this does solve the problem\nin real life land, we'd wanna delete\n\n236\n00:13:45.220 --> 00:13:48.750\nthat loopback interface and we'd wanna\ndelete any other configuration that\n\n237\n00:13:48.750 --> 00:13:51.330\nreferenced it cuz otherwise it'll\nmake confusion down the road.\n\n238\n00:13:51.330 --> 00:13:54.730\nYou might hire somebody new and they're\nlike why is that loopback interface down?\n\n239\n00:13:54.730 --> 00:13:56.930\nLet me do a no shutdown and\nbring it up, right?\n\n240\n00:13:56.930 --> 00:13:58.250\nAnd then this problem comes back again.\n\n241\n00:13:58.250 --> 00:14:00.310\nSo we don't wanna leave\nthe problem just laying around.\n\n242\n00:14:00.310 --> 00:14:02.490\nBut as a great way to\ntest the solution and\n\n243\n00:14:02.490 --> 00:14:04.980\nmake sure it's right,\nwe can do a quick shut down.\n\n244\n00:14:04.980 --> 00:14:07.240\nThat's gonna take it out\nof our routing table.\n\n245\n00:14:07.240 --> 00:14:11.450\nAnd if I do a show IP route now and\ntake a look at my routing table,\n\n246\n00:14:11.450 --> 00:14:17.350\nI should only have one way to get\nto 192.168.32, it's via EIGRP.\n\n247\n00:14:18.440 --> 00:14:21.139\nSo now I'm not advertising\nthat 27 anymore, and\n\n248\n00:14:21.139 --> 00:14:25.556\nif I jump back to our original source of\nthis issue it was all from NYCORE1, right?\n\n249\n00:14:25.556 --> 00:14:30.104\nIf I jump back to NYCORE1,\nwhere I left that trace route running,\n\n250\n00:14:30.104 --> 00:14:33.532\nbut if I get back to this guy and\nI do a show IP route.\n\n251\n00:14:33.532 --> 00:14:38.036\nIt used to have two routes from 192.68.32.\n\n252\n00:14:38.036 --> 00:14:39.736\nNow it only has one, and\n\n253\n00:14:39.736 --> 00:14:45.710\nit used to route them through\n192.68.16.1 and it still does.\n\n254\n00:14:45.710 --> 00:14:49.220\nSo that really hasn't changed,\nboth those routes went the same direction.\n\n255\n00:14:49.220 --> 00:14:53.900\nSo now I'm being routed\nthrough 192.168.16.1 and\n\n256\n00:14:53.900 --> 00:14:56.390\nfrom there where does it go?\n\n257\n00:14:56.390 --> 00:14:59.835\nWell hopefully,\nit goes to the destination, right?\n\n258\n00:14:59.835 --> 00:15:03.880\n192.168.16.1 we established\nwas NYEDGE1 up here, and\n\n259\n00:15:03.880 --> 00:15:07.960\nit was NYEDGE1 that was\nsending us down to NYWAN1.\n\n260\n00:15:07.960 --> 00:15:12.700\nBut I saw just a moment ago that NYWAN1\nis now sending that traffic to NYEDGE1.\n\n261\n00:15:12.700 --> 00:15:15.200\nSo if that's the case we've got a loop,\nright?\n\n262\n00:15:15.200 --> 00:15:16.002\nWell hopefully not.\n\n263\n00:15:16.002 --> 00:15:18.460\nHopefully NYEDGE1 has\nlearned about a route for us.\n\n264\n00:15:18.460 --> 00:15:22.478\nLet's go back to NYEDGE1 and\nsee what it's got.\n\n265\n00:15:22.478 --> 00:15:25.220\nNow, on NYEDGE1 oh, we've actually\nnever logged into this one so\n\n266\n00:15:25.220 --> 00:15:27.060\nwe didn't get to see where it was going.\n\n267\n00:15:27.060 --> 00:15:32.634\nSo let's just take a look at that and\nI'm gonna do a show IP route and\n\n268\n00:15:32.634 --> 00:15:37.529\nI'm gonna look for\nthat 192.168.32 network.\n\n269\n00:15:37.529 --> 00:15:38.029\nIt was 0.5.\n\n270\n00:15:39.470 --> 00:15:44.895\nSo there it is, and I've learned that\nvia 192.168.1.1 which is on my serial\n\n271\n00:15:44.895 --> 00:15:50.970\n0/0/0 interface, and if I look at\nthe diagram, that is this link up top.\n\n272\n00:15:50.970 --> 00:15:53.180\nIt's gonna send me across to EDGE2.\n\n273\n00:15:53.180 --> 00:16:00.840\nSo if NYCORE1 tried to ping 192.168.32\nsomething we're gonna go up here and\n\n274\n00:16:00.840 --> 00:16:05.230\nthen over here and\nthen down to get at that network, right?\n\n275\n00:16:05.230 --> 00:16:10.060\nAnd if NYWAN1 tries to get there,\nit's gonna go up here, over and then down.\n\n276\n00:16:10.060 --> 00:16:11.140\nIt's sub optimal, right?\n\n277\n00:16:11.140 --> 00:16:13.277\nThis link may be down or\noh, this link wasn't IPv4.\n\n278\n00:16:13.277 --> 00:16:16.860\nIt was IPv6 only, so that's why it'll\nskip that and go around that way.\n\n279\n00:16:16.860 --> 00:16:20.960\nSo our routing topology seems sound,\nthis seems self-optimal right?\n\n280\n00:16:20.960 --> 00:16:23.390\nbecause we have the Ethernet links but\nat least at sound.\n\n281\n00:16:23.390 --> 00:16:25.020\nLet's go see if it works.\n\n282\n00:16:25.020 --> 00:16:30.202\nSo I'm gonna go back to NYCORE1 and\nwhen we started this problem,\n\n283\n00:16:30.202 --> 00:16:34.830\nNYCORE1 was able to ping 192.168.32.1, but\n\n284\n00:16:34.830 --> 00:16:41.509\nit wasn't able to ping 0.5 and that's\nbecause 0.5 was covered by that /27.\n\n285\n00:16:41.509 --> 00:16:42.472\nThat one wasn't.\n\n286\n00:16:42.472 --> 00:16:46.650\nAnd when I ping 0.5,\nnow I'm able to get there.\n\n287\n00:16:46.650 --> 00:16:48.920\nSo we had overlapping routes,\n\n288\n00:16:48.920 --> 00:16:53.390\nand one route was good, the other route\nwas pointing to a loop back so it was bad.\n\n289\n00:16:53.390 --> 00:16:57.470\nBut the one that was bad had\na more specific subnet, right?\n\n290\n00:16:57.470 --> 00:17:01.780\nIt had a /27 and the more specific\nsubnet is always preferred if you have\n\n291\n00:17:01.780 --> 00:17:04.220\nduplicate routes,\nif you match more than one route,\n\n292\n00:17:04.220 --> 00:17:08.210\nyou pick the one with the most specific\nprefix, and that's what we had here.\n\n293\n00:17:08.210 --> 00:17:12.330\nSo once we tracked that down we just\nkilled that bad route, and now we're safe.\n\n294\n00:17:12.330 --> 00:17:14.910\nNow technically we solved the problem and\nthis one's done.\n\n295\n00:17:14.910 --> 00:17:18.070\nIn real life land we'd wanna go and\nget rid of that loopback interface and\n\n296\n00:17:18.070 --> 00:17:20.420\nget rid of any configuration\nthat referenced it.\n\n297\n00:17:20.420 --> 00:17:22.643\nIt was being advertised in the EIGRP,\nso we have to take it out there too.\n\n298\n00:17:22.643 --> 00:17:27.085\nBut once that's done, it's now clear and\nthe problem is solved.\n\n299\n00:17:27.085 --> 00:17:28.890\nAll right,\nwell that takes care of issue four.\n\n300\n00:17:28.890 --> 00:17:31.000\nWe've got one more issue in this set,\nissue five.\n\n301\n00:17:31.000 --> 00:17:32.504\nStay tuned cause it's coming up next.\n\n302\n00:17:32.504 --> 00:17:40.829\n[SOUND]\n\n",
          "vimeoId": "151030991"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #5` from set #10. The trouble ticket states that \"You are unable to ping 192.168.5.1 or 192.168.6.1 from NYCORE1 \"",
          "length": "563",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-10-5-set_10_issue_5-121015-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-10-5-set_10_issue_5-121015-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-10-5-set_10_issue_5-121015-1-sm.jpg",
          "title": "Set 10 Issue 5",
          "transcript": "WEBVTT\n\n1\n00:00:00.313 --> 00:00:08.382\n[MUSIC]\n\n2\n00:00:08.382 --> 00:00:13.550\nIt's that time again for another Cisco\ntrouble shooting question here on ITProTV.\n\n3\n00:00:13.550 --> 00:00:16.890\nWe're back on set number ten\ntackling issue number five.\n\n4\n00:00:16.890 --> 00:00:18.519\nAnd the trouble shooting\nticket reads like this,\n\n5\n00:00:18.519 --> 00:00:21.800\nit says you are unable to ping\n192.168.5.1 or 192.168.6.1 from NYCORE1.\n\n6\n00:00:21.800 --> 00:00:29.360\nWell NYCORE1 is one of our layer three\nswitches and it's having a little\n\n7\n00:00:29.360 --> 00:00:35.310\nbit of reach ability issues, so\nlet's look at our diagram and\n\n8\n00:00:35.310 --> 00:00:37.930\nsee if we can figure out\nwhere we're gonna be working.\n\n9\n00:00:37.930 --> 00:00:40.580\nWe know NYCORE1 is our problem, and\n\n10\n00:00:40.580 --> 00:00:46.240\non the diagram it shows it as\nbeing 192.168.16.5 on Vlan1.\n\n11\n00:00:46.240 --> 00:00:49.530\nAnd well, actually, right over here,\nwe've 192.168.5.1 and 6.1.\n\n12\n00:00:49.530 --> 00:00:55.180\nThose are the two people that we\ncan't ping that are on NYWAN1.\n\n13\n00:00:55.180 --> 00:00:59.750\nNow looking at it, those are on a gigabit\ninterface, and it's set for router on\n\n14\n00:00:59.750 --> 00:01:03.810\na stick, so they're doing some kind of\nsub interfaces and they're attached.\n\n15\n00:01:03.810 --> 00:01:05.650\nI see there's sub-interface .5 and .6 so\n\n16\n00:01:05.650 --> 00:01:09.730\nwe could assume that these are VLANs five\nand six and we'll verify that in a second.\n\n17\n00:01:09.730 --> 00:01:11.140\nAssuming those are VLANS five and\n\n18\n00:01:11.140 --> 00:01:16.710\nsix I don't know if NYCORE1 even has\nan interface non VLAN 5 or VLAN 6.\n\n19\n00:01:16.710 --> 00:01:20.340\nWe might not have created SVIs, and\nif that's the case, this could actually be\n\n20\n00:01:20.340 --> 00:01:24.100\nreally complex because we could be getting\nsent all the way over to one of these\n\n21\n00:01:24.100 --> 00:01:27.570\nother systems to get routed between\nthe VLANs and get that access.\n\n22\n00:01:27.570 --> 00:01:28.470\nSo we're gonna have to try and\n\n23\n00:01:28.470 --> 00:01:32.600\nfigure out how we even get to\nthose networks in the first place.\n\n24\n00:01:32.600 --> 00:01:34.430\nBut I'll tell you where\nI really wanna start.\n\n25\n00:01:34.430 --> 00:01:36.910\nIf I can't get to those two interfaces,\n\n26\n00:01:36.910 --> 00:01:39.050\nit could be that they're\njust configured wrong.\n\n27\n00:01:39.050 --> 00:01:41.620\nThis is router on a stock, and\nwe don't see that very often.\n\n28\n00:01:41.620 --> 00:01:43.450\nSo it's a great place to have a failure.\n\n29\n00:01:43.450 --> 00:01:46.750\nLet's just go verify that configuration,\nmake sure the interfaces are up, and that\n\n30\n00:01:46.750 --> 00:01:50.070\nkinda stuff and we might be able to save\nourselves a lot of time jumping around\n\n31\n00:01:50.070 --> 00:01:54.437\nlots of devices to find a problem, when it\nwas always here at the source,all right?\n\n32\n00:01:54.437 --> 00:01:57.828\nSo, I'm gonna start there on NYWAN1\njust verifying the router on a stick\n\n33\n00:01:57.828 --> 00:01:59.578\nconfiguration.\n\n34\n00:01:59.578 --> 00:02:04.550\nSo on this one I'm gonna\nstart with a show IP\n\n35\n00:02:04.550 --> 00:02:11.060\ninterface brief so I can make sure the IP\naddresses are correct on the interfaces.\n\n36\n00:02:11.060 --> 00:02:13.460\nAnd here I see that the gigabit\nethernet is 0/0.5 and 0.6 and\n\n37\n00:02:13.460 --> 00:02:14.660\nthe are on 192.168.5.1 and 6.1.\n\n38\n00:02:14.660 --> 00:02:19.070\nThe parent interface doesn't have an IP,\nbut\n\n39\n00:02:19.070 --> 00:02:23.310\nI don't care about that\nas long as it's up up.\n\n40\n00:02:23.310 --> 00:02:27.370\nAnd as I look at their status,\nall three of them are up-up.\n\n41\n00:02:27.370 --> 00:02:30.890\nSo the interfaces have IPs,\nand they're online.\n\n42\n00:02:30.890 --> 00:02:34.490\nSo that looks good on this side,\nwell, I say it looks good.\n\n43\n00:02:34.490 --> 00:02:36.830\nLet's verify those VLAN numbers too.\n\n44\n00:02:36.830 --> 00:02:38.460\nI can't see the VLAN number here.\n\n45\n00:02:38.460 --> 00:02:40.290\nIt's actually tied into the subinterface,\nso\n\n46\n00:02:40.290 --> 00:02:45.440\nI'm gonna do a show run for\ninterface gi0/0.5.\n\n47\n00:02:45.440 --> 00:02:50.090\nAnd 0.0.6 and\nsure enough they are VLANs five and six.\n\n48\n00:02:50.090 --> 00:02:53.770\nSo, things are looking okay here\nas far communications on that.\n\n49\n00:02:53.770 --> 00:02:56.740\nLet's go take a look at\nthe other end of this trunk.\n\n50\n00:02:56.740 --> 00:03:01.240\nRouter on a stick requires a trunk to\nfunction and while I might not have SVIs,\n\n51\n00:03:01.240 --> 00:03:02.960\nI do still have to have\na trunk configured.\n\n52\n00:03:02.960 --> 00:03:08.570\nSo we'll go double check\nthat on NYCORE1 and\n\n53\n00:03:08.570 --> 00:03:14.460\nso we'll jump into this and did they\nactually tell me what interface this is?\n\n54\n00:03:14.460 --> 00:03:15.300\nThey don't.\n\n55\n00:03:15.300 --> 00:03:18.189\nGreat.\nI don't know what interface that's coming\n\n56\n00:03:18.189 --> 00:03:22.269\nin on we've got this,\nthis note here that's FA1/0/22, but\n\n57\n00:03:22.269 --> 00:03:24.930\nthat's actually NYACESS1 port, right?\n\n58\n00:03:24.930 --> 00:03:25.990\nThat guy down here.\n\n59\n00:03:25.990 --> 00:03:27.410\nSo this one isn't named.\n\n60\n00:03:27.410 --> 00:03:30.640\nIt doesn't have a port number for me so\nI'm gonna have to hope we're running CDP\n\n61\n00:03:30.640 --> 00:03:34.510\nso I can figure that out and\nkinda go from there.\n\n62\n00:03:34.510 --> 00:03:40.990\nSo if I do a show CDP neighbor,\nwhat I'm looking for is that NYWAN1 and\n\n63\n00:03:40.990 --> 00:03:45.800\nthere it is on my Fa 1/0/2.\n\n64\n00:03:45.800 --> 00:03:48.710\nSo I'm going to do a show run for\ninterface fa1/0/2 and\n\n65\n00:03:48.710 --> 00:03:53.810\nI can see it's got,\nswitchport trunk encapsulation dot1q.\n\n66\n00:03:53.810 --> 00:03:56.630\nAll right, good, so\nit is set up as a trunk.\n\n67\n00:03:56.630 --> 00:03:59.890\nNow it doesn't say switchport\nmode trunk through,\n\n68\n00:03:59.890 --> 00:04:02.170\nso that means it's doing dynamic trunking.\n\n69\n00:04:02.170 --> 00:04:05.280\nDoes dynamic trunking between a switch and\na router?\n\n70\n00:04:05.280 --> 00:04:06.810\nSadly the answer is sometimes.\n\n71\n00:04:06.810 --> 00:04:08.010\nSometimes it does, sometimes it doesn't.\n\n72\n00:04:08.010 --> 00:04:11.550\nI want to verify that it is working\nwith a show interface trunk because\n\n73\n00:04:11.550 --> 00:04:13.660\nthat'll tell me if it's actually trunking.\n\n74\n00:04:13.660 --> 00:04:14.870\nAnd sure enough it's not.\n\n75\n00:04:14.870 --> 00:04:19.010\nOk so remember how I said sometimes that\ntrunk works and sometimes it doesn't?\n\n76\n00:04:19.010 --> 00:04:20.610\nThis is one of those\ntimes where it doesn't.\n\n77\n00:04:20.610 --> 00:04:25.800\nI've got the interface set with a trunking\nencapsulation, but I haven't hard set it\n\n78\n00:04:25.800 --> 00:04:32.040\nto trunk and some switches do dynamic\ntrunking and some switches don't.\n\n79\n00:04:32.040 --> 00:04:34.060\nAnd this switch, actually don't\neven know what model it is so\n\n80\n00:04:34.060 --> 00:04:36.540\nI'm not sure, if I do a show version.\n\n81\n00:04:36.540 --> 00:04:39.690\nLike the 2950's,\nthey would do dynamic trunking.,\n\n82\n00:04:39.690 --> 00:04:45.030\nthe 3550's would do dynamic trunking but\nthe 2960's and the 3560's, they wouldn't.\n\n83\n00:04:45.030 --> 00:04:46.450\nCisco changed it.\n\n84\n00:04:46.450 --> 00:04:49.700\nThis is a 3750 and I don't remember.\n\n85\n00:04:49.700 --> 00:04:53.580\nI don't remember if 3750 does dynamic\ntrunking or not, but in this case,\n\n86\n00:04:53.580 --> 00:04:57.340\nI think it's pretty safe to say it's not\ndoing it cuz the trunk's not coming up.\n\n87\n00:04:57.340 --> 00:05:02.065\nSo what I'm gonna do is I'm gonna jump\ninto that interface which we decided was\n\n88\n00:05:02.065 --> 00:05:07.110\nfa1/0/2 and\nI'm just gonna hard set it as a trunk.\n\n89\n00:05:08.210 --> 00:05:09.800\nSo I'll say switchport mode trunk and\n\n90\n00:05:09.800 --> 00:05:12.630\nthat way I don't have to worry\nabout negotiation, right?\n\n91\n00:05:12.630 --> 00:05:16.980\nAnd in fact, once I set it as a trunk,\nI can say switchport nonegotiate and\n\n92\n00:05:16.980 --> 00:05:19.600\nthat way its either gonna be a trunk or\nit's gonna be nothing.\n\n93\n00:05:19.600 --> 00:05:21.810\nSo if it doesn't build a trunk,\nthan it will just drop,\n\n94\n00:05:21.810 --> 00:05:23.670\nit won't switch back to an access port.\n\n95\n00:05:23.670 --> 00:05:26.460\nIt's usually a good idea\non something like this.\n\n96\n00:05:26.460 --> 00:05:31.955\nSo now, if I look at my configuration\nI still have the encapsulation set for\n\n97\n00:05:31.955 --> 00:05:36.740\n.1Q and I'm set to trunk and negotiate, so\n\n98\n00:05:36.740 --> 00:05:40.800\nit will show interface trunk,\nI'm now carrying freelance five and six,\n\n99\n00:05:41.870 --> 00:05:47.790\nbut spanning tree is not\nhandling any of them now.\n\n100\n00:05:47.790 --> 00:05:48.970\nThat's normally a red flag.\n\n101\n00:05:48.970 --> 00:05:50.400\nThat normally is oop, we got a problem.\n\n102\n00:05:50.400 --> 00:05:52.630\nThose VLANs are trimmed off, but\nit could be a couple of things.\n\n103\n00:05:52.630 --> 00:05:54.980\nIt could be one,\nthat we're running loop section, right?\n\n104\n00:05:54.980 --> 00:05:56.070\nThat could just be happening right now.\n\n105\n00:05:56.070 --> 00:06:00.570\nSo they haven't gone active or two,\nit could be that we don't have any SVIs.\n\n106\n00:06:00.570 --> 00:06:04.320\nIf we don't have a SVI on there, we\nmight not be participating in that VLAN.\n\n107\n00:06:04.320 --> 00:06:07.770\nAnd if we don't have any active interfaces\non the VLAN, then it's down and\n\n108\n00:06:07.770 --> 00:06:08.970\nit won't show up down here.\n\n109\n00:06:08.970 --> 00:06:11.750\nNow, I don't think that's the case\nbecause we are seeing it up here.\n\n110\n00:06:11.750 --> 00:06:14.830\nSo I think this is just gonna\nbe spanning tree doing its deal.\n\n111\n00:06:14.830 --> 00:06:18.750\nSo let me do a show spanning tree for\nvlan 5.\n\n112\n00:06:18.750 --> 00:06:21.750\nAnd I can see it's got 1 port forwarding.\n\n113\n00:06:22.870 --> 00:06:25.490\nAnd vlan 6 has 1 port forwarding, but\n\n114\n00:06:25.490 --> 00:06:28.170\nI've probably talked long enough for\nthem to come up.\n\n115\n00:06:28.170 --> 00:06:32.230\nSo let me rerun that show interface\ntrunk and sure enough there they are.\n\n116\n00:06:32.230 --> 00:06:36.400\nAll right, so don't freak out if\nyou see spanning shrink you know,\n\n117\n00:06:36.400 --> 00:06:39.750\nlike trimming off that network or pruning\nit bnecause it could just be that you have\n\n118\n00:06:39.750 --> 00:06:42.970\nto wait a moment, or it could have been\nthat we weren't participating that Vlan,\n\n119\n00:06:42.970 --> 00:06:44.250\nbut in this case we are.\n\n120\n00:06:44.250 --> 00:06:45.580\nSo now the vlan's up.\n\n121\n00:06:45.580 --> 00:06:47.910\nAll right, that was definitely a problem.\n\n122\n00:06:47.910 --> 00:06:50.910\nThat was definitely a problem\nthat could stop us from getting\n\n123\n00:06:50.910 --> 00:06:52.750\nto these networks, right?\n\n124\n00:06:52.750 --> 00:06:54.445\nWell not necessarily.\n\n125\n00:06:54.445 --> 00:06:56.560\n[LAUGH] I know it's kind of sad.\n\n126\n00:06:56.560 --> 00:06:57.790\nYes, the trunk was bad.\n\n127\n00:06:57.790 --> 00:07:02.810\nSo yes, getting that network wouldn't\nwork, but the troubleshooting\n\n128\n00:07:02.810 --> 00:07:07.200\nquestion really just said that I needed\nto get .1, so 192.168.5.1 and 6.1.\n\n129\n00:07:07.200 --> 00:07:11.820\nThose were up as far as the router\nwas concerned and so potentially.\n\n130\n00:07:11.820 --> 00:07:13.910\nI could have gone some\nother way to get there.\n\n131\n00:07:13.910 --> 00:07:17.130\nYes, the trunk was bad, but\nI could have gone around one of these\n\n132\n00:07:17.130 --> 00:07:19.910\nother routes to get there and\nit might have been up.\n\n133\n00:07:19.910 --> 00:07:22.340\nSo while I just fixed the trunk,\n\n134\n00:07:22.340 --> 00:07:26.080\nI might still not be able to reach\nthose networks so I'm going to try and\n\n135\n00:07:26.080 --> 00:07:28.650\nping it and it really wouldn't surprise\nme if I still can't get there.\n\n136\n00:07:28.650 --> 00:07:34.726\nSo I'm going to do a ping to 192.168.32 or\nnot 32, .5.1 and there we go.\n\n137\n00:07:34.726 --> 00:07:40.306\nWe're getting it now and if we got to\none we'll probably get to the other,\n\n138\n00:07:40.306 --> 00:07:44.906\nso I'll reach out to 192.68.6.1 and\nthere we go.\n\n139\n00:07:44.906 --> 00:07:50.590\nAll right, let's assume for\na moment that I didn't get there, right?\n\n140\n00:07:50.590 --> 00:07:52.960\nI fixed my trunk and\nI still can't get there.\n\n141\n00:07:52.960 --> 00:07:57.130\nWell, the next step would be to go and\nfigure out what our route is.\n\n142\n00:07:57.130 --> 00:07:59.340\nWhat route are we taking to get there?\n\n143\n00:07:59.340 --> 00:08:03.680\nAnd if I have an interface\non that network,\n\n144\n00:08:03.680 --> 00:08:05.540\nthen I should be going direct, right?\n\n145\n00:08:06.560 --> 00:08:11.430\nSo, if I look, I actually do have\nIPs directly on that network, and\n\n146\n00:08:11.430 --> 00:08:12.850\nso I'm not following any route.\n\n147\n00:08:12.850 --> 00:08:16.650\nBut if I didn't have an IP on those\nnetworks, then I would need to do a show\n\n148\n00:08:16.650 --> 00:08:21.590\nip route and start tracking down how I'm\ngoing to go and get to that network and\n\n149\n00:08:21.590 --> 00:08:24.510\nfollow that through the map and\nsee where the breakdown is there.\n\n150\n00:08:24.510 --> 00:08:27.460\nThis could have been a much more\ncomplex problem than it was.\n\n151\n00:08:27.460 --> 00:08:30.380\nAs it stands,\nwe did have SVIs on those networks,\n\n152\n00:08:30.380 --> 00:08:33.570\nwe were plugged right into it,\nwe just had to fix the trunk.\n\n153\n00:08:33.570 --> 00:08:35.920\nThe links are up and\nnow we're able to communicate.\n\n154\n00:08:35.920 --> 00:08:40.760\nSo, this one boiled down to just\nsimple trunk configuration, right?\n\n155\n00:08:40.760 --> 00:08:44.840\nNow I started this troubleshooting\nthis looking at router on a stick, and\n\n156\n00:08:44.840 --> 00:08:47.550\nit wasn't the router on a stick that\nwas a problem so much as the trunk, but\n\n157\n00:08:47.550 --> 00:08:48.800\nthat's a part of it, right?\n\n158\n00:08:48.800 --> 00:08:51.050\nAnd I knew to look for that just\nbecause it's an unusual technology.\n\n159\n00:08:51.050 --> 00:08:53.970\nIt's not something we use a lot, so\nit's a great place to have a problem.\n\n160\n00:08:53.970 --> 00:08:54.840\nYou can do that.\n\n161\n00:08:54.840 --> 00:08:57.640\nWe could of found it the other way of just\nkind of wandering through the network,\n\n162\n00:08:57.640 --> 00:08:59.350\nit just wouldn't have taken a lot longer.\n\n163\n00:08:59.350 --> 00:09:02.070\nDoesn't matter which way you find\nthe problem as long as you find it and\n\n164\n00:09:02.070 --> 00:09:04.560\nthen come with a solution and\nget it resolved.\n\n165\n00:09:04.560 --> 00:09:08.410\nAnd with that, we've resolved\nthe last ticket for set number ten.\n\n166\n00:09:08.410 --> 00:09:11.738\nWe've got a set number eleven coming\nup though so stay tuned for it, but\n\n167\n00:09:11.738 --> 00:09:15.753\nas far as this one's concerned we're going\nto wrap it up here and I'll see next time.\n\n168\n00:09:15.753 --> 00:09:23.319\n[MUSIC]\n\n",
          "vimeoId": "151030990"
        }
      ],
      "title": "Set Ten"
    },
    {
      "episodes": [
        {
          "description": "In this video, Don solves troubleshooting issue #1` from set #11. The trouble ticket states that \"Routes between NYCORE1 and NYCORE2 are not being exchanged in EIGRP. You should see one EIGRP route in the routing table on NYCORE2 \"",
          "length": "554",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-11-1-set_11_issue_1-121115-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-11-1-set_11_issue_1-121115-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-11-1-set_11_issue_1-121115-1-sm.jpg",
          "title": "Set 11 Issue 1",
          "transcript": "WEBVTT\n\n1\n00:00:01.060 --> 00:00:09.490\nWelcome back\n\n2\n00:00:09.490 --> 00:00:12.530\nto another Cisco troubleshooting\nsegment here on IT Pro TV.\n\n3\n00:00:12.530 --> 00:00:14.970\nWe're kicking off a new set of problems.\n\n4\n00:00:14.970 --> 00:00:16.070\nIt's set 11.\n\n5\n00:00:16.070 --> 00:00:18.480\nWe're tackling issue one in this episode.\n\n6\n00:00:18.480 --> 00:00:19.520\nLet's read the support ticket.\n\n7\n00:00:19.520 --> 00:00:26.220\nIt says routes between NYCORE1 and\nNYCORE2 are not being exchanged in eigrp.\n\n8\n00:00:26.220 --> 00:00:31.730\nWe should see one eigrp route\nin the routing table on NYCORE2.\n\n9\n00:00:31.730 --> 00:00:34.860\nWell, let's take a look at our topology\nand see the devices we're talking about.\n\n10\n00:00:34.860 --> 00:00:37.520\nThe set 11 topology's a little\ndifferent than what we've seen before.\n\n11\n00:00:37.520 --> 00:00:38.880\nIt's a lot more linear.\n\n12\n00:00:38.880 --> 00:00:42.100\nWe've got almost a bus type\ntopology here which is nice,\n\n13\n00:00:42.100 --> 00:00:43.440\nit's almost a straight line.\n\n14\n00:00:43.440 --> 00:00:46.640\nWe've got EIGRP autonomous system ten, and\n\n15\n00:00:46.640 --> 00:00:51.480\nIBGP autonomous system 65534\nthat's actually doing IPv6.\n\n16\n00:00:51.480 --> 00:00:55.190\nBut this problem is talking about EIGRP so\nwe've got an IPv4 problem and\n\n17\n00:00:55.190 --> 00:00:58.710\nwe're having that issue right\nhere between NYCORE1 and NYCORE2.\n\n18\n00:00:58.710 --> 00:01:03.240\nLooking at the document here,\nit's a Layer 3 link so that's good.\n\n19\n00:01:03.240 --> 00:01:06.950\nThe EIGRP should be able to run over\nthat just fine in between port 24 on\n\n20\n00:01:06.950 --> 00:01:10.650\nboth of those devices, and but whatever\nreason, it's not exchanging routes.\n\n21\n00:01:10.650 --> 00:01:15.350\nI should see one EIGRP route in\nthe routing table here for NYCORE, and\n\n22\n00:01:15.350 --> 00:01:17.130\napparently I'm not, all right?\n\n23\n00:01:17.130 --> 00:01:20.620\nSo, let's jump over to NY core two and\nsee if we can't find that problem.\n\n24\n00:01:20.620 --> 00:01:21.670\nI'm gonna start here.\n\n25\n00:01:21.670 --> 00:01:23.230\nIt's the one who's supposed\nto be receiving the route.\n\n26\n00:01:23.230 --> 00:01:25.140\nI guess we could just as\nwell start at NY core one.\n\n27\n00:01:25.140 --> 00:01:27.540\nIt's the one that's supposed\nto be sending the route.\n\n28\n00:01:27.540 --> 00:01:30.280\nThink about what could be\ncausing this problem, right?\n\n29\n00:01:30.280 --> 00:01:32.120\nThis could be as simple\nas a link being down.\n\n30\n00:01:32.120 --> 00:01:34.600\nIf the link is down,\nI'll see that on both switches.\n\n31\n00:01:34.600 --> 00:01:36.860\nDoesn't matter which one\nI start troubleshooting.\n\n32\n00:01:36.860 --> 00:01:41.160\nIf it's an IP problem on one side or\nthe other I can send a ping and\n\n33\n00:01:41.160 --> 00:01:42.200\nspot the problem that way.\n\n34\n00:01:42.200 --> 00:01:45.120\nSo again that doesn't matter\nonce I'm in the other.\n\n35\n00:01:45.120 --> 00:01:48.060\nBut if it's something like\nan access control list,\n\n36\n00:01:48.060 --> 00:01:52.240\nthat's only gonna be on one side and\nit could be either side in this case.\n\n37\n00:01:52.240 --> 00:01:54.980\nIf it's an EIGRP route map,\n\n38\n00:01:54.980 --> 00:01:58.350\nwell this one is the one that's\nsupposed to be learning a route.\n\n39\n00:01:58.350 --> 00:02:01.180\nAnd so the route map could be applying\nto routes coming in as well as\n\n40\n00:02:01.180 --> 00:02:03.950\nroutes coming out of CORE1 of prefix\nlists so, at the end of the day,\n\n41\n00:02:03.950 --> 00:02:06.470\nall the problems I've just details\ncould exist on either switch so\n\n42\n00:02:06.470 --> 00:02:08.730\nit doesn't really matter\nwhich one we start with.\n\n43\n00:02:08.730 --> 00:02:10.740\nJust pick one and start with it.\n\n44\n00:02:10.740 --> 00:02:14.060\nAnd I like to troubleshoot these using\nthe OSI model, start with layer one.\n\n45\n00:02:14.060 --> 00:02:15.270\nIs the cable plugged in?\n\n46\n00:02:15.270 --> 00:02:17.530\nWell, in this VLab we\nhave to assume it is.\n\n47\n00:02:17.530 --> 00:02:20.100\nLayer 2, do we have basic\n\n48\n00:02:20.100 --> 00:02:23.080\nMAC link layer address communications\nacross the line, right?\n\n49\n00:02:23.080 --> 00:02:27.800\nCan I send a ping and actually get an ARP\nrequest back and find the other side.\n\n50\n00:02:27.800 --> 00:02:30.450\nAnd in Layer 3, can I resolve a tethers?\n\n51\n00:02:30.450 --> 00:02:33.120\nCan I ping across to the other side and\ncommunicate?\n\n52\n00:02:33.120 --> 00:02:33.680\nRight?\nAnd\n\n53\n00:02:33.680 --> 00:02:36.620\nafter that we can troubleshoot the EIGRP\nand find out what's going on there.\n\n54\n00:02:36.620 --> 00:02:37.710\nSo let's jump to core 1, and\n\n55\n00:02:37.710 --> 00:02:41.750\nwe'll just troubleshoot it using,\nwe'll use our OSI model, right?\n\n56\n00:02:41.750 --> 00:02:45.780\nSo, layer 1 and layer 2 are really easy\nto troubleshoot because you can usually\n\n57\n00:02:45.780 --> 00:02:50.120\njust do a show ip interface brief and\nlook at the feedback that you get.\n\n58\n00:02:50.120 --> 00:02:52.130\nSo if I do a show ip interface brief or,\nin fact,\n\n59\n00:02:52.130 --> 00:02:54.870\nI just wan to see one interface so\nI'm not gonna do the whole brief.\n\n60\n00:02:54.870 --> 00:02:56.858\nI'll just do show ip interface.\n\n61\n00:02:56.858 --> 00:03:03.960\nfa1/0/24 and the very first line\nis gonna tell me that it's up up.\n\n62\n00:03:03.960 --> 00:03:05.100\nRight?\nAnd if we're up up that\n\n63\n00:03:05.100 --> 00:03:06.130\nrules out layer one right?\n\n64\n00:03:06.130 --> 00:03:07.710\nWe know our cable's plugged in and\n\n65\n00:03:07.710 --> 00:03:11.940\nit probably rules out layer two\ncuz I got a line protocol is up.\n\n66\n00:03:11.940 --> 00:03:16.390\nWe can find that out for\ncertain I can see my\n\n67\n00:03:16.390 --> 00:03:21.096\nInternet address here is 192.168.5.5/30.\n\n68\n00:03:21.096 --> 00:03:23.010\nSo that's a small network a slash 30.\n\n69\n00:03:23.010 --> 00:03:28.250\nA slash 30 only has two hosts in it and so\nit's gonna be 192.168.5.5 on this side and\n\n70\n00:03:28.250 --> 00:03:31.390\nI expect 192.168.5.6 on the other side.\n\n71\n00:03:31.390 --> 00:03:36.930\nWell, I don't have to jump to\nthe other side to test that.\n\n72\n00:03:36.930 --> 00:03:39.360\nIf this is up up,\nI should be able to ping it and\n\n73\n00:03:39.360 --> 00:03:41.820\nverify that the other\nside is set right too.\n\n74\n00:03:41.820 --> 00:03:44.210\nSo I'm just gonna do exactly that.\n\n75\n00:03:44.210 --> 00:03:49.121\nI'll ping to 192.168.5.6, and well,\n\n76\n00:03:49.121 --> 00:03:53.500\nI've invented an all new\nnaming address structure here.\n\n77\n00:03:53.500 --> 00:03:56.330\nLet me change that, there we go.\n\n78\n00:03:56.330 --> 00:03:58.430\nAnd I'm going to ping to 192.168.5.6 and\n\n79\n00:03:58.430 --> 00:04:00.440\nI had a little bit of an art\nbroad castaway there, but\n\n80\n00:04:00.440 --> 00:04:04.540\nnow, all five of my pings are going\nthrough I will get to the other side.\n\n81\n00:04:04.540 --> 00:04:06.710\nIf I do a show arp,\n\n82\n00:04:06.710 --> 00:04:11.710\nI should see 192.168.5.6 in the list and\nan associated MAC address with it.\n\n83\n00:04:11.710 --> 00:04:13.750\nRight, so,\nI've got everything right there.\n\n84\n00:04:13.750 --> 00:04:18.490\nLooks like layer 1, layer 2, layer 3,\nwe're good to go here, this link is up.\n\n85\n00:04:18.490 --> 00:04:23.170\nSo, if the link is up and healthy,\nwhy am I not exchanging the eigrp routes?\n\n86\n00:04:23.170 --> 00:04:28.190\nWell, could be an ACL which we could\nfind out by doing a show run for\n\n87\n00:04:28.190 --> 00:04:31.700\ninterface FA one slash zero\nslash twenty four if there's and\n\n88\n00:04:31.700 --> 00:04:35.990\nACL on the line it will show up right here\nand I don't know anything no switchboard\n\n89\n00:04:35.990 --> 00:04:42.180\nthat makes it a layer three port and\nan IAP address as a sign and that's it.\n\n90\n00:04:42.180 --> 00:04:47.880\nAnd check it out just to\nsee if there's an ACL.\n\n91\n00:04:47.880 --> 00:04:50.170\nSo if i do a show run for\ninterface fa1/0/24.\n\n92\n00:04:50.170 --> 00:04:51.720\nNope, no ACL.\n\n93\n00:04:53.150 --> 00:04:56.400\nAll right so\nit's nothing sneaky like that.\n\n94\n00:04:56.400 --> 00:04:59.540\nAll that's really left is the IGRP.\n\n95\n00:04:59.540 --> 00:05:00.890\nSo let's take a look at the IGRP.\n\n96\n00:05:00.890 --> 00:05:03.630\nI'm on NYCORE2 here so\nwe'll just look at this one.\n\n97\n00:05:03.630 --> 00:05:07.230\nI'm gonna do a show run, and I'll pipe\nthat into the section command for\n\n98\n00:05:07.230 --> 00:05:09.050\nthe igrp section.\n\n99\n00:05:09.050 --> 00:05:11.520\nAnd, the rest is pretty straightforward.\n\n100\n00:05:11.520 --> 00:05:12.660\nI've got router egirp ten.\n\n101\n00:05:12.660 --> 00:05:17.180\nAnd if I look at my diagram we\nare in autonomous system ten,\n\n102\n00:05:17.180 --> 00:05:21.960\nso that's the right as number.\n\n103\n00:05:21.960 --> 00:05:23.021\nAnd then network 192.168.5.0.\n\n104\n00:05:23.021 --> 00:05:25.939\n0.0.0.3.\nAnd network 192.168.16.0.\n\n105\n00:05:25.939 --> 00:05:29.690\nSo it's got my networks advertised out and\neverything looks okay there.\n\n106\n00:05:29.690 --> 00:05:35.090\nAll right, now if I jump back over\nto NYCORE1, and I do the same thing.\n\n107\n00:05:35.090 --> 00:05:40.480\nI'll just do a show run section eigrp and\n\n108\n00:05:40.480 --> 00:05:45.560\nhere I've got router eigrp 10 And\nnetwork 192.168.5.0.0.0.0.7, all right?\n\n109\n00:05:45.560 --> 00:05:51.460\nWell, that mask is wrong.\n\n110\n00:05:51.460 --> 00:05:55.538\nFor a slash 30 we would\nexpect this to be 0.0.0.0.3.\n\n111\n00:05:55.538 --> 00:05:58.490\nThis is .7, but\nit's bigger than what we need, and\n\n112\n00:05:58.490 --> 00:06:02.150\nsince it's bigger that means it's\ngoing to cover our network, right?\n\n113\n00:06:02.150 --> 00:06:07.040\nSo we're covered and that's not such\na big deal we could change that,\n\n114\n00:06:07.040 --> 00:06:08.950\nbut that's not really our problem.\n\n115\n00:06:08.950 --> 00:06:10.450\nThat's going to encompass\nour network here.\n\n116\n00:06:10.450 --> 00:06:11.490\nOh.\nYou know what?\n\n117\n00:06:11.490 --> 00:06:14.840\nActually.\n[LAUGH] So our network, technically,\n\n118\n00:06:14.840 --> 00:06:19.730\nif I wanted to be really specific and\nadvertise just this network, the command\n\n119\n00:06:19.730 --> 00:06:25.385\nthat I would need to run\nwould be network 192.168.5.4.\n\n120\n00:06:25.385 --> 00:06:26.850\n0.0.0.3, all right?\n\n121\n00:06:26.850 --> 00:06:32.500\nAnd the reason I would do a .4\nhere is because my network,\n\n122\n00:06:32.500 --> 00:06:37.783\nthis slash 30, it's 192.168.5.4,\nis the subnet address.\n\n123\n00:06:37.783 --> 00:06:42.330\n.5 and .6 are the usable addresses and\n.7 is the broadcast address, so\n\n124\n00:06:42.330 --> 00:06:43.780\n.4 is what we would start with.\n\n125\n00:06:43.780 --> 00:06:45.060\nHere, they start with .0.\n\n126\n00:06:45.060 --> 00:06:45.590\nRight.\n\n127\n00:06:45.590 --> 00:06:49.175\nBut it's a .7 in that wildcard match so\nthat's going to include 192.168.5.0 and\n\n128\n00:06:49.175 --> 00:06:50.590\n192.168.5.4, so it'll cover us.\n\n129\n00:06:50.590 --> 00:06:53.780\nSo, I don't know if there's another,\n\n130\n00:06:53.780 --> 00:06:58.690\nlet me see if there's another\ninterface on this one.\n\n131\n00:06:58.690 --> 00:07:02.550\nI'll do a show IP interface brief and\nI'll exclude any unassigneds.\n\n132\n00:07:02.550 --> 00:07:03.960\nAnd sure enough, there it is.\n\n133\n00:07:03.960 --> 00:07:06.630\nSo we've got a 192.168.5.2.\n\n134\n00:07:06.630 --> 00:07:10.420\nThat's why they did the .7 to\nencompass both of these networks and\n\n135\n00:07:10.420 --> 00:07:13.050\nadvertise them in the EIGRP.\n\n136\n00:07:13.050 --> 00:07:15.820\nNow the reason this is\nnot an issue here but\n\n137\n00:07:15.820 --> 00:07:19.430\nI'm still highlighting it is it\nis an issue on the other side.\n\n138\n00:07:19.430 --> 00:07:21.370\nIf I got to NYCORE2.\n\n139\n00:07:21.370 --> 00:07:23.630\nAnd take a look at that\nconfiguration again.\n\n140\n00:07:23.630 --> 00:07:25.400\nI glanced over it kinda quick.\n\n141\n00:07:25.400 --> 00:07:27.650\nAnd didn't do good math.\n\n142\n00:07:27.650 --> 00:07:29.955\nWe've got 192.168.5.0 with a 0.0.0.3.\n\n143\n00:07:29.955 --> 00:07:34.970\nI laser beamed in on that wild card and\n\n144\n00:07:34.970 --> 00:07:38.370\nsaw that .3 and thought it was OK.\n\n145\n00:07:38.370 --> 00:07:42.900\nThis should be 192.168.5.4,\nnot 192.168.5.0.\n\n146\n00:07:42.900 --> 00:07:47.540\nWell, let me see if we have\nanother network on this one and\n\n147\n00:07:47.540 --> 00:07:49.080\nif we do we might need.\n\n148\n00:07:49.080 --> 00:07:52.620\nOh no we have a completely different\nnetwork the 192.168.16 is our\n\n149\n00:07:52.620 --> 00:07:53.180\nother one here.\n\n150\n00:07:53.180 --> 00:07:55.420\nBut yeah that one should be dot dot fours.\n\n151\n00:07:55.420 --> 00:07:58.310\nWe just have a bad network statement and\n\n152\n00:07:58.310 --> 00:08:02.430\nI bet if we fix that we will see things\nwork a little bit better for us.\n\n153\n00:08:02.430 --> 00:08:06.310\nSo, I'm going to put that\nin here the proper way and\n\n154\n00:08:06.310 --> 00:08:08.730\nthen I'll remove the other one.\n\n155\n00:08:08.730 --> 00:08:12.240\nAnd actually I just saw that neighbor\nrelationship come back up, so\n\n156\n00:08:12.240 --> 00:08:13.580\nthat's a good sign.\n\n157\n00:08:13.580 --> 00:08:18.020\nBut I'm gonna remove the other one because\nit doesn't really serve any purpose.\n\n158\n00:08:19.800 --> 00:08:21.440\nSo we'll get that one out of there.\n\n159\n00:08:21.440 --> 00:08:26.130\nAnd now If I do a show ip eigrp neighbor,\n\n160\n00:08:26.130 --> 00:08:29.400\nI can see I have a neighbor\nrelationship that's up.\n\n161\n00:08:29.400 --> 00:08:34.560\nAnd if I do a show ip route, there we go.\n\n162\n00:08:34.560 --> 00:08:38.040\nI've got an eigrp route turning up\nright there in my routing table.\n\n163\n00:08:38.040 --> 00:08:42.170\nSo in this case, we had a network\nstatement where the subnet\n\n164\n00:08:42.170 --> 00:08:44.910\nDidn't match what our actual network was.\n\n165\n00:08:44.910 --> 00:08:46.590\nAnd so\nthat caused a little bit of a breakage.\n\n166\n00:08:46.590 --> 00:08:48.140\nThat's one area where OSPF is nice.\n\n167\n00:08:48.140 --> 00:08:51.200\nCuz you can turn it on in the interfaces\nand it saves it from making a mistake.\n\n168\n00:08:51.200 --> 00:08:52.010\nBut with EIGRP,\n\n169\n00:08:52.010 --> 00:08:55.410\nwe gotta use that wild card mask,\nplenty of room to make mistakes there.\n\n170\n00:08:55.410 --> 00:08:57.190\nAnd in this case, there was one.\n\n171\n00:08:57.190 --> 00:08:59.900\nSo once we got that corrected,\nthe link came up.\n\n172\n00:08:59.900 --> 00:09:01.260\nWe resolved the troubleshooting ticket.\n\n173\n00:09:01.260 --> 00:09:02.580\nSo we're ready to move on to the next one.\n\n174\n00:09:02.580 --> 00:09:03.650\nHope you guys enjoyed that.\n\n175\n00:09:03.650 --> 00:09:09.540\nStay tuned,\nwe've got issue number two coming up.\n\n176\n00:09:09.540 --> 00:09:14.160\n[SOUND]\n\n",
          "vimeoId": "151030988"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #2` from set #11. The trouble ticket states that \"BGP (IPv6) is not establishing a connection between NYEDGE1 and NYEDGE2 \"",
          "length": "610",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-11-2-set_11_issue_2-121115-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-11-2-set_11_issue_2-121115-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-11-2-set_11_issue_2-121115-1-sm.jpg",
          "title": "Set 11 Issue 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:08.337\n[MUSIC]\n\n2\n00:00:08.337 --> 00:00:12.424\nWelcome back to another Ciso\nTroubleshooting segment here on IT Pro Tv.\n\n3\n00:00:12.424 --> 00:00:15.985\nIn this one we're jumping into set\n11 issue two and we've got another,\n\n4\n00:00:15.985 --> 00:00:19.940\nlooks like a routing issue on this one and\nit's a BGP so this'll be fun.\n\n5\n00:00:19.940 --> 00:00:22.540\nIt says, BGP using IPv6,\n\n6\n00:00:22.540 --> 00:00:27.860\nis not establishing a connection\nbetween NYEDGE1 and NYEDGE2.\n\n7\n00:00:27.860 --> 00:00:30.960\nWell, if you just did ticket number one or\nissue one for set 11,\n\n8\n00:00:30.960 --> 00:00:34.730\nit was an EIGRP neighbor relationship\nthat wasn't building up.\n\n9\n00:00:34.730 --> 00:00:37.830\nNow we've got a BGP neighbor\nrelationship that's not building up.\n\n10\n00:00:37.830 --> 00:00:41.570\nAnd it's IPv6 vs IPv4 in the last one but\n\n11\n00:00:41.570 --> 00:00:45.130\nat the end of the day, we're gonna\ntroubleshoot this the same exact way.\n\n12\n00:00:45.130 --> 00:00:48.690\nWe've got two nodes, that our supposed to\nbe building up a neighbor relationship and\n\n13\n00:00:48.690 --> 00:00:52.100\nthey aren't, and we've got to run through\nthe same basic troubleshooting steps.\n\n14\n00:00:52.100 --> 00:00:53.260\nIf we look at our topology though,\n\n15\n00:00:53.260 --> 00:00:55.990\nthis time we're dealing with NYEDGE1 and\nNYEDGE2.\n\n16\n00:00:55.990 --> 00:00:58.790\nAnd there's a lot more\nthat can go wrong here.\n\n17\n00:00:58.790 --> 00:01:03.730\nIn the last issue, issue one, it was this\nEthernet link between NYCORE1 and NYCORE2.\n\n18\n00:01:03.730 --> 00:01:07.970\nEthernet is pretty straightforward,\nbut up here I've got a serial link.\n\n19\n00:01:07.970 --> 00:01:09.180\nAnd with serial links,\n\n20\n00:01:09.180 --> 00:01:12.950\nnot only do you have all the same\nproblems that you have under Ethernet,\n\n21\n00:01:12.950 --> 00:01:16.610\nbut you also have encapsulation\nissues that can be happening.\n\n22\n00:01:16.610 --> 00:01:21.030\nThis can be a frame relay link, it can\nbe PPP, it can have authentication, and\n\n23\n00:01:21.030 --> 00:01:23.310\nthose are things that we don't\nsee on the Ethernet side.\n\n24\n00:01:23.310 --> 00:01:26.830\nSo a lot of extra complexity\nthrown into this one but\n\n25\n00:01:26.830 --> 00:01:29.340\nat the end of the day we\ntroubleshoot it the same way.\n\n26\n00:01:29.340 --> 00:01:32.040\nWhen I have two nodes that are not\nbuilding a neighbor relationship\n\n27\n00:01:32.040 --> 00:01:33.830\nI take the OSI model and\nI start at the bottom.\n\n28\n00:01:33.830 --> 00:01:34.870\nStart with layer one.\n\n29\n00:01:34.870 --> 00:01:36.320\nIs the cable plugged in?\n\n30\n00:01:36.320 --> 00:01:39.880\nWell, fortunately on a serial link\nit is pretty easy to spot that.\n\n31\n00:01:39.880 --> 00:01:42.770\nThen after that we look up to layer\ntwo what encapsulation is it using as\n\n32\n00:01:42.770 --> 00:01:43.440\nthat functioning.\n\n33\n00:01:43.440 --> 00:01:47.680\nAnd then layer three can I ping the\naddress of the other end of that line and\n\n34\n00:01:47.680 --> 00:01:49.970\nthen we start moving into\nthe routing protocol itself, so\n\n35\n00:01:49.970 --> 00:01:52.550\nwe can kind of eliminate\nany of the easy stuff.\n\n36\n00:01:52.550 --> 00:01:55.511\nSo with a problem like this,\nlike I've said in many of these questions,\n\n37\n00:01:55.511 --> 00:01:58.005\nit doesn't really matter which\none we choose to start with.\n\n38\n00:01:58.005 --> 00:02:00.880\nThey both have the problem so\none's as good as the other.\n\n39\n00:02:00.880 --> 00:02:02.921\nI'll start with NYEDGE1.\n\n40\n00:02:02.921 --> 00:02:04.810\nAll right, so I'm gonna pull up NYEDGE1.\n\n41\n00:02:04.810 --> 00:02:08.180\nAnd the first thing I wanna do is\ncheck the health of that line.\n\n42\n00:02:08.180 --> 00:02:10.660\nAnd in my diagram,\nit showed that with serials 000.\n\n43\n00:02:10.660 --> 00:02:13.310\nSo that's the one I'm on the lookout for.\n\n44\n00:02:13.310 --> 00:02:16.380\nAnd I'm just gonna jump into my config.\n\n45\n00:02:17.610 --> 00:02:19.760\nAnd I'm gonna start with\njust a quick show run for\n\n46\n00:02:19.760 --> 00:02:23.280\ninterface 0/0/0 cuz I don't\nhave any information on it.\n\n47\n00:02:23.280 --> 00:02:25.100\nI don't know its IPv6 address is.\n\n48\n00:02:25.100 --> 00:02:27.050\nI just don't know anything about it.\n\n49\n00:02:27.050 --> 00:02:31.853\nSo, when I come in here and look at it, I\ncan see it does have an IPv4 address, but\n\n50\n00:02:31.853 --> 00:02:34.837\nwe're specifically dealing with BGP and\nIPv6.\n\n51\n00:02:34.837 --> 00:02:39.793\nSo the next line's the one\nthat's important to me,\n\n52\n00:02:39.793 --> 00:02:47.340\nIPV six address 2001:D000:1::5 and\nI'm gonna write that down,\n\n53\n00:02:47.340 --> 00:02:53.085\nbecause IPV six's addresses\nare aren't easy to remember so\n\n54\n00:02:53.085 --> 00:02:58.962\nEDGE1 is gonna be 2001:D000:1::5/126.\n\n55\n00:02:58.962 --> 00:03:01.860\nNow that slash 126 that's pretty unusual.\n\n56\n00:03:01.860 --> 00:03:05.380\nIn IPv6 we have such a large address space\nthat people don't normally mess with\n\n57\n00:03:05.380 --> 00:03:06.250\nthe subnet very much.\n\n58\n00:03:06.250 --> 00:03:08.100\nBut here they've done a slash 126.\n\n59\n00:03:08.100 --> 00:03:10.837\nThat's created a very, very small network.\n\n60\n00:03:10.837 --> 00:03:13.504\nThis would be the equivalent\nof like a slash 30 under IPv4.\n\n61\n00:03:13.504 --> 00:03:18.386\nAnd that means that while I'm colon colon\nfive well, the other side really only has\n\n62\n00:03:18.386 --> 00:03:22.020\none other address that it can\nuse which is colon, colon, 6.\n\n63\n00:03:22.020 --> 00:03:26.140\nSo I can kinda predict\nthe address of the other link.\n\n64\n00:03:26.140 --> 00:03:28.890\nAnd if you can do that, if you can\npredict the address of the other link,\n\n65\n00:03:28.890 --> 00:03:30.300\nyou can actually save some time and\n\n66\n00:03:30.300 --> 00:03:33.390\ntest layer one, two and three all at\nthe same time by just pinging across.\n\n67\n00:03:33.390 --> 00:03:34.080\nYou don't have to predict it.\n\n68\n00:03:34.080 --> 00:03:36.330\nYou can just always look at\nthe other note and see, right.\n\n69\n00:03:36.330 --> 00:03:40.754\nIf I just jumped over to NYEDGE2 and\nrun that same command.\n\n70\n00:03:40.754 --> 00:03:48.337\nWe can do a show IPv6 interface brief and\nfigure out what address it has.\n\n71\n00:03:48.337 --> 00:03:53.952\nAnd what we should see, assuming it's not\nan addressing problem is this right here.\n\n72\n00:03:53.952 --> 00:03:57.270\nIt's 2001:D000:1::6 and\n\n73\n00:03:57.270 --> 00:04:02.296\nthat's the one that we kind of\nanticipated it to have already.\n\n74\n00:04:02.296 --> 00:04:06.902\nSo if I jump back to edge one,\nI'm just gonna ping across\n\n75\n00:04:06.902 --> 00:04:11.116\nthe line to see that I can\nget that node and whether or\n\n76\n00:04:11.116 --> 00:04:16.020\nnot that's up, and so if I try and\nping that now let's see.\n\n77\n00:04:16.020 --> 00:04:16.922\nDid I type it wrong.\n\n78\n00:04:16.922 --> 00:04:24.760\nI did a ping to 2001:D000:1::6, and\nI got a no valid route for a destination.\n\n79\n00:04:24.760 --> 00:04:27.250\nWell, I tried to save some time and\nskip three layers at once,\n\n80\n00:04:27.250 --> 00:04:28.920\nand I failed miserably.\n\n81\n00:04:28.920 --> 00:04:32.010\nSo in this case, I'm not able to ping it.\n\n82\n00:04:32.010 --> 00:04:33.300\nIt says there's no route.\n\n83\n00:04:33.300 --> 00:04:35.640\nBut this is a directly connected network.\n\n84\n00:04:35.640 --> 00:04:39.030\nSo when would a directly connected network\nnot have a route in the routing table?\n\n85\n00:04:39.030 --> 00:04:41.180\nWhen the interface is down.\n\n86\n00:04:41.180 --> 00:04:46.900\nSo, I imagine our interface is down, or\nsomething else crazy is going on here.\n\n87\n00:04:46.900 --> 00:04:49.330\nWell, I did a show run\nof the interface and\n\n88\n00:04:49.330 --> 00:04:51.800\nI didn't see anything crazy in there\nthat would cause it to go down.\n\n89\n00:04:51.800 --> 00:04:57.420\nLike it wasn't administratively shut down,\nbut let me do a show, or\n\n90\n00:04:57.420 --> 00:05:03.110\nnot a show run,\nlet's do a show IPv6 interface brief and\n\n91\n00:05:03.110 --> 00:05:07.430\nlook at the status of that serial line,\nand it's showing as down down.\n\n92\n00:05:07.430 --> 00:05:09.880\nOkay, so\nit's not administratively down, but\n\n93\n00:05:09.880 --> 00:05:12.500\nit is down down which means\nthe serial link is not up.\n\n94\n00:05:12.500 --> 00:05:17.440\nNow when I looked at that interface,\nwhen I did the show run interface 0000,\n\n95\n00:05:17.440 --> 00:05:21.050\nthere's nothing in here that talks\nabout the encapsulation of that line.\n\n96\n00:05:21.050 --> 00:05:22.860\nThat means that it's all default.\n\n97\n00:05:22.860 --> 00:05:25.030\nIt's using HDLC most likely.\n\n98\n00:05:25.030 --> 00:05:27.630\nI think most Cisco\nrouters default to HDLC.\n\n99\n00:05:27.630 --> 00:05:33.130\nBut we can find that out real quick\nwith a show interface 0000 and\n\n100\n00:05:33.130 --> 00:05:35.435\nin here, yeah, encapsulation HDLC.\n\n101\n00:05:35.435 --> 00:05:38.672\nHDLC is nice because almost\neverything is automatic.\n\n102\n00:05:38.672 --> 00:05:41.600\nWith PPP there things you can tweak and\nmess with.\n\n103\n00:05:41.600 --> 00:05:43.422\nYou do can authentication and all that.\n\n104\n00:05:43.422 --> 00:05:46.455\nWith HDLC you usually just turn it on and\nthen one side of the link's\n\n105\n00:05:46.455 --> 00:05:50.440\ngonna need a clock rate and then\nthe whole just kicks off and that's it.\n\n106\n00:05:50.440 --> 00:05:52.630\nThis side didn't have a clock rate, right?\n\n107\n00:05:52.630 --> 00:05:56.730\nThis one was just configured as\nhaving an IP and being turned on.\n\n108\n00:05:56.730 --> 00:05:57.800\nLet's take a look at the other side.\n\n109\n00:05:58.970 --> 00:06:04.140\nI'm going to go to NYEDGE2 and I wannalook\nat the configuration on this side.\n\n110\n00:06:04.140 --> 00:06:12.040\nSo, if I do a show run for\ninterface serial 0/0/0 there we go.\n\n111\n00:06:12.040 --> 00:06:15.260\nI see an ipv6 address right\nthere like we expected.\n\n112\n00:06:15.260 --> 00:06:19.620\nI see the clock rate like I expected,\nand I see a shutdown.\n\n113\n00:06:19.620 --> 00:06:23.080\nThis end of the link is down,\nthe other link's not gonna come up.\n\n114\n00:06:23.080 --> 00:06:28.350\nAnd so, if I get into my configuration,\nthis should be a simple no shutdown.\n\n115\n00:06:28.350 --> 00:06:30.060\nto bring that serial link up.\n\n116\n00:06:30.060 --> 00:06:34.580\nNow, BGP was not building a relationship\nover this line because the line was down.\n\n117\n00:06:34.580 --> 00:06:37.420\nJust because I fixed this doesn't\nmean the problem is gone though.\n\n118\n00:06:37.420 --> 00:06:38.640\nWe might still have issues.\n\n119\n00:06:38.640 --> 00:06:40.100\nI'm gonna give it a second here.\n\n120\n00:06:40.100 --> 00:06:43.546\nI see EIGRP just kicked in and\nthere goes BGP.\n\n121\n00:06:43.546 --> 00:06:45.672\nBGP just came up.\n\n122\n00:06:45.672 --> 00:06:50.190\nSo it looks like it's gonna be okay but\nit might not be.\n\n123\n00:06:50.190 --> 00:06:53.271\nRight, we might still\nhave other problems going\n\n124\n00:06:53.271 --> 00:06:56.572\non with it what we'll have to\nsee if we do a show run and\n\n125\n00:06:56.572 --> 00:07:00.421\noh shoot I meant to do a BGP section\njust let me skip down to it.\n\n126\n00:07:00.421 --> 00:07:03.629\nAnd we take a look at our BGP\nconfiguration in here you'll see router\n\n127\n00:07:03.629 --> 00:07:07.962\nBGPC 65534 you've got a neighbor statement\nthat's put in place to tell us how you're\n\n128\n00:07:07.962 --> 00:07:10.606\ngoing to connect to it and\nthen your address families and\n\n129\n00:07:10.606 --> 00:07:12.940\neach of the different\ncommunications in there.\n\n130\n00:07:12.940 --> 00:07:15.790\nSo there could still be problems\nthat cause it not to come up.\n\n131\n00:07:15.790 --> 00:07:19.720\nFor example if my remote AS\nnumber was configured wrong and\n\n132\n00:07:19.720 --> 00:07:21.460\nthey mismatched or whatever.\n\n133\n00:07:21.460 --> 00:07:25.460\nSo don't assume the problem is\ndone just because we fixed that\n\n134\n00:07:25.460 --> 00:07:27.050\nbasic underlying problem.\n\n135\n00:07:27.050 --> 00:07:30.213\nNow in this case the troubleshooting\nticket said that BGP for\n\n136\n00:07:30.213 --> 00:07:33.879\nIPv6 is not establishing a connection\nbetween NYEDGE1 and EDGE2.\n\n137\n00:07:33.879 --> 00:07:37.753\nSo they're not asking us to verify whether\nwe're learning routes or anything.\n\n138\n00:07:37.753 --> 00:07:40.880\nThey're just asking us to verify\nthat we established a connection.\n\n139\n00:07:40.880 --> 00:07:44.530\nAnd so, assuming that's done,\nwe should have it.\n\n140\n00:07:44.530 --> 00:07:49.379\nNow this is IPv6 for BGP so some of\nthe commands are a little bit different.\n\n141\n00:07:49.379 --> 00:07:53.435\nCause we're used to doing things like,\nshow IP BGP summary,\n\n142\n00:07:53.435 --> 00:07:56.796\nwhich is a great way to see\nyour neighbors in IPV4.\n\n143\n00:07:56.796 --> 00:07:58.921\nBut an IPV6 is a little bit different.\n\n144\n00:07:58.921 --> 00:08:01.921\nSo what we need to do is show BGP.\n\n145\n00:08:01.921 --> 00:08:05.656\nThey just got rid of the protocol part\naltogether because now it can do IPV6 and\n\n146\n00:08:05.656 --> 00:08:08.740\neven some other things if\nwe really wanna go crazy.\n\n147\n00:08:08.740 --> 00:08:14.560\nAnd in here we've got\nshow BGP IPV6 unicast,\n\n148\n00:08:14.560 --> 00:08:19.400\nneighbors, all right,\nthat's the new show IP BGP summary.\n\n149\n00:08:19.400 --> 00:08:22.680\nIt's not exactly the easiest command\nto remember but when you look in here,\n\n150\n00:08:22.680 --> 00:08:24.010\nyou'll be able to see your neighbors.\n\n151\n00:08:24.010 --> 00:08:27.270\nAnd I've got one active neighbor session.\n\n152\n00:08:27.270 --> 00:08:31.230\nAnd we can see that we've sent and\nreceived communications across it.\n\n153\n00:08:31.230 --> 00:08:34.150\nHere's that session for\nthe neighbor on the other side.\n\n154\n00:08:34.150 --> 00:08:35.570\nSo I do have it.\n\n155\n00:08:35.570 --> 00:08:38.336\nWe are communicating and\nthings are looking good.\n\n156\n00:08:38.336 --> 00:08:42.154\nIt's giving me a lot more\ninformation than I actually needed,\n\n157\n00:08:42.154 --> 00:08:46.129\nbut I am able to communicate and\nget the information that we need.\n\n158\n00:08:46.129 --> 00:08:47.208\nSo is that looks good, and\n\n159\n00:08:47.208 --> 00:08:50.290\nthere's not really much else that\nwe need to mess with in here.\n\n160\n00:08:50.290 --> 00:08:53.843\nYou know, we can start digging\ninto other things, but\n\n161\n00:08:53.843 --> 00:08:57.254\nI just wanted to pull up\nthis one other command here.\n\n162\n00:08:57.254 --> 00:09:00.004\nShow BGP IPV6 unicast Summary.\n\n163\n00:09:00.004 --> 00:09:02.400\nAnd there I can see that neighbor again.\n\n164\n00:09:02.400 --> 00:09:04.990\nAnd the AS number in a slightly\nmore concise format.\n\n165\n00:09:04.990 --> 00:09:07.550\nSo I don't have to see all\nthe extra nitty gritty details.\n\n166\n00:09:07.550 --> 00:09:09.010\nEverything I need is right there.\n\n167\n00:09:09.010 --> 00:09:10.682\nAnd I see I've got that relationship.\n\n168\n00:09:10.682 --> 00:09:12.920\nI'm gonna run that same command\nover on the other side.\n\n169\n00:09:12.920 --> 00:09:15.590\nJust the show BGP IPV6 unicast summary.\n\n170\n00:09:16.680 --> 00:09:18.546\nAnd just make sure we're\nseeing the same thing.\n\n171\n00:09:18.546 --> 00:09:23.754\nSo that was show bgp ipv6 unicast summary.\n\n172\n00:09:25.962 --> 00:09:28.984\nAnd there actually I have another\nrelationship with somebody else but\n\n173\n00:09:28.984 --> 00:09:30.940\nthat's not what this\nquestion is all about.\n\n174\n00:09:30.940 --> 00:09:31.930\nLooks like we gotta.\n\n175\n00:09:31.930 --> 00:09:34.630\nBGP love triangle, but\nthis one is the one we were looking for.\n\n176\n00:09:34.630 --> 00:09:35.440\nWe've got it up.\n\n177\n00:09:35.440 --> 00:09:38.370\nWe're exchanging information,\nand everything looks healthy.\n\n178\n00:09:38.370 --> 00:09:43.100\nAll right so, BGP can be terribly complex,\nIPV6 can be terribly complex, but\n\n179\n00:09:43.100 --> 00:09:45.910\nin this case, it just turned\nout to be a downed interface.\n\n180\n00:09:45.910 --> 00:09:49.030\nAnd once we found that, we turned it on,\nwe save ourself a lot of time.\n\n181\n00:09:49.030 --> 00:09:50.160\nThat's why I encourage you,\n\n182\n00:09:50.160 --> 00:09:52.020\nuse the OSI models like your\ntrouble shooting structure.\n\n183\n00:09:52.020 --> 00:09:54.070\nStart with the easy stuff and\nthen move to the hard stuff.\n\n184\n00:09:54.070 --> 00:09:57.310\nSo you don't waste a ton of time\nfussing with something when\n\n185\n00:09:57.310 --> 00:09:59.760\nit turned out to be really simple,\nwhich is how this question was.\n\n186\n00:09:59.760 --> 00:10:01.046\nAll right, well that wraps this one up.\n\n187\n00:10:01.046 --> 00:10:06.149\nStay tuned,\nwe've got issue number three coming up.\n\n188\n00:10:06.149 --> 00:10:10.300\n[SOUND]\n\n",
          "vimeoId": "151030982"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #3` from set #11. The trouble ticket states that \"BGP between NYWAN1 and NYEDGE1 is not getting established. \"",
          "length": "805",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-11-3-set_11_issue_3-121115-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-11-3-set_11_issue_3-121115-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-11-3-set_11_issue_3-121115-1-sm.jpg",
          "title": "Set 11 Issue 3",
          "transcript": "WEBVTT\n\n1\n00:00:00.188 --> 00:00:05.668\n[MUSIC]\n\n2\n00:00:08.660 --> 00:00:13.236\nAll right, it's time for another Cisco\ntroubleshooting problem here at IT Pro TV,\n\n3\n00:00:13.236 --> 00:00:16.350\nand we've got Set 11 Issue 3 ready for\nus today.\n\n4\n00:00:16.350 --> 00:00:21.110\nThe troubleshooting ticket reads like\nthis, it says, BGP between NYWAN1 and\n\n5\n00:00:21.110 --> 00:00:24.070\nNYEDGE1 is not getting established.\n\n6\n00:00:24.070 --> 00:00:27.270\nAll right, well, let's take a look at our\ntopology and see which devices these are.\n\n7\n00:00:27.270 --> 00:00:31.940\nIt's NYWAN1 down here and NYEDGE1 up here.\n\n8\n00:00:31.940 --> 00:00:34.030\nThis is very similar to\nthe last problem we just did.\n\n9\n00:00:34.030 --> 00:00:38.760\nIssue two, it was that BGP wasn't\nbuilding up between NYEDGE1 and NYEDGE2.\n\n10\n00:00:38.760 --> 00:00:43.310\nWe fixed that, now we've got a little\nbit different, NYEDGE1 to NYWAN1.\n\n11\n00:00:43.310 --> 00:00:47.262\nThe main difference that we have here\nis it's not a point to point link.\n\n12\n00:00:47.262 --> 00:00:50.120\nWe're having to pass through\none node to get to the other.\n\n13\n00:00:50.120 --> 00:00:53.650\nNow, BTP really loves to have a full mesh.\n\n14\n00:00:53.650 --> 00:00:54.620\nThey love for\n\n15\n00:00:54.620 --> 00:00:57.230\none router to be connected to all\nthe other routers that are out there.\n\n16\n00:00:57.230 --> 00:00:58.550\nBut it doesn't always happen.\n\n17\n00:00:58.550 --> 00:01:01.850\nWith eBGP that's a problem, with iBGP,\nit's actually okay with it.\n\n18\n00:01:01.850 --> 00:01:04.510\nAs long as I can communicate\nbetween these two nodes,\n\n19\n00:01:04.510 --> 00:01:07.515\nthey can build a neighbor relationship\nup between themselves and it'll be fine,\n\n20\n00:01:07.515 --> 00:01:09.270\nright, iBGP will handle that.\n\n21\n00:01:09.270 --> 00:01:12.200\nBut we still need to verify\nwe have that connectivity.\n\n22\n00:01:12.200 --> 00:01:13.920\nAnd the way we're gonna troubleshoot,\n\n23\n00:01:13.920 --> 00:01:15.980\nthis is basically the same way\nwe troubleshot the last one.\n\n24\n00:01:15.980 --> 00:01:19.800\nWe're gonna take our OSI model,\nstart all the way down at Layer 1 and\n\n25\n00:01:19.800 --> 00:01:23.460\nkind of move up the layers, and\nsee where the breakdown is occurring.\n\n26\n00:01:23.460 --> 00:01:28.330\nThis could be as simple as an interface\nbeing down, or it could be more complex\n\n27\n00:01:28.330 --> 00:01:31.530\nlike BGP authentication\nconfigured incorrectly or so on.\n\n28\n00:01:31.530 --> 00:01:34.960\nWe do kind of have the advantage that\nwe've already worked with NYEDGE1 and\n\n29\n00:01:34.960 --> 00:01:40.230\nNYEDGE2, and I didn't see things like\nauthentication or route maps or ACLs.\n\n30\n00:01:40.230 --> 00:01:42.890\nWe didn't see any of that when\nwe were working with it before.\n\n31\n00:01:42.890 --> 00:01:44.340\nAnd we're passing over those same links.\n\n32\n00:01:44.340 --> 00:01:47.670\nNow, we may have those\nproblems down at NYWAN1.\n\n33\n00:01:47.670 --> 00:01:51.630\nThat's the new device in the mix, and\nso it makes sense to start there.\n\n34\n00:01:51.630 --> 00:01:54.150\nWe'll start with NYWAN1,\nand kind of troubleshoot.\n\n35\n00:01:54.150 --> 00:01:58.330\nBut before I do that, I do want to do\na little bit of information gathering.\n\n36\n00:01:58.330 --> 00:01:59.520\nIf you don't know them already,\n\n37\n00:01:59.520 --> 00:02:03.080\nyou do need to get the IPv6\naddresses of each of these nodes, so\n\n38\n00:02:03.080 --> 00:02:06.460\nthat we can test the network and\nsee where we have a failure, right?\n\n39\n00:02:06.460 --> 00:02:09.178\nWhen I deal with a lot of devices,\nI'll usually use trace route.\n\n40\n00:02:09.178 --> 00:02:11.130\nWith just a few devices, like these,\n\n41\n00:02:11.130 --> 00:02:14.914\nI might just use regular pings to see\nhow far along I can get on the network.\n\n42\n00:02:14.914 --> 00:02:20.612\nSo from issue two, we learned that NYEDGE1\n\n43\n00:02:20.612 --> 00:02:25.548\nwas 2001:d000:1::5.\n\n44\n00:02:25.548 --> 00:02:33.926\nAnd we learned that NYEDGE2's serial\ninterface here was 2001:D000:1::6, right.\n\n45\n00:02:33.926 --> 00:02:35.458\nSo we know those from issue two.\n\n46\n00:02:35.458 --> 00:02:38.905\nBut I don't know this other serial\ninterface, so I'm just gonna jump into\n\n47\n00:02:38.905 --> 00:02:42.626\nNYEDGE2 real quick, and just do a real\nquick check of that interface to make sure\n\n48\n00:02:42.626 --> 00:02:46.780\nit's not administratively shut down and\nto write down its IP address so I know it.\n\n49\n00:02:46.780 --> 00:02:49.240\nSo I'm gonna jump over to NYEDGE2, and\n\n50\n00:02:49.240 --> 00:02:52.320\nthen we'll jump right\nover to WAN1 from there.\n\n51\n00:02:52.320 --> 00:02:57.851\nSo on EDGE2,\nI'm really just gonna do a show run for\n\n52\n00:02:57.851 --> 00:03:00.880\ninterface Ser0/0/1.\n\n53\n00:03:04.170 --> 00:03:07.570\nAnd what I'm looking for is, first off,\nI'm looking for a shut down command.\n\n54\n00:03:07.570 --> 00:03:10.220\nSo if it's shut down then\nour ticket's almost over.\n\n55\n00:03:10.220 --> 00:03:12.428\nBut the other thing is I\nneed this address, right?\n\n56\n00:03:12.428 --> 00:03:16.972\nSo I'm gonna write that\ndown here that EDGE2 is,\n\n57\n00:03:16.972 --> 00:03:22.055\nyou know, it's got two addresses but\nthe address I care\n\n58\n00:03:22.055 --> 00:03:27.264\nabout here is 2001:D000:2::1 all right?\n\n59\n00:03:27.264 --> 00:03:30.385\nNow, notice that's a /26, so\nthat's a small network again and\n\n60\n00:03:30.385 --> 00:03:33.196\nthat means there's only one\nother usable IP in the network.\n\n61\n00:03:33.196 --> 00:03:37.975\nI expect the other end of this\nline to be 2001:d000:2::2,\n\n62\n00:03:37.975 --> 00:03:40.810\nright, that's the only other usable IP.\n\n63\n00:03:40.810 --> 00:03:44.400\nI also see that I've got ipv6 eigrp 1, so\n\n64\n00:03:44.400 --> 00:03:48.930\nI've got an interior protocol enabled\nhere, and that's all fine and good.\n\n65\n00:03:48.930 --> 00:03:50.490\nAll right, so let's jump over to NYWAN1,\n\n66\n00:03:50.490 --> 00:03:55.320\nand here's where we're really gonna\nstart our troubleshooting, all right?\n\n67\n00:03:55.320 --> 00:03:58.780\nSo layer one, is the cable plugged in?\n\n68\n00:03:58.780 --> 00:03:59.670\nWell, I don't know.\n\n69\n00:03:59.670 --> 00:04:01.340\nIt's lab equipment,\nit's kind of hard for me to see.\n\n70\n00:04:01.340 --> 00:04:03.870\nIt's actually not even on the same\ncontinent as me right now.\n\n71\n00:04:03.870 --> 00:04:07.920\nSo, if I want to see [LAUGH] what\nthe status of the interface is,\n\n72\n00:04:07.920 --> 00:04:11.540\nshow ipv6 interface brief\nis going to be my friend.\n\n73\n00:04:11.540 --> 00:04:13.950\nAnd looking at the topology,\nI'm looking for\n\n74\n00:04:13.950 --> 00:04:18.040\ninterface Ser0/1/1,\nthat's the one that I'm hunting.\n\n75\n00:04:18.040 --> 00:04:22.500\nSo when I get that, Serial0/1/1\nright here has a status of up/up.\n\n76\n00:04:22.500 --> 00:04:25.508\nSo the line is up and\nthe line protocol is up.\n\n77\n00:04:25.508 --> 00:04:30.105\nThe line, that means I've got a cable\nplugged in, and a line protocol means I\n\n78\n00:04:30.105 --> 00:04:34.634\nmight be using HDLC or PPP or any of\nthe various serial encapsulation types,\n\n79\n00:04:34.634 --> 00:04:38.986\nwhatever encapsulation it's using,\nit at least thinks that it's up.\n\n80\n00:04:38.986 --> 00:04:43.781\nAnd if I look at that address,\nI've got 2001:D000:2::2,\n\n81\n00:04:43.781 --> 00:04:46.346\nwhich was the address that I expected.\n\n82\n00:04:46.346 --> 00:04:49.946\nIn fact, that line looks healthy enough,\nlet's just do a quick test ping.\n\n83\n00:04:49.946 --> 00:04:55.246\nI'm gonna try and ping to 2001:D000:2::1,\n\n84\n00:04:55.246 --> 00:05:00.440\nwhich was NYEDGE2's address,\nand I can ping across it.\n\n85\n00:05:00.440 --> 00:05:00.970\nAll right.\n\n86\n00:05:02.110 --> 00:05:05.950\nSo what I just established is that\nthis line right here is healthy.\n\n87\n00:05:05.950 --> 00:05:11.220\nIt's healthy and I can ping in\nbetween NYWAN1 And NYEDGE2, all right?\n\n88\n00:05:11.220 --> 00:05:13.910\nSo now, layer one, layer two,\nlayer three communications,\n\n89\n00:05:13.910 --> 00:05:15.610\nthey're all good on this line.\n\n90\n00:05:15.610 --> 00:05:17.884\nNow we start getting into\nthe harder stuff, all right?\n\n91\n00:05:17.884 --> 00:05:20.212\nDo we have ACLs?\n\n92\n00:05:20.212 --> 00:05:23.224\nDo we have other filters\nthat are in place?\n\n93\n00:05:23.224 --> 00:05:25.080\nA route master messing with things?\n\n94\n00:05:25.080 --> 00:05:27.110\nDo we have just bad routing?\n\n95\n00:05:27.110 --> 00:05:29.950\nI've tested connectivity between me and\nEDGE2.\n\n96\n00:05:29.950 --> 00:05:31.480\nBut it's not EDGE2 that\nI really care about.\n\n97\n00:05:31.480 --> 00:05:33.860\nAt the end of the day,\nI need to be able to get to EDGE1.\n\n98\n00:05:33.860 --> 00:05:36.420\nRight, this is the relationship\nthat we're trying to fix.\n\n99\n00:05:36.420 --> 00:05:38.560\nSo can I get all the way\nto the other side?\n\n100\n00:05:38.560 --> 00:05:40.960\nThis is where BGP starts to break down.\n\n101\n00:05:40.960 --> 00:05:43.570\nI don't have to be directly connected\nto somebody to build a neighbor\n\n102\n00:05:43.570 --> 00:05:44.870\nrelationship with them.\n\n103\n00:05:44.870 --> 00:05:49.200\nBut I do have to have a route to get\nthere, and BGP won't give me that route.\n\n104\n00:05:49.200 --> 00:05:51.240\nI have to get it from\nan interior protocol.\n\n105\n00:05:51.240 --> 00:05:54.770\nSo I've got to have an IGP running\nunder the hood or static routes, so\n\n106\n00:05:54.770 --> 00:05:56.600\none way or\nanother I have to have a static route.\n\n107\n00:05:56.600 --> 00:05:59.900\nSo let's see if I can ping\nover to EDGE1 from here, and\n\n108\n00:05:59.900 --> 00:06:04.950\nif I can then we can nix that out and all\nthat's left to troubleshoot is BGP itself.\n\n109\n00:06:04.950 --> 00:06:09.783\nSo on NYWAN1,\nI'm just gonna do a ping, and\n\n110\n00:06:09.783 --> 00:06:14.236\nI'm gonna ping the address of NYEDGE1,\n\n111\n00:06:14.236 --> 00:06:19.720\nwhich was 2001:D000:1::5.\n\n112\n00:06:19.720 --> 00:06:22.280\nRight?\nSo I'm gonna try and ping that.\n\n113\n00:06:22.280 --> 00:06:24.060\nNo valid route for destination.\n\n114\n00:06:24.060 --> 00:06:26.960\nAll right.\nSo, I am not able to get there.\n\n115\n00:06:26.960 --> 00:06:28.750\nAnd that was the address for NYEDGE1.\n\n116\n00:06:28.750 --> 00:06:34.127\nI'm directly plugged into NYEDGE2,\nso let me try its address,\n\n117\n00:06:34.127 --> 00:06:37.758\nwhich was 2001:D000:1::6.\n\n118\n00:06:37.758 --> 00:06:40.212\nAnd when I go there,\nno valid route for destination.\n\n119\n00:06:40.212 --> 00:06:46.413\nAll right?\nI was able to ping 2001:D000:1::5 or\n\n120\n00:06:46.413 --> 00:06:51.870\nI'm sorry it was :2::1, there we go.\n\n121\n00:06:51.870 --> 00:06:54.710\nThat is an address on NYEDGE2.\n\n122\n00:06:54.710 --> 00:06:57.540\nThat was, going back to my diagram,\nthat was this interface.\n\n123\n00:06:57.540 --> 00:07:01.040\nSo I can ping from NYWAN1\nto this interface, but\n\n124\n00:07:01.040 --> 00:07:02.810\nI can't ping to this interface up here.\n\n125\n00:07:02.810 --> 00:07:04.200\nRight, on the same system.\n\n126\n00:07:04.200 --> 00:07:05.690\nI know I can get there.\n\n127\n00:07:05.690 --> 00:07:07.670\nBut this is a great indicator that,\n\n128\n00:07:07.670 --> 00:07:09.870\nmuch like the screen told me,\nI don't have a route.\n\n129\n00:07:09.870 --> 00:07:12.120\nBut I'm missing a route\nto get to that network.\n\n130\n00:07:12.120 --> 00:07:15.884\nSo if I do a show IPv6 route,\nlet's see what we get.\n\n131\n00:07:15.884 --> 00:07:19.217\n2001:D000:2 but\n\n132\n00:07:19.217 --> 00:07:23.664\nno 2001:D000:1, right?\n\n133\n00:07:23.664 --> 00:07:25.564\nSo, I'm missing a route.\n\n134\n00:07:25.564 --> 00:07:27.764\nI need to fix that, how do I fix it?\n\n135\n00:07:27.764 --> 00:07:28.424\nWell, I have two choices.\n\n136\n00:07:28.424 --> 00:07:29.544\nOne, I could put a static route in.\n\n137\n00:07:29.544 --> 00:07:32.690\nI can just say, hey, if you need\nto get to this, go up to EDGE2.\n\n138\n00:07:32.690 --> 00:07:36.528\nHeck, I could put a default route in and\nthat would cover it too, right?\n\n139\n00:07:36.528 --> 00:07:38.224\nOr we could do it the right way, and\n\n140\n00:07:38.224 --> 00:07:41.688\nthe right way is to use an interior\ngateway protocol, an IGP, right?\n\n141\n00:07:41.688 --> 00:07:48.670\nAnd I noticed in passing when we were on\nNYEDGE2, that it was running EIGRP, right?\n\n142\n00:07:48.670 --> 00:07:49.470\nipv6 eigrp 1.\n\n143\n00:07:49.470 --> 00:07:52.860\nNow, that autonomous system number\ndoesn't match my diagram, but\n\n144\n00:07:52.860 --> 00:07:54.310\nneither does the protocol, right?\n\n145\n00:07:54.310 --> 00:07:59.968\nThe diagram shows that we're running\nEIGRP autonomous system 10 for\n\n146\n00:07:59.968 --> 00:08:03.620\nIPv4, and\nit shows that we're running iBGP for IPv6.\n\n147\n00:08:03.620 --> 00:08:08.740\nIt doesn't show EIGRP for\nIPv6 at all, anywhere.\n\n148\n00:08:08.740 --> 00:08:12.260\nSo, since that's the case, it doesn't\nreally matter what AS number we use.\n\n149\n00:08:12.260 --> 00:08:13.600\nThey're not telling us one.\n\n150\n00:08:13.600 --> 00:08:18.000\nAnd so, if we're already using AS number\none here, we might as well stick with it.\n\n151\n00:08:18.000 --> 00:08:20.340\nI am gonna double-check NYEDGE1, though.\n\n152\n00:08:20.340 --> 00:08:24.880\nLet's see what NYEDGE1 is doing, because\nit needs to be a party to this too.\n\n153\n00:08:24.880 --> 00:08:29.800\nRemember, if I get my package to NYEDGE1,\nNYEDGE1 has to know how to get back to me.\n\n154\n00:08:29.800 --> 00:08:32.910\nAnd so that's why it's important\nthat I check on this one too.\n\n155\n00:08:32.910 --> 00:08:37.590\nSo, if I take a look at its interface, and\nthat would be Ser0/0/0, whoops, if I type\n\n156\n00:08:43.440 --> 00:08:46.180\nthat correctly we'll get it, there we go.\n\n157\n00:08:46.180 --> 00:08:48.850\nAnd it's not running IGP,\n\n158\n00:08:48.850 --> 00:08:53.710\nit's not running it, so\nlet's take a look at its routing table.\n\n159\n00:08:55.360 --> 00:08:59.810\nAnd we'll probably need to\nbring it into BGP also.\n\n160\n00:08:59.810 --> 00:09:02.100\nHang on a second here.\n\n161\n00:09:02.100 --> 00:09:03.620\nNow, I just saw that it wasn't there.\n\n162\n00:09:03.620 --> 00:09:06.390\nSo, normally,\nwhen when we enable EIGRP for\n\n163\n00:09:06.390 --> 00:09:09.000\nIPv6 we turn it on on an interface, right?\n\n164\n00:09:09.000 --> 00:09:10.185\nAnd so that's what I looked at.\n\n165\n00:09:10.185 --> 00:09:13.010\nNow, I can see I am running EIGRP.\n\n166\n00:09:13.010 --> 00:09:17.150\nLet me do a show ipv6 protocol,\n[LAUGH] let's verify this.\n\n167\n00:09:17.150 --> 00:09:19.300\nI'm getting mixed signals\nfrom this router.\n\n168\n00:09:19.300 --> 00:09:24.700\nSo looking at it, it is running eigrp for\nautonomous system 1, so\n\n169\n00:09:24.700 --> 00:09:28.410\nit is running it, it's just not configured\non the interface, which is the way we're\n\n170\n00:09:28.410 --> 00:09:32.010\nsupposed to do these things now, but\nit's not the end of the world, I guess.\n\n171\n00:09:32.010 --> 00:09:35.600\nIf I pull up the running config,\nsure enough, here's router eigrp,\n\n172\n00:09:35.600 --> 00:09:37.560\nit's got a name called TSHOOT.\n\n173\n00:09:37.560 --> 00:09:39.620\nAnd they're just using network\nstatements to enable it,\n\n174\n00:09:39.620 --> 00:09:40.920\ninstead of doing it on the interface.\n\n175\n00:09:40.920 --> 00:09:42.000\nThat's fine.\n\n176\n00:09:42.000 --> 00:09:44.098\nWell actually that's IPv4.\n\n177\n00:09:47.348 --> 00:09:52.990\nIPv6 is showing that it's got\na unicast for autonomous-system 1.\n\n178\n00:09:52.990 --> 00:09:54.240\nThere's the ipv6 side.\n\n179\n00:09:54.240 --> 00:09:57.990\nIt's got no network statements whatsoever.\n\n180\n00:09:57.990 --> 00:09:59.880\nLet me take a look at\nthose interfaces again.\n\n181\n00:09:59.880 --> 00:10:02.000\nThis might be an interesting one for us.\n\n182\n00:10:02.000 --> 00:10:04.320\nSo, I'm just trying to make sure\nthat it is actually enabled.\n\n183\n00:10:04.320 --> 00:10:09.740\nIt's showing in the routing table, so it\nappears to be working, and as I look down\n\n184\n00:10:09.740 --> 00:10:13.650\nalong the line here, Serial0/0/0.\n\n185\n00:10:13.650 --> 00:10:15.370\nOkay, all right, I see what's going on.\n\n186\n00:10:15.370 --> 00:10:18.410\nSo, we've got it configured\nusing a address family.\n\n187\n00:10:19.520 --> 00:10:25.688\nSo it's actually running under the first\nprocess, which is set for AS number one.\n\n188\n00:10:25.688 --> 00:10:28.908\nAnd it's a kind of a convoluted way\nto go about it but it does work.\n\n189\n00:10:28.908 --> 00:10:31.718\nSo, see how we got one configuration here?\n\n190\n00:10:31.718 --> 00:10:33.328\nAnd it's got autonomous system ten and\n\n191\n00:10:33.328 --> 00:10:36.650\nautonomous system 1 being carried\ninside of it as two address families.\n\n192\n00:10:36.650 --> 00:10:39.670\nAnd so that's how it's able to bring\nit across and learn those routes.\n\n193\n00:10:39.670 --> 00:10:41.300\nSo it is learning the route.\n\n194\n00:10:41.300 --> 00:10:44.140\nAnd that's good enough for me.\n\n195\n00:10:44.140 --> 00:10:47.168\nI'll just verify that one more\ntime to make sure it's there.\n\n196\n00:10:47.168 --> 00:10:50.291\nAnd, sure enough, yeah, so we've got that.\n\n197\n00:10:50.291 --> 00:10:55.703\n2001:D000:2, so that's right there so\nit's got the return path.\n\n198\n00:10:55.703 --> 00:10:57.381\nSo all it's missing is me getting there.\n\n199\n00:10:57.381 --> 00:11:00.121\nSo honestly, a static route would\nwork just as well as participating in\n\n200\n00:11:00.121 --> 00:11:01.875\nthe dynamic routing protocol.\n\n201\n00:11:01.875 --> 00:11:04.775\nBut the dynamic routing protocol is\nprobably gonna be the path of least\n\n202\n00:11:04.775 --> 00:11:06.025\nresistance on this one.\n\n203\n00:11:06.025 --> 00:11:07.650\nSo that's what I'll do.\n\n204\n00:11:07.650 --> 00:11:12.190\nI'm gonna get into interface S0/1/1.\n\n205\n00:11:12.190 --> 00:11:14.780\nAnd what I'm doing is I'm taking NYWAN1,\nand\n\n206\n00:11:14.780 --> 00:11:19.660\nI'm gonna put this interface\ninto EIGRP Autonomous System 1.\n\n207\n00:11:19.660 --> 00:11:22.580\nAnd when that happens is you\nstart exchanging routes up here.\n\n208\n00:11:22.580 --> 00:11:24.750\nAnd then we should learn\nour full routing table.\n\n209\n00:11:24.750 --> 00:11:29.506\nSo if I do a ipv6 eigrp 1,\nthat'll do that, and\n\n210\n00:11:29.506 --> 00:11:33.568\nI see a neighbor relationship coming up.\n\n211\n00:11:33.568 --> 00:11:38.614\nAnd what I'm hoping is I learn the route\nto that other network, and there it is.\n\n212\n00:11:38.614 --> 00:11:43.536\nSo we've got 2001:D000:1, right.\n\n213\n00:11:43.536 --> 00:11:46.300\nSo that's the one I was missing and\nnow it's there.\n\n214\n00:11:46.300 --> 00:11:51.210\nSo earlier, what I tried to do was ping\nall the way to NYEDGE1 and it failed.\n\n215\n00:11:51.210 --> 00:11:55.970\nAnd now, what I should be able to do\nis ping all the way to NYEDGE1, and\n\n216\n00:11:55.970 --> 00:11:56.800\nit succeeds.\n\n217\n00:11:56.800 --> 00:11:57.688\nThere we go.\n\n218\n00:11:57.688 --> 00:12:01.998\nAnd now that it's succeeding,\nin theory, EGP should work.\n\n219\n00:12:01.998 --> 00:12:04.600\nAs long as we have a route\nto get to that neighbor,\n\n220\n00:12:04.600 --> 00:12:08.990\nwe should be able to build an adjacency\nacross it assuming that it's set up right.\n\n221\n00:12:08.990 --> 00:12:11.890\nNow, I didn't see any messages\npop up on my screen, so\n\n222\n00:12:11.890 --> 00:12:14.560\nit might not be set up right, or\nI might have just overlooked it.\n\n223\n00:12:14.560 --> 00:12:20.180\nSo I'm gonna do a quick show\nbgp ipv6 unicast summary.\n\n224\n00:12:21.730 --> 00:12:23.698\nAnd, there we go.\n\n225\n00:12:23.698 --> 00:12:25.078\nI must have just missed the message.\n\n226\n00:12:25.078 --> 00:12:25.638\nThere it is.\n\n227\n00:12:25.638 --> 00:12:29.540\n2001:D000:1::5.\n\n228\n00:12:29.540 --> 00:12:30.110\nIt's up.\n\n229\n00:12:30.110 --> 00:12:33.310\nI've sent four messages,\nI've received six.\n\n230\n00:12:33.310 --> 00:12:36.950\nWe're exchanging routes, we've now built\nour adjacency with the other side.\n\n231\n00:12:36.950 --> 00:12:39.890\nSo this one turned out\nnot to be a BGP problem,\n\n232\n00:12:39.890 --> 00:12:42.790\nas much as it was just the underlying IGP.\n\n233\n00:12:42.790 --> 00:12:47.350\nRemember, when you're dealing with iBGP,\nif you don't have a full mesh,\n\n234\n00:12:47.350 --> 00:12:51.700\nif your routers aren't directly connected\nto all the other routers, then you need to\n\n235\n00:12:51.700 --> 00:12:55.600\nmake sure you've got an underlying IGP\nthat's providing the routes to get\n\n236\n00:12:55.600 --> 00:12:59.770\nbetween them cuz BGP won't figure it out\non its own, and that's what happened here.\n\n237\n00:12:59.770 --> 00:13:04.670\nAs soon as we had the routes in the IGP,\nBGP just started working on its own, and\n\n238\n00:13:04.670 --> 00:13:06.190\nit was taken care of.\n\n239\n00:13:06.190 --> 00:13:08.530\nSo that wraps up issue number three,\n\n240\n00:13:08.530 --> 00:13:11.120\nturned out to be EIGRP that had a problem,\nnot BGP.\n\n241\n00:13:11.120 --> 00:13:14.130\nNow that that's resolved,\nwe're ready to move on to the next ticket.\n\n242\n00:13:14.130 --> 00:13:15.440\nSo I hope you guys enjoyed that one.\n\n243\n00:13:15.440 --> 00:13:18.878\nStay tuned,\nwe've got issue four coming up next.\n\n244\n00:13:18.878 --> 00:13:23.838\n[MUSIC]\n\n",
          "vimeoId": "151030985"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #4` from set #11. The trouble ticket states that \"When you observe the BGP table (IPv6) on NYWAN1 once the connection is up, you notice there is a rib failure for the network that is present there \"",
          "length": "525",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-11-4-set_11_issue_4-121115-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-11-4-set_11_issue_4-121115-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-11-4-set_11_issue_4-121115-1-sm.jpg",
          "title": "Set 11 Issue 4",
          "transcript": "WEBVTT\n\n1\n00:00:00.228 --> 00:00:07.507\n[MUSIC]\n\n2\n00:00:07.507 --> 00:00:11.310\nAlright welcome back to another\ntroubleshooting question here on ITPro TV.\n\n3\n00:00:11.310 --> 00:00:13.480\nWe've got Set 11 Issue 4 and\n\n4\n00:00:13.480 --> 00:00:15.690\nthis ones actually a follow\nup to issue number three.\n\n5\n00:00:15.690 --> 00:00:19.370\nSo if you haven't done issue number three\nyet make sure you tackle that one first.\n\n6\n00:00:19.370 --> 00:00:22.110\nIn issue number three we had two\nrouters that weren't forming a BGP\n\n7\n00:00:22.110 --> 00:00:25.590\nrelationship we got that neighbor\nrelationship up and now it's functioning.\n\n8\n00:00:25.590 --> 00:00:30.300\nAnd in this ticket it says,\nwhen you observe the BGP table for\n\n9\n00:00:30.300 --> 00:00:34.910\nIPv6 on NYWAN1 once the connection is up,\nyou notice there's a rib failure for\n\n10\n00:00:34.910 --> 00:00:36.690\nthe network that is present there.\n\n11\n00:00:36.690 --> 00:00:39.700\nSo it's saying now that we went through\nthe trouble of fixing that BGP neighbor\n\n12\n00:00:39.700 --> 00:00:40.800\nrelationship.\n\n13\n00:00:40.800 --> 00:00:45.070\nIt comes up, and in BGP we're seeing this\nrib failure, and we need to find out why.\n\n14\n00:00:45.070 --> 00:00:47.270\nNow if you don't remember what the rib is,\n\n15\n00:00:47.270 --> 00:00:50.700\nin the background BGP maintains\nits own route database, and\n\n16\n00:00:50.700 --> 00:00:54.480\nonly the best routes are selected and\nthen thrown into the routing table.\n\n17\n00:00:54.480 --> 00:00:57.790\nBut sometimes routes are discarded early,\nthey're not even put into the election\n\n18\n00:00:57.790 --> 00:00:59.500\nprocess to find out whether\nthey should go up or not.\n\n19\n00:00:59.500 --> 00:01:02.380\nThey're just kinda killed off,\nand that's called a rib failure.\n\n20\n00:01:02.380 --> 00:01:03.770\nAnd sometimes it's good,\n\n21\n00:01:03.770 --> 00:01:06.960\nsometimes it's bad, sometimes there's some\naction to take, sometimes there's not.\n\n22\n00:01:06.960 --> 00:01:09.500\nAnd we just need to find out why and\nwhat's going on here.\n\n23\n00:01:09.500 --> 00:01:11.970\nSo there's a couple of commands\nthat can really help with that.\n\n24\n00:01:11.970 --> 00:01:14.440\nLet's start by looking at\nour topology real quick\n\n25\n00:01:14.440 --> 00:01:17.070\nbecause it might have been a little\nwhile since you've done the other issue.\n\n26\n00:01:17.070 --> 00:01:21.110\nBut in issue three, we fix the neighbor\nrelationship between NYWAN1 and NYEDGE1.\n\n27\n00:01:21.110 --> 00:01:24.570\nAnd there's this extra hop in the middle.\n\n28\n00:01:24.570 --> 00:01:28.330\nWhich was causing us some problems, so we\nhad to create a interior routing protocol\n\n29\n00:01:28.330 --> 00:01:32.970\nEIGRP to provide the internal routes so\nthese two could see each other and\n\n30\n00:01:32.970 --> 00:01:34.470\nbuild up a neighbor relationship.\n\n31\n00:01:34.470 --> 00:01:38.040\nAnd now that's up, we're getting\nsome kind of better route coming in.\n\n32\n00:01:38.040 --> 00:01:39.970\nWell, fortunately there's some\ngood commands we can run that'll\n\n33\n00:01:39.970 --> 00:01:41.720\nactually tell us exactly\nwhat the problem is.\n\n34\n00:01:41.720 --> 00:01:46.490\nSo on NYWAN1, if we jump over to that one,\nand I'm choosing NYWAN1\n\n35\n00:01:46.490 --> 00:01:48.780\nbecause that's what the troubleshooting\nticket told me to do, right?\n\n36\n00:01:48.780 --> 00:01:54.000\nIt said, on NYWAN1 were getting\na rib failure, find out why.\n\n37\n00:01:54.000 --> 00:01:58.030\nSo, I'm just gonna get\ninto this guy's config and\n\n38\n00:01:58.030 --> 00:02:00.180\nI'm gonna verify a few things real quick.\n\n39\n00:02:00.180 --> 00:02:05.010\nNow it may have been a little while\nsince you've fixed the other issues, so\n\n40\n00:02:05.010 --> 00:02:08.530\nI'm gonna do a show bgp\nipv6 unicast summary.\n\n41\n00:02:08.530 --> 00:02:11.140\nJust to make sure that I still have\na neighbor relationship with that other\n\n42\n00:02:11.140 --> 00:02:12.710\nrouter, and I do, okay.\n\n43\n00:02:12.710 --> 00:02:15.700\nSo I'm communicating with it and\nI'm exchanging routes.\n\n44\n00:02:15.700 --> 00:02:19.210\nWhen I scroll over here,\nsee how I've got a PfxRcd 1.\n\n45\n00:02:19.210 --> 00:02:21.350\nSo I've received at least one route.\n\n46\n00:02:21.350 --> 00:02:24.530\nAnd if I'm gonna have rib failure,\nthat's gonna be the route.\n\n47\n00:02:24.530 --> 00:02:28.320\nSo the only route I've received is\na rib failure according to that.\n\n48\n00:02:28.320 --> 00:02:30.970\nBut I don't actually see\nthat here on this screen.\n\n49\n00:02:30.970 --> 00:02:32.020\nWhere do I see that?\n\n50\n00:02:32.020 --> 00:02:38.840\nWell you can see rib failures with\nthe show bgp IPv6 unicast command.\n\n51\n00:02:38.840 --> 00:02:42.380\nAnd when you run this it's gonna\nshow you the unicast database and\n\n52\n00:02:42.380 --> 00:02:44.650\nall the routes that you've learned and\nI've only learned one.\n\n53\n00:02:44.650 --> 00:02:47.640\nBut it doesn't matter if you learned\none or a thousand, if there's a rib\n\n54\n00:02:47.640 --> 00:02:51.170\nfailure it's really easy to spot\nbecause it'll have an r right there.\n\n55\n00:02:51.170 --> 00:02:56.740\nAnd what that r means is no matter what\nhappens, no matter how good this route is\n\n56\n00:02:56.740 --> 00:03:00.510\nor how bad other routes are, this one is\nnot gonna make it into the routing table.\n\n57\n00:03:00.510 --> 00:03:03.440\nThere's something wrong with this route.\n\n58\n00:03:03.440 --> 00:03:07.680\nAnd the something wrong could be a lot\nof different things but if it was a good\n\n59\n00:03:07.680 --> 00:03:11.460\nroute, I would expect to see\nan asterisk here where the r is, right?\n\n60\n00:03:11.460 --> 00:03:13.880\nAn asterisk means it's a valid route.\n\n61\n00:03:13.880 --> 00:03:17.290\nAnd then if it's got a greater\nthan sign beside it,\n\n62\n00:03:17.290 --> 00:03:18.990\nthat means this is the winning route.\n\n63\n00:03:18.990 --> 00:03:21.430\nThis is the one that's gonna\ngo into the routing table.\n\n64\n00:03:21.430 --> 00:03:25.530\nAnd then the i just let's me know\nthis came from an internal system, so\n\n65\n00:03:25.530 --> 00:03:26.930\nIBGP in this case.\n\n66\n00:03:26.930 --> 00:03:29.240\nSo that's what those are telling me.\n\n67\n00:03:29.240 --> 00:03:30.690\nWell, even though it's got the greater,\n\n68\n00:03:30.690 --> 00:03:33.710\neven though that means this is\nthe best route, it doesn't matter.\n\n69\n00:03:33.710 --> 00:03:38.510\nIt never really participated in\nthe election because of that r, okay?\n\n70\n00:03:38.510 --> 00:03:41.970\nBut it doesn't really tell\nus anything here as far as\n\n71\n00:03:41.970 --> 00:03:43.430\nwhy that's happening, right?\n\n72\n00:03:43.430 --> 00:03:45.700\nSo I know I've got a route failure,\nbut I don't know why.\n\n73\n00:03:45.700 --> 00:03:50.807\nI can get a little more\ninformation with the show\n\n74\n00:03:50.807 --> 00:03:55.410\nbgp ipv6 unicast rib-failure command.\n\n75\n00:03:55.410 --> 00:03:59.363\nAll right, that one will show you detailed\ninformation about the rib failure or\n\n76\n00:03:59.363 --> 00:04:00.961\nas detailed as it's gonna get.\n\n77\n00:04:00.961 --> 00:04:07.190\nAnd so when I look at that,\nhere's the network, 2001:B000::/64.\n\n78\n00:04:07.190 --> 00:04:11.580\nBut my favorite part is if you just come\nright over here, it'll tell you why.\n\n79\n00:04:11.580 --> 00:04:13.530\nAnd I can see right here\nunder the rib failure,\n\n80\n00:04:13.530 --> 00:04:18.300\nwe've got IPv6 Higher admin distance,\nall right?\n\n81\n00:04:18.300 --> 00:04:19.550\nWhat does that mean?\n\n82\n00:04:19.550 --> 00:04:23.980\nIt means I'm learning this\nroute through some other manner\n\n83\n00:04:23.980 --> 00:04:26.390\nthat has a better\nadministration than this one.\n\n84\n00:04:26.390 --> 00:04:29.280\nThis one's route has a higher admin\ndistance than whatever's in my\n\n85\n00:04:29.280 --> 00:04:30.460\nrouting table.\n\n86\n00:04:30.460 --> 00:04:33.440\nSo, I'm learning this via BGP.\n\n87\n00:04:33.440 --> 00:04:37.120\nWhat could possibly have a higher\nadministrative distance than that?\n\n88\n00:04:37.120 --> 00:04:38.520\nWell, there's actually a lot of things.\n\n89\n00:04:38.520 --> 00:04:40.910\nI'm learning this via iBPG.\n\n90\n00:04:40.910 --> 00:04:45.620\nRemember, with BGP, an external BGP\nroute has an admin distance of 20.\n\n91\n00:04:45.620 --> 00:04:48.460\nThe only thing that's gonna beat\nthat by default is a connected or\n\n92\n00:04:48.460 --> 00:04:52.710\na static route otherwise,\nexternal BGP always wins, right?\n\n93\n00:04:52.710 --> 00:04:56.970\nBut iBGP has an admin distance of 200.\n\n94\n00:04:56.970 --> 00:05:01.820\nAnd that means RIP at 120, OSPF at 110,\n\n95\n00:05:01.820 --> 00:05:05.890\nEIGRP at 90, they're all going to beat it.\n\n96\n00:05:05.890 --> 00:05:07.520\nEven external OSPF and\n\n97\n00:05:07.520 --> 00:05:13.570\nexternal EIGRP routes have a lower admin\ndistance than internal BGP, all right?\n\n98\n00:05:13.570 --> 00:05:16.860\nWhy is that, why does iBGP get\nkinda shunted to the back?\n\n99\n00:05:16.860 --> 00:05:20.440\nWell the reason is iBGP is\nnever expected to run alone.\n\n100\n00:05:20.440 --> 00:05:24.460\nIt's expected to be run in\ntandem with an IGP and the IGP\n\n101\n00:05:24.460 --> 00:05:28.800\nis providing all of our interior routes\nand it will know them better than BGP.\n\n102\n00:05:28.800 --> 00:05:31.430\nBecause BGP kinda sucks\nas a routing protocol.\n\n103\n00:05:31.430 --> 00:05:34.180\nIt doesn't do a good job\nof finding optimal paths.\n\n104\n00:05:34.180 --> 00:05:37.720\nIt does a good job at finding\na path not necessarily optimal.\n\n105\n00:05:37.720 --> 00:05:41.360\nSo it leaves it up to the IGP\nto find the optimal path.\n\n106\n00:05:41.360 --> 00:05:44.780\nAnd so that's why its got such\na high admin distance for interior.\n\n107\n00:05:44.780 --> 00:05:47.850\nOn the exterior side, that's a different\nstory because you're interior protocols\n\n108\n00:05:47.850 --> 00:05:49.760\ndon't know about the exterior networks.\n\n109\n00:05:49.760 --> 00:05:52.560\nSo there's no sense in turning\nit over to an interior protocol,\n\n110\n00:05:52.560 --> 00:05:54.145\nit's just gonna get us lost.\n\n111\n00:05:54.145 --> 00:05:57.530\nBGP takes over and\neBPG has that nice low cost.\n\n112\n00:05:57.530 --> 00:06:00.910\nSo here I've got that rib failure cuz I'm\nalready learning it from another protocol.\n\n113\n00:06:00.910 --> 00:06:10.040\nAnd if I do a show ipv6 route I expect\nto see 2001:B000 learn some other way.\n\n114\n00:06:10.040 --> 00:06:14.928\nAnd so when I run that and\nlook, here it is 2001:B000 and\n\n115\n00:06:14.928 --> 00:06:19.480\nsure enough here it is with\nan admin distance of 90,\n\n116\n00:06:19.480 --> 00:06:23.140\nbecause it's being learned form EIGRP,\nokay?\n\n117\n00:06:23.140 --> 00:06:28.420\nSo we found the problem and\nwe know why there's a problem, okay?\n\n118\n00:06:28.420 --> 00:06:29.770\nWhat do we do about it?\n\n119\n00:06:29.770 --> 00:06:32.730\nWell the answer, absolutely nothing.\n\n120\n00:06:32.730 --> 00:06:35.820\nThey told us there's a rib failure,\nthey told us to find it and\n\n121\n00:06:35.820 --> 00:06:38.120\nfigure out why it's there, we know.\n\n122\n00:06:38.120 --> 00:06:40.210\nWe know it's there and\nthis is behavior as normal.\n\n123\n00:06:40.210 --> 00:06:44.660\nI expect this happen so\nthe action I take is nothing, right?\n\n124\n00:06:44.660 --> 00:06:49.800\nIf the question had gone on to say, you\nneed to have the BGP route at the table,\n\n125\n00:06:49.800 --> 00:06:51.520\nthat's a different story, right?\n\n126\n00:06:51.520 --> 00:06:52.800\nNow we have a choice,\n\n127\n00:06:52.800 --> 00:06:57.430\nwe could take that route out of EIGRP and\nthen it wouldn't overwrite it.\n\n128\n00:06:57.430 --> 00:07:01.060\nWe could modify the admin distance\nof IBGP if we were crazy.\n\n129\n00:07:01.060 --> 00:07:02.970\nThat always leads to all to\nall sorts of routing mixups,\n\n130\n00:07:02.970 --> 00:07:05.570\nyou have to be rally careful\nwhen you change admin distances.\n\n131\n00:07:05.570 --> 00:07:09.810\nWe could do a route map to manually\nset the distance just for that route.\n\n132\n00:07:09.810 --> 00:07:12.700\nWe could do a prefix\nlist to filter it out.\n\n133\n00:07:12.700 --> 00:07:16.430\nWe could say I'll let EIGRP teach me\neverything except for that network.\n\n134\n00:07:16.430 --> 00:07:18.810\nAnd when we take it out like that,\n\n135\n00:07:18.810 --> 00:07:21.580\nthen BGP will have it's opportunity\nto go into the routing table.\n\n136\n00:07:21.580 --> 00:07:24.440\nThose are all different ways we could make\nthe BGP route go in the routing table.\n\n137\n00:07:24.440 --> 00:07:28.430\nBut at the end of the day you don't\nwant the BGP route in the routing table\n\n138\n00:07:28.430 --> 00:07:31.920\nbecause BGP is not gonna give\nyou an optimal route EIGRP will.\n\n139\n00:07:31.920 --> 00:07:33.780\nSo this behavior is normal.\n\n140\n00:07:33.780 --> 00:07:36.840\nI expect to see it, so\nthat's a key thing to learn\n\n141\n00:07:36.840 --> 00:07:41.630\njust because you see a rib failure doesn't\nmean there's necessarily a problem.\n\n142\n00:07:41.630 --> 00:07:42.710\nHere, it's a good thing.\n\n143\n00:07:42.710 --> 00:07:47.300\nI want the route to fail in BGP because I\nwant the EIGRP route to take precedence.\n\n144\n00:07:47.300 --> 00:07:51.060\nSo this is one of those few special\ntrouble shooting tickets where\n\n145\n00:07:51.060 --> 00:07:51.980\nwe don't have to do anything.\n\n146\n00:07:51.980 --> 00:07:56.450\nNow on the exam, they're either\ngonna ask you to do something or\n\n147\n00:07:56.450 --> 00:07:58.770\nthey're gonna ask you explain\nwhy something is wrong.\n\n148\n00:07:58.770 --> 00:07:59.590\nSo this would be one that\n\n149\n00:07:59.590 --> 00:08:01.720\nwould have a multiple choice\nquestion associated with it.\n\n150\n00:08:01.720 --> 00:08:03.430\nWhy are you getting the rib failure?\n\n151\n00:08:03.430 --> 00:08:08.080\nI actually didn't know why I was getting\nthe rib failure until I ran this show bgp\n\n152\n00:08:08.080 --> 00:08:12.682\nipv6 unicast rib-failure command and\nthat's when it actually told me why.\n\n153\n00:08:12.682 --> 00:08:16.300\nAnd so they're testing your\nknowledge of those show commands.\n\n154\n00:08:16.300 --> 00:08:17.340\nDo you know that?\n\n155\n00:08:17.340 --> 00:08:21.920\nOtherwise you get to compare\nthe the actual BGP database with\n\n156\n00:08:21.920 --> 00:08:25.260\nthe routing table and see that over\nlapse a lot harder to go that way.\n\n157\n00:08:25.260 --> 00:08:27.300\nBut they're testing your ability\nto find out that cause but\n\n158\n00:08:27.300 --> 00:08:29.980\nin this case, the ticket with no action.\n\n159\n00:08:29.980 --> 00:08:32.540\nWe're good to go and\nwe're ready to move to issue five so\n\n160\n00:08:32.540 --> 00:08:34.070\nI hope you guys enjoyed that one.\n\n161\n00:08:34.070 --> 00:08:37.338\nStay tuned,\nwe got the final troubleshooting issue for\n\n162\n00:08:37.338 --> 00:08:38.807\nset 11 coming up next.\n\n163\n00:08:38.807 --> 00:08:44.889\n[MUSIC]\n\n",
          "vimeoId": "151030984"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #5` from set #11. The trouble ticket states that \"There is no IPv4 route to NYWAN1 from NYCORE2, you are unable to ping to 192.168.5.1 but you can ping 192.168.5.2 \"",
          "length": "693",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-11-5-set_11_issue_5-121115-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-11-5-set_11_issue_5-121115-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-11-5-set_11_issue_5-121115-1-sm.jpg",
          "title": "Set 11 Issue 5",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:08.729\n[MUSIC]\n\n2\n00:00:08.729 --> 00:00:12.489\nWelcome back to another Cisco\ntroubleshooting problem here on ITProTV.\n\n3\n00:00:12.489 --> 00:00:14.617\nWe're jumping into Set 11, Issue 5, and\n\n4\n00:00:14.617 --> 00:00:16.809\nthe troubleshooting\nticket reads like this.\n\n5\n00:00:16.809 --> 00:00:24.330\nIt says there are no IPv4\nroutes To NYWAN1 from NYCORE2.\n\n6\n00:00:24.330 --> 00:00:29.530\nYou are unable to ping 192.168.5.1 but\nyou can ping 192.168.5.2.\n\n7\n00:00:29.530 --> 00:00:32.720\nNow, those IP addresses\ndon't mean much to me\n\n8\n00:00:32.720 --> 00:00:35.780\nright now because I haven't\nseen these networks.\n\n9\n00:00:35.780 --> 00:00:38.990\nBut, if we look at our diagram, we can\nkind of see what it's talking about.\n\n10\n00:00:38.990 --> 00:00:44.270\nWhat they're telling us is that\nNYWAN1 Is unable to ping NYCORE2.\n\n11\n00:00:44.270 --> 00:00:46.740\nSo, we're not able to get across to it and\n\n12\n00:00:46.740 --> 00:00:49.710\nthat we don't even have a route\nto be able to get there.\n\n13\n00:00:49.710 --> 00:00:51.310\nNow, now that I think about it,\n\n14\n00:00:51.310 --> 00:00:55.060\nway back in issue one, we actually\nworked on this link right here which I'm\n\n15\n00:00:55.060 --> 00:00:58.190\npretty sure is that 192.168.5\nlink that they're talking about.\n\n16\n00:00:58.190 --> 00:01:02.450\nI wanna verify these IP address first to\nmake sure I know what I'm talking about.\n\n17\n00:01:02.450 --> 00:01:07.121\nBut it sounds like we can ping 192.168.5.2\n\n18\n00:01:07.121 --> 00:01:11.920\nwhich is probably this interface but\nnot ping this guy way over here.\n\n19\n00:01:11.920 --> 00:01:16.030\nSo, our path that goes along\nthe way is kind of trailing off.\n\n20\n00:01:16.030 --> 00:01:18.270\nThis is one of those scenarios where\nwe can kind of use trace route or\n\n21\n00:01:18.270 --> 00:01:20.780\njust kind of ping on the way out\nto find out the way we're going.\n\n22\n00:01:22.290 --> 00:01:25.920\nLet's take a look at these devices, see if\nwe can get a handle on their IP addresses.\n\n23\n00:01:25.920 --> 00:01:31.090\nNY WAN one at this GI zero zero interface\nand then we're going in to NY core one.\n\n24\n00:01:31.090 --> 00:01:33.940\nThis is a layer three port so\n\n25\n00:01:33.940 --> 00:01:38.710\nthat's gonna be one subnet and then we're\ncrossing this side, that's another subnet.\n\n26\n00:01:38.710 --> 00:01:42.610\nSo, I've got two different networks and\nI'm being routed presumably here on NY\n\n27\n00:01:42.610 --> 00:01:44.900\ncore one unless they've done\nsomething crazy with VLANs and\n\n28\n00:01:44.900 --> 00:01:46.150\nI get routed way down here.\n\n29\n00:01:46.150 --> 00:01:49.980\nBut I'm presumably being\nrouted right here in NYCORE1.\n\n30\n00:01:49.980 --> 00:01:51.590\nSo, let's start on NYWAN1 and\n\n31\n00:01:51.590 --> 00:01:55.130\nsee if we can't fill in the blanks\non some of these IP addresses.\n\n32\n00:01:55.130 --> 00:01:56.170\nSo, on NYWAN1,\n\n33\n00:01:56.170 --> 00:02:01.710\nI'm really curious about the IP\naddress assigned to Interface GiO/O.\n\n34\n00:02:01.710 --> 00:02:05.800\nSo, I'm gonna do a show run int gi0/0.\n\n35\n00:02:05.800 --> 00:02:08.906\nAnd it is 192.168.5.1.\n\n36\n00:02:08.906 --> 00:02:11.330\nThat is not what I expected.\n\n37\n00:02:11.330 --> 00:02:14.000\nBecause they were telling\nme there was no route.\n\n38\n00:02:14.000 --> 00:02:16.070\nOh I see, I read the question wrong.\n\n39\n00:02:16.070 --> 00:02:19.840\nNo route to NYWAN1 from NYCORE2.\n\n40\n00:02:19.840 --> 00:02:24.505\nSo, NYCORE2 is trying to get here and\nthis guy is 192.168.\n\n41\n00:02:24.505 --> 00:02:29.070\n.5.1.\nSo, I'm gonna write that\n\n42\n00:02:29.070 --> 00:02:33.733\ndown that WAN1 is 192.168.5.1.\n\n43\n00:02:33.733 --> 00:02:40.230\nAll right, and if it's 5.1,\nthen I expect that NYCORE1,\n\n44\n00:02:40.230 --> 00:02:46.610\nthis guy right here is probably\n.2 On its FA1/0/2 interface,\n\n45\n00:02:46.610 --> 00:02:51.460\nand so if I jump into here,\nwe can do a show run for int FA1/0/2.\n\n46\n00:02:51.460 --> 00:02:54.660\nAnd sure enough it is 192.168.5.2.\n\n47\n00:02:54.660 --> 00:03:00.669\nSo, I'm just gonna write\nthat done that core 1 is .2.\n\n48\n00:03:02.020 --> 00:03:07.860\nAnd then on its port 24,\nthat's its connection to the other switch.\n\n49\n00:03:07.860 --> 00:03:13.920\nAnd I can see it's 192.168.5.5.\n\n50\n00:03:13.920 --> 00:03:18.650\nAnd that's why I was thinking\nit was the 192.168.5 network and\n\n51\n00:03:18.650 --> 00:03:20.240\nit looks like they overlap, doesn't it?\n\n52\n00:03:20.240 --> 00:03:22.720\nBut that's a really specific\nsubnet mask right there.\n\n53\n00:03:22.720 --> 00:03:26.180\nThese are /30 networks,\nthey only got two IPs.\n\n54\n00:03:26.180 --> 00:03:29.980\nSo, 192.168.5.2,\nthat's in the first subnet for that /30.\n\n55\n00:03:29.980 --> 00:03:34.650\nAnd then 192.168.5.5,\nthat's in the second subnet of that /30.\n\n56\n00:03:34.650 --> 00:03:38.320\nSo, they're not overlapping but\nit's got the two IPs.\n\n57\n00:03:38.320 --> 00:03:40.720\nAnd I'm assuming this guy's the router,\n\n58\n00:03:40.720 --> 00:03:45.600\nwhich I guess we could see if\nit's got IP routing enabled.\n\n59\n00:03:45.600 --> 00:03:47.760\nAnd in the config,\nit does have IP routing.\n\n60\n00:03:47.760 --> 00:03:54.550\nAnd if I do a show ip route,\nit should have 192.168.5.1/30.\n\n61\n00:03:54.550 --> 00:03:57.290\nAnd 192.168.5.4/30,\nthat's the two different networks so\n\n62\n00:03:57.290 --> 00:04:00.530\nit's set up to route between them.\n\n63\n00:04:00.530 --> 00:04:02.660\nWe could still have ACLs and\nother things, but\n\n64\n00:04:02.660 --> 00:04:05.110\nI'm still in the exploration\nphase right now.\n\n65\n00:04:05.110 --> 00:04:06.550\nWe'll come back to that.\n\n66\n00:04:06.550 --> 00:04:10.640\nSo, the other node is NYCORE2\nway down here at the end.\n\n67\n00:04:10.640 --> 00:04:18.186\nAnd if this one was 192.168.5.5 I kind\nof expect this one to be 192.168.5.6.\n\n68\n00:04:18.186 --> 00:04:23.080\nSo, I'll do a show run for\ninterface FA1/0/24.\n\n69\n00:04:23.080 --> 00:04:24.710\nAnd it is dot six.\n\n70\n00:04:24.710 --> 00:04:29.740\nSo.\nCORE2 is 192.168.5.6.\n\n71\n00:04:34.900 --> 00:04:36.240\nAll right.\n\n72\n00:04:36.240 --> 00:04:41.490\nNow, ny core two is unable to\nping 192.168.5.1 which is one.\n\n73\n00:04:41.490 --> 00:04:42.360\nnywan1.\n\n74\n00:04:42.360 --> 00:04:45.210\nSo going back to my diagram here.\n\n75\n00:04:45.210 --> 00:04:49.340\nNY core two cannot send a ping all\nthe way across to NYWAN1 right here.\n\n76\n00:04:49.340 --> 00:04:52.480\nI'm having a hard time saying that.\n\n77\n00:04:52.480 --> 00:04:55.450\nSo, what I'm gonna do\nis issue some testings.\n\n78\n00:04:55.450 --> 00:04:57.030\nI'm gonna ping from here.\n\n79\n00:04:57.030 --> 00:05:01.340\nAnd I'm gonna ping the inside interface\nof NYCORE1 then I'll ping the outside and\n\n80\n00:05:01.340 --> 00:05:02.320\nthen I'll ping NYWAN1.\n\n81\n00:05:02.320 --> 00:05:03.800\nAnd just see where we stop.\n\n82\n00:05:03.800 --> 00:05:05.380\nOn a bigger network,\nI would use trace route.\n\n83\n00:05:05.380 --> 00:05:07.950\nOn a smaller network like this,\nit'd be faster to use pings.\n\n84\n00:05:07.950 --> 00:05:12.960\nSo, I'll go ahead and\njust do that right here on NYCORE2.\n\n85\n00:05:12.960 --> 00:05:16.200\nAnd we'll start with a ping to 192.168.5.5\n\n86\n00:05:16.200 --> 00:05:20.330\nThat's the interface of\nNYCORE1 that's closest to me.\n\n87\n00:05:20.330 --> 00:05:21.940\nI'm directly plugged into that network.\n\n88\n00:05:21.940 --> 00:05:23.400\nSo, there's no routing going on.\n\n89\n00:05:23.400 --> 00:05:27.770\nI should just be able to communicate\nright to that system, and that's that.\n\n90\n00:05:27.770 --> 00:05:29.490\nAnd I can.\n\n91\n00:05:29.490 --> 00:05:37.260\nIf I wanna ping to 192.168.5.2 though,\nthen I'm going in this interface.\n\n92\n00:05:37.260 --> 00:05:41.440\nAnd being routed to this interface and\nthen my reply should come back.\n\n93\n00:05:41.440 --> 00:05:44.400\nSo, now I'm testing whether\nI'm getting routed on NYCORE1.\n\n94\n00:05:44.400 --> 00:05:48.660\nAnd so when I run this ping\nI'm getting routed and\n\n95\n00:05:48.660 --> 00:05:51.130\nI got five successes, so\nwe're in good shape there.\n\n96\n00:05:51.130 --> 00:05:56.040\nAll right, so\nthat means I'm getting through NYCORE1.\n\n97\n00:05:56.040 --> 00:06:02.630\nNow, I can ping the rest of the way over\nto NYWAN1 and that's where we drop off.\n\n98\n00:06:02.630 --> 00:06:06.090\nRight or it could ARP lets give it\na second and nope we dropped off.\n\n99\n00:06:06.090 --> 00:06:08.753\nAll right, so we dropped off and\n\n100\n00:06:08.753 --> 00:06:14.820\nthat means the problem on our network\nis going to be either here or here.\n\n101\n00:06:14.820 --> 00:06:16.080\nIt's gonna be on of those two devices.\n\n102\n00:06:16.080 --> 00:06:16.910\nRight.\n\n103\n00:06:16.910 --> 00:06:19.620\nTraceroute pings they always\nhelp us narrow it down.\n\n104\n00:06:19.620 --> 00:06:21.310\nTo two devices.\n\n105\n00:06:21.310 --> 00:06:24.140\nThe problem here is more\nthan likely not routing.\n\n106\n00:06:24.140 --> 00:06:26.220\nBut I could have access control lists,\n\n107\n00:06:26.220 --> 00:06:28.140\nACLs blocking traffic on the way in or\nout.\n\n108\n00:06:28.140 --> 00:06:30.910\nI could have other things that\nare making this traffic not make it\n\n109\n00:06:30.910 --> 00:06:31.710\nto the destination.\n\n110\n00:06:32.790 --> 00:06:34.790\nOr I could have a problem\nup here in NYWAN1.\n\n111\n00:06:34.790 --> 00:06:39.000\nSame thing, bad routing, could be an ACL,\ncould be all sorts of stuff.\n\n112\n00:06:39.000 --> 00:06:40.910\nSo, where do I wanna troubleshoot?\n\n113\n00:06:40.910 --> 00:06:43.790\nWell let's jump over to NYCORE1 and\nwe'll start there.\n\n114\n00:06:43.790 --> 00:06:50.480\nSo, on NYCORE1 I just want to make\nsure that it can ping NYWAN1, right.\n\n115\n00:06:50.480 --> 00:06:59.540\nI know that if I do a show I P interface\nbrief that NYCORE1 is 192.168.5.2.\n\n116\n00:06:59.540 --> 00:07:03.480\nAnd I know that NYWAN1 is 192.168.5.1.\n\n117\n00:07:03.480 --> 00:07:05.268\nSo, can I ping that?\n\n118\n00:07:05.268 --> 00:07:08.935\nI'll ping 192.168.5.1.\n\n119\n00:07:08.935 --> 00:07:09.770\nAnd I can.\n\n120\n00:07:09.770 --> 00:07:12.980\nSo, that link right there is up.\n\n121\n00:07:12.980 --> 00:07:16.470\nSo, assuming that I was able to\nget routed to this interface, and\n\n122\n00:07:16.470 --> 00:07:19.420\nI'm able to ping to the destination\nWhat else could it be?\n\n123\n00:07:19.420 --> 00:07:22.320\nWell, it could be bad NAT,\nit could be ACL's,\n\n124\n00:07:22.320 --> 00:07:24.100\nit could be all sorts of\nquirky things like that.\n\n125\n00:07:24.100 --> 00:07:28.780\nSo, let's look at NYCORE1's configuration\nand just skim through it and\n\n126\n00:07:28.780 --> 00:07:31.680\nsee if anything jumps out\nat us here as bizarre.\n\n127\n00:07:31.680 --> 00:07:32.520\nOkay?\n\n128\n00:07:32.520 --> 00:07:35.540\nAnd so, looking at the list,\nas I kinda go down it,\n\n129\n00:07:35.540 --> 00:07:39.730\nthis is all pretty standard configuration\nhere, nothing too crazy jumping out at me.\n\n130\n00:07:39.730 --> 00:07:41.650\nExpanding tree's nice and normal.\n\n131\n00:07:41.650 --> 00:07:42.730\nMy interface, right?\n\n132\n00:07:42.730 --> 00:07:45.480\nWe already knew that was layer three\nport and it's got the right address.\n\n133\n00:07:45.480 --> 00:07:49.180\nI'm able to ping with no overlap and\n\n134\n00:07:49.180 --> 00:07:52.970\nthen as I keep going,\nhere's my other interface, no ACLs.\n\n135\n00:07:52.970 --> 00:07:55.270\nThat's what I'm really looking for\nhere, access control lists.\n\n136\n00:07:55.270 --> 00:07:56.760\nNo ACLs here.\n\n137\n00:07:56.760 --> 00:07:59.680\nThe interface isn't shut down or\nanything so that looks healthy.\n\n138\n00:07:59.680 --> 00:08:01.380\nAnd then I get down to\nour routing protocol.\n\n139\n00:08:01.380 --> 00:08:07.220\nWe've got eigrp 10 configured, and\nit's configure for 192.168.5.0.\n\n140\n00:08:07.220 --> 00:08:12.880\nAnd it's got 0.0.0.7,\nthat covers both of the networks.\n\n141\n00:08:12.880 --> 00:08:16.727\nThat covers 192.168.5.0 and\nit covers 192.168.5.4.\n\n142\n00:08:16.727 --> 00:08:19.070\nThose are the two networks that we had.\n\n143\n00:08:19.070 --> 00:08:20.730\nAnd they're both covered there, right?\n\n144\n00:08:20.730 --> 00:08:23.090\nSo, it looks like we're running\na dynamic routing protocol and\n\n145\n00:08:23.090 --> 00:08:25.940\nthat just made me think of\na potential problem here, right?\n\n146\n00:08:25.940 --> 00:08:27.610\nThis could actually be a routing issue.\n\n147\n00:08:27.610 --> 00:08:31.030\nMaybe my traffic is making it all\nthe way to the other side, but\n\n148\n00:08:31.030 --> 00:08:33.340\nthe other side doesn't have\na route to get back to me.\n\n149\n00:08:33.340 --> 00:08:34.240\nThat's possible.\n\n150\n00:08:34.240 --> 00:08:37.560\nIt was way back either in Issue one or\nIssue two of set 11 where\n\n151\n00:08:37.560 --> 00:08:42.800\nwe fixed eigrp across this link so I know\nit's running between these two guys.\n\n152\n00:08:42.800 --> 00:08:44.860\nBut is it running up to this guy?\n\n153\n00:08:45.860 --> 00:08:46.490\nLet's find out.\n\n154\n00:08:46.490 --> 00:08:50.840\nOn NYCORE1 I can do\na show IP EIRGP neighbor.\n\n155\n00:08:50.840 --> 00:08:55.530\nAnd I've only got one neighbor.\n\n156\n00:08:55.530 --> 00:08:58.205\nAnd that one neighbor is 192.168.5.6.\n\n157\n00:08:58.205 --> 00:09:01.510\non Fa1/0/24.\nThat's that link that we fixed, right.\n\n158\n00:09:01.510 --> 00:09:05.730\nThat's this link Right here, but I don't\nhave a neighbor relationship here and\n\n159\n00:09:05.730 --> 00:09:08.340\nI will bet you if we jump up to NYWAN1\n\n160\n00:09:08.340 --> 00:09:11.520\nit probably doesn't have a route\nto get back to our network.\n\n161\n00:09:11.520 --> 00:09:14.620\nOur traffic is most likely making\nit to NYWAN1 just doesn't have\n\n162\n00:09:14.620 --> 00:09:15.870\na way to get back.\n\n163\n00:09:15.870 --> 00:09:17.810\nSo lets go to NYWAN1 and\nsee what we've got.\n\n164\n00:09:19.980 --> 00:09:22.150\nI'm gonna do a show IP route.\n\n165\n00:09:22.150 --> 00:09:28.700\nAnd on NYWAN1, I've only got connected and\nlocal interfaces and that's it.\n\n166\n00:09:28.700 --> 00:09:33.540\nI don't have 192.168.5.4,\nit's not in the routing table.\n\n167\n00:09:33.540 --> 00:09:37.810\nSo, I'm not anticipating an EIGRP and\nas a result, I'm not learning that route.\n\n168\n00:09:37.810 --> 00:09:39.440\nI don't have a path back.\n\n169\n00:09:39.440 --> 00:09:40.560\nSo, I need to fix that.\n\n170\n00:09:40.560 --> 00:09:41.680\nTwo ways to fix it.\n\n171\n00:09:41.680 --> 00:09:43.290\nI could do a static route.\n\n172\n00:09:43.290 --> 00:09:44.478\nWell I guess there's three ways to fix it.\n\n173\n00:09:44.478 --> 00:09:48.500\n[LAUGH] I could do a static route,\nI could participate in EIGRP, or\n\n174\n00:09:48.500 --> 00:09:51.740\nI can configure NAT to just\nhide the address all together.\n\n175\n00:09:51.740 --> 00:09:53.540\nSo, I could go a few different ways.\n\n176\n00:09:53.540 --> 00:09:57.320\nParticipating in EIGRP is gonna be\nthe path of least resistance on this one.\n\n177\n00:09:57.320 --> 00:10:01.320\nNow, looking at my diagram,\nwe're supposed to be in EIGRP 10.\n\n178\n00:10:01.320 --> 00:10:04.730\nSo, what I'm gonna do is\nget us configured for that.\n\n179\n00:10:04.730 --> 00:10:08.790\nI'm gonna say router eigrp 10, and\nthen network 192.168.5.0 0.0.0.3.\n\n180\n00:10:08.790 --> 00:10:14.610\nThat's this network that I'm\ndirectly plugged into, right?\n\n181\n00:10:14.610 --> 00:10:17.140\nI'm not worried about\n\n182\n00:10:17.140 --> 00:10:20.820\ncovering the other networks because\nI do not have an interface on it.\n\n183\n00:10:20.820 --> 00:10:25.050\nBut as soon as I do that,\nI'll start participating in EIGRP, and\n\n184\n00:10:25.050 --> 00:10:27.030\nnow I'm talking to that neighbor.\n\n185\n00:10:27.030 --> 00:10:32.900\nAnd if I do a show IP route, I expect to\nsee the 192.168.5.4 network right there,\n\n186\n00:10:32.900 --> 00:10:35.080\nand I'm learning via EIGRP.\n\n187\n00:10:36.110 --> 00:10:38.120\nNow, I've got a return\nroute to that network and\n\n188\n00:10:38.120 --> 00:10:40.340\nI will bet that solves our problem.\n\n189\n00:10:40.340 --> 00:10:41.996\nLet's go over to NY core 2.\n\n190\n00:10:43.490 --> 00:10:48.410\nAnd so I'm on NY core two, way down\nhere and this guy was unable to ping\n\n191\n00:10:48.410 --> 00:10:54.100\nup to NY WAN one so\nnow that should be fixed,\n\n192\n00:10:54.100 --> 00:10:57.490\nand so I'm gonna redo that ping and\nsure enough, that was it.\n\n193\n00:10:57.490 --> 00:11:00.680\nSo, in this case we just had\na no that didn't return path.\n\n194\n00:11:00.680 --> 00:11:02.940\nYou've always gotta remember\nthat it's easy to lose sight.\n\n195\n00:11:02.940 --> 00:11:06.550\nWe think about, when I try and\nping out but there's a return path,\n\n196\n00:11:06.550 --> 00:11:08.270\nthey have to know how to get back to me.\n\n197\n00:11:08.270 --> 00:11:10.860\nAnd if it's internet equipment,\nyou don't have any control over that.\n\n198\n00:11:10.860 --> 00:11:12.610\nBut with our own equipment, we do.\n\n199\n00:11:12.610 --> 00:11:15.510\nHere we just need an IGP to make sure\nthat everybody knew the routes to\n\n200\n00:11:15.510 --> 00:11:16.330\nreturn on the network.\n\n201\n00:11:16.330 --> 00:11:18.650\nOnce we got that squared away,\nproblem is solved.\n\n202\n00:11:18.650 --> 00:11:19.810\nThis one's done.\n\n203\n00:11:19.810 --> 00:11:21.270\nAll right, that wraps up issue five.\n\n204\n00:11:21.270 --> 00:11:23.800\nWe do have one more issue to tackle,\nissue six.\n\n205\n00:11:23.800 --> 00:11:27.058\nStay tuned, because it's coming up next.\n\n206\n00:11:27.058 --> 00:11:32.904\n[SOUND]\n\n",
          "vimeoId": "151030983"
        },
        {
          "description": "In this video, Don solves troubleshooting issue #6` from set #11. The trouble ticket states that \"NYWAN1 and NYEDGE2 are not forming an EIGRP relationship. \"",
          "length": "540",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-11-6-set_11_issue_6-121115.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-11-6-set_11_issue_6-121115-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/cisco-ccnptshoot300135/cisco-ccnptshoot300135-11-6-set_11_issue_6-121115-sm.jpg",
          "title": "Set 11 Issue 6",
          "transcript": "WEBVTT\n\n1\n00:00:00.334 --> 00:00:03.205\n[SOUND]\n\n2\n00:00:03.205 --> 00:00:08.948\nAll right.\n\n3\n00:00:08.948 --> 00:00:12.510\nWelcome back for another Cisco trouble\nshooting segment here, on ITProTV.\n\n4\n00:00:12.510 --> 00:00:17.180\nWe've got the final issue for set 11,\nso we're jumping into Set 11, Issue 6.\n\n5\n00:00:17.180 --> 00:00:18.780\nAnd the troubleshooting\nticket reads like this.\n\n6\n00:00:18.780 --> 00:00:25.380\nIt says, NYWAN1 and NYEDGE2 are not\nforming an EIGRP relationship.\n\n7\n00:00:25.380 --> 00:00:27.270\nWell, sounds pretty straightforward.\n\n8\n00:00:27.270 --> 00:00:30.160\nLet's look at our diagram here and\nsee the devices we're talking about.\n\n9\n00:00:30.160 --> 00:00:33.722\nIt said NYWAN1 and NYEDGE2.\n\n10\n00:00:33.722 --> 00:00:35.490\nThat's these two guys right here.\n\n11\n00:00:35.490 --> 00:00:36.840\nIt's a point-to-point link.\n\n12\n00:00:36.840 --> 00:00:38.070\nThey're directly connected.\n\n13\n00:00:38.070 --> 00:00:40.390\nThis should be an easy question for us.\n\n14\n00:00:40.390 --> 00:00:44.340\nSo for some reason they're not\nbuilding up an EIGRP relationship.\n\n15\n00:00:44.340 --> 00:00:47.660\nLooking at the diagram they're supposed\nto be in EIGRP autonomous system ten\n\n16\n00:00:47.660 --> 00:00:49.140\nand it's IPV4.\n\n17\n00:00:49.140 --> 00:00:52.350\nSo we just need to jump in and\nfind out what the heck is going on there.\n\n18\n00:00:52.350 --> 00:00:55.090\nSo let's start with a point to point leak.\n\n19\n00:00:55.090 --> 00:00:57.360\nIt doesn't really matter which one\nwe start in, just pick one and\n\n20\n00:00:57.360 --> 00:00:59.860\njump into it you've got a 50 50\nshot at catching the source.\n\n21\n00:00:59.860 --> 00:01:04.120\nSo I'll jump to NYWAN1 just because\nit's lower in the diagram and\n\n22\n00:01:04.120 --> 00:01:06.680\nsee what we can find so in NYWAN1.\n\n23\n00:01:06.680 --> 00:01:10.042\nI'm just gonna get logged\ninto my console here and\n\n24\n00:01:10.042 --> 00:01:14.445\nlet's look for some low hanging\nfruit here maybe the interface is\n\n25\n00:01:14.445 --> 00:01:19.327\njust down I'm gonna do a show IP\nInterface Brief and what I'm looking for\n\n26\n00:01:19.327 --> 00:01:25.045\nis that Ser0/1/1 interface on this guy and\nI just want to see what its status is.\n\n27\n00:01:25.045 --> 00:01:28.133\nAnd so it is Serial0/1/1.\n\n28\n00:01:28.133 --> 00:01:33.780\nIt's 192.168.1.3 and\nthe interface status is currently up.\n\n29\n00:01:33.780 --> 00:01:37.490\nSo it's up, it's healthy, it's happy or\nat least it thinks that it is.\n\n30\n00:01:37.490 --> 00:01:40.190\nAnd that's unfortunate, I was hoping\nthis would be administratively down\n\n31\n00:01:40.190 --> 00:01:43.440\nproblem solved but it's not so\nthat's our address and\n\n32\n00:01:43.440 --> 00:01:45.770\nI'm gonna write that down because\nI need to know the address so\n\n33\n00:01:45.770 --> 00:01:48.160\nI can ping across the line see\nif it's working and all that.\n\n34\n00:01:48.160 --> 00:01:53.030\nSo this guy is 192.168.1.3 then\nI'm just gonna review some\n\n35\n00:01:55.290 --> 00:01:57.010\nof the configuration.\n\n36\n00:01:57.010 --> 00:01:58.400\nSo let me do a show IP.\n\n37\n00:01:59.590 --> 00:02:00.770\nEIGRP neighbor.\n\n38\n00:02:01.880 --> 00:02:04.706\nAnd I do have a neighbor, 192.168.5.2.\n\n39\n00:02:04.706 --> 00:02:07.080\nBut you'll remember that from\nthe last issue, issue 5.\n\n40\n00:02:07.080 --> 00:02:09.850\nThat is NYCORE1.\n\n41\n00:02:09.850 --> 00:02:13.210\nSo NYWAN1 has a neighbor\nrelationship with NYCORE1.\n\n42\n00:02:13.210 --> 00:02:16.710\nIt doesn't have a relationship\nwith NYEDGE2 up here.\n\n43\n00:02:16.710 --> 00:02:19.070\nSo I should have two\nneighbor relationships.\n\n44\n00:02:19.070 --> 00:02:20.570\nAnd I don't.\n\n45\n00:02:20.570 --> 00:02:21.550\nOkay.\n\n46\n00:02:21.550 --> 00:02:23.590\nAnd if I do a show IP.\n\n47\n00:02:23.590 --> 00:02:25.560\nWell, I can show IP interface brief.\n\n48\n00:02:25.560 --> 00:02:27.180\nUp here I can see I have three networks.\n\n49\n00:02:27.180 --> 00:02:32.390\nOn my GI00, I've got that 192.168.5\nnetwork, and that one's working in EIGRP.\n\n50\n00:02:32.390 --> 00:02:35.437\nI've 192.168.1.3.\n\n51\n00:02:35.437 --> 00:02:38.330\nI don't actually know if\nthat's an EIGRP or not.\n\n52\n00:02:38.330 --> 00:02:41.350\nAnd then, I've got a loopback\nwhich is apparently just there.\n\n53\n00:02:41.350 --> 00:02:42.850\nSo [LAUGH] I've got one of those too.\n\n54\n00:02:42.850 --> 00:02:47.890\nSo lets see what EIGRP is configured\nto handle and go from there.\n\n55\n00:02:47.890 --> 00:02:51.030\nI actually show IP protocols is as\ngood a place to start as any for that.\n\n56\n00:02:52.030 --> 00:02:54.520\nSo show IP protocols shows\nthat I am running EIGRP for\n\n57\n00:02:54.520 --> 00:02:56.370\nour autonomous system ten.\n\n58\n00:02:56.370 --> 00:03:00.020\nI don't have any filters on my interfaces,\nso that's good.\n\n59\n00:03:00.020 --> 00:03:03.250\nMy K values look all nice and\nnormal, nothing crazy there.\n\n60\n00:03:03.250 --> 00:03:06.010\nMy router ID is being\ndetermined by that loopback, so\n\n61\n00:03:06.010 --> 00:03:10.640\nthat's what it's being used for\napparently.\n\n62\n00:03:10.640 --> 00:03:13.684\nAnd then as I look at my networks,\nhere's 192.168.1.2/31 and\n\n63\n00:03:13.684 --> 00:03:17.540\n/31 is a little bit weird but\nthey're just being really specific.\n\n64\n00:03:17.540 --> 00:03:23.330\nThat's going to include 192.168.1.2 and\n192.168.1.3.\n\n65\n00:03:23.330 --> 00:03:25.760\nMy interface is .3, so\nthat'll be included.\n\n66\n00:03:25.760 --> 00:03:27.720\nSo I'm okay with that.\n\n67\n00:03:27.720 --> 00:03:29.220\nAnd then there's my one neighbor.\n\n68\n00:03:29.220 --> 00:03:32.150\nSo, it looks like I am set to route for\nthose two networks.\n\n69\n00:03:32.150 --> 00:03:35.040\nLet's look at that interface and see if\nthere's something bizarre going on there.\n\n70\n00:03:36.610 --> 00:03:38.050\nThat was serial 011.\n\n71\n00:03:38.050 --> 00:03:39.320\nYeah.\n\n72\n00:03:39.320 --> 00:03:41.904\nSo it's got an IPV6 address, but\nI can just kind of ignore that.\n\n73\n00:03:41.904 --> 00:03:44.383\nIt does have that 192.168.1.3.\n\n74\n00:03:44.383 --> 00:03:48.223\nWith a 255255255254 address.\n\n75\n00:03:48.223 --> 00:03:50.173\nThat's where we're getting that slash 31.\n\n76\n00:03:50.173 --> 00:03:51.372\nBut, that's all right.\n\n77\n00:03:51.372 --> 00:03:53.078\nCISCO router can do that just fine.\n\n78\n00:03:53.078 --> 00:03:55.580\nIt's a point to point link so that works.\n\n79\n00:03:55.580 --> 00:03:58.830\nAnd we're good to go there.\n\n80\n00:03:58.830 --> 00:04:05.300\nLet me do a show run for the EIGRP\nsection, and I've got router EIGRP 10.\n\n81\n00:04:05.300 --> 00:04:09.705\nThere's my network statements that we\nkind of saw in show IP Protocols, and\n\n82\n00:04:09.705 --> 00:04:11.025\nthey look good too.\n\n83\n00:04:11.025 --> 00:04:13.785\nSo I'm not really seeing anything\njumping out at me here that would stop\n\n84\n00:04:13.785 --> 00:04:15.695\nthis neighbor relationship\nfrom building up.\n\n85\n00:04:15.695 --> 00:04:17.885\nI didn't see ACL on the interface.\n\n86\n00:04:17.885 --> 00:04:20.345\nI don't see authentication\nconfigured in EIGRP.\n\n87\n00:04:20.345 --> 00:04:24.915\nI don't see the usual suspects for\ncausing the IGP not to peer up.\n\n88\n00:04:24.915 --> 00:04:28.790\nSo what's probably going on here is that\nI just chose the wrong end of this link.\n\n89\n00:04:28.790 --> 00:04:32.250\nI said when you pick, you gotta 50\n50 shot at catching the problem,\n\n90\n00:04:32.250 --> 00:04:34.530\nI bet the problem's up here on NYEDGE2.\n\n91\n00:04:34.530 --> 00:04:36.920\nSo let's jump up to NYEDGE2 and\nsee what we find over there.\n\n92\n00:04:38.982 --> 00:04:42.410\nAll right on NYEDGE2 I'm basically\njust gonna repeat exactly what we did\n\n93\n00:04:42.410 --> 00:04:43.490\non the other one.\n\n94\n00:04:43.490 --> 00:04:45.770\nI'm gonna show IP interface brief.\n\n95\n00:04:45.770 --> 00:04:48.300\nMaybe I'll luck out and\ninterface will just be down.\n\n96\n00:04:48.300 --> 00:04:52.850\nAnd it's this 0001 if\nwe look at the diagram.\n\n97\n00:04:52.850 --> 00:04:57.550\n0001 that I'm looking at and\nI see it's got an IP address.\n\n98\n00:04:57.550 --> 00:04:58.900\nIt's up.\n\n99\n00:04:58.900 --> 00:04:59.760\nSo it's up.\n\n100\n00:04:59.760 --> 00:05:00.700\nIt thinks it's healthy.\n\n101\n00:05:01.840 --> 00:05:03.437\nAnd you know what?\n\n102\n00:05:03.437 --> 00:05:06.566\nHang on a second so\nI wasn't paying enough attention here.\n\n103\n00:05:06.566 --> 00:05:12.110\nThis one is 192.168.1.3 wasn't\nthe other side 192.168.1.3.\n\n104\n00:05:12.110 --> 00:05:13.880\nDo we have a duplicate IP?\n\n105\n00:05:13.880 --> 00:05:16.530\nThis one might actually turn out not so\nhard.\n\n106\n00:05:16.530 --> 00:05:20.540\nSure enough, so here's NYWAN1.\n\n107\n00:05:20.540 --> 00:05:26.040\nAnd look at that IP address,\n192.168.1.1.3 with that /31 subnet mask.\n\n108\n00:05:26.040 --> 00:05:27.570\nWell, if I look at NYEDGE2,\n\n109\n00:05:27.570 --> 00:05:31.560\nit's 192.168.1.3,\nthey have the same IP address.\n\n110\n00:05:31.560 --> 00:05:34.960\nSo if I've got a duplicate\nIP address on my systems,\n\n111\n00:05:34.960 --> 00:05:37.800\nthey're gonna have a bit of a hard\ntime communicating, aren't they.\n\n112\n00:05:37.800 --> 00:05:39.210\nThis can be a tricky one.\n\n113\n00:05:39.210 --> 00:05:43.480\nI'm glad I noticed that because if you do\nsomething like ping across the line or\n\n114\n00:05:43.480 --> 00:05:47.330\nwhatever, the ping fails, you're not gonna\nnotice cuz the IP isn't the same and\n\n115\n00:05:47.330 --> 00:05:49.430\nthere's just no way to\ncommunicate on that line.\n\n116\n00:05:49.430 --> 00:05:52.620\nSo it does cause things like EIGRP and\n\n117\n00:05:52.620 --> 00:05:55.020\nreally anything else not\nto function over this link.\n\n118\n00:05:55.020 --> 00:05:58.160\nBut as long as I've got that duplicate\nIP I'm gonna have a problem, right?\n\n119\n00:05:58.160 --> 00:05:59.039\nSo I need to fix that.\n\n120\n00:05:59.039 --> 00:06:03.391\nNow we are doing a /31, so\nif I do a show run int s0/0/1,\n\n121\n00:06:03.391 --> 00:06:09.270\nI'll see that it's at /31, there's only\none other IP in there, which is .2.\n\n122\n00:06:09.270 --> 00:06:13.385\nSo I need to change one\nend of the link to .2.\n\n123\n00:06:13.385 --> 00:06:14.580\nWhich end?\n\n124\n00:06:14.580 --> 00:06:16.010\nI don't know, the diagram's not labelled.\n\n125\n00:06:17.320 --> 00:06:20.870\nIf the diagram was labeled for IPs,\nI'd know which end to fix but it's not.\n\n126\n00:06:20.870 --> 00:06:22.440\nSo really doesn't matter which end I fix.\n\n127\n00:06:22.440 --> 00:06:25.270\nI can change one of them to .2\nthe other one can stay as .3.\n\n128\n00:06:25.270 --> 00:06:29.540\nThen we still have the EIGRP\nconfiguration up here on NYEDGE2.\n\n129\n00:06:29.540 --> 00:06:34.800\nSo NYEDGE2 could have a bad EIGRP\nconfiguration, we wouldn't even know\n\n130\n00:06:34.800 --> 00:06:38.670\nbecause the IP is gonna stop it far before\nwe even get to checking that stuff, but\n\n131\n00:06:38.670 --> 00:06:43.060\nyou might wanna do just a quick look\nat the EIGRP section in config and\n\n132\n00:06:43.060 --> 00:06:44.450\nthis one's a little more complex.\n\n133\n00:06:44.450 --> 00:06:47.140\nHe's got IPV6 and IPV4 but\n\n134\n00:06:47.140 --> 00:06:52.380\nit does have that network statement\nin there for 192.168.1 and it's\n\n135\n00:06:52.380 --> 00:06:57.010\ndoing a 0.0.0.7 which is actually going to\nencompass several of the IP ranges in it.\n\n136\n00:06:57.010 --> 00:06:59.850\nSo that's big enough to catch\nthe interface, so we should be ok.\n\n137\n00:06:59.850 --> 00:07:02.660\nAll right, so let's go fix that IP.\n\n138\n00:07:02.660 --> 00:07:10.395\nI'm going to get into interface s0001 and\nright now it is.\n\n139\n00:07:10.395 --> 00:07:16.026\n192.168.1.3 with that crazy subnet mask.\n\n140\n00:07:16.026 --> 00:07:17.590\nI'm just gonna move it down to .2.\n\n141\n00:07:17.590 --> 00:07:22.707\nSo I'll say ip address 192.168.1.2\n\n142\n00:07:22.707 --> 00:07:29.160\nwith a 25525525.254 subnet mask so that.\n\n143\n00:07:29.160 --> 00:07:32.350\nIt's still in that same range,\nbut it's not a duplicate.\n\n144\n00:07:32.350 --> 00:07:35.830\nAnd now that it doesn't have the same IP,\nif EIGRP set up right,\n\n145\n00:07:35.830 --> 00:07:39.130\nwe should see a neighbor relationship\ncome up and sure enough there it goes.\n\n146\n00:07:39.130 --> 00:07:40.980\nAnd we should start\nexchanging some routes.\n\n147\n00:07:40.980 --> 00:07:45.520\nLet's do show IP route and see if\nwe've learned anything from EIRGP and\n\n148\n00:07:45.520 --> 00:07:47.810\nsure enough we're learning routes.\n\n149\n00:07:47.810 --> 00:07:48.950\nSo this one.\n\n150\n00:07:48.950 --> 00:07:52.040\nWasn't a physical connection error,\nit wasn't even an EIGRP error,\n\n151\n00:07:52.040 --> 00:07:55.220\nit's that we had duplicate IP\naddresses on those interfaces.\n\n152\n00:07:55.220 --> 00:07:59.220\nAnd sadly on point to point leaks it's\nactually pretty easy to make that mistake.\n\n153\n00:07:59.220 --> 00:08:02.850\nWhen you're doing a /31 and there's\nonly two IP's it's easy to get mixed up\n\n154\n00:08:02.850 --> 00:08:04.870\nyou end up with the same IP on both sides.\n\n155\n00:08:04.870 --> 00:08:09.720\nAll right, now if these systems were\nrunning CDP CDP would've warned us.\n\n156\n00:08:09.720 --> 00:08:11.930\nAnd I'll bet they've turned off\nCDP in these routers just so\n\n157\n00:08:11.930 --> 00:08:13.430\nit wouldn't be too easy for us.\n\n158\n00:08:13.430 --> 00:08:16.790\nBut CDP will tell you there's\na duplicate IP, it'll warn you.\n\n159\n00:08:16.790 --> 00:08:20.100\nIn our case we found it just on our\nown by looking at the configurations.\n\n160\n00:08:20.100 --> 00:08:24.100\nBut the easy problems are sometimes\nthe ones that are easy to overlook.\n\n161\n00:08:24.100 --> 00:08:29.180\nHere we tracked it down and solved it, now\nEIGRP is working fine across that link.\n\n162\n00:08:29.180 --> 00:08:31.090\nAll right, well,\nthat wraps up issue number six.\n\n163\n00:08:31.090 --> 00:08:33.380\nHope you guys enjoyed it, and\nthat's the end of set 11.\n\n164\n00:08:33.380 --> 00:08:37.580\nIf you've moved through all 11 sets and\ncompleted all the different\n\n165\n00:08:37.580 --> 00:08:41.430\ntroubleshooting scenarios,\nthen congratulations, you made it through.\n\n166\n00:08:41.430 --> 00:08:42.550\nIf you're jumping around,\n\n167\n00:08:42.550 --> 00:08:45.140\nthough, I hope you enjoy all the rest\nof the troubleshooting tickets.\n\n168\n00:08:45.140 --> 00:08:46.240\nThere's quite a few of them,\n\n169\n00:08:46.240 --> 00:08:48.890\nall sorts of different problems\nspread throughout there.\n\n170\n00:08:48.890 --> 00:08:50.410\nBut for now, that's it for this one.\n\n171\n00:08:50.410 --> 00:08:52.818\nSo thanks for watching and\nI'll see you next time.\n\n172\n00:08:52.818 --> 00:08:58.031\n[MUSIC].\n\n",
          "vimeoId": "151030980"
        }
      ],
      "title": "Set Eleven"
    }
  ],
  "url": "ccnp-routing-switching2",
  "vLab": false
}
