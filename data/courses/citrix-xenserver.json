{
  "description": "Citrix XenServer is the free virtualization software from Citrix. It is a commercially backed implementation of the open source Xen virtualization platform. The low cost of entry makes XenServer an attractive option for small and medium businesses looking for advanced hypervisor functions (clustering, live migration, centralized management) without the large price tag associated with competing products. ",
  "descriptionMD": "",
  "length": "17407",
  "name": "Citrix XenServer 6.2",
  "practiceExam": false,
  "subtitle": "Open-Source Virtualization",
  "tagUrl": "help-desk",
  "topics": [
    {
      "episodes": [
        {
          "description": "",
          "length": "4995",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/citrixxenserver/001-Intro-to-Citrix-XenServer.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/citrixxenserver/001-Intro-to-Citrix-XenServer-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/citrixxenserver/001-Intro-to-Citrix-XenServer-sm.jpg",
          "title": "Intro to Citrix XenServer",
          "transcript": "1\n00:00:00,425 --> 00:00:10,425\n[MUSIC]\n\n2\n00:00:22,401 --> 00:00:23,405\n[SOUND]\n\n3\n00:00:23,405 --> 00:00:33,360\n[MUSIC]\n\n4\n00:00:33,360 --> 00:00:34,139\nAll right.\n\n5\n00:00:34,139 --> 00:00:38,180\nWelcome back to another\nfantastic episode of IT Pro TV.\n\n6\n00:00:38,180 --> 00:00:41,160\nI am Nathan Copeland\nhere with Ronnie Wong.\n\n7\n00:00:41,160 --> 00:00:42,340\n>> How's it going tonight Nate?\n\n8\n00:00:42,340 --> 00:00:43,150\n>> Yeah, pretty good Ronnie.\n\n9\n00:00:43,150 --> 00:00:44,020\n>> Yeah?\n>> Yeah pretty good.\n\n10\n00:00:44,020 --> 00:00:45,720\nIt's a nice day outside.\n\n11\n00:00:45,720 --> 00:00:46,470\n>> It is gorgeous.\n\n12\n00:00:46,470 --> 00:00:50,060\n>> The birds were flying and\nchirping and the sun is shining.\n\n13\n00:00:50,060 --> 00:00:54,430\nAnd you can see those little solar flares,\nwalking by in the glasses, you know.\n\n14\n00:00:54,430 --> 00:00:56,220\n>> Nice, kind of a magical moment.\n\n15\n00:00:56,220 --> 00:01:00,190\n>> Yeah, it only feels like 106 degrees\noutside [LAUGH] here in Florida,\n\n16\n00:01:00,190 --> 00:01:03,810\nnice balmy 104% humidity or something.\n\n17\n00:01:03,810 --> 00:01:05,160\nSo, it's nice.\n\n18\n00:01:05,160 --> 00:01:05,920\nWe like it.\n\n19\n00:01:05,920 --> 00:01:06,480\n>> Yeah, it's nice.\n\n20\n00:01:06,480 --> 00:01:08,860\nYeah, you start sweating almost instantly.\n\n21\n00:01:08,860 --> 00:01:09,970\n>> Yep.\n\n22\n00:01:09,970 --> 00:01:13,430\nSo, we are now in our episode here.\n\n23\n00:01:13,430 --> 00:01:15,930\nContinuing on with the idea\nof virtualization,\n\n24\n00:01:15,930 --> 00:01:19,870\nthis time we're gonna take a look\nat the idea of Citrix XenServer.\n\n25\n00:01:19,870 --> 00:01:25,070\nSo, we did another complete series on\nthe idea of Microsoft's HyperV, and\n\n26\n00:01:25,070 --> 00:01:29,020\nnow we're moving in to the open\nsource world of XenServer as well\n\n27\n00:01:29,020 --> 00:01:31,750\nas we get started too, right.\n\n28\n00:01:31,750 --> 00:01:32,410\nYep.\n\n29\n00:01:32,410 --> 00:01:35,360\n>> All right.\nSo, with XenServer, right, so\n\n30\n00:01:35,360 --> 00:01:39,970\nbefore we get into installing it and\nsetting it up, Ronnie,\n\n31\n00:01:39,970 --> 00:01:44,710\nI think we should revisit virtualization\nand just kind of where we're at and\n\n32\n00:01:44,710 --> 00:01:45,480\nwhat we're doing with it.\n\n33\n00:01:45,480 --> 00:01:47,030\n>> I think that would be a great idea,\n\n34\n00:01:47,030 --> 00:01:49,920\nagain, repetition is kinda\nthe key of us learning.\n\n35\n00:01:49,920 --> 00:01:52,320\nSo the idea of visiting, or revisiting,\n\n36\n00:01:52,320 --> 00:01:55,170\nthe concepts of virtualization,\nis actually gonna help us out,\n\n37\n00:01:55,170 --> 00:01:58,060\njust in case we have people that\nwent directly to our episode here,\n\n38\n00:01:58,060 --> 00:02:01,700\ninstead of going through the HyperV, we of\ncourse, would love for you to watch both.\n\n39\n00:02:01,700 --> 00:02:02,630\nYep.\n\n40\n00:02:02,630 --> 00:02:04,350\nAll right, so you know what?\n\n41\n00:02:04,350 --> 00:02:05,350\nLet's do this.\n\n42\n00:02:05,350 --> 00:02:07,890\nLet's start off with a drawing.\n\n43\n00:02:07,890 --> 00:02:08,860\n>> Okay, sounds good.\n\n44\n00:02:08,860 --> 00:02:12,310\n>> So,\nI'm gonna use my amazing paint skills,\n\n45\n00:02:12,310 --> 00:02:15,990\nand we'll mark up a little drawing here.\n\n46\n00:02:15,990 --> 00:02:24,060\nAnd explain the differences between\na type one and a type two hypervisor.\n\n47\n00:02:24,060 --> 00:02:24,710\n>> Okay.\n\n48\n00:02:24,710 --> 00:02:26,220\nYeah.\nSo when we get into the idea of\n\n49\n00:02:26,220 --> 00:02:30,224\nvirtualization here, right, we wanna make\nsure that we understand that concept\n\n50\n00:02:30,224 --> 00:02:31,860\nof what we are really trying to do.\n\n51\n00:02:31,860 --> 00:02:34,730\nWe are trying to make sure we\ncan use all of the hardware\n\n52\n00:02:34,730 --> 00:02:37,440\nto the optimized performance that we can.\n\n53\n00:02:37,440 --> 00:02:38,000\nIn other words,\n\n54\n00:02:38,000 --> 00:02:41,130\nthat we want to take advantage of the\nhardware that's actually before us here.\n\n55\n00:02:41,130 --> 00:02:45,050\nAnd the way that we do that is by\nimplementing some type of virtualization\n\n56\n00:02:45,050 --> 00:02:47,250\nsoftware or layer if you want to.\n\n57\n00:02:47,250 --> 00:02:51,150\nAnd those are what we call\nthe idea of hypervisors here.\n\n58\n00:02:51,150 --> 00:02:54,080\nSo we're going to describe the way\nthat hypervisors work and then we'll\n\n59\n00:02:54,080 --> 00:02:58,630\ntake a loot at some other things on how we\nactually deal with them and how they work.\n\n60\n00:02:58,630 --> 00:03:00,935\nA little more specifically, XenServer.\n\n61\n00:03:00,935 --> 00:03:02,190\n>> Mm-hm.\n\n62\n00:03:02,190 --> 00:03:08,710\nAlright, so on my PC here,\nlet's go ahead and fire up paint.\n\n63\n00:03:08,710 --> 00:03:10,360\n>> Paint.\nAll right, paint.\n\n64\n00:03:10,360 --> 00:03:10,980\nOkay so here we go.\n\n65\n00:03:10,980 --> 00:03:16,807\nSo we will start off with\na type two hypervisor.\n\n66\n00:03:16,807 --> 00:03:22,850\nAs we get our little square tool here,\nI'll draw a box in about that large.\n\n67\n00:03:22,850 --> 00:03:30,508\nAnd that tool here and\nwe'll click there between, all right.\n\n68\n00:03:34,555 --> 00:03:35,750\nMake this a little bit larger.\n\n69\n00:03:35,750 --> 00:03:36,790\nOkay, here we go.\n\n70\n00:03:36,790 --> 00:03:39,740\nSo this box here will\nrepresent our system hardware.\n\n71\n00:03:39,740 --> 00:03:42,320\nRight?\nSo the actual bare metal physical\n\n72\n00:03:42,320 --> 00:03:43,020\ncomponents.\n\n73\n00:03:43,020 --> 00:03:43,520\nThat we have.\n\n74\n00:03:44,590 --> 00:03:48,370\nAnd when we install something.\n\n75\n00:03:50,010 --> 00:03:54,560\nAll right, so we'll put this here and\nthen, all right.\n\n76\n00:03:54,560 --> 00:03:55,060\nSo this will be our.\n\n77\n00:03:58,717 --> 00:04:00,290\nOperating system.\n\n78\n00:04:00,290 --> 00:04:03,790\nSo whether this is Windows or Linux or\n\n79\n00:04:03,790 --> 00:04:07,110\nwhatever have you, in this scenario\nwe'll just call it Windows.\n\n80\n00:04:07,110 --> 00:04:09,640\nAlright, so\nnow we have our operating system that is\n\n81\n00:04:09,640 --> 00:04:11,308\non top of this system hardware.\n\n82\n00:04:11,308 --> 00:04:13,385\nAll right?\n\n83\n00:04:13,385 --> 00:04:16,466\nAnd then, actually,\n\n84\n00:04:16,466 --> 00:04:21,012\nwe'll do a type two hypervisor.\n\n85\n00:04:26,374 --> 00:04:29,480\nAlright, then we have the hypervisor.\n\n86\n00:04:29,480 --> 00:04:34,270\nNow, this hypervisor it sort of acts\nlike a traffic cop, more or less.\n\n87\n00:04:34,270 --> 00:04:38,625\nIt accepts calls from the virtual machines\nand it passes it on to our operating\n\n88\n00:04:38,625 --> 00:04:42,517\nsystem which we'll call this one\nWindows 8, cuz I like Windows 8.\n\n89\n00:04:42,517 --> 00:04:43,184\nAnd then,\n\n90\n00:04:43,184 --> 00:04:48,090\nWIndows 8 will then pass that on the\nsystem hardware to make that connection.\n\n91\n00:04:49,210 --> 00:04:52,680\nAnd on top of that, let's see we'll\ndo a little circle this time.\n\n92\n00:04:52,680 --> 00:04:56,665\nYou know, I am running a bit out\nof room here, come to think of it.\n\n93\n00:05:04,171 --> 00:05:05,865\nWell, this is gonna go south kinda fast.\n\n94\n00:05:05,865 --> 00:05:08,280\n>> [LAUGH]\n>> All right.\n\n95\n00:05:08,280 --> 00:05:16,540\nSo over here we'll call this one CPU\nin that little quadrant over there.\n\n96\n00:05:16,540 --> 00:05:17,250\nAll right.\n\n97\n00:05:17,250 --> 00:05:20,230\nSo a network card over there.\n\n98\n00:05:20,230 --> 00:05:21,450\nWe got RAM in that quadrant.\n\n99\n00:05:21,450 --> 00:05:25,410\nYeah, and now it's starting to go on\ntop of each other, that's fine though.\n\n100\n00:05:25,410 --> 00:05:26,610\nAnd then our disk drive.\n\n101\n00:05:26,610 --> 00:05:27,880\nAll right.\n\n102\n00:05:27,880 --> 00:05:31,845\nSo this are will be this little quadrant\nhere [LAUGH] will represent our virtual\n\n103\n00:05:31,845 --> 00:05:32,910\nmachine.\n\n104\n00:05:32,910 --> 00:05:36,530\nSo our virtual machine then is\nbuilt on top of that hypervisor.\n\n105\n00:05:36,530 --> 00:05:37,210\n>> Yeah.\n\n106\n00:05:37,210 --> 00:05:41,390\nSo what essentially the hypervisor is\ndoing for us is virtualizing hardware.\n\n107\n00:05:41,390 --> 00:05:45,670\nIt's taking our physical hardware and it's\ndoing what is called an extraction, right.\n\n108\n00:05:45,670 --> 00:05:49,020\nThe idea of saying we're representing\nwhat the hardware looks like\n\n109\n00:05:49,020 --> 00:05:51,370\nin this software environment for us.\n\n110\n00:05:51,370 --> 00:05:55,640\nThe reason why we want to do that is so\nthat we can actually go ahead and\n\n111\n00:05:55,640 --> 00:05:59,590\ninstall an operating system\ninside of that virtual computer.\n\n112\n00:05:59,590 --> 00:06:02,450\nSo Nate is showing us this\nfirst idea of the hypervisor\n\n113\n00:06:02,450 --> 00:06:06,640\nthat we call the type two hypervisor,\nwhich runs on top of the hardware and\n\n114\n00:06:06,640 --> 00:06:10,580\non the host operating system, the one\nthat's ready on your computer here.\n\n115\n00:06:10,580 --> 00:06:11,750\nYep.\n\n116\n00:06:11,750 --> 00:06:12,370\n>> All right.\n\n117\n00:06:12,370 --> 00:06:17,360\nSo this 480, the type two hypervisor for\nthese virtualization technologies,\n\n118\n00:06:17,360 --> 00:06:22,090\nthese would be like Oracle or\nVirtual Box works this way, Microsoft,\n\n119\n00:06:22,090 --> 00:06:27,900\nVirtual PC, things like a DOS box and\nother type emulators.\n\n120\n00:06:27,900 --> 00:06:29,360\nEmulators, yeah, that's more or\n\n121\n00:06:29,360 --> 00:06:32,690\nless what a type two hypervisor\nkind of functions like.\n\n122\n00:06:32,690 --> 00:06:37,410\nAn emulator and if you put in a,\nI don't know, SNES Genesis ROMs, you know.\n\n123\n00:06:37,410 --> 00:06:41,220\nYou load up and emulator so\nyou then you can play those ROM games.\n\n124\n00:06:41,220 --> 00:06:46,610\nAnd the same sort of idea,\nalong with this type two hypervisor.\n\n125\n00:06:46,610 --> 00:06:47,640\n>> Yup.\n\n126\n00:06:47,640 --> 00:06:51,940\n>> Now to contrast that so\ndraw a little box over here.\n\n127\n00:06:51,940 --> 00:06:54,220\nI got our text box.\n\n128\n00:06:56,140 --> 00:06:57,150\nTake that back to 20.\n\n129\n00:06:57,150 --> 00:06:58,510\nAnd so this right here would be our.\n\n130\n00:07:03,173 --> 00:07:07,563\nOur System Hardware, and [SOUND] And\n\n131\n00:07:07,563 --> 00:07:11,951\nthen on top of our system hardware,\n\n132\n00:07:11,951 --> 00:07:16,486\nwe will then have the hypervisor will\n\n133\n00:07:16,486 --> 00:07:21,192\nthen go on top of our system hardware.\n\n134\n00:07:21,192 --> 00:07:25,578\nAnd then on top of that,\nlet's do just a little box this time.\n\n135\n00:07:28,645 --> 00:07:31,556\nI always do two boxes, three boxes.\n\n136\n00:07:33,240 --> 00:07:36,430\nAll right, there we go.\n\n137\n00:07:36,430 --> 00:07:42,025\nSo this will be our our\nhost operating system.\n\n138\n00:07:42,025 --> 00:07:46,705\nSo we guest one, stretch this box out.\n\n139\n00:07:52,773 --> 00:07:56,582\nAll right, so for a type one hypervisor.\n\n140\n00:07:56,582 --> 00:08:01,921\nNow on this one here the hypervisors\nSits below the host operating system,\n\n141\n00:08:01,921 --> 00:08:08,240\nor whatever operating system is running\nat the time that Hypervisor is installed.\n\n142\n00:08:08,240 --> 00:08:12,550\nAnd then all the guest operating\nsystems are installed right alongside\n\n143\n00:08:12,550 --> 00:08:13,820\nthat host OS.\n\n144\n00:08:14,920 --> 00:08:18,790\nOne of the main benefits\n\n145\n00:08:18,790 --> 00:08:23,110\nof a type 1 Hypervisor is the idea\nof speed and performance.\n\n146\n00:08:23,110 --> 00:08:28,080\nSo when Guest 1, when it has to make\na call down to System Hardware whether\n\n147\n00:08:28,080 --> 00:08:32,780\nit needs to access the hard drive or\nto access it's memory or\n\n148\n00:08:32,780 --> 00:08:35,690\nwhatnot, that goes directly\nto the hypervisor.\n\n149\n00:08:35,690 --> 00:08:40,970\nWhich then connects it to the system\nhardware as opposed over to the type\n\n150\n00:08:40,970 --> 00:08:44,830\ntwo hypervisor, it's gotta go through\nthe operating system to get down to that\n\n151\n00:08:44,830 --> 00:08:50,110\nsystem hardware, so it's a bit more,\nyeah, a bit more, a lot more, a lot more\n\n152\n00:08:50,110 --> 00:08:55,670\nperformance and better for production type\nenvironments and those sorts of things,\n\n153\n00:08:55,670 --> 00:09:00,400\nwith a type two, those work great for\neffort for just testing things.\n\n154\n00:09:00,400 --> 00:09:04,930\nIf you want to spin up a VM\nreal quick to see something or\n\n155\n00:09:04,930 --> 00:09:08,480\nlook at like a beta operating system.\n\n156\n00:09:08,480 --> 00:09:11,380\nOr something like that,\nI mean works fantastic.\n\n157\n00:09:11,380 --> 00:09:14,720\nBut it's going to be a virtual machine\nthat people are going to be working with.\n\n158\n00:09:14,720 --> 00:09:17,510\nOr if you need to push it out to some\nclients or something that's gonna\n\n159\n00:09:17,510 --> 00:09:22,660\nbe a bit more long-term,\nthe Type 1 hypervisor is the way to go.\n\n160\n00:09:22,660 --> 00:09:23,370\n>> Yeah.\n\n161\n00:09:23,370 --> 00:09:24,440\nSo in this environment,\n\n162\n00:09:24,440 --> 00:09:27,580\nwe're actually seeing that virtualization\nreally takes two forms for us.\n\n163\n00:09:27,580 --> 00:09:30,830\nBoth of them involve this idea\nof the hypervisor, right?\n\n164\n00:09:30,830 --> 00:09:34,920\nSo with the idea of virtualization,\nwhat are we doing here?\n\n165\n00:09:34,920 --> 00:09:38,150\nInstead of actually having to\nrun one operating system and\n\n166\n00:09:38,150 --> 00:09:41,650\nthen partitioning it off, installing\nanother operating system on there,\n\n167\n00:09:41,650 --> 00:09:46,060\nto reboot in that other operating system\nwe can run multiple operating systems at\n\n168\n00:09:46,060 --> 00:09:51,710\nthe same time on that one set of\nhardware for us to actually do it.\n\n169\n00:09:51,710 --> 00:09:54,460\nSo imagine that in a traditional\nPC environment and\n\n170\n00:09:54,460 --> 00:09:56,920\nregular server environment,\nwe have a hardware.\n\n171\n00:09:56,920 --> 00:09:59,000\nWe install that operating\nsystem on top of it.\n\n172\n00:09:59,000 --> 00:10:01,470\nThen, that way, we actually load on\nthe application that we need to.\n\n173\n00:10:01,470 --> 00:10:04,880\nWhat we're now able to\ndo is take that model.\n\n174\n00:10:04,880 --> 00:10:08,800\nInstead, and now run a hypervisor\nunderneath it which will give us\n\n175\n00:10:08,800 --> 00:10:11,250\na software emulation of the hardware, and\n\n176\n00:10:11,250 --> 00:10:15,450\nthen we can now install the operating\nsystem in that software environment, and\n\n177\n00:10:15,450 --> 00:10:19,650\nthen also on top of the operating system,\ninstall the applications that we need.\n\n178\n00:10:19,650 --> 00:10:20,700\nSo this allows for\n\n179\n00:10:20,700 --> 00:10:25,590\nus to take advantage of the hardware\nfully, is what we're really going at.\n\n180\n00:10:25,590 --> 00:10:30,600\nAnd a lot of the actual basic types of\nhypervisors that we started off with\n\n181\n00:10:30,600 --> 00:10:32,780\nwere what we call the type two hypervisor.\n\n182\n00:10:32,780 --> 00:10:36,060\nBecause we need an operating system to\nrun an application that could run this,\n\n183\n00:10:36,060 --> 00:10:37,330\nthat was that.\n\n184\n00:10:37,330 --> 00:10:40,500\nBut as it started to mature,\nthe idea of virtualization,\n\n185\n00:10:40,500 --> 00:10:44,890\nthey started figuring out ways to actually\nrun that emulation on top of the hardware,\n\n186\n00:10:44,890 --> 00:10:48,550\nand then provide a software environment\nfor every operating system.\n\n187\n00:10:48,550 --> 00:10:51,780\nEven the ones that's actually controlling\nthe way that some of the features work in\n\n188\n00:10:51,780 --> 00:10:53,791\nterms of storage and networking.\n\n189\n00:10:53,791 --> 00:10:54,853\n[INAUDIBLE] Here,\n\n190\n00:10:54,853 --> 00:10:58,820\nwhere you see Nate actually writes\nthe host operating system over here.\n\n191\n00:10:58,820 --> 00:11:02,310\nThat controls the way the actual guest\noperating systems can also access\n\n192\n00:11:02,310 --> 00:11:03,940\nthe hardware as well.\n\n193\n00:11:05,050 --> 00:11:09,190\nInstead we can run that all on top and\nthat now means that we don't have to have\n\n194\n00:11:09,190 --> 00:11:12,220\ndedicated hardware just for\nthe host operating system.\n\n195\n00:11:12,220 --> 00:11:16,100\nWe can actually run every single\nthing as a virtual machine as well.\n\n196\n00:11:16,100 --> 00:11:21,260\nSo, when we start talking about the need\nto take advantage of the hardware that\n\n197\n00:11:21,260 --> 00:11:25,605\nwe have, there's a particular statistic\nthat Nate always mentions here, so\n\n198\n00:11:25,605 --> 00:11:27,880\nit' s a good one for\nus to actually think about.\n\n199\n00:11:27,880 --> 00:11:30,350\nSo, Nate, let's talk about\nthat statistic for a moment.\n\n200\n00:11:30,350 --> 00:11:31,890\nWhat's that statistic?\n\n201\n00:11:31,890 --> 00:11:36,460\n>> So one that I got from Don Pezet,\nand I'm not sure where he got it,\n\n202\n00:11:37,510 --> 00:11:41,300\nhe said it so I guess it's a legit number.\n\n203\n00:11:41,300 --> 00:11:48,190\nBut so he said that 80% of the people\nuse just 20% of their systems.\n\n204\n00:11:48,190 --> 00:11:52,330\nSo you, think about today some of\nthese computers incredibly powerful.\n\n205\n00:11:52,330 --> 00:11:57,100\nQuad core CPUs, 16 gigabytes of RAM,\nbunch of hard drives thrown in there\n\n206\n00:11:59,120 --> 00:12:03,570\nwhat my mom uses here computer for\nis email and\n\n207\n00:12:03,570 --> 00:12:07,680\nlooking at funny pictures on the internet,\nright?\n\n208\n00:12:07,680 --> 00:12:12,050\nYou could get away with an iPad just\nto do that, just to write email.\n\n209\n00:12:12,050 --> 00:12:14,410\nBut these are full blown desk top PC's.\n\n210\n00:12:14,410 --> 00:12:15,880\nVery powerful.\n\n211\n00:12:15,880 --> 00:12:22,330\nPCs and a lot of their\nutilization just goes unused.\n\n212\n00:12:22,330 --> 00:12:23,790\n>> Yeah.\n>> Just kinda just sits there\n\n213\n00:12:23,790 --> 00:12:25,440\nidle a lot of the time.\n\n214\n00:12:25,440 --> 00:12:29,660\nSo then what better way to\nleverage the power of our PCs just\n\n215\n00:12:29,660 --> 00:12:34,470\nsitting there than to load up, you know,\nthree or four operating systems on there.\n\n216\n00:12:34,470 --> 00:12:36,910\nAnd multi task the heck out of it.\n\n217\n00:12:36,910 --> 00:12:41,170\n>> Most home users are not gonna see the\nbenefit in terms of virtualization because\n\n218\n00:12:41,170 --> 00:12:42,220\nthey don't need it.\n\n219\n00:12:42,220 --> 00:12:45,400\nIf you're like me at home and you're just\nplaying Freecell, you don't really need\n\n220\n00:12:45,400 --> 00:12:51,580\nthat quad core i7 processor and the 16\nGigs of RAM and the two terabyte hardrive.\n\n221\n00:12:51,580 --> 00:12:55,890\nYou really don't need anything like that\nat all, but if you're now inside of a work\n\n222\n00:12:55,890 --> 00:13:00,420\nenvironment where you're actually\nrunning multiple physical servers.\n\n223\n00:13:00,420 --> 00:13:01,760\nWhen I first started,\n\n224\n00:13:01,760 --> 00:13:06,580\nwe had a whole rack of servers, I think\nlike eight or ten different servers.\n\n225\n00:13:06,580 --> 00:13:09,710\nEach one of those servers had\nan operatingt system installed on them and\n\n226\n00:13:09,710 --> 00:13:12,600\nwere running some Windows Server\n2003 at the time when they\n\n227\n00:13:12,600 --> 00:13:14,220\nfirst kind of got started here.\n\n228\n00:13:14,220 --> 00:13:17,740\nWe would actually run a domain\ncontroller on one server.\n\n229\n00:13:17,740 --> 00:13:22,540\nWe would then actually run DHCP on\nanother server at that point in time and\n\n230\n00:13:22,540 --> 00:13:24,650\nthen we started combining roles together.\n\n231\n00:13:24,650 --> 00:13:27,470\nBut, we actually needed other things\nlike a file server or anything else.\n\n232\n00:13:27,470 --> 00:13:29,770\nWe actually had to buy more servers.\n\n233\n00:13:29,770 --> 00:13:32,640\nWell, there came a point in time where\nthe virtualization technology started\n\n234\n00:13:32,640 --> 00:13:33,870\ncoming on the scene.\n\n235\n00:13:33,870 --> 00:13:34,700\nWhen now, what we could do,\n\n236\n00:13:34,700 --> 00:13:40,210\nis we could buy a higher performing\nserver that we had, and the one\n\n237\n00:13:40,210 --> 00:13:43,130\nthat we ended up getting when we first\nstarted moving towards virtualization.\n\n238\n00:13:43,130 --> 00:13:47,460\nWas equal to about five or six of those\nservers in terms of the hard drive space\n\n239\n00:13:47,460 --> 00:13:52,230\nand the RAM that we had, and the overall\nCPU was much better higher performing.\n\n240\n00:13:52,230 --> 00:13:55,620\nAnd what we could do is actually\nuse this virtualization technology\n\n241\n00:13:55,620 --> 00:13:59,200\nto run them all on that one single server,\nokay?\n\n242\n00:13:59,200 --> 00:14:04,070\nSo now we have multiple different\noperating systems running simultaneously.\n\n243\n00:14:04,070 --> 00:14:07,640\nOn this one machine, we're able to use\nthat hardware and the way that it was\n\n244\n00:14:07,640 --> 00:14:11,860\nactually designed to work a lot better and\nactually optimized the usage of it.\n\n245\n00:14:11,860 --> 00:14:15,330\nSo in a production environment,\nthat's what you're gonna see,\n\n246\n00:14:15,330 --> 00:14:18,510\nis that virtualization is pretty much,\nwhat you see everywhere,\n\n247\n00:14:18,510 --> 00:14:20,420\nespecially on the back end of things.\n\n248\n00:14:20,420 --> 00:14:24,990\nNot so much on the workstation side,\nbut when you start connecting networks,\n\n249\n00:14:24,990 --> 00:14:26,605\nvirtualization is pretty\nmuch the key here.\n\n250\n00:14:26,605 --> 00:14:27,550\n>> Mm-hm.\n\n251\n00:14:27,550 --> 00:14:28,070\n>> Yep.\n\n252\n00:14:28,070 --> 00:14:29,560\n>> So, Ryan, so let's think about this,\n\n253\n00:14:29,560 --> 00:14:34,090\nso let's think about\nthe client side of things.\n\n254\n00:14:34,090 --> 00:14:39,610\nSo, we've got in the business environment,\nwe're gonna have less physical servers,\n\n255\n00:14:39,610 --> 00:14:41,750\nand those guys generate less heat.\n\n256\n00:14:41,750 --> 00:14:43,580\nThey use less power.\n\n257\n00:14:43,580 --> 00:14:47,000\nAnd you get higher density and\nwhat not of,\n\n258\n00:14:47,000 --> 00:14:49,310\nI guess,\nmachines that we can fit in there and\n\n259\n00:14:49,310 --> 00:14:54,860\nhave a whole rack full of servers having\nmany racks full of physical servers.\n\n260\n00:14:54,860 --> 00:14:59,290\nBut what about a person that\njust needs to test something?\n\n261\n00:14:59,290 --> 00:15:03,890\nLike I mentioned an OS,\na brand new OS wants to test out.\n\n262\n00:15:03,890 --> 00:15:06,920\nWell, let's think about\nan old applications,\n\n263\n00:15:06,920 --> 00:15:11,510\nlike a line of business app\nthat has to run on Windows XP.\n\n264\n00:15:11,510 --> 00:15:12,330\n>> Right.\n\n265\n00:15:12,330 --> 00:15:16,110\n>> Well, you could have a dedicated\nbox that just runs Windows XP.\n\n266\n00:15:16,110 --> 00:15:19,580\nThat sits there,\nthat gets turned on every once in awhile.\n\n267\n00:15:19,580 --> 00:15:21,820\nBut then, just to run one app.\n\n268\n00:15:22,980 --> 00:15:24,400\nThat one is XP machine.\n\n269\n00:15:24,400 --> 00:15:29,880\nThere's a physical to virtual\npass that we can take.\n\n270\n00:15:29,880 --> 00:15:34,060\nAnd we can just run that app\ninside of Windows XP virtualized.\n\n271\n00:15:34,060 --> 00:15:36,780\nAnd so,\nwe can get rid of that one machine.\n\n272\n00:15:36,780 --> 00:15:39,280\nOr about, a tester, all right?\n\n273\n00:15:39,280 --> 00:15:43,708\nSomebody who needs to, a developer\nthat needs to test applications, or\n\n274\n00:15:43,708 --> 00:15:46,040\nto test certain hardware or what not.\n\n275\n00:15:46,040 --> 00:15:47,370\n>> Yeah.\n\n276\n00:15:47,370 --> 00:15:51,960\n>> Instead of having a whole bunch of\ndedicated machines for that sort of stuff,\n\n277\n00:15:51,960 --> 00:15:53,850\nit's really simple just to virtualize.\n\n278\n00:15:53,850 --> 00:15:54,600\nThat sort of thing.\n\n279\n00:15:54,600 --> 00:15:57,870\n>> Yeah, and that's actually a good\nphysical example that we can actually now.\n\n280\n00:15:57,870 --> 00:16:01,402\nFor us here at ITProTV, when we do get\nsupport tickets that come in saying,\n\n281\n00:16:01,402 --> 00:16:03,589\nwe can't actually can't\nsee the video here,\n\n282\n00:16:03,589 --> 00:16:06,409\nwhat we actually have is our\nweb kungfu master Rob Maghrib.\n\n283\n00:16:06,409 --> 00:16:09,346\nWhat he does is he asks what\nthe operating system is, and\n\n284\n00:16:09,346 --> 00:16:12,590\nwhat version of the browser\nthat we actually need.\n\n285\n00:16:12,590 --> 00:16:14,600\nAnd instead of Rob having the go and\nlook for\n\n286\n00:16:14,600 --> 00:16:19,440\none of those machines, we gave him the\nability to virtualize a Windows 7 machine\n\n287\n00:16:19,440 --> 00:16:21,960\nrunning Internet Explorer 9, right?\n\n288\n00:16:21,960 --> 00:16:26,830\nSo that way, he can actually have a true,\nreal one for one test here,\n\n289\n00:16:26,830 --> 00:16:29,300\nat actually getting access to the website,\nand seeing or\n\n290\n00:16:29,300 --> 00:16:32,320\nexperiencing that same problem\nin the same environment.\n\n291\n00:16:32,320 --> 00:16:35,020\nIf we didn't have that, right,\ndidn't have the ability to do that,\n\n292\n00:16:35,020 --> 00:16:38,280\nwe'd have to send Rob out to find\na machine, install Windows 7 on it,\n\n293\n00:16:38,280 --> 00:16:41,260\nmake sure it's running Internet Explorer\n9, make sure we're doing that.\n\n294\n00:16:41,260 --> 00:16:45,290\nBut now with this, it gives him the\nability whatever version of the operating\n\n295\n00:16:45,290 --> 00:16:47,273\nsystem that we need, if we really need to.\n\n296\n00:16:47,273 --> 00:16:51,478\nHopefully, nobody's running Windows 98,\nor ME, or something like that, but\n\n297\n00:16:51,478 --> 00:16:54,133\nit is possible, but\nwe probably wouldn't do that.\n\n298\n00:16:54,133 --> 00:16:58,522\nBut it gives us that ability to do\nsome testing and to provide that.\n\n299\n00:16:58,522 --> 00:17:00,527\nIn a production environment,\n\n300\n00:17:00,527 --> 00:17:05,534\nthe real benefit is the cost savings that\nwe have, as well as the idea to be able\n\n301\n00:17:05,534 --> 00:17:11,090\nto use those several thousand dollar\nmachines now, and again use them fully.\n\n302\n00:17:11,090 --> 00:17:15,190\nWe went from about ten servers at this\npoint, to where our current environment,\n\n303\n00:17:15,190 --> 00:17:17,710\nbecause we're using\nthe idea of virtualization,\n\n304\n00:17:17,710 --> 00:17:21,380\nto really about three servers\nis what we have here onsite.\n\n305\n00:17:21,380 --> 00:17:25,350\nSo it really did help reduce the power\nconsumption that Nate mentioned.\n\n306\n00:17:25,350 --> 00:17:29,450\nIt helped us to be able to actually run\nmore of the things that we needed to, and\n\n307\n00:17:29,450 --> 00:17:33,380\neven isolated instances, like certain\nsoftware that would only run in one\n\n308\n00:17:33,380 --> 00:17:35,450\nenvironment, but\nwouldn't run in anything else.\n\n309\n00:17:35,450 --> 00:17:38,900\nWe can actually do all that and not have\nto worry about buying another server or\n\n310\n00:17:38,900 --> 00:17:41,040\ndedicating another piece\nof machinery to it.\n\n311\n00:17:41,040 --> 00:17:44,802\nWe could run inside of our virtualization\nenvironment and we're up and ready to go.\n\n312\n00:17:44,802 --> 00:17:45,813\n>> Mm-hm.\n\n313\n00:17:45,813 --> 00:17:46,492\n>> Yeah.\n\n314\n00:17:46,492 --> 00:17:49,909\n>> All right Ronnie, so let's talk\nbriefly about hardware requirements.\n\n315\n00:17:49,909 --> 00:17:52,478\n>> Okay.\n>> Right so, we've said,\n\n316\n00:17:52,478 --> 00:17:57,665\nnow we want to virtualize a machine for\none need or another.\n\n317\n00:17:57,665 --> 00:18:01,060\n>> Mm-hm.\n>> So what do we need on our PC to be able\n\n318\n00:18:01,060 --> 00:18:03,420\nto take advantage of\nthis kind of technology?\n\n319\n00:18:03,420 --> 00:18:06,620\n>> Yeah, so a lot of times when\nyou start taking a look at this,\n\n320\n00:18:06,620 --> 00:18:09,560\ndepending on the product that you're\nusing, we are now going to talk\n\n321\n00:18:09,560 --> 00:18:14,300\nabout the product that we're looking\nat which is Citrix XenServer.\n\n322\n00:18:14,300 --> 00:18:19,390\nCitrix XenServer is a very powerful\nproduct just like Microsoft has Hyper-V,\n\n323\n00:18:19,390 --> 00:18:20,920\nVMware has, well, VMware.\n\n324\n00:18:20,920 --> 00:18:21,480\nOkay.\n\n325\n00:18:21,480 --> 00:18:23,280\nAnd all the stuff that\nit actually has with it.\n\n326\n00:18:23,280 --> 00:18:27,696\nThere are other players in the market,\nbut XenServer and Citrix, I mean Citrix,\n\n327\n00:18:27,696 --> 00:18:31,280\nXenServer, VMware, the ones that\nthey actually have out there,\n\n328\n00:18:31,280 --> 00:18:35,700\nas well as Hyper-V, these are kind of\nthe three big players in the market.\n\n329\n00:18:35,700 --> 00:18:38,160\nThere are some up and\ncomers that are actually coming along.\n\n330\n00:18:38,160 --> 00:18:39,230\nRed Hat has it.\n\n331\n00:18:39,230 --> 00:18:41,550\nOracle, again, is also working on one.\n\n332\n00:18:41,550 --> 00:18:43,412\nBut when we start taking\na look at it here,\n\n333\n00:18:43,412 --> 00:18:47,155\nCitrix XenServer is the one that we've\nchosen for this particular series as well.\n\n334\n00:18:47,155 --> 00:18:52,092\nSo we went through the idea of hypervisor\nto show you a kind of proprietary way\n\n335\n00:18:52,092 --> 00:18:55,215\nof doing this by using\nMicrosoft's Hyper-V.\n\n336\n00:18:55,215 --> 00:18:58,525\nNow we're taking a look at an open source\nproduct, which is Citrix XenServer.\n\n337\n00:18:58,525 --> 00:19:00,830\nNow you're going,\nI've never heard of Citrix XenServer.\n\n338\n00:19:00,830 --> 00:19:02,850\nWell the world of virtualization has.\n\n339\n00:19:02,850 --> 00:19:06,980\nThey've absolutely been one of the kind\nof leaders in terms of virtualization and\n\n340\n00:19:06,980 --> 00:19:09,220\nbeen out there a long time, okay?\n\n341\n00:19:09,220 --> 00:19:11,840\nThey've been out there and\nthey've been performing so well that\n\n342\n00:19:11,840 --> 00:19:15,200\nwhen it came down to choosing a product,\nwhether we were going to use Hyper-V, or\n\n343\n00:19:15,200 --> 00:19:17,960\nwhether we were actually\ngonna use XenServer here.\n\n344\n00:19:17,960 --> 00:19:22,620\nWe ended up choosing XenServer to do\nwhat we actually wanted to do, okay?\n\n345\n00:19:22,620 --> 00:19:26,800\nSo when we talked about the idea\nof actually running XenServer,\n\n346\n00:19:26,800 --> 00:19:29,490\njust like any other thing that\nwe actually put on the computer,\n\n347\n00:19:29,490 --> 00:19:31,880\nthere has to be minimum\nhardware requirements.\n\n348\n00:19:31,880 --> 00:19:39,470\nWell XenServer is so\nincredibly confident about their product\n\n349\n00:19:39,470 --> 00:19:42,640\nthat they don't really list a ton of\nhardware requirements, because at the base\n\n350\n00:19:42,640 --> 00:19:47,010\nof it is some type of Linux foundation,\nand Linux operating system that we have.\n\n351\n00:19:47,010 --> 00:19:49,480\nBut what they pretty much\nsay in their source, and\n\n352\n00:19:49,480 --> 00:19:54,280\nif you go here to their website like I\nhave on Citrix.com and go to XenServer,\n\n353\n00:19:54,280 --> 00:19:59,430\nthe only thing that they really say is, as\nlong as the server was built In the last\n\n354\n00:19:59,430 --> 00:20:04,340\nthree years, you can probably actually\nrun anything that you want to, okay?\n\n355\n00:20:04,340 --> 00:20:07,890\nIn the early days of virtualization\nwhere everything was highly specialized,\n\n356\n00:20:07,890 --> 00:20:11,380\nin other words,\nthe drivers were not there that we needed,\n\n357\n00:20:11,380 --> 00:20:13,050\nthey supported only a few products.\n\n358\n00:20:13,050 --> 00:20:17,560\nBut today, because of the maturity of\nvirtualization that we have today,\n\n359\n00:20:17,560 --> 00:20:21,180\nas long as it's built within the last\nthree years, you can pretty much run it.\n\n360\n00:20:21,180 --> 00:20:25,740\nNow, for us here in XenServer, that means\njust about any machine will actually work.\n\n361\n00:20:25,740 --> 00:20:29,810\nSo, I can actually run it on my laptop,\nbut there are some things on laptops that\n\n362\n00:20:29,810 --> 00:20:32,180\nare a little bit particular\nthat it may not recognize.\n\n363\n00:20:32,180 --> 00:20:36,970\nBut just about any PC, any server that you\nrun today, will be able to actually run\n\n364\n00:20:36,970 --> 00:20:40,830\nand install XenServer directly on\ntop of it, is what we'll have here.\n\n365\n00:20:40,830 --> 00:20:41,940\nOkay?\n\n366\n00:20:41,940 --> 00:20:45,980\nNow the other thing that we also need\nhere, if we are gonna begin to talk about\n\n367\n00:20:45,980 --> 00:20:50,019\nthis particular process here,\nis not only a machine to put it on, okay?\n\n368\n00:20:50,019 --> 00:20:54,960\nUnlike the other way that we can\ninstall hypervisor, all right?\n\n369\n00:20:54,960 --> 00:20:56,600\nSo when we're doing\nthe Windows Server 2012,\n\n370\n00:20:56,600 --> 00:21:00,450\nwe had to actually run Windows Server and\nthen we installed the role.\n\n371\n00:21:00,450 --> 00:21:03,080\nIn Citrix XenServer, you don't do that.\n\n372\n00:21:03,080 --> 00:21:06,800\nWhat you do is you load the hypervisor\ndirectly on to the hardware itself.\n\n373\n00:21:06,800 --> 00:21:10,600\nThere is no underlying\nbase operating system for\n\n374\n00:21:10,600 --> 00:21:13,452\nus, in terms of what's in between\nthe hardware and the hypervisor.\n\n375\n00:21:13,452 --> 00:21:17,290\nIt's a hypervisor, and it's running\nessentially just kind of the bare minimum\n\n376\n00:21:17,290 --> 00:21:21,400\nof Linux behind it, but\nit really is just doing that on itself.\n\n377\n00:21:21,400 --> 00:21:25,060\nSo when we do put this on,\nit's gonna erase everything that you have\n\n378\n00:21:25,060 --> 00:21:28,730\non that particular computer, so you're\ndoing this in a testing environment,\n\n379\n00:21:28,730 --> 00:21:32,080\nyou need a computer that you can say,\nI can wipe it clean.\n\n380\n00:21:32,080 --> 00:21:35,770\nI'm not worried about any of the hard\ndrive space on there cuz it's gonna,\n\n381\n00:21:35,770 --> 00:21:38,770\nagain, install and\nwipe everything clean for us.\n\n382\n00:21:38,770 --> 00:21:41,500\nSo there's really not a lot in terms\nof basic hardware requirements.\n\n383\n00:21:41,500 --> 00:21:46,199\nNate?\n>> Mm-hm, yep, a few things also, as well,\n\n384\n00:21:46,199 --> 00:21:51,394\nwe have to have a 64 bit\nprocessor of course, and\n\n385\n00:21:51,394 --> 00:21:58,590\nwe do need the AMD virtualization,\nthat AMDV, and Intel has the VT?\n\n386\n00:21:58,590 --> 00:22:00,120\n>> Intel VT, yep.\n\n387\n00:22:00,120 --> 00:22:03,803\n>> So\nwe have to have that support in there.\n\n388\n00:22:03,803 --> 00:22:05,710\nYeah, that support.\n\n389\n00:22:05,710 --> 00:22:08,300\n>> There's a couple of different\nthings with this, right?\n\n390\n00:22:08,300 --> 00:22:12,670\nBecause we're actually talking about\nthe ability of virtualization, right?\n\n391\n00:22:12,670 --> 00:22:17,710\nWe pretty much have the idea of Linux\noperating system that we'll be running,\n\n392\n00:22:17,710 --> 00:22:19,090\nand really Windows operating system.\n\n393\n00:22:19,090 --> 00:22:21,190\nDon't get me wrong,\nthere's more than that, but for us,\n\n394\n00:22:21,190 --> 00:22:24,670\nthose are kind of the two major players\nin the virtualization world that we would\n\n395\n00:22:24,670 --> 00:22:27,870\nwant to virtualize the operating\nsystems and running them on.\n\n396\n00:22:27,870 --> 00:22:28,820\nOkay.\n\n397\n00:22:28,820 --> 00:22:34,200\nIf you're going to be running Windows\noperating systems in a virtualized\n\n398\n00:22:34,200 --> 00:22:38,900\nenvironment, the newer operating\nsystems really want the processor to be\n\n399\n00:22:38,900 --> 00:22:43,540\navailable to them, and so you have to have\nthat virtualization enabled technology.\n\n400\n00:22:43,540 --> 00:22:48,703\nThe Intel VT or the AMDV allows\nthe hypervisor again, to be able to give\n\n401\n00:22:48,703 --> 00:22:54,875\nthe operating system the access it needs\nto, okay, with those two technologies.\n\n402\n00:22:54,875 --> 00:23:01,530\nBut, let's say you go hey,\nI don't have a PC that will do that.\n\n403\n00:23:01,530 --> 00:23:04,700\nThen you're not gonna be able to install\nWindows operating systems that actually\n\n404\n00:23:04,700 --> 00:23:08,160\ncan be virtualized onto\nthat Citrix XenServer.\n\n405\n00:23:08,160 --> 00:23:08,870\nBut what can you do?\n\n406\n00:23:08,870 --> 00:23:13,360\nIf you don't have that, and you go,\nI don't have a particular PC that will\n\n407\n00:23:13,360 --> 00:23:18,900\nactually do that hardware assistance,\nor virtualization assistance.\n\n408\n00:23:18,900 --> 00:23:23,840\nYou can still run Linux virtual\ncomputers on a machine if you wanted to.\n\n409\n00:23:23,840 --> 00:23:26,430\nSo you can install a XenServer\ndirectly on those, and\n\n410\n00:23:26,430 --> 00:23:29,240\nyou can run Linux ones you just\ncan't do the Windows ones as well.\n\n411\n00:23:29,240 --> 00:23:32,850\nSo they really have kind of, I don't wanna\nsay they figured out everything, but\n\n412\n00:23:32,850 --> 00:23:34,880\nthey've given the opportunity here.\n\n413\n00:23:34,880 --> 00:23:37,030\nIf you wanna do a mixed environment,\nyou have to have that VT.\n\n414\n00:23:37,030 --> 00:23:40,930\nIf you wanna just do a Linux\nenvironment in terms of virtualization,\n\n415\n00:23:40,930 --> 00:23:42,520\nyou can pretty much run it\non anything you want to.\n\n416\n00:23:42,520 --> 00:23:44,070\nIt's pretty smart.\n\n417\n00:23:44,070 --> 00:23:45,250\nThe software.\n\n418\n00:23:45,250 --> 00:23:50,620\n>> Yeah, now to check to see\nif your system does have that,\n\n419\n00:23:50,620 --> 00:23:54,980\ngetting into the BIOS is the surefire\nway to check that you have it.\n\n420\n00:23:54,980 --> 00:23:59,340\nAnd also not only that, but to check\nto see that it is, in fact, enabled.\n\n421\n00:23:59,340 --> 00:24:00,751\nYeah, so that's done in the BIOS.\n\n422\n00:24:00,751 --> 00:24:06,066\nNow we do have a PC set up here, and\nI believe after the break we will We'll\n\n423\n00:24:06,066 --> 00:24:11,382\nget in and fire this guy up and we'll\nshow where that BIOS setting is at and\n\n424\n00:24:11,382 --> 00:24:15,620\nstart actually installing\nwhen we get to that point.\n\n425\n00:24:15,620 --> 00:24:19,110\n>> Cuz we do wanna run with the idea of\na Windows operating system on here so\n\n426\n00:24:19,110 --> 00:24:21,250\nwe want to make sure that\nthat's gonna be enabled.\n\n427\n00:24:21,250 --> 00:24:24,180\nSo when we get into the part where we\nbegin the installation process we'll\n\n428\n00:24:24,180 --> 00:24:28,020\ncheck out the BIOS and\nactually see where those features are.\n\n429\n00:24:28,020 --> 00:24:30,520\nJust about any machine, like I said,\nwhether it's server product, and\n\n430\n00:24:30,520 --> 00:24:33,740\njust about every PC, I'm not gonna\ntell every single one does, but\n\n431\n00:24:33,740 --> 00:24:37,590\njust about every single one today does\nallow you the ability to do some of that\n\n432\n00:24:37,590 --> 00:24:40,420\nvirtualization and the assistance there.\n\n433\n00:24:40,420 --> 00:24:43,890\nSo, you can actually see it, most of\nthe time it's disabled on most desk top\n\n434\n00:24:43,890 --> 00:24:46,195\ncomputers, though,\nif you're going to be doing this.\n\n435\n00:24:46,195 --> 00:24:47,050\n>> Mm-hm.\n\n436\n00:24:47,050 --> 00:24:47,760\n>> Yep.\n\n437\n00:24:47,760 --> 00:24:53,590\n>> All right, Ronnie, anything else left\nwith our basic overview of virtualization,\n\n438\n00:24:53,590 --> 00:24:57,890\nkind of what it is, how it works,\nwhy would we need to use it, and\n\n439\n00:24:57,890 --> 00:25:00,410\nkind of what we need on our PC to use it.\n\n440\n00:25:00,410 --> 00:25:04,480\n>> Well, just a little bit in terms\nof what we need to make sure of.\n\n441\n00:25:04,480 --> 00:25:08,750\nThe virtualization is\nsomething that every IT person\n\n442\n00:25:08,750 --> 00:25:11,410\nshould at least be familiar with.\n\n443\n00:25:11,410 --> 00:25:12,130\nOkay.\n\n444\n00:25:12,130 --> 00:25:14,610\nSo don't just say I'm\na desktop support technician.\n\n445\n00:25:14,610 --> 00:25:16,220\nI'll never have to worry about it.\n\n446\n00:25:16,220 --> 00:25:19,140\nThe environment that you'll be working\nwith will be supporting some type of\n\n447\n00:25:19,140 --> 00:25:20,450\nvirtualization.\n\n448\n00:25:20,450 --> 00:25:22,640\nNow, you may actually end\nup wondering at times,\n\n449\n00:25:22,640 --> 00:25:25,570\nwhen would I ever see that as\na desktop support technician?\n\n450\n00:25:25,570 --> 00:25:29,500\nWell, even though we're talking about\nthe idea of server virtualization here,\n\n451\n00:25:29,500 --> 00:25:34,590\nyou will run into what we call a virtual\ndesktop environment as well, where\n\n452\n00:25:34,590 --> 00:25:39,620\nyou imagine having a PC or what we call\na thin client and the actual people that\n\n453\n00:25:39,620 --> 00:25:43,215\nare sitting there using that workstation,\nthey're actually connecting to the server.\n\n454\n00:25:43,215 --> 00:25:46,515\nAnd they might have their own virtual\nmachine that they're connecting to and\n\n455\n00:25:46,515 --> 00:25:48,195\nthat's where you're actually\ngoing to see the support.\n\n456\n00:25:48,195 --> 00:25:51,830\nSo, don't just think because I'm\nsupporting just regular desktop or\n\n457\n00:25:51,830 --> 00:25:55,430\nN-users you don't have to worry about it,\nyou may actually have to do that.\n\n458\n00:25:55,430 --> 00:25:59,070\nSo it's better that you at least\nhave a concept and understanding\n\n459\n00:25:59,070 --> 00:26:02,350\nof what it is that we're gonna be\nshowing you and how it actually works.\n\n460\n00:26:02,350 --> 00:26:04,810\nEven if you're never actually\ngonna be in there configuring and\n\n461\n00:26:04,810 --> 00:26:09,160\nmastering it, it does help if you at\nleast are familiar with the technology,\n\n462\n00:26:09,160 --> 00:26:11,530\nbecause this is what you're\ngonna face in the real world.\n\n463\n00:26:11,530 --> 00:26:14,130\n>> Now as far as those N-users go Ronnie,\n\n464\n00:26:14,130 --> 00:26:19,380\nyou mentioned working with the virtual\ndesktop and with the thin clients.\n\n465\n00:26:19,380 --> 00:26:24,410\nNow here in the center we have rolled\nout a good number of thin clients,\n\n466\n00:26:24,410 --> 00:26:29,410\nreplaced a lot of aging Dell\ndesktop towers that we have with\n\n467\n00:26:29,410 --> 00:26:32,660\nthese thin clients,\nSome servers back there that host it.\n\n468\n00:26:32,660 --> 00:26:34,860\nNow as far as the N-users go right?\n\n469\n00:26:34,860 --> 00:26:37,570\nThe people that are working\non this thin client.\n\n470\n00:26:37,570 --> 00:26:40,770\nWhen they turn it on, right,\nit automatically makes that connection\n\n471\n00:26:40,770 --> 00:26:44,760\nto the server and\nthey start their remote desktop there.\n\n472\n00:26:44,760 --> 00:26:47,820\nAs far as the N-users go it\nlooks the exact same whether it\n\n473\n00:26:47,820 --> 00:26:51,790\nwith a stand alone PC or\nwith a virtualized environment.\n\n474\n00:26:51,790 --> 00:26:54,090\n>> Yeah, they'll never know really\nthe difference if you tell them.\n\n475\n00:26:54,090 --> 00:26:55,620\nAnd even if you tell them,\n\n476\n00:26:55,620 --> 00:26:58,420\nthey'll not be able to experience\nthe difference the majority of the time.\n\n477\n00:26:58,420 --> 00:27:02,090\nSo virtualization is coming and you're\nactually gonna see it more and more.\n\n478\n00:27:02,090 --> 00:27:06,220\nSo don't shy away from it just because\nyou say I'm never gonna get that level.\n\n479\n00:27:06,220 --> 00:27:07,690\nLearn it, take a look at it, and\n\n480\n00:27:07,690 --> 00:27:10,270\nkinda realize what's actually\nhappening in the background.\n\n481\n00:27:10,270 --> 00:27:14,230\n>> Yeah, and\nyou can virtualize switches and\n\n482\n00:27:14,230 --> 00:27:17,980\nvirtualize an entire\nlittle network altogether.\n\n483\n00:27:17,980 --> 00:27:19,640\n>> Pretty fancy stuff.\n\n484\n00:27:19,640 --> 00:27:20,812\nAll right, well good deal.\n\n485\n00:27:20,812 --> 00:27:22,390\nWell, we are up here on break time.\n\n486\n00:27:22,390 --> 00:27:25,970\nWhen we come back we'll get\nthis XenServer thing installed.\n\n487\n00:27:25,970 --> 00:27:29,100\nAnd we can whip up some virtual\nmachines and take a look at that stuff.\n\n488\n00:27:29,100 --> 00:27:29,630\n>> Sounds great.\n\n489\n00:27:29,630 --> 00:27:31,075\n>> Sweet.\nWe'll get to all that\n\n490\n00:27:31,075 --> 00:27:32,183\nstuff after the break.\n\n491\n00:27:32,183 --> 00:27:38,830\n>> [MUSIC]\n\n492\n00:27:38,830 --> 00:27:39,740\n>> I was going to say hey.\n\n493\n00:27:39,740 --> 00:27:41,860\n>> All right, welcome back.\n\n494\n00:27:41,860 --> 00:27:43,090\nAll right, so where we left off,\n\n495\n00:27:43,090 --> 00:27:46,790\nwe were talking about virtualization and\nwhat it is.\n\n496\n00:27:46,790 --> 00:27:48,250\nWhy would we want it?\n\n497\n00:27:48,250 --> 00:27:50,920\nWhat kind of things can we use it for?\n\n498\n00:27:50,920 --> 00:27:56,010\nSo now we're going to get into\nXenServer and get it installed.\n\n499\n00:27:56,010 --> 00:27:58,350\nAnd get a bit more, what is it?\n\n500\n00:27:58,350 --> 00:28:01,650\nHow do we use it,\nstuff centered around XenServer.\n\n501\n00:28:01,650 --> 00:28:02,580\n>> Yep.\nAll right,\n\n502\n00:28:02,580 --> 00:28:06,920\nso when we start talking about the idea\nof choosing a virtualization technology,\n\n503\n00:28:06,920 --> 00:28:09,060\nXenServer is the one that we chose.\n\n504\n00:28:09,060 --> 00:28:11,280\nAnd there's a big reason why\nwe actually chose it here.\n\n505\n00:28:11,280 --> 00:28:14,650\nSo all my computer screen, let me show you\nthe big reason why we actually chose it.\n\n506\n00:28:16,380 --> 00:28:17,090\nThere it is.\n\n507\n00:28:17,090 --> 00:28:17,630\n>> It's free.\n\n508\n00:28:17,630 --> 00:28:18,780\n>> It's free, yep.\n\n509\n00:28:18,780 --> 00:28:22,964\nSo with XenServer, right, there's a lot\nof products that are actually free for\n\n510\n00:28:22,964 --> 00:28:25,940\nus, but XenServer is absolutely 100% free.\n\n511\n00:28:25,940 --> 00:28:28,990\nNow, they use to have different levels\nthat you actually would end up buying\n\n512\n00:28:28,990 --> 00:28:33,930\ninto, but since XenServer has now\nbecome part of a open source project,\n\n513\n00:28:33,930 --> 00:28:36,030\nthey again follow that same model.\n\n514\n00:28:36,030 --> 00:28:41,630\nSo the product itself is free,\nbut if you need 24 hour support,\n\n515\n00:28:41,630 --> 00:28:45,300\nand you need to have their ability to do\nall the things that they need to do to\n\n516\n00:28:45,300 --> 00:28:48,650\nsupport you, that's where they\nactually charge you money for it.\n\n517\n00:28:48,650 --> 00:28:51,672\nBut you yourself can actually\ngo right here to XenServer or\n\n518\n00:28:51,672 --> 00:28:55,500\nto citrix.com under the products there and\nXenServer and\n\n519\n00:28:55,500 --> 00:28:58,700\ndownload this, you'll have to register and\nthen they'll send you a link and\n\n520\n00:28:58,700 --> 00:29:02,400\nyou can download it immediately and\nget it ready to go.\n\n521\n00:29:02,400 --> 00:29:06,170\nNow XenServer's one of these\nunusual products here that we have.\n\n522\n00:29:06,170 --> 00:29:10,210\nA lot times today, in today's world in\nwhich we don't really have a lot of\n\n523\n00:29:10,210 --> 00:29:14,730\noptical drives to actually do anything\nwith, we normally can go ahead and\n\n524\n00:29:14,730 --> 00:29:19,260\nburn that ISO that we get from\nXenServer onto a USB key, Nate,\n\n525\n00:29:19,260 --> 00:29:21,280\nhow successful was that when you tried it?\n\n526\n00:29:21,280 --> 00:29:21,880\n>> Oh, which one?\n\n527\n00:29:21,880 --> 00:29:23,610\nOh, from the USB key?\n\n528\n00:29:23,610 --> 00:29:24,200\n>> Yeah.\n\n529\n00:29:24,200 --> 00:29:25,070\n>> Yeah, not much.\n\n530\n00:29:25,070 --> 00:29:29,010\nAlthough I didn't spend a whole heck of\na lot of time with everything else you\n\n531\n00:29:29,010 --> 00:29:32,780\nthrow in a USB key, you boot from it,\nit works, but every time,\n\n532\n00:29:32,780 --> 00:29:38,440\nyeah I tried to do it with the XenServer,\nit froze, it froze and nothing happened.\n\n533\n00:29:38,440 --> 00:29:41,280\n>> Yeah, they still kinda rely on\nthis most basic of hardware, so\n\n534\n00:29:41,280 --> 00:29:45,840\nthey do recommend that if you're going to\ndo this and install it on to a regular\n\n535\n00:29:45,840 --> 00:29:50,870\ncomputer here, or a server, that you do\ngo out and burn the ISO to a disk, and\n\n536\n00:29:50,870 --> 00:29:54,560\nwe went ahead and did that and\nwe put that into our machine as well.\n\n537\n00:29:54,560 --> 00:29:58,610\nNow when we start actually the install\nprocess here, remember that for\n\n538\n00:29:58,610 --> 00:30:01,870\nus the hardware, really just\nanything in the last three years,\n\n539\n00:30:01,870 --> 00:30:04,880\nthe thing that we're really\nconcerned about is whether or\n\n540\n00:30:04,880 --> 00:30:07,590\nnot we're actually going to be in an\nenvironment where we're gonna be running\n\n541\n00:30:07,590 --> 00:30:11,850\nmultiple XenServers as the host and\nwhere we're running a stand alone.\n\n542\n00:30:11,850 --> 00:30:13,480\nWe're just going to do\na single stand alone,\n\n543\n00:30:13,480 --> 00:30:16,730\nand that's when the minimum\nhardware requirements do matter\n\n544\n00:30:16,730 --> 00:30:21,860\nbecause we want to run the idea of\nWindows server machines to do this.\n\n545\n00:30:21,860 --> 00:30:22,520\nOkay.\n\n546\n00:30:22,520 --> 00:30:26,230\nWe want to make sure that what we have\naccess to, of course, are our Windows\n\n547\n00:30:26,230 --> 00:30:32,010\nserver ISOs that we need, and\nI may actually have to do that, and then\n\n548\n00:30:32,010 --> 00:30:36,600\nwe also want to make sure of course that\nwe can install those operating systems.\n\n549\n00:30:36,600 --> 00:30:39,720\nSo we gotta make sure that\nthe virtualization assist is turned on.\n\n550\n00:30:39,720 --> 00:30:42,510\nWe need hard drive space,\nplenty of hard drive space, and\n\n551\n00:30:42,510 --> 00:30:44,580\nwe need as much RAM as we can have so\n\n552\n00:30:44,580 --> 00:30:48,430\nthat each individual machine can actually\ntake up the RAM that they will need.\n\n553\n00:30:48,430 --> 00:30:52,020\nSo even though minimally, all we need\nis really what would run on Linux,\n\n554\n00:30:52,020 --> 00:30:55,610\nthe very problems is that we're gonna be\nrunning virtual machines off this device,\n\n555\n00:30:55,610 --> 00:30:59,240\nwe need as much hard drive space, we need\nas much RAM as possible, and of course,\n\n556\n00:30:59,240 --> 00:31:00,440\nthe better the processor,\n\n557\n00:31:00,440 --> 00:31:03,060\nthe more number of processors,\nthe better it's gonna be as well.\n\n558\n00:31:04,430 --> 00:31:06,210\nSo what have we done?\n\n559\n00:31:06,210 --> 00:31:08,770\nWe went ahead and\ntried to get our machine set up here so\n\n560\n00:31:08,770 --> 00:31:10,600\nthat we can show you what we need to.\n\n561\n00:31:10,600 --> 00:31:12,190\nSo the install process\nthat we wanted to do,\n\n562\n00:31:12,190 --> 00:31:14,610\nwas we wanted to verify since\nwe're gonna be using or\n\n563\n00:31:14,610 --> 00:31:19,240\ninstalling Windows Server 2012 and\nmaybe a Windows 8 virtual machine here,\n\n564\n00:31:19,240 --> 00:31:22,310\nis that we do have a machine that will\nsupport the hardware virtualization.\n\n565\n00:31:22,310 --> 00:31:23,610\nRight, Nate?\n>> Mm-hm.\n\n566\n00:31:23,610 --> 00:31:24,170\nYep.\nSo\n\n567\n00:31:24,170 --> 00:31:26,590\nwe've got this machine over\nhere on the ground and\n\n568\n00:31:26,590 --> 00:31:28,300\nwe've got a little monitor set up here.\n\n569\n00:31:28,300 --> 00:31:32,050\nSo we can't leverage our\nscreen sharing software, so\n\n570\n00:31:32,050 --> 00:31:36,760\nwe have to use this overhead cam to shoot\nit which doesn't look too bad this time.\n\n571\n00:31:36,760 --> 00:31:41,132\nAll right, so\nwe mentioned that AMD-V the Intel-VT,\n\n572\n00:31:41,132 --> 00:31:45,870\nvirtualization that we can get into\nthe BIOS and so we'll go ahead and\n\n573\n00:31:45,870 --> 00:31:47,740\nshow that on this particular machine.\n\n574\n00:31:47,740 --> 00:31:50,090\nThis is a Dell 960.\n\n575\n00:31:50,090 --> 00:31:53,590\nNow different bosses,\nthey'll be in different places.\n\n576\n00:31:53,590 --> 00:31:55,515\nThey'll look different, so\n\n577\n00:31:55,515 --> 00:31:59,450\nthis one is just merely an example\nof this particular model.\n\n578\n00:31:59,450 --> 00:32:05,216\nBut then scrolling on down here,\ninto virtualization, Support.\n\n579\n00:32:05,216 --> 00:32:07,656\nAll right so we have this right here,\n\n580\n00:32:07,656 --> 00:32:11,290\nthe Intel Virtualization Technology,\nthe Intel VT.\n\n581\n00:32:11,290 --> 00:32:14,350\nIt is on and enabled.\n\n582\n00:32:14,350 --> 00:32:16,655\nAnd then we have this other stuff here.\n\n583\n00:32:16,655 --> 00:32:20,510\nSo that is enabled and our little\ntrusted execution, it turned off, but\n\n584\n00:32:20,510 --> 00:32:21,640\nI think we'll be fine.\n\n585\n00:32:21,640 --> 00:32:24,150\n>> Yeah, so\nremember what this is actually doing.\n\n586\n00:32:24,150 --> 00:32:27,520\nIt's allowing, essentially, the hypervisor\nto be able to plug directly in here and\n\n587\n00:32:27,520 --> 00:32:34,020\nsee this, and report the actual\ntrue hardware that we have.\n\n588\n00:32:34,020 --> 00:32:36,740\nSo in the early days\nof the virtualization,\n\n589\n00:32:36,740 --> 00:32:38,300\nwe could actually turn that off.\n\n590\n00:32:38,300 --> 00:32:41,960\nAnd what would end up happening\non a type two hypervisor,\n\n591\n00:32:41,960 --> 00:32:44,490\nis that it would emulate\nwhatever hardware it chose.\n\n592\n00:32:44,490 --> 00:32:46,917\nSo like,\nthe very first one that I ever did, Nate,\n\n593\n00:32:46,917 --> 00:32:48,671\nwas actually one called Virtual PC.\n\n594\n00:32:48,671 --> 00:32:50,064\nIt wasn't even the 2007.\n\n595\n00:32:50,064 --> 00:32:52,990\nIt was whatever number\nit was at that point.\n\n596\n00:32:52,990 --> 00:32:57,490\nSo when you install the operating system\nin that, in the level two hypervisor here,\n\n597\n00:32:57,490 --> 00:33:01,290\nit would report like an 800MHz processor,\nand\n\n598\n00:33:01,290 --> 00:33:07,450\nsome generic PRO 10 or\nPRO 100 nic is what it would report.\n\n599\n00:33:07,450 --> 00:33:09,590\nAnd then whatever mountain\nof RAM we actually had.\n\n600\n00:33:09,590 --> 00:33:14,170\nSo, it would emulate somebody's hardware,\nbut not this hardware.\n\n601\n00:33:14,170 --> 00:33:15,410\nThis is actually what tells it,\n\n602\n00:33:15,410 --> 00:33:19,200\nhey, here's the processor that's\non this particular computer.\n\n603\n00:33:19,200 --> 00:33:20,740\nHere's the actual RAM that we have.\n\n604\n00:33:20,740 --> 00:33:23,690\nHere's everything that actually\nis this particular machine.\n\n605\n00:33:24,690 --> 00:33:29,310\nSo that way, the virtualization again,\nwhen we do install the operating system,\n\n606\n00:33:29,310 --> 00:33:33,130\nit really does actually think that\nit's really on the actual hardware.\n\n607\n00:33:33,130 --> 00:33:37,030\nSo, that's why it's important here,\nand the Windows newer servers and\n\n608\n00:33:37,030 --> 00:33:40,000\nnewer operating systems\nreally do need this support.\n\n609\n00:33:40,000 --> 00:33:42,270\nSo the good thing is,\nwe've got it enabled here.\n\n610\n00:33:42,270 --> 00:33:43,410\nLinux really doesn't care.\n\n611\n00:33:43,410 --> 00:33:45,824\nSo, whether we have it enabled or\nnot, it's not gonna really matter.\n\n612\n00:33:45,824 --> 00:33:46,860\n>> [LAUGH]\n>> As what we have.\n\n613\n00:33:46,860 --> 00:33:49,844\nNow, don't get me wrong, some of them\nprobably do care but, at least for\n\n614\n00:33:49,844 --> 00:33:51,978\nour sake,\nthey really don't matter at this point.\n\n615\n00:33:51,978 --> 00:33:56,262\n>> All right so\nnow looking at that, what's next?\n\n616\n00:33:56,262 --> 00:33:58,628\nAre we ready to install this guy?\n\n617\n00:33:58,628 --> 00:33:59,510\n>> Just about, right?\n\n618\n00:33:59,510 --> 00:34:02,410\nSo, the only thing that we need, right,\nis that we need to make sure that we have\n\n619\n00:34:02,410 --> 00:34:08,420\nthat CD burned, or\nthe XenServer disk burned to a CD, and\n\n620\n00:34:08,420 --> 00:34:13,310\nall we have to do is actually pop it in\nto the CD and reboot the computer, okay?\n\n621\n00:34:13,310 --> 00:34:16,280\nSo, the good thing is we've already got\nin there, all we gotta do now Nate,\n\n622\n00:34:16,280 --> 00:34:20,600\nis, let's reboot this thing and\nsee the next step in the process here.\n\n623\n00:34:20,600 --> 00:34:21,768\nSee if it shows up in German.\n\n624\n00:34:21,768 --> 00:34:23,320\n>> [LAUGH]\n>> And then.\n\n625\n00:34:23,320 --> 00:34:24,170\nHere we go.\nI'm\n\n626\n00:34:24,170 --> 00:34:27,510\npicking on Nate cuz one of the things that\nwe did is something that actually ended up\n\n627\n00:34:27,510 --> 00:34:30,700\nshowing up in German on our screen and\nwe're like, how did it do that?\n\n628\n00:34:30,700 --> 00:34:31,430\nWe had no clue.\n\n629\n00:34:33,200 --> 00:34:36,600\n>> All right, so\nwe get up into our little boot menu here.\n\n630\n00:34:36,600 --> 00:34:42,594\nSo we'll choose to boot off of that\nCD ROM with our XenServer CD in there.\n\n631\n00:34:42,594 --> 00:34:45,200\nAnd from there, there we go.\n\n632\n00:34:45,200 --> 00:34:48,210\nIt is starting to load all\nits neat little stuff up.\n\n633\n00:34:48,210 --> 00:34:50,580\n>> Yep.\nIt's essentially loading in the idea of\n\n634\n00:34:50,580 --> 00:34:53,810\nthe Linux ISO right on here.\n\n635\n00:34:53,810 --> 00:34:56,330\nAnd now, notice it gives you\na nice little welcome menu.\n\n636\n00:34:56,330 --> 00:34:58,700\nAnd you see it's actually\nbeginning the loading process and\n\n637\n00:34:58,700 --> 00:35:01,920\nit's installing the basics\nof Citrix XenServer.\n\n638\n00:35:01,920 --> 00:35:02,455\nOkay.\n\n639\n00:35:02,455 --> 00:35:03,890\nAnd we start doing this.\n\n640\n00:35:03,890 --> 00:35:07,930\nAnd there it is, writing everything onto\nthe drive that it needs to take a look\n\n641\n00:35:07,930 --> 00:35:12,400\nfinding all of the different\nsupport in terms of hardware.\n\n642\n00:35:14,050 --> 00:35:17,200\nSo Nate do you remember what was\nthe first virtualization technology that\n\n643\n00:35:17,200 --> 00:35:17,710\nyou were using?\n\n644\n00:35:18,730 --> 00:35:22,110\n>> Yeah, you know there's just so\nmany, my heart lies with Hyper-V.\n\n645\n00:35:22,110 --> 00:35:22,660\n>> Hyper-V.\n\n646\n00:35:23,720 --> 00:35:28,000\n>> Yeah, so I'll continue that story,\nhere in a minute, but we are up here now.\n\n647\n00:35:28,000 --> 00:35:29,180\n>> Oh there we go, nice.\n\n648\n00:35:29,180 --> 00:35:31,654\n>> All right, so\nhere on our keymap, all right so\n\n649\n00:35:31,654 --> 00:35:34,970\nwell just keep with our\nstandard US qwerty keyboard.\n\n650\n00:35:34,970 --> 00:35:36,400\n>> Yep.\n\n651\n00:35:36,400 --> 00:35:37,694\n>> All right, Ryan,\nyou want to talk us through this?\n\n652\n00:35:37,694 --> 00:35:41,780\n>> Yeah, so the good thing is\nthe setup is actually not difficult.\n\n653\n00:35:41,780 --> 00:35:44,980\nBut you do wanna slow down\nthrough these menus here,\n\n654\n00:35:44,980 --> 00:35:46,880\nwhen you start doing this, okay?\n\n655\n00:35:46,880 --> 00:35:50,230\nAnd the reason why I'm telling\nyou is not because I'm\n\n656\n00:35:50,230 --> 00:35:54,180\nneeding you to read everything, but there\nare a couple of options in here we wanna\n\n657\n00:35:54,180 --> 00:35:58,420\nmake sure that you do get access to and\nthat you do know what's going on.\n\n658\n00:35:58,420 --> 00:36:02,660\nSo here it just tells us that at this\npoint, if we had a RAID array, and\n\n659\n00:36:02,660 --> 00:36:04,590\nit didn't show up on the install,\n\n660\n00:36:04,590 --> 00:36:07,480\nthis is the point where we\nactually load our drivers in.\n\n661\n00:36:07,480 --> 00:36:12,085\nSo you need your drivers maybe on\na USB key, or, even worse, right,\n\n662\n00:36:12,085 --> 00:36:16,020\nyou might actually have to burn them\nto a CD to gain access to them.\n\n663\n00:36:16,020 --> 00:36:17,255\n>> [LAUGH]\n>> Hopefully not,\n\n664\n00:36:17,255 --> 00:36:18,857\nbut it is very possible here.\n\n665\n00:36:18,857 --> 00:36:21,725\nSo if your hard drive doesn't show\nup when you go through and say,\n\n666\n00:36:21,725 --> 00:36:26,240\nhey, what hard drive I wanna install\nthis onto, you may have to reboot again,\n\n667\n00:36:26,240 --> 00:36:29,835\ncome to this point here, and load\nthose drivers in, so do pay attention.\n\n668\n00:36:29,835 --> 00:36:34,840\n>> Yeah, and at this point here, so\nnot only those RAID controllers,\n\n669\n00:36:34,840 --> 00:36:40,000\nbut any nonstandard hardware,\nkinda a general term.\n\n670\n00:36:40,000 --> 00:36:43,600\nSo, chances are it'd just be some\nkind of a RAID controller or\n\n671\n00:36:43,600 --> 00:36:44,415\nsomething of that sort.\n\n672\n00:36:44,415 --> 00:36:49,890\nBut any kind of non-standard hardware\nthat isn't being detected that is\n\n673\n00:36:49,890 --> 00:36:54,420\ncritical to installing this is,\nhere we go, load the drivers for it.\n\n674\n00:36:54,420 --> 00:36:58,130\n>> Now, the other thing to be aware of,\nright, is the last sentence in that first\n\n675\n00:36:58,130 --> 00:37:00,855\nparagraph Nate,\nis the one to be aware of, right?\n\n676\n00:37:00,855 --> 00:37:03,514\n>> Mm-hm.\n>> Installing XenServer will erase all\n\n677\n00:37:03,514 --> 00:37:06,602\nthe data on the disk selected for\nusage here.\n\n678\n00:37:06,602 --> 00:37:08,010\nSo in other words,\n\n679\n00:37:08,010 --> 00:37:12,280\ndon't grab Nate's machines that he's\ndoing all these different things on.\n\n680\n00:37:12,280 --> 00:37:13,280\nHe may not appreciate\n\n681\n00:37:13,280 --> 00:37:15,780\nif you delete everything that\nhe's actually running there.\n\n682\n00:37:15,780 --> 00:37:19,540\nYou want to grab one that\nyou actually can say,\n\n683\n00:37:19,540 --> 00:37:23,520\nI don't mind if this\nparticular machine gets hosed.\n\n684\n00:37:23,520 --> 00:37:25,530\nThis is what we're really\ntalking about here.\n\n685\n00:37:25,530 --> 00:37:27,300\nSo make sure you do that.\n\n686\n00:37:27,300 --> 00:37:31,380\nIt's a big warning but you know, a lot\nof times if I were doing this, right,\n\n687\n00:37:31,380 --> 00:37:35,210\nI would say, maybe we should have\nhighlighted that one in red so\n\n688\n00:37:35,210 --> 00:37:36,980\nthat you actually understand.\n\n689\n00:37:36,980 --> 00:37:40,030\nCuz some people might just go,\nyou know what, I don't really care.\n\n690\n00:37:40,030 --> 00:37:41,640\nAnd just keep clicking through.\n\n691\n00:37:41,640 --> 00:37:44,270\nNate's not one of those, are you?\n\n692\n00:37:44,270 --> 00:37:44,972\nYou just click through?\n\n693\n00:37:44,972 --> 00:37:46,220\nDo you read every single message?\n\n694\n00:37:46,220 --> 00:37:47,360\n>> Generally a lot of times,\n\n695\n00:37:47,360 --> 00:37:51,482\nI probably would have been in\nthe install process at this point.\n\n696\n00:37:51,482 --> 00:37:53,488\n>> [LAUGH]\n>> Instead of on this first screen.\n\n697\n00:37:53,488 --> 00:37:55,510\n>> [LAUGH]\n>> It's a terrible habit.\n\n698\n00:37:55,510 --> 00:38:01,350\nBut I've put a lot of trust\nin default selections.\n\n699\n00:38:01,350 --> 00:38:03,920\nJust like, next, next, next,\nokay, okay, next, next.\n\n700\n00:38:03,920 --> 00:38:05,030\n>> And then oops.\n\n701\n00:38:05,030 --> 00:38:06,890\n>> Yeah, like, wait, why isn't this?\n\n702\n00:38:06,890 --> 00:38:10,770\n>> [LAUGH] All right, so let's go\nahead and press Ok at this point here.\n\n703\n00:38:10,770 --> 00:38:12,101\nNow of course, Nate,\n\n704\n00:38:12,101 --> 00:38:14,739\nyou would absolutely read every single-\n>> Next.\n\n705\n00:38:14,739 --> 00:38:16,680\n[LAUGH]\n>> One of these things here.\n\n706\n00:38:16,680 --> 00:38:19,310\nAnd now, this Is kinda the big\ndifference between what we saw\n\n707\n00:38:19,310 --> 00:38:22,410\nin terms of the hardware, right?\n\n708\n00:38:22,410 --> 00:38:24,910\nSo when we take a look at\nthe ID of the hard drives,\n\n709\n00:38:24,910 --> 00:38:29,710\nin Linux they actually reported\nas these SDA, SDB things here.\n\n710\n00:38:29,710 --> 00:38:32,680\nAnd Nate, looks like we actually have a\ncouple of hard drives that are essentially\n\n711\n00:38:32,680 --> 00:38:33,920\nidentical for us.\n\n712\n00:38:33,920 --> 00:38:37,820\nSo it's saying, hey, which of these hard\ndrives do we want to install this on here?\n\n713\n00:38:37,820 --> 00:38:40,555\nIt says disk with insufficient\nspace is not shown, so\n\n714\n00:38:40,555 --> 00:38:42,960\nif you don't have enough hard drive space,\nit's not gonna allow us.\n\n715\n00:38:42,960 --> 00:38:44,680\nLet's just choose that first one.\n\n716\n00:38:44,680 --> 00:38:47,750\nIt looks identical at this point here.\n\n717\n00:38:47,750 --> 00:38:49,301\nNow it gives us an option, though,\n\n718\n00:38:49,301 --> 00:38:52,180\nin terms of where are we gonna\nstore the virtual machines.\n\n719\n00:38:52,180 --> 00:38:52,830\nOkay?\n\n720\n00:38:52,830 --> 00:38:54,710\nWell, a better performance benefit for us,\n\n721\n00:38:54,710 --> 00:38:57,320\nof course,\nwould be to put our virtuals on to what?\n\n722\n00:38:57,320 --> 00:38:58,330\nAnother disk.\n\n723\n00:38:58,330 --> 00:39:00,710\nThat way we can access one without\n\n724\n00:39:00,710 --> 00:39:04,200\nhaving to actually worry\nabout the XenServer itself.\n\n725\n00:39:04,200 --> 00:39:05,800\nSo, yeah, we can select [b].\n\n726\n00:39:05,800 --> 00:39:06,550\nThat will work.\n\n727\n00:39:07,558 --> 00:39:10,560\nSo, what Nate's doing here is he's\nusing the arrow keys and the selection,\n\n728\n00:39:10,560 --> 00:39:13,060\nof course, is the space bar,\nis what he's doing.\n\n729\n00:39:13,060 --> 00:39:16,420\nSo, let's see, which disk,\njust select one or the other.\n\n730\n00:39:18,200 --> 00:39:19,190\nYeah there we go.\n\n731\n00:39:19,190 --> 00:39:24,280\n>> But we will have 149 GB just hanging\nit out if we don't use it for anything.\n\n732\n00:39:24,280 --> 00:39:26,620\n>> Oh dear, yeah,\nyou can install, okay, go ahead.\n\n733\n00:39:26,620 --> 00:39:29,772\nNate's having to-\n>> Okay, you made the call,\n\n734\n00:39:29,772 --> 00:39:31,040\nall right that works.\n\n735\n00:39:32,140 --> 00:39:34,860\n>> Now, if we were gonna\nbe using XenDesktop, again,\n\n736\n00:39:34,860 --> 00:39:37,260\nthat virtual desktop environment,\nthat would be one thing.\n\n737\n00:39:37,260 --> 00:39:40,640\nWe're not, so let's go ahead and\nclick Ok at this picker point.\n\n738\n00:39:41,920 --> 00:39:44,390\n>> All right, and so no thin provisioning.\n\n739\n00:39:44,390 --> 00:39:46,780\n>> I don't need any thin provisioning.\n\n740\n00:39:46,780 --> 00:39:47,795\nI'm thick enough.\n\n741\n00:39:47,795 --> 00:39:49,420\n>> [LAUGH]\n>> All right.\n\n742\n00:39:49,420 --> 00:39:52,161\nNow, notice that some or all of the disks\nyou selected to install XenServer, okay,\n\n743\n00:39:52,161 --> 00:39:54,222\ncontain parts of an LVM illogical volume,\nokay, group here.\n\n744\n00:39:54,222 --> 00:40:01,606\nProceeding with the installation will\ncause these volume groups to be deleted.\n\n745\n00:40:01,606 --> 00:40:03,579\nYou sure you want to do this here?\n\n746\n00:40:03,579 --> 00:40:05,657\nNot sure if I like it.\n\n747\n00:40:05,657 --> 00:40:06,227\nAll right.\n\n748\n00:40:06,227 --> 00:40:10,918\nNow, its gonna ask where in the world\nis the actual XenServer CD that\n\n749\n00:40:10,918 --> 00:40:15,380\nwe're installing from, so\nthe local media is what we have.\n\n750\n00:40:15,380 --> 00:40:18,520\nBut notice we can actually do\nthis from a website, right?\n\n751\n00:40:18,520 --> 00:40:21,740\nJust like a regular Linux install\nto actually be able to do that.\n\n752\n00:40:21,740 --> 00:40:23,470\nOr we have it on network file sharing.\n\n753\n00:40:23,470 --> 00:40:24,558\nWe can do that as well.\n\n754\n00:40:24,558 --> 00:40:28,820\n>> So the rest, what would\nnecessarily be the benefit of ACDP\n\n755\n00:40:28,820 --> 00:40:32,530\nas opposed to our current CD?\n\n756\n00:40:32,530 --> 00:40:35,910\n>> The only benefit is if we\nhad a lot of server drive.\n\n757\n00:40:35,910 --> 00:40:37,790\nDon't have to bring a CD\nto every single one.\n\n758\n00:40:37,790 --> 00:40:39,130\nI don't have to worry about it.\n\n759\n00:40:39,130 --> 00:40:42,500\nIf it's actually stored in one location,\nI can access it from across the network.\n\n760\n00:40:42,500 --> 00:40:44,280\nBe ready to go.\n\n761\n00:40:44,280 --> 00:40:48,730\n>> Could it be that our CD is out of date?\n\n762\n00:40:48,730 --> 00:40:51,060\nIf we go to ACDP or something like that.\n\n763\n00:40:51,060 --> 00:40:54,380\nWould it get the latest install stuff?\n\n764\n00:40:54,380 --> 00:40:58,130\n>> It may, but I don't really know for\nsure if this one actually works that way.\n\n765\n00:40:58,130 --> 00:40:59,990\nOr if you actually compile\nit in the same way.\n\n766\n00:40:59,990 --> 00:41:00,730\n>> Right.\n>> Yeah.\n\n767\n00:41:00,730 --> 00:41:01,230\n>> Sweet.\nOkay.\n\n768\n00:41:02,290 --> 00:41:03,180\nLocal media, are we go.\n\n769\n00:41:05,450 --> 00:41:06,980\nSearching for repository.\n\n770\n00:41:06,980 --> 00:41:07,720\n>> Yeah.\n\n771\n00:41:07,720 --> 00:41:10,860\nSo now is waiting and\nasking, hey, are we sure?\n\n772\n00:41:10,860 --> 00:41:16,640\nIn other words, does it find the actual\nCD where the XenServer install is?\n\n773\n00:41:16,640 --> 00:41:19,950\nIn terms of supplemental pacts,\nwe're not upgrading anything, so\n\n774\n00:41:19,950 --> 00:41:21,340\nat this point we're gonna select no.\n\n775\n00:41:23,740 --> 00:41:27,270\nNow, this is something that\nin a testing environment,\n\n776\n00:41:27,270 --> 00:41:32,630\nskipping verification is a thing\nthat we would always do.\n\n777\n00:41:33,680 --> 00:41:37,170\nSeriously, always in terms of testing\nbecause it's gonna take a long time.\n\n778\n00:41:37,170 --> 00:41:40,860\nIf I were setting this up for\na production environment.\n\n779\n00:41:40,860 --> 00:41:45,780\nIn other words, this is a server that I'm\ngonna be using for a year or two years,\n\n780\n00:41:45,780 --> 00:41:47,900\nthree years, whatever it's gonna be, and\n\n781\n00:41:47,900 --> 00:41:52,140\nthis is gonna be part of my\nvirtualization infrastructure.\n\n782\n00:41:52,140 --> 00:41:56,700\nI want to make sure that somewhere\nalong the line, I didn't miss anything.\n\n783\n00:41:56,700 --> 00:41:58,980\nSo, notice it gives us the idea to verify.\n\n784\n00:41:58,980 --> 00:42:02,210\nAnd again, it's going to ask you to\nrun a hash value and check it, and\n\n785\n00:42:02,210 --> 00:42:03,960\ndo all of that stuff for us.\n\n786\n00:42:03,960 --> 00:42:08,690\nAnd normally, in a production environment,\nyou absolutely wanna do this.\n\n787\n00:42:08,690 --> 00:42:10,130\nBut, I do have to warn you,\n\n788\n00:42:10,130 --> 00:42:15,430\nif may selects the wrong one,\nit's gonna take a bit of time.\n\n789\n00:42:15,430 --> 00:42:17,310\nIt may take hours.\n\n790\n00:42:17,310 --> 00:42:18,550\n>> Oh yeah?\nJust to check all that stuff?\n\n791\n00:42:18,550 --> 00:42:19,530\n>> To just check it.\n\n792\n00:42:19,530 --> 00:42:20,820\nIt may take hours.\n\n793\n00:42:20,820 --> 00:42:21,420\nIt does normally.\n\n794\n00:42:21,420 --> 00:42:22,510\nIt may take up to an hour.\n\n795\n00:42:22,510 --> 00:42:24,800\nI've seen it actually\ntake up to an hour here.\n\n796\n00:42:24,800 --> 00:42:28,670\nBut for us we're gonna skip the time here,\nin step.\n\n797\n00:42:29,740 --> 00:42:32,990\nVery important at this point of course,\nto specify a password.\n\n798\n00:42:32,990 --> 00:42:34,498\nSo just put in our lab password Nate.\n\n799\n00:42:37,597 --> 00:42:41,890\nOkay, all right, so notice it tells\nus in the parentheses at right.\n\n800\n00:42:41,890 --> 00:42:45,930\nThis is the password used when\nconnecting to the XenServer host.\n\n801\n00:42:45,930 --> 00:42:49,050\nWhich is this machine that we're\ninstalling it on from XenCenter.\n\n802\n00:42:49,050 --> 00:42:52,350\nNow this is the first time we've\nmentioned XenCenter here but\n\n803\n00:42:52,350 --> 00:42:57,370\nwhen we actually use like, HyperV when we\ndid that particular installation here.\n\n804\n00:42:57,370 --> 00:43:02,770\nWe were able to go directly to that server\nthat we had, log into the Windows machine,\n\n805\n00:43:02,770 --> 00:43:06,140\ngain access to the HyperV manager,\nthat was it.\n\n806\n00:43:06,140 --> 00:43:09,000\nBut when we finish with this,\nwe're not gonna be able to gain access.\n\n807\n00:43:09,000 --> 00:43:13,730\nWe can't actually do all the things\nI want to on here directly.\n\n808\n00:43:13,730 --> 00:43:16,640\nThe management console for\nus is not Hyper-V Manager.\n\n809\n00:43:16,640 --> 00:43:20,390\nThe management console for\nthe XenServer is what we call XenCenter,.\n\n810\n00:43:20,390 --> 00:43:23,240\nAnd you'll see that we're gonna install\nthat onto another machine is what we're\n\n811\n00:43:23,240 --> 00:43:24,500\ngonna do Okay?\n\n812\n00:43:24,500 --> 00:43:29,260\nSo at this point here, now that we have\neverything confirmed we're gonna do this.\n\n813\n00:43:29,260 --> 00:43:32,980\nNow, in terms of networking, if you\nknow of a static IP address that this\n\n814\n00:43:32,980 --> 00:43:36,690\nis gonna be set up, perfectly fine that\nwe go ahead and type all this stuff in.\n\n815\n00:43:36,690 --> 00:43:41,300\nBut if we don't know, using the automatic\nconfiguration will work for us.\n\n816\n00:43:41,300 --> 00:43:44,326\nLet's just go ahead and\ndo that because we can change it later.\n\n817\n00:43:44,326 --> 00:43:50,060\n>> Ryan, through this connection machine\nI did not connect any network to it.\n\n818\n00:43:50,060 --> 00:43:57,560\nSo why don't we send it statically and\nthen we'll connect it later, on the break.\n\n819\n00:43:57,560 --> 00:44:00,110\nI'll find a cord and do it.\n\n820\n00:44:00,110 --> 00:44:01,720\n>> All right.\n\n821\n00:44:01,720 --> 00:44:02,240\n>> All right.\nSo\n\n822\n00:44:02,240 --> 00:44:06,230\nI am pretty sure I know what\nnetwork we're gonna listen to.\n\n823\n00:44:06,230 --> 00:44:06,730\n>> Yep.\n\n824\n00:44:07,730 --> 00:44:08,670\n>> And so we're gonna call this 206.\n\n825\n00:44:08,670 --> 00:44:11,500\nI'm pretty sure that one is not in use.\n\n826\n00:44:11,500 --> 00:44:14,930\n>> If not, we could probably do\nthat 29 that is was or something.\n\n827\n00:44:14,930 --> 00:44:18,400\nOr whatever that's, I don't even know\nif that's actually the right one.\n\n828\n00:44:18,400 --> 00:44:20,640\n>> Should we give it the gateway?\n\n829\n00:44:20,640 --> 00:44:21,750\nLet's go ahead and give it a gateway.\n\n830\n00:44:24,020 --> 00:44:24,870\n>> Alright.\n\n831\n00:44:24,870 --> 00:44:25,570\nPretty good.\n\n832\n00:44:25,570 --> 00:44:28,490\n>> Alright, go ahead and click okay.\n\n833\n00:44:28,490 --> 00:44:31,320\nAnd now, you do want to rename this thing.\n\n834\n00:44:31,320 --> 00:44:35,830\nI guarantee you, there's not an easy way\nto rename this except for right here.\n\n835\n00:44:35,830 --> 00:44:40,130\nYou can go into XenCenter all you want and\ntry and rename it is not gonna like it.\n\n836\n00:44:40,130 --> 00:44:41,660\nSo right here, this is what you wanna do.\n\n837\n00:44:41,660 --> 00:44:43,285\nSo Walt, you wanna just call it Xenserver?\n\n838\n00:44:43,285 --> 00:44:44,250\n>> Mm-hm.\n>> That'll work?\n\n839\n00:44:44,250 --> 00:44:45,300\n>> Sure.\n>> Okay.\n\n840\n00:44:45,300 --> 00:44:49,120\nAnd go ahead and\nset in our DNS server address as well.\n\n841\n00:44:50,130 --> 00:44:50,630\n>> Good enough.\n\n842\n00:44:52,170 --> 00:44:53,470\nYeah.\n>> Yeah, I think so.\n\n843\n00:44:53,470 --> 00:44:54,010\n>> Does that work?\n\n844\n00:44:54,010 --> 00:45:02,020\nAll right, of course, the geographic\narea for us is going to be America.\n\n845\n00:45:02,020 --> 00:45:04,140\nAnd you could scroll all the way down.\n\n846\n00:45:04,140 --> 00:45:05,900\nYou can type in an n to\nget to New York because\n\n847\n00:45:05,900 --> 00:45:09,040\nthat's where we are in\nthe Eastern Time Zone.\n\n848\n00:45:09,040 --> 00:45:12,560\nNow, the setting up of the time, right,\nwe want everything to be synchronized and\n\n849\n00:45:12,560 --> 00:45:14,400\ndo everything that we want to do here.\n\n850\n00:45:14,400 --> 00:45:18,750\nAnd if we are actually going\nbe using this across machines,\n\n851\n00:45:18,750 --> 00:45:20,450\nusing the network time\nserver as a way to go.\n\n852\n00:45:20,450 --> 00:45:21,720\nOr we can manually enter it then.\n\n853\n00:45:21,720 --> 00:45:24,300\nLet's just go ahead and\ndo the NTP at this point.\n\n854\n00:45:24,300 --> 00:45:26,620\nIt's not going to hurt us any.\n\n855\n00:45:26,620 --> 00:45:30,211\nNow on this one go ahead and\n\n856\n00:45:30,211 --> 00:45:34,470\ntype in 0.pool.mtp.org.\n\n857\n00:45:34,470 --> 00:45:37,690\nThere are different internet\ntime server that are out there.\n\n858\n00:45:37,690 --> 00:45:40,390\nIf this is going to be a stand\nalone host machine, which it is,\n\n859\n00:45:40,390 --> 00:45:42,600\nwe're not going to worry about\njoining it to a domain or anything.\n\n860\n00:45:42,600 --> 00:45:46,230\nWe want to be able to synchronize\nacross multiple XenServers here.\n\n861\n00:45:46,230 --> 00:45:49,570\nWe're gonna point them all to the same\nNTP servers, is what we're gonna do.\n\n862\n00:45:49,570 --> 00:45:51,110\nAnd this is one that's\nout on the internet.\n\n863\n00:45:54,187 --> 00:45:54,960\nAll right.\n\n864\n00:45:54,960 --> 00:45:58,840\nNow everything is actually collected and\nready to go at this point here.\n\n865\n00:45:58,840 --> 00:46:04,170\nGo ahead and it says, notice that the\nsecond paragraph, please confirm you wish\n\n866\n00:46:04,170 --> 00:46:10,800\nto proceed all data on both disks that\nwe've chosen are gonna be destroyed here.\n\n867\n00:46:10,800 --> 00:46:11,580\nOkay.\n\n868\n00:46:11,580 --> 00:46:15,084\n>> So remember if you thought you\nwere only installing this on 1 disc,\n\n869\n00:46:15,084 --> 00:46:15,950\nyou're wrong.\n\n870\n00:46:15,950 --> 00:46:19,000\nSo here it says it's gonna do it all.\n\n871\n00:46:19,000 --> 00:46:21,630\nLet's go ahead and\nlet it install at this point here.\n\n872\n00:46:21,630 --> 00:46:23,290\nIs what we're gonna do.\n\n873\n00:46:23,290 --> 00:46:26,030\nSo here is the installing process here.\n\n874\n00:46:26,030 --> 00:46:28,070\nIt's really not a big install.\n\n875\n00:46:28,070 --> 00:46:30,290\nIt doesn't take really\na lot of time at all.\n\n876\n00:46:30,290 --> 00:46:33,154\nYou already notice it's\nrunning at about 55%, 56%.\n\n877\n00:46:33,154 --> 00:46:35,500\nJust 55%,\nI thought it had changed here to 56%.\n\n878\n00:46:35,500 --> 00:46:37,630\n>> Just preparing.\n>> It's preparing for\n\n879\n00:46:37,630 --> 00:46:41,130\nthe installation here, so it's actually\nloading everything up into RAM.\n\n880\n00:46:41,130 --> 00:46:45,600\nAnd in a moment once it does it, notice it\njumped up there to 66% and it's now having\n\n881\n00:46:45,600 --> 00:46:48,450\nto go through and work and do all\nthe other things it's needing to do.\n\n882\n00:46:48,450 --> 00:46:50,480\n>> And it's also making some\nstrange beeping noises.\n\n883\n00:46:50,480 --> 00:46:51,730\n>> Yeah,\nit's making some strange beeping noise.\n\n884\n00:46:51,730 --> 00:46:54,360\n>> Back here maybe.\nAs part of the installation.\n\n885\n00:46:54,360 --> 00:46:57,590\n>> It shouldn't be, but\nwe'll see what happens here as well.\n\n886\n00:46:57,590 --> 00:46:59,070\nAll right.\n\n887\n00:46:59,070 --> 00:47:04,210\nSo here it goes, installing from whatever\nthe base is on the operating system, okay?\n\n888\n00:47:04,210 --> 00:47:06,010\nSo again,\nit's expanding everything out and\n\n889\n00:47:06,010 --> 00:47:08,490\nactually putting it on to\nthe hard drive itself.\n\n890\n00:47:08,490 --> 00:47:12,030\nAnd this is laying down\nthat hyper visor for us and\n\n891\n00:47:12,030 --> 00:47:15,280\na barely minimum management\nconsole when we get ready.\n\n892\n00:47:15,280 --> 00:47:19,460\nAnd verify that everything is actually\nworking for us as well, okay.\n\n893\n00:47:19,460 --> 00:47:22,160\nSo this process is probably just\ngonna take another couple of minutes\n\n894\n00:47:22,160 --> 00:47:23,180\nfor us here.\n\n895\n00:47:23,180 --> 00:47:25,790\nSo, it's actually not a bad time for\na break so\n\n896\n00:47:25,790 --> 00:47:27,930\nwe can get that network cable plugged in.\n\n897\n00:47:27,930 --> 00:47:29,160\n>> Oh yeah.\nThat's right.\n\n898\n00:47:29,160 --> 00:47:31,410\n>> And then we'll be ready to go.\n\n899\n00:47:31,410 --> 00:47:34,100\n>> Yeah, kind of zinging along,\nbut Ryan is right.\n\n900\n00:47:34,100 --> 00:47:37,220\nWe do have a few minutes left on break but\n\n901\n00:47:37,220 --> 00:47:40,480\nthis is a good stopping point so\nwe'll go ahead and take a break here.\n\n902\n00:47:40,480 --> 00:47:43,870\nI'll rustle up a network cable and\nget this guy plugged in.\n\n903\n00:47:43,870 --> 00:47:46,080\nHopefully it's in the correct\nnetwork that we gave it to.\n\n904\n00:47:46,080 --> 00:47:46,645\n>> Yeah, we'll see.\n\n905\n00:47:46,645 --> 00:47:49,227\n[LAUGH]\n>> That would make managing it a little\n\n906\n00:47:49,227 --> 00:47:50,730\nbit more difficult.\n\n907\n00:47:50,730 --> 00:47:52,711\nSo we'll get to that\nstuff after the break.\n\n908\n00:47:52,711 --> 00:48:00,177\n[SOUND]\n[SOUND]\n\n909\n00:48:00,177 --> 00:48:02,120\n>> All right, welcome back.\n\n910\n00:48:02,120 --> 00:48:04,280\nAll right, so our install, it did finish.\n\n911\n00:48:04,280 --> 00:48:04,780\n>> All right.\n\n912\n00:48:04,780 --> 00:48:09,790\n>> And so it was stuck at, not stuck, but\nit paused at that confirmation screen.\n\n913\n00:48:09,790 --> 00:48:11,330\nWell, our screen went dark.\n\n914\n00:48:11,330 --> 00:48:14,040\nIt went to sleep and so I walked over, and\n\n915\n00:48:14,040 --> 00:48:19,015\nI pressed the spacebar to wake it up and\nspacebar is, I guess, the new Enter.\n\n916\n00:48:19,015 --> 00:48:23,240\n>> [LAUGH]\n>> And so it said okay, the PC rebooted.\n\n917\n00:48:23,240 --> 00:48:26,540\nI boot up into XenServer and\non the little splash screen, and\n\n918\n00:48:26,540 --> 00:48:30,280\nby the time we got\nthe network plugged in and\n\n919\n00:48:30,280 --> 00:48:35,320\ngot able to ping that IP address,\nit finished loading up.\n\n920\n00:48:35,320 --> 00:48:39,030\nAnd now, it dumped us in to XenServer.\n\n921\n00:48:39,030 --> 00:48:44,770\nWhich isn't quite the big graphic,\nawesome that we have here.\n\n922\n00:48:44,770 --> 00:48:45,280\n>> [LAUGH] Yeah.\n\n923\n00:48:45,280 --> 00:48:50,130\nNow, for us right, we're not really\ndoing any real management from this.\n\n924\n00:48:50,130 --> 00:48:52,780\nBut we have to verify that\nthe basic configuration\n\n925\n00:48:52,780 --> 00:48:54,680\nis what we really need here, right?\n\n926\n00:48:54,680 --> 00:48:57,910\nSo, right here when it first\nlaunches up after the install,\n\n927\n00:48:57,910 --> 00:49:00,610\nthis is all you really get,\nthe configuration.\n\n928\n00:49:00,610 --> 00:49:03,150\nAnd, notice that you have a whole list of\nsome of the different things you can have.\n\n929\n00:49:03,150 --> 00:49:07,290\nWhat we're doing is we're verifying\nthat these things are working for us.\n\n930\n00:49:07,290 --> 00:49:12,150\nBecause we do manage this from across\nthe network here, we have to verify that\n\n931\n00:49:12,150 --> 00:49:15,220\nthat IP address is actually working,\nand so Nate did that for us.\n\n932\n00:49:15,220 --> 00:49:17,980\nHe pinged it from a machine\non the same network, and\n\n933\n00:49:17,980 --> 00:49:22,105\nso we're gonna be using this particular\nIP address that we see right here,\n\n934\n00:49:22,105 --> 00:49:27,000\n10.1.230.206, to allow us\nto be able to manage this.\n\n935\n00:49:27,000 --> 00:49:32,864\nSo normally to manage it, though, one of\nthe unusual requirements, or stringent\n\n936\n00:49:32,864 --> 00:49:38,330\nrequirements I guess, is that you do\nneed a Windows computer to manage this.\n\n937\n00:49:38,330 --> 00:49:41,650\nSo it can't be managed inside of a Linux\ncomputer, of all the things here.\n\n938\n00:49:41,650 --> 00:49:44,690\nBecause a XenServer really\nonly runs inside of Windows.\n\n939\n00:49:44,690 --> 00:49:47,500\nSo for us here that's one of\nthe limitations that we have.\n\n940\n00:49:47,500 --> 00:49:49,160\nIt does require a Windows computer.\n\n941\n00:49:49,160 --> 00:49:52,130\nSo anything Windows XP or\nabove should work.\n\n942\n00:49:52,130 --> 00:49:53,560\n>> So Ronnie, let me ask you this.\n\n943\n00:49:53,560 --> 00:49:59,980\nSo, Could you bring up a virtual Windows\ncomputer on your Linux machine, or your\n\n944\n00:49:59,980 --> 00:50:06,470\nMac OSX, and then run XenCenter inside\nof a virtual Windows PC on your MacBook?\n\n945\n00:50:06,470 --> 00:50:07,870\n>> Yes, you can.\n\n946\n00:50:07,870 --> 00:50:08,750\nIt can work.\n\n947\n00:50:08,750 --> 00:50:10,510\n>> Nice, the power of virtualization.\n\n948\n00:50:10,510 --> 00:50:11,970\n>> There we go, yep.\n\n949\n00:50:11,970 --> 00:50:17,328\nGo in and let's select the second option\nthere on the network interface as well.\n\n950\n00:50:17,328 --> 00:50:20,720\nAnd notice if we wanted to reconfigure\nthis thing, we could also do it here too.\n\n951\n00:50:20,720 --> 00:50:23,780\nIt says press Enter to configure\nthe management of the network connection,\n\n952\n00:50:23,780 --> 00:50:26,030\nhost name, network time and settings.\n\n953\n00:50:26,030 --> 00:50:29,531\nAt this point, if everything is good for\nus we really don't have to do that,\n\n954\n00:50:29,531 --> 00:50:32,240\nbut notice it's giving\nus another verification.\n\n955\n00:50:32,240 --> 00:50:33,730\nThis time we can also see, of course,\n\n956\n00:50:33,730 --> 00:50:36,270\nthe addition of the MAC address here for\nus here.\n\n957\n00:50:36,270 --> 00:50:39,300\n\"And the next is another\none that we have too, okay?\n\n958\n00:50:39,300 --> 00:50:42,710\nSo the authentication says you\nare currently not logged in.\n\n959\n00:50:42,710 --> 00:50:46,206\nOnly logged in users can reconfigure and\ncontrol this server.\n\n960\n00:50:46,206 --> 00:50:48,972\nPress <Enter> to change\nthe log in password and\n\n961\n00:50:48,972 --> 00:50:50,870\nthe auto login password as well.\n\n962\n00:50:50,870 --> 00:50:54,313\nNow, this one we really wanna go ahead and\npress Enter in, so\n\n963\n00:50:54,313 --> 00:50:56,780\nthat we can get access to it as well.\n\n964\n00:50:56,780 --> 00:50:57,510\nSo, go ahead and do that.\n\n965\n00:50:57,510 --> 00:51:00,100\nWe wanna leave root as the username.\n\n966\n00:51:00,100 --> 00:51:02,040\nYou don't have to, everybody changes root.\n\n967\n00:51:02,040 --> 00:51:05,930\nBut, let's go ahead and just leave it\nhere, and we're just gonna use our login.\n\n968\n00:51:05,930 --> 00:51:07,950\nIf we ever have to come back in and\nreconfigure this,\n\n969\n00:51:07,950 --> 00:51:11,140\nif we don't set it up,\nwe can't reconfigure it.\n\n970\n00:51:11,140 --> 00:51:14,760\nSo we wanna make sure we go ahead and\ndo that, as well.\n\n971\n00:51:14,760 --> 00:51:15,640\nAnd enable that.\n\n972\n00:51:15,640 --> 00:51:17,720\nAnd notice down in\nthe lower left hand corner,\n\n973\n00:51:17,720 --> 00:51:20,640\nit tells us how we get back\nout to the outer menu.\n\n974\n00:51:20,640 --> 00:51:22,950\nAnd then, here's where you think,\nhey look.\n\n975\n00:51:22,950 --> 00:51:25,620\nHere it is, the reason why we're running\n\n976\n00:51:25,620 --> 00:51:28,840\nthe IBM XenServer of course\nis the virtual machines here.\n\n977\n00:51:28,840 --> 00:51:30,800\nPress <Enter> to view\nthe Virtual Machines menu.\n\n978\n00:51:30,800 --> 00:51:32,530\nThis menu can start, stop and\n\n979\n00:51:32,530 --> 00:51:36,060\nmigrate existing Virtual Machines on\nthis host, display its performance.\n\n980\n00:51:36,060 --> 00:51:38,610\nNotice the word that's missing here, Nate.\n\n981\n00:51:38,610 --> 00:51:40,815\n>> The word create-\n>> Create.\n\n982\n00:51:40,815 --> 00:51:41,315\n[LAUGH]\n>> Or build.\n\n983\n00:51:41,315 --> 00:51:42,020\n>> That's it.\n\n984\n00:51:42,020 --> 00:51:43,020\n>> Make new.\n>> Yeah.\n\n985\n00:51:43,020 --> 00:51:45,440\nYou can start one, but\nif you go to this list.\n\n986\n00:51:45,440 --> 00:51:48,620\nPress Enter, and\nthere is no VMs running on this host.\n\n987\n00:51:48,620 --> 00:51:49,580\nPress Enter again, let's see.\n\n988\n00:51:50,750 --> 00:51:52,300\nNo virtual machines present.\n\n989\n00:51:52,300 --> 00:51:53,160\nIt doesn't matter.\n\n990\n00:51:53,160 --> 00:51:55,610\nWell how the heck do you create one?\n\n991\n00:51:55,610 --> 00:51:56,920\nYou can start one that says, right?\n\n992\n00:51:56,920 --> 00:51:57,850\nYou can stop one.\n\n993\n00:51:57,850 --> 00:51:58,790\nYou can import one.\n\n994\n00:51:58,790 --> 00:52:00,450\nYou can do all this other stuff.\n\n995\n00:52:00,450 --> 00:52:01,250\nYou don't have any.\n\n996\n00:52:01,250 --> 00:52:05,120\nYou can't create one here, it has to\nbe done in the XenCenter as well, okay.\n\n997\n00:52:05,120 --> 00:52:08,430\nSo you can get some host information and\n\n998\n00:52:08,430 --> 00:52:12,160\nif you actually had VM's, you could see\na list of them right there as well.\n\n999\n00:52:12,160 --> 00:52:14,020\nBut you really can't do anything,\n\n1000\n00:52:14,020 --> 00:52:17,710\nin terms of creation of these things,\nright here on the host itself.\n\n1001\n00:52:18,730 --> 00:52:21,610\nDisk and Storage Repositories.\n\n1002\n00:52:21,610 --> 00:52:25,100\nSo here we can go and set up a few things,\nbut we're not gonna do it here,\n\n1003\n00:52:25,100 --> 00:52:27,120\nwe're gonna do it in\nthe XenCenter instead.\n\n1004\n00:52:27,120 --> 00:52:29,930\nSo the idea of the disk and\nstorage repositories, to create and\n\n1005\n00:52:29,930 --> 00:52:34,520\nattach these repositories here, and we're\nusing the local hard drive to store VMs.\n\n1006\n00:52:34,520 --> 00:52:36,430\nWe could set it up right here.\n\n1007\n00:52:36,430 --> 00:52:39,490\nOr for us, when we actually go and\nget the access to the ISA folders,\n\n1008\n00:52:39,490 --> 00:52:40,880\nwe can do this as well.\n\n1009\n00:52:40,880 --> 00:52:42,310\nBut we're going to do\nthis in the XenCenter, so\n\n1010\n00:52:42,310 --> 00:52:43,160\nwe're not gonna worry about it.\n\n1011\n00:52:44,720 --> 00:52:46,570\nResource Pool Configuration.\n\n1012\n00:52:46,570 --> 00:52:48,740\nThis is one of the easiest\nthings that we can do.\n\n1013\n00:52:48,740 --> 00:52:54,490\nIf I am actually running multiple\nXenServers, okay, in different locations,\n\n1014\n00:52:54,490 --> 00:52:58,030\nand I want to be able to actually\nuse them as a single resource,\n\n1015\n00:52:58,030 --> 00:53:00,450\nI can create what's\ncalled a resource pool.\n\n1016\n00:53:00,450 --> 00:53:02,750\nSo I may have a XenCenter set up here.\n\n1017\n00:53:02,750 --> 00:53:04,520\nI may have one set up across town.\n\n1018\n00:53:04,520 --> 00:53:09,850\nI may have another XenServer, excuse me,\nhost set up somewhere else here.\n\n1019\n00:53:09,850 --> 00:53:13,700\nBut what I can do is manage them all\nas one, and since you do the idea of\n\n1020\n00:53:13,700 --> 00:53:17,590\nclustering, is what we're really talking\nabout, it's relatively easy to do this.\n\n1021\n00:53:17,590 --> 00:53:19,605\nOnce we actually have multiple\nXenServers set up here.\n\n1022\n00:53:19,605 --> 00:53:22,290\nAnd we configure them,\nthat should be in the same pool.\n\n1023\n00:53:22,290 --> 00:53:24,750\nSo right here's one of\nthe ways that we can do that,\n\n1024\n00:53:24,750 --> 00:53:26,880\nas well if we actually had it, okay?\n\n1025\n00:53:26,880 --> 00:53:28,160\nSo we'll see about that\na little bit later.\n\n1026\n00:53:29,270 --> 00:53:32,110\nOf course our regular host and\nBIOS information as well.\n\n1027\n00:53:33,940 --> 00:53:37,560\nAnd then timezone, keyboard,\nstuff that you should know.\n\n1028\n00:53:37,560 --> 00:53:39,060\nRemote Service Configuration.\n\n1029\n00:53:40,070 --> 00:53:44,370\nNotice that you can use SSH to access\nin syslog stuff, all this stuff,\n\n1030\n00:53:44,370 --> 00:53:47,960\nthe same things that we just normally do\nto manage a regular server is also there.\n\n1031\n00:53:47,960 --> 00:53:51,210\nBackup and restore, and updates,\nof course, are also important.\n\n1032\n00:53:51,210 --> 00:53:53,750\nNow, this is something that we're gonna\ntalk about a little bit more in depth\n\n1033\n00:53:53,750 --> 00:53:54,254\nlater on.\n\n1034\n00:53:54,254 --> 00:53:58,470\nBecause XenServer is a free tool,\n\n1035\n00:53:58,470 --> 00:54:03,620\nyou can update it, because it's free,\nyou have to update it manually.\n\n1036\n00:54:03,620 --> 00:54:04,990\nIf you buy the support,\n\n1037\n00:54:04,990 --> 00:54:08,040\nthat actually gives you the ability\nto do the automatic updates.\n\n1038\n00:54:08,040 --> 00:54:10,550\nAnd to of course have the support\nif you don't have it.\n\n1039\n00:54:10,550 --> 00:54:12,120\nBut you have to do it manually.\n\n1040\n00:54:12,120 --> 00:54:15,370\nAnd the other thing, Nate, that we\nactually have to do on the free side,\n\n1041\n00:54:15,370 --> 00:54:18,610\nis there's nothing in\nthe XenCenter itself that says,\n\n1042\n00:54:18,610 --> 00:54:22,090\nhey, let's just click on this and\ndownload the updates and install it.\n\n1043\n00:54:22,090 --> 00:54:25,925\nYou have to use the command prompt,\nand it's not just DOS, right.\n\n1044\n00:54:25,925 --> 00:54:31,740\nIt's actually XenCenter, or XenServer's\nspecial command prompt that they call xe,\n\n1045\n00:54:31,740 --> 00:54:34,905\nthe Xen executive command or\nwhatever they want to call it.\n\n1046\n00:54:34,905 --> 00:54:39,260\nSo a little bit special syntax there,\nto get that up and working as well.\n\n1047\n00:54:39,260 --> 00:54:42,120\nTechnical Support, of course,\nis exactly like it sounds if we have it,\n\n1048\n00:54:42,120 --> 00:54:44,180\nwe're not buying anything so\nwe don't have that.\n\n1049\n00:54:44,180 --> 00:54:45,090\nWe of course can reboot it,\n\n1050\n00:54:45,090 --> 00:54:48,820\nshut down, and then if you wanted\nto run that Xen command line and\n\n1051\n00:54:48,820 --> 00:54:53,821\nactually manage everything through the\ncommand line and not the XenCenter, okay?\n\n1052\n00:54:53,821 --> 00:54:56,585\nOnly people as hardcore as Nate Copeland.\n\n1053\n00:54:56,585 --> 00:54:58,980\n>> [LAUGH] Yeah.\n>> Would ever do anything like this.\n\n1054\n00:54:58,980 --> 00:55:02,920\n>> So you're saying that we\ncan't run power show commands?\n\n1055\n00:55:02,920 --> 00:55:04,310\n>> No power show.\n\n1056\n00:55:04,310 --> 00:55:06,280\n>> Well then I yeah I got nothing.\n\n1057\n00:55:06,280 --> 00:55:10,290\n>> Yeah, this is XenServer xe commands,\nis all this one actually is doing.\n\n1058\n00:55:10,290 --> 00:55:11,410\n>> Right.\n>> So you can do it,\n\n1059\n00:55:11,410 --> 00:55:13,670\nbut there's not a lot of us\nthat will actually do that.\n\n1060\n00:55:13,670 --> 00:55:17,920\nIf you were scripting this out for\nhundreds of machines you might do this.\n\n1061\n00:55:17,920 --> 00:55:22,400\nBut for most of us we are gonna use the\nXenCenter, is what we're going to do here.\n\n1062\n00:55:22,400 --> 00:55:25,000\nSo the basic install is really, again,\n\n1063\n00:55:25,000 --> 00:55:29,290\njust like installing a regular application\nor an operating system on the computer.\n\n1064\n00:55:29,290 --> 00:55:31,100\nIt really took about six minutes,\n\n1065\n00:55:31,100 --> 00:55:34,260\nmaybe not even that long to\nget everything up and running.\n\n1066\n00:55:34,260 --> 00:55:37,150\nWe took a little bit more time\ncuz we're explaining it to you.\n\n1067\n00:55:37,150 --> 00:55:41,350\nWe need that IP address as pretty\nmuch the key that we had here.\n\n1068\n00:55:41,350 --> 00:55:42,190\nSo, that was 230.206.\n\n1069\n00:55:42,190 --> 00:55:43,690\n>> Correct.\n>> Is the one that we had.\n\n1070\n00:55:43,690 --> 00:55:46,170\nSo, that really is kinda the next\npiece of the puzzle for us.\n\n1071\n00:55:46,170 --> 00:55:48,825\nOnce this machine is up and operating,\n\n1072\n00:55:48,825 --> 00:55:53,009\nWhat we would normally do on\na regular server is, believe it or\n\n1073\n00:55:53,009 --> 00:55:57,600\nnot, if this is all set up,\nI don't have to touch it again.\n\n1074\n00:55:57,600 --> 00:56:03,690\nI can just turn off the monitor, and\nleave this thing as is sitting there.\n\n1075\n00:56:03,690 --> 00:56:06,100\nOkay?\nThat's all that it actually takes.\n\n1076\n00:56:06,100 --> 00:56:07,960\nIn terms of the management though,\n\n1077\n00:56:07,960 --> 00:56:13,750\nthe management is always done on\nanother machine from the network here.\n\n1078\n00:56:13,750 --> 00:56:17,210\nOver on my particular computer here, if I,\n\n1079\n00:56:17,210 --> 00:56:19,670\nI hope I have my screen\nsharing software up.\n\n1080\n00:56:19,670 --> 00:56:20,790\nYep.\n\n1081\n00:56:20,790 --> 00:56:25,760\nSo over on my computer, the easiest way\nto gain access to that screen sharing.\n\n1082\n00:56:25,760 --> 00:56:26,912\nOr not screen sharing.\n\n1083\n00:56:26,912 --> 00:56:32,580\nThe XenCenter okay, is to connect to the\nXenServer and install that on my machine.\n\n1084\n00:56:32,580 --> 00:56:36,690\nSo you might be wondering,\nwell how the heck do I get that.\n\n1085\n00:56:36,690 --> 00:56:39,000\nWell, it's relatively easy again.\n\n1086\n00:56:39,000 --> 00:56:42,480\nIf you know how to use a browser,\nwell this is how easy it actually is.\n\n1087\n00:56:42,480 --> 00:56:44,680\nI can go to this tab right here.\n\n1088\n00:56:44,680 --> 00:56:52,662\nType in the IP Address,\nwhich was 10.1.230.206,\n\n1089\n00:56:52,662 --> 00:56:55,320\nright here, and\n\n1090\n00:56:55,320 --> 00:57:00,670\nnotice it connects me to a very simple web\npage here, that is connecting that server.\n\n1091\n00:57:00,670 --> 00:57:04,290\nSo it's already running a basic\nweb server in the background, and\n\n1092\n00:57:04,290 --> 00:57:06,170\nit gives me the option\nof what I want to do.\n\n1093\n00:57:06,170 --> 00:57:09,950\nYou want to copy this in server CD image,\nand\n\n1094\n00:57:09,950 --> 00:57:15,210\nthen I can manually install on whatever\nmachines I want to from across network, or\n\n1095\n00:57:15,210 --> 00:57:17,170\nyou wanna just run the installer.\n\n1096\n00:57:17,170 --> 00:57:19,250\nWhich one, Nate, are we gonna do today?\n\n1097\n00:57:19,250 --> 00:57:23,740\n>> Well, I think that because we won't be\ninstalling this on any other machines,\n\n1098\n00:57:23,740 --> 00:57:25,530\nlets just run that installer.\n\n1099\n00:57:25,530 --> 00:57:28,710\n>> All right, so\nI'm gonna choose the XenCenter installer,\n\n1100\n00:57:28,710 --> 00:57:32,320\nI am running Windows 8.1 so\nwe'll see if she has any problems here.\n\n1101\n00:57:34,950 --> 00:57:37,980\nAnd then now let's see\nif I can just run it.\n\n1102\n00:57:39,370 --> 00:57:40,280\nThere it goes.\n\n1103\n00:57:40,280 --> 00:57:43,240\nIt gives me the actual\nXenCenter Setup here.\n\n1104\n00:57:43,240 --> 00:57:45,930\nSetup will actually install\nit on the computer, and\n\n1105\n00:57:45,930 --> 00:57:50,080\nif I can, I love my track pad on my XPS.\n\n1106\n00:57:50,080 --> 00:57:51,190\n>> Oh, it's nice.\n\n1107\n00:57:51,190 --> 00:57:54,910\n>> It's by far one of the most incredible\n>> Pieces of\n\n1108\n00:57:54,910 --> 00:57:57,750\ntotal trash that we can\n>> What I like most about it is how it\n\n1109\n00:57:57,750 --> 00:58:00,570\npreemptively decides what it\nis you're gonna click on.\n\n1110\n00:58:00,570 --> 00:58:03,740\nSo before you even know you're gonna\nclick and pull up your charms bar\n\n1111\n00:58:03,740 --> 00:58:04,950\n>> Yeah, it does it for you.\n\n1112\n00:58:04,950 --> 00:58:05,960\n>> That's right.\n\n1113\n00:58:05,960 --> 00:58:06,780\nIt is incredible.\n\n1114\n00:58:06,780 --> 00:58:08,450\n>> It is.\nIt's very incredible that it actually\n\n1115\n00:58:08,450 --> 00:58:10,670\nchooses what I don't really want to do.\n\n1116\n00:58:10,670 --> 00:58:11,460\nYeah, so there we go.\n\n1117\n00:58:11,460 --> 00:58:13,040\n>> We just haven't realized\nthat's what you needed.\n\n1118\n00:58:13,040 --> 00:58:14,510\n>> I know.\nIt's one of those features.\n\n1119\n00:58:14,510 --> 00:58:17,160\nYou just learn to live\nwith it after a while.\n\n1120\n00:58:17,160 --> 00:58:18,348\n>> So there we go.\n\n1121\n00:58:18,348 --> 00:58:23,660\nSo Citrix XenCenter set up the default\ninstall path is pretty much fine for me.\n\n1122\n00:58:23,660 --> 00:58:25,530\nSo I could choose all users of all time.\n\n1123\n00:58:25,530 --> 00:58:28,190\nI'm just gonna choose me\ncuz I'm selfish that way.\n\n1124\n00:58:28,190 --> 00:58:30,520\nClick install and let it install there.\n\n1125\n00:58:30,520 --> 00:58:34,310\nSo it's now installing the actual\nXenCenter management console for\n\n1126\n00:58:34,310 --> 00:58:36,890\nus to be able to set this up, okay?\n\n1127\n00:58:36,890 --> 00:58:38,650\nNow, the nice thing is,\n\n1128\n00:58:38,650 --> 00:58:43,730\nNate, I've had experience with\nXenCenter as well as with Hyper-V.\n\n1129\n00:58:43,730 --> 00:58:48,800\nAnd we've talked about this before on,\nyou know, even outside the show here.\n\n1130\n00:58:48,800 --> 00:58:52,860\nBy setting this thing up, I actually have\npreferred the idea of using XenCenter.\n\n1131\n00:58:52,860 --> 00:58:54,270\nA little bit easier.\n\n1132\n00:58:54,270 --> 00:58:57,750\nAnd I'm gonna try and convince you of\nthat, Nate, is what I'm gonna try to do.\n\n1133\n00:58:57,750 --> 00:58:58,280\n>> Right.\n\n1134\n00:58:58,280 --> 00:59:00,820\n>> Nate is a die-hard Hyper-V guy.\n\n1135\n00:59:00,820 --> 00:59:03,920\nYou know and\n>> And so\n\n1136\n00:59:03,920 --> 00:59:04,750\n>> Yeah I am, and\n\n1137\n00:59:04,750 --> 00:59:10,940\nhow well is in the start of sharing\nthe as it was installing therefore but.\n\n1138\n00:59:10,940 --> 00:59:15,420\nYeah so my entry into\nvirtualization was with Hyper-V and\n\n1139\n00:59:15,420 --> 00:59:19,730\ncause that's what was on all the exams.\n\n1140\n00:59:19,730 --> 00:59:28,300\nSo if you're going to take\nthe well you got to know Hyper-V.\n\n1141\n00:59:28,300 --> 00:59:31,641\nYou take 410 or 411 [CROSSTALK] 7410 7411,\nit's all Hyper-V.\n\n1142\n00:59:31,641 --> 00:59:37,100\nWell, If that's what's gonna be on\nthe exam, then heaven sakes, I better know\n\n1143\n00:59:37,100 --> 00:59:42,580\nit inside and out, and once you know a\ntool, you just kinda stick with that tool.\n\n1144\n00:59:43,740 --> 00:59:48,220\nRonnie, he showed XenServer number four,\nlike, I don't know.\n\n1145\n00:59:48,220 --> 00:59:50,644\nManager, you know where everything is.\n\n1146\n00:59:50,644 --> 00:59:51,515\nIt just works.\n\n1147\n00:59:51,515 --> 00:59:52,800\n>> It just works.\n\n1148\n00:59:52,800 --> 00:59:53,760\nYeah, that's right.\n\n1149\n00:59:53,760 --> 00:59:54,630\n>> Works well enough.\n\n1150\n00:59:54,630 --> 00:59:55,150\n>> Yes.\nMm-hm.\n\n1151\n00:59:55,150 --> 00:59:58,590\nNo, it works well, and\nthere's nothing to knock Hyper-V on here.\n\n1152\n00:59:58,590 --> 01:00:01,215\nThis is just another product\nthat we might choose to use.\n\n1153\n01:00:01,215 --> 01:00:05,370\nHyper-V is actually one of the pillars\nin the market of virtualization, so\n\n1154\n01:00:05,370 --> 01:00:06,940\nyou can't knock it for too much.\n\n1155\n01:00:06,940 --> 01:00:10,760\nIt actually does have incredible\nperformance as well, but XenCenter,\n\n1156\n01:00:10,760 --> 01:00:15,260\nI like its easy ability that we actually\nhave so far in terms of what we're doing.\n\n1157\n01:00:15,260 --> 01:00:17,600\nNotice I actually don't have to go and\nfind it too much.\n\n1158\n01:00:17,600 --> 01:00:19,470\nI just need an IP address, Nate.\n\n1159\n01:00:19,470 --> 01:00:20,700\nThat's all I needed, and look!\n\n1160\n01:00:20,700 --> 01:00:22,200\nIt gave me an installer.\n\n1161\n01:00:22,200 --> 01:00:24,570\nAnd then all I have to\ndo is click on finish.\n\n1162\n01:00:24,570 --> 01:00:26,510\n>> That is pretty convenient.\n\n1163\n01:00:26,510 --> 01:00:27,330\nYeah.\n\n1164\n01:00:27,330 --> 01:00:29,310\n>> Mm.\nYou know, before, yeah.\n\n1165\n01:00:29,310 --> 01:00:34,190\nYou know, actually, I’ll save that next\nstory until we actually connect to it\n\n1166\n01:00:34,190 --> 01:00:38,490\nthrough XenCenter, and\nthen I’ll share that whole story.\n\n1167\n01:00:38,490 --> 01:00:39,640\n>> All right, so I went ahead and\n\n1168\n01:00:39,640 --> 01:00:43,790\nI flipped on over to my start screen here,\nand in the search bar, I went ahead and\n\n1169\n01:00:43,790 --> 01:00:47,150\ntyped in XenCenter and\nit gives me this nice little icon.\n\n1170\n01:00:47,150 --> 01:00:51,840\nI could probably pin it to my\nstart menu if I wanted to.\n\n1171\n01:00:51,840 --> 01:00:53,190\nAnd where the heck did\nthat shoot pin it to.\n\n1172\n01:00:53,190 --> 01:00:53,690\nThere it goes.\n\n1173\n01:00:56,700 --> 01:01:02,580\nOh maybe I should not\ngonna let me move it?\n\n1174\n01:01:02,580 --> 01:01:06,790\nI'll just start it.\n\n1175\n01:01:06,790 --> 01:01:07,860\nThat works.\n\n1176\n01:01:07,860 --> 01:01:09,720\n>> So XenCenter, here we go.\n\n1177\n01:01:09,720 --> 01:01:10,590\n>> Yup.\n\n1178\n01:01:10,590 --> 01:01:14,370\nSo here we go, we are actually now\nconnecting to just a XenServer.\n\n1179\n01:01:14,370 --> 01:01:17,330\nAnd we haven't connected to the server yet\nper say, but\n\n1180\n01:01:17,330 --> 01:01:19,000\nwe're just launching this thing up and\n\n1181\n01:01:19,000 --> 01:01:22,030\nsomebody asked me if I want to check\nthe internet for XenServer updates.\n\n1182\n01:01:22,030 --> 01:01:24,460\nI'm gonna talk about that a little bit\nlater for right now let's go ahead and\n\n1183\n01:01:24,460 --> 01:01:28,898\nsay no for right now, just so that we\ncan get access into the system itself.\n\n1184\n01:01:28,898 --> 01:01:30,138\nAll right.\n\n1185\n01:01:30,138 --> 01:01:31,210\nSo, Nate,\n\n1186\n01:01:31,210 --> 01:01:37,080\nyou wanna know why I am impressed with\nthis immediate screen right here?\n\n1187\n01:01:37,080 --> 01:01:39,029\n>> You know, I would think.\n\n1188\n01:01:39,029 --> 01:01:40,980\n>> What?\nThat it says learn and add and\n\n1189\n01:01:40,980 --> 01:01:44,438\nupgrade, it's like really straight\nforward and tells you exactly what it is?\n\n1190\n01:01:44,438 --> 01:01:45,484\n>> [LAUGH] Exactly.\n\n1191\n01:01:45,484 --> 01:01:47,420\n>> That where you should\ngo to do what you want.\n\n1192\n01:01:47,420 --> 01:01:48,710\n>> That's it, yeah.\n\n1193\n01:01:48,710 --> 01:01:51,720\n>> So the first time I actually installed\nthis, I was helping Don out, right, and\n\n1194\n01:01:51,720 --> 01:01:52,690\nhe was like, oh you can do this.\n\n1195\n01:01:52,690 --> 01:01:54,570\nAnd I was like, okay, well I'll try it.\n\n1196\n01:01:54,570 --> 01:01:56,950\nAnd it was literally this easy.\n\n1197\n01:01:56,950 --> 01:01:59,710\nSo now that I have the IP\naddress of our XenServer,\n\n1198\n01:01:59,710 --> 01:02:01,750\nright,\n>> I could go to the learn,\n\n1199\n01:02:01,750 --> 01:02:05,638\nand I'm just gonna select add,\nbecause that was easy enough for me to do.\n\n1200\n01:02:05,638 --> 01:02:10,170\nAnd, I don't have anything here\nthat I can type in that IP\n\n1201\n01:02:10,170 --> 01:02:13,845\naddress if I can remember it.\n\n1202\n01:02:13,845 --> 01:02:17,530\n230.206, and, if we remember,\nhopefully we remember.\n\n1203\n01:02:17,530 --> 01:02:19,020\n>> It's just all lowercase.\n\n1204\n01:02:19,020 --> 01:02:22,690\n>> Oh, he changed our odd password there.\n\n1205\n01:02:22,690 --> 01:02:23,709\n>> Every 45 days.\n\n1206\n01:02:25,950 --> 01:02:29,240\nAnd let's see if Nate actually\ntyped in the password correctly.\n\n1207\n01:02:29,240 --> 01:02:31,030\n[LAUGH] I'm joking.\n\n1208\n01:02:31,030 --> 01:02:34,032\nIf I typed in the password\ncorrectly then we should connect.\n\n1209\n01:02:34,032 --> 01:02:38,200\nAll right so here it tells us Xen can\nactually remember the log in credentials\n\n1210\n01:02:38,200 --> 01:02:39,480\nfor me if I want to.\n\n1211\n01:02:39,480 --> 01:02:42,850\nAnd I can save and\nrestore the connection state on startup.\n\n1212\n01:02:42,850 --> 01:02:46,300\nI can even require a master password, I'm\nnot gonna worry about it for right now.\n\n1213\n01:02:46,300 --> 01:02:49,500\n>> So that master password,\nis that our root password, or\n\n1214\n01:02:49,500 --> 01:02:52,430\nis our root password\n>> Now this is the one that we set up\n\n1215\n01:02:52,430 --> 01:02:52,980\nearlier, right?\n\n1216\n01:02:52,980 --> 01:02:54,730\nIt says to log in to your server.\n\n1217\n01:02:54,730 --> 01:02:57,990\nSo it says it protects all of\nyour server login credentials.\n\n1218\n01:02:57,990 --> 01:03:00,810\nSo if you're gonna do this, you need\nto enter the password at the beginning\n\n1219\n01:03:00,810 --> 01:03:04,780\nof every session, so it's not actually\ngonna allow you to skip all this.\n\n1220\n01:03:04,780 --> 01:03:06,210\n>> All right.\n\n1221\n01:03:06,210 --> 01:03:06,730\n>> Sound's good.\n\n1222\n01:03:06,730 --> 01:03:07,230\n>> Okay.\n\n1223\n01:03:09,110 --> 01:03:13,880\n>> And there it is over on\nthe left hand side I have my node\n\n1224\n01:03:13,880 --> 01:03:17,145\nwhich it the XenServer that\nNate set up here, okay?\n\n1225\n01:03:17,145 --> 01:03:20,800\n>> Mm-hm.\n>> And at this point, I can see a lot of\n\n1226\n01:03:20,800 --> 01:03:26,950\ndetails for me that I can actually begin\nto take a look at and to manage here.\n\n1227\n01:03:26,950 --> 01:03:27,650\nOkay.\n\n1228\n01:03:27,650 --> 01:03:30,290\nSo notice if I just select XenServer.\n\n1229\n01:03:30,290 --> 01:03:34,390\nIt gives me the search option of all\nof the actual stuff that's on here.\n\n1230\n01:03:34,390 --> 01:03:37,630\nIt's even giving me\na little bit of a overview\n\n1231\n01:03:37,630 --> 01:03:39,620\nof the performance monitoring right here.\n\n1232\n01:03:39,620 --> 01:03:41,710\nCPU usage, memory, disk, network.\n\n1233\n01:03:41,710 --> 01:03:45,351\nThere are kind of the major four that we\ntake a look at in terms of performance.\n\n1234\n01:03:45,351 --> 01:03:48,601\nIf I click on general it\ngives me all of the regular.\n\n1235\n01:03:48,601 --> 01:03:50,111\nServer properties that I would need.\n\n1236\n01:03:50,111 --> 01:03:52,978\n>> Now, so-\n>> Memory.\n\n1237\n01:03:52,978 --> 01:03:54,310\n>> Sorry to cut you off there.\n\n1238\n01:03:54,310 --> 01:03:55,210\n>> No, that's fine.\n\n1239\n01:03:55,210 --> 01:03:57,790\n>> So on that tab right there, so\n\n1240\n01:03:57,790 --> 01:04:03,100\nwe can see the performance\nof the server as a whole.\n\n1241\n01:04:03,100 --> 01:04:03,730\n>> Right.\n>> Now,\n\n1242\n01:04:03,730 --> 01:04:08,230\nI know in HyperBay we can see\nthe performance of each individual VMs.\n\n1243\n01:04:08,230 --> 01:04:08,760\n>> Right.\n\n1244\n01:04:08,760 --> 01:04:13,060\nAnd so I am assuming that\nthat's gonna be up here soon.\n\n1245\n01:04:13,060 --> 01:04:14,250\nI guess as soon as we get some VMs.\n\n1246\n01:04:14,250 --> 01:04:17,710\n>> Yeah, once we start building some\nVMs here, we'll start seeing it.\n\n1247\n01:04:17,710 --> 01:04:18,240\nOkay?\n>> Nice.\n\n1248\n01:04:18,240 --> 01:04:20,620\n>> But there's a lot of\ndifferent things that we can do,\n\n1249\n01:04:20,620 --> 01:04:25,010\nand it not only has that ability to just\nallow us to see that, but notice we,\n\n1250\n01:04:25,010 --> 01:04:28,990\nof course, have the regular menus that\nwe're always pretty much used to.\n\n1251\n01:04:28,990 --> 01:04:33,220\nSo if you grew up in the age of\nmenu drop downs, you kind of, yes,\n\n1252\n01:04:33,220 --> 01:04:34,700\nthis is what I remember.\n\n1253\n01:04:34,700 --> 01:04:38,130\nAway from all these kind of\nicons up at the top here.\n\n1254\n01:04:38,130 --> 01:04:41,760\nAnd it's just the way that\nwe typically are here, okay?\n\n1255\n01:04:41,760 --> 01:04:46,030\nNow there's a couple of things, though,\nthat we do need to set up, okay?\n\n1256\n01:04:46,030 --> 01:04:49,880\nBefore we actually get too far into this,\nas well.\n\n1257\n01:04:49,880 --> 01:04:54,717\nBut, here is the basic management console\nthat we're gonna be working with to\n\n1258\n01:04:54,717 --> 01:04:58,360\nset up a VM, and to modify one,\nas well as what we see.\n\n1259\n01:04:58,360 --> 01:04:59,090\nOkay?\n\n1260\n01:04:59,090 --> 01:05:03,430\nNow when it starts out, right, once\nyou actually have XenServer installed,\n\n1261\n01:05:03,430 --> 01:05:06,480\na lot of times there\nactually have been updates.\n\n1262\n01:05:06,480 --> 01:05:09,700\nIt would actually be over here on\nthe right hand side, system alerts, but\n\n1263\n01:05:09,700 --> 01:05:10,920\nI told it not to check.\n\n1264\n01:05:10,920 --> 01:05:13,700\nIf I tell it to check it\nprobably will actually go, hey,\n\n1265\n01:05:13,700 --> 01:05:18,440\nthere's some other things that're actually\navailable for you right now to do.\n\n1266\n01:05:18,440 --> 01:05:23,070\nBut you do have to license this thing\nif you want those updates to come in.\n\n1267\n01:05:23,070 --> 01:05:26,770\nSo, for us to actually have done that\nwe would have gone to Tools, and\n\n1268\n01:05:26,770 --> 01:05:31,670\nwe would have actually selected\nthe idea of License Manager here.\n\n1269\n01:05:31,670 --> 01:05:36,070\nAnd, notice it says that right now,\nit's actually unsupported, okay?\n\n1270\n01:05:36,070 --> 01:05:40,650\nSo it says my maintenance has expired,\nI can buy a license here if I want to.\n\n1271\n01:05:40,650 --> 01:05:43,530\nI can actually assign a licence as well.\n\n1272\n01:05:43,530 --> 01:05:48,180\nI can download a Citrix License Server\nvirtual clients, you name it,\n\n1273\n01:05:48,180 --> 01:05:50,880\nit gives me those abilities to do so.\n\n1274\n01:05:50,880 --> 01:05:54,300\nSo if I actually had a license here,\nI could click here and\n\n1275\n01:05:54,300 --> 01:05:59,940\nthen go ahead and do that right here and\ntype in the actual licensing server,\n\n1276\n01:05:59,940 --> 01:06:02,440\nas well as tell it what\naddition we were doing.\n\n1277\n01:06:02,440 --> 01:06:06,270\nFor us it's this XenServer per socket,\nis what we would actually have here.\n\n1278\n01:06:06,270 --> 01:06:09,390\nSo for right now, let me see here.\n\n1279\n01:06:09,390 --> 01:06:13,540\nMaybe I actually do need to go in and\ncheck for the updates first.\n\n1280\n01:06:13,540 --> 01:06:16,600\nSee if I can get this, and\nsee that I can make it do it.\n\n1281\n01:06:16,600 --> 01:06:18,280\nSo you actually see right here,\n\n1282\n01:06:18,280 --> 01:06:22,250\nthat at this point there's several updates\nthat we actually have, and it actually\n\n1283\n01:06:22,250 --> 01:06:27,390\neven says that there's a new XenCenter\nthat's available for me right away.\n\n1284\n01:06:27,390 --> 01:06:30,560\nSo even without any licensing,\nanything else here, notice this\n\n1285\n01:06:30,560 --> 01:06:35,300\ngives me the ability to download this\nnew version of it right here as well.\n\n1286\n01:06:35,300 --> 01:06:37,440\nAnd then all these other\nones that you see,\n\n1287\n01:06:37,440 --> 01:06:40,482\nI'll probably have to manually\ninstall those if I want to.\n\n1288\n01:06:40,482 --> 01:06:45,819\n>> So Ronnie, so before you close on that,\nclick on one of those other updates.\n\n1289\n01:06:47,085 --> 01:06:48,470\nJust like the one there at the top.\n\n1290\n01:06:49,580 --> 01:06:53,908\nAll right so on each one of these updates,\nthat download and install button,\n\n1291\n01:06:53,908 --> 01:06:54,992\nit's grayed out.\n\n1292\n01:06:54,992 --> 01:06:56,012\n>> Mm-hm.\n\n1293\n01:06:56,012 --> 01:07:00,680\n>> So is that where our free and\nour licensed copy,\n\n1294\n01:07:00,680 --> 01:07:05,710\nI guess like most free software you get\nit, and that's what you get in the node.\n\n1295\n01:07:05,710 --> 01:07:08,780\nGenerally you don't really get\nany support or future upgrades.\n\n1296\n01:07:08,780 --> 01:07:13,000\nBut so that's kind of where\nthat button's grayed out?\n\n1297\n01:07:13,000 --> 01:07:14,540\n>> Yup.\nSo if I were to go\n\n1298\n01:07:14,540 --> 01:07:17,630\nto the webpage here, where it has it.\n\n1299\n01:07:17,630 --> 01:07:21,340\nNotice I can actually download it,\nbut there is no automatic install.\n\n1300\n01:07:21,340 --> 01:07:23,790\nThis is where we have to run\nthat Xen command line tool.\n\n1301\n01:07:23,790 --> 01:07:29,650\nSo that is a little bit, again, tricky, if\nyou're not used to typing that stuff in,\n\n1302\n01:07:29,650 --> 01:07:34,579\nbut for free, this is a production level\n\n1303\n01:07:34,579 --> 01:07:40,140\nHyper-V server, that's actually\nrunning for us right here, okay?\n\n1304\n01:07:40,140 --> 01:07:43,490\nNow, there's a couple of other\nthings available for us too,\n\n1305\n01:07:43,490 --> 01:07:45,650\nlet me make sure as I go through, okay.\n\n1306\n01:07:45,650 --> 01:07:48,610\nSo, if I take a look at this menu bar,\nright?\n\n1307\n01:07:48,610 --> 01:07:50,320\nFile and View not so important.\n\n1308\n01:07:50,320 --> 01:07:51,670\nDon't get me wrong, we can have it.\n\n1309\n01:07:51,670 --> 01:07:55,260\nBut notice I can actually create a pool,\na resource pool.\n\n1310\n01:07:55,260 --> 01:07:58,390\nIf I had more than one XenServer, and\n\n1311\n01:07:58,390 --> 01:08:02,640\nI wanted to begin that idea of\nclustering them together, okay?\n\n1312\n01:08:02,640 --> 01:08:06,660\nWe can actually do it just\nby selecting New Pool, and\n\n1313\n01:08:06,660 --> 01:08:11,090\nthen we would create this pool here, and\nright now I'd have a XenServer here, and\n\n1314\n01:08:11,090 --> 01:08:13,940\nthen I could add in a new server, okay?\n\n1315\n01:08:13,940 --> 01:08:18,771\nSo, it's not difficult here,\nif I wanted to call this one\n\n1316\n01:08:18,771 --> 01:08:23,280\nXenPool.\n\n1317\n01:08:23,280 --> 01:08:26,649\nAnd notice, I have a master server,\nif I click on Add Server here.\n\n1318\n01:08:27,890 --> 01:08:34,480\nDuring the break, if I can remember\nthe IP address, I went ahead and\n\n1319\n01:08:34,480 --> 01:08:39,720\ndid another one, over on another computer\njust to see if this worked here.\n\n1320\n01:08:39,720 --> 01:08:43,900\nI can click Add, and notice it found it.\n\n1321\n01:08:43,900 --> 01:08:44,800\nI didn't even have\n\n1322\n01:08:44,800 --> 01:08:47,010\nto actually do any other setup-\n>> [LAUGH]\n\n1323\n01:08:47,010 --> 01:08:48,130\n>> On that other server.\n\n1324\n01:08:48,130 --> 01:08:49,990\nI did a basic install on it.\n\n1325\n01:08:49,990 --> 01:08:51,090\nWhat do you think Nate?\n\n1326\n01:08:51,090 --> 01:08:51,680\nSo far?\n\n1327\n01:08:51,680 --> 01:08:53,040\nPretty impressive?\n\n1328\n01:08:53,040 --> 01:08:54,417\n>> Oh no, okay,\n[CROSSTALK] That is pretty sweet.\n\n1329\n01:08:54,417 --> 01:08:58,045\nYou don't have to add anything\nto like a trusted host's\n\n1330\n01:08:58,045 --> 01:08:58,870\nfile\n>> Nope.\n\n1331\n01:08:58,870 --> 01:09:00,370\n>> Or anything of that sort,\nso that's [CROSSTALK].\n\n1332\n01:09:00,370 --> 01:09:01,260\n>> Yep.\n\n1333\n01:09:01,260 --> 01:09:06,320\nAnd so now, I actually have well, two.\n\n1334\n01:09:06,320 --> 01:09:08,830\nAnd so I can actually manage both of them.\n\n1335\n01:09:08,830 --> 01:09:10,520\nFrom this one location.\n\n1336\n01:09:10,520 --> 01:09:11,910\nNow they're not really clustered, right?\n\n1337\n01:09:11,910 --> 01:09:14,210\nThey're actually just giving\nme management in both.\n\n1338\n01:09:14,210 --> 01:09:15,695\nThey're even on different networks, Nate.\n\n1339\n01:09:15,695 --> 01:09:16,270\n>> Mm-hm.\n\n1340\n01:09:16,270 --> 01:09:17,200\n>> And there it is.\n\n1341\n01:09:17,200 --> 01:09:20,244\nOne XenCenter managing two different\nservers, two different networks,\n\n1342\n01:09:20,244 --> 01:09:22,130\nnot really even clustered together.\n\n1343\n01:09:22,130 --> 01:09:25,770\nBut once we start actually putting\neverything onto a SAN and everything,\n\n1344\n01:09:25,770 --> 01:09:28,965\nstart sharing those resources out,\nthey will actually be clustered servers.\n\n1345\n01:09:28,965 --> 01:09:29,560\nMm-hm.\n\n1346\n01:09:29,560 --> 01:09:30,760\n>> Pretty neat.\n\n1347\n01:09:30,760 --> 01:09:32,130\n>> Now, that is pretty cool now, however,\n\n1348\n01:09:32,130 --> 01:09:37,470\nin Hyper-V Manager we can add more\nHyper-V servers within Hyper-V Manager,\n\n1349\n01:09:37,470 --> 01:09:42,890\nand so it, very cool, don't get me wrong,\nbut I'm still not quite blown away yet.\n\n1350\n01:09:42,890 --> 01:09:44,406\n>> Sure, you know you are.\n\n1351\n01:09:44,406 --> 01:09:46,450\n>> [LAUGH]\n>> [LAUGH] So, there it is,\n\n1352\n01:09:46,450 --> 01:09:50,340\nthere's a lot of different\nthings that we can begin to do.\n\n1353\n01:09:50,340 --> 01:09:54,120\nNow, we're pretty much at this point where\nwe're ready to start doing a couple of\n\n1354\n01:09:54,120 --> 01:09:56,940\nother things for us here,\nsuch as creating a new VM, but\n\n1355\n01:09:56,940 --> 01:10:00,500\nbefore we do that,\nwe have to get a couple things ready here,\n\n1356\n01:10:00,500 --> 01:10:05,810\nsuch as the idea of creating, how\nthe heck do I get access to these ISOs.\n\n1357\n01:10:05,810 --> 01:10:10,300\nSo I need to actually be able to do that\nas well, when we set this thing up here.\n\n1358\n01:10:10,300 --> 01:10:15,570\nSo at this point, let's see where we\nare in our time before we get into it.\n\n1359\n01:10:15,570 --> 01:10:17,450\nDo a little bit too much here and\n\n1360\n01:10:17,450 --> 01:10:21,660\nnot be able to get access to what I need,\nis where I'm going.\n\n1361\n01:10:21,660 --> 01:10:24,910\n>> Now Ronnie, so the server that we have,\n\n1362\n01:10:24,910 --> 01:10:29,720\nwe store all of our ISOs on,\nI robbed its network adapter.\n\n1363\n01:10:29,720 --> 01:10:32,610\n>> Oh, yeah.\n>> There's no connection, so if you try to\n\n1364\n01:10:32,610 --> 01:10:37,950\nset up that storage repository,\nyou may not be able to complete it.\n\n1365\n01:10:37,950 --> 01:10:38,940\n>> Yeah, that's fine.\n\n1366\n01:10:38,940 --> 01:10:42,893\nSo at this point here, what we're\ngonna do to get everything set up and\n\n1367\n01:10:42,893 --> 01:10:47,056\nmake sure that we can get connected,\nis to go ahead and check a few things.\n\n1368\n01:10:47,056 --> 01:10:51,398\nMaybe get connected back to our storage\npool repository before we can do anything.\n\n1369\n01:10:51,398 --> 01:10:55,320\nAnd then we can come back and\ncreate an actual server right away.\n\n1370\n01:10:55,320 --> 01:10:57,350\n>> All right, so yeah,\nthat's what you wanna do?\n\n1371\n01:10:57,350 --> 01:10:58,260\n>> That's what we should do.\n\n1372\n01:10:58,260 --> 01:10:58,820\n>> Sweet.\n\n1373\n01:10:58,820 --> 01:10:59,640\nAll right.\n\n1374\n01:10:59,640 --> 01:11:01,520\nOkay.\nSo let's go and do that.\n\n1375\n01:11:01,520 --> 01:11:06,660\nSo we are coming up here on break time,\nso to move forward with creating our VMs,\n\n1376\n01:11:06,660 --> 01:11:12,340\nwe do need those ISOs, and so I'll\nconnect that server back to the network.\n\n1377\n01:11:12,340 --> 01:11:15,210\nAnd here on break time,\nwe'll connect that stuff?\n\n1378\n01:11:15,210 --> 01:11:15,960\n>> Sounds good!\n\n1379\n01:11:15,960 --> 01:11:18,865\n>> Sweet, all right,\nwe'll get to that stuff after the break.\n\n1380\n01:11:18,865 --> 01:11:27,170\n>> [SOUND]\n>> All right, welcome back.\n\n1381\n01:11:27,170 --> 01:11:29,120\nAll right, so where we left off, right,\n\n1382\n01:11:29,120 --> 01:11:33,890\nwe got some of the configuration\nleft to do, a few items.\n\n1383\n01:11:33,890 --> 01:11:38,260\nWe gotta add in a little repository for\nour ISOs,\n\n1384\n01:11:38,260 --> 01:11:41,650\nso we can have something\nto Install onto our VMs.\n\n1385\n01:11:41,650 --> 01:11:45,136\nWe had to create a,\njust kind of a basic virtual machine,\n\n1386\n01:11:45,136 --> 01:11:48,420\nsomething that we can just spin up and\nuse right away.\n\n1387\n01:11:48,420 --> 01:11:49,567\n>> Yep.\n\n1388\n01:11:49,567 --> 01:11:52,753\nSo for us in terms of connecting to this,\nright,\n\n1389\n01:11:52,753 --> 01:11:57,882\nall we have to do is go up to Storage,\nAnd select new SR for storage repository,\n\n1390\n01:11:57,882 --> 01:12:02,320\nand then we are actually gonna\nget access to this ISO library.\n\n1391\n01:12:02,320 --> 01:12:06,990\nI created it on a Windows share, so\nI'm gonna select Windows File Sharing and\n\n1392\n01:12:06,990 --> 01:12:13,500\nthen click Next here and from here\nwe're actually creating an ISO library.\n\n1393\n01:12:13,500 --> 01:12:17,660\nEvery ISO that you actually want to build\na crate again virtual machines off of,\n\n1394\n01:12:17,660 --> 01:12:19,820\nI can store it here in this figure folder.\n\n1395\n01:12:21,430 --> 01:12:24,460\nNext, and the key to remember here\nbecause I just tried this and\n\n1396\n01:12:24,460 --> 01:12:28,590\nit didn't work, is to not do this\non the actual machine that you're\n\n1397\n01:12:28,590 --> 01:12:31,710\nworking on in terms of where\nzen server actually is.\n\n1398\n01:12:31,710 --> 01:12:36,650\nSo it does not like that, so I went\nahead and created it to another share.\n\n1399\n01:12:36,650 --> 01:12:41,540\nAnd now I'm going to actually go ahead and\nenter in my other credentials\n\n1400\n01:12:42,780 --> 01:12:47,800\nto let it mount there with my\ncredentials and there it goes, okay.\n\n1401\n01:12:47,800 --> 01:12:50,160\nSo at this point,\nI went ahead and created it and\n\n1402\n01:12:50,160 --> 01:12:55,480\nnow I have an iso library link\nover here on the left hand side.\n\n1403\n01:12:55,480 --> 01:12:57,890\nAnd now, in my ISO library link.\n\n1404\n01:12:57,890 --> 01:13:00,830\nThere it is, it actually sees\nthe share and the storage.\n\n1405\n01:13:00,830 --> 01:13:04,230\nIt's actually right there, and\nit sees the virtual disk, okay?\n\n1406\n01:13:04,230 --> 01:13:07,630\nThere is the ISO I actually have ready.\n\n1407\n01:13:07,630 --> 01:13:12,410\nAs I add in more, it will refresh every\ntime unless you continue to populate here.\n\n1408\n01:13:12,410 --> 01:13:14,385\nFrom this point, we can create a VM.\n\n1409\n01:13:14,385 --> 01:13:15,190\n>> Mm-hm.\n\n1410\n01:13:15,190 --> 01:13:15,830\n>> Right.\n\n1411\n01:13:15,830 --> 01:13:16,500\n>> All right, so\n\n1412\n01:13:16,500 --> 01:13:22,540\nif we are creating that VM Ronny, what's\nthe first steps now that we have our iso.\n\n1413\n01:13:22,540 --> 01:13:25,910\n>> Again, a couple of easy things that\nactually makes it very nice here,\n\n1414\n01:13:25,910 --> 01:13:29,190\nof course, is to be able to take a look\nat some of the simple tools that\n\n1415\n01:13:29,190 --> 01:13:29,870\nwe have available.\n\n1416\n01:13:29,870 --> 01:13:33,350\nI am just going to select this\nfirst Zen server to create it on.\n\n1417\n01:13:33,350 --> 01:13:36,770\nWe are, again distributing this, so\nwe don't have to tell it where to put it,\n\n1418\n01:13:36,770 --> 01:13:38,610\nwe could actually go ahead and create it.\n\n1419\n01:13:38,610 --> 01:13:41,590\nEven up here in the pool,\nnotice I could create a new VM there.\n\n1420\n01:13:41,590 --> 01:13:43,780\nI'm just gonna do it on the local machine.\n\n1421\n01:13:43,780 --> 01:13:46,285\nSelect the link here that says New VM.\n\n1422\n01:13:46,285 --> 01:13:47,380\n>> Mm-hm.\n\n1423\n01:13:47,380 --> 01:13:50,460\n>> And now we have different templates,\nright?\n\n1424\n01:13:50,460 --> 01:13:52,650\nThe templates here are not\nthe ISOs themselves.\n\n1425\n01:13:52,650 --> 01:13:55,500\nIn other words, they're not\nthe installation of the operating system.\n\n1426\n01:13:55,500 --> 01:13:58,830\nWhat they are are essentially\nthe hardware virtualization.\n\n1427\n01:13:58,830 --> 01:14:02,000\nWhat the requirements\nare on this bigger machine.\n\n1428\n01:14:02,000 --> 01:14:08,978\nSo the one that I actually have is\ngoing to be Windows 8, here, 64-bit.\n\n1429\n01:14:08,978 --> 01:14:10,760\nMine's actually 8.1.\n\n1430\n01:14:10,760 --> 01:14:12,480\nI haven't updated this server.\n\n1431\n01:14:12,480 --> 01:14:16,370\nIf I had updated it,\nI'd even get the new features there.\n\n1432\n01:14:18,350 --> 01:14:21,750\nAnd I can copy the host's\nbiostring if I want\n\n1433\n01:14:21,750 --> 01:14:24,290\nto make it report like there's\nactually a bios on the individual.\n\n1434\n01:14:24,290 --> 01:14:27,031\nI'm not gonna worry about\non the individual BM.\n\n1435\n01:14:27,031 --> 01:14:28,140\nSo let me select here.\n\n1436\n01:14:29,660 --> 01:14:32,505\nAnd then we'll just call\nthis one Windows 8.\n\n1437\n01:14:32,505 --> 01:14:33,730\n>> Mm-hm.\n\n1438\n01:14:33,730 --> 01:14:36,370\nNice and descriptive name.\n\n1439\n01:14:36,370 --> 01:14:37,740\n>> Yep.\n\n1440\n01:14:37,740 --> 01:14:41,940\nAnd then it's going to ask me where do I\nwant to actually install the operating\n\n1441\n01:14:41,940 --> 01:14:43,090\nsystem from.\n\n1442\n01:14:43,090 --> 01:14:47,910\nSo, because I actually went ahead and\nattached this to that one Zen server,\n\n1443\n01:14:47,910 --> 01:14:49,260\nI would install it from here.\n\n1444\n01:14:49,260 --> 01:14:52,890\nI could have attached it to the entire\npool, if I wanted to, and that way from\n\n1445\n01:14:52,890 --> 01:14:56,720\neach particular server, it could reach\nout and grab it from right there.\n\n1446\n01:14:56,720 --> 01:14:58,670\nI'm just going to leave it\nhere to make it nice and easy.\n\n1447\n01:15:00,140 --> 01:15:03,860\n>> I see the little radio dial\nbeneath that boot front network,\n\n1448\n01:15:03,860 --> 01:15:05,680\nso that's the pixie boot.\n\n1449\n01:15:05,680 --> 01:15:06,700\nIs that correct?\n\n1450\n01:15:06,700 --> 01:15:10,350\nSo if we did have a deployment\nserver out there on the network\n\n1451\n01:15:10,350 --> 01:15:11,770\nwe can just select this option here.\n\n1452\n01:15:11,770 --> 01:15:15,470\nWhen we spin up this VM it'll reach\nout to that deployment server and\n\n1453\n01:15:15,470 --> 01:15:16,350\npull it's image down.\n\n1454\n01:15:16,350 --> 01:15:17,160\n>> Sure.\nNice.\n\n1455\n01:15:17,160 --> 01:15:17,660\n>> Sounds good.\n\n1456\n01:15:18,810 --> 01:15:19,470\nYup.\n\n1457\n01:15:19,470 --> 01:15:21,070\nAnd then it's gonna ask me\nwhere I wanna place it.\n\n1458\n01:15:21,070 --> 01:15:23,650\nIf I had connected it to\nthe actual pool itself,\n\n1459\n01:15:23,650 --> 01:15:26,770\nit could've actually placed it\nbetween one of the two here.\n\n1460\n01:15:26,770 --> 01:15:30,035\nWe could have picked which one is its\nhome server, but I I just went in and\n\n1461\n01:15:30,035 --> 01:15:31,485\nselected it.\n\n1462\n01:15:31,485 --> 01:15:35,515\nSo, I'm gonna actually place\nit on this one, all right.\n\n1463\n01:15:37,116 --> 01:15:40,925\n>> And\nthen it's asking me the number of CPUs.\n\n1464\n01:15:40,925 --> 01:15:42,480\nI'm not gonna give it all four gigs.\n\n1465\n01:15:42,480 --> 01:15:44,442\n[LAUGH] Guess I could but\n\n1466\n01:15:44,442 --> 01:15:48,760\nlet me kinda downgrade that\njust by about two gigs here.\n\n1467\n01:15:48,760 --> 01:15:49,520\nWell maybe I can't.\n\n1468\n01:15:53,110 --> 01:15:56,440\nIt's not letting me use the spin\nup dial very easily, all right?\n\n1469\n01:15:56,440 --> 01:15:58,730\nSo once you put in two gigabytes of RAM.\n\n1470\n01:15:58,730 --> 01:15:59,270\nYup.\n\n1471\n01:15:59,270 --> 01:15:59,770\n>> All right.\n\n1472\n01:16:01,310 --> 01:16:02,950\n>> Let's be generous with the CPUs there.\n\n1473\n01:16:02,950 --> 01:16:03,700\nLet's do two.\n\n1474\n01:16:03,700 --> 01:16:05,480\nNice [LAUGH].\n\n1475\n01:16:05,480 --> 01:16:06,230\n>> All right.\n\n1476\n01:16:06,230 --> 01:16:08,050\nSo there it's actually gonna do that.\n\n1477\n01:16:08,050 --> 01:16:14,420\nI'm gonna create just a standard VHD file\nor the actual one that's actually in here.\n\n1478\n01:16:14,420 --> 01:16:17,760\nAnd I can remember it's VDI or\nsomething like that,\n\n1479\n01:16:17,760 --> 01:16:20,700\nwhatever the XenServer wants\nactually are by default here.\n\n1480\n01:16:20,700 --> 01:16:24,320\nSo it's gonna create a 24 gig file,\nis what it's gonna do.\n\n1481\n01:16:24,320 --> 01:16:26,640\nAnd then allow me to expand\nthat out if I need to.\n\n1482\n01:16:27,930 --> 01:16:31,510\nSo I can click on properties here,\nand if I wanted to,\n\n1483\n01:16:31,510 --> 01:16:33,310\nI could expand it out even right here.\n\n1484\n01:16:34,970 --> 01:16:40,370\nLet's just do a 64 gig one,\nprobably doesn't like the thousand there.\n\n1485\n01:16:40,370 --> 01:16:43,540\nNotice I can actually create it up to\nwell megabytes and terabytes here.\n\n1486\n01:16:43,540 --> 01:16:48,570\nWe're going to do it on the local storage\nand on using that template set up,\n\n1487\n01:16:48,570 --> 01:16:53,990\nso I didn't actually have to select a lot,\njust the ID of the CPU and how much RAM.\n\n1488\n01:16:53,990 --> 01:16:57,640\nFrom this point it's gonna\nconnect me to the default network\n\n1489\n01:16:57,640 --> 01:16:59,990\nthat it already generated by default here.\n\n1490\n01:16:59,990 --> 01:17:04,350\nWe can create those special networks as\nwell to isolate a network if we wanted to.\n\n1491\n01:17:04,350 --> 01:17:10,290\nSo this is gonna attach it to the default\none that XenServer actually has for us.\n\n1492\n01:17:10,290 --> 01:17:13,120\nAll right.\nIt's gonna autogenerate a new MAC address\n\n1493\n01:17:13,120 --> 01:17:14,930\nand a virtual NIC.\n\n1494\n01:17:14,930 --> 01:17:18,070\nAnd that's gonna give me a summary\nof everything that I have, and\n\n1495\n01:17:18,070 --> 01:17:22,900\nat the end here it says, hey create it\nI want to start it automatically so\n\n1496\n01:17:22,900 --> 01:17:27,610\nI can create now and\nin just a moment here, let's see if\n\n1497\n01:17:27,610 --> 01:17:32,240\nactually does spin it up here,\nwe should start seeing one get created.\n\n1498\n01:17:33,260 --> 01:17:34,780\nThere it goes, okay?\n\n1499\n01:17:34,780 --> 01:17:36,860\nSo, it went ahead and took a moment here,\n\n1500\n01:17:36,860 --> 01:17:40,880\nbut you see the Windows\n8 VM is now started.\n\n1501\n01:17:40,880 --> 01:17:46,020\nAnd now notice all of the actual\nproperties here are kind of tabbed out.\n\n1502\n01:17:46,020 --> 01:17:47,660\nAnd if I go to console,\n\n1503\n01:17:47,660 --> 01:17:52,200\nthis is as if I were sitting there on\nthe network, oh it did not like that.\n\n1504\n01:17:52,200 --> 01:17:55,060\nI forgot the ISO library.\n\n1505\n01:17:55,060 --> 01:17:57,360\nI forgot to actually put\nit in the Library itself.\n\n1506\n01:17:58,930 --> 01:18:00,540\nSo now we have to restart that thing.\n\n1507\n01:18:02,340 --> 01:18:03,080\nForce reboot it.\n\n1508\n01:18:05,650 --> 01:18:08,670\nSo apparently I did not\nselect the actual proper ISO.\n\n1509\n01:18:08,670 --> 01:18:12,590\nSo, give it a moment here to restart it.\n\n1510\n01:18:12,590 --> 01:18:14,070\nAlright, there it goes.\n\n1511\n01:18:14,070 --> 01:18:19,010\nSo now, it's actually in the install\nprocess of where Windows 8 is\n\n1512\n01:18:19,010 --> 01:18:23,400\nactually gonna run through the install,\n8.1 is gonna run through the install here.\n\n1513\n01:18:23,400 --> 01:18:26,420\nAnd, just take its time here and\ndo all the things it's doing.\n\n1514\n01:18:26,420 --> 01:18:27,260\nSo, there it goes.\n\n1515\n01:18:27,260 --> 01:18:30,730\n>> That is a cool cursor you have there,\nnormally.\n\n1516\n01:18:30,730 --> 01:18:32,790\nI'm used to seeing like the arrow.\n\n1517\n01:18:32,790 --> 01:18:33,650\n>> Yeah.\n\n1518\n01:18:33,650 --> 01:18:36,100\n>> But in there we get the square.\n\n1519\n01:18:36,100 --> 01:18:38,084\n>> Yeah because of the way\n>> [LAUGH]\n\n1520\n01:18:38,084 --> 01:18:40,062\n>> The actual video technology works,\n\n1521\n01:18:40,062 --> 01:18:42,791\nthis particular console\ncable is a fake console.\n\n1522\n01:18:42,791 --> 01:18:44,088\nSo, it doesn't like the\n\n1523\n01:18:44,088 --> 01:18:45,180\n>> [LAUGH]\n>> way it does it.\n\n1524\n01:18:45,180 --> 01:18:47,210\nNow you can actually see that I have\n>> Oh there it is\n\n1525\n01:18:47,210 --> 01:18:49,205\n>> An arrow as well as a dot.\n\n1526\n01:18:49,205 --> 01:18:52,096\n>> [LAUGH]\n>> And so it doesn't like this.\n\n1527\n01:18:52,096 --> 01:18:52,704\n>> [LAUGH]\n>> But for\n\n1528\n01:18:52,704 --> 01:18:55,360\nus\n>> We're just gonna use it to go ahead and\n\n1529\n01:18:55,360 --> 01:18:59,000\ntry and see if I can get access.\n\n1530\n01:18:59,000 --> 01:19:03,730\nAnd then select install now, and\nthere goes the process here, okay?\n\n1531\n01:19:03,730 --> 01:19:06,870\nSo it's not fancy in terms\nof the console itself.\n\n1532\n01:19:06,870 --> 01:19:10,490\nI don't have it set up for remote, but\nonce I do and get everything ready,\n\n1533\n01:19:10,490 --> 01:19:15,190\nI can remote into it like a regular\nVM at this point, and keep it going.\n\n1534\n01:19:15,190 --> 01:19:19,380\n>> All right, sweet so let's see oh yeah.\n\n1535\n01:19:19,380 --> 01:19:25,030\nI guess we'll just continue on and finish\nthe yup, installation processed this.\n\n1536\n01:19:25,030 --> 01:19:25,880\nAt this point,\n\n1537\n01:19:25,880 --> 01:19:30,270\neven though it is a virtual machine, this\none will just be a typical installation.\n\n1538\n01:19:30,270 --> 01:19:30,850\n>> Ace install.\n\n1539\n01:19:30,850 --> 01:19:33,400\n>> Yup.\nAnyone who has installed Windows 8 before,\n\n1540\n01:19:33,400 --> 01:19:38,000\nthis process should be pretty\nfamiliar; nothing different\n\n1541\n01:19:38,000 --> 01:19:40,050\nas opposed to being in a virtual machine.\n\n1542\n01:19:40,050 --> 01:19:44,210\nThe hardest thing for us is making sure\nthat that storage repository is connected.\n\n1543\n01:19:44,210 --> 01:19:46,862\nI tried to connect it to a storage\nrepository on my own machine that was\n\n1544\n01:19:46,862 --> 01:19:48,890\nrunning zen server,\nit wouldn't have any of that.\n\n1545\n01:19:48,890 --> 01:19:51,741\nAs soon as I gave it another network\nshare, it worked perfectly fine.\n\n1546\n01:19:51,741 --> 01:19:55,062\nSo that took me a little bit of time,\nbut that's pretty much the key here.\n\n1547\n01:19:55,062 --> 01:19:55,735\nOkay.\n\n1548\n01:19:55,735 --> 01:19:59,740\nSo the install process in\ngetting it up and running.\n\n1549\n01:19:59,740 --> 01:20:04,640\nFrom installing XenServer to the point\nof installing XenCenter getting\n\n1550\n01:20:04,640 --> 01:20:09,310\nthe storage repository up and\ngetting a virtual machine started.\n\n1551\n01:20:09,310 --> 01:20:12,740\nIf we weren't sitting here explaining it\nit could actually take just about ten or\n\n1552\n01:20:12,740 --> 01:20:14,000\nfifteen minutes and\n\n1553\n01:20:14,000 --> 01:20:18,150\nwe'd be up and running in terms of\ngetting ready to actually install VM's.\n\n1554\n01:20:18,150 --> 01:20:20,120\nNow because we actually took\na little bit of time to explain it,\n\n1555\n01:20:20,120 --> 01:20:21,950\nwe wanted you to see some\nof the features here.\n\n1556\n01:20:21,950 --> 01:20:23,730\nTakes a little bit more time.\n\n1557\n01:20:23,730 --> 01:20:27,370\nBut overall though, if you're on a high\nperformance server this wouldn't actually\n\n1558\n01:20:27,370 --> 01:20:30,495\ntake any time at all in terms\nof spinning up the the VM.\n\n1559\n01:20:30,495 --> 01:20:35,295\nThe nice thing about doing this,\nis the ability to also create a template.\n\n1560\n01:20:35,295 --> 01:20:38,355\nSo that I can clone this\nmachine right away.\n\n1561\n01:20:38,355 --> 01:20:41,365\nAnd actually have it build another\none once it's actually done.\n\n1562\n01:20:41,365 --> 01:20:43,235\nAnd now make that a template as well.\n\n1563\n01:20:43,235 --> 01:20:45,930\nSo, with the operative system\ninstalled and everything.\n\n1564\n01:20:45,930 --> 01:20:48,890\nI don't have to ask you to rebuild this\never again in terms of installing unless\n\n1565\n01:20:48,890 --> 01:20:50,150\nI wanted to.\n\n1566\n01:20:50,150 --> 01:20:53,380\nI'd just make it a template,\nand then spin the template up.\n\n1567\n01:20:53,380 --> 01:20:55,259\nIt's ready to go at this point,\n\n1568\n01:20:55,259 --> 01:21:00,570\nand we're to actually rock with two\nWindows 8.1 machines that we needed to.\n\n1569\n01:21:00,570 --> 01:21:01,610\nSo it's pretty neat.\n\n1570\n01:21:01,610 --> 01:21:02,240\n>> Nice.\n\n1571\n01:21:02,240 --> 01:21:06,010\nAll right, Ronnie, well good deal, well.\n\n1572\n01:21:06,010 --> 01:21:09,320\nWe do have quite a bit of\ntime left on our break here,\n\n1573\n01:21:09,320 --> 01:21:13,280\nbut we do need to wait for this virtual\nmachine to finish installing, so\n\n1574\n01:21:13,280 --> 01:21:15,220\nwe can take a look at some of its specs.\n\n1575\n01:21:15,220 --> 01:21:18,900\nWe gotta add it and take a look at its\nperformance, and those sorts of things.\n\n1576\n01:21:18,900 --> 01:21:24,860\nNow the next set that we do have\nlined up is to create an advanced VM.\n\n1577\n01:21:24,860 --> 01:21:29,220\nSo or an advanced, or\nI guess more like a customized.\n\n1578\n01:21:29,220 --> 01:21:33,140\nCustomized virtual machine\nI guess think of it\n\n1579\n01:21:33,140 --> 01:21:37,820\nkind of like a scenario that we'll have\nand spin up some machines that route.\n\n1580\n01:21:37,820 --> 01:21:38,410\n>> Right.\n\n1581\n01:21:38,410 --> 01:21:42,530\n>> But,\nwe'll say that after this guy finishes.\n\n1582\n01:21:42,530 --> 01:21:46,420\nRonnie, anything else before\nwe wrap this one up right now?\n\n1583\n01:21:46,420 --> 01:21:49,330\n>> Nope, so we've brought you through to\nthe point where we've installed an actual\n\n1584\n01:21:49,330 --> 01:21:49,930\nVM here.\n\n1585\n01:21:49,930 --> 01:21:51,850\nSo, it's in the process of installing.\n\n1586\n01:21:51,850 --> 01:21:53,780\nIt will work and when we come back for\n\n1587\n01:21:53,780 --> 01:21:56,060\nour next series we'll see\nthis machine working.\n\n1588\n01:21:56,060 --> 01:21:59,290\nI'm also go ahead and install the\nWindows Server 2012 machine on there and\n\n1589\n01:21:59,290 --> 01:22:02,720\nwe'll create some advanced features,\nor some customized features for us\n\n1590\n01:22:02,720 --> 01:22:06,680\nin this environment and see how well they\nactually work together for us as well.\n\n1591\n01:22:06,680 --> 01:22:09,130\nSo, at this point, you've seen a lot.\n\n1592\n01:22:09,130 --> 01:22:12,990\nIt actually works very well and\nfairly simple to install.\n\n1593\n01:22:12,990 --> 01:22:15,060\nSo, again,\nbe familiar with this technology.\n\n1594\n01:22:15,060 --> 01:22:16,440\nYou're gonna see it everywhere.\n\n1595\n01:22:16,440 --> 01:22:19,560\n>> All right, well we'll go ahead and\nwrap it up right here.\n\n1596\n01:22:19,560 --> 01:22:22,000\nWe do have a bit to go through but\nthis will be all for now.\n\n1597\n01:22:22,000 --> 01:22:24,600\nIf you ever have any\nquestions during the show,\n\n1598\n01:22:24,600 --> 01:22:28,100\nright below our live page we have\na little chat monitor lined up.\n\n1599\n01:22:28,100 --> 01:22:30,120\nGo ahead, type stuff in there, blow it up.\n\n1600\n01:22:30,120 --> 01:22:33,080\nWe got a little monitor here we\ncan respond and get back to you.\n\n1601\n01:22:33,080 --> 01:22:36,900\nIf you ever have any questions after\nthe show, you can jump into the Q and\n\n1602\n01:22:36,900 --> 01:22:39,470\nA section at the top of every webpage.\n\n1603\n01:22:40,820 --> 01:22:44,610\nJump into the forums and\ndrop us a line, we'll get back to you.\n\n1604\n01:22:44,610 --> 01:22:47,940\nAnd if you're ever away from your PC you\ncan always check us out on the Roku,\n\n1605\n01:22:47,940 --> 01:22:52,770\nwe've got a channel up there and\nwatch us on the comfort of your own couch.\n\n1606\n01:22:52,770 --> 01:22:56,300\nAll right, well signing out for\nITProTV, I'm Nathan Copeland.\n\n1607\n01:22:56,300 --> 01:22:56,900\n>> And I'm Ronnie Wong.\n\n1608\n01:22:56,900 --> 01:22:58,766\n>> And we'll see you next time.\n\n1609\n01:22:58,766 --> 01:23:08,766\n[MUSIC]\n\n1610\n01:23:10,945 --> 01:23:15,610\n[NOISE]\n\n",
          "vimeoId": "97543968"
        },
        {
          "description": "",
          "length": "4501",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/citrixxenserver/002-Advanced-Configuration.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/citrixxenserver/002-Advanced-Configuration-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/citrixxenserver/002-Advanced-Configuration-sm.jpg",
          "title": "Advanced Configuration",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:30,503 --> 00:00:33,297\nAll right, good morning,\ngood afternoon, and good evening, and\n\n3\n00:00:33,297 --> 00:00:35,171\nwelcome back to another\nepisode of ITProTV.\n\n4\n00:00:35,171 --> 00:00:35,671\nI'm your host, Don Pezet.\n\n5\n00:00:36,900 --> 00:00:40,140\nToday back with another\nepisode of XenServer.\n\n6\n00:00:40,140 --> 00:00:42,009\nThis is one of our special shows, and\n\n7\n00:00:42,009 --> 00:00:45,264\nwe're not actually lining up with\na sort of vacation this time,\n\n8\n00:00:45,264 --> 00:00:48,876\nwe're just covering a really cool\ntechnology to help make you aware.\n\n9\n00:00:48,876 --> 00:00:54,200\nXenServer, as we talked about in the first\nepisode, is a free of charge product\n\n10\n00:00:54,200 --> 00:00:58,720\nfrom Citrix they charge for support of\ncourse, but the product itself is free.\n\n11\n00:00:58,720 --> 00:01:01,250\nAnd that makes it really\nattractive to small and\n\n12\n00:01:01,250 --> 00:01:04,220\nmedium businesses that are looking\nto get into virtualization.\n\n13\n00:01:04,220 --> 00:01:08,270\nWithout the huge price hit that you\nget with something like VMware.\n\n14\n00:01:08,270 --> 00:01:12,700\nNow Ronnie and Nate in the first episode\nshowed you guys how to install ZenServer.\n\n15\n00:01:12,700 --> 00:01:16,170\nAnd you got your first glimpse at getting\na virtual machine up and running.\n\n16\n00:01:16,170 --> 00:01:20,310\nThey brought up a Windows machine,\nand they threw the xen-tools\n\n17\n00:01:20,310 --> 00:01:24,120\non there to get it nice and working\nhappy inside of the Xen environment.\n\n18\n00:01:24,120 --> 00:01:27,950\nToday what I'm gonna do is I'm gonna show\nyou the same thing but with a Linux host.\n\n19\n00:01:27,950 --> 00:01:29,770\nWe'll get that fired up and going.\n\n20\n00:01:29,770 --> 00:01:32,720\nAnd then we'll show some advanced\nconfiguration that we might want to do\n\n21\n00:01:32,720 --> 00:01:36,080\non our virtual machines just to keep\nour environment running smoothly.\n\n22\n00:01:36,080 --> 00:01:38,400\nand take advantage of some\nof the cooler features.\n\n23\n00:01:38,400 --> 00:01:40,920\nAnd we should have plenty\nof time this episode.\n\n24\n00:01:40,920 --> 00:01:44,590\nI want to do a quick\nexample of clustering also\n\n25\n00:01:44,590 --> 00:01:47,890\nto cluster a couple of XenServers\ntogether for high-availability purposes.\n\n26\n00:01:47,890 --> 00:01:49,320\nSo really, really cool stuff.\n\n27\n00:01:49,320 --> 00:01:52,000\nThat's what we're shooting for\nhere in this episode.\n\n28\n00:01:52,000 --> 00:01:54,640\nSo let's go ahead and get started.\n\n29\n00:01:54,640 --> 00:01:58,130\nFirst thing I wanna do is, you guys got\na chance to see installing a Windows\n\n30\n00:01:58,130 --> 00:02:02,210\nmachine, and so what they did is\nthey create a virtual machine, and\n\n31\n00:02:02,210 --> 00:02:06,730\nthey told it they wanted to install an\noperating system from a Windows ISO image.\n\n32\n00:02:06,730 --> 00:02:10,160\nWell I've done the exact\nsame thing except for Linux.\n\n33\n00:02:10,160 --> 00:02:16,210\nI've got my ISO library here and\nI grabbed a CentOS 6.5 installer DVD.\n\n34\n00:02:16,210 --> 00:02:17,720\nSo I've just got that there.\n\n35\n00:02:17,720 --> 00:02:19,510\nAnd I created a new virtual machine but\n\n36\n00:02:19,510 --> 00:02:22,200\ninstead of choosing Windows,\nI chose Linux, right?\n\n37\n00:02:22,200 --> 00:02:23,760\nEasy enough to do.\n\n38\n00:02:23,760 --> 00:02:26,468\nEven easier if you worry\nabout security at all.\n\n39\n00:02:26,468 --> 00:02:28,120\nBut [LAUGH] so,\n\n40\n00:02:28,120 --> 00:02:32,100\nif we go to create a new virtual machine,\nyou 'll see all our various options and\n\n41\n00:02:32,100 --> 00:02:36,360\nthe Windows stuff is listed first because\nCitirx, they know that their market is.\n\n42\n00:02:36,360 --> 00:02:40,330\nBut if you go down a little further,\nyou'll start to see CentOS, Debian,\n\n43\n00:02:40,330 --> 00:02:43,680\nOracle Enterprise, Linux,\nRed Hat and so on.\n\n44\n00:02:43,680 --> 00:02:45,110\nYou pick the appropriate one.\n\n45\n00:02:45,110 --> 00:02:48,350\nNow the version numbers here\nare a little bit specific.\n\n46\n00:02:48,350 --> 00:02:51,810\nIf you got Su -c Linux 11.\n\n47\n00:02:51,810 --> 00:02:56,940\nAnd you choose a Su -c Linux 10 template,\nit does cause problems.\n\n48\n00:02:56,940 --> 00:03:00,470\nIt's doing various configurations on the\nback end to make sure the virtual machine\n\n49\n00:03:00,470 --> 00:03:03,600\nis set up to work for the version of\nthe operating system that you have.\n\n50\n00:03:03,600 --> 00:03:05,240\nSo you need to choose the correct one.\n\n51\n00:03:05,240 --> 00:03:08,400\nNow, if your operating\nsystem is not in the list,\n\n52\n00:03:08,400 --> 00:03:09,920\nit doesn't mean you're out of luck.\n\n53\n00:03:09,920 --> 00:03:12,550\nIt just means that Citrix\nhasn't fully tested and\n\n54\n00:03:12,550 --> 00:03:15,330\ncertified that OS for your system.\n\n55\n00:03:15,330 --> 00:03:19,020\nSo for example, just yesterday, well,\nI guess it depends on when you watch this\n\n56\n00:03:19,020 --> 00:03:23,580\nepisode, but if you're watching it live,\njust yesterday CentOS 7 came out.\n\n57\n00:03:23,580 --> 00:03:27,350\nAnd if I go up here and look,\nI'll see that CentOS 7 is not on my list.\n\n58\n00:03:27,350 --> 00:03:29,280\nSix is the highest that it goes.\n\n59\n00:03:29,280 --> 00:03:31,960\nWell does that mean\nthat I can't run seven?\n\n60\n00:03:31,960 --> 00:03:32,580\nMaybe.\n\n61\n00:03:32,580 --> 00:03:34,390\nIt may not be compatible\nwith XenServer yet.\n\n62\n00:03:34,390 --> 00:03:38,390\nBut you can always take a stab at it by\nscrolling down to the very bottom and\n\n63\n00:03:38,390 --> 00:03:41,210\nchoosing other install media.\n\n64\n00:03:41,210 --> 00:03:42,790\nOther install media just means.\n\n65\n00:03:42,790 --> 00:03:46,630\nHey lets go with the default options in\nXenServer, you can tweak them as needed.\n\n66\n00:03:46,630 --> 00:03:49,460\nThen you can figure out what it\ntakes to get that OS up and running.\n\n67\n00:03:49,460 --> 00:03:52,550\nReally useful, if you're gonna\nrun something like OpenBSD or\n\n68\n00:03:52,550 --> 00:03:58,120\nother operating systems that just aren't\non Citrix's radar for support, all right?\n\n69\n00:03:58,120 --> 00:04:02,890\nBut in my case, I'm going CentOS, which\nis right here in the supported platforms.\n\n70\n00:04:02,890 --> 00:04:06,290\nI just need to pick whether it's 32-bit or\n64-bit, right?\n\n71\n00:04:06,290 --> 00:04:09,490\nFrom there the creation process\nis pretty much the same, right?\n\n72\n00:04:09,490 --> 00:04:10,980\nWe just move forward.\n\n73\n00:04:10,980 --> 00:04:12,740\nAnd we give it a name.\n\n74\n00:04:12,740 --> 00:04:14,520\nSo this is my Linux machine.\n\n75\n00:04:16,870 --> 00:04:19,150\nAnd we tell it where we're\ngoing to install from.\n\n76\n00:04:19,150 --> 00:04:23,520\nAnd we could install from a physical\nDVD or from a ISO which is what I have.\n\n77\n00:04:26,270 --> 00:04:28,600\nAnd we pick which server\nit's gonna reside on.\n\n78\n00:04:28,600 --> 00:04:30,990\nNow, if you've only got one\nserver you won't see this screen.\n\n79\n00:04:30,990 --> 00:04:33,470\nIn my case I've got two servers\nwhich is why it's asking.\n\n80\n00:04:33,470 --> 00:04:37,660\nBut because of the way I chose he DVD\nit's tied to this server right there.\n\n81\n00:04:39,070 --> 00:04:41,820\nIt'll ask for how many CPUs and\nhow much memory I need.\n\n82\n00:04:41,820 --> 00:04:45,232\nAnd that depends on what I'm\nplan on using this machine for.\n\n83\n00:04:45,232 --> 00:04:48,190\nYou wanna write size it for\nif you're doing a database server or\n\n84\n00:04:48,190 --> 00:04:49,740\na web server, or whatever.\n\n85\n00:04:49,740 --> 00:04:51,400\nWe can always come back and\nchange this later.\n\n86\n00:04:51,400 --> 00:04:53,120\nI'll show you guys that in a few moments.\n\n87\n00:04:55,440 --> 00:04:56,650\nThen you pick your storage.\n\n88\n00:04:56,650 --> 00:04:57,690\nWhere it's gonna reside and\n\n89\n00:04:57,690 --> 00:05:01,980\nyou'll see the template here is defaulting\nto eight gigabytes for this install.\n\n90\n00:05:01,980 --> 00:05:04,960\nFor a Linux server eight gigabytes\nis usually plenty of space and\n\n91\n00:05:04,960 --> 00:05:06,450\nit's probably enough for us.\n\n92\n00:05:06,450 --> 00:05:08,790\nIf it's not we can change it right here.\n\n93\n00:05:08,790 --> 00:05:12,670\nYou can pull up the properties and\nadjust that size and make it bigger.\n\n94\n00:05:12,670 --> 00:05:14,670\nI don’t believe it’ll\nlet you make it smaller.\n\n95\n00:05:14,670 --> 00:05:17,931\nYeah, it won’t let you make it smaller,\nbut you can make it bigger, and\n\n96\n00:05:17,931 --> 00:05:20,069\nyou can add more than one\nhard drive if you want,\n\n97\n00:05:20,069 --> 00:05:22,128\nif you have need to\nmultiple virtual drives.\n\n98\n00:05:24,503 --> 00:05:26,621\nAnd then lastly,\nwe specify our networking,\n\n99\n00:05:26,621 --> 00:05:29,850\nwhat network it’s gonna be connected\nto if we have more than one.\n\n100\n00:05:29,850 --> 00:05:32,950\nWe'll take a look at the networking\nside of XenServer a little bit later.\n\n101\n00:05:32,950 --> 00:05:35,170\nAnd then when we're done,\nwe just finish and\n\n102\n00:05:35,170 --> 00:05:38,080\nit's gonna create that virtual machine and\nstart the install.\n\n103\n00:05:38,080 --> 00:05:40,450\nNow to save a little bit of time,\nI went ahead and\n\n104\n00:05:40,450 --> 00:05:42,230\nstarted that install before the show.\n\n105\n00:05:42,230 --> 00:05:44,250\nSo I've got it running right here.\n\n106\n00:05:44,250 --> 00:05:47,810\nAnd we'll see here the install just\nfinished, and it's asking me to reboot, so\n\n107\n00:05:47,810 --> 00:05:50,710\nI'll go ahead and let that reboot, and\nwe'll get a chance to see what happens.\n\n108\n00:05:50,710 --> 00:05:54,810\nNow, here's where we're gonna start seeing\nthe big difference between a Linux install\n\n109\n00:05:54,810 --> 00:05:56,260\nand a Windows install.\n\n110\n00:05:56,260 --> 00:06:00,290\nWith Windows, we reboot,\nwe get a nice graphical user interface.\n\n111\n00:06:00,290 --> 00:06:02,590\nAnd we need to install our Xen-tools,\nright.\n\n112\n00:06:02,590 --> 00:06:06,280\nSo you just pop in the Xen-tools disc and\na nice graphical wizard pops up and\n\n113\n00:06:06,280 --> 00:06:08,230\nyou walk through it and\neverything's happy.\n\n114\n00:06:08,230 --> 00:06:10,890\nWell, on the Linux side,\nwe don't have that.\n\n115\n00:06:10,890 --> 00:06:12,800\nWe have a script that we need to run.\n\n116\n00:06:12,800 --> 00:06:16,010\nSo there's a few little steps we're gonna\nhave to go through to get the system\n\n117\n00:06:16,010 --> 00:06:19,670\nworking for us as far as,\nhaving the Xen-tools installed.\n\n118\n00:06:19,670 --> 00:06:22,210\nSo that's what I'm gonna take\na look at as soon as this is up.\n\n119\n00:06:22,210 --> 00:06:22,722\nThere we go.\n\n120\n00:06:22,722 --> 00:06:26,630\nAnd i'm just gonna log\nin with the username and\n\n121\n00:06:26,630 --> 00:06:28,560\npassword that was defined\nduring the setup.\n\n122\n00:06:30,850 --> 00:06:32,630\nAnd we see,\ncan I make that a little bit bigger?\n\n123\n00:06:35,570 --> 00:06:38,180\nTry and make this where we\ncan read it a little easier.\n\n124\n00:06:38,180 --> 00:06:38,680\nThere we go.\n\n125\n00:06:39,760 --> 00:06:42,120\nAll right, so\nif I wanna install the Xen-tools.\n\n126\n00:06:42,120 --> 00:06:44,460\nWell first, how do I know\nthe Xen-tools are not installed?\n\n127\n00:06:44,460 --> 00:06:45,280\nRight?\nAnd maybe they are.\n\n128\n00:06:45,280 --> 00:06:46,780\nMaybe they were installed automatically.\n\n129\n00:06:46,780 --> 00:06:47,770\nI don't know.\n\n130\n00:06:47,770 --> 00:06:51,140\nWell, the way we can find out\nis back here in Xen center.\n\n131\n00:06:51,140 --> 00:06:54,100\nIf you click on your virtual machine and\nyou.\n\n132\n00:06:54,100 --> 00:06:55,030\nActually, well.\n\n133\n00:06:55,030 --> 00:06:55,710\nYeah, you can see here.\n\n134\n00:06:55,710 --> 00:06:58,170\nIf you click on your virtual machine and\nyou click on general.\n\n135\n00:06:58,170 --> 00:07:01,710\nIn here you should see whether\nXen-tools are installed.\n\n136\n00:07:01,710 --> 00:07:05,480\nSee how it's got virtualization state\nXen server tools not installed?\n\n137\n00:07:05,480 --> 00:07:06,430\nSo right there I can see it.\n\n138\n00:07:06,430 --> 00:07:08,230\nNow, I hesitated when I said that and\n\n139\n00:07:08,230 --> 00:07:10,810\nthat's because that's not\nhow I normally check.\n\n140\n00:07:10,810 --> 00:07:13,826\nI normally like to check across multiple\nvirtual machines at the same time.\n\n141\n00:07:13,826 --> 00:07:15,620\nWhat if you've got 50 virtual machines?\n\n142\n00:07:15,620 --> 00:07:17,810\nYou don't' wanna go check\neach one individually.\n\n143\n00:07:17,810 --> 00:07:19,800\nSo you can do it from the server.\n\n144\n00:07:19,800 --> 00:07:24,710\nIf you go to the server and choose the\nSearch tab, right here in the Search tab\n\n145\n00:07:24,710 --> 00:07:29,750\nyou've got the used memory,\ndisks, and network information.\n\n146\n00:07:29,750 --> 00:07:33,280\nAnd those are all going to be blank\nif Xen-tools aren't installed.\n\n147\n00:07:33,280 --> 00:07:35,160\nThat's where we get that\ninformation from so\n\n148\n00:07:35,160 --> 00:07:38,950\nit's really easy to spot which virtual\nmachines have it, and which ones don't.\n\n149\n00:07:38,950 --> 00:07:40,490\nThat's what I normally do.\n\n150\n00:07:40,490 --> 00:07:41,396\nMakes life a little easier.\n\n151\n00:07:41,396 --> 00:07:47,200\nAll right, so in my case, I don't have\nit installed and I want it installed.\n\n152\n00:07:47,200 --> 00:07:49,121\nSo we need to get that done, all right?\n\n153\n00:07:49,121 --> 00:07:54,050\nSo just like in Windows, we'll go and\npop in that Xen-tools disk.\n\n154\n00:07:54,050 --> 00:07:56,710\nSo I'll just use the storage\ndrop down box there to pop in.\n\n155\n00:07:56,710 --> 00:07:58,170\nI'll give it just a moment.\n\n156\n00:07:58,170 --> 00:08:01,951\nAnd it's just giving me a little\nwarning there, all right.\n\n157\n00:08:01,951 --> 00:08:03,130\nGot over it.\n\n158\n00:08:03,130 --> 00:08:05,320\nAll right so now the disk is in the drive.\n\n159\n00:08:05,320 --> 00:08:06,740\nOh the disk is not in the drive.\n\n160\n00:08:06,740 --> 00:08:07,670\nLet's see what happened there.\n\n161\n00:08:13,096 --> 00:08:16,625\nWith Windows,\nyou can pop out a DVD at any time.\n\n162\n00:08:16,625 --> 00:08:19,475\nWIth Linux,\nthe DVD will typically stay mounted.\n\n163\n00:08:19,475 --> 00:08:22,275\nAnd when it finished the install,\nit rebooted and was suppose to eject it.\n\n164\n00:08:22,275 --> 00:08:26,580\nIn this case, it may not have, so I have\nto do a reboot before it freezes that up.\n\n165\n00:08:26,580 --> 00:08:29,388\nSo I'm gonna give it just a second here,\nand,\n\n166\n00:08:29,388 --> 00:08:34,471\nactually Let's just make sure.\n\n167\n00:08:34,471 --> 00:08:35,359\nWe'll do a reboot,\n\n168\n00:08:35,359 --> 00:08:38,720\nthat'll make sure anything I got\nthat's mounted will be unmounted.\n\n169\n00:08:38,720 --> 00:08:40,460\nI could also go and\npull up the mount points, but\n\n170\n00:08:40,460 --> 00:08:43,820\nI don't think they're gonna be there,\nI think it's just stuck on the back end.\n\n171\n00:08:43,820 --> 00:08:46,840\nOnce you pop that disc in, though,\nwe'll be able to mount it and\n\n172\n00:08:46,840 --> 00:08:51,280\nwe'll find that there's a little script,\njust bash or a .sh script\n\n173\n00:08:51,280 --> 00:08:55,250\nthat's right there and we can run it and\nit'll take care of installing the tools.\n\n174\n00:08:55,250 --> 00:08:56,190\nIt's not a GUI.\n\n175\n00:08:56,190 --> 00:08:59,860\nWe don't get a lot of questions,\nit just runs through and does the install.\n\n176\n00:08:59,860 --> 00:09:04,630\nIt has the Linux tools package for\nDebian, Red Hat, Cent OS.\n\n177\n00:09:04,630 --> 00:09:10,520\nSo we'll see several packages that are all\nin there, just waiting for us to use them.\n\n178\n00:09:10,520 --> 00:09:11,580\nAll right.\n\n179\n00:09:11,580 --> 00:09:12,930\nSo here, let's try this again.\n\n180\n00:09:12,930 --> 00:09:14,580\nI'm gonna go ahead and pop in that disk.\n\n181\n00:09:16,140 --> 00:09:17,760\nWe'll give it just a moment.\n\n182\n00:09:17,760 --> 00:09:18,390\nThere we go.\n\n183\n00:09:20,330 --> 00:09:20,950\nAll right now,\n\n184\n00:09:20,950 --> 00:09:24,290\nmounting a disk if you're familiar with\nLinux is a pretty straightforward process.\n\n185\n00:09:24,290 --> 00:09:26,560\nWe need to make a directory somewhere.\n\n186\n00:09:26,560 --> 00:09:31,620\nI usually use /mnt/cdrom and\nI'm just gonna mount that\n\n187\n00:09:31,620 --> 00:09:35,734\ndevice /dev/cdrom to /mnt/cdrom.\n\n188\n00:09:35,734 --> 00:09:38,140\nIt doesn't really matter\nwhere you mount it.\n\n189\n00:09:38,140 --> 00:09:40,190\nJust mount it somewhere\nwhere you can get to it.\n\n190\n00:09:43,280 --> 00:09:48,970\nAnd then, on that CD you'll find\na directory called Linux, all right.\n\n191\n00:09:48,970 --> 00:09:52,580\nThe Windows installers, they're all right\nthere in the root of the DVD, right.\n\n192\n00:09:52,580 --> 00:09:54,570\nAgain, Citrix knows who their market is,\n\n193\n00:09:54,570 --> 00:09:58,980\nmost of the people that they deal with as\ncustomers are Windows customers because of\n\n194\n00:09:58,980 --> 00:10:02,520\nCitrix XenApp and XenDesktop,\ntheir big products.\n\n195\n00:10:02,520 --> 00:10:03,350\nThose run on Windows.\n\n196\n00:10:03,350 --> 00:10:06,930\nThat's what they need so\nthat's why they cater towards Windows.\n\n197\n00:10:06,930 --> 00:10:10,040\nBut it doesn't mean we can't use Linux,\nthey've got full support for it.\n\n198\n00:10:10,040 --> 00:10:13,630\nAnd in fact XenServer itself is\nrunning Linux under the hood.\n\n199\n00:10:13,630 --> 00:10:16,940\nSo I'm just gonna change\ninto that directory.\n\n200\n00:10:16,940 --> 00:10:20,070\nAnd you'll see in there install.sh, right.\n\n201\n00:10:20,070 --> 00:10:21,700\nThat's the installer script.\n\n202\n00:10:21,700 --> 00:10:25,930\nYou'll see the install packages also, you\ncould install these directly if you want.\n\n203\n00:10:25,930 --> 00:10:28,220\nBut the installer script\nis a little bit easier.\n\n204\n00:10:28,220 --> 00:10:31,098\nYou'll see the Debian packages,\nRPMs for Red Hat and Cent OS,\n\n205\n00:10:31,098 --> 00:10:32,960\nthey're all just sitting right there.\n\n206\n00:10:34,510 --> 00:10:37,740\nAnd if I call that script, so\nI'm just going to run install.sh.\n\n207\n00:10:37,740 --> 00:10:40,810\nIt's going to let me know\nwhat it's going to do,\n\n208\n00:10:40,810 --> 00:10:44,940\nit's going to install the utilities and\nthe XenStore and I'll just say yes.\n\n209\n00:10:44,940 --> 00:10:46,000\nAnd there we go, right.\n\n210\n00:10:46,000 --> 00:10:48,170\nReal quick, nothing too crazy there.\n\n211\n00:10:48,170 --> 00:10:52,030\nIt does require a reboot for them to work\nso I'll go ahead and give it a reboot.\n\n212\n00:10:54,340 --> 00:10:57,785\nThere it goes and\nwhen it's done rebooting,\n\n213\n00:10:57,785 --> 00:11:00,295\nI should now have the xen-tools on here,\nand how do I know?\n\n214\n00:11:00,295 --> 00:11:02,985\nWell, I'll go back to the XenCnter,\nand right from there,\n\n215\n00:11:02,985 --> 00:11:05,255\nI'll be able to verify that\nthe tools are present.\n\n216\n00:11:05,255 --> 00:11:10,735\nLet's give it a chance to reboot here,\nand then we'll see that in action.\n\n217\n00:11:10,735 --> 00:11:12,645\nSo a little bit more\ninvolved than Windows.\n\n218\n00:11:12,645 --> 00:11:14,035\nWindows you just double click on an icon.\n\n219\n00:11:14,035 --> 00:11:15,245\nHere we have to run script.\n\n220\n00:11:15,245 --> 00:11:17,225\nBut once it's done, that's it.\n\n221\n00:11:17,225 --> 00:11:19,145\nWe're up and running.\n\n222\n00:11:19,145 --> 00:11:21,950\nThere, looks like we're all logged in,\nso I'm just gonna go back here.\n\n223\n00:11:21,950 --> 00:11:24,080\nAnd taking a look at\nthat same Linux server,\n\n224\n00:11:24,080 --> 00:11:29,060\nI can see now my virtualization state\nis optimized version 6.2 installed.\n\n225\n00:11:29,060 --> 00:11:33,130\nAnd going back to my server view,\nnow for that Linux server,\n\n226\n00:11:33,130 --> 00:11:37,480\nI've got my memory utilization,\nmy disk IO data,\n\n227\n00:11:37,480 --> 00:11:40,690\nall of that information is now coming\nin from the virtual machines, right.\n\n228\n00:11:40,690 --> 00:11:45,120\nSo standard process, just install using\nthat script and you are in business.\n\n229\n00:11:46,330 --> 00:11:48,960\nAll right,\nnow when we install the virtual machine,\n\n230\n00:11:48,960 --> 00:11:53,290\none of the things that it asked\nus about was storage, right.\n\n231\n00:11:53,290 --> 00:11:57,700\nAnd in the first episode, you got a chance\nto see one way of handling storage,\n\n232\n00:11:57,700 --> 00:12:00,400\nwith a storage repository, right.\n\n233\n00:12:00,400 --> 00:12:03,470\nThere's several different storage\nrepositories, so you saw two of them.\n\n234\n00:12:03,470 --> 00:12:07,740\nYou saw local storage, which\nare the local hard drives in your server.\n\n235\n00:12:07,740 --> 00:12:09,970\nAnd so when Ronnie and\nNate built up that Windows machine,\n\n236\n00:12:09,970 --> 00:12:13,340\nthat's what they installed to you, was the\nlocal storage right there on that server.\n\n237\n00:12:13,340 --> 00:12:14,700\nAnd if you have a single,\n\n238\n00:12:14,700 --> 00:12:17,470\nstandalone server Then that's\nprobably what you're gonna do.\n\n239\n00:12:17,470 --> 00:12:19,970\nYou'll have hard drives that\nare inside of that server,\n\n240\n00:12:19,970 --> 00:12:20,920\nthat's where they're going to be.\n\n241\n00:12:22,110 --> 00:12:26,190\nBut they needed some place to store\ntheir discs, their CD images.\n\n242\n00:12:26,190 --> 00:12:28,610\nAnd so, for that,\nthey use the Cifs repository, and so\n\n243\n00:12:28,610 --> 00:12:31,380\nthey created an iso\nlibrary mounted to that.\n\n244\n00:12:31,380 --> 00:12:33,020\nSo that's a second type of storage.\n\n245\n00:12:33,020 --> 00:12:37,580\nBut there's many other types of\nstorage available inside of xenserver.\n\n246\n00:12:37,580 --> 00:12:41,170\nAnd you may use this for storing isos\nlike this, or you might use it for\n\n247\n00:12:41,170 --> 00:12:42,980\nstoring your entire virtual machines.\n\n248\n00:12:42,980 --> 00:12:44,740\nThat's really handy.\n\n249\n00:12:44,740 --> 00:12:46,960\nVery, very common these days.\n\n250\n00:12:46,960 --> 00:12:50,530\nWe see the one U servers,\nthe really small servers.\n\n251\n00:12:50,530 --> 00:12:53,130\nThey don't have a lot of room for\na ton of hard drives.\n\n252\n00:12:53,130 --> 00:12:54,520\nSo if we need a lot of storage for\n\n253\n00:12:54,520 --> 00:12:58,730\nour virtual machines, we don't have\nphysical room inside the server for it.\n\n254\n00:12:58,730 --> 00:13:01,370\nSo instead,\nwe're gonna make use of things like a SAN.\n\n255\n00:13:01,370 --> 00:13:03,960\nA storage area network.\n\n256\n00:13:03,960 --> 00:13:07,960\nSo, when we go up here and\nchoose new storage.\n\n257\n00:13:07,960 --> 00:13:09,640\nRight.\nThat was where we went to add that\n\n258\n00:13:09,640 --> 00:13:10,290\nISO store.\n\n259\n00:13:10,290 --> 00:13:11,970\nThey went to new storage, and\n\n260\n00:13:11,970 --> 00:13:15,100\nchose Windows file sharing\nCIFS to mount to that.\n\n261\n00:13:15,100 --> 00:13:16,540\nRight?\nSo if we want to store our ISOs\n\n262\n00:13:16,540 --> 00:13:17,550\nthere, we can.\n\n263\n00:13:17,550 --> 00:13:19,020\nOr you can use NFS.\n\n264\n00:13:19,020 --> 00:13:19,660\nRight?\n\n265\n00:13:19,660 --> 00:13:22,730\nBut all of these top options,\nthese four right here.\n\n266\n00:13:22,730 --> 00:13:27,770\nThese aren't for storing ISOs These are\nfor storing virtual machines themselves.\n\n267\n00:13:27,770 --> 00:13:31,030\nThese are basically saying, hey you've got\nSAN, you've got a Storage Area Network\n\n268\n00:13:31,030 --> 00:13:34,140\nsomewhere and\nyou wanna connect to it, all right.\n\n269\n00:13:34,140 --> 00:13:35,310\nSo, what are the four ways?\n\n270\n00:13:35,310 --> 00:13:37,230\nWell, the first way, is NSF, right.\n\n271\n00:13:37,230 --> 00:13:39,680\nYou can use the network file system,\nyou can have a Linux or\n\n272\n00:13:39,680 --> 00:13:42,900\nWindows server somewhere\nthat's running an NSF share.\n\n273\n00:13:42,900 --> 00:13:45,680\nAnd you can connect to it and\nstore your VMs there.\n\n274\n00:13:45,680 --> 00:13:49,350\nThis is one of the easiest methods because\nit can run over your normal network and\n\n275\n00:13:49,350 --> 00:13:51,500\nit doesn't require special hardware, but\n\n276\n00:13:51,500 --> 00:13:55,100\nit's also probably the worst\nperformance of the four.\n\n277\n00:13:55,100 --> 00:13:59,630\nNFS is not designed for serving up\nan entire OS so it's not gonna be fast.\n\n278\n00:13:59,630 --> 00:14:04,160\nWhile it's there, it's good in testing,\npractice, lab environments.\n\n279\n00:14:04,160 --> 00:14:06,710\nNot really designed for\nproduction, all right?\n\n280\n00:14:06,710 --> 00:14:09,785\nThe same thing goes for software iSCSI.\n\n281\n00:14:10,890 --> 00:14:12,350\nYou can have an iSCSI scan.\n\n282\n00:14:12,350 --> 00:14:14,600\nThat we are talking about,\na hardware appliance.\n\n283\n00:14:14,600 --> 00:14:16,935\nI guess you could have\na server that was doing it.\n\n284\n00:14:16,935 --> 00:14:21,945\nBut that was basically packed full of\nstorage, and you connect to it via iSCSI.\n\n285\n00:14:21,945 --> 00:14:24,555\nThat's where we take the SCSI\nhardware protocol, and\n\n286\n00:14:24,555 --> 00:14:29,535\nwe just encapsulate it in IP-based\ncommunication, send it over an IP network.\n\n287\n00:14:29,535 --> 00:14:32,275\nAgain, it works great,\nnot so much in production.\n\n288\n00:14:32,275 --> 00:14:35,215\nTest environments, lab environments,\nareas where you're not so\n\n289\n00:14:35,215 --> 00:14:37,915\nconcerned about performance,\nyou can use this.\n\n290\n00:14:37,915 --> 00:14:40,560\nNow, that doesn't mean that you\ncan't use it in production.\n\n291\n00:14:40,560 --> 00:14:43,880\nIf you take an iSCSI scan,\nactually we have one that we used in\n\n292\n00:14:43,880 --> 00:14:47,630\nour production environment, but\nwe really handled it very specially.\n\n293\n00:14:47,630 --> 00:14:49,990\nSo it's on its own dedicated network.\n\n294\n00:14:49,990 --> 00:14:53,990\nIt's got its own dedicated switch and\nit's using what are called,\n\n295\n00:14:56,560 --> 00:14:59,810\nshoot, I had a brain freeze there,\nsuper blocks.\n\n296\n00:14:59,810 --> 00:15:04,930\nNormally when you have a frame that goes\non a network it's limited to 1,500 bytes,\n\n297\n00:15:04,930 --> 00:15:09,580\nbut you can actually configure\nup to 9,000 bytes if you want.\n\n298\n00:15:09,580 --> 00:15:12,850\nYou can get it to be quite large for\nevery frame sent on the network.\n\n299\n00:15:12,850 --> 00:15:14,550\nAnd when you do that,\nwhen you're doing superframe,\n\n300\n00:15:14,550 --> 00:15:15,860\nthat's the word I was looking for,\n\n301\n00:15:15,860 --> 00:15:19,070\nwhen you're doing superframes\nyou can communicate much,\n\n302\n00:15:19,070 --> 00:15:22,540\nmuch more efficiently and it starts\nto make iSCSI a lot more compatible.\n\n303\n00:15:22,540 --> 00:15:26,610\nBut your network card,\nyour switch, your software,\n\n304\n00:15:26,610 --> 00:15:29,200\nthey all have to support\nsuperframes to do that.\n\n305\n00:15:29,200 --> 00:15:32,540\nSo If you're gonna use\niSCSI in production.\n\n306\n00:15:32,540 --> 00:15:34,420\nMake sure you do your\nresearch on super frames.\n\n307\n00:15:34,420 --> 00:15:35,020\nYou'll want that.\n\n308\n00:15:35,020 --> 00:15:37,950\nIt will make a big difference\nin performance, all right.\n\n309\n00:15:37,950 --> 00:15:41,860\nBut in test lab environments you can use\niSCSI just over the regular network,\n\n310\n00:15:41,860 --> 00:15:43,000\nand it will work okay.\n\n311\n00:15:43,000 --> 00:15:45,950\nThat's what I'm doing right here for\nour show.\n\n312\n00:15:45,950 --> 00:15:48,100\nBut it's just okay.\n\n313\n00:15:48,100 --> 00:15:49,780\nWhat if you are really\nconcerned about performance.\n\n314\n00:15:49,780 --> 00:15:52,191\nWhat if you want high end performance.\n\n315\n00:15:52,191 --> 00:15:54,120\nYou want your systems to\nboot as fast as possible.\n\n316\n00:15:54,120 --> 00:15:55,640\nYou want it to be reliable.\n\n317\n00:15:55,640 --> 00:16:00,220\nWell, the way you're gonna go there\nIs with a fiber optic SAN, right?\n\n318\n00:16:00,220 --> 00:16:01,977\nYou're gonna have a fiber mesh,\n\n319\n00:16:01,977 --> 00:16:06,820\nso a fiber optic switch that connects your\nservers with the storage area network.\n\n320\n00:16:06,820 --> 00:16:11,260\nAnd it's going to run the fiber channel\nprotocols which are not TCP/IP,\n\n321\n00:16:11,260 --> 00:16:13,300\nthey're storage protocols.\n\n322\n00:16:13,300 --> 00:16:17,300\nAnd this day, if you go and buy one, I\nthink the slowest ones you can really buy\n\n323\n00:16:17,300 --> 00:16:20,190\ntoday are eight gigabits per second so\nthey're very fast.\n\n324\n00:16:20,190 --> 00:16:21,940\nYou can get them even faster than that.\n\n325\n00:16:21,940 --> 00:16:24,940\nThey communicate at really rapid rates,\nvery reliable,\n\n326\n00:16:24,940 --> 00:16:27,930\nvery robust, very expensive, right?\n\n327\n00:16:27,930 --> 00:16:30,320\nYou have to have SAN hardware\nthat supports it and\n\n328\n00:16:30,320 --> 00:16:35,620\nin your servers, you have to have what's\ncalled an HBA, it's a host bust adapter.\n\n329\n00:16:35,620 --> 00:16:39,460\nIt looks like a fiber-optic network card,\nbut it's actually a hard drive controller.\n\n330\n00:16:39,460 --> 00:16:41,700\nSo, your server you'll see is\na hard drive controller and\n\n331\n00:16:41,700 --> 00:16:43,910\nthen it's connected to\na SAN on the back end.\n\n332\n00:16:43,910 --> 00:16:46,290\nIf you've got that,\nyou would choose that option here and\n\n333\n00:16:46,290 --> 00:16:49,200\nthat would tell xen-server,\nhey, you don't have internal,\n\n334\n00:16:49,200 --> 00:16:51,570\nwell, you might have internal hard\ndrives but we're not gonna use them.\n\n335\n00:16:51,570 --> 00:16:57,230\nWe've also got this SAN over here\nthat you can attach to via your HBA.\n\n336\n00:16:57,230 --> 00:17:01,622\nIf you're using Dell EqualLogic boxes,\nDell EqualLogic boxes are iSCSI,\n\n337\n00:17:01,622 --> 00:17:05,192\nbut they have support for\nsomething called StorageLink, and\n\n338\n00:17:05,192 --> 00:17:09,420\nStorageLink is a way to really optimize\nthat communication over iSCSI.\n\n339\n00:17:09,420 --> 00:17:12,040\nSo, you'll see over here it lists\nthings like direct detached storage,\n\n340\n00:17:12,040 --> 00:17:15,230\nnetwork attached storage,\nSAN, iSCSI, Fiber Channel.\n\n341\n00:17:15,230 --> 00:17:19,470\nWell, I haven't seen a whole lot of\nproviders support this but Dell,\n\n342\n00:17:19,470 --> 00:17:22,130\nwith their EqualLogic line,\nthey really push it hard, and so\n\n343\n00:17:22,130 --> 00:17:24,720\nyou can choose that and\nit will try and optimize it.\n\n344\n00:17:24,720 --> 00:17:30,063\nNotice it says here StorageLink technology\nfeature is deprecated in XenServer 6.2.\n\n345\n00:17:30,063 --> 00:17:33,530\nIt's still here today, but\nit might not be here tomorrow.\n\n346\n00:17:33,530 --> 00:17:34,860\nIt is going away eventually.\n\n347\n00:17:34,860 --> 00:17:38,540\nSo, this is something that wasn't\nwidely supported, and you may or\n\n348\n00:17:38,540 --> 00:17:41,920\nmay not be able to take advantage of that.\n\n349\n00:17:41,920 --> 00:17:44,330\nI'm gonna go ahead and\nadd an iSCSI storage repository.\n\n350\n00:17:44,330 --> 00:17:47,130\nSo this is on a SAN, but\nit's on my regular network.\n\n351\n00:17:49,050 --> 00:17:52,040\nWhen you add an iSCSI SAN,\nyou do need to give it a name.\n\n352\n00:17:52,040 --> 00:17:55,090\nI'll just call it XENSTORAGE,\nor whatever you wanna call it.\n\n353\n00:17:55,090 --> 00:18:00,770\nAnd then you've gotta tell\nit where to find the server.\n\n354\n00:18:00,770 --> 00:18:03,740\nWell, the server itself, or\nthe SAN that's hosting this,\n\n355\n00:18:03,740 --> 00:18:07,860\nis let's see, 10.1.100.240 on my network.\n\n356\n00:18:07,860 --> 00:18:13,010\nAnd this default port for iSCSI is 3260,\nso I don't really have to change that.\n\n357\n00:18:13,010 --> 00:18:16,120\nIf you're using CHAPP, the challenge\nhandshake authentication protocol,\n\n358\n00:18:16,120 --> 00:18:18,620\nyou'll have to specify your username and\npassword here.\n\n359\n00:18:18,620 --> 00:18:20,310\nIf you're not,\nyou can just leave that blank.\n\n360\n00:18:21,420 --> 00:18:25,930\nThen you can hit this discover IQN's and\nit will reach out to that server, and\n\n361\n00:18:25,930 --> 00:18:28,790\nit'll say,\nhey do you have any iSCSI targets?\n\n362\n00:18:28,790 --> 00:18:32,332\nAnd it'll give you a list of\nthe iSCSI targets on that server.\n\n363\n00:18:32,332 --> 00:18:36,550\nAll right, well I already configured\none earlier, the ZenServer target, so\n\n364\n00:18:36,550 --> 00:18:38,100\nI've got that one set up.\n\n365\n00:18:38,100 --> 00:18:39,380\nHow you configure that?\n\n366\n00:18:39,380 --> 00:18:40,800\nIt depends on your iSCSI SAN.\n\n367\n00:18:40,800 --> 00:18:42,170\nEveryone is a little bit different.\n\n368\n00:18:42,170 --> 00:18:45,440\nSo, you'll have to look at the vendor\ndocumentation for your equipment.\n\n369\n00:18:47,012 --> 00:18:50,200\nOnce you're connected,\nyou should see your LUNs, and\n\n370\n00:18:50,200 --> 00:18:52,710\nLUNs to ZenServer are just hard drives.\n\n371\n00:18:52,710 --> 00:18:56,460\nThose are logical unit numbers,\nthey look like SCSI hard drives to us.\n\n372\n00:18:56,460 --> 00:19:00,470\nSo, we're basically saying, give me a list\nof all the SCSI hard drives you have.\n\n373\n00:19:01,890 --> 00:19:04,620\nThese would be locally detected if\nthese were internal hard drives, but\n\n374\n00:19:04,620 --> 00:19:06,730\nsince they're remote,\nwe have to scan and find them.\n\n375\n00:19:06,730 --> 00:19:09,760\nSo it's gonna scan and\nI just created a 200 gig one, so\n\n376\n00:19:09,760 --> 00:19:11,480\nthere it is sitting right there.\n\n377\n00:19:11,480 --> 00:19:12,560\nAnd I can hit Finish and connect.\n\n378\n00:19:14,510 --> 00:19:17,970\nWhen that's done, I'm now gonna\nbe connected via the network.\n\n379\n00:19:17,970 --> 00:19:23,430\nSo connected over the network to this\niSCSI san, and to my server, it's gonna\n\n380\n00:19:23,430 --> 00:19:26,600\nlook like an internal hard drive, even\nthough it's really across the network.\n\n381\n00:19:27,950 --> 00:19:31,210\nNow it was completely blank, so it's\ntelling me if I wanna use it I need to\n\n382\n00:19:31,210 --> 00:19:33,700\nformat it, and\nif I format it I'm gonna lose all my data.\n\n383\n00:19:33,700 --> 00:19:35,510\nBut I'm okay with that, so I'll say Yes.\n\n384\n00:19:37,630 --> 00:19:38,450\nAll right.\n\n385\n00:19:38,450 --> 00:19:41,310\nWhen that's done, I'll have\na nice new storage entry in here.\n\n386\n00:19:41,310 --> 00:19:43,100\nI can see it already, XENSTORAGE.\n\n387\n00:19:43,100 --> 00:19:45,890\nIt's got a red circle on it cuz\nit's not done formatting yet.\n\n388\n00:19:45,890 --> 00:19:47,420\nSo I have to give it a moment.\n\n389\n00:19:47,420 --> 00:19:50,570\nThe bigger the storage,\nthe longer this will take.\n\n390\n00:19:50,570 --> 00:19:54,060\nI provisioned one of these, it was\na couple of terabytes a few weeks ago and\n\n391\n00:19:54,060 --> 00:19:58,060\nit took almost an hour to provision it,\nso it can take awhile, but\n\n392\n00:19:58,060 --> 00:20:00,990\nit should go semi quickly.\n\n393\n00:20:00,990 --> 00:20:02,510\nI can see mine's already done.\n\n394\n00:20:02,510 --> 00:20:04,110\nThere's my XENSTORAGE.\n\n395\n00:20:04,110 --> 00:20:04,980\nI can see it's right here.\n\n396\n00:20:04,980 --> 00:20:06,146\nIt is an iSCSI target.\n\n397\n00:20:06,146 --> 00:20:07,900\nI get a little more information on it.\n\n398\n00:20:07,900 --> 00:20:13,050\nI can see I'm using 4 megabytes out of 200\ngigabytes, so I've got plenty of room.\n\n399\n00:20:13,050 --> 00:20:16,080\nAnd if I go into my storage,\nI can see it is empty.\n\n400\n00:20:16,080 --> 00:20:20,830\nBut now whenever I create a new virtual\nmachine, instead of just having my local\n\n401\n00:20:20,830 --> 00:20:24,722\nstorage, I could choose to store that\nvirtual machine in my XEN storage,\n\n402\n00:20:24,722 --> 00:20:29,220\nin that additional storage repository.\n\n403\n00:20:29,220 --> 00:20:36,720\nIf you added a fiber SAN via an HBA,\nif you added an NFS VHD store,\n\n404\n00:20:36,720 --> 00:20:40,270\nif you added iSCSI, once they're added,\nthey all look the same, right?\n\n405\n00:20:40,270 --> 00:20:41,020\nSo it's kind of nice.\n\n406\n00:20:41,020 --> 00:20:43,730\nOnce they're in there,\nyou treat them the same way.\n\n407\n00:20:43,730 --> 00:20:46,670\nBut, during the install, you just\nhave to tell it which kind it is, and\n\n408\n00:20:46,670 --> 00:20:48,060\nthen it gets connected, all right.\n\n409\n00:20:49,270 --> 00:20:53,820\nNow, be aware, once you set up something\nlike this, like iSCSI storage,\n\n410\n00:20:53,820 --> 00:20:58,010\nif we use chap, if we used a username and\npassword and that password ever\n\n411\n00:20:58,010 --> 00:21:02,970\nchanges on the server or the SAN, we need\nto come and change it here too, alright?\n\n412\n00:21:02,970 --> 00:21:06,750\nSo, you may have to come in and\nmodify that as time goes on, and\n\n413\n00:21:06,750 --> 00:21:10,560\nyou'll see you've got some properties in\nhere, you can see some of the things.\n\n414\n00:21:10,560 --> 00:21:11,320\nOh, you know what?\n\n415\n00:21:11,320 --> 00:21:14,560\nActually, I think to do the chap you\nhave to drop to the command prompt.\n\n416\n00:21:14,560 --> 00:21:15,510\nYeah.\nYou have to do that from\n\n417\n00:21:15,510 --> 00:21:16,480\nthe command prompt.\n\n418\n00:21:16,480 --> 00:21:19,470\nOr you can always remove it and\nadd it again, and that'll do it too.\n\n419\n00:21:19,470 --> 00:21:21,290\nSo a couple different ways\nto go about updating that.\n\n420\n00:21:23,190 --> 00:21:24,360\nAll right.\n\n421\n00:21:24,360 --> 00:21:26,660\nNow hopefully storage is\nsomething you deal with early on.\n\n422\n00:21:26,660 --> 00:21:31,180\nWe get that set up and installed, we get\nit in place before we create all our VMs.\n\n423\n00:21:31,180 --> 00:21:34,660\nIf we create all our VMs first, right, if\nwe have ten VMs with all their storage in\n\n424\n00:21:34,660 --> 00:21:37,520\nthere, when we go to move,\nwe've got to move all that storage and\n\n425\n00:21:37,520 --> 00:21:41,380\nthat kind of creates a bit of a burden,\nso we want to avoid that if we can.\n\n426\n00:21:41,380 --> 00:21:42,790\nSometimes that's just not an option,\nright, so\n\n427\n00:21:42,790 --> 00:21:44,840\nwe have to just do virtual\nmachine migrations.\n\n428\n00:21:44,840 --> 00:21:47,610\nYou have to export your VMs and\nimport them to move that storage.\n\n429\n00:21:49,390 --> 00:21:53,210\nYou can have as many\nrepositories as you want.\n\n430\n00:21:53,210 --> 00:21:54,910\nSo you're not really\nlimited to just one or two.\n\n431\n00:21:54,910 --> 00:21:57,370\nYou can create a bunch based on\nwhat you've got in your network.\n\n432\n00:21:57,370 --> 00:22:00,120\nBut you just add them in and\nthen you're ready to go.\n\n433\n00:22:00,120 --> 00:22:04,100\nNow, the only problem I have right here\nis the way that this is set up is that\n\n434\n00:22:04,100 --> 00:22:08,520\nstorage that I just created,\nit's attached to my first Xen server,\n\n435\n00:22:08,520 --> 00:22:10,730\nto ITProTV2-server1.\n\n436\n00:22:10,730 --> 00:22:13,048\nBut I've got two Xen servers.\n\n437\n00:22:13,048 --> 00:22:13,960\nI've got xen server one and\n\n438\n00:22:13,960 --> 00:22:18,970\nzen server two and I want them both\nto have access to that storage.\n\n439\n00:22:18,970 --> 00:22:20,500\nWell, too bad.\n\n440\n00:22:20,500 --> 00:22:25,580\nBy default, you can't have two\nservers access the same storage.\n\n441\n00:22:25,580 --> 00:22:29,280\nIf they do, if two servers try to write\nto the same storage at the same time,\n\n442\n00:22:29,280 --> 00:22:31,670\nyou get almost instantaneous corruption.\n\n443\n00:22:31,670 --> 00:22:33,540\nThe disk will get corrupted and\nyou'll lose your data.\n\n444\n00:22:33,540 --> 00:22:34,080\nIt's really bad.\n\n445\n00:22:35,410 --> 00:22:38,920\nIf you want the servers to be\nable to share that storage,\n\n446\n00:22:38,920 --> 00:22:41,370\nyou've got to create a server pool.\n\n447\n00:22:41,370 --> 00:22:44,610\nYou basically have to\ncluster the servers together.\n\n448\n00:22:44,610 --> 00:22:47,970\nAnd that was something that we couldn't do\nin earlier versions of XenServer without\n\n449\n00:22:47,970 --> 00:22:51,940\nupgrading to the paid enterprise versions,\nit costs a lot of money to do it.\n\n450\n00:22:51,940 --> 00:22:54,150\nBut, in the newer versions,\nlike in XenServer 6.2,\n\n451\n00:22:54,150 --> 00:22:58,040\nwhat I'm running here, they actually\nmake it available in the free version.\n\n452\n00:22:58,040 --> 00:22:58,870\nSo, it's free.\n\n453\n00:22:58,870 --> 00:23:03,120\nWe can cluster these two servers together\nand they can share that storage.\n\n454\n00:23:03,120 --> 00:23:03,650\nAll right.\n\n455\n00:23:03,650 --> 00:23:07,680\nAnd that's really cool because then\nthey both have access to it and\n\n456\n00:23:07,680 --> 00:23:10,410\nit allows me to do things\nlike live fail over.\n\n457\n00:23:10,410 --> 00:23:14,320\nI can move a virtual machine from\none physical server to another, and\n\n458\n00:23:14,320 --> 00:23:17,920\nit happens near instantaneously\nbecause they're sharing that storage,\n\n459\n00:23:17,920 --> 00:23:21,300\nyou don't have to copy all the data over,\nthey just have to synchronize the RAM and\n\n460\n00:23:21,300 --> 00:23:22,538\nthe failover happens, right?\n\n461\n00:23:22,538 --> 00:23:25,980\nIt sounds pretty cool because it\nis pretty cool, and it's free.\n\n462\n00:23:25,980 --> 00:23:30,320\nThat's one of the things that with Hyper-V\nor with VMware, those are paid features.\n\n463\n00:23:30,320 --> 00:23:31,990\nThey cost a lot more to implement.\n\n464\n00:23:31,990 --> 00:23:33,870\nWith XenServer,\nit's here in the free version.\n\n465\n00:23:33,870 --> 00:23:36,760\nSo that's definitely\na benefit of their platform.\n\n466\n00:23:38,330 --> 00:23:39,280\nAll right.\n\n467\n00:23:39,280 --> 00:23:42,480\nSo let's take a look\nat a few other things.\n\n468\n00:23:42,480 --> 00:23:45,290\nWe'll take a look at that clustering\npiece later in this episode, but for\n\n469\n00:23:45,290 --> 00:23:48,000\nright now, let's just take\na look at a few other things.\n\n470\n00:23:48,000 --> 00:23:50,100\nWhen we create a virtual machine,\n\n471\n00:23:50,100 --> 00:23:52,580\nit asked us a few questions\nwhen we were doing the set up.\n\n472\n00:23:52,580 --> 00:23:55,750\nIt asked us how much memory we wanted,\nhow many processors we wanted, and\n\n473\n00:23:55,750 --> 00:23:56,581\nthings like that.\n\n474\n00:23:56,581 --> 00:23:59,181\nWell, those aren't set in stone.\n\n475\n00:23:59,181 --> 00:24:02,450\nWhen we made that decision during set up,\nwe might change our mind later on.\n\n476\n00:24:02,450 --> 00:24:06,090\nMaybe I'm running low on memory,\nor maybe I'm having other issues.\n\n477\n00:24:06,090 --> 00:24:09,112\nWe can see that under our Performance tab,\nso maybe I look and\n\n478\n00:24:09,112 --> 00:24:12,457\nI see that I'm consistently\naveraging high memory utilization.\n\n479\n00:24:12,457 --> 00:24:15,220\nRight?\nWell, if that's the case,\n\n480\n00:24:15,220 --> 00:24:17,340\nI may wanna modify that and we can.\n\n481\n00:24:17,340 --> 00:24:21,150\nNow, some things we can modify\nwhile the system is on,\n\n482\n00:24:21,150 --> 00:24:24,220\nsome things require us to shut\nthe system down to do it.\n\n483\n00:24:24,220 --> 00:24:27,310\nSo when you go to take a system,\nlike I'll take the web server here,\n\n484\n00:24:27,310 --> 00:24:30,950\nit's running a Windows Server 2012,\nor at least I think it is.\n\n485\n00:24:30,950 --> 00:24:31,880\nYes.\n\n486\n00:24:31,880 --> 00:24:36,210\nSo it's running Windows Server 2012, and\nif I come in here and take a look at it,\n\n487\n00:24:36,210 --> 00:24:38,880\nI can see where it's\ngot two gigs of memory.\n\n488\n00:24:38,880 --> 00:24:43,300\nAnd if I wanna modify that,\nI can go back to my General tab, and\n\n489\n00:24:43,300 --> 00:24:44,350\nI can hit Properties.\n\n490\n00:24:45,790 --> 00:24:48,530\nAnd in here I'll see the different\nthings that I can modify.\n\n491\n00:24:48,530 --> 00:24:52,300\nAnd if I look at CPU for example,\nsee how I can't change that?\n\n492\n00:24:52,300 --> 00:24:54,580\nIt's just because the system is on.\n\n493\n00:24:54,580 --> 00:24:55,890\nThink of it as like a physical machine.\n\n494\n00:24:55,890 --> 00:24:59,320\nCan you add and remove processors to\na physical machine while it's on?\n\n495\n00:24:59,320 --> 00:25:02,440\nNo, and a virtual machine's not\ngonna let you do that either.\n\n496\n00:25:02,440 --> 00:25:05,960\nSo there are some limitations\nwhen it comes to updating\n\n497\n00:25:05,960 --> 00:25:10,750\nour system as far as what we can modify,\nespecially while the system is on.\n\n498\n00:25:10,750 --> 00:25:11,320\nAll right.\n\n499\n00:25:11,320 --> 00:25:14,240\nBut if we shut it down, you'll find that\nall these little grayed out options will\n\n500\n00:25:14,240 --> 00:25:16,940\nstart to light up for us, and\nwe can start to manipulate that.\n\n501\n00:25:16,940 --> 00:25:19,080\nSo let me take this guy and\nwe'll shut him down.\n\n502\n00:25:20,210 --> 00:25:23,290\nLooks like I just finished\ninstalling Xen-tools anyway.\n\n503\n00:25:28,873 --> 00:25:31,373\nAnd, oh shoot.\n\n504\n00:25:31,373 --> 00:25:32,100\nI forgot.\n\n505\n00:25:32,100 --> 00:25:37,655\nThis is a good old Microsoft not\ngiving me the buttons that I need.\n\n506\n00:25:37,655 --> 00:25:38,998\n[LAUGH]\n\n507\n00:25:49,415 --> 00:25:51,690\nI guess I could of just used\nthe Shutdown button up here.\n\n508\n00:25:51,690 --> 00:25:55,238\nIf you have the Xen-tools installed,\nand you use the shutdown button up top,\n\n509\n00:25:55,238 --> 00:25:57,735\nit will do it do a graceful\nshutdown of Windows.\n\n510\n00:25:57,735 --> 00:26:01,605\nIf you don't have the Xen-tools installed,\nand you try and do a shutdown like that,\n\n511\n00:26:01,605 --> 00:26:03,965\nit's more like this, the forced shut down.\n\n512\n00:26:03,965 --> 00:26:05,575\nOh, I chose to do a reboot.\n\n513\n00:26:05,575 --> 00:26:06,995\nAnyhow, with the forced shutdown,\n\n514\n00:26:06,995 --> 00:26:09,895\nit's the equivalent of yanking\nthe power plug out of a system.\n\n515\n00:26:09,895 --> 00:26:12,850\nAnd you always run the risk of getting\nlike disk corruption when that happens.\n\n516\n00:26:12,850 --> 00:26:15,306\nSo you don't wanna do\nthat if you can avoid it.\n\n517\n00:26:15,306 --> 00:26:17,940\nBut with Xen-tools installed,\nyou can use the Shutdown button and\n\n518\n00:26:17,940 --> 00:26:19,930\nit will do a graceful shutdown.\n\n519\n00:26:19,930 --> 00:26:22,210\nThat's true for the Linux boxes also.\n\n520\n00:26:22,210 --> 00:26:23,770\nIt'll do a graceful shutdown.\n\n521\n00:26:23,770 --> 00:26:27,771\nThat really is one of the main reasons\nyou want those Xen-tools installed so\n\n522\n00:26:27,771 --> 00:26:30,022\nit can do graceful shutdowns and startup,\n\n523\n00:26:30,022 --> 00:26:32,915\nyou don't have that if you\ndidn't install the tools.\n\n524\n00:26:38,081 --> 00:26:39,709\nAll right,\nlet me get logged back into this thing and\n\n525\n00:26:39,709 --> 00:26:41,050\nI'll shut it down the right way this time.\n\n526\n00:26:43,560 --> 00:26:46,630\nWhen I shut it down from a command\nI did a /R which is Reboot,\n\n527\n00:26:46,630 --> 00:26:50,670\ninstead of /F, I mean,\n/S which is Shutdown.\n\n528\n00:26:50,670 --> 00:26:51,940\nSo, that's why it rebooted there.\n\n529\n00:26:52,962 --> 00:26:54,410\nAll right, but once it's down,\n\n530\n00:26:54,410 --> 00:26:57,577\nI'll see over here [INAUDIBLE] red\ncircle letting me know that it's off.\n\n531\n00:26:57,577 --> 00:26:58,115\nthere we go.\n\n532\n00:26:58,115 --> 00:27:00,490\nAnd now I can go in and\nI can start to modify things.\n\n533\n00:27:00,490 --> 00:27:02,700\nSo, if I go into the virtual CPU's.\n\n534\n00:27:02,700 --> 00:27:07,100\nNow, I can bump it up and\nI can give it more CPU's.\n\n535\n00:27:07,100 --> 00:27:10,270\nSo, let's talk about some of these\noptions in here that we can tweak.\n\n536\n00:27:10,270 --> 00:27:12,020\nVirtual CPU's are one.\n\n537\n00:27:12,020 --> 00:27:15,100\nBy default the virtual\nmachine gets one CPU.\n\n538\n00:27:15,100 --> 00:27:17,660\nYour host might have many, right?\n\n539\n00:27:17,660 --> 00:27:22,130\nThis host I believe has two physical\nCPU's and they're quad core.\n\n540\n00:27:22,130 --> 00:27:26,130\nSo it's got eight cores But,\ntwo physical CPU's, all right.\n\n541\n00:27:26,130 --> 00:27:32,010\nWell, if I only assign one CPU to this\nVM when it runs it's gonna be using,\n\n542\n00:27:32,010 --> 00:27:34,320\nbasically, one core of\nthe underlying host OS.\n\n543\n00:27:34,320 --> 00:27:37,010\nNot exclusively, right,\nit's gotta share it with the other VM's.\n\n544\n00:27:37,010 --> 00:27:40,620\nBut, it'll never use more than one\ncore cuz were just giving it one VCPU.\n\n545\n00:27:40,620 --> 00:27:43,080\nBut we can tack on more if we need.\n\n546\n00:27:43,080 --> 00:27:48,590\nAnd it will actually let you exceed the\namount of CPU's in your physical system.\n\n547\n00:27:48,590 --> 00:27:50,210\nBut see this warning you get?\n\n548\n00:27:50,210 --> 00:27:55,470\nMore VCPU's than physical CPU's may\nlead to reduced VM performance.\n\n549\n00:27:55,470 --> 00:27:56,530\nAll right.\n\n550\n00:27:56,530 --> 00:28:00,090\nIf you only have, say,\na quad core system and\n\n551\n00:28:00,090 --> 00:28:05,340\nyou assign eight VCPU's to this VM\nit's gonna try use eight cores.\n\n552\n00:28:05,340 --> 00:28:07,380\nAnd your host OS is gonna\nhave to juggle that.\n\n553\n00:28:07,380 --> 00:28:08,600\nAnd it is gonna hurt performance.\n\n554\n00:28:08,600 --> 00:28:10,330\nYou actually get a diminishing return.\n\n555\n00:28:10,330 --> 00:28:14,610\nSo you never wanna go beyond what you\nactually have, and you've gotta think\n\n556\n00:28:14,610 --> 00:28:17,700\nabout how this is being balanced across\nall your different virtual machines.\n\n557\n00:28:17,700 --> 00:28:19,090\nSo I'm gonna put this back down to two.\n\n558\n00:28:19,090 --> 00:28:21,550\nIt's a little bit more\nreasonable of a number.\n\n559\n00:28:21,550 --> 00:28:24,980\nYou can also set your priority\nIf there is contention.\n\n560\n00:28:24,980 --> 00:28:28,830\nMore than one VM fighting for\naccess to the CPU, who get's priority?\n\n561\n00:28:28,830 --> 00:28:30,400\nYou can have high priority machines for\n\n562\n00:28:30,400 --> 00:28:33,600\nyour mission critical stuff and\nlow priority for your, you know,\n\n563\n00:28:33,600 --> 00:28:35,830\njust run of the mill servers\nthat are testing and research.\n\n564\n00:28:37,520 --> 00:28:38,540\nAll right.\n\n565\n00:28:38,540 --> 00:28:40,800\nSome of the other things we\ncan do are boot up screen.\n\n566\n00:28:40,800 --> 00:28:43,860\nYou can't get into the BIOS of our VM's.\n\n567\n00:28:43,860 --> 00:28:47,376\nSo if I wanna boot from CD or boot from\nnetwork or boot from hard drive well,\n\n568\n00:28:47,376 --> 00:28:49,040\nI've got where I can change that.\n\n569\n00:28:49,040 --> 00:28:52,490\nAnd you'll see boot from network is turned\noff by default but the hard drive and\n\n570\n00:28:52,490 --> 00:28:54,580\nDVD drive are here and\nwe can change that order or\n\n571\n00:28:54,580 --> 00:28:57,623\nmanipulate those options just like\nwe would in a normal system BIOS.\n\n572\n00:29:00,206 --> 00:29:02,370\nAll right.\nOn the start up side.\n\n573\n00:29:02,370 --> 00:29:04,470\nWhat happens if we\nreboot the host machine?\n\n574\n00:29:04,470 --> 00:29:05,800\nWhat do the guests do?\n\n575\n00:29:05,800 --> 00:29:08,260\nWell, when you you reboot\nthe host machine and it comes up,\n\n576\n00:29:08,260 --> 00:29:10,900\nthe default is the guests\nare all shut down.\n\n577\n00:29:10,900 --> 00:29:14,680\nThey're either shut down if they were\nalready shut down when the host went down\n\n578\n00:29:14,680 --> 00:29:16,400\nor they'll go into a suspend state.\n\n579\n00:29:16,400 --> 00:29:18,120\nThey'll save their memory state and\n\n580\n00:29:18,120 --> 00:29:22,040\nthen go off from there, but\nthey don't come back up automatically.\n\n581\n00:29:22,040 --> 00:29:26,470\nWe can configure high availability, and\nthat'll allow us to set up startup,\n\n582\n00:29:26,470 --> 00:29:27,820\nautomated startup.\n\n583\n00:29:27,820 --> 00:29:30,200\nBut we don't have that\nwith a standalone server.\n\n584\n00:29:30,200 --> 00:29:33,350\nRight now I've got two servers,\nbut to reach standalone,\n\n585\n00:29:33,350 --> 00:29:37,450\nwhen I cluster them together, I'll be\nable to turn on high availability, and\n\n586\n00:29:37,450 --> 00:29:40,970\nwhen that's on, we'll then be able to\nset the automated start, all right?\n\n587\n00:29:40,970 --> 00:29:43,498\nSo we don't see the option right\nnow just cuz I'm not in a cluster.\n\n588\n00:29:45,790 --> 00:29:48,220\nYou can also define performance alerts.\n\n589\n00:29:48,220 --> 00:29:51,160\nWhat do I do if my server's\ngetting too busy, right?\n\n590\n00:29:51,160 --> 00:29:53,855\nHow do I know if it's got too busy,\nif it's running out of resources.\n\n591\n00:29:53,855 --> 00:29:55,505\nIf it's being starved, all right?\n\n592\n00:29:55,505 --> 00:29:57,095\nWell, we can setup alerts here, and\n\n593\n00:29:57,095 --> 00:30:00,665\nit'll be able to notify us when we define\nuser accounts for those notifications.\n\n594\n00:30:00,665 --> 00:30:01,865\nBut we'll see that in another episode.\n\n595\n00:30:03,845 --> 00:30:06,940\nWhen it does start up, we can specify\nthe home server it resides on.\n\n596\n00:30:06,940 --> 00:30:08,660\nWith a stand alone,\nyou've only got one server.\n\n597\n00:30:08,660 --> 00:30:11,820\nBut when we have a cluster,\nyou have many servers to pick from, so\n\n598\n00:30:11,820 --> 00:30:14,710\nyou can tell it which one it kind of\ndefaults to when it first boots up.\n\n599\n00:30:18,016 --> 00:30:23,680\nSome systems have GPU's or\ngraphics boards in them that are NVIDIA or\n\n600\n00:30:23,680 --> 00:30:26,310\nAMD graphics boards that\nare 3D accelerated.\n\n601\n00:30:26,310 --> 00:30:29,620\nAnd we can turn on that GPU support for\nour VM's.\n\n602\n00:30:29,620 --> 00:30:31,090\nThe default is that it's off, and\n\n603\n00:30:31,090 --> 00:30:33,260\nyou'll see on mine that I've\ngot a crummy intel card.\n\n604\n00:30:33,260 --> 00:30:35,820\nSo I'm not gonna get any\nbenefit out of that anyway.\n\n605\n00:30:35,820 --> 00:30:37,220\nSo I'll just leave that at none.\n\n606\n00:30:37,220 --> 00:30:41,180\nBut that is a somewhat experimental\nfeature that has not been\n\n607\n00:30:41,180 --> 00:30:45,720\ncompletely vetted by Citrix yet, but\nit is something that's kind of neat.\n\n608\n00:30:45,720 --> 00:30:47,790\nAnd we can use it for\nextra computational power too.\n\n609\n00:30:50,165 --> 00:30:53,850\nAll right, and then we just have\nsome other custom optimizations.\n\n610\n00:30:53,850 --> 00:30:55,400\nAnd these are for, really for\n\n611\n00:30:55,400 --> 00:30:59,160\nXenApp If you're running Citrix XenApp,\nyou can specify this mode and\n\n612\n00:30:59,160 --> 00:31:03,140\nit'll make the VM behave a little bit\ndifferently as far as how it multi-tasks.\n\n613\n00:31:03,140 --> 00:31:04,800\nAnd you get a little\nbit better performance.\n\n614\n00:31:04,800 --> 00:31:06,540\nThey actually have where you\ncan adjust this yourself.\n\n615\n00:31:06,540 --> 00:31:10,130\nSee how it does what's called shadow\nmemory and that's where it's allocating\n\n616\n00:31:10,130 --> 00:31:14,280\nextra memory behind the physical memory\nthat's attached to that virtual machine.\n\n617\n00:31:14,280 --> 00:31:17,690\nSo it actually allows it to grow a little\nbit beyond the memory that its got.\n\n618\n00:31:17,690 --> 00:31:20,960\nIt's interesting,\nit's kind of a neat little feature.\n\n619\n00:31:20,960 --> 00:31:24,220\nIf you start to run low on memory you\ndon't want the system to just lock up and\n\n620\n00:31:24,220 --> 00:31:25,480\nyou don't want it to just page a lot.\n\n621\n00:31:25,480 --> 00:31:28,360\nSo if you've got some extra memory that\nit can attach than that's nice to be\n\n622\n00:31:28,360 --> 00:31:29,370\nable to use.\n\n623\n00:31:29,370 --> 00:31:32,110\nAnd XenApp really takes advantage of that.\n\n624\n00:31:32,110 --> 00:31:35,640\nYou probably also noticed over\nhere if I go to my memory tab,\n\n625\n00:31:35,640 --> 00:31:36,990\nhere we've got the memory settings.\n\n626\n00:31:36,990 --> 00:31:40,960\nAnd this is where we can adjust that.and\nyou'll see minimum and maximum memory.\n\n627\n00:31:40,960 --> 00:31:42,800\nThat's if your using dynamic memory.\n\n628\n00:31:42,800 --> 00:31:45,770\nNow, personally, I hate dynamic memory.\n\n629\n00:31:45,770 --> 00:31:49,500\nIt's not very reliable, and in production\nenvironments it can kill your performance.\n\n630\n00:31:49,500 --> 00:31:51,592\nBut for a lab or test environment,\n\n631\n00:31:51,592 --> 00:31:54,851\nyou can allocate more memory\nthan you actually have.\n\n632\n00:31:54,851 --> 00:31:57,531\nI might only have four gigs\nof memory in my server.\n\n633\n00:31:57,531 --> 00:32:01,960\nBut I can give one gig of\nmemory to five different VM's.\n\n634\n00:32:01,960 --> 00:32:04,860\nSo, it's 5 gigs total,\nwhich I don't actually have.\n\n635\n00:32:04,860 --> 00:32:09,452\nBut you can set a minimum and a maximum\nto all those virtual machines, and\n\n636\n00:32:09,452 --> 00:32:12,800\nthat way they'll start\nout with maybe 512 megs.\n\n637\n00:32:12,800 --> 00:32:16,350\nAnd as they need it, they'll grab\nmore memory and it'll expand, and\n\n638\n00:32:16,350 --> 00:32:18,170\nas they don't need it it'll contract.\n\n639\n00:32:18,170 --> 00:32:21,720\nSo you can get away with using\nless memory in your servers.\n\n640\n00:32:21,720 --> 00:32:25,930\nMemory is usually the main limiting factor\nfor how many virtual machines we can have.\n\n641\n00:32:25,930 --> 00:32:27,930\nThe default is to use fixed memory.\n\n642\n00:32:27,930 --> 00:32:30,210\nSo my server is set to 2\ngigs of RAM right now.\n\n643\n00:32:30,210 --> 00:32:33,690\nWhen I turn it on, it's gonna use\n2 gigs of RAM no matter what.\n\n644\n00:32:33,690 --> 00:32:37,190\nWhether it's idling, whether it's busy,\nit's gonna use 2 gigs of RAM.\n\n645\n00:32:37,190 --> 00:32:39,180\nIt's allocated and dedicated to this VM.\n\n646\n00:32:40,270 --> 00:32:44,900\nBut if I go to dynamic,\nI can say when it starts,\n\n647\n00:32:44,900 --> 00:32:47,310\nmaybe I'll start it with 1 gig of RAM.\n\n648\n00:32:47,310 --> 00:32:51,230\nAnd then if it needs it it\ncan grow to 2 gigs, but\n\n649\n00:32:51,230 --> 00:32:53,895\nit's just gonna start with 1gig of RAM,\nright.\n\n650\n00:32:53,895 --> 00:32:57,238\nAnd I could even bump this\nmaximum higher if we wanted,\n\n651\n00:32:57,238 --> 00:32:59,793\nwell, actually I need to do it down here.\n\n652\n00:33:01,731 --> 00:33:03,175\nThere we go.\n\n653\n00:33:03,175 --> 00:33:05,450\nSo now I can say, start with 1 gig of RAM.\n\n654\n00:33:05,450 --> 00:33:08,600\nAnd then go as high as fo4\nur gigs if you need to\n\n655\n00:33:08,600 --> 00:33:09,810\nduring the operation of the server.\n\n656\n00:33:09,810 --> 00:33:11,400\nOr we can drop that down to 3 gigs or\n\n657\n00:33:11,400 --> 00:33:14,170\nwhatever it is that we\nneed to fit our needs.\n\n658\n00:33:14,170 --> 00:33:18,100\nThe problem is a lot of operating\nsystems aren't totally happy about this.\n\n659\n00:33:18,100 --> 00:33:20,520\nWhen they see that there's 3 gigs of RAM,\nthey might just try and\n\n660\n00:33:20,520 --> 00:33:21,740\nuse it right out of the box.\n\n661\n00:33:21,740 --> 00:33:23,680\nA lot of Linux distros are like that.\n\n662\n00:33:23,680 --> 00:33:27,250\nIt's not a bad thing,\nthey expect to have that memory there.\n\n663\n00:33:27,250 --> 00:33:30,020\nOther operating systems like\nWindows are a little bit better.\n\n664\n00:33:30,020 --> 00:33:31,690\nIt's pre-cached, it's pretty terrible so\n\n665\n00:33:31,690 --> 00:33:34,510\nit doesn't use that extra memory\nuntil it actually needs it.\n\n666\n00:33:34,510 --> 00:33:37,560\nSo, some operating systems\nbenefit a little better on that,\n\n667\n00:33:37,560 --> 00:33:38,439\nit just kinda depends.\n\n668\n00:33:40,250 --> 00:33:43,070\nFor production systems though,\nyou will not want to use this,\n\n669\n00:33:43,070 --> 00:33:44,430\nthis does affect performance.\n\n670\n00:33:44,430 --> 00:33:47,670\nIt takes a while for\nmemory to scale up and scale down again.\n\n671\n00:33:47,670 --> 00:33:48,960\nSo, in a production environment,\n\n672\n00:33:48,960 --> 00:33:52,820\nyou're almost always going to\ndo fixed values and not dynamic.\n\n673\n00:33:55,910 --> 00:33:59,600\nAll right, so those are a couple of\nthe advanced features when we configure\n\n674\n00:33:59,600 --> 00:34:00,740\na virtual machine.\n\n675\n00:34:00,740 --> 00:34:03,540\nI haven't talked about networking yet,\nand I do want to cover that so\n\n676\n00:34:03,540 --> 00:34:04,780\nwe'll take a look at that.\n\n677\n00:34:04,780 --> 00:34:08,720\nAnd we still need to talk about clustering\nalso, which is pretty important.\n\n678\n00:34:08,720 --> 00:34:10,790\nSo we'll get a chance to\nsee some of those, but\n\n679\n00:34:10,790 --> 00:34:13,620\nright now is probably a pretty good\ntime for us to stop and take a break.\n\n680\n00:34:13,620 --> 00:34:15,310\nSo why don't we take a breather here, and\n\n681\n00:34:15,310 --> 00:34:18,800\nwhen we get back,\nmore networking and clustering.\n\n682\n00:34:18,800 --> 00:34:20,310\nStay tuned, we'll be back after this.\n\n683\n00:34:20,310 --> 00:34:26,850\n[SOUND].\n\n684\n00:34:26,850 --> 00:34:29,300\nAll right, welcome back, everybody.\n\n685\n00:34:29,300 --> 00:34:33,610\nSo before the break, we got a chance\nto see adjusting the memory and CPU and\n\n686\n00:34:33,610 --> 00:34:36,430\na few other configuration settings\non our virtual machines when we\n\n687\n00:34:36,430 --> 00:34:38,720\ncreated them inside of XenServer.\n\n688\n00:34:38,720 --> 00:34:42,670\nNow what I wanna do is I wanna take\na look at the networking side of things.\n\n689\n00:34:42,670 --> 00:34:44,560\nDuring that wizard that I ran through,\n\n690\n00:34:44,560 --> 00:34:47,780\nit asked what I wanted to connect\nthe network to, and we just chose to\n\n691\n00:34:47,780 --> 00:34:50,910\ndynamically generate a MAC address and\nattach to the default network.\n\n692\n00:34:50,910 --> 00:34:53,020\nBut that may not be what we want.\n\n693\n00:34:53,020 --> 00:34:57,150\nThere's actually a lot of power in here\nas far as how networking gets configured.\n\n694\n00:34:57,150 --> 00:35:00,640\nFirst off, if you're gonna\nconfigure customized networks,\n\n695\n00:35:00,640 --> 00:35:03,060\nyou typically have to have\nmultiple networks, right?\n\n696\n00:35:03,060 --> 00:35:05,450\nIf you just have one network,\nthen you run off one network card and\n\n697\n00:35:05,450 --> 00:35:08,680\nthat's it,\nyou do it exactly like I did earlier.\n\n698\n00:35:08,680 --> 00:35:12,240\nBut if you have more than one network,\nmaybe you have a production network, and\n\n699\n00:35:12,240 --> 00:35:17,090\na test network, an R&D network,\nmaybe you've got a DMZ or whatever.\n\n700\n00:35:17,090 --> 00:35:20,780\nThen you'll typically have separate\nphysical network adapters for each one.\n\n701\n00:35:20,780 --> 00:35:25,830\nNow take a look at my server when I\ngo into the server side of things.\n\n702\n00:35:25,830 --> 00:35:29,890\nYou'll see a tab here called NICs and\nthat's my network interface cards.\n\n703\n00:35:29,890 --> 00:35:32,890\nAnd I'll see any network\ncards I have in my system.\n\n704\n00:35:32,890 --> 00:35:34,620\nI can see I have two of them.\n\n705\n00:35:34,620 --> 00:35:36,960\nAnd one's an Intel card and\n\n706\n00:35:36,960 --> 00:35:40,635\nthe other one it just says disconnected,\nit's apparently not plugged in.\n\n707\n00:35:40,635 --> 00:35:43,135\nSo I can see those two\nnetwork cards that are there.\n\n708\n00:35:43,135 --> 00:35:47,325\nAnd when we configure a virtual machine,\nthe virtual machine needs to connect to\n\n709\n00:35:47,325 --> 00:35:51,405\none of these network cards if it wants\nto get out on the physical network.\n\n710\n00:35:51,405 --> 00:35:53,825\nNow, we may not want it to get\nout on the physical network.\n\n711\n00:35:53,825 --> 00:35:55,935\nWe might want to have it isolated.\n\n712\n00:35:55,935 --> 00:36:00,305\nSo, the physical NICs here don't\nnecessarily match up with the actual\n\n713\n00:36:00,305 --> 00:36:02,490\nnetworks that we have inside of XenServer.\n\n714\n00:36:02,490 --> 00:36:05,720\nIn XenServer,\nwe create virtual network switches.\n\n715\n00:36:05,720 --> 00:36:08,860\nAnd those virtual network\nswitches may be connected to our\n\n716\n00:36:08,860 --> 00:36:10,160\nphysical network or they may not.\n\n717\n00:36:10,160 --> 00:36:11,470\nIt's up to us.\n\n718\n00:36:11,470 --> 00:36:14,550\nThat's why we have a second\ntab up here called Networking.\n\n719\n00:36:14,550 --> 00:36:18,140\nSo NICs,\nthat's our physical network cards.\n\n720\n00:36:18,140 --> 00:36:22,710\nBut Networking,\nthese are our virtual network switches.\n\n721\n00:36:22,710 --> 00:36:26,374\nAnd so I can see I have Network 0,\nand this other one's got a weird name,\n\n722\n00:36:26,374 --> 00:36:27,710\nI might want rename that.\n\n723\n00:36:27,710 --> 00:36:32,127\n[LAUGH] So I've got my two network\ncards here, and I can see that these\n\n724\n00:36:32,127 --> 00:36:37,620\nare virtual networks that have been\nattached to those physical NICs, okay?\n\n725\n00:36:37,620 --> 00:36:38,764\nLet me rename these just so\n\n726\n00:36:38,764 --> 00:36:41,314\nthey kind of make a little more\nsense when you look at them.\n\n727\n00:36:41,314 --> 00:36:44,110\nActually, I don't think it'll\nlet me rename this one.\n\n728\n00:36:44,110 --> 00:36:48,360\nThe physical NIC itself is\nnamed by the underlying OS.\n\n729\n00:36:48,360 --> 00:36:51,190\nBut the virtual networks,\nI can definitely rename that.\n\n730\n00:36:51,190 --> 00:36:55,260\nSo, for example, this network card here,\nthis NIC 0, all right?\n\n731\n00:36:55,260 --> 00:36:56,980\nThis is the one that's plugged in.\n\n732\n00:36:56,980 --> 00:36:58,880\nIt's 100MB, it's an Intel adapter.\n\n733\n00:36:58,880 --> 00:37:02,965\nAnd when I go over here, it's just\ncalled Network 0 connected to NIC 0.\n\n734\n00:37:02,965 --> 00:37:05,105\nThat's the one that's connected\nto our studio network,\n\n735\n00:37:05,105 --> 00:37:06,772\nthat's how I'm connected to that machine.\n\n736\n00:37:06,772 --> 00:37:12,195\nAnd so I may want to rename it,\nto call it something a little\n\n737\n00:37:12,195 --> 00:37:18,860\nbit more meaningful to me like\nthe ITProTV Studio Network, all right.\n\n738\n00:37:18,860 --> 00:37:20,780\nSo now I can recognize\nthat a little bit better.\n\n739\n00:37:20,780 --> 00:37:22,800\nHey, that's my studio network.\n\n740\n00:37:22,800 --> 00:37:27,030\nAnd it's a virtual switch called\nthe ITProTV Studio Network, and\n\n741\n00:37:27,030 --> 00:37:29,320\nit connects to that\nphysical network adapter.\n\n742\n00:37:29,320 --> 00:37:33,140\nWhatever network NIC 0 is plugged into,\nthat's what this is connected to.\n\n743\n00:37:33,140 --> 00:37:40,060\nMy second one though, maybe I'm gonna\nuse this for a development network.\n\n744\n00:37:40,060 --> 00:37:43,420\nSo I've got a dev environment, I want it\nto be isolated on a separate physical\n\n745\n00:37:43,420 --> 00:37:46,360\nnetwork, and so\nI put in a second network adapter.\n\n746\n00:37:46,360 --> 00:37:51,979\nSo I can come in here and I can rename\nit that, I'll call it my Dev Network,\n\n747\n00:37:51,979 --> 00:37:54,250\nall right.\n\n748\n00:37:54,250 --> 00:37:58,200\nSo now, I've got my ITProTv Studio\nNetwork, and my Dev Network.\n\n749\n00:37:58,200 --> 00:38:01,705\nWhen we create a virtual machine,\nthe virtual machine's gonna have a network\n\n750\n00:38:01,705 --> 00:38:03,750\nadapter, and\nwe can attach it to one of these.\n\n751\n00:38:03,750 --> 00:38:08,616\nNow we saw that during the initial setup\nwhen we went through doing the install of\n\n752\n00:38:08,616 --> 00:38:09,350\nthe new VM.\n\n753\n00:38:09,350 --> 00:38:12,153\nBut if your VM already exists,\nyou can just highlight it and\n\n754\n00:38:12,153 --> 00:38:16,650\ngo to the networking tab, and right there\nyou'll see the network adapters it's got.\n\n755\n00:38:16,650 --> 00:38:18,630\nThis virtual machine has one adapter and\n\n756\n00:38:18,630 --> 00:38:22,330\nit's plugged into\nthe ITProTV Studio Network, all right.\n\n757\n00:38:22,330 --> 00:38:25,020\nIf I wanted I could add\na second network adapter to it.\n\n758\n00:38:25,020 --> 00:38:27,360\nOr, I could go into the properties, and\n\n759\n00:38:27,360 --> 00:38:30,470\nI could change what the current\nadapter is plugged into.\n\n760\n00:38:30,470 --> 00:38:33,220\nI'm gonna choose that Dev Network.\n\n761\n00:38:33,220 --> 00:38:36,010\nAnd now, it's basically gonna\nunplug the network cable and\n\n762\n00:38:36,010 --> 00:38:39,900\nplug it in to that other network,\nthe other, in this case my Dev Network.\n\n763\n00:38:39,900 --> 00:38:41,990\nSo you can move your\nvirtual machines around.\n\n764\n00:38:43,540 --> 00:38:45,610\nNow both of my virtual networks,\n\n765\n00:38:45,610 --> 00:38:48,760\nit's gonna be upset because\nthat network is disconnected.\n\n766\n00:38:48,760 --> 00:38:53,830\nWhen I look at my Dev Network here, that\nnetwork card is disconnected right here.\n\n767\n00:38:53,830 --> 00:38:57,510\nSo that's why I'm getting\nthat red warning right there.\n\n768\n00:38:57,510 --> 00:39:01,340\nAll right now, those networks\nare mapped to my physical adapters.\n\n769\n00:39:01,340 --> 00:39:02,900\nSo that's fine.\n\n770\n00:39:02,900 --> 00:39:04,680\nThey don't have to be though.\n\n771\n00:39:04,680 --> 00:39:08,300\nYou can add in additional networks, and\n\n772\n00:39:08,300 --> 00:39:11,550\nyou can map them to something\nother than a physical adapter.\n\n773\n00:39:11,550 --> 00:39:15,080\nSo an external network is what\nwe had just a moment ago.\n\n774\n00:39:15,080 --> 00:39:19,910\nWe could do a single\nserver private network.\n\n775\n00:39:19,910 --> 00:39:22,500\nThis is when we have\na virtual machine that we\n\n776\n00:39:22,500 --> 00:39:25,010\ndon't want to be connected\nto our physical network.\n\n777\n00:39:25,010 --> 00:39:25,890\nWe just want it isolated.\n\n778\n00:39:25,890 --> 00:39:27,400\nNow, why would I want to do that?\n\n779\n00:39:27,400 --> 00:39:31,942\nWell, this is a feature I use all the time\nfor doing restore testing, right?\n\n780\n00:39:31,942 --> 00:39:34,918\nPeople backup their servers every single\nday, or at least they should, right?\n\n781\n00:39:34,918 --> 00:39:37,610\nSo, people backup their\nservers all the time, but\n\n782\n00:39:37,610 --> 00:39:39,770\nhow often do you test your restore?\n\n783\n00:39:39,770 --> 00:39:41,800\nDo you really know your restore is good?\n\n784\n00:39:41,800 --> 00:39:44,870\nIf you restore from that backup,\nare you able to recover the server?\n\n785\n00:39:44,870 --> 00:39:48,520\nWell, a lot of people don't know,\nand it's nice to be able to test it.\n\n786\n00:39:48,520 --> 00:39:52,410\nSo I might have an email server\nthat is up and completely happy.\n\n787\n00:39:52,410 --> 00:39:57,901\nI could create another virtual machine and\ntest restoring that email server.\n\n788\n00:39:57,901 --> 00:40:01,241\nBut I don't wanna bring up another\nserver with the same name, same IP.\n\n789\n00:40:01,241 --> 00:40:03,300\nI'll get conflicts on my network.\n\n790\n00:40:03,300 --> 00:40:07,490\nSo I can create an isolated network\nlike this doing a single server private\n\n791\n00:40:07,490 --> 00:40:13,759\nnetwork, and I can call it my\nRestore Testing Environment.\n\n792\n00:40:14,960 --> 00:40:17,740\nAll right, and I can create that.\n\n793\n00:40:17,740 --> 00:40:22,620\nAnd when I finish,\nnow I've got a Testing Environment Network\n\n794\n00:40:22,620 --> 00:40:25,710\nthat is not attached\nto a physical adapter.\n\n795\n00:40:25,710 --> 00:40:30,840\nSo I could bring up a couple of virtual\nmachines, attach them to this network,\n\n796\n00:40:30,840 --> 00:40:33,050\nand test my restore.\n\n797\n00:40:33,050 --> 00:40:36,480\nBring up machines with the same name,\nsame IP addresses as production machines.\n\n798\n00:40:36,480 --> 00:40:38,120\nBut not butting heads with them.\n\n799\n00:40:38,120 --> 00:40:40,440\nNot having duplicate IP errors and\nall that.\n\n800\n00:40:40,440 --> 00:40:42,832\nIt is really convenient and really useful.\n\n801\n00:40:42,832 --> 00:40:43,870\nAll right?\n\n802\n00:40:43,870 --> 00:40:46,320\nAlso, if you have a machine\nthat's being attacked,\n\n803\n00:40:46,320 --> 00:40:49,390\nthen you could quickly move it\noff to an isolated network.\n\n804\n00:40:49,390 --> 00:40:52,920\nThe machine is still on so\nyou can do your forensics collection, but\n\n805\n00:40:52,920 --> 00:40:54,820\nthe attacker can no longer\naccess the machine.\n\n806\n00:40:54,820 --> 00:40:55,721\nThat's another use.\n\n807\n00:40:55,721 --> 00:40:58,710\nThere's a few different uses for\nhaving an isolated network like this.\n\n808\n00:40:59,890 --> 00:41:00,460\nAll right.\n\n809\n00:41:00,460 --> 00:41:03,270\nI'm gonna go clear that error cuz\nthat red box is gonna annoy me.\n\n810\n00:41:03,270 --> 00:41:06,980\nIf you haven't seen the error system,\nlet me show you how it works.\n\n811\n00:41:06,980 --> 00:41:09,920\nEach server is maintaining\nits own set of logs.\n\n812\n00:41:09,920 --> 00:41:12,880\nSo when you click on a server,\nyou'll have logs over here.\n\n813\n00:41:12,880 --> 00:41:15,800\nAnd you can see all the different\nactivities that have been performed on it.\n\n814\n00:41:15,800 --> 00:41:18,850\nFor the most part you're gonna see\nthings like shutdowns and start-ups.\n\n815\n00:41:18,850 --> 00:41:22,830\nYou might see inserting or\nremoving an ISO image, right?\n\n816\n00:41:22,830 --> 00:41:24,860\nBut sometimes you'll get an error.\n\n817\n00:41:24,860 --> 00:41:28,050\nAnd an error will show up as a nice,\nbig red box, okay?\n\n818\n00:41:28,050 --> 00:41:30,900\nAnd see how I got an unknown error,\nattempting to configure an interface.\n\n819\n00:41:30,900 --> 00:41:34,650\nIt said interface was disconnected so\nit couldn't quite connect to it.\n\n820\n00:41:34,650 --> 00:41:35,970\nSo I got an error there.\n\n821\n00:41:35,970 --> 00:41:37,370\nOnce you get an error.\n\n822\n00:41:37,370 --> 00:41:41,260\nThat servers gonna be boxed in\nred until you view the error.\n\n823\n00:41:41,260 --> 00:41:44,630\nOnce you've viewed the error, see how\nit's no longer boxed in red it goes away.\n\n824\n00:41:44,630 --> 00:41:46,850\nJust a visual cue for you to see it.\n\n825\n00:41:46,850 --> 00:41:49,805\nThe error does stay in the log though,\nit stays there until you clear it.\n\n826\n00:41:49,805 --> 00:41:51,685\nAnd you can always flush the log.\n\n827\n00:41:51,685 --> 00:41:53,855\nAnd then, now it's gone and\nit's back to normal.\n\n828\n00:41:53,855 --> 00:41:54,715\nAll right.\n\n829\n00:41:55,895 --> 00:41:57,975\nSo, couple of different options there.\n\n830\n00:41:57,975 --> 00:42:02,585\nI'm going to put this back on\nto the ITProTV studio network.\n\n831\n00:42:04,245 --> 00:42:07,235\nThere is another neat option when\nit comes to working with our\n\n832\n00:42:07,235 --> 00:42:11,645\nphysical adaptors in XenServer,\nand that's called Network Bonding.\n\n833\n00:42:11,645 --> 00:42:13,890\nWhen we have physical network adaptors.\n\n834\n00:42:13,890 --> 00:42:17,300\nThey might be plugged into two networks.\n\n835\n00:42:17,300 --> 00:42:20,390\nOr, they might be plugged into the same\nnetwork for redundancy's sake.\n\n836\n00:42:20,390 --> 00:42:22,480\nWhat if one network card fails?\n\n837\n00:42:22,480 --> 00:42:24,680\nWell, it would be nice if the other\nnetwork card can take over,\n\n838\n00:42:24,680 --> 00:42:25,770\nI have two cards.\n\n839\n00:42:25,770 --> 00:42:29,030\nIt's pretty hard to buy a server these\ndays that doesn't have two network\n\n840\n00:42:29,030 --> 00:42:29,550\nadapters in it.\n\n841\n00:42:29,550 --> 00:42:30,520\nThey almost all do.\n\n842\n00:42:30,520 --> 00:42:31,300\nRight?\n\n843\n00:42:31,300 --> 00:42:35,550\nSo it'd be nice to be able to bond them,\nand we can.\n\n844\n00:42:35,550 --> 00:42:37,980\nIn XenServer you can create a bond, and\n\n845\n00:42:37,980 --> 00:42:43,230\nthat's what will merge two network cards\ntogether into a redundant, well, bond.\n\n846\n00:42:43,230 --> 00:42:44,110\nA combo card.\n\n847\n00:42:44,110 --> 00:42:44,700\nRight?\n\n848\n00:42:44,700 --> 00:42:49,148\nSo if I wanna do that let me make\nsure I delete that dev network.\n\n849\n00:42:52,027 --> 00:42:53,850\nAnd why am I not getting\nthe remove option?\n\n850\n00:42:53,850 --> 00:42:55,081\nWhat's up with that?\n\n851\n00:42:57,392 --> 00:43:00,420\nDoesn't wanna let me remove it, well\nit'll remove it when I create the bond.\n\n852\n00:43:00,420 --> 00:43:03,365\nSo, I'll go ahead and come in here and\nI'll tell it to create a bond, and\n\n853\n00:43:03,365 --> 00:43:05,160\nit\"s gonna show my network\nadapters that i've got and\n\n854\n00:43:05,160 --> 00:43:07,980\nI can pick the ones that\nI want to bond together.\n\n855\n00:43:07,980 --> 00:43:10,655\nAnd you'll see the different\nmodes that I can put them in.\n\n856\n00:43:10,655 --> 00:43:15,765\nActive-active, that means both cards\nwill be active effectively doubling\n\n857\n00:43:15,765 --> 00:43:21,035\nmy bandwidth, if I have two 1 gigabit\ncards, now its two gigabits of bandwidth.\n\n858\n00:43:21,035 --> 00:43:23,785\nIf one fails,\nthe other one is still running,\n\n859\n00:43:23,785 --> 00:43:25,635\nwe just step down to 1\ngigabit of bandwidth.\n\n860\n00:43:25,635 --> 00:43:29,590\nSo we get redundancy and performance,\nit's kind of a nice mix.\n\n861\n00:43:29,590 --> 00:43:30,250\nAll right.\n\n862\n00:43:30,250 --> 00:43:32,020\nWe also have active-passive.\n\n863\n00:43:32,020 --> 00:43:35,700\nThat's where one card is active and the\nother one is sitting there doing nothing.\n\n864\n00:43:35,700 --> 00:43:38,535\nAnd only when the active one fails\nwill the passive one kick in.\n\n865\n00:43:38,535 --> 00:43:40,470\nOkay.\n\n866\n00:43:40,470 --> 00:43:44,630\nIf we've got Active-active,\nwhy would we ever choose active passive?\n\n867\n00:43:44,630 --> 00:43:47,440\nThe reason is It comes\ndown to your switch.\n\n868\n00:43:47,440 --> 00:43:49,540\nWhen you're in Active-active,\n\n869\n00:43:49,540 --> 00:43:54,710\nyou're network cards are advertising the\nsame MAC address out both network cards.\n\n870\n00:43:54,710 --> 00:43:57,980\nAnd so the switch will see\nthe same MAC address on two ports.\n\n871\n00:43:57,980 --> 00:43:59,260\nSome switches don't like that.\n\n872\n00:43:59,260 --> 00:44:01,450\nSome switches get really angry about that.\n\n873\n00:44:01,450 --> 00:44:04,670\nAnd so if your switch doesn't\nlike that it causes problems.\n\n874\n00:44:04,670 --> 00:44:08,590\nWhen you're in Active-passive you're\nonly advertising the MAC address out\n\n875\n00:44:08,590 --> 00:44:11,300\nthe port that's actually active.\n\n876\n00:44:11,300 --> 00:44:13,530\nThe ones that passive is\nsitting there doing nothing.\n\n877\n00:44:13,530 --> 00:44:18,090\nWhen the active one fails the passive one\nwill start advertising that MAC address so\n\n878\n00:44:18,090 --> 00:44:21,690\nthe switch thinks you've unplugged the\ncable and just moved it to another port.\n\n879\n00:44:21,690 --> 00:44:23,260\nEvery switch supports that.\n\n880\n00:44:23,260 --> 00:44:26,740\nSo you get the most compatibility\nwith Active-passive, but\n\n881\n00:44:26,740 --> 00:44:28,270\nyou don't get a performance increase.\n\n882\n00:44:28,270 --> 00:44:32,178\nYou get redundancy, but\nyou don't get performance increase.\n\n883\n00:44:32,178 --> 00:44:32,950\nAll right.\n\n884\n00:44:32,950 --> 00:44:37,460\nYou'll also see where it supports the Link\nAggregation and Control Protocol, or LACP.\n\n885\n00:44:37,460 --> 00:44:41,810\nThat is a industry standard that Cisco,\nJuniper, Threecom, HP,\n\n886\n00:44:41,810 --> 00:44:43,600\nall those guys support.\n\n887\n00:44:43,600 --> 00:44:48,090\nAnd it allows you to do bonding where\nthe switch is aware of the bond.\n\n888\n00:44:48,090 --> 00:44:51,280\nThe switch understands that there's two\nports that are running the same host and\n\n889\n00:44:51,280 --> 00:44:52,530\nthey're bonded together.\n\n890\n00:44:52,530 --> 00:44:56,770\nThis is the best option if your\nswitch supports it, your switch and\n\n891\n00:44:56,770 --> 00:45:00,740\nyour service can work in tandem, and you\ncan really get some big benefits there.\n\n892\n00:45:00,740 --> 00:45:01,972\nSo you'll see doing LACP.\n\n893\n00:45:01,972 --> 00:45:04,280\nAnd with LACP you have two choices for\n\n894\n00:45:04,280 --> 00:45:08,540\nhow you want to load balance, if you load\nbalance based on the IP address or load\n\n895\n00:45:08,540 --> 00:45:11,800\nbalance based on the Mac address of the\nhosts that are communicating through it.\n\n896\n00:45:11,800 --> 00:45:13,880\nSo you can choose those\noptions right there.\n\n897\n00:45:13,880 --> 00:45:14,480\nAll right?\n\n898\n00:45:14,480 --> 00:45:17,750\nI'm gonna go ahead and\njust do Active-active.\n\n899\n00:45:17,750 --> 00:45:20,440\nActually, I better do, well, screw it.\n\n900\n00:45:20,440 --> 00:45:21,360\nWe'll do Active-active.\n\n901\n00:45:21,360 --> 00:45:22,870\nI'm indecisive.\n\n902\n00:45:22,870 --> 00:45:26,290\nThe switch that I'm plugged in,\nI know for a fact it supports LACP.\n\n903\n00:45:26,290 --> 00:45:30,390\nBut I can't remember its IP address, so\n[LAUGH] otherwise I'd remote in there and\n\n904\n00:45:30,390 --> 00:45:34,520\nturn it on, but we'll leave it as\nActive-active and give it a go.\n\n905\n00:45:34,520 --> 00:45:35,020\nAll right?\n\n906\n00:45:36,170 --> 00:45:37,620\nSo I'll go ahead and create that.\n\n907\n00:45:37,620 --> 00:45:41,840\nIt is letting me know that one of these\nnetwork adapters is the one that my\n\n908\n00:45:41,840 --> 00:45:43,900\nmanagement interface is on, right?\n\n909\n00:45:43,900 --> 00:45:47,390\nSo what's gonna happen if it bonds the one\nthat my management interface is on?\n\n910\n00:45:47,390 --> 00:45:49,380\nI'm gonna get disconnected.\n\n911\n00:45:49,380 --> 00:45:51,880\nIf I get disconnected,\nthat's gonna be a problem, right?\n\n912\n00:45:51,880 --> 00:45:53,128\nSo there's a big warning there.\n\n913\n00:45:53,128 --> 00:45:59,130\nWhat Citrix recommends is that if you're\ngonna be doing bonding and whatever.\n\n914\n00:45:59,130 --> 00:46:01,700\nThat you really need to have\nmultiple network adapters.\n\n915\n00:46:01,700 --> 00:46:05,850\nAnd you should have one network adapter\nthat is dedicated just for management.\n\n916\n00:46:05,850 --> 00:46:08,240\nAnd that ensures that you never get\ndisconnected from the machine while\n\n917\n00:46:08,240 --> 00:46:09,180\nyou work with it.\n\n918\n00:46:09,180 --> 00:46:10,312\nBut you'll see here.\n\n919\n00:46:10,312 --> 00:46:13,300\nIt says,\nthe pool would be temporarily disturbed,\n\n920\n00:46:13,300 --> 00:46:16,570\nyour network configuration would be\ndropped, but it'll come right back again.\n\n921\n00:46:16,570 --> 00:46:18,725\nBut there's a moment,\nwhere you've got risk,\n\n922\n00:46:18,725 --> 00:46:21,310\nthis risk where you've locked\nyourself out of the machine.\n\n923\n00:46:21,310 --> 00:46:22,670\nIn a critical environment.\n\n924\n00:46:22,670 --> 00:46:23,910\nYou don't like that risk, so\n\n925\n00:46:23,910 --> 00:46:26,680\nhaving a dedicated management\ninterface is pretty handy.\n\n926\n00:46:26,680 --> 00:46:27,990\nI don't have one in this system though, so\n\n927\n00:46:27,990 --> 00:46:30,330\nI will go ahead and\ncreate the bond anyway.\n\n928\n00:46:30,330 --> 00:46:34,270\nAnd while it happens, I will most\nlikely see the server disappear.\n\n929\n00:46:34,270 --> 00:46:36,090\nIt'll look like the server went offline.\n\n930\n00:46:36,090 --> 00:46:37,370\nWell, it didn't.\n\n931\n00:46:37,370 --> 00:46:39,200\nI just lost my network connection to it.\n\n932\n00:46:39,200 --> 00:46:40,580\nSo I'll give it a moment.\n\n933\n00:46:40,580 --> 00:46:44,600\nI can see where it's creating that bond,\nbut it's not quite done yet.\n\n934\n00:46:44,600 --> 00:46:46,450\nIf I move this around a little bit.\n\n935\n00:46:48,640 --> 00:46:51,600\nThere we go, you can see my status\nbar down here is only about a third\n\n936\n00:46:51,600 --> 00:46:52,620\nof the way through.\n\n937\n00:46:52,620 --> 00:46:55,260\nAnd that's because it's\njust kind of working,\n\n938\n00:46:55,260 --> 00:46:57,150\nit's actually not seeing\nthe server right now.\n\n939\n00:46:57,150 --> 00:46:59,600\nSo, it's trying to reconnect,\nso I have to give it a moment.\n\n940\n00:46:59,600 --> 00:47:01,260\nIt's not truly done.\n\n941\n00:47:01,260 --> 00:47:03,180\nNow there's another problem in here and\n\n942\n00:47:03,180 --> 00:47:06,470\nthat is that one of my network\ncards isn't even plugged in.\n\n943\n00:47:06,470 --> 00:47:10,280\nSo it's gonna try and bond to these guys\nbut one's dead, so really just one network\n\n944\n00:47:10,280 --> 00:47:13,260\ncard is gonna be doing the work\neven though the bond is present.\n\n945\n00:47:13,260 --> 00:47:14,130\nAll right.\n\n946\n00:47:14,130 --> 00:47:17,250\nWhen it is finished creating though,\nthen we can go under networking,\n\n947\n00:47:17,250 --> 00:47:18,830\nwe can create virtual networks.\n\n948\n00:47:18,830 --> 00:47:20,530\nThat are tied to the bond.\n\n949\n00:47:20,530 --> 00:47:23,330\nAnd see how it took my\nITProTV studio network?\n\n950\n00:47:23,330 --> 00:47:28,090\nAnd, it's renamed it to just call it\nBond 0, and so that one is now the bond,\n\n951\n00:47:28,090 --> 00:47:30,110\nand I can rename it after the fact.\n\n952\n00:47:30,110 --> 00:47:31,630\nNot right now cuz it's still working, but\n\n953\n00:47:31,630 --> 00:47:33,570\nwhen it finishes working,\nI'll be able to rename that.\n\n954\n00:47:35,450 --> 00:47:38,140\nAll right, so this is one of those parts\nwhere we have to wait impatiently.\n\n955\n00:47:38,140 --> 00:47:40,720\nSee what it says here,\nthe underlying connection was closed.\n\n956\n00:47:40,720 --> 00:47:43,840\nThe connection that was expected to be\nkept alive was closed by the server.\n\n957\n00:47:43,840 --> 00:47:46,362\nI lost my network connection and\nthat's to be expected.\n\n958\n00:47:46,362 --> 00:47:48,870\nAll right.\n\n959\n00:47:48,870 --> 00:47:52,071\nEventually it will recover.\n\n960\n00:47:52,071 --> 00:47:54,177\nThere we go.\nIt just jumped to full green,\n\n961\n00:47:54,177 --> 00:47:57,760\nso we just have to be patient and\nwait, and it'll reconnect.\n\n962\n00:47:57,760 --> 00:47:58,420\nI get impatient.\n\n963\n00:47:58,420 --> 00:47:59,940\nSo this is hard for me.\n\n964\n00:47:59,940 --> 00:48:02,023\n[LAUGH] All right, while we wait on it,\n\n965\n00:48:02,023 --> 00:48:05,550\nthere are some other advanced\nthings we've configure in here.\n\n966\n00:48:05,550 --> 00:48:07,120\nLike if I take a look\nat this other server.\n\n967\n00:48:08,760 --> 00:48:10,890\nThe advantage of having multiple servers.\n\n968\n00:48:10,890 --> 00:48:17,030\nIs that your switch might support VLAN's,\nor Virtual Local Area Networks.\n\n969\n00:48:17,030 --> 00:48:21,660\nIf it supports VLAN's you might have\nmultiple networks all tied to one\n\n970\n00:48:21,660 --> 00:48:22,700\nphysical adaptor.\n\n971\n00:48:22,700 --> 00:48:26,020\nIt's kind of a cool thing,\nbecause when we add a network,\n\n972\n00:48:26,020 --> 00:48:28,780\na lot of times we are adding\nan external network that's connected to\n\n973\n00:48:28,780 --> 00:48:31,660\na single physical adaptor,\nand that's it, right?\n\n974\n00:48:31,660 --> 00:48:35,240\nSo we go through we pick this, we pick\na physical adaptor, and there we go.\n\n975\n00:48:35,240 --> 00:48:39,420\nBut, you'll see where you also\nhave a choice for your VLAN's.\n\n976\n00:48:39,420 --> 00:48:43,820\nSo what we can do,\nis we can add in a network, and\n\n977\n00:48:43,820 --> 00:48:48,020\nmaybe I'll call this one VLAN100.\n\n978\n00:48:48,020 --> 00:48:51,560\nAnd I'm gonna attach it to NIC0 and I've\nalready got a network attached to NIC0 but\n\n979\n00:48:51,560 --> 00:48:53,960\nfor VLAN, I'll change that to VLAN ID 100.\n\n980\n00:48:53,960 --> 00:48:57,390\nAnd I can finish that up and\nthen I can add more.\n\n981\n00:48:57,390 --> 00:48:58,600\nI can add another one.\n\n982\n00:48:58,600 --> 00:49:00,210\nMaybe this'll be VLAN101.\n\n983\n00:49:00,210 --> 00:49:04,490\nAnd I'll come in here and\nplug in that VLAN value.\n\n984\n00:49:06,000 --> 00:49:08,150\nAnd VLAN 102.\nI won't bore you guys by creating 1000\n\n985\n00:49:08,150 --> 00:49:11,580\nof these, but I just wanted to\ncreate a few so we can see them.\n\n986\n00:49:11,580 --> 00:49:12,580\nThe name here doesn't matter.\n\n987\n00:49:12,580 --> 00:49:13,530\nYou can call it whatever you want.\n\n988\n00:49:13,530 --> 00:49:16,950\nThis might be your sales VLAN,\nyour marketing VLAN, whatever.\n\n989\n00:49:16,950 --> 00:49:19,280\nThe part that matters\nis this guy right here.\n\n990\n00:49:19,280 --> 00:49:20,490\nThe VLAN ID.\n\n991\n00:49:20,490 --> 00:49:22,280\nAnd when you punch that in.\n\n992\n00:49:22,280 --> 00:49:25,590\nOh, you know what,\nI punched in the wrong number.\n\n993\n00:49:25,590 --> 00:49:27,160\nSee?\nYou make a mess up like that and\n\n994\n00:49:27,160 --> 00:49:28,560\nall of a sudden.\n\n995\n00:49:28,560 --> 00:49:30,020\nThat's gonna be the view I wanna do.\n\n996\n00:49:30,020 --> 00:49:31,560\nThere we go, all right.\n\n997\n00:49:31,560 --> 00:49:34,630\nSo now I've got one physical adapter,\nNIC0.\n\n998\n00:49:34,630 --> 00:49:38,860\nBut now I've got my VLAN's,\nmy Virtual Local Area Networks mapped.\n\n999\n00:49:38,860 --> 00:49:41,250\nAnd so I can take my virtual machines.\n\n1000\n00:49:41,250 --> 00:49:44,200\nAnd if I attach them to\nthese individual VLAN's.\n\n1001\n00:49:44,200 --> 00:49:47,280\nWhen they communicate, sure they're\ncommunicating at the same physical\n\n1002\n00:49:47,280 --> 00:49:51,730\nadapter, but all of their frames will\nbe tagged with the appropriate VLAN.\n\n1003\n00:49:52,820 --> 00:49:55,400\nThis is really handy in environments where\n\n1004\n00:49:55,400 --> 00:49:58,950\nyou're logically segmenting your network\nand you've got multiple subnets or\n\n1005\n00:49:58,950 --> 00:50:01,850\nwhatever, this is a great\nway to handle that.\n\n1006\n00:50:01,850 --> 00:50:04,920\nYou still don't wanna rely on one\nnetwork adapter because if it fails,\n\n1007\n00:50:04,920 --> 00:50:06,490\nall of these VLAN's fail right.\n\n1008\n00:50:06,490 --> 00:50:07,790\nThat would be bad.\n\n1009\n00:50:07,790 --> 00:50:09,870\nBut if you do this to a bond right.\n\n1010\n00:50:09,870 --> 00:50:12,980\nSo if I have a bonded connection and\nI build a connection like this.\n\n1011\n00:50:12,980 --> 00:50:15,960\nI can have multiple VLAN's running\non a single bonded connection.\n\n1012\n00:50:15,960 --> 00:50:19,000\nYou can really get some cool\nperformance out of that.\n\n1013\n00:50:19,000 --> 00:50:22,440\nLooks like my server's reconnecting\nin the background there.\n\n1014\n00:50:22,440 --> 00:50:25,860\nSo, those are some neat little\noptions that we've got for networking.\n\n1015\n00:50:25,860 --> 00:50:29,160\nOnce networks are defines,\nthe VM's all treat them like normal.\n\n1016\n00:50:29,160 --> 00:50:31,570\nIf I go into this SQL server here.\n\n1017\n00:50:31,570 --> 00:50:37,690\nAnd I modify its network connection I\ncan swap it and move it over to VLAN100,\n\n1018\n00:50:37,690 --> 00:50:41,370\nor VLAN101, and the VM is just gonna\nsee this as a network adapter.\n\n1019\n00:50:41,370 --> 00:50:43,750\nIt doesn't know that it's actually\nbeing moved from virtual network to\n\n1020\n00:50:43,750 --> 00:50:44,730\nvirtual network.\n\n1021\n00:50:44,730 --> 00:50:46,490\nIt just sees it as a normal connection.\n\n1022\n00:50:46,490 --> 00:50:48,230\nAnd so I can move it along and\n\n1023\n00:50:48,230 --> 00:50:52,130\nnow everything it sends out that network\nadapter is being tagged for VLAN102.\n\n1024\n00:50:52,130 --> 00:50:55,080\nNow if your switch doesn't support VLAN's.\n\n1025\n00:50:55,080 --> 00:50:56,530\nThen this is gonna get ignored and\n\n1026\n00:50:56,530 --> 00:50:58,770\nyou're just gonna communicate\non the regular network.\n\n1027\n00:50:58,770 --> 00:51:01,150\nBut if your switch does support VLAN's and\n\n1028\n00:51:01,150 --> 00:51:03,930\nthe port that you're plugged\ninto is configured as a trunk.\n\n1029\n00:51:03,930 --> 00:51:08,280\nIt will start to take these communications\nand move them to the appropriate network.\n\n1030\n00:51:08,280 --> 00:51:08,980\nIt's really cool stuff.\n\n1031\n00:51:11,230 --> 00:51:11,730\nAll right.\n\n1032\n00:51:12,740 --> 00:51:15,070\nI wanna talk about clustering next.\n\n1033\n00:51:15,070 --> 00:51:18,810\nAnd one thing that's important with\nclustering, if we're gonna cluster these\n\n1034\n00:51:18,810 --> 00:51:22,910\nservers together, the servers don't\nhave to be identical, but it does help.\n\n1035\n00:51:22,910 --> 00:51:26,120\nIf you have processors that are identical,\nyou'll be able to easily fail\n\n1036\n00:51:26,120 --> 00:51:29,100\nvirtual machines between\nthe servers without rebooting them.\n\n1037\n00:51:29,100 --> 00:51:31,950\nIf the processors are different,\nthe virtual machines will have to\n\n1038\n00:51:31,950 --> 00:51:35,190\nreboot when they move between them,\nso but it is possible.\n\n1039\n00:51:35,190 --> 00:51:36,890\nOn the network side,\n\n1040\n00:51:36,890 --> 00:51:41,490\nit's important that we have the same\namount of network adaptors configured.\n\n1041\n00:51:41,490 --> 00:51:44,770\nSo if I have two network\nadaptors in server one.\n\n1042\n00:51:44,770 --> 00:51:47,980\nThen I need to have two network\nadaptors in server two, also.\n\n1043\n00:51:47,980 --> 00:51:50,030\nThey don't have to be\nthe same network adaptors.\n\n1044\n00:51:50,030 --> 00:51:52,590\nThey don't have to both be Broadcom or\nboth be Intel.\n\n1045\n00:51:52,590 --> 00:51:53,610\nThey can be different.\n\n1046\n00:51:53,610 --> 00:51:55,032\nBut we need to have the same quantity.\n\n1047\n00:51:55,032 --> 00:51:56,290\nAll right?\nAnd that way,\n\n1048\n00:51:56,290 --> 00:52:00,290\nwhen we define a virtual network,\nit defines it across the cluster, and\n\n1049\n00:52:00,290 --> 00:52:02,470\nit'll map the appropriate\nnetwork adaptors.\n\n1050\n00:52:02,470 --> 00:52:03,880\nBased on that so\n\n1051\n00:52:03,880 --> 00:52:08,430\ndefinitely something to keep in mind when\nyou are building a XenServer cluster,\n\n1052\n00:52:08,430 --> 00:52:12,430\nthe closer to identical your hardware is,\nthe better off you'll be.\n\n1053\n00:52:12,430 --> 00:52:16,440\nSo if you can, order your servers in bulk,\nget a batch of four of them or whatever,\n\n1054\n00:52:16,440 --> 00:52:19,820\ncluster them all together so they are all\nidentical, it will make life a lot easier.\n\n1055\n00:52:19,820 --> 00:52:21,430\nIf they are not identical.\n\n1056\n00:52:21,430 --> 00:52:23,900\nYou just need to make sure that you\nhave the same amount of NIC's and\n\n1057\n00:52:23,900 --> 00:52:26,210\nthat the processors\nare of the same family.\n\n1058\n00:52:26,210 --> 00:52:30,480\nYou don't wanna mix and match, you know,\nseveral different types of Intels,\n\n1059\n00:52:30,480 --> 00:52:34,110\nlike i5's and i7's or whatever,\ncuz you'll have issues.\n\n1060\n00:52:34,110 --> 00:52:38,060\nWhen a VM fails between one host and\nanother, it will typically reboot.\n\n1061\n00:52:40,390 --> 00:52:41,510\nSo.\nAll right, well,\n\n1062\n00:52:41,510 --> 00:52:43,100\nclustering is the next\nthing I wanna talk about.\n\n1063\n00:52:43,100 --> 00:52:45,040\nWe're a little low on\ntime in this segment.\n\n1064\n00:52:45,040 --> 00:52:45,800\nSo why don't we do this.\n\n1065\n00:52:45,800 --> 00:52:47,590\nWhy don't we stop and take a break, and\n\n1066\n00:52:47,590 --> 00:52:50,200\nwhen we get back,\nwe'll get a chance to see clustering.\n\n1067\n00:52:50,200 --> 00:52:52,940\nI'll cluster these two nodes together and\nthen we'll go from there.\n\n1068\n00:52:52,940 --> 00:52:54,600\nSo stay tuned.\n\n1069\n00:52:54,600 --> 00:52:55,575\nClustering after this.\n\n1070\n00:52:55,575 --> 00:52:59,220\n[SOUND] All right,\n\n1071\n00:52:59,220 --> 00:53:04,570\nwelcome back everybody.\n\n1072\n00:53:04,570 --> 00:53:06,223\nSo in this last segment,\n\n1073\n00:53:06,223 --> 00:53:11,370\nwhat I wanna do is take a look at\nclustering our XenServers together, right?\n\n1074\n00:53:11,370 --> 00:53:13,190\nThere's many advantages doing that.\n\n1075\n00:53:13,190 --> 00:53:15,740\nThe first of which is you don't\nhave to manage all these individual\n\n1076\n00:53:15,740 --> 00:53:16,510\nservers anymore.\n\n1077\n00:53:16,510 --> 00:53:21,140\nThey all become part of one big pool\nthat makes life easy to manage.\n\n1078\n00:53:21,140 --> 00:53:22,970\nThe other thing is failover.\n\n1079\n00:53:22,970 --> 00:53:23,950\nThat's the big deal right?\n\n1080\n00:53:23,950 --> 00:53:27,320\nOnce we get these things clustered,\nif one node were to fail,\n\n1081\n00:53:27,320 --> 00:53:30,640\nthe virtual machines on it can jump ship,\nover to another node and\n\n1082\n00:53:30,640 --> 00:53:33,660\nbe back online,\nwithout us having to get involved.\n\n1083\n00:53:33,660 --> 00:53:36,280\nAnd that's worth it's weight in gold,\nright?\n\n1084\n00:53:36,280 --> 00:53:40,040\nIf you've been in IT a while, you\nprobably receive those 4 AM phone calls,\n\n1085\n00:53:40,040 --> 00:53:41,860\nhey the servers down and\nyou've gotta deal with it.\n\n1086\n00:53:41,860 --> 00:53:45,430\nSo, clustering really helps us\nto avoid that kind of situation.\n\n1087\n00:53:45,430 --> 00:53:48,530\nSo let's take a look at getting\nthese guys clustered together.\n\n1088\n00:53:48,530 --> 00:53:50,050\nYou'll find that it's really easy.\n\n1089\n00:53:50,050 --> 00:53:53,460\nI know a lot of people get intimidated\nwhen they hear about clustering.\n\n1090\n00:53:53,460 --> 00:53:54,870\nIt's really not that hard.\n\n1091\n00:53:54,870 --> 00:53:57,660\nEspecially when you have software like\nthis where they've kind of automated\n\n1092\n00:53:57,660 --> 00:53:58,292\nit for us.\n\n1093\n00:53:58,292 --> 00:54:02,090\nIn XenServer, when we create a cluster,\nwhat we're really creating\n\n1094\n00:54:02,090 --> 00:54:06,070\nis what's called a Server Pool, and\nyou'll see this new pool option here.\n\n1095\n00:54:06,070 --> 00:54:08,440\nNow, be careful when you create this.\n\n1096\n00:54:08,440 --> 00:54:12,620\nIn an ideal world, you'll setup the pool\nfrom the beginning before you've created\n\n1097\n00:54:12,620 --> 00:54:14,990\nany virtual machines or\nanything like that.\n\n1098\n00:54:14,990 --> 00:54:17,340\nIn my case, I've already got stuff.\n\n1099\n00:54:17,340 --> 00:54:22,410\nI've created servers, I've created some\nstorage repositories and things like that.\n\n1100\n00:54:22,410 --> 00:54:26,380\nAnd I've done it all inside of individual,\nstandalone servers.\n\n1101\n00:54:26,380 --> 00:54:30,860\nWhen I pool them together,\nthey're not gonna share these resources.\n\n1102\n00:54:30,860 --> 00:54:33,730\nSo what I'll have to do is go back and\ndo a little clean up.\n\n1103\n00:54:33,730 --> 00:54:36,540\nClean up to move these virtual\nmachines into shared storage.\n\n1104\n00:54:36,540 --> 00:54:38,770\nTo move these repositories up to the pool.\n\n1105\n00:54:38,770 --> 00:54:39,843\nTo get things balanced out.\n\n1106\n00:54:39,843 --> 00:54:40,620\nAll right.\n\n1107\n00:54:40,620 --> 00:54:42,940\nBut the process is still\npretty straightforward.\n\n1108\n00:54:42,940 --> 00:54:47,550\nBasically what I need to do is use the new\npool button up at the top of XenCenter.\n\n1109\n00:54:47,550 --> 00:54:49,600\nAnd that's where we start\nto create the pool.\n\n1110\n00:54:49,600 --> 00:54:50,180\nYou give it a name.\n\n1111\n00:54:50,180 --> 00:54:51,600\nYou can call it whatever you want.\n\n1112\n00:54:51,600 --> 00:54:53,770\nI'll call mine ITProTV.\n\n1113\n00:54:53,770 --> 00:54:57,390\nAnd then you pick who's\ngoing to be the pool master.\n\n1114\n00:54:57,390 --> 00:55:01,190\nNow the whole point of a cluster is\nthat no one node is required for\n\n1115\n00:55:01,190 --> 00:55:02,170\nthe thing to operate.\n\n1116\n00:55:02,170 --> 00:55:03,030\nAnd that's.\n\n1117\n00:55:03,030 --> 00:55:05,150\nThat's how the XenServer clusters work.\n\n1118\n00:55:05,150 --> 00:55:08,900\nBut somebody has to be the head\nhoncho to make decisions.\n\n1119\n00:55:08,900 --> 00:55:09,790\nSo we're gonna pick the master.\n\n1120\n00:55:09,790 --> 00:55:12,045\nNow, if the master fails, no big deal.\n\n1121\n00:55:12,045 --> 00:55:13,860\nRight?\nThe other nodes can take over and\n\n1122\n00:55:13,860 --> 00:55:17,710\nwe can elect one of them to be\nthe master after the fact if we want to.\n\n1123\n00:55:17,710 --> 00:55:19,840\nBut, it's always good to start somewhere.\n\n1124\n00:55:19,840 --> 00:55:21,470\nI'm gonna take server one here.\n\n1125\n00:55:21,470 --> 00:55:23,180\nI'm gonna make that on the master.\n\n1126\n00:55:23,180 --> 00:55:23,880\nAll right.\n\n1127\n00:55:23,880 --> 00:55:24,630\nNow, after that,\n\n1128\n00:55:24,630 --> 00:55:29,340\nyou'll see you can pick other servers that\nyou might want to bring into the pool.\n\n1129\n00:55:29,340 --> 00:55:30,800\nI've got a slight problem with mine.\n\n1130\n00:55:30,800 --> 00:55:35,529\nNotice how it says ITProTV Server 2,\nthis server has shared storage.\n\n1131\n00:55:35,529 --> 00:55:36,035\nOkay.\n\n1132\n00:55:36,035 --> 00:55:37,285\nWhat does that mean?\n\n1133\n00:55:37,285 --> 00:55:42,601\nWell if I look at my storage I've got\nthat CIFS storage repository via ISO's.\n\n1134\n00:55:42,601 --> 00:55:48,421\nAnd I've got the same thing up on my\nserver, as well as that Xen storage iSCSI.\n\n1135\n00:55:48,421 --> 00:55:50,321\nAnd it's not present on the other server.\n\n1136\n00:55:50,321 --> 00:55:52,648\nI've got a difference and so\nit's upset about that and\n\n1137\n00:55:52,648 --> 00:55:53,970\nit's not gonna let me bond it.\n\n1138\n00:55:53,970 --> 00:55:56,220\nSo, I've got two choices here.\n\n1139\n00:55:56,220 --> 00:55:57,720\nOne, I can go ahead and\n\n1140\n00:55:57,720 --> 00:56:01,720\ncreate a pool with one member and\nthen just add the other server later.\n\n1141\n00:56:01,720 --> 00:56:04,770\nOr two, I can go back and\nI can remove those differences.\n\n1142\n00:56:04,770 --> 00:56:07,430\nAnd add them to the pool later,\nand that's the better approach.\n\n1143\n00:56:07,430 --> 00:56:08,980\nYou can go either way, right?\n\n1144\n00:56:08,980 --> 00:56:11,370\nBut this way is gonna\ngenerally work better.\n\n1145\n00:56:11,370 --> 00:56:13,330\nSo, what I'm gonna do is I'm gonna cancel.\n\n1146\n00:56:13,330 --> 00:56:15,910\nAnd I'm gonna remove these CIFS libraries.\n\n1147\n00:56:15,910 --> 00:56:18,730\nNow It's not gonna delete the libraries,\nthey still exist.\n\n1148\n00:56:18,730 --> 00:56:20,440\nI can just re-attach them afterwards.\n\n1149\n00:56:20,440 --> 00:56:22,908\nThat's what I'm gonna do,\nI 'm gonna detach these.\n\n1150\n00:56:22,908 --> 00:56:25,030\nAnd I'll get rid of\nthe one down here also.\n\n1151\n00:56:26,660 --> 00:56:30,170\nAll right, and\nI'm gonna get rid of this XenStorage.\n\n1152\n00:56:30,170 --> 00:56:33,460\nNow I haven't created any new virtual\nmachines in there but if I had,\n\n1153\n00:56:33,460 --> 00:56:36,520\nI'd need to shut down the virtual machines\nfirst and then I'm gonna detach it.\n\n1154\n00:56:36,520 --> 00:56:38,860\nI'm not gonna lose them,\nthey're still gonna be there.\n\n1155\n00:56:38,860 --> 00:56:42,130\nAnd then I can re-attach them from\nthe pool and bring them back up.\n\n1156\n00:56:42,130 --> 00:56:44,560\nSo I'm gonna go ahead and\ndetach that one also.\n\n1157\n00:56:44,560 --> 00:56:47,410\nNow notice when you detach one,\nit still shows up.\n\n1158\n00:56:47,410 --> 00:56:48,750\nIt's still existing.\n\n1159\n00:56:48,750 --> 00:56:52,430\nSo you may need to right-click on\nit again and choose to forget it.\n\n1160\n00:56:52,430 --> 00:56:54,840\nForgetting it means don't delete it or\ndestroy it.\n\n1161\n00:56:54,840 --> 00:56:57,050\nJust remove it from my screen so\nI don't see it anymore.\n\n1162\n00:56:57,050 --> 00:56:57,730\nAnd that's what I'm gonna do.\n\n1163\n00:56:57,730 --> 00:56:59,620\nI'm gonna actually forget it.\n\n1164\n00:56:59,620 --> 00:57:00,480\nAnd so those will be gone.\n\n1165\n00:57:00,480 --> 00:57:04,190\nAnd I'll just repeat that process with\neach of the three repositories that\n\n1166\n00:57:04,190 --> 00:57:05,500\nare making things different.\n\n1167\n00:57:07,700 --> 00:57:08,640\nAll right, so\n\n1168\n00:57:08,640 --> 00:57:12,220\nonce those are gone, now I should be\nable to create my pool without issues.\n\n1169\n00:57:12,220 --> 00:57:13,570\nSo I'll go up here and do a new pool.\n\n1170\n00:57:14,700 --> 00:57:17,820\nI'll pick server one as the master,\nand you know what,\n\n1171\n00:57:17,820 --> 00:57:18,740\nit still doesn't want to renew.\n\n1172\n00:57:18,740 --> 00:57:21,020\nAnd this server has running or\nSuspended VM.\n\n1173\n00:57:21,020 --> 00:57:23,470\nOh well,\nit definitely has running VM's doesn't it?\n\n1174\n00:57:23,470 --> 00:57:24,509\nSo, we'll go ahead and shut those down.\n\n1175\n00:57:28,458 --> 00:57:30,497\nThere we go,\neventually we'll make it happy and\n\n1176\n00:57:30,497 --> 00:57:32,620\nthen we'll be able to build this pool.\n\n1177\n00:57:32,620 --> 00:57:35,460\nThe reason it wants these VM's shut\ndown is it's gotta negotiate out\n\n1178\n00:57:35,460 --> 00:57:36,930\nresources and then.\n\n1179\n00:57:36,930 --> 00:57:39,670\nWho the parents are it's gotta\nregister them with the pool.\n\n1180\n00:57:39,670 --> 00:57:42,830\nIt's actually okay to have running VM's\non the master server so I could've just\n\n1181\n00:57:42,830 --> 00:57:46,370\ncheated and made server two the master\non that one but I wanted server one.\n\n1182\n00:57:46,370 --> 00:57:48,640\nSo I'm gonna go ahead and\nshut that down so we can do it right.\n\n1183\n00:57:50,830 --> 00:57:52,240\nThird times a charm here.\n\n1184\n00:57:52,240 --> 00:57:56,430\nWe'll go ahead and do this and\nnow I can check off both systems.\n\n1185\n00:57:56,430 --> 00:57:59,400\nWe can always add additional\nnodes to the pool later on too.\n\n1186\n00:57:59,400 --> 00:58:01,710\nSo I could've repeated this later.\n\n1187\n00:58:01,710 --> 00:58:02,430\nAll right.\n\n1188\n00:58:02,430 --> 00:58:04,080\nI'll go ahead and create that pool.\n\n1189\n00:58:04,080 --> 00:58:07,220\nWhat it's gonna do, is server one\nis going to become the master.\n\n1190\n00:58:07,220 --> 00:58:10,710\nIt's gonna create a pool, and\nit's gonna make itself the master, and\n\n1191\n00:58:10,710 --> 00:58:12,480\nthen it's gonna reach out to server two,\n\n1192\n00:58:12,480 --> 00:58:16,630\nand it's gonna tell it to become a member\nof that pool, and when that happens,\n\n1193\n00:58:16,630 --> 00:58:19,550\nmy whole navigation tree on\nthe left side is gonna change.\n\n1194\n00:58:19,550 --> 00:58:22,990\nNow, I've got the pool, ITProTV.\n\n1195\n00:58:22,990 --> 00:58:26,260\nAnd if I expand that out,\nhere I see my nodes.\n\n1196\n00:58:26,260 --> 00:58:28,590\nAnd, oh it happened too fast,\nI talked too long.\n\n1197\n00:58:28,590 --> 00:58:31,220\nBut if you look at server one\nit's got that green circle, and\n\n1198\n00:58:31,220 --> 00:58:35,120\nif you happen to catch it, server two\nhad a little blue square on it, and\n\n1199\n00:58:35,120 --> 00:58:36,650\nthat was the reconfiguring notice.\n\n1200\n00:58:36,650 --> 00:58:39,760\nIt was reconfiguring to become a part\nof the pool, it wasn't active yet.\n\n1201\n00:58:39,760 --> 00:58:42,830\nNow it's part of the pool,\nand it's active.\n\n1202\n00:58:42,830 --> 00:58:46,830\nPart of joining the pool, is giving\na consistent network configuration.\n\n1203\n00:58:46,830 --> 00:58:50,250\nSo remember I had created\nthat bond on server one.\n\n1204\n00:58:50,250 --> 00:58:51,230\nI actually removed it now.\n\n1205\n00:58:51,230 --> 00:58:55,180\nBut if it's still there, then server two\nwould need to create that bond also.\n\n1206\n00:58:55,180 --> 00:58:57,620\nRemember I said we needed to have\nthe same amount of network adapters.\n\n1207\n00:58:57,620 --> 00:59:01,340\nThat's because it would try and\nrecreate the same bond on the other side.\n\n1208\n00:59:01,340 --> 00:59:01,950\nAll right?\n\n1209\n00:59:01,950 --> 00:59:04,920\nSo I deleted that bond during the break so\nwe wouldn't have to worry about it.\n\n1210\n00:59:04,920 --> 00:59:07,970\nBut, now the servers are up, here they\nare, they've got their virtual machines.\n\n1211\n00:59:07,970 --> 00:59:12,840\nI can start the virtual machines back up\nnow, but, I'm missing my ISO Share and\n\n1212\n00:59:12,840 --> 00:59:14,440\nmy iSCSI storage.\n\n1213\n00:59:14,440 --> 00:59:16,900\nWell, I can re-attach them.\n\n1214\n00:59:16,900 --> 00:59:19,730\nBut instead of attaching them\nto an individual server,\n\n1215\n00:59:19,730 --> 00:59:22,200\nI can attach them to the pool itself.\n\n1216\n00:59:22,200 --> 00:59:23,650\nAnd that's super convenient.\n\n1217\n00:59:23,650 --> 00:59:27,380\nBecause as I add more nodes later on,\nif I wanna go to a three-node cluster, or\n\n1218\n00:59:27,380 --> 00:59:28,260\nan eight-node cluster,\n\n1219\n00:59:28,260 --> 00:59:31,400\nwhen I add them, it'll automatically\nattach those repositories.\n\n1220\n00:59:31,400 --> 00:59:33,840\nSo definitely a cool feature there.\n\n1221\n00:59:33,840 --> 00:59:36,990\nEven if you don't have similar hardware\nand you're not doing fail over,\n\n1222\n00:59:36,990 --> 00:59:40,900\nit's still kinda nice to not have\nto redefine those repositories.\n\n1223\n00:59:40,900 --> 00:59:42,740\nSo, I'll go up here and\nI'll do new storage, and\n\n1224\n00:59:42,740 --> 00:59:45,920\nI'm gonna attach my ISO repository again.\n\n1225\n00:59:47,920 --> 00:59:48,920\nAnd so I'm just gonna come in here and\n\n1226\n00:59:48,920 --> 00:59:51,290\npunch in that information\nto get connected to it.\n\n1227\n00:59:53,290 --> 00:59:56,950\nAnd I'll give it a user name cuz I believe\nI set password protection up on that.\n\n1228\n00:59:59,002 --> 01:00:02,940\nAll right, and so it's creating it and\nit's attaching it to the pool.\n\n1229\n01:00:02,940 --> 01:00:06,850\nNotice where it gets created,\nI've got server one, server two, and\n\n1230\n01:00:06,850 --> 01:00:08,070\nthere's the ISO library.\n\n1231\n01:00:08,070 --> 01:00:11,730\nIt's not actually underneath\nthe server like we saw earlier.\n\n1232\n01:00:11,730 --> 01:00:13,170\nIt's attached to the pool.\n\n1233\n01:00:13,170 --> 01:00:16,210\nAnd I'll do the same thing\nto the iSCSI storage.\n\n1234\n01:00:17,980 --> 01:00:19,250\nSo, I'm gonna come in here and punch in.\n\n1235\n01:00:19,250 --> 01:00:22,310\nThis'll be my iSCSI virtual disk storage,\nand\n\n1236\n01:00:22,310 --> 01:00:24,920\nI'll punch in that iSCSI\nhost where that's sitting.\n\n1237\n01:00:27,670 --> 01:00:28,670\nAnd so we'll find it.\n\n1238\n01:00:31,050 --> 01:00:33,580\nAnd again,\ninstead of being attached to one server,\n\n1239\n01:00:33,580 --> 01:00:36,900\nit's now attached to the cluster,\nto the pool.\n\n1240\n01:00:36,900 --> 01:00:40,530\nAnd now each of the servers will\nhave access to that storage and\n\n1241\n01:00:40,530 --> 01:00:43,700\nthat is the key component\nto live failover.\n\n1242\n01:00:43,700 --> 01:00:47,360\nIf I want a virtual machine to be able to\nfailover from one physical node to another\n\n1243\n01:00:47,360 --> 01:00:50,790\nphysical node, they both have to be\nable to see that same storage and\n\n1244\n01:00:50,790 --> 01:00:52,400\nso they need to be able to see it.\n\n1245\n01:00:52,400 --> 01:00:56,080\nNow when it connects,\nit's seeing that I'd already formatted it,\n\n1246\n01:00:56,080 --> 01:01:00,580\nthat it was already existing in\na previous XenServer environment.\n\n1247\n01:01:00,580 --> 01:01:03,650\nSo if that's fine with me\nI can just hit re-attach,\n\n1248\n01:01:03,650 --> 01:01:07,100\nand all the virtual machines and stuff\nthat are on there will stay there, and\n\n1249\n01:01:07,100 --> 01:01:09,900\nI can just go and bring them back up and\nwe're in business.\n\n1250\n01:01:09,900 --> 01:01:11,940\nBut, if I had never used this before, and\n\n1251\n01:01:11,940 --> 01:01:14,560\nI didn't know what was on it,\nI could choose to format it again.\n\n1252\n01:01:14,560 --> 01:01:17,720\nAnd, it would erase it, and\nthen I'd start kind of fresh and clean.\n\n1253\n01:01:17,720 --> 01:01:20,672\nI'll go ahead and reattach,\nmine was empty anyway, but I'll re-attach.\n\n1254\n01:01:20,672 --> 01:01:25,810\nAll right, and notice on the left side,\nthat shared storage is being attached,\n\n1255\n01:01:25,810 --> 01:01:29,945\nnot to an individual server, but\nto the pool, to the whole cluster.\n\n1256\n01:01:29,945 --> 01:01:31,410\nRight.\n\n1257\n01:01:31,410 --> 01:01:32,170\nWhen it's done.\n\n1258\n01:01:33,210 --> 01:01:36,190\nNow that's independent from my node,\nso I can start to work with them.\n\n1259\n01:01:36,190 --> 01:01:39,350\nI can create virtual machines and\nthey'll have that shared storage.\n\n1260\n01:01:39,350 --> 01:01:43,910\nNow, I do still have a slight problem,\nand that's my existing virtual machines.\n\n1261\n01:01:43,910 --> 01:01:49,400\nWhen I created these MySQL servers and\nwhen I created these web servers,\n\n1262\n01:01:49,400 --> 01:01:52,930\nI did it on the individual machines,\nand that means there's storage.\n\n1263\n01:01:52,930 --> 01:01:57,620\nIf I look at their storage, It's stored\non the local storage of each server.\n\n1264\n01:01:57,620 --> 01:01:59,700\nI can't fail that over.\n\n1265\n01:01:59,700 --> 01:02:03,740\nIt's on the local hard drive of server two\nor on the local hard drive of server one.\n\n1266\n01:02:03,740 --> 01:02:06,600\nIf I go into the local storage\nI'll see those drives right there.\n\n1267\n01:02:06,600 --> 01:02:09,510\nSo they're not gonna be able to\nfail over in their current state.\n\n1268\n01:02:09,510 --> 01:02:13,290\nI'm gonna need to move them over\nto the shared storage to be able\n\n1269\n01:02:13,290 --> 01:02:14,860\nto function, all right?\n\n1270\n01:02:14,860 --> 01:02:16,750\nBut notice there's a slight problem.\n\n1271\n01:02:16,750 --> 01:02:21,350\nIf I pick that storage,\nthere's no move option, right?\n\n1272\n01:02:21,350 --> 01:02:23,560\nIt actually doesn't have\na feature that let's us do that,\n\n1273\n01:02:23,560 --> 01:02:25,330\nlet's us move that storage.\n\n1274\n01:02:25,330 --> 01:02:29,320\nSo what I really need to do Is\nbackup the server, or export it.\n\n1275\n01:02:29,320 --> 01:02:32,240\nAnd then re-import it, and\nput it in the shared storage.\n\n1276\n01:02:32,240 --> 01:02:34,170\nWith any virtual machine you can take it.\n\n1277\n01:02:35,410 --> 01:02:38,480\nAnd if you right-click on it,\nyou'll see the Export option.\n\n1278\n01:02:38,480 --> 01:02:41,180\nAnd you can export that out to a file.\n\n1279\n01:02:41,180 --> 01:02:45,040\nAnd then you can re-import it, to bring it\nback in and attach it to somewhere else.\n\n1280\n01:02:45,040 --> 01:02:47,450\nYou'll see you've also\ngot the Move VM option.\n\n1281\n01:02:47,450 --> 01:02:51,000\nThis is a new option,\nit wasn't present in XenServer 5 and\n\n1282\n01:02:51,000 --> 01:02:52,170\nearlier, it was in XenServer 6.\n\n1283\n01:02:52,170 --> 01:02:54,390\nAnd it allows you to do the move also.\n\n1284\n01:02:54,390 --> 01:02:57,030\nAnd what it's doing,\nit's just automating the export.\n\n1285\n01:02:57,030 --> 01:03:00,710\nIt's just basically doing the export and\nimport for you.\n\n1286\n01:03:00,710 --> 01:03:05,130\nIt's what you would expect to see here,\nlike when I go to storage and\n\n1287\n01:03:05,130 --> 01:03:09,160\nchoose to move, you'd expect that\nto move the storage but it doesn't.\n\n1288\n01:03:09,160 --> 01:03:12,060\nIt doesn't in this case\nbecause it's local storage.\n\n1289\n01:03:12,060 --> 01:03:16,260\nBut up here when I choose to move the VM\nit basically has the effect of doing that.\n\n1290\n01:03:16,260 --> 01:03:19,530\nThat it's going to move that storage,\nand so we can choose to move it,\n\n1291\n01:03:19,530 --> 01:03:20,930\nI'll move it to that iSCSI storage.\n\n1292\n01:03:23,160 --> 01:03:24,360\nAnd now it's gonna fire up and\n\n1293\n01:03:24,360 --> 01:03:28,700\nif I watch in my logs I can see\nit doing that move operation.\n\n1294\n01:03:28,700 --> 01:03:31,970\nNow, iSCSI SAN's have\nnotoriously poor performance.\n\n1295\n01:03:31,970 --> 01:03:34,140\nAnd that's where I'm moving\nthis to is iSCSI SAN.\n\n1296\n01:03:34,140 --> 01:03:37,250\nSo, this could take five minutes,\nit could take five hours.\n\n1297\n01:03:37,250 --> 01:03:39,526\nIf it's a terabyte drive,\nit could take six hours,\n\n1298\n01:03:39,526 --> 01:03:40,990\nwho knows how long it could take?\n\n1299\n01:03:40,990 --> 01:03:42,670\nSo, you may have to wait a while.\n\n1300\n01:03:42,670 --> 01:03:46,601\nAnd, the progress bar here,\nit's one of those bad ones.\n\n1301\n01:03:46,601 --> 01:03:50,714\nWhere it'll take forever to get to 50%,\nand then it'll just jump to 100%,\n\n1302\n01:03:50,714 --> 01:03:53,730\nso the status bar doesn't\nnecessarily mean anything to us.\n\n1303\n01:03:53,730 --> 01:03:55,290\nWe just have to wait for it to happen.\n\n1304\n01:03:55,290 --> 01:03:59,120\nIt's gonna slowly copy that data over,\nbut I can kind of watch it happen.\n\n1305\n01:03:59,120 --> 01:04:02,457\nIf I go look in my iSCSI virtual storage,\nif I take a peek here,\n\n1306\n01:04:02,457 --> 01:04:04,849\nI can see it's already created that drive.\n\n1307\n01:04:04,849 --> 01:04:07,200\nSo I know it's copying the drive over.\n\n1308\n01:04:07,200 --> 01:04:07,980\nI just need to wait for\n\n1309\n01:04:07,980 --> 01:04:11,890\nit to finish, and you'll see\nthe virtual machine it's attached to.\n\n1310\n01:04:11,890 --> 01:04:14,440\nIt's attached to a control domain.\n\n1311\n01:04:14,440 --> 01:04:16,610\nThat means it's attached\nto XenServer itself.\n\n1312\n01:04:16,610 --> 01:04:18,190\nXen is still working with it.\n\n1313\n01:04:18,190 --> 01:04:19,003\nWhen it's done,\n\n1314\n01:04:19,003 --> 01:04:22,868\nthat'll change to say that it's attached\nto the virtual machine instead, right?\n\n1315\n01:04:22,868 --> 01:04:28,788\nWe want it to be attached to, well,\nin my case, ITPROTV2-MYSQL01, all right?\n\n1316\n01:04:28,788 --> 01:04:33,180\nSo it's gonna move that, and when it's\ndone, I'll now have a cluster node.\n\n1317\n01:04:34,420 --> 01:04:38,150\nI need to do that for\nall of my existing virtual machines.\n\n1318\n01:04:38,150 --> 01:04:40,140\nI need to take my existing\nvirtual machines and\n\n1319\n01:04:40,140 --> 01:04:42,220\nmove them over to that shared storage.\n\n1320\n01:04:42,220 --> 01:04:43,110\nThere we go.\n\n1321\n01:04:43,110 --> 01:04:44,330\nSo see how it changed, and\n\n1322\n01:04:44,330 --> 01:04:48,420\nnow it shows the server name there\ninstead of showing that control domain?\n\n1323\n01:04:48,420 --> 01:04:54,380\nAnd if I go back to ITPROTV-MYSQL01,\nI can see that it has moved,\n\n1324\n01:04:54,380 --> 01:04:58,620\nand if I look at its storage, the storage\nis attached to that iSCSI device.\n\n1325\n01:04:58,620 --> 01:05:01,690\nIt's no longer on\nthe local virtual machine.\n\n1326\n01:05:01,690 --> 01:05:07,940\nThe cool part there is since I'm no longer\nattached to that individual machine,\n\n1327\n01:05:07,940 --> 01:05:10,950\nsee how I have the option\nto start on either server?\n\n1328\n01:05:10,950 --> 01:05:16,020\nI can start on server one or\nserver two because I'm on shared storage,\n\n1329\n01:05:16,020 --> 01:05:19,940\nversus if I take my other MySQL box,\nthis one?\n\n1330\n01:05:19,940 --> 01:05:24,540\nThis one still has storage right\nhere local to the second server.\n\n1331\n01:05:24,540 --> 01:05:25,840\nYou see it right there.\n\n1332\n01:05:25,840 --> 01:05:32,500\nSo if I try and start it,\nI won't see both servers in my options.\n\n1333\n01:05:32,500 --> 01:05:37,810\nI'll see server two, but server one says,\ncannot see required storage.\n\n1334\n01:05:37,810 --> 01:05:41,316\nThe storage is part of server two,\nso it can't failover.\n\n1335\n01:05:41,316 --> 01:05:46,135\nIt is stuck on that one node\nuntil I move it, all right?\n\n1336\n01:05:46,135 --> 01:05:47,800\nBut this other one is happy.\n\n1337\n01:05:47,800 --> 01:05:49,380\nI could actually move it\nright now if I wanted.\n\n1338\n01:05:49,380 --> 01:05:52,500\nThat would be easy because it's off.\n\n1339\n01:05:52,500 --> 01:05:55,750\nSo right now, it shows as being under\nserver one, but it's gonna boot up and\n\n1340\n01:05:55,750 --> 01:05:57,480\nit's gonna jump over to server two,\n\n1341\n01:05:57,480 --> 01:06:00,920\nand that's where it's gonna be\nrunning from when it's done.\n\n1342\n01:06:00,920 --> 01:06:02,890\nThere we go, so\nthere it just made the jump, and\n\n1343\n01:06:02,890 --> 01:06:04,540\nnow it's over on the other hardware.\n\n1344\n01:06:04,540 --> 01:06:07,510\nBy putting our virtual machine\non that shared storage,\n\n1345\n01:06:07,510 --> 01:06:10,480\nwe've removed our dependence\nupon the hardware.\n\n1346\n01:06:11,610 --> 01:06:16,670\nITPROTV-MYSQL01 doesn't care if\nit's on server one or server two.\n\n1347\n01:06:16,670 --> 01:06:19,140\nIf server one fails, big deal.\n\n1348\n01:06:19,140 --> 01:06:20,450\nWe'll boot up on server two.\n\n1349\n01:06:20,450 --> 01:06:22,530\nIf server two is down,\nwe'll boot up on server one.\n\n1350\n01:06:22,530 --> 01:06:26,584\nIf they're both down,\nyou're probably getting some phone calls.\n\n1351\n01:06:26,584 --> 01:06:30,670\n[LAUGH] So that's a bad situation, but as\nlong as one server's up, it'll be happy,\n\n1352\n01:06:30,670 --> 01:06:33,290\nit'll run from there, and\nyou'll be in business, okay?\n\n1353\n01:06:33,290 --> 01:06:36,300\nSo that would be in the next step of\nthis migration is for me to go and\n\n1354\n01:06:36,300 --> 01:06:41,390\nmove each one of these guys over to the\nshared storage, and it's gonna take time.\n\n1355\n01:06:41,390 --> 01:06:44,390\nI just need to get them moved over,\nand then we'll be in business.\n\n1356\n01:06:44,390 --> 01:06:47,670\nAnd I can use the export\nimport function if I want, or\n\n1357\n01:06:47,670 --> 01:06:51,230\nI can just use the move function that\nwe saw right here by right clicking.\n\n1358\n01:06:53,050 --> 01:06:56,320\nAll right, so we'll go ahead and do that,\nand I'm not gonna move them all.\n\n1359\n01:06:56,320 --> 01:06:57,020\nIt'll take forever.\n\n1360\n01:06:57,020 --> 01:06:58,910\nMaybe I'll start that tonight and\nhave it done for tomorrow.\n\n1361\n01:07:00,500 --> 01:07:04,578\nAs I create new virtual machines, though,\nwhen I go to create a new virtual machine,\n\n1362\n01:07:04,578 --> 01:07:07,140\nthere's gonna be a slight\ndifference in the wizard.\n\n1363\n01:07:07,140 --> 01:07:09,959\nWhen I go through to create one,\nso I'll create another CentOS box.\n\n1364\n01:07:13,947 --> 01:07:17,553\nAll right?\nMaybe I'm gonna whip up a FTP server, so\n\n1365\n01:07:17,553 --> 01:07:20,610\nthis would be be ITPROTV2-FTP01.\n\n1366\n01:07:20,610 --> 01:07:24,550\nSo I'm going to whip up an FTP server,\nand I need to tell it what I'm going to\n\n1367\n01:07:24,550 --> 01:07:28,945\ninstall from, and when I drop this down,\nI see the SIFT's library, right there.\n\n1368\n01:07:28,945 --> 01:07:31,800\nThere's that ISO library.\n\n1369\n01:07:31,800 --> 01:07:33,590\nDoesn't look any different to me,\n\n1370\n01:07:33,590 --> 01:07:36,250\nthe fact that it's attached to the pool\ninstead of attached to the server.\n\n1371\n01:07:36,250 --> 01:07:39,270\nIt just shows up right there, all right?\n\n1372\n01:07:39,270 --> 01:07:42,360\nYou will notice that you see\nthe DVD drives for the two servers.\n\n1373\n01:07:42,360 --> 01:07:44,900\nSo server one and\nserver two's DVD drives show up.\n\n1374\n01:07:44,900 --> 01:07:48,710\nIf I pick one of those,\nI will have to start the virtual machine\n\n1375\n01:07:48,710 --> 01:07:52,140\nfrom that physical server because I'm\ntrying to bond to its physical DVD drive,\n\n1376\n01:07:52,140 --> 01:07:54,510\nbut I'm gonna do it from the SIFT share.\n\n1377\n01:07:55,760 --> 01:07:59,000\nAnd now, place the VM on this server.\n\n1378\n01:07:59,000 --> 01:08:02,510\nI can choose a home server for\nthis VM and stick it on there, and\n\n1379\n01:08:02,510 --> 01:08:05,600\nit will stay there, but in a cluster,\nwe don't normally want that.\n\n1380\n01:08:06,770 --> 01:08:09,870\nWe normally wanna say,\ndon't assign a home server.\n\n1381\n01:08:09,870 --> 01:08:12,465\nIn other words,\nI don't care what server it boots off of.\n\n1382\n01:08:12,465 --> 01:08:13,865\nBoot off of whatever works.\n\n1383\n01:08:13,865 --> 01:08:16,335\nIf one server doesn't work,\nboot off the other one, right?\n\n1384\n01:08:16,335 --> 01:08:17,425\nThat's high availability.\n\n1385\n01:08:17,425 --> 01:08:19,615\nThat's where we start to\nget that flexibility.\n\n1386\n01:08:19,615 --> 01:08:21,793\nIf a physical node fails,\nwe'll boot off the other one.\n\n1387\n01:08:23,913 --> 01:08:25,035\nAll right.\n\n1388\n01:08:25,035 --> 01:08:28,505\nI pick my CPUs and\nmy memory and then storage.\n\n1389\n01:08:28,505 --> 01:08:32,405\nNow, on the storage side, we need to\nmake sure that if we come in here and\n\n1390\n01:08:32,405 --> 01:08:36,750\nlike manually define storage that\nwe choose that shared storage.\n\n1391\n01:08:36,750 --> 01:08:37,940\nIf you create storage and\n\n1392\n01:08:37,940 --> 01:08:41,600\nyou pick some of this local storage,\nyou'll no longer be able to failover, and\n\n1393\n01:08:41,600 --> 01:08:44,590\nin fact, it's grayed out for\nme here cuz I didn't pick a home server.\n\n1394\n01:08:44,590 --> 01:08:47,260\nIf I'd picked a home server I\nwould be able to pick that, but\n\n1395\n01:08:47,260 --> 01:08:48,090\nyou don't want that.\n\n1396\n01:08:48,090 --> 01:08:51,208\nYou want it to be on that iSCSI storage so\nthat you can have fail over.\n\n1397\n01:08:54,292 --> 01:08:55,310\nAll right?\n\n1398\n01:08:55,310 --> 01:08:57,670\nAnd now I see all those different\nnetworks that we created.\n\n1399\n01:08:57,670 --> 01:09:03,290\nI'll go attach this to to the studio\nnetwork, and we can finish it up.\n\n1400\n01:09:03,290 --> 01:09:05,772\nNow I'm creating a new VM.\n\n1401\n01:09:05,772 --> 01:09:10,380\nIt's gonna automatically install into that\niSCSI storage, into that shared storage.\n\n1402\n01:09:10,380 --> 01:09:12,127\nSo this will be a cluster aware,\n\n1403\n01:09:12,127 --> 01:09:15,705\nfriendly, happy machine right\nfrom the very beginning, okay?\n\n1404\n01:09:15,705 --> 01:09:17,881\nNow, I didn't assign a home server, so\n\n1405\n01:09:17,881 --> 01:09:20,890\nI'm kinda curious to see\nwhere it's gonna pop up.\n\n1406\n01:09:20,890 --> 01:09:22,050\nOh, apparently we got an error.\n\n1407\n01:09:22,050 --> 01:09:22,620\nLet's see what we got.\n\n1408\n01:09:23,743 --> 01:09:26,185\nInternal failure, I/O control fail.\n\n1409\n01:09:26,185 --> 01:09:26,745\nInteresting.\n\n1410\n01:09:26,745 --> 01:09:29,165\nLink up, so it got a network error.\n\n1411\n01:09:30,705 --> 01:09:32,365\nI forgot something important.\n\n1412\n01:09:32,365 --> 01:09:35,595\nI mentioned how important it was to have\nthe same network configuration on our\n\n1413\n01:09:35,595 --> 01:09:36,475\nservers.\n\n1414\n01:09:36,475 --> 01:09:40,410\nWell, when we implemented this pool, I\ndidn't have the same configuration, did I?\n\n1415\n01:09:40,410 --> 01:09:44,689\nI had partially implemented a bond on one\nside, and I hadn't done that on the other,\n\n1416\n01:09:44,689 --> 01:09:47,780\nand so there were kind of some\ngray area stuff going on there.\n\n1417\n01:09:47,780 --> 01:09:49,270\nSo I really should've gone and\n\n1418\n01:09:49,270 --> 01:09:53,006\ncleaned up the network configuration\nbefore I went any further, all right?\n\n1419\n01:09:53,006 --> 01:09:56,594\nWell, if you take a look at these servers,\nif I take a look at ITProTV server one and\n\n1420\n01:09:56,594 --> 01:09:59,624\nnetworking, see how I've got all\nthese different entries in here?\n\n1421\n01:09:59,624 --> 01:10:05,590\nSome of these are ones I defined,\nVLAN101, VLAN100, and so on.\n\n1422\n01:10:05,590 --> 01:10:09,230\nSo they're all kinda showing up in here,\nthe DEV network.\n\n1423\n01:10:09,230 --> 01:10:13,231\nIf I jump over to ITProTV server two,\nand I look at the networking,\n\n1424\n01:10:13,231 --> 01:10:15,599\nit's a little bit different, right?\n\n1425\n01:10:15,599 --> 01:10:19,750\nI think I'm seeing one difference in here.\n\n1426\n01:10:19,750 --> 01:10:22,820\nSo I need to find out what\nthe difference is and fix it, so\n\n1427\n01:10:22,820 --> 01:10:26,160\nwe can kind of bounce back and\nforth between these two and see.\n\n1428\n01:10:26,160 --> 01:10:27,782\nIt looks like it's just\nthat extra network adapter,\n\n1429\n01:10:27,782 --> 01:10:28,980\nso that shouldn't be too big of a deal.\n\n1430\n01:10:30,000 --> 01:10:32,660\nWhat you'll see is that you've got network\nconfigurations under the individual\n\n1431\n01:10:32,660 --> 01:10:35,220\nserver, but also under the pool.\n\n1432\n01:10:35,220 --> 01:10:38,140\nIf I jump up to the pool,\nyou've got networking.\n\n1433\n01:10:38,140 --> 01:10:41,320\nNow, you don't have the NIC column\nwhere you have the physical cards\n\n1434\n01:10:41,320 --> 01:10:43,680\nbecause the pool itself\ndoesn't have physical cards.\n\n1435\n01:10:43,680 --> 01:10:47,460\nIt just has logical ones, and so\nI can see the logical networks here, and\n\n1436\n01:10:47,460 --> 01:10:50,890\nI just need to clean up anything in\nhere that shouldn't be there, and\n\n1437\n01:10:50,890 --> 01:10:51,830\nit's this network one.\n\n1438\n01:10:51,830 --> 01:10:52,850\nThis is the problem.\n\n1439\n01:10:52,850 --> 01:10:56,030\nSo I've got network one and\nsee how it's attached to NIC 1?\n\n1440\n01:10:56,030 --> 01:10:59,130\nWell, my first server has a NIC 1.\n\n1441\n01:10:59,130 --> 01:11:00,750\nMy second server doesn't.\n\n1442\n01:11:00,750 --> 01:11:04,390\nSo I've got a disconnect there, and\nthat's what's gonna be causing my problem.\n\n1443\n01:11:04,390 --> 01:11:07,650\nUntil I correct that, I'm not gonna\nbe able to create new virtual\n\n1444\n01:11:07,650 --> 01:11:10,520\nmachines because the networks\naren't set up right.\n\n1445\n01:11:10,520 --> 01:11:12,300\nSo I need to go and fix that.\n\n1446\n01:11:12,300 --> 01:11:15,420\nIf I have a second adapter,\nI need to add it to server two.\n\n1447\n01:11:15,420 --> 01:11:19,230\nIf I don't have an extra adapter,\nI need to remove the one from server one.\n\n1448\n01:11:19,230 --> 01:11:21,623\nSo that means I need to physically\ngo over to that box and\n\n1449\n01:11:21,623 --> 01:11:24,223\npull that second card out of there,\nwhich is kind of hard for\n\n1450\n01:11:24,223 --> 01:11:27,709\nme to do with my microphone attached so\n[LAUGH] maybe I'll do that after the show,\n\n1451\n01:11:27,709 --> 01:11:31,330\nbut that's why it's giving me that problem\nwith creating a new virtual machine.\n\n1452\n01:11:31,330 --> 01:11:34,928\nThe existing VMs are working okay because\nthey were created beforehand, but\n\n1453\n01:11:34,928 --> 01:11:38,690\nany new one is gonna bump up against that\nconflicting network configuration, so\n\n1454\n01:11:38,690 --> 01:11:40,533\nthat's what I'm seeing right there.\n\n1455\n01:11:40,533 --> 01:11:46,590\nAll right, so\nI wonder if I can get around that.\n\n1456\n01:11:46,590 --> 01:11:48,091\nLet me see.\n\n1457\n01:11:48,091 --> 01:11:50,291\nSometimes you can get around it.\n\n1458\n01:11:50,291 --> 01:11:53,105\nIf you go into the networking for\nthe virtual machine, and\n\n1459\n01:11:53,105 --> 01:11:56,680\nyou just remove all the networks Let's\nsee if it'll let me get around it.\n\n1460\n01:11:56,680 --> 01:12:00,520\nWe can remove all the network\ncards from it and start it and\n\n1461\n01:12:00,520 --> 01:12:04,130\nthen add the one network card\nthat we want back again.\n\n1462\n01:12:04,130 --> 01:12:05,520\nSo sometimes that'll make it happy.\n\n1463\n01:12:07,860 --> 01:12:09,004\nLet's see what we get there.\n\n1464\n01:12:14,101 --> 01:12:15,830\nI'm starting it up here on server one.\n\n1465\n01:12:15,830 --> 01:12:16,760\nWe'll see if it starts.\n\n1466\n01:12:16,760 --> 01:12:20,250\nIf it does, then I can always just add\nthe individual network card back later.\n\n1467\n01:12:20,250 --> 01:12:22,370\nBut the real, oh, it did,\nI got past it, but\n\n1468\n01:12:22,370 --> 01:12:26,020\nthe real fix here is going to be to go and\npull that other network adapter or get my\n\n1469\n01:12:26,020 --> 01:12:29,000\nnetwork configurations the same on the two\nservers, that would have fixed this.\n\n1470\n01:12:29,000 --> 01:12:31,050\nThat's the right way to do it, all right?\n\n1471\n01:12:31,050 --> 01:12:33,800\nBut I am up so I can go ahead and\nget in here and finish my install.\n\n1472\n01:12:33,800 --> 01:12:35,770\nSo here's my Linux install going.\n\n1473\n01:12:35,770 --> 01:12:39,830\nAnd so I can get in here and install my\noperating system, get all that set up and\n\n1474\n01:12:39,830 --> 01:12:40,990\nadd that network adapter.\n\n1475\n01:12:40,990 --> 01:12:41,490\nRight?\n\n1476\n01:12:41,490 --> 01:12:45,020\nOr if I wanna add it before the install,\nI can go ahead and shut this down.\n\n1477\n01:12:45,020 --> 01:12:49,680\nBecause you can't add a network\nadapter while it's running.\n\n1478\n01:12:51,410 --> 01:12:52,900\nAnd so we'll shut it down.\n\n1479\n01:12:52,900 --> 01:12:55,510\nIt's trying to do a graceful shut down,\nwhich it may not.\n\n1480\n01:12:55,510 --> 01:12:56,090\nOh, oh, it did.\n\n1481\n01:12:57,170 --> 01:13:03,830\nAnd now I can add in that interface that\nI want, ITProTV Studio, there we go.\n\n1482\n01:13:03,830 --> 01:13:05,300\nAnd let’s see if it’ll start up for\nus this time.\n\n1483\n01:13:06,310 --> 01:13:10,910\nIf it still fails, my only choice is gonna\nbe to go and, yeah, I need to correct that\n\n1484\n01:13:10,910 --> 01:13:12,780\nnetwork configuration, so\nthat’s what I’ll need to do.\n\n1485\n01:13:15,730 --> 01:13:16,870\nBut I am.\n\n1486\n01:13:16,870 --> 01:13:21,570\nAll right, so that's kind of\nan example of how we set up clustering.\n\n1487\n01:13:21,570 --> 01:13:22,580\nThere's a lot more to it.\n\n1488\n01:13:22,580 --> 01:13:24,860\nI wanna talk about high availability.\n\n1489\n01:13:24,860 --> 01:13:27,540\nThe automatic start up\nfeature of failover.\n\n1490\n01:13:27,540 --> 01:13:28,880\nThat whole process.\n\n1491\n01:13:28,880 --> 01:13:30,870\nAnd kinda show you guys\nan example of that, but\n\n1492\n01:13:30,870 --> 01:13:35,230\nas far as getting set up, there's our\nsteps, there's not really much to it.\n\n1493\n01:13:35,230 --> 01:13:38,000\nYou create the pool, you make sure\nyour configuration is the same\n\n1494\n01:13:38,000 --> 01:13:39,960\nacross your systems, and\nthen you're ready to rock.\n\n1495\n01:13:40,990 --> 01:13:44,970\nAlright, well that's a pretty good\nspot for us to wrap up right here.\n\n1496\n01:13:44,970 --> 01:13:46,960\nWe'll pick back up in our next episode,\nand\n\n1497\n01:13:46,960 --> 01:13:49,020\ngo into the more advanced\nside of the clustering.\n\n1498\n01:13:49,020 --> 01:13:51,460\nGet that fixed and going in there.\n\n1499\n01:13:51,460 --> 01:13:52,850\nIt'll be a great chance to see it.\n\n1500\n01:13:53,870 --> 01:13:56,830\nReally one of the best things about\nXenServer is that the clustering is free.\n\n1501\n01:13:56,830 --> 01:14:00,320\nIt's built into the base product, so\nyou don't have to pay extra for it.\n\n1502\n01:14:00,320 --> 01:14:04,160\nFor $0 you can download XenServer,\nbuild up a cluster, and have a nice,\n\n1503\n01:14:04,160 --> 01:14:08,440\nhighly available system up and running in\nno time, so definitely a cool feature.\n\n1504\n01:14:09,480 --> 01:14:11,510\nAlright, well I hope you\nguys enjoyed the show.\n\n1505\n01:14:11,510 --> 01:14:14,850\nRemember, if you had any questions\non this, live during the show,\n\n1506\n01:14:14,850 --> 01:14:18,610\nyou can to ITPro.tv/live, you'll see\nour chat box right beneath the video.\n\n1507\n01:14:18,610 --> 01:14:21,800\nYou can post your questions there,\nwe monitor and answer during the show.\n\n1508\n01:14:21,800 --> 01:14:25,018\nIf you have questions after the show,\nuse our Q&A forums.\n\n1509\n01:14:25,018 --> 01:14:28,960\nClick that Q&A link at the top of\nevery page at the ITProTV site,\n\n1510\n01:14:28,960 --> 01:14:30,880\nand you can go in and post your questions.\n\n1511\n01:14:30,880 --> 01:14:32,160\nAgain, we monitor and answer.\n\n1512\n01:14:32,160 --> 01:14:34,110\nWe wanna make sure you guys\nhave the information you need,\n\n1513\n01:14:34,110 --> 01:14:36,410\nso that you can be successful.\n\n1514\n01:14:36,410 --> 01:14:38,930\nAll right, well, like I said,\nI hope you guys enjoyed the show.\n\n1515\n01:14:38,930 --> 01:14:42,931\nSigning off for ITProTV, I'm Don Pezet and\nwe'll see you next time.\n\n1516\n01:14:42,931 --> 01:14:49,789\n[MUSIC]\n\n",
          "vimeoId": "100414403"
        },
        {
          "description": "",
          "length": "2706",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/citrixxenserver/003-High-Availability.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/citrixxenserver/003-High-Availability-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/citrixxenserver/003-High-Availability-sm.jpg",
          "title": "High Availability",
          "transcript": "1\n00:00:00,124 --> 00:00:10,124\n[MUSIC]\n\n2\n00:00:15,460 --> 00:00:22,983\n[SOUND]\n\n3\n00:00:22,983 --> 00:00:33,686\n[MUSIC]\n\n4\n00:00:33,686 --> 00:00:36,903\nAll right, good morning,\ngood afternoon, and good evening, and\n\n5\n00:00:36,903 --> 00:00:39,080\nwelcome back to another\nepisode of ITProTV.\n\n6\n00:00:39,080 --> 00:00:44,470\nI'm your host Don Pezet, back again\nwith another episode of XenServer.\n\n7\n00:00:44,470 --> 00:00:47,300\nI'm gonna pick up where we left\noff with the last episode,\n\n8\n00:00:47,300 --> 00:00:50,390\nwhich was we were configuring some\nof the advanced settings, and\n\n9\n00:00:50,390 --> 00:00:55,410\nI ended the episode by clustering\na couple of XenServers together.\n\n10\n00:00:55,410 --> 00:00:57,740\nSo that was kind of where we stopped.\n\n11\n00:00:57,740 --> 00:01:01,330\nWe had added in a extra network\ncard to show redundant networking,\n\n12\n00:01:01,330 --> 00:01:04,210\nand that resulted in\nan inconsistent cluster,\n\n13\n00:01:04,210 --> 00:01:05,770\nright, we had that extra\nnick sitting in there.\n\n14\n00:01:05,770 --> 00:01:07,730\nSo I pulled that out after the show.\n\n15\n00:01:07,730 --> 00:01:11,690\nBut now I wanna go into some of the more\nadvanced settings that deal with\n\n16\n00:01:11,690 --> 00:01:14,030\nhow we operate when we have a cluster,\nall right?\n\n17\n00:01:14,030 --> 00:01:18,390\nSo I've got these two servers,\nITProTV two dash server one, and\n\n18\n00:01:18,390 --> 00:01:21,780\nserver two, and\nthey're clustered together in a pool.\n\n19\n00:01:21,780 --> 00:01:24,150\nSo that's what we tackled yesterday.\n\n20\n00:01:24,150 --> 00:01:27,610\nNow, I want to go in an configure\nsome additional settings.\n\n21\n00:01:27,610 --> 00:01:30,560\nThere's one setting you might\nhave noticed was missing,\n\n22\n00:01:30,560 --> 00:01:33,400\nas we were configuring our\nindividual virtual machines,\n\n23\n00:01:33,400 --> 00:01:37,840\nwhen I go into a virtual machine, so\nI'll take like this MySQL server here,\n\n24\n00:01:37,840 --> 00:01:41,450\nwhen I go into the settings,\nI can specify things like a home server,\n\n25\n00:01:41,450 --> 00:01:46,840\nthat says when this virtual machine\nstarts up, where does it start?\n\n26\n00:01:46,840 --> 00:01:51,290\nAnd on this one, I've got it set\nto start on ITProTV server 2, so\n\n27\n00:01:51,290 --> 00:01:53,560\nwhen it boots up,\ngo ahead and start there.\n\n28\n00:01:53,560 --> 00:01:57,210\nBut in a high availability environment,\nI may not care what server it starts on.\n\n29\n00:01:57,210 --> 00:01:58,630\nI just want it to be able to start.\n\n30\n00:01:58,630 --> 00:02:03,670\nSo I would go and say, don't assign this\nVM a home server, just start up somewhere.\n\n31\n00:02:03,670 --> 00:02:05,810\nRight?\nGet somewhere where you can come online,\n\n32\n00:02:05,810 --> 00:02:06,510\ndoesn't really matter.\n\n33\n00:02:06,510 --> 00:02:07,918\nWe could pick one or the other.\n\n34\n00:02:07,918 --> 00:02:10,330\nIf we pick a home server and\nthat home server is down,\n\n35\n00:02:10,330 --> 00:02:12,670\nthe next time we start up we'll\nstart up on a different server.\n\n36\n00:02:13,880 --> 00:02:19,550\nBut the option you won't see here\nis an automatic start up setting.\n\n37\n00:02:19,550 --> 00:02:22,030\nWhat happens if I reboot my host?\n\n38\n00:02:22,030 --> 00:02:26,780\nIf I reboot the host machine, what happens\nto the VM's that are sitting on it?\n\n39\n00:02:26,780 --> 00:02:28,750\nWell, they sit there and\nthey stay turned off,\n\n40\n00:02:28,750 --> 00:02:32,010\nand we have to manually turn\nthem on after a host reboot.\n\n41\n00:02:32,010 --> 00:02:33,710\nThat's not ideal.\n\n42\n00:02:33,710 --> 00:02:37,050\nIn an environment where you want high\navailability you wanna have what's called\n\n43\n00:02:37,050 --> 00:02:38,210\nauto start.\n\n44\n00:02:38,210 --> 00:02:43,004\nIn previous versions of XenServers, I'm\nrunning 6.2, in the 5 point versions and\n\n45\n00:02:43,004 --> 00:02:45,970\nearlier, you actually had\nan auto start option.\n\n46\n00:02:45,970 --> 00:02:51,470\nYou could say, when this host starts,\ngo ahead and start these VM's also.\n\n47\n00:02:51,470 --> 00:02:53,750\nThat option is gone in six, and\n\n48\n00:02:53,750 --> 00:02:56,510\nyou'll see on the internet a lot\nof people upset about that.\n\n49\n00:02:56,510 --> 00:02:58,390\nWell, it's not that the option is gone.\n\n50\n00:02:58,390 --> 00:03:02,020\nIt's just that it's been moved, and\npeople are making a big deal out of it.\n\n51\n00:03:02,020 --> 00:03:05,750\nAuto start like that is really\ndesigned for commercial environments,\n\n52\n00:03:05,750 --> 00:03:08,180\nenvironments where you depend\non those virtual machines.\n\n53\n00:03:08,180 --> 00:03:11,140\nAnd in those environments\nyou're going to want a cluster.\n\n54\n00:03:11,140 --> 00:03:13,940\nNow a lot of people have argued in\nthe past saying that clusters are too\n\n55\n00:03:13,940 --> 00:03:14,460\nexpensive.\n\n56\n00:03:14,460 --> 00:03:16,790\nBut we saw that in XenServer it's free.\n\n57\n00:03:16,790 --> 00:03:17,860\nIt's in the free edition.\n\n58\n00:03:17,860 --> 00:03:20,880\nYou can take the free version of\nXenServer, cluster it together.\n\n59\n00:03:20,880 --> 00:03:22,530\nAnd you're in business.\n\n60\n00:03:22,530 --> 00:03:25,200\nWhen we have a clustered environment,\n\n61\n00:03:25,200 --> 00:03:29,540\nwe can configure what's called HA or\nhigh availability.\n\n62\n00:03:29,540 --> 00:03:33,980\nAnd it's the high availability feature\nthat gives us the auto start function.\n\n63\n00:03:33,980 --> 00:03:35,010\nSo it's not that it's gone.\n\n64\n00:03:35,010 --> 00:03:36,370\nIt's not that it doesn't exist anymore.\n\n65\n00:03:36,370 --> 00:03:37,130\nIt's just been moved.\n\n66\n00:03:37,130 --> 00:03:39,540\nIt's no longer right here\nunder the individual VM.\n\n67\n00:03:39,540 --> 00:03:42,140\nIt's now tied to the HA\nsettings on the server.\n\n68\n00:03:42,140 --> 00:03:46,680\nAll right, now high availability\nis not turned on by default.\n\n69\n00:03:46,680 --> 00:03:49,710\nAnd if you have a stand alone\nserver you can't turn it on.\n\n70\n00:03:49,710 --> 00:03:52,660\nIt only works inside of\na cluster environment.\n\n71\n00:03:52,660 --> 00:03:57,010\nSo if I come in and\nI take a look at like ITProTV server 1,\n\n72\n00:03:57,010 --> 00:04:01,770\nnotice there's no high availability tab\nup here, and if I go through all these\n\n73\n00:04:01,770 --> 00:04:07,390\nsettings I won't see anything in there\nthat has to do with auto start, and things\n\n74\n00:04:07,390 --> 00:04:12,005\nof those nature, I am just gonna see\nindividual settings for this one server.\n\n75\n00:04:12,005 --> 00:04:13,835\nNothing special, all right.\n\n76\n00:04:13,835 --> 00:04:16,185\nThe high availability feature\nitself is on the cluster.\n\n77\n00:04:16,185 --> 00:04:17,905\nSo If I go up to my pool.\n\n78\n00:04:17,905 --> 00:04:19,885\nMy pool is ITProTV.\n\n79\n00:04:19,885 --> 00:04:25,050\nThat's where I'll see that tab that\nsays HA, high availability, all right.\n\n80\n00:04:25,050 --> 00:04:26,750\nNow, if you want to use HA,\n\n81\n00:04:26,750 --> 00:04:31,240\nif you want to get this implemented, you\npretty much have to have shared storage.\n\n82\n00:04:31,240 --> 00:04:34,420\nYou can't fail a virtual\nmachine over from one host\n\n83\n00:04:34,420 --> 00:04:36,740\nto another without having shared storage.\n\n84\n00:04:36,740 --> 00:04:38,680\nAnd we set that up in the last episode.\n\n85\n00:04:38,680 --> 00:04:41,460\nWe set up iSCSI storage right here.\n\n86\n00:04:41,460 --> 00:04:45,400\nAnd it shared between these two servers.\n\n87\n00:04:45,400 --> 00:04:48,250\nAnd that's what allows me to\ntake my virtual machines.\n\n88\n00:04:48,250 --> 00:04:52,700\nLike this is MySQL box here, and\nstore it on either server, right.\n\n89\n00:04:52,700 --> 00:04:56,670\nIf I were to shut it down, let's see here,\nI'll shut that virtual machine down.\n\n90\n00:04:56,670 --> 00:04:58,750\nIf I were to shut it down.\n\n91\n00:04:58,750 --> 00:05:01,300\nOnce it's shut down,\nwhen I start to boot it up,\n\n92\n00:05:01,300 --> 00:05:04,645\nI'll have the choice of which server\nI want to boot up on, and it can\n\n93\n00:05:04,645 --> 00:05:08,760\nboot on either because both physical\nservers have access to that hard drive.\n\n94\n00:05:08,760 --> 00:05:13,280\nSo now when I see that\nITProTV dash mySQL01.\n\n95\n00:05:13,280 --> 00:05:15,730\nSee how it jumped from\nserver two to server one,\n\n96\n00:05:15,730 --> 00:05:17,520\nthat's probably because I\nhave a home server on it.\n\n97\n00:05:17,520 --> 00:05:20,340\nLet's see if I actually have\na home server defined on that one.\n\n98\n00:05:20,340 --> 00:05:25,690\nI do, if I remove the home server,\nsee how it jumps way down here.\n\n99\n00:05:25,690 --> 00:05:29,140\nIt doesn't have a home server here anymore\nso it's no longer attached to a server.\n\n100\n00:05:29,140 --> 00:05:30,970\nAnd that's what we'd normally see is.\n\n101\n00:05:30,970 --> 00:05:33,710\nWe're not normally gonna find home server,\nso let me just go ahead and\n\n102\n00:05:33,710 --> 00:05:35,860\nremove those home servers real quick.\n\n103\n00:05:35,860 --> 00:05:38,270\nSo that we'll kinda see\na more consistent layout.\n\n104\n00:05:38,270 --> 00:05:43,370\nSo normally what you see is,\nthis one still has local storage.\n\n105\n00:05:43,370 --> 00:05:44,660\nYeah, I can't move that one.\n\n106\n00:05:44,660 --> 00:05:47,070\nWhat you'll see is that\nyour virtual machines,\n\n107\n00:05:47,070 --> 00:05:51,220\nwhen they're on, when they're running,\nthey'll be attached to a server up here.\n\n108\n00:05:51,220 --> 00:05:55,760\nBut when they're off they'll usually\nbe down here attached to the pool.\n\n109\n00:05:55,760 --> 00:05:58,440\nAnd that just means hey,\nwhen this system starts up.\n\n110\n00:05:58,440 --> 00:06:02,980\nGo ahead and just send it to whatever\nserver is available at that time.\n\n111\n00:06:05,040 --> 00:06:07,750\nAll right, now because this\none's attached to the pool.\n\n112\n00:06:07,750 --> 00:06:10,770\nBecause it's hard drives\nare stored on that shared storage,\n\n113\n00:06:10,770 --> 00:06:14,500\nwhen I go to start it up,\nI can pick any of my servers.\n\n114\n00:06:14,500 --> 00:06:18,460\nI've got that choice,\nversus if that storage wasn't in shared,\n\n115\n00:06:18,460 --> 00:06:22,550\nwhen I go to start on server,\nI would only have that one choice.\n\n116\n00:06:22,550 --> 00:06:25,040\nI wouldn't have the other,\nbecause it's not shared storage.\n\n117\n00:06:26,220 --> 00:06:28,950\nWhen we have shared storage,\nthough, really cool stuff happens.\n\n118\n00:06:28,950 --> 00:06:30,380\nLet me show you an example.\n\n119\n00:06:30,380 --> 00:06:35,412\nI've got this other MySQL box here,\nand let's see what IP address it got\n\n120\n00:06:35,412 --> 00:06:41,042\n10.1.100.158, so I'm gonna start\na ping running to that server.\n\n121\n00:06:43,922 --> 00:06:44,943\nSo that's me.\n\n122\n00:06:44,943 --> 00:06:46,765\nI am pinging that server.\n\n123\n00:06:46,765 --> 00:06:50,447\nJust kind of sending\na repeating ping over to it.\n\n124\n00:06:50,447 --> 00:06:55,357\nAnd that server is up and\nrunning here in XenServer.\n\n125\n00:06:55,357 --> 00:06:57,539\nIt's running on server one.\n\n126\n00:06:57,539 --> 00:07:02,927\nAll right,\nI can tell it to move to server two and\n\n127\n00:07:02,927 --> 00:07:05,517\nto do it while the servers are online.\n\n128\n00:07:05,517 --> 00:07:08,070\nThis is a key part of high availability.\n\n129\n00:07:08,070 --> 00:07:09,390\nIf a physical node fails,\n\n130\n00:07:09,390 --> 00:07:13,130\nwe need to be able to get on to\nanother node as fast as possible, and\n\n131\n00:07:13,130 --> 00:07:16,900\nwhen we've got clustered nodes with\nshared storage, it's pretty easy.\n\n132\n00:07:16,900 --> 00:07:19,970\nYou'll see I've got this\nmigrate to server option, and\n\n133\n00:07:19,970 --> 00:07:25,250\nI can migrate it right on over to\nserver two while the server is on.\n\n134\n00:07:25,250 --> 00:07:27,300\nThe server is on and running right now.\n\n135\n00:07:27,300 --> 00:07:30,730\nWhen I choose that migrate option,\ntwo things are gonna happen.\n\n136\n00:07:30,730 --> 00:07:32,950\nFirst, it's gonna synchronize storage.\n\n137\n00:07:32,950 --> 00:07:36,190\nWell, it doesn't have to do that\nbecause it's shared storage.\n\n138\n00:07:36,190 --> 00:07:40,160\nBoth of the physical servers have\naccess to the same set of storage.\n\n139\n00:07:40,160 --> 00:07:42,040\nSo they can both see the hard drive for\nthis one.\n\n140\n00:07:42,040 --> 00:07:43,500\nSo that's already done.\n\n141\n00:07:43,500 --> 00:07:46,350\nAnd then two,\nit's gonna synchronize the RAM.\n\n142\n00:07:46,350 --> 00:07:49,770\nThe RAM, what's in memory for\nthat virtual machine,\n\n143\n00:07:49,770 --> 00:07:51,610\nis present on server one right now.\n\n144\n00:07:51,610 --> 00:07:53,010\nIt's got to synchronize\nthat to server two.\n\n145\n00:07:53,010 --> 00:07:54,255\nNow that can take a moment.\n\n146\n00:07:54,255 --> 00:07:58,402\nIt's got to synchronize memory, and there\nmight be several gigs worth of RAM, and\n\n147\n00:07:58,402 --> 00:07:59,897\nRAM is constantly changing.\n\n148\n00:07:59,897 --> 00:08:02,057\nSo performance is gonna dip.\n\n149\n00:08:02,057 --> 00:08:04,889\nA little bit on the machine\nwhile it synchronizes that RAM.\n\n150\n00:08:04,889 --> 00:08:10,363\nBut once it's synchronized, it can then\nflip the VM over to the other server and\n\n151\n00:08:10,363 --> 00:08:13,330\nyou continue on with very little loss.\n\n152\n00:08:13,330 --> 00:08:17,350\nIn fact, what we'll normally see is\nthat we'll lose maybe one or two pings,\n\n153\n00:08:17,350 --> 00:08:21,380\nthree pings worse case scenario,\nas we switch from one host to another.\n\n154\n00:08:21,380 --> 00:08:23,710\nSo I'm gonna go ahead and\ndo that, I'm gonna migrate it.\n\n155\n00:08:23,710 --> 00:08:27,050\nAnd when you do that it takes a moment,\nsee here, it's migrating and\n\n156\n00:08:27,050 --> 00:08:29,040\nit's actually synchronizing\nmemory right now.\n\n157\n00:08:29,040 --> 00:08:34,090\nWhoops [LAUGH], and it is synchronizing\nmemory, and I can watch my pings.\n\n158\n00:08:34,090 --> 00:08:35,970\nAnd see how my ping times went up.\n\n159\n00:08:35,970 --> 00:08:40,480\nMy ping times went up from about one\nmillisecond up to about 180 milliseconds,\n\n160\n00:08:40,480 --> 00:08:44,440\nand that is because it's gotta\nslow the system down a bit\n\n161\n00:08:44,440 --> 00:08:46,170\nwhile it synchronizes RAM.\n\n162\n00:08:46,170 --> 00:08:48,760\nThe other reason that I'm taking such\na big hit, it normally isn't this big,\n\n163\n00:08:48,760 --> 00:08:50,820\nis because I am on iSCSI storage.\n\n164\n00:08:50,820 --> 00:08:52,280\nIf I was on Fibre Channel,\n\n165\n00:08:52,280 --> 00:08:54,640\nit could actually be synchronizing\na little more efficiently,\n\n166\n00:08:54,640 --> 00:08:58,580\nbut here the storage and the network\naccess are done on the same network card.\n\n167\n00:08:58,580 --> 00:09:00,910\nSo that creates an even bigger hit.\n\n168\n00:09:00,910 --> 00:09:04,850\nBut the system is being slowed right\nnow just to synchronize RAM, and\n\n169\n00:09:04,850 --> 00:09:07,920\nonce the RAM is fully synchronized,\nit'll then jump.\n\n170\n00:09:07,920 --> 00:09:12,040\nYou'll see the virtual machine disappear\nfrom server one and appear down here on\n\n171\n00:09:12,040 --> 00:09:16,870\nserver two, where it's now running and\nhappy, right, or in theory.\n\n172\n00:09:16,870 --> 00:09:18,170\nSo we'll give it a moment.\n\n173\n00:09:18,170 --> 00:09:20,250\nI'm just kinda watching these pings.\n\n174\n00:09:20,250 --> 00:09:24,480\nAnd the idea is that we should only\nsee like one or two pings get lost.\n\n175\n00:09:24,480 --> 00:09:25,800\nNow, that virtual machine.\n\n176\n00:09:25,800 --> 00:09:28,460\nI think it's got two gigs of RAM,\nshould move pretty quick.\n\n177\n00:09:28,460 --> 00:09:30,900\nI just saw my response\ntimes go down a bit, so\n\n178\n00:09:30,900 --> 00:09:35,380\nI think we're getting pretty close here,\nand we should see that jump anytime.\n\n179\n00:09:35,380 --> 00:09:39,020\nNow if you're an end user that's on\nthis server, you're still working fine.\n\n180\n00:09:39,020 --> 00:09:41,030\nRight?\nYou might notice a little performance dip\n\n181\n00:09:41,030 --> 00:09:43,650\nbut otherwise you're still\nworking with your documents,\n\n182\n00:09:43,650 --> 00:09:46,212\nyou don't notice that something's\ngoing on on the back end.\n\n183\n00:09:46,212 --> 00:09:47,700\nAll right.\n\n184\n00:09:47,700 --> 00:09:50,250\nAnd when the switch over does happen and\nwe lose one or\n\n185\n00:09:50,250 --> 00:09:54,726\ntwo pings, most software is designed to\nbe able to handle that kind of a loss.\n\n186\n00:09:54,726 --> 00:09:55,740\nIt's very small, right?\n\n187\n00:09:55,740 --> 00:09:57,480\nTCP will do re-transmits.\n\n188\n00:09:57,480 --> 00:09:59,820\nAnd the end user won't\neven know it happened.\n\n189\n00:09:59,820 --> 00:10:03,580\nThat's the really cool stuff here, is you\ncan do this in the middle of the day, and\n\n190\n00:10:03,580 --> 00:10:04,960\nusers don't even notice.\n\n191\n00:10:04,960 --> 00:10:05,490\nThere we go.\n\n192\n00:10:05,490 --> 00:10:08,000\nSo it just flipped over,\nsee how I lost one ping?\n\n193\n00:10:08,000 --> 00:10:10,430\nBut now it's up and running on server 2,\n\n194\n00:10:10,430 --> 00:10:13,485\nand I'm at a 1 millisecond\nresponse time again,\n\n195\n00:10:13,485 --> 00:10:17,460\nthe server's back to full speed because\nit's not synchronizing memory anymore.\n\n196\n00:10:17,460 --> 00:10:18,290\nAll right.\n\n197\n00:10:18,290 --> 00:10:23,150\nIt did all that,\nlive while the server was running.\n\n198\n00:10:23,150 --> 00:10:23,960\nOkay.\n\n199\n00:10:23,960 --> 00:10:26,290\nThat's really cool stuff.\n\n200\n00:10:26,290 --> 00:10:29,720\nBut one of the things that it didn't\ndo is it didn't do it automatically.\n\n201\n00:10:29,720 --> 00:10:30,330\nI had to tell it.\n\n202\n00:10:30,330 --> 00:10:31,770\nRight?\nI went in there and I told it.\n\n203\n00:10:31,770 --> 00:10:36,560\nI said hey, let's go ahead and just push\nthat system over to the other side and\n\n204\n00:10:36,560 --> 00:10:37,990\nso it did it.\n\n205\n00:10:37,990 --> 00:10:41,161\nWell, if you can predict when\na failure is going to occur,\n\n206\n00:10:41,161 --> 00:10:45,954\nthat's great then that works perfect, but\nyou need this to happen automatically, and\n\n207\n00:10:45,954 --> 00:10:48,580\nwell, it doesn't do it automatically.\n\n208\n00:10:48,580 --> 00:10:52,310\nFor example,\nif I take ITProTV's server two here, and\n\n209\n00:10:52,310 --> 00:10:55,220\nI were to shut down that host.\n\n210\n00:10:55,220 --> 00:10:58,730\nIf I shut down that host, what happens\nto the VMs that are running on it?\n\n211\n00:10:58,730 --> 00:11:00,853\nWell, they’re gonna shut down too.\n\n212\n00:11:00,853 --> 00:11:02,574\nRight.\nThey're gonna shut down and\n\n213\n00:11:02,574 --> 00:11:06,221\nnot necessarily jump over to the other\nnode because I haven’t configured any\n\n214\n00:11:06,221 --> 00:11:07,910\nautomatic fail over yet.\n\n215\n00:11:07,910 --> 00:11:10,727\nThe automatic fail over,\nthat’s what’s configured by HA.\n\n216\n00:11:10,727 --> 00:11:11,230\nAll right?\n\n217\n00:11:12,430 --> 00:11:14,030\nNow a couple words of advice on this one.\n\n218\n00:11:14,030 --> 00:11:15,880\nWhat we just saw a minute ago?\n\n219\n00:11:15,880 --> 00:11:16,610\nThat was really nice.\n\n220\n00:11:16,610 --> 00:11:19,140\nIt was really nice I was able\nto move that server over\n\n221\n00:11:19,140 --> 00:11:21,210\nwithout impacting\nthe production environment.\n\n222\n00:11:21,210 --> 00:11:23,240\nAll right, that's great for maintenance.\n\n223\n00:11:23,240 --> 00:11:24,330\nIf I have a maintenance window,\n\n224\n00:11:24,330 --> 00:11:27,130\nif I know that I need to do\nupdates on server one and\n\n225\n00:11:27,130 --> 00:11:33,000\nserver one's gonna reboot than I can move\nthe VMs off of it, over to server two.\n\n226\n00:11:33,000 --> 00:11:36,210\nDo my maintenance on server one, reboot\nit, whatever, and then move the VMs back.\n\n227\n00:11:36,210 --> 00:11:38,750\nAnd I could do it without\nimpacting my users, all right?\n\n228\n00:11:38,750 --> 00:11:42,340\nFor planned maintenance,\nwhat I just showed you is really good.\n\n229\n00:11:42,340 --> 00:11:43,972\nBut for unplanned maintenance,\n\n230\n00:11:43,972 --> 00:11:46,425\nwhat happens if server two\njust [SOUND] powers off?\n\n231\n00:11:46,425 --> 00:11:47,560\nRight.\n\n232\n00:11:47,560 --> 00:11:52,290\nPower supplies fail, system loses power,\nhard drive fail, something like that.\n\n233\n00:11:52,290 --> 00:11:54,590\nWhere the system just powers right off.\n\n234\n00:11:54,590 --> 00:11:56,660\nDo we have time to synchronize RAM?\n\n235\n00:11:56,660 --> 00:11:57,260\nNo.\n\n236\n00:11:57,260 --> 00:11:58,780\nIt's an instantaneous failure.\n\n237\n00:11:59,830 --> 00:12:03,630\nSo when that happens we need\nsome kind of better recovery.\n\n238\n00:12:03,630 --> 00:12:07,008\nWe need the servers to be watching for\nthat to happen.\n\n239\n00:12:07,008 --> 00:12:12,390\nSo that ITProTV-2-server1 can see\nthat server two went down and\n\n240\n00:12:12,390 --> 00:12:13,900\ntake control of those VMs.\n\n241\n00:12:13,900 --> 00:12:15,950\nAnd bring them back up and active.\n\n242\n00:12:15,950 --> 00:12:18,430\nAll right, and that's the piece\nthat we're worried about here.\n\n243\n00:12:18,430 --> 00:12:21,160\nThat's what we configure with HA.\n\n244\n00:12:21,160 --> 00:12:24,010\nSo to get that setup,\nwe basically go up to our pool.\n\n245\n00:12:24,010 --> 00:12:25,040\nYou have to have a pool.\n\n246\n00:12:25,040 --> 00:12:27,270\nYou can't do this on a standalone box.\n\n247\n00:12:27,270 --> 00:12:28,450\nAnd you go to the HA tab.\n\n248\n00:12:28,450 --> 00:12:32,550\nAnd you've got a nice little configure\nHA Wizard that we can run through.\n\n249\n00:12:32,550 --> 00:12:34,390\nAnd the Wizard's pretty straightforward.\n\n250\n00:12:34,390 --> 00:12:38,792\nAs we go through, we do have to set\nup a heartbeat storage repository.\n\n251\n00:12:38,792 --> 00:12:39,720\nAll right?\n\n252\n00:12:39,720 --> 00:12:44,172\nWhen you have servers in\na cluster like this, all right.\n\n253\n00:12:44,172 --> 00:12:47,210\nThe servers have to evaluate whether\nthe other servers are up, so\n\n254\n00:12:47,210 --> 00:12:51,930\nserver one has to look and\nsee whether server 2 is online or not.\n\n255\n00:12:51,930 --> 00:12:56,400\nThe problem is,\nwhen you have just two servers,\n\n256\n00:12:56,400 --> 00:13:01,595\nif one server fails, it's hard for\nit to tell who's at fault.\n\n257\n00:13:01,595 --> 00:13:02,840\nOkay?\nThis is kind of confusing,\n\n258\n00:13:02,840 --> 00:13:04,040\nlet me draw a picture here.\n\n259\n00:13:04,040 --> 00:13:08,980\nI'll draw a picture to try and\nillustrate what I'm getting at here.\n\n260\n00:13:08,980 --> 00:13:10,680\nI will try and draw a picture.\n\n261\n00:13:15,705 --> 00:13:17,860\nHere we go.\n\n262\n00:13:17,860 --> 00:13:24,630\nSo, if I have two servers, and\nI'll just do some basic shapes here.\n\n263\n00:13:27,230 --> 00:13:28,450\nAll right, so I've got two servers.\n\n264\n00:13:32,405 --> 00:13:36,090\nAnd we'll say that these are like\nZenServer one and ZenServer two.\n\n265\n00:13:36,090 --> 00:13:38,470\nThey're the two servers\nI've got in my environment.\n\n266\n00:13:38,470 --> 00:13:38,970\nRight?\nSo.\n\n267\n00:13:43,675 --> 00:13:45,890\nLet me make this actually\nlegible on the screen.\n\n268\n00:13:50,400 --> 00:13:51,082\nAll right.\n\n269\n00:13:51,082 --> 00:13:54,169\nSo we've got server 1 and server 2.\n\n270\n00:13:58,128 --> 00:14:00,781\nAll right,\nnow when they're clustered together,\n\n271\n00:14:00,781 --> 00:14:03,180\nthose guys are gonna be\ntalking to each other.\n\n272\n00:14:03,180 --> 00:14:06,660\nThey're gonna talk to each other,\ncommunicate, do whatever it is they need\n\n273\n00:14:06,660 --> 00:14:11,400\nto do and they're clustered so it's\na two way communication that's going on\n\n274\n00:14:11,400 --> 00:14:15,020\nas they exchange information and\nmonitor each other, right?\n\n275\n00:14:15,020 --> 00:14:17,800\nSo that's an ongoing thing\nwhen you have a cluster.\n\n276\n00:14:18,860 --> 00:14:19,550\nAll right.\n\n277\n00:14:19,550 --> 00:14:21,340\nSo I've got that already working.\n\n278\n00:14:21,340 --> 00:14:23,610\nThat's working right now.\n\n279\n00:14:23,610 --> 00:14:26,240\nIf server one is monitoring server two,\nhow does it do it?\n\n280\n00:14:26,240 --> 00:14:28,010\nWell, it does it via the network, right?\n\n281\n00:14:28,010 --> 00:14:30,970\nSo this link right here,\nthat's really your network connection.\n\n282\n00:14:30,970 --> 00:14:37,260\nOne of mine is 10.1.100.241 I think,\nand the other one's 10.1.100.242.\n\n283\n00:14:37,260 --> 00:14:42,040\nSo they're monitoring each other\njust by pings, simple pings every\n\n284\n00:14:42,040 --> 00:14:45,886\ncouple of seconds to see whether\nthe other node is up All right.\n\n285\n00:14:45,886 --> 00:14:49,210\nWell, let's say this link fails.\n\n286\n00:14:49,210 --> 00:14:51,660\nIf this link fails,\nserver one can't see server two.\n\n287\n00:14:51,660 --> 00:14:54,450\nAll right, well, the link failed.\n\n288\n00:14:54,450 --> 00:14:55,650\nWhose fault is it?\n\n289\n00:14:55,650 --> 00:14:58,080\nIs it server one's fault or\nis it server two's fault?\n\n290\n00:14:59,120 --> 00:15:01,120\nWhich server is valid?\n\n291\n00:15:01,120 --> 00:15:02,390\nWell, it's hard to tell.\n\n292\n00:15:02,390 --> 00:15:04,800\nWe can't really figure it out right there.\n\n293\n00:15:04,800 --> 00:15:07,570\nWith just two nodes like\nthis we can't figure it out.\n\n294\n00:15:07,570 --> 00:15:09,500\nIf we had three nodes we could, right?\n\n295\n00:15:09,500 --> 00:15:14,730\nIf there was a third server in\nthe mix that was sitting over here and\n\n296\n00:15:14,730 --> 00:15:16,160\nthe link failed.\n\n297\n00:15:16,160 --> 00:15:19,830\nIf server one couldn't see server two or\n\n298\n00:15:19,830 --> 00:15:24,590\nserver three, then server one would\nknow that it was the problem, right?\n\n299\n00:15:24,590 --> 00:15:29,490\nBut if server one, hang on, this does get\nconfusing fast if we don't keep it clear.\n\n300\n00:15:29,490 --> 00:15:30,430\nSo let me just add in.\n\n301\n00:15:31,460 --> 00:15:33,060\nA little more to this.\n\n302\n00:15:33,060 --> 00:15:37,450\nI want to make this as clear as possible\nbecause it can be a little confusing.\n\n303\n00:15:39,700 --> 00:15:41,615\nAll right, so I've got server 1,\nserver 2, server 3.\n\n304\n00:15:45,606 --> 00:15:49,290\nAnd these servers are all gonna\nbe monitoring each other.\n\n305\n00:15:49,290 --> 00:15:53,599\nIt's all part of the process, right?\n\n306\n00:15:53,599 --> 00:15:57,626\nSo they're all kind of\njust getting in there and\n\n307\n00:15:57,626 --> 00:16:03,375\nmonitoring each other to make sure\nthat they're online and happy.\n\n308\n00:16:03,375 --> 00:16:04,396\nThere, all right.\n\n309\n00:16:04,396 --> 00:16:06,405\nSo we've got our monitoring going on.\n\n310\n00:16:06,405 --> 00:16:11,905\nOkay, these links here, these green links,\nthese are all being done via the network.\n\n311\n00:16:11,905 --> 00:16:14,061\nOkay, so via just TCP/IPs, simple pings,\n\n312\n00:16:14,061 --> 00:16:17,292\nsimple heartbeat messages being\nsent between the servers.\n\n313\n00:16:17,292 --> 00:16:22,034\nAll right, if I have a failure and\nthat failure is,\n\n314\n00:16:22,034 --> 00:16:28,904\nyou know let's say that failure is Oh,\nI don't know.\n\n315\n00:16:34,961 --> 00:16:37,620\nIf I can master my tools here.\n\n316\n00:16:40,932 --> 00:16:41,769\nThere we go.\n\n317\n00:16:41,769 --> 00:16:44,124\nLet's say that failure happens right here,\nokay?\n\n318\n00:16:44,124 --> 00:16:47,296\nServer 1 can no longer see server 3,\nall right?\n\n319\n00:16:47,296 --> 00:16:51,939\nSo server 1 has to say to itself,\nwell is server 3 actually down?\n\n320\n00:16:51,939 --> 00:16:54,298\nShould I take over its virtual machines?\n\n321\n00:16:54,298 --> 00:16:55,940\nOr is it me, is it my fault?\n\n322\n00:16:55,940 --> 00:16:59,720\nIs my network card down and\nI just can’t see server 3?\n\n323\n00:16:59,720 --> 00:17:03,730\nWell, if we just had these two servers,\nwe wouldn’t be able to make that decision.\n\n324\n00:17:03,730 --> 00:17:05,810\nThere’s no way we could\ntell the difference.\n\n325\n00:17:07,070 --> 00:17:11,417\nBut if we had three servers,\nif server 1 can't see server 3,\n\n326\n00:17:11,417 --> 00:17:16,353\nbut it can see server 2, then server\n1 knows hey I'm not the problem.\n\n327\n00:17:16,353 --> 00:17:18,200\nI can still see server 2.\n\n328\n00:17:18,200 --> 00:17:20,462\nSo server 3 must have winked out.\n\n329\n00:17:20,462 --> 00:17:21,650\nIt must have disappeared.\n\n330\n00:17:22,730 --> 00:17:25,910\nEach of the servers are really talking to\neach other, so they know that happens.\n\n331\n00:17:25,910 --> 00:17:29,980\nIf it’s server 3 that went offline, server\n1 and server 2 still see each other,\n\n332\n00:17:29,980 --> 00:17:31,240\nthey know.\n\n333\n00:17:31,240 --> 00:17:36,169\nSo when you have an odd number of\nmachines in your pool, it’s fine.\n\n334\n00:17:36,169 --> 00:17:38,620\nIt can tell, it can figure this stuff out.\n\n335\n00:17:38,620 --> 00:17:43,220\nBut if you have an even number, like\nin my example where I've only got two,\n\n336\n00:17:43,220 --> 00:17:45,220\nthere's no way they can\ntell the difference.\n\n337\n00:17:45,220 --> 00:17:48,746\nSo what they need,\nis they need some kind of a third person,\n\n338\n00:17:48,746 --> 00:17:52,287\na third person to sit there and\nhelp us know the difference.\n\n339\n00:17:52,287 --> 00:17:56,850\nAnd the way they do it Is through\nusing another storage repository.\n\n340\n00:17:56,850 --> 00:17:59,136\nSo if I just have two servers.\n\n341\n00:18:02,647 --> 00:18:06,731\nAll right, so I’m just gonna\nget rid of this guy up here.\n\n342\n00:18:06,731 --> 00:18:13,013\nSo if we just have two servers like, this,\nthe servers have shared storage anyway.\n\n343\n00:18:13,013 --> 00:18:18,660\nThey’re both connected to a SAN,\nwell, typically connected to a SAN.\n\n344\n00:18:18,660 --> 00:18:21,953\nSo I've got some shared\nstorage sitting out\n\n345\n00:18:21,953 --> 00:18:26,315\nhere somewhere that these guys\nare already connected to.\n\n346\n00:18:26,315 --> 00:18:29,774\nAnd it might be an iSCSI SAN,\nit might be fiber channel,\n\n347\n00:18:29,774 --> 00:18:34,730\nit might be a CIFS share, right, so it\ncould just be a shared folder somewhere.\n\n348\n00:18:34,730 --> 00:18:38,760\nBut the point is that there\nis storage out there, and\n\n349\n00:18:38,760 --> 00:18:41,608\nthat we're connected to it, okay?\n\n350\n00:18:41,608 --> 00:18:45,294\nSo what we can do is instead\nof doing network pings,\n\n351\n00:18:45,294 --> 00:18:49,667\nthe little heartbeats that I\nwas talking about a moment ago,\n\n352\n00:18:49,667 --> 00:18:53,870\ninstead of doing those,\nwe can do file timestamps.\n\n353\n00:18:53,870 --> 00:18:57,040\nWe can write a file to\nthis shared storage.\n\n354\n00:18:57,040 --> 00:18:59,817\nAnd so server 1 is writing a file\nto that shared storage, and\n\n355\n00:18:59,817 --> 00:19:03,465\nserver 2 is writing a file to that shared\nstorage, and the file is very small and\n\n356\n00:19:03,465 --> 00:19:04,949\nit really just has a timestamp.\n\n357\n00:19:04,949 --> 00:19:08,190\nIt's updating that timestamp to say,\nhey I'm still here, I'm still up.\n\n358\n00:19:08,190 --> 00:19:10,507\nAnd it's doing that every two seconds.\n\n359\n00:19:10,507 --> 00:19:13,892\nEvery two seconds, it's updating\nthat time stamp, very, very fast.\n\n360\n00:19:13,892 --> 00:19:19,469\nNow if we have a link failure,\nwhen this link failed back here,\n\n361\n00:19:19,469 --> 00:19:26,100\nif we have a link failure here,\nserver 1's network card goes down.\n\n362\n00:19:26,100 --> 00:19:28,873\nOr at least it can't see\nserver 2 via the network card,\n\n363\n00:19:28,873 --> 00:19:31,532\nhow does server 1 really\nknow that server 2 is down?\n\n364\n00:19:31,532 --> 00:19:35,512\nServer 2 might still be up, so\nit can look and say, all right,\n\n365\n00:19:35,512 --> 00:19:41,190\nlet me look on this shared storage and say\nis server 2 still writing a time stamp?\n\n366\n00:19:41,190 --> 00:19:43,871\nIf server 2 is still writing a time stamp,\nthen server 2 is up.\n\n367\n00:19:43,871 --> 00:19:47,835\nIt’s up and it's running, so\nI don't wanna mess with its VMs.\n\n368\n00:19:47,835 --> 00:19:50,398\nBut if I can't see server\n2 on the network and\n\n369\n00:19:50,398 --> 00:19:54,815\nserver two is no longer writing\na timestamp, then server 2 is down.\n\n370\n00:19:54,815 --> 00:19:57,533\nAnd that means I need to take\nover its VMs and get going.\n\n371\n00:19:57,533 --> 00:19:58,322\nRight?\n\n372\n00:19:58,322 --> 00:20:02,554\nOr, maybe I can't see server 2 on\nthe network, but I can't see the storage\n\n373\n00:20:02,554 --> 00:20:06,414\neither, then I know it's my fault,\nthat I'm the problem, right?\n\n374\n00:20:06,414 --> 00:20:08,933\nServer 1 shouldn't do anything,\nI'm the broken one, right?\n\n375\n00:20:08,933 --> 00:20:12,512\nSo that extra entity right there,\nthat extra storage repository,\n\n376\n00:20:12,512 --> 00:20:14,661\nit's sometimes called a file witness.\n\n377\n00:20:14,661 --> 00:20:18,126\nThat extra repository there is\ngonna help us determine whether or\n\n378\n00:20:18,126 --> 00:20:20,079\nnot we're the cause of the problem or\n\n379\n00:20:20,079 --> 00:20:23,310\nwhether that other node is down and\nwe should take action.\n\n380\n00:20:23,310 --> 00:20:24,710\nThat's a key thing.\n\n381\n00:20:24,710 --> 00:20:27,582\nNow you might ask yourself why do I care?\n\n382\n00:20:27,582 --> 00:20:28,661\nWhy do we even care about that?\n\n383\n00:20:28,661 --> 00:20:31,400\nWhy not just let it go ahead and\nseize the virtual machines?\n\n384\n00:20:31,400 --> 00:20:32,310\nHere's the problem.\n\n385\n00:20:32,310 --> 00:20:36,729\nIf server 1 goes active for a virtual\nmachine and server 2 goes active for\n\n386\n00:20:36,729 --> 00:20:41,076\nthe same virtual machine, right,\nif they both try and bring it active,\n\n387\n00:20:41,076 --> 00:20:44,450\nthey're both reaching out\nto the storage repository.\n\n388\n00:20:44,450 --> 00:20:48,953\nAnd they're both trying to write to\nthe same drive at the same time.\n\n389\n00:20:48,953 --> 00:20:52,670\nAnd that results in almost\ninstantaneous corruption of the data.\n\n390\n00:20:52,670 --> 00:20:55,390\nIt'll corrupt the hard drives and\nthat VM is now dead, all right.\n\n391\n00:20:55,390 --> 00:20:56,585\nYou'll have to restore from backup.\n\n392\n00:20:56,585 --> 00:20:57,780\nIt's a mess.\n\n393\n00:20:57,780 --> 00:21:00,470\nSo we never want to have a scenario where\n\n394\n00:21:00,470 --> 00:21:03,800\ntwo servers can write to\nthe same drive at the same time.\n\n395\n00:21:04,880 --> 00:21:07,370\nThat's why this file witness is so\nimportant.\n\n396\n00:21:07,370 --> 00:21:09,790\nThat's why we need to have this\ndetection between the servers.\n\n397\n00:21:09,790 --> 00:21:10,620\nReal important stuff.\n\n398\n00:21:12,350 --> 00:21:14,249\nSo when I go to configure HA,\n\n399\n00:21:14,249 --> 00:21:19,170\nIt's asking me to pick a Heartbeat\nStorage Repository, a Heartbeat SR.\n\n400\n00:21:19,170 --> 00:21:20,060\nOkay?\n\n401\n00:21:20,060 --> 00:21:23,620\nThat storage repository is\ngoing to be storage somewhere\n\n402\n00:21:23,620 --> 00:21:27,010\nthat I can use to act as that heartbeat.\n\n403\n00:21:27,010 --> 00:21:29,750\nNow you might have some\nrepositories that aren't suitable,\n\n404\n00:21:29,750 --> 00:21:32,000\nlike here I've got this CIFS ISO library.\n\n405\n00:21:32,000 --> 00:21:36,100\nSee how it says it does not support this\noperation but I've got my shared storage,\n\n406\n00:21:36,100 --> 00:21:38,820\nwhere I'm storing my VMs and\nI can use that.\n\n407\n00:21:38,820 --> 00:21:41,425\nI'm already using it for my virtual\nmachines and I could use it here.\n\n408\n00:21:41,425 --> 00:21:44,450\nOr I could create\na dedicated one if I wanted.\n\n409\n00:21:44,450 --> 00:21:48,407\nWe could have one that was just\nspecifically for the heartbeat.\n\n410\n00:21:48,407 --> 00:21:50,507\nThat's useful if you've\ngot more than one SAN and\n\n411\n00:21:50,507 --> 00:21:52,620\nyou don't wanna cross what you're doing.\n\n412\n00:21:52,620 --> 00:21:54,999\nBut otherwise, you can pick one like this.\n\n413\n00:21:54,999 --> 00:22:00,040\nAnd stick with it, so I'll just pick\nthe existing one that I've already got.\n\n414\n00:22:00,040 --> 00:22:02,326\nThen it's gonna show my virtual machines,\n\n415\n00:22:02,326 --> 00:22:06,175\nand here's where we start to see\nthe automatic start functions, right.\n\n416\n00:22:06,175 --> 00:22:08,220\nThis is the really cool stuff here.\n\n417\n00:22:08,220 --> 00:22:12,512\nThis is where we can come through and\nsay what we want to do if a host were to\n\n418\n00:22:12,512 --> 00:22:16,321\nfail if one of my nodes,\nif server 1 were to go offline, okay.\n\n419\n00:22:16,321 --> 00:22:18,910\nAnd these VMs were to go\ndown what should I do?\n\n420\n00:22:18,910 --> 00:22:19,467\nAll right?\n\n421\n00:22:19,467 --> 00:22:21,370\nAnd the default is to restart.\n\n422\n00:22:21,370 --> 00:22:23,238\nGo ahead and start them back up if we can.\n\n423\n00:22:23,238 --> 00:22:23,937\nRight?\n\n424\n00:22:23,937 --> 00:22:24,800\nYou'll see this one.\n\n425\n00:22:24,800 --> 00:22:26,353\nSee how it says restart if possible.\n\n426\n00:22:26,353 --> 00:22:28,194\nThat's because it's not on shared storage.\n\n427\n00:22:28,194 --> 00:22:30,080\nThat's the one that's\non that local machine.\n\n428\n00:22:30,080 --> 00:22:31,963\nIt's on server 1.\n\n429\n00:22:31,963 --> 00:22:34,210\nIf server 1 fails,\nthere's no way I can start it.\n\n430\n00:22:34,210 --> 00:22:36,320\nSo that's why it says restart if possible.\n\n431\n00:22:36,320 --> 00:22:37,190\nAll right.\n\n432\n00:22:37,190 --> 00:22:38,150\nThen the start order,\n\n433\n00:22:38,150 --> 00:22:41,141\nyou don't want all these virtual\nmachines starting at the same time.\n\n434\n00:22:41,141 --> 00:22:45,530\nYou wanna pick your mission critical\nones and have them start first.\n\n435\n00:22:45,530 --> 00:22:48,030\nSo if you have like an active\ndirectory domain controller or\n\n436\n00:22:48,030 --> 00:22:50,185\nsomething like that you may\nwant it to start first.\n\n437\n00:22:50,185 --> 00:22:54,010\nAnd then have your other systems start so\nyour domain is back up.\n\n438\n00:22:54,010 --> 00:22:57,655\nYou might want your database\nservers to come up first so\n\n439\n00:22:57,655 --> 00:23:02,980\nthat your web servers that rely on them\nwon't come up and have broken web pages.\n\n440\n00:23:02,980 --> 00:23:07,785\nMaybe I'll go in here and take my MySQL,\nand I'll give them a start of one and\n\n441\n00:23:07,785 --> 00:23:11,480\nthen I'll take my web servers and\ngive them a start of two.\n\n442\n00:23:13,530 --> 00:23:16,071\nSo that when it boots them\nup it's gonna try and\n\n443\n00:23:16,071 --> 00:23:19,408\nboot the database servers first and\nthe web servers second.\n\n444\n00:23:19,408 --> 00:23:21,150\nYou can also specify delays.\n\n445\n00:23:21,150 --> 00:23:23,421\nSo my database servers\nare gonna start first and\n\n446\n00:23:23,421 --> 00:23:27,072\nright now they're gonna start at the same\ntime but I might wanna set a delay.\n\n447\n00:23:27,072 --> 00:23:31,770\nAttempt to start next VM after,\nand give it some time, right?\n\n448\n00:23:31,770 --> 00:23:35,067\nWhen we start that database\nserver how long does it take for\n\n449\n00:23:35,067 --> 00:23:36,560\nit to stabilize, right?\n\n450\n00:23:36,560 --> 00:23:39,683\nIf it's reading a bunch of data\noff an iSCSI storage unit,\n\n451\n00:23:39,683 --> 00:23:43,635\nyou might want to give it two or three\nminutes to finish booting up before we\n\n452\n00:23:43,635 --> 00:23:47,502\nmove to the next servers, the web01s,\nto get them fired up, right?\n\n453\n00:23:47,502 --> 00:23:52,345\nEspecially if they're on the same storage\nso you can put that delay interval in here\n\n454\n00:23:52,345 --> 00:23:56,376\nto say, wait a bit before you actually\nkick off to start that next VM.\n\n455\n00:23:56,376 --> 00:24:02,042\nSo maybe I'll put a 60 second\nbuffer in on these guys, all right?\n\n456\n00:24:02,042 --> 00:24:04,108\nSo now these two will start up.\n\n457\n00:24:04,108 --> 00:24:06,957\nAnd once they start,\nit'll wait 60 seconds, and\n\n458\n00:24:06,957 --> 00:24:10,470\nthen it'll go to start these guys and\nbring them up afterwards.\n\n459\n00:24:12,980 --> 00:24:15,570\nAll right, now you also have\na failure limit over here.\n\n460\n00:24:15,570 --> 00:24:18,920\nYou'll see where you can limit the amount\nof failures that are able to occur\n\n461\n00:24:18,920 --> 00:24:20,810\nbefore you have to manually get involved.\n\n462\n00:24:20,810 --> 00:24:24,300\nIf a failure happens,\nHA's all about taking care of it for you.\n\n463\n00:24:24,300 --> 00:24:27,777\nBut if the system just keeps failing,\nfail, fail, fail, right,\n\n464\n00:24:27,777 --> 00:24:30,766\nyou could have a situation where\nthe server has some kind of\n\n465\n00:24:30,766 --> 00:24:35,298\nintermittent issue where it fails, comes\nright back up, fails, comes right back up.\n\n466\n00:24:35,298 --> 00:24:38,547\nAnd so in that scenario you may just\nwanna stop and say you know what,\n\n467\n00:24:38,547 --> 00:24:40,600\nI'm not really doing any good here.\n\n468\n00:24:40,600 --> 00:24:44,824\nGo ahead and just stop it and\nthen we'll sort from there.\n\n469\n00:24:44,824 --> 00:24:46,693\nBut the default here is one.\n\n470\n00:24:46,693 --> 00:24:49,525\nIf a failure happens it's gonna go\nahead and try and recover from it and\n\n471\n00:24:49,525 --> 00:24:50,110\nthen move on.\n\n472\n00:24:52,090 --> 00:24:52,990\nAll right.\n\n473\n00:24:52,990 --> 00:24:53,810\nSo we'll go ahead and hit Next.\n\n474\n00:24:56,400 --> 00:24:58,320\nAnd we can finish that up.\n\n475\n00:24:58,320 --> 00:25:02,456\nAnd now it's gonna configure HA and it's\nconfiguring it across the entire pool.\n\n476\n00:25:02,456 --> 00:25:05,994\nSo it's telling each of these servers,\nhey, start doing a heartbeat,\n\n477\n00:25:05,994 --> 00:25:08,960\nstart writing that file time\nstamp into the shared storage.\n\n478\n00:25:08,960 --> 00:25:09,784\nStart doing that.\n\n479\n00:25:09,784 --> 00:25:14,591\nOkay, and if one of you fails,\none of you other guys needs to jump in and\n\n480\n00:25:14,591 --> 00:25:16,312\ntake over for those VMs.\n\n481\n00:25:16,312 --> 00:25:20,590\nWe need this automatic transition to\nhappen so that we can have a nice,\n\n482\n00:25:20,590 --> 00:25:22,630\nhighly available environment.\n\n483\n00:25:24,330 --> 00:25:25,000\nAll right.\n\n484\n00:25:25,000 --> 00:25:26,663\nNow, it can take a little\nbit to get configured.\n\n485\n00:25:26,663 --> 00:25:29,650\nThe more servers you have,\nthe longer this'll take.\n\n486\n00:25:29,650 --> 00:25:32,810\nIt's actually running a series of\ncommands on the back end on each server.\n\n487\n00:25:32,810 --> 00:25:35,020\nSo we have to give it\na moment while it does that.\n\n488\n00:25:35,020 --> 00:25:39,651\nAnd when it's done, we'll be in a nice\nnew highly available environment.\n\n489\n00:25:39,651 --> 00:25:40,544\nAll right?\n\n490\n00:25:40,544 --> 00:25:41,612\nLet's give it a minute.\n\n491\n00:25:41,612 --> 00:25:43,407\nThis is actually a pretty good\nspot to stop and take a break.\n\n492\n00:25:43,407 --> 00:25:44,630\nSo why don't we pause here.\n\n493\n00:25:44,630 --> 00:25:46,730\nWe'll let this thing\nfinish configuring itself.\n\n494\n00:25:46,730 --> 00:25:49,050\nAnd when we come back I'll\nshow you it in action.\n\n495\n00:25:49,050 --> 00:25:51,528\nWe'll take one of the servers and\nwe'll down it and\n\n496\n00:25:51,528 --> 00:25:54,940\nwe'll get a chance to see what happens\nwhen a failure occurs under HA.\n\n497\n00:25:54,940 --> 00:25:56,866\nSo stay tuned,\nwe'll be back right after this.\n\n498\n00:25:56,866 --> 00:26:03,721\n[MUSIC]\n\n499\n00:26:03,721 --> 00:26:05,720\n[SOUND] All right, welcome back everybody.\n\n500\n00:26:05,720 --> 00:26:09,235\nSo in typical ITProTV fashion,\nas soon as we stopped for break,\n\n501\n00:26:09,235 --> 00:26:11,480\nthe HA configuration finished.\n\n502\n00:26:11,480 --> 00:26:12,940\nSo it is done.\n\n503\n00:26:12,940 --> 00:26:14,091\nNow let's go and take a look at it.\n\n504\n00:26:14,091 --> 00:26:18,315\nI wanna show you some of the settings and\nthe stuff that has happened since we ran\n\n505\n00:26:18,315 --> 00:26:22,180\nthat wizard and then we'll get\nthe chance to see it in action.\n\n506\n00:26:22,180 --> 00:26:25,329\nNow, as far as the servers themselves,\nthings don't look very different, right.\n\n507\n00:26:25,329 --> 00:26:28,955\nYou've got your servers, their virtual\nmachines are running, they're there,\n\n508\n00:26:28,955 --> 00:26:30,934\nwe don't see any new tabs or\nany magic there.\n\n509\n00:26:30,934 --> 00:26:35,380\nWhat's going on is there's a lot\nmore back end monitoring going on.\n\n510\n00:26:35,380 --> 00:26:38,630\nThere's updates being written to\nthe storage repository for the heartbeat,\n\n511\n00:26:38,630 --> 00:26:41,730\nthere's various things like that and\neven that, the heartbeat side.\n\n512\n00:26:41,730 --> 00:26:44,400\nIf I go down to my iSCSI virtual storage.\n\n513\n00:26:44,400 --> 00:26:46,850\nIf I look in here I don't\nreally see all that much.\n\n514\n00:26:46,850 --> 00:26:50,580\nNotice I've got a state file and\nmetadata for HA.\n\n515\n00:26:50,580 --> 00:26:52,330\nThose are right there\nin that shared storage.\n\n516\n00:26:52,330 --> 00:26:53,490\nAnd they're not very big.\n\n517\n00:26:53,490 --> 00:26:58,290\n4 megabyte for the state file and\n256 megabyte for the metadata.\n\n518\n00:26:58,290 --> 00:27:01,490\nAnd those are the files that our servers\nare writing to to say hey I'm up.\n\n519\n00:27:01,490 --> 00:27:05,546\nI'm still here, I'm healthy and\nhappy, and that way they each know.\n\n520\n00:27:05,546 --> 00:27:08,970\nSo we don't really see much\nin the way of change here.\n\n521\n00:27:08,970 --> 00:27:09,970\nBut back under our pool,\n\n522\n00:27:09,970 --> 00:27:13,450\nif we go to our HA tab,\nwe'll start to see some new things.\n\n523\n00:27:13,450 --> 00:27:16,990\nWe'll see disable HA,\nif we want to turn it back off again.\n\n524\n00:27:16,990 --> 00:27:20,660\nAnd configure it, which will effectively\ntake us back into the screen we were at\n\n525\n00:27:20,660 --> 00:27:24,690\na moment ago, where we can change our\nstartups and our orders and all of that.\n\n526\n00:27:24,690 --> 00:27:27,840\nBut more importantly is what we see\ndown here where it's showing us\n\n527\n00:27:27,840 --> 00:27:32,040\nwhether HA is turned on and\nour failure capacity.\n\n528\n00:27:32,040 --> 00:27:34,030\nNow what is the failure capacity?\n\n529\n00:27:34,030 --> 00:27:39,210\nWhen you have a cluster like this,\nyour cluster can only survive so\n\n530\n00:27:39,210 --> 00:27:44,123\nmany failures of nodes before\nit's no longer able to recover.\n\n531\n00:27:44,123 --> 00:27:45,007\nRight?\n\n532\n00:27:45,007 --> 00:27:48,200\nIn a two node cluster, if one node fails,\n\n533\n00:27:48,200 --> 00:27:53,508\nthe other node has to take over all\nof the burden of that first server.\n\n534\n00:27:53,508 --> 00:27:54,420\nOkay?\n\n535\n00:27:54,420 --> 00:27:55,400\nSo in mine,\n\n536\n00:27:55,400 --> 00:28:00,000\nif server one fails, server two's got\nto take over all the virtual machines.\n\n537\n00:28:00,000 --> 00:28:04,060\nSo I need to make sure that\nserver two has extra memory,\n\n538\n00:28:04,060 --> 00:28:09,100\nextra processor power, and extra network\nbandwidth to be able to support that load.\n\n539\n00:28:09,100 --> 00:28:13,476\nCan I move all my virtual machines over\nto server two and it still runs okay?\n\n540\n00:28:13,476 --> 00:28:15,917\nWe need to plan for\nthat as we build our servers.\n\n541\n00:28:15,917 --> 00:28:19,630\nAnd unfortunately Zen Server doesn't\nknow whether we planned for that or not.\n\n542\n00:28:19,630 --> 00:28:21,840\nIt doesn't really know if it'll\nbe able to handle the load.\n\n543\n00:28:21,840 --> 00:28:22,590\nSo we need to make sure.\n\n544\n00:28:23,810 --> 00:28:26,490\nWith a two node cluster,\nit's pretty straight forward.\n\n545\n00:28:26,490 --> 00:28:29,550\nBut what if we have a three node cluster?\n\n546\n00:28:29,550 --> 00:28:32,670\nWhat if we go back to this example here?\n\n547\n00:28:32,670 --> 00:28:39,840\nIf server one were to fail, then server\ntwo and server three could split the load.\n\n548\n00:28:39,840 --> 00:28:41,726\nThey could take over a portion of that.\n\n549\n00:28:41,726 --> 00:28:45,986\nSo if I have 33% of my servers here,\n33% here, and\n\n550\n00:28:45,986 --> 00:28:50,973\n33% here, and server one fails,\nthey can take that 33% and\n\n551\n00:28:50,973 --> 00:28:56,770\nsplit it in half so basically 16% here and\n16% here being added on.\n\n552\n00:28:56,770 --> 00:28:58,359\nWhat happens if I have another failure?\n\n553\n00:28:58,359 --> 00:29:00,099\nIf server 3 fails.\n\n554\n00:29:00,099 --> 00:29:04,060\nWell, server 2 probably can't\nwithstand the load of that.\n\n555\n00:29:04,060 --> 00:29:08,153\nCan this one server run the VMs that we're\nrunning on these two separate boxes?\n\n556\n00:29:08,153 --> 00:29:10,660\nAnd the ones that we're\nrunning on it originally?\n\n557\n00:29:10,660 --> 00:29:11,890\nProbably not.\n\n558\n00:29:11,890 --> 00:29:18,380\nSo in that scenario we may configure HA\nto have a limit of one server failure.\n\n559\n00:29:18,380 --> 00:29:22,490\nJust say, hey if one server fails then\nsure, the other two guys can take over and\n\n560\n00:29:22,490 --> 00:29:23,490\nwe'll be great.\n\n561\n00:29:23,490 --> 00:29:28,450\nBut if two servers fail, don't do HA, just\nleave it be because this server's just\n\n562\n00:29:28,450 --> 00:29:31,490\ngonna get overwhelmed and\nit's not going to work.\n\n563\n00:29:31,490 --> 00:29:36,448\nAnd so that's part of what we saw when we\nset up HA was how many servers we could\n\n564\n00:29:36,448 --> 00:29:37,153\nsupport.\n\n565\n00:29:37,153 --> 00:29:42,580\nAnd we see right here, Configured failover\ncapacity 1, Current failure capacity 1.\n\n566\n00:29:42,580 --> 00:29:46,170\nWhy is there a difference\nbetween configured and current?\n\n567\n00:29:46,170 --> 00:29:48,809\nWell, I might have\na three node cluster and\n\n568\n00:29:48,809 --> 00:29:53,576\nconfigure it to support two failures,\nbut if I've already had one failure,\n\n569\n00:29:53,576 --> 00:29:57,414\nthen I'll only have failover capacity for\none more, right?\n\n570\n00:29:57,414 --> 00:30:01,460\nSo this is reflecting what I have\nleft if I already have some failures.\n\n571\n00:30:01,460 --> 00:30:05,530\nSo we may need to adjust that, and\nif you've got 10 nodes or 50 nodes,\n\n572\n00:30:05,530 --> 00:30:08,410\nor whatever, your failover\ncapacity might be very, very high.\n\n573\n00:30:08,410 --> 00:30:10,540\nYou might be able to support 10 failures.\n\n574\n00:30:10,540 --> 00:30:15,180\nBut in a small cluster like mine,\nI'm just gonna have that one, all right?\n\n575\n00:30:15,180 --> 00:30:16,511\nAnd then I can see the health.\n\n576\n00:30:16,511 --> 00:30:19,053\nThe servers are pinging each\nother via the network and\n\n577\n00:30:19,053 --> 00:30:21,900\nI can see they're both healthy right now.\n\n578\n00:30:21,900 --> 00:30:25,110\nAnd they're reaching out\nvia that iSCSI storage and\n\n579\n00:30:25,110 --> 00:30:27,480\nI can see they're both healthy there too.\n\n580\n00:30:27,480 --> 00:30:28,565\nThey see each other.\n\n581\n00:30:28,565 --> 00:30:29,850\nThey're getting their double checks.\n\n582\n00:30:29,850 --> 00:30:31,980\nEverything is going fine, right?\n\n583\n00:30:31,980 --> 00:30:35,100\nIf the network connection were to fail\nbetween these guys, and they wouldn't be\n\n584\n00:30:35,100 --> 00:30:38,250\nable to see each other, that would\nchange to show that it wasn't healthy.\n\n585\n00:30:38,250 --> 00:30:40,814\nBut the iSCSI storage might\nstill show that it was healthy.\n\n586\n00:30:40,814 --> 00:30:43,726\nWell, normally it would be on\na separate network card, and so\n\n587\n00:30:43,726 --> 00:30:45,670\nyes it would say it's healthy.\n\n588\n00:30:45,670 --> 00:30:48,800\nIn my case, I'm actually running them on\nthe same network card, which is terrible.\n\n589\n00:30:48,800 --> 00:30:52,310\nBut in my case, if one of them fails,\nthey're both going to fail.\n\n590\n00:30:52,310 --> 00:30:54,444\nSo that's what would happen there.\n\n591\n00:30:54,444 --> 00:30:55,325\nAll right.\n\n592\n00:30:55,325 --> 00:30:58,134\nSo looking at the servers\nas they are right now,\n\n593\n00:30:58,134 --> 00:31:02,150\nif I have a failure one of the servers\nshould take over for the other.\n\n594\n00:31:02,150 --> 00:31:05,296\nAnd that'll work for most of my VMs,\nexcept for this guy right here,\n\n595\n00:31:05,296 --> 00:31:06,008\nthis web01.\n\n596\n00:31:06,008 --> 00:31:09,487\nThat guy, he's on local storage right\nthere on server 1, there's no way for\n\n597\n00:31:09,487 --> 00:31:12,530\nit to recover,\nit's just gonna disappear out, all right?\n\n598\n00:31:12,530 --> 00:31:16,290\nAnd this guy,\nwho I apparently never rebooted,\n\n599\n00:31:16,290 --> 00:31:19,599\nso let me boot that one\nback up on server 1.\n\n600\n00:31:19,599 --> 00:31:20,737\nAll right.\n\n601\n00:31:20,737 --> 00:31:22,449\nSo HA is running.\n\n602\n00:31:22,449 --> 00:31:24,180\nI'm good to go, right.\n\n603\n00:31:24,180 --> 00:31:28,530\nWell let's see what happens here\nwhen we actually have a failure.\n\n604\n00:31:28,530 --> 00:31:32,940\nSo I am gonna let this client start up and\njust finish booting up, and\n\n605\n00:31:32,940 --> 00:31:34,750\nthen we'll actually see a failure happen.\n\n606\n00:31:34,750 --> 00:31:39,663\nSo right now I've got MySQL 01,\nand this web server.\n\n607\n00:31:39,663 --> 00:31:41,260\nI guess I should start it also.\n\n608\n00:31:41,260 --> 00:31:42,560\nFire that guy up.\n\n609\n00:31:42,560 --> 00:31:46,276\nAnd these guys are up and they're\nrunning and they're happy on server one.\n\n610\n00:31:46,276 --> 00:31:49,610\nAll right,\nwhat would happen if server one failed.\n\n611\n00:31:49,610 --> 00:31:51,770\nWell, first of all,\nwhat could cause server one to fail?\n\n612\n00:31:51,770 --> 00:31:53,610\nWe could have an outright power outage,\nright.\n\n613\n00:31:53,610 --> 00:31:55,900\nWe could have the servers\njust power off and that's it.\n\n614\n00:31:55,900 --> 00:31:57,710\nWe could have a hard drive failure.\n\n615\n00:31:57,710 --> 00:32:01,161\nThe network adapter could\nfail in server one, right?\n\n616\n00:32:01,161 --> 00:32:03,881\nIn that scenario if\nthe network adapter fails,\n\n617\n00:32:03,881 --> 00:32:06,873\nserver one won't be able\nto see the shared storage.\n\n618\n00:32:06,873 --> 00:32:11,816\nWhich means the virtual machines\nare gonna crash, they won't see their\n\n619\n00:32:11,816 --> 00:32:16,380\nhard drives anymore, and\nit won't be able to update the HA files.\n\n620\n00:32:16,380 --> 00:32:17,300\nThe heartbeat files.\n\n621\n00:32:17,300 --> 00:32:20,360\nIt won't be able to reach out and\ntouch those to say hey I'm still up.\n\n622\n00:32:20,360 --> 00:32:23,300\nSo if server one here were to\nlose it's network adapter it\n\n623\n00:32:23,300 --> 00:32:25,180\nwould be the same thing\nas a total failure.\n\n624\n00:32:25,180 --> 00:32:27,790\nAll right, in fact that's a pretty\neasy one for us to simulate.\n\n625\n00:32:27,790 --> 00:32:29,430\nLet me see if these\nvirtual machines are up.\n\n626\n00:32:29,430 --> 00:32:36,170\nThat one's up, and this one is,\nyeah it's a Windows login screen, perfect.\n\n627\n00:32:36,170 --> 00:32:38,330\nAll right so let me shout offset here.\n\n628\n00:32:38,330 --> 00:32:39,580\nHey Nate.\n\n629\n00:32:39,580 --> 00:32:42,470\nCan you instead of powering up,\ncan you just pull the network adapter?\n\n630\n00:32:42,470 --> 00:32:44,672\nPull the network cable\nfrom server one please?\n\n631\n00:32:44,672 --> 00:32:45,850\nAll right.\n\n632\n00:32:45,850 --> 00:32:47,360\nSo Nate's gonna run off-screen here and\n\n633\n00:32:47,360 --> 00:32:50,800\nhe's gonna yank the network\ncable out of server one.\n\n634\n00:32:50,800 --> 00:32:56,960\nNow I'm plugged into server one right\nnow and it is, what is it's IP address?\n\n635\n00:32:56,960 --> 00:32:57,970\n241.\n\n636\n00:32:57,970 --> 00:32:59,060\nSo I'm gonna ping it now.\n\n637\n00:32:59,060 --> 00:33:02,930\nServer one is two things for me.\n\n638\n00:33:02,930 --> 00:33:05,410\nIt's not just a node in my cluster.\n\n639\n00:33:05,410 --> 00:33:08,800\nIt's also the master in my cluster.\n\n640\n00:33:08,800 --> 00:33:12,620\nAnd so when he yanks that\nnetwork cable out of server one\n\n641\n00:33:12,620 --> 00:33:14,350\nI'm gonna have two problems.\n\n642\n00:33:14,350 --> 00:33:18,240\nI'm gonna lose not just my node.\n\n643\n00:33:18,240 --> 00:33:19,810\nI'm gonna lose my master.\n\n644\n00:33:19,810 --> 00:33:23,800\nAnd when you lose your master,\nyou actually lose your XenCenter.\n\n645\n00:33:23,800 --> 00:33:26,680\nI'm gonna get connected\nhere from XenCenter.\n\n646\n00:33:26,680 --> 00:33:29,170\nAnd so he's unplugged it,\nyou have unplugged it, right?\n\n647\n00:33:29,170 --> 00:33:29,700\nYep.\n\n648\n00:33:29,700 --> 00:33:33,912\nSo he's unplugged it, and I can verify\nhere that if I try and ping it,\n\n649\n00:33:33,912 --> 00:33:36,650\nlet's see 241 is server one.\n\n650\n00:33:36,650 --> 00:33:39,740\nSo I cannot ping that one.\n\n651\n00:33:39,740 --> 00:33:42,530\nAnd if i try and ping 242,\nthat's server two, I can ping it.\n\n652\n00:33:42,530 --> 00:33:45,270\nSo, we have a failure of server one, but\n\n653\n00:33:45,270 --> 00:33:48,850\nlooking at my screen here server\none looks perfectly happy right.\n\n654\n00:33:48,850 --> 00:33:50,270\nWell it isn't.\n\n655\n00:33:50,270 --> 00:33:55,360\nIt's failed but my XenCenter has become\ndisconnected., and there it goes.\n\n656\n00:33:55,360 --> 00:33:58,250\nAnd it took it a minute to realize that,\nto realize that we\n\n657\n00:33:58,250 --> 00:34:01,880\nweren't connected to that node anymore,\nand so now it's gone disconnected.\n\n658\n00:34:01,880 --> 00:34:04,260\nSo all my servers are down, right?\n\n659\n00:34:04,260 --> 00:34:05,360\nWell, no.\n\n660\n00:34:05,360 --> 00:34:07,280\nThe servers are still up,\n\n661\n00:34:07,280 --> 00:34:10,660\nI'm just not connected to them to be\nable to We'll see it here in XenCenter.\n\n662\n00:34:10,660 --> 00:34:12,690\nAnd HA is actually doing\nit's work right now.\n\n663\n00:34:12,690 --> 00:34:16,130\nIt's grabbing the virtual machines\nthat it can off of server one.\n\n664\n00:34:16,130 --> 00:34:18,830\nAnd booting them back\nup over on server two.\n\n665\n00:34:18,830 --> 00:34:20,330\nOr at least I hope it is.\n\n666\n00:34:20,330 --> 00:34:23,650\nSo we can try and reconnect here, and\n\n667\n00:34:23,650 --> 00:34:25,460\nsee how it's trying to\nconnect to 10.1.100.241.\n\n668\n00:34:25,460 --> 00:34:29,960\nIt's trying to connect to that master and\nthat's gonna fail.\n\n669\n00:34:29,960 --> 00:34:33,150\nAnd if it cached it,\nit should jump over to the other one.\n\n670\n00:34:33,150 --> 00:34:34,210\nWe'll give it just a second.\n\n671\n00:34:34,210 --> 00:34:35,430\nIf it doesn't I can manually do it.\n\n672\n00:34:35,430 --> 00:34:38,150\nWe'll give it just a moment.\n\n673\n00:34:40,070 --> 00:34:41,680\nAnd I'm about to be impatient.\n\n674\n00:34:41,680 --> 00:34:44,710\nA lot of times if I would just wait for\nthings they would work a lot better, but\n\n675\n00:34:44,710 --> 00:34:46,310\nI think I'm gonna cancel this one.\n\n676\n00:34:46,310 --> 00:34:54,510\nAnd what we can do is we can take that\npool and I'm just going to remove it.\n\n677\n00:34:57,420 --> 00:34:58,350\nAnd then I'm gonna connect.\n\n678\n00:34:59,570 --> 00:35:00,630\nTo the other host.\n\n679\n00:35:00,630 --> 00:35:02,630\nSo I'm just gonna go in and\npunch that one in.\n\n680\n00:35:03,910 --> 00:35:05,790\nAnd hope that I remember\nwhat the password is.\n\n681\n00:35:07,970 --> 00:35:08,660\nAll right.\n\n682\n00:35:08,660 --> 00:35:12,230\nAnd when I connect to it,\nsee how I'm able to connect now.\n\n683\n00:35:12,230 --> 00:35:14,170\nServer one shows as down.\n\n684\n00:35:14,170 --> 00:35:16,460\nIt's got a little blue lock icon on it,\n\n685\n00:35:16,460 --> 00:35:20,210\nletting me know that server\nis in a inconsistent state.\n\n686\n00:35:20,210 --> 00:35:22,060\nServer two is up and healthy.\n\n687\n00:35:22,060 --> 00:35:23,960\nSo I was able to connect.\n\n688\n00:35:23,960 --> 00:35:28,360\nAnd if I look at server two and\nserver one, well, server one is showing as\n\n689\n00:35:28,360 --> 00:35:33,320\ninconsistent and it's showing, actually\nit's still showing that those VM's are up,\n\n690\n00:35:33,320 --> 00:35:36,510\nwhich is kind of entertaining,\nbut, oh there it goes.\n\n691\n00:35:36,510 --> 00:35:38,170\nIt's still doing detection.\n\n692\n00:35:38,170 --> 00:35:40,600\nSo now it's showing that\nserver one is down, and\n\n693\n00:35:40,600 --> 00:35:44,120\nsee how my SQL01 just\ndropped down to the pool.\n\n694\n00:35:44,120 --> 00:35:46,810\nAnd then it just reappeared\nright there on server two.\n\n695\n00:35:46,810 --> 00:35:51,270\nSo HA figured out that\nserver one was down.\n\n696\n00:35:51,270 --> 00:35:55,210\nServer two has taken over,\nand now it's bringing VM up.\n\n697\n00:35:55,210 --> 00:35:58,570\nServer one is now showing as\nofficially down, and see how it's got\n\n698\n00:35:58,570 --> 00:36:02,050\nlost connection, will search for\na new pool master in 60 seconds.\n\n699\n00:36:02,050 --> 00:36:03,230\nThat's what it was doing.\n\n700\n00:36:03,230 --> 00:36:06,580\nIt was waiting that minute, and\nit found a new pool master.\n\n701\n00:36:06,580 --> 00:36:08,740\nNow server two is the pool master.\n\n702\n00:36:08,740 --> 00:36:12,260\nIt's taken over for\nserver one that was down, All right.\n\n703\n00:36:12,260 --> 00:36:16,320\nAnd my SQL01 is booting up, and\nit's probably already up by now.\n\n704\n00:36:16,320 --> 00:36:17,110\nSo it booted.\n\n705\n00:36:17,110 --> 00:36:21,210\nNow it did have to reboot because\nthe physical server just winked out.\n\n706\n00:36:21,210 --> 00:36:22,380\nIt went out and that was it.\n\n707\n00:36:22,380 --> 00:36:24,450\nThere was no way to synchronize memory.\n\n708\n00:36:24,450 --> 00:36:26,050\nIt's down, all right?\n\n709\n00:36:26,050 --> 00:36:31,910\nSo that's what it looks like in a failure,\nHA kicked in and moved the system over.\n\n710\n00:36:31,910 --> 00:36:32,930\nI didn't have to do anything.\n\n711\n00:36:32,930 --> 00:36:37,080\nI did, right, I connected with XenCenter,\nbut I could have been at home asleep.\n\n712\n00:36:37,080 --> 00:36:40,100\nAnd our downtime there would’ve been,\nwhat,\n\n713\n00:36:40,100 --> 00:36:44,280\na minute, two minutes maybe,\nwhile it recognized the failure and\n\n714\n00:36:44,280 --> 00:36:46,800\nthen booted up the other system\nto bring it back online.\n\n715\n00:36:46,800 --> 00:36:50,682\nThat’s what we want with High\nAvailability, resolve the issue for us.\n\n716\n00:36:50,682 --> 00:36:51,230\nOkay.\n\n717\n00:36:51,230 --> 00:36:54,610\nNow when I come in in the morning, I come\nin and I see, oh, server one is down and\n\n718\n00:36:54,610 --> 00:36:55,950\nI need to deal with that.\n\n719\n00:36:55,950 --> 00:36:59,490\nAnd if I look at my HA tab I can see here.\n\n720\n00:36:59,490 --> 00:37:01,980\nMy configured failover capacity is one.\n\n721\n00:37:01,980 --> 00:37:03,980\nMy current capacity is zero.\n\n722\n00:37:03,980 --> 00:37:06,010\nMy pool is over committed.\n\n723\n00:37:06,010 --> 00:37:07,980\nI cannot survive anymore failures.\n\n724\n00:37:07,980 --> 00:37:09,480\nWell I've only got one server left.\n\n725\n00:37:09,480 --> 00:37:12,742\nSo if that server fails,\nwhat I'm gonna fail over too?\n\n726\n00:37:12,742 --> 00:37:15,010\nAll right, and I can see down here,\n\n727\n00:37:15,010 --> 00:37:20,170\nserver two has network connectivity\nwith one out of two servers, so itself.\n\n728\n00:37:20,170 --> 00:37:22,850\nAnd it's connection to\nthe iSCSI site is healthy.\n\n729\n00:37:22,850 --> 00:37:24,690\nThe other guy, completely missing.\n\n730\n00:37:24,690 --> 00:37:27,560\nError, error, it's just gone,\nwe can't see it.\n\n731\n00:37:27,560 --> 00:37:28,112\nIt's not healthy.\n\n732\n00:37:28,112 --> 00:37:30,000\nAll right.\n\n733\n00:37:30,000 --> 00:37:34,625\nNow when we recover the server,\nwell things recover.\n\n734\n00:37:34,625 --> 00:37:37,060\nRight?\nThings come back and become healthy again.\n\n735\n00:37:37,060 --> 00:37:39,160\nAnd so HA will take care of that for us.\n\n736\n00:37:39,160 --> 00:37:40,950\nAnd so\nlet me just shout out to Nate again.\n\n737\n00:37:40,950 --> 00:37:44,170\nSenor Nate, could you plug in that\nnetwork adapter for me please?\n\n738\n00:37:46,040 --> 00:37:48,540\nOriginally I was gonna have him\nyank the power cable out of it.\n\n739\n00:37:48,540 --> 00:37:52,230\nBut anytime you yank the power\ncable out you do run a little\n\n740\n00:37:52,230 --> 00:37:54,760\nrisk of corrupting your OS partition.\n\n741\n00:37:54,760 --> 00:37:57,280\nSo I have him do the network adapter\nwhich is a little more friendly.\n\n742\n00:37:57,280 --> 00:38:00,580\nSo when he plugs that back in,\nit may take a moment,\n\n743\n00:38:00,580 --> 00:38:04,510\nbut XenServer will recognize\nthat the new server is back up.\n\n744\n00:38:05,760 --> 00:38:09,050\nAnd so I’m gonna just kind\nof ping to that server.\n\n745\n00:38:10,160 --> 00:38:14,020\nThere we go.\nSo I can ping it, but\n\n746\n00:38:14,020 --> 00:38:17,140\njust because it’s plugged back in\ndoesn’t mean it immediately goes live,\n\n747\n00:38:17,140 --> 00:38:18,300\ncuz it’s got some problems.\n\n748\n00:38:18,300 --> 00:38:20,840\nRight?\nIt lost connect to its storage and\n\n749\n00:38:20,840 --> 00:38:22,730\nall that, so it’s gonna come up.\n\n750\n00:38:22,730 --> 00:38:24,960\nAnd it's gonna do some\npolling on the pool.\n\n751\n00:38:24,960 --> 00:38:27,230\nIt's going to say hey,\nI've been gone for a minute.\n\n752\n00:38:27,230 --> 00:38:28,850\nBut I'm back again, what's new?\n\n753\n00:38:28,850 --> 00:38:30,028\nWhat's exciting?\n\n754\n00:38:30,028 --> 00:38:31,690\nAnd it's gonna connect to the pool,\n\n755\n00:38:31,690 --> 00:38:34,110\nit will connect to server two,\nthe only other node that's there.\n\n756\n00:38:34,110 --> 00:38:38,100\nAnd server two will say oh, while you\nwere gone I'm the new master, right?\n\n757\n00:38:38,100 --> 00:38:42,540\nI'm running this show and these are the\nvirtual machines that I'm hosting now, so\n\n758\n00:38:42,540 --> 00:38:44,480\nyou can't host these, all right?\n\n759\n00:38:44,480 --> 00:38:47,220\nBut, if you wanna re-join the pool,\nyou can, and\n\n760\n00:38:47,220 --> 00:38:49,170\nwe can transition some resources to you.\n\n761\n00:38:49,170 --> 00:38:51,870\nSo that's what I just saw right there\nis server one just changed from\n\n762\n00:38:51,870 --> 00:38:54,030\na red circle back to that blue lock.\n\n763\n00:38:54,030 --> 00:38:58,270\nSo it's coming back and rejoining\nthe pool and it's coming healthy again.\n\n764\n00:38:58,270 --> 00:38:58,790\nAll right.\n\n765\n00:38:58,790 --> 00:38:59,570\nIt's getting connected.\n\n766\n00:38:59,570 --> 00:39:02,710\nFor a brief moment you might have\nnoticed the shares down here,\n\n767\n00:39:02,710 --> 00:39:06,070\nthe storage repositories,\nthey had red circles too.\n\n768\n00:39:06,070 --> 00:39:08,860\nWell, when you have\na repository like that,\n\n769\n00:39:08,860 --> 00:39:10,760\neach of your nodes needs\nto be able to connect.\n\n770\n00:39:10,760 --> 00:39:13,910\nAnd if even one node can't connect,\nthe repository shows as failed.\n\n771\n00:39:13,910 --> 00:39:15,370\nSo it showed that for a moment.\n\n772\n00:39:15,370 --> 00:39:20,410\nBut now it's come up and it's healthy\nagain, now server two is part of the pool.\n\n773\n00:39:20,410 --> 00:39:24,160\nNotice it did not seize\ncontrol of those VM's.\n\n774\n00:39:24,160 --> 00:39:26,310\nThe VM' are still up here on server two.\n\n775\n00:39:27,515 --> 00:39:30,755\nThat’s because server two is nice and\nstable and consistent, so\n\n776\n00:39:30,755 --> 00:39:32,215\nthat means it’s just gonna sit there.\n\n777\n00:39:33,545 --> 00:39:36,355\nUntil we tell it to move\nback over to the other side.\n\n778\n00:39:36,355 --> 00:39:38,985\nSo if I wanna move this one back over,\nI should be able to do that now, so\n\n779\n00:39:38,985 --> 00:39:40,029\nI’ll go ahead and migrate it.\n\n780\n00:39:41,090 --> 00:39:42,760\nAnd I'll send it back to server one.\n\n781\n00:39:42,760 --> 00:39:47,010\nAnd I can do it without rebooting this\ntime because both servers are online,\n\n782\n00:39:47,010 --> 00:39:50,390\nthey can synchronize memory and\ncopy that stuff over and bring it healthy.\n\n783\n00:39:50,390 --> 00:39:52,900\nAnd I can start web01 back up again also.\n\n784\n00:39:54,410 --> 00:39:57,370\nAnd now my node will be\nback to the way it was.\n\n785\n00:39:57,370 --> 00:39:59,590\nSo that's the cool part about HA.\n\n786\n00:39:59,590 --> 00:40:04,815\nIs that HA, the High Availability, will\nautomatically resolve failures for you.\n\n787\n00:40:04,815 --> 00:40:07,462\nWithout HA, that’s not going to work.\n\n788\n00:40:07,462 --> 00:40:10,109\nOh, now I get my warning.\n\n789\n00:40:10,109 --> 00:40:13,853\nNow it's just warning me that I will not\nbe able to tolerate any further server\n\n790\n00:40:13,853 --> 00:40:17,810\nfailures because I had a failure, so\nthis is kind of a late status message.\n\n791\n00:40:17,810 --> 00:40:19,600\nI haven't been looking at them, but\n\n792\n00:40:19,600 --> 00:40:24,510\nyou'll notice up here under System Alerts\nthat I've been getting alerts for\n\n793\n00:40:24,510 --> 00:40:26,580\nvarious things and\njust not paying attention to them.\n\n794\n00:40:26,580 --> 00:40:29,460\nAnd these are each telling\nme about the server failure,\n\n795\n00:40:29,460 --> 00:40:31,760\nthe pool master changing and so on.\n\n796\n00:40:31,760 --> 00:40:36,450\nSo we can see each of those little\nentities in there and what is happening.\n\n797\n00:40:36,450 --> 00:40:39,545\nThat's how we keep kind of\nrecord of what was going on.\n\n798\n00:40:42,064 --> 00:40:43,380\nAll right.\n\n799\n00:40:43,380 --> 00:40:44,610\nOh, and it’s not fully healthy yet.\n\n800\n00:40:44,610 --> 00:40:48,630\nSee, I wasn’t able to start this node\nbecause it’s not completely healthy yet.\n\n801\n00:40:48,630 --> 00:40:50,650\nWe have to wait for HA to catch back up.\n\n802\n00:40:50,650 --> 00:40:53,390\nWe know when HA is healthy if\nwe go back here and, actually,\n\n803\n00:40:53,390 --> 00:40:56,870\nit does say I’m already caught back up,\nso it may just not be aware of it yet.\n\n804\n00:40:56,870 --> 00:41:00,820\nPatience is a virtue on some of this\nstuff, but yeah, so it’s coming healthy.\n\n805\n00:41:00,820 --> 00:41:02,840\nAnd this one’s moving,\nso it’s healthy again.\n\n806\n00:41:03,950 --> 00:41:05,410\nYeah, so we’ll just give\nit time while it does that.\n\n807\n00:41:06,530 --> 00:41:09,890\nAll right, so if we want automatic\nfailover, we need that HAP.\n\n808\n00:41:09,890 --> 00:41:12,370\nAnd in previous versions of\nXenServer you had to pay for that.\n\n809\n00:41:12,370 --> 00:41:13,768\nIt was part of the Enterprise version.\n\n810\n00:41:13,768 --> 00:41:17,150\nBut, in 6.0 and higher, it's free.\n\n811\n00:41:17,150 --> 00:41:18,560\nIt's part of the base solution.\n\n812\n00:41:18,560 --> 00:41:19,400\nYou can do it.\n\n813\n00:41:19,400 --> 00:41:20,580\nClustering is free.\n\n814\n00:41:20,580 --> 00:41:21,480\nHA is free.\n\n815\n00:41:21,480 --> 00:41:22,340\nThere's no reason not to do it.\n\n816\n00:41:22,340 --> 00:41:25,288\nAs long as you have shared storage, you\nshould definitely take advantage of that.\n\n817\n00:41:27,145 --> 00:41:28,022\nAll right,\n\n818\n00:41:28,022 --> 00:41:33,470\nnow what we just saw was what happens\nwhen we have failure with HA enabled.\n\n819\n00:41:34,750 --> 00:41:39,750\nIf we didn't have HA enabled,\nif were to go in and turn it off, right?\n\n820\n00:41:39,750 --> 00:41:43,330\nAnd one of the servers were to fail,\nthe other servers wouldn't care.\n\n821\n00:41:43,330 --> 00:41:45,170\nThey would just ignore it.\n\n822\n00:41:45,170 --> 00:41:46,940\nBig deal, so\nthe other server failed, right?\n\n823\n00:41:47,940 --> 00:41:52,370\nIf you try to take over a virtual machine\nat that point, then the old server might\n\n824\n00:41:52,370 --> 00:41:55,700\nstill be accessing it and you can\nstart to run into conflicts there too.\n\n825\n00:41:55,700 --> 00:42:00,500\nSo under the system without HA,\nit really has no way of detecting that.\n\n826\n00:42:00,500 --> 00:42:01,780\nSo the rule of thumb for\n\n827\n00:42:01,780 --> 00:42:06,260\nme is, on a standalone server that's fine,\nyou just deal with it.\n\n828\n00:42:06,260 --> 00:42:11,660\nBut in a pool environment, in a clustered\nenvironment like this, you always want HA.\n\n829\n00:42:11,660 --> 00:42:12,840\nYou always want to turn that on, so\n\n830\n00:42:12,840 --> 00:42:15,499\nit's kind of like a follow up\nstep to turning on clustering.\n\n831\n00:42:17,060 --> 00:42:18,720\nAnd you can turn it off whenever you want.\n\n832\n00:42:18,720 --> 00:42:22,480\nIf you go back up to HA,\nyou can just choose to disable it and\n\n833\n00:42:22,480 --> 00:42:23,180\nthat’ll turn it off.\n\n834\n00:42:23,180 --> 00:42:25,550\nIt turns off almost instantly.\n\n835\n00:42:25,550 --> 00:42:28,840\nNow we’re back to the old way\nwhere if one server fails,\n\n836\n00:42:28,840 --> 00:42:31,035\nit just takes everything with it.\n\n837\n00:42:31,035 --> 00:42:35,125\nIt just takes the VMs with it and they\ndon't failover and that's the end of it.\n\n838\n00:42:35,125 --> 00:42:37,135\nSo that may be what you want.\n\n839\n00:42:37,135 --> 00:42:40,695\nYou might want that manual\ncontrol over the failover.\n\n840\n00:42:40,695 --> 00:42:42,845\nAnd, in that case, you wouldn't use HA.\n\n841\n00:42:42,845 --> 00:42:46,335\nOr you might be using third\nparty software to manage this.\n\n842\n00:42:46,335 --> 00:42:48,615\nCitrix actually has a set of software and\n\n843\n00:42:48,615 --> 00:42:50,970\nother vendors have software\nthat can manage this too.\n\n844\n00:42:50,970 --> 00:42:53,970\nIn which case, you might not want\nto use the internal HA because your\n\n845\n00:42:53,970 --> 00:42:55,900\nother software is handling it for you.\n\n846\n00:42:55,900 --> 00:42:57,620\nSo that is another possibility.\n\n847\n00:42:59,880 --> 00:43:01,720\nSo that's about it for HA.\n\n848\n00:43:01,720 --> 00:43:03,540\nI do have some other things\nthat I want to talk about but\n\n849\n00:43:03,540 --> 00:43:07,400\nthey don't really kind of line\nup with that topic specifically.\n\n850\n00:43:07,400 --> 00:43:11,670\nSo, maybe we'll tackle that later.\n\n851\n00:43:11,670 --> 00:43:14,880\nAnother thing to mention I guess,\njust before I wrap up the show, is\n\n852\n00:43:14,880 --> 00:43:19,430\nwhen I disabled HA, so I've turned it off,\nyou'll see it's not currently enabled.\n\n853\n00:43:19,430 --> 00:43:25,210\nIf I go back to my iSCSI storage,\nmy HA storage has stayed, all right?\n\n854\n00:43:25,210 --> 00:43:26,520\nIt does stay there.\n\n855\n00:43:26,520 --> 00:43:29,440\nIf I turn it back on,\nit can just reuse those if we want.\n\n856\n00:43:29,440 --> 00:43:30,300\nOr you can delete them.\n\n857\n00:43:30,300 --> 00:43:33,830\nIt is safe to get rid of these now that HA\nis turned off, so you can just go in and\n\n858\n00:43:33,830 --> 00:43:37,200\ndelete those out of there, and\nthey're not being used anymore.\n\n859\n00:43:37,200 --> 00:43:40,880\nSo they'll hang out forever if you\nlet them, but you can just go and\n\n860\n00:43:40,880 --> 00:43:41,559\nremove them, and it's safe.\n\n861\n00:43:42,972 --> 00:43:46,180\nAll right, well let's go ahead and\nwrap it up here then.\n\n862\n00:43:46,180 --> 00:43:50,140\nWe've seen clustering at this point, we've\nseen high availability, so we've had that\n\n863\n00:43:50,140 --> 00:43:56,195\nchance to kind of see how those work and\nnow we're nice, done, redundant.\n\n864\n00:43:56,195 --> 00:43:57,465\nReady to rock, right?\n\n865\n00:43:57,465 --> 00:44:00,405\nThe only other thing we need to do is\nto take a look at some of the other\n\n866\n00:44:00,405 --> 00:44:02,145\ncool features that are spread\nthrough XenServer,\n\n867\n00:44:02,145 --> 00:44:04,475\nwhich is what we're gonna do\nin the follow-up episode.\n\n868\n00:44:04,475 --> 00:44:08,295\nSo stay tuned to ITProTV because we've\ngot more of that coming your way.\n\n869\n00:44:08,295 --> 00:44:09,335\nLet me also remind you guys,\n\n870\n00:44:09,335 --> 00:44:13,110\nif you have any other questions on this,\nfeel free to ask.\n\n871\n00:44:13,110 --> 00:44:16,250\nLive during the show,\nyou can go to itpro.tv/live.\n\n872\n00:44:16,250 --> 00:44:18,150\nYou'll see the chat box\nright beneath the video.\n\n873\n00:44:18,150 --> 00:44:20,100\nYou can post your questions there.\n\n874\n00:44:20,100 --> 00:44:22,800\nWe monitor and answer during the show.\n\n875\n00:44:22,800 --> 00:44:26,200\nIf you have questions after the show,\nuse the Q and A forums.\n\n876\n00:44:26,200 --> 00:44:28,929\nYou can jump right into Q and\nA by clicking the Q and\n\n877\n00:44:28,929 --> 00:44:32,201\nA link at the top of every page,\non the itpro.tv website.\n\n878\n00:44:32,201 --> 00:44:33,383\nIt will take you to the forums,\n\n879\n00:44:33,383 --> 00:44:36,160\npost your questions there,\nand we monitor and answer.\n\n880\n00:44:36,160 --> 00:44:37,120\nSo I hope you guys enjoyed the show.\n\n881\n00:44:37,120 --> 00:44:38,520\nI'll see you next time.\n\n882\n00:44:38,520 --> 00:44:41,840\nIt's hard to sign out\nwhen you've just got me.\n\n883\n00:44:41,840 --> 00:44:43,790\nI'm used to having my cohost here.\n\n884\n00:44:43,790 --> 00:44:47,283\nSo signing out for ITProTV,\nI'm Don Pezet, all by myself.\n\n885\n00:44:47,283 --> 00:44:48,535\nWe'll see you next time.\n\n886\n00:44:48,535 --> 00:44:58,535\n[MUSIC]\n\n",
          "vimeoId": "100414404"
        },
        {
          "description": "",
          "length": "3976",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/citrixxenserver/004-XenServer-Administration.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/citrixxenserver/004-XenServer-Administration-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/citrixxenserver/004-XenServer-Administration-sm.jpg",
          "title": "XenServer Administration",
          "transcript": "1\n00:00:00,000 --> 00:00:10,000\n[MUSIC]\n\n2\n00:00:33,028 --> 00:00:33,981\nAll right.\nGood morning.\n\n3\n00:00:33,981 --> 00:00:34,701\nGood afternoon.\n\n4\n00:00:34,701 --> 00:00:35,571\nAnd good evening.\n\n5\n00:00:35,571 --> 00:00:38,021\nAnd welcome back to another\nepisode of ITPro TV.\n\n6\n00:00:38,021 --> 00:00:39,810\nI'm your host Don Pezet.\n\n7\n00:00:39,810 --> 00:00:42,600\nToday with another episode of XenServer.\n\n8\n00:00:42,600 --> 00:00:44,350\nOne of our special series.\n\n9\n00:00:44,350 --> 00:00:46,790\nWhere we're not so\nmuch focused on an exam this time.\n\n10\n00:00:46,790 --> 00:00:49,530\nBut just focused on how\nto use the technology.\n\n11\n00:00:49,530 --> 00:00:52,600\nSo we've done a couple of\nepisodes of XenServer already.\n\n12\n00:00:52,600 --> 00:00:54,570\nWe've shown you guys how to install it.\n\n13\n00:00:54,570 --> 00:00:58,540\nWe showed how to set up a cluster and\ndo high availability.\n\n14\n00:00:58,540 --> 00:01:01,770\nAll that kind of stuff is really\nthings that we do in the beginning.\n\n15\n00:01:01,770 --> 00:01:04,310\nWhen we first implemented XenServer.\n\n16\n00:01:04,310 --> 00:01:06,880\nOnce it's implemented,\nthen we just run it, right?\n\n17\n00:01:06,880 --> 00:01:09,870\nWe let it run and everything goes great\nand we never have problems, right?\n\n18\n00:01:09,870 --> 00:01:12,580\nThat's our goal with any technology,\nnever happens.\n\n19\n00:01:12,580 --> 00:01:13,860\nThat's why we have jobs.\n\n20\n00:01:13,860 --> 00:01:18,230\nBut there are activities we need\nto perform on a regular basis.\n\n21\n00:01:18,230 --> 00:01:20,460\nAnd that's what I wanna\ntackle in this episode.\n\n22\n00:01:20,460 --> 00:01:25,030\nThese are gonna be the ongoing activities,\njust the general server administration we\n\n23\n00:01:25,030 --> 00:01:29,720\nperform on a day to day basis\nthat is just our normal stuff.\n\n24\n00:01:29,720 --> 00:01:31,910\nThe stuff we do to get paid I suppose.\n\n25\n00:01:31,910 --> 00:01:35,840\nSo, once our servers are up and running\nwhat are some of the things we need to do?\n\n26\n00:01:35,840 --> 00:01:39,600\nWell, first off, we need to,\nwe need to work with the servers.\n\n27\n00:01:39,600 --> 00:01:44,060\nNow, I've been using XenCenter\nin all of these episodes and so\n\n28\n00:01:44,060 --> 00:01:47,230\nwhen you've looked I've had\nthis graphical user interface.\n\n29\n00:01:47,230 --> 00:01:48,800\nLet's see, this guy right here.\n\n30\n00:01:48,800 --> 00:01:51,350\nSo I've had this graphical\nuser interface up.\n\n31\n00:01:51,350 --> 00:01:54,730\nAnd we've been kinda working with\nthe server, creating virtual machines.\n\n32\n00:01:54,730 --> 00:01:57,790\nAnd stuff all through a nice little GUI,\nall right?\n\n33\n00:01:57,790 --> 00:02:02,490\nWell the GUI is nice but it makes it\nvery difficult to automate things.\n\n34\n00:02:02,490 --> 00:02:04,800\nTo automate starting up and\nshutting down machines.\n\n35\n00:02:04,800 --> 00:02:08,390\nThings on nature, so we don't really\nhave a great way to deal with that.\n\n36\n00:02:08,390 --> 00:02:10,790\nThe other problem with the GUI.\n\n37\n00:02:10,790 --> 00:02:15,230\nIt only runs on Windows and if you're\nin a Windows environment, that's fine,\n\n38\n00:02:15,230 --> 00:02:16,160\nwhat do you care, right?\n\n39\n00:02:16,160 --> 00:02:20,790\nBut if you are supporting Macs and\nLinux desktops and so on.\n\n40\n00:02:20,790 --> 00:02:24,500\nIf your own desktop is a Linux desktop,\nyou can't run XenCenter.\n\n41\n00:02:24,500 --> 00:02:26,250\nIt only runs on windows.\n\n42\n00:02:26,250 --> 00:02:31,220\nWell fortunately, the GUI is not the only\nthing we can use to manage the server.\n\n43\n00:02:31,220 --> 00:02:36,070\nXen, underneath the hood,\nis doing everything via the command line.\n\n44\n00:02:36,070 --> 00:02:39,050\nThere's actually a command\nline utility called XE.\n\n45\n00:02:39,050 --> 00:02:41,140\nAnd it lets us interact with XenServer and\n\n46\n00:02:41,140 --> 00:02:43,670\nthe Xen engine to be\nable to reach in there.\n\n47\n00:02:43,670 --> 00:02:47,180\nStart VM, shut off VMs, create them,\ndo whatever we want, all the work.\n\n48\n00:02:47,180 --> 00:02:50,890\nEverything we've done in the GUI\nwe can do from the command line.\n\n49\n00:02:50,890 --> 00:02:51,950\nIt's a bit harder, right.\n\n50\n00:02:51,950 --> 00:02:53,370\nYou have longer commands.\n\n51\n00:02:53,370 --> 00:02:55,780\nYou gotta remember all these\ndifferent terms and stuff.\n\n52\n00:02:55,780 --> 00:02:58,720\nSo it is a little bit more difficult but\nit is pretty handy.\n\n53\n00:02:58,720 --> 00:02:59,850\nAll right.\n\n54\n00:02:59,850 --> 00:03:02,480\nWhen I fire up XenCenter, right.\n\n55\n00:03:02,480 --> 00:03:03,740\nAnd I save my passwords.\n\n56\n00:03:03,740 --> 00:03:04,470\nWe're not seeing it here.\n\n57\n00:03:04,470 --> 00:03:06,850\nBut when I fire up\nXenCenter it asks me for\n\n58\n00:03:06,850 --> 00:03:09,360\na user name and\npassword to connect to the server.\n\n59\n00:03:09,360 --> 00:03:12,150\nAnd for the user name and\npassword I used root and\n\n60\n00:03:12,150 --> 00:03:16,090\nthe password that I set when we installed\nXenCenter in the very beginning, right.\n\n61\n00:03:16,090 --> 00:03:19,890\nWhen you installed off of that\ndisk it asked you for a password.\n\n62\n00:03:19,890 --> 00:03:23,330\nIt creates a user called root and\nthen it sets a password, right.\n\n63\n00:03:23,330 --> 00:03:25,730\nWell from there we can get into the GUI.\n\n64\n00:03:25,730 --> 00:03:30,210\nWe can use that same password to connect\nto the consoles of the servers themselves.\n\n65\n00:03:30,210 --> 00:03:32,820\nAnd there's two ways\nto get to the console.\n\n66\n00:03:32,820 --> 00:03:35,470\nThe XenServers themselves,\nthey're actually running Linux.\n\n67\n00:03:35,470 --> 00:03:38,740\nThey're running RedHat Linux,\nRedHat Enterprise Linux.\n\n68\n00:03:38,740 --> 00:03:41,550\nAnd you can get to the console\nright here from the GUI.\n\n69\n00:03:41,550 --> 00:03:44,590\nI know that sounds kind\nof counter-intuitive but\n\n70\n00:03:44,590 --> 00:03:45,700\nyou can take a server.\n\n71\n00:03:45,700 --> 00:03:49,130\nLike here I'll take ITPro.TV server 2 and\n\n72\n00:03:49,130 --> 00:03:51,870\nyou know normally we're looking\nat the GUI stuff for the server.\n\n73\n00:03:51,870 --> 00:03:53,490\nThese screens right here.\n\n74\n00:03:53,490 --> 00:03:58,950\nBut if you go to the console tab,\nyou'll actually see the well console.\n\n75\n00:03:58,950 --> 00:04:01,190\nAnd let me,\nI'm just gonna exit out of that and\n\n76\n00:04:01,190 --> 00:04:03,110\nwhat you'll normally see\nis this message right here.\n\n77\n00:04:03,110 --> 00:04:05,360\nPress enter to log in all right.\n\n78\n00:04:05,360 --> 00:04:06,740\nIt's authenticating you.\n\n79\n00:04:06,740 --> 00:04:09,620\nUsing the credentials you used\nto login to [INAUDIBLE] center.\n\n80\n00:04:09,620 --> 00:04:12,420\nSo when you press enter,\nit'll drop you right to a command prompt.\n\n81\n00:04:12,420 --> 00:04:14,840\nSince I logged into XenCenter as root,.\n\n82\n00:04:14,840 --> 00:04:17,200\nIt's taken me to a command prompt here,\nas root.\n\n83\n00:04:17,200 --> 00:04:18,430\nIf I do a who am I.\n\n84\n00:04:18,430 --> 00:04:20,640\nI can see I am logged in as root.\n\n85\n00:04:20,640 --> 00:04:21,470\nAll right.\n\n86\n00:04:21,470 --> 00:04:26,540\nSo this is one way that I can get at\nthe console and start to run commands.\n\n87\n00:04:26,540 --> 00:04:30,760\nAnd you'll see there's that XE command,\nthat I was talking about.\n\n88\n00:04:30,760 --> 00:04:32,650\nAnd all of it's various modifiers.\n\n89\n00:04:32,650 --> 00:04:36,160\nAnd there's also the XS console command,\n\n90\n00:04:36,160 --> 00:04:40,080\nwhich is a pretty cool one because\nit gives you a pseudo-GUI.\n\n91\n00:04:40,080 --> 00:04:43,840\nIt's kind of a graphical user interface,\nbut it's really rendered in text for\n\n92\n00:04:43,840 --> 00:04:47,630\nyou to get in and\nwork with the server very basically.\n\n93\n00:04:47,630 --> 00:04:50,300\nSimple network stuff and so on.\n\n94\n00:04:50,300 --> 00:04:51,760\nAll right.\n\n95\n00:04:51,760 --> 00:04:53,850\nWell, the problem here is to get to it.\n\n96\n00:04:53,850 --> 00:04:56,762\nWe had to use the GUI so\nwhat if I don't have XenCenter.\n\n97\n00:04:56,762 --> 00:05:01,320\nWell, these servers,\nthey are running Linux.\n\n98\n00:05:01,320 --> 00:05:05,570\nAnd they've got SSH turned on\nby default in the background.\n\n99\n00:05:05,570 --> 00:05:07,750\nSo we can just SSH into these boxes.\n\n100\n00:05:07,750 --> 00:05:09,986\nWe don't need XenCenter at all.\n\n101\n00:05:09,986 --> 00:05:11,510\nI can minimize that.\n\n102\n00:05:11,510 --> 00:05:14,540\nAnd I'll just fire up an SSH client,\nI'm gonna use PuTTY.\n\n103\n00:05:14,540 --> 00:05:18,370\nIf you're on Linux or OS/X,\nyou've got SSH natively.\n\n104\n00:05:18,370 --> 00:05:19,120\nYou don't need a client.\n\n105\n00:05:19,120 --> 00:05:21,700\nBut on Windows we can get\nsomething like PuTTY.\n\n106\n00:05:21,700 --> 00:05:23,690\nAnd I can punch in that IP.\n\n107\n00:05:25,520 --> 00:05:28,820\nAnd so I'm gonna punch in\nthe IP of one of my servers.\n\n108\n00:05:28,820 --> 00:05:30,660\nAnd I'm just using SSH to connect.\n\n109\n00:05:30,660 --> 00:05:34,240\nAnd when we connect it's\ngonna ask who I am.\n\n110\n00:05:34,240 --> 00:05:36,640\nNow right now I only have\none user which was root.\n\n111\n00:05:38,840 --> 00:05:41,380\nAnd I'll log in with that user.\n\n112\n00:05:41,380 --> 00:05:42,590\nAnd here I am.\n\n113\n00:05:42,590 --> 00:05:45,820\nNow I'm accessing the command shelf for\nthat server.\n\n114\n00:05:45,820 --> 00:05:48,170\nFor that XenServer host.\n\n115\n00:05:48,170 --> 00:05:49,170\nNow I can start to work with it.\n\n116\n00:05:49,170 --> 00:05:50,350\nAnd I don't need XenCenter.\n\n117\n00:05:50,350 --> 00:05:52,600\nI don't need the graphical user interface.\n\n118\n00:05:52,600 --> 00:05:55,430\nIn fact, I can run xxconsole.\n\n119\n00:05:55,430 --> 00:05:59,910\nYour SSH aren't normally going\nto support the high NC text\n\n120\n00:05:59,910 --> 00:06:03,130\nthat we saw a moment ago but\nyou can still run the console.\n\n121\n00:06:03,130 --> 00:06:04,860\nIt just won't be as super pretty.\n\n122\n00:06:04,860 --> 00:06:05,650\nAnd you can get in here.\n\n123\n00:06:05,650 --> 00:06:09,530\nAnd you can start to work\nwith it from a basic level.\n\n124\n00:06:09,530 --> 00:06:13,250\nYou can't create a virtual machine\nfrom this little graphical menu.\n\n125\n00:06:13,250 --> 00:06:16,930\nBut if you've done something crazy,\nlike hosed up your network configuration,\n\n126\n00:06:16,930 --> 00:06:19,110\nyou can go to Network and\nManagement Interface.\n\n127\n00:06:19,110 --> 00:06:21,250\nAnd you can fix who\nthe management interface is.\n\n128\n00:06:21,250 --> 00:06:24,290\nOr you can do an emergency network reset.\n\n129\n00:06:24,290 --> 00:06:27,420\nThat's really useful in the event\nthat your network configuration\n\n130\n00:06:27,420 --> 00:06:29,000\njust gets totally host.\n\n131\n00:06:29,000 --> 00:06:32,680\nThat can happen if you have a cluster\nwhere your network cards don't match from\n\n132\n00:06:32,680 --> 00:06:33,520\nserver to server.\n\n133\n00:06:33,520 --> 00:06:35,120\nYou can kind of mess things up.\n\n134\n00:06:35,120 --> 00:06:35,840\nSo you can get in and\n\n135\n00:06:35,840 --> 00:06:41,190\nkinda work with some of that right\nfrom here in a pseudo-GUI, right?\n\n136\n00:06:41,190 --> 00:06:43,540\nBut like I said it doesn't\ngive you everything.\n\n137\n00:06:43,540 --> 00:06:44,660\nYou can do backups.\n\n138\n00:06:44,660 --> 00:06:45,960\nYou can pull up tech support.\n\n139\n00:06:45,960 --> 00:06:47,560\nYou can reboot or shutdown.\n\n140\n00:06:47,560 --> 00:06:50,050\nYou cannot create virtual machines.\n\n141\n00:06:50,050 --> 00:06:52,530\nSo there are limits to what we can do.\n\n142\n00:06:52,530 --> 00:06:54,550\nSo if we go here to virtual machines,\n\n143\n00:06:54,550 --> 00:06:57,730\nyou'll see where I can see\nthe virtual machines, right.\n\n144\n00:06:57,730 --> 00:07:01,280\nSo I can see that my ones that are running\nright here, but that's about it.\n\n145\n00:07:01,280 --> 00:07:02,890\nI can't create new ones.\n\n146\n00:07:02,890 --> 00:07:06,260\nAnd if I try and perform an action.\n\n147\n00:07:06,260 --> 00:07:09,780\nYou'll see my actions\nare somewhat limited to migrate,\n\n148\n00:07:09,780 --> 00:07:13,170\nshut down, reboot, and\nforce shut down, all right.\n\n149\n00:07:13,170 --> 00:07:14,940\nBut you do have that ability\nto work with some of this.\n\n150\n00:07:18,561 --> 00:07:19,240\nWhoops!\n\n151\n00:07:19,240 --> 00:07:20,610\nThat's not what I wanted.\n\n152\n00:07:20,610 --> 00:07:23,260\nAll right.\nNow, I'm doing this here [LAUGH] I keep\n\n153\n00:07:23,260 --> 00:07:24,140\nchoosing the wrong thing.\n\n154\n00:07:24,140 --> 00:07:25,140\nWe'll see how many times I do that.\n\n155\n00:07:25,140 --> 00:07:26,050\nThere!\n\n156\n00:07:26,050 --> 00:07:28,400\nI'm doing this from\nPuTTY on a Windows box.\n\n157\n00:07:28,400 --> 00:07:30,400\nIf I were to take a look at, like my.\n\n158\n00:07:30,400 --> 00:07:32,450\nThis is OSX, right here.\n\n159\n00:07:32,450 --> 00:07:34,460\nI could just fire up a standard console.\n\n160\n00:07:39,470 --> 00:07:42,220\nAnd basically SSH right\ninto that same server.\n\n161\n00:07:46,600 --> 00:07:48,490\nAnd get that same type of access, right.\n\n162\n00:07:48,490 --> 00:07:49,950\nSo I just didn't need a client for it.\n\n163\n00:07:49,950 --> 00:07:51,600\nIt's already got it built-in.\n\n164\n00:07:51,600 --> 00:07:52,940\nAnd so I can get in here.\n\n165\n00:07:52,940 --> 00:07:55,500\nAnd fire it up.\n\n166\n00:07:55,500 --> 00:07:57,228\nAnd you know start to do work.\n\n167\n00:07:57,228 --> 00:08:00,376\nYou'll see this one, PuTTY had\nthe limitation of the MC display.\n\n168\n00:08:00,376 --> 00:08:01,082\nBut this one doesn't.\n\n169\n00:08:01,082 --> 00:08:02,960\nSo this one actually shows it correctly.\n\n170\n00:08:02,960 --> 00:08:06,136\nSo I can go in and I can see,\nI can work with stuff and\n\n171\n00:08:06,136 --> 00:08:08,198\nget things done on that server.\n\n172\n00:08:08,198 --> 00:08:13,090\nAll right, now, once we connect in this\nway, once we connect into the shell,\n\n173\n00:08:13,090 --> 00:08:14,720\nwhat do we do from there?\n\n174\n00:08:14,720 --> 00:08:17,310\nThat XS console command is cool.\n\n175\n00:08:17,310 --> 00:08:21,670\nIt's a pseudo-GUI, but\nwe can't really get a lot of work done.\n\n176\n00:08:21,670 --> 00:08:26,760\nIf you wanna get real work done, you're\ngonna be using the XE command, all right.\n\n177\n00:08:26,760 --> 00:08:29,620\nNow you actually have all the various\nLinux commands available.\n\n178\n00:08:29,620 --> 00:08:34,980\nIf you look, this is my XenServer.\n\n179\n00:08:34,980 --> 00:08:38,519\nAnd if I do a u-name to see\nwhat version of Unix or\n\n180\n00:08:38,519 --> 00:08:43,046\nLinux that I'm running,\nI can see that it is running Linux.\n\n181\n00:08:43,046 --> 00:08:48,757\nAnd it tells me GNU/Linux and\nthe kernel version 2.6.32.\n\n182\n00:08:48,757 --> 00:08:53,297\nBut I know it's running Red Hat,\nbecause you can do a, there,\n\n183\n00:08:53,297 --> 00:08:57,155\nevery time you have a Red Hat\nbased operating system,\n\n184\n00:08:57,155 --> 00:09:00,948\nit creates a file called\n/etc/redhat-release.\n\n185\n00:09:00,948 --> 00:09:02,920\nThat's one way that you can spot that.\n\n186\n00:09:02,920 --> 00:09:07,681\nAnd I can see this one's running, it says\nXenServer release 6.2 Xen Enterprise, but\n\n187\n00:09:07,681 --> 00:09:10,850\nit is the Red Hat Linux\noperating system underneath.\n\n188\n00:09:10,850 --> 00:09:12,820\nSo all the commands you\nwould expect to have,\n\n189\n00:09:12,820 --> 00:09:16,150\nthat would be a part of a regular\nLinux distro, they're here.\n\n190\n00:09:16,150 --> 00:09:18,200\nThey're here as a part of this one too.\n\n191\n00:09:18,200 --> 00:09:20,720\nAnd so you can work with that if you want.\n\n192\n00:09:20,720 --> 00:09:24,610\nBut, Citrix has scaled down this OS so\nmuch,\n\n193\n00:09:24,610 --> 00:09:27,630\nthey've stripped out so\nmuch stuff that you don't need,\n\n194\n00:09:27,630 --> 00:09:31,240\nthat there really shouldn't be much\nthat you need to do the underlying OS.\n\n195\n00:09:31,240 --> 00:09:36,000\nIn fact, when you drop to the shell like\nthis, the only commands you should run\n\n196\n00:09:36,000 --> 00:09:39,870\nshould be the xsconsole command if\nyou want to access that interface, or\n\n197\n00:09:39,870 --> 00:09:41,070\nthe xe command.\n\n198\n00:09:41,070 --> 00:09:43,499\nYou really shouldn't run any of\nthe Linux commands unless you know what\n\n199\n00:09:43,499 --> 00:09:44,075\nyou're doing.\n\n200\n00:09:44,075 --> 00:09:47,225\nIf you're modifying INIT scripts or\nwhatever and you know what you're doing,\n\n201\n00:09:47,225 --> 00:09:48,080\nthen you can do that.\n\n202\n00:09:48,080 --> 00:09:52,500\nBut otherwise, you should never\nhave to modify the underlying OS.\n\n203\n00:09:52,500 --> 00:09:55,550\nAll right, now what are some of the things\nthat we can do with the xe command?\n\n204\n00:09:55,550 --> 00:09:58,180\nWell, there's all sorts of cool stuff.\n\n205\n00:09:58,180 --> 00:09:58,723\nFirst off,\n\n206\n00:09:58,723 --> 00:10:02,320\nthe majority of the things we're gonna\ndo are gonna deal with our VMs, right?\n\n207\n00:10:02,320 --> 00:10:06,340\nStarting a virtual machine,\nstopping one, creating one, and so on.\n\n208\n00:10:06,340 --> 00:10:10,450\nWhen we work from the command line,\nevery virtual machine, and\n\n209\n00:10:10,450 --> 00:10:16,400\nevery virtual disk, virtual network card,\nevery storage repository,\n\n210\n00:10:16,400 --> 00:10:21,690\nthey all have UUIDs,\nUniversally Unique Identifiers.\n\n211\n00:10:21,690 --> 00:10:24,830\nSo these nice little ID numbers\nthat are kind of long, and\n\n212\n00:10:24,830 --> 00:10:26,330\nthey identify each element.\n\n213\n00:10:26,330 --> 00:10:30,100\nSo if we're gonna work with a system, we\nhave to figure out what those UUIDs are.\n\n214\n00:10:30,100 --> 00:10:34,900\nSo one of the first commands I run when\nI sit down on a server is xe vm-list,\n\n215\n00:10:34,900 --> 00:10:36,481\nall right?\n\n216\n00:10:36,481 --> 00:10:41,860\nxe vm-list will give you a list of the\nvirtual machines that are on that system.\n\n217\n00:10:41,860 --> 00:10:46,542\nAnd what you can see in here is\nthe name of the virtual machine, so\n\n218\n00:10:46,542 --> 00:10:51,850\nhere's ITPROTV2-WEB02, and\nthe UID that's associated with it.\n\n219\n00:10:51,850 --> 00:10:55,180\nSo right there I can see the UUID\nthat references this machine.\n\n220\n00:10:56,270 --> 00:10:59,730\nSome commands that we run allow\nus to specify the name label,\n\n221\n00:10:59,730 --> 00:11:02,080\nthe actual name of the virtual machine.\n\n222\n00:11:02,080 --> 00:11:04,090\nOther ones require us to use the UUID.\n\n223\n00:11:04,090 --> 00:11:07,472\nSo this how we get it, here's how we can\nfind that UUID to work with the system,\n\n224\n00:11:07,472 --> 00:11:09,260\nall right.\n\n225\n00:11:09,260 --> 00:11:14,350\nIf I want help with a command,\nI can run xe help, and then the command.\n\n226\n00:11:14,350 --> 00:11:18,760\nSo xe help vm-list would give\nme the help screen for that.\n\n227\n00:11:18,760 --> 00:11:21,820\nAnd I can see the various parameters and\nmodifiers for that.\n\n228\n00:11:21,820 --> 00:11:24,380\nYou'll see here I got quite\na bit of information back.\n\n229\n00:11:26,400 --> 00:11:29,937\nSometimes it's useful to pipe that\ninto the more command so it'll fit,\n\n230\n00:11:29,937 --> 00:11:31,170\noh, I guess I got it all.\n\n231\n00:11:31,170 --> 00:11:34,220\nSo you can see all the different ones\nthat we can do there on vm-list.\n\n232\n00:11:34,220 --> 00:11:36,950\nIt's all sorts of filters and\nthings of that nature.\n\n233\n00:11:36,950 --> 00:11:41,327\nIf I was just looking for a specific\nVM I could modify this to look for\n\n234\n00:11:41,327 --> 00:11:42,509\njust that one VM.\n\n235\n00:11:42,509 --> 00:11:44,470\nBut vm-list, pretty useful.\n\n236\n00:11:45,610 --> 00:11:48,740\nAll right, some of the other things,\nstorage repositories,\n\n237\n00:11:48,740 --> 00:11:50,390\nwe might need to work with those.\n\n238\n00:11:50,390 --> 00:11:54,660\nAnd so sr-list to be able to\nsee the storage repositories.\n\n239\n00:11:54,660 --> 00:11:59,400\nAnd so I can see here my local storage,\nmy ISO library, my physical drives.\n\n240\n00:11:59,400 --> 00:12:05,070\nAnd if I keep looking I can\nspot things like my iSCSI\n\n241\n00:12:05,070 --> 00:12:08,690\nvirtual storage right here, each of those.\n\n242\n00:12:08,690 --> 00:12:13,500\nAnd again, what I'm usually looking for\nhere is the UUID, this number.\n\n243\n00:12:13,500 --> 00:12:15,890\nCuz if we're gonna work with them,\nwill need to know that UUID.\n\n244\n00:12:19,110 --> 00:12:22,660\nYou know, it is next to impossible for\nme to see my cursor here.\n\n245\n00:12:22,660 --> 00:12:27,962\nI'm gonna switch to\nthat other window here.\n\n246\n00:12:30,053 --> 00:12:32,072\nBecause on this one, I can see my cursor.\n\n247\n00:12:32,072 --> 00:12:35,458\n[LAUGH] All right,\n\n248\n00:12:35,458 --> 00:12:39,092\nso what are some other commands that\nwe might run while we're in here?\n\n249\n00:12:39,092 --> 00:12:40,532\nWell, there's all sorts of things.\n\n250\n00:12:42,306 --> 00:12:43,570\nLet me just blow that up a bit, there.\n\n251\n00:12:44,770 --> 00:12:47,140\nSo there's all sorts of things that\nwe might run while we're in here.\n\n252\n00:12:47,140 --> 00:12:49,530\nLet's say we wanna create\na new virtual machine.\n\n253\n00:12:49,530 --> 00:12:52,860\nSo I wanna whip up a new VM for\nmy system, all right?\n\n254\n00:12:52,860 --> 00:12:59,090\nSo I could say xe vm-install, letting it\nknow that I'm gonna create a new one.\n\n255\n00:12:59,090 --> 00:13:02,000\nAnd then I can specify basically\nthe information I'd specify in the wizard.\n\n256\n00:13:02,000 --> 00:13:04,310\nWhen we run through the wizard,\nthink about what you provide, right?\n\n257\n00:13:04,310 --> 00:13:05,720\nYou provide a name for the machine.\n\n258\n00:13:05,720 --> 00:13:07,590\nYou have to pick a template first.\n\n259\n00:13:07,590 --> 00:13:09,050\nSo I can do that same thing.\n\n260\n00:13:09,050 --> 00:13:10,310\nI can specify the template.\n\n261\n00:13:11,460 --> 00:13:14,100\nAnd we have to know the template name,\n\n262\n00:13:15,830 --> 00:13:19,720\nwhich you can pull out of the GUI or\nthe XenServer documentation.\n\n263\n00:13:19,720 --> 00:13:22,720\nSo I'm gonna create a CentOS box.\n\n264\n00:13:22,720 --> 00:13:28,780\nAnd then we can specify a name-label,\nso what we're gonna call it.\n\n265\n00:13:28,780 --> 00:13:34,590\nSo maybe this'll be my ITPROTV2-,\nwhat'll this one be?\n\n266\n00:13:34,590 --> 00:13:37,827\nMaybe like WEB05, all right.\n\n267\n00:13:37,827 --> 00:13:42,679\nAnd let me get out of full screen so\nmy head doesn't sit on top of this one.\n\n268\n00:13:46,186 --> 00:13:49,710\nAll right, my command's gonna\nwrap around a little bit there.\n\n269\n00:13:49,710 --> 00:13:50,590\nSo I've specified so\n\n270\n00:13:50,590 --> 00:13:54,490\nfar what template to use and\nwhat name to give the virtual machine.\n\n271\n00:13:54,490 --> 00:13:56,110\nAnd so now I just need to\ngive it a little bit more.\n\n272\n00:13:56,110 --> 00:13:58,380\nI need to know which storage\nrepository to put this in.\n\n273\n00:13:58,380 --> 00:14:01,450\nNow, here's where I'm gonna\nhave a problem because\n\n274\n00:14:01,450 --> 00:14:04,720\nI need to know the storage\nrepository's UUID, right?\n\n275\n00:14:04,720 --> 00:14:06,380\nWhere to put this thing.\n\n276\n00:14:06,380 --> 00:14:10,070\nAnd I don't know my storage\n[LAUGH] repository's UUID.\n\n277\n00:14:10,070 --> 00:14:14,240\nSo if I can get it, which I still have it\non this screen so I'll get it from here.\n\n278\n00:14:14,240 --> 00:14:19,555\nBut we'd normally need to start out\nwith that command, the sr-list,\n\n279\n00:14:19,555 --> 00:14:23,740\nto figure out what the storage\nrepository's UUID was.\n\n280\n00:14:23,740 --> 00:14:24,500\nBut I'll just get it from there.\n\n281\n00:14:24,500 --> 00:14:27,340\nAnd I'll paste it in.\n\n282\n00:14:27,340 --> 00:14:29,240\nDefinitely not a number you can remember.\n\n283\n00:14:30,730 --> 00:14:32,250\nAnd then let's see, what else do we need?\n\n284\n00:14:32,250 --> 00:14:33,190\nI think that's really about it.\n\n285\n00:14:33,190 --> 00:14:35,110\nThat should be enough to get it started.\n\n286\n00:14:35,110 --> 00:14:38,690\nAnd so I'll run that, and\nthat should create a new virtual machine.\n\n287\n00:14:38,690 --> 00:14:42,335\nAnd you'll know it's successful if it\ngives you a display that looks like this.\n\n288\n00:14:42,335 --> 00:14:45,325\nThat's the UUID for\nthe virtual machine it just made.\n\n289\n00:14:45,325 --> 00:14:49,245\nSo it just made me a virtual machine and\nit's got that UUID, right.\n\n290\n00:14:50,395 --> 00:14:52,934\nI can verify it worked by\nlooking back in my XenCenter.\n\n291\n00:14:52,934 --> 00:14:55,292\nI should now have a WEB05.\n\n292\n00:14:55,292 --> 00:14:57,012\nThere it is right there.\n\n293\n00:14:57,012 --> 00:15:00,032\nSo it created WEB05,\nit used the CentOS template.\n\n294\n00:15:00,032 --> 00:15:04,178\nIf I look at my storage, it created it on\nthe iSCSI shared storage for my system.\n\n295\n00:15:04,178 --> 00:15:06,182\nIt's done, it's there.\n\n296\n00:15:06,182 --> 00:15:07,820\nWell, I say it's done.\n\n297\n00:15:07,820 --> 00:15:09,450\nThere's a few things that are missing.\n\n298\n00:15:09,450 --> 00:15:12,060\nFor example, there's no network adapters.\n\n299\n00:15:12,060 --> 00:15:13,470\nThat's gonna be a problem.\n\n300\n00:15:13,470 --> 00:15:16,150\nAlso, it never installed\nan operating system,\n\n301\n00:15:16,150 --> 00:15:17,890\nthere's no OS loaded on this thing.\n\n302\n00:15:17,890 --> 00:15:20,550\nSo I can't boot it the way that it is.\n\n303\n00:15:20,550 --> 00:15:23,299\nSo I need to do a little bit\nmore clean-up work, all right?\n\n304\n00:15:23,299 --> 00:15:25,440\nI need to attach a network to it.\n\n305\n00:15:25,440 --> 00:15:29,850\nI need to pop an install disk into it and\ndo the install and\n\n306\n00:15:29,850 --> 00:15:34,210\nsome of that last little kinda bits\nto get things done, all right?\n\n307\n00:15:34,210 --> 00:15:37,214\nSo let's see an example of that.\n\n308\n00:15:37,214 --> 00:15:41,976\nAll right, if I want to attach a network,\nI probably need to do a xe network-list so\n\n309\n00:15:41,976 --> 00:15:44,720\nI can figure out which network is which.\n\n310\n00:15:44,720 --> 00:15:48,920\nAnd when you look at the networks, you'll\nnotice that it creates these bridges.\n\n311\n00:15:48,920 --> 00:15:51,958\nThese are virtual bridges, you have\nvirtual switches that are attaching\n\n312\n00:15:51,958 --> 00:15:54,630\nthe virtual network to your\nphysical network adapters.\n\n313\n00:15:54,630 --> 00:15:58,120\nSo I'm looking for\nthe ITProTV studio network, there it is.\n\n314\n00:15:58,120 --> 00:16:01,021\nI can see the UUID for it, right there.\n\n315\n00:16:01,021 --> 00:16:03,386\nI can use that to attach\nit to my virtual machine.\n\n316\n00:16:03,386 --> 00:16:08,588\nI can say xe VIF which is\nthe virtual interface.\n\n317\n00:16:08,588 --> 00:16:15,510\nSo this create, and I can then specify\nthe VM that I am gonna work with.\n\n318\n00:16:17,672 --> 00:16:20,790\nAll right, and\nI copy it to the id a moment ago.\n\n319\n00:16:20,790 --> 00:16:24,430\nAnd then I can specify the network\nthat I want to attach it to,\n\n320\n00:16:26,330 --> 00:16:28,210\nwhich I am gonna copy right from up here.\n\n321\n00:16:35,668 --> 00:16:36,585\nAll right.\n\n322\n00:16:36,585 --> 00:16:39,850\nAnd then I just need to say like,\nthe MAC address.\n\n323\n00:16:39,850 --> 00:16:42,320\nOr I can say random if I want\nit to generate it for me.\n\n324\n00:16:42,320 --> 00:16:43,800\nThat's what we normally want.\n\n325\n00:16:43,800 --> 00:16:47,360\nAnd then you can have more\nthan one network adapter.\n\n326\n00:16:47,360 --> 00:16:48,760\nSo, I'm going to say device equals zero.\n\n327\n00:16:48,760 --> 00:16:50,950\nThis is going to be\nthe first network adapter.\n\n328\n00:16:50,950 --> 00:16:52,170\nIf one already exists,\n\n329\n00:16:52,170 --> 00:16:54,450\nthen the setting that I specify here\nis going to replace what's there.\n\n330\n00:16:54,450 --> 00:16:57,910\nThat's going to create that\nnetwork adapter and set it.\n\n331\n00:16:57,910 --> 00:17:01,770\nAnd again, I can verify that it\nworked by taking a look in here and\n\n332\n00:17:01,770 --> 00:17:05,620\nnow, I've got an adapter where\nthere wasn't one a moment ago.\n\n333\n00:17:05,620 --> 00:17:08,138\nAll right, so now I've got\na network adaptor, so that's cool.\n\n334\n00:17:08,138 --> 00:17:12,360\n[LAUGH] All right, the next thing\nI need to do is get it ready for\n\n335\n00:17:12,360 --> 00:17:13,440\ninstalling an operating system.\n\n336\n00:17:13,440 --> 00:17:19,530\nNow normally I'd mount an ISO,\nI would just go into storage here, and\n\n337\n00:17:19,530 --> 00:17:24,540\ncreate a DVD drive, and attach the ISO\nto it and kind of go from there.\n\n338\n00:17:24,540 --> 00:17:29,980\nThat's kind of our normal way, so\nwe go right here and pick the ISO.\n\n339\n00:17:29,980 --> 00:17:32,190\nBut I want to show you guys something\nkinda neat that I like to do.\n\n340\n00:17:32,190 --> 00:17:36,600\nYou might not have the ISO handy, or\nyou might just want to use the latest and\n\n341\n00:17:36,600 --> 00:17:39,890\ngreatest, and\nnot necessarily have it downloaded.\n\n342\n00:17:39,890 --> 00:17:42,900\nSo you can actually tell it to install\nLinux straight from the internet\n\n343\n00:17:42,900 --> 00:17:44,490\nif you want, from an internet repository.\n\n344\n00:17:45,540 --> 00:17:47,480\nSo let me show you that, it's kinda neat.\n\n345\n00:17:47,480 --> 00:17:51,920\nWhat we can do is we can say,\nxe vm-param.set.\n\n346\n00:17:51,920 --> 00:17:56,330\nThat allows us to set, well, parameters.\n\n347\n00:17:56,330 --> 00:18:00,110\nSome of the boot parameters, and\nother information about a virtual machine.\n\n348\n00:18:00,110 --> 00:18:03,120\nAnd what I wanna use is\na couple of things here.\n\n349\n00:18:03,120 --> 00:18:05,770\nI need to say uuid= and\nspecify which VM it is.\n\n350\n00:18:05,770 --> 00:18:10,710\nAnd so\nI'm just gonna copy that from right here.\n\n351\n00:18:13,910 --> 00:18:14,450\nAll right?\n\n352\n00:18:14,450 --> 00:18:17,250\nSo that it knows which virtual machine\nit is that I'm about to modify.\n\n353\n00:18:17,250 --> 00:18:27,630\nAnd then the value that I wanna modify\nis the other-config:install-repository.\n\n354\n00:18:27,630 --> 00:18:28,150\nAll right.\n\n355\n00:18:28,150 --> 00:18:30,260\nNow how did I know that existed?\n\n356\n00:18:30,260 --> 00:18:31,150\nI read the book, right.\n\n357\n00:18:31,150 --> 00:18:34,240\nThere's a Zen server administration\nguide on Citrix's website.\n\n358\n00:18:34,240 --> 00:18:35,620\nYou can download it for free.\n\n359\n00:18:35,620 --> 00:18:38,990\nYou know, I'll try and post a link with\nthis episode, when it gets posted online.\n\n360\n00:18:38,990 --> 00:18:40,990\nIt's got these commands in there.\n\n361\n00:18:40,990 --> 00:18:43,540\nSo it's pretty handy to\npull them from there.\n\n362\n00:18:43,540 --> 00:18:45,440\nIt is because, its not intuitive.\n\n363\n00:18:45,440 --> 00:18:48,870\nBut, I was gonna say right here,\nto install repository and\n\n364\n00:18:48,870 --> 00:18:51,810\nthen I am gonna specify where\nI want to pull it from.\n\n365\n00:18:51,810 --> 00:18:56,410\nI am gonna point out to the web,\nI could point right to sent to Os, but\n\n366\n00:18:56,410 --> 00:18:59,220\ni like to use a mirror that\nis not too far from here.\n\n367\n00:18:59,220 --> 00:19:01,210\nSo I am gonna use the university\nof South Florida.\n\n368\n00:19:04,200 --> 00:19:07,200\nAnd I'm just going to point\nright to their server,\n\n369\n00:19:07,200 --> 00:19:09,560\nwhere they maintain a copy of CentOS.\n\n370\n00:19:16,270 --> 00:19:18,700\nSo, I'm pointing to that URL,\n\n371\n00:19:18,700 --> 00:19:21,290\nsaying I'm not going to put\na ISO in here to do the install.\n\n372\n00:19:21,290 --> 00:19:25,590\nWhen I do the install,\nI want to do it from this URL instead.\n\n373\n00:19:25,590 --> 00:19:28,310\nAnd so I just punched that in,\nso now it knows where to go and\n\n374\n00:19:28,310 --> 00:19:31,210\nget the installation files for\nthis system, all right?\n\n375\n00:19:32,410 --> 00:19:34,830\nAnd then after that,\nwe can just start the VM.\n\n376\n00:19:34,830 --> 00:19:36,310\nWe can say xe vm-start.\n\n377\n00:19:36,310 --> 00:19:41,720\nAnd we can specify the UUID\nthat we wanna start.\n\n378\n00:19:41,720 --> 00:19:44,600\nI'll paste that one in there,\nand there we go.\n\n379\n00:19:44,600 --> 00:19:47,980\nSo it's gonna try and start that virtual\nmachine up, it's gonna turn it on,\n\n380\n00:19:47,980 --> 00:19:50,850\nand it should launch into\nthe installer and go from there.\n\n381\n00:19:50,850 --> 00:19:53,680\nNow I obviously for\nlike Windows, you can't do that.\n\n382\n00:19:53,680 --> 00:19:57,100\nYou can install from a network\nrepository cuz it's proprietary, so\n\n383\n00:19:57,100 --> 00:19:59,090\nthey want you to install from that disc.\n\n384\n00:19:59,090 --> 00:20:02,900\nOr you can boot from your network adaptor,\nyou can do it that way as another way.\n\n385\n00:20:02,900 --> 00:20:04,820\nBut with Linux it can\nactually pull those files.\n\n386\n00:20:04,820 --> 00:20:05,940\nNow this is gonna take a little while,\n\n387\n00:20:05,940 --> 00:20:08,140\ncuz it is actually reaching\nout to that server.\n\n388\n00:20:08,140 --> 00:20:11,020\nSo it may or\nmay not finish during this show.\n\n389\n00:20:11,020 --> 00:20:13,610\nBut the virtual machine\nis actually started.\n\n390\n00:20:13,610 --> 00:20:15,790\nI see Web05 is started there, and\n\n391\n00:20:15,790 --> 00:20:18,630\nnow it's starting to move through and\nkind of do it's work.\n\n392\n00:20:18,630 --> 00:20:20,380\nI see the DVD drive is still empty.\n\n393\n00:20:20,380 --> 00:20:24,340\nBut that' s okay, cuz it should reach out\nover the network and start that install.\n\n394\n00:20:25,592 --> 00:20:29,090\nAll right, there are some other things\nthat we can do from the command line, and\n\n395\n00:20:29,090 --> 00:20:29,750\nreally anything.\n\n396\n00:20:29,750 --> 00:20:34,040\nAnything you can think of here in the GUI,\nwe can do from the command line.\n\n397\n00:20:34,040 --> 00:20:39,050\nLet's say for example, i don't know,\nmaybe this MySQL server here, right?\n\n398\n00:20:39,050 --> 00:20:42,340\nThis is ITproTV2-MySQL02, all right?\n\n399\n00:20:42,340 --> 00:20:48,430\nMaybe I wanna migrate that, and\nmove it over to server one over here.\n\n400\n00:20:48,430 --> 00:20:51,090\nOr, you know let me find a server\nthat doesn't have a lot of memory.\n\n401\n00:20:51,090 --> 00:20:52,970\nSeems like I have got one that\ndoesn't have a ton of memory.\n\n402\n00:20:54,120 --> 00:20:57,574\nWell, actually, most of these do seem\nto have a lot of memory, don't they?\n\n403\n00:20:57,574 --> 00:20:59,340\n[LAUGH] Here we go, WEB04.\n\n404\n00:20:59,340 --> 00:21:00,690\nI'll move WEB04.\n\n405\n00:21:00,690 --> 00:21:03,950\nOh, no I won't, it's local storage.\n\n406\n00:21:03,950 --> 00:21:06,630\nAll right,\nlet me go to the original plan, my SQL02.\n\n407\n00:21:06,630 --> 00:21:11,260\nSo I want to live migrate that\nfrom server two, to server one.\n\n408\n00:21:11,260 --> 00:21:15,370\nAll right, well I can live migrate\nit right here from the GUI.\n\n409\n00:21:15,370 --> 00:21:17,250\nSo, I've got that option.\n\n410\n00:21:17,250 --> 00:21:19,870\nOh, there's not enough free\nmemory on the other server.\n\n411\n00:21:19,870 --> 00:21:21,150\nLet me go the other way then.\n\n412\n00:21:21,150 --> 00:21:22,250\nMaybe we'll take MySQL, yeah.\n\n413\n00:21:24,100 --> 00:21:24,600\nYeah.\n\n414\n00:21:24,600 --> 00:21:26,540\nSo I can migrate it over to server two.\n\n415\n00:21:26,540 --> 00:21:27,370\nRight.\n\n416\n00:21:27,370 --> 00:21:29,490\nOr I can do that from the command line.\n\n417\n00:21:29,490 --> 00:21:32,620\nSo if I wanna do that from the command\nline, it looks something like this.\n\n418\n00:21:32,620 --> 00:21:36,120\nIt's XEVM dash migrate, and\n\n419\n00:21:36,120 --> 00:21:41,950\nthen we can specify Live equals true,\nwhich just means don't reboot it.\n\n420\n00:21:41,950 --> 00:21:43,960\nRight?\nGo ahead and synchronize memory, and\n\n421\n00:21:43,960 --> 00:21:46,270\nmove it over there,\nwithout rebooting the machine.\n\n422\n00:21:47,500 --> 00:21:50,970\nThis is one of the few commands\nthat's been updated to accept names,\n\n423\n00:21:50,970 --> 00:21:53,290\ninstead of UU IDs, so it's really nice.\n\n424\n00:21:53,290 --> 00:21:59,520\nI can specify the host that\nI want to send it to, and\n\n425\n00:21:59,520 --> 00:22:05,400\nI can specify the virtual machine\nby name instead of by UUID.\n\n426\n00:22:08,130 --> 00:22:09,200\nIf I can remember.\n\n427\n00:22:09,200 --> 00:22:12,129\nWas that my SQL01 All right.\n\n428\n00:22:12,129 --> 00:22:15,940\nOkay, so I'm saying, go ahead and\nlive migrate that machine.\n\n429\n00:22:15,940 --> 00:22:21,270\nAnd right now, I can see on server one,\nI've got my SQL 01.\n\n430\n00:22:21,270 --> 00:22:24,530\nWhen we run this command it\nshould migrate it to server two.\n\n431\n00:22:24,530 --> 00:22:26,080\nSo I'm gonna run that.\n\n432\n00:22:27,650 --> 00:22:30,420\nAnd if I jump back over here, I can see\n\n433\n00:22:30,420 --> 00:22:34,090\nI've got the yellow circle that lets me\nknow it's involved in migrating right now.\n\n434\n00:22:34,090 --> 00:22:41,080\nAnd if I go to my logs, I can see that\nit hasn't picked up in the logs yet.\n\n435\n00:22:41,080 --> 00:22:42,260\nEventually it'll show up in here.\n\n436\n00:22:42,260 --> 00:22:46,480\nIt'll show that it is migrating but\nif I jump back here, it's gonna wait.\n\n437\n00:22:46,480 --> 00:22:49,340\nIt'll give me a status update here\nletting me know that it's done.\n\n438\n00:22:49,340 --> 00:22:53,910\nSo if you want to schedule a migration,\nyou could just write a little script to\n\n439\n00:22:53,910 --> 00:22:57,420\ncall this command and\nschedule it with a [INAUDIBLE] job.\n\n440\n00:22:57,420 --> 00:22:59,060\nRight, and just have it run at 1 a.m.\n\n441\n00:22:59,060 --> 00:23:01,540\nOr whatever, and\nthen that migration will happen at 1 a.m.\n\n442\n00:23:01,540 --> 00:23:03,430\nThat's the kind of thing we\ncan do from the command line,\n\n443\n00:23:03,430 --> 00:23:04,930\nthat we can't do from the GUI.\n\n444\n00:23:05,940 --> 00:23:08,650\nSo, that's some pretty handy stuff there.\n\n445\n00:23:08,650 --> 00:23:11,710\nJust keep in mind,\nanything that you can do with the GUI,\n\n446\n00:23:11,710 --> 00:23:15,220\nyou can do from the command\nline using the xe command.\n\n447\n00:23:15,220 --> 00:23:18,180\nSo it's xe followed by whatever\nit is you're trying to do.\n\n448\n00:23:18,180 --> 00:23:21,769\nIt's like the shell almost, for\nhow we work with these servers.\n\n449\n00:23:23,950 --> 00:23:27,650\nAll right, and I'll post these\ncommands that I used during the show.\n\n450\n00:23:27,650 --> 00:23:30,450\nI'll post those with the episode,\nso you guys can have them.\n\n451\n00:23:30,450 --> 00:23:31,540\nI'll be honest with you guys.\n\n452\n00:23:31,540 --> 00:23:34,520\nI don't drop to the shell\nvery often on my ZenServers.\n\n453\n00:23:34,520 --> 00:23:36,200\nCuz you don't normally have to.\n\n454\n00:23:36,200 --> 00:23:38,000\nNormally the GUI does everything we need.\n\n455\n00:23:38,000 --> 00:23:41,260\nAnd it's only when I'm having problems,\nthat I'll drop to the shell and\n\n456\n00:23:41,260 --> 00:23:42,790\nstart to work in there.\n\n457\n00:23:42,790 --> 00:23:44,400\nOr if I'm trying to automate something.\n\n458\n00:23:44,400 --> 00:23:46,930\nSo it's not something we\ndo necessarily every day.\n\n459\n00:23:46,930 --> 00:23:48,270\nBut it may be something we need to do,\n\n460\n00:23:48,270 --> 00:23:50,100\njust through the course of\nworking with our servers.\n\n461\n00:23:52,230 --> 00:23:53,330\nAll right.\n\n462\n00:23:53,330 --> 00:23:56,648\nWell, why don't we stop here and\ntake a break while this one's migrating.\n\n463\n00:23:56,648 --> 00:23:58,110\nWe'll let it finish migrating.\n\n464\n00:23:58,110 --> 00:24:00,450\nAnd I've actually got that install\nrunning in the background also.\n\n465\n00:24:00,450 --> 00:24:01,746\nSo that's gonna take some time.\n\n466\n00:24:01,746 --> 00:24:04,672\nSo we'll let those run,\nand when we get back,\n\n467\n00:24:04,672 --> 00:24:07,460\nI wanna take a look at\nuser administration.\n\n468\n00:24:07,460 --> 00:24:09,990\nYou've probably noticed that I keep\nlogging in as root everywhere,\n\n469\n00:24:09,990 --> 00:24:11,520\nand that's not the greatest practice.\n\n470\n00:24:11,520 --> 00:24:15,268\nSo it would be nice if we could create\nsome user accounts for ourselves.\n\n471\n00:24:15,268 --> 00:24:19,020\nSo I wanna show you guys that, how we can\nimplement a little bit of security there,\n\n472\n00:24:19,020 --> 00:24:20,290\nand maintain better practices.\n\n473\n00:24:20,290 --> 00:24:23,659\nBut let's take a break, and we'll tackle\nthat when we get back, just stay tuned and\n\n474\n00:24:23,659 --> 00:24:24,619\nwe'll be back in a few.\n\n475\n00:24:24,619 --> 00:24:31,561\n[MUSIC]\n\n476\n00:24:31,561 --> 00:24:33,540\nAll right, welcome back everybody.\n\n477\n00:24:33,540 --> 00:24:38,170\nSo during the break, the migration\nfinish that we queued up, and\n\n478\n00:24:38,170 --> 00:24:41,420\nI went ahead and finished\nthe install of that virtual machine.\n\n479\n00:24:41,420 --> 00:24:46,410\nIt connected up out to the URL that\nI specified for install source, and\n\n480\n00:24:46,410 --> 00:24:47,520\nit finished installing.\n\n481\n00:24:47,520 --> 00:24:49,690\nThis is it booting for\nthe first time right here, so\n\n482\n00:24:49,690 --> 00:24:51,720\nit's gonna fire up and be happy.\n\n483\n00:24:51,720 --> 00:24:55,210\nSo those are some of the neat things that\nwe can do from the command line, but\n\n484\n00:24:55,210 --> 00:24:57,420\nI mentioned user accounts.\n\n485\n00:24:57,420 --> 00:25:01,720\nWhen I SSH'd into that device,\nI logged in as root.\n\n486\n00:25:01,720 --> 00:25:05,680\nSo anybody who knows that root\npassword can log in that way and\n\n487\n00:25:05,680 --> 00:25:07,600\nstart to make changes to the system.\n\n488\n00:25:07,600 --> 00:25:10,150\nThe problem is really two fold, right?\n\n489\n00:25:10,150 --> 00:25:15,465\nProblem number one is If everybody\nis sharing the same password and one\n\n490\n00:25:15,465 --> 00:25:19,145\nperson leaves and you need to change it,\neverybody has to relearn a new password.\n\n491\n00:25:19,145 --> 00:25:19,935\nIt's not very secure.\n\n492\n00:25:21,035 --> 00:25:24,770\nThe second problem is you don't\nreally have any accountability.\n\n493\n00:25:24,770 --> 00:25:28,350\nIf somebody makes a change, you can't\nfigure out who did it because everybody's\n\n494\n00:25:28,350 --> 00:25:30,550\nlogged in with the same account.\n\n495\n00:25:30,550 --> 00:25:32,540\nSo there's limitations to doing that.\n\n496\n00:25:32,540 --> 00:25:37,460\nJust having everybody login as root,\nit's just generally not a good idea.\n\n497\n00:25:37,460 --> 00:25:40,120\nOkay, so what can we do about that?\n\n498\n00:25:40,120 --> 00:25:43,860\nWell, in older versions of XenServer\nyou couldn't do much about it at all.\n\n499\n00:25:43,860 --> 00:25:45,740\nBut in Version 6.0 and\n\n500\n00:25:45,740 --> 00:25:50,390\nhigher we can now choose to join\nit to a Windows active directory.\n\n501\n00:25:50,390 --> 00:25:53,190\nAll right,\nyou'll notice on standalone servers.\n\n502\n00:25:53,190 --> 00:25:58,160\nSo if I go to like an individual server\nhere, that you've got a Users tab.\n\n503\n00:25:58,160 --> 00:26:03,050\nAnd right in here you can join it to\na domain, to an active directory domain\n\n504\n00:26:03,050 --> 00:26:06,730\nwhere we can then go in and\nparticipate and use our Windows accounts.\n\n505\n00:26:06,730 --> 00:26:09,960\nTo not only provide people access\nunder their own user name but\n\n506\n00:26:09,960 --> 00:26:13,965\nalso define in rules that limits\nwhat they are able to do.\n\n507\n00:26:13,965 --> 00:26:17,305\nSo, now each person can\nhave their on account and\n\n508\n00:26:17,305 --> 00:26:19,125\nthey can basically do in\nthe active record, so\n\n509\n00:26:19,125 --> 00:26:22,575\nthey can update the password whenever\nthey want, they get that flexibility.\n\n510\n00:26:22,575 --> 00:26:25,810\nAlright, now Remember this\nis kinda Windows centric and\n\n511\n00:26:25,810 --> 00:26:28,350\nthat's because Citrix they\nknow who their customer is.\n\n512\n00:26:28,350 --> 00:26:30,840\nThey're tailoring all of this\ntowards Windows environments.\n\n513\n00:26:30,840 --> 00:26:34,690\nSo that's why we don't see things\nlike just open LDAP authentication or\n\n514\n00:26:34,690 --> 00:26:36,180\nsomething of that nature.\n\n515\n00:26:36,180 --> 00:26:39,360\nAll right, now if we have a cluster\n\n516\n00:26:39,360 --> 00:26:43,320\nyou can actually do the join\nup here at the pool level two.\n\n517\n00:26:43,320 --> 00:26:44,460\nSo if I go up to the pool,\n\n518\n00:26:44,460 --> 00:26:49,620\nyou'll see that I have that same users tab\nthat I had down here on the server itself.\n\n519\n00:26:49,620 --> 00:26:52,900\nSo I'm gonna do it from up here at\nthe pool, and I'm gonna choose to join\n\n520\n00:26:52,900 --> 00:26:56,480\nthe domain, and it's gonna ask me\nwhat domain I want to join and\n\n521\n00:26:56,480 --> 00:26:59,050\nthat is a great question, I've already\nforgotten the name of my domain.\n\n522\n00:26:59,050 --> 00:27:01,290\nSo let me find that real quick.\n\n523\n00:27:03,180 --> 00:27:09,250\nI think it's lab two or\nsomething crazy like that.\n\n524\n00:27:09,250 --> 00:27:13,200\nLet's see, my domain is lab2.itpro.tv.\n\n525\n00:27:13,200 --> 00:27:16,190\nSo I'll go ahead and punch that in and\n\n526\n00:27:16,190 --> 00:27:18,450\nthen I need to punch in\nan administrative account.\n\n527\n00:27:18,450 --> 00:27:20,650\nI just happen to have\none which is convenient.\n\n528\n00:27:22,470 --> 00:27:26,610\nAnd so it's gonna reach out there, and see\nhow it says AD authentication is currently\n\n529\n00:27:26,610 --> 00:27:30,300\nbeing configured, so it wasn't actually\ndone, and it looks like it failed for me.\n\n530\n00:27:30,300 --> 00:27:33,000\nI got,\ncould not enable external authentication\n\n531\n00:27:33,000 --> 00:27:35,830\nclocks skew detected with\nactive directory server.\n\n532\n00:27:35,830 --> 00:27:37,860\nAll right, that's a problem.\n\n533\n00:27:37,860 --> 00:27:42,410\nFor the active directory, it uses LDAP\nauthentication which underneath of\n\n534\n00:27:42,410 --> 00:27:47,028\nit it's actually using Kerberos for\nthe encryption and security piece.\n\n535\n00:27:47,028 --> 00:27:50,080\nNow with Kerberos if your clocks\nare off by more than a few minutes,\n\n536\n00:27:50,080 --> 00:27:52,190\nit won't be able to synchronize.\n\n537\n00:27:52,190 --> 00:27:55,790\nSo I've got a problem with\nthe clocks on my system and\n\n538\n00:27:55,790 --> 00:27:57,920\nthey're just not In alignment.\n\n539\n00:27:57,920 --> 00:28:02,100\nNow when I installed XenCenter I\ntold it to go ahead and\n\n540\n00:28:02,100 --> 00:28:04,080\nsynchronize with an NTP server.\n\n541\n00:28:04,080 --> 00:28:05,550\nIt was part of the install.\n\n542\n00:28:05,550 --> 00:28:08,870\nI just told it to use pool.ntp.org, and so\n\n543\n00:28:08,870 --> 00:28:12,320\nit should be using that for\nsynchronizing its time.\n\n544\n00:28:12,320 --> 00:28:15,190\nI imagine the time is okay on there, but\n\n545\n00:28:15,190 --> 00:28:20,430\nI guess I could check here and\ntake a look.\n\n546\n00:28:20,430 --> 00:28:23,530\nOh, date, that's the one I want,\nthere we go.\n\n547\n00:28:23,530 --> 00:28:29,340\nSo XenServer thinks that it is 2:26 PM and\nif I look at my server,\n\n548\n00:28:29,340 --> 00:28:33,200\nmy server thinks that it's 5:26 p.m.,\nso I've gotta A difference there.\n\n549\n00:28:33,200 --> 00:28:37,478\nThings are off a good bit, so\nI need to find out where the problem is.\n\n550\n00:28:37,478 --> 00:28:41,930\nNow my XenServer thinks that it's\n2:26 PM Eastern Daylight Time, and\n\n551\n00:28:41,930 --> 00:28:44,800\nI'm looking at my clock on the wall and\nthat's correct.\n\n552\n00:28:44,800 --> 00:28:48,700\nMy server thinks that it is 5:26 PM and\nthat is not correct.\n\n553\n00:28:48,700 --> 00:28:51,030\nSo looks like I got\na problem here on my server.\n\n554\n00:28:51,030 --> 00:28:55,100\nLet's see what timezone\nit thinks that it's in.\n\n555\n00:28:55,100 --> 00:28:58,650\nIt thinks that it's in Eastern but\nthat time is definitely not right.\n\n556\n00:28:58,650 --> 00:29:03,100\nSo I need to get it synchronizing and\nworking properly.\n\n557\n00:29:04,230 --> 00:29:06,767\nSo let me go in here and\nfix that right quick.\n\n558\n00:29:09,704 --> 00:29:13,310\nAnd I guess I could do a NTP server.\n\n559\n00:29:13,310 --> 00:29:15,380\nWell, whatever,\nwe'll just set this right here.\n\n560\n00:29:15,380 --> 00:29:19,150\nSo, let me fix that and so\n\n561\n00:29:19,150 --> 00:29:23,360\nnow, I've got 2:27 PM there,\n2:27 on my server.\n\n562\n00:29:23,360 --> 00:29:24,050\nSo I should be good.\n\n563\n00:29:24,050 --> 00:29:25,590\nLet me retry that join.\n\n564\n00:29:29,820 --> 00:29:31,190\nSecond time is a charm, right?\n\n565\n00:29:31,190 --> 00:29:33,840\nHere we go.\nSo, it's going to reach out.\n\n566\n00:29:33,840 --> 00:29:35,540\nSimple problems that we can bump into.\n\n567\n00:29:35,540 --> 00:29:38,310\nThis is where having a unified\ntime server is kind of handy.\n\n568\n00:29:39,320 --> 00:29:41,970\nAll right, so it is enabling and\nwe'll give that a moment.\n\n569\n00:29:41,970 --> 00:29:44,870\nI can watch my log here,\nyou'll see here it failed right away.\n\n570\n00:29:44,870 --> 00:29:46,700\nIt failed after about\nfour seconds last time.\n\n571\n00:29:46,700 --> 00:29:49,440\nThis time it has gotten further,\nit's about 16 seconds in.\n\n572\n00:29:49,440 --> 00:29:51,270\nSo I'm thinking it's\ngonna work this time but\n\n573\n00:29:51,270 --> 00:29:53,570\nwe'll give it a moment\nwhile it sorts itself out.\n\n574\n00:29:53,570 --> 00:29:57,000\nThere we go, it says completed and\nnow when I look under users,\n\n575\n00:29:57,000 --> 00:30:01,210\nit says that the pool ITProTV\nnow belongs to that domain.\n\n576\n00:30:01,210 --> 00:30:04,390\nSo I'm signed on to my Windows domain.\n\n577\n00:30:04,390 --> 00:30:06,250\nNow the root accounts still exist.\n\n578\n00:30:06,250 --> 00:30:08,700\nSee how I've got it right here,\nlocal root accounts.\n\n579\n00:30:08,700 --> 00:30:10,710\nSo there's my root account,\nit's still there.\n\n580\n00:30:10,710 --> 00:30:16,205\nI can't really mess with it but now I\ncan start to add in all the other users.\n\n581\n00:30:16,205 --> 00:30:20,555\nI can add in them by name or\nby group if I want to.\n\n582\n00:30:20,555 --> 00:30:23,295\nSo I might wanna let my domain Admins,\nall right.\n\n583\n00:30:23,295 --> 00:30:24,745\nSo I'm gonna grant them access.\n\n584\n00:30:24,745 --> 00:30:29,945\nSo anybody that's in the Domain Admins\ngroup in my active directory,\n\n585\n00:30:29,945 --> 00:30:34,395\nis going to have administrative\naccess here on this server, okay.\n\n586\n00:30:34,395 --> 00:30:37,680\nAnd I can choose domain admins and\nI can it change role and\n\n587\n00:30:37,680 --> 00:30:40,040\nI can pick what they're allowed to do.\n\n588\n00:30:40,040 --> 00:30:44,650\nPool Admin, Pool Operator, Power Admin and\nso on, I can come in and specify.\n\n589\n00:30:44,650 --> 00:30:47,790\nAnd I'll say Pool Admin, I want them\nto be able to do whatever they want.\n\n590\n00:30:47,790 --> 00:30:52,540\nThey're domain admins, I want them to be\nable to work on this system, all right.\n\n591\n00:30:52,540 --> 00:30:55,650\nWell let's say I have a help desk and\nI want my help desk to be able\n\n592\n00:30:55,650 --> 00:30:58,400\nto look at the XenServer, but\nnot actually change anything.\n\n593\n00:30:58,400 --> 00:30:59,940\nI just need them to be able to look for\nstatus.\n\n594\n00:30:59,940 --> 00:31:03,530\nTo make sure the servers are up and\nso on but not change anything.\n\n595\n00:31:03,530 --> 00:31:05,960\nSo, what I can do is,\nin my Active Directory,\n\n596\n00:31:05,960 --> 00:31:12,490\nif I can spell it,\nI can create like a help desk group.\n\n597\n00:31:12,490 --> 00:31:14,760\nSo, I'll go in here and\ncreate a help desk group.\n\n598\n00:31:20,181 --> 00:31:22,890\nAll right, so\nthere now I've got a help desk group.\n\n599\n00:31:22,890 --> 00:31:25,320\nAnd I can add that into XenServer.\n\n600\n00:31:27,820 --> 00:31:31,500\nAll right so we're gonna grant access and\nI'm gonna take them and\n\n601\n00:31:31,500 --> 00:31:34,747\nchange their role to be read-only.\n\n602\n00:31:34,747 --> 00:31:40,860\nAll right, now, any users in the help\ndesk group can fire up XenCenter,\n\n603\n00:31:40,860 --> 00:31:43,780\nconnect up to this pool,\nuse their username and password,\n\n604\n00:31:43,780 --> 00:31:47,120\nand as long as they're in this group,\nthey'll be able to see everything.\n\n605\n00:31:47,120 --> 00:31:49,150\nThey won't be able to change anything.\n\n606\n00:31:49,150 --> 00:31:52,050\nThey won't be able to shut a server\ndown or start a server up.\n\n607\n00:31:52,050 --> 00:31:53,804\nThey'll just be able to look, but\n\n608\n00:31:53,804 --> 00:31:57,384\nif they're in the domain admins group\nthey can do whatever they want.\n\n609\n00:31:57,384 --> 00:32:00,420\nThey can get in there and\nwork with things.\n\n610\n00:32:00,420 --> 00:32:01,936\nLet's see that in action.\n\n611\n00:32:01,936 --> 00:32:08,130\nI'm gonna disconnect from this pool,\nall right.\n\n612\n00:32:08,130 --> 00:32:13,550\nAnd I'll go ahead and\njust forget it outright.\n\n613\n00:32:13,550 --> 00:32:14,170\nWell, I will try.\n\n614\n00:32:16,710 --> 00:32:19,440\nThere we go, and I'm gonna add it back in.\n\n615\n00:32:20,490 --> 00:32:24,210\nOh, actually before I do that,\nI'm gonna make myself a Help Desk user.\n\n616\n00:32:24,210 --> 00:32:27,425\nSo let me create a Help Desk user.\n\n617\n00:32:31,680 --> 00:32:34,716\nSo I'll just create a user here,\nwhich maybe I'll call him Help Desk.\n\n618\n00:32:39,510 --> 00:32:42,383\nAll right, so I'm just kinda\ncreating a generic Help Desk user.\n\n619\n00:32:45,591 --> 00:32:48,540\nAnd I'll give them a username and\npassword.\n\n620\n00:32:49,840 --> 00:32:52,680\nName Help Desk is already in use,\noh, by the group.\n\n621\n00:32:52,680 --> 00:32:53,360\nThat makes sense.\n\n622\n00:32:55,360 --> 00:32:55,860\nHow about that?\n\n623\n00:32:58,090 --> 00:32:59,008\nThere we go.\n\n624\n00:32:59,008 --> 00:33:03,908\nAnd I'm gonna put that Help Desk user in\nthat group, since it's actually the group\n\n625\n00:33:03,908 --> 00:33:08,467\nI gave permissions to, not the user, so\nI do need to add them into that group.\n\n626\n00:33:14,883 --> 00:33:17,050\nThere we go.\n\n627\n00:33:17,050 --> 00:33:18,045\nAll right.\n\n628\n00:33:18,045 --> 00:33:21,365\nSo now,\nwhen I go to connect to a XenServer\n\n629\n00:33:21,365 --> 00:33:27,235\npool, I can punch in the server\nI want to connect to.\n\n630\n00:33:27,235 --> 00:33:30,860\nAnd this time I'm gonna\nlog in as helpdesk,\n\n631\n00:33:30,860 --> 00:33:33,630\ninstead of logging in as root, all right.\n\n632\n00:33:33,630 --> 00:33:34,700\nAnd when I login,\n\n633\n00:33:34,700 --> 00:33:38,562\nit's gonna see that I am, oh,\nI didn't connect to the pool master.\n\n634\n00:33:38,562 --> 00:33:42,530\nI forgot, in the cluster episode we\nfailed the master to the other side,\n\n635\n00:33:42,530 --> 00:33:46,020\nso I'm connecting with the user\naccount that doesn't exist in Linux,\n\n636\n00:33:46,020 --> 00:33:48,960\nit exist in my active\ndirectory environment.\n\n637\n00:33:48,960 --> 00:33:50,740\nAnd I'm logged in as helpdesk.\n\n638\n00:33:50,740 --> 00:33:55,150\nSee, up here, it says,\nLogged in as Help Desk User (Read Only).\n\n639\n00:33:55,150 --> 00:33:57,100\nSo, I can see everything.\n\n640\n00:33:57,100 --> 00:33:59,050\nI can see these servers.\n\n641\n00:33:59,050 --> 00:34:02,240\nAnd, if I take one of them and\nI go to the console, see?\n\n642\n00:34:02,240 --> 00:34:03,760\nConsole is read only.\n\n643\n00:34:03,760 --> 00:34:05,610\nI can't mess with the server.\n\n644\n00:34:05,610 --> 00:34:07,340\nI can't shut it down.\n\n645\n00:34:07,340 --> 00:34:08,830\nAt least I didn't think I could.\n\n646\n00:34:10,600 --> 00:34:11,440\nAm I wrong?\n\n647\n00:34:11,440 --> 00:34:13,450\nOh, there we go.\n\n648\n00:34:13,450 --> 00:34:15,190\nIt had me worried for a moment there.\n\n649\n00:34:15,190 --> 00:34:17,730\nI can't shut it down,\ncuz I only have read access.\n\n650\n00:34:17,730 --> 00:34:21,050\nIf I try and shut it down,\nsee how it prompts me for credentials?\n\n651\n00:34:21,050 --> 00:34:22,820\nAnd so that's how it works.\n\n652\n00:34:22,820 --> 00:34:23,980\nI can see things.\n\n653\n00:34:23,980 --> 00:34:25,570\nI can just check on their status.\n\n654\n00:34:25,570 --> 00:34:27,010\nIs the machine running?\n\n655\n00:34:27,010 --> 00:34:28,800\nHow much memory is it using?\n\n656\n00:34:28,800 --> 00:34:30,290\nWhat's it's storage like, and so\n\n657\n00:34:30,290 --> 00:34:34,860\non, just basic information to check\non the health of the server, right?\n\n658\n00:34:34,860 --> 00:34:41,280\nBut, I can log out and log back in as\na different user, and when I do that,\n\n659\n00:34:41,280 --> 00:34:44,590\nnow I can have greater access or\nless access, or whatever, depending.\n\n660\n00:34:44,590 --> 00:34:48,690\nAll right, so being able to switch user\naccounts like that is pretty important\n\n661\n00:34:48,690 --> 00:34:53,770\nbecause it's going to help us to\ncontrol who has what kind of access.\n\n662\n00:34:53,770 --> 00:34:57,060\nI'm gonna reconnect here as Don,\nthat's my domain admin account.\n\n663\n00:34:57,060 --> 00:35:01,650\nAnd when I reconnect, it's gonna\nreconnect, it's gonna see that I'm in\n\n664\n00:35:01,650 --> 00:35:06,880\ndomain admins, and it'll say up here,\nLogged in as Don (Pool Admin).\n\n665\n00:35:06,880 --> 00:35:10,760\nAnd now I can get in, and\nI can take a look at the systems.\n\n666\n00:35:10,760 --> 00:35:13,310\nI can go into their console and work.\n\n667\n00:35:13,310 --> 00:35:14,860\nI'm a full admin, all right.\n\n668\n00:35:14,860 --> 00:35:16,180\nSo, a really cool feature there,\n\n669\n00:35:16,180 --> 00:35:18,760\ndefinitely improves\nthe security of our system.\n\n670\n00:35:18,760 --> 00:35:21,660\nWe don't want people all\njust sharing one password,\n\n671\n00:35:21,660 --> 00:35:23,440\nespecially the bigger our\nenvironment gets, and\n\n672\n00:35:23,440 --> 00:35:28,220\nthe more critical our environment gets,\nyou want people logging in as themselves.\n\n673\n00:35:28,220 --> 00:35:32,120\nAnd that way when they start to perform\nactions, in the logs you'll be able to see\n\n674\n00:35:32,120 --> 00:35:35,480\nwho it was that did that, who it was\nthat shut that server down, or whatever.\n\n675\n00:35:35,480 --> 00:35:37,940\nAll right.\n\n676\n00:35:37,940 --> 00:35:41,420\nSo that's another thing that we may\nwant to configure on our server.\n\n677\n00:35:43,400 --> 00:35:46,940\nAll right,\nwhat else do we want to take a look at?\n\n678\n00:35:46,940 --> 00:35:48,300\nOkay.\n\n679\n00:35:48,300 --> 00:35:49,810\nAs we work with our servers,\n\n680\n00:35:49,810 --> 00:35:53,230\none of the biggest challenges we\nhave is with updating a server.\n\n681\n00:35:53,230 --> 00:35:53,860\nAll right.\n\n682\n00:35:53,860 --> 00:35:55,330\nWhen we do an update,\n\n683\n00:35:55,330 --> 00:35:58,460\nthere's always a risk that our\nupdate could break something, right?\n\n684\n00:35:58,460 --> 00:36:02,690\nWe get some hot fixes from Microsoft,\nand we apply them to Windows, and\n\n685\n00:36:02,690 --> 00:36:03,319\nsomething breaks.\n\n686\n00:36:04,450 --> 00:36:09,470\nIn the past, when that happened we\neither had to have a plan to roll\n\n687\n00:36:09,470 --> 00:36:13,890\nback the change by uninstalling it, or if\nit was something big like a service pack,\n\n688\n00:36:13,890 --> 00:36:16,870\nso a service pack 3 or\nsomething like that,\n\n689\n00:36:16,870 --> 00:36:20,720\nyou might have to restore from backup\nto undo that change that you just made.\n\n690\n00:36:20,720 --> 00:36:23,950\nWell in XenServer,\nwe have something called a Snapshot.\n\n691\n00:36:23,950 --> 00:36:28,880\nAnd a snapshot is where we freeze\na virtual hard drive in a present state.\n\n692\n00:36:28,880 --> 00:36:34,210\nAnd then once it's frozen,\nany change we make is stored separately.\n\n693\n00:36:34,210 --> 00:36:38,410\nAnd that way we can quickly\nundo any changes we've made.\n\n694\n00:36:38,410 --> 00:36:42,670\nThat way if an update fails, doesn't work\nout quite right, we can do it this way and\n\n695\n00:36:42,670 --> 00:36:45,980\nwe have like a safety net,\nsomething we can quickly roll back to.\n\n696\n00:36:45,980 --> 00:36:46,570\nAll right.\n\n697\n00:36:46,570 --> 00:36:47,950\nThe system itself is pretty easy.\n\n698\n00:36:47,950 --> 00:36:50,180\nLet me show you how it works.\n\n699\n00:36:50,180 --> 00:36:53,630\nSo I've got a server here, Web04,\nlet me just pull this guy up.\n\n700\n00:36:55,210 --> 00:36:58,020\nAnd if I get logged into it.\n\n701\n00:37:00,010 --> 00:37:02,330\nAll right, so here I am on this server.\n\n702\n00:37:02,330 --> 00:37:05,600\nAnd I'm just gonna take a look\nat a utility that's got.\n\n703\n00:37:05,600 --> 00:37:10,030\nAll right, it's got GREP installed,\nright, it's the string search utility.\n\n704\n00:37:10,030 --> 00:37:11,080\nIt's got it installed.\n\n705\n00:37:11,080 --> 00:37:16,630\nAnd I have 2.6.3-4.el6\nis what's installed.\n\n706\n00:37:16,630 --> 00:37:17,390\nAll right.\n\n707\n00:37:17,390 --> 00:37:23,062\nI can see there's an update available for\nit, 2.6.3-4el6_5.1, right.\n\n708\n00:37:23,062 --> 00:37:26,320\nIt's a very minor update, but\nit is an update available.\n\n709\n00:37:27,720 --> 00:37:32,050\nWell, if I have time, I'll go and\ntest that update on another server,\n\n710\n00:37:32,050 --> 00:37:36,340\non a testing or staging server or\nwhatever, make sure everything works.\n\n711\n00:37:36,340 --> 00:37:38,870\nBut if I'm a small company,\nI probably don't have that time, or\n\n712\n00:37:38,870 --> 00:37:40,730\nI don't have the resources to do that.\n\n713\n00:37:40,730 --> 00:37:44,430\nSo instead, I may just want to try\nthe update and see how it goes, well,\n\n714\n00:37:44,430 --> 00:37:48,840\nwhat I can do is I can take\na snapshot of my server first, and\n\n715\n00:37:48,840 --> 00:37:53,100\nthen once I have the snapshot, then I can\nmake the change and if it worked out,\n\n716\n00:37:53,100 --> 00:37:54,830\ngreat, wonderful, I'm done.\n\n717\n00:37:54,830 --> 00:37:59,900\nBut if it had a problem, I can just roll\nback to the snapshot as it was, okay?\n\n718\n00:37:59,900 --> 00:38:02,470\nSo, right now I can see I\ndon't have that update.\n\n719\n00:38:02,470 --> 00:38:05,400\nSo it says that there is an available\nupdate for me right there.\n\n720\n00:38:05,400 --> 00:38:06,550\nI don't have it applied just yet.\n\n721\n00:38:07,720 --> 00:38:13,590\nUp here I can go to my Snapshots tab, and\nI can take a snapshot of that system.\n\n722\n00:38:13,590 --> 00:38:14,900\nAnd so I'm gonna take a snapshot.\n\n723\n00:38:14,900 --> 00:38:19,340\nI'll call it, Prior to GREP update.\n\n724\n00:38:19,340 --> 00:38:19,870\nOkay?\n\n725\n00:38:19,870 --> 00:38:21,730\nSo this is prior to me\nupdating that utility,\n\n726\n00:38:21,730 --> 00:38:24,170\nand I'm just using GREP,\nwhich is a very small utility.\n\n727\n00:38:24,170 --> 00:38:25,280\nThis might be a big deal.\n\n728\n00:38:25,280 --> 00:38:29,420\nThis might be updating your database\nsoftware, and I'm doing it in Linux.\n\n729\n00:38:29,420 --> 00:38:30,590\nIt works in Windows too.\n\n730\n00:38:30,590 --> 00:38:32,480\nIt's actually faster under Windows.\n\n731\n00:38:32,480 --> 00:38:34,580\nI might even wanna switch and\nuse a Windows server here.\n\n732\n00:38:34,580 --> 00:38:39,720\nBut, it's faster under Windows and\nother systems like that.\n\n733\n00:38:39,720 --> 00:38:41,130\nIn fact, let me see, do I?\n\n734\n00:38:41,130 --> 00:38:42,920\nWell, whatever, we'll do it from here.\n\n735\n00:38:42,920 --> 00:38:46,430\nSo, Prior to GREP update.\n\n736\n00:38:46,430 --> 00:38:49,630\nNow, when we take the snapshot,\nyou'll see I've got two choices.\n\n737\n00:38:49,630 --> 00:38:52,500\nOne is snapshot the virtual\nmachine's disks, and\n\n738\n00:38:52,500 --> 00:38:55,240\nthe other one is snapshot the disks and\nmemory.\n\n739\n00:38:56,270 --> 00:38:58,390\nIf the server's powered off,\n\n740\n00:38:58,390 --> 00:39:00,810\nyou really just need to\nsnapshot the hard drive, right?\n\n741\n00:39:00,810 --> 00:39:03,900\nThe hard drive is all that has data\nat that point, it's powered off.\n\n742\n00:39:03,900 --> 00:39:09,190\nBut if it's powered on, you've got data on\nthe hard drive and you've got data in RAM.\n\n743\n00:39:09,190 --> 00:39:13,710\nIf you want to be able to roll it back\nto the exact same moment you took\n\n744\n00:39:13,710 --> 00:39:18,430\nthe snapshot, then you need both RAM and\nthe hard drive, all right?\n\n745\n00:39:18,430 --> 00:39:20,770\nBut if it's something simple\nlike a utility like this,\n\n746\n00:39:20,770 --> 00:39:22,560\nwe may not care what's in RAM.\n\n747\n00:39:22,560 --> 00:39:26,040\nWhen we restore the snapshot,\nthe VM's gonna have to reboot anyway, so\n\n748\n00:39:26,040 --> 00:39:28,110\nwe're gonna lose what's\nin RAM in most scenarios.\n\n749\n00:39:29,330 --> 00:39:33,560\nSo I may not be worried about that anyway,\nso we can choose just to do the disks.\n\n750\n00:39:33,560 --> 00:39:35,370\nBut if we choose to do discs and memory,\n\n751\n00:39:35,370 --> 00:39:39,800\nwe can actually restore this VM to the\nexact moment of when we did the snapshot,\n\n752\n00:39:39,800 --> 00:39:42,310\nputting everything back to the way it was.\n\n753\n00:39:42,310 --> 00:39:45,440\nNotice if we choose disks, there's\nanother option here that's grayed out.\n\n754\n00:39:45,440 --> 00:39:47,390\nIt's grayed out cuz I'm\non a Linux machine.\n\n755\n00:39:47,390 --> 00:39:49,460\nIf this were a Windows machine\nI'd have this option, and\n\n756\n00:39:49,460 --> 00:39:53,010\nit says,\nQuiesce the VM before taking the snapshot.\n\n757\n00:39:53,010 --> 00:39:54,602\nWhat does that mean?\n\n758\n00:39:54,602 --> 00:39:58,182\nWell, quiesce means take\nany disk idle operations,\n\n759\n00:39:58,182 --> 00:40:03,127\nany jobs that were writing to the hard\ndrive, And wait for them to finish.\n\n760\n00:40:03,127 --> 00:40:04,612\nLet those writes finish.\n\n761\n00:40:04,612 --> 00:40:08,570\nWe don't want to take a snapshot when\nwe're halfway through writing to the disk.\n\n762\n00:40:08,570 --> 00:40:12,750\nSo it gives us a chance to let those\nwrites finish and then take the snapshot.\n\n763\n00:40:12,750 --> 00:40:13,970\nIn Linux, it doesn't do that.\n\n764\n00:40:13,970 --> 00:40:16,110\nIt just takes the snapshot as it is.\n\n765\n00:40:16,110 --> 00:40:20,260\nSo you might be halfway through a write\noperation and if that's the case, you're\n\n766\n00:40:20,260 --> 00:40:24,980\ngonna lose that write operation when you\ncome back up unless you get memory also.\n\n767\n00:40:24,980 --> 00:40:26,110\nSo be aware of that difference.\n\n768\n00:40:28,380 --> 00:40:30,800\nWhat I'm gonna do is,\nI'm gonna snapshot the disk.\n\n769\n00:40:30,800 --> 00:40:34,970\nI'll go ahead and take a snapshot and\nso it's gonna fire up and do that.\n\n770\n00:40:34,970 --> 00:40:39,620\nNow if you're on iSCSI storage or\nFibre Channel, remote storage,\n\n771\n00:40:39,620 --> 00:40:40,510\nit might take a moment.\n\n772\n00:40:40,510 --> 00:40:41,900\nIf you're on local storage,\n\n773\n00:40:41,900 --> 00:40:45,140\nor direct attached,\nthen it's gonna happen very fast.\n\n774\n00:40:45,140 --> 00:40:47,530\nThere it goes, it took that snapshot and\nit's already done.\n\n775\n00:40:48,640 --> 00:40:55,170\nWhen I look at my Snapshot tab, I've got\nthe base, the snapshot that I just took\n\n776\n00:40:55,170 --> 00:41:01,450\nand now, now is every change that's\noccurred since I took that snapshot.\n\n777\n00:41:01,450 --> 00:41:04,380\nSo I can go to my console and\n\n778\n00:41:04,380 --> 00:41:08,280\nI can do that update to grep, so\nI'll go ahead and do the update.\n\n779\n00:41:09,480 --> 00:41:11,031\nThere we go, doing my update.\n\n780\n00:41:15,115 --> 00:41:19,710\nSo it's gonna go ahead and update and\nnow when I pull up my list,\n\n781\n00:41:19,710 --> 00:41:26,156\nI can see there's no updates available and\nthat I am running the 5.1 version of Grep.\n\n782\n00:41:26,156 --> 00:41:26,980\nSo my update's done.\n\n783\n00:41:28,110 --> 00:41:30,920\nNow maybe I start working with\nthe system and I found out, man,\n\n784\n00:41:30,920 --> 00:41:33,890\nthis is just not working, this utility's\nnot working the way that I want.\n\n785\n00:41:33,890 --> 00:41:34,659\nI wish I could roll back.\n\n786\n00:41:36,530 --> 00:41:38,860\nThere are ways to roll back\nwith like the Yum utility but\n\n787\n00:41:38,860 --> 00:41:40,470\nlet's just pretend that we\ndon't have a way to roll back.\n\n788\n00:41:41,610 --> 00:41:44,840\nWe can just quickly and\neasily restore the snapshot.\n\n789\n00:41:44,840 --> 00:41:49,770\nI can go back to my snapshot,\nI can find prior to update and\n\n790\n00:41:49,770 --> 00:41:52,600\nif we right click on that,\nyou've got Revert to Snapshot.\n\n791\n00:41:52,600 --> 00:41:55,430\nSo we can just roll right\nback to the snapshot and\n\n792\n00:41:55,430 --> 00:41:57,440\nthen it's like we never made the change.\n\n793\n00:41:57,440 --> 00:42:00,970\nYou can also create a new virtual\nmachine from the snapshot,\n\n794\n00:42:00,970 --> 00:42:03,240\nyou can just spin up a whole new VM.\n\n795\n00:42:03,240 --> 00:42:05,830\nSo now you've got the changed one and\nthe original one.\n\n796\n00:42:05,830 --> 00:42:06,370\nThat's great for\n\n797\n00:42:06,370 --> 00:42:10,530\nmaking comparisons, looking to see\nwhat went wrong, it's pretty useful.\n\n798\n00:42:10,530 --> 00:42:12,340\nJust make sure you don't put\nthe other one on the network,\n\n799\n00:42:12,340 --> 00:42:14,770\notherwise you get like duplicate\nIP errors, stuff like that.\n\n800\n00:42:14,770 --> 00:42:15,830\nSo you do have to be careful there.\n\n801\n00:42:15,830 --> 00:42:19,740\nI'm gonna go and revert it to\nthe snapshot though, and when you revert,\n\n802\n00:42:19,740 --> 00:42:22,030\nit gives you the option of\ntaking a snapshot now too.\n\n803\n00:42:22,030 --> 00:42:24,550\nDo you want a snapshot\nthat includes the change?\n\n804\n00:42:24,550 --> 00:42:25,170\nWe can store that.\n\n805\n00:42:25,170 --> 00:42:31,160\nI'll go ahead and say yes, why not and\nI'll call this, after the grep update.\n\n806\n00:42:34,220 --> 00:42:38,390\nIt's gonna create a snapshot now of what\nit was like after I did the update and\n\n807\n00:42:38,390 --> 00:42:42,630\nthen it's gonna roll me back to\nthe prior to the update part.\n\n808\n00:42:42,630 --> 00:42:45,850\nSo it's gonna put me back to the way\nthat I was, creating a fork,\n\n809\n00:42:45,850 --> 00:42:48,520\nlike two futures for this virtual machine.\n\n810\n00:42:48,520 --> 00:42:52,810\nOne future that we've aborted, and another\nfuture that is what's actually happening.\n\n811\n00:42:52,810 --> 00:42:55,570\nSo it's reverting right now,\nwe'll give it a moment, there we go, and\n\n812\n00:42:55,570 --> 00:42:57,250\nnow it's showing the split futures.\n\n813\n00:42:58,270 --> 00:43:00,840\nOne future where we didn't do the update,\nand\n\n814\n00:43:00,840 --> 00:43:05,490\none future where we did do the update but\nnow, that's the one where we didn't, so\n\n815\n00:43:05,490 --> 00:43:09,630\nif I go back to my console,\nsee how the virtual machine's rebooting?\n\n816\n00:43:09,630 --> 00:43:13,280\nI only snapshotted the hard drives,\nnot the memory.\n\n817\n00:43:13,280 --> 00:43:18,110\nSo it had to reboot to handle that, so\nit just rebooted and now I can go in here\n\n818\n00:43:19,780 --> 00:43:25,510\nand if I do a Yum list grep,\nI should see, there we go.\n\n819\n00:43:25,510 --> 00:43:27,450\nI'm not running the update,\nthe update is available,\n\n820\n00:43:27,450 --> 00:43:29,600\nI've gone back in time\nto before the update.\n\n821\n00:43:30,970 --> 00:43:32,250\nIt works really well.\n\n822\n00:43:32,250 --> 00:43:36,600\nIt's really convenient but because I only\ndid the disks, it did have to reboot,\n\n823\n00:43:36,600 --> 00:43:37,930\nso that's kind of a negative.\n\n824\n00:43:39,000 --> 00:43:43,410\nEven if we do the memory,\nit's not completely without down time.\n\n825\n00:43:43,410 --> 00:43:45,550\nIf you choose to do the memory also,\n\n826\n00:43:45,550 --> 00:43:51,000\nit has to freeze the virtual machine\nwhile it captures a copy of the memory.\n\n827\n00:43:51,000 --> 00:43:58,326\nSo, for example, if I take a look at\nthis machine, this is 10.1.100.162.\n\n828\n00:43:58,326 --> 00:44:01,670\nI’m gonna start a ping to 10.1.100.162,\n\n829\n00:44:01,670 --> 00:44:06,770\nso there’s my continual ping and\n\n830\n00:44:06,770 --> 00:44:11,870\nthen I'm gonna take another snapshot and\nthis time I'm gonna do the memory also.\n\n831\n00:44:11,870 --> 00:44:18,880\nSo I'll do disks and memory and I'll\ncall this the prior to second attempt.\n\n832\n00:44:18,880 --> 00:44:22,190\nThis is gonna be my second\nattempt at updating.\n\n833\n00:44:22,190 --> 00:44:27,540\nSo I'll take that snapshot,\nnow it's snapshotting the VM\n\n834\n00:44:27,540 --> 00:44:32,370\nhard drives as well as memory, and notice\nI've got my yellow circle over there, and\n\n835\n00:44:32,370 --> 00:44:36,150\nmy pings, they're timing out.\n\n836\n00:44:36,150 --> 00:44:39,710\nThe virtual machine is\nactually frozen right now, and\n\n837\n00:44:39,710 --> 00:44:43,465\nit's copying the memory\ncontents to the disk.\n\n838\n00:44:43,465 --> 00:44:46,815\nSo the more memory you have,\nthe longer it's going to take.\n\n839\n00:44:46,815 --> 00:44:49,985\nThis system I think has one gig or\ntwo gigs of RAM,\n\n840\n00:44:49,985 --> 00:44:53,033\nnot a ton but you see it's\ncreating a decent bit of outage.\n\n841\n00:44:53,033 --> 00:44:55,995\nYour end users will notice this, so\n\n842\n00:44:55,995 --> 00:44:59,825\nthis is not something you want to\ndo in production during peak hours.\n\n843\n00:44:59,825 --> 00:45:03,070\nYou would do this during a maintenance\nwindow but once it's done,\n\n844\n00:45:03,070 --> 00:45:07,190\nit's back up and you'll see that\nit didn't log me out or reboot.\n\n845\n00:45:07,190 --> 00:45:13,531\nI'm still sitting here at my\ncommand prompt ready to work.\n\n846\n00:45:13,531 --> 00:45:16,031\nNow I'm gonna go ahead and\napply that update.\n\n847\n00:45:19,390 --> 00:45:24,790\nSo there we go,\nI'm applying the update We'll\n\n848\n00:45:24,790 --> 00:45:28,184\njust get that in place and\nthen, once the update is done,\n\n849\n00:45:28,184 --> 00:45:32,865\nI can work like normal, going on my\nmultiple futures of this virtual machine.\n\n850\n00:45:32,865 --> 00:45:35,429\nNow, I've got the update, it's in place.\n\n851\n00:45:37,380 --> 00:45:41,240\nI see there's no updates listed here,\nso it's in place and I'm now working and\n\n852\n00:45:41,240 --> 00:45:45,730\noff I go and if I look at my pings,\npings are running strong.\n\n853\n00:45:45,730 --> 00:45:47,260\nSo there's my machine.\n\n854\n00:45:47,260 --> 00:45:52,710\nIf I go to my snapshots,\nI've got Now which has the update and\n\n855\n00:45:52,710 --> 00:45:54,990\nI can roll back to this prior.\n\n856\n00:45:54,990 --> 00:45:59,510\nNow this one that says Prior,\nthis is not just the hard drives,\n\n857\n00:45:59,510 --> 00:46:04,370\nnow it's hard drives and memory and\nyou can tell the difference.\n\n858\n00:46:04,370 --> 00:46:06,770\nSee the how the one here\nthat's just hard drives,\n\n859\n00:46:06,770 --> 00:46:10,780\nit's kinda blue and the one that's\nhard drives and memory is green.\n\n860\n00:46:10,780 --> 00:46:14,060\nOn the right side, if I'll click on one,\nyou'll see here this one says disks and\n\n861\n00:46:14,060 --> 00:46:16,450\nmemory, this one says disks only.\n\n862\n00:46:16,450 --> 00:46:19,250\nThe difference here is blue is letting\nme know that it's gonna reboot,\n\n863\n00:46:19,250 --> 00:46:23,660\nthe machine's gonna be off but green,\nthe machine is on, it's running and\n\n864\n00:46:23,660 --> 00:46:25,990\nit matches these buttons up here.\n\n865\n00:46:25,990 --> 00:46:30,010\nGreen would be like start to run,\nblue would be suspend,\n\n866\n00:46:30,010 --> 00:46:31,840\nthat's kind of where they're\ngetting those colors from.\n\n867\n00:46:32,850 --> 00:46:37,570\nSo I'm gonna roll us back to prior to the\nupdate and when I roll back, I'm not gonna\n\n868\n00:46:37,570 --> 00:46:40,050\nbother taking another snapshot this time,\nI'm just gonna roll it back.\n\n869\n00:46:41,320 --> 00:46:46,110\nThere's my console and\nI'm gonna watch my pings and\n\n870\n00:46:46,110 --> 00:46:49,870\nlets watch the two, there we go.\n\n871\n00:46:49,870 --> 00:46:51,930\nI see that I'm losing some pings, so\n\n872\n00:46:51,930 --> 00:46:55,010\nthe machine is kind of offline\nwhile it's doing this, and\n\n873\n00:46:55,010 --> 00:46:59,750\nI can see I've got my yellow box there,\nand it says the VM is currently suspended.\n\n874\n00:47:00,940 --> 00:47:06,450\nIt's suspended while it's restoring\nthe VM but now the VM is restored and\n\n875\n00:47:06,450 --> 00:47:08,720\nonce it's restored,\nit's immediately back to where I was.\n\n876\n00:47:08,720 --> 00:47:10,490\nSee how I didn't even have to login?\n\n877\n00:47:10,490 --> 00:47:13,840\nThat's because I was already logged\nin when I took the snapshot.\n\n878\n00:47:13,840 --> 00:47:17,420\nSo it's restored everything,\nthe hard drives, everything in RAM,\n\n879\n00:47:17,420 --> 00:47:21,860\nincluding my user session have been\nrestored and I'm right back and running.\n\n880\n00:47:21,860 --> 00:47:23,840\nIt didn't treat it as a reboot.\n\n881\n00:47:23,840 --> 00:47:27,220\nIn fact, if I look at the uptime,\nI know this machine's only been up for\n\n882\n00:47:27,220 --> 00:47:33,170\nlike seconds but\nit has an uptime of four minutes because\n\n883\n00:47:33,170 --> 00:47:37,100\nwe did that reboot earlier but it doesn't\neven know that is just went offline.\n\n884\n00:47:37,100 --> 00:47:40,240\nIt's RAM was captured and\nthen restored and\n\n885\n00:47:40,240 --> 00:47:44,840\nif I do my Yum list grep, I can see\nI still have an outstanding update.\n\n886\n00:47:44,840 --> 00:47:48,150\nSo that's the snapshot system,\nit's pretty cool.\n\n887\n00:47:48,150 --> 00:47:49,380\nCouple of words of advice.\n\n888\n00:47:49,380 --> 00:47:53,147\nFirst off,\nthe snapshots will stay there forever.\n\n889\n00:47:53,147 --> 00:47:57,963\nWhen you go to your snapshots, they're\ngonna stay around forever unless you\n\n890\n00:47:57,963 --> 00:48:02,779\ndelete them, and if you go under your\nstorage You'll see where you've got,\n\n891\n00:48:02,779 --> 00:48:07,620\nhere's my ITProTV web04, and\nsee how I've got all these snapshot files.\n\n892\n00:48:07,620 --> 00:48:09,930\nThe snapshot files do take space.\n\n893\n00:48:09,930 --> 00:48:14,580\nAs you create each one, it's logging all\nthe changes to that base image, and so\n\n894\n00:48:14,580 --> 00:48:17,820\nhere's my base image, and so\neach of these do take hard drive space, so\n\n895\n00:48:17,820 --> 00:48:20,970\nyou have to worry about that,\nthe second thing is performance.\n\n896\n00:48:20,970 --> 00:48:25,010\nYour performance will be degraded,\nwhile you have a snapshot.\n\n897\n00:48:25,010 --> 00:48:28,880\nBecause every time your VM goes to read\nfrom its hard drive, it can't just go and\n\n898\n00:48:28,880 --> 00:48:30,750\nread from the one hard drive file.\n\n899\n00:48:30,750 --> 00:48:35,320\nIt's gotta read from the changed file,\nand then the base file.\n\n900\n00:48:35,320 --> 00:48:37,630\nIt's gotta read from two different files,\n\n901\n00:48:37,630 --> 00:48:39,660\nevery time it does a seek\non the hard drive.\n\n902\n00:48:39,660 --> 00:48:41,280\nAnd that's bad for performance.\n\n903\n00:48:41,280 --> 00:48:45,450\nSo, use this as a safety net, do your\ntesting, make sure your update's fine, and\n\n904\n00:48:45,450 --> 00:48:46,960\nif it didn't work out, roll back.\n\n905\n00:48:46,960 --> 00:48:48,990\nIf it did work out, great.\n\n906\n00:48:48,990 --> 00:48:51,780\nWhen you're done, delete your snapshots.\n\n907\n00:48:51,780 --> 00:48:57,620\nAnd to do that, all you have to do is\ngo back to your snapshots screen, and\n\n908\n00:48:57,620 --> 00:48:59,180\nnow is all we care about.\n\n909\n00:48:59,180 --> 00:49:01,910\nSo we can just go and\ntake any of these other ones, and\n\n910\n00:49:01,910 --> 00:49:03,540\nyou just right-click on them and\nchoose delete.\n\n911\n00:49:03,540 --> 00:49:04,950\nDelete them out of there.\n\n912\n00:49:04,950 --> 00:49:06,140\nGet those snapshots out of there,\n\n913\n00:49:06,140 --> 00:49:09,210\nin order to get your performance\nrunning back to normal.\n\n914\n00:49:09,210 --> 00:49:15,850\nAnd so, I'll just delete each one of\nthese, so that all I have is now.\n\n915\n00:49:17,130 --> 00:49:17,850\nAnd then we go.\n\n916\n00:49:17,850 --> 00:49:19,090\nNow I've got no snapshots.\n\n917\n00:49:19,090 --> 00:49:21,440\nI'm running off of just\nmy one hard drive image.\n\n918\n00:49:21,440 --> 00:49:24,650\nAnd, if I go and take a look at that,\nI can see there it is.\n\n919\n00:49:24,650 --> 00:49:26,200\nJust my one hard drive image.\n\n920\n00:49:26,200 --> 00:49:27,040\nNow I'm nice and optimal.\n\n921\n00:49:29,010 --> 00:49:30,544\nSo that's the snapshot system, all right.\n\n922\n00:49:30,544 --> 00:49:31,620\nIt's pretty cool.\n\n923\n00:49:31,620 --> 00:49:34,550\nI want to show you another feature\nthat builds off of that snapshot, but\n\n924\n00:49:34,550 --> 00:49:36,370\nI'm running short on time on this segment.\n\n925\n00:49:36,370 --> 00:49:37,240\nSo let's do this.\n\n926\n00:49:37,240 --> 00:49:38,610\nLet's stop and take a break.\n\n927\n00:49:38,610 --> 00:49:41,990\nAnd when we get back, we're going to\ntake a look at the templating system.\n\n928\n00:49:41,990 --> 00:49:45,530\nWhich is another really cool thing that\nwe've got available inside of Zen server.\n\n929\n00:49:45,530 --> 00:49:46,750\nSo, stay tuned.\n\n930\n00:49:46,750 --> 00:49:51,670\nWe'll be back in a few.\n\n931\n00:49:51,670 --> 00:49:55,082\n[MUSIC]\n\n932\n00:49:57,579 --> 00:49:58,472\nAll right.\n\n933\n00:53:26,349 --> 00:53:27,649\n>> Mic check.\n\n934\n00:54:07,371 --> 00:54:12,856\n[SOUND] Okay, so we ended the last\n\n935\n00:54:12,856 --> 00:54:18,957\nsegment talking about snapshots.\n\n936\n00:54:18,957 --> 00:54:22,269\nAnd we got to see how we could kind of\nfreeze our virtual machine at a certain\n\n937\n00:54:22,269 --> 00:54:23,124\npoint in time, and\n\n938\n00:54:23,124 --> 00:54:26,760\nthat got me thinking about another\ntechnology I wanted to talk about.\n\n939\n00:54:26,760 --> 00:54:28,950\nWhich is templating.\n\n940\n00:54:28,950 --> 00:54:31,390\nI know it doesn't sound anything\nat all like the other one.\n\n941\n00:54:31,390 --> 00:54:33,250\nActually works on the same premise.\n\n942\n00:54:33,250 --> 00:54:37,120\nThere are times, when we want\nmore than one virtual machine,\n\n943\n00:54:37,120 --> 00:54:39,170\nthat are basically identical, right.\n\n944\n00:54:39,170 --> 00:54:42,620\nMaybe you've been tasked with creating\nfive Web servers for your company.\n\n945\n00:54:42,620 --> 00:54:44,650\nYou know you're gonna get\na lot of traffic on your site.\n\n946\n00:54:44,650 --> 00:54:47,470\nSo you need five different servers,\nto be able to carry the load.\n\n947\n00:54:47,470 --> 00:54:50,160\nWell, those five servers\nare gonna be identical.\n\n948\n00:54:50,160 --> 00:54:51,090\nThey're gonna have the same OS.\n\n949\n00:54:51,090 --> 00:54:52,820\nThey're gonna have the same files.\n\n950\n00:54:52,820 --> 00:54:54,690\nThey're gonna have the same\nsoftware loaded on them.\n\n951\n00:54:54,690 --> 00:54:56,000\nThe same configuration.\n\n952\n00:54:56,000 --> 00:54:59,550\nThere will just be little changes,\nlike the host name, or the IP address.\n\n953\n00:54:59,550 --> 00:55:01,130\nBut everything else is the same.\n\n954\n00:55:01,130 --> 00:55:04,930\nSo why create each one from scratch?\n\n955\n00:55:04,930 --> 00:55:09,190\nWhen I can just create one,\nand then make copies of it.\n\n956\n00:55:09,190 --> 00:55:12,550\nWhen we have multiple copies of a virtual\nmachine, that really saves some time.\n\n957\n00:55:12,550 --> 00:55:16,210\nYou can do quick provisioning\nof new machines on your network.\n\n958\n00:55:16,210 --> 00:55:19,370\nWhat got me thinking about it, was in\nthe last segment we took a snapshot,\n\n959\n00:55:19,370 --> 00:55:22,560\nand we had the option to create\na new VM from the snapshot.\n\n960\n00:55:22,560 --> 00:55:25,840\nIt's effectively creating\na clone of that virtual machine,\n\n961\n00:55:25,840 --> 00:55:27,170\nat that point in time, right.\n\n962\n00:55:27,170 --> 00:55:29,160\nBut we don't need a snapshot to do it.\n\n963\n00:55:29,160 --> 00:55:30,880\nAnd let me show you what I mean.\n\n964\n00:55:30,880 --> 00:55:35,210\nOn my server here I've got this guy,\nITProTVWeb05.\n\n965\n00:55:35,210 --> 00:55:37,670\nIt's a Linux box, it's up, it's running.\n\n966\n00:55:37,670 --> 00:55:42,130\nMaybe I get it all configured and\nset to run a Web server.\n\n967\n00:55:42,130 --> 00:55:44,150\nProbably running one already.\n\n968\n00:55:44,150 --> 00:55:45,690\nLet me see.\n\n969\n00:55:45,690 --> 00:55:49,810\nI guess if I spell it right,\nand oh no it's not.\n\n970\n00:55:49,810 --> 00:55:55,843\nMaybe I get in here, and\nI install a Web server on it.\n\n971\n00:55:55,843 --> 00:55:57,132\nGet it up and going and happy.\n\n972\n00:55:57,132 --> 00:55:58,249\nConfigured the way I want.\n\n973\n00:55:58,249 --> 00:56:02,743\nLoad my website files on it Now I\ncan take this one web server and\n\n974\n00:56:02,743 --> 00:56:08,050\njust clone it a series of times to\ncreate as many servers as I need.\n\n975\n00:56:08,050 --> 00:56:12,790\nNow there's two ways to\nachieve that inside of CentOS.\n\n976\n00:56:12,790 --> 00:56:15,010\nOne way is to do a true clone.\n\n977\n00:56:15,010 --> 00:56:19,770\nYou can actually copy a virtual\nmachine to have a second copy of it,\n\n978\n00:56:19,770 --> 00:56:22,170\nwell I guess I'm gonna\ninstall this here first.\n\n979\n00:56:22,170 --> 00:56:23,320\nThat's the easiest way.\n\n980\n00:56:23,320 --> 00:56:26,100\nYou take a virtual machine and\nyou just copy it.\n\n981\n00:56:26,100 --> 00:56:29,380\nThe only problem with that is in order\nto copy the virtual machine you do have\n\n982\n00:56:29,380 --> 00:56:30,450\nto take it off line.\n\n983\n00:56:30,450 --> 00:56:33,610\nYou've got to shut it\ndown to make the copies.\n\n984\n00:56:33,610 --> 00:56:35,805\nSo if this is a real\nrunning production machine,\n\n985\n00:56:35,805 --> 00:56:38,480\nthat is not really\nsomething that I wanna do.\n\n986\n00:56:38,480 --> 00:56:42,220\nSo the second option is\nI can create a template.\n\n987\n00:56:42,220 --> 00:56:46,240\nWhen we create a new virtual machine,\nit runs a little wizard and\n\n988\n00:56:46,240 --> 00:56:49,280\nthe first thing that it asks is,\nwhat template to use.\n\n989\n00:56:49,280 --> 00:56:52,059\nThese are just default templates\nthat define hardware settings.\n\n990\n00:56:53,540 --> 00:56:59,360\nFor a virtual machine, well we can\ntake an existing virtual machine and\n\n991\n00:56:59,360 --> 00:57:01,640\nturn it into a template.\n\n992\n00:57:01,640 --> 00:57:05,540\nAnd so then we can use that to\nspawn machines as needed without\n\n993\n00:57:05,540 --> 00:57:08,010\nshutting down any of\nour production systems.\n\n994\n00:57:08,010 --> 00:57:09,860\nSo let’s take a look at both ways.\n\n995\n00:57:09,860 --> 00:57:13,470\nSo for the first method,\nI’ll just take this Linux box, and\n\n996\n00:57:13,470 --> 00:57:15,440\nlet’s say I wanna copy it.\n\n997\n00:57:15,440 --> 00:57:18,750\nSo I need to go ahead and shut it down,\nso I’ll just shut down this VM.\n\n998\n00:57:18,750 --> 00:57:20,880\nAnd we’ll let it shut down.\n\n999\n00:57:20,880 --> 00:57:24,328\nI won’t see the copy\noption until I have that.\n\n1000\n00:57:24,328 --> 00:57:26,715\nSo you know if I right click on it now,\n\n1001\n00:57:26,715 --> 00:57:30,720\nI don't get a whole heck of a lot\nof options here in my menu, but\n\n1002\n00:57:30,720 --> 00:57:35,054\nonce it shuts down, I can right\nclick on it, and there's copy VM.\n\n1003\n00:57:35,054 --> 00:57:40,549\nSo I can copy it,\nmaking a clone of that virtual machine,\n\n1004\n00:57:40,549 --> 00:57:47,316\nand now I can have an extra one, so\nif I want a you know ITProTV Web04.\n\n1005\n00:57:47,316 --> 00:57:50,557\nI can just go in here and\nupdate the information.\n\n1006\n00:57:50,557 --> 00:57:54,468\nI can do all sorts of things apparently.\n\n1007\n00:57:54,468 --> 00:57:56,400\nWeb04, there we go.\n\n1008\n00:57:56,400 --> 00:58:00,390\nAnd I can do a fast clone or a full copy.\n\n1009\n00:58:00,390 --> 00:58:05,060\nIf I want the storage to be in the same\nplace as the original storage,\n\n1010\n00:58:05,060 --> 00:58:07,180\nit can just do a disk level\ncopy of that storage.\n\n1011\n00:58:07,180 --> 00:58:09,980\nIt can actually do a snapshot and\nget us running right away and\n\n1012\n00:58:09,980 --> 00:58:11,990\ncopy the data at a later time.\n\n1013\n00:58:11,990 --> 00:58:16,330\nSo it's very efficient if it's going\nto the same storage repository, but\n\n1014\n00:58:16,330 --> 00:58:18,220\nif it needs to go to\na different storage repository,\n\n1015\n00:58:18,220 --> 00:58:21,740\nI have to do what's called a full copy,\nand it'll make an exact duplicate.\n\n1016\n00:58:21,740 --> 00:58:24,530\nIt just takes a little\nbit longer to do that.\n\n1017\n00:58:24,530 --> 00:58:27,220\nIn my case,\nI've only got the one iSCSI storage, so\n\n1018\n00:58:27,220 --> 00:58:32,284\nI'll just do a fast clone on this one,\nand so I'm gonna create ITProTV Web 04.\n\n1019\n00:58:33,600 --> 00:58:35,040\nAll right, so it's gonna clone it.\n\n1020\n00:58:35,040 --> 00:58:38,340\nSee how the virtual machine is now\nkinda frozen while it does that.\n\n1021\n00:58:38,340 --> 00:58:41,144\nAnd it's cloning it and\nnow I've got Web 04.\n\n1022\n00:58:41,144 --> 00:58:43,064\nAnd Web 04 is done.\n\n1023\n00:58:43,064 --> 00:58:45,839\nThere's no way it copied all of that hard\ndrive space in that amount of time and\n\n1024\n00:58:45,839 --> 00:58:46,995\nit really didn't.\n\n1025\n00:58:46,995 --> 00:58:50,472\nWhat it did is it really is treating this\nlike a snapshot built off of Web 05.\n\n1026\n00:58:51,545 --> 00:58:54,005\nThat's the quick clone option.\n\n1027\n00:58:54,005 --> 00:58:55,945\nIt's good for spawning machines, not so\n\n1028\n00:58:55,945 --> 00:58:58,795\ngreat for performance unless you\njust need these temporarily.\n\n1029\n00:58:58,795 --> 00:59:01,065\nIf this is gonna be a long term thing,\n\n1030\n00:59:01,065 --> 00:59:02,985\nthen we would've wanted\nto have done a full copy.\n\n1031\n00:59:02,985 --> 00:59:05,105\nSo we'd have separate disks for each.\n\n1032\n00:59:06,175 --> 00:59:10,060\nYou know it's just kind of evaluating\nour needs for our environment.\n\n1033\n00:59:10,060 --> 00:59:15,930\nBut now I can start this one up, and if I\nstart Web 04, and I'll start that up on,\n\n1034\n00:59:15,930 --> 00:59:21,190\nwe'll do server 1, when Web 04 comes up,\nit should be a Linux box,\n\n1035\n00:59:21,190 --> 00:59:26,970\nand it should have the web server\nalready installed on it, all right.\n\n1036\n00:59:26,970 --> 00:59:30,192\nSo that's an example of doing a copy or\na clone.\n\n1037\n00:59:30,192 --> 00:59:33,780\nAll right, and if I take Web 04\nhere it's booting up right now.\n\n1038\n00:59:33,780 --> 00:59:35,080\nSo we'll give it second,\nI just wanna check and\n\n1039\n00:59:35,080 --> 00:59:40,680\nmake sure that it is actually\nrunning the HTTPD, the web service.\n\n1040\n00:59:40,680 --> 00:59:45,150\nAnd it should be, if I'm fast enough I can\nprobably see it right here at boot time.\n\n1041\n00:59:45,150 --> 00:59:47,757\nApparently I wasn't, so\nI'll find it the good old fashioned way\n\n1042\n00:59:53,100 --> 00:59:54,410\nAnd sure enough, there it is.\n\n1043\n00:59:55,420 --> 00:59:59,240\nSo quick easy way we can make\na true copy of a machine.\n\n1044\n00:59:59,240 --> 01:00:03,470\nSome of the problems we bump into with\ncopies are things like IP addresses.\n\n1045\n01:00:03,470 --> 01:00:06,440\nIf you statically assigned an IP\naddress you may have duplicates.\n\n1046\n01:00:06,440 --> 01:00:08,150\nIf you set a host name.\n\n1047\n01:00:08,150 --> 01:00:10,900\nThey'll both have the same\nhost name cuz they are clones.\n\n1048\n01:00:10,900 --> 01:00:12,210\nYou cloned it, right.\n\n1049\n01:00:12,210 --> 01:00:14,110\nSo when I look at my\nnetworking side of things.\n\n1050\n01:00:14,110 --> 01:00:15,300\nWell it is a little bit smart.\n\n1051\n01:00:15,300 --> 01:00:19,890\nIt'll update the MAC addresses, so\nthat we don't get duplicates there.\n\n1052\n01:00:19,890 --> 01:00:21,830\nSo they do have different MAC addresses.\n\n1053\n01:00:21,830 --> 01:00:24,350\nI'm using DHCP on these, so\nthey're gonna get different ones.\n\n1054\n01:00:24,350 --> 01:00:27,400\nBut if you had done static mappings,\nyou'd have the same IP address.\n\n1055\n01:00:27,400 --> 01:00:28,129\nAnd you'd need to fix that.\n\n1056\n01:00:29,980 --> 01:00:31,670\nThe other option was to build a template.\n\n1057\n01:00:31,670 --> 01:00:33,040\nAnd templates are really cool,\n\n1058\n01:00:33,040 --> 01:00:35,800\nI use templates with Windows\nservers all the time.\n\n1059\n01:00:35,800 --> 01:00:38,470\nWith Windows, if you want to whip\nup a couple of web servers or\n\n1060\n01:00:38,470 --> 01:00:42,740\nwhatever, you can't just do a direct\nclone of your original machine.\n\n1061\n01:00:42,740 --> 01:00:46,360\nIf you do that, they're gonna have the\nsame SID, the same security identifier,\n\n1062\n01:00:46,360 --> 01:00:48,580\nand it causes all sorts of problems.\n\n1063\n01:00:48,580 --> 01:00:51,630\nSo in the Windows world we have\na utility called Sysprep, and\n\n1064\n01:00:51,630 --> 01:00:55,790\nwe use the Sysprep utility to\nmake our virtual machine generic.\n\n1065\n01:00:55,790 --> 01:00:57,700\nWe take away all the unique information.\n\n1066\n01:00:57,700 --> 01:01:02,560\nThe computer name, the IP address,\nthe security identifier.\n\n1067\n01:01:02,560 --> 01:01:04,190\nWe strip all that out, and\n\n1068\n01:01:04,190 --> 01:01:08,710\nthen the next time the virtual machine\nboots up, it will get all new information.\n\n1069\n01:01:08,710 --> 01:01:12,848\nWell what we can do is we can take a VM,\nget it set up exactly the way we want,\n\n1070\n01:01:12,848 --> 01:01:16,670\nand run Sysprep and\nshut that machine down.\n\n1071\n01:01:16,670 --> 01:01:19,870\nAnd once that's done,\nwe can convert it to a template.\n\n1072\n01:01:19,870 --> 01:01:23,510\nAnd we can then spin up as many\nmachines as we want from that template.\n\n1073\n01:01:24,570 --> 01:01:26,460\nThe process is pretty straight forward.\n\n1074\n01:01:26,460 --> 01:01:30,030\nIf I take Web0,\nlet's see who is a Windows box.\n\n1075\n01:01:30,030 --> 01:01:30,540\nI think Web 02.\n\n1076\n01:01:32,620 --> 01:01:34,841\nIf I take Web 02 right here,\nyeah, it's a windows box.\n\n1077\n01:01:38,437 --> 01:01:42,343\nAnd if I just get logged in to it, so what\nI would do is I would get logged in, and\n\n1078\n01:01:42,343 --> 01:01:46,433\nI would get it set up exactly the way that\nI wanted it, you know configure whatever\n\n1079\n01:01:46,433 --> 01:01:49,957\noptions I needed and get things\nkinda set up, and, what is it doing?\n\n1080\n01:01:52,720 --> 01:01:56,140\nSeems to have kind of frozen on me.\n\n1081\n01:01:57,860 --> 01:02:01,410\nWell, that's our standard\nWindows environment, I suppose.\n\n1082\n01:02:01,410 --> 01:02:05,330\nSo [LAUGH] I guess I could try one of\nthese other ones, where's this guy stored?\n\n1083\n01:02:05,330 --> 01:02:10,050\nLet me try this one, so\nwe can take one of these Windows boxes,\n\n1084\n01:02:10,050 --> 01:02:10,910\nthough, and we can log in.\n\n1085\n01:02:10,910 --> 01:02:12,180\nAnd we can just run Sysprep.\n\n1086\n01:02:12,180 --> 01:02:14,110\nAnd I guess,\nif you wanna learn more about Sysprep,\n\n1087\n01:02:14,110 --> 01:02:17,220\nyou can always jump over to one of our\nserver shows and check it out there.\n\n1088\n01:02:17,220 --> 01:02:18,320\nBut it's a simple utility.\n\n1089\n01:02:18,320 --> 01:02:19,460\nYou just run it.\n\n1090\n01:02:19,460 --> 01:02:22,520\nIt generalizes the machine and\nthen shuts it down.\n\n1091\n01:02:22,520 --> 01:02:26,320\nAnd I would show you that if this\nmachine was working which it is not.\n\n1092\n01:02:27,620 --> 01:02:28,723\nLet's see how this other guy's doing.\n\n1093\n01:02:33,630 --> 01:02:38,163\nAll right, so once it's shut down, when\nyou right click on the VM, where I went to\n\n1094\n01:02:38,163 --> 01:02:43,170\ncopy VM a moment ago, you'll see another\noption that says, convert to template.\n\n1095\n01:02:43,170 --> 01:02:48,337\nAnd when you convert it to a template, now\nit's ready to be cloned at your leisure.\n\n1096\n01:02:48,337 --> 01:02:53,010\nAnd you know I'm impatient here, so\nlet me just shut this one back down again.\n\n1097\n01:02:53,010 --> 01:02:54,730\nAll right so\nI'm just gonna shut it back down.\n\n1098\n01:02:54,730 --> 01:02:57,540\nIt does need to be shut off to\nturn it into a template, and\n\n1099\n01:02:57,540 --> 01:02:59,460\nyeah now it gets a little\nlong on the screen.\n\n1100\n01:02:59,460 --> 01:03:02,251\n[LAUGH] So it does need to be shut\noff to turn it into a template, but\n\n1101\n01:03:02,251 --> 01:03:06,190\nonce you've got it shut down you can right\nclick and chose Convert to Template.\n\n1102\n01:03:06,190 --> 01:03:08,740\nAll right, so\nI'm gonna go ahead and convert it.\n\n1103\n01:03:08,740 --> 01:03:12,830\nAnd once it's converted, see how\nit's stored down here as a template.\n\n1104\n01:03:12,830 --> 01:03:17,840\nAnd now anytime I need another web server,\nI can go to new VM,\n\n1105\n01:03:17,840 --> 01:03:21,580\nand when I move forward in here,\nI've got that template.\n\n1106\n01:03:21,580 --> 01:03:24,350\nRight there, ITProTV2-web01.\n\n1107\n01:03:24,350 --> 01:03:29,140\nI can pick that template and I can spawn\na new virtual machine based of it.\n\n1108\n01:03:29,140 --> 01:03:34,790\nSo maybe I create ITProTV Web 05 or\n6, I think is what I'm up to now.\n\n1109\n01:03:34,790 --> 01:03:36,030\nAnd I can hit next.\n\n1110\n01:03:36,030 --> 01:03:38,270\nAnd it's gonna build me\na new virtual machine.\n\n1111\n01:03:38,270 --> 01:03:40,680\nThe nice thing about\nthe template versus the clone\n\n1112\n01:03:40,680 --> 01:03:43,440\nis that when I choose that template and\nmove forward,\n\n1113\n01:03:43,440 --> 01:03:46,310\nI actually do have the chance to\noverride some of the settings.\n\n1114\n01:03:46,310 --> 01:03:49,610\nI can modify things,\napparently I left xen-tools,\n\n1115\n01:03:49,610 --> 01:03:53,260\nthe disk in the drive when I cloned it,\nso there we go.\n\n1116\n01:03:53,260 --> 01:03:55,440\nI can choose to move\nthe storage around and stuff.\n\n1117\n01:03:55,440 --> 01:03:58,790\nThese were things that I was\nsomewhat limited on with the clone.\n\n1118\n01:03:58,790 --> 01:04:03,470\nI can change CPU's and memory, and\nI can change the size of the disk.\n\n1119\n01:04:03,470 --> 01:04:06,860\nSo we get a little bit more flexibility\nthan what we had on the other one.\n\n1120\n01:04:08,590 --> 01:04:12,630\nAnd attach that network adapter,\nand then we'll let it create.\n\n1121\n01:04:12,630 --> 01:04:16,220\nSo now it's spinning up a new VM,\nbased of that template from the old one.\n\n1122\n01:04:16,220 --> 01:04:17,430\nTemplates are pretty handy.\n\n1123\n01:04:17,430 --> 01:04:20,680\nTemplates are also shared\nacross the entire pool.\n\n1124\n01:04:20,680 --> 01:04:24,350\nSo I can create servers across the pool\nwherever I want, all using that template.\n\n1125\n01:04:24,350 --> 01:04:26,520\nIt's there and it's a part of the pool.\n\n1126\n01:04:26,520 --> 01:04:30,840\nSo there I see Web 06 coming up right now,\nbuilt right off of that template.\n\n1127\n01:04:30,840 --> 01:04:33,690\nAnd if I take a look at its console,\nI can see it’s already booting up.\n\n1128\n01:04:33,690 --> 01:04:35,740\nIt’s going along pretty quick.\n\n1129\n01:04:35,740 --> 01:04:36,960\nTemplates are pretty handy.\n\n1130\n01:04:36,960 --> 01:04:38,140\nSo just remember,\n\n1131\n01:04:38,140 --> 01:04:43,500\nif we do the copy, it’s exact copy of the\nVM, including the hardware configuration.\n\n1132\n01:04:43,500 --> 01:04:47,530\nIf we do a template,\nwe can modify the hardware configuration.\n\n1133\n01:04:47,530 --> 01:04:49,110\nTweak it and set it however we need.\n\n1134\n01:04:50,230 --> 01:04:54,420\nSo that's an example right there how we\ncan use those quick easy ways to provision\n\n1135\n01:04:54,420 --> 01:04:55,540\nnew machines.\n\n1136\n01:04:55,540 --> 01:04:58,550\nThere's several other tools that\nare out there that do this, but\n\n1137\n01:04:58,550 --> 01:05:00,212\nthat's what's kinda built in.\n\n1138\n01:05:00,212 --> 01:05:05,340\nEven the Citrix has various xen-tools that\nyou can use to push out new machines and\n\n1139\n01:05:05,340 --> 01:05:06,650\nprovision them quickly.\n\n1140\n01:05:06,650 --> 01:05:08,560\nBut this is a good example right here.\n\n1141\n01:05:10,090 --> 01:05:11,990\nAll right.\nWell, I think that's about it.\n\n1142\n01:05:11,990 --> 01:05:13,510\nLet me see if I missed anything.\n\n1143\n01:05:13,510 --> 01:05:15,320\nNope.\nI think that's about it for\n\n1144\n01:05:15,320 --> 01:05:18,900\nour general administration tasks, so it\nwould probably be a pretty good spot for\n\n1145\n01:05:18,900 --> 01:05:21,530\nus to wrap up, I do wanna remind you guys,\n\n1146\n01:05:21,530 --> 01:05:24,530\nif you have any questions on this stuff,\nbecause it's a lot, you know,\n\n1147\n01:05:24,530 --> 01:05:27,220\nthere's a lot of neat things in here,\nmake sure you ask.\n\n1148\n01:05:27,220 --> 01:05:30,317\nAll right, live during the show\nyou can go to itpro.tv/live and\n\n1149\n01:05:30,317 --> 01:05:33,250\nyou'll see the chat box\nright beneath your video.\n\n1150\n01:05:33,250 --> 01:05:34,520\nPost your questions there.\n\n1151\n01:05:34,520 --> 01:05:36,180\nWe monitor and answer.\n\n1152\n01:05:36,180 --> 01:05:39,580\nIf we're not live when you go there,\nthen check out the Q and A forums.\n\n1153\n01:05:39,580 --> 01:05:41,480\nYou'll see a link at\nthe top of every page.\n\n1154\n01:05:41,480 --> 01:05:45,170\nIt says Q and A, click on that and\nit takes you into the forums.\n\n1155\n01:05:45,170 --> 01:05:46,230\nYou can post your questions there.\n\n1156\n01:05:46,230 --> 01:05:47,790\nAnd again, we monitor and answer.\n\n1157\n01:05:47,790 --> 01:05:49,810\nWe wanna make sure you guys get\nthe information that you need so\n\n1158\n01:05:49,810 --> 01:05:51,780\nthat you can be successful.\n\n1159\n01:05:51,780 --> 01:05:53,991\nAll right,\nwell I hope you guys enjoyed the show.\n\n1160\n01:05:53,991 --> 01:05:58,806\nI'm Don Pezet, signing off for\nITProTV and I will see you next time.\n\n1161\n01:05:58,806 --> 01:06:05,889\n[MUSIC]\n\n",
          "vimeoId": "100414405"
        },
        {
          "description": "",
          "length": "1229",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/citrixxenserver/005-Monitoring-Performance.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/citrixxenserver/005-Monitoring-Performance-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/citrixxenserver/005-Monitoring-Performance-sm.jpg",
          "title": "Monitoring Performance",
          "transcript": "1\n00:00:00,000 --> 00:00:07,041\n[MUSIC]\n\n2\n00:00:07,041 --> 00:00:09,260\nWelcome back everyone.\n\n3\n00:00:09,260 --> 00:00:13,850\nIn this segment, we're gonna take a look\nat performance under Citrix XenServer.\n\n4\n00:00:13,850 --> 00:00:17,360\nNow this is gonna be a shorter segment\nthann a lot of other episodes and\n\n5\n00:00:17,360 --> 00:00:22,610\nthe reason is there's not a whole lot\nof visibility inside a XenServer.\n\n6\n00:00:22,610 --> 00:00:27,560\nIt's kinda lackluster,\nas far as features go, in looking at\n\n7\n00:00:27,560 --> 00:00:31,710\nlogging and collecting historical data,\nall that other information.\n\n8\n00:00:31,710 --> 00:00:34,225\nIt's just not a very powerful system for\nthat.\n\n9\n00:00:34,225 --> 00:00:38,230\nXenServer is great at some things,\nperformance logging is not one of them.\n\n10\n00:00:38,230 --> 00:00:41,430\nAt Citrix headquarters, the theory is\n\n11\n00:00:41,430 --> 00:00:45,010\nyou really don't need to monitor the host\nas much as you do the virtual machine.\n\n12\n00:00:45,010 --> 00:00:48,840\nSo you should be doing your performance\nmonitoring inside of the VMs themselves.\n\n13\n00:00:48,840 --> 00:00:51,110\nSo we're relying upon Linux or Windows or\n\n14\n00:00:51,110 --> 00:00:54,550\nwhatever OS it is you're running in\nyour VMs to monitor their performance.\n\n15\n00:00:54,550 --> 00:00:58,090\nOn the servers side you should\nreally just be making sure you don't\n\n16\n00:00:58,090 --> 00:01:00,680\nover allocate your resources.\n\n17\n00:01:00,680 --> 00:01:02,600\nAnd by resources I mean the big four.\n\n18\n00:01:02,600 --> 00:01:06,920\nWe've got processor,\nmemory, hard drive, or\n\n19\n00:01:06,920 --> 00:01:11,360\ndisk IO really, input output, and\nthen network or band with, right.\n\n20\n00:01:11,360 --> 00:01:12,600\nThose are our four things.\n\n21\n00:01:12,600 --> 00:01:15,930\nNetwork, hard drive, memory, processor.\n\n22\n00:01:15,930 --> 00:01:18,700\nAnd we just need to make sure\nwe don't over allocate them.\n\n23\n00:01:18,700 --> 00:01:22,660\nWell, when it comes to things like memory,\nthat's pretty easy to keep track of.\n\n24\n00:01:22,660 --> 00:01:25,330\nIf I have five virtual machines and\n\n25\n00:01:25,330 --> 00:01:29,280\nI give each one two gigs of RAM,\nthat's ten gigs of RAM.\n\n26\n00:01:29,280 --> 00:01:33,860\nI need to have at least ten gigs available\non the host OS or I'm gonna have issues.\n\n27\n00:01:33,860 --> 00:01:36,596\nRight?\nAnd if we use dynamic RAM, then you could\n\n28\n00:01:36,596 --> 00:01:40,308\nsay I have ten gigs allocated but\nonly eight gigs in the server.\n\n29\n00:01:40,308 --> 00:01:43,394\nYou can do things like that but\nit hurts performance right off the bat so\n\n30\n00:01:43,394 --> 00:01:45,707\nit's really only in testing and\nlab environments.\n\n31\n00:01:45,707 --> 00:01:48,866\nFor CPU, we have to think about cores.\n\n32\n00:01:48,866 --> 00:01:53,766\nIf I have eight virtual machines and\nthey all have one VCPU, well,\n\n33\n00:01:53,766 --> 00:01:55,702\nthen there's eight VMs.\n\n34\n00:01:55,702 --> 00:01:57,825\nThat means I'm gonna need eight cores so\n\n35\n00:01:57,825 --> 00:02:01,160\nthat each of them can have\ntheir one CPU access, right.\n\n36\n00:02:01,160 --> 00:02:04,070\nIf I have more, I can do that, but\nnow there'll be contention for\n\n37\n00:02:04,070 --> 00:02:05,600\naccess to those CPUs.\n\n38\n00:02:05,600 --> 00:02:08,820\nSo that's really all we need\non the performance side but\n\n39\n00:02:08,820 --> 00:02:10,640\nthat doesn't mean there isn't\nanything we can look at.\n\n40\n00:02:10,640 --> 00:02:13,370\nThere are some neat things and I'm\ngonna show you right here in XenCenter.\n\n41\n00:02:13,370 --> 00:02:17,025\nI'm looking at my little server cluster\nthat we set up in an earlier episode, and\n\n42\n00:02:17,025 --> 00:02:18,547\nso I've got my servers laid out.\n\n43\n00:02:18,547 --> 00:02:22,916\nAnd one of the nice things you'll notice\nis that when you go to look at the server,\n\n44\n00:02:22,916 --> 00:02:24,970\nso I'm just right here on my pool, and\n\n45\n00:02:24,970 --> 00:02:27,431\nI can see the servers\nthat are underneath it.\n\n46\n00:02:27,431 --> 00:02:30,890\nAnd you get these nice\nlittle charts that show you,\n\n47\n00:02:30,890 --> 00:02:34,060\nyou can see right here ITPROTV2-SERVER2.\n\n48\n00:02:34,060 --> 00:02:35,900\nThat's my host.\n\n49\n00:02:35,900 --> 00:02:39,217\nHas 8 gigs of RAM in it and\nI've allocated 5 gigs out.\n\n50\n00:02:39,217 --> 00:02:41,893\nSo I can see how much RAM I'm using, and\n\n51\n00:02:41,893 --> 00:02:45,139\nthen beneath that I can\nsee my individual VMs and\n\n52\n00:02:45,139 --> 00:02:50,436\nI can see that I've given 2 gigs of RAM\nto one VM and 2 gigs of RAM to the other.\n\n53\n00:02:50,436 --> 00:02:55,475\nAnd inside of them they're\nusing like 440 and 499 megs.\n\n54\n00:02:55,475 --> 00:03:00,484\nSo seeing that right in there,\nI also see the CPUs,\n\n55\n00:03:00,484 --> 00:03:05,857\nI've given one CPU to Web 02 and\ntwo CPUs to Web 06.\n\n56\n00:03:05,857 --> 00:03:08,894\nNow I've only got two CPUs\nin this particular host, so\n\n57\n00:03:08,894 --> 00:03:13,714\nit shows right right there that I've got\ntwo CPUs, so I've over-allocated my CPUs,\n\n58\n00:03:13,714 --> 00:03:16,885\nbut that's okay because if\nyou look at the utilization,\n\n59\n00:03:16,885 --> 00:03:19,752\nthese guys are sitting here\ndoing next to nothing.\n\n60\n00:03:19,752 --> 00:03:22,829\nThere sitting at 0% CPU, 1% total.\n\n61\n00:03:22,829 --> 00:03:27,765\nSo we can use this screen right here,\njust our general overview,\n\n62\n00:03:27,765 --> 00:03:33,232\nout search screen to see basic\nthings like processor and memory.\n\n63\n00:03:33,232 --> 00:03:36,413\nAll right, there are other places that we\ncan look for this kind of information.\n\n64\n00:03:36,413 --> 00:03:39,216\nAnd you'll see it as you drill\ndown into the individual VMs.\n\n65\n00:03:39,216 --> 00:03:41,560\nIt's a little more detailed.\n\n66\n00:03:41,560 --> 00:03:43,310\nNotice I've got this memory tab up here.\n\n67\n00:03:43,310 --> 00:03:45,900\nAnd that's where I can see\nthe overall memory for my servers.\n\n68\n00:03:45,900 --> 00:03:49,140\nAnd it's laid out showing which\nVM's are consuming what memory.\n\n69\n00:03:49,140 --> 00:03:51,870\nThis screen is really useful if\nyou're using dynamic memory,\n\n70\n00:03:51,870 --> 00:03:53,020\ncuz it'll account for that.\n\n71\n00:03:53,020 --> 00:03:55,550\nSo it'll show the various\nallocations that are out there.\n\n72\n00:03:55,550 --> 00:03:59,210\nSo you'll have your currently used\nversus your available, and so on.\n\n73\n00:03:59,210 --> 00:04:02,590\nSo we can start to make sure\nthat we right-sized our server.\n\n74\n00:04:02,590 --> 00:04:03,840\nWe can also use this for planning.\n\n75\n00:04:03,840 --> 00:04:05,759\nIf we have a cluster and one node fails,\n\n76\n00:04:05,759 --> 00:04:08,389\nthe other one needs to be\nable to handle the full load.\n\n77\n00:04:08,389 --> 00:04:12,243\nSo we can use this to monitor how\nmuch memory we're using and say,\n\n78\n00:04:12,243 --> 00:04:14,570\ncan one server carry both sets of load.\n\n79\n00:04:14,570 --> 00:04:16,850\nAnd in my case, they can,\nthere is enough room.\n\n80\n00:04:16,850 --> 00:04:19,830\nBut if I add even one more VM,\nI probably won't be able to.\n\n81\n00:04:19,830 --> 00:04:22,080\nSo this is a good place to look and\nsee that.\n\n82\n00:04:23,100 --> 00:04:24,010\nAll right.\n\n83\n00:04:24,010 --> 00:04:26,210\nSome of the other tabs,\nlike the storage tab and\n\n84\n00:04:26,210 --> 00:04:29,720\nthe networking tab, don't really\ngive us much as far as performance.\n\n85\n00:04:29,720 --> 00:04:33,280\nThey give us reporting as far as what our\nIP addresses are and stuff like that.\n\n86\n00:04:33,280 --> 00:04:35,890\nBut you're not gonna see\na lot of performance there.\n\n87\n00:04:35,890 --> 00:04:40,030\nOn the hosts, if I go down to\nan individual host like server 2,\n\n88\n00:04:40,030 --> 00:04:43,540\nI see that same kind of memory\nblock here under the Search tab.\n\n89\n00:04:43,540 --> 00:04:45,730\nBut it's just for this particular host.\n\n90\n00:04:45,730 --> 00:04:49,440\nAnd if I look under Memory,\nagain I see that same basic layout, and\n\n91\n00:04:49,440 --> 00:04:52,110\nI can get an idea of what my\nvirtual machines are consuming.\n\n92\n00:04:53,230 --> 00:04:58,130\nBut I also get another tab which is\nthis guy right here, Performance.\n\n93\n00:04:58,130 --> 00:05:03,310\nAnd that’s gonna really be our go to place\nfor looking at how our server is behaving.\n\n94\n00:05:04,320 --> 00:05:09,016\nNow, it’s gonna show us information\nbased on the server itself as well as\n\n95\n00:05:09,016 --> 00:05:11,375\ninformation on our individual VMs.\n\n96\n00:05:11,375 --> 00:05:15,318\nWe can go to our individual VM and\ngo to Performance and\n\n97\n00:05:15,318 --> 00:05:19,269\nthat's where we see just\nfour ITPROTV2-WEB02.\n\n98\n00:05:19,269 --> 00:05:21,138\nSo, here's that performance just for it.\n\n99\n00:05:21,138 --> 00:05:24,296\nBut if I go back up to the host,\nnow I'm seeing it for\n\n100\n00:05:24,296 --> 00:05:26,950\nall of the VMs rolled up together.\n\n101\n00:05:26,950 --> 00:05:27,500\nRight.\n\n102\n00:05:27,500 --> 00:05:31,580\nNow this screen is pretty cool because\nit shows you processor, memory,\n\n103\n00:05:31,580 --> 00:05:34,800\nand if I scroll down, network, right.\n\n104\n00:05:34,800 --> 00:05:38,630\nSo there's three of the big four\nthings that I need to monitor.\n\n105\n00:05:38,630 --> 00:05:40,500\nSo I can spot those right here.\n\n106\n00:05:40,500 --> 00:05:42,950\nAnd we've got that available.\n\n107\n00:05:42,950 --> 00:05:46,660\nIf I go in to my VMs, and\nI go to the Performance,\n\n108\n00:05:46,660 --> 00:05:51,570\non the virtual machine I can see\nProcessor, Memory, and Network.\n\n109\n00:05:51,570 --> 00:05:55,410\nBut I also get the fourth one,\nwhich is Disc Performance.\n\n110\n00:05:55,410 --> 00:05:59,880\nI can see how much read and write activity\nthis virtual machine has generated.\n\n111\n00:05:59,880 --> 00:06:03,690\nIn most server farms,\nthis IO is your bottleneck.\n\n112\n00:06:03,690 --> 00:06:06,310\nRight.\nYour hard drives are typically the slowest\n\n113\n00:06:06,310 --> 00:06:09,450\nsystem, the slowest piece of\nhard ware in a server, and so\n\n114\n00:06:09,450 --> 00:06:11,200\nit's normally where our bottleneck is.\n\n115\n00:06:11,200 --> 00:06:14,790\nIf you've got Solid State Digital, or SSD,\nthen it's a different story right, but\n\n116\n00:06:14,790 --> 00:06:17,420\nwith spinning disks they're\nalmost always your bottleneck.\n\n117\n00:06:17,420 --> 00:06:21,740\nSo we can look and see how much\ndisk I/O this system is generating\n\n118\n00:06:21,740 --> 00:06:25,680\nbecause it's competing with the other VMs\nthat are sharing access to that storage.\n\n119\n00:06:25,680 --> 00:06:26,520\nSo we can see it right here.\n\n120\n00:06:27,950 --> 00:06:30,740\nAll right, now before I dive into\nany of the actual details here,\n\n121\n00:06:30,740 --> 00:06:33,700\nlet me just talk about how this\nperformance information is gathered.\n\n122\n00:06:33,700 --> 00:06:38,162\nThe performance information is\nactually being gathered By XenCenter.\n\n123\n00:06:38,162 --> 00:06:40,830\nSo XenServer, the UI that I'm using,\n\n124\n00:06:40,830 --> 00:06:44,490\nit's actually gathering this\ndata from the host underneath.\n\n125\n00:06:44,490 --> 00:06:50,540\nSo, if I close this,\nwhat happens to all my performance data?\n\n126\n00:06:50,540 --> 00:06:52,110\nWell, it goes away.\n\n127\n00:06:52,110 --> 00:06:53,210\nIt does get logged.\n\n128\n00:06:53,210 --> 00:06:54,540\nIt doesn't get saved.\n\n129\n00:06:54,540 --> 00:06:58,000\nSo what I'm looking at is\nactually a point in time.\n\n130\n00:06:58,000 --> 00:07:00,980\nI am seeing how this\nserver behaves right now.\n\n131\n00:07:00,980 --> 00:07:01,950\nAll right.\n\n132\n00:07:01,950 --> 00:07:06,220\nAnd it will log as log as\nI keep XenCenter open.\n\n133\n00:07:06,220 --> 00:07:09,910\nBut if I close XenCenter and\nopen it again like I just did,\n\n134\n00:07:09,910 --> 00:07:14,950\nwhen I go into one of those performance\nscreens, well, I lose a lot of my data.\n\n135\n00:07:14,950 --> 00:07:15,520\nAll right.\n\n136\n00:07:15,520 --> 00:07:17,960\nSo it's actually preserved\nsome of it here but\n\n137\n00:07:17,960 --> 00:07:21,610\nwe'll lose a lot of historical\ndata going back days or whatever.\n\n138\n00:07:21,610 --> 00:07:24,500\nSo, you may not be able to\ngo back very far at all.\n\n139\n00:07:24,500 --> 00:07:28,080\nIn fact, looking at mine, I'm only\ngoing back maybe about 15 minutes.\n\n140\n00:07:28,080 --> 00:07:30,170\nSo, I'm not going back very far here.\n\n141\n00:07:30,170 --> 00:07:32,880\nSo you may not have a ton\nof historical data.\n\n142\n00:07:32,880 --> 00:07:36,940\nIf you need that, you'll need to rely\non another monitoring system and\n\n143\n00:07:36,940 --> 00:07:38,880\nthere's plenty of them that are out there.\n\n144\n00:07:38,880 --> 00:07:43,830\nLike the SolarWinds Network\nPerformance Monitor or CA Unicenter.\n\n145\n00:07:43,830 --> 00:07:44,910\nProducts like that,\n\n146\n00:07:44,910 --> 00:07:49,490\nSpiceworks, they can dial right in\nto Xen and monitor the performance.\n\n147\n00:07:49,490 --> 00:07:51,916\nCuz XenServer's really just\nrunning on top of Red Hat Linux.\n\n148\n00:07:51,916 --> 00:07:53,441\nAnd so you can enable SNMP, and\n\n149\n00:07:53,441 --> 00:07:56,324\nyou can monitor it directly\nthrough third party systems.\n\n150\n00:07:56,324 --> 00:08:00,489\nI've seen plenty of people make\nuse of Nagios and other systems.\n\n151\n00:08:00,489 --> 00:08:02,447\nTo be able to do that.\n\n152\n00:08:02,447 --> 00:08:03,674\nAll right.\n\n153\n00:08:03,674 --> 00:08:06,842\nSo the other thing is,\nwe're seeing a point in time, and\n\n154\n00:08:06,842 --> 00:08:10,210\nif you look down here you'll see\nI have a bigger time window.\n\n155\n00:08:10,210 --> 00:08:13,720\nActually, I guess this has been running\nlonger than I thought cuz I can go back.\n\n156\n00:08:13,720 --> 00:08:16,490\nIt looks like I can go all the way\nback to 9 AM this morning.\n\n157\n00:08:16,490 --> 00:08:18,700\nI can't go back to yesterday.\n\n158\n00:08:18,700 --> 00:08:22,770\nWhich this machine was running yesterday,\nbut I can scroll back a decent bit.\n\n159\n00:08:23,800 --> 00:08:27,550\nWell it goes back to midnight,\nand, yesterday.\n\n160\n00:08:27,550 --> 00:08:29,990\nSo it looks like we got a little\nbit of data yesterday and\n\n161\n00:08:29,990 --> 00:08:31,130\nthen nothing before that.\n\n162\n00:08:31,130 --> 00:08:34,940\nEven though this server has been running\nfor a long time, it’s been running for\n\n163\n00:08:34,940 --> 00:08:37,900\nat least two weeks,\nI can only go back to yesterday.\n\n164\n00:08:37,900 --> 00:08:40,430\nBut we can start to look\nat that performance, and\n\n165\n00:08:40,430 --> 00:08:45,640\nwe can use this time slider down here to\nadjust what window of time we’re seeing.\n\n166\n00:08:45,640 --> 00:08:49,410\nAnd that’s really handy cuz if you’re\ntrying to troubleshoot a problem and\n\n167\n00:08:49,410 --> 00:08:54,030\nyou don’t necessarily know exactly\nwhere that problem is we can\n\n168\n00:08:54,030 --> 00:08:58,720\ndial this in and get a view of\nthe problem in that particular time.\n\n169\n00:08:58,720 --> 00:09:00,301\nAnd we can start to isolate it down and\n\n170\n00:09:00,301 --> 00:09:02,750\nsee exactly when we had\na performance spike or whatever.\n\n171\n00:09:02,750 --> 00:09:04,630\nAll right.\n\n172\n00:09:04,630 --> 00:09:07,320\nThe other thing you're gonna notice\nare these life cycle events over here.\n\n173\n00:09:07,320 --> 00:09:10,670\nThe lifecycle events are telling you\nusually startup and shutdown, but\n\n174\n00:09:10,670 --> 00:09:12,230\nthey'll show errors also.\n\n175\n00:09:12,230 --> 00:09:16,850\nSo if the system was turned on or turned\noff or whatever, it'll show up in here.\n\n176\n00:09:16,850 --> 00:09:21,550\nSo, for example,\nif I move this back to real time, so\n\n177\n00:09:21,550 --> 00:09:25,440\nI'm just gonna try and\nmove my little slider to get back to now.\n\n178\n00:09:27,750 --> 00:09:29,080\nThere we go.\n\n179\n00:09:29,080 --> 00:09:32,490\nAnd, so as I'm looking at this,\n\n180\n00:09:32,490 --> 00:09:35,340\nif I take a virtual machine like web 02,\nand I reboot it.\n\n181\n00:09:36,920 --> 00:09:40,010\nSo we'll go ahead and reboot it,\nthat's gonna be a lifecycle of that.\n\n182\n00:09:40,010 --> 00:09:41,540\nAnd so it's going to restart,\n\n183\n00:09:41,540 --> 00:09:44,205\nand it'll actually log an entry over\nhere to show that that happened.\n\n184\n00:09:44,205 --> 00:09:48,220\nAnd, actually, that may be a bad example.\n\n185\n00:09:48,220 --> 00:09:50,020\nI don't recall if\na reboot does trigger it,\n\n186\n00:09:50,020 --> 00:09:51,955\nbecause with a reboot you\nnever actually power off.\n\n187\n00:09:51,955 --> 00:09:53,220\nOh no it did.\n\n188\n00:09:53,220 --> 00:09:53,856\nIt triggered it.\n\n189\n00:09:53,856 --> 00:09:55,620\nThere it goes.\nSo I see I've got an entry here for\n\n190\n00:09:55,620 --> 00:09:58,590\nJuly 10th at 10:57 AM.\n\n191\n00:09:58,590 --> 00:09:59,585\nThat's that reboot.\n\n192\n00:09:59,585 --> 00:10:01,090\nSo I know that that happened.\n\n193\n00:10:01,090 --> 00:10:03,650\nThat's a significant event in\nthe life of that virtual machine.\n\n194\n00:10:03,650 --> 00:10:06,520\nAnd you'll see the same thing on\nthe servers when we monitor it.\n\n195\n00:10:06,520 --> 00:10:09,080\nWe have lifecycle events, and\nthey're lifecycle events for\n\n196\n00:10:09,080 --> 00:10:11,560\nthe VMs as well as the host itself.\n\n197\n00:10:11,560 --> 00:10:13,050\nSo we can see those, and\n\n198\n00:10:13,050 --> 00:10:17,300\nif you double click on it, it'll take\nyou right to where that event happened.\n\n199\n00:10:17,300 --> 00:10:19,930\nAnd so now I can see,\nif I double click on this one,\n\n200\n00:10:19,930 --> 00:10:21,710\nthat's where that reboot happened there.\n\n201\n00:10:21,710 --> 00:10:26,800\nIf I go here, I can see where it started\nup versus here where it shut down.\n\n202\n00:10:26,800 --> 00:10:29,550\nSo we can kind of jump to what was\ngoing on at that point in time.\n\n203\n00:10:32,350 --> 00:10:33,140\nAll right.\n\n204\n00:10:33,140 --> 00:10:34,510\nOther things we can do.\n\n205\n00:10:34,510 --> 00:10:37,140\nYou can rearrange the order\non the screen if you want.\n\n206\n00:10:37,140 --> 00:10:39,500\nIf memory is your main concern,\nyou can move that up so\n\n207\n00:10:39,500 --> 00:10:43,200\nthat memory is on top instead of CPU,\njust simple aesthetic things.\n\n208\n00:10:43,200 --> 00:10:47,700\nYou also have under actions where you\ncan edit and change the graphs, so\n\n209\n00:10:47,700 --> 00:10:50,180\nyou can modify how that graph is working.\n\n210\n00:10:50,180 --> 00:10:53,740\nAnd here's where you'll notice a lot\nof extra things that we can monitor.\n\n211\n00:10:53,740 --> 00:10:56,770\nInformation about like CPU contention.\n\n212\n00:10:56,770 --> 00:11:01,600\nSo when we have multiple VMs competing for\nthe same CPU, or disk write latency,\n\n213\n00:11:01,600 --> 00:11:02,980\ndisk read latency.\n\n214\n00:11:02,980 --> 00:11:07,260\nSo a lot of extra information that can be\nmonitored that isn't monitored by default.\n\n215\n00:11:07,260 --> 00:11:10,550\nSo here we can get it, and\nwe can have that access.\n\n216\n00:11:10,550 --> 00:11:14,220\nYou can also create your own graph if\nyou wanna add in a new one that monitors\n\n217\n00:11:14,220 --> 00:11:15,700\nsomething specifically.\n\n218\n00:11:15,700 --> 00:11:21,230\nSo I might wanna create one just for\nCPU contention, and\n\n219\n00:11:21,230 --> 00:11:25,200\nthen I can come in here and\nflag that and save it.\n\n220\n00:11:25,200 --> 00:11:28,425\nAnd so now I've got CPU\ncontention being monitored here.\n\n221\n00:11:28,425 --> 00:11:33,350\nAnytime my VM butts up against some\nother VM trying to access CPU,\n\n222\n00:11:33,350 --> 00:11:34,370\nI'll see it go up here.\n\n223\n00:11:34,370 --> 00:11:35,960\nHopefully it sits at zero all the time.\n\n224\n00:11:35,960 --> 00:11:39,380\nThat's what I wanna see, but\nif I see it bump up to one,\n\n225\n00:11:39,380 --> 00:11:42,380\nthen that lets me know that\nwas an instance of contention.\n\n226\n00:11:42,380 --> 00:11:43,460\nAll right.\n\n227\n00:11:43,460 --> 00:11:47,930\nSo, nice little monitoring tools that\nare built in right here we can use,\n\n228\n00:11:47,930 --> 00:11:50,140\njust what's right here on this screen.\n\n229\n00:11:50,140 --> 00:11:51,830\nThese work out pretty well.\n\n230\n00:11:51,830 --> 00:11:55,370\nThere's a few other things we can use for\nmonitoring our server.\n\n231\n00:11:55,370 --> 00:11:57,930\nWe haven't,\nI haven't used it in the other shows.\n\n232\n00:11:57,930 --> 00:12:00,720\nThis view over here, this navigation tree.\n\n233\n00:12:00,720 --> 00:12:02,470\nI kinda like the way\nthat it is by default.\n\n234\n00:12:02,470 --> 00:12:05,820\nBy default you see your pool,\nthe servers underneath it, and\n\n235\n00:12:05,820 --> 00:12:07,050\nthe VMs underneath that.\n\n236\n00:12:07,050 --> 00:12:07,700\nAll right.\n\n237\n00:12:07,700 --> 00:12:10,280\nWell, the more servers you have,\n\n238\n00:12:10,280 --> 00:12:13,320\nthe more challenging it becomes\nto find a virtual machine.\n\n239\n00:12:13,320 --> 00:12:15,280\nSo you've got a nice\nlittle search box up here.\n\n240\n00:12:15,280 --> 00:12:16,110\nSo you can search for\n\n241\n00:12:16,110 --> 00:12:20,096\nsomething like web, and it'll find all\nthe servers that have web in their name.\n\n242\n00:12:20,096 --> 00:12:23,840\nSo that's kinda useful, but\nthere are some other views we can flip to.\n\n243\n00:12:23,840 --> 00:12:28,776\nSo for example we could flip to virtual\nmachines by operating system, and it's\n\n244\n00:12:28,776 --> 00:12:33,060\ngonna categorize them by their operating\nsystem right here so we can see it.\n\n245\n00:12:33,060 --> 00:12:36,870\nBut, one of the views that I\nlike is VMs by PowerState.\n\n246\n00:12:36,870 --> 00:12:40,320\nWhen we go to VMs by PowerState,\nI no longer see my hosts.\n\n247\n00:12:40,320 --> 00:12:42,590\nI just see my virtual machines.\n\n248\n00:12:42,590 --> 00:12:45,100\nAnd I see the virtual machines\nthat are powered off here and\n\n249\n00:12:45,100 --> 00:12:46,970\nthe virtual machines\nthat are powered on here.\n\n250\n00:12:46,970 --> 00:12:50,850\nIt's a quick easy way to validate whether\nyour virtual machines are running.\n\n251\n00:12:50,850 --> 00:12:53,100\nIf one is shut off,\nyou can spot it right here.\n\n252\n00:12:53,100 --> 00:12:54,310\nThe other things is,\n\n253\n00:12:54,310 --> 00:12:57,530\nI don't have to worry about what\nhosts these guys reside on anymore.\n\n254\n00:12:57,530 --> 00:13:00,410\nI could have 50 hosts and\n1000 virtual machines, and\n\n255\n00:13:00,410 --> 00:13:03,510\nI'll just see the list of\nvirtual machines right here\n\n256\n00:13:03,510 --> 00:13:06,190\ninstead of having to find a host and\nthe VM from there.\n\n257\n00:13:06,190 --> 00:13:07,012\nSo that's pretty useful.\n\n258\n00:13:07,012 --> 00:13:08,250\nAll right?\n\n259\n00:13:08,250 --> 00:13:13,380\nThe only negative is from this screen,\nwe can monitor performance of our VMs, but\n\n260\n00:13:13,380 --> 00:13:17,430\nyou can't view the performance of the host\nbecause the hosts just don't show up.\n\n261\n00:13:17,430 --> 00:13:20,580\nSo if I go to running,\nthere is no performance option here.\n\n262\n00:13:20,580 --> 00:13:23,728\nI see my memory summaries,\nbut I don't see performance.\n\n263\n00:13:23,728 --> 00:13:24,830\nAll right?\n\n264\n00:13:24,830 --> 00:13:27,770\nI'm glad I clicked on that because\nhere's another thing worth mentioning.\n\n265\n00:13:27,770 --> 00:13:30,270\nNotice this host here, ITProTVweb04.\n\n266\n00:13:31,340 --> 00:13:37,790\nI can monitor its CPU utilization, but\nmemory, disk, and network are all blank.\n\n267\n00:13:37,790 --> 00:13:41,245\nWe cannot monitor those unless\nwe have Xen tools installed,\n\n268\n00:13:41,245 --> 00:13:45,075\nthe Xen tools that we install\ninside of a virtual machine.\n\n269\n00:13:45,075 --> 00:13:48,135\nWhen you install Xen tools,\nthose will pop-up.\n\n270\n00:13:48,135 --> 00:13:51,585\nWe'll be able to see memory,\ndisk, and network.\n\n271\n00:13:51,585 --> 00:13:53,785\nAll right.\nSo right now those aren't been counted.\n\n272\n00:13:53,785 --> 00:13:56,779\nWhen I look at my performance counters,\nweb 04, any CPU and\n\n273\n00:13:56,779 --> 00:14:00,466\nmemory utilization that it's generating,\nit's not reporting that, and\n\n274\n00:14:00,466 --> 00:14:03,305\nit's not being counted in\nsome of performance counters.\n\n275\n00:14:03,305 --> 00:14:04,654\nWe do need to be aware of that.\n\n276\n00:14:04,654 --> 00:14:06,560\nIt is kind of the limitation.\n\n277\n00:14:06,560 --> 00:14:08,464\nNormally you just install the tools,\nand you're done.\n\n278\n00:14:08,464 --> 00:14:09,240\nRight?\n\n279\n00:14:09,240 --> 00:14:12,350\nBut, occasionally you might\nhave an operating system,\n\n280\n00:14:12,350 --> 00:14:14,060\nmaybe you're running open BSD.\n\n281\n00:14:14,060 --> 00:14:18,210\nWell, open BSD doesn't have a set\nof Xen tools that you can use, and\n\n282\n00:14:18,210 --> 00:14:21,350\nso you can't monitor the performance for\nthat one.\n\n283\n00:14:21,350 --> 00:14:25,185\nOr, you might have\na Linux virtual machine.\n\n284\n00:14:25,185 --> 00:14:25,850\nRight?\n\n285\n00:14:25,850 --> 00:14:28,830\nAnd Linux does have Xen\ntools that you can install.\n\n286\n00:14:28,830 --> 00:14:31,940\nBut if that virtual machine was\nan appliance that you purchased.\n\n287\n00:14:31,940 --> 00:14:34,580\nSo for example, our email virus scanner.\n\n288\n00:14:34,580 --> 00:14:39,770\nWe have a Barracuda anti-spam,\n\n289\n00:14:39,770 --> 00:14:43,400\nor they call it a spam and\nvirus firewall is what it is.\n\n290\n00:14:43,400 --> 00:14:46,090\nLet's see if I can find it.\n\n291\n00:14:46,090 --> 00:14:49,450\nSo we have this Barracuda spam firewall\nthing, that's what we use here.\n\n292\n00:14:49,450 --> 00:14:52,720\nAny email you guys send to me is\ngetting filtered through this thing.\n\n293\n00:14:52,720 --> 00:14:55,930\nAnd originally we had a hardware unit\njust like what they're showing here\n\n294\n00:14:55,930 --> 00:14:58,660\nin the picture, and\nall the email flowed through it.\n\n295\n00:14:58,660 --> 00:15:02,830\nBut, we ended up moving\nit to the Vx Solution,\n\n296\n00:15:02,830 --> 00:15:04,310\nwhich I think was another link here.\n\n297\n00:15:04,310 --> 00:15:07,100\nThere.\nWhich is a virtual machine where they\n\n298\n00:15:07,100 --> 00:15:11,300\ngive you a Linux virtual machine,\nand they have it in VMware,\n\n299\n00:15:11,300 --> 00:15:13,040\nXenServer, and Hyper-V formats.\n\n300\n00:15:13,040 --> 00:15:15,425\nSo we just downloaded the XenServer\nbecause we use XenServer for\n\n301\n00:15:15,425 --> 00:15:16,730\nour service here.\n\n302\n00:15:16,730 --> 00:15:18,770\nAnd so we just downloaded that and\nthrew it on there.\n\n303\n00:15:18,770 --> 00:15:22,070\nWell, it's a Linux vm, but\nthey've locked it down.\n\n304\n00:15:22,070 --> 00:15:25,740\nSo, we can't log into it\nto install the Xen tools.\n\n305\n00:15:25,740 --> 00:15:27,980\nSo while we're running\ntheir virtual machine, and\n\n306\n00:15:27,980 --> 00:15:31,550\nit's running on our XenServers, we can't\nmonitor its performance because of that.\n\n307\n00:15:31,550 --> 00:15:36,350\nInstead we have to rely on their screens,\nthe Barracuda management software\n\n308\n00:15:36,350 --> 00:15:39,270\nto be able to monitor its performance and\nhealth and so on.\n\n309\n00:15:39,270 --> 00:15:42,660\nSo there are scenarios like that where\ninstalling the Xen tools is just\n\n310\n00:15:42,660 --> 00:15:44,060\nnot an option.\n\n311\n00:15:44,060 --> 00:15:46,230\nBut, whenever it's possible, you should.\n\n312\n00:15:46,230 --> 00:15:50,277\nYou should go ahead and install them\neven on a server that has no GUI.\n\n313\n00:15:50,277 --> 00:15:52,277\nRight?\nLike my web 02,\n\n314\n00:15:52,277 --> 00:15:55,406\nno I think it does have a GUI.\n\n315\n00:15:55,406 --> 00:15:57,181\nHow about web 04?\n\n316\n00:15:57,181 --> 00:16:01,701\nYeah, Web 04, it's an install\nof Linux that doesn't have the X\n\n317\n00:16:01,701 --> 00:16:05,348\nenvironment installed so\nI can't fire up X Windows.\n\n318\n00:16:05,348 --> 00:16:08,374\nSo it's just the command line, but\nI still installed the xen-tools,\n\n319\n00:16:08,374 --> 00:16:11,804\nnot because I need things like the mouse\ncursor support or whatever, but because\n\n320\n00:16:11,804 --> 00:16:15,247\nI want to do performance reporting and I\nwant to be able to do graceful shutdowns.\n\n321\n00:16:15,247 --> 00:16:16,960\nThat's the other benefit.\n\n322\n00:16:16,960 --> 00:16:18,490\nIf I hit the Shut Down button,\n\n323\n00:16:18,490 --> 00:16:21,580\nit'll do a graceful shut down\nbecause I have xen-tools installed.\n\n324\n00:16:21,580 --> 00:16:25,110\nSee, there it goes, transitioning instead\nof just yanking the power cord out\n\n325\n00:16:25,110 --> 00:16:27,110\nwhich is what would\nhappen without xen-tools.\n\n326\n00:16:27,110 --> 00:16:30,850\nIf I take a look at one of the other\nservers that didn't have it,\n\n327\n00:16:30,850 --> 00:16:32,990\nI could do that and\nit would just basically yank the power.\n\n328\n00:16:34,260 --> 00:16:36,300\nAll right,\nsome of the other things to be aware of.\n\n329\n00:16:36,300 --> 00:16:41,860\nIf I go back to my server view, I'll get\nmy pool performance, my memory data.\n\n330\n00:16:41,860 --> 00:16:44,050\nI'll be able to get that back again.\n\n331\n00:16:44,050 --> 00:16:46,576\nI can spot in here\nthe performance information for\n\n332\n00:16:46,576 --> 00:16:48,640\nanybody who has xen-tools running.\n\n333\n00:16:48,640 --> 00:16:51,600\nWe can look at that overview,\nsee my disks, network.\n\n334\n00:16:51,600 --> 00:16:53,000\nIt's all kind of right here.\n\n335\n00:16:53,000 --> 00:16:55,850\nThis is usually where I go just for\nmonitoring general performance.\n\n336\n00:16:56,950 --> 00:17:01,129\nBut our rule of thumb is on the host side,\nyou just need to make sure you don't over\n\n337\n00:17:01,129 --> 00:17:05,470\nsubscribe, that you don't assign more\nresources than you actually have.\n\n338\n00:17:05,470 --> 00:17:10,100\nIf you have eight virtual CPUs,\nthat should probably correspond to eight\n\n339\n00:17:10,100 --> 00:17:14,440\nphysical CPUs, or cores at least, to be\nable to ensure you don't get contention.\n\n340\n00:17:14,440 --> 00:17:16,320\nIf they're low CPU utilization systems,\n\n341\n00:17:16,320 --> 00:17:18,300\nobviously you can stretch\nthat a lot further.\n\n342\n00:17:18,300 --> 00:17:20,440\nBut if these are machines\nrunning at 100% CPU,\n\n343\n00:17:20,440 --> 00:17:23,290\nyou need to make sure you have\nthe cores to handle that.\n\n344\n00:17:23,290 --> 00:17:24,610\nSame thing goes for memory.\n\n345\n00:17:24,610 --> 00:17:27,210\nYou wanna make sure that you've got\nthe physical memory available to match\n\n346\n00:17:27,210 --> 00:17:28,810\nthe virtual memory you're assigning.\n\n347\n00:17:28,810 --> 00:17:32,600\nIf you don't, if you assign more virtual\nmemory than you have physical memory,\n\n348\n00:17:32,600 --> 00:17:34,980\nyou're gonna get performance degradation,\nall right?\n\n349\n00:17:34,980 --> 00:17:37,810\nAnd then never underestimate disk I/O.\n\n350\n00:17:37,810 --> 00:17:41,680\nIf these are internal disks, then this\nis the place to the monitor them.\n\n351\n00:17:41,680 --> 00:17:43,750\nBut more often than not,\nwe're using a SAN.\n\n352\n00:17:43,750 --> 00:17:46,270\nSo like I've got this\niSCSI storage down here.\n\n353\n00:17:46,270 --> 00:17:49,590\nSo you'll probably want to monitor\nyour disk I/O performance over there.\n\n354\n00:17:49,590 --> 00:17:53,360\nUse that device and whatever\nmonitoring it has to take a look and\n\n355\n00:17:53,360 --> 00:17:56,880\nmonitor performance, see how it's doing,\nand just ensure that your system is\n\n356\n00:17:56,880 --> 00:17:59,350\nnot getting bogged down waiting\nto write to the hard drive.\n\n357\n00:18:01,072 --> 00:18:02,100\nAll right,\n\n358\n00:18:02,100 --> 00:18:06,600\nthe only other thing worth mentioning as\nfar as monitoring our server are the logs.\n\n359\n00:18:06,600 --> 00:18:09,870\nYou will see up here I've got no\nsystem alerts which is amazing,\n\n360\n00:18:09,870 --> 00:18:12,340\nit seems like I almost always have one.\n\n361\n00:18:12,340 --> 00:18:16,900\nI have no system alerts, but if I click on\nthat, any events that happen on my server,\n\n362\n00:18:16,900 --> 00:18:21,400\nanytime a failure happens or something is\ndetected, it'll log an event there and\n\n363\n00:18:21,400 --> 00:18:22,030\nI'll get a warning.\n\n364\n00:18:22,030 --> 00:18:24,930\nAnd we saw that in the cluster episode\nwhen we downed one of the nodes,\n\n365\n00:18:24,930 --> 00:18:25,980\nwe got a bunch of stuff there.\n\n366\n00:18:27,180 --> 00:18:30,640\nThe other time you'll see entries in\nhere is when new updates come out.\n\n367\n00:18:30,640 --> 00:18:34,520\nIf an update comes out on Citrix's\nwebsite, here I'll just do a check for\n\n368\n00:18:34,520 --> 00:18:37,820\nupdates, when updates come out,\nlooks like I've got quite a few.\n\n369\n00:18:39,330 --> 00:18:43,060\nThere we go, when updates come out, you'll\nget system alerts that tell you, and\n\n370\n00:18:43,060 --> 00:18:45,510\nI must have cleared the alerts\nbefore cuz they're not showing up.\n\n371\n00:18:45,510 --> 00:18:47,663\nBut a new update will show up here so\n\n372\n00:18:47,663 --> 00:18:52,359\nthat you're aware that the update is\nthere and that you need to go and do it.\n\n373\n00:18:52,359 --> 00:18:57,435\nA quick word on updates, if you find\nthat there's updates that are available,\n\n374\n00:18:57,435 --> 00:19:02,891\nif you've paid for your Xen subscription,\nso if you have a subscription advantage,\n\n375\n00:19:02,891 --> 00:19:06,340\nyou can do the updates really\neasily right from here.\n\n376\n00:19:07,490 --> 00:19:09,770\nBut if you're running the free version,\n\n377\n00:19:09,770 --> 00:19:13,490\nif you haven't paid Citrix a dime,\nthen you have to go to the webpage and\n\n378\n00:19:13,490 --> 00:19:16,680\ndownload the update, and\nyou have to install it via the CLI.\n\n379\n00:19:16,680 --> 00:19:19,260\nThey won't let you use the graphical\nuser interface to do an update.\n\n380\n00:19:19,260 --> 00:19:20,650\nI know, it's kind of annoying.\n\n381\n00:19:20,650 --> 00:19:22,780\nBut you're getting it for free.\n\n382\n00:19:22,780 --> 00:19:24,780\nSo that's kind of the trade off there.\n\n383\n00:19:24,780 --> 00:19:27,910\nThe updates are available, you just\nhave to download them and install them.\n\n384\n00:19:27,910 --> 00:19:30,420\nI know a lot of people prefer to do\nit from the command line anyway,\n\n385\n00:19:30,420 --> 00:19:33,580\ncuz they can schedule the update\napplication and so on.\n\n386\n00:19:33,580 --> 00:19:36,760\nI like the GUI better,\nwhich you get if you subscribe.\n\n387\n00:19:38,540 --> 00:19:41,230\nAll right, so\nthat's about it on performance.\n\n388\n00:19:41,230 --> 00:19:44,310\nLet me just remind you that while\nthe tools here are pretty limited, there's\n\n389\n00:19:44,310 --> 00:19:49,770\nnothing stopping you from going and\nusing third party utilities, things like\n\n390\n00:19:49,770 --> 00:19:55,410\nMRTG or Nagios, any of the number of\nopen source monitoring platforms.\n\n391\n00:19:55,410 --> 00:19:58,210\nAnd then the closed source ones,\nthe things like solar winds network\n\n392\n00:19:58,210 --> 00:20:01,440\nperformance monitor,\nthey do a great job of monitoring Xen.\n\n393\n00:20:01,440 --> 00:20:04,370\nThey'll show the performance of the host\nand the performance of the VM's.\n\n394\n00:20:04,370 --> 00:20:05,690\nGreat systems that are out there.\n\n395\n00:20:05,690 --> 00:20:09,640\nThey'll log years and years worth of data,\nso you've got great history.\n\n396\n00:20:09,640 --> 00:20:11,149\nAnd I definitely recommend those products.\n\n397\n00:20:12,830 --> 00:20:14,820\nSo that's about it for us.\n\n398\n00:20:14,820 --> 00:20:17,567\nJust keep in mind if you have any\nquestions, you can always jump into our Q\n\n399\n00:20:17,567 --> 00:20:20,450\nand A section on the website and\npost them there.\n\n400\n00:20:20,450 --> 00:20:24,695\nWe hope you guys enjoyed it and\nwe'll see you in the next segment.\n\n401\n00:20:24,695 --> 00:20:29,570\n[SOUND]\n\n",
          "vimeoId": "100438738"
        }
      ],
      "title": "Configure XenServer"
    }
  ],
  "url": "citrix-xenserver",
  "vLab": false
}
