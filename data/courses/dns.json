{
  "description": "This series explores the practical application of DNS, the Domain Naming System.  We demonstrate using DNS records to support websites, mail servers, and other services.  Other topics addressed include DNS security, replication, and popular server software including BIND and Microsoft Windows DNS.",
  "descriptionMD": "",
  "length": "48339",
  "name": "DNS",
  "practiceExam": false,
  "subtitle": "Maintaining the Domain Name System",
  "tagUrl": "networking-skills",
  "topics": [
    {
      "episodes": [
        {
          "description": "In this episode, Wes and Don discuss how to obtain information from a DNS server with the NSLookup command. They explain the different modes interactive and non-interactive that an administrator can use and what these modes are used for.",
          "length": "1429",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-1-1-nslookup-111016.00_23_35_01.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-1-1-nslookup-111016.00_23_35_01.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-1-1-nslookup-111016.00_23_35_01.Still001-sm.jpg",
          "title": "nslookup",
          "transcript": "WEBVTT\n\n1\n00:00:00.180 --> 00:00:01.352\nWelcome to ITProTV.\n\n2\n00:00:01.352 --> 00:00:07.871\nI'm your host, Don Pezet [CROSSTALK]\n\n3\n00:00:07.871 --> 00:00:08.381\n[MUSIC]\n\n4\n00:00:08.381 --> 00:00:12.016\n&gt;&gt; You're watching ITProTV.\n\n5\n00:00:12.016 --> 00:00:14.906\n&gt;&gt; Welcome back to another\nexciting episode here at ITProTV.\n\n6\n00:00:14.906 --> 00:00:18.920\nI'm your host, Wes Bryan, and today, we've\ngot a really good subject coming at you.\n\n7\n00:00:18.920 --> 00:00:22.904\nWe're gonna be talking about one of the\nmost important services on the Internet\n\n8\n00:00:22.904 --> 00:00:25.233\nthat really makes us get\naround the Internet.\n\n9\n00:00:25.233 --> 00:00:28.216\nAnd joining me in the studios today for\nthat topic is none other than Mr.\n\n10\n00:00:28.216 --> 00:00:28.730\nDon Pezet.\n\n11\n00:00:28.730 --> 00:00:29.740\nDon, how are you doing sir?\n\n12\n00:00:29.740 --> 00:00:30.740\n&gt;&gt; I'm doing great, Wes.\n\n13\n00:00:30.740 --> 00:00:32.272\nReady to dive right back into DNS.\n\n14\n00:00:32.272 --> 00:00:35.736\nIn this episode, we're moving on\nwith our command line utilities,\n\n15\n00:00:35.736 --> 00:00:38.076\nsome of our utilities\nthat we can use with DNS.\n\n16\n00:00:38.076 --> 00:00:40.843\nAnd in this particular episode,\nwe're gonna look at nslookup,\n\n17\n00:00:40.843 --> 00:00:44.164\nwhich is probably one of the most useful\ncommand line utilities when it comes to\n\n18\n00:00:44.164 --> 00:00:45.540\nworking with DNS.\n\n19\n00:00:45.540 --> 00:00:47.160\nAnytime you're doing\nconfiguration changes,\n\n20\n00:00:47.160 --> 00:00:49.790\nanytime you're putting entries in, we\nneed to be able to verify that they work.\n\n21\n00:00:49.790 --> 00:00:53.010\nYou need to be able to test to make\nsure that our names are resolving, and\n\n22\n00:00:53.010 --> 00:00:54.800\nthat's where nslookup comes in.\n\n23\n00:00:54.800 --> 00:00:58.010\nSo, just a real brief\nsynopsis on nslookup.\n\n24\n00:00:58.010 --> 00:01:00.552\nThe name stands for name server lookup.\n\n25\n00:01:00.552 --> 00:01:03.895\nJust a command line utility that we can\nreach out and it talks to DNS servers, so\n\n26\n00:01:03.895 --> 00:01:06.986\nthat we can recreate the queries that\nall of our other servers are doing in\n\n27\n00:01:06.986 --> 00:01:08.310\nthe background.\n\n28\n00:01:08.310 --> 00:01:13.630\nNice thing about nslookup, it's present\non Windows, Linux, Unix, MacOS.\n\n29\n00:01:13.630 --> 00:01:16.876\nPretty much every system these\ndays has nslookup baked in.\n\n30\n00:01:16.876 --> 00:01:17.903\nAnd to be honest with you,\n\n31\n00:01:17.903 --> 00:01:21.360\nI can't remember the last time that I\nencountered a system that didn't have it.\n\n32\n00:01:21.360 --> 00:01:24.590\nThere's some of those really stripped\ndown Linux distros that might not have it\n\n33\n00:01:24.590 --> 00:01:28.360\ninstalled by default, but you can throw it\nright on there pretty easily through one\n\n34\n00:01:28.360 --> 00:01:30.990\nof the repositories and have access to it.\n\n35\n00:01:30.990 --> 00:01:35.270\nThe other nice thing about nslookup\nis the command line syntax\n\n36\n00:01:35.270 --> 00:01:37.890\nis pretty much identical between\nall the operating systems.\n\n37\n00:01:37.890 --> 00:01:41.410\nSo, if you know how to use it on Windows,\nthen, you know how to use it on a Mac.\n\n38\n00:01:41.410 --> 00:01:43.780\nAnd if you know how to use it on a Mac,\nyou know how to use it on Unix and Linux.\n\n39\n00:01:43.780 --> 00:01:47.490\nSo, it's all kinda tied together and\nthat makes this one really robust.\n\n40\n00:01:47.490 --> 00:01:50.425\nSo, that's what we're gonna take\na look at right here in this episode.\n\n41\n00:01:50.425 --> 00:01:52.062\nAll right, so, enough talking about it.\n\n42\n00:01:52.062 --> 00:01:54.550\nAll right, let's get in here and\ntake a look and see it.\n\n43\n00:01:54.550 --> 00:01:57.900\nYou know you have nslookup, well,\nit's actually pretty easy to see.\n\n44\n00:01:57.900 --> 00:02:00.640\nWe know we have it in pretty much\nevery operating systems out there.\n\n45\n00:02:00.640 --> 00:02:03.320\nYou can just run it and see.\n\n46\n00:02:03.320 --> 00:02:06.270\nIf you don't have it for some reason,\nwhich really would just be like kind of\n\n47\n00:02:06.270 --> 00:02:09.765\nsome Linux distributions that\nmight not have it, most of us,\n\n48\n00:02:09.765 --> 00:02:11.940\nwe should have this, no big deal, right?\n\n49\n00:02:11.940 --> 00:02:15.550\nBut if you just run it, what you should\nsee is basically what I got right here.\n\n50\n00:02:15.550 --> 00:02:19.030\nIt's gonna jump in and you should end up\nwith a greater than prompt like that,\n\n51\n00:02:19.030 --> 00:02:19.970\nall right?\n\n52\n00:02:19.970 --> 00:02:24.780\nWhat I just did is I entered what's called\nthe interactive command line for nslookup.\n\n53\n00:02:24.780 --> 00:02:29.070\nSo, once I'm in here, I'm technically\nstill in the nslookup utility.\n\n54\n00:02:29.070 --> 00:02:30.920\nAnd now,\nI can start running commands against it,\n\n55\n00:02:30.920 --> 00:02:33.570\nas many commands as I want, all right.\n\n56\n00:02:33.570 --> 00:02:36.320\nBut for most of us, we're not gonna\ngo with the interactive mode.\n\n57\n00:02:36.320 --> 00:02:38.379\nWe're going to stick with\nthe non-interactive mode,\n\n58\n00:02:38.379 --> 00:02:41.375\nwhere we run a command, it does what we\nask it to do, and then it's done, right?\n\n59\n00:02:41.375 --> 00:02:43.372\nIt just gets in, gets out,\nand in, that's it.\n\n60\n00:02:43.372 --> 00:02:45.896\nSo, let me exit out of that,\nback to my prompt.\n\n61\n00:02:45.896 --> 00:02:49.830\nAnd the non-interactive mode\nis the most straight forward.\n\n62\n00:02:49.830 --> 00:02:51.120\nIt is the one I use most of the time.\n\n63\n00:02:51.120 --> 00:02:53.540\nWe're just trying to do something\nlike simple name resolution.\n\n64\n00:02:53.540 --> 00:02:58.900\nSo, if I wanna find out what the IP\naddress of the ITProTV website is, right?\n\n65\n00:02:58.900 --> 00:03:05.134\nWhat I can do is I can jump in here and\nI can just say, nslookup itpro.tv.\n\n66\n00:03:05.134 --> 00:03:09.244\nAnd it's gonna reach out to that DNS\nserver and it's gonna do a lookout, okay.\n\n67\n00:03:09.244 --> 00:03:13.678\nNow, when it did the lookup, notice I\ngot this DNS request timed out, right?\n\n68\n00:03:13.678 --> 00:03:15.003\nTimeout was 2 seconds.\n\n69\n00:03:15.003 --> 00:03:16.190\nWhat does that mean?\n\n70\n00:03:16.190 --> 00:03:20.930\nWell, whatever my main DNS\nserver is wasn't answering.\n\n71\n00:03:20.930 --> 00:03:23.070\nAnd so,\nit skipped forward to the next one, right?\n\n72\n00:03:23.070 --> 00:03:25.784\nI can see that progression\nthat just happened and\n\n73\n00:03:25.784 --> 00:03:29.036\nit moved forward to a Google server,\nto 8.8.8.8.\n\n74\n00:03:29.036 --> 00:03:30.680\nRight, so, I hit that one and\nthat one was fine.\n\n75\n00:03:30.680 --> 00:03:33.120\nAnd then,\nI was able to resolve my address.\n\n76\n00:03:33.120 --> 00:03:37.160\nSo, I get some feedback about that\nquery process and what happened.\n\n77\n00:03:37.160 --> 00:03:39.830\nBut it's not terribly detailed, right?\n\n78\n00:03:39.830 --> 00:03:42.830\nIt didn't tell me what it timed out on.\n\n79\n00:03:42.830 --> 00:03:45.134\nSo, what was my primary DNS server?\n\n80\n00:03:45.134 --> 00:03:46.040\nI don't know.\n\n81\n00:03:46.040 --> 00:03:48.856\nIt also says here that it's\na non-authoritative answer.\n\n82\n00:03:48.856 --> 00:03:50.340\nNow, remember, with non-authoritative,\n\n83\n00:03:50.340 --> 00:03:54.830\nthat means the server that I asked\ndidn't actually have the answer for me.\n\n84\n00:03:54.830 --> 00:03:57.820\nIt had to do a recursive lookup\nagainst some other server.\n\n85\n00:03:57.820 --> 00:04:02.380\nAnd so, it reached out and talked to other\nservers and hid all that from me and\n\n86\n00:04:02.380 --> 00:04:03.590\ngave me this answer.\n\n87\n00:04:03.590 --> 00:04:07.750\nWhen we use the non-interactive mode, you\nget a really simplified output like this.\n\n88\n00:04:07.750 --> 00:04:11.580\nIf we want really detailed output\nwhere we see all the different steps,\n\n89\n00:04:11.580 --> 00:04:13.880\nthat's where the interactive\nmode comes in.\n\n90\n00:04:13.880 --> 00:04:15.830\nSo, that's a real simple\nlookup right there.\n\n91\n00:04:15.830 --> 00:04:20.810\nYou provided a domain name or a host name,\nand it gives you back an IP address.\n\n92\n00:04:20.810 --> 00:04:24.270\nThere's really only one other thing we can\ndo here from the non-interactive mode.\n\n93\n00:04:24.270 --> 00:04:27.400\nNotice how I get the server that\nI did a lookup against, right?\n\n94\n00:04:27.400 --> 00:04:29.500\nI can override that server.\n\n95\n00:04:29.500 --> 00:04:33.107\nI can say instead of looking\nup against 8.8.8.8, maybe,\n\n96\n00:04:33.107 --> 00:04:36.069\nI wanna lookup against 4.2.2.1, all right?\n\n97\n00:04:36.069 --> 00:04:39.330\nAnd when we do that,\nwe're overriding the server.\n\n98\n00:04:39.330 --> 00:04:40.820\nNow, why would we wanna do that?\n\n99\n00:04:40.820 --> 00:04:43.803\nWell, have you ever made\na change to a public DNS record?\n\n100\n00:04:43.803 --> 00:04:46.326\nSo, if you go on GoDaddy or\nHover or Register,\n\n101\n00:04:46.326 --> 00:04:49.262\nor whatever it is that you\npurchase your domain name.\n\n102\n00:04:49.262 --> 00:04:52.040\nYou log in to the website and\nyou make a change to an A record.\n\n103\n00:04:52.040 --> 00:04:55.420\nThe real message it'll say, this could\ntake up to 48 hours to take effect.\n\n104\n00:04:56.420 --> 00:04:57.630\nBut what does that mean?\n\n105\n00:04:57.630 --> 00:04:59.330\nIn computers, what takes 48 hours?\n\n106\n00:04:59.330 --> 00:05:02.923\nWell, your change actually takes effect\nimmediately, right the moment you do it.\n\n107\n00:05:02.923 --> 00:05:07.101\nBut people around the world will cache\nyour DNS record and they can cache it for\n\n108\n00:05:07.101 --> 00:05:08.070\nup to 48 hours.\n\n109\n00:05:08.070 --> 00:05:09.140\nSo, that's why they warn you about that.\n\n110\n00:05:09.140 --> 00:05:11.570\nHey, it can take up to two days for\neverybody to purge their cache and\n\n111\n00:05:11.570 --> 00:05:13.180\nlearn your new address.\n\n112\n00:05:13.180 --> 00:05:15.950\nSo, if you ever wanna see how\nfar you've propagated out,\n\n113\n00:05:15.950 --> 00:05:17.670\nyou might do what I just did.\n\n114\n00:05:17.670 --> 00:05:19.550\nDo a lookup against Google server.\n\n115\n00:05:19.550 --> 00:05:21.360\nDo a lookup against Level Three server.\n\n116\n00:05:21.360 --> 00:05:23.948\nDo a lookup against your ISP,\nother people's ISPs and\n\n117\n00:05:23.948 --> 00:05:27.951\nsee whether they've received the change\nalready or not, and you'd be surprised.\n\n118\n00:05:27.951 --> 00:05:31.980\nIt's a rare change that takes more than\nlike an hour to propagate out these days.\n\n119\n00:05:31.980 --> 00:05:36.360\n&gt;&gt; Don, now, when you said override,\nis that taking the interface assigned\n\n120\n00:05:36.360 --> 00:05:38.670\nDNS server and saying,\nhey we're not gonna use this.\n\n121\n00:05:38.670 --> 00:05:41.250\nWe're gonna use the IP address of\nwhat you've just put there at the end\n\n122\n00:05:41.250 --> 00:05:42.065\nof nslookup?\n\n123\n00:05:42.065 --> 00:05:43.900\n&gt;&gt; Yeah, on Windows,\n\n124\n00:05:43.900 --> 00:05:46.740\nit's whatever DNS server you have\nassigned to your network adapter.\n\n125\n00:05:46.740 --> 00:05:48.451\nIf you're running Mac or Linux,\n\n126\n00:05:48.451 --> 00:05:51.517\nit's whatever DNS servers\nare in your resolve.com file.\n\n127\n00:05:51.517 --> 00:05:53.392\nSo, that's what a stuff's defined, and\n\n128\n00:05:53.392 --> 00:05:56.130\nthat's all nslookup does is\nit looks up those things.\n\n129\n00:05:56.130 --> 00:05:58.950\nI guess, important thing to mention\nhere is that some operating\n\n130\n00:05:58.950 --> 00:06:01.245\nsystems have a DNS cache built in to them,\nright?\n\n131\n00:06:01.245 --> 00:06:05.844\nWindows has it, it's super annoying,\nwhere [LAUGH] Windows will do a lookup and\n\n132\n00:06:05.844 --> 00:06:07.230\nit will cache a record.\n\n133\n00:06:07.230 --> 00:06:09.650\nAnd then,\nwhen you go to browse that webpage again,\n\n134\n00:06:09.650 --> 00:06:11.804\nit doesn't actually go\nout to the DNS server.\n\n135\n00:06:11.804 --> 00:06:13.151\nIt just uses its own cache, right?\n\n136\n00:06:13.151 --> 00:06:15.185\nThis is where the whole\n40-hour thing comes in.\n\n137\n00:06:15.185 --> 00:06:17.915\nSo, if we wanna override that,\nwell, in Windows,\n\n138\n00:06:17.915 --> 00:06:19.835\nsome of you guys might be\nfamiliar with the command.\n\n139\n00:06:19.835 --> 00:06:20.735\nLet me show you.\n\n140\n00:06:20.735 --> 00:06:26.940\nIt's ipconfig /flushdns and\nthat will wipe your DNS cache, right?\n\n141\n00:06:26.940 --> 00:06:31.050\nWell, nslookup doesn't use\nthe DNS cache in Windows.\n\n142\n00:06:31.050 --> 00:06:32.950\nSo, it's actually bypassing that cache.\n\n143\n00:06:32.950 --> 00:06:37.950\nNow, the reason I bring that up is\nyou might fire up a web browser, and\n\n144\n00:06:37.950 --> 00:06:40.160\ntry and go to web page,\nand you can't get there.\n\n145\n00:06:40.160 --> 00:06:44.170\nAnd you drop to a command prompt and\nuse nslookup, but it show us the right IP.\n\n146\n00:06:44.170 --> 00:06:48.578\nAnd the problem is that Chrome,\nFirefox, Internet Explorer,\n\n147\n00:06:48.578 --> 00:06:52.832\nwhatever, might be using the DNS cache and\nNSlookup isn't.\n\n148\n00:06:52.832 --> 00:06:54.351\nAnd so, they have two different records.\n\n149\n00:06:54.351 --> 00:06:56.232\nThat's where you might have\nto flush the cache here.\n\n150\n00:06:56.232 --> 00:06:59.160\nBut nslookup does not use\nthe DNS cache on your system.\n\n151\n00:06:59.160 --> 00:07:01.680\n&gt;&gt; So, if you want just a quick\nanswer from a DNS server,\n\n152\n00:07:01.680 --> 00:07:05.000\nyou can just use nslookup, you said,\nin the non-interactive mode.\n\n153\n00:07:05.000 --> 00:07:07.150\nNow, you mentioned that term\ninteractive mode, you said,\n\n154\n00:07:07.150 --> 00:07:08.460\nthat's where the actions at.\n\n155\n00:07:08.460 --> 00:07:09.890\nTell us a little bit about that, Don.\n\n156\n00:07:09.890 --> 00:07:12.940\n&gt;&gt; All right, so,\npretty limited options here, right?\n\n157\n00:07:12.940 --> 00:07:16.150\nI can provide a host name or DNS name and\nI can override the server, and\n\n158\n00:07:16.150 --> 00:07:17.590\nthat's really about it.\n\n159\n00:07:17.590 --> 00:07:20.500\nBut if we get into the interactive mode,\nthere are a ton\n\n160\n00:07:20.500 --> 00:07:23.610\nof options that we can jump in there and\nstart to manipulate it and change.\n\n161\n00:07:23.610 --> 00:07:27.510\nSo, if I just run nslookup by itself,\nthat's gonna take me\n\n162\n00:07:27.510 --> 00:07:30.800\ninto that interactive prompt and\nI'll get my DNS timed out again.\n\n163\n00:07:30.800 --> 00:07:32.990\n[LAUGH] So\ni'll just switch over to the other server.\n\n164\n00:07:32.990 --> 00:07:37.090\nSo, anyhow, once I'm in there, now, I\ncould start to change the way things work.\n\n165\n00:07:37.090 --> 00:07:41.900\nIf you just do a question mark, you'll get\na list of all the different commands and\n\n166\n00:07:41.900 --> 00:07:43.570\nthings that we can put in there.\n\n167\n00:07:43.570 --> 00:07:47.590\nAnd right off the bat, you'll notice\nthat you can do a lookup for a name or\n\n168\n00:07:47.590 --> 00:07:49.180\na host name just by typing it in.\n\n169\n00:07:49.180 --> 00:07:50.322\nSo, I just type in whatever that name is.\n\n170\n00:07:50.322 --> 00:07:52.580\nType in ITProTV and it will resolve it.\n\n171\n00:07:52.580 --> 00:07:55.723\nBut then, there's all these\nset options that we can do.\n\n172\n00:07:55.723 --> 00:07:58.814\nTo override the way that\nthings are working.\n\n173\n00:07:58.814 --> 00:08:03.150\nAnd way down here we'll see where\nwe can set the server also.\n\n174\n00:08:03.150 --> 00:08:07.220\nSo earlier I was overriding\nthe server from the command line.\n\n175\n00:08:07.220 --> 00:08:11.237\nFrom here, anytime I do a look up,\nright now it's using 8.8.8.8, right?\n\n176\n00:08:11.237 --> 00:08:16.390\nSo if I do a look up for\nitpro.tv It's using 8.8.8.8.\n\n177\n00:08:16.390 --> 00:08:20.824\nBut if I do server 4.2.2.1, right?\n\n178\n00:08:20.824 --> 00:08:23.220\nNow it's changing my resolver.\n\n179\n00:08:23.220 --> 00:08:25.610\nI'm now changed over to 4.2.2.1,\n\n180\n00:08:25.610 --> 00:08:29.850\nand every look up I do from here on out,\nit's gonna do against that resolver.\n\n181\n00:08:29.850 --> 00:08:32.530\nSo if I look up itpro.tv.\n\n182\n00:08:32.530 --> 00:08:35.256\nThere we go, it ran it, and\nit ran it against 4.2.2.1 and\n\n183\n00:08:35.256 --> 00:08:36.375\nI didn't have to tell it.\n\n184\n00:08:36.375 --> 00:08:42.910\nAnd then I could jump in and say cnn.com,\nand there it goes, again off of 4.2.2.1.\n\n185\n00:08:42.910 --> 00:08:48.359\nIf I do a server, let's see 8.8.\n\n186\n00:08:48.359 --> 00:08:49.917\nWhat's the other one, 8.8.4.4?\n\n187\n00:08:49.917 --> 00:08:51.935\n&gt;&gt; 4.4\n&gt;&gt; That's it, the other Google one.\n\n188\n00:08:51.935 --> 00:08:53.790\nThere we are,\nI'll switch to the other Google one.\n\n189\n00:08:53.790 --> 00:08:56.681\nAnd now I can run that lookup for\nitpro.tv, and\n\n190\n00:08:56.681 --> 00:08:58.690\nthere it goes doing that lookup.\n\n191\n00:08:58.690 --> 00:09:01.570\nAnd it didn't make me have to\nprovide the server every time.\n\n192\n00:09:01.570 --> 00:09:03.970\n&gt;&gt; Now Don, with all those options,\nwho are the demographic?\n\n193\n00:09:03.970 --> 00:09:08.714\nWho would really be using this with all\nthose, all that flexibility and power?\n\n194\n00:09:08.714 --> 00:09:12.634\n&gt;&gt; All right, so an end user or\na Help Desk technician might use the basic\n\n195\n00:09:12.634 --> 00:09:17.730\nNsLookup just to test DNS resolution or\nto find out the IP of a host, all right?\n\n196\n00:09:17.730 --> 00:09:21.820\nBut beyond that,\nit's really gonna be DNS administrators.\n\n197\n00:09:21.820 --> 00:09:25.840\nIf you're administering a DNS server,\nNS lookup has some incredible features in\n\n198\n00:09:25.840 --> 00:09:28.064\nit that will let us\ntroubleshoot the server.\n\n199\n00:09:28.064 --> 00:09:29.420\nLet me just give you an example.\n\n200\n00:09:29.420 --> 00:09:33.260\nSo there are some denial of service\nattacks that can be pulled off against DNS\n\n201\n00:09:33.260 --> 00:09:35.560\nservers using TCP.\n\n202\n00:09:35.560 --> 00:09:39.170\nAnd so you might decide to block TCP and\nonly allow UDP\n\n203\n00:09:39.170 --> 00:09:41.800\nlookups against your server, or vice\nversa, you might want to go the other way.\n\n204\n00:09:41.800 --> 00:09:45.587\nSo maybe you configure your server to only\nanswer on UDP, or only answer on TCP.\n\n205\n00:09:45.587 --> 00:09:47.380\nHow do you test that?\n\n206\n00:09:47.380 --> 00:09:50.300\nWell, in NS lookup, let me just\ndo that question mark again, or\n\n207\n00:09:50.300 --> 00:09:51.950\nactually you can do,\nwell there's a few ways.\n\n208\n00:09:51.950 --> 00:09:52.559\nI'll do the question mark.\n\n209\n00:09:53.850 --> 00:09:57.010\nIf you look,\nthere's all these set OPTIONs in here.\n\n210\n00:09:57.010 --> 00:09:59.940\nAnd if you look at the set OPTIONs,\nand kinda look down at the list,\n\n211\n00:09:59.940 --> 00:10:03.750\nyou'll see where you can override\nall sorts of different things.\n\n212\n00:10:03.750 --> 00:10:07.920\nHow you do the transfer, the class, the\ntype of query, the timeout, the domain,\n\n213\n00:10:07.920 --> 00:10:09.300\nthe search list.\n\n214\n00:10:09.300 --> 00:10:12.400\nAnd just all sorts of really\ninteresting things here to tweak.\n\n215\n00:10:12.400 --> 00:10:15.520\nAnd so, you can see how you're\ntalking to that server.\n\n216\n00:10:15.520 --> 00:10:18.820\nOne of my favorite options\nis this debug option.\n\n217\n00:10:18.820 --> 00:10:24.030\nThe debug option gives you a ton of\noutput about that lookup, right?\n\n218\n00:10:24.030 --> 00:10:26.040\nLet me show you that in action.\n\n219\n00:10:26.040 --> 00:10:28.530\nI'm gonna do a lookup for itpro.tv.\n\n220\n00:10:28.530 --> 00:10:31.540\nVery simple, I get the server that\nI do the look up against, and\n\n221\n00:10:31.540 --> 00:10:36.030\nthen I see the host name and the IP\naddress that I got back, and that's it.\n\n222\n00:10:36.030 --> 00:10:39.552\nIt was non-authoritative so I know other\nstuff happened in the background, but\n\n223\n00:10:39.552 --> 00:10:41.060\nI don't see it, all right?\n\n224\n00:10:41.060 --> 00:10:42.800\nLet me just clear a little bit of this.\n\n225\n00:10:42.800 --> 00:10:47.447\nAnd what I'm gonna do now,\nis I'm gonna say, set debug, all right?\n\n226\n00:10:47.447 --> 00:10:49.786\nSet debug, that turns on the debug mode.\n\n227\n00:10:49.786 --> 00:10:53.137\nAnd now I'm going to get\na very verbose output.\n\n228\n00:10:53.137 --> 00:10:59.491\nWhen I do a look up for itpro.tv,\nI get a lot more information.\n\n229\n00:10:59.491 --> 00:11:01.090\nLook at all this, right?\n\n230\n00:11:01.090 --> 00:11:04.268\nI do see that I reached out\nto google server 8.8.4.4,\n\n231\n00:11:04.268 --> 00:11:06.961\nand then here's my answer that came back,\nright?\n\n232\n00:11:06.961 --> 00:11:08.240\nI got a header.\n\n233\n00:11:08.240 --> 00:11:09.978\nI got a query, is what I performed.\n\n234\n00:11:09.978 --> 00:11:11.630\nI got no error on the query.\n\n235\n00:11:11.630 --> 00:11:13.065\nSometimes you can have\na malformed query and\n\n236\n00:11:13.065 --> 00:11:15.270\nit'll show up if there\nwas an error right there.\n\n237\n00:11:15.270 --> 00:11:16.800\nI can see there was a response.\n\n238\n00:11:16.800 --> 00:11:19.720\nWe wanted recursion, and\nrecursion was available.\n\n239\n00:11:19.720 --> 00:11:22.870\nThis server didn't have the answer so\nit's gonna have to go somewhere else.\n\n240\n00:11:22.870 --> 00:11:24.415\nI see I sent one question.\n\n241\n00:11:24.415 --> 00:11:25.630\nI got one answer.\n\n242\n00:11:25.630 --> 00:11:30.140\nAnd I guess this is kind of off my\nscreen here, but authority record 0.\n\n243\n00:11:30.140 --> 00:11:33.835\nWe didn't have the record for it,\nwe had to go somewhere else, right?\n\n244\n00:11:33.835 --> 00:11:36.441\nAnd then,\nhere's the question that I asked, and\n\n245\n00:11:36.441 --> 00:11:40.170\nhere's the answer that I got with a ttl,\nand how long it took.\n\n246\n00:11:40.170 --> 00:11:45.320\nSo it's laying all that out for\nme, and kinda putting it in here.\n\n247\n00:11:45.320 --> 00:11:48.659\nAnd as I look at it, if you see a little\nbit here as far as like a four A record,\n\n248\n00:11:48.659 --> 00:11:49.723\nwhich should be IPv6.\n\n249\n00:11:49.723 --> 00:11:52.600\nWe actually don't have one,\nand so this came back empty.\n\n250\n00:11:52.600 --> 00:11:57.472\nBut it looks like I did IPv4,\nas well as an IPv6 look up for\n\n251\n00:11:57.472 --> 00:11:59.864\nthat host, for itpro.tv.\n\n252\n00:11:59.864 --> 00:12:02.550\nAnd that's cuz I'm on Windows,\nnot every operating system does that.\n\n253\n00:12:02.550 --> 00:12:05.400\n&gt;&gt; Now Don, right there in that last bit\nof output you've talked about in other\n\n254\n00:12:05.400 --> 00:12:06.910\nepisodes, about the start of authority.\n\n255\n00:12:06.910 --> 00:12:07.630\nIs that what we're seeing,\n\n256\n00:12:07.630 --> 00:12:11.640\nthe authoritative information for\nthis response?\n\n257\n00:12:11.640 --> 00:12:14.940\n&gt;&gt; Absolutely, so ITPro.TV,\nif I remember right,\n\n258\n00:12:14.940 --> 00:12:18.380\nthat domain is registered with\na registrar called Hover.com.\n\n259\n00:12:18.380 --> 00:12:22.030\nAnd so if I were to do a lookup\nagainst Hover's DNS servers,\n\n260\n00:12:22.030 --> 00:12:24.890\nthen I would get\nan authoritative response on it.\n\n261\n00:12:24.890 --> 00:12:27.790\nBut if I ask any other\nDNS server on the planet,\n\n262\n00:12:27.790 --> 00:12:29.730\nit's not gonna be authoritative, right?\n\n263\n00:12:29.730 --> 00:12:33.560\nIt's going to have to send that\nquery up through the tuple,\n\n264\n00:12:33.560 --> 00:12:34.398\nthe domain chain, right?\n\n265\n00:12:34.398 --> 00:12:35.890\nSo it's gotta start at a root hint server,\n\n266\n00:12:35.890 --> 00:12:38.510\nand it's gotta find the servers for\n.TV, right?\n\n267\n00:12:38.510 --> 00:12:42.230\nTV's a country code, so it's gotta go and\nfind that country code and\n\n268\n00:12:42.230 --> 00:12:43.600\nwho manages that.\n\n269\n00:12:43.600 --> 00:12:47.950\nAnd once it finds that, then it can find\nwhere the actual SOA for ITPro.tv is,\n\n270\n00:12:47.950 --> 00:12:50.620\nand then it can go there to get\nthe authoritative answer, and\n\n271\n00:12:50.620 --> 00:12:51.470\npass that back over to me.\n\n272\n00:12:51.470 --> 00:12:54.830\nSo there's gonna be at least three more\nlookups that are kind of on the back-end\n\n273\n00:12:54.830 --> 00:12:57.490\nof this query that I sent,\nassuming it's not cached.\n\n274\n00:12:57.490 --> 00:13:00.130\nIt could already be in the DNS cache for\nGoogle, and they'll respond.\n\n275\n00:13:00.130 --> 00:13:01.630\nThat's the advantage of\nusing Google servers,\n\n276\n00:13:01.630 --> 00:13:03.480\nis that they've cached\ndarn near everything.\n\n277\n00:13:03.480 --> 00:13:06.440\nSo you can get those\nresponses back really quick.\n\n278\n00:13:06.440 --> 00:13:09.220\nAll right, so that's debug.\n\n279\n00:13:09.220 --> 00:13:12.480\nWith the debug option we saw\na lot of good output but\n\n280\n00:13:12.480 --> 00:13:15.850\nthere are a lot of things that\nyou don't necessarily see, and\n\n281\n00:13:15.850 --> 00:13:19.630\nwe'll see other utilities later on\nthat will let us see even more.\n\n282\n00:13:19.630 --> 00:13:23.950\nBut there's another thing that I find\nkind of useful in the Windows world.\n\n283\n00:13:23.950 --> 00:13:27.020\nWindows, if you have a Windows\nmachine joined to a domain,\n\n284\n00:13:27.020 --> 00:13:29.360\nyou'll have a default suffix list.\n\n285\n00:13:29.360 --> 00:13:30.500\nSo when you do a search for\n\n286\n00:13:30.500 --> 00:13:35.860\na single name, it will append onto\nthe end of it what your search list is.\n\n287\n00:13:35.860 --> 00:13:39.465\nSo for example,\nif I have a domain called domain.net.\n\n288\n00:13:39.465 --> 00:13:42.237\nAnd I do a lookup for ITPro.tv,\n\n289\n00:13:42.237 --> 00:13:48.106\nthe lookup might actually get\nformed as ITPro.tv.domain.net.\n\n290\n00:13:48.106 --> 00:13:50.595\nIt sticks it on the end,\nwhich is kind of annoying.\n\n291\n00:13:50.595 --> 00:13:54.325\nAnd so you'll notice in my set options\nthat we can do this enabling and\n\n292\n00:13:54.325 --> 00:13:55.845\ndisabling of the search, right?\n\n293\n00:13:55.845 --> 00:13:56.955\nThat's the suffix list.\n\n294\n00:13:56.955 --> 00:13:59.175\nAnd do we wanna search this list or not?\n\n295\n00:13:59.175 --> 00:14:01.700\nDo I just wanna search for what I typed?\n\n296\n00:14:01.700 --> 00:14:04.235\nOr do we wanna add the search\nlist to the end, right?\n\n297\n00:14:04.235 --> 00:14:06.839\nYou can do the same thing with recursion.\n\n298\n00:14:06.839 --> 00:14:08.880\nSo maybe I don't want to do recursion.\n\n299\n00:14:08.880 --> 00:14:12.920\nEither this server is gonna have\nthe answer I want, or they're not.\n\n300\n00:14:12.920 --> 00:14:14.120\nNow by default that's on.\n\n301\n00:14:14.120 --> 00:14:16.320\nWe ask for recursive quarries, right?\n\n302\n00:14:16.320 --> 00:14:19.390\nSo set recurs is the default.\n\n303\n00:14:19.390 --> 00:14:23.920\nSo me entering that in is\ngonna have no effect, right?\n\n304\n00:14:23.920 --> 00:14:29.770\nBut if I do set norecurs, now I'm\ndisabling recursive queries, right?\n\n305\n00:14:29.770 --> 00:14:34.128\nAnd if I do a look up against Google for\nexample, my debug is still on.\n\n306\n00:14:34.128 --> 00:14:35.980\nI'm gonna do a set nodebug.\n\n307\n00:14:37.070 --> 00:14:40.278\nAll these set commands, to turn them on,\nyou do set and the name of the command.\n\n308\n00:14:40.278 --> 00:14:43.490\nTo turn them off you do set, and\nthen no followed by the command.\n\n309\n00:14:43.490 --> 00:14:44.500\nThe part I always forget,\n\n310\n00:14:44.500 --> 00:14:49.230\ncuz I'm from the Sysco stuff, I always\nforget to leave the space out, right?\n\n311\n00:14:49.230 --> 00:14:50.960\nIt does need to be nodebug all one word.\n\n312\n00:14:50.960 --> 00:14:52.550\nIf you put the space in there,\nit doesn't work.\n\n313\n00:14:52.550 --> 00:14:53.910\nSo I just turned that off.\n\n314\n00:14:53.910 --> 00:14:57.480\nBut if I do a lookup now for\nitpro.tv, it's gonna reach out.\n\n315\n00:14:57.480 --> 00:15:01.130\nAnd see how I got can't find itpro.tv,\nserver failed?\n\n316\n00:15:01.130 --> 00:15:01.981\nIt worked a minute ago.\n\n317\n00:15:01.981 --> 00:15:03.820\nWhy isn't it working now?\n\n318\n00:15:03.820 --> 00:15:05.990\nWell, because I turned off recursion.\n\n319\n00:15:05.990 --> 00:15:07.720\nIf I do a set debug.\n\n320\n00:15:07.720 --> 00:15:11.020\nAnd I redo that look up,\nI can look in here and\n\n321\n00:15:11.020 --> 00:15:14.638\nI can see I got a code that\nsaid server fail, all right?\n\n322\n00:15:14.638 --> 00:15:19.943\nI ask one question, I sent it there, but\nnot notice I've got, I want a response.\n\n323\n00:15:19.943 --> 00:15:24.480\nRecursion is available but\nI didn't ask for recursion.\n\n324\n00:15:24.480 --> 00:15:28.430\nAnd so it didn't do it, and\nas a result I didn't get the answer,\n\n325\n00:15:28.430 --> 00:15:29.610\nbecause I blocked it.\n\n326\n00:15:29.610 --> 00:15:34.800\nIf I do a set recurse and turn that\nback on, now I can do that lookup.\n\n327\n00:15:34.800 --> 00:15:37.090\nAnd it should work this time, there we go.\n\n328\n00:15:37.090 --> 00:15:40.910\nSo it worked, and if I scroll back,\nthere's that want recursion,\n\n329\n00:15:40.910 --> 00:15:43.060\nthat's the key part right\nthere that we're changing.\n\n330\n00:15:43.060 --> 00:15:45.660\nSo I'm manipulating the way\nthe query actually runs.\n\n331\n00:15:45.660 --> 00:15:47.230\nAnd that's very powerful.\n\n332\n00:15:47.230 --> 00:15:50.583\nBecause if you're trying to test,\nis your SOA working?\n\n333\n00:15:50.583 --> 00:15:52.219\nYou could point to the SOA server,\n\n334\n00:15:52.219 --> 00:15:55.323\nand you would wanna turn off your\nrecursion there and make sure you\n\n335\n00:15:55.323 --> 00:15:58.336\nare getting the authoritative\nanswer right from that server.\n\n336\n00:15:58.336 --> 00:16:00.925\nAll right, other things we can do here.\n\n337\n00:16:00.925 --> 00:16:02.809\nLet me turn off some of this\nstuff that I've got on.\n\n338\n00:16:02.809 --> 00:16:05.764\nSo I'm gonna do a nodebug and\nI'm gonna set recurse back on.\n\n339\n00:16:05.764 --> 00:16:11.501\nAll right, when I did my lookup for\nitvpro.tv and I had debug turned on,\n\n340\n00:16:11.501 --> 00:16:17.630\nyou saw where I asked for an a record and\na fora record, IPV4 and IPV6.\n\n341\n00:16:17.630 --> 00:16:21.610\nWhen you do a lookup, and\nwe don't have an IPv6 record for ITProTV.\n\n342\n00:16:21.610 --> 00:16:23.854\nSo let me pick somebody who does,\nlike Google.\n\n343\n00:16:23.854 --> 00:16:27.531\nIf I do a lookup for Google.com,\nright, I get all their addresses.\n\n344\n00:16:27.531 --> 00:16:31.660\nAnd notice here's IPv4 addresses and\nan IPv6 address.\n\n345\n00:16:31.660 --> 00:16:33.420\nIt looked up both.\n\n346\n00:16:33.420 --> 00:16:34.650\nBut you can manipulate that.\n\n347\n00:16:34.650 --> 00:16:37.280\nIf you look at all the set\ncommands that we can run,\n\n348\n00:16:37.280 --> 00:16:39.590\none of the set commands is type.\n\n349\n00:16:39.590 --> 00:16:41.810\nAnd there's actually an old\nformat which is Query Type.\n\n350\n00:16:41.810 --> 00:16:44.250\nIt's actually the same thing,\njust more typing.\n\n351\n00:16:44.250 --> 00:16:47.020\nSo if you type equals you\ncan tell it exactly what\n\n352\n00:16:47.020 --> 00:16:48.730\nkind of record you're looking for.\n\n353\n00:16:48.730 --> 00:16:54.890\nSo if I do a set type equals A,\nI'm only going to look for the A records.\n\n354\n00:16:54.890 --> 00:17:00.659\nAnd now when I do Google dot com I\ndon't get the IP B six record, right?\n\n355\n00:17:00.659 --> 00:17:04.735\nLikewise, I could say set type=AAAA.\n\n356\n00:17:04.735 --> 00:17:09.060\nAnd now when I query Google,\nI only get the IPv6 record, right?\n\n357\n00:17:09.060 --> 00:17:10.390\nNow I'll be honest with you guys,\n\n358\n00:17:10.390 --> 00:17:14.410\nI don't do this one very often\nbecause I normally want both., right?\n\n359\n00:17:14.410 --> 00:17:16.880\nBut where I use this are other records.\n\n360\n00:17:16.880 --> 00:17:21.570\nHey, I wanna find out who's\nthe authoritative DNS Server for ITProTV?\n\n361\n00:17:22.650 --> 00:17:23.490\nI don't know, right?\n\n362\n00:17:23.490 --> 00:17:25.192\nSo if I want to find out,\n\n363\n00:17:25.192 --> 00:17:29.203\nI can set my type to NS to show\nme the name server records.\n\n364\n00:17:29.203 --> 00:17:32.894\nAnd let me pull that up for itpro.tv.\n\n365\n00:17:32.894 --> 00:17:36.321\nAll right, so I'll punch that in itpro.tv,\nand it's going to reach out and\n\n366\n00:17:36.321 --> 00:17:38.150\nit's going to find out.\n\n367\n00:17:38.150 --> 00:17:41.620\nHere is the authorised DNS server\nwhere it's supposed to be and\n\n368\n00:17:41.620 --> 00:17:43.320\nyou'll see ours is hosted\nin the m zone web services.\n\n369\n00:17:43.320 --> 00:17:46.370\nSo we've got awsdns server\nlisted right there.\n\n370\n00:17:46.370 --> 00:17:49.010\nSo if I were to look up\nagainst one these guys,\n\n371\n00:17:49.010 --> 00:17:52.490\nthey could give me an authorated\nanswer for our domain, right?\n\n372\n00:17:52.490 --> 00:17:56.224\nBecause I changed that type,\nthese records aren't normally shown to me.\n\n373\n00:17:56.224 --> 00:18:01.286\nI could also do set type=MX, right?\n\n374\n00:18:01.286 --> 00:18:04.800\nI want to see the mail\nexchange records for itpro.tv.\n\n375\n00:18:04.800 --> 00:18:06.680\nAnd so I can punch that in.\n\n376\n00:18:06.680 --> 00:18:07.970\nAnd now I can see right there.\n\n377\n00:18:07.970 --> 00:18:11.457\nThere's the\nItpro-tv.mail.protection.outlook.com.\n\n378\n00:18:11.457 --> 00:18:12.776\nIt's in Office 365.\n\n379\n00:18:12.776 --> 00:18:17.046\nSo that's an easy way to spot who's using\nOffice 365, or Google apps for work or\n\n380\n00:18:17.046 --> 00:18:17.970\nwhatever.\n\n381\n00:18:17.970 --> 00:18:20.360\nI can see those mail exchanger records.\n\n382\n00:18:20.360 --> 00:18:21.980\nRight there, okay.\n\n383\n00:18:21.980 --> 00:18:25.260\nNow my favorite set type command is one\n\n384\n00:18:25.260 --> 00:18:27.570\nthat actually I'm not even sure\nif it's in the documentation.\n\n385\n00:18:27.570 --> 00:18:28.770\nLet's see if it shows up.\n\n386\n00:18:28.770 --> 00:18:33.550\nBut it's set type equals all,\nenter or any, any or\n\n387\n00:18:33.550 --> 00:18:35.940\nall is the same thing,\nthey get processed the same way.\n\n388\n00:18:35.940 --> 00:18:37.320\nBut we can punch that in.\n\n389\n00:18:37.320 --> 00:18:43.235\nAnd so if you do a set type=ALL,\nnow when I do that lookup for\n\n390\n00:18:43.235 --> 00:18:49.150\nitpro.tv it's gonna return\neverything that it can, okay?\n\n391\n00:18:49.150 --> 00:18:51.380\nAnd all and any, they work the same way.\n\n392\n00:18:51.380 --> 00:18:54.240\nSo you can punch in either one,\nI did all because that's what I'm used to,\n\n393\n00:18:54.240 --> 00:18:55.570\nany was in the documentation.\n\n394\n00:18:55.570 --> 00:18:58.280\nBut if I look,\nI'm getting the name server records.\n\n395\n00:18:58.280 --> 00:19:03.490\nI'm getting the MX records,\nI'm also getting text records down here.\n\n396\n00:19:03.490 --> 00:19:09.530\nWhich are really handy if you working for\nlike a sender policy framework SPF,\n\n397\n00:19:09.530 --> 00:19:12.700\nlike you're doing anti spam measures and\nyour DNS record.\n\n398\n00:19:12.700 --> 00:19:17.580\nYou can come and you can see those text\nrecords and see what is my SPF set to and\n\n399\n00:19:17.580 --> 00:19:21.530\nyou will start to see the approved\nemail servers For ITPro.TV.\n\n400\n00:19:21.530 --> 00:19:24.760\nYou can really get some\ngood data right in here.\n\n401\n00:19:24.760 --> 00:19:26.200\nAll just by viewing that domain.\n\n402\n00:19:26.200 --> 00:19:29.000\nAnd that's a pretty handy thing to see.\n\n403\n00:19:29.000 --> 00:19:34.800\nAll right, let's see what else do we\nhave in here that we can tinker with?\n\n404\n00:19:34.800 --> 00:19:36.810\nLet me show an older command.\n\n405\n00:19:36.810 --> 00:19:40.920\nThis one is not incredibly\nuseful on public DNS servers.\n\n406\n00:19:40.920 --> 00:19:42.630\nIt's the ls command.\n\n407\n00:19:42.630 --> 00:19:45.480\nThe ls command is the list command, and\n\n408\n00:19:45.480 --> 00:19:49.000\nwhat you used to be able to do back in the\nday when the Internet was very small was\n\n409\n00:19:49.000 --> 00:19:54.440\nthat you could connect to a DNS server and\nyou could say ls itpro.tv.\n\n410\n00:19:54.440 --> 00:19:58.960\nAnd that would say give me the listing for\nthe itpro.tv DNS server.\n\n411\n00:19:58.960 --> 00:20:03.910\nGive me everything you've\ngot in the DNS file format.\n\n412\n00:20:03.910 --> 00:20:08.050\nAnd it would output it on the screen in a\nfile format that you could save as a text\n\n413\n00:20:08.050 --> 00:20:11.380\nfile and load right into bind or\nWindows DNS or whatever.\n\n414\n00:20:11.380 --> 00:20:12.590\nNow you could host that zone.\n\n415\n00:20:12.590 --> 00:20:15.160\nWhat you're effectively doing is\nwhat's called a zone transfer, right?\n\n416\n00:20:15.160 --> 00:20:18.010\nA zone transfer is when we synchronize\na zone between two DNS servers.\n\n417\n00:20:18.010 --> 00:20:19.660\nThey're using the ls command.\n\n418\n00:20:19.660 --> 00:20:22.320\nYou used to be able to do\nsomething pretty much any domain.\n\n419\n00:20:22.320 --> 00:20:24.600\nNow when you do it,\nyou'll get the error restricted, right?\n\n420\n00:20:24.600 --> 00:20:27.072\nCan't list domain server failed.\n\n421\n00:20:27.072 --> 00:20:31.902\nSo, not useful on a public server, but on\na private server, in your own business if\n\n422\n00:20:31.902 --> 00:20:36.456\nyou've got Microsoft Active Directory,\nor Bind running on your own Linux and\n\n423\n00:20:36.456 --> 00:20:40.330\nUnix servers, you might want to\nconnect up and do a zone transfer.\n\n424\n00:20:40.330 --> 00:20:43.430\nConnect and download the whole\nzone file to back it up.\n\n425\n00:20:43.430 --> 00:20:46.600\nAnd that way if you ever lose the server\nyou've got a backup on the zone file\n\n426\n00:20:46.600 --> 00:20:48.370\nright here in this ls command.\n\n427\n00:20:48.370 --> 00:20:51.200\nAnd you can do ls for\nwhatever your domain is, right, so\n\n428\n00:20:51.200 --> 00:20:53.800\nmaybe you have like company.com.\n\n429\n00:20:53.800 --> 00:20:56.865\nAnd then you can pipe that into a file, so\n\n430\n00:20:56.865 --> 00:21:02.020\nyou might call it company.com.dns\nthat's the normal file name.\n\n431\n00:21:02.020 --> 00:21:04.441\nIt's just a text file,\ncall it whatever you want but\n\n432\n00:21:04.441 --> 00:21:07.522\nmost people do end them with dot-dns and\nif you're running bind or\n\n433\n00:21:07.522 --> 00:21:10.399\nWindow DNS they actually look for\na file like that for domain.\n\n434\n00:21:10.399 --> 00:21:13.415\nAnd I can dump into a file\ncopy that to a DNS server and\n\n435\n00:21:13.415 --> 00:21:17.188\nbring that zone right back up\non a new DNS server very easily.\n\n436\n00:21:17.188 --> 00:21:20.770\nAll right, so on private servers\nthat works if you are approved for\n\n437\n00:21:20.770 --> 00:21:22.500\ndoing zone transfers.\n\n438\n00:21:22.500 --> 00:21:26.340\nOn public servers, you’re not normally\napproved for doing zoned transfers.\n\n439\n00:21:26.340 --> 00:21:29.150\nYou at least have to be listed\nas a NS record but most of them\n\n440\n00:21:29.150 --> 00:21:32.210\nactually require you to put it into\nsome security profile on the back end.\n\n441\n00:21:32.210 --> 00:21:35.770\nSo that's neat command that's there that\n\n442\n00:21:35.770 --> 00:21:40.180\njust not you really don't see it\nreally in use all that often anymore.\n\n443\n00:21:40.180 --> 00:21:43.010\nBecause you've gotta be approved, right?\n\n444\n00:21:43.010 --> 00:21:46.460\nSecurity is far different in the world\nof DNS today than what it used to be.\n\n445\n00:21:46.460 --> 00:21:49.250\n&gt;&gt; Don, that's a lot of great information,\nin fact now I'm gonna be using that set\n\n446\n00:21:49.250 --> 00:21:50.810\ncommand now that I know\nit a little bit better.\n\n447\n00:21:50.810 --> 00:21:54.030\nIt does look like we're gonna wrap\nthis one up soon, but before we do,\n\n448\n00:21:54.030 --> 00:21:56.790\ndo you got any additional\nwords on using NS lookup?\n\n449\n00:21:56.790 --> 00:21:58.280\nAny tips or tricks?\n\n450\n00:21:58.280 --> 00:22:00.810\n&gt;&gt; There are more commands in there,\nand you probably notice like when I did\n\n451\n00:22:00.810 --> 00:22:03.400\nthe question mark there were\na handful like setting the class and\n\n452\n00:22:03.400 --> 00:22:05.030\nsetting route and so on.\n\n453\n00:22:05.030 --> 00:22:09.746\nThose are useful in very,\nvery few scenarios.\n\n454\n00:22:09.746 --> 00:22:10.938\nClass is pretty much useless.\n\n455\n00:22:10.938 --> 00:22:13.060\nThere's really only one class these days.\n\n456\n00:22:13.060 --> 00:22:14.540\nThe IN, or the internet class.\n\n457\n00:22:14.540 --> 00:22:17.777\nThe other ones are like the chaos class,\nthe class, the test class.\n\n458\n00:22:17.777 --> 00:22:19.890\nThose are all way back in\nthe early days of DNS, and\n\n459\n00:22:19.890 --> 00:22:21.790\nthey aren't really used anymore.\n\n460\n00:22:21.790 --> 00:22:26.380\nOther ones like manipulating how\nthe internet transfers work,\n\n461\n00:22:26.380 --> 00:22:28.730\nagain there's really only\none way in use anymore, so\n\n462\n00:22:28.730 --> 00:22:31.160\nthere's not really a reason\nto override those.\n\n463\n00:22:31.160 --> 00:22:34.970\nRoot can be kind of handy, if you're\noverriding the root hint servers on\n\n464\n00:22:34.970 --> 00:22:38.320\nthe internet, if you're not using those,\nyou can connect to any server and\n\n465\n00:22:38.320 --> 00:22:40.190\nuse the set root command.\n\n466\n00:22:40.190 --> 00:22:43.560\nTo flag it as the root and\nyou won't use root hints anymore.\n\n467\n00:22:43.560 --> 00:22:45.610\nEverything will go\nagainst that one server.\n\n468\n00:22:45.610 --> 00:22:49.730\nNot something I've ever had to use\nin production, but it is there.\n\n469\n00:22:49.730 --> 00:22:53.500\nSo the commands that I\ndidn't show are ones that\n\n470\n00:22:53.500 --> 00:22:55.820\njust we're not really gonna use that much.\n\n471\n00:22:55.820 --> 00:22:58.480\nThere's the search list command,\nwhere you can create\n\n472\n00:22:58.480 --> 00:23:01.670\na suffix search list if you want,\nright there inside of NSLookup.\n\n473\n00:23:01.670 --> 00:23:03.470\nWe've usually already got\nthat defined on our systems,\n\n474\n00:23:03.470 --> 00:23:05.050\nwe don't necessarily need it there.\n\n475\n00:23:05.050 --> 00:23:08.530\nAnd then timeouts and retries.\n\n476\n00:23:08.530 --> 00:23:11.380\nYou can override the timeout time and\nthe retry time.\n\n477\n00:23:11.380 --> 00:23:15.740\nThey're the amount of retries,\nand the interval of the timeout,\n\n478\n00:23:15.740 --> 00:23:18.770\nto use the right terminology\nto kinda manipulate those.\n\n479\n00:23:18.770 --> 00:23:20.960\nAgain, less common use scenario.\n\n480\n00:23:20.960 --> 00:23:24.576\nWhat we saw through the whole beginning of\nthis is really kinda the important meat\n\n481\n00:23:24.576 --> 00:23:25.809\nand potatoes of NS hookup.\n\n482\n00:23:25.809 --> 00:23:28.136\n&gt;&gt; Well, Don, that's a wealth of\ninformation and we appreciate it.\n\n483\n00:23:28.136 --> 00:23:32.108\nWe appreciate the viewers, so we're gonna\ngo ahead and sign out here at ITProTV.\n\n484\n00:23:32.108 --> 00:23:33.619\nI've been your host, Wes Brian.\n\n485\n00:23:33.619 --> 00:23:34.493\n&gt;&gt; And I'm Don Pozet.\n\n486\n00:23:34.493 --> 00:23:36.747\n&gt;&gt; And we'll see you next time.\n\n487\n00:23:36.747 --> 00:23:42.694\n[MUSIC]\n\n488\n00:23:42.694 --> 00:23:46.127\n&gt;&gt; Thank you for watching, IT Pro TV.\n\n489\n00:23:46.127 --> 00:23:48.960\n[BLANK AUDIO]\n\n",
          "vimeoId": "191813018"
        },
        {
          "description": "In this episode, Wes and Don explain how to use the Domain Internet Groper utility more commonly known as dig. They explain some of the command line arguments that can be utilized with dig.",
          "length": "1454",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-1-2-dig-111116.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-1-2-dig-111116-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-1-2-dig-111116-sm.jpg",
          "title": "dig",
          "transcript": "WEBVTT\n\n1\n00:00:00.270 --> 00:00:01.180\nWelcome to ITProTV.\n\n2\n00:00:01.180 --> 00:00:06.993\nI'm your host [CROSSTALK]\n\n3\n00:00:06.993 --> 00:00:08.297\n[MUSIC]\n\n4\n00:00:08.297 --> 00:00:11.822\n&gt;&gt; You're watching ITProTV.\n\n5\n00:00:11.822 --> 00:00:15.325\n&gt;&gt; Welcome to another exciting\nepisode here at ITProTV.\n\n6\n00:00:15.325 --> 00:00:17.495\nI'm your host, Wes Bryan,\nand in today's episode,\n\n7\n00:00:17.495 --> 00:00:18.985\nwe've got an exciting one coming at you.\n\n8\n00:00:18.985 --> 00:00:21.045\nWe're gonna be digging into DNS.\n\n9\n00:00:21.045 --> 00:00:23.865\nAnd joining me in the studios today\nis none other than Mr. Don Pezet.\n\n10\n00:00:23.865 --> 00:00:24.725\nDon, how you doing, sir?\n\n11\n00:00:24.725 --> 00:00:27.805\n&gt;&gt; I think that might be the best pun\nI'm gonna hear all day right there.\n\n12\n00:00:27.805 --> 00:00:29.035\nWes, you nailed it on the head.\n\n13\n00:00:29.035 --> 00:00:31.695\nWe're gonna be taking a look\nat the Dig utility today.\n\n14\n00:00:31.695 --> 00:00:34.515\nAnd some of you may be familiar with this,\nsome of you may not.\n\n15\n00:00:34.515 --> 00:00:37.680\nSome of you may have never heard of\nDig before, and it's kind of a shame.\n\n16\n00:00:37.680 --> 00:00:43.240\nIf you come from the Windows world, well,\nWes, if you come from the Windows world,\n\n17\n00:00:43.240 --> 00:00:46.160\nwhat's the standard tool we use for\ntroubleshooting DNS?\n\n18\n00:00:46.160 --> 00:00:48.132\n&gt;&gt; You know,\nthe first thing I think of is NsLookup.\n\n19\n00:00:48.132 --> 00:00:51.340\n&gt;&gt; Exactly, and\nthat's what you have in the Windows world.\n\n20\n00:00:51.340 --> 00:00:53.960\nBut in the UNIX world,\nthere's a little known fact.\n\n21\n00:00:53.960 --> 00:00:55.860\nAnd we'll just continue to test you Wes.\n\n22\n00:00:55.860 --> 00:00:57.850\nDid you know that NsLookup is deprecated?\n\n23\n00:00:57.850 --> 00:00:59.380\n&gt;&gt; No, I did not, no, not at all.\n\n24\n00:00:59.380 --> 00:01:01.020\n&gt;&gt; Yeah, it's pretty surprising,\nso I mean,\n\n25\n00:01:01.020 --> 00:01:03.020\nI guess Microsoft didn't get the memo or\nwhatever.\n\n26\n00:01:03.020 --> 00:01:05.150\nSo we still have NsLookup on that side.\n\n27\n00:01:05.150 --> 00:01:08.870\nBut when you jump into a Linux or\na macOS system,\n\n28\n00:01:08.870 --> 00:01:13.360\nyou usually still have NsLookup, but\nyou're supposed to be moving away from it.\n\n29\n00:01:13.360 --> 00:01:14.960\nYou're not supposed to\nbe using it anymore.\n\n30\n00:01:14.960 --> 00:01:18.030\nAnd instead we have another\nutility called Dig.\n\n31\n00:01:18.030 --> 00:01:23.170\nAnd Dig does a lot of the same things\nthat NsLookup does, but it does\n\n32\n00:01:23.170 --> 00:01:26.790\nsome extra things that are actually\npretty handy for us to see and use.\n\n33\n00:01:26.790 --> 00:01:29.570\nThat's what we're gonna take a look\nat right here, is the Dig utility.\n\n34\n00:01:29.570 --> 00:01:32.170\nLet me start with one important thing,\n\n35\n00:01:32.170 --> 00:01:34.300\nif you're a Windows user\ndon't turn off the TV, right?\n\n36\n00:01:34.300 --> 00:01:37.470\nYou're like well forget it, I've got\nNsLookup, I'm going to turn this off.\n\n37\n00:01:37.470 --> 00:01:39.390\nYou can run Dig on Windows.\n\n38\n00:01:39.390 --> 00:01:42.970\nDig is actually part of the BIND\ndistribution, and BIND is the open source\n\n39\n00:01:42.970 --> 00:01:46.360\nDNS server that is used by the majority\nDNS servers on the planet.\n\n40\n00:01:46.360 --> 00:01:48.390\nMicrosoft's DNS is kind\nof in second place.\n\n41\n00:01:48.390 --> 00:01:53.230\nBut with BIND, they actually\npackage Dig as a part of BIND.\n\n42\n00:01:53.230 --> 00:01:55.400\nAnd they have a Windows version\nof BIND that you could run,\n\n43\n00:01:55.400 --> 00:01:57.790\nyou don't have to run Microsoft's DNS\nserver if you don't want.\n\n44\n00:01:57.790 --> 00:01:59.360\nSo let me just show you real quick here,\n\n45\n00:01:59.360 --> 00:02:01.150\nI think I've got it pulled\nup in the background.\n\n46\n00:02:01.150 --> 00:02:05.510\nHere we go, so BIND is distributed by\nthe Internet Systems Consortium, the ISC.\n\n47\n00:02:05.510 --> 00:02:07.405\nAnd if you go to their website,\n\n48\n00:02:07.405 --> 00:02:14.160\nwww.isc.org/downloads/BIND You can go\nin and see all the different downloads.\n\n49\n00:02:14.160 --> 00:02:18.220\nNow, most of the downloads over\nhere are the source code downloads,\n\n50\n00:02:18.220 --> 00:02:22.380\nthe files that were used on Linux and\non macOS.\n\n51\n00:02:22.380 --> 00:02:24.440\nBut if you keep scrolling down,\nyou'll find a link.\n\n52\n00:02:24.440 --> 00:02:26.646\nIt's not the most amazingly\norganized website, but\n\n53\n00:02:26.646 --> 00:02:28.910\nyou can find a link to the FTP server.\n\n54\n00:02:28.910 --> 00:02:31.320\nAnd when you connect to the FTP server,\n\n55\n00:02:31.320 --> 00:02:33.280\nyou can browse right into\nthe current version of BIND.\n\n56\n00:02:33.280 --> 00:02:36.590\nAnd you can find all of the different\nfiles that are available there for\n\n57\n00:02:36.590 --> 00:02:38.990\nLinux as well as for Windows.\n\n58\n00:02:38.990 --> 00:02:41.950\nAnd so right here I can find\nthis 64-bit version of BIND,\n\n59\n00:02:41.950 --> 00:02:43.540\nthat's this guy right here.\n\n60\n00:02:43.540 --> 00:02:46.580\nAnd I can find the 32-bit\nversion of BIND for Windows.\n\n61\n00:02:46.580 --> 00:02:49.590\nAnd you can download those and\nonce you got them downloaded,\n\n62\n00:02:49.590 --> 00:02:52.680\nwhat you're going to see\nis a bunch of files.\n\n63\n00:02:52.680 --> 00:02:55.760\nAll these little files that I've got\npulled up here that are in that zip file.\n\n64\n00:02:55.760 --> 00:02:59.280\nAnd it actually has the full version\nof BIND, you can run the DNS server,\n\n65\n00:02:59.280 --> 00:03:00.530\nbut let's ignore that.\n\n66\n00:03:00.530 --> 00:03:04.020\nIf you can just scroll down a bit,\nyou'll find dig.exe.\n\n67\n00:03:04.020 --> 00:03:07.750\nThere's the Dig utility ready for\nWindows, okay?\n\n68\n00:03:07.750 --> 00:03:11.240\nIt does require the Visual C runtime,\nwhich I believe they package in here also.\n\n69\n00:03:11.240 --> 00:03:12.580\nLet me see, yeah, right there.\n\n70\n00:03:12.580 --> 00:03:15.980\nThe Visual C Redistributable package but\n\n71\n00:03:15.980 --> 00:03:19.270\nthat Dig utility is what's\nreplacing Nslookup.\n\n72\n00:03:19.270 --> 00:03:21.370\nAnd eventually Microsoft\nwill work that into the os.\n\n73\n00:03:21.370 --> 00:03:25.120\nTo my knowledge, they haven't done it yet,\nbut eventually it'll come in, right?\n\n74\n00:03:25.120 --> 00:03:28.250\nSo if you don't have it on Windows,\nyou can go out there and get it and\n\n75\n00:03:28.250 --> 00:03:29.140\nload it on there.\n\n76\n00:03:29.140 --> 00:03:31.540\nIf you're on a Mac, like I am right now or\n\n77\n00:03:31.540 --> 00:03:35.040\nif you're on a Linux box,\nthe odds are you've already got Dig.\n\n78\n00:03:35.040 --> 00:03:39.750\nIf you did a minimal distribution install,\nit might be missing and you can just\n\n79\n00:03:39.750 --> 00:03:42.870\ninstall it from your repository and\nyou'll have it pretty quick.\n\n80\n00:03:42.870 --> 00:03:45.140\nYou can test if you have Dig real quick,\neasily,\n\n81\n00:03:45.140 --> 00:03:47.840\njust by running Dig and there you go.\n\n82\n00:03:47.840 --> 00:03:50.370\nNow Dig is different than\nNslookup in that we don't\n\n83\n00:03:50.370 --> 00:03:53.150\nget a interactive command prompt with it.\n\n84\n00:03:53.150 --> 00:03:56.680\nDig takes everything on the command\nline and that's just how it is and\n\n85\n00:03:56.680 --> 00:03:58.660\nthat does make it a little bit\neasier to use in my opinion.\n\n86\n00:03:58.660 --> 00:04:01.740\n&gt;&gt; The one thing I noticed right away,\nDon, is when you hit Dig the first thing\n\n87\n00:04:01.740 --> 00:04:05.030\nit did is that it went out and\nit returned the root hint servers there.\n\n88\n00:04:05.030 --> 00:04:07.880\n&gt;&gt; What it actually did here,\nit didn't actually go out anywhere.\n\n89\n00:04:07.880 --> 00:04:11.040\nWhat it did is it looked at\nmy current configuration.\n\n90\n00:04:11.040 --> 00:04:14.800\nSo just running Dig by itself, like you\nsaid, that can be our first lesson, right?\n\n91\n00:04:14.800 --> 00:04:20.590\nJust running Dig, by itself, will show you\nhow your client is configured for DNS.\n\n92\n00:04:20.590 --> 00:04:21.890\nSo when I look at it,\n\n93\n00:04:21.890 --> 00:04:25.930\nI can see that mine pulled the global\noptions from my system, right?\n\n94\n00:04:25.930 --> 00:04:29.030\nThe options for\nhow my workstation is configured.\n\n95\n00:04:29.030 --> 00:04:30.770\nAnd as I scroll down a little bit here,\n\n96\n00:04:30.770 --> 00:04:34.509\nI can see,\nwhat are my root hint servers set at?\n\n97\n00:04:35.590 --> 00:04:38.040\nMost everybody is going to have\nthe same root hint servers, right?\n\n98\n00:04:38.040 --> 00:04:42.500\na through m and just kind of laid\nout right there that we reference.\n\n99\n00:04:42.500 --> 00:04:45.970\nSome people do override the roots,\nbut it's a pretty uncommon thing.\n\n100\n00:04:45.970 --> 00:04:49.000\nAnd then after that I can see\nthe server that I am configured to use.\n\n101\n00:04:49.000 --> 00:04:51.140\nI'm said to use 8.8.8.8 and\nthat's who I'm set to.\n\n102\n00:04:51.140 --> 00:04:57.700\nAnd it's got a quarry time against that\nserver of 13 milliseconds and there we go.\n\n103\n00:04:57.700 --> 00:05:01.650\nSo if you just wanted to quickly verify\nhow you're configured you can just run Dig\n\n104\n00:05:01.650 --> 00:05:03.570\nright there by itself, all right?\n\n105\n00:05:03.570 --> 00:05:05.710\nNow we can also use Dig\njust like we used NsLookup.\n\n106\n00:05:05.710 --> 00:05:08.320\nIf I wanna find out\nthe IP address of a host,\n\n107\n00:05:08.320 --> 00:05:12.320\nI can just run Dig followed\nby the host name, right?\n\n108\n00:05:12.320 --> 00:05:18.660\nSo if I wanna find itpro.tv's IP address,\nI can run it and I'll get it back.\n\n109\n00:05:18.660 --> 00:05:21.710\nNow you'll notice we get a lot more\ninformation than we do with NsLookup.\n\n110\n00:05:21.710 --> 00:05:24.370\nWith NsLookup it told me what\nserver I looked up against,\n\n111\n00:05:24.370 --> 00:05:26.610\nwhat the IP was that I got as a result.\n\n112\n00:05:26.610 --> 00:05:31.450\nAnd it told me if it was a recursive\nlookup or an authoritative lookup.\n\n113\n00:05:31.450 --> 00:05:35.150\nWhen I look here, I can see\nthe question that I asked, right?\n\n114\n00:05:35.150 --> 00:05:37.860\nSo that's the query that I looked up.\n\n115\n00:05:37.860 --> 00:05:40.060\nAnd the answer that I got back.\n\n116\n00:05:40.060 --> 00:05:43.850\nAnd that's important cuz you can\noverride parts of the question.\n\n117\n00:05:43.850 --> 00:05:47.350\nIt defaults to an a record lookup,\nand so it's telling me that.\n\n118\n00:05:47.350 --> 00:05:51.620\nBut I can override that and say I'm going\nto look up a four a record or a mx record,\n\n119\n00:05:51.620 --> 00:05:53.780\nand it would show that value right here.\n\n120\n00:05:53.780 --> 00:05:56.460\nAnd this IN, that's the class.\n\n121\n00:05:56.460 --> 00:05:58.980\nAnd everything uses\nthe internet class these days.\n\n122\n00:05:58.980 --> 00:06:01.690\nThere's a handful of other classes but\nthey really just don't get used.\n\n123\n00:06:01.690 --> 00:06:03.770\nSo you're normally gonna see IN,\njust like that.\n\n124\n00:06:03.770 --> 00:06:08.170\nAnd then when I got my response back,\nit comes back with the information and\n\n125\n00:06:08.170 --> 00:06:11.510\nwhat I ultimately wanted,\nwhich was the IP address.\n\n126\n00:06:11.510 --> 00:06:15.170\nAnd I just see the server I communicated\nwith, the message size that I sent,\n\n127\n00:06:15.170 --> 00:06:16.420\nthe query time.\n\n128\n00:06:16.420 --> 00:06:21.390\nSo a few extra things I can see that\nit was not an authoritative lookup.\n\n129\n00:06:21.390 --> 00:06:26.470\nMy authority is zero, but that I did get\nmy answer, in that it was recursive.\n\n130\n00:06:26.470 --> 00:06:31.320\nWe sent our query, recursive desired and\nrecursive available.\n\n131\n00:06:31.320 --> 00:06:33.787\nSo those were all things\nwe saw with NsLookup,\n\n132\n00:06:33.787 --> 00:06:35.290\ntoo, all kind of being laid out in Dig.\n\n133\n00:06:35.290 --> 00:06:40.476\nAll right, now by itself,\nDig is really just like NsLookup,\n\n134\n00:06:40.476 --> 00:06:47.180\nbut where it gets more powerful is that\nwe can add additional things into it.\n\n135\n00:06:47.180 --> 00:06:48.970\nWe can override what server we're using.\n\n136\n00:06:48.970 --> 00:06:51.030\nI did my look up against 8.8.8.8.\n\n137\n00:06:51.030 --> 00:06:56.010\nWell Dig takes a lot of command line\nmodifiers that we can use to change\n\n138\n00:06:56.010 --> 00:06:57.230\nthe way it behaves.\n\n139\n00:06:57.230 --> 00:07:00.480\nIf you run a man Dig,\nIt'll pull up here and\n\n140\n00:07:00.480 --> 00:07:02.940\nshow you some of the different\nthings you can specify.\n\n141\n00:07:02.940 --> 00:07:07.630\nLike we can overwrite the server,\nwe can specify a class,\n\n142\n00:07:07.630 --> 00:07:11.040\na filename,\nwe can specify a port number to use.\n\n143\n00:07:11.040 --> 00:07:14.240\nWe can overwrite all sort of\ninteresting things as we reach out and\n\n144\n00:07:14.240 --> 00:07:17.490\nwe do that query, and you'll see\nsome things kind of overlap a bit.\n\n145\n00:07:17.490 --> 00:07:20.610\nBut we've got a ton of options\nthat are stuck in here also and\n\n146\n00:07:20.610 --> 00:07:21.870\nI'm gonna show you some of those.\n\n147\n00:07:21.870 --> 00:07:23.580\n&gt;&gt; Now Don,\nwhen we were talking about NSLookup,\n\n148\n00:07:23.580 --> 00:07:24.990\nyou had mentioned the interactive mode and\n\n149\n00:07:24.990 --> 00:07:27.640\nthat's how we really dug\ninto the power of NSLookup.\n\n150\n00:07:27.640 --> 00:07:29.530\nSo here we don't have\nthe interactive mode,\n\n151\n00:07:29.530 --> 00:07:32.980\nwe just have to know those arguments\nto add to it to really gain the power.\n\n152\n00:07:32.980 --> 00:07:34.220\n&gt;&gt; Yeah, and if you think about it,\n\n153\n00:07:34.220 --> 00:07:35.700\nwhen you're in the interactive\nmode of NSLookup,\n\n154\n00:07:35.700 --> 00:07:37.240\nyou have to know the arguments anyway.\n\n155\n00:07:37.240 --> 00:07:40.900\nYou're still typing them in, so here it's\njust consolidating all into one line, so\n\n156\n00:07:40.900 --> 00:07:41.920\nit works really well.\n\n157\n00:07:41.920 --> 00:07:44.910\nIt's also handy if you need to\nuse this programmatically, right.\n\n158\n00:07:44.910 --> 00:07:45.720\nAs part of a script,\n\n159\n00:07:45.720 --> 00:07:48.540\nyou need it to determine an IP address and\noutput some value, you\n\n160\n00:07:48.540 --> 00:07:52.160\ncan do that programmatically a lot easier\nwith Dig than you can with NsLookup.\n\n161\n00:07:52.160 --> 00:07:55.855\nIt's really hard to script something\nwhen it's got an interactive prompt.\n\n162\n00:07:55.855 --> 00:07:57.637\nSo let's take a look at\na few of the options.\n\n163\n00:07:57.637 --> 00:08:03.131\nMaybe I wanna override\nthe server that I'm looking up.\n\n164\n00:08:03.131 --> 00:08:08.150\nSo for example, if I do a dig for\nwww.google.com, I can look that up and\n\n165\n00:08:08.150 --> 00:08:12.390\nthere's all my results and\nit ran against 8.8.8.8.\n\n166\n00:08:12.390 --> 00:08:15.100\nAnd I got all my A records that came back,\n\n167\n00:08:15.100 --> 00:08:18.310\nthere's the information and\nit all worked, okay?\n\n168\n00:08:18.310 --> 00:08:24.920\nWell, I could have added an @ and\nthen 8.8.4.4, right?\n\n169\n00:08:24.920 --> 00:08:29.100\nI'm overriding the server that I'm\ngonna perform the lookup against.\n\n170\n00:08:29.100 --> 00:08:33.914\nAnd now when I did the lookup,\nI can see that server was 8.8.4.4.\n\n171\n00:08:33.914 --> 00:08:37.280\nNow why did I have to stick\nan @ at the beginning?\n\n172\n00:08:37.280 --> 00:08:42.112\nSo that it knew that that was a server and\nnot just another host to lookup, right?\n\n173\n00:08:42.112 --> 00:08:46.886\nCuz if I did a lookup against 8.8.8.8,\nit might think that's a PTR record, right?\n\n174\n00:08:46.886 --> 00:08:49.180\nAn IP to resolve back to an name.\n\n175\n00:08:49.180 --> 00:08:51.413\nThe @ symbol is what lets it\nknow that it's a server, right?\n\n176\n00:08:51.413 --> 00:08:53.870\nSo we can quickly override that server.\n\n177\n00:08:53.870 --> 00:08:55.800\nYou can also override the type.\n\n178\n00:08:55.800 --> 00:08:57.192\nI did an A record.\n\n179\n00:08:57.192 --> 00:09:00.870\nRemember with NSLOOKUP by default,\nit looks up A and AAAA, records?\n\n180\n00:09:00.870 --> 00:09:03.179\nWell here it just looked up A records.\n\n181\n00:09:03.179 --> 00:09:06.400\nI know Google has AAAA records right?\n\n182\n00:09:06.400 --> 00:09:10.820\nSo I could come in and I could\nspecify a type and I can just do that\n\n183\n00:09:10.820 --> 00:09:15.280\nright here in line or there's a command\nline argument that we can use also.\n\n184\n00:09:15.280 --> 00:09:20.140\nSo I just added AAAA to the end and now\nwhen I did the lookup I sent the query and\n\n185\n00:09:20.140 --> 00:09:24.910\nthe return result that I got was\na ipv6 4A record right there.\n\n186\n00:09:24.910 --> 00:09:30.130\nSo I got the information that I wanted and\nit's laid out easy to override, right?\n\n187\n00:09:30.130 --> 00:09:36.620\nNow as far as the simple overrides those\nare about it, the server and the type.\n\n188\n00:09:36.620 --> 00:09:39.790\nEverything else that we wanna\noverride we need to override with\n\n189\n00:09:39.790 --> 00:09:41.330\ncommand line arguments.\n\n190\n00:09:41.330 --> 00:09:44.950\nAnd the command line arguments will have\na little plus symbol before them, so\n\n191\n00:09:44.950 --> 00:09:46.830\nyou'll say plus this, plus that.\n\n192\n00:09:46.830 --> 00:09:52.460\nNotice every time that I ran dig\nit shows this global options +cmd.\n\n193\n00:09:52.460 --> 00:09:55.640\nSo, every time I ran dig,\nI was running a command,\n\n194\n00:09:55.640 --> 00:09:57.690\njust a straightforward\ncommand to do a lookup.\n\n195\n00:09:57.690 --> 00:09:59.850\nBut there's other options I can specify.\n\n196\n00:09:59.850 --> 00:10:00.800\nThese are global, right?\n\n197\n00:10:00.800 --> 00:10:02.400\nSo these are default options.\n\n198\n00:10:02.400 --> 00:10:05.870\nEvery other option I specify\nin the command line.\n\n199\n00:10:05.870 --> 00:10:07.776\nAnd so we can tell it to do\nall sorts of crazy things.\n\n200\n00:10:07.776 --> 00:10:12.069\nFor example, In DNS,\n\n201\n00:10:12.069 --> 00:10:17.030\nwe can do TCP lookups and\nwe can do UDP lookups, right?\n\n202\n00:10:17.030 --> 00:10:21.720\nWhen I did the lookup, up here, at least\nI think, it doesn't tell us, right?\n\n203\n00:10:21.720 --> 00:10:23.400\nLet me just make sure I'm\ntelling you the truth here.\n\n204\n00:10:23.400 --> 00:10:27.512\nI'm pretty sure it doesn't tell\nus whether we did TCP or UDP.\n\n205\n00:10:27.512 --> 00:10:30.662\nWes, unless you spot it I\ndon't think it's here, so\n\n206\n00:10:30.662 --> 00:10:33.323\nit doesn't tell us whether we did TCP or\nUDP.\n\n207\n00:10:33.323 --> 00:10:40.770\nNow the reality is if the entire lookup\nfit in one packet, then it does TCP.\n\n208\n00:10:40.770 --> 00:10:43.829\nBut if it goes into more than one,\nI'm sorry, it does UDP.\n\n209\n00:10:43.829 --> 00:10:46.920\nAnd if it's more then one it flips over\nto TCP cuz it's gotta do sequencing to\n\n210\n00:10:46.920 --> 00:10:47.950\nbreak it apart.\n\n211\n00:10:47.950 --> 00:10:50.450\nSo it flips back and forth between them.\n\n212\n00:10:50.450 --> 00:10:55.250\nWell, what if I'm testing a server and\nI need to make sure that I use TCP, or\n\n213\n00:10:55.250 --> 00:10:57.300\nthat I make sure that I use UDP?\n\n214\n00:10:57.300 --> 00:11:00.710\nWell, I can add a command line\nargument and I can force that.\n\n215\n00:11:00.710 --> 00:11:06.240\nSo for example,\nif I wanna do a look up of ITPro.TV,\n\n216\n00:11:06.240 --> 00:11:09.526\nand I wanna force it to use TCP.\n\n217\n00:11:09.526 --> 00:11:11.823\nI could come in here and say +tcp,\n\n218\n00:11:11.823 --> 00:11:16.429\nusing that + symbol to let it know\nit's a command argument, right?\n\n219\n00:11:16.429 --> 00:11:19.120\nAnd when it runs it,\nit's gonna do the lookup.\n\n220\n00:11:19.120 --> 00:11:22.040\nAnd I know it's using TCP to do it.\n\n221\n00:11:22.040 --> 00:11:25.750\nAnd I can see right here in\nthe very first line of output.\n\n222\n00:11:25.750 --> 00:11:26.990\nSee how it's got that entry right there,\nand\n\n223\n00:11:26.990 --> 00:11:31.960\nI can see the +tcp was accepted\nas a command line argument.\n\n224\n00:11:31.960 --> 00:11:33.950\nSo I know I did a TCP lookup.\n\n225\n00:11:33.950 --> 00:11:37.664\nIf I do a +notcp, right?\n\n226\n00:11:37.664 --> 00:11:40.040\nNow that's just like\nthe options in NSLOOKUP.\n\n227\n00:11:40.040 --> 00:11:43.642\nRemember in NSLOOKUP, you can do\nan option like search or no search,\n\n228\n00:11:43.642 --> 00:11:45.950\nhere it's tcp or notcp.\n\n229\n00:11:45.950 --> 00:11:50.530\nBy doing that I'm gonna force it to use\nUDP and now I can see that it worked.\n\n230\n00:11:50.530 --> 00:11:54.295\nSo if I have a server and\nI'm trying to block one of the protocols,\n\n231\n00:11:54.295 --> 00:11:57.732\nnow I can easily test it by\nspecifying which one I wanna use.\n\n232\n00:11:57.732 --> 00:11:59.350\nLet's see,\nwhat are some of the other useful ones?\n\n233\n00:11:59.350 --> 00:12:01.382\nI mentioned search and no search, right?\n\n234\n00:12:01.382 --> 00:12:03.180\nIn NSLOOKUP,\nyou don't have those in the command line,\n\n235\n00:12:03.180 --> 00:12:04.740\nyou have them in the interactive prompt.\n\n236\n00:12:04.740 --> 00:12:06.260\nHere we have them in the command line.\n\n237\n00:12:06.260 --> 00:12:10.260\nWhen I did a lookup for\nITProTV it had no authority, right?\n\n238\n00:12:10.260 --> 00:12:13.490\nIt had to do a recursive\nlookup to find that result.\n\n239\n00:12:13.490 --> 00:12:15.880\nWell, what if I don't want recursion?\n\n240\n00:12:15.880 --> 00:12:17.150\nI can turn that off.\n\n241\n00:12:17.150 --> 00:12:20.070\nWhat if I don't want to use\na DNS suffix list, right?\n\n242\n00:12:20.070 --> 00:12:22.660\nMost people have a DNS suffix set up so\nthat if you search for\n\n243\n00:12:22.660 --> 00:12:25.890\na single name, it'll extrapolate\nthat out into something bigger.\n\n244\n00:12:25.890 --> 00:12:33.058\nSo for example if I did a lookup for\ndonlaptop, and just left it like that?\n\n245\n00:12:33.058 --> 00:12:37.510\nNot donlaptop.itpro.tv, just donlaptop.\n\n246\n00:12:37.510 --> 00:12:40.920\nWell when I run that,\nthat's not a valid DNS name is it?\n\n247\n00:12:40.920 --> 00:12:45.420\nSo it's gotta figure out who that is and\nit'll use your DNS search list for it.\n\n248\n00:12:45.420 --> 00:12:46.810\nI apparently don't have one.\n\n249\n00:12:46.810 --> 00:12:50.091\nSo see how it's got that donlaptop.,\nand that's the end of it, right?\n\n250\n00:12:50.091 --> 00:12:53.420\nIt did a literal lookup\nwithout the search list.\n\n251\n00:12:53.420 --> 00:12:57.540\nWell on your operating system you might\nhave a search list set up, right?\n\n252\n00:12:57.540 --> 00:13:01.425\nSo for example, I'm on my Mac, let me\njust jump into my network adapter and\n\n253\n00:13:01.425 --> 00:13:03.900\nwe'll see if I've got one.\n\n254\n00:13:03.900 --> 00:13:07.020\nAnd I actually do have a search domain,\nit just didn't get used there for\n\n255\n00:13:07.020 --> 00:13:08.150\nsome strange reason.\n\n256\n00:13:08.150 --> 00:13:10.590\nSo that may actually be off by default.\n\n257\n00:13:10.590 --> 00:13:12.170\nIf I wanna tailor this though,\n\n258\n00:13:12.170 --> 00:13:15.740\nI can tell the system whether I want\nit to use the search domains or not.\n\n259\n00:13:15.740 --> 00:13:17.275\nAnd in my case, it didn't use it.\n\n260\n00:13:17.275 --> 00:13:19.763\nSo maybe I'll manually add a few.\n\n261\n00:13:19.763 --> 00:13:21.667\nI'm gonna add itpro.tv.\n\n262\n00:13:21.667 --> 00:13:24.880\nI'll add lab.itpro.tv, right?\n\n263\n00:13:24.880 --> 00:13:26.380\nAnd just whatever you can think of.\n\n264\n00:13:26.380 --> 00:13:27.973\nWhatever it is that you\nuse in your environment.\n\n265\n00:13:27.973 --> 00:13:30.147\nMaybe you have an entirely\ndifferent company that you use.\n\n266\n00:13:30.147 --> 00:13:34.332\nAnd so, google.com,\nwe'll see if we can make them angry today.\n\n267\n00:13:34.332 --> 00:13:38.994\nSo, you put in whatever you want, and now\nwhen you do a search for a single name,\n\n268\n00:13:38.994 --> 00:13:40.535\nit'll add google.com.\n\n269\n00:13:40.535 --> 00:13:43.668\nAnd then it'll add lab.itpro.tv, and\nthen it'll add itpro.tv, until it\n\n270\n00:13:43.668 --> 00:13:46.860\nfinds the right answer, or then it gives\nup, right, that's our suffix list.\n\n271\n00:13:46.860 --> 00:13:50.313\nAll right, so now that that's set,\nwhat should happen,\n\n272\n00:13:50.313 --> 00:13:54.684\nis I'll look up donlaptop and\nit'll look for donlaptop.google.com,\n\n273\n00:13:54.684 --> 00:13:58.648\ndonlaptop.lab.itpro.tv, and\nthen donlaptop.itpro.tv.\n\n274\n00:13:58.648 --> 00:14:00.860\nUntil it finds one that hits, right?\n\n275\n00:14:00.860 --> 00:14:02.600\nAnd that process happens\nin the background,\n\n276\n00:14:02.600 --> 00:14:04.400\nand we don't normally see it, right?\n\n277\n00:14:04.400 --> 00:14:07.040\nBut it is occurring, and it'll look up and\nit should find my laptop.\n\n278\n00:14:07.040 --> 00:14:09.950\nSo let me jump back down\nto my command here.\n\n279\n00:14:09.950 --> 00:14:13.490\nAnd I'm going to just change\nthis a little bit here.\n\n280\n00:14:13.490 --> 00:14:17.870\nSo I'll do a dig for donlaptop.\n\n281\n00:14:17.870 --> 00:14:20.472\nNow when I run it, well actually I\ndon't get my record back, right?\n\n282\n00:14:20.472 --> 00:14:23.880\nSo I still see donlaptop.,\nit didn't actually do the DNS suffix.\n\n283\n00:14:23.880 --> 00:14:25.541\nSo let me just force that.\n\n284\n00:14:25.541 --> 00:14:28.920\nI'm gonna force it by\nadding the +search option.\n\n285\n00:14:28.920 --> 00:14:35.152\nSo, +search says do the suffix list\nsearch, +nosearch says don't do it, right?\n\n286\n00:14:35.152 --> 00:14:36.600\nSo I can turn it on or off.\n\n287\n00:14:36.600 --> 00:14:39.230\nSo sometimes it's useful\nto turn it off in Windows.\n\n288\n00:14:39.230 --> 00:14:42.620\nWindows does crazy things with\nthe DNS suffix list sometimes.\n\n289\n00:14:42.620 --> 00:14:44.967\nIn Mac and Linux, there's not\nnormally a reason to disable it.\n\n290\n00:14:44.967 --> 00:14:48.890\nSo I'm gonna force that lookup,\nand so when I run it, there we go.\n\n291\n00:14:48.890 --> 00:14:50.260\nNow we got a winner, right?\n\n292\n00:14:50.260 --> 00:14:54.795\nSo If I look at what it queried,\nit queried donlaptop.itpro.tv,\n\n293\n00:14:54.795 --> 00:14:57.250\nthat's not what I typed, but\nthat's what it looked up.\n\n294\n00:14:57.250 --> 00:15:00.750\nNow, we already now that process\nthat's happening in the background.\n\n295\n00:15:00.750 --> 00:15:05.390\nBut with dig, we can actually\nsee it happen if we want, right?\n\n296\n00:15:05.390 --> 00:15:11.736\nSo what you can do is, in addition\nto +search, we can do +show search.\n\n297\n00:15:11.736 --> 00:15:16.009\nAnd it's actually going to show us each\nof the steps that it goes through when it\n\n298\n00:15:16.009 --> 00:15:20.440\nperforms that search, when it goes to\ngrab the data and bring it back to us.\n\n299\n00:15:20.440 --> 00:15:26.220\nSo, before I run that command,\nlet me just copy that.\n\n300\n00:15:26.220 --> 00:15:31.050\nI wanna kind of clear my screen a bit and\nthat\n\n301\n00:15:31.050 --> 00:15:34.330\nway we can kinda see what's part of the\nnew command, and what's part of the old.\n\n302\n00:15:34.330 --> 00:15:35.864\nSo let me just clear\nthat out a little bit.\n\n303\n00:15:35.864 --> 00:15:39.580\nAnd then I'm gonna run this\ncommand with +showsearch.\n\n304\n00:15:39.580 --> 00:15:42.490\nAnd now when I run it,\nI get a lot more data back.\n\n305\n00:15:42.490 --> 00:15:45.810\nAnd the reason is, I'm doing a lot\nmore than just one lookup, right?\n\n306\n00:15:45.810 --> 00:15:48.764\nMy first lookup, is for\ndonlaptop.google.com and\n\n307\n00:15:48.764 --> 00:15:51.716\nsure enough Google doesn't\nhave a laptop waiting for\n\n308\n00:15:51.716 --> 00:15:54.351\nme right now which is\nsomewhat disappointing.\n\n309\n00:15:54.351 --> 00:15:59.614\nSo then we move on and then we get\nin to donlaptop.lab.itpro.tv and\n\n310\n00:15:59.614 --> 00:16:05.876\nthen we move on And down here towards\nthe end, we'll see donlaptop.itpro.tv,\n\n311\n00:16:05.876 --> 00:16:09.440\nand that one actually\nresolved to an address.\n\n312\n00:16:09.440 --> 00:16:14.370\nSo with dig I can actually see the whole\nsearch process in its entirety.\n\n313\n00:16:14.370 --> 00:16:17.110\nAnd that's kind of nice, you,\nyou get an idea of where that hit is, and\n\n314\n00:16:17.110 --> 00:16:19.050\nwhich ones didn't match and\nwhich ones did.\n\n315\n00:16:19.050 --> 00:16:20.160\nThat visibility is right there.\n\n316\n00:16:20.160 --> 00:16:21.940\nThat was plus show search.\n\n317\n00:16:23.450 --> 00:16:25.570\nAnother thing we can do is,\n\n318\n00:16:25.570 --> 00:16:29.400\nyou'll notice that dig does give us\na lot more output than nslookup, right?\n\n319\n00:16:29.400 --> 00:16:34.340\nWhen I do nslookup for donlaptop.itpro.tv\n\n320\n00:16:34.340 --> 00:16:38.550\nit tells me the server I looked up\nagainst, and what the result was.\n\n321\n00:16:38.550 --> 00:16:41.720\nBut when I do dig for that same address,\n\n322\n00:16:41.720 --> 00:16:46.030\nIt's gonna show me parts of the actual\nquery that are happening, right.\n\n323\n00:16:46.030 --> 00:16:52.000\nI see the question, and I see the answer,\nwell you can add a little bit more to that\n\n324\n00:16:52.000 --> 00:16:56.830\nby adding in +qr, all right, +qr.\n\n325\n00:16:56.830 --> 00:16:59.720\nThat tells it to show the whole query.\n\n326\n00:16:59.720 --> 00:17:02.190\nAnd so I get my question and my answer.\n\n327\n00:17:02.190 --> 00:17:05.628\nBut see how there's a little bit\nmore than what we had a moment ago.\n\n328\n00:17:05.628 --> 00:17:07.460\nInstead of just a quick question and\n\n329\n00:17:07.460 --> 00:17:11.310\nanswer, I get a second set\nof data right down here.\n\n330\n00:17:11.310 --> 00:17:16.080\nAnd that's because the first question is\nreally just me reaching out to the system.\n\n331\n00:17:16.080 --> 00:17:17.720\nWhat I'm sending to them.\n\n332\n00:17:17.720 --> 00:17:20.660\nThe server then reiterates\nwhat my question was and\n\n333\n00:17:20.660 --> 00:17:22.700\npackages the answer with it, okay?\n\n334\n00:17:22.700 --> 00:17:26.330\nNow why would it do that,\nwhy would it repeat what I sent to it?\n\n335\n00:17:26.330 --> 00:17:29.350\nAnd the reason is, if we're using UDP,\nfor example, we don't necessarily have\n\n336\n00:17:29.350 --> 00:17:33.330\na session to track and so we can forget\nwhich lookup this was a response to.\n\n337\n00:17:33.330 --> 00:17:35.180\nIt could cause problems.\n\n338\n00:17:35.180 --> 00:17:37.720\nNot normally, but it can and\nso it reiterates that.\n\n339\n00:17:37.720 --> 00:17:41.110\nSo I see a little bit more\ninformation when I do that.\n\n340\n00:17:41.110 --> 00:17:47.010\nYou can also do +noQR which says\ndon't show me the query and\n\n341\n00:17:47.010 --> 00:17:48.580\nthen it comes back and that's the default.\n\n342\n00:17:48.580 --> 00:17:50.580\nSee how I just have the one question and\nanswer?\n\n343\n00:17:50.580 --> 00:17:52.060\nI don't have the two questions.\n\n344\n00:17:52.060 --> 00:17:55.250\nSo it's a little bit\nsmaller of an output there.\n\n345\n00:17:56.790 --> 00:17:59.860\nLet's see, a few other things\nthat we can tinker with with Dig.\n\n346\n00:17:59.860 --> 00:18:04.230\nYou can customize the time out times,\nthe retries, and the intervals, so\n\n347\n00:18:04.230 --> 00:18:06.450\nwe can customize what\nhappens if there's a failure.\n\n348\n00:18:06.450 --> 00:18:10.430\nSo if I do a look up for\nsomething and the server times out or\n\n349\n00:18:10.430 --> 00:18:13.680\nit just doesn't work, then I can\ntell it if I want to do retries.\n\n350\n00:18:13.680 --> 00:18:19.470\nSo for example, if I'm gonna do\na look up for database.itpro.tv.\n\n351\n00:18:19.470 --> 00:18:21.630\nI don't think that exists.\n\n352\n00:18:21.630 --> 00:18:22.900\nYeah, it doesn't exist.\n\n353\n00:18:22.900 --> 00:18:26.760\nIf I want to do a lookup for that, and for\nsome reason the server's not responding.\n\n354\n00:18:26.760 --> 00:18:31.360\nOr, I just want to test how well\nit is as far as resilience.\n\n355\n00:18:31.360 --> 00:18:33.410\nMaybe I'm doing some load testing or\nwhatever.\n\n356\n00:18:33.410 --> 00:18:38.250\nI can come in here and\nI can add something like, +time=30.\n\n357\n00:18:38.250 --> 00:18:42.740\nAnd so I can start to specify\nthe interval of time I'll wait\n\n358\n00:18:42.740 --> 00:18:44.950\nbefore a failure is determined, right?\n\n359\n00:18:44.950 --> 00:18:47.730\nSo then now this is like\nthe time I'm willing to wait.\n\n360\n00:18:47.730 --> 00:18:49.710\n&gt;&gt; Don, is that gonna be in 30 seconds?\n\n361\n00:18:49.710 --> 00:18:51.550\nCuz milliseconds,\nwe probably wouldn't even notice.\n\n362\n00:18:51.550 --> 00:18:52.340\n&gt;&gt; That's a good point.\n\n363\n00:18:52.340 --> 00:18:54.770\nI actually do believe\nit is in milliseconds.\n\n364\n00:18:54.770 --> 00:18:55.690\nLet me just pull up,\n\n365\n00:18:55.690 --> 00:19:00.110\nmaybe we can find out right in the dig\ndocumentation what that one is.\n\n366\n00:19:00.110 --> 00:19:06.260\nAnd so if we hunt down for that time out,\nlet's see it should be in seconds.\n\n367\n00:19:06.260 --> 00:19:08.270\nI mean milliseconds.\n\n368\n00:19:09.310 --> 00:19:11.600\nUsually, DNS lookups happen very,\nvery quickly so\n\n369\n00:19:11.600 --> 00:19:13.790\nif it was in seconds that's\nkind of a long time.\n\n370\n00:19:13.790 --> 00:19:15.760\nAnd if you were to do 30 seconds or\nwhatever,\n\n371\n00:19:15.760 --> 00:19:18.190\nthat really starts to\nget out of hand fast.\n\n372\n00:19:18.190 --> 00:19:19.230\n&gt;&gt; Gotcha.\n\n373\n00:19:19.230 --> 00:19:22.580\n&gt;&gt; For some reason it is not finding,\nthere we go, time.\n\n374\n00:19:22.580 --> 00:19:24.670\nSo it is the, it is the query in seconds.\n\n375\n00:19:24.670 --> 00:19:25.950\nI'm glad we looked that up.\n\n376\n00:19:25.950 --> 00:19:28.260\nSo if I do a time equals\n30 is 30 seconds so\n\n377\n00:19:28.260 --> 00:19:31.010\nyou probably wouldn;t want to do\na time of more than 1 or 2 seconds.\n\n378\n00:19:31.010 --> 00:19:34.300\nYour latency to a DNS server\nshould be below 100 milliseconds.\n\n379\n00:19:34.300 --> 00:19:37.610\nSo if it has to do recursive lookups\nthat starts to stack onto it and\n\n380\n00:19:37.610 --> 00:19:38.470\nit starts to add up.\n\n381\n00:19:38.470 --> 00:19:41.224\nAnd anything beyond a couple of seconds\nI'm actually kind of surprised that that\n\n382\n00:19:41.224 --> 00:19:41.980\nis in seconds.\n\n383\n00:19:41.980 --> 00:19:45.330\nWe can actually see the other two I was\nabout to show you which are tries and\n\n384\n00:19:45.330 --> 00:19:46.860\nretries, right?\n\n385\n00:19:46.860 --> 00:19:48.830\nNow tries and\nretries are kind of interesting.\n\n386\n00:19:48.830 --> 00:19:52.300\nTries, how many times am I going\nto try and do this lookup?\n\n387\n00:19:52.300 --> 00:19:55.530\nAnd normally we're just doing one try.\n\n388\n00:19:55.530 --> 00:19:57.350\nTry one time and that's it.\n\n389\n00:19:57.350 --> 00:20:02.200\nBut if the one time fails for\nsome reason, if I get a response\n\n390\n00:20:02.200 --> 00:20:06.440\nfrom the server that, that record\ndoesn't exist then that's the end of it.\n\n391\n00:20:06.440 --> 00:20:10.680\nBut if I can't contact the server\nthen I start to do retries.\n\n392\n00:20:10.680 --> 00:20:13.330\nAnd how many retries am I\ngoing to do beyond that.\n\n393\n00:20:13.330 --> 00:20:16.820\nNow the interesting thing here is tries,\nwhen I set a number for\n\n394\n00:20:16.820 --> 00:20:20.000\ntries, that includes\nthe very first lookup I do.\n\n395\n00:20:20.000 --> 00:20:24.302\nSo if I were to do dig for\n\n396\n00:20:24.302 --> 00:20:29.744\n+tries=3, tries=3.\n\n397\n00:20:29.744 --> 00:20:33.034\nThat means I'm gonna try three times,\nthe first time, a second time, and\n\n398\n00:20:33.034 --> 00:20:34.270\na third time.\n\n399\n00:20:34.270 --> 00:20:35.020\nRight?\n\n400\n00:20:35.020 --> 00:20:37.710\nBut if I do tries=1.\n\n401\n00:20:37.710 --> 00:20:41.070\nAnd then retries equals 2.\n\n402\n00:20:41.070 --> 00:20:45.510\nOr I'm sorry, it's just retry,\nlike that, there.\n\n403\n00:20:45.510 --> 00:20:50.330\nIf I do retry equals 2,\nthat 2 doesn't count the first try.\n\n404\n00:20:50.330 --> 00:20:54.580\nThe first try is the first attempt,\nand if it fails, then we have a retry.\n\n405\n00:20:54.580 --> 00:20:58.740\nJust the name retry, indicates there\nwas already one try before hand.\n\n406\n00:20:58.740 --> 00:21:00.620\nSo this would try one time.\n\n407\n00:21:00.620 --> 00:21:03.240\nAnd if I get a response from the service\nthat says the record doesn't exist,\n\n408\n00:21:03.240 --> 00:21:04.290\nthat's kinda the end of it, right?\n\n409\n00:21:04.290 --> 00:21:06.190\nThat kills off the try, but\n\n410\n00:21:06.190 --> 00:21:10.220\nif I can't contact the server\nthen I shift into the retries.\n\n411\n00:21:10.220 --> 00:21:13.470\nAnd I start to move forward on that,\nand I'll see if I can't find it.\n\n412\n00:21:13.470 --> 00:21:16.120\nSo if I do a lookup for database.itpro.tv,\n\n413\n00:21:16.120 --> 00:21:20.780\nwhen I go to look that up,\nsee how it didn't do any retries?\n\n414\n00:21:20.780 --> 00:21:24.320\nThat's because the server I was able\nto contact it, it informed me, and\n\n415\n00:21:24.320 --> 00:21:25.290\nit let me know.\n\n416\n00:21:25.290 --> 00:21:28.110\nBut if I were to put in a fake server,\nright?\n\n417\n00:21:28.110 --> 00:21:33.177\nSo at the very beginning of this if I\nwere to throw in a @10.10.10.10 right?\n\n418\n00:21:33.177 --> 00:21:35.580\nSomething on our local network.\n\n419\n00:21:35.580 --> 00:21:37.000\nThat server doesn't exist.\n\n420\n00:21:37.000 --> 00:21:39.510\nIt's going to try to contact it.\n\n421\n00:21:39.510 --> 00:21:42.810\nAnd the server doesn't exist and\nso, that's gonna fail.\n\n422\n00:21:42.810 --> 00:21:46.960\nAnd then it's gonna retry two more\ntimes to contact the server, all right,\n\n423\n00:21:46.960 --> 00:21:49.280\nbefore moving on to the next\nserver in the list.\n\n424\n00:21:49.280 --> 00:21:52.170\nDid I say three times or two?\n\n425\n00:21:52.170 --> 00:21:54.680\nIt's gonna retry two\ntimes before moving on.\n\n426\n00:21:54.680 --> 00:21:57.160\nSo in this case, it couldn't reach,\nconnection timed out and\n\n427\n00:21:57.160 --> 00:21:58.090\nthat's the end of it.\n\n428\n00:21:58.090 --> 00:22:02.270\nAnd I had to wait a little while there so\nI could add a little more to this.\n\n429\n00:22:02.270 --> 00:22:09.180\nAnd if I add for example +time=1, we\nlearned a minute ago that was in seconds.\n\n430\n00:22:09.180 --> 00:22:11.090\nNow it's gonna do one second and\n\n431\n00:22:11.090 --> 00:22:14.656\nif it doesn't get a response back from\nthat server in one second, there it fails.\n\n432\n00:22:14.656 --> 00:22:15.940\nSee, it timed out a lot faster.\n\n433\n00:22:15.940 --> 00:22:19.527\nSo when you're trouble shooting with DiG\nthat can shorten the window of time you're\n\n434\n00:22:19.527 --> 00:22:20.800\nhavint to sit there and wait.\n\n435\n00:22:20.800 --> 00:22:24.160\n&gt;&gt; Does the time affect each one of those\nwhether it's how many times we try, and\n\n436\n00:22:24.160 --> 00:22:25.060\nhow many retries?\n\n437\n00:22:25.060 --> 00:22:27.010\nDoes it apply that to every option there?\n\n438\n00:22:27.010 --> 00:22:28.200\n&gt;&gt; Yeah, it applies to both.\n\n439\n00:22:28.200 --> 00:22:30.980\nEach of the tries and each of the retries.\n\n440\n00:22:30.980 --> 00:22:34.890\nSo if you think about it,\nif you have three DNS servers to find, and\n\n441\n00:22:34.890 --> 00:22:37.970\nyou've got a five second time out,\nand it fails on all of them.\n\n442\n00:22:37.970 --> 00:22:39.880\nAnd it's doing three retries.\n\n443\n00:22:39.880 --> 00:22:41.880\nThree servers, three retries each.\n\n444\n00:22:41.880 --> 00:22:44.060\nThat's nine look ups at five seconds each.\n\n445\n00:22:44.060 --> 00:22:45.940\nShould have picked\nsomething with easier math.\n\n446\n00:22:45.940 --> 00:22:47.140\nThen it's 45 seconds.\n\n447\n00:22:47.140 --> 00:22:50.050\nThat's a long time to sit there and\nwait for that record to fail.\n\n448\n00:22:50.050 --> 00:22:52.810\nAnd that's not something\nan end user would wanna see.\n\n449\n00:22:52.810 --> 00:22:55.760\nSo operating systems normally\nhave that number tuned down.\n\n450\n00:22:55.760 --> 00:22:58.900\nBut when you're trouble shooting with dig\nyou may wanna tune that number down too to\n\n451\n00:22:58.900 --> 00:23:00.150\njust get a faster check.\n\n452\n00:23:00.150 --> 00:23:02.790\nIf you don't get a response back\nfrom that server in under a second,\n\n453\n00:23:02.790 --> 00:23:05.550\neither the server's not available or\nthe server is performing so\n\n454\n00:23:05.550 --> 00:23:09.240\nbadly it doesn't matter if it's available\nyou wouldn't wanna use it, right.\n\n455\n00:23:09.240 --> 00:23:12.580\nDNS look ups over a second\nare just not really reasonable.\n\n456\n00:23:12.580 --> 00:23:15.740\nSo you can shorten that down really easy.\n\n457\n00:23:15.740 --> 00:23:17.370\n&gt;&gt; Very good.\nThat's a lot of great information.\n\n458\n00:23:17.370 --> 00:23:20.040\nI know this Windows user has\nlearned a lot today, and\n\n459\n00:23:20.040 --> 00:23:21.250\nI'm glad I didn't change the channel.\n\n460\n00:23:21.250 --> 00:23:23.260\nBut it does look like we're\ngonna wrap this one up, Don.\n\n461\n00:23:23.260 --> 00:23:25.460\nAny final words that you'd like to\ngive somebody about the Dig and\n\n462\n00:23:25.460 --> 00:23:26.830\nthe power of Dig?\n\n463\n00:23:26.830 --> 00:23:29.060\n&gt;&gt; Yeah,\njust remember that NSLookup is deprecated.\n\n464\n00:23:29.060 --> 00:23:30.340\nSo it's supposed to be going away.\n\n465\n00:23:30.340 --> 00:23:33.370\nIt is still present in almost every\noperating system that I've seen.\n\n466\n00:23:33.370 --> 00:23:36.470\nSo you can keep using\nNSLookup if you want.\n\n467\n00:23:36.470 --> 00:23:38.530\nDig can do everything that nslookup can.\n\n468\n00:23:38.530 --> 00:23:41.530\nSo that there's really no\nreason to stick with nslookup.\n\n469\n00:23:41.530 --> 00:23:43.820\nAnd if you're on Windows,\nremember that you can download dig.\n\n470\n00:23:43.820 --> 00:23:45.860\nIt's part of the BIND distribution.\n\n471\n00:23:45.860 --> 00:23:49.070\nSo it's not just available by itself, but\nyou can go out, find it, download it.\n\n472\n00:23:49.070 --> 00:23:49.700\nInstall it.\n\n473\n00:23:49.700 --> 00:23:52.860\nRuns great, does its job, and\nthat will get you taken care.\n\n474\n00:23:52.860 --> 00:23:54.300\n&gt;&gt; Don, that's a lot of great information.\n\n475\n00:23:54.300 --> 00:23:54.900\nWe appreciate it.\n\n476\n00:23:54.900 --> 00:23:57.200\nWe appreciate you, the viewer, but\nwe're going to wrap this one up.\n\n477\n00:23:57.200 --> 00:24:00.290\nSigning out for ITPro TV,\nI've been your host Wes Bryan.\n\n478\n00:24:00.290 --> 00:24:01.010\n&gt;&gt; And I'm Don Pezet.\n\n479\n00:24:01.010 --> 00:24:03.446\n&gt;&gt; And we'll see you next time.\n\n480\n00:24:03.446 --> 00:24:09.344\n[MUSIC]\n\n481\n00:24:09.344 --> 00:24:12.588\nThank you for watching ITPRO.TV.\n\n",
          "vimeoId": "197957026"
        },
        {
          "description": "In this episode, Wes and Don take a look a a couple of powerful DNS utilities to help keep your DNS infrastructure running efficiently. They explain how to do DNS zone debugging with dnswalk. They will also look at using dnsrecon to analyze and enumerate a DNS zone.",
          "length": "1005",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-1-3-dnswalk_and_dnsrecon-120616-PGM.00_26_40_03.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-1-3-dnswalk_and_dnsrecon-120616-PGM.00_26_40_03.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-1-3-dnswalk_and_dnsrecon-120616-PGM.00_26_40_03.Still001-sm.jpg",
          "title": "dnswalk and dnsrecon",
          "transcript": "WEBVTT\n\n1\n00:00:01.190 --> 00:00:03.280\nWelcome to ITProTV,\nI'm your host [CROSSTALK].\n\n2\n00:00:03.280 --> 00:00:05.323\n&gt;&gt; Live from San Francisco\n\n3\n00:00:05.323 --> 00:00:08.239\n[MUSIC]\n\n4\n00:00:08.239 --> 00:00:11.918\n&gt;&gt; You're watching ITProTV.\n\n5\n00:00:11.918 --> 00:00:15.270\nWelcome to another exciting\nepisode here at ITProTV.\n\n6\n00:00:15.270 --> 00:00:16.604\nI'm your host Wes Bryan and\n\n7\n00:00:16.604 --> 00:00:19.911\nin today's episode, we are continuing\nthrough our series on DNS.\n\n8\n00:00:19.911 --> 00:00:21.409\nThat's right, DNS tech skills.\n\n9\n00:00:21.409 --> 00:00:23.428\nAnd joining me back in\nthe studios today for\n\n10\n00:00:23.428 --> 00:00:25.970\nthis very endeavor is none other than Mr.\nDon Pezet.\n\n11\n00:00:25.970 --> 00:00:26.930\nDon, how you doing, sir?\n\n12\n00:00:26.930 --> 00:00:29.388\n&gt;&gt; I'm doing great, Wes.\nReady to dive right back into DNS, and\n\n13\n00:00:29.388 --> 00:00:33.080\nwe're gonna continue on with our\nlittle adventure in DNS utilities.\n\n14\n00:00:33.080 --> 00:00:34.880\nWe've seen some of the more\ncommon ones that are out there.\n\n15\n00:00:34.880 --> 00:00:38.050\nI wanna cover some of the less common\nones that are out there, and so\n\n16\n00:00:38.050 --> 00:00:41.880\nin this episode we're gonna take\na look at DNSWalk and DNSRecon.\n\n17\n00:00:41.880 --> 00:00:48.110\nTwo tools that have been around awhile but\nare a little less known because, mostly\n\n18\n00:00:48.110 --> 00:00:50.460\ncuz they're not included in the majority\nof distributions that are out there.\n\n19\n00:00:50.460 --> 00:00:55.160\nSo if you have Windows, Mac OS,\npretty much any Linux distro, they're not\n\n20\n00:00:55.160 --> 00:00:58.670\nnormally gonna have DNSRecon and\nDNSWalk, you got to go out and get them.\n\n21\n00:00:58.670 --> 00:01:01.140\nBut there is one place where\nthey come prepackaged,\n\n22\n00:01:01.140 --> 00:01:04.130\na great collection of\nutilities called Kali Linux.\n\n23\n00:01:04.130 --> 00:01:06.630\nKali Linux, or Kali Linux, whatever.\n\n24\n00:01:06.630 --> 00:01:11.550\nKali Linux is a,\nit's really a penetration testing suite.\n\n25\n00:01:11.550 --> 00:01:13.740\nSo if you're a security engineer,\nyou've used it.\n\n26\n00:01:13.740 --> 00:01:16.780\nIt's got tons of software in there that\nlets you examine servers and look for\n\n27\n00:01:16.780 --> 00:01:19.760\nvulnerabilities and\nall sorts of other stuff.\n\n28\n00:01:19.760 --> 00:01:23.090\nWell, as part of that,\nwe've got information gathering.\n\n29\n00:01:23.090 --> 00:01:26.655\nAnd when we do information gathering,\nwe can use that to troubleshoot and\n\n30\n00:01:26.655 --> 00:01:27.467\nlocate issues.\n\n31\n00:01:27.467 --> 00:01:29.488\nThe same goes for DNS.\n\n32\n00:01:29.488 --> 00:01:30.997\nThe inside of Kali Linux,\n\n33\n00:01:30.997 --> 00:01:34.300\nwe've got a number of tools\nthat are focused just on DNS.\n\n34\n00:01:34.300 --> 00:01:36.860\nAnd DNSWalk and DNSRecon are two of those.\n\n35\n00:01:36.860 --> 00:01:39.890\nNow, we don't have to use them as\na hacker to just break into a network.\n\n36\n00:01:39.890 --> 00:01:42.940\nWe can use them ourselves just to gather\ninformation about our systems and\n\n37\n00:01:42.940 --> 00:01:45.400\neven check for errors and so\nthat's what I'm gonna do.\n\n38\n00:01:45.400 --> 00:01:49.510\nNow, before we really get going on these\ntools though, one good thing to do\n\n39\n00:01:49.510 --> 00:01:52.520\nis to set it up so that we'll be\nable to query our entire zone.\n\n40\n00:01:52.520 --> 00:01:57.190\nNow when you query a zone,\nnormally we reach out to a DNS server, and\n\n41\n00:01:57.190 --> 00:01:57.800\nwhat do we do?\n\n42\n00:01:57.800 --> 00:02:01.090\nWe give it a name, and\nit returns an IP, it's very simple.\n\n43\n00:02:01.090 --> 00:02:03.774\nBut if you reach out to a DNS server and\nyou say, hey,\n\n44\n00:02:03.774 --> 00:02:05.858\ncan you give me all the records you have?\n\n45\n00:02:05.858 --> 00:02:07.657\nWhat's the DNS server gonna say?\n\n46\n00:02:07.657 --> 00:02:10.470\nIt's gonna say, no,\nI'm not gonna do that, right?\n\n47\n00:02:10.470 --> 00:02:13.038\nAnd that's because some attackers will\ntry and do that to get all your records,\n\n48\n00:02:13.038 --> 00:02:14.392\ntry and identify servers on the network.\n\n49\n00:02:14.392 --> 00:02:18.360\nIt's not true security,\nit's just security through obscurity.\n\n50\n00:02:18.360 --> 00:02:20.380\nBut if we're gonna be troubleshooting and\n\n51\n00:02:20.380 --> 00:02:22.338\ndiagnosing our network,\nwe need to be able to pull that.\n\n52\n00:02:22.338 --> 00:02:25.210\nSo by pulling all the records from a zone,\n\n53\n00:02:25.210 --> 00:02:28.060\nthat's called a zone transfer and\nwe need to enable that.\n\n54\n00:02:28.060 --> 00:02:30.048\nYou don't always have\nthat enabled by default.\n\n55\n00:02:30.048 --> 00:02:32.600\nIn fact, the majority of time you\ndon't cuz you don't want that\n\n56\n00:02:32.600 --> 00:02:33.840\nenabled by default.\n\n57\n00:02:33.840 --> 00:02:36.548\nSo what I need to do is, I need to get\nmy system set up to be able to do that.\n\n58\n00:02:36.548 --> 00:02:38.147\nIf I try and\nuse some of these tools without it,\n\n59\n00:02:38.147 --> 00:02:40.220\nI'm gonna have a little bit of a problem,\nright?\n\n60\n00:02:40.220 --> 00:02:42.290\nSo the first thing I need to do is,\nhere on my workstation,\n\n61\n00:02:42.290 --> 00:02:46.410\nso I'm booted into Kali Linux, and\nI'm gonna fire up a web browser.\n\n62\n00:02:46.410 --> 00:02:48.800\nAnd I just need to find out\nwhat my IP address is, so\n\n63\n00:02:48.800 --> 00:02:53.570\nI'm gonna go to showmemy.info, and\nit'll tell me what my IP address is.\n\n64\n00:02:53.570 --> 00:02:59.310\nAnd I need to get that address added\nto my zone transfer list, right?\n\n65\n00:02:59.310 --> 00:03:01.667\nAnd my machine's running a little\nslow there, but there we go.\n\n66\n00:03:01.667 --> 00:03:08.198\nSo, my public IP is 209.251.131.98 and\nif I jump over to my DNS server and\n\n67\n00:03:08.198 --> 00:03:14.670\nI take a zone like lab.ITProv.TV,\nit's gonna pull up its properties here.\n\n68\n00:03:14.670 --> 00:03:18.190\nAnd I jump into zone transfers.\n\n69\n00:03:18.190 --> 00:03:20.130\nLook at these default settings.\n\n70\n00:03:20.130 --> 00:03:23.390\nI'll do zone transfers but only to\nservers listed on the name servers tab.\n\n71\n00:03:23.390 --> 00:03:24.162\nIn other words,\n\n72\n00:03:24.162 --> 00:03:27.266\nI'll only allow zone transfers to\nother DNS servers in this zone.\n\n73\n00:03:27.266 --> 00:03:30.650\nAnd that's what we want,\nthat's what makes sense, right?\n\n74\n00:03:30.650 --> 00:03:34.354\nBut I need to add my workstation so\nthat I can reach out and query it too.\n\n75\n00:03:34.354 --> 00:03:38.130\nSo I'm gonna come in and say,\nonly to the following servers.\n\n76\n00:03:38.130 --> 00:03:42.280\nAnd I would need to add in my DNS servers,\nbut I can also go in and\n\n77\n00:03:42.280 --> 00:03:43.286\nadd my workstation.\n\n78\n00:03:43.286 --> 00:03:49.700\nSo, 209.251.131.98, I believe is what\nit was, let me just verify that.\n\n79\n00:03:50.730 --> 00:03:51.280\nAnd it was, okay.\n\n80\n00:03:52.400 --> 00:03:53.229\nSo I've got that added in.\n\n81\n00:03:53.229 --> 00:03:55.938\nIt's gonna try and resolve it, but\nI don't have a reverse lookup zone, so\n\n82\n00:03:55.938 --> 00:03:57.530\nI'm just gonna hit OK on that.\n\n83\n00:03:57.530 --> 00:03:58.190\nAnd there we go.\nSo\n\n84\n00:03:58.190 --> 00:04:00.720\nnow, I'm gonna be allowed to do\na zone transfer on this machine.\n\n85\n00:04:00.720 --> 00:04:05.010\nAnd that's going to enable DNSRecon and\nDNSWalk to work.\n\n86\n00:04:05.010 --> 00:04:07.700\nIf you've got BIND or Unbound or\na different DNS server,\n\n87\n00:04:07.700 --> 00:04:10.852\nyou'll need to do it's steps to enable\na zone transfer for this to work.\n\n88\n00:04:10.852 --> 00:04:15.897\nAl right, but now I can jump back over to\nKali and I can start to use my utilities.\n\n89\n00:04:15.897 --> 00:04:19.402\nNow, Kali Linux already has them\nbaked in so it's easy to go and\n\n90\n00:04:19.402 --> 00:04:23.120\nget an iso image of it, fire it up,\nand run these utilities.\n\n91\n00:04:23.120 --> 00:04:26.031\nBut you can get DNSWalk and\nDNSRecon for your system.\n\n92\n00:04:26.031 --> 00:04:30.535\nSo, for example, if you have Ubuntu or\nDebian, you can do an apt-get dnswalk and\n\n93\n00:04:30.535 --> 00:04:32.116\nit will go in and install it.\n\n94\n00:04:32.116 --> 00:04:35.518\nI'm just using this cuz it's\nalready got it built in.\n\n95\n00:04:35.518 --> 00:04:37.820\nAll right, you can check and\nsee if you've got it.\n\n96\n00:04:37.820 --> 00:04:39.700\nWe'll start with DNSWalk.\n\n97\n00:04:39.700 --> 00:04:44.010\nWhat DNSWalk does, it's a DNS debugger.\n\n98\n00:04:44.010 --> 00:04:45.190\nSo it'll look at your zone.\n\n99\n00:04:45.190 --> 00:04:47.400\nIt'll download your zone file and\nit'll parse through it and\n\n100\n00:04:47.400 --> 00:04:48.510\nit'll look for errors.\n\n101\n00:04:48.510 --> 00:04:51.290\nSo it's a great way to spot\nproblems in your file.\n\n102\n00:04:51.290 --> 00:04:54.180\nAnd if you've got problems in your zone,\nit'll help you identify and\n\n103\n00:04:54.180 --> 00:04:56.480\ntell you what they are so\nyou can go in and and you can fix them.\n\n104\n00:04:56.480 --> 00:04:58.180\nIt does some really neat stuff.\n\n105\n00:04:58.180 --> 00:05:01.508\nIf you're running dnswalk -h,\nit'll give you the help output.\n\n106\n00:05:01.508 --> 00:05:04.680\nWell, normally it'll give you the help\noutput, though in my case it won't.\n\n107\n00:05:04.680 --> 00:05:08.650\nSo, there we go,\nI'll just do a little man dnswalk.\n\n108\n00:05:08.650 --> 00:05:11.120\nWe can pull up the help output here and\n\n109\n00:05:11.120 --> 00:05:13.130\nsee the different options\nthat we can provide.\n\n110\n00:05:13.130 --> 00:05:14.810\nThe default options are probably enough.\n\n111\n00:05:14.810 --> 00:05:19.570\nWe usually just do dnswalk And\nthen provide a domain name to run against.\n\n112\n00:05:19.570 --> 00:05:20.490\nBut you can go in and\n\n113\n00:05:20.490 --> 00:05:24.770\ntell it to do other things like\nrecursively descend subdomains.\n\n114\n00:05:24.770 --> 00:05:26.910\nThat's really useful if\nyou have SRV records.\n\n115\n00:05:26.910 --> 00:05:30.260\nSRV records will always be tucked into\nsubfolders and this will scan through and\n\n116\n00:05:30.260 --> 00:05:31.790\ncheck your SRV records also.\n\n117\n00:05:31.790 --> 00:05:37.260\nYou can tell it to do other things like\nPerform fascist checking, which means,\n\n118\n00:05:37.260 --> 00:05:41.640\nmake sure that every forward\nentry has a reverse entry also.\n\n119\n00:05:41.640 --> 00:05:43.900\nEvery name to an IP also\nhas an IP to a name.\n\n120\n00:05:43.900 --> 00:05:45.600\nIt'll look for reverse look-up entries.\n\n121\n00:05:45.600 --> 00:05:48.520\nWe don't always have that on the internet,\nso that's turned off by default.\n\n122\n00:05:48.520 --> 00:05:51.780\nYou can tell it to suppress checking for\ninvalid characters.\n\n123\n00:05:51.780 --> 00:05:55.883\nThis is kind of important because they've\nloosened the rules on DNS recently, so\n\n124\n00:05:55.883 --> 00:05:58.261\nthat you can have foreign or\nUTFA characters and\n\n125\n00:05:58.261 --> 00:06:00.772\ninternational characters\nin your domain names.\n\n126\n00:06:00.772 --> 00:06:03.802\nAnd so, if you are using those,\nthat can cause problems.\n\n127\n00:06:03.802 --> 00:06:05.885\nIf you're in an English\nspeaking country or\n\n128\n00:06:05.885 --> 00:06:10.060\nyou're just using the regular character\nset then we can leave that turned on.\n\n129\n00:06:10.060 --> 00:06:13.730\nYou can also look for\nlame delegations, lame delegations.\n\n130\n00:06:13.730 --> 00:06:17.776\nThat's where I have a delegation entered\nwhere I'm pointing to another server and\n\n131\n00:06:17.776 --> 00:06:20.334\nthat server doesn't exist or\nit doesn't respond.\n\n132\n00:06:20.334 --> 00:06:25.020\nIt'll actually check to make sure that any\nkind of delegation actually does work.\n\n133\n00:06:25.020 --> 00:06:28.620\nSo it's gonna scan to my zone and\nlook for errors.\n\n134\n00:06:28.620 --> 00:06:30.351\nAnd in order for it to work,\nit's gotta be able to pull the zone.\n\n135\n00:06:30.351 --> 00:06:32.241\nSo that's why I had to do\nthe zone transfer entry at\n\n136\n00:06:32.241 --> 00:06:33.279\nthe beginning of the show.\n\n137\n00:06:33.279 --> 00:06:37.455\nThen, once I've got that set up,\nI can do a DNSWalk, and\n\n138\n00:06:37.455 --> 00:06:40.680\nI can specify who it is\nI wanna walk against.\n\n139\n00:06:40.680 --> 00:06:42.454\nActually, there's one more\nthing I need to pull from here.\n\n140\n00:06:42.454 --> 00:06:47.040\nWhen you see all the stuff here that we're\nspecifying, the zone transfer and so\n\n141\n00:06:47.040 --> 00:06:50.338\non, I need to override\nthe server that I'm pointing to.\n\n142\n00:06:50.338 --> 00:06:53.277\nAnd so I'll need to specify that in\nthe command line in order to do it.\n\n143\n00:06:53.277 --> 00:06:57.290\nAnd they've got a command line option\nburied in here, after I get past it.\n\n144\n00:06:57.290 --> 00:06:59.960\nActually, all this stuff I am scrolling\npast, let me talk about this real quick.\n\n145\n00:07:01.010 --> 00:07:06.569\nWay up here, it's got all the different\nerrors that can come back.\n\n146\n00:07:06.569 --> 00:07:11.203\nAnd so it is just highlighting\nunknown hosts, a record not found,\n\n147\n00:07:11.203 --> 00:07:16.360\nCNAME to Z, it's looking for all these\nentries that it can respond back.\n\n148\n00:07:16.360 --> 00:07:19.410\nAnd just kind of giving you, kind of an\nidea of what it does, how it checks, and\n\n149\n00:07:19.410 --> 00:07:20.480\nwhat it looks for.\n\n150\n00:07:20.480 --> 00:07:24.280\nSo great way to kind of punch through and\nspecify and find that information.\n\n151\n00:07:25.650 --> 00:07:30.250\nNow, in my case, I need to be doing this\nlook up against my own DNS server which is\n\n152\n00:07:30.250 --> 00:07:31.310\nout there in the Cloud.\n\n153\n00:07:31.310 --> 00:07:33.790\nSo I need to make sure that\nmy system is using it.\n\n154\n00:07:33.790 --> 00:07:36.890\nSo I'm gonna go into my\nnetwork settings here.\n\n155\n00:07:37.940 --> 00:07:40.650\nAnd I'm gonna override my DNS server.\n\n156\n00:07:40.650 --> 00:07:43.760\nRight now, I'm set to use Google's DNS\nservers and that's not what I want.\n\n157\n00:07:43.760 --> 00:07:46.290\nSo I need to get in here and\nkinda fix that.\n\n158\n00:07:46.290 --> 00:07:47.470\nI'm set to Automatic.\n\n159\n00:07:47.470 --> 00:07:50.770\nSo I'm gonna turn Automatic off and\nspecify my server.\n\n160\n00:07:50.770 --> 00:07:53.944\nSo my server IP is something weird,\nwhich I've got written down here.\n\n161\n00:07:53.944 --> 00:07:57.159\nIt's 38., something creative.\n\n162\n00:07:57.159 --> 00:08:03.268\nSo it is, I was close, 34,\nI'm glad I didn't guess it,\n\n163\n00:08:03.268 --> 00:08:08.490\n.193.248.100, that's my DNS server.\n\n164\n00:08:08.490 --> 00:08:12.479\nSo I'm gonna set that up so that that's\nwhat I'm doing my lookups against.\n\n165\n00:08:12.479 --> 00:08:14.915\nAnd we'll give that a second.\n\n166\n00:08:14.915 --> 00:08:19.652\nThat should have kicked in already but\ndidn't.\n\n167\n00:08:19.652 --> 00:08:20.848\nWe'll give that just a moment.\n\n168\n00:08:20.848 --> 00:08:23.680\nLet me, I'm gonna turn my wired\nconnection off and turn it back on again.\n\n169\n00:08:23.680 --> 00:08:26.955\nGive that just a moment\nwhile it resets itself.\n\n170\n00:08:26.955 --> 00:08:32.900\nAnd I wanna make sure that I'm doing\nlookups against the right server.\n\n171\n00:08:32.900 --> 00:08:34.040\nThere's a good way to make a mistake.\n\n172\n00:08:34.040 --> 00:08:37.120\nIf this were just a publicly hosted zone,\nI could just run right off against it.\n\n173\n00:08:37.120 --> 00:08:38.440\nBut I've got mine private right now, so\n\n174\n00:08:38.440 --> 00:08:40.702\nI gotta make sure I'm\nlooking at the right server.\n\n175\n00:08:40.702 --> 00:08:45.260\nAnd DNSWalk is just gonna use whatever\nI am set to look for by default so\n\n176\n00:08:45.260 --> 00:08:47.430\nthat's why I'm trying to\nget that set real quick.\n\n177\n00:08:47.430 --> 00:08:51.055\nAnd then once I've got it, then I'll\nbe able to go in and override it.\n\n178\n00:08:51.055 --> 00:08:53.086\nAnd so, there we go.\nNow I can see that my DNS server is set\n\n179\n00:08:53.086 --> 00:08:53.695\ncorrectly.\n\n180\n00:08:53.695 --> 00:08:56.113\nAll right, so let's jump in here and\nfire this thing back up.\n\n181\n00:08:56.113 --> 00:08:58.234\nI'm gonna do dnswalk lab.itpro.tv and\n\n182\n00:08:58.234 --> 00:09:02.450\nI'm gonna throw that little dot right\nthere on the end as we know we need.\n\n183\n00:09:02.450 --> 00:09:04.183\nAnd when I run that, it's gonna reach out.\n\n184\n00:09:04.183 --> 00:09:09.072\nAnd right off the bat, I get checking\nlab.itpro.tv, that's kinda what I wanted.\n\n185\n00:09:09.072 --> 00:09:12.150\nAnd then I get BAD,\nthere's a problem, right?\n\n186\n00:09:12.150 --> 00:09:16.213\nLab.itpro.tv has only one\nauthoritative name server.\n\n187\n00:09:16.213 --> 00:09:18.407\nWell, all right, so I got an issue here.\n\n188\n00:09:18.407 --> 00:09:20.347\nI only have one authoritative name server.\n\n189\n00:09:20.347 --> 00:09:24.178\nIf I were to go and look at my\nDNS records over here, I can see,\n\n190\n00:09:24.178 --> 00:09:28.100\nsure enough, under name server,\nI've only got one.\n\n191\n00:09:28.100 --> 00:09:30.571\nFor redundancy,\nI should have at least two.\n\n192\n00:09:30.571 --> 00:09:31.600\nThat's a problem, right?\n\n193\n00:09:31.600 --> 00:09:33.370\nSo DNSWalk spotted that.\n\n194\n00:09:33.370 --> 00:09:35.670\nIt's also going on to\ndo the zone transfer.\n\n195\n00:09:35.670 --> 00:09:38.770\nSo it found that even before\ndoing the zone transfer, right?\n\n196\n00:09:38.770 --> 00:09:41.600\nSo then it does the zone transfer and\nnow it's finding other issues.\n\n197\n00:09:41.600 --> 00:09:44.510\nHere's my SOA data, and\nthen I got three warnings.\n\n198\n00:09:44.510 --> 00:09:45.770\nThat's not too bad, right?\n\n199\n00:09:45.770 --> 00:09:47.904\nIt's not gonna list all\nthe good stuff that happens.\n\n200\n00:09:47.904 --> 00:09:49.407\nSo, I might have done great things but\nhere,\n\n201\n00:09:49.407 --> 00:09:51.160\nI just see everything I've done wrong.\n\n202\n00:09:51.160 --> 00:09:54.919\nThe first thing\nfiles.lab,itpro.tv is a CNAME and\n\n203\n00:09:54.919 --> 00:10:00.776\nit's pointing to fileserver01.lab.itpro.tv\nand that's an unknown host.\n\n204\n00:10:00.776 --> 00:10:05.687\nI've got a CNAME pointing to\nsomebody that doesn't exist, right?\n\n205\n00:10:05.687 --> 00:10:09.120\nSo that CNAME either needs to go away or\nI need create whoever is missing.\n\n206\n00:10:09.120 --> 00:10:15.755\nMy next two warnings are www.lab.itpro.tv\nwith an IP and no PTR record.\n\n207\n00:10:15.755 --> 00:10:17.880\nNow, that may or may not be a problem.\n\n208\n00:10:17.880 --> 00:10:21.130\nThat's why this is a warning\ninstead of a bad because,\n\n209\n00:10:21.130 --> 00:10:24.710\njust because I don't have a reverse\nlookup record doesn't mean it's an issue.\n\n210\n00:10:24.710 --> 00:10:26.910\nEmail servers, it's usually a big deal,\neverything else,\n\n211\n00:10:26.910 --> 00:10:27.990\nwe usually don't worry about it.\n\n212\n00:10:27.990 --> 00:10:30.590\nBut these two guys are missing\ntheir PTR records.\n\n213\n00:10:30.590 --> 00:10:32.620\nSo I got three warnings, one error.\n\n214\n00:10:32.620 --> 00:10:35.900\nDNSWalk scanned through my zone and\nthat's all it found.\n\n215\n00:10:35.900 --> 00:10:38.640\nNow if you have a massive zone\nfile with thousands of entries,\n\n216\n00:10:38.640 --> 00:10:41.370\nthis is a heck of a lot easier than going\nthrough line by line and looking for\n\n217\n00:10:41.370 --> 00:10:42.590\nthese types of mistakes.\n\n218\n00:10:42.590 --> 00:10:44.780\nThat's what DNSWalk is all about.\n\n219\n00:10:44.780 --> 00:10:48.080\nAnd we can tweak it's settings with\nthe extensions we saw a moment ago,\n\n220\n00:10:48.080 --> 00:10:51.300\nthe command line arguments, to get\nit to look for additional things and\n\n221\n00:10:51.300 --> 00:10:53.665\nmake it more strict or\nless strict to meet our needs.\n\n222\n00:10:53.665 --> 00:10:55.183\nDNSWalk's a pretty cool utility.\n\n223\n00:10:55.183 --> 00:10:57.873\nIt does make it a lot easier to scan for\nthese errors.\n\n224\n00:10:57.873 --> 00:11:04.205\nAll right now, along the same lines,\nis the DNSRecon utility.\n\n225\n00:11:04.205 --> 00:11:08.415\nDNSRecon will scan through your DNS and\ntry and\n\n226\n00:11:08.415 --> 00:11:10.805\nfind as much information as it can.\n\n227\n00:11:10.805 --> 00:11:14.730\nIf you have the ability to do a zone\ntransfer, it'll get a lot of data.\n\n228\n00:11:14.730 --> 00:11:16.270\nIf you don't, it'll get less.\n\n229\n00:11:16.270 --> 00:11:20.296\nBut, it's a Recon tool, so it's still\ngonna try and get as much as it can out of\n\n230\n00:11:20.296 --> 00:11:24.217\nyour domain even if you don't provide\nit with the additional information.\n\n231\n00:11:24.217 --> 00:11:27.656\nNow DNSRecon has several different\nmodes that it runs in and\n\n232\n00:11:27.656 --> 00:11:31.580\nthey're listed somewhere\nhere in the documentation.\n\n233\n00:11:31.580 --> 00:11:34.610\nMy word wrap is really\nmaking this look terrible.\n\n234\n00:11:34.610 --> 00:11:37.570\nLet me stretch this out so\nyou can see the different modes.\n\n235\n00:11:37.570 --> 00:11:39.891\nSo, these are the modes right here, that.\n\n236\n00:11:39.891 --> 00:11:44.440\n[LAUGH] The standard mode is\nwhat we're running by default.\n\n237\n00:11:44.440 --> 00:11:48.976\nAnd it's gonna look for Start Of\nAuthority, Name Server, A, AAAA, MX, SRV,\n\n238\n00:11:48.976 --> 00:11:51.600\nand AXRF, which are our four transfers.\n\n239\n00:11:51.600 --> 00:11:54.580\nIt's gonna look for\nall that stuff to report back to me, and\n\n240\n00:11:54.580 --> 00:11:56.790\nget me all the information it can.\n\n241\n00:11:56.790 --> 00:11:59.534\nBut we can change it to do\nreverse lookups, if we want.\n\n242\n00:11:59.534 --> 00:12:02.874\nIf we wanted to brute force,\nyou could provide a dictionary of terms so\n\n243\n00:12:02.874 --> 00:12:04.585\nit can look to see if servers exist.\n\n244\n00:12:04.585 --> 00:12:08.057\nYou can look just for SRV records,\nif that's all I wanna find.\n\n245\n00:12:08.057 --> 00:12:10.936\nAXFR, if we've got\na separate zone transfer.\n\n246\n00:12:10.936 --> 00:12:13.962\nIt's a great way to spot if you got DNS\nservers on your network where you left\n\n247\n00:12:13.962 --> 00:12:16.430\nzone transfers turned on and\nyou meant to have it turned off.\n\n248\n00:12:17.520 --> 00:12:19.030\nGOO, that's Google.\n\n249\n00:12:19.030 --> 00:12:21.500\nIt'll actually do a Google search,\nit'll pop up a window and\n\n250\n00:12:21.500 --> 00:12:23.700\ndo a Google search on\nevery name that it finds.\n\n251\n00:12:23.700 --> 00:12:26.490\nYou don't want to do that on a big zone,\nthat's bad news.\n\n252\n00:12:26.490 --> 00:12:28.720\nYou can do cache snooping\nwhere you try and\n\n253\n00:12:28.720 --> 00:12:32.940\nfind out what's in the cache\non the server and TLDs can\n\n254\n00:12:32.940 --> 00:12:36.550\nlet us exclude certain top level domains\nif we don't want to query all that.\n\n255\n00:12:36.550 --> 00:12:39.160\nSo these are all different\nlittle tweaks that we can do.\n\n256\n00:12:39.160 --> 00:12:40.418\nI left off one, zonewalk.\n\n257\n00:12:40.418 --> 00:12:44.419\nIf you're troubleshooting DNSSEC,\nthe secure DNS zonewalk will actually go\n\n258\n00:12:44.419 --> 00:12:48.177\nthrough and follow the DNSSEC entries\nto make sure they're all intact and\n\n259\n00:12:48.177 --> 00:12:51.290\nshow you what servers\nare involved in that.\n\n260\n00:12:51.290 --> 00:12:54.960\nSo, those are all functions\ninside of DNSRecon.\n\n261\n00:12:54.960 --> 00:12:57.070\nAnd if you wanna use it,\nthe easiest way is just say,\n\n262\n00:12:57.070 --> 00:13:01.460\ndnsrecon -d and\nthe domain that you want to scan.\n\n263\n00:13:01.460 --> 00:13:06.516\nSo, I'm gonna do lab.itpro.tv.\n\n264\n00:13:06.516 --> 00:13:08.245\nAnd I'm gonna run a scan on it.\n\n265\n00:13:08.245 --> 00:13:11.313\nNow, if I wanted, I could go through and\nchange the mode that it's running in but\n\n266\n00:13:11.313 --> 00:13:12.770\nI'll just run it in the default mode.\n\n267\n00:13:12.770 --> 00:13:15.280\nAnd when it runs, it's gonna reach out.\n\n268\n00:13:15.280 --> 00:13:18.140\nI don't have DNSSEC on my domain,\nhaven't configured it yet.\n\n269\n00:13:18.140 --> 00:13:20.820\nBut it found my SOA and my name server.\n\n270\n00:13:20.820 --> 00:13:23.150\nIt could not resolve any MX Records.\n\n271\n00:13:23.150 --> 00:13:23.820\nI don't have any.\n\n272\n00:13:23.820 --> 00:13:25.584\nWell, I don't think I have any, let's see.\n\n273\n00:13:25.584 --> 00:13:27.910\nNope, no MX Records.\n\n274\n00:13:27.910 --> 00:13:29.750\nSo that's probably why we got that one.\n\n275\n00:13:29.750 --> 00:13:30.830\nBut I wasn't able to find that.\n\n276\n00:13:30.830 --> 00:13:34.770\nAnd then enumerating SRV Records,\nthey didn't find all my SRV records but\n\n277\n00:13:34.770 --> 00:13:35.900\nit did find some.\n\n278\n00:13:35.900 --> 00:13:38.470\nIt found the sip values that I created.\n\n279\n00:13:38.470 --> 00:13:40.370\nAnd so it's turning those up and\nshowing them here.\n\n280\n00:13:40.370 --> 00:13:44.840\nIt's parsing through and\nshowing me everything that it could find.\n\n281\n00:13:44.840 --> 00:13:48.210\nNow it didn't necessarily do every check\nin the book to find things out, but\n\n282\n00:13:48.210 --> 00:13:51.920\nit did the standard ones and I can go\nthrough and manipulate it if I needed to.\n\n283\n00:13:51.920 --> 00:13:55.140\nAnother great way to scan across your\nservers and just kinda see what's what,\n\n284\n00:13:55.140 --> 00:14:00.290\nsee if your exposing information or not.\n\n285\n00:14:00.290 --> 00:14:03.450\nIf I were to take an actual public domain,\nso\n\n286\n00:14:03.450 --> 00:14:06.640\nmaybe itpro.tv itself,\nwhich we host with Amazon.\n\n287\n00:14:06.640 --> 00:14:11.213\nIf I were to point against that one and\nrun it, well it's not going to allow zone\n\n288\n00:14:11.213 --> 00:14:14.632\ntransfers so it's going to\nhave a much more limited view.\n\n289\n00:14:14.632 --> 00:14:19.307\nBut, it's gonna reach and it's gonna find\nthose name servers, which are Amazon's,\n\n290\n00:14:19.307 --> 00:14:22.860\nand it's gonna come out and\nshow me any bit of data that it can find.\n\n291\n00:14:22.860 --> 00:14:25.425\nSo it's finding IPv6 servers and IPv4.\n\n292\n00:14:25.425 --> 00:14:29.300\nIt found our MX Records and\nso it's gonna lay those out.\n\n293\n00:14:29.300 --> 00:14:32.870\nIt found a TXT record for SPF,\nthat's our sender policy framework.\n\n294\n00:14:32.870 --> 00:14:36.580\nAnd now it's trying to enumerate our\nSRV records, it didn't find any.\n\n295\n00:14:36.580 --> 00:14:40.360\nNow, I know for\na fact we have two for our Skype for\n\n296\n00:14:40.360 --> 00:14:43.880\nBusiness server but it wasn't able\nto find those and it returns it.\n\n297\n00:14:43.880 --> 00:14:47.450\nThis is all publicly available\ninformation that it was able to scrape\n\n298\n00:14:47.450 --> 00:14:49.660\nwithout doing a zone transfer, right?\n\n299\n00:14:49.660 --> 00:14:52.500\nIf zone transfers were enabled,\nit would be able to get even more.\n\n300\n00:14:52.500 --> 00:14:56.280\nBut it was able to find things\nincluding the A record for itpro.tv and\n\n301\n00:14:56.280 --> 00:15:00.040\na couple of other well knowns that it\nwill look for in the background too.\n\n302\n00:15:00.040 --> 00:15:03.589\nDNSWalk, same thing,\nI could have pointed DNSWalk at itpro.tv.\n\n303\n00:15:03.589 --> 00:15:09.485\nAnd if we do that, see how the zone\ntransfers are all disabled?\n\n304\n00:15:09.485 --> 00:15:10.670\nIt wasn't able to do a zone transfer.\n\n305\n00:15:10.670 --> 00:15:13.341\nAnd so\nit tried to get other information, but\n\n306\n00:15:13.341 --> 00:15:16.574\neverything else it was able\nto see checked out okay so,\n\n307\n00:15:16.574 --> 00:15:21.035\nthere weren't anything to report other\nthan the errors of querying at it.\n\n308\n00:15:21.035 --> 00:15:23.430\nSo, that's all we got back on this one.\n\n309\n00:15:23.430 --> 00:15:25.178\nSo both cool utilities.\n\n310\n00:15:25.178 --> 00:15:26.232\nIf you wanna run them,\n\n311\n00:15:26.232 --> 00:15:29.117\nthe easiest way to run them is just\nto fire up Kali Linux in a VM,\n\n312\n00:15:29.117 --> 00:15:33.560\nbecause they've got DNSRecon and DNSWalk\nalready installed, already ready to go.\n\n313\n00:15:33.560 --> 00:15:36.800\nBut if you've got a Linux box or\nMac OS, you can install them,\n\n314\n00:15:36.800 --> 00:15:38.360\nthey just aren't installed by default.\n\n315\n00:15:38.360 --> 00:15:41.290\nJust quick ways to check your zone and\nlook for errors.\n\n316\n00:15:41.290 --> 00:15:43.310\n&gt;&gt; Don, great information,\ngreat utilities there.\n\n317\n00:15:43.310 --> 00:15:46.750\nDoes look like we're coming to the end of\nanother episode but before we sign out,\n\n318\n00:15:46.750 --> 00:15:51.158\nDon, do you got any additional pieces\nof advice about our two utilities here,\n\n319\n00:15:51.158 --> 00:15:52.860\nDNSWalk and DNSRecon?\n\n320\n00:15:52.860 --> 00:15:55.080\n&gt;&gt; Number one thing is, if you want\nDNSWalk to really be effective,\n\n321\n00:15:55.080 --> 00:15:57.690\nyou need to turn on zone transfers.\n\n322\n00:15:57.690 --> 00:16:00.240\nThe temptation is there to just\nopen up zone transfers to anybody.\n\n323\n00:16:00.240 --> 00:16:02.590\nIf you do that, make sure you turn it off.\n\n324\n00:16:02.590 --> 00:16:05.630\nYou gotta turn off that zone transfer\nstuff afterwards when you're done,\n\n325\n00:16:05.630 --> 00:16:07.610\notherwise you're leaving\nyourself vulnerable.\n\n326\n00:16:07.610 --> 00:16:10.870\nI prefer to just add my individual IP but\n\n327\n00:16:10.870 --> 00:16:13.350\nthe IP that I had to add was\nthe NAT'd IP for the building.\n\n328\n00:16:13.350 --> 00:16:16.300\nSo technically everybody in this building\ncan do a zone transfer off of that zone\n\n329\n00:16:16.300 --> 00:16:17.860\nright now I don't wanna leave that there.\n\n330\n00:16:17.860 --> 00:16:21.210\nSo be careful, don't leave your\nservers open to zone transfers,\n\n331\n00:16:21.210 --> 00:16:22.580\nmake sure you turn that\noff when you're done.\n\n332\n00:16:22.580 --> 00:16:23.560\n&gt;&gt; Words of wisdom.\n\n333\n00:16:23.560 --> 00:16:25.570\nLock down those zone files, that's right.\n\n334\n00:16:25.570 --> 00:16:28.060\nSo we're gonna go ahead and\nsign out here for ITProTV.\n\n335\n00:16:28.060 --> 00:16:30.210\nI've been your host, Wes Bryan.\n\n336\n00:16:30.210 --> 00:16:31.250\n&gt;&gt; And I'm Don Pezet.\n\n337\n00:16:31.250 --> 00:16:32.481\n&gt;&gt; And we'll see you next time.\n\n338\n00:16:32.481 --> 00:16:39.843\n[MUSIC]\n\n339\n00:16:39.843 --> 00:16:42.604\nThank you for watching ITProTV.\n\n",
          "vimeoId": "195966307"
        }
      ],
      "title": "DNS Utilities"
    },
    {
      "episodes": [
        {
          "description": "In this episode, Wes and Don take a look at DNS the various records that are created and stored on the server. They explain records like host A and AAAA records, CNAME and PTR records",
          "length": "1997",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-2-1-host_records-120616-PGM.00_33_03_22.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-2-1-host_records-120616-PGM.00_33_03_22.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-2-1-host_records-120616-PGM.00_33_03_22.Still001-sm.jpg",
          "title": "Host Records",
          "transcript": "WEBVTT\n\n1\n00:00:00.180 --> 00:00:03.910\nWell come back to ITPRO.TV [CROSSTALK]\n\n2\n00:00:03.910 --> 00:00:07.988\n[MUSIC]\n\n3\n00:00:07.988 --> 00:00:12.070\nYou are watching ITPRO.TV.\n\n4\n00:00:12.070 --> 00:00:16.055\nWelcome to another exciting episode here,\nright, ITProTV, I'm your host Wes Bryan.\n\n5\n00:00:16.055 --> 00:00:19.315\nAnd in today's episode we're continuing\nthrough a series on one of the most\n\n6\n00:00:19.315 --> 00:00:23.345\nimportant services out there on\nthe backbone of the internet, that is DNS.\n\n7\n00:00:23.345 --> 00:00:27.315\nAnd joining us in the studios today for\nthis subject is Mr. Don Pezet.\n\n8\n00:00:27.315 --> 00:00:28.390\nDon, how you doing, sir?\n\n9\n00:00:28.390 --> 00:00:29.230\nI'm doing great, Wes.\n\n10\n00:00:29.230 --> 00:00:31.783\nReady to dive right back into DNS and\nin this episode,\n\n11\n00:00:31.783 --> 00:00:34.640\nwe're going to be talking about\nhost records inside a DNS.\n\n12\n00:00:34.640 --> 00:00:38.364\nThis is kind of the bread and\nbutter of the way DNS functions.\n\n13\n00:00:38.364 --> 00:00:42.280\nSo these are the critical components\nthat make up that basic functionality.\n\n14\n00:00:42.280 --> 00:00:46.103\nAnd there's several different kinds and we\nneed to understand which ones are used for\n\n15\n00:00:46.103 --> 00:00:47.282\nwhich purposes and so on.\n\n16\n00:00:47.282 --> 00:00:50.199\nThat's what we're going to run\nthrough right here in this episode and\n\n17\n00:00:50.199 --> 00:00:52.780\nI'm gonna kick things off with\nthe most basic of host record.\n\n18\n00:00:52.780 --> 00:00:54.240\nIt's called an A Record.\n\n19\n00:00:54.240 --> 00:00:57.040\nAn A Record stands for an Address Record.\n\n20\n00:00:57.040 --> 00:01:00.800\nAnd as the name would imply,\nwell, we store an address there.\n\n21\n00:01:00.800 --> 00:01:03.330\nSo, [LAUGH] Not a great transition for\nthat one.\n\n22\n00:01:03.330 --> 00:01:07.930\nBut anyhow, the point being that in DNS\nwe normally expect it to take a name and\n\n23\n00:01:07.930 --> 00:01:09.650\nconvert it to an IP address, right?\n\n24\n00:01:09.650 --> 00:01:11.210\nThat's what we expect.\n\n25\n00:01:11.210 --> 00:01:13.160\nAnd that's exactly what an A record does,\n\n26\n00:01:13.160 --> 00:01:15.750\nso their functionality is\npretty straight forward.\n\n27\n00:01:15.750 --> 00:01:17.260\nNow, let me show you how it works.\n\n28\n00:01:17.260 --> 00:01:19.960\nSo I've got a DNS server\npulled up here and\n\n29\n00:01:19.960 --> 00:01:23.930\nI'm using a Microsoft DNS server cuz it's\ngot a nice little GUI, but it's actually\n\n30\n00:01:23.930 --> 00:01:27.790\nthe same kind of process on I'll show\nyou the text based way here in a minute.\n\n31\n00:01:27.790 --> 00:01:32.060\nBut basically when we jump\ninto a forward look up zone,\n\n32\n00:01:32.060 --> 00:01:33.980\nthat's where we create A records.\n\n33\n00:01:33.980 --> 00:01:36.510\nRemember four lookup zones are name to IP.\n\n34\n00:01:36.510 --> 00:01:40.840\nWe also have reverse lookup zones which\nare IP to a name, the other way around.\n\n35\n00:01:40.840 --> 00:01:41.860\nThose don't use A records,\n\n36\n00:01:41.860 --> 00:01:44.230\nthey use something different\nwe'll talk about later.\n\n37\n00:01:44.230 --> 00:01:48.030\nBut under a forward lookup zone, you\ngenerally have a collection of records and\n\n38\n00:01:48.030 --> 00:01:51.080\nthe most important records\nare gonna be those A records.\n\n39\n00:01:51.080 --> 00:01:54.210\nThat's what's really doing the general\nwork that we expect to have.\n\n40\n00:01:54.210 --> 00:01:55.720\nYou see I've already got an A record here.\n\n41\n00:01:55.720 --> 00:01:57.820\nMy server is called dns2.\n\n42\n00:01:57.820 --> 00:01:59.820\nAnd I've got a record.\n\n43\n00:01:59.820 --> 00:02:07.197\nA host or A record that's\nmapping dns2 to 172.31.47.0.\n\n44\n00:02:07.197 --> 00:02:11.069\nNow, when we look at that IP address,\nit's mapped to a name.\n\n45\n00:02:11.069 --> 00:02:12.736\nAnd it's a single name, dns2.\n\n46\n00:02:12.736 --> 00:02:18.810\nAlright, well, it then attaches\nthe domain name from the zone.\n\n47\n00:02:18.810 --> 00:02:23.130\nSo it's actually dns2.lab.itpro.tv.\n\n48\n00:02:23.130 --> 00:02:27.591\nSo a really common example of this might\nbe to create a A record for a web server,\n\n49\n00:02:27.591 --> 00:02:28.480\nalright?\n\n50\n00:02:28.480 --> 00:02:32.630\nNow my web server might have\na name like Web Server01.\n\n51\n00:02:32.630 --> 00:02:35.630\nSo I come in and\nI create an A record for Web Server01.\n\n52\n00:02:35.630 --> 00:02:38.552\nI'm just gonna go over\nhere to lab.itpro.tv and\n\n53\n00:02:38.552 --> 00:02:41.180\nI'll create a new host record.\n\n54\n00:02:41.180 --> 00:02:44.074\nAnd when I go to create it,\nI can give it a name.\n\n55\n00:02:44.074 --> 00:02:49.430\nAnd that name, notice how it\nsays use parent domain if blank.\n\n56\n00:02:49.430 --> 00:02:51.960\nNow, there is a very trendy\nthing going on right now.\n\n57\n00:02:51.960 --> 00:02:55.820\nIn the early days of the Internet, if you\nhad a web server, what was it called, www.\n\n58\n00:02:55.820 --> 00:02:57.870\nAnd your domain.\n\n59\n00:02:57.870 --> 00:02:59.940\nIf you had a file server it was ftp.\n\n60\n00:02:59.940 --> 00:03:01.750\nwhatever.\nIf you had Gopher or Archie,\n\n61\n00:03:01.750 --> 00:03:03.900\nall these different things,\nit was the service.\n\n62\n00:03:03.900 --> 00:03:04.880\nwhatever.\n\n63\n00:03:04.880 --> 00:03:07.630\nWell, most of those other\nservices have died off and\n\n64\n00:03:07.630 --> 00:03:11.230\nall that's really left is HTTP, HTTPS.\n\n65\n00:03:11.230 --> 00:03:14.874\nMost people browse, with a web browser,\nthat's what they use.\n\n66\n00:03:14.874 --> 00:03:18.097\nNow there's still other protocol's out\nthere, dont let me mislead you on that,\n\n67\n00:03:18.097 --> 00:03:19.570\nbut web is the most common.\n\n68\n00:03:19.570 --> 00:03:22.134\nSo a lot of people started\nleaving the www off.\n\n69\n00:03:22.134 --> 00:03:25.222\nSo for example if you come to our website,\n\n70\n00:03:25.222 --> 00:03:30.170\nyou dont go to www.itpro.tv,\nyou go to itpro.tv, right?\n\n71\n00:03:30.170 --> 00:03:35.710\nSo its the parent domain name not\nan individual host name in that scenario.\n\n72\n00:03:35.710 --> 00:03:38.630\nMy Forward Lookup Zone is lab.itpro.tv.\n\n73\n00:03:38.630 --> 00:03:42.420\nIf I want somebody to go to lab.itpro.tv\nI would leave this blank and\n\n74\n00:03:42.420 --> 00:03:44.710\nprovide the IP that it resolves to.\n\n75\n00:03:44.710 --> 00:03:45.985\nBut in my Scenario that's not what I want.\n\n76\n00:03:45.985 --> 00:03:48.359\nI've got a web server so\nI'm going to save, all right?\n\n77\n00:03:48.359 --> 00:03:51.319\nSo I'm just gonna type\nin here webserver01.\n\n78\n00:03:51.319 --> 00:03:55.338\nNow notice as I'm typing this in\nit's populating that name here,\n\n79\n00:03:55.338 --> 00:03:58.205\nI've got webserver01.lab.itpro.tv.\n\n80\n00:03:58.205 --> 00:04:03.534\nI didn't type lab.itpro.tv, it assumes\nthat because I'm in that zone, if I'm in\n\n81\n00:04:03.534 --> 00:04:08.953\nthe lab.itpro.tv zone, I must be creating\na host inside of it that just makes sense.\n\n82\n00:04:08.953 --> 00:04:10.141\nAnd so that's why it's popping out there.\n\n83\n00:04:10.141 --> 00:04:15.159\nNow there is also another note here that\nmight draw your attention which says,\n\n84\n00:04:15.159 --> 00:04:19.645\nuse as parent domain name if blank,\nwhen will I leave that name blank,\n\n85\n00:04:19.645 --> 00:04:21.970\nthat's crazy talk, right?\n\n86\n00:04:21.970 --> 00:04:24.466\nWell, there's actually a trending thing\ngoing on right now, I say right now.\n\n87\n00:04:24.466 --> 00:04:29.590\nIt's been in the last several years where\ncompanies like our own, like IT Pro TV.\n\n88\n00:04:29.590 --> 00:04:33.708\nWe know that when people browse the\ninternet that they're using web browsers.\n\n89\n00:04:33.708 --> 00:04:35.754\nAlmost everything is done\nwith a we browser today.\n\n90\n00:04:35.754 --> 00:04:40.420\nSo typing www.itpro.tv\nis kind of redundant.\n\n91\n00:04:40.420 --> 00:04:45.590\nWe know people are using the web, so\nwe have people just type in itprotv.tv.\n\n92\n00:04:45.590 --> 00:04:49.870\nSo if I want itpro.tv to point to my\nweb server, I would leave this blank,\n\n93\n00:04:49.870 --> 00:04:51.900\nand it would map to the domain name.\n\n94\n00:04:51.900 --> 00:04:53.770\nIn this case, it's lab.itpro.tv.\n\n95\n00:04:53.770 --> 00:04:59.450\nSo if I left that blank, and I come in and\nI punch in an IP address for that, right?\n\n96\n00:04:59.450 --> 00:05:03.740\nI can punch that IP in, and I can hit\nAdd Host and by leaving it blank,\n\n97\n00:05:03.740 --> 00:05:09.710\nit will create a record that\nsays same as parent folder.\n\n98\n00:05:09.710 --> 00:05:13.800\nIt created a DNS record for the domain\nname that forwards that address.\n\n99\n00:05:13.800 --> 00:05:18.534\nAnd if I go back to do a new host and\nthis time I do webserver01, now,\n\n100\n00:05:18.534 --> 00:05:23.448\nit's an individual host inside it,\nwebserver1.lab.itpro.tv.\n\n101\n00:05:23.448 --> 00:05:28.750\nAnd I can punch in the IP address for\nthe system, and I can add that host.\n\n102\n00:05:28.750 --> 00:05:29.590\nAll right.\n\n103\n00:05:29.590 --> 00:05:32.642\nI'm getting these little messages\ntelling me it created successfully, so\n\n104\n00:05:32.642 --> 00:05:33.748\nI'll just get rid of that.\n\n105\n00:05:33.748 --> 00:05:35.701\nAll right, so\nthese two entries I've created,\n\n106\n00:05:35.701 --> 00:05:37.236\nthey actually point to the same host.\n\n107\n00:05:37.236 --> 00:05:40.397\nThey point to 192.160.0.100 and\n\n108\n00:05:40.397 --> 00:05:44.990\nthis one is just kind of like an alias for\nthe domain, itself.\n\n109\n00:05:44.990 --> 00:05:48.950\nNow, in the GUI,\nMicrosoft chooses to display this message,\n\n110\n00:05:48.950 --> 00:05:50.450\nsame as parent folder.\n\n111\n00:05:50.450 --> 00:05:54.020\nBut in the DNS config\nfile in the background,\n\n112\n00:05:54.020 --> 00:05:56.350\nit's actually being stored\na little bit differently.\n\n113\n00:05:56.350 --> 00:05:59.152\nMost systems will have\na wild card like this.\n\n114\n00:05:59.152 --> 00:06:00.650\nOr I'm sorry, it's not a wild card.\n\n115\n00:06:00.650 --> 00:06:04.130\nBut have an entry like this\nwritten as an at symbol.\n\n116\n00:06:04.130 --> 00:06:08.650\nAnd the at symbol indicates that this\nis referring to the domain itself.\n\n117\n00:06:08.650 --> 00:06:10.120\nYou can do a wild card.\n\n118\n00:06:10.120 --> 00:06:12.560\nYou can do a star, an asterisk in there.\n\n119\n00:06:12.560 --> 00:06:15.090\nAnd if you do an asterisk,\nit's like a catch all, right?\n\n120\n00:06:15.090 --> 00:06:16.980\nDid you ever think about\npeople with web typos?\n\n121\n00:06:16.980 --> 00:06:20.208\nMaybe they're trying to\nget to www.lab.itpro.tv.\n\n122\n00:06:20.208 --> 00:06:23.410\nAnd instead, they type ww.lab.itpro.tv.\n\n123\n00:06:23.410 --> 00:06:24.910\nThey leave a w off.\n\n124\n00:06:24.910 --> 00:06:27.680\nWell, normally,\nthey'd get a page not found.\n\n125\n00:06:27.680 --> 00:06:31.340\nOr a can't contact server message,\nor something like that.\n\n126\n00:06:31.340 --> 00:06:36.720\nBut if I do an asterisk, *.lab.itpro.tv\nand they type in something incorrect.\n\n127\n00:06:36.720 --> 00:06:39.130\nWell, it'll send them to\nwherever that asterisk points,\n\n128\n00:06:39.130 --> 00:06:40.870\nI can have it go to my default web server,\nwhatever.\n\n129\n00:06:40.870 --> 00:06:42.002\nSo they actually get to\nwhere I want them to be.\n\n130\n00:06:42.002 --> 00:06:45.485\nSo you can do a few different\nthings in those names.\n\n131\n00:06:45.485 --> 00:06:48.025\nWe don't see that here in Microsoft's GUI.\n\n132\n00:06:48.025 --> 00:06:51.675\nBut if I switch to like the commandline\n\n133\n00:06:51.675 --> 00:06:56.785\nMicrosoft stores this configuration\nin a standard bind format.\n\n134\n00:06:56.785 --> 00:06:59.469\nSo I've got lab.itpro.tv.dns right there.\n\n135\n00:06:59.469 --> 00:07:03.010\nThat's the zone that I'm working with.\n\n136\n00:07:03.010 --> 00:07:06.498\nAnd this file format is not\nsomething Microsoft made.\n\n137\n00:07:06.498 --> 00:07:08.676\nIt's actually part of the DNS standard.\n\n138\n00:07:08.676 --> 00:07:12.088\nLet me do a little of notepad on this one.\n\n139\n00:07:12.088 --> 00:07:13.534\nAnd open it up on notepad.\n\n140\n00:07:13.534 --> 00:07:17.902\nSo I've got the database file\nlab.itpro.tv.dns for default zones,\n\n141\n00:07:17.902 --> 00:07:20.558\nscoping zone, lab blah blah blah, right?\n\n142\n00:07:20.558 --> 00:07:24.540\nZone version five, so\nthis is my zone file.\n\n143\n00:07:24.540 --> 00:07:28.759\nI could actually take this file and\ngo to a Unix bind server and\n\n144\n00:07:28.759 --> 00:07:32.170\nchuck it in there, and\nit'll read it just fine.\n\n145\n00:07:32.170 --> 00:07:35.760\nOr a BSD unbound server, it would read it\njust fine, power DNS, read it just fine.\n\n146\n00:07:35.760 --> 00:07:38.880\nThis is a standard format,\nthat pretty much everybody uses.\n\n147\n00:07:38.880 --> 00:07:40.460\n&gt;&gt; That was gonna be\nmy question there Don.\n\n148\n00:07:40.460 --> 00:07:43.026\nIs that this syntax is\nbased on the DNS standard,\n\n149\n00:07:43.026 --> 00:07:45.724\nnot something that's\nproprietary to Microsoft?\n\n150\n00:07:45.724 --> 00:07:49.292\n&gt;&gt; Absolutely yeah and even though there's\nparts like in the G wire where Microsoft\n\n151\n00:07:49.292 --> 00:07:51.790\nmight choose do display\nsomething different.\n\n152\n00:07:51.790 --> 00:07:54.460\nWhen you look in the file look\nat the wild card that I put in.\n\n153\n00:07:54.460 --> 00:07:56.256\nI got to stop saying wild card.\n\n154\n00:07:56.256 --> 00:07:56.829\nIt's not a wild card.\n\n155\n00:07:56.829 --> 00:07:59.432\nIt's a domain alias.\n\n156\n00:07:59.432 --> 00:08:02.922\nAnd so it put that at symbol right there.\n\n157\n00:08:02.922 --> 00:08:06.009\nIt didn't put Same as parent domain or\nleave it blank and\n\n158\n00:08:06.009 --> 00:08:07.727\nwhatever he puts an @ symbol.\n\n159\n00:08:07.727 --> 00:08:12.942\nSo that's what we expect to see when we're\ndoing a basically a name resolution for\n\n160\n00:08:12.942 --> 00:08:15.677\nthe domain itself, an @ symbol, right?\n\n161\n00:08:15.677 --> 00:08:19.725\nThen you've got the other host\nthat I had dns2, webserver01 and\n\n162\n00:08:19.725 --> 00:08:21.930\nsee how the record is written?\n\n163\n00:08:21.930 --> 00:08:28.160\nWebserver01 followed by an A record or\nthe note that says it is an A record,\n\n164\n00:08:28.160 --> 00:08:31.150\nfollowed by the address\nthat it resolves as, okay?\n\n165\n00:08:31.150 --> 00:08:35.060\nNow there can be additional\nthings that show up here, right?\n\n166\n00:08:35.060 --> 00:08:39.480\nWhen we look at this file,\nit's showing us the bare minimum.\n\n167\n00:08:39.480 --> 00:08:43.520\nIf I go back to my screen here and\n\n168\n00:08:43.520 --> 00:08:48.700\nI pull up one of these records,\nyou'll only see so much, names, IP.\n\n169\n00:08:48.700 --> 00:08:53.980\nIf I switch to an advanced view and\n\n170\n00:08:53.980 --> 00:08:57.850\nI go back into the record,\nlook how other things just lit up.\n\n171\n00:08:57.850 --> 00:08:59.990\nLike delete this record\nwhen it become stale.\n\n172\n00:08:59.990 --> 00:09:02.350\nThat's a Microsoft thing for\npurging old records.\n\n173\n00:09:02.350 --> 00:09:05.000\nBut way down here at the bottom\nis the one I wanted to point out.\n\n174\n00:09:05.000 --> 00:09:06.580\nThere's a time to live.\n\n175\n00:09:06.580 --> 00:09:09.790\nAnd the time to live is set to one hour.\n\n176\n00:09:09.790 --> 00:09:13.390\nWhen people do a lookup for\nthis host, it's gonna get cached.\n\n177\n00:09:13.390 --> 00:09:15.200\nAnd it can be cached for up to an hour.\n\n178\n00:09:15.200 --> 00:09:16.810\nIf an hour has gone by, we need to go and\n\n179\n00:09:16.810 --> 00:09:21.260\nget the latest copy of this host record\nand that's how we'll know to do it.\n\n180\n00:09:21.260 --> 00:09:24.244\nIf you wanna minimize lookups,\nyou can make this really big.\n\n181\n00:09:24.244 --> 00:09:26.650\nYou can bump it to a couple\nof days if you want.\n\n182\n00:09:26.650 --> 00:09:30.220\nThe only negative is if you ever need to\nchange the value, you've got to wait for\n\n183\n00:09:30.220 --> 00:09:32.480\nthe time to live to expire for\neverybody to see it.\n\n184\n00:09:32.480 --> 00:09:34.090\nSo you might even wanna go shorter.\n\n185\n00:09:34.090 --> 00:09:37.590\nThis is an hour,\nmaybe I wanna crank it down to 15 minutes.\n\n186\n00:09:37.590 --> 00:09:40.251\nI'm gonna lower it down to 15 minutes and\napply that, all right.\n\n187\n00:09:40.251 --> 00:09:41.817\nSo now if I ever make a change,\n\n188\n00:09:41.817 --> 00:09:46.550\nI know that everyone in the entire world\nwill see that change within 15 minutes.\n\n189\n00:09:46.550 --> 00:09:49.810\nEven if they've cached it, I'm only\nallowing it to be cached for 15 minutes.\n\n190\n00:09:49.810 --> 00:09:53.540\nWe normally take our critical records and\nwe lower them down to five minutes or\n\n191\n00:09:53.540 --> 00:09:54.730\nsomething small like that.\n\n192\n00:09:54.730 --> 00:09:57.910\nAnd the noncritical records like desktops\nand laptops, those can have larger\n\n193\n00:09:57.910 --> 00:10:01.670\nvalues and you don't really care about it\nand you can always go in and adjust these.\n\n194\n00:10:01.670 --> 00:10:04.828\nNow the time to live didn't show\nup in the config file earlier and\n\n195\n00:10:04.828 --> 00:10:08.120\nthe reason it didn't was because\nthe time to live was the default.\n\n196\n00:10:08.120 --> 00:10:10.640\nAs long as you stay at the default,\nit's not a big deal.\n\n197\n00:10:10.640 --> 00:10:13.610\nBut now that I've deviated from\nthe default, let me go and\n\n198\n00:10:13.610 --> 00:10:15.020\nbring this file back up.\n\n199\n00:10:15.020 --> 00:10:18.370\nAnd what we'll start to see is\nthose entries change and shoot,\n\n200\n00:10:18.370 --> 00:10:19.540\nit hasn't written it yet.\n\n201\n00:10:19.540 --> 00:10:22.510\nMicrosoft does this annoying thing where\nit's writing it to memory first and\n\n202\n00:10:22.510 --> 00:10:25.660\nthen it writes it down to disk afterwards,\nso I have to wait for it turn up.\n\n203\n00:10:25.660 --> 00:10:27.780\nAnd this is where we start\nto test my patience.\n\n204\n00:10:27.780 --> 00:10:30.260\nBut any other, the time deliver I\ncould will get written down there.\n\n205\n00:10:30.260 --> 00:10:32.790\nIt's gotta store it somewhere and\nit stores in that file.\n\n206\n00:10:32.790 --> 00:10:35.320\nAs soon as you deviate from that default,\n\n207\n00:10:35.320 --> 00:10:38.170\nthat's whats gonna happen as that one's\ngonna get written over, all right.\n\n208\n00:10:38.170 --> 00:10:42.930\nNow the host record that I made so\nfar, I did same as parent folder\n\n209\n00:10:42.930 --> 00:10:45.710\nwhich would be the equivalent\nputting an @ symbol right there.\n\n210\n00:10:45.710 --> 00:10:48.320\nI did an individual name like webserver01.\n\n211\n00:10:49.390 --> 00:10:52.780\nWebserver01 might be the actual\nhostname of that server.\n\n212\n00:10:52.780 --> 00:10:54.910\nSo when I install the server\nI gave it that name.\n\n213\n00:10:54.910 --> 00:10:56.490\nBut the name doesn't have to match.\n\n214\n00:10:56.490 --> 00:11:00.801\nI could come in and create something\nentirely different like www.\n\n215\n00:11:00.801 --> 00:11:06.513\nAnd I could point it to that same person,\n192.168.0.100,\n\n216\n00:11:06.513 --> 00:11:10.022\nmaybe I choose to give\nthat a five minute TTL.\n\n217\n00:11:10.022 --> 00:11:15.370\nI'll add that in, yes, I know the record\nwas created, okay, and there we go.\n\n218\n00:11:15.370 --> 00:11:18.975\nNow it's It's like I have multiple\nnames pointing to the same host.\n\n219\n00:11:18.975 --> 00:11:21.845\nAs far as DNS is concerned,\nthese are separate hosts.\n\n220\n00:11:21.845 --> 00:11:26.885\nBut as far as an end user is concerned,\nit's all right there.\n\n221\n00:11:26.885 --> 00:11:30.310\nIt's the same host.\n\n222\n00:11:30.310 --> 00:11:34.296\nAnd so I can access it by\ntyping www.lab.itpro.tv or\n\n223\n00:11:34.296 --> 00:11:36.600\nwebserver01.lab.itpro.tv.\n\n224\n00:11:36.600 --> 00:11:41.434\nThat's really handy because I might have\nmore than one server that's answering to\n\n225\n00:11:41.434 --> 00:11:44.150\nan IP or entering into a name.\n\n226\n00:11:44.150 --> 00:11:48.060\nIf I have more than one server answering\nto a name, right, think about a web serve.\n\n227\n00:11:48.060 --> 00:11:52.960\nIf I have a cluster of web servers,\nI'm gonna have ten web servers and I don't\n\n228\n00:11:52.960 --> 00:11:56.429\nwant everybody out there in the internet\nto have to know all ten addresses.\n\n229\n00:11:56.429 --> 00:12:00.995\nWebserver01.lab.itpro.tv is\ngetting a little bogged down.\n\n230\n00:12:00.995 --> 00:12:02.535\nLet me type in webserver02.\n\n231\n00:12:02.535 --> 00:12:03.993\nNobody's gonna do that, right?\n\n232\n00:12:03.993 --> 00:12:05.612\nI need them all to have the same name.\n\n233\n00:12:05.612 --> 00:12:11.370\nSo I might want www.itpro.tv\nto point to more than one IP.\n\n234\n00:12:11.370 --> 00:12:11.960\nAnd I can do that.\n\n235\n00:12:11.960 --> 00:12:17.265\nI've got one record for www, I can come\nin and create another record for www.\n\n236\n00:12:17.265 --> 00:12:21.200\nAnd point it to a different IP,\nlike that, all right?\n\n237\n00:12:21.200 --> 00:12:24.700\nAnd I can keep going,\nadding as many as I need.\n\n238\n00:12:24.700 --> 00:12:26.220\nI shouldn't have closed that.\n\n239\n00:12:26.220 --> 00:12:28.730\nAdding as many as I need\nuntil I close the window.\n\n240\n00:12:28.730 --> 00:12:30.220\nSo I'm just gonna add another one.\n\n241\n00:12:30.220 --> 00:12:32.060\nI wont bore us by creating\na hundred of these things,\n\n242\n00:12:32.060 --> 00:12:34.710\nbut let me just get them punched in.\n\n243\n00:12:34.710 --> 00:12:39.800\nAnd now I can see I have three records,\none name pointing to three different IPs.\n\n244\n00:12:39.800 --> 00:12:42.970\n&gt;&gt; Now Don, I didn't know, this seems\nlike it would be a little confusing for\n\n245\n00:12:42.970 --> 00:12:43.760\nthe DNS server.\n\n246\n00:12:43.760 --> 00:12:45.682\nWhen they make a query\nagainst the database,\n\n247\n00:12:45.682 --> 00:12:47.970\nhow do you get a control which\none they actually go to?\n\n248\n00:12:47.970 --> 00:12:51.910\n&gt;&gt; All right, so it's an interesting\nsystem that's happening here.\n\n249\n00:12:51.910 --> 00:12:56.485\nWhen I did this, again Microsoft chooses\nto represent them as separate entries, so\n\n250\n00:12:56.485 --> 00:12:58.740\nI see three separate entries, right?\n\n251\n00:12:58.740 --> 00:13:01.936\nBut eventually that's going\nto get written into disk and\n\n252\n00:13:01.936 --> 00:13:05.275\nif I jump over to the disk side\nof things and take a look at it.\n\n253\n00:13:05.275 --> 00:13:08.614\nAnd my TTL show up, [LAUGH] so\nI take a look at disk side of things,\n\n254\n00:13:08.614 --> 00:13:11.530\nI have to wait for\nit to write those other records.\n\n255\n00:13:11.530 --> 00:13:15.468\nBut what you'll see is it's actually\nonly gonna have one entry for\n\n256\n00:13:15.468 --> 00:13:17.430\nwww with three IP stuck on it.\n\n257\n00:13:17.430 --> 00:13:20.870\nSo when the server is still just one\nentry, it's just got more than one IP and\n\n258\n00:13:20.870 --> 00:13:22.610\nhere's those TTL starting to turn up.\n\n259\n00:13:22.610 --> 00:13:23.910\nRemember, I said I just need to wait for\n\n260\n00:13:23.910 --> 00:13:26.380\nMicrosoft to write them into disk,\nso it did finally happen.\n\n261\n00:13:26.380 --> 00:13:28.059\nSo we'll keep an eye on that and\n\n262\n00:13:28.059 --> 00:13:31.618\ncome back to see how it's written\nas multiple IPs on one address.\n\n263\n00:13:31.618 --> 00:13:35.303\nBut we can see [INAUDIBLE] right away,\nif we wanna see it in action,\n\n264\n00:13:35.303 --> 00:13:37.590\nall I have to do is a name lookup, right?\n\n265\n00:13:37.590 --> 00:13:39.590\nSo I did an nslookup earlier.\n\n266\n00:13:39.590 --> 00:13:44.480\nAnd I'm gonna do a lookup for well,\nI could do webserver01, right?\n\n267\n00:13:44.480 --> 00:13:49.141\nWebserver01, there's only one entry and\nit points to 192.168.0.100,\n\n268\n00:13:49.141 --> 00:13:51.052\nright, we just resolved name to IP.\n\n269\n00:13:51.052 --> 00:13:56.540\nBut if I do www, that one now\npoints to three different IPs.\n\n270\n00:13:56.540 --> 00:13:59.050\nSo getting back to Wes' question,\nwhat happens.\n\n271\n00:13:59.050 --> 00:14:00.611\nThe server returns all three IPs.\n\n272\n00:14:00.611 --> 00:14:02.347\nJust says screw it,\nI give you all three of them.\n\n273\n00:14:02.347 --> 00:14:04.140\nI've got three, I've got 10, I got 20.\n\n274\n00:14:04.140 --> 00:14:06.500\nHowever many it has,\nit's just gonna return them all, right.\n\n275\n00:14:06.500 --> 00:14:07.950\nAnd it's gonna give them to me.\n\n276\n00:14:07.950 --> 00:14:11.730\nNow what happens next\nis entirely up to me.\n\n277\n00:14:11.730 --> 00:14:15.440\nMy client now knows that there's\nthree IPs, what does it do?\n\n278\n00:14:15.440 --> 00:14:16.880\nNormally it just goes to the first one.\n\n279\n00:14:16.880 --> 00:14:18.600\nSays hey, you've got three, that's nice.\n\n280\n00:14:18.600 --> 00:14:19.960\nI'm gonna go to the first one.\n\n281\n00:14:19.960 --> 00:14:20.920\nThose other ones that you can keep off,\nright?\n\n282\n00:14:22.010 --> 00:14:26.655\nSo in the DNS Spec, it's kind of up to\nthe server whether they wanna do this.\n\n283\n00:14:26.655 --> 00:14:30.065\nThey do what I refer to as like\npoor man's load balancing.\n\n284\n00:14:30.065 --> 00:14:33.556\nThat when it returns the IPs to try and\ndistribute the load across the IPs,\n\n285\n00:14:33.556 --> 00:14:36.445\nthe server will shuffle up\nthe order that it gives us the IPs.\n\n286\n00:14:36.445 --> 00:14:39.195\nAnd the clients almost always\ngonna go to the first one anyway.\n\n287\n00:14:39.195 --> 00:14:40.865\nSo if it changes which one is first,\n\n288\n00:14:40.865 --> 00:14:43.255\nit can actually distribute\ntraffic across more than one IP.\n\n289\n00:14:43.255 --> 00:14:46.100\nSo watch what happens if I start to\nlook this up over and over again.\n\n290\n00:14:46.100 --> 00:14:50.619\nA minute ago 100 was first,\nnow 101 is first.\n\n291\n00:14:50.619 --> 00:14:52.417\nNow 102 is first.\n\n292\n00:14:52.417 --> 00:14:55.180\nNow it goes back to 100.\n\n293\n00:14:55.180 --> 00:14:58.290\nI'm the only person looking up on this\nserver, so I'm the one who's triggering\n\n294\n00:14:58.290 --> 00:15:02.060\nthe round robin until it's moving\nthrough changing who that first IP is.\n\n295\n00:15:02.060 --> 00:15:04.040\nI'm sort of load balancing, right?\n\n296\n00:15:04.040 --> 00:15:06.358\nIt's poor mans load balancing though\nbecause there's no monitoring\n\n297\n00:15:06.358 --> 00:15:06.915\non the back end.\n\n298\n00:15:06.915 --> 00:15:11.280\nIf one of these servers goes down, 33% of\nmy traffic is gonna go to a dead server.\n\n299\n00:15:11.280 --> 00:15:15.000\nNormally, they'll just move to the next\none cuz they got all three IPs, but\n\n300\n00:15:15.000 --> 00:15:16.230\nit's not an ideal situation.\n\n301\n00:15:16.230 --> 00:15:18.220\nA true hardware load balancer\nwould be a better solution.\n\n302\n00:15:19.500 --> 00:15:22.010\nAll right, so I've created an A record,\n\n303\n00:15:22.010 --> 00:15:25.140\nI've created one A record\nthat pointed to multiple IPs.\n\n304\n00:15:25.140 --> 00:15:27.130\nAnd we've got that kind of moving along,\n\n305\n00:15:27.130 --> 00:15:29.180\nI do need to point out something\na little bit different too.\n\n306\n00:15:29.180 --> 00:15:33.680\nWhich is these are A records,\nwhich originally designed for\n\n307\n00:15:33.680 --> 00:15:38.240\nIPv4, the only addressing protocol\navailable on the Internet.\n\n308\n00:15:38.240 --> 00:15:43.847\nWell, today we have two addressing\nprotocols on the Internet, IPv4 and IPv6.\n\n309\n00:15:43.847 --> 00:15:49.170\nSo there's a new record out there\nthat is called a four A record.\n\n310\n00:15:49.170 --> 00:15:54.488\nAnd a four A record works basically the\nsame way except instead of a IPv4 address,\n\n311\n00:15:54.488 --> 00:15:56.194\nits got an IPv6 address.\n\n312\n00:15:56.194 --> 00:15:58.630\nAll right now, why four A?\n\n313\n00:15:58.630 --> 00:16:02.960\nSo A stood for address, this isn’t\naddress, address, address, is it?\n\n314\n00:16:02.960 --> 00:16:04.450\nWell, it sort of is.\n\n315\n00:16:04.450 --> 00:16:06.782\nA normal address is 32 bits.\n\n316\n00:16:06.782 --> 00:16:11.716\nAn IPv4 address is 32 bits,\nan IPv6 address?\n\n317\n00:16:11.716 --> 00:16:13.188\n128 bits.\n\n318\n00:16:13.188 --> 00:16:18.402\nAnd so what we have is a 32 bit IPv4\naddress, basically stored four times.\n\n319\n00:16:18.402 --> 00:16:21.220\nWhich is why they have the 4A,\nthat's why they came up with these names.\n\n320\n00:16:21.220 --> 00:16:23.970\nI though it should be 6a,\nit's IPv6, but, nobody asked me.\n\n321\n00:16:23.970 --> 00:16:29.360\nSo I'll go and do a new host, and if I\nput in a name, just like normal, right?\n\n322\n00:16:29.360 --> 00:16:35.470\nSo maybe this is www, again and I put\nan IP address in and I do an IPv6 address.\n\n323\n00:16:35.470 --> 00:16:41.170\nI can just type it right in here,\nwhatever that address happens to be.\n\n324\n00:16:41.170 --> 00:16:44.750\nI'm not gonna go too crazy here.\n\n325\n00:16:44.750 --> 00:16:46.280\nI can get that created, and\n\n326\n00:16:46.280 --> 00:16:51.630\nwhen I put that in place it's going\nto know that what I'm doing is IPv6.\n\n327\n00:16:51.630 --> 00:16:54.328\nAnd it's gonna create that record.\n\n328\n00:16:54.328 --> 00:17:01.110\nAnd now I've got an IPv6 host and\nit's a 4A record tied to www.\n\n329\n00:17:01.110 --> 00:17:03.296\nAnd I can see that IPv6\nheaders right there.\n\n330\n00:17:03.296 --> 00:17:06.080\nAnd just like with the other\none I can continue to add more,\n\n331\n00:17:06.080 --> 00:17:10.220\nmaybe I've got a whole collection of\nservers that are available to handle that.\n\n332\n00:17:10.220 --> 00:17:13.500\nSo I'll go into another 4A record for www.\n\n333\n00:17:13.500 --> 00:17:14.489\nI'm going to.\n\n334\n00:17:14.489 --> 00:17:18.930\nApparently I don't know how to copy and\npaste.\n\n335\n00:17:20.055 --> 00:17:22.300\nTrying to make life easier and\ndidn't quite work out.\n\n336\n00:17:22.300 --> 00:17:25.080\nSo I'm gonna create another\nhost here called www.\n\n337\n00:17:25.080 --> 00:17:26.780\nI'm gonna paste that one in.\n\n338\n00:17:26.780 --> 00:17:29.340\nI'll just bump up that IP by one.\n\n339\n00:17:29.340 --> 00:17:30.590\nAnd we continue on.\n\n340\n00:17:30.590 --> 00:17:34.690\nThey work the exact same, so IPv4 and\nIPv6, A records work the same.\n\n341\n00:17:34.690 --> 00:17:35.580\nYou can have more than one.\n\n342\n00:17:35.580 --> 00:17:38.710\nIt will round robin them,\nit does all that stuff like expected.\n\n343\n00:17:38.710 --> 00:17:43.220\nAnd now, when we go to resolve those,\nwhat happens?\n\n344\n00:17:43.220 --> 00:17:46.170\nWell, what happens is\nkind of up to our client.\n\n345\n00:17:46.170 --> 00:17:49.060\nSome clients will reach out and\nsay give me both the IPv4 and\n\n346\n00:17:49.060 --> 00:17:51.780\nIPv6, like Windows does.\n\n347\n00:17:51.780 --> 00:17:55.410\nOn a Mac, it's gonna use whatever\nprotocol you talk to the DNS server.\n\n348\n00:17:55.410 --> 00:17:56.610\nIt's just how they set it.\n\n349\n00:17:56.610 --> 00:17:59.360\nSo sometimes you have to use\na command line argument to say I want\n\n350\n00:17:59.360 --> 00:18:00.730\nthe IPv6 record.\n\n351\n00:18:00.730 --> 00:18:06.200\nVersus doing the IPv4, which if I\nremember, you just do like a -TA,\n\n352\n00:18:06.200 --> 00:18:10.450\nor a -AAAA, to force it to give\nyou the record type that you want.\n\n353\n00:18:10.450 --> 00:18:12.870\nBut when we look that up,\nI'm getting both.\n\n354\n00:18:12.870 --> 00:18:13.950\nIPv4 and IPv6.\n\n355\n00:18:13.950 --> 00:18:16.600\nSo I can talk to that server either way.\n\n356\n00:18:16.600 --> 00:18:18.650\nIf I'm configured for\nIPv6 might as well use it.\n\n357\n00:18:18.650 --> 00:18:19.740\nIf I'm not, I'll use IPv4.\n\n358\n00:18:19.740 --> 00:18:21.480\nSo I get that redundancy.\n\n359\n00:18:21.480 --> 00:18:24.400\nAnd the option to pick\nbetween the protocols.\n\n360\n00:18:24.400 --> 00:18:27.230\n&gt;&gt; And Don that kinda makes sense\nnow because I used nslookup against\n\n361\n00:18:27.230 --> 00:18:28.250\nservers like Google.\n\n362\n00:18:28.250 --> 00:18:32.220\nAnd now that's why you get five or\nsix IPv4 addresses and\n\n363\n00:18:32.220 --> 00:18:35.015\nyou get their IPv6 address\nall in one simple query.\n\n364\n00:18:35.015 --> 00:18:37.415\n&gt;&gt; Yeah, here, let me,\nI'll run that look up against Google.\n\n365\n00:18:37.415 --> 00:18:41.705\nAnd then a lot of providers have started\ndoing where you'll get an IPv6 and\n\n366\n00:18:41.705 --> 00:18:44.895\nan IPv4 address that\ncomes right back at you.\n\n367\n00:18:44.895 --> 00:18:47.285\nAnd you're back in business.\n\n368\n00:18:47.285 --> 00:18:49.305\nSome providers don't do that.\n\n369\n00:18:49.305 --> 00:18:51.465\nLet me see if Microsoft.\n\n370\n00:18:51.465 --> 00:18:52.425\nMicrosoft does.\n\n371\n00:18:52.425 --> 00:18:53.405\nSome providers don't though.\n\n372\n00:18:53.405 --> 00:18:56.830\nSome just give you an IPv4 because\nthey might not have an IPv6.\n\n373\n00:18:56.830 --> 00:18:58.270\nAddress space, like us, right.\n\n374\n00:18:58.270 --> 00:19:03.230\nSo itpro.tv, if I were to look that one\nup we've only got an IPv4 address not\n\n375\n00:19:03.230 --> 00:19:08.280\nan IPv6 yet because our service provider\ndoesn't do it yet for whatever reason.\n\n376\n00:19:08.280 --> 00:19:11.960\nSo you don't see that everywhere, but\nit is getting to be more and more common.\n\n377\n00:19:11.960 --> 00:19:17.625\nAll right, let's keep going, so\nthose are A and AAAA, our four A records.\n\n378\n00:19:17.625 --> 00:19:20.760\nI want to talk about another one that's\ngonna make our life a little easier.\n\n379\n00:19:20.760 --> 00:19:26.880\nYou've probably noticed that I've\nmapped a ton of stuff to 192.168.0.100.\n\n380\n00:19:26.880 --> 00:19:29.530\nWell, that's all one server,\nso that's fine.\n\n381\n00:19:29.530 --> 00:19:31.650\nSo one IPA goes to one server.\n\n382\n00:19:31.650 --> 00:19:34.500\nThen one day I get a call\nfrom the system admins.\n\n383\n00:19:34.500 --> 00:19:36.070\nLike Don, that server's dead.\n\n384\n00:19:36.070 --> 00:19:38.501\nWe gotta bring up another one and\nreplace it.\n\n385\n00:19:38.501 --> 00:19:43.226\nSo your new IP is 192.168.0.105.\n\n386\n00:19:43.226 --> 00:19:46.390\nGreat, now I gotta go and\nedit every one of these records.\n\n387\n00:19:46.390 --> 00:19:50.742\nI gotta go and come in and change each\none of these to say, all right, not 100,\n\n388\n00:19:50.742 --> 00:19:52.225\nI'm gonna make it 105.\n\n389\n00:19:52.225 --> 00:19:55.835\nLet me go to the next one,\nI'll make that 105, and continue on.\n\n390\n00:19:55.835 --> 00:19:58.630\nWell that gets to be quite the hustle,\nright?\n\n391\n00:19:58.630 --> 00:20:00.640\nHaving to rename all of these.\n\n392\n00:20:00.640 --> 00:20:05.160\nSo instead of creating all A records\npointing to a single host.\n\n393\n00:20:05.160 --> 00:20:08.938\nA way you can make this\nbetter is to create a CNAME.\n\n394\n00:20:08.938 --> 00:20:13.070\nNow a CNAME it's actually an alias,\nand it stands for canonical name.\n\n395\n00:20:13.070 --> 00:20:18.190\nAnd a canonical name is simply\na name that points to another name.\n\n396\n00:20:18.190 --> 00:20:22.880\nSo instead of name to IP, like DNS\nnormally does, this one does name to name.\n\n397\n00:20:22.880 --> 00:20:26.757\nOr, more accurately,\nit does name to name, to IP.\n\n398\n00:20:26.757 --> 00:20:28.934\nCuz when I do a lookup,\nit's gonna lookup the name,\n\n399\n00:20:28.934 --> 00:20:31.969\nit's gonna see it point to another name,\nit's gonna look up that name.\n\n400\n00:20:31.969 --> 00:20:35.090\nAnd then it's going to\nlook up to find the IP.\n\n401\n00:20:35.090 --> 00:20:38.600\nNow the reason they call it a canonical\nname instead of an alias is that\n\n402\n00:20:38.600 --> 00:20:41.150\nyou might actually nest multiple CNAMEs.\n\n403\n00:20:41.150 --> 00:20:43.010\nNot a great idea, but you can do it, so\n\n404\n00:20:43.010 --> 00:20:46.600\na CNAME might point to another\nCNAEM that points to another CNAME.\n\n405\n00:20:46.600 --> 00:20:48.940\nSo it's not an alias of the next CNAME,\n\n406\n00:20:48.940 --> 00:20:55.250\nit's an alias of the destination, whatever\nthat final point in the journey is.\n\n407\n00:20:55.250 --> 00:20:56.900\nThat's why it's called a canonical name.\n\n408\n00:20:56.900 --> 00:20:59.620\nBut if we go through and\npull up our new host panel here,\n\n409\n00:20:59.620 --> 00:21:01.500\nI've got a new alias CNAME.\n\n410\n00:21:01.500 --> 00:21:05.930\nAnd if I choose that,\nI can start to create an entry for things.\n\n411\n00:21:05.930 --> 00:21:12.040\nAnd I can say, for example,\nwww doesn't point to an IP but\n\n412\n00:21:12.040 --> 00:21:17.970\ninstead, points to web server 01,\nlike that, right?\n\n413\n00:21:17.970 --> 00:21:20.430\nAnd so I can punch that in,\nand get it put in place.\n\n414\n00:21:20.430 --> 00:21:22.140\nI'm going to lower that\ntime to live a little bit.\n\n415\n00:21:23.400 --> 00:21:24.580\nAnd let that get created.\n\n416\n00:21:24.580 --> 00:21:25.620\nNow, I'm going to get an error,\n\n417\n00:21:25.620 --> 00:21:29.080\nbecause I've already got\nrecords in place for that.\n\n418\n00:21:29.080 --> 00:21:31.280\nSo I'm gonna cancel out of this.\n\n419\n00:21:31.280 --> 00:21:34.250\nAnd let's just take some of these\nrecords and clear them out.\n\n420\n00:21:34.250 --> 00:21:36.280\nCuz I'm getting a little overcrowded.\n\n421\n00:21:36.280 --> 00:21:37.210\nWell you know what?\n\n422\n00:21:37.210 --> 00:21:38.320\nI'll just create a new server.\n\n423\n00:21:38.320 --> 00:21:41.290\nSo let's say it's an FTP server,\nsomething like that.\n\n424\n00:21:41.290 --> 00:21:44.290\nSo my web server, I'm gonna leave that be.\n\n425\n00:21:44.290 --> 00:21:46.680\nBut this same as parent folder,\nI'm gonna get rid of that.\n\n426\n00:21:48.090 --> 00:21:51.510\nAnd I'm gonna create an FTP alias.\n\n427\n00:21:51.510 --> 00:21:54.160\nSo I'm gonna create a new host.\n\n428\n00:21:54.160 --> 00:21:57.758\nAnd it's gonna be ftp.lab.itpro.tv.\n\n429\n00:21:57.758 --> 00:22:01.488\nAnd I'm gonna point that not to an IP,\nlet me cancel that.\n\n430\n00:22:01.488 --> 00:22:06.456\nI'm gonna do a CNAME, and\nI'm gonna point ftp.lab.itpro.tv and\n\n431\n00:22:06.456 --> 00:22:09.464\nI'm going to point it to webserver 01.\n\n432\n00:22:09.464 --> 00:22:14.526\nNow I can browse and pick it if I'm a lazy\ntyper, or I could just type it in there.\n\n433\n00:22:14.526 --> 00:22:18.148\nBut webserver01.lab.itpro.tv.\n\n434\n00:22:18.148 --> 00:22:23.489\nAnd I can adjust the time to live on the\nCNAME just like I can on anything else.\n\n435\n00:22:23.489 --> 00:22:27.702\nAll right so I can see my new record\ncreated right here, that I just made,\n\n436\n00:22:27.702 --> 00:22:29.235\nI've got FTP is the name.\n\n437\n00:22:29.235 --> 00:22:33.120\nAnd instead of pointing to an IP,\nit's pointing to a CNAME.\n\n438\n00:22:33.120 --> 00:22:36.265\nAnd, the CNAME is pointing to\nanother host, and that other host is\n\n439\n00:22:36.265 --> 00:22:39.930\nwebserver01.lab.it.pro.tv, it's all\ncreated and it's all right there.\n\n440\n00:22:39.930 --> 00:22:43.890\nSo now if I do a lookup for\nftp.lab.it.pro.tv,\n\n441\n00:22:43.890 --> 00:22:47.820\nit'll get a name, it'll do a lookup for\nthat name, and then it'll get an IP.\n\n442\n00:22:47.820 --> 00:22:50.860\nNow, that seems like a lot of work to go\nthrough, why not just map it to an IP?\n\n443\n00:22:51.860 --> 00:22:55.550\nWhere it becomes handy is when\nI need to change an IP, right?\n\n444\n00:22:55.550 --> 00:22:56.700\nSo let's do this lookup.\n\n445\n00:22:56.700 --> 00:22:58.995\nSo if I come in and I do an NS lookup for\n\n446\n00:22:58.995 --> 00:23:05.570\nftp.lab.itpro.tv it looks it up and\nit, sorry, against my own server.\n\n447\n00:23:05.570 --> 00:23:06.410\nThere we go.\n\n448\n00:23:06.410 --> 00:23:10.006\nIt's gonna look it up, it's gonna see\nthe CNAME and then it's gonna resolve it.\n\n449\n00:23:10.006 --> 00:23:13.629\nSee how it found webserver01.lab.itpro.tv?\n\n450\n00:23:13.629 --> 00:23:16.380\nAnd it mapped to that IP, right?\n\n451\n00:23:16.380 --> 00:23:20.670\nNow, if I need to change the IP address\nto that sever, let's say I put it back\n\n452\n00:23:20.670 --> 00:23:24.910\nto 192.168.0.100, the guys restored the\nserver, I'm gonna bring it back online.\n\n453\n00:23:24.910 --> 00:23:32.710\nSo, I go back to my DNS utility,\nand I don't have to edit the CNAME.\n\n454\n00:23:32.710 --> 00:23:35.472\nAll I have to edit is the original host,\nthis guy.\n\n455\n00:23:35.472 --> 00:23:39.140\nAnd I can go back in here,\nI can change it back to 100.\n\n456\n00:23:39.140 --> 00:23:43.108\nAnd because this CNAME\npoints at that address,\n\n457\n00:23:43.108 --> 00:23:47.480\nwhen I do a look up here\nit's just redirecting here.\n\n458\n00:23:47.480 --> 00:23:50.000\nI don't have to go and change it,\nit's all done at once.\n\n459\n00:23:50.000 --> 00:23:52.900\nI change one entry and\nall the CNAMEs will reflect that.\n\n460\n00:23:52.900 --> 00:23:56.600\n&gt;&gt; And then as an end user Don if you were\nto say hey Wes, browse to that FTP site.\n\n461\n00:23:56.600 --> 00:23:58.790\nIt's transparent to me and\nI don't even know that it happened.\n\n462\n00:23:58.790 --> 00:24:00.820\n&gt;&gt; Yeah absolutely,\nin fact it should've already taken place.\n\n463\n00:24:00.820 --> 00:24:04.010\nIf I go over to my command prompt\nagain and I redo that lookup,\n\n464\n00:24:04.010 --> 00:24:05.962\nassuming that I haven't cached it.\n\n465\n00:24:05.962 --> 00:24:08.951\nThen I should be able to do that\nlookup and I get a response.\n\n466\n00:24:08.951 --> 00:24:14.708\nAnd a moment ago I got .105,\nnow I get .100, the CNAME saves us time.\n\n467\n00:24:14.708 --> 00:24:18.501\nSo, you might have a server\ncalled web server 01 and\n\n468\n00:24:18.501 --> 00:24:22.390\nyou have a CNAME for\nwww that points to web server 01.\n\n469\n00:24:22.390 --> 00:24:25.730\nSo we don't have to name our servers\nwhat our end users are using,\n\n470\n00:24:25.730 --> 00:24:28.030\nwe can just put a CNAME in place and\nthat takes care of it.\n\n471\n00:24:28.030 --> 00:24:30.707\nMakes really easy to redirect and\nmove things around.\n\n472\n00:24:30.707 --> 00:24:33.800\nAll right, there's one last host\nrecord that I need to cover before\n\n473\n00:24:33.800 --> 00:24:36.360\nwe wrap this one up and\nthat's a PTR record.\n\n474\n00:24:36.360 --> 00:24:40.200\nPTRs are pointer records and\nthey're the opposite of a host record.\n\n475\n00:24:40.200 --> 00:24:44.500\nSo that the A records that we've\nbeen working with, A, 4A, and CNAME.\n\n476\n00:24:44.500 --> 00:24:48.420\nThose are all name to IP,\nor name to name to IP.\n\n477\n00:24:48.420 --> 00:24:51.680\nBut a PTR is the other way around,\nit's IP to name.\n\n478\n00:24:51.680 --> 00:24:55.220\nSo if I want to resolve an IP address\nto figure out who the heck it is,\n\n479\n00:24:55.220 --> 00:24:56.600\nI need a PTR record.\n\n480\n00:24:56.600 --> 00:24:59.110\nAnd all along the way,\nyou see me creating these things, and\n\n481\n00:24:59.110 --> 00:25:02.550\nit keeps asking me if it wants\nme to create the PTR record.\n\n482\n00:25:02.550 --> 00:25:03.594\nSo when I create a host,\n\n483\n00:25:03.594 --> 00:25:06.639\nI've got the option right here to\ncreate the Associated PTR record.\n\n484\n00:25:06.639 --> 00:25:09.554\nThe thing about PTRs,\nis they don't go in for\n\n485\n00:25:09.554 --> 00:25:12.711\nlookup one,\nthey go in the reverse lookup zone.\n\n486\n00:25:12.711 --> 00:25:15.298\nAnd if you don't have\na reverse lookup zone created,\n\n487\n00:25:15.298 --> 00:25:17.540\nthen these don't get created, right?\n\n488\n00:25:17.540 --> 00:25:21.390\nNow, on a private network you can\nmake your own reverse lookup zones.\n\n489\n00:25:21.390 --> 00:25:23.670\nYou can make them, chuck them in there,\nand they work great.\n\n490\n00:25:23.670 --> 00:25:24.790\nBut out on the internet,\n\n491\n00:25:24.790 --> 00:25:29.540\nyou can only make a reverse lookup zone\nif actually own your IP addresses.\n\n492\n00:25:29.540 --> 00:25:30.660\nMost of us don't.\n\n493\n00:25:30.660 --> 00:25:35.642\nSo for example, our IP address's here\nat the office, we go through an ISP and\n\n494\n00:25:35.642 --> 00:25:37.880\nthe ISP is assigned 32 IPs to us.\n\n495\n00:25:37.880 --> 00:25:43.110\nNow, we pay for those IPs but\nwe don't own them, the ISP does.\n\n496\n00:25:43.110 --> 00:25:47.206\nSo the ISP,\ncontrols the reverse lookup for those.\n\n497\n00:25:47.206 --> 00:25:49.990\nAnd then, we,\nif we need to change the reverse look ups,\n\n498\n00:25:49.990 --> 00:25:52.750\nwe have to reach out to them and ask them\nto do it, because we don't own those IPs.\n\n499\n00:25:53.860 --> 00:25:57.980\nUnlike the domain name, where we do own\nthe domain name, we don't own the IPs.\n\n500\n00:25:57.980 --> 00:25:59.280\nNow some companies do own their IPs.\n\n501\n00:25:59.280 --> 00:26:02.383\nIf you have a BGP autonomous system and\nyou own your IPs, and\n\n502\n00:26:02.383 --> 00:26:06.123\nin that case you're responsible for\nsupporting reverse lookup zone.\n\n503\n00:26:06.123 --> 00:26:09.730\nAnd you need to be able\nto map IPs to a name.\n\n504\n00:26:09.730 --> 00:26:13.480\nAnd so I've got a couple of\nreverse lookup zones created here,\n\n505\n00:26:13.480 --> 00:26:17.965\nlike 10.in-ader.arvo,\nwhich means these are internet addresses.\n\n506\n00:26:17.965 --> 00:26:21.375\nAnd remember that the way the networks\nhave written is kind of backwards,\n\n507\n00:26:21.375 --> 00:26:23.355\nbecause the way they look up is performed.\n\n508\n00:26:23.355 --> 00:26:29.520\nIf I get a host who's in 192.168.1.100,\n.100 is a host ID, so I ignore that.\n\n509\n00:26:29.520 --> 00:26:35.800\nAnd then .0 is the next octet, .168 is\nthe next octet, .192 is the first octet.\n\n510\n00:26:35.800 --> 00:26:39.060\nAnd so,\nit's written backwards to reflect that.\n\n511\n00:26:39.060 --> 00:26:41.720\nAnd so, if I wanna create an entry\nin here from web server 01,\n\n512\n00:26:41.720 --> 00:26:43.930\nI can do a new pointer record.\n\n513\n00:26:43.930 --> 00:26:48.960\nAnd I would specify the address,\nthe address is 192.168.0.100.\n\n514\n00:26:48.960 --> 00:26:53.250\nBut look what just happened,\njust like when I do four lookup zones, it\n\n515\n00:26:53.250 --> 00:26:57.740\nassumes that I'm already in that network,\nbecause I'm in that reverse lookup zone.\n\n516\n00:26:57.740 --> 00:26:59.650\nAnd so now, I'm screwing up my address.\n\n517\n00:26:59.650 --> 00:27:02.490\nSo I need to just put the Host, and\n\n518\n00:27:02.490 --> 00:27:06.460\nnow it's my address written backwards,\n192.168.0.100.\n\n519\n00:27:06.460 --> 00:27:09.510\nAnd then I can put the name\nthat it's mapped to.\n\n520\n00:27:09.510 --> 00:27:15.704\nAnd in my case it's mapped\nto webserver01.lab.itpro.tv.\n\n521\n00:27:15.704 --> 00:27:19.376\nAnd I'll leave the trailing dot off,\nI don't want to anger the Microsoft gods,\n\n522\n00:27:19.376 --> 00:27:21.923\nbut there is supposed to be\na little dot there at the end.\n\n523\n00:27:21.923 --> 00:27:23.410\nAnd I'll go ahead and hit OK on that.\n\n524\n00:27:24.620 --> 00:27:30.733\nNow that it's created, I've got something\nthat's going to resolve an IP to a name.\n\n525\n00:27:30.733 --> 00:27:33.147\nNow be careful cuz these reverse\nlookup zones can sometimes show up\n\n526\n00:27:33.147 --> 00:27:33.930\na little different.\n\n527\n00:27:33.930 --> 00:27:36.660\nSee this one here that\nI created just 10 dot?\n\n528\n00:27:36.660 --> 00:27:38.760\nWell, 10 dot is a class A.\n\n529\n00:27:38.760 --> 00:27:41.430\nSo, everything under 10 dot\nwould fall inside of it.\n\n530\n00:27:41.430 --> 00:27:44.654\nSo, when I create a PTR record in here,\nit's gonna be a little bit different.\n\n531\n00:27:44.654 --> 00:27:48.427\nFor example, my workstation,\n\n532\n00:27:48.427 --> 00:27:53.048\nmy laptop, let's see what my- oops.\n\n533\n00:27:53.048 --> 00:27:57.370\n[INAUDIBLE] get into a [LAUGH] I am\ngoing to get into a terminal eventually.\n\n534\n00:27:57.370 --> 00:27:58.510\nThere we go.\n\n535\n00:27:58.510 --> 00:28:05.220\nAnd if I take a look at my IP address,\nI am 10 dot.\n\n536\n00:28:05.220 --> 00:28:07.190\nI should have just grabbed\nit from the beginning.\n\n537\n00:28:08.760 --> 00:28:11.552\nI am unable to find my IP address.\n\n538\n00:28:11.552 --> 00:28:12.290\n10.0.\n\n539\n00:28:12.290 --> 00:28:14.635\n[LAUGH] Too many network\nadapters is what I have.\n\n540\n00:28:14.635 --> 00:28:19.392\n10.0.14.72 so\nif I want to create an entry for me,\n\n541\n00:28:19.392 --> 00:28:22.481\nmy address is 10.0.14.72.\n\n542\n00:28:22.481 --> 00:28:26.180\nBut when I type that out,\nlook what it's doing down here,\n\n543\n00:28:26.180 --> 00:28:30.680\nit's writing in the forward order,\nwhich is incorrect, right?\n\n544\n00:28:30.680 --> 00:28:34.035\nSo need to know to reverse that and\nwrite it the proper way.\n\n545\n00:28:34.035 --> 00:28:40.800\n72.14.0, I'm writing it\nbackwards to match that.\n\n546\n00:28:40.800 --> 00:28:43.760\nThat can be a little tricky and\nit can cause the zone not to work.\n\n547\n00:28:43.760 --> 00:28:46.640\nAnd that's why Microsoft is\nconstantly pestering you to create\n\n548\n00:28:46.640 --> 00:28:48.330\nthese PTR records for you.\n\n549\n00:28:48.330 --> 00:28:51.703\nSo for example,\nif I go up here to my lab, and\n\n550\n00:28:51.703 --> 00:28:56.921\nI create a new host record and so\nthis is gonna be dpulaptop, right?\n\n551\n00:28:56.921 --> 00:29:00.330\nAnd for the IP I put in 10.0.14.72.\n\n552\n00:29:00.330 --> 00:29:03.140\nAnd I tell it to create\nthe associated pointer record.\n\n553\n00:29:03.140 --> 00:29:07.170\nIf I let it do it for me,\nall right so it's gonna do it.\n\n554\n00:29:07.170 --> 00:29:12.040\nNow, when I go into that zone, well it's\nmissing cuz I need to refresh my screen.\n\n555\n00:29:12.040 --> 00:29:15.730\nBut if I refresh my screen,\nthere it is, 10.0.14.72.\n\n556\n00:29:15.730 --> 00:29:19.580\nAnd it made sure that it\ngot entered in properly, so\n\n557\n00:29:19.580 --> 00:29:23.160\nthat it didn't get it backwards or\nmixed up, or whatever.\n\n558\n00:29:23.160 --> 00:29:26.280\nNow the way this is being rendered here\nmakes it look like it's in one folder, but\n\n559\n00:29:26.280 --> 00:29:29.760\nit does actually create little\nsubfolders for each octet down the line.\n\n560\n00:29:29.760 --> 00:29:33.200\nAnd it's an interesting system, but\nanyhow, so it'll create that and\n\n561\n00:29:33.200 --> 00:29:34.040\nput it in place.\n\n562\n00:29:34.040 --> 00:29:37.700\nBut this'll let me\nreverse an IP to a name.\n\n563\n00:29:37.700 --> 00:29:41.915\nSo if I go back to my command prompt and\nI do an nslookup and\n\n564\n00:29:41.915 --> 00:29:44.352\nI look up an IP instead, right?\n\n565\n00:29:44.352 --> 00:29:48.098\nSo I'll say 10.0.14.72,\n\n566\n00:29:48.098 --> 00:29:52.667\nwhen I look that up it\nresolves it to dplaptop.\n\n567\n00:29:52.667 --> 00:29:55.797\nNow, I can map the IP to the name.\n\n568\n00:29:55.797 --> 00:29:56.617\nAll right,\n\n569\n00:29:56.617 --> 00:30:01.539\nlet's do one last look at the file\nthat is created out of all this stuff.\n\n570\n00:30:01.539 --> 00:30:05.328\nThis whole time we've been\nediting DNS viz the GUI, but\n\n571\n00:30:05.328 --> 00:30:09.730\nin the background it has been\nworking with that text file.\n\n572\n00:30:09.730 --> 00:30:13.740\nAnd remember what I've said about www and\nhow was really has one entry?\n\n573\n00:30:13.740 --> 00:30:18.007\nAnd here I can see it's one entry and\nhere's all the A records that I created or\n\n574\n00:30:18.007 --> 00:30:20.515\nfour A records that we created and\ntied to it.\n\n575\n00:30:20.515 --> 00:30:23.870\nHere you can see the FTP CNAME\nthat was created.\n\n576\n00:30:23.870 --> 00:30:27.350\nAnd there's that little trailing\ndot that the GUI hates so much.\n\n577\n00:30:27.350 --> 00:30:29.010\nRemember that when you\ncreate these domains,\n\n578\n00:30:29.010 --> 00:30:30.980\nthere is actually a little dot at the end.\n\n579\n00:30:30.980 --> 00:30:36.680\nAnd that's denoting the root hint servers,\nthat the root of DNS.\n\n580\n00:30:36.680 --> 00:30:40.240\nI don't know, Wes, do you remember the old\nSun Microsystem commercials back before-\n\n581\n00:30:40.240 --> 00:30:41.465\n&gt;&gt; No, that's before my time.\n\n582\n00:30:41.465 --> 00:30:42.600\n[LAUGH]\n&gt;&gt; They had these tv commercials.\n\n583\n00:30:42.600 --> 00:30:45.710\nThey said Sun Microsystems,\nwe put the dot in dot net.\n\n584\n00:30:45.710 --> 00:30:50.420\nAnd they actually started saying, we put\nthe dot in the internet, originally.\n\n585\n00:30:50.420 --> 00:30:53.732\nBecause all the route hint servers\nwere Sun Microsystems servers.\n\n586\n00:30:53.732 --> 00:30:56.521\nAnd not that they own them, other\npeople own them, but the hardware, or\n\n587\n00:30:56.521 --> 00:30:57.680\nSun Microsystems.\n\n588\n00:30:57.680 --> 00:31:00.330\nAnd then over time,\npeople migrated to other hardware.\n\n589\n00:31:00.330 --> 00:31:01.150\nAnd so they can always say,\n\n590\n00:31:01.150 --> 00:31:04.530\nwe put the dot in dot NET because that\nwas the one they still controlled.\n\n591\n00:31:04.530 --> 00:31:07.150\nBut that's all long gone now.\n\n592\n00:31:07.150 --> 00:31:10.230\nBut that dot is the root, and so\nthat shows up in the config files,\n\n593\n00:31:10.230 --> 00:31:11.550\nbecause it actually does exist.\n\n594\n00:31:11.550 --> 00:31:16.111\nBut we don't normally type it, our web\nbrowsers just automatically do it for us.\n\n595\n00:31:16.111 --> 00:31:20.868\nAll right, and I've probably stalled long\nenough that the PTRs have been created in\n\n596\n00:31:20.868 --> 00:31:22.520\nthat reverse look up.\n\n597\n00:31:22.520 --> 00:31:25.040\nSo if I take a look at that one,\nlike if I do,\n\n598\n00:31:25.040 --> 00:31:29.537\nwell here let's just look at at kind of\nhow this is laid out on my file system.\n\n599\n00:31:29.537 --> 00:31:37.140\nThere's that 10.inaddr file and if I\npull that one up and take a look at it.\n\n600\n00:31:37.140 --> 00:31:40.090\nThere's my pointer and\nsee how it is written backwards\n\n601\n00:31:40.090 --> 00:31:43.330\neven though the GUI showed it to me\nforwards, they did write it properly.\n\n602\n00:31:43.330 --> 00:31:45.521\nIn the backside here it's\nwritten backwards and\n\n603\n00:31:45.521 --> 00:31:47.129\nit's mapped to my laptop, right?\n\n604\n00:31:47.129 --> 00:31:49.925\nSo that's what those records are,\nthat's how they work, and\n\n605\n00:31:49.925 --> 00:31:52.540\nwe just punch them in and\nlet them do their thing.\n\n606\n00:31:52.540 --> 00:31:55.770\n&gt;&gt; That's a lot of great information on\nhost records and I could've swore that\n\n607\n00:31:55.770 --> 00:31:58.980\nyou were gonna tell me that those quad-A\nrecords, they were four times better.\n\n608\n00:31:58.980 --> 00:31:59.510\nBut you didn't.\n\n609\n00:31:59.510 --> 00:32:01.240\nThat's how they named them that.\n\n610\n00:32:01.240 --> 00:32:02.241\nBut it does, joking aside,\n\n611\n00:32:02.241 --> 00:32:04.431\nit does look like we're coming\nto the end of another episode.\n\n612\n00:32:04.431 --> 00:32:07.463\nBut before we do, Don,\ndo you have additional words with the host\n\n613\n00:32:07.463 --> 00:32:10.700\nrecords that might help keep us out\nof trouble, or get things right?\n\n614\n00:32:10.700 --> 00:32:15.190\n&gt;&gt; So if you edit the text files directly,\neverything is always done the same way.\n\n615\n00:32:15.190 --> 00:32:18.880\nBut if you use GUIs like I was doing,\nsometimes vendors implement different\n\n616\n00:32:18.880 --> 00:32:21.630\ngraphical user interfaces that put\nrequirements and restrictions and\n\n617\n00:32:21.630 --> 00:32:22.170\nchanges on there.\n\n618\n00:32:22.170 --> 00:32:24.540\nSo always be sure to read\nyour vendor documentation.\n\n619\n00:32:24.540 --> 00:32:29.070\nI'm using a self hosted server,\nif you're doing a hosted server through\n\n620\n00:32:29.070 --> 00:32:32.590\nlike Amazon's AWS or\nsomething like that, like route 53,\n\n621\n00:32:32.590 --> 00:32:36.010\nthey might have even more rules and\neven special features, special records.\n\n622\n00:32:36.010 --> 00:32:40.276\nI know AWS does, you can have your\nrecords point to security groups and\n\n623\n00:32:40.276 --> 00:32:45.287\nall sorts of VPC's and crazy things,\nthat's all stuff that Amazon has added on.\n\n624\n00:32:45.287 --> 00:32:49.419\nThose are host records, but they are not\npart of the standard, so there are ways\n\n625\n00:32:49.419 --> 00:32:53.760\nto extend the functionality of DNS, just\nbe be aware that may not be standardized.\n\n626\n00:32:53.760 --> 00:32:56.873\n&gt;&gt; Well Don, we appreciate taking the time\nto show us all this good information and\n\n627\n00:32:56.873 --> 00:32:58.550\nwe appreciate you the viewer, watching.\n\n628\n00:32:58.550 --> 00:33:01.300\nWe're gonna be go ahead and\nsign out for this one IT ProTV.\n\n629\n00:33:01.300 --> 00:33:03.070\nI've been your host West Brian.\n\n630\n00:33:03.070 --> 00:33:03.720\n&gt;&gt; And I'm Don Pezet.\n\n631\n00:33:03.720 --> 00:33:06.078\n&gt;&gt; And we'll see you next time.\n\n632\n00:33:06.078 --> 00:33:12.117\n[MUSIC]\n\n633\n00:33:12.117 --> 00:33:15.586\n&gt;&gt; Thank you for watching, ITPRO.TV.\n\n",
          "vimeoId": "196614257"
        },
        {
          "description": "In this episode, Wes and Don dive into the world of service locator records commonly called SRV records. They the purpose of the records and how they help us locate services inside and outside of our networks1",
          "length": "1749",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-2-2-SRV_records-120616-PGM.00_32_38_26.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-2-2-SRV_records-120616-PGM.00_32_38_26.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-2-2-SRV_records-120616-PGM.00_32_38_26.Still001-sm.jpg",
          "title": "SRV Records",
          "transcript": "WEBVTT\n\n1\n00:00:00.180 --> 00:00:06.832\nWelcome to ITProTV I'm your\nhost Don Pezet [CROSSTALK]\n\n2\n00:00:06.832 --> 00:00:08.659\n[MUSIC]\n\n3\n00:00:08.659 --> 00:00:11.839\n&gt;&gt; You're watching ITProTV.\n\n4\n00:00:11.839 --> 00:00:14.885\n&gt;&gt; Welcome to another exciting\nepisode here at ITProTV.\n\n5\n00:00:14.885 --> 00:00:16.496\nI'm your host Wes Brian, and\n\n6\n00:00:16.496 --> 00:00:20.177\nin today's episode we're coming\nat you with more DNS tech skills.\n\n7\n00:00:20.177 --> 00:00:20.966\nThat's right.\n\n8\n00:00:20.966 --> 00:00:23.115\nOne of the most important services\nis out there in the Internet.\n\n9\n00:00:23.115 --> 00:00:24.795\nJust about, you know, to find anything.\n\n10\n00:00:24.795 --> 00:00:27.247\nAnd joining us back in the studios\ntoday is none other than Mr.\n\n11\n00:00:27.247 --> 00:00:28.719\nDon Pezet, Don how you doing, sir?\n\n12\n00:00:28.719 --> 00:00:29.654\n&gt;&gt; I'm doing swell, Wes.\n\n13\n00:00:29.654 --> 00:00:33.575\nReady to dive into an unusual\ntype of record for this episode.\n\n14\n00:00:33.575 --> 00:00:36.104\nWe're going to be taking\na look at SRV records,\n\n15\n00:00:36.104 --> 00:00:40.405\nwhich are service locator records, and\nthese are I don't want to call them new,\n\n16\n00:00:40.405 --> 00:00:44.289\nbecause they've been around a long time,\nbut they're newly popular?\n\n17\n00:00:44.289 --> 00:00:48.396\n[LAUGH] Not the best way to describe it,\nbut it's a special type of DNS record that\n\n18\n00:00:48.396 --> 00:00:51.970\nfunctions a little differently than\nthe host record we're used to.\n\n19\n00:00:51.970 --> 00:00:57.914\nThe host record normally is a name,\nmap to an IP, or an IP map to a name.\n\n20\n00:00:57.914 --> 00:01:01.156\nAnd in either scenario you really have\na single destination you're going to,\n\n21\n00:01:01.156 --> 00:01:04.400\na particular server, and\nthat's who we're trying to find.\n\n22\n00:01:04.400 --> 00:01:08.874\nIn SRV records a little different though\ncuz we're not necessarily trying to locate\n\n23\n00:01:08.874 --> 00:01:10.072\na particular server,\n\n24\n00:01:10.072 --> 00:01:13.424\nwe're trying to locate a service\nthat's running on a server.\n\n25\n00:01:13.424 --> 00:01:16.229\nYou might have more than one service\nrunning on the same server and\n\n26\n00:01:16.229 --> 00:01:18.690\nwe need to find them and\nreach out to them and locate them.\n\n27\n00:01:18.690 --> 00:01:22.627\nWell, DNS wasn't really\ndesigned to handle that and so\n\n28\n00:01:22.627 --> 00:01:25.743\nin the early days of\nDNS you couldn't do it.\n\n29\n00:01:25.743 --> 00:01:28.680\nYou could find a server but\nyou couldn't find services on it.\n\n30\n00:01:28.680 --> 00:01:29.860\nAnd let me just give you an example.\n\n31\n00:01:31.130 --> 00:01:35.105\nIn the early days of the world wide web\nthat if you wanted to go to a web server\n\n32\n00:01:35.105 --> 00:01:38.333\nyou needed to know the IP address or\nhost name of the server.\n\n33\n00:01:38.333 --> 00:01:43.860\nAnd you could type in http:// and\nthen punch in the IP or name.\n\n34\n00:01:43.860 --> 00:01:47.691\nWell with SRV records, we could go\nto DNS and we could just say, hey,\n\n35\n00:01:47.691 --> 00:01:49.687\nI don't know who the web server is.\n\n36\n00:01:49.687 --> 00:01:51.924\nCould you give me a list\nof the web servers?\n\n37\n00:01:51.924 --> 00:01:56.350\nGive me a list of each server\nthat's providing the HTTP service.\n\n38\n00:01:56.350 --> 00:01:59.380\nAnd you could pull that information\nback and locate those servers.\n\n39\n00:01:59.380 --> 00:02:01.490\nNow we don't need that for the web,\n\n40\n00:02:01.490 --> 00:02:03.760\nbecause that's kinda\nthe default functionality.\n\n41\n00:02:03.760 --> 00:02:07.040\nBut there's other protocols that are out\nthere that really benefit from this.\n\n42\n00:02:07.040 --> 00:02:10.808\nAnd so we have SRV records\nthat help us to find them.\n\n43\n00:02:10.808 --> 00:02:14.052\nNow SRV records can be a little complex,\nso I want to show you guys a few different\n\n44\n00:02:14.052 --> 00:02:16.680\nexamples and how they can be used and\nhow they can work.\n\n45\n00:02:16.680 --> 00:02:19.945\nBut a key thing to remember is\nthat SRV records are not magic.\n\n46\n00:02:19.945 --> 00:02:22.175\nThey don't just work cuz you created them,\nbut\n\n47\n00:02:22.175 --> 00:02:26.135\nas software clients have\nto expect them to exist.\n\n48\n00:02:26.135 --> 00:02:30.255\nSo if whoever wrote your software isn't\nchecking for srv records it doesn't matter\n\n49\n00:02:30.255 --> 00:02:32.590\nif they exist or not,\nthey're never going to get used.\n\n50\n00:02:32.590 --> 00:02:35.110\nSo make sure that your\nsoftware supports SRV records,\n\n51\n00:02:35.110 --> 00:02:37.410\nbefore you exert a lot of\neffort in creating them.\n\n52\n00:02:37.410 --> 00:02:40.770\nSo, one big example that I have is,\nfor example,\n\n53\n00:02:40.770 --> 00:02:46.040\nMicrosoft Exchange has this\nauto-discovery protocol.\n\n54\n00:02:46.040 --> 00:02:49.300\nWhen you fire up Microsoft Outlook,\nyou have to tell it an email server,\n\n55\n00:02:49.300 --> 00:02:52.140\nyou have to type in, you know,\nthe email server name and so on.\n\n56\n00:02:52.140 --> 00:02:55.470\nWell with auto discovery,\nsomebody can type their email address.\n\n57\n00:02:55.470 --> 00:02:59.251\nSo I'm Don@ITPro.Tv, and\nwe can just go to ITPro.TV and\n\n58\n00:02:59.251 --> 00:03:03.550\nquery and say,\ndo you have an auto discover server?\n\n59\n00:03:03.550 --> 00:03:06.150\nAnd it would return an entry for\nthe auto discover server.\n\n60\n00:03:06.150 --> 00:03:09.230\nAnd then I could get all of my email\nsettings, and automatically configure.\n\n61\n00:03:09.230 --> 00:03:11.710\nAnd not have to bother the end\nuser to put a survey in.\n\n62\n00:03:11.710 --> 00:03:13.120\nBut if you ask an end user.\n\n63\n00:03:13.120 --> 00:03:14.910\nHey, what's your SMTP server?\n\n64\n00:03:14.910 --> 00:03:16.280\nThey don't even know what SMTP is.\n\n65\n00:03:16.280 --> 00:03:17.310\nBetter yet, who the server is.\n\n66\n00:03:17.310 --> 00:03:20.590\nSo they're not gonna know that,\nauto discover helps to configure it.\n\n67\n00:03:20.590 --> 00:03:23.570\nBut Microsoft Outlook knows to look for\nthat.\n\n68\n00:03:23.570 --> 00:03:26.520\nI might be running a third party email\nclient that doesn't know to look for that.\n\n69\n00:03:26.520 --> 00:03:27.410\nAnd now I can't benefit.\n\n70\n00:03:27.410 --> 00:03:29.390\nSo SRV records are not magic.\n\n71\n00:03:29.390 --> 00:03:31.253\nThey do depend on the client to look for\nthem.\n\n72\n00:03:31.253 --> 00:03:34.060\nBut let me show you how to create them and\nget them put in place.\n\n73\n00:03:34.060 --> 00:03:38.600\nSRV records have a particular kind of\na format, a structure that they follow.\n\n74\n00:03:38.600 --> 00:03:43.403\nAnd when we write them in the text\nfile It's actually a little\n\n75\n00:03:43.403 --> 00:03:47.922\nbit involved because if you're\nworking in a text file for\n\n76\n00:03:47.922 --> 00:03:53.116\ndoing the DNS configuration,\nthe entry is really long, right.\n\n77\n00:03:53.116 --> 00:03:56.299\nLet me show you what it looks like,\nwe start by specifying the service.\n\n78\n00:03:56.299 --> 00:03:58.290\nNow the service can be\nany number of things.\n\n79\n00:03:58.290 --> 00:04:02.739\nI mentioned Microsoft's auto discovery, so\nwe always start by specifying the service,\n\n80\n00:04:02.739 --> 00:04:05.029\nand it will be _ followed\nby the service name.\n\n81\n00:04:05.029 --> 00:04:07.200\nNow why an underscore?\n\n82\n00:04:07.200 --> 00:04:10.700\nSo that there's no way to confuse\nthis with a regular domain.\n\n83\n00:04:10.700 --> 00:04:14.760\nRegular domain names are not allowed to\nstart with an underscore, SRV records are.\n\n84\n00:04:14.760 --> 00:04:17.270\nSo underscore and\nthen what the service is.\n\n85\n00:04:17.270 --> 00:04:21.390\nI've been talking about auto discover so\nthat one is actually called _autodiscover.\n\n86\n00:04:21.390 --> 00:04:23.550\nYou might have a different\nservice like sip.\n\n87\n00:04:23.550 --> 00:04:25.960\nFor voice over IP phones, or whatever.\n\n88\n00:04:25.960 --> 00:04:28.210\nYou'll need to find out\nthe official protocol name for it,\n\n89\n00:04:28.210 --> 00:04:30.980\nand then make it underscore,\nand whatever that protocol is.\n\n90\n00:04:30.980 --> 00:04:32.550\nSo mine's autodiscover.\n\n91\n00:04:32.550 --> 00:04:36.976\nThen, we have to tell it\nwhether it's TCP or UDP.\n\n92\n00:04:36.976 --> 00:04:40.016\nWhich transmission protocol where gonna\nuse to talk because we need to give it\n\n93\n00:04:40.016 --> 00:04:41.165\na port number.\n\n94\n00:04:41.165 --> 00:04:43.885\nAnd I might have a TCP port and\na UDP port.\n\n95\n00:04:43.885 --> 00:04:45.935\nWell auto discover uses TCP.\n\n96\n00:04:45.935 --> 00:04:50.550\nThe majority of the things that you\ncreate SRV records for use TCP.\n\n97\n00:04:50.550 --> 00:04:53.952\nBut if you're using SIP, for\nexample, it actually uses udp for\n\n98\n00:04:53.952 --> 00:04:56.855\na lot of what it does, so\nyou'd have to specify _udp.\n\n99\n00:04:56.855 --> 00:04:59.297\nAgain, using the underscore\nto avoid confusion,\n\n100\n00:04:59.297 --> 00:05:02.548\nthat's not just something I do\nthat's part of the of the standard.\n\n101\n00:05:02.548 --> 00:05:03.864\nWe have to do that.\n\n102\n00:05:03.864 --> 00:05:06.579\nAll right, then we follow\nthat up with our domain name.\n\n103\n00:05:06.579 --> 00:05:10.260\nSo, in my scenario I've got lab.itpro.tv,\nright.\n\n104\n00:05:10.260 --> 00:05:12.600\nYou would have whatever\nyour domain happens to be.\n\n105\n00:05:12.600 --> 00:05:16.398\nSo, now if somebody wanted to\nfind an autodiscover server and\n\n106\n00:05:16.398 --> 00:05:21.523\nthey knew to look for it, they could\nquery autodiscover.tcp.lab.itpro.tv.\n\n107\n00:05:21.523 --> 00:05:22.500\nI left the underscores out but\n\n108\n00:05:22.500 --> 00:05:24.700\nthe underscores would be\npart of that query too.\n\n109\n00:05:24.700 --> 00:05:29.180\nAnd when they query that the DNS\nserver will know don't look for\n\n110\n00:05:29.180 --> 00:05:33.930\nan A record cuz this starts with an\nunderscore go and look for an SRV record.\n\n111\n00:05:33.930 --> 00:05:36.660\nAnd the SRV record can return\ninformation about where to go.\n\n112\n00:05:36.660 --> 00:05:38.130\nNow where do we go?\n\n113\n00:05:38.130 --> 00:05:39.250\nThat's what comes up next.\n\n114\n00:05:39.250 --> 00:05:41.560\nWell, technically what comes\nup next is a time to live so\n\n115\n00:05:41.560 --> 00:05:44.960\nlets say I've got the time to live set\nto five minutes or 300 seconds right so\n\n116\n00:05:44.960 --> 00:05:46.400\nI'll just punch in the time to live.\n\n117\n00:05:46.400 --> 00:05:50.396\nIf I don't have a time to live then it'll\nbe the default and that might be left out.\n\n118\n00:05:50.396 --> 00:05:53.500\nAll right, then I'm going to\nfollow that up with a class.\n\n119\n00:05:53.500 --> 00:05:58.140\nNow the class It had a plan way back\nin the very beginning of the Internet,\n\n120\n00:05:58.140 --> 00:05:58.950\nit really doesn't anymore.\n\n121\n00:05:58.950 --> 00:06:01.570\nNow there's just the Internet class,\nso it's gonna be IN.\n\n122\n00:06:01.570 --> 00:06:02.860\nEverything is Internet class.\n\n123\n00:06:02.860 --> 00:06:06.846\nThere's other ones like the Chaos\nclass and other ones that are used for\n\n124\n00:06:06.846 --> 00:06:11.505\ntesting and development, but IN is pretty\nmuch what we always use for SRV records.\n\n125\n00:06:11.505 --> 00:06:14.230\nAll right then, SRV.\n\n126\n00:06:14.230 --> 00:06:15.770\nIt's an SRV record, I have to denote that.\n\n127\n00:06:15.770 --> 00:06:18.700\nWhen we created host records it\nwould have an A right there.\n\n128\n00:06:18.700 --> 00:06:21.370\nHere I have SRV, so\nit knows it's an SRV record.\n\n129\n00:06:21.370 --> 00:06:24.250\nAnd then is where things get a little fun.\n\n130\n00:06:24.250 --> 00:06:28.190\nThe next two values are priority and\nweight.\n\n131\n00:06:28.190 --> 00:06:32.744\nAnd for right now, I'm just gonna\nthrow a one in both of them.\n\n132\n00:06:32.744 --> 00:06:35.467\nI'm gonna come back and revisit that in a\nminute and talk about what priority is and\n\n133\n00:06:35.467 --> 00:06:36.310\nwhat weight is.\n\n134\n00:06:36.310 --> 00:06:39.970\nBut it allows me to basically provide\nmore than one server for a service.\n\n135\n00:06:39.970 --> 00:06:42.922\nYou might do that for load balancing,\nfor redundancy, for performance.\n\n136\n00:06:42.922 --> 00:06:45.448\nThere's any number of reasons why\nyou might have more than one server.\n\n137\n00:06:45.448 --> 00:06:47.837\nI'm just gonna throw ones in there for\nright now.\n\n138\n00:06:47.837 --> 00:06:50.060\nAll right, then, the target.\n\n139\n00:06:50.060 --> 00:06:50.900\nWho is the server?\n\n140\n00:06:50.900 --> 00:06:56.530\nAnd so maybe in my scenario\nit's mail.lab.itpro.tv right?\n\n141\n00:06:56.530 --> 00:06:59.235\nThat right there is an SRV record.\n\n142\n00:06:59.235 --> 00:07:04.827\nAnd if you fire up Microsoft Outlook, it\nknows to look for this record right here.\n\n143\n00:07:04.827 --> 00:07:09.085\nAnd that will direct it over to\nwho I'm trying to communicate to.\n\n144\n00:07:09.085 --> 00:07:12.005\nNow, I did leave one thing out and\nthat's a port number.\n\n145\n00:07:12.005 --> 00:07:13.555\nWe don't always have a port number.\n\n146\n00:07:13.555 --> 00:07:15.415\nSometimes you do, sometimes you don't.\n\n147\n00:07:15.415 --> 00:07:18.595\nIf you have a port number, it'll actually\nbe specified right before this and\n\n148\n00:07:18.595 --> 00:07:22.600\nin the case of auto-discover, it's\nactually expecting this to be web traffic.\n\n149\n00:07:22.600 --> 00:07:25.833\nAnd so the port would just be,\nactually I think it's 443.\n\n150\n00:07:25.833 --> 00:07:27.427\nI think it's SSL.\n\n151\n00:07:27.427 --> 00:07:30.223\nThis is where I shouldn't be thinking,\nI should go and check the documentation on\n\n152\n00:07:30.223 --> 00:07:32.951\nMicrosoft's side to find out what it is\nto make sure I get the right port number.\n\n153\n00:07:32.951 --> 00:07:37.204\nBut every service has a port number and\nso you specify it here.\n\n154\n00:07:37.204 --> 00:07:39.654\nIf I don't specify it, then it's\ngonna be up to my software to try and\n\n155\n00:07:39.654 --> 00:07:40.880\nguess what it is.\n\n156\n00:07:40.880 --> 00:07:42.280\nIt'll probably do just fine.\n\n157\n00:07:42.280 --> 00:07:43.724\nBut we can specify right there.\n\n158\n00:07:43.724 --> 00:07:46.400\nSo this is the target,\nthe host name and the port.\n\n159\n00:07:46.400 --> 00:07:48.160\nAnd that's really the big difference.\n\n160\n00:07:48.160 --> 00:07:50.660\nWith an A record you can\nprovide a hostname but\n\n161\n00:07:50.660 --> 00:07:52.580\nyou can't provide a port number can you?\n\n162\n00:07:52.580 --> 00:07:54.920\nSo what if you're running your web\nserver on a non-standard port?\n\n163\n00:07:54.920 --> 00:07:56.861\nI'm running it on port 8080.\n\n164\n00:07:56.861 --> 00:08:03.289\nWell, the clients who have to know that,\nthey have to go to www.donssite.com :8080.\n\n165\n00:08:03.289 --> 00:08:05.681\nI can't put it in DNS,\nhey, you run on 8080.\n\n166\n00:08:05.681 --> 00:08:07.770\nBut with SRV records, you can.\n\n167\n00:08:07.770 --> 00:08:10.200\nYou can actually go a step further and\nprovide a port number.\n\n168\n00:08:10.200 --> 00:08:12.550\nBut most web browsers aren't looking for\nSRV records.\n\n169\n00:08:12.550 --> 00:08:13.480\nThey don't know to do that.\n\n170\n00:08:13.480 --> 00:08:15.419\nSo there's not a good way to do it for\nweb servers.\n\n171\n00:08:17.330 --> 00:08:20.560\nAll right, now that's what it's gonna\nlook like in the DNS configuration file.\n\n172\n00:08:21.560 --> 00:08:23.671\nIt's a little different if\nyou're using a GUI, right.\n\n173\n00:08:23.671 --> 00:08:27.337\nSo if I go to Microsoft's DNS\nutility here,\n\n174\n00:08:27.337 --> 00:08:32.900\nif I go to create a new record,\nwell I don't even see SRV in my list.\n\n175\n00:08:32.900 --> 00:08:36.760\nI need to go to other new records,\nand I'll find SRV in here.\n\n176\n00:08:36.760 --> 00:08:38.650\nIt'll be a service location.\n\n177\n00:08:38.650 --> 00:08:39.350\nSRV record, right?\n\n178\n00:08:40.660 --> 00:08:44.840\nAnd they're not very popular, so\nyou don't see them in the main menu list.\n\n179\n00:08:44.840 --> 00:08:47.480\nBut they are used pretty frequently\n\n180\n00:08:47.480 --> 00:08:49.260\nwhen you have software that\ntakes advantage of it.\n\n181\n00:08:49.260 --> 00:08:50.960\nIt's just not something you\ncreate every single day, so\n\n182\n00:08:50.960 --> 00:08:52.930\nthat's why they kinda tucked it away.\n\n183\n00:08:52.930 --> 00:08:57.870\nAnd when I go to create that, here I can\nspecify service, protocol, priority,\n\n184\n00:08:57.870 --> 00:09:02.270\nwait, port number, host, all the things I\njust showed you, I can specify right here.\n\n185\n00:09:02.270 --> 00:09:07.360\nSo if my service is auto discover, or\nhere they've got finger, FTP, HTTP, and so\n\n186\n00:09:07.360 --> 00:09:12.010\non, most of these protocols have never\nbeen updated to use SRV records so\n\n187\n00:09:12.010 --> 00:09:13.140\nit doesn't really matter.\n\n188\n00:09:13.140 --> 00:09:16.970\nBut I was doing auto discover,\nis what I was doing, right.\n\n189\n00:09:16.970 --> 00:09:20.360\nAnd the protocol I'm using to connect,\nunderscore TCP.\n\n190\n00:09:20.360 --> 00:09:23.360\nThe priority and weight,\nI just threw a 1 in.\n\n191\n00:09:23.360 --> 00:09:30.424\nThe port number, 443, and\nthe host was mail.lab.itpro.tv.\n\n192\n00:09:30.424 --> 00:09:34.530\nAnd if I want to set that time to live,\nI did 5 minutes.\n\n193\n00:09:36.040 --> 00:09:39.060\nSo there I'm doing exactly what\nI was just reading out loud.\n\n194\n00:09:39.060 --> 00:09:41.120\nBut I did it via the GUI.\n\n195\n00:09:41.120 --> 00:09:45.110\nAnd it's going to build that record for\nme and get that setup, all right.\n\n196\n00:09:45.110 --> 00:09:47.660\nNow that's going to get written to the\ntext configuration on this server in a few\n\n197\n00:09:47.660 --> 00:09:48.790\nminutes and we'll take a look at it and\n\n198\n00:09:48.790 --> 00:09:52.650\nit should look exactly like what I had\nin Notepad, but there's that record.\n\n199\n00:09:52.650 --> 00:09:56.970\nNow my software needs to know to\nlook that up and it may or may not.\n\n200\n00:09:56.970 --> 00:09:59.430\nBut look what it did here in the domain.\n\n201\n00:09:59.430 --> 00:10:05.189\nWhen I got to lab.itpro.tv,\nit created a sub-domain called _tcp.\n\n202\n00:10:05.189 --> 00:10:09.620\nAnd I might have an _udp also if I've got\nother ones that are published that way.\n\n203\n00:10:09.620 --> 00:10:13.970\nAnd the record is published inside\nof there because of that sub domain.\n\n204\n00:10:13.970 --> 00:10:17.790\nBecause of the protocol that I\nspecified as part of the srv.\n\n205\n00:10:17.790 --> 00:10:20.570\nBut there is the record that we can\nalways go in and edit it and so\n\n206\n00:10:20.570 --> 00:10:21.760\non and get that put in place.\n\n207\n00:10:21.760 --> 00:10:24.520\nNow while were waiting on that\nto write on the hard drive\n\n208\n00:10:24.520 --> 00:10:26.060\nlets talk about priority and\nwait a little bit.\n\n209\n00:10:27.320 --> 00:10:31.730\nI might have more than one server for\na particular solution, so lets say for\n\n210\n00:10:31.730 --> 00:10:37.340\nexample, let's do sip right,\nsip is used for\n\n211\n00:10:37.340 --> 00:10:42.530\nvoice over IP and if your PBX goes\ndown people can't make phone calls.\n\n212\n00:10:42.530 --> 00:10:44.310\nThat's bad, so you'll probably have two.\n\n213\n00:10:44.310 --> 00:10:45.520\nA lot of people do.\n\n214\n00:10:45.520 --> 00:10:47.770\nSo I have a backup for my main one.\n\n215\n00:10:47.770 --> 00:10:50.270\nIf I have a primary and a backup,\n\n216\n00:10:50.270 --> 00:10:55.010\nI can use the priority value to specify\nwho's the primary and who's the backup.\n\n217\n00:10:55.010 --> 00:10:55.960\nIt's just a number.\n\n218\n00:10:55.960 --> 00:10:57.170\nThe lower number wins.\n\n219\n00:10:57.170 --> 00:10:59.878\nSo if somebody has a priority of zero,\nthey're gonna be the best.\n\n220\n00:10:59.878 --> 00:11:03.400\nIf somebody has a priority of 254,\nthey're gonna be the worst, right?\n\n221\n00:11:03.400 --> 00:11:04.320\nI think 255 is the highest.\n\n222\n00:11:04.320 --> 00:11:05.860\nI have to look that up.\n\n223\n00:11:05.860 --> 00:11:07.570\nBut anyhow, a really high number, right?\n\n224\n00:11:07.570 --> 00:11:09.270\nSo that's gonna be the worst.\n\n225\n00:11:09.270 --> 00:11:12.850\nIf I have two with an equal priority,\nI'm gonna load bounce.\n\n226\n00:11:12.850 --> 00:11:14.656\nI'm gonna use them both, right?\n\n227\n00:11:14.656 --> 00:11:18.900\nBut if I want a primary and a back up,\nwhat I normally do is use ten and 20.\n\n228\n00:11:18.900 --> 00:11:20.300\nNow why do I use ten and 20?\n\n229\n00:11:20.300 --> 00:11:22.150\nI like to leave room.\n\n230\n00:11:22.150 --> 00:11:25.760\nIf I want to bring in a new server,\nI can make it five and now it's the best.\n\n231\n00:11:25.760 --> 00:11:30.055\nIf I had made my best one zero before,\nI can't make anything better than zero, so\n\n232\n00:11:30.055 --> 00:11:31.201\nnow it makes it hard.\n\n233\n00:11:31.201 --> 00:11:32.585\nI gotta go in and adjust other numbers.\n\n234\n00:11:32.585 --> 00:11:34.445\nI like to leave a bit of room,\nso I do ten and 20.\n\n235\n00:11:34.445 --> 00:11:37.295\nSo let's say I wanna set this up for\nsip, I'm gonna come in here and\n\n236\n00:11:37.295 --> 00:11:40.335\ncreate a new record.\n\n237\n00:11:40.335 --> 00:11:41.815\nSo I'm gonna do a new SRV record.\n\n238\n00:11:43.650 --> 00:11:48.800\nAnd when I create it, well my\nservice is going to be _sip, right?\n\n239\n00:11:48.800 --> 00:11:52.020\nAnd a lot of voice over IP phones\nare set to be able to look for this.\n\n240\n00:11:52.020 --> 00:11:56.340\nSo I could plug a phone in, it gets a DHCP\naddress, and then it goes to query to find\n\n241\n00:11:56.340 --> 00:12:00.890\nwhere the PBX is, and it looks for\na sip record inside of\n\n242\n00:12:00.890 --> 00:12:05.040\nwhatever domain suffix DHCP gave us,\nright, the phones do this automatically.\n\n243\n00:12:05.040 --> 00:12:08.060\nFor the protocol,\nwell sip is a little bit weird.\n\n244\n00:12:08.060 --> 00:12:11.970\nIt can use UDP for darn near everything,\nbut a lot of phones have switched over\n\n245\n00:12:11.970 --> 00:12:14.620\nto TLS, so it's encrypted,\nwe wanna encrypt our phone calls.\n\n246\n00:12:14.620 --> 00:12:17.200\nSo I'm gonna do _tls on that one.\n\n247\n00:12:17.200 --> 00:12:18.290\nThen the priority.\n\n248\n00:12:18.290 --> 00:12:20.060\nThis is gonna be my primary PBX.\n\n249\n00:12:20.060 --> 00:12:21.725\nI'm gonna give it a priority of 10.\n\n250\n00:12:22.830 --> 00:12:25.640\nThe weight I'll just leave it 0 I\ndon't care about weight right now.\n\n251\n00:12:25.640 --> 00:12:27.790\nAnd then I'll get to my port number.\n\n252\n00:12:27.790 --> 00:12:29.650\nSip uses port 5060.\n\n253\n00:12:29.650 --> 00:12:31.890\nAnd then I'll specify the host.\n\n254\n00:12:31.890 --> 00:12:37.454\nAnd so\nmaybe this is pbx01.lab.itpro.tv right,\n\n255\n00:12:37.454 --> 00:12:41.650\nwhich is a record that doesn't exist but\nit doesn't check for that.\n\n256\n00:12:41.650 --> 00:12:43.930\nI'd obviously want that server to exist.\n\n257\n00:12:43.930 --> 00:12:47.899\nAnd I can tweak my time to live,\nif I want.\n\n258\n00:12:47.899 --> 00:12:49.140\nAnd now I've got that one set.\n\n259\n00:12:49.140 --> 00:12:51.940\nNow before I finish here,\nI'm gonna create another record.\n\n260\n00:12:51.940 --> 00:12:53.880\nAnd on this one,\nI'm gonna do the same basic thing.\n\n261\n00:12:53.880 --> 00:12:55.640\nI'm gonna point to _sip.\n\n262\n00:12:55.640 --> 00:12:56.460\nIt's gonna be TLS.\n\n263\n00:12:56.460 --> 00:13:00.600\nAnd I'm gonna do a priority\nof 20 this time.\n\n264\n00:13:00.600 --> 00:13:02.320\nRight, I did 10 last time,\nwe're doing 20 this time.\n\n265\n00:13:02.320 --> 00:13:09.250\n5060 for the port number, and\nthe host is gonna be pbx02.lab.itpro.tv.\n\n266\n00:13:09.250 --> 00:13:09.750\nRight.\n\n267\n00:13:09.750 --> 00:13:14.593\nI did pbx01, this is pbx02,\nthis is going to be my back up.\n\n268\n00:13:14.593 --> 00:13:18.368\nAnd I'll go ahead and\nget that set, there we go.\n\n269\n00:13:18.368 --> 00:13:20.325\nSo now I've got two records.\n\n270\n00:13:20.325 --> 00:13:23.782\nNow when I look at\nthe records their both _sip.\n\n271\n00:13:23.782 --> 00:13:27.510\nWith an a record,\nI'd be round robining right now.\n\n272\n00:13:27.510 --> 00:13:30.580\nYou do a lookup on one, and\nit kind of rotates through\n\n273\n00:13:30.580 --> 00:13:32.380\nthe two different addresses\nto load balance people.\n\n274\n00:13:33.730 --> 00:13:37.430\nBut SRV records don't do that,\nunless there's a tie on priority.\n\n275\n00:13:37.430 --> 00:13:41.308\nI don't have a tie on priority,\none is ten, one is twenty.\n\n276\n00:13:41.308 --> 00:13:45.920\nEveryone, a 100% of my people,\nare going to go to the first server.\n\n277\n00:13:45.920 --> 00:13:48.360\nAnd none, zero of my people,\n\n278\n00:13:48.360 --> 00:13:51.440\nare going to go to the second server,\nunless the first one fails.\n\n279\n00:13:51.440 --> 00:13:55.310\nIf the first one fails,\nthen they'll go to the second one, right?\n\n280\n00:13:55.310 --> 00:13:58.560\nSo the phones, my VOIP phones,\nwhen I power them on,\n\n281\n00:13:58.560 --> 00:14:02.610\nnow know that this is the PBX they need\nto connect to unless there's an outage.\n\n282\n00:14:02.610 --> 00:14:05.950\nThen they'll try the second one, and\nthat priority is what's powering that.\n\n283\n00:14:05.950 --> 00:14:08.150\nSo priority is kind of important\nif you have more than one server.\n\n284\n00:14:08.150 --> 00:14:12.220\nIf you only have one server, priority\nhas no bearing on anything whatsoever.\n\n285\n00:14:12.220 --> 00:14:13.920\nIf you only have one server,\nwho cares, right?\n\n286\n00:14:13.920 --> 00:14:15.200\nMy auto discover that I made earlier?\n\n287\n00:14:15.200 --> 00:14:17.340\nI've only got one server.\n\n288\n00:14:17.340 --> 00:14:19.340\nSo I set that priority to 1.\n\n289\n00:14:19.340 --> 00:14:20.430\nI can set it to whatever I want.\n\n290\n00:14:20.430 --> 00:14:21.560\nWell, within limits.\n\n291\n00:14:21.560 --> 00:14:23.410\nI forget what the maximum is on the thing.\n\n292\n00:14:23.410 --> 00:14:24.810\nWell, we'll see what it\ncomplains about here.\n\n293\n00:14:26.500 --> 00:14:27.640\nYeah, apparently I exceeded it.\n\n294\n00:14:27.640 --> 00:14:28.950\nI feel like it's 255.\n\n295\n00:14:28.950 --> 00:14:31.275\nLet's see if I can do that one.\n\n296\n00:14:31.275 --> 00:14:32.490\nIt took that.\n\n297\n00:14:32.490 --> 00:14:34.846\nBut I can set it something high and\nit really doesn't matter,\n\n298\n00:14:34.846 --> 00:14:35.990\ncuz there is no other server.\n\n299\n00:14:35.990 --> 00:14:37.130\nThere's nobody that's better.\n\n300\n00:14:37.130 --> 00:14:38.390\nThis is the only one.\n\n301\n00:14:38.390 --> 00:14:41.300\nSo I can tweak that value\nto whatever I want, and\n\n302\n00:14:41.300 --> 00:14:42.860\npeople are still going\nto come to this server.\n\n303\n00:14:42.860 --> 00:14:44.700\nIt's not really gonna make a difference.\n\n304\n00:14:44.700 --> 00:14:48.200\nBut if I have more than one server,\njust remember that priority\n\n305\n00:14:48.200 --> 00:14:51.300\nis how we control who's the primary and\nwho are the backups.\n\n306\n00:14:51.300 --> 00:14:56.040\nAnd it will not go to the backups unless\nthe priority one the main one is down.\n\n307\n00:14:56.040 --> 00:14:59.110\nAnd the lower number wins so\nten is better than 20, all right.\n\n308\n00:15:00.830 --> 00:15:03.180\nNow what about weight.\n\n309\n00:15:03.180 --> 00:15:08.450\nWeight is the second one and weight only\ncomes into play if there's a tie right.\n\n310\n00:15:08.450 --> 00:15:11.340\nI don't have a tie, so weight's\nbeing ignored I left mine at zero.\n\n311\n00:15:11.340 --> 00:15:13.480\nThat's fine,\nit's not gonna have any bearing.\n\n312\n00:15:13.480 --> 00:15:16.970\nBut if priority has a tie\nthen we move to weight.\n\n313\n00:15:16.970 --> 00:15:20.360\nAnd what weight does is it says hey,\nyou're gonna load balance.\n\n314\n00:15:20.360 --> 00:15:22.240\nSo how do I load balance?\n\n315\n00:15:22.240 --> 00:15:23.710\nDo I load balance evenly?\n\n316\n00:15:23.710 --> 00:15:27.035\nIn my scenario, 50% of the traffic to one,\n50% to the other, or\n\n317\n00:15:27.035 --> 00:15:28.535\ndo we load balance unevenly?\n\n318\n00:15:28.535 --> 00:15:29.075\nRight.\n\n319\n00:15:29.075 --> 00:15:30.735\nWeight will allow us to do that.\n\n320\n00:15:30.735 --> 00:15:32.425\nLet me give you an example.\n\n321\n00:15:32.425 --> 00:15:33.465\nPuppet.\n\n322\n00:15:33.465 --> 00:15:36.025\nPuppet is an automation\nsoftware suite out there.\n\n323\n00:15:36.025 --> 00:15:38.975\nA lot of people use it for\nrapidly deploying servers.\n\n324\n00:15:38.975 --> 00:15:42.555\nIf you're in Amazon Web Services or\nMicrosoft Azure, Puppet run's great.\n\n325\n00:15:42.555 --> 00:15:44.110\nReally automates deployments.\n\n326\n00:15:44.110 --> 00:15:45.930\nAnd it can use SRV records.\n\n327\n00:15:45.930 --> 00:15:49.460\nSo that when your clients fire up, they\ncan find the puppet server that manages,\n\n328\n00:15:49.460 --> 00:15:50.940\nthey call them puppet masters.\n\n329\n00:15:50.940 --> 00:15:52.748\nSo what if I have three puppet masters?\n\n330\n00:15:52.748 --> 00:15:55.072\nFor redundancy and for performance, right?\n\n331\n00:15:55.072 --> 00:15:56.813\nPuppet masters can get\nreally busy sometimes.\n\n332\n00:15:56.813 --> 00:15:58.926\nSo I have three puppet masters.\n\n333\n00:15:58.926 --> 00:16:01.101\nWell, I can come in and\nI can define those, so\n\n334\n00:16:01.101 --> 00:16:04.150\nI'm gonna go back up,\nthey're gonna be tcp records, right?\n\n335\n00:16:04.150 --> 00:16:08.592\nSo, I'm gonna create a new other record.\n\n336\n00:16:08.592 --> 00:16:12.028\nI'm gonna come in here and\ntell it I'm doing an SRV.\n\n337\n00:16:12.028 --> 00:16:15.638\nAnd the protocol is x-puppet.\n\n338\n00:16:15.638 --> 00:16:17.470\nSo, I'm gonna create that entry.\n\n339\n00:16:17.470 --> 00:16:21.070\nI'm gonna do _tcp,\ncuz that's what it uses.\n\n340\n00:16:21.070 --> 00:16:25.160\nFor the priority, I'm gonna have three\nservers, but I want them all active.\n\n341\n00:16:25.160 --> 00:16:26.490\nSo I want them all to\nhave the same priority.\n\n342\n00:16:26.490 --> 00:16:27.910\nI'm just gonna leave it zero, right?\n\n343\n00:16:28.980 --> 00:16:31.970\nIn real life, I probably wouldn't, I\nprobably would put them all at ten anyway.\n\n344\n00:16:31.970 --> 00:16:33.790\nAgain, just cuz I'd like\nto have a little more room.\n\n345\n00:16:33.790 --> 00:16:36.840\nSo, maybe there's an emergency going on,\nthose servers are damaged,\n\n346\n00:16:36.840 --> 00:16:39.240\nI need to get everybody\nredirected to a new server.\n\n347\n00:16:39.240 --> 00:16:43.060\nI need to get somebody a priority\nbetter than ten, and if it's zero,\n\n348\n00:16:43.060 --> 00:16:46.060\nI can't do better than zero, so\nI've kind of left myself in a lurch.\n\n349\n00:16:46.060 --> 00:16:48.271\nSo I always like to leave\na little bit of room there.\n\n350\n00:16:48.271 --> 00:16:50.729\nAnd then on the weight,\nI can start to specify that now.\n\n351\n00:16:50.729 --> 00:16:53.239\nFor just for a moment,\nI'm gonna leave it at 0.\n\n352\n00:16:53.239 --> 00:16:55.530\nI'm gonna come back and\nfix that here in a minute, all right?\n\n353\n00:16:55.530 --> 00:16:59.230\nAnd then I need to specify my puppet port,\nwhich is, I can't remember.\n\n354\n00:16:59.230 --> 00:17:02.150\nI got it written down, 8140, that'll help.\n\n355\n00:17:02.150 --> 00:17:03.900\nAnd then I can start to\nspecify who that host is.\n\n356\n00:17:03.900 --> 00:17:06.580\nSo maybe I've got pmaster01.lab.itprotv,\nI can\n\n357\n00:17:06.580 --> 00:17:11.562\nprobably come up with a better name than\nthat, but we'll save that for another day.\n\n358\n00:17:11.562 --> 00:17:13.740\nSo now I can go in, and\nI can create the other two.\n\n359\n00:17:13.740 --> 00:17:15.120\nSo I'm gonna have another one.\n\n360\n00:17:15.120 --> 00:17:20.201\nThis will be xpuppettcp, priority of 10,\n\n361\n00:17:20.201 --> 00:17:27.190\n8140, and\nthis will be pmaster02.lab.itpro.tv.\n\n362\n00:17:27.190 --> 00:17:33.764\nAnd last one, _x-puppet,\n\n363\n00:17:33.764 --> 00:17:39.690\n_tcp, priority of 10, port number 8140.\n\n364\n00:17:39.690 --> 00:17:42.630\nAnd the port numbers might actually be\ndifferent for some of these servers.\n\n365\n00:17:42.630 --> 00:17:46.200\nOne server might be on 8140, and the other\nserver might be on 8141, you can do that.\n\n366\n00:17:46.200 --> 00:17:49.320\nThey can be different port numbers,\ncuz we're doing the lookup\n\n367\n00:17:49.320 --> 00:17:51.710\nagainst the service name,\nnot a lookup against the fort number.\n\n368\n00:17:51.710 --> 00:17:54.900\nSo, those don't have to match,\neven though that they usually do.\n\n369\n00:17:54.900 --> 00:17:58.505\nSo, this should be pmaster03.lab.itprotv.\n\n370\n00:17:58.505 --> 00:18:03.407\nOkay, so now that that's done,\nI can go into my tcp folder,\n\n371\n00:18:03.407 --> 00:18:07.010\nand there's my three x puppets.\n\n372\n00:18:07.010 --> 00:18:10.750\nThey've all got a priority of ten,\nso I have a three way tie.\n\n373\n00:18:10.750 --> 00:18:14.150\nWhoops, no I don't, I've screwed up that\nlast one and gave it a priority of one, so\n\n374\n00:18:14.150 --> 00:18:15.130\nlet me fix that real quick.\n\n375\n00:18:16.180 --> 00:18:17.820\nThere we go, now I've got a three way tie.\n\n376\n00:18:17.820 --> 00:18:21.170\nThey've all got a priority of ten\nit's gonna evenly load balance,\n\n377\n00:18:21.170 --> 00:18:23.180\nit's gonna round robin\nbetween these three, right?\n\n378\n00:18:23.180 --> 00:18:26.254\nPeople are gonna spread across all three,\nbut I don't want that.\n\n379\n00:18:26.254 --> 00:18:29.274\nMaybe server one is awesome.\n\n380\n00:18:29.274 --> 00:18:32.961\nIt's got 128 gigs of RAM,\nit's got a giant SSD array inside of it,\n\n381\n00:18:32.961 --> 00:18:38.090\nit's got multiple network adapters,\nit's super blazing fast, it's great.\n\n382\n00:18:38.090 --> 00:18:42.200\nMeanwhile, server two and server three,\nthey're kinda mediocre, right?\n\n383\n00:18:42.200 --> 00:18:47.450\nIn fact, maybe server two and server three\nare only half the power of server one.\n\n384\n00:18:47.450 --> 00:18:52.045\nSo, I want 50% of my traffic\nto go to pmaster01 and\n\n385\n00:18:52.045 --> 00:18:57.280\n25% of my traffic to go to pmaster02 and\n25% to pmaster03.\n\n386\n00:18:57.280 --> 00:18:59.260\nI wanna divide it up like that, okay.\n\n387\n00:18:59.260 --> 00:19:02.210\nWell, wait is what determines that.\n\n388\n00:19:02.210 --> 00:19:05.410\nNow, you can write wait\ntwo different ways.\n\n389\n00:19:05.410 --> 00:19:07.990\nIt really just looks at whatever\nnumber you put in there, and\n\n390\n00:19:07.990 --> 00:19:09.830\nbalances proportions based on that.\n\n391\n00:19:09.830 --> 00:19:14.072\nSo, if I want 50% of my traffic\ngoing to one, and 25% to another,\n\n392\n00:19:14.072 --> 00:19:18.290\n25% to another,\nI'll normally write percentages in here.\n\n393\n00:19:18.290 --> 00:19:21.517\nI'll come in and I'll say,\nI want 50% going to this server, so\n\n394\n00:19:21.517 --> 00:19:23.200\nI'll put a 50 in for the weight.\n\n395\n00:19:23.200 --> 00:19:30.561\nAnd I want 25% going to this guy, so\nI'll put in 25, and 25% for the last guy.\n\n396\n00:19:30.561 --> 00:19:32.659\nAnd I'll put in 25, there.\n\n397\n00:19:32.659 --> 00:19:35.889\nSo now I've got 50, 25, 25.\n\n398\n00:19:35.889 --> 00:19:40.190\nHalf my traffic will go to the first one,\n25% to the second one, 25% to the third.\n\n399\n00:19:40.190 --> 00:19:43.320\nNow I've got uneven load balancing\nhappening here, which is great, right?\n\n400\n00:19:43.320 --> 00:19:46.618\nAnd I didn't even have to have\na hardware load balancer for it.\n\n401\n00:19:46.618 --> 00:19:49.471\nBut what I'm writing there is\nhuman-readable, it's the way I do it, so\n\n402\n00:19:49.471 --> 00:19:50.816\nin real life, that's how I do it.\n\n403\n00:19:50.816 --> 00:19:55.846\nBut if you go and break out the actual\nstandard, the RFC which I can't\n\n404\n00:19:55.846 --> 00:20:02.120\nremember offhand, but if you go and read\nthe RFC, weight doesn't max out at 100.\n\n405\n00:20:02.120 --> 00:20:03.580\nYou can have numbers higher than 100.\n\n406\n00:20:03.580 --> 00:20:05.660\nDoesn't make a whole lot of sense,\ndoes it?\n\n407\n00:20:05.660 --> 00:20:10.594\nBut if I came in, and I put 100 for\nthe first server, and\n\n408\n00:20:10.594 --> 00:20:15.810\n50 for the second one,\nand 50 for the third one,\n\n409\n00:20:15.810 --> 00:20:20.050\nI know what you're thinking,\nthat adds up to 200%.\n\n410\n00:20:20.050 --> 00:20:23.620\nI just doubled my bandwidth just in DNS,\nthat's awesome.\n\n411\n00:20:23.620 --> 00:20:27.510\nWell, what actually happens is it\ntakes these three numbers, and\n\n412\n00:20:27.510 --> 00:20:31.560\nit looks at them in perspective\nof the whole, right?\n\n413\n00:20:31.560 --> 00:20:33.050\nSo, it just divides them out,\n\n414\n00:20:33.050 --> 00:20:36.420\ntakes an average of them and\nfigures out where they're gonna be.\n\n415\n00:20:36.420 --> 00:20:43.450\nSo, at 100, this one is gonna get twice as\nmuch traffic than somebody at 50, right?\n\n416\n00:20:43.450 --> 00:20:47.450\nAnd so, by getting twice as much traffic,\nit now is getting 50% of the traffic,\n\n417\n00:20:47.450 --> 00:20:48.540\nthis one's getting 25,\n\n418\n00:20:48.540 --> 00:20:51.340\nthis one's getting 25 even though\nthe numbers don't work out now.\n\n419\n00:20:51.340 --> 00:20:52.975\nIt would be crazy to go and\nwrite stuff like this.\n\n420\n00:20:52.975 --> 00:20:58.720\nTechnically, you could write it as 2,\n1, and 1.\n\n421\n00:20:58.720 --> 00:21:00.980\nThat would achieve the exact same thing,\nright?\n\n422\n00:21:00.980 --> 00:21:03.220\n2, 1, and 1 adds up to 4.\n\n423\n00:21:03.220 --> 00:21:06.920\nThis one's gonna get 2 out of 4,\nor 50% of the traffic.\n\n424\n00:21:06.920 --> 00:21:09.674\nThis one's gonna get 1 out of 4,\nor 25% of the traffic, and\n\n425\n00:21:09.674 --> 00:21:12.237\nthis one will get one out of four,\nor 25% of the traffic.\n\n426\n00:21:12.237 --> 00:21:13.350\nYou can write it this way.\n\n427\n00:21:13.350 --> 00:21:15.096\nThat's what the standard says.\n\n428\n00:21:15.096 --> 00:21:19.220\nBut every sane DNS admin out there just\ntreats it as a percentage, and says,\n\n429\n00:21:19.220 --> 00:21:20.457\nall right, screw it.\n\n430\n00:21:20.457 --> 00:21:25.110\nI'm gonna put 50% and 25% and\nactually make it human readable.\n\n431\n00:21:25.110 --> 00:21:27.460\nSo, that's what I do too,\nand that usually works.\n\n432\n00:21:27.460 --> 00:21:29.476\nBut I just wanted to show you\nthat it doesn't have to match up.\n\n433\n00:21:29.476 --> 00:21:31.507\nSo, if the numbers don't add up to a 100?\n\n434\n00:21:31.507 --> 00:21:36.108\nBe careful, cuz it's gonna correct for\nthat, right, if I did 50 and 25, and\n\n435\n00:21:36.108 --> 00:21:38.855\nstopped that does not add up to 100,\ndoes it?\n\n436\n00:21:38.855 --> 00:21:39.851\nIt adds up to 75.\n\n437\n00:21:39.851 --> 00:21:44.788\nWell, the 50 will actually get 66% of\nmy traffic, two-thirds of the traffic.\n\n438\n00:21:44.788 --> 00:21:48.505\nAnd then the 25 would get 33% of\nthe traffic, it would get one-third.\n\n439\n00:21:48.505 --> 00:21:51.175\nBecause two-thirds and\none-third, that adds up to 100.\n\n440\n00:21:51.175 --> 00:21:54.470\nOr 100% or a full,\nthat's the way that it averages out.\n\n441\n00:21:54.470 --> 00:21:56.350\nSo, SRV records do that.\n\n442\n00:21:56.350 --> 00:22:02.150\nRemember that priority, that's who\nwe go to first, who's our primary.\n\n443\n00:22:02.150 --> 00:22:07.650\nAnd then, wait is if there's more than one\nprimary, how do we balance across them.\n\n444\n00:22:07.650 --> 00:22:10.260\nAnd you may have a super\nmixture of these things,\n\n445\n00:22:10.260 --> 00:22:14.360\nwhere you've got five different servers.\n\n446\n00:22:14.360 --> 00:22:16.740\nTwo that are primary,\nthree that are backup.\n\n447\n00:22:16.740 --> 00:22:18.410\nAnd you're load balancing\nagainst the primary, and\n\n448\n00:22:18.410 --> 00:22:20.070\nyou're load balancing against the backup.\n\n449\n00:22:20.070 --> 00:22:21.720\nYou can certainly have that.\n\n450\n00:22:21.720 --> 00:22:24.998\nI might want everybody to go to pmaster01,\nright?\n\n451\n00:22:24.998 --> 00:22:30.682\nSo, I might give it a priority of ten, and\nit's weight really isn't gonna matter.\n\n452\n00:22:30.682 --> 00:22:33.040\nI'll just zero it out, right?\n\n453\n00:22:33.040 --> 00:22:38.537\nI'll take the other two guys, and\nI'm gonna bump their priority up to 20,\n\n454\n00:22:38.537 --> 00:22:41.084\nand I'll set their weight to 50.\n\n455\n00:22:41.084 --> 00:22:43.362\nSo, I'm gonna go to priority,\nzoom out a little bit.\n\n456\n00:22:43.362 --> 00:22:44.928\nThis is driving me crazy.\n\n457\n00:22:44.928 --> 00:22:47.612\nSet their priority to 20,\nand their weight to 50.\n\n458\n00:22:47.612 --> 00:22:49.668\nAnd what's gonna happen is,\n\n459\n00:22:49.668 --> 00:22:54.190\nall of my puppet traffic Is\ngoing to go to pmaster01.\n\n460\n00:22:54.190 --> 00:22:57.108\nPmaster01 has a priority of 10.\n\n461\n00:22:57.108 --> 00:23:02.081\nBut if pmaster01 fails,\nwill fail over to pmaster02 and pmaster03.\n\n462\n00:23:02.081 --> 00:23:04.190\nMaybe those are older servers\nthey had laying around.\n\n463\n00:23:04.190 --> 00:23:06.800\nI don't want people going there,\nnormally, but they are there.\n\n464\n00:23:06.800 --> 00:23:10.130\nAnd I'll now split my\ntraffic across those two\n\n465\n00:23:10.130 --> 00:23:13.410\nto lighten the load on them a little bit,\ncuz they are older servers, right?\n\n466\n00:23:13.410 --> 00:23:17.240\nSo now I've created a balance\nwhere I'm using priority and\n\n467\n00:23:17.240 --> 00:23:19.750\nweight to achieve my goals, all right?\n\n468\n00:23:19.750 --> 00:23:21.840\nSo, SRV records are very powerful,\n\n469\n00:23:21.840 --> 00:23:24.370\njust remember that your\nsystem's have to support it.\n\n470\n00:23:24.370 --> 00:23:26.705\nIn the show notes, I'll include\nexamples for few other things,\n\n471\n00:23:26.705 --> 00:23:32.230\npuppet definitely uses it,\nZIP can use it, doesn't have to,\n\n472\n00:23:32.230 --> 00:23:35.920\nMicrosoft's auto-discover is a great one,\nyou see that one all over the place.\n\n473\n00:23:35.920 --> 00:23:39.092\nWhen you sign up for a cloud service\nlike Office 365 or G suite or\n\n474\n00:23:39.092 --> 00:23:43.072\none of those guys, they'll normally give\nyou a list of DNS records to create, and\n\n475\n00:23:43.072 --> 00:23:45.690\nthere might be some SRV\nrecords to put in there, too.\n\n476\n00:23:45.690 --> 00:23:47.843\n&gt;&gt; Does this work the same way in domains,\n\n477\n00:23:47.843 --> 00:23:51.377\nif I'm trying to authenticate\nit against a domain controller?\n\n478\n00:23:51.377 --> 00:23:54.569\nOr does it check DNS in any way to\nlocate domain controllers, or no?\n\n479\n00:23:54.569 --> 00:23:55.230\nThey can, yeah.\n\n480\n00:23:55.230 --> 00:23:58.155\nSo Microsoft's Active Directory\nuses DNS to find stuff.\n\n481\n00:23:58.155 --> 00:24:00.136\nOpen LDAP can use DNS too.\n\n482\n00:24:00.136 --> 00:24:02.689\nSo there's SRView records available for\nOpen LDAP and\n\n483\n00:24:02.689 --> 00:24:04.529\nActive Directory you can put in there.\n\n484\n00:24:04.529 --> 00:24:06.215\nIf you don't have them it's\nnot the end of the world,\n\n485\n00:24:06.215 --> 00:24:08.110\nthey usually have other\nmechanisms to find stuff.\n\n486\n00:24:08.110 --> 00:24:10.736\nBut it makes things go faster\nbecause if you think about it,\n\n487\n00:24:10.736 --> 00:24:12.582\nif the DNS lookup fails, what do they do?\n\n488\n00:24:12.582 --> 00:24:15.955\nA lot of times they broadcast out and they\nbug the crap out of everybody a dns lookup\n\n489\n00:24:15.955 --> 00:24:19.360\nis just me talking to a dns,\nthat's much more efficient.\n\n490\n00:24:19.360 --> 00:24:23.800\nNow, if your trouble shooting srv records\nI do want to throw one more thing out.\n\n491\n00:24:23.800 --> 00:24:27.069\nIf your using ns lookup for example,\n\n492\n00:24:27.069 --> 00:24:32.237\nns lookup doesnt quite work\nreally well with srv records,\n\n493\n00:24:32.237 --> 00:24:36.989\nso if I do a ns lookup and\nI tell it im looking for _tcp.\n\n494\n00:24:36.989 --> 00:24:39.038\nHang on, let's do x-puppet.\n\n495\n00:24:41.703 --> 00:24:42.503\nI'll try and spell right.\n\n496\n00:24:42.503 --> 00:24:44.190\nThat's gonna make this\nwork a little bit better.\n\n497\n00:24:44.190 --> 00:24:48.680\nMy Goodness, my typing is just\ngoing downhill, .lab.itpro.tv and\n\n498\n00:24:48.680 --> 00:24:50.650\nI do a lookup against my own server,\nright.\n\n499\n00:24:50.650 --> 00:24:54.020\nSo if I run that lookup,\nwhat do I get back?\n\n500\n00:24:54.020 --> 00:24:58.410\nI'll get a name,\nlike yeah the name exists that's it.\n\n501\n00:24:58.410 --> 00:25:02.810\nAnd the reason is srv records didn't\nexist in the original DNS standard, and\n\n502\n00:25:02.810 --> 00:25:05.970\nso when ns lookup was created it wasn't\ndesigned to be able to handle it that way,\n\n503\n00:25:05.970 --> 00:25:08.240\nso it's doing an actual name lookup.\n\n504\n00:25:08.240 --> 00:25:10.840\nWell, there is no name to IP mapping for\n\n505\n00:25:10.840 --> 00:25:14.390\nthese lookups,\nit's a name to a service, right?\n\n506\n00:25:14.390 --> 00:25:16.990\nSo It doesn't return what I want.\n\n507\n00:25:16.990 --> 00:25:18.990\nSo if I want to use NsLookup and\nother utilities,\n\n508\n00:25:18.990 --> 00:25:22.430\nI need to tell it that I'm\ngonna be doing an SRV lookup.\n\n509\n00:25:22.430 --> 00:25:27.601\nAnd NsLookup, I believe, is -tsrv, if not\nwe can do it from the interactive prompt.\n\n510\n00:25:27.601 --> 00:25:29.600\nAll right, well apparently it's not -t,\ncuz I got an error.\n\n511\n00:25:29.600 --> 00:25:31.790\nSo let me just show up right\ninto the NsLookup utility,\n\n512\n00:25:31.790 --> 00:25:33.510\nI'll go it the manual way.\n\n513\n00:25:33.510 --> 00:25:37.583\nInside nslookup,\nwe can just say set type=SRV.\n\n514\n00:25:37.583 --> 00:25:39.570\nI'm telling it I wanna\nlook up an SRV record.\n\n515\n00:25:39.570 --> 00:25:43.422\nI do need to override my server, so I'm\ngonna point to my own server, all right?\n\n516\n00:25:43.422 --> 00:25:46.040\nSo let me do that, and\nthen I'm just gonna repeat that lookup.\n\n517\n00:25:46.040 --> 00:25:53.587\nI'm gonna do a lookup for\nx-puppet._tcp.lab.itpro.tv.\n\n518\n00:25:53.587 --> 00:25:56.710\nAnd so when I do that lookup,\nit knows that I wanna do an SRV lookup.\n\n519\n00:25:56.710 --> 00:25:58.740\nAnd there we go,\nthat's what I was looking for.\n\n520\n00:25:58.740 --> 00:25:59.920\nI get the three servers.\n\n521\n00:25:59.920 --> 00:26:01.590\nNotice I get all three of them.\n\n522\n00:26:01.590 --> 00:26:05.340\nEven though I've got one with\na higher priority, I get all three.\n\n523\n00:26:05.340 --> 00:26:06.370\nWhy?\n\n524\n00:26:06.370 --> 00:26:10.530\nIt's not up to puppet to do,\nup to DNS to do the load balancing.\n\n525\n00:26:10.530 --> 00:26:12.310\nDNS is just helping you resolve things.\n\n526\n00:26:12.310 --> 00:26:15.780\nBut now your client knows,\nthis is who I need to talk to.\n\n527\n00:26:15.780 --> 00:26:20.490\nAnd if I can't get to that person,\nthen I can rotate between these other two.\n\n528\n00:26:20.490 --> 00:26:23.850\nSo, it's presented that way so we can\nidentify who to go to and reach out to.\n\n529\n00:26:23.850 --> 00:26:26.135\nBut I get those other SRV records back,\nand\n\n530\n00:26:26.135 --> 00:26:28.135\nI can see, here's the server host name.\n\n531\n00:26:28.135 --> 00:26:33.755\nI need to go to pmaster03.lab.itpro.tv and\nI can connect to it on port 8140,\n\n532\n00:26:33.755 --> 00:26:36.915\nand that's where I'm gonna find my\npuppet master that I'm gonna talk to.\n\n533\n00:26:36.915 --> 00:26:40.848\nOr my my zip PVX that I need to\nregister with, so I can make and\n\n534\n00:26:40.848 --> 00:26:45.831\nreceive calls or my Microsoft Exchange\nServer so I can configure my email.\n\n535\n00:26:45.831 --> 00:26:48.552\nWhatever it is that this\nservice is telling us about,\n\n536\n00:26:48.552 --> 00:26:50.700\nwe now know where it is and we can.\n\n537\n00:26:50.700 --> 00:26:55.600\nSo that's basically the way that SRV\nrecords work I had to use NSLookup,\n\n538\n00:26:55.600 --> 00:26:56.940\nI don't normally use NSLookup for this,\n\n539\n00:26:56.940 --> 00:27:00.130\ncuz I'm normally on a Linux or\na Unix based machine.\n\n540\n00:27:01.250 --> 00:27:02.180\nI don't have the dig command.\n\n541\n00:27:02.180 --> 00:27:07.402\nIf you have dig it's a heck of\na lot easier, cuz you can just\n\n542\n00:27:07.402 --> 00:27:13.599\ndig whatever the record is So\nx-puppet._tcp.lab.itpro.tv.\n\n543\n00:27:13.599 --> 00:27:16.127\nAnd you can just say SRV right at the end,\nright?\n\n544\n00:27:16.127 --> 00:27:18.182\nDig makes it where you're prior,\nand then it'll do the lookups.\n\n545\n00:27:18.182 --> 00:27:23.158\nThat's how I normally do it, but\nNSlookup can do it there too.\n\n546\n00:27:23.158 --> 00:27:26.130\nI think that's about all\nI've got on SRV records.\n\n547\n00:27:26.130 --> 00:27:27.840\nAnything else I want to mention?\n\n548\n00:27:27.840 --> 00:27:29.052\nNo, that's not it.\n\n549\n00:27:29.052 --> 00:27:31.360\n&gt;&gt; All right.\nWell very good there Don.\n\n550\n00:27:31.360 --> 00:27:34.617\nOkay, he told us we're coming\nto the end of another episode.\n\n551\n00:27:34.617 --> 00:27:39.502\nDon, any final words about finding those\nservices within your network to these SRV\n\n552\n00:27:39.502 --> 00:27:40.144\nrecords?\n\n553\n00:27:40.144 --> 00:27:40.690\n&gt;&gt; That's about it.\n\n554\n00:27:40.690 --> 00:27:43.170\nWe did have a question in\nthe chat room about some\n\n555\n00:27:43.170 --> 00:27:45.660\nDNS records they've seen like _uuu,\n_k password.\n\n556\n00:27:45.660 --> 00:27:49.080\nSometimes you'll see other ones in there.\n\n557\n00:27:50.220 --> 00:27:52.290\nQuick kind of just mention on those.\n\n558\n00:27:52.290 --> 00:27:55.050\nMicrosoft's Active Directory and\nopen ldap, and\n\n559\n00:27:55.050 --> 00:28:00.210\na few other directory servers out there do\nuse DNS records to locate the directories.\n\n560\n00:28:00.210 --> 00:28:03.295\nThose technologies were developed\nbefore RSV records existed though.\n\n561\n00:28:03.295 --> 00:28:07.865\nSo if you look at them, yes, they use\nthe _TCP folder, or _Kerbaros to whatever.\n\n562\n00:28:07.865 --> 00:28:10.025\nBut if you drill down into them,\n\n563\n00:28:10.025 --> 00:28:12.205\nsome of them have been\nconverted to use SRV records.\n\n564\n00:28:12.205 --> 00:28:14.732\nBut a lot of them still just\nuse regular old a records.\n\n565\n00:28:14.732 --> 00:28:18.161\nSo for example in the active directory if\nyou drill down you'll see site folders,\n\n566\n00:28:18.161 --> 00:28:19.862\nand inside of them are just A records.\n\n567\n00:28:19.862 --> 00:28:22.652\nThey use them to find the servers but\nit doesn't specify a port.\n\n568\n00:28:22.652 --> 00:28:25.462\nBut there are parts of the active\ndirectory that have been switched over to\n\n569\n00:28:25.462 --> 00:28:27.744\nSRV records too so\nyou'll see kind of mixture in some of it.\n\n570\n00:28:27.744 --> 00:28:30.359\nBut it just kind depends on when\nthat software was created and\n\n571\n00:28:30.359 --> 00:28:32.710\nwhat they've developed to support and\nso on.\n\n572\n00:28:32.710 --> 00:28:37.869\nSo just because it's in _tcp or\n_udp, _kerboros or\n\n573\n00:28:37.869 --> 00:28:42.670\nwhatever doesn't guarantee it's an srv\nrecord but the odds are it will be.\n\n574\n00:28:42.670 --> 00:28:44.130\n&gt;&gt; Well that's a lot of\ngreat information and\n\n575\n00:28:44.130 --> 00:28:46.980\nit does look like we're gonna go ahead and\nrap this one up.\n\n576\n00:28:46.980 --> 00:28:49.280\nDon, we appreciate you\nbeing here as always, and\n\n577\n00:28:49.280 --> 00:28:51.170\nwe appreciate you the viewer watching.\n\n578\n00:28:51.170 --> 00:28:54.320\nSigning out for ITProTV,\nI've been your host, Wes Bryan.\n\n579\n00:28:54.320 --> 00:28:55.179\n&gt;&gt; And I'm Don Pezet.\n\n580\n00:28:55.179 --> 00:28:56.516\n&gt;&gt; And we'll see you next time.\n\n581\n00:28:56.516 --> 00:29:03.948\n[MUSIC]\n\n582\n00:29:03.948 --> 00:29:06.390\n&gt;&gt; Thank you for watching ITProTV.\n\n",
          "vimeoId": "195965538"
        }
      ],
      "title": "Configuring Host Records"
    },
    {
      "episodes": [
        {
          "description": "In this episode, Wes and Don explore using and configuring mail exchanger records also known as MX records. They talk about some of the components of the MX record type such as domain name, time-to-live or TTL as well as the priority or preference that can be set when using multiple servers are used.",
          "length": "1479",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-3-1-configuring_mx_records-111116-PGM.00_24_25_11.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-3-1-configuring_mx_records-111116-PGM.00_24_25_11.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-3-1-configuring_mx_records-111116-PGM.00_24_25_11.Still001-sm.jpg",
          "title": "Configuring MX Records",
          "transcript": "WEBVTT\n\n1\n00:00:00.300 --> 00:00:01.493\nWelcome to ITPro TV.\n\n2\n00:00:01.493 --> 00:00:06.868\nI'm your host Don- [CROSSTALK]\n\n3\n00:00:06.868 --> 00:00:08.483\n[MUSIC]\n\n4\n00:00:08.483 --> 00:00:12.237\n&gt;&gt; You're watching ITPro TV.\n\n5\n00:00:12.237 --> 00:00:15.109\n&gt;&gt; Welcome back to another\nexciting episode here at ITProTv.\n\n6\n00:00:15.109 --> 00:00:18.584\nI'm your host Wes Bryan, and in today's\nepisode we're continuing through talking\n\n7\n00:00:18.584 --> 00:00:22.010\nabout one of the services, probably one of\nthe most important things on the internet\n\n8\n00:00:22.010 --> 00:00:24.650\nto help you find information\nthat you're looking for.\n\n9\n00:00:24.650 --> 00:00:27.330\nAnd joining us in the studios today\nis none other than Mr. Don Pezet.\n\n10\n00:00:27.330 --> 00:00:28.290\nDon, how you doing sir?\n\n11\n00:00:28.290 --> 00:00:30.170\n&gt;&gt; Doing great Wes,\nready to dive right back into DNS.\n\n12\n00:00:30.170 --> 00:00:34.062\nAnd in this episode we're gonna\nbe talking about MX records.\n\n13\n00:00:34.062 --> 00:00:37.430\nYou mentioned using or finding things.\n\n14\n00:00:37.430 --> 00:00:38.750\nDNS is all about finding things.\n\n15\n00:00:38.750 --> 00:00:41.450\nI wanna find where this server is or\nthat server is.\n\n16\n00:00:41.450 --> 00:00:42.720\nMX records, they're so\n\n17\n00:00:42.720 --> 00:00:46.570\nimportant because that's how we\nfigure out where to send email to.\n\n18\n00:00:46.570 --> 00:00:49.800\nWhenever we setup a new mail server or\nwe purchase a domain and\n\n19\n00:00:49.800 --> 00:00:52.330\nwe wanna setup email for it,\nsetting up MX records is\n\n20\n00:00:52.330 --> 00:00:54.670\none of the first things we've\ngot to do to get that in place.\n\n21\n00:00:54.670 --> 00:00:56.980\nThat's what we're gonna\ntake a look at right here.\n\n22\n00:00:56.980 --> 00:01:00.380\nNow before I create the MX record, let\nme show you guys kind of the format and\n\n23\n00:01:00.380 --> 00:01:04.278\nwhat makes up an MX record, and we'll see\nhow to create it and put it in place.\n\n24\n00:01:04.278 --> 00:01:07.580\nWhenever you do an email,\nyou write an email up,\n\n25\n00:01:07.580 --> 00:01:10.060\nyou put in there that's it's\ngonna be to somebody, so\n\n26\n00:01:10.060 --> 00:01:14.160\nmaybe you're gonna email\nthe President of the United States.\n\n27\n00:01:14.160 --> 00:01:20.320\nSo you draft up an email, and it's gonna\nbe sent to president@whitehouse.gov.\n\n28\n00:01:20.320 --> 00:01:22.400\nWell how does that email know where to go?\n\n29\n00:01:22.400 --> 00:01:26.660\nAnd the way it knows where to go,\nis by doing a DNS lookup.\n\n30\n00:01:26.660 --> 00:01:32.203\nIt takes the domain, so\nif I'm emailing president@whitehouse.gov,\n\n31\n00:01:32.203 --> 00:01:35.620\nthat's who I'm gonna email, it says,\n\n32\n00:01:35.620 --> 00:01:38.770\nokay well I don't really care about\nthe president part cuz that's a user name.\n\n33\n00:01:38.770 --> 00:01:39.700\nI'm just gonna get rid of that.\n\n34\n00:01:39.700 --> 00:01:44.050\nAnd then whitehouse.gov,\nthat's the domain that I'm gonna email to.\n\n35\n00:01:44.050 --> 00:01:46.880\nAll right?\nAnd if we just run a normal lookup against\n\n36\n00:01:46.880 --> 00:01:49.740\nthat, we'll see an IP address and\nthat's that.\n\n37\n00:01:49.740 --> 00:01:54.600\nBut if we change from the A record to the\nMX record, I'm just going to tell it to\n\n38\n00:01:54.600 --> 00:02:00.480\nlook up MX record instead, now I see\nthe email servers that power that domain.\n\n39\n00:02:00.480 --> 00:02:03.140\nIf I have an email for\npresident@whitehouse.gov,\n\n40\n00:02:03.140 --> 00:02:06.920\nI can send it right along to any\nof these servers right here.\n\n41\n00:02:08.010 --> 00:02:10.590\nNow why so many servers?\n\n42\n00:02:10.590 --> 00:02:12.860\nWell typically it's redundancy.\n\n43\n00:02:12.860 --> 00:02:14.430\nRedundancy is important with email.\n\n44\n00:02:14.430 --> 00:02:18.010\nPeople love their email, and\npeople hate to lose email.\n\n45\n00:02:18.010 --> 00:02:22.060\nIf I only have one email server and\nthe server fails, I'm out of luck.\n\n46\n00:02:22.060 --> 00:02:23.072\nI start losing email.\n\n47\n00:02:23.072 --> 00:02:25.740\nWell there's little email\nretry stuff that happens, but\n\n48\n00:02:25.740 --> 00:02:27.470\nI could potentially lose email.\n\n49\n00:02:27.470 --> 00:02:30.320\nBut if I want redundancy I need\nmore than one mail server, so\n\n50\n00:02:30.320 --> 00:02:32.660\nusually you're recommended to have two.\n\n51\n00:02:32.660 --> 00:02:34.507\nWell, if you create two MX records,\n\n52\n00:02:34.507 --> 00:02:38.559\nthen the default is DNS will round-robin\nbetween those two mail servers, and so\n\n53\n00:02:38.559 --> 00:02:42.660\nhalf your mail will go to one server,\nhalf your mail will go to the other.\n\n54\n00:02:42.660 --> 00:02:45.430\nBut in the MX record, when we create it,\n\n55\n00:02:45.430 --> 00:02:48.230\nthere's a few values that we can\nspecify that let us override that.\n\n56\n00:02:48.230 --> 00:02:50.640\nLet me just run through\nthe pieces of the MX record.\n\n57\n00:02:50.640 --> 00:02:51.918\nThe first part is the domain.\n\n58\n00:02:51.918 --> 00:02:54.830\nThis is whitehouse.gov that I looked up.\n\n59\n00:02:54.830 --> 00:02:58.440\nThe next part is the time to live,\nthe TTL.\n\n60\n00:02:58.440 --> 00:03:03.268\nNow, the time to live for a record is how\nlong a server is allowed to have it cached\n\n61\n00:03:03.268 --> 00:03:05.949\nfor, and this time is actually in seconds.\n\n62\n00:03:05.949 --> 00:03:09.060\nAnd so I can see, this one's set\nto be cached for 3,802 seconds.\n\n63\n00:03:09.060 --> 00:03:12.170\nActually, that's probably\njust what's left on it.\n\n64\n00:03:12.170 --> 00:03:13.580\nYeah, see it's counting down.\n\n65\n00:03:13.580 --> 00:03:15.271\nIt's counting down right now.\n\n66\n00:03:15.271 --> 00:03:18.486\nEventually it will hit the bottom and\nstart over again.\n\n67\n00:03:18.486 --> 00:03:21.433\nIf this is gonna be cached for\n3,700 seconds,\n\n68\n00:03:21.433 --> 00:03:24.458\nI don't even know how many minutes or\nhours that is.\n\n69\n00:03:24.458 --> 00:03:29.558\nIt seems like a day is 1,440 minutes,\nand then you gotta multiply it by 60.\n\n70\n00:03:29.558 --> 00:03:31.199\nAnyhow, it's at least an hour.\n\n71\n00:03:31.199 --> 00:03:33.586\nSo let's just pretend it's an hour,\ncuz I'm bad at math.\n\n72\n00:03:33.586 --> 00:03:37.125\nIf that's cached for an hour, then the\nnext time I do a lookup it's already in\n\n73\n00:03:37.125 --> 00:03:39.290\nthe DNS cache so it happens faster.\n\n74\n00:03:39.290 --> 00:03:42.620\nBut let me give you a quick\nwarning about MX records.\n\n75\n00:03:42.620 --> 00:03:44.840\nWhen it comes to mail servers,\n\n76\n00:03:44.840 --> 00:03:49.650\nwhat happens if you decide you need\nto move mail services one day?\n\n77\n00:03:49.650 --> 00:03:55.091\nMaybe you have on-premises email servers\nand you want to move to Office 365,\n\n78\n00:03:55.091 --> 00:03:58.720\nor Google's G Suite,\nor something like that.\n\n79\n00:03:58.720 --> 00:04:01.850\nWell you gotta move your MX\nrecords to point somewhere else.\n\n80\n00:04:01.850 --> 00:04:06.020\nIf you have a high time to live,\nthat's the amount of time it's gonna take\n\n81\n00:04:06.020 --> 00:04:09.180\npeople out there in the real\nworld to recognize your change.\n\n82\n00:04:09.180 --> 00:04:13.415\nSo if that's set to 24 hours, then it\ncould take an entire day before people\n\n83\n00:04:13.415 --> 00:04:16.220\nstop sending email to your old server and\nstart sending to the new server.\n\n84\n00:04:16.220 --> 00:04:17.790\nThat's not a big of a deal.\n\n85\n00:04:17.790 --> 00:04:21.940\nBut it means that you need to remember,\nhey, I'm might have switched over to\n\n86\n00:04:21.940 --> 00:04:26.170\nMicrosoft's Office 365 ,but I can't\nshut off my mail server yet for\n\n87\n00:04:26.170 --> 00:04:27.310\nlike another 24 hours.\n\n88\n00:04:27.310 --> 00:04:29.670\nI need to wait cuz email\nmight be still trickling in.\n\n89\n00:04:31.390 --> 00:04:34.040\nOr you could shorten that time to live.\n\n90\n00:04:34.040 --> 00:04:37.700\nShortening the time to live will\nincrease the load on your DNS servers.\n\n91\n00:04:37.700 --> 00:04:40.960\nIt's usually negligible, but\nyou can increase that load.\n\n92\n00:04:40.960 --> 00:04:42.490\nBut the tradeoff is\nyou're much more agile.\n\n93\n00:04:42.490 --> 00:04:43.610\nIf you ever need to move or\n\n94\n00:04:43.610 --> 00:04:46.110\nchange your records people will\nrecognize it a lot faster.\n\n95\n00:04:46.110 --> 00:04:50.050\n&gt;&gt; So in this case, by your example\nthat you explained, it would be roughly\n\n96\n00:04:50.050 --> 00:04:52.500\naround 63 minutes if you were making that\nchange that you would have to wait for\n\n97\n00:04:52.500 --> 00:04:53.390\nthose to expire.\n\n98\n00:04:53.390 --> 00:04:55.200\n&gt;&gt; Good, you did the math for\nme, thank you.\n\n99\n00:04:55.200 --> 00:04:56.114\n&gt;&gt; [CROSSTALK] Horrible at math.\n\n100\n00:04:56.114 --> 00:04:59.715\n&gt;&gt; 63 minutes, it is just over an hour,\nand this is counting down now, so\n\n101\n00:04:59.715 --> 00:05:02.690\nactually, I don't know\nwhat the upper level was.\n\n102\n00:05:02.690 --> 00:05:05.980\nWe'd have to go and pull the actual DNS\nstructure to find out what that is.\n\n103\n00:05:05.980 --> 00:05:09.169\nBut Google is serving up to me cache,\nso I just see what their cache value is.\n\n104\n00:05:10.200 --> 00:05:14.860\nThat's kind of the warning to me\nto let me know that it's cached.\n\n105\n00:05:14.860 --> 00:05:16.570\nHere, we'll do itpro.tv.\n\n106\n00:05:16.570 --> 00:05:20.890\nSo if you were to send Wes or I an email,\nwe need to look it up against ours, well\n\n107\n00:05:20.890 --> 00:05:25.020\nwe have our mail server listed right here,\nand see how short our time to live is?\n\n108\n00:05:25.020 --> 00:05:28.230\nThat 300 right there,\nthat's a much shorter one.\n\n109\n00:05:28.230 --> 00:05:29.160\n300 seconds is 5 minutes.\n\n110\n00:05:30.490 --> 00:05:33.260\nIf I ever do a switchover, there's only\nfive minutes that I've got to wait for\n\n111\n00:05:33.260 --> 00:05:35.790\nemail to trickle over and\nstart to make it over to us.\n\n112\n00:05:37.240 --> 00:05:38.860\nYou might notice how I said boy,\n\n113\n00:05:38.860 --> 00:05:42.330\nyou really want to have more than one\nDNS server and how many do we have?\n\n114\n00:05:42.330 --> 00:05:43.450\nJust one.\n\n115\n00:05:43.450 --> 00:05:45.210\nWhat does that mean?\n\n116\n00:05:45.210 --> 00:05:46.170\nIt either means that one,\n\n117\n00:05:46.170 --> 00:05:49.760\nwe're just super confident in the one\nserver we have, which we aren't.\n\n118\n00:05:49.760 --> 00:05:53.760\nOr two, this pointer is actually\npointing to a load balancer with\n\n119\n00:05:53.760 --> 00:05:55.720\nmultiple servers behind it,\nwhich is the case.\n\n120\n00:05:55.720 --> 00:05:59.185\nWe do use Office 365 and so\nyou'll see our MX record is pointed to\n\n121\n00:05:59.185 --> 00:06:05.850\nprotection.outlook.com, which\nis the hosted Office 365 email.\n\n122\n00:06:05.850 --> 00:06:10.480\nAnd it is a load balancer, and\nbehind it are over 100 different servers.\n\n123\n00:06:10.480 --> 00:06:12.235\nI've actually traced\na lot of them out before.\n\n124\n00:06:12.235 --> 00:06:14.285\nThere's a bunch behind the scenes.\n\n125\n00:06:14.285 --> 00:06:18.485\nJust because you see one record doesn't\nnecessarily mean that it's not redundant.\n\n126\n00:06:18.485 --> 00:06:22.135\nIt just means that it's tied\nto some kind of balancer.\n\n127\n00:06:22.135 --> 00:06:23.565\nGoogle.\nGoogle has a ton of the things, so\n\n128\n00:06:23.565 --> 00:06:27.355\nif we were to pull them up,\nlike for Gmail.\n\n129\n00:06:27.355 --> 00:06:29.185\nGmail's obviously a big service,\n\n130\n00:06:29.185 --> 00:06:31.790\nso they've got several\ndifferent servers listed.\n\n131\n00:06:31.790 --> 00:06:34.800\nNow, I mentioned round-robining.\n\n132\n00:06:34.800 --> 00:06:37.740\nIf I have a bunch of different\nmail servers that are listed,\n\n133\n00:06:39.060 --> 00:06:43.580\ntechnically they're all treated equally\nand email's load-balanced across them.\n\n134\n00:06:43.580 --> 00:06:45.090\nWe typically don't want that.\n\n135\n00:06:45.090 --> 00:06:48.210\nWe typically have a primary and\nthe others are backups.\n\n136\n00:06:48.210 --> 00:06:51.700\nAnd the way you designate that is\nwith what's called a priority.\n\n137\n00:06:53.340 --> 00:06:57.470\nIt is called a priority but you'll hear\na lot of text refer to it as a preference.\n\n138\n00:06:57.470 --> 00:07:01.040\nIn the early days of DNS, when this\nstuff was kinda being solidified,\n\n139\n00:07:01.040 --> 00:07:05.380\nthey didn't really hard\nset what that term was.\n\n140\n00:07:05.380 --> 00:07:07.790\nAnd so you see them both,\npriority and preference.\n\n141\n00:07:07.790 --> 00:07:09.250\nBut in this case they're\nboth the same thing, so\n\n142\n00:07:09.250 --> 00:07:10.910\nit doesn't really matter what you call it.\n\n143\n00:07:10.910 --> 00:07:13.930\nBasically it's a number that\nyou attach to the server.\n\n144\n00:07:13.930 --> 00:07:18.190\nAnd that number tells you\nwhich server to use first, and\n\n145\n00:07:18.190 --> 00:07:19.840\nthen second, and then third.\n\n146\n00:07:19.840 --> 00:07:22.920\nIf the first server is unreachable,\nwe'll go to the second one.\n\n147\n00:07:22.920 --> 00:07:26.960\nBut if the first server is reachable,\nwe never talk to the other ones at all.\n\n148\n00:07:26.960 --> 00:07:31.640\nIf we look at Google's here, notice how\nthe first record that I got back was this\n\n149\n00:07:31.640 --> 00:07:38.230\nguy, which is\nalt4.gmail-smtp-in.l.google.com.\n\n150\n00:07:38.230 --> 00:07:39.030\nAlternate 4.\n\n151\n00:07:39.030 --> 00:07:43.126\nI've got alt1, alt2, alt3, and\nthen I've got the main one, gmail-smtp.\n\n152\n00:07:43.126 --> 00:07:46.375\nBut the first one that came to\nme was alt4, but that's okay.\n\n153\n00:07:46.375 --> 00:07:50.640\nIf we were round-robining,\nalt4 is what I'm about to use.\n\n154\n00:07:50.640 --> 00:07:55.570\nBut if we're not round-robining we\nuse the preference, the priority.\n\n155\n00:07:55.570 --> 00:08:01.010\nAnd it looks at this and\nthe lowest number is the one that wins.\n\n156\n00:08:01.010 --> 00:08:05.760\nIn this case five, five is the lowest one,\nthat's the one that's going to win.\n\n157\n00:08:06.820 --> 00:08:10.980\nAfter that, we have 10 and\n20 and 30 and 40.\n\n158\n00:08:10.980 --> 00:08:13.745\nAnd that's what gets the alternates\ngoing in the right order.\n\n159\n00:08:13.745 --> 00:08:15.740\nAlternate one has a preference of ten.\n\n160\n00:08:15.740 --> 00:08:19.266\nSo if the main one fails,\nif this server goes offline,\n\n161\n00:08:19.266 --> 00:08:22.036\nthen it'll switch over to alternate one.\n\n162\n00:08:22.036 --> 00:08:25.126\nAnd if the main server and\nalternate one are offline,\n\n163\n00:08:25.126 --> 00:08:27.080\nthen we'll go to alternate two.\n\n164\n00:08:27.080 --> 00:08:30.148\nAnd if the main server, alternate one and\nalternate two are offline,\n\n165\n00:08:30.148 --> 00:08:31.710\nthen we'll go to alternate three.\n\n166\n00:08:31.710 --> 00:08:36.020\nSo in order for us to get to alternate\nfour, every other server has to be down,\n\n167\n00:08:36.020 --> 00:08:40.830\ndown and unreachable, otherwise alternate\nfour will never, ever get used.\n\n168\n00:08:40.830 --> 00:08:42.958\nAll right,\nlet me throw out a word of caution there.\n\n169\n00:08:42.958 --> 00:08:46.730\nI say it'll never, ever get used,\nthere is one scenario where it might, and\n\n170\n00:08:46.730 --> 00:08:48.077\nit's not a good scenario.\n\n171\n00:08:48.077 --> 00:08:51.410\nI've seen people where\nthey have a spam filter.\n\n172\n00:08:51.410 --> 00:08:55.989\nSo like a Barracuda spam file Firewall or\nsomething like that, right?\n\n173\n00:08:55.989 --> 00:08:59.792\nOr maybe you purchased a service like\nPostini where your email goes to this\n\n174\n00:08:59.792 --> 00:09:04.020\nexternal service, gets filtered there,\nand then comes back to you.\n\n175\n00:09:04.020 --> 00:09:08.918\nAnd so your primary mail or\nyour primary MX record will be Postini or\n\n176\n00:09:08.918 --> 00:09:12.730\nit'll be your Barracuda firewall or\nwhatever it is, right?\n\n177\n00:09:12.730 --> 00:09:17.140\nAnd people get worried, like,\nwhat if Postini goes offline?\n\n178\n00:09:17.140 --> 00:09:19.591\nOr what if my Barracuda devices fails?\n\n179\n00:09:19.591 --> 00:09:23.340\nWell we can get it fixed under\nwarranty but it might be a day.\n\n180\n00:09:23.340 --> 00:09:27.730\nSo maybe I'll list my direct\nmail server as a backup.\n\n181\n00:09:27.730 --> 00:09:31.063\nAnd that way if the spam filter fails or\nthe spam filtering service fails,\n\n182\n00:09:31.063 --> 00:09:34.557\nthen people will just move down to the\nnext record which will be mail server and\n\n183\n00:09:34.557 --> 00:09:37.566\nyeah, I'll get spam but\nat least I'll get my regular email too and\n\n184\n00:09:37.566 --> 00:09:38.744\nmail will keep flowing.\n\n185\n00:09:38.744 --> 00:09:40.610\nI know a number of people that do this.\n\n186\n00:09:40.610 --> 00:09:44.326\nIt works, it works exactly like I just\ndescribed, that's why people do it.\n\n187\n00:09:44.326 --> 00:09:48.724\nBut a lot of the spam generators\nout there have learned that.\n\n188\n00:09:48.724 --> 00:09:50.310\nThey have learned that people do that.\n\n189\n00:09:50.310 --> 00:09:53.110\nThey'll list their direct\nserver as a backup.\n\n190\n00:09:53.110 --> 00:09:57.970\nAnd so some of the spam relays that\nare out there will intentionally send\n\n191\n00:09:57.970 --> 00:10:02.600\nto servers with a lower preference\neven though the other ones are online.\n\n192\n00:10:02.600 --> 00:10:03.430\nOkay, so\n\n193\n00:10:03.430 --> 00:10:08.350\nwhen I say that alternate four will\nnever get used, that's not exactly true.\n\n194\n00:10:08.350 --> 00:10:11.720\nIt'll never get used as long as\npeople are following the rules.\n\n195\n00:10:11.720 --> 00:10:16.170\nBut at the end of the day, it's the sender\nthat picks where the email is going,\n\n196\n00:10:16.170 --> 00:10:17.310\nnot the recipient.\n\n197\n00:10:17.310 --> 00:10:20.780\nSo we can't force people\nto use the primary.\n\n198\n00:10:20.780 --> 00:10:22.921\nThey could skip and\nuse an alternate, it's there.\n\n199\n00:10:22.921 --> 00:10:27.284\nSo instead of doing it this way,\nlike just putting yourself as a backup,\n\n200\n00:10:27.284 --> 00:10:31.358\nI encourage you, if you go that route,\nif you put yours as a backup,\n\n201\n00:10:31.358 --> 00:10:35.940\nput a firewall rule in place that\nblocks access to the backup, right?\n\n202\n00:10:35.940 --> 00:10:40.150\nThat way all across the world they\ncan DNS cache your backup, right?\n\n203\n00:10:40.150 --> 00:10:42.580\nSo they can DNS, cache that and\nhave it available, right?\n\n204\n00:10:43.780 --> 00:10:48.150\nBut if they try and reach it, the firewall\nblocks it, so that's protecting you.\n\n205\n00:10:48.150 --> 00:10:51.660\nAnd if your primary service ever fails,\nyou can just go in the firewall and\n\n206\n00:10:51.660 --> 00:10:54.980\nremove that rule and\nnow people can get to the back up.\n\n207\n00:10:54.980 --> 00:10:58.050\nAnd then as soon as the primary's back on,\nyou can put the firewall rule back in.\n\n208\n00:10:58.050 --> 00:11:00.750\nA firewall rule doesn't get cached in DNS.\n\n209\n00:11:00.750 --> 00:11:03.830\nWe don't have to worry about a time\nto live expiring for a firewall rule.\n\n210\n00:11:03.830 --> 00:11:06.360\nWe can turn it on and\noff at our whim, right?\n\n211\n00:11:06.360 --> 00:11:08.480\nSo, it becomes a manual process,\nbut you're protected, and\n\n212\n00:11:08.480 --> 00:11:10.860\nyou don't have to worry about\nspammers bypassing your servers.\n\n213\n00:11:10.860 --> 00:11:14.460\nSo, just keep that in mind with your\nMX records when you deal with backups.\n\n214\n00:11:14.460 --> 00:11:17.055\nNow in the case of Google,\nthey failed to run all five of theirs so\n\n215\n00:11:17.055 --> 00:11:18.220\nit doesn't really matter.\n\n216\n00:11:18.220 --> 00:11:20.400\nIf you want to by pass it you can.\n\n217\n00:11:20.400 --> 00:11:22.492\nIt all goes to the same place, and\nit all works out the same way.\n\n218\n00:11:22.492 --> 00:11:25.790\nSo that, Is obviously the best scenario.\n\n219\n00:11:27.230 --> 00:11:29.355\nAll right, so when we define these,\nwe need to define a preference.\n\n220\n00:11:29.355 --> 00:11:33.390\nAnd you might notice where, like,\nwith ours, so we only had one MX record.\n\n221\n00:11:33.390 --> 00:11:35.621\nAnd see how I did\na preference of 0 on that?\n\n222\n00:11:35.621 --> 00:11:37.990\nI say I did it, I'm not actually\nsure if I actually did that or not.\n\n223\n00:11:37.990 --> 00:11:40.420\nIt might have been one of\nthe other members of the team.\n\n224\n00:11:40.420 --> 00:11:44.080\nBut a 0, a 0 is the same\nthing as just leaving it off.\n\n225\n00:11:44.080 --> 00:11:45.030\nYou can just not have it.\n\n226\n00:11:45.030 --> 00:11:46.727\nAnd that means that's\nthe server you're gonna use.\n\n227\n00:11:46.727 --> 00:11:48.860\nIt's the primary, right?\n\n228\n00:11:48.860 --> 00:11:50.330\nNotice how Google didn't do that.\n\n229\n00:11:50.330 --> 00:11:53.220\nSee how Google went up by five?\n\n230\n00:11:53.220 --> 00:11:56.430\nThere's nothing in the rules that says\nyou should do that but it is a good idea.\n\n231\n00:11:56.430 --> 00:12:00.352\nIt's a good idea because what if one day\nI decide that's not going to be the main\n\n232\n00:12:00.352 --> 00:12:01.253\nserver anymore?\n\n233\n00:12:01.253 --> 00:12:05.710\nI'm going to bring up a new main server\nand I want to direct people over to it.\n\n234\n00:12:05.710 --> 00:12:08.820\nWell if I bring up a new main server, and\n\n235\n00:12:08.820 --> 00:12:13.470\nI give it a priority of zero and\nI've already got a main server with\n\n236\n00:12:13.470 --> 00:12:16.720\na priority of zero,\nnow I\"m load balancing on the two.\n\n237\n00:12:16.720 --> 00:12:19.780\nAnd I have to change the priority\nof the other one to make it higher,\n\n238\n00:12:19.780 --> 00:12:21.620\nmake it five, or whatever.\n\n239\n00:12:21.620 --> 00:12:24.390\nAnd the time to live will have to\nexpire before people flip over.\n\n240\n00:12:24.390 --> 00:12:26.010\nIt's gonna slow things down.\n\n241\n00:12:26.010 --> 00:12:29.480\nBut if I leave a space, see how Google's\nintentionally left a space here,\n\n242\n00:12:29.480 --> 00:12:30.890\nzero through four.\n\n243\n00:12:30.890 --> 00:12:34.200\nThey could add a new record with\nthe priority of zero through four.\n\n244\n00:12:34.200 --> 00:12:38.016\nAnd anybody would do a look up, they'd see\nthese records and that zero through four,\n\n245\n00:12:38.016 --> 00:12:39.935\nany of those would be\nbetter than this one.\n\n246\n00:12:39.935 --> 00:12:42.082\nThat would cause people to jump over and\nyou wouldn't have to wait for\n\n247\n00:12:42.082 --> 00:12:43.340\ntime to lives to expire.\n\n248\n00:12:43.340 --> 00:12:47.965\n&gt;&gt; Don have you ever seen a purpose for\nthe preferences being all the same number?\n\n249\n00:12:47.965 --> 00:12:50.010\n&gt;&gt; If you want to load balance,\nif you want to round robin.\n\n250\n00:12:50.010 --> 00:12:52.891\n&gt;&gt; I'll give you an example,\nif you do a dig on Hotmail for their-\n\n251\n00:12:52.891 --> 00:12:53.759\n&gt;&gt; Good old-\n\n252\n00:12:53.759 --> 00:12:56.067\n&gt;&gt; Good old Hotmail, still around there.\n\n253\n00:12:56.067 --> 00:12:58.789\nYou might notice I believe that they have\nall the same preference [CROSSTALK].\n\n254\n00:12:58.789 --> 00:13:00.420\n&gt;&gt; They have all fives, yeah.\n\n255\n00:13:00.420 --> 00:13:03.852\nSo in this case they've got MX one\nthrough MX four, they're all fives.\n\n256\n00:13:03.852 --> 00:13:05.748\nThey're just saying look,\nwe don't really care which one you go to.\n\n257\n00:13:05.748 --> 00:13:07.390\nYou can go to any of them right.\n\n258\n00:13:07.390 --> 00:13:11.408\nThey're all the same, they're all\nfiltering, they're probably all identical,\n\n259\n00:13:11.408 --> 00:13:13.877\nit's probably different IP regions or\nsomething.\n\n260\n00:13:13.877 --> 00:13:18.912\nSo when it resolves this it just shows\nus and doesn't care which one we use.\n\n261\n00:13:18.912 --> 00:13:20.020\nAnd it is round robin.\n\n262\n00:13:20.020 --> 00:13:22.020\nYou see it as I run it again.\n\n263\n00:13:22.020 --> 00:13:23.684\nSee how 3 is first?\n\n264\n00:13:23.684 --> 00:13:25.005\nNow I'm gonna run it.\n\n265\n00:13:25.005 --> 00:13:26.003\nShoot, and it did it.\n\n266\n00:13:26.003 --> 00:13:28.600\nThere we go, and two is first.\n\n267\n00:13:28.600 --> 00:13:30.110\nI'm not the only one hitting the server.\n\n268\n00:13:30.110 --> 00:13:32.240\nHotmail's kinda popular, so\nit's round robining me and\n\n269\n00:13:32.240 --> 00:13:33.540\neveryone else on the planet.\n\n270\n00:13:33.540 --> 00:13:36.160\nSo I might have to run it\na few times before I get one.\n\n271\n00:13:36.160 --> 00:13:39.668\nBut why I'm consistently getting two and\nthree?\n\n272\n00:13:39.668 --> 00:13:40.604\nThere's four.\n\n273\n00:13:40.604 --> 00:13:41.990\nAll right, so I had to work for it.\n\n274\n00:13:41.990 --> 00:13:43.701\nBut see how it's changing and\nso now would hit four.\n\n275\n00:13:43.701 --> 00:13:46.773\nIt's round robining through,\nit's cycling through,\n\n276\n00:13:46.773 --> 00:13:49.531\nbased on just how many people\nare doing the look up.\n\n277\n00:13:49.531 --> 00:13:51.087\nAnyhow, that's round robin.\n\n278\n00:13:51.087 --> 00:13:55.361\nWe call it poor man's load balancing\ncuz it is a load balancing.\n\n279\n00:13:55.361 --> 00:13:57.159\nBut if one of those servers fails,\n\n280\n00:13:57.159 --> 00:14:01.570\nit will still send 25% of the traffic\nto that server that's failed.\n\n281\n00:14:01.570 --> 00:14:04.581\nBut fortunately, you'll see that it\nfailed, then you'll move to another server\n\n282\n00:14:04.581 --> 00:14:07.129\nand so you'll manually move on to\none of the other records after that.\n\n283\n00:14:07.129 --> 00:14:10.560\nBut it does cause one failure in\na re-transmit so email gets delayed.\n\n284\n00:14:11.970 --> 00:14:14.970\nAll right, well, enough talking about the\nrecords, let's see about creating them.\n\n285\n00:14:14.970 --> 00:14:18.110\nSo I'm gonna pull up one of our\ndomains here, or I'm gonna try and\n\n286\n00:14:18.110 --> 00:14:19.720\npull up one of our domains, here we go.\n\n287\n00:14:19.720 --> 00:14:24.700\nSo this is itprotvdemo.com, right,\nnew domain, fired it up, and\n\n288\n00:14:24.700 --> 00:14:26.190\nI wanna get my mail servers created.\n\n289\n00:14:26.190 --> 00:14:30.140\nSo when I jump over to the DNS\nsettings and pull up all my records,\n\n290\n00:14:30.140 --> 00:14:34.150\nI can see that I actually do\nhave a couple of mail servers.\n\n291\n00:14:34.150 --> 00:14:38.882\nI've got mail1.itprotvdemo.com and\nmail2.itprotvdemo.com and\n\n292\n00:14:38.882 --> 00:14:41.326\nI've got their IPs over here, okay?\n\n293\n00:14:41.326 --> 00:14:43.490\nSo those are my two records.\n\n294\n00:14:43.490 --> 00:14:47.423\nNow, when I purchased this domain I\npurchased it from hover.com, right?\n\n295\n00:14:47.423 --> 00:14:50.430\nHover.com's a registrar that's out there.\n\n296\n00:14:50.430 --> 00:14:55.560\nYou could have purchased it\nthrough GoDaddy or register.com or\n\n297\n00:14:55.560 --> 00:14:58.440\nAmazon Web Services, they resell domains,\ntons of people sell domains.\n\n298\n00:14:58.440 --> 00:15:00.090\nSo it doesn't really matter\nwho you buy it from.\n\n299\n00:15:00.090 --> 00:15:02.160\nBut these guys when you buy it from them,\n\n300\n00:15:02.160 --> 00:15:05.570\nthey package a hosted\nemail service with it.\n\n301\n00:15:05.570 --> 00:15:07.645\nAnd so\nsee how they've created this entry for\n\n302\n00:15:07.645 --> 00:15:12.420\nmail.itprotvdemo.com and\nit's pointed at this, right?\n\n303\n00:15:12.420 --> 00:15:14.530\nBut that is just a CNAME.\n\n304\n00:15:14.530 --> 00:15:16.400\nIt's just a CNAME, it's a host.\n\n305\n00:15:16.400 --> 00:15:17.980\nThat's actually not getting used.\n\n306\n00:15:17.980 --> 00:15:21.380\nIf I look at my records, this is\nthe one I care about, this MX record.\n\n307\n00:15:21.380 --> 00:15:24.570\nAnd they have an MX record for @.\n\n308\n00:15:24.570 --> 00:15:27.440\nAnd that means the parent domain.\n\n309\n00:15:27.440 --> 00:15:29.084\nMy parent domain is itprotvdemo.com.\n\n310\n00:15:29.084 --> 00:15:34.300\nSo if somebody sends an email\nto bob@itprotvdemo.com,\n\n311\n00:15:34.300 --> 00:15:36.940\nthey're gonna do a look up for\nthe domain name.\n\n312\n00:15:36.940 --> 00:15:40.430\nShow me the MX records for itprotv.com and\nthat's what this @ symbol means,\n\n313\n00:15:40.430 --> 00:15:42.370\nis the domain.\n\n314\n00:15:42.370 --> 00:15:47.890\nAnd then if I look over here, it's\npointing to that name, mail.hover.com.\n\n315\n00:15:47.890 --> 00:15:50.780\nIt's not even using the CNAME\nthat was created up here.\n\n316\n00:15:50.780 --> 00:15:52.431\nThat's just to help people\nlogin to their web mail.\n\n317\n00:15:52.431 --> 00:15:54.566\nBut either way,\nI'm not using their mail service.\n\n318\n00:15:54.566 --> 00:15:57.673\nI don't need those records,\nso I'm gonna get in here and\n\n319\n00:15:57.673 --> 00:15:59.366\ndelete Those two records out.\n\n320\n00:15:59.366 --> 00:16:04.335\nSo I'm just gonna delete those because I\nwant to set it up for my mail service for\n\n321\n00:16:04.335 --> 00:16:05.780\nthis two, all right.\n\n322\n00:16:05.780 --> 00:16:07.880\nAnd I got the a records in place,\n\n323\n00:16:07.880 --> 00:16:11.340\nMX records don't technically\nneed an a record.\n\n324\n00:16:11.340 --> 00:16:17.709\nYou could have your MX records point\nright to a CNAME or something else.\n\n325\n00:16:17.709 --> 00:16:21.005\nThere is a way to actually point it to\nan IP but it's not recommended, but\n\n326\n00:16:21.005 --> 00:16:22.910\nwe normally do have it\ntied to an a record.\n\n327\n00:16:22.910 --> 00:16:25.990\nSo while we don't have to have\nan a record, that is the normal process.\n\n328\n00:16:25.990 --> 00:16:29.660\nSo I've got mail1 and mail2 defined\nright here as an a record, and\n\n329\n00:16:29.660 --> 00:16:33.980\nthen I can come in and\nI can add my MX record in.\n\n330\n00:16:33.980 --> 00:16:36.310\nSo I'm gonna create an MX\nrecord into my record type,\n\n331\n00:16:36.310 --> 00:16:40.110\nthat's really important that I make\nsure that I set it to an MX, right.\n\n332\n00:16:40.110 --> 00:16:44.010\nAnd notice how the host name just\nchanged to include a priority field.\n\n333\n00:16:44.010 --> 00:16:46.670\nIt's funny because if you ever\ndig into the DNS database,\n\n334\n00:16:46.670 --> 00:16:49.490\nthe priority is actually\njust stuck onto the name.\n\n335\n00:16:49.490 --> 00:16:54.126\nIt's stored in the same field in the DNS\nrecord, but because you flagged it as MX\n\n336\n00:16:54.126 --> 00:16:57.310\nit knows that the numbers at the very\nbeginning are part of that preference.\n\n337\n00:16:57.310 --> 00:17:02.850\nAll right, for my host name, I can,\nwell, it depends on your provider.\n\n338\n00:17:02.850 --> 00:17:05.790\nThe official way to do it is to\nstick an at right there, all right.\n\n339\n00:17:05.790 --> 00:17:07.820\nBut there are some providers,\nI don't remember if Hover does it,\n\n340\n00:17:07.820 --> 00:17:11.560\nwhere if you just leave it blank,\nthey automatically put the at symbol in.\n\n341\n00:17:11.560 --> 00:17:14.350\nBut I'm gonna stick the at symbol in there\ncuz that's the official way to do it.\n\n342\n00:17:14.350 --> 00:17:18.380\nAnd then for the priority,\nI can decide what I want it to be.\n\n343\n00:17:18.380 --> 00:17:20.530\nI've got two servers, mail1 and mail2.\n\n344\n00:17:20.530 --> 00:17:23.250\nIf I want a round robin,\nI can set them to the same priority or\n\n345\n00:17:23.250 --> 00:17:25.870\nI can just leave it blank which\nis the equivalent of zero.\n\n346\n00:17:25.870 --> 00:17:30.060\nBut in my case, I want mail1 to be\nthe primary and mail2 to be the back up.\n\n347\n00:17:30.060 --> 00:17:33.590\nAnd I'm gonna leave plenty of room in case\nI need to add other stuff in the future.\n\n348\n00:17:33.590 --> 00:17:39.770\nSo I'm gonna set a priority of ten for\nmail1, all right.\n\n349\n00:17:39.770 --> 00:17:43.090\nNow if I just leave it as mail1 like this,\n\n350\n00:17:43.090 --> 00:17:48.210\nit's going to assume that I'm\nat mail1.itprotvdemo.com, right.\n\n351\n00:17:48.210 --> 00:17:51.210\nBut your mail server might be in\na completely different domain and\n\n352\n00:17:51.210 --> 00:17:52.510\nthat's okay, right.\n\n353\n00:17:52.510 --> 00:17:56.820\nSo, it actually might be mail1.itpro.tv,\nright.\n\n354\n00:17:56.820 --> 00:17:59.680\nDifferent domain and that's fine,\nit will look that up,\n\n355\n00:17:59.680 --> 00:18:05.030\nyou don't have to have a mail server be\nin the same domain as the email domain.\n\n356\n00:18:05.030 --> 00:18:07.000\nBut in my case it just happens to be and\nso\n\n357\n00:18:07.000 --> 00:18:10.710\nI could just type it out,\nmail1.itprotvdemo.com.\n\n358\n00:18:10.710 --> 00:18:13.090\nAnd that's going to look for\nan a record or\n\n359\n00:18:13.090 --> 00:18:17.092\na CNAME to be able to look that up and\nfind out an address, all right.\n\n360\n00:18:17.092 --> 00:18:20.940\nSo I'll go ahead and save that, and\nthen I'm gonna add my other one.\n\n361\n00:18:20.940 --> 00:18:24.830\nSo I'm gonna come in and\nI'll do an @ the host name again, right.\n\n362\n00:18:24.830 --> 00:18:27.216\nSo, it's technically\npointing to the same domain.\n\n363\n00:18:27.216 --> 00:18:32.466\nI'll set that MX record, I'm gonna\ngive this one a priority of 20 and\n\n364\n00:18:32.466 --> 00:18:38.300\nset this to mail2.itprotvdemo.com,\nand I'll save that one, okay.\n\n365\n00:18:38.300 --> 00:18:43.490\nSo now when I look down, I can see these\ntwo MX records right here, they both have\n\n366\n00:18:43.490 --> 00:18:48.090\n@ for the name and one's got a preference\nof 10, one has a preference of 20.\n\n367\n00:18:48.090 --> 00:18:49.940\nAnd see how its just part of the name?\n\n368\n00:18:49.940 --> 00:18:53.320\nIt's the preference space and the name,\nit's all stored in the same field.\n\n369\n00:18:53.320 --> 00:18:56.650\nThat's how it is in the DNS\ndatabase on the back end, but\n\n370\n00:18:56.650 --> 00:19:00.820\nsome DNS servers like this one that I'm\non, when you're editing it they actually\n\n371\n00:19:00.820 --> 00:19:03.450\nseparate out the field for you just to\nhelp you keep your syntax straight.\n\n372\n00:19:05.330 --> 00:19:09.300\nAll right, so now that I've got that set,\nthat should be working.\n\n373\n00:19:09.300 --> 00:19:14.220\nIf somebody want's to send\nan email to Don@itprotvdemo.com,\n\n374\n00:19:14.220 --> 00:19:16.080\nthey should be able to find my servers.\n\n375\n00:19:16.080 --> 00:19:19.240\nLet's see if that's registered\nwith the Internet yet.\n\n376\n00:19:19.240 --> 00:19:23.600\nWe do take time for these things to\npropagate and all that stuff, but\n\n377\n00:19:23.600 --> 00:19:24.800\nit should come up pretty quick.\n\n378\n00:19:24.800 --> 00:19:31.990\nSo if I do a dig for itprotvdemo.com and\nI'm gonna tell it to look for\n\n379\n00:19:31.990 --> 00:19:36.480\nMX records, I can pull it up and there\nthey are, they're already up there, right.\n\n380\n00:19:36.480 --> 00:19:39.220\nAnd I'm doing this on public server so\nif you're following along,\n\n381\n00:19:39.220 --> 00:19:41.320\nwell if you're following\nalong live you can do this.\n\n382\n00:19:41.320 --> 00:19:43.370\nI'll probably have deleted it\nbefore too terribly long, so\n\n383\n00:19:43.370 --> 00:19:45.620\nyou might not be able to do this\nif you're watching it recorded.\n\n384\n00:19:45.620 --> 00:19:46.920\nBut I can see it right there.\n\n385\n00:19:46.920 --> 00:19:49.310\nIt does have that time to\nlive that's counting down.\n\n386\n00:19:49.310 --> 00:19:53.580\nI an see their MX records and\nit returned mail2 first.\n\n387\n00:19:53.580 --> 00:19:57.570\nBut thanks to that preference I\nknow that I'm gonna use mail1\n\n388\n00:19:57.570 --> 00:20:01.890\nunless mail1 is unreachable, and\nthen I'll switch over to mail2, all right.\n\n389\n00:20:01.890 --> 00:20:04.970\nNow if I were to go and tweak this and\nchange these numbers, I'd have to wait for\n\n390\n00:20:04.970 --> 00:20:08.880\nthat time to live to expire and\nthen I'd be able to see what's going on.\n\n391\n00:20:08.880 --> 00:20:10.890\nAnd my TTL is set to\napparently 15 minutes.\n\n392\n00:20:12.260 --> 00:20:15.990\nNot every hosting provider is created\nequal, some are better than others.\n\n393\n00:20:15.990 --> 00:20:18.810\nI like Hover because of\ntheir customer support, but\n\n394\n00:20:18.810 --> 00:20:21.670\nthey don't have a lot of bells and\nwhistles with their DNS server.\n\n395\n00:20:21.670 --> 00:20:23.560\nSo for\nexample you'll notice there's no way for\n\n396\n00:20:23.560 --> 00:20:27.900\nme to edit my time to live,\nI can't shorten it or lengthen it.\n\n397\n00:20:27.900 --> 00:20:30.420\nNormally I like to host domains on AWS,\n\n398\n00:20:30.420 --> 00:20:34.450\nAmazon Web Services, they have Route 53\nand you could host your domains there.\n\n399\n00:20:34.450 --> 00:20:36.870\nAnd they give you complete\ncontrol of everything.\n\n400\n00:20:36.870 --> 00:20:39.790\nYou can tweak your timed delivs, you could\nset it down to one second if you want.\n\n401\n00:20:39.790 --> 00:20:41.450\nYou can do all sorts\nof cool stuff with it.\n\n402\n00:20:41.450 --> 00:20:43.140\nIt's very, very powerful.\n\n403\n00:20:43.140 --> 00:20:46.950\nBut if you have any problems,\nyou can't call and get help on the phone.\n\n404\n00:20:46.950 --> 00:20:49.480\nWith Hover.com you can call and\nget a person on the phone, which is nice.\n\n405\n00:20:49.480 --> 00:20:52.390\nSo you've got to pick your\nservice based on that.\n\n406\n00:20:52.390 --> 00:20:52.970\nBut in this case,\n\n407\n00:20:52.970 --> 00:20:56.250\nI don't have the option to adjust\nthat time to live, you may, right.\n\n408\n00:20:56.250 --> 00:20:58.250\nSo there's sometimes options\nthat you don't necessarily see.\n\n409\n00:20:59.810 --> 00:21:02.860\nAll right, so once we get those MX records\nin place, we're pretty much in business.\n\n410\n00:21:02.860 --> 00:21:04.030\nWe don't really don't\nneed to tweak it anymore,\n\n411\n00:21:04.030 --> 00:21:06.320\nthey're one of the simpler\nrecords to work with.\n\n412\n00:21:06.320 --> 00:21:06.840\nNot it's up and\n\n413\n00:21:06.840 --> 00:21:09.510\nit's going the hardest part is getting\nyour email server up and running.\n\n414\n00:21:09.510 --> 00:21:10.940\nI need to go and make sure that mail1 and\n\n415\n00:21:10.940 --> 00:21:14.280\nmail 2 are running some kind of\nSMTP server to receive emails and\n\n416\n00:21:14.280 --> 00:21:17.860\nthat they map those back to a mail box\nsomewhere and that email will flow.\n\n417\n00:21:17.860 --> 00:21:20.590\nThe MX records themselves,\npretty straight forward.\n\n418\n00:21:20.590 --> 00:21:24.240\nNow I do want to add one more thing\nwhich is if you use a cloud service.\n\n419\n00:21:24.240 --> 00:21:27.948\nIf you use a cloud service like Google,\nmaybe you have Google's G suite or\n\n420\n00:21:27.948 --> 00:21:31.220\nMicrosoft's Office 365,\nthen you're going to need to point your MX\n\n421\n00:21:31.220 --> 00:21:33.828\nrecords to them because they\nare hosting your email.\n\n422\n00:21:33.828 --> 00:21:36.110\nThat's nice cuz they worry about it all,\n\n423\n00:21:36.110 --> 00:21:39.160\nyou don't have to worry about it,\nand it's just taken care of.\n\n424\n00:21:39.160 --> 00:21:41.580\nSo you'll need to go to\nyour cloud provider and\n\n425\n00:21:41.580 --> 00:21:42.950\nfigure out what their records are.\n\n426\n00:21:42.950 --> 00:21:46.570\nSo for example I've got the G Suite\ndocumentation pulled up here, and\n\n427\n00:21:46.570 --> 00:21:50.660\nif I were to sign up for\nGoogle Docs for Business, Google Work,\n\n428\n00:21:50.660 --> 00:21:53.760\nwhatever we want to call it,\nthese are the servers they want us to use.\n\n429\n00:21:53.760 --> 00:21:56.720\nAnd notice how they're saying for\nthe name, set it as blank or at.\n\n430\n00:21:56.720 --> 00:22:01.190\nFor the time to live,\nthey're recommending 3600.\n\n431\n00:22:01.190 --> 00:22:05.390\nAnd 3600, that works out to,\nis that six minutes?\n\n432\n00:22:05.390 --> 00:22:06.690\n60, I think it's an hour.\n\n433\n00:22:06.690 --> 00:22:08.570\nYeah, we figured that out earlier today.\n\n434\n00:22:08.570 --> 00:22:09.650\nThat's an hour.\n\n435\n00:22:09.650 --> 00:22:11.530\nIt's an MX record and\nthese are the priorities.\n\n436\n00:22:11.530 --> 00:22:15.290\nThey want your default to\nbe ASPMX.L.GOOGLE.COM and\n\n437\n00:22:15.290 --> 00:22:17.960\nthen they've got all these\nbackups listed here.\n\n438\n00:22:17.960 --> 00:22:21.490\nAnd notice how ALT1 and ALT2,\nthey're load balancing.\n\n439\n00:22:21.490 --> 00:22:24.520\nAnd ALT3 and ALT4, they're load balancing.\n\n440\n00:22:24.520 --> 00:22:26.390\nThat's funny they recommend\nthat we do that, but\n\n441\n00:22:26.390 --> 00:22:28.690\nthey weren't doing it themselves\nwith Gmail, were they?\n\n442\n00:22:28.690 --> 00:22:31.090\nWhen I did that look up earlier, right,\n\n443\n00:22:31.090 --> 00:22:35.760\ncuz I did a dig for gmail.com and\nI pulled the MX records.\n\n444\n00:22:36.770 --> 00:22:39.814\nThey're not load balancing in\ntheir own records, right, but\n\n445\n00:22:39.814 --> 00:22:43.433\nthey're pointing to, well I guess\nthese are different servers, right,\n\n446\n00:22:43.433 --> 00:22:46.200\npointing to gmail-smtp-in\nversus pointing to these.\n\n447\n00:22:46.200 --> 00:22:49.230\nSo maybe they have some kind of different\nconfiguration here, a higher SLA or\n\n448\n00:22:49.230 --> 00:22:51.910\nsomething, but\npay attention to these records.\n\n449\n00:22:51.910 --> 00:22:53.670\nYou'll need to,\nwhen you sign up for that service,\n\n450\n00:22:53.670 --> 00:22:56.160\nthey'll give you these records and\nyou'll need to go and enter these in.\n\n451\n00:22:56.160 --> 00:23:00.240\nSo if I was using this,\nI'd need to go and add five MX records.\n\n452\n00:23:00.240 --> 00:23:03.440\nOr if I really wanted to roll the dice, I\ncould just have the first one and be like,\n\n453\n00:23:03.440 --> 00:23:04.610\nit probably won't fail.\n\n454\n00:23:04.610 --> 00:23:07.360\nAnd maybe stop at the second one,\nall right, there, I got two.\n\n455\n00:23:07.360 --> 00:23:09.950\nBut they really recommend you do all five.\n\n456\n00:23:09.950 --> 00:23:13.800\n&gt;&gt; Don, we appreciate you taking the time\nto explain DNS mail exchanger records.\n\n457\n00:23:13.800 --> 00:23:16.840\nNow it does look like we're coming to the\nend of another episode, but before we do\n\n458\n00:23:16.840 --> 00:23:20.450\ndo you have any final words that you'd\nlike to let everybody know about it?\n\n459\n00:23:20.450 --> 00:23:24.540\n&gt;&gt; Just the key things, MX records,\ntime to live is your enemy, right.\n\n460\n00:23:24.540 --> 00:23:26.390\nWhen you put in MX records\nit just takes time for\n\n461\n00:23:26.390 --> 00:23:30.180\nthe to propagate out across the world, so\nalways make sure you monitor the records.\n\n462\n00:23:30.180 --> 00:23:34.010\nA little technique I recommend is\nwhen you use dig or ns lookup,\n\n463\n00:23:34.010 --> 00:23:35.840\nyou can override the server value.\n\n464\n00:23:35.840 --> 00:23:38.830\nAnd I usually like to check a couple\nof different providers just to see.\n\n465\n00:23:38.830 --> 00:23:42.920\nSo for\nexample when I pulled up my MX records,\n\n466\n00:23:42.920 --> 00:23:46.650\nI lucked out in that the hover.com ones,\nthey populated really fast, right.\n\n467\n00:23:46.650 --> 00:23:53.210\nAnd I just did a dig for\nitprotvdemo.com for MX records, right.\n\n468\n00:23:53.210 --> 00:23:57.300\nAnd that went against 8.8.8.8,\nthat's Google's DNS servers.\n\n469\n00:23:57.300 --> 00:24:00.410\nSo I recommend checking other servers too.\n\n470\n00:24:00.410 --> 00:24:05.386\nSo for example if I check @ let's\ndo 4.2.2.1, which is level 3.\n\n471\n00:24:05.386 --> 00:24:07.500\nI can check and\nsee if they've got them too.\n\n472\n00:24:07.500 --> 00:24:10.471\nSo you can check the major DNS providers\nout there to see if they've received\n\n473\n00:24:10.471 --> 00:24:11.028\nthe changes,\n\n474\n00:24:11.028 --> 00:24:14.410\nit's a good way to monitor whether\nyou've propagated across the world.\n\n475\n00:24:14.410 --> 00:24:16.180\n&gt;&gt; Well Don,\nwe appreciate that information.\n\n476\n00:24:16.180 --> 00:24:16.990\nThank you very much.\n\n477\n00:24:16.990 --> 00:24:18.152\nAnd we appreciate you, the viewer.\n\n478\n00:24:18.152 --> 00:24:21.030\nIt does look like we're gonna go ahead and\nwe're gonna wrap this one up.\n\n479\n00:24:21.030 --> 00:24:23.990\nSo signing out for ITProTV,\nI've been you host, Wes Bryan.\n\n480\n00:24:23.990 --> 00:24:25.130\n&gt;&gt; And I'm Don Pezet.\n\n481\n00:24:25.130 --> 00:24:27.082\n&gt;&gt; And we'll see you next time.\n\n482\n00:24:27.082 --> 00:24:33.600\n[MUSIC]\n\n483\n00:24:33.600 --> 00:24:36.728\n&gt;&gt; Thank you for watching ITProTV.\n\n",
          "vimeoId": "194524097"
        },
        {
          "description": "In this episode, Wes and Don explore the world of Sender Policy Framework or SPF records commonly called SPF records. They explain topics like the SPF record format. qualifiers and different mechanisms that can be used. They will also dive into the best practices that should be employed when using SPF records.",
          "length": "1775",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-3-2-configuring_spf_records-111116-PGM.00_29_22_03.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-3-2-configuring_spf_records-111116-PGM.00_29_22_03.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-3-2-configuring_spf_records-111116-PGM.00_29_22_03.Still001-sm.jpg",
          "title": "Configuring SPF Records",
          "transcript": "WEBVTT\n\n1\n00:00:00.290 --> 00:00:03.413\nWelcome to ITProTV,\nI'm your host, Don Pizet.\n\n2\n00:00:03.413 --> 00:00:05.913\n[CROSSTALK]\n\n3\n00:00:05.913 --> 00:00:08.130\n[MUSIC]\n\n4\n00:00:08.130 --> 00:00:11.695\n&gt;&gt; You're watching ITProTV.\n\n5\n00:00:11.695 --> 00:00:14.746\n&gt;&gt; Welcome to another great\nepisode here at ITProTV.\n\n6\n00:00:14.746 --> 00:00:17.692\nI'm your host, Wes Bryan,\nand in today's episode,\n\n7\n00:00:17.692 --> 00:00:20.265\nwe're continuing through\nour DNS TXT skills.\n\n8\n00:00:20.265 --> 00:00:21.945\nAnd joining me back in the studio's today,\n\n9\n00:00:21.945 --> 00:00:25.515\nto lend his expertise on this subject\nis non other than Mr. Don Pezet.\n\n10\n00:00:25.515 --> 00:00:26.855\nDon, how are you doing, sir?\n\n11\n00:00:26.855 --> 00:00:29.775\n&gt;&gt; I'm doing great, Wes, ready to dive\nin and talk about some SPF records,\n\n12\n00:00:29.775 --> 00:00:32.385\nthat's the Sender Policy Framework.\n\n13\n00:00:32.385 --> 00:00:34.815\nAnd most of you, I'm sure, have already\nheard of it, but if you haven't,\n\n14\n00:00:34.815 --> 00:00:37.500\nit's just a simple\n&gt;&gt; Technique that we can use to\n\n15\n00:00:37.500 --> 00:00:41.180\nhelp prevent spam relays\nout there in the world, and\n\n16\n00:00:41.180 --> 00:00:42.340\nSPF records are what powers that.\n\n17\n00:00:42.340 --> 00:00:43.460\nIt's all kind of powered by DNS.\n\n18\n00:00:43.460 --> 00:00:46.980\nSo, first of all let's talk about\nthe problem that we're addressing here and\n\n19\n00:00:46.980 --> 00:00:48.840\nwe'll see how we kind of resolve it.\n\n20\n00:00:48.840 --> 00:00:54.070\nOne of the problems is that all email\nsent on the internet today uses SMTP,\n\n21\n00:00:54.070 --> 00:00:58.540\nthe Simple Mail Transport Protocol and\nSMTP was developed a very,\n\n22\n00:00:58.540 --> 00:01:00.000\nvery long time ago.\n\n23\n00:01:00.000 --> 00:01:02.900\nBack in a much more trustworthy\nenvironment where they didn't have to\n\n24\n00:01:02.900 --> 00:01:04.840\nworry about a lot of\nthe stuff they do now.\n\n25\n00:01:04.840 --> 00:01:10.020\nAnd as a result, when you write an email\nand you send it through an SMTP server,\n\n26\n00:01:10.020 --> 00:01:14.160\nit assumes that the from\naddress is accurate.\n\n27\n00:01:14.160 --> 00:01:17.040\nAnd it does absolutely no\nverification to figure that out.\n\n28\n00:01:17.040 --> 00:01:19.970\nRight.\nSo, I can send an email and\n\n29\n00:01:19.970 --> 00:01:24.240\nput that it was from President\nout Whitehouse like golf.\n\n30\n00:01:24.240 --> 00:01:27.580\nAnd when you receive I think it came\nfrom President of the United States.\n\n31\n00:01:27.580 --> 00:01:31.700\nAnd you can put wherever you want\nit can be billgates@microsoft.com\n\n32\n00:01:31.700 --> 00:01:35.860\nthat's your from address and that you go\n&gt;&gt; SMTP doesn't care.\n\n33\n00:01:35.860 --> 00:01:39.610\nWell, with SPF records we can fix that.\n\n34\n00:01:39.610 --> 00:01:43.080\nWhat an SPF record is a simple\nentry we make in DNS and\n\n35\n00:01:43.080 --> 00:01:48.260\nit says if you receive an email,\nit says it's from my domain,\n\n36\n00:01:48.260 --> 00:01:51.180\nthen it should have come\nfrom one of these servers,\n\n37\n00:01:51.180 --> 00:01:55.645\nwe basically list the email service that\nare approved to relay for our domain.\n\n38\n00:01:55.645 --> 00:02:00.090\nBut if you need an email from\nthe sever that's not in this list\n\n39\n00:02:00.090 --> 00:02:01.430\nthen that's not us.\n\n40\n00:02:01.430 --> 00:02:05.450\nThat's somebody pretending to be us and\nit's probably span I can think away.\n\n41\n00:02:05.450 --> 00:02:10.300\nRight so SPF records let us\ninfluence that is impact and\n\n42\n00:02:10.300 --> 00:02:15.980\nwhat SPF record is a text\nrecord a txt just a text record\n\n43\n00:02:15.980 --> 00:02:22.620\ncreated inside of your NDS zone That lists\nthe approved servers for relaying email.\n\n44\n00:02:22.620 --> 00:02:24.510\nAnd the way you do it is you\nadd each one of them in.\n\n45\n00:02:24.510 --> 00:02:27.500\nAnd there's these little symbols,\n\n46\n00:02:27.500 --> 00:02:30.460\nthey're called qualifiers\nthat you put on each one.\n\n47\n00:02:30.460 --> 00:02:33.160\nSo for example, a plus sign.\n\n48\n00:02:33.160 --> 00:02:36.130\nIf there's a server with a plus sign\nbefore it that means it's good,\n\n49\n00:02:36.130 --> 00:02:38.340\npass email that you\nreceive from that system.\n\n50\n00:02:38.340 --> 00:02:40.040\nThat's a good server.\n\n51\n00:02:40.040 --> 00:02:42.320\nAnd a minus.\n\n52\n00:02:42.320 --> 00:02:43.190\nThat's bad.\n\n53\n00:02:43.190 --> 00:02:46.730\nThat means fail email from this server.\n\n54\n00:02:46.730 --> 00:02:49.490\nThere's a till right a squiggly line.\n\n55\n00:02:49.490 --> 00:02:53.010\nThe squiggly line that means,\nwe're not sure.\n\n56\n00:02:53.010 --> 00:02:54.950\nMaybe it is, maybe it's not.\n\n57\n00:02:54.950 --> 00:02:56.630\nwe'll leave it to your discretion.\n\n58\n00:02:56.630 --> 00:02:59.240\nSo, that's just telling people\nthat we don't really have\n\n59\n00:02:59.240 --> 00:03:00.990\nanything necessarily to say on that.\n\n60\n00:03:00.990 --> 00:03:03.250\nAnd then it's called a soft fail.\n\n61\n00:03:03.250 --> 00:03:07.390\nSo, we may consider it to be bad,\nwe may consider it to be good, but\n\n62\n00:03:07.390 --> 00:03:09.930\nwe're not really kinda picking a side.\n\n63\n00:03:09.930 --> 00:03:13.870\nAnd then the last was a question mark, and\nthe question mark is absolutely neutral.\n\n64\n00:03:13.870 --> 00:03:17.750\nIt's the equivalent of not having a record\nat all and just saying no comment.\n\n65\n00:03:17.750 --> 00:03:23.910\nIt is like pleading the fifth on it, you\njust, I don't have anything to sell off.\n\n66\n00:03:23.910 --> 00:03:25.820\nAnd that what the question mark does.\n\n67\n00:03:25.820 --> 00:03:28.500\nSo we build our list of servers,\n\n68\n00:03:28.500 --> 00:03:32.180\nwe all gonna be using those four symbols\nto dictate what we are telling people.\n\n69\n00:03:32.180 --> 00:03:32.760\nRight.\n\n70\n00:03:32.760 --> 00:03:36.270\nAnd as peer vacant will be very\nsimple they can build it small.\n\n71\n00:03:36.270 --> 00:03:39.820\nOr they can very long depending on\nwhat it is we're trying to provide.\n\n72\n00:03:39.820 --> 00:03:43.040\nSo, in this episode I wanna walk you\nthrough some of the different things that\n\n73\n00:03:43.040 --> 00:03:44.970\nwe can put in there that will\ndifferentiate whether we're gonna have\n\n74\n00:03:44.970 --> 00:03:48.320\na short and simple one or a longer one,\nor something really crazy complex and\n\n75\n00:03:48.320 --> 00:03:52.000\nwe'll see how to build\nthat spf record by hand.\n\n76\n00:03:52.000 --> 00:03:53.240\nAll right.\nSo, let's get started.\n\n77\n00:03:54.380 --> 00:03:56.700\nFirst off, let me just show you\nan example of an SPF record.\n\n78\n00:03:56.700 --> 00:03:59.060\nAnd I'll take ours with ITPro.tv.\n\n79\n00:03:59.060 --> 00:04:03.275\nSo, if I come in and\ndo a dig of ITPro.tv and\n\n80\n00:04:03.275 --> 00:04:07.280\nI'm gonna pull txt records, T-X-T.\n\n81\n00:04:07.280 --> 00:04:11.100\nRemember there isn't, well I shouldn't\nsay there isn't an SPF record,\n\n82\n00:04:11.100 --> 00:04:15.450\nthere actually is an SPF Not\nevery DNS server has it.\n\n83\n00:04:15.450 --> 00:04:18.650\nBut in your DNS server,\nwhen you go and create a new record,\n\n84\n00:04:18.650 --> 00:04:23.050\nyou might actually see an option to\ncreate a record type that's called SPF.\n\n85\n00:04:23.050 --> 00:04:23.970\nAll right?\n\n86\n00:04:23.970 --> 00:04:26.030\nIf you do, don't use it.\n\n87\n00:04:26.030 --> 00:04:28.920\nIn the very early days of SPF,\n\n88\n00:04:28.920 --> 00:04:34.110\nthey decided to create a dedicated\nrecord type called SPF.\n\n89\n00:04:34.110 --> 00:04:34.810\nAll right?\n\n90\n00:04:34.810 --> 00:04:40.170\nAnd they started to push that out but they\ngot a lot of resistance from DNS servers,\n\n91\n00:04:40.170 --> 00:04:43.910\nfrom the people who write BIND and\nMicrosoft, their DNS server and\n\n92\n00:04:43.910 --> 00:04:47.050\nother people, where they didn't\nnecessarily wanna adopt it right away.\n\n93\n00:04:47.050 --> 00:04:50.240\nAnd so, eventually I decided,\nyou know what?\n\n94\n00:04:50.240 --> 00:04:50.950\nLet's just not do that.\n\n95\n00:04:50.950 --> 00:04:52.960\nLet's not have this SPC record anymore.\n\n96\n00:04:52.960 --> 00:04:55.400\nAnd instead,\nlet's just use a regular old text record.\n\n97\n00:04:55.400 --> 00:04:57.530\nBecause everybody supports that right now.\n\n98\n00:04:57.530 --> 00:04:59.470\nAnd DNS servers don't have to change.\n\n99\n00:04:59.470 --> 00:05:01.030\nAnd so they switched.\n\n100\n00:05:01.030 --> 00:05:03.250\nAnd when SPF version one was pushed.\n\n101\n00:05:03.250 --> 00:05:05.450\nThe center policy framework\nversion one was pushed.\n\n102\n00:05:05.450 --> 00:05:07.350\nIt just used regular TXT records.\n\n103\n00:05:07.350 --> 00:05:09.420\nSo, you will encounter some systems.\n\n104\n00:05:09.420 --> 00:05:11.270\nI know Amazon route 53 does it.\n\n105\n00:05:11.270 --> 00:05:13.470\nWould they still support\nthe old SPF record?\n\n106\n00:05:13.470 --> 00:05:15.920\nDon't use it because nobody\nlooks at those anymore and\n\n107\n00:05:15.920 --> 00:05:17.610\nit completely defeats the purpose.\n\n108\n00:05:17.610 --> 00:05:22.490\nSo, if I look for an SPF record like\nthat for ITProTV, I don't get one.\n\n109\n00:05:22.490 --> 00:05:25.070\nThere is no entry for it, right?\n\n110\n00:05:25.070 --> 00:05:26.880\nBut if I change that to a TXT,\n\n111\n00:05:26.880 --> 00:05:31.680\na text record,\nnow I'm gonna get our SPF record back.\n\n112\n00:05:31.680 --> 00:05:32.840\nAnd here it is.\n\n113\n00:05:32.840 --> 00:05:33.950\nHere's a record.\n\n114\n00:05:33.950 --> 00:05:37.910\nIt's attached to our domain and\nit's just a regular old TXT record.\n\n115\n00:05:37.910 --> 00:05:42.200\nAnd then inside of it is this\nbig long string of text, okay?\n\n116\n00:05:42.200 --> 00:05:45.300\nLet me take that and I'm gonna move\nit over just into like a notepad\n\n117\n00:05:45.300 --> 00:05:49.090\nwindow here so we can kinda break\ndown what we're seeing, okay?\n\n118\n00:05:49.090 --> 00:05:52.008\nAnd, apparently I'm gonna get a blue\nbackground when I do that because.\n\n119\n00:05:52.008 --> 00:05:54.422\nWhy not?\n\n120\n00:05:54.422 --> 00:05:57.140\nNow, I'm just making things worse,\naren't I?\n\n121\n00:05:57.140 --> 00:06:03.660\nSo anyhow, so what we're going to see is\neach entry here indicating something.\n\n122\n00:06:03.660 --> 00:06:06.800\nFirst off, it's in a text record, and\nso it's wrapped up in quote marks.\n\n123\n00:06:06.800 --> 00:06:10.610\nIt's wrapped up in quote marks so\nit knows this is all one block of text.\n\n124\n00:06:10.610 --> 00:06:13.330\nSo, that's the first thing we\nneed to know about SPF records.\n\n125\n00:06:13.330 --> 00:06:20.070\nThen, at the very beginning is this,\nv=spf1, all right.\n\n126\n00:06:20.070 --> 00:06:23.890\nNow, that's telling me\nthat the spf version is 1.\n\n127\n00:06:23.890 --> 00:06:27.320\nThere is an spf version 2,\nit's very recent.\n\n128\n00:06:27.320 --> 00:06:30.960\nIt hasn't been adopted by everybody yet,\nso most people still have version 1.\n\n129\n00:06:30.960 --> 00:06:32.220\nWhich is exactly what we have here.\n\n130\n00:06:32.220 --> 00:06:37.950\nSo, v=spf1 is what we're gonna\nstart with And then after that,\n\n131\n00:06:37.950 --> 00:06:42.840\nevery other entry here is\nindicating some kind of server,\n\n132\n00:06:42.840 --> 00:06:48.480\na server that is allowed to send email for\nITproTV.\n\n133\n00:06:48.480 --> 00:06:53.650\nSo, if you were to forge\nan email as Don on ITproTV,\n\n134\n00:06:53.650 --> 00:06:55.960\nyou Need you server to be in this list.\n\n135\n00:06:55.960 --> 00:06:59.160\nAnd if you're not in the list, then\nyou'll be potentially flagged as spam.\n\n136\n00:06:59.160 --> 00:07:02.370\n&gt;&gt; All right, Don, I'm gonna jump ahead\nat the risk of falling on ym face here.\n\n137\n00:07:02.370 --> 00:07:05.110\nit looks like the mx in there,\nwould that be a mail exchanger record?\n\n138\n00:07:05.110 --> 00:07:06.970\nIs that what we're seeing\nas part of the reply?\n\n139\n00:07:06.970 --> 00:07:10.980\n&gt;&gt; Yeah, so this one of the possible\nentries, and let's go through each one.\n\n140\n00:07:10.980 --> 00:07:12.450\nWe'll start with mx.\n\n141\n00:07:12.450 --> 00:07:15.780\nBasically when you have\nan entry that says mx, alright,\n\n142\n00:07:15.780 --> 00:07:20.930\nfirst thing you might notice there's no\nplus, no minus, no till, no question mark.\n\n143\n00:07:20.930 --> 00:07:23.250\nWhere the heck is my qualifier alright.\n\n144\n00:07:23.250 --> 00:07:26.910\nIf you don't put a qualifier\nthe plus is the default.\n\n145\n00:07:26.910 --> 00:07:32.040\nSo, that mx is actually kind of\n+mx is what it really is, alright.\n\n146\n00:07:32.040 --> 00:07:34.978\nSo, if you don't see a qualifier\nit is a plus that means pass this.\n\n147\n00:07:34.978 --> 00:07:40.320\nRight so\n+mx that means any mail exchanger record.\n\n148\n00:07:40.320 --> 00:07:42.720\nAny mx record for that domain.\n\n149\n00:07:42.720 --> 00:07:47.212\nSo, this is itpro.tv so\nanybody that's an mx record for\n\n150\n00:07:47.212 --> 00:07:50.682\nitpro.tv is going to be approved, right.\n\n151\n00:07:50.682 --> 00:07:55.103\nSo, you know in another episode,\nwe used the ITProTV demo domain, right,\n\n152\n00:07:55.103 --> 00:07:57.604\nthis guy right here, ITProTVdemo.com.\n\n153\n00:07:57.604 --> 00:08:02.751\nAnd when I look at ITProTVdemo.com I\ncan look down here and\n\n154\n00:08:02.751 --> 00:08:05.701\nsee how I've got two MX records?\n\n155\n00:08:05.701 --> 00:08:09.220\nOne for mail1 and one for mail2?\n\n156\n00:08:09.220 --> 00:08:13.860\nWell, if I just put +MX,\nboth of these guys would be approved.\n\n157\n00:08:13.860 --> 00:08:14.400\nAlright?\n\n158\n00:08:14.400 --> 00:08:17.609\nNow, that doesn't always make sense.\n\n159\n00:08:17.609 --> 00:08:21.929\nMX records are the servers\nthat you receive email on.\n\n160\n00:08:23.050 --> 00:08:24.990\nNot necessarily the ones you send on.\n\n161\n00:08:24.990 --> 00:08:29.540\nMany companies have dedicated\nSMTP servers for sending and\n\n162\n00:08:29.540 --> 00:08:32.110\nseparate SMTP servers for receiving.\n\n163\n00:08:32.110 --> 00:08:36.900\nAnd if that's the case,\nyour MX servers never actually send email,\n\n164\n00:08:36.900 --> 00:08:38.110\nthey just receive.\n\n165\n00:08:38.110 --> 00:08:40.080\nSo you wouldn't want to approve them.\n\n166\n00:08:40.080 --> 00:08:42.920\nBut there's plenty of places\nwhere your MX records\n\n167\n00:08:42.920 --> 00:08:44.950\nare pointing to servers that do both,\nsending and receiving.\n\n168\n00:08:44.950 --> 00:08:49.130\nMaybe you have a local exchange or\nsomething in that nature.\n\n169\n00:08:49.130 --> 00:08:52.340\nIn those environments,\nthe servers you use for\n\n170\n00:08:52.340 --> 00:08:54.830\nMX records would also be the senders and\nthe receivers.\n\n171\n00:08:54.830 --> 00:08:59.650\nIf you have like a barracuda anti spam\nfire wall, you want all of your email to\n\n172\n00:08:59.650 --> 00:09:02.080\ngo through it, sending and\nreceiving, so that it gets filtered.\n\n173\n00:09:02.080 --> 00:09:04.810\nAnd so, you'd want to approve that for\nsending email, right.\n\n174\n00:09:04.810 --> 00:09:06.360\nSo keep that in mind.\n\n175\n00:09:06.360 --> 00:09:09.330\nSome people just assume you have to\nhave that MX entry, and you don't.\n\n176\n00:09:09.330 --> 00:09:13.190\nIf your MX servers don't actually send\nemail, they don't need to be approved.\n\n177\n00:09:14.300 --> 00:09:18.920\nSo for ITProTV demo, if I want to approve\nthese two guys, I could do a +MX, and\n\n178\n00:09:18.920 --> 00:09:20.332\nit would get them both.\n\n179\n00:09:20.332 --> 00:09:22.500\nAll right,\nthat's certainly one way to do it.\n\n180\n00:09:22.500 --> 00:09:23.560\nAnd we'll see that there's\n\n181\n00:09:23.560 --> 00:09:25.510\nseveral different ways to\nachieve the same goal, right.\n\n182\n00:09:25.510 --> 00:09:31.661\nSo +MX, that's any MX record\nwill be approved, all right.\n\n183\n00:09:31.661 --> 00:09:34.030\nWe could, we could go crazy right?\n\n184\n00:09:34.030 --> 00:09:37.050\nThere's a few things that we can do\nif we wanted to really shorten this\n\n185\n00:09:37.050 --> 00:09:37.840\nrecord, right.\n\n186\n00:09:37.840 --> 00:09:44.831\nSo if I did something like v=spf1 and\nI got to put in quotes, right?\n\n187\n00:09:44.831 --> 00:09:50.210\nAnd then I said +mx, and I could leave\nthe plus off so let's just say mx, right.\n\n188\n00:09:50.210 --> 00:09:52.890\nThat's gonna prove the mail servers.\n\n189\n00:09:52.890 --> 00:09:55.360\nWhat about everybody\nelse that's out there?\n\n190\n00:09:55.360 --> 00:09:56.860\nI mean to say,\nwhat I'm gonna do with everybody else?\n\n191\n00:09:56.860 --> 00:09:58.640\nWe do that with the all command.\n\n192\n00:09:58.640 --> 00:10:00.830\nOkay, if I say +all,\n\n193\n00:10:00.830 --> 00:10:05.220\nthat means everybody is allowed\nto send email as itprotvdemo.com.\n\n194\n00:10:05.220 --> 00:10:07.300\nI don't want that, right?\n\n195\n00:10:07.300 --> 00:10:10.600\nI could say -all, now we're cooking.\n\n196\n00:10:10.600 --> 00:10:13.800\nRight?\nNow, if you receive an email,\n\n197\n00:10:13.800 --> 00:10:16.720\nfrom somebody at itprotvdemo.com,\n\n198\n00:10:16.720 --> 00:10:20.240\nit better be coming from one of our\nservers that's got an MX record.\n\n199\n00:10:20.240 --> 00:10:25.790\nIf it's coming from anybody else,\nit's spam, reject it, throw it away.\n\n200\n00:10:25.790 --> 00:10:29.560\nThis is a nice short record that'll\nactually work for a lot of small and\n\n201\n00:10:29.560 --> 00:10:30.260\nmedium businesses.\n\n202\n00:10:31.320 --> 00:10:32.870\nBut let me tell you the problem.\n\n203\n00:10:32.870 --> 00:10:34.935\nSo here are some of the problems\nyou're gonna have with this.\n\n204\n00:10:34.935 --> 00:10:37.900\nWhat if I take my laptop and\nI go home, and\n\n205\n00:10:37.900 --> 00:10:41.860\nI'm firing off emails\nfrom my laptop at home.\n\n206\n00:10:41.860 --> 00:10:46.150\nWell, I have a cable provider\nthat does not let you connect\n\n207\n00:10:46.150 --> 00:10:48.520\nto external servers on port 25.\n\n208\n00:10:48.520 --> 00:10:52.310\nInstead it makes you connect\nto their SMTP server.\n\n209\n00:10:52.310 --> 00:10:56.200\nSo, if I'm at home and I start sending\nemail, I'm actually going through my ISPs,\n\n210\n00:10:56.200 --> 00:10:58.160\nSMTPs servers, not the ones here at work.\n\n211\n00:10:58.160 --> 00:11:02.880\nI'm on the list, anything I send from\nhome is now gonna be considered spam.\n\n212\n00:11:02.880 --> 00:11:05.990\nWhat if I forward my\nemail to something else.\n\n213\n00:11:05.990 --> 00:11:09.930\nI forward my email over to Gmail and\nI reply to something over there in Gmail.\n\n214\n00:11:09.930 --> 00:11:11.430\nIt's gonna go through their SMTP servers,\n\n215\n00:11:11.430 --> 00:11:12.980\nthey're not on the list\nit's gonna be spam.\n\n216\n00:11:14.460 --> 00:11:16.560\nWhat if I use a mailing list server?\n\n217\n00:11:16.560 --> 00:11:19.210\nLike MailChimp or SendGrid or\nsomebody like that?\n\n218\n00:11:20.350 --> 00:11:23.135\nI'm sending out newsletters\nthrough MailChimp.\n\n219\n00:11:24.415 --> 00:11:25.520\nMailChimp's not in the list.\n\n220\n00:11:25.520 --> 00:11:26.780\nThose are all gonna go to spam.\n\n221\n00:11:26.780 --> 00:11:29.980\nI'm now wasting all my money and\ntime sending out those newsletters, right.\n\n222\n00:11:29.980 --> 00:11:33.690\nSo when you build an SPF record,\nyou have to think of\n\n223\n00:11:33.690 --> 00:11:37.830\nevery scenario that your employees\nuse when they send an email.\n\n224\n00:11:37.830 --> 00:11:39.650\nAnd that's where it gets\nreally challenging.\n\n225\n00:11:39.650 --> 00:11:41.384\nBut fortunately we can\nadd more records and\n\n226\n00:11:41.384 --> 00:11:43.564\nwe can take into account\nthose other people, right.\n\n227\n00:11:43.564 --> 00:11:48.320\nSo +MX, here, I'll leave the plus off\ncuz it can be minus, it can be whatever.\n\n228\n00:11:48.320 --> 00:11:50.560\nI'm gonna add in all, right.\n\n229\n00:11:50.560 --> 00:11:55.160\nSo all would be that's everybody,\nall right.\n\n230\n00:11:55.160 --> 00:11:55.990\nWho else do we have?\n\n231\n00:11:55.990 --> 00:12:01.010\nSo in addition to those,\nwe've got ip4 and ip6.\n\n232\n00:12:03.210 --> 00:12:07.300\nYou can actually approve\na specific IP address, right?\n\n233\n00:12:07.300 --> 00:12:12.840\nAnd this would be an IPv4 host or\nsubnet, right?\n\n234\n00:12:12.840 --> 00:12:15.990\nNow, a lot people don't know you\ncan do subnets on these things.\n\n235\n00:12:15.990 --> 00:12:19.680\nSo for example, if I were to do\n\n236\n00:12:19.680 --> 00:12:24.852\na +209.251.159.177/\n\n237\n00:12:24.852 --> 00:12:28.850\nwhat is that, a /28 I think.\n\n238\n00:12:28.850 --> 00:12:31.082\nThat's what that network is.\n\n239\n00:12:31.082 --> 00:12:34.545\nIf I just stopped at 177 like that.\n\n240\n00:12:34.545 --> 00:12:35.870\nActually I kinda forgot the important\npart which is the ip4:, there.\n\n241\n00:12:38.610 --> 00:12:44.900\nSo if I had stopped with just\nthe highlighted part here,\n\n242\n00:12:44.900 --> 00:12:48.710\nso +ip4:209.251.159.177,\nthat would have proved that one IP.\n\n243\n00:12:48.710 --> 00:12:52.080\nIf you received an email from\nitprotvdemo.com and it comes from this IP,\n\n244\n00:12:52.080 --> 00:12:53.570\nit's fine, right?\n\n245\n00:12:53.570 --> 00:12:58.320\nBut by adding that /28,\nnow I'm getting a range of IPs.\n\n246\n00:12:58.320 --> 00:13:01.520\nI might have a block of IPs that I\nhave email servers parked behind,\n\n247\n00:13:01.520 --> 00:13:03.950\nthis would approve that whole block,\nall right?\n\n248\n00:13:03.950 --> 00:13:06.206\nSo, neat way to kind of\nmodify that with ip4.\n\n249\n00:13:06.206 --> 00:13:08.240\nSame thing for ip6.\n\n250\n00:13:08.240 --> 00:13:12.580\nIf we've got a IP version six addresses\nout there, I could come in and\n\n251\n00:13:12.580 --> 00:13:16.230\nI could add whatever those happen to be,\n\n252\n00:13:16.230 --> 00:13:20.070\nthese addresses are all over the place so\nI'm not going to type a ton.\n\n253\n00:13:20.070 --> 00:13:22.910\nBut I can come in, and\nI can specify that range, too.\n\n254\n00:13:22.910 --> 00:13:26.050\nAnd now, there's an entire ip6 block\nthat I've approved, all right?\n\n255\n00:13:27.160 --> 00:13:29.550\nAs we start building this,\nmy list is getting bigger and bigger and\n\n256\n00:13:29.550 --> 00:13:30.650\nbigger, right.\n\n257\n00:13:30.650 --> 00:13:32.650\nI want to warn you about one thing.\n\n258\n00:13:32.650 --> 00:13:36.790\nWhen you add entries here, we can\nactually add them by host name also.\n\n259\n00:13:36.790 --> 00:13:42.090\nAnd if you add them by host name,\nwhoever pulls this record, they\n\n260\n00:13:42.090 --> 00:13:46.040\npull the text record and then they have\nto turn around and do a DNS lookup also.\n\n261\n00:13:46.040 --> 00:13:47.390\nIn the Center Policy framework,\n\n262\n00:13:47.390 --> 00:13:51.870\nit's defined that you're not allowed\nanymore than ten DNS lookups.\n\n263\n00:13:51.870 --> 00:13:54.800\nSo if I'm doing host names here,\nI need to be careful.\n\n264\n00:13:54.800 --> 00:13:59.040\nLook at ITPROTV's, we've got\ninclude:spf.protection.outlook.com.\n\n265\n00:13:59.040 --> 00:14:01.950\nI'm gonna do a DNS lookup to resolve that.\n\n266\n00:14:01.950 --> 00:14:03.730\nI've got to include:sendgrid.net.\n\n267\n00:14:03.730 --> 00:14:05.420\nI'm gonna have to do a lookup for that.\n\n268\n00:14:05.420 --> 00:14:07.160\nI gotta include:insfusionmail.com.\n\n269\n00:14:07.160 --> 00:14:08.440\nI'm gonna do a DNS lookup.\n\n270\n00:14:08.440 --> 00:14:10.140\nThat's three DNS lookups.\n\n271\n00:14:10.140 --> 00:14:13.290\nIf you get to ten lookups,\nthe 11th one gets ignored and\n\n272\n00:14:13.290 --> 00:14:14.000\nthe 12th thing gets ignored.\n\n273\n00:14:14.000 --> 00:14:16.870\nYour SPF record is now corrupt and\nit won't work.\n\n274\n00:14:16.870 --> 00:14:21.880\nSo, be aware that you only get ten\nlookups in a SPF record, for names.\n\n275\n00:14:21.880 --> 00:14:23.580\nFor IPs, you can have as many as you want.\n\n276\n00:14:23.580 --> 00:14:25.230\nWe don't have to do a DNS lookup for\nthe IPs.\n\n277\n00:14:25.230 --> 00:14:27.610\nSo you can go way over ten with IPs.\n\n278\n00:14:27.610 --> 00:14:32.230\nSo it is beneficial to do IP\naddresses unless they change.\n\n279\n00:14:32.230 --> 00:14:35.490\nIf you have IP addresses that\nfrequently change that's a problem, but\n\n280\n00:14:35.490 --> 00:14:37.050\nmost of our mail servers have static IPs.\n\n281\n00:14:37.050 --> 00:14:37.950\nSo it's not that big of a deal.\n\n282\n00:14:40.002 --> 00:14:43.310\nAll right,\nsome of the other record types we can do.\n\n283\n00:14:43.310 --> 00:14:44.890\nSo that was IPv4 and IPv6.\n\n284\n00:14:44.890 --> 00:14:47.260\nWe've got A, right.\n\n285\n00:14:47.260 --> 00:14:50.820\nIf I want to do a name, so I just on\nall about names and then I mention A.\n\n286\n00:14:50.820 --> 00:14:55.900\nIf I want to do a name,\ninstead of saying +ip blah, blah, blah,\n\n287\n00:14:55.900 --> 00:15:01.570\nI could say +a, and now I'm talking\nabout an A record, an A record in DNS.\n\n288\n00:15:01.570 --> 00:15:05.794\nAnd it might be mail1.itprotvdemo.com,\nright?\n\n289\n00:15:05.794 --> 00:15:07.930\nI'm pointing to that server specifically.\n\n290\n00:15:07.930 --> 00:15:12.590\nNow, the thing here, though, is, I'm gonna\nhave to do a DNS lookup to resolve that.\n\n291\n00:15:12.590 --> 00:15:17.510\nSo if I haven't taken that into account,\nshoot, now, I left the colon out.\n\n292\n00:15:17.510 --> 00:15:19.020\nYou have to do a colon on these things.\n\n293\n00:15:19.020 --> 00:15:21.180\nOtherwise, they don't quite work.\n\n294\n00:15:21.180 --> 00:15:25.080\nAnyhow, so it is A record for\nmail1.itprotv.com.\n\n295\n00:15:25.080 --> 00:15:26.420\nAnybody who pulls a DNS lookup.\n\n296\n00:15:26.420 --> 00:15:31.190\nSo that's where I've gotta watch out for\nthe number of DNS lookups I do.\n\n297\n00:15:31.190 --> 00:15:32.270\nAll right.\n\n298\n00:15:32.270 --> 00:15:33.130\nThere's another one.\n\n299\n00:15:33.130 --> 00:15:36.740\nI don't have it in my notes here,\nbut you can do PTR.\n\n300\n00:15:36.740 --> 00:15:38.550\nOr I can point to a pointer instead.\n\n301\n00:15:38.550 --> 00:15:40.000\nThose aren't usually used for\nspam as much,\n\n302\n00:15:40.000 --> 00:15:41.950\nas they are for real-time blacklists.\n\n303\n00:15:41.950 --> 00:15:44.270\nBut there is the ability\nto do that with PTRs too.\n\n304\n00:15:44.270 --> 00:15:46.450\nAll right, I've already talked about MX.\n\n305\n00:15:46.450 --> 00:15:47.820\nThere's one more that I wanna talk about,\nand\n\n306\n00:15:47.820 --> 00:15:50.350\nthat's the one that I got right up here,\nwhich is this include.\n\n307\n00:15:50.350 --> 00:15:52.470\nOkay, what is include?\n\n308\n00:15:52.470 --> 00:15:55.281\nWell, if you use a third\nparty email service, right?\n\n309\n00:15:55.281 --> 00:15:58.558\nSo, for example the ITProTV Newsletter,\nit goes out to Sendgrid.\n\n310\n00:15:58.558 --> 00:16:01.343\nSo, they're sending email on our behalf.\n\n311\n00:16:01.343 --> 00:16:03.250\nThey have their own SPF record.\n\n312\n00:16:03.250 --> 00:16:09.284\nAnd if I use include, what include does\nis says if you get an email from itprotv,\n\n313\n00:16:09.284 --> 00:16:14.630\nthen look at our SPF record, and\nthen look at their SPF record also.\n\n314\n00:16:14.630 --> 00:16:17.970\nAnd just see do we have a match\nbetween the two, right?\n\n315\n00:16:17.970 --> 00:16:21.550\nIt doesn't technically combine them,\nit treats them as separate but\n\n316\n00:16:21.550 --> 00:16:23.350\nit's just those two look ups against it.\n\n317\n00:16:23.350 --> 00:16:25.647\nIf I match in the first one it doesn't\neven bother to go to the second\n\n318\n00:16:25.647 --> 00:16:26.147\none, right.\n\n319\n00:16:26.147 --> 00:16:28.210\nSo that's why it's not combining them.\n\n320\n00:16:28.210 --> 00:16:30.970\nBut, if it doesn't match the first one,\nit's gotta go to the second one and\n\n321\n00:16:30.970 --> 00:16:33.830\nthat makes it the same effect\njust combining it, right.\n\n322\n00:16:33.830 --> 00:16:37.560\nSo, we're including sendgrid, so\nlet's take a look at what that means.\n\n323\n00:16:37.560 --> 00:16:41.010\nIf I go to my terminal, and\n\n324\n00:16:41.010 --> 00:16:45.970\nI can do the dig itpro.tv and\nlook for the text record, right.\n\n325\n00:16:47.020 --> 00:16:52.070\nSo, here's record where we include\nOutlook and we also include SendGrid.\n\n326\n00:16:52.070 --> 00:16:54.510\nAnd then I can pull up sendgrids, and so\n\n327\n00:16:54.510 --> 00:16:58.430\nI'll do a sendgrid.net and\nI'll look at their record.\n\n328\n00:16:58.430 --> 00:17:01.370\nAnd look at their record,\nsee how their using almost entirely IPs?\n\n329\n00:17:01.370 --> 00:17:06.370\nAnd that's because they have so\nmany email servers that if they did names\n\n330\n00:17:06.370 --> 00:17:09.480\nthey'd go way over ten and\nso they're doing sub nets.\n\n331\n00:17:09.480 --> 00:17:12.330\nThere's IPv4 and\nhere's a /27 that they've got.\n\n332\n00:17:12.330 --> 00:17:16.780\nHere's a /24 that's 254 IPs in there,\nright?\n\n333\n00:17:16.780 --> 00:17:20.010\nThey've got a lot of mail servers\nthat's what they do, professionally.\n\n334\n00:17:20.010 --> 00:17:21.152\nThat's their gig.\n\n335\n00:17:21.152 --> 00:17:24.081\nAnd here's another IPv4 range\nanother one and another one.\n\n336\n00:17:24.081 --> 00:17:28.596\nAnd they're including sendgrid.biz\nwhich is what they actually use for\n\n337\n00:17:28.596 --> 00:17:31.360\ntheir own internal business emails.\n\n338\n00:17:31.360 --> 00:17:35.320\nSo, right there,\nthat's getting rolled up into ITProTVs.\n\n339\n00:17:35.320 --> 00:17:40.360\nSo, if you get an email from ITPro.TV and\nit's from SendGrid, it's okay, right?\n\n340\n00:17:40.360 --> 00:17:41.480\nWe use that service.\n\n341\n00:17:41.480 --> 00:17:45.850\nAnd if we ever stop using that service,\nwe'll remove these from our MX records.\n\n342\n00:17:45.850 --> 00:17:48.850\nI mean from our TXT or SPF record.\n\n343\n00:17:48.850 --> 00:17:51.820\nAnd that way,\nif somebody at SendGrid gets nasty and\n\n344\n00:17:51.820 --> 00:17:56.110\nsays, they stopped using us, let's\nstart sending out spam on their behalf.\n\n345\n00:17:56.110 --> 00:18:00.820\nWell, they've been removed from the SPF\nrecord and so that will spam to go away.\n\n346\n00:18:00.820 --> 00:18:01.870\nThat kinda solves that problem.\n\n347\n00:18:04.040 --> 00:18:08.174\nAll right, so include is very powerful\njust include people that you know\n\n348\n00:18:08.174 --> 00:18:12.127\nare gonna be relaying for you,\nservice that you pay for, all right.\n\n349\n00:18:12.127 --> 00:18:15.701\nSo if I wanna build an SPF record for\nitprotvdemo.com,\n\n350\n00:18:15.701 --> 00:18:18.060\nmines actually pretty easy.\n\n351\n00:18:18.060 --> 00:18:20.940\nBecause I've got my two MX servers.\n\n352\n00:18:20.940 --> 00:18:21.750\nI want them to send.\n\n353\n00:18:21.750 --> 00:18:24.100\nI don't need the plus sign,\nI can get rid of that.\n\n354\n00:18:24.100 --> 00:18:28.680\nBut I don't necessarily want\nanybody else sending on our behalf.\n\n355\n00:18:28.680 --> 00:18:31.130\nBut this is a pretty hard\nlimit to put in place.\n\n356\n00:18:31.130 --> 00:18:32.890\nIf you put this in place right now,\n\n357\n00:18:32.890 --> 00:18:37.330\nemail from itprotvdemo.com from anywhere\nelse in the world is gonna be rejected.\n\n358\n00:18:37.330 --> 00:18:40.740\nAnd my end users might not be read for\nthat, there might be scenarios where email\n\n359\n00:18:40.740 --> 00:18:42.650\nis still being forwarded\nthat I don't know about.\n\n360\n00:18:42.650 --> 00:18:46.770\nAnd so the recommendation is when you\nfirst put an SPF record in place,\n\n361\n00:18:46.770 --> 00:18:50.500\nthat you don't do a dash,\ninstead you do a tilde, okay.\n\n362\n00:18:50.500 --> 00:18:55.750\nWhen you do a tilde, what you're saying\nis, to the best of my knowledge,\n\n363\n00:18:55.750 --> 00:18:58.360\nall the email's gonna be\ncoming from these MX records.\n\n364\n00:18:58.360 --> 00:19:03.394\nBut if you get an email from someone else,\nit's not guaranteed to be spam.\n\n365\n00:19:03.394 --> 00:19:05.900\nIt's likely to be spam,\nbut it's not guaranteed.\n\n366\n00:19:05.900 --> 00:19:10.860\nAnd when an email server sees that they\ndo a spam confidence level, an SCL,\n\n367\n00:19:10.860 --> 00:19:16.320\nand so a rating on a scale of zero to\nten over whether that email is spam.\n\n368\n00:19:16.320 --> 00:19:19.950\nTen it's absolutely spam and\nzero it's not.\n\n369\n00:19:19.950 --> 00:19:22.820\nAnd each little characteristic\nof the email can\n\n370\n00:19:22.820 --> 00:19:24.460\nincrease that number a little bit.\n\n371\n00:19:24.460 --> 00:19:28.090\nWell, if you get an email from a server\nthat's listed with a tilde like this,\n\n372\n00:19:28.090 --> 00:19:30.050\nit increases just a little bit.\n\n373\n00:19:30.050 --> 00:19:34.040\nIf it's got a dash or\na minus, it increases a lot.\n\n374\n00:19:34.040 --> 00:19:35.800\nBasically, guaranteeing it to be spam.\n\n375\n00:19:35.800 --> 00:19:39.120\nSo, you roll out like\nthis in the initial base.\n\n376\n00:19:39.120 --> 00:19:42.180\nAnd then after you've had\na chance to verify that\n\n377\n00:19:42.180 --> 00:19:45.520\nemails are not reeling from anywhere else,\nthen you change it to a dash.\n\n378\n00:19:45.520 --> 00:19:47.838\nAnd now it become far more aggressive.\n\n379\n00:19:47.838 --> 00:19:50.857\nSo if I were to take that record, and\n\n380\n00:19:50.857 --> 00:19:55.400\njump back over to my hover\npage I can get that created.\n\n381\n00:19:55.400 --> 00:19:59.170\nNow when I create the record\nit is just a TXT record.\n\n382\n00:19:59.170 --> 00:20:01.430\nSo I'm gonna add a new entry.\n\n383\n00:20:01.430 --> 00:20:04.490\nThe hostname is actually\ngonna be tied to the domain.\n\n384\n00:20:04.490 --> 00:20:06.580\nSo you can either leave it blank or\nyou can type in @.\n\n385\n00:20:06.580 --> 00:20:08.700\nThe official way to do it is\ntype an @ symbol in there, so\n\n386\n00:20:08.700 --> 00:20:10.080\nthat's what I'm gonna do.\n\n387\n00:20:10.080 --> 00:20:13.030\nAnd for\nthe record type I'm just gonna choose TXT.\n\n388\n00:20:13.030 --> 00:20:15.900\nNow a text record can hold anything,\nanything you want.\n\n389\n00:20:15.900 --> 00:20:19.477\nYou could put the, I don't know,\nGettysburg address.\n\n390\n00:20:19.477 --> 00:20:22.630\nYou just type it in there and\nnow you got a text record for it right.\n\n391\n00:20:22.630 --> 00:20:27.450\nSo, what makes this an SPF record is not\nthe fact that it's a TXT, that's generic.\n\n392\n00:20:27.450 --> 00:20:32.495\nBut the fact that we start with v=spf1,\nright.\n\n393\n00:20:32.495 --> 00:20:34.850\nNow it knows it's an SPF record.\n\n394\n00:20:34.850 --> 00:20:36.950\nAnd I'm gonna approve my MX servers and\n\n395\n00:20:36.950 --> 00:20:41.610\nI'm going to do a softfail\non everybody else, okay?\n\n396\n00:20:41.610 --> 00:20:43.840\nAnd when I create that, I can save it.\n\n397\n00:20:45.540 --> 00:20:48.730\nI got an invalid syntax.\n\n398\n00:20:48.730 --> 00:20:50.290\nThey make me do it.\n\n399\n00:20:50.290 --> 00:20:51.780\nQuotes so\nlet me just take those quotes out.\n\n400\n00:20:52.860 --> 00:20:55.850\nThe official record has quotes around it,\nbut\n\n401\n00:20:55.850 --> 00:20:59.730\nin this user interface here it's not\nrequiring me to put the quotes on it.\n\n402\n00:20:59.730 --> 00:21:01.110\nWe'll see the quotes here in a minute.\n\n403\n00:21:01.110 --> 00:21:03.350\nSo how it's listing it here\nit doesn't have quotes.\n\n404\n00:21:03.350 --> 00:21:05.390\nBut I can guarantee on\nthe backend it will.\n\n405\n00:21:05.390 --> 00:21:09.670\nSo let me jump to my terminal, and\nwe'll see those quotes appear.\n\n406\n00:21:09.670 --> 00:21:11.940\nAnd that's gonna come down to\nthe user interface you're using.\n\n407\n00:21:11.940 --> 00:21:14.430\nIf you're doing bind, and\nyou're configuring this in text files,\n\n408\n00:21:14.430 --> 00:21:15.640\nyou'll need those quotes.\n\n409\n00:21:15.640 --> 00:21:18.240\nIf you're doing it here in this web UI,\napparently I don't need it.\n\n410\n00:21:18.240 --> 00:21:22.473\nSo I'm gonna do a lookup for\nitprotvdemo.com.\n\n411\n00:21:22.473 --> 00:21:24.690\nAnd I'm gonna look for TXT records.\n\n412\n00:21:24.690 --> 00:21:26.270\nAnd when I go and pull it.\n\n413\n00:21:26.270 --> 00:21:28.750\nThere's my record and\nthere's those quotes, right.\n\n414\n00:21:28.750 --> 00:21:29.958\nSo that's kind of important.\n\n415\n00:21:29.958 --> 00:21:34.181\nSo now, any email server that receives\nan email from itprotvdemo.com,\n\n416\n00:21:34.181 --> 00:21:38.360\nis gonna look for this record and\nit's gonna see MX is approved.\n\n417\n00:21:38.360 --> 00:21:40.300\nAnd now it's gotta do another lookup.\n\n418\n00:21:40.300 --> 00:21:44.960\nNow it's gotta do a lookup for MX,\nand it gets these two servers.\n\n419\n00:21:44.960 --> 00:21:47.760\nAnd now it's gotta do another lookup\n\n420\n00:21:47.760 --> 00:21:51.340\nof both of those servers to\nget their IP addresses, right?\n\n421\n00:21:51.340 --> 00:21:54.370\nAnd so it's gonna have to do a look up for\nmail one and mail two and\n\n422\n00:21:54.370 --> 00:21:57.890\nsee if that matches the server that\njust connected, because when you connect\n\n423\n00:21:57.890 --> 00:22:02.420\nwith SMTP, it's really just your IP\naddress that's being shared, right?\n\n424\n00:22:02.420 --> 00:22:05.910\nSo, the syntax that I just\nput in there certainly works.\n\n425\n00:22:05.910 --> 00:22:07.630\nBut it's gonna slow down\nconnections a little bit.\n\n426\n00:22:07.630 --> 00:22:09.050\nIt's a little more work\non the DNS servers.\n\n427\n00:22:09.050 --> 00:22:12.610\nNow, this DNS server is hosted by\nhover.com, so what do I care, right?\n\n428\n00:22:12.610 --> 00:22:14.660\nBut maybe they're a little slow.\n\n429\n00:22:14.660 --> 00:22:17.500\nAnd so\nmaybe I want to have this happen fast.\n\n430\n00:22:17.500 --> 00:22:21.670\nSo, even though I can do it\nby just that little MX entry,\n\n431\n00:22:21.670 --> 00:22:24.530\nI can improve performance\nby doing it by IP.\n\n432\n00:22:24.530 --> 00:22:26.940\nIf I know the IPs of these servers, and\n\n433\n00:22:26.940 --> 00:22:30.430\nthere's some command I can do here\nthat makes it show me the IPs.\n\n434\n00:22:30.430 --> 00:22:33.850\nI just can't seem to remember what it is,\nso I'll just look them up individually.\n\n435\n00:22:33.850 --> 00:22:40.450\nIf I do mail1.itprotvdemo .com and mail\nto I can figure out what their IPs are.\n\n436\n00:22:40.450 --> 00:22:44.035\nAnd then I can come in and\nI can just add those specifically, right.\n\n437\n00:22:44.035 --> 00:22:45.380\nAnd just get them put in.\n\n438\n00:22:45.380 --> 00:22:48.320\nAnd actually I kind of have them\nright here on this screen anyways so\n\n439\n00:22:48.320 --> 00:22:49.500\nI could just come in and copy that.\n\n440\n00:22:49.500 --> 00:22:54.210\nAnd I'm gonna come down, I'm gonna edit my\nrecord and I'm gonna change the record.\n\n441\n00:22:54.210 --> 00:22:56.140\nI'm just gonna get rid of the MX.\n\n442\n00:22:56.140 --> 00:22:59.790\nAnd I'm gonna add in ip4: and\nI'll paste that one in.\n\n443\n00:22:59.790 --> 00:23:06.649\nAnd then ip4: and I need to get the other\naddress in, which was this guy.\n\n444\n00:23:06.649 --> 00:23:11.340\nAnd so sometimes just because we can\ntake a shortcut doesn't mean we should.\n\n445\n00:23:11.340 --> 00:23:13.600\nThis is gonna give you better performance.\n\n446\n00:23:13.600 --> 00:23:15.280\nI'm gonna go ahead and save that.\n\n447\n00:23:15.280 --> 00:23:16.850\nAnd it's gonna be put in place.\n\n448\n00:23:16.850 --> 00:23:22.840\nAll right, now if you have a DNS provider\nthat let's you modify time-to-live,\n\n449\n00:23:22.840 --> 00:23:25.560\nyou can shorten that and\nthis will happen a lot quicker.\n\n450\n00:23:25.560 --> 00:23:27.360\nMine won't let me change time-to-lives.\n\n451\n00:23:27.360 --> 00:23:30.645\nSo how fast is it gonna propagate\nout there into the real world?\n\n452\n00:23:30.645 --> 00:23:32.440\nThey may take a while, right.\n\n453\n00:23:32.440 --> 00:23:35.520\nAnd it may actually happen real fast, just\nkinda depends on where that window was.\n\n454\n00:23:35.520 --> 00:23:40.370\nIf I go and pull up that entry,\nthat's already taken effect.\n\n455\n00:23:40.370 --> 00:23:41.460\nAnd now, they're IPs.\n\n456\n00:23:41.460 --> 00:23:45.283\nSo now, if somebody receives\nan email from itprotvdemo.com,\n\n457\n00:23:45.283 --> 00:23:48.343\nthey pull my text record and\nthey see these two IPs.\n\n458\n00:23:48.343 --> 00:23:49.300\nAnd they say, all right.\n\n459\n00:23:49.300 --> 00:23:50.990\nDid this email come from one of those IPs?\n\n460\n00:23:50.990 --> 00:23:51.620\nIf yes, it's good.\n\n461\n00:23:51.620 --> 00:23:56.763\nIf no, then we hit that tilde all and\nit's probably bad, right.\n\n462\n00:23:56.763 --> 00:24:00.810\nMuch faster we're eliminating those DNS\nlookups that's something that a lot of\n\n463\n00:24:00.810 --> 00:24:04.275\npeople don't Don't think about\nwhen they build these SPF records.\n\n464\n00:24:04.275 --> 00:24:07.300\nAll right, now if you've got\na super complex DNS record,\n\n465\n00:24:07.300 --> 00:24:10.040\nyou could write it out\njust like I'm doing.\n\n466\n00:24:10.040 --> 00:24:13.600\nBut there's also plenty of websites that\nare out there that you can use, too.\n\n467\n00:24:13.600 --> 00:24:15.593\nOne of the ones that's a little\nmore common is, let's see.\n\n468\n00:24:15.593 --> 00:24:18.971\nIt's spfwizard.com.\n\n469\n00:24:18.971 --> 00:24:24.410\nIf you go to spfwizard.com,\njust a simple little website.\n\n470\n00:24:24.410 --> 00:24:26.450\nActually, you know what, no,\nthis isn't the one that I'm used to.\n\n471\n00:24:26.450 --> 00:24:29.540\nHang on, let me do a quick search for\nSPF wizard.\n\n472\n00:24:29.540 --> 00:24:31.390\nLet me make sure I give you the right one.\n\n473\n00:24:31.390 --> 00:24:35.540\nThe one I'm used to actually has a little,\nthere we go, spfwizard.net.\n\n474\n00:24:35.540 --> 00:24:37.360\nThat's the one that I'm used to.\n\n475\n00:24:37.360 --> 00:24:40.950\nThey're probably all the same, I just\non the show, I don't wanna attest for\n\n476\n00:24:40.950 --> 00:24:42.020\na site that I've never used.\n\n477\n00:24:42.020 --> 00:24:44.330\nSo spfwizard.net is one that I've used.\n\n478\n00:24:44.330 --> 00:24:46.290\nMicrosoft used to have a site but\nthey took it down.\n\n479\n00:24:46.290 --> 00:24:47.660\nI don't know what happened there.\n\n480\n00:24:47.660 --> 00:24:49.160\nBut you can come to this site, and\n\n481\n00:24:49.160 --> 00:24:51.830\nyou can basically just punch\nin what your information is.\n\n482\n00:24:51.830 --> 00:24:55.260\nSo I could say, I got itprotvdemo.com.\n\n483\n00:24:55.260 --> 00:24:56.907\nI wanna allow MX Servers.\n\n484\n00:24:56.907 --> 00:25:00.529\nAnd you see up top how it's\nbuilding my entry for me, right?\n\n485\n00:25:00.529 --> 00:25:04.920\nDo I wanna allow the current IP address\nof the domain, the domain itself.\n\n486\n00:25:04.920 --> 00:25:07.943\nThat would be only if I was sending emails\nfrom the web server, which I am not.\n\n487\n00:25:07.943 --> 00:25:12.410\nAllow any host name to send,\nI probably don't want that.\n\n488\n00:25:12.410 --> 00:25:17.610\nAnd now I can start specifying IP\naddresses, other host names, and so on.\n\n489\n00:25:17.610 --> 00:25:22.150\nAnd as I put these things in here,\nit is just kind of\n\n490\n00:25:23.390 --> 00:25:27.190\ntyping it out for me and building\nthat record and putting it in place.\n\n491\n00:25:27.190 --> 00:25:32.330\nAnd I can even specify do I want it to\nbe where we fail non-compliant mail,\n\n492\n00:25:32.330 --> 00:25:33.630\ndo a soft fail?\n\n493\n00:25:33.630 --> 00:25:39.400\nIf I choose that SoftFail, right,\nI can look up here and see it's tilde all.\n\n494\n00:25:39.400 --> 00:25:41.150\nSo I don't really have to remember this.\n\n495\n00:25:41.150 --> 00:25:44.320\nI guess if you're studying for\na test you do, but in real life land,\n\n496\n00:25:44.320 --> 00:25:48.220\nI'll typically fire up something like\nthe SPF Wizard, type in what I want and\n\n497\n00:25:48.220 --> 00:25:50.020\nthen I get the record right here.\n\n498\n00:25:50.020 --> 00:25:53.390\nAfter that it's just a matter\nof copying and pasting.\n\n499\n00:25:53.390 --> 00:25:56.770\nAnd you've got it, if you're using Bind,\nthis is the exact line you'd\n\n500\n00:25:56.770 --> 00:26:00.400\nput right in the Bind configuration\nfile for that particular zone.\n\n501\n00:26:01.450 --> 00:26:06.070\nFor me using Hover, I would just have to\ncopy this little piece right here and\n\n502\n00:26:06.070 --> 00:26:07.900\nthen go in and paste that into the zone.\n\n503\n00:26:07.900 --> 00:26:12.122\nSo you get what you need as far\nas the actual little value there.\n\n504\n00:26:12.122 --> 00:26:14.200\nSo take advantage of those resources.\n\n505\n00:26:14.200 --> 00:26:15.570\nIt certainly makes life\na little bit easier on you.\n\n506\n00:26:17.380 --> 00:26:18.570\nAll right, let's see, what else do I have?\n\n507\n00:26:18.570 --> 00:26:22.652\nI think I've already talked about\nthe various best practices.\n\n508\n00:26:22.652 --> 00:26:25.563\nOne last thing that I wanna\nmention on best practices.\n\n509\n00:26:25.563 --> 00:26:30.251\nAnd that is, people have a tendency,\nwhen they set these up,\n\n510\n00:26:30.251 --> 00:26:34.420\nto list internal web servers also,\nmail servers.\n\n511\n00:26:34.420 --> 00:26:37.790\nSo for example, if you have a spam\nfirewall that's sitting in between you and\n\n512\n00:26:37.790 --> 00:26:41.040\nthe Internet, you probably have\ninternal mail servers, too.\n\n513\n00:26:41.040 --> 00:26:42.600\nYou don't have to list those.\n\n514\n00:26:42.600 --> 00:26:45.650\nSPF records only work on external emails.\n\n515\n00:26:45.650 --> 00:26:48.440\nAnd when you have internal mail servers\nthey're gonna go through that spam filter\n\n516\n00:26:48.440 --> 00:26:51.290\non the way to the Internet, and the\nInternet will only see the external one.\n\n517\n00:26:51.290 --> 00:26:52.520\nThat's all they'll see.\n\n518\n00:26:52.520 --> 00:26:54.350\nSo don't list internal servers on these.\n\n519\n00:26:54.350 --> 00:26:56.790\nThat doesn't really achieve anything.\n\n520\n00:26:56.790 --> 00:26:58.835\nYou're just eating up some of\nyour DNS look-up [INAUDIBLE].\n\n521\n00:26:58.835 --> 00:27:00.390\n&gt;&gt; Don, we appreciate that information.\n\n522\n00:27:00.390 --> 00:27:04.030\nIt's nice to be able to kind of ensure\nthat only the unauthorized server is\n\n523\n00:27:04.030 --> 00:27:05.610\nsending email from your domain.\n\n524\n00:27:05.610 --> 00:27:07.760\nBut it looks like we're coming\nto the end of another episode.\n\n525\n00:27:07.760 --> 00:27:11.720\nWould you like to maybe impart any\nwords of wisdom to SPF records?\n\n526\n00:27:11.720 --> 00:27:15.830\nJust one last thing that I thought of is\nif you're ever seeing your emails getting\n\n527\n00:27:15.830 --> 00:27:16.930\nblocked or whatever and\n\n528\n00:27:16.930 --> 00:27:20.110\nyou're not sure why, it could be\nthat you have a bad SPF record.\n\n529\n00:27:20.110 --> 00:27:22.398\nAnd there's a number of websites\nout there that'll check and\n\n530\n00:27:22.398 --> 00:27:24.431\nlet you know if a record was bad or\ncorrupt or whatever.\n\n531\n00:27:24.431 --> 00:27:28.585\nThere's actually one that's available\nright on the Open SPF website.\n\n532\n00:27:28.585 --> 00:27:32.090\nopenspf.org is probably\nthe best place to go and\n\n533\n00:27:32.090 --> 00:27:34.970\nfind any information about SPF records.\n\n534\n00:27:34.970 --> 00:27:40.100\nBut if you go to www.openspf.org/why,\n\n535\n00:27:40.100 --> 00:27:45.060\nyou can come in here and\npunch in the information about,\n\n536\n00:27:45.060 --> 00:27:49.430\noops actually, apparently the page\nis not rendering right for me.\n\n537\n00:27:49.430 --> 00:27:54.550\nBut you can punch in your email and\nwhat IP it came from and\n\n538\n00:27:54.550 --> 00:27:59.590\nit'll try and tell you why that didn't\nmake it over there, is a capital W.\n\n539\n00:27:59.590 --> 00:28:00.690\nThere we go.\n\n540\n00:28:00.690 --> 00:28:03.100\nSorry guys, its a, whoops.\n\n541\n00:28:03.100 --> 00:28:04.099\nI'm gonna blow out my eyes here.\n\n542\n00:28:04.099 --> 00:28:09.068\nIt's www.openspf.org/Why and\nit's a capital W in the Why.\n\n543\n00:28:09.068 --> 00:28:10.786\nThat's why I got that\nweird page a minute ago.\n\n544\n00:28:10.786 --> 00:28:12.670\nSo basically you come in here.\n\n545\n00:28:12.670 --> 00:28:18.140\nAnd you basically say, hey,\nif I get an e-mail from don@itpro.tv and\n\n546\n00:28:18.140 --> 00:28:23.820\nit's coming from some IP\naddress like this, we can\n\n547\n00:28:23.820 --> 00:28:28.020\nsubmit it and they're gonna do the look\nup against the SPF record and compare it.\n\n548\n00:28:28.020 --> 00:28:30.897\nAnd it's gonna come back and\nit's gonna tell me, hey,\n\n549\n00:28:30.897 --> 00:28:34.879\nan SPF enabled mail server rejected\na message that claimed an envelope sender\n\n550\n00:28:34.879 --> 00:28:37.226\naddress of don@itpro.tv and here's why.\n\n551\n00:28:37.226 --> 00:28:42.151\nAnd then it goes though and it tells\nme that according to my SPF record,\n\n552\n00:28:42.151 --> 00:28:47.493\nI don't support that, and so this IP\nwhich actually resolved to somebody,\n\n553\n00:28:47.493 --> 00:28:50.846\nso if you work for\nAVISPL.com, my apologies.\n\n554\n00:28:50.846 --> 00:28:56.000\n[LAUGH] But so it's showing there and\nit's saying hey, this is not valid.\n\n555\n00:28:56.000 --> 00:28:58.020\nIf it was failing because\nof a corrupt record,\n\n556\n00:28:58.020 --> 00:28:59.430\nit would tell me that it was corrupt.\n\n557\n00:28:59.430 --> 00:29:02.060\nAnd they gave you some basic\ninformation here about what to do.\n\n558\n00:29:02.060 --> 00:29:08.170\nSo it's just kind of an easy way to try\nand determine why that's not resolving.\n\n559\n00:29:08.170 --> 00:29:11.990\nSo a simple test right there\non the openspf.org website.\n\n560\n00:29:11.990 --> 00:29:13.673\n&gt;&gt; We appreciate that, Don, thank you.\n\n561\n00:29:13.673 --> 00:29:15.570\nAnd we appreciate you,\nthe viewer, watching.\n\n562\n00:29:15.570 --> 00:29:18.580\nWe're gonna go ahead and\nwrap this one up here at ITProTV.\n\n563\n00:29:18.580 --> 00:29:21.110\nSo signing out,\nI've been your host, Wes Bryan.\n\n564\n00:29:21.110 --> 00:29:21.790\n&gt;&gt; And I'm Don Pezet.\n\n565\n00:29:21.790 --> 00:29:23.158\n&gt;&gt; And we'll see you next time.\n\n566\n00:29:23.158 --> 00:29:30.170\n[MUSIC]\n\n567\n00:29:30.170 --> 00:29:33.074\nThank you for watching ITProTV.\n\n",
          "vimeoId": "194520007"
        }
      ],
      "title": "Configuring Email Services"
    },
    {
      "episodes": [
        {
          "description": "In this episode, Wes and Don discuss some of the important considerations when purchasing a domain for your company. They explain registrars as well as giving examples of popular domain registrars. They will also examine the records associated with a domain purchase such as registration, owner, administrator, and billing records. They also demonstrate using the ICANN WHOIS Lookup to verify the domain information and records.",
          "length": "1935",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-4-1-purchasing_a_domain-120516-PGM.00_32_00_17.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-4-1-purchasing_a_domain-120516-PGM.00_32_00_17.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-4-1-purchasing_a_domain-120516-PGM.00_32_00_17.Still001-sm.jpg",
          "title": "Purchasing a Domain",
          "transcript": "WEBVTT\n\n1\n00:00:00.270 --> 00:00:04.393\nWelcome to ITProTV,\nI'm your host, Don Pezet.\n\n2\n00:00:04.393 --> 00:00:06.867\n&gt;&gt; [CROSSTALK]\n\n3\n00:00:06.867 --> 00:00:08.286\n[MUSIC]\n\n4\n00:00:08.286 --> 00:00:12.088\n&gt;&gt; You're watching ITProTV.\n\n5\n00:00:12.088 --> 00:00:14.544\n&gt;&gt; Welcome to another\nepisode here at ITProTV.\n\n6\n00:00:14.544 --> 00:00:16.020\nI'm your host Wes Bryan, and\n\n7\n00:00:16.020 --> 00:00:20.040\nin today's episode we're continuing\nthrough a very important series, well,\n\n8\n00:00:20.040 --> 00:00:23.765\non a service that helps us find just\nabout everything on the Internet.\n\n9\n00:00:23.765 --> 00:00:26.525\nJoining us back in the studios today\nis none other than Mr Don Pezet.\n\n10\n00:00:26.525 --> 00:00:27.635\nDon, how are you doing sir?\n\n11\n00:00:27.635 --> 00:00:30.815\n&gt;&gt; I'm doing great, Wes, ready to jump in\nand spend some money on this show today.\n\n12\n00:00:30.815 --> 00:00:32.681\nThat's right, we're gonna make it rain.\n\n13\n00:00:32.681 --> 00:00:35.720\n[LAUGH] We're gonna tackle\npurchasing a domain.\n\n14\n00:00:35.720 --> 00:00:38.800\nAnd for a lot of us,\nwhen it comes to public DNS domains,\n\n15\n00:00:38.800 --> 00:00:42.030\nthis is kind of our first step,\nis I want to get a domain.\n\n16\n00:00:42.030 --> 00:00:44.200\nI wonder if it's even available.\n\n17\n00:00:44.200 --> 00:00:45.430\nSomebody's probably already taken it,\n\n18\n00:00:45.430 --> 00:00:47.680\nbecause domain squatting\nis a very real problem.\n\n19\n00:00:47.680 --> 00:00:50.790\nBut even if it is available,\nhow do I go about buying it, right?\n\n20\n00:00:50.790 --> 00:00:53.530\nWhat's that first step for\npurchasing a domain?\n\n21\n00:00:53.530 --> 00:00:57.632\nAnd I do wanna start, I mean, really,\nreally basic here, is that if I'm gonna go\n\n22\n00:00:57.632 --> 00:01:01.511\nand buy a domain, decision number one\nneeds to be, who am I gonna buy it from?\n\n23\n00:01:01.511 --> 00:01:03.890\nAnd there's a lot of choices out there.\n\n24\n00:01:03.890 --> 00:01:06.770\nThere's actually thousands of different\nplaces you can go to buy it, and\n\n25\n00:01:06.770 --> 00:01:07.730\nit's really confusing.\n\n26\n00:01:07.730 --> 00:01:11.120\nSo I wanna start with\nthe person who's in charge.\n\n27\n00:01:11.120 --> 00:01:14.840\nAnd the person who's in charge\nis an organization called ICANN.\n\n28\n00:01:14.840 --> 00:01:17.959\nICANN is the Internet Company,\nor no, Internet Corporation for\n\n29\n00:01:17.959 --> 00:01:19.789\n[LAUGH] I'm gonna screw this up, Wes.\n\n30\n00:01:19.789 --> 00:01:20.790\n&gt;&gt; [LAUGH]\n&gt;&gt; You got my back on this one?\n\n31\n00:01:20.790 --> 00:01:22.835\n[LAUGH]\n&gt;&gt; I do, it's the Internet Corporation for\n\n32\n00:01:22.835 --> 00:01:24.430\nAssigned Names and Numbers.\n\n33\n00:01:24.430 --> 00:01:25.040\n&gt;&gt; There we go.\n\n34\n00:01:25.040 --> 00:01:28.470\nAll right,\nnow like their name implies, names and\n\n35\n00:01:28.470 --> 00:01:29.960\nnumbers, right there at the end, right?\n\n36\n00:01:29.960 --> 00:01:33.200\nSo names, that's the domain names that\nwe're talking about in this series, and\n\n37\n00:01:33.200 --> 00:01:34.850\nnumbers, that's IP addresses.\n\n38\n00:01:34.850 --> 00:01:36.810\nThey do the IP addressing also.\n\n39\n00:01:36.810 --> 00:01:39.902\nAnd then the Internet Corporation,\nthat means there's actually\n\n40\n00:01:39.902 --> 00:01:42.782\nan organization that was put together for\nthis sole purpose.\n\n41\n00:01:42.782 --> 00:01:44.011\nAnd they're a nonprofit,\n\n42\n00:01:44.011 --> 00:01:47.280\nactually a nonprofit organization\nthat is just designed to manage DNS.\n\n43\n00:01:47.280 --> 00:01:51.380\nNow, you don't go to ICANN and\nbuy a domain name.\n\n44\n00:01:51.380 --> 00:01:53.910\nActually I don't think it's even possible,\nif you go to ICANN's website,\n\n45\n00:01:53.910 --> 00:01:55.098\nit's just not there.\n\n46\n00:01:55.098 --> 00:01:57.640\nBut, what ICANN does is,\n\n47\n00:01:57.640 --> 00:02:03.260\nthey then kind of act as gatekeeper to a\nsystem of organizations called registrars.\n\n48\n00:02:03.260 --> 00:02:05.870\nAnd registrars are privately owned,\n\n49\n00:02:05.870 --> 00:02:12.380\nusually for-profit companies that handle\nregistering your domain name with ICANN.\n\n50\n00:02:12.380 --> 00:02:15.900\nAll ICANN does is maintain\na big fat database,\n\n51\n00:02:15.900 --> 00:02:19.720\na database of all the domains that\nare out there and who bought the things.\n\n52\n00:02:19.720 --> 00:02:24.280\nThe registrars are the ones who take care\nof putting an entry into that database.\n\n53\n00:02:24.280 --> 00:02:26.050\nAnd they charge you a fee for it.\n\n54\n00:02:26.050 --> 00:02:28.360\nIn the early days of the Internet,\nthey actually didn't even charge a fee.\n\n55\n00:02:28.360 --> 00:02:30.650\nIt was free to get a domain name and\nyou got it your whole life.\n\n56\n00:02:30.650 --> 00:02:31.690\nThat was kinda cool.\n\n57\n00:02:31.690 --> 00:02:34.370\nWell, that ended pretty quick\nas the Internet started to grow.\n\n58\n00:02:34.370 --> 00:02:37.539\nSo now you have to buy one, and when you\nbuy one, you buy it through a registrar.\n\n59\n00:02:37.539 --> 00:02:41.318\nNow, if you go to ICANN's website,\nI've got it pulled up here,\n\n60\n00:02:41.318 --> 00:02:43.340\nit's just I-C-A-N-N .org.\n\n61\n00:02:43.340 --> 00:02:45.560\nThey have a registrar report, and\n\n62\n00:02:45.560 --> 00:02:48.800\nthey have their whole\naccredited list of registrars.\n\n63\n00:02:48.800 --> 00:02:51.435\nAnd I'm not even gonna\nbegin to run through this.\n\n64\n00:02:51.435 --> 00:02:56.520\nBut if I were to name these off, there are\nhundreds of registrars that are out there.\n\n65\n00:02:56.520 --> 00:03:01.000\nThese are all companies that\nhave gone through the test to be\n\n66\n00:03:01.000 --> 00:03:04.820\napproved by ICANN and\nget listed into the system.\n\n67\n00:03:04.820 --> 00:03:07.707\nNow you're gonna see\na bunch of dropcatch.com,\n\n68\n00:03:07.707 --> 00:03:09.175\nsee as I kinda scroll through?\n\n69\n00:03:09.175 --> 00:03:13.820\nDropcatch, blah, blah, blah, blah,\nI don't actually know how many there are,\n\n70\n00:03:13.820 --> 00:03:14.760\nthere's at least 2,000 of them.\n\n71\n00:03:14.760 --> 00:03:20.020\nSo anyhow, there's a bunch of dropcatch,\nthey do this like a franchise type system.\n\n72\n00:03:20.020 --> 00:03:21.930\nAnd every franchise has\nits own company name,\n\n73\n00:03:21.930 --> 00:03:26.005\nsee how each one of these is a different\nlimited liability company or corporation?\n\n74\n00:03:26.005 --> 00:03:28.870\nSo they're all separate\ncompanies with the same name.\n\n75\n00:03:28.870 --> 00:03:31.670\nBut as you look through, you'll see\nsome names that you do recognize, right?\n\n76\n00:03:31.670 --> 00:03:33.400\nWhat are some of the bigger names?\n\n77\n00:03:33.400 --> 00:03:37.170\nAll right, Wes, just off the top of\nyour head, who would you think of for\n\n78\n00:03:37.170 --> 00:03:39.000\nregistering a domain?\n\n79\n00:03:39.000 --> 00:03:39.960\n&gt;&gt; Microsoft?\n\n80\n00:03:39.960 --> 00:03:41.808\nAre you talking about the actual\nregistrars themselves?\n\n81\n00:03:41.808 --> 00:03:43.620\n&gt;&gt; Yeah, I wanna go and buy a domain.\n\n82\n00:03:43.620 --> 00:03:46.110\n&gt;&gt; I think of, what is it, ARIN.\n\n83\n00:03:46.110 --> 00:03:50.047\nThe American Regional Internet\nName Registrar, I believe, ARIN.\n\n84\n00:03:50.047 --> 00:03:52.198\n&gt;&gt; Right, so A-R-I-N.\n\n85\n00:03:52.198 --> 00:03:54.672\nThey're responsible for\nIP addresses but not domain names.\n\n86\n00:03:54.672 --> 00:03:55.282\n&gt;&gt; Okay, yeah.\n\n87\n00:03:55.282 --> 00:03:56.541\n&gt;&gt; And they're just responsible for\nNorth America.\n\n88\n00:03:56.541 --> 00:03:59.093\nIt get really confusing cuz\nthat's under the ICANN envelope.\n\n89\n00:03:59.093 --> 00:04:00.271\n&gt;&gt; Sure, sure.\nRight.\n\n90\n00:04:00.271 --> 00:04:01.700\n&gt;&gt; But when we buy from a registrar,\n\n91\n00:04:01.700 --> 00:04:04.620\nthese aren't cool organizations\nthat are all official like that.\n\n92\n00:04:04.620 --> 00:04:07.472\nThese are usually cheesy fly-by-night\ncompanies that just happen to be\n\n93\n00:04:07.472 --> 00:04:08.029\nregistrars.\n\n94\n00:04:09.220 --> 00:04:12.889\nSo, the one I always think of is the one\nI see TV commercials for, GoDaddy, right?\n\n95\n00:04:12.889 --> 00:04:13.490\n&gt;&gt; Absolutely.\n\n96\n00:04:13.490 --> 00:04:14.830\n&gt;&gt; GoDaddy, they're,\n\n97\n00:04:14.830 --> 00:04:18.235\nyou know what, I'm not gonna comment\non the company itself very much, but.\n\n98\n00:04:18.235 --> 00:04:18.840\n&gt;&gt; [LAUGH]\n&gt;&gt; But\n\n99\n00:04:18.840 --> 00:04:20.940\nthey run a heck of a lot of commercials.\n\n100\n00:04:20.940 --> 00:04:23.810\nSo almost everybody's heard of GoDaddy,\nI can find them right here in the list.\n\n101\n00:04:23.810 --> 00:04:25.187\nAnd you can go and\nyou can register with them.\n\n102\n00:04:25.187 --> 00:04:28.219\nThey're not an officially\nsanctioned nonprofit organization,\n\n103\n00:04:28.219 --> 00:04:31.501\nthey are a for-profit company that\nhappens to be a registrar of ICANN.\n\n104\n00:04:31.501 --> 00:04:32.700\nAnd you can go and you can buy from them.\n\n105\n00:04:32.700 --> 00:04:34.406\nI believe, now don't quote me on this, but\n\n106\n00:04:34.406 --> 00:04:37.090\nI believe they sell more domains\nthan anyone else on the planet.\n\n107\n00:04:37.090 --> 00:04:38.890\nThat they do sell a ton.\n\n108\n00:04:38.890 --> 00:04:41.750\nBut they're not the only\nones you can go to, right?\n\n109\n00:04:41.750 --> 00:04:43.390\nIf you use Amazon Web Services,\n\n110\n00:04:43.390 --> 00:04:48.110\nlike I do, Amazon actually has\nwhere they can sell domains.\n\n111\n00:04:48.110 --> 00:04:48.938\nThey are a registrar.\n\n112\n00:04:48.938 --> 00:04:51.200\nThey're way up here at the top,\ncuz they start with A.\n\n113\n00:04:51.200 --> 00:04:54.130\nSo if we go up here and find them,\nold Amazon will be right here in the list.\n\n114\n00:04:54.130 --> 00:04:56.753\nThere it is, the Amazon Registrar,\nIncorporated, right?\n\n115\n00:04:56.753 --> 00:04:57.930\nNow you mentioned Microsoft.\n\n116\n00:04:57.930 --> 00:05:00.138\nMicrosoft, massive IT company.\n\n117\n00:05:00.138 --> 00:05:01.820\nObviously, they make Windows.\n\n118\n00:05:01.820 --> 00:05:04.530\nBut does that mean\nthey're a name registrar?\n\n119\n00:05:04.530 --> 00:05:09.091\nNot necessarily, but I believe they are,\nbecause through Azure, yep there they are.\n\n120\n00:05:09.091 --> 00:05:12.320\nSo through Microsoft Azure you can\nbuy domains and they're on there.\n\n121\n00:05:12.320 --> 00:05:15.870\nBut just because they're an IT company\ndoesn't mean they're a registrar.\n\n122\n00:05:15.870 --> 00:05:19.150\nSo for example, Apple,\nI'm just searching for the world Apple and\n\n123\n00:05:19.150 --> 00:05:19.860\nit doesn't turn up.\n\n124\n00:05:19.860 --> 00:05:22.913\nApple sells computers, they have Mac OS,\nthey have iPhone and all that.\n\n125\n00:05:22.913 --> 00:05:24.940\nBut they don't sell domain names,\nthat's not their business.\n\n126\n00:05:24.940 --> 00:05:28.860\nAnd the reality is, you can go to whoever\nthe heck you want, and buy a domain.\n\n127\n00:05:28.860 --> 00:05:30.550\nAnybody in this list right here.\n\n128\n00:05:30.550 --> 00:05:33.930\nAnd even people that aren't on the list,\nin some cases.\n\n129\n00:05:33.930 --> 00:05:36.296\nSo for example, Media Temple.\n\n130\n00:05:36.296 --> 00:05:38.340\nI'm just gonna do a search here for\nMedia Temple real quick.\n\n131\n00:05:38.340 --> 00:05:40.600\nThey don't turn up in the list,\nthey're not a registrar.\n\n132\n00:05:40.600 --> 00:05:42.720\nWell if you've never heard of them,\nthey're a hosting company.\n\n133\n00:05:42.720 --> 00:05:46.600\nIf you need to bring up a server up on the\nInternet, you can go to Media Temple and\n\n134\n00:05:46.600 --> 00:05:50.890\nyou can pay for a virtual server or\nphysical server that's co-located, and\n\n135\n00:05:50.890 --> 00:05:52.410\nyou can run it month after month.\n\n136\n00:05:52.410 --> 00:05:54.810\nWell, if you need a domain name,\nyou can buy it from them.\n\n137\n00:05:54.810 --> 00:05:56.220\nThey'll sell you a domain.\n\n138\n00:05:56.220 --> 00:05:59.240\nBut they're just reselling\nfrom one of these people.\n\n139\n00:05:59.240 --> 00:06:00.470\nWhen you buy a domain,\n\n140\n00:06:00.470 --> 00:06:03.990\nultimately you are buying it from one\nof these people right here on the list.\n\n141\n00:06:03.990 --> 00:06:04.500\nRight?\n\n142\n00:06:04.500 --> 00:06:06.200\nNow how do I make the choice?\n\n143\n00:06:06.200 --> 00:06:08.980\nHow do I pick which one I'm gonna go with?\n\n144\n00:06:08.980 --> 00:06:10.797\nTwo words of advice here.\n\n145\n00:06:10.797 --> 00:06:14.669\nOne, it's always better to buy from\nsomebody in this list than to buy it from\n\n146\n00:06:14.669 --> 00:06:16.310\nsomebody reselling.\n\n147\n00:06:16.310 --> 00:06:17.750\nSo, I like Media Temple.\n\n148\n00:06:17.750 --> 00:06:19.580\nI host several things over there.\n\n149\n00:06:19.580 --> 00:06:20.750\nThe guys over there are great,\n\n150\n00:06:20.750 --> 00:06:23.410\ntheir cloud tech support is second\nto none, I like Media Temple.\n\n151\n00:06:23.410 --> 00:06:25.380\nBut I won't buy domains from them.\n\n152\n00:06:25.380 --> 00:06:28.400\nBecause when you buy a domain from them,\nthey're turning around and\n\n153\n00:06:28.400 --> 00:06:29.640\nbuying it from the registrar.\n\n154\n00:06:29.640 --> 00:06:31.672\nSo who owns the domain?\n\n155\n00:06:31.672 --> 00:06:32.650\nThey do.\n\n156\n00:06:32.650 --> 00:06:35.130\nYou don't own the domain, they do.\n\n157\n00:06:35.130 --> 00:06:39.320\nAnd so, if they don't pay the bill,\nand the domain gets turned back in and\n\n158\n00:06:39.320 --> 00:06:41.030\nsomebody else registers it,\nyou're out of luck.\n\n159\n00:06:41.030 --> 00:06:42.740\nOr if you decide you want to\nmove to another provider,\n\n160\n00:06:42.740 --> 00:06:45.100\nnow you gotta go through the process\nof getting it transferred over to you.\n\n161\n00:06:45.100 --> 00:06:46.650\nThat's a challenge, right?\n\n162\n00:06:46.650 --> 00:06:51.500\nSo, I always prefer to have domains\nregistered to me, so that I own them.\n\n163\n00:06:51.500 --> 00:06:52.650\nOr that my company, at least,\n\n164\n00:06:52.650 --> 00:06:56.590\nowns them, not a third party\nthat's an intermediary, right?\n\n165\n00:06:56.590 --> 00:06:59.760\nWhen you register from somebody here in\nthis list, you know they're accredited,\n\n166\n00:06:59.760 --> 00:07:05.409\nyou know they're authorized through ICANN,\nand you know it's tied to you, all right?\n\n167\n00:07:06.960 --> 00:07:11.070\nSecond word of advice is not every\ncompany on this list is created equal.\n\n168\n00:07:11.070 --> 00:07:14.460\nSome of them are very new, and\nyou've got over here when they registered.\n\n169\n00:07:14.460 --> 00:07:17.450\nSo you'll notice that a ton of these\nthings have entries in here that\n\n170\n00:07:17.450 --> 00:07:18.590\nare all dated.\n\n171\n00:07:18.590 --> 00:07:21.040\nOr actually, you know what,\nthat's the RAA version, shoot.\n\n172\n00:07:21.040 --> 00:07:22.570\nThat's not when they registered.\n\n173\n00:07:22.570 --> 00:07:24.170\nBut if you drill into the individual data,\n\n174\n00:07:24.170 --> 00:07:26.420\nyou'll actually see when\nthey were registered.\n\n175\n00:07:26.420 --> 00:07:28.394\nAnd some of them have been in there for\n20 years,\n\n176\n00:07:28.394 --> 00:07:29.959\nothers have been in there for one year.\n\n177\n00:07:29.959 --> 00:07:32.437\nIf they've only been in there for\none year and they go out of business,\n\n178\n00:07:32.437 --> 00:07:33.420\nwhat's gonna happen?\n\n179\n00:07:33.420 --> 00:07:35.048\nWell, two things.\n\n180\n00:07:35.048 --> 00:07:36.560\nOne, you actually do keep your domain.\n\n181\n00:07:36.560 --> 00:07:40.040\nThe domain is registered to you,\nand it's in ICANN's database, so\n\n182\n00:07:40.040 --> 00:07:42.325\nit doesn't matter if the registrar\ngoes out of business.\n\n183\n00:07:42.325 --> 00:07:46.225\nBut, two,\nit becomes a real challenge, because\n\n184\n00:07:46.225 --> 00:07:49.065\nhow do you renew your domain if it's stuck\nin a company that's out of business?\n\n185\n00:07:49.065 --> 00:07:50.305\nAnd how do you transfer it out?\n\n186\n00:07:50.305 --> 00:07:53.795\nAnd part of the registrar agreement is\nthat ICANN can take that back over again,\n\n187\n00:07:53.795 --> 00:07:54.845\nbut it's a hassle.\n\n188\n00:07:54.845 --> 00:07:56.314\nSo you want to deal with\na reputable company.\n\n189\n00:07:56.314 --> 00:08:00.138\nSo I kind of make fun of GoDaddy a little\nbit cuz of their cheesy commercials, but\n\n190\n00:08:00.138 --> 00:08:01.804\nthey've been around a long time.\n\n191\n00:08:01.804 --> 00:08:03.095\nThey register more domains\nthan anybody else.\n\n192\n00:08:03.095 --> 00:08:05.678\nThey're pretty safe to register\nfrom if you wanna go that route.\n\n193\n00:08:05.678 --> 00:08:07.305\nAll right, I don't.\n\n194\n00:08:07.305 --> 00:08:10.019\nI don't register a single thing with them,\nbut many people do and there's nothing\n\n195\n00:08:10.019 --> 00:08:12.260\nwrong with that, but there's other\nproviders that are out there.\n\n196\n00:08:12.260 --> 00:08:15.110\nAmazon is probably one of your\nsafest bets, because they're so\n\n197\n00:08:15.110 --> 00:08:17.830\nsteeped in Internet infrastructure.\n\n198\n00:08:17.830 --> 00:08:20.890\nAnother favorite of mine is Hover.com,\nI use Hover a lot.\n\n199\n00:08:20.890 --> 00:08:25.180\nI use Hover here in the show, not because\nthey have some amazing technology that\n\n200\n00:08:25.180 --> 00:08:28.660\nblows everybody away, but because they\nhave human beings that answer their phone.\n\n201\n00:08:28.660 --> 00:08:31.070\nThat's literally the selling point for\nhover.com,\n\n202\n00:08:31.070 --> 00:08:33.290\nis that if I have\nsomething wrong I can call.\n\n203\n00:08:33.290 --> 00:08:37.350\nAnd an actual DNS tech answers the phone\nand knows what the heck I'm talking about,\n\n204\n00:08:37.350 --> 00:08:39.200\nand that's got value to me.\n\n205\n00:08:39.200 --> 00:08:40.980\nBut that's just me,\nif you don't value that,\n\n206\n00:08:40.980 --> 00:08:43.160\nyou can certainly find cheaper\nprices somewhere else.\n\n207\n00:08:43.160 --> 00:08:45.900\nGoDaddy probably has some of\nthe best prices that are out there.\n\n208\n00:08:45.900 --> 00:08:50.460\nSo when it comes down to making that\ndecision, my main word of advice is,\n\n209\n00:08:50.460 --> 00:08:53.440\nmake sure it's somebody on\nICANN's official registrar list.\n\n210\n00:08:53.440 --> 00:08:55.970\nDon't buy from a reseller\nif you can avoid it.\n\n211\n00:08:55.970 --> 00:08:56.980\nAnd then number two,\n\n212\n00:08:56.980 --> 00:09:00.700\nafter that, is look for features and\nprice, features and price.\n\n213\n00:09:00.700 --> 00:09:03.610\nIf you want a human to answer the phone,\nsomebody like Hover's really valuable.\n\n214\n00:09:03.610 --> 00:09:05.650\nIf you want cheap,\nGoDaddy's really valuable.\n\n215\n00:09:05.650 --> 00:09:09.010\nIf you want stability and infrastructure,\nAmazon's really valuable.\n\n216\n00:09:09.010 --> 00:09:10.740\nIt's gonna come down to you and\nyour own personal needs.\n\n217\n00:09:10.740 --> 00:09:13.790\nSo just do your research and\nalso remember that\n\n218\n00:09:13.790 --> 00:09:17.180\njust because you start with one registrar,\ndoesn't mean you're there forever.\n\n219\n00:09:17.180 --> 00:09:19.590\nYou can actually move a domain\nfrom one registrar to another.\n\n220\n00:09:19.590 --> 00:09:20.590\nI've done that several times.\n\n221\n00:09:20.590 --> 00:09:22.775\nI do it every time somebody comes\nto me with a GoDaddy domain.\n\n222\n00:09:22.775 --> 00:09:26.005\n[LAUGH] I show them how we can\ntransfer it over to somebody else.\n\n223\n00:09:26.005 --> 00:09:27.981\nSo you can do that after the fact.\n\n224\n00:09:27.981 --> 00:09:30.474\nIt's a little bit of a pain but\nyou can certainly do it, right?\n\n225\n00:09:30.474 --> 00:09:33.430\nSo choosing right from the first place,\nthat really helps out and\n\n226\n00:09:33.430 --> 00:09:34.890\nmakes sure that things go well.\n\n227\n00:09:35.990 --> 00:09:39.080\nAll right, so\nif we decide that we wanna register.\n\n228\n00:09:39.080 --> 00:09:42.240\nActually, let me clarify a statement\nreal quick before I get too far.\n\n229\n00:09:42.240 --> 00:09:45.320\nI mentioned you can move one,\nbe careful with that.\n\n230\n00:09:45.320 --> 00:09:50.430\nFor example, here, I've got GoDaddy's\ndocumentation pulled up here.\n\n231\n00:09:50.430 --> 00:09:53.157\nSo if you purchased a domain at GoDaddy,\nright?\n\n232\n00:09:53.157 --> 00:09:55.522\nIt's perfectly safe,\nyou can leave it there, it'll be fine.\n\n233\n00:09:55.522 --> 00:09:59.390\nBut if you decide to move it to somewhere\nelse, there are some rules they have.\n\n234\n00:09:59.390 --> 00:10:03.600\nAnd if you pull up the documentation,\nthe rules vary from provider to provider.\n\n235\n00:10:03.600 --> 00:10:06.381\nSo if I bought one from GoDaddy,\nor if I bought one from Amazon, or\n\n236\n00:10:06.381 --> 00:10:07.453\nI bought one from Hover.\n\n237\n00:10:07.453 --> 00:10:11.115\nAnd I decide to move it somewhere else,\nI've got to look up their rules.\n\n238\n00:10:11.115 --> 00:10:12.992\nICANN allows them to have their own rules.\n\n239\n00:10:12.992 --> 00:10:16.608\nAnd GoDaddy's rule is,\nyou have to wait at least 60 days.\n\n240\n00:10:16.608 --> 00:10:20.219\nSo, if you buy a domain now,\nyou can't move it for 60 days, right?\n\n241\n00:10:20.219 --> 00:10:23.100\nAnd the reason they do that is\ncuz they offer these discounts.\n\n242\n00:10:23.100 --> 00:10:25.108\nI mean,\nthey go cheaper than everybody else.\n\n243\n00:10:25.108 --> 00:10:29.415\nAnd so if you start buying domains from\nthem and then immediately moving it off,\n\n244\n00:10:29.415 --> 00:10:33.142\nthey never get a benefit on that discount,\nso they wanna hold it, but\n\n245\n00:10:33.142 --> 00:10:35.150\nthe other reason is fraud.\n\n246\n00:10:35.150 --> 00:10:38.740\nWhen you buy a domain, there are people\nout there who will actively try and\n\n247\n00:10:38.740 --> 00:10:42.360\nsteal your domain away from you by\ndoing fraudulent transfer requests.\n\n248\n00:10:42.360 --> 00:10:44.910\nSo they always lock them down for 60 days.\n\n249\n00:10:44.910 --> 00:10:47.560\nAnd even beyond 60 days,\nthey're still locked.\n\n250\n00:10:47.560 --> 00:10:49.480\nBut you can turn off the lock if you want.\n\n251\n00:10:49.480 --> 00:10:50.560\nIt's a terrible idea, but you can.\n\n252\n00:10:50.560 --> 00:10:53.300\nIf you're going to transfer,\nyou need to turn off those locks.\n\n253\n00:10:53.300 --> 00:10:55.070\nSo make sure you read\nthrough that documentation.\n\n254\n00:10:55.070 --> 00:10:57.350\nWe'll do an episode on transferring\ndomains a little bit later and\n\n255\n00:10:57.350 --> 00:10:58.500\nI'll show you the whole process.\n\n256\n00:10:58.500 --> 00:10:59.460\nIt's kind of evolved.\n\n257\n00:10:59.460 --> 00:11:03.730\nBut just be aware that there are\nlimitations from when you can transfer and\n\n258\n00:11:03.730 --> 00:11:07.360\nit does vary based on registrar,\nall right.\n\n259\n00:11:07.360 --> 00:11:10.650\nSo for this show, let's say that\nI want to register a new domain.\n\n260\n00:11:10.650 --> 00:11:13.540\nNow, normally I register\non different providers.\n\n261\n00:11:13.540 --> 00:11:15.480\nIf it's personal,\nI normally go to hover.com.\n\n262\n00:11:15.480 --> 00:11:17.380\nIf it's work, I usually do Amazon.\n\n263\n00:11:17.380 --> 00:11:19.150\nSo I'll stick with Amazon.\n\n264\n00:11:19.150 --> 00:11:21.570\nWith Amazon,\nthey have the Amazon Web Services.\n\n265\n00:11:21.570 --> 00:11:24.020\nAnd one of their services\nis called Route 53.\n\n266\n00:11:24.020 --> 00:11:26.380\nRoute 53 is their DNS infrastructure.\n\n267\n00:11:26.380 --> 00:11:29.365\nAnd you can go into Route 53 and\nthey can host a DNS zone for you.\n\n268\n00:11:29.365 --> 00:11:31.450\nSo they've got DNS management right there.\n\n269\n00:11:31.450 --> 00:11:33.250\nThey can help manage your traffic.\n\n270\n00:11:33.250 --> 00:11:35.020\nThey can do load balancing and things.\n\n271\n00:11:35.020 --> 00:11:38.113\nThey can do availability monitoring and\nmake sure that if a server goes down,\n\n272\n00:11:38.113 --> 00:11:39.507\nthey repoint DNS somewhere else.\n\n273\n00:11:39.507 --> 00:11:40.609\nIt's all great stuff.\n\n274\n00:11:40.609 --> 00:11:45.280\nAnd then way over here,\nI can see they do domain registration.\n\n275\n00:11:45.280 --> 00:11:48.220\nI can actually buy my domain from them.\n\n276\n00:11:48.220 --> 00:11:50.280\nNow, you may not have done that.\n\n277\n00:11:50.280 --> 00:11:52.193\nYou can always transfer\na domain into them too.\n\n278\n00:11:52.193 --> 00:11:55.463\nBut if I'm gonna get started,\nI wanna buy a new domain, I can go and\n\n279\n00:11:55.463 --> 00:11:58.670\nhit Get Started, and\nit's gonna launch that process.\n\n280\n00:11:58.670 --> 00:12:02.474\nI can transfer a domain if I've already\ngot it, or I can register a new one.\n\n281\n00:12:02.474 --> 00:12:03.450\nI'm gonna register a new one.\n\n282\n00:12:04.640 --> 00:12:08.510\nNow when you go to register it,\nthe key things to pick\n\n283\n00:12:08.510 --> 00:12:13.160\nare the top level domain name and\nthe actual domain name, right?\n\n284\n00:12:13.160 --> 00:12:17.960\nOn the top level domain, there's different\npricing for the domains, all right.\n\n285\n00:12:17.960 --> 00:12:21.520\nThe two letter top level domains,\nthose are country codes.\n\n286\n00:12:21.520 --> 00:12:24.190\nAnd the country code\npricing varies wildly.\n\n287\n00:12:24.190 --> 00:12:26.940\nAnd some country codes aren't\navailable for purchase.\n\n288\n00:12:26.940 --> 00:12:30.590\nEach country is given a code and they can\ndo whatever the heck they want with it.\n\n289\n00:12:30.590 --> 00:12:34.830\nSo for example here in the US, .us\naddresses are actually pretty uncommon.\n\n290\n00:12:34.830 --> 00:12:36.580\nNot many people use the .us ones.\n\n291\n00:12:36.580 --> 00:12:39.070\nIn fact, it's usually government and\nstate that uses them, and so\n\n292\n00:12:39.070 --> 00:12:45.980\nyou're not going to find big discounts on\n.us, and so if I look .us is 15 bucks.\n\n293\n00:12:45.980 --> 00:12:49.800\nBut you'll notice the default was .com,\nand it was only 12 bucks.\n\n294\n00:12:49.800 --> 00:12:52.394\nWell, that's the one most\neverybody uses is .com.\n\n295\n00:12:52.394 --> 00:12:54.037\nBut there's plenty of other ones,\n\n296\n00:12:54.037 --> 00:12:56.786\n.io is a popular one amongst\nInternet startups right now.\n\n297\n00:12:56.786 --> 00:13:00.589\nSo it's $39, now why the price difference?\n\n298\n00:13:00.589 --> 00:13:03.190\n.io is a country code.\n\n299\n00:13:03.190 --> 00:13:05.314\nI don't actually know\nthe country that it is.\n\n300\n00:13:05.314 --> 00:13:07.800\nIt could be any number of things.\n\n301\n00:13:07.800 --> 00:13:11.716\nBut that country recognized, hey,\nhere's an opportunity to make some money.\n\n302\n00:13:11.716 --> 00:13:15.248\nWell, our website, itpro.tv,\nright, I do know this one.\n\n303\n00:13:15.248 --> 00:13:20.123\n.tv is a little country called Tuvalu,\nwhich I believe is actually some kind\n\n304\n00:13:20.123 --> 00:13:24.027\nof British province or\nprotectorate or something like that.\n\n305\n00:13:24.027 --> 00:13:26.560\nSo it's somehow attached\nto the United Kingdom.\n\n306\n00:13:26.560 --> 00:13:30.510\nBut anyhow, .tv is cool,\nit's like television, and they know that.\n\n307\n00:13:30.510 --> 00:13:33.894\nAnd so they've licensed that out\nto another company to sell, and\n\n308\n00:13:33.894 --> 00:13:35.009\nit's $32 a year.\n\n309\n00:13:35.009 --> 00:13:36.966\nIt's a little pricier,\ncuz it's a premium domain name.\n\n310\n00:13:36.966 --> 00:13:38.639\nSo you'll see variations like that.\n\n311\n00:13:38.639 --> 00:13:42.900\n.com is the most popular\nhere in the United States.\n\n312\n00:13:42.900 --> 00:13:47.535\nIn other countries,\nif you're in the United Kingdom, .co, .uk.\n\n313\n00:13:47.535 --> 00:13:49.371\nThat's a pretty popular one, right?\n\n314\n00:13:49.371 --> 00:13:51.179\nWell, it's 9 bucks to give you that one.\n\n315\n00:13:51.179 --> 00:13:52.981\nRight, but there are rules like,\n\n316\n00:13:52.981 --> 00:13:55.916\nyou kind of have to be in\nthe United Kingdom to buy those.\n\n317\n00:13:55.916 --> 00:13:59.240\nSometimes you have rules that you\nhave to meet in order to do that.\n\n318\n00:13:59.240 --> 00:14:03.461\nFor example, if I wanted .mil\nthat's the United States military.\n\n319\n00:14:03.461 --> 00:14:07.667\nAnd I can't buy that here because I\nneed to be actually associated with\n\n320\n00:14:07.667 --> 00:14:09.031\nthe military to do it.\n\n321\n00:14:09.031 --> 00:14:12.883\nIf I want .edu, well, I can't buy .edu.\n\n322\n00:14:12.883 --> 00:14:17.883\nThere's .education but not .edu, because I\nhave to file paperwork to show that I am\n\n323\n00:14:17.883 --> 00:14:22.683\nan actual school to use .edu or .org,\nwhere you're supposed to be a nonprofit.\n\n324\n00:14:22.683 --> 00:14:25.835\nWell, the rules there aren't really\nstrictly enforced, and so it shows up.\n\n325\n00:14:25.835 --> 00:14:28.567\nBut you're supposed to be\na nonprofit in order to use that.\n\n326\n00:14:28.567 --> 00:14:30.960\nNow it's kinda lost its meaning.\n\n327\n00:14:30.960 --> 00:14:34.154\n&gt;&gt; Now Don when it comes to web pages,\nI'm thinking web pages here,\n\n328\n00:14:34.154 --> 00:14:36.957\nwe always think of,\nback to dot com boom and everything.\n\n329\n00:14:36.957 --> 00:14:41.397\nIt became very commonplace with all\nthe different top level domains.\n\n330\n00:14:41.397 --> 00:14:44.648\nAre there any kind of advice you would\nsay for registering that domain, so\n\n331\n00:14:44.648 --> 00:14:46.704\nit's gonna be tied to you for\na very long time?\n\n332\n00:14:46.704 --> 00:14:50.570\n&gt;&gt; Sure,\ndefinitely try to get the .com, right?\n\n333\n00:14:50.570 --> 00:14:53.260\nEverybody thinks .com, it's just what,\nI know .io is kinda popular and\n\n334\n00:14:53.260 --> 00:14:55.250\nsome of the other ones that are out there.\n\n335\n00:14:55.250 --> 00:14:57.230\nBut .com is what people do.\n\n336\n00:14:57.230 --> 00:14:59.060\nSo if I can go and get it,\n\n337\n00:14:59.060 --> 00:15:03.890\nif I wanna buy itprotvdemo.com,\nthat's what I wanna get, right?\n\n338\n00:15:03.890 --> 00:15:06.350\nSo I'm gonna get itprotvdemo.com.\n\n339\n00:15:06.350 --> 00:15:07.410\nNow when you go to check it,\n\n340\n00:15:07.410 --> 00:15:11.520\ndon't be surprised if it's already taken,\nbecause .coms are really popular.\n\n341\n00:15:11.520 --> 00:15:16.279\nAnd here it's unavailable, I kinda knew\nthat cuz I already bought the .com.\n\n342\n00:15:16.279 --> 00:15:21.470\n[LAUGH] So if you wanna buy something\nthat is, you really like racecars.\n\n343\n00:15:21.470 --> 00:15:23.650\nAnd so you wanna buy racecar.com.\n\n344\n00:15:23.650 --> 00:15:26.530\nWhat are the odds of\nracecar.com being available?\n\n345\n00:15:26.530 --> 00:15:28.498\nPretty low, if it is,\nI'll buy it right now.\n\n346\n00:15:28.498 --> 00:15:32.230\n[LAUGH] But it's pretty unlikely,\njust cuz it's a common word.\n\n347\n00:15:32.230 --> 00:15:34.950\nAnd that's where people start\nmoving over into other names.\n\n348\n00:15:34.950 --> 00:15:38.120\nAnd you'll see what Amazon is doing,\nthey're recommending variations.\n\n349\n00:15:38.120 --> 00:15:42.682\nHey, racecar.com's already taken but\nhow about hastenautomobile?\n\n350\n00:15:42.682 --> 00:15:46.503\nI guess that's like fast car\nmaybe [LAUGH] but hurryauto,\n\n351\n00:15:46.503 --> 00:15:49.685\nhurrymotorcar, they're just trying.\n\n352\n00:15:49.685 --> 00:15:53.670\nAnd here there's so many that are already\ntaken they can't even really get close.\n\n353\n00:15:53.670 --> 00:15:57.302\nWhen I did itprotvdemo,\nI wonder what that one came up with?\n\n354\n00:15:57.302 --> 00:16:01.554\nJust, it's a demonstration so\nmaybe they blow that out, finditprotvdemo.\n\n355\n00:16:01.554 --> 00:16:05.826\nYou'll see like myitprotvdemo, they stick\nthe word my before it, that kind of stuff.\n\n356\n00:16:05.826 --> 00:16:07.519\nItprotvdemo.net.\n\n357\n00:16:07.519 --> 00:16:10.862\nHey, maybe if I go and buy the .NET,\nthat will work just as well.\n\n358\n00:16:10.862 --> 00:16:13.637\nThe .NET is 11 bucks so\nit's actually a dollar cheaper.\n\n359\n00:16:13.637 --> 00:16:15.010\nMaybe I'll just buy that.\n\n360\n00:16:15.010 --> 00:16:17.870\nSo, if I go up here and\nswitch over to .NET, great.\n\n361\n00:16:17.870 --> 00:16:21.250\nBut from a commercial standpoint,\nif I tell people, hey, they say,\n\n362\n00:16:21.250 --> 00:16:22.500\nwhat's your website, Don.\n\n363\n00:16:22.500 --> 00:16:24.670\nIt's itvprodemo.net.\n\n364\n00:16:24.670 --> 00:16:26.238\nAnd they go home, what was that website?\n\n365\n00:16:26.238 --> 00:16:28.675\nIt was itprotvdemo.com.\n\n366\n00:16:28.675 --> 00:16:30.545\nPeoplethink.com.\n\n367\n00:16:30.545 --> 00:16:31.566\nThat's what they do.\n\n368\n00:16:31.566 --> 00:16:34.033\nSo, you usually wanna\nget the .com if you can.\n\n369\n00:16:34.033 --> 00:16:35.100\nAnd even if you get the .com,\n\n370\n00:16:35.100 --> 00:16:37.330\nsometimes it's a good idea to\nregister the other ones, too.\n\n371\n00:16:37.330 --> 00:16:40.978\nWe have itprotv.tv, but\nwe also have itprotv.com,\n\n372\n00:16:40.978 --> 00:16:44.350\nbecause plenty of people think,\nitprotv.com.\n\n373\n00:16:44.350 --> 00:16:47.220\nSo, it doesn't hurt to buy more than one.\n\n374\n00:16:47.220 --> 00:16:50.410\nI'm gonna go ahead and get this .NET,\nassuming it's available.\n\n375\n00:16:50.410 --> 00:16:53.482\nSo, it should be, it suggested it\na second ago, so it should be available.\n\n376\n00:16:53.482 --> 00:16:55.100\nThere it is, and\nI'm gonna go ahead and get that one.\n\n377\n00:16:56.420 --> 00:16:59.260\nAnd see I can add it to my cart, so\nI could go and buy more than one.\n\n378\n00:16:59.260 --> 00:17:02.722\nSo, if there was itprotvdemo.org,\nor .biz, or whatever and\n\n379\n00:17:02.722 --> 00:17:04.464\nI wanted to get those, I could.\n\n380\n00:17:04.464 --> 00:17:06.812\nJust know that when you deviate from .com,\n\n381\n00:17:06.812 --> 00:17:09.927\nyou're just moving into\nterritory that is less popular.\n\n382\n00:17:09.927 --> 00:17:14.020\nAll right, so I got one added to my cart,\nand over here, I can see my fees.\n\n383\n00:17:14.020 --> 00:17:16.290\nNow, always pay attention to the fees.\n\n384\n00:17:16.290 --> 00:17:19.100\nWith Amazon, it's straightforward,\nit's $11 for the first year, and\n\n385\n00:17:19.100 --> 00:17:23.120\nthen after that, it's gonna be $11 for\neach year beyond, right?\n\n386\n00:17:23.120 --> 00:17:26.346\nBut many organizations will\noffer a discount on first year.\n\n387\n00:17:26.346 --> 00:17:29.580\nGo Daddy's the king of that,\nwhere it might be 299 the first year, or\n\n388\n00:17:29.580 --> 00:17:32.087\n499 the first year, and\nthen it goes up to 1299.\n\n389\n00:17:32.087 --> 00:17:35.698\nWe are not talking about a ton of money\nhere, we're not breaking the banks,\n\n390\n00:17:35.698 --> 00:17:39.083\nso it's not a big deal, but just be\naware that the price might vary as you\n\n391\n00:17:39.083 --> 00:17:41.980\nmove into year two, or\nyear three, or whatever.\n\n392\n00:17:41.980 --> 00:17:46.700\nAnd if you register move than one year\nat once, notice the pricing here.\n\n393\n00:17:46.700 --> 00:17:50.040\nI'm not getting a discount, that's\njust the same price rolling up for me.\n\n394\n00:17:50.040 --> 00:17:52.250\nAnd that's cuz it's\nstraightforward pricing.\n\n395\n00:17:52.250 --> 00:17:55.100\nOther sites might offer you\na discount as you add more.\n\n396\n00:17:55.100 --> 00:17:56.120\nBut to be honest with you,\n\n397\n00:17:56.120 --> 00:18:00.270\nthe longer you register it, the longer\nit'll be before you have to renew.\n\n398\n00:18:00.270 --> 00:18:01.220\nAnd you do start to forget.\n\n399\n00:18:01.220 --> 00:18:03.950\nActually, I got a, no, no,\nno real discount at ten years either.\n\n400\n00:18:03.950 --> 00:18:05.630\nSorry, I thought I got a discount there,\nbut I didn't.\n\n401\n00:18:05.630 --> 00:18:08.110\nBut now I know I'll have it for ten years.\n\n402\n00:18:08.110 --> 00:18:09.600\nSometimes, people forget\nwhen that happens,\n\n403\n00:18:09.600 --> 00:18:13.380\nMicrosoft, there was one year where\nMicrosoft.com, they forgot to register it,\n\n404\n00:18:13.380 --> 00:18:18.075\nand some guy out there registered it,\nand told Microsoft, and offered it back,\n\n405\n00:18:18.075 --> 00:18:22.800\nand Microsoft traded him two Xboxes or\nsomething, and he gave the domain back.\n\n406\n00:18:22.800 --> 00:18:26.870\nBut if somebody gets your domain, and\nit's your fault for not registering it,\n\n407\n00:18:26.870 --> 00:18:29.072\nthey're not forced to give it back to you.\n\n408\n00:18:29.072 --> 00:18:31.568\nSo, you don't want to run into that.\n\n409\n00:18:31.568 --> 00:18:35.145\nI'm just gonna register this one for\none year, cuz it's just a demo.\n\n410\n00:18:35.145 --> 00:18:38.500\nAll right, so I'll go and\ncontinue to move forward.\n\n411\n00:18:38.500 --> 00:18:40.100\nNow, when you register a domain,\n\n412\n00:18:40.100 --> 00:18:42.140\nthere's a couple of pieces of\ninformation to go along with it.\n\n413\n00:18:42.140 --> 00:18:43.770\nYou have your registrant contact.\n\n414\n00:18:43.770 --> 00:18:48.510\nYou're gonna be asked for a minimum\nof one set of contact information.\n\n415\n00:18:48.510 --> 00:18:50.520\nBut you could be asked for\nas much as four.\n\n416\n00:18:50.520 --> 00:18:55.080\nIt's not uncommon to have the registrant\ncontact, that's the primary contact,\n\n417\n00:18:55.080 --> 00:18:59.290\nto have an admin, that'll be the person\nin your company who's responsible for\n\n418\n00:18:59.290 --> 00:19:01.230\nmanaging the DNS registrations.\n\n419\n00:19:01.230 --> 00:19:03.890\nThe person who owns the company\nis not always the person who's\n\n420\n00:19:03.890 --> 00:19:04.800\nregistering the domain names.\n\n421\n00:19:04.800 --> 00:19:06.360\nSo, that would be those two people.\n\n422\n00:19:06.360 --> 00:19:07.150\nYou may have a tech,\n\n423\n00:19:07.150 --> 00:19:10.770\nthat would be the technical contact if\nthere's any issues with the domain.\n\n424\n00:19:10.770 --> 00:19:14.350\nThese would be the IT workers that\nactually manage the registration process.\n\n425\n00:19:14.350 --> 00:19:17.360\nAnd then you might have a billing contact,\na fourth person, so\n\n426\n00:19:17.360 --> 00:19:21.520\nyou potentially could have many different\ncontacts, and if I drop this one down,\n\n427\n00:19:21.520 --> 00:19:25.130\nsee how I've got the contact type here,\nperson, company, association or\n\n428\n00:19:25.130 --> 00:19:27.560\npublic body I'm going to\nput a person on here.\n\n429\n00:19:27.560 --> 00:19:29.850\nAnd you can register it to a company or\nsomething else.\n\n430\n00:19:29.850 --> 00:19:31.300\nI'll just register for me.\n\n431\n00:19:31.300 --> 00:19:33.710\nNow, make sure\nthe information is accurate,\n\n432\n00:19:33.710 --> 00:19:36.640\nbecause if anything goes wrong with\nthe domain, and you have to contact them,\n\n433\n00:19:36.640 --> 00:19:39.910\nthis stuff is going to have to match\nup in order for us to register.\n\n434\n00:19:39.910 --> 00:19:41.110\nSo, when we come in and\n\n435\n00:19:41.110 --> 00:19:44.720\nwe start to put this information in,\nit does need to be accurate.\n\n436\n00:19:44.720 --> 00:19:51.362\nNow, this information is able to be looked\nup, reveal what's called a WHOIS search.\n\n437\n00:19:51.362 --> 00:19:54.650\nA WHOIS search lets you pull the\nbackground information for DNS domains.\n\n438\n00:19:54.650 --> 00:19:59.100\nAnd so, when you put this information\nin here, you might be worried, and\n\n439\n00:19:59.100 --> 00:20:04.380\nrightly so, that somebody could get this\ninformation and start to send you spam,\n\n440\n00:20:04.380 --> 00:20:08.340\nor try and steal your personal\nidentifiable information.\n\n441\n00:20:08.340 --> 00:20:13.040\nSo, the thing to remember with this stuff\nis that if you're putting in company\n\n442\n00:20:13.040 --> 00:20:17.860\ninformation like I am, this is stuff\nyou could have looked up anyway, right?\n\n443\n00:20:17.860 --> 00:20:21.080\nWe're a business, we're open for business,\nanybody can search and find us, so\n\n444\n00:20:21.080 --> 00:20:22.170\nthis is all public information.\n\n445\n00:20:22.170 --> 00:20:24.297\nI'm not really worried about it,\nbut my email address is right here.\n\n446\n00:20:24.297 --> 00:20:25.725\nDon@ITProTV.\n\n447\n00:20:25.725 --> 00:20:27.560\nI don't wanna get spam.\n\n448\n00:20:27.560 --> 00:20:29.565\nAnd so when you register,\n\n449\n00:20:29.565 --> 00:20:35.110\nmany registrars will offer\nanonymization or identity protection.\n\n450\n00:20:35.110 --> 00:20:38.074\nRight, and so, as I come down and\nfill this stuff out,\n\n451\n00:20:38.074 --> 00:20:41.748\nI'm just getting it all populated in here,\nall this information so\n\n452\n00:20:41.748 --> 00:20:44.790\nthat people can find me and\nsend me all the spam they can.\n\n453\n00:20:45.960 --> 00:20:47.510\nAnd there we go.\n\n454\n00:20:47.510 --> 00:20:48.530\nAnd then right down here,\n\n455\n00:20:48.530 --> 00:20:54.240\nI've got hide contact information if the\nTLD registry, and the registrar, allow it.\n\n456\n00:20:54.240 --> 00:20:57.870\nNot every domain name,\nor TLD allows it, but\n\n457\n00:20:57.870 --> 00:21:00.590\nmost of them allow you\nto anonymize the stuff.\n\n458\n00:21:00.590 --> 00:21:02.630\nAnd you'll see Amazon\nis defaulting to that.\n\n459\n00:21:02.630 --> 00:21:04.410\nSome registrars charge extra for\n\n460\n00:21:04.410 --> 00:21:06.790\nit, charge a couple of bucks extra for\nprivacy.\n\n461\n00:21:06.790 --> 00:21:08.070\nSome, it's built in.\n\n462\n00:21:08.070 --> 00:21:09.470\nHover and Amazon, it's free.\n\n463\n00:21:09.470 --> 00:21:11.119\nIt's just part of the registration,\nyou can do it.\n\n464\n00:21:11.119 --> 00:21:15.584\nAnd as you look down here, it just warns\nme, it hides some contact details for\n\n465\n00:21:15.584 --> 00:21:20.413\n.NET domains, if had .com or .edu, there\nmay be some things that do and don't.\n\n466\n00:21:20.413 --> 00:21:21.992\nWe can always read more on it.\n\n467\n00:21:21.992 --> 00:21:25.637\nBut it is typically a good idea\nto hide your contact details.\n\n468\n00:21:25.637 --> 00:21:29.495\nThe only problem with this is, if there's\never an issue with your domain and\n\n469\n00:21:29.495 --> 00:21:33.915\nyou go to get support, the WHOIS record\ndoesn't show that it's you that holds it.\n\n470\n00:21:33.915 --> 00:21:37.370\nThere'll be some kind of\nproxy account put in place.\n\n471\n00:21:37.370 --> 00:21:39.300\nAnd the proxy will show as holding it.\n\n472\n00:21:39.300 --> 00:21:41.150\nAnd I'll show you an example\nof that in just a moment.\n\n473\n00:21:41.150 --> 00:21:43.590\nAll right, but I'm gonna go ahead and\nhit Continue on this to move forward.\n\n474\n00:21:45.020 --> 00:21:47.320\nAnd now it's just giving me\na summary of what I'm doing, and\n\n475\n00:21:47.320 --> 00:21:52.490\nnotice it put the registrant,\nthe admin, and the tech, all is me.\n\n476\n00:21:52.490 --> 00:21:55.740\nIt just cloned my same data\nthree times over, right?\n\n477\n00:21:55.740 --> 00:21:58.090\nAnd then sometimes,\nthere's a fourth one, the billing.\n\n478\n00:21:58.090 --> 00:22:01.650\nAmazon's not doing the billing one,\nso I just see the three.\n\n479\n00:22:01.650 --> 00:22:03.420\n&gt;&gt; Don,\nI've actually done the WHOIS before,\n\n480\n00:22:03.420 --> 00:22:08.230\njust kind of curious on some of the major\nwebsites out there, major companies now.\n\n481\n00:22:08.230 --> 00:22:11.110\nThat's me kinda being curious\nabout to see what's going on,\n\n482\n00:22:11.110 --> 00:22:12.470\nwho's gonna use this information?\n\n483\n00:22:12.470 --> 00:22:14.550\nNow, I could say it's\nprobably a couple of people,\n\n484\n00:22:14.550 --> 00:22:16.610\nbut it's not just the registers, right?\n\n485\n00:22:16.610 --> 00:22:20.150\nThis could be me, maybe wanting to contact\nyou about a problem with your site.\n\n486\n00:22:20.150 --> 00:22:21.790\nWho would use this information?\n\n487\n00:22:21.790 --> 00:22:22.960\n&gt;&gt; Maybe you wanna buy it, right?\n\n488\n00:22:22.960 --> 00:22:26.710\nSo, use a domain name that you want,\nit's already in used by somebody so,\n\n489\n00:22:26.710 --> 00:22:28.650\nyou're, maybe I'll make him an offer.\n\n490\n00:22:28.650 --> 00:22:31.470\nIf I ever call up or something, say,\nhey, if I give you a few hundred bucks,\n\n491\n00:22:31.470 --> 00:22:33.100\nwill you sell me that domain, right?\n\n492\n00:22:33.100 --> 00:22:34.460\nYou need to find out who owns it.\n\n493\n00:22:34.460 --> 00:22:37.650\nAnd so, that's where the registrar\ninformation comes in really handy.\n\n494\n00:22:37.650 --> 00:22:39.920\nYou do that WHOIS lookup,\nand you can spot that.\n\n495\n00:22:39.920 --> 00:22:41.110\nSo, that's where it comes in.\n\n496\n00:22:41.110 --> 00:22:44.050\nAnd it's setting me as all three of these,\nbut I can come back, and\n\n497\n00:22:44.050 --> 00:22:45.850\nedit it after the fact and change it, and\n\n498\n00:22:45.850 --> 00:22:48.850\nput in the right people in these\ndifferent fields, so it's not all me.\n\n499\n00:22:50.010 --> 00:22:51.590\nI need to agree to the little terms and\nconditions.\n\n500\n00:22:51.590 --> 00:22:54.770\nI'll complete my purchase,\nand then there we go.\n\n501\n00:22:54.770 --> 00:22:59.640\nSo, I just bought itprotvdowload.net,\nbut notice the little message,\n\n502\n00:22:59.640 --> 00:23:02.890\ndomain registration might take\nup to three days to complete.\n\n503\n00:23:02.890 --> 00:23:04.700\nIt won't, but it might.\n\n504\n00:23:04.700 --> 00:23:08.330\nAnd what's going on is in the background,\nAmazon's gonna process my credit card, and\n\n505\n00:23:08.330 --> 00:23:10.800\nmake sure the credit card\nI have on file is good.\n\n506\n00:23:10.800 --> 00:23:13.880\nHope it is.\n[LAUGH] I think I have $11.\n\n507\n00:23:13.880 --> 00:23:17.840\nAnd then, once it charges the credit card,\nthen it adds it to all their servers,\n\n508\n00:23:17.840 --> 00:23:21.190\nall the route 53 servers,\nand once that's all done,\n\n509\n00:23:21.190 --> 00:23:25.200\nthen Amazon reaches out\nto the ICANN database.\n\n510\n00:23:25.200 --> 00:23:27.690\nAmazon is a registrar,\nan accredited registrar, so\n\n511\n00:23:27.690 --> 00:23:29.930\nthey're allowed to write to that\ndatabase and put the entry in.\n\n512\n00:23:29.930 --> 00:23:33.220\nAnd they'll put the entry into saying,\nhey, Don Pezet down in Gainesville,\n\n513\n00:23:33.220 --> 00:23:39.100\nFlorida now owns itprotvdemo.net and\nhere's the official nameservers for it.\n\n514\n00:23:39.100 --> 00:23:41.510\nAnd it'll put some Amazon\nnameservers in there.\n\n515\n00:23:41.510 --> 00:23:44.710\nAnd then there it goes, right,\nAmazon is now my start of authority,\n\n516\n00:23:44.710 --> 00:23:49.370\nmy SOA, Amazon has the authoritative\nresponses for my domain.\n\n517\n00:23:49.370 --> 00:23:51.900\nYou can look up my domain on any\nDNS server around the world, and\n\n518\n00:23:51.900 --> 00:23:55.990\nas long as they're recursive, they'll find\ntheir way back to Amazon to get answers\n\n519\n00:23:55.990 --> 00:24:00.030\nabout my domain, as soon as it makes\nit into the registry database.\n\n520\n00:24:00.030 --> 00:24:00.911\nThat can take a little while.\n\n521\n00:24:00.911 --> 00:24:02.744\nSometimes, Amazon will batch up hundreds,\n\n522\n00:24:02.744 --> 00:24:04.924\nor even thousands of these and\napply them all at once.\n\n523\n00:24:04.924 --> 00:24:07.520\nIt kind of minimizes the traffic\nbetween them and ICANN.\n\n524\n00:24:07.520 --> 00:24:10.595\nAnd so if that's the case,\nI might not be able to do a lookup, now.\n\n525\n00:24:10.595 --> 00:24:14.140\nIt might be tomorrow or even the next\nday before I can fully do that lookup.\n\n526\n00:24:14.140 --> 00:24:17.628\nWell, while we're waiting on that,\nlet me show you the domain privacy.\n\n527\n00:24:17.628 --> 00:24:24.290\nOver on hover.com, if I jump over here,\nI bought itprotvdemo.com.\n\n528\n00:24:24.290 --> 00:24:26.100\nThat's why it was taken.\n\n529\n00:24:26.100 --> 00:24:29.600\nSo I bought it, I actually bought it\na few months ago so I'd have it ready and\n\n530\n00:24:29.600 --> 00:24:31.060\nit's just kinda sitting there.\n\n531\n00:24:31.060 --> 00:24:33.960\nSo I've got itprotvdemo.com\nsitting right here.\n\n532\n00:24:33.960 --> 00:24:36.740\nAnd if I look down at\nsome of the settings,\n\n533\n00:24:36.740 --> 00:24:40.740\nyou'll see who is privacy and it's on.\n\n534\n00:24:40.740 --> 00:24:42.690\nIt's on by default with them,\nthey don't charge you extra,\n\n535\n00:24:42.690 --> 00:24:45.870\nit's just part of the process,\nwhen you buy it, they do that.\n\n536\n00:24:45.870 --> 00:24:49.474\nSo if I scroll down and\nlook at the registration records,\n\n537\n00:24:49.474 --> 00:24:51.887\nI can see that Don Pezet owns itprotv.\n\n538\n00:24:51.887 --> 00:24:54.340\nWell, demo.com, at least.\n\n539\n00:24:54.340 --> 00:24:56.220\nI'm the admin and I'm the billing contact.\n\n540\n00:24:56.220 --> 00:24:57.080\nThey do a billing.\n\n541\n00:24:57.080 --> 00:24:59.410\nAnd no tech entry, right,\nit's, there we go.\n\n542\n00:24:59.410 --> 00:25:00.410\nOff the bottom of the screens.\n\n543\n00:25:00.410 --> 00:25:01.040\nThey have all fours.\n\n544\n00:25:01.040 --> 00:25:02.070\nThere's the tech.\n\n545\n00:25:02.070 --> 00:25:03.850\nSo, I see all four of these.\n\n546\n00:25:03.850 --> 00:25:04.960\nNow, the first three are me.\n\n547\n00:25:04.960 --> 00:25:06.980\nOwner, admin, billing, that's me.\n\n548\n00:25:06.980 --> 00:25:11.582\nBut the last one, support contact at\n96 Mowat Avenue, Toronto Ontario,\n\n549\n00:25:11.582 --> 00:25:15.800\nin Canada.\n\n550\n00:25:15.800 --> 00:25:19.480\nM6K3M1, that's not me, I'm not in Canada.\n\n551\n00:25:19.480 --> 00:25:22.840\nWell, that's Hover, that's them,\nthat's their company, their people.\n\n552\n00:25:22.840 --> 00:25:24.450\nSo they're the technical support.\n\n553\n00:25:24.450 --> 00:25:26.990\nSo, if there's a problem with the domain,\nthey can solve it for me,\n\n554\n00:25:26.990 --> 00:25:28.690\nthey're on the list of approved people.\n\n555\n00:25:28.690 --> 00:25:30.460\nIf I don't want that,\nI can go edit and change it.\n\n556\n00:25:30.460 --> 00:25:33.580\nAnd now Hover can't help me, even\nthough they're the register of record,\n\n557\n00:25:33.580 --> 00:25:35.970\nand they're holding onto that domain.\n\n558\n00:25:35.970 --> 00:25:38.320\nNow, if I go and do a whois lookup,\n\n559\n00:25:38.320 --> 00:25:43.000\nwell you can go to,\nhere's where we normally go.\n\n560\n00:25:43.000 --> 00:25:47.360\nIt's ICANN's database, so if you go to\nwhois.icann.org, you can do a lookup.\n\n561\n00:25:47.360 --> 00:25:48.750\nIf you do a Google search for\n\n562\n00:25:48.750 --> 00:25:51.420\nwhois lookup, you'll find a ton\nof different people that do them.\n\n563\n00:25:51.420 --> 00:25:54.670\nAnd a lot of them charge money for\nit, or display a ton of ads.\n\n564\n00:25:54.670 --> 00:25:57.568\nBut it's all coming out of a public\ndatabase that's accessible right here.\n\n565\n00:25:57.568 --> 00:25:59.668\nWho is .icann.org?\n\n566\n00:25:59.668 --> 00:26:03.720\nAnd if you come in and\nsearch for ITProTVdemo.com and\n\n567\n00:26:03.720 --> 00:26:06.810\nyou do a lookup, you're not gonna see me.\n\n568\n00:26:06.810 --> 00:26:10.720\nWell, after I clear this little captcha.\n\n569\n00:26:10.720 --> 00:26:13.330\nphones hashfield.\n\n570\n00:26:13.330 --> 00:26:15.260\nTwo words I use together all the time.\n\n571\n00:26:15.260 --> 00:26:19.580\nSo when I look here, I see registrant,\nadmin, tech contact.\n\n572\n00:26:19.580 --> 00:26:20.660\nI don't see billing.\n\n573\n00:26:20.660 --> 00:26:22.950\nAnd look at them all,\nwell they're all the same, first off.\n\n574\n00:26:22.950 --> 00:26:28.150\nAnd if I look at just the very first one,\nit's Contact Privacy Incorporated.\n\n575\n00:26:28.150 --> 00:26:33.620\nContact privacy incorporated 0142059037,\n96 Mowat Avenue.\n\n576\n00:26:33.620 --> 00:26:35.780\nThat sounds familiar, right?\n\n577\n00:26:35.780 --> 00:26:37.410\nThis is Hover.\n\n578\n00:26:37.410 --> 00:26:40.180\nHover is hiding my contact details.\n\n579\n00:26:40.180 --> 00:26:42.060\nThey've got my contact details.\n\n580\n00:26:42.060 --> 00:26:45.960\nBut when they register it with ICANN\nthey put their own details and\n\n581\n00:26:45.960 --> 00:26:51.180\nthey created a fake email address\nitprotvdemo.com@contactprivacy.com.\n\n582\n00:26:51.180 --> 00:26:55.590\nAnd if you send an email to that fake\naddress, it gets forwarded to me.\n\n583\n00:26:55.590 --> 00:26:58.070\nSo I get it, but\nyou don't know what my email address is.\n\n584\n00:26:58.070 --> 00:27:02.870\nSo it lets me hide that information, and\nmeanwhile people can still contact me and\n\n585\n00:27:02.870 --> 00:27:03.480\nget at that data.\n\n586\n00:27:03.480 --> 00:27:07.617\nAnd they've got this customer number,\nand we can call Hover on the phone or\n\n587\n00:27:07.617 --> 00:27:11.819\ncall this number posted right here and\nask them, Hey, I need to reach out and\n\n588\n00:27:11.819 --> 00:27:13.214\ncontact this customer.\n\n589\n00:27:13.214 --> 00:27:14.720\nAnd then they can relay the information.\n\n590\n00:27:14.720 --> 00:27:16.160\nThey're a proxy now, for me.\n\n591\n00:27:16.160 --> 00:27:18.180\nSo, that's a very common thing.\n\n592\n00:27:18.180 --> 00:27:20.780\nWe saw Amazon had it, when I checked out.\n\n593\n00:27:20.780 --> 00:27:22.745\nWe see that Hover has it, here.\n\n594\n00:27:22.745 --> 00:27:26.370\nGoDaddy has it also, somewhere else,\nI don't have it pulled up.\n\n595\n00:27:26.370 --> 00:27:29.250\nBut when you go to do it, they used to\ncharge extra, I think it's free now.\n\n596\n00:27:29.250 --> 00:27:30.890\nSo they have a few different options.\n\n597\n00:27:30.890 --> 00:27:35.270\nBut just take a check with whatever\nprovider it is that you're using, and\n\n598\n00:27:35.270 --> 00:27:37.910\nthey'll usually have information\non how they do that.\n\n599\n00:27:37.910 --> 00:27:39.310\nHow they do the contact privacy,\n\n600\n00:27:39.310 --> 00:27:42.160\nor whatever it is that they\nuse to register that domain.\n\n601\n00:27:42.160 --> 00:27:43.530\nIt is a good idea to go ahead and do that.\n\n602\n00:27:44.980 --> 00:27:48.430\nAll right, once it's registered,\nwe're pretty much done.\n\n603\n00:27:48.430 --> 00:27:49.700\nAnd now it's just a waiting game.\n\n604\n00:27:49.700 --> 00:27:50.950\nWe own the domain.\n\n605\n00:27:50.950 --> 00:27:53.160\nWe haven't done anything with it,\nbut we do own it.\n\n606\n00:27:53.160 --> 00:27:58.200\nAnd if you go and\ndo a whois lookup on your newfound domain,\n\n607\n00:27:58.200 --> 00:28:00.940\nas long as you're searching on ICANN,\nyou always want to search on ICANN cuz\n\n608\n00:28:00.940 --> 00:28:03.350\nthe other guys sometimes cache\nthe database and it's out of date.\n\n609\n00:28:03.350 --> 00:28:08.160\nBut if we keep searching on ICANN,\neventually our data will show up.\n\n610\n00:28:09.170 --> 00:28:13.130\nAnd as soon as the data shows up here,\nthen it'll be safe to go.\n\n611\n00:28:13.130 --> 00:28:17.810\nAnd I gotta pass another CAPTCHA, and\nI can't read that, what is that, top?\n\n612\n00:28:17.810 --> 00:28:18.500\n&gt;&gt; TOPCON?\n\n613\n00:28:18.500 --> 00:28:19.710\n&gt;&gt; CON WEST.\n\n614\n00:28:19.710 --> 00:28:22.520\nI know, I must be a robot.\n\n615\n00:28:22.520 --> 00:28:23.110\nThere we go.\n\n616\n00:28:23.110 --> 00:28:26.110\nSo ITProTVdemo.net is\nactually showing up already.\n\n617\n00:28:26.110 --> 00:28:29.350\nSo that whole waiting three days thing,\ndidn't really pan out.\n\n618\n00:28:29.350 --> 00:28:33.606\nBut if I look, I can see that it was\nregistered on behalf of the owner,\n\n619\n00:28:33.606 --> 00:28:36.120\nusing whois privacy services.\n\n620\n00:28:36.120 --> 00:28:37.180\nWell, who is that?\n\n621\n00:28:37.180 --> 00:28:37.930\nWell, it's Amazon, right?\n\n622\n00:28:37.930 --> 00:28:40.870\nAmazon's the one who did it, but\nyou wouldn't know it from here, and\n\n623\n00:28:40.870 --> 00:28:44.425\nI can see they've got a dummy\nemail address, owner at\n\n624\n00:28:44.425 --> 00:28:48.895\nITProTVdemo.net.whoisprivacyservice.org,\nand if you were to go to\n\n625\n00:28:48.895 --> 00:28:52.590\nwhoisprivacyservice.org, you'll\nfind out about that.\n\n626\n00:28:52.590 --> 00:28:53.570\nAnd if I look down here though,\n\n627\n00:28:53.570 --> 00:28:56.630\nI can see under the registrar,\nthe registrar is Amazon.com, right?\n\n628\n00:28:56.630 --> 00:29:00.210\nSo I can see where it was registered and\nthat information there.\n\n629\n00:29:00.210 --> 00:29:08.130\nAnd if I browse to who is\nprivacy [LAUGH] service.org?\n\n630\n00:29:08.130 --> 00:29:11.549\nI tried to copy and paste, and apparently\nmy copy and paste skills are nonexistent.\n\n631\n00:29:13.490 --> 00:29:14.430\nDidn't get anything.\n\n632\n00:29:14.430 --> 00:29:16.380\nNormally you at least get a web page,\nor whatever.\n\n633\n00:29:16.380 --> 00:29:19.920\nBut normally you get a page telling you,\nhey, this is an identity proxy.\n\n634\n00:29:19.920 --> 00:29:21.130\nAnd if you want to contact a person,\ngo here.\n\n635\n00:29:21.130 --> 00:29:24.800\nI probably just fat-fingered it and\nnow I've got to pass another.\n\n636\n00:29:24.800 --> 00:29:27.410\nWe're gonna rename this\nepisode Passing CAPTCHAs 101.\n\n637\n00:29:27.410 --> 00:29:31.720\nThere we go.\nLet me just copy and paste that, again.\n\n638\n00:29:31.720 --> 00:29:34.870\nBut basically, you can go and try and\nfind out some information about\n\n639\n00:29:34.870 --> 00:29:38.380\nwho that is that's actually registered,\nor who's holding it, or whatever.\n\n640\n00:29:38.380 --> 00:29:39.370\nIt just does not want to.\n\n641\n00:29:41.360 --> 00:29:43.260\nIt may not have populated, yet.\n\n642\n00:29:43.260 --> 00:29:45.990\nAgain, I didn't wait three days,\nso it may just not have loaded.\n\n643\n00:29:45.990 --> 00:29:47.500\nBut if you take some of these,\nlike the Hover one.\n\n644\n00:29:47.500 --> 00:29:48.700\nThe Hover one's been around a while.\n\n645\n00:29:48.700 --> 00:29:50.330\nSo let me take that one.\n\n646\n00:29:50.330 --> 00:29:53.100\nAnd, when I did the whois\nlookup on this one and\n\n647\n00:29:53.100 --> 00:29:55.580\nit showed that contact privacy, right?\n\n648\n00:29:55.580 --> 00:30:01.640\nSo if I were to go to contactprivacy.com,\nand I go to that website,\n\n649\n00:30:01.640 --> 00:30:06.280\nit tells me on here, hey, well this\nis actually a whois privacy service.\n\n650\n00:30:06.280 --> 00:30:10.130\nAnd type in the domain of the person\nyou're trying to reach, so if I'm trying\n\n651\n00:30:10.130 --> 00:30:14.980\nto reach ITProTVdemo.com, I can submit it,\nand now who do I want to contact?\n\n652\n00:30:14.980 --> 00:30:17.330\nThe admin, the billing,\nthe owner, the tech?\n\n653\n00:30:17.330 --> 00:30:20.200\nIt's not going to tell me who they are,\nbut it's going to let me pick them and\n\n654\n00:30:20.200 --> 00:30:24.430\nI can put who I'm from and\nwho I'm emailing to and I can send it off.\n\n655\n00:30:24.430 --> 00:30:27.210\nAnd I have a CAPTCHA to pass,\nthat's gonna stop the spam.\n\n656\n00:30:27.210 --> 00:30:30.810\nReally the spam is the big part, cuz if\nyou're somebody like me that registered\n\n657\n00:30:30.810 --> 00:30:34.720\na domain before all this was commonplace,\nyou used to just get hundreds and\n\n658\n00:30:34.720 --> 00:30:38.430\nhundreds of spam emails just from\nthe registration, it was a real pain.\n\n659\n00:30:38.430 --> 00:30:39.790\n&gt;&gt; Well,\nthat's a lot of great information.\n\n660\n00:30:39.790 --> 00:30:42.780\nAnd for those of you who may be wondering\nout there that are playing network\n\n661\n00:30:42.780 --> 00:30:47.640\ntrivial pursuit right now, IO, that is\nthe British Indian Ocean territory.\n\n662\n00:30:47.640 --> 00:30:50.290\nApparently they're so\nexpensive because maybe they've got one or\n\n663\n00:30:50.290 --> 00:30:52.280\ntwo DNS servers floating on buoys,\nout there.\n\n664\n00:30:52.280 --> 00:30:54.570\n&gt;&gt; Yeah\n&gt;&gt; It's in the Indian Ocean,\n\n665\n00:30:54.570 --> 00:30:55.320\nthat's interesting.\n\n666\n00:30:55.320 --> 00:30:56.880\n&gt;&gt; Yeah, that's very interesting.\n\n667\n00:30:56.880 --> 00:30:58.750\nSo anyways, for\n\n668\n00:30:58.750 --> 00:31:01.310\nthose of you guys that are sitting\naround playing network Trivial Pursuit.\n\n669\n00:31:01.310 --> 00:31:04.190\nDon, it does look like we're coming to the\nend of another episode, but before we do,\n\n670\n00:31:04.190 --> 00:31:06.450\nwhen it comes to purchasing domains,\ngot any tips, tricks,\n\n671\n00:31:06.450 --> 00:31:08.370\nor maybe just words of advice?\n\n672\n00:31:08.370 --> 00:31:10.730\n&gt;&gt; You'll probably learn over\nthe years which providers you like and\n\n673\n00:31:10.730 --> 00:31:11.360\nwhich ones you don't.\n\n674\n00:31:11.360 --> 00:31:13.420\nSome of them are really great,\nsome not so much.\n\n675\n00:31:13.420 --> 00:31:15.660\nNetwork Solutions,\nI probably should have mentioned them.\n\n676\n00:31:15.660 --> 00:31:17.620\nThere's a lot of people\nout there who are diehard.\n\n677\n00:31:17.620 --> 00:31:21.250\nThey say, I'm gonna register with Network\nSolutions cause they're the ones who run\n\n678\n00:31:21.250 --> 00:31:22.690\nthe domain naming system.\n\n679\n00:31:22.690 --> 00:31:26.010\nThat was true 15 years ago,\nit's not true today.\n\n680\n00:31:26.010 --> 00:31:30.298\nSo back in the early days when ICANN\nfirst started to do paid registrations,\n\n681\n00:31:30.298 --> 00:31:32.911\nthey gave the contract\nto Network Solutions.\n\n682\n00:31:32.911 --> 00:31:36.681\nAnd so NetSolve, they had the exclusive\ncontract form the beginning, so for\n\n683\n00:31:36.681 --> 00:31:40.180\na period of five or six years,\nyes, they were the head honchos.\n\n684\n00:31:40.180 --> 00:31:43.430\nNow they're just like any other registrar\nout there, so they're not really special.\n\n685\n00:31:43.430 --> 00:31:46.390\nSo if you're still clinging to that one,\ndon't let that be your hold up.\n\n686\n00:31:46.390 --> 00:31:48.070\nBut also remember that\nyou can easily switch.\n\n687\n00:31:48.070 --> 00:31:51.140\nIf you want to move to a different\nprovider, that one's out there too.\n\n688\n00:31:51.140 --> 00:31:52.520\nIt's easy enough to move along.\n\n689\n00:31:52.520 --> 00:31:54.410\nWell Don,\nwe appreciate that great information.\n\n690\n00:31:54.410 --> 00:31:56.140\nWe appreciate you, the viewer, watching.\n\n691\n00:31:56.140 --> 00:31:59.450\nSigning out for ITProTV,\nI've been your host, Wes Bryan.\n\n692\n00:31:59.450 --> 00:32:00.180\n&gt;&gt; And I'm Don Pezet.\n\n693\n00:32:00.180 --> 00:32:01.615\n&gt;&gt; And we'll see you next time.\n\n694\n00:32:01.615 --> 00:32:08.843\n[MUSIC]\n\n695\n00:32:08.843 --> 00:32:10.230\n&gt;&gt; Thank you for watching.\n\n696\n00:32:10.230 --> 00:32:12.026\nITProTV.\n\n",
          "vimeoId": "195994998"
        },
        {
          "description": "In this episode, Wes and Don explain the task of changing the DNS server or servers that are authoritative for a domain. They demonstrate the process as well as discuss DNS NS records.",
          "length": "1530",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-4-2-changing_name_servers-120516-PGM.00_25_16_12.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-4-2-changing_name_servers-120516-PGM.00_25_16_12.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-4-2-changing_name_servers-120516-PGM.00_25_16_12.Still001-sm.jpg",
          "title": "Changing Name Servers",
          "transcript": "WEBVTT\n\n1\n00:00:00.180 --> 00:00:07.394\nWelcome to ITProTV, I\"m your host-\n&gt;&gt; [CROSSTALK]\n\n2\n00:00:07.394 --> 00:00:08.188\n[MUSIC]\n\n3\n00:00:08.188 --> 00:00:11.988\n&gt;&gt; You're watching ITProTV.\n\n4\n00:00:11.988 --> 00:00:16.176\n&gt;&gt; Welcome to another great episode here\nat ITProTV, I'm your host Wes Bryan.\n\n5\n00:00:16.176 --> 00:00:20.009\nAnd in today's episode, we're continuing\nthrough our series and probably one of\n\n6\n00:00:20.009 --> 00:00:23.470\nthe most important services on\nthe Internet today and that is DNS.\n\n7\n00:00:23.470 --> 00:00:26.480\nJoining us back in the studios for\nthis very endeavor is none other than Mr.\n\n8\n00:00:26.480 --> 00:00:27.030\nDon Pezet.\n\n9\n00:00:27.030 --> 00:00:28.010\nDon, how are you doing, sir?\n\n10\n00:00:28.010 --> 00:00:28.740\n&gt;&gt; I'm doing great, Wes,\n\n11\n00:00:28.740 --> 00:00:31.430\nready to dive right back into\nthe wonderful world of DNS.\n\n12\n00:00:31.430 --> 00:00:34.180\nIn fact, you mentioned how\nimportant this service is, so\n\n13\n00:00:34.180 --> 00:00:36.340\nlet's take a look at how\nwe can really screw it up.\n\n14\n00:00:36.340 --> 00:00:39.260\n[LAUGH] So,\nI wanna take a look at in this episode\n\n15\n00:00:39.260 --> 00:00:42.550\nis how to change our DNS server and\nif you're watching these in order,\n\n16\n00:00:42.550 --> 00:00:46.130\nin our last episode we saw how we\ncan go and register a domain name.\n\n17\n00:00:46.130 --> 00:00:47.740\nAnd now that we've got it,\n\n18\n00:00:47.740 --> 00:00:50.640\nwe need to tell it where we're\ngonna store all of our records.\n\n19\n00:00:50.640 --> 00:00:54.740\nNow every provider out there that\nI've ever worked with, when you go to\n\n20\n00:00:54.740 --> 00:01:00.060\nthe registrar and buy the domain, they\nalways offer to host the domain for you.\n\n21\n00:01:00.060 --> 00:01:03.080\nSo if I register\nthe domain with hover.com,\n\n22\n00:01:03.080 --> 00:01:07.140\nthey'll host the DNS domain for me, so\nI can put records there and off I go.\n\n23\n00:01:07.140 --> 00:01:10.930\nSame thing with Amazon's Route 53,\nand GoDaddy, and Register.com, and\n\n24\n00:01:10.930 --> 00:01:13.090\neverybody else that you\nmight use out there.\n\n25\n00:01:13.090 --> 00:01:14.490\nThat's all part of their service, right?\n\n26\n00:01:14.490 --> 00:01:15.450\nIt's part of what you pay for.\n\n27\n00:01:16.510 --> 00:01:20.260\nBut just because they offer you the\nservice doesn't mean you have to use it,\n\n28\n00:01:20.260 --> 00:01:21.970\nor even want to use it in some scenarios.\n\n29\n00:01:21.970 --> 00:01:23.900\nIt might not work out for you.\n\n30\n00:01:23.900 --> 00:01:27.530\nSo let me show you kinda what's involved\nwith that, and how we can adjust that.\n\n31\n00:01:27.530 --> 00:01:28.910\nThe key thing to remember here, and\n\n32\n00:01:28.910 --> 00:01:33.670\nthis something a lot of people don't think\nabout, is where you register the domain\n\n33\n00:01:33.670 --> 00:01:38.970\nand where you host the domain\ndon't have to be the same thing.\n\n34\n00:01:38.970 --> 00:01:41.180\nThe registrar's job is very simple.\n\n35\n00:01:41.180 --> 00:01:45.760\nThey put a database entry in\nthe ICAN database, that's it.\n\n36\n00:01:45.760 --> 00:01:49.030\nAfter they've done that, you really\ndon't need the registrar anymore.\n\n37\n00:01:49.030 --> 00:01:50.303\nYou just need them once a year, or\n\n38\n00:01:50.303 --> 00:01:52.620\nevery couple of years depending\non how much you pay, to go and\n\n39\n00:01:52.620 --> 00:01:55.674\nmake sure your database entries are up\nto date, that's all you need them to do.\n\n40\n00:01:55.674 --> 00:01:58.369\nYou don't need them to\nhost the records for you,\n\n41\n00:01:58.369 --> 00:02:01.100\nyou can host them anywhere you want.\n\n42\n00:02:01.100 --> 00:02:03.380\nAll right, so\nwhat do I mean when I say that?\n\n43\n00:02:03.380 --> 00:02:06.600\nWell, let's start with Amazon, right?\n\n44\n00:02:06.600 --> 00:02:10.540\nSo in the last episode,\nI bought itprotvdemo.net.\n\n45\n00:02:10.540 --> 00:02:13.660\nAnd I bought it through Amazon,\nthrough Route53.\n\n46\n00:02:13.660 --> 00:02:16.260\nAnd so\nit's now a HostedZone with Route53 and\n\n47\n00:02:16.260 --> 00:02:19.960\nthey've got it sitting right here,\nitprotvdemo.net, okay?\n\n48\n00:02:19.960 --> 00:02:23.405\nAnd it even says right here,\nHostedZone created by Route53 Registrar.\n\n49\n00:02:23.405 --> 00:02:26.594\nI bought it from them, registered it\nwith them and now, it's stored and\n\n50\n00:02:26.594 --> 00:02:28.030\nhosted by them.\n\n51\n00:02:28.030 --> 00:02:32.089\nAnd if I click on that ITPro.TV demo,\nI can see my record set and\n\n52\n00:02:32.089 --> 00:02:34.704\nthere's already some records in here.\n\n53\n00:02:34.704 --> 00:02:37.580\nNot many but two, right?\n\n54\n00:02:37.580 --> 00:02:40.140\nAnd these records each\nserve an important purpose.\n\n55\n00:02:40.140 --> 00:02:43.390\nThis bottom one I don't really\nwant to mess with it, right?\n\n56\n00:02:43.390 --> 00:02:44.890\nThis is my start of authority.\n\n57\n00:02:44.890 --> 00:02:48.090\nThe start of authority is who\nis it that's responsible for\n\n58\n00:02:48.090 --> 00:02:50.280\nanswering questions about this domain?\n\n59\n00:02:50.280 --> 00:02:52.920\nAnd typically,\nthat is going to be your registrar.\n\n60\n00:02:52.920 --> 00:02:58.452\nNotice mine is set to\nns-648.awsdns-17.net and so on, right?\n\n61\n00:02:58.452 --> 00:03:00.970\nSo that's what it's set to.\n\n62\n00:03:00.970 --> 00:03:05.180\nI could override that and point my\nstart of authority somewhere else.\n\n63\n00:03:05.180 --> 00:03:07.590\nBut that can cause some problems\nwhen the registrar is right here.\n\n64\n00:03:07.590 --> 00:03:10.160\nSo we don't normally\ndink with that too much.\n\n65\n00:03:10.160 --> 00:03:15.080\nBut the one above it, NS,\nthose are my nameserver records.\n\n66\n00:03:15.080 --> 00:03:19.479\nWhen I go to actually look for\nan a record, a c name, mx records,\n\n67\n00:03:19.479 --> 00:03:23.877\nall the other records we store in DNS,\nthese are the servers that\n\n68\n00:03:23.877 --> 00:03:28.870\nare allowed to give an authoritative\nresponse about those names to IPs.\n\n69\n00:03:28.870 --> 00:03:31.712\nOr if it's a reverse lookup zone,\nit would be IPs to names, right?\n\n70\n00:03:31.712 --> 00:03:33.668\nBut these are the nameservers\nthat are responsible for it.\n\n71\n00:03:33.668 --> 00:03:38.935\nThen they've got four,\nns-648.awsdns-17.net.\n\n72\n00:03:38.935 --> 00:03:42.330\nThere's a .org, a .co.uk, and a .com.\n\n73\n00:03:42.330 --> 00:03:44.320\nWhy the different top level domains?\n\n74\n00:03:44.320 --> 00:03:45.250\nRedundancy.\n\n75\n00:03:45.250 --> 00:03:47.800\nIf one of them goes down,\nI can switch over to another.\n\n76\n00:03:47.800 --> 00:03:51.219\nEach top level domain is handled\nby different registrars.\n\n77\n00:03:51.219 --> 00:03:53.162\nAnd so that gives me redundancy and\n\n78\n00:03:53.162 --> 00:03:57.525\nreliability across these different ones\nin the event one were to go offline.\n\n79\n00:03:57.525 --> 00:03:58.984\nI can change these.\n\n80\n00:03:58.984 --> 00:04:01.640\nI could change these to\npoint wherever I want.\n\n81\n00:04:01.640 --> 00:04:04.710\nMaybe I have my own DNS server somewhere.\n\n82\n00:04:04.710 --> 00:04:06.440\nAnd I want to go and point those there.\n\n83\n00:04:06.440 --> 00:04:09.730\nSo for example if I go into EC2,\n\n84\n00:04:09.730 --> 00:04:14.150\nI actually do have a couple\nof DNS servers sitting here.\n\n85\n00:04:14.150 --> 00:04:19.170\nSo I can switch over and\nI've got these DNS servers that I parked.\n\n86\n00:04:19.170 --> 00:04:23.137\nOne's a Red Hat Linux box, the other\none's a Microsoft Windows box and\n\n87\n00:04:23.137 --> 00:04:25.916\nI've got these two, dns2.lab.itpro.tv and\n\n88\n00:04:25.916 --> 00:04:29.680\ndns1.lab.itpro.tv and\nthey're kinda sitting there.\n\n89\n00:04:29.680 --> 00:04:34.570\nAnd if I look over here, somewhere, I can\nfind out what their IP addresses are.\n\n90\n00:04:34.570 --> 00:04:35.740\nIt's actually down here at the bottom.\n\n91\n00:04:36.820 --> 00:04:39.460\nHidden away,\nway down here at the bottom of the screen.\n\n92\n00:04:39.460 --> 00:04:41.500\nI can find out what their\nIP addresses are and\n\n93\n00:04:41.500 --> 00:04:44.350\nif they've got a name that's able to\nbe looked up and I've got that too.\n\n94\n00:04:44.350 --> 00:04:46.510\nSo I can come in and I can find these and\nI could say, you know what?\n\n95\n00:04:46.510 --> 00:04:50.950\nThose are my DNS servers,\nI wanna host the zone myself.\n\n96\n00:04:50.950 --> 00:04:51.810\nI've got some DNS servers,\n\n97\n00:04:51.810 --> 00:04:55.040\nI've got it set up, I've got the zone\ncreated, that's where I want people to go.\n\n98\n00:04:55.040 --> 00:04:57.340\nI don't want them to go to Amazon,\nI don't want them to go to Hover.\n\n99\n00:04:57.340 --> 00:04:59.130\nI want them to go right here.\n\n100\n00:04:59.130 --> 00:05:05.330\nSo all I have to do is go up to my zone\nand I'll switch back over to Route 53.\n\n101\n00:05:05.330 --> 00:05:08.002\nAnd go into my zone, and in the zone,\n\n102\n00:05:08.002 --> 00:05:11.900\nI can change those nameservers and\nI can modify them.\n\n103\n00:05:11.900 --> 00:05:17.420\nAnd so over here on the right side, I'll\nsee the nameservers and I can change them.\n\n104\n00:05:17.420 --> 00:05:20.420\nNow, when I go to specify it,\nI can take what's in there and\n\n105\n00:05:20.420 --> 00:05:22.880\njust delete them out and\nchange it to my own.\n\n106\n00:05:22.880 --> 00:05:25.000\nThey give some examples down here but\nthese are just kinda fake.\n\n107\n00:05:25.000 --> 00:05:27.300\nYou're supposed to use the ones\nthat are already in there.\n\n108\n00:05:27.300 --> 00:05:28.750\nSo I can come in and\n\n109\n00:05:28.750 --> 00:05:33.750\nI can change in that way or I can just\nleave them the way they are, right?\n\n110\n00:05:33.750 --> 00:05:36.330\nBut the whole point here is\nthat I do wanna change them.\n\n111\n00:05:36.330 --> 00:05:41.861\nSo I can just take these out and\nI can put in dns1.lab.itpro.tv and\n\n112\n00:05:41.861 --> 00:05:44.820\ndns2.lab.itpro.tv.\n\n113\n00:05:44.820 --> 00:05:47.460\nIf I don't like doing domain names,\nI can do IP addresses.\n\n114\n00:05:47.460 --> 00:05:51.030\nBut domain names are nicer in case the IPs\nchange, these'll resolve to it, but\n\n115\n00:05:51.030 --> 00:05:52.533\nit's up to me how I wanna do that.\n\n116\n00:05:52.533 --> 00:05:57.710\nNow when I change that,\nit's not gonna take effect right away.\n\n117\n00:05:57.710 --> 00:05:59.730\nNotice my time to live.\n\n118\n00:05:59.730 --> 00:06:02.060\nEvery record in DNS has a TTL.\n\n119\n00:06:02.060 --> 00:06:05.240\nAnd the time to live is\nhow long these record's\n\n120\n00:06:05.240 --> 00:06:08.052\nallowed to be cached somewhere else.\n\n121\n00:06:08.052 --> 00:06:11.530\nAnd nameserver records\nare guaranteed to be cached\n\n122\n00:06:11.530 --> 00:06:15.640\nanytime somebody performs a lookup for\nany record inside of the domain.\n\n123\n00:06:15.640 --> 00:06:17.752\nThat means the odds are these are cached.\n\n124\n00:06:17.752 --> 00:06:21.332\nAnd look at that time to live, 172800.\n\n125\n00:06:21.332 --> 00:06:23.520\nThese records don't change very often.\n\n126\n00:06:23.520 --> 00:06:27.480\nAnd so\nAmazon is defaulted to a really big timer.\n\n127\n00:06:27.480 --> 00:06:29.220\nSo if I were to figure that out,\n\n128\n00:06:29.220 --> 00:06:32.630\nI actually have no idea what\nthat works out to in time.\n\n129\n00:06:32.630 --> 00:06:36.678\nSo let's divide that by 60,\nso that's 2,880 hours.\n\n130\n00:06:36.678 --> 00:06:38.955\nAnd let's divide that by 24.\n\n131\n00:06:38.955 --> 00:06:41.579\n120 days, that can't be right.\n\n132\n00:06:41.579 --> 00:06:43.649\nI must've done bad math there, right?\n\n133\n00:06:43.649 --> 00:06:46.310\nHelp me out, Wes,\nis that bad math or was that good?\n\n134\n00:06:46.310 --> 00:06:47.160\n&gt;&gt; I think that was right on.\n\n135\n00:06:47.160 --> 00:06:48.288\nThat's what I've got.\nI've got 288-\n\n136\n00:06:48.288 --> 00:06:50.710\n&gt;&gt; [CROSSTALK] Sorry, these are seconds.\n\n137\n00:06:50.710 --> 00:06:51.879\n&gt;&gt; Seconds, not minutes.\n\n138\n00:06:51.879 --> 00:06:55.040\n&gt;&gt; So I convert it to minutes, and\nthen I need to convert to hours.\n\n139\n00:06:55.040 --> 00:06:57.470\nAnd then,\nI can divide that out into two days.\n\n140\n00:06:57.470 --> 00:06:58.840\nAll right,\nthat's more realistic, two days.\n\n141\n00:06:58.840 --> 00:06:59.790\n&gt;&gt; Shows you how good my math is.\n\n142\n00:06:59.790 --> 00:07:02.740\n&gt;&gt; I know, so, all right, so two days.\n\n143\n00:07:02.740 --> 00:07:08.490\nSo this NS record could be cached on\nother DNS servers around the planet for\n\n144\n00:07:08.490 --> 00:07:09.490\nup to two days.\n\n145\n00:07:09.490 --> 00:07:12.880\nSo when I make this change,\nsome people might see it right away.\n\n146\n00:07:12.880 --> 00:07:14.697\nOther people might see\nit 48 hours from now.\n\n147\n00:07:14.697 --> 00:07:15.970\nTwo days later.\n\n148\n00:07:15.970 --> 00:07:18.350\nSo I need to be prepared for that.\n\n149\n00:07:18.350 --> 00:07:23.520\nWhen you change this, I need to\ngo to dns1 and dns2.lab.itpro.tv.\n\n150\n00:07:23.520 --> 00:07:28.582\nAnd I need to create ITProTVdemo.net.\n\n151\n00:07:28.582 --> 00:07:30.630\nI need to create that zone.\n\n152\n00:07:30.630 --> 00:07:35.520\nAnd then once the zone is created, I need\nto take all my a records and c names and\n\n153\n00:07:35.520 --> 00:07:38.580\nall of the other things that I've created,\nand put them in the new zones.\n\n154\n00:07:38.580 --> 00:07:41.370\nAnd I need these two to be identical.\n\n155\n00:07:41.370 --> 00:07:45.790\nI need to have the same records here on my\ncurrent registrar that I have on my new\n\n156\n00:07:45.790 --> 00:07:47.354\none, my new nameservers.\n\n157\n00:07:47.354 --> 00:07:50.120\nIf this is a brand new domain,\nnothing to move over.\n\n158\n00:07:50.120 --> 00:07:50.920\nWhat do I care, right?\n\n159\n00:07:50.920 --> 00:07:52.106\nMine's empty.\n\n160\n00:07:52.106 --> 00:07:54.325\nBut what if this was a production domain?\n\n161\n00:07:54.325 --> 00:07:56.425\nWhat if I already had stuff going?\n\n162\n00:07:56.425 --> 00:07:58.685\nWell, let me show you how\nthat process would work.\n\n163\n00:07:58.685 --> 00:08:01.640\nNow I'm gonna leave this one be,\ncuz it's sitting right here.\n\n164\n00:08:01.640 --> 00:08:04.090\nSo I'm not gonna mess with that.\n\n165\n00:08:04.090 --> 00:08:06.790\nBut let me go over to hover.\n\n166\n00:08:06.790 --> 00:08:10.560\nAnd on hover,\nI have itprotvdemo.com right?\n\n167\n00:08:10.560 --> 00:08:11.900\nSo I purchase that.\n\n168\n00:08:11.900 --> 00:08:14.261\nAnd if I go to the DNS\nrecords I can look at it, and\n\n169\n00:08:14.261 --> 00:08:16.160\nI actually do have some entries here.\n\n170\n00:08:16.160 --> 00:08:21.626\nI've got mail1, mail2, I got a client\nin place, I've got some MX records,\n\n171\n00:08:21.626 --> 00:08:26.600\nwww, I've got all sorts of\nentries that are over here, okay?\n\n172\n00:08:26.600 --> 00:08:31.130\nAnd I decide that, hey,\nI don't wanna use Hover as my DNS server.\n\n173\n00:08:31.130 --> 00:08:32.479\nNow, why would I choose that?\n\n174\n00:08:32.479 --> 00:08:34.095\nI like the company, and\nI'm happy with them,\n\n175\n00:08:34.095 --> 00:08:36.110\nwhy wouldn't I want to use\nthem as my DNS server?\n\n176\n00:08:36.110 --> 00:08:38.480\nWell, there's some things\nthey don't support.\n\n177\n00:08:38.480 --> 00:08:42.404\nSo for example, if I wanna do subdomains,\nI've got ITProTVdemo.com.\n\n178\n00:08:42.404 --> 00:08:47.230\nI want to create lab.ITProTVDemo.com,\nand I wanna put stuff inside of the lab.\n\n179\n00:08:47.230 --> 00:08:50.790\nWell, I can't do that,\nthey don't let you create subdomains.\n\n180\n00:08:50.790 --> 00:08:53.570\nYou can create individual\nrecords that are in a subdomain.\n\n181\n00:08:53.570 --> 00:08:56.200\nBut I can't actually\ncreate a subdomain folder.\n\n182\n00:08:56.200 --> 00:08:58.590\nWhich means I can't redirect\na subdomain anywhere.\n\n183\n00:08:58.590 --> 00:08:59.937\nI can only redirect host names.\n\n184\n00:08:59.937 --> 00:09:02.040\nSo that's a limitation.\n\n185\n00:09:02.040 --> 00:09:05.720\nI'm getting it as part of their service,\nkind of just as an add on benefit so\n\n186\n00:09:05.720 --> 00:09:07.230\nI can't complain.\n\n187\n00:09:07.230 --> 00:09:09.370\nBut it's not as robust\nas what I might want.\n\n188\n00:09:09.370 --> 00:09:12.270\nOr maybe I want to use this for\nan active directory and\n\n189\n00:09:12.270 --> 00:09:16.610\nI want to have dynamic DNS registration\nwhere my clients register themselves.\n\n190\n00:09:16.610 --> 00:09:19.130\nHover doesn't support that, right,\ncuz it would be a security concern for\n\n191\n00:09:19.130 --> 00:09:20.090\nthem out on the Internet.\n\n192\n00:09:20.090 --> 00:09:22.300\nSo if I want it I need to\nbring it to my own servers.\n\n193\n00:09:22.300 --> 00:09:25.040\nSo I need to point to\na different set of servers.\n\n194\n00:09:25.040 --> 00:09:32.070\nNow step one, I need to create\nITPro.TVdemo.com, on my own servers.\n\n195\n00:09:32.070 --> 00:09:33.710\nBecause I've got it open,\nI'll use route 53,\n\n196\n00:09:33.710 --> 00:09:36.050\nwe'll see how to do other\nservers in other episodes.\n\n197\n00:09:36.050 --> 00:09:39.700\nSo I'm gonna come in here and\ncreate a hosted zone, and\n\n198\n00:09:39.700 --> 00:09:44.490\nwhen I created a hosted zone last time,\nI bought it, I had to buy itprotvdemo.net.\n\n199\n00:09:44.490 --> 00:09:46.050\nBut this time I already own it, right?\n\n200\n00:09:46.050 --> 00:09:49.690\nSo I'm gonna say I'm\ncreating itprotvdemo.com and\n\n201\n00:09:49.690 --> 00:09:53.380\nit's gonna be a publicly hosted zone and\nI'll go ahead and create that.\n\n202\n00:09:54.380 --> 00:09:59.140\nAnd I didn't have to buy it\nbecause I already own it.\n\n203\n00:09:59.140 --> 00:10:00.634\nAnd so it's gonna create it and\nlook what it did.\n\n204\n00:10:00.634 --> 00:10:05.673\nSee how it's set, itprotvdemo.com and\ngave it some Amazon name servers to use.\n\n205\n00:10:05.673 --> 00:10:08.380\nThe set the start of authority right here.\n\n206\n00:10:08.380 --> 00:10:10.150\nBut where's all my other records?\n\n207\n00:10:11.250 --> 00:10:13.060\nIt doesn't know about those, right.\n\n208\n00:10:13.060 --> 00:10:15.290\nAnd neither does the entire Internet.\n\n209\n00:10:15.290 --> 00:10:19.130\nIf anybody on the Internet goes\nto look up itprotvdemo.com,\n\n210\n00:10:19.130 --> 00:10:21.570\nthey go to the root hand servers.\n\n211\n00:10:21.570 --> 00:10:24.919\nThe root hand servers, and that's all\nmanaged by ICAN, and they say all right,\n\n212\n00:10:24.919 --> 00:10:26.061\nwho's in charge of .com?\n\n213\n00:10:26.061 --> 00:10:27.750\nAll right, and they follow them along.\n\n214\n00:10:27.750 --> 00:10:30.412\nAll right,\nwho's in charge of itprotvdemo.com?\n\n215\n00:10:30.412 --> 00:10:31.490\nHover.\n\n216\n00:10:31.490 --> 00:10:33.050\nAnd they go to hover and\n\n217\n00:10:33.050 --> 00:10:36.800\nthey ask hover, hey,\nwho are the name servers for itprotv.com?\n\n218\n00:10:36.800 --> 00:10:39.840\nAnd hover says, that's us.\n\n219\n00:10:39.840 --> 00:10:44.211\nAnd so it looks right here at the list and\nsays, it's ns1.hover.com and\n\n220\n00:10:44.211 --> 00:10:45.440\nns2.hover.com.\n\n221\n00:10:45.440 --> 00:10:46.740\nThat's who's responsible.\n\n222\n00:10:46.740 --> 00:10:49.080\nSo it does the look up right here and\n\n223\n00:10:49.080 --> 00:10:52.940\nit returns all of my DNS\nparameters right here.\n\n224\n00:10:52.940 --> 00:10:54.560\nLike no big deal, okay?\n\n225\n00:10:55.940 --> 00:10:59.050\nThe thing is I wanna\nmove this over to Amazon.\n\n226\n00:10:59.050 --> 00:11:02.270\nSo I need to change those name\nserver records to point to Amazon.\n\n227\n00:11:02.270 --> 00:11:05.390\nBut if I do it now, what's gonna happen?\n\n228\n00:11:05.390 --> 00:11:08.640\nWell, people are gonna look to Amazon and\nAmazon doesn't have any of these details.\n\n229\n00:11:08.640 --> 00:11:09.960\nI'm gonna break my website.\n\n230\n00:11:09.960 --> 00:11:13.296\nAnd depending on caching, I could\nbreak my site and break my email and\n\n231\n00:11:13.296 --> 00:11:15.663\nbreak my other access for\ntwo days, 48 hours.\n\n232\n00:11:15.663 --> 00:11:18.850\nIt's a great way to change\ncareers if you need to.\n\n233\n00:11:18.850 --> 00:11:22.750\nBut most of us wanna keep our jobs,\nso we want it to be seamless.\n\n234\n00:11:22.750 --> 00:11:25.150\nWe want this transition to happen and\nnot impact anyone.\n\n235\n00:11:25.150 --> 00:11:29.420\nSo the secret sauce there is you create\nthe domain at the destination and\n\n236\n00:11:29.420 --> 00:11:31.960\nyou recreate all of your records.\n\n237\n00:11:31.960 --> 00:11:34.485\nNow, if I controlled this name server,\nI'll tell you what I'd do.\n\n238\n00:11:34.485 --> 00:11:38.270\nI'd go into it and get its config file and\njust rip the config file out.\n\n239\n00:11:38.270 --> 00:11:41.360\nAnd that way I can bulk-import it\non the other side and be done.\n\n240\n00:11:41.360 --> 00:11:42.990\nWith Hover, they don't let you do that.\n\n241\n00:11:42.990 --> 00:11:46.395\nBut you can call them on the phone and\nask them to do it for you and they will.\n\n242\n00:11:46.395 --> 00:11:49.140\nSay, hey, can you send me my zone file.\n\n243\n00:11:49.140 --> 00:11:51.200\nAnd they'll export the zone file and\nsend it to you as a text file.\n\n244\n00:11:51.200 --> 00:11:53.780\nSo you've got everything, and\nyou can import it right into Amazon.\n\n245\n00:11:53.780 --> 00:11:57.930\nBack inside of Amazon, they have an\noption, right here, to Import a Zone File.\n\n246\n00:11:57.930 --> 00:11:59.560\nSo if I had it, I could do it.\n\n247\n00:11:59.560 --> 00:12:04.330\nWell this episode is only going to be\nanother 20 minutes long, so I don't have\n\n248\n00:12:04.330 --> 00:12:07.630\ntime to call Hover right now and get them\nto export it and get them to email it.\n\n249\n00:12:07.630 --> 00:12:11.190\nSo just to save time, I'll recreate one or\ntwo of the entries by hand.\n\n250\n00:12:11.190 --> 00:12:13.120\nIf you only have one or\ntwo entries you can do that.\n\n251\n00:12:13.120 --> 00:12:16.248\nBut like WWW,\nI have down here with 1.1.1.1.\n\n252\n00:12:16.248 --> 00:12:17.687\nThat's not a good one, let's do mail.\n\n253\n00:12:17.687 --> 00:12:24.155\nSo mail one is this 54.173.253.81\nroles right off the tongue.\n\n254\n00:12:24.155 --> 00:12:25.959\nSo I am going to jump over to Amazon and\n\n255\n00:12:25.959 --> 00:12:28.067\nover here I am going to\ncreate a record set.\n\n256\n00:12:28.067 --> 00:12:32.850\nIt is going to be mail.ITPROTVdemo.com.\n\n257\n00:12:32.850 --> 00:12:35.905\nI am gonna paste in that\naddress that I had and\n\n258\n00:12:35.905 --> 00:12:39.550\nI'll hit that Create button down here,\nall right.\n\n259\n00:12:39.550 --> 00:12:43.091\nAnd then I'm gonna create another one,\nwe'll do mail2.\n\n260\n00:12:43.091 --> 00:12:46.900\nOr mail3, apparently,\nI can't type what I'm saying.\n\n261\n00:12:48.190 --> 00:12:51.520\nAnd, let me go double check\nwhat its IP address was, so\n\n262\n00:12:51.520 --> 00:12:52.530\nI can get that put in there.\n\n263\n00:12:53.910 --> 00:12:56.460\nAnd then maybe we'll do some mx records,\nand that'll be enough for\n\n264\n00:12:56.460 --> 00:12:57.790\nthe demonstration.\n\n265\n00:12:57.790 --> 00:13:02.000\nSo I'm gonna paste that one in and,\nor you know, actually let's do this.\n\n266\n00:13:02.000 --> 00:13:05.340\nI'm gonna use fake IPs, so\nI'll know if it actually switched over.\n\n267\n00:13:05.340 --> 00:13:06.478\nThat's kind of important, right?\n\n268\n00:13:06.478 --> 00:13:10.123\nSo I'm gonna put this one as 1.1.1.2,\nand I'll create that one.\n\n269\n00:13:10.123 --> 00:13:14.663\nI'm gonna change the other one to 1.1.1.1.\n\n270\n00:13:14.663 --> 00:13:17.925\nSo I'm gonna go ahead and save that\nrecord set and get those put in place.\n\n271\n00:13:17.925 --> 00:13:22.000\nAnd then we can go ahead and\ncreate the MX records also.\n\n272\n00:13:23.330 --> 00:13:28.779\nRight, which I'm gonna set\nto mail1.itprotvdemo.com and\n\n273\n00:13:28.779 --> 00:13:31.461\nmail2.itprotvdemo.com.\n\n274\n00:13:31.461 --> 00:13:34.538\nAll right, so I'm creating those\nrecords and getting them put in place.\n\n275\n00:13:34.538 --> 00:13:39.080\nAnd I get an error because\nI've got invalid characters.\n\n276\n00:13:39.080 --> 00:13:40.070\nShoot.\n\n277\n00:13:40.070 --> 00:13:44.060\nWhen you do MX records, if you watched my\nMX record episode, I should remember this.\n\n278\n00:13:44.060 --> 00:13:47.928\nYou need a priority, so\nI will make them 10 and 20.\n\n279\n00:13:47.928 --> 00:13:51.527\nAnd that should make it happy, I hope.\n\n280\n00:13:51.527 --> 00:13:53.989\n[LAUGH] And there we go, all right.\n\n281\n00:13:53.989 --> 00:13:59.361\nNow, how do I know when I'm ready\nto move over to this name server?\n\n282\n00:13:59.361 --> 00:14:03.610\nEasiest ways to test and the best\nutility for this is gonna be NS look up.\n\n283\n00:14:03.610 --> 00:14:08.000\nIf I go to a command prompt, so\nI'm on a Mac, I'll break open my terminal.\n\n284\n00:14:08.000 --> 00:14:09.761\nOn a Linux box you'd\ngo into a bash prompt.\n\n285\n00:14:09.761 --> 00:14:14.370\nOn a Windows machine just cmd,\nwhatever gets you to a command prompt.\n\n286\n00:14:14.370 --> 00:14:15.780\nAnd I'm gonna use NS lookup.\n\n287\n00:14:15.780 --> 00:14:22.139\nNow with NS lookup, if I do a lookup for\nmail one .ITprotvdemo.com.\n\n288\n00:14:22.139 --> 00:14:24.148\nAll right, what's it gonna do?\n\n289\n00:14:24.148 --> 00:14:28.210\nIt's gonna go to the root hint server,\nand it's gonna ask who controls .com?\n\n290\n00:14:28.210 --> 00:14:32.120\nIt's gonna go down to the controllers at\n.com and ask who controls ITProTV demo?\n\n291\n00:14:32.120 --> 00:14:34.119\nIt's gonna go to hover and ask for\n\n292\n00:14:34.119 --> 00:14:38.986\nmail one .ITProTVdemo.com, and it's\ngonna get its answer, and there it is.\n\n293\n00:14:38.986 --> 00:14:42.504\n54.173.253.81.\n\n294\n00:14:42.504 --> 00:14:43.885\nThat's the answer that I got.\n\n295\n00:14:43.885 --> 00:14:45.279\nAnd see how it's non-authoritative?\n\n296\n00:14:45.279 --> 00:14:49.281\nI had to bounce through several servers\nbefore I finally got there cuz I went to\n\n297\n00:14:49.281 --> 00:14:51.014\nGoogle to ask for that one right?\n\n298\n00:14:51.014 --> 00:14:54.021\nWell, you can override that server.\n\n299\n00:14:54.021 --> 00:14:58.792\nAnd if I override the server by putting\nin one of Amazon's servers I'll\n\n300\n00:14:58.792 --> 00:15:01.700\nget a different response all right.\n\n301\n00:15:01.700 --> 00:15:05.810\nSo we do that just by throwing\nthat server name at the end.\n\n302\n00:15:05.810 --> 00:15:08.910\nSo I'm saying I want to look\nup mail1.itprovdemo.com but\n\n303\n00:15:08.910 --> 00:15:13.050\nI want to look it up against\nAmazon's server instead.\n\n304\n00:15:13.050 --> 00:15:18.407\nAnd when I run that it asks Amazon and\nAmazon tells me 1.1.1.1.\n\n305\n00:15:18.407 --> 00:15:19.579\nThat's what I wanted to see right.\n\n306\n00:15:19.579 --> 00:15:22.790\nSo I know Amazon has got my data and\nthat it's active.\n\n307\n00:15:22.790 --> 00:15:24.470\nI know Hover's got my data and\nthat's it active.\n\n308\n00:15:24.470 --> 00:15:30.050\nThey're both active right now but\nthe world is looking to Hover.\n\n309\n00:15:30.050 --> 00:15:31.930\nThey don't know to look to Amazon.\n\n310\n00:15:31.930 --> 00:15:35.960\nSo as soon as I get those records in\nplace and I get the two identical, now\n\n311\n00:15:37.200 --> 00:15:43.720\nI can take these name servers here, like\nthis first one, I can go over to Hover.\n\n312\n00:15:43.720 --> 00:15:46.480\nAnd I can edit the NS record.\n\n313\n00:15:46.480 --> 00:15:49.380\nI'm not migrating this\nover to a new registrar.\n\n314\n00:15:49.380 --> 00:15:51.446\nI don't mind leaving it at Hover,\nI like Hover.\n\n315\n00:15:51.446 --> 00:15:53.284\nI just wanna use different DNS servers.\n\n316\n00:15:53.284 --> 00:15:56.164\nSo I'm gonna edit these two name servers,\n\n317\n00:15:56.164 --> 00:16:00.089\nand when I edit that,\nI can come in and I can replace these.\n\n318\n00:16:00.089 --> 00:16:03.421\nAnd I'm just gonna copy and\npaste those Amazon ones and\n\n319\n00:16:03.421 --> 00:16:06.300\nbring those over like that, all right?\n\n320\n00:16:06.300 --> 00:16:07.630\nAnd so, I'm punching these in.\n\n321\n00:16:07.630 --> 00:16:09.633\nNow, I'm using Amazon's,\nthese could be your own.\n\n322\n00:16:09.633 --> 00:16:12.363\nYou could have your own DNS servers\nin your company that have public IP\n\n323\n00:16:12.363 --> 00:16:12.890\naddresses.\n\n324\n00:16:12.890 --> 00:16:14.775\nSo you could be putting those in.\n\n325\n00:16:14.775 --> 00:16:16.507\nIn this case, I'm using Amazon's, and\n\n326\n00:16:16.507 --> 00:16:20.660\nthey're giving me four which I'm gonna\nhave a little bit of if I'm gonna run out.\n\n327\n00:16:20.660 --> 00:16:24.485\nSo I need to add one more.\n\n328\n00:16:24.485 --> 00:16:26.140\nI don't have to do all four.\n\n329\n00:16:26.140 --> 00:16:28.520\nFour might actually be even\na little bit of overkill for me.\n\n330\n00:16:28.520 --> 00:16:30.780\nBut I'm gonna do it because, why not?\n\n331\n00:16:30.780 --> 00:16:32.350\nYou pay for it,\nyou might as well use it, right?\n\n332\n00:16:33.530 --> 00:16:34.670\nThat's what I always say.\n\n333\n00:16:36.450 --> 00:16:37.968\nI don't always say that, sometimes.\n\n334\n00:16:37.968 --> 00:16:41.470\nSo [LAUGH] all right, so\nlet me get that one added in, there we go.\n\n335\n00:16:41.470 --> 00:16:44.860\nSo now, what happens when\nsomebody looks up my domain?\n\n336\n00:16:44.860 --> 00:16:48.770\nThey go up to .com, to the root hand\nservers, they say hey where's .com.\n\n337\n00:16:48.770 --> 00:16:52.352\nThen they go down to,\nhey where's ITProTVdemo.com?\n\n338\n00:16:52.352 --> 00:16:56.170\nAnd then they go down to hover, and\nhover says, yeah, we know ITProTVdemo.com,\n\n339\n00:16:56.170 --> 00:16:58.540\nhere's the name servers you need to go to.\n\n340\n00:16:58.540 --> 00:17:02.990\nAnd instead of referring to their own name\nservers they now send it over to Amazon.\n\n341\n00:17:02.990 --> 00:17:06.156\nAnd my look up will jump over to\nAmazon and I'll get my answer there.\n\n342\n00:17:06.156 --> 00:17:10.191\nNow, the problem I'm gonna have,\nanother limitation of hover,\n\n343\n00:17:10.191 --> 00:17:13.365\nis that they don't let me\nsee the time to lives.\n\n344\n00:17:13.365 --> 00:17:15.035\nI can't edit the time to lives.\n\n345\n00:17:15.035 --> 00:17:19.188\nAnd these records may have time to lives.\n\n346\n00:17:19.188 --> 00:17:19.820\nIt could be huge.\n\n347\n00:17:19.820 --> 00:17:21.355\nIt could be days, right?\n\n348\n00:17:21.355 --> 00:17:23.687\nI believe their default\nis 15 minutes though.\n\n349\n00:17:23.687 --> 00:17:26.627\nSo it could take 15 minutes for\nthe old record to clear out and\n\n350\n00:17:26.627 --> 00:17:27.987\nthe new record to come in.\n\n351\n00:17:27.987 --> 00:17:31.748\nOn top of that,\nthe NS records have a time to live.\n\n352\n00:17:31.748 --> 00:17:35.406\nAnd I actually have no idea what\nthe time to live is on these things, and\n\n353\n00:17:35.406 --> 00:17:36.887\nit doesn't tell me.\n\n354\n00:17:36.887 --> 00:17:41.707\nSo it could take two or three days for\nthis to push out across the world and\n\n355\n00:17:41.707 --> 00:17:43.097\neverybody sees the change.\n\n356\n00:17:43.097 --> 00:17:46.717\nAnd so in the meantime,\nI have to wait and watch.\n\n357\n00:17:46.717 --> 00:17:51.080\nNow let me tell you how I normally\ndo this to wait and watch and see.\n\n358\n00:17:51.080 --> 00:17:54.500\nI usually create a record on the old\nserver, and then do a look up\n\n359\n00:17:54.500 --> 00:17:58.360\nto make sure it's there, and then create\nthat same record on a new server,\n\n360\n00:17:58.360 --> 00:18:01.120\nso a dummy record,\nnot one you actually use.\n\n361\n00:18:01.120 --> 00:18:02.672\nAnd on the new server\nI put a different IP.\n\n362\n00:18:02.672 --> 00:18:04.731\nIt's effectively what I'm\ndoing with mail one here, but\n\n363\n00:18:04.731 --> 00:18:07.750\nin real life you wouldn't want to\nexperiment with your mail server right?\n\n364\n00:18:07.750 --> 00:18:11.160\nSo you can create a dummy record and\nthen you can just run the query ever so\n\n365\n00:18:11.160 --> 00:18:14.020\noften, but run the query\nagainst more than one server.\n\n366\n00:18:14.020 --> 00:18:21.150\nSo for example, if I do an NS lookup for\nmail1.itprotvdemo.com and\n\n367\n00:18:21.150 --> 00:18:30.260\nI run it against ns1.hover.com I'm gonna\nsee what they have, 54.173.253.81 right?\n\n368\n00:18:30.260 --> 00:18:35.340\nIf I run it against Amazon\nns-95.awsdns-11.com I'm\n\n369\n00:18:35.340 --> 00:18:40.630\ngonna see what they have, right?\n\n370\n00:18:40.630 --> 00:18:46.410\nThe two different things but neither\none of them is giving me a fair answer.\n\n371\n00:18:46.410 --> 00:18:50.993\nI really need to look up against\nother people like Google, right, so\n\n372\n00:18:50.993 --> 00:18:53.376\nI could throw in a 8.8.8.8.\n\n373\n00:18:53.376 --> 00:18:55.170\nWhat does Google see?\n\n374\n00:18:55.170 --> 00:18:59.760\nAnd Google is still seeing\nthe hover.com entry.\n\n375\n00:18:59.760 --> 00:19:03.800\nIt's cached, it's in their cache and I\ngotta wait for the time to live to expire.\n\n376\n00:19:03.800 --> 00:19:07.409\nIf I looked to, how about,\nLevel 3 Communications, 4.2.2.1.\n\n377\n00:19:07.409 --> 00:19:08.550\nI'll look and see what they've got.\n\n378\n00:19:08.550 --> 00:19:10.460\nThey've all ready got the new one.\n\n379\n00:19:10.460 --> 00:19:13.140\nRight, they didn't have it\ncached more than likely so\n\n380\n00:19:13.140 --> 00:19:15.570\nthey did the look up right now and\nthey saw the new record.\n\n381\n00:19:15.570 --> 00:19:19.404\nSo depending on who I do the lookup\nagainst I might get a cache and\n\n382\n00:19:19.404 --> 00:19:22.340\nit might even be different\ninside of a company.\n\n383\n00:19:22.340 --> 00:19:26.120\nLook at that, on Google's\nprimary server I got the old IP,\n\n384\n00:19:26.120 --> 00:19:31.220\non Google's secondary server I got\nthe new IP, all within the same company.\n\n385\n00:19:31.220 --> 00:19:32.650\nThat's where you need to wait.\n\n386\n00:19:32.650 --> 00:19:37.176\nIf I were to go and delete everything out\nof hover right now some people might go\n\n387\n00:19:37.176 --> 00:19:38.652\nand get a host not found.\n\n388\n00:19:38.652 --> 00:19:40.070\nNow they can't get to the website.\n\n389\n00:19:40.070 --> 00:19:41.460\nOr email doesn't come in and\n\n390\n00:19:41.460 --> 00:19:44.850\nwe start losing data and\nthe employees get mad at you, but it's not\n\n391\n00:19:44.850 --> 00:19:47.600\nreally costing me any money to keep them\nboth running side-by-side right now.\n\n392\n00:19:47.600 --> 00:19:49.990\nI don't wanna do that long term cuz every\ntime I add a record I'd have to go and\n\n393\n00:19:49.990 --> 00:19:51.050\nadd it to both of them.\n\n394\n00:19:51.050 --> 00:19:53.660\nSo I just wanna wait,\nwait two or three days so\n\n395\n00:19:53.660 --> 00:19:56.610\nthat you know that\neverybody's cache expires.\n\n396\n00:19:56.610 --> 00:20:01.190\nAnd once that's known that everybody you\ngo to is always giving you the latest and\n\n397\n00:20:01.190 --> 00:20:04.170\ngreatest, and it's all pointed over\nto new servers, then you can go and\n\n398\n00:20:04.170 --> 00:20:05.170\ndelete the old stuff.\n\n399\n00:20:05.170 --> 00:20:07.110\nAnd I do recommend you\ndelete the old stuff,\n\n400\n00:20:07.110 --> 00:20:10.500\ncuz inevitably what happens is you forget.\n\n401\n00:20:10.500 --> 00:20:12.830\nAnd then somebody else comes along and\nhas to create a record.\n\n402\n00:20:12.830 --> 00:20:14.223\nAnd they say, okay,\nwhere's this registered?\n\n403\n00:20:14.223 --> 00:20:16.606\nAnd lemme do a look up and\nit's registered at Hover.\n\n404\n00:20:16.606 --> 00:20:18.620\nAnd they go and log in at Hover and\nwhat do they see?\n\n405\n00:20:18.620 --> 00:20:20.338\nThey see all the DNS hosts.\n\n406\n00:20:20.338 --> 00:20:22.680\nAnd so they start adding records and\nit doesn't work.\n\n407\n00:20:22.680 --> 00:20:23.983\nLike, why isn't this working?\n\n408\n00:20:23.983 --> 00:20:26.256\nAnd they don't know to go look at Amazon.\n\n409\n00:20:26.256 --> 00:20:29.432\nBut if you delete everything out of there,\nthey'll look at it and they'll say,\n\n410\n00:20:29.432 --> 00:20:30.940\nwait a minute, there's no records.\n\n411\n00:20:30.940 --> 00:20:32.090\nHow is that possible?\n\n412\n00:20:32.090 --> 00:20:33.740\nIt must be hosted somewhere else, right?\n\n413\n00:20:33.740 --> 00:20:36.130\nSo I always do recommend you\ndelete the old stuff out.\n\n414\n00:20:36.130 --> 00:20:37.590\nNormally I would wait.\n\n415\n00:20:38.930 --> 00:20:40.630\nThere It updated, right?\n\n416\n00:20:40.630 --> 00:20:43.935\nSo just a moment ago, you guys saw where\nI did the look up and it was the old IP.\n\n417\n00:20:43.935 --> 00:20:47.710\nNow I did the look up, same exact look up,\nsame exact server, and I got the new IP.\n\n418\n00:20:47.710 --> 00:20:49.840\nThe time to live expired,\nI got lucky on this one.\n\n419\n00:20:49.840 --> 00:20:55.013\nSo now that I know that, over here on\nHover I can go under DNS and I can take\n\n420\n00:20:55.013 --> 00:21:00.375\nall these records that are created\nin here, I'm just gonna delete them.\n\n421\n00:21:00.375 --> 00:21:01.620\nI'm gonna delete them all.\n\n422\n00:21:01.620 --> 00:21:05.440\nReally you just need an NS record and\nan SOA and\n\n423\n00:21:05.440 --> 00:21:07.910\nHover won't let me delete those,\nthey don't even show up here.\n\n424\n00:21:07.910 --> 00:21:08.790\nSo, I am just going to go through and\n\n425\n00:21:08.790 --> 00:21:12.900\ndelete these you can even reset\nthem to default if you want.\n\n426\n00:21:12.900 --> 00:21:16.413\nAnd that's another great way to just\nkinda purge this and reset them.\n\n427\n00:21:16.413 --> 00:21:19.320\nAnd so now they all start to go away, but\nthen it kinda put some dummy records in.\n\n428\n00:21:19.320 --> 00:21:21.820\nSo, you might want to get rid of those too\nI'm just going to toast all of this stuff.\n\n429\n00:21:22.910 --> 00:21:25.825\nAnd that way if anybody\ncomes along behind me,\n\n430\n00:21:25.825 --> 00:21:28.978\nthey're going to come in here and\nsee no records.\n\n431\n00:21:28.978 --> 00:21:30.670\nThat doesn't make any sense.\n\n432\n00:21:30.670 --> 00:21:31.660\nThere's no records.\n\n433\n00:21:31.660 --> 00:21:36.280\nAnd then if you go to the domain details,\nthey'll notice, I see.\n\n434\n00:21:36.280 --> 00:21:38.120\nIt's all pointing to Amazon, right?\n\n435\n00:21:38.120 --> 00:21:39.240\nSo that's where I need to go.\n\n436\n00:21:39.240 --> 00:21:43.175\nAnd if they go over to Amazon and log in,\nassuming they have access, they come into\n\n437\n00:21:43.175 --> 00:21:47.780\nITProTVdemo.com, and there's all\nthe records laid out right there, okay?\n\n438\n00:21:47.780 --> 00:21:52.310\nSo in this scenario,\nI'm still hosted by hover.com.\n\n439\n00:21:52.310 --> 00:21:55.830\nThat's where I registered, that's where\nI'm going to pay to renew every year.\n\n440\n00:21:55.830 --> 00:21:59.302\nIf I have problems with my domain I might\ncall them up, but usually you don't have\n\n441\n00:21:59.302 --> 00:22:03.160\nproblems with a registration beyond\nmaybe needing to transfer it out.\n\n442\n00:22:03.160 --> 00:22:07.220\nBut I support it on my own DNS servers or\n\n443\n00:22:07.220 --> 00:22:11.340\nin this case route 53 in Amazon and\nnow I can start to create sub domains.\n\n444\n00:22:11.340 --> 00:22:13.470\nIf I want a sub domain I can create one.\n\n445\n00:22:13.470 --> 00:22:16.690\nBecause Route 53 supports it,\nHover didn't, right?\n\n446\n00:22:16.690 --> 00:22:19.180\nSo now I get that functionality and\nI can go that way.\n\n447\n00:22:19.180 --> 00:22:20.520\nBut I didn't have to transfer it out.\n\n448\n00:22:20.520 --> 00:22:22.650\nDoesn't mean that we never\nwanna transfer it out.\n\n449\n00:22:22.650 --> 00:22:25.180\nThere are some scenarios\nwhere we might want to.\n\n450\n00:22:25.180 --> 00:22:27.390\nMaybe I just like having\neverything in one place.\n\n451\n00:22:27.390 --> 00:22:31.160\nI don't like the idea of having to go and\npay a bill over at Hover and now I gotta\n\n452\n00:22:31.160 --> 00:22:34.220\ncome and pay a bill over here at Amazon,\nlet's just roll it all into one thing.\n\n453\n00:22:34.220 --> 00:22:35.620\nIt's one less bill on the table, right?\n\n454\n00:22:35.620 --> 00:22:38.500\nIt's not a lot of money, so\nlet's just make it easier.\n\n455\n00:22:38.500 --> 00:22:42.460\nIn that case, I might wanna transfer my\ndomain from one registrar to another.\n\n456\n00:22:42.460 --> 00:22:44.550\nBut if I just wanna use\ndifferent DNS servers,\n\n457\n00:22:44.550 --> 00:22:46.170\nit's as easy as changing those NS records.\n\n458\n00:22:46.170 --> 00:22:50.271\nAnd it's all knocked down,\nso pretty straightforward.\n\n459\n00:22:50.271 --> 00:22:52.919\nI'm trying to think if I\nleft anything out on this.\n\n460\n00:22:52.919 --> 00:22:56.800\nDo you remember that manually creating\nthe records is kind of a pain?\n\n461\n00:22:56.800 --> 00:23:00.610\nSo it is faster to just call in and\nask for a copy of your zone files.\n\n462\n00:23:00.610 --> 00:23:01.671\nThey'll email it right to you.\n\n463\n00:23:01.671 --> 00:23:05.549\nYour zone files, there's no sensitive\ndata in them and it's public information\n\n464\n00:23:05.549 --> 00:23:08.990\nbecause it's a stinking zone file\nanybody can look up against it right.\n\n465\n00:23:08.990 --> 00:23:12.950\nSo it's public info they'll give\nit to you they'll email it to you.\n\n466\n00:23:12.950 --> 00:23:15.800\nThey don't have to encrypt it or\nanything cuz again it's public info.\n\n467\n00:23:15.800 --> 00:23:17.670\nSo they just email it\nto you as a text file.\n\n468\n00:23:17.670 --> 00:23:21.180\nIt's in a standard format,\nwe'll see it when we do the bind episodes.\n\n469\n00:23:21.180 --> 00:23:24.360\nAnd you can just go to your other\nprovider and import it right in.\n\n470\n00:23:24.360 --> 00:23:28.980\nDoesn't matter if it's Unix bind, if\nit's unbound, if it's Amazon's route 53,\n\n471\n00:23:28.980 --> 00:23:32.750\nif it's Microsoft's DNS, they can all\nimport the standard text files, and\n\n472\n00:23:32.750 --> 00:23:34.310\nthey can all export\nthe standard text files.\n\n473\n00:23:34.310 --> 00:23:36.890\nSo that makes it easy to\nmove all your records.\n\n474\n00:23:36.890 --> 00:23:39.340\nThe hard part is moving\nthe actual registration.\n\n475\n00:23:39.340 --> 00:23:41.070\nAnd so\nwe're gonna do a separate episode on that,\n\n476\n00:23:41.070 --> 00:23:44.660\nactually transferring a domain\nfrom one registrar to another.\n\n477\n00:23:44.660 --> 00:23:48.758\nAnd that's what we would do normally if\nwe bought a domain from somebody else, or\n\n478\n00:23:48.758 --> 00:23:50.642\nif we were just changing ownership.\n\n479\n00:23:50.642 --> 00:23:53.750\nMaybe I registered a domain, but\nI want the company to own it, so\n\n480\n00:23:53.750 --> 00:23:55.890\nI'm gonna transfer it over to the company.\n\n481\n00:23:55.890 --> 00:23:58.707\nThat kind of stuff is where we end up\nusually moving things around between\n\n482\n00:23:58.707 --> 00:23:59.270\nregistrars.\n\n483\n00:23:59.270 --> 00:24:01.183\nIt's a little bit of an involved process,\nthough, so\n\n484\n00:24:01.183 --> 00:24:02.770\nwe'll do that in a separate episode.\n\n485\n00:24:02.770 --> 00:24:05.520\n&gt;&gt; I definitely call you on that one, cuz\nyou didn't bring the whole Internet down.\n\n486\n00:24:05.520 --> 00:24:06.621\nSo he said that we're gonna break it.\n\n487\n00:24:06.621 --> 00:24:07.738\n&gt;&gt; [LAUGH]\n&gt;&gt; And he didn't,\n\n488\n00:24:07.738 --> 00:24:08.918\nso we're gonna hold him to that.\n\n489\n00:24:08.918 --> 00:24:11.530\nBut joking aside, Don, great episode here.\n\n490\n00:24:11.530 --> 00:24:14.280\nDoes look like we're coming to\nthe end of another great episode.\n\n491\n00:24:14.280 --> 00:24:16.958\nBut before we do, do you have any parting\nwords on changing name servers and\n\n492\n00:24:16.958 --> 00:24:18.162\nmaybe the complexity behind it?\n\n493\n00:24:18.162 --> 00:24:20.760\n&gt;&gt; Yeah.\nWell, I mean, the break it part, right?\n\n494\n00:24:20.760 --> 00:24:26.010\nIf I had changed the NS records\nprior to populating all those fields\n\n495\n00:24:26.010 --> 00:24:27.360\nI would've broke it.\n\n496\n00:24:27.360 --> 00:24:29.150\nSo you gotta make sure you do that.\n\n497\n00:24:29.150 --> 00:24:32.437\nAnd then if I had deleted the old\nrecords prior to waiting for\n\n498\n00:24:32.437 --> 00:24:35.477\neverybody's caches to purge,\nI would've broke it.\n\n499\n00:24:35.477 --> 00:24:38.020\nSo there's multiple\nopportunities to break it.\n\n500\n00:24:38.020 --> 00:24:39.170\nAnd it's nothing you couldn't fix.\n\n501\n00:24:39.170 --> 00:24:41.190\nIt's easy enough to go back.\n\n502\n00:24:41.190 --> 00:24:43.580\nBut the problem is that time to live.\n\n503\n00:24:43.580 --> 00:24:48.087\nAnd so you could break it and it would be\nbroken for two days and that would suck.\n\n504\n00:24:48.087 --> 00:24:52.360\nMost companies can't stand for\na two day outage like that.\n\n505\n00:24:52.360 --> 00:24:53.646\nSo you don't want that to happen.\n\n506\n00:24:53.646 --> 00:24:55.319\nYou definitely don't want\nit to be your fault, right?\n\n507\n00:24:55.319 --> 00:24:57.051\nIf it happens that's a different story,\nbut\n\n508\n00:24:57.051 --> 00:24:59.330\nif it's your fault that's\na whole new ball field.\n\n509\n00:24:59.330 --> 00:25:02.370\nSo you don't want that to happen,\nbut there are opportunities,\n\n510\n00:25:02.370 --> 00:25:05.590\neasy to avoid if you just take your time,\nfollow the procedure in order.\n\n511\n00:25:05.590 --> 00:25:09.490\n&gt;&gt; Standard operating procedure, Don, we\nappreciate you being in the studios here\n\n512\n00:25:09.490 --> 00:25:11.730\nwith us, and\nwe appreciate you the viewer watching.\n\n513\n00:25:11.730 --> 00:25:14.868\nSigning out for ITPro.TV,\nI've been your host Wes Bryan.\n\n514\n00:25:14.868 --> 00:25:15.612\n&gt;&gt; And I'm Don Pezet.\n\n515\n00:25:15.612 --> 00:25:16.687\n&gt;&gt; And we'll see you next time.\n\n516\n00:25:18.955 --> 00:25:24.624\n[MUSIC]\n\n517\n00:25:24.624 --> 00:25:27.490\n&gt;&gt; Thank you for watching ITPro.TV.\n\n",
          "vimeoId": "195964485"
        },
        {
          "description": "In this episode, Wes and Don demonstrate the process of transferring domains between registrars. They explain the security requirements such as “Transfer Locks” and the extensible provisioning protocol or EPP commonly called an authentication code. They also look at the standards bodies that oversee domain like the Internet Assigned Numbers Authority (IANA) and the Internet Corporation for Assigned Names and Numbers (ICANN)",
          "length": "1823",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-4-3-transferring_a_domain-120516-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-4-3-transferring_a_domain-120516-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-4-3-transferring_a_domain-120516-1-sm.jpg",
          "title": "Transferring a Domain",
          "transcript": "WEBVTT\n\n1\n00:00:00.008 --> 00:00:08.404\nWelcome to ITPRO.TV I am\nyour host [CROSSTALK].\n\n2\n00:00:08.404 --> 00:00:12.102\n&gt;&gt; You're watching ITPRO.TV.\n\n3\n00:00:12.102 --> 00:00:14.996\n&gt;&gt; Welcome to another exciting\nepisode here at ITPRO.TV.\n\n4\n00:00:14.996 --> 00:00:16.414\nI am you host Wes Bryan.\n\n5\n00:00:16.414 --> 00:00:19.950\nAnd in today's episode,\nwe're continuing through our track on DNS.\n\n6\n00:00:19.950 --> 00:00:23.298\nThat's right, a very important service\nthat we need to find just about anything\n\n7\n00:00:23.298 --> 00:00:24.441\non the Internet out there.\n\n8\n00:00:24.441 --> 00:00:27.612\nAnd joining us back in the studios for\nthis topic is none other than Mr.\n\n9\n00:00:27.612 --> 00:00:28.161\nDon Pezet.\n\n10\n00:00:28.161 --> 00:00:28.971\nDon, how are you doing, sir?\n\n11\n00:00:28.971 --> 00:00:31.520\n&gt;&gt; I'm doing just swell,\nWes, ready to dive right in.\n\n12\n00:00:31.520 --> 00:00:35.843\nIn this episode, we're going to take a\nlook at how to transfer a domain from one\n\n13\n00:00:35.843 --> 00:00:37.428\nregistrar over to another.\n\n14\n00:00:37.428 --> 00:00:41.357\nSo if you've been watching this series,\nI have a domain,\n\n15\n00:00:41.357 --> 00:00:44.840\nitprotvdemo.com, that\nI bought on hover.com.\n\n16\n00:00:44.840 --> 00:00:49.869\nAnd now, I've got itprotvdemo.net that I\nbought on Route 53 with Amazon, right?\n\n17\n00:00:49.869 --> 00:00:51.455\nWell, that's fine.\n\n18\n00:00:51.455 --> 00:00:52.110\nI can leave it that way.\n\n19\n00:00:52.110 --> 00:00:54.307\nBoth services are perfectly good.\n\n20\n00:00:54.307 --> 00:00:56.800\nI know there's some\nlimitations to Hover's DNS.\n\n21\n00:00:56.800 --> 00:01:01.153\nSo in, in another episode, we move the DNS\nservers from Hover over to Route 53.\n\n22\n00:01:01.153 --> 00:01:05.580\nSo both of my zones are actually\nbeing controlled by Route 53.\n\n23\n00:01:05.580 --> 00:01:10.337\nBut the actual registration for\nitprotv.com is still sitting over on\n\n24\n00:01:10.337 --> 00:01:14.215\nHover, and maybe I want that,\nmaybe I don't want that.\n\n25\n00:01:14.215 --> 00:01:17.493\nMaybe I want to transfer\nfrom Hover over to Amazon or\n\n26\n00:01:17.493 --> 00:01:20.580\nthe other way around from\nAmazon over to Hover.\n\n27\n00:01:20.580 --> 00:01:23.941\nBy doing a transfer like that,\nI can set it so,\n\n28\n00:01:23.941 --> 00:01:27.749\nthat my zones are all managed\nby the same registrar.\n\n29\n00:01:27.749 --> 00:01:30.602\nAnd that's a pretty handy thing to have\neverybody kinda registered in one place.\n\n30\n00:01:30.602 --> 00:01:34.182\nIt makes it easier to tracking domains\nare expiring and to minimize and\n\n31\n00:01:34.182 --> 00:01:35.958\nsimplify billing.\n\n32\n00:01:35.958 --> 00:01:39.798\nAnother scenario where I might transfer\ndomain is where somebody already has\n\n33\n00:01:39.798 --> 00:01:40.750\nthe domain I want.\n\n34\n00:01:40.750 --> 00:01:43.987\nAnd so I make them an offer,\nan offer they can't refuse.\n\n35\n00:01:43.987 --> 00:01:46.630\nAnd you pay them some money, whatever\nit is and they sell you the domain.\n\n36\n00:01:46.630 --> 00:01:49.330\nNow they need to transfer\nthe domain from them to you, and so\n\n37\n00:01:49.330 --> 00:01:52.361\nthere's a process you have to go\nthrough to transfer that domain.\n\n38\n00:01:52.361 --> 00:01:57.538\nNow, there has been a huge upsurge\nin fraudulent domain transfers,\n\n39\n00:01:57.538 --> 00:02:00.940\nwhere people try and steal your domain.\n\n40\n00:02:00.940 --> 00:02:03.824\nAnd that can be really bad because\nit takes a long time to fix and\n\n41\n00:02:03.824 --> 00:02:07.711\nthe whole time you're waiting for it, your\nsite is now being redirected somewhere\n\n42\n00:02:07.711 --> 00:02:10.394\nthat you don't control and\nthat's really bad, right?\n\n43\n00:02:10.394 --> 00:02:12.300\nYou'll lose email,\nyou'll lose website access.\n\n44\n00:02:12.300 --> 00:02:13.777\nIt's not a good thing.\n\n45\n00:02:13.777 --> 00:02:18.325\nSo all of the DNS hosting providers\nout there have implemented security\n\n46\n00:02:18.325 --> 00:02:22.796\nprocedures to make sure that everything\nis nice and safe and stable and\n\n47\n00:02:22.796 --> 00:02:25.249\nkind of difficult to transfer it out.\n\n48\n00:02:25.249 --> 00:02:29.777\n[LAUGH] So it's not exactly an easy task\nto move a registration from one registrar\n\n49\n00:02:29.777 --> 00:02:32.220\nto another, but it certainly can be done.\n\n50\n00:02:32.220 --> 00:02:36.145\nBecause at the end of the day, all the\nregistrar does is reach out to Ican and\n\n51\n00:02:36.145 --> 00:02:38.156\nadd a little entry in their database.\n\n52\n00:02:38.156 --> 00:02:40.788\nAnd so when you transfer from\none registrar to another,\n\n53\n00:02:40.788 --> 00:02:44.330\nyou're just putting someone else\nin charge of your database entry.\n\n54\n00:02:44.330 --> 00:02:48.626\nYour database entry itself, stays in\nthere regardless who it's tied too,\n\n55\n00:02:48.626 --> 00:02:51.119\nregistrar wise and continues to function.\n\n56\n00:02:51.119 --> 00:02:52.890\nSo let's see how we want\nto transfer things.\n\n57\n00:02:52.890 --> 00:02:56.932\nSo for me, I've got a zone,\nwell, I've got two zones.\n\n58\n00:02:56.932 --> 00:03:02.247\nOne zone, itprotvdemo.net,\nI just bought on Amazon today,\n\n59\n00:03:02.247 --> 00:03:05.165\nso it's still in the hold period.\n\n60\n00:03:05.165 --> 00:03:06.586\nI can't transfer that one.\n\n61\n00:03:06.586 --> 00:03:10.950\nBut the itprotvdemo.com,\nI bought that on Hover months ago.\n\n62\n00:03:10.950 --> 00:03:13.876\nAnd so that one is full and\nclear and ready to transfer.\n\n63\n00:03:13.876 --> 00:03:16.130\nNow what do I mean by that\nwhen I say full and clear?\n\n64\n00:03:16.130 --> 00:03:19.794\nWell, almost every registrar\nhas a holding period.\n\n65\n00:03:19.794 --> 00:03:23.610\nWhen you buy a domain, they don't\nimmediately let you transfer it out.\n\n66\n00:03:23.610 --> 00:03:24.744\nAnd there’s a few reasons for that.\n\n67\n00:03:24.744 --> 00:03:29.521\nThe main reason is a lot of them offer\nyou discounts, so when you register your\n\n68\n00:03:29.521 --> 00:03:33.580\nfirst domain, you come in and\nit might give it you for five bucks.\n\n69\n00:03:34.750 --> 00:03:37.181\nBut year two, it's 12 or 15 bucks, right.\n\n70\n00:03:37.181 --> 00:03:38.900\nIt starts to go up and it costs more.\n\n71\n00:03:38.900 --> 00:03:42.300\nSo they don't want you to get their cheap\npromotion and then move away before you\n\n72\n00:03:42.300 --> 00:03:44.746\npay the full price and\nthey can actually make some money.\n\n73\n00:03:44.746 --> 00:03:45.790\nSo that's one reason.\n\n74\n00:03:45.790 --> 00:03:48.617\nBut the main reason is\nfraudulent transfers.\n\n75\n00:03:48.617 --> 00:03:53.237\nThat when you buy a domain,\nthere's usually a transfer lock put on it,\n\n76\n00:03:53.237 --> 00:03:57.705\nand that transfer lock can be\nanywhere from 10 days to 120 days.\n\n77\n00:03:57.705 --> 00:03:59.165\nIt's up to the registrar to set it,\n\n78\n00:03:59.165 --> 00:04:02.440\nalthough the standard seems to have\nsettled down to about 60 days.\n\n79\n00:04:02.440 --> 00:04:04.234\nSo most providers have a 60 day one.\n\n80\n00:04:04.234 --> 00:04:08.290\nI bought a domain on Amazon, and i can't\nreally mess with it for two months.\n\n81\n00:04:08.290 --> 00:04:10.778\nThis one I registered back in January.\n\n82\n00:04:10.778 --> 00:04:11.760\nWow, i said a few months ago.\n\n83\n00:04:11.760 --> 00:04:13.706\nThat's like almost a year ago now.\n\n84\n00:04:13.706 --> 00:04:17.330\nSo i registered this one a long time ago,\nand it's just sitting there.\n\n85\n00:04:17.330 --> 00:04:19.717\nIt does renew on January 4th.\n\n86\n00:04:19.717 --> 00:04:21.900\nNow, I need to think about that, okay.\n\n87\n00:04:21.900 --> 00:04:24.156\nRight now it is December 5th.\n\n88\n00:04:24.156 --> 00:04:28.033\nSo I'm one month out from renewal,\njust a hair under one month.\n\n89\n00:04:28.033 --> 00:04:31.620\nNow, when I renew,\nI normally buy a year or whatever.\n\n90\n00:04:31.620 --> 00:04:36.020\nWhen I transfer this,\nwhat happens there, right?\n\n91\n00:04:36.020 --> 00:04:36.869\nWhere do I renew?\n\n92\n00:04:36.869 --> 00:04:38.551\nWell usually when you transfer,\n\n93\n00:04:38.551 --> 00:04:41.800\nwhoever you're transferring\nto makes you buy a year.\n\n94\n00:04:41.800 --> 00:04:45.105\nSo I'm about to expire, January 4th, 2017.\n\n95\n00:04:45.105 --> 00:04:48.225\nBut when I transfer this to Amazon,\nI'll have the opportunity to buy,\n\n96\n00:04:48.225 --> 00:04:49.892\nI shouldn't call it an opportunity.\n\n97\n00:04:49.892 --> 00:04:51.742\nI will be forced to buy at least one year,\nbut\n\n98\n00:04:51.742 --> 00:04:54.390\nI'll have the opportunity to\nbuy more years if I want.\n\n99\n00:04:54.390 --> 00:04:56.269\nAnd I can extend out that registration.\n\n100\n00:04:56.269 --> 00:05:00.444\nSo it's kinda cool, cuz I'll transfer and\nrenew at the same time.\n\n101\n00:05:00.444 --> 00:05:05.480\nNow, if I already had more time,\nhere I've got less than 30 days.\n\n102\n00:05:05.480 --> 00:05:08.820\nBut let's say I had three years\nof registration time left.\n\n103\n00:05:08.820 --> 00:05:12.500\nWhen I move to the other provider, they'll\nstill make me buy at least one year, but\n\n104\n00:05:12.500 --> 00:05:14.410\nit'll add onto my current registration.\n\n105\n00:05:14.410 --> 00:05:17.399\nSo if I have three years to go now\nI would have four years, right?\n\n106\n00:05:17.399 --> 00:05:19.208\nSo you never lose time when you transfer.\n\n107\n00:05:19.208 --> 00:05:21.840\nYou can transfer whenever you\nwant as long you're not locked.\n\n108\n00:05:21.840 --> 00:05:24.058\nNow, my transfer lock here,\n\n109\n00:05:24.058 --> 00:05:29.134\nthere's a mandatory transfer lock and\nan optional transfer lock.\n\n110\n00:05:29.134 --> 00:05:30.436\nWe'll start with the mandatory one.\n\n111\n00:05:30.436 --> 00:05:32.670\nThe mandatory one's like that\n60 day window I talked about.\n\n112\n00:05:32.670 --> 00:05:36.616\nIf I just bought this, I might be\nlocked and I can't transfer out, okay?\n\n113\n00:05:36.616 --> 00:05:40.020\nAnd so if that happens,\nI'm not gonna have any control.\n\n114\n00:05:40.020 --> 00:05:44.701\nBut after 60 days, it becomes an optional\nlock, and I then gain control.\n\n115\n00:05:44.701 --> 00:05:47.119\nYou’ll notice way over here,\nthat we've got this,\n\n116\n00:05:47.119 --> 00:05:50.060\nlet me get this little\nsupport thing out of the way.\n\n117\n00:05:50.060 --> 00:05:53.216\nWay over here, I've got a little\ncheck mark that lines up with it, and\n\n118\n00:05:53.216 --> 00:05:54.728\nI can turn off the transfer lock.\n\n119\n00:05:54.728 --> 00:05:59.787\nIf I try and transfer right now, all\nright, I'm gonna jump over to Route 53,\n\n120\n00:05:59.787 --> 00:06:04.400\nand in the last episode,\nI created itprotv.com as a hosted zone.\n\n121\n00:06:04.400 --> 00:06:06.720\nI'm about to do the transfer so\nI need to delete that out of there.\n\n122\n00:06:06.720 --> 00:06:10.840\nIt's gonna get a little mad at me so\nI'm gonna delete that out.\n\n123\n00:06:10.840 --> 00:06:15.080\nAnd oops, it's not letting me delete\nit cuz it got stuff in there, right?\n\n124\n00:06:15.080 --> 00:06:17.770\nSo I need to get in there and\ndelete the records that are inside of it.\n\n125\n00:06:17.770 --> 00:06:21.070\nSo I'm gonna take some of these records\nthat I made like the MX record.\n\n126\n00:06:21.070 --> 00:06:22.630\nI need to get rid of it.\n\n127\n00:06:22.630 --> 00:06:27.426\nAnd i need to get rid of a few of\nthe other entries that are in here, so\n\n128\n00:06:27.426 --> 00:06:32.843\ni'm gonna delete that one and we'll\ndelete these guys and empty that out.\n\n129\n00:06:32.843 --> 00:06:34.730\nThere we go.\nSo it's just the name server and\n\n130\n00:06:34.730 --> 00:06:35.411\nSOA records.\n\n131\n00:06:35.411 --> 00:06:36.960\nYou have to have those.\n\n132\n00:06:36.960 --> 00:06:43.132\nAnd once that's done, I can come back\nhere and I can delete out that zone.\n\n133\n00:06:43.132 --> 00:06:46.030\nOkay, so now I just have itprotvdemo.net.\n\n134\n00:06:46.030 --> 00:06:50.229\nThat's the one zone that I actually\nbought, right here on Amazon.\n\n135\n00:06:50.229 --> 00:06:54.821\nThe other one I bought on Hover, and\nI want to transfer it over here, okay.\n\n136\n00:06:54.821 --> 00:06:58.293\nNow, to transfer it over here,\nthe first thing I need to do is,\n\n137\n00:06:58.293 --> 00:07:00.630\nwell, basically create the zone.\n\n138\n00:07:00.630 --> 00:07:04.584\nNow when you create a zone,\nif I do create a hosted zone,\n\n139\n00:07:04.584 --> 00:07:09.568\nit's asking me to create one and\nit's assuming that I already own it.\n\n140\n00:07:09.568 --> 00:07:11.550\nWhat if I don't own it, right,\nor what if I need to buy it?\n\n141\n00:07:11.550 --> 00:07:14.094\nOr what if's already hosted somewhere\nelse and I need to transfer it?\n\n142\n00:07:14.094 --> 00:07:15.720\nI don't get that option.\n\n143\n00:07:15.720 --> 00:07:19.703\nBut on the left side, if I scroll down a\nlittle bit I'll see registered domains and\n\n144\n00:07:19.703 --> 00:07:21.377\nif I click on registered domains,\n\n145\n00:07:21.377 --> 00:07:24.517\nI'll see experttv.net because\nI registered that right here.\n\n146\n00:07:24.517 --> 00:07:25.797\nIt shows that I registered it, and\n\n147\n00:07:25.797 --> 00:07:28.170\nit's good through December\n5th of next year, right?\n\n148\n00:07:28.170 --> 00:07:29.565\nIt's set to auto renew.\n\n149\n00:07:29.565 --> 00:07:32.862\nAnd the transfer lock,\nwell its got an X and you know,\n\n150\n00:07:32.862 --> 00:07:36.467\nI don't actually know if that\nmeans is it turned on or off.\n\n151\n00:07:36.467 --> 00:07:39.035\nI think it means it turned off so\nlet's take a look at that.\n\n152\n00:07:39.035 --> 00:07:42.481\nAnd I'm gonna look at the transfer lock\nand sure enough my transfer lock is\n\n153\n00:07:42.481 --> 00:07:45.889\ndisabled that means that I can transfer\nthis one right now if I wanted to.\n\n154\n00:07:45.889 --> 00:07:49.600\nIf I wanted to move this\nzone over to Hover, I could.\n\n155\n00:07:49.600 --> 00:07:53.972\nNow I don't want to do that, and since\nI'm not transferring it any time soon,\n\n156\n00:07:53.972 --> 00:07:57.036\nI'm gonna go ahead and\nenable that and turn it back on.\n\n157\n00:07:57.036 --> 00:08:00.568\nAnd I'm requesting it, it's telling me\nI'll receive an email when it's done.\n\n158\n00:08:00.568 --> 00:08:03.558\nCuz they have to flip it on their end,\nand get that turned on.\n\n159\n00:08:03.558 --> 00:08:05.722\nAll right, so anyhow, so that's one set.\n\n160\n00:08:05.722 --> 00:08:06.782\nI'm gonna leave that one be.\n\n161\n00:08:06.782 --> 00:08:10.058\nLet me go back to registered\ndomains though, and now up top,\n\n162\n00:08:10.058 --> 00:08:12.270\nI've got two options.\n\n163\n00:08:12.270 --> 00:08:15.470\nRegistered domain, well,\nit's if I want to register a new one.\n\n164\n00:08:15.470 --> 00:08:18.640\nI want to transfer a domain,\na domain that already exists.\n\n165\n00:08:18.640 --> 00:08:21.300\nAnd when I hit that,\nit's gonna ask who I'm transferring, and\n\n166\n00:08:21.300 --> 00:08:25.590\nI'm gonna transfer itprotvdemo.com, right?\n\n167\n00:08:25.590 --> 00:08:28.963\nWhich is my domain that's\ncurrently hosted by Hover.\n\n168\n00:08:28.963 --> 00:08:33.520\nAnd when I go to check it, it should find\nthat that transfer lock is turned on, and\n\n169\n00:08:33.520 --> 00:08:34.225\nhere it is.\n\n170\n00:08:34.225 --> 00:08:37.682\nItprotvdemo.com cannot be\ntransferred to route 53.\n\n171\n00:08:37.682 --> 00:08:40.680\nAnd it's telling me I need\nto unlock the domain.\n\n172\n00:08:40.680 --> 00:08:42.010\nSo that I can transfer it.\n\n173\n00:08:42.010 --> 00:08:44.780\nNow it's given me a few\nother pointers down here.\n\n174\n00:08:44.780 --> 00:08:48.650\nDisable domain privacy, so\nwe can get your contact information.\n\n175\n00:08:48.650 --> 00:08:50.530\nYou don't have to do that one.\n\n176\n00:08:50.530 --> 00:08:54.550\nIt makes it easier if you disable\ndomain privacy, but you don't have to.\n\n177\n00:08:54.550 --> 00:08:55.420\nThen it's saying,\n\n178\n00:08:55.420 --> 00:08:58.890\nensure the registrant contact information\nis correct with a valid email.\n\n179\n00:08:58.890 --> 00:09:01.070\nWell, usually when you have\ndomain privacy turned on,\n\n180\n00:09:01.070 --> 00:09:03.710\nthey put a fake email on\nthere that points to you.\n\n181\n00:09:03.710 --> 00:09:05.930\nSometimes they put a fake email\nthat doesn't go anywhere.\n\n182\n00:09:05.930 --> 00:09:08.290\nAnd that's when we need to\nmake sure that it is right.\n\n183\n00:09:08.290 --> 00:09:10.020\nAnd then it's got this last little entry.\n\n184\n00:09:10.020 --> 00:09:11.160\nAnd I need to talk about this one.\n\n185\n00:09:11.160 --> 00:09:13.110\nOr, I guess it's the second-to-last.\n\n186\n00:09:13.110 --> 00:09:17.750\nGet an authorization code for the domain,\nnot required for certain CLDs, right?\n\n187\n00:09:17.750 --> 00:09:19.980\nWell, first off,\nit's required for most TLDs.\n\n188\n00:09:19.980 --> 00:09:21.580\nSo let's just get that out there.\n\n189\n00:09:21.580 --> 00:09:24.340\nSecondly, what the heck\nare they talking about?\n\n190\n00:09:24.340 --> 00:09:26.830\nAlmost everybody calls these\nauthorization codes, but\n\n191\n00:09:26.830 --> 00:09:31.660\nthey're actually called EPP codes, and EPP\ncodes, I always forget what it stands for,\n\n192\n00:09:31.660 --> 00:09:32.680\nbut I've got it written down here.\n\n193\n00:09:32.680 --> 00:09:34.480\n&gt;&gt; The extensible provisioning protocol.\n\n194\n00:09:34.480 --> 00:09:36.420\n&gt;&gt; Thank you, Wes.\nWes has got my back.\n\n195\n00:09:36.420 --> 00:09:38.250\nWes, the acronym man Brian.\n\n196\n00:09:38.250 --> 00:09:40.210\nSo the EPP codes,\n\n197\n00:09:40.210 --> 00:09:45.730\nwhat they are is a special kind of\nlike identity verification process\n\n198\n00:09:45.730 --> 00:09:50.740\nthat I can institute to help battle some\nof these fraudulent domain transfers.\n\n199\n00:09:50.740 --> 00:09:54.442\nSo you can't transfer a domain\nunless it is unlocked and\n\n200\n00:09:54.442 --> 00:09:57.133\nyou've got the EPP code for it, right?\n\n201\n00:09:57.133 --> 00:10:00.830\nOr the authorization code or whatever\nit is the website chooses to call it.\n\n202\n00:10:00.830 --> 00:10:02.978\nThey very rarely call it an EPP code.\n\n203\n00:10:02.978 --> 00:10:05.061\nI don't know why that is,\nthat is what it's actually called.\n\n204\n00:10:05.061 --> 00:10:06.869\nBut for some reason most\npeople don't call it that.\n\n205\n00:10:06.869 --> 00:10:10.770\nSo, anyhow, so I'm gonna need two\nthings in order to transfer this.\n\n206\n00:10:10.770 --> 00:10:14.820\nIf I jump back over to Hover I\nsee the transfer lock right here.\n\n207\n00:10:14.820 --> 00:10:15.840\nTransfer lock.\n\n208\n00:10:15.840 --> 00:10:18.310\nAnd it's on so\nI'm just going to scroll over here and\n\n209\n00:10:18.310 --> 00:10:23.090\nI'm going to perform the mind bendingly\ndifficult task of checking that box.\n\n210\n00:10:23.090 --> 00:10:24.510\nAnd, it's saying are you\nsure you want to unlock it?\n\n211\n00:10:24.510 --> 00:10:25.530\nI'll say yes.\n\n212\n00:10:25.530 --> 00:10:29.670\nNow, you don't want to\nleave your domain unlocked.\n\n213\n00:10:29.670 --> 00:10:31.380\nUnlock it for the transfer.\n\n214\n00:10:31.380 --> 00:10:33.790\nWhen the transfer is done, lock it back.\n\n215\n00:10:33.790 --> 00:10:36.200\nAs long as the domain is\nlocked nobody can transfer it.\n\n216\n00:10:36.200 --> 00:10:39.950\nAnd that's gonna stop somebody from being\nable to steal your domain from you.\n\n217\n00:10:39.950 --> 00:10:44.210\nBut right now it's unlocked I'm vulnerable\nright now somebody could compromise it.\n\n218\n00:10:44.210 --> 00:10:47.930\nAnd if I didn't have EPP code\nthat would be a real problem.\n\n219\n00:10:47.930 --> 00:10:50.430\nBut I do have EPP codes thankfully, and\n\n220\n00:10:50.430 --> 00:10:56.320\nif I scroll down a bit here somewhere\nin here right here, authorization code.\n\n221\n00:10:56.320 --> 00:10:58.140\nNotice they don't call it\nan EPP code either but\n\n222\n00:10:58.140 --> 00:10:59.720\nif I do the little pop-up, there we go.\n\n223\n00:10:59.720 --> 00:11:01.140\nAlso called an EPP code.\n\n224\n00:11:01.140 --> 00:11:02.360\nWell that's exciting.\n\n225\n00:11:02.360 --> 00:11:04.390\nSo at least you know I'm\nnot making this stuff up.\n\n226\n00:11:04.390 --> 00:11:05.480\nNot this time at least.\n\n227\n00:11:05.480 --> 00:11:08.930\nSo I can see right here where\nI can retrieve an EPP code.\n\n228\n00:11:08.930 --> 00:11:09.530\nAnd I'm gonna do that.\n\n229\n00:11:09.530 --> 00:11:11.040\nNow, here's the fun part.\n\n230\n00:11:11.040 --> 00:11:12.800\nRight, here's the race against time.\n\n231\n00:11:12.800 --> 00:11:15.550\nIf you're watching this show live\nwhich I know some of you are,\n\n232\n00:11:15.550 --> 00:11:18.330\nyou saw my domain name, right?\n\n233\n00:11:18.330 --> 00:11:22.201\nYou saw that I just unlocked it and I'm\nabout to bring my code up on the screen.\n\n234\n00:11:22.201 --> 00:11:25.919\nIf one of you is like ready to go on\nthe keyboard and fast enough on it,\n\n235\n00:11:25.919 --> 00:11:29.210\nin theory you can kick of\na transfer on this one, right?\n\n236\n00:11:29.210 --> 00:11:34.040\nSo, what's to stop somebody watching\nthe show live from stealing my domain?\n\n237\n00:11:34.040 --> 00:11:37.410\nWell, they've had my APP code,\nthey'd know it's unlocked.\n\n238\n00:11:37.410 --> 00:11:40.970\nAs soon as they put the transfer in,\nI'm gonna get an email.\n\n239\n00:11:40.970 --> 00:11:43.090\nAn email goes to\nthe administrative contact.\n\n240\n00:11:43.090 --> 00:11:46.200\nIn this case, ITProTVDemo@ITPro.TV.\n\n241\n00:11:46.200 --> 00:11:47.752\nIt's gonna come to me.\n\n242\n00:11:47.752 --> 00:11:49.698\nIt's like a [INAUDIBLE]\nIt's gonna come to me.\n\n243\n00:11:49.698 --> 00:11:52.560\nNow, when the get the email,\nit's gonna ask me to verify,\n\n244\n00:11:52.560 --> 00:11:54.240\ndo I want this transfer to happen?\n\n245\n00:11:54.240 --> 00:11:57.190\nSo if somebody's out there\nmaliciously doing it, I can say no,\n\n246\n00:11:57.190 --> 00:11:59.300\ncancel that all right?\n\n247\n00:11:59.300 --> 00:12:01.210\nBut if it is me I can approve it.\n\n248\n00:12:01.210 --> 00:12:03.930\nBut if somebody's compromised\nmy e-mail account.\n\n249\n00:12:03.930 --> 00:12:06.270\nThen they could get in and\nthey could do this transfer.\n\n250\n00:12:06.270 --> 00:12:08.570\nRemember e-mails are not sent encrypted.\n\n251\n00:12:08.570 --> 00:12:10.542\nSo it's not that hard to intercept it.\n\n252\n00:12:10.542 --> 00:12:11.800\nSomebody could hi-jack my domain.\n\n253\n00:12:11.800 --> 00:12:13.670\nThat's how these hi-jacks happen.\n\n254\n00:12:13.670 --> 00:12:17.320\nSo, Im gonna go and hit retrieve and\nit is going to generate my code.\n\n255\n00:12:17.320 --> 00:12:21.685\nNow, the code is generally annoying but\nnot necessarily long.\n\n256\n00:12:21.685 --> 00:12:23.563\nI've seen some that\nare really long strings.\n\n257\n00:12:23.563 --> 00:12:26.443\nLately, I've been seeing ones\nthat are really short and\n\n258\n00:12:26.443 --> 00:12:30.163\nthis one is eight characters but\nyou'll see that I've got a pipe symbol,\n\n259\n00:12:30.163 --> 00:12:32.640\na curly bracket, all sorts of crazy stuff.\n\n260\n00:12:32.640 --> 00:12:36.590\nI'm just going to copy that code so\nthat I've got it okay.\n\n261\n00:12:36.590 --> 00:12:40.990\nNow, the domain is unlocked and\nI've got my code.\n\n262\n00:12:40.990 --> 00:12:43.560\nI was able to generate it right here\ncuz Hover's an awesome company and\n\n263\n00:12:43.560 --> 00:12:44.660\nthey let you do it.\n\n264\n00:12:44.660 --> 00:12:47.300\nThere's other registrars where they\nmake you open up a support ticket to\n\n265\n00:12:47.300 --> 00:12:47.970\nget the code.\n\n266\n00:12:47.970 --> 00:12:51.445\nAnd the reason they do that is they wanna\nsell you on not transferring, right.\n\n267\n00:12:51.445 --> 00:12:53.370\n[LAUGH] So that's usually what happens.\n\n268\n00:12:53.370 --> 00:12:56.240\nBut typically you can generate\nthe code like that, and\n\n269\n00:12:56.240 --> 00:12:58.390\nnow I can jump back over to Amazon.\n\n270\n00:12:58.390 --> 00:13:00.340\nAnd we can try this again, okay.\n\n271\n00:13:00.340 --> 00:13:02.040\nSo I just started this process.\n\n272\n00:13:02.040 --> 00:13:05.320\nI'm gonna hit check again and\nit's gonna reach out into another check.\n\n273\n00:13:05.320 --> 00:13:10.020\nNow it might take a little while for\nit to recognize that the lock is gone.\n\n274\n00:13:10.020 --> 00:13:11.790\nBut in my case it looks like\nit did it pretty faster.\n\n275\n00:13:11.790 --> 00:13:15.400\nIt says itprotvdemo.com\ncan be transferred.\n\n276\n00:13:15.400 --> 00:13:17.100\nIt's gonna cost me 12 bucks.\n\n277\n00:13:17.100 --> 00:13:21.870\n12 bucks is one year of registration,\nso it's gonna renew me for one year.\n\n278\n00:13:21.870 --> 00:13:25.360\nIt's telling me to disable domain\nprivacy which I'm not gonna do.\n\n279\n00:13:25.360 --> 00:13:26.760\nActually, do I even have that option?\n\n280\n00:13:26.760 --> 00:13:27.310\nLet me see.\n\n281\n00:13:29.030 --> 00:13:30.896\nLet's see if I have domain privacy.\n\n282\n00:13:30.896 --> 00:13:33.866\nSo here's all my domain\nrecords over on Hover,\n\n283\n00:13:33.866 --> 00:13:38.844\nI actually do have domain privacy right\nhere, now think about domain privacy,\n\n284\n00:13:38.844 --> 00:13:44.360\nthis is tied to ICAN's database, so\nif I uncheck that, it's gonna disable it.\n\n285\n00:13:44.360 --> 00:13:47.900\nAnd Hover is going to have\nto update my record at ICAN.\n\n286\n00:13:47.900 --> 00:13:50.630\nNow, Hover,\nthey do a phenomenal job with DNS, so\n\n287\n00:13:50.630 --> 00:13:52.140\nthey're gonna update it pretty quick.\n\n288\n00:13:52.140 --> 00:13:55.530\nBut it could take 48 hours before\nit updates in the database, so\n\n289\n00:13:55.530 --> 00:13:58.110\nit's not necessarily\nthe fastest thing in the world.\n\n290\n00:13:58.110 --> 00:13:59.990\nAll right, now how do I know if it worked?\n\n291\n00:13:59.990 --> 00:14:07.040\nWell, I can go and do a WHOIS look up and\npull up the WHOIS on ICANN's website.\n\n292\n00:14:07.040 --> 00:14:11.050\nI'm just going to whois.icann.org.\n\n293\n00:14:11.050 --> 00:14:12.850\nAnd on the WHOIS site,\n\n294\n00:14:12.850 --> 00:14:17.084\nif I can get my zoom under control,\nI can look up ITPRO.TVdemo.com.\n\n295\n00:14:18.530 --> 00:14:19.750\nAnd look that one up.\n\n296\n00:14:19.750 --> 00:14:25.100\nNow it is a database lookup and\nthe change may take a while to get\n\n297\n00:14:25.100 --> 00:14:28.380\nover to the other side so\nI just kinda need to monitor this.\n\n298\n00:14:29.720 --> 00:14:31.520\nI think I got that right.\n\n299\n00:14:31.520 --> 00:14:33.690\nThere we go and\n\n300\n00:14:33.690 --> 00:14:37.760\nwow that was pretty darn fast all my\nrecords are already up to date but\n\n301\n00:14:37.760 --> 00:14:41.460\nalways check cuz it might take a little\nwhile but now I mean it's plain and clear.\n\n302\n00:14:41.460 --> 00:14:43.595\nEverything's right there\nin the public record.\n\n303\n00:14:45.457 --> 00:14:46.726\nAnd I can jump back over Amazon,\n\n304\n00:14:46.726 --> 00:14:48.920\nnow I did not have to do that\nbecause the proxy e-mail.\n\n305\n00:14:48.920 --> 00:14:51.510\nBut if you have a dummy e-mail in\nthere that doesn't forward to you,\n\n306\n00:14:51.510 --> 00:14:53.300\nyou will have to turn off that privacy.\n\n307\n00:14:53.300 --> 00:14:56.520\nSo I've actually never done that before so\nthat was kind of neat.\n\n308\n00:14:56.520 --> 00:14:59.070\nWhat better place to try something\nout than live during the show.\n\n309\n00:14:59.070 --> 00:15:00.980\nWhat could possibly go wrong all right.\n\n310\n00:15:00.980 --> 00:15:03.320\nSo I disabled domain privacy,\n\n311\n00:15:03.320 --> 00:15:08.230\nI made sure that my email is\nvalid in the domain registrant.\n\n312\n00:15:08.230 --> 00:15:11.820\nAnd I've got an authorization code so\nI meet all the requirements.\n\n313\n00:15:11.820 --> 00:15:15.400\nI'm gonna add that to my shopping\ncart cuz it is Amazon afterall.\n\n314\n00:15:15.400 --> 00:15:17.971\nAnd I'll continue,\nmaybe I'll get a prime shipping on this.\n\n315\n00:15:17.971 --> 00:15:21.438\n[LAUGH] And so now, it's offering for\nme to enter in my authorization code,\n\n316\n00:15:21.438 --> 00:15:23.710\nthis is the EPP code, I've got to have it.\n\n317\n00:15:23.710 --> 00:15:25.590\nSo I'm going to punch that one in and\n\n318\n00:15:25.590 --> 00:15:30.540\nthen I can continue to use name\nservers provided by the current DNS or\n\n319\n00:15:30.540 --> 00:15:35.490\nI can specify new name servers and its\ngoing to move me over to Amazon, right.\n\n320\n00:15:35.490 --> 00:15:39.370\nWell, you probably want to continue to\nuse the existing ones until you've had\n\n321\n00:15:39.370 --> 00:15:41.700\na chance to recreate the records here.\n\n322\n00:15:41.700 --> 00:15:44.210\nBut if you've got a zone file and\nyou're moving it over quickly,\n\n323\n00:15:44.210 --> 00:15:46.060\nyou can just have it do it all at once.\n\n324\n00:15:46.060 --> 00:15:49.550\nWe saw that in the last episode\nof transferring DNS servers.\n\n325\n00:15:49.550 --> 00:15:52.960\nBut in my case, I really don't\nhave any records here anyway, so\n\n326\n00:15:52.960 --> 00:15:56.956\nI'll just go ahead and choose to have\nthem switch over to Amazon's for me.\n\n327\n00:15:56.956 --> 00:15:58.433\nAnd then we'll hit Continue and\n\n328\n00:15:58.433 --> 00:16:00.791\nnow it gives me a chance\nto update the information.\n\n329\n00:16:00.791 --> 00:16:01.592\nAnd if you look,\n\n330\n00:16:01.592 --> 00:16:05.726\nall the information is up to date, because\nit pulled it right from the public record.\n\n331\n00:16:05.726 --> 00:16:07.330\nIt doesn't have my proxy data.\n\n332\n00:16:07.330 --> 00:16:09.630\nIf it was proxy data,\nit would still be here.\n\n333\n00:16:09.630 --> 00:16:11.368\nWell, I'm about to move away from Hover.\n\n334\n00:16:11.368 --> 00:16:14.430\nSo Hover's proxy is gonna stop working for\nme soon,\n\n335\n00:16:14.430 --> 00:16:17.016\nso I need to make sure\nthat this is accurate.\n\n336\n00:16:17.016 --> 00:16:19.469\nAmazon will hide my contact data for\nme, so\n\n337\n00:16:19.469 --> 00:16:22.430\nit's gonna turn the privacy right back on.\n\n338\n00:16:22.430 --> 00:16:25.600\nSo my data's exposed for\na little while during the transfer.\n\n339\n00:16:25.600 --> 00:16:28.200\nAnd then I can put it right\nback to private again.\n\n340\n00:16:28.200 --> 00:16:31.680\nSo, it's got that information right there,\nI'm good to go, and I will continue.\n\n341\n00:16:33.370 --> 00:16:36.580\nNow this is my last little verification\nscreen, it's showing me the data.\n\n342\n00:16:36.580 --> 00:16:40.150\nI'm gonna have to come back some of this\nbecause I don't wanna be the billing\n\n343\n00:16:40.150 --> 00:16:42.830\ncontact so I'll have to put in other\npeople's information in for that.\n\n344\n00:16:42.830 --> 00:16:44.300\nBut it's got everything in there.\n\n345\n00:16:44.300 --> 00:16:47.500\nI can see my code, the DNS servers,\neverything looks good.\n\n346\n00:16:47.500 --> 00:16:50.140\nI'm gonna go ahead and\ncomplete the purchase.\n\n347\n00:16:50.140 --> 00:16:54.350\nNow remember I need to double\ncheck my expiration date.\n\n348\n00:16:54.350 --> 00:16:57.968\nI was set to renew,\nwas it January 4, 2017?\n\n349\n00:16:57.968 --> 00:17:01.618\nSo when this is done I\nshould see January 4, 2018.\n\n350\n00:17:01.618 --> 00:17:05.710\nI should have an extra year on this\nbecause it should renew for me.\n\n351\n00:17:05.710 --> 00:17:10.518\nNow it is telling me, we'll send an email\nto the domain registrant when the domain\n\n352\n00:17:10.518 --> 00:17:15.679\ntransfer is approved, the email will come\nfrom noreply@domainverification.net or\n\n353\n00:17:15.679 --> 00:17:19.602\nnoreply@registaramazon.com, I\nneed to watch for that email.\n\n354\n00:17:19.602 --> 00:17:22.640\nAnd when I get that email\nI'll be able to approve it.\n\n355\n00:17:22.640 --> 00:17:25.470\nThis is important because if\nI don't approve the email\n\n356\n00:17:25.470 --> 00:17:27.360\nthe transfer doesn't go through.\n\n357\n00:17:27.360 --> 00:17:33.125\nAnd if I didn't have this email,\nsomeone in the chat room, you guys.\n\n358\n00:17:33.125 --> 00:17:34.430\n[LAUGH] You know who you are.\n\n359\n00:17:34.430 --> 00:17:37.380\nThe people in the chat room,\nthey could have taken my domain.\n\n360\n00:17:37.380 --> 00:17:40.135\nIt was a whooping 12 bucks,\nbut it's still annoying.\n\n361\n00:17:40.135 --> 00:17:42.210\n[LAUGH] So\nthey could have taken my domain.\n\n362\n00:17:42.210 --> 00:17:46.870\nIf it was my actual company domain,\nthat would be a real significant problem.\n\n363\n00:17:46.870 --> 00:17:49.680\nObviously we don't wanna go sharing our\ntransfer code with everybody if we don't\n\n364\n00:17:49.680 --> 00:17:52.880\nhave to but in this case,\nit's one extra level.\n\n365\n00:17:52.880 --> 00:17:55.740\nNotice also right here,\ntransferring the registration for\n\n366\n00:17:55.740 --> 00:18:01.240\nyour domain to route 53 might\ntake up to 11 days to complete.\n\n367\n00:18:01.240 --> 00:18:02.886\nThat's not because of caching,\n\n368\n00:18:02.886 --> 00:18:06.680\nit's because of the rules that ICANN\nimplements on these registrars.\n\n369\n00:18:06.680 --> 00:18:10.150\nThey have 11 days to update\nrecords in the database, and\n\n370\n00:18:10.150 --> 00:18:13.140\nif they don't, then they get in trouble,\nthey can lose their accreditation.\n\n371\n00:18:13.140 --> 00:18:16.910\nSo that's how long they can take,\nthey usually have it much, much faster.\n\n372\n00:18:16.910 --> 00:18:19.475\n&gt;&gt; Now Don, 11 days,\nI mean that's quite a long\n\n373\n00:18:19.475 --> 00:18:22.010\nexpanse of time there when\nyou're talking about a business.\n\n374\n00:18:22.010 --> 00:18:24.990\nIs this something that they would\nhave to take into consideration,\n\n375\n00:18:24.990 --> 00:18:28.070\nwhat might delays be seen\nhere out of this, anything?\n\n376\n00:18:29.340 --> 00:18:31.270\n&gt;&gt; It may take 11 days for\nthe transfer to go through, but\n\n377\n00:18:31.270 --> 00:18:33.250\nthat does not mean you can't\nstart working right now.\n\n378\n00:18:33.250 --> 00:18:37.000\nSo now that it's done,\nI can hit Go to Domains, and\n\n379\n00:18:37.000 --> 00:18:40.830\nwhat I am gonna see is that\nthe transfer is in progress.\n\n380\n00:18:40.830 --> 00:18:45.145\nNow, if I don't know when the transfer is\nactually gonna happen, and I've got all\n\n381\n00:18:45.145 --> 00:18:49.790\nthese records over at Hover, and I'm about\nto create a new empty domain over here.\n\n382\n00:18:49.790 --> 00:18:54.052\nAnd the transfer happens at 3 AM tomorrow\nmorning, I'm gonna be asleep and\n\n383\n00:18:54.052 --> 00:18:57.125\nmy website's gonna go down,\nmy emails gonna go down.\n\n384\n00:18:57.125 --> 00:18:59.969\nAll this stuff is gonna go down cuz the\ninternet is not gonna be able to find my\n\n385\n00:18:59.969 --> 00:19:01.568\nrecords anymore, I'm gonna get fired.\n\n386\n00:19:01.568 --> 00:19:06.261\nAnd it could happen any day in the next 11\ndays I got a time bomb just waiting to go\n\n387\n00:19:06.261 --> 00:19:06.904\noff here.\n\n388\n00:19:06.904 --> 00:19:12.364\nBut, what you'll find is that if I go\nup here to my hosted zones that I can\n\n389\n00:19:12.364 --> 00:19:19.290\ncreate that hosted zone right now and I\ncan start to put the information in there.\n\n390\n00:19:19.290 --> 00:19:22.190\nAnd I need to get some\nmirror the other side for\n\n391\n00:19:22.190 --> 00:19:27.000\nme, and once they mirror each other,\nI don't care when the transfer happens.\n\n392\n00:19:27.000 --> 00:19:29.920\nThe transfer can happen in any point\ncuz i've got all the records here and\n\n393\n00:19:29.920 --> 00:19:30.970\nall the records in the side.\n\n394\n00:19:30.970 --> 00:19:34.320\nThat's what I showed in the last episode,\nwe did the transferring DNS servers.\n\n395\n00:19:34.320 --> 00:19:37.100\nI didn't transfer the registration,\njust the DNS servers.\n\n396\n00:19:37.100 --> 00:19:39.050\nWell, that would be the DNS server part.\n\n397\n00:19:39.050 --> 00:19:43.990\nNow by doing that, I don't care when that\ntransfer is, and 11 days, no big deal now.\n\n398\n00:19:43.990 --> 00:19:45.930\nNow the only time I have a problem,\n\n399\n00:19:45.930 --> 00:19:49.350\nis if my domain was gonna\nexpire within those 11 days.\n\n400\n00:19:49.350 --> 00:19:51.040\nMine's gonna expire on 30 days.\n\n401\n00:19:51.040 --> 00:19:54.350\nLet's say it was gonna expire on 11 days,\nor in 5 days.\n\n402\n00:19:54.350 --> 00:19:58.270\nWell, I can't wait that long,\nI need this to happen sooner.\n\n403\n00:19:58.270 --> 00:20:01.900\nSo, what would I really need to\ndo is go to Hover and renew.\n\n404\n00:20:01.900 --> 00:20:06.231\nAnd I will need to renew to Hover first\nand then come and do the transfer.\n\n405\n00:20:06.231 --> 00:20:09.970\nIt's gonna cost me 12 bucks, or\n15 bucks, or whatever, it's not a lot.\n\n406\n00:20:09.970 --> 00:20:13.030\nAnd it's gonna insure that I\ndon't expire during the transfer,\n\n407\n00:20:13.030 --> 00:20:13.710\nthat's really important,\n\n408\n00:20:13.710 --> 00:20:16.980\nyou don't wanna expire during the\ntransfer, causes all sorts of problems.\n\n409\n00:20:16.980 --> 00:20:20.930\n&gt;&gt; And if you have that plan, like you\nsay, in place, you can try to make it\n\n410\n00:20:20.930 --> 00:20:24.310\nas transparent as you can, either to\nthe users that are in your network,\n\n411\n00:20:24.310 --> 00:20:25.900\nor customers that you might be supporting.\n\n412\n00:20:25.900 --> 00:20:27.380\n&gt;&gt; Right.\n\n413\n00:20:27.380 --> 00:20:29.110\nOkay, now let's take a look at our status.\n\n414\n00:20:29.110 --> 00:20:32.840\nIf I go down here to my pending requests,\nI can see domain transfers in progress,\n\n415\n00:20:32.840 --> 00:20:36.100\ndetermining whether domain meets\ntransfer requirements, step 1 of 14.\n\n416\n00:20:36.100 --> 00:20:40.100\nIt's 14 steps, that sounds complex.\n\n417\n00:20:40.100 --> 00:20:42.580\nIt is actually kinda complex\nwhat's going on on the back end.\n\n418\n00:20:42.580 --> 00:20:44.920\nFortunately, we don't\nhave to deal with it.\n\n419\n00:20:44.920 --> 00:20:47.270\nThere's 14 steps,\nwe have to do like 2 of them.\n\n420\n00:20:47.270 --> 00:20:48.880\nSo the bulk of it's being handled for\n\n421\n00:20:48.880 --> 00:20:52.510\nus, what it's really waiting on\nright now is email confirmation.\n\n422\n00:20:52.510 --> 00:20:55.890\nIt is not going to move forward\nwithout email confirmation.\n\n423\n00:20:55.890 --> 00:21:00.760\nIt knows the domain's unlocked,\nit's got my EPP code, now it's waiting for\n\n424\n00:21:00.760 --> 00:21:02.095\nme to say it's okay.\n\n425\n00:21:02.095 --> 00:21:06.155\nAnd while I didn't mind bringing\nup the EPP code on the screen, and\n\n426\n00:21:06.155 --> 00:21:09.835\nI didn't mind unlocking it on the screen,\nI do mind opening my email on the screen.\n\n427\n00:21:09.835 --> 00:21:13.972\nSo I'm gonna break every video rule out\nthere and I'm gonna break out my cell\n\n428\n00:21:13.972 --> 00:21:17.592\nphone real quick and I should have\nan email from Amazon on here, and\n\n429\n00:21:17.592 --> 00:21:20.392\nsure enough I have an email\nfrom Amazon registrar.\n\n430\n00:21:20.392 --> 00:21:24.760\nAnd it says, transfer confirmation for\nthe domain, itprotvdemo.com.\n\n431\n00:21:24.760 --> 00:21:27.370\nWe recently received an online request,\nblah, blah, blah.\n\n432\n00:21:27.370 --> 00:21:32.240\nAnd then as it goes on, I get to\napprove or reject the transfer request.\n\n433\n00:21:32.240 --> 00:21:38.808\nClick the following link before the\ntransfer request expires on 11/12/2016.\n\n434\n00:21:38.808 --> 00:21:41.300\nToday is 11/5, no, 12 5.\n\n435\n00:21:41.300 --> 00:21:42.810\nWhat the heck?\n\n436\n00:21:42.810 --> 00:21:45.650\nIt's written European style, they got me.\n\n437\n00:21:45.650 --> 00:21:48.730\nSo today is December 5th, and\n\n438\n00:21:48.730 --> 00:21:53.870\nI say European I think except us does it,\nso I don't know, sorry Europe.\n\n439\n00:21:53.870 --> 00:21:55.500\nSo anyhow it expires in six days.\n\n440\n00:21:55.500 --> 00:21:59.220\nI'm gonna have six days to click on this\nlittle link here so I'm gonna go ahead and\n\n441\n00:21:59.220 --> 00:22:00.390\nclick on that link.\n\n442\n00:22:00.390 --> 00:22:02.120\nThis is a terrible demonstration,\nisn't it?\n\n443\n00:22:02.120 --> 00:22:05.220\nBut I'm gonna click on that link and it's\njust gonna take me to Amazon's website and\n\n444\n00:22:05.220 --> 00:22:06.840\napprove the transfer.\n\n445\n00:22:06.840 --> 00:22:09.380\nAnd so I just get a simple yes/no box.\n\n446\n00:22:09.380 --> 00:22:11.290\nYes, approve it, no don't approve it.\n\n447\n00:22:11.290 --> 00:22:15.950\nSo I'm gonna go ahead and\nsay yes, and I will submit that.\n\n448\n00:22:15.950 --> 00:22:19.690\nNow that that's done,\nI've authorized the transfer.\n\n449\n00:22:19.690 --> 00:22:25.750\nThey have my domain is unlocked,\nmy EPP code and\n\n450\n00:22:25.750 --> 00:22:29.080\nI got an email that I approve saying yes,\nit's okay to do it.\n\n451\n00:22:29.080 --> 00:22:33.880\nAnd that email came to the listed\nadministrative contact for the account.\n\n452\n00:22:33.880 --> 00:22:35.462\nThat should be everything it needs, and\n\n453\n00:22:35.462 --> 00:22:37.330\nthat should move things\nalong pretty quickly.\n\n454\n00:22:37.330 --> 00:22:40.840\nSo let me refresh the screen, and\n\n455\n00:22:40.840 --> 00:22:44.910\nI can see that it just jumped,\nI'm all the way to step 5 of 14.\n\n456\n00:22:44.910 --> 00:22:49.520\nAnd it says, domain transfer in progress,\nawaiting authorization from registrant.\n\n457\n00:22:49.520 --> 00:22:50.110\nContact and\n\n458\n00:22:50.110 --> 00:22:54.890\nemail was sent to itprotvdemo@itpro.tv\nwhich oddly enough is what I just did.\n\n459\n00:22:54.890 --> 00:22:58.100\nSo, let me see if they\nsent me a second email.\n\n460\n00:22:58.100 --> 00:22:59.600\nI'm gonna just break the rules like crazy,\n\n461\n00:22:59.600 --> 00:23:02.000\nI'm gonna go to my cell\nphone a second time.\n\n462\n00:23:02.000 --> 00:23:02.670\n&gt;&gt; Here we go.\n\n463\n00:23:02.670 --> 00:23:03.870\n&gt;&gt; I'm wild like that.\n\n464\n00:23:03.870 --> 00:23:06.190\nThis episode is out there.\n\n465\n00:23:06.190 --> 00:23:07.600\nSo let me just double check,\n\n466\n00:23:07.600 --> 00:23:13.010\nwe've got a domain detail update and,\nnope I think it just hasn't refreshed yet.\n\n467\n00:23:13.010 --> 00:23:15.330\nSo we'll give that just a second and\nhit refresh again.\n\n468\n00:23:15.330 --> 00:23:17.790\nRemember they said it\ncould take up to 11 days.\n\n469\n00:23:17.790 --> 00:23:19.310\nThere we go, waiting for\n\n470\n00:23:19.310 --> 00:23:22.940\nthe current registrar to complete\nthe transfer steps 7 of 14.\n\n471\n00:23:22.940 --> 00:23:26.050\nSo we're already at step 7, and\nall I did was answer an email.\n\n472\n00:23:26.050 --> 00:23:28.020\nSo that's how painful this is.\n\n473\n00:23:28.020 --> 00:23:31.040\nWhat's happening now is over at\nHover they just got an email.\n\n474\n00:23:31.040 --> 00:23:32.260\nAnd they're gonna be very confused,\n\n475\n00:23:32.260 --> 00:23:36.120\ncuz they know that I like them and\nthey'll see me transferring a domain away.\n\n476\n00:23:36.120 --> 00:23:37.840\nBut they're gonna get an email.\n\n477\n00:23:37.840 --> 00:23:43.250\nAnd it's got all the requisite information\nthat's necessary from Amazon saying hey,\n\n478\n00:23:43.250 --> 00:23:47.010\nwe need to take over control for\nitprotvdemo.com.\n\n479\n00:23:47.010 --> 00:23:51.290\nAnd over at Hover somebody's gonna receive\nthat, verify that all the information is\n\n480\n00:23:51.290 --> 00:23:55.390\ncorrect, and go in there and\nput that they okay it.\n\n481\n00:23:55.390 --> 00:23:59.770\nAnd the are gonna reach out to ICANN and\nsay, we're turning over control to Amazon.\n\n482\n00:23:59.770 --> 00:24:03.274\nAnd Amazon is gonna reach out to ICANN and\nsay we're taking over control.\n\n483\n00:24:03.274 --> 00:24:06.776\nBut Amazon can't do that\nuntil Hover initiates it.\n\n484\n00:24:06.776 --> 00:24:09.903\nHover is gonna kick that in and\ninitiate it, and then Amazon will get it.\n\n485\n00:24:09.903 --> 00:24:13.309\nNow, that process can take awhile.\n\n486\n00:24:13.309 --> 00:24:15.701\nAnd this episode can go on to\nbe a really really long one.\n\n487\n00:24:15.701 --> 00:24:19.870\nBut sometimes it happens really quick,\nwhich is kinda what I was hoping for here.\n\n488\n00:24:19.870 --> 00:24:24.027\nBut, why don't we do this,\nwhy don't we take a T-V timeout, and\n\n489\n00:24:24.027 --> 00:24:27.818\nwe'll let the magic of the Internet and\nvideo filmography,\n\n490\n00:24:27.818 --> 00:24:30.957\nand all that stuff happen,\nmove forward in time.\n\n491\n00:24:30.957 --> 00:24:33.645\nLet's pay attention to\nwhat it is right now so\n\n492\n00:24:33.645 --> 00:24:37.692\nright now it's December 5th\n2016 at 11 54 UTC minus five.\n\n493\n00:24:37.692 --> 00:24:40.058\nLet's see how long it takes for\nthis to show up and\n\n494\n00:24:40.058 --> 00:24:43.479\nas soon as it goes through then Amazon\nwill be able to finish things up.\n\n495\n00:24:43.479 --> 00:24:45.325\nNow I still have time to and\ncaches and all that,\n\n496\n00:24:45.325 --> 00:24:47.730\nit's gonna takes two days no matter what.\n\n497\n00:24:47.730 --> 00:24:50.190\nThis part could take\nseveral days on its own.\n\n498\n00:24:50.190 --> 00:24:50.690\nWe have to see.\n\n499\n00:24:50.690 --> 00:24:54.013\nAnd again, it all comes down to,\nis hover processing this in real time?\n\n500\n00:24:54.013 --> 00:24:55.493\nAre they doing it in batches?\n\n501\n00:24:55.493 --> 00:24:56.914\nIf they're doing it in batches,\n\n502\n00:24:56.914 --> 00:24:59.970\nI have to wait until enough transfers\ngo in before this one moves along.\n\n503\n00:24:59.970 --> 00:25:01.679\nSo it could take a little while.\n\n504\n00:25:01.679 --> 00:25:03.728\nI was kind of hoping if I just\nhit refresh a few times that it\n\n505\n00:25:03.728 --> 00:25:05.010\nwould happen right now.\n\n506\n00:25:05.010 --> 00:25:06.720\nBut we'll give it a little bit of time.\n\n507\n00:25:06.720 --> 00:25:09.451\nAnd as soon as it's done,\nwe'll see the completion of that transfer.\n\n508\n00:25:11.370 --> 00:25:15.114\nAll right, well through the magic of\ntelevision, about five hours has passed.\n\n509\n00:25:15.114 --> 00:25:18.170\nAnd not 11 days, just five hours,\nso certainly not that bad.\n\n510\n00:25:18.170 --> 00:25:19.740\nBut I can see the domain.\n\n511\n00:25:19.740 --> 00:25:21.997\nWell, I was about to say I can\nsee the domain's transferred, but\n\n512\n00:25:21.997 --> 00:25:22.787\nI don't really know.\n\n513\n00:25:22.787 --> 00:25:24.820\nThe domain has disappeared, so\nthat counts for something, right?\n\n514\n00:25:24.820 --> 00:25:28.040\nSo, I've got my route 53\ntransfer screen pulled up.\n\n515\n00:25:28.040 --> 00:25:31.200\nAnd this is where the pending requests\nwere showing, we had step seven of 14 and\n\n516\n00:25:31.200 --> 00:25:33.910\nnow it's just go on.\n\n517\n00:25:33.910 --> 00:25:35.975\nWhat happened to step eight through 14?\n\n518\n00:25:35.975 --> 00:25:37.311\nI don't know they weren't my problem.\n\n519\n00:25:37.311 --> 00:25:41.210\nSo once it got through that [LAUGH]\nIt jumped through and it transferred.\n\n520\n00:25:41.210 --> 00:25:44.645\nAnd so if I move over to my\nregistered domains here, there it is,\n\n521\n00:25:44.645 --> 00:25:50.040\nITProTVdemo.com that was hosted by\nHover is now over here on Amazon.\n\n522\n00:25:50.040 --> 00:25:54.512\nAnd remember,\nit was going to expire in January of 2017,\n\n523\n00:25:54.512 --> 00:25:57.522\nnow it's expiring January of 2018.\n\n524\n00:25:57.522 --> 00:26:00.950\nSo I had to pay $12 but\nthat wasn't a transfer fee.\n\n525\n00:26:00.950 --> 00:26:02.530\nThat was just a renewal.\n\n526\n00:26:02.530 --> 00:26:05.580\nAnd the way that ICANN does it\nis when you remove a domain\n\n527\n00:26:05.580 --> 00:26:08.800\nthere's only one type of write that they\ndo to the database, and that's a renewal.\n\n528\n00:26:08.800 --> 00:26:11.650\nSo you're writing that change,\nto renew it.\n\n529\n00:26:11.650 --> 00:26:16.230\nAnd it's Amazon writing it\ninstead of Hover writing it.\n\n530\n00:26:16.230 --> 00:26:20.660\nSo now that's moved over and\nI can jump into my hosted zones and\n\n531\n00:26:20.660 --> 00:26:21.340\nI can get to work.\n\n532\n00:26:21.340 --> 00:26:24.630\nNow notice how ITProTVDemo.com isn't here,\nright?\n\n533\n00:26:24.630 --> 00:26:26.590\nRemember, I deleted it earlier?\n\n534\n00:26:26.590 --> 00:26:29.220\nJust because it's registered here,\ndoesn't mean I have to have a zone.\n\n535\n00:26:29.220 --> 00:26:32.630\nSo the zone is empty, I would need to\ncome in and create a hosted zone for\n\n536\n00:26:32.630 --> 00:26:34.740\nit and then get to work, right?\n\n537\n00:26:34.740 --> 00:26:36.811\nSo I've got that ITProTVDemo.net.\n\n538\n00:26:36.811 --> 00:26:41.504\nI can come in here and punch in\nthe ITProTVDemo.com, throw in a comment,\n\n539\n00:26:41.504 --> 00:26:42.270\nwhatever.\n\n540\n00:26:42.270 --> 00:26:44.970\nAnd get that created and\nstart to populate that out and\n\n541\n00:26:44.970 --> 00:26:48.976\nit's already got the right information\nin there because it is hosted here.\n\n542\n00:26:48.976 --> 00:26:53.530\nBack under my registered domains I can\nchoose ittvdemo.com and it's gonna give me\n\n543\n00:26:53.530 --> 00:26:57.660\nthe detailed information for example\nwhether or not it's gonna transfer log.\n\n544\n00:26:57.660 --> 00:27:02.460\nAnd remember when I looked at itprotv.net\nthe one that I bought at the beginning of\n\n545\n00:27:02.460 --> 00:27:06.190\nthe episode on purchasing domains\nthat transfer lock was turned off.\n\n546\n00:27:06.190 --> 00:27:09.660\nBut when this one came over,\nnow the transfer lock is enabled.\n\n547\n00:27:09.660 --> 00:27:12.440\nAnd that's because when\nyou move a domain in,\n\n548\n00:27:12.440 --> 00:27:14.880\nAmazon does put a little hold on it for\na period of time.\n\n549\n00:27:14.880 --> 00:27:17.880\nI want that on anyway so\nit doesn't really matter to me.\n\n550\n00:27:17.880 --> 00:27:20.440\nI can generate an authorization code\nif I'm about to take it back out again,\n\n551\n00:27:20.440 --> 00:27:22.050\nbut I kinda just got it here.\n\n552\n00:27:22.050 --> 00:27:23.870\nSo I'll probably leave it be.\n\n553\n00:27:23.870 --> 00:27:25.530\nNow, I do need to be\ncareful about one thing.\n\n554\n00:27:25.530 --> 00:27:29.014\nOver here, these are the name servers\nAmazon wants me to use, right?\n\n555\n00:27:29.014 --> 00:27:34.601\n95, 1868, 722, I just need to\ndouble check, when I go back to my\n\n556\n00:27:34.601 --> 00:27:40.580\nhosted zones and look at ITProTVdemo.com\ndid it put those same ones in?\n\n557\n00:27:40.580 --> 00:27:41.720\nAnd it didn't.\n\n558\n00:27:41.720 --> 00:27:44.440\nNow that might be a problem for me,\nI need to make sure those match.\n\n559\n00:27:44.440 --> 00:27:48.170\nAnd the ones attached to the domain\nitself, the ones on the last screen,\n\n560\n00:27:48.170 --> 00:27:49.190\nthose are the ones I wanna trust.\n\n561\n00:27:49.190 --> 00:27:51.909\nSo I'll need to edit these and\ncome in and fix them back up.\n\n562\n00:27:51.909 --> 00:27:53.630\nThat's an Amazon thing,\nnot everybody else.\n\n563\n00:27:53.630 --> 00:27:56.100\nSo if you're not dealing with Amazon\nyou might not have that problem.\n\n564\n00:27:56.100 --> 00:27:58.750\nThe other thing is I can jump over and\ndo a whois lookup.\n\n565\n00:27:58.750 --> 00:28:01.620\nHere's the itprotvdemo.com\nlookup I did earlier, right?\n\n566\n00:28:01.620 --> 00:28:04.700\nAnd if I look down here I'll see\nit's registered through Tucows.\n\n567\n00:28:04.700 --> 00:28:09.370\nTUCOWS is the company that owns Hover so\ntucowsdomains.com and\n\n568\n00:28:09.370 --> 00:28:14.420\nif I redo that lookup,\nthat database should be updated and\n\n569\n00:28:14.420 --> 00:28:18.720\nso now when I look at it,\nAmazon Registrar, Inc.\n\n570\n00:28:18.720 --> 00:28:22.650\nSo this domain is now fully off\nof Hover and fully on Amazon,\n\n571\n00:28:22.650 --> 00:28:26.810\nI've got Amazon from the DNS servers\nas well as the registration authority.\n\n572\n00:28:26.810 --> 00:28:29.710\nThey're in there, and\nthey're now in control of that domain.\n\n573\n00:28:29.710 --> 00:28:31.550\nI do all my renewals and\neverything through Amazon.\n\n574\n00:28:31.550 --> 00:28:32.650\nIt's all in one place.\n\n575\n00:28:32.650 --> 00:28:36.320\nSo moving a domain from one registrar\nto another, not a big deal.\n\n576\n00:28:36.320 --> 00:28:40.250\nIt's more of an exercise in patience,\nreally, than anything else.\n\n577\n00:28:40.250 --> 00:28:41.270\nOnce it's moved over, it's done,\n\n578\n00:28:41.270 --> 00:28:44.690\nand that's transferring\na domain in a nutshell.\n\n579\n00:28:44.690 --> 00:28:45.930\n&gt;&gt; That's a lot of great information.\n\n580\n00:28:45.930 --> 00:28:47.620\nNow Don, looking at the clock here,\n\n581\n00:28:47.620 --> 00:28:49.620\nit does look like we're coming\nto the end of another episode.\n\n582\n00:28:49.620 --> 00:28:50.417\nNow you've-\n&gt;&gt; Six hours.\n\n583\n00:28:50.417 --> 00:28:52.810\n&gt;&gt; Six hours later,\nthat's right, six hours later.\n\n584\n00:28:52.810 --> 00:28:53.562\nI forgot about that.\n\n585\n00:28:53.562 --> 00:28:56.840\nWe should had you come back unshaven or\nsomething like that, you know.\n\n586\n00:28:56.840 --> 00:28:58.811\nBut before we do go.\n\n587\n00:28:58.811 --> 00:29:01.607\nYou mentioned some things throughout this\nepisode that people need to take into\n\n588\n00:29:01.607 --> 00:29:02.240\nconsideration.\n\n589\n00:29:02.240 --> 00:29:03.864\nGot any parting words\nyou'd like to impart?\n\n590\n00:29:03.864 --> 00:29:08.420\n&gt;&gt; The main thing is after the transfer\nmake sure that you re-lock your domain.\n\n591\n00:29:08.420 --> 00:29:11.140\nYou definitely want that\ntransfer lock turned on.\n\n592\n00:29:11.140 --> 00:29:14.360\nAlso, make sure you keep your emails\nsecure, cuz if somebody can get into\n\n593\n00:29:14.360 --> 00:29:17.220\nyour email account,\nthey can answer that verification email.\n\n594\n00:29:17.220 --> 00:29:18.460\nSo those are important things and\n\n595\n00:29:18.460 --> 00:29:22.840\nthat's why we also have the EPP code on\ntop of that, that authorization code.\n\n596\n00:29:22.840 --> 00:29:26.500\nThose three components are needed\nto transfer a domain in and out.\n\n597\n00:29:26.500 --> 00:29:30.660\nThe only other thing is if you're buying a\ndomain from somebody who already has one,\n\n598\n00:29:30.660 --> 00:29:33.740\nyou're doing one of those auction things,\nbe really careful.\n\n599\n00:29:33.740 --> 00:29:36.610\nCuz they can take your money and not\ntransfer it to you and you're out of luck.\n\n600\n00:29:36.610 --> 00:29:39.550\nSo there's a number of domain\nname escrow services that are out\n\n601\n00:29:39.550 --> 00:29:40.935\nthere to help with that transfer.\n\n602\n00:29:40.935 --> 00:29:43.770\nRegistar.com runs one and\na couple of other companies run them.\n\n603\n00:29:43.770 --> 00:29:47.162\nTo help make sure that the domain name\ngoes in escrow, you pay the money, and\n\n604\n00:29:47.162 --> 00:29:48.975\nthen it's released from escrow to you.\n\n605\n00:29:48.975 --> 00:29:52.206\nAnd not just released from some\nthird-party vendor or domain squatter, or\n\n606\n00:29:52.206 --> 00:29:54.330\nsomebody that's not\nnecessarily trustworthy.\n\n607\n00:29:54.330 --> 00:29:55.960\nSo always keep an eye out for that.\n\n608\n00:29:55.960 --> 00:29:57.540\n&gt;&gt; All right, Don,\nwell wealth of information.\n\n609\n00:29:57.540 --> 00:29:59.550\nWe appreciate you being in\nthe studios watching us.\n\n610\n00:29:59.550 --> 00:30:01.370\nAnd we appreciate you watching us.\n\n611\n00:30:01.370 --> 00:30:05.623\nHow about Imparting knowledge to us, and\nwe do appreciate the viewers out there,\n\n612\n00:30:05.623 --> 00:30:07.110\nsigning out for ITPro.TV.\n\n613\n00:30:07.110 --> 00:30:08.461\nI've been your host Wes Bryan.\n\n614\n00:30:08.461 --> 00:30:09.285\n&gt;&gt; And I'm Don Pezet.\n\n615\n00:30:09.285 --> 00:30:10.405\n&gt;&gt; And we'll see you next time.\n\n616\n00:30:10.405 --> 00:30:18.088\n&gt;&gt; [MUSIC]\n\n617\n00:30:18.088 --> 00:30:22.950\n&gt;&gt; Thank you for watching ITPRO.TV\n\n",
          "vimeoId": "195468068"
        }
      ],
      "title": "Public Domains"
    },
    {
      "episodes": [
        {
          "description": "In this episode, Wes and Don start the journey through securing DNS Zones on an NSD server. In the first part they will demonstrate getting the prerequisites installed and configured",
          "length": "2461",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-5-1-configuring_dnssec_with_nsd-12116-PGM.00_40_47_18.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-5-1-configuring_dnssec_with_nsd-12116-PGM.00_40_47_18.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-5-1-configuring_dnssec_with_nsd-12116-PGM.00_40_47_18.Still001-sm.jpg",
          "title": "Configuring DNSSEC with NSD",
          "transcript": "WEBVTT\n\n1\n00:00:00.029 --> 00:00:01.360\nWelcome to ITProTV.\n\n2\n00:00:01.360 --> 00:00:03.469\nI'm your host, Don Pezet.\n\n3\n00:00:03.469 --> 00:00:07.193\n&gt;&gt; [CROSSTALK]\n\n4\n00:00:07.193 --> 00:00:11.902\n&gt;&gt; You're watching ITProTV.\n\n5\n00:00:11.902 --> 00:00:14.666\n&gt;&gt; Welcome to another exciting\nepisode here at ITProTV.\n\n6\n00:00:14.666 --> 00:00:15.970\nI'm your host, Wes Bryan.\n\n7\n00:00:15.970 --> 00:00:19.720\nAnd in today's episode, we're\ncontinuing through our DNS tech skills,\n\n8\n00:00:19.720 --> 00:00:21.490\nwe're actually coming\nback with a part two.\n\n9\n00:00:21.490 --> 00:00:24.801\nJoining us for this very endeavor\nis none other than Mr. Don Pezet.\n\n10\n00:00:24.801 --> 00:00:25.452\nDon, how you doing sir?\n\n11\n00:00:25.452 --> 00:00:28.040\n&gt;&gt; I'm doing great, Wes,\nready to dive right back into DNSSEC.\n\n12\n00:00:28.040 --> 00:00:31.090\nAnd if you watched our last episode, you\nknow we spent our time dealing with all\n\n13\n00:00:31.090 --> 00:00:36.250\nthe prerequisites of making sure\nwe were ready to implement DNSSEC.\n\n14\n00:00:36.250 --> 00:00:37.520\nWe set up our servers,\n\n15\n00:00:37.520 --> 00:00:42.120\nwe got everything put in place and\nwe never actually implemented DNSSEC.\n\n16\n00:00:42.120 --> 00:00:45.290\nAnd that's what we're gonna kick off with\nright here in this episode is the actual\n\n17\n00:00:45.290 --> 00:00:45.870\nsigning.\n\n18\n00:00:45.870 --> 00:00:48.330\nSo if you didn't watch the last episode,\n\n19\n00:00:48.330 --> 00:00:52.188\nwhere we left off is I've got two\nNSD servers that are up and running.\n\n20\n00:00:52.188 --> 00:00:55.280\nThey're replicating out a zone\nbetween each other, but\n\n21\n00:00:55.280 --> 00:00:58.690\nit's just a regular old zone\nwith regular old records.\n\n22\n00:00:58.690 --> 00:01:02.040\nThey're not digitally signed in any way,\nthere's no hashes or\n\n23\n00:01:02.040 --> 00:01:03.580\nsignatures attached to them.\n\n24\n00:01:03.580 --> 00:01:06.730\nWe need to start activating DNSSEC and\ngetting that pushed out.\n\n25\n00:01:06.730 --> 00:01:08.920\nSo that's where we are right now,\n\n26\n00:01:08.920 --> 00:01:13.170\nwith the actual beginning of the true\nDNSSEC configuration, all right.\n\n27\n00:01:13.170 --> 00:01:16.640\nNow, in order to get started,\nthe first thing I need\n\n28\n00:01:16.640 --> 00:01:19.380\nto do is kind of figure out what\nalgorithms I'm gonna be using.\n\n29\n00:01:19.380 --> 00:01:20.610\nI pointed that out in the last episode.\n\n30\n00:01:20.610 --> 00:01:23.760\nThere's more than one algorithm we can\nuse for generating the signature and\n\n31\n00:01:23.760 --> 00:01:25.680\ngenerating the digest and all of that.\n\n32\n00:01:25.680 --> 00:01:28.310\nAnd there's different\nstandards that are out there.\n\n33\n00:01:28.310 --> 00:01:32.460\nBe careful because the one you pick\nneeds to be supported by your provider,\n\n34\n00:01:32.460 --> 00:01:33.670\nwhoever your registrar is.\n\n35\n00:01:33.670 --> 00:01:35.140\nAnd so you've gotta check that.\n\n36\n00:01:35.140 --> 00:01:40.740\nIn my scenario, I'm using a registrar\nwhich is Hover.com, right.\n\n37\n00:01:40.740 --> 00:01:45.860\nAnd Hover, they're the registrar\nof record for my itprotvdemo.org.\n\n38\n00:01:45.860 --> 00:01:49.100\nAnd I know they support DNSSEC,\nthey've got support for that, so\n\n39\n00:01:49.100 --> 00:01:51.680\nI can certainly come in here and\nactivate it.\n\n40\n00:01:51.680 --> 00:01:57.020\nAnd when I activate it, I'm gonna have to\npick an algorithm and a digest algorithm.\n\n41\n00:01:57.020 --> 00:02:00.940\nNow, there are many different\nalgorithms that are out there, and\n\n42\n00:02:00.940 --> 00:02:03.322\neach one gets a number assigned to them.\n\n43\n00:02:03.322 --> 00:02:05.726\nSee how there's two, three,\nfive, six, seven, eight?\n\n44\n00:02:05.726 --> 00:02:10.239\nSee how it skips one, and\nthey skip four and they skip nine?\n\n45\n00:02:10.239 --> 00:02:12.220\nWhere did those numbers go?\n\n46\n00:02:12.220 --> 00:02:14.040\nWell, Hover didn't make these numbers up.\n\n47\n00:02:14.040 --> 00:02:16.280\nThis is part of the DNSSEC standard.\n\n48\n00:02:16.280 --> 00:02:19.060\nEach algorithm gets\na number assigned to it.\n\n49\n00:02:19.060 --> 00:02:22.990\nAnd what they're telling me here\nare which ones they support, right.\n\n50\n00:02:22.990 --> 00:02:25.292\nThey don't support\nwhatever number one was.\n\n51\n00:02:25.292 --> 00:02:27.200\nNumber one is actually MD5, right.\n\n52\n00:02:27.200 --> 00:02:30.788\nSo they don't support MD5 because MD5\nis not considered secure anymore.\n\n53\n00:02:30.788 --> 00:02:33.072\nIf it's not secure,\nwhy bother supporting it?\n\n54\n00:02:33.072 --> 00:02:35.643\nAnd if we look at some of the others,\nit's gonna be similar stuff to that.\n\n55\n00:02:35.643 --> 00:02:39.752\n&gt;&gt; Now, Don, is this related next to that\nkey ID that you showed us in the first\n\n56\n00:02:39.752 --> 00:02:42.700\nepisode where you said these\nnumbers are important?\n\n57\n00:02:42.700 --> 00:02:45.830\nI noticed, for instance, eight was\nin the list a couple of times there.\n\n58\n00:02:45.830 --> 00:02:46.690\n&gt;&gt; Yeah.\n\n59\n00:02:46.690 --> 00:02:49.350\nAnd when we saw that,\nthere were usually two numbers, right.\n\n60\n00:02:49.350 --> 00:02:51.950\nAnd the first number was\nindicating the algorithm, and\n\n61\n00:02:51.950 --> 00:02:54.140\nthe other one was indicating\nthe digest algorithm.\n\n62\n00:02:54.140 --> 00:02:56.780\nAnd so you'll see where I've\ngot those options, too.\n\n63\n00:02:56.780 --> 00:03:01.670\nNow, when I pick an algorithm, I need to\nmake sure that my registrar supports it,\n\n64\n00:03:01.670 --> 00:03:03.750\nand I need to make sure that I support it.\n\n65\n00:03:03.750 --> 00:03:10.377\nSo for example, on this digest, see how I\ncan do SHA-1, SHA-256 GOST and SHA-384?\n\n66\n00:03:10.377 --> 00:03:13.507\nWell, I'm gonna use the ldns-utils.\n\n67\n00:03:13.507 --> 00:03:18.132\nAnd the version of the utils that I have,\nthey don't support GOST or SHA-384.\n\n68\n00:03:18.132 --> 00:03:21.429\nSo I only support SHA-1 and\nSHA-256 for the digest.\n\n69\n00:03:21.429 --> 00:03:23.476\nSo I'm the bottleneck there.\n\n70\n00:03:23.476 --> 00:03:26.233\nBut there may be something where your\nregistrar is a bottleneck, too, so\n\n71\n00:03:26.233 --> 00:03:27.720\nyou gotta check that out.\n\n72\n00:03:27.720 --> 00:03:30.810\nI'm gonna go ahead and use SHA-256 for\neverything that I do here today\n\n73\n00:03:30.810 --> 00:03:33.890\nbecause that's considered secure and\nalmost everything supports it.\n\n74\n00:03:33.890 --> 00:03:35.600\nSo you're pretty safe going with it.\n\n75\n00:03:35.600 --> 00:03:39.160\nBut don't hesitate to move to a stronger\nalgorithm if you've got full support for\n\n76\n00:03:39.160 --> 00:03:40.990\nit in your environment, all right.\n\n77\n00:03:40.990 --> 00:03:42.860\nSo I need to get this stuff generated.\n\n78\n00:03:42.860 --> 00:03:45.170\nI need to get it made and put in place.\n\n79\n00:03:45.170 --> 00:03:47.870\nSo let me jump back over to my server.\n\n80\n00:03:47.870 --> 00:03:50.330\nNow, I've got two servers,\ndns1 and dns2, and\n\n81\n00:03:50.330 --> 00:03:52.440\nthey're replicating between each other.\n\n82\n00:03:52.440 --> 00:03:56.680\nI'm gonna do all my work on one server,\non the master.\n\n83\n00:03:56.680 --> 00:04:00.240\nAnd as I sign everything,\nthat's gonna replicate the other one.\n\n84\n00:04:00.240 --> 00:04:04.107\nSo I don't have to do all the work twice,\nI can just do it once.\n\n85\n00:04:04.107 --> 00:04:07.624\nBut to help me make sure the work gets\ndone, I'm gonna jump over to number two.\n\n86\n00:04:07.624 --> 00:04:12.510\nAnd I'm going to do a quick dig on my\nlocal system here just to be able to\n\n87\n00:04:12.510 --> 00:04:17.172\nverify that the records don't\nhave any kind of keys yet, right.\n\n88\n00:04:17.172 --> 00:04:22.172\nSo if I do a lookup against\nmy second server, and\n\n89\n00:04:22.172 --> 00:04:27.055\nI'm gonna look for www.itprotvdemo.org.\n\n90\n00:04:27.055 --> 00:04:30.146\nWhen I get that back, I get a nice,\nnormal record right there.\n\n91\n00:04:30.146 --> 00:04:32.408\nAnd that's just an A record, right.\n\n92\n00:04:32.408 --> 00:04:37.705\nI'm gonna query it again, and this time\nI'm gonna tell it I want the DNSKEY.\n\n93\n00:04:37.705 --> 00:04:41.624\nAnd I'm gonna use +multiline just to make\nit look a little nicer on the screen.\n\n94\n00:04:41.624 --> 00:04:44.450\nOtherwise, it word wraps\nthe thing all crazy.\n\n95\n00:04:44.450 --> 00:04:49.570\nSo I'm querying that record, and I'm\nsaying show me the DNSKEY for that record.\n\n96\n00:04:49.570 --> 00:04:50.970\nOr actually, hang on, that's a record.\n\n97\n00:04:50.970 --> 00:04:52.880\nA record would have an RRSIG.\n\n98\n00:04:52.880 --> 00:04:57.310\nI'm gonna do the zone, so I'll pull\nitprotvdemo.org, the zone, itself.\n\n99\n00:04:57.310 --> 00:05:00.430\nAnd when I query that,\nit doesn't have a key.\n\n100\n00:05:00.430 --> 00:05:01.920\nRight, no key was returned for me.\n\n101\n00:05:01.920 --> 00:05:04.890\nI got my SOA information, but no key.\n\n102\n00:05:04.890 --> 00:05:07.340\nSee how it says IN DNSKEY and\nthen nothing?\n\n103\n00:05:07.340 --> 00:05:09.010\nNormally, the key would follow that.\n\n104\n00:05:09.010 --> 00:05:12.330\nSo, as of right now,\nthis server doesn't contain a key.\n\n105\n00:05:12.330 --> 00:05:17.130\nAnd I'll run that same query later to\nmake sure that the key does show up and\n\n106\n00:05:17.130 --> 00:05:18.890\nI'm querying the second server.\n\n107\n00:05:18.890 --> 00:05:21.590\nBecause I'll know it's working on\nthe first server cuz that's where\n\n108\n00:05:21.590 --> 00:05:22.350\nI'm setting it up.\n\n109\n00:05:22.350 --> 00:05:24.360\nI need to make sure it replicates, right.\n\n110\n00:05:24.360 --> 00:05:26.597\nSo on this server,\nI can do that same thing,\n\n111\n00:05:26.597 --> 00:05:28.720\nexcept I can look up against this server.\n\n112\n00:05:28.720 --> 00:05:35.857\nSo just using it to loop back to pull up\nitprotvdemo.org, and ask for that DNSKEY.\n\n113\n00:05:35.857 --> 00:05:39.180\nAnd I'll do multilining even though\nthat's not gonna return anything.\n\n114\n00:05:39.180 --> 00:05:40.440\nBut there we go, same thing.\n\n115\n00:05:40.440 --> 00:05:43.350\nI get the IN DNSKEY followed by nothing.\n\n116\n00:05:43.350 --> 00:05:44.148\nNo key, all right.\n\n117\n00:05:44.148 --> 00:05:47.060\nLet's fix that, let's generate a key.\n\n118\n00:05:47.060 --> 00:05:48.550\nThe command to generate a key.\n\n119\n00:05:48.550 --> 00:05:53.890\nWell, we need to get into /etc/nsd,\nthat's where our zone is.\n\n120\n00:05:53.890 --> 00:05:58.000\nSo my zone is sitting right here,\nitprotvdemo.org.dns.\n\n121\n00:05:58.000 --> 00:06:05.490\nAnd by the time this is done, I'm going\nto have generated three sets of keys.\n\n122\n00:06:05.490 --> 00:06:09.800\nI need a zone signing key that\nI'll use to sign the zone.\n\n123\n00:06:09.800 --> 00:06:14.780\nThen I need a key signing key\nthat I use to sign the zone keys.\n\n124\n00:06:14.780 --> 00:06:16.650\nCuz I might have ten zones.\n\n125\n00:06:16.650 --> 00:06:20.560\nWell, I need a different key for each\nzone, so that will be ten different keys.\n\n126\n00:06:20.560 --> 00:06:22.100\nAnd I can have one master key,\n\n127\n00:06:22.100 --> 00:06:25.360\nthe key signing key,\nthat signs all of them, right.\n\n128\n00:06:25.360 --> 00:06:28.590\nSo I need a zone signing key and\na key signing key.\n\n129\n00:06:28.590 --> 00:06:32.998\nAnd you'll see this usually written as\nZSK and KSK, so I need those two keys.\n\n130\n00:06:32.998 --> 00:06:36.583\nAnd then I need a DS key.\n\n131\n00:06:36.583 --> 00:06:38.322\nAnd the DS is for\nthe designated signer, and\n\n132\n00:06:38.322 --> 00:06:40.769\nthat's what I'm gonna send up\nto the registrar, all right.\n\n133\n00:06:40.769 --> 00:06:41.940\nSo that's the other one.\n\n134\n00:06:41.940 --> 00:06:44.540\nSo I'm gonna make three sets of keys.\n\n135\n00:06:44.540 --> 00:06:47.680\nAnd the commands are all really similar so\nthey're easy to mix up.\n\n136\n00:06:47.680 --> 00:06:50.530\nSo let's kind of run\nthrough this step by step.\n\n137\n00:06:50.530 --> 00:06:52.120\nI'm gonna start with the zone signing key.\n\n138\n00:06:52.120 --> 00:06:55.470\nI'm gonna sign itprotv.demo.org.dns.\n\n139\n00:06:55.470 --> 00:06:58.950\nNow, if I need to make any changes\nto the records I need to do it now\n\n140\n00:06:58.950 --> 00:07:03.310\nbecause from now on,\nevery time I modify that zone,\n\n141\n00:07:03.310 --> 00:07:08.490\nI need to go in and re-sign it, right.\n\n142\n00:07:08.490 --> 00:07:11.660\nEvery time I make a modification,\nI've got to re-sign it cuz it'll change.\n\n143\n00:07:11.660 --> 00:07:13.920\nSo because I know I'm gonna do that,\n\n144\n00:07:13.920 --> 00:07:16.680\nthere is the matter of the serial\nnumber that's in there.\n\n145\n00:07:16.680 --> 00:07:19.026\nAnd if I want this to\nreplicate to the other side,\n\n146\n00:07:19.026 --> 00:07:20.983\nI need to increment that serial number.\n\n147\n00:07:20.983 --> 00:07:26.348\nI'm gonna increment the serial number now,\neven though I haven't changed anything,\n\n148\n00:07:26.348 --> 00:07:30.132\nso that when it signs it the new\nserial number will be in there.\n\n149\n00:07:30.132 --> 00:07:34.910\nSo I'm gonna edit\n/etc/nsd/itprotvdemo.org.dns.\n\n150\n00:07:34.910 --> 00:07:38.700\nAnd I'm gonna go in here and\njust take the serial number,\n\n151\n00:07:38.700 --> 00:07:43.370\nwhich is a 1, and I'm gonna make it a 2,\nright, just bump it up.\n\n152\n00:07:43.370 --> 00:07:45.319\nI mean, you can make it 2,000,\nit doesn't matter, but\n\n153\n00:07:45.319 --> 00:07:47.130\nit has to be a number higher\nthan whatever it is right now.\n\n154\n00:07:47.130 --> 00:07:49.231\nSo that's gonna let the other\nside know that it's different.\n\n155\n00:07:49.231 --> 00:07:54.893\nNow, NSD doesn't actually load\nthe zone until I tell it to, right.\n\n156\n00:07:54.893 --> 00:07:56.471\nSo it's not gonna see that number changed,\n\n157\n00:07:56.471 --> 00:07:58.273\nit's not gonna replicate\nover to the other side.\n\n158\n00:07:58.273 --> 00:07:59.978\nAnd that's perfectly fine with me, so.\n\n159\n00:07:59.978 --> 00:08:01.197\nThere we go.\n\n160\n00:08:01.197 --> 00:08:02.532\nAnd I'll get out of that.\n\n161\n00:08:02.532 --> 00:08:07.457\nAll right, so as it stands, I've got my\nregular old zone sitting right there and\n\n162\n00:08:07.457 --> 00:08:09.110\nnow I need to sign it.\n\n163\n00:08:09.110 --> 00:08:13.688\nSo I'm gonna run ldns-keygen.\n\n164\n00:08:13.688 --> 00:08:15.302\nThis is gonna generate the key.\n\n165\n00:08:15.302 --> 00:08:17.040\nAnd we're gonna use this\nutility a few times.\n\n166\n00:08:17.040 --> 00:08:19.960\nAnd as far as options that go into it,\n\n167\n00:08:19.960 --> 00:08:24.820\nwe need to say -a and\ntell it the algorithm to use.\n\n168\n00:08:24.820 --> 00:08:27.740\nNow there's a lot that are supported and\ndepending on your distro,\n\n169\n00:08:27.740 --> 00:08:29.700\nyou may have some and\nyou may be missing others.\n\n170\n00:08:29.700 --> 00:08:32.350\nWhat I recommend you do\nis before you run it,\n\n171\n00:08:32.350 --> 00:08:35.210\njust pull up the man file for\nit, all right.\n\n172\n00:08:35.210 --> 00:08:36.670\nThere is actually a command you can run,\n\n173\n00:08:36.670 --> 00:08:41.420\nI think it's ldns-keygen and then a -l or\nsomething and it'll list them out.\n\n174\n00:08:41.420 --> 00:08:44.470\nBut if you pull up the man file\ndocumentation and look in here,\n\n175\n00:08:44.470 --> 00:08:48.560\nit'll be in the documentation where\nit tells you which one are supported.\n\n176\n00:08:48.560 --> 00:08:50.580\nAnd I say that and\n\n177\n00:08:50.580 --> 00:08:55.410\nthen it's not here we go, specifying list\nhere gives a list of supported algorithms.\n\n178\n00:08:55.410 --> 00:08:57.090\nThat's what I need to do.\n\n179\n00:08:57.090 --> 00:09:02.200\nSo I'll say ldns-keygen and\nthen I'll do -a.\n\n180\n00:09:02.200 --> 00:09:05.880\nAnd normally I would follow this up with\nwhich algorithm I was gonna use, but\n\n181\n00:09:05.880 --> 00:09:07.510\nI'm just gonna say list.\n\n182\n00:09:07.510 --> 00:09:12.020\nAnd when I run it,\nhere's the ones that my system supports.\n\n183\n00:09:12.020 --> 00:09:15.440\nI may see some that my registrar has and\nsome they don't.\n\n184\n00:09:15.440 --> 00:09:17.780\nI've gotta find that mix.\n\n185\n00:09:17.780 --> 00:09:20.820\nSo when I look down the list,\nI can pick and earlier,\n\n186\n00:09:20.820 --> 00:09:22.080\nI said I didn't support ghost.\n\n187\n00:09:22.080 --> 00:09:23.147\nIt looks like I do, right.\n\n188\n00:09:23.147 --> 00:09:24.691\nI learn something new every day.\n\n189\n00:09:24.691 --> 00:09:26.840\nAnd we got SHA 384 sitting down there.\n\n190\n00:09:26.840 --> 00:09:28.028\nSo I've got a couple I can pick from.\n\n191\n00:09:28.028 --> 00:09:31.430\nBut I already said I was gonna use SHA\n256 and that's this guy right here.\n\n192\n00:09:31.430 --> 00:09:33.530\nSo I'm gonna use that to assign my keys.\n\n193\n00:09:33.530 --> 00:09:36.820\nThat one's pretty common right now,\nwhat a lot of people default to.\n\n194\n00:09:36.820 --> 00:09:41.380\nRemember the harder an algorithm you pick,\nthe more secure it is.\n\n195\n00:09:41.380 --> 00:09:44.220\nBut the more work your name server\nis gonna have to deal with and\n\n196\n00:09:44.220 --> 00:09:46.970\nthe more work your registrar is\ngonna do to validate these, right.\n\n197\n00:09:46.970 --> 00:09:50.760\nBecause it has to generate the keys and\nhashes.\n\n198\n00:09:50.760 --> 00:09:52.430\nSo that kind of hurts performance,\n\n199\n00:09:52.430 --> 00:09:55.147\nyou don't want to go too crazy\nunless it's high security.\n\n200\n00:09:56.280 --> 00:09:59.921\nAll right, So\nI'm gonna do RSASHA256, all right.\n\n201\n00:09:59.921 --> 00:10:05.475\nSo I'll run ldns-keygen -a and\n\n202\n00:10:05.475 --> 00:10:09.049\nthen RSASHA256.\n\n203\n00:10:09.049 --> 00:10:11.509\nAnd then I need to tell it how many bits.\n\n204\n00:10:11.509 --> 00:10:14.081\nNow you have some flexibility here.\n\n205\n00:10:14.081 --> 00:10:19.484\nBut the standard that's being pushed\nright now is that you do 1,024 bits for\n\n206\n00:10:19.484 --> 00:10:24.430\nyour zone signing keys and\n2,048 bits for your key signing key.\n\n207\n00:10:24.430 --> 00:10:27.900\nSo your key signing key is more secure\nbecause that could be use to compromise\n\n208\n00:10:27.900 --> 00:10:31.760\nall your zones versus these, it could\nonly be use to compromise one zone.\n\n209\n00:10:31.760 --> 00:10:36.610\nSo it's all about benefit, what is it\ncost versus benefit return, whatever.\n\n210\n00:10:36.610 --> 00:10:40.354\nWhere we get a lot more benefit from\nhaving a stronger key on our key\n\n211\n00:10:40.354 --> 00:10:41.970\nsigning key.\n\n212\n00:10:41.970 --> 00:10:46.470\nSo I'll just do 1,024 and\nthen I tell it the zone that I'm gonna be\n\n213\n00:10:46.470 --> 00:10:51.012\nsigning minus itprotvdemo.org.\n\n214\n00:10:51.012 --> 00:10:57.350\nAll right, and so it is gonna reach in and\ngrab that and sign my key, right.\n\n215\n00:10:57.350 --> 00:11:03.120\nNow when I do this,\nI get k itprotvdemo.org and\n\n216\n00:11:03.120 --> 00:11:06.270\nthen some numbers, right and\nwhat the heck are those numbers?\n\n217\n00:11:06.270 --> 00:11:10.613\nWhat it is telling me is k,\nwhich lets me know this is a key, right?\n\n218\n00:11:10.613 --> 00:11:14.590\nAnd then itprotvdemo.org,\nthat's my domain and\n\n219\n00:11:14.590 --> 00:11:17.530\nthe next value is\nthe algorithm that I picked.\n\n220\n00:11:17.530 --> 00:11:18.800\nEight, right?\n\n221\n00:11:18.800 --> 00:11:21.970\nRemember that eight that Wes\nmentioned seeing in a record earlier.\n\n222\n00:11:21.970 --> 00:11:24.495\nThat means whoever that was picked\nSHA256 just like me, right?\n\n223\n00:11:24.495 --> 00:11:26.862\nThat's where we get\nthat number eight from.\n\n224\n00:11:26.862 --> 00:11:29.833\nAnd when I go back to hover's website and\nI look at that list,\n\n225\n00:11:29.833 --> 00:11:31.590\nit's number eight on their list.\n\n226\n00:11:31.590 --> 00:11:35.150\nSo that's how we know what number it is\nand we make sure we pick the right thing.\n\n227\n00:11:35.150 --> 00:11:40.490\nAnd then the next number 59391,\nthat is my key ID.\n\n228\n00:11:40.490 --> 00:11:44.860\nEvery key has an ID or\na tag because I might generate 10 keys.\n\n229\n00:11:44.860 --> 00:11:49.033\nAnd then rotate through them overtime or\nwhatever, so this is just the key ID.\n\n230\n00:11:49.033 --> 00:11:52.737\nI'm gonna generate three\ndifferent keys here,\n\n231\n00:11:52.737 --> 00:11:56.960\na zone signing key,\na key signing key and a DS key.\n\n232\n00:11:56.960 --> 00:12:00.950\nAnd all of them are gonna be called\nkitprotvdemo.org and then my value.\n\n233\n00:12:00.950 --> 00:12:05.850\nIf I use RSASHA256 on all of them,\nthey're all\n\n234\n00:12:05.850 --> 00:12:10.970\ngonna be my domain 008 and\nthen the ID is how I'll tell them apart.\n\n235\n00:12:10.970 --> 00:12:16.159\nSo I need to remember, park it in my mind,\nthat 59391 is my zone signing key.\n\n236\n00:12:16.159 --> 00:12:17.320\nAnd I normally write it down.\n\n237\n00:12:17.320 --> 00:12:18.549\nI don't have a pen, so\nI won't worry about it.\n\n238\n00:12:19.650 --> 00:12:20.940\nI'm sure I won't forget.\n\n239\n00:12:20.940 --> 00:12:22.590\nThat never happens.\n\n240\n00:12:22.590 --> 00:12:26.640\nAll right,\nnow I've got a key generated for my zone.\n\n241\n00:12:26.640 --> 00:12:28.630\nThat's terribly exciting.\n\n242\n00:12:28.630 --> 00:12:32.440\nAnd if I look at my folder\nhere,I'll see it made three files.\n\n243\n00:12:32.440 --> 00:12:40.670\nThe private key, the public key and\nthe DS for that delegated signer.\n\n244\n00:12:40.670 --> 00:12:44.360\nSo it's created three files for\nit that has all the information on my key.\n\n245\n00:12:44.360 --> 00:12:46.650\nNow I'm actually not gonna\nmake use of some of these.\n\n246\n00:12:46.650 --> 00:12:48.090\nBut I'll keep all three of them.\n\n247\n00:12:48.090 --> 00:12:48.730\nI generally do.\n\n248\n00:12:48.730 --> 00:12:49.890\nYou'll see people on the Internet.\n\n249\n00:12:49.890 --> 00:12:51.957\nWell, just delete the DS one\nbecause you're not gonna use that.\n\n250\n00:12:51.957 --> 00:12:55.270\nAnd we'll generate a different key for\nit for whatever reason.\n\n251\n00:12:55.270 --> 00:12:57.090\nI normally keep them all.\n\n252\n00:12:57.090 --> 00:13:01.510\nAll right, so there's the key that I\ngenerated for my zone signing key.\n\n253\n00:13:01.510 --> 00:13:04.090\nNow I'm gonna do the same thing but\nfor my key signing key.\n\n254\n00:13:04.090 --> 00:13:06.671\nNow the interesting part here is that\nthe command is almost identical.\n\n255\n00:13:06.671 --> 00:13:08.634\nSo I'm gonna bring that command back up.\n\n256\n00:13:08.634 --> 00:13:13.639\nI've got ldns-keygen -a RSASHA256\n\n257\n00:13:13.639 --> 00:13:17.794\n-b 1024 itprotvdemo.org.\n\n258\n00:13:17.794 --> 00:13:20.550\nI need to tell it to\nmake a key signing key.\n\n259\n00:13:20.550 --> 00:13:25.060\nI mentioned that it needs to be 2,048\nbits, so I'm gonna bump that up.\n\n260\n00:13:25.060 --> 00:13:26.600\nI said it needs, it doesn't have to be.\n\n261\n00:13:26.600 --> 00:13:28.832\nYou could choose something lower or\nsomething higher, but\n\n262\n00:13:28.832 --> 00:13:30.220\nthis is kind of a standard right now.\n\n263\n00:13:30.220 --> 00:13:32.850\nSo I'll do 2,048 bits.\n\n264\n00:13:32.850 --> 00:13:36.720\nIf I just press Enter,\nit's gonna make another zone signing key.\n\n265\n00:13:36.720 --> 00:13:39.030\nThe way we tell it to\nmake a key signing key,\n\n266\n00:13:39.030 --> 00:13:43.030\nis back here at the beginning we add a -k.\n\n267\n00:13:43.030 --> 00:13:49.729\nSo the full line is\nldns-keygen -k -a RSASHA256\n\n268\n00:13:49.729 --> 00:13:55.610\n-b 2048 itprotvdemo.org, right?\n\n269\n00:13:56.680 --> 00:13:57.712\nThat's my full line.\n\n270\n00:13:57.712 --> 00:14:01.520\nThe -k is really all I had to add\nif I wanted to stay at 1024 bits.\n\n271\n00:14:01.520 --> 00:14:03.910\nBut that's gonna make a key signing key.\n\n272\n00:14:03.910 --> 00:14:06.660\nWhen I run it,\nit's not gonna look much different.\n\n273\n00:14:06.660 --> 00:14:11.080\nIt did take just a hair longer,\nyou might have noticed, not much longer.\n\n274\n00:14:11.080 --> 00:14:13.434\nBut because it's 2,048 bits,\nit has to work a little harder.\n\n275\n00:14:13.434 --> 00:14:18.766\nBut now I get another key, notice at\nmy first key had an ID of 59391 and\n\n276\n00:14:18.766 --> 00:14:22.830\nthis one is 19180, it's a lower ID number.\n\n277\n00:14:22.830 --> 00:14:25.120\nThat happens when you\nrandomly generate a number.\n\n278\n00:14:25.120 --> 00:14:28.410\nSo you can't just trust the numbers,\nthat's why you need to document this down.\n\n279\n00:14:28.410 --> 00:14:31.660\nWhich one is your zone signing,\nwhich one is your key signing.\n\n280\n00:14:31.660 --> 00:14:36.410\nBut if I look at my folder now, I'll\nsee that I've got six new files, right?\n\n281\n00:14:36.410 --> 00:14:39.600\nI've got my original ones\nthat I generated here.\n\n282\n00:14:39.600 --> 00:14:40.910\nAnd now I've got these new ones.\n\n283\n00:14:40.910 --> 00:14:47.200\nThey look the same as far as I'm\nconcerned, but they are actually\n\n284\n00:14:47.200 --> 00:14:51.850\ndifferent entities, right, so\nzone signing key, key signing key.\n\n285\n00:14:51.850 --> 00:14:57.230\nOnce I've got that,\nnow it's time to actually use the keys.\n\n286\n00:14:57.230 --> 00:15:00.600\nThose commands I just ran, they generate\nthe keys when they are not in use.\n\n287\n00:15:00.600 --> 00:15:02.910\nIt didn't touch my zone at all.\n\n288\n00:15:02.910 --> 00:15:06.045\nI mentioned earlier that my zone\nis called itprotvdemo.org and\n\n289\n00:15:06.045 --> 00:15:10.360\nwe're gonna store the file\ncalled itprotvdemo.org.dns.\n\n290\n00:15:10.360 --> 00:15:13.543\nWhen we sign it,\nit's gonna create a new file and\n\n291\n00:15:13.543 --> 00:15:17.290\nthe new file is gonna be\nitprotvdemo.org.dns.sign.\n\n292\n00:15:17.290 --> 00:15:18.770\nI don't have that yet.\n\n293\n00:15:18.770 --> 00:15:20.410\nIf I look at my files.\n\n294\n00:15:20.410 --> 00:15:21.810\nWhich I just did.\n\n295\n00:15:21.810 --> 00:15:26.060\nI can see my zone file here and\nthere is no .sign version of it yet.\n\n296\n00:15:26.060 --> 00:15:29.090\nI need to use the keys I generated, right?\n\n297\n00:15:29.090 --> 00:15:33.240\nAnd to do that, well,\nI need three pieces of information.\n\n298\n00:15:33.240 --> 00:15:35.220\nI need my zone signing key.\n\n299\n00:15:35.220 --> 00:15:37.500\nI need my key signing key.\n\n300\n00:15:37.500 --> 00:15:40.150\nAnd I need a salt.\n\n301\n00:15:40.150 --> 00:15:44.133\nA salt is a random number that we feed\ninto an algorithm to make sure that when I\n\n302\n00:15:44.133 --> 00:15:46.251\ngenerate something with an algorithm,\n\n303\n00:15:46.251 --> 00:15:49.516\nI end up with a different number\nthan say Wes or somebody else.\n\n304\n00:15:49.516 --> 00:15:53.673\nIf everybody ran an algorithm and got\nthe same result, encryption wouldn't work.\n\n305\n00:15:53.673 --> 00:15:57.376\nAnd so the salt is your way of\nmaking the algorithm unique.\n\n306\n00:15:57.376 --> 00:16:00.557\nWell, if you want to make it unique,\nyou need a random number.\n\n307\n00:16:00.557 --> 00:16:03.910\nAnd people stink at\ngenerating random numbers.\n\n308\n00:16:03.910 --> 00:16:08.140\nSo there's a standard method of getting\nrandom numbers out of a machine\n\n309\n00:16:08.140 --> 00:16:10.030\nby querying /dev/random.\n\n310\n00:16:10.030 --> 00:16:15.506\nIt's the random number generator for your\nI mentioned in part one that I installed\n\n311\n00:16:15.506 --> 00:16:21.110\nthe H-A-V-E-G-E-D,\nthe HAVEGED whatever utility.\n\n312\n00:16:21.110 --> 00:16:22.930\nI don't know how to say that one.\n\n313\n00:16:22.930 --> 00:16:27.000\nThe HAVE G-E-D utility, which helps to\ngenerate entropy on a virtual machine.\n\n314\n00:16:27.000 --> 00:16:28.790\nOn a physical machine\nyou wouldn't need that.\n\n315\n00:16:28.790 --> 00:16:30.020\nBut there's no options for you.\n\n316\n00:16:30.020 --> 00:16:31.420\nYou just install it, and it's done.\n\n317\n00:16:31.420 --> 00:16:34.790\nAnd now I can go in and I can generate\nassault using standard methods.\n\n318\n00:16:34.790 --> 00:16:38.650\nI've done this in other episodes too where\nI set up like replication keys for DNS, so\n\n319\n00:16:38.650 --> 00:16:39.900\nyou've probably seen it before but\n\n320\n00:16:39.900 --> 00:16:44.470\nthe basic process is that we can\nuse the deuce duplication utility,\n\n321\n00:16:44.470 --> 00:16:50.850\nDD and for our input file we can\nfeed it slash dam slash random.\n\n322\n00:16:50.850 --> 00:16:55.220\nAnd then normally with this duplication\nwe would output it to a disk, but\n\n323\n00:16:55.220 --> 00:17:01.330\ninstead I can output this to \"/dev/stdout\"\nstandard out, in other words my screen.\n\n324\n00:17:01.330 --> 00:17:05.400\nI want to output data from\ndevrandom to my screen.\n\n325\n00:17:05.400 --> 00:17:07.420\nGive me a random number, right?\n\n326\n00:17:07.420 --> 00:17:10.550\nBut I don't want too much of a number.\n\n327\n00:17:10.550 --> 00:17:12.060\nI've only got a screen so big.\n\n328\n00:17:12.060 --> 00:17:14.190\nAnd I actually only need 16 characters.\n\n329\n00:17:14.190 --> 00:17:18.130\nWhat I really need are 16\nhexadecimal characters.\n\n330\n00:17:18.130 --> 00:17:19.860\nThat's what I need, right?\n\n331\n00:17:19.860 --> 00:17:22.850\nIf I were to just query this I\nwould need to limit it down.\n\n332\n00:17:22.850 --> 00:17:25.660\nSo I'll say count = 1 and\n\n333\n00:17:25.660 --> 00:17:29.280\nthen I can specify a block size,\nI'll do a block size of 32.\n\n334\n00:17:29.280 --> 00:17:32.430\nSo it's gonna reach in there,\ngrab that data and\n\n335\n00:17:32.430 --> 00:17:37.575\nI'll put it on my screen and, sorry,\nthe block size is actually BS.\n\n336\n00:17:37.575 --> 00:17:41.710\n[LAUGH] Somebody is gonna quote\nme that block size is BS,\n\n337\n00:17:41.710 --> 00:17:43.480\nbs=32, so let me get that correct.\n\n338\n00:17:43.480 --> 00:17:44.280\nThere we go.\n\n339\n00:17:44.280 --> 00:17:47.530\nAnd it's gonna run and\nyou see what an output right here.\n\n340\n00:17:47.530 --> 00:17:50.330\nThese are my random characters, okay.\n\n341\n00:17:50.330 --> 00:17:52.440\nBut it actually went a little bit further.\n\n342\n00:17:52.440 --> 00:17:55.580\nThe thing has apparently some\nkind of crazy character turn.\n\n343\n00:17:55.580 --> 00:17:58.340\nIt can get all sort of weird\nnumbers that come out.\n\n344\n00:17:58.340 --> 00:18:00.970\nWeird letter, characters that\ncan't render on the screen.\n\n345\n00:18:00.970 --> 00:18:03.490\nSo, I can't safely grab data out of this.\n\n346\n00:18:03.490 --> 00:18:08.280\nI mean I've got a lambda in there\nwhich is definitely not hexadecimal.\n\n347\n00:18:08.280 --> 00:18:11.060\nSo, by itself, yes, that's random.\n\n348\n00:18:11.060 --> 00:18:12.540\nBut it's too random.\n\n349\n00:18:12.540 --> 00:18:14.220\nWe need to get it kinda stabilized.\n\n350\n00:18:14.220 --> 00:18:16.468\nSo, what I'm gonna do\nis I'm gonna pipe that.\n\n351\n00:18:16.468 --> 00:18:19.449\nInto sha256sum.\n\n352\n00:18:19.449 --> 00:18:22.570\nI'm gonna take a sha256 checksum of it.\n\n353\n00:18:22.570 --> 00:18:26.750\nNow, that's gonna make it a little more\nnormal, it'll be random data going in, and\n\n354\n00:18:26.750 --> 00:18:29.230\nthen it generates that checksum, right?\n\n355\n00:18:29.230 --> 00:18:34.970\nNow, I get a nice long string\nright there and, I'm good to go.\n\n356\n00:18:34.970 --> 00:18:39.310\nNow I only need 16 characters, so\nI could count and grab the first 16.\n\n357\n00:18:39.310 --> 00:18:44.060\nBut what I normally do is just pipe\nall of that into the cut command.\n\n358\n00:18:44.060 --> 00:18:47.290\nBecause in cut,\nyou can tell it that you want\n\n359\n00:18:47.290 --> 00:18:50.420\nto get just a certain amount of\ncharacters from the beginning.\n\n360\n00:18:50.420 --> 00:18:55.070\nSo I can just say like cut,\nsorry I wanna do c 1-16, right?\n\n361\n00:18:55.070 --> 00:18:58.600\nSo just give me the first 16 characters,\nthat's all I want.\n\n362\n00:18:58.600 --> 00:19:01.980\nThe rest of it you can throw away,\nand I can run that, all right?\n\n363\n00:19:01.980 --> 00:19:05.730\nNow when I run it, whoops,\napparently my syntax is wrong,\n\n364\n00:19:05.730 --> 00:19:06.770\ncuz I got an error on that one.\n\n365\n00:19:06.770 --> 00:19:08.030\nWhat did I do wrong?\n\n366\n00:19:08.030 --> 00:19:16.390\nLet's see, cut, and it is,\nsorry it is -c 1 through 16, there we go.\n\n367\n00:19:16.390 --> 00:19:17.360\nAnd now I get 16 characters.\n\n368\n00:19:17.360 --> 00:19:21.340\nNow the neat part about this, every time\nI run it I'm gonna get a different value.\n\n369\n00:19:21.340 --> 00:19:24.010\nSo if I need to generate more salts\nI can just continue to do this.\n\n370\n00:19:24.010 --> 00:19:29.120\nSo I do this when I generate my\nreplication keys and other things.\n\n371\n00:19:29.120 --> 00:19:32.950\nThe other thing is by doing\na SHA 256 sum it is hexadecimal.\n\n372\n00:19:32.950 --> 00:19:35.850\nSo there's no characters that\nare outside of the hexadecimal range.\n\n373\n00:19:35.850 --> 00:19:36.860\nThat's nice and random.\n\n374\n00:19:36.860 --> 00:19:39.720\nIf you're running at the same time as me,\nyou're getting a different number.\n\n375\n00:19:39.720 --> 00:19:40.620\nAnd if I run it again,\n\n376\n00:19:40.620 --> 00:19:44.490\neven right here on the same machine,\nI'm gonna get something different, right?\n\n377\n00:19:44.490 --> 00:19:47.720\nIt ended in f6b6 a minute ago,\nnow it ends in 481b, right?\n\n378\n00:19:47.720 --> 00:19:52.920\nSo that's a good number, I'm gonna\ncopy that and now I've got it, right?\n\n379\n00:19:52.920 --> 00:19:56.220\nNow, if somebody gets my salt.\n\n380\n00:19:56.220 --> 00:19:58.640\nAnd they know that I\nused short [INAUDIBLE].\n\n381\n00:19:58.640 --> 00:20:01.760\nIn theory that you could use it\nto regenerate the exact same data\n\n382\n00:20:01.760 --> 00:20:03.810\nI generate and\nnow my security is compromised.\n\n383\n00:20:03.810 --> 00:20:06.660\nSo this is something that's kind of\nimportant, we want to protect this.\n\n384\n00:20:06.660 --> 00:20:08.980\nNow we are going to\ngenerate a private key.\n\n385\n00:20:08.980 --> 00:20:11.020\nAnd as soon as we have the private key,\nwe can throw [INAUDIBLE] away and\n\n386\n00:20:11.020 --> 00:20:12.100\nnever look at it again.\n\n387\n00:20:12.100 --> 00:20:13.630\nRight?\nWe just need it to generate our\n\n388\n00:20:13.630 --> 00:20:17.450\nprivate key If the private key ever\nbecomes invalid we can generate a new one.\n\n389\n00:20:17.450 --> 00:20:19.710\nWe can use a different salt then,\nit doesn't matter.\n\n390\n00:20:19.710 --> 00:20:23.270\nSo I'm going to come in and\ncreate that key now.\n\n391\n00:20:23.270 --> 00:20:26.690\nSo that last command was just\nto generate a random number.\n\n392\n00:20:26.690 --> 00:20:29.030\nYou probably could have\ndone it other ways too but\n\n393\n00:20:29.030 --> 00:20:32.310\nthat's a way to get about as\nrandom as we're going to get.\n\n394\n00:20:32.310 --> 00:20:36.950\nNow I can say LDNS -signzone.\n\n395\n00:20:36.950 --> 00:20:39.540\nI need to sign my zone file.\n\n396\n00:20:39.540 --> 00:20:41.850\nI've got my ZSK, my KSK.\n\n397\n00:20:41.850 --> 00:20:43.430\nI've got my DS generated.\n\n398\n00:20:43.430 --> 00:20:44.270\nI've got a salt.\n\n399\n00:20:44.270 --> 00:20:45.790\nI've got everything I need.\n\n400\n00:20:45.790 --> 00:20:47.690\nI just need to string\nit all together here.\n\n401\n00:20:47.690 --> 00:20:50.500\nSo the first thing I need\nto do is I need to tell\n\n402\n00:20:50.500 --> 00:20:54.220\nit that I'm going to be signing the zone,\nright?\n\n403\n00:20:54.220 --> 00:20:55.490\nAnd when I jump in and\n\n404\n00:20:55.490 --> 00:21:01.260\nspecify all this, the salt is really\nkind of the most important part.\n\n405\n00:21:01.260 --> 00:21:02.980\nSo I'm gonna jump that one in.\n\n406\n00:21:02.980 --> 00:21:06.060\nAnd I will just paste in that salt, right?\n\n407\n00:21:06.060 --> 00:21:07.505\nCopy and paste is your friend here,\n\n408\n00:21:07.505 --> 00:21:09.810\ncuz there's no way you can\nremember all this junk.\n\n409\n00:21:09.810 --> 00:21:12.190\nSo I, I've got the salt\nthat I'm feeding into it.\n\n410\n00:21:12.190 --> 00:21:14.010\nAnd then I need to tell\nit what I'm assigning.\n\n411\n00:21:14.010 --> 00:21:20.070\nI'm assigning IT Pro TV demo.org right,\nthat's the zone that I'm signing.\n\n412\n00:21:20.070 --> 00:21:24.480\nNow I need to provide it my zone\nsigning key, all right, and for\n\n413\n00:21:24.480 --> 00:21:25.990\nthe zone signing key.\n\n414\n00:21:25.990 --> 00:21:30.880\nI need to give it that, that key id\nthat we had from just moment ago.\n\n415\n00:21:30.880 --> 00:21:36.250\nSo my zone signing was five\nnine three nine one, right.\n\n416\n00:21:36.250 --> 00:21:37.745\nAnd then I need to give\nit My key signing key.\n\n417\n00:21:37.745 --> 00:21:43.000\nAnd my key signing key was 19180 and\n\n418\n00:21:43.000 --> 00:21:47.980\nI don't have those memorized what is\nactually shown on to me on another screen\n\n419\n00:21:47.980 --> 00:21:48.930\nof yours [INAUDIBLE] a lot.\n\n420\n00:21:48.930 --> 00:21:53.740\nSo I am going to punch that in and now it\nknows the key ideas to use for that, okay?\n\n421\n00:21:53.740 --> 00:21:56.230\nAnd once I have got that punched in,\nI can run it and this is going to look for\n\n422\n00:21:56.230 --> 00:21:58.260\nthat zone And it's gonna sign it for me.\n\n423\n00:21:58.260 --> 00:21:58.980\nAnd the best part,\n\n424\n00:21:58.980 --> 00:22:02.770\nit's gonna create signatures for\nevery single host inside of that file.\n\n425\n00:22:02.770 --> 00:22:05.480\nThat's why ldns-utils is so important.\n\n426\n00:22:05.480 --> 00:22:07.604\nYou can do this other ways, but there's so\n\n427\n00:22:07.604 --> 00:22:10.505\nmany signatures to generate\nthat it becomes a nightmare.\n\n428\n00:22:12.624 --> 00:22:14.330\nAll right, when I run that.\n\n429\n00:22:14.330 --> 00:22:16.810\nShoot, I forgot something important.\n\n430\n00:22:16.810 --> 00:22:22.730\nWhen you run it, I said itprotvdemo.org\nIt's actually asking for the file name.\n\n431\n00:22:22.730 --> 00:22:25.720\nAnd mine is itprotvdemo.org.dns.\n\n432\n00:22:25.720 --> 00:22:28.800\nSo I need to correct that file name and\nget that squared away.\n\n433\n00:22:28.800 --> 00:22:31.760\nAnd, you know, what if it needs\na file name for the key ID?\n\n434\n00:22:31.760 --> 00:22:32.700\nWill tell me.\n\n435\n00:22:32.700 --> 00:22:33.720\nShoot, it does.\n\n436\n00:22:33.720 --> 00:22:36.900\nSo if you look at the documentation,\nif I bothered to read the documentation,\n\n437\n00:22:36.900 --> 00:22:42.440\nit would have told me that, see how\nit's looking for itprotvdemo.org, right?\n\n438\n00:22:42.440 --> 00:22:44.000\nAnd I got a no such file or directory.\n\n439\n00:22:44.000 --> 00:22:47.050\nCause it was looking for\nyou know, without the .DNS.\n\n440\n00:22:47.050 --> 00:22:50.260\nand then after that,\nit's trying to read 59391.private.\n\n441\n00:22:50.260 --> 00:22:54.220\nI need to actually give it\nthat full key file name.\n\n442\n00:22:54.220 --> 00:22:55.038\nAnd if I look.\n\n443\n00:22:55.038 --> 00:22:57.870\nI have 593.1.private,\n\n444\n00:22:57.870 --> 00:23:00.740\nit's just all the stuff from\nthe beginning that I need to provide.\n\n445\n00:23:00.740 --> 00:23:02.990\nIt kind of needs to know\nthe algorithm that I chose, and so\n\n446\n00:23:02.990 --> 00:23:03.680\nI didn't include that.\n\n447\n00:23:03.680 --> 00:23:06.930\nFortunately, it's the same for all of me,\nso again I can copy and paste that.\n\n448\n00:23:06.930 --> 00:23:09.150\nI'm gonna make this command nice and long.\n\n449\n00:23:11.610 --> 00:23:15.050\nSo I'm just gonna add that\nto my zone signing key.\n\n450\n00:23:15.050 --> 00:23:16.750\nAnd to my key signing key.\n\n451\n00:23:16.750 --> 00:23:19.490\nSo now it's got the proper\nzone filename and\n\n452\n00:23:19.490 --> 00:23:22.870\nit's got the two keys that it\nneeds to be able to sign it.\n\n453\n00:23:22.870 --> 00:23:28.050\nAnd when I run that i may run really fast,\nit may run really slow.\n\n454\n00:23:28.050 --> 00:23:31.210\nIt depends on how big your zone is\ncuz it's gotta go and generate all\n\n455\n00:23:31.210 --> 00:23:36.170\nthis signatures and when it's done,\nyou don't get a lot of fanfare, right?\n\n456\n00:23:36.170 --> 00:23:39.050\nBut, hopefully, it executes for you.\n\n457\n00:23:39.050 --> 00:23:44.082\nAnd what you're left with is a file\nthat matches your zone name,\n\n458\n00:23:44.082 --> 00:23:46.605\nbut ends in Dot signed, right?\n\n459\n00:23:46.605 --> 00:23:51.900\nSo now I've got itprotvdemo.org.dns, and\nthen I've got itprotvdemo.org.dns.signed.\n\n460\n00:23:51.900 --> 00:23:53.571\nThat's what I want, right?\n\n461\n00:23:53.571 --> 00:23:58.405\nAnd if I look inside of it, it's kind of\ninteresting because it is gonna have just\n\n462\n00:23:58.405 --> 00:24:00.549\na bunch of extra stuff inside of it.\n\n463\n00:24:00.549 --> 00:24:04.220\nIf I edit it which you\nshouldn't change the file.\n\n464\n00:24:04.220 --> 00:24:07.750\nIf you change the file it's going\nto damage the signatures, right?\n\n465\n00:24:07.750 --> 00:24:09.000\nSo I can't make any changes but\n\n466\n00:24:09.000 --> 00:24:11.890\nI can still use vi to edit it cuz\nI wanna change the word wrapping.\n\n467\n00:24:11.890 --> 00:24:14.990\nYou'll see,\nit'll be a mess when I open it up.\n\n468\n00:24:14.990 --> 00:24:20.110\nIt is still plain text,\nit's got signatures\n\n469\n00:24:20.110 --> 00:24:23.720\nall over the place and they wrap around\nthe screen and it makes a giant mess.\n\n470\n00:24:23.720 --> 00:24:28.520\nSo what I'm gonna do is in,\nthe reason I'm in them is I can do a set,\n\n471\n00:24:28.520 --> 00:24:29.670\nwrap, exclamation point.\n\n472\n00:24:29.670 --> 00:24:32.080\nI can turn off the wrap and\nnow we can actually read it.\n\n473\n00:24:32.080 --> 00:24:33.830\nNow, looks like a zone file, right.\n\n474\n00:24:33.830 --> 00:24:38.746\nAnd what you'll see is that every\nrecord you have, you now have two of.\n\n475\n00:24:38.746 --> 00:24:44.070\nSo I had a record for DNS 1,\nthat itprotvdemo.org right there, right?\n\n476\n00:24:44.070 --> 00:24:47.550\nThere's that record and\nit's an A record that points to this IP.\n\n477\n00:24:47.550 --> 00:24:52.480\nIt's stored right here in plain text, and\nthen right after it, I have an RR sig.\n\n478\n00:24:52.480 --> 00:24:55.510\nThere's my signature, right,\nand the signature for\n\n479\n00:24:55.510 --> 00:24:58.010\nthis one, it's still an A record.\n\n480\n00:24:58.010 --> 00:25:00.035\nAnd it's got 8, 3.\n\n481\n00:25:00.035 --> 00:25:04.639\n8 is my hashing algorithm and\n3 is my digest algorithm.\n\n482\n00:25:04.639 --> 00:25:08.050\nNow I chose shot 256 for both of them.\n\n483\n00:25:08.050 --> 00:25:10.911\nBut they're different numbers just because\nthe protocols that are supporters.\n\n484\n00:25:10.911 --> 00:25:14.610\nSo, 8 and 3,\nthat's telling me what I picked.\n\n485\n00:25:14.610 --> 00:25:17.180\nAnd then I see my time to live.\n\n486\n00:25:17.180 --> 00:25:20.910\nFollowed by the actual\nsignature kind of beyond that.\n\n487\n00:25:20.910 --> 00:25:27.660\nSo if I kind of scroll along further and\nmove along, there we go.\n\n488\n00:25:27.660 --> 00:25:32.200\nI start to get into the signature\nvalues right here and\n\n489\n00:25:32.200 --> 00:25:34.560\nso here it is, the signature for\nthis one and it will go on and on.\n\n490\n00:25:34.560 --> 00:25:37.990\nI'm not going to scroll all the way to\nthe end but it lays it out right there.\n\n491\n00:25:37.990 --> 00:25:40.820\nSo it's all kind of tucked in here and\n\n492\n00:25:40.820 --> 00:25:44.850\nmy zone file is far different\nthan it used to be, right?\n\n493\n00:25:44.850 --> 00:25:46.000\nBecause every record is signed.\n\n494\n00:25:46.000 --> 00:25:49.680\nAnd if I mess with any of them, it breaks\nthat signature and does not work anymore.\n\n495\n00:25:49.680 --> 00:25:50.370\nAll right.\n\n496\n00:25:50.370 --> 00:25:53.430\nSo let me get out of that.\n\n497\n00:25:53.430 --> 00:25:57.590\nNow that it's all nice and\nsigned, I'm almost done, right?\n\n498\n00:25:57.590 --> 00:25:59.900\nI need to tell my server to use it,\nthough.\n\n499\n00:25:59.900 --> 00:26:04.480\nMy server, NSD,\nis looking at itprotvdemo.org.dns,\n\n500\n00:26:04.480 --> 00:26:07.460\nand that doesn't have signatures in it.\n\n501\n00:26:07.460 --> 00:26:11.024\nSo I need to reconfigure my\nserver to look at this one,\n\n502\n00:26:11.024 --> 00:26:13.808\nthe one that's signed instead, right?\n\n503\n00:26:13.808 --> 00:26:18.542\nSo I'm gonna edit /etc/nsd/nsd.conf And\n\n504\n00:26:18.542 --> 00:26:24.930\nI'm gonna go in there and\nfind my zone definition, right?\n\n505\n00:26:24.930 --> 00:26:27.292\nAnd this looks a little different\nthan part one because I set up\n\n506\n00:26:27.292 --> 00:26:28.190\nreplication, right.\n\n507\n00:26:28.190 --> 00:26:30.400\nIn part one I didn't have\nreplication in place and so\n\n508\n00:26:30.400 --> 00:26:33.520\nnow you'll see where I've got\nmy key defined for replication.\n\n509\n00:26:33.520 --> 00:26:35.572\nAnd well,\nI highlight really doesn't help, does it.\n\n510\n00:26:35.572 --> 00:26:38.413\nBut you can see the key I generated for\nreplication, and\n\n511\n00:26:38.413 --> 00:26:40.030\nthe other person that I set up.\n\n512\n00:26:40.030 --> 00:26:41.970\nBut the key, or not the key, but\n\n513\n00:26:41.970 --> 00:26:44.300\nthe important part here is\nthe zone down at the bottom.\n\n514\n00:26:44.300 --> 00:26:46.640\nHere's the zone, itprotvdemo.org.\n\n515\n00:26:46.640 --> 00:26:50.368\nAnd the file that it's pointing to,\nitprotvdemo.org.dns.\n\n516\n00:26:50.368 --> 00:26:56.190\nAnd I'm just gonna come in here and\nI'm gonna add to that .signed.\n\n517\n00:26:56.190 --> 00:26:59.296\nSo now it's gonna use the signed\nversion of that file.\n\n518\n00:26:59.296 --> 00:27:04.134\nAnd all the replication is still there, so\nit will replicate to the other side and\n\n519\n00:27:04.134 --> 00:27:06.570\nit will get the signed one, too.\n\n520\n00:27:06.570 --> 00:27:08.450\nNow it won't change its file\nname on the other side.\n\n521\n00:27:08.450 --> 00:27:09.780\nIt's just whatever it's set at right now.\n\n522\n00:27:09.780 --> 00:27:12.660\nIn fact, it's usually just stored\nin RAM not even on the file system.\n\n523\n00:27:12.660 --> 00:27:14.685\nBut the other side, the other,\n\n524\n00:27:14.685 --> 00:27:18.437\nthe slave system will have all\nthe signatures just ike I do.\n\n525\n00:27:18.437 --> 00:27:20.170\nSo let me get out and save that.\n\n526\n00:27:20.170 --> 00:27:27.040\nThe cool part about of that is, my server\nis now looking at itvprotv.org.dns.signed.\n\n527\n00:27:27.040 --> 00:27:31.763\nI can go and edit itprotvdemo.org\nto my heart's content,\n\n528\n00:27:31.763 --> 00:27:34.800\nitprotvdemo.org.dns, that one.\n\n529\n00:27:34.800 --> 00:27:37.547\nYou edit it and then you resign it.\n\n530\n00:27:37.547 --> 00:27:40.550\nAnd when you resign it,\nit generates a new .signed file and\n\n531\n00:27:40.550 --> 00:27:42.722\nthe server's configured to look at that.\n\n532\n00:27:42.722 --> 00:27:46.237\nAnd so you never edit the .sign when\nyou're always editing that unencrypted\n\n533\n00:27:46.237 --> 00:27:49.873\none, and Iit just regenerates it, and\nyou do that every time you make a change.\n\n534\n00:27:49.873 --> 00:27:53.980\n&gt;&gt; Don, does that overwrite\nthe prior signed DNS zone file?\n\n535\n00:27:53.980 --> 00:27:55.090\nSo when you generate a new one,\n\n536\n00:27:55.090 --> 00:27:57.070\nyou don't have to worry about\nduplicates being in the list?\n\n537\n00:27:57.070 --> 00:27:58.915\n&gt;&gt; Absolutely.\nYep, it overwrites it cuz it's the same\n\n538\n00:27:58.915 --> 00:27:59.820\nfile name.\n\n539\n00:27:59.820 --> 00:28:04.620\nAnd remember that the actual workflow\nwould be, edit the non-signed file.\n\n540\n00:28:04.620 --> 00:28:06.460\nSo you edit the original file.\n\n541\n00:28:06.460 --> 00:28:09.019\nYou increase your serial number,\nright, by at least one.\n\n542\n00:28:09.019 --> 00:28:10.460\nYou've got to bump up that serial number.\n\n543\n00:28:10.460 --> 00:28:13.100\nThat's important, and then you resign it.\n\n544\n00:28:14.110 --> 00:28:19.240\nThen, on your server, you can do an SD\ncontrol reload and have it reload\n\n545\n00:28:19.240 --> 00:28:23.610\nthat zone or you can just restart in SD,\nwhichever one works in your environment.\n\n546\n00:28:23.610 --> 00:28:25.740\nIf you want zero downtime,\nyou reload the zone.\n\n547\n00:28:25.740 --> 00:28:29.440\nAnd when you reload the zone,\nnow the new signatures are loaded,\n\n548\n00:28:29.440 --> 00:28:32.700\nyour changes are loaded, and\nthe new serial numbers are loaded.\n\n549\n00:28:32.700 --> 00:28:35.004\nSo, the replica sees the new\nserial numbers, and says, oop,\n\n550\n00:28:35.004 --> 00:28:36.250\ngive me a copy of that.\n\n551\n00:28:36.250 --> 00:28:38.170\nAnd now it's got all the latest data, too.\n\n552\n00:28:38.170 --> 00:28:39.760\nSo it's all a part of that process.\n\n553\n00:28:41.020 --> 00:28:44.440\nOkay, my server is done, this server.\n\n554\n00:28:44.440 --> 00:28:46.410\nI need to double check it to\nmake sure it's working though.\n\n555\n00:28:47.480 --> 00:28:50.260\nI say it's not, I never actually\ndid reload the darn thing, did I?\n\n556\n00:28:50.260 --> 00:28:55.140\nIf you look at NSD-control, you'll see\nwhere you've got in here where you can\n\n557\n00:28:55.140 --> 00:28:59.780\ntell it to do a reconfig and a reload.\n\n558\n00:28:59.780 --> 00:29:03.470\nReload or reload an individual zone,\nmy zone file definitely changed.\n\n559\n00:29:03.470 --> 00:29:07.050\nReconfig will reload the configuration.\n\n560\n00:29:07.050 --> 00:29:08.050\nWell that changed for me, too,\n\n561\n00:29:08.050 --> 00:29:11.130\ncuz I had to change to the .signed\nfile in the server config.\n\n562\n00:29:11.130 --> 00:29:12.810\nSo I kinda need both.\n\n563\n00:29:12.810 --> 00:29:15.850\nAnd a reconfig will likely\ndo everything that I need or\n\n564\n00:29:15.850 --> 00:29:17.750\nI can just restart NSD again.\n\n565\n00:29:17.750 --> 00:29:19.420\nAll those methods work.\n\n566\n00:29:19.420 --> 00:29:25.940\nBut if I wanna do a NSD\ncontrol [LAUGH] there we go,\n\n567\n00:29:25.940 --> 00:29:31.640\nand then do a reconfig, that's gonna tell\nit to reload the server configuration,\n\n568\n00:29:31.640 --> 00:29:34.910\nso now it's looking at the signed file.\n\n569\n00:29:34.910 --> 00:29:38.693\nAnd it should have picked it up and\nupdated my cache, but\n\n570\n00:29:38.693 --> 00:29:44.840\njust in case it didn't, I'm going to\ncome in and say reload itprotvdemo.org.\n\n571\n00:29:44.840 --> 00:29:47.230\nAnd that way I know it's reloaded it.\n\n572\n00:29:47.230 --> 00:29:50.500\nAnd now I can test by doing a dig, right?\n\n573\n00:29:50.500 --> 00:29:53.540\nSo way back in my history,\n\n574\n00:29:53.540 --> 00:29:59.540\nI did a dig against itprotvdemo\nto see if it had a signature.\n\n575\n00:29:59.540 --> 00:30:01.550\nAnd when I redo that.\n\n576\n00:30:01.550 --> 00:30:04.357\nHang on, let me, let me see if I can't\nget this word wrap a little straight.\n\n577\n00:30:04.357 --> 00:30:05.440\nThere we go.\n\n578\n00:30:05.440 --> 00:30:10.760\nSo when I rerun that command, I can see\nhere that it reaches out to the server,\n\n579\n00:30:10.760 --> 00:30:16.565\nso I did dig@127.0.0.1, so\nI'm doing a lookup against this server.\n\n580\n00:30:16.565 --> 00:30:21.760\nitprotvdemo.org, I'm looking for that\ndomain, and I'm asking for the DNS key.\n\n581\n00:30:21.760 --> 00:30:27.610\nAnd before, I got IN DNSKEY and nothing.\n\n582\n00:30:27.610 --> 00:30:31.630\nNow I get IN DNSKEY and\nthen an answer section.\n\n583\n00:30:31.630 --> 00:30:34.350\nAnd here I can see that\nkey laid out right here.\n\n584\n00:30:34.350 --> 00:30:38.111\nYou know, I've got my keys in place and\nsure enough, like in part one,\n\n585\n00:30:38.111 --> 00:30:41.135\nmy key ideas have been moved\ndown here instead of up here.\n\n586\n00:30:41.135 --> 00:30:42.919\nAnd I've got 256, 257, interesting.\n\n587\n00:30:42.919 --> 00:30:46.180\nSo anyhow, I've got my key id which\nI can clearly read right there.\n\n588\n00:30:46.180 --> 00:30:48.700\nThere's my zone signing key and\nmy key signing key.\n\n589\n00:30:48.700 --> 00:30:51.390\nAnd the key is stored in that one.\n\n590\n00:30:51.390 --> 00:30:53.510\nThat's my public key not the private key.\n\n591\n00:30:53.510 --> 00:30:56.310\nThe private key is stored\nright here on my hard drive.\n\n592\n00:30:56.310 --> 00:30:57.160\nRight, those files,\n\n593\n00:30:57.160 --> 00:31:00.770\nI don't want someone to get those cuz then\nthey can start signing zones on my behalf.\n\n594\n00:31:00.770 --> 00:31:02.120\nYou don't want that, right?\n\n595\n00:31:02.120 --> 00:31:03.210\nBut this is the public key.\n\n596\n00:31:03.210 --> 00:31:05.390\nThis is the one we do hand out, all right?\n\n597\n00:31:05.390 --> 00:31:06.970\nSo I know that's working.\n\n598\n00:31:06.970 --> 00:31:08.810\nI need to check on my other server and\n\n599\n00:31:08.810 --> 00:31:13.140\nmake sure that it's able to see that cuz\nit's gonna replicate over to this side,\n\n600\n00:31:13.140 --> 00:31:17.450\ntoo, and I'll query it and\nit's already got it, right?\n\n601\n00:31:17.450 --> 00:31:20.680\nI didn't even have to come over here and\ndo a pull cuz I had notify set up on my\n\n602\n00:31:20.680 --> 00:31:24.480\nreplication so it's already got it and\nnow it's signed over here too, right?\n\n603\n00:31:24.480 --> 00:31:27.215\nSo I didn't configure\na single thing on DNS2,\n\n604\n00:31:27.215 --> 00:31:31.440\nthe replica zone carried\neverything over with it, right?\n\n605\n00:31:31.440 --> 00:31:35.000\nIf I reran those same commands on this\none, it would have a different key.\n\n606\n00:31:35.000 --> 00:31:37.580\nIt would have a different salt,\nall of the signatures would be different,\n\n607\n00:31:37.580 --> 00:31:40.280\nit would break everything so\nit's important to use replication.\n\n608\n00:31:40.280 --> 00:31:43.826\nAll right, as far as my servers\nare concerned, they're done but\n\n609\n00:31:43.826 --> 00:31:47.256\nnow it's time for the registrar,\nthis is the important part.\n\n610\n00:31:47.256 --> 00:31:50.297\nSo on the registrar side,\n\n611\n00:31:50.297 --> 00:31:56.254\nwhat I need to do is generate\na deligate signer key.\n\n612\n00:31:56.254 --> 00:31:57.729\nAnd I haven't done that yet.\n\n613\n00:31:57.729 --> 00:32:00.736\nLet me get on the right server\nhere before I screw that up.\n\n614\n00:32:00.736 --> 00:32:07.277\nI've got my zone signing key,\nwhich is that 59391.\n\n615\n00:32:07.277 --> 00:32:10.820\nAnd I've got my zone signing,\nother way around, key signing key.\n\n616\n00:32:10.820 --> 00:32:13.420\nSee how easy it is to mix this stuff up.\n\n617\n00:32:13.420 --> 00:32:16.870\nMy key signing key is 19180.\n\n618\n00:32:16.870 --> 00:32:19.200\nI need to make a ds key.\n\n619\n00:32:19.200 --> 00:32:21.460\nOne that I can send up to my registrar.\n\n620\n00:32:21.460 --> 00:32:23.190\nSo I've got a quick command for that one.\n\n621\n00:32:23.190 --> 00:32:25.560\nThis is another ldns command.\n\n622\n00:32:25.560 --> 00:32:28.437\nAnd I'm gonna do ldns-key2ds.\n\n623\n00:32:28.437 --> 00:32:31.850\nIt's important that we\n\n624\n00:32:31.850 --> 00:32:35.110\nrun this from inside of\nthe directory that has the files,\n\n625\n00:32:35.110 --> 00:32:38.270\ncoz this is gonna be looking for\nthis stuff to be able to sign this right.\n\n626\n00:32:38.270 --> 00:32:41.480\nBut I'm gonna create\nthe ds key right here.\n\n627\n00:32:41.480 --> 00:32:46.680\nSo ldns-key2ds, and\nthen I need to tell it what I want to do.\n\n628\n00:32:46.680 --> 00:32:48.860\nNow by default, it's not gonna\nshow me a lot of information,\n\n629\n00:32:48.860 --> 00:32:50.250\nit expects to write it to a file.\n\n630\n00:32:50.250 --> 00:32:52.080\nI want it to show me on the screen,\ncuz I'm gonna cut and\n\n631\n00:32:52.080 --> 00:32:53.530\npaste it into my registrar.\n\n632\n00:32:53.530 --> 00:32:56.760\nSo I'm gonna do -n, so\nit shows it on the screen.\n\n633\n00:32:56.760 --> 00:32:59.270\nAnd then I need to tell it\nthe algorithm I'm gonna use.\n\n634\n00:32:59.270 --> 00:33:05.390\nWell ldns-key2ds only supports\ntwo algorithms, SHA1 and SHA286.\n\n635\n00:33:05.390 --> 00:33:07.890\nBy the time you watch this\nepisode it might support more, so\n\n636\n00:33:07.890 --> 00:33:09.930\ncheck the man file on it\nsee if they added more.\n\n637\n00:33:09.930 --> 00:33:14.419\nThey will show up in there\nif do a man ldns-key2ds.\n\n638\n00:33:14.419 --> 00:33:19.350\nIn the documentation,\nsee how it tells me right here?\n\n639\n00:33:19.350 --> 00:33:20.350\nSHA1, SHA2, D6, and that's it.\n\n640\n00:33:20.350 --> 00:33:23.050\nCheck and\nsee if they've added new ones since then.\n\n641\n00:33:23.050 --> 00:33:24.210\nAnd they might have them.\n\n642\n00:33:24.210 --> 00:33:26.340\nWhen I put this stuff on my registrar,\nremember.\n\n643\n00:33:26.340 --> 00:33:28.590\nHover, they had Ghost and SHA384.\n\n644\n00:33:28.590 --> 00:33:29.120\nIt's not here.\n\n645\n00:33:30.250 --> 00:33:31.100\nI can't do that.\n\n646\n00:33:31.100 --> 00:33:33.590\nSo those are not gonna be an option for\nme.\n\n647\n00:33:33.590 --> 00:33:38.000\nSo I'm gonna come in and run this And so\n\n648\n00:33:38.000 --> 00:33:42.150\nI'm gonna tell it not to a file, but\ndisplay on my screen instead, and -2.\n\n649\n00:33:42.150 --> 00:33:43.670\nI do want to do SHA-256.\n\n650\n00:33:43.670 --> 00:33:47.240\nI'm gonna take the best I can get.\n\n651\n00:33:47.240 --> 00:33:52.030\nAnd then I'm gonna point it to\nitprotvdemo.org.dns.signed.\n\n652\n00:33:52.030 --> 00:33:56.420\nI need to point at that signed file.\n\n653\n00:33:56.420 --> 00:34:00.260\nIt's gonna calculate a delicate signature\n\n654\n00:34:00.260 --> 00:34:03.640\nbased on the signed file\nthat I created right now.\n\n655\n00:34:03.640 --> 00:34:04.420\nOkay.\n\n656\n00:34:04.420 --> 00:34:09.150\nAnd so it's gonna generate that,\nbecause the public keys for\n\n657\n00:34:09.150 --> 00:34:14.500\nthe zone signing key and the a key\nascending key are both in there, right?\n\n658\n00:34:14.500 --> 00:34:18.360\nNow as I change my zone,\nas I change the records, and I resign it.\n\n659\n00:34:18.360 --> 00:34:20.410\nThe record signatures will change.\n\n660\n00:34:20.410 --> 00:34:23.200\nBut the zone signing key and\nthe key signing key won't change.\n\n661\n00:34:23.200 --> 00:34:25.730\nAnd so it's just pulling\nthem out of that file and\n\n662\n00:34:25.730 --> 00:34:28.120\nbuilding a new key based off of it.\n\n663\n00:34:28.120 --> 00:34:31.110\nAnd it's gonna take that data,\ndisplay it on my screen for me, and\n\n664\n00:34:31.110 --> 00:34:33.230\nfrom there I can load it up for registrar.\n\n665\n00:34:33.230 --> 00:34:35.910\nAnd I won't have to change that on the\nregistrar again unless I think something's\n\n666\n00:34:35.910 --> 00:34:37.510\ngotten compromised.\n\n667\n00:34:37.510 --> 00:34:39.930\nBut, the important thing\nhere is when I look at it,\n\n668\n00:34:39.930 --> 00:34:45.640\nI can see the information about the key\nID, that 19180 that it pulled in.\n\n669\n00:34:45.640 --> 00:34:49.060\nI can see the 8 and\n2 that tell the algorithm and digest.\n\n670\n00:34:49.060 --> 00:34:53.570\nAnd then lastly, I can see the actual\nsignature that it generated.\n\n671\n00:34:53.570 --> 00:34:54.660\nSo I need that signature.\n\n672\n00:34:54.660 --> 00:34:55.329\nI'm gonna copy that.\n\n673\n00:34:56.620 --> 00:34:58.310\nNow comes the fun part, right?\n\n674\n00:34:58.310 --> 00:35:01.800\nNow I've gotta jump over and\ntake this to my registrar.\n\n675\n00:35:01.800 --> 00:35:03.650\nAnd this is where it gets\na little different, so\n\n676\n00:35:03.650 --> 00:35:06.930\nI'm using hover, you might be using\nsomething completely different.\n\n677\n00:35:06.930 --> 00:35:09.770\nSo you'll have to check\nout their documentation.\n\n678\n00:35:09.770 --> 00:35:12.740\nBut in Hover, they give me nice,\neasy fields, right?\n\n679\n00:35:12.740 --> 00:35:16.010\nI need my key tag, and\nmy key tag was 19 180.\n\n680\n00:35:16.010 --> 00:35:18.950\nRight, it matches my key signing key.\n\n681\n00:35:18.950 --> 00:35:20.650\nThen my algorithm.\n\n682\n00:35:20.650 --> 00:35:24.142\nMy algorithm was 8, RSA/SHA-256.\n\n683\n00:35:24.142 --> 00:35:24.930\nRight?\n\n684\n00:35:24.930 --> 00:35:29.620\nMy digest algorithm was SHA-256,\nand so I can pick that.\n\n685\n00:35:29.620 --> 00:35:32.840\nNow they don't show me 1, 2, whatever\nhere, so that's a little annoying,\n\n686\n00:35:32.840 --> 00:35:36.220\nbut I know mine was 256,\nso I've paid attention.\n\n687\n00:35:36.220 --> 00:35:39.860\nAnd then lastly, they want the digest and\nthat's what we just generated.\n\n688\n00:35:39.860 --> 00:35:42.240\nSo I'm gonna paste right in there,\nall right.\n\n689\n00:35:42.240 --> 00:35:49.340\nNow, Hover told me that they don't support\nDNS sec with their own DNS servers.\n\n690\n00:35:49.340 --> 00:35:53.170\nSo they let me,\nprovide my own DNS servers, right?\n\n691\n00:35:53.170 --> 00:35:56.470\nBut they do support DNS-ek\non their registrar side.\n\n692\n00:35:56.470 --> 00:35:57.730\nAnd so that's what I just did.\n\n693\n00:35:57.730 --> 00:36:01.110\nI just put the delegate\nsigner data right here.\n\n694\n00:36:01.110 --> 00:36:05.930\nAnd when somebody queries one of my\nrecords, and they get a signature and\n\n695\n00:36:05.930 --> 00:36:08.300\nthey want to validate if it's real or not,\n\n696\n00:36:08.300 --> 00:36:13.370\nthey can come all the way up to my\nregistrar and they can take the public key\n\n697\n00:36:13.370 --> 00:36:18.300\nthat it hands out and use that to\nvalidate the zone signing key and\n\n698\n00:36:18.300 --> 00:36:22.370\nto validate the individual records and\nmake sure they haven't been tampered with.\n\n699\n00:36:22.370 --> 00:36:26.250\nAnd that process is now facilitated\nby having that right there.\n\n700\n00:36:26.250 --> 00:36:27.670\nAnd I'm just gonna hit Save.\n\n701\n00:36:27.670 --> 00:36:28.600\nAnd that's gonna go in place.\n\n702\n00:36:28.600 --> 00:36:31.360\nNow I'm making a change to my registrar.\n\n703\n00:36:31.360 --> 00:36:35.450\nAnd let me tell you changes on a registrar\nthey can take up to 72 hours to apply.\n\n704\n00:36:35.450 --> 00:36:38.570\nIt's got to propagate out to\nthe internet and all that stuff but\n\n705\n00:36:38.570 --> 00:36:42.660\nin my case because I didn't have any keys\nin there in the first place it'll probably\n\n706\n00:36:42.660 --> 00:36:47.620\npropagate pretty quick, right,\nand the DNS key has to come from\n\n707\n00:36:47.620 --> 00:36:50.930\nthe registrar because otherwise somebody\ncould spoof it in a cache somewhere else.\n\n708\n00:36:50.930 --> 00:36:56.670\nThese don't get cached and so\nas long as my records are updated, and\n\n709\n00:36:56.670 --> 00:37:00.750\nas long as hover does a good job updating\ntheir registered data base which they do,\n\n710\n00:37:00.750 --> 00:37:02.800\nthis should take effect pretty quick.\n\n711\n00:37:02.800 --> 00:37:04.470\nBut the official lines it could 72 hours.\n\n712\n00:37:05.540 --> 00:37:08.140\nSo how do I know if it worked?\n\n713\n00:37:08.140 --> 00:37:08.680\nRight.\n\n714\n00:37:08.680 --> 00:37:09.410\nTechnically we're done.\n\n715\n00:37:09.410 --> 00:37:12.620\nWe just setup DNS set, we,\nend of the episode and walk away.\n\n716\n00:37:12.620 --> 00:37:13.320\nRight.\n\n717\n00:37:13.320 --> 00:37:15.190\nBut we do need a test and\nverify that it's working.\n\n718\n00:37:15.190 --> 00:37:16.790\nIt's just this part you\nmight have to wait awhile.\n\n719\n00:37:16.790 --> 00:37:19.470\nLet's see if it's working already.\n\n720\n00:37:19.470 --> 00:37:22.650\nSo I'm gonna jump over to one\nof my servers to test it out.\n\n721\n00:37:22.650 --> 00:37:26.800\nTo test it out you can\nuse the dig command.\n\n722\n00:37:26.800 --> 00:37:27.400\nRight.\n\n723\n00:37:27.400 --> 00:37:29.600\nAnd I can dig against\none of my servers but\n\n724\n00:37:29.600 --> 00:37:32.910\nit's better to dig against\na public server out there, right.\n\n725\n00:37:32.910 --> 00:37:35.920\nSo I'll take like Google.\n\n726\n00:37:35.920 --> 00:37:37.800\nAnd look to them.\n\n727\n00:37:37.800 --> 00:37:43.510\nAnd I'll try and look up the DS record for\nitprotvdemo.org.\n\n728\n00:37:43.510 --> 00:37:47.705\nIn fact, let me take one that\nI know doesn't work, right?\n\n729\n00:37:47.705 --> 00:37:48.930\nItprotvdemo.com.\n\n730\n00:37:48.930 --> 00:37:50.700\nWe don't have dnssec turned on for that.\n\n731\n00:37:50.700 --> 00:37:53.880\nSo if I run that, it's going to reach out.\n\n732\n00:37:53.880 --> 00:37:56.540\nI see that it reached out for a DS record.\n\n733\n00:37:56.540 --> 00:37:59.040\nAnd there's no answer section afterwards.\n\n734\n00:37:59.040 --> 00:38:01.740\nAnd it just goes right into\nthe authority and that;s the end of it.\n\n735\n00:38:01.740 --> 00:38:04.856\nLet's do the same thing for .org.\n\n736\n00:38:04.856 --> 00:38:06.370\nAnd this one should work.\n\n737\n00:38:06.370 --> 00:38:09.190\nSo in anticipation of that\nI'm gonna add the +mulitiline\n\n738\n00:38:09.190 --> 00:38:10.990\njust to make it look a little neater.\n\n739\n00:38:10.990 --> 00:38:13.630\nAnd when I reach out to them, I get\n\n740\n00:38:14.910 --> 00:38:20.520\nthe DS record followed by an answer\nsection and right there I can see,\n\n741\n00:38:20.520 --> 00:38:25.810\nkey ID followed by algorithm and\ndigest followed by the actual\n\n742\n00:38:25.810 --> 00:38:30.810\ndigest after that and that is coming\nright from hover not from my DNS server,\n\n743\n00:38:30.810 --> 00:38:33.860\nso that is the secret sauce for\nall of this, that's what makes this work.\n\n744\n00:38:33.860 --> 00:38:36.100\nIs that the value is coming\nfrom two different places.\n\n745\n00:38:36.100 --> 00:38:39.840\nSo if the hackers poison\nthe cache of my zone,\n\n746\n00:38:39.840 --> 00:38:42.460\nthey haven't messed with\nmy register records.\n\n747\n00:38:42.460 --> 00:38:42.990\nRight.\n\n748\n00:38:42.990 --> 00:38:43.810\nThey're different.\n\n749\n00:38:43.810 --> 00:38:49.320\nThey would have to compromise both places,\nin order to actually exploit my zone now.\n\n750\n00:38:49.320 --> 00:38:50.230\nMy zone is safe.\n\n751\n00:38:50.230 --> 00:38:53.040\nIf the cache gets poisoned,\nthe cache just gets thrown away and\n\n752\n00:38:53.040 --> 00:38:55.280\nit does a new look up and\nit gets the right value.\n\n753\n00:38:55.280 --> 00:39:00.450\nSo this effectively stops DNS cache\npoisoning if we have DNS sec enabled.\n\n754\n00:39:00.450 --> 00:39:02.880\nAnd if the clients\nare bothering the check for it.\n\n755\n00:39:02.880 --> 00:39:05.570\nIf you got the DNS server\nthat's not gonna check for it,\n\n756\n00:39:05.570 --> 00:39:06.920\nthen it doesn't matter that\nall the stuff is here.\n\n757\n00:39:06.920 --> 00:39:10.580\nIt's just gonna ignore the ds and the\nother records, they're not gonna get used.\n\n758\n00:39:12.130 --> 00:39:14.690\nBut I can see right here it's\npulling off my registrar.\n\n759\n00:39:14.690 --> 00:39:15.440\nI'm now good to go.\n\n760\n00:39:15.440 --> 00:39:18.280\nI have a DNSsec enabled zone.\n\n761\n00:39:18.280 --> 00:39:19.930\nAnd anybody looking up a record,\n\n762\n00:39:19.930 --> 00:39:24.490\nlike looking up www.itprotvdemo.org,\nthey will get the signature, and\n\n763\n00:39:24.490 --> 00:39:28.270\nthey'll be able to verify and\ntest that and see whether it works.\n\n764\n00:39:28.270 --> 00:39:31.290\n&gt;&gt; Lot of great information Don there,\nlot of steps to follow.\n\n765\n00:39:31.290 --> 00:39:34.120\nNow it does look like we're coming\nto the end of another episode but\n\n766\n00:39:34.120 --> 00:39:35.930\nDon you've shown us a lot of stuff here.\n\n767\n00:39:35.930 --> 00:39:38.970\nIs there any additional things you might\nwanna throw in here before we call it\n\n768\n00:39:38.970 --> 00:39:39.850\nquits on this one?\n\n769\n00:39:39.850 --> 00:39:41.090\n&gt;&gt; Let me show you one more thing.\n\n770\n00:39:41.090 --> 00:39:43.060\nAs far as configuring\nthe server we're done,\n\n771\n00:39:43.060 --> 00:39:45.120\nI don't really have much\nelse to show you there.\n\n772\n00:39:45.120 --> 00:39:48.175\nBut I do want to show you a quick\nway of test whether this is working,\n\n773\n00:39:48.175 --> 00:39:52.348\nVerisign has nice little\ndnssec testing page.\n\n774\n00:39:52.348 --> 00:39:56.980\nThey have it linked on\nthe actual dnssec homepages, but\n\n775\n00:39:56.980 --> 00:40:02.150\nif you go to, https, we're going to,\n\n776\n00:40:02.150 --> 00:40:08.180\nlet's see if I can merge this whole thing,\nit's dnssec-debugger.\n\n777\n00:40:08.180 --> 00:40:09.680\nActually, it might not even be HTTPS.\n\n778\n00:40:09.680 --> 00:40:12.310\nLet me get rid of that.\n\n779\n00:40:12.310 --> 00:40:18.286\nSo dnssec -debugger.verisignlabs.com and\n\n780\n00:40:18.286 --> 00:40:22.370\nthen do a / and\nput in whatever your domain is.\n\n781\n00:40:22.370 --> 00:40:25.840\nSo my domain is itprotv, well,\nlet's do itprotvdemo.com.\n\n782\n00:40:25.840 --> 00:40:27.375\nI'll try that one first.\n\n783\n00:40:27.375 --> 00:40:31.915\nITProTV.com doesn't have a sign,\nDNS signatures,\n\n784\n00:40:31.915 --> 00:40:37.730\ndnssec-debugger.verisignlabs.com/itprotvd-\nemo.com and\n\n785\n00:40:37.730 --> 00:40:40.350\nif I look, looks like the domain\nis pretty healthy, right?\n\n786\n00:40:41.460 --> 00:40:45.990\nWhen I scroll down a bit,\nI'll start to see some problems.\n\n787\n00:40:45.990 --> 00:40:49.280\nIt found two DNS key records for it.\n\n788\n00:40:49.280 --> 00:40:50.830\nAnd it had some signatures.\n\n789\n00:40:50.830 --> 00:40:57.360\nSo apparently it had DNS sec set up at\nsome point, right, And well, actually no.\n\n790\n00:40:57.360 --> 00:40:59.700\nThat's dot, that's the root.\n\n791\n00:40:59.700 --> 00:41:01.770\nYes the roots server are gonna have it.\n\n792\n00:41:01.770 --> 00:41:05.350\nAnd then dot com, yeah, all right,\nit found those records.\n\n793\n00:41:05.350 --> 00:41:08.920\nBut then by the time it\ngets down to ITPROTV.com.\n\n794\n00:41:08.920 --> 00:41:10.480\nThings aren't looking so good.\n\n795\n00:41:10.480 --> 00:41:11.250\nIt's not signed.\n\n796\n00:41:11.250 --> 00:41:13.070\nYou'll see that one's hosted by Amazon.\n\n797\n00:41:13.070 --> 00:41:16.650\nAmazon refused the lookup and that's it.\n\n798\n00:41:16.650 --> 00:41:18.730\nI don't have DNSSEC for that one.\n\n799\n00:41:18.730 --> 00:41:21.020\nSo I know that it's not functional.\n\n800\n00:41:21.020 --> 00:41:22.510\nBut if I change that and\n\n801\n00:41:22.510 --> 00:41:28.230\nwe do a lookup on org instead it'll\nrun through the same process.\n\n802\n00:41:28.230 --> 00:41:33.110\nIt looks up the dot and then it goes org\nand it looks that one up, and then it gets\n\n803\n00:41:33.110 --> 00:41:37.910\nto me, I got nice little green\ncheckmarks all the way down as it tests.\n\n804\n00:41:37.910 --> 00:41:43.030\nAnd it's not only checking the DS,\nit's also pulling the signatures\n\n805\n00:41:43.030 --> 00:41:47.690\nof individual records to test it out, like\nthe name server records, and the SOA, so\n\n806\n00:41:47.690 --> 00:41:51.100\nit's pulling that and checking to\nmake sure those records are valid.\n\n807\n00:41:51.100 --> 00:41:53.540\nThis is a great way to ensure\nthe DNSSEC is working, and\n\n808\n00:41:53.540 --> 00:41:56.770\nit's being tested from\noutside of your organization.\n\n809\n00:41:56.770 --> 00:41:59.470\nSo you know it's not\ncached on your server, or\n\n810\n00:41:59.470 --> 00:42:01.420\nyou're hitting a local DNS server,\nor something.\n\n811\n00:42:01.420 --> 00:42:02.600\nThis is a test from the outside world.\n\n812\n00:42:02.600 --> 00:42:03.960\nSo I use this all the time, and\n\n813\n00:42:03.960 --> 00:42:06.420\nit is a great way to make sure\nthat things are set up right.\n\n814\n00:42:06.420 --> 00:42:07.050\n&gt;&gt; All right, Don.\n\n815\n00:42:07.050 --> 00:42:10.610\nWell as always, we appreciate you being\nhere with us, and we do appreciate you,\n\n816\n00:42:10.610 --> 00:42:11.860\nthe viewer watching.\n\n817\n00:42:11.860 --> 00:42:14.513\nWe're gonna go ahead and\nsign out here for ITProTV.\n\n818\n00:42:14.513 --> 00:42:16.127\nI've been your host Wes Bryan.\n\n819\n00:42:16.127 --> 00:42:16.940\n&gt;&gt; And I'm Don Pezet.\n\n820\n00:42:16.940 --> 00:42:19.191\n&gt;&gt; And we'll see you next time.\n\n821\n00:42:19.191 --> 00:42:25.262\n[MUSIC]\n\n822\n00:42:25.262 --> 00:42:28.489\n&gt;&gt; Thank you for watching ITProTV.\n\n",
          "vimeoId": "196622164"
        },
        {
          "description": "In this episode, Wes and Don continue their journey through securing DNS zones on an NSD server. They look at creating the keys for the zone and explain the records that are added when using DNSSEC and configuring the registrar to use DNSSEC.",
          "length": "2550",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-5-1-configuring_dnssec_with_nsd_pt2-PGM.00_42_16_13.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-5-1-configuring_dnssec_with_nsd_pt2-PGM.00_42_16_13.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-5-1-configuring_dnssec_with_nsd_pt2-PGM.00_42_16_13.Still001-sm.jpg",
          "title": "Configuring DNSSEC with NSD Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.029 --> 00:00:01.360\nWelcome to ITProTV.\n\n2\n00:00:01.360 --> 00:00:03.469\nI'm your host, Don Pezet.\n\n3\n00:00:03.469 --> 00:00:07.193\n&gt;&gt; [CROSSTALK]\n\n4\n00:00:07.193 --> 00:00:11.902\n&gt;&gt; You're watching ITProTV.\n\n5\n00:00:11.902 --> 00:00:14.666\n&gt;&gt; Welcome to another exciting\nepisode here at ITProTV.\n\n6\n00:00:14.666 --> 00:00:15.970\nI'm your host, Wes Bryan.\n\n7\n00:00:15.970 --> 00:00:19.720\nAnd in today's episode, we're\ncontinuing through our DNS tech skills,\n\n8\n00:00:19.720 --> 00:00:21.490\nwe're actually coming\nback with a part two.\n\n9\n00:00:21.490 --> 00:00:24.801\nJoining us for this very endeavor\nis none other than Mr. Don Pezet.\n\n10\n00:00:24.801 --> 00:00:25.452\nDon, how you doing sir?\n\n11\n00:00:25.452 --> 00:00:28.040\n&gt;&gt; I'm doing great, Wes,\nready to dive right back into DNSSEC.\n\n12\n00:00:28.040 --> 00:00:31.090\nAnd if you watched our last episode, you\nknow we spent our time dealing with all\n\n13\n00:00:31.090 --> 00:00:36.250\nthe prerequisites of making sure\nwe were ready to implement DNSSEC.\n\n14\n00:00:36.250 --> 00:00:37.520\nWe set up our servers,\n\n15\n00:00:37.520 --> 00:00:42.120\nwe got everything put in place and\nwe never actually implemented DNSSEC.\n\n16\n00:00:42.120 --> 00:00:45.290\nAnd that's what we're gonna kick off with\nright here in this episode is the actual\n\n17\n00:00:45.290 --> 00:00:45.870\nsigning.\n\n18\n00:00:45.870 --> 00:00:48.330\nSo if you didn't watch the last episode,\n\n19\n00:00:48.330 --> 00:00:52.188\nwhere we left off is I've got two\nNSD servers that are up and running.\n\n20\n00:00:52.188 --> 00:00:55.280\nThey're replicating out a zone\nbetween each other, but\n\n21\n00:00:55.280 --> 00:00:58.690\nit's just a regular old zone\nwith regular old records.\n\n22\n00:00:58.690 --> 00:01:02.040\nThey're not digitally signed in any way,\nthere's no hashes or\n\n23\n00:01:02.040 --> 00:01:03.580\nsignatures attached to them.\n\n24\n00:01:03.580 --> 00:01:06.730\nWe need to start activating DNSSEC and\ngetting that pushed out.\n\n25\n00:01:06.730 --> 00:01:08.920\nSo that's where we are right now,\n\n26\n00:01:08.920 --> 00:01:13.170\nwith the actual beginning of the true\nDNSSEC configuration, all right.\n\n27\n00:01:13.170 --> 00:01:16.640\nNow, in order to get started,\nthe first thing I need\n\n28\n00:01:16.640 --> 00:01:19.380\nto do is kind of figure out what\nalgorithms I'm gonna be using.\n\n29\n00:01:19.380 --> 00:01:20.610\nI pointed that out in the last episode.\n\n30\n00:01:20.610 --> 00:01:23.760\nThere's more than one algorithm we can\nuse for generating the signature and\n\n31\n00:01:23.760 --> 00:01:25.680\ngenerating the digest and all of that.\n\n32\n00:01:25.680 --> 00:01:28.310\nAnd there's different\nstandards that are out there.\n\n33\n00:01:28.310 --> 00:01:32.460\nBe careful because the one you pick\nneeds to be supported by your provider,\n\n34\n00:01:32.460 --> 00:01:33.670\nwhoever your registrar is.\n\n35\n00:01:33.670 --> 00:01:35.140\nAnd so you've gotta check that.\n\n36\n00:01:35.140 --> 00:01:40.740\nIn my scenario, I'm using a registrar\nwhich is Hover.com, right.\n\n37\n00:01:40.740 --> 00:01:45.860\nAnd Hover, they're the registrar\nof record for my itprotvdemo.org.\n\n38\n00:01:45.860 --> 00:01:49.100\nAnd I know they support DNSSEC,\nthey've got support for that, so\n\n39\n00:01:49.100 --> 00:01:51.680\nI can certainly come in here and\nactivate it.\n\n40\n00:01:51.680 --> 00:01:57.020\nAnd when I activate it, I'm gonna have to\npick an algorithm and a digest algorithm.\n\n41\n00:01:57.020 --> 00:02:00.940\nNow, there are many different\nalgorithms that are out there, and\n\n42\n00:02:00.940 --> 00:02:03.322\neach one gets a number assigned to them.\n\n43\n00:02:03.322 --> 00:02:05.726\nSee how there's two, three,\nfive, six, seven, eight?\n\n44\n00:02:05.726 --> 00:02:10.239\nSee how it skips one, and\nthey skip four and they skip nine?\n\n45\n00:02:10.239 --> 00:02:12.220\nWhere did those numbers go?\n\n46\n00:02:12.220 --> 00:02:14.040\nWell, Hover didn't make these numbers up.\n\n47\n00:02:14.040 --> 00:02:16.280\nThis is part of the DNSSEC standard.\n\n48\n00:02:16.280 --> 00:02:19.060\nEach algorithm gets\na number assigned to it.\n\n49\n00:02:19.060 --> 00:02:22.990\nAnd what they're telling me here\nare which ones they support, right.\n\n50\n00:02:22.990 --> 00:02:25.292\nThey don't support\nwhatever number one was.\n\n51\n00:02:25.292 --> 00:02:27.200\nNumber one is actually MD5, right.\n\n52\n00:02:27.200 --> 00:02:30.788\nSo they don't support MD5 because MD5\nis not considered secure anymore.\n\n53\n00:02:30.788 --> 00:02:33.072\nIf it's not secure,\nwhy bother supporting it?\n\n54\n00:02:33.072 --> 00:02:35.643\nAnd if we look at some of the others,\nit's gonna be similar stuff to that.\n\n55\n00:02:35.643 --> 00:02:39.752\n&gt;&gt; Now, Don, is this related next to that\nkey ID that you showed us in the first\n\n56\n00:02:39.752 --> 00:02:42.700\nepisode where you said these\nnumbers are important?\n\n57\n00:02:42.700 --> 00:02:45.830\nI noticed, for instance, eight was\nin the list a couple of times there.\n\n58\n00:02:45.830 --> 00:02:46.690\n&gt;&gt; Yeah.\n\n59\n00:02:46.690 --> 00:02:49.350\nAnd when we saw that,\nthere were usually two numbers, right.\n\n60\n00:02:49.350 --> 00:02:51.950\nAnd the first number was\nindicating the algorithm, and\n\n61\n00:02:51.950 --> 00:02:54.140\nthe other one was indicating\nthe digest algorithm.\n\n62\n00:02:54.140 --> 00:02:56.780\nAnd so you'll see where I've\ngot those options, too.\n\n63\n00:02:56.780 --> 00:03:01.670\nNow, when I pick an algorithm, I need to\nmake sure that my registrar supports it,\n\n64\n00:03:01.670 --> 00:03:03.750\nand I need to make sure that I support it.\n\n65\n00:03:03.750 --> 00:03:10.377\nSo for example, on this digest, see how I\ncan do SHA-1, SHA-256 GOST and SHA-384?\n\n66\n00:03:10.377 --> 00:03:13.507\nWell, I'm gonna use the ldns-utils.\n\n67\n00:03:13.507 --> 00:03:18.132\nAnd the version of the utils that I have,\nthey don't support GOST or SHA-384.\n\n68\n00:03:18.132 --> 00:03:21.429\nSo I only support SHA-1 and\nSHA-256 for the digest.\n\n69\n00:03:21.429 --> 00:03:23.476\nSo I'm the bottleneck there.\n\n70\n00:03:23.476 --> 00:03:26.233\nBut there may be something where your\nregistrar is a bottleneck, too, so\n\n71\n00:03:26.233 --> 00:03:27.720\nyou gotta check that out.\n\n72\n00:03:27.720 --> 00:03:30.810\nI'm gonna go ahead and use SHA-256 for\neverything that I do here today\n\n73\n00:03:30.810 --> 00:03:33.890\nbecause that's considered secure and\nalmost everything supports it.\n\n74\n00:03:33.890 --> 00:03:35.600\nSo you're pretty safe going with it.\n\n75\n00:03:35.600 --> 00:03:39.160\nBut don't hesitate to move to a stronger\nalgorithm if you've got full support for\n\n76\n00:03:39.160 --> 00:03:40.990\nit in your environment, all right.\n\n77\n00:03:40.990 --> 00:03:42.860\nSo I need to get this stuff generated.\n\n78\n00:03:42.860 --> 00:03:45.170\nI need to get it made and put in place.\n\n79\n00:03:45.170 --> 00:03:47.870\nSo let me jump back over to my server.\n\n80\n00:03:47.870 --> 00:03:50.330\nNow, I've got two servers,\ndns1 and dns2, and\n\n81\n00:03:50.330 --> 00:03:52.440\nthey're replicating between each other.\n\n82\n00:03:52.440 --> 00:03:56.680\nI'm gonna do all my work on one server,\non the master.\n\n83\n00:03:56.680 --> 00:04:00.240\nAnd as I sign everything,\nthat's gonna replicate the other one.\n\n84\n00:04:00.240 --> 00:04:04.107\nSo I don't have to do all the work twice,\nI can just do it once.\n\n85\n00:04:04.107 --> 00:04:07.624\nBut to help me make sure the work gets\ndone, I'm gonna jump over to number two.\n\n86\n00:04:07.624 --> 00:04:12.510\nAnd I'm going to do a quick dig on my\nlocal system here just to be able to\n\n87\n00:04:12.510 --> 00:04:17.172\nverify that the records don't\nhave any kind of keys yet, right.\n\n88\n00:04:17.172 --> 00:04:22.172\nSo if I do a lookup against\nmy second server, and\n\n89\n00:04:22.172 --> 00:04:27.055\nI'm gonna look for www.itprotvdemo.org.\n\n90\n00:04:27.055 --> 00:04:30.146\nWhen I get that back, I get a nice,\nnormal record right there.\n\n91\n00:04:30.146 --> 00:04:32.408\nAnd that's just an A record, right.\n\n92\n00:04:32.408 --> 00:04:37.705\nI'm gonna query it again, and this time\nI'm gonna tell it I want the DNSKEY.\n\n93\n00:04:37.705 --> 00:04:41.624\nAnd I'm gonna use +multiline just to make\nit look a little nicer on the screen.\n\n94\n00:04:41.624 --> 00:04:44.450\nOtherwise, it word wraps\nthe thing all crazy.\n\n95\n00:04:44.450 --> 00:04:49.570\nSo I'm querying that record, and I'm\nsaying show me the DNSKEY for that record.\n\n96\n00:04:49.570 --> 00:04:50.970\nOr actually, hang on, that's a record.\n\n97\n00:04:50.970 --> 00:04:52.880\nA record would have an RRSIG.\n\n98\n00:04:52.880 --> 00:04:57.310\nI'm gonna do the zone, so I'll pull\nitprotvdemo.org, the zone, itself.\n\n99\n00:04:57.310 --> 00:05:00.430\nAnd when I query that,\nit doesn't have a key.\n\n100\n00:05:00.430 --> 00:05:01.920\nRight, no key was returned for me.\n\n101\n00:05:01.920 --> 00:05:04.890\nI got my SOA information, but no key.\n\n102\n00:05:04.890 --> 00:05:07.340\nSee how it says IN DNSKEY and\nthen nothing?\n\n103\n00:05:07.340 --> 00:05:09.010\nNormally, the key would follow that.\n\n104\n00:05:09.010 --> 00:05:12.330\nSo, as of right now,\nthis server doesn't contain a key.\n\n105\n00:05:12.330 --> 00:05:17.130\nAnd I'll run that same query later to\nmake sure that the key does show up and\n\n106\n00:05:17.130 --> 00:05:18.890\nI'm querying the second server.\n\n107\n00:05:18.890 --> 00:05:21.590\nBecause I'll know it's working on\nthe first server cuz that's where\n\n108\n00:05:21.590 --> 00:05:22.350\nI'm setting it up.\n\n109\n00:05:22.350 --> 00:05:24.360\nI need to make sure it replicates, right.\n\n110\n00:05:24.360 --> 00:05:26.597\nSo on this server,\nI can do that same thing,\n\n111\n00:05:26.597 --> 00:05:28.720\nexcept I can look up against this server.\n\n112\n00:05:28.720 --> 00:05:35.857\nSo just using it to loop back to pull up\nitprotvdemo.org, and ask for that DNSKEY.\n\n113\n00:05:35.857 --> 00:05:39.180\nAnd I'll do multilining even though\nthat's not gonna return anything.\n\n114\n00:05:39.180 --> 00:05:40.440\nBut there we go, same thing.\n\n115\n00:05:40.440 --> 00:05:43.350\nI get the IN DNSKEY followed by nothing.\n\n116\n00:05:43.350 --> 00:05:44.148\nNo key, all right.\n\n117\n00:05:44.148 --> 00:05:47.060\nLet's fix that, let's generate a key.\n\n118\n00:05:47.060 --> 00:05:48.550\nThe command to generate a key.\n\n119\n00:05:48.550 --> 00:05:53.890\nWell, we need to get into /etc/nsd,\nthat's where our zone is.\n\n120\n00:05:53.890 --> 00:05:58.000\nSo my zone is sitting right here,\nitprotvdemo.org.dns.\n\n121\n00:05:58.000 --> 00:06:05.490\nAnd by the time this is done, I'm going\nto have generated three sets of keys.\n\n122\n00:06:05.490 --> 00:06:09.800\nI need a zone signing key that\nI'll use to sign the zone.\n\n123\n00:06:09.800 --> 00:06:14.780\nThen I need a key signing key\nthat I use to sign the zone keys.\n\n124\n00:06:14.780 --> 00:06:16.650\nCuz I might have ten zones.\n\n125\n00:06:16.650 --> 00:06:20.560\nWell, I need a different key for each\nzone, so that will be ten different keys.\n\n126\n00:06:20.560 --> 00:06:22.100\nAnd I can have one master key,\n\n127\n00:06:22.100 --> 00:06:25.360\nthe key signing key,\nthat signs all of them, right.\n\n128\n00:06:25.360 --> 00:06:28.590\nSo I need a zone signing key and\na key signing key.\n\n129\n00:06:28.590 --> 00:06:32.998\nAnd you'll see this usually written as\nZSK and KSK, so I need those two keys.\n\n130\n00:06:32.998 --> 00:06:36.583\nAnd then I need a DS key.\n\n131\n00:06:36.583 --> 00:06:38.322\nAnd the DS is for\nthe designated signer, and\n\n132\n00:06:38.322 --> 00:06:40.769\nthat's what I'm gonna send up\nto the registrar, all right.\n\n133\n00:06:40.769 --> 00:06:41.940\nSo that's the other one.\n\n134\n00:06:41.940 --> 00:06:44.540\nSo I'm gonna make three sets of keys.\n\n135\n00:06:44.540 --> 00:06:47.680\nAnd the commands are all really similar so\nthey're easy to mix up.\n\n136\n00:06:47.680 --> 00:06:50.530\nSo let's kind of run\nthrough this step by step.\n\n137\n00:06:50.530 --> 00:06:52.120\nI'm gonna start with the zone signing key.\n\n138\n00:06:52.120 --> 00:06:55.470\nI'm gonna sign itprotv.demo.org.dns.\n\n139\n00:06:55.470 --> 00:06:58.950\nNow, if I need to make any changes\nto the records I need to do it now\n\n140\n00:06:58.950 --> 00:07:03.310\nbecause from now on,\nevery time I modify that zone,\n\n141\n00:07:03.310 --> 00:07:08.490\nI need to go in and re-sign it, right.\n\n142\n00:07:08.490 --> 00:07:11.660\nEvery time I make a modification,\nI've got to re-sign it cuz it'll change.\n\n143\n00:07:11.660 --> 00:07:13.920\nSo because I know I'm gonna do that,\n\n144\n00:07:13.920 --> 00:07:16.680\nthere is the matter of the serial\nnumber that's in there.\n\n145\n00:07:16.680 --> 00:07:19.026\nAnd if I want this to\nreplicate to the other side,\n\n146\n00:07:19.026 --> 00:07:20.983\nI need to increment that serial number.\n\n147\n00:07:20.983 --> 00:07:26.348\nI'm gonna increment the serial number now,\neven though I haven't changed anything,\n\n148\n00:07:26.348 --> 00:07:30.132\nso that when it signs it the new\nserial number will be in there.\n\n149\n00:07:30.132 --> 00:07:34.910\nSo I'm gonna edit\n/etc/nsd/itprotvdemo.org.dns.\n\n150\n00:07:34.910 --> 00:07:38.700\nAnd I'm gonna go in here and\njust take the serial number,\n\n151\n00:07:38.700 --> 00:07:43.370\nwhich is a 1, and I'm gonna make it a 2,\nright, just bump it up.\n\n152\n00:07:43.370 --> 00:07:45.319\nI mean, you can make it 2,000,\nit doesn't matter, but\n\n153\n00:07:45.319 --> 00:07:47.130\nit has to be a number higher\nthan whatever it is right now.\n\n154\n00:07:47.130 --> 00:07:49.231\nSo that's gonna let the other\nside know that it's different.\n\n155\n00:07:49.231 --> 00:07:54.893\nNow, NSD doesn't actually load\nthe zone until I tell it to, right.\n\n156\n00:07:54.893 --> 00:07:56.471\nSo it's not gonna see that number changed,\n\n157\n00:07:56.471 --> 00:07:58.273\nit's not gonna replicate\nover to the other side.\n\n158\n00:07:58.273 --> 00:07:59.978\nAnd that's perfectly fine with me, so.\n\n159\n00:07:59.978 --> 00:08:01.197\nThere we go.\n\n160\n00:08:01.197 --> 00:08:02.532\nAnd I'll get out of that.\n\n161\n00:08:02.532 --> 00:08:07.457\nAll right, so as it stands, I've got my\nregular old zone sitting right there and\n\n162\n00:08:07.457 --> 00:08:09.110\nnow I need to sign it.\n\n163\n00:08:09.110 --> 00:08:13.688\nSo I'm gonna run ldns-keygen.\n\n164\n00:08:13.688 --> 00:08:15.302\nThis is gonna generate the key.\n\n165\n00:08:15.302 --> 00:08:17.040\nAnd we're gonna use this\nutility a few times.\n\n166\n00:08:17.040 --> 00:08:19.960\nAnd as far as options that go into it,\n\n167\n00:08:19.960 --> 00:08:24.820\nwe need to say -a and\ntell it the algorithm to use.\n\n168\n00:08:24.820 --> 00:08:27.740\nNow there's a lot that are supported and\ndepending on your distro,\n\n169\n00:08:27.740 --> 00:08:29.700\nyou may have some and\nyou may be missing others.\n\n170\n00:08:29.700 --> 00:08:32.350\nWhat I recommend you do\nis before you run it,\n\n171\n00:08:32.350 --> 00:08:35.210\njust pull up the man file for\nit, all right.\n\n172\n00:08:35.210 --> 00:08:36.670\nThere is actually a command you can run,\n\n173\n00:08:36.670 --> 00:08:41.420\nI think it's ldns-keygen and then a -l or\nsomething and it'll list them out.\n\n174\n00:08:41.420 --> 00:08:44.470\nBut if you pull up the man file\ndocumentation and look in here,\n\n175\n00:08:44.470 --> 00:08:48.560\nit'll be in the documentation where\nit tells you which one are supported.\n\n176\n00:08:48.560 --> 00:08:50.580\nAnd I say that and\n\n177\n00:08:50.580 --> 00:08:55.410\nthen it's not here we go, specifying list\nhere gives a list of supported algorithms.\n\n178\n00:08:55.410 --> 00:08:57.090\nThat's what I need to do.\n\n179\n00:08:57.090 --> 00:09:02.200\nSo I'll say ldns-keygen and\nthen I'll do -a.\n\n180\n00:09:02.200 --> 00:09:05.880\nAnd normally I would follow this up with\nwhich algorithm I was gonna use, but\n\n181\n00:09:05.880 --> 00:09:07.510\nI'm just gonna say list.\n\n182\n00:09:07.510 --> 00:09:12.020\nAnd when I run it,\nhere's the ones that my system supports.\n\n183\n00:09:12.020 --> 00:09:15.440\nI may see some that my registrar has and\nsome they don't.\n\n184\n00:09:15.440 --> 00:09:17.780\nI've gotta find that mix.\n\n185\n00:09:17.780 --> 00:09:20.820\nSo when I look down the list,\nI can pick and earlier,\n\n186\n00:09:20.820 --> 00:09:22.080\nI said I didn't support ghost.\n\n187\n00:09:22.080 --> 00:09:23.147\nIt looks like I do, right.\n\n188\n00:09:23.147 --> 00:09:24.691\nI learn something new every day.\n\n189\n00:09:24.691 --> 00:09:26.840\nAnd we got SHA 384 sitting down there.\n\n190\n00:09:26.840 --> 00:09:28.028\nSo I've got a couple I can pick from.\n\n191\n00:09:28.028 --> 00:09:31.430\nBut I already said I was gonna use SHA\n256 and that's this guy right here.\n\n192\n00:09:31.430 --> 00:09:33.530\nSo I'm gonna use that to assign my keys.\n\n193\n00:09:33.530 --> 00:09:36.820\nThat one's pretty common right now,\nwhat a lot of people default to.\n\n194\n00:09:36.820 --> 00:09:41.380\nRemember the harder an algorithm you pick,\nthe more secure it is.\n\n195\n00:09:41.380 --> 00:09:44.220\nBut the more work your name server\nis gonna have to deal with and\n\n196\n00:09:44.220 --> 00:09:46.970\nthe more work your registrar is\ngonna do to validate these, right.\n\n197\n00:09:46.970 --> 00:09:50.760\nBecause it has to generate the keys and\nhashes.\n\n198\n00:09:50.760 --> 00:09:52.430\nSo that kind of hurts performance,\n\n199\n00:09:52.430 --> 00:09:55.147\nyou don't want to go too crazy\nunless it's high security.\n\n200\n00:09:56.280 --> 00:09:59.921\nAll right, So\nI'm gonna do RSASHA256, all right.\n\n201\n00:09:59.921 --> 00:10:05.475\nSo I'll run ldns-keygen -a and\n\n202\n00:10:05.475 --> 00:10:09.049\nthen RSASHA256.\n\n203\n00:10:09.049 --> 00:10:11.509\nAnd then I need to tell it how many bits.\n\n204\n00:10:11.509 --> 00:10:14.081\nNow you have some flexibility here.\n\n205\n00:10:14.081 --> 00:10:19.484\nBut the standard that's being pushed\nright now is that you do 1,024 bits for\n\n206\n00:10:19.484 --> 00:10:24.430\nyour zone signing keys and\n2,048 bits for your key signing key.\n\n207\n00:10:24.430 --> 00:10:27.900\nSo your key signing key is more secure\nbecause that could be use to compromise\n\n208\n00:10:27.900 --> 00:10:31.760\nall your zones versus these, it could\nonly be use to compromise one zone.\n\n209\n00:10:31.760 --> 00:10:36.610\nSo it's all about benefit, what is it\ncost versus benefit return, whatever.\n\n210\n00:10:36.610 --> 00:10:40.354\nWhere we get a lot more benefit from\nhaving a stronger key on our key\n\n211\n00:10:40.354 --> 00:10:41.970\nsigning key.\n\n212\n00:10:41.970 --> 00:10:46.470\nSo I'll just do 1,024 and\nthen I tell it the zone that I'm gonna be\n\n213\n00:10:46.470 --> 00:10:51.012\nsigning minus itprotvdemo.org.\n\n214\n00:10:51.012 --> 00:10:57.350\nAll right, and so it is gonna reach in and\ngrab that and sign my key, right.\n\n215\n00:10:57.350 --> 00:11:03.120\nNow when I do this,\nI get k itprotvdemo.org and\n\n216\n00:11:03.120 --> 00:11:06.270\nthen some numbers, right and\nwhat the heck are those numbers?\n\n217\n00:11:06.270 --> 00:11:10.613\nWhat it is telling me is k,\nwhich lets me know this is a key, right?\n\n218\n00:11:10.613 --> 00:11:14.590\nAnd then itprotvdemo.org,\nthat's my domain and\n\n219\n00:11:14.590 --> 00:11:17.530\nthe next value is\nthe algorithm that I picked.\n\n220\n00:11:17.530 --> 00:11:18.800\nEight, right?\n\n221\n00:11:18.800 --> 00:11:21.970\nRemember that eight that Wes\nmentioned seeing in a record earlier.\n\n222\n00:11:21.970 --> 00:11:24.495\nThat means whoever that was picked\nSHA256 just like me, right?\n\n223\n00:11:24.495 --> 00:11:26.862\nThat's where we get\nthat number eight from.\n\n224\n00:11:26.862 --> 00:11:29.833\nAnd when I go back to hover's website and\nI look at that list,\n\n225\n00:11:29.833 --> 00:11:31.590\nit's number eight on their list.\n\n226\n00:11:31.590 --> 00:11:35.150\nSo that's how we know what number it is\nand we make sure we pick the right thing.\n\n227\n00:11:35.150 --> 00:11:40.490\nAnd then the next number 59391,\nthat is my key ID.\n\n228\n00:11:40.490 --> 00:11:44.860\nEvery key has an ID or\na tag because I might generate 10 keys.\n\n229\n00:11:44.860 --> 00:11:49.033\nAnd then rotate through them overtime or\nwhatever, so this is just the key ID.\n\n230\n00:11:49.033 --> 00:11:52.737\nI'm gonna generate three\ndifferent keys here,\n\n231\n00:11:52.737 --> 00:11:56.960\na zone signing key,\na key signing key and a DS key.\n\n232\n00:11:56.960 --> 00:12:00.950\nAnd all of them are gonna be called\nkitprotvdemo.org and then my value.\n\n233\n00:12:00.950 --> 00:12:05.850\nIf I use RSASHA256 on all of them,\nthey're all\n\n234\n00:12:05.850 --> 00:12:10.970\ngonna be my domain 008 and\nthen the ID is how I'll tell them apart.\n\n235\n00:12:10.970 --> 00:12:16.159\nSo I need to remember, park it in my mind,\nthat 59391 is my zone signing key.\n\n236\n00:12:16.159 --> 00:12:17.320\nAnd I normally write it down.\n\n237\n00:12:17.320 --> 00:12:18.549\nI don't have a pen, so\nI won't worry about it.\n\n238\n00:12:19.650 --> 00:12:20.940\nI'm sure I won't forget.\n\n239\n00:12:20.940 --> 00:12:22.590\nThat never happens.\n\n240\n00:12:22.590 --> 00:12:26.640\nAll right,\nnow I've got a key generated for my zone.\n\n241\n00:12:26.640 --> 00:12:28.630\nThat's terribly exciting.\n\n242\n00:12:28.630 --> 00:12:32.440\nAnd if I look at my folder\nhere,I'll see it made three files.\n\n243\n00:12:32.440 --> 00:12:40.670\nThe private key, the public key and\nthe DS for that delegated signer.\n\n244\n00:12:40.670 --> 00:12:44.360\nSo it's created three files for\nit that has all the information on my key.\n\n245\n00:12:44.360 --> 00:12:46.650\nNow I'm actually not gonna\nmake use of some of these.\n\n246\n00:12:46.650 --> 00:12:48.090\nBut I'll keep all three of them.\n\n247\n00:12:48.090 --> 00:12:48.730\nI generally do.\n\n248\n00:12:48.730 --> 00:12:49.890\nYou'll see people on the Internet.\n\n249\n00:12:49.890 --> 00:12:51.957\nWell, just delete the DS one\nbecause you're not gonna use that.\n\n250\n00:12:51.957 --> 00:12:55.270\nAnd we'll generate a different key for\nit for whatever reason.\n\n251\n00:12:55.270 --> 00:12:57.090\nI normally keep them all.\n\n252\n00:12:57.090 --> 00:13:01.510\nAll right, so there's the key that I\ngenerated for my zone signing key.\n\n253\n00:13:01.510 --> 00:13:04.090\nNow I'm gonna do the same thing but\nfor my key signing key.\n\n254\n00:13:04.090 --> 00:13:06.671\nNow the interesting part here is that\nthe command is almost identical.\n\n255\n00:13:06.671 --> 00:13:08.634\nSo I'm gonna bring that command back up.\n\n256\n00:13:08.634 --> 00:13:13.639\nI've got ldns-keygen -a RSASHA256\n\n257\n00:13:13.639 --> 00:13:17.794\n-b 1024 itprotvdemo.org.\n\n258\n00:13:17.794 --> 00:13:20.550\nI need to tell it to\nmake a key signing key.\n\n259\n00:13:20.550 --> 00:13:25.060\nI mentioned that it needs to be 2,048\nbits, so I'm gonna bump that up.\n\n260\n00:13:25.060 --> 00:13:26.600\nI said it needs, it doesn't have to be.\n\n261\n00:13:26.600 --> 00:13:28.832\nYou could choose something lower or\nsomething higher, but\n\n262\n00:13:28.832 --> 00:13:30.220\nthis is kind of a standard right now.\n\n263\n00:13:30.220 --> 00:13:32.850\nSo I'll do 2,048 bits.\n\n264\n00:13:32.850 --> 00:13:36.720\nIf I just press Enter,\nit's gonna make another zone signing key.\n\n265\n00:13:36.720 --> 00:13:39.030\nThe way we tell it to\nmake a key signing key,\n\n266\n00:13:39.030 --> 00:13:43.030\nis back here at the beginning we add a -k.\n\n267\n00:13:43.030 --> 00:13:49.729\nSo the full line is\nldns-keygen -k -a RSASHA256\n\n268\n00:13:49.729 --> 00:13:55.610\n-b 2048 itprotvdemo.org, right?\n\n269\n00:13:56.680 --> 00:13:57.712\nThat's my full line.\n\n270\n00:13:57.712 --> 00:14:01.520\nThe -k is really all I had to add\nif I wanted to stay at 1024 bits.\n\n271\n00:14:01.520 --> 00:14:03.910\nBut that's gonna make a key signing key.\n\n272\n00:14:03.910 --> 00:14:06.660\nWhen I run it,\nit's not gonna look much different.\n\n273\n00:14:06.660 --> 00:14:11.080\nIt did take just a hair longer,\nyou might have noticed, not much longer.\n\n274\n00:14:11.080 --> 00:14:13.434\nBut because it's 2,048 bits,\nit has to work a little harder.\n\n275\n00:14:13.434 --> 00:14:18.766\nBut now I get another key, notice at\nmy first key had an ID of 59391 and\n\n276\n00:14:18.766 --> 00:14:22.830\nthis one is 19180, it's a lower ID number.\n\n277\n00:14:22.830 --> 00:14:25.120\nThat happens when you\nrandomly generate a number.\n\n278\n00:14:25.120 --> 00:14:28.410\nSo you can't just trust the numbers,\nthat's why you need to document this down.\n\n279\n00:14:28.410 --> 00:14:31.660\nWhich one is your zone signing,\nwhich one is your key signing.\n\n280\n00:14:31.660 --> 00:14:36.410\nBut if I look at my folder now, I'll\nsee that I've got six new files, right?\n\n281\n00:14:36.410 --> 00:14:39.600\nI've got my original ones\nthat I generated here.\n\n282\n00:14:39.600 --> 00:14:40.910\nAnd now I've got these new ones.\n\n283\n00:14:40.910 --> 00:14:47.200\nThey look the same as far as I'm\nconcerned, but they are actually\n\n284\n00:14:47.200 --> 00:14:51.850\ndifferent entities, right, so\nzone signing key, key signing key.\n\n285\n00:14:51.850 --> 00:14:57.230\nOnce I've got that,\nnow it's time to actually use the keys.\n\n286\n00:14:57.230 --> 00:15:00.600\nThose commands I just ran, they generate\nthe keys when they are not in use.\n\n287\n00:15:00.600 --> 00:15:02.910\nIt didn't touch my zone at all.\n\n288\n00:15:02.910 --> 00:15:06.045\nI mentioned earlier that my zone\nis called itprotvdemo.org and\n\n289\n00:15:06.045 --> 00:15:10.360\nwe're gonna store the file\ncalled itprotvdemo.org.dns.\n\n290\n00:15:10.360 --> 00:15:13.543\nWhen we sign it,\nit's gonna create a new file and\n\n291\n00:15:13.543 --> 00:15:17.290\nthe new file is gonna be\nitprotvdemo.org.dns.sign.\n\n292\n00:15:17.290 --> 00:15:18.770\nI don't have that yet.\n\n293\n00:15:18.770 --> 00:15:20.410\nIf I look at my files.\n\n294\n00:15:20.410 --> 00:15:21.810\nWhich I just did.\n\n295\n00:15:21.810 --> 00:15:26.060\nI can see my zone file here and\nthere is no .sign version of it yet.\n\n296\n00:15:26.060 --> 00:15:29.090\nI need to use the keys I generated, right?\n\n297\n00:15:29.090 --> 00:15:33.240\nAnd to do that, well,\nI need three pieces of information.\n\n298\n00:15:33.240 --> 00:15:35.220\nI need my zone signing key.\n\n299\n00:15:35.220 --> 00:15:37.500\nI need my key signing key.\n\n300\n00:15:37.500 --> 00:15:40.150\nAnd I need a salt.\n\n301\n00:15:40.150 --> 00:15:44.133\nA salt is a random number that we feed\ninto an algorithm to make sure that when I\n\n302\n00:15:44.133 --> 00:15:46.251\ngenerate something with an algorithm,\n\n303\n00:15:46.251 --> 00:15:49.516\nI end up with a different number\nthan say Wes or somebody else.\n\n304\n00:15:49.516 --> 00:15:53.673\nIf everybody ran an algorithm and got\nthe same result, encryption wouldn't work.\n\n305\n00:15:53.673 --> 00:15:57.376\nAnd so the salt is your way of\nmaking the algorithm unique.\n\n306\n00:15:57.376 --> 00:16:00.557\nWell, if you want to make it unique,\nyou need a random number.\n\n307\n00:16:00.557 --> 00:16:03.910\nAnd people stink at\ngenerating random numbers.\n\n308\n00:16:03.910 --> 00:16:08.140\nSo there's a standard method of getting\nrandom numbers out of a machine\n\n309\n00:16:08.140 --> 00:16:10.030\nby querying /dev/random.\n\n310\n00:16:10.030 --> 00:16:15.506\nIt's the random number generator for your\nI mentioned in part one that I installed\n\n311\n00:16:15.506 --> 00:16:21.110\nthe H-A-V-E-G-E-D,\nthe HAVEGED whatever utility.\n\n312\n00:16:21.110 --> 00:16:22.930\nI don't know how to say that one.\n\n313\n00:16:22.930 --> 00:16:27.000\nThe HAVE G-E-D utility, which helps to\ngenerate entropy on a virtual machine.\n\n314\n00:16:27.000 --> 00:16:28.790\nOn a physical machine\nyou wouldn't need that.\n\n315\n00:16:28.790 --> 00:16:30.020\nBut there's no options for you.\n\n316\n00:16:30.020 --> 00:16:31.420\nYou just install it, and it's done.\n\n317\n00:16:31.420 --> 00:16:34.790\nAnd now I can go in and I can generate\nassault using standard methods.\n\n318\n00:16:34.790 --> 00:16:38.650\nI've done this in other episodes too where\nI set up like replication keys for DNS, so\n\n319\n00:16:38.650 --> 00:16:39.900\nyou've probably seen it before but\n\n320\n00:16:39.900 --> 00:16:44.470\nthe basic process is that we can\nuse the deuce duplication utility,\n\n321\n00:16:44.470 --> 00:16:50.850\nDD and for our input file we can\nfeed it slash dam slash random.\n\n322\n00:16:50.850 --> 00:16:55.220\nAnd then normally with this duplication\nwe would output it to a disk, but\n\n323\n00:16:55.220 --> 00:17:01.330\ninstead I can output this to \"/dev/stdout\"\nstandard out, in other words my screen.\n\n324\n00:17:01.330 --> 00:17:05.400\nI want to output data from\ndevrandom to my screen.\n\n325\n00:17:05.400 --> 00:17:07.420\nGive me a random number, right?\n\n326\n00:17:07.420 --> 00:17:10.550\nBut I don't want too much of a number.\n\n327\n00:17:10.550 --> 00:17:12.060\nI've only got a screen so big.\n\n328\n00:17:12.060 --> 00:17:14.190\nAnd I actually only need 16 characters.\n\n329\n00:17:14.190 --> 00:17:18.130\nWhat I really need are 16\nhexadecimal characters.\n\n330\n00:17:18.130 --> 00:17:19.860\nThat's what I need, right?\n\n331\n00:17:19.860 --> 00:17:22.850\nIf I were to just query this I\nwould need to limit it down.\n\n332\n00:17:22.850 --> 00:17:25.660\nSo I'll say count = 1 and\n\n333\n00:17:25.660 --> 00:17:29.280\nthen I can specify a block size,\nI'll do a block size of 32.\n\n334\n00:17:29.280 --> 00:17:32.430\nSo it's gonna reach in there,\ngrab that data and\n\n335\n00:17:32.430 --> 00:17:37.575\nI'll put it on my screen and, sorry,\nthe block size is actually BS.\n\n336\n00:17:37.575 --> 00:17:41.710\n[LAUGH] Somebody is gonna quote\nme that block size is BS,\n\n337\n00:17:41.710 --> 00:17:43.480\nbs=32, so let me get that correct.\n\n338\n00:17:43.480 --> 00:17:44.280\nThere we go.\n\n339\n00:17:44.280 --> 00:17:47.530\nAnd it's gonna run and\nyou see what an output right here.\n\n340\n00:17:47.530 --> 00:17:50.330\nThese are my random characters, okay.\n\n341\n00:17:50.330 --> 00:17:52.440\nBut it actually went a little bit further.\n\n342\n00:17:52.440 --> 00:17:55.580\nThe thing has apparently some\nkind of crazy character turn.\n\n343\n00:17:55.580 --> 00:17:58.340\nIt can get all sort of weird\nnumbers that come out.\n\n344\n00:17:58.340 --> 00:18:00.970\nWeird letter, characters that\ncan't render on the screen.\n\n345\n00:18:00.970 --> 00:18:03.490\nSo, I can't safely grab data out of this.\n\n346\n00:18:03.490 --> 00:18:08.280\nI mean I've got a lambda in there\nwhich is definitely not hexadecimal.\n\n347\n00:18:08.280 --> 00:18:11.060\nSo, by itself, yes, that's random.\n\n348\n00:18:11.060 --> 00:18:12.540\nBut it's too random.\n\n349\n00:18:12.540 --> 00:18:14.220\nWe need to get it kinda stabilized.\n\n350\n00:18:14.220 --> 00:18:16.468\nSo, what I'm gonna do\nis I'm gonna pipe that.\n\n351\n00:18:16.468 --> 00:18:19.449\nInto sha256sum.\n\n352\n00:18:19.449 --> 00:18:22.570\nI'm gonna take a sha256 checksum of it.\n\n353\n00:18:22.570 --> 00:18:26.750\nNow, that's gonna make it a little more\nnormal, it'll be random data going in, and\n\n354\n00:18:26.750 --> 00:18:29.230\nthen it generates that checksum, right?\n\n355\n00:18:29.230 --> 00:18:34.970\nNow, I get a nice long string\nright there and, I'm good to go.\n\n356\n00:18:34.970 --> 00:18:39.310\nNow I only need 16 characters, so\nI could count and grab the first 16.\n\n357\n00:18:39.310 --> 00:18:44.060\nBut what I normally do is just pipe\nall of that into the cut command.\n\n358\n00:18:44.060 --> 00:18:47.290\nBecause in cut,\nyou can tell it that you want\n\n359\n00:18:47.290 --> 00:18:50.420\nto get just a certain amount of\ncharacters from the beginning.\n\n360\n00:18:50.420 --> 00:18:55.070\nSo I can just say like cut,\nsorry I wanna do c 1-16, right?\n\n361\n00:18:55.070 --> 00:18:58.600\nSo just give me the first 16 characters,\nthat's all I want.\n\n362\n00:18:58.600 --> 00:19:01.980\nThe rest of it you can throw away,\nand I can run that, all right?\n\n363\n00:19:01.980 --> 00:19:05.730\nNow when I run it, whoops,\napparently my syntax is wrong,\n\n364\n00:19:05.730 --> 00:19:06.770\ncuz I got an error on that one.\n\n365\n00:19:06.770 --> 00:19:08.030\nWhat did I do wrong?\n\n366\n00:19:08.030 --> 00:19:16.390\nLet's see, cut, and it is,\nsorry it is -c 1 through 16, there we go.\n\n367\n00:19:16.390 --> 00:19:17.360\nAnd now I get 16 characters.\n\n368\n00:19:17.360 --> 00:19:21.340\nNow the neat part about this, every time\nI run it I'm gonna get a different value.\n\n369\n00:19:21.340 --> 00:19:24.010\nSo if I need to generate more salts\nI can just continue to do this.\n\n370\n00:19:24.010 --> 00:19:29.120\nSo I do this when I generate my\nreplication keys and other things.\n\n371\n00:19:29.120 --> 00:19:32.950\nThe other thing is by doing\na SHA 256 sum it is hexadecimal.\n\n372\n00:19:32.950 --> 00:19:35.850\nSo there's no characters that\nare outside of the hexadecimal range.\n\n373\n00:19:35.850 --> 00:19:36.860\nThat's nice and random.\n\n374\n00:19:36.860 --> 00:19:39.720\nIf you're running at the same time as me,\nyou're getting a different number.\n\n375\n00:19:39.720 --> 00:19:40.620\nAnd if I run it again,\n\n376\n00:19:40.620 --> 00:19:44.490\neven right here on the same machine,\nI'm gonna get something different, right?\n\n377\n00:19:44.490 --> 00:19:47.720\nIt ended in f6b6 a minute ago,\nnow it ends in 481b, right?\n\n378\n00:19:47.720 --> 00:19:52.920\nSo that's a good number, I'm gonna\ncopy that and now I've got it, right?\n\n379\n00:19:52.920 --> 00:19:56.220\nNow, if somebody gets my salt.\n\n380\n00:19:56.220 --> 00:19:58.640\nAnd they know that I\nused short [INAUDIBLE].\n\n381\n00:19:58.640 --> 00:20:01.760\nIn theory that you could use it\nto regenerate the exact same data\n\n382\n00:20:01.760 --> 00:20:03.810\nI generate and\nnow my security is compromised.\n\n383\n00:20:03.810 --> 00:20:06.660\nSo this is something that's kind of\nimportant, we want to protect this.\n\n384\n00:20:06.660 --> 00:20:08.980\nNow we are going to\ngenerate a private key.\n\n385\n00:20:08.980 --> 00:20:11.020\nAnd as soon as we have the private key,\nwe can throw [INAUDIBLE] away and\n\n386\n00:20:11.020 --> 00:20:12.100\nnever look at it again.\n\n387\n00:20:12.100 --> 00:20:13.630\nRight?\nWe just need it to generate our\n\n388\n00:20:13.630 --> 00:20:17.450\nprivate key If the private key ever\nbecomes invalid we can generate a new one.\n\n389\n00:20:17.450 --> 00:20:19.710\nWe can use a different salt then,\nit doesn't matter.\n\n390\n00:20:19.710 --> 00:20:23.270\nSo I'm going to come in and\ncreate that key now.\n\n391\n00:20:23.270 --> 00:20:26.690\nSo that last command was just\nto generate a random number.\n\n392\n00:20:26.690 --> 00:20:29.030\nYou probably could have\ndone it other ways too but\n\n393\n00:20:29.030 --> 00:20:32.310\nthat's a way to get about as\nrandom as we're going to get.\n\n394\n00:20:32.310 --> 00:20:36.950\nNow I can say LDNS -signzone.\n\n395\n00:20:36.950 --> 00:20:39.540\nI need to sign my zone file.\n\n396\n00:20:39.540 --> 00:20:41.850\nI've got my ZSK, my KSK.\n\n397\n00:20:41.850 --> 00:20:43.430\nI've got my DS generated.\n\n398\n00:20:43.430 --> 00:20:44.270\nI've got a salt.\n\n399\n00:20:44.270 --> 00:20:45.790\nI've got everything I need.\n\n400\n00:20:45.790 --> 00:20:47.690\nI just need to string\nit all together here.\n\n401\n00:20:47.690 --> 00:20:50.500\nSo the first thing I need\nto do is I need to tell\n\n402\n00:20:50.500 --> 00:20:54.220\nit that I'm going to be signing the zone,\nright?\n\n403\n00:20:54.220 --> 00:20:55.490\nAnd when I jump in and\n\n404\n00:20:55.490 --> 00:21:01.260\nspecify all this, the salt is really\nkind of the most important part.\n\n405\n00:21:01.260 --> 00:21:02.980\nSo I'm gonna jump that one in.\n\n406\n00:21:02.980 --> 00:21:06.060\nAnd I will just paste in that salt, right?\n\n407\n00:21:06.060 --> 00:21:07.505\nCopy and paste is your friend here,\n\n408\n00:21:07.505 --> 00:21:09.810\ncuz there's no way you can\nremember all this junk.\n\n409\n00:21:09.810 --> 00:21:12.190\nSo I, I've got the salt\nthat I'm feeding into it.\n\n410\n00:21:12.190 --> 00:21:14.010\nAnd then I need to tell\nit what I'm assigning.\n\n411\n00:21:14.010 --> 00:21:20.070\nI'm assigning IT Pro TV demo.org right,\nthat's the zone that I'm signing.\n\n412\n00:21:20.070 --> 00:21:24.480\nNow I need to provide it my zone\nsigning key, all right, and for\n\n413\n00:21:24.480 --> 00:21:25.990\nthe zone signing key.\n\n414\n00:21:25.990 --> 00:21:30.880\nI need to give it that, that key id\nthat we had from just moment ago.\n\n415\n00:21:30.880 --> 00:21:36.250\nSo my zone signing was five\nnine three nine one, right.\n\n416\n00:21:36.250 --> 00:21:37.745\nAnd then I need to give\nit My key signing key.\n\n417\n00:21:37.745 --> 00:21:43.000\nAnd my key signing key was 19180 and\n\n418\n00:21:43.000 --> 00:21:47.980\nI don't have those memorized what is\nactually shown on to me on another screen\n\n419\n00:21:47.980 --> 00:21:48.930\nof yours [INAUDIBLE] a lot.\n\n420\n00:21:48.930 --> 00:21:53.740\nSo I am going to punch that in and now it\nknows the key ideas to use for that, okay?\n\n421\n00:21:53.740 --> 00:21:56.230\nAnd once I have got that punched in,\nI can run it and this is going to look for\n\n422\n00:21:56.230 --> 00:21:58.260\nthat zone And it's gonna sign it for me.\n\n423\n00:21:58.260 --> 00:21:58.980\nAnd the best part,\n\n424\n00:21:58.980 --> 00:22:02.770\nit's gonna create signatures for\nevery single host inside of that file.\n\n425\n00:22:02.770 --> 00:22:05.480\nThat's why ldns-utils is so important.\n\n426\n00:22:05.480 --> 00:22:07.604\nYou can do this other ways, but there's so\n\n427\n00:22:07.604 --> 00:22:10.505\nmany signatures to generate\nthat it becomes a nightmare.\n\n428\n00:22:12.624 --> 00:22:14.330\nAll right, when I run that.\n\n429\n00:22:14.330 --> 00:22:16.810\nShoot, I forgot something important.\n\n430\n00:22:16.810 --> 00:22:22.730\nWhen you run it, I said itprotvdemo.org\nIt's actually asking for the file name.\n\n431\n00:22:22.730 --> 00:22:25.720\nAnd mine is itprotvdemo.org.dns.\n\n432\n00:22:25.720 --> 00:22:28.800\nSo I need to correct that file name and\nget that squared away.\n\n433\n00:22:28.800 --> 00:22:31.760\nAnd, you know, what if it needs\na file name for the key ID?\n\n434\n00:22:31.760 --> 00:22:32.700\nWill tell me.\n\n435\n00:22:32.700 --> 00:22:33.720\nShoot, it does.\n\n436\n00:22:33.720 --> 00:22:36.900\nSo if you look at the documentation,\nif I bothered to read the documentation,\n\n437\n00:22:36.900 --> 00:22:42.440\nit would have told me that, see how\nit's looking for itprotvdemo.org, right?\n\n438\n00:22:42.440 --> 00:22:44.000\nAnd I got a no such file or directory.\n\n439\n00:22:44.000 --> 00:22:47.050\nCause it was looking for\nyou know, without the .DNS.\n\n440\n00:22:47.050 --> 00:22:50.260\nand then after that,\nit's trying to read 59391.private.\n\n441\n00:22:50.260 --> 00:22:54.220\nI need to actually give it\nthat full key file name.\n\n442\n00:22:54.220 --> 00:22:55.038\nAnd if I look.\n\n443\n00:22:55.038 --> 00:22:57.870\nI have 593.1.private,\n\n444\n00:22:57.870 --> 00:23:00.740\nit's just all the stuff from\nthe beginning that I need to provide.\n\n445\n00:23:00.740 --> 00:23:02.990\nIt kind of needs to know\nthe algorithm that I chose, and so\n\n446\n00:23:02.990 --> 00:23:03.680\nI didn't include that.\n\n447\n00:23:03.680 --> 00:23:06.930\nFortunately, it's the same for all of me,\nso again I can copy and paste that.\n\n448\n00:23:06.930 --> 00:23:09.150\nI'm gonna make this command nice and long.\n\n449\n00:23:11.610 --> 00:23:15.050\nSo I'm just gonna add that\nto my zone signing key.\n\n450\n00:23:15.050 --> 00:23:16.750\nAnd to my key signing key.\n\n451\n00:23:16.750 --> 00:23:19.490\nSo now it's got the proper\nzone filename and\n\n452\n00:23:19.490 --> 00:23:22.870\nit's got the two keys that it\nneeds to be able to sign it.\n\n453\n00:23:22.870 --> 00:23:28.050\nAnd when I run that i may run really fast,\nit may run really slow.\n\n454\n00:23:28.050 --> 00:23:31.210\nIt depends on how big your zone is\ncuz it's gotta go and generate all\n\n455\n00:23:31.210 --> 00:23:36.170\nthis signatures and when it's done,\nyou don't get a lot of fanfare, right?\n\n456\n00:23:36.170 --> 00:23:39.050\nBut, hopefully, it executes for you.\n\n457\n00:23:39.050 --> 00:23:44.082\nAnd what you're left with is a file\nthat matches your zone name,\n\n458\n00:23:44.082 --> 00:23:46.605\nbut ends in Dot signed, right?\n\n459\n00:23:46.605 --> 00:23:51.900\nSo now I've got itprotvdemo.org.dns, and\nthen I've got itprotvdemo.org.dns.signed.\n\n460\n00:23:51.900 --> 00:23:53.571\nThat's what I want, right?\n\n461\n00:23:53.571 --> 00:23:58.405\nAnd if I look inside of it, it's kind of\ninteresting because it is gonna have just\n\n462\n00:23:58.405 --> 00:24:00.549\na bunch of extra stuff inside of it.\n\n463\n00:24:00.549 --> 00:24:04.220\nIf I edit it which you\nshouldn't change the file.\n\n464\n00:24:04.220 --> 00:24:07.750\nIf you change the file it's going\nto damage the signatures, right?\n\n465\n00:24:07.750 --> 00:24:09.000\nSo I can't make any changes but\n\n466\n00:24:09.000 --> 00:24:11.890\nI can still use vi to edit it cuz\nI wanna change the word wrapping.\n\n467\n00:24:11.890 --> 00:24:14.990\nYou'll see,\nit'll be a mess when I open it up.\n\n468\n00:24:14.990 --> 00:24:20.110\nIt is still plain text,\nit's got signatures\n\n469\n00:24:20.110 --> 00:24:23.720\nall over the place and they wrap around\nthe screen and it makes a giant mess.\n\n470\n00:24:23.720 --> 00:24:28.520\nSo what I'm gonna do is in,\nthe reason I'm in them is I can do a set,\n\n471\n00:24:28.520 --> 00:24:29.670\nwrap, exclamation point.\n\n472\n00:24:29.670 --> 00:24:32.080\nI can turn off the wrap and\nnow we can actually read it.\n\n473\n00:24:32.080 --> 00:24:33.830\nNow, looks like a zone file, right.\n\n474\n00:24:33.830 --> 00:24:38.746\nAnd what you'll see is that every\nrecord you have, you now have two of.\n\n475\n00:24:38.746 --> 00:24:44.070\nSo I had a record for DNS 1,\nthat itprotvdemo.org right there, right?\n\n476\n00:24:44.070 --> 00:24:47.550\nThere's that record and\nit's an A record that points to this IP.\n\n477\n00:24:47.550 --> 00:24:52.480\nIt's stored right here in plain text, and\nthen right after it, I have an RR sig.\n\n478\n00:24:52.480 --> 00:24:55.510\nThere's my signature, right,\nand the signature for\n\n479\n00:24:55.510 --> 00:24:58.010\nthis one, it's still an A record.\n\n480\n00:24:58.010 --> 00:25:00.035\nAnd it's got 8, 3.\n\n481\n00:25:00.035 --> 00:25:04.639\n8 is my hashing algorithm and\n3 is my digest algorithm.\n\n482\n00:25:04.639 --> 00:25:08.050\nNow I chose shot 256 for both of them.\n\n483\n00:25:08.050 --> 00:25:10.911\nBut they're different numbers just because\nthe protocols that are supporters.\n\n484\n00:25:10.911 --> 00:25:14.610\nSo, 8 and 3,\nthat's telling me what I picked.\n\n485\n00:25:14.610 --> 00:25:17.180\nAnd then I see my time to live.\n\n486\n00:25:17.180 --> 00:25:20.910\nFollowed by the actual\nsignature kind of beyond that.\n\n487\n00:25:20.910 --> 00:25:27.660\nSo if I kind of scroll along further and\nmove along, there we go.\n\n488\n00:25:27.660 --> 00:25:32.200\nI start to get into the signature\nvalues right here and\n\n489\n00:25:32.200 --> 00:25:34.560\nso here it is, the signature for\nthis one and it will go on and on.\n\n490\n00:25:34.560 --> 00:25:37.990\nI'm not going to scroll all the way to\nthe end but it lays it out right there.\n\n491\n00:25:37.990 --> 00:25:40.820\nSo it's all kind of tucked in here and\n\n492\n00:25:40.820 --> 00:25:44.850\nmy zone file is far different\nthan it used to be, right?\n\n493\n00:25:44.850 --> 00:25:46.000\nBecause every record is signed.\n\n494\n00:25:46.000 --> 00:25:49.680\nAnd if I mess with any of them, it breaks\nthat signature and does not work anymore.\n\n495\n00:25:49.680 --> 00:25:50.370\nAll right.\n\n496\n00:25:50.370 --> 00:25:53.430\nSo let me get out of that.\n\n497\n00:25:53.430 --> 00:25:57.590\nNow that it's all nice and\nsigned, I'm almost done, right?\n\n498\n00:25:57.590 --> 00:25:59.900\nI need to tell my server to use it,\nthough.\n\n499\n00:25:59.900 --> 00:26:04.480\nMy server, NSD,\nis looking at itprotvdemo.org.dns,\n\n500\n00:26:04.480 --> 00:26:07.460\nand that doesn't have signatures in it.\n\n501\n00:26:07.460 --> 00:26:11.024\nSo I need to reconfigure my\nserver to look at this one,\n\n502\n00:26:11.024 --> 00:26:13.808\nthe one that's signed instead, right?\n\n503\n00:26:13.808 --> 00:26:18.542\nSo I'm gonna edit /etc/nsd/nsd.conf And\n\n504\n00:26:18.542 --> 00:26:24.930\nI'm gonna go in there and\nfind my zone definition, right?\n\n505\n00:26:24.930 --> 00:26:27.292\nAnd this looks a little different\nthan part one because I set up\n\n506\n00:26:27.292 --> 00:26:28.190\nreplication, right.\n\n507\n00:26:28.190 --> 00:26:30.400\nIn part one I didn't have\nreplication in place and so\n\n508\n00:26:30.400 --> 00:26:33.520\nnow you'll see where I've got\nmy key defined for replication.\n\n509\n00:26:33.520 --> 00:26:35.572\nAnd well,\nI highlight really doesn't help, does it.\n\n510\n00:26:35.572 --> 00:26:38.413\nBut you can see the key I generated for\nreplication, and\n\n511\n00:26:38.413 --> 00:26:40.030\nthe other person that I set up.\n\n512\n00:26:40.030 --> 00:26:41.970\nBut the key, or not the key, but\n\n513\n00:26:41.970 --> 00:26:44.300\nthe important part here is\nthe zone down at the bottom.\n\n514\n00:26:44.300 --> 00:26:46.640\nHere's the zone, itprotvdemo.org.\n\n515\n00:26:46.640 --> 00:26:50.368\nAnd the file that it's pointing to,\nitprotvdemo.org.dns.\n\n516\n00:26:50.368 --> 00:26:56.190\nAnd I'm just gonna come in here and\nI'm gonna add to that .signed.\n\n517\n00:26:56.190 --> 00:26:59.296\nSo now it's gonna use the signed\nversion of that file.\n\n518\n00:26:59.296 --> 00:27:04.134\nAnd all the replication is still there, so\nit will replicate to the other side and\n\n519\n00:27:04.134 --> 00:27:06.570\nit will get the signed one, too.\n\n520\n00:27:06.570 --> 00:27:08.450\nNow it won't change its file\nname on the other side.\n\n521\n00:27:08.450 --> 00:27:09.780\nIt's just whatever it's set at right now.\n\n522\n00:27:09.780 --> 00:27:12.660\nIn fact, it's usually just stored\nin RAM not even on the file system.\n\n523\n00:27:12.660 --> 00:27:14.685\nBut the other side, the other,\n\n524\n00:27:14.685 --> 00:27:18.437\nthe slave system will have all\nthe signatures just ike I do.\n\n525\n00:27:18.437 --> 00:27:20.170\nSo let me get out and save that.\n\n526\n00:27:20.170 --> 00:27:27.040\nThe cool part about of that is, my server\nis now looking at itvprotv.org.dns.signed.\n\n527\n00:27:27.040 --> 00:27:31.763\nI can go and edit itprotvdemo.org\nto my heart's content,\n\n528\n00:27:31.763 --> 00:27:34.800\nitprotvdemo.org.dns, that one.\n\n529\n00:27:34.800 --> 00:27:37.547\nYou edit it and then you resign it.\n\n530\n00:27:37.547 --> 00:27:40.550\nAnd when you resign it,\nit generates a new .signed file and\n\n531\n00:27:40.550 --> 00:27:42.722\nthe server's configured to look at that.\n\n532\n00:27:42.722 --> 00:27:46.237\nAnd so you never edit the .sign when\nyou're always editing that unencrypted\n\n533\n00:27:46.237 --> 00:27:49.873\none, and Iit just regenerates it, and\nyou do that every time you make a change.\n\n534\n00:27:49.873 --> 00:27:53.980\n&gt;&gt; Don, does that overwrite\nthe prior signed DNS zone file?\n\n535\n00:27:53.980 --> 00:27:55.090\nSo when you generate a new one,\n\n536\n00:27:55.090 --> 00:27:57.070\nyou don't have to worry about\nduplicates being in the list?\n\n537\n00:27:57.070 --> 00:27:58.915\n&gt;&gt; Absolutely.\nYep, it overwrites it cuz it's the same\n\n538\n00:27:58.915 --> 00:27:59.820\nfile name.\n\n539\n00:27:59.820 --> 00:28:04.620\nAnd remember that the actual workflow\nwould be, edit the non-signed file.\n\n540\n00:28:04.620 --> 00:28:06.460\nSo you edit the original file.\n\n541\n00:28:06.460 --> 00:28:09.019\nYou increase your serial number,\nright, by at least one.\n\n542\n00:28:09.019 --> 00:28:10.460\nYou've got to bump up that serial number.\n\n543\n00:28:10.460 --> 00:28:13.100\nThat's important, and then you resign it.\n\n544\n00:28:14.110 --> 00:28:19.240\nThen, on your server, you can do an SD\ncontrol reload and have it reload\n\n545\n00:28:19.240 --> 00:28:23.610\nthat zone or you can just restart in SD,\nwhichever one works in your environment.\n\n546\n00:28:23.610 --> 00:28:25.740\nIf you want zero downtime,\nyou reload the zone.\n\n547\n00:28:25.740 --> 00:28:29.440\nAnd when you reload the zone,\nnow the new signatures are loaded,\n\n548\n00:28:29.440 --> 00:28:32.700\nyour changes are loaded, and\nthe new serial numbers are loaded.\n\n549\n00:28:32.700 --> 00:28:35.004\nSo, the replica sees the new\nserial numbers, and says, oop,\n\n550\n00:28:35.004 --> 00:28:36.250\ngive me a copy of that.\n\n551\n00:28:36.250 --> 00:28:38.170\nAnd now it's got all the latest data, too.\n\n552\n00:28:38.170 --> 00:28:39.760\nSo it's all a part of that process.\n\n553\n00:28:41.020 --> 00:28:44.440\nOkay, my server is done, this server.\n\n554\n00:28:44.440 --> 00:28:46.410\nI need to double check it to\nmake sure it's working though.\n\n555\n00:28:47.480 --> 00:28:50.260\nI say it's not, I never actually\ndid reload the darn thing, did I?\n\n556\n00:28:50.260 --> 00:28:55.140\nIf you look at NSD-control, you'll see\nwhere you've got in here where you can\n\n557\n00:28:55.140 --> 00:28:59.780\ntell it to do a reconfig and a reload.\n\n558\n00:28:59.780 --> 00:29:03.470\nReload or reload an individual zone,\nmy zone file definitely changed.\n\n559\n00:29:03.470 --> 00:29:07.050\nReconfig will reload the configuration.\n\n560\n00:29:07.050 --> 00:29:08.050\nWell that changed for me, too,\n\n561\n00:29:08.050 --> 00:29:11.130\ncuz I had to change to the .signed\nfile in the server config.\n\n562\n00:29:11.130 --> 00:29:12.810\nSo I kinda need both.\n\n563\n00:29:12.810 --> 00:29:15.850\nAnd a reconfig will likely\ndo everything that I need or\n\n564\n00:29:15.850 --> 00:29:17.750\nI can just restart NSD again.\n\n565\n00:29:17.750 --> 00:29:19.420\nAll those methods work.\n\n566\n00:29:19.420 --> 00:29:25.940\nBut if I wanna do a NSD\ncontrol [LAUGH] there we go,\n\n567\n00:29:25.940 --> 00:29:31.640\nand then do a reconfig, that's gonna tell\nit to reload the server configuration,\n\n568\n00:29:31.640 --> 00:29:34.910\nso now it's looking at the signed file.\n\n569\n00:29:34.910 --> 00:29:38.693\nAnd it should have picked it up and\nupdated my cache, but\n\n570\n00:29:38.693 --> 00:29:44.840\njust in case it didn't, I'm going to\ncome in and say reload itprotvdemo.org.\n\n571\n00:29:44.840 --> 00:29:47.230\nAnd that way I know it's reloaded it.\n\n572\n00:29:47.230 --> 00:29:50.500\nAnd now I can test by doing a dig, right?\n\n573\n00:29:50.500 --> 00:29:53.540\nSo way back in my history,\n\n574\n00:29:53.540 --> 00:29:59.540\nI did a dig against itprotvdemo\nto see if it had a signature.\n\n575\n00:29:59.540 --> 00:30:01.550\nAnd when I redo that.\n\n576\n00:30:01.550 --> 00:30:04.357\nHang on, let me, let me see if I can't\nget this word wrap a little straight.\n\n577\n00:30:04.357 --> 00:30:05.440\nThere we go.\n\n578\n00:30:05.440 --> 00:30:10.760\nSo when I rerun that command, I can see\nhere that it reaches out to the server,\n\n579\n00:30:10.760 --> 00:30:16.565\nso I did dig@127.0.0.1, so\nI'm doing a lookup against this server.\n\n580\n00:30:16.565 --> 00:30:21.760\nitprotvdemo.org, I'm looking for that\ndomain, and I'm asking for the DNS key.\n\n581\n00:30:21.760 --> 00:30:27.610\nAnd before, I got IN DNSKEY and nothing.\n\n582\n00:30:27.610 --> 00:30:31.630\nNow I get IN DNSKEY and\nthen an answer section.\n\n583\n00:30:31.630 --> 00:30:34.350\nAnd here I can see that\nkey laid out right here.\n\n584\n00:30:34.350 --> 00:30:38.111\nYou know, I've got my keys in place and\nsure enough, like in part one,\n\n585\n00:30:38.111 --> 00:30:41.135\nmy key ideas have been moved\ndown here instead of up here.\n\n586\n00:30:41.135 --> 00:30:42.919\nAnd I've got 256, 257, interesting.\n\n587\n00:30:42.919 --> 00:30:46.180\nSo anyhow, I've got my key id which\nI can clearly read right there.\n\n588\n00:30:46.180 --> 00:30:48.700\nThere's my zone signing key and\nmy key signing key.\n\n589\n00:30:48.700 --> 00:30:51.390\nAnd the key is stored in that one.\n\n590\n00:30:51.390 --> 00:30:53.510\nThat's my public key not the private key.\n\n591\n00:30:53.510 --> 00:30:56.310\nThe private key is stored\nright here on my hard drive.\n\n592\n00:30:56.310 --> 00:30:57.160\nRight, those files,\n\n593\n00:30:57.160 --> 00:31:00.770\nI don't want someone to get those cuz then\nthey can start signing zones on my behalf.\n\n594\n00:31:00.770 --> 00:31:02.120\nYou don't want that, right?\n\n595\n00:31:02.120 --> 00:31:03.210\nBut this is the public key.\n\n596\n00:31:03.210 --> 00:31:05.390\nThis is the one we do hand out, all right?\n\n597\n00:31:05.390 --> 00:31:06.970\nSo I know that's working.\n\n598\n00:31:06.970 --> 00:31:08.810\nI need to check on my other server and\n\n599\n00:31:08.810 --> 00:31:13.140\nmake sure that it's able to see that cuz\nit's gonna replicate over to this side,\n\n600\n00:31:13.140 --> 00:31:17.450\ntoo, and I'll query it and\nit's already got it, right?\n\n601\n00:31:17.450 --> 00:31:20.680\nI didn't even have to come over here and\ndo a pull cuz I had notify set up on my\n\n602\n00:31:20.680 --> 00:31:24.480\nreplication so it's already got it and\nnow it's signed over here too, right?\n\n603\n00:31:24.480 --> 00:31:27.215\nSo I didn't configure\na single thing on DNS2,\n\n604\n00:31:27.215 --> 00:31:31.440\nthe replica zone carried\neverything over with it, right?\n\n605\n00:31:31.440 --> 00:31:35.000\nIf I reran those same commands on this\none, it would have a different key.\n\n606\n00:31:35.000 --> 00:31:37.580\nIt would have a different salt,\nall of the signatures would be different,\n\n607\n00:31:37.580 --> 00:31:40.280\nit would break everything so\nit's important to use replication.\n\n608\n00:31:40.280 --> 00:31:43.826\nAll right, as far as my servers\nare concerned, they're done but\n\n609\n00:31:43.826 --> 00:31:47.256\nnow it's time for the registrar,\nthis is the important part.\n\n610\n00:31:47.256 --> 00:31:50.297\nSo on the registrar side,\n\n611\n00:31:50.297 --> 00:31:56.254\nwhat I need to do is generate\na deligate signer key.\n\n612\n00:31:56.254 --> 00:31:57.729\nAnd I haven't done that yet.\n\n613\n00:31:57.729 --> 00:32:00.736\nLet me get on the right server\nhere before I screw that up.\n\n614\n00:32:00.736 --> 00:32:07.277\nI've got my zone signing key,\nwhich is that 59391.\n\n615\n00:32:07.277 --> 00:32:10.820\nAnd I've got my zone signing,\nother way around, key signing key.\n\n616\n00:32:10.820 --> 00:32:13.420\nSee how easy it is to mix this stuff up.\n\n617\n00:32:13.420 --> 00:32:16.870\nMy key signing key is 19180.\n\n618\n00:32:16.870 --> 00:32:19.200\nI need to make a ds key.\n\n619\n00:32:19.200 --> 00:32:21.460\nOne that I can send up to my registrar.\n\n620\n00:32:21.460 --> 00:32:23.190\nSo I've got a quick command for that one.\n\n621\n00:32:23.190 --> 00:32:25.560\nThis is another ldns command.\n\n622\n00:32:25.560 --> 00:32:28.437\nAnd I'm gonna do ldns-key2ds.\n\n623\n00:32:28.437 --> 00:32:31.850\nIt's important that we\n\n624\n00:32:31.850 --> 00:32:35.110\nrun this from inside of\nthe directory that has the files,\n\n625\n00:32:35.110 --> 00:32:38.270\ncoz this is gonna be looking for\nthis stuff to be able to sign this right.\n\n626\n00:32:38.270 --> 00:32:41.480\nBut I'm gonna create\nthe ds key right here.\n\n627\n00:32:41.480 --> 00:32:46.680\nSo ldns-key2ds, and\nthen I need to tell it what I want to do.\n\n628\n00:32:46.680 --> 00:32:48.860\nNow by default, it's not gonna\nshow me a lot of information,\n\n629\n00:32:48.860 --> 00:32:50.250\nit expects to write it to a file.\n\n630\n00:32:50.250 --> 00:32:52.080\nI want it to show me on the screen,\ncuz I'm gonna cut and\n\n631\n00:32:52.080 --> 00:32:53.530\npaste it into my registrar.\n\n632\n00:32:53.530 --> 00:32:56.760\nSo I'm gonna do -n, so\nit shows it on the screen.\n\n633\n00:32:56.760 --> 00:32:59.270\nAnd then I need to tell it\nthe algorithm I'm gonna use.\n\n634\n00:32:59.270 --> 00:33:05.390\nWell ldns-key2ds only supports\ntwo algorithms, SHA1 and SHA286.\n\n635\n00:33:05.390 --> 00:33:07.890\nBy the time you watch this\nepisode it might support more, so\n\n636\n00:33:07.890 --> 00:33:09.930\ncheck the man file on it\nsee if they added more.\n\n637\n00:33:09.930 --> 00:33:14.419\nThey will show up in there\nif do a man ldns-key2ds.\n\n638\n00:33:14.419 --> 00:33:19.350\nIn the documentation,\nsee how it tells me right here?\n\n639\n00:33:19.350 --> 00:33:20.350\nSHA1, SHA2, D6, and that's it.\n\n640\n00:33:20.350 --> 00:33:23.050\nCheck and\nsee if they've added new ones since then.\n\n641\n00:33:23.050 --> 00:33:24.210\nAnd they might have them.\n\n642\n00:33:24.210 --> 00:33:26.340\nWhen I put this stuff on my registrar,\nremember.\n\n643\n00:33:26.340 --> 00:33:28.590\nHover, they had Ghost and SHA384.\n\n644\n00:33:28.590 --> 00:33:29.120\nIt's not here.\n\n645\n00:33:30.250 --> 00:33:31.100\nI can't do that.\n\n646\n00:33:31.100 --> 00:33:33.590\nSo those are not gonna be an option for\nme.\n\n647\n00:33:33.590 --> 00:33:38.000\nSo I'm gonna come in and run this And so\n\n648\n00:33:38.000 --> 00:33:42.150\nI'm gonna tell it not to a file, but\ndisplay on my screen instead, and -2.\n\n649\n00:33:42.150 --> 00:33:43.670\nI do want to do SHA-256.\n\n650\n00:33:43.670 --> 00:33:47.240\nI'm gonna take the best I can get.\n\n651\n00:33:47.240 --> 00:33:52.030\nAnd then I'm gonna point it to\nitprotvdemo.org.dns.signed.\n\n652\n00:33:52.030 --> 00:33:56.420\nI need to point at that signed file.\n\n653\n00:33:56.420 --> 00:34:00.260\nIt's gonna calculate a delicate signature\n\n654\n00:34:00.260 --> 00:34:03.640\nbased on the signed file\nthat I created right now.\n\n655\n00:34:03.640 --> 00:34:04.420\nOkay.\n\n656\n00:34:04.420 --> 00:34:09.150\nAnd so it's gonna generate that,\nbecause the public keys for\n\n657\n00:34:09.150 --> 00:34:14.500\nthe zone signing key and the a key\nascending key are both in there, right?\n\n658\n00:34:14.500 --> 00:34:18.360\nNow as I change my zone,\nas I change the records, and I resign it.\n\n659\n00:34:18.360 --> 00:34:20.410\nThe record signatures will change.\n\n660\n00:34:20.410 --> 00:34:23.200\nBut the zone signing key and\nthe key signing key won't change.\n\n661\n00:34:23.200 --> 00:34:25.730\nAnd so it's just pulling\nthem out of that file and\n\n662\n00:34:25.730 --> 00:34:28.120\nbuilding a new key based off of it.\n\n663\n00:34:28.120 --> 00:34:31.110\nAnd it's gonna take that data,\ndisplay it on my screen for me, and\n\n664\n00:34:31.110 --> 00:34:33.230\nfrom there I can load it up for registrar.\n\n665\n00:34:33.230 --> 00:34:35.910\nAnd I won't have to change that on the\nregistrar again unless I think something's\n\n666\n00:34:35.910 --> 00:34:37.510\ngotten compromised.\n\n667\n00:34:37.510 --> 00:34:39.930\nBut, the important thing\nhere is when I look at it,\n\n668\n00:34:39.930 --> 00:34:45.640\nI can see the information about the key\nID, that 19180 that it pulled in.\n\n669\n00:34:45.640 --> 00:34:49.060\nI can see the 8 and\n2 that tell the algorithm and digest.\n\n670\n00:34:49.060 --> 00:34:53.570\nAnd then lastly, I can see the actual\nsignature that it generated.\n\n671\n00:34:53.570 --> 00:34:54.660\nSo I need that signature.\n\n672\n00:34:54.660 --> 00:34:55.329\nI'm gonna copy that.\n\n673\n00:34:56.620 --> 00:34:58.310\nNow comes the fun part, right?\n\n674\n00:34:58.310 --> 00:35:01.800\nNow I've gotta jump over and\ntake this to my registrar.\n\n675\n00:35:01.800 --> 00:35:03.650\nAnd this is where it gets\na little different, so\n\n676\n00:35:03.650 --> 00:35:06.930\nI'm using hover, you might be using\nsomething completely different.\n\n677\n00:35:06.930 --> 00:35:09.770\nSo you'll have to check\nout their documentation.\n\n678\n00:35:09.770 --> 00:35:12.740\nBut in Hover, they give me nice,\neasy fields, right?\n\n679\n00:35:12.740 --> 00:35:16.010\nI need my key tag, and\nmy key tag was 19 180.\n\n680\n00:35:16.010 --> 00:35:18.950\nRight, it matches my key signing key.\n\n681\n00:35:18.950 --> 00:35:20.650\nThen my algorithm.\n\n682\n00:35:20.650 --> 00:35:24.142\nMy algorithm was 8, RSA/SHA-256.\n\n683\n00:35:24.142 --> 00:35:24.930\nRight?\n\n684\n00:35:24.930 --> 00:35:29.620\nMy digest algorithm was SHA-256,\nand so I can pick that.\n\n685\n00:35:29.620 --> 00:35:32.840\nNow they don't show me 1, 2, whatever\nhere, so that's a little annoying,\n\n686\n00:35:32.840 --> 00:35:36.220\nbut I know mine was 256,\nso I've paid attention.\n\n687\n00:35:36.220 --> 00:35:39.860\nAnd then lastly, they want the digest and\nthat's what we just generated.\n\n688\n00:35:39.860 --> 00:35:42.240\nSo I'm gonna paste right in there,\nall right.\n\n689\n00:35:42.240 --> 00:35:49.340\nNow, Hover told me that they don't support\nDNS sec with their own DNS servers.\n\n690\n00:35:49.340 --> 00:35:53.170\nSo they let me,\nprovide my own DNS servers, right?\n\n691\n00:35:53.170 --> 00:35:56.470\nBut they do support DNS-ek\non their registrar side.\n\n692\n00:35:56.470 --> 00:35:57.730\nAnd so that's what I just did.\n\n693\n00:35:57.730 --> 00:36:01.110\nI just put the delegate\nsigner data right here.\n\n694\n00:36:01.110 --> 00:36:05.930\nAnd when somebody queries one of my\nrecords, and they get a signature and\n\n695\n00:36:05.930 --> 00:36:08.300\nthey want to validate if it's real or not,\n\n696\n00:36:08.300 --> 00:36:13.370\nthey can come all the way up to my\nregistrar and they can take the public key\n\n697\n00:36:13.370 --> 00:36:18.300\nthat it hands out and use that to\nvalidate the zone signing key and\n\n698\n00:36:18.300 --> 00:36:22.370\nto validate the individual records and\nmake sure they haven't been tampered with.\n\n699\n00:36:22.370 --> 00:36:26.250\nAnd that process is now facilitated\nby having that right there.\n\n700\n00:36:26.250 --> 00:36:27.670\nAnd I'm just gonna hit Save.\n\n701\n00:36:27.670 --> 00:36:28.600\nAnd that's gonna go in place.\n\n702\n00:36:28.600 --> 00:36:31.360\nNow I'm making a change to my registrar.\n\n703\n00:36:31.360 --> 00:36:35.450\nAnd let me tell you changes on a registrar\nthey can take up to 72 hours to apply.\n\n704\n00:36:35.450 --> 00:36:38.570\nIt's got to propagate out to\nthe internet and all that stuff but\n\n705\n00:36:38.570 --> 00:36:42.660\nin my case because I didn't have any keys\nin there in the first place it'll probably\n\n706\n00:36:42.660 --> 00:36:47.620\npropagate pretty quick, right,\nand the DNS key has to come from\n\n707\n00:36:47.620 --> 00:36:50.930\nthe registrar because otherwise somebody\ncould spoof it in a cache somewhere else.\n\n708\n00:36:50.930 --> 00:36:56.670\nThese don't get cached and so\nas long as my records are updated, and\n\n709\n00:36:56.670 --> 00:37:00.750\nas long as hover does a good job updating\ntheir registered data base which they do,\n\n710\n00:37:00.750 --> 00:37:02.800\nthis should take effect pretty quick.\n\n711\n00:37:02.800 --> 00:37:04.470\nBut the official lines it could 72 hours.\n\n712\n00:37:05.540 --> 00:37:08.140\nSo how do I know if it worked?\n\n713\n00:37:08.140 --> 00:37:08.680\nRight.\n\n714\n00:37:08.680 --> 00:37:09.410\nTechnically we're done.\n\n715\n00:37:09.410 --> 00:37:12.620\nWe just setup DNS set, we,\nend of the episode and walk away.\n\n716\n00:37:12.620 --> 00:37:13.320\nRight.\n\n717\n00:37:13.320 --> 00:37:15.190\nBut we do need a test and\nverify that it's working.\n\n718\n00:37:15.190 --> 00:37:16.790\nIt's just this part you\nmight have to wait awhile.\n\n719\n00:37:16.790 --> 00:37:19.470\nLet's see if it's working already.\n\n720\n00:37:19.470 --> 00:37:22.650\nSo I'm gonna jump over to one\nof my servers to test it out.\n\n721\n00:37:22.650 --> 00:37:26.800\nTo test it out you can\nuse the dig command.\n\n722\n00:37:26.800 --> 00:37:27.400\nRight.\n\n723\n00:37:27.400 --> 00:37:29.600\nAnd I can dig against\none of my servers but\n\n724\n00:37:29.600 --> 00:37:32.910\nit's better to dig against\na public server out there, right.\n\n725\n00:37:32.910 --> 00:37:35.920\nSo I'll take like Google.\n\n726\n00:37:35.920 --> 00:37:37.800\nAnd look to them.\n\n727\n00:37:37.800 --> 00:37:43.510\nAnd I'll try and look up the DS record for\nitprotvdemo.org.\n\n728\n00:37:43.510 --> 00:37:47.705\nIn fact, let me take one that\nI know doesn't work, right?\n\n729\n00:37:47.705 --> 00:37:48.930\nItprotvdemo.com.\n\n730\n00:37:48.930 --> 00:37:50.700\nWe don't have dnssec turned on for that.\n\n731\n00:37:50.700 --> 00:37:53.880\nSo if I run that, it's going to reach out.\n\n732\n00:37:53.880 --> 00:37:56.540\nI see that it reached out for a DS record.\n\n733\n00:37:56.540 --> 00:37:59.040\nAnd there's no answer section afterwards.\n\n734\n00:37:59.040 --> 00:38:01.740\nAnd it just goes right into\nthe authority and that;s the end of it.\n\n735\n00:38:01.740 --> 00:38:04.856\nLet's do the same thing for .org.\n\n736\n00:38:04.856 --> 00:38:06.370\nAnd this one should work.\n\n737\n00:38:06.370 --> 00:38:09.190\nSo in anticipation of that\nI'm gonna add the +mulitiline\n\n738\n00:38:09.190 --> 00:38:10.990\njust to make it look a little neater.\n\n739\n00:38:10.990 --> 00:38:13.630\nAnd when I reach out to them, I get\n\n740\n00:38:14.910 --> 00:38:20.520\nthe DS record followed by an answer\nsection and right there I can see,\n\n741\n00:38:20.520 --> 00:38:25.810\nkey ID followed by algorithm and\ndigest followed by the actual\n\n742\n00:38:25.810 --> 00:38:30.810\ndigest after that and that is coming\nright from hover not from my DNS server,\n\n743\n00:38:30.810 --> 00:38:33.860\nso that is the secret sauce for\nall of this, that's what makes this work.\n\n744\n00:38:33.860 --> 00:38:36.100\nIs that the value is coming\nfrom two different places.\n\n745\n00:38:36.100 --> 00:38:39.840\nSo if the hackers poison\nthe cache of my zone,\n\n746\n00:38:39.840 --> 00:38:42.460\nthey haven't messed with\nmy register records.\n\n747\n00:38:42.460 --> 00:38:42.990\nRight.\n\n748\n00:38:42.990 --> 00:38:43.810\nThey're different.\n\n749\n00:38:43.810 --> 00:38:49.320\nThey would have to compromise both places,\nin order to actually exploit my zone now.\n\n750\n00:38:49.320 --> 00:38:50.230\nMy zone is safe.\n\n751\n00:38:50.230 --> 00:38:53.040\nIf the cache gets poisoned,\nthe cache just gets thrown away and\n\n752\n00:38:53.040 --> 00:38:55.280\nit does a new look up and\nit gets the right value.\n\n753\n00:38:55.280 --> 00:39:00.450\nSo this effectively stops DNS cache\npoisoning if we have DNS sec enabled.\n\n754\n00:39:00.450 --> 00:39:02.880\nAnd if the clients\nare bothering the check for it.\n\n755\n00:39:02.880 --> 00:39:05.570\nIf you got the DNS server\nthat's not gonna check for it,\n\n756\n00:39:05.570 --> 00:39:06.920\nthen it doesn't matter that\nall the stuff is here.\n\n757\n00:39:06.920 --> 00:39:10.580\nIt's just gonna ignore the ds and the\nother records, they're not gonna get used.\n\n758\n00:39:12.130 --> 00:39:14.690\nBut I can see right here it's\npulling off my registrar.\n\n759\n00:39:14.690 --> 00:39:15.440\nI'm now good to go.\n\n760\n00:39:15.440 --> 00:39:18.280\nI have a DNSsec enabled zone.\n\n761\n00:39:18.280 --> 00:39:19.930\nAnd anybody looking up a record,\n\n762\n00:39:19.930 --> 00:39:24.490\nlike looking up www.itprotvdemo.org,\nthey will get the signature, and\n\n763\n00:39:24.490 --> 00:39:28.270\nthey'll be able to verify and\ntest that and see whether it works.\n\n764\n00:39:28.270 --> 00:39:31.290\n&gt;&gt; Lot of great information Don there,\nlot of steps to follow.\n\n765\n00:39:31.290 --> 00:39:34.120\nNow it does look like we're coming\nto the end of another episode but\n\n766\n00:39:34.120 --> 00:39:35.930\nDon you've shown us a lot of stuff here.\n\n767\n00:39:35.930 --> 00:39:38.970\nIs there any additional things you might\nwanna throw in here before we call it\n\n768\n00:39:38.970 --> 00:39:39.850\nquits on this one?\n\n769\n00:39:39.850 --> 00:39:41.090\n&gt;&gt; Let me show you one more thing.\n\n770\n00:39:41.090 --> 00:39:43.060\nAs far as configuring\nthe server we're done,\n\n771\n00:39:43.060 --> 00:39:45.120\nI don't really have much\nelse to show you there.\n\n772\n00:39:45.120 --> 00:39:48.175\nBut I do want to show you a quick\nway of test whether this is working,\n\n773\n00:39:48.175 --> 00:39:52.348\nVerisign has nice little\ndnssec testing page.\n\n774\n00:39:52.348 --> 00:39:56.980\nThey have it linked on\nthe actual dnssec homepages, but\n\n775\n00:39:56.980 --> 00:40:02.150\nif you go to, https, we're going to,\n\n776\n00:40:02.150 --> 00:40:08.180\nlet's see if I can merge this whole thing,\nit's dnssec-debugger.\n\n777\n00:40:08.180 --> 00:40:09.680\nActually, it might not even be HTTPS.\n\n778\n00:40:09.680 --> 00:40:12.310\nLet me get rid of that.\n\n779\n00:40:12.310 --> 00:40:18.286\nSo dnssec -debugger.verisignlabs.com and\n\n780\n00:40:18.286 --> 00:40:22.370\nthen do a / and\nput in whatever your domain is.\n\n781\n00:40:22.370 --> 00:40:25.840\nSo my domain is itprotv, well,\nlet's do itprotvdemo.com.\n\n782\n00:40:25.840 --> 00:40:27.375\nI'll try that one first.\n\n783\n00:40:27.375 --> 00:40:31.915\nITProTV.com doesn't have a sign,\nDNS signatures,\n\n784\n00:40:31.915 --> 00:40:37.730\ndnssec-debugger.verisignlabs.com/itprotvd-\nemo.com and\n\n785\n00:40:37.730 --> 00:40:40.350\nif I look, looks like the domain\nis pretty healthy, right?\n\n786\n00:40:41.460 --> 00:40:45.990\nWhen I scroll down a bit,\nI'll start to see some problems.\n\n787\n00:40:45.990 --> 00:40:49.280\nIt found two DNS key records for it.\n\n788\n00:40:49.280 --> 00:40:50.830\nAnd it had some signatures.\n\n789\n00:40:50.830 --> 00:40:57.360\nSo apparently it had DNS sec set up at\nsome point, right, And well, actually no.\n\n790\n00:40:57.360 --> 00:40:59.700\nThat's dot, that's the root.\n\n791\n00:40:59.700 --> 00:41:01.770\nYes the roots server are gonna have it.\n\n792\n00:41:01.770 --> 00:41:05.350\nAnd then dot com, yeah, all right,\nit found those records.\n\n793\n00:41:05.350 --> 00:41:08.920\nBut then by the time it\ngets down to ITPROTV.com.\n\n794\n00:41:08.920 --> 00:41:10.480\nThings aren't looking so good.\n\n795\n00:41:10.480 --> 00:41:11.250\nIt's not signed.\n\n796\n00:41:11.250 --> 00:41:13.070\nYou'll see that one's hosted by Amazon.\n\n797\n00:41:13.070 --> 00:41:16.650\nAmazon refused the lookup and that's it.\n\n798\n00:41:16.650 --> 00:41:18.730\nI don't have DNSSEC for that one.\n\n799\n00:41:18.730 --> 00:41:21.020\nSo I know that it's not functional.\n\n800\n00:41:21.020 --> 00:41:22.510\nBut if I change that and\n\n801\n00:41:22.510 --> 00:41:28.230\nwe do a lookup on org instead it'll\nrun through the same process.\n\n802\n00:41:28.230 --> 00:41:33.110\nIt looks up the dot and then it goes org\nand it looks that one up, and then it gets\n\n803\n00:41:33.110 --> 00:41:37.910\nto me, I got nice little green\ncheckmarks all the way down as it tests.\n\n804\n00:41:37.910 --> 00:41:43.030\nAnd it's not only checking the DS,\nit's also pulling the signatures\n\n805\n00:41:43.030 --> 00:41:47.690\nof individual records to test it out, like\nthe name server records, and the SOA, so\n\n806\n00:41:47.690 --> 00:41:51.100\nit's pulling that and checking to\nmake sure those records are valid.\n\n807\n00:41:51.100 --> 00:41:53.540\nThis is a great way to ensure\nthe DNSSEC is working, and\n\n808\n00:41:53.540 --> 00:41:56.770\nit's being tested from\noutside of your organization.\n\n809\n00:41:56.770 --> 00:41:59.470\nSo you know it's not\ncached on your server, or\n\n810\n00:41:59.470 --> 00:42:01.420\nyou're hitting a local DNS server,\nor something.\n\n811\n00:42:01.420 --> 00:42:02.600\nThis is a test from the outside world.\n\n812\n00:42:02.600 --> 00:42:03.960\nSo I use this all the time, and\n\n813\n00:42:03.960 --> 00:42:06.420\nit is a great way to make sure\nthat things are set up right.\n\n814\n00:42:06.420 --> 00:42:07.050\n&gt;&gt; All right, Don.\n\n815\n00:42:07.050 --> 00:42:10.610\nWell as always, we appreciate you being\nhere with us, and we do appreciate you,\n\n816\n00:42:10.610 --> 00:42:11.860\nthe viewer watching.\n\n817\n00:42:11.860 --> 00:42:14.513\nWe're gonna go ahead and\nsign out here for ITProTV.\n\n818\n00:42:14.513 --> 00:42:16.127\nI've been your host Wes Bryan.\n\n819\n00:42:16.127 --> 00:42:16.940\n&gt;&gt; And I'm Don Pezet.\n\n820\n00:42:16.940 --> 00:42:19.191\n&gt;&gt; And we'll see you next time.\n\n821\n00:42:19.191 --> 00:42:25.262\n[MUSIC]\n\n822\n00:42:25.262 --> 00:42:28.489\n&gt;&gt; Thank you for watching ITProTV.\n\n",
          "vimeoId": "196623212"
        }
      ],
      "title": "Configuring Zones"
    },
    {
      "episodes": [
        {
          "description": "In this episode, Wes and Don talk about the not to common DNS server implementation used in technologies like root hint servers and DNSSEC called NSD. They discuss the installation of NSD within a Linux system, considerations and demonstrate the process.",
          "length": "1734",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-6-1-installing_nsd-121316-PGM.00_28_41_02.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-6-1-installing_nsd-121316-PGM.00_28_41_02.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-6-1-installing_nsd-121316-PGM.00_28_41_02.Still001-sm.jpg",
          "title": "Installing NSD",
          "transcript": "WEBVTT\n\n1\n00:00:00.240 --> 00:00:01.170\nWelcome to ITProTV.\n\n2\n00:00:01.170 --> 00:00:06.804\nI'm your host [INAUDIBLE] [CROSSTALK].\n\n3\n00:00:06.804 --> 00:00:08.316\n[MUSIC]\n\n4\n00:00:08.316 --> 00:00:12.105\n&gt;&gt; You're watching ITProTV.\n\n5\n00:00:12.105 --> 00:00:15.222\n&gt;&gt; Welcome back to another\nexciting episode here at ITProTV,\n\n6\n00:00:15.222 --> 00:00:16.600\nI'm your host Wes Bryan.\n\n7\n00:00:16.600 --> 00:00:20.770\nAnd in today's episode, we're continuing\nthrough our series on DNS tech skills.\n\n8\n00:00:20.770 --> 00:00:23.770\nAnd I have to say, I think somebody\ngot an acronym wrong this morning.\n\n9\n00:00:23.770 --> 00:00:26.820\nBut before I steal his thunder,\nwelcoming back Don Pizet.\n\n10\n00:00:26.820 --> 00:00:27.640\nDon, how you doing sir?\n\n11\n00:00:27.640 --> 00:00:28.930\n&gt;&gt; I am doing great, Wes.\n\n12\n00:00:28.930 --> 00:00:30.930\nYeah just applying some\nproper spelling skills.\n\n13\n00:00:30.930 --> 00:00:34.400\nInstead of doing DNS today,\nwe're gonna do NSD.\n\n14\n00:00:34.400 --> 00:00:38.400\nNow NSD it's kind of a,\nis actually intended to be NSD\n\n15\n00:00:38.400 --> 00:00:41.390\nis a name server that a lot of\nyou probably haven't heard of.\n\n16\n00:00:41.390 --> 00:00:46.100\nIt's not terribly popular out there,\nmost businesses or\n\n17\n00:00:46.100 --> 00:00:48.360\nenterprises are not running NSD.\n\n18\n00:00:48.360 --> 00:00:51.780\nAnd with this amazing lead in that I'm\ndoing here, your probably asking yourself\n\n19\n00:00:51.780 --> 00:00:54.750\nDon why are you wasting our time with\nthis one if it's not very popular?\n\n20\n00:00:54.750 --> 00:00:58.290\nAnd it's not to much the popularity\nthat's important about NSD\n\n21\n00:00:58.290 --> 00:01:01.210\nit's about who does run it.\n\n22\n00:01:01.210 --> 00:01:02.490\nAnd who runs it?\n\n23\n00:01:02.490 --> 00:01:04.210\nQuite a few of the root hint servers.\n\n24\n00:01:04.210 --> 00:01:07.470\nQuite a few of the big guys in\nthe DNS infrastructure world.\n\n25\n00:01:07.470 --> 00:01:11.410\nNSD is kind of a newer player\nin the name server market.\n\n26\n00:01:11.410 --> 00:01:15.490\nBut they really have kind of pushed\nforward a lot of great technologies, and\n\n27\n00:01:15.490 --> 00:01:17.830\nas a result they are taking over the core.\n\n28\n00:01:17.830 --> 00:01:19.700\nAnd that just means over time\nthey're gonna slowly take\n\n29\n00:01:19.700 --> 00:01:20.700\nover on the other way out.\n\n30\n00:01:20.700 --> 00:01:23.800\nSo NSD is a very powerful name server.\n\n31\n00:01:23.800 --> 00:01:27.830\nIt is designed with some really\ncool features in mind and\n\n32\n00:01:27.830 --> 00:01:31.150\nwe haven't filmed many\nepisodes on DNSSEC yet.\n\n33\n00:01:31.150 --> 00:01:33.490\nBut a lot of you are familiar with DNSSEC.\n\n34\n00:01:33.490 --> 00:01:37.640\nYou know that the DNS environment is\nactually kind of easy to exploit.\n\n35\n00:01:37.640 --> 00:01:38.630\nDNS poison attacks.\n\n36\n00:01:38.630 --> 00:01:40.620\nAnd man in the middle attacks,\nand things like that.\n\n37\n00:01:40.620 --> 00:01:43.610\nCan really endanger your clients.\n\n38\n00:01:43.610 --> 00:01:47.950\nAnd DNS security or\nDNSSEC is a way of digitally\n\n39\n00:01:47.950 --> 00:01:51.880\nsigning lookups that go in between\nservers to make sure that doesn't happen.\n\n40\n00:01:51.880 --> 00:01:54.230\nTo make sure that somebody\ncan't poison our DNS cache.\n\n41\n00:01:54.230 --> 00:01:59.100\nThat we actually know the proper records\nand the proper IPs and a like good stuff.\n\n42\n00:01:59.100 --> 00:02:00.840\nDNSSEC is really important.\n\n43\n00:02:00.840 --> 00:02:03.240\nWell, the people who designed it,\n\n44\n00:02:03.240 --> 00:02:09.010\nthey needed to create a reference server\na test pet to be able to test the DNSSEC.\n\n45\n00:02:09.010 --> 00:02:15.130\nAnd so to do that they created an SD,\nan SD is where DNSSEC was developed.\n\n46\n00:02:15.130 --> 00:02:17.850\nAnd that's why you see root\nservers running it today,\n\n47\n00:02:17.850 --> 00:02:21.110\ncuz the root servers were the most\nimportant ones to protect.\n\n48\n00:02:21.110 --> 00:02:25.050\nSo when DNSSEC became stable,\nthey had to make a choice.\n\n49\n00:02:25.050 --> 00:02:28.647\nDo we stay with our other technologies\nthat don't support DNSSEC yet\n\n50\n00:02:28.647 --> 00:02:29.710\nor do we move to NSD?\n\n51\n00:02:30.920 --> 00:02:34.555\nNow, NSD wasn't just written by some\nrandom Joe Schmo off the street it's\n\n52\n00:02:34.555 --> 00:02:37.900\nactually written by the same\npeople who wrote Unbound.\n\n53\n00:02:37.900 --> 00:02:40.810\nAnd so, Unbound we know is an excellent\n\n54\n00:02:40.810 --> 00:02:44.680\nhighly scaleable,very\nfast modern name server.\n\n55\n00:02:44.680 --> 00:02:47.850\nThat really is designed for\ncaching and reversal lookups.\n\n56\n00:02:47.850 --> 00:02:50.170\nIt doesn't do so\ngood on the authoritative side.\n\n57\n00:02:50.170 --> 00:02:52.760\nWell, NSD is the other side.\n\n58\n00:02:52.760 --> 00:02:55.770\nIt does authoritative lookups and\nthat's it.\n\n59\n00:02:55.770 --> 00:03:00.160\nIt doesn't do recursive lookups or\ncaching because it only answers for\n\n60\n00:03:00.160 --> 00:03:02.150\nthe zones that it contains.\n\n61\n00:03:02.150 --> 00:03:04.770\nSo if you run NSD combined with Unbound,\n\n62\n00:03:04.770 --> 00:03:07.490\nyou've got a great solution\nthat's very powerful.\n\n63\n00:03:07.490 --> 00:03:09.570\nIt can handle everything that you need.\n\n64\n00:03:09.570 --> 00:03:12.720\nBut if you just want to set up\nan authoritative name server,\n\n65\n00:03:12.720 --> 00:03:14.010\nan SD does a great job.\n\n66\n00:03:14.010 --> 00:03:16.452\nAnd if you're a route hit server,\nwhat are you?\n\n67\n00:03:16.452 --> 00:03:17.180\nWell you're authoritative.\n\n68\n00:03:17.180 --> 00:03:19.874\nThere's nobody higher in\nthat structure than you.\n\n69\n00:03:19.874 --> 00:03:24.569\nAnd there's even some TLDs,\nsome of the top layer domain names.\n\n70\n00:03:24.569 --> 00:03:28.406\nThose servers that are running NSD also,\nso it is very popular at the top.\n\n71\n00:03:28.406 --> 00:03:30.155\nAnd over time we're gonna see\nit popular down on our side.\n\n72\n00:03:30.155 --> 00:03:34.035\nSo in this episode what we're gonna do\nis we're gonna run through getting NSD\n\n73\n00:03:34.035 --> 00:03:36.735\nset up, seeing how to deploy it,\nget it configured.\n\n74\n00:03:36.735 --> 00:03:39.405\nAnd you'll find that it's not\nactually that much different\n\n75\n00:03:39.405 --> 00:03:42.595\nfrom the other guys that are out there and\nit's very stable, very fast,\n\n76\n00:03:42.595 --> 00:03:44.340\nand a great replacement for Bind.\n\n77\n00:03:44.340 --> 00:03:50.295\nNow, remember that Bind by itself could\ndo what Unbound and NSD do together.\n\n78\n00:03:50.295 --> 00:03:53.654\nSo it's like replacing one product with\ntwo, which is normally a bad thing.\n\n79\n00:03:53.654 --> 00:03:57.394\nBut Unbound and NSD use two different\ndatabases that are optimized for\n\n80\n00:03:57.394 --> 00:03:58.980\ntheir different roles.\n\n81\n00:03:58.980 --> 00:04:02.920\nAnd that gives it much better performance\nthan Bind that has one database\n\n82\n00:04:02.920 --> 00:04:06.220\nthat's not really optimized for\neither role and doesn't scale very well.\n\n83\n00:04:06.220 --> 00:04:09.980\nSo it's a great drop-in replacement,\nand that's what we're starting to see,\n\n84\n00:04:09.980 --> 00:04:12.820\nis Unbound and NSD taking that place.\n\n85\n00:04:12.820 --> 00:04:15.500\nSo, enough gabbing about it,\nlet's jump in and actually see it.\n\n86\n00:04:15.500 --> 00:04:17.830\nAs we're gonna take NSD and\nget it installed on a machine, and\n\n87\n00:04:17.830 --> 00:04:19.830\nbring it up, and get it up and going.\n\n88\n00:04:19.830 --> 00:04:22.810\nSo I've got a CentOS 7 box right here,\n\n89\n00:04:22.810 --> 00:04:26.400\nthis would be the same as\nRed Hat Enterprise Linux or Fedora.\n\n90\n00:04:26.400 --> 00:04:30.410\nIf you're on Ubuntu or or\none of those other distros.\n\n91\n00:04:30.410 --> 00:04:33.570\nThen you may need to use slightly\ndifferent installation commands.\n\n92\n00:04:33.570 --> 00:04:35.390\nInstead of Yum,\nyou're going to use apt-get.\n\n93\n00:04:35.390 --> 00:04:37.850\nBut everything else beyond\nthat point will be the same.\n\n94\n00:04:37.850 --> 00:04:39.760\nThey actually do have NSD for Windows.\n\n95\n00:04:39.760 --> 00:04:41.430\nYou can go out and get it and\ndeploy it that way.\n\n96\n00:04:41.430 --> 00:04:44.140\nAlthough most people are going\nto deploy it on a Linux server,\n\n97\n00:04:44.140 --> 00:04:45.060\nlike what I'm doing here.\n\n98\n00:04:46.270 --> 00:04:49.000\nNow getting it installed is pretty\nmuch like any other software.\n\n99\n00:04:49.000 --> 00:04:51.990\nWell, let me qualify that real quick.\n\n100\n00:04:51.990 --> 00:04:55.590\nIf I just do a Yum install NSD, there's\nactually something weird going on right\n\n101\n00:04:55.590 --> 00:04:57.990\nnow, and\nwe're gonna get nothing to do, right?\n\n102\n00:04:57.990 --> 00:05:01.320\nWhat happened is,\nNSD is developing very fast.\n\n103\n00:05:01.320 --> 00:05:03.340\nThere's new things\ncoming out all the time.\n\n104\n00:05:03.340 --> 00:05:07.800\nAnd NSD version 3 was the stable,\nwidely supported one.\n\n105\n00:05:07.800 --> 00:05:09.690\nNSD 4 was in beta.\n\n106\n00:05:09.690 --> 00:05:15.460\nWell when NSD 4 came out of beta,\nthey immediately yanked support for NSD 3.\n\n107\n00:05:15.460 --> 00:05:17.960\nNL Labs,\nthe people that create all this stuff,\n\n108\n00:05:17.960 --> 00:05:19.700\nthey don't like to\nsupport the old versions.\n\n109\n00:05:19.700 --> 00:05:22.795\nThey want you running on the latest,\ncuz this is all about security and\n\n110\n00:05:22.795 --> 00:05:23.486\nperformance.\n\n111\n00:05:23.486 --> 00:05:26.511\nWell, Red Hat doesn't move that fast.\n\n112\n00:05:26.511 --> 00:05:30.218\nThey're not ready to jump to NSD 4 the\nmoment it comes out of the beta they need\n\n113\n00:05:30.218 --> 00:05:32.000\nto run to their testing.\n\n114\n00:05:32.000 --> 00:05:36.233\nSo as of right now, NSD version 3 is no\nlonger supported so Red Hat pulled it.\n\n115\n00:05:36.233 --> 00:05:39.680\nAnd NSD 4 isn't approved yet,\nso it doesn't show up here yet.\n\n116\n00:05:39.680 --> 00:05:41.690\nSo when I go to install and\nI get that message.\n\n117\n00:05:41.690 --> 00:05:43.604\nIf you're going to or\nUbuntu that won't happen.\n\n118\n00:05:43.604 --> 00:05:45.477\nThey've already approved and\nit's come through.\n\n119\n00:05:45.477 --> 00:05:49.343\nAnd depending on when you watch this\nepisode Red Hat may have already approved\n\n120\n00:05:49.343 --> 00:05:52.568\nit by then but I it's December\nof 2016 to date this episode.\n\n121\n00:05:52.568 --> 00:05:57.248\nAnd as of right this moment it's still\nbeing held in the extra packages\n\n122\n00:05:57.248 --> 00:05:58.210\nrepository.\n\n123\n00:05:58.210 --> 00:06:03.283\nSo I need to set that up on this system,\nI don't have it set up on here so\n\n124\n00:06:03.283 --> 00:06:06.120\nI can do a yum install epel-release.\n\n125\n00:06:06.120 --> 00:06:10.330\nAnd that's our extra package for\nEnterprise Linux repository.\n\n126\n00:06:10.330 --> 00:06:16.730\nAnd you'll see that the EPEL is a part of\nthe Red Hat distros and what they support.\n\n127\n00:06:16.730 --> 00:06:18.230\nSo I'll just go in and add it.\n\n128\n00:06:18.230 --> 00:06:24.130\nBut that's gonna allow me to install\nsoftware that's not fully tested yet\n\n129\n00:06:24.130 --> 00:06:24.800\nby Red Hat.\n\n130\n00:06:24.800 --> 00:06:26.470\nSo I'm taking a little ownership here and\n\n131\n00:06:26.470 --> 00:06:30.990\nsaying I trust NSD version 4 even if\nRed Hat hasn't signed off on it yet.\n\n132\n00:06:30.990 --> 00:06:33.940\nBut now that I've done that,\nI'll be able to do a yum install NSD.\n\n133\n00:06:33.940 --> 00:06:37.980\nAnd instead of telling me there's nothing\nto do, it's gonna reach in there and\n\n134\n00:06:37.980 --> 00:06:38.900\nit's gonna find it.\n\n135\n00:06:38.900 --> 00:06:41.500\nAnd you'll see me failing\nagainst all those mirrors.\n\n136\n00:06:41.500 --> 00:06:44.740\nAnd then finally I hit the EPEL,\nand there it is.\n\n137\n00:06:44.740 --> 00:06:45.960\nAnd we've got NSD.\n\n138\n00:06:45.960 --> 00:06:47.829\nIt's version 4.1.\n\n139\n00:06:47.829 --> 00:06:50.641\nBe careful with that too,\nbecause if you're out there Googling for\n\n140\n00:06:50.641 --> 00:06:51.640\nhow to do things in NSD.\n\n141\n00:06:51.640 --> 00:06:53.685\nNSD3 was very popular, and so\n\n142\n00:06:53.685 --> 00:06:57.625\nmuch of the documentation out\nthere is built around NSD3.\n\n143\n00:06:57.625 --> 00:06:59.952\nWell the commands are different now,\nthings have changed,\n\n144\n00:06:59.952 --> 00:07:01.330\nthere's new tools that are apart.\n\n145\n00:07:01.330 --> 00:07:06.230\nSo always make sure that you're paying\nattention to whether you're running an NSD\n\n146\n00:07:06.230 --> 00:07:07.770\nversion 3 or version 4.\n\n147\n00:07:07.770 --> 00:07:11.462\nBecause that's the latest and\nthat's what you should be running too, And\n\n148\n00:07:11.462 --> 00:07:13.638\nwe'll go get ahead and get that installed.\n\n149\n00:07:13.638 --> 00:07:16.360\nOkay what do we do?\n\n150\n00:07:16.360 --> 00:07:17.550\nWell, technically we're done.\n\n151\n00:07:17.550 --> 00:07:19.780\nWe got an NSD server,\nwe can walk away and that's it.\n\n152\n00:07:19.780 --> 00:07:22.580\nThere are actually a few little things\nthat we need to worry about to get\n\n153\n00:07:22.580 --> 00:07:23.870\nthis thing set up.\n\n154\n00:07:23.870 --> 00:07:26.130\nDepending on which distro you're on,\n\n155\n00:07:26.130 --> 00:07:29.590\nsometimes the installation\nis not complete.\n\n156\n00:07:29.590 --> 00:07:35.090\nSo when you do the install,\nit creates a /etc/nsd folder.\n\n157\n00:07:35.090 --> 00:07:36.470\nOr at least it should.\n\n158\n00:07:36.470 --> 00:07:42.880\nAnd in that folder, it should create an\nNSD.conf file and a couple of server keys.\n\n159\n00:07:44.790 --> 00:07:45.630\nI don't have any server keys.\n\n160\n00:07:45.630 --> 00:07:47.550\nAll right, well mine are missing.\n\n161\n00:07:47.550 --> 00:07:50.380\nSo the package that I chose to install\ndidn't create those server keys.\n\n162\n00:07:50.380 --> 00:07:52.580\nNow, I don't necessarily\nhave to worry about that.\n\n163\n00:07:52.580 --> 00:07:55.922\nBecause the first time I start NSD\nit's gonna create those keys for me.\n\n164\n00:07:55.922 --> 00:07:58.001\nBut if I start modifying my config,\n\n165\n00:07:58.001 --> 00:08:00.925\nthis nsd.conf which is\nthe next thing I wanna do.\n\n166\n00:08:00.925 --> 00:08:04.817\nIf I start modifying it I'm\ngonna wanna check it for errors.\n\n167\n00:08:04.817 --> 00:08:08.396\nAnd the tool that checks it for errors is\ngonna be really mad if I don't have any\n\n168\n00:08:08.396 --> 00:08:11.549\nkeys, so I might need to generate\nsome keys here to get that to work.\n\n169\n00:08:11.549 --> 00:08:13.948\nNow, I got two choices\nhow I wanna do this.\n\n170\n00:08:13.948 --> 00:08:18.880\nOne, I can just try and start NSD,\nit'll create the keys, it'll fail,\n\n171\n00:08:18.880 --> 00:08:20.810\ncuz I haven't configured it,\nand it will drop out, right?\n\n172\n00:08:20.810 --> 00:08:22.230\nBut the keys get created.\n\n173\n00:08:22.230 --> 00:08:25.090\nOr two, I can use the NSD control utility.\n\n174\n00:08:25.090 --> 00:08:29.640\nNsd-control is gonna be\nour main interface for\n\n175\n00:08:29.640 --> 00:08:34.500\nmanaging NSD, as far as it running,\nand checking its status, and so on.\n\n176\n00:08:34.500 --> 00:08:36.010\nWe still have our zone\nfiles to worry about.\n\n177\n00:08:36.010 --> 00:08:37.220\nWe'll do those manually.\n\n178\n00:08:37.220 --> 00:08:40.950\nBut as far as the service itself,\nwe're gonna use NSD-control.\n\n179\n00:08:40.950 --> 00:08:44.660\nNSD control allows local access,\nas well as remote access.\n\n180\n00:08:44.660 --> 00:08:47.180\nI can have NSD control on my workstation,\nand\n\n181\n00:08:47.180 --> 00:08:51.470\nI can point it at my NSD servers and\nmanage them.\n\n182\n00:08:51.470 --> 00:08:54.500\nI can run it from the server itself,\nor I can run it remotely if I want.\n\n183\n00:08:54.500 --> 00:08:57.810\nI'll be assigning a port number,\nI'll show you all that in a bit.\n\n184\n00:08:57.810 --> 00:09:01.800\nBut there's a nsd-control-setup\nthat you can run, and\n\n185\n00:09:01.800 --> 00:09:06.310\nif you run that, the main thing about\nthose, it checks to see if the keys exist.\n\n186\n00:09:06.310 --> 00:09:09.190\nAnd if the keys don't exist,\nit makes them.\n\n187\n00:09:09.190 --> 00:09:13.880\nSo, when I ran nsd-control-setup,\nI pressed Enter.\n\n188\n00:09:13.880 --> 00:09:18.260\nI didn't give it any options, and it went\nthrough, and it generated a server key.\n\n189\n00:09:18.260 --> 00:09:21.050\nYou generated that RSA key,\nyou generated the private key.\n\n190\n00:09:21.050 --> 00:09:24.040\nAnd the public key, it created\nthe pen files that are necessary.\n\n191\n00:09:24.040 --> 00:09:26.130\nIt created everything I need\nto authenticate this server.\n\n192\n00:09:26.130 --> 00:09:30.060\nAll right, those are going to important\nif I'm using NSD control remotely.\n\n193\n00:09:30.060 --> 00:09:32.310\nThey're also gonna be important later for\nDNS.\n\n194\n00:09:32.310 --> 00:09:36.690\nWe'll see when we deploy a DNS\nthat's kind of important.\n\n195\n00:09:36.690 --> 00:09:38.500\nAll right, as it stands, though,\nnow I've got my certificates.\n\n196\n00:09:38.500 --> 00:09:43.390\nAnd if I look in /etc/nsd,\nthere they are, right?\n\n197\n00:09:43.390 --> 00:09:45.440\nI created them by hand here just to,\nor not by hand, but\n\n198\n00:09:45.440 --> 00:09:47.810\nby running a utility, to make sure\nthey were there ahead of time.\n\n199\n00:09:47.810 --> 00:09:50.160\nIf I had just started NSD,\nand it saw they were missing,\n\n200\n00:09:50.160 --> 00:09:51.120\nit would have created them too.\n\n201\n00:09:51.120 --> 00:09:54.370\nI would have just gotten a bunch of\nerrors, this way I avoid the errors.\n\n202\n00:09:54.370 --> 00:10:00.212\nAll right, so now, there's one more thing\nI need to do, if you're on CentOS or\n\n203\n00:10:00.212 --> 00:10:05.725\nRedHat, my system right now,\nlet's just see what release I'm running.\n\n204\n00:10:05.725 --> 00:10:12.520\nI am running 7.1, all right,\n7.3 just came out two weeks ago.\n\n205\n00:10:12.520 --> 00:10:13.952\nSo, 7.3 is really recent.\n\n206\n00:10:13.952 --> 00:10:16.470\nIn 7.0, 7.1, 7.2, there was a bug, and\n\n207\n00:10:16.470 --> 00:10:21.710\nthere was a bug in SE Linux that\nwould stop NSD from running.\n\n208\n00:10:21.710 --> 00:10:26.010\nAnd the reason was, again, NSD 4 came out,\nRed Hat wasn't ready for it.\n\n209\n00:10:26.010 --> 00:10:29.640\nSC Linux is still setup for NSD 3,\nand that causes some problems.\n\n210\n00:10:29.640 --> 00:10:33.790\nSo, if you're on a Red Hat based platform,\nsent to us RHEL, or\n\n211\n00:10:33.790 --> 00:10:37.970\nFedora, then we need to update to 7.3.\n\n212\n00:10:37.970 --> 00:10:42.098\nYou can update the whole system if you\nwant, that will take care of it, or\n\n213\n00:10:42.098 --> 00:10:47.126\nif you're not ready for 7.3 yet, we really\njust need to update the S Linux policies.\n\n214\n00:10:47.126 --> 00:10:50.959\nSo, I'm gonna do a yum update\nSE Linux policy, and when I do that,\n\n215\n00:10:50.959 --> 00:10:54.040\nyou'll see there is a ton\nof packages attached to it,\n\n216\n00:10:54.040 --> 00:10:58.442\nbecause of all the Python libraries,\nor whatever it is, its got tied to it.\n\n217\n00:10:58.442 --> 00:11:00.340\nYou're gonna see a bunch of stuff go by.\n\n218\n00:11:00.340 --> 00:11:04.330\nThere we go, but the key thing is\nthat it's gonna update its policies.\n\n219\n00:11:04.330 --> 00:11:05.910\nAnd in the latest policies,\n\n220\n00:11:05.910 --> 00:11:09.390\nthe ones that came out last week, they've\nadded support for NSD version four.\n\n221\n00:11:09.390 --> 00:11:10.030\nSo we're covered.\n\n222\n00:11:10.030 --> 00:11:13.450\nSo, if you've been holding\noff on going to version four,\n\n223\n00:11:13.450 --> 00:11:15.250\nnow we're really all good to go.\n\n224\n00:11:15.250 --> 00:11:18.100\nSo, I'm gonna do that update real quick,\njust to make sure I'm able to start it.\n\n225\n00:11:18.100 --> 00:11:23.170\nIf I don't do this, when I start NSD\nlater, SE Linux is gonna block it.\n\n226\n00:11:23.170 --> 00:11:26.932\nAnd that's where you can search\nchasing it, trying to fix the problem,\n\n227\n00:11:26.932 --> 00:11:30.077\nor you can disable SE Linux,\nwhich is a terrible thing to do,\n\n228\n00:11:30.077 --> 00:11:31.763\nbetter to just do your updates.\n\n229\n00:11:31.763 --> 00:11:35.550\nIf I was updated, then I would have\nthis problem in the first place.\n\n230\n00:11:35.550 --> 00:11:37.988\nAll right, now, while that's updating,\nwe’re gonna go and\n\n231\n00:11:37.988 --> 00:11:40.100\nput a basic configuration on this system.\n\n232\n00:11:40.100 --> 00:11:44.850\nSo, I need to go an edit\nthe nsd.conf file, and in that file,\n\n233\n00:11:44.850 --> 00:11:46.050\nI need to setup a couple of things.\n\n234\n00:11:46.050 --> 00:11:50.200\nI need to setup my listening IPs, so\nwhich IP addresses am I gonna listen on?\n\n235\n00:11:50.200 --> 00:11:53.105\nI need to set my port number\nthat I’m gonna listen on,\n\n236\n00:11:53.105 --> 00:11:57.710\nI need to setup whether I’m supporting\nIPv4 or IPv6, or both, if I wanna do both.\n\n237\n00:11:57.710 --> 00:12:00.362\nAnd it's all well documented\nin the configuration file, so\n\n238\n00:12:00.362 --> 00:12:03.173\nlet's take a look at that,\nmy update might have just finished.\n\n239\n00:12:03.173 --> 00:12:08.798\nSo, I'm going to edit /18/nsd/nsd.com,\nand when you reach in there,\n\n240\n00:12:08.798 --> 00:12:13.059\nyou'll see it it's well-documented,\nand as we edit it,\n\n241\n00:12:13.059 --> 00:12:19.490\nthere's a ton of things that we can tweak,\nthe value they put is the default value.\n\n242\n00:12:19.490 --> 00:12:21.110\nSo, let's start with just\nthe very first one here.\n\n243\n00:12:21.110 --> 00:12:22.800\nServer count one.\n\n244\n00:12:22.800 --> 00:12:25.656\nThat means that the default\nis a server count of one.\n\n245\n00:12:25.656 --> 00:12:29.343\nIt's got a hashtag before it,\nthat means, I don't know what I'm doing.\n\n246\n00:12:29.343 --> 00:12:33.412\nIf it's got a hashtag before it,\nshoot, hang on,\n\n247\n00:12:33.412 --> 00:12:36.520\nedit the file action, there we go.\n\n248\n00:12:36.520 --> 00:12:39.100\nSo, it's got a hashtag before it, and\nthat means that it's commented out, right?\n\n249\n00:12:39.100 --> 00:12:43.120\nAnytime you see that hashtag,\nthat's telling us, don't apply this line.\n\n250\n00:12:43.120 --> 00:12:46.170\nBut they put this in here anyway,\nso I can see the default.\n\n251\n00:12:46.170 --> 00:12:49.180\nAnd if I wanna change it, I can,\nI can either modify this line and\n\n252\n00:12:49.180 --> 00:12:52.510\nremove the hashtag, or\nadd a second line that has what I want.\n\n253\n00:12:52.510 --> 00:12:56.278\nSo, if I wanted to bump that server count\nup, I could come in here, and I could say,\n\n254\n00:12:56.278 --> 00:13:00.547\nserver-count: 2, right?\n\n255\n00:13:00.547 --> 00:13:05.510\nRight, and by doing that,\nnow I basically put the value in.\n\n256\n00:13:05.510 --> 00:13:10.620\nIt's gonna take what I put in as action,\nbut I still remember what the default was.\n\n257\n00:13:10.620 --> 00:13:11.450\nSo, if I ever wanna go and\n\n258\n00:13:11.450 --> 00:13:14.590\nput it back to the default, I remember,\nversus if I had edited this line.\n\n259\n00:13:14.590 --> 00:13:16.480\nI wouldn't remember what the default was.\n\n260\n00:13:16.480 --> 00:13:19.850\nAll right, I want mine at one anyway,\nso I'll just leave it there.\n\n261\n00:13:19.850 --> 00:13:22.400\nI guess it would probably be worthwhile\nto mention what server count is.\n\n262\n00:13:22.400 --> 00:13:25.280\nWhen you run NSD, by default,\nit runs single-threaded.\n\n263\n00:13:25.280 --> 00:13:27.850\nSo, it's only going to use one CPU core.\n\n264\n00:13:27.850 --> 00:13:29.530\nWhat if I have a quad-core CPU?\n\n265\n00:13:29.530 --> 00:13:32.550\nOr an eight, an octo,\nwhatever, a ten-core,\n\n266\n00:13:32.550 --> 00:13:34.330\nthey've got a bunch of\ncrazy ones out there today.\n\n267\n00:13:34.330 --> 00:13:39.820\nSo, if I've got a multi-core system,\nI might want NSD to run multi threaded.\n\n268\n00:13:39.820 --> 00:13:41.580\nWe don't normally need it to.\n\n269\n00:13:41.580 --> 00:13:45.550\nIf we're using NSD with unbound,\nunbound is doing all the real work, right?\n\n270\n00:13:45.550 --> 00:13:48.390\nNSD is really just managing\na couple of zones.\n\n271\n00:13:48.390 --> 00:13:50.240\nBut what if you're massive?\n\n272\n00:13:50.240 --> 00:13:53.315\nWhat if you are working for\na root hit server, and\n\n273\n00:13:53.315 --> 00:13:57.820\nyou're trying to track hundreds of\nthousands, millions of domains?\n\n274\n00:13:57.820 --> 00:13:58.836\nThat's a lot.\n\n275\n00:13:58.836 --> 00:14:00.160\nYou'll probably need some more threads.\n\n276\n00:14:00.160 --> 00:14:02.670\nYou'll probably need more servers,\nis what you'll really need, but\n\n277\n00:14:02.670 --> 00:14:05.670\non each individual server,\nyou'll need more threads, and so\n\n278\n00:14:05.670 --> 00:14:08.640\nyou can bump that up here to set basically\nhow many threads you want to run.\n\n279\n00:14:10.200 --> 00:14:13.300\nAll right, so,\nthe important things that I'm looking for\n\n280\n00:14:13.300 --> 00:14:15.718\nthough are right beneath it,\nthe IP address.\n\n281\n00:14:15.718 --> 00:14:19.363\nYou'll notice this is actually kind of\nsimilar to BIND, in the BIND config,\n\n282\n00:14:19.363 --> 00:14:21.393\nwe would say and\ninterface then an IP here.\n\n283\n00:14:21.393 --> 00:14:25.170\nIt says IP address and an IP,\nwhich makes more sense.\n\n284\n00:14:25.170 --> 00:14:27.630\nSo, what IPs am I going to list on?\n\n285\n00:14:27.630 --> 00:14:30.840\nIf I have more than one, I can just\nlist each one and get them in place.\n\n286\n00:14:30.840 --> 00:14:33.500\nYou can specify an IP and a port number.\n\n287\n00:14:33.500 --> 00:14:38.591\nIf I want to override the port number,\nthat's important if I'm running\n\n288\n00:14:38.591 --> 00:14:43.355\nunbound and NSD on the same server,\nit both can't run on port 53.\n\n289\n00:14:43.355 --> 00:14:45.586\nSo, I would have to move one of\nthem to a different port number.\n\n290\n00:14:45.586 --> 00:14:49.517\nSo, here's what I move NSD if\nI wanted to go that route.\n\n291\n00:14:49.517 --> 00:14:56.740\nIn my case though, I just wanted to run it\non my main address, which is 10.0.222.103.\n\n292\n00:14:56.740 --> 00:15:00.210\nSo, I'm going to punch that one in there\nso that I can have that value, right?\n\n293\n00:15:01.940 --> 00:15:06.010\nYou can leave like little spaces if you\nwant to help kind of find your values,\n\n294\n00:15:06.010 --> 00:15:07.530\nit doesn't all have to\nbe together like that.\n\n295\n00:15:07.530 --> 00:15:09.227\nSo, I'll space it out so I can find it.\n\n296\n00:15:09.227 --> 00:15:11.611\nAfter that, you'll start to\nsee some customization ops,\n\n297\n00:15:11.611 --> 00:15:13.241\nmost of us going to leave alone, right?\n\n298\n00:15:13.241 --> 00:15:15.751\nThey're tweaking whether we want\nto run an IP transparent mode, and\n\n299\n00:15:15.751 --> 00:15:16.940\nall these other things.\n\n300\n00:15:16.940 --> 00:15:18.145\nMost of those, we don't care about.\n\n301\n00:15:18.145 --> 00:15:22.296\nBut the ones we do care about,\nare right down here a little bit later,\n\n302\n00:15:22.296 --> 00:15:27.025\nwhere we've got listen on IPv4\nconnections, listen on IPv6 connections,\n\n303\n00:15:27.025 --> 00:15:28.979\nand then a port number, right?\n\n304\n00:15:28.979 --> 00:15:30.157\nI can change these.\n\n305\n00:15:30.157 --> 00:15:35.120\nNow, IPv4 and IPv6 are on by default,\nif that's what I want, I'm good.\n\n306\n00:15:35.120 --> 00:15:39.000\nI don't have an IPv6 address, so I might\nwant to come in here and say do ip6 no,\n\n307\n00:15:39.000 --> 00:15:45.550\nand so, now it's not gonna try and do\nIPv6, so I don't have an address anyway.\n\n308\n00:15:45.550 --> 00:15:47.160\nSo, no sense in listening in on that.\n\n309\n00:15:47.160 --> 00:15:50.220\n&gt;&gt; Don, I noticed that you can also\nspecify a port number right there, and\n\n310\n00:15:50.220 --> 00:15:52.165\nyou can see that the default says it's 53.\n\n311\n00:15:52.165 --> 00:15:54.815\nNow, how does that conflict with what you\n\n312\n00:15:54.815 --> 00:15:58.682\njust showed us in specifying\nan IP address and a port number?\n\n313\n00:15:58.682 --> 00:15:59.838\n&gt;&gt; Good question, right?\n\n314\n00:15:59.838 --> 00:16:01.747\nCuz it seems like we're\ndoing the same thing twice.\n\n315\n00:16:01.747 --> 00:16:05.050\nThis will be our general\nport number like our default\n\n316\n00:16:05.050 --> 00:16:08.510\nport number if we have\nmultiple network adapters.\n\n317\n00:16:08.510 --> 00:16:11.460\nSo let's say I have two\nnetwork adapters and\n\n318\n00:16:11.460 --> 00:16:14.930\nI wanna override the port on one of them,\nbut not the other.\n\n319\n00:16:16.130 --> 00:16:21.251\nWell, if I wanna do that, then way up here\nunder the IPs, I would list both IPs,\n\n320\n00:16:21.251 --> 00:16:26.001\nI would override the port on one, and\nthen I'd leave the other one alone.\n\n321\n00:16:26.001 --> 00:16:30.204\nSo I might say we've got this IP address,\nand\n\n322\n00:16:30.204 --> 00:16:37.287\nthen I might say ip-address:\n10.0.222.203@53000,\n\n323\n00:16:37.287 --> 00:16:41.260\nso now this one I didn't specify a port.\n\n324\n00:16:41.260 --> 00:16:43.810\nSo it's gonna look at the port value\na little bit lower in the file and\n\n325\n00:16:43.810 --> 00:16:44.740\nit's gonna use that.\n\n326\n00:16:44.740 --> 00:16:47.960\nBut this one is gonna use port 53000,\nnow I'm running technically on\n\n327\n00:16:47.960 --> 00:16:50.030\ntwo different ports, but\nit's 2 different network adapters.\n\n328\n00:16:51.170 --> 00:16:54.118\nYou might have five network adapters and\nyou can come through and do each one.\n\n329\n00:16:54.118 --> 00:16:55.242\nSo that's what that one is.\n\n330\n00:16:55.242 --> 00:16:57.710\nSo I'm not overwriting mine.\n\n331\n00:16:57.710 --> 00:16:58.990\nI can just leave it the way that it is.\n\n332\n00:16:58.990 --> 00:17:02.580\nYou can uncommon it if you want to, but\nport 53 is what I expect it to run on, so\n\n333\n00:17:02.580 --> 00:17:04.590\nI'm gonna leave it be like that.\n\n334\n00:17:04.590 --> 00:17:09.268\nAnd that's really about it for\nwhat we need to configure in here.\n\n335\n00:17:09.268 --> 00:17:12.928\nI do wanna show you one more thing that I\nalmost always turn on and that's logging.\n\n336\n00:17:12.928 --> 00:17:15.380\nI'm just gonna do a quick search for\nthe word log so\n\n337\n00:17:15.380 --> 00:17:16.930\nI can find this a little faster.\n\n338\n00:17:16.930 --> 00:17:18.680\nAnd you'll see this entry right here,\nlog file.\n\n339\n00:17:19.860 --> 00:17:25.390\nNow, by default it logs to standard error,\nwhich means to your screen.\n\n340\n00:17:25.390 --> 00:17:28.490\nIf you're logged into the server and\nwatching and\n\n341\n00:17:28.490 --> 00:17:29.790\neverything's great you'll see that.\n\n342\n00:17:29.790 --> 00:17:33.498\nOtherwise you're not gonna see that and\nsyslog.\n\n343\n00:17:33.498 --> 00:17:34.900\nGreat.\nSo it's gonna log to syslog and\n\n344\n00:17:34.900 --> 00:17:38.170\nit's got a facility of log demon so\nI can always just search that facility and\n\n345\n00:17:38.170 --> 00:17:41.350\nI'll find all its entries\nIf I wanna go into syslog.\n\n346\n00:17:41.350 --> 00:17:44.460\nBut it can maintain its own log also.\n\n347\n00:17:45.600 --> 00:17:46.680\nAnd I like that.\n\n348\n00:17:46.680 --> 00:17:47.510\nI like it to have its own log.\n\n349\n00:17:47.510 --> 00:17:51.010\nThat way I don't have to go mess\naround with filtering by a facility or\n\n350\n00:17:51.010 --> 00:17:52.180\ngrepping it or whatever.\n\n351\n00:17:52.180 --> 00:17:54.160\nI can just look into this individual log.\n\n352\n00:17:54.160 --> 00:17:59.040\nSo what I'm gonna do is I'm just gonna\ncome in here and uncomment that line.\n\n353\n00:17:59.040 --> 00:18:04.276\nBecause the default value is actually\nfine for me, /var/log/nsd.log.\n\n354\n00:18:04.276 --> 00:18:06.920\nAnd [COUGH] this is actually\none of the things that would\n\n355\n00:18:06.920 --> 00:18:08.670\nhave failed had SE Linux not been updated.\n\n356\n00:18:08.670 --> 00:18:11.990\nWe wouldn't have had permission to write\nto that folder, it would have got upset.\n\n357\n00:18:11.990 --> 00:18:14.670\nBut I'm updated so I should be good\nto go on that and there we are.\n\n358\n00:18:15.960 --> 00:18:18.620\nMost of the rest of this we\ndon't really need to tweak,\n\n359\n00:18:18.620 --> 00:18:21.710\nthere's not a whole heck of a lot\nof reason to modify most of this.\n\n360\n00:18:21.710 --> 00:18:25.270\nBut you may have really specific needs,\nand you'll see it's extremely powerful.\n\n361\n00:18:25.270 --> 00:18:28.000\nThe people who wrote this are basically\n\n362\n00:18:28.000 --> 00:18:31.670\nthe most knowledgeable people in\nName Servers in the entire planet.\n\n363\n00:18:31.670 --> 00:18:35.982\nThese are the people who came up with DNS\nsec, and advanced caching algorithms for\n\n364\n00:18:35.982 --> 00:18:40.172\nmodern infrastructure It's amazing stuff,\nso they really do give you the full\n\n365\n00:18:40.172 --> 00:18:44.452\nfeatures in here with NSD, it is the most\npowerful DNS server that's our there.\n\n366\n00:18:44.452 --> 00:18:48.279\nWe are gonna come back to this file\nlater when we start adding zones but for\n\n367\n00:18:48.279 --> 00:18:51.740\nright now I'm gonna get out\nof it because that's enough.\n\n368\n00:18:51.740 --> 00:18:54.430\nNow, in typical Don Pezet fashion,\n\n369\n00:18:54.430 --> 00:18:57.330\nI very well could have screwed up\nsome of the stuff I typed in there.\n\n370\n00:18:57.330 --> 00:18:59.860\nYou leave a semicolon out,\nor something like that.\n\n371\n00:18:59.860 --> 00:19:02.620\nAnd a command is put in really wrong,\nand it doesn't work.\n\n372\n00:19:02.620 --> 00:19:04.780\nSo much like the other\nDNS servers out there,\n\n373\n00:19:04.780 --> 00:19:08.620\nwe have a tool we can run that'll check\nto see whether everything is okay.\n\n374\n00:19:08.620 --> 00:19:14.410\nThe tool is the nsd -checkconf utility.\n\n375\n00:19:14.410 --> 00:19:18.030\nAnd so, we can use that checkconf to be\nable to scan our file and look to see if\n\n376\n00:19:18.030 --> 00:19:21.590\nwe've got any errors or mistakes or\nanything like that that we need to fix.\n\n377\n00:19:21.590 --> 00:19:23.490\nAnd we can get in there and\ntake care of it.\n\n378\n00:19:23.490 --> 00:19:26.600\nNow, when you run nsd-checkconf it\n\n379\n00:19:26.600 --> 00:19:29.770\nis going to ask us to\nprovide the config filename.\n\n380\n00:19:29.770 --> 00:19:36.200\nSo you just run\nnsd-checkconf/etc/nsd/nsd.conf and\n\n381\n00:19:36.200 --> 00:19:39.150\nwhen you run that,\nit's going to check it for errors.\n\n382\n00:19:39.150 --> 00:19:40.760\nHopefully, you get what I get.\n\n383\n00:19:40.760 --> 00:19:42.388\nWhich is absolutely nothing.\n\n384\n00:19:42.388 --> 00:19:44.980\nIf you have an error,\nit'll show you the error.\n\n385\n00:19:44.980 --> 00:19:47.600\nIf you don't have an error,\nit'll show you nothing.\n\n386\n00:19:47.600 --> 00:19:50.240\nNow, if you have more than one error,\n\n387\n00:19:50.240 --> 00:19:52.450\nit'll show you the first error and\nthen stop.\n\n388\n00:19:52.450 --> 00:19:54.388\nSo you gotta fix that error and\nthen run it again.\n\n389\n00:19:54.388 --> 00:19:57.650\nAnd that way you'll find the second error,\nor the third.\n\n390\n00:19:57.650 --> 00:19:59.830\nSo it's only gonna show you\nthe first error it encounters.\n\n391\n00:19:59.830 --> 00:20:00.810\nAlways keep that in mind.\n\n392\n00:20:00.810 --> 00:20:03.840\nIf you go in and fix the first problem and\ndon't run it again, you might\n\n393\n00:20:03.840 --> 00:20:06.720\nthink it's fine, and then you go to\nstart the service and the service fails.\n\n394\n00:20:06.720 --> 00:20:09.945\nSo just a quick,\neasy way to check that file and\n\n395\n00:20:09.945 --> 00:20:14.350\nmake sure that there's no bugs or\nanything like that in there.\n\n396\n00:20:14.350 --> 00:20:15.980\nNo, not really bugs, typos.\n\n397\n00:20:15.980 --> 00:20:17.731\nThere we go, it doesn't check for bugs.\n\n398\n00:20:17.731 --> 00:20:21.280\n[LAUGH] So\nbasically we've got that in place.\n\n399\n00:20:21.280 --> 00:20:24.220\nWe should be pretty much ready\nto start this turkey up.\n\n400\n00:20:24.220 --> 00:20:26.870\nSo let's go ahead and give it a shot,\nand see what happens.\n\n401\n00:20:28.210 --> 00:20:30.572\nThe never-ending confidence from me here.\n\n402\n00:20:30.572 --> 00:20:33.990\nI do wanna point out one thing, I forgot\nto mention at beginning of the show.\n\n403\n00:20:33.990 --> 00:20:37.270\nYou'll notice that I'm logged in as root\nI'm actually logged in as my own user\n\n404\n00:20:37.270 --> 00:20:40.550\naccount, D Pezet, but\nI did an SU to elevate my privileges.\n\n405\n00:20:40.550 --> 00:20:44.920\nAlmost every command that I've done so\nfar, I would have to be an admin to do.\n\n406\n00:20:44.920 --> 00:20:47.680\nSo I'd have to sudo every\nsingle command I was running.\n\n407\n00:20:47.680 --> 00:20:48.350\nSo I went ahead and\n\n408\n00:20:48.350 --> 00:20:50.860\njust used SU to bump up to root to\nsave me from having to do that.\n\n409\n00:20:50.860 --> 00:20:53.560\nSo just FYI,\nif you're trying to run these commands and\n\n410\n00:20:53.560 --> 00:20:55.292\ngetting an error that might be why.\n\n411\n00:20:55.292 --> 00:20:57.150\nI'm gonna do a systemctl.\n\n412\n00:20:57.150 --> 00:21:01.320\nAnd I'm gonna start nsd.service.\n\n413\n00:21:01.320 --> 00:21:04.490\nAnd assuming everything that I've got\nis right, it should start right up,\n\n414\n00:21:04.490 --> 00:21:05.680\nand I don't get any errors.\n\n415\n00:21:05.680 --> 00:21:06.300\nEverything is good.\n\n416\n00:21:07.750 --> 00:21:13.310\nNow, the problem here is, if I reboot,\nit's not gonna start during boot.\n\n417\n00:21:13.310 --> 00:21:15.360\nSo I need to make sure it\nstarts at boot time also,\n\n418\n00:21:15.360 --> 00:21:19.407\nso I'm gonna to systemctl enable,\nand sd.service.\n\n419\n00:21:20.430 --> 00:21:25.420\nAnd I'm not running 7.3, but\nif you are running Red Hat 7.3 or\n\n420\n00:21:25.420 --> 00:21:27.990\nhigher, the enable command\nwill now start the service.\n\n421\n00:21:27.990 --> 00:21:29.250\nAlso, if it's not already started.\n\n422\n00:21:29.250 --> 00:21:31.230\nSo I could have run just one command,\nbut I'm not on 7.3.\n\n423\n00:21:31.230 --> 00:21:32.014\nSo I couldn't do that.\n\n424\n00:21:32.014 --> 00:21:32.830\nSo I had to do it.\n\n425\n00:21:32.830 --> 00:21:34.078\nIt's two separate commands.\n\n426\n00:21:34.078 --> 00:21:36.110\nI started it, and then I enabled it.\n\n427\n00:21:36.110 --> 00:21:39.429\nAnd when you enable it you will see\nit's just linking that service target.\n\n428\n00:21:40.520 --> 00:21:45.128\nSo that systemd knows to start\nit when the system boots.\n\n429\n00:21:45.128 --> 00:21:48.048\nSame thing on Ubuntu, same thing Debian,\nunless you're running one of those\n\n430\n00:21:48.048 --> 00:21:50.716\nreally weird Debians where they've\ngone back to SysVinit or Upstart.\n\n431\n00:21:50.716 --> 00:21:54.790\nBut at this point, we're in an NSD server.\n\n432\n00:21:54.790 --> 00:21:57.180\nNow, how do we know\nwe're in an NSD server?\n\n433\n00:21:57.180 --> 00:21:58.440\nHow do we know we're up and running?\n\n434\n00:21:58.440 --> 00:22:00.170\nWell, it's actually kinda hard to check.\n\n435\n00:22:00.170 --> 00:22:06.570\nBecause on a normal DNS server, it would\nhave the ability to do recursive lookups.\n\n436\n00:22:06.570 --> 00:22:10.469\nSo I could test looking up a domain\nname against it and it wouldn't have it.\n\n437\n00:22:10.469 --> 00:22:12.690\nCuz we haven't created any zones.\n\n438\n00:22:12.690 --> 00:22:15.790\nBut the server would then go out to the\nroot hint servers and find the answer and\n\n439\n00:22:15.790 --> 00:22:18.300\ngive it back to me, so\nI could at least test the server.\n\n440\n00:22:18.300 --> 00:22:20.560\nBut NSD is authoritative only.\n\n441\n00:22:20.560 --> 00:22:22.150\nIt will only answer for\n\n442\n00:22:22.150 --> 00:22:26.720\nzones that are contained right inside\nof it and I haven't made any zones.\n\n443\n00:22:26.720 --> 00:22:28.570\nSo it can't answer for anything.\n\n444\n00:22:28.570 --> 00:22:31.640\nSo the only real verification that I can\ndo right now is to make sure the service\n\n445\n00:22:31.640 --> 00:22:33.860\nis running and\nit's running without errors.\n\n446\n00:22:33.860 --> 00:22:36.040\nThere's two commands I can do for that.\n\n447\n00:22:36.040 --> 00:22:41.800\nThe first one is nsd-control status and\nnow it tell me if it's running.\n\n448\n00:22:41.800 --> 00:22:44.130\nAnd so,\nwhen I run that it will tel me my version,\n\n449\n00:22:44.130 --> 00:22:48.010\nwhat my velocity is set to if I had\na rate limit set and that's it.\n\n450\n00:22:48.010 --> 00:22:51.440\nIf the system wasn't running,\nI get a kick by message telling me that.\n\n451\n00:22:51.440 --> 00:22:55.190\nOr if there was some crazy errors\nit would maybe miss an output,\n\n452\n00:22:55.190 --> 00:22:57.369\nusually it would just fail and\nI have to go check out the logs.\n\n453\n00:22:58.770 --> 00:23:01.880\nSo the more useful command here is\nactually not an NSD tool at all,\n\n454\n00:23:01.880 --> 00:23:04.520\nit's good old systemctl.\n\n455\n00:23:04.520 --> 00:23:06.890\nRemember that systemd can\ngive us a status update for\n\n456\n00:23:06.890 --> 00:23:08.840\nany service that's running on our system.\n\n457\n00:23:08.840 --> 00:23:15.500\nAnd so, I can run systemctl status nsd,\nor really any service that I wanted.\n\n458\n00:23:15.500 --> 00:23:18.480\nSo I can punch that in and\nit's gonna tell me a little bit about it.\n\n459\n00:23:18.480 --> 00:23:22.130\nAnd I can see that it is active,\nit's up and it's running,\n\n460\n00:23:22.130 --> 00:23:24.700\nit's got a process ID of 18619.\n\n461\n00:23:24.700 --> 00:23:28.364\nIt's reached out and\naccessed some of these files.\n\n462\n00:23:28.364 --> 00:23:33.370\n/etc/nsd/nsd.comf kinda an important one.\n\n463\n00:23:33.370 --> 00:23:35.820\nAnd it is up and it's happy.\n\n464\n00:23:35.820 --> 00:23:38.440\nIf I had errors, they would show up here.\n\n465\n00:23:38.440 --> 00:23:41.050\nSo if SC Linux was blocking it or\nwhatever.\n\n466\n00:23:41.050 --> 00:23:42.830\nI'd see some messages\nhere about that error.\n\n467\n00:23:42.830 --> 00:23:44.400\nAnd I need to go and check my journal.\n\n468\n00:23:44.400 --> 00:23:46.110\nSo everything looks good.\n\n469\n00:23:46.110 --> 00:23:48.320\nI can see where we started up.\n\n470\n00:23:48.320 --> 00:23:50.020\nAnd we're up and running.\n\n471\n00:23:50.020 --> 00:23:51.160\nWe're happy.\n\n472\n00:23:51.160 --> 00:23:52.771\nNow, I did truncate some of this.\n\n473\n00:23:52.771 --> 00:23:54.199\nAt least I think I did.\n\n474\n00:23:54.199 --> 00:23:54.958\nNo I didn't.\n\n475\n00:23:54.958 --> 00:23:57.127\nSometimes it'll truncate and\nyou end up losing some data.\n\n476\n00:23:57.127 --> 00:23:59.756\nAnd so,\nit'll tell you to rerun the command and\n\n477\n00:23:59.756 --> 00:24:02.927\nadd in a little extra to get\nit where it's not truncated.\n\n478\n00:24:02.927 --> 00:24:05.270\nBut in my case, it's up and\nrunning, and we're in business.\n\n479\n00:24:05.270 --> 00:24:08.280\nIf it weren't, this is where\nwe'd start to dig into our logs.\n\n480\n00:24:09.390 --> 00:24:13.880\nAll right, to dig into the logs,\nif you haven't changed your defaults,\n\n481\n00:24:13.880 --> 00:24:17.570\nthen you're not gonna\nhave a dedicated NSD log.\n\n482\n00:24:17.570 --> 00:24:22.612\nSo what I would do is\ntail /var/log/messages,\n\n483\n00:24:22.612 --> 00:24:25.738\nwhich is your sys log, right?\n\n484\n00:24:25.738 --> 00:24:28.560\nAnd if we tail that,\nyou'll see the last ten things.\n\n485\n00:24:28.560 --> 00:24:32.330\nAnd I just started NSD, so\nI would expect to see that.\n\n486\n00:24:32.330 --> 00:24:36.470\nAnd, sure enough right here,\nI can see Started NSD, Starting, and\n\n487\n00:24:36.470 --> 00:24:37.300\nit's up and going.\n\n488\n00:24:37.300 --> 00:24:40.770\nIf I had gotten an error, the error would\nhave popped up here, and I'd see it, and\n\n489\n00:24:40.770 --> 00:24:43.710\nI'd be able to take action and\nfigure that out, right?\n\n490\n00:24:43.710 --> 00:24:48.590\nSo that's one place that we would go\nif we did turn on our own logs, right?\n\n491\n00:24:48.590 --> 00:24:52.805\nRemember when we did that setup,\n\n492\n00:24:52.805 --> 00:24:58.090\nwe told it to create an nsd.log, sorry.\n\n493\n00:24:58.090 --> 00:25:01.720\nAnd we can look, and\nthere is nsd.log right there.\n\n494\n00:25:01.720 --> 00:25:05.268\nAnd maybe I'll less this one, so\n\n495\n00:25:05.268 --> 00:25:11.498\n/var/log/nsd.log, and\nno much to see here, right?\n\n496\n00:25:11.498 --> 00:25:14.180\nIt started, and there's that, right?\n\n497\n00:25:14.180 --> 00:25:16.070\nBut if there were errors,\nthat's where I would spot them, and\n\n498\n00:25:16.070 --> 00:25:17.130\nI'd be able to take action.\n\n499\n00:25:17.130 --> 00:25:19.120\nThe errors, if you get them,\n\n500\n00:25:19.120 --> 00:25:23.640\nthey usually stem from things like\nSELinux or file permissions, right?\n\n501\n00:25:23.640 --> 00:25:26.310\nIf you're root and\nyou're creating these files, it's fine.\n\n502\n00:25:26.310 --> 00:25:28.950\nBut if you're your own user and\nyou start making files, sometimes,\n\n503\n00:25:28.950 --> 00:25:30.210\nthe ownership can get messed up on them.\n\n504\n00:25:30.210 --> 00:25:33.390\nYou might need to change the owner and\nget that stuff straightened out.\n\n505\n00:25:33.390 --> 00:25:34.660\nThose are kind of some of the problems.\n\n506\n00:25:34.660 --> 00:25:36.390\nBut after that, it's all syntax.\n\n507\n00:25:36.390 --> 00:25:37.570\nAnd syntax,\n\n508\n00:25:37.570 --> 00:25:43.000\nthat's why we have nsd-checkconf\nto make sure our syntax is good.\n\n509\n00:25:43.000 --> 00:25:45.890\nSo that tool right there is\nnormally enough to get us by.\n\n510\n00:25:45.890 --> 00:25:47.690\nBut at this point, we are up.\n\n511\n00:25:47.690 --> 00:25:48.680\nWe're running NSD.\n\n512\n00:25:49.850 --> 00:25:52.090\nWe're just not doing a great job\nbecause we don't have any zones.\n\n513\n00:25:52.090 --> 00:25:52.761\nAnd, unfortunately,\n\n514\n00:25:52.761 --> 00:25:54.713\nI don't have enough time to create\na zone right here in this episode.\n\n515\n00:25:54.713 --> 00:25:56.988\nBut in our next episode,\nwe're gonna create some zones, and\n\n516\n00:25:56.988 --> 00:25:58.577\nthen we'll really be able to see NSD work.\n\n517\n00:25:58.577 --> 00:26:01.378\nBecause we'll be able to ask it questions,\nand we'll get answers back.\n\n518\n00:26:01.378 --> 00:26:03.306\nThat's what a name server\nis supposed to do, and\n\n519\n00:26:03.306 --> 00:26:05.094\nwe'll know that it's up and running.\n\n520\n00:26:05.094 --> 00:26:06.526\nI'm forgetting something.\n\n521\n00:26:06.526 --> 00:26:08.620\n[LAUGH] This is important.\n\n522\n00:26:08.620 --> 00:26:11.910\nDepending on your operating system,\nyou probably have a firewall in place.\n\n523\n00:26:11.910 --> 00:26:15.581\nI just turned on NSD, but\nthe firewall is likely blocking it,\n\n524\n00:26:15.581 --> 00:26:17.849\nso I need to get that added in, right?\n\n525\n00:26:17.849 --> 00:26:20.367\nSo on Red Hat, we have firewalld.\n\n526\n00:26:20.367 --> 00:26:24.950\nYou might have IP tables or something\nelse, but I'm gonna use firewalld.\n\n527\n00:26:24.950 --> 00:26:28.840\nAnd, actually, I'll just use\nthe firewall-cmd to modify firewalld.\n\n528\n00:26:28.840 --> 00:26:34.755\nAnd I'm gonna tell it that\nI need to add-service=dns.\n\n529\n00:26:34.755 --> 00:26:38.392\nI need to add dns to firewall rules\nto allow that traffic to come in and,\n\n530\n00:26:38.392 --> 00:26:40.810\nnow it'll be able to get in there.\n\n531\n00:26:40.810 --> 00:26:43.235\nBe aware that that takes place right now.\n\n532\n00:26:43.235 --> 00:26:46.680\nI just opened the port, but\nit didn't write it to the config file.\n\n533\n00:26:46.680 --> 00:26:47.951\nSo if I reboot, I'm gonna lose that.\n\n534\n00:26:47.951 --> 00:26:53.046\nSo I need to run it a second time,\nand add --permanent, okay.\n\n535\n00:26:53.046 --> 00:26:55.580\nAnd now, it's going to write\nit to the config files.\n\n536\n00:26:55.580 --> 00:26:59.240\nIf I had just run the second command,\nit would write it to config files, but\n\n537\n00:26:59.240 --> 00:27:00.760\nit wouldn't take effect right now.\n\n538\n00:27:00.760 --> 00:27:03.080\nI'd need to restart the firewall,\nwhich is a pain.\n\n539\n00:27:03.080 --> 00:27:05.470\nSo just get in the habit of\nrunning the command twice,\n\n540\n00:27:05.470 --> 00:27:07.660\nonce without the permanent to\nmake it take effect now and\n\n541\n00:27:07.660 --> 00:27:10.260\nonce with the permanent to make it\ntake effect on the next reboot.\n\n542\n00:27:11.290 --> 00:27:12.710\nWhy two commands?\n\n543\n00:27:12.710 --> 00:27:15.909\nWell, what if the first one you\nrun screws something up, and\n\n544\n00:27:15.909 --> 00:27:18.939\nyou lock yourself out of the server and\nyou can't get in?\n\n545\n00:27:18.939 --> 00:27:22.630\nNow you can get somebody to reboot it,\nand those commands go away, right?\n\n546\n00:27:22.630 --> 00:27:24.370\nSo the idea is that you\nrun the first command,\n\n547\n00:27:24.370 --> 00:27:25.730\nyou test to make sure everything's fine.\n\n548\n00:27:25.730 --> 00:27:28.630\nAnd once it's fine, then you run the\nsecond command to make it permanent, so\n\n549\n00:27:28.630 --> 00:27:29.920\nit'll start the next time you reboot, too.\n\n550\n00:27:29.920 --> 00:27:32.380\nSo that's why we have\nthe two different commands.\n\n551\n00:27:32.380 --> 00:27:37.978\nAnd you can always check that\nwith firewall-cmd --list-all,\n\n552\n00:27:37.978 --> 00:27:40.580\nand you'll see what's\nallowed on your system.\n\n553\n00:27:40.580 --> 00:27:43.371\nAnd so\nI can see DNS is now added as a service.\n\n554\n00:27:43.371 --> 00:27:48.359\nIf I had done a custom port, right, and\nif I had moved to port 5300 or whatever,\n\n555\n00:27:48.359 --> 00:27:51.730\nI would need to add port 5300 and\nget that approved.\n\n556\n00:27:51.730 --> 00:27:53.863\nWe have to add that in SELinux, also.\n\n557\n00:27:53.863 --> 00:27:55.789\nIf you're running 2B in Ubuntu,\nyou don't have that.\n\n558\n00:27:55.789 --> 00:27:57.848\nIn the Red Hat world, you do.\n\n559\n00:27:57.848 --> 00:27:59.860\nI've covered it in some of the other\nshows, so you can jump and\n\n560\n00:27:59.860 --> 00:28:00.759\ncheck that out if you want.\n\n561\n00:28:00.759 --> 00:28:05.159\nLike in the bind and the unbound shows or\nepisodes, we've covered that, so\n\n562\n00:28:05.159 --> 00:28:06.899\nI won't bore us with it here.\n\n563\n00:28:06.899 --> 00:28:10.820\nBut just be aware you do need to open that\nup, or you won't be able to communicate.\n\n564\n00:28:10.820 --> 00:28:11.778\n&gt;&gt; A lot of great information, Don.\n\n565\n00:28:11.778 --> 00:28:15.440\nWe appreciate you letting us know and\nshowing us how to install and\n\n566\n00:28:15.440 --> 00:28:16.780\nget NSD up and running.\n\n567\n00:28:16.780 --> 00:28:19.730\nI know that we are gonna,\nin another episode, see those zones.\n\n568\n00:28:19.730 --> 00:28:22.930\nBut it does look like we're coming to the\nend of another episode, and before we do,\n\n569\n00:28:22.930 --> 00:28:25.130\ngot any additional words about NSD?\n\n570\n00:28:25.130 --> 00:28:27.474\n&gt;&gt; Definitely stay tuned because\nit's not too fun without zones.\n\n571\n00:28:27.474 --> 00:28:29.178\nSo we're gonna come back and\ncreate some zones.\n\n572\n00:28:29.178 --> 00:28:30.729\nThat's where we'll really see some action,\n\n573\n00:28:30.729 --> 00:28:32.366\nand you'll definitely want to be here for\nthat.\n\n574\n00:28:32.366 --> 00:28:35.033\n&gt;&gt; All right, Don, well, we appreciate\nyou stopping by the studio, and\n\n575\n00:28:35.033 --> 00:28:36.880\nwe appreciate you, the viewer, watching.\n\n576\n00:28:36.880 --> 00:28:39.950\nSigning out for ITProTV,\nI've been your host, Wes Brian.\n\n577\n00:28:39.950 --> 00:28:40.473\n&gt;&gt; And I am Don Pazette.\n\n578\n00:28:40.473 --> 00:28:42.957\n&gt;&gt; And we'll see you next time.\n\n579\n00:28:42.957 --> 00:28:49.142\n[MUSIC]\n\n580\n00:28:49.142 --> 00:28:52.156\n&gt;&gt; Thank you for watching ITPRO.TV.\n\n",
          "vimeoId": "196618537"
        },
        {
          "description": "In this episode, Wes and Don talk about the not to common DNS server implementation used in technologies like root hint servers and DNSSEC called NSD. They discuss the step-by-step process of configuring the DNS zone in NSD as well as demonstrate the SOA record configuration, BIND syntax of the zone file an",
          "length": "1873",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-6-2-configuring_zones_in_nsd-121316-PGM.00_30_59_03.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-6-2-configuring_zones_in_nsd-121316-PGM.00_30_59_03.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-6-2-configuring_zones_in_nsd-121316-PGM.00_30_59_03.Still001-sm.jpg",
          "title": "Configuring Zones in NSD",
          "transcript": "WEBVTT\n\n1\n00:00:00.220 --> 00:00:03.334\nWelcome to ITProTV, I'm your host-\n&gt;&gt; [CROSSTALK]\n\n2\n00:00:03.334 --> 00:00:04.878\n&gt;&gt; Coming at you live from San Francisco.\n\n3\n00:00:04.878 --> 00:00:12.200\n&gt;&gt; [CROSSTALK]\n&gt;&gt; You're watching ITProTV.\n\n4\n00:00:12.200 --> 00:00:15.758\n&gt;&gt; Welcome to another great episode here\nat ITProTV, I'm your host, Wes Bryan.\n\n5\n00:00:15.758 --> 00:00:20.001\nAnd in today's episode we are continuing\nthrough our series on DNS tech skills, and\n\n6\n00:00:20.001 --> 00:00:24.210\nwell, we're bringing him back, that's\nright, none other than Mr. Don Pezet.\n\n7\n00:00:24.210 --> 00:00:25.190\nDon, how are you doing, sir?\n\n8\n00:00:25.190 --> 00:00:27.560\n&gt;&gt; I'm doing swell, Wes,\nready to dive right back into NSD.\n\n9\n00:00:27.560 --> 00:00:30.158\nWe had to end our last episode\nkind of on a cliffhanger,\n\n10\n00:00:30.158 --> 00:00:32.880\nI know you guys have been\nwaiting in anticipation.\n\n11\n00:00:32.880 --> 00:00:36.224\nWe got NSD installed, we saw how\nthat all worked, it was great, but\n\n12\n00:00:36.224 --> 00:00:38.761\nwithout any zones,\nNSD is absolutely worthless.\n\n13\n00:00:38.761 --> 00:00:43.277\nBecause it is authoritative only,\nno caching, no recursive lookups,\n\n14\n00:00:43.277 --> 00:00:47.730\nno forwarders, it either has the zone or\nit doesn't, and that's it.\n\n15\n00:00:47.730 --> 00:00:51.065\nSo while we did have it up and running,\nI was able to show that it was running,\n\n16\n00:00:51.065 --> 00:00:53.010\nwe didn't really get\nto see it do anything.\n\n17\n00:00:53.010 --> 00:00:55.195\nIt's hard to feel like it's an impressive\nproduct when it doesn't do anything.\n\n18\n00:00:55.195 --> 00:00:57.527\nSo in this episode,\nwe're gonna make it do something.\n\n19\n00:00:57.527 --> 00:00:59.083\nWe're gonna create a forward lookup zone.\n\n20\n00:00:59.083 --> 00:01:03.096\nWe're gonna get chucked in there and get\na chance to see it resolve some of that\n\n21\n00:01:03.096 --> 00:01:06.890\ninformation and actually see it\ndo the stuff it's supposed to do.\n\n22\n00:01:06.890 --> 00:01:10.240\nSo instead of gabbing on about it like\nI'm apparently doing, we'll go ahead and\n\n23\n00:01:10.240 --> 00:01:11.280\nget started [LAUGH].\n\n24\n00:01:11.280 --> 00:01:15.337\nThe first thing I need to do is\nI need to create a zone file,\n\n25\n00:01:15.337 --> 00:01:19.989\nand when they created NSD,\nremember that BIND far predates NSD,\n\n26\n00:01:19.989 --> 00:01:24.578\nbut the zone file system used in\nBIND has been around a long time.\n\n27\n00:01:24.578 --> 00:01:28.232\nPeople like it,\nthere's not really much to mess with, so\n\n28\n00:01:28.232 --> 00:01:33.610\nwhen they created NSD, they just stuck\nwith the standard BIND format for a zone.\n\n29\n00:01:33.610 --> 00:01:34.970\nIf you create a forward lookup zone or\n\n30\n00:01:34.970 --> 00:01:38.920\na reverse lookup zone, the file formats\nused in BIND are the same in NSD.\n\n31\n00:01:38.920 --> 00:01:43.030\nNow, on a positive side, that makes it\nreally easy to migrate cuz you can just\n\n32\n00:01:43.030 --> 00:01:45.110\ncopy the zone files right over and\nreuse them.\n\n33\n00:01:45.110 --> 00:01:48.670\nNow, you just need to add it to\nnsd.conf and you're in business, but\n\n34\n00:01:48.670 --> 00:01:52.275\nif we need to write them by hand,\nit's just the old familiar format\n\n35\n00:01:52.275 --> 00:01:56.450\nthat I'm sure you all have memorized\nas well as I do, which is not at all.\n\n36\n00:01:56.450 --> 00:01:57.820\nSo anyhow, we're gonna get in here and\n\n37\n00:01:57.820 --> 00:02:01.800\nwrite that zone file, I'm gonna\ncreate a zone file for lab.itpro.tv.\n\n38\n00:02:01.800 --> 00:02:03.610\nAnd on the Red-Hat-based distros,\n\n39\n00:02:03.610 --> 00:02:08.350\nit's gonna go into /etc/nsd, that's\nwhere it expects its zone files to be.\n\n40\n00:02:08.350 --> 00:02:10.800\nThat's where we have nsd.conf also,\n\n41\n00:02:10.800 --> 00:02:14.320\nas well as all the various authentication\nkeys that our server can use.\n\n42\n00:02:14.320 --> 00:02:16.730\nSo that stuff's right there,\nI'm gonna jump in, and\n\n43\n00:02:16.730 --> 00:02:18.830\nI'm gonna create the zone file right here.\n\n44\n00:02:18.830 --> 00:02:21.710\nNow, you do need to be an administrator\nto write to this folder, so\n\n45\n00:02:21.710 --> 00:02:23.520\nyou'll either need to sudo these commands,\nor\n\n46\n00:02:23.520 --> 00:02:26.180\ndo what I did which is use su\nto elevate your privileges.\n\n47\n00:02:26.180 --> 00:02:30.620\nAnd I'm gonna edit lab.itpro.tv.dns,\n\n48\n00:02:30.620 --> 00:02:33.110\nthe file name can be\nwhatever you want it to be.\n\n49\n00:02:33.110 --> 00:02:36.100\nYou can call it bob.text if you want,\nthe file name doesn't matter.\n\n50\n00:02:36.100 --> 00:02:39.500\nRight, but I've gotten in the habit\nof always using the domain name, so\n\n51\n00:02:39.500 --> 00:02:41.943\nI'm doing lab.itpro.tv,\nthat's what I want.\n\n52\n00:02:41.943 --> 00:02:44.718\n.dns, that's actually a carryover from\nsome other work I've done on Microsoft\n\n53\n00:02:44.718 --> 00:02:46.258\nsystems where they\nalways end them in .dns.\n\n54\n00:02:46.258 --> 00:02:50.064\nI just do that for consistency across the\nplatform, so you don't have to do that,\n\n55\n00:02:50.064 --> 00:02:51.680\nyou can call it whatever you want.\n\n56\n00:02:52.960 --> 00:02:56.140\nThen inside of the file,\nI need to create my forward lookup zone.\n\n57\n00:02:56.140 --> 00:02:59.490\nNow, if you're already familiar with this,\nit's the standard BIND format, so\n\n58\n00:02:59.490 --> 00:03:02.320\nfeel free to fast forward if you want,\nbut if you're not familiar with these,\n\n59\n00:03:02.320 --> 00:03:04.530\nlet me show you what has to\ngo into one of these files.\n\n60\n00:03:04.530 --> 00:03:07.170\nWe'll kinda do the bare minimum,\nand then I'll add on some bells and\n\n61\n00:03:07.170 --> 00:03:09.050\nwhistles to it to make it a little nicer.\n\n62\n00:03:09.050 --> 00:03:13.720\nSo let's start with the bare minimum just\nso we can make sure the server works, and\n\n63\n00:03:13.720 --> 00:03:15.410\nthen we'll go and\nadd the others afterwards, okay?\n\n64\n00:03:15.410 --> 00:03:18.989\nIt'll give me a chance to show you how\ncool NSD can do at updating zones,\n\n65\n00:03:18.989 --> 00:03:19.951\nit's kinda neat.\n\n66\n00:03:19.951 --> 00:03:23.550\nAll right, the very first thing\nthat I need to enter in is, well,\n\n67\n00:03:23.550 --> 00:03:27.086\nI'm gonna do the absolute bare minimum,\njust the rock bottom,\n\n68\n00:03:27.086 --> 00:03:30.530\nthe bare minimum what I need to\ndo to get this put in place.\n\n69\n00:03:30.530 --> 00:03:33.334\nSo the very first thing I need to do\nis I need to put in my default TTL.\n\n70\n00:03:33.334 --> 00:03:37.460\nAnd that's the time to live,\nhow long I'll allow records to be cached.\n\n71\n00:03:37.460 --> 00:03:41.560\nNow, remember NSD doesn't do caching, so\nthis isn't how long I'm caching stuff,\n\n72\n00:03:41.560 --> 00:03:44.410\nit's how long other people\ncan cache my stuff.\n\n73\n00:03:44.410 --> 00:03:48.142\nIf I'm using Unbound in conjunction\nwith NSD, which is pretty common,\n\n74\n00:03:48.142 --> 00:03:49.068\n[COUGH] Excuse me.\n\n75\n00:03:49.068 --> 00:03:52.933\nIf I'm doing that, then what's gonna\nhappen is Unbound will use this time to\n\n76\n00:03:52.933 --> 00:03:57.250\nlive to determine how long it can hold\na record before checking back in with me.\n\n77\n00:03:57.250 --> 00:04:01.250\nSo I'm gonna set it as 86400,\nwhich is a pretty common value,\n\n78\n00:04:01.250 --> 00:04:06.640\nI think that works out to 12 hours,\nif I remember right, something like that.\n\n79\n00:04:06.640 --> 00:04:08.894\nSo it's a pretty decent time,\nmaybe too long for some records.\n\n80\n00:04:08.894 --> 00:04:11.322\nRemember, you can always override time\nto live on individual records, so\n\n81\n00:04:11.322 --> 00:04:13.029\nif you have some that are more\ncritical than others.\n\n82\n00:04:13.029 --> 00:04:14.352\nSo I'm gonna throw that one in there.\n\n83\n00:04:14.352 --> 00:04:18.892\nThen let me throw in our\nstart of authority record.\n\n84\n00:04:18.892 --> 00:04:25.230\nThe SOA record, you have to have it,\nthis is who is responsible for this zone.\n\n85\n00:04:25.230 --> 00:04:28.800\nAnd so the start of authority is\ngoing to be a DNS server somewhere\n\n86\n00:04:28.800 --> 00:04:30.350\nwho's in charge of this zone.\n\n87\n00:04:30.350 --> 00:04:34.740\nWell, my box is gonna be\ndns3.lab.itpro.tv, so\n\n88\n00:04:34.740 --> 00:04:37.220\nI'm gonna set it up as\nthe start of authority.\n\n89\n00:04:37.220 --> 00:04:41.140\nThe @ symbol means that I'm\ngoing to be referencing\n\n90\n00:04:41.140 --> 00:04:43.230\nwhatever this domain happens to be.\n\n91\n00:04:43.230 --> 00:04:47.391\nAnd NSD will know what this domain is\nbecause well, when I load it in NSD.com,\n\n92\n00:04:47.391 --> 00:04:50.985\nI have to tell it the domain so\nit'll know what that @ symbol is, and\n\n93\n00:04:50.985 --> 00:04:53.960\nthat's like an alias\nthat it'll explode out.\n\n94\n00:04:53.960 --> 00:04:58.459\nI could type lab.itpro.tv.,\nyou have to have a dot at the end, and\n\n95\n00:04:58.459 --> 00:05:00.830\nthat would be the same thing.\n\n96\n00:05:00.830 --> 00:05:02.000\nIf you ever wanna override it,\n\n97\n00:05:02.000 --> 00:05:06.460\nyou can throw like a default domain\nup at the top using a Origin command.\n\n98\n00:05:06.460 --> 00:05:10.943\nI don't normally do that, but\nyou see it in a lot of textbooks'\n\n99\n00:05:10.943 --> 00:05:15.003\nexamples where they come in and\nthey say like $ORIGIN and\n\n100\n00:05:15.003 --> 00:05:19.676\nthen lab.itpro.tv., whoops,\nlab.itpro.tv., there.\n\n101\n00:05:19.676 --> 00:05:24.838\nAnd that way when we leave a domain off,\nthat it'll assume this one up here.\n\n102\n00:05:24.838 --> 00:05:29.146\nBut even that Origin command will get\noverridden when you use the @ symbol\n\n103\n00:05:29.146 --> 00:05:32.344\nbecause nsd.conf has\nthe domain specified there, so\n\n104\n00:05:32.344 --> 00:05:34.810\nthat'll override it with the @ symbol.\n\n105\n00:05:34.810 --> 00:05:37.338\nThis little alias here will really\nonly work on individual records,\n\n106\n00:05:37.338 --> 00:05:38.350\nwe'll see those later on.\n\n107\n00:05:39.530 --> 00:05:41.410\nAll right,\nI know I said I'd do the bare minimum, but\n\n108\n00:05:41.410 --> 00:05:45.120\nI'll leave the origin up there\njust cuz some people like it.\n\n109\n00:05:45.120 --> 00:05:47.800\nAll right, when I do the start of\nauthority, it is a Internet record,\n\n110\n00:05:47.800 --> 00:05:49.850\nwhich almost everything is these days.\n\n111\n00:05:49.850 --> 00:05:52.650\nIn fact,\nin NSD it defaults to Internet class, and\n\n112\n00:05:52.650 --> 00:05:55.430\nso you can leave the IN\noff on some of them, but\n\n113\n00:05:55.430 --> 00:05:58.960\nit's not good practice to do it cuz\nwe're trying to maintain BIND's format.\n\n114\n00:05:58.960 --> 00:06:00.810\nAnd BIND hates it when\nyou leave stuff off,\n\n115\n00:06:00.810 --> 00:06:05.350\nso while NSD is forgiving, BIND isn't,\nso I still include the class.\n\n116\n00:06:05.350 --> 00:06:08.020\nI'm gonna create an SOA record,\nand it's gonna be for\n\n117\n00:06:08.020 --> 00:06:12.860\nmy server, dns3.lab.itpro.tv., all right?\n\n118\n00:06:12.860 --> 00:06:16.610\nNow, and I'll throw my dot on the end,\nright, it's a stickler about that.\n\n119\n00:06:16.610 --> 00:06:19.000\nNow, that's the name server that's\ngonna be the start of authority,\n\n120\n00:06:19.000 --> 00:06:21.140\nthe person who's authoritative for\nthis zone.\n\n121\n00:06:21.140 --> 00:06:25.473\nAnd in NSD, NSD is an authoritative\nserver, so it's almost always the server\n\n122\n00:06:25.473 --> 00:06:28.770\nthat you're on,\nunless you have more than one NSD server.\n\n123\n00:06:28.770 --> 00:06:31.622\nIf you have more than one NSD server,\nit could be one of the other ones, but\n\n124\n00:06:31.622 --> 00:06:34.626\nit's gonna be some server that you\ncontrol because you're authoritative.\n\n125\n00:06:34.626 --> 00:06:38.260\nYou can't be authoritative for somebody\nelse's domain unless you're spoofing it,\n\n126\n00:06:38.260 --> 00:06:41.171\nwhich you could do, but a DNS cycle\nwill break that down pretty fast.\n\n127\n00:06:41.171 --> 00:06:44.220\nThen we need to specify an admin,\nnow the admin,\n\n128\n00:06:44.220 --> 00:06:48.235\nthis is a throwback to the olden days\nwhere this would help us query a record,\n\n129\n00:06:48.235 --> 00:06:51.790\nyou'd create a text record that would\ntell you where to find this person.\n\n130\n00:06:51.790 --> 00:06:53.833\nMost people don't use it anymore,\nbut you still have to have it, so\n\n131\n00:06:53.833 --> 00:07:00.890\nI'm gonna put admin.lab.itpro.tv., and\nthen I'm ready to start my settings.\n\n132\n00:07:00.890 --> 00:07:03.100\nThe start of authority has\nto provide five values,\n\n133\n00:07:03.100 --> 00:07:05.320\nfive numbers that identify\nhow it functions.\n\n134\n00:07:05.320 --> 00:07:08.640\nThe first one is a serial number,\nand the serial number,\n\n135\n00:07:08.640 --> 00:07:12.210\nI'm just gonna write the names out here so\nI can remember what each one is.\n\n136\n00:07:12.210 --> 00:07:16.870\nThe serial number is identifying which\nversion of the database this is,\n\n137\n00:07:16.870 --> 00:07:19.570\nI just created it, so this is version 1.\n\n138\n00:07:19.570 --> 00:07:23.820\nIf I only have one server, I don't really\ncare about the serial number at all.\n\n139\n00:07:23.820 --> 00:07:28.360\nBut if I have multiple servers, if I have\nother like secondary or slave servers that\n\n140\n00:07:28.360 --> 00:07:32.090\nare replicating this, they need to know\nwhen the database has been updated so\n\n141\n00:07:32.090 --> 00:07:33.890\nthey can download the new database.\n\n142\n00:07:33.890 --> 00:07:35.906\nIf I've got version 2 and\nthey're sitting on version 1,\n\n143\n00:07:35.906 --> 00:07:38.385\nthey need to know to get the new one,\nso we can bump that serial number up.\n\n144\n00:07:38.385 --> 00:07:40.735\nIn theory,\nevery time you edit your database,\n\n145\n00:07:40.735 --> 00:07:42.870\nyou should increment that number.\n\n146\n00:07:42.870 --> 00:07:45.840\nNow, most people forget to do that,\nso it doesn't happen.\n\n147\n00:07:45.840 --> 00:07:48.859\nAnd while there's other technologies like\nincremental transfers that can solve that\n\n148\n00:07:48.859 --> 00:07:51.516\nproblem and work around it, even though\nthe serial number is not changing.\n\n149\n00:07:51.516 --> 00:07:56.027\nBut as a general rule, you're supposed to\nchange that every time you edit the file.\n\n150\n00:07:56.027 --> 00:08:00.995\nThe next number is gonna be my refresh\ninterval, which is how often I check for\n\n151\n00:08:00.995 --> 00:08:02.683\nchanges in my zone files.\n\n152\n00:08:02.683 --> 00:08:03.880\nSo that's going to be my refresh.\n\n153\n00:08:03.880 --> 00:08:07.258\nAnd then we'll come in and say my retry.\n\n154\n00:08:07.258 --> 00:08:11.002\nIf I try and forward out to another\nserver and I get a failure.\n\n155\n00:08:11.002 --> 00:08:14.170\nHow long ago would you retry?\n\n156\n00:08:14.170 --> 00:08:19.020\nOn a NSD server,\nit doesn't really have much of an effect.\n\n157\n00:08:19.020 --> 00:08:21.480\nBut I need to have it there, because\nI'm following the standard bind format.\n\n158\n00:08:22.550 --> 00:08:26.230\nAll right, and then lastly is my minimum\ntime to live or my negative time to live.\n\n159\n00:08:26.230 --> 00:08:29.490\nSo that if somebody tries to reduce\nthe TTL there are limits to how\n\n160\n00:08:29.490 --> 00:08:30.600\nlow we'll let it go.\n\n161\n00:08:30.600 --> 00:08:32.410\nAnd so\nI can specify what I want that to be.\n\n162\n00:08:32.410 --> 00:08:37.770\nSo we'll throw in something like 3600 and\nI'll call that my negative TTL.\n\n163\n00:08:39.770 --> 00:08:40.270\nAll right.\n\n164\n00:08:40.270 --> 00:08:41.930\nActually, I have my formatting wrong.\n\n165\n00:08:41.930 --> 00:08:43.390\nThat's the last value.\n\n166\n00:08:43.390 --> 00:08:44.070\nNo, it's not.\n\n167\n00:08:44.070 --> 00:08:45.100\nShoot.\nI only did four values.\n\n168\n00:08:45.100 --> 00:08:45.830\nWho did I leave out?\n\n169\n00:08:45.830 --> 00:08:47.120\nI left out expire.\n\n170\n00:08:47.120 --> 00:08:48.360\nShoot.\n\n171\n00:08:48.360 --> 00:08:50.340\nSee this is why we have notes.\n\n172\n00:08:50.340 --> 00:08:54.336\nSo the expiration, how long will I hold on\nto records from a server I can no longer\n\n173\n00:08:54.336 --> 00:08:57.095\ncontact before I expire them out and,\nand chuck them?\n\n174\n00:08:57.095 --> 00:09:03.384\nSo I'm gonna set my expire to 57,600 and\nso that will be my expire.\n\n175\n00:09:03.384 --> 00:09:06.370\nAll right now 3600 that's my last number.\n\n176\n00:09:06.370 --> 00:09:09.620\nThe negative TTL and so\nI need to close off my parenthesis.\n\n177\n00:09:09.620 --> 00:09:12.970\nI open the parenthesis here and\nI'm gonna close it off down here.\n\n178\n00:09:12.970 --> 00:09:15.280\nAnd knows how I close it\noff before that semicolon.\n\n179\n00:09:15.280 --> 00:09:19.180\nAnd that's because the semicolon's\nactually identifying the end of this whole\n\n180\n00:09:19.180 --> 00:09:21.170\nline starting with the at symbol.\n\n181\n00:09:21.170 --> 00:09:22.120\nAll the way to there.\n\n182\n00:09:22.120 --> 00:09:23.630\nThat's what's getting closed off, right.\n\n183\n00:09:23.630 --> 00:09:24.630\nSo it's important to have that.\n\n184\n00:09:24.630 --> 00:09:26.861\nIf the syntax is wrong, don't worry,\n\n185\n00:09:26.861 --> 00:09:30.520\nwe've got a syntax checker that will help\nus spot that and get in there and fix it.\n\n186\n00:09:30.520 --> 00:09:32.823\nMaking typos actually really\neasy to do in these files.\n\n187\n00:09:35.410 --> 00:09:36.360\nAll right.\n\n188\n00:09:36.360 --> 00:09:40.730\nNow, technically there is only three\nthings I have to have in a zone file.\n\n189\n00:09:40.730 --> 00:09:44.300\nI need to have a time to live,\nI need to have a start of authority and\n\n190\n00:09:44.300 --> 00:09:47.870\nI need to have at least one name search.\n\n191\n00:09:47.870 --> 00:09:51.020\nPreferably two, but\nat least one to be syntactically correct.\n\n192\n00:09:51.020 --> 00:09:53.870\nI don't know if that's a word but\nI'm going to use it anyway.\n\n193\n00:09:53.870 --> 00:09:55.110\nSyntactically correct.\n\n194\n00:09:55.110 --> 00:09:57.180\nSo I need to create at least one entry for\na name server.\n\n195\n00:09:57.180 --> 00:10:01.830\nSo I'm going to come in here and do an at,\nagain because this is a reference for\n\n196\n00:10:01.830 --> 00:10:03.490\nthe domain, itself.\n\n197\n00:10:03.490 --> 00:10:05.030\nIt's internet class.\n\n198\n00:10:05.030 --> 00:10:07.500\nAnd this is a name server, right?\n\n199\n00:10:07.500 --> 00:10:12.520\nAnd my name server is going\nto be dns3.lab.itpro.tv.\n\n200\n00:10:12.520 --> 00:10:15.790\nNow, I'm using the same one\nas my start of authority.\n\n201\n00:10:15.790 --> 00:10:17.130\nI don't have to.\n\n202\n00:10:17.130 --> 00:10:22.020\nI might have ten different DNS\nservers that all have this zone on it.\n\n203\n00:10:22.020 --> 00:10:23.770\nAnd one of them's the SOA but\n\n204\n00:10:23.770 --> 00:10:25.840\nI'm providing to other people\ndifferent name servers here.\n\n205\n00:10:25.840 --> 00:10:27.310\nI might have more than one.\n\n206\n00:10:27.310 --> 00:10:30.960\nSo it doesn't have to match, in my case\nit does because I just have one server.\n\n207\n00:10:30.960 --> 00:10:34.520\nUsually they do match though, and usually\nyou have more than one name server but\n\n208\n00:10:34.520 --> 00:10:37.650\nyou only have one SOA so\nthe match only goes so far.\n\n209\n00:10:37.650 --> 00:10:41.290\nLater on I'm gonna add\nanother name server dns4.\n\n210\n00:10:41.290 --> 00:10:43.140\nSo I can go ahead and\npunch that one in now,\n\n211\n00:10:43.140 --> 00:10:46.720\nif I wanted to, and\nwe'll get that in there.\n\n212\n00:10:46.720 --> 00:10:47.430\nAll right.\n\n213\n00:10:47.430 --> 00:10:52.990\nNow if I stop right here, I've met the\nminimum needs for configuring your zone.\n\n214\n00:10:54.350 --> 00:10:58.670\nBut it may throw some errors\nwhen I run a check tool.\n\n215\n00:10:58.670 --> 00:11:01.960\nIf I scan the server to look, there's\nthird party tools party out there that'll\n\n216\n00:11:01.960 --> 00:11:03.780\nhelp you test it and look for things too.\n\n217\n00:11:03.780 --> 00:11:06.320\nIf I try and do something like that,\nit may throw some errors.\n\n218\n00:11:06.320 --> 00:11:10.248\nAnd the main reason I might get an error\nhere is that, I keep referencing\n\n219\n00:11:10.248 --> 00:11:16.080\ndns3.lab.itpro.tv or\ndns4 I don't have any A records for them.\n\n220\n00:11:16.080 --> 00:11:19.440\nSo I'm not gonna get very far without\nan A record for these guys, and so\n\n221\n00:11:19.440 --> 00:11:22.400\nI'll get errors cuz you can't\nlook up who my name servers are.\n\n222\n00:11:22.400 --> 00:11:24.400\nSo I'm gonna add two more entries.\n\n223\n00:11:24.400 --> 00:11:27.920\nWhat you see here,\nif we were to delete the origin line.\n\n224\n00:11:27.920 --> 00:11:30.060\nEverything else is the bare minimum,\n\n225\n00:11:30.060 --> 00:11:33.190\nI guess if I went down to one name server\nalso then that would be the bare minimum.\n\n226\n00:11:33.190 --> 00:11:37.880\nBut the true bare minimum would be for\nme to add some A records here.\n\n227\n00:11:37.880 --> 00:11:42.310\nSo I need to add a record for\ndns3 and dns4.\n\n228\n00:11:42.310 --> 00:11:48.240\nNow, if I use the ORIGIN command up here,\nI can just say dns3 and\n\n229\n00:11:48.240 --> 00:11:53.120\nhit tab and\nit'll assume I meant dns3.lab.itpro.tv.\n\n230\n00:11:53.120 --> 00:11:54.200\nIf you didn't do the ORIGIN command,\n\n231\n00:11:54.200 --> 00:11:59.620\nI normally leave it out, then I actually\nneed to type the whole name in.\n\n232\n00:11:59.620 --> 00:12:01.080\nLike that, okay?\n\n233\n00:12:01.080 --> 00:12:06.080\nSo be aware that that format can change\na little bit based on whether or\n\n234\n00:12:06.080 --> 00:12:07.490\nnot you used the ORIGIN command.\n\n235\n00:12:07.490 --> 00:12:13.420\nAnd I'm gonna create an A record for\nit that points this guy to 10.0.222.103.\n\n236\n00:12:13.420 --> 00:12:15.110\nAnd then I'll so the same thing for dns4.\n\n237\n00:12:17.620 --> 00:12:18.860\nAnd I'll get that put in.\n\n238\n00:12:20.687 --> 00:12:23.000\nAnd there we go.\n\n239\n00:12:23.000 --> 00:12:24.350\nSo there's my A records.\n\n240\n00:12:24.350 --> 00:12:27.820\nAnd I've screwed up my formatting\nthanks to the long file names, or\n\n241\n00:12:27.820 --> 00:12:29.430\nthe long server names down there.\n\n242\n00:12:29.430 --> 00:12:32.530\nSo if I wanna really be particular about\nthis stuff, I'm gonna need to come in and\n\n243\n00:12:32.530 --> 00:12:34.210\nadd a few more tabs.\n\n244\n00:12:34.210 --> 00:12:36.340\nAnd there we go.\nNow we're nice and clean.\n\n245\n00:12:36.340 --> 00:12:37.860\nI like to have mine nice and in order.\n\n246\n00:12:37.860 --> 00:12:39.530\nI usually do space out\nthe name servers too.\n\n247\n00:12:39.530 --> 00:12:41.980\nSo I keep them separate, just so\nI don't mess them up by accident.\n\n248\n00:12:41.980 --> 00:12:44.460\nAnd then all of my A records and\nother things go at the bottom.\n\n249\n00:12:44.460 --> 00:12:48.310\nBut, as it stands,\nthat should be pretty good for the basics.\n\n250\n00:12:48.310 --> 00:12:50.570\nWe'll come back and\nwe'll add some more advanced stuff later.\n\n251\n00:12:50.570 --> 00:12:53.510\nBut at this point, I really just to\ntest to make sure NSD is working.\n\n252\n00:12:53.510 --> 00:12:55.010\nSo I'm gonna just save this.\n\n253\n00:12:56.700 --> 00:12:57.300\nOkay.\n\n254\n00:12:57.300 --> 00:12:58.650\nSo now I've got that file created.\n\n255\n00:12:58.650 --> 00:13:01.450\nI might have some errors in it but\nit's at least created, we'll check it for\n\n256\n00:13:01.450 --> 00:13:02.880\nerrors in just a moment.\n\n257\n00:13:02.880 --> 00:13:07.960\nOkay, once that's done,\nNSD needs to know about it.\n\n258\n00:13:07.960 --> 00:13:10.190\nNSD doesn't just scan\nthis folder looking for\n\n259\n00:13:10.190 --> 00:13:13.720\nzone files, cuz remember I said the file\nname could be whatever we want.\n\n260\n00:13:13.720 --> 00:13:16.460\nSo it wouldn't necessarily know\nwhich of these files are zones and\n\n261\n00:13:16.460 --> 00:13:17.440\nwhich ones aren't.\n\n262\n00:13:17.440 --> 00:13:20.710\nSo we have to tell it\nthat that file exists.\n\n263\n00:13:20.710 --> 00:13:23.460\nAnd we do that inside of nsd.conf.\n\n264\n00:13:23.460 --> 00:13:29.590\nSo I'm gonna edit /etc/nsd/nsd.conf.\n\n265\n00:13:29.590 --> 00:13:33.170\nAnd I'm gonna go in here and\nwhere you put it\n\n266\n00:13:34.570 --> 00:13:38.540\ndoesn't truly matter except you have to be\ncareful because there's these sections.\n\n267\n00:13:38.540 --> 00:13:40.950\nSee how this is the server section?\n\n268\n00:13:40.950 --> 00:13:43.660\nIf I put it under the server\nsection it's gonna break things.\n\n269\n00:13:43.660 --> 00:13:49.720\nAnd if I keep scrolling down, I'll find\nthe next section eventually [LAUGH].\n\n270\n00:13:49.720 --> 00:13:51.650\nThought it was a little\ncloser to the top than that.\n\n271\n00:13:51.650 --> 00:13:52.380\nThere we go.\n\n272\n00:13:52.380 --> 00:13:53.770\nHere's an include section.\n\n273\n00:13:53.770 --> 00:13:55.990\nHere's a remote control section, right.\n\n274\n00:13:55.990 --> 00:13:58.730\nI think in the last episode I mentioned\nhow you could use NSD control from\n\n275\n00:13:58.730 --> 00:14:01.570\nanother workstation,\nhere's where I configure that.\n\n276\n00:14:01.570 --> 00:14:05.350\nWhen I want to enter a zone I can enter\nthe zone in between any of these sections.\n\n277\n00:14:05.350 --> 00:14:07.810\nI could have put it in between include or\nremote control.\n\n278\n00:14:07.810 --> 00:14:11.410\nBut if I stick it in the middle\nof remote control by accident\n\n279\n00:14:11.410 --> 00:14:13.650\nit's gonna end remote control,\nit's gonna start my zone.\n\n280\n00:14:13.650 --> 00:14:16.980\nAnd then all the other remote control\ncommands are gonna get stuck onto my zone,\n\n281\n00:14:16.980 --> 00:14:17.820\nit's gonna break things.\n\n282\n00:14:17.820 --> 00:14:19.120\nIt breaks the syntax.\n\n283\n00:14:19.120 --> 00:14:20.990\nSo when it comes to creating zones,\n\n284\n00:14:20.990 --> 00:14:24.400\nI almost always just skip right\nto the very bottom of the file.\n\n285\n00:14:24.400 --> 00:14:27.680\nAnd if you get to the very bottom\nof the file, what you'll find is,\n\n286\n00:14:27.680 --> 00:14:31.350\nthey actually have a few examples\nof zones that are right there.\n\n287\n00:14:31.350 --> 00:14:34.510\nAnd so you can use those examples to kind\nof mirror what you're about to type.\n\n288\n00:14:34.510 --> 00:14:36.150\nBut I usually just jump to the very end,\n\n289\n00:14:36.150 --> 00:14:39.730\nthat way I know I'm not in\nthe middle of any other section.\n\n290\n00:14:39.730 --> 00:14:43.910\nAnd now I can come in and I can tell\nit about the zone that I made, or\n\n291\n00:14:43.910 --> 00:14:45.730\nthat I'm in the process of making.\n\n292\n00:14:45.730 --> 00:14:49.750\nSo I'm gonna tell it that I've got a zone,\nand I'm gonna give that zone a name.\n\n293\n00:14:49.750 --> 00:14:54.370\nAnd the name is lab.itpro.tv.\n\n294\n00:14:54.370 --> 00:14:57.630\nRemember that dollar sign origin\nvariable I put in the file.\n\n295\n00:14:57.630 --> 00:15:01.120\nAnd how I said NSD doesn't really need\nit cuz it already knows the domain.\n\n296\n00:15:01.120 --> 00:15:02.050\nThis is how it knows.\n\n297\n00:15:02.050 --> 00:15:02.840\nI gave it a name.\n\n298\n00:15:02.840 --> 00:15:04.170\nIt's lab.itpro.tv.\n\n299\n00:15:05.320 --> 00:15:08.290\nAnd then, I need to tell the zonefile.\n\n300\n00:15:08.290 --> 00:15:10.140\nWhere's it gonna find this?\n\n301\n00:15:10.140 --> 00:15:13.700\nNow I don't have to put a path\non this because it knows to look\n\n302\n00:15:13.700 --> 00:15:16.190\ninto /etc/nsd by default.\n\n303\n00:15:16.190 --> 00:15:19.590\nBut if I put it somewhere\nelse I do have to put a path.\n\n304\n00:15:19.590 --> 00:15:22.900\nSo only put a path if you moved it\naway from where the default is.\n\n305\n00:15:22.900 --> 00:15:25.800\nIf you left it where it goes normally\nthen we just come in here and\n\n306\n00:15:25.800 --> 00:15:29.870\nwe say what that file name is, and\nit knows exactly where to look for it.\n\n307\n00:15:29.870 --> 00:15:33.650\nAnd it's gonna look inside at /etc/nsd and\nit's gonna find it.\n\n308\n00:15:33.650 --> 00:15:38.440\nSo that's gonna tell NSD about\nthis new zone that I made.\n\n309\n00:15:38.440 --> 00:15:40.500\nAnd it's gonna know that it's there,\nit's gonna load it, and\n\n310\n00:15:40.500 --> 00:15:41.480\nnow we'll actually have a zone.\n\n311\n00:15:43.140 --> 00:15:44.740\nSo I'm done, right?\n\n312\n00:15:44.740 --> 00:15:45.360\nWell not quite.\n\n313\n00:15:45.360 --> 00:15:50.670\nNsd.conf is only loaded when NSD starts.\n\n314\n00:15:50.670 --> 00:15:54.540\nSo it started in the last episode,\nso a while ago.\n\n315\n00:15:54.540 --> 00:15:56.200\nIt doesn't know that zone exists.\n\n316\n00:15:56.200 --> 00:15:57.920\nIt's not gonna look for it.\n\n317\n00:15:57.920 --> 00:15:59.934\nSo I need to tell NSD to refresh.\n\n318\n00:15:59.934 --> 00:16:02.700\nAnd this is probably one of\nmy favorite features of NSD.\n\n319\n00:16:02.700 --> 00:16:07.412\nIn other nameservers like BIND,\nthe way I'd do it is I'd restart BIND.\n\n320\n00:16:07.412 --> 00:16:08.870\nSo I could restart the service.\n\n321\n00:16:08.870 --> 00:16:10.040\nWell, that works.\n\n322\n00:16:10.040 --> 00:16:12.240\nWhen you restart the service,\nit loads the config file, right?\n\n323\n00:16:12.240 --> 00:16:14.000\nSo it works and it finds its own.\n\n324\n00:16:14.000 --> 00:16:19.080\nThe problem is, anybody doing lookups\nright then, they're gonna fail to connect.\n\n325\n00:16:19.080 --> 00:16:23.080\nAnd they'll move on to another DNS server,\nyou should have more than one.\n\n326\n00:16:23.080 --> 00:16:24.280\nYou do have more than one, right?\n\n327\n00:16:24.280 --> 00:16:25.880\nSo, hopefully you do.\n\n328\n00:16:25.880 --> 00:16:26.830\nAnd people don't notice.\n\n329\n00:16:26.830 --> 00:16:29.130\nAnd that's how a lot of administrators\nlook at it, like, they won't notice,\n\n330\n00:16:29.130 --> 00:16:30.300\nthey'll go to the backup.\n\n331\n00:16:30.300 --> 00:16:33.877\nBut what really happens is\nthey're in Google Chrome and\n\n332\n00:16:33.877 --> 00:16:38.225\nthey're trying to get to Facebook and\nthe page pauses for a second.\n\n333\n00:16:38.225 --> 00:16:41.260\nAnd they finally get through, and they're\nlike, my Internet connection is garbage.\n\n334\n00:16:41.260 --> 00:16:45.430\nAnd it all turns out that it was just a\nslowdown cuz of failed DNS lookup, right?\n\n335\n00:16:45.430 --> 00:16:47.930\nSo that's the kind of\nproblem we can trigger.\n\n336\n00:16:47.930 --> 00:16:52.310\nWell, on your home, or office,\nsmall, medium business,\n\n337\n00:16:52.310 --> 00:16:53.660\neven an enterprise business,\n\n338\n00:16:53.660 --> 00:16:58.570\nit's such a brief thing to restart that\nservice that most people won't notice.\n\n339\n00:16:58.570 --> 00:17:00.620\nBut who's running NSD?\n\n340\n00:17:00.620 --> 00:17:01.820\nThe big guys.\n\n341\n00:17:01.820 --> 00:17:02.750\nThe root hint servers.\n\n342\n00:17:02.750 --> 00:17:07.315\nThe guys that are at the heart and soul of\nthe DNS infrastructure for the Internet.\n\n343\n00:17:07.315 --> 00:17:10.225\nThey're not handling hundreds\nof queries per minute.\n\n344\n00:17:10.225 --> 00:17:12.435\nThey're not handling thousands\nof queries per minute.\n\n345\n00:17:12.435 --> 00:17:15.175\nThey're handling hundreds of\nthousands of queries per minute,\n\n346\n00:17:15.175 --> 00:17:17.440\nmaybe even into the millions\non some of them.\n\n347\n00:17:17.440 --> 00:17:20.490\nWe're talking about huge\namounts of lookups.\n\n348\n00:17:20.490 --> 00:17:25.548\nAnd being down for even a fraction of\na second, it just can't happen, right.\n\n349\n00:17:25.548 --> 00:17:29.650\nSo in NSD, we actually have the ability\nto refresh our config file and\n\n350\n00:17:29.650 --> 00:17:32.520\nread the config file without\nrestarting the service, right.\n\n351\n00:17:32.520 --> 00:17:34.670\nAnd you can do the same\nthing with zone files.\n\n352\n00:17:34.670 --> 00:17:39.610\nSo when I modify a zone, I can reload the\nzone file without restarting the service.\n\n353\n00:17:39.610 --> 00:17:41.140\nThat's really important.\n\n354\n00:17:41.140 --> 00:17:45.810\nNow, if it's the first time that\nI created a zone like I did here,\n\n355\n00:17:45.810 --> 00:17:50.660\nI need to refresh NSD's config so\nthat it learns about the zone.\n\n356\n00:17:50.660 --> 00:17:53.613\nBut from here on out,\nany time I modify the zone,\n\n357\n00:17:53.613 --> 00:17:55.641\nI can just refresh the zone file.\n\n358\n00:17:55.641 --> 00:17:57.710\nI don't have to refresh all of NSD.\n\n359\n00:17:57.710 --> 00:18:00.591\nSo, I might have 20 other zones\nthat I don't want to mess with.\n\n360\n00:18:00.591 --> 00:18:03.290\nI can leave them be, and\nI can just refresh the individual zone.\n\n361\n00:18:03.290 --> 00:18:05.870\nFor me, though, I'm going to\nneed to reload the whole config.\n\n362\n00:18:05.870 --> 00:18:07.530\nNow, before I do that.\n\n363\n00:18:07.530 --> 00:18:10.070\nI've messed with the config a good bit,\nright.\n\n364\n00:18:10.070 --> 00:18:12.610\nIt's possible that I've made some typos.\n\n365\n00:18:12.610 --> 00:18:14.720\nIt's possible that I have\nsome typos in my zone file.\n\n366\n00:18:14.720 --> 00:18:16.550\nIt's possible that I have\ntypos in my config file.\n\n367\n00:18:16.550 --> 00:18:19.410\nSo I'm going to check those\nbefore I reload anything.\n\n368\n00:18:19.410 --> 00:18:21.198\nCuz if I try and reload it and\nthere's an error,\n\n369\n00:18:21.198 --> 00:18:22.916\nI could potentially\nbring the service down.\n\n370\n00:18:22.916 --> 00:18:25.160\nAnd I'm trying to avoid down time, right.\n\n371\n00:18:25.160 --> 00:18:30.721\nSo I'm going to do nsd-checkconf\n\n372\n00:18:30.721 --> 00:18:35.140\n/etc/nsd/nsd.conf.\n\n373\n00:18:35.140 --> 00:18:38.849\nSo I'm gonna check my main config file and\nhopefully I get nothing back.\n\n374\n00:18:38.849 --> 00:18:41.965\nIf there was a typo, a missing semicolon,\nwhatever, it would warn me, and\n\n375\n00:18:41.965 --> 00:18:43.620\nI could fix that.\n\n376\n00:18:43.620 --> 00:18:47.310\nThen I'm gonna do nsd-checkzone.\n\n377\n00:18:47.310 --> 00:18:49.040\nAnd I'm gonna check my zone file.\n\n378\n00:18:49.040 --> 00:18:51.320\nNow, when you check the zone file,\n\n379\n00:18:51.320 --> 00:18:54.350\nit needs to know the stuff that\nwould normally come from nsd.conf.\n\n380\n00:18:54.350 --> 00:18:58.710\nSo I need to tell it the domain name,\nwhich is lab.itpro.tv.\n\n381\n00:18:58.710 --> 00:19:02.420\nAnd then I need to tell it\nthe file that I'm checking.\n\n382\n00:19:02.420 --> 00:19:06.304\nAnd so I'm gonna point to that file,\nall right.\n\n383\n00:19:06.304 --> 00:19:09.530\nAnd so when I point to it now it\nknows the domain name and the file.\n\n384\n00:19:09.530 --> 00:19:12.400\nThat's the two pieces of\ninformation I put in nsd.conf.\n\n385\n00:19:12.400 --> 00:19:15.090\nAnd it's gonna go and check that zone\nout and it's gonna look for errors.\n\n386\n00:19:15.090 --> 00:19:18.270\nAnd hopefully you get a message\nback saying something like this.\n\n387\n00:19:18.270 --> 00:19:20.539\nThat lab.itpro.tv is okay, right?\n\n388\n00:19:20.539 --> 00:19:26.817\nIf there was an error, if there was\nsome kind of problem in there, right?\n\n389\n00:19:26.817 --> 00:19:31.290\nLet's say I left a semicolon out, right,\nso I'm just gonna take that semicolon out.\n\n390\n00:19:31.290 --> 00:19:34.430\nWhen I go to check that zone,\nI get an error.\n\n391\n00:19:34.430 --> 00:19:38.367\nAnd it tells me we had an error,\nsyntax error on line number 9.\n\n392\n00:19:38.367 --> 00:19:42.498\nAnd then it tells me the zone is\nconfigured as lab.itpro.tv, but\n\n393\n00:19:42.498 --> 00:19:45.460\nit has no start of authority record.\n\n394\n00:19:45.460 --> 00:19:47.100\nSo I've got an error on line 9, and\n\n395\n00:19:47.100 --> 00:19:50.630\nit's a problem with my start of authority\nrecord, right, that's what it tells me.\n\n396\n00:19:50.630 --> 00:19:53.020\nAnd so I can go in and I can fix that.\n\n397\n00:19:53.020 --> 00:19:56.800\nSo I can get move down to line nine,\nwhich is right here.\n\n398\n00:19:56.800 --> 00:19:58.518\nI'm in my SOA.\n\n399\n00:19:58.518 --> 00:20:01.920\nAnd I can look, and I can say, all right,\nwell, what's the problem on this line?\n\n400\n00:20:01.920 --> 00:20:03.838\nAnd I'm missing a semicolon.\n\n401\n00:20:03.838 --> 00:20:06.794\nOr if I put the semicolon in the wrong\nspot or whatever, we can get in and\n\n402\n00:20:06.794 --> 00:20:07.800\nwe can fix that.\n\n403\n00:20:07.800 --> 00:20:10.990\nAnd now once it's fixed,\nwe can check that error.\n\n404\n00:20:10.990 --> 00:20:11.870\nAnd the important part is,\n\n405\n00:20:11.870 --> 00:20:17.080\nwe're checking it without messing\nwith the NSD service itself, right?\n\n406\n00:20:17.080 --> 00:20:21.708\nSo now, when I go and load the config,\nI know that it should be safe.\n\n407\n00:20:21.708 --> 00:20:28.387\nTo load the config, we do nsd-control and\nthen we say reconfig.\n\n408\n00:20:28.387 --> 00:20:34.280\nThat says, read the config file again and\napply any changes you find.\n\n409\n00:20:34.280 --> 00:20:36.800\nAnd the change it's gonna find is\nthat new zone we added at the end.\n\n410\n00:20:36.800 --> 00:20:38.860\nAnd so it's gonna load that zone in.\n\n411\n00:20:38.860 --> 00:20:40.690\nAnd hopefully everything is right.\n\n412\n00:20:40.690 --> 00:20:45.240\nBut key to this process, it didn't have\nto restart the service to do it, right.\n\n413\n00:20:45.240 --> 00:20:48.110\nSo if people were doing lookups\nwhile this was running,\n\n414\n00:20:48.110 --> 00:20:50.350\nthey were still doing lookups,\nit was fine, right?\n\n415\n00:20:50.350 --> 00:20:52.450\nIt kept running,\neverything was hunky dory.\n\n416\n00:20:52.450 --> 00:20:56.122\nSo we should be good there, and\nwe should be up and running, all right?\n\n417\n00:20:56.122 --> 00:20:59.786\nNow, I'm throwing out a liberal\namount of shoulds on this, right?\n\n418\n00:20:59.786 --> 00:21:01.306\nSo how do we know it's actually running?\n\n419\n00:21:01.306 --> 00:21:03.588\nWell, the easiest way is I\ncould do a lookup against it.\n\n420\n00:21:03.588 --> 00:21:08.569\nWe could say dig @127.0.0.1.\n\n421\n00:21:08.569 --> 00:21:11.507\nOoh, actually, when we did IP\naddresses in the config file,\n\n422\n00:21:11.507 --> 00:21:13.100\nI didn't approve the loopback.\n\n423\n00:21:13.100 --> 00:21:13.850\nSo that might not work.\n\n424\n00:21:13.850 --> 00:21:16.448\nSo let me do the actual IP.\n\n425\n00:21:16.448 --> 00:21:17.840\nIt is a little literal.\n\n426\n00:21:17.840 --> 00:21:21.030\nLike, I would have needed to have approved\nthe loopback address, which I didn't.\n\n427\n00:21:21.030 --> 00:21:22.380\nSo I did the actual address.\n\n428\n00:21:22.380 --> 00:21:25.349\nSo I'm telling it to do\na lookup against this server.\n\n429\n00:21:25.349 --> 00:21:30.472\nAnd I'm gonna look up dns4.lab.itpro.tv.\n\n430\n00:21:30.472 --> 00:21:32.132\nThat was one of the records\nthat I created.\n\n431\n00:21:32.132 --> 00:21:34.944\nAnd when I do the lookup,\nhere it comes right back.\n\n432\n00:21:34.944 --> 00:21:39.713\nAnd dns4 is 10.0.222.104.\n\n433\n00:21:39.713 --> 00:21:40.828\nLookup worked.\n\n434\n00:21:40.828 --> 00:21:42.099\nGreat, right.\n\n435\n00:21:42.099 --> 00:21:43.886\nI could have used nslookup, same thing.\n\n436\n00:21:43.886 --> 00:21:48.392\nI could have looked up\ndns4.lab.itpro.tv and\n\n437\n00:21:48.392 --> 00:21:53.225\nspecified the server right afterwards,\nlike that.\n\n438\n00:21:53.225 --> 00:21:55.600\nAnd then it does the lookup,\nyou see a little less data that way, but\n\n439\n00:21:55.600 --> 00:21:56.609\nmaybe that's good for you.\n\n440\n00:21:56.609 --> 00:21:58.410\nYou don't want to see all the junk.\n\n441\n00:21:58.410 --> 00:22:00.720\nBut I can see, so I am doing lookups.\n\n442\n00:22:00.720 --> 00:22:08.580\nAnd if I try a recursive lookup, like if\nI try and look up www.google.com, right?\n\n443\n00:22:08.580 --> 00:22:10.012\nWhat's gonna happen?\n\n444\n00:22:10.012 --> 00:22:14.450\nNXDOMAIN, can't, nonexistent domain,\ncan't find it, right?\n\n445\n00:22:14.450 --> 00:22:18.290\nIf I do a dig for that, let's switch\nto dig, dig will give me better data.\n\n446\n00:22:18.290 --> 00:22:22.000\nAnd you look,\nI'll say www.google.com, okay?\n\n447\n00:22:22.000 --> 00:22:23.060\nI did a lookup.\n\n448\n00:22:23.060 --> 00:22:24.188\nAnd see what I got back.\n\n449\n00:22:24.188 --> 00:22:26.195\nIN A.\n\n450\n00:22:26.195 --> 00:22:29.380\nI was asking for an A record,\nit didn't find anything.\n\n451\n00:22:29.380 --> 00:22:35.310\nAnd the reason is, WARNING: recursion\nrequested but not available.\n\n452\n00:22:35.310 --> 00:22:37.260\nNSD does not support recursion.\n\n453\n00:22:37.260 --> 00:22:38.310\nIt's authoritative only.\n\n454\n00:22:38.310 --> 00:22:39.950\nEither it has the answer or it doesn't.\n\n455\n00:22:39.950 --> 00:22:43.040\nIf you need recursion, then get Unbound.\n\n456\n00:22:43.040 --> 00:22:46.178\nHave Unbound doing all\nyour lookups recursive and\n\n457\n00:22:46.178 --> 00:22:50.144\nthen forward your authoritative\nzones right over here to NSD.\n\n458\n00:22:50.144 --> 00:22:51.491\nAnd now you get both running.\n\n459\n00:22:51.491 --> 00:22:55.839\nThat's the way it's intended to run,\nI have the two different systems in place.\n\n460\n00:22:55.839 --> 00:22:58.441\nAll right, now if I wanna modify\nthat zone, I wanna go and\n\n461\n00:22:58.441 --> 00:23:00.241\nchange some records in there, right?\n\n462\n00:23:00.241 --> 00:23:06.110\nSo I'm gonna edit lab.itpro.tv.dns, and\nI'm gonna add some new records, right.\n\n463\n00:23:06.110 --> 00:23:09.330\nSo I'm gonna get in here and\ntake this guy and\n\n464\n00:23:09.330 --> 00:23:15.070\nI want to add maybe additional A records,\nmaybe I have a web server, right.\n\n465\n00:23:15.070 --> 00:23:19.365\nSo I'm gonna add webserver01.lab.itpro.tv.\n\n466\n00:23:19.365 --> 00:23:20.980\nAnd that's too long,\nlet's make it shorter.\n\n467\n00:23:22.110 --> 00:23:25.064\nWebserv, I don't wanna\nmess up my formatting.\n\n468\n00:23:25.064 --> 00:23:30.645\n[LAUGH] So webserv01.lab.itpro.tv, I'll\nmake it an Internet record, an A record.\n\n469\n00:23:30.645 --> 00:23:34.768\nAnd maybe it has more than one IP, right.\n\n470\n00:23:34.768 --> 00:23:41.331\nSo I can use standard bind format, where\nmy next line, I just leave the name blank.\n\n471\n00:23:41.331 --> 00:23:42.768\nAnd now I can put in two IP's.\n\n472\n00:23:42.768 --> 00:23:49.759\nOr I can even do an IPv6 address, right.\n\n473\n00:23:49.759 --> 00:23:51.882\nWhich is always a fun one to type.\n\n474\n00:23:51.882 --> 00:23:52.973\nSo I can punch those in.\n\n475\n00:23:52.973 --> 00:23:55.749\nSo just kind of adding all\nthose entries for webserv.\n\n476\n00:23:55.749 --> 00:23:58.841\nI might have a CNAME for www, right?\n\n477\n00:23:58.841 --> 00:24:02.287\nSo I can punch those in If you\nwatched our unbound episode,\n\n478\n00:24:02.287 --> 00:24:05.490\nyou'll know that unbound\ndoesn't support CNAMEs.\n\n479\n00:24:05.490 --> 00:24:06.250\nBut NSD does.\n\n480\n00:24:06.250 --> 00:24:08.810\nAnd this is where my\nzones are stored anyway.\n\n481\n00:24:08.810 --> 00:24:12.620\nSo now when a CNAME lookup goes to\nunbound, it forwards it over to NSD,\n\n482\n00:24:12.620 --> 00:24:14.520\ngets the answer, returns it back,\neverything works great.\n\n483\n00:24:14.520 --> 00:24:17.760\nSo the two work together amazingly.\n\n484\n00:24:17.760 --> 00:24:19.740\nIndependently, they are of\nmarginal usefulness.\n\n485\n00:24:19.740 --> 00:24:23.832\nBut when you put them together, it is\nthe best DNS solution that's out there,\n\n486\n00:24:23.832 --> 00:24:24.455\nall right.\n\n487\n00:24:24.455 --> 00:24:28.280\nSo I'm going to create a CNAME\nthat creates to webserv01.\n\n488\n00:24:28.280 --> 00:24:29.970\nIf I spell it right, that's going to help.\n\n489\n00:24:31.070 --> 00:24:34.730\nI'll point that to lab.itpro.tv.\n\n490\n00:24:34.730 --> 00:24:36.830\nAnd maybe I want some MX records, right?\n\n491\n00:24:36.830 --> 00:24:39.230\nMX records,\nwe normally stick on the domain.\n\n492\n00:24:39.230 --> 00:24:41.230\nSo I'll come in and do that.\n\n493\n00:24:41.230 --> 00:24:44.891\nSo maybe I'll do mail1.lab.itpro.tv.\n\n494\n00:24:44.891 --> 00:24:50.810\nAnd I might have a second one,\ncuz we always have multiple DNS servers,\n\n495\n00:24:50.810 --> 00:24:55.350\nright, or mail servers cuz mail\nis important to most people.\n\n496\n00:24:55.350 --> 00:24:57.140\nSo I can start to punch those in.\n\n497\n00:24:57.140 --> 00:25:00.320\nI probably need a records for those guys\ntoo if I really want to do this proper\n\n498\n00:25:00.320 --> 00:25:03.660\nstyle, [LAUGH] so\nI can come in and do those too.\n\n499\n00:25:03.660 --> 00:25:05.480\nThis is gonna get boring real fast,\nisn't it?\n\n500\n00:25:05.480 --> 00:25:07.350\nWhat other kind of records\nshould I mess with?\n\n501\n00:25:07.350 --> 00:25:09.570\nI think that's probably a pretty\ngood rundown right there.\n\n502\n00:25:11.170 --> 00:25:12.786\nYou think any others, Wes?\n\n503\n00:25:12.786 --> 00:25:17.450\n&gt;&gt; Other than a PTR record, but\nyou'd have to reverse lookup zone, right?\n\n504\n00:25:17.450 --> 00:25:20.790\n&gt;&gt; Yeah, yeah, so a PTR record,\nif we want to do a reverse lookup zone,\n\n505\n00:25:20.790 --> 00:25:22.870\nwe'd actually have to create\na whole new zone file, right,\n\n506\n00:25:22.870 --> 00:25:24.820\ncuz that's not gonna\nbe a part of this one.\n\n507\n00:25:24.820 --> 00:25:28.430\nBut I'm glad you asked, cuz we definitely\ndon't have time to jump into that one.\n\n508\n00:25:28.430 --> 00:25:32.260\nBut basically you'd create a zone\nfile that would be named with\n\n509\n00:25:32.260 --> 00:25:34.002\nthe reverse lookup format.\n\n510\n00:25:34.002 --> 00:25:37.509\nSo in my case,\nI've got this 10.0.222 network, so\n\n511\n00:25:37.509 --> 00:25:42.072\nI would create a zone that was 222.0.10,\nright, kind of backwards.\n\n512\n00:25:42.072 --> 00:25:47.590\n222.0.10.in-addr.arpa, right?\n\n513\n00:25:47.590 --> 00:25:51.540\nAnd that's the reverse lookup zone\nname format for that zone, and\n\n514\n00:25:51.540 --> 00:25:55.490\nthen for its records,\nI would still need a ttl, an soa.\n\n515\n00:25:55.490 --> 00:25:56.700\nI would still need name servers,\n\n516\n00:25:56.700 --> 00:25:59.490\nthose three critical things,\nyou'd have to have those.\n\n517\n00:25:59.490 --> 00:26:04.280\nSo, whoops, so you could actually just\n[LAUGH] I'm gonna blow it up here,\n\n518\n00:26:04.280 --> 00:26:05.300\nthis is going crazy.\n\n519\n00:26:05.300 --> 00:26:08.200\nSo, basically all this stuff up\nhere at the top would be the same.\n\n520\n00:26:08.200 --> 00:26:11.090\nYou can copy and paste this,\nwhich is what I was trying to do.\n\n521\n00:26:11.090 --> 00:26:12.800\nYou can copy and paste that,\nand then down here,\n\n522\n00:26:12.800 --> 00:26:14.250\nthe record is really all\nthat would be different.\n\n523\n00:26:14.250 --> 00:26:17.460\nSo you would say PTR, and\n\n524\n00:26:17.460 --> 00:26:21.120\non the left side would be an IP, and on\nthe right side would be a name versus what\n\n525\n00:26:21.120 --> 00:26:24.260\nI'm doing where it's a name on\nthe left side and an IP on the right.\n\n526\n00:26:24.260 --> 00:26:27.910\nSo that would be it, but otherwise, the\nreverse lookup zones are just like forward\n\n527\n00:26:27.910 --> 00:26:30.170\nlookup zones, except for\nflipping those around.\n\n528\n00:26:30.170 --> 00:26:32.740\n&gt;&gt; Would your SRV records\ngo into this zone as well?\n\n529\n00:26:32.740 --> 00:26:34.360\n&gt;&gt; Yeah, if I did SRV records.\n\n530\n00:26:34.360 --> 00:26:35.745\nYou had to pick the hardest one,\ndidn't you?\n\n531\n00:26:35.745 --> 00:26:36.318\n&gt;&gt; [LAUGH]\n&gt;&gt; So\n\n532\n00:26:36.318 --> 00:26:41.240\nyeah, those would go in here\nto if we had SRV records.\n\n533\n00:26:41.240 --> 00:26:43.110\nYou'd put whatever their name was.\n\n534\n00:26:43.110 --> 00:26:44.250\nTheir type is SRV.\n\n535\n00:26:44.250 --> 00:26:49.250\nAnd then you have to specify the protocol,\nthe priority, the weight, and\n\n536\n00:26:49.250 --> 00:26:54.240\nthen the port information and\nall that would all go right into here.\n\n537\n00:26:54.240 --> 00:26:57.480\nI actually don't remember the SRV\nformat off the top of my head, but\n\n538\n00:26:57.480 --> 00:26:59.590\nI know we did an episode on SRV records.\n\n539\n00:26:59.590 --> 00:27:01.790\nSo definitely check that out, we've\ngot all the formatting right in there,\n\n540\n00:27:01.790 --> 00:27:02.960\nyou can just kinda see how to do that.\n\n541\n00:27:03.960 --> 00:27:07.040\nAll right, this is a pretty good run right\nhere of various records that I've added.\n\n542\n00:27:07.040 --> 00:27:11.090\nI'm gonna get out of this and again,\nI was typing kinda fast on some of these.\n\n543\n00:27:11.090 --> 00:27:12.720\nSo I need to check that real quick.\n\n544\n00:27:12.720 --> 00:27:15.050\nSo I'm gonna recheck my zone file.\n\n545\n00:27:15.050 --> 00:27:16.661\nAnd everything looks okay.\n\n546\n00:27:16.661 --> 00:27:22.188\nNow, earlier, I ran nsd-control reconfig.\n\n547\n00:27:22.188 --> 00:27:25.020\nThat reloaded nsd.config.\n\n548\n00:27:25.020 --> 00:27:27.280\nI didn't modify nsd.config this time,\nthough, did I?\n\n549\n00:27:27.280 --> 00:27:29.270\nI modified an existing zone.\n\n550\n00:27:29.270 --> 00:27:32.840\nSo instead of running reconfig,\nwhich actually wouldn't help me here,\n\n551\n00:27:32.840 --> 00:27:39.950\nwhat I can run instead\nis reload lab.itpro.tv.\n\n552\n00:27:39.950 --> 00:27:43.480\nAnd that's gonna tell it the config\nhasn't changed, that's the same.\n\n553\n00:27:43.480 --> 00:27:45.060\nBut let's just do a lookup or\n\n554\n00:27:45.060 --> 00:27:49.650\ndo a quick check on the zone file and\nreload that, update our database.\n\n555\n00:27:49.650 --> 00:27:51.640\nCuz it is maintaining\na database in the back end.\n\n556\n00:27:51.640 --> 00:27:53.800\nAnd that's not gonna affect\nany of the other zones and\n\n557\n00:27:53.800 --> 00:27:55.840\nit's gonna get those records put in place.\n\n558\n00:27:55.840 --> 00:28:00.980\nAnd so now when I do a lookup\nagainst my system I can come in and\n\n559\n00:28:00.980 --> 00:28:03.730\ndo like a dig on my server.\n\n560\n00:28:05.960 --> 00:28:11.140\nAnd I can do a lookup for www.lab.itpro.tv\nand it's gonna look it up.\n\n561\n00:28:11.140 --> 00:28:14.820\nSo here's the lookup,\nit found that it was a CNAME and\n\n562\n00:28:14.820 --> 00:28:16.670\nif this was unbound it\nwould've stop right there.\n\n563\n00:28:16.670 --> 00:28:21.180\nBut NSD goes the step further that we need\n,and explodes that into the individual\n\n564\n00:28:21.180 --> 00:28:22.320\nIP addresses that we need.\n\n565\n00:28:22.320 --> 00:28:24.466\nSo they're they are,\nright like we want them.\n\n566\n00:28:24.466 --> 00:28:28.280\nAnd if I were to do a, what is it, -tmx?\n\n567\n00:28:31.003 --> 00:28:32.129\nShoot, no I got that wrong.\n\n568\n00:28:32.129 --> 00:28:33.683\nLet me use nslookup for this one.\n\n569\n00:28:33.683 --> 00:28:36.751\nI'm gonna do nslookup and\nI'll do a set type=MX.\n\n570\n00:28:36.751 --> 00:28:39.110\nSo I wanna look up mail exchange records.\n\n571\n00:28:39.110 --> 00:28:43.092\nAnd I'm gonna do server 10.0.222.103.\n\n572\n00:28:43.092 --> 00:28:47.890\nThere we go, and then I can come in and\nsay lab.itpro.tv.\n\n573\n00:28:47.890 --> 00:28:49.060\nAnd there's my mail exchangers.\n\n574\n00:28:49.060 --> 00:28:50.430\nRight, so my MX records come back.\n\n575\n00:28:50.430 --> 00:28:52.050\nNow I know who to send email to.\n\n576\n00:28:52.050 --> 00:28:54.231\nSo everything's working\nthe way that we want it to.\n\n577\n00:28:54.231 --> 00:28:55.613\nNSD is up and running.\n\n578\n00:28:55.613 --> 00:28:57.440\nEverything's happy.\n\n579\n00:28:57.440 --> 00:28:59.190\nWe're pretty good to go, right?\n\n580\n00:28:59.190 --> 00:29:02.450\nAfter this all we have to do is make\nsure this stay is running, right,\n\n581\n00:29:02.450 --> 00:29:03.880\nconstantly monitor its status.\n\n582\n00:29:03.880 --> 00:29:04.820\nMake sure everything's okay.\n\n583\n00:29:04.820 --> 00:29:10.420\nI know in the last episode I showed\nyou the nsd-control status command,\n\n584\n00:29:10.420 --> 00:29:13.390\nwhich let you know if\nthe server is running.\n\n585\n00:29:13.390 --> 00:29:18.990\nYou also have systemctl status nsd.service\nwhich will give you a little more\n\n586\n00:29:18.990 --> 00:29:22.270\ninformation there as far as whether it's\nrunning, if there's any current errors.\n\n587\n00:29:22.270 --> 00:29:27.296\nBut there's also another command I wanna\nshow you which is nsd-control zonestatus,\n\n588\n00:29:27.296 --> 00:29:27.960\nright?\n\n589\n00:29:27.960 --> 00:29:30.625\nSo nsd-control status\nis the server status.\n\n590\n00:29:30.625 --> 00:29:34.278\nnsd-control zonestatus\nis the individual zone.\n\n591\n00:29:34.278 --> 00:29:39.600\nAnd so I can pull it up just for itpro.tv,\nand I can see that the zone is happy.\n\n592\n00:29:39.600 --> 00:29:41.900\nIt's loaded, and I'm currently the master,\n\n593\n00:29:41.900 --> 00:29:44.740\nwhich means I'm the one\nwho's creating the records.\n\n594\n00:29:44.740 --> 00:29:48.780\nThere might be other servers that are\ngetting replicas, but I'm the main source.\n\n595\n00:29:48.780 --> 00:29:51.532\nSo that's basically it, as this point.\n\n596\n00:29:51.532 --> 00:29:52.520\nNSD is up and going.\n\n597\n00:29:52.520 --> 00:29:55.810\nI continue to create additional zones for\nwhatever I had in my environment.\n\n598\n00:29:55.810 --> 00:29:56.640\nBut it's now ready to go.\n\n599\n00:29:56.640 --> 00:29:57.620\nIt's doing its job.\n\n600\n00:29:57.620 --> 00:30:00.965\nAnd its really,\nreally good at doing that job.\n\n601\n00:30:00.965 --> 00:30:05.810\n&gt;&gt; [LAUGH] Great explanation on getting\nyour zone up and running in NSD.\n\n602\n00:30:05.810 --> 00:30:08.020\nDon, it does look like we're coming\nto the end of another episode.\n\n603\n00:30:08.020 --> 00:30:10.590\nBut before we do,\ndo you got any parting advice you'd like\n\n604\n00:30:10.590 --> 00:30:14.300\nto give anybody that maybe\nis setting up an NSD server?\n\n605\n00:30:14.300 --> 00:30:17.120\n&gt;&gt; Never forget that NSD\nis authoritative only.\n\n606\n00:30:17.120 --> 00:30:19.150\nI get that question a lot\nfrom people saying like hey,\n\n607\n00:30:19.150 --> 00:30:21.440\nit's not doing recursive lookups for\nsome reason.\n\n608\n00:30:21.440 --> 00:30:24.380\nIt doesn't, there's no way to make\nit do that, you just can't do it.\n\n609\n00:30:24.380 --> 00:30:28.430\nAnd also remember that in real life most\npeople deploy NSD alongside unbound,\n\n610\n00:30:28.430 --> 00:30:30.290\nthey have both, right?\n\n611\n00:30:30.290 --> 00:30:34.780\nThat together, they can replace BIND or\nMicrosoft DNS or PowerDNS or\n\n612\n00:30:34.780 --> 00:30:35.410\none of those guys.\n\n613\n00:30:35.410 --> 00:30:39.410\nThey can replace it, but individually,\nthey're gonna rely on other things.\n\n614\n00:30:39.410 --> 00:30:43.980\nSo you might have BIND on the front\nend and NSD on the back end,\n\n615\n00:30:43.980 --> 00:30:44.970\nwhich is a terrible idea.\n\n616\n00:30:44.970 --> 00:30:46.050\nBut you can do it.\n\n617\n00:30:46.050 --> 00:30:48.860\nNormally, you're gonna have unbound and\nNSD working together.\n\n618\n00:30:48.860 --> 00:30:49.600\n&gt;&gt; All right, Don.\n\n619\n00:30:49.600 --> 00:30:50.924\nTwo parts to a complete solution.\n\n620\n00:30:50.924 --> 00:30:51.740\n&gt;&gt; [LAUGH]\n&gt;&gt; We thank you for\n\n621\n00:30:51.740 --> 00:30:52.890\nbeing here in the studios.\n\n622\n00:30:52.890 --> 00:30:55.180\nAnd we appreciate you,\nthe viewer, watching.\n\n623\n00:30:55.180 --> 00:30:58.180\nSigning out for ITProTV,\nI've been your host, Wes Bryan.\n\n624\n00:30:58.180 --> 00:30:58.860\n&gt;&gt; And I'm Don Pezet.\n\n625\n00:30:58.860 --> 00:31:01.299\n&gt;&gt; And we'll see you next time.\n\n626\n00:31:01.299 --> 00:31:07.438\n[MUSIC]\n\n627\n00:31:07.438 --> 00:31:10.292\n&gt;&gt; Thank you for watching ITPro.TV.\n\n",
          "vimeoId": "196621256"
        },
        {
          "description": "In this episode, Wes and Don dive into NSD zone replication and concepts such as master (primary) and slave (secondary) zone. They demonstrate the process of configuring DNS zone replication on NSD",
          "length": "2442",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-6-3-configuring_replication_in_nsd-121316-PGM.00_41_09_09.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-6-3-configuring_replication_in_nsd-121316-PGM.00_41_09_09.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-6-3-configuring_replication_in_nsd-121316-PGM.00_41_09_09.Still001-sm.jpg",
          "title": "Configuring Replication in NSD",
          "transcript": "WEBVTT\n\n1\n00:00:00.220 --> 00:00:02.901\nWelcome to ITProTV,\nI'm your host Don Pezet.\n\n2\n00:00:02.901 --> 00:00:08.402\n&gt;&gt; [CROSSTALK]\n\n3\n00:00:08.402 --> 00:00:11.134\n&gt;&gt; You're watching ITProTV.\n\n4\n00:00:11.134 --> 00:00:14.388\n[SOUND]\n&gt;&gt; Welcome to another great episode here\n\n5\n00:00:14.388 --> 00:00:15.105\nat ITProTV.\n\n6\n00:00:15.105 --> 00:00:19.318\nI'm your host Wes Bryan, and in today's\nepisode, we're coming back at you with\n\n7\n00:00:19.318 --> 00:00:23.547\nmore DNS tech skills and joining us back\nin the studios yet again is Mr. Don Pezet.\n\n8\n00:00:23.547 --> 00:00:24.520\nDon, how are you doing, sir?\n\n9\n00:00:24.520 --> 00:00:27.983\n&gt;&gt; I'm doing great, Wes, ready to dive\nright back into the world of NSD.\n\n10\n00:00:27.983 --> 00:00:31.739\nIn the last couple episodes, if you've\nwatched them, then we saw how to install\n\n11\n00:00:31.739 --> 00:00:35.070\nNSD, and we saw how to create\nsome forward lookup zones in NSD.\n\n12\n00:00:35.070 --> 00:00:37.160\nSo it's actually working, yay!\n\n13\n00:00:37.160 --> 00:00:40.740\n[LAUGH] We had an NSD server working,\nand that's exciting.\n\n14\n00:00:40.740 --> 00:00:43.560\nBut if you wanna keep it working,\n\n15\n00:00:43.560 --> 00:00:46.370\nwell that's where things\nget a little difficult.\n\n16\n00:00:46.370 --> 00:00:48.690\nOr not difficult,\njust we have to do more work, right?\n\n17\n00:00:48.690 --> 00:00:53.508\nSo ideally, you won't just have\none NSD server, you'll have 2, or\n\n18\n00:00:53.508 --> 00:00:55.670\neven 3 or 4, or 5,000.\n\n19\n00:00:55.670 --> 00:00:57.380\nRight, so\nhowever many it is that you need.\n\n20\n00:00:57.380 --> 00:00:58.940\nBut you'll have more than one.\n\n21\n00:00:58.940 --> 00:01:02.050\nThat way you can do two things,\nin one redundancy, if one fails,\n\n22\n00:01:02.050 --> 00:01:03.390\nyou jump to another, great.\n\n23\n00:01:03.390 --> 00:01:04.870\nAnd two, load balancing.\n\n24\n00:01:04.870 --> 00:01:08.240\nYou can distribute the load of all your\ntraffic across multiple NSD servers and\n\n25\n00:01:08.240 --> 00:01:09.830\nyou really get some help out of it.\n\n26\n00:01:09.830 --> 00:01:13.750\nNow, I know I've mentioned this, I'm kind\nof really trying to drum this idea in,\n\n27\n00:01:13.750 --> 00:01:15.690\nthat we typically don't\ndeploy NSD by itself.\n\n28\n00:01:15.690 --> 00:01:17.863\nThere's normally NSD\ncombined with Unbound.\n\n29\n00:01:17.863 --> 00:01:21.210\nAnd so when we talk about performance,\nwe're normally worried about Unbound.\n\n30\n00:01:21.210 --> 00:01:24.280\nSo we might have five or\nten Unbound servers.\n\n31\n00:01:24.280 --> 00:01:28.410\nOn NSD, it's only getting lookups\nfrom the unbound servers.\n\n32\n00:01:28.410 --> 00:01:30.030\nAnd the unbound servers\nare caching on top of that.\n\n33\n00:01:30.030 --> 00:01:33.090\nSo, really it doesn't get that many\nlookups, even in a massive environment.\n\n34\n00:01:33.090 --> 00:01:35.260\nSo, on the NSD side,\nwe normally just need two or\n\n35\n00:01:35.260 --> 00:01:38.630\nthree servers for redundancy,\nnot for performance.\n\n36\n00:01:38.630 --> 00:01:39.961\nBut it's pretty easy to set that up.\n\n37\n00:01:39.961 --> 00:01:43.104\nAnd that's what we're gonna take a look\nat right here in this episode is,\n\n38\n00:01:43.104 --> 00:01:45.700\nreplicating our zones from\none NSD server to another.\n\n39\n00:01:45.700 --> 00:01:47.970\nAnd I'm just gonna do\none other server here.\n\n40\n00:01:47.970 --> 00:01:50.740\nBut basically you rinse and repeat for\nas many servers as you need, and\n\n41\n00:01:50.740 --> 00:01:52.020\nyou can get that replication set up.\n\n42\n00:01:52.020 --> 00:01:54.570\nIt's a pretty slick system\nthey've got put in place.\n\n43\n00:01:54.570 --> 00:01:57.250\nNow, in the last episode\nwhen we created zones,\n\n44\n00:01:57.250 --> 00:02:01.530\nwe used what were kind of\nstandard BIND zone files.\n\n45\n00:02:01.530 --> 00:02:05.050\nAnd so you kinda get the idea\nof we just follow BIND.\n\n46\n00:02:05.050 --> 00:02:08.470\nBut the way replication works in NSD\nis actually a good bit different and\n\n47\n00:02:08.470 --> 00:02:13.290\nso, getting it set up is more challenging\nbecause NSD is designed to scale\n\n48\n00:02:13.290 --> 00:02:15.280\nmuch larger than what BIND was.\n\n49\n00:02:15.280 --> 00:02:18.200\nSo, it's got some really flexible commands\nthat take a little while to get used\n\n50\n00:02:18.200 --> 00:02:19.020\nto if you're coming from BIND.\n\n51\n00:02:19.020 --> 00:02:20.290\nIf you're not coming from BIND,\n\n52\n00:02:20.290 --> 00:02:22.690\nyou've never dealt with it before\nthen it's actually not that bad.\n\n53\n00:02:22.690 --> 00:02:25.050\nAnd you learn it, you jump in and\nyou get where you're going with it.\n\n54\n00:02:25.050 --> 00:02:26.470\nSo, it's a pretty good system.\n\n55\n00:02:26.470 --> 00:02:28.800\n&gt;&gt; Now with the architecture here,\nis it like buying,\n\n56\n00:02:28.800 --> 00:02:33.670\nyou said we're gonna have a primary,\nwe're gonna have a master DNS server, and\n\n57\n00:02:33.670 --> 00:02:37.330\nthen we're gonna have a couple that are\nwaiting on the master of the slaves here?\n\n58\n00:02:37.330 --> 00:02:39.970\n&gt;&gt; Yeah, so you'll have a Master Server,\nthe one who's in charge of the zone,\n\n59\n00:02:39.970 --> 00:02:42.690\nand then you'll have one or\nmore Slave Servers.\n\n60\n00:02:42.690 --> 00:02:45.538\nAnd you can actually have multiple\ntiers of Slave Servers, so\n\n61\n00:02:45.538 --> 00:02:48.769\nyou could have a Slave Server that's\na slave to another Slave Server,\n\n62\n00:02:48.769 --> 00:02:50.543\nwhich is then underneath the master.\n\n63\n00:02:50.543 --> 00:02:55.169\nSo you can really go tiered and when\nwe talk about root hint servers, right,\n\n64\n00:02:55.169 --> 00:02:57.863\nthe A through F, or\nno it's more than that.\n\n65\n00:02:57.863 --> 00:02:58.606\n&gt;&gt; M.\n&gt;&gt; Right, it's M.\n\n66\n00:02:58.606 --> 00:03:00.528\n&gt;&gt; Yeah.\n&gt;&gt; A through M, the A through M servers,\n\n67\n00:03:00.528 --> 00:03:02.559\nthat's not one server for each, right?\n\n68\n00:03:02.559 --> 00:03:07.600\nThere's actually 10, 100, 1,000 servers\nsometimes behind those letters, right?\n\n69\n00:03:07.600 --> 00:03:11.660\nAnd there will only be one master for\na zone behind that.\n\n70\n00:03:11.660 --> 00:03:15.504\nAnd then underneath that, there may be\nhundreds of slaves, and they might even be\n\n71\n00:03:15.504 --> 00:03:19.473\ntiered to distribute that load out to make\nthings replicate faster and more stably.\n\n72\n00:03:19.473 --> 00:03:21.580\nSo be aware that you can do that.\n\n73\n00:03:21.580 --> 00:03:24.380\nBut for most of us, if you're\ndeploying this in your own enterprise,\n\n74\n00:03:24.380 --> 00:03:26.140\nyou're not gonna have that\nmass of a deployment.\n\n75\n00:03:26.140 --> 00:03:28.665\nSo you're normally gonna\nhave one master and\n\n76\n00:03:28.665 --> 00:03:32.719\nthen a single tier of slaves beneath\nit and then you might have 1, 10,\n\n77\n00:03:32.719 --> 00:03:35.719\n20 slaves that are all kind\nof mirroring that zone.\n\n78\n00:03:35.719 --> 00:03:37.630\nAll right, so let's see how this works.\n\n79\n00:03:37.630 --> 00:03:41.100\nNow, as in any replication environment,\nwe have to set this up on two sides.\n\n80\n00:03:41.100 --> 00:03:43.350\nWe have to set it up on the master and\nthen we gotta turn around and\n\n81\n00:03:43.350 --> 00:03:44.070\nset it up on the slave.\n\n82\n00:03:44.070 --> 00:03:45.696\nSo I'm gonna start on the master.\n\n83\n00:03:45.696 --> 00:03:50.577\nAnd I'm gonna use the same server that\nwe set up in the earlier NSD episodes.\n\n84\n00:03:50.577 --> 00:03:54.865\nSo if you watched my installing NSD\nepisode, and configuring zones in NSD,\n\n85\n00:03:54.865 --> 00:03:56.610\nthis is the same exact server.\n\n86\n00:03:56.610 --> 00:04:00.020\nSo you've seen every step along\nthe way from when I installed NSD.\n\n87\n00:04:00.020 --> 00:04:06.762\nAnd I'm gonna start by editing\nthe /etc/nsd/nsd.com file, right?\n\n88\n00:04:06.762 --> 00:04:09.270\nWe're gonna jump into\nour NSD configuration.\n\n89\n00:04:09.270 --> 00:04:13.120\nAnd in the configuration,\nI'm just gonna go ahead and jump.\n\n90\n00:04:13.120 --> 00:04:16.460\nWoops, I'm gonna try and jump all\nthe way to the bottom of this file.\n\n91\n00:04:16.460 --> 00:04:19.970\nAnd when you add a zone,\nyou normally add the zone,\n\n92\n00:04:19.970 --> 00:04:23.180\nwell you can kinda add it almost anywhere\nin the file, but usually at the bottom.\n\n93\n00:04:23.180 --> 00:04:26.550\nAnd we put the name of the zone,\nthe domain name, and\n\n94\n00:04:26.550 --> 00:04:28.440\nthen the file that stores its values,\nright?\n\n95\n00:04:28.440 --> 00:04:30.190\nThat's what we normally specify\nwhen we define the zone.\n\n96\n00:04:31.660 --> 00:04:34.650\nWhen we define replication,\n\n97\n00:04:34.650 --> 00:04:38.470\nwhat I want is I wanna replicate\nthis zone to another server.\n\n98\n00:04:38.470 --> 00:04:41.400\nAnd so I've gotta add on to this to\ntell it that I want to allow it to be\n\n99\n00:04:41.400 --> 00:04:43.050\nable to replicate, all right.\n\n100\n00:04:43.050 --> 00:04:46.270\nAnd the way we do that\nis by adding a server.\n\n101\n00:04:46.270 --> 00:04:51.650\nNow, in other systems, you could actually\nadd slave entries or whatever here.\n\n102\n00:04:51.650 --> 00:04:56.020\nBut NSD is designed to scale really big.\n\n103\n00:04:56.020 --> 00:04:58.971\nAnd so instead of having us\ntied on to an individual zone,\n\n104\n00:04:58.971 --> 00:05:00.819\nimagine if I had 1,000 zones.\n\n105\n00:05:00.819 --> 00:05:03.090\nI'd have to go into a ton of entries.\n\n106\n00:05:03.090 --> 00:05:07.780\nSo instead, what NSD uses is it\nuses what are called patterns.\n\n107\n00:05:07.780 --> 00:05:11.900\nAnd patterns allow you to\nsetup almost like a wild card.\n\n108\n00:05:11.900 --> 00:05:16.480\nAnd you can dictate different\npatterns to say who replicates what.\n\n109\n00:05:16.480 --> 00:05:19.040\nIf I have ten different zones here,\n\n110\n00:05:19.040 --> 00:05:21.840\nI could create a pattern that\ngrab every zone on my system.\n\n111\n00:05:21.840 --> 00:05:23.580\nThat just said grab all the zones and\n\n112\n00:05:23.580 --> 00:05:25.980\nallow them to be replicated\nto this one host.\n\n113\n00:05:25.980 --> 00:05:28.410\nOr these five hosts or whatever, right?\n\n114\n00:05:28.410 --> 00:05:31.140\nAnd if I do a wild card and\nI add a zone in the future,\n\n115\n00:05:31.140 --> 00:05:32.880\nit's automatically gonna be\nadded to the replication.\n\n116\n00:05:32.880 --> 00:05:34.710\nAnd it will magically appear\non the other side and\n\n117\n00:05:34.710 --> 00:05:35.870\nI didn't even have to do anything.\n\n118\n00:05:35.870 --> 00:05:37.700\nI just created the zone and\nthat was it, right?\n\n119\n00:05:37.700 --> 00:05:38.900\nThat's what patterns allow us to do.\n\n120\n00:05:38.900 --> 00:05:42.893\nIt's much more powerful than what we\nhad in other systems like in BIND.\n\n121\n00:05:42.893 --> 00:05:45.280\nIt also lets me exclude zones.\n\n122\n00:05:45.280 --> 00:05:48.740\nMaybe I only want to replicate my forward\nlookups and not my reverse lookups.\n\n123\n00:05:48.740 --> 00:05:52.770\nOr I only wanna replicate this one\nparticular forward lookup zone\n\n124\n00:05:52.770 --> 00:05:54.170\nand not another.\n\n125\n00:05:54.170 --> 00:05:57.040\nI can use patterns to dictate all of that,\nright?\n\n126\n00:05:57.040 --> 00:05:58.240\nSo I'm gonna create a pattern.\n\n127\n00:05:58.240 --> 00:06:00.240\nAnd think of a pattern as a filter.\n\n128\n00:06:00.240 --> 00:06:02.940\nI'm filtering who sees what zones,\nall right?\n\n129\n00:06:03.950 --> 00:06:05.420\nSo when I create the pattern,\n\n130\n00:06:05.420 --> 00:06:09.120\nI need to give it a name because\nthe pattern is used like an ACL and\n\n131\n00:06:09.120 --> 00:06:12.230\nwith an ACL, we call the ACL by its name,\nwe call the pattern by its name.\n\n132\n00:06:12.230 --> 00:06:13.049\nSo it needs a name.\n\n133\n00:06:13.049 --> 00:06:14.120\nYou can call it whatever you want.\n\n134\n00:06:14.120 --> 00:06:18.470\nYou can call it Fred, do all\nthe Scooby Doo characters if you want.\n\n135\n00:06:18.470 --> 00:06:21.320\nI normally name it based on\nthe servers I'm replicating to.\n\n136\n00:06:21.320 --> 00:06:22.981\nThis is server DNS3.\n\n137\n00:06:22.981 --> 00:06:24.840\nI'm gonna replicate it to DNS4.\n\n138\n00:06:24.840 --> 00:06:28.050\nSo I'm gonna create a pattern called dns4.\n\n139\n00:06:28.050 --> 00:06:30.172\nAnd so anytime I call this pattern,\n\n140\n00:06:30.172 --> 00:06:33.651\nI know it'll be something\nthat's allowed to go to DNS4.\n\n141\n00:06:33.651 --> 00:06:34.640\nAll right.\n\n142\n00:06:34.640 --> 00:06:38.460\nThen, I need to specify\nhow I contact DNS4, and\n\n143\n00:06:38.460 --> 00:06:42.410\nthere's two ways that\nI'm gonna contact DNS4.\n\n144\n00:06:42.410 --> 00:06:48.330\nThe most important way is I wanna allow\nDNS4 to ask me for a copy of the zone.\n\n145\n00:06:48.330 --> 00:06:51.430\nDNS4 needs to be allowed to\ndo a zone transfer, right?\n\n146\n00:06:51.430 --> 00:06:57.880\nSo I'm gonna say provide-xfr.\n\n147\n00:06:57.880 --> 00:06:59.860\nI'm providing zone transfers.\n\n148\n00:06:59.860 --> 00:07:02.020\nSo I'm gonna allow zone transfers and\n\n149\n00:07:02.020 --> 00:07:05.570\nthen I need to do the ip\naddress of the other server.\n\n150\n00:07:07.220 --> 00:07:08.590\nWhich is that right there, all right.\n\n151\n00:07:08.590 --> 00:07:10.430\nSo that's going to allow them to connect.\n\n152\n00:07:10.430 --> 00:07:16.520\nNow, NSD was designed with security in\nmind, right, security and scalability.\n\n153\n00:07:16.520 --> 00:07:20.600\nAnd one of the things about zone\ntransfers is that on a normal DNS server\n\n154\n00:07:20.600 --> 00:07:24.150\nlike on a traditional BIND server,\nzone transfers are done in plain text.\n\n155\n00:07:24.150 --> 00:07:25.980\nSo anybody could intercept it.\n\n156\n00:07:25.980 --> 00:07:27.249\nWell we're not worried about interceptions\n\n157\n00:07:28.260 --> 00:07:30.420\nbecause DNS records aren't private,\nanyway.\n\n158\n00:07:30.420 --> 00:07:32.630\nAnybody can look up the records,\nthat doesn't matter.\n\n159\n00:07:32.630 --> 00:07:34.420\nBut what we're worried about\nare man in the middle attacks,\n\n160\n00:07:34.420 --> 00:07:38.170\nwhere somebody intercepts,\nmodifies, and retransmits.\n\n161\n00:07:38.170 --> 00:07:40.710\nAnd we wanna make sure that can't happen.\n\n162\n00:07:40.710 --> 00:07:45.266\nAnd so the way that NSD provides that is\nit actually has a key based authentication\n\n163\n00:07:45.266 --> 00:07:45.804\nsystem.\n\n164\n00:07:45.804 --> 00:07:46.476\nAll right.\n\n165\n00:07:46.476 --> 00:07:52.390\nNow, I'm not gonna use that key based\nsystem just yet, so I'm gonna put no key.\n\n166\n00:07:52.390 --> 00:07:53.070\nWoops.\nThere we go.\n\n167\n00:07:53.070 --> 00:07:54.954\nNo key on the end of this, right?\n\n168\n00:07:54.954 --> 00:07:56.126\nI'm gonna come back and\nadd the keys later.\n\n169\n00:07:56.126 --> 00:07:58.752\nWhat I like to do is configure\nit with no keys first,\n\n170\n00:07:58.752 --> 00:08:00.596\njust to make sure it works, right?\n\n171\n00:08:00.596 --> 00:08:03.473\nIt's easier to troubleshoot when\nyou don't have the keys attached.\n\n172\n00:08:03.473 --> 00:08:06.052\nSo you get everything working and then we\ncan always come back and add those in.\n\n173\n00:08:06.052 --> 00:08:07.887\n&gt;&gt; And are these the same keys, Don,\n\n174\n00:08:07.887 --> 00:08:11.830\nthat you generated in a couple prior\nepisodes when you first started out?\n\n175\n00:08:11.830 --> 00:08:12.720\nSame keys here?\n\n176\n00:08:12.720 --> 00:08:13.920\n&gt;&gt; No, they're actually different.\n\n177\n00:08:13.920 --> 00:08:16.147\nSo the keys that Wes is talking about,\n\n178\n00:08:16.147 --> 00:08:20.474\nin /etc/nsd there were several keys\ncreated as part of installing NSD.\n\n179\n00:08:20.474 --> 00:08:23.960\nWe're gonna use those when we do DNS SEC.\n\n180\n00:08:23.960 --> 00:08:26.500\nThis is simply key authentication for\n\n181\n00:08:26.500 --> 00:08:30.840\nthe individual zone transfer and\nreplications for these slave connections.\n\n182\n00:08:30.840 --> 00:08:32.717\nIf you don't have any slave connections,\nthese won't get used.\n\n183\n00:08:32.717 --> 00:08:37.283\nAnd I can actually generate different\nkeys for every single slave if I want.\n\n184\n00:08:37.283 --> 00:08:40.980\nAnd in that way, if one of them gets\ncompromised, I can cut its key off and\n\n185\n00:08:40.980 --> 00:08:42.510\nit doesn't mess with the others.\n\n186\n00:08:42.510 --> 00:08:44.100\nSo you can really get specific on this.\n\n187\n00:08:44.100 --> 00:08:45.307\nBut for\nright now I'm just gonna leave them off.\n\n188\n00:08:45.307 --> 00:08:47.240\nWe will come back and visit that.\n\n189\n00:08:47.240 --> 00:08:49.880\nIf I don't get to it by the end of\nthis episode, we'll do a part two and\n\n190\n00:08:49.880 --> 00:08:50.430\nstick it in there.\n\n191\n00:08:50.430 --> 00:08:52.387\nWe'll have to see how this episode goes.\n\n192\n00:08:52.387 --> 00:08:57.321\nThe other thing is in addition to\nproviding transfers NSD supports\n\n193\n00:08:57.321 --> 00:08:59.290\nnotifications.\n\n194\n00:08:59.290 --> 00:09:02.574\nIf a change happens here, I can notify the\nother side, hey, a change has happened,\n\n195\n00:09:02.574 --> 00:09:03.789\nwhy don't you come and get it?\n\n196\n00:09:03.789 --> 00:09:06.445\nAnd it can initiate a transfer.\n\n197\n00:09:06.445 --> 00:09:09.700\nNotifies make it where changes\nreplicate far, far faster.\n\n198\n00:09:09.700 --> 00:09:12.320\nOtherwise the other side's gonna wait for\nits refresh interval to expire and\n\n199\n00:09:12.320 --> 00:09:13.550\nthat can take a long time.\n\n200\n00:09:13.550 --> 00:09:15.630\nSo I'm gonna add a notify.\n\n201\n00:09:17.278 --> 00:09:22.080\nAnd I'm gonna set the same IP and\nI'll do that no key again.\n\n202\n00:09:23.110 --> 00:09:29.290\nSo my pattern for\nDNS 4 is saying I can allow\n\n203\n00:09:29.290 --> 00:09:32.740\ntransfers going into that IP and I can\nsend notifications when there's changes.\n\n204\n00:09:33.830 --> 00:09:37.050\nBut what the pattern isn't\ndictating is what zones do I get?\n\n205\n00:09:38.270 --> 00:09:43.580\nWell, from there, I go to my zones,\nand I add the patterns to the zones.\n\n206\n00:09:44.740 --> 00:09:47.600\nAnd a zone can have more than\none pattern attached to it, so\n\n207\n00:09:47.600 --> 00:09:51.230\nit can be tied to several different\nservers or even groups of servers.\n\n208\n00:09:51.230 --> 00:09:54.129\nWhen I created this entry down here,\nI did a provide transfer for one IP.\n\n209\n00:09:54.129 --> 00:09:56.660\nI can do provide transfers for more.\n\n210\n00:09:56.660 --> 00:10:01.560\nI can add, maybe I have five different\nservers that are gonna be slave servers.\n\n211\n00:10:01.560 --> 00:10:06.911\nSo I can just come in and\nadd another provide-zfr: 10.0.222.105 and\n\n212\n00:10:06.911 --> 00:10:11.700\nthen it's key which can be\na completely different key.\n\n213\n00:10:11.700 --> 00:10:15.460\nI can do each one and you can add them\nall in here so that these zones all go to\n\n214\n00:10:15.460 --> 00:10:18.430\nthe same place or\nyou can be really specific like I'm doing.\n\n215\n00:10:18.430 --> 00:10:21.980\nAnd saying this pattern is just for dns4.\n\n216\n00:10:23.110 --> 00:10:25.250\nIt's up to you in how you\nwanna configure that.\n\n217\n00:10:25.250 --> 00:10:30.451\nAnd then, in the zone file,\nI'm gonna come back and edit the zone,\n\n218\n00:10:30.451 --> 00:10:34.484\nand I'm gonna say include-pattern: \"dns4\".\n\n219\n00:10:34.484 --> 00:10:37.524\nAnd I can include more than one pattern,\nand I can attach those and\n\n220\n00:10:37.524 --> 00:10:39.740\nget them in here, but I'm including dns4.\n\n221\n00:10:39.740 --> 00:10:45.150\nSo this zone will be allowed\nto replicate DNS 4 and\n\n222\n00:10:45.150 --> 00:10:50.360\nanytime I add a new zone, all I have to\ndo is add include pattern DNS 4 to that\n\n223\n00:10:50.360 --> 00:10:53.940\nnew zone and now it will automatically be\nset to replicate over to the other side.\n\n224\n00:10:53.940 --> 00:10:56.860\n&gt;&gt; Now, maybe Don,\nsomebody's just starting out and\n\n225\n00:10:56.860 --> 00:10:59.240\nusing this episode to get this configured.\n\n226\n00:10:59.240 --> 00:11:03.710\nIn that file that you're creating like\nunder zone and under pattern, is there\n\n227\n00:11:03.710 --> 00:11:07.560\na specific order that those have to go in\nor is that just the way you're doing it?\n\n228\n00:11:07.560 --> 00:11:10.140\nLike, so for instance,\nunder pattern they way you got name,\n\n229\n00:11:10.140 --> 00:11:14.900\nand the other two entries in there or\ndoes it have to follow a specific pattern?\n\n230\n00:11:14.900 --> 00:11:15.940\n&gt;&gt; It doesn't have to.\n\n231\n00:11:15.940 --> 00:11:19.124\nMost people do it according to\nthe way it is in the man file and\n\n232\n00:11:19.124 --> 00:11:23.605\nthe manual documentation, which I think\nI've actually broken that a little bit.\n\n233\n00:11:23.605 --> 00:11:27.618\nIn the official documentation I think\nnotify comes before provide transfer,\n\n234\n00:11:27.618 --> 00:11:30.510\nthe thought process\nthere is how DNS works.\n\n235\n00:11:30.510 --> 00:11:33.273\nI notify the other side, and\nthen it initiates the transfer.\n\n236\n00:11:33.273 --> 00:11:35.602\nSo the notifications\ntechnically happens first, but\n\n237\n00:11:35.602 --> 00:11:37.650\nyou don't have to have notifications.\n\n238\n00:11:37.650 --> 00:11:39.850\nI might not even have that\nline in there at all.\n\n239\n00:11:39.850 --> 00:11:42.175\nAnd then,\nthe provide transfer what happened first.\n\n240\n00:11:42.175 --> 00:11:44.065\nSo the order doesn't actually matter.\n\n241\n00:11:44.065 --> 00:11:46.905\nPeople do have a preference,\nI'm gonna leave mine in the wrong order,\n\n242\n00:11:46.905 --> 00:11:50.615\nbut I shouldn't even call it the wrong\norder cuz it does get processed.\n\n243\n00:11:50.615 --> 00:11:53.850\nAs long as it's nested under that\npattern like it's supposed to,\n\n244\n00:11:53.850 --> 00:11:55.014\nthen it'll work fine.\n\n245\n00:11:55.014 --> 00:11:58.607\nSo it's really just kind of\npersonal preference on that one.\n\n246\n00:11:58.607 --> 00:12:02.220\nSo I've got my zone set up,\nI've got my pattern set up.\n\n247\n00:12:02.220 --> 00:12:05.220\nAgain, I can define more patterns, I could\nadd more patterns to my existing zone.\n\n248\n00:12:05.220 --> 00:12:08.800\nI could add other zones, and add them\nwith the additionally included patterns.\n\n249\n00:12:08.800 --> 00:12:10.940\nAnd this is me setting up\nthe master side of things.\n\n250\n00:12:12.150 --> 00:12:17.610\nThe rest of the work is gonna\nbe done on my slave system.\n\n251\n00:12:17.610 --> 00:12:18.890\nThe master's done.\n\n252\n00:12:18.890 --> 00:12:23.680\nIt's just waiting for\npeople to connect from that particular IP.\n\n253\n00:12:23.680 --> 00:12:26.870\nAnd that IP will be allowed to do\nhis own transfer for lab.ITProTV.\n\n254\n00:12:26.870 --> 00:12:29.450\nSo I'm gonna jump over to my other server.\n\n255\n00:12:29.450 --> 00:12:30.920\nThis is DNS4.\n\n256\n00:12:30.920 --> 00:12:32.600\nNow, DNS4 is a brand new server.\n\n257\n00:12:32.600 --> 00:12:37.020\nI whipped it up this morning and the only\nthing I've run on it is a Yum update.\n\n258\n00:12:37.020 --> 00:12:38.800\nSo it's up to date, so it's got that.\n\n259\n00:12:38.800 --> 00:12:42.630\nBut I haven't actually\ninstalled NSD on this one.\n\n260\n00:12:42.630 --> 00:12:45.899\nSo I'm gonna do a real quick yum install\n\n261\n00:12:45.899 --> 00:12:50.360\napel-release so\nthat I can get the extended packages.\n\n262\n00:12:52.050 --> 00:12:57.580\nAnd then, I'll do a yum install we do a -y\nto speed this up a little bit nsd and\n\n263\n00:12:57.580 --> 00:13:00.630\nso we're gonna get nsd installed I\nprobably at the sign off on this signature\n\n264\n00:13:00.630 --> 00:13:05.280\nthough, nope,\nI guess it got over that there we go.\n\n265\n00:13:05.280 --> 00:13:07.150\nSo now I've got NSD in place.\n\n266\n00:13:07.150 --> 00:13:10.030\nSo we've got NSD up and\nrunning on the system.\n\n267\n00:13:10.030 --> 00:13:13.020\nI do need to edit some basic\nconfiguration settings inside of it.\n\n268\n00:13:13.020 --> 00:13:18.064\nSo I'm gonna go into /etc/nsd/nsd.conf.\n\n269\n00:13:19.200 --> 00:13:22.160\nAnd inside of this file we gotta\nremember the basic things we need for\n\n270\n00:13:22.160 --> 00:13:23.430\nNSD to get up and running.\n\n271\n00:13:23.430 --> 00:13:27.680\nSo the basic things are I need to tell\nit what IP addresses to listen in on.\n\n272\n00:13:27.680 --> 00:13:35.000\nSo I'm gonna come in and tell it,\nip_address: 10.0.222.14 is its address.\n\n273\n00:13:35.000 --> 00:13:36.020\nI'm not overriding the port number.\n\n274\n00:13:36.020 --> 00:13:40.330\nI am doing IPv4 which is the default.\n\n275\n00:13:40.330 --> 00:13:44.120\nI can uncomment that if I just want to\nkind of remember I'm not doing IPv6,\n\n276\n00:13:44.120 --> 00:13:45.250\nI could turn that off.\n\n277\n00:13:45.250 --> 00:13:46.250\nI'll leave it be.\n\n278\n00:13:46.250 --> 00:13:47.660\nDefault port of 53.\n\n279\n00:13:47.660 --> 00:13:51.960\nAgain, we can uncomment it if we want but\nit's showing me what the default is so\n\n280\n00:13:51.960 --> 00:13:53.200\nI should leave it commented.\n\n281\n00:13:53.200 --> 00:13:56.199\nIt's fine.\nI am gonna turn on the log file though,\n\n282\n00:13:56.199 --> 00:13:58.360\nwhich is in here somewhere.\n\n283\n00:13:58.360 --> 00:14:01.450\nHere it is.\n\n284\n00:14:01.450 --> 00:14:05.460\nI am gonna turn on the log file\nbecause when you setup a slave\n\n285\n00:14:05.460 --> 00:14:08.370\nIf there's a failure,\nsome reason why it doesn't connect and\n\n286\n00:14:08.370 --> 00:14:10.900\nupdate, we're gonna need these\nlog files to troubleshoot.\n\n287\n00:14:10.900 --> 00:14:14.450\nIt's gonna log to syslog by default, but\nit can be hard to find things sometimes.\n\n288\n00:14:14.450 --> 00:14:18.395\nHere, I need to go to an individual\nfile and I'll see just NSD's log.\n\n289\n00:14:18.395 --> 00:14:22.743\nBut remember, when you set up a\nsynchronization like this there's a lot of\n\n290\n00:14:22.743 --> 00:14:24.610\nthings that can go wrong.\n\n291\n00:14:24.610 --> 00:14:26.690\nAnd so, you'll see what I'm\ndoing here is kinda planning for\n\n292\n00:14:26.690 --> 00:14:28.020\nthose things to go wrong.\n\n293\n00:14:28.020 --> 00:14:30.560\nI'm not doing the keys yet\n\n294\n00:14:30.560 --> 00:14:33.880\ncuz I know I can easily turn those on\nlater after I know everything works.\n\n295\n00:14:33.880 --> 00:14:36.671\nAnd I'm leaving my logs turned on so\nI can troubleshoot.\n\n296\n00:14:36.671 --> 00:14:39.225\nIf I don't need them I can\nalways turn them off later.\n\n297\n00:14:39.225 --> 00:14:42.915\n&gt;&gt; And when you installed the first\nserver, SELinux came in to play.\n\n298\n00:14:42.915 --> 00:14:45.055\nDoes SELinux come in to\nplay on this one as well?\n\n299\n00:14:45.055 --> 00:14:47.391\n&gt;&gt; So I've already updated this server so\n\n300\n00:14:47.391 --> 00:14:51.791\non my other server if you watched there\nis a first episode installing NSD.\n\n301\n00:14:51.791 --> 00:14:55.795\nThere was a bug that I had to patch\nbefore I could do my install.\n\n302\n00:14:55.795 --> 00:14:58.290\nOn this system I've already done my\nupdates so it's already patch it.\n\n303\n00:14:58.290 --> 00:15:01.940\nThat kinda is a lesson that everybody\nshould know is hey update your systems and\n\n304\n00:15:01.940 --> 00:15:03.340\nyou don't have to worry about this stuff.\n\n305\n00:15:03.340 --> 00:15:06.771\nBut that bug was a real bug\nup until two weeks ago so\n\n306\n00:15:06.771 --> 00:15:09.631\ndefinitely a problem people bump into.\n\n307\n00:15:09.631 --> 00:15:11.590\nSo I'm looking good there.\n\n308\n00:15:11.590 --> 00:15:13.685\nI should be patched,\nI should be up to date.\n\n309\n00:15:13.685 --> 00:15:17.990\nLet's see what else do I need to do\non this one, that's basically it for\n\n310\n00:15:17.990 --> 00:15:20.680\ngetting this part going so\nlet me get out of that.\n\n311\n00:15:20.680 --> 00:15:27.381\nI'm going to open up my firewall so\nthat I allow that connection.\n\n312\n00:15:27.381 --> 00:15:32.942\nI need to get DNS moving through my\nfirewall and I need to do --permanence\n\n313\n00:15:32.942 --> 00:15:38.072\non that so I'm doing\nfirewall-cmd--add-service equals DNS.\n\n314\n00:15:38.072 --> 00:15:38.648\nI'm adding DNS.\n\n315\n00:15:38.648 --> 00:15:41.760\nAnd I'm making it permanent so\nit'll be there when my system reboots.\n\n316\n00:15:41.760 --> 00:15:44.250\nSo this server is now up and running.\n\n317\n00:15:46.090 --> 00:15:47.590\nActually it's not running,\nI haven't actually started it yet.\n\n318\n00:15:47.590 --> 00:15:50.908\nI could start it, I'm going to hold off\non starting it cuz I still need to modify\n\n319\n00:15:50.908 --> 00:15:52.329\nthe configuration a little bit.\n\n320\n00:15:52.329 --> 00:15:56.688\nBut if I wanted to,\ntechnically I could start the NSD service,\n\n321\n00:15:56.688 --> 00:16:00.816\nit would run, but without any zones,\nwhat's it gonna do?\n\n322\n00:16:00.816 --> 00:16:02.333\nAbsolutely nothing.\n\n323\n00:16:02.333 --> 00:16:04.154\nAnd I guess it doesn't hurt\nto go ahead and start it.\n\n324\n00:16:04.154 --> 00:16:07.530\nOne problem I'm gonna have on this, Wes,\nyou mentioned the keys earlier, right?\n\n325\n00:16:07.530 --> 00:16:13.440\nSo if I look inside a /etc/nsd,\nmy keys are missing, right?\n\n326\n00:16:13.440 --> 00:16:18.637\nSo I can run nsd-control-setup and\nit'll create those keys.\n\n327\n00:16:18.637 --> 00:16:22.489\nOr if I just try and start the service\nit'll see those keys are missing and\n\n328\n00:16:22.489 --> 00:16:23.630\ncreate them.\n\n329\n00:16:23.630 --> 00:16:25.930\nBut there we go, so I'm gonna create that.\n\n330\n00:16:25.930 --> 00:16:27.480\nAnd now when I look, there's those keys.\n\n331\n00:16:27.480 --> 00:16:29.180\nBut those aren't the keys that\nwe're using for our application.\n\n332\n00:16:29.180 --> 00:16:31.579\nThose we'll use for DNSing.\n\n333\n00:16:31.579 --> 00:16:35.729\nAll right, if I want to go ahead and\nstart it just to make sure that it starts.\n\n334\n00:16:35.729 --> 00:16:39.034\nI've got the nsd-checkconf\nthat I haven't run yet\n\n335\n00:16:39.034 --> 00:16:41.220\nto see if my config file is intact.\n\n336\n00:16:42.890 --> 00:16:44.280\nAnd these are all things\nwe've done in other episodes.\n\n337\n00:16:44.280 --> 00:16:47.563\nThat's why I'm kind of moving through them\nquickly cuz I got to make sure I gotta\n\n338\n00:16:47.563 --> 00:16:48.648\nget through this in time.\n\n339\n00:16:48.648 --> 00:16:56.860\nBut, I'm gonna do a systemctl start\nnsd.service, and we started, right?\n\n340\n00:16:56.860 --> 00:17:00.898\nAnd we can do a status on it just to\nmake sure that there weren't any errors.\n\n341\n00:17:00.898 --> 00:17:04.547\nThere shouldn't be cuz we've got\nthe world's most simple configuration on\n\n342\n00:17:04.547 --> 00:17:06.915\nthis one so\nit's kind of hard to botch this one up.\n\n343\n00:17:06.915 --> 00:17:12.249\nSo it looks good, everything is running,\nwe're now a valid NSD server, right.\n\n344\n00:17:12.249 --> 00:17:16.957\nNow I need to tell this guy, hey, you need\nto reach out to this other server and\n\n345\n00:17:16.957 --> 00:17:18.880\nget a copy of lab.itpro.tv.\n\n346\n00:17:18.880 --> 00:17:22.090\nWe need to set you up as a slave system so\nyou can reach out and grab that and\n\n347\n00:17:22.090 --> 00:17:23.680\nhave a copy of that zone.\n\n348\n00:17:23.680 --> 00:17:26.050\nSo now we actually get in\nto configure that part.\n\n349\n00:17:27.220 --> 00:17:31.130\nSo to do it I need to go\nback into my config file.\n\n350\n00:17:31.130 --> 00:17:35.614\nSo I'm gonna jump back\ninto /etc/nsd/nsd.conf.\n\n351\n00:17:37.040 --> 00:17:40.020\nAnd I'm just gonna go all the way\nto the bottom of this thing,\n\n352\n00:17:40.020 --> 00:17:41.100\nway down to the bottom.\n\n353\n00:17:41.100 --> 00:17:44.310\nAnd remember, down at the bottom of the\nfile is where I like to add in my zones.\n\n354\n00:17:44.310 --> 00:17:47.180\nAnd so normally, we'd jump right in here,\nwe'd create a zone file.\n\n355\n00:17:47.180 --> 00:17:52.490\nWell what I need to do here is kinda the\nopposite of what I did on the master side.\n\n356\n00:17:52.490 --> 00:17:55.310\nI need to create a pattern and a zone.\n\n357\n00:17:55.310 --> 00:18:00.528\nI'm gonna create a pattern for\nthe master server, right?\n\n358\n00:18:00.528 --> 00:18:03.040\nAnd because I might reuse that\nmaster pattern in other places.\n\n359\n00:18:03.040 --> 00:18:04.772\nSo I'm gonna create a pattern.\n\n360\n00:18:04.772 --> 00:18:08.443\nAnd I'm gonna call it dns3,\nthat's my other server.\n\n361\n00:18:08.443 --> 00:18:09.630\nThe master server is called dns3.\n\n362\n00:18:09.630 --> 00:18:12.480\nAnd these names,\nI'm just putting what I want in there.\n\n363\n00:18:12.480 --> 00:18:16.965\nSo you could put a server ID or whatever\nit is that you wanted, an IP address,\n\n364\n00:18:16.965 --> 00:18:19.010\nwhatever you want that name to be.\n\n365\n00:18:19.010 --> 00:18:21.146\nI'm just calling mine dns3, all right?\n\n366\n00:18:21.146 --> 00:18:25.224\nThis server is dns4, it's gonna\nbe the slave, dns3 is the master.\n\n367\n00:18:25.224 --> 00:18:27.549\nAll right, so\nlet's just jump into nsd.conf again.\n\n368\n00:18:27.549 --> 00:18:28.834\nI'm gonna edit that file and\n\n369\n00:18:28.834 --> 00:18:31.900\nwe normally create the zones all\nthe way down at the bottom, right?\n\n370\n00:18:31.900 --> 00:18:34.757\nSo I'm just gonna jump all the way\ndown to the bottom of this file.\n\n371\n00:18:34.757 --> 00:18:37.879\nAnd if I were the master server,\nthis would be where I go in and\n\n372\n00:18:37.879 --> 00:18:39.296\nI start to create my zones.\n\n373\n00:18:39.296 --> 00:18:41.521\nAnd they'd point to files\nthat were on the hard drive.\n\n374\n00:18:41.521 --> 00:18:45.549\nNow, I don't have files on my hard drive,\ncuz I need to get them from the master.\n\n375\n00:18:45.549 --> 00:18:49.440\nI'm just the slave server so\nI'm gonna have copies of that data.\n\n376\n00:18:49.440 --> 00:18:55.390\nSo when I come in here I need to create\na pattern for the master server, right?\n\n377\n00:18:55.390 --> 00:18:57.630\nRemember on the master we\ncreated a pattern for the slave,\n\n378\n00:18:57.630 --> 00:18:59.050\nhere we're creating a pattern for\nthe master.\n\n379\n00:18:59.050 --> 00:19:03.730\nCuz we might have more than one master or\nmasters for different domains or\n\n380\n00:19:03.730 --> 00:19:05.720\ndifferent zones that we're bringing in.\n\n381\n00:19:05.720 --> 00:19:08.030\nSo I'm gonna create a pattern\nthat's gonna identify that.\n\n382\n00:19:08.030 --> 00:19:11.859\nAnd this one gets a little weird\nbecause when you give it a name,\n\n383\n00:19:11.859 --> 00:19:13.603\nI'm gonna call mine dns3.\n\n384\n00:19:13.603 --> 00:19:18.140\nThis server is dns4, right, it's going\nto be the slave, dns3 is the master.\n\n385\n00:19:18.140 --> 00:19:22.456\nSo, on the other side I was putting in\ndata for dns4, here I'm putting in dns3.\n\n386\n00:19:22.456 --> 00:19:24.390\nThe name can be whatever you want, though,\n\n387\n00:19:24.390 --> 00:19:26.809\nI just like to name it whatever\nserver I'm talking to.\n\n388\n00:19:26.809 --> 00:19:29.388\nIf you're talking to more than one server\nthat name doesn't quite work out, though.\n\n389\n00:19:29.388 --> 00:19:32.029\nSo you've got to kind of figure\nwhat works in your environment.\n\n390\n00:19:33.560 --> 00:19:40.430\nThen on the master, remember how I set\nup notify and allowed transfer, right?\n\n391\n00:19:40.430 --> 00:19:44.190\nNotify said that the master\nwas gonna notify this one.\n\n392\n00:19:44.190 --> 00:19:47.868\nSo on this one,\nI need to say allow-notify.\n\n393\n00:19:47.868 --> 00:19:50.130\nI'm allowing the master to notify me.\n\n394\n00:19:50.130 --> 00:19:52.556\nOtherwise, when I receive a notification,\nI just throw it out.\n\n395\n00:19:52.556 --> 00:19:54.270\nThat's a security precaution.\n\n396\n00:19:54.270 --> 00:19:57.440\nDon't trust a notification\nthat you weren't expecting.\n\n397\n00:19:57.440 --> 00:20:00.350\nSo here, it will allow a notify.\n\n398\n00:20:00.350 --> 00:20:04.815\nAnd I'll say, from the master,\nwhich is 103, right?\n\n399\n00:20:04.815 --> 00:20:07.360\nAnd I'm gonna stick with that NOKEY for\nright now.\n\n400\n00:20:07.360 --> 00:20:11.610\nWe'll add the security keys later just to\nmake sure everything's working, right?\n\n401\n00:20:11.610 --> 00:20:13.380\nSo I'm gonna allow-notify and\n\n402\n00:20:13.380 --> 00:20:17.670\non the other side I put that I\nwould allow the transfers, right?\n\n403\n00:20:17.670 --> 00:20:21.340\nSo on the master we did the transfer\nsystem so that we would allow the command.\n\n404\n00:20:21.340 --> 00:20:22.960\nActually do I still have\nthe pulled up over here?\n\n405\n00:20:22.960 --> 00:20:27.640\nLet me get that pulled back up,\nso on the master over here I said\n\n406\n00:20:29.470 --> 00:20:31.520\nprovide transfer, right?\n\n407\n00:20:31.520 --> 00:20:34.410\nSo I'm providing a transfer\nif they ask for it.\n\n408\n00:20:34.410 --> 00:20:40.600\nOn the slave side, instead of providing a\ntransfer, I'm gonna say, request transfer.\n\n409\n00:20:40.600 --> 00:20:42.150\nSo I'm asking the other person, so\n\n410\n00:20:42.150 --> 00:20:45.220\nthese are the opposite commands of\nwhat you have on the master, right?\n\n411\n00:20:45.220 --> 00:20:48.379\nSo this is just the kind of\nthe reflexive values, I think,\n\n412\n00:20:48.379 --> 00:20:50.460\nis the right word for that.\n\n413\n00:20:50.460 --> 00:20:56.176\nSo I'm gonna punch that in and\nwe'll stick with old NOKEY.\n\n414\n00:20:56.176 --> 00:21:00.178\nAll right, do be aware that if we changed\nour port numbers on any of this stuff I\n\n415\n00:21:00.178 --> 00:21:02.280\nwould actually need to punch that in here.\n\n416\n00:21:02.280 --> 00:21:07.390\nSo say @53 or whatever so that we\nknow what port number to reach out.\n\n417\n00:21:07.390 --> 00:21:09.820\nIf everything's on the default port\nthough we don't have to mess with that so\n\n418\n00:21:09.820 --> 00:21:13.450\njust remember that little\nnaming convention.\n\n419\n00:21:13.450 --> 00:21:17.945\nThat happens sometimes when you're\nrunning NSD on the same servers unbound,\n\n420\n00:21:17.945 --> 00:21:20.888\nthat we change its port numbers,\nso just be aware.\n\n421\n00:21:20.888 --> 00:21:23.890\nAll right, so\nnow I've got a pattern for the master.\n\n422\n00:21:23.890 --> 00:21:25.929\nI need to tell it what zones to expect.\n\n423\n00:21:25.929 --> 00:21:29.966\nAnd so I'm gonna create a zone and\nI'll say name, and\n\n424\n00:21:29.966 --> 00:21:32.610\nthis is gonna be lab.itpro.tv.\n\n425\n00:21:32.610 --> 00:21:37.396\nAnd for the zone, I'm gonna say zoneFile,\nand what I want the file to be.\n\n426\n00:21:37.396 --> 00:21:41.235\nAnd on the zoneFile name, there's actually\na number of different wildcards and\n\n427\n00:21:41.235 --> 00:21:43.840\nthings that you can use in\nhere to structure that name.\n\n428\n00:21:43.840 --> 00:21:47.745\nBut I'm just gonna give it the same\nname that I gave it on the server.\n\n429\n00:21:47.745 --> 00:21:49.847\nBut that zone file name doesn't exist,\nright?\n\n430\n00:21:49.847 --> 00:21:52.710\nI haven't made that file,\nit's gotta come from the master.\n\n431\n00:21:52.710 --> 00:21:55.792\nAnd so that's where we say,\n\n432\n00:21:55.792 --> 00:22:00.421\ninclude-pattern: \"dns3,\" right?\n\n433\n00:22:00.421 --> 00:22:02.507\nThat's gonna tell it, hey,\nthis file doesn't exist,\n\n434\n00:22:02.507 --> 00:22:04.249\nwe're gonna include-pattern: \"dns3\".\n\n435\n00:22:04.249 --> 00:22:07.930\nAnd if you look,\nhere we've got request transfer.\n\n436\n00:22:07.930 --> 00:22:10.919\nThat's how we know that we're\ngoing to be a slave system.\n\n437\n00:22:10.919 --> 00:22:14.981\nNotice the word slave never\nactually gets used here at all.\n\n438\n00:22:14.981 --> 00:22:18.687\nIn fact in most modern software,\nthey shy away from that terminology for\n\n439\n00:22:18.687 --> 00:22:19.670\nobvious reasons.\n\n440\n00:22:19.670 --> 00:22:22.220\nSo you normally have primary and\nsecondary or whatever.\n\n441\n00:22:22.220 --> 00:22:26.470\nWell in this case, we really just have\none server that provides the transfer and\n\n442\n00:22:26.470 --> 00:22:28.270\none that requests the transfer, right?\n\n443\n00:22:28.270 --> 00:22:31.370\nBut it is in the official DNS standard.\n\n444\n00:22:31.370 --> 00:22:32.987\nIt's the master slave model, so\n\n445\n00:22:32.987 --> 00:22:36.350\nbasically that's what's gonna\nidentify this one as being a slave.\n\n446\n00:22:36.350 --> 00:22:39.399\nIs that it has a pattern\nattached to the zone.\n\n447\n00:22:39.399 --> 00:22:44.531\nAnd the pattern points to somewhere\nthat we're going to request a transfer.\n\n448\n00:22:44.531 --> 00:22:47.219\nIf it provided a transfer,\nwe'd be the master.\n\n449\n00:22:47.219 --> 00:22:50.520\nNow, we could be both.\n\n450\n00:22:50.520 --> 00:22:52.941\nWe request the transfer from a master.\n\n451\n00:22:52.941 --> 00:22:56.590\nAnd then we provide the transfer\nto a downstream slave.\n\n452\n00:22:56.590 --> 00:22:58.390\nThat'll tell us that we're a slave also.\n\n453\n00:22:58.390 --> 00:22:58.890\nRight?\n\n454\n00:22:58.890 --> 00:23:02.650\nBut that we're just in the middle\ntier of a three tier model or\n\n455\n00:23:02.650 --> 00:23:03.679\nhowever many more tiers.\n\n456\n00:23:04.982 --> 00:23:09.000\nAll right, so we've got that pattern in\nplace, that should really be about it.\n\n457\n00:23:09.000 --> 00:23:12.571\nNow that that's in place, we should be\nable to reach out to the other side,\n\n458\n00:23:12.571 --> 00:23:14.910\nget the zone, and\nreplicate it on down, right?\n\n459\n00:23:14.910 --> 00:23:17.492\nI'm gonna get out and save that file.\n\n460\n00:23:17.492 --> 00:23:23.529\nAnd when I look, let me get into /etc/nsd.\n\n461\n00:23:23.529 --> 00:23:28.963\nWhen I look in here, I do not have\na lab.itpro.tv.dns file, right?\n\n462\n00:23:28.963 --> 00:23:29.790\nIt's not created.\n\n463\n00:23:29.790 --> 00:23:31.060\nIt doesn't exist.\n\n464\n00:23:31.060 --> 00:23:34.500\nI haven't reached out to the other\nserver to get a copy of it.\n\n465\n00:23:34.500 --> 00:23:38.250\nIt's not there and mostly that's\nbecause nsd doesn't know about it yet.\n\n466\n00:23:38.250 --> 00:23:44.760\nSo I need to run nsd-control.reconfig,\nright?\n\n467\n00:23:44.760 --> 00:23:47.894\nI need it to read the conf file again,\nI probably should have checked it for\n\n468\n00:23:47.894 --> 00:23:49.322\nerrors first before doing that.\n\n469\n00:23:49.322 --> 00:23:51.426\nBut since this is a new server,\nwhat do I care if it gets an error?\n\n470\n00:23:51.426 --> 00:23:55.191\nIf this was an established server,\nthough, and people were using it,\n\n471\n00:23:55.191 --> 00:23:58.665\nI'd always wanna make sure that\nI did a nsd-control checkconf.\n\n472\n00:23:58.665 --> 00:24:03.843\nAnd pointed it to that file To spot\nerrors before I do the reconfig.\n\n473\n00:24:03.843 --> 00:24:10.743\nAnd oops,\nnsd control it's actually nsd-checkconf.\n\n474\n00:24:10.743 --> 00:24:12.260\nThat would probably work.\n\n475\n00:24:12.260 --> 00:24:14.550\nSo in my case I lucked out that\nI didn't have any typos so\n\n476\n00:24:14.550 --> 00:24:16.300\nI didn't cause any outages or anything.\n\n477\n00:24:16.300 --> 00:24:17.870\nBut it loaded it up and\n\n478\n00:24:17.870 --> 00:24:21.650\nnow when it loads it it should\nsay look new zone, very exciting.\n\n479\n00:24:21.650 --> 00:24:22.780\nThe file doesn't exist.\n\n480\n00:24:22.780 --> 00:24:24.380\nBut there's a pattern.\n\n481\n00:24:24.380 --> 00:24:27.310\nPattern points to a master,\nmaster has got the zone I want.\n\n482\n00:24:27.310 --> 00:24:29.340\nLet me reach out and talk to him, okay?\n\n483\n00:24:29.340 --> 00:24:33.990\nNow, here's where things can\neither go good or go bad, right?\n\n484\n00:24:33.990 --> 00:24:37.040\nEither, I'm gonna get the zone,\nit's gonna load up and it's gonna work or\n\n485\n00:24:37.040 --> 00:24:37.810\nwe're gonna get a failure.\n\n486\n00:24:39.000 --> 00:24:41.230\nI don't see anything on my\nscreen either way, right?\n\n487\n00:24:41.230 --> 00:24:44.110\nNothing's gonna pop up here because\nstandard errors actually being directed to\n\n488\n00:24:44.110 --> 00:24:46.100\nthe service and\nthe service runs in the backgrounds.\n\n489\n00:24:46.100 --> 00:24:48.451\nSo even though standard errors\nmean showing on your screen,\n\n490\n00:24:48.451 --> 00:24:51.599\nit's showing it on a screen that you\ncan't see, so it doesn't matter, right?\n\n491\n00:24:51.599 --> 00:24:56.230\nSo we're left to the log file.\n\n492\n00:24:56.230 --> 00:25:01.900\nSo let me do a tail /bar/log/nsd.log and\nsee what we get, okay?\n\n493\n00:25:01.900 --> 00:25:06.402\nAnd, what I get is nsd started,\ntransfer zone\n\n494\n00:25:06.402 --> 00:25:11.144\nlab.itpro.tv receieved error code REFUSED.\n\n495\n00:25:11.144 --> 00:25:14.115\nI've been rejected, I'm insulted.\n\n496\n00:25:14.115 --> 00:25:16.645\nAnd as I look down the list here,\nI mean just refuse, refuse, refuse.\n\n497\n00:25:16.645 --> 00:25:19.555\nIt tried over and over and\nover again, I'm getting refused.\n\n498\n00:25:19.555 --> 00:25:23.675\nSo while I've been getting errors on\nscreen I didn't actually get my zone,\n\n499\n00:25:23.675 --> 00:25:25.040\nit didn't come over.\n\n500\n00:25:25.040 --> 00:25:28.100\nI'm not getting any details\nas to why though, so\n\n501\n00:25:28.100 --> 00:25:30.140\nI'm going to have to sort that out.\n\n502\n00:25:30.140 --> 00:25:33.610\nBut it certainly didn't work, right, so\nI need to find out what happened there.\n\n503\n00:25:33.610 --> 00:25:36.670\n&gt;&gt; And at this point is that when you'd\nhave to kind of bite the bullet there per\n\n504\n00:25:36.670 --> 00:25:39.140\nse and\ngo into sys log to get more information,\n\n505\n00:25:39.140 --> 00:25:42.160\nor does this have more robosity?\n\n506\n00:25:42.160 --> 00:25:43.990\n&gt;&gt; And then,\nthere's some more information you get but\n\n507\n00:25:43.990 --> 00:25:45.070\nI don't probably don't need it right?\n\n508\n00:25:45.070 --> 00:25:48.930\nBecause what this tells me is that\nI'm more than likely configured right\n\n509\n00:25:48.930 --> 00:25:52.490\nhere on my side, okay, I'm being refused.\n\n510\n00:25:52.490 --> 00:25:55.420\nSo I'm actively reaching\nout to the other server and\n\n511\n00:25:55.420 --> 00:25:56.920\nthe other server is refusing these.\n\n512\n00:25:56.920 --> 00:26:00.460\nSo the problem is more than likely\nover there, could be a firewall,\n\n513\n00:26:00.460 --> 00:26:04.020\ncould be all sorts of things\nthat are rejecting me.\n\n514\n00:26:04.020 --> 00:26:08.826\nBut I don't know that, right, so\nthis was just looking in nsd's log file.\n\n515\n00:26:08.826 --> 00:26:15.900\nI could tail /var/log/messages,\nand look there.\n\n516\n00:26:15.900 --> 00:26:19.050\nAnd, well, I've had other\nthings come up since then, so\n\n517\n00:26:19.050 --> 00:26:25.020\nI'm not really seeing much\nas far as nsd is concerned.\n\n518\n00:26:25.020 --> 00:26:29.460\nI guess we could, I don't know, we could\n\n519\n00:26:31.180 --> 00:26:36.740\nhunt for nsd messages in there by\ngrepping it, if we really wanted to.\n\n520\n00:26:36.740 --> 00:26:37.910\nYeah, yeah, that was helpful.\n\n521\n00:26:37.910 --> 00:26:39.850\nSo not pulling a lot of information there.\n\n522\n00:26:39.850 --> 00:26:43.789\n&gt;&gt; Sure.\n&gt;&gt; We can always pull up journalctl.\n\n523\n00:26:43.789 --> 00:26:47.957\nAnd if I do like a, Let's see,\n\n524\n00:26:47.957 --> 00:26:52.460\nif I spell journalctl, right, we can look\nand see if anything pops up in there.\n\n525\n00:26:52.460 --> 00:26:56.110\nBut even there, I mean there's just\nother things going on on the system so\n\n526\n00:26:56.110 --> 00:26:58.570\nI'm not necessarily gonna\nsee what's happening.\n\n527\n00:26:58.570 --> 00:27:02.800\nThe best place, it's why I like to turn\non the NSD log file, cuz it was easy for\n\n528\n00:27:02.800 --> 00:27:06.250\nme to spot the problem right there and\nnot have to deal with this other stuff.\n\n529\n00:27:06.250 --> 00:27:06.960\nSo I can see it there.\n\n530\n00:27:06.960 --> 00:27:12.440\nI can also do nsd-control checkzone,\nright.\n\n531\n00:27:12.440 --> 00:27:17.320\nWith the checkzone command,\nwe can tell it to look in there and\n\n532\n00:27:17.320 --> 00:27:18.910\ntell me the status of a zone.\n\n533\n00:27:18.910 --> 00:27:23.710\nOr actually zone status would\nprobably help, wouldn't it?\n\n534\n00:27:23.710 --> 00:27:24.694\nLet's do lab.itpro.tv.\n\n535\n00:27:26.000 --> 00:27:29.070\nAnd there we go,\nI can see my state is stuck in refreshing.\n\n536\n00:27:29.070 --> 00:27:31.880\nServed-serial and\ncommitted serial are both none.\n\n537\n00:27:31.880 --> 00:27:35.070\nI've never synced,\nI've never gained any data.\n\n538\n00:27:35.070 --> 00:27:36.560\nSo likely I've got an error\non the other side, so\n\n539\n00:27:36.560 --> 00:27:39.410\nI'm gonna jump over to the other side,\nonto my Master.\n\n540\n00:27:39.410 --> 00:27:42.725\nAnd on the master, we can take a look at\n\n541\n00:27:42.725 --> 00:27:48.550\n/var/log/nsd.log and\nwe can see what we got there.\n\n542\n00:27:48.550 --> 00:27:49.610\nActually, I don't have any errors here.\n\n543\n00:27:50.680 --> 00:27:55.060\nSo, if I don't have any errors here at\nall, and the other sides getting refused.\n\n544\n00:27:55.060 --> 00:27:56.430\nWhat does that mean?\n\n545\n00:27:56.430 --> 00:27:58.410\nWell a lot of times, it means it's\ngoing to be a firewall issue.\n\n546\n00:27:58.410 --> 00:28:02.820\nThat the firewall is blocking\nthe communication between the two.\n\n547\n00:28:02.820 --> 00:28:10.130\nSo I'm gonna do a quick firewall-cmd\n--list-all, and on this one,\n\n548\n00:28:10.130 --> 00:28:14.180\nI can see that I'm allowing dns through\nthe firewall, so this one seems okay.\n\n549\n00:28:14.180 --> 00:28:19.680\nAnd on this one,\nlet me do a firewall-cmd--list-all.\n\n550\n00:28:19.680 --> 00:28:21.710\nAnd, I got dns approved here too.\n\n551\n00:28:21.710 --> 00:28:22.930\nSo that looks good.\n\n552\n00:28:22.930 --> 00:28:26.280\nI could test some reachability\n10.0.222.103 is the master, and\n\n553\n00:28:26.280 --> 00:28:28.000\nI can ping it.\n\n554\n00:28:29.000 --> 00:28:33.580\nAnd I can take NSD out of the picture for\na minute, and\n\n555\n00:28:33.580 --> 00:28:36.560\njust try and\ndo his own transfer manually, right?\n\n556\n00:28:36.560 --> 00:28:38.510\nYou can use nslookup.\n\n557\n00:28:38.510 --> 00:28:42.580\nOr actually, let's do dig.\n\n558\n00:28:42.580 --> 00:28:48.986\nIf I do dig, and\nI dig against 10.0.222.103.\n\n559\n00:28:48.986 --> 00:28:52.300\nSo I'm on the slave.\n\n560\n00:28:52.300 --> 00:28:54.750\nAnd I'm running dig against the master.\n\n561\n00:28:54.750 --> 00:28:57.590\nI can ask for lab.itpro.tv, and\n\n562\n00:28:57.590 --> 00:29:03.880\nI can set the type to AXFR,\nwhich is a zone transfer.\n\n563\n00:29:03.880 --> 00:29:07.014\nNow when we run that query, oop,\napparently I got my syntax wrong.\n\n564\n00:29:07.014 --> 00:29:09.728\nIs it not --type?\n\n565\n00:29:09.728 --> 00:29:12.989\n[SOUND] You know what?\n\n566\n00:29:12.989 --> 00:29:16.594\nApparently, we just don't even need that,\nwe can just type axfr, there we go.\n\n567\n00:29:16.594 --> 00:29:19.230\nAnd we reach out and\nI get a transfer failed.\n\n568\n00:29:19.230 --> 00:29:21.850\nSo my zone transfer is not being allowed,\nright?\n\n569\n00:29:21.850 --> 00:29:26.670\nWhen I reached out to that server,\nI connected and transfer failed,\n\n570\n00:29:26.670 --> 00:29:27.690\nthat's all it's telling me.\n\n571\n00:29:27.690 --> 00:29:30.650\nSo I did talk to the server, though,\nso I know I've got connectivity.\n\n572\n00:29:30.650 --> 00:29:32.040\nI just wasn't able to transfer.\n\n573\n00:29:32.040 --> 00:29:35.620\n&gt;&gt; And I know you're not setting this\nup this way in this episode Don, but\n\n574\n00:29:35.620 --> 00:29:39.707\nif you did could the keys come into play\nhere and cause problems too at any point?\n\n575\n00:29:39.707 --> 00:29:42.172\n&gt;&gt; Yeah, they certainly could,\nI should probably check and\n\n576\n00:29:42.172 --> 00:29:44.547\nmake sure I didn't fat finger\nthat no key part, right?\n\n577\n00:29:44.547 --> 00:29:47.364\nBut if I messed up a key on one part or\nleft a key off,\n\n578\n00:29:47.364 --> 00:29:49.260\nit would look exactly like this.\n\n579\n00:29:49.260 --> 00:29:50.287\nYou'd try the transfer and\n\n580\n00:29:50.287 --> 00:29:53.110\ntransfer would be blocked because\nwe don't have the key, right?\n\n581\n00:29:53.110 --> 00:29:55.840\nWhich is the whole reason I was\ntrying to leave the keys off because\n\n582\n00:29:55.840 --> 00:29:57.790\nI didn't wanna end up in that situation.\n\n583\n00:29:57.790 --> 00:30:00.660\nBut here it just looks like\nthat transfer is being blocked.\n\n584\n00:30:00.660 --> 00:30:02.900\nSo I need to verify my config files.\n\n585\n00:30:02.900 --> 00:30:07.250\nSo I'm gonna look in\nthis /etc/nsd/nsd.com?\n\n586\n00:30:07.250 --> 00:30:09.320\nAnd I'm taking a look at the Master?\n\n587\n00:30:09.320 --> 00:30:12.080\nBecause the master is the one\nthat's rejecting us, right?\n\n588\n00:30:12.080 --> 00:30:15.522\nAnd so when I look at that zone for\nlab.itpro.tv,\n\n589\n00:30:15.522 --> 00:30:18.251\nI can see that include pattern of DNS 4.\n\n590\n00:30:18.251 --> 00:30:24.316\nThere's DNS 4 and I've got\n10.0.222.104 listed with the right IP,\n\n591\n00:30:24.316 --> 00:30:26.055\nso that all looks good.\n\n592\n00:30:26.055 --> 00:30:30.615\nAnd I've got no key And NOKEY and\nthat is spelled correctly,\n\n593\n00:30:30.615 --> 00:30:32.590\n[LAUGH] as far as I can tell.\n\n594\n00:30:32.590 --> 00:30:36.058\nLet me make sure I spelled it\nthe same on the other side.\n\n595\n00:30:39.425 --> 00:30:42.650\nAnd, I should have just tailed it,\nthat would have been faster.\n\n596\n00:30:42.650 --> 00:30:44.905\nNOKEY yeah,\nif I had spelled one of those wrong,\n\n597\n00:30:44.905 --> 00:30:48.433\nthat would have done the done the damage\nright there, but no, IP's look good.\n\n598\n00:30:48.433 --> 00:30:50.250\nAllow notify request transfer.\n\n599\n00:30:50.250 --> 00:30:51.490\nEverything looks good there, so\n\n600\n00:30:51.490 --> 00:30:53.360\nwe are going to have to do\na little bit more digging.\n\n601\n00:30:53.360 --> 00:30:55.834\nWe do have some verbosity options\nthat we can tweak with the logs.\n\n602\n00:30:55.834 --> 00:31:01.970\nYou might have noticed\nthose in /etc/nsd/nds.conf.\n\n603\n00:31:01.970 --> 00:31:07.920\nThat if you look, you've got this\nverbosity level, and the default is zero.\n\n604\n00:31:07.920 --> 00:31:11.720\nAnd so you can bump that number up to get\neven more detailed information in logs and\n\n605\n00:31:11.720 --> 00:31:14.550\nstart to try and\nisolate where that problem is coming from.\n\n606\n00:31:14.550 --> 00:31:16.430\nAll right, now I'm not gonna mess\nwith my verbosity right now,\n\n607\n00:31:16.430 --> 00:31:19.160\nbecause you really start getting\ninto some deep details in there, and\n\n608\n00:31:19.160 --> 00:31:21.730\nI have to have a problem that's\ntruly stumped me to do that.\n\n609\n00:31:21.730 --> 00:31:23.070\nThere's one more place that I need to go.\n\n610\n00:31:23.070 --> 00:31:24.980\nMy problem is really over on the master.\n\n611\n00:31:24.980 --> 00:31:27.270\nI know that I'm able to reach out and\ntalk to it,\n\n612\n00:31:27.270 --> 00:31:28.500\nthe master's the one\nthat's having the problem.\n\n613\n00:31:28.500 --> 00:31:33.920\nSo, let me show you a little trick, if you\ndon't mind restarting your service, right?\n\n614\n00:31:33.920 --> 00:31:35.580\nTaking it offline for a brief moment,\n\n615\n00:31:35.580 --> 00:31:38.310\nwe can find some information over\non the master that'll help us out.\n\n616\n00:31:38.310 --> 00:31:42.630\nSo, what I'm gonna do is just,\nI don't even have to do this really.\n\n617\n00:31:42.630 --> 00:31:46.340\nIf I wanted to dig through sys.log and\nfind the NSD data I could.\n\n618\n00:31:46.340 --> 00:31:52.856\nBut what I like to do is real quick\nto a system CTL restart of NSD.\n\n619\n00:31:52.856 --> 00:31:56.912\nSo, I'm gonna restart the NSD service,\nwhich is gonna cause a micro-outage.\n\n620\n00:31:56.912 --> 00:31:59.656\nBut, that's gonna let me tail.\n\n621\n00:31:59.656 --> 00:32:03.074\n/var/log/messages.\n\n622\n00:32:03.074 --> 00:32:06.520\nMy cis log, so\nthat I can see if anything popped up.\n\n623\n00:32:06.520 --> 00:32:10.046\nAnd all the last entries\nshould be from NSD.\n\n624\n00:32:10.046 --> 00:32:11.870\nAnd I can try and spot my error.\n\n625\n00:32:11.870 --> 00:32:17.410\nAnd so here I see NSD starting up,\nand I've got an error.\n\n626\n00:32:17.410 --> 00:32:18.853\nAnd right there it's telling\nme what my error is, okay?\n\n627\n00:32:18.853 --> 00:32:21.610\nAnd it says, could not find pattern dns4.\n\n628\n00:32:22.720 --> 00:32:25.607\nWell, that's unusual,\ncuz I created a pattern called dns4, so\n\n629\n00:32:25.607 --> 00:32:26.598\nit couldn't find it.\n\n630\n00:32:26.598 --> 00:32:29.650\nTelling me on line 324 is the problem.\n\n631\n00:32:29.650 --> 00:32:34.060\nI got one error in my config, and I think\nI actually said out loud, didn't I,\n\n632\n00:32:34.060 --> 00:32:36.280\nthat I really should have checked\nmy config file, and I didn't?\n\n633\n00:32:36.280 --> 00:32:41.072\nLet me do an nsd-control, or no, sorry,\n\n634\n00:32:41.072 --> 00:32:46.012\nnsd-checkconf /etc/nsd/nsd.conf.\n\n635\n00:32:46.012 --> 00:32:47.661\nI might have been on the slave\nwhen I ran that check.\n\n636\n00:32:47.661 --> 00:32:48.378\nSure enough,\n\n637\n00:32:48.378 --> 00:32:53.060\nhad I bothered to run a check I would have\nfound that I had an error right there.\n\n638\n00:32:53.060 --> 00:32:55.890\nIt's not giving me the greatest error,\nbut it is telling me\n\n639\n00:32:55.890 --> 00:32:59.630\nLine 324 could not find pattern dns4,\nsame thing I got from my syslog.\n\n640\n00:32:59.630 --> 00:33:02.655\nSo I could have found that without\nrestarting my service if I had bothered to\n\n641\n00:33:02.655 --> 00:33:04.249\ncheck my config file after writing it.\n\n642\n00:33:04.249 --> 00:33:06.300\nSo lesson to be learned there.\n\n643\n00:33:06.300 --> 00:33:08.430\nSo let me go and take a look at line 324.\n\n644\n00:33:08.430 --> 00:33:09.760\nThat's gonna be down at the bottom.\n\n645\n00:33:09.760 --> 00:33:14.080\nSo it's saying could\nnot find pattern dns4,\n\n646\n00:33:14.080 --> 00:33:21.500\nwhich is usually gonna be in, whoops,\nin the zone part where I defined it.\n\n647\n00:33:21.500 --> 00:33:25.315\nSo if I jump down here,\nI see what my issue is.\n\n648\n00:33:25.315 --> 00:33:30.111\nSo I define my zone, and\nin my zone I included pattern dns4, right?\n\n649\n00:33:30.111 --> 00:33:32.711\nAnd I don't know my line\nnumbers right now but\n\n650\n00:33:32.711 --> 00:33:35.800\nI'm pretty sure this one\nwill be line number 324.\n\n651\n00:33:35.800 --> 00:33:38.513\nThere's a command in vem to be\nable to show your line number.\n\n652\n00:33:38.513 --> 00:33:41.810\nI just can't remember, it's like set\nnumber or something crazy like that.\n\n653\n00:33:41.810 --> 00:33:44.920\nLet's see if that'll, there we go.\n\n654\n00:33:44.920 --> 00:33:45.650\nSet number.\n\n655\n00:33:45.650 --> 00:33:47.470\nAnd so line 324, there we go.\n\n656\n00:33:47.470 --> 00:33:51.990\nI can see right there,\nthat is the one that's causing my issue.\n\n657\n00:33:51.990 --> 00:33:55.370\nAnd I'm including a pattern,\nI defined the pattern right here.\n\n658\n00:33:55.370 --> 00:33:59.670\nI'll bet my problem is that I didn't\ndo it in order, did I, right?\n\n659\n00:33:59.670 --> 00:34:04.083\nI defined the pattern after the zone.\n\n660\n00:34:04.083 --> 00:34:08.200\nAnd so that's gonna be my issue is that\nI need to define the pattern first.\n\n661\n00:34:08.200 --> 00:34:09.370\nOn the slave I did that.\n\n662\n00:34:09.370 --> 00:34:13.340\nI defined the pattern first and\nthen the zone, so I need to fix that and\n\n663\n00:34:13.340 --> 00:34:14.142\nget that squared away.\n\n664\n00:34:14.142 --> 00:34:18.605\nSo I'm gonna cheat and\ndo a little copy and paste action.\n\n665\n00:34:18.605 --> 00:34:23.589\nAnd then that way I can just come\nin here and paste that zone in.\n\n666\n00:34:23.589 --> 00:34:26.380\nAnd then I can come down here and\nI can delete these guys.\n\n667\n00:34:27.920 --> 00:34:28.690\nThere we go.\n\n668\n00:34:28.690 --> 00:34:29.904\nAll right, so\nnow I'm defining the pattern first.\n\n669\n00:34:29.904 --> 00:34:34.156\nAnd I can get out, I can check\nmy config file like a good boy,\n\n670\n00:34:34.156 --> 00:34:35.870\nlike I'm supposed to.\n\n671\n00:34:35.870 --> 00:34:41.402\nWhen I do this, looks good there and so\nnow I can do an nsd-control reconfig.\n\n672\n00:34:41.402 --> 00:34:48.547\nAnd cannot connect to 127,\nconnection refused.\n\n673\n00:34:48.547 --> 00:34:49.920\nThat's a good one.\n\n674\n00:34:49.920 --> 00:34:51.680\n&gt;&gt; Well, Don,\nI think I might know this error here.\n\n675\n00:34:51.680 --> 00:34:53.250\nIf you'll go back to that config file,\n\n676\n00:34:53.250 --> 00:34:55.860\nI think you accidentally deleted\na line when you exited it.\n\n677\n00:34:55.860 --> 00:34:58.020\n&gt;&gt; What?\n&gt;&gt; In your zone there.\n\n678\n00:34:58.020 --> 00:34:58.520\n&gt;&gt; Why would I do that?\n\n679\n00:35:03.994 --> 00:35:12.000\nI do have my zone file and I don't have my\nallow transfer and all that other stuff.\n\n680\n00:35:12.000 --> 00:35:13.640\nI guess I deleted two lines in all that.\n\n681\n00:35:13.640 --> 00:35:14.910\nHow did I do that?\n\n682\n00:35:14.910 --> 00:35:16.580\nWell, we get heavy-handed\nwith the deletes.\n\n683\n00:35:16.580 --> 00:35:20.330\nSo let me fix that and put that back in\nplace so that we can get that working.\n\n684\n00:35:20.330 --> 00:35:25.341\nSo I've got my zone file,\nI need to set up a notify, right,\n\n685\n00:35:25.341 --> 00:35:32.379\ncuz we notify 10.0.222.103 which\nwas a no key, or I'm sorry 104.\n\n686\n00:35:32.379 --> 00:35:35.595\nOr wait, hang on.\n\n687\n00:35:35.595 --> 00:35:38.041\nMy notify and provider up there,\nthat was right.\n\n688\n00:35:38.041 --> 00:35:40.324\nI just lost, I lost my include pattern,\nthere we go.\n\n689\n00:35:40.324 --> 00:35:44.562\nThat's the line that I lost,\n\n690\n00:35:44.562 --> 00:35:50.166\ninclude-pattern, and it was dns4.\n\n691\n00:35:50.166 --> 00:35:51.862\nYeah, that'll cause a problem right there.\n\n692\n00:35:51.862 --> 00:35:57.140\nAll right, so I'm going to fix that and\nlet me recheck that config.\n\n693\n00:35:57.140 --> 00:36:02.337\nAnd actually still getting\na connection refused.\n\n694\n00:36:02.337 --> 00:36:05.371\nThat's interesting,\nlet me restart the service.\n\n695\n00:36:08.227 --> 00:36:08.982\nSee what I've broken.\n\n696\n00:36:15.101 --> 00:36:15.916\nWorking now, all right.\n\n697\n00:36:15.916 --> 00:36:20.200\nSo we should be good to go,\nright, everything should be up.\n\n698\n00:36:20.200 --> 00:36:22.980\nOn the other side, let me go and\ntrigger that, right.\n\n699\n00:36:22.980 --> 00:36:26.284\nSo I'm gonna switch back over to my slave,\nand\n\n700\n00:36:26.284 --> 00:36:30.201\nI'm just gonna do a systemctl\nrestart nsd.service.\n\n701\n00:36:30.201 --> 00:36:34.163\nAll right, so it should be\nreaching out to the other side and\n\n702\n00:36:34.163 --> 00:36:37.180\ngetting that zone and bringing it over.\n\n703\n00:36:37.180 --> 00:36:39.360\nOkay, now how do I know if that worked?\n\n704\n00:36:39.360 --> 00:36:43.650\nWell, we can look in /var/log/nsd.log.\n\n705\n00:36:43.650 --> 00:36:47.610\nAnd I was getting errors before,\nhere's all my errors.\n\n706\n00:36:47.610 --> 00:36:49.680\nBut now we can see signal received,\n\n707\n00:36:49.680 --> 00:36:52.340\nshutting down, so\nthat's me restarting the service.\n\n708\n00:36:52.340 --> 00:36:55.440\nI can see the service starting,\nand then right here,\n\n709\n00:36:55.440 --> 00:37:00.110\nzone lab.itpro.tv serial 0,\nwhich means I have no serial number.\n\n710\n00:37:00.110 --> 00:37:01.140\nI don't have the zone.\n\n711\n00:37:01.140 --> 00:37:03.770\nAnd then it says it's updated to 1.\n\n712\n00:37:03.770 --> 00:37:05.425\nI just got the serial\nnumber from the other side.\n\n713\n00:37:05.425 --> 00:37:07.290\nI know I'm talking to the other side.\n\n714\n00:37:07.290 --> 00:37:11.120\nAnd on the other side, now I sound like\nthat Crossing Over with John Edward J,\n\n715\n00:37:11.120 --> 00:37:13.000\nwe're talking to the other side.\n\n716\n00:37:13.000 --> 00:37:19.240\nSo now over here, I should be able to do\na look into the log files on this one.\n\n717\n00:37:19.240 --> 00:37:23.820\nSo if I go into /var/log/nsd.log.\n\n718\n00:37:23.820 --> 00:37:25.936\nAnd I look at the end, no errors, right?\n\n719\n00:37:25.936 --> 00:37:27.650\nJust starting up, that's it.\n\n720\n00:37:27.650 --> 00:37:29.460\nNo crazy errors to be found in here.\n\n721\n00:37:29.460 --> 00:37:32.770\nOn the other side,\nif I jump back over to that guest,\n\n722\n00:37:32.770 --> 00:37:38.140\nI can do an nsd-control\nzonestatus lab.itpro.tv.\n\n723\n00:37:38.140 --> 00:37:42.270\nNow earlier when I ran this,\nthe status was refreshing and\n\n724\n00:37:42.270 --> 00:37:46.920\nthen the other numbers were empty\ncuz I never got a copy of the zone.\n\n725\n00:37:46.920 --> 00:37:51.470\nNow the state is okay, and\nI've got a serial number.\n\n726\n00:37:51.470 --> 00:37:53.770\nHere's the serial number that I got and\nhow long I've had it.\n\n727\n00:37:53.770 --> 00:37:55.300\nI've got a valid zone.\n\n728\n00:37:55.300 --> 00:38:00.100\nAnd I should be able to do\na dig against this server.\n\n729\n00:38:00.100 --> 00:38:03.630\nSo this is my dns4, so .104, and\n\n730\n00:38:03.630 --> 00:38:08.430\nI should be able to look up\nsomething like www.lab.itpro.tv.\n\n731\n00:38:08.430 --> 00:38:09.672\nAnd there's the records, okay?\n\n732\n00:38:09.672 --> 00:38:14.489\nNow the neatest part about\nall this is that if I look,\n\n733\n00:38:14.489 --> 00:38:19.440\nI don't actually have\na lab.itpro.tv.dns file.\n\n734\n00:38:19.440 --> 00:38:21.360\nThe zone doesn't actually exist here.\n\n735\n00:38:21.360 --> 00:38:24.420\nI'm copying it from the master and\nI'm running it in my database.\n\n736\n00:38:24.420 --> 00:38:26.820\nIt actually does get tucked away in\na temporary folder somewhere but\n\n737\n00:38:26.820 --> 00:38:27.510\nit's just temporary.\n\n738\n00:38:27.510 --> 00:38:29.720\nIf I restart the service it's gonna go and\nretransfer it and\n\n739\n00:38:29.720 --> 00:38:30.520\nget it over here again right.\n\n740\n00:38:30.520 --> 00:38:32.390\nIt's all coming down from the master.\n\n741\n00:38:32.390 --> 00:38:33.900\nThose are temporary zones.\n\n742\n00:38:33.900 --> 00:38:36.790\nThere's a handful of\ncommands in nsd-control.\n\n743\n00:38:36.790 --> 00:38:38.530\nI know I'm way out of time here.\n\n744\n00:38:38.530 --> 00:38:41.500\nWhere you can do add zones and\ndelete zones, and\n\n745\n00:38:41.500 --> 00:38:45.290\nthose are all for temporary zones, ones\nthat aren't stored in your hard drive,\n\n746\n00:38:45.290 --> 00:38:47.250\nthings like replication\nthat we're setting up here.\n\n747\n00:38:47.250 --> 00:38:50.500\nBut most of them aren't terribly effective\nbecause these are really new commands that\n\n748\n00:38:50.500 --> 00:38:52.200\nare still being incorporated.\n\n749\n00:38:52.200 --> 00:38:56.720\nSo the way that I've done it is kinda\nthe traditional way of doing it.\n\n750\n00:38:56.720 --> 00:38:59.010\nThings like force transfer, well,\n\n751\n00:38:59.010 --> 00:39:01.500\nI was forcing a transfer just\nby restarting this service.\n\n752\n00:39:01.500 --> 00:39:03.360\nIf it's in production,\nobviously you wanna minimize that.\n\n753\n00:39:03.360 --> 00:39:06.660\nSo you can force transfer\ndifferent things, and\n\n754\n00:39:06.660 --> 00:39:09.450\nother activities right from here.\n\n755\n00:39:09.450 --> 00:39:13.760\nBut as far as I'm concerned,\nI'm now up and running, I've got my zone.\n\n756\n00:39:13.760 --> 00:39:14.660\nI'm a valid slave.\n\n757\n00:39:14.660 --> 00:39:17.570\nIt's gonna keep running,\nand that's it, we're done.\n\n758\n00:39:17.570 --> 00:39:19.410\nSo now we've got a replica, and\n\n759\n00:39:19.410 --> 00:39:24.172\nwe can setup continual more replicas,\nhowever we need, and we'll be in business.\n\n760\n00:39:24.172 --> 00:39:24.735\n&gt;&gt; All right,\n\n761\n00:39:24.735 --> 00:39:27.839\nDon, a lot of great information\ngetting that NSD server online.\n\n762\n00:39:27.839 --> 00:39:31.279\nYou've already mentioned it,\nwe're way out of time here, but\n\n763\n00:39:31.279 --> 00:39:34.276\nwe've always got some time for\nsome additional words or\n\n764\n00:39:34.276 --> 00:39:37.670\nmaybe considerations that you\nmight want to tell our viewers.\n\n765\n00:39:37.670 --> 00:39:40.534\n&gt;&gt; The main thing is I never did get\naround to setting security keys.\n\n766\n00:39:40.534 --> 00:39:43.297\nI was hoping to do that here in this\nepisode but remember what I said,\n\n767\n00:39:43.297 --> 00:39:46.510\nI just wanted to get it working first,\nand then we'd apply the security keys.\n\n768\n00:39:46.510 --> 00:39:49.090\nSo that's what I'm going to do next,\nand we're gonna do a part two on this.\n\n769\n00:39:49.090 --> 00:39:51.090\nIt might not be the longest\nepisode in the world but\n\n770\n00:39:51.090 --> 00:39:54.620\nall we need to do is get in there and\napply secure keys to these so\n\n771\n00:39:54.620 --> 00:39:56.750\nthat somebody can't come and\nperform a man in the middle attack.\n\n772\n00:39:56.750 --> 00:39:58.750\nIntercept the zone transfer,\nmodify some records,\n\n773\n00:39:58.750 --> 00:40:01.590\nchuck them in there,\nall of the sudden I've got poisoned DNS.\n\n774\n00:40:01.590 --> 00:40:04.805\nIt's surprisingly easy to pull off that\ntype of attack, so we need to try and\n\n775\n00:40:04.805 --> 00:40:05.367\nprevent it.\n\n776\n00:40:05.367 --> 00:40:09.330\nKeys on zone transfers is the way\nthat we're gonna fix that.\n\n777\n00:40:09.330 --> 00:40:11.270\nSo stay tuned for part two.\n\n778\n00:40:11.270 --> 00:40:13.130\nWe're gonna jump in and\nget a chance to see that.\n\n779\n00:40:13.130 --> 00:40:15.420\nAnd after that you'll\nhave a nice stable and\n\n780\n00:40:15.420 --> 00:40:19.060\nsecure master slave\nenvironment inside of NSD.\n\n781\n00:40:19.060 --> 00:40:19.643\nAll right, Don.\n\n782\n00:40:19.643 --> 00:40:22.870\nWell, thank you for all that knowledge and\nthank you to the viewer watching.\n\n783\n00:40:22.870 --> 00:40:23.980\nRemember, stick around.\n\n784\n00:40:23.980 --> 00:40:25.660\nWe do have a part two coming.\n\n785\n00:40:25.660 --> 00:40:28.660\nSigning off for ITProTV,\nI've been your host, Wes Bryan.\n\n786\n00:40:28.660 --> 00:40:29.300\n&gt;&gt; And I'm Don Pezet.\n\n787\n00:40:29.300 --> 00:40:29.819\n&gt;&gt; And we'll see you next time.\n\n788\n00:40:29.819 --> 00:40:37.914\n[MUSIC]\n\n789\n00:40:37.914 --> 00:40:40.010\n&gt;&gt; Thank you for watching ITProTV.\n\n",
          "vimeoId": "197958306"
        },
        {
          "description": "In this episode, Wes and Don continue their dive into NSD zone replication and concepts such as master (primary) and slave (secondary) zone. They demonstrate the process of configuring DNS zone replication on NSD",
          "length": "934",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-6-3-2-configuring_replication_in_nsd_pt2-121316-PGM.00_15_21_17.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-6-3-2-configuring_replication_in_nsd_pt2-121316-PGM.00_15_21_17.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-6-3-2-configuring_replication_in_nsd_pt2-121316-PGM.00_15_21_17.Still001-sm.jpg",
          "title": "Configuring Replication in NSD Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.210 --> 00:00:02.616\nWelcome to ITProTV,\nI'm your host, Don Pezet.\n\n2\n00:00:02.616 --> 00:00:06.104\n&gt;&gt; [CROSSTALK]\n\n3\n00:00:06.104 --> 00:00:08.453\n&gt;&gt; [MUSIC]\n\n4\n00:00:08.453 --> 00:00:12.140\n&gt;&gt; You're watching ITProTV.\n\n5\n00:00:12.140 --> 00:00:15.000\n&gt;&gt; Welcome back to another\ngreat episode here at ITProTV.\n\n6\n00:00:15.000 --> 00:00:15.940\nI'm your host, Wes Bryan,\n\n7\n00:00:15.940 --> 00:00:19.850\nand in today's episode we're\ncontinuing through our DNS tech skills.\n\n8\n00:00:19.850 --> 00:00:23.945\nWe're actually coming back with a part\ntwo on configuring replication in NBS.\n\n9\n00:00:23.945 --> 00:00:26.910\nJoining us back in the studios is\nnone other than Mr. Don Pezet.\n\n10\n00:00:26.910 --> 00:00:27.820\nDon, how you doing, sir?\n\n11\n00:00:27.820 --> 00:00:30.229\n&gt;&gt; I'm doing swell, Wes,\nready to dive back into NSD.\n\n12\n00:00:30.229 --> 00:00:30.841\nAnd in fact,\n\n13\n00:00:30.841 --> 00:00:34.820\nthis is part two to our last episode where\nwe were configuring replication, right?\n\n14\n00:00:34.820 --> 00:00:36.846\nWe set up a master slave model of NSD.\n\n15\n00:00:36.846 --> 00:00:39.880\nIf you haven't watched part one,\nyou definitely wanna check it out.\n\n16\n00:00:39.880 --> 00:00:40.800\nWe got everything running.\n\n17\n00:00:40.800 --> 00:00:44.380\nWe're replicating between the two, so we\nsuccessfully got the master slave model.\n\n18\n00:00:44.380 --> 00:00:48.350\nThe only thing is I didn't get\na chance to put security keys or\n\n19\n00:00:48.350 --> 00:00:50.500\nauthentication key on the replication.\n\n20\n00:00:50.500 --> 00:00:56.958\nSo as it stands now I'm replicating data\nbetween my server DNS3 and my server DNS4.\n\n21\n00:00:56.958 --> 00:01:01.982\nBut without authentication anybody\ncould intercept traffic in the middle,\n\n22\n00:01:01.982 --> 00:01:06.628\ndue to the man in the middle attack,\nmodify the zone file and send it on.\n\n23\n00:01:06.628 --> 00:01:08.973\nAnd the other side's gonna have no\nidea that it's been tampered with or\n\n24\n00:01:08.973 --> 00:01:10.930\nthat it's coming from\nan inappropriate source.\n\n25\n00:01:10.930 --> 00:01:14.880\nAnd that means they can poison my DNS\nrecords, that's not a good thing.\n\n26\n00:01:14.880 --> 00:01:19.460\nSo we need a little extra security,\nand for that we're going to use keys.\n\n27\n00:01:19.460 --> 00:01:24.630\nI'm gonna put keys on each of the settings\nthat lets the master talk to the slave\n\n28\n00:01:24.630 --> 00:01:27.710\nto ensure that we can validate\nthe identity of who's on the other side.\n\n29\n00:01:27.710 --> 00:01:30.450\nNow, MSD has this functionality built in.\n\n30\n00:01:30.450 --> 00:01:36.290\nIt actually uses its SHA-256 encrypted\nhashes that it exchanges between the two.\n\n31\n00:01:36.290 --> 00:01:40.070\nSo very secure method of communicating,\nand it's one of the reasons why a lot of\n\n32\n00:01:40.070 --> 00:01:44.100\npeople prefer MSD these days, cuz it's\ngot security built into it like that.\n\n33\n00:01:44.100 --> 00:01:48.470\nSo the hardest part about this\nis coming up with a key, right?\n\n34\n00:01:48.470 --> 00:01:50.520\nA lot of people will make up a key\nright off the top of their head.\n\n35\n00:01:50.520 --> 00:01:54.520\nWhich is actually not a good idea because\nhumans are horrible at being random.\n\n36\n00:01:54.520 --> 00:01:56.090\nComputers aren't so great at it either.\n\n37\n00:01:56.090 --> 00:01:58.300\nBut there's a few different\ntechniques we can generate for a key.\n\n38\n00:01:58.300 --> 00:02:01.430\nAnd there's one standard kinda method\nthat we see in the Linux world.\n\n39\n00:02:01.430 --> 00:02:04.210\nAs long as you have good entropy\non your system, you can use DD,\n\n40\n00:02:04.210 --> 00:02:08.220\nthe disc duplicator to take\nthe contents of your disk or\n\n41\n00:02:08.220 --> 00:02:14.760\ncontents of /dev/random and\ngenerate a key based on random data.\n\n42\n00:02:14.760 --> 00:02:18.290\nNow the random number generator\ninside of Linux is only as good\n\n43\n00:02:18.290 --> 00:02:20.550\nas the disk trail that you're running,\nand a lot of them have updates and\n\n44\n00:02:20.550 --> 00:02:21.900\nthings that have been pushed out.\n\n45\n00:02:21.900 --> 00:02:25.760\nSome systems have hardware random number\ngenerators, which are really awesome.\n\n46\n00:02:25.760 --> 00:02:27.934\nBut if you don't have that, you can\nat least make use of what you've got.\n\n47\n00:02:27.934 --> 00:02:32.316\nSo that's what I'm gonna do here, is I'm\ngonna generate as random a key as I can,\n\n48\n00:02:32.316 --> 00:02:34.742\nand I will use it on\nthese different systems.\n\n49\n00:02:34.742 --> 00:02:37.906\nRemember, if you've got 20 different\nslaves out there you could have 20\n\n50\n00:02:37.906 --> 00:02:40.291\ndifferent keys if you want,\nto keep it nice and granular,\n\n51\n00:02:40.291 --> 00:02:41.618\nor you can re-use the same key.\n\n52\n00:02:41.618 --> 00:02:42.787\nBut if the key gets compromised,\n\n53\n00:02:42.787 --> 00:02:46.752\nit's now compromised throughout the entire\nenvironment, so always be aware of that.\n\n54\n00:02:46.752 --> 00:02:50.000\nAll right, let me show you the way that\nI generate keys out there in the field.\n\n55\n00:02:50.000 --> 00:02:53.400\nSo if I need to get a key generated,\nI use the DD utility.\n\n56\n00:02:53.400 --> 00:02:57.490\nAnd I'm gonna do an interface,\nI'm sorry, an input file.\n\n57\n00:02:57.490 --> 00:02:58.725\nSo where am I getting my data from?\n\n58\n00:02:58.725 --> 00:03:02.219\nI'm gonna pull my data from /dev/random,\nright?\n\n59\n00:03:02.219 --> 00:03:05.255\n/dev/random is the random\nnumber generator for Linux.\n\n60\n00:03:05.255 --> 00:03:07.630\nSo I'm just calling that,\nand there's actually four or\n\n61\n00:03:07.630 --> 00:03:09.416\nfive different RNG's that are out there.\n\n62\n00:03:09.416 --> 00:03:12.450\nAnd depending on your distro, it can\nreference any number of different ones.\n\n63\n00:03:12.450 --> 00:03:16.800\nSo this is just kind of an alias that\npoints to whatever is your default.\n\n64\n00:03:16.800 --> 00:03:20.538\nAnd then I'm gonna do\nan output file of /dev,\n\n65\n00:03:20.538 --> 00:03:23.194\nI'm gonna say it right and spell it wrong.\n\n66\n00:03:23.194 --> 00:03:25.163\n/dev/stdout, right?\n\n67\n00:03:25.163 --> 00:03:26.897\nI wanna be able to see it on the screen.\n\n68\n00:03:26.897 --> 00:03:29.890\nSo I'm gonna get some data\nout of /tab/random and\n\n69\n00:03:29.890 --> 00:03:31.915\nI'm gonna output it to my screen.\n\n70\n00:03:31.915 --> 00:03:35.762\nAnd I'm gonna tell it just to do it\nonce and give me a block size of 32.\n\n71\n00:03:35.762 --> 00:03:38.665\nSo it's gonna give me,\nit won't be 32 bits, and\n\n72\n00:03:38.665 --> 00:03:43.540\nthen I'm going to render it as base 64,\nwhich is what I want my key to be in.\n\n73\n00:03:43.540 --> 00:03:47.950\nThis is gonna give me a nice\ngood random stream, right?\n\n74\n00:03:47.950 --> 00:03:49.345\nAnd so I can see that right here.\n\n75\n00:03:49.345 --> 00:03:52.969\n32 bytes were copied and here's my stream.\n\n76\n00:03:52.969 --> 00:03:55.520\nNow could I have thought\nof this on my own?\n\n77\n00:03:55.520 --> 00:03:58.850\nMaybe, but the odds are by the time I\ngot to the eighth or ninth character,\n\n78\n00:03:58.850 --> 00:04:02.397\nI'd start, you know, reusing things or\nI have a habit of just picking numbers\n\n79\n00:04:02.397 --> 00:04:04.578\nbetween one and five and\nthen higher than five.\n\n80\n00:04:04.578 --> 00:04:07.920\nI don't know why I do that, but I do.\n\n81\n00:04:07.920 --> 00:04:09.780\nBut that's a good random\nstream right there.\n\n82\n00:04:09.780 --> 00:04:14.680\nSo that's all I'm trying to is get\nsome random data that I didn't make.\n\n83\n00:04:14.680 --> 00:04:17.080\nAnd once I've got that I can\njust copy that to my clipboard.\n\n84\n00:04:17.080 --> 00:04:21.715\nAnd I'm gonna put that key on both\nsides of my replication, right?\n\n85\n00:04:21.715 --> 00:04:24.607\nI need both sides to have it, so\nthat I know that it's gonna work and\n\n86\n00:04:24.607 --> 00:04:26.860\nthat everything's gonna function.\n\n87\n00:04:26.860 --> 00:04:30.350\nSo I'm on DNS3 which is my master.\n\n88\n00:04:30.350 --> 00:04:37.413\nAnd so I'm gonna edit, /etc/nsd/nsd.conf.\n\n89\n00:04:37.413 --> 00:04:42.512\nAnd I'm gonna go all the way down to\nthe bottom where I define my zone and\n\n90\n00:04:42.512 --> 00:04:43.989\nmy pattern, okay?\n\n91\n00:04:43.989 --> 00:04:48.450\nIt was in the pattern that\nwe actually set the key.\n\n92\n00:04:48.450 --> 00:04:49.620\nAnd so when I configured this,\n\n93\n00:04:49.620 --> 00:04:53.360\nI did it with no key,\njust to get things done, right?\n\n94\n00:04:53.360 --> 00:04:56.350\nJust because I didn't want\nto have to mess with that.\n\n95\n00:04:56.350 --> 00:05:00.370\nSo what I'm gonna do now\nis actually add a key.\n\n96\n00:05:00.370 --> 00:05:02.520\nAnd so I'm gonna come up above this and\n\n97\n00:05:02.520 --> 00:05:06.980\nI'm gonna add another line,\nkey, and I'll give it a name.\n\n98\n00:05:06.980 --> 00:05:11.380\nAnd I'm gonna name this key, this is what\nI do, you can name it whatever you want,\n\n99\n00:05:11.380 --> 00:05:15.390\nbut I like to name it based on\nthe servers that are gonna use it.\n\n100\n00:05:15.390 --> 00:05:18.611\nThis is the key I'm using for\nDNS3 to DNS4.\n\n101\n00:05:18.611 --> 00:05:21.810\nI might have other ones that connect to\ndifferent systems, but this is the one for\n\n102\n00:05:21.810 --> 00:05:22.700\nDNS3 to DNS4.\n\n103\n00:05:22.700 --> 00:05:24.640\nThat's gonna be the name of my key.\n\n104\n00:05:24.640 --> 00:05:31.350\nThen I can say the algorithm that I wanna\nuse, and I'm gonna use hmac-sha256.\n\n105\n00:05:31.350 --> 00:05:34.552\nRight, that's a pretty good algorithm for\nme.\n\n106\n00:05:34.552 --> 00:05:36.480\nIt will give me the level\nof security that I need.\n\n107\n00:05:36.480 --> 00:05:41.737\nAnd then I'll say, secret, and then,\nhere is where I paste in my key.\n\n108\n00:05:41.737 --> 00:05:46.306\nSo there's my key,\nright there, layout, all right?\n\n109\n00:05:46.306 --> 00:05:48.560\nSo now that I've got that in place,\n\n110\n00:05:48.560 --> 00:05:52.530\nI've got a key,\neverywhere down here that I say NOKEY?\n\n111\n00:05:52.530 --> 00:05:54.980\nInstead of saying NOKEY,\nI can now provide a key name.\n\n112\n00:05:54.980 --> 00:05:56.650\nSo I can delete NOKEY and\n\n113\n00:05:56.650 --> 00:06:02.380\nI can put dns3-dns4 and same thing\non this next line, dns3-dns4 right?\n\n114\n00:06:04.460 --> 00:06:08.955\nSo now when I provide a transfer,\nor when I send a notification,\n\n115\n00:06:08.955 --> 00:06:14.801\nI'm gonna send this hash to authenticate\nmyself and authenticate the other side.\n\n116\n00:06:14.801 --> 00:06:17.410\nAnd if they don't match,\nit's going to fail, right?\n\n117\n00:06:17.410 --> 00:06:22.100\nSo now I've got that setup right here\nwith something that I know is random,\n\n118\n00:06:22.100 --> 00:06:24.170\nat least, as good as I'm gonna get, right?\n\n119\n00:06:24.170 --> 00:06:26.260\nSo that's the key setup right here.\n\n120\n00:06:26.260 --> 00:06:29.910\nNow the key isn't gonna take\neffect until I load that.\n\n121\n00:06:29.910 --> 00:06:32.520\nSo I'm gonna, well,\nI've learned my lesson, right,\n\n122\n00:06:32.520 --> 00:06:38.262\nI'm gonna do an nsd-control,\nsorry, nsd-checkconf\n\n123\n00:06:38.262 --> 00:06:44.260\n/etc/nsd/nsd.conf, so I wanna make\nsure I didn't get any errors, right?\n\n124\n00:06:44.260 --> 00:06:51.067\nAnd then I will do a nsd-control\nreconfig so that we reload it.\n\n125\n00:06:51.067 --> 00:06:54.280\nAll right, so now I'm expecting those\nkeys when I reach out to the other side.\n\n126\n00:06:56.170 --> 00:06:59.990\nOn the other side,\nmy replication should be failing.\n\n127\n00:06:59.990 --> 00:07:02.132\nI might not see that,\nright, on the other side.\n\n128\n00:07:02.132 --> 00:07:04.790\nOn DNS4, if it tries to\nreplicate right now it's gonna\n\n129\n00:07:04.790 --> 00:07:07.001\nfail cuz I don't have keys over here,\nright?\n\n130\n00:07:07.001 --> 00:07:08.143\nBut I might not see that.\n\n131\n00:07:08.143 --> 00:07:12.312\nIf you do an nsd-control zone status and\n\n132\n00:07:12.312 --> 00:07:17.346\nI pull it up for that zone,\neverything's okay.\n\n133\n00:07:17.346 --> 00:07:18.757\nWell, it's failing but\n\n134\n00:07:18.757 --> 00:07:22.460\nit had good ones in the past which\nis holding onto ones in the past.\n\n135\n00:07:22.460 --> 00:07:24.904\nEventually I'll hit the expiration for\nthat zone.\n\n136\n00:07:24.904 --> 00:07:28.211\nI think I set my expiration\nto 86,400 seconds.\n\n137\n00:07:28.211 --> 00:07:31.190\nSo after that time it will expire and\nthen I'll have a problem, but\n\n138\n00:07:31.190 --> 00:07:32.638\nin the short term, I'm not gonna see it.\n\n139\n00:07:32.638 --> 00:07:34.040\nIf I wanna see the problem,\n\n140\n00:07:34.040 --> 00:07:36.220\nprobably the easiest thing to\ndo is just restart the thing.\n\n141\n00:07:36.220 --> 00:07:41.170\nSo if I do a systemctl\nrestart nsd.service,\n\n142\n00:07:41.170 --> 00:07:44.320\nit's gonna restart, and\nthat's gonna dump what I've cached, and\n\n143\n00:07:44.320 --> 00:07:46.950\nthen it's gonna try and\nretransfer it down.\n\n144\n00:07:46.950 --> 00:07:50.490\nAnd so now when I look,\nmy state's refreshing.\n\n145\n00:07:50.490 --> 00:07:52.340\nAnd it's failing, right?\n\n146\n00:07:52.340 --> 00:07:58.860\nIf I look in /var/log/nsd.log,\nI can see my transfer is failing, right?\n\n147\n00:07:58.860 --> 00:08:02.090\nI can see that I've received an error\ncode refused from the server,\n\n148\n00:08:02.090 --> 00:08:03.880\nit's not getting through, right?\n\n149\n00:08:03.880 --> 00:08:06.618\nAnd if I jump back over to the other\nserver, I should be seeing some errors,\n\n150\n00:08:06.618 --> 00:08:07.314\nwell, actually,\n\n151\n00:08:07.314 --> 00:08:10.463\nI probably won't see the errors here cuz\nit's just gonna refuse the stuff outright?\n\n152\n00:08:10.463 --> 00:08:11.715\nBut we can look.\n\n153\n00:08:11.715 --> 00:08:17.915\nIf I look at /var/log/nsd.log, let's see.\n\n154\n00:08:17.915 --> 00:08:20.712\nWe've got warning signals received,\nthat's just a restart, yeah.\n\n155\n00:08:20.712 --> 00:08:22.718\nSo no crazy errors to be found in here.\n\n156\n00:08:22.718 --> 00:08:26.480\nMaybe in the assist log.\n\n157\n00:08:28.170 --> 00:08:29.340\nNope, nothing there either.\n\n158\n00:08:29.340 --> 00:08:31.640\nSo everything's looking fine on this side.\n\n159\n00:08:31.640 --> 00:08:32.650\nBecause we're sending a key.\n\n160\n00:08:32.650 --> 00:08:34.990\nThe other side doesn't match,\nwhat do we care, right?\n\n161\n00:08:34.990 --> 00:08:37.220\nWe're the master, so\nI don't care if they work or not.\n\n162\n00:08:37.220 --> 00:08:38.830\nSo that's what we're seeing right now.\n\n163\n00:08:38.830 --> 00:08:43.820\nSo what I need to do now is I need to go\nand add the key to the other side, right?\n\n164\n00:08:43.820 --> 00:08:49.540\nSo I'm gonna go ahead and\nedit, /etc/nsd/nsd.com.\n\n165\n00:08:49.540 --> 00:08:52.340\nI'm gonna jump all the way\ndown to the bottom.\n\n166\n00:08:52.340 --> 00:08:56.200\nAnd I'm gonna define the exact same key,\nit needs to match.\n\n167\n00:08:56.200 --> 00:08:57.590\nIf it doesn't match,\nit's not gonna work, right?\n\n168\n00:08:57.590 --> 00:08:59.040\nSo that's kind of important.\n\n169\n00:08:59.040 --> 00:09:00.490\nSo I'm gonna give it a name.\n\n170\n00:09:00.490 --> 00:09:02.430\nAnd the name doesn't\nactually have to match.\n\n171\n00:09:02.430 --> 00:09:03.950\nThe name can be whatever you want, right?\n\n172\n00:09:03.950 --> 00:09:05.090\nThe key is what has to match.\n\n173\n00:09:05.090 --> 00:09:07.660\nBut I'm gonna stick with\nthe same name because again\n\n174\n00:09:07.660 --> 00:09:09.760\nthat's what I do to make it\neasier to troubleshoot stuff.\n\n175\n00:09:09.760 --> 00:09:15.980\nSo I'm gonna call this dns3-dns4,\ncuz that's the name I want for my key.\n\n176\n00:09:15.980 --> 00:09:21.120\nI want my algorithm to be hmac-sha256,\n\n177\n00:09:21.120 --> 00:09:26.194\nwhich absolutely has to match,\ntoo many dashes.\n\n178\n00:09:26.194 --> 00:09:34.880\nHmac-sha256, and then from there I need\nto do secret, and then what my secret is.\n\n179\n00:09:34.880 --> 00:09:37.071\nAnd I'm just gonna paste it right\ninto the same as the other side, so\n\n180\n00:09:37.071 --> 00:09:37.889\nthey both have the same.\n\n181\n00:09:37.889 --> 00:09:41.880\nIt's a preshared key that we're using,\nand it's got it in place.\n\n182\n00:09:41.880 --> 00:09:45.380\nAnd now I can go down here and\ntake anywhere where I've got NOKEY and\n\n183\n00:09:45.380 --> 00:09:48.460\nchange that to the right values.\n\n184\n00:09:51.230 --> 00:09:54.190\nAll right, and\nnow that I've got that in place,\n\n185\n00:09:54.190 --> 00:09:56.770\nI'm set to use that key when\nI talk to the other side.\n\n186\n00:09:56.770 --> 00:10:00.180\nWhen I get a notification, I'll allow the\nnotification, assuming the key matches,\n\n187\n00:10:00.180 --> 00:10:01.690\nand same thing when requesting a transfer.\n\n188\n00:10:01.690 --> 00:10:03.290\nI'll request it with this key.\n\n189\n00:10:03.290 --> 00:10:06.299\n&gt;&gt; Now in the first part of that where you\nsaid the key, you said the name doesn't\n\n190\n00:10:06.299 --> 00:10:09.660\nmatter, but when you call on it in pattern\nat that point the name does matter, right?\n\n191\n00:10:09.660 --> 00:10:11.480\n&gt;&gt; Sure, yeah, within the file it matters.\n\n192\n00:10:11.480 --> 00:10:15.717\nBut what I meant was I might have called\nthe key Fred on the other server and\n\n193\n00:10:15.717 --> 00:10:17.790\non this server I called it Bob.\n\n194\n00:10:17.790 --> 00:10:18.385\n&gt;&gt; Okay.\n&gt;&gt; And\n\n195\n00:10:18.385 --> 00:10:20.651\nthat's okay,\ncuz they don't exchange names.\n\n196\n00:10:20.651 --> 00:10:21.500\nBut you're absolutely right.\n\n197\n00:10:21.500 --> 00:10:22.330\nRight here in the file,\n\n198\n00:10:22.330 --> 00:10:25.840\nwhen I define it in the key,\nthat's gotta match what I do right here.\n\n199\n00:10:25.840 --> 00:10:27.030\nThat absolutely has to match.\n\n200\n00:10:27.030 --> 00:10:30.480\nBut I could use different names,\nlike on here I might call it dns4-dns3.\n\n201\n00:10:30.480 --> 00:10:33.430\nBut for me that gets confusing,\nI like to use the same\n\n202\n00:10:33.430 --> 00:10:36.730\nkey name across the different servers so I\ncan remember what the heck it was, right?\n\n203\n00:10:36.730 --> 00:10:39.580\nThe key's the same, might as well make\nthe name the same, and there you go,\n\n204\n00:10:39.580 --> 00:10:40.790\nall right?\n\n205\n00:10:40.790 --> 00:10:43.394\nSo now that I've got that\nin place I can get out,\n\n206\n00:10:43.394 --> 00:10:45.428\nassuming that I didn't screw it up.\n\n207\n00:10:45.428 --> 00:10:51.238\nWe can do a quick check config,\n/etc/nsd/nsd.com,\n\n208\n00:10:51.238 --> 00:10:55.239\nand it at least thinks that it's okay.\n\n209\n00:10:55.239 --> 00:11:01.230\nAnd then we can do an nsd-control,\nreconfig, all right?\n\n210\n00:11:01.230 --> 00:11:02.110\nSo it's gonna reload.\n\n211\n00:11:03.280 --> 00:11:04.010\nI didn't get any errors.\n\n212\n00:11:04.010 --> 00:11:04.977\nThat's good, right?\n\n213\n00:11:04.977 --> 00:11:06.871\nBut I didn't get any errors last time.\n\n214\n00:11:06.871 --> 00:11:09.100\nIt just tried to replicate and\nfailed a bunch.\n\n215\n00:11:09.100 --> 00:11:12.010\nAnd so, how do I know if it worked?\n\n216\n00:11:12.010 --> 00:11:15.860\nWell, the easiest way is to pull up\nthe zone status, and see what I get.\n\n217\n00:11:15.860 --> 00:11:18.970\nIf I have refreshing,\nthat means I haven't synced.\n\n218\n00:11:18.970 --> 00:11:20.720\nI haven't gotten it yet, okay?\n\n219\n00:11:20.720 --> 00:11:23.990\nWell, I've seen this before where\nsometimes it takes a little while or\n\n220\n00:11:23.990 --> 00:11:25.420\nit doesn't quite sync up.\n\n221\n00:11:25.420 --> 00:11:27.350\nThat can cause a problem.\n\n222\n00:11:27.350 --> 00:11:30.400\nAlso sometimes you just have to wait.\n\n223\n00:11:30.400 --> 00:11:31.490\nSometimes you get inpatient.\n\n224\n00:11:31.490 --> 00:11:32.720\nI know I do.\n\n225\n00:11:32.720 --> 00:11:37.720\nThe other thing is it's possible\nthat one side hasn't taken the key\n\n226\n00:11:37.720 --> 00:11:38.970\nversus the other side.\n\n227\n00:11:38.970 --> 00:11:45.285\nSo worst case scenario, you can always\ndo a systemctl restart and restart nsd.\n\n228\n00:11:45.285 --> 00:11:48.890\nI did a reconfig, which should load the\nkey, but if I already have an established\n\n229\n00:11:48.890 --> 00:11:52.860\nsession that's failed too many times,\nI might not restart that session.\n\n230\n00:11:52.860 --> 00:11:56.880\nI do generally like to restart\nthe master first if I'm gonna do that.\n\n231\n00:11:56.880 --> 00:12:01.460\nSo if I wanna restart nsd, I can\nrestart it over here and I can jump and\n\n232\n00:12:01.460 --> 00:12:02.542\nrestart it over here.\n\n233\n00:12:02.542 --> 00:12:05.730\nAnd so that's gonna kick it off and\ntell it to reach out and talk again, and\n\n234\n00:12:05.730 --> 00:12:12.880\nthen I can monitor/var/log/nsd.log and\nsee if it works, right?\n\n235\n00:12:12.880 --> 00:12:16.850\nAnd, look at that, I got a sync, right?\n\n236\n00:12:16.850 --> 00:12:21.880\nAnd so if I do a nsd-control zonestatus\nI can see I'm working, right?\n\n237\n00:12:21.880 --> 00:12:25.060\nSo don't panic and go and\nstart editing your conf file or\n\n238\n00:12:25.060 --> 00:12:26.800\nwhatever, sometimes it\njust needs to restart.\n\n239\n00:12:26.800 --> 00:12:30.080\nAnd normally it's because you did what I\ndid, you let it sit there too long and\n\n240\n00:12:30.080 --> 00:12:31.310\nfail too many times.\n\n241\n00:12:31.310 --> 00:12:33.260\nIt'll fail enough times and it'll stop and\n\n242\n00:12:33.260 --> 00:12:36.060\nit won't retry until your\nretry interval is up.\n\n243\n00:12:36.060 --> 00:12:40.502\nMy retry interval was 7,200\nseconds when I defined this zone.\n\n244\n00:12:40.502 --> 00:12:42.280\nI don't actually know\nwhat that is in minutes.\n\n245\n00:12:42.280 --> 00:12:43.820\nIt's like an hour, isn't it?\n\n246\n00:12:43.820 --> 00:12:44.863\n&gt;&gt; I don't know off the top of my head.\n\n247\n00:12:44.863 --> 00:12:47.240\n[LAUGH]\n&gt;&gt; So if we made a really long episode,\n\n248\n00:12:47.240 --> 00:12:49.550\neventually it would have sorted\nitself out, but I'm impatient.\n\n249\n00:12:49.550 --> 00:12:51.740\nSo I just restart NSD, problem solved.\n\n250\n00:12:51.740 --> 00:12:56.010\nNow I did restart my master, which could\ncause a micro-outage on the network.\n\n251\n00:12:56.010 --> 00:12:58.760\nYou might not wanna do that, but if you're\njust trying to force this in place,\n\n252\n00:12:58.760 --> 00:12:59.700\nthat's one way to do it.\n\n253\n00:12:59.700 --> 00:13:01.260\nI could have forced a transfer also.\n\n254\n00:13:01.260 --> 00:13:03.620\nI guess that's another way to go about it,\nbut this took care of it.\n\n255\n00:13:03.620 --> 00:13:04.920\nSo now I'm transferring, and\n\n256\n00:13:04.920 --> 00:13:08.450\nmore importantly,\nI'm transferring with authentication.\n\n257\n00:13:08.450 --> 00:13:09.790\nI'm handing off that key.\n\n258\n00:13:09.790 --> 00:13:13.210\nAnd if somebody man in the middles this,\nand they modify the zone and\n\n259\n00:13:13.210 --> 00:13:16.700\nsend it along,\nthe hash isn't gonna match anymore.\n\n260\n00:13:16.700 --> 00:13:20.620\nWhen we rehash that zone file,\nit doesn't match, I'll reject it.\n\n261\n00:13:20.620 --> 00:13:23.100\nSo now you can't tamper with my transfers.\n\n262\n00:13:23.100 --> 00:13:25.880\nYou can still intercept them and\nread them, they're not encrypted, right?\n\n263\n00:13:25.880 --> 00:13:29.260\nBut they're digitally signed,\nso you can't modify them.\n\n264\n00:13:29.260 --> 00:13:31.760\nAnd that effectively kills\noff the man in the middle.\n\n265\n00:13:31.760 --> 00:13:36.420\nRemember, we don't need to encrypt because\nit's not private data, it's DNS data.\n\n266\n00:13:36.420 --> 00:13:38.820\nPeople can do the look ups and\nget the information.\n\n267\n00:13:38.820 --> 00:13:42.530\nIf you insist on encrypting it, you can\ndo an IP set tunnel or whatever between\n\n268\n00:13:42.530 --> 00:13:46.550\nthe servers, an SSH tunnel, even, will\nwork just fine for encrypting the data.\n\n269\n00:13:46.550 --> 00:13:49.460\nBut a digital signature is what's\nimportant and that's what those keys do.\n\n270\n00:13:49.460 --> 00:13:52.930\nNow you should do key rotation,\nevery so often go and change it, right?\n\n271\n00:13:52.930 --> 00:13:57.250\nSha256 is pretty strong, but it can be\nbroken if you give somebody enough time.\n\n272\n00:13:57.250 --> 00:13:59.500\nYou give them a year,\ntwo years, they can break it.\n\n273\n00:13:59.500 --> 00:14:03.060\nSo if we rotate every three months,\nwe don't have to worry about.\n\n274\n00:14:03.060 --> 00:14:05.990\nSo every three months, just go in there\nand change the key, rotate them out.\n\n275\n00:14:05.990 --> 00:14:09.750\nYou can define more than one key, and so\nall you're doing is changing which key you\n\n276\n00:14:09.750 --> 00:14:12.270\ncall in the zone and\nthen you've got it, right.\n\n277\n00:14:12.270 --> 00:14:16.452\nSo easy enough to do, but now we've got to\nsecure authentication, secure replication,\n\n278\n00:14:16.452 --> 00:14:17.340\nand we're set up.\n\n279\n00:14:17.340 --> 00:14:19.800\nWe've got a nice, secure,\nand stable master and\n\n280\n00:14:19.800 --> 00:14:23.060\nslave replicated environment in an NSD.\n\n281\n00:14:23.060 --> 00:14:23.680\n&gt;&gt; Don, thank you for\n\n282\n00:14:23.680 --> 00:14:27.950\ntaking the time to at least let us\nsee how to secure that NDS server.\n\n283\n00:14:27.950 --> 00:14:31.577\nNow, does look like we're coming to\nthe end of this episode, but before we do,\n\n284\n00:14:31.577 --> 00:14:34.827\ndo you have any additional advice\nyou'd like to let somebody know about\n\n285\n00:14:34.827 --> 00:14:36.963\nmaybe securing or\nreally just NDS in general?\n\n286\n00:14:36.963 --> 00:14:37.976\n&gt;&gt; NSD.\n\n287\n00:14:37.976 --> 00:14:39.350\n&gt;&gt; NSD, very good, very good.\n\n288\n00:14:39.350 --> 00:14:40.870\n&gt;&gt; [LAUGH]\n&gt;&gt; And\n\n289\n00:14:40.870 --> 00:14:44.310\nthe other thing is we didn't\ntouch on DNS sec, right?\n\n290\n00:14:44.310 --> 00:14:47.750\nSo what I did right there is\nI secured zone transfers.\n\n291\n00:14:47.750 --> 00:14:51.880\nI didn't do anything to help clients\nvalidate that my records are valid.\n\n292\n00:14:51.880 --> 00:14:54.300\nSo I'm still vulnerable there,\nso we wanna do DNS sec.\n\n293\n00:14:54.300 --> 00:14:57.350\nStay tuned, cuz we're gonna have\nan episode on configuring DNS sec and\n\n294\n00:14:57.350 --> 00:14:58.250\ngetting that put in place.\n\n295\n00:14:58.250 --> 00:15:01.310\nYou definitely wanna be implementing\nthat on your DNS servers these days.\n\n296\n00:15:01.310 --> 00:15:03.800\nAbsolutely something to tackle so\nbe sure to check that out.\n\n297\n00:15:03.800 --> 00:15:08.820\nBut this is the first step, DNS is\nthe second step, you put them together and\n\n298\n00:15:08.820 --> 00:15:09.970\nnow we're in business.\n\n299\n00:15:09.970 --> 00:15:12.490\n&gt;&gt; Don, we appreciate you taking\nthe time to stop by the studios and\n\n300\n00:15:12.490 --> 00:15:16.440\nshow us that information, and we certainly\nappreciate you, the viewers, watching.\n\n301\n00:15:16.440 --> 00:15:19.488\nSigning out for ITProTV,\nI've been your host, Wes Bryan.\n\n302\n00:15:19.488 --> 00:15:20.341\n&gt;&gt; And I'm Don Pezet.\n\n303\n00:15:20.341 --> 00:15:22.961\n&gt;&gt; And we'll see you next time.\n\n304\n00:15:22.961 --> 00:15:29.105\n[MUSIC]\n\n305\n00:15:29.105 --> 00:15:32.170\nThank you for watching ITProTV.\n\n",
          "vimeoId": "196629486"
        }
      ],
      "title": "Zone Replication"
    },
    {
      "episodes": [
        {
          "description": "In this episode, Wes and Don examine how to get a DNS server up and running on an installation of Windows Server. They look at the basic installation and talk about DNS concepts.",
          "length": "1999",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-7-1-installing_microsoft_dns-121616-PGM.00_33_05_24.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-7-1-installing_microsoft_dns-121616-PGM.00_33_05_24.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-7-1-installing_microsoft_dns-121616-PGM.00_33_05_24.Still001-sm.jpg",
          "title": "Installing Microsoft DNS",
          "transcript": "WEBVTT\n\n1\n00:00:00.008 --> 00:00:01.180\nWelcome in ITPRO.TV.\n\n2\n00:00:01.180 --> 00:00:06.417\n[CROSSTALK]\n\n3\n00:00:06.417 --> 00:00:08.234\n[MUSIC]\n\n4\n00:00:08.234 --> 00:00:09.899\nYou're watching ITPro.TV.\n\n5\n00:00:09.899 --> 00:00:14.385\n&gt;&gt; Welcome to another great\nepisode here at ITPro.TV.\n\n6\n00:00:14.385 --> 00:00:15.765\nI'm your host, Wes Bryan.\n\n7\n00:00:15.765 --> 00:00:16.995\nAnd in today's episode,\n\n8\n00:00:16.995 --> 00:00:21.835\nwe're coming back at you with more of that\nfun series that is the DNS tech skills.\n\n9\n00:00:21.835 --> 00:00:24.565\nJoining us back in the studios today\nis none other than Mr. Don Pezet.\n\n10\n00:00:24.565 --> 00:00:25.615\nDon, how are you doing, sir?\n\n11\n00:00:25.615 --> 00:00:26.495\n&gt;&gt; I'm doing great, Wes.\n\n12\n00:00:26.495 --> 00:00:28.705\nReady to dive right back\ninto the world of DNS.\n\n13\n00:00:28.705 --> 00:00:30.445\nAnd somewhat nervous\nabout today's episode,\n\n14\n00:00:30.445 --> 00:00:32.937\nbecause we're jumping into\na controversial subject.\n\n15\n00:00:32.937 --> 00:00:36.650\nWe're gonna be taking a look\nat Microsoft's DNS server.\n\n16\n00:00:36.650 --> 00:00:37.860\nAnd I play it up a bit.\n\n17\n00:00:37.860 --> 00:00:39.260\nIt's not all that controversial.\n\n18\n00:00:39.260 --> 00:00:41.370\nBut if you're a hardcore\nDNS guy out there,\n\n19\n00:00:41.370 --> 00:00:43.300\nyou probably already hit\nthe stop button on the video.\n\n20\n00:00:43.300 --> 00:00:44.870\nSo I guess I don't have\nto worry about you.\n\n21\n00:00:44.870 --> 00:00:47.840\nOut on the internet,\nthe public DNS servers.\n\n22\n00:00:47.840 --> 00:00:49.720\nThey're not gonna be\nMicrosoft DNS servers.\n\n23\n00:00:49.720 --> 00:00:53.800\nThey're going to be Linux\nbased almost always.\n\n24\n00:00:53.800 --> 00:00:57.120\nWe see a lot of VSD based, right but\nit's some kind of Unix system and\n\n25\n00:00:57.120 --> 00:01:01.070\nthey're typically going to be buying and\nNSD, maybe power DNS.\n\n26\n00:01:01.070 --> 00:01:05.130\nThose guys are pretty much the ones that\ncover the whole environment out there.\n\n27\n00:01:05.130 --> 00:01:08.650\nBut, once you get into a corporate or\nenterprise network,\n\n28\n00:01:08.650 --> 00:01:12.570\nwhen you get into a business network\nthat's dealing with internal zones,\n\n29\n00:01:12.570 --> 00:01:14.930\nMicrosoft DNS is actually\none of the most common.\n\n30\n00:01:14.930 --> 00:01:18.160\nSo while we might not see it out\nthere on the internet all that much.\n\n31\n00:01:18.160 --> 00:01:20.090\nI mean, you do, but just not that much.\n\n32\n00:01:20.090 --> 00:01:23.590\nOn an internal business network,\nyou see it all over the place.\n\n33\n00:01:23.590 --> 00:01:27.945\nAnd one of the big reasons for that is\nthe Microsoft Active Directory, right?\n\n34\n00:01:27.945 --> 00:01:32.680\nIn Windows Windows 2000,\nI guess is when it all really started.\n\n35\n00:01:32.680 --> 00:01:34.930\nThey set it where the machines\ncould use DNS to find records and\n\n36\n00:01:34.930 --> 00:01:38.000\nMicrosoft spun up their own DNS\nserver to be able to handle that.\n\n37\n00:01:38.000 --> 00:01:40.260\nNow, the DNS server\nactually works really well.\n\n38\n00:01:40.260 --> 00:01:41.200\nIt's a good product.\n\n39\n00:01:41.200 --> 00:01:44.540\nIf you're an all Microsoft shop or\neven you just have some Microsoft systems,\n\n40\n00:01:44.540 --> 00:01:48.240\nthe odds are you do, then it's a great\nway serve up DNS in your environment.\n\n41\n00:01:48.240 --> 00:01:52.050\nAnd, unlike a lot of the other products\nthat we go over in this series,\n\n42\n00:01:52.050 --> 00:01:55.090\nit was built with a GUI\nfrom the very beginning.\n\n43\n00:01:55.090 --> 00:01:57.770\nSo, it's got a nice graphical user\ninterface that makes it easy to work with\n\n44\n00:01:57.770 --> 00:02:00.220\nthe product and see how things\nfunction and interact with it.\n\n45\n00:02:00.220 --> 00:02:03.530\nSo, in this episode we're gonna get\nstarted with getting it installed.\n\n46\n00:02:03.530 --> 00:02:05.180\nWe're going to fire up that DNS roll,\n\n47\n00:02:05.180 --> 00:02:10.190\nget it in place and see what it takes to\nrun a DNS server on a Microsoft System.\n\n48\n00:02:10.190 --> 00:02:11.340\nSo, let's get things started.\n\n49\n00:02:11.340 --> 00:02:15.040\nNow I'm gonna be using Windows server\n2016, which is the latest edition.\n\n50\n00:02:15.040 --> 00:02:20.340\nBut everything we do here is\nthe same in Windows server 2012 and\n\n51\n00:02:20.340 --> 00:02:21.270\nin Windows server 2008.\n\n52\n00:02:21.270 --> 00:02:24.140\nSo it actually hasn't\nchanged in a long time.\n\n53\n00:02:24.140 --> 00:02:25.660\nThey've added some new features to it, but\n\n54\n00:02:25.660 --> 00:02:27.740\nthe process of getting it\ninstalled is the same.\n\n55\n00:02:27.740 --> 00:02:29.680\nSo, I'm gonna kick off by\ngetting this installed.\n\n56\n00:02:29.680 --> 00:02:32.940\nAnd the first thing I need to do is\nI need to get into my server manager.\n\n57\n00:02:32.940 --> 00:02:34.490\nNow I guess this one's\na little bit different.\n\n58\n00:02:34.490 --> 00:02:36.800\nIn Server 2012 and in Server 2016,\n\n59\n00:02:36.800 --> 00:02:40.660\nthe Server Manager's right here\nunder our modern start menu.\n\n60\n00:02:40.660 --> 00:02:44.850\nBut in 2008, it was just a button\ndown here in the task bar, right?\n\n61\n00:02:44.850 --> 00:02:47.280\nSo either way, the icon's still the same.\n\n62\n00:02:47.280 --> 00:02:48.260\nThis is what we wanna run.\n\n63\n00:02:48.260 --> 00:02:49.950\nWe wanna get into that Server Manager.\n\n64\n00:02:49.950 --> 00:02:52.600\nAnd the reason we need to get\ninto the Server Manager is that,\n\n65\n00:02:52.600 --> 00:02:54.680\nMicrosoft servers use\nwhat are called roles.\n\n66\n00:02:54.680 --> 00:02:58.060\nAnd roles are like particular\nactivities a server can provide.\n\n67\n00:02:58.060 --> 00:03:01.450\nWell, they have a role defined for\nbeing a DNS server.\n\n68\n00:03:01.450 --> 00:03:04.530\nSo if I want this system to\nbe a DNS server, I can do it,\n\n69\n00:03:04.530 --> 00:03:06.790\nand In typical Microsoft fashion.\n\n70\n00:03:06.790 --> 00:03:09.190\nI've got some kind of service error\non this brand new service, so\n\n71\n00:03:09.190 --> 00:03:10.280\nwe'll ignore that.\n\n72\n00:03:10.280 --> 00:03:13.250\nI'm certain that won't be an issue,\nand we'll go in here and\n\n73\n00:03:13.250 --> 00:03:14.900\nwe'll add in our DNS server.\n\n74\n00:03:14.900 --> 00:03:18.130\nSo I need to switch over to my local\nservice, so it starts you off on\n\n75\n00:03:18.130 --> 00:03:20.950\na little dashboard, which isn't\nreally gonna help me all that much.\n\n76\n00:03:20.950 --> 00:03:23.380\nI mean, I can add roles and\nfeatures right here.\n\n77\n00:03:23.380 --> 00:03:26.350\nBut I like to make that I'm connected\nto the right server, cuz you can run\n\n78\n00:03:26.350 --> 00:03:28.980\nthe Server Manager remotely,\nit might be connected in the wrong system.\n\n79\n00:03:28.980 --> 00:03:30.820\nSo I'm gonna go ahead and\nchoose local server and\n\n80\n00:03:30.820 --> 00:03:33.630\nmake sure that I am actually\nlooking at my system, right?\n\n81\n00:03:33.630 --> 00:03:37.950\nSo this is system is called DNS1,\nit's Window Server 2016.\n\n82\n00:03:37.950 --> 00:03:40.888\nI actually just did a span\nof an AWS instance, so\n\n83\n00:03:40.888 --> 00:03:43.990\nit's a default in Windows Server 2016.\n\n84\n00:03:43.990 --> 00:03:47.680\nI haven't installed any other software\non it, it's just, it got a name,\n\n85\n00:03:47.680 --> 00:03:52.050\nit got an IP address and it got remote\ndesktop turned on and that's about it.\n\n86\n00:03:52.050 --> 00:03:55.720\nNow up top, I've got manage and\n\n87\n00:03:55.720 --> 00:03:59.490\nunder the manage menu,\nyou'll see add roles and features, right?\n\n88\n00:03:59.490 --> 00:04:01.730\nJust like we saw in that dashboard before.\n\n89\n00:04:01.730 --> 00:04:02.850\nWhy is it in two places?\n\n90\n00:04:02.850 --> 00:04:05.243\nWell, on the dashboard,\nI can go into it and\n\n91\n00:04:05.243 --> 00:04:08.691\nI can choose to add the DNS role\nto more than one server, right?\n\n92\n00:04:08.691 --> 00:04:10.319\nIf you wanna have redundant DNS servers,\n\n93\n00:04:10.319 --> 00:04:13.750\nyou're gonna have to bring up at\nleast two, maybe you want more.\n\n94\n00:04:13.750 --> 00:04:15.610\nWell, by going through the dashboard,\n\n95\n00:04:15.610 --> 00:04:17.390\nI can pick a bunch of different servers,\nright?\n\n96\n00:04:17.390 --> 00:04:18.430\nYou can actually do it from here too.\n\n97\n00:04:18.430 --> 00:04:22.190\nWhen I choose add roles and features,\nit's gonna default to my server,\n\n98\n00:04:22.190 --> 00:04:24.090\nwhich was kind of the whole\npoint of me doing that.\n\n99\n00:04:24.090 --> 00:04:27.150\nBut it'll still let me pick other\nservers if I wanna go crazy and\n\n100\n00:04:27.150 --> 00:04:28.229\ninstall on a bunch of different systems.\n\n101\n00:04:29.290 --> 00:04:33.280\nThat's not crazy,\nI guess I shouldn't portray it that way.\n\n102\n00:04:33.280 --> 00:04:35.760\nBut we do need to get this one\ninstalled and in place and\n\n103\n00:04:35.760 --> 00:04:36.950\nI'm just worried about this one server.\n\n104\n00:04:38.020 --> 00:04:40.620\nI'm gonna move past this screen,\nthis is just the before you begin,\n\n105\n00:04:40.620 --> 00:04:43.020\nthe little informational screen,\ndoesn't really have much for us there.\n\n106\n00:04:43.020 --> 00:04:46.150\nAnd then we get to the installation\ntype and it's asking me\n\n107\n00:04:46.150 --> 00:04:50.330\nwhat I'm trying to do and I want to do a\nrole based or feature based installation.\n\n108\n00:04:50.330 --> 00:04:53.640\nThe DNS server is a role,\nthat's what I wanna tackle.\n\n109\n00:04:53.640 --> 00:04:55.520\nAnd now I get my server selection.\n\n110\n00:04:55.520 --> 00:04:58.730\nAnd because I went into my local server\nfirst, it is defaulting to my server.\n\n111\n00:04:58.730 --> 00:05:02.570\nBut you'll see where I could select other\nservers from a pool if I had more than one\n\n112\n00:05:02.570 --> 00:05:04.580\nserver I could pump them in here and\n\n113\n00:05:04.580 --> 00:05:07.610\nI could install on several different\nsystems all at the same time.\n\n114\n00:05:07.610 --> 00:05:08.524\nIt does save a lot of effort.\n\n115\n00:05:08.524 --> 00:05:14.000\nBut, I'm installing this one\non DNS1.ITprotvdemo.net and\n\n116\n00:05:14.000 --> 00:05:16.580\nas I move forward,\nit's gonna ask which role.\n\n117\n00:05:16.580 --> 00:05:19.480\nAnd the server is not\nlocked to just one role.\n\n118\n00:05:19.480 --> 00:05:23.380\nYou can do many things, but\nI just want a DNS server.\n\n119\n00:05:23.380 --> 00:05:25.990\nThat's all I'm gonna check, but\nlet me give you a standard scenario.\n\n120\n00:05:25.990 --> 00:05:32.130\nIf you're a small or a medium business,\nyou probably only have two DNS servers.\n\n121\n00:05:32.130 --> 00:05:35.120\nAnd they're probably not very busy at all,\nright?\n\n122\n00:05:35.120 --> 00:05:36.760\nYou may not even have DNS servers.\n\n123\n00:05:36.760 --> 00:05:40.940\nBut if you have an active directory,\nyou have to have a DNS server somewhere.\n\n124\n00:05:40.940 --> 00:05:44.055\nBecause the active directory\nrequires creating special records,\n\n125\n00:05:44.055 --> 00:05:45.950\nSRV records inside the DNS.\n\n126\n00:05:45.950 --> 00:05:48.760\nSo it can track where the domain\ncontrollers are and all that other mess.\n\n127\n00:05:48.760 --> 00:05:51.120\nSo when somebody deploys\nthe active directory,\n\n128\n00:05:51.120 --> 00:05:54.120\nthey almost always deploy\nDNS along side of it.\n\n129\n00:05:54.120 --> 00:05:56.640\nAnd if you're a small or a medium\nbusiness, your domain controller is\n\n130\n00:05:56.640 --> 00:06:00.350\nprobably not very busy and\nyour DNS server is not very busy.\n\n131\n00:06:00.350 --> 00:06:03.610\nAnd probably your DACP server\nis not very busy either.\n\n132\n00:06:03.610 --> 00:06:06.220\nSo it is not uncommon in\nsmall organizations for\n\n133\n00:06:06.220 --> 00:06:07.930\nthem to stick all of them together.\n\n134\n00:06:07.930 --> 00:06:13.790\nTo say, this machine's gonna be a domain\ncontroller and a DHCP server, and DNS.\n\n135\n00:06:13.790 --> 00:06:17.440\nAnd it works fine, I've done it\ntons of times, it worked great.\n\n136\n00:06:18.480 --> 00:06:20.850\nBut there's a negative to that, right?\n\n137\n00:06:20.850 --> 00:06:25.940\nIf I have some kind of problem with DHCP,\nor I have some kind of problem with DNS,\n\n138\n00:06:25.940 --> 00:06:28.061\nand I have to restart something\nlike the net logon service.\n\n139\n00:06:28.061 --> 00:06:30.370\nThat will mess with the Active Directory,\nright?\n\n140\n00:06:30.370 --> 00:06:32.360\nOne service can now mess with the others.\n\n141\n00:06:32.360 --> 00:06:33.870\nIf I'm trying to do maintenance, or\n\n142\n00:06:33.870 --> 00:06:37.240\nsome kind of update,\nI can run into some problems there.\n\n143\n00:06:37.240 --> 00:06:40.890\nSo it's more ideal to have these separate,\nand in the old days,\n\n144\n00:06:40.890 --> 00:06:43.240\nthat meant buying separate hardware,\nand that wasn't realistic.\n\n145\n00:06:43.240 --> 00:06:45.550\nBut these days, it just means\nspinning up more virtual machines.\n\n146\n00:06:45.550 --> 00:06:48.990\nSo if I have a dedicated virtual machine\nfor DNS, dedicated virtual machine for\n\n147\n00:06:48.990 --> 00:06:51.980\ndomain controller,\ndedicated virtual machine for DHCP.\n\n148\n00:06:51.980 --> 00:06:53.480\nI'll be a lot better off, right?\n\n149\n00:06:53.480 --> 00:06:56.400\nAnd so,\nI'm just going to install the DNS Server.\n\n150\n00:06:56.400 --> 00:07:00.590\nThe moment you check on it, it's gonna\npop-up and say, yeah when you install DNS,\n\n151\n00:07:00.590 --> 00:07:05.390\nwe've install some other things too, which\nare the DNS Administration Tools, right?\n\n152\n00:07:05.390 --> 00:07:07.730\nSo, I kinda need that, so\nI'm gonna go and have it.\n\n153\n00:07:07.730 --> 00:07:11.440\nYou can turn it off if you want and\nthat won't install the Management Tools.\n\n154\n00:07:11.440 --> 00:07:12.990\nAnd I know what you're thinking.\n\n155\n00:07:12.990 --> 00:07:14.880\nI'm the Manager Tools, how do I manage it?\n\n156\n00:07:14.880 --> 00:07:17.310\nWell the odds are, I'm never\ngonna log in to the server again.\n\n157\n00:07:17.310 --> 00:07:19.960\nI'm gonna go to my desk,\nI'm gonna sit down and\n\n158\n00:07:19.960 --> 00:07:23.650\nI'll fire up the management tools on\nmy desk and remotely connected as one.\n\n159\n00:07:23.650 --> 00:07:27.730\nSo I don't necessarily need the tools\non the server at all, do I?\n\n160\n00:07:27.730 --> 00:07:29.700\nWell, if I'm gonna manage\nit from the server, I do.\n\n161\n00:07:29.700 --> 00:07:30.970\nBut otherwise I don't need them.\n\n162\n00:07:30.970 --> 00:07:34.610\nSo I can reduce my attacks surface\nby minimizing what gets installed.\n\n163\n00:07:34.610 --> 00:07:36.850\nI'm gonna leave them there\nbecause I've got the GUI.\n\n164\n00:07:36.850 --> 00:07:39.230\nIf I really wanted to go hardcore on this,\n\n165\n00:07:39.230 --> 00:07:42.010\nI could have done a Windows Server\n2016 core install.\n\n166\n00:07:42.010 --> 00:07:45.660\nAnd with the core install,\nyou get no GUI at all, right?\n\n167\n00:07:45.660 --> 00:07:47.580\nWell, sort of, you get a wallpaper.\n\n168\n00:07:47.580 --> 00:07:51.753\nAnd so when you log in, all you get\nis the PowerShell and that's it.\n\n169\n00:07:51.753 --> 00:07:53.296\nOr I think it actually\ndefaults to a command prompt.\n\n170\n00:07:53.296 --> 00:07:56.462\nAnd then you can switch to PowerShell\nif you want and that's it.\n\n171\n00:07:56.462 --> 00:07:58.420\nSo none of these management\ntools are loaded.\n\n172\n00:07:58.420 --> 00:08:02.391\nYou have to drop to the command line and\nuse the various PowerShell tools that\n\n173\n00:08:02.391 --> 00:08:06.380\nare available to manage DNS, which,\nagain, you can do from your own desk.\n\n174\n00:08:06.380 --> 00:08:07.830\nYou don't need to do it from the server.\n\n175\n00:08:07.830 --> 00:08:11.590\nSo after the server's set up,\nyou really shouldn't\n\n176\n00:08:11.590 --> 00:08:16.260\never need to a log into the console ever\nagain, unless something is broken, right?\n\n177\n00:08:16.260 --> 00:08:16.913\nWhich does happen, so.\n\n178\n00:08:16.913 --> 00:08:19.811\n[LAUGH] So, anyhow, I'm gonna go ahead and\nchoose to install the admin features,\n\n179\n00:08:19.811 --> 00:08:20.777\nso they'll be right here.\n\n180\n00:08:20.777 --> 00:08:22.810\nI'll go and add those in.\n\n181\n00:08:22.810 --> 00:08:24.750\nGetting a validation warning.\n\n182\n00:08:24.750 --> 00:08:27.120\nNow this is a tricky one.\n\n183\n00:08:27.120 --> 00:08:28.280\nNormally, I'd worry about this.\n\n184\n00:08:28.280 --> 00:08:29.910\nThis time I will not\nworry about it at all.\n\n185\n00:08:29.910 --> 00:08:34.200\nWhat it's telling me is there were no\nstatic IP addresses found on my system.\n\n186\n00:08:35.620 --> 00:08:38.110\nWell, I've got an IP.\n\n187\n00:08:38.110 --> 00:08:39.362\nI'm remoted into the machine right now,\n\n188\n00:08:39.362 --> 00:08:42.250\nI wouldn't have been able to remote\ninto it if it didn't have an IP.\n\n189\n00:08:42.250 --> 00:08:45.110\nBut it's a dynamic IP, right?\n\n190\n00:08:45.110 --> 00:08:47.600\nWhen you set up a DNS server,\n\n191\n00:08:47.600 --> 00:08:50.070\nyou need your clients to be\nable to look up against it.\n\n192\n00:08:50.070 --> 00:08:52.743\nWhich means on your clients, you're\ngonna go into their network adapter and\n\n193\n00:08:52.743 --> 00:08:55.200\nyou're gonna put in the IP\naddress of a DNS server.\n\n194\n00:08:55.200 --> 00:09:00.365\nWell, if the DNS server's IP keeps\nchanging, that's gonna be a problem.\n\n195\n00:09:00.365 --> 00:09:04.179\nYou're gonna have to go and keep updating\nyour clients, and that's not realistic.\n\n196\n00:09:04.179 --> 00:09:06.242\nSo you want your DNS server\nto have a static IP address.\n\n197\n00:09:06.242 --> 00:09:07.410\nNow I said I'm not worried about it.\n\n198\n00:09:07.410 --> 00:09:08.590\nWhy is that?\n\n199\n00:09:08.590 --> 00:09:10.230\nIt's not because I don't care.\n\n200\n00:09:10.230 --> 00:09:13.622\nIt's because this machine is\nactually up an Amazon's cloud or\n\n201\n00:09:13.622 --> 00:09:16.055\nthis might be up in Microsoft Azure,\nright?\n\n202\n00:09:16.055 --> 00:09:19.406\nAnd so I have a public IP that is static,\n\n203\n00:09:19.406 --> 00:09:24.540\nthat's mapped to that dynamic\nIP on this DNS server.\n\n204\n00:09:24.540 --> 00:09:26.970\nSo, my DNS server's IP\ncould change all day long.\n\n205\n00:09:26.970 --> 00:09:32.681\nAs long as my static public IP is still\nmapped to it, I'll be fine, right?\n\n206\n00:09:32.681 --> 00:09:34.990\nAnd that's fine because\nI'm on a cloud server.\n\n207\n00:09:34.990 --> 00:09:39.650\nBut if this were a On-Premises server who\nwas right here in the studio with me,\n\n208\n00:09:39.650 --> 00:09:41.270\nI'd want to go and change that.\n\n209\n00:09:41.270 --> 00:09:42.620\nAnd you can change it after the install.\n\n210\n00:09:42.620 --> 00:09:44.730\nIt doesn't need to stop us\nfrom installing, right?\n\n211\n00:09:44.730 --> 00:09:46.030\nCuz we can always change the IP later.\n\n212\n00:09:46.030 --> 00:09:48.250\nIt's just saying, hey,\nwe're gonna install it.\n\n213\n00:09:48.250 --> 00:09:48.800\nIt's gonna come up.\n\n214\n00:09:48.800 --> 00:09:51.840\nIt's gonna start working\non the IP you have now.\n\n215\n00:09:51.840 --> 00:09:54.720\nBut the moment your IP changes,\nall your clients get disconnected.\n\n216\n00:09:54.720 --> 00:09:55.950\nSo that's what that warning is all about.\n\n217\n00:09:55.950 --> 00:10:00.925\nAll right, I'll go ahead and hit Continue\nand now it's got that DNS server selected.\n\n218\n00:10:00.925 --> 00:10:03.487\nI can see File and\nStorage Services is also checked.\n\n219\n00:10:03.487 --> 00:10:07.546\nAnd that's because storage services\nare installed just by default.\n\n220\n00:10:07.546 --> 00:10:11.830\nAnd I could turn those off if I wanted to,\nbut it's not really hurting anything here,\n\n221\n00:10:11.830 --> 00:10:12.936\nso I'll leave it be.\n\n222\n00:10:12.936 --> 00:10:16.632\nActually, let me clarify that\ncuz I can't turn it off here,\n\n223\n00:10:16.632 --> 00:10:18.454\nthis is, I'm adding a role.\n\n224\n00:10:18.454 --> 00:10:19.528\nSo if you look up here,\nI'm in the Add Roles.\n\n225\n00:10:19.528 --> 00:10:24.650\nI'd have to launch this again and choose\nto remove roles to go in and remove that.\n\n226\n00:10:24.650 --> 00:10:25.580\nSo it won't let me do it right now.\n\n227\n00:10:27.180 --> 00:10:31.700\nAll right, I'll go in Advanced and\nnow I get to the features.\n\n228\n00:10:31.700 --> 00:10:34.420\nThe role is critical, I need the role.\n\n229\n00:10:34.420 --> 00:10:37.800\nThe features are optional, and you'll see\ndifferent features that are installed in\n\n230\n00:10:37.800 --> 00:10:39.260\nyour system based on\nwhat you've done with it.\n\n231\n00:10:39.260 --> 00:10:42.130\nSo, for example,\nI've got the .NET framework 4.6.\n\n232\n00:10:42.130 --> 00:10:43.590\nDNS doesn't need that.\n\n233\n00:10:43.590 --> 00:10:45.724\nBut I'm deployed in the Amazon's Cloud and\nAmazon needs it for\n\n234\n00:10:45.724 --> 00:10:48.470\ntheir management scripts and so\nthat's why it's installed by default.\n\n235\n00:10:48.470 --> 00:10:50.310\nYou may or may not have that on yours.\n\n236\n00:10:50.310 --> 00:10:54.790\nAnd as we look through, the one that\nwe actually need is right here,\n\n237\n00:10:54.790 --> 00:10:58.520\nunder Remote Server Administration Tools,\nthe RSAT.\n\n238\n00:10:58.520 --> 00:11:02.250\nIf I expand that out,\nI can go into Role Administration.\n\n239\n00:11:02.250 --> 00:11:05.250\nAnd there's the DNS Server Tools\nthat are being installed.\n\n240\n00:11:05.250 --> 00:11:09.840\nIf you wanna be able to manage this DNS\nserver from your desktop, then what you'll\n\n241\n00:11:09.840 --> 00:11:13.500\nhave to do, your desktop, let's say\nyou're running Windows 7 or Windows 10.\n\n242\n00:11:13.500 --> 00:11:17.163\nYou're not gonna have the DNS\nadministration tool in Windows 7.\n\n243\n00:11:17.163 --> 00:11:19.119\nYou're not gonna have it in Windows 10.\n\n244\n00:11:19.119 --> 00:11:20.973\nSo if you wanna manage this,\n\n245\n00:11:20.973 --> 00:11:26.537\nwhat you've got to do is go to Microsoft's\nwebsite and, I usually just go to Google,\n\n246\n00:11:26.537 --> 00:11:30.658\nbut you go to Google and\ndo a search for Microsoft RSAT, right?\n\n247\n00:11:30.658 --> 00:11:35.098\nRSAT is the remote server administration\ntools and they release them for\n\n248\n00:11:35.098 --> 00:11:37.020\neach version of Windows.\n\n249\n00:11:37.020 --> 00:11:40.920\nSo if you're running Windows 10,\n64 bit or Windows 7, 32 bit,\n\n250\n00:11:40.920 --> 00:11:42.720\nthey've got all the different versions.\n\n251\n00:11:42.720 --> 00:11:44.200\nAnd when you get it, you download it.\n\n252\n00:11:44.200 --> 00:11:47.620\nIt's, I think, 250 MB,\nsomething like that in size.\n\n253\n00:11:47.620 --> 00:11:49.980\nIt's not too terribly small or big.\n\n254\n00:11:49.980 --> 00:11:51.050\nIt's kind of in between.\n\n255\n00:11:51.050 --> 00:11:55.720\nBut when you install it, it lets you\ninstall all of these different tools for\n\n256\n00:11:55.720 --> 00:11:58.360\nmanaging not just DNS but\neverything else that you want.\n\n257\n00:11:58.360 --> 00:12:01.450\nAnd so now I can manage the DNS server\nright there from my own computer.\n\n258\n00:12:01.450 --> 00:12:03.660\nAnd I don't have to go and\nremote into the server to do it.\n\n259\n00:12:03.660 --> 00:12:06.099\nAnd that is the recommended\nway of managing the server.\n\n260\n00:12:06.099 --> 00:12:09.450\nBut I'm gonna install the server\ntools locally for right now.\n\n261\n00:12:09.450 --> 00:12:11.690\nAnd then I can always go in and\nswitch my own machine later.\n\n262\n00:12:14.290 --> 00:12:15.750\nAll right, I'll go ahead and\nmove forward on that.\n\n263\n00:12:15.750 --> 00:12:17.540\nAnd that should be about all it needs.\n\n264\n00:12:17.540 --> 00:12:20.488\nA get a little DNS screen here,\nwhich is just giving me information.\n\n265\n00:12:20.488 --> 00:12:21.280\nFor any other service here,\n\n266\n00:12:21.280 --> 00:12:24.370\nit would be asking me questions\nabout how to customize it.\n\n267\n00:12:24.370 --> 00:12:28.320\nBut DNS really installs in\none default mode and so\n\n268\n00:12:28.320 --> 00:12:31.080\nit's gonna install and\nI don't have to worry to much about it.\n\n269\n00:12:31.080 --> 00:12:34.679\nSo I'll just hit Next and\nwe'll let that one run.\n\n270\n00:12:34.679 --> 00:12:37.449\nNow there is an option up here\nthat says restart the destination\n\n271\n00:12:37.449 --> 00:12:39.590\nserver automatically if required.\n\n272\n00:12:39.590 --> 00:12:43.840\nSome roles, like if I were to add,\nI don't know,\n\n273\n00:12:43.840 --> 00:12:47.810\nthe Active Directory\ndomain controller roles.\n\n274\n00:12:47.810 --> 00:12:50.670\nThe role for\nthat doesn't require reboot but\n\n275\n00:12:50.670 --> 00:12:52.790\nthere are certain ones\nthat do require a reboot.\n\n276\n00:12:52.790 --> 00:12:55.340\nAnd this would just restart\nus automatically if we did.\n\n277\n00:12:55.340 --> 00:12:58.418\n&gt;&gt; Yeah, one that comes to mind is\nActive Directory certificate services.\n\n278\n00:12:58.418 --> 00:12:58.988\n&gt;&gt; Definitely.\n\n279\n00:12:58.988 --> 00:13:00.350\n&gt;&gt; Definitely needs to reboot.\n\n280\n00:13:00.350 --> 00:13:02.460\n&gt;&gt; Yeah, cuz that one locks\ndown a lot of settings and\n\n281\n00:13:02.460 --> 00:13:04.270\nit can't do that while the system is up.\n\n282\n00:13:04.270 --> 00:13:05.121\nSo that's one where you have to reboot.\n\n283\n00:13:05.121 --> 00:13:08.250\nDNS is not one of them, so\nI'm not gonna bother to check that.\n\n284\n00:13:08.250 --> 00:13:09.370\nIf you do need to reboot,\n\n285\n00:13:09.370 --> 00:13:12.630\nit'll tell you and you'll have that\noption to restart if you want.\n\n286\n00:13:12.630 --> 00:13:15.070\nIn my case, I don't need to.\n\n287\n00:13:15.070 --> 00:13:16.460\nIt's gonna start the install, and\n\n288\n00:13:16.460 --> 00:13:20.120\nthe neat part about this install is it's\nbeing managed by the server manager.\n\n289\n00:13:20.120 --> 00:13:22.820\nAnd the server manager keeps\nrunning whether it's open or not.\n\n290\n00:13:22.820 --> 00:13:24.990\nIt's actually a service in the background.\n\n291\n00:13:24.990 --> 00:13:29.370\nSo now that it's running, I can just close\nthis out and get out of here, right?\n\n292\n00:13:29.370 --> 00:13:33.050\nSo this little blue bar is gonna\nslowly creep across until it gets to\n\n293\n00:13:33.050 --> 00:13:34.320\nthe site and it's done.\n\n294\n00:13:34.320 --> 00:13:36.460\nI can sit here and watch and wait.\n\n295\n00:13:36.460 --> 00:13:39.280\nOr I can just hit Close and\ncome back and check in.\n\n296\n00:13:39.280 --> 00:13:44.170\nI'll know it's done because I'll get a\nlittle alert up here in my notifications,\n\n297\n00:13:44.170 --> 00:13:45.430\nand that's where it'll tell me it's done.\n\n298\n00:13:45.430 --> 00:13:50.020\nSo, I could come back after lunch, and\nfire up the server manager and check for\n\n299\n00:13:50.020 --> 00:13:51.380\nnotifications up here, and see what I get.\n\n300\n00:13:51.380 --> 00:13:53.270\nSee how it's showing that installation?\n\n301\n00:13:53.270 --> 00:13:55.060\nI got my feature installation, succeeded.\n\n302\n00:13:55.060 --> 00:13:57.347\nAnd, did it actually finish?\n\n303\n00:13:57.347 --> 00:13:58.013\nIt did finish.\n\n304\n00:13:58.013 --> 00:13:59.760\nPretty fast.\n\n305\n00:13:59.760 --> 00:14:02.410\nSo [LAUGH] Cloud installs\nare normally a little bit slower.\n\n306\n00:14:02.410 --> 00:14:03.920\nThis one surprised me.\n\n307\n00:14:03.920 --> 00:14:04.950\nSo, it's already done.\n\n308\n00:14:04.950 --> 00:14:06.670\nBut that's where you'd this see,\nup there in the notifications.\n\n309\n00:14:06.670 --> 00:14:08.490\nSo, you don't have to sit here and\nwait for it.\n\n310\n00:14:08.490 --> 00:14:12.020\nMaybe I start the installer, and\nwhile it's doing its thing, I go and\n\n311\n00:14:12.020 --> 00:14:13.910\nassign a static IP address, right?\n\n312\n00:14:13.910 --> 00:14:15.760\nLet's cover that real quick,\njust in case you need to do it.\n\n313\n00:14:16.800 --> 00:14:20.588\nIf you're on a on-premises server,\nyou do need to have a static IP address.\n\n314\n00:14:20.588 --> 00:14:24.320\nOr [LAUGH] you could have a DHCP\nserver that has a reservation, so\n\n315\n00:14:24.320 --> 00:14:25.690\nyou always get the same address.\n\n316\n00:14:25.690 --> 00:14:28.390\nI know some admins who love to do that,\nI hate doing that.\n\n317\n00:14:28.390 --> 00:14:31.240\nSo different people have\ndifferent preferences.\n\n318\n00:14:31.240 --> 00:14:34.000\nI always assign a static,\nespecially on my DNS servers.\n\n319\n00:14:34.000 --> 00:14:36.200\nThat's where it's really critical.\n\n320\n00:14:36.200 --> 00:14:39.530\nSo if you need a static IP,\nback in the Server Manager,\n\n321\n00:14:39.530 --> 00:14:41.280\nif you click on Local Server up here,\n\n322\n00:14:41.280 --> 00:14:45.450\nlike I did earlier, you get a little\nproperties screen for your server.\n\n323\n00:14:45.450 --> 00:14:48.450\nAnd it shows things like\nwhether you've got NIC teaming,\n\n324\n00:14:48.450 --> 00:14:49.860\nyour ethernet adapter right here, and\n\n325\n00:14:49.860 --> 00:14:53.860\nsee how my ethernet adapter it\nshows as IPV4addressassignedbydhcp.\n\n326\n00:14:54.860 --> 00:14:58.690\nSo if I wanted this piece to be static,\nyou can just click on that link, and\n\n327\n00:14:58.690 --> 00:15:02.830\nit'll take you to your adapter screen, and\nyou can pull up the properties on that.\n\n328\n00:15:02.830 --> 00:15:06.235\nAnd once you get into the properties,\nafter a moment it will load and\n\n329\n00:15:06.235 --> 00:15:07.509\nI'll see, there we go.\n\n330\n00:15:07.509 --> 00:15:09.330\nTCPIP version four, right?\n\n331\n00:15:09.330 --> 00:15:12.852\nYou can highlight TCPIP version four and\nhit Properties, and\n\n332\n00:15:12.852 --> 00:15:17.129\nin the properties screen you can switch\nfrom a dynamic to a static address.\n\n333\n00:15:17.129 --> 00:15:20.354\nAnd you could put in what your\nstatic address is and so on, and\n\n334\n00:15:20.354 --> 00:15:22.020\nthis is where you'd enter it.\n\n335\n00:15:22.020 --> 00:15:25.752\nAnd now once it's in there, you hit OK a\ncouple of times to get these windows to go\n\n336\n00:15:25.752 --> 00:15:29.009\naway, and after that, now you'll\nalways have the same IP address.\n\n337\n00:15:29.009 --> 00:15:30.328\nIt's definitely a good\nidea on a DNS server.\n\n338\n00:15:30.328 --> 00:15:35.067\nIn fact, DNS servers and routers\nare really the only two devices that\n\n339\n00:15:35.067 --> 00:15:39.318\ntruly needs static IPs on your\nsystem because they can wreak so\n\n340\n00:15:39.318 --> 00:15:41.212\nmuch havoc if they change.\n\n341\n00:15:41.212 --> 00:15:43.588\nDomain controllers,\nfile servers, other things,\n\n342\n00:15:43.588 --> 00:15:47.120\nas long as they have valid DNS names that\ncan be looked up, their IP can change and\n\n343\n00:15:47.120 --> 00:15:50.216\nit's no big deal, people will find\nthem through their DNS records.\n\n344\n00:15:50.216 --> 00:15:56.087\nBut if a DNS server's DNS record changes\nI can't look up the DNS name, right?\n\n345\n00:15:56.087 --> 00:15:57.629\nAnd so we get in trouble there.\n\n346\n00:15:57.629 --> 00:16:01.346\nAnd if a routers IP changes,\nI can't get to the router unless we go and\n\n347\n00:16:01.346 --> 00:16:02.899\nupdate the routing values.\n\n348\n00:16:02.899 --> 00:16:04.040\nSo those two are kind of important.\n\n349\n00:16:05.280 --> 00:16:08.650\nAll right, I'm gonna cancel out of that\nthough because I'm okay with my dynamic\n\n350\n00:16:08.650 --> 00:16:12.070\nbecause I've got that mapped\nstatic that I'm using.\n\n351\n00:16:12.070 --> 00:16:15.728\nWhich is a pretty common thing, so you may\nwell have that in your environment too,\n\n352\n00:16:15.728 --> 00:16:16.450\nall right.\n\n353\n00:16:16.450 --> 00:16:19.780\nOnce it's done installing,\nI'm now a DNS server.\n\n354\n00:16:19.780 --> 00:16:21.025\nIt's running.\nI hope it is.\n\n355\n00:16:21.025 --> 00:16:24.820\n[LAUGH] It should be running in the\nbackground, unless something went wrong.\n\n356\n00:16:24.820 --> 00:16:26.940\nHow do we know if something went wrong or\nnot?\n\n357\n00:16:26.940 --> 00:16:29.980\nWell, when it finishes installing\nover here on the left side.\n\n358\n00:16:29.980 --> 00:16:33.180\nThose of you with hawk eyes\nprobably already noticed\n\n359\n00:16:33.180 --> 00:16:37.140\nthat I have a new item over here\nin my menu which is DNS, right?\n\n360\n00:16:37.140 --> 00:16:40.660\nAll that tells me is that\nthe tool's installed, right?\n\n361\n00:16:40.660 --> 00:16:42.321\nIt doesn't actually tell\nme if it's working or not.\n\n362\n00:16:42.321 --> 00:16:44.290\nIt just tells me that\nthe tool's installed.\n\n363\n00:16:44.290 --> 00:16:49.446\nBut, if you click on it, you'll get a\nsummary of the information on that system.\n\n364\n00:16:49.446 --> 00:16:52.120\nAnd this window is just\na little on the large side,\n\n365\n00:16:52.120 --> 00:16:55.880\nlet me get Siri to help me out here.\n\n366\n00:16:55.880 --> 00:17:00.408\nI'm gonna resize this if I can, resizing\nwindow is beyond my mastery skills,\n\n367\n00:17:00.408 --> 00:17:01.550\napparently.\n\n368\n00:17:01.550 --> 00:17:04.830\nBut what you see when you look in here\nis a couple of pieces of information.\n\n369\n00:17:04.830 --> 00:17:07.950\nThis first part is most important,\ncuz it shows me my server.\n\n370\n00:17:07.950 --> 00:17:11.660\nAnd I can see DNS1,\nhere's my IP address and\n\n371\n00:17:11.660 --> 00:17:17.000\nit says Online Performance counters not\nstarted, okay, that's a good thing.\n\n372\n00:17:17.000 --> 00:17:18.010\nI'm online.\n\n373\n00:17:18.010 --> 00:17:22.799\nThat means not only did it install but\nthat my manageability, that I'm able to\n\n374\n00:17:22.799 --> 00:17:27.530\ntalk to the server, that server is\nonline and that it's activated, right?\n\n375\n00:17:27.530 --> 00:17:32.349\nAnd as I go down here, I can start to\nsee events that are related to DNS.\n\n376\n00:17:32.349 --> 00:17:35.132\nNow mine is completely empty and\nI think that's kind of odd,\n\n377\n00:17:35.132 --> 00:17:39.070\nbecause at a minimum I should have some\nentries that say that DNS started.\n\n378\n00:17:39.070 --> 00:17:39.790\nAnd I don't see that.\n\n379\n00:17:39.790 --> 00:17:41.990\nNow it's possible the logging\nstarted afterwards.\n\n380\n00:17:41.990 --> 00:17:45.370\nBut the odds are,\nmy screen is just out of date, right?\n\n381\n00:17:45.370 --> 00:17:49.150\nAnd when you go up here to Tasks,\nyou'll see where you can Refresh.\n\n382\n00:17:49.150 --> 00:17:52.610\nAnd it'll Refresh and\nhopefully we see some more log entries.\n\n383\n00:17:52.610 --> 00:17:53.910\nI'm not getting anything.\n\n384\n00:17:53.910 --> 00:17:55.779\nSo, it's telling me I'm online.\n\n385\n00:17:55.779 --> 00:17:58.321\nBut I don't really know from right here.\n\n386\n00:17:58.321 --> 00:18:02.768\nSo, we can check those two other\nways to be positive, right?\n\n387\n00:18:02.768 --> 00:18:04.593\nIf you go up to the Tools menu,\n\n388\n00:18:04.593 --> 00:18:07.962\nunder Tools you can find\nthe DNS administration tool.\n\n389\n00:18:07.962 --> 00:18:11.426\nNow, this is confusing to a lot of people\nbecause I've got DNS in the server manager\n\n390\n00:18:11.426 --> 00:18:14.807\nand then I've got DNS here under my\nmanagement tools, why two different tools?\n\n391\n00:18:14.807 --> 00:18:19.595\nWell, this is tool that has\nbeen around since Windows 2000.\n\n392\n00:18:19.595 --> 00:18:21.447\nIt's been around for 16 years and\n\n393\n00:18:21.447 --> 00:18:24.108\nit's where you're gonna\ndo the bulk of your work.\n\n394\n00:18:24.108 --> 00:18:26.187\nSo this is really where we wanna go.\n\n395\n00:18:26.187 --> 00:18:30.553\nThe DNS screen that's over here in the\nServer Manager is more like a monitoring\n\n396\n00:18:30.553 --> 00:18:31.090\nsystem.\n\n397\n00:18:31.090 --> 00:18:35.050\nWe just see the DNS server and\na little bit of information about it.\n\n398\n00:18:35.050 --> 00:18:38.240\nYou don't really get a huge\namount of details inside of here.\n\n399\n00:18:38.240 --> 00:18:40.710\nOther than the fact that the server\nshows as being online and\n\n400\n00:18:40.710 --> 00:18:43.770\neven if I right-click, I just get\ngeneral server type things here.\n\n401\n00:18:43.770 --> 00:18:45.410\nShut down the server and whatever.\n\n402\n00:18:45.410 --> 00:18:47.560\nThat's not really gonna help me.\n\n403\n00:18:47.560 --> 00:18:48.580\nSo when we manage DNS,\n\n404\n00:18:48.580 --> 00:18:52.590\nwe're gonna be spending the bulk of\nour time in this tool right here.\n\n405\n00:18:52.590 --> 00:18:56.980\nRight, so I'm just going to Tools &gt; DNS\nand that's gonna fire this one up now.\n\n406\n00:18:56.980 --> 00:19:01.340\nIf you installed Microsoft's DNS\nserver in Windows 2000,\n\n407\n00:19:01.340 --> 00:19:05.980\nin Windows Server 2003, in Server 2008,\nSever 2012, Server 2016,\n\n408\n00:19:05.980 --> 00:19:09.860\nthis tool has really remained unchanged.\n\n409\n00:19:09.860 --> 00:19:11.280\nThey've added features to it.\n\n410\n00:19:11.280 --> 00:19:16.190\nBack in Windows 2000,\nwe didn't have IPv6, right?\n\n411\n00:19:16.190 --> 00:19:18.260\nIt was out but nobody supported it yet.\n\n412\n00:19:18.260 --> 00:19:20.790\nSo there was any IPv6 functionality.\n\n413\n00:19:20.790 --> 00:19:24.170\nBut you'll see here that IPv6\nis in a lot of what we do.\n\n414\n00:19:24.170 --> 00:19:26.870\nIt's present in here\nthat we can support it.\n\n415\n00:19:26.870 --> 00:19:28.420\nSo they've updated it but\n\n416\n00:19:28.420 --> 00:19:31.766\nthe overall visual appearance\nhas really been the same.\n\n417\n00:19:31.766 --> 00:19:34.550\nWe had Microsoft's DNS\nserver back in NT 4,\n\n418\n00:19:34.550 --> 00:19:38.460\nthe administration tool looked different\nbut it was technically the same server.\n\n419\n00:19:38.460 --> 00:19:39.390\nSo it's evolved a lot.\n\n420\n00:19:39.390 --> 00:19:40.520\nIt's a very mature product.\n\n421\n00:19:40.520 --> 00:19:41.260\nIt's been around a long time.\n\n422\n00:19:42.380 --> 00:19:45.060\nBut in here, I can click on my server.\n\n423\n00:19:45.060 --> 00:19:48.150\nAnd I can actually see\nthat it is functioning.\n\n424\n00:19:48.150 --> 00:19:50.080\nI can see that I've got\nForward Lookup Zones.\n\n425\n00:19:50.080 --> 00:19:51.060\nReverse Lookup Zones.\n\n426\n00:19:51.060 --> 00:19:53.100\nTrust Points and Conditional Forwarders.\n\n427\n00:19:53.100 --> 00:19:55.468\nI can see that I'm talking to the system.\n\n428\n00:19:55.468 --> 00:19:58.964\nAnd I can sort of see,\ncuz it's microscopic.\n\n429\n00:19:58.964 --> 00:20:03.170\nBut there's a little green\ndot right there on the icon.\n\n430\n00:20:03.170 --> 00:20:04.920\nAnd I had to really\nzoom that in to see it.\n\n431\n00:20:04.920 --> 00:20:06.590\nI don't know why they make it so small.\n\n432\n00:20:06.590 --> 00:20:08.780\nBut that must be that I\nam talking to the server.\n\n433\n00:20:08.780 --> 00:20:12.250\nIf the server could go offline,\nwe would know, right?\n\n434\n00:20:12.250 --> 00:20:13.770\nLet me simulate that for you.\n\n435\n00:20:13.770 --> 00:20:16.390\nIf we go back to the Server Manager.\n\n436\n00:20:16.390 --> 00:20:20.410\nUnder Tools, there's another tool for\nus in here called Services.\n\n437\n00:20:20.410 --> 00:20:23.570\nAnd I can see all the services that\nare running in the background.\n\n438\n00:20:23.570 --> 00:20:28.690\nAnd when I go into Services,\nI can find DNS in here.\n\n439\n00:20:29.750 --> 00:20:31.520\nRight here I've got DNS Client.\n\n440\n00:20:31.520 --> 00:20:32.810\nEvery Windows operating system has that.\n\n441\n00:20:32.810 --> 00:20:34.160\nThat's how we do our look ups.\n\n442\n00:20:34.160 --> 00:20:37.130\nBut I have DNS Server\nbecause I'm a server, right?\n\n443\n00:20:37.130 --> 00:20:38.860\nI'm gonna stop that.\n\n444\n00:20:38.860 --> 00:20:40.470\nOr, I guess, I could just pause it and\nhave some fun.\n\n445\n00:20:40.470 --> 00:20:42.050\nBut I'm gonna stop it outright.\n\n446\n00:20:42.050 --> 00:20:42.770\nSo, I'm gonna stop that.\n\n447\n00:20:42.770 --> 00:20:43.270\nThere it goes.\n\n448\n00:20:43.270 --> 00:20:44.599\nIt just stopped.\n\n449\n00:20:44.599 --> 00:20:49.498\nAnd when I go back to my DNS tool,\nwhich I've lost in the background here.\n\n450\n00:20:49.498 --> 00:20:50.030\nHere we go.\n\n451\n00:20:51.560 --> 00:20:52.990\nEverything looks good, right?\n\n452\n00:20:52.990 --> 00:20:57.814\nWell if I Refresh my screen, there we go.\n\n453\n00:20:57.814 --> 00:20:59.570\nI can't expand the server.\n\n454\n00:20:59.570 --> 00:21:00.910\nI don't see the zones inside of it.\n\n455\n00:21:00.910 --> 00:21:04.620\nAnd instead of having that nice\ncomforting little green dot, I now have\n\n456\n00:21:04.620 --> 00:21:09.340\na giant red circle with a white x in it\nletting me know things aren't so good.\n\n457\n00:21:09.340 --> 00:21:12.340\nRight, now I made this failure,\nso it's not a big deal.\n\n458\n00:21:12.340 --> 00:21:16.540\nWe can just come in here and\ntell it to start back up.\n\n459\n00:21:16.540 --> 00:21:18.610\nYou can actually do it right from here.\n\n460\n00:21:18.610 --> 00:21:21.650\nSee I've got that Start option buried\nunder the menu and it'll start it up.\n\n461\n00:21:21.650 --> 00:21:23.820\nSo I didn't have to go\nto Services to do it but\n\n462\n00:21:23.820 --> 00:21:25.660\nI wanted to create the failure outside.\n\n463\n00:21:25.660 --> 00:21:30.600\nNow, this is using what's called\nthe Microsoft Management Console, the MMC.\n\n464\n00:21:30.600 --> 00:21:34.100\nAnd the MMC ever since the beginning\nhas always had one weakness and\n\n465\n00:21:34.100 --> 00:21:36.070\nthat's that it just\ndoesn't refresh itself.\n\n466\n00:21:36.070 --> 00:21:37.960\nIt does but\non these really crazy intervals,\n\n467\n00:21:37.960 --> 00:21:40.140\nlike every five minutes or\nten minutes or whatever.\n\n468\n00:21:40.140 --> 00:21:43.020\nSo, I started that server but\nit still looks down.\n\n469\n00:21:43.020 --> 00:21:45.998\nYou might need to hit Refresh,\nF5 is the keyboard shortcut.\n\n470\n00:21:45.998 --> 00:21:48.740\nThat's what I normally hit but\nonscreen I'll use the button so we see it.\n\n471\n00:21:48.740 --> 00:21:50.320\nBut just get used to hitting Refresh.\n\n472\n00:21:51.430 --> 00:21:53.070\nAnd now the server's back up.\n\n473\n00:21:53.070 --> 00:21:53.570\nAnd here I am.\n\n474\n00:21:54.700 --> 00:21:59.440\nNow, technically the server is\nready to be put in production.\n\n475\n00:21:59.440 --> 00:22:02.870\nThat it is a functional DNS server.\n\n476\n00:22:02.870 --> 00:22:08.320\nBut as it stands, it has no Forward\nLookup Zones and no Reverse Lookup Zones.\n\n477\n00:22:08.320 --> 00:22:12.180\nSo it looks like it's kind of\nuseless at this point, right?\n\n478\n00:22:12.180 --> 00:22:13.810\nBut it's not completely useless.\n\n479\n00:22:13.810 --> 00:22:18.540\nIn its default deployment,\nthis server is a caching server.\n\n480\n00:22:18.540 --> 00:22:22.640\nPeople can do lookups against this\nserver and it has no answers.\n\n481\n00:22:22.640 --> 00:22:27.470\nSo, it'll do recursive lookups against\nother servers and ask them for help.\n\n482\n00:22:27.470 --> 00:22:29.920\nAnd, it'll get the answer and\nbring it back and give it to me.\n\n483\n00:22:29.920 --> 00:22:33.420\nAnd, it will cache the result\nright here locally.\n\n484\n00:22:33.420 --> 00:22:34.720\nAnd it's doing that already.\n\n485\n00:22:34.720 --> 00:22:35.930\nI haven't even turned that on.\n\n486\n00:22:35.930 --> 00:22:37.220\nIt just does it by default.\n\n487\n00:22:37.220 --> 00:22:39.310\n&gt;&gt; And I would ask,\nwell how is it doing that?\n\n488\n00:22:39.310 --> 00:22:43.300\nIf you haven't configured anything,\nmy guess would be maybe root hints.\n\n489\n00:22:43.300 --> 00:22:45.977\n&gt;&gt; Yeah, so, all right, root hints.\n\n490\n00:22:45.977 --> 00:22:48.800\nMy actual answer would be secrets.\n\n491\n00:22:48.800 --> 00:22:53.130\nIt's doing with secrets that has hidden\nstuff, it's hiding things from us, right?\n\n492\n00:22:53.130 --> 00:22:55.950\nAnd you see this with\na lot of Microsoft tools.\n\n493\n00:22:55.950 --> 00:22:57.650\nThey try to make things easy to use.\n\n494\n00:22:57.650 --> 00:23:01.280\nAnd when you have a GUI, admittedly,\nthis is a lot easier than editing a bind\n\n495\n00:23:01.280 --> 00:23:05.700\nconfiguration file or setting up NSD and\nunbound to work together.\n\n496\n00:23:05.700 --> 00:23:07.920\nThis is considerably simpler than that.\n\n497\n00:23:07.920 --> 00:23:12.378\nBut if you go up to View,\nyou've got an Advanced view, right?\n\n498\n00:23:12.378 --> 00:23:13.162\nNow we're hardcore.\n\n499\n00:23:13.162 --> 00:23:15.240\nI'm gonna switch to Advanced view.\n\n500\n00:23:15.240 --> 00:23:20.470\nEverything looks the same except I've\ngot a new folder called Cached Lookups.\n\n501\n00:23:20.470 --> 00:23:22.420\nThat's how I know it's caching.\n\n502\n00:23:22.420 --> 00:23:26.710\nI can see it's caching and it's got .root,\nand if I go in there I've got NET, and\n\n503\n00:23:26.710 --> 00:23:30.810\nthen ROOT SERVERS and\nif I go in there, nothing, right?\n\n504\n00:23:30.810 --> 00:23:32.520\nCuz the server hasn't\ndone a darn thing yet.\n\n505\n00:23:32.520 --> 00:23:34.130\nI haven't even sent one query to it.\n\n506\n00:23:34.130 --> 00:23:35.060\nSo all this is really empty,\n\n507\n00:23:35.060 --> 00:23:37.690\nright, we're gonna see this\nchange here in just a minute.\n\n508\n00:23:37.690 --> 00:23:40.623\nBut if I go and\npull the properties up on DNS1,\n\n509\n00:23:40.623 --> 00:23:45.400\nI'm gonna pull these Properties up and\nyou'll see a Root Hints tab.\n\n510\n00:23:45.400 --> 00:23:47.796\nThat's exactly what Wes\nwas just talking about.\n\n511\n00:23:47.796 --> 00:23:50.671\nIf I ask it a question,\nit doesn't know the answers.\n\n512\n00:23:50.671 --> 00:23:52.505\nSo, it's gonna have to go\nto the Root Hint service.\n\n513\n00:23:52.505 --> 00:23:54.172\nIf I send it a look up.\n\n514\n00:23:54.172 --> 00:23:56.878\nFor CNN.com.\n\n515\n00:23:56.878 --> 00:23:58.212\nIt's gonna go to the root hint servers.\n\n516\n00:23:58.212 --> 00:24:01.770\nThese guys,\nall these guys that are already at an end.\n\n517\n00:24:01.770 --> 00:24:06.380\nAnd it's gonna ask them and\nsay, hey, who controls .com?\n\n518\n00:24:06.380 --> 00:24:08.730\nAnd it's gonna tell them the TLD\nserver that controls .com.\n\n519\n00:24:08.730 --> 00:24:09.930\nAnd so then it'll go to that server.\n\n520\n00:24:09.930 --> 00:24:13.250\nAnd it'll say hey,\ndo you know who controls CNN.com?\n\n521\n00:24:13.250 --> 00:24:14.700\nAnd that server will say,\nyeah, it's this other server.\n\n522\n00:24:14.700 --> 00:24:16.284\nAnd then we'll jump over\nto that other server,\n\n523\n00:24:16.284 --> 00:24:20.330\nand that other server will say, yeah,\nhere's the IP you need, good luck, right.\n\n524\n00:24:20.330 --> 00:24:21.760\nSo we're talking multiple servers.\n\n525\n00:24:21.760 --> 00:24:24.550\nSo, as we do that query,\nall that's gonna get cached,\n\n526\n00:24:24.550 --> 00:24:27.450\nand we'll start to see that fill up\nin there, but these are the servers.\n\n527\n00:24:27.450 --> 00:24:29.610\nMicrosoft has already put them in for us.\n\n528\n00:24:29.610 --> 00:24:31.500\nThey do change from time to time.\n\n529\n00:24:31.500 --> 00:24:33.570\nAnd as long as you're doing\nyour Windows updates,\n\n530\n00:24:33.570 --> 00:24:35.260\nthen it'll update those automatically.\n\n531\n00:24:35.260 --> 00:24:37.960\nMicrosoft pushes these out as security\nupdates any time they change,\n\n532\n00:24:37.960 --> 00:24:40.080\nit's important, so\nthose will stay up to date.\n\n533\n00:24:40.080 --> 00:24:42.520\n&gt;&gt; So, default out of the box\nlike you've showed us,\n\n534\n00:24:42.520 --> 00:24:44.720\nyou haven't configured anything at all,\n\n535\n00:24:44.720 --> 00:24:49.852\nit's going to do the normal process\nof recursion, just right out of gate.\n\n536\n00:24:49.852 --> 00:24:51.910\n&gt;&gt; Absolutely, and in fact,\nhere, we can do it.\n\n537\n00:24:51.910 --> 00:24:54.500\nLet me just get out of\nthe property screen.\n\n538\n00:24:54.500 --> 00:24:57.120\nAnd I'll open up a command prompt.\n\n539\n00:24:59.270 --> 00:25:04.120\nAnd in my command prompt,\nI'm gonna do ns lookup, right?\n\n540\n00:25:04.120 --> 00:25:08.640\nAnd I'm gonna use the server command,\nso that I point to my new server.\n\n541\n00:25:08.640 --> 00:25:10.450\nI'm gonna point to 127.0.0.1.\n\n542\n00:25:10.450 --> 00:25:13.790\nBe default, the DNS server\nbinds to all of your addresses.\n\n543\n00:25:13.790 --> 00:25:14.740\nThat's another option we have.\n\n544\n00:25:14.740 --> 00:25:17.240\nWe could make it bind to just one IP or\nanother.\n\n545\n00:25:17.240 --> 00:25:19.390\nSince I'm doing a NAT mapping,\nthat can cause some issues.\n\n546\n00:25:19.390 --> 00:25:21.910\nSo, I'm gonna leave it at the default,\nwhich is I'm bound to everything,\n\n547\n00:25:21.910 --> 00:25:25.270\nincluding the loopback\naddress of 127.00.1.\n\n548\n00:25:25.270 --> 00:25:30.190\nNow, every query that I throw is\ngonna be thrown at the new server.\n\n549\n00:25:30.190 --> 00:25:33.830\nAnd I'm gonna ask for cnn.com, right?\n\n550\n00:25:33.830 --> 00:25:37.840\nSo when I ask for www.cnn.com,\nit goes to local host.\n\n551\n00:25:37.840 --> 00:25:40.911\nAnd it has no records,\nbut I got something,\n\n552\n00:25:40.911 --> 00:25:44.987\n151.101.32.72 that came from somewhere.\n\n553\n00:25:44.987 --> 00:25:49.310\nAnd so if I go back to my server,\nI need to refresh my screen, right?\n\n554\n00:25:49.310 --> 00:25:51.080\nBecause this isn't refreshing for me.\n\n555\n00:25:51.080 --> 00:25:54.575\nAnd when I go into Cache Lookups and\nI take a look at it,\n\n556\n00:25:54.575 --> 00:25:57.500\nall I'm seeing inCache Lookups is .root.\n\n557\n00:25:57.500 --> 00:26:00.480\nWell, if I refresh that,\nthat should change.\n\n558\n00:26:00.480 --> 00:26:01.130\nActually, it's not.\n\n559\n00:26:01.130 --> 00:26:04.670\nSorry, everything's under .root,\ncuz it's the root, it's the dot,\n\n560\n00:26:04.670 --> 00:26:06.510\nI'm forgetting the DNS hierarchy.\n\n561\n00:26:06.510 --> 00:26:08.370\nThere we go,\nthat's what I expected to see.\n\n562\n00:26:08.370 --> 00:26:12.590\nI still have net from the root\nhint servers, except now, boy,\n\n563\n00:26:12.590 --> 00:26:13.860\nis that populated.\n\n564\n00:26:13.860 --> 00:26:18.590\nI just did a lookup to find\nthis information, and it's now\n\n565\n00:26:18.590 --> 00:26:22.900\nstored in my cache, and so I can see\nthose guys that I reached out to, right?\n\n566\n00:26:22.900 --> 00:26:27.270\nAnd if we go inside of that,\nwe'll find the root servers, and\n\n567\n00:26:27.270 --> 00:26:29.850\npossibly the one that I\nactually had to talk to.\n\n568\n00:26:29.850 --> 00:26:32.710\nNow, it looks like I didn't do\na lookup there because I already had\n\n569\n00:26:32.710 --> 00:26:37.510\nthe IPs entered in my Microsoft, so it\ndidn't come in, or I might need a refresh.\n\n570\n00:26:37.510 --> 00:26:40.510\nAnd nope, we didn't have to do lookup,\ncuz we already had the IP.\n\n571\n00:26:40.510 --> 00:26:45.470\nBut then you'll see I was referred to a\nTLD, and so I've got the top level domain\n\n572\n00:26:45.470 --> 00:26:50.660\nreferences, a and b and c,\nall the way through m for those root ends.\n\n573\n00:26:50.660 --> 00:26:54.700\nAnd the CNN webpage,\nI was redirected over there, right, so\n\n574\n00:26:54.700 --> 00:26:56.520\nI've got this .com folder.\n\n575\n00:26:56.520 --> 00:26:57.960\nAnd inside of it, I've got CNN.\n\n576\n00:26:59.220 --> 00:27:03.070\nBut, when I looked up www.cnn.com,\n\n577\n00:27:03.070 --> 00:27:07.430\nit was an alias of turner.map.fastly.net.\n\n578\n00:27:07.430 --> 00:27:09.030\nSo now, I had to look that one up.\n\n579\n00:27:09.030 --> 00:27:12.860\nCuz we have to explode\nthe alias into the original IP.\n\n580\n00:27:12.860 --> 00:27:15.040\nAnd so then I had to go and\nfind out, well that's a .NET.\n\n581\n00:27:15.040 --> 00:27:17.340\nSo I look under .NET, there's fastly.\n\n582\n00:27:17.340 --> 00:27:19.810\nAnd under fastly, we've got map.\n\n583\n00:27:19.810 --> 00:27:20.539\nAnd whatever,\n\n584\n00:27:20.539 --> 00:27:24.195\nI've already forgotten what the name\nof the server was that we connected to.\n\n585\n00:27:24.195 --> 00:27:28.335\nTurner.map.fastly.net, so yeah,\nso it would be an entry under map\n\n586\n00:27:28.335 --> 00:27:33.180\nthat was called turner, apparently,\nthat we were ultimately referred to.\n\n587\n00:27:33.180 --> 00:27:35.580\nAnd we didn't have to look that one up for\nsome reason.\n\n588\n00:27:35.580 --> 00:27:36.980\nSeems like that would show up in there,\nwouldn't it, doesn't it?\n\n589\n00:27:38.365 --> 00:27:39.490\nOr did it cash it here?\n\n590\n00:27:39.490 --> 00:27:41.150\nBut how do you cash somewhere?\n\n591\n00:27:41.150 --> 00:27:43.170\nSo it'll go in there, and\nthat's why we don't have to go in and\n\n592\n00:27:43.170 --> 00:27:43.940\nlook those up anymore.\n\n593\n00:27:43.940 --> 00:27:45.690\nSo that we can find that information,\nwe can get it, and\n\n594\n00:27:45.690 --> 00:27:47.030\nget it stored here in the cache.\n\n595\n00:27:47.030 --> 00:27:50.120\nSo, if all I want is a caching server,\nI'm done.\n\n596\n00:27:50.120 --> 00:27:53.170\nRight, I just installed a roll,\nthis is the easiest thing ever.\n\n597\n00:27:55.780 --> 00:27:57.990\nThere are a couple of things that\nwe might wanna tweak on this.\n\n598\n00:27:57.990 --> 00:28:02.062\nFor example, we might wanna tweak\nwhat IP addresses were rebound to, or\n\n599\n00:28:02.062 --> 00:28:05.161\nmaybe we don't wanna use\nthe root hint servers at all.\n\n600\n00:28:05.161 --> 00:28:08.071\nMaybe I just wanna forward them to\nmy ISP and let them deal with it.\n\n601\n00:28:08.071 --> 00:28:09.480\nAll right, a lot of people do that.\n\n602\n00:28:09.480 --> 00:28:12.280\nSo you can set up a forwarder instead.\n\n603\n00:28:12.280 --> 00:28:14.550\nIf I go in here and\npull up the properties on my server,\n\n604\n00:28:14.550 --> 00:28:18.890\nso I'll pull up the properties of DNS1,\nand when I get into the properties for\n\n605\n00:28:18.890 --> 00:28:22.960\nit, which are around here somewhere,\nthere we go.\n\n606\n00:28:24.670 --> 00:28:26.400\nI went to the root hints tab earlier,\nright?\n\n607\n00:28:26.400 --> 00:28:30.830\nThat was where I jumped straight to,\nbut you've got forwarders also, and\n\n608\n00:28:30.830 --> 00:28:33.490\nforwarders override the root hint servers.\n\n609\n00:28:34.510 --> 00:28:37.280\nAnd so I can come in here and\nedit this, and say, you know what?\n\n610\n00:28:37.280 --> 00:28:39.810\nInstead of going to the root hint,\nI wanna forward all my stuff to Google.\n\n611\n00:28:39.810 --> 00:28:42.900\nSo I'm gonna put in A.A.A.A, and\n\n612\n00:28:42.900 --> 00:28:45.970\nthen maybe I'll do A.A.4.4,\nwhich is their backup.\n\n613\n00:28:45.970 --> 00:28:49.800\nSo, I'll put those two in, and\nthere we go, I've got their two servers.\n\n614\n00:28:49.800 --> 00:28:52.760\nNow, any time I get a lookup,\nI'm gonna send it to Google.\n\n615\n00:28:52.760 --> 00:28:55.110\nNow, Google might go to\nthe root hint servers, or\n\n616\n00:28:55.110 --> 00:28:57.740\nthey might do all the other stuff, or\nodds are they have stuff cached, right?\n\n617\n00:28:57.740 --> 00:29:00.720\nSo, I can do that, and I don't have to\nworry about doing the recursive lookup.\n\n618\n00:29:00.720 --> 00:29:03.210\nI'm pushing all the work\noff on Google instead.\n\n619\n00:29:03.210 --> 00:29:04.015\nAnd they'll gladly do it,\n\n620\n00:29:04.015 --> 00:29:06.990\ncuz they collect the heck out of\nyour demographics and sell it.\n\n621\n00:29:06.990 --> 00:29:08.000\nSo, there we go.\n\n622\n00:29:08.000 --> 00:29:10.590\nSo now we've got that\ninformation in there, and\n\n623\n00:29:10.590 --> 00:29:13.520\nuse root hints if no\nforwarders are available.\n\n624\n00:29:13.520 --> 00:29:16.849\nIf all the forwarders fail,\nI'll go ahead and use the root hints, but\n\n625\n00:29:16.849 --> 00:29:20.629\nif I don't want that I can turn that off\ntoo, and say no, you use the forwarder or\n\n626\n00:29:20.629 --> 00:29:21.487\nyou use nothing.\n\n627\n00:29:21.487 --> 00:29:22.946\nAnd there you go.\n\n628\n00:29:22.946 --> 00:29:28.749\nYou'd wanna do that if you were forwarding\nto one of those DNS sanitation services,\n\n629\n00:29:28.749 --> 00:29:34.410\nsomebody like OpenDNS or DimDNS,\nwhere they have the filtered DNS servers.\n\n630\n00:29:34.410 --> 00:29:35.999\nYou wouldn't wanna fail\nover to the root hints,\n\n631\n00:29:35.999 --> 00:29:38.460\ncuz then you could get sites that\nwould normally be filtered out.\n\n632\n00:29:38.460 --> 00:29:40.410\nRight, but in my case, I'll leave it on.\n\n633\n00:29:40.410 --> 00:29:44.740\nSo now, if I do a query,\nit's not gonna send it to the root hints.\n\n634\n00:29:44.740 --> 00:29:47.400\nIt's gonna send it out to Google and\nget that data.\n\n635\n00:29:47.400 --> 00:29:51.080\nSo, if I were to clear my cache,\nso I'm just gonna clear that out.\n\n636\n00:29:51.080 --> 00:29:54.380\nI just right clicked on cache lookups and\nshows clear cache.\n\n637\n00:29:54.380 --> 00:29:57.530\nAnd if I look in here,\nI'll still have the entry for that folder.\n\n638\n00:29:57.530 --> 00:29:59.550\nYou'll always have that\nroot servers folder.\n\n639\n00:29:59.550 --> 00:30:04.460\nBut now, if I go and\ndo a lookup, let's be fair, and\n\n640\n00:30:04.460 --> 00:30:06.450\nwe'll flip party affiliations here.\n\n641\n00:30:06.450 --> 00:30:09.560\nAnd we'll jump over to Fox News this time.\n\n642\n00:30:09.560 --> 00:30:11.010\nWe'll get both sides of the aisle.\n\n643\n00:30:11.010 --> 00:30:13.660\nI did a lookup, I got a result, right?\n\n644\n00:30:13.660 --> 00:30:15.940\nAs an end user,\nI don't really care where it came from.\n\n645\n00:30:15.940 --> 00:30:20.540\nBut when I go back into DNS,\nand I refresh that cache,\n\n646\n00:30:21.710 --> 00:30:25.394\nI can see where I've got net,\nand I've got the ROOT-SERVERS.\n\n647\n00:30:25.394 --> 00:30:29.200\nAnd the ROOT-SERVERS didn't populate,\nbecause I didn't go to them.\n\n648\n00:30:29.200 --> 00:30:31.310\nAnd why populate if I'm not\ngonna talk to them anyway?\n\n649\n00:30:31.310 --> 00:30:34.070\nInstead, I jump right to Google.\n\n650\n00:30:34.070 --> 00:30:36.290\nAnd Google gave me\neverything that I needed.\n\n651\n00:30:36.290 --> 00:30:40.530\nHere, I see I've got com and\nFox News, also an alias.\n\n652\n00:30:40.530 --> 00:30:45.237\nThis one was pointing to\nIP6.www.foxnews.com.edgesuite.net.\n\n653\n00:30:45.237 --> 00:30:48.278\nSo, they're using a cdn edgesuite.\n\n654\n00:30:48.278 --> 00:30:51.580\nAnd so we hit that, and so\nI got forwarded over to edgesuite.\n\n655\n00:30:51.580 --> 00:30:55.450\nAnd then edgesuite, turns out,\nlooks like they're back ending on Akamai.\n\n656\n00:30:55.450 --> 00:30:58.570\nAkamai, the world's largest content\ndistribution network, so that makes sense,\n\n657\n00:30:58.570 --> 00:31:00.500\nthese guys,\nthey pushed on your everything.\n\n658\n00:31:00.500 --> 00:31:02.030\nIn fact, if you're watching our video,\n\n659\n00:31:02.030 --> 00:31:04.390\nprobably watching via Akamai right now,\nanyway.\n\n660\n00:31:04.390 --> 00:31:07.370\nSo, basically, we did that lookup, so\nall that happened in the background.\n\n661\n00:31:07.370 --> 00:31:09.490\nBut the key thing here is,\nwe didn't use the root hint servers.\n\n662\n00:31:09.490 --> 00:31:11.450\nIt all went through Google,\nand we got that result.\n\n663\n00:31:11.450 --> 00:31:13.850\nAnd the odds are, we got it faster\nthan the root hint servers,\n\n664\n00:31:13.850 --> 00:31:16.880\ncuz I would have had to have talked to\nfour different servers to the root hints,\n\n665\n00:31:16.880 --> 00:31:19.300\nhere just Google.\n\n666\n00:31:19.300 --> 00:31:21.640\nBut at this point, the DNS server is up.\n\n667\n00:31:21.640 --> 00:31:23.030\nIt's not an exciting DNS server.\n\n668\n00:31:23.030 --> 00:31:24.988\nIt's caching, and that's it.\n\n669\n00:31:24.988 --> 00:31:26.770\nAnd I guess the only thing I\ndidn't show is the IP binding.\n\n670\n00:31:26.770 --> 00:31:28.320\nLet me show that real\nquick before we wrap up.\n\n671\n00:31:28.320 --> 00:31:30.700\nWes is giving me the evil eye,\ncuz I'm out of time here.\n\n672\n00:31:30.700 --> 00:31:33.190\nLet me pull up the properties on DNS1.\n\n673\n00:31:34.220 --> 00:31:40.200\nAnd I keep doing that, my mouse mastery\nskills are slowing me down today.\n\n674\n00:31:40.200 --> 00:31:41.820\nBut right here on the first page,\n\n675\n00:31:41.820 --> 00:31:45.800\ninside of the properties window, it's\nasking me what IP addresses to listen on.\n\n676\n00:31:45.800 --> 00:31:47.980\nAnd by default, it's all IP addresses,\n\n677\n00:31:47.980 --> 00:31:52.500\nwhich is the loop back, and\neach of your interface's IPs.\n\n678\n00:31:52.500 --> 00:31:55.260\nBut if I choose only the following,\nI can pick and\n\n679\n00:31:55.260 --> 00:31:59.010\nchoose and\njust grab the individual interfaces.\n\n680\n00:31:59.010 --> 00:32:02.970\nAnd when you do that, that's a great way\nto say maybe I have a public interface and\n\n681\n00:32:02.970 --> 00:32:05.790\na private interface, and\nI only want it on a private interface.\n\n682\n00:32:05.790 --> 00:32:07.008\nWe can kind of designate that, and\n\n683\n00:32:07.008 --> 00:32:08.720\nit makes sure that it just\nruns the way we want.\n\n684\n00:32:08.720 --> 00:32:10.880\nBut most of the time,\nwe leave it at all, and\n\n685\n00:32:10.880 --> 00:32:13.130\nwe let our firewalls do the filtering for\nus on that.\n\n686\n00:32:13.130 --> 00:32:15.310\nBecause that's certainly a possibility.\n\n687\n00:32:15.310 --> 00:32:18.340\n&gt;&gt; Well Don, we appreciate you taking\nthe time to show us how to get\n\n688\n00:32:18.340 --> 00:32:20.620\nthe DNS installed on a Windows Box.\n\n689\n00:32:20.620 --> 00:32:22.940\nHowever, I know coming up,\nwe've got a lot more.\n\n690\n00:32:22.940 --> 00:32:26.530\nYou're gonna open the hood up and show us\nhow to get the engine really peaked and\n\n691\n00:32:26.530 --> 00:32:27.110\ntweaked there.\n\n692\n00:32:27.110 --> 00:32:29.860\nWe are gonna have to save that for\nanother episode.\n\n693\n00:32:29.860 --> 00:32:31.640\nHowever, before we sign off,\n\n694\n00:32:31.640 --> 00:32:34.590\ndo you got any additional words about\nyour installation of Windows Box?\n\n695\n00:32:34.590 --> 00:32:36.830\n&gt;&gt; The only thing I can think of\nis I did mention the firewall.\n\n696\n00:32:36.830 --> 00:32:39.670\nIf you have the Windows firewall\nturned on, DNS actually,\n\n697\n00:32:39.670 --> 00:32:42.120\nthe install add rules to allow\nlookups to pass through it, but\n\n698\n00:32:42.120 --> 00:32:44.860\nyou might need to go tweak those\nfirewall rules to match your needs.\n\n699\n00:32:44.860 --> 00:32:46.620\nSo definitely keep an eye on that.\n\n700\n00:32:46.620 --> 00:32:51.750\nAnd then just remember that\nthe server uses TCP and UDP port 53.\n\n701\n00:32:51.750 --> 00:32:52.780\nSo if you had external firewalls,\n\n702\n00:32:52.780 --> 00:32:55.680\nthat's what you need to open to be\nable to gain access to the servers.\n\n703\n00:32:55.680 --> 00:32:56.590\n&gt;&gt; All right, Don, thank you sir.\n\n704\n00:32:56.590 --> 00:32:58.760\nWe appreciate, as always, you being here.\n\n705\n00:32:58.760 --> 00:33:00.290\nWe do appreciate you, the viewer watching.\n\n706\n00:33:00.290 --> 00:33:02.946\nSo, we're gonna go ahead and\nsign out here for ITPRO.TV.\n\n707\n00:33:02.946 --> 00:33:04.486\nI've been your host, Wes Bryan.\n\n708\n00:33:04.486 --> 00:33:05.405\n&gt;&gt; And I'm Don Pezet.\n\n709\n00:33:05.405 --> 00:33:08.321\n&gt;&gt; And we'll see you next time.\n\n710\n00:33:08.321 --> 00:33:14.076\n[MUSIC]\n\n711\n00:33:14.076 --> 00:33:17.486\n&gt;&gt; Thank you for watching ITPRO.TV.\n\n",
          "vimeoId": "196625251"
        },
        {
          "description": "In this episode, Wes and Don have already brought the DNS server online and are now ready to begin creating the DNS database. They look at DNS zones and zone types as well as demonstrate the process of configuring DNS zones in Windows Server.",
          "length": "2217",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-7-2-configuring_zones_in_microsoft_dns-121616-PGM.00_36_43_14.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-7-2-configuring_zones_in_microsoft_dns-121616-PGM.00_36_43_14.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-7-2-configuring_zones_in_microsoft_dns-121616-PGM.00_36_43_14.Still001-sm.jpg",
          "title": "Configuring Zones in Microsoft DNS",
          "transcript": "WEBVTT\n\n1\n00:00:00.000 --> 00:00:02.624\n&gt;&gt; Welcome to IT Pro Tv,\nI'm your host Don Pezet.\n\n2\n00:00:02.624 --> 00:00:10.187\n[CROSSTALK]\n&gt;&gt; You're watching IT Pro TV.\n\n3\n00:00:10.187 --> 00:00:14.820\n&gt;&gt; Welcome to another great\nepisode here at ITProTV.\n\n4\n00:00:14.820 --> 00:00:18.410\nI'm your host Wes Bryan and on today's\nepisode we are continuing through our\n\n5\n00:00:18.410 --> 00:00:22.660\nDNS tech skills and we're going to be\ndealing in the realm of Microsoft and\n\n6\n00:00:22.660 --> 00:00:25.640\njoining us in our endeavors\nis none other than Don Pezet.\n\n7\n00:00:25.640 --> 00:00:26.750\nDon, how you doing sir?\n\n8\n00:00:26.750 --> 00:00:27.690\n&gt;&gt; I'm doing great Wes.\n\n9\n00:00:27.690 --> 00:00:31.600\nReady to dive right back into\nMicrosoft DNS and redeem ourselves for\n\n10\n00:00:31.600 --> 00:00:32.170\nthe last episode.\n\n11\n00:00:32.170 --> 00:00:36.000\nBecause in the last episode we set\nup the world's lamest DNS server,\n\n12\n00:00:36.000 --> 00:00:38.880\nbecause all it was, was a caching server.\n\n13\n00:00:38.880 --> 00:00:39.900\nWe got it up and running.\n\n14\n00:00:39.900 --> 00:00:40.730\nWe saw some options.\n\n15\n00:00:40.730 --> 00:00:44.460\nWe saw some of the things we need to do to\nget a Microsoft DNS server up and going.\n\n16\n00:00:44.460 --> 00:00:46.450\nBut man, it isn't doing anything.\n\n17\n00:00:46.450 --> 00:00:48.810\nWe need to really get this\nthing set up and going, right.\n\n18\n00:00:48.810 --> 00:00:50.470\nSo that's what we're gonna do\nright here in this episode.\n\n19\n00:00:50.470 --> 00:00:54.160\nWe're gonna take a look at forward look\nup zones and reverse look up zones and\n\n20\n00:00:54.160 --> 00:00:56.100\nsee how they work, how they function, and\n\n21\n00:00:56.100 --> 00:00:58.890\nhow we create the records\ninside the DNS server.\n\n22\n00:00:58.890 --> 00:01:02.450\nAnd then,\nwe're not a caching server anymore.\n\n23\n00:01:02.450 --> 00:01:05.300\nNow we're an authoritative name server for\n\n24\n00:01:05.300 --> 00:01:08.090\none of more domains and\nthat's where the power is.\n\n25\n00:01:08.090 --> 00:01:11.560\nSo that's what we're gonna do\nright here in this episode.\n\n26\n00:01:11.560 --> 00:01:12.650\nSo let's get started.\n\n27\n00:01:12.650 --> 00:01:16.380\nWhat I'm gonna do is I have a domain,\nitprotvdemo.org,\n\n28\n00:01:16.380 --> 00:01:19.650\nand I need to host it somewhere.\n\n29\n00:01:19.650 --> 00:01:20.350\nI'm gonna host it here.\n\n30\n00:01:20.350 --> 00:01:21.200\nI've got these servers.\n\n31\n00:01:21.200 --> 00:01:22.450\nThey've got some public IPs on them.\n\n32\n00:01:22.450 --> 00:01:24.090\nSo why not?\nWe'll throw them out there and\n\n33\n00:01:24.090 --> 00:01:25.670\nwe'll get them hosting this zone.\n\n34\n00:01:25.670 --> 00:01:30.300\nNow I need people out there in\nthe world to be able to say, hey.\n\n35\n00:01:30.300 --> 00:01:32.540\nIf I want to find out\nwhere itprotvdemo.org.\n\n36\n00:01:32.540 --> 00:01:33.130\nOr, you know?\n\n37\n00:01:33.130 --> 00:01:34.320\nFind the headers in there.\n\n38\n00:01:34.320 --> 00:01:36.260\nI need to go and\nask a DNS server for the answer.\n\n39\n00:01:36.260 --> 00:01:39.430\nSo I need to tell this server\nthat it's okay to answer for it.\n\n40\n00:01:39.430 --> 00:01:41.330\nThat it's okay to be authoritative for\nthat zone.\n\n41\n00:01:41.330 --> 00:01:44.270\nAnd the way we do it is by\ncreating a forward lookup zone.\n\n42\n00:01:44.270 --> 00:01:47.100\nSo in my DNS manager,\nwhere we're gonna set this up,\n\n43\n00:01:47.100 --> 00:01:50.720\nand let me just run through this, there's\ndifferent ways to get to the DNS manager.\n\n44\n00:01:50.720 --> 00:01:53.140\nIf you're in your server manager already,\nright.\n\n45\n00:01:53.140 --> 00:01:56.960\nWhen you login to Server 2016 it launches\nthe server manager automatically.\n\n46\n00:01:56.960 --> 00:02:00.290\nIn the server manager,\nyou can go to your tools menu up top.\n\n47\n00:02:00.290 --> 00:02:02.020\nAnd you can go to DNS, right.\n\n48\n00:02:02.020 --> 00:02:05.830\nSo, that's one of the quicker ways\nto get there But if you like me and\n\n49\n00:02:05.830 --> 00:02:08.800\nyou constantly close the server\nmanager and forget about it,\n\n50\n00:02:08.800 --> 00:02:11.160\nyou can just go into your Start Menu.\n\n51\n00:02:11.160 --> 00:02:12.680\nAnd in your Start Menu,\n\n52\n00:02:12.680 --> 00:02:18.430\nyou'll find a folder in here called\nWindows Administrative Tools.\n\n53\n00:02:18.430 --> 00:02:21.290\nAnd when we go into Windows Administrative\nTools, you'll find DNS and there also.\n\n54\n00:02:21.290 --> 00:02:24.330\nSo either way, we'll get you right\nin that DNS management tool.\n\n55\n00:02:24.330 --> 00:02:26.010\nAnd you'll be able to manage your stuff.\n\n56\n00:02:26.010 --> 00:02:26.910\nWhich is kind of useful.\n\n57\n00:02:27.950 --> 00:02:32.820\nSo I'm gonna go into my server, and\njust as part of the GUI we're gonna see\n\n58\n00:02:32.820 --> 00:02:36.120\nforward and reverse lookup zones\nthat already show up as a folder.\n\n59\n00:02:36.120 --> 00:02:37.260\nBut they're empty.\n\n60\n00:02:37.260 --> 00:02:39.830\nRight?\nAnd remember sometimes there can be hidden\n\n61\n00:02:39.830 --> 00:02:42.700\nobjects in these things, so I'm gonna go\nup to view and turn on the advanced view.\n\n62\n00:02:42.700 --> 00:02:47.960\nAnd I'll see that it's still empty even\nif I refresh it nothing special there but\n\n63\n00:02:47.960 --> 00:02:49.170\nI'm going to to turn off\nthe advance menu for\n\n64\n00:02:49.170 --> 00:02:52.730\nnow, cuz I want to show you something a\nlittle bit later that will come into play.\n\n65\n00:02:52.730 --> 00:02:55.680\nBut for right now, I just don't have\nany Forward Lookup Zones that's why I'm\n\n66\n00:02:55.680 --> 00:02:59.210\na caching only server,\nI can't answer anything authoritatively.\n\n67\n00:02:59.210 --> 00:03:03.830\nIf you right click on Forward Lookup\nZones, you can create a new zone.\n\n68\n00:03:03.830 --> 00:03:09.280\nNow for those of you coming from\nthe bind world or Power DNS or whatever.\n\n69\n00:03:09.280 --> 00:03:10.430\nYou know the truth.\n\n70\n00:03:10.430 --> 00:03:12.610\nYou know that there is really no\ndifference between forward look-up\n\n71\n00:03:12.610 --> 00:03:14.140\nzone and a reverse look-up zone.\n\n72\n00:03:14.140 --> 00:03:16.260\nThe only difference,\nreally, is in the records.\n\n73\n00:03:16.260 --> 00:03:21.620\nIn a forward look-up zone, we create\nrecords that map a name to an IP.\n\n74\n00:03:21.620 --> 00:03:25.890\nAnd in a reverse look-up zone we create\na record that maps an IP to a name.\n\n75\n00:03:25.890 --> 00:03:28.270\nBut the way the zone works is identical.\n\n76\n00:03:28.270 --> 00:03:31.650\nIt's, whatever's on the left\nresolves to whatever's on the right.\n\n77\n00:03:31.650 --> 00:03:34.240\nIt's just backwards in\na reverse lookup zone.\n\n78\n00:03:34.240 --> 00:03:39.390\nSo in other DNS servers, they don't\nseparate between Forward and Reverse.\n\n79\n00:03:39.390 --> 00:03:42.750\nBut Microsoft does because the GUI\nis a little bit different,\n\n80\n00:03:42.750 --> 00:03:43.530\nbased on what we're doing.\n\n81\n00:03:43.530 --> 00:03:45.360\nAnd it's because it's a graphical tool.\n\n82\n00:03:45.360 --> 00:03:46.940\nIf this was a command-line only tool,\n\n83\n00:03:46.940 --> 00:03:49.530\nwe probably wouldn't differentiate\nthere either, all right?\n\n84\n00:03:49.530 --> 00:03:52.030\nBut I'm going to come in and\ncreate a Forward Lookup Zone, and\n\n85\n00:03:52.030 --> 00:03:55.770\nwhen I create that zone it's\na pretty straight forward process.\n\n86\n00:03:55.770 --> 00:03:58.810\nI really just have to tell it the domain\nthat I'm going to be handling.\n\n87\n00:03:58.810 --> 00:04:03.180\nNow, on the very first set up screen\nhere that I get to, I get a choice.\n\n88\n00:04:03.180 --> 00:04:03.890\nRight?\n\n89\n00:04:03.890 --> 00:04:08.560\nAnd, you may have one or two or all three\nof these options, some of them might\n\n90\n00:04:08.560 --> 00:04:12.110\nbe grayed out, like my Store the zone\nin the Active Directory option,\n\n91\n00:04:12.110 --> 00:04:13.360\nway down here at the bottom,\nis grayed out.\n\n92\n00:04:13.360 --> 00:04:15.120\nI can't click it, right?\n\n93\n00:04:15.120 --> 00:04:17.350\nBut the other options are lit up,\nand I can choose them.\n\n94\n00:04:17.350 --> 00:04:20.010\nNow, what are each of these?\n\n95\n00:04:20.010 --> 00:04:22.540\nNormally, you're going to\nbe creating a primary zone.\n\n96\n00:04:22.540 --> 00:04:27.640\nA primary zone means,\nyou've got the main copy of the zone and\n\n97\n00:04:27.640 --> 00:04:29.860\nyou are the authoritative server for.\n\n98\n00:04:29.860 --> 00:04:33.676\nYou're the head hunter,\nyou're the one who's in charge, all right?\n\n99\n00:04:33.676 --> 00:04:38.830\nBut if there's already somebody in charge,\nyou might just be a replica.\n\n100\n00:04:38.830 --> 00:04:41.540\nI'm gonna hold a copy of that zone.\n\n101\n00:04:41.540 --> 00:04:45.360\nAnd if I hold a copy,\nthem I'm a secondary zone, okay?\n\n102\n00:04:45.360 --> 00:04:49.100\nA primary and a secondary,\nin Bind terminology.\n\n103\n00:04:49.100 --> 00:04:50.840\nWhich all of this is based on Bind, right?\n\n104\n00:04:50.840 --> 00:04:52.690\nThe Berkeley Internet Name Demon.\n\n105\n00:04:52.690 --> 00:04:57.670\nThe service that is used as the reference\nfor the DNS infrastructure.\n\n106\n00:04:58.740 --> 00:05:00.340\nThey use the master/slave model, right?\n\n107\n00:05:00.340 --> 00:05:02.770\nSo you have a master server, and\nall the other servers are slaves.\n\n108\n00:05:02.770 --> 00:05:07.460\nWell, that terminology is not really\naccepted by most people these days.\n\n109\n00:05:07.460 --> 00:05:10.220\nAnd so Microsoft has just renamed\nthat as primary and secondary.\n\n110\n00:05:10.220 --> 00:05:14.570\nBut on the back end it is 100%\ncompletely compatible with BIND.\n\n111\n00:05:14.570 --> 00:05:18.960\nSo I could have a primary server that's\nBIND And a Microsoft server that's\n\n112\n00:05:18.960 --> 00:05:22.440\na secondary off of it,\nthat's a slave to the BIND master, right?\n\n113\n00:05:22.440 --> 00:05:23.330\nOr the other way around.\n\n114\n00:05:23.330 --> 00:05:25.840\nI can have a Microsoft\nserver that's primary and\n\n115\n00:05:25.840 --> 00:05:29.330\nhave a BIND server that was a slave\noff of the Microsoft server.\n\n116\n00:05:29.330 --> 00:05:32.420\nAnd I can even mix and\nmatch where I have some BIND slaves and\n\n117\n00:05:32.420 --> 00:05:35.680\nsome Microsoft slaves, cuz they're all\ncompletely compatible with each other.\n\n118\n00:05:35.680 --> 00:05:38.430\nMicrosoft In a rarity,\n\n119\n00:05:38.430 --> 00:05:41.390\ncompletely conformed to the standards\non that one when they set it up.\n\n120\n00:05:41.390 --> 00:05:43.420\nWell, we'll see where they\nbreak that here in a minute.\n\n121\n00:05:43.420 --> 00:05:45.180\nBut, that's the Primary and\n\n122\n00:05:45.180 --> 00:05:47.690\nSecondary right there, it basically\nsetting it up for replication.\n\n123\n00:05:47.690 --> 00:05:50.480\nIf this is the first time I'm creating it,\nthen I'm gonna be the master for\n\n124\n00:05:50.480 --> 00:05:52.200\nthat zone, and\nI would choose Primary zone.\n\n125\n00:05:53.200 --> 00:05:58.380\nThere is a third option here which\nis Stub zone A stub zone is where\n\n126\n00:05:58.380 --> 00:06:03.730\nI create a domain in here,\nbut I don't actually host it.\n\n127\n00:06:03.730 --> 00:06:06.770\nInstead, I have entries in that zone that\n\n128\n00:06:06.770 --> 00:06:09.680\npoint to name server somewhere else,\nright.\n\n129\n00:06:09.680 --> 00:06:13.208\nSo I kinda use it to like\nforward to somebody else.\n\n130\n00:06:13.208 --> 00:06:17.960\nSee how it says a server containing a stub\nzone is not authoritative for that zone.\n\n131\n00:06:17.960 --> 00:06:20.300\nI'm not authoritative,\nI can't answer for the A records and\n\n132\n00:06:20.300 --> 00:06:22.040\nthings that are inside of it.\n\n133\n00:06:22.040 --> 00:06:26.130\nI'm answering for\nname servers to override for that domain.\n\n134\n00:06:26.130 --> 00:06:30.920\n&gt;&gt; Don, you briefly explained in\nanother episode when you got DNS\n\n135\n00:06:30.920 --> 00:06:35.410\ninstalled here that you would just if it's\ncaching server you can also forward over\n\n136\n00:06:35.410 --> 00:06:37.740\nwhat would be a difference\nusing the forwarder and\n\n137\n00:06:37.740 --> 00:06:41.070\nusing the stub zone if you are pointing\nto somebody that is authoritative?\n\n138\n00:06:41.070 --> 00:06:44.680\n&gt;&gt; Sure, the forwarder,\nthat forwards everything, right?\n\n139\n00:06:44.680 --> 00:06:46.930\nMaybe I just want to forward one domain.\n\n140\n00:06:46.930 --> 00:06:48.710\nA regular forwarder can't do that, right?\n\n141\n00:06:48.710 --> 00:06:50.840\nSo when I come in here, I can.\n\n142\n00:06:50.840 --> 00:06:56.420\nFor example, let's say that\nthis is itprotvdemo.org, right?\n\n143\n00:06:56.420 --> 00:06:59.900\nWell our main domain is itpro.tv and\n\n144\n00:06:59.900 --> 00:07:02.070\nwe have a different DNS\nserver that manages that.\n\n145\n00:07:02.070 --> 00:07:04.650\nMaybe I've got a VPN tunnel\nthat connects it to.\n\n146\n00:07:04.650 --> 00:07:05.200\nRight.\nThis\n\n147\n00:07:05.200 --> 00:07:06.580\ncan be two separate companies for\nthat matter.\n\n148\n00:07:06.580 --> 00:07:08.540\nRight.\nWe got a VPN tunnel and\n\n149\n00:07:08.540 --> 00:07:11.280\ndata DNS server right on\nthe other side of the VPN tunnel.\n\n150\n00:07:11.280 --> 00:07:14.170\nWouldn't it be nice if when I\ndid a DNS look up for admin and\n\n151\n00:07:14.170 --> 00:07:17.330\ninstead of going out to the internet and\nusing public servers that might have\n\n152\n00:07:17.330 --> 00:07:20.450\npotentially poisoned caches\nbecause of internet attacks.\n\n153\n00:07:20.450 --> 00:07:24.750\nInstead if I forward the DNS lookups\nover the VPN tunnel to their\n\n154\n00:07:24.750 --> 00:07:28.340\ninternal DNS server so I knew I was\ngetting something good, clean and safe.\n\n155\n00:07:28.340 --> 00:07:30.400\nRight, you can do that with a Stub zone.\n\n156\n00:07:30.400 --> 00:07:33.500\nI can put an entry in there and instead of\ngoing out to the internet where the name\n\n157\n00:07:33.500 --> 00:07:37.720\nservers will be listed with public IP's I\ncould override the name servers And\n\n158\n00:07:37.720 --> 00:07:40.740\nput private IPs that were on\nthe other side of that VPN tunnel.\n\n159\n00:07:40.740 --> 00:07:43.580\nAnd I'm just redirecting their domain.\n\n160\n00:07:43.580 --> 00:07:46.420\nEverything else might still be using\na forwarder and going out to Google, or\n\n161\n00:07:46.420 --> 00:07:49.250\nwhoever I'm using as my servers whoever,\nright?\n\n162\n00:07:49.250 --> 00:07:52.970\nBut that one domain would now get\nforwarded over to the other side It's not\n\n163\n00:07:52.970 --> 00:07:53.875\na standard zone.\n\n164\n00:07:53.875 --> 00:07:56.802\nThat's actually a kind of Microsoft\nimplementation, but Bind and\n\n165\n00:07:56.802 --> 00:08:00.088\nthe other guys they have something similar\nthey can set up which are actually\n\n166\n00:08:00.088 --> 00:08:03.449\ncalled stub zones there too, they're\njust set up a slightly different way.\n\n167\n00:08:03.449 --> 00:08:07.278\nNow the last option, store the zone in the\nactive directory.Plasmapheresis As long as\n\n168\n00:08:07.278 --> 00:08:10.654\nwe're maintaining Bind capability,\nthat's gonna be grayed out, right?\n\n169\n00:08:10.654 --> 00:08:13.310\nAnd also I'm not a domain controller.\n\n170\n00:08:13.310 --> 00:08:16.250\nI have to have an active directory to\nstore something in the active directory,\n\n171\n00:08:16.250 --> 00:08:17.600\nand this machine is not a part of one.\n\n172\n00:08:17.600 --> 00:08:19.900\nSo I don't have the option so\nit's grayed out there too.\n\n173\n00:08:19.900 --> 00:08:23.250\nIn the Bind world your primary and\nsecondary servers\n\n174\n00:08:23.250 --> 00:08:26.720\nmaintain the DNS configuration in\na text file right on the hard drive.\n\n175\n00:08:26.720 --> 00:08:29.710\nAnd Windows Server will\ndo that also by default.\n\n176\n00:08:29.710 --> 00:08:33.450\nAnd the primary is where you make changes\nand it replicates after the secondary so\n\n177\n00:08:33.450 --> 00:08:35.929\nthe secondaries are effectively read only,\nright?\n\n178\n00:08:35.929 --> 00:08:37.500\nYou can't make a change on the secondary.\n\n179\n00:08:38.820 --> 00:08:42.420\nBut, if you've got the Microsoft Active\ndirectory in place, and\n\n180\n00:08:42.420 --> 00:08:46.240\nthis is a domain controller,\nyou can check this box.\n\n181\n00:08:46.240 --> 00:08:50.770\nAnd your primary zone will get stored\nin the active directory instead of\n\n182\n00:08:50.770 --> 00:08:52.590\na file on the hard drive.\n\n183\n00:08:52.590 --> 00:08:55.380\nYou're still compatible with Bind,\nyou could have Bind slaves.\n\n184\n00:08:55.380 --> 00:09:01.530\nBut if you have other Windows servers,\nthey can see the DNS zones\n\n185\n00:09:01.530 --> 00:09:05.620\nthrough the active directory, replicated\nin time with the active directory.\n\n186\n00:09:05.620 --> 00:09:10.040\n&gt;&gt; In other episodes you've showed us\nhow you can configure replications, Don.\n\n187\n00:09:10.040 --> 00:09:12.720\nI can only assume here that if\nit's a stored in Active Directory,\n\n188\n00:09:12.720 --> 00:09:16.260\ndo you get the benefits of the multi-mass\nto replication that Active Directory does?\n\n189\n00:09:16.260 --> 00:09:19.050\n&gt;&gt; Absolutely, and so technically,\nreplication is already set up, right?\n\n190\n00:09:19.050 --> 00:09:20.258\nI don't have to set it up.\n\n191\n00:09:20.258 --> 00:09:24.260\nOnce I bind that into the active\ndirectory, now it replicates alongside it.\n\n192\n00:09:24.260 --> 00:09:27.310\nSo I'm going to any domain\ncontroller in my organization.\n\n193\n00:09:27.310 --> 00:09:31.680\nI can add the DNS roll, and\nall of my zones will magically appear.\n\n194\n00:09:31.680 --> 00:09:34.780\nAnd even better,\nits multi-master like Wes said.\n\n195\n00:09:34.780 --> 00:09:36.822\nI can make changes on anyone of them and\n\n196\n00:09:36.822 --> 00:09:40.090\nthen it'll replicate it because\nActive Directory sorts out conflicts.\n\n197\n00:09:40.090 --> 00:09:44.050\nBind in the old file structure,\nit just uses a serial number, and\n\n198\n00:09:44.050 --> 00:09:45.820\nit has no way to resolve a conflict.\n\n199\n00:09:45.820 --> 00:09:48.090\nIf I make two changes at the same\ntime on two different servers,\n\n200\n00:09:48.090 --> 00:09:50.490\nit can't figure that out,\nActive Directory can.\n\n201\n00:09:50.490 --> 00:09:54.130\nSo you get a lot of benefits\nwith that Microsoft environment.\n\n202\n00:09:54.130 --> 00:09:58.110\nBut if you bring in some Bind slaves or\nwhatever, they can't deal with that.\n\n203\n00:09:58.110 --> 00:10:00.580\nThey can replicate it, they get the one\nway, but you can't make changes.\n\n204\n00:10:00.580 --> 00:10:02.720\nYou can't participate in\nthe multi master model.\n\n205\n00:10:02.720 --> 00:10:05.860\nSo if you're an all Microsoft shop\nstoring in the active directory is great.\n\n206\n00:10:05.860 --> 00:10:07.210\nIt really does make things easy.\n\n207\n00:10:07.210 --> 00:10:10.170\nYou can spin up new DNS\nservers super easy.\n\n208\n00:10:10.170 --> 00:10:13.960\nBut in the traditional world we\ndo primaryies and secondaries.\n\n209\n00:10:13.960 --> 00:10:16.090\nSo I'm going to do a primary\nsince this is the very first one,\n\n210\n00:10:16.090 --> 00:10:19.090\nand we'll deal with replication\nin the next episode.\n\n211\n00:10:19.090 --> 00:10:19.792\nNow I'm going to create a zone.\n\n212\n00:10:19.792 --> 00:10:22.660\nMine is going to be itprotvdemo.org right?\n\n213\n00:10:22.660 --> 00:10:25.150\nSo we just type in whatever domain\nname it is that we're trying to be\n\n214\n00:10:25.150 --> 00:10:25.900\nauthoritative for.\n\n215\n00:10:27.523 --> 00:10:32.260\nAnd then it's gonna create a file\non the hard drive to store this.\n\n216\n00:10:32.260 --> 00:10:35.630\nNow if I chose an active directory,\nit wouldn't ask me this.\n\n217\n00:10:35.630 --> 00:10:38.560\nIt's not gonna go in a file,\nit's gonna go in the AD.\n\n218\n00:10:38.560 --> 00:10:40.540\nBut in the standard mode,\nit has to be stored as a file.\n\n219\n00:10:40.540 --> 00:10:41.960\nAnd it gives you a recommended file name.\n\n220\n00:10:41.960 --> 00:10:43.510\nYou can call it whatever you want.\n\n221\n00:10:43.510 --> 00:10:45.480\nCall it bob.text, who cares?\n\n222\n00:10:45.480 --> 00:10:46.700\nIt just needs to be a text file.\n\n223\n00:10:46.700 --> 00:10:47.879\nAnd that's how it's gonna read and write.\n\n224\n00:10:47.879 --> 00:10:50.250\nAnd it's 100% compatible with Vine.\n\n225\n00:10:50.250 --> 00:10:52.790\nSo I can take this file and\nopen it up in a text editor.\n\n226\n00:10:52.790 --> 00:10:53.960\nAnd see what's inside of it.\n\n227\n00:10:53.960 --> 00:10:56.050\n&gt;&gt; Now I've also noticed,\ntoo, in other episodes.\n\n228\n00:10:56.050 --> 00:10:57.570\nWhen we've been looking at Vine, Don.\n\n229\n00:10:57.570 --> 00:11:00.270\nThat there's that trailing dot\nthere that represents the root.\n\n230\n00:11:00.270 --> 00:11:03.470\nAnd I don't see it present\nhere in this file name.\n\n231\n00:11:03.470 --> 00:11:04.950\nIs there a reason behind that?\n\n232\n00:11:04.950 --> 00:11:06.650\n&gt;&gt; Well, this is just a file, right?\n\n233\n00:11:06.650 --> 00:11:10.130\nSo that dot normally represents\nthe root servers, and\n\n234\n00:11:10.130 --> 00:11:12.260\na file doesn't have a root server,\nso we don't need it there.\n\n235\n00:11:12.260 --> 00:11:14.440\nBut I didn't put the dot back here either,\nand\n\n236\n00:11:14.440 --> 00:11:16.810\nthat's because Microsoft does it for me.\n\n237\n00:11:16.810 --> 00:11:20.830\nThis is all kind of designed\nto be as easy as possible.\n\n238\n00:11:20.830 --> 00:11:22.590\nSo if you put the dot it's not a big deal.\n\n239\n00:11:22.590 --> 00:11:24.653\nLike I say, itprotvdemo.org dot, and\n\n240\n00:11:24.653 --> 00:11:28.788\nif I move forward to see it was happy with\nthat too, Microsoft accounts for that.\n\n241\n00:11:28.788 --> 00:11:32.990\nBind Unix and Linux, not very\nforgiving operating systems are they.\n\n242\n00:11:32.990 --> 00:11:34.490\nThey expect you to know what you're doing.\n\n243\n00:11:34.490 --> 00:11:37.780\nAnd God forbid the network admins\nknew what they were doing, right?\n\n244\n00:11:37.780 --> 00:11:41.110\nMicrosoft says, hey, the network admins\nmay or may not know what they're doing,\n\n245\n00:11:41.110 --> 00:11:42.310\nand we'll allow for that.\n\n246\n00:11:42.310 --> 00:11:45.080\nSo it's just kind of\nkeeping us clean there.\n\n247\n00:11:45.080 --> 00:11:47.540\nNow I mentioned Bind\ncompatibility more than once.\n\n248\n00:11:47.540 --> 00:11:50.180\nIf I have a zone that\nwas on a Bind server.\n\n249\n00:11:50.180 --> 00:11:53.740\nI can actually take the zone\nfile from Bind, and\n\n250\n00:11:53.740 --> 00:11:56.320\ncopy it right over here, and import it in.\n\n251\n00:11:56.320 --> 00:11:58.665\nI can use an existing file and\npoint to it.\n\n252\n00:11:58.665 --> 00:12:01.470\n100% compatible,\nit'll load them right up and off you go.\n\n253\n00:12:01.470 --> 00:12:04.930\nIt's a really easy to migrate one way or\nthe other, to migrate to Microsoft,\n\n254\n00:12:04.930 --> 00:12:05.830\nwhich is what they want.\n\n255\n00:12:05.830 --> 00:12:08.449\nOr migrate away from Microsoft\nwhich is what they don't want, but\n\n256\n00:12:08.449 --> 00:12:09.536\nit's very easy to do both.\n\n257\n00:12:11.202 --> 00:12:15.219\nAll right, on the next screen it's gonna\nask me something kind of important.\n\n258\n00:12:16.240 --> 00:12:21.640\nIf I am deploying this and I want it\nto be a true DNS standard server,\n\n259\n00:12:21.640 --> 00:12:25.500\nthen I don't want what\nI call dynamic updates.\n\n260\n00:12:25.500 --> 00:12:29.357\nDynamic updates are a feature that\nwas released about ten years ago,\n\n261\n00:12:29.357 --> 00:12:34.294\nmaybe a little bit longer, that originally\nwas really popular in the Microsoft World.\n\n262\n00:12:34.294 --> 00:12:36.471\nBut now it's stretched out\nto other environments, so\n\n263\n00:12:36.471 --> 00:12:38.820\nit's used by a lot of\ndifferent people now.\n\n264\n00:12:38.820 --> 00:12:42.660\nBut what it does is it says hey,\nit's hard to maintain DNS records.\n\n265\n00:12:42.660 --> 00:12:46.057\nThat every time I add a new computer to\nthe network, I don't wanna have to go and\n\n266\n00:12:46.057 --> 00:12:47.356\ncreate a record for it in DNS.\n\n267\n00:12:47.356 --> 00:12:49.080\nIt's just very time consuming.\n\n268\n00:12:49.080 --> 00:12:53.000\nSo, what if we had machines\nmake their own record, right?\n\n269\n00:12:53.000 --> 00:12:56.974\nI might have 1000 laptops, and\nI have a DHCP server for them,\n\n270\n00:12:56.974 --> 00:12:59.371\nso their IPs are constantly changing.\n\n271\n00:12:59.371 --> 00:13:03.048\nWouldn't it be nice if when\na laptop got a new IP,\n\n272\n00:13:03.048 --> 00:13:07.160\nit reached out to DNS and\nupdated it's own record.\n\n273\n00:13:07.160 --> 00:13:08.838\nNow I didn't have to do it,\nit's just automatic.\n\n274\n00:13:08.838 --> 00:13:11.290\nThey dynamically update their records,\nthat would be nice.\n\n275\n00:13:11.290 --> 00:13:14.060\nIt would also be a security concern.\n\n276\n00:13:14.060 --> 00:13:15.062\nDo you want to allow everyone\n\n277\n00:13:15.062 --> 00:13:16.950\nfrom your network to be able\nto write to your DNS zone?\n\n278\n00:13:16.950 --> 00:13:20.710\nThat would be bad, so\nwhen you look at the options here and\n\n279\n00:13:20.710 --> 00:13:22.670\nsaying, do you wanna allow it?\n\n280\n00:13:22.670 --> 00:13:28.130\nAnd then if you do, do you wanna\nallow non-secure and secure updates?\n\n281\n00:13:28.130 --> 00:13:28.710\nIn other words,\n\n282\n00:13:28.710 --> 00:13:32.950\nwhen you're allowed even unauthenticated\nusers to update, that's not good.\n\n283\n00:13:32.950 --> 00:13:35.260\nOr do I wanna require\nsecure dynamic updates?\n\n284\n00:13:35.260 --> 00:13:37.700\nAnd notice that security\ndynamic updates are grayed out.\n\n285\n00:13:37.700 --> 00:13:40.950\nIt only works when you're\nActive Directory integrated.\n\n286\n00:13:40.950 --> 00:13:45.840\nBecause Bind in the official\nDNS standard in the,\n\n287\n00:13:45.840 --> 00:13:50.920\nnot the RFC, I don't know,\nwhatever the heck the standard is for DNS.\n\n288\n00:13:50.920 --> 00:13:52.990\nMaybe it is RFC, but whatever.\n\n289\n00:13:52.990 --> 00:13:57.800\nIt doesn't actually provide a method for\nauthenticating for doing dynamic updates.\n\n290\n00:13:57.800 --> 00:13:59.740\nIt does provide a way for\ndoing dynamic updates but\n\n291\n00:13:59.740 --> 00:14:01.650\nit doesn't provide a method for\nauthenticating it.\n\n292\n00:14:01.650 --> 00:14:05.650\nAnd so Microsoft put a proprietary\nway on there to solve the problem.\n\n293\n00:14:05.650 --> 00:14:08.240\nBut it's proprietary,\nit's not a standard, and so\n\n294\n00:14:08.240 --> 00:14:11.080\nthat's why it only works\nwith the active directory.\n\n295\n00:14:11.080 --> 00:14:14.080\n&gt;&gt; You said as far as a non-secure\nupdate that would be bad.\n\n296\n00:14:14.080 --> 00:14:17.300\nAnd I'm thinking, and\nyou can correct me if I'm wrong here, Don.\n\n297\n00:14:17.300 --> 00:14:20.380\nAre you talking about a poisoning\nof your zone file, or\n\n298\n00:14:20.380 --> 00:14:22.290\njust false records getting in there?\n\n299\n00:14:22.290 --> 00:14:27.151\n&gt;&gt; Yeah, both, really,\nif you allowed non-secure updates I\n\n300\n00:14:27.151 --> 00:14:31.645\ncould take a laptop and\nI could spoof my laptop's name.\n\n301\n00:14:31.645 --> 00:14:34.070\nGive it the same name as\none of the servers, right?\n\n302\n00:14:34.070 --> 00:14:35.660\nNow on a Windows box, it would go nuts.\n\n303\n00:14:35.660 --> 00:14:37.210\nBut on a Linux box, it doesn't care.\n\n304\n00:14:37.210 --> 00:14:41.440\nSo I could take a Linux box, and\ngive it the same name as a server.\n\n305\n00:14:41.440 --> 00:14:45.780\nPush an update to DNS, and\noverwrite the server's value.\n\n306\n00:14:45.780 --> 00:14:48.390\nAnd now, everybody trying to\nget to that server comes to me.\n\n307\n00:14:48.390 --> 00:14:51.350\nAnd I can fire up a protocol sniffer,\nand start capturing all that traffic,\n\n308\n00:14:51.350 --> 00:14:53.470\nand going crazy,\nhaving a lot of fun, right?\n\n309\n00:14:53.470 --> 00:14:55.317\nYou could override any\nkind of value like that,\n\n310\n00:14:55.317 --> 00:14:58.240\nthat would be the type of problem you\nhave, you could poison the DNS cache.\n\n311\n00:14:58.240 --> 00:15:00.050\nThere's all sorts of crazy things\nthat you could do from there.\n\n312\n00:15:00.050 --> 00:15:01.840\nYou can poison the cache\nwithout writing a record.\n\n313\n00:15:01.840 --> 00:15:04.520\nSo there's different ways\nto do stuff like that.\n\n314\n00:15:04.520 --> 00:15:05.980\nBut that's the big risk we have there.\n\n315\n00:15:05.980 --> 00:15:09.620\nSo it's not recommended that you do\nnon-secure unless you have a completely\n\n316\n00:15:09.620 --> 00:15:12.400\ntrustworthy network where you\ncontrol all the equipment.\n\n317\n00:15:12.400 --> 00:15:13.970\nBut even if you control the equipment,\n\n318\n00:15:13.970 --> 00:15:15.790\nyou don't always control\nthe people behind them.\n\n319\n00:15:15.790 --> 00:15:19.470\nSo it is a good idea that either go\nsecure or not allow dynamic update.\n\n320\n00:15:19.470 --> 00:15:20.950\nThat's what I'm gonna do\nis I'm not gonna allow it.\n\n321\n00:15:23.980 --> 00:15:26.320\nAll right, after that I just get\nmy little summary I can finish.\n\n322\n00:15:26.320 --> 00:15:30.227\nAnd now I'm the proud owner of\na new itprotvdemo.org zone.\n\n323\n00:15:31.380 --> 00:15:32.660\nOnce I've got a zone,\n\n324\n00:15:32.660 --> 00:15:36.600\nit's not incredibly useful until I start\nto create some records inside of it.\n\n325\n00:15:36.600 --> 00:15:38.720\nNow, if you watch the other\nDNS shows that we filmed.\n\n326\n00:15:38.720 --> 00:15:41.453\nI talked about the standard\nformat of a zone file, and\n\n327\n00:15:41.453 --> 00:15:45.190\nthere's three things that\nare required inside a zone file.\n\n328\n00:15:45.190 --> 00:15:49.374\nThere's the default time to live,\nthe start of authority, and\n\n329\n00:15:49.374 --> 00:15:53.957\ntechnically two name servers, but\nat least one name server to get by.\n\n330\n00:15:53.957 --> 00:15:56.571\nSo, this new zone that just got created,\n\n331\n00:15:56.571 --> 00:15:59.345\nthere is a default TTL\nthat Microsoft sets.\n\n332\n00:15:59.345 --> 00:16:00.860\nIt's hidden from the screen.\n\n333\n00:16:00.860 --> 00:16:04.821\nAnd then here's the start of authority and\nhere's my first name server.\n\n334\n00:16:04.821 --> 00:16:08.670\nSo it's giving me the bare minimum for\nthe zone to get it operational.\n\n335\n00:16:08.670 --> 00:16:12.510\nBut there's plenty of other things\nthat I can tweak and change.\n\n336\n00:16:12.510 --> 00:16:15.300\nIf I wanna modify this start of authority,\nI can.\n\n337\n00:16:15.300 --> 00:16:18.435\nYou'll notice that it kinda sets\na default administrator that\n\n338\n00:16:18.435 --> 00:16:21.650\nhostmaster.itprotvdemo.net.\n\n339\n00:16:21.650 --> 00:16:25.890\nActually mine own server is\ndns1.itprotvdemo.net not .org,\n\n340\n00:16:25.890 --> 00:16:27.280\nthe zone is .org.\n\n341\n00:16:27.280 --> 00:16:30.970\nYou know what, I might want to\nchange that or my primary DNS server\n\n342\n00:16:30.970 --> 00:16:33.380\nwhich is showing that .net address,\nmaybe I want to change that.\n\n343\n00:16:33.380 --> 00:16:35.600\nThere's different things\nbeen going here to modify.\n\n344\n00:16:35.600 --> 00:16:39.460\nNow normally in this screen we're\nmodifying the records that are in here.\n\n345\n00:16:39.460 --> 00:16:42.440\nThe name server in start of authority,\nyou're not supposed to modify right here.\n\n346\n00:16:42.440 --> 00:16:45.350\nIf you pull up the properties of the zone.\n\n347\n00:16:45.350 --> 00:16:51.110\nSo if I go in here to properties, here\nis where we change the zone file name.\n\n348\n00:16:51.110 --> 00:16:52.990\nYou can change your dynamic updates.\n\n349\n00:16:52.990 --> 00:16:56.640\nIf you change your mind, and you want\nto switch later on, you can set those.\n\n350\n00:16:56.640 --> 00:16:58.780\nYou can change, see how mine's a primary?\n\n351\n00:16:58.780 --> 00:17:01.530\nAnd if I chose not to go in the AD,\n\n352\n00:17:01.530 --> 00:17:03.680\nI can change my mind later and\nmove it into the AD.\n\n353\n00:17:03.680 --> 00:17:06.920\nAnd so I can change that, and you can even\nmove it back again, take it out of the AD\n\n354\n00:17:06.920 --> 00:17:08.950\nand put it back in a file,\nyou can go back and forth pretty easily.\n\n355\n00:17:09.990 --> 00:17:13.840\nHere I've got my start of authority, and\nhere's where I can change those values.\n\n356\n00:17:13.840 --> 00:17:17.100\nMy serial number, my primary server,\nmy responsible person.\n\n357\n00:17:17.100 --> 00:17:21.040\nMaybe I wanna make this admin,\n@itprotvdemo.net, right?\n\n358\n00:17:21.040 --> 00:17:24.620\nSo you put that in, and\nsee how these do have the dots at the end?\n\n359\n00:17:24.620 --> 00:17:26.560\nBecause in the start of authority file,\nyou're supposed to have that.\n\n360\n00:17:26.560 --> 00:17:29.450\nIt did it for me, but now I see them.\n\n361\n00:17:29.450 --> 00:17:32.750\nAnd my other values that need to show up,\nmy Refresh interval, Retry,\n\n362\n00:17:32.750 --> 00:17:36.500\nExpire, Minimum time to live, each of\nthese different things that are in here.\n\n363\n00:17:36.500 --> 00:17:38.020\nAnd the time to live for\nthis record itself.\n\n364\n00:17:38.020 --> 00:17:39.980\nSo I can manipulate each of these.\n\n365\n00:17:39.980 --> 00:17:42.330\nI can easily increment that serial number.\n\n366\n00:17:42.330 --> 00:17:44.870\nIt will increment it for\nme as I make changes,\n\n367\n00:17:44.870 --> 00:17:47.300\nwhich is an improvement over bind,\nwhere you have to do it manually.\n\n368\n00:17:48.670 --> 00:17:50.880\nAnd as far as the name servers,\nthey're defined right here.\n\n369\n00:17:50.880 --> 00:17:52.257\nI've got just one name server.\n\n370\n00:17:52.257 --> 00:17:53.644\nI might want a second name server.\n\n371\n00:17:53.644 --> 00:17:59.440\nSo I can add in another one,\nlike DNS2.ipprotv.demo.net.\n\n372\n00:17:59.440 --> 00:18:02.040\nAnd I can drop that one in,\nso there it is.\n\n373\n00:18:03.760 --> 00:18:05.570\nAnd now I've got it, too, right?\n\n374\n00:18:05.570 --> 00:18:07.080\nI wonder why it didn't resolve itself.\n\n375\n00:18:07.080 --> 00:18:07.820\nThat's kinda interesting.\n\n376\n00:18:09.210 --> 00:18:10.420\nWell, there we go.\n\n377\n00:18:10.420 --> 00:18:12.360\nAll right, so I see it.\n\n378\n00:18:12.360 --> 00:18:16.450\nAgain, I have a local IP that's\nalso mapped to a public IP.\n\n379\n00:18:16.450 --> 00:18:18.770\nSo see how it detected\nmultiple IPs on itself?\n\n380\n00:18:18.770 --> 00:18:20.590\nVersus this one where it\njust got the public IP so\n\n381\n00:18:20.590 --> 00:18:23.340\nthat's why it's kind of wonky there,\nbut I'll leave it the way it is.\n\n382\n00:18:23.340 --> 00:18:26.230\nSo once that's set up now,\nI've got these DNS servers in place.\n\n383\n00:18:26.230 --> 00:18:28.780\nAnd, I could continue to add\nmore if I needed to, and\n\n384\n00:18:28.780 --> 00:18:30.730\nI could go ahead and finish out.\n\n385\n00:18:30.730 --> 00:18:34.025\n&gt;&gt; And, Don, in other episodes, like for\ninstance, with bind you were doing all\n\n386\n00:18:34.025 --> 00:18:36.645\nthis through a text file, is that\nessentially what the gooey front end is\n\n387\n00:18:36.645 --> 00:18:40.185\ndoing for us if it's following bind,\nif Microsoft is following bind,\n\n388\n00:18:40.185 --> 00:18:44.465\nit's adding those entries or\nmodifying what's in that file?\n\n389\n00:18:44.465 --> 00:18:45.055\n&gt;&gt; Absolutely.\n\n390\n00:18:45.055 --> 00:18:47.185\nYeah, it is creating a text\nfile in the background.\n\n391\n00:18:47.185 --> 00:18:50.115\nLet's create a few records, and\nonce we get some records I'll go and\n\n392\n00:18:50.115 --> 00:18:52.875\nshow you that file so you can see it,\nit's actually looks kind of neat.\n\n393\n00:18:52.875 --> 00:18:55.960\nDo be aware, though,\nthat Microsoft does all this in ram.\n\n394\n00:18:55.960 --> 00:18:58.370\nAnd then it writes to the file\nwhen it gets a chance.\n\n395\n00:18:58.370 --> 00:19:00.750\nIf the server's really busy,\nit might not write to the file right away.\n\n396\n00:19:00.750 --> 00:19:02.800\nSo if you jump over and\ncheck the file out too soon,\n\n397\n00:19:02.800 --> 00:19:03.780\nsometimes it doesn't have the data.\n\n398\n00:19:03.780 --> 00:19:05.098\nYou just wait a few seconds.\n\n399\n00:19:05.098 --> 00:19:07.090\nBind is the exact same way.\n\n400\n00:19:07.090 --> 00:19:08.230\nNSD is the same way.\n\n401\n00:19:08.230 --> 00:19:08.910\nThey all do that.\n\n402\n00:19:08.910 --> 00:19:11.930\nThey all deal with stuff in ram first,\nfor speeds sake.\n\n403\n00:19:11.930 --> 00:19:14.190\nAnd then write to the hard\ndrive when they have a chance.\n\n404\n00:19:14.190 --> 00:19:16.230\nAll right.\nSo I want to create some records in here.\n\n405\n00:19:16.230 --> 00:19:18.430\nIt's not a lot fun without any records.\n\n406\n00:19:18.430 --> 00:19:24.520\nOur standard records are things like\nA records, AAAA records, MX records.\n\n407\n00:19:24.520 --> 00:19:26.100\nThose are all things we need to create.\n\n408\n00:19:26.100 --> 00:19:29.070\nThe best part about doing this\nstuff inside of Microsoft Server\n\n409\n00:19:29.070 --> 00:19:30.370\nis we have a GUI.\n\n410\n00:19:30.370 --> 00:19:34.820\nIf you right click on a zone,\nyou'll see where you can create A records,\n\n411\n00:19:34.820 --> 00:19:36.970\nCNAMEs, MX and so on.\n\n412\n00:19:36.970 --> 00:19:40.340\nAnd if you go down here to \"other new\nrecords,\" there's even more that don't\n\n413\n00:19:40.340 --> 00:19:41.810\nshow up here by default.\n\n414\n00:19:41.810 --> 00:19:42.970\nLet's create a few standard ones.\n\n415\n00:19:42.970 --> 00:19:47.403\nSo for example, I might want to\ncreate an A record for dns1, and\n\n416\n00:19:47.403 --> 00:19:50.123\nI don't have to type the domain names.\n\n417\n00:19:50.123 --> 00:19:52.450\nSee how it's doing it for me?\n\n418\n00:19:52.450 --> 00:19:55.640\ndns1.itprotvdemo.org and\nI can come in here and\n\n419\n00:19:55.640 --> 00:20:00.260\nset that up and put it in with\nan IP that maps to that server.\n\n420\n00:20:00.260 --> 00:20:03.841\nI just have to remember what\nmy IP is which is [LAUGH] 34,\n\n421\n00:20:03.841 --> 00:20:09.425\nthat's the hardest part of this is\nfiguring that out .193.44.23, right?\n\n422\n00:20:09.425 --> 00:20:11.776\nSo I'm gonna punch that one in and\nI'll add that host.\n\n423\n00:20:11.776 --> 00:20:14.950\nAnd then,\nI can add another one I'll do DNS2.\n\n424\n00:20:14.950 --> 00:20:21.870\nAnd I'll punch it in,\nwhich is 34.193.248.100.\n\n425\n00:20:21.870 --> 00:20:23.181\nAnd I'll add that one, too, all right?\n\n426\n00:20:23.181 --> 00:20:26.660\nAnd there's a super annoying window\nthat pops up telling you it was created.\n\n427\n00:20:27.730 --> 00:20:30.710\nThe reason it does that is when you\nhit done, it lets you create more.\n\n428\n00:20:30.710 --> 00:20:31.660\nIt doesn't close the window.\n\n429\n00:20:31.660 --> 00:20:34.020\nSo they just have to give you\nsome kind of confirmation.\n\n430\n00:20:34.020 --> 00:20:35.120\nIt annoys the heck out of me.\n\n431\n00:20:35.120 --> 00:20:39.360\nAlright, but now I've created those\ntwo records, I've got a few A records.\n\n432\n00:20:39.360 --> 00:20:42.830\nNow, I might want to create\nother records that are aliases.\n\n433\n00:20:42.830 --> 00:20:47.480\nSo for example, I might want somebody to\nbe able to go to www.itpprodemo.org and\n\n434\n00:20:47.480 --> 00:20:51.490\nI want them to get a website, but\nI haven't set up a web server yet.\n\n435\n00:20:51.490 --> 00:20:53.190\nSo maybe I'll throw in an alias here.\n\n436\n00:20:53.190 --> 00:20:54.055\nI'll just do a CNAME.\n\n437\n00:20:55.080 --> 00:20:56.340\nAnd I'll do www.\n\n438\n00:20:56.340 --> 00:21:01.936\nAnd www.itprotvdemo.org\nis gonna point somewhere.\n\n439\n00:21:01.936 --> 00:21:02.640\nWhere is it gonna point?\n\n440\n00:21:02.640 --> 00:21:07.177\nI'm gonna have it point to showmemy.info.\n\n441\n00:21:07.177 --> 00:21:09.990\nThat's our little website that\nshows you where your IP address is.\n\n442\n00:21:09.990 --> 00:21:14.560\nSo, by hitting this address,\nwe'll get the website rendered from there.\n\n443\n00:21:14.560 --> 00:21:17.350\nSo, I'll go ahead and\njust punch that in, and hit OK.\n\n444\n00:21:17.350 --> 00:21:22.360\nAnd now I've created a CNAME,\nan Alias that's gonna point to it.\n\n445\n00:21:22.360 --> 00:21:25.320\nOther things I might create are MX\nrecords, so if I wanna go in here and\n\n446\n00:21:25.320 --> 00:21:28.490\ncreate a MX record, I can do that.\n\n447\n00:21:28.490 --> 00:21:33.540\nI might have a mail server, no,\nactually before I create the MX record,\n\n448\n00:21:33.540 --> 00:21:35.180\nI'm gonna have a little\nbit of a problem here.\n\n449\n00:21:35.180 --> 00:21:36.656\nAn MX record needs to point to a host.\n\n450\n00:21:36.656 --> 00:21:39.080\nSo I need an a record to go alongside it.\n\n451\n00:21:39.080 --> 00:21:42.010\nSo I probably need some mail servers\nset up before I get too far.\n\n452\n00:21:42.010 --> 00:21:46.490\nSo if I come in here and create some\nA records, well, then I can have those.\n\n453\n00:21:46.490 --> 00:21:49.110\nNow, before I do that let's\nback up even further.\n\n454\n00:21:49.110 --> 00:21:51.800\nEvery time I've created one of these\nrecords you've probably noticed the option\n\n455\n00:21:51.800 --> 00:21:55.470\nit had to create a PTR\nrecord at the same time.\n\n456\n00:21:55.470 --> 00:21:58.200\nWhen you create the forward record\nyou can create the reverse one.\n\n457\n00:21:58.200 --> 00:21:59.530\nSo, let's see that.\n\n458\n00:21:59.530 --> 00:22:03.090\nWell, I can't actually do it because\nI don't have a reverse zone.\n\n459\n00:22:03.090 --> 00:22:04.960\nSo if I did it right now I'd get an error.\n\n460\n00:22:04.960 --> 00:22:07.360\nI need to create a reverse lookup\nzone before I can really do that.\n\n461\n00:22:07.360 --> 00:22:11.220\nSo I'm gonna create a new zone and\nwhen I move forward\n\n462\n00:22:11.220 --> 00:22:15.270\nit's gonna ask if I'm creating a primary,\nsecondary or stub, just like before.\n\n463\n00:22:15.270 --> 00:22:19.125\nI right clicked on the reverse lookup\nzones, not on the forward lookup zones.\n\n464\n00:22:19.125 --> 00:22:20.670\nHere it looks identical,\n\n465\n00:22:20.670 --> 00:22:24.500\nbut where it starts to get\ndifferent is on this next screen.\n\n466\n00:22:24.500 --> 00:22:26.750\nAm I reversing IPv4 or IPv6?\n\n467\n00:22:27.990 --> 00:22:29.320\nI'm doing IPv4.\n\n468\n00:22:29.320 --> 00:22:31.340\nAnd then what's my network ID?\n\n469\n00:22:31.340 --> 00:22:33.620\nAnd here's where you can punch\nin as many octets as you want.\n\n470\n00:22:33.620 --> 00:22:36.520\nAnd one of the annoying things about\nreverse lookup zones is you have to flip\n\n471\n00:22:36.520 --> 00:22:38.880\nthe IP around backwards, and it's a pain.\n\n472\n00:22:38.880 --> 00:22:43.760\nHere, you can just type it in forwards,\nand Microsoft will reverse it for you.\n\n473\n00:22:43.760 --> 00:22:51.445\nSo if I type in, let's say I wanna do\n192.168.0, right, my private range.\n\n474\n00:22:51.445 --> 00:22:55.445\nDown here you can see where it made it,\n0.168.192 and\n\n475\n00:22:55.445 --> 00:22:59.898\nit flipped it around for me and\nit added the in-addr.arpa,\n\n476\n00:22:59.898 --> 00:23:03.985\nthat's the official naming structure for\nour reverse look up zone.\n\n477\n00:23:03.985 --> 00:23:07.351\nI don't have to remember that\nbecause the GUI does it for me and\n\n478\n00:23:07.351 --> 00:23:11.557\nyou don't have to put in all the octets,\nI could just say 192, like that,\n\n479\n00:23:11.557 --> 00:23:13.719\nbecause I might have a ton of networks.\n\n480\n00:23:13.719 --> 00:23:20.566\nI might have 192.168, 192.169, 170, all\nof those are part of the, no they aren't.\n\n481\n00:23:20.566 --> 00:23:24.740\nWhat do they, it's 192.168.0,\nall the way through 192.168.254.\n\n482\n00:23:24.740 --> 00:23:27.743\nSo I might wanna do 192.168,\nand stop there.\n\n483\n00:23:27.743 --> 00:23:30.910\nSo I get all of the private class Cs.\n\n484\n00:23:30.910 --> 00:23:34.092\nOr I might do, it's harder with a 172.\n\n485\n00:23:34.092 --> 00:23:36.535\nSo if I do 172.16.\n\n486\n00:23:36.535 --> 00:23:39.868\nWell, there's 172.17, 172.18.\n\n487\n00:23:39.868 --> 00:23:42.233\nI would have to add each\nof those in separately.\n\n488\n00:23:42.233 --> 00:23:43.810\nOr I could just do 172.\n\n489\n00:23:43.810 --> 00:23:44.443\nIt will get all of them.\n\n490\n00:23:44.443 --> 00:23:45.490\nBut it will get.\n\n491\n00:23:45.490 --> 00:23:48.082\nPublic 172 is also and\nthat it can be a bit of problem sometimes.\n\n492\n00:23:48.082 --> 00:23:50.606\nCause you're doing a reverse lookup for\na public zone and\n\n493\n00:23:50.606 --> 00:23:54.352\nthis server will think it's authoritative\nand not be able to resolve this anymore.\n\n494\n00:23:54.352 --> 00:23:57.638\nSo be careful,\nyou don't want to go overboard with this,\n\n495\n00:23:57.638 --> 00:24:00.603\nif it in this class,\nhey you can just go Ten, right?\n\n496\n00:24:00.603 --> 00:24:02.369\nAnd that'll get the whole private range.\n\n497\n00:24:02.369 --> 00:24:04.750\nThere's no need to\nprovide any other octets.\n\n498\n00:24:04.750 --> 00:24:06.765\nBut I'm gonna go ahead and do 192.168.0.\n\n499\n00:24:06.765 --> 00:24:09.980\nAnd when I do the mail servers, I'll set\nthem up in an address in that range.\n\n500\n00:24:11.730 --> 00:24:15.129\nAs I move forward, just gonna create\nthe files, there's that file name.\n\n501\n00:24:15.129 --> 00:24:18.320\nAnd I can pick whether I want dynamic\nupdates, which I'm not gonna do.\n\n502\n00:24:19.760 --> 00:24:21.680\nWhen I finish up now,\nI've got a Reverse Lookup Zone.\n\n503\n00:24:21.680 --> 00:24:25.590\nAnd there's not much in here, the SOA and\nthe nameserver, so you have to have those.\n\n504\n00:24:25.590 --> 00:24:26.230\nAnd now,\n\n505\n00:24:26.230 --> 00:24:30.440\nwhen I create my mail server records,\nI'm gonna create these two A records.\n\n506\n00:24:30.440 --> 00:24:31.905\nSo, I'm gonna go in here and create one.\n\n507\n00:24:31.905 --> 00:24:35.439\nThis'll be mail1.itprotvdemo.org.\n\n508\n00:24:35.439 --> 00:24:39.320\nI'm gonna make it 192.168.0.2.\n\n509\n00:24:39.320 --> 00:24:43.258\nAnd I'll create the associated PTR\nrecord at the same time, all right?\n\n510\n00:24:43.258 --> 00:24:50.070\nAnd I'll add that host, and then I'll\ndo mail2, and I'll make it 192.168.0.3.\n\n511\n00:24:50.070 --> 00:24:53.230\nCreate the PTR at the same time,\nand add that one in also.\n\n512\n00:24:54.440 --> 00:24:56.940\nNow that they're done,\nI've got my A records.\n\n513\n00:24:56.940 --> 00:25:00.140\nAnd if I go to my Reverse Zone,\nthey're not there.\n\n514\n00:25:00.140 --> 00:25:01.307\nWell, I need to refresh, right?\n\n515\n00:25:01.307 --> 00:25:03.860\nSo, we refresh the screen and\nthere they are.\n\n516\n00:25:03.860 --> 00:25:06.860\nIt made the reverse lookup, so,\nit maps the IP to the name.\n\n517\n00:25:07.920 --> 00:25:10.710\nAnd remember, you can have more than\none IP address tied to a server.\n\n518\n00:25:10.710 --> 00:25:12.960\nSo, maybe, I've got a file server.\n\n519\n00:25:12.960 --> 00:25:16.830\nAnd the file server has multiple NICs in\nit to get some extra bandwidth, right?\n\n520\n00:25:16.830 --> 00:25:23.218\nSo, I might have files.itprotvdemo.org,\nor file whatever, whatever I call it.\n\n521\n00:25:23.218 --> 00:25:27.046\nAnd it might be 192.168.0.4.\n\n522\n00:25:27.046 --> 00:25:31.140\nAnd did I call it file or files?\n\n523\n00:25:31.140 --> 00:25:31.901\nI got myself mixed up.\n\n524\n00:25:31.901 --> 00:25:33.180\nFile, all right.\n\n525\n00:25:33.180 --> 00:25:37.286\nSo, I'm gonna call it file and\nit might also be 192.168.0.5.\n\n526\n00:25:37.286 --> 00:25:38.560\nWe got two IPs, all right?\n\n527\n00:25:38.560 --> 00:25:42.950\nAnd when I do that,\nI now have two entries for file.\n\n528\n00:25:42.950 --> 00:25:47.230\nNow, if you know the file structure,\nwhen you write a BIND configuration file,\n\n529\n00:25:47.230 --> 00:25:49.450\nyou leave the name off\nof the second record.\n\n530\n00:25:49.450 --> 00:25:50.521\nIn the GUI, it shows it.\n\n531\n00:25:50.521 --> 00:25:53.000\nWhen we look at the file later,\nit'll actually be correct.\n\n532\n00:25:53.000 --> 00:25:55.370\nBut in the GUI, it shows it to\nmake it easier to understand.\n\n533\n00:25:56.810 --> 00:25:59.610\nSo, I could add more,\nI could even add IPv6.\n\n534\n00:25:59.610 --> 00:26:03.450\nNow, I didn't create\na Reverse Lookup Zone for an IPv6 range.\n\n535\n00:26:03.450 --> 00:26:07.290\nSo, if I go and create one of these\nthat are IPv6, so, I'll do file again.\n\n536\n00:26:08.350 --> 00:26:12.142\nAnd I punch something in like this.\n\n537\n00:26:12.142 --> 00:26:14.910\nI'll just make one up,\nI'm not very good at making those up.\n\n538\n00:26:14.910 --> 00:26:17.966\nSo, I'll punch one of those in, and\nif I choose the Create the record and\n\n539\n00:26:17.966 --> 00:26:20.270\nhit Add Host,\nit's gonna add the Forward lookup, but\n\n540\n00:26:20.270 --> 00:26:21.842\nit won't be able to add the Reverse.\n\n541\n00:26:21.842 --> 00:26:24.060\nSo, I get an error about that,\nand I can just say OK.\n\n542\n00:26:24.060 --> 00:26:26.536\nIt did create the forward one, right?\n\n543\n00:26:26.536 --> 00:26:29.092\nIt just didn't create the Reverse\none cuz there was no zone.\n\n544\n00:26:29.092 --> 00:26:31.615\nWhich means if I add the zone later,\nI'll have to manually create that record.\n\n545\n00:26:31.615 --> 00:26:35.587\nBut there it is and I've got all of those\nentries with the same name, all right?\n\n546\n00:26:35.587 --> 00:26:37.588\nAnd that's perfectly fine.\n\n547\n00:26:37.588 --> 00:26:40.430\nNow, the whole point is that I tried\nwas I wanted to add MX records, right?\n\n548\n00:26:40.430 --> 00:26:42.390\nSo, I need to go over and\nhere right-click my zone and\n\n549\n00:26:42.390 --> 00:26:45.170\nchoose to create New MX records.\n\n550\n00:26:45.170 --> 00:26:48.840\nAnd when I do that, I can come in here and\nthe host you wanna leave empty.\n\n551\n00:26:48.840 --> 00:26:51.100\nCuz it's the domain, itprotvdemo.org.\n\n552\n00:26:51.100 --> 00:26:52.300\nAnd if you leave it empty,\nthat's what it is.\n\n553\n00:26:52.300 --> 00:26:54.410\nAnd that's what it's telling\nme here in this message.\n\n554\n00:26:54.410 --> 00:26:56.800\nAnd then down here, who is the server?\n\n555\n00:26:56.800 --> 00:26:58.730\nAnd I can type in the name if I know it.\n\n556\n00:26:58.730 --> 00:27:00.320\nOr you can hit browse.\n\n557\n00:27:00.320 --> 00:27:04.720\nAnd you can actually browse all\nthe zones that are on your system and\n\n558\n00:27:04.720 --> 00:27:05.550\nfind the server that way.\n\n559\n00:27:05.550 --> 00:27:07.951\nCuz the mail server might\nactually be in a different zone.\n\n560\n00:27:07.951 --> 00:27:10.896\nSo, this makes it easier to just\nbrowse and find it and get it added.\n\n561\n00:27:10.896 --> 00:27:13.610\nBut if you type it, same thing.\n\n562\n00:27:13.610 --> 00:27:14.764\nAnd we do have to set a priority.\n\n563\n00:27:14.764 --> 00:27:16.750\nI'll give that one a priority of ten.\n\n564\n00:27:16.750 --> 00:27:22.524\nI'll give the other one a priority of 20.\n\n565\n00:27:22.524 --> 00:27:25.549\nAnd I'll just type it cuz\nit's faster sometimes.\n\n566\n00:27:26.730 --> 00:27:28.870\nI say that and then I'll screw it up,\nbut I'll give that one a priority of 20,\n\n567\n00:27:28.870 --> 00:27:30.940\nand we'll create that one too.\n\n568\n00:27:30.940 --> 00:27:33.860\nSo, now, I've got my two, shoot,\nand see, then, I screw it up.\n\n569\n00:27:33.860 --> 00:27:38.200\nAfter telling you guys to leave that\ndomain name empty, I typed it in and\n\n570\n00:27:38.200 --> 00:27:40.530\nit's not gonna let me fix that either,\nI have to delete my record.\n\n571\n00:27:40.530 --> 00:27:42.360\nShould have just browsed,\n\n572\n00:27:42.360 --> 00:27:46.100\nthat's what happens when you\nget me involved in the process.\n\n573\n00:27:46.100 --> 00:27:48.150\nSo, let me create that one again.\n\n574\n00:27:48.150 --> 00:27:55.996\nIt was mail2.itprotvdemo.org.\n\n575\n00:27:55.996 --> 00:27:56.800\nAll right, there we go.\n\n576\n00:27:56.800 --> 00:27:58.530\nNow, I got my two records.\n\n577\n00:27:58.530 --> 00:28:02.520\nIt's taking the time to format those\nproperly, to lay out the priority as\n\n578\n00:28:02.520 --> 00:28:05.210\npart of the name that gets resolved\nuntil it gets tucked away there.\n\n579\n00:28:05.210 --> 00:28:07.730\nAnd it's pointing at the servers\nup there like I want it to.\n\n580\n00:28:07.730 --> 00:28:09.691\nThere we go,\nwe've got all our records, right?\n\n581\n00:28:09.691 --> 00:28:11.900\nThere are other records we could create.\n\n582\n00:28:11.900 --> 00:28:14.339\nThe episode is only so long, so,\nI can't go into all of them.\n\n583\n00:28:14.339 --> 00:28:18.039\nBut if you ever get bored,\ngo in here and go to Other New Records.\n\n584\n00:28:18.039 --> 00:28:20.802\nWhen you right-click on the zone and\nchoose Other New Records,\n\n585\n00:28:20.802 --> 00:28:22.714\nyou get the full list, you get everything.\n\n586\n00:28:22.714 --> 00:28:26.590\nAnd so, in here is where we will start\nto see some of the DNSSEC records and\n\n587\n00:28:26.590 --> 00:28:28.022\nsome of the other really neat stuff.\n\n588\n00:28:28.022 --> 00:28:31.160\n&gt;&gt; Is this where we would see if\nyou needed to send an SPF record,\n\n589\n00:28:31.160 --> 00:28:33.720\nwould we see these in\nthe record share as well?\n\n590\n00:28:33.720 --> 00:28:37.052\n&gt;&gt; Yes, SPF records,\nthere is an actual record called an SPF.\n\n591\n00:28:37.052 --> 00:28:38.897\nThose are obsolete,\nyou're not supposed to use them anymore.\n\n592\n00:28:38.897 --> 00:28:42.860\nBut you create text records that\nstore your SPF values, right?\n\n593\n00:28:42.860 --> 00:28:48.030\nAnd I didn't have that option, but if I go\nin here, whoop, no, that's Next, not Text.\n\n594\n00:28:48.030 --> 00:28:49.090\nThere we go, Text.\n\n595\n00:28:49.090 --> 00:28:50.416\nNext, Text, pretty close.\n\n596\n00:28:50.416 --> 00:28:51.532\nThere's Text, right there, T-X-T.\n\n597\n00:28:51.532 --> 00:28:53.950\nSo, I can choose it and\nI can add that record in.\n\n598\n00:28:53.950 --> 00:28:56.165\nAnd in fact,\nSPF doesn't show up in the list.\n\n599\n00:28:56.165 --> 00:28:57.540\nCuz it is obsolete,\nyou're not supposed to use it.\n\n600\n00:28:57.540 --> 00:28:59.830\nSo, Microsoft's taking that out,\napparently.\n\n601\n00:28:59.830 --> 00:29:02.620\nBut you'll see some of these\nother ones like WKS records and\n\n602\n00:29:02.620 --> 00:29:05.500\nRT records that hardly anybody uses.\n\n603\n00:29:05.500 --> 00:29:07.280\nBut they are a part of the standard.\n\n604\n00:29:07.280 --> 00:29:09.600\nSo, Microsoft includes them so\nyou can make them.\n\n605\n00:29:09.600 --> 00:29:11.266\nBut you'd add in a Text, and\nthat's where you'd go in and\n\n606\n00:29:11.266 --> 00:29:12.808\nyou'd put your SPF record and\nall that other things.\n\n607\n00:29:12.808 --> 00:29:16.470\nSo, any other special records you\ncan do right from here, right?\n\n608\n00:29:16.470 --> 00:29:20.046\nWorst case scenario, you could always go\nand edit the file itself and load them,\n\n609\n00:29:20.046 --> 00:29:21.950\nbut then, the GUI will start to freak out.\n\n610\n00:29:21.950 --> 00:29:24.820\nSo, if you start doing that and\nmanaging the file directly,\n\n611\n00:29:24.820 --> 00:29:26.810\nyou're not really supposed to\nuse the GUI anymore beyond that.\n\n612\n00:29:28.460 --> 00:29:30.070\nOkay, so, I'm in good shape.\n\n613\n00:29:30.070 --> 00:29:31.990\nI mentioned I was gonna show you\nthe file that's being created.\n\n614\n00:29:31.990 --> 00:29:33.300\nThis whole zone is being created.\n\n615\n00:29:33.300 --> 00:29:35.470\nIt should be working when\nyou take a look at the file.\n\n616\n00:29:35.470 --> 00:29:38.340\n&gt;&gt; All right, now, I'm gonna test myself\nhere because we've done a few of these\n\n617\n00:29:38.340 --> 00:29:40.700\nepisodes together,\nsee if I can remember my BIND format.\n\n618\n00:29:40.700 --> 00:29:44.147\nWhen you leave that MX record,\nthe domain blank.\n\n619\n00:29:44.147 --> 00:29:47.512\nI'm guessing, is it gonna put the at\nsymbol inside of the BIND folder like\n\n620\n00:29:47.512 --> 00:29:49.650\nit did in previous\nepisodes what we've seen?\n\n621\n00:29:49.650 --> 00:29:51.425\n&gt;&gt; You know,\nI don't remember with Microsoft.\n\n622\n00:29:51.425 --> 00:29:53.180\nCuz the at symbol is an alias.\n\n623\n00:29:53.180 --> 00:29:55.140\nAnd whenever I type it, I do that.\n\n624\n00:29:55.140 --> 00:29:57.980\nI put the at symbol in there to\nrefer to the domain that you're in.\n\n625\n00:29:59.115 --> 00:30:01.375\nBut Microsoft,\nthey might actually write it out for us.\n\n626\n00:30:01.375 --> 00:30:03.680\nI do it to save typing, and\nso, it makes sense for me.\n\n627\n00:30:03.680 --> 00:30:04.610\nBut this is the computer.\n\n628\n00:30:04.610 --> 00:30:05.940\nIt makes no difference to it.\n\n629\n00:30:05.940 --> 00:30:06.790\nSo, let's find out.\n\n630\n00:30:06.790 --> 00:30:09.680\nWe'll go and pull that up.\n\n631\n00:30:09.680 --> 00:30:14.270\nThe file gets stored on the hard drive,\nand if you drop to your hard drive,\n\n632\n00:30:14.270 --> 00:30:15.714\nit gets stored in kind of a weird place.\n\n633\n00:30:15.714 --> 00:30:17.637\nIt's in\n\n634\n00:30:17.637 --> 00:30:26.163\nC:\\Windows\\System32\\dns.\n\n635\n00:30:26.163 --> 00:30:30.993\nSo, if I browse into that folder,\nC:\\Windows\\System32\\dns and\n\n636\n00:30:30.993 --> 00:30:34.011\nI take a look in there,\nI'll see a few files.\n\n637\n00:30:34.011 --> 00:30:38.280\nThat's where my dns.log is stored,\nthe DNS CACHE, right?\n\n638\n00:30:38.280 --> 00:30:42.590\nMy cache is starting to creep up in size,\nI'm at three kilobytes now.\n\n639\n00:30:42.590 --> 00:30:46.400\nYou had a backup of your zones that\nit maintains as changes occur.\n\n640\n00:30:46.400 --> 00:30:50.936\nIt's got my Reverse Lookup Zone and\nmy Forward Lookup Zone.\n\n641\n00:30:50.936 --> 00:30:54.450\nAnd those are just straight up\ntext files ready to be used and\n\n642\n00:30:54.450 --> 00:30:56.730\nyou can even copy them over to BIND or\nwhatever.\n\n643\n00:30:56.730 --> 00:30:59.048\nIf I open one up,\nI'm just gonna use Notepad.\n\n644\n00:30:59.048 --> 00:31:03.947\nAnd I'll open up itprotvdemo.org.dns.\n\n645\n00:31:03.947 --> 00:31:05.808\nAnd we fire that up in Notepad.\n\n646\n00:31:05.808 --> 00:31:09.620\nIf you watched our BIND episodes,\nthis should look pretty familiar, okay?\n\n647\n00:31:09.620 --> 00:31:12.180\nI've got my SOA right here at the top, and\n\n648\n00:31:12.180 --> 00:31:14.680\nall the little subvalues\nthat fall underneath it.\n\n649\n00:31:14.680 --> 00:31:17.236\nAnd see how my serial number\nis all the way up to 18?\n\n650\n00:31:17.236 --> 00:31:20.400\nI haven't incremented that one\nsingle time this whole episode.\n\n651\n00:31:20.400 --> 00:31:24.160\nEvery time I made a change, it\nincremented it for me and bumped that up.\n\n652\n00:31:24.160 --> 00:31:26.570\nAnd as I look down here,\nI'll start to see my other records.\n\n653\n00:31:26.570 --> 00:31:30.450\nAnd it did use the at alias for\nthe name servers.\n\n654\n00:31:30.450 --> 00:31:31.820\nAnd for the MX records.\n\n655\n00:31:31.820 --> 00:31:34.655\nIt used the at alias, which is what\nI would use to save on typing.\n\n656\n00:31:34.655 --> 00:31:36.111\nSo, it did that.\n\n657\n00:31:36.111 --> 00:31:37.570\nAll the other entries are pumped in here.\n\n658\n00:31:37.570 --> 00:31:39.525\nAnd it did nice little formatting.\n\n659\n00:31:39.525 --> 00:31:41.047\nThat extra tabs and things.\n\n660\n00:31:41.047 --> 00:31:43.639\nIf you watch my BIND shows, I get a little\nparticular about how I arrange this stuff,\n\n661\n00:31:43.639 --> 00:31:45.360\nso, you've seen them.\n\n662\n00:31:45.360 --> 00:31:48.660\nNotice how file,\nit is listed with the name only one time.\n\n663\n00:31:48.660 --> 00:31:50.697\nEven though the GUI showed it every time,\nhere,\n\n664\n00:31:50.697 --> 00:31:52.346\nit is listed where it's only one time.\n\n665\n00:31:52.346 --> 00:31:56.588\nSo, it's in the proper format\nto be exchanged with any service\n\n666\n00:31:56.588 --> 00:32:00.121\nthat supports it, and\nunbound, no, not unbound.\n\n667\n00:32:00.121 --> 00:32:01.307\nSorry, that's the one that doesn't.\n\n668\n00:32:01.307 --> 00:32:06.423\nNSD Bind, Power DNS, and Microsoft's DNS,\nthey all share this format in common,\n\n669\n00:32:06.423 --> 00:32:10.980\nso you can easily move this between\nthose servers and it'll fire right up.\n\n670\n00:32:12.590 --> 00:32:14.420\nAll right, that's the forward lookup zone.\n\n671\n00:32:14.420 --> 00:32:17.730\nLet me open up the reverse lookup zone.\n\n672\n00:32:17.730 --> 00:32:20.980\nThe reverse lookup zone was sitting\nright there in that same directory.\n\n673\n00:32:20.980 --> 00:32:23.120\nI'll just use Notepad to open it also.\n\n674\n00:32:24.690 --> 00:32:26.070\nAnd here's the reverse look up zone.\n\n675\n00:32:26.070 --> 00:32:27.364\nIt's less exciting, right.\n\n676\n00:32:27.364 --> 00:32:29.322\nWe still have our SOA up there at the top.\n\n677\n00:32:29.322 --> 00:32:31.985\nBut then when we get down to\nthe zone records, here's the PTRs.\n\n678\n00:32:31.985 --> 00:32:32.764\nAnd see what this is.\n\n679\n00:32:32.764 --> 00:32:34.442\n2, 3, 4, 5.\n\n680\n00:32:34.442 --> 00:32:38.650\nIt's because it's in the 192.168.0 zone,\nright.\n\n681\n00:32:38.650 --> 00:32:43.800\nWhich is defined by the file name\nwhere that was loaded into the zone.\n\n682\n00:32:43.800 --> 00:32:47.940\nBut down here we can see each of those\nrecords pointing to mail or file or\n\n683\n00:32:47.940 --> 00:32:48.900\nwhoever does it point to.\n\n684\n00:32:50.160 --> 00:32:56.640\nThere's only two entries for file, because\nthis is the IPv4 zone, not the IPv6 zone.\n\n685\n00:32:56.640 --> 00:33:01.460\nThe IPv6 zone I didn't create, and so the\nIPv6 address is left off of that server.\n\n686\n00:33:01.460 --> 00:33:04.780\nBut otherwise it is up and\nrunning and I am serving my entries.\n\n687\n00:33:04.780 --> 00:33:11.250\nIf I were to fire up a tool like NS lookup\nand switch the server over to myself,\n\n688\n00:33:11.250 --> 00:33:16.400\nlet's see, if I type it right,\n\n689\n00:33:16.400 --> 00:33:20.130\nI can connect to myself and I should be\nable to look up any of those like mail one\n\n690\n00:33:20.130 --> 00:33:26.430\ndot itpro itprotvdemo.org and\nI get a result.\n\n691\n00:33:26.430 --> 00:33:34.020\nOr www, remember that was the C name,\nit resolves it.\n\n692\n00:33:34.020 --> 00:33:39.450\nIt actually mapped out that C name\nto show me my dot info and exploded\n\n693\n00:33:39.450 --> 00:33:43.430\nthat to get the actual IP and we're\n[INAUDIBLE] so all that process happened.\n\n694\n00:33:43.430 --> 00:33:50.290\nIf I set my type to MX I can say give\nme the MX records for itprotvdemo.org.\n\n695\n00:33:50.290 --> 00:33:53.040\nAnd it returns my mail servers.\n\n696\n00:33:53.040 --> 00:33:56.890\nAnd if I, let's see, set type-any.\n\n697\n00:33:56.890 --> 00:34:02.130\nAnd I pull up file.itprotvdemo.org.\n\n698\n00:34:02.130 --> 00:34:07.570\nI can look that up and I get the IPv4 and\nIPv6 address, all returning right\n\n699\n00:34:07.570 --> 00:34:11.300\nback to me, the A and the AAAA records\nall coming back, we're up and going.\n\n700\n00:34:11.300 --> 00:34:14.240\nSo creating zones,\nsuper simple thanks to the GUI\n\n701\n00:34:15.300 --> 00:34:18.470\nunless you need to make hundreds of\nentries or thousands of entries, if you\n\n702\n00:34:18.470 --> 00:34:22.380\nneed to make bulk of entries, you're not\ngonna like that GUI very much, right?\n\n703\n00:34:22.380 --> 00:34:25.450\nAnd that's where we go back to\nediting the file directly or\n\n704\n00:34:25.450 --> 00:34:28.320\nusing PowerShell commands to load that in.\n\n705\n00:34:28.320 --> 00:34:33.440\nIf you wanna edit the file directly\nyou've gotta stop the DNS server first,\n\n706\n00:34:33.440 --> 00:34:38.470\ngo back into your tool and\nright click on the server.\n\n707\n00:34:38.470 --> 00:34:41.030\nGo to All Tasks And stop.\n\n708\n00:34:41.030 --> 00:34:43.840\nStop the server, which takes it\noffline and kicks everybody out.\n\n709\n00:34:43.840 --> 00:34:45.560\nEverybody now hates you, right?\n\n710\n00:34:45.560 --> 00:34:46.070\nAnd you get in there.\n\n711\n00:34:46.070 --> 00:34:47.780\nAnd you make all your changes.\n\n712\n00:34:47.780 --> 00:34:49.040\nThen you can start the server back up.\n\n713\n00:34:49.040 --> 00:34:49.880\nAnd it will load them all.\n\n714\n00:34:49.880 --> 00:34:50.590\nAnd you've got them in play.\n\n715\n00:34:50.590 --> 00:34:52.890\nSo if you do bulk changes,\nsometimes that's faster.\n\n716\n00:34:52.890 --> 00:34:53.790\nYou can make typos.\n\n717\n00:34:53.790 --> 00:34:57.290\nAnd there's no syntax checker in Windows,\nso you've got to get it right.\n\n718\n00:34:57.290 --> 00:35:00.060\nPowerShell's a little bit better because\nthere is a little bit of syntax checking\n\n719\n00:35:00.060 --> 00:35:01.830\nthat happens and\nyou can automate things faster,\n\n720\n00:35:01.830 --> 00:35:04.330\nbut definitely beyond the scope\nof what I can cover in this show.\n\n721\n00:35:04.330 --> 00:35:07.150\nBut something to keep in mind\nyou're in bulk DMS changes.\n\n722\n00:35:07.150 --> 00:35:10.990\n&gt;&gt; Still a lot of great information\non getting those zones configured and\n\n723\n00:35:10.990 --> 00:35:11.550\nup and running.\n\n724\n00:35:11.550 --> 00:35:14.370\nIn fact, I thought it was kind of\nfascinating to see the The file\n\n725\n00:35:14.370 --> 00:35:16.440\nunderneath, you'd still\nsee that bind structure.\n\n726\n00:35:16.440 --> 00:35:16.950\nWell done.\n\n727\n00:35:16.950 --> 00:35:17.850\nYou've already mentioned it.\n\n728\n00:35:17.850 --> 00:35:20.210\nIt does look like we're coming\nto the end of another episode.\n\n729\n00:35:20.210 --> 00:35:23.270\nBut do you have any additional word\nyou might like to tell our viewers?\n\n730\n00:35:23.270 --> 00:35:27.460\nWhen it comes to configuring your\nzones inside a Windows environment?\n\n731\n00:35:27.460 --> 00:35:29.570\n&gt;&gt; There is a good bit more to this.\n\n732\n00:35:29.570 --> 00:35:31.630\nI'm just covering what\nI can in 30 minutes.\n\n733\n00:35:31.630 --> 00:35:34.670\nBut if you're doing things,\nlike, dynamic updates.\n\n734\n00:35:34.670 --> 00:35:37.400\nUnderstand that there's a whole\npermissions infrastructure in there that\n\n735\n00:35:37.400 --> 00:35:38.770\nyou can view.\n\n736\n00:35:38.770 --> 00:35:41.990\nIf you switch to the advanced\nview inside of the tool.\n\n737\n00:35:41.990 --> 00:35:43.530\nAnd even on our regular records.\n\n738\n00:35:43.530 --> 00:35:44.870\nWhen I created my A records.\n\n739\n00:35:44.870 --> 00:35:47.920\nIt never asked me about what\nTime- to- Live I wanted.\n\n740\n00:35:47.920 --> 00:35:50.010\nYou could override the Time-to- Live for\na record.\n\n741\n00:35:50.010 --> 00:35:51.600\nBut let me just show this real quick.\n\n742\n00:35:51.600 --> 00:35:52.330\nI know we're out of time West.\n\n743\n00:35:52.330 --> 00:35:53.560\nBut let me show real quick.\n\n744\n00:35:53.560 --> 00:35:54.980\nCuz it's kind of important.\n\n745\n00:35:54.980 --> 00:35:58.170\nIf we take the dns1\nrecord that I made here.\n\n746\n00:35:58.170 --> 00:35:59.530\nAnd I double click on it.\n\n747\n00:35:59.530 --> 00:36:02.080\nI can change the name of the IP.\n\n748\n00:36:02.080 --> 00:36:04.190\nI can't change the time to live, right?\n\n749\n00:36:04.190 --> 00:36:05.940\nBut if I go up here to view and\n\n750\n00:36:05.940 --> 00:36:09.730\nadvanced, a lot of stuff starts to\nshow up that wasn't there before.\n\n751\n00:36:09.730 --> 00:36:12.380\nAnd so I usually stay in\nthe advanced view all the time.\n\n752\n00:36:12.380 --> 00:36:16.150\nAnd when you go into it now,\nI see the three values I did a moment ago.\n\n753\n00:36:16.150 --> 00:36:21.060\nI also see where I can set whether the\nrecord becomes stale if it gets deleted I\n\n754\n00:36:21.060 --> 00:36:24.390\ncan over ride the time to live just for\nthis one record.\n\n755\n00:36:24.390 --> 00:36:27.130\nYou get a lot of the extra values\nin here that you can modify.\n\n756\n00:36:27.130 --> 00:36:28.930\nSo don't forget the advanced view.\n\n757\n00:36:28.930 --> 00:36:31.770\nIt unlocks a lot of potential of the GUI.\n\n758\n00:36:31.770 --> 00:36:33.740\n&gt;&gt; Well, Don, that's a,\na lot of great information.\n\n759\n00:36:33.740 --> 00:36:36.780\nWe definitely appreciate you being\nhere in the studios with us.\n\n760\n00:36:36.780 --> 00:36:38.830\nAnd we appreciate you,\nthe viewer watching.\n\n761\n00:36:38.830 --> 00:36:40.820\nWe're gonna go ahead and\nsign out here for IT Pro TV.\n\n762\n00:36:40.820 --> 00:36:42.760\nI've been your host, Wes Bryan.\n\n763\n00:36:42.760 --> 00:36:43.580\n&gt;&gt; And I'm Don Pezet.\n\n764\n00:36:43.580 --> 00:36:46.065\n&gt;&gt; And we'll see you next time.\n\n765\n00:36:46.065 --> 00:36:52.134\n[MUSIC]\n\n766\n00:36:52.134 --> 00:36:57.479\n&gt;&gt; Thank you for watching ITPRO.TV.\n\n",
          "vimeoId": "196627108"
        },
        {
          "description": "In this episode, Wes and Don continue the process of DNS configuration on Windows Server. They will tackle DNS zone replication this time, while discussing the purpose, benefits as well as a demonstration in the configuration process.",
          "length": "1710",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-7-3-configuring_replication_in_microsoft_dns-121616-PGM.00_28_16_04.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-7-3-configuring_replication_in_microsoft_dns-121616-PGM.00_28_16_04.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-7-3-configuring_replication_in_microsoft_dns-121616-PGM.00_28_16_04.Still001-sm.jpg",
          "title": "Configuring Replication in Microsoft DNS",
          "transcript": "WEBVTT\n\n1\n00:00:00.240 --> 00:00:02.037\nWelcome to ITProTV, I'm your host.\n\n2\n00:00:02.037 --> 00:00:08.301\n[CROSSTALK]\n[SOUND]\n\n3\n00:00:08.301 --> 00:00:11.969\n&gt;&gt; You're watching ITProTV.\n\n4\n00:00:11.969 --> 00:00:16.071\n&gt;&gt; Welcome to another great episode here\nat ITProTV, I'm your host Wes Bryan.\n\n5\n00:00:16.071 --> 00:00:19.273\nAnd in today's episode, we're\ncontinuing through our DNS text skills.\n\n6\n00:00:19.273 --> 00:00:22.931\nAnd joining us yet again for\nthis very endeavour is none other than Mr.\n\n7\n00:00:22.931 --> 00:00:23.551\nDon Pezet.\n\n8\n00:00:23.551 --> 00:00:24.820\nDon, how're you doing, sir?\n\n9\n00:00:24.820 --> 00:00:27.534\n&gt;&gt; I'm doing well, Wes, ready to\ndive right back into Microsoft DNS.\n\n10\n00:00:27.534 --> 00:00:31.318\nAnd in this episode, we're taking a look\nat replication, which can be super easy,\n\n11\n00:00:31.318 --> 00:00:34.580\nor it can be a little complex\ndepending on what you're trying to do.\n\n12\n00:00:34.580 --> 00:00:37.712\nBut we're gonna do it the complex\nway today cuz that's more fun, but\n\n13\n00:00:37.712 --> 00:00:41.276\nwe'll get a chance to see how to get our\nzones to show up on more than one server,\n\n14\n00:00:41.276 --> 00:00:43.725\nwhich is kind of an important\nthing cuz servers fail.\n\n15\n00:00:43.725 --> 00:00:46.374\nAnd if a server goes offline, you want\nsomebody else to be able to jump in and\n\n16\n00:00:46.374 --> 00:00:47.380\ntake over for you.\n\n17\n00:00:47.380 --> 00:00:50.850\nOr maybe one server just gets really\nbusy and starts answering too slowly,\n\n18\n00:00:50.850 --> 00:00:53.400\nit'd be nice to be able to\nreach out to a different one.\n\n19\n00:00:53.400 --> 00:00:56.975\nA lot of people use replication to make\nit where they have main servers that\n\n20\n00:00:56.975 --> 00:01:00.885\nare at their headquarters and then\nservers that are at each branch office.\n\n21\n00:01:00.885 --> 00:01:03.935\nSo that people are looking up\nDNS records from a server that's\n\n22\n00:01:03.935 --> 00:01:05.235\nright there in the building with them.\n\n23\n00:01:05.235 --> 00:01:06.765\nThat speeds up the lookup process.\n\n24\n00:01:06.765 --> 00:01:08.376\nYou don't want people waiting on DNS.\n\n25\n00:01:08.376 --> 00:01:10.944\nYou want them to wait on the servers so\nwhen they go to a website or\n\n26\n00:01:10.944 --> 00:01:12.510\nan email server or whatever.\n\n27\n00:01:12.510 --> 00:01:14.650\nDNS shouldn't be our\nbottleneck on this stuff.\n\n28\n00:01:14.650 --> 00:01:17.480\nSo, replicating is a key piece of that.\n\n29\n00:01:17.480 --> 00:01:18.930\nNow, fortunately,\n\n30\n00:01:18.930 --> 00:01:22.990\nthere's two different types of replication\nwe can do on Microsoft servers.\n\n31\n00:01:22.990 --> 00:01:25.655\nThere's a super, mega easy,\n\n32\n00:01:25.655 --> 00:01:29.690\nno-brainer way if we're in an Active\nDirectory integrated environment, and\n\n33\n00:01:29.690 --> 00:01:33.370\nthen there's the manual, hard way\nthat we do when we're not in the AD.\n\n34\n00:01:33.370 --> 00:01:36.950\nThe super easy way is\nreally just one check mark.\n\n35\n00:01:36.950 --> 00:01:39.630\nSo it's not even a great thing to\nbuild a whole show around, but\n\n36\n00:01:39.630 --> 00:01:40.260\nlet me show you that way.\n\n37\n00:01:40.260 --> 00:01:41.330\nWe'll start with that one.\n\n38\n00:01:41.330 --> 00:01:43.190\nAnd then, after that,\nwe'll do the fun way,\n\n39\n00:01:43.190 --> 00:01:44.840\nwhich is actually\nreplicating the full data.\n\n40\n00:01:44.840 --> 00:01:47.380\nSo let's run through that process.\n\n41\n00:01:47.380 --> 00:01:50.646\nNow if you've been watching\nour Microsoft DNS shows,\n\n42\n00:01:50.646 --> 00:01:54.837\nyou know that I've already created\na zone called itprotvdemo.org.\n\n43\n00:01:54.837 --> 00:01:59.535\nSo I can go into my DNS manager and I've\ngot itprotvdemo.org sitting right there,\n\n44\n00:01:59.535 --> 00:02:01.020\nit's on this one server.\n\n45\n00:02:01.020 --> 00:02:05.329\nAnd I'm authoritative for it, if this\nserver goes offline, that's it, this zone\n\n46\n00:02:05.329 --> 00:02:09.712\ndoesn't exist anywhere else, nobody can\nanswer for it, I'm offline, all right.\n\n47\n00:02:09.712 --> 00:02:12.470\nI don't want that, I wanna have\na second server that's backing me up.\n\n48\n00:02:12.470 --> 00:02:18.390\nWell if I'm using my Active Directory\ndomain controllers as a DNS\n\n49\n00:02:18.390 --> 00:02:24.150\nserver, then I can take this zone, and\nI can stick it in the Active Directory.\n\n50\n00:02:24.150 --> 00:02:26.540\nAnd when it's in the Active Directory,\n\n51\n00:02:26.540 --> 00:02:31.090\nany domain controller that I install the\nDNS role on will now have a copy of this.\n\n52\n00:02:31.090 --> 00:02:34.510\nAnd that's what a lot of companies do,\nat my branch office,\n\n53\n00:02:34.510 --> 00:02:36.200\nI want a domain controller\nat the branch office, so\n\n54\n00:02:36.200 --> 00:02:38.790\nthat people are authenticating\nit to local server.\n\n55\n00:02:38.790 --> 00:02:40.910\nI want a DNS server at the branch office,\n\n56\n00:02:40.910 --> 00:02:44.240\nso they can look up\nnames on a local server.\n\n57\n00:02:44.240 --> 00:02:47.216\nIt makes sense to put them together,\nthe two work together very closely anyway,\n\n58\n00:02:47.216 --> 00:02:48.590\nso let's stick them on the same box.\n\n59\n00:02:48.590 --> 00:02:49.770\nIt's what a lot of people do.\n\n60\n00:02:49.770 --> 00:02:54.090\nSo you just go to each of your domain\ncontrollers, and you add the DNS role.\n\n61\n00:02:54.090 --> 00:02:58.133\nAnd then on your main server that's\nup here at the headquarters,\n\n62\n00:02:58.133 --> 00:03:01.009\nall you have to do is move\nthat zone into the AD.\n\n63\n00:03:01.009 --> 00:03:03.291\nNow you can only do that when\nyou're on a domain controller,\n\n64\n00:03:03.291 --> 00:03:04.652\nI'm not on the domain controller.\n\n65\n00:03:04.652 --> 00:03:07.819\nSo if I take this zone and\nI pull up its properties and\n\n66\n00:03:07.819 --> 00:03:12.900\nwe take a look at these options right here\nat the top, see how my status is running,\n\n67\n00:03:12.900 --> 00:03:16.825\nmy type is primary,\nthat's what we're gonna see either way.\n\n68\n00:03:16.825 --> 00:03:22.770\nAnd then replication, not\nan Active Directory integrated zone, okay.\n\n69\n00:03:22.770 --> 00:03:27.480\nIf it were Active Directory integrated,\nI'd be able to hit this Change button, or\n\n70\n00:03:27.480 --> 00:03:29.200\neven if it wasn't,\nI'd be able to hit the Change button and\n\n71\n00:03:29.200 --> 00:03:31.080\nmake it Active Directory integrated.\n\n72\n00:03:31.080 --> 00:03:35.030\nAnd when that happens,\nit's now stored in the AD.\n\n73\n00:03:35.030 --> 00:03:38.530\nAnd everybody else will get a copy of it,\nand they'll have it up and running.\n\n74\n00:03:38.530 --> 00:03:39.750\nThat's it, it's one button.\n\n75\n00:03:39.750 --> 00:03:43.900\nYou hit this Change button, you check\noff Active Directory, and you hit OK.\n\n76\n00:03:43.900 --> 00:03:46.790\nOr you probably did it back when you set\nthe thing up in the first place, right?\n\n77\n00:03:46.790 --> 00:03:50.430\nWhen you create a new zone,\nin the Zone Wizard,\n\n78\n00:03:50.430 --> 00:03:54.670\nit's right here on this first screen,\nStore the zone in the Active Directory.\n\n79\n00:03:54.670 --> 00:03:59.546\nAnd if you check that off, it's now\nautomatically replicating through the AD,\n\n80\n00:03:59.546 --> 00:04:02.843\nand all you have to do is bring\nup a domain controller and\n\n81\n00:04:02.843 --> 00:04:05.110\nadd the DNS role to it.\n\n82\n00:04:05.110 --> 00:04:06.440\nAnd it gets all the zones.\n\n83\n00:04:06.440 --> 00:04:11.940\nIt's the no fuss way of replicating,\nyou don't have to worry about it.\n\n84\n00:04:11.940 --> 00:04:14.708\nThe DNS records actually replicate\nalongside the Active Directory records.\n\n85\n00:04:14.708 --> 00:04:18.500\nIt's just using the standard\nActive Directory replication processes.\n\n86\n00:04:18.500 --> 00:04:19.990\nAnd everything spreads out, super simple.\n\n87\n00:04:21.130 --> 00:04:23.580\nBut it assumes several things, right?\n\n88\n00:04:23.580 --> 00:04:27.300\nIt assumes that you want all your\nDNS servers to be Active Directory.\n\n89\n00:04:27.300 --> 00:04:29.870\nIt assumes that you have\nthe Active Directory.\n\n90\n00:04:29.870 --> 00:04:33.690\nAnd it assumes that you don't mind running\nyour DNS servers on top of your domain\n\n91\n00:04:33.690 --> 00:04:35.520\ncontrollers, right?\n\n92\n00:04:35.520 --> 00:04:37.030\nWhat if you don't want that?\n\n93\n00:04:37.030 --> 00:04:39.570\nWhat if I don't wanna run the DNS\nserver on my domain controllers?\n\n94\n00:04:39.570 --> 00:04:43.780\nWhat if I wanna have a mixture of\nMicrosoft and Bind or other stuff, right?\n\n95\n00:04:43.780 --> 00:04:46.990\nWhat if I wanna deviate from\nthat perfect all Microsoft world\n\n96\n00:04:46.990 --> 00:04:49.560\nwhere they force me to buy\nall their stuff, right?\n\n97\n00:04:49.560 --> 00:04:52.460\nIf that happens, [LAUGH] when that\nhappens, right, it's not really an if\n\n98\n00:04:52.460 --> 00:04:57.450\nanymore, when that happens, we don't want\nthat to be Active Directory integrated.\n\n99\n00:04:57.450 --> 00:05:00.470\nWhen you're Active Directory integrated,\nit's a multi-master model.\n\n100\n00:05:00.470 --> 00:05:04.157\nYou can make changes on any server, and\nthey will all replicate together and\n\n101\n00:05:04.157 --> 00:05:05.086\nit all works fine.\n\n102\n00:05:05.086 --> 00:05:07.462\nBut when you start bringing in Bind or\nNSD or\n\n103\n00:05:07.462 --> 00:05:11.686\none of the other guys that are out there,\nwhen you bring one of those guys in,\n\n104\n00:05:11.686 --> 00:05:15.060\nthey don't do that whole\nmulti-master thing.\n\n105\n00:05:15.060 --> 00:05:18.700\nThey come up as either a master or\na slave, as a changeable copy or\n\n106\n00:05:18.700 --> 00:05:22.660\na read only copy, and they can't\nparticipate in this type of replication.\n\n107\n00:05:22.660 --> 00:05:25.430\nSo instead, we can go back to the standard\n\n108\n00:05:25.430 --> 00:05:29.660\nform of replication that we have in\nevery other DNS server that's out there.\n\n109\n00:05:29.660 --> 00:05:32.830\nAnd that's where we don't\nstore it in the AD.\n\n110\n00:05:32.830 --> 00:05:39.760\nAnd instead, you have a primary and\nthen one or more secondary servers.\n\n111\n00:05:39.760 --> 00:05:43.470\nAnd you can do this regardless of whether\nyou have the Active Directory or not.\n\n112\n00:05:43.470 --> 00:05:46.690\nJust because you have the Active Directory\ndoesn't mean you have to store your\n\n113\n00:05:46.690 --> 00:05:47.800\nzones in there.\n\n114\n00:05:47.800 --> 00:05:49.040\nCuz you might have the Active Directory,\nand\n\n115\n00:05:49.040 --> 00:05:52.740\nyou just wanna run DNS on separate\nservers, not your domain controllers.\n\n116\n00:05:52.740 --> 00:05:55.004\nSo you don't store them in\nthe Active Directory, and\n\n117\n00:05:55.004 --> 00:05:56.272\nit works just fine, it does.\n\n118\n00:05:56.272 --> 00:05:57.960\nIt just takes a little more\nwork to get things set up.\n\n119\n00:05:57.960 --> 00:06:02.390\nAnd when you make changes, the changes\nall have to occur on the primary.\n\n120\n00:06:02.390 --> 00:06:04.480\nThat's a problem if you're\ndoing dynamic updates.\n\n121\n00:06:04.480 --> 00:06:07.320\nBecause all your dynamic updates\nhave to go to one server.\n\n122\n00:06:07.320 --> 00:06:09.210\nThen it's kinda nice to\nhave multiple servers.\n\n123\n00:06:09.210 --> 00:06:13.000\nBut on a public DNS server,\nyou wouldn't want dynamic updates anyway.\n\n124\n00:06:13.000 --> 00:06:15.270\nAnd I've got dynamic\nupdates turned off on mine.\n\n125\n00:06:15.270 --> 00:06:19.780\nSo if I want to replicate this,\nI can't do Active Directory integrated.\n\n126\n00:06:19.780 --> 00:06:21.440\nInstead, I'm gonna go to the standard way.\n\n127\n00:06:21.440 --> 00:06:24.240\nNow if you pull up\nthe properties of this thing,\n\n128\n00:06:24.240 --> 00:06:27.830\nyou'll see where my status is running,\nand my type is primary.\n\n129\n00:06:27.830 --> 00:06:32.240\nAnd I can hit Change on that, and\nI can change to a secondary if I want.\n\n130\n00:06:32.240 --> 00:06:36.770\nA secondary is a replica of\na primary somewhere else.\n\n131\n00:06:36.770 --> 00:06:40.196\nWell, I don't have a zone somewhere else,\nbut if I wanted to import one,\n\n132\n00:06:40.196 --> 00:06:41.261\nI could go that route.\n\n133\n00:06:41.261 --> 00:06:43.710\nBut as it stands, I'm just a primary, and\n\n134\n00:06:43.710 --> 00:06:46.850\nI can't really change that\nwithout breaking things.\n\n135\n00:06:46.850 --> 00:06:50.600\nI guess I could go to stub or whatever,\nbut this one's gonna be a primary.\n\n136\n00:06:50.600 --> 00:06:53.142\nBut here's where I could also change\nmy mind about being stored in the AD or\n\n137\n00:06:53.142 --> 00:06:55.030\nnot, if I really wanted to go crazy there,\nall right.\n\n138\n00:06:56.102 --> 00:07:00.339\nAnd notice it says available only if DNS\nserver is a domain controller, right.\n\n139\n00:07:00.339 --> 00:07:02.100\nIt's gotta run right on top of it.\n\n140\n00:07:02.100 --> 00:07:05.095\n&gt;&gt; Don, have you ever seen a use for\ntaking something that you've already got\n\n141\n00:07:05.095 --> 00:07:07.926\nconfigured as a primary and\nbumping it down to a secondary?\n\n142\n00:07:07.926 --> 00:07:11.210\nMaybe like a, or I don't know, maybe\na staff change where maybe you don't have\n\n143\n00:07:11.210 --> 00:07:15.660\nsomebody on premise that really knows DNS,\nmaybe you don't want making changes.\n\n144\n00:07:15.660 --> 00:07:17.100\n&gt;&gt; I've only done it once.\n\n145\n00:07:17.100 --> 00:07:19.170\nAnd I'll give you the scenario\nof what happened.\n\n146\n00:07:19.170 --> 00:07:20.155\nIt's not a normal scenario.\n\n147\n00:07:20.155 --> 00:07:23.340\nWe had a primary fail, the primary failed.\n\n148\n00:07:23.340 --> 00:07:26.590\nAnd normally, if the primary fails,\nI don't worry about it too much.\n\n149\n00:07:26.590 --> 00:07:28.290\nAll the secondaries are still up.\n\n150\n00:07:28.290 --> 00:07:31.400\nPeople could do their lookups,\nand I just can't change anything.\n\n151\n00:07:31.400 --> 00:07:32.620\nI can't add new records cuz\n\n152\n00:07:32.620 --> 00:07:34.560\nyour secondaries aren't\nallowed to change things.\n\n153\n00:07:34.560 --> 00:07:38.410\nAnd I'll get in there, and then fix\nthe primary, and bring it back online.\n\n154\n00:07:38.410 --> 00:07:43.230\nWell, in this one scenario, we had\nan emergency where the primary had failed,\n\n155\n00:07:43.230 --> 00:07:45.470\nand we had to create some new records.\n\n156\n00:07:45.470 --> 00:07:49.890\nSo I took one of the secondaries,\nand I changed it to a primary.\n\n157\n00:07:49.890 --> 00:07:52.866\nSo that I can make changes, and\nthey could push out everybody else, right,\n\n158\n00:07:52.866 --> 00:07:55.063\nit was easy to do,\nI changed from secondary to primary.\n\n159\n00:07:55.063 --> 00:07:58.457\nWell, in the meantime,\nI fixed the primary, but I didn't wanna\n\n160\n00:07:58.457 --> 00:08:02.610\nbring it online because then I'd have\ntwo primaries, and that doesn't work.\n\n161\n00:08:02.610 --> 00:08:06.244\nSo, I took the primary that I fixed,\nand I moved it down to a secondary.\n\n162\n00:08:06.244 --> 00:08:08.740\nSo, that I can bring it up and\nget it back online.\n\n163\n00:08:08.740 --> 00:08:11.100\nAnd then,\nlater on we schedule some downtime and\n\n164\n00:08:11.100 --> 00:08:12.250\nI flip it back the other way around.\n\n165\n00:08:12.250 --> 00:08:14.980\nSo, it's back.\nSo, that was a failure scenario.\n\n166\n00:08:14.980 --> 00:08:17.270\nI've never had anything beyond a failure\nscenario where I've done that.\n\n167\n00:08:17.270 --> 00:08:19.550\nAnd even in that failure scenario,\nI would've normally done it.\n\n168\n00:08:19.550 --> 00:08:22.020\nIf it wasn't for\nan emergency media craze in DNS records.\n\n169\n00:08:22.020 --> 00:08:24.440\nSo, it wasn't ideal, but\nthat's why we have those options.\n\n170\n00:08:24.440 --> 00:08:26.050\nAll right.\n\n171\n00:08:26.050 --> 00:08:28.480\nSo let's say I wanna set\nup standard replication.\n\n172\n00:08:28.480 --> 00:08:32.050\nWell here on this zone does not\na whole heck of a lot for me to do.\n\n173\n00:08:32.050 --> 00:08:33.100\nAll right.\n\n174\n00:08:33.100 --> 00:08:36.610\nOne thing that I need though is when\nyou replicate between a primary and\n\n175\n00:08:36.610 --> 00:08:40.710\na secondary, what you're doing is\nwhat's called the zone transfer\n\n176\n00:08:40.710 --> 00:08:44.720\nthe secondary is gonna connect to us and\nget a copy of the zone.\n\n177\n00:08:44.720 --> 00:08:47.470\nIt doesn't maintain its own copy cuz\nit's not allowed to change it, right.\n\n178\n00:08:47.470 --> 00:08:49.570\nSo it gets the copy from us.\n\n179\n00:08:49.570 --> 00:08:54.170\nSo, anybody I want to replicate to has\nto be allowed to do a zone transfer.\n\n180\n00:08:54.170 --> 00:08:57.730\nAnd in the properties for my zone,\nnot the properties for the server, but\n\n181\n00:08:57.730 --> 00:08:58.700\nthe property for the zone.\n\n182\n00:08:58.700 --> 00:09:01.069\nCuz you can replicate each\nzone differently if you want.\n\n183\n00:09:02.100 --> 00:09:06.190\nBut in the properties for the zone give\nit a tab for the zone transfers, and\n\n184\n00:09:06.190 --> 00:09:07.850\nthe default is,\n\n185\n00:09:07.850 --> 00:09:13.060\nthat you will only allow zone transfers to\nservers listed on the name service tab.\n\n186\n00:09:13.060 --> 00:09:14.620\nRight.\nAnd this normally is what yo want write\n\n187\n00:09:14.620 --> 00:09:17.370\nmy name service those are the people\nthat should maintained as replicas.\n\n188\n00:09:17.370 --> 00:09:20.910\nThat's all I want but\nI tell you in real life land.\n\n189\n00:09:20.910 --> 00:09:23.270\nI run a lot of DNS diagnostic tools.\n\n190\n00:09:23.270 --> 00:09:26.680\nAnd I like to be able to perform zone\ntransfers from my own workstation.\n\n191\n00:09:26.680 --> 00:09:30.620\nI like to be sitting at my laptop and run\na query to pull the whole zone down and\n\n192\n00:09:30.620 --> 00:09:31.910\nlook at it, right?\n\n193\n00:09:31.910 --> 00:09:36.320\nAnd so for that reason I want my laptop\nto be able to do a zone transfer but\n\n194\n00:09:36.320 --> 00:09:38.450\nmy laptop's not gonna be\nunder the nameserver list.\n\n195\n00:09:38.450 --> 00:09:40.030\nI don't want people looking\nup against my laptop.\n\n196\n00:09:40.030 --> 00:09:41.860\nI turn my laptop off, right?\n\n197\n00:09:41.860 --> 00:09:46.460\nSo in that scenario, you might go up here\nand say, only the following servers.\n\n198\n00:09:46.460 --> 00:09:51.230\nAnd then you can add your DNS servers,\nand your work station, and other things.\n\n199\n00:09:51.230 --> 00:09:53.970\nRight, as we edit this list,\nit's easy to come in here and say,\n\n200\n00:09:53.970 --> 00:09:59.450\nall right well I'm going to\nadd dns1.itprotvdemo.org.\n\n201\n00:09:59.450 --> 00:10:04.920\nAnd, we start to punch that one in,\nand dns2.itprotvdemo.org\n\n202\n00:10:04.920 --> 00:10:10.000\ngive me some, hm, wonder why it's\nnot finding the address to that one?\n\n203\n00:10:10.000 --> 00:10:12.530\nIt's stored right here in\nits own stinking zone.\n\n204\n00:10:12.530 --> 00:10:16.280\nSo, no such host is known,\ndid I not create those records?\n\n205\n00:10:16.280 --> 00:10:19.430\nLet's verify, you do have to have valid\nrecords if you're gonna type that stuff.\n\n206\n00:10:19.430 --> 00:10:24.818\nAnd looking here, I do have those,\nDNS1 and DNS2.itprotv.demo.org.\n\n207\n00:10:24.818 --> 00:10:30.072\nMaybe I fat fingered it, but basically\nwe just add those in to our servers\n\n208\n00:10:30.072 --> 00:10:34.935\nthat we allow and you could add\nyour workstation and you know what.\n\n209\n00:10:34.935 --> 00:10:37.450\nI\"m typing the fully\nqualified domain name.\n\n210\n00:10:37.450 --> 00:10:40.060\nWhy the heck is it not looking this up.\n\n211\n00:10:40.060 --> 00:10:40.950\nNow I'm curious.\n\n212\n00:10:40.950 --> 00:10:45.780\nDon't think I ever managed to\nbreak a local domain like that.\n\n213\n00:10:45.780 --> 00:10:46.680\nYeah.\nIt's not looking it up.\n\n214\n00:10:47.930 --> 00:10:51.600\nInteresting, well\n\n215\n00:10:51.600 --> 00:10:54.650\nif it fails to do the name lookup\nyou can always punch them in by IP.\n\n216\n00:10:54.650 --> 00:10:57.760\nIt's a little more annoying to punch them\nin by IP than it is by name especially if\n\n217\n00:10:57.760 --> 00:10:59.720\nyou're like me and\nyou don't remember the IP but\n\n218\n00:10:59.720 --> 00:11:02.700\nI've got it written down over here so\nI can punch it in that way.\n\n219\n00:11:02.700 --> 00:11:05.130\nI'm not quite sure why it's not\nable to look itself up there.\n\n220\n00:11:06.560 --> 00:11:09.450\nSo I can punch it in by IP and\nthen it's going to do a reverse lookup.\n\n221\n00:11:09.450 --> 00:11:12.210\nNow mine are hosted up on Amazon so when\nit does the reverse lookup its getting\n\n222\n00:11:12.210 --> 00:11:13.610\nthe Amazon name instead of my name.\n\n223\n00:11:13.610 --> 00:11:16.010\nYou know I do actually have\nalternate names for these things.\n\n224\n00:11:16.010 --> 00:11:19.130\nLet me try one of my alternate names and\nsee if it takes that.\n\n225\n00:11:19.130 --> 00:11:23.160\nI pro tv demo dot net and\nit took that one.\n\n226\n00:11:23.160 --> 00:11:26.290\nLet's get these other ones out of here and\nwe'll switch to the dot net names.\n\n227\n00:11:26.290 --> 00:11:29.870\nMy servers My servers are hosting\nthe dot org zone, but\n\n228\n00:11:29.870 --> 00:11:33.540\nthey're actually in the dot net zone, and\nso I just need to add it by that one.\n\n229\n00:11:33.540 --> 00:11:39.730\nSo I'll add in dns2.itprotvdmo.net.\n\n230\n00:11:39.730 --> 00:11:43.290\nAnd we'll add that one and\nI've got its IP right there.\n\n231\n00:11:43.290 --> 00:11:44.840\nIt resolved that one.\n\n232\n00:11:44.840 --> 00:11:48.440\nIt didn't pull an IPV6 one cuz I\ndon't have an IPV6 address, so\n\n233\n00:11:48.440 --> 00:11:49.740\nI'm okay with that.\n\n234\n00:11:49.740 --> 00:11:50.980\nSo I'll ignore that.\n\n235\n00:11:50.980 --> 00:11:54.620\nBut it got the other ones and\nput them in there so I'm fine there.\n\n236\n00:11:54.620 --> 00:11:57.340\nAnd it's still gonna be upset about that.\n\n237\n00:11:57.340 --> 00:11:59.880\nLet me delete that outta there.\n\n238\n00:11:59.880 --> 00:12:01.650\nAnd this one's been entered in.\n\n239\n00:12:01.650 --> 00:12:03.180\nIt was entered in twice?\n\n240\n00:12:03.180 --> 00:12:06.460\nLet's verify that real quick.\n\n241\n00:12:06.460 --> 00:12:10.730\nIt says the server with this IP address is\nnot authoritative for the required zone.\n\n242\n00:12:10.730 --> 00:12:11.460\nWhat does that mean?\n\n243\n00:12:11.460 --> 00:12:15.130\nWell, it means S server\ndoesn't have the zone yet.\n\n244\n00:12:15.130 --> 00:12:17.810\nWell it's cuz I'm gonna set up replication\nhere in a minute, but I haven't set it up\n\n245\n00:12:17.810 --> 00:12:21.050\nyet, so it doesn't have the zone, so I'm\nkind of in this like double edged sword.\n\n246\n00:12:21.050 --> 00:12:22.810\nSo anyhow,\nit's just complaining about that.\n\n247\n00:12:22.810 --> 00:12:26.040\nBut see how it will actually let me say\nOK, it will let me clear through that.\n\n248\n00:12:26.040 --> 00:12:29.470\nThat is a problem, but I'm about to fix\nthat when I turn on replication, so\n\n249\n00:12:29.470 --> 00:12:30.790\nwe're good there too.\n\n250\n00:12:30.790 --> 00:12:33.760\nBut anybody that I put in this list\nwill be allowed to do a zone transfer.\n\n251\n00:12:35.300 --> 00:12:37.630\nAnd not necessarily be\nused as a name server.\n\n252\n00:12:37.630 --> 00:12:40.750\nWhen I go to my name server tab,\nthey may or may not be in this list.\n\n253\n00:12:40.750 --> 00:12:43.580\nBut when I go to my zone transfer,\nI can add my workstation and\n\n254\n00:12:43.580 --> 00:12:45.120\nother things right in here.\n\n255\n00:12:45.120 --> 00:12:47.590\nBut in order for application to work\nyou gotta have a zone transfers.\n\n256\n00:12:49.340 --> 00:12:52.380\nThen when I setup a replication,\n\n257\n00:12:52.380 --> 00:12:54.520\nreplications actually\nworked two different ways.\n\n258\n00:12:54.520 --> 00:12:57.370\nThere's push and pull, right?\n\n259\n00:12:57.370 --> 00:12:59.540\nA pull replication is the standard way.\n\n260\n00:12:59.540 --> 00:13:02.420\nThat's where the secondary will, every\nnow and then, reach out the primary and\n\n261\n00:13:02.420 --> 00:13:05.850\nsay, hey, gimme a copy of the zone,\nand it pulls the changes down.\n\n262\n00:13:05.850 --> 00:13:08.000\nThe problem with that is\nit does it on a timer.\n\n263\n00:13:08.000 --> 00:13:09.480\nSo let's say it's every 15 minutes.\n\n264\n00:13:09.480 --> 00:13:14.930\nI could make a change right now, and it\ncould take up to 14 minutes and 59 seconds\n\n265\n00:13:14.930 --> 00:13:18.930\nto make it to the other side So anytime\nI make a change now I've got to wait.\n\n266\n00:13:18.930 --> 00:13:21.780\nSo I get a call from the help desk and\nthey say this records messed up and\n\n267\n00:13:21.780 --> 00:13:26.310\nI make the change, I say okay, sometime\nin the next 15 minutes it will be fixed.\n\n268\n00:13:26.310 --> 00:13:27.420\nRight?\nSo they've got to wait.\n\n269\n00:13:27.420 --> 00:13:28.610\nThat stinks.\n\n270\n00:13:28.610 --> 00:13:30.990\nSo that's the problem\nwith a pull application.\n\n271\n00:13:30.990 --> 00:13:36.190\nThey work, but it takes time.\n\n272\n00:13:36.190 --> 00:13:38.830\nIs where I make a change at a primary and\n\n273\n00:13:38.830 --> 00:13:42.860\nthen it immediately pushes the change\nout to the secondaries, all right.\n\n274\n00:13:42.860 --> 00:13:46.220\nAnd they call that a notify,\na notification.\n\n275\n00:13:46.220 --> 00:13:48.950\nWe send a notification from\nthe primary where the change are made\n\n276\n00:13:48.950 --> 00:13:50.650\nto the secondaries and\nwe basically tell them,\n\n277\n00:13:50.650 --> 00:13:54.150\nhey I just made a change,\nyou should come and update the zone.\n\n278\n00:13:54.150 --> 00:13:56.980\nAnd it triggers them to\ndo a pull replication.\n\n279\n00:13:56.980 --> 00:13:58.990\nSo we send them a notify and\nthey do a pull.\n\n280\n00:13:58.990 --> 00:14:01.910\nSo those are the two\nways that we replicate.\n\n281\n00:14:01.910 --> 00:14:04.260\nIn a perfect world, you'll enable both.\n\n282\n00:14:04.260 --> 00:14:06.310\nHaving push and pull is the best.\n\n283\n00:14:06.310 --> 00:14:08.830\nThat way if a notify message\ngets blocked for some reason or\n\n284\n00:14:08.830 --> 00:14:10.200\njust doesn't hit the other side,\n\n285\n00:14:10.200 --> 00:14:14.080\nyou'll still do your normal pull at a set\ninterval and reach out and get those.\n\n286\n00:14:14.080 --> 00:14:15.790\nSo this notify option down here,\n\n287\n00:14:15.790 --> 00:14:19.240\nif I choose that I can pick\nwhich servers I notify.\n\n288\n00:14:19.240 --> 00:14:22.500\nAnd the default is to do servers\nlisted on the Name Server tab.\n\n289\n00:14:22.500 --> 00:14:24.970\nAnd that's typically what you want.\n\n290\n00:14:24.970 --> 00:14:27.980\nI don't want the primary\nsending notifies to my laptop.\n\n291\n00:14:27.980 --> 00:14:31.450\nOn my laptop, I wanna be able to do zone\ntransfer when I'm doing diagnostics.\n\n292\n00:14:31.450 --> 00:14:33.720\nBut not just when I'm sitting\nthere watching YouTube, or\n\n293\n00:14:33.720 --> 00:14:35.770\nwhatever that is I do\nwith the rest of my day.\n\n294\n00:14:35.770 --> 00:14:37.940\nSo, I wanted to pull zones when I want it.\n\n295\n00:14:37.940 --> 00:14:39.550\nNot when I'm being told.\n\n296\n00:14:39.550 --> 00:14:42.360\nSo you typically want it to be somebody\nwho's a name server, somebody who's got\n\n297\n00:14:42.360 --> 00:14:45.290\nthe zone and is making it available\nto the other people on your network.\n\n298\n00:14:45.290 --> 00:14:47.330\nSo I'm gonna leave it at the default,\nbut you can override that and\n\n299\n00:14:47.330 --> 00:14:49.450\nadd other things in for the notify.\n\n300\n00:14:49.450 --> 00:14:53.350\nMaybe we got like a seams system,\none of those security monitoring systems.\n\n301\n00:14:53.350 --> 00:14:56.010\nAnd so anytime the zone changes,\nyou wanna notify the security system so\n\n302\n00:14:56.010 --> 00:14:58.680\nit can scan the zone and look and\nmake sure the change is okay.\n\n303\n00:14:58.680 --> 00:15:01.650\nSo I could add that to my notify list and\npunch that in.\n\n304\n00:15:01.650 --> 00:15:04.840\nIf I do that, I have to manually\nadd every server that I notify.\n\n305\n00:15:04.840 --> 00:15:08.560\nSo if I have 20 name servers,\nI'd have to put all 20 in this list.\n\n306\n00:15:08.560 --> 00:15:09.060\nKind of a pain.\n\n307\n00:15:10.370 --> 00:15:12.810\nAll right, but\nI've enabled zone transfers.\n\n308\n00:15:12.810 --> 00:15:16.620\nAn easier solution would have been\njust to check, to any server, but\n\n309\n00:15:16.620 --> 00:15:19.540\nthen even attackers could connect and\npull my whole zone.\n\n310\n00:15:19.540 --> 00:15:22.560\nAnd while there's no\nsecret data in the zone,\n\n311\n00:15:22.560 --> 00:15:25.990\nIt does give them just a super\neasy list of attack targets, like.\n\n312\n00:15:25.990 --> 00:15:26.840\nHere's everybody that I can attack.\n\n313\n00:15:26.840 --> 00:15:29.530\nI don't even need to do\nthe scan anymore versus\n\n314\n00:15:29.530 --> 00:15:31.530\nnormally they have to do\na scan to find the host.\n\n315\n00:15:33.360 --> 00:15:33.940\nAll right.\n\n316\n00:15:33.940 --> 00:15:35.000\nSo that's taken care of here.\n\n317\n00:15:35.000 --> 00:15:36.500\nThis is my master.\n\n318\n00:15:36.500 --> 00:15:39.520\nIt's up and running and it's good to go.\n\n319\n00:15:39.520 --> 00:15:45.220\nNow I can jump over to my secondary and\nconfigure it to do the replication, right.\n\n320\n00:15:45.220 --> 00:15:50.000\nNow the secondary might be another\nwindow server or it might be a Unix or\n\n321\n00:15:50.000 --> 00:15:52.880\nLinux server because theres\na standard replication.\n\n322\n00:15:52.880 --> 00:15:55.144\nIn my case it's going to\nbe another window server.\n\n323\n00:15:55.144 --> 00:16:00.075\nSo on this server I've installed\nthe DNS roll somewhere in here,\n\n324\n00:16:00.075 --> 00:16:02.145\nin this microscopic text.\n\n325\n00:16:02.145 --> 00:16:03.446\nThere we go.\n\n326\n00:16:03.446 --> 00:16:07.602\nSo this is dns2.itprotvdemo.net.\n\n327\n00:16:07.602 --> 00:16:10.430\nAnd it has no zones.\n\n328\n00:16:10.430 --> 00:16:11.160\nIt's completely empty.\n\n329\n00:16:11.160 --> 00:16:13.750\nI added the DNS role and that's it.\n\n330\n00:16:13.750 --> 00:16:15.213\nThat's all I did before the show.\n\n331\n00:16:15.213 --> 00:16:19.380\nSo I wanted to have a copy\nof itprotvdemo.org.\n\n332\n00:16:19.380 --> 00:16:23.046\nSo what I need to do is tell\nit I'm creating a new zone.\n\n333\n00:16:23.046 --> 00:16:28.040\nAnd when I create the new zone,\nI need to tell it that it's a secondary.\n\n334\n00:16:28.040 --> 00:16:29.800\nNot a primary, but a secondary.\n\n335\n00:16:29.800 --> 00:16:31.430\nSomebody else has the zone.\n\n336\n00:16:31.430 --> 00:16:34.670\nAnd we're gonna ask them for a copy of it.\n\n337\n00:16:34.670 --> 00:16:38.020\nAnd when I move forward,\nit's gonna ask that zone name.\n\n338\n00:16:38.020 --> 00:16:42.939\nSo I'll put in itprotvdemo.org.\n\n339\n00:16:42.939 --> 00:16:45.440\nAnd then it's gonna ask\nwhere I'm getting it from.\n\n340\n00:16:45.440 --> 00:16:51.501\nAnd I'm gonna tell it that I'm\npulling it from dns1.itprotvdemo.net.\n\n341\n00:16:51.501 --> 00:16:54.020\nOr you can put in the IP address.\n\n342\n00:16:54.020 --> 00:16:55.880\nLet me get this IPv6 one out of here.\n\n343\n00:16:56.950 --> 00:16:59.630\nI could have set up IPv6 before the show,\nbut I was in a hurry.\n\n344\n00:16:59.630 --> 00:17:01.430\nSo IPv4 is what we'll do.\n\n345\n00:17:01.430 --> 00:17:02.180\nSo I'm adding that one in.\n\n346\n00:17:02.180 --> 00:17:03.090\nThat's where I'm gonna get it from.\n\n347\n00:17:03.090 --> 00:17:04.440\nThat's the master.\n\n348\n00:17:04.440 --> 00:17:06.824\nIt is useful sometimes to have\nmore than one IP on the master.\n\n349\n00:17:06.824 --> 00:17:10.210\nSo that if one fails for some reason,\nyou can go and hit the other one.\n\n350\n00:17:10.210 --> 00:17:14.033\nBut you typically won't have\nmore than one master here.\n\n351\n00:17:14.033 --> 00:17:17.781\nThe exemption to that would be\nif I have a bind server and\n\n352\n00:17:17.781 --> 00:17:23.470\nI'm making it a secondary to a zone\nthat's Active Directory integrated.\n\n353\n00:17:23.470 --> 00:17:26.350\nI could point to more than one\nmaster cuz there is more than one\n\n354\n00:17:26.350 --> 00:17:27.750\nmaster in that scenario.\n\n355\n00:17:27.750 --> 00:17:31.420\nBut in a normal Unix held domain,\nyou'd only have one master.\n\n356\n00:17:31.420 --> 00:17:32.441\nYou wouldn't have more than one.\n\n357\n00:17:34.822 --> 00:17:36.680\nSo I'll move forward on that.\n\n358\n00:17:36.680 --> 00:17:38.190\nAnd that's all it needs.\n\n359\n00:17:38.190 --> 00:17:40.486\nWhen I finish up,\nit's gonna reach out to that server.\n\n360\n00:17:40.486 --> 00:17:41.630\nAnd it's gonna reach out right now.\n\n361\n00:17:41.630 --> 00:17:44.210\nAnd it's gonna request a zone transfer.\n\n362\n00:17:44.210 --> 00:17:47.400\nNow there's a number of things\nthat can go wrong at this point.\n\n363\n00:17:47.400 --> 00:17:50.740\nAnd if they do,\nthe icon in that folder's gonna change.\n\n364\n00:17:51.910 --> 00:17:55.120\nThe number one thing, firewalls.\n\n365\n00:17:55.120 --> 00:17:58.448\nIf I have firewalls in between me and\nthe other server.\n\n366\n00:17:58.448 --> 00:18:02.349\nAnd I'm talking about the Windows software\nfirewall as well as physical firewalls.\n\n367\n00:18:02.349 --> 00:18:03.989\nAny one of those can\nblock the zone transfer.\n\n368\n00:18:05.310 --> 00:18:09.890\nThe number two thing, authorizing\nzone transfers on the other side.\n\n369\n00:18:09.890 --> 00:18:13.370\nIf my IP is not cleared on the other side,\nit can get blocked.\n\n370\n00:18:13.370 --> 00:18:15.900\nAnd the mistake I normally\nsee is where we use\n\n371\n00:18:15.900 --> 00:18:19.410\nthe private IP of a server instead\nof the public IP, or vice versa.\n\n372\n00:18:19.410 --> 00:18:22.300\nAnd so it's trying to reach out\nto something that is incorrect.\n\n373\n00:18:22.300 --> 00:18:27.590\n&gt;&gt; When it pulls that zone transfer,\nis that going over your basic DNS port?\n\n374\n00:18:27.590 --> 00:18:29.083\nIs that gonna be like a port 53?\n\n375\n00:18:29.083 --> 00:18:30.811\nNo different than whatever\nthe clients would deal with if\n\n376\n00:18:30.811 --> 00:18:31.752\nthey were to query the server?\n\n377\n00:18:31.752 --> 00:18:34.554\n&gt;&gt; It'll be a TCP port 53.\n\n378\n00:18:34.554 --> 00:18:37.010\nVery, very rarely would it be UDP.\n\n379\n00:18:37.010 --> 00:18:41.951\nWhat happens with DNS is it'll do UDP\n53 unless the response needs to be\n\n380\n00:18:41.951 --> 00:18:43.412\nmore than one frame.\n\n381\n00:18:43.412 --> 00:18:45.419\nAnd if it's two,\nbetter more than one segment, really.\n\n382\n00:18:45.419 --> 00:18:48.476\nIf it's more than one segment,\nlike 1500 bytes.\n\n383\n00:18:48.476 --> 00:18:49.556\n1500 bytes would be the frame.\n\n384\n00:18:49.556 --> 00:18:50.756\nThe segment would be a little bit smaller.\n\n385\n00:18:50.756 --> 00:18:53.488\nAnd so let's say somewhere\nin the 1400 byte range.\n\n386\n00:18:53.488 --> 00:18:56.463\nMost of your queries\nare just a name to an IP.\n\n387\n00:18:56.463 --> 00:18:58.880\nAnd that fits in under 1400 bytes.\n\n388\n00:18:58.880 --> 00:19:00.208\nIt goes and uses UDP.\n\n389\n00:19:00.208 --> 00:19:03.970\nBut when you do a zone transfer, the odds\nare you're gonna be over 1400 bytes.\n\n390\n00:19:03.970 --> 00:19:05.820\nWhich is not a hard number to exceed.\n\n391\n00:19:05.820 --> 00:19:07.110\nSo then it's gotta segment it.\n\n392\n00:19:07.110 --> 00:19:08.174\nAnd UDP can't really do that.\n\n393\n00:19:08.174 --> 00:19:10.860\nSo we have to switch over to TCP,\nthat's what happens.\n\n394\n00:19:10.860 --> 00:19:12.360\nSo when you do a zone transfer,\n\n395\n00:19:12.360 --> 00:19:15.201\nyour zone's pretty much\nguaranteed to break that limit.\n\n396\n00:19:15.201 --> 00:19:18.188\nJust between the start of authority,\nand the name server entries and\n\n397\n00:19:18.188 --> 00:19:19.720\nthe other things you add.\n\n398\n00:19:19.720 --> 00:19:21.313\nAnd so when that happens, it uses that.\n\n399\n00:19:21.313 --> 00:19:24.650\nSo as long as you got that approved,\nit's not a special port or anything.\n\n400\n00:19:24.650 --> 00:19:28.550\nAlthough, I do know some people where\nthey'll set up things like SSH tunnels or\n\n401\n00:19:28.550 --> 00:19:31.910\nIPsec or something to make sure\nyou've got an encrypted session\n\n402\n00:19:31.910 --> 00:19:33.530\nbetween you and the server.\n\n403\n00:19:33.530 --> 00:19:36.880\nBecause remember,\nall of this is in plaintext.\n\n404\n00:19:36.880 --> 00:19:38.210\nDNS records are not secret.\n\n405\n00:19:38.210 --> 00:19:39.899\nSo they don't bother encrypting them.\n\n406\n00:19:39.899 --> 00:19:42.300\nThis is all sent in plaintext.\n\n407\n00:19:42.300 --> 00:19:46.638\nEven when you have DNSSEC turned on,\nall the hash signatures, they're hashes,\n\n408\n00:19:46.638 --> 00:19:47.830\nthey're non-reversible.\n\n409\n00:19:47.830 --> 00:19:50.050\nSo they're stored in\nplaintext right there.\n\n410\n00:19:50.050 --> 00:19:51.200\nIt's not the private key.\n\n411\n00:19:51.200 --> 00:19:53.910\nThey're all public keys\nthat public knowledge.\n\n412\n00:19:53.910 --> 00:19:55.570\nAnd that's it,\nthere's no security on this.\n\n413\n00:19:55.570 --> 00:20:00.840\nSo you might choose to implement IPsec\nalso to make sure that that's encrypted.\n\n414\n00:20:00.840 --> 00:20:03.233\nBut it's gonna reach out, and\nI'm not gonna see anything right away.\n\n415\n00:20:03.233 --> 00:20:06.140\nBut if I hit the Refresh button is\nwhere I'll normally get that update.\n\n416\n00:20:06.140 --> 00:20:10.350\nAnd my status here, it shows that I'm\na secondary and that I'm running.\n\n417\n00:20:10.350 --> 00:20:12.897\nAnd if I click on it, I've got records.\n\n418\n00:20:12.897 --> 00:20:14.920\nThat's exactly what I wanna see.\n\n419\n00:20:14.920 --> 00:20:17.605\nIf it failed, I would've got\nthe red circle with a white x,\n\n420\n00:20:17.605 --> 00:20:19.130\nletting me know it didn't work.\n\n421\n00:20:19.130 --> 00:20:22.227\nAnd then I think I'll go into the system\nlogs and start trying to dig in.\n\n422\n00:20:22.227 --> 00:20:25.780\nAnd find out what the heck is happening\nthere and why it didn't work.\n\n423\n00:20:25.780 --> 00:20:29.280\nBut I now have a copy of that zone.\n\n424\n00:20:29.280 --> 00:20:32.690\nI've got the records right here and\nI'm getting it.\n\n425\n00:20:32.690 --> 00:20:37.030\nAnd because I'm listed as\na name server right up here.\n\n426\n00:20:37.030 --> 00:20:40.730\ndns2.itprotvdemo.net is\nlisted as a name server.\n\n427\n00:20:40.730 --> 00:20:44.590\nWhen a change happens on the primary,\nit will do a notify to me.\n\n428\n00:20:44.590 --> 00:20:46.947\nAnd I'll go and\nyank that record as soon as I can.\n\n429\n00:20:46.947 --> 00:20:49.956\nBut if I don't get a notify,\nI'll still do a pull every so\n\n430\n00:20:49.956 --> 00:20:55.010\noften to make sure that I get the zone and\nthat I stay up to date with the changes.\n\n431\n00:20:55.010 --> 00:20:59.410\nBut, If I come in here and\ntry and create a new record.\n\n432\n00:20:59.410 --> 00:21:01.800\nIn the last episode,\nI would right-click on zone,\n\n433\n00:21:01.800 --> 00:21:04.420\nand then I would choose\nto create a new record.\n\n434\n00:21:04.420 --> 00:21:05.630\nI don't have that option.\n\n435\n00:21:05.630 --> 00:21:08.500\nI can't create an A record,\na four A or anything.\n\n436\n00:21:08.500 --> 00:21:11.864\nAll I can do is reload,\ntransfer from master,\n\n437\n00:21:11.864 --> 00:21:14.726\ntransfer new copy of zone from master.\n\n438\n00:21:14.726 --> 00:21:16.580\nWell, those three sound similar.\n\n439\n00:21:16.580 --> 00:21:18.450\nSo let me tell you\nthe difference between each one.\n\n440\n00:21:18.450 --> 00:21:21.030\nReload has nothing to do with the master.\n\n441\n00:21:21.030 --> 00:21:25.500\nReload says,\nI've got this zone stored in RAM.\n\n442\n00:21:25.500 --> 00:21:27.870\nAnd I've got this zone\nstored in the hard drive.\n\n443\n00:21:27.870 --> 00:21:30.541\nDelete what's in RAM, and\npull up from the hard drive again.\n\n444\n00:21:30.541 --> 00:21:32.450\nThat was Reload does.\n\n445\n00:21:32.450 --> 00:21:34.814\nOn a master, that's pretty useful if\nyou feel like things got out of sync.\n\n446\n00:21:34.814 --> 00:21:38.600\nOr things got corrupt, you can reload\nit and you do it pretty quickly.\n\n447\n00:21:38.600 --> 00:21:41.090\nOn a secondary like this,\nit's not terribly useful.\n\n448\n00:21:41.090 --> 00:21:44.130\nBecause in some scenarios,\nyou don't even store this zone on a drive.\n\n449\n00:21:44.130 --> 00:21:47.260\nBut usually, it does.\n\n450\n00:21:47.260 --> 00:21:48.250\nSo we can reload that.\n\n451\n00:21:48.250 --> 00:21:50.860\nThe second one is more useful,\nTransfer from Master.\n\n452\n00:21:50.860 --> 00:21:55.309\nBut Microsoft's DNS will do\nincremental zone transfers.\n\n453\n00:21:55.309 --> 00:21:59.620\nThere's two different types of\nzone transfers, AXFR and IXFR.\n\n454\n00:21:59.620 --> 00:22:02.140\nAn AXFR is the whole thing.\n\n455\n00:22:02.140 --> 00:22:03.410\nGive me the whole zone.\n\n456\n00:22:03.410 --> 00:22:04.823\nThat's what I just did a moment ago.\n\n457\n00:22:04.823 --> 00:22:06.370\nWe don't see it, it's on the background.\n\n458\n00:22:06.370 --> 00:22:08.450\nI said, give me the whole\nzone cuz I don't have it.\n\n459\n00:22:08.450 --> 00:22:13.081\nBut now that I've got the zone, I can say,\nhey, my last serial number was this.\n\n460\n00:22:13.081 --> 00:22:14.380\nThis is my new serial number.\n\n461\n00:22:14.380 --> 00:22:16.050\nCan you just give me the changes?\n\n462\n00:22:16.050 --> 00:22:16.746\nDon't give me the whole thing.\n\n463\n00:22:16.746 --> 00:22:17.516\nJust give me what changed.\n\n464\n00:22:17.516 --> 00:22:20.000\nAnd that really helps to\noptimize replication.\n\n465\n00:22:20.000 --> 00:22:24.150\n&gt;&gt; Now Don, in this instance, your zone\ndoesn't allow for dynamic updates.\n\n466\n00:22:24.150 --> 00:22:25.560\nYou've turned that off.\n\n467\n00:22:25.560 --> 00:22:29.739\nIs there really a reason to use, I know\nI've asked you this question before,\n\n468\n00:22:29.739 --> 00:22:34.241\nan incremental zone transfer if you're\nnot constantly updating that file through\n\n469\n00:22:34.241 --> 00:22:35.286\ndynamic updates?\n\n470\n00:22:37.015 --> 00:22:38.104\n&gt;&gt; My answer would be no.\n\n471\n00:22:38.104 --> 00:22:40.100\nThere's really no point worrying about it.\n\n472\n00:22:40.100 --> 00:22:43.080\nBut the official textbook thing is yes.\n\n473\n00:22:43.080 --> 00:22:47.860\nBecause what if you've got\n10,000 records in that zone?\n\n474\n00:22:47.860 --> 00:22:49.090\nAnd it's a big file.\n\n475\n00:22:49.090 --> 00:22:50.694\nAnd every time you change one record,\n\n476\n00:22:50.694 --> 00:22:53.166\nyou gotta send the whole\nstinking thing to the other side.\n\n477\n00:22:53.166 --> 00:22:57.606\nAnd it's gonna rebuild its cache and\nall that stuff, those things happen.\n\n478\n00:22:57.606 --> 00:23:00.783\nMy argument would still be,\nhey, even with 10,000 records,\n\n479\n00:23:00.783 --> 00:23:03.550\nyour zone is probably under\none megabyte its size.\n\n480\n00:23:03.550 --> 00:23:07.022\nAnd that's just trivial amounts\nof data on modern computers.\n\n481\n00:23:07.022 --> 00:23:09.210\nBut back in the day,\nthat used to be a problem.\n\n482\n00:23:09.210 --> 00:23:10.409\nIt used to be stuff we worry.\n\n483\n00:23:10.409 --> 00:23:13.230\nWe have different problems these\ndays than we did back then.\n\n484\n00:23:13.230 --> 00:23:16.921\nBut back then, even a meg of\ndata was a substantial amount.\n\n485\n00:23:16.921 --> 00:23:18.860\nAnd so it used to be a problem.\n\n486\n00:23:18.860 --> 00:23:20.060\nNow, we don't worry about it.\n\n487\n00:23:20.060 --> 00:23:23.210\nI don't really care about incremental\ntransfers on DNS anymore.\n\n488\n00:23:23.210 --> 00:23:24.540\nBut it did used to be a big deal.\n\n489\n00:23:24.540 --> 00:23:26.510\nAnd that's really what my choice is here.\n\n490\n00:23:26.510 --> 00:23:30.490\nWhen I see Transfer from Master or\nTransfer new copy of zone from Master.\n\n491\n00:23:30.490 --> 00:23:33.170\nTransfer from Master\ntriggers an incremental.\n\n492\n00:23:33.170 --> 00:23:34.400\nUnless it's the very first one,\n\n493\n00:23:34.400 --> 00:23:38.760\nwhich would only happen if it failed on\nthe first try and I fixed the problem.\n\n494\n00:23:38.760 --> 00:23:39.709\nThen this one would actually do a full.\n\n495\n00:23:39.709 --> 00:23:41.467\nBut normally,\nit's gonna do an incremental.\n\n496\n00:23:41.467 --> 00:23:43.750\nThe next one, though,\nthat's gonna do a full.\n\n497\n00:23:43.750 --> 00:23:47.340\nThis one's always gonna do an AXFR,\nTransfer new copy of zone from Master.\n\n498\n00:23:47.340 --> 00:23:48.723\nI don't trust what I've got.\n\n499\n00:23:48.723 --> 00:23:51.530\nI'm gonna ditch it and\nbring in the new copy.\n\n500\n00:23:52.630 --> 00:23:55.906\nAnd that'll make sure that we're up to\ndate and we've got the latest data.\n\n501\n00:23:55.906 --> 00:23:59.215\n&gt;&gt; Does your secondary DNS server,\nDon, do recursion?\n\n502\n00:23:59.215 --> 00:24:00.887\n&gt;&gt; Yeah, absolutely, yep.\n\n503\n00:24:00.887 --> 00:24:05.055\nWhen a DNS server does a lookup\nIt looks for authoritative zones.\n\n504\n00:24:05.055 --> 00:24:08.760\nThis DNS server is authoritative,\nitprotv.demo.org.\n\n505\n00:24:08.760 --> 00:24:10.170\nSo it'll answer right out of the zone.\n\n506\n00:24:10.170 --> 00:24:11.910\nIt can't change that zone,\nbut it'll answer out of it.\n\n507\n00:24:11.910 --> 00:24:13.170\nIt's authoritative.\n\n508\n00:24:13.170 --> 00:24:17.130\nBut anything it's not authoritative for,\ngoes to the normal lookup process, right?\n\n509\n00:24:17.130 --> 00:24:19.830\nAnd that's why we have more\nthan one of these servers.\n\n510\n00:24:19.830 --> 00:24:24.058\nCuz, what's the bulk of our stuff\ngonna be, we're cursive look ups.\n\n511\n00:24:24.058 --> 00:24:27.160\nYou know, people abuse the internet,\nthere's gonna be tons of lookup for\n\n512\n00:24:27.160 --> 00:24:30.270\ncrazy ads and stupid articles on\nFacebook and things like that.\n\n513\n00:24:30.270 --> 00:24:33.320\nVersus you've got a static\namount of file servers and\n\n514\n00:24:33.320 --> 00:24:35.920\nmail servers that uses\npart of actual work.\n\n515\n00:24:35.920 --> 00:24:39.019\nSo you're true work related DNS\nlook ups are not that significant.\n\n516\n00:24:40.260 --> 00:24:43.820\nMaybe if you got Active Directory you do a\nlot of look ups, find domain controllers.\n\n517\n00:24:43.820 --> 00:24:45.300\nBut your workstations cache that too.\n\n518\n00:24:45.300 --> 00:24:47.200\nMost of them don't even\nupdate until they reboot.\n\n519\n00:24:47.200 --> 00:24:51.240\nSo you're talking about a very small\namount of look ups for internal resources.\n\n520\n00:24:51.240 --> 00:24:53.050\nSo it's that external side\nthat's really important.\n\n521\n00:24:53.050 --> 00:24:56.880\nAnd I might be a secondary for this zone.\n\n522\n00:24:56.880 --> 00:24:59.930\nAnd then I might have another\nzone that I'm the primary for.\n\n523\n00:24:59.930 --> 00:25:01.870\nAnd another one on active\ndirectory integrated.\n\n524\n00:25:01.870 --> 00:25:04.330\nYou can mix and\nmatch these things like crazy.\n\n525\n00:25:04.330 --> 00:25:07.540\nSo the zones are really treated as\nequal when it comes to a lookup.\n\n526\n00:25:07.540 --> 00:25:09.380\nAnd it doesn't care if you're secondary or\nprimary.\n\n527\n00:25:09.380 --> 00:25:11.930\nIt's just when you make changes\nthat that matters, right?\n\n528\n00:25:11.930 --> 00:25:16.630\nNow I can't make a change from here, but\nif I jump back over to my other server,\n\n529\n00:25:16.630 --> 00:25:17.880\nI can make a change on this one, right?\n\n530\n00:25:17.880 --> 00:25:22.470\nSo I'm going to add a new entry and maybe\nI want an entry for Wes's laptop, right?\n\n531\n00:25:22.470 --> 00:25:25.870\nSo I'll just call this one Wes Laptop.\n\n532\n00:25:25.870 --> 00:25:27.280\nAnd I'll give it an IP address.\n\n533\n00:25:27.280 --> 00:25:29.760\nI always make one up, but\nthat's really somebody's IP.\n\n534\n00:25:29.760 --> 00:25:31.510\nI have no idea who, but\nwe'll do it anyway.\n\n535\n00:25:31.510 --> 00:25:34.160\nAll right, so there we go.\n\n536\n00:25:34.160 --> 00:25:37.918\nWe've got an IP now for\nWes's laptop, 1.1.1.1, right?\n\n537\n00:25:37.918 --> 00:25:39.440\nI made it here.\n\n538\n00:25:39.440 --> 00:25:43.480\nIn theory, in the background, my server\njust sent a notify over to the secondary\n\n539\n00:25:43.480 --> 00:25:46.890\nand it said, hey,\nour serial number just changed, right?\n\n540\n00:25:46.890 --> 00:25:50.220\nI think my serial number was 18 before,\nso it should have bumped up to 19.\n\n541\n00:25:50.220 --> 00:25:57.730\nIf I pull up my Properties and go to\nmy SOA tab, where is my serial number?\n\n542\n00:25:57.730 --> 00:26:01.130\nUp here, 18,\nI guess It must have been 17 before.\n\n543\n00:26:01.130 --> 00:26:05.020\nBut it bumps that number, and it sends\nthe notify to the other side, right.\n\n544\n00:26:05.020 --> 00:26:07.900\nI can manually increment if I want,\nbut that number goes up.\n\n545\n00:26:07.900 --> 00:26:11.690\nI guess I could just seen the number right\nthere, which I didn't pay attention.\n\n546\n00:26:11.690 --> 00:26:12.550\nSo let's create a new entry,\n\n547\n00:26:12.550 --> 00:26:15.810\nit's supposed to increment every\ntime we create new record.\n\n548\n00:26:15.810 --> 00:26:18.490\n&gt;&gt; I just hit refresh, and now I see 19.\n\n549\n00:26:18.490 --> 00:26:20.570\nThe MMC,\nyou always got to remember to hit refresh.\n\n550\n00:26:20.570 --> 00:26:23.980\nSo I created Wes's laptop and\nit went from 18 to 19.\n\n551\n00:26:23.980 --> 00:26:26.940\nAnd then it should have sent\na notify to the other side, right?\n\n552\n00:26:26.940 --> 00:26:29.280\nIf it did,\nthe other side will update right now.\n\n553\n00:26:29.280 --> 00:26:33.003\nIf it didn't, the other side update\nwhen it does it's next pull anyway, so\n\n554\n00:26:33.003 --> 00:26:34.937\nit's going to periodically do a pull.\n\n555\n00:26:34.937 --> 00:26:38.052\nAnd I should be able to jump\nover to the other side.\n\n556\n00:26:38.052 --> 00:26:41.544\nAnd if it got the notify and\nit reached out and did the pull,\n\n557\n00:26:41.544 --> 00:26:45.560\nI should be able to refresh this and\nthere's Wes' laptop.\n\n558\n00:26:45.560 --> 00:26:48.352\nAll I did was refresh my screen,\ncuz the doesn't refresh for me.\n\n559\n00:26:48.352 --> 00:26:50.480\nAnd I can see his entry made it over here,\nright?\n\n560\n00:26:50.480 --> 00:26:52.410\nAnd that, one of the two things.\n\n561\n00:26:52.410 --> 00:26:56.420\nIt was either the notify that worked,\nor it just happen to hit it's interval.\n\n562\n00:26:56.420 --> 00:26:58.270\nI'm pretty sure the interval\nis 15 minutes and\n\n563\n00:26:58.270 --> 00:27:01.070\nthat interval may have happened\nright there during that same time.\n\n564\n00:27:01.070 --> 00:27:03.120\nBut either way I got the record and\nthere we go.\n\n565\n00:27:03.120 --> 00:27:06.774\nSo we make all our changes on the primary\nand they replicate over the secondary.\n\n566\n00:27:06.774 --> 00:27:07.943\nPretty straight forward.\n\n567\n00:27:07.943 --> 00:27:11.450\nAll right, now once that's done\nI'm replicating, I'm in business.\n\n568\n00:27:11.450 --> 00:27:14.420\nI can add more secondaries if I want,\nyou can even do multi-tiers.\n\n569\n00:27:14.420 --> 00:27:18.530\nI have a primary and a secondary, and\nthen more secondaries that feed, so\n\n570\n00:27:18.530 --> 00:27:20.950\nit'd be like tertiaries,\nthat feed off of the secondary.\n\n571\n00:27:20.950 --> 00:27:22.390\nSo you can build a hierarchy like that,\n\n572\n00:27:22.390 --> 00:27:24.690\nbut you can only make\nchanges at the primary.\n\n573\n00:27:24.690 --> 00:27:27.690\nAfter it's done, It's kind of like that\nrotisserie chicken, right, we set it,\n\n574\n00:27:27.690 --> 00:27:29.610\nwe forget it, and off it goes.\n\n575\n00:27:29.610 --> 00:27:32.400\n&gt;&gt; Yeah, and I got to just gotta make\nsure that I can get to your DNS server\n\n576\n00:27:32.400 --> 00:27:33.790\nreal quick and pull the power on it.\n\n577\n00:27:33.790 --> 00:27:35.090\nSo you clear the cache and\n\n578\n00:27:35.090 --> 00:27:38.450\nyou can't tell what I'm really doing\nduring my working hours there, Don.\n\n579\n00:27:38.450 --> 00:27:41.610\nIt does look like we're coming to the end\nof another episode, but Don, before we do.\n\n580\n00:27:41.610 --> 00:27:44.540\nWhen it comes to configuring\nreplications in your zones,\n\n581\n00:27:44.540 --> 00:27:47.050\ndo you have any words that you\nmight like to add to our viewers?\n\n582\n00:27:47.050 --> 00:27:50.020\nOr give to our viewers before we sign off?\n\n583\n00:27:50.020 --> 00:27:52.820\n&gt;&gt; Sure, I know I said set it and forget\nit, but you do need to monitor it and\n\n584\n00:27:52.820 --> 00:27:54.000\nmake sure it's getting updated.\n\n585\n00:27:54.000 --> 00:27:56.680\nThere's nothing worse than having two\ndifferent DNS servers that give you two\n\n586\n00:27:56.680 --> 00:27:57.850\ndifferent responses.\n\n587\n00:27:57.850 --> 00:27:59.695\nYou gotta make sure that\nreplication continues on.\n\n588\n00:27:59.695 --> 00:28:02.420\nJust monitor your vent logs and\nthe general health of the server.\n\n589\n00:28:02.420 --> 00:28:05.230\nKeep an eye on it, so that if that\nreplication ever breaks that you're aware,\n\n590\n00:28:05.230 --> 00:28:06.550\nyou can get in there and fix it.\n\n591\n00:28:06.550 --> 00:28:09.720\nAll right Don, as always we appreciate\nyou being here in the studios with us and\n\n592\n00:28:09.720 --> 00:28:11.810\nwe appreciate you the viewer watching.\n\n593\n00:28:11.810 --> 00:28:14.980\nSigning out for ITPRO.TV,\nI've been your host West Bryan.\n\n594\n00:28:14.980 --> 00:28:15.800\n&gt;&gt; And I\"m Don Pezet.\n\n595\n00:28:15.800 --> 00:28:18.399\n&gt;&gt; And we'll see you next time.\n\n596\n00:28:18.399 --> 00:28:24.525\n[MUSIC]\n\n597\n00:28:24.525 --> 00:28:27.779\n&gt;&gt; Thank you for watching ITPRO.TV\n\n",
          "vimeoId": "196626234"
        }
      ],
      "title": "Microsoft DNS Server"
    },
    {
      "episodes": [
        {
          "description": "In this episode Don and Cherokee discuss and demonstrate how to install a BIND (Berkley Internet Naming Domain) DNS Server. BIND is an older but very important reference DNS program which is available for a variety of operating  systems. We see how to edit the configuration file, start the service and allow BIND thru the firewalld.",
          "length": "1544",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-8-1-installing_bind-120716-PGM.00_25_31_05.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-8-1-installing_bind-120716-PGM.00_25_31_05.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-8-1-installing_bind-120716-PGM.00_25_31_05.Still001-sm.jpg",
          "title": "Installing BIND",
          "transcript": "WEBVTT\n\n1\n00:00:00.008 --> 00:00:01.323\nWelcome to ITProTV.\n\n2\n00:00:01.323 --> 00:00:08.246\nI'm your host [CROSSTALK]\n[SOUND]\n\n3\n00:00:08.246 --> 00:00:12.119\n&gt;&gt; You're watching ITProTV.\n\n4\n00:00:12.119 --> 00:00:14.782\n&gt;&gt; Welcome to another\nDNS Tech Skills show.\n\n5\n00:00:14.782 --> 00:00:16.622\nI'm your host, Cherokee Boose.\n\n6\n00:00:16.622 --> 00:00:20.755\nAnd in this episode, we're really gonna\nbe taking a look at how to go ahead and\n\n7\n00:00:20.755 --> 00:00:23.140\ninstall and configure DNS with BIND.\n\n8\n00:00:23.140 --> 00:00:26.310\nI've never used BIND before, so\nthis is gonna be really interesting.\n\n9\n00:00:26.310 --> 00:00:28.601\nWith us today,\nwe have Don Pezet in studio.\n\n10\n00:00:28.601 --> 00:00:29.975\nThank you for joining us today, Don.\n\n11\n00:00:29.975 --> 00:00:31.178\n&gt;&gt; Thanks for having me, Cherokee.\n\n12\n00:00:31.178 --> 00:00:35.157\nAnd you mentioned, you hadn't used BIND\nbefore, and if this were ten years ago,\n\n13\n00:00:35.157 --> 00:00:36.608\nI'd be shocked to hear that.\n\n14\n00:00:36.608 --> 00:00:39.440\nHow have you not used the most\ncommon DNS server on the planet?\n\n15\n00:00:39.440 --> 00:00:43.120\nBut it really isn't the most common\nDNS server on the planet anymore.\n\n16\n00:00:43.120 --> 00:00:46.290\nIt's been supplanted by a couple of\nother ones like Unbound, Power DNS, and\n\n17\n00:00:46.290 --> 00:00:47.430\nMicrosoft's DNS.\n\n18\n00:00:47.430 --> 00:00:50.280\nBut it is important that we\nunderstand how BIND operates.\n\n19\n00:00:50.280 --> 00:00:53.110\nThere's many organizations\nthat still use it, even today.\n\n20\n00:00:53.110 --> 00:00:55.720\nIt's still very prolific\nout there on the Internet.\n\n21\n00:00:55.720 --> 00:01:00.460\nBut more importantly,\nit's the reference design for DNS servers.\n\n22\n00:01:00.460 --> 00:01:03.420\nSo let's say that you decide one day that\nall the other DNS servers out there just\n\n23\n00:01:03.420 --> 00:01:05.490\nabsolutely stink, and\nyou're gonna write your own.\n\n24\n00:01:05.490 --> 00:01:08.260\nAt a minimum, you have to\nmaintain compatibility with BIND.\n\n25\n00:01:08.260 --> 00:01:10.530\nThat's how the DNS\ninfrastructure is developed.\n\n26\n00:01:10.530 --> 00:01:12.000\nThat's that reference piece.\n\n27\n00:01:12.000 --> 00:01:14.500\nSo it's still very important,\nit's still very widely used, and\n\n28\n00:01:14.500 --> 00:01:16.320\nthat's why we're gonna take a look\nat it right here in this show.\n\n29\n00:01:16.320 --> 00:01:19.130\nAnd get a chance to see how to install it,\nget it configured, and\n\n30\n00:01:19.130 --> 00:01:19.840\nget it up and running.\n\n31\n00:01:19.840 --> 00:01:21.536\nAnd there's actually a good bit to it, so\n\n32\n00:01:21.536 --> 00:01:23.967\nwe're gonna run through it in\na couple of different parts.\n\n33\n00:01:23.967 --> 00:01:27.370\n&gt;&gt; Now Don, you mentioned that this would\nbe a good reference point or the source.\n\n34\n00:01:27.370 --> 00:01:29.580\nSo is that source code freely available,\nor\n\n35\n00:01:29.580 --> 00:01:32.041\nwhat type of platform\nwould you be working with?\n\n36\n00:01:32.041 --> 00:01:34.731\n&gt;&gt; Yeah, so\nBIND was originally developed under Unix,\n\n37\n00:01:34.731 --> 00:01:36.480\nin the early days of the Internet.\n\n38\n00:01:36.480 --> 00:01:38.130\nWe're talking about the mid 1980s,\n\n39\n00:01:38.130 --> 00:01:42.280\nit started development even earlier than\nthat, so it's been around a long time.\n\n40\n00:01:42.280 --> 00:01:45.296\nAnd as IP addressing started\nto become prolific, well,\n\n41\n00:01:45.296 --> 00:01:49.090\nit's hard to remember IPs, so people\nhad to come up with a name system, and\n\n42\n00:01:49.090 --> 00:01:51.670\nBIND was the original system for\npowering that.\n\n43\n00:01:51.670 --> 00:01:56.900\nIt stands for the Berkeley Internet\nNetwork Domain, wait sorry,\n\n44\n00:01:56.900 --> 00:01:59.910\nBerkeley Internet Naming Domain,\nI'm screwing this all up, aren't I?\n\n45\n00:01:59.910 --> 00:02:01.280\nThat's why I have it written down for me,\n\n46\n00:02:01.280 --> 00:02:03.430\nBerkeley Internet Name Domain,\nthere we go.\n\n47\n00:02:03.430 --> 00:02:06.320\nCuz it was developed at the University\nof California of Berkeley to help them\n\n48\n00:02:06.320 --> 00:02:07.030\nwith name resolution.\n\n49\n00:02:07.030 --> 00:02:08.680\nAnd then it just kinda spread from there.\n\n50\n00:02:08.680 --> 00:02:10.370\nSo, it is open source.\n\n51\n00:02:10.370 --> 00:02:14.090\nIt was developed under Unix and BSD,\nbrought over into the Linux world.\n\n52\n00:02:14.090 --> 00:02:18.990\nIt runs on Mac OS,\nif you have OS 10 or OS X, whatever.\n\n53\n00:02:18.990 --> 00:02:21.090\nThere's versions of it\nported over to Windows.\n\n54\n00:02:21.090 --> 00:02:23.440\nYou can go right to the BIND website and\ndownload it for Windows, too.\n\n55\n00:02:23.440 --> 00:02:27.940\nSo you can run it on anything, and\nwhen I say it's the reference, everything\n\n56\n00:02:27.940 --> 00:02:31.700\nthat we write in here is basically what\nsets the standard for DNS records.\n\n57\n00:02:31.700 --> 00:02:34.710\nAnd so what you're gonna see,\nit's not just cross platform, but\n\n58\n00:02:34.710 --> 00:02:36.879\neven cross product between\nother DNS servers.\n\n59\n00:02:36.879 --> 00:02:37.658\n&gt;&gt; Thank you.\n\n60\n00:02:37.658 --> 00:02:40.600\n&gt;&gt; Yep, all right, so\nlet's dive into it and take a look.\n\n61\n00:02:40.600 --> 00:02:42.790\nNow I will say,\nI'm gonna do everything on a Linux box.\n\n62\n00:02:42.790 --> 00:02:45.900\nWell, I guess, my laptop's a Mac, but I'm\ngonna be remoting into Linux servers for\n\n63\n00:02:45.900 --> 00:02:49.610\nall of this for setting it up,\ncuz we normally host it off of Linux.\n\n64\n00:02:49.610 --> 00:02:52.506\nAnd on the majority of Linux\ndistros that are out there,\n\n65\n00:02:52.506 --> 00:02:56.031\nyou'll find where BIND is already\ninstalled, it's very common.\n\n66\n00:02:56.031 --> 00:02:59.590\nIf you're on a BSD like FreeBSD,\nthey do Unbound instead.\n\n67\n00:02:59.590 --> 00:03:02.100\nOthers have moved over to Power DNS,\nthere's a few different ones.\n\n68\n00:03:02.100 --> 00:03:04.230\nBut a lot of them will\nalready have BIND installed.\n\n69\n00:03:04.230 --> 00:03:06.857\nSo I'm gonna show you how to\ninstall it as if it wasn't there.\n\n70\n00:03:06.857 --> 00:03:10.490\nIf it is there, it's not a big deal,\nit just doesn't do the install, right?\n\n71\n00:03:10.490 --> 00:03:14.085\nSo let me remote into a server, and\nI'm gonna use Acentel 7 Server.\n\n72\n00:03:14.085 --> 00:03:18.875\nThose are pretty common these days, a lot\nof people are using, it's the same as\n\n73\n00:03:18.875 --> 00:03:23.972\nRedHat Enterprise Linux 7 and the same\nas Fedora 24 or 25, right around there.\n\n74\n00:03:23.972 --> 00:03:26.710\n&gt;&gt; So Don, if it was integrated\ninto the operating system,\n\n75\n00:03:26.710 --> 00:03:29.620\nis it similar to Windows where\nwe have that features on demand\n\n76\n00:03:29.620 --> 00:03:32.800\ntype style where you would have to\ngo ahead and install that role?\n\n77\n00:03:32.800 --> 00:03:35.660\n&gt;&gt; Yeah, and they don't have a,\nwell, they do have a role for it.\n\n78\n00:03:35.660 --> 00:03:39.983\nActually, if you're doing a fresh server\ninstall, so I pop in a RedHat disk or\n\n79\n00:03:39.983 --> 00:03:43.720\nAcentel disk, when I go to install it,\nI can choose the server group.\n\n80\n00:03:43.720 --> 00:03:46.310\nAnd in the server group, you have that\noption to set it up as a DNS server.\n\n81\n00:03:46.310 --> 00:03:47.566\nSo I can do it as a group there.\n\n82\n00:03:47.566 --> 00:03:51.340\nBut if your server's already up,\nit's easier just to install the packages,\n\n83\n00:03:51.340 --> 00:03:52.808\nthere's only two packages for it.\n\n84\n00:03:52.808 --> 00:03:57.420\nSo, I'm gonna elevate my privileges right\nhere at the beginning of the show cuz\n\n85\n00:03:57.420 --> 00:03:59.820\notherwise I'm gonna be typing\npasswords all day long.\n\n86\n00:03:59.820 --> 00:04:02.650\nSo let me just bump that up, so\nI'm switching over to the root account.\n\n87\n00:04:02.650 --> 00:04:08.474\nAnd I'm just gonna do a yum install,\nand the two packages that I want,\n\n88\n00:04:08.474 --> 00:04:11.952\nthere's bind and there is bind-utils.\n\n89\n00:04:11.952 --> 00:04:15.538\nAll right, now bind utils,\nalmost always installed.\n\n90\n00:04:15.538 --> 00:04:16.960\nBecause that's got ns look up and\n\n91\n00:04:16.960 --> 00:04:19.890\na couple of the other utilities\nthat we use in any given day.\n\n92\n00:04:19.890 --> 00:04:21.920\nBind itself, though, that may not be, and\n\n93\n00:04:21.920 --> 00:04:24.300\nI'm pretty sure that's the case\nthat I'm gonna run into here.\n\n94\n00:04:24.300 --> 00:04:26.690\nSo, it's fine if\nsomething's already in use.\n\n95\n00:04:26.690 --> 00:04:29.350\nMy graphical package manager\nis locking that up, so\n\n96\n00:04:29.350 --> 00:04:31.170\nlet me just kill that real quick.\n\n97\n00:04:31.170 --> 00:04:34.500\n&gt;&gt; So Don, if I was using this server\npreviously as a DNS server, and\n\n98\n00:04:34.500 --> 00:04:36.200\nI wanted to go ahead and\ninstall that package,\n\n99\n00:04:36.200 --> 00:04:39.610\nwould it overwrite any previous\nconfigurations that I may have had?\n\n100\n00:04:39.610 --> 00:04:41.300\n&gt;&gt; No,\nit actually does pretty well with that.\n\n101\n00:04:41.300 --> 00:04:43.230\nHere, I actually ran it here,\nand it's looking.\n\n102\n00:04:43.230 --> 00:04:45.460\nAnd I don't have bind, so\nit's gonna install that.\n\n103\n00:04:45.460 --> 00:04:46.661\nBut I do have the bind-utils.\n\n104\n00:04:46.661 --> 00:04:48.650\nAnd see how there's an update available?\n\n105\n00:04:48.650 --> 00:04:50.940\nSo if there was an update,\nthen it would try and update it.\n\n106\n00:04:50.940 --> 00:04:52.207\nIf there wasn't an update,\nit would leave it be.\n\n107\n00:04:52.207 --> 00:04:54.785\nAnd if it leaves it be,\nit leaves all the configuration files and\n\n108\n00:04:54.785 --> 00:04:55.960\npermissions alone, too.\n\n109\n00:04:55.960 --> 00:04:57.057\nSo it's really no harm, so\n\n110\n00:04:57.057 --> 00:04:59.747\nI don't even normally check to\nsee if bind's already installed.\n\n111\n00:04:59.747 --> 00:05:03.340\nI just blindly run this command\ncuz I know it won't hurt anything.\n\n112\n00:05:03.340 --> 00:05:05.360\nSo I'll go ahead and say yes to that and\nget it installed, and\n\n113\n00:05:05.360 --> 00:05:06.991\nonce it's in there,\nthen I'll be in business.\n\n114\n00:05:06.991 --> 00:05:10.452\nSo it's gonna install bind and then\nit's just gonna update those utilities,\n\n115\n00:05:10.452 --> 00:05:12.160\nI'll be in good shape.\n\n116\n00:05:12.160 --> 00:05:17.020\nNow, when that's done,\nright there, very exciting.\n\n117\n00:05:17.020 --> 00:05:17.794\nI am now a BIND server.\n\n118\n00:05:17.794 --> 00:05:19.476\nI know, it's somewhat anti-climactic.\n\n119\n00:05:19.476 --> 00:05:22.820\nBut it's not actually working,\nit's not actually doing anything.\n\n120\n00:05:22.820 --> 00:05:25.090\n&gt;&gt; I was gonna say,\nI don't see any kind of notification.\n\n121\n00:05:25.090 --> 00:05:28.140\nSo how would I know if the installation\nwas successful or not?\n\n122\n00:05:28.140 --> 00:05:31.670\n&gt;&gt; So it tells us, I can tell\nbecause it says, installed, bind,\n\n123\n00:05:31.670 --> 00:05:32.600\nit doesn't show an error.\n\n124\n00:05:32.600 --> 00:05:34.320\nSo it did finish, so I know it's there.\n\n125\n00:05:34.320 --> 00:05:37.350\nIt verified all the files,\nso I've got that status.\n\n126\n00:05:37.350 --> 00:05:38.490\nI know what happened.\n\n127\n00:05:38.490 --> 00:05:41.500\nIt just doesn't turn it on, right, because\nwe need to go in and configure things and\n\n128\n00:05:41.500 --> 00:05:42.350\nactually get it going.\n\n129\n00:05:42.350 --> 00:05:46.535\nSo what it really did is just copy the\nexecutables to where they needed to be.\n\n130\n00:05:46.535 --> 00:05:49.000\nCopy the config files to where\nthey needed to be, and that's it.\n\n131\n00:05:49.000 --> 00:05:51.310\nWhich we can spot a lot of that.\n\n132\n00:05:51.310 --> 00:05:54.220\nThe service itself for\nbind gets a little confusing.\n\n133\n00:05:54.220 --> 00:05:55.840\nCuz in the Unix world,\n\n134\n00:05:55.840 --> 00:05:58.560\nGod forbid you named a service\nthe same thing as the program.\n\n135\n00:05:58.560 --> 00:06:03.479\nSo instead of being called bind,\nit's called the named or name demon.\n\n136\n00:06:03.479 --> 00:06:07.269\nAnd so that's the service that's\nrunning in the background, and\n\n137\n00:06:07.269 --> 00:06:08.756\nwhen it did that install,\n\n138\n00:06:08.756 --> 00:06:13.310\nit should have created inside of slash\netc a folder called named, right there.\n\n139\n00:06:13.310 --> 00:06:16.070\nAnd that's where our bind\nconfiguration is gonna be.\n\n140\n00:06:16.070 --> 00:06:20.410\nAnd it created a file called named.conf,\nand that's the server configurations.\n\n141\n00:06:20.410 --> 00:06:22.790\nSo I know it did what\nit was supposed to do,\n\n142\n00:06:22.790 --> 00:06:25.400\nI just need to get it configured and\nget it turned on.\n\n143\n00:06:25.400 --> 00:06:27.060\nSo I'll start with that configuration.\n\n144\n00:06:27.060 --> 00:06:30.593\nSo, the first thing that I'm gonna do is\nI'm gonna jump into that named.conf file.\n\n145\n00:06:30.593 --> 00:06:33.600\nSo remember that I've\nelevated my privileges.\n\n146\n00:06:33.600 --> 00:06:34.610\nI'm running as root right now.\n\n147\n00:06:34.610 --> 00:06:35.960\nI used the SU command.\n\n148\n00:06:35.960 --> 00:06:36.960\nIf you're not running as root,\n\n149\n00:06:36.960 --> 00:06:40.110\nyou'll need to make sure you do a sudo\non each of the commands that you run, so\n\n150\n00:06:40.110 --> 00:06:43.000\nthat you run them with elevated\nprivileges, otherwise it's gonna fail.\n\n151\n00:06:43.000 --> 00:06:47.723\nSo I'm gonna edit/etc/named.conf.\n\n152\n00:06:47.723 --> 00:06:51.090\nAnd we're gonna open up that\nconfiguration file for bind.\n\n153\n00:06:51.090 --> 00:06:54.890\nAnd this is where we start to really\ndeviate from the DNS servers that have\n\n154\n00:06:54.890 --> 00:06:56.110\ngraphical interfaces.\n\n155\n00:06:56.110 --> 00:07:00.120\nHere, it's all defined in an option file,\nand I've got to go through and\n\n156\n00:07:00.120 --> 00:07:03.760\nspecify my settings and\nget things configured the way that I want.\n\n157\n00:07:03.760 --> 00:07:05.720\nSome of the defaults here might\nbe perfectly fine for me,\n\n158\n00:07:05.720 --> 00:07:07.370\nsome of the defaults might not be.\n\n159\n00:07:07.370 --> 00:07:09.590\nI might need to tweak and\nchange these to meet my needs.\n\n160\n00:07:10.710 --> 00:07:11.614\nSo I'll start right here,\n\n161\n00:07:11.614 --> 00:07:14.022\nthe very first option is usually\nthe first one that I've got to address.\n\n162\n00:07:14.022 --> 00:07:18.090\nIt's got listen-on port 53, and\nthen it's got an IP address.\n\n163\n00:07:18.090 --> 00:07:23.570\nAnd the IP address is 127.000.1, so it\nwill run and listen for DNS queries that\n\n164\n00:07:23.570 --> 00:07:28.530\nare coming to the loopback address cuz\nthat's the only address it knows about.\n\n165\n00:07:28.530 --> 00:07:32.058\nWell, my clients are gonna use that\naddress, so it's not terribly helpful.\n\n166\n00:07:32.058 --> 00:07:36.100\n&gt;&gt; So Don, when we see that that port is\nbeing utilized, but are we talking UDP,\n\n167\n00:07:36.100 --> 00:07:37.310\nTCP, how would we know?\n\n168\n00:07:37.310 --> 00:07:41.740\n&gt;&gt; Good question, right,\nbecause DNS can use both UDP and TCP.\n\n169\n00:07:41.740 --> 00:07:45.232\nIf a DNS query fits\nentirely in one packet,\n\n170\n00:07:45.232 --> 00:07:48.535\nreally one frame, then it'll use UDP.\n\n171\n00:07:48.535 --> 00:07:51.710\nBut if it's a big query,\nif I'm doing a zone transfer or\n\n172\n00:07:51.710 --> 00:07:56.185\nthere's just a ton of hosts mapped to\none name, then I'll have to segment it.\n\n173\n00:07:56.185 --> 00:08:00.005\nI'll have to break it up, and it's gonna\nswitch to TCP, so it could use both, this\n\n174\n00:08:00.005 --> 00:08:03.714\nwill be both Now I need remember that, put\nit in the back of your mind, cuz later on\n\n175\n00:08:03.714 --> 00:08:07.283\nI've gotta open up some holes in the\nfirewall to allow this traffic through.\n\n176\n00:08:07.283 --> 00:08:09.582\nAnd I gotta make sure I do UDP and TCP.\n\n177\n00:08:09.582 --> 00:08:12.787\nBecause otherwise what's gonna happen is,\nif I just do UDP,\n\n178\n00:08:12.787 --> 00:08:15.510\nlittle queries will work,\nbut big queries won't.\n\n179\n00:08:15.510 --> 00:08:18.850\n&gt;&gt; It might seem like it's working-\n[LAUGH] Until other functions are called.\n\n180\n00:08:18.850 --> 00:08:21.450\n&gt;&gt; And it's super frustrating,\ncuz it's an intermittent failure.\n\n181\n00:08:21.450 --> 00:08:22.430\nYou gotta figure out that pattern.\n\n182\n00:08:22.430 --> 00:08:24.220\n&gt;&gt; They're the worst.\n&gt;&gt; Yeah, you gotta remember.\n\n183\n00:08:24.220 --> 00:08:25.250\nSo this is both.\n\n184\n00:08:25.250 --> 00:08:26.460\nPort 53 is what I'm opening.\n\n185\n00:08:26.460 --> 00:08:30.690\nI could change the port, not usually\na lot of reason to do that but I could.\n\n186\n00:08:30.690 --> 00:08:33.170\nI am gonna add my own IP address in here,\nthough.\n\n187\n00:08:33.170 --> 00:08:37.267\nSo this machine is 10.0.222.101.\n\n188\n00:08:37.267 --> 00:08:42.870\nSo I'm just gonna add that IP so that I'm\nlistening on it as well as the loopback.\n\n189\n00:08:42.870 --> 00:08:46.770\nAnd if I had five network adapters here,\nI'd wanna add all five addresses\n\n190\n00:08:46.770 --> 00:08:49.650\nif I was going to be answering\nDNS on all five, right?\n\n191\n00:08:49.650 --> 00:08:53.150\nMaybe this server has a wide\narea network connection and\n\n192\n00:08:53.150 --> 00:08:54.280\na local area network connection.\n\n193\n00:08:54.280 --> 00:08:56.480\nAnd I only wanna answer on my LAN,\nnot on my WAN.\n\n194\n00:08:56.480 --> 00:08:59.280\nAnd so I would just put the IP address for\nthe LAN, and that's it.\n\n195\n00:09:00.450 --> 00:09:01.900\n&gt;&gt; So Don,\nIf this were a virtual environment,\n\n196\n00:09:01.900 --> 00:09:05.530\nwould you need to do any additional\nconfiguration here with IP addresses?\n\n197\n00:09:05.530 --> 00:09:07.160\nOr how would that work?\n\n198\n00:09:07.160 --> 00:09:12.041\n&gt;&gt; The only spot where you really get into\n[LAUGH] a bind, see what I did there?\n\n199\n00:09:12.041 --> 00:09:12.679\n&gt;&gt; [LAUGH].\n\n200\n00:09:12.679 --> 00:09:14.640\n&gt;&gt; [LAUGH] Is as if you're using DHCP.\n\n201\n00:09:14.640 --> 00:09:16.725\nIf I'm using DHCP what could happen?\n\n202\n00:09:16.725 --> 00:09:18.579\nMy address could change, right.\n\n203\n00:09:18.579 --> 00:09:21.011\nAnd if my address changes that's bad.\n\n204\n00:09:21.011 --> 00:09:24.333\nWell, you don't want your DNS\nserver's IP address changing anyways,\n\n205\n00:09:24.333 --> 00:09:26.953\nso you should be using a static\nIP address on your server.\n\n206\n00:09:26.953 --> 00:09:29.793\nAnd if you're doing that,\ndoesnt matter if you're physical or\n\n207\n00:09:29.793 --> 00:09:33.263\nvirtual the IP will always be the same as\nlong as the IP is assigned to at least one\n\n208\n00:09:33.263 --> 00:09:34.697\nnetwork adapter on the system.\n\n209\n00:09:34.697 --> 00:09:37.485\nIt's not actually calling out what\nmy physical network after is,\n\n210\n00:09:37.485 --> 00:09:40.038\njust wants to know the IP,\ndoesn't care about the adapter.\n\n211\n00:09:40.038 --> 00:09:45.169\nSame thing goes for IPv6 on the very next\nline, it's doing the loop-back for IPv6.\n\n212\n00:09:45.169 --> 00:09:49.857\nIf I have an IPv6 address, which I don't\nbut if I did, I can add that in here and\n\n213\n00:09:49.857 --> 00:09:54.759\nI'm terrible at making up IPv6 addresses,\nbut I'll just punch that one in, and\n\n214\n00:09:54.759 --> 00:09:55.670\nthere we go.\n\n215\n00:09:55.670 --> 00:09:57.090\nSo I've got that one in, and\n\n216\n00:09:57.090 --> 00:10:01.950\nif I have a network adapter that has that\naddress, then I'll answer queries on it.\n\n217\n00:10:01.950 --> 00:10:03.500\nIf I don't have an adapter\nwith that address,\n\n218\n00:10:03.500 --> 00:10:05.610\nthen I'm only gonna answer\non the loopback and\n\n219\n00:10:05.610 --> 00:10:07.290\nit's gonna be a pretty quiet DNS server.\n\n220\n00:10:08.750 --> 00:10:11.565\nAll right, that's the main thing,\nI could probably stop right there.\n\n221\n00:10:11.565 --> 00:10:12.560\nAnd just you know what?\n\n222\n00:10:12.560 --> 00:10:13.520\nThat's good enough,\n\n223\n00:10:13.520 --> 00:10:16.850\nthe server's now listening and\nI just need to go on and create zones.\n\n224\n00:10:16.850 --> 00:10:18.650\nWhich we're gonna do in the next episode.\n\n225\n00:10:18.650 --> 00:10:21.270\nBut there is one other\nthing I recommend you do.\n\n226\n00:10:22.360 --> 00:10:26.560\nBy default, these servers support\nwhat are called recursive queries.\n\n227\n00:10:26.560 --> 00:10:30.910\nIf I ask it a question and\nit knows the answer, it's gonna tell me.\n\n228\n00:10:30.910 --> 00:10:33.970\nIf I ask it a question, and\nit doesn't know the answer,\n\n229\n00:10:33.970 --> 00:10:36.900\nit's gonna turn around and\nask other DNS servers, right?\n\n230\n00:10:36.900 --> 00:10:41.200\nSo, if I ask it for www.google.com,\nI don't have Google zone here,\n\n231\n00:10:41.200 --> 00:10:42.500\nI don't know it, right?\n\n232\n00:10:42.500 --> 00:10:46.540\nSo, I'll act as a non-authoritative\nserver and I'll do a recursive look up,\n\n233\n00:10:46.540 --> 00:10:48.910\nI'll jump over to another server\nsomewhere else, and I'll ask them.\n\n234\n00:10:48.910 --> 00:10:53.200\nWell that means that this server would be\nsusceptible to DNS reflection attacks.\n\n235\n00:10:53.200 --> 00:10:56.470\nSomebody could start to\nflood me with queries that\n\n236\n00:10:56.470 --> 00:10:57.880\nthey know I don't have the answer to.\n\n237\n00:10:57.880 --> 00:11:00.740\nSo I'll turn around and\nstart hitting other systems,\n\n238\n00:11:00.740 --> 00:11:04.200\neffectively pulling off a portion\nof a Denial of Service attack.\n\n239\n00:11:04.200 --> 00:11:08.570\nSo if this is exposed to the internet,\nand I'm trying to answer DNS queries for\n\n240\n00:11:08.570 --> 00:11:12.940\npeople out there from my own domain,\nI need to turn off recursion so\n\n241\n00:11:12.940 --> 00:11:16.130\nthat I don't allow those people\nto recurs through my server.\n\n242\n00:11:16.130 --> 00:11:18.140\nThey can come to me from my domain, but\n\n243\n00:11:18.140 --> 00:11:20.096\nthey can't come to me\nfrom any other domain.\n\n244\n00:11:20.096 --> 00:11:21.730\nBut if it's for a local DNS, or\n\n245\n00:11:21.730 --> 00:11:24.610\nlike a caching server,\nthen I want that recursion on.\n\n246\n00:11:24.610 --> 00:11:27.410\nSo I gotta figure out which one that\nI want, and I've gotta configure it.\n\n247\n00:11:27.410 --> 00:11:29.656\nWell by default, the recursion is on.\n\n248\n00:11:29.656 --> 00:11:33.288\nSo if this is the LAN server, I can just\nuse the firewall to control who can get to\n\n249\n00:11:33.288 --> 00:11:36.340\nit and then I can allow the recursion\nto go, that's the default.\n\n250\n00:11:36.340 --> 00:11:40.580\nBut if I am exposing it to the internet, I\nneed to turn that off, I need to stop it.\n\n251\n00:11:40.580 --> 00:11:43.300\nAnd the easiest way to do that, because\nthere is five different ways to do it,\n\n252\n00:11:43.300 --> 00:11:47.510\nthe easiest way is this guy\nright here you got allow query.\n\n253\n00:11:47.510 --> 00:11:50.052\nAnd by default it just says local host.\n\n254\n00:11:50.052 --> 00:11:55.140\nThe localHost setting, if you have\nanything in here under allow query,\n\n255\n00:11:55.140 --> 00:11:57.800\nthen it turns off people's\nability to query you.\n\n256\n00:11:57.800 --> 00:12:01.440\nSo right now only the local\nhost can query the system.\n\n257\n00:12:01.440 --> 00:12:06.610\nSo what I can do is, I can change this and\nI can set it to be my local networks.\n\n258\n00:12:06.610 --> 00:12:09.930\nI only want my local network to be\nable to query against it or whatever.\n\n259\n00:12:09.930 --> 00:12:14.080\nAnd there's actually a couple of alias you\ncan do here, localHost is the default.\n\n260\n00:12:14.080 --> 00:12:18.270\nBut I can change that to localNets,\nI'm sorry, localNet, just singular.\n\n261\n00:12:18.270 --> 00:12:22.906\nAnd that'll say whatever my local\nnetwork is, in this case 10.0 and\n\n262\n00:12:22.906 --> 00:12:27.625\nthat's actually a, A /16, so\nit would be 10.0/16, I guess.\n\n263\n00:12:27.625 --> 00:12:31.340\nAnyhow, so [LAUGH] it will allow that\nnetwork to be able to run queries.\n\n264\n00:12:31.340 --> 00:12:32.900\nIt's similar to a firewall.\n\n265\n00:12:32.900 --> 00:12:37.390\nIf I'm getting queries from people that\naren't in that network, then I'm not gonna\n\n266\n00:12:37.390 --> 00:12:41.370\nallow that to recurse and go and\nfind other DNS servers and help them out.\n\n267\n00:12:41.370 --> 00:12:44.030\nI'll answer for the zones that I'm\nauthoritative for, but that's about it.\n\n268\n00:12:45.100 --> 00:12:48.460\n&gt;&gt; So Don, if you had a specific\nrange that you wanted to utilize,\n\n269\n00:12:48.460 --> 00:12:49.390\nwould I be able to go ahead and\n\n270\n00:12:49.390 --> 00:12:53.610\nset any kind of exclusions here to prevent\ncertain users from utilizing a service?\n\n271\n00:12:53.610 --> 00:12:55.210\n&gt;&gt; Absolutely,\nlet me show you how I do this.\n\n272\n00:12:55.210 --> 00:12:59.025\nSo I have a problem, which is,\nI have a terrible memory sometimes.\n\n273\n00:12:59.025 --> 00:13:00.995\nI can never remember aliases.\n\n274\n00:13:00.995 --> 00:13:03.055\nSo I always forget this localNet alias.\n\n275\n00:13:03.055 --> 00:13:04.854\nI remember it now, because it's\nwritten on a piece of paper over here.\n\n276\n00:13:04.854 --> 00:13:07.548\n&gt;&gt; [LAUGH]\n&gt;&gt; But I don't normally remember that one.\n\n277\n00:13:07.548 --> 00:13:08.880\nSo I almost always put in the networks.\n\n278\n00:13:08.880 --> 00:13:12.400\nAnd when you put in the networks,\nthere's, you could list them all here,\n\n279\n00:13:12.400 --> 00:13:13.890\nif you really wanna do a crazy.\n\n280\n00:13:13.890 --> 00:13:18.060\nBut you can actually do an access control\nlist that makes life a little bit easy.\n\n281\n00:13:18.060 --> 00:13:22.960\nYou can create your own alias right\nhere inside of the configuration file.\n\n282\n00:13:22.960 --> 00:13:27.359\nNow the section that I'm\nin right now is Options.\n\n283\n00:13:27.359 --> 00:13:30.178\nSo it says options, it's got that\nsquiggly bracket and opens up.\n\n284\n00:13:30.178 --> 00:13:34.184\nI'm going to scroll down and find with\na squiggly bracket closes off right there,\n\n285\n00:13:34.184 --> 00:13:35.762\nso there's the end of options.\n\n286\n00:13:35.762 --> 00:13:39.129\nAnd I'm going to add a new\nentry right after that.\n\n287\n00:13:39.129 --> 00:13:42.787\nAnd I'm gonna create an access\ncontrol list, I'm going to say ACL and\n\n288\n00:13:42.787 --> 00:13:44.841\nthen I'm gonna give it a name, right.\n\n289\n00:13:44.841 --> 00:13:51.099\nAnd I'll call it, I don't know,\nlocal clients, something like that, right.\n\n290\n00:13:51.099 --> 00:13:53.575\nOr allowed to recurs or\nwhatever you wanna put on there,\n\n291\n00:13:53.575 --> 00:13:55.990\nthat's the name that I'm gonna give it.\n\n292\n00:13:55.990 --> 00:14:00.440\nAnd then I'll open my little squiggly\nbrackets, and now I can come through and\n\n293\n00:14:00.440 --> 00:14:03.800\nI can start to list anybody\nthat I want to be able\n\n294\n00:14:03.800 --> 00:14:05.880\nto do recursive queries on this system.\n\n295\n00:14:05.880 --> 00:14:10.771\nAnd so at a minimum,\nwe'd probably wanna do like this server,\n\n296\n00:14:10.771 --> 00:14:13.554\nright which I could say localHost.\n\n297\n00:14:13.554 --> 00:14:16.300\nAnd I could do localNet right?\n\n298\n00:14:16.300 --> 00:14:18.820\nBut what if my company has\nmore than one network?\n\n299\n00:14:18.820 --> 00:14:22.680\nThis server might not have an interface\non every single network that I've got, so\n\n300\n00:14:22.680 --> 00:14:23.870\nI may need to list other networks.\n\n301\n00:14:23.870 --> 00:14:25.300\nI can do it by individual IP.\n\n302\n00:14:25.300 --> 00:14:28.353\nMaybe there's a host, 192.168.0.100.\n\n303\n00:14:28.353 --> 00:14:31.666\nI can add them in or\nI can do ranges like here\n\n304\n00:14:31.666 --> 00:14:36.328\nat the office where we've got 10.0.0.0/16.\n\n305\n00:14:36.328 --> 00:14:38.308\nI can punch each one of those in there and\n\n306\n00:14:38.308 --> 00:14:42.800\nthese are the people that I'm gonna allow\nto do recursive queries off my server.\n\n307\n00:14:42.800 --> 00:14:45.390\nOther people can still do\nauthoritative lookups.\n\n308\n00:14:45.390 --> 00:14:47.340\nThey ask me a question,\nI give them an answer.\n\n309\n00:14:47.340 --> 00:14:49.810\nBut I'm not gonna go and\ntalk to other servers on their behalf, and\n\n310\n00:14:49.810 --> 00:14:52.010\nthat helps to protect our system.\n\n311\n00:14:52.010 --> 00:14:54.070\nI do need to make sure I close this out or\nI'm gonna screw it up.\n\n312\n00:14:54.070 --> 00:14:57.455\nAnd that's gonna be a recurring theme\nthroughout the whole bind series.\n\n313\n00:14:57.455 --> 00:15:00.400\n&gt;&gt; [LAUGH]\n&gt;&gt; Since it's me editing text files.\n\n314\n00:15:00.400 --> 00:15:01.350\nI can make mistakes.\n\n315\n00:15:01.350 --> 00:15:02.840\nYou can too.\n\n316\n00:15:02.840 --> 00:15:04.630\nProbably not as much as me though.\n\n317\n00:15:04.630 --> 00:15:08.371\nSo I'll show you guys a neat little\nutility we'll use later to spot mistakes\n\n318\n00:15:08.371 --> 00:15:10.597\nin this file and\nsave us some troubles there.\n\n319\n00:15:10.597 --> 00:15:13.590\nAll right, looking at it,\nI think my ACL is good.\n\n320\n00:15:13.590 --> 00:15:16.960\nSo I am gonna close out with\nmy little squiggly bracket and\n\n321\n00:15:16.960 --> 00:15:19.110\nI named it local-clients.\n\n322\n00:15:19.110 --> 00:15:24.160\nSo I'm gonna go back up here,\nto where I had that allow-query,\n\n323\n00:15:24.160 --> 00:15:30.580\nand I'm gonna change that to see,\nlocal-clients, the ASL name.\n\n324\n00:15:30.580 --> 00:15:32.130\nYou can put an ASL name in there and\n\n325\n00:15:32.130 --> 00:15:35.520\nit will find the ASL right here in\nthe config and so now I restrict you,\n\n326\n00:15:35.520 --> 00:15:39.010\nwhose gonna be able to get to this server,\nand I'm able to protect it.\n\n327\n00:15:39.010 --> 00:15:41.550\nProbably could have achieve something\nsimilar using the firewall but\n\n328\n00:15:41.550 --> 00:15:44.760\nthe firewall doesn't let me differentiate\nbetween whether if it's a recursive\n\n329\n00:15:44.760 --> 00:15:47.310\nquery or an authoritative query,\nit doesn't know that, right.\n\n330\n00:15:47.310 --> 00:15:47.870\nThis does.\n\n331\n00:15:48.910 --> 00:15:50.682\nOkay, so, we're pretty good there.\n\n332\n00:15:50.682 --> 00:15:53.219\nI think it's about all I really\nwant to take with this file.\n\n333\n00:15:53.219 --> 00:15:55.191\nThere's other things you can do.\n\n334\n00:15:55.191 --> 00:15:57.480\nYou can change your director,\nuse to move those around.\n\n335\n00:15:57.480 --> 00:16:01.313\nI'm on CentOS, which is Red Hat based and\nthat means I'm running SC Linux.\n\n336\n00:16:01.313 --> 00:16:04.173\nAnd SC Linux hates it when you\nmove default folders around.\n\n337\n00:16:04.173 --> 00:16:05.732\nYou get permissions problems like crazy.\n\n338\n00:16:05.732 --> 00:16:07.388\nI'm gonna leave it where it is.\n\n339\n00:16:07.388 --> 00:16:08.481\nI'll show you how to fix that too.\n\n340\n00:16:08.481 --> 00:16:12.501\nBut some of the other options that\nyou have in here, you can do dnssec,\n\n341\n00:16:12.501 --> 00:16:13.946\nwhich I haven't set up.\n\n342\n00:16:13.946 --> 00:16:17.433\nYou've got that recursion, remember how\nI said recursion was on by default?\n\n343\n00:16:17.433 --> 00:16:18.432\nHere's recursion yes.\n\n344\n00:16:18.432 --> 00:16:20.145\nI can turn it off by default.\n\n345\n00:16:20.145 --> 00:16:22.415\nHey, I'm just not going to recurs and\nthen that's it.\n\n346\n00:16:22.415 --> 00:16:24.188\nWhen you do that, it turns it off for\neverybody though.\n\n347\n00:16:24.188 --> 00:16:27.066\nEven people that you've allowed to query,\nit turns it off for them.\n\n348\n00:16:27.066 --> 00:16:30.296\nSo you can kind of tinker\nwith that if you want.\n\n349\n00:16:30.296 --> 00:16:32.930\nAnd then after that are my\nlogging settings and the zones,\n\n350\n00:16:32.930 --> 00:16:34.394\nwhich we'll address later on.\n\n351\n00:16:34.394 --> 00:16:35.981\nSo that's basically that\nfile in a nutshell.\n\n352\n00:16:35.981 --> 00:16:39.424\nAll right, I'm gonna save that and\nnow that it is done,\n\n353\n00:16:39.424 --> 00:16:43.860\nI need to check it to make sure\nthat I didn't make any mistakes.\n\n354\n00:16:43.860 --> 00:16:48.349\nWhen we installed the bind utilities,\nthere's a neat\n\n355\n00:16:48.349 --> 00:16:53.337\nlittle utility in there called\nnamed-check conf, right?\n\n356\n00:16:53.337 --> 00:16:56.250\nIt's gonna check my config file and\nit's gonna look for a mistake.\n\n357\n00:16:56.250 --> 00:17:00.132\nNow you need to be root to run it,\nI elevated my privileges so I got it.\n\n358\n00:17:00.132 --> 00:17:05.928\nSo you can sudo name-check config,\nand it's gonna look and sure enough,\n\n359\n00:17:05.928 --> 00:17:11.641\nI'm missing a semicolon before a closed\nbracket on line 12 of the file.\n\n360\n00:17:11.641 --> 00:17:13.058\nThat's super handy otherwise.\n\n361\n00:17:13.058 --> 00:17:13.917\n&gt;&gt; How specific, yeah.\n\n362\n00:17:13.917 --> 00:17:15.593\n&gt;&gt; Yeah.\n&gt;&gt; [LAUGH]\n\n363\n00:17:15.593 --> 00:17:16.662\n&gt;&gt; Speaking from experience,\n\n364\n00:17:16.662 --> 00:17:19.734\nyou'll spend a lot of time going through\nand try to find these individual things,\n\n365\n00:17:19.734 --> 00:17:21.125\nthis is gonna make life a lot easier.\n\n366\n00:17:21.125 --> 00:17:24.980\nSo if I go to line 12, and\nI can find that semicolon that's missing.\n\n367\n00:17:24.980 --> 00:17:28.670\nAnd basically,\nI screwed it up right here in our IPv6.\n\n368\n00:17:28.670 --> 00:17:33.250\nSee, how we've got the loopback and\nthe semicolon?\n\n369\n00:17:33.250 --> 00:17:37.072\nAnd then I typed in an address and\nI didn't stick a semicolon after it.\n\n370\n00:17:37.072 --> 00:17:40.247\nNow you might ask yourself,\nwell Don, that's the last IP,\n\n371\n00:17:40.247 --> 00:17:42.000\nwhy do we need a semicolon there?\n\n372\n00:17:42.000 --> 00:17:44.288\nIt's not like that one that follows it,\ndoesn't matter, it's the standards,\n\n373\n00:17:44.288 --> 00:17:45.192\nthat's what they want to have.\n\n374\n00:17:45.192 --> 00:17:47.835\nAnd so you don't forget to have\nit when you add the next IP.\n\n375\n00:17:47.835 --> 00:17:48.774\nSo you just-\n&gt;&gt; Okay.\n\n376\n00:17:48.774 --> 00:17:49.302\n&gt;&gt; Have to have it.\n\n377\n00:17:49.302 --> 00:17:54.721\nNow I might have other mistakes, so I need\nto run it again just to double check.\n\n378\n00:17:54.721 --> 00:17:58.650\nAnd I got undefined ACL localnet,\nall right.\n\n379\n00:17:58.650 --> 00:17:59.654\nWhat's that about?\n\n380\n00:17:59.654 --> 00:18:04.933\nWell, if I go back in here and look into\nmy ACL, when I typed in localnet and\n\n381\n00:18:04.933 --> 00:18:09.210\nmaybe it does have an s on it and\nI screwed it up, localnets.\n\n382\n00:18:09.210 --> 00:18:11.802\nSo it looked at a name here,\nit was happy with localhost,\n\n383\n00:18:11.802 --> 00:18:13.317\nit wasn't happy with localnet.\n\n384\n00:18:13.317 --> 00:18:16.053\nAnd let me just look at my notes,\nit does have an s, darn it.\n\n385\n00:18:16.053 --> 00:18:19.289\nSo the alias that's built in\nhas localnets, it has an s,\n\n386\n00:18:19.289 --> 00:18:23.345\nsince I didn't have the s, it assumed\nI was talking about another ACL.\n\n387\n00:18:23.345 --> 00:18:27.670\nYou can actually nest ACLs, I might\nhave an ACL for research computers and\n\n388\n00:18:27.670 --> 00:18:29.440\ndev computers and so on.\n\n389\n00:18:29.440 --> 00:18:31.510\nAnd I could nest them all\ntogether into one big ACL,\n\n390\n00:18:31.510 --> 00:18:32.950\nif I really wanted to go crazy.\n\n391\n00:18:32.950 --> 00:18:34.746\nSo in my case, I just left the s off.\n\n392\n00:18:34.746 --> 00:18:36.794\nSo now it should identify\nthat as real alias.\n\n393\n00:18:36.794 --> 00:18:40.026\nBut notice how it didn't complain\nabout that the first time.\n\n394\n00:18:40.026 --> 00:18:41.005\nIt stops at the first error.\n\n395\n00:18:41.005 --> 00:18:43.727\nSo you do need to run it-\n&gt;&gt; Multiple times.\n\n396\n00:18:43.727 --> 00:18:44.701\n&gt;&gt; Over and over.\n&gt;&gt; Yeah.\n\n397\n00:18:44.701 --> 00:18:46.821\n&gt;&gt; Until you get what I\njust got right there.\n\n398\n00:18:46.821 --> 00:18:48.186\nWhen you get nothing back-\n&gt;&gt; Okay.\n\n399\n00:18:48.186 --> 00:18:48.854\n&gt;&gt; Your config file is good.\n\n400\n00:18:48.854 --> 00:18:49.618\n&gt;&gt; Yay.\n\n401\n00:18:49.618 --> 00:18:51.864\n[LAUGH]\n&gt;&gt; [LAUGH] It's an achievement.\n\n402\n00:18:51.864 --> 00:18:53.030\nIt'll get worse, believe me.\n\n403\n00:18:53.030 --> 00:18:54.405\n&gt;&gt; [LAUGH]\n&gt;&gt; The zone files are harder.\n\n404\n00:18:54.405 --> 00:18:55.570\nAll right, we're almost done.\n\n405\n00:18:55.570 --> 00:18:57.431\nSo couple of things that we need\nto do now, just tidy stuff.\n\n406\n00:18:57.431 --> 00:19:00.116\nI know I've only got so much time here.\n\n407\n00:19:00.116 --> 00:19:03.850\nSo a couple of things to tidy\nthis one up and get it ready.\n\n408\n00:19:03.850 --> 00:19:06.500\nFirst off, I know my config file is good.\n\n409\n00:19:06.500 --> 00:19:10.120\nSo I should be okay to go ahead and\nstart up name d.\n\n410\n00:19:10.120 --> 00:19:13.990\nNow if you've been running it before you\nknow you can start it, it's no big deal.\n\n411\n00:19:13.990 --> 00:19:17.069\nBut if this is your first install and\nyou been dinking around with the files.\n\n412\n00:19:17.069 --> 00:19:18.366\nI know I'm guilty of this, every now and\n\n413\n00:19:18.366 --> 00:19:19.977\nthen you can mess up\nthe permissions on the files.\n\n414\n00:19:19.977 --> 00:19:21.034\nAnd I mentioned SC Linux, so\n\n415\n00:19:21.034 --> 00:19:23.465\nif I start changing directories\naround that can cause a problem.\n\n416\n00:19:23.465 --> 00:19:27.439\nSo I like to just do a quick check to\nreset file permissions to get those\n\n417\n00:19:27.439 --> 00:19:28.199\ncleaned up.\n\n418\n00:19:28.199 --> 00:19:32.029\nAnd then we need to setup name d\nstart when our system starts and\n\n419\n00:19:32.029 --> 00:19:34.560\nto start it now so it's working.\n\n420\n00:19:34.560 --> 00:19:37.495\nAnd then lastly, we need to open it up in\nthe firewall because we have the firewall\n\n421\n00:19:37.495 --> 00:19:38.416\nd that's running here.\n\n422\n00:19:38.416 --> 00:19:40.189\nYou might have iptables or\nsome other firewall.\n\n423\n00:19:40.189 --> 00:19:41.703\nYou need to open it up\nto allow that through.\n\n424\n00:19:41.703 --> 00:19:44.057\nSo let's hit those three things and\nthen this'll be done.\n\n425\n00:19:44.057 --> 00:19:44.577\n&gt;&gt; All right.\n\n426\n00:19:44.577 --> 00:19:47.301\n&gt;&gt; Okay, so\nlet's start with the permissions.\n\n427\n00:19:47.301 --> 00:19:49.817\nI'm gonna do a chgrp, change group.\n\n428\n00:19:49.817 --> 00:19:53.077\nThe name d files, the bind files,\n\n429\n00:19:53.077 --> 00:19:58.032\nthey need to be owned by\na group that's called bind.\n\n430\n00:19:58.032 --> 00:20:01.320\nAnd so I need to set that,\nI'm sorry it's called name d.\n\n431\n00:20:01.320 --> 00:20:04.539\nAgain the service has a different name\nthan the actual software, so it's name d.\n\n432\n00:20:04.539 --> 00:20:07.889\nSo I need to change group, name d.\n\n433\n00:20:07.889 --> 00:20:13.264\nAnd I'm gonna do a recursive\nreset of the /var/named default.\n\n434\n00:20:13.264 --> 00:20:19.348\nNow I've been working in /etc /named.conf\nall this time, so why am I doing /var?\n\n435\n00:20:19.348 --> 00:20:22.956\nWell my zone files when I create them,\nI haven't created them yet.\n\n436\n00:20:22.956 --> 00:20:26.340\nBut when I do there\ngonna be in /var /named.\n\n437\n00:20:26.340 --> 00:20:28.198\nMy cache /var /named.\n\n438\n00:20:28.198 --> 00:20:29.966\nMy log files, /var /named.\n\n439\n00:20:29.966 --> 00:20:33.190\nSo that's where it stores all\nthe really important stuff.\n\n440\n00:20:33.190 --> 00:20:35.712\nSo I need to make sure that\nit has access to that, and\n\n441\n00:20:35.712 --> 00:20:38.247\nhaving that group set is\nhow I'm gonna achieve it.\n\n442\n00:20:38.247 --> 00:20:41.584\nIt should be that way by default, but\nif it isn't, here I'm resetting it so\n\n443\n00:20:41.584 --> 00:20:42.327\nthat it will be.\n\n444\n00:20:42.327 --> 00:20:49.430\nI also need to do a change\nownership of the config file.\n\n445\n00:20:49.430 --> 00:20:51.640\nWhen I messed with that\nconfig file I was root.\n\n446\n00:20:51.640 --> 00:20:55.422\nIf it didn't exist and I created it\nmyself the user's gonna be root and\n\n447\n00:20:55.422 --> 00:20:58.575\nthe group is going to be root,\nand so I need to change that.\n\n448\n00:20:58.575 --> 00:21:03.273\nNow I'm in this folder right now,\nso I could just pull it up and see.\n\n449\n00:21:03.273 --> 00:21:05.366\nSee, how it's owned by root?\n\n450\n00:21:05.366 --> 00:21:07.758\nAnd then the group si named.\n\n451\n00:21:07.758 --> 00:21:13.976\nThat's actually what I want, if it isn't\nfor any reason, you can come in and\n\n452\n00:21:13.976 --> 00:21:18.872\ndo a chown root:named, and\npoint to that file, all right?\n\n453\n00:21:18.872 --> 00:21:21.784\nAnd that resets it and\nmakes sure that it's owned by root, and\n\n454\n00:21:21.784 --> 00:21:23.040\nthen the group is named.\n\n455\n00:21:23.040 --> 00:21:24.500\nNow the named service will\nbe able to access that file,\n\n456\n00:21:24.500 --> 00:21:25.528\nit's really important, all right.\n\n457\n00:21:25.528 --> 00:21:26.943\nSo that takes care of file permissions.\n\n458\n00:21:26.943 --> 00:21:30.505\nThe next part is SC Linux.\n\n459\n00:21:30.505 --> 00:21:36.140\nSC Linux only let's the bind service\naccess folders that are approved.\n\n460\n00:21:36.140 --> 00:21:38.336\nThat's why I want to change\nmy default folders earlier.\n\n461\n00:21:38.336 --> 00:21:39.989\nSo I'm just gonna make sure\npermissions are done right.\n\n462\n00:21:39.989 --> 00:21:44.300\nI'll do a restore con which will reset\nthe security context known as folders.\n\n463\n00:21:44.300 --> 00:21:47.620\nAnd I'm gonna do -r to make ti recursive,\n\n464\n00:21:47.620 --> 00:21:54.120\nI need to do this on folders two and I'm\ngonna do /val /named and get that one set.\n\n465\n00:21:54.120 --> 00:22:00.570\nAnd then I'll do the same\nthing /ect/named.conf, right?\n\n466\n00:22:00.570 --> 00:22:04.670\nSo just making sure that those are all set\nproperly, that they should be by default,\n\n467\n00:22:04.670 --> 00:22:06.194\nbut now I know they are, okay?\n\n468\n00:22:06.194 --> 00:22:07.455\nNow I'm go ahead and start up named.\n\n469\n00:22:07.455 --> 00:22:12.959\nI'm going to do a systemCTL and\nif you're running CentOS or\n\n470\n00:22:12.959 --> 00:22:16.151\nRed Hat Enterprise Linux 7.2 or\n\n471\n00:22:16.151 --> 00:22:22.010\nhigher all you need to do is\nsystemctl enable named.service.\n\n472\n00:22:22.010 --> 00:22:25.460\nAnd what that's gonna do is going\nto tell it to start named when\n\n473\n00:22:25.460 --> 00:22:27.280\nthe system boots up.\n\n474\n00:22:27.280 --> 00:22:29.810\nAnd if it isn't started right now\nit will start it right now too.\n\n475\n00:22:29.810 --> 00:22:33.022\nBut in older versions it\ndidn't actually start it,\n\n476\n00:22:33.022 --> 00:22:35.652\nit would just creat the link and\nsit there.\n\n477\n00:22:35.652 --> 00:22:41.050\nSo you need to follow that\nup with a systemCTL start.\n\n478\n00:22:41.050 --> 00:22:43.810\nRemember that start will\nstart the service right now.\n\n479\n00:22:43.810 --> 00:22:44.909\nBut if you reboot, it wont start it so\n\n480\n00:22:44.909 --> 00:22:46.508\nyou gotta do the enable to\nmake sure it starts at boot.\n\n481\n00:22:46.508 --> 00:22:47.720\nSo I'm just gonna knock\nthose two things out.\n\n482\n00:22:47.720 --> 00:22:52.704\nIf you're on an older system you only need\nto use chkconifg check config to turn\n\n483\n00:22:52.704 --> 00:22:53.319\nthat on.\n\n484\n00:22:53.319 --> 00:22:55.638\nIt's difference this is a systemd system.\n\n485\n00:22:55.638 --> 00:22:58.338\nThis is how we would do it on new\nversions of Red Hat and CentOS, and\n\n486\n00:22:58.338 --> 00:23:01.801\nhow we would do it on Debian, Ubuntu, and\npretty much everything else these days.\n\n487\n00:23:01.801 --> 00:23:03.538\n&gt;&gt; [LAUGH]\n&gt;&gt; So that's pretty much the way.\n\n488\n00:23:03.538 --> 00:23:08.020\nAll right, now technically I'm done.\n\n489\n00:23:08.020 --> 00:23:09.444\nBut I still have that pesky\nfirewall sitting there.\n\n490\n00:23:09.444 --> 00:23:12.615\nAnd much like what I\njust did with systemCTL,\n\n491\n00:23:12.615 --> 00:23:17.798\nthere's two commands that I'm gonna\nneed to run to get this one in place.\n\n492\n00:23:17.798 --> 00:23:24.628\nI'm gonna do Firewall-cmd and\nI need to do --add-service=dns.\n\n493\n00:23:24.628 --> 00:23:31.069\nNow, I could do add port, and do TCP 53,\nbut then I'd have to add UDP 53 also.\n\n494\n00:23:31.069 --> 00:23:33.776\nBy doing add service,\nit does both, TCP and UDP.\n\n495\n00:23:33.776 --> 00:23:35.895\nAnd it's gonna allow them\nthrough the firewall.\n\n496\n00:23:35.895 --> 00:23:37.508\nThis assumes I'm using the default zone.\n\n497\n00:23:37.508 --> 00:23:42.085\nThe default zone would\nbe like --zone=public.\n\n498\n00:23:42.085 --> 00:23:44.142\nIf your server only has\none network adapter,\n\n499\n00:23:44.142 --> 00:23:46.642\nthe odds are all your adapters\nare in that public zone.\n\n500\n00:23:46.642 --> 00:23:49.210\nAnd so I can leave that off,\nthat's the default.\n\n501\n00:23:49.210 --> 00:23:51.360\nBut if you changed your zones,\nyou'd need to specify that.\n\n502\n00:23:51.360 --> 00:23:55.470\nMaybe you created a DMZ zone or LAN or\nwhatever so you'd have to add that.\n\n503\n00:23:55.470 --> 00:23:57.337\nBut I can leave that off because\nmine is just in the default.\n\n504\n00:23:57.337 --> 00:24:00.374\nAll right, that's added.\n\n505\n00:24:00.374 --> 00:24:02.980\nNow it's working until I reboot.\n\n506\n00:24:02.980 --> 00:24:04.438\nRemember with the firewall,\n\n507\n00:24:04.438 --> 00:24:08.593\nthe command I just issued is affecting the\nfirewall right now, not the config file.\n\n508\n00:24:08.593 --> 00:24:13.859\nSo I need to run that same command\none more time, and add --permanent.\n\n509\n00:24:13.859 --> 00:24:16.280\nAnd that's gonna add it\nto the config files.\n\n510\n00:24:16.280 --> 00:24:19.140\nBut that doesn't take effect right now,\nthat takes effect at boot.\n\n511\n00:24:19.140 --> 00:24:23.384\nSo I have to run both for\nit to take effect at boot and to run now.\n\n512\n00:24:23.384 --> 00:24:27.420\nOr I could just run this one command and\nthen restart the firewall.\n\n513\n00:24:27.420 --> 00:24:29.451\nBut that's kind of a pain in the butt,\nit restarts the firewall.\n\n514\n00:24:29.451 --> 00:24:32.533\nYou lose all your network connections,\nI didn't lose any connections here.\n\n515\n00:24:32.533 --> 00:24:33.464\nJust ran the same command.\n\n516\n00:24:33.464 --> 00:24:35.250\nJust added that --format.\n\n517\n00:24:36.870 --> 00:24:39.250\nAnd with that,\nI think we're pretty much done.\n\n518\n00:24:39.250 --> 00:24:42.888\nIt probably wouldn't hurt to\ngive named a quick restart,\n\n519\n00:24:42.888 --> 00:24:47.731\njust in case any of the things were wrong\nor aligned in correctly or whatever.\n\n520\n00:24:47.731 --> 00:24:50.213\nIt's gonna make sure that it reads all\nits config files and fires back up.\n\n521\n00:24:50.213 --> 00:24:54.670\nYou probably don't have to do that but\nnow, I'm up and I'm running.\n\n522\n00:24:54.670 --> 00:24:58.056\nBind is up on my system and\nI'm ready to answer people's queries,\n\n523\n00:24:58.056 --> 00:25:00.603\nalthough I don't really have any answers,\ndo I?\n\n524\n00:25:00.603 --> 00:25:01.580\nI haven't created any zone files.\n\n525\n00:25:01.580 --> 00:25:03.352\nSo we gotta take zone files next.\n\n526\n00:25:03.352 --> 00:25:06.712\nBut as far as the bind service itself,\nwe're installed, configured, and\n\n527\n00:25:06.712 --> 00:25:07.458\nup and running.\n\n528\n00:25:07.458 --> 00:25:10.315\n&gt;&gt; Well I think that's a really good start\nto get me looking at things a little\n\n529\n00:25:10.315 --> 00:25:11.060\nbit differently.\n\n530\n00:25:11.060 --> 00:25:13.023\nDefinitely a different-\n&gt;&gt; [LAUGH]\n\n531\n00:25:13.023 --> 00:25:13.739\n&gt;&gt; Interface than what I'm\n\n532\n00:25:13.739 --> 00:25:14.735\nused to in a Windows environment.\n\n533\n00:25:14.735 --> 00:25:19.387\nSo I'm excited to see what we have next\nwas we continue to look at configuring\n\n534\n00:25:19.387 --> 00:25:20.590\nthe DNS files.\n\n535\n00:25:20.590 --> 00:25:23.070\nBut I think that about wraps it up for\nthis episode.\n\n536\n00:25:23.070 --> 00:25:25.460\nThank you guys so much for\ntuning in with us today.\n\n537\n00:25:25.460 --> 00:25:26.925\nAnd thank you Don for being here.\n\n538\n00:25:26.925 --> 00:25:28.394\nI'm your show host, Cherokee Boose.\n\n539\n00:25:28.394 --> 00:25:29.547\n&gt;&gt; And I'm Don Pezet.\n\n540\n00:25:29.547 --> 00:25:30.758\n&gt;&gt; See you next time, here at ITPro.TV.\n\n541\n00:25:33.113 --> 00:25:39.015\n[MUSIC]\n\n542\n00:25:39.015 --> 00:25:41.483\n&gt;&gt; Thank you for watching ITPro.TV.\n\n",
          "vimeoId": "196619532"
        },
        {
          "description": "Once BIND is installed you will need to configure zones if you do not intend to use it solely as a DNS cache server. You will see how to create separate zone files and link back into the configuration file to reference the zones that have been generated. Don demonstrates how to create a variety of records in the forward lookup zone.",
          "length": "1892",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-8-2-configuring_zones_and-records-120816-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-8-2-configuring_zones_and-records-120816-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-8-2-configuring_zones_and-records-120816-1-sm.jpg",
          "title": "Configuring Zones and Records",
          "transcript": "WEBVTT\n\n1\n00:00:00.270 --> 00:00:03.482\nWelcome to ITProTV,\nI'm your host Don Pezet-\n\n2\n00:00:03.482 --> 00:00:04.024\n&gt;&gt; [INAUDIBLE]\n\n3\n00:00:04.024 --> 00:00:05.000\n&gt;&gt; Live from San Francisco,\n\n4\n00:00:05.000 --> 00:00:09.990\nCalifornia [INAUDIBLE]\n&gt;&gt; You're watching ITProTV.\n\n5\n00:00:09.990 --> 00:00:14.690\n&gt;&gt; Welcome to another\nDNS tech skills show.\n\n6\n00:00:14.690 --> 00:00:16.680\nI'm your host, Cherokee Boose.\n\n7\n00:00:16.680 --> 00:00:21.880\nIn this episode, we're gonna be taking a\nlook at configuring DNS records and zones.\n\n8\n00:00:21.880 --> 00:00:23.960\nToday, we have Don Pezet in studios.\n\n9\n00:00:23.960 --> 00:00:25.350\nThank you for being with us today, Don.\n\n10\n00:00:25.350 --> 00:00:26.480\n&gt;&gt; Thanks for having me, Cherokee, and\n\n11\n00:00:26.480 --> 00:00:28.650\nwe're ready to dive back\ninto the world of DNS.\n\n12\n00:00:28.650 --> 00:00:30.490\nIf you're watching all\nthese episodes in order,\n\n13\n00:00:30.490 --> 00:00:33.460\nthen you know that in the last episode,\nwe got BIND installed on a Linux server.\n\n14\n00:00:33.460 --> 00:00:34.980\nWe brought it online.\n\n15\n00:00:34.980 --> 00:00:38.350\nI know it's up, and it's running, but it,\nit's kinda hard to test it because it has\n\n16\n00:00:38.350 --> 00:00:42.378\nno records, it has no zones inside of it\nand that's kind of the whole point of DNS.\n\n17\n00:00:42.378 --> 00:00:44.410\nI guess caching server.\n\n18\n00:00:44.410 --> 00:00:47.860\nTechnically what we brought up at\nthis point is a caching server but\n\n19\n00:00:47.860 --> 00:00:49.180\nthat's not cool enough, right?\n\n20\n00:00:49.180 --> 00:00:50.025\nWe, we need to get some records.\n\n21\n00:00:50.025 --> 00:00:51.095\n&gt;&gt; [LAUGH]\n&gt;&gt; We need to get some zones in this.\n\n22\n00:00:51.095 --> 00:00:53.055\nWe're gonna actually\nput this thing to use.\n\n23\n00:00:53.055 --> 00:00:54.465\nAll right.\nSo let's kick this off and\n\n24\n00:00:54.465 --> 00:00:55.465\nget things started.\n\n25\n00:00:55.465 --> 00:00:59.855\nI'm remoted back into my Linux box,\nand this is a cento_s7 box,\n\n26\n00:00:59.855 --> 00:01:02.385\nwhich is the same as like,\nRed Hat or Fedora.\n\n27\n00:01:02.385 --> 00:01:03.617\nIf you're on Debian or Ubuntu,\n\n28\n00:01:03.617 --> 00:01:05.685\nthe installation can be\na little bit different.\n\n29\n00:01:05.685 --> 00:01:07.625\nBut these steps we're about\nto go through are pretty much\n\n30\n00:01:07.625 --> 00:01:08.660\nthe same on those guys too.\n\n31\n00:01:08.660 --> 00:01:12.190\nBIND is nice like that, that it is\nconsistent across the platforms.\n\n32\n00:01:12.190 --> 00:01:13.890\nBut what we're going to do\nis we're going to jump in,\n\n33\n00:01:13.890 --> 00:01:17.520\nand we're going to get some zones and\nrecords created.\n\n34\n00:01:17.520 --> 00:01:21.990\nNow, there's two different pieces of this\npuzzle we have to put together when we\n\n35\n00:01:21.990 --> 00:01:23.090\nwork with BIND.\n\n36\n00:01:23.090 --> 00:01:26.760\nOne part is the BIND configuration\nitself that we were working with\n\n37\n00:01:26.760 --> 00:01:28.260\nin the last episode.\n\n38\n00:01:28.260 --> 00:01:33.720\nSo, we've got the /etc/named/named.c,\nhang on a second,\n\n39\n00:01:33.720 --> 00:01:38.350\nnot a directory, .conf,\nthat guy right there.\n\n40\n00:01:38.350 --> 00:01:42.170\nAnd this is the file that we added for\nthe server's configuration, right?\n\n41\n00:01:42.170 --> 00:01:45.310\nSo that's what we worked with in\nthe last episode to get it in place,\n\n42\n00:01:45.310 --> 00:01:46.940\nnow we need to work with zone files.\n\n43\n00:01:46.940 --> 00:01:51.358\nAnd the zone files are actually stored in\nseparate files and I've got to come back\n\n44\n00:01:51.358 --> 00:01:57.350\nto this /etc/named.conf and tell it\nabout the zone files that I've got.\n\n45\n00:01:57.350 --> 00:02:00.450\nSo the first thing I'm gonna do\nis I'm gonna create the zone and\n\n46\n00:02:00.450 --> 00:02:03.880\nget that kind of structured and built,\nand then I'm gonna come back and\n\n47\n00:02:03.880 --> 00:02:07.340\nedit this file right here to let\nit know that the zone exists.\n\n48\n00:02:07.340 --> 00:02:10.110\nSo that's the basic process we're gonna\nhave to go through to get these zones\n\n49\n00:02:10.110 --> 00:02:11.390\ncreated and put in place.\n\n50\n00:02:11.390 --> 00:02:14.450\nAll right, so you're gonna go ahead and\nshow us the actual database,\n\n51\n00:02:14.450 --> 00:02:17.240\nthe directory in which we store\nthe records, the information.\n\n52\n00:02:17.240 --> 00:02:17.940\n&gt;&gt; Yeah, absolutely.\n\n53\n00:02:17.940 --> 00:02:21.080\nSo you've got this folder that\nI kind of keep going back to,\n\n54\n00:02:21.080 --> 00:02:26.040\nwhich is /etc/named, and it's got\na bunch of stuff in it, or does it?\n\n55\n00:02:26.040 --> 00:02:27.480\nIt's basically empty, right?\n\n56\n00:02:27.480 --> 00:02:29.020\nLooking in here, there's nothing there.\n\n57\n00:02:29.020 --> 00:02:33.790\nAnd the reason is that /etc, software's\nnot supposed to be able to write to it,\n\n58\n00:02:33.790 --> 00:02:34.880\nit really needs to be protected.\n\n59\n00:02:34.880 --> 00:02:38.000\nBut our email, or not our email,\nbut our DNS databases and stuff,\n\n60\n00:02:38.000 --> 00:02:40.320\nthose are the things that we need to\nbe able to modify and they change.\n\n61\n00:02:40.320 --> 00:02:42.850\nThe DNS cache is constantly changing.\n\n62\n00:02:42.850 --> 00:02:48.114\nSo, all of the actual data that we\nwork with beyond the basic server\n\n63\n00:02:48.114 --> 00:02:54.360\nconfig is stored in /var/named and so\nif I go in there, now I see some stuff.\n\n64\n00:02:54.360 --> 00:02:56.140\nRight now there's some things in here.\n\n65\n00:02:56.140 --> 00:02:59.273\nAnd some of this is really simple stuff\nlike named.local host or empty or\n\n66\n00:02:59.273 --> 00:03:03.370\nloopback, and these are just files\nthat reference some of the default\n\n67\n00:03:03.370 --> 00:03:05.685\nstuff that's created as part of BIND.\n\n68\n00:03:05.685 --> 00:03:08.970\nWe've got the slaves folder.\n\n69\n00:03:08.970 --> 00:03:10.920\nWe're gonna set this\nserver up as a master.\n\n70\n00:03:10.920 --> 00:03:12.620\nIn another episode,\nwe'll set up replication.\n\n71\n00:03:12.620 --> 00:03:15.770\nAnd if I've got replicated zones,\nthe replicated zones actually go in here,\n\n72\n00:03:15.770 --> 00:03:16.760\nin this folder.\n\n73\n00:03:16.760 --> 00:03:19.890\nBut if I'm the master,\nthe primary zones that I'm creating,\n\n74\n00:03:19.890 --> 00:03:23.550\nthe ones that I'm authoritative for\nare gonna go right here in this folder.\n\n75\n00:03:23.550 --> 00:03:25.790\nNow a regular user's not allowed\nto write to this folder.\n\n76\n00:03:25.790 --> 00:03:27.948\nThey're not even allowed to\nbrowse to it like I just did.\n\n77\n00:03:27.948 --> 00:03:31.020\nSo you're gonna need to do one or\ntwo things.\n\n78\n00:03:31.020 --> 00:03:34.586\nYou have to elevate your privileges,\nwhich you can do with the sudu command, so\n\n79\n00:03:34.586 --> 00:03:37.650\nevery command that I'm about run\nthroughout the rest of this episode,\n\n80\n00:03:37.650 --> 00:03:40.020\nyou can do sudu and then the command and\nthen run it that way.\n\n81\n00:03:40.020 --> 00:03:42.080\nOr, you can just do su to\nelevate your privileges and\n\n82\n00:03:42.080 --> 00:03:44.450\nthat's what I've done,\nI've bumped myself up to root so\n\n83\n00:03:44.450 --> 00:03:46.910\nthat I don't have to issue sudu for\nevery single command, and when I'm done,\n\n84\n00:03:46.910 --> 00:03:50.520\nI can always exit out of that and\ngo back to my normal level of permissions.\n\n85\n00:03:50.520 --> 00:03:52.200\nSo the first thing I need to\ndo is create a zone file.\n\n86\n00:03:52.200 --> 00:03:56.010\nAnd the zone file, you can actually\ncall it whatever the heck you want.\n\n87\n00:03:56.010 --> 00:03:58.130\nThe name of the file\ndoesn't really matter.\n\n88\n00:03:58.130 --> 00:04:00.440\nYou do need to remember it,\nso there's that piece.\n\n89\n00:04:00.440 --> 00:04:03.340\nSo what I like to do is I like to\nfollow a standard naming convention,\n\n90\n00:04:03.340 --> 00:04:04.380\nit's not in the standard.\n\n91\n00:04:04.380 --> 00:04:05.430\nYou can call it whatever you want, but\n\n92\n00:04:05.430 --> 00:04:08.480\nI like to call it whatever\nthe domain name is dot DNS.\n\n93\n00:04:08.480 --> 00:04:09.780\nThat's kind of my habit.\n\n94\n00:04:09.780 --> 00:04:12.180\nThere's other people out there\nthat like to do DB dot and\n\n95\n00:04:12.180 --> 00:04:14.380\nwhatever the domain is,\nyou pick what works for you.\n\n96\n00:04:14.380 --> 00:04:18.640\nI'm going to create one for\nlab dot itpro dot tv.\n\n97\n00:04:18.640 --> 00:04:26.001\nI'm in slash VAR slash name d, and\nI'm going to edit lab.itpro.tv.dns.\n\n98\n00:04:26.001 --> 00:04:30.026\nSo just a regular old text file, and\nthis is going to be the zone file for\n\n99\n00:04:30.026 --> 00:04:32.480\nthis particular domain.\n\n100\n00:04:32.480 --> 00:04:35.065\nNow, if you're working with something\nlike Microsoft DNS, it's nice,\n\n101\n00:04:35.065 --> 00:04:35.770\nbecause it's GUI.\n\n102\n00:04:35.770 --> 00:04:39.260\nYou just create a folder, you start\nadding records, and you're in business.\n\n103\n00:04:39.260 --> 00:04:44.780\nBut with BIND, I have to write\nthe actual zone file by hand.\n\n104\n00:04:44.780 --> 00:04:48.400\nThe zone file's not the easiest thing to\nwrite, so you kind of have to get used to\n\n105\n00:04:48.400 --> 00:04:52.290\nwhat the format's like, and I usually,\nI usually just jump on Google [LAUGH] and\n\n106\n00:04:52.290 --> 00:04:56.130\npull up an example zone file, modify\nit to my needs, and throw it in there.\n\n107\n00:04:56.130 --> 00:04:58.860\nThe very first one I create's\nusually the hardest.\n\n108\n00:04:58.860 --> 00:05:01.890\nAfter that, I just copy that one and\nmodify it so\n\n109\n00:05:01.890 --> 00:05:04.106\nyou don't have to reinvent the wheel\nover and over and over again.\n\n110\n00:05:04.106 --> 00:05:05.175\n[INAUDIBLE]\n&gt;&gt; Yeah, this isn't something you\n\n111\n00:05:05.175 --> 00:05:07.895\nwould be doing on a regular day to day\nbasis, so you might just want to spend\n\n112\n00:05:07.895 --> 00:05:10.255\na little extra time to make sure\nyou have the proper syntax.\n\n113\n00:05:10.255 --> 00:05:12.170\nOtherwise, you're gonna\nget some nasty messages.\n\n114\n00:05:12.170 --> 00:05:13.025\n[LAUGH]\n&gt;&gt; Absolutely,\n\n115\n00:05:13.025 --> 00:05:16.275\nand it's almost a guarantee with me,\nI'm guaranteed to miss a semicolon, or\n\n116\n00:05:16.275 --> 00:05:17.135\nsomething like that.\n\n117\n00:05:17.135 --> 00:05:19.875\nSo I'll show you a neat utility that\nwe have that can check to see if we're\n\n118\n00:05:19.875 --> 00:05:21.805\nmissing those syntax type things.\n\n119\n00:05:21.805 --> 00:05:22.385\n&gt;&gt; Cool.\n&gt;&gt; And it will help us\n\n120\n00:05:22.385 --> 00:05:23.715\nto find them and fix them.\n\n121\n00:05:23.715 --> 00:05:28.254\nAll right, now technically there' s only\nthree things required in a zone file,\n\n122\n00:05:28.254 --> 00:05:29.809\nnone of which are records.\n\n123\n00:05:29.809 --> 00:05:33.500\nI don't have to create a records at all,\nwhich kinda defeats the whole purpose.\n\n124\n00:05:33.500 --> 00:05:35.100\nBut the three things I have to have.\n\n125\n00:05:35.100 --> 00:05:37.070\nOne, I need a default time to live.\n\n126\n00:05:37.070 --> 00:05:39.033\nSo that's the very first\nthing I'm gonna put.\n\n127\n00:05:39.033 --> 00:05:42.130\nRight here, on line number one, is gonna\nbe what my default time to live is.\n\n128\n00:05:42.130 --> 00:05:46.230\nAnd the way we enter it in is by\nputting in a dollar sign, oops,\n\n129\n00:05:46.230 --> 00:05:50.180\nI gotta get into insert mode, there we go,\ndollar sign, and then TTL, and\n\n130\n00:05:50.180 --> 00:05:53.710\nwhatever we want the time\nto live to be in seconds.\n\n131\n00:05:53.710 --> 00:05:56.020\nSo I'm gonna set mine\nto a nice big number.\n\n132\n00:05:57.090 --> 00:06:01.770\nI'm gonna do 604,800, which if I\nremember right is eight days, or\n\n133\n00:06:01.770 --> 00:06:02.890\nright around eight days.\n\n134\n00:06:02.890 --> 00:06:04.750\nThat's gonna be my default time to live.\n\n135\n00:06:04.750 --> 00:06:09.020\nNow that sounds like a really long time,\nand it is, eight days.\n\n136\n00:06:09.020 --> 00:06:11.400\nIf I've got a seven day DHCP lease,\n\n137\n00:06:11.400 --> 00:06:14.680\nthough, then I don't really care\nif it's an eight day cache.\n\n138\n00:06:14.680 --> 00:06:17.570\nPeople are gonna have their IP address for\na nice long time, and so\n\n139\n00:06:17.570 --> 00:06:19.540\nI can let these things cache.\n\n140\n00:06:19.540 --> 00:06:23.240\nBut for some things like my name\nservers or a mission critical server,\n\n141\n00:06:23.240 --> 00:06:25.260\nI might want a really short time to live.\n\n142\n00:06:25.260 --> 00:06:27.330\nAnd I can override that on\nthe individual records.\n\n143\n00:06:27.330 --> 00:06:30.890\nEvery record can have the time to live\noverridden if you wanna go that route.\n\n144\n00:06:30.890 --> 00:06:31.690\nI'm not gonna do that here.\n\n145\n00:06:31.690 --> 00:06:33.990\nI'm just gonna go with\nthis default time to live.\n\n146\n00:06:33.990 --> 00:06:35.730\nSo that's the first thing we have to have.\n\n147\n00:06:35.730 --> 00:06:40.420\nThe second thing we have to have is\nidentifying who the start of authority is.\n\n148\n00:06:40.420 --> 00:06:43.890\nThe start of authority is the DNS server\nthat is responsible for that domain.\n\n149\n00:06:43.890 --> 00:06:48.450\nWell that's easy, it's the server I'm on,\nbut that's not always the case.\n\n150\n00:06:48.450 --> 00:06:50.930\nSometimes I've registered the domain\nwith an external provider and\n\n151\n00:06:50.930 --> 00:06:52.430\nthey're the start of authority.\n\n152\n00:06:52.430 --> 00:06:53.980\nThis is just a name server.\n\n153\n00:06:53.980 --> 00:06:57.170\nSo I need to designate who that SOA is,\nright here.\n\n154\n00:06:57.170 --> 00:06:59.570\nIt might be me or\nit might be another server.\n\n155\n00:06:59.570 --> 00:07:01.090\nNow when you designate the SOA,\n\n156\n00:07:01.090 --> 00:07:02.820\nthere's a couple of different\nthings we have to provide.\n\n157\n00:07:02.820 --> 00:07:04.636\nFirst, I'm gonna do an @ symbol.\n\n158\n00:07:04.636 --> 00:07:08.490\nAnd what the @ symbol means is that I\"m\nproviding this start of authority for\n\n159\n00:07:08.490 --> 00:07:09.210\nthis domain.\n\n160\n00:07:09.210 --> 00:07:13.438\nThe one I'm working on right now\nwhich is going to be lab.itpro.tv.\n\n161\n00:07:13.438 --> 00:07:18.180\nThen I need to tell it the class and\nthe class is going to be Internet.\n\n162\n00:07:18.180 --> 00:07:19.330\nThe class is always Internet.\n\n163\n00:07:19.330 --> 00:07:22.350\nThere's actually four or five different\nclasses like the chaos class and\n\n164\n00:07:22.350 --> 00:07:25.320\na few others that were used for testing\nand development way back in the day.\n\n165\n00:07:25.320 --> 00:07:26.592\n&gt;&gt; Chaos?\n&gt;&gt; Yeah, they had cool names.\n\n166\n00:07:26.592 --> 00:07:27.710\n&gt;&gt; [LAUGH]\n&gt;&gt; [LAUGH] And chaos,\n\n167\n00:07:27.710 --> 00:07:29.860\nthey called it that\nbecause it was designed so\n\n168\n00:07:29.860 --> 00:07:31.600\nit could support more than one protocol.\n\n169\n00:07:31.600 --> 00:07:33.340\nSo you didn't necessarily know\nwhat protocol it was running.\n\n170\n00:07:33.340 --> 00:07:34.030\n&gt;&gt; Okay.\n&gt;&gt; So it was\n\n171\n00:07:34.030 --> 00:07:35.260\n&gt;&gt; It was chaos.\n\n172\n00:07:35.260 --> 00:07:36.480\nBut some of the other ones,\n\n173\n00:07:36.480 --> 00:07:39.560\nI cant remember the other names,\nbut they're weird names like that.\n\n174\n00:07:39.560 --> 00:07:45.830\nBut today, everything is Internet so we\njust do IN and its in the Internet class.\n\n175\n00:07:45.830 --> 00:07:49.384\nThen, I need to tell it that im creating\nan SOA record, a start of authority,\n\n176\n00:07:49.384 --> 00:07:51.752\nand you'll notice im doing\ntabs in between these.\n\n177\n00:07:51.752 --> 00:07:55.258\nI dont have to do that, im just trying\nto get it to look nice and separate so\n\n178\n00:07:55.258 --> 00:07:58.320\nits easier for me to read this,\nI just do that for readability.\n\n179\n00:07:58.320 --> 00:07:59.220\nI've got SOA, and\n\n180\n00:07:59.220 --> 00:08:02.960\nthen I need to tell it the domain\nthat I'm the start of authority for.\n\n181\n00:08:02.960 --> 00:08:09.501\nAnd this server is dns1.lab.itpro.tv,\nand so I'm gonna punch that in.\n\n182\n00:08:09.501 --> 00:08:11.322\nSo that's my host, dns1.\n\n183\n00:08:11.322 --> 00:08:15.272\nNow I can't do a name lookup for\ndns1 yet, can I?\n\n184\n00:08:15.272 --> 00:08:18.300\nI'm gonna need an A record for\nthat one, so I can look it up.\n\n185\n00:08:18.300 --> 00:08:21.660\nBut this could be a host in\na completely different domain.\n\n186\n00:08:21.660 --> 00:08:25.170\nThe start of authority server doesn't\nactually have to be in the domain that\n\n187\n00:08:25.170 --> 00:08:26.170\nit's an authority for.\n\n188\n00:08:27.850 --> 00:08:30.790\nThe next value I have to\nprovide is an administrator.\n\n189\n00:08:30.790 --> 00:08:32.110\nWho is the administrator for this domain?\n\n190\n00:08:32.110 --> 00:08:34.990\nNow this record is largely ignored.\n\n191\n00:08:34.990 --> 00:08:37.800\nAnd kind of a legacy of older times\nwhere you'd point to the computer\n\n192\n00:08:37.800 --> 00:08:39.820\nof the person who was the administrator.\n\n193\n00:08:39.820 --> 00:08:43.850\nThese days, we normally just put admin\nfollowed by whatever that domain is.\n\n194\n00:08:43.850 --> 00:08:45.970\nDoesn't necessarily mean I have\na computer with that name.\n\n195\n00:08:45.970 --> 00:08:47.820\nBut I can always come and\ncreate a text record, or\n\n196\n00:08:47.820 --> 00:08:51.300\nsomething that pointed to an email\naddress for that to let people know.\n\n197\n00:08:51.300 --> 00:08:56.110\nThe exception would be if like if I had\na completely different domain I wanted to\n\n198\n00:08:56.110 --> 00:08:59.290\nreference, they could pull\nthe whois record for this.\n\n199\n00:08:59.290 --> 00:09:00.375\nOr the whois record for\n\n200\n00:09:00.375 --> 00:09:04.103\nwhatever the other domain is to find\nthe contact information for that admin.\n\n201\n00:09:04.103 --> 00:09:07.647\n&gt;&gt; Now Don, I noticed that you have the\ndot at the end of your syntax there for\n\n202\n00:09:07.647 --> 00:09:08.720\nyour domain name.\n\n203\n00:09:08.720 --> 00:09:09.371\nHow important is that?\n\n204\n00:09:09.371 --> 00:09:14.280\nIs that something that's required within\nthis operating system or this program?\n\n205\n00:09:14.280 --> 00:09:16.480\n&gt;&gt; So it's required here.\n\n206\n00:09:16.480 --> 00:09:17.540\nIt's not always required.\n\n207\n00:09:17.540 --> 00:09:18.690\nSometimes I'll leave it out, and\n\n208\n00:09:18.690 --> 00:09:21.570\nI let the syntax checker tell\nme if it's got it or not.\n\n209\n00:09:21.570 --> 00:09:24.370\nWhat happens is, in DNS names,\nwe don't see it.\n\n210\n00:09:24.370 --> 00:09:26.652\nBut there's always a dot at the end.\n\n211\n00:09:26.652 --> 00:09:29.120\nAnd it all goes back to the DNS hierarchy.\n\n212\n00:09:29.120 --> 00:09:31.560\nWhen I do a lookup, I\"m gonna reach out.\n\n213\n00:09:31.560 --> 00:09:35.046\nSo if I'm looking up dns1.lab.itpro.tv,\nright?\n\n214\n00:09:35.046 --> 00:09:38.300\nThe very first thing I'm gonna do is I'm\ngoing to go to the root hint servers.\n\n215\n00:09:38.300 --> 00:09:42.329\nAnd I'm going to say who controls .tv?\n\n216\n00:09:42.329 --> 00:09:43.940\nThe root hint servers don't.\n\n217\n00:09:43.940 --> 00:09:45.705\nThey just tell us who does.\n\n218\n00:09:45.705 --> 00:09:48.740\nWell, the root hint servers,\nthey're that dot.\n\n219\n00:09:48.740 --> 00:09:52.490\nThey're the dot at the very top of that\nhierarchy, so that's what that dot is.\n\n220\n00:09:52.490 --> 00:09:55.100\nYour web browsers,\nthey put that dot in for you.\n\n221\n00:09:55.100 --> 00:09:57.380\nYou don't see it, they hide it, so\nmost of us don't even know it's there.\n\n222\n00:09:57.380 --> 00:09:58.880\nBut it is there, and it's important.\n\n223\n00:09:58.880 --> 00:10:02.434\nAnd in these config files, if I leave it\nout, it'll usually generate an error.\n\n224\n00:10:02.434 --> 00:10:05.050\n&gt;&gt; Okay.\n&gt;&gt; Here, we'll take them out.\n\n225\n00:10:05.050 --> 00:10:07.701\nAnd when we run the syntax checker,\nwe'll see if it gets upset about it.\n\n226\n00:10:07.701 --> 00:10:10.420\nBut it's easy enough to\npunch those back in.\n\n227\n00:10:10.420 --> 00:10:12.800\nBut for most of our records, we're going\nto want to have that dot on the end.\n\n228\n00:10:14.300 --> 00:10:16.372\nAll right, now if you think that's weird,\nwait until this next part.\n\n229\n00:10:16.372 --> 00:10:16.985\n&gt;&gt; [LAUGH]\n&gt;&gt; So\n\n230\n00:10:16.985 --> 00:10:22.620\nthe last part of the SOA is a collection\nof weird numbers and other things.\n\n231\n00:10:22.620 --> 00:10:23.870\nAnd I could pop them right here.\n\n232\n00:10:23.870 --> 00:10:27.860\nBut what I'm gonna do is just\nthrow in a open parentheses.\n\n233\n00:10:27.860 --> 00:10:29.410\nAnd go down to the next line and\nadd them here.\n\n234\n00:10:30.430 --> 00:10:34.250\nThe version of BIND that I'm using\nhere on the show is super-mega-picky\n\n235\n00:10:34.250 --> 00:10:37.270\nabout exactly what I put in here and\nthe format that I put in.\n\n236\n00:10:37.270 --> 00:10:39.530\nMost servers are actually\nreally lenient on this.\n\n237\n00:10:39.530 --> 00:10:42.519\nAnd so you can enter in the data just\nall right inside of the parentheses\n\n238\n00:10:42.519 --> 00:10:43.085\nin one line.\n\n239\n00:10:43.085 --> 00:10:44.570\nIt makes life a lot easier.\n\n240\n00:10:44.570 --> 00:10:46.720\nBut I've gotta break it out here or\nBIND will complain at me.\n\n241\n00:10:46.720 --> 00:10:51.050\nSo the very first value I need\nto provide is the serial number.\n\n242\n00:10:51.050 --> 00:10:54.801\nEvery time you edit the zone file, you're\nsuppose to increase the serial number.\n\n243\n00:10:54.801 --> 00:10:56.210\nAnd when you have replication,\n\n244\n00:10:56.210 --> 00:10:58.934\nthat's how the systems can track\nthat a change has occurred.\n\n245\n00:10:58.934 --> 00:11:01.070\nAnd they need to load the changes and\nso on.\n\n246\n00:11:01.070 --> 00:11:02.900\nSo I need to put in\nan initial serial number.\n\n247\n00:11:02.900 --> 00:11:06.503\nSince this is the beginning,\nI can just throw in 1.\n\n248\n00:11:06.503 --> 00:11:08.250\nSo I'll go ahead and punch that 1 in.\n\n249\n00:11:08.250 --> 00:11:09.500\nAnd once I've got that value in,\n\n250\n00:11:09.500 --> 00:11:13.250\nI'm putting in a semicolon to let it know\nthat another value's about to come up.\n\n251\n00:11:13.250 --> 00:11:15.940\n&gt;&gt; Sure, so Don, with the serial numbers,\nis there a way to go ahead and\n\n252\n00:11:15.940 --> 00:11:19.860\nexclude different versions for replication\nif we have any kind of bandwidth issues?\n\n253\n00:11:19.860 --> 00:11:23.090\nOr these files, is it something\nwe should even be concerned with?\n\n254\n00:11:23.090 --> 00:11:24.710\n&gt;&gt; It's something that I\ndon't normally worry about.\n\n255\n00:11:24.710 --> 00:11:28.260\nThere's not a method to say like,\ndon't take serial number 4.\n\n256\n00:11:28.260 --> 00:11:29.770\nWell, I guess there sort of is.\n\n257\n00:11:29.770 --> 00:11:33.320\nIf serial number 5 is out, and I haven't\ngotten serial number 4, I'll skip 4 and\n\n258\n00:11:33.320 --> 00:11:34.326\ngo right to 5, right?\n\n259\n00:11:34.326 --> 00:11:36.170\nIt's not like an incremental here.\n\n260\n00:11:36.170 --> 00:11:39.100\nIt's grabbing the whole file, so\nwe just move right beyond it.\n\n261\n00:11:39.100 --> 00:11:42.320\nIf you have a bad network connection,\nmaybe dial-up or\n\n262\n00:11:42.320 --> 00:11:46.190\na VPN tunnel that comes up and comes down,\nthen I might miss a few serial numbers.\n\n263\n00:11:46.190 --> 00:11:46.840\nAnd that's okay.\n\n264\n00:11:46.840 --> 00:11:48.210\nWe just skip and get the latest one.\n\n265\n00:11:48.210 --> 00:11:51.760\nThis is all contained in one file, so\nit's not like I just get a portion of it.\n\n266\n00:11:51.760 --> 00:11:53.430\nSo typically,\nwe don't have to worry about it.\n\n267\n00:11:53.430 --> 00:11:54.420\n&gt;&gt; All right.\n\n268\n00:11:54.420 --> 00:11:57.100\n&gt;&gt; All right,\nnow whenever you do a semicolon,\n\n269\n00:11:57.100 --> 00:11:59.840\neverything that's after\nthe semicolon really gets ignored.\n\n270\n00:11:59.840 --> 00:12:02.650\nAnd so if I wanted,\nI could add other text here.\n\n271\n00:12:02.650 --> 00:12:05.620\nAnd you'll see a lot of sample files\nout there where they actually write\n\n272\n00:12:05.620 --> 00:12:08.020\nwhat that field was for right afterwards.\n\n273\n00:12:08.020 --> 00:12:11.440\nIt's kinda nice cuz it helps you remember\nwhat the heck that number's all about.\n\n274\n00:12:11.440 --> 00:12:12.584\nSerial numbers, easy to remember.\n\n275\n00:12:12.584 --> 00:12:15.233\nBut some of the other ones that we're\ngonna see here in a minute actually get\n\n276\n00:12:15.233 --> 00:12:15.959\nreally confusing.\n\n277\n00:12:15.959 --> 00:12:17.840\nSo I'll go ahead and\nput the naming in there.\n\n278\n00:12:17.840 --> 00:12:21.310\nI don't normally do that, but\nwe'll just do it here for the show.\n\n279\n00:12:22.540 --> 00:12:24.439\nAll right,\nthe next value that I provide, well,\n\n280\n00:12:24.439 --> 00:12:27.370\nI've actually got four different\ntimers that I need to set.\n\n281\n00:12:27.370 --> 00:12:29.269\nAnd this version of BIND\nisn't gonna let me do it.\n\n282\n00:12:29.269 --> 00:12:32.791\nBut a lot of them you set it not just\nin seconds, which is the default.\n\n283\n00:12:32.791 --> 00:12:37.621\nBut you can also set it by saying\nthings like 1d for one day, or 1w for\n\n284\n00:12:37.621 --> 00:12:39.632\none week, 1h for one hour.\n\n285\n00:12:39.632 --> 00:12:41.087\nSo you've got variations you can specify.\n\n286\n00:12:41.087 --> 00:12:42.780\nIt makes life easier.\n\n287\n00:12:42.780 --> 00:12:45.800\nThis version of BIND isn't going to\naccept that though, for whatever reason.\n\n288\n00:12:45.800 --> 00:12:47.718\nSo I'm gonna have to do it in seconds.\n\n289\n00:12:47.718 --> 00:12:52.290\nSo the first value I'm gonna provide here\nis going to be the refresh interval.\n\n290\n00:12:52.290 --> 00:12:56.400\nHow often do I check and\nsee if my database file has been updated?\n\n291\n00:12:56.400 --> 00:13:00.980\nI can always go in and restart BIND to\nmake it refresh and check this stuff.\n\n292\n00:13:00.980 --> 00:13:02.940\nOr it'll Refresh on a set interval.\n\n293\n00:13:02.940 --> 00:13:04.516\nThat's really important if\nyou're doing replication.\n\n294\n00:13:04.516 --> 00:13:08.000\nSo often are the replicas\ntuning in to check it out.\n\n295\n00:13:08.000 --> 00:13:11.606\nSo just gonna go with some of\nthe default values that you'll see\n\n296\n00:13:11.606 --> 00:13:13.793\non a lot of servers that are out there.\n\n297\n00:13:13.793 --> 00:13:17.020\nSo I'll do 86400 seconds.\n\n298\n00:13:17.020 --> 00:13:20.300\nThen I'm gonna do the Retry interval.\n\n299\n00:13:20.300 --> 00:13:24.036\nIf I fail to contact a server,\nlike if I'm doing a lookup,\n\n300\n00:13:24.036 --> 00:13:26.189\nhow long to I wait before I retry?\n\n301\n00:13:26.189 --> 00:13:28.690\nSo I'm gonna set that to 7200 seconds.\n\n302\n00:13:28.690 --> 00:13:30.750\nAnd then we'll do the expiration.\n\n303\n00:13:30.750 --> 00:13:33.714\nIf I haven't contacted somebody\nin a certain period of time,\n\n304\n00:13:33.714 --> 00:13:36.512\nhow long before I expire\nthe records that I have from them?\n\n305\n00:13:36.512 --> 00:13:37.896\nAnd this is more for the cache.\n\n306\n00:13:37.896 --> 00:13:40.520\nIf I have stuff going to the cache,\nand I can't verify somebody's up,\n\n307\n00:13:40.520 --> 00:13:41.722\nI can expire out their records.\n\n308\n00:13:42.990 --> 00:13:46.840\nAnd then the last one is what's\ncalled the Negative Cache.\n\n309\n00:13:46.840 --> 00:13:50.970\nAnd this one applies to the server itself,\n\n310\n00:13:50.970 --> 00:13:54.280\nas far as like when it's aging things\nout and when it's a caching server.\n\n311\n00:13:54.280 --> 00:13:56.591\nSo I can set that value,\nI'll set it to a smaller number, here.\n\n312\n00:13:56.591 --> 00:13:58.380\nI'll do 3600.\n\n313\n00:13:58.380 --> 00:13:59.990\nNow the syntax is a little different here.\n\n314\n00:13:59.990 --> 00:14:02.950\nBecause I need to close out my\nparenthesis for doing the semicolons.\n\n315\n00:14:02.950 --> 00:14:06.270\nSo I'll throw that in, and I'll just put\nhere that that's the Negative Cache.\n\n316\n00:14:07.470 --> 00:14:11.220\nAll right, that is the end of\nmy start of authority record.\n\n317\n00:14:11.220 --> 00:14:14.490\nSo all of what I just did is SOA, right?\n\n318\n00:14:14.490 --> 00:14:16.150\nThat's all start of authority.\n\n319\n00:14:16.150 --> 00:14:17.920\nI've gotta have that, and\n\n320\n00:14:17.920 --> 00:14:21.510\nthat's designating who's in\ncharge of this domain, right?\n\n321\n00:14:21.510 --> 00:14:24.360\nTime to live,\nfollowed by start of authority.\n\n322\n00:14:24.360 --> 00:14:27.446\nAnd then the third thing that I\nhave to have are the name servers.\n\n323\n00:14:27.446 --> 00:14:30.450\nWho are the name servers for this domain?\n\n324\n00:14:30.450 --> 00:14:31.975\nSo I need to come in and\nput in the name servers.\n\n325\n00:14:31.975 --> 00:14:33.710\nAnd notice I'm putting an S on that.\n\n326\n00:14:33.710 --> 00:14:36.790\nYou normally wanna have more than\none name server for redundancy.\n\n327\n00:14:36.790 --> 00:14:38.820\nIf one name server goes down,\nthe whole zone is gone.\n\n328\n00:14:38.820 --> 00:14:39.867\nYou're kind of out of luck, right?\n\n329\n00:14:39.867 --> 00:14:40.960\nSo I'm gonna add in two.\n\n330\n00:14:40.960 --> 00:14:41.920\n&gt;&gt; We should have at least two.\n\n331\n00:14:41.920 --> 00:14:44.622\nBut is there a limit or a maximum within\nthis software that'll go ahead and\n\n332\n00:14:44.622 --> 00:14:47.865\nprohibit you from entering in [CROSSTALK]\n&gt;&gt; That's a great question.\n\n333\n00:14:47.865 --> 00:14:49.665\nI don't know if there's a maximum.\n\n334\n00:14:49.665 --> 00:14:51.432\nI've seen ten, so-\n&gt;&gt; I guess your limit would be\n\n335\n00:14:51.432 --> 00:14:52.186\nyour budget, maybe?\n\n336\n00:14:52.186 --> 00:14:52.803\n&gt;&gt; [LAUGH] Yeah.\n\n337\n00:14:52.803 --> 00:14:55.561\n&gt;&gt; [LAUGH]\n&gt;&gt; I've definitely seen ten in production.\n\n338\n00:14:55.561 --> 00:14:57.813\n&gt;&gt; Okay.\n\n339\n00:14:57.813 --> 00:14:59.365\n&gt;&gt; I thought ten was overkill.\n\n340\n00:14:59.365 --> 00:15:03.535\nIn Amazon Web Services, they consistently\ndo four on most of their stuff.\n\n341\n00:15:03.535 --> 00:15:04.789\nSo you can certainly do more than two.\n\n342\n00:15:04.789 --> 00:15:06.960\nAnd there's a lot of good reasons for\nthat.\n\n343\n00:15:06.960 --> 00:15:10.600\nUsing Amazon as an example,\nthey usually do four.\n\n344\n00:15:10.600 --> 00:15:14.038\nWhere each name server is in\na different top-level domain.\n\n345\n00:15:14.038 --> 00:15:18.117\nSo they have one in .net,\none in .com, one in .co.uk, and\n\n346\n00:15:18.117 --> 00:15:20.951\none in .org, I believe is the fourth one.\n\n347\n00:15:20.951 --> 00:15:23.610\nAnd the reason they're doing that is\nthey're trying to spread those servers.\n\n348\n00:15:23.610 --> 00:15:27.067\nSo that if there's a DNS failure, like\nactually all the way up at the TLD level,\n\n349\n00:15:27.067 --> 00:15:29.250\nthat you can still get to\none of the other servers.\n\n350\n00:15:29.250 --> 00:15:31.971\nIt's a very high-level redundancy,\nso you could certainly go more.\n\n351\n00:15:33.089 --> 00:15:34.322\nAll right, so\nI'm gonna punch these in now.\n\n352\n00:15:34.322 --> 00:15:36.140\nAnd when we punch in a name server,\n\n353\n00:15:36.140 --> 00:15:39.590\nwe have to tell it what domain\nit's being a name server for.\n\n354\n00:15:39.590 --> 00:15:42.600\nIf it's being a name server for\nthis domain, which it typically would be,\n\n355\n00:15:42.600 --> 00:15:43.660\nyou can just put an @, right?\n\n356\n00:15:43.660 --> 00:15:47.570\nThat same alias that I used with the SOA,\nthat's gonna be referencing the domain.\n\n357\n00:15:47.570 --> 00:15:51.462\nNow sometimes we can find versions\nof BIND that don't like that.\n\n358\n00:15:51.462 --> 00:15:54.974\nAnd we actually have to type the domain\nout, so I could put lab.itpro.tv.\n\n359\n00:15:54.974 --> 00:15:58.121\nThis one should take the @ symbol just\nfine, so I'm gonna punch that one in.\n\n360\n00:15:58.121 --> 00:16:01.193\nThen, its Internet class,\njust like the other guys.\n\n361\n00:16:01.193 --> 00:16:04.905\nExcept, instead of an SOA,\nthis is gonna be a Name Server record, so\n\n362\n00:16:04.905 --> 00:16:06.590\nI'll put in an NS.\n\n363\n00:16:06.590 --> 00:16:08.290\nAnd now I need to put in my record.\n\n364\n00:16:08.290 --> 00:16:11.048\nAnd Name Server records are just\nthe name of the server, so\n\n365\n00:16:11.048 --> 00:16:16.230\nI'll do dns1.lab.itpro.tv and\nfill in that little dot, right?\n\n366\n00:16:16.230 --> 00:16:16.730\nOr wait-\n&gt;&gt; [LAUGH]\n\n367\n00:16:16.730 --> 00:16:18.098\n&gt;&gt; We're leaving the dots out for now so\n\n368\n00:16:18.098 --> 00:16:19.774\nwe can see the error,\nbut we'll come back and\n\n369\n00:16:19.774 --> 00:16:20.992\nadd that dot in a minute.\nAnd\n\n370\n00:16:20.992 --> 00:16:26.773\nthen Cherokee mentioned more than one\nDNS server, so I'm gonna come in and\n\n371\n00:16:26.773 --> 00:16:29.922\nadd dns2.lap.itpro.tv.\nAll right,\n\n372\n00:16:29.922 --> 00:16:34.850\ntechnically what you see here is the bare\nminimum for zone file, I'm done.\n\n373\n00:16:34.850 --> 00:16:36.400\nI can save this and go.\n\n374\n00:16:36.400 --> 00:16:38.018\nBut it's got some problems, right?\n\n375\n00:16:38.018 --> 00:16:42.040\nFirst off there's no A records so why-\n&gt;&gt; It's only functional at this point.\n\n376\n00:16:42.040 --> 00:16:43.550\n&gt;&gt; Why bother creating it?\n\n377\n00:16:43.550 --> 00:16:46.120\nAll it's gonna do now is make\nthe zone fail faster, right?\n\n378\n00:16:46.120 --> 00:16:48.120\nSo there's that, I guess.\n\n379\n00:16:48.120 --> 00:16:50.370\nBut also, my name servers?\n\n380\n00:16:50.370 --> 00:16:51.690\nI put their name in here.\n\n381\n00:16:51.690 --> 00:16:53.660\nThere's no corresponding A record, right?\n\n382\n00:16:53.660 --> 00:16:55.530\nSo I can't even resolve\nthose name servers.\n\n383\n00:16:55.530 --> 00:16:57.710\nIf they were in a different domain,\nmaybe that would make sense.\n\n384\n00:16:57.710 --> 00:17:01.000\nBut since they're in this domain,\nI'm at least going to need A records for\n\n385\n00:17:01.000 --> 00:17:01.730\nthose name servers.\n\n386\n00:17:01.730 --> 00:17:04.670\nSo I'm gonna add in two\nA records real quick.\n\n387\n00:17:04.670 --> 00:17:06.880\nAnd A records are pretty easy to make.\n\n388\n00:17:06.880 --> 00:17:09.090\nBasically you start off by\nsaying who the server is, right?\n\n389\n00:17:09.090 --> 00:17:10.770\nSo I'm gonna say dns1.\n\n390\n00:17:10.770 --> 00:17:14.425\nAnd I'm not gonna type lab.itpro.tv,\nbecause this is the zone file for\n\n391\n00:17:14.425 --> 00:17:16.530\nlab.itpro.tv, so it knows that domain.\n\n392\n00:17:16.530 --> 00:17:19.000\nSo I'm gonna say dns1.\n\n393\n00:17:19.000 --> 00:17:25.000\nIt's an Internet class, This is\nan A record and what IP does it tie to?\n\n394\n00:17:25.000 --> 00:17:27.889\nFor me it's 10.0.222.101.\n\n395\n00:17:27.889 --> 00:17:33.520\nAnd I can do the same thing for\ndns2, and I can spell IN right.\n\n396\n00:17:33.520 --> 00:17:37.360\nAnd we can put that one in there also.\n\n397\n00:17:37.360 --> 00:17:41.870\nNow we've got some A records,\nand now my zone file is right.\n\n398\n00:17:41.870 --> 00:17:44.500\nNow it's actually something\nthat I can use, sort of.\n\n399\n00:17:44.500 --> 00:17:45.630\nI mean, I can look up my name servers,\n\n400\n00:17:45.630 --> 00:17:47.550\nthey don't have any other names to give\nme, but at least I can look them up.\n\n401\n00:17:49.190 --> 00:17:52.110\nAll right, so from here is where\nwe get the real fun, right?\n\n402\n00:17:52.110 --> 00:17:54.600\nWe need to start adding in our other\nrecords, and trying to branch out.\n\n403\n00:17:54.600 --> 00:17:55.370\n&gt;&gt; That's what I was gonna ask.\n\n404\n00:17:55.370 --> 00:17:58.680\nDo we have any limitations on the types of\nrecords that can be input into the system,\n\n405\n00:17:58.680 --> 00:18:00.790\nlike our mail records or\nanything like that?\n\n406\n00:18:00.790 --> 00:18:02.480\n&gt;&gt; This is the big\nadvantage of running bind.\n\n407\n00:18:02.480 --> 00:18:04.290\nBind is the reference DNS server.\n\n408\n00:18:04.290 --> 00:18:08.510\nSo if there's a record type that exists,\nbind supports it.\n\n409\n00:18:08.510 --> 00:18:10.338\nOther providers, you're gonna have\nto wait for them to add support,\n\n410\n00:18:10.338 --> 00:18:14.670\nbut when somebody proposes a new record,\nthey propose it against bind and so\n\n411\n00:18:14.670 --> 00:18:15.670\nit's the first one to get it.\n\n412\n00:18:15.670 --> 00:18:18.800\nSo if you can think of a DNS record,\nwe can put it here.\n\n413\n00:18:18.800 --> 00:18:20.310\nSo we saw an A record.\n\n414\n00:18:20.310 --> 00:18:23.070\nNow I might have an A record for\nmy web server.\n\n415\n00:18:23.070 --> 00:18:25.960\nThat's gonna screw with my formatting.\n\n416\n00:18:25.960 --> 00:18:27.361\n&gt;&gt; Close enough.\n\n417\n00:18:27.361 --> 00:18:30.080\n&gt;&gt; I get a little picky\non this stuff sometimes.\n\n418\n00:18:30.080 --> 00:18:33.060\nBut let's say I've got\na web server like that.\n\n419\n00:18:35.400 --> 00:18:38.050\n&gt;&gt; I knew it.\n&gt;&gt; I'm gonna fix my format.\n\n420\n00:18:38.050 --> 00:18:40.700\nSo I can create some\nmore A records like that.\n\n421\n00:18:40.700 --> 00:18:44.950\nRemember that the A record doesn't\nhave to match the name of the host.\n\n422\n00:18:44.950 --> 00:18:50.860\nThat host might be webserver01 but I might\njust call it www when people browse to it,\n\n423\n00:18:50.860 --> 00:18:54.300\nso I could come in and\nI could punch that in.\n\n424\n00:18:54.300 --> 00:18:56.925\nSo we could do it that way,\nor I could do a CNAME.\n\n425\n00:18:56.925 --> 00:19:01.488\nCNAME would be a lot easier cuz then if\nI ever change the IP address of the web\n\n426\n00:19:01.488 --> 00:19:05.331\nserver, it would just automatically\npoint to a new address.\n\n427\n00:19:05.331 --> 00:19:06.340\nSo I'll do that.\n\n428\n00:19:06.340 --> 00:19:11.050\nNow when you do a CNAME you do\nhave to provide the DNS name.\n\n429\n00:19:11.050 --> 00:19:14.090\nSo I'll go ahead and punch that,\nlike the fully qualified DNS name.\n\n430\n00:19:14.090 --> 00:19:16.360\nSo I'm gonna go ahead and\npunch that one in so it's got it.\n\n431\n00:19:16.360 --> 00:19:19.150\nBut now if somebody tries to resolve\nwww.lab.itpro.tv they're gonna get that\n\n432\n00:19:19.150 --> 00:19:19.710\nweb server.\n\n433\n00:19:21.520 --> 00:19:24.520\nSo we'll be able to go ahead and\ninput different URLs or\n\n434\n00:19:24.520 --> 00:19:27.209\ndifferent domain names for\nthe same web server.\n\n435\n00:19:27.209 --> 00:19:30.367\nOr if we had a device with multiple\nadapters we could go ahead and\n\n436\n00:19:30.367 --> 00:19:34.302\ninput the IP addresses here so we could\nimplement a round-robin technique and\n\n437\n00:19:34.302 --> 00:19:36.190\nit would all be stored right here.\n\n438\n00:19:36.190 --> 00:19:39.070\n&gt;&gt; Yeah, I'm glad you mentioned that\nbecause like here, it's just a CNAME,\n\n439\n00:19:39.070 --> 00:19:41.860\nright, so it's one name, it points to\none host, that's not very exciting.\n\n440\n00:19:41.860 --> 00:19:43.270\nBut if I want a round-robin,\n\n441\n00:19:43.270 --> 00:19:46.090\nI need more than one IP address\ntied to the same hostname.\n\n442\n00:19:46.090 --> 00:19:50.150\nSo what if I have more\nthan one web server?\n\n443\n00:19:50.150 --> 00:19:52.190\nOr webserver01 has two network adapters.\n\n444\n00:19:52.190 --> 00:19:57.590\nOr let's just say, I gave it .100,\nlet's say it's also got .99, right?\n\n445\n00:19:57.590 --> 00:19:59.100\nSo two different adapters.\n\n446\n00:19:59.100 --> 00:20:02.750\nI can add another line and\nleave the name blank.\n\n447\n00:20:02.750 --> 00:20:06.080\nBy leaving the name blank, I'm saying this\nis an extension of the line above it.\n\n448\n00:20:06.080 --> 00:20:07.340\n&gt;&gt; Interesting.\n&gt;&gt; And so I can come in,\n\n449\n00:20:07.340 --> 00:20:09.550\nI can say this is another Internet class.\n\n450\n00:20:09.550 --> 00:20:10.360\nIt's an A record.\n\n451\n00:20:11.880 --> 00:20:15.406\nAnd it is that IP, that's a second IP.\n\n452\n00:20:15.406 --> 00:20:18.060\nAnd they don't even have\nto be the same record type.\n\n453\n00:20:18.060 --> 00:20:21.550\nSo for example,\nI might have an IPv6 address.\n\n454\n00:20:22.930 --> 00:20:28.210\nSo I can come in here and punch in\nwhatever the address happens to be.\n\n455\n00:20:28.210 --> 00:20:29.000\nI'm just trying to make one up.\n\n456\n00:20:29.000 --> 00:20:30.640\nSo we can throw that one in there.\n\n457\n00:20:30.640 --> 00:20:35.058\nSo all three of these records\nare a part of webserver01.\n\n458\n00:20:35.058 --> 00:20:39.389\nTwo of them are A records just IPv4\naddresses and one is an IPv6 record,\n\n459\n00:20:39.389 --> 00:20:40.320\na AAAA record.\n\n460\n00:20:40.320 --> 00:20:42.760\nSo those are the addresses I'll\nkind of punch right in there.\n\n461\n00:20:42.760 --> 00:20:46.960\nAnd this one CNAME,\nit's gonna resolve to all of those.\n\n462\n00:20:46.960 --> 00:20:48.580\nSo that's kinda cool, right?\n\n463\n00:20:48.580 --> 00:20:49.582\nYou get that kinda balance.\n\n464\n00:20:49.582 --> 00:20:50.801\n&gt;&gt; It is cool.\n\n465\n00:20:50.801 --> 00:20:54.369\n&gt;&gt; If you're into the testing-\n&gt;&gt; [LAUGH] As cool as DNS records can get.\n\n466\n00:20:54.369 --> 00:20:55.138\n&gt;&gt; It's so awesome.\n\n467\n00:20:55.138 --> 00:20:57.340\nSo let's kick it up, a notch.\n\n468\n00:20:57.340 --> 00:20:58.550\nYou mentioned mail servers.\n\n469\n00:20:58.550 --> 00:20:59.642\n&gt;&gt; Yeah.\n&gt;&gt; And MX records,\n\n470\n00:20:59.642 --> 00:21:02.908\nI need to create some MX records and\nyou always wanna have at least two\n\n471\n00:21:02.908 --> 00:21:06.640\nMX records MX records are a little weird\ncuz that they look like A records.\n\n472\n00:21:06.640 --> 00:21:09.960\nWell actually, they look more like CNAMEs,\nbut we have to stick a priority\n\n473\n00:21:09.960 --> 00:21:13.140\ninto them also to prioritize\nthe order that they're used in.\n\n474\n00:21:13.140 --> 00:21:14.880\nSo, I'm gonna come in and add another one.\n\n475\n00:21:14.880 --> 00:21:19.140\nNow, when we do MX records, MX records\ndon't usually have a name tied to them.\n\n476\n00:21:19.140 --> 00:21:20.790\nThey're tied to the domain.\n\n477\n00:21:20.790 --> 00:21:25.540\nSo if I send to somebody's name at my\ndomain I need to find MX records for\n\n478\n00:21:25.540 --> 00:21:26.390\nthat domain.\n\n479\n00:21:26.390 --> 00:21:28.090\nSo instead of putting a domain\nhere I'm gonna put an @.\n\n480\n00:21:28.090 --> 00:21:30.550\nRemember that the @ symbol\nis always an alias for\n\n481\n00:21:30.550 --> 00:21:32.900\nthe domain whose zone file you're editing.\n\n482\n00:21:32.900 --> 00:21:34.730\nSo I'm gonna come in here and\npunch this one in.\n\n483\n00:21:34.730 --> 00:21:37.560\nAnd this is gonna be an MX record.\n\n484\n00:21:37.560 --> 00:21:41.246\nAnd like a CNAME I would\nnormally point to some\n\n485\n00:21:41.246 --> 00:21:45.131\nkind of server like mail1.lab.itpro.tv.\n\n486\n00:21:45.131 --> 00:21:48.092\nThe only difference here is that,\nas a part of that name,\n\n487\n00:21:48.092 --> 00:21:50.450\nI also need to provide a priority.\n\n488\n00:21:50.450 --> 00:21:53.590\nAnd, when I do that, it's just a number\nand technically it is part of the name.\n\n489\n00:21:53.590 --> 00:21:56.270\nIt's stored in the same field so that's\nwhy I'm grouping it together instead of\n\n490\n00:21:56.270 --> 00:21:59.600\ndoing my anal retentive tabs\nto get that kind of set up.\n\n491\n00:21:59.600 --> 00:22:02.960\nBut, we'll leave it like that and\nthen we'll add in another one for\n\n492\n00:22:02.960 --> 00:22:04.020\na second server.\n\n493\n00:22:05.730 --> 00:22:09.380\nAnd I'll give it a priority of 20 so\nthat it'll be redundant.\n\n494\n00:22:10.970 --> 00:22:12.400\n&gt;&gt; So Don, looking at those numbers there,\n\n495\n00:22:12.400 --> 00:22:15.510\nhow would I know which\nrecord to reference first?\n\n496\n00:22:15.510 --> 00:22:18.260\nIs it a lower priority with the number,\nor higher?\n\n497\n00:22:18.260 --> 00:22:19.920\n&gt;&gt; On MX records, the lower number wins.\n\n498\n00:22:19.920 --> 00:22:22.350\n&gt;&gt; Okay.\n&gt;&gt; So I have one with a value of ten.\n\n499\n00:22:22.350 --> 00:22:24.400\nEverybody's gonna use mail1.\n\n500\n00:22:24.400 --> 00:22:26.390\nUnless mail1 fails, and\nthey'll go to mail2.\n\n501\n00:22:26.390 --> 00:22:29.390\nBut they'll never go to\nmail2 unless mail1 fails.\n\n502\n00:22:29.390 --> 00:22:31.670\nNow if I had another one I\nwanted to load balance on,\n\n503\n00:22:31.670 --> 00:22:33.400\nI might add another entry here.\n\n504\n00:22:34.410 --> 00:22:37.670\nSo I can punch this one in and\nmaybe I give it the same priority.\n\n505\n00:22:38.840 --> 00:22:43.090\nAnd by doing that, it'll now load balance\nbetween those two, I can go to either one.\n\n506\n00:22:43.090 --> 00:22:46.060\nBut as long as somebody's better,\nas long as somebody has a lower number,\n\n507\n00:22:46.060 --> 00:22:48.170\nthat's gonna be the one that we prefer.\n\n508\n00:22:48.170 --> 00:22:49.890\nAnd of course now I've made\na little bit of a situation for\n\n509\n00:22:49.890 --> 00:22:52.080\nmyself because I don't have A records for\nany of these guys, right?\n\n510\n00:22:52.080 --> 00:22:55.640\nSo I need to make sure I've got A records\nfor them and we'll be able to fix it.\n\n511\n00:22:55.640 --> 00:22:58.840\nBut actually maybe I'll leave it like that\nfor now cuz it's not gonna be too picky.\n\n512\n00:22:58.840 --> 00:23:00.420\nI'm not gonna look those up.\n\n513\n00:23:00.420 --> 00:23:02.200\nSo well, I'll get error.\n\n514\n00:23:02.200 --> 00:23:05.020\nThe right thing to do is\nto populate it in there.\n\n515\n00:23:05.020 --> 00:23:08.930\nSo let me just create\nA records real quick.\n\n516\n00:23:08.930 --> 00:23:13.250\nWe'll do it right, but we will cheat\na little bit and do some copy and\n\n517\n00:23:13.250 --> 00:23:15.250\npaste action, cuz that'll be faster.\n\n518\n00:23:17.530 --> 00:23:19.955\nAll right, so\nI'm just gonna add these new IPs in,\n\n519\n00:23:19.955 --> 00:23:22.445\nand change these names that\nI've got all these records.\n\n520\n00:23:22.445 --> 00:23:25.705\nAll right, so, at this point,\nI've got nameserver records,\n\n521\n00:23:25.705 --> 00:23:29.185\nI've got MX records, I've got all\nthis other stuff kind of laid out.\n\n522\n00:23:29.185 --> 00:23:31.295\nThings are looking pretty good here,\nright?\n\n523\n00:23:31.295 --> 00:23:34.305\nLooks like everything's pretty\nmuch laid out the way I want it.\n\n524\n00:23:34.305 --> 00:23:36.925\nI'm leaving some spaces in here,\nlike between the nameservers and\n\n525\n00:23:36.925 --> 00:23:37.865\nthe other records.\n\n526\n00:23:37.865 --> 00:23:41.040\nI'm just doing that for my own benefit,\nto keep them kind of separate.\n\n527\n00:23:41.040 --> 00:23:43.359\nTechnically you could group\nall of these together and\n\n528\n00:23:43.359 --> 00:23:46.616\nhave each one on an individual line,\nand it's all just grouped together.\n\n529\n00:23:46.616 --> 00:23:48.441\nI'm just trying to make it readable.\n\n530\n00:23:48.441 --> 00:23:50.820\nWhat I've got now is a zone file.\n\n531\n00:23:50.820 --> 00:23:53.625\nAnd assuming I didn't screw it up too bad,\nit should be ready to go.\n\n532\n00:23:53.625 --> 00:23:57.412\nBut knowing me, I probably left\na semicolon out somewhere or\n\n533\n00:23:57.412 --> 00:24:00.912\nleft a dot off the end of a domain or\nsomething like that.\n\n534\n00:24:00.912 --> 00:24:06.029\nSo the cool thing here is, when you're\ndone writing a zone file, there's\n\n535\n00:24:06.029 --> 00:24:11.893\na neat little utility that's a part of\nthe bind utils, and it's named-checkzone.\n\n536\n00:24:11.893 --> 00:24:15.315\nIn the last episode,\nI used named-checkconf, and\n\n537\n00:24:15.315 --> 00:24:18.210\nthat checked the main configuration file.\n\n538\n00:24:18.210 --> 00:24:22.510\nSlash etc slash named.com This one\nwill let me check a zone file.\n\n539\n00:24:22.510 --> 00:24:27.257\nAnd the way I check it, is by telling\nit the domain that I'm checking and\n\n540\n00:24:27.257 --> 00:24:29.644\nthe file that I'm loading it from.\n\n541\n00:24:29.644 --> 00:24:34.050\nSo I'm gonna say lab.itpro.tv\nis the domain I'm checking.\n\n542\n00:24:34.050 --> 00:24:42.380\nAnd then the file,\n/var/named/lab.itpro.tv .dns, right?\n\n543\n00:24:42.380 --> 00:24:46.720\nAnd so I'm gonna run that check,\nand I get an error.\n\n544\n00:24:46.720 --> 00:24:54.370\nI get that the zone has no address record\nfor dns.1.lab.itpro.tv.lab.itpro.tv.\n\n545\n00:24:54.370 --> 00:24:57.190\nIt's doubled up the domain name for\nsome reason there.\n\n546\n00:24:58.990 --> 00:25:01.960\nProbably because I forgot to stick a dot\non the end to let it know that it was\n\n547\n00:25:01.960 --> 00:25:05.440\nover, and it stuck a DNS suffix on the\nend, so I'll have to double check that.\n\n548\n00:25:05.440 --> 00:25:08.940\nI've also go,\nwell that's the only real error I've got.\n\n549\n00:25:08.940 --> 00:25:12.790\nThe way this utility works is it checks\nfor errors and it stops at the first one.\n\n550\n00:25:12.790 --> 00:25:15.760\nSo, there may be additional\nerrors down the line, but\n\n551\n00:25:15.760 --> 00:25:17.040\nthis is the first one that it spotted.\n\n552\n00:25:17.040 --> 00:25:19.710\nIt spotted two instances,\nthe same error so I got them both.\n\n553\n00:25:19.710 --> 00:25:22.509\nI need to fix the error,\nand then I can reroute it.\n\n554\n00:25:22.509 --> 00:25:25.392\nAll right, now the solution to this\none is gonna be one of two things.\n\n555\n00:25:25.392 --> 00:25:28.639\nAdding the dots to the end of these\nwill probably solve my problem.\n\n556\n00:25:28.639 --> 00:25:32.520\nSo, I'm gonna come in here and just add\nthe dot to the end of each of these\n\n557\n00:25:32.520 --> 00:25:35.710\nreferences because it's\nsupposed to be there.\n\n558\n00:25:35.710 --> 00:25:38.730\nAnd if that solves my problem then great,\nI'm done.\n\n559\n00:25:38.730 --> 00:25:44.170\nIf that doesn't solve my problem,\nthen the other thing I can do is take just\n\n560\n00:25:44.170 --> 00:25:47.761\nthe @ symbols for the name servers, and\nactually write the domain name out there.\n\n561\n00:25:47.761 --> 00:25:49.019\nThat helps sometimes too.\n\n562\n00:25:49.019 --> 00:25:52.267\nI don't think it'll come to that,\nso let me just correct those, and\n\n563\n00:25:52.267 --> 00:25:54.470\nnow we'll just rerun that check.\n\n564\n00:25:54.470 --> 00:25:59.206\nAnd so there we go, I'm gonna rerun it,\nand this time I get the thumbs up.\n\n565\n00:25:59.206 --> 00:26:00.127\n&gt;&gt; [CROSSTALK] The okay, yeah.\n\n566\n00:26:00.127 --> 00:26:01.032\n&gt;&gt; Tells me, it's okay.\n\n567\n00:26:01.032 --> 00:26:03.675\nIt parsed the whole thing and it was good,\nso I just needed to fill those dots in,\n\n568\n00:26:03.675 --> 00:26:05.040\nkind of an important thing.\n\n569\n00:26:05.040 --> 00:26:06.244\nIf you're missing a semicolon.\n\n570\n00:26:06.244 --> 00:26:09.112\nLet me go back here and\nI'm gonna edit this, and\n\n571\n00:26:09.112 --> 00:26:11.704\nlet me just leave a semicolon out, right?\n\n572\n00:26:11.704 --> 00:26:13.188\nIn the named.conf file,\n\n573\n00:26:13.188 --> 00:26:17.170\nit was really good about telling\nme exactly where the error is.\n\n574\n00:26:17.170 --> 00:26:20.237\nYou'll see that this one is not so\ngood about that.\n\n575\n00:26:20.237 --> 00:26:24.416\nThat when I run it, I get an error and\nit's telling me I've got a syntax error\n\n576\n00:26:24.416 --> 00:26:27.310\nand it's telling me line\n6 near the retry command.\n\n577\n00:26:27.310 --> 00:26:28.007\nSo, it gets me close.\n\n578\n00:26:28.007 --> 00:26:30.450\n&gt;&gt; Pretty, specific there,\nor at least helps.\n\n579\n00:26:30.450 --> 00:26:32.070\nAnd so now I can look in and\nI can find the retry.\n\n580\n00:26:32.070 --> 00:26:34.840\nIt's telling me somewhere the retry,\nI mean right here.\n\n581\n00:26:34.840 --> 00:26:38.300\nWell, I can spot it and hopefully see\nthat I'm just missing my semi colon.\n\n582\n00:26:38.300 --> 00:26:40.880\n&gt;&gt; Now, Don, you mentioned\nthat anything after that semi\n\n583\n00:26:40.880 --> 00:26:44.380\ncolon is just basically for notes,\nany kind of notations there.\n\n584\n00:26:44.380 --> 00:26:47.195\nIs that the only place where we\ncan add the semicolon notes or\n\n585\n00:26:47.195 --> 00:26:48.949\nanywhere throughout the document?\n\n586\n00:26:48.949 --> 00:26:53.384\n&gt;&gt; Where some people who are more\nparticular than I'm, we are coming at\n\n587\n00:26:53.384 --> 00:26:58.198\nthe end of every DNS record, so that we\ncan add a little bit at the end without\n\n588\n00:26:58.198 --> 00:27:03.923\njust say like creatin 12/9/16, or whatever\n[INAUDIBLE] they got a little node.\n\n589\n00:27:03.923 --> 00:27:05.130\n&gt;&gt; [INAUDIBLE] Who created it.\n\n590\n00:27:05.130 --> 00:27:06.710\nThey put all sorts of information.\n\n591\n00:27:06.710 --> 00:27:09.460\nYou can do that just about\nanywhere inside of here.\n\n592\n00:27:09.460 --> 00:27:11.420\nAnd you even do individual lines.\n\n593\n00:27:11.420 --> 00:27:17.730\nSo, I might come in and\nsay something like NAME-SERVERS, right?\n\n594\n00:27:17.730 --> 00:27:20.760\nSo just try to create some kind of\nnotation so I can spot it easy.\n\n595\n00:27:20.760 --> 00:27:22.143\nYou can pretty it up.\n\n596\n00:27:22.143 --> 00:27:24.480\nIf you wanna go all crazy ask style, yeah.\n\n597\n00:27:24.480 --> 00:27:25.760\n&gt;&gt; [LAUGH]\n&gt;&gt; Just remember that\n\n598\n00:27:25.760 --> 00:27:28.780\nthe more junk in that file,\nthe bigger the file gets.\n\n599\n00:27:28.780 --> 00:27:30.358\nAnd that does impact\nyour application time.\n\n600\n00:27:30.358 --> 00:27:32.230\n&gt;&gt; But it's pretty small.\n\n601\n00:27:32.230 --> 00:27:35.310\nAll right, I know I'm running out of\ntime but I've got one last thing to do.\n\n602\n00:27:35.310 --> 00:27:38.240\nI ran that check command and\nit checked the zone file and\n\n603\n00:27:38.240 --> 00:27:41.640\ntold me it was okay,\nbut, I'm not done yet.\n\n604\n00:27:41.640 --> 00:27:46.260\nIt's still not working because I need\nto tell bind about the new zone.\n\n605\n00:27:46.260 --> 00:27:53.800\nAnd so, the way we do that,\nis by going into that /etc/named.comfile.\n\n606\n00:27:53.800 --> 00:27:59.440\nSo I'm gonna jump into that file And\nat the very bottom of this file,\n\n607\n00:27:59.440 --> 00:28:04.930\nthere we go,\njust try to get page down something else.\n\n608\n00:28:04.930 --> 00:28:09.300\nDown at the bottom,\nyou'll see where you can define zones, and\n\n609\n00:28:09.300 --> 00:28:12.380\nwe need to tell it about\nthe zone we just made.\n\n610\n00:28:12.380 --> 00:28:16.010\nAnd so, look for the part, usually\nthe very last thing in this includes,\n\n611\n00:28:16.010 --> 00:28:19.210\nI normally go right above the includes And\n\n612\n00:28:19.210 --> 00:28:22.640\nright above there I'm just gonna add that\nzone in so that it knows to have it, so\n\n613\n00:28:22.640 --> 00:28:25.080\nit knows that it's there and\nit's ready to rock.\n\n614\n00:28:25.080 --> 00:28:31.917\nSo I'm gonna punch that in I'm\njust gonna say zone lab.itpro.tv.\n\n615\n00:28:31.917 --> 00:28:33.760\nSo that's the zone that I'm actually.\n\n616\n00:28:33.760 --> 00:28:37.210\nHang on, I don't need the dot here,\nlab.itpro.tv.\n\n617\n00:28:37.210 --> 00:28:40.950\nIt's an Internet class zone,\nso I need to tell it that.\n\n618\n00:28:40.950 --> 00:28:45.790\nAnd then I need to tell it\nthat the type is master.\n\n619\n00:28:45.790 --> 00:28:48.380\nI am the authoritative server for\nthe zone.\n\n620\n00:28:48.380 --> 00:28:50.680\nI'm not a replica,\nI'm the one who controls it.\n\n621\n00:28:50.680 --> 00:28:52.870\nSo I'm gonna set that one as master.\n\n622\n00:28:52.870 --> 00:28:54.940\nAnd then I need to tell it the file.\n\n623\n00:28:54.940 --> 00:28:56.830\nWhere is it gonna find the zone?\n\n624\n00:28:56.830 --> 00:28:58.440\nAnd this is why the file\nname didn't matter.\n\n625\n00:28:58.440 --> 00:29:02.360\nI could call it whatever I wanted, because\nI'm gonna type the file name right here.\n\n626\n00:29:02.360 --> 00:29:06.040\nNow, as long as you're putting\nthe zone files in \\var\\named,\n\n627\n00:29:06.040 --> 00:29:08.340\nthat's where it looks by default.\n\n628\n00:29:08.340 --> 00:29:13.340\nSo you can just type the file\nname which mine was lab dot itpro\n\n629\n00:29:13.340 --> 00:29:16.414\ndot tv dot dns\n&gt;&gt; You probably want to keep it kind of\n\n630\n00:29:16.414 --> 00:29:19.484\nlogical, not anything like\nHarry Potter wizardry.\n\n631\n00:29:19.484 --> 00:29:21.899\n&gt;&gt; If I called it Bob.txt,\nI have to remember that, and\n\n632\n00:29:21.899 --> 00:29:23.201\nI'm not going to remember.\n\n633\n00:29:23.201 --> 00:29:26.272\nSo, I've seen people do Simpsons\ncharacters and dumb things like that,\n\n634\n00:29:26.272 --> 00:29:29.290\nbut if you just make it the domain name,\nit's easy, I can reference it,\n\n635\n00:29:29.290 --> 00:29:31.392\nit already knows to look\nin slash bar slash name d.\n\n636\n00:29:31.392 --> 00:29:35.840\nIf I move them anywhere else I'm gonna\nneed to put the full path in there.\n\n637\n00:29:35.840 --> 00:29:37.505\nBut if I just leave it that way\nthey'll know where to look,\n\n638\n00:29:37.505 --> 00:29:39.000\nits gonna find what it wants.\n\n639\n00:29:39.000 --> 00:29:42.350\nI need to do a semicolon to end that out,\nwhich I'm really guilty of\n\n640\n00:29:42.350 --> 00:29:46.680\nforgetting on many occasions and then I'll\ndo squiggly bracket to close this one, and\n\n641\n00:29:46.680 --> 00:29:48.740\none more semicolon to end that record.\n\n642\n00:29:48.740 --> 00:29:53.520\nThat right there is what's gonna\ntell bind that this zone exists.\n\n643\n00:29:53.520 --> 00:29:56.028\nAnd as long as I got my syntax right,\n\n644\n00:29:56.028 --> 00:30:01.312\nI should be able to run named-checkconf,\nand I should get no errors back.\n\n645\n00:30:01.312 --> 00:30:03.140\nThat means I didn't screw up my line.\n\n646\n00:30:03.140 --> 00:30:09.000\nAnd now, if I just do a systemctl\nrestart named.service,\n\n647\n00:30:09.000 --> 00:30:13.090\nit's gonna see that zone file,\nload it, And now it's ready to work.\n\n648\n00:30:13.090 --> 00:30:14.170\nNow it's up and going.\n\n649\n00:30:14.170 --> 00:30:19.430\nI should be able to do an NS lookup,\nswitch to me as the server.\n\n650\n00:30:19.430 --> 00:30:25.460\nAnd I should be able to look up\nsomething like www.lab.itpro.tv.\n\n651\n00:30:25.460 --> 00:30:30.940\nAnd I get web server 01,\nwhich gives me 10.0.222.100.\n\n652\n00:30:30.940 --> 00:30:32.943\nAnd 99,\nthe two different addresses that I had.\n\n653\n00:30:32.943 --> 00:30:38.244\nSo I get those back if I do\nwebserver01.lab.itpro.tv.\n\n654\n00:30:38.244 --> 00:30:39.970\nI get those two addresses back.\n\n655\n00:30:39.970 --> 00:30:44.815\nIf I set my type to four A and\nI do that same look up,\n\n656\n00:30:44.815 --> 00:30:48.491\nwebserver01.lab.itpro.tv.\n\n657\n00:30:48.491 --> 00:30:49.303\n&gt;&gt; Look at that, IPv6.\n\n658\n00:30:49.303 --> 00:30:50.630\n&gt;&gt; I get the IPv6.\n\n659\n00:30:50.630 --> 00:30:53.340\nSo it's all working,\nthe zone is functional.\n\n660\n00:30:53.340 --> 00:30:54.340\nAnd we're in business.\n\n661\n00:30:54.340 --> 00:30:57.140\n&gt;&gt; Pretty cool, I think that's about\nit for this particular episode.\n\n662\n00:30:57.140 --> 00:31:00.350\nDon, you were able to go ahead and\nshow us how to create that zone,\n\n663\n00:31:00.350 --> 00:31:02.300\ncreate our resource records.\n\n664\n00:31:02.300 --> 00:31:04.325\nBut let's go ahead and\nhold off to go ahead and\n\n665\n00:31:04.325 --> 00:31:06.306\ncreate the [LAUGH]\nThe reverse lookup zones.\n\n666\n00:31:06.306 --> 00:31:07.865\n&gt;&gt; The reverse lookup zones, yeah.\n\n667\n00:31:07.865 --> 00:31:09.535\nSo thank you guys so much for tuning in.\n\n668\n00:31:09.535 --> 00:31:12.734\nWe do have more information headed your\nway so stay tuned, get comfortable.\n\n669\n00:31:12.734 --> 00:31:15.641\nI'm gonna go ahead and\nsign off as your host, Cherokee Boose.\n\n670\n00:31:15.641 --> 00:31:16.483\n&gt;&gt; And I'm Don Pezet.\n\n671\n00:31:16.483 --> 00:31:19.841\n&gt;&gt; See you next time here at ITProTV.\n\n672\n00:31:19.841 --> 00:31:25.792\n[MUSIC]\n\n673\n00:31:25.792 --> 00:31:29.423\n&gt;&gt; Thank you for watching ITPROV.TV.\n\n",
          "vimeoId": "195980831"
        },
        {
          "description": "This episode is a continuation of learning how to configure zones and records. In the previous episodes you saw how to create forward lookup zones and here you will learn how to create a reverse lookup zone.",
          "length": "1248",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-8-2-2-configuring_zones_and-records_pt2-120816-PGM.00_20_35_01.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-8-2-2-configuring_zones_and-records_pt2-120816-PGM.00_20_35_01.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-8-2-2-configuring_zones_and-records_pt2-120816-PGM.00_20_35_01.Still001-sm.jpg",
          "title": "Configuring Zones and Records Part 2",
          "transcript": "WEBVTT\n\n1\n00:00:00.008 --> 00:00:08.438\nWelcome to ITPRO.TV, I'm your host\n&gt;&gt; [CROSSTALK].\n\n2\n00:00:08.438 --> 00:00:09.296\n&gt;&gt; You're watching ITPRO.TV.\n\n3\n00:00:09.296 --> 00:00:14.730\n&gt;&gt; Welcome to another\nDNS Tech Skill shows.\n\n4\n00:00:14.730 --> 00:00:16.980\nI'm your host, Cherokee Boose.\n\n5\n00:00:16.980 --> 00:00:20.540\nIn the last episode we were able to go\nahead and create a forward lookup zone and\n\n6\n00:00:20.540 --> 00:00:22.830\nadd some of those resource records.\n\n7\n00:00:22.830 --> 00:00:26.450\nWe ran out of time, so here we have\nDon Pezet in studio to go ahead and\n\n8\n00:00:26.450 --> 00:00:29.490\nhelp us develop our reverse lookup zones.\n\n9\n00:00:29.490 --> 00:00:31.140\nSo let's go ahead and\nget started with that.\n\n10\n00:00:31.140 --> 00:00:34.320\nYeah, the four look ups that we created in\nthe last episode was really just kind of\n\n11\n00:00:34.320 --> 00:00:35.310\nhalf the solution.\n\n12\n00:00:35.310 --> 00:00:36.470\nWhen you're doing internal DNS.\n\n13\n00:00:36.470 --> 00:00:39.010\nWhen you're doing external DNS,\nmaybe your ISP's\n\n14\n00:00:39.010 --> 00:00:42.290\ntaking care of your reverse look ups or\nwhatever and it's just not your problem.\n\n15\n00:00:42.290 --> 00:00:43.870\nLet somebody else deal with it.\n\n16\n00:00:43.870 --> 00:00:47.050\nBut if it's internal zones then\nyou're going to need reverse look up\n\n17\n00:00:47.050 --> 00:00:48.180\nzones created.\n\n18\n00:00:48.180 --> 00:00:51.470\nFortunately, it's not that much\ndifferent than what we've just created.\n\n19\n00:00:51.470 --> 00:00:55.850\nAnd even better, we can just copy our old\nfiles and save a heck of a lot of time,\n\n20\n00:00:55.850 --> 00:00:58.420\nbecause boy were there a lot of spots\nwhere we could have made mistakes.\n\n21\n00:00:58.420 --> 00:01:01.500\nSo that's where I'm gonna kinda pick up\nand show you guys how I like to do this\n\n22\n00:01:01.500 --> 00:01:04.951\nin the real world,\nwhich is the easiest way possible, so.\n\n23\n00:01:04.951 --> 00:01:06.037\n[LAUGH]\n&gt;&gt; [LAUGH].\n\n24\n00:01:06.037 --> 00:01:09.597\n&gt;&gt; All right, so what I like to do,\nif this is your very first reverse look-up\n\n25\n00:01:09.597 --> 00:01:13.170\nzone, the zone has the same requirements\nthat a forward look-up zone has.\n\n26\n00:01:13.170 --> 00:01:18.010\nI've gotta have a time to live, a start\nof authority, and some name servers.\n\n27\n00:01:18.010 --> 00:01:22.940\nThat's kind of a given, so I can just\ncopy all of that out of the forward\n\n28\n00:01:22.940 --> 00:01:26.280\nlookup zone that I just made, and move\nit right into the reverse lookup zone.\n\n29\n00:01:26.280 --> 00:01:30.450\nAnd then, I need to create PTR records,\nlots of PTR records,\n\n30\n00:01:30.450 --> 00:01:33.730\nthat map not names to IPs, but\nthe other way around, IPs to names.\n\n31\n00:01:33.730 --> 00:01:38.000\nWell, I might not have a list I kind\nof do have a list, though, right?\n\n32\n00:01:38.000 --> 00:01:38.980\nI've gotta whole zone right here.\n\n33\n00:01:38.980 --> 00:01:40.160\nIf I just-\n&gt;&gt; Take what you had from before and\n\n34\n00:01:40.160 --> 00:01:40.770\njust reverse it.\n\n35\n00:01:40.770 --> 00:01:42.370\n[LAUGH]\n&gt;&gt; Exactly, If I just copy it,\n\n36\n00:01:42.370 --> 00:01:43.380\nboy it saves a ton of time.\n\n37\n00:01:43.380 --> 00:01:44.840\nSo that's how I usually do it.\n\n38\n00:01:44.840 --> 00:01:47.390\nSo that's exactly what I'm gonna do.\n\n39\n00:01:47.390 --> 00:01:51.210\nI'm here in my server, and\nI've elevated my privileges, right?\n\n40\n00:01:51.210 --> 00:01:54.460\nSo I'm running as root, which again,\nyou can, you can do Sudu for\n\n41\n00:01:54.460 --> 00:01:57.340\nevery single command on that to do,\nor you can just use SU to\n\n42\n00:01:57.340 --> 00:02:01.300\nelevate your privileges, basically logging\nin as root, and then perform all of this.\n\n43\n00:02:01.300 --> 00:02:03.820\nBut what I'm going to do,\nis going to do slash var, slash name D.\n\n44\n00:02:04.890 --> 00:02:07.520\nAnd in there, I'm going to find that lab,\n\n45\n00:02:07.520 --> 00:02:11.590\nthat ITPRO.TV.dns file that we\ncreated in the last episode.\n\n46\n00:02:11.590 --> 00:02:13.890\nAnd I'm just going to copy that.\n\n47\n00:02:13.890 --> 00:02:15.290\nAnd I'm going to copy it\n\n48\n00:02:15.290 --> 00:02:17.170\nto a new file that's going to\nbe the reverse lookup zone.\n\n49\n00:02:17.170 --> 00:02:20.410\nNow again the file name doesn't matter,\nyou can call it whatever the heck\n\n50\n00:02:20.410 --> 00:02:22.760\nyou want, but\nI've worked with DNS a long time and\n\n51\n00:02:22.760 --> 00:02:26.590\nI've gotten in the habit of following\nthe official naming convention for reverse\n\n52\n00:02:26.590 --> 00:02:32.910\nlookup zones which is the subnet basically\nwritten backwards in the old ARPA format.\n\n53\n00:02:32.910 --> 00:02:34.870\nSo if I'm creating one for 10.0,\n\n54\n00:02:34.870 --> 00:02:38.210\nwell here in the office,\nwe've got 10.0 as a /16 network.\n\n55\n00:02:38.210 --> 00:02:44.370\nBut if I want to do 10.0.222,\nwhich is what all of my stuff falls in,\n\n56\n00:02:44.370 --> 00:02:47.500\nI would come in and\nsay 222.0.10, I'm reversing it.\n\n57\n00:02:47.500 --> 00:02:52.861\nSo if you had 192.168.0,\none of the really common ones,\n\n58\n00:02:52.861 --> 00:02:58.590\nyou'd do 0.168.192,\nit's written backwards.\n\n59\n00:02:58.590 --> 00:03:05.470\nAnd then after that is in-addr which\nshows that it's an Internet address,\n\n60\n00:03:05.470 --> 00:03:10.490\ndot orpa because this is part of\nthe initial development project that\n\n61\n00:03:10.490 --> 00:03:15.640\ncreated the naming structure, and then\ndot dns, I just cuz that's what I like.\n\n62\n00:03:15.640 --> 00:03:17.330\nSo it is just a text file.\n\n63\n00:03:17.330 --> 00:03:21.770\nI am just copying the four look up\nzones like it is, and I'm naming it,\n\n64\n00:03:21.770 --> 00:03:24.060\nthe way that a reverse look up zone\nwould be, I don't have to do that.\n\n65\n00:03:24.060 --> 00:03:26.120\nI could call it Bob.text but\nthis is to help me remember it.\n\n66\n00:03:26.120 --> 00:03:28.830\n&gt;&gt; Yeah, I think it's good practice to go\nahead and get familiar with that syntax,\n\n67\n00:03:28.830 --> 00:03:32.963\nbecause I can tell you I've seen questions\nlike that a couple times on exams, so.\n\n68\n00:03:32.963 --> 00:03:35.110\n[LAUGH]\n&gt;&gt; Yeah, it shows up on exams and\n\n69\n00:03:35.110 --> 00:03:38.680\nthink about let's say that I've been\nworking on a network for ten years and\n\n70\n00:03:38.680 --> 00:03:43.050\nI retire and then Cherokee, you come\nin and take over my position, right.\n\n71\n00:03:43.050 --> 00:03:44.910\nYou sit down and\nyou start looking at these zone files,\n\n72\n00:03:44.910 --> 00:03:46.110\nhow do you know what's what?\n\n73\n00:03:46.110 --> 00:03:46.670\n&gt;&gt; Yeah.\n[LAUGH]\n\n74\n00:03:46.670 --> 00:03:48.080\n&gt;&gt; But if you follow the proper naming\n\n75\n00:03:48.080 --> 00:03:49.130\nconvention, you know exactly what it is.\n\n76\n00:03:49.130 --> 00:03:52.120\n&gt;&gt; I've actually entered into\nan environment where the person was very\n\n77\n00:03:52.120 --> 00:03:55.330\nfond of different types of dragons.\n\n78\n00:03:55.330 --> 00:03:59.000\nI'm not up on my dragon names, I guess.\n\n79\n00:03:59.000 --> 00:04:00.020\nI'm not that cool.\n\n80\n00:04:00.020 --> 00:04:01.910\nSo it was a little difficult sometimes.\n\n81\n00:04:01.910 --> 00:04:03.050\n&gt;&gt; Couldn't they just have\n\n82\n00:04:03.050 --> 00:04:05.760\ncolors they have different,\n&gt;&gt; I don't know,\n\n83\n00:04:05.760 --> 00:04:09.400\nsomeone told me they were names of\ndragons, I don't know from what.\n\n84\n00:04:09.400 --> 00:04:10.510\nBut, yeah.\n&gt;&gt; All right,\n\n85\n00:04:10.510 --> 00:04:11.990\napparently I'm not up on that one either.\n\n86\n00:04:11.990 --> 00:04:14.099\nSo there's a naming convention\nthat's gonna break down right there.\n\n87\n00:04:14.099 --> 00:04:16.010\n&gt;&gt; Yes.\nSo if we follow the standards,\n\n88\n00:04:16.010 --> 00:04:17.210\nyou're always covered.\n\n89\n00:04:17.210 --> 00:04:20.070\nIt's not exactly user-friendly,\nbut you're covered.\n\n90\n00:04:20.070 --> 00:04:22.740\nSo now that I've got that,\nit's not in the right format,\n\n91\n00:04:22.740 --> 00:04:24.910\nit's a forward lookup zone,\nso I need to edit that.\n\n92\n00:04:24.910 --> 00:04:26.650\nSo I'm gonna get in here.\n\n93\n00:04:26.650 --> 00:04:28.010\n&gt;&gt; And start to work with that.\n\n94\n00:04:28.010 --> 00:04:33.500\nNow, I need a time to live, I need a start\nof authority, and I need name servers.\n\n95\n00:04:33.500 --> 00:04:37.430\nAnd if this is an internal zone,\nthe odds are all of this is identical.\n\n96\n00:04:37.430 --> 00:04:39.400\nThat is the same servers.\n\n97\n00:04:39.400 --> 00:04:41.210\nIf this is a public zone,\n\n98\n00:04:41.210 --> 00:04:45.290\none that's out there on the Internet, you\nlikely have the forward look-up zone, and\n\n99\n00:04:45.290 --> 00:04:49.660\nyour ISP controls the reverse look-up,\nor whoever actually owns the IP address.\n\n100\n00:04:49.660 --> 00:04:51.960\nBut if you own the IP addresses yourself,\n\n101\n00:04:51.960 --> 00:04:54.990\nif you have a BGP autonomous system\nthen you're responsible for both.\n\n102\n00:04:54.990 --> 00:04:57.130\nAnd even then, you're probably\ngonna use the same name servers,\n\n103\n00:04:57.130 --> 00:04:58.530\nso that makes it easy.\n\n104\n00:04:58.530 --> 00:05:01.680\nThe first three sets of data here,\nI'm not gonna edit.\n\n105\n00:05:01.680 --> 00:05:05.250\nI'm just gonna leave them alone,\nright, so all that stays the same.\n\n106\n00:05:05.250 --> 00:05:09.040\nAnd then after that,\nI get to all of my host records.\n\n107\n00:05:09.040 --> 00:05:10.670\nAnd that's what's going to change.\n\n108\n00:05:10.670 --> 00:05:13.600\nNow I might be tempted to jump in here and\ndelete these, but\n\n109\n00:05:13.600 --> 00:05:17.450\nI'm going to leave them right here in\nthis green for a few moments, because\n\n110\n00:05:17.450 --> 00:05:22.180\nI need to create reverse lookup records,\nwhich means I need to map IP to name.\n\n111\n00:05:22.180 --> 00:05:25.290\nWell I just happen to\nhave all the names and\n\n112\n00:05:25.290 --> 00:05:27.050\nIPs right here on\nthe screen in front of me.\n\n113\n00:05:27.050 --> 00:05:31.250\nSo I can just run down this list and\nmap these things really easy.\n\n114\n00:05:31.250 --> 00:05:33.810\nIt makes life a lot more simple.\n\n115\n00:05:33.810 --> 00:05:37.000\nNow on a reverse lookup record,\nit's kind of like these names up here.\n\n116\n00:05:37.000 --> 00:05:37.930\nI did DNS1.\n\n117\n00:05:37.930 --> 00:05:42.690\nAnd then it knew that it\nwas DNS1.lab.ITpro.TV.\n\n118\n00:05:42.690 --> 00:05:45.830\nBecause I'm in the lab\nthat IT Pro.TV owns.\n\n119\n00:05:45.830 --> 00:05:50.851\nWell here, it knows that I'm in the,\nthe 0.222.10 reversale.\n\n120\n00:05:50.851 --> 00:05:53.230\nZone, the 10.0.222 network.\n\n121\n00:05:53.230 --> 00:05:57.470\nSo it knows that I'm in that network.\n\n122\n00:05:57.470 --> 00:06:01.980\nSo all I have to put is\nthe last little octet.\n\n123\n00:06:01.980 --> 00:06:04.350\nAnd so I can come in here and\nI can say, 101 and\n\n124\n00:06:04.350 --> 00:06:09.270\nI can specify that it's, I don't have\nto do the extra tab on this one cuz no,\n\n125\n00:06:09.270 --> 00:06:11.220\nno octets can be more than three digits.\n\n126\n00:06:11.220 --> 00:06:14.720\nSo I could say 101, and then IN,\ncuz it's Internet class.\n\n127\n00:06:14.720 --> 00:06:18.840\nAnd then it's not an a record,\nit's a PTR, a pointer record.\n\n128\n00:06:20.060 --> 00:06:22.900\nAnd then I can point to\nthe name of that system.\n\n129\n00:06:22.900 --> 00:06:26.210\nNow it doesn't know that\nI'm in lab.itpro.tv.\n\n130\n00:06:26.210 --> 00:06:31.740\nSo I do have to tell that it hey,\n101 is dns1.lab.itpro.tv.\n\n131\n00:06:31.740 --> 00:06:33.170\nAnd it's got it.\n\n132\n00:06:33.170 --> 00:06:37.430\nAnd now I just follow that same\nprocess for each of the other ones.\n\n133\n00:06:37.430 --> 00:06:43.460\nAnd I can just read it right off the top\nof my screen, because it's right there.\n\n134\n00:06:43.460 --> 00:06:45.980\nIn fact, I can probably save a heck\nof a lot of time if I just copy and\n\n135\n00:06:45.980 --> 00:06:49.110\npaste this cuz I've got\na bunch of other values.\n\n136\n00:06:49.110 --> 00:06:53.710\nI even have some Servers that\nhave more than one entry, right?\n\n137\n00:06:53.710 --> 00:06:55.480\nSo let's see, two, three, four, five.\n\n138\n00:06:55.480 --> 00:06:57.170\nWe've got five more to add in,\nso I'll just.\n\n139\n00:06:57.170 --> 00:06:58.530\n&gt;&gt; So would you go through and\n\n140\n00:06:58.530 --> 00:07:02.560\nactually delete those previously\nlines as you retyped them, or?\n\n141\n00:07:02.560 --> 00:07:05.500\n&gt;&gt; Here they're all fitting on my\nscreen at once so I'm not doing it.\n\n142\n00:07:05.500 --> 00:07:08.460\nBut in real life, yeah, if it was way\nmore than would fit on the screen,\n\n143\n00:07:08.460 --> 00:07:12.390\nor a lot of times what I'll do is if\nyou've tab separated them like this,\n\n144\n00:07:12.390 --> 00:07:15.550\nI'll import them into Microsoft Excel or\nspreadsheet software.\n\n145\n00:07:15.550 --> 00:07:18.110\nCuz then you can go in there and\njust rearrange th columns and\n\n146\n00:07:18.110 --> 00:07:19.860\nget it exactly the way you want.\n\n147\n00:07:19.860 --> 00:07:22.185\nI use Excel to cheat with\ndata entry all the time.\n\n148\n00:07:22.185 --> 00:07:24.220\n&gt;&gt; [LAUGH]\n&gt;&gt; As a network admin,\n\n149\n00:07:24.220 --> 00:07:30.170\nyou'd be surprised how useful Excel or\nGoogle Sheets, any of the different\n\n150\n00:07:30.170 --> 00:07:34.110\nspreadsheet applications can really\nhelp for rearranging files like these.\n\n151\n00:07:34.110 --> 00:07:36.150\nSo I'm just gonna come through here and\ncorrect these.\n\n152\n00:07:36.150 --> 00:07:37.070\nI've got 101, 102.\n\n153\n00:07:37.070 --> 00:07:37.570\nWe've got 100.\n\n154\n00:07:37.570 --> 00:07:38.350\nWe've got 99.\n\n155\n00:07:38.350 --> 00:07:45.040\nI'm just gonna break my\nformatting just a hair.\n\n156\n00:07:45.040 --> 00:07:46.350\nThere we go.\n\n157\n00:07:46.350 --> 00:07:47.030\nWe've got 103, 104, 105.\n\n158\n00:07:47.030 --> 00:07:51.440\nAnd again, I'm just being a little\nlazy here because I don't want to,\n\n159\n00:07:51.440 --> 00:07:53.230\noops, that was not.\n\n160\n00:07:53.230 --> 00:07:54.220\nI've gotta remember I'm in vine.\n\n161\n00:07:54.220 --> 00:07:55.665\nIt doesn't pay attention to the mouse.\n\n162\n00:07:55.665 --> 00:07:58.033\nSo, I just need to get\neach of these entered in.\n\n163\n00:07:58.033 --> 00:08:01.403\nNow, the web server 01, it's got dot 100.\n\n164\n00:08:01.403 --> 00:08:03.269\nIt also has dot 99.\n\n165\n00:08:03.269 --> 00:08:04.006\nThat's okay.\n\n166\n00:08:04.006 --> 00:08:06.736\nIt's two different IPs so\nthey can point to the same name.\n\n167\n00:08:06.736 --> 00:08:11.551\nJust like up here in a forward zone\nI can have one name point to two IPs,\n\n168\n00:08:11.551 --> 00:08:15.020\ndown here I can have two\nIPs point to one name.\n\n169\n00:08:15.020 --> 00:08:18.190\nBut because the name is at the end,\nI can't just do that leave it blank trick.\n\n170\n00:08:18.190 --> 00:08:19.400\nThat doesn't work.\n\n171\n00:08:19.400 --> 00:08:22.380\nAnd you can't have one IP\npoint to more than one name so\n\n172\n00:08:22.380 --> 00:08:23.500\nyou can't do that trick there, either.\n\n173\n00:08:23.500 --> 00:08:26.090\nSo I have to do two separate entries for\nit.\n\n174\n00:08:26.090 --> 00:08:30.281\nAnd then I get down to 103, 104, and 105,\n\n175\n00:08:30.281 --> 00:08:34.386\nwhich are all male one,\nmale two, and male three.\n\n176\n00:08:34.386 --> 00:08:36.264\n&gt;&gt; I do see a comment in the chat.\n\n177\n00:08:36.264 --> 00:08:37.430\nOne of our viewers said that\nthey use Terminator names.\n\n178\n00:08:39.540 --> 00:08:40.660\n&gt;&gt; Terminator names.\n\n179\n00:08:40.660 --> 00:08:42.800\nThere were only like four Terminators,\nright?\n\n180\n00:08:42.800 --> 00:08:44.060\nSo that's limited.\n\n181\n00:08:44.060 --> 00:08:45.100\n&gt;&gt; I don't know.\n\n182\n00:08:45.100 --> 00:08:51.218\n&gt;&gt; If you only have four records, it's a I\nused Teenage Mutant Ninja Turtle names.\n\n183\n00:08:51.218 --> 00:08:54.550\n&gt;&gt; [LAUGH]\n&gt;&gt; [LAUGH] Sadly, in production I've seen\n\n184\n00:08:54.550 --> 00:08:57.750\nSimpsons characters,\nI've seen Greek and Roman gods.\n\n185\n00:08:57.750 --> 00:09:01.120\nThat one was a mess cuz there's\na huge fight over whether the one was\n\n186\n00:09:01.120 --> 00:09:01.800\nRoman or Greek.\n\n187\n00:09:01.800 --> 00:09:02.970\nYeah, it's all sorts of crazy stuff.\n\n188\n00:09:02.970 --> 00:09:06.740\nBut anyhow,\nwe've got our pointer records right here.\n\n189\n00:09:06.740 --> 00:09:09.680\nJust kind of flipping things\naround from what we had up above.\n\n190\n00:09:09.680 --> 00:09:12.620\nNow I'm done with these guys up here and\nso I can come through and\n\n191\n00:09:12.620 --> 00:09:15.820\nI can just start deleting them out,\ncuz I don't need them anymore.\n\n192\n00:09:15.820 --> 00:09:20.890\nSo I'll just punch them out and\nthere we go.\n\n193\n00:09:20.890 --> 00:09:25.440\nNow I need to leave my\nname server records.\n\n194\n00:09:25.440 --> 00:09:27.550\nI need to leave my start of authority.\n\n195\n00:09:27.550 --> 00:09:28.750\nI need to leave my time to live.\n\n196\n00:09:28.750 --> 00:09:30.830\nYou've always got those three things.\n\n197\n00:09:30.830 --> 00:09:33.420\nBut then what we've got down here,\n\n198\n00:09:33.420 --> 00:09:37.960\nthis is all just my pointer records and\nthat's what I want.\n\n199\n00:09:37.960 --> 00:09:42.160\nSo we're good there and that should be\nabout it for this reverse look up zone.\n\n200\n00:09:42.160 --> 00:09:46.620\nI'm gonna go ahead and\njust save that one now and that's done,\n\n201\n00:09:46.620 --> 00:09:49.420\nand so now I'm good to go there, right.\n\n202\n00:09:49.420 --> 00:09:53.900\nNow at this point I can run\na check on that file if I want,\n\n203\n00:09:53.900 --> 00:09:55.520\nto just verify the syntax.\n\n204\n00:09:55.520 --> 00:09:58.120\nBecause I copy and pasted the other one,\nI know my syntax is right, so\n\n205\n00:09:58.120 --> 00:09:59.470\nI can probably skip that step.\n\n206\n00:09:59.470 --> 00:10:02.100\nBut if I try and\nrestart named and it crashes,\n\n207\n00:10:02.100 --> 00:10:04.560\nthen it's my own fault for not checking.\n\n208\n00:10:04.560 --> 00:10:06.220\nBut anyhow, we should be good there.\n\n209\n00:10:06.220 --> 00:10:12.550\nI am going to go ahead and\nedit /etc/named.conf,\n\n210\n00:10:12.550 --> 00:10:15.780\nbecause way down at\nthe bottom of this file,\n\n211\n00:10:15.780 --> 00:10:19.390\nright at the end of the last episode,\nI added in a zone record, right.\n\n212\n00:10:19.390 --> 00:10:20.880\nI need to add another one.\n\n213\n00:10:20.880 --> 00:10:24.174\nI need to add a zone for\n\n214\n00:10:24.174 --> 00:10:30.583\n222.0.10.in-addr.arpa and\n\n215\n00:10:30.583 --> 00:10:33.882\nget that punched in.\n\n216\n00:10:33.882 --> 00:10:37.568\nAnd I'd have to do that even if I\ndidn't name the filename right I have\n\n217\n00:10:37.568 --> 00:10:41.703\nto follow the reverse look up zone\nnaming structure here, so that's again,\n\n218\n00:10:41.703 --> 00:10:43.950\nwhere it makes sense to follow that name.\n\n219\n00:10:44.980 --> 00:10:47.490\n&gt;&gt; Now Don, if you had to go ahead and\nreboot the machine that was running this\n\n220\n00:10:47.490 --> 00:10:50.270\nservice, is there any extra\nstep you would need to take, or\n\n221\n00:10:50.270 --> 00:10:52.600\nis it gonna automatically initiate?\n\n222\n00:10:52.600 --> 00:10:56.165\n&gt;&gt; So, I think we already did it,\nif I remember.\n\n223\n00:10:56.165 --> 00:10:58.230\n[LAUGH] The episodes\nare starting to blend together.\n\n224\n00:10:58.230 --> 00:11:00.580\nWhen we install bind,\n\n225\n00:11:00.580 --> 00:11:06.520\nto get it started I ran system\nCTL start name d.service, right.\n\n226\n00:11:06.520 --> 00:11:08.760\nThen we run system CTL enable.\n\n227\n00:11:10.260 --> 00:11:14.820\nSystem CTLenablebind.service and\nour named.service, right.\n\n228\n00:11:14.820 --> 00:11:16.580\nAnd that's the one that make\nsure that it start a boot.\n\n229\n00:11:16.580 --> 00:11:19.841\nAnd that's what i did here cuz I'm on\na system de system which most systems\n\n230\n00:11:19.841 --> 00:11:20.588\nare these days.\n\n231\n00:11:20.588 --> 00:11:23.426\nIf you're still on a sysvinit system or\n\n232\n00:11:23.426 --> 00:11:27.898\nwhatever, you might need to do chkconfig,\ncheck config on.\n\n233\n00:11:27.898 --> 00:11:31.390\nI think it's chkconfig named on,\nto make sure that it starts at boot.\n\n234\n00:11:31.390 --> 00:11:33.590\nSo it is an actual little step.\n\n235\n00:11:33.590 --> 00:11:35.540\nI think I've already done it, but\nit doesn't hurt to do it again.\n\n236\n00:11:35.540 --> 00:11:37.530\nSo as soon as I get out of this file,\nI'll punch it in again.\n\n237\n00:11:37.530 --> 00:11:38.760\n&gt;&gt; Okay.\n\n238\n00:11:38.760 --> 00:11:40.405\n&gt;&gt; All right, so\nI'm telling it this zone file, and\n\n239\n00:11:40.405 --> 00:11:41.905\nthe rest of it's really\nbasically the same.\n\n240\n00:11:41.905 --> 00:11:44.120\nI'm gonna say that this is type master,\nright?\n\n241\n00:11:44.120 --> 00:11:46.800\nCuz I am authoritative for\nthis reverse lookup zone.\n\n242\n00:11:46.800 --> 00:11:50.540\nAnd then file, I'm gonna give it\nthat file name, which is whoops.\n\n243\n00:11:51.590 --> 00:11:54.200\nWhich I have to get right or\nit's not gonna work.\n\n244\n00:11:54.200 --> 00:11:55.800\nThat's kind of the tricky part here.\n\n245\n00:11:55.800 --> 00:11:57.240\n&gt;&gt; [LAUGH]\n&gt;&gt; You put the wrong data in and\n\n246\n00:11:57.240 --> 00:11:58.750\nit just doesn't work.\n\n247\n00:11:58.750 --> 00:12:00.510\nAnd I'll close that out.\n\n248\n00:12:00.510 --> 00:12:01.270\nThere we go.\n\n249\n00:12:01.270 --> 00:12:02.440\nAnd now it knows about that zone.\n\n250\n00:12:02.440 --> 00:12:06.390\nAnd so I add a reverse lookup zones the\nsame way that I add forward lookup zones.\n\n251\n00:12:06.390 --> 00:12:08.080\nThey just get added right in here.\n\n252\n00:12:08.080 --> 00:12:11.160\nIt's just that name that's a little\nbit different that's gonna support\n\n253\n00:12:11.160 --> 00:12:11.800\nthat reverse lookup.\n\n254\n00:12:11.800 --> 00:12:15.530\nAll right,\nnow let's check our bind config.\n\n255\n00:12:15.530 --> 00:12:18.610\nAnd actually I needed to do some checks\nhere anyway just to be on the safe side.\n\n256\n00:12:18.610 --> 00:12:20.470\nYou mentioned whether it's\ngonna start up or not, right?\n\n257\n00:12:20.470 --> 00:12:26.260\nSo I can do system ctl\nenable named.service.\n\n258\n00:12:26.260 --> 00:12:28.670\nOdds are,\nthere's only one target named named, so\n\n259\n00:12:28.670 --> 00:12:30.610\nyou could probably leave service off.\n\n260\n00:12:30.610 --> 00:12:33.240\nBut the proper way to do it is .service.\n\n261\n00:12:33.240 --> 00:12:35.800\nSo I'm just gonna make sure that\nit is set to start at boot time.\n\n262\n00:12:35.800 --> 00:12:38.510\nThe other thing is, I've been\nmessing around with a lot of files.\n\n263\n00:12:38.510 --> 00:12:40.630\nI've been messing around with named.conf,\n\n264\n00:12:40.630 --> 00:12:42.950\nI've been messing around with\nthese zone files that I made.\n\n265\n00:12:42.950 --> 00:12:46.127\nAnd it's possible that while\nmessing around with them,\n\n266\n00:12:46.127 --> 00:12:49.632\nI screwed up the file formations or\nI screwed up the ownership or\n\n267\n00:12:49.632 --> 00:12:53.490\nI screwed up the SE Linux context\nif you're running SE Linux.\n\n268\n00:12:53.490 --> 00:12:56.480\nSo I might have messed up\nmy file formations and\n\n269\n00:12:56.480 --> 00:12:58.870\nif I did I'm gonna need to reset those.\n\n270\n00:12:58.870 --> 00:13:01.360\nNow I'm pretty sure I didn't\nmess with them, right?\n\n271\n00:13:01.360 --> 00:13:02.800\nEverything should be fine.\n\n272\n00:13:02.800 --> 00:13:06.330\nBut when you're using sudo commands and\nmaybe you forgot to do it once and\n\n273\n00:13:06.330 --> 00:13:08.790\nyou did it another time and\nstuff starts to go kinda screwy,\n\n274\n00:13:08.790 --> 00:13:11.420\nit's a good idea to just go through and\nreset.\n\n275\n00:13:11.420 --> 00:13:12.470\nSo I'm gonna do a few things.\n\n276\n00:13:12.470 --> 00:13:15.150\nI think I showed this in another\nepisode but I'm gonna do it again.\n\n277\n00:13:15.150 --> 00:13:18.570\nI'm gonna make sure\nthe groups are properly set.\n\n278\n00:13:18.570 --> 00:13:23.420\nAnd I'm gonna basically check\nthat /var/named, all the files.\n\n279\n00:13:23.420 --> 00:13:28.260\nIf I make a file myself because I am root,\nit'll show as being owned by\n\n280\n00:13:28.260 --> 00:13:33.770\nroot the user and assigned to the group\nroot, which name D doesn't have access to.\n\n281\n00:13:33.770 --> 00:13:37.590\nSo I am making sure that even it is owned\nby a root the group will be named D so\n\n282\n00:13:37.590 --> 00:13:39.880\nthe bind will always have access to it.\n\n283\n00:13:39.880 --> 00:13:41.700\nThat dash R makes it recursive so\n\n284\n00:13:41.700 --> 00:13:44.470\nit's going to hit every file\ninside the slash var slash name D.\n\n285\n00:13:45.700 --> 00:13:47.560\nSo now I know name d will have the access.\n\n286\n00:13:47.560 --> 00:13:49.910\nOr bind will have\nthe access that it needs.\n\n287\n00:13:49.910 --> 00:13:53.790\nThen I can change the ownership\njust to be on the safe side.\n\n288\n00:13:53.790 --> 00:13:54.930\nI almost did a -v.\n\n289\n00:13:54.930 --> 00:13:58.430\nI usually do a -v so I can see\nevery single file as it gets set.\n\n290\n00:13:58.430 --> 00:13:59.870\nBut we don't really need that.\n\n291\n00:13:59.870 --> 00:14:05.880\nAnd basically, I'm going to do\nroot:named /etc/named.conf.\n\n292\n00:14:05.880 --> 00:14:10.080\nI'm just making sure that the\nconfiguration file is owned by root and\n\n293\n00:14:10.080 --> 00:14:12.280\nhas a group set to named.\n\n294\n00:14:12.280 --> 00:14:15.295\nAnd if I spell chown right, it will work.\n\n295\n00:14:15.295 --> 00:14:16.790\nSo let me fix that.\n\n296\n00:14:16.790 --> 00:14:17.670\nThere we go.\nAll right.\n\n297\n00:14:17.670 --> 00:14:19.220\nSo now I know that\nownership is right also.\n\n298\n00:14:19.220 --> 00:14:22.430\nAnd then the last thing is\nif I'm running SC Linux.\n\n299\n00:14:22.430 --> 00:14:26.770\nIf I'm running SELinux, the security\ncontext these files might have\n\n300\n00:14:26.770 --> 00:14:28.650\ngotten messed with while\nI was setting it up.\n\n301\n00:14:28.650 --> 00:14:30.350\nSo I'm gonna do a restore con.\n\n302\n00:14:30.350 --> 00:14:34.600\nThat'll restore the context of the files\nback to what their default should be.\n\n303\n00:14:34.600 --> 00:14:39.540\nAnd so I'm gonna do that for /var/named,\nI'm doing dash r so it's recursive.\n\n304\n00:14:39.540 --> 00:14:40.140\nIt's the whole thing.\n\n305\n00:14:40.140 --> 00:14:47.584\nAnd then I'll do the same thing for\n/etc/named.com.\n\n306\n00:14:47.584 --> 00:14:52.230\nSo that's just ensuring that if I did\nmess up anything it's now fixed, right?\n\n307\n00:14:52.230 --> 00:14:58.324\nAt this point I should be\nable to restart named.\n\n308\n00:14:58.324 --> 00:14:59.745\nI can type, I promise.\n\n309\n00:14:59.745 --> 00:15:01.569\n[LAUGH] There we go.\n\n310\n00:15:01.569 --> 00:15:02.960\nI should be able to restart it.\n\n311\n00:15:02.960 --> 00:15:06.120\nAnd if I get an error, like this,\nthat's not necessarily a good thing.\n\n312\n00:15:06.120 --> 00:15:08.400\nSo I must have a problem after all.\n\n313\n00:15:08.400 --> 00:15:11.410\nYou know I skipped doing the zone check,\nwhich I shouldn't have done.\n\n314\n00:15:11.410 --> 00:15:17.500\nSo if I do a named-checkzone, and I\n\n315\n00:15:17.500 --> 00:15:20.677\ntell it the zone that I'm wanting to check\n&gt;&gt; [CROSSTALK] file.\n\n316\n00:15:20.677 --> 00:15:23.167\nAnd we'll punch that in.\n\n317\n00:15:25.415 --> 00:15:27.591\nAll right, so\nthat's the zone I wanna check and\n\n318\n00:15:27.591 --> 00:15:30.130\nthen I need to specify the file, right?\n\n319\n00:15:30.130 --> 00:15:34.258\nSo I'll punch that one in\nwhich is /var/named/ and\n\n320\n00:15:34.258 --> 00:15:38.117\nnow we're gonna get two,\nit's gonna wrap on me.\n\n321\n00:15:38.117 --> 00:15:44.790\nAnd we'll punch that in There we go.\n\n322\n00:15:44.790 --> 00:15:48.760\nI can run the check on it and, well that's\ninteresting, I got that it's okay, so\n\n323\n00:15:48.760 --> 00:15:49.930\nI must not have messed that file up.\n\n324\n00:15:49.930 --> 00:15:51.880\nI must have messed up the actual config.\n\n325\n00:15:51.880 --> 00:15:56.412\nSo let me do a checkconf.\n\n326\n00:15:56.412 --> 00:15:58.382\nNow we got a mystery.\n\n327\n00:15:58.382 --> 00:16:03.753\nSo I tried to restart name d,\nsystemctl restart.\n\n328\n00:16:03.753 --> 00:16:07.518\nNamed.service and I got an error on it.\n\n329\n00:16:07.518 --> 00:16:11.820\nBut it's telling me all my syntax is\ncorrect so that's not a good thing.\n\n330\n00:16:11.820 --> 00:16:17.550\nBut it does tell you the command\nto run here, journalctl -xn.\n\n331\n00:16:17.550 --> 00:16:20.350\nWhich'll show us the latest\nerrors in the system.\n\n332\n00:16:20.350 --> 00:16:23.270\nAnd so I can look in here and\nI can see if I can find the problem.\n\n333\n00:16:23.270 --> 00:16:25.830\nSo we've got here where\nit gives me the failure.\n\n334\n00:16:25.830 --> 00:16:28.880\nAnd it gives me an extremely\ndetailed failure\n\n335\n00:16:28.880 --> 00:16:31.164\nwhich is really not telling\nme much of anything at all.\n\n336\n00:16:31.164 --> 00:16:34.255\n&gt;&gt; [LAUGH]\n&gt;&gt; It just says united named\n\n337\n00:16:34.255 --> 00:16:37.230\nnameD.service entered failure.\n\n338\n00:16:37.230 --> 00:16:38.120\nSo, yeah.\n\n339\n00:16:38.120 --> 00:16:40.760\nWe kind of figured that.\n\n340\n00:16:40.760 --> 00:16:44.120\nFailed to start the process,\nand as I look above,\n\n341\n00:16:44.120 --> 00:16:46.106\nyou'll see where it's\nstarting to load zones.\n\n342\n00:16:46.106 --> 00:16:54.840\nAnd right here, 222.0.10-in-addr.arpa/in\nnot loaded due to errors.\n\n343\n00:16:54.840 --> 00:17:00.950\nSo even though I ran the named\ncheckzone command it came back okay.\n\n344\n00:17:00.950 --> 00:17:03.680\nIt said that I was all right.\n\n345\n00:17:03.680 --> 00:17:04.708\n&gt;&gt; Okay.\n\n346\n00:17:04.708 --> 00:17:07.910\n&gt;&gt; But it's apparently not\nokay because it didn't work.\n\n347\n00:17:07.910 --> 00:17:09.117\nRight?\nSo I need to go in there and\n\n348\n00:17:09.117 --> 00:17:12.133\nfind out what I messed up and what I\ngot wrong and then we'll get it loaded.\n\n349\n00:17:12.133 --> 00:17:14.573\nSo the check tools are kind of nice but\n\n350\n00:17:14.573 --> 00:17:16.858\nthey're not\n&gt;&gt; Still leaves you to investigate\n\n351\n00:17:16.858 --> 00:17:17.431\non you're own.\n\n352\n00:17:17.431 --> 00:17:21.292\n&gt;&gt; Absolutely there is no substitute for\nknowing the right format for the file.\n\n353\n00:17:21.292 --> 00:17:21.800\nAll right.\n\n354\n00:17:21.800 --> 00:17:24.731\nSo if we parch through this real\nquick we should be able to find\n\n355\n00:17:24.731 --> 00:17:27.153\nerror hopefully better\nthan the check files did.\n\n356\n00:17:27.153 --> 00:17:30.140\nAnd looking down the line I'm not\nseeing a lot of great stuff here.\n\n357\n00:17:30.140 --> 00:17:34.210\nIt failed to start,\nthat didn't take a genius to figure out.\n\n358\n00:17:34.210 --> 00:17:35.453\nIt's showing me that\nthe service has failed.\n\n359\n00:17:35.453 --> 00:17:38.436\nSo I'm seeing a lot of\ndetailed information here.\n\n360\n00:17:38.436 --> 00:17:42.397\nYou can scroll to the right in the journal\ncommand to see what's off to the right of\n\n361\n00:17:42.397 --> 00:17:43.049\nthe screen.\n\n362\n00:17:43.049 --> 00:17:43.845\nAnd here's my error.\n\n363\n00:17:43.845 --> 00:17:50.980\nWe got a zone 222.0.10.in-addr.arpa/in\nnot loaded due to errors.\n\n364\n00:17:50.980 --> 00:17:51.487\nAll right.\n\n365\n00:17:51.487 --> 00:17:52.880\n&gt;&gt; Okay, obvious.\n\n366\n00:17:52.880 --> 00:17:54.690\n&gt;&gt; Okay, figured that out.\n\n367\n00:17:54.690 --> 00:17:57.380\nBut the next one, that's the one\nI'm looking for right there.\n\n368\n00:17:57.380 --> 00:18:00.170\nSo it's telling me that it was looking for\nthe zone.\n\n369\n00:18:00.170 --> 00:18:01.470\nFile Not Found.\n\n370\n00:18:01.470 --> 00:18:05.310\nSo I might have botched the filename or\nput a bad path in or whatever.\n\n371\n00:18:05.310 --> 00:18:06.720\nWe double checked all the permissions.\n\n372\n00:18:06.720 --> 00:18:09.740\nSo I know it's not a permissions problem\ncuz that can cause file not found also.\n\n373\n00:18:09.740 --> 00:18:11.320\nBut I know it's not that.\n\n374\n00:18:11.320 --> 00:18:13.020\nBut I probably just screwed it up.\n\n375\n00:18:13.020 --> 00:18:14.110\nThat happens.\n\n376\n00:18:14.110 --> 00:18:18.240\nSo let me look inside, var/named and I'm\ngonna make sure I got that filename right.\n\n377\n00:18:18.240 --> 00:18:22.720\nSo I'm gonna copy that filename so\nI know I've got it right.\n\n378\n00:18:22.720 --> 00:18:26.880\nAnd then I'm gonna edit /etc/named.conf.\n\n379\n00:18:26.880 --> 00:18:29.974\nAnd I'm gonna dive right down\nto the bottom of that file.\n\n380\n00:18:29.974 --> 00:18:35.954\nAnd I'm looking for\nthe line where I added in the zone.\n\n381\n00:18:35.954 --> 00:18:39.112\nSo here it is, and I've got the zone name.\n\n382\n00:18:39.112 --> 00:18:41.175\nIt didn't complain about the zone name,\nit complained about the filename.\n\n383\n00:18:41.175 --> 00:18:48.064\nThe filenames down here and\nI've got 222.0.10.in.addr.arpa.\n\n384\n00:18:48.064 --> 00:18:49.983\nAnd, well there's our problem.\n\n385\n00:18:49.983 --> 00:18:53.460\nThe file ends in .dns cuz\nthat's what I like to do.\n\n386\n00:18:53.460 --> 00:18:55.660\nI like to stick .dns on the end,\nand then I forgot.\n\n387\n00:18:55.660 --> 00:18:57.214\nBut I'm gonna delete all that.\n\n388\n00:18:57.214 --> 00:18:58.362\nAnd then just paste it.\n\n389\n00:18:58.362 --> 00:18:59.080\n&gt;&gt; Paste it?\n\n390\n00:18:59.080 --> 00:19:00.200\n&gt;&gt; Cuz then you know it's right.\n\n391\n00:19:00.200 --> 00:19:00.720\n&gt;&gt; All right.\n\n392\n00:19:00.720 --> 00:19:03.460\n&gt;&gt; But I left that .dns off,\nso that would be a problem.\n\n393\n00:19:03.460 --> 00:19:06.790\nAll right so if that's the biggest problem\nwe have that would explain why I got\n\n394\n00:19:06.790 --> 00:19:07.750\nerrors.\n\n395\n00:19:07.750 --> 00:19:08.858\nI was ready to blame.\n\n396\n00:19:08.858 --> 00:19:10.250\n&gt;&gt; And they weren't ready to or\n\n397\n00:19:10.250 --> 00:19:13.190\nthey weren't able to recognize them\nbecause it was just a naming convention.\n\n398\n00:19:13.190 --> 00:19:16.060\n&gt;&gt; I was ready to blame named-checkzone.\n\n399\n00:19:16.060 --> 00:19:16.560\n&gt;&gt; Or missing.\n\n400\n00:19:16.560 --> 00:19:19.860\n&gt;&gt; It checked the zone file I told it\nthe right file but this guy didn't.\n\n401\n00:19:19.860 --> 00:19:27.210\nSo let's go ahead and\nrestart named, there we go.\n\n402\n00:19:27.210 --> 00:19:30.410\nAnd now I should be able\nto fire up nslookup.\n\n403\n00:19:30.410 --> 00:19:33.940\nAnd I'll switch to myself as the server.\n\n404\n00:19:33.940 --> 00:19:36.440\nAnd I was doing forward lookups earlier,\nso\n\n405\n00:19:36.440 --> 00:19:41.920\nlike webserver01.lab.itpro.tv and\nI get it's IPs back.\n\n406\n00:19:41.920 --> 00:19:46.220\nI should now be able to do\nreverse lookups, so if I look for\n\n407\n00:19:46.220 --> 00:19:50.445\n10.0.22.101, I get that that's DNS one.\n\n408\n00:19:50.445 --> 00:19:55.296\nOr if I do 10.0.22.99,\nthat's web server one.\n\n409\n00:19:55.296 --> 00:19:58.740\nMy reverse lookup zones are now\nworking and we're in business.\n\n410\n00:19:58.740 --> 00:20:00.580\nSo, configuring the zone file,\n\n411\n00:20:00.580 --> 00:20:03.470\nnot all that much different\nthan the forward lookup zone.\n\n412\n00:20:03.470 --> 00:20:06.990\nAnd ultimately, the only challenge I had\nhere was typing in the right file name\n\n413\n00:20:06.990 --> 00:20:09.480\nwhich is simply my problem,\nnot necessarily the technology's.\n\n414\n00:20:09.480 --> 00:20:11.050\nSo, but that's basically it.\n\n415\n00:20:11.050 --> 00:20:13.310\n&gt;&gt; Perfect.\nSo, Don, you were able to go ahead,\n\n416\n00:20:13.310 --> 00:20:17.140\nin the previous episode, show us how\nto create our forward lookup zones.\n\n417\n00:20:17.140 --> 00:20:19.630\nWe see how to go ahead and\ncreate our reverse lookup zones.\n\n418\n00:20:19.630 --> 00:20:21.140\nI think replication is next.\n\n419\n00:20:21.140 --> 00:20:24.440\nSo thank you for being here today and\nthank you guys for tuning in.\n\n420\n00:20:24.440 --> 00:20:28.310\nBut don't go anywhere we have some\nreplication headed your way, stay tuned.\n\n421\n00:20:28.310 --> 00:20:32.850\nFor this episode I'm gonna go ahead and\nsign off as your host Cherokee Boose\n\n422\n00:20:32.850 --> 00:20:33.557\n&gt;&gt; And I'm Don Pezet\n\n423\n00:20:33.557 --> 00:20:36.221\n&gt;&gt; See you next time here at ITPRO.TV.\n\n424\n00:20:36.221 --> 00:20:42.850\n[MUSIC]\n\n425\n00:20:42.850 --> 00:20:45.852\n&gt;&gt; Thank you for watching ITPRO.TV.\n\n",
          "vimeoId": "196616151"
        },
        {
          "description": "In this episode, Wes and Don demonstrate replication of the DNS database. They show how to set up the master DNS server as well as setting up the slave DNS server to receive the DNS zone database.",
          "length": "1775",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-8-3-configuring_replication-121216-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-8-3-configuring_replication-121216-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-8-3-configuring_replication-121216-1-sm.jpg",
          "title": "Configuring Replication",
          "transcript": "WEBVTT\n\n1\n00:00:00.180 --> 00:00:03.122\nWelcome to ITProTV,\nI'm your host Don [CROSSTALK]\n\n2\n00:00:03.122 --> 00:00:05.342\n&gt;&gt; Coming at you live from San Francisco,\n\n3\n00:00:05.342 --> 00:00:06.628\nCalifornia [CROSSTALK]\n\n4\n00:00:06.628 --> 00:00:08.428\n[MUSIC]\n\n5\n00:00:08.428 --> 00:00:10.590\n&gt;&gt; You're watching ITProTV.\n\n6\n00:00:12.180 --> 00:00:14.910\nWelcome to another great\nepisode here of ITProTV.\n\n7\n00:00:14.910 --> 00:00:15.480\nI'm your host,\n\n8\n00:00:15.480 --> 00:00:19.670\nWes Bryan and in today's episode we're\ncontinuing through our series within DNS.\n\n9\n00:00:19.670 --> 00:00:22.570\nProbably one of the most important\nservices out there in the internet.\n\n10\n00:00:22.570 --> 00:00:24.920\nAnd joining us back in the studios\nis none other than Mr Don Pezet.\n\n11\n00:00:24.920 --> 00:00:25.540\nDon, how you doing, sir?\n\n12\n00:00:25.540 --> 00:00:27.200\n&gt;&gt; Hey, thanks for having me back, Wes.\n\n13\n00:00:27.200 --> 00:00:29.010\nExcited to jump back\ninto the world of BIND.\n\n14\n00:00:29.010 --> 00:00:33.880\nAnd in this episode we're gonna be taking\na look at setting up replication in BIND.\n\n15\n00:00:33.880 --> 00:00:37.350\nAnd the main reason is hey,\nwhat's better than one BIND server?\n\n16\n00:00:37.350 --> 00:00:40.010\nTwo BIND servers or three or\nfour, let's go crazy.\n\n17\n00:00:40.010 --> 00:00:41.820\nWe'll see how many we can create.\n\n18\n00:00:41.820 --> 00:00:46.310\nIt's a good idea to have at least\ntwo DNS servers on your network.\n\n19\n00:00:46.310 --> 00:00:47.760\nI think everybody,\npretty much, knows that.\n\n20\n00:00:47.760 --> 00:00:51.890\nAnd there's different reasons for it but\nthe main reason is simply, redundancy.\n\n21\n00:00:51.890 --> 00:00:53.790\nYou don't wanna have all\nyour eggs in one basket,\n\n22\n00:00:53.790 --> 00:00:56.900\nif one DNS server fails,\nnow people can't do LOOKUPS.\n\n23\n00:00:56.900 --> 00:00:58.450\nSo ideally, we wanna have two.\n\n24\n00:00:58.450 --> 00:01:01.120\nBut we can also do load balancing and\nperformance, and\n\n25\n00:01:01.120 --> 00:01:05.640\nother things, there's various reasons why\nwe might wanna have multiple DNS servers.\n\n26\n00:01:05.640 --> 00:01:08.117\nBut either way, if you've reached that\ndecision that you wanna have it for\n\n27\n00:01:08.117 --> 00:01:11.420\nwhatever reason,\nits not that hard to get set up.\n\n28\n00:01:11.420 --> 00:01:16.790\nWhat we do is we take the zones that we've\nalready created on our first server and\n\n29\n00:01:16.790 --> 00:01:21.080\nwe replicate those over to a second\nserver or a third or a fourth or\n\n30\n00:01:21.080 --> 00:01:23.420\nas many as you want,\nI don't believe there's a limit.\n\n31\n00:01:23.420 --> 00:01:27.000\nEventually you tax the CPU\non the main server, but\n\n32\n00:01:27.000 --> 00:01:31.680\nit's really pretty negligible\nbecause DNS zones aren't very big.\n\n33\n00:01:31.680 --> 00:01:36.230\nNow when we set this up, we- actually,\nyou know what, let's back up.\n\n34\n00:01:36.230 --> 00:01:37.720\nLet's take a look at the server\nthat we've already set up.\n\n35\n00:01:37.720 --> 00:01:39.970\nI'm just going to steal the server\nthat we set up in the earlier episode,\n\n36\n00:01:39.970 --> 00:01:42.640\nactually our very last episode\nwhere we created zones.\n\n37\n00:01:42.640 --> 00:01:48.930\nWe created a zone for lab.itpro.tv and\nit exists on one server.\n\n38\n00:01:48.930 --> 00:01:53.120\nNow that one server is called the master\nserver although I didn't really mention\n\n39\n00:01:53.120 --> 00:01:56.100\nthat in the show because\nIt was just one server,\n\n40\n00:01:56.100 --> 00:01:58.440\nit doesn't really matter that\nit's the master of its domain.\n\n41\n00:01:58.440 --> 00:02:02.160\nIt would be like calling someone\na manager when they have no employees\n\n42\n00:02:02.160 --> 00:02:02.950\nreporting to them.\n\n43\n00:02:02.950 --> 00:02:05.110\nLike what do they manage,\nthey manage themselves.\n\n44\n00:02:05.110 --> 00:02:06.700\nWell, that's exactly\nwhat we're set up for.\n\n45\n00:02:06.700 --> 00:02:07.940\nSo, let me pull this up here.\n\n46\n00:02:07.940 --> 00:02:11.980\nI've got DNS1, is the server I was\nworking on in the last episode.\n\n47\n00:02:11.980 --> 00:02:16.420\nAnd we built up a server, now I'm gonna\nelevate my privileges real quick so\n\n48\n00:02:16.420 --> 00:02:20.010\nthat I don't have to constantly\nsudu every command that I do.\n\n49\n00:02:20.010 --> 00:02:23.950\nAnd I'm gonna get into /var/named.\n\n50\n00:02:23.950 --> 00:02:27.060\nAnd we can find the zone that\nI built in the last episode.\n\n51\n00:02:27.060 --> 00:02:32.860\nSo if I pull up lab.itpro.tv.dns\nhere's the zone we made.\n\n52\n00:02:32.860 --> 00:02:35.490\nI did a start of authority,\nwhich is this server, DNS1.\n\n53\n00:02:35.490 --> 00:02:38.380\nI did some named servers, DNS1 and DNS2.\n\n54\n00:02:38.380 --> 00:02:42.030\nNow, I added DNS2 in there just to\ngive you guys an example of hey,\n\n55\n00:02:42.030 --> 00:02:43.310\nhere's a second server.\n\n56\n00:02:43.310 --> 00:02:47.740\nWell, that server doesn't\nactually have the zone.\n\n57\n00:02:47.740 --> 00:02:49.710\nSo I need to get a copy\nof the zone over to it.\n\n58\n00:02:49.710 --> 00:02:53.920\nNow, I could just take the zone file and\ncopy it to the other side, that does work.\n\n59\n00:02:53.920 --> 00:02:58.180\nThe challenge is, if I ever update\nthis server, I have to go and\n\n60\n00:02:58.180 --> 00:03:00.390\ndo the same update on the other server,\nright?\n\n61\n00:03:00.390 --> 00:03:02.060\nAnd the more servers you have,\n\n62\n00:03:02.060 --> 00:03:05.540\nthe more likely it is that you're gonna\nforget to do that or fail to do that,\n\n63\n00:03:05.540 --> 00:03:09.280\nand you're gonna end up with different\nresponses coming from different servers.\n\n64\n00:03:09.280 --> 00:03:13.150\nSo the whole point of setting up\nreplication is that we can have a master,\n\n65\n00:03:13.150 --> 00:03:15.460\nwhich in my case is gonna be DNS1.\n\n66\n00:03:15.460 --> 00:03:18.030\nAnd then we can have one or more slaves.\n\n67\n00:03:18.030 --> 00:03:19.050\nAnd the slaves,\n\n68\n00:03:19.050 --> 00:03:24.070\nwhich we'll start with DNS2 here, are\ngonna get a copy of the zone from DNS1.\n\n69\n00:03:24.070 --> 00:03:26.840\nSo going forward,\nI just modify the master,\n\n70\n00:03:26.840 --> 00:03:29.460\nand then all the slaves\nwill get a copy from there.\n\n71\n00:03:29.460 --> 00:03:31.740\nAnd they'll pull it down and\nthey'll have that copy.\n\n72\n00:03:31.740 --> 00:03:35.456\nNow, why the master-slave terminology?\n\n73\n00:03:35.456 --> 00:03:40.410\nThe main reason is, the master is the one\nwho's actually in charge of the zone.\n\n74\n00:03:40.410 --> 00:03:42.640\nYou can get in there and\nyou can edit things, you can change it,\n\n75\n00:03:42.640 --> 00:03:46.230\nyou can do whatever you want,\nbecause that's the master of the zone.\n\n76\n00:03:46.230 --> 00:03:49.070\nThe other guys are considered slaves\nbecause they're not allowed to change\n\n77\n00:03:49.070 --> 00:03:50.420\nthe zone at all.\n\n78\n00:03:50.420 --> 00:03:54.130\nAll they can do is reach out and\ngrab a copy, okay?\n\n79\n00:03:54.130 --> 00:03:56.450\nAnd they pull that copy down,\nand that's it.\n\n80\n00:03:56.450 --> 00:04:01.350\nIf you change the record on a slave\nserver, the changes just go away\n\n81\n00:04:01.350 --> 00:04:03.800\nbecause it goes and replicates\nwith the master and pulls it down.\n\n82\n00:04:03.800 --> 00:04:05.770\nIt's one-way replication.\n\n83\n00:04:05.770 --> 00:04:08.510\nYou replicate from the master\nto all the slaves.\n\n84\n00:04:08.510 --> 00:04:10.460\nSo that's why they use\nthe slave terminology.\n\n85\n00:04:10.460 --> 00:04:13.780\nYou also see some people use primary and\nsecondary.\n\n86\n00:04:13.780 --> 00:04:15.755\nWell, that's in third party DNS servers.\n\n87\n00:04:15.755 --> 00:04:19.480\nIn the official standard, it's the master\nslave terminology so that's what we have.\n\n88\n00:04:19.480 --> 00:04:22.990\n&gt;&gt; So Don, in theory, this goes back to\nlike maybe even the old IDE drives where\n\n89\n00:04:22.990 --> 00:04:25.940\nyou had a master, you know, we'd call\nit primary drive, and a slave drive.\n\n90\n00:04:25.940 --> 00:04:27.860\nThe master was in charge\nof the whole channel.\n\n91\n00:04:27.860 --> 00:04:30.380\nAnd then the slave just kinda\nwaited on whatever the master was\n\n92\n00:04:30.380 --> 00:04:31.180\ngonna update it with.\n\n93\n00:04:31.180 --> 00:04:34.760\n&gt;&gt; That's exactly the same principle,\nexcept here it's just text files.\n\n94\n00:04:34.760 --> 00:04:38.270\nIt's far less complex, but\nit actually works the same way.\n\n95\n00:04:38.270 --> 00:04:40.500\nNow when you look at my\nname server records here,\n\n96\n00:04:40.500 --> 00:04:43.960\nI don't denote whether one is a master or\na slave or anything like and\n\n97\n00:04:43.960 --> 00:04:48.520\nthat's because as far as the end users are\nconcerned, they don't know the difference.\n\n98\n00:04:48.520 --> 00:04:50.490\nThey don't know the difference\nbetween one and the other.\n\n99\n00:04:50.490 --> 00:04:54.030\nSo inside the DNS zone itself they're\ngoing to show up as the same.\n\n100\n00:04:54.030 --> 00:04:58.460\nAnd then everything else that's in here,\nthese are all just records.\n\n101\n00:04:58.460 --> 00:05:00.780\nRecords that I put in\nthe populated the zone.\n\n102\n00:05:00.780 --> 00:05:05.480\nSo I need to get all of these records\nover to my second server, over to DNS2.\n\n103\n00:05:05.480 --> 00:05:06.130\nAll right.\n\n104\n00:05:06.130 --> 00:05:11.030\nNow, my server is already up and running\nwith this so if I do like an nslookup, and\n\n105\n00:05:11.030 --> 00:05:14.560\nI switch to my own server, right?\n\n106\n00:05:14.560 --> 00:05:19.965\nI can start doing lookups for like\nmail1.lab.itpro.tv, and I get a response.\n\n107\n00:05:19.965 --> 00:05:25.990\nOr I could do mail2, and so on and I'm\npulling responses right out of that zone.\n\n108\n00:05:25.990 --> 00:05:27.750\nSo I know its working,\nand everything is good.\n\n109\n00:05:28.790 --> 00:05:29.610\nOn the master,\n\n110\n00:05:29.610 --> 00:05:33.380\nthere is not really all that much we\nhave to do to get ready to replicate.\n\n111\n00:05:33.380 --> 00:05:35.550\nBut, we do have to do something.\n\n112\n00:05:35.550 --> 00:05:38.510\nWhat we have to enable are what\nare called zone transfers.\n\n113\n00:05:38.510 --> 00:05:42.160\nThe secondary server that the slaves,\nthey're gonna reach in.\n\n114\n00:05:42.160 --> 00:05:46.400\nAnd they're gonna request a zone transfer,\na copy of the zone in it's entirety,\n\n115\n00:05:46.400 --> 00:05:47.460\nthey want the whole thing.\n\n116\n00:05:47.460 --> 00:05:48.820\nGive me that zone.\n\n117\n00:05:48.820 --> 00:05:52.770\nWell, that's turned off by default,\nit's not allowed, it's blocked.\n\n118\n00:05:52.770 --> 00:05:56.310\nAnd the reason it's blocked is\nbecause an attacker could come,\n\n119\n00:05:56.310 --> 00:05:58.700\nconnect to your DNS server and say \"hey\ngive me a whole copy of your zone\".\n\n120\n00:05:58.700 --> 00:06:02.620\nAnd then they get the whole zone and now\nthey know every server mapped to every IP,\n\n121\n00:06:02.620 --> 00:06:05.910\nnow that's not true security.\n\n122\n00:06:05.910 --> 00:06:07.570\nBy turning this off it's\nnot hiding the server.\n\n123\n00:06:07.570 --> 00:06:08.600\nIt's still there.\n\n124\n00:06:08.600 --> 00:06:11.640\nIf the attacker knows the name,\nthey can still use it, right?\n\n125\n00:06:11.640 --> 00:06:13.310\nBut it does make their job more difficult.\n\n126\n00:06:13.310 --> 00:06:14.718\nIt's called obfuscation.\n\n127\n00:06:14.718 --> 00:06:18.310\nWhere just kinda hiding the data a little\nbit and that is turned on by default.\n\n128\n00:06:18.310 --> 00:06:19.840\nWe are hiding that data.\n\n129\n00:06:19.840 --> 00:06:22.830\nSo on the master,\nI need to change its configuration.\n\n130\n00:06:22.830 --> 00:06:27.680\nI'm gonna edit /etc/named.conf and\n\n131\n00:06:27.680 --> 00:06:32.650\nthis is the file that we went into\nwhen we originally defined our zone.\n\n132\n00:06:32.650 --> 00:06:36.650\nSo if I come in here and find it,\nhere's where I defined the zone.\n\n133\n00:06:36.650 --> 00:06:41.200\nAnd I said, hey, lab.itpro.tv is a zone.\n\n134\n00:06:41.200 --> 00:06:42.550\nIt exists.\n\n135\n00:06:42.550 --> 00:06:45.710\nThe file for it is lab.itpro.tv.dns,\n\n136\n00:06:45.710 --> 00:06:51.000\nthat's where you can get all the records,\nand then type master.\n\n137\n00:06:51.000 --> 00:06:53.780\nI said that this one was the master,\nit's in charge, and\n\n138\n00:06:53.780 --> 00:06:55.950\nthat means hey,\nwe're allowed to change it, and\n\n139\n00:06:55.950 --> 00:07:00.560\nwe can send changes to other people,\nother people cannot send changes to us.\n\n140\n00:07:00.560 --> 00:07:04.380\nThere can be only one master,\nand this is it, right?\n\n141\n00:07:04.380 --> 00:07:05.840\nSo that's what type master is all about.\n\n142\n00:07:05.840 --> 00:07:09.620\nI bet you can guess what we're gonna\nput on the other server, type slave.\n\n143\n00:07:09.620 --> 00:07:12.430\nThat'll let it know that, hey,\nwe're not allowed to make changes.\n\n144\n00:07:12.430 --> 00:07:14.170\nWe're not allowed to send changes.\n\n145\n00:07:14.170 --> 00:07:15.780\nWe can only receive changes.\n\n146\n00:07:15.780 --> 00:07:18.120\nThat's how it knows what\nthat zone is going to be.\n\n147\n00:07:18.120 --> 00:07:20.480\nSo that's kind of a key piece.\n\n148\n00:07:20.480 --> 00:07:24.660\nNow, what I also need to add in here,\nand it'll probably be faster for\n\n149\n00:07:24.660 --> 00:07:26.880\nme to search to find it,\nbut in here somewhere,\n\n150\n00:07:26.880 --> 00:07:29.680\nthere's a little section where it'll\ntalk about the zone transfers.\n\n151\n00:07:29.680 --> 00:07:32.860\nAnd the zone transfers\nare blocked by default.\n\n152\n00:07:32.860 --> 00:07:35.780\nSo I'm just gonna search for the word.\n\n153\n00:07:35.780 --> 00:07:36.500\nWhoops.\n\n154\n00:07:36.500 --> 00:07:39.820\nI'm gonna ruin my document,\nis what I'm gonna do.\n\n155\n00:07:39.820 --> 00:07:44.950\nI'm gonna search for the word Transfer and\nit's not in here, okay.\n\n156\n00:07:44.950 --> 00:07:47.870\nSo there's no entries in here right now\ndesignating whether I'm allowed to do\n\n157\n00:07:47.870 --> 00:07:48.920\ntransfers or not.\n\n158\n00:07:48.920 --> 00:07:51.800\nSo what I'm gonna do is I'm gonna look for\nthe section called options.\n\n159\n00:07:51.800 --> 00:07:55.471\nAnd in the options section that's\nwhere we do the listen-on port and\n\n160\n00:07:55.471 --> 00:07:56.682\nall that other stuff.\n\n161\n00:07:56.682 --> 00:07:58.641\nWe set that up so\nthat our server would listen.\n\n162\n00:07:58.641 --> 00:08:00.425\nI'm gonna add an entry in here.\n\n163\n00:08:00.425 --> 00:08:02.269\nSee, how I've got allow query?\n\n164\n00:08:02.269 --> 00:08:04.907\nThat's where I'm saying who's\nallowed to query this server.\n\n165\n00:08:04.907 --> 00:08:08.747\nRight afterwards,\nI'm just gonna add another entry and\n\n166\n00:08:08.747 --> 00:08:12.170\nI'm gonna say, allow transfer, all right?\n\n167\n00:08:12.170 --> 00:08:14.800\nSo this is gonna be a list of\nIP addresses that are allowed to\n\n168\n00:08:14.800 --> 00:08:17.000\ntransfer the full zone.\n\n169\n00:08:17.000 --> 00:08:19.910\nA lot of times I'll put my\nwork station's IP in the list.\n\n170\n00:08:19.910 --> 00:08:21.980\nSo that from my workstation\nI can do troubleshooting and\n\n171\n00:08:21.980 --> 00:08:23.890\npoll the zone and look at stuff.\n\n172\n00:08:23.890 --> 00:08:28.510\nBut we also need to put every slave server\nthat we want to support right in here.\n\n173\n00:08:28.510 --> 00:08:32.520\nNow I've only got one slave\nserver that I'm setting up so\n\n174\n00:08:32.520 --> 00:08:33.810\nI'm gonna do 10.0.222.102.\n\n175\n00:08:33.810 --> 00:08:35.010\nIs the other server.\n\n176\n00:08:35.010 --> 00:08:36.760\nIf I had more than one,\nyou just do a semicolon,\n\n177\n00:08:36.760 --> 00:08:38.420\nyou just start listing each one.\n\n178\n00:08:38.420 --> 00:08:40.020\nYou can do subnets.\n\n179\n00:08:40.020 --> 00:08:43.390\nSo I can do slash 24, or whatever if\nI want to do a whole range of IP's,\n\n180\n00:08:43.390 --> 00:08:45.452\nbut usually it's just\nindividual IP's like this.\n\n181\n00:08:46.530 --> 00:08:49.480\nAnd I'm gonna close that out so\nit's allowed to transfer, all right?\n\n182\n00:08:49.480 --> 00:08:53.340\nSo that's important,\nbecause I need to know to look for that.\n\n183\n00:08:53.340 --> 00:08:54.500\nSo I'm gonna go ahead and save that.\n\n184\n00:08:55.920 --> 00:08:59.844\nAnd now it's in place and I did a couple\nof stray commands when I was typing there.\n\n185\n00:08:59.844 --> 00:09:03.992\nSo I'm gonna run a named-checkcom\nreal quick just to make sure I didn't\n\n186\n00:09:03.992 --> 00:09:05.630\nbotch it up.\n\n187\n00:09:05.630 --> 00:09:07.210\nThere we go.\nAnd remember with this command,\n\n188\n00:09:07.210 --> 00:09:08.520\nit's checking the config file to look for\n\n189\n00:09:08.520 --> 00:09:11.950\nsyntax errors and\nwhat I want is exactly what I got.\n\n190\n00:09:11.950 --> 00:09:12.660\nNo response.\n\n191\n00:09:12.660 --> 00:09:14.630\nIf you get no response, things are good.\n\n192\n00:09:14.630 --> 00:09:15.990\nAnd we're in business.\n\n193\n00:09:15.990 --> 00:09:19.760\nAll right, I didn't change the zone file,\nwe just looked at it.\n\n194\n00:09:19.760 --> 00:09:20.790\nWe didn't change it.\n\n195\n00:09:20.790 --> 00:09:22.861\nI did change named.conf.\n\n196\n00:09:22.861 --> 00:09:26.360\nnamed.conf is only\nloaded when bind starts.\n\n197\n00:09:26.360 --> 00:09:33.351\nSo I need to do a systemctl\nrestart named.service.\n\n198\n00:09:33.351 --> 00:09:37.210\nAnd now my master server's up and running.\n\n199\n00:09:37.210 --> 00:09:39.920\nIt's really up and running the same\nway that it was before I got started,\n\n200\n00:09:39.920 --> 00:09:42.970\nexcept now it's allowing a zone\ntransfer to a secondary server.\n\n201\n00:09:44.080 --> 00:09:46.770\nThat's it for the master, master's done.\n\n202\n00:09:46.770 --> 00:09:49.350\nNow I can go and\nconfigure one or more slaves and\n\n203\n00:09:49.350 --> 00:09:53.140\nget them set up to reach out to this\nserver and get that data, right.\n\n204\n00:09:53.140 --> 00:09:55.780\nNow, if you didn't watch\nthe episode where we install BIND,\n\n205\n00:09:55.780 --> 00:09:59.530\nremember that we did things like opening\nthe firewall ports, and other stuff.\n\n206\n00:09:59.530 --> 00:10:01.180\nThat all has to get done too, right?\n\n207\n00:10:01.180 --> 00:10:03.210\nSo I'm using a server\nthat's already set up.\n\n208\n00:10:03.210 --> 00:10:05.210\nDefinitely check out that\nother episode if you need to,\n\n209\n00:10:05.210 --> 00:10:07.830\nto catch all the steps to\nget the master set up.\n\n210\n00:10:07.830 --> 00:10:12.230\nNow on my secondary server here, dns2,\nI haven't done anything on this server.\n\n211\n00:10:12.230 --> 00:10:14.690\nDon't even think I've logged\ninto it in this show yet.\n\n212\n00:10:14.690 --> 00:10:18.420\nLet me bump up my privileges, so\nI don't have to show you all this stuff.\n\n213\n00:10:18.420 --> 00:10:22.425\nIf we take a look at, I don't have\nBIND installed yet, so for example,\n\n214\n00:10:22.425 --> 00:10:27.440\nif I do a ls/var,\nI don't even have a named folder in there,\n\n215\n00:10:27.440 --> 00:10:29.860\nbecause it hasn't been created,\nit's not installed.\n\n216\n00:10:29.860 --> 00:10:33.913\nSo I'm gonna need to get BIND installed\nand configured, at least the basic stuff\n\n217\n00:10:33.913 --> 00:10:37.088\nbefore I go and synchronize some\nother zone over to it, right.\n\n218\n00:10:37.088 --> 00:10:38.358\nSo let's run through the basics here,\n\n219\n00:10:38.358 --> 00:10:40.708\nwe're gonna have to open up some\nfirewall ports and all that good stuff,\n\n220\n00:10:40.708 --> 00:10:43.410\nand we'll have this guy up and\nrunning in short order.\n\n221\n00:10:43.410 --> 00:10:48.890\nSo I'm gonna start by doing Yamin Saw bind\nand bind as utils, now if you're running\n\n222\n00:10:48.890 --> 00:10:54.980\na Redhat based OS, like OHEO, Cent OS,\nFedora bind utils is already installed.\n\n223\n00:10:54.980 --> 00:10:57.570\nI'm adding it here cuz\nlikely it's out of date.\n\n224\n00:10:57.570 --> 00:10:59.870\nBind on the other hand is\nnot installed by default so\n\n225\n00:10:59.870 --> 00:11:01.390\nit's gonna need to install that.\n\n226\n00:11:01.390 --> 00:11:03.560\nThere we go and I'll say yes.\n\n227\n00:11:03.560 --> 00:11:04.862\nAnd we'll get that installed.\n\n228\n00:11:04.862 --> 00:11:08.501\nNow, once it's installed,\nI'm not quite ready to start it just yet,\n\n229\n00:11:08.501 --> 00:11:12.770\ncuz I need to modify its configuration\na bit before I can get it up and going.\n\n230\n00:11:12.770 --> 00:11:15.450\nAnd, if I start it now, I'm just\ngonna have to restart it again later.\n\n231\n00:11:15.450 --> 00:11:17.840\nSo no point in really starting it.\n\n232\n00:11:17.840 --> 00:11:19.960\nSo I do need to jump in and\nstart to tweak some things though.\n\n233\n00:11:19.960 --> 00:11:21.680\nAnd so, let's get that started.\n\n234\n00:11:21.680 --> 00:11:25.430\nI'm gonna jump right\nback into /etc/named.com,\n\n235\n00:11:25.430 --> 00:11:29.730\nwhich is that basic configuration file,\nand we can start to get things set.\n\n236\n00:11:29.730 --> 00:11:32.930\nNow, if I want this server\nto answer to other people,\n\n237\n00:11:32.930 --> 00:11:37.350\nthen I'm gonna need to modify this\nlisten-on port, and make sure to add in\n\n238\n00:11:37.350 --> 00:11:42.840\nits accessible IP, so this is 102 So\nI'm gonna add that to the list.\n\n239\n00:11:42.840 --> 00:11:45.090\nI'm not really worried about ipv6 so\nI'll leave that one be.\n\n240\n00:11:45.090 --> 00:11:47.490\nBut I am gonna go ahead and listen on it.\n\n241\n00:11:47.490 --> 00:11:51.700\nIf I want to define an ACL I\ncan come in and do that.\n\n242\n00:11:51.700 --> 00:11:53.860\nNow, it's up to me if I wanna do that.\n\n243\n00:11:53.860 --> 00:11:56.220\nYou may want to just\nallow everybody to query.\n\n244\n00:11:56.220 --> 00:11:59.070\nThis might be a server that you want\nto be held private that you only\n\n245\n00:11:59.070 --> 00:12:00.690\nuse in case of emergencies.\n\n246\n00:12:00.690 --> 00:12:05.720\nBut typically I'm gonna take whatever I\nset on the other server and apply it here.\n\n247\n00:12:05.720 --> 00:12:11.560\nSo if I look back on my other server\nwhen we pull up its configuration.\n\n248\n00:12:11.560 --> 00:12:13.660\nWhen I set it up, I created an ACL.\n\n249\n00:12:13.660 --> 00:12:15.480\nThis guy right here, all right?\n\n250\n00:12:15.480 --> 00:12:17.860\nSo that's the ACL that\nwe defined last time.\n\n251\n00:12:17.860 --> 00:12:22.360\nAnd I'm just gonna use that same\nACL All over on my other server,\n\n252\n00:12:22.360 --> 00:12:24.420\nit makes sense that that's\nkind of what we'd want.\n\n253\n00:12:24.420 --> 00:12:26.860\nAnd so on the other one,\nI put it right before the logging section.\n\n254\n00:12:26.860 --> 00:12:28.950\nI'll do the same thing here.\n\n255\n00:12:28.950 --> 00:12:30.320\nAnd I'll just paste that in.\n\n256\n00:12:30.320 --> 00:12:31.790\nSo sense in reinventing the wheel, right?\n\n257\n00:12:31.790 --> 00:12:35.710\nSame ranges,\nwe'll get that put in place, all right?\n\n258\n00:12:35.710 --> 00:12:41.000\nAnd then, I called it local dash clients,\nso up here, where I had the allowed query\n\n259\n00:12:41.000 --> 00:12:47.220\noption, I just need to change that\nto say local-clients just to match.\n\n260\n00:12:47.220 --> 00:12:50.780\nAnd, I don't know, maybe it would have\neven been faster to just copy and paste\n\n261\n00:12:50.780 --> 00:12:55.190\nwhatever came out of this one into there\ncuz it's all kind of already set here.\n\n262\n00:12:55.190 --> 00:12:58.490\nBut there it is, allow Dash clans,\nour local dash clans.\n\n263\n00:12:58.490 --> 00:13:02.260\nSo do the same thing here give\nthat in place, all right.\n\n264\n00:13:02.260 --> 00:13:06.270\nSo now I'm listening on my IP address and\nI got an easy all control and who's a lot\n\n265\n00:13:06.270 --> 00:13:10.310\nto do were cursive query against my\nsystem such as pretty good spot to start.\n\n266\n00:13:10.310 --> 00:13:15.360\nThe next thing though is the important\npart, that way down to the bottom files.\n\n267\n00:13:16.360 --> 00:13:18.150\nIf I get down here right\nbefore the includes.\n\n268\n00:13:18.150 --> 00:13:20.050\nI'm gonna make a little room.\n\n269\n00:13:20.050 --> 00:13:21.800\nThis were we define our zones.\n\n270\n00:13:21.800 --> 00:13:25.000\nRight and if I look back on\nthe master when I did that.\n\n271\n00:13:26.480 --> 00:13:31.800\nI did it right here by saying,\nthe zone name, and then i designated that,\n\n272\n00:13:31.800 --> 00:13:36.100\nI was the master, and here is the file\nwhere all the records come from.\n\n273\n00:13:36.100 --> 00:13:41.160\nRight and that file I didn't put a path\nIf you don't put a path it assumes,\n\n274\n00:13:41.160 --> 00:13:43.460\nslash VAR slash name D.\n\n275\n00:13:43.460 --> 00:13:47.510\nSo it already knows the path, I didn't\nto put that I just put the file name.\n\n276\n00:13:47.510 --> 00:13:50.100\nWell, on a secondary server.\n\n277\n00:13:50.100 --> 00:13:53.010\nWhat you gonna do is\na little bit different.\n\n278\n00:13:53.010 --> 00:13:58.140\nI need to say zone and I need to\nidentify the zone to its lab.itpro.tv\n\n279\n00:13:58.140 --> 00:14:00.810\nIt is a internet zone, or internet class.\n\n280\n00:14:00.810 --> 00:14:01.430\nThey all are.\n\n281\n00:14:01.430 --> 00:14:02.590\nSo I'll just do IN on that.\n\n282\n00:14:02.590 --> 00:14:05.830\nAnd then here's where things\nget a little different.\n\n283\n00:14:05.830 --> 00:14:09.830\nAs you've probably guessed,\nI'm gonna say type slave,\n\n284\n00:14:09.830 --> 00:14:13.420\nbecause this one's not the master of\nthe zone, it's not able to make changes.\n\n285\n00:14:13.420 --> 00:14:16.350\nIt's only able to receive the changes.\n\n286\n00:14:16.350 --> 00:14:19.540\nThen, I'm gonna say file, and\nhere's where it gets weird.\n\n287\n00:14:19.540 --> 00:14:21.180\nAnd I have a file, do I?\n\n288\n00:14:21.180 --> 00:14:21.940\nOkay.\n\n289\n00:14:21.940 --> 00:14:26.100\nWell, when you are configuring your slay,\nyou are telling us where to put\n\n290\n00:14:26.100 --> 00:14:30.997\nyour file,and the default is,\nslash VAR,slash name D,\n\n291\n00:14:30.997 --> 00:14:35.480\nslash slaves,slash the name of the file.\n\n292\n00:14:35.480 --> 00:14:40.120\nRight, well, it gonna assume,\nslash VAR,slash name D, by default.\n\n293\n00:14:40.120 --> 00:14:43.480\nSo all I need to do here is type slaves.\n\n294\n00:14:45.540 --> 00:14:48.740\nI'm gonna try and\ntype slaves, there we go.\n\n295\n00:14:48.740 --> 00:14:52.240\nAnd then I'll say /lab.itpro.tv.dns.\n\n296\n00:14:52.240 --> 00:14:59.840\nAnd so it's gonna know to put\nthis file in the slaves folder.\n\n297\n00:14:59.840 --> 00:15:03.700\nThat's important because the slaves\nfolder has different permissions on it\n\n298\n00:15:03.700 --> 00:15:07.420\nthat's gonna ensure that we don't write\nchanges into it, that we receive changes\n\n299\n00:15:07.420 --> 00:15:09.410\nfrom the other side but\nthat we don't write them ourselves.\n\n300\n00:15:09.410 --> 00:15:12.420\nSo, you might be tempted to\nput it somewhere else but\n\n301\n00:15:12.420 --> 00:15:13.820\nit really needs to go there.\n\n302\n00:15:13.820 --> 00:15:16.170\nAnd that folder's already created,\n\n303\n00:15:16.170 --> 00:15:20.620\neven if I go back to the master here,\nif I go into /var/named and\n\n304\n00:15:20.620 --> 00:15:25.590\ntake a look This one configures the master\nand that slave's folder already exist.\n\n305\n00:15:25.590 --> 00:15:28.660\nIt's ready to receive\nzones if it's the slaving.\n\n306\n00:15:28.660 --> 00:15:31.370\nYou can be the master for\none zone and a slave for another one.\n\n307\n00:15:31.370 --> 00:15:34.520\nYou can mix and match like that,\nit's not terribly common thing, but\n\n308\n00:15:34.520 --> 00:15:38.800\nyou can certainly do that but\nin any servers ready to receive that.\n\n309\n00:15:40.790 --> 00:15:43.580\nAll right, now, I'm not quite done yet.\n\n310\n00:15:43.580 --> 00:15:47.694\nI've given it a type and I've given\nit a final name, and when looking at\n\n311\n00:15:47.694 --> 00:15:52.242\nthe master, that was pretty much all I\ndid, write the type and the final name.\n\n312\n00:15:52.242 --> 00:15:53.939\nBut here I'm gonna get one step further.\n\n313\n00:15:53.939 --> 00:15:56.666\nI'm gonna tell it,\nwhere am I gonna get this zone from?\n\n314\n00:15:56.666 --> 00:15:59.553\nWhere does the data actually come from?\n\n315\n00:15:59.553 --> 00:16:02.382\nAnd so that's where I add\na little bit more to this line.\n\n316\n00:16:02.382 --> 00:16:08.806\nAnd I need to say masters, and then\nspecify who that master is going to be.\n\n317\n00:16:08.806 --> 00:16:09.920\nAnd I'm going to punch it in here.\n\n318\n00:16:09.920 --> 00:16:12.490\nNow, notice how it's masters with an s.\n\n319\n00:16:12.490 --> 00:16:14.270\nI could have more than one master.\n\n320\n00:16:14.270 --> 00:16:17.580\nRight, you can, you actually\ncould have more than one master.\n\n321\n00:16:17.580 --> 00:16:21.850\nNot normally, normally,\nthere's only gonna be one master.\n\n322\n00:16:21.850 --> 00:16:24.100\nIf you have more than one master\nany time you make a change,\n\n323\n00:16:24.100 --> 00:16:26.400\nyou've got to go to the other masters and\nupdate them, too.\n\n324\n00:16:27.580 --> 00:16:29.430\nThat becomes a real challenge.\n\n325\n00:16:29.430 --> 00:16:35.022\nUnless we're doing tiered,\nmaster, slave type models.\n\n326\n00:16:35.022 --> 00:16:39.190\nOkay, a slave can actually\nbe a slave to another slave.\n\n327\n00:16:39.190 --> 00:16:44.520\nSo you can have a primary,\na secondary, and a tertiary.\n\n328\n00:16:44.520 --> 00:16:47.280\nTertiary, right,\nwe're gonna make up words today.\n\n329\n00:16:47.280 --> 00:16:51.020\nSo, I can have the primary,\nwhich is actually a master.\n\n330\n00:16:51.020 --> 00:16:55.400\nThen I can have, say, two secondaries,\nwhich would be slaves.\n\n331\n00:16:55.400 --> 00:17:00.400\nAnd then maybe I have six tertiary\nservers, which would also be slaves.\n\n332\n00:17:00.400 --> 00:17:04.850\nAnd on those tertiary ones, I might\nconfigure more than one master, to say,\n\n333\n00:17:04.850 --> 00:17:07.520\nhey, if you can't get to this guy, go to\nthis other guy, go to this other guy.\n\n334\n00:17:07.520 --> 00:17:08.630\nThese are kind of backups.\n\n335\n00:17:08.630 --> 00:17:12.340\nThat's a scenario where we would have more\nthan one master, but it's fairly uncommon.\n\n336\n00:17:12.340 --> 00:17:15.100\nYou have to have a really\nbig DNS infrastructure.\n\n337\n00:17:15.100 --> 00:17:17.440\nWell, somebody out there in the Internet,\n\n338\n00:17:17.440 --> 00:17:19.640\nwhich is exactly who\nbind was designed for.\n\n339\n00:17:19.640 --> 00:17:22.470\nSo, that's why it's got this scalability,\nI know a lot of you are looking at it\n\n340\n00:17:22.470 --> 00:17:25.380\nsaying, that's ridiculous,\nI would never ever do that in my business.\n\n341\n00:17:25.380 --> 00:17:26.264\nAnd you're absolutely right.\n\n342\n00:17:26.264 --> 00:17:29.988\nUnless you work for an ISP, unless you\nwork for one of the root hint name\n\n343\n00:17:29.988 --> 00:17:34.060\nservers, right, if you work for\none of those guys, you're gonna do it.\n\n344\n00:17:34.060 --> 00:17:35.500\nYou're gonna have as\nmany servers as you can.\n\n345\n00:17:35.500 --> 00:17:37.910\nWell, you're probably not gonna use mine.\n\n346\n00:17:37.910 --> 00:17:41.530\nBut, [LAUGH] but you will do that\nto provide that functionality.\n\n347\n00:17:41.530 --> 00:17:44.530\nSo, remember who this was designed for,\nthat's why it's got a little over-kill.\n\n348\n00:17:44.530 --> 00:17:46.499\nI'm just gonna put in one master though,\ncuz I just have one.\n\n349\n00:17:46.499 --> 00:17:50.748\nAnd so when we do that,\nyou're just punching in the IP address.\n\n350\n00:17:50.748 --> 00:17:55.167\nAnd mine is 10.0.222.101, and\nif you had more than one, you\n\n351\n00:17:55.167 --> 00:18:00.490\njust do a semicolon to separate each one\nout, and you put them there in the list.\n\n352\n00:18:00.490 --> 00:18:03.370\nAnd we'll close that out,\ncuz that's the last thing that I need.\n\n353\n00:18:03.370 --> 00:18:06.500\nSo, I'm gonna close that one\nwith the squiggly bracket, and\n\n354\n00:18:06.500 --> 00:18:09.645\nI actually have to close it\nagain with the squiggly bracket,\n\n355\n00:18:09.645 --> 00:18:13.750\ncuz if you're tracking,\nI opened a squiggly here, and\n\n356\n00:18:13.750 --> 00:18:18.300\nthen I opened another one for\ndefining where that master was, right?\n\n357\n00:18:18.300 --> 00:18:20.339\nSo, I'm actually two squigglies deep.\n\n358\n00:18:20.339 --> 00:18:22.791\nAnd so, that's why I've gotta\nclose it twice, all right.\n\n359\n00:18:22.791 --> 00:18:28.990\nSo now, I've got that my\nserver's configured as a slave.\n\n360\n00:18:28.990 --> 00:18:33.990\nIt's gonna store the zone in this file,\nbut it's gonna get the zone\n\n361\n00:18:33.990 --> 00:18:37.730\nfrom this guy right here, those\nare the pieces of information I need.\n\n362\n00:18:37.730 --> 00:18:42.050\nAnd because that syntax is a little wonky,\nit's easy to make a mistake here, so\n\n363\n00:18:42.050 --> 00:18:45.250\nI definitely drop out and\ndouble check this one.\n\n364\n00:18:45.250 --> 00:18:49.010\nSo I'm gonna get out of that file,\nit's gonna save it, and then I'm gonna do\n\n365\n00:18:49.010 --> 00:18:54.640\na named-checkconf, so I can look in\nthere and see if I screwed it up, right?\n\n366\n00:18:54.640 --> 00:18:56.170\nIt seems to be happy.\n\n367\n00:18:56.170 --> 00:18:59.230\nNow, that's telling me\nthe syntax is happy.\n\n368\n00:18:59.230 --> 00:19:01.900\nThere's still a number of things\nthat could make this not work.\n\n369\n00:19:01.900 --> 00:19:05.780\nIf the firewall's out on the master,\nI'm not gonna be able to reach out and\n\n370\n00:19:05.780 --> 00:19:07.460\nget this data, right?\n\n371\n00:19:07.460 --> 00:19:08.820\nIf the master isn't set up for\n\n372\n00:19:08.820 --> 00:19:12.160\na zone transfer, then I'm not gonna be\nable to reach out and get that data.\n\n373\n00:19:12.160 --> 00:19:13.410\nThere's any number of\nthings that can break it,\n\n374\n00:19:13.410 --> 00:19:17.260\nbut at least as far as my syntax, I\nremembered the right amount of semicolons.\n\n375\n00:19:17.260 --> 00:19:17.980\nSo, we're good there.\n\n376\n00:19:19.140 --> 00:19:23.990\nSo, I'm pretty much done here,\nexcept there is a little bit of\n\n377\n00:19:23.990 --> 00:19:26.900\nsecurity stuff I need to worry about,\nbefore I really get this going.\n\n378\n00:19:26.900 --> 00:19:29.050\nSo, I do need to open up\nthe firewall on this system.\n\n379\n00:19:29.050 --> 00:19:32.050\nSo, I'm gonna do a firewall-cmd.\n\n380\n00:19:32.050 --> 00:19:35.100\nIf I didn't want people to\ndo lookups against this one,\n\n381\n00:19:35.100 --> 00:19:37.920\nit's actually go enough to reach out and\nget the zone from the other one.\n\n382\n00:19:37.920 --> 00:19:41.060\nSo, if I'm trying to use this as some\nkind of crazy backup, I can do that.\n\n383\n00:19:41.060 --> 00:19:43.710\nBut typically, you want people to\ndo lookups against the secondary.\n\n384\n00:19:43.710 --> 00:19:46.430\nThe whole point is to take\nload off the other server.\n\n385\n00:19:46.430 --> 00:19:53.620\nSo, I'll do\nfirewall-cmd--add-service Equals DNS,\n\n386\n00:19:53.620 --> 00:19:57.340\nand I'm gonna run the same thing again,\nand do a little dash dash permanent.\n\n387\n00:19:59.770 --> 00:20:02.950\nAnd remember, I run the command twice\nbecause one makes it take effect right\n\n388\n00:20:02.950 --> 00:20:05.720\nnow, the other one makes it\ntake effect after a reboot.\n\n389\n00:20:05.720 --> 00:20:08.300\nI could just run the second command.\n\n390\n00:20:08.300 --> 00:20:09.650\nAnd then restart the firewall, but\n\n391\n00:20:09.650 --> 00:20:12.008\nanybody connected to the server\nright now would get disconnected.\n\n392\n00:20:12.008 --> 00:20:15.100\nOn a brand-new server, that's not a big\ndeal, but if this is a production server,\n\n393\n00:20:15.100 --> 00:20:15.600\nI don't wanna do that.\n\n394\n00:20:15.600 --> 00:20:18.631\nSo, I've just gotten in the habit\nof always running those commands\n\n395\n00:20:18.631 --> 00:20:19.866\ntwice to take care of that.\n\n396\n00:20:19.866 --> 00:20:24.102\nAll right, then,\nif I've feel like I'm done and good,\n\n397\n00:20:24.102 --> 00:20:28.801\nI can go ahead and restart it,\nand get the system up and online.\n\n398\n00:20:28.801 --> 00:20:32.292\nSince this is the first\ntime I've installed bind,\n\n399\n00:20:32.292 --> 00:20:35.620\nI need to do a systemctl\nenable named.service,\n\n400\n00:20:35.620 --> 00:20:40.260\nand that's gonna tell it to start\nbind every time I boot up, right?\n\n401\n00:20:40.260 --> 00:20:42.710\nOtherwise, when I reboot,\nit's gonna be stopped.\n\n402\n00:20:42.710 --> 00:20:44.524\nAnd then I can start the service.\n\n403\n00:20:44.524 --> 00:20:48.567\nAnd a lot of times, it actually starts it\nalready, so it might already be started.\n\n404\n00:20:48.567 --> 00:20:50.969\nIt looks like it wasn't in this case,\nso it went ahead and started it for me.\n\n405\n00:20:52.380 --> 00:20:54.020\nNow, I'm probably done here.\n\n406\n00:20:54.020 --> 00:20:56.130\nI'm probably done,\nthe secondary is up and going.\n\n407\n00:20:56.130 --> 00:20:59.090\nWhen it boots up, it's gonna say,\nI'm a secondary, I'm a slave for\n\n408\n00:20:59.090 --> 00:21:01.670\nthis other zone, I'm gonna reach out and\nget a copy of it.\n\n409\n00:21:01.670 --> 00:21:03.935\nAnd hopefully it worked,\nright, I'm stalling.\n\n410\n00:21:03.935 --> 00:21:07.430\n[LAUGH] So, so it reaches out,\nit gets a copy of that zone.\n\n411\n00:21:07.430 --> 00:21:10.000\nIt brings it down, and\nit saves it in that slaves folder,\n\n412\n00:21:10.000 --> 00:21:12.350\nand now it's able to start\nresponding to that zone.\n\n413\n00:21:12.350 --> 00:21:13.840\nIt should have the data.\n\n414\n00:21:13.840 --> 00:21:15.630\nThat's happened ,to be\nhappening in the background.\n\n415\n00:21:15.630 --> 00:21:18.770\nIf it fails, I'm gonna have to dig through\nthe logs and find out why it failed, and\n\n416\n00:21:18.770 --> 00:21:20.050\nsee what's going on there.\n\n417\n00:21:20.050 --> 00:21:23.412\nBut assuming that everything worked,\nwe should be good to go.\n\n418\n00:21:23.412 --> 00:21:26.530\nNow, I'll walk you through how to\ntrouble shoot some of that in a minute,\n\n419\n00:21:26.530 --> 00:21:29.163\nbut let's just see if we lucked out,\nand everything worked.\n\n420\n00:21:29.163 --> 00:21:31.729\nI'm gonna go in to /var/named And\n\n421\n00:21:31.729 --> 00:21:36.613\nI've got that slaves folder right\nhere that I pointed out earlier.\n\n422\n00:21:36.613 --> 00:21:39.933\nI'm gonna get into that slaves folder and\njust take a look.\n\n423\n00:21:39.933 --> 00:21:44.098\nAnd I've got lab.itpro.tv.dns.\n\n424\n00:21:44.098 --> 00:21:49.660\nAnd if I take a look at that file,\nthat's not so good, is it?\n\n425\n00:21:49.660 --> 00:21:52.780\nTake a look at the file, it's got an entry\nfor TV, and it's got an entry for\n\n426\n00:21:52.780 --> 00:21:55.720\nmail1labitprotv.\n\n427\n00:21:55.720 --> 00:21:59.620\nWell, that's not exactly in any\nformat that I'm used to, is it?\n\n428\n00:21:59.620 --> 00:22:00.730\nThat's okay.\n\n429\n00:22:00.730 --> 00:22:03.910\nWhat it means is that I've caught\nit while it's still transferring.\n\n430\n00:22:03.910 --> 00:22:06.180\nIt's still kind of getting the data.\n\n431\n00:22:06.180 --> 00:22:10.070\nWhat bind does is it brings\nthe data into RAM first, and\n\n432\n00:22:10.070 --> 00:22:12.350\nit likely has the whole zone in RAM.\n\n433\n00:22:12.350 --> 00:22:15.130\nAnd then when it gets bored, it starts\nwriting stuff from the hard drive.\n\n434\n00:22:15.130 --> 00:22:16.840\nNow, normally, I'd worry about that.\n\n435\n00:22:16.840 --> 00:22:21.440\nI'd say, well, what if this ever has\na failure while the data's in RAM, right?\n\n436\n00:22:21.440 --> 00:22:22.460\nWell, who cares?\n\n437\n00:22:22.460 --> 00:22:23.370\nIt's a slave.\n\n438\n00:22:23.370 --> 00:22:25.950\nIf it loses the data when it reboots,\nwhat's it gonna do?\n\n439\n00:22:25.950 --> 00:22:28.300\nIt's gonna go and\nget the data from the master again.\n\n440\n00:22:28.300 --> 00:22:30.580\nSo, I don't have to worry\nabout this one losing data.\n\n441\n00:22:30.580 --> 00:22:35.660\nSo, it is not uncommon to see the file\nin the hard drive be wildly out of date\n\n442\n00:22:35.660 --> 00:22:37.580\nfrom what's in RAM, okay?\n\n443\n00:22:37.580 --> 00:22:41.450\nBut we can test this against\nwhat's in RAM and kinda see, and\n\n444\n00:22:41.450 --> 00:22:43.220\nmake sure it's actually pulling things.\n\n445\n00:22:43.220 --> 00:22:49.480\nSo, if I wanna do a lookup for something\nlike the WWW entry that we made, right?\n\n446\n00:22:49.480 --> 00:22:51.070\nI'll use dig this time.\n\n447\n00:22:51.070 --> 00:22:51.810\nWhen we use dig,\n\n448\n00:22:51.810 --> 00:22:55.470\nyou can specify what server you wanna\nquery against by using the add symbol.\n\n449\n00:22:55.470 --> 00:22:57.940\nSo, I'm gonna query\nagainst my local system.\n\n450\n00:22:57.940 --> 00:22:58.790\nI'm on DNS two.\n\n451\n00:22:58.790 --> 00:23:02.145\nThat's what I want to query against,\nand I'm gonna do a lookup for\n\n452\n00:23:02.145 --> 00:23:08.580\nwww.lab.itproducttv, and if I query that,\nI should get a response for what it is.\n\n453\n00:23:08.580 --> 00:23:11.530\nAnd I picked a good one,\nbecause it's a cname.\n\n454\n00:23:11.530 --> 00:23:14.528\nWhen you have a cname, you don't just\ndo one lookup, you do two lookups.\n\n455\n00:23:14.528 --> 00:23:17.100\nAnd I can see I did a second lookup for\nwhat it pointed to.\n\n456\n00:23:17.100 --> 00:23:20.880\nIt pointed to webserver01, and here it is,\nand there were two different IPs for\n\n457\n00:23:20.880 --> 00:23:22.150\nwebserver01.\n\n458\n00:23:22.150 --> 00:23:26.130\nThat lookup happened against this server.\n\n459\n00:23:26.130 --> 00:23:29.240\nI didn't see those entries in\nthe file on the hard drive, but\n\n460\n00:23:29.240 --> 00:23:30.230\nthe lookup went just fine.\n\n461\n00:23:30.230 --> 00:23:32.960\nThat means it is in RAM, and it will get\nwritten to the hard drive eventually,\n\n462\n00:23:32.960 --> 00:23:34.820\nyou just have to wait it out.\n\n463\n00:23:34.820 --> 00:23:36.080\nAnd we don't normally care, right?\n\n464\n00:23:36.080 --> 00:23:37.511\nCuz again, if we reboot or whatever,\n\n465\n00:23:37.511 --> 00:23:39.497\nwe can just get the whole\nzone from the master again.\n\n466\n00:23:39.497 --> 00:23:40.926\nIt doesn't really matter.\n\n467\n00:23:40.926 --> 00:23:44.884\nNow, I could repeat that lookup\nagainst the other server,\n\n468\n00:23:44.884 --> 00:23:47.438\nif I wanted to find out if it was there.\n\n469\n00:23:47.438 --> 00:23:51.580\nLet's see,\n10.0.222.101 is the other server.\n\n470\n00:23:51.580 --> 00:23:53.700\nAnd do the lookup there and see.\n\n471\n00:23:53.700 --> 00:23:55.752\nIf you're ever having a problem\nwhere it doesn't resolve,\n\n472\n00:23:55.752 --> 00:23:57.008\nthis is a great way to troubleshoot.\n\n473\n00:23:57.008 --> 00:23:59.890\nBecause with dig,\nyou're overriding the DNS server.\n\n474\n00:23:59.890 --> 00:24:02.984\nAnd you're not just using whatever\nyour system is set to use.\n\n475\n00:24:02.984 --> 00:24:05.760\nSo I can say, let me do this\nlookup against the master and\n\n476\n00:24:05.760 --> 00:24:08.951\nthen let me repeat the lookup\nagainst the slave and just verify,\n\n477\n00:24:08.951 --> 00:24:11.215\nam I getting that response\nback from the two?\n\n478\n00:24:11.215 --> 00:24:13.918\nAll right, so that's great way to do that.\n\n479\n00:24:13.918 --> 00:24:17.070\nAnother thing that you can do is\nyou can test the zone transfer\n\n480\n00:24:17.070 --> 00:24:18.580\nfunctionality, right?\n\n481\n00:24:18.580 --> 00:24:23.220\nThe zone transfer functionality is really\nbuilt around the ls or the List command.\n\n482\n00:24:23.220 --> 00:24:25.040\nAnd it's kinda like on a folder, right?\n\n483\n00:24:25.040 --> 00:24:27.570\nIf I wanna see everything in this folder,\nI type ls, and\n\n484\n00:24:27.570 --> 00:24:29.252\nI get a list of the files, right?\n\n485\n00:24:29.252 --> 00:24:31.240\nWell there's not much here,\nbut I get a list.\n\n486\n00:24:31.240 --> 00:24:35.233\nThe same thing works with nslookup,\nthat you can use nslookup and\n\n487\n00:24:35.233 --> 00:24:36.766\nyou can switch a server.\n\n488\n00:24:36.766 --> 00:24:44.140\nAnd so I am on the slave right now,\nI'm on 10.0.222.102.\n\n489\n00:24:44.140 --> 00:24:48.713\nAnd I'm now connected to\n10.0.222.101 as my server.\n\n490\n00:24:48.713 --> 00:24:53.830\nSo here's my, wait, that's\nthe service address, and I'm on 102.\n\n491\n00:24:53.830 --> 00:24:58.800\nNow, if I run ls, that's gonna say,\ngive me the whole zone, or you\n\n492\n00:24:58.800 --> 00:25:03.310\ncan even follow it up with a particular\nzone if you wanna specify different ones.\n\n493\n00:25:03.310 --> 00:25:04.600\nI'm saying, give me the whole zone.\n\n494\n00:25:04.600 --> 00:25:06.480\nThat's effectively a zone transfer.\n\n495\n00:25:06.480 --> 00:25:09.040\nAnd that's blocked by default.\n\n496\n00:25:09.040 --> 00:25:12.800\nAnd if I run that and it's allowed, shoot.\n\n497\n00:25:12.800 --> 00:25:15.070\nThere's more than one version of nslookup,\nand\n\n498\n00:25:15.070 --> 00:25:17.020\nin some versions you don't\nhave the ls command.\n\n499\n00:25:17.020 --> 00:25:20.690\nAnd I've got one that doesn't\nhave the ls command, darn it.\n\n500\n00:25:20.690 --> 00:25:23.890\nLike, on a Windows machine,\nMicrosoft's left ls implemented.\n\n501\n00:25:23.890 --> 00:25:28.520\nOn this one, even help command is\nstripped down on this one, shoot.\n\n502\n00:25:28.520 --> 00:25:30.580\nSo I've got one of the stripped\ndown versions of nslookup\n\n503\n00:25:30.580 --> 00:25:31.670\nthat's missing all of this.\n\n504\n00:25:31.670 --> 00:25:33.830\nBut you can do ls, and\nit will do a transfer,\n\n505\n00:25:33.830 --> 00:25:36.460\nit'll basically pull the entire zone.\n\n506\n00:25:36.460 --> 00:25:38.450\nWe can do the same thing with dig.\n\n507\n00:25:38.450 --> 00:25:41.820\nLet me pull up dig's\ndocumentation here real quick.\n\n508\n00:25:41.820 --> 00:25:44.280\nDig has an option where you\ncan come in and tell it hey,\n\n509\n00:25:44.280 --> 00:25:49.180\njust grab the whole stinking thing, and\nit's effectively doing a zone transfer.\n\n510\n00:25:49.180 --> 00:25:52.560\nSo when we do a, here, like this.\n\n511\n00:25:52.560 --> 00:25:55.680\nWith dig you can do a -t,\nto specify the type.\n\n512\n00:25:55.680 --> 00:25:59.770\nAnd normally you'd say like, a,\nI'm pulling an a record or whatever.\n\n513\n00:25:59.770 --> 00:26:04.270\nBut if you set that type to any,\nwhere it's gonna grab everything,\n\n514\n00:26:04.270 --> 00:26:07.390\nthen it's the equivalent of doing a zone\ntransfer, it'll bring all that in.\n\n515\n00:26:07.390 --> 00:26:10.970\nYou can do it incremental, like IXFRs,\nincremental zone transfers.\n\n516\n00:26:10.970 --> 00:26:13.070\nOr AXFRs, if you wanna try and\ngrab the whole thing.\n\n517\n00:26:14.160 --> 00:26:16.340\nSo that's basically what\nthey're doing there.\n\n518\n00:26:16.340 --> 00:26:17.880\nSo if you see here where it says,\n\n519\n00:26:17.880 --> 00:26:22.100\na zone transfer can be requested\nby specifying a type of AXFR.\n\n520\n00:26:22.100 --> 00:26:23.190\nI can come in here and\n\n521\n00:26:23.190 --> 00:26:28.870\nI can say dig @10.0.222.101,\nso hitting the other server.\n\n522\n00:26:28.870 --> 00:26:34.920\nI wanna pull lab.itpro.tv and\nI'm gonna do a type of AXFR.\n\n523\n00:26:34.920 --> 00:26:36.690\nI'm gonna do a zone transfer.\n\n524\n00:26:36.690 --> 00:26:39.770\nAnd when it reaches out I\nshould get the whole zone..\n\n525\n00:26:39.770 --> 00:26:44.750\nIf I don't, then maybe I am not listed on\nthe approved zone transfer list, right.\n\n526\n00:26:44.750 --> 00:26:47.200\nSo this is a great way to test\nwhether zone transfers are allowed and\n\n527\n00:26:47.200 --> 00:26:49.580\neven perform one outside of bind.\n\n528\n00:26:49.580 --> 00:26:52.990\nCuz bind is doing everything\nin the background, right?\n\n529\n00:26:52.990 --> 00:26:54.190\nWe don't necessarily see its errors.\n\n530\n00:26:54.190 --> 00:26:57.240\nWe have to go dig through the syslog or\njournalctl.\n\n531\n00:26:57.240 --> 00:27:00.500\nAnd go in and\ntry to find out what happened there.\n\n532\n00:27:00.500 --> 00:27:02.450\nWhich, I mean, that's where you'd find it.\n\n533\n00:27:02.450 --> 00:27:06.852\nIf you do a journalctl-x will\n\n534\n00:27:06.852 --> 00:27:12.140\nnormally bring it up and I probably\nshould have tailed it, well anyhow.\n\n535\n00:27:12.140 --> 00:27:14.146\nLet me just pipe that into tail.\n\n536\n00:27:14.146 --> 00:27:17.037\nThere we go, and you could see\nthe last handful of lines and\n\n537\n00:27:17.037 --> 00:27:20.890\nthe bind encountered an error,\nwe'd normally spot it right in here.\n\n538\n00:27:20.890 --> 00:27:27.250\nI've got a start-up of a unit here which\nis, well that's just system D starting up.\n\n539\n00:27:27.250 --> 00:27:28.180\nShoot, it's too late.\n\n540\n00:27:28.180 --> 00:27:31.110\nI'd have to restart bind,\nto get at kind of at the tail.\n\n541\n00:27:31.110 --> 00:27:32.440\nOr we could jump in there and search.\n\n542\n00:27:32.440 --> 00:27:33.810\nMaybe we can hunt it down.\n\n543\n00:27:33.810 --> 00:27:36.350\nDigging through logs isn't fun though,\nis indeed the point.\n\n544\n00:27:36.350 --> 00:27:39.850\nSo if I'm getting an error I can say, all\nright, let me just stick bind to the side,\n\n545\n00:27:39.850 --> 00:27:44.480\nand I'm gonna use dig and\nI'm gonna do a zone transfer right here.\n\n546\n00:27:44.480 --> 00:27:47.400\nI'm on the host, I'm on DNS2.\n\n547\n00:27:47.400 --> 00:27:49.720\nSo if it works for\ndig it should work for bind.\n\n548\n00:27:49.720 --> 00:27:51.710\nThe difference here is that dig,\n\n549\n00:27:51.710 --> 00:27:54.620\nif I get an error I'll actually\nsee it right here on the screen.\n\n550\n00:27:54.620 --> 00:27:58.360\nIt'll tell me what the error is and what\nmy problem is, and then we can try and\n\n551\n00:27:58.360 --> 00:28:00.130\nsort it out and fix it from there.\n\n552\n00:28:00.130 --> 00:28:02.500\n&gt;&gt; Lot of great information\non configuring replication.\n\n553\n00:28:02.500 --> 00:28:04.920\nI can see where this can get you in\ntrouble just as much as it can help\n\n554\n00:28:04.920 --> 00:28:05.538\nyou, for sure.\n\n555\n00:28:05.538 --> 00:28:07.347\n&gt;&gt; [LAUGH]\n&gt;&gt; Don, it does look like it though,\n\n556\n00:28:07.347 --> 00:28:08.860\nwe are coming to the end\nof another episode.\n\n557\n00:28:08.860 --> 00:28:11.760\nBut before we do, do you have any\nadditional words of wisdom about\n\n558\n00:28:11.760 --> 00:28:15.580\nconfiguring your replication, or\nverification, or even troubleshooting?\n\n559\n00:28:15.580 --> 00:28:17.230\n&gt;&gt; You mentioned monitoring,\n\n560\n00:28:17.230 --> 00:28:19.780\nright, that we need to keep an eye\non this stuff after it's done.\n\n561\n00:28:19.780 --> 00:28:22.780\nYou turn it on and you kinda walk away,\neverything's working really well.\n\n562\n00:28:22.780 --> 00:28:24.370\nBut you do need to double\ncheck from time to time,\n\n563\n00:28:24.370 --> 00:28:26.320\nmake sure that your\nsecondaries are healthy.\n\n564\n00:28:26.320 --> 00:28:29.650\nAnd then be aware that you can use it for\nload balancing.\n\n565\n00:28:29.650 --> 00:28:31.790\nYou can also use it for failover though.\n\n566\n00:28:31.790 --> 00:28:37.530\nIf the master were to fail and go offline,\nI could jump over to a secondary\n\n567\n00:28:37.530 --> 00:28:42.580\nand I could copy that zone file out of\nthe slave folder into the main folder and\n\n568\n00:28:42.580 --> 00:28:44.390\nthen add it as a zone in\nthat system as the master.\n\n569\n00:28:44.390 --> 00:28:46.710\nI could turn a slave into\nthe master if I needed to.\n\n570\n00:28:46.710 --> 00:28:49.070\nIt is a manual process, though.\n\n571\n00:28:49.070 --> 00:28:50.810\nMost of us never worry about it, though.\n\n572\n00:28:50.810 --> 00:28:54.360\nYou just leave it as a slave, because as a\nslave, yeah, you can't make changes to it.\n\n573\n00:28:54.360 --> 00:28:55.920\nOr you're not supposed\nto make changes to it.\n\n574\n00:28:55.920 --> 00:28:57.820\nBut it'll still run and answer.\n\n575\n00:28:57.820 --> 00:29:02.110\nSo, the master is offline but\nyour DNS zone is still working.\n\n576\n00:29:02.110 --> 00:29:04.795\nAnd now you can go and bring the master\nback online, in your own time.\n\n577\n00:29:04.795 --> 00:29:06.150\n[COUGH] Excuse me.\n\n578\n00:29:06.150 --> 00:29:08.210\nYou just can't add new\nrecords in the meantime.\n\n579\n00:29:08.210 --> 00:29:09.750\nSo, that's basically it.\n\n580\n00:29:09.750 --> 00:29:11.820\nIt's a pretty straightforward process.\n\n581\n00:29:11.820 --> 00:29:15.560\n&gt;&gt; Well Don, we appreciate you taking the\ntime to be here with us in the studios.\n\n582\n00:29:15.560 --> 00:29:18.060\nAnd we appreciate you,\nthe viewer, watching out there.\n\n583\n00:29:18.060 --> 00:29:20.770\nSigning out for ITProTV,\nI've been your host Wes Bryan.\n\n584\n00:29:20.770 --> 00:29:21.462\n&gt;&gt; And I'm Don Pezet.\n\n585\n00:29:21.462 --> 00:29:22.584\n&gt;&gt; And we'll see you next time.\n\n586\n00:29:22.584 --> 00:29:30.173\n[MUSIC]\n\n587\n00:29:30.173 --> 00:29:35.370\n&gt;&gt; Thank you for watching ITProTV\n\n",
          "vimeoId": "195795502"
        }
      ],
      "title": "BIND DNS Server"
    },
    {
      "episodes": [
        {
          "description": "In this episode you will see how to install another DNS program called Unbound. Unbound is a newer, faster but not as flexible alternative which is usually used in conjunction with another system such as BIND. You will learn how to edit the configuration file to customize your server, enable logging, enable access controls, verify configuration files, start the service and allow Unbound through the firewalld.",
          "length": "1634",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-9-1-installing_unbound-120816-PGM.00_00_12_03.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-9-1-installing_unbound-120816-PGM.00_00_12_03.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-9-1-installing_unbound-120816-PGM.00_00_12_03.Still001-sm.jpg",
          "title": "Installing Unbound",
          "transcript": "WEBVTT\n\n1\n00:00:00.220 --> 00:00:07.032\nWelcome to ITProTV, I'm your host-\n&gt;&gt; [CROSSTALK]\n\n2\n00:00:07.032 --> 00:00:08.452\n[MUSIC]\n\n3\n00:00:08.452 --> 00:00:12.348\n&gt;&gt; You're watching ITPRO.TV.\n\n4\n00:00:12.348 --> 00:00:14.718\n&gt;&gt; Welcome to another DNS text skill show.\n\n5\n00:00:14.718 --> 00:00:16.902\nI'm your host, Cherokee Boose.\n\n6\n00:00:16.902 --> 00:00:17.768\nIn this episode,\n\n7\n00:00:17.768 --> 00:00:21.483\nwe're gonna be taking a little look at\nanother DNS utility called Unbound.\n\n8\n00:00:21.483 --> 00:00:25.121\nToday, we have Don Pezet in studio to\ngo ahead and help us with this concept.\n\n9\n00:00:25.121 --> 00:00:26.416\nThank you for being here today, Don.\n\n10\n00:00:26.416 --> 00:00:27.370\n&gt;&gt; Thanks for having me, Cherokee.\n\n11\n00:00:27.370 --> 00:00:28.990\nNow just ready to dive to Unbound.\n\n12\n00:00:28.990 --> 00:00:32.430\nNow, if you've never heard of it,\ndon't feel ashamed, or anything like that.\n\n13\n00:00:32.430 --> 00:00:34.230\nIt's not the most popular\nDNS server in the world, but\n\n14\n00:00:34.230 --> 00:00:38.380\nit is actually one that's gaining a lot\nof steam, especially in the BSD world.\n\n15\n00:00:38.380 --> 00:00:42.920\nWhat you're finding is that Open BSD and\nfree BSD, and those guys are starting to\n\n16\n00:00:42.920 --> 00:00:45.880\nshift with Unbound enabled\nby default instead of BIND.\n\n17\n00:00:45.880 --> 00:00:47.910\nAnd so\nit's really replacing that functionality,\n\n18\n00:00:47.910 --> 00:00:50.120\nand we're seeing it grow more and\nmore common.\n\n19\n00:00:50.120 --> 00:00:56.270\nIt's not as flexible as BIND is, so some\npeople will stick to BIND and they should.\n\n20\n00:00:56.270 --> 00:00:57.830\nBut it does serve a particular purpose.\n\n21\n00:00:57.830 --> 00:01:01.470\nThe idea behind Unbound is\nthat BIND is really old.\n\n22\n00:01:01.470 --> 00:01:04.280\nIt was written over 30 years ago,\nand it shows.\n\n23\n00:01:04.280 --> 00:01:07.870\nRight, it just wasn't developed to hit\nsome of the scales that we hit today.\n\n24\n00:01:07.870 --> 00:01:10.330\nSo, Unbound is newer,\nit's sleeker, it's smaller,\n\n25\n00:01:10.330 --> 00:01:14.540\nit's faster, and\nit's written in a modern method.\n\n26\n00:01:14.540 --> 00:01:18.950\nSo, it's got a lot of good things going\nfor it, but it's got some negatives, too.\n\n27\n00:01:18.950 --> 00:01:21.530\nOne of the ways that\nUnbound achieves its speed\n\n28\n00:01:21.530 --> 00:01:25.640\nis that it doesn't support\nall the stuff that BIND does.\n\n29\n00:01:25.640 --> 00:01:31.790\nSo, what Unbound really does is it's\nprimarily a DNS caching server.\n\n30\n00:01:31.790 --> 00:01:35.720\nSo, if I just want to have a local DNS\nserver that's caching records to speed up\n\n31\n00:01:35.720 --> 00:01:37.350\nlookups, Unbound does a great job.\n\n32\n00:01:37.350 --> 00:01:39.000\nIt does better than BIND.\n\n33\n00:01:39.000 --> 00:01:42.180\nBut if I wanna start hosting a bunch\nof zones, and reverse lookup zones and\n\n34\n00:01:42.180 --> 00:01:46.040\nall these records, well,\nI'll start to hit a few little problems.\n\n35\n00:01:46.040 --> 00:01:51.320\nThere's things that are supported under\nBIND that aren't supported under Unbound.\n\n36\n00:01:51.320 --> 00:01:55.330\nSo, often times, we'll deploy\nUnbound in conjunction with BIND, so\n\n37\n00:01:55.330 --> 00:01:57.090\nyou're actually running both.\n\n38\n00:01:57.090 --> 00:02:01.320\nUnbound is your primary DNS server,\nand its doing all the acceleration and\n\n39\n00:02:01.320 --> 00:02:02.480\ncaching and stuff.\n\n40\n00:02:02.480 --> 00:02:05.660\nBut then the moment you need a zone,\nyou'll put a forward entry, and\n\n41\n00:02:05.660 --> 00:02:07.560\nUnbound forwards over to\na standard bound server.\n\n42\n00:02:07.560 --> 00:02:11.300\nSo, it usually gets used in tandem, but\nUnbound is very powerful, and I'm gonna\n\n43\n00:02:11.300 --> 00:02:14.210\nshow you right here in this episode how to\nget it installed, how to get it set up.\n\n44\n00:02:14.210 --> 00:02:15.800\nAnd we'll see how to create zones and\n\n45\n00:02:15.800 --> 00:02:19.540\nthings in Unbound without\nforwarding to a BIND server.\n\n46\n00:02:19.540 --> 00:02:22.120\nBut if you do need to\nset that environment up,\n\n47\n00:02:22.120 --> 00:02:23.750\nwe've already done a couple\nof episodes on BIND.\n\n48\n00:02:23.750 --> 00:02:25.430\nYou can check that out,\nand see how that works.\n\n49\n00:02:25.430 --> 00:02:26.810\nThey do work together really well.\n\n50\n00:02:28.020 --> 00:02:29.210\nAll right, so let's get started.\n\n51\n00:02:29.210 --> 00:02:31.050\nI'm on a CentOS 7 box.\n\n52\n00:02:31.050 --> 00:02:34.900\nSo, what I'm about to show you works\non CentOS, RedHat, and Fedora.\n\n53\n00:02:34.900 --> 00:02:39.760\nIf you're on a Debian based\nsystem like Ubuntu or Debian,\n\n54\n00:02:39.760 --> 00:02:42.120\nthen installing it is\njust a little different.\n\n55\n00:02:42.120 --> 00:02:44.610\nYou'll have to use apt-get instead of yum,\nbut otherwise,\n\n56\n00:02:44.610 --> 00:02:46.760\nthe rest of the steps\nare all basically the same.\n\n57\n00:02:46.760 --> 00:02:48.950\nEach distro has its own little installer.\n\n58\n00:02:48.950 --> 00:02:53.280\nBut I wanna do is I wanna get Unbound\ninstalled, and it couldn't be easier.\n\n59\n00:02:53.280 --> 00:03:00.100\nThe command that we used to install\nit is gonna be yum install unbound.\n\n60\n00:03:00.100 --> 00:03:02.300\nNow, you do not need to be\nan administrator for this.\n\n61\n00:03:02.300 --> 00:03:03.945\nActually, the majority of\nwhat we do in this show,\n\n62\n00:03:03.945 --> 00:03:05.280\nyou're gonna need to be an admin.\n\n63\n00:03:05.280 --> 00:03:08.730\nSo, I could do pseudo yum install unbound,\nand do then do that for\n\n64\n00:03:08.730 --> 00:03:11.970\nevery command that I run, but\nthat's gonna get old really fast.\n\n65\n00:03:11.970 --> 00:03:16.640\nSo, what I'm gonna do is I'm gonna run su,\nand elevate my privileges, so\n\n66\n00:03:16.640 --> 00:03:17.680\nthat I become root.\n\n67\n00:03:17.680 --> 00:03:19.200\nAnd so now,\nI don't have to type that every time.\n\n68\n00:03:19.200 --> 00:03:23.290\nSo, I'm gonna do yum install unbound,\nall right?\n\n69\n00:03:23.290 --> 00:03:26.810\nIt's gonna reach out, it should find those\npackages and get them installed, and\n\n70\n00:03:26.810 --> 00:03:28.380\nthen I've got Unbound.\n\n71\n00:03:28.380 --> 00:03:29.750\nI mean, I need to start it and enable it,\n\n72\n00:03:29.750 --> 00:03:34.410\nI need to do a configuration, well,\nthat word need might be an overstatement.\n\n73\n00:03:34.410 --> 00:03:36.840\nIf I'm just trying to\nset up a caching server,\n\n74\n00:03:36.840 --> 00:03:39.960\nthe default configuration\nis actually fine.\n\n75\n00:03:39.960 --> 00:03:44.040\nI can stick with my defaults,\nstart the unbound service, and\n\n76\n00:03:44.040 --> 00:03:45.000\nI'm now a caching server.\n\n77\n00:03:45.000 --> 00:03:47.910\nI can go and configure all my work\nstations to point to this server.\n\n78\n00:03:47.910 --> 00:03:50.310\nThis server will then forward\nup to the root pin servers.\n\n79\n00:03:50.310 --> 00:03:52.170\nAnd the rest of the DNS hierarchy, and\n\n80\n00:03:52.170 --> 00:03:55.590\nit will start caching and\nkeeping a record of all the look ups.\n\n81\n00:03:55.590 --> 00:03:57.720\nSo, we get faster DNS look ups and\npush that out.\n\n82\n00:03:57.720 --> 00:04:01.315\nSo, this could be the shortest episode\non record if I just stop right here.\n\n83\n00:04:01.315 --> 00:04:02.380\n&gt;&gt; [LAUGH] That's it.\n\n84\n00:04:02.380 --> 00:04:03.960\n&gt;&gt; Pow, Unbound this cache and\nserver, done.\n\n85\n00:04:05.100 --> 00:04:05.930\n&gt;&gt; That's not fun.\n\n86\n00:04:05.930 --> 00:04:06.511\n&gt;&gt; No, it really isn't.\n\n87\n00:04:06.511 --> 00:04:07.400\n&gt;&gt; [LAUGH]\n&gt;&gt; So,\n\n88\n00:04:07.400 --> 00:04:08.720\nwe are gonna have go a little further.\n\n89\n00:04:08.720 --> 00:04:10.990\nWe're gonna have to add some more to it,\nright?\n\n90\n00:04:10.990 --> 00:04:12.600\nSo, let's start dive into\nits configuration and\n\n91\n00:04:12.600 --> 00:04:14.730\nsee what we need to do if\nthe server's set up right.\n\n92\n00:04:14.730 --> 00:04:16.960\nAnd then we'll jump into the zones and\nrecords and\n\n93\n00:04:16.960 --> 00:04:19.940\nall that other good stuff, probably\nin the next episode, to see all that.\n\n94\n00:04:19.940 --> 00:04:20.550\n&gt;&gt; All right.\n\n95\n00:04:20.550 --> 00:04:25.020\n&gt;&gt; Now, whenever I turn on Unbound,\nby default, it's ready for\n\n96\n00:04:25.020 --> 00:04:28.610\npeople to query against it, and\nit's set to do recursive queries.\n\n97\n00:04:28.610 --> 00:04:30.190\nSo, if I ask you a question\nthat doesn't know the answer,\n\n98\n00:04:30.190 --> 00:04:31.970\nit will go and find the answer for me.\n\n99\n00:04:31.970 --> 00:04:35.410\nWhich means it's perfectly set\nup as a caching server, and\n\n100\n00:04:35.410 --> 00:04:39.050\nit's perfectly set up to be\nthe target of DNS reflection attacks.\n\n101\n00:04:39.050 --> 00:04:41.320\nSo, if I were to put this on the Internet,\n\n102\n00:04:41.320 --> 00:04:45.320\nI would be a participant in a denial\nof service attack in very short order.\n\n103\n00:04:45.320 --> 00:04:47.070\nSo, it's really a bad situation.\n\n104\n00:04:47.070 --> 00:04:49.190\nWe definitely wanna change that and\nsecure it a little bit.\n\n105\n00:04:49.190 --> 00:04:52.930\n&gt;&gt; And we saw what happened\nwith the DynDNS disaster, so I\n\n106\n00:04:52.930 --> 00:04:55.820\ncan only imagine that we're gonna see more\nof those types of attacks in the future.\n\n107\n00:04:55.820 --> 00:04:59.100\n&gt;&gt; Absolutely, if this were a local-only\nserver, so it's caching, and\n\n108\n00:04:59.100 --> 00:05:01.160\nit's on my LAN,\nI might not worry about that.\n\n109\n00:05:01.160 --> 00:05:02.610\nBut if it's exposed to the Internet,\n\n110\n00:05:02.610 --> 00:05:04.700\nyou've gotta secure who's\nallowed to query it.\n\n111\n00:05:04.700 --> 00:05:06.200\nSo that's what I'm gonna do next.\n\n112\n00:05:06.200 --> 00:05:13.750\nAnd Unbound keeps all of its configuration\nin /etc/unbound, that folder right there.\n\n113\n00:05:13.750 --> 00:05:16.850\nAnd so, if I take a look in there, I'll\nsee a couple of different files, the neat\n\n114\n00:05:16.850 --> 00:05:20.780\npart about Unbound is really everything we\ndo is gonna be right here in this folder.\n\n115\n00:05:20.780 --> 00:05:22.880\nRemember, if you watched\nour BIND episodes,\n\n116\n00:05:22.880 --> 00:05:26.360\na lot of it went into /var/named and\nall that.\n\n117\n00:05:26.360 --> 00:05:30.090\nUnbound pretty much keeps everything\nright here, unless you manipulate it.\n\n118\n00:05:30.090 --> 00:05:32.740\nThere's some logs and\nthings that can go into /var.\n\n119\n00:05:32.740 --> 00:05:38.980\nSo, what I wanna do is I wanna take a look\nat this file right here, unbound.conf.\n\n120\n00:05:38.980 --> 00:05:41.660\nSo, I'm gonna edit that,\nand when you go into it,\n\n121\n00:05:41.660 --> 00:05:46.030\nit's a very well commented file, right,\nso it's got tons of information in here.\n\n122\n00:05:46.030 --> 00:05:49.230\nAnd what you'll notice is that most\nlines have a little pound symbol, or\n\n123\n00:05:49.230 --> 00:05:52.000\nhashtag at the beginning, and\nthat means it's a comment line.\n\n124\n00:05:52.000 --> 00:05:55.130\nIt's not processed, anything with that\nlittle pound symbol gets ignored.\n\n125\n00:05:55.130 --> 00:05:59.450\nSo, I see I'm starting a section here\ncalled server, and then under it,\n\n126\n00:05:59.450 --> 00:06:03.090\nverbalcity is set to 1,\nstatistic intervals set to 0, and so on.\n\n127\n00:06:03.090 --> 00:06:04.910\nAnd it explains what that means.\n\n128\n00:06:04.910 --> 00:06:06.710\nWhat is statistic interval 0?\n\n129\n00:06:06.710 --> 00:06:10.970\nWell, set to null or 0 to disable.\n\n130\n00:06:10.970 --> 00:06:12.460\nI'm not doing statistics.\n\n131\n00:06:12.460 --> 00:06:16.080\nBut if I bump that up,\nit's a interval in seconds,\n\n132\n00:06:16.080 --> 00:06:18.410\nhow often it updates the statistics.\n\n133\n00:06:18.410 --> 00:06:20.080\nSo, I may need those frequently,\n\n134\n00:06:20.080 --> 00:06:23.190\nI may not need them frequently,\nthis is all something we can tweak.\n\n135\n00:06:23.190 --> 00:06:25.370\nBut the majority of this,\nwe're gonna leave be.\n\n136\n00:06:25.370 --> 00:06:28.140\nIt's not until we get down to this\ninterface section were we see the first\n\n137\n00:06:28.140 --> 00:06:29.840\nthing we need to modify, right?\n\n138\n00:06:29.840 --> 00:06:32.920\nThese are the interfaces that\nunbound is listening on, and\n\n139\n00:06:32.920 --> 00:06:35.600\nby default is listening on, all of them.\n\n140\n00:06:35.600 --> 00:06:39.570\nI mean, it kind of looks like none, but\nit is actually listening to all of them,\n\n141\n00:06:39.570 --> 00:06:43.470\nwhich would correspond to\nthis interface 0, 0, 0, 0.\n\n142\n00:06:43.470 --> 00:06:46.360\nBut what you wanna do is you wanna tie\nit to the interface that's going to be\n\n143\n00:06:46.360 --> 00:06:48.150\nthe one your clients connect to.\n\n144\n00:06:48.150 --> 00:06:50.830\nSo, I'm going to add another line here.\n\n145\n00:06:50.830 --> 00:06:53.540\nAnd there's different people who have\ndifferent thoughts on how to do this.\n\n146\n00:06:53.540 --> 00:06:55.180\nA lot of people like to stick\ntheir changes all the way at\n\n147\n00:06:55.180 --> 00:06:56.210\nthe bottom of the file.\n\n148\n00:06:56.210 --> 00:07:00.080\nThe problem with the unbound file is\nthat it's divided into sections, so\n\n149\n00:07:00.080 --> 00:07:02.340\nyou'd have to go to the bottom of\neach section, which gets messy, so\n\n150\n00:07:02.340 --> 00:07:06.100\nI usually just interject right\nin along the other stuff.\n\n151\n00:07:06.100 --> 00:07:09.290\nI'll be able to spot my changes,\ncuz it won't have a hashtag before it.\n\n152\n00:07:09.290 --> 00:07:16.400\nAnd so, I can say interface: and then\nthe IPv4 or IPv6 address of the interface.\n\n153\n00:07:16.400 --> 00:07:19.440\nIt's nice that it's an address, cuz I can\nmove that address to other interfaces, and\n\n154\n00:07:19.440 --> 00:07:20.640\nthey'll automatically be enabled.\n\n155\n00:07:20.640 --> 00:07:21.853\nSo, I just need to put that in.\n\n156\n00:07:21.853 --> 00:07:26.415\nAnd the interface I'm\ndoing is 10.0.222.103.\n\n157\n00:07:26.415 --> 00:07:28.580\nAll right, so now,\nI'll be listening on that one.\n\n158\n00:07:28.580 --> 00:07:32.790\nNotice you can override the port number,\nthat normally, DNS runs over port 53,\n\n159\n00:07:32.790 --> 00:07:35.930\nbut you could move this to\nanother port if you want.\n\n160\n00:07:35.930 --> 00:07:37.500\nWhy would I do that?\n\n161\n00:07:37.500 --> 00:07:41.730\nWell, remember how I said I might be\nusing Unbound in conjunction with BIND?\n\n162\n00:07:41.730 --> 00:07:46.070\nIf I'm running both on the same server,\nthey can't both be on port 53, can they?\n\n163\n00:07:46.070 --> 00:07:49.610\nSo, I might have one on port 53, and\nanother one run on port 53,000, or\n\n164\n00:07:49.610 --> 00:07:52.490\nsomething like that,\nso they don't overlap.\n\n165\n00:07:52.490 --> 00:07:53.615\nSo, I can override that.\n\n166\n00:07:53.615 --> 00:07:56.384\nNormally, we override BIND support-\n&gt;&gt; Okay.\n\n167\n00:07:56.384 --> 00:07:58.112\n&gt;&gt; Because people are talking to Unbound.\n\n168\n00:07:58.112 --> 00:08:00.733\nAnd Unbound is talking to BIND for\nus, right?\n\n169\n00:08:00.733 --> 00:08:04.389\nBut if we're just running Unbound,\nI can leave it the way it is,\n\n170\n00:08:04.389 --> 00:08:07.707\nit'll be on port 53, and\nthat's what I want All right,\n\n171\n00:08:07.707 --> 00:08:11.870\nafter that, now I've got it kinda\nlistening on the right interface.\n\n172\n00:08:11.870 --> 00:08:15.200\nAny other interface, because I put one in,\nany other interface,\n\n173\n00:08:15.200 --> 00:08:16.200\nit will not listen on.\n\n174\n00:08:16.200 --> 00:08:17.769\nSo, if I've got other things,\nit's not going to be there.\n\n175\n00:08:17.769 --> 00:08:23.630\nSome people do like to add\nin interface 127.0.0.1.\n\n176\n00:08:23.630 --> 00:08:28.070\nYou don't technically have to do that,\nbut if you're testing from the server\n\n177\n00:08:28.070 --> 00:08:31.360\nwhich your not really supposed to do,\nthen that's a nice thing to have.\n\n178\n00:08:31.360 --> 00:08:35.025\nYou could also go from\nthese IPv6 side of things.\n\n179\n00:08:35.025 --> 00:08:39.390\nActually, I could just uncomment\nthe one up there but we could say.\n\n180\n00:08:39.390 --> 00:08:40.900\nNo, actually I don't have to loopback for\nthat one.\n\n181\n00:08:40.900 --> 00:08:42.715\nSo ::1 is a loopback for IPv6.\n\n182\n00:08:42.715 --> 00:08:46.030\nSo I could through those in and\nI'll be ready to listen for it, sorry.\n\n183\n00:08:46.030 --> 00:08:49.179\nI saw this ::0 which actually\nmeans any IPv6 address,\n\n184\n00:08:49.179 --> 00:08:51.890\nthat would enable unbound\non all the interfaces.\n\n185\n00:08:51.890 --> 00:08:58.048\nAll right, if we continue down in this\nfile, there's a bunch of other options,\n\n186\n00:08:58.048 --> 00:09:03.060\nand I don't want to spend a huge\namount of time on each of them.\n\n187\n00:09:03.060 --> 00:09:06.040\nYou can override the port numbers for\nthe entire server if you want,\n\n188\n00:09:06.040 --> 00:09:07.860\nwe got port to answer queries on.\n\n189\n00:09:07.860 --> 00:09:09.140\nI'm gonna leave that be.\n\n190\n00:09:09.140 --> 00:09:13.110\nWhat I'm looking for is there's a section\nin here that enables protocols.\n\n191\n00:09:13.110 --> 00:09:19.729\nAnd with DNS, it can use TCP, it can use\nUDP, it can use IPv4, it can use IPv6.\n\n192\n00:09:19.729 --> 00:09:23.372\nAnd so, if we keep scrolling down\nwe'll find the section where\n\n193\n00:09:23.372 --> 00:09:26.065\nit addresses which protocols it's missing.\n\n194\n00:09:26.065 --> 00:09:26.835\nAnd honestly, it'd be faster.\n\n195\n00:09:26.835 --> 00:09:31.105\nAnd, no there it is,\nsometimes it's faster to search, but\n\n196\n00:09:31.105 --> 00:09:34.750\nright here we've got do IPv4,\ndo IPv6, right?\n\n197\n00:09:34.750 --> 00:09:35.833\nYes or no?\n\n198\n00:09:35.833 --> 00:09:38.920\nAnd then we've got do UDP, do TCP.\n\n199\n00:09:38.920 --> 00:09:41.710\nWe can pick what we wanna support.\n\n200\n00:09:41.710 --> 00:09:46.860\nDNS typically uses UDP, unless a response\nis too big to fit in one packet,\n\n201\n00:09:46.860 --> 00:09:48.412\nthen it switches to TCP.\n\n202\n00:09:48.412 --> 00:09:51.070\nMaybe I not always wanna do TCP,\nmaybe I always\n\n203\n00:09:51.070 --> 00:09:55.190\nwanna do UDP to prevent big queries\nthat creates some interesting issues.\n\n204\n00:09:55.190 --> 00:09:57.733\nMaybe I wanna do IPv4 but not IPv6.\n\n205\n00:09:57.733 --> 00:10:01.390\nI can manipulate these values to\ndetermine which one I wanna do.\n\n206\n00:10:01.390 --> 00:10:06.928\nNow I want to do IPv4, so I'm gonna remove\nthe little pound symbol before that.\n\n207\n00:10:06.928 --> 00:10:08.474\nI don't wanna do IPv6.\n\n208\n00:10:08.474 --> 00:10:13.718\nSo I can leave it commented out or\nI can change it to no, right, do-ipv6: no.\n\n209\n00:10:13.718 --> 00:10:16.740\n&gt;&gt; Would you need to go ahead and\nremove the hashtag?\n\n210\n00:10:16.740 --> 00:10:19.370\n&gt;&gt; Yeah, it won't process it\nwhile that hashtag is there, so\n\n211\n00:10:19.370 --> 00:10:19.960\nI'd have to change it.\n\n212\n00:10:19.960 --> 00:10:22.337\nWell, actually, it kinda comes\ndown to what's the default, and\n\n213\n00:10:22.337 --> 00:10:24.127\nI don't remember what\nthe default is on that one.\n\n214\n00:10:24.127 --> 00:10:27.280\nBetter to set it [LAUGH] and\nnot have to worry.\n\n215\n00:10:27.280 --> 00:10:29.119\nBut I believe the default is yes.\n\n216\n00:10:29.119 --> 00:10:33.950\nUsually I put the default in the notes and\nso usually that's gonna be the default.\n\n217\n00:10:33.950 --> 00:10:35.799\nSo I had do IPv4 yes already, so\n\n218\n00:10:35.799 --> 00:10:39.030\nI probably haven't actually\nchanged anything there.\n\n219\n00:10:39.030 --> 00:10:42.420\nSame thing when it comes to UDP and TCP.\n\n220\n00:10:42.420 --> 00:10:46.190\nI wanna do those,and I'm just gonna\nremove the hashtag whether they're\n\n221\n00:10:46.190 --> 00:10:47.050\ndefault or not.\n\n222\n00:10:47.050 --> 00:10:49.921\nNow I know that those are gonna\nbe turned on, all right?\n\n223\n00:10:49.921 --> 00:10:53.978\nAnd for IPv6, if I wanna know for\na fact that I'm not doing it,\n\n224\n00:10:53.978 --> 00:10:55.827\nI can just change that to no.\n\n225\n00:10:55.827 --> 00:10:57.891\nAll right, so now I've got that set to.\n\n226\n00:10:57.891 --> 00:11:01.850\nI still haven't really secured my system\nvery much, so I need to deal with that.\n\n227\n00:11:01.850 --> 00:11:03.639\nAnd to secure the system,\nthere's two things I do.\n\n228\n00:11:03.639 --> 00:11:06.012\nOne, I enable logging.\n\n229\n00:11:06.012 --> 00:11:07.968\nUnbound doesn't log by default.\n\n230\n00:11:07.968 --> 00:11:11.445\nBy default, it just looks at this config,\nit runs in RAM and that's it,\n\n231\n00:11:11.445 --> 00:11:12.710\nno log files are created.\n\n232\n00:11:12.710 --> 00:11:18.700\nIf it crashes, you'll see logs in your\nsystemd journal or in your syslog.\n\n233\n00:11:18.700 --> 00:11:20.840\nBut otherwise,\nyou don't really see anything.\n\n234\n00:11:20.840 --> 00:11:22.280\nSo I like to turn that on.\n\n235\n00:11:22.280 --> 00:11:25.260\nTurning on logging is really easy,\nyou just have to tell it a path.\n\n236\n00:11:25.260 --> 00:11:28.980\nAnd so, I'm gonna look through here,\nthere's an option in here called logfile\n\n237\n00:11:28.980 --> 00:11:30.900\nand if I try and find it on my own,\nit'll take forever.\n\n238\n00:11:30.900 --> 00:11:32.400\nSo I'm just gonna search for logfile.\n\n239\n00:11:33.510 --> 00:11:39.376\nAnd it says that it found it, but\nit didn't actually find it, there we go.\n\n240\n00:11:39.376 --> 00:11:44.611\nSo I've got this section right here, the\nlog file, :: means log to stderr, right?\n\n241\n00:11:44.611 --> 00:11:48.901\nSo that means if it's empty, which it is,\nit's gonna log to standard error,\n\n242\n00:11:48.901 --> 00:11:51.631\nwhich means it would log to syslog or\nwhatever, or\n\n243\n00:11:51.631 --> 00:11:54.780\nreally just log to memory\nin the screen output.\n\n244\n00:11:54.780 --> 00:11:58.090\nBut I'm not gonna have screen output,\nthis as server.\n\n245\n00:11:58.090 --> 00:12:02.086\nSo I'm gonna override that and\n\n246\n00:12:02.086 --> 00:12:09.170\nI'm gonna point it to /var/log/unbound,\nright?\n\n247\n00:12:09.170 --> 00:12:12.305\nSo now it's gonna generate that log and\nit's gonna save it into that folder so\n\n248\n00:12:12.305 --> 00:12:13.327\nI'll have access to it.\n\n249\n00:12:13.327 --> 00:12:15.717\nThat's really important cuz when I'm\ntroubleshooting a crash I need to be able\n\n250\n00:12:15.717 --> 00:12:16.511\nto see what the error was.\n\n251\n00:12:16.511 --> 00:12:17.772\n&gt;&gt; To debug properly.\n\n252\n00:12:17.772 --> 00:12:21.340\n&gt;&gt; Yeah, cuz I'm not gonna be logged\ninto the server watching standard error,\n\n253\n00:12:21.340 --> 00:12:22.670\nit's not gonna happen.\n\n254\n00:12:22.670 --> 00:12:24.525\nSo this'll make sure\nthat I'm able to see it.\n\n255\n00:12:24.525 --> 00:12:27.730\nAll right, so I’ve got that in place.\n\n256\n00:12:27.730 --> 00:12:30.290\nThe other thing that I wanna\ndo is I wanna restrict access.\n\n257\n00:12:30.290 --> 00:12:33.500\nIf this is a caching server\nthat’s exposed to the Internet,\n\n258\n00:12:33.500 --> 00:12:36.520\nI don’t want anybody on the Internet\nusing it, I want my people using it.\n\n259\n00:12:36.520 --> 00:12:38.580\nSo I need to approve their IP ranges.\n\n260\n00:12:38.580 --> 00:12:42.110\nAnd so we can allow them\nin by using access-control.\n\n261\n00:12:42.110 --> 00:12:47.080\nSo I’m just gonna do a quick search for\naccess-control, and here we go.\n\n262\n00:12:47.080 --> 00:12:49.840\nSo here they give us a couple\nof examples of access control.\n\n263\n00:12:49.840 --> 00:12:52.575\nSee how they're refusing some ranges?\n\n264\n00:12:52.575 --> 00:12:53.503\nRight here, they're refusing everything.\n\n265\n00:12:53.503 --> 00:12:54.186\n&gt;&gt; Everyone.\n&gt;&gt; Yeah,\n\n266\n00:12:54.186 --> 00:12:55.723\n[LAUGH] we're not gonna allow anybody.\n\n267\n00:12:55.723 --> 00:13:00.370\nAnd then they turn around and\nthey allow the loopback, or\n\n268\n00:13:00.370 --> 00:13:05.010\nthey refuse all IPv6, they allow\nthe loopback for that and so on.\n\n269\n00:13:05.010 --> 00:13:05.820\nThis is what they're allowing.\n\n270\n00:13:05.820 --> 00:13:08.230\nAnd the default is they're\njust allowing the loopbacks.\n\n271\n00:13:08.230 --> 00:13:11.809\nI can change that to meet\nwhatever my needs happen to be.\n\n272\n00:13:11.809 --> 00:13:16.711\nSo I'm gonna say access control, and\nthen I specify if I have a local\n\n273\n00:13:16.711 --> 00:13:21.363\nnetwork of 10.0.222.0/24,\nI can punch that in.\n\n274\n00:13:21.363 --> 00:13:27.615\nOr here in the studios it's actually /16,\nso I can punch that in.\n\n275\n00:13:27.615 --> 00:13:35.533\nIf I have an individual host, I can say\naccess control 192.168.0.100, right?\n\n276\n00:13:35.533 --> 00:13:38.801\nNow the key thing is,\nyou specify the range,\n\n277\n00:13:38.801 --> 00:13:44.120\nand then whether you allow or refuse,\nyou kinda need to type that in.\n\n278\n00:13:44.120 --> 00:13:45.640\nSo I'm gonna allow these two.\n\n279\n00:13:45.640 --> 00:13:48.142\nIf I stop right here,\nwhat happens to everybody else?\n\n280\n00:13:48.142 --> 00:13:49.488\n&gt;&gt; They get blocked.\n&gt;&gt; They get denied, yeah they get blocked.\n\n281\n00:13:49.488 --> 00:13:51.342\nSo I'm just approving these.\n\n282\n00:13:51.342 --> 00:13:55.849\nThat's gonna stop somebody out on\nthe Internet seeing my caching server,\n\n283\n00:13:55.849 --> 00:13:57.565\nseeing it as recursive, and\n\n284\n00:13:57.565 --> 00:14:02.080\nstarting to proxy queries through\nme to create reflection attacks.\n\n285\n00:14:02.080 --> 00:14:03.200\nThey won't be able to to it.\n\n286\n00:14:03.200 --> 00:14:06.139\nNow an employee on my own network\ncan do it, but I'll see that and\n\n287\n00:14:06.139 --> 00:14:07.346\nwe can fire them, right?\n\n288\n00:14:07.346 --> 00:14:08.794\n&gt;&gt; [LAUGH]\n&gt;&gt; But if it's somebody on the Internet,\n\n289\n00:14:08.794 --> 00:14:09.861\nthere's not really not much you can do.\n\n290\n00:14:09.861 --> 00:14:11.570\nIt's your own fault for not blocking it.\n\n291\n00:14:11.570 --> 00:14:13.910\nSo I'm gonna put access control over that.\n\n292\n00:14:13.910 --> 00:14:16.970\nI could use my firewall\nto do the same thing.\n\n293\n00:14:16.970 --> 00:14:21.847\nThe thing about the firewall, though, is\nit doesn't differentiate between whether\n\n294\n00:14:21.847 --> 00:14:25.739\nor not you're doing a recursive lookup or\nan authoritative lookup.\n\n295\n00:14:25.739 --> 00:14:28.902\nSo if I have authoritative events on\nhere that I want people on the Internet\n\n296\n00:14:28.902 --> 00:14:31.618\nto get to, the firewall won't\nbe able to differentiate that.\n\n297\n00:14:31.618 --> 00:14:36.391\nVersus here where it's saying this\ncontrols which clients are allowed to make\n\n298\n00:14:36.391 --> 00:14:38.190\nrecursive queries.\n\n299\n00:14:38.190 --> 00:14:41.540\nIf they make an authoritative query, one\nthat I can answer, it's still allowed in,\n\n300\n00:14:41.540 --> 00:14:45.310\neven though they might be blocked here,\nthey're still allowed in, right?\n\n301\n00:14:45.310 --> 00:14:47.870\nSo I have to be careful of what I choose.\n\n302\n00:14:47.870 --> 00:14:51.840\nI usually use allow and refuse but you'll\nsee there's other options like deny.\n\n303\n00:14:51.840 --> 00:14:55.511\nDeny means they wouldn't be able to\ndo an authoritative query either.\n\n304\n00:14:55.511 --> 00:15:00.635\nRefuse, refuses with a proper,\npolite error but it still refuses them.\n\n305\n00:15:00.635 --> 00:15:05.535\nAllow, lets them recurse, allow_snoop\ndoes recursive and non-recursive.\n\n306\n00:15:05.535 --> 00:15:08.339\nYou got a few different options what\nyou'll wanna specify there to choose how\n\n307\n00:15:08.339 --> 00:15:08.995\nwe react to that.\n\n308\n00:15:08.995 --> 00:15:11.352\nAnd again, it's a well documented file,\nit's easy to-\n\n309\n00:15:11.352 --> 00:15:13.220\n&gt;&gt; Polite there, reply.\n\n310\n00:15:13.220 --> 00:15:15.105\n&gt;&gt; So-\n&gt;&gt; Is that customizable?\n\n311\n00:15:15.105 --> 00:15:18.600\n&gt;&gt; Well, so what happens is if somebody's\ntrying to break into the system and\n\n312\n00:15:18.600 --> 00:15:20.750\nyou do, run queries are not allowed to.\n\n313\n00:15:20.750 --> 00:15:22.420\nWe can just drop it and never respond-\n&gt;&gt; Respond?\n\n314\n00:15:22.420 --> 00:15:23.410\n&gt;&gt; To them.\n\n315\n00:15:23.410 --> 00:15:26.070\nAnd so they just sit there waiting for\na response and nothing happens.\n\n316\n00:15:26.070 --> 00:15:28.016\nPolite just means we\nimmediately tell them, hey,\n\n317\n00:15:28.016 --> 00:15:29.700\nwe dropped it because you're not allowed.\n\n318\n00:15:29.700 --> 00:15:32.586\nAnd I don't think you\ncan tailor the message.\n\n319\n00:15:32.586 --> 00:15:33.817\n&gt;&gt; [LAUGH]\n&gt;&gt; But I'm sure in Linux you can\n\n320\n00:15:33.817 --> 00:15:34.357\nedit anything.\n\n321\n00:15:34.357 --> 00:15:35.636\n&gt;&gt; Don't say no bueno.\n\n322\n00:15:35.636 --> 00:15:36.398\n[LAUGH]\n&gt;&gt; But\n\n323\n00:15:36.398 --> 00:15:38.089\nI don't normally bother\nwith the polite side,\n\n324\n00:15:38.089 --> 00:15:41.190\nbecause what you're doing is just\ntelling them, hey, you're not allowed.\n\n325\n00:15:41.190 --> 00:15:43.700\nSo they can move on to their\nnext target that much faster.\n\n326\n00:15:43.700 --> 00:15:45.640\nI'd rather they waited on me.\n\n327\n00:15:45.640 --> 00:15:49.470\nIt's not costing me anything, so\nthat's why we have that deny option.\n\n328\n00:15:50.591 --> 00:15:54.339\nAll right, so I've got that setup,\neverything's pretty good there,\n\n329\n00:15:54.339 --> 00:15:57.666\nthat should be about all I need on\nthis file to get it up and going.\n\n330\n00:15:57.666 --> 00:15:59.535\nI have manipulated the file, and\n\n331\n00:15:59.535 --> 00:16:03.292\nas a result I could have put that\nDon Pezet spin on and screwed it up.\n\n332\n00:16:03.292 --> 00:16:07.179\nSo I need to check it, and just like with\nVine, we have a neat little utility.\n\n333\n00:16:07.179 --> 00:16:12.568\nWhich is the unbound-checkconf,\nand it'll check my configuration\n\n334\n00:16:12.568 --> 00:16:17.330\nfile to see if there's any errors or\nanything like that.\n\n335\n00:16:17.330 --> 00:16:19.570\nNow, the first time you run it,\n\n336\n00:16:19.570 --> 00:16:22.330\nyou're likely gonna get\nthe error that I just got.\n\n337\n00:16:22.330 --> 00:16:26.550\nI haven't configured DNSSEC, so\nI don't have security on this just yet.\n\n338\n00:16:26.550 --> 00:16:30.340\nAnd so I'm getting a fatal error telling\nme my server key file doesn't exist.\n\n339\n00:16:30.340 --> 00:16:35.450\nThe server key file is created\nthe first time that unbound starts.\n\n340\n00:16:35.450 --> 00:16:36.790\nI've never started it.\n\n341\n00:16:36.790 --> 00:16:42.090\nSo, I need to do a systemctl\nstart unbound.service.\n\n342\n00:16:42.090 --> 00:16:43.540\nSo I'm gonna start it.\n\n343\n00:16:43.540 --> 00:16:46.580\nAnd if I've got an error,\nI'll spot it right there, right?\n\n344\n00:16:46.580 --> 00:16:48.980\nBut it should've just generated\nthat key that was missing.\n\n345\n00:16:48.980 --> 00:16:50.230\nAnd then I can stop it.\n\n346\n00:16:51.800 --> 00:16:54.840\nI guess I don't really need to stop it,\nbut I'll go ahead and stop it.\n\n347\n00:16:54.840 --> 00:16:56.180\nBut that file that was missing,\n\n348\n00:16:56.180 --> 00:17:01.260\nthis /etc/ unbound whatever,\nthat file should be created now.\n\n349\n00:17:01.260 --> 00:17:05.500\n&gt;&gt; Similar to the check in Bind,\nwould we have to go ahead and\n\n350\n00:17:05.500 --> 00:17:09.600\nrun this utility for each individual\nerror, or will it compile that together?\n\n351\n00:17:09.600 --> 00:17:10.480\n&gt;&gt; You have to run it over and over.\n\n352\n00:17:10.480 --> 00:17:12.500\nSo it found that one error,\nand then it stopped.\n\n353\n00:17:12.500 --> 00:17:13.350\nIt didn't look at the rest.\n\n354\n00:17:13.350 --> 00:17:14.980\nI might have other errors.\n\n355\n00:17:14.980 --> 00:17:17.621\nSo, I'm gonna verify that\nthat file got created.\n\n356\n00:17:17.621 --> 00:17:21.232\nYeah, there's the unbound_server.key,\nso it did get generated.\n\n357\n00:17:21.232 --> 00:17:22.497\nAnd now I can rerun it and\n\n358\n00:17:22.497 --> 00:17:25.920\nthere may be other errors that it\njust didn't see the last time.\n\n359\n00:17:25.920 --> 00:17:27.420\nSo I'm gonna run it.\n\n360\n00:17:27.420 --> 00:17:28.337\nNo errors.\n&gt;&gt; Wow.\n\n361\n00:17:28.337 --> 00:17:28.870\n&gt;&gt; Honestly,\n\n362\n00:17:28.870 --> 00:17:30.560\nI was just changing comments that,\n&gt;&gt; [LAUGH]\n\n363\n00:17:30.560 --> 00:17:31.169\n&gt;&gt; Were already in there.\n\n364\n00:17:31.169 --> 00:17:34.520\nIt's pretty hard for even me to screw\nthat one up but we're good on this one.\n\n365\n00:17:35.572 --> 00:17:37.440\nAll right, I kinda knew it was\ngonna be okay too because I\n\n366\n00:17:37.440 --> 00:17:38.840\ndidn't get any errors when I started it.\n\n367\n00:17:38.840 --> 00:17:40.384\nSo, I'm gonna start that back up.\n\n368\n00:17:40.384 --> 00:17:44.625\nNow, on systemd systems I started Unbound,\nit's running right now but\n\n369\n00:17:44.625 --> 00:17:47.559\nI need to tell it to start\nwhen the system boots up.\n\n370\n00:17:47.559 --> 00:17:53.543\nSo I'm gonna add one more entry here and\nsay systemctl enable Unbound.service.\n\n371\n00:17:53.543 --> 00:17:56.382\nThat's gonna link it so\nthat it'll start when the system boots.\n\n372\n00:17:56.382 --> 00:18:00.233\nSo now when I turn on the system and\nI go into multiuser mode,\n\n373\n00:18:00.233 --> 00:18:04.944\nit's gonna launch Unbound, so\nevery time I boot, it's gonna come up.\n\n374\n00:18:04.944 --> 00:18:08.180\nAll right, technically Unbound is done.\n\n375\n00:18:08.180 --> 00:18:13.300\nIt's turned on, it's secured and\nit's acting as a caching server right now.\n\n376\n00:18:13.300 --> 00:18:17.370\nBut if I'm running a firewall,\nI need to open it up on the firewall.\n\n377\n00:18:17.370 --> 00:18:19.720\nSo if you have IP tables,\nyou'll go and add a role for\n\n378\n00:18:19.720 --> 00:18:22.270\nIP tables to allow port 53 to come in.\n\n379\n00:18:22.270 --> 00:18:25.300\nI'm on a CentOS system, so\nI've got firewall d and\n\n380\n00:18:25.300 --> 00:18:28.080\nI need to allow those ports to\ncome in through firewall d.\n\n381\n00:18:28.080 --> 00:18:29.700\nSo I'm gonna add a little bit to it.\n\n382\n00:18:29.700 --> 00:18:36.988\nI'll do firewall-cmd --add-service=DNS.\n\n383\n00:18:36.988 --> 00:18:42.240\nI'm using add service instead of add port.\n\n384\n00:18:42.240 --> 00:18:46.523\nIf I do add port, I would have\nto add port 53 for udp and tcp.\n\n385\n00:18:46.523 --> 00:18:47.600\nIt's easy to forget.\n\n386\n00:18:47.600 --> 00:18:50.390\nBy doing add service, it's gonna add both.\n\n387\n00:18:50.390 --> 00:18:52.860\nI also only have one\nnetwork adapter in here.\n\n388\n00:18:52.860 --> 00:18:56.070\nSince I only have one network adapter,\nI don't have to specify a zone.\n\n389\n00:18:56.070 --> 00:18:58.090\nBecause it's gonna be using\nthe public zone by default.\n\n390\n00:18:58.090 --> 00:19:01.540\nIf you have more than one network adapter,\nyou may have more than one zone.\n\n391\n00:19:01.540 --> 00:19:06.410\nSo if that's the case ,you would need to\nadd a little to this, do a --zone = and\n\n392\n00:19:06.410 --> 00:19:07.800\nwhatever your zone happens to be.\n\n393\n00:19:07.800 --> 00:19:10.720\nThe default is public unless\nyou've changed it, right?\n\n394\n00:19:10.720 --> 00:19:13.740\nSo I can add that in, but\nthat's really gonna be the same command\n\n395\n00:19:13.740 --> 00:19:16.340\nyou were in before so\nI get this warning already enabled.\n\n396\n00:19:16.340 --> 00:19:17.200\nRight, so it's already done.\n\n397\n00:19:18.370 --> 00:19:22.800\nThe other thing is I just modified\nthe firewall as it is right now.\n\n398\n00:19:22.800 --> 00:19:24.163\nBut if I reboot, I'm gonna lose that.\n\n399\n00:19:24.163 --> 00:19:25.604\nIt's not written into the config files.\n\n400\n00:19:25.604 --> 00:19:32.000\nSo I need to re-run the command one\nmore time and I'm gonna add --permanent.\n\n401\n00:19:32.000 --> 00:19:34.330\n&gt;&gt; So we see a lot of similarities\nhere with the syntax, so\n\n402\n00:19:34.330 --> 00:19:35.800\nthat's definitely a plus.\n\n403\n00:19:35.800 --> 00:19:39.530\n&gt;&gt; It is, although it is a little\nmisleading because some people will say,\n\n404\n00:19:39.530 --> 00:19:43.220\nwell, why don't I just run the permanent\ncommand in the first place, right?\n\n405\n00:19:43.220 --> 00:19:44.970\nI want it to be permanent.\n\n406\n00:19:44.970 --> 00:19:49.570\nThis modifies the config files,\nnot the running firewall.\n\n407\n00:19:49.570 --> 00:19:51.490\nSo it would open it up\nthe next time I rebooted.\n\n408\n00:19:51.490 --> 00:19:54.640\nSo I really need to do both,\nI need to run it with the permanent and\n\n409\n00:19:54.640 --> 00:19:55.440\nwithout the permanent.\n\n410\n00:19:55.440 --> 00:19:57.288\n&gt;&gt; Good to know.\n&gt;&gt; So it modifies the running one and\n\n411\n00:19:57.288 --> 00:19:58.010\nwhat's there.\n\n412\n00:19:58.010 --> 00:20:01.650\nOr I could do it with a permanent,\nand then restart firewall D, but\n\n413\n00:20:01.650 --> 00:20:05.291\nthat's gonna tick off anybody\nwho's using the server right now.\n\n414\n00:20:05.291 --> 00:20:06.723\n&gt;&gt; [LAUGH]\n&gt;&gt; So I try not to do that one.\n\n415\n00:20:07.740 --> 00:20:10.630\nAll right, so now we're allowing\nthat stuff through the firewall,\n\n416\n00:20:10.630 --> 00:20:11.860\nwe should be good there.\n\n417\n00:20:11.860 --> 00:20:13.540\nUnbound is up and running.\n\n418\n00:20:13.540 --> 00:20:15.440\nIt's running as a caching server.\n\n419\n00:20:15.440 --> 00:20:16.550\nSo if i wanna verify it,\n\n420\n00:20:16.550 --> 00:20:21.900\nit's a little hard to verify but\nwe can kinda poke at it a little bit.\n\n421\n00:20:21.900 --> 00:20:27.924\nFor example, there's a utility\nwe have called unbound-control.\n\n422\n00:20:27.924 --> 00:20:31.460\nAnd that's the utility we're supposed to\nuse to manage Unbound if we wanna flush\n\n423\n00:20:31.460 --> 00:20:33.130\nthe cache and other things like that.\n\n424\n00:20:33.130 --> 00:20:35.260\nIf you pull out the man file for\nit, there's a ton of options.\n\n425\n00:20:35.260 --> 00:20:38.480\nBut I'm gonna add status to the end.\n\n426\n00:20:38.480 --> 00:20:41.000\nAnd that'll check the server and\nlet me know what it's doing.\n\n427\n00:20:41.000 --> 00:20:44.580\nI can see that it's running version 1.4,\nverbosity is 1, threads are 2.\n\n428\n00:20:44.580 --> 00:20:49.050\nVery, very exciting stuff, but\nmore importantly Unbound is running.\n\n429\n00:20:49.050 --> 00:20:51.790\nIt's up and it's running and\nit should be doing its job.\n\n430\n00:20:53.120 --> 00:20:54.759\n&gt;&gt; So Don, we have a really\ngood question in the chat.\n\n431\n00:20:54.759 --> 00:20:59.071\nIt says how does using a different port\nnumber like 53,000 for DNS go ahead and\n\n432\n00:20:59.071 --> 00:21:02.890\naffect the clients that would expect\na communication to transpire on port\n\n433\n00:21:02.890 --> 00:21:03.640\nnumber 53?\n\n434\n00:21:03.640 --> 00:21:04.231\n&gt;&gt; So that is a good question.\n\n435\n00:21:04.231 --> 00:21:05.527\nIt would break the clients.\n\n436\n00:21:05.527 --> 00:21:06.399\nIt wouldn't work.\n\n437\n00:21:07.450 --> 00:21:13.280\nBut if the clients are going to unbound\non port 53 like they expect and\n\n438\n00:21:13.280 --> 00:21:17.170\non the back end, Unbound is talking\nto bind and bind is on port 53,000,\n\n439\n00:21:17.170 --> 00:21:21.780\nthe clients never see that,\nthe clients don't actually talk to it.\n\n440\n00:21:21.780 --> 00:21:25.278\nBut otherwise, if they needed to, if\nthe clients needed to talk to that server\n\n441\n00:21:25.278 --> 00:21:28.311\ndirectly, we would have to set\nthe clients to use that port number.\n\n442\n00:21:28.311 --> 00:21:33.118\nAnd if you've configured a network adapter\nin Linux or Windows or MacOS, they don't\n\n443\n00:21:33.118 --> 00:21:37.740\nask for a port number when you configure\na DNS server, so it's not gonna work.\n\n444\n00:21:37.740 --> 00:21:38.634\nIt's gonna break it, right?\n\n445\n00:21:38.634 --> 00:21:42.264\nSo that's the thing is you wouldn't\nnormally do it when you're talking about\n\n446\n00:21:42.264 --> 00:21:45.894\na client connecting to whatever they're\nconnecting to, but on the back end,\n\n447\n00:21:45.894 --> 00:21:47.570\nthat's where we can use that.\n\n448\n00:21:47.570 --> 00:21:48.613\n&gt;&gt; Perfect.\n&gt;&gt; And I'm trying to,\n\n449\n00:21:48.613 --> 00:21:51.354\nI'm running through my head\nreal quick to think about it.\n\n450\n00:21:51.354 --> 00:21:53.506\nIf I've ever seen a client where you\ncan override the port number and\n\n451\n00:21:53.506 --> 00:21:55.452\nI don't think that I have, so\nit might not even be possible.\n\n452\n00:21:55.452 --> 00:21:59.261\nBut I hate to say something's not possible\nand then you get an email the next day\n\n453\n00:21:59.261 --> 00:22:00.650\nlike, I do it every day\n&gt;&gt; [LAUGH]\n\n454\n00:22:00.650 --> 00:22:02.309\n&gt;&gt; On xyz system.\n\n455\n00:22:02.309 --> 00:22:06.220\nI'm running the OS2 and\nI override that all the time, true story.\n\n456\n00:22:06.220 --> 00:22:07.306\nAll right, anyhow, so.\n\n457\n00:22:07.306 --> 00:22:09.094\n[LAUGH]\n&gt;&gt; [LAUGH]\n\n458\n00:22:09.094 --> 00:22:10.959\n&gt;&gt; So we should be up and going.\n\n459\n00:22:10.959 --> 00:22:12.778\nI can test the caching, though.\n\n460\n00:22:12.778 --> 00:22:16.270\nIf I do a name lookup against the server,\nit's got no zones.\n\n461\n00:22:16.270 --> 00:22:20.370\nSo it's got to rely on other\nservers to get the answer.\n\n462\n00:22:20.370 --> 00:22:23.070\nSo if I fire up MS lookup and\n\n463\n00:22:23.070 --> 00:22:28.000\nI switch my server to me, all right,\nso I'm now connected to myself.\n\n464\n00:22:28.000 --> 00:22:31.416\nAnd I do I lookup for\nsomething like www.google.com, all right.\n\n465\n00:22:31.416 --> 00:22:33.840\nIt doesn't have a zone for\nGoogle, does it?\n\n466\n00:22:33.840 --> 00:22:35.380\nCuz we haven't made any zones.\n\n467\n00:22:35.380 --> 00:22:38.970\nBut there it goes, it finds an address for\nGoogle, all right?\n\n468\n00:22:38.970 --> 00:22:43.260\nNow, it reached out to the root hand\nserver and said who controls com?\n\n469\n00:22:43.260 --> 00:22:47.040\nIt reached out to the com TLD servers and\nsaid who controls Google?\n\n470\n00:22:47.040 --> 00:22:51.080\nIt reached out to Google's servers and\nsaid, hey, I'm looking for www, and\n\n471\n00:22:51.080 --> 00:22:55.930\nGoogle got a authoritative response back\nto us saying, here's the IP address.\n\n472\n00:22:55.930 --> 00:22:59.630\nNow when all that happened,\nUnbound cached it.\n\n473\n00:22:59.630 --> 00:23:02.480\nAnd so now whoever else comes and\n\n474\n00:23:02.480 --> 00:23:07.870\ndoes a query, as long as that cache value\nis still active, cuz the cache expires,\n\n475\n00:23:07.870 --> 00:23:11.060\nthen they'll look up against this cache,\nthey'll get a faster response.\n\n476\n00:23:11.060 --> 00:23:14.130\nBind does that as well,\nUnbound just does it faster.\n\n477\n00:23:14.130 --> 00:23:18.710\nSo when it comes to a pure caching server,\nUnbound is better than Bind.\n\n478\n00:23:18.710 --> 00:23:22.415\nBut when it comes to hosting records and\nzones, Bind has a lot more power under\n\n479\n00:23:22.415 --> 00:23:25.330\nthe hood, and that's the one\nyou're gonna want to go with.\n\n480\n00:23:25.330 --> 00:23:28.986\nSo while Unbound is pitched\nas a replacement to Bind,\n\n481\n00:23:28.986 --> 00:23:33.700\nthey actually do both have\na real-world use example right now.\n\n482\n00:23:33.700 --> 00:23:36.560\nAnd a lot of people use both\nof them in conjunction.\n\n483\n00:23:36.560 --> 00:23:40.720\nSo you've got Unbound handling your\ncache and Bind handling your records.\n\n484\n00:23:40.720 --> 00:23:43.580\nPersonally, I hate splitting\nstuff between services.\n\n485\n00:23:43.580 --> 00:23:46.900\nSo I usually run Bind over Unbound\nif I have to make that decision.\n\n486\n00:23:46.900 --> 00:23:50.370\nBut this one's up, it's running,\nit's doing it's job.\n\n487\n00:23:50.370 --> 00:23:52.500\nAnd we're pretty much in business.\n\n488\n00:23:52.500 --> 00:23:55.997\nI'm trying to think if there's anything\nelse that I wanna mess with on this one.\n\n489\n00:23:55.997 --> 00:24:00.014\nThat unbound-control command\nthat I used a moment ago,\n\n490\n00:24:00.014 --> 00:24:05.377\nit has a lot of different stuff that it\ncan do if you pull up the man file for it.\n\n491\n00:24:05.377 --> 00:24:08.940\nAnd so you'll can see where you can feed\nall sort of different things into it.\n\n492\n00:24:08.940 --> 00:24:12.400\nYou can start, stop the server,\nyou can pull up the logs, the statistics.\n\n493\n00:24:12.400 --> 00:24:15.806\nThe stats are kind of nice,\nmy stats are disabled in the config file,\n\n494\n00:24:15.806 --> 00:24:18.567\nbut that's where you can see\nhow your cache is working,\n\n495\n00:24:18.567 --> 00:24:21.040\nare you getting a lot of cache hits or\nnot.\n\n496\n00:24:21.040 --> 00:24:23.750\nYou can query local zones if you got them.\n\n497\n00:24:23.750 --> 00:24:26.090\nThat command is pretty powerful.\n\n498\n00:24:26.090 --> 00:24:29.240\nUsually, what we're going for\nare things like dump_cache.\n\n499\n00:24:29.240 --> 00:24:29.847\nAnd my highlight is completely\nineffective on pink text.\n\n500\n00:24:29.847 --> 00:24:32.402\nBut if you want to dump the cache or\n\n501\n00:24:32.402 --> 00:24:38.076\nflush out a particular name out of\nthe cache, you've got those options.\n\n502\n00:24:38.076 --> 00:24:40.569\nSo that utility,\nif you're running unbound,\n\n503\n00:24:40.569 --> 00:24:43.950\nyou're going to become really\ngood friends with this utility.\n\n504\n00:24:43.950 --> 00:24:46.920\nIt's how you'll interact\nwith that to do things and\n\n505\n00:24:46.920 --> 00:24:52.030\navoid having to restart the server or\nwhatever.\n\n506\n00:24:52.030 --> 00:24:57.550\nAnd if we look in /var/unbound,\nwait, where am I.\n\n507\n00:24:59.420 --> 00:25:01.313\nOr /var/log, there we go.\n\n508\n00:25:01.313 --> 00:25:05.460\n/var/log/, well, actually,\nwhere did I stick that log?\n\n509\n00:25:05.460 --> 00:25:07.036\nDid I go to the wrong folder?\n\n510\n00:25:07.036 --> 00:25:12.783\n/var/log I've got a little\nbit of a problem.\n\n511\n00:25:12.783 --> 00:25:17.890\nSo when I configured the logging,\nI pointed to a folder /var/log/unbound.\n\n512\n00:25:17.890 --> 00:25:18.492\nIt doesn't exist.\n\n513\n00:25:18.492 --> 00:25:20.207\nThat's going to be a slight issue for me,\n\n514\n00:25:20.207 --> 00:25:23.251\nbecause that means unbound can't\nwrite to a folder that doesn't exist.\n\n515\n00:25:23.251 --> 00:25:25.480\n&gt;&gt; It won't generate its own file?\n\n516\n00:25:25.480 --> 00:25:27.420\n&gt;&gt; It'll generate the file, but\nit won't generate a folder.\n\n517\n00:25:27.420 --> 00:25:28.205\n&gt;&gt; Okay.\n&gt;&gt; In this case,\n\n518\n00:25:28.205 --> 00:25:31.094\nI don't have the folder in place,\nso I need to make that folder.\n\n519\n00:25:31.094 --> 00:25:32.000\nSo I'm going to make\nthe folder that I pointed to.\n\n520\n00:25:32.000 --> 00:25:34.272\nI probably should have just\npointed it to /var/log instead.\n\n521\n00:25:34.272 --> 00:25:36.450\nBut I'm going to make that folder.\n\n522\n00:25:36.450 --> 00:25:39.100\nNow, the problem I'm gonna have\nwhen I make that folder is,\n\n523\n00:25:39.100 --> 00:25:42.470\nif you look at it,\nthe permissions on it, root and root.\n\n524\n00:25:42.470 --> 00:25:45.170\nWhich the majority of everything\nhere has root and root.\n\n525\n00:25:45.170 --> 00:25:47.173\nSo that's okay for most things.\n\n526\n00:25:47.173 --> 00:25:53.100\nBut I'm gonna double check, /etc/unbound.\n\n527\n00:25:53.100 --> 00:25:57.150\nActually, let me just pull\nup the main directory here.\n\n528\n00:25:57.150 --> 00:25:58.830\nAnd I'm going to double-check and\n\n529\n00:25:58.830 --> 00:26:01.120\nmake sure, there we go,\nthat's root and root also, okay.\n\n530\n00:26:01.120 --> 00:26:03.873\nI'm trying to make sure that the Unbound\nprocess would to be able to write to\n\n531\n00:26:03.873 --> 00:26:04.406\nthat folder.\n\n532\n00:26:04.406 --> 00:26:07.424\nAnd now that it has\npermissions to that folder,\n\n533\n00:26:07.424 --> 00:26:11.110\nas it generates logs,\nthey'll end up here, okay.\n\n534\n00:26:11.110 --> 00:26:15.068\nSo there's not really much going on in\nthe system right now for me to see that.\n\n535\n00:26:15.068 --> 00:26:19.756\nBut if I restart unbound, we can do that.\n\n536\n00:26:19.756 --> 00:26:24.876\nAnd then if any errors occur, if other\nevents like that occur in the system,\n\n537\n00:26:24.876 --> 00:26:28.010\nit'll start to log those\nentries right here.\n\n538\n00:26:28.010 --> 00:26:29.470\nSo they'll show up eventually.\n\n539\n00:26:29.470 --> 00:26:30.638\nI turned off my statistics and\n\n540\n00:26:30.638 --> 00:26:33.498\na few other things, so there's not\ngonna be a lot that comes out anyway.\n\n541\n00:26:33.498 --> 00:26:35.190\nBut make sure you create that folder.\n\n542\n00:26:35.190 --> 00:26:36.595\nIt will not create the folder for you.\n\n543\n00:26:36.595 --> 00:26:39.270\nIt'll create the files inside of it,\nbut not the folder.\n\n544\n00:26:39.270 --> 00:26:40.170\n&gt;&gt; All right.\n\n545\n00:26:40.170 --> 00:26:44.350\nSo now we were able to go ahead and\ntake a look at how to install Unbound.\n\n546\n00:26:44.350 --> 00:26:47.860\nAnd I'm only assuming in the next\nepisode you're gonna go ahead and\n\n547\n00:26:47.860 --> 00:26:50.410\nshow us how to utilize it and\nconfigure those zones.\n\n548\n00:26:50.410 --> 00:26:54.188\nSo stay tuned, guys, we have a lot more\nheaded your way, don't go anywhere.\n\n549\n00:26:54.188 --> 00:26:58.510\nI'm gonna go ahead and sign off for\nthis episode as your host, Cherokee Boose.\n\n550\n00:26:58.510 --> 00:26:59.480\n&gt;&gt; And I'm Don Pezet.\n\n551\n00:26:59.480 --> 00:27:00.820\n&gt;&gt; See you next time here at ITProTV.\n\n552\n00:27:05.912 --> 00:27:08.572\n[MUSIC]\n\n553\n00:27:08.572 --> 00:27:10.485\n&gt;&gt; Thank you for watching ITProTV.\n\n",
          "vimeoId": "196616871"
        },
        {
          "description": "After installing Unbound you will learn how to create override lookup values to customize your environment. You will see how Unbound functions faster, yet is limited in some ways such as not properly referencing a CNAME record.",
          "length": "1234",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-9-2-configuring_zones_and_records-120816-PGM.00_00_11_22.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-9-2-configuring_zones_and_records-120816-PGM.00_00_11_22.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-9-2-configuring_zones_and_records-120816-PGM.00_00_11_22.Still001-sm.jpg",
          "title": "Configuring Zones and Records",
          "transcript": "WEBVTT\n\n1\n00:00:00.230 --> 00:00:01.333\nWelcome to ITProTV.\n\n2\n00:00:01.333 --> 00:00:08.289\nI'm your host, Don [CROSSTALK]\n&gt;&gt; [CROSSTALK]\n\n3\n00:00:08.289 --> 00:00:11.950\n&gt;&gt; You're watching ITProTv.\n\n4\n00:00:11.950 --> 00:00:14.890\n&gt;&gt; Welcome to another\nDNS Tech Skills show.\n\n5\n00:00:14.890 --> 00:00:17.200\nI'm your host, Cherokee Boose.\n\n6\n00:00:17.200 --> 00:00:21.130\nIn this episode, we're gonna go ahead and\ntake a look at how to configure and\n\n7\n00:00:21.130 --> 00:00:22.190\ncreate zones.\n\n8\n00:00:22.190 --> 00:00:24.968\nIn the last episode,\nwe installed Unbound, so\n\n9\n00:00:24.968 --> 00:00:27.683\nI'm really excited to\nsee how we get started.\n\n10\n00:00:27.683 --> 00:00:28.321\n&gt;&gt; [LAUGH]\n&gt;&gt; So\n\n11\n00:00:28.321 --> 00:00:31.460\nwe have Don Pezet in studio with us\ntoday to go ahead and help us with that.\n\n12\n00:00:31.460 --> 00:00:32.580\nThank you for being here today, Don.\n\n13\n00:00:32.580 --> 00:00:33.490\n&gt;&gt; Thanks for having me back.\n\n14\n00:00:33.490 --> 00:00:35.940\nAnd ready to continue on with\nthe Unbound configuration.\n\n15\n00:00:35.940 --> 00:00:38.070\nIf you watched the first episode,\nwe got it installed.\n\n16\n00:00:38.070 --> 00:00:41.030\nBut it's really just a glorified\ncaching server, right now.\n\n17\n00:00:41.030 --> 00:00:44.273\nWhich, I guess, is ultimately\nthe point of Unbound, so technically,\n\n18\n00:00:44.273 --> 00:00:45.600\nwe're kind of done.\n\n19\n00:00:45.600 --> 00:00:49.650\nBut many of you will have internal\nrecords that you need to create.\n\n20\n00:00:49.650 --> 00:00:51.200\nA records, PTR records,\n\n21\n00:00:51.200 --> 00:00:54.460\nthe forward and reverse lookup zones\nthat we did in other DNS servers.\n\n22\n00:00:54.460 --> 00:00:56.550\nWe can certainly do those in Unbound,\nalso.\n\n23\n00:00:56.550 --> 00:00:59.988\nNow if you're using Unbound\nas a caching server,\n\n24\n00:00:59.988 --> 00:01:02.720\nthen you wouldn't normally\ncreate zones on it.\n\n25\n00:01:02.720 --> 00:01:05.020\nBut you might still wanna throw\nsome records when you want\n\n26\n00:01:05.020 --> 00:01:06.200\nto override something.\n\n27\n00:01:06.200 --> 00:01:10.320\nAnd a great example of that would be, I\nmight have an internal caching server, and\n\n28\n00:01:10.320 --> 00:01:11.990\nI've got a public website.\n\n29\n00:01:11.990 --> 00:01:13.820\nAnd if somebody out there in the Internet,\n\n30\n00:01:13.820 --> 00:01:17.790\nI want them to go to the public\nwebsite via the public IP address.\n\n31\n00:01:17.790 --> 00:01:20.170\nBut if they're on the internal network,\n\n32\n00:01:20.170 --> 00:01:23.630\nwouldn't it be nice if they got\nthe internal IP address, instead?\n\n33\n00:01:23.630 --> 00:01:25.980\nThat way they can go right to\nthe internal network adapter.\n\n34\n00:01:25.980 --> 00:01:27.754\nInstead of having to go through\nthe firewall and bounce around.\n\n35\n00:01:27.754 --> 00:01:30.330\nYeah, it can shorten that path a lot.\n\n36\n00:01:30.330 --> 00:01:32.590\nAnd make the experience even faster for\nour users.\n\n37\n00:01:32.590 --> 00:01:35.190\nWhich is what a caching\nservice is designed to do.\n\n38\n00:01:35.190 --> 00:01:36.660\nSo in Unbound,\n\n39\n00:01:36.660 --> 00:01:42.940\nwe can override any lookup that we want\nright inside of the Unbound configuration.\n\n40\n00:01:42.940 --> 00:01:47.640\nAnd by doing that, by overriding those\nconfigs, we can return any kinda response.\n\n41\n00:01:47.640 --> 00:01:52.450\nIt's great for development and testing,\nlab environments, and for creating forward\n\n42\n00:01:52.450 --> 00:01:55.760\nand reverse lookup zones, if you wanna\nhost them directly from Unbound.\n\n43\n00:01:55.760 --> 00:01:57.650\n&gt;&gt; Could we also rely on this\nas a form of redundancy?\n\n44\n00:01:58.740 --> 00:02:03.575\n&gt;&gt; You sort of could except, people\nwould be looking to this Unbound server.\n\n45\n00:02:03.575 --> 00:02:04.960\nThey would get the override value.\n\n46\n00:02:04.960 --> 00:02:07.030\nIf the override value wasn't working,\n\n47\n00:02:07.030 --> 00:02:09.050\nthat would usually mean\nthe Unbound server isn't working.\n\n48\n00:02:09.050 --> 00:02:10.590\nSo you have a total failure.\n\n49\n00:02:10.590 --> 00:02:13.280\nYou could get redundancy in the way\nof like a syntax mistake, I guess.\n\n50\n00:02:13.280 --> 00:02:16.310\nBut not necessarily from\na server standpoint, so.\n\n51\n00:02:16.310 --> 00:02:20.880\nBut you could introduce additional IPs\nthat maybe the public doesn't see.\n\n52\n00:02:20.880 --> 00:02:22.807\nAnd so\nnow you do get redundancy out of it.\n\n53\n00:02:22.807 --> 00:02:23.823\nSky's the limit, so\n\n54\n00:02:23.823 --> 00:02:27.290\nwhatever you could think of and\njam into that config file, it'll work.\n\n55\n00:02:27.290 --> 00:02:29.377\nUnbound has a lot of flexibility to it,\n\n56\n00:02:29.377 --> 00:02:32.613\neven though it doesn't support\nsome of the stuff that we do.\n\n57\n00:02:32.613 --> 00:02:34.882\nAnd just to give you an example\nsomething that's not supported.\n\n58\n00:02:34.882 --> 00:02:40.390\nThings like CNAMEs,\nUnbound doesn't do CNAMEs.\n\n59\n00:02:40.390 --> 00:02:45.000\nSo when I request a CNAME, normally\nwhat happens is the DNS server finds it,\n\n60\n00:02:45.000 --> 00:02:47.450\nsees it as a CNAME, and\nreturns it back to me.\n\n61\n00:02:47.450 --> 00:02:49.449\nBut then it looks up the destination.\n\n62\n00:02:49.449 --> 00:02:52.651\nAnd it does what's called expanding\nthe CNAME to find out what the actual\n\n63\n00:02:52.651 --> 00:02:53.290\nIP should be.\n\n64\n00:02:53.290 --> 00:02:55.050\nAnd it gives me the IP, also.\n\n65\n00:02:55.050 --> 00:02:56.420\nUnbound won't do that.\n\n66\n00:02:56.420 --> 00:02:58.575\nUnbound will say, hey,\nit's a CNAME, here you go.\n\n67\n00:02:58.575 --> 00:03:00.260\nAnd it'll give you the CNAME.\n\n68\n00:03:00.260 --> 00:03:04.368\nSo the client receives a CNAME,\nand it's like, okay, it's a CNAME.\n\n69\n00:03:04.368 --> 00:03:07.420\nWhere's the IP, I need the IP.\n\n70\n00:03:07.420 --> 00:03:09.420\nUnbound says, well,\nyou have to ask for it.\n\n71\n00:03:09.420 --> 00:03:12.370\nAnd so the client has to know to\nsend a second lookup to say, okay.\n\n72\n00:03:12.370 --> 00:03:14.760\nYou just gave me the CNAME,\nthe actual host name.\n\n73\n00:03:14.760 --> 00:03:16.675\nNow I need to look that one up and\nperform it.\n\n74\n00:03:16.675 --> 00:03:18.450\nUnbound won't do that for us.\n\n75\n00:03:18.450 --> 00:03:21.000\nAnd unfortunately,\nmost clients won't do it either.\n\n76\n00:03:21.000 --> 00:03:24.620\nWIndows, Mac OS,\npretty much every Linux distribution,\n\n77\n00:03:24.620 --> 00:03:26.860\nthey don't do that follow- up question.\n\n78\n00:03:26.860 --> 00:03:28.736\nSo from that perspective, CNAMEs,\n\n79\n00:03:28.736 --> 00:03:31.750\nwhile supported in Unbound,\nare effectively broken.\n\n80\n00:03:31.750 --> 00:03:32.860\nBut it's not Unbound's fault.\n\n81\n00:03:32.860 --> 00:03:36.450\nIt's the client's fault for not bothering\nto ask, so it's a weird little catch.\n\n82\n00:03:36.450 --> 00:03:37.741\nWe don't have to worry about that in BIND.\n\n83\n00:03:37.741 --> 00:03:39.184\nWe don't have to worry\nabout that in PowerDNS.\n\n84\n00:03:39.184 --> 00:03:41.411\nWe don't have to worry about that\nin Microsoft's DNS server, but\n\n85\n00:03:41.411 --> 00:03:42.100\nin Unbound, we do.\n\n86\n00:03:42.100 --> 00:03:43.790\nSo know that there are limitations.\n\n87\n00:03:43.790 --> 00:03:46.080\n&gt;&gt; Yeah, and just knowing those\nlimitations can really help you make\n\n88\n00:03:46.080 --> 00:03:47.870\nthe best decision for your environment.\n\n89\n00:03:47.870 --> 00:03:49.190\n&gt;&gt; Right, absolutely.\n\n90\n00:03:49.190 --> 00:03:52.580\n&gt;&gt; So Don, is this utility similar to BIND\nin the sense that we would need to create\n\n91\n00:03:52.580 --> 00:03:54.360\nseparate zone files?\n\n92\n00:03:54.360 --> 00:03:55.810\n&gt;&gt; Well, you can.\n\n93\n00:03:55.810 --> 00:03:58.040\nYou can create separate zone files,\nif you want.\n\n94\n00:03:58.040 --> 00:04:01.800\nBut the neat thing about Unbound is it'll\nactually read its entire config right out\n\n95\n00:04:01.800 --> 00:04:03.797\nof the single central configuration file.\n\n96\n00:04:03.797 --> 00:04:04.810\nAnd we just put everything there.\n\n97\n00:04:04.810 --> 00:04:07.320\nSo if you're just doing\na handful of little overrides,\n\n98\n00:04:07.320 --> 00:04:09.400\nyou can just go right into\nthe config file and be done with it.\n\n99\n00:04:09.400 --> 00:04:12.160\nBut if you're trying to do whole zones,\nyeah, you'll want to do separate files.\n\n100\n00:04:12.160 --> 00:04:14.085\nSo let's start with just\na simple override, right?\n\n101\n00:04:14.085 --> 00:04:18.245\nI'm gonna jump into,\nlet me edit that file,\n\n102\n00:04:18.245 --> 00:04:22.412\n/etc/unbound/unbound.conf, right?\n\n103\n00:04:22.412 --> 00:04:23.680\nAnd when you browse through there,\n\n104\n00:04:23.680 --> 00:04:26.470\nwe already saw several of these\noptions in the installing episode.\n\n105\n00:04:26.470 --> 00:04:30.210\nI'm just gonna do a quick search for\nlocal-zone.\n\n106\n00:04:30.210 --> 00:04:34.760\nThere's two commands that were gonna\nbe using, local-zone and local-data.\n\n107\n00:04:34.760 --> 00:04:39.200\nAnd I'm looking for a particular section\nwhere it gives some little examples.\n\n108\n00:04:39.200 --> 00:04:39.955\nThere we go.\n\n109\n00:04:39.955 --> 00:04:44.320\nSo search through the file and find the\nspot where it says local-zone, local-data.\n\n110\n00:04:44.320 --> 00:04:46.590\nRemember that this config\nfile is made up in sections.\n\n111\n00:04:46.590 --> 00:04:48.410\nSo you can't just throw\nthe commands in wherever you want.\n\n112\n00:04:48.410 --> 00:04:50.702\nYou do need to try and\nget them in the right area, so\n\n113\n00:04:50.702 --> 00:04:52.131\nthat's why I search for that.\n\n114\n00:04:52.131 --> 00:04:55.400\nBut I'm gonna come in and\nintroduce just a few little breaks.\n\n115\n00:04:55.400 --> 00:04:59.530\nAnd I'm gonna punch in a local-zone,\n\n116\n00:04:59.530 --> 00:05:03.416\nand I'm gonna put lab.itpro.tv.\n\n117\n00:05:03.416 --> 00:05:06.300\nAnd I'll chuck that one in there so\nI've got a nice little local-zone.\n\n118\n00:05:06.300 --> 00:05:08.878\nAnd I need to tell it that I'm\nturning this into a static zone.\n\n119\n00:05:08.878 --> 00:05:13.330\nIn other words, I can override\nentries manually right from here.\n\n120\n00:05:13.330 --> 00:05:14.850\nThere's a few other types of zones.\n\n121\n00:05:14.850 --> 00:05:18.920\nLike dynamic, where it can auto update,\nand forward, and all that mess.\n\n122\n00:05:18.920 --> 00:05:19.750\nI'm just gonna do static.\n\n123\n00:05:19.750 --> 00:05:22.730\nI'm gonna put it in,\nright here, what I need.\n\n124\n00:05:22.730 --> 00:05:26.600\nAnd after that,\nI can start to put my entries.\n\n125\n00:05:26.600 --> 00:05:31.346\nI can say, local-data,\nand then I can put what is\n\n126\n00:05:31.346 --> 00:05:35.760\neffectively an A record,\nlike we did in BIND.\n\n127\n00:05:35.760 --> 00:05:43.360\nI can come in and I can say,\nwww.lab.itpro.tv is an Internet record.\n\n128\n00:05:43.360 --> 00:05:48.582\nIt's an A record, and\nit's pointing to 10.0.22.100, right?\n\n129\n00:05:48.582 --> 00:05:51.402\nIf you look at just this piece here,\n\n130\n00:05:51.402 --> 00:05:55.458\nthat's exactly how we wrote\nA records under BIND.\n\n131\n00:05:55.458 --> 00:05:59.073\nBut I have to add a little more to it\nbecause it's an override in Unbound.\n\n132\n00:05:59.073 --> 00:06:01.215\nIt's not an actual A record.\n\n133\n00:06:01.215 --> 00:06:04.930\nIt's overriding the search results of\nwhat an A record would normally be.\n\n134\n00:06:06.130 --> 00:06:07.769\nAnd the reverse lookups are very similar.\n\n135\n00:06:07.769 --> 00:06:13.300\nI say local-data-ptr, so\nit know that it's a pointer record.\n\n136\n00:06:13.300 --> 00:06:15.460\nAnd because it already know\nit's a pointer record,\n\n137\n00:06:15.460 --> 00:06:19.500\nI don't have to specify that it's\na pointer inside of the record itself.\n\n138\n00:06:19.500 --> 00:06:21.535\nI have to do, up here, that it's an A.\n\n139\n00:06:21.535 --> 00:06:25.654\nCuz it might also be a 4A,\nor CNAME, or an MX, right?\n\n140\n00:06:25.654 --> 00:06:26.900\nIt can be any of those.\n\n141\n00:06:26.900 --> 00:06:30.030\nBut with a PTR, there's only\none type of record, a pointer.\n\n142\n00:06:30.030 --> 00:06:33.015\nSo I can just come in and I can say,\n\n143\n00:06:33.015 --> 00:06:38.052\n10.0.222.100 is www.lab.itpro.tv.\n\n144\n00:06:38.052 --> 00:06:40.790\nAnd that's it, right, as simple as that.\n\n145\n00:06:40.790 --> 00:06:43.630\nRight here, I'm overriding those.\n\n146\n00:06:43.630 --> 00:06:45.790\nThis local-zone is important.\n\n147\n00:06:45.790 --> 00:06:49.700\nI have to define the domain that I'm\noverriding, otherwise, it doesn't work.\n\n148\n00:06:49.700 --> 00:06:53.840\nAnd then after that, I can do one or\nmore of these records to override.\n\n149\n00:06:53.840 --> 00:06:56.850\nAnd have it all right here\nin the central config.\n\n150\n00:06:56.850 --> 00:06:59.890\nAnd if you're only doing a couple of them,\nthis is the easiest way.\n\n151\n00:06:59.890 --> 00:07:02.260\nYou pop them in, and now they're working.\n\n152\n00:07:02.260 --> 00:07:03.450\nWell, I say they're working.\n\n153\n00:07:03.450 --> 00:07:05.320\nWe do kinda have to kind\nof get out of the file.\n\n154\n00:07:05.320 --> 00:07:06.420\nWe need to check it.\n\n155\n00:07:06.420 --> 00:07:10.740\nI can do an unbound-checkconf,\nand no errors, thank goodness.\n\n156\n00:07:10.740 --> 00:07:11.312\n&gt;&gt; Nice.\n\n157\n00:07:11.312 --> 00:07:18.462\n&gt;&gt; It only reads it when it starts, so\nI need to do a systemctl restart unbound.\n\n158\n00:07:18.462 --> 00:07:22.140\nOr .service is what I should have\nstuck on the end to be all formal.\n\n159\n00:07:22.140 --> 00:07:26.750\nBut now I should be able to do a mslookup,\nswitch to my local server.\n\n160\n00:07:28.570 --> 00:07:31.448\nWhich is, we'll just use the loopback\ncuz I can't remember my IP.\n\n161\n00:07:31.448 --> 00:07:37.815\nAnd then [LAUGH] I will do a lookup for\nwww.lab.itpro.tv.\n\n162\n00:07:37.815 --> 00:07:41.711\nAnd when I look that up,\nI get 10.0.222.100.\n\n163\n00:07:41.711 --> 00:07:44.353\nThat was returned right out of Unbound.\n\n164\n00:07:44.353 --> 00:07:48.278\nAnd if I do the reverse, and I look it up,\n\n165\n00:07:48.278 --> 00:07:52.214\nI get that it's www.lab.itpro.tv.\n\n166\n00:07:52.214 --> 00:07:56.784\nThose were served directly out of\nUnbound's configuration because I\n\n167\n00:07:56.784 --> 00:07:57.873\noverrode them.\n\n168\n00:07:57.873 --> 00:07:58.652\nAll right.\n\n169\n00:07:58.652 --> 00:08:00.297\nBut what if I had a huge zone?\n\n170\n00:08:00.297 --> 00:08:01.157\nHundreds of records.\n\n171\n00:08:01.157 --> 00:08:02.520\nThousands of records.\n\n172\n00:08:02.520 --> 00:08:05.150\nI don't wanna put that in\nmy main config file, right?\n\n173\n00:08:05.150 --> 00:08:05.920\nThat's gonna be a mess.\n\n174\n00:08:06.960 --> 00:08:08.854\nSo instead of putting them in there,\n\n175\n00:08:08.854 --> 00:08:11.368\nwe can use include\nstatements to include files.\n\n176\n00:08:11.368 --> 00:08:12.234\n&gt;&gt; Referencing those files?\n\n177\n00:08:12.234 --> 00:08:12.979\n&gt;&gt; Yeah, absolutely.\n\n178\n00:08:12.979 --> 00:08:14.560\n&gt;&gt; Okay.\n&gt;&gt; And that lets us put the files\n\n179\n00:08:14.560 --> 00:08:16.180\nwherever we want within limits.\n\n180\n00:08:16.180 --> 00:08:16.810\n&gt;&gt; Keep it clean.\n\n181\n00:08:16.810 --> 00:08:19.018\nAnd we keep it clean,\nthat's the key piece.\n\n182\n00:08:19.018 --> 00:08:22.110\nAnd the include files, all we're really\ndoing is taking those same commands I\n\n183\n00:08:22.110 --> 00:08:24.240\njust did and\nputting them in a separate file and\n\n184\n00:08:24.240 --> 00:08:26.600\nthen using an include statement\nto bring them back in.\n\n185\n00:08:26.600 --> 00:08:31.516\nSo let's start by creating that file and\nthen we'll go from there.\n\n186\n00:08:31.516 --> 00:08:36.275\nNow, when we did the BIND episodes,\nI put all the domains, all the zone files,\n\n187\n00:08:36.275 --> 00:08:40.570\nin /var/named right,\ncuz that's where it expected them to be.\n\n188\n00:08:40.570 --> 00:08:45.670\nWith Unbound, it actually expects\nthem to be here, in /etc/unbound.\n\n189\n00:08:45.670 --> 00:08:47.032\nI say here,\nI'm in the wrong directory aren't I.\n\n190\n00:08:47.032 --> 00:08:50.820\nSo let me get into /etc/unbound.\n\n191\n00:08:50.820 --> 00:08:51.756\nThere we go.\n\n192\n00:08:51.756 --> 00:08:56.910\nAnd when I look in here I'm gonna find my\nunbound.cnlf that I've been working with.\n\n193\n00:08:56.910 --> 00:08:58.920\nAnd then all this other\nstuff that's in here.\n\n194\n00:08:58.920 --> 00:09:00.980\nThese are mostly keys for DNS sec.\n\n195\n00:09:00.980 --> 00:09:05.230\nBut I can start to create zone files right\nhere and populate them in with their data.\n\n196\n00:09:05.230 --> 00:09:09.900\nSo if I wanna override lab.itpro.tv\nI can just come in here and say,\n\n197\n00:09:09.900 --> 00:09:13.660\nI'm gonna create a file\ncalled /lab.itpro.tv.\n\n198\n00:09:13.660 --> 00:09:15.910\nAnd the final name can\nbe whatever you want.\n\n199\n00:09:15.910 --> 00:09:18.860\nDoesn't really matter, but\nagain I fall into habits,\n\n200\n00:09:18.860 --> 00:09:20.150\nso I like to do the domain.dns.\n\n201\n00:09:20.150 --> 00:09:26.020\nAnd then in that file, I type those\nsame exact commands I did moment ago.\n\n202\n00:09:26.020 --> 00:09:28.040\nI may just be typing a heck\nof a lot more of them.\n\n203\n00:09:28.040 --> 00:09:31.020\nSo I'll do local-zone.\n\n204\n00:09:31.020 --> 00:09:38.850\nAnd then I'll put in lab.itpro.tv and\nit's a static, right?\n\n205\n00:09:38.850 --> 00:09:40.680\nAnd then I'll do local-data.\n\n206\n00:09:40.680 --> 00:09:43.930\nAnd then I start to\npopulate in my local data.\n\n207\n00:09:43.930 --> 00:09:49.455\nSo for example, the one I did in the other\nfile was webserver01.lab.itpro.tv and\n\n208\n00:09:49.455 --> 00:09:53.539\nI put that that was a internet class,\nthat it was an A record, and\n\n209\n00:09:53.539 --> 00:09:57.870\nthen it pointed to some IP that I'm\nhaving a hard time remembering.\n\n210\n00:09:57.870 --> 00:09:58.850\n&gt;&gt; 100?\n\n211\n00:09:58.850 --> 00:10:00.096\n&gt;&gt; There we go, all right now.\n\n212\n00:10:00.096 --> 00:10:02.380\nSo that's exactly what I\nput in the other file.\n\n213\n00:10:02.380 --> 00:10:02.952\n&gt;&gt; Okay.\n\n214\n00:10:02.952 --> 00:10:03.730\n&gt;&gt; Right?\n\n215\n00:10:03.730 --> 00:10:11.450\nAnd, I even put local-data-ptr to create\nthe pointer records for it, where I said\n\n216\n00:10:12.690 --> 00:10:18.731\nthat that IP was tied to web\nserver webserver01.lab.itpro.tv.\n\n217\n00:10:18.731 --> 00:10:21.800\nI can now continue on and\nadd all my other records.\n\n218\n00:10:21.800 --> 00:10:24.440\nAnd what I'm doing is I'm\nputting my forward and\n\n219\n00:10:24.440 --> 00:10:27.400\nmy reverse look up zone\nright here in the same file.\n\n220\n00:10:27.400 --> 00:10:28.060\nI don't have to do that.\n\n221\n00:10:28.060 --> 00:10:32.120\nI could have the pointers in a separate\nfile too if I wanted to go really\n\n222\n00:10:32.120 --> 00:10:33.340\nthe way bind was.\n\n223\n00:10:33.340 --> 00:10:38.890\nBut the key thing is I'm following that\nsame file name command convention that\n\n224\n00:10:38.890 --> 00:10:41.130\nwe followed in the main configuration.\n\n225\n00:10:41.130 --> 00:10:45.433\nSo now I can come through, and I can start\nto add everybody else that I need to add,\n\n226\n00:10:45.433 --> 00:10:48.236\nincluding records that\naren't just host records.\n\n227\n00:10:48.236 --> 00:10:53.192\nI mean I might have more host records,\nI might say like local-data,\n\n228\n00:10:53.192 --> 00:10:56.707\nand have a record for mail1.lab.itpro.tv.\n\n229\n00:10:56.707 --> 00:11:02.407\nThat is an Internet A record and-\n&gt;&gt; An X would be?\n\n230\n00:11:02.407 --> 00:11:05.051\n&gt;&gt; I just doing the A record for\nnow, but good point, right?\n\n231\n00:11:05.051 --> 00:11:05.958\n&gt;&gt; Okay.\nThen I add it in the right.\n\n232\n00:11:05.958 --> 00:11:07.932\nYeah.\n&gt;&gt; If I wanna mail server to work it's\n\n233\n00:11:07.932 --> 00:11:11.010\ngonna have an MX record too,\nso I need to have both.\n\n234\n00:11:11.010 --> 00:11:14.300\nLet me, I'm gonna do two of them\nbecause I'm all about redundancy.\n\n235\n00:11:14.300 --> 00:11:20.240\nSo we'll do one for another mail\nserver and get that one in place.\n\n236\n00:11:20.240 --> 00:11:24.560\nAnd as I put these in I've been doing\njust A records this whole time.\n\n237\n00:11:24.560 --> 00:11:26.028\nWhich, that's not fun, right?\n\n238\n00:11:26.028 --> 00:11:28.750\nSo we wanna add in the MX\nrecords like Cherokee mentioned,\n\n239\n00:11:28.750 --> 00:11:33.620\nI can say local-data and then I can\nstart to put in the records there.\n\n240\n00:11:33.620 --> 00:11:38.880\nNow, an MX record doesn't point to a host\nname, it points to a domain, and in bind,\n\n241\n00:11:38.880 --> 00:11:41.290\nI would throw an at similar\nreference to domain.\n\n242\n00:11:41.290 --> 00:11:46.098\nThat doesn't work in unbound, because I\ncould have more than one domain smeared in\n\n243\n00:11:46.098 --> 00:11:49.339\nhere, right, so\nI need to say this is lab.itpro.tv.\n\n244\n00:11:49.339 --> 00:11:52.610\nIt's an Internet record,\nbut it's an MX record.\n\n245\n00:11:52.610 --> 00:11:55.430\nAnd so here's what I'm gonna return for\nthat MX record so\n\n246\n00:11:55.430 --> 00:11:56.920\nthat people will be able\nto get to my server.\n\n247\n00:11:56.920 --> 00:12:03.410\nI'm gonna do a priority of ten and\nit's mail1.lab.itpro.tv.\n\n248\n00:12:03.410 --> 00:12:05.740\nI thought that was gonna wrap for\nsure and it didn't.\n\n249\n00:12:05.740 --> 00:12:09.470\nAnd then I can add a second one for\nmy other server, right?\n\n250\n00:12:09.470 --> 00:12:11.700\nSo I wanna pop that in.\n\n251\n00:12:11.700 --> 00:12:13.030\nAnd this one's gonna be mail too,\n\n252\n00:12:13.030 --> 00:12:15.030\nif I wanna load balance I can\nleave it the way that it is.\n\n253\n00:12:15.030 --> 00:12:17.440\nBut I'm gonna bump it up to a 20 priority.\n\n254\n00:12:17.440 --> 00:12:18.880\nAnd so there's my MX records.\n\n255\n00:12:18.880 --> 00:12:22.648\nAll that really changed was the record\ntitle, I made it an MX, okay?\n\n256\n00:12:22.648 --> 00:12:25.510\nI can keep going,\nI can add other things if I've got them.\n\n257\n00:12:25.510 --> 00:12:30.710\nIf I wanna have more than one\nIP tied to a name, well before,\n\n258\n00:12:30.710 --> 00:12:35.704\nlike in bind what I would do,\nis I'd put the first one in.\n\n259\n00:12:35.704 --> 00:12:39.096\nAnd I would say maybe\nfiles at it.pro.tv and\n\n260\n00:12:39.096 --> 00:12:42.490\nthen I would assign an IP to it, right?\n\n261\n00:12:42.490 --> 00:12:46.119\nAnd then if I had another\nIP what would I do?\n\n262\n00:12:46.119 --> 00:12:48.634\nI would leave the name blank and\n\n263\n00:12:48.634 --> 00:12:50.920\nthen I would-\n&gt;&gt; Could you back off of that\n\n264\n00:12:50.920 --> 00:12:52.000\nprevious entry.\n\n265\n00:12:52.000 --> 00:12:53.880\n&gt;&gt; But that doesn't work on unbound either\n&gt;&gt; Okay.\n\n266\n00:12:53.880 --> 00:12:56.250\n&gt;&gt; Because unbound, again,\nthese could all be mixed up,\n\n267\n00:12:56.250 --> 00:12:58.350\nthey could be in different domains,\nit doesn't know.\n\n268\n00:12:58.350 --> 00:13:00.945\nSo I just have to specify it again.\n\n269\n00:13:00.945 --> 00:13:04.110\nNothing end of the world,\na little extra typing, but\n\n270\n00:13:04.110 --> 00:13:07.560\nit let's me specify that extra IP.\n\n271\n00:13:07.560 --> 00:13:09.890\nSo you can do that,\nyou just don't get that little short cut.\n\n272\n00:13:09.890 --> 00:13:13.650\nSo the little alias shortcuts that\nwe used in Bind don't work so\n\n273\n00:13:13.650 --> 00:13:16.210\nwell here, but\nyou type them out and you're fine.\n\n274\n00:13:16.210 --> 00:13:19.740\nNow, notice this whole time I\ndidn't do a start of authority.\n\n275\n00:13:19.740 --> 00:13:22.380\nI didn't do name server records,\nI didn't do time to lives.\n\n276\n00:13:22.380 --> 00:13:26.060\nAnd that's because Unbound is expecting\nall those to exist somewhere else.\n\n277\n00:13:26.060 --> 00:13:27.830\nI could do them here.\n\n278\n00:13:27.830 --> 00:13:29.550\nBut it's expecting them\nto exist somewhere else.\n\n279\n00:13:29.550 --> 00:13:31.580\nThis zone, lab.itpro.tv.\n\n280\n00:13:31.580 --> 00:13:33.740\nI'm actually overriding it.\n\n281\n00:13:33.740 --> 00:13:34.940\nIt doesn't truly exist here.\n\n282\n00:13:34.940 --> 00:13:36.630\nThese are all overrides.\n\n283\n00:13:36.630 --> 00:13:38.680\nBut I've effectively created\nthe zone right here,\n\n284\n00:13:38.680 --> 00:13:39.880\nbecause I've got all of my records.\n\n285\n00:13:39.880 --> 00:13:41.410\nAnd I guess I've got most of my records.\n\n286\n00:13:41.410 --> 00:13:43.980\nI kind of need to update all my PTRs.\n\n287\n00:13:43.980 --> 00:13:46.760\nSo I've got one PTR in place.\n\n288\n00:13:46.760 --> 00:13:51.790\nBut if I wanna create other ones, I need\nto get them in and get them in place.\n\n289\n00:13:51.790 --> 00:13:55.460\nSo I've got what, four or\nfive different IP addresses.\n\n290\n00:13:55.460 --> 00:14:00.270\nAnd I can just copy this guy or something\nand save me a little bit of time.\n\n291\n00:14:01.900 --> 00:14:03.060\nAnd put each one of these in.\n\n292\n00:14:03.060 --> 00:14:05.980\nSo just getting each one entered in.\n\n293\n00:14:05.980 --> 00:14:10.080\nAnd what I'm effectively doing is\nbuilding the entire zone file out.\n\n294\n00:14:10.080 --> 00:14:15.270\nBut the challenge I have is that\nI do lose some basic things.\n\n295\n00:14:15.270 --> 00:14:16.460\nI can do cnames.\n\n296\n00:14:16.460 --> 00:14:20.090\nSo for example, if I just change this\nwhere it say it's an A record and\n\n297\n00:14:20.090 --> 00:14:23.710\nchange it to cname, it would work but\nclients aren't going to follow it.\n\n298\n00:14:23.710 --> 00:14:25.160\nThey're not going to work properly,\n\n299\n00:14:25.160 --> 00:14:28.830\nso I'll have my own unique issues\nif I were to go that route.\n\n300\n00:14:30.210 --> 00:14:34.795\nAll right, so when this is done,\nI've effectively created my forward\n\n301\n00:14:34.795 --> 00:14:39.560\nlook-up zone and reverse look-up zone and\nall the entries for lab.itpro.tv,\n\n302\n00:14:39.560 --> 00:14:42.380\nalthough I kind of left that out with\nfiles, didn't I, so I screwed that one up.\n\n303\n00:14:42.380 --> 00:14:48.160\nLet me fix that and I am having to type\nall this stuff out each time, right?\n\n304\n00:14:48.160 --> 00:14:50.900\nNo shortcuts or whatever for\nme on this one.\n\n305\n00:14:50.900 --> 00:14:53.990\nGotta type it out, but once they're\nin there, then we're in business.\n\n306\n00:14:53.990 --> 00:14:57.910\nOkay, now,\nthat was just a collection of commands.\n\n307\n00:14:57.910 --> 00:15:01.270\nI need to tell the centralized config\nfile to load all this stuff, right?\n\n308\n00:15:01.270 --> 00:15:03.880\nSo I'm gonna go right back\ninto my central config file.\n\n309\n00:15:05.460 --> 00:15:12.902\nAnd I'm gonna go and find the local data\ncommands that I put in a little while ago.\n\n310\n00:15:12.902 --> 00:15:15.723\nSo I'm just gonna keep searching till\nI find them, there they are, and\n\n311\n00:15:15.723 --> 00:15:17.340\nI'm gonna delete them out of there.\n\n312\n00:15:17.340 --> 00:15:20.370\nWe'll just get rid of that, get rid\nof that, get rid of that, all right.\n\n313\n00:15:20.370 --> 00:15:24.550\nAnd instead of having those commands,\nI'm gonna do an include.\n\n314\n00:15:24.550 --> 00:15:30.357\nAnd so by coming in here and\nsaying, include, and\n\n315\n00:15:30.357 --> 00:15:38.105\nthen pointing to a file\n/etc/unbound/lab.itpro.tv.dns,\n\n316\n00:15:38.105 --> 00:15:41.855\nwhich I can spell, there we go.\n\n317\n00:15:41.855 --> 00:15:43.024\nI can put that in there and\n\n318\n00:15:43.024 --> 00:15:46.485\nnotice that I put it in the same place\nwhere I would've put local-data.\n\n319\n00:15:46.485 --> 00:15:48.965\nCuz when it reads this config file it's\njust going to go out and grab the file and\n\n320\n00:15:48.965 --> 00:15:51.537\njust stick it right here in this spot, so\nall those commands I type would go here.\n\n321\n00:15:51.537 --> 00:15:55.349\nIf I had other zones, like if I\nsplit out one of the other one's,\n\n322\n00:15:55.349 --> 00:15:57.763\nI would just add more include commands.\n\n323\n00:15:57.763 --> 00:16:04.678\nAnd so I can put each one in here,\nmaybe I've got dev.itpro.tv.\n\n324\n00:16:04.678 --> 00:16:09.805\nAnd each one, or maybe I did the reverse\nlookup zone in a separate file,\n\n325\n00:16:09.805 --> 00:16:11.524\nno reason I couldn't.\n\n326\n00:16:11.524 --> 00:16:20.016\nAnd so I might have put that in here\nas 222.0.10.in-addr.arpa.dns like that.\n\n327\n00:16:20.016 --> 00:16:23.700\nJust list each one or\nif you call it bob.txt or whatever.\n\n328\n00:16:23.700 --> 00:16:25.110\nAnd it's just gonna load those in.\n\n329\n00:16:25.110 --> 00:16:28.480\nSo now I don't have to go and edit the\ncentral config file when I modify zones.\n\n330\n00:16:28.480 --> 00:16:31.660\nI can go into the individual zone\nfiles and modify them there, right.\n\n331\n00:16:31.660 --> 00:16:33.570\nSo they're just all being included.\n\n332\n00:16:33.570 --> 00:16:35.820\nNow I don't actually have these so\nI'm gonna delete those out.\n\n333\n00:16:37.120 --> 00:16:38.710\nAnd just leave the one that I've got.\n\n334\n00:16:38.710 --> 00:16:40.260\n&gt;&gt; Okay.\n&gt;&gt; All right.\n\n335\n00:16:40.260 --> 00:16:41.740\nSo I'm gonna check that configuration.\n\n336\n00:16:43.250 --> 00:16:48.050\nAnd there we go, no errors found,\nso that's a good thing.\n\n337\n00:16:48.050 --> 00:16:51.340\nAlthough I will tell you,\nit sees the include line and\n\n338\n00:16:51.340 --> 00:16:54.470\nit verifies the other file exists, but\nit doesn't actually load that other file.\n\n339\n00:16:54.470 --> 00:16:56.530\nSo I could still have problems.\n\n340\n00:16:56.530 --> 00:16:58.020\nWe'll see when I do a restart.\n\n341\n00:16:58.020 --> 00:17:04.916\nSo I'm gonna do a systemctl\nrestart of unbound.service.\n\n342\n00:17:04.916 --> 00:17:06.130\nNo errors, that's a good sign.\n\n343\n00:17:07.130 --> 00:17:12.140\nAnd I'll do an nslookup,\nlet me switch to myself as the server.\n\n344\n00:17:12.140 --> 00:17:16.930\nAnd if I do a search for\nwebserver01.lab.itpro.tv,\n\n345\n00:17:16.930 --> 00:17:21.120\nthat should be getting served\nout of the include file.\n\n346\n00:17:21.120 --> 00:17:22.880\nWell, I looked that one up earlier, so\n\n347\n00:17:22.880 --> 00:17:25.900\nit might just be cached,\nI didn't flush the cache on this thing.\n\n348\n00:17:25.900 --> 00:17:27.126\nSo let me try one of the new\nentries that we did.\n\n349\n00:17:27.126 --> 00:17:31.923\nI did files.lab.itpro.tv,\nI get two addresses.\n\n350\n00:17:31.923 --> 00:17:32.430\n&gt;&gt; There you go.\n\n351\n00:17:32.430 --> 00:17:33.550\n&gt;&gt; 103 and 104, right.\n\n352\n00:17:34.670 --> 00:17:38.090\nIf I do a search for MX records.\n\n353\n00:17:38.090 --> 00:17:40.600\nLet me switch my type over to MX records.\n\n354\n00:17:40.600 --> 00:17:43.900\nAnd I'll do a search for lab.itpro.tv.\n\n355\n00:17:43.900 --> 00:17:45.220\nThere's my MX records.\n\n356\n00:17:45.220 --> 00:17:47.460\nServed up just like they would\nfrom a regular DNS server.\n\n357\n00:17:47.460 --> 00:17:50.030\nThe difference here being,\nthey are served up very fast.\n\n358\n00:17:50.030 --> 00:17:53.050\nUnbound can scale to handle\na huge amount of throughput,\n\n359\n00:17:53.050 --> 00:17:55.320\nand I get that information back.\n\n360\n00:17:55.320 --> 00:17:56.310\nOn the configuration side,\n\n361\n00:17:56.310 --> 00:17:59.010\nit's almost easier in a way\nthat how you write those files.\n\n362\n00:17:59.010 --> 00:18:01.980\nIt's a little bit more\nforgiving in the syntax.\n\n363\n00:18:01.980 --> 00:18:05.580\nBut, for the most part,\nonce it's done it's now up and going.\n\n364\n00:18:05.580 --> 00:18:07.820\nJust remember, these aren't real zones.\n\n365\n00:18:07.820 --> 00:18:09.140\nThey're overrides.\n\n366\n00:18:09.140 --> 00:18:10.190\nWe're treating them as zones.\n\n367\n00:18:10.190 --> 00:18:11.410\nThey work like zones.\n\n368\n00:18:11.410 --> 00:18:14.780\nBut we're really just overriding\nsome other recursive look up to\n\n369\n00:18:14.780 --> 00:18:16.110\nprovide the values we want.\n\n370\n00:18:16.110 --> 00:18:17.870\nAnd we can change them to\nwhatever the heck we want.\n\n371\n00:18:17.870 --> 00:18:21.290\nAnd I can even override google.com or\nmicrosoft.com.\n\n372\n00:18:21.290 --> 00:18:25.040\nAnd anybody who looks to my server\nwill get the values that I provide.\n\n373\n00:18:25.040 --> 00:18:29.130\nWhich you can have a lot of fun with but-\n&gt;&gt; Especially if you wanted to try to\n\n374\n00:18:29.130 --> 00:18:33.370\nprevent certain end users from\ngoing to unauthorized sites maybe.\n\n375\n00:18:33.370 --> 00:18:35.332\nSomething like that.\n&gt;&gt; Yeah, if you do a Google search for\n\n376\n00:18:35.332 --> 00:18:39.443\nunbound block ad server, there's tons of\npeople that release include files that\n\n377\n00:18:39.443 --> 00:18:41.904\nare specifically designed\nto block ad servers.\n\n378\n00:18:41.904 --> 00:18:43.037\n&gt;&gt; And you can just pull them right in?\n\n379\n00:18:43.037 --> 00:18:43.574\n&gt;&gt; Yeah.\n\n380\n00:18:43.574 --> 00:18:44.126\n&gt;&gt; Nice.\n\n381\n00:18:44.126 --> 00:18:47.434\n&gt;&gt; You pump the right in and then when\nanybody does a name lookup to go an ad\n\n382\n00:18:47.434 --> 00:18:50.300\nserver it hits these include\nfiles that you're updating.\n\n383\n00:18:50.300 --> 00:18:52.570\nUsually create a cron job\nto keep them up to date.\n\n384\n00:18:52.570 --> 00:18:54.950\nAnd they'll just get white squares\nwhere there will be an ad or\n\n385\n00:18:54.950 --> 00:18:57.010\nthere will be tons of people that do that.\n\n386\n00:18:57.010 --> 00:19:00.860\nIt's not the most effective way to kill\nthat stuff, but it kills it at the network\n\n387\n00:19:00.860 --> 00:19:04.190\nlevel, so you don't have to have clients\nor anything running on workstations.\n\n388\n00:19:04.190 --> 00:19:06.080\nA lot of people use on bound that way.\n\n389\n00:19:06.080 --> 00:19:09.840\nIf you do a Google search, you'll find\na lot of good information on that.\n\n390\n00:19:09.840 --> 00:19:11.090\n&gt;&gt; Great.\n\n391\n00:19:11.090 --> 00:19:14.290\nWell, thank you for showing us how\nto go ahead and create those files.\n\n392\n00:19:14.290 --> 00:19:17.710\nAre we going to be taking a look\nat any kind of zone transfers in\n\n393\n00:19:17.710 --> 00:19:18.810\nthe foreseeable future?\n\n394\n00:19:18.810 --> 00:19:21.040\n&gt;&gt; So funny you should mention that.\n\n395\n00:19:21.040 --> 00:19:23.540\nTechnically there's no zone to transfer,\nright?\n\n396\n00:19:23.540 --> 00:19:27.810\nSo I can't do a zone transfer,\nthere is no replication in unbound.\n\n397\n00:19:27.810 --> 00:19:30.730\nSo if I wanna set up any\nkind of replication,\n\n398\n00:19:30.730 --> 00:19:34.470\nI need to do the include statements\nlike I did, and then I can use Rsync or\n\n399\n00:19:34.470 --> 00:19:37.180\nsome other utility to sync\nthe little zone files that we make.\n\n400\n00:19:37.180 --> 00:19:40.550\nBut otherwise, there's no zone transfer\nfunctionality built into unbound.\n\n401\n00:19:40.550 --> 00:19:43.330\nNo replication, you have to do it by hand.\n\n402\n00:19:43.330 --> 00:19:46.310\nIf you're using include file, it's not\nthat big of a deal to do it by hand.\n\n403\n00:19:46.310 --> 00:19:50.712\nBut that's the way you sync it across\notherwise, no replication on this one.\n\n404\n00:19:50.712 --> 00:19:51.450\n&gt;&gt; Perfect.\n&gt;&gt; [LAUGH]\n\n405\n00:19:51.450 --> 00:19:52.000\n&gt;&gt; All right.\n\n406\n00:19:52.000 --> 00:19:53.050\nSo, I think that's it.\n\n407\n00:19:53.050 --> 00:19:55.030\nUnless we have any other final thoughts.\n\n408\n00:19:55.030 --> 00:19:56.060\n&gt;&gt; That's about it for unbound.\n\n409\n00:19:56.060 --> 00:19:57.470\nRemember, you can scale really high.\n\n410\n00:19:57.470 --> 00:20:00.180\nIt is the default in\nservices like open BST so\n\n411\n00:20:00.180 --> 00:20:02.570\nyou might already have it\ninstalled in your system.\n\n412\n00:20:02.570 --> 00:20:04.720\nJust jump in there and\nconfigure it and kinda tweak it.\n\n413\n00:20:04.720 --> 00:20:06.150\nIt's pretty powerful stuff.\n\n414\n00:20:06.150 --> 00:20:10.290\nAnd maybe we'll do an episode on the ad\nfiltering if people find that interesting.\n\n415\n00:20:10.290 --> 00:20:11.740\n&gt;&gt; Okay.\n&gt;&gt; If it is a good use of unbound.\n\n416\n00:20:11.740 --> 00:20:14.580\n&gt;&gt; Well, that about wraps it up,\nladies and gentlemen.\n\n417\n00:20:14.580 --> 00:20:17.910\nLet's go ahead and\nsign off as your host, Cherokee Boose.\n\n418\n00:20:17.910 --> 00:20:18.880\n&gt;&gt; And I'm Don Pezet.\n\n419\n00:20:18.880 --> 00:20:22.397\n&gt;&gt; See you next time here at ITProTV.\n\n420\n00:20:22.397 --> 00:20:28.419\n[MUSIC]\n\n421\n00:20:28.419 --> 00:20:30.310\n&gt;&gt; Thank you for watching, IT PRO TV.\n\n",
          "vimeoId": "196614556"
        },
        {
          "description": "In this episode, Wes and Don explain how to reduce ads being delivered to your end-users with Unbound. They show you how to configure the DNS server such obtaining Gavin’s script, executing it and verifying the presences of the file as well as testing the ad blocking capabilities.",
          "length": "1608",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-9-3-blocking_ads_with_unbound-121216-PGM.00_26_33_29.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-9-3-blocking_ads_with_unbound-121216-PGM.00_26_33_29.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-9-3-blocking_ads_with_unbound-121216-PGM.00_26_33_29.Still001-sm.jpg",
          "title": "Blocking Ads with Unbound",
          "transcript": "WEBVTT\n\n1\n00:00:00.008 --> 00:00:01.399\nWelcome to ITPRO.TV,\nI'm your host Don Pezet.\n\n2\n00:00:01.399 --> 00:00:08.258\n&gt;&gt; [CROSSTALK]\n\n3\n00:00:08.258 --> 00:00:12.039\n&gt;&gt; You're watching ITPRO.TV.\n\n4\n00:00:12.039 --> 00:00:14.831\n&gt;&gt; Welcome back to another\ngreat episode here at ITPRO.TV.\n\n5\n00:00:14.831 --> 00:00:16.195\nI'm your host, Wes Bryan.\n\n6\n00:00:16.195 --> 00:00:20.490\nAnd in today's episode, we're continuing\nthrough our series within DNS tech skills.\n\n7\n00:00:20.490 --> 00:00:22.137\nAnd joining me back in\nthe studios today for\n\n8\n00:00:22.137 --> 00:00:24.205\nthis very endeavor is none other than Mr.\nDon Pezet.\n\n9\n00:00:24.205 --> 00:00:25.590\nDon, how you doing, sir?\n\n10\n00:00:25.590 --> 00:00:26.550\n&gt;&gt; I'm doing great, Wes,\n\n11\n00:00:26.550 --> 00:00:29.190\nready to dive into something\na little more exciting today.\n\n12\n00:00:29.190 --> 00:00:31.480\nWe've been messing with\nUnbound the last few episodes.\n\n13\n00:00:31.480 --> 00:00:34.740\nWe got a server set up,\nwe created some kinda fake zones in there.\n\n14\n00:00:34.740 --> 00:00:37.720\nBut in this episode we're gonna\nbasically take Unbound and\n\n15\n00:00:37.720 --> 00:00:41.020\nset it up to block advertising and\nmalware websites.\n\n16\n00:00:41.020 --> 00:00:46.350\nOne of the cool things about Unbound is\nit's not the greatest DNS zone server,\n\n17\n00:00:46.350 --> 00:00:47.280\nwhich I know is funny for\n\n18\n00:00:47.280 --> 00:00:50.160\na DNS server it seems like what\na primary purpose would be.\n\n19\n00:00:50.160 --> 00:00:52.978\nBut its primary purpose really\nis to focus on caching.\n\n20\n00:00:52.978 --> 00:00:58.421\nAnd validation of look ups and validations\nof domains and it does it very, very fast.\n\n21\n00:00:58.421 --> 00:01:02.207\nAnd it can do it at a very, very large\nscale so it can handle tens of thousands,\n\n22\n00:01:02.207 --> 00:01:06.078\nhundreds of thousands of clients sitting\nbehind it and it does it really well.\n\n23\n00:01:06.078 --> 00:01:08.600\nIt is a very modern,\nvery streamlined code.\n\n24\n00:01:08.600 --> 00:01:11.870\nSo we can use that for all sorts of ways\nthat it wasn't necessarily intended.\n\n25\n00:01:11.870 --> 00:01:14.381\n&gt;&gt; You know, right before we started,\nDon, I was talking about,\n\n26\n00:01:14.381 --> 00:01:17.654\nI've seen software in the past that's done\nthis by modifying the local host file.\n\n27\n00:01:17.654 --> 00:01:18.663\nAnd you made a good point.\n\n28\n00:01:18.663 --> 00:01:22.525\nNow, why won't we just use a software like\nthat that's gonna modify just a computer's\n\n29\n00:01:22.525 --> 00:01:23.055\nhost file.\n\n30\n00:01:23.055 --> 00:01:26.283\n&gt;&gt; All right, yeah, so\nthat's one great way to deal with malware,\n\n31\n00:01:26.283 --> 00:01:29.057\nwell inot just malware but\nspyware, advertisements.\n\n32\n00:01:29.057 --> 00:01:32.409\nWhatever it is, you take the host\nfile on your own computer and\n\n33\n00:01:32.409 --> 00:01:36.360\nyou put all these entries in there\nthat say, here's a bad server.\n\n34\n00:01:36.360 --> 00:01:40.520\nAnd I'm just gonna point it to, well\nnormally point it to yourself, 127.0.0.1.\n\n35\n00:01:40.520 --> 00:01:43.210\nAnd you can do that, and\nit works out really well, right.\n\n36\n00:01:43.210 --> 00:01:45.410\nThe problem is,\nif you have a thousand computers,\n\n37\n00:01:45.410 --> 00:01:49.580\nmaintaining a thousand different host\nfiles becomes really, really challenging.\n\n38\n00:01:49.580 --> 00:01:53.020\nAnd on top of that, you've got operating\nsystem vendors like Microsoft,\n\n39\n00:01:53.020 --> 00:01:56.040\nwhere Windows is no longer looking\nat the host file by default,\n\n40\n00:01:56.040 --> 00:01:57.570\njust skipping right past it.\n\n41\n00:01:57.570 --> 00:01:59.500\nAnd so that's not a reliable way to do it.\n\n42\n00:01:59.500 --> 00:02:01.560\nIt used to be great because\nit was super fast and\n\n43\n00:02:01.560 --> 00:02:05.250\nyou had complete control over it but\nit's not so terribly effective anymore.\n\n44\n00:02:05.250 --> 00:02:08.820\nAnd the other challenge is, you've got\nusers that have iPhones and Android phones\n\n45\n00:02:08.820 --> 00:02:12.135\nand all these other devices that you\ncan't control the host file on without,\n\n46\n00:02:12.135 --> 00:02:14.685\nwell, like with the iPhone,\nyou'd have to jailbreak it.\n\n47\n00:02:14.685 --> 00:02:17.000\nYou don't wanna jailbreak\nyour corporate phones!\n\n48\n00:02:17.000 --> 00:02:18.250\nIt's not an option.\n\n49\n00:02:18.250 --> 00:02:21.800\nSo how can we protect\nthem from malicious hosts\n\n50\n00:02:21.800 --> 00:02:23.410\nif we don't have that access available?\n\n51\n00:02:23.410 --> 00:02:25.850\nAnd the answer is to use DNS.\n\n52\n00:02:25.850 --> 00:02:28.823\nNow we can do it through Bind, but with\nBind it would be really challenging cuz\n\n53\n00:02:28.823 --> 00:02:31.688\nyou'd have to maintain a zone file for\nevery single one of these domains.\n\n54\n00:02:31.688 --> 00:02:35.760\nAnd it's just a nightmare, and\nBind collapses under it pretty fast.\n\n55\n00:02:35.760 --> 00:02:37.373\nSo it's really not even possible there.\n\n56\n00:02:37.373 --> 00:02:41.256\nBut on Unbound,\non Unbound I can do DNS name spoofing, and\n\n57\n00:02:41.256 --> 00:02:46.092\nI can name spoof every single malware\nadvertising host or whatever, and\n\n58\n00:02:46.092 --> 00:02:48.330\nI could point it wherever I want.\n\n59\n00:02:48.330 --> 00:02:51.370\nI could point it at 12700 if I want.\n\n60\n00:02:51.370 --> 00:02:57.540\nAnd now when somebody has an iPhone,\nAndroid, Mac, Windows, Linux, whatever.\n\n61\n00:02:57.540 --> 00:03:01.000\nThey use DACP to get an address,\nthey get my DNS server, and\n\n62\n00:03:01.000 --> 00:03:03.000\nit's all being filtered right there.\n\n63\n00:03:03.000 --> 00:03:06.080\nOkay what are the challenges\nof making this happen?\n\n64\n00:03:06.080 --> 00:03:09.160\nChallenge number one, I need an unbound\nserver which we already have from\n\n65\n00:03:09.160 --> 00:03:11.860\nthe last episode, so\nthat's challenge one solved.\n\n66\n00:03:11.860 --> 00:03:18.460\nChallenge number two, I need a way to\nbasically poison these DNS names, right.\n\n67\n00:03:18.460 --> 00:03:20.796\nWell we can do that through\nany simple mechanism.\n\n68\n00:03:20.796 --> 00:03:24.805\nIf you do dns spoofing we can take\na name and we can map it to an ip.\n\n69\n00:03:24.805 --> 00:03:27.136\nWe can override what's\nactually out there in dns, and\n\n70\n00:03:27.136 --> 00:03:29.578\nwe can do that right through\nlocal lookups and unbounds.\n\n71\n00:03:29.578 --> 00:03:32.975\nSo challenge number two,\nthat one's already solved in unbound.\n\n72\n00:03:32.975 --> 00:03:35.436\nChallenge number three, I need a list.\n\n73\n00:03:35.436 --> 00:03:37.575\nI need a list of all this junk.\n\n74\n00:03:37.575 --> 00:03:40.120\nAnd this is the first one that\nwe're gonna hit a road bump on.\n\n75\n00:03:40.120 --> 00:03:44.360\nBecause I don't have a list, I don't know\nall the bad servers that are out there in\n\n76\n00:03:44.360 --> 00:03:45.980\nthe world, and most people don't.\n\n77\n00:03:45.980 --> 00:03:50.738\nBut there's a couple of people out\nthere in the Internet, in the tubes,\n\n78\n00:03:50.738 --> 00:03:53.783\nthat take the time to\naccumulate these lists.\n\n79\n00:03:53.783 --> 00:03:57.854\nLists of bad hosts, hosts that serve up\nadvertisements, or malware, spyware, and\n\n80\n00:03:57.854 --> 00:04:00.460\nthey put it all out there and\nthey publish it.\n\n81\n00:04:00.460 --> 00:04:03.880\nOne of the most well known,\nlet me bring this up here.\n\n82\n00:04:03.880 --> 00:04:07.697\nOne of the most well known is,\n\n83\n00:04:07.697 --> 00:04:12.747\nthe website is somonewhocares.org.\n\n84\n00:04:12.747 --> 00:04:14.110\nI'm trying to remember the guy's name.\n\n85\n00:04:14.110 --> 00:04:15.576\nLet's just go there.\n\n86\n00:04:15.576 --> 00:04:19.243\nSomeonewhocares.org.\n\n87\n00:04:19.243 --> 00:04:21.753\nApparently the challenge is spelling it.\n\n88\n00:04:21.753 --> 00:04:24.686\nAnd if I go to this website,\nsomeonewhocares.org.\n\n89\n00:04:24.686 --> 00:04:26.598\nDan Pollock that's his name, sorry guys,\n\n90\n00:04:26.598 --> 00:04:29.345\nsorry Dan if you're watching I\ncouldn't remember your name.\n\n91\n00:04:29.345 --> 00:04:33.368\nSo Dan Pollock, this guy,\n[INAUDIBLE] Internet.\n\n92\n00:04:33.368 --> 00:04:38.070\nOver the last 10 or 15 years he's been\nputting together this massive list.\n\n93\n00:04:38.070 --> 00:04:42.086\nOf advertising and malware hosts, and\nhe gets some missions from other people.\n\n94\n00:04:42.086 --> 00:04:47.293\nI imagine he's not sitting around every\nday clicking on every site he can find,\n\n95\n00:04:47.293 --> 00:04:51.255\nbut he has assembled it into a nice\nbig list which you can go and\n\n96\n00:04:51.255 --> 00:04:53.917\nview at someonewhocares.org/host.\n\n97\n00:04:53.917 --> 00:04:56.937\nNow this is the HTML view of it,\nand when you look at it,\n\n98\n00:04:56.937 --> 00:04:59.690\nhow to make the Internet not suck as much.\n\n99\n00:04:59.690 --> 00:05:04.130\nSo what he's done is\nhe's put together a list.\n\n100\n00:05:04.130 --> 00:05:05.914\nAnd it's in the host file format.\n\n101\n00:05:05.914 --> 00:05:08.950\nAnd in the host file format,\nyou've got an IP mapped to a name.\n\n102\n00:05:08.950 --> 00:05:13.246\nAnd so what you're gonna see are a lot of,\nI'll just apologize now,\n\n103\n00:05:13.246 --> 00:05:15.481\nthere's a lot of bad sites in here.\n\n104\n00:05:15.481 --> 00:05:21.699\nBut you'll see a lot of sites in here and\nit will map 127.0.0.1,\n\n105\n00:05:21.699 --> 00:05:27.028\nthe loop back into whatever\nthe site is that's being blocked.\n\n106\n00:05:27.028 --> 00:05:31.844\nAnd so if you can think of, just about\nany ad service, you'll find that ad\n\n107\n00:05:31.844 --> 00:05:36.586\nservice in here, including really\nwell known ones like Google ads, and\n\n108\n00:05:36.586 --> 00:05:38.850\nthe Google Adsense network.\n\n109\n00:05:38.850 --> 00:05:40.640\nFacebook, Twitter, those guys.\n\n110\n00:05:40.640 --> 00:05:43.017\nThey've all got ad servers, and\nthey'll all be entered in here.\n\n111\n00:05:43.017 --> 00:05:46.103\nI did try and find one block that\ndidn't have bad stuff in it.\n\n112\n00:05:46.103 --> 00:05:48.630\n[LAUGH] It get kind of\nfreeze on the camera.\n\n113\n00:05:48.630 --> 00:05:52.280\nBut each one of these is a,\nthis one is statistics, right?\n\n114\n00:05:52.280 --> 00:05:54.968\nSo it's probably some kind of\ntelemetry gathering service\n\n115\n00:05:54.968 --> 00:05:57.923\nthat is recording your IP address,\nand what site you're on, and\n\n116\n00:05:57.923 --> 00:06:01.277\nhow long you spend on it, and all this\nstuff that we might not wanna share.\n\n117\n00:06:01.277 --> 00:06:05.166\nAnd by mapping it back to you,\nto 127.0.0.1,\n\n118\n00:06:05.166 --> 00:06:08.738\nit makes your computer\nimmediately do the lookup.\n\n119\n00:06:08.738 --> 00:06:12.214\nAnd then when It try's to reach out the ad\nserver, it reach out to itself, and\n\n120\n00:06:12.214 --> 00:06:14.887\nwhen it reaches out to itself,\nwe're not a web server and so\n\n121\n00:06:14.887 --> 00:06:16.625\nit just fail, it immediately fails.\n\n122\n00:06:16.625 --> 00:06:19.521\nThat's important because we don't\nwanna slow down the end user,\n\n123\n00:06:19.521 --> 00:06:22.725\nif you redirect it to a real web site\nnow it's gotta go to the real website,\n\n124\n00:06:22.725 --> 00:06:26.220\ngather that data and it slows things down,\nthat's why it redirects to itself.\n\n125\n00:06:26.220 --> 00:06:30.930\nSo this is great list right here, and\nit even goes one step further if I\n\n126\n00:06:30.930 --> 00:06:34.923\nchange that URL and\nI'm gonna add hosts to the end of that.\n\n127\n00:06:34.923 --> 00:06:38.741\nSo now it's\nsomeonewhocares.org/host/hosts.\n\n128\n00:06:38.741 --> 00:06:41.114\nNow it's just the straight\nup text version, right.\n\n129\n00:06:41.114 --> 00:06:43.630\nNo HTML prettying this one up.\n\n130\n00:06:43.630 --> 00:06:47.700\nAnd when we look at it here, it's the same\nthing, same exact list, right, but\n\n131\n00:06:47.700 --> 00:06:52.140\nin a format that we can actually\nuse to our advantage, okay.\n\n132\n00:06:52.140 --> 00:06:58.920\nI can take this and I can put it into\nunbound and I can block all this.\n\n133\n00:06:58.920 --> 00:07:00.620\nNow we do have a challenge here too,\n\n134\n00:07:00.620 --> 00:07:03.400\nour challenge here is going\nto be it's the wrong format.\n\n135\n00:07:03.400 --> 00:07:07.980\nThat inside of unbound our config\nis a little bit different, right?\n\n136\n00:07:07.980 --> 00:07:12.922\nIf I take a look at the unbound.conf\nfile that we worked on when we set\n\n137\n00:07:12.922 --> 00:07:14.148\nthis server up.\n\n138\n00:07:14.148 --> 00:07:16.351\nWe can browse around in here and\n\n139\n00:07:16.351 --> 00:07:20.351\nget to the point where I\noverroad some host names right?\n\n140\n00:07:20.351 --> 00:07:22.763\nLet me see if I can find that in here.\n\n141\n00:07:22.763 --> 00:07:24.930\nBuried away in here somewhere.\n\n142\n00:07:24.930 --> 00:07:28.360\nWe overroad some of those things by\ndoing some local addresses right?\n\n143\n00:07:28.360 --> 00:07:29.720\nAnd, you know what,\n\n144\n00:07:29.720 --> 00:07:31.680\nactually I gotta remember what we\ndid at the end of that episode.\n\n145\n00:07:31.680 --> 00:07:37.101\nWe put it in a different file so\nlet me get into that.\n\n146\n00:07:37.101 --> 00:07:40.415\nAnd we'll get a chance to see it in there.\n\n147\n00:07:40.415 --> 00:07:41.861\nActually, we overwrote it.\n\n148\n00:07:41.861 --> 00:07:42.460\nIt's been so long.\n\n149\n00:07:42.460 --> 00:07:44.630\nI have to remember where\nwe put those files.\n\n150\n00:07:44.630 --> 00:07:47.060\nThere we go lab.itpro.tv.\n\n151\n00:07:47.060 --> 00:07:48.230\nHere we go.\n\n152\n00:07:48.230 --> 00:07:50.949\nThese are the records that\nwe expect when we override.\n\n153\n00:07:50.949 --> 00:07:55.566\nIn Unbound, you can override\nanybody by saying, local data.\n\n154\n00:07:55.566 --> 00:08:00.484\nThe host name defining it as an A record\nand pointing it to an IP, right.\n\n155\n00:08:00.484 --> 00:08:06.801\nSo I could come in and I could take one\nof these guys back here like let's say,\n\n156\n00:08:06.801 --> 00:08:11.768\ntrack.msadcenter.afgz.com or\ntrack.mdrctr.com.\n\n157\n00:08:11.768 --> 00:08:13.670\nRight, so I take one of these guys.\n\n158\n00:08:13.670 --> 00:08:17.618\nAnd if I wanted to\nredirect them back here,\n\n159\n00:08:17.618 --> 00:08:22.665\nI would say local-data and\nthen track.mdctr.com,\n\n160\n00:08:22.665 --> 00:08:26.407\nIN, A, 127.0.0.1, right?\n\n161\n00:08:26.407 --> 00:08:29.773\nSo I just need to kinda flip\nthe records around a little bit and\n\n162\n00:08:29.773 --> 00:08:33.020\nadd a little text in the middle and\nkinda mess with it a bit.\n\n163\n00:08:33.020 --> 00:08:35.374\nWell, if this were just one or\ntwo records, that's not a big deal.\n\n164\n00:08:35.374 --> 00:08:36.980\nI could do it, right?\n\n165\n00:08:36.980 --> 00:08:40.460\nBut Dan's put together\nliterally thousands,\n\n166\n00:08:40.460 --> 00:08:44.557\nprobably tens of thousands at this point,\nof ad hosts.\n\n167\n00:08:44.557 --> 00:08:48.196\nI mean there are so many in here,\nthere's no way you could do that by hand,\n\n168\n00:08:48.196 --> 00:08:49.120\nall right.\n\n169\n00:08:49.120 --> 00:08:52.410\nSo we're gonna rely on someone\nelse to help us out here,\n\n170\n00:08:52.410 --> 00:08:57.140\nthere's another gentleman out there that\nhas written a script that does it for us.\n\n171\n00:08:57.140 --> 00:09:00.820\nAnd so if you were to go to and\nhe's got in on GitHub.\n\n172\n00:09:00.820 --> 00:09:05.516\nSo if you go to GitHub,\nlet's see, GitHub.com and\n\n173\n00:09:05.516 --> 00:09:10.380\nit's J-O, drell,\nis the guy who wrote the script.\n\n174\n00:09:10.380 --> 00:09:12.870\nGavin Brown I don't know why\nhis username is jodrell.\n\n175\n00:09:12.870 --> 00:09:17.620\nBut Gavin Brown,\nhe wrote this unbound block host script.\n\n176\n00:09:17.620 --> 00:09:23.710\nAnd it's a really cool script because\nwhat it does Is it takes Dan list and\n\n177\n00:09:23.710 --> 00:09:29.350\nconverts it right into the format that\nunbound expects us to follow, right.\n\n178\n00:09:29.350 --> 00:09:31.450\nSo it can do it for us.\n\n179\n00:09:31.450 --> 00:09:36.910\nAnd even better, if you save the script,\nyou can call it periodically to update it.\n\n180\n00:09:36.910 --> 00:09:39.443\nSo maybe once a day, I run the script.\n\n181\n00:09:39.443 --> 00:09:43.046\nWe grab the latest ad list,\nwe convert it into unbound's format, and\n\n182\n00:09:43.046 --> 00:09:46.300\nwe load it in Unbound, and\nnow we're nice and updated.\n\n183\n00:09:46.300 --> 00:09:49.133\nAnd as Dan adds more stuff to his list,\nwe run Gavin's script,\n\n184\n00:09:49.133 --> 00:09:51.659\nit gets the information,\nand then we're in business.\n\n185\n00:09:51.659 --> 00:09:53.896\nAll these URLs will be in the show notes\nby the way, so if you wanna go in and\n\n186\n00:09:53.896 --> 00:09:56.910\nget this stuff on your own, you'll just be\nable to pull it right from the show notes.\n\n187\n00:09:56.910 --> 00:10:00.747\nBut what we're gonna do is we're gonna use\nthese two resources to be able to do that.\n\n188\n00:10:00.747 --> 00:10:02.380\nSo let's get this set up.\n\n189\n00:10:02.380 --> 00:10:06.370\nWell first off, I wanna be able to\ncompare whether this works or not, right?\n\n190\n00:10:06.370 --> 00:10:12.360\nSo right now, my computer is configured\nto use a standard DNS server.\n\n191\n00:10:12.360 --> 00:10:16.540\nAnd so\nI'm gonna use cnn.com as my guinea pig.\n\n192\n00:10:16.540 --> 00:10:21.760\nAnd when I browse to CNN.com let\nme make the page nice and big.\n\n193\n00:10:21.760 --> 00:10:25.205\nYou'll see right off the bat I've\ndefiantly got some advertisements, okay.\n\n194\n00:10:25.205 --> 00:10:28.849\nLooks like Telts which I don't\neven wanna know what that does.\n\n195\n00:10:28.849 --> 00:10:32.761\nAs we scroll down we'll see some other\nadvertisements here more of this\n\n196\n00:10:32.761 --> 00:10:33.550\nTelts stuff.\n\n197\n00:10:34.720 --> 00:10:38.779\nIf we get down, the part that kills me is\nsomewhere in here we'll find a section,\n\n198\n00:10:38.779 --> 00:10:39.447\nright here.\n\n199\n00:10:39.447 --> 00:10:45.270\nPaid Partner Content, all of this\nis one big giant fat advertisement.\n\n200\n00:10:45.270 --> 00:10:47.820\nIt looks like news,\nlooks exactly like this stuff up here, but\n\n201\n00:10:47.820 --> 00:10:49.030\nit's all one big advertisement.\n\n202\n00:10:49.030 --> 00:10:52.087\nSo, I can see all of that\ngoing on when I browse.\n\n203\n00:10:52.087 --> 00:10:53.961\nI think I'm using Google's DNS\nservers right now.\n\n204\n00:10:53.961 --> 00:10:55.620\nSo, browsing out there.\n\n205\n00:10:55.620 --> 00:10:59.703\nSo that's what I'm gonna compare to see\nwhether or not this is working, okay.\n\n206\n00:10:59.703 --> 00:11:02.920\nAnd we'll do an apples to apples\ncomparison and see what happens.\n\n207\n00:11:02.920 --> 00:11:05.240\nAll right, but let's get back to\nthe server cuz that's the fun part.\n\n208\n00:11:05.240 --> 00:11:09.530\nSo on the server, the first thing I\nneed to do is I need to get that script.\n\n209\n00:11:09.530 --> 00:11:12.727\nSo I'm gonna download that\nscript right out of GitHub.\n\n210\n00:11:12.727 --> 00:11:14.200\nAnd you can do it via web browser.\n\n211\n00:11:14.200 --> 00:11:17.670\nBut if you're on a server with no\nGUI that's gonna be a little hard.\n\n212\n00:11:17.670 --> 00:11:21.260\nSo I'm gonna use wget to just\ndownload it right from GitHub.\n\n213\n00:11:21.260 --> 00:11:25.660\nSo I'm gonna pull that down and\nI need to point it at the raw file itself.\n\n214\n00:11:25.660 --> 00:11:35.219\nSo I'm gonna do\nraw.githubusercontent.com/jodrell/unbound-\n\n215\n00:11:35.219 --> 00:11:37.886\n-block-hosts and\n\n216\n00:11:37.886 --> 00:11:43.919\nthen /master/unbound-block-hosts.\n\n217\n00:11:43.919 --> 00:11:48.450\nAll right, that's gonna reach out to his\nproject and download his file, right?\n\n218\n00:11:48.450 --> 00:11:52.020\nAnd if you take a look at it,\nI've got that file sitting right here.\n\n219\n00:11:52.020 --> 00:11:56.580\nAnd if we kind of look through it,\nyou'll see it's a script.\n\n220\n00:11:56.580 --> 00:12:00.600\nAnd what it does, is it reaches\nright out to Dan's website to go and\n\n221\n00:12:00.600 --> 00:12:01.710\ndownload that file.\n\n222\n00:12:01.710 --> 00:12:05.357\nSo it's going to pull it down, and\nsee how it's looking at /host, /host.\n\n223\n00:12:05.357 --> 00:12:07.517\nSo it gets the text version\nof the file and then,\n\n224\n00:12:07.517 --> 00:12:09.970\nit's gonna start doing the conversions,\nright?\n\n225\n00:12:09.970 --> 00:12:11.090\nFlipping things around.\n\n226\n00:12:11.090 --> 00:12:14.871\nNow, there's different\nsections inside of Dan's site,\n\n227\n00:12:14.871 --> 00:12:19.193\ninside of Dan's list, and so\nyou can choose to turn them on and off.\n\n228\n00:12:19.193 --> 00:12:21.348\nMaybe you don't want to block ads.\n\n229\n00:12:21.348 --> 00:12:23.240\nYou just want to block malware and\nspyware.\n\n230\n00:12:23.240 --> 00:12:26.602\nSo you can do that by turning\nthese options to one, and\n\n231\n00:12:26.602 --> 00:12:30.360\nthen turning all these other\nones to zero or deleting them.\n\n232\n00:12:30.360 --> 00:12:32.380\nAnd then that'll stop them from updating.\n\n233\n00:12:32.380 --> 00:12:34.440\nAnd so you can come through and do that.\n\n234\n00:12:34.440 --> 00:12:38.920\nHis script has them all turned on,\nwith the exception of shock-sites, and\n\n235\n00:12:38.920 --> 00:12:42.210\nmaybe spy, these are ones that\nhaven't been confirmed to be spyware.\n\n236\n00:12:42.210 --> 00:12:45.354\nAnd shock-sites are ones\nthat are just tasteless,\n\n237\n00:12:45.354 --> 00:12:50.006\nnot ads or malware, but just ones that\nsensible people would normally go to.\n\n238\n00:12:50.006 --> 00:12:51.921\nSo you can certainly tweak that entailer,\nbut\n\n239\n00:12:51.921 --> 00:12:53.990\nyou can see the whole script right there.\n\n240\n00:12:53.990 --> 00:12:58.420\nAll it's doing is reaching out,\ndownloading the file, and\n\n241\n00:12:58.420 --> 00:13:00.950\nchanging it into the order that we want.\n\n242\n00:13:00.950 --> 00:13:03.800\nAnd so when you run it, you don't even\nreally have to provide any options.\n\n243\n00:13:03.800 --> 00:13:05.650\nYou do need to be an administrator\nto run it though,\n\n244\n00:13:05.650 --> 00:13:11.730\nbecause it's going to create this file and\nit's gonna store it in /etc/unbound.\n\n245\n00:13:11.730 --> 00:13:14.462\nAnd a regular user can't\nwrite to /etc/unbound.\n\n246\n00:13:14.462 --> 00:13:19.230\nIf you're gonna run it as a regular user,\nyou'll need to override the output file.\n\n247\n00:13:19.230 --> 00:13:20.280\nWhich you can do,\n\n248\n00:13:20.280 --> 00:13:24.421\nit's got command line syntax where\nyou can override the output file.\n\n249\n00:13:24.421 --> 00:13:25.466\nAll right so I've got it,\n\n250\n00:13:25.466 --> 00:13:28.610\nit doesn't have execute permissions on\nit because of the way I downloaded it.\n\n251\n00:13:28.610 --> 00:13:32.684\nSo I need to fix that real quick,\nI'm gonna do a chmod and\n\n252\n00:13:32.684 --> 00:13:34.697\nI'll change it to 755.\n\n253\n00:13:34.697 --> 00:13:38.832\nThat's gonna to give me read, write and\nexecute and then it's gonna give everybody\n\n254\n00:13:38.832 --> 00:13:42.226\nelse read and execute on it so\nthat they'll be able to run the script.\n\n255\n00:13:42.226 --> 00:13:44.250\nI say I am gonna give everyone\nelse read and execute.\n\n256\n00:13:44.250 --> 00:13:48.220\nThey still can't run it because it's\ngonna try to output to a file normally\n\n257\n00:13:48.220 --> 00:13:51.830\npeople don't have access to,\nbut as an admin I can run it.\n\n258\n00:13:51.830 --> 00:13:53.560\nAnd so I'm gonna run that script.\n\n259\n00:13:53.560 --> 00:13:56.589\nAnd in the background it's gonna reach\nout and well I say it's going to.\n\n260\n00:13:56.589 --> 00:14:00.050\nBut it's supposed to reach out and\ndownload it and get it loaded.\n\n261\n00:14:00.050 --> 00:14:03.640\nNow, I forgot something important,\nit's written in Perl and\n\n262\n00:14:03.640 --> 00:14:08.010\ndepending on how you installed Linux\nyou may or may not have Perl in place.\n\n263\n00:14:08.010 --> 00:14:08.597\nI apparently don't.\n\n264\n00:14:08.597 --> 00:14:10.870\nSo I do need to install that real quick.\n\n265\n00:14:10.870 --> 00:14:15.995\nSo let me do that, I'll do a yum install,\nthere's two libraries I need,\n\n266\n00:14:15.995 --> 00:14:22.240\nthere's perl itself, and the odds are,\nI probably do have, and then, libwww-perl.\n\n267\n00:14:22.240 --> 00:14:25.780\nThat's important, because in the PERL\nscript, it's calling web pages,\n\n268\n00:14:25.780 --> 00:14:28.800\ndoing a HTTP connection, so\nthat's why I need the libwww.\n\n269\n00:14:29.810 --> 00:14:33.542\nLet me go those installed and\noops something is holding that up.\n\n270\n00:14:33.542 --> 00:14:36.697\nSo let me kill whatever is doing that.\n\n271\n00:14:36.697 --> 00:14:38.755\nAnd then we'll try that again,\nthere we go.\n\n272\n00:14:38.755 --> 00:14:40.078\nAll right so\nwe're going to get that installed and\n\n273\n00:14:40.078 --> 00:14:41.460\nthen we'll run the script again.\n\n274\n00:14:41.460 --> 00:14:44.635\nAlways a good idea to check dependencies\non a script, which I did not.\n\n275\n00:14:44.635 --> 00:14:47.727\n[LAUGH] So all right so\nonce we get through that,\n\n276\n00:14:47.727 --> 00:14:49.960\nnow I can try and run that script.\n\n277\n00:14:51.830 --> 00:14:57.149\nAnd, all right and I'm gonna get a little\nbit of an error cuz I forgot a step.\n\n278\n00:14:57.149 --> 00:15:00.156\nSo depending on how you installed\nyour server, you may or\n\n279\n00:15:00.156 --> 00:15:02.040\nmay not have Perl installed.\n\n280\n00:15:02.040 --> 00:15:05.965\nAnd this one's telling me\nthat it can't locate LWP.pm,\n\n281\n00:15:05.965 --> 00:15:07.975\nwhich is the libwww for Perl.\n\n282\n00:15:07.975 --> 00:15:11.676\nInside of this script I'm calling\na website to be able to download the hosts\n\n283\n00:15:11.676 --> 00:15:12.449\nfile, right?\n\n284\n00:15:12.449 --> 00:15:16.940\nSo I need to be able to access an HTTP\nresource and I need libwww to do that.\n\n285\n00:15:16.940 --> 00:15:20.860\nSo I don't have it or I do have it and\nit's just not in my path.\n\n286\n00:15:20.860 --> 00:15:21.860\nThat could be the problem, too.\n\n287\n00:15:21.860 --> 00:15:26.440\nSo if you don't have it,\nyou can install it pretty easy.\n\n288\n00:15:26.440 --> 00:15:31.420\nIf we do yum install, odds are I've\ngot perl, almost every system does.\n\n289\n00:15:31.420 --> 00:15:38.260\nBut you can also do perl-libwww-perl\nto be able to get that one in there.\n\n290\n00:15:38.260 --> 00:15:42.591\nOn some systems, it is just libwww-perl.\n\n291\n00:15:42.591 --> 00:15:45.525\nSo you might have to experiment\naround a bit to find the right name.\n\n292\n00:15:45.525 --> 00:15:47.050\nBut I'm gonna go ahead and run that.\n\n293\n00:15:47.050 --> 00:15:48.311\nAnd that's gonna install\nthose two packages.\n\n294\n00:15:48.311 --> 00:15:49.911\nThere's another way to do that, also.\n\n295\n00:15:49.911 --> 00:15:55.885\nHoly moly, [LAUGH] apparently I'm\nmissing a lot of Perl instructions here.\n\n296\n00:15:55.885 --> 00:15:59.588\nSo I did have Perl installed already,\njust not all the other add-ons to it.\n\n297\n00:15:59.588 --> 00:16:02.753\nSo let me go and say yes sort that thing\naround, now the other way that I could\n\n298\n00:16:02.753 --> 00:16:05.994\nhave done it, is I could have installed\nit right from inside of perl itself.\n\n299\n00:16:05.994 --> 00:16:09.590\nperl maintains these little software\nbumbles and so you can add them there,\n\n300\n00:16:09.590 --> 00:16:13.090\nthat doesn't help you if perl wasn't\ninstalled in the first place, but\n\n301\n00:16:13.090 --> 00:16:16.732\nif it was I could have just run perl dash.\n\n302\n00:16:16.732 --> 00:16:21.770\nAnd then, MCPAN, which is gonna\nlet us add an additional module.\n\n303\n00:16:21.770 --> 00:16:26.970\nAnd we're sending a command into perl,\nand you can tell it install bundle,\n\n304\n00:16:26.970 --> 00:16:30.950\nwhich you have to spell right,\ncolon colon, LWP.\n\n305\n00:16:30.950 --> 00:16:35.410\nAnd that's gonna tell\nperl to reach out and\n\n306\n00:16:35.410 --> 00:16:38.410\nget the lib w bundles,\nand get them installed.\n\n307\n00:16:38.410 --> 00:16:40.480\nMine's gonna fail just\nbecause it's already got it.\n\n308\n00:16:40.480 --> 00:16:43.440\nOr actually it says it can't locate CPAN,\nso apparently I'm not set up for\n\n309\n00:16:43.440 --> 00:16:44.830\ncommand line access anyway.\n\n310\n00:16:44.830 --> 00:16:46.060\nSo, that's not gonna work for\n\n311\n00:16:46.060 --> 00:16:50.250\nme but either way I've installed my\nlibraries now, so I should be good.\n\n312\n00:16:50.250 --> 00:16:53.590\nIt does update the path, and bash doesn't\nupdate the path unless you log out and\n\n313\n00:16:53.590 --> 00:16:58.150\nlog back in, so\nlet me just re-authenticate real quick.\n\n314\n00:16:58.150 --> 00:17:00.950\nAnd at this point we should\nbe able to run our script.\n\n315\n00:17:02.680 --> 00:17:03.960\nAnd there we go, all right.\n\n316\n00:17:03.960 --> 00:17:05.040\nSo instead of an immediate error,\n\n317\n00:17:05.040 --> 00:17:08.420\nwhich is what I was getting,\nnow it's reaching out or it should be.\n\n318\n00:17:08.420 --> 00:17:13.280\nReaching out to Dan Pollack's website,\ngrabbing the hosts file, and then Gavin's\n\n319\n00:17:13.280 --> 00:17:19.370\nscript is gonna take it and rearrange\nit to match what unbound is expecting.\n\n320\n00:17:19.370 --> 00:17:24.848\nAnd when it's done it should\nhave written it to /etc/unbound.\n\n321\n00:17:24.848 --> 00:17:26.170\nAnd if I look in there.\n\n322\n00:17:26.170 --> 00:17:30.310\nWhat I'm looking for\nis local-blocking-data.com.\n\n323\n00:17:30.310 --> 00:17:32.500\nThat's the file that it made, okay?\n\n324\n00:17:32.500 --> 00:17:34.310\nNow, it's not activated by default.\n\n325\n00:17:34.310 --> 00:17:35.150\nIt just makes the file.\n\n326\n00:17:35.150 --> 00:17:36.730\nAnd that way, we can check it.\n\n327\n00:17:36.730 --> 00:17:38.820\nMake sure it's okay before we activate it.\n\n328\n00:17:38.820 --> 00:17:40.780\nAnd if I take a look at that file.\n\n329\n00:17:43.690 --> 00:17:50.610\nAnd pull it up, what we should see is\nthat it's the exact data from Dan's list\n\n330\n00:17:50.610 --> 00:17:54.860\nwith the sections turned on or off that we\nchose to enable, but in the right format.\n\n331\n00:17:54.860 --> 00:17:58.470\nSo it says local data colon and\nthen a quote.\n\n332\n00:17:58.470 --> 00:18:03.590\nAnd then the host name, they skip the IN,\ncuz it assumes IN by default.\n\n333\n00:18:03.590 --> 00:18:08.190\nAnd then an A for an A record and then\nthe IP address or AAAA for an IPv6 entry.\n\n334\n00:18:08.190 --> 00:18:10.780\nAnd then ::1 for the loop back there.\n\n335\n00:18:10.780 --> 00:18:14.290\nSo each one is being blocked, and\n\n336\n00:18:14.290 --> 00:18:18.600\nI'm 0% of the way through this file\nto give you an idea of how big it is.\n\n337\n00:18:18.600 --> 00:18:23.350\nThis is a massive file,\nin fact let's do a LS -LAH.\n\n338\n00:18:23.350 --> 00:18:28.650\nAnd we can see that it is\n1.1 megs of pure text.\n\n339\n00:18:28.650 --> 00:18:32.250\nThat's a lot, that's more text than\nthe entire Encyclopedia Britannica,\n\n340\n00:18:32.250 --> 00:18:34.235\nif you were to write it out in text,\ntrue story.\n\n341\n00:18:34.235 --> 00:18:37.740\n[LAUGH] Sometimes I throw out random facts\nin there that are somewhat debatable,\n\n342\n00:18:37.740 --> 00:18:38.730\nthis one's actually true.\n\n343\n00:18:38.730 --> 00:18:41.460\nSo that's massive, it's mountains and\nmountains of data.\n\n344\n00:18:41.460 --> 00:18:43.830\nBind would not do well with that.\n\n345\n00:18:43.830 --> 00:18:46.940\nUnbound has no problem with it whatsoever,\nit'll cache all of that in RAM,\n\n346\n00:18:46.940 --> 00:18:48.067\nit was only a meg after all.\n\n347\n00:18:48.067 --> 00:18:51.039\nAnd whenever you do look ups we're\nnot overriding everyone of those.\n\n348\n00:18:51.039 --> 00:18:53.117\nWe don't need a zone for\neach one, we can overwrite it.\n\n349\n00:18:53.117 --> 00:18:58.424\nNow I keep saying now, now it's not\nhappening at home now it's not doing\n\n350\n00:18:58.424 --> 00:19:04.079\nanything I need to enable this file I need\nto include this file like we included\n\n351\n00:19:04.079 --> 00:19:09.860\nour other phone, so I'm going to edit\n/ TTC slash Unbound /unbound.conf.\n\n352\n00:19:09.860 --> 00:19:13.534\nAnd I'll just got down to\nwhere I did my last include,\n\n353\n00:19:13.534 --> 00:19:15.982\nwhere we added in the IT Pro TV zone,\n\n354\n00:19:15.982 --> 00:19:21.860\ndown here towards the bottom somewhere\nif I remember right, apparently not.\n\n355\n00:19:21.860 --> 00:19:24.880\nSo here's some stub and forward zones,\nwhich I don't really wanna mess with.\n\n356\n00:19:24.880 --> 00:19:28.570\nI was trying to find where I did,\nI like to keep mine all together.\n\n357\n00:19:28.570 --> 00:19:33.929\nThere it is, that was I only have to go\none place for where I've overriding hosts.\n\n358\n00:19:33.929 --> 00:19:37.091\nAnd so I'm gonna do an\n\n359\n00:19:37.091 --> 00:19:45.874\ninclude/etc/unbound/local-blocking-data.c-\nonf.\n\n360\n00:19:45.874 --> 00:19:51.060\nRight, that's going to incorporate\nthat block file and to unbound.\n\n361\n00:19:52.280 --> 00:19:55.460\nNow I do need to be a little careful\nbecause unbound is only gonna load that\n\n362\n00:19:55.460 --> 00:19:56.780\nfile when it starts.\n\n363\n00:19:56.780 --> 00:19:59.110\nSo it's not actually working yet.\n\n364\n00:19:59.110 --> 00:20:05.392\nI need to do a systemctl\nrestart unbound.service.\n\n365\n00:20:05.392 --> 00:20:09.780\nAnd now it's gonna load\nthat zone in the memory.\n\n366\n00:20:09.780 --> 00:20:11.820\nAnd now it's blocking or\nit should be blocking.\n\n367\n00:20:11.820 --> 00:20:15.270\n&gt;&gt; Don we had a good question come in from\nthe chat room, it says, once you load this\n\n368\n00:20:15.270 --> 00:20:20.170\nfile up in ram you know it's not that big,\nwell, it's one meg it's a lot of text.\n\n369\n00:20:20.170 --> 00:20:22.370\nHow does it affect\nperformance of the server?\n\n370\n00:20:22.370 --> 00:20:25.080\n&gt;&gt; Well you lost a meg of ram so\nthere's that, right?\n\n371\n00:20:25.080 --> 00:20:27.990\nBut hopefully you've got\nat least a gig of ram so\n\n372\n00:20:27.990 --> 00:20:30.590\nit shouldn't be a big deal,\nthat's a drop in the bucket.\n\n373\n00:20:30.590 --> 00:20:34.960\nUnbound is designed to do a hierarchical\nlook up against the DNS cache and\n\n374\n00:20:34.960 --> 00:20:39.900\nRAM and so the way that it works\nactually doesn't really get affected\n\n375\n00:20:39.900 --> 00:20:43.110\nby the amount of records of the past\nbecause it is Facebook building a fake\n\n376\n00:20:43.110 --> 00:20:46.240\nRoots over inside of itself and\nsaying okay you're looking for a,\n\n377\n00:20:46.240 --> 00:20:51.130\njust let me go to the country and\nthat you're looking for Microsoft and\n\n378\n00:20:51.130 --> 00:20:53.470\nso let me go to the ends and\nlook up inside of those.\n\n379\n00:20:53.470 --> 00:20:57.130\nAnd so it happens very quickly, and\nit's doing those kind of look ups already\n\n380\n00:20:57.130 --> 00:20:59.940\nanyway, to see if it's got\nan override in the first place.\n\n381\n00:20:59.940 --> 00:21:02.710\nHere the difference is, it finds the\noverride and gives us a number versus not\n\n382\n00:21:02.710 --> 00:21:06.230\nfinding the override and then forwarding,\nto the forwarding server, after that.\n\n383\n00:21:06.230 --> 00:21:09.960\nSo, you'll find that it typically\ndoesn't effect performance much at all,\n\n384\n00:21:09.960 --> 00:21:12.560\naside from the little RAM loss,\nthe rest of it's pretty much the same.\n\n385\n00:21:14.160 --> 00:21:16.900\nOkay so once that's in place\nhow do we know if it's working?\n\n386\n00:21:16.900 --> 00:21:20.000\nWell let's take my laptop,\nmy laptops gonna be the guinea pig.\n\n387\n00:21:20.000 --> 00:21:26.260\nI'm gonna go into my system preferences\nand Im gonna go into my network adapter.\n\n388\n00:21:26.260 --> 00:21:32.240\nAnd right now I'm set to use DNS Server\n8.8.8.8, which is Google, right?\n\n389\n00:21:32.240 --> 00:21:39.990\nAnd I'm gonna fire up Chrome and\nI'm gonna pull out the latest copy of CNN.\n\n390\n00:21:39.990 --> 00:21:42.466\nRight?\nSo, this is gonna be cnn.com.\n\n391\n00:21:44.510 --> 00:21:46.700\nAnd I'll just kinda park\nthat over here on the side.\n\n392\n00:21:46.700 --> 00:21:49.050\nApparently, the Russians\naren't our friends anymore.\n\n393\n00:21:49.050 --> 00:21:50.250\nNot quite sure how that happened.\n\n394\n00:21:50.250 --> 00:21:52.230\nBut I did and so now we've got it.\n\n395\n00:21:52.230 --> 00:21:54.100\nAnd we've got our little advertisements,\nright?\n\n396\n00:21:54.100 --> 00:21:57.880\nSo, I'm gonna hold that to the side, and\nnow that's loaded I'm gonna go back into\n\n397\n00:21:57.880 --> 00:22:02.000\nmy preferences and\nI'm gonna change my DNS servers, okay?\n\n398\n00:22:02.000 --> 00:22:04.700\nSo I'm just gonna yank Google's out and\n\n399\n00:22:04.700 --> 00:22:08.350\nI'm gonna add in my server 10.0.222.103,\nokay.\n\n400\n00:22:08.350 --> 00:22:12.229\nAnd not sure why I have all\nthese search domains over here,\n\n401\n00:22:12.229 --> 00:22:14.458\nlet me just get those outta here.\n\n402\n00:22:16.699 --> 00:22:18.470\nAll right, and I will apply that.\n\n403\n00:22:18.470 --> 00:22:21.500\nSo now I've got an all new DNS server,\nall right?\n\n404\n00:22:21.500 --> 00:22:24.423\nSo now that I've got the new\nDNS server fired up,\n\n405\n00:22:24.423 --> 00:22:26.428\nI can fire up another copy of CNN.\n\n406\n00:22:28.344 --> 00:22:32.060\nAnd this time I'm doing my DNS\nlookups through my new name server.\n\n407\n00:22:32.060 --> 00:22:35.100\nAnd I'm gonna take this, I'm gonna\npark it over here on the other side.\n\n408\n00:22:35.100 --> 00:22:37.850\nAnd shoot, Chrome's gonna get me.\n\n409\n00:22:37.850 --> 00:22:40.530\nChrome does this caching and\n\n410\n00:22:40.530 --> 00:22:45.680\nwhen it caches it will actually skip your\nDNS server, and so some of my ads loaded.\n\n411\n00:22:45.680 --> 00:22:46.610\nNot all of them.\n\n412\n00:22:46.610 --> 00:22:47.680\nNotice this one broke.\n\n413\n00:22:47.680 --> 00:22:48.850\nAnd here's an advertisement.\n\n414\n00:22:48.850 --> 00:22:49.610\nThat one broke.\n\n415\n00:22:49.610 --> 00:22:51.430\nBut it cached the Teltz ad,\n\n416\n00:22:51.430 --> 00:22:55.230\nor potentially the Teltz ad is being\nserved from the CNN servers or whatever.\n\n417\n00:22:55.230 --> 00:22:58.290\nLet's see how the rest of this panned out.\n\n418\n00:22:58.290 --> 00:23:01.490\nLet's see if we got that giant ad block,\nthat's the one that I really care about.\n\n419\n00:23:01.490 --> 00:23:02.660\nYeah, I got the giant ad block, all right.\n\n420\n00:23:02.660 --> 00:23:07.420\nLet me switch browsers,\ncuz I need to keep this one open so\n\n421\n00:23:07.420 --> 00:23:09.480\nthat we have something to reference.\n\n422\n00:23:09.480 --> 00:23:11.745\nAnd then I’ll use Safari for my next one,\n\n423\n00:23:11.745 --> 00:23:14.482\nsince Safari doesn’t share\na cache with Chrome.\n\n424\n00:23:16.363 --> 00:23:20.051\nAll that matters is that I’m using a\ndifferent browser, I’ll go to cnn.com and\n\n425\n00:23:20.051 --> 00:23:22.655\nnow my lookups are gonna bounce\nto that other server, and\n\n426\n00:23:22.655 --> 00:23:26.075\nlooks like they wanna send me\nnotifications, I'll pass on that.\n\n427\n00:23:26.075 --> 00:23:30.275\nOkay, now I've got an apples to apples\ncomparison between the two though\n\n428\n00:23:30.275 --> 00:23:31.443\nthat I can look at.\n\n429\n00:23:31.443 --> 00:23:32.955\nAnd my head's gonna cover up part of this,\nso\n\n430\n00:23:32.955 --> 00:23:35.185\nlet's go full screen on this one so\nwe can see.\n\n431\n00:23:35.185 --> 00:23:39.725\nRight off the bat, you'll notice that\nTeltz advertisement is gone, right.\n\n432\n00:23:39.725 --> 00:23:42.029\nEven CNN's own advertisement for\n\n433\n00:23:42.029 --> 00:23:46.398\na total lack of information in\nthe Jon Bonet Ramsey case that never\n\n434\n00:23:46.398 --> 00:23:50.779\nstops reporting on it shows up in\nChrome but it's gone in Safari.\n\n435\n00:23:50.779 --> 00:23:54.776\nAnd as I keep looking down, you'll notice\nmore and more omissions like that.\n\n436\n00:23:54.776 --> 00:23:58.074\nThings that are gone that aren't there.\n\n437\n00:23:58.074 --> 00:24:00.485\nI do have that paid partner\ncontent showing up.\n\n438\n00:24:00.485 --> 00:24:03.120\nBut the advertisement that\nwas there is now missing.\n\n439\n00:24:03.120 --> 00:24:07.130\nAnd as I keep scrolling down\nwe'll find more and more stuff.\n\n440\n00:24:07.130 --> 00:24:10.290\nMost of this is legitimate news junk.\n\n441\n00:24:10.290 --> 00:24:14.731\nAnd what we expect, but sometimes\nthere's ads intermixed with the things.\n\n442\n00:24:14.731 --> 00:24:17.969\nAnd then when we start getting down\na little further this big paid partner\n\n443\n00:24:17.969 --> 00:24:18.724\ncontent block.\n\n444\n00:24:18.724 --> 00:24:20.481\nWell that one's still turning up isn't it.\n\n445\n00:24:20.481 --> 00:24:22.120\nI was hoping that would get blocked.\n\n446\n00:24:22.120 --> 00:24:25.310\nBut well, that's one big paid\nadvertisement right there.\n\n447\n00:24:25.310 --> 00:24:27.975\nIf they're serving it up from their own\ndomain name there's not much that you\n\n448\n00:24:27.975 --> 00:24:28.550\ncan do about it.\n\n449\n00:24:28.550 --> 00:24:30.530\nBut the rest of it is\npretty straight forward.\n\n450\n00:24:30.530 --> 00:24:34.510\nIt's gonna catch it and block it and get\nit out of there, so I know it's working.\n\n451\n00:24:34.510 --> 00:24:35.910\nNow advertising is one thing.\n\n452\n00:24:35.910 --> 00:24:38.120\nAds don't normally cause you much trouble.\n\n453\n00:24:38.120 --> 00:24:40.970\nIt's the malware and the spyware,\n\n454\n00:24:40.970 --> 00:24:44.340\nthose things, that we care about and\nthis list is now applying it all.\n\n455\n00:24:44.340 --> 00:24:46.730\nWhen I rendered the page it rendered\nin the same amount of time.\n\n456\n00:24:46.730 --> 00:24:49.520\nIt probably rendered faster cuz I\nwas reaching out to less servers.\n\n457\n00:24:49.520 --> 00:24:52.650\nIf I were to do a netstat-an or something\nlike that to see everybody that I built\n\n458\n00:24:52.650 --> 00:24:58.000\na connection to Chrome would have built\n100 connections to generate this page.\n\n459\n00:24:58.000 --> 00:25:02.230\nVersus Safari probably would've generated\nten or 12 because everything was coming\n\n460\n00:25:02.230 --> 00:25:05.320\nfrom CNN servers and not from all\nthese blocked ads that usually pop up.\n\n461\n00:25:05.320 --> 00:25:09.170\nSo does make a big difference between\nthe two, but now I can see it's working.\n\n462\n00:25:09.170 --> 00:25:11.040\nYour end user,\nthey don't see any difference.\n\n463\n00:25:11.040 --> 00:25:13.840\nThey're just going to your\nunbound server like normal and\n\n464\n00:25:13.840 --> 00:25:16.720\ngetting a much cleaner web\nexperience as a result.\n\n465\n00:25:16.720 --> 00:25:19.520\n&gt;&gt; And that's a lot easier than\nmodifying a thousand host files, man.\n\n466\n00:25:19.520 --> 00:25:21.350\nI'm glad I took your advice.\n\n467\n00:25:21.350 --> 00:25:23.610\nIf I'm an hourly employee,\nI guess it doesn't really matter.\n\n468\n00:25:23.610 --> 00:25:26.000\nBut, it does look like we're coming\nto the end of another episode.\n\n469\n00:25:26.000 --> 00:25:26.720\nBut, before we do Don,\n\n470\n00:25:26.720 --> 00:25:29.830\ndo you have any additional words\nyou'd like to put in this episode?\n\n471\n00:25:29.830 --> 00:25:32.120\n&gt;&gt; Yeah, there's other ways to test too.\n\n472\n00:25:32.120 --> 00:25:36.507\nIf you don't want to bring up\nsomebody like CNN or a naughty site.\n\n473\n00:25:36.507 --> 00:25:37.751\nYou don't want to bring one of those up,\n\n474\n00:25:37.751 --> 00:25:40.600\ncuz if it doesn't work then you got stuff\non your computer you don't want there.\n\n475\n00:25:40.600 --> 00:25:42.100\nSo, there are other places.\n\n476\n00:25:42.100 --> 00:25:45.630\nThere's a ads blocker website that\nactually has a little test you can run.\n\n477\n00:25:45.630 --> 00:25:47.330\nLet me show you guys that real quick.\n\n478\n00:25:47.330 --> 00:25:52.587\nIf I just browse to\nads-blocker.com/testing.\n\n479\n00:25:52.587 --> 00:25:57.970\nSo, that's ads-blocker.com/testing.\n\n480\n00:25:57.970 --> 00:26:01.202\nThey've got a little page that will\nrender and show you whether or\n\n481\n00:26:01.202 --> 00:26:02.748\nnot your blocking is working.\n\n482\n00:26:02.748 --> 00:26:06.123\nAnd so, what you should see\nis this empty yellow block\n\n483\n00:26:06.123 --> 00:26:09.285\nhere where you'd normally\nhave Google AdSense.\n\n484\n00:26:09.285 --> 00:26:12.081\nOr some of these other things\nthat wouldn't render and\n\n485\n00:26:12.081 --> 00:26:15.030\nyou should get a fairly\nclean page that comes up.\n\n486\n00:26:15.030 --> 00:26:17.706\nIf you weren't blocking you'd actually\nsee some ads they've injected in\n\n487\n00:26:17.706 --> 00:26:18.566\nhere that would pop up.\n\n488\n00:26:18.566 --> 00:26:22.992\nSo you can always use their site if you\nwant as opposed to using some commercial\n\n489\n00:26:22.992 --> 00:26:24.979\nor actually malicious websites.\n\n490\n00:26:24.979 --> 00:26:26.842\n&gt;&gt; Well Don,\nthat's a great place to wrap this one up.\n\n491\n00:26:26.842 --> 00:26:28.580\nThank you for joining us in the studios.\n\n492\n00:26:28.580 --> 00:26:30.480\nAnd we appreciate you the viewer watching.\n\n493\n00:26:30.480 --> 00:26:31.750\nSigning out for IT Pro TV.\n\n494\n00:26:31.750 --> 00:26:33.510\nI've been your host, Wes Bryan.\n\n495\n00:26:33.510 --> 00:26:34.044\n&gt;&gt; And I'm Don Pezet.\n\n496\n00:26:34.044 --> 00:26:36.951\n&gt;&gt; And we'll see you next time.\n\n497\n00:26:36.951 --> 00:26:42.893\n[MUSIC]\n\n498\n00:26:42.893 --> 00:26:45.520\n&gt;&gt; Thank you for watching IT Pro TV.\n\n",
          "vimeoId": "196617764"
        },
        {
          "description": "In this episode, Wes and Don show the viewers how to take advantage of the benefits of bringing Unbound into combination with BIND. They demonstrate how to set up Unbound to receive and forward DNS queries to a BIND server as well as combine both Unbound and BIND on a single server.",
          "length": "1324",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-9-4-using_unbound_with_bind-121216-1.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-9-4-using_unbound_with_bind-121216-1-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-9-4-using_unbound_with_bind-121216-1-sm.jpg",
          "title": "Using Unbound with BIND",
          "transcript": "WEBVTT\n\n1\n00:00:00.008 --> 00:00:01.170\nWelcome to ITPro.TV.\n\n2\n00:00:01.170 --> 00:00:02.385\nI'm your host, Don.\n\n3\n00:00:02.385 --> 00:00:06.474\n[CROSSTALK]\n\n4\n00:00:06.474 --> 00:00:08.621\n[MUSIC]\n\n5\n00:00:08.621 --> 00:00:10.529\n&gt;&gt; You're watching ITPro.TV.\n\n6\n00:00:10.529 --> 00:00:14.472\n&gt;&gt; Welcome to another exciting\nepisode here at ITProTV.\n\n7\n00:00:14.472 --> 00:00:16.705\nI'm your host, Wes Bryan.\n\n8\n00:00:16.705 --> 00:00:20.615\nAnd in today's episode we are moving\nthrough our series within DNS.\n\n9\n00:00:20.615 --> 00:00:22.115\nAnd joining us back in the studio's for\n\n10\n00:00:22.115 --> 00:00:24.185\nthis endeavor is none other than Mr.\nDon Pezet.\n\n11\n00:00:24.185 --> 00:00:25.205\nDon, how are you doing, sir?\n\n12\n00:00:25.205 --> 00:00:26.105\n&gt;&gt; I'm doing swell, Wes.\n\n13\n00:00:26.105 --> 00:00:27.315\nThanks for having me back on the show,\n\n14\n00:00:27.315 --> 00:00:31.485\nand we're ready to dive back into the\nworld of, well, just DNS in general today.\n\n15\n00:00:31.485 --> 00:00:34.325\nCuz we're not gonna just hold ourselves to\nunbound, we're gonna take a look at a few\n\n16\n00:00:34.325 --> 00:00:37.300\ndifferent pieces of this puzzle and\nhave some real fun.\n\n17\n00:00:37.300 --> 00:00:39.954\nNow, if you've been watching\nall of our episodes in order,\n\n18\n00:00:39.954 --> 00:00:43.646\nyou've heard me say various things about\nbind, and various things about unbound,\n\n19\n00:00:43.646 --> 00:00:46.740\nthe Microsoft DNS, and\nall the other ones that are out there.\n\n20\n00:00:46.740 --> 00:00:51.020\nAnd each one seems to be strong in\ncertain areas and weak in other areas.\n\n21\n00:00:51.020 --> 00:00:54.730\nAnd so what I wanna talk about\nin this episode is taking\n\n22\n00:00:54.730 --> 00:00:59.700\nmore than one DNS product and\ncombining them, wonder twin powers unite,\n\n23\n00:00:59.700 --> 00:01:03.610\nand creating the ultimate\nDNS infrastructure, right?\n\n24\n00:01:03.610 --> 00:01:09.720\nThe most common scenario of this uses\nunbound in conjunction with bind.\n\n25\n00:01:09.720 --> 00:01:12.830\nNow, I talked about bind back\nin the bind episodes, and\n\n26\n00:01:12.830 --> 00:01:15.010\nhow it did great as\nan authoritative name server.\n\n27\n00:01:15.010 --> 00:01:16.730\nIt can host as many zones as you wanted.\n\n28\n00:01:16.730 --> 00:01:18.810\nYou can put all these different\nzone records in there.\n\n29\n00:01:18.810 --> 00:01:19.630\nIt did a great job.\n\n30\n00:01:19.630 --> 00:01:24.015\nBind was the reference DNS server\nthat everybody designs on.\n\n31\n00:01:24.015 --> 00:01:24.750\nIt does a great job.\n\n32\n00:01:25.940 --> 00:01:30.860\nBut I also said that it's ancient,\nand it's a little on the slow side,\n\n33\n00:01:30.860 --> 00:01:32.550\nit doesn't cache very well.\n\n34\n00:01:32.550 --> 00:01:35.858\nAnd if the caching database grows too big,\nit crashes, right?\n\n35\n00:01:35.858 --> 00:01:37.120\nThat's what bind does.\n\n36\n00:01:37.120 --> 00:01:38.325\nSo, almost like it does it on purpose.\n\n37\n00:01:38.325 --> 00:01:41.080\nThen we talked about unbound.\n\n38\n00:01:41.080 --> 00:01:47.090\nAnd I said how unbound did\ngreat at verifying domains and\n\n39\n00:01:47.090 --> 00:01:49.230\ndoing look ups, and cacheing.\n\n40\n00:01:49.230 --> 00:01:51.610\nThat it could have caches\nthat were massive in size.\n\n41\n00:01:51.610 --> 00:01:56.630\nAnd it could look up at them very fast,\nand very quick and do a great job of it.\n\n42\n00:01:56.630 --> 00:01:58.420\nIt just does an amazing job.\n\n43\n00:01:59.420 --> 00:02:04.410\nBut on the zone side of things,\nUnbound is pretty weak.\n\n44\n00:02:04.410 --> 00:02:07.120\nSimple records like a C\nname break unbound.\n\n45\n00:02:07.120 --> 00:02:09.060\nUnbound doesn't know hey,\nwhen somebody asks for\n\n46\n00:02:09.060 --> 00:02:10.570\na C name don't just give them the name.\n\n47\n00:02:10.570 --> 00:02:13.790\nGo and resolve the actual\nIP name that it points to.\n\n48\n00:02:13.790 --> 00:02:15.000\nUnbound doesn't do that.\n\n49\n00:02:15.000 --> 00:02:17.070\nSo unbound is worthless for C names.\n\n50\n00:02:17.070 --> 00:02:20.920\nSo I can sort of put zones into unbound,\nbut it just doesn't do a great job.\n\n51\n00:02:21.930 --> 00:02:24.370\nGreat at cacheing, bad at zones.\n\n52\n00:02:24.370 --> 00:02:27.770\nBind, great at zones, bad at cacheing.\n\n53\n00:02:27.770 --> 00:02:31.510\nWouldn't it be nice if we could put the\nchocolate and the peanut butter together\n\n54\n00:02:31.510 --> 00:02:36.840\nand get unbound handling my cache and\nbind handling my DNS?\n\n55\n00:02:36.840 --> 00:02:38.840\nNow I'd have the best of both worlds.\n\n56\n00:02:38.840 --> 00:02:40.730\nAnd you can absolutely do that.\n\n57\n00:02:40.730 --> 00:02:44.170\nYou can do it, it's actually not even that\nhard to do it to get it put in place.\n\n58\n00:02:44.170 --> 00:02:47.760\nAnd that's the most common deployment\nscenario when somebody's out there running\n\n59\n00:02:47.760 --> 00:02:51.200\nUnbound, is that they'll deploy one or\n\n60\n00:02:51.200 --> 00:02:56.500\nmore unbound servers, and then maybe\njust one bind or two bind servers.\n\n61\n00:02:56.500 --> 00:02:58.915\nTwo bind systems for redundancy.\n\n62\n00:02:58.915 --> 00:03:01.873\nThey'll store their zones\non the bind servers and\n\n63\n00:03:01.873 --> 00:03:05.900\nall their clients will be configured\nto look at the Unbound severs.\n\n64\n00:03:06.980 --> 00:03:09.740\nNow by doing that,\nthe clients go to unbound.\n\n65\n00:03:09.740 --> 00:03:12.810\nUnbound looks up against the Internet and\ndoes all the cacheing.\n\n66\n00:03:12.810 --> 00:03:16.740\nBut we need to teach unbound hey,\nwhen you're asking about a zone,\n\n67\n00:03:16.740 --> 00:03:20.650\ndon't look in your own data, look over\nhere, look at this other server over on\n\n68\n00:03:20.650 --> 00:03:23.790\nthe other side and reach out to them and\nget the information from there.\n\n69\n00:03:23.790 --> 00:03:28.960\nAnd we can do that, we can use forwarders\nand stub zones inside of unbound\n\n70\n00:03:28.960 --> 00:03:32.440\nto point to other DNS servers out there,\nand it works really, really well.\n\n71\n00:03:32.440 --> 00:03:34.580\nNow when I thought about this\nepisode originally, I thought hey,\n\n72\n00:03:34.580 --> 00:03:38.010\nwhy don't I go ahead and\nbring up a bind server and do all that.\n\n73\n00:03:38.010 --> 00:03:41.740\nBut we've kind of all ready done that in\nother shows, so I'm just gonna recycle.\n\n74\n00:03:41.740 --> 00:03:43.570\nI'm being very environmental today.\n\n75\n00:03:43.570 --> 00:03:46.930\nAnd I'm gonna recycle a BIND server\nthat I've all ready got laying around.\n\n76\n00:03:46.930 --> 00:03:48.310\nSo here's DNS 1.\n\n77\n00:03:48.310 --> 00:03:51.730\nIf you go back and watch the installing\nBIND episode and the configuring and\n\n78\n00:03:51.730 --> 00:03:55.790\ncreating zones episode for BIND,\nthis is the server that I set up in there.\n\n79\n00:03:55.790 --> 00:04:00.730\nAnd when I set it up I configured it\nas a DNS server and I gave it one zone.\n\n80\n00:04:01.980 --> 00:04:06.750\nAnd that zone is lab.itpro.tv.dns.\n\n81\n00:04:06.750 --> 00:04:09.020\nSo that's the zone that it's carrying, and\n\n82\n00:04:09.020 --> 00:04:13.150\nif I look at that zone file,\nit's just got zone records, right?\n\n83\n00:04:13.150 --> 00:04:15.970\nZone records including\nthings like a CNAME,\n\n84\n00:04:15.970 --> 00:04:19.730\nwhich we know don't work very\nwell inside of unbound, right?\n\n85\n00:04:19.730 --> 00:04:22.191\nSo it's set up, it's got the zone,\nit's got everything that we want.\n\n86\n00:04:22.191 --> 00:04:27.280\nWell, later on I created\nan unbound server.\n\n87\n00:04:27.280 --> 00:04:28.450\nThis guy right here.\n\n88\n00:04:28.450 --> 00:04:31.630\nAnd this server's up and\nit's running unbound, so that's good.\n\n89\n00:04:31.630 --> 00:04:35.920\nAnd I couldn't create a zone on it\ncuz unbound doesn't have zones.\n\n90\n00:04:35.920 --> 00:04:37.980\nSo instead, on this one,\n\n91\n00:04:37.980 --> 00:04:42.930\nI included a file that had a series\nof host names defined in it.\n\n92\n00:04:42.930 --> 00:04:46.620\nAnd so if I look inside of /etc/unbound,\n\n93\n00:04:46.620 --> 00:04:52.230\nwe'll find that file that I made,\nlab.itpro.tv.dns.\n\n94\n00:04:52.230 --> 00:04:53.998\nAnd if we look at that file,\n\n95\n00:04:53.998 --> 00:04:58.060\nyou'll see where I used the local\ndata commands to map these, right?\n\n96\n00:04:58.060 --> 00:05:02.430\nNot actually creating a zone,\nbut kind of faking it, right?\n\n97\n00:05:02.430 --> 00:05:04.224\nI dont have a start of authority.\n\n98\n00:05:04.224 --> 00:05:05.980\nI don't have name server records.\n\n99\n00:05:05.980 --> 00:05:07.790\nI just have A records, right?\n\n100\n00:05:07.790 --> 00:05:09.780\nAnd I didn't even bother with a CNAME for\n\n101\n00:05:09.780 --> 00:05:12.270\nwww because I knew it wouldn't work,\nright?\n\n102\n00:05:12.270 --> 00:05:15.120\nAnd if it's not gonna work, then why even\nbother having it in the first place?\n\n103\n00:05:15.120 --> 00:05:17.520\nIf we wanna see that,\nhere let me edit that file.\n\n104\n00:05:19.150 --> 00:05:22.750\nAnd I'm gonna add in that CNAME in here.\n\n105\n00:05:22.750 --> 00:05:24.559\nSo I'll say like local-data.\n\n106\n00:05:26.490 --> 00:05:30.048\nAnd then I'll map www.lab.tpro.tv.\n\n107\n00:05:30.048 --> 00:05:35.141\nAnd it would be an Internet\nclass CNAME pointing\n\n108\n00:05:35.141 --> 00:05:39.355\nto webserver01.lab.itpro.tv.\n\n109\n00:05:39.355 --> 00:05:42.350\nI got a little word wrap\naction going on there.\n\n110\n00:05:42.350 --> 00:05:44.670\nBut otherwise,\nI can put that CNAME in there.\n\n111\n00:05:44.670 --> 00:05:46.820\nThat'll work,\nit'll let me put it in there.\n\n112\n00:05:48.230 --> 00:05:49.932\nBut it doesn't work, right?\n\n113\n00:05:49.932 --> 00:05:54.260\nCNAME exists, but the client is gonna\nbe responsible to doing two lookups,\n\n114\n00:05:54.260 --> 00:05:55.520\nwhich unbound is gonna fail to do.\n\n115\n00:05:55.520 --> 00:05:57.140\nWe talked about that in another episode.\n\n116\n00:05:57.140 --> 00:06:00.170\nSo, now that I've got it though,\nunbound is kind of answering for\n\n117\n00:06:00.170 --> 00:06:05.410\nthat zone, but it certainly would\nbe better if we let BIND do it.\n\n118\n00:06:05.410 --> 00:06:09.210\nAnd so, I can go into unbound and change\nit, and say, look, when somebody does\n\n119\n00:06:09.210 --> 00:06:14.130\na query for lab.itpro.tv,\ndon't try and resolve it locally.\n\n120\n00:06:14.130 --> 00:06:16.500\nInstead, reach over to\nthis other DNS server.\n\n121\n00:06:16.500 --> 00:06:18.780\nNow, I know what you're thinking.\n\n122\n00:06:18.780 --> 00:06:22.860\nIf BIND is slow and\ndoesn't handle giant caches and stuff, and\n\n123\n00:06:22.860 --> 00:06:26.410\nI'm forwarding over to it, why not just\nskip unbound and go right to BIND?\n\n124\n00:06:26.410 --> 00:06:27.770\nWell, here's the advantage.\n\n125\n00:06:27.770 --> 00:06:32.040\nWhen I hit the unbound server, yes, it's\ngonna have to do a recursive query and\n\n126\n00:06:32.040 --> 00:06:34.390\nlook up against the BIND server.\n\n127\n00:06:34.390 --> 00:06:36.400\nBut it's gonna cache the results.\n\n128\n00:06:36.400 --> 00:06:38.470\nAnd for everybody else coming along,\n\n129\n00:06:38.470 --> 00:06:43.350\nthey're gonna get served right of\nunbound's cache, which is fast and stable.\n\n130\n00:06:43.350 --> 00:06:45.520\nSo now I'm getting the speed and\n\n131\n00:06:45.520 --> 00:06:50.470\nstability of unbound with\nthe record flexibility of BIND.\n\n132\n00:06:50.470 --> 00:06:52.680\nI'm getting the best of both worlds,\nright?\n\n133\n00:06:52.680 --> 00:06:55.290\nAnd that's what this is all about,\npeering these up together.\n\n134\n00:06:55.290 --> 00:06:57.410\nYou can have unbound front end for\nany DNS server.\n\n135\n00:06:57.410 --> 00:07:01.130\nThe back end DNS server could be NDS,\nPower DNS, Microsoft DNS.\n\n136\n00:07:01.130 --> 00:07:02.075\nIt can be whatever you want.\n\n137\n00:07:02.075 --> 00:07:03.520\nBINDis the most common.\n\n138\n00:07:03.520 --> 00:07:06.530\nSo that's what I'm gonna do right here,\nokay?\n\n139\n00:07:06.530 --> 00:07:10.280\nNow before I set that part up,\nlet me mention one other thing.\n\n140\n00:07:10.280 --> 00:07:13.870\nI'm gonna set this up where I've got\none BIND server and one unbound server.\n\n141\n00:07:13.870 --> 00:07:15.750\nTwo physical servers.\n\n142\n00:07:15.750 --> 00:07:17.750\nAnd that's pretty common.\n\n143\n00:07:17.750 --> 00:07:22.170\nI could actually do this on the same\nmachine if I wanted, all right?\n\n144\n00:07:22.170 --> 00:07:25.020\nI'm not gonna do it here cuz\nit's not very realistic.\n\n145\n00:07:25.020 --> 00:07:27.130\nBut in your lab,\nyou might choose to do it.\n\n146\n00:07:27.130 --> 00:07:32.280\nSo just so you know, you can run BIND and\nunbound on the same system.\n\n147\n00:07:32.280 --> 00:07:36.380\nSo for example,\nthis system is running unbound.\n\n148\n00:07:36.380 --> 00:07:41.200\nI could do a yum install bind and\nbind utils, right?\n\n149\n00:07:41.200 --> 00:07:42.490\nAnd I could get in here and install it.\n\n150\n00:07:43.520 --> 00:07:48.574\nAnd if I try and start it,\nI'm gonna get an error, it's gonna fail.\n\n151\n00:07:48.574 --> 00:07:52.184\nBecause BIND is gonna try and\nconnect to port 53, and\n\n152\n00:07:52.184 --> 00:07:54.390\nunbound is already on port 53.\n\n153\n00:07:54.390 --> 00:07:55.459\nI'll have a port conflict.\n\n154\n00:07:55.459 --> 00:07:58.069\nYou can't have two different\nservices listening on the same port.\n\n155\n00:07:58.069 --> 00:08:00.788\nSo if you're gonna run\nthem in the same box,\n\n156\n00:08:00.788 --> 00:08:04.190\nit's important that you\nchange bind's port number.\n\n157\n00:08:04.190 --> 00:08:07.875\nSo, just to show you how to do that real\nquick, I know most of you aren't gonna do\n\n158\n00:08:07.875 --> 00:08:10.357\nthis from your life but just for\nthe few of you that do.\n\n159\n00:08:10.357 --> 00:08:13.005\nIf you edit/etc/named.com,\n\n160\n00:08:13.005 --> 00:08:18.400\nright at the very beginning you've\ngot that listen-on port line.\n\n161\n00:08:19.510 --> 00:08:21.638\nAnd so, I'm gonna change that line.\n\n162\n00:08:21.638 --> 00:08:23.030\nI'm gonna move it to another port.\n\n163\n00:08:23.030 --> 00:08:28.370\nAnd just what I usually end up doing\nis 53000, cuz I know it's not in use.\n\n164\n00:08:28.370 --> 00:08:29.490\nI used to use 5353 but\n\n165\n00:08:29.490 --> 00:08:33.070\nthere's actually some services\nthat run on 5353, oddly enough.\n\n166\n00:08:33.070 --> 00:08:35.079\nSo, I'll jump up to 53000.\n\n167\n00:08:35.079 --> 00:08:40.510\nAnd then I'll punch in my IP\nwhich this is 10.0.222.103.\n\n168\n00:08:40.510 --> 00:08:44.658\nLike that and don't forget IPv6\nwhich also has a port number.\n\n169\n00:08:44.658 --> 00:08:48.079\nEven though I'm not using it, it'll\nstill cause a conflict when I boot up.\n\n170\n00:08:48.079 --> 00:08:50.901\nSo I either need to disable IPv6 or\nmove it to port 2.\n\n171\n00:08:50.901 --> 00:08:52.975\nAll right, so\nnow it's on a different port.\n\n172\n00:08:52.975 --> 00:08:58.015\nBe aware that BIND on Red Hat\nis being controlled by SELinux,\n\n173\n00:08:58.015 --> 00:08:59.715\nit's got that security sub-layer.\n\n174\n00:08:59.715 --> 00:09:04.275\nAnd that's gonna stop BIND from accessing\nnon-standard ports including 53000.\n\n175\n00:09:04.275 --> 00:09:07.825\nSo if I do this,\nI do need to open it up in SELinux.\n\n176\n00:09:07.825 --> 00:09:09.065\nSo I'm gonna do an semanage.\n\n177\n00:09:10.345 --> 00:09:15.100\nAnd I'll have to do this twice cuz I've\ngotta add a port for the DNS context.\n\n178\n00:09:15.100 --> 00:09:20.680\nSo I'm gonna do a -t dns_port_t.\n\n179\n00:09:20.680 --> 00:09:21.960\nAnd then, I have to specify the port.\n\n180\n00:09:21.960 --> 00:09:25.587\nI'm gonna do tcp 53000.\n\n181\n00:09:25.587 --> 00:09:29.228\nAnd then, I'll need to run the same\nthing for udp 53000, right?\n\n182\n00:09:29.228 --> 00:09:30.960\nOtherwise, this isn't gonna work.\n\n183\n00:09:30.960 --> 00:09:32.712\nYou also have to open\nit up on the firewall,\n\n184\n00:09:32.712 --> 00:09:36.433\nunless you're doing all your lookups\nwith 127.0.0.1, which you can, right?\n\n185\n00:09:36.433 --> 00:09:38.880\nSo then, you wouldn't have to open it\nup on the firewall, that's all local.\n\n186\n00:09:38.880 --> 00:09:41.890\nBut if you're doing it on the firewall,\nyou'll need to open that too.\n\n187\n00:09:41.890 --> 00:09:43.556\nI won't go into that.\n\n188\n00:09:43.556 --> 00:09:45.440\nYou guys have seen\nfirewall configurations.\n\n189\n00:09:45.440 --> 00:09:46.550\nSo the point here though,\n\n190\n00:09:46.550 --> 00:09:50.910\nis that BIND will now be\nallowed to start on port 53000.\n\n191\n00:09:50.910 --> 00:09:54.130\nAnd it's not gonna start on port 53,\nit's running separate.\n\n192\n00:09:54.130 --> 00:09:58.800\nSo when I configure unbound to forward to\nBIND, I can tell it to use port 53000 and\n\n193\n00:09:58.800 --> 00:10:01.230\nthat'll solve that little problem, right?\n\n194\n00:10:01.230 --> 00:10:07.666\nSo easy enough to do and\nnow I should be able to do a systemctl\n\n195\n00:10:07.666 --> 00:10:14.100\nstart named.service.\n\n196\n00:10:14.100 --> 00:10:19.480\nAnd, shoot, I haven't actually\nconfigured the allowed queries yet.\n\n197\n00:10:19.480 --> 00:10:20.774\nSo it's gonna give me an error,\nit's not gonna start.\n\n198\n00:10:20.774 --> 00:10:21.464\nBut either way,\n\n199\n00:10:21.464 --> 00:10:24.533\nthe point is I wanted to show you guys\nthat you can change that port number.\n\n200\n00:10:24.533 --> 00:10:28.618\nSo that it'll be able to start and\nget up and get running and be happy,\n\n201\n00:10:28.618 --> 00:10:31.470\nwhich is what we want to\nbe able to get up and run.\n\n202\n00:10:31.470 --> 00:10:34.580\nAll right now, on the unbound side,\nit doesn't really care.\n\n203\n00:10:34.580 --> 00:10:37.100\nIf you're running on the same server,\nif you're running on a different server,\n\n204\n00:10:37.100 --> 00:10:39.090\nit doesn't matter,\nyou can point to either one.\n\n205\n00:10:39.090 --> 00:10:41.700\nWe just have to put the pointer in place.\n\n206\n00:10:41.700 --> 00:10:46.550\nBy default,\nunbound looks at its own cache first.\n\n207\n00:10:46.550 --> 00:10:49.830\nAnd if it doesn't find a result in the\ndatabase, then it goes to its forwarders.\n\n208\n00:10:49.830 --> 00:10:53.375\nIt looks out to root hint servers if you\nhaven't configured any forwarders or\n\n209\n00:10:53.375 --> 00:10:54.912\nthe service that you forward to.\n\n210\n00:10:54.912 --> 00:10:56.420\nI'm gonna configure a forwarder.\n\n211\n00:10:56.420 --> 00:10:59.570\nA forwarder for\nlab.itpro.tv that says, hey,\n\n212\n00:10:59.570 --> 00:11:03.350\ndon't resolve this domain locally, reach\nout to these other guys to get it, right?\n\n213\n00:11:03.350 --> 00:11:10.335\nSo I'm gonna come in here and\nI'm gonna edit the unbound.conf file.\n\n214\n00:11:10.335 --> 00:11:13.730\nAnd as you look through here, I mean,\nthere's just a ton of stuff from what your\n\n215\n00:11:13.730 --> 00:11:16.320\nlisting on and\nwhat you're talking to and so on.\n\n216\n00:11:16.320 --> 00:11:23.168\nAnd if we get to the override section,\nwhich is not too much further down.\n\n217\n00:11:23.168 --> 00:11:25.221\nI probably should have just\ndone a search to find it.\n\n218\n00:11:25.221 --> 00:11:27.633\nDid I skip it?\n\n219\n00:11:27.633 --> 00:11:29.665\nSee here's my local data segments,\n\n220\n00:11:29.665 --> 00:11:32.752\nit should be right around in\nhere where I did my include.\n\n221\n00:11:32.752 --> 00:11:38.098\nThis is the hardest part, is finding\nwhere I did my include, there we go.\n\n222\n00:11:38.098 --> 00:11:43.214\nHere's where I did my include for\nlab.itpro.tv.dns, right?\n\n223\n00:11:43.214 --> 00:11:44.750\nI referenced that file.\n\n224\n00:11:44.750 --> 00:11:46.600\nWell, I don't wanna do that anymore.\n\n225\n00:11:46.600 --> 00:11:50.830\nI don't want to include that\nfile cuz I'm gonna override.\n\n226\n00:11:50.830 --> 00:11:52.740\nSo I'm gonna comment that out, right?\n\n227\n00:11:52.740 --> 00:11:55.070\nI'll leave my ad blocking one in there,\nthat's fine.\n\n228\n00:11:55.070 --> 00:11:56.860\nOr if you're not gonna ad\nblock you can turn that off.\n\n229\n00:11:56.860 --> 00:11:59.080\nBut, I'm not gonna\ninclude this one anymore.\n\n230\n00:11:59.080 --> 00:12:03.280\nBecause instead of trying to create\nthe zone myself that only half works,\n\n231\n00:12:03.280 --> 00:12:05.990\nI'm gonna point to the zone\nsomewhere else, okay?\n\n232\n00:12:05.990 --> 00:12:07.770\nSo, now that I've got that,\n\n233\n00:12:07.770 --> 00:12:10.880\nI do need to skip down a little\nbit further in this file.\n\n234\n00:12:10.880 --> 00:12:13.930\nAnd, what we're gonna find\ndown towards the bottom\n\n235\n00:12:13.930 --> 00:12:17.200\nis a little section where it's\ngot several notes on forwarders.\n\n236\n00:12:17.200 --> 00:12:19.290\nSo if I keep scrolling down, here we go.\n\n237\n00:12:19.290 --> 00:12:22.990\nWe'll find stubzones and forward zones.\n\n238\n00:12:22.990 --> 00:12:27.190\nNow, stub zones and forward zones actually\nwork very similar, in that we say hey,\n\n239\n00:12:27.190 --> 00:12:28.140\nif I get a lookup for\n\n240\n00:12:28.140 --> 00:12:32.580\na domain instead of looking up myself,\nsend it to this other guy, right?\n\n241\n00:12:32.580 --> 00:12:36.920\nWell, the difference is,\na stub zone expects a dead end.\n\n242\n00:12:36.920 --> 00:12:38.550\nI do a lookup against this next server.\n\n243\n00:12:38.550 --> 00:12:40.100\nThe next server's gonna\nbe authoritative for\n\n244\n00:12:40.100 --> 00:12:43.410\nthe zone I'm looking for, they'll have\nthe answer and give it back to me.\n\n245\n00:12:43.410 --> 00:12:45.930\nA forward zone though, might be recursive.\n\n246\n00:12:45.930 --> 00:12:47.450\nI might forward to this other guy and\n\n247\n00:12:47.450 --> 00:12:50.500\nthey might have to go and\ntalk to other people too, right?\n\n248\n00:12:50.500 --> 00:12:52.240\nOther than that, that's really it for\nthe difference on them.\n\n249\n00:12:52.240 --> 00:12:55.570\nSo if I know it's a dead end,\nI can set it up as a stub zone.\n\n250\n00:12:55.570 --> 00:12:57.290\nIf I don't know if it's a dead end,\n\n251\n00:12:57.290 --> 00:12:59.440\nthen I can set it up as a forward zone,\nall right?\n\n252\n00:12:59.440 --> 00:13:03.027\nBut either way,\nthey're defined the same way,\n\n253\n00:13:03.027 --> 00:13:07.329\nthe only difference is whether you say,\nstub or forward.\n\n254\n00:13:07.329 --> 00:13:09.710\nAfter that,\nthe syntax is pretty much the same, right?\n\n255\n00:13:09.710 --> 00:13:11.220\nI'm gonna do mine as a forward zone.\n\n256\n00:13:12.290 --> 00:13:13.910\nAnd it's only gonna forward for\nthis one domain.\n\n257\n00:13:13.910 --> 00:13:16.330\nSo in real life land,\nI almost always do forward zones.\n\n258\n00:13:16.330 --> 00:13:18.990\nI don't really care if they recurse\non the other side, the point is,\n\n259\n00:13:18.990 --> 00:13:19.960\nI need to get this zone.\n\n260\n00:13:19.960 --> 00:13:22.895\nI don't really care where it comes from,\nas long as it's not from unbound,\n\n261\n00:13:22.895 --> 00:13:25.020\ncuz unbound's not gonna\ndo a good job with it.\n\n262\n00:13:25.020 --> 00:13:28.288\nSo I'm gonna go down here\ntowards the bottom and\n\n263\n00:13:28.288 --> 00:13:33.857\nI'm just gonna add a little block here so\nI can type and I'm gonna add a new entry.\n\n264\n00:13:33.857 --> 00:13:37.393\nAnd I'm gonna say, forward-zone.\n\n265\n00:13:37.393 --> 00:13:43.731\nAnd then name, this one is going\nto be lab.itpro.tv, all right?\n\n266\n00:13:43.731 --> 00:13:45.450\nSo that's who I'm forwarding for.\n\n267\n00:13:45.450 --> 00:13:50.360\nAnd then I'm gonna say, forward-addr and\nwho this is gonna answer, all right?\n\n268\n00:13:51.440 --> 00:13:54.980\nNow, I have BIND running\non a separate server, so\n\n269\n00:13:54.980 --> 00:13:59.470\nI can just put 10.0.222.101,\nthat's the other server.\n\n270\n00:13:59.470 --> 00:14:05.090\nAnd now, anytime I get a lookup for\nlab.itpro.tv, I'll check my cache first.\n\n271\n00:14:05.090 --> 00:14:06.670\nWe always check our cache.\n\n272\n00:14:06.670 --> 00:14:10.528\nAnd if it's not in the cache,\nI'll then hit this forwarder.\n\n273\n00:14:10.528 --> 00:14:13.280\nAnd the forwarder will send,\nnot the client,\n\n274\n00:14:13.280 --> 00:14:17.130\nbut unbound to reach out to\nthis server to get the answer.\n\n275\n00:14:17.130 --> 00:14:19.780\nIf it's a CNAME or\nwhatever it'll be properly exploded and\n\n276\n00:14:19.780 --> 00:14:24.310\nthen we can return it to the end user and\nthey get the data they want from BIND.\n\n277\n00:14:24.310 --> 00:14:27.665\nThey never talk to BIND but\nit happens, okay?\n\n278\n00:14:27.665 --> 00:14:33.259\nWe could say,\nif it was a local server, 127.0.0.1.\n\n279\n00:14:33.259 --> 00:14:37.131\nBut remember, if you specified a different\nport number, you'll need to add at and\n\n280\n00:14:37.131 --> 00:14:38.840\nthen that port number.\n\n281\n00:14:38.840 --> 00:14:42.150\nSo if I overrode the port number,\nif it was running on the same box,\n\n282\n00:14:42.150 --> 00:14:46.190\nI'd put it in like this, 127.0.0.1 at and\nthen whatever that port is.\n\n283\n00:14:46.190 --> 00:14:49.460\nOr, you can reference the IP also,\nsome people like to do that.\n\n284\n00:14:50.720 --> 00:14:53.264\nSome people like to put in the DNS name,\nyou can do that too.\n\n285\n00:14:53.264 --> 00:14:57.619\nBut I always hate to put a DNS name in\nwhen I'm working with DNS because, I mean,\n\n286\n00:14:57.619 --> 00:14:59.310\nthat should make sense right?\n\n287\n00:14:59.310 --> 00:15:01.068\nIf one breaks down,\nthe whole thing breaks down.\n\n288\n00:15:01.068 --> 00:15:05.270\nSo, usually we'll do an IP address like\nthis and then that port number, right?\n\n289\n00:15:05.270 --> 00:15:06.890\nBut if I'm pointing to an actual server,\n\n290\n00:15:06.890 --> 00:15:09.980\nit defaults to port 53,\n101's the server that I wanna hit.\n\n291\n00:15:09.980 --> 00:15:11.400\nSo now, whenever I do lookups for\n\n292\n00:15:11.400 --> 00:15:16.050\na lab.itpro.tv, it'll pull from the other\nserver and it'll cache it right here.\n\n293\n00:15:16.050 --> 00:15:18.910\nThe cache uses the time to live values.\n\n294\n00:15:18.910 --> 00:15:21.102\nAnd if I've got five minute or\nten minute time to lives,\n\n295\n00:15:21.102 --> 00:15:24.460\nthat's really gonna shrink the amount\nof lookups that BIND is gonna handle.\n\n296\n00:15:24.460 --> 00:15:28.320\nSo now, BIND is not getting\nthat many queries anymore.\n\n297\n00:15:28.320 --> 00:15:32.390\nAnd BIND isn't maintaining a cache for\nthe whole Internet.\n\n298\n00:15:32.390 --> 00:15:35.150\nBIND is only maintaining a cache for\nwhat we look up here,\n\n299\n00:15:35.150 --> 00:15:37.196\nwhich doesn't even go in\na cache cuz it's in a zone.\n\n300\n00:15:37.196 --> 00:15:42.540\nSo BIND's weak cache handling\nis no longer an issue.\n\n301\n00:15:42.540 --> 00:15:45.000\nWe've removed that,\nwe're using unbound's cache.\n\n302\n00:15:45.000 --> 00:15:50.230\nAnd unbound's weak zone handling, we've\nremoved that because it's using BIND.\n\n303\n00:15:50.230 --> 00:15:54.477\nNow I'm getting the best of both\nworlds all right from here.\n\n304\n00:15:54.477 --> 00:15:59.292\n&gt;&gt; Now, with using unbound and\nBIND on the same single server, Don, and\n\n305\n00:15:59.292 --> 00:16:02.883\nmentioning the cache here and\nhow the cache On bind,\n\n306\n00:16:02.883 --> 00:16:06.654\nif it grows far enough,\nit's gonna crash the server.\n\n307\n00:16:06.654 --> 00:16:07.810\nDo you have to worry about that?\n\n308\n00:16:07.810 --> 00:16:10.490\nI mean, I know it's probably\ndifferent memory spaces, but\n\n309\n00:16:10.490 --> 00:16:12.700\ndo you have to worry about\nhosting them on the same server,\n\n310\n00:16:12.700 --> 00:16:14.830\nthat those caches\nare gonna become a problem?\n\n311\n00:16:14.830 --> 00:16:18.290\n&gt;&gt; No, and it would be a problem\nif we were just using bind.\n\n312\n00:16:18.290 --> 00:16:20.278\nBut because I'm doing a forwarder to bind,\n\n313\n00:16:20.278 --> 00:16:23.569\nnobody's actually looking up directly\nagainst bind any more, right?\n\n314\n00:16:23.569 --> 00:16:25.843\nSo if they're not looking directly at it,\n\n315\n00:16:25.843 --> 00:16:29.332\nthe only queries I'm sending to\nit are ones for Lab.ITPro.TV.\n\n316\n00:16:29.332 --> 00:16:36.720\nAnd if that's a local zone inside a bind,\nit caches the whole zone, right?\n\n317\n00:16:36.720 --> 00:16:38.240\nAnd that's all that's\ngonna be in its cache.\n\n318\n00:16:38.240 --> 00:16:40.940\nThe cache isn't even gonna grow,\nbecause there's nothing to grow.\n\n319\n00:16:40.940 --> 00:16:43.710\nIt's gonna have just what's in that zone.\n\n320\n00:16:43.710 --> 00:16:45.970\nThe bigger the zone gets,\nthe bigger the cache is gonna get.\n\n321\n00:16:45.970 --> 00:16:49.370\nBut if you can't handle a couple\nof megs worth of zone files,\n\n322\n00:16:49.370 --> 00:16:51.880\nthen your server's garbage anyway,\nyou got different problems to have.\n\n323\n00:16:51.880 --> 00:16:55.740\nBut in this case it binds cache,\nyou ignore.\n\n324\n00:16:55.740 --> 00:16:58.750\nIt just doesn't even exist anymore\nas far as you're concerned.\n\n325\n00:16:58.750 --> 00:17:00.990\nUnbound, on the other hand,\nyou do have to worry.\n\n326\n00:17:00.990 --> 00:17:03.390\nAnd it properly sizes itself,\nit does a great job,\n\n327\n00:17:03.390 --> 00:17:05.370\nwe don't have to worry about that there.\n\n328\n00:17:05.370 --> 00:17:07.540\nAnd then the back end doesn't\nhave to be bind either.\n\n329\n00:17:07.540 --> 00:17:11.433\nThe back end could be PowerDNS or NDS,\nMicrosoft's DNS, it could be whatever.\n\n330\n00:17:11.433 --> 00:17:14.070\nIt's on a different server,\nit could be anything and\n\n331\n00:17:14.070 --> 00:17:16.080\nthat helps to alleviate that too.\n\n332\n00:17:16.080 --> 00:17:16.760\nBut at this point,\n\n333\n00:17:16.760 --> 00:17:21.100\nthose are going to get forwarded and\nnow everything should work smooth.\n\n334\n00:17:21.100 --> 00:17:23.560\nI said should,\nbecause in IT we know what happens.\n\n335\n00:17:23.560 --> 00:17:26.926\nLet me get out of my config,\nI'm gonna check that configuration.\n\n336\n00:17:26.926 --> 00:17:30.849\nAnd I'll just do a checkconf really\nquick to make sure I didn't screw it up,\n\n337\n00:17:30.849 --> 00:17:32.290\nI got no errors.\n\n338\n00:17:32.290 --> 00:17:38.600\nI will do a systemctl restart unbound,\nwe'll get that one restarted.\n\n339\n00:17:39.740 --> 00:17:40.434\nAnd then we can test it out right?\n\n340\n00:17:40.434 --> 00:17:43.945\nIf I do a look up against,\n\n341\n00:17:43.945 --> 00:17:48.640\nI guess I'll do my local server.\n\n342\n00:17:49.810 --> 00:17:52.410\nSo I'm doing a look up\nagainst my unbound server.\n\n343\n00:17:52.410 --> 00:17:57.300\nAnd I'm gonna look for, let's just start\neasy, I'll do webserver01.lab.itpro.tv.\n\n344\n00:17:57.300 --> 00:17:58.950\nAnd when I do a look up for\n\n345\n00:17:58.950 --> 00:18:02.190\nthat, it's gonna reach out to unbound and\nit's gonna get an answer.\n\n346\n00:18:02.190 --> 00:18:07.724\nNow, in unbound, I disabled the include\nthat included my local data.\n\n347\n00:18:07.724 --> 00:18:11.800\nSo how did it get this information here?\n\n348\n00:18:11.800 --> 00:18:15.360\nIt forwarded to the other server and\nit got it, right?\n\n349\n00:18:15.360 --> 00:18:20.230\nAnd if I try and pull up that CNAME, and\n\n350\n00:18:20.230 --> 00:18:23.200\nI reach out to it, it gets it.\n\n351\n00:18:23.200 --> 00:18:27.620\nIt exploded the CNAME, and\nI get the CNAME entry right there\n\n352\n00:18:27.620 --> 00:18:33.140\nfollowed by the actual IPs of\nthe machines I need to contact to.\n\n353\n00:18:33.140 --> 00:18:34.840\nUnbound can't normally do that.\n\n354\n00:18:34.840 --> 00:18:37.930\nNormally, if I ran this,\nI would see www.lab.itpro.tv IN, and\n\n355\n00:18:37.930 --> 00:18:41.260\nthat's it, and it would stop right there.\n\n356\n00:18:41.260 --> 00:18:44.930\nIt wouldn't even tell me it's a CNAME,\nit just kinda freezes, and that's it.\n\n357\n00:18:44.930 --> 00:18:46.621\nSo by putting it in this way,\n\n358\n00:18:46.621 --> 00:18:50.850\nI now get where things function\nthe way that I expect them to be.\n\n359\n00:18:50.850 --> 00:18:52.860\nAnd I never talked to bind, did I?\n\n360\n00:18:52.860 --> 00:18:56.960\nI talked to unbound and\nunbound talked to bind for me.\n\n361\n00:18:56.960 --> 00:19:01.630\nAll bind saw was a very simple query,\nhey, give me www.lab.itpro.tv.\n\n362\n00:19:01.630 --> 00:19:05.190\nAnd it didn't have to do forwards, it\ndidn't have to do lookups, it didn't have\n\n363\n00:19:05.190 --> 00:19:08.200\nto go to root hints, it just went\nright to its zone and answered me.\n\n364\n00:19:08.200 --> 00:19:13.930\nSo bind only sees one customer now,\nthe unbound server.\n\n365\n00:19:13.930 --> 00:19:17.580\nAnd then unbound is handling everything\nelse, caching it, and moving on.\n\n366\n00:19:17.580 --> 00:19:20.270\nReally straight forward, this is just\nreally not hard to set up, right?\n\n367\n00:19:20.270 --> 00:19:23.050\nAll I had to really do\nis add that forwarder.\n\n368\n00:19:23.050 --> 00:19:25.810\nOnce you' have the folder in place,\nthe rest of it is done.\n\n369\n00:19:25.810 --> 00:19:26.690\nThat's it, it's over.\n\n370\n00:19:26.690 --> 00:19:29.320\nSo very simple,\nvery easy way to go about it.\n\n371\n00:19:29.320 --> 00:19:32.630\nI've seen a lot of people use this for\ndifferent methods where, for example,\n\n372\n00:19:32.630 --> 00:19:35.690\nthey might have unbound setup as\ntheir local caching DNS server.\n\n373\n00:19:35.690 --> 00:19:39.230\nAnd then they use forwards that\npoint out to in that host for\n\n374\n00:19:39.230 --> 00:19:40.780\nthe zones that they care about.\n\n375\n00:19:40.780 --> 00:19:44.878\nAnd then that way they are able to\nmaintain things out there on the Internet.\n\n376\n00:19:44.878 --> 00:19:48.408\nMaybe if I registered something\nthrough Hover.com, and so\n\n377\n00:19:48.408 --> 00:19:51.680\nI might point right to Hover.com for\nLab.ITPro.TV.\n\n378\n00:19:51.680 --> 00:19:55.040\nAnd now everything else I cache locally,\nbut then I forward to them for\n\n379\n00:19:55.040 --> 00:19:55.860\nthat one zone.\n\n380\n00:19:55.860 --> 00:19:57.720\nThose are all different ways\nthat you can use this, but\n\n381\n00:19:57.720 --> 00:20:02.370\nthe point is by using forwarders in\nunbound, you can create a super fast,\n\n382\n00:20:02.370 --> 00:20:07.300\nsuper stable best of both worlds type of\ndeployment where you get great caching,\n\n383\n00:20:07.300 --> 00:20:10.710\nand great zone support, and\nthat's really the best way to go about it.\n\n384\n00:20:10.710 --> 00:20:11.750\n&gt;&gt; That's a really cool setup,\n\n385\n00:20:11.750 --> 00:20:15.200\nusing two pieces of software like that to\nmake your infrastructure a little better.\n\n386\n00:20:15.200 --> 00:20:18.290\nNow Don, I know that we're coming\nto the end of this episode, but\n\n387\n00:20:18.290 --> 00:20:21.530\nbefore we do, do you have any additional\nadvice you would like to give somebody if\n\n388\n00:20:21.530 --> 00:20:26.670\nthey are gonna use unbound and bind,\nand maybe even on a single server?\n\n389\n00:20:26.670 --> 00:20:27.820\n&gt;&gt; Sure, two things to worry about.\n\n390\n00:20:27.820 --> 00:20:29.380\nOne, test it out.\n\n391\n00:20:29.380 --> 00:20:31.570\nAlways test it out, make sure it works.\n\n392\n00:20:31.570 --> 00:20:34.540\nMake sure that you put everything in\nplace and that it actually does work,\n\n393\n00:20:34.540 --> 00:20:37.850\ncuz there's all sorts of little things\nthat can cause a problem on this, right?\n\n394\n00:20:37.850 --> 00:20:41.310\nFirewall, SELinux,\nthe services being started, all of that.\n\n395\n00:20:41.310 --> 00:20:45.390\nThe other thing is remember that now\nI don't just need one DNA server,\n\n396\n00:20:45.390 --> 00:20:46.400\nI need two.\n\n397\n00:20:46.400 --> 00:20:48.030\nIf one of them fails,\nI'm gonna have a problem.\n\n398\n00:20:48.030 --> 00:20:50.568\nIf unbound fails,\nit doesn't matter that bind is up and\n\n399\n00:20:50.568 --> 00:20:52.629\nrunning, nobody's looking to it, right?\n\n400\n00:20:52.629 --> 00:20:54.510\nSo I don't get redundancy there.\n\n401\n00:20:54.510 --> 00:20:59.130\nAnd if bind fails, unbound is up and\nnow we can't look up Lab.ItPro.TV and so\n\n402\n00:20:59.130 --> 00:21:00.760\nmy zone is offline.\n\n403\n00:21:00.760 --> 00:21:03.520\nSo both servers become important.\n\n404\n00:21:03.520 --> 00:21:06.380\nThey might be virtual machines, so\nwe don't worry about physical hardware.\n\n405\n00:21:06.380 --> 00:21:10.510\nBut still in software, a problem in one\nwill lead to a problem that affects\n\n406\n00:21:10.510 --> 00:21:12.240\nthe end users,\nit doesn't matter that you have two.\n\n407\n00:21:12.240 --> 00:21:15.060\nSo this is not a solution for redundancy.\n\n408\n00:21:15.060 --> 00:21:19.470\nI would wanna continue on and\nset up multiple unbound servers, and\n\n409\n00:21:19.470 --> 00:21:24.310\nthen at least one more bind\nserver that has a replica, right?\n\n410\n00:21:24.310 --> 00:21:28.160\nIt has a copy of that zone on it,\nso that we can set up a backup.\n\n411\n00:21:28.160 --> 00:21:31.120\nSo that when we have that forwarder\nin place we can get to others, and\n\n412\n00:21:31.120 --> 00:21:32.560\nget that redundancy there.\n\n413\n00:21:32.560 --> 00:21:36.930\nSo keep that in mind, what I just showed\nyou is great for functionality and\n\n414\n00:21:36.930 --> 00:21:39.500\nperformance, not great for redundancy.\n\n415\n00:21:39.500 --> 00:21:41.460\nYou still need to take extra steps there.\n\n416\n00:21:41.460 --> 00:21:42.290\n&gt;&gt; Words of wisdom.\n\n417\n00:21:42.290 --> 00:21:45.320\nDon, we appreciate you stopping by\nthe studio here, and we appreciate you,\n\n418\n00:21:45.320 --> 00:21:46.850\nthe viewer out there watching.\n\n419\n00:21:46.850 --> 00:21:50.220\nSigning out for ITPRO.TV,\nI've been your host Wes Bryan.\n\n420\n00:21:50.220 --> 00:21:51.080\n&gt;&gt; And I'm Don Pezet.\n\n421\n00:21:51.080 --> 00:21:51.601\n&gt;&gt; And we'll see you next time.\n\n422\n00:21:51.601 --> 00:21:59.419\n[MUSIC]\n\n423\n00:21:59.419 --> 00:22:02.098\n&gt;&gt; Thank you for watching ITPRO.TV.\n\n",
          "vimeoId": "195795983"
        },
        {
          "description": "In this episode, Wes and Don show the viewers how to take advantage of the benefits of bringing Unbound into combination with NSD. They demonstrate how to set up Unbound to receive and forward DNS queries to a NSD server on the same physical machine.",
          "length": "1984",
          "thumbnail": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-9-5-using_unbound_with_nsd-121516-PGM.00_32_50_02.Still001.png",
          "thumbnailMed": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-9-5-using_unbound_with_nsd-121516-PGM.00_32_50_02.Still001-med.jpg",
          "thumbnailSm": "https://itprotv-image-bucket.s3.amazonaws.com/techskills-dns/techskills-dns-9-5-using_unbound_with_nsd-121516-PGM.00_32_50_02.Still001-sm.jpg",
          "title": "Using Unbound with NSD",
          "transcript": "WEBVTT\n\n1\n00:00:00.002 --> 00:00:02.397\nWelcome to ITProTV.\n\n2\n00:00:02.397 --> 00:00:07.214\nI'm your host, Don Pezet [CROSSTALK]\n\n3\n00:00:07.214 --> 00:00:08.417\n[MUSIC]\n\n4\n00:00:08.417 --> 00:00:12.200\n&gt;&gt; You're watching ITProTV.\n\n5\n00:00:12.200 --> 00:00:15.980\n&gt;&gt; Welcome to another great episode here\nat ITProTV I'm your host, Wes Bryan.\n\n6\n00:00:15.980 --> 00:00:19.430\nAnd in today's episode, we are continuing\nthrough our DNS tech skills.\n\n7\n00:00:19.430 --> 00:00:20.820\nWe got a great episode for you today.\n\n8\n00:00:20.820 --> 00:00:23.410\nAnd joining us in the studios is\nnone other than Mr. Don Pezet.\n\n9\n00:00:23.410 --> 00:00:24.400\nDon, how you doing, sir?\n\n10\n00:00:24.400 --> 00:00:25.700\n&gt;&gt; I'm doing just swell, Wes.\n\n11\n00:00:25.700 --> 00:00:27.820\nReady to dive right back\ninto the world of DNS.\n\n12\n00:00:27.820 --> 00:00:32.290\nAnd in this episode, we're gonna be\ntaking a look at what I call the new\n\n13\n00:00:32.290 --> 00:00:36.950\nhotness in DNS, which is using unbound and\n\n14\n00:00:36.950 --> 00:00:40.050\nnsd together to provide name lookup\nservices in your environment.\n\n15\n00:00:40.050 --> 00:00:43.020\nI've mentioned it in several of the other\nDNS episodes that we've done and\n\n16\n00:00:43.020 --> 00:00:47.310\nthis is kind of becoming the got to\nsolution for companies that are out there.\n\n17\n00:00:47.310 --> 00:00:51.290\nAnd there's several of the root hint\nservers that are already doing this.\n\n18\n00:00:51.290 --> 00:00:52.977\nSo it's all the way up at that level,\n\n19\n00:00:52.977 --> 00:00:55.885\nwhere we're starting to see it\ntrickle out the rest of the way.\n\n20\n00:00:55.885 --> 00:00:59.550\nNow, just to recap real quick why the heck\nI would do this in the first place, right?\n\n21\n00:00:59.550 --> 00:01:04.560\nRemember that unbound is a recursive and\n\n22\n00:01:04.560 --> 00:01:09.670\ncaching authentication\nverifying type DNS server.\n\n23\n00:01:09.670 --> 00:01:11.840\nIt scales very well.\n\n24\n00:01:11.840 --> 00:01:15.220\nIt's written in modern programming\nlanguage that runs very fast.\n\n25\n00:01:15.220 --> 00:01:16.280\nIt's very stable.\n\n26\n00:01:16.280 --> 00:01:17.390\nIt's very small.\n\n27\n00:01:17.390 --> 00:01:19.160\nIt's not very resource intensive.\n\n28\n00:01:19.160 --> 00:01:22.180\nAnd is really,\nreally good at what it does.\n\n29\n00:01:22.180 --> 00:01:25.550\nBut the thing it doesn't do, or\nat least the thing it doesn't do well,\n\n30\n00:01:25.550 --> 00:01:26.750\nare authoritative lookups.\n\n31\n00:01:26.750 --> 00:01:28.340\nYou can actually get it to\ndo authoritative lookups,\n\n32\n00:01:28.340 --> 00:01:31.200\nI covered that back in the unbound show.\n\n33\n00:01:31.200 --> 00:01:33.220\nBut it doesn't do a good job with it.\n\n34\n00:01:33.220 --> 00:01:35.670\nMeanwhile, we got this other product, NSD.\n\n35\n00:01:35.670 --> 00:01:39.680\nAnd NSD,\nit is an authoritative name server.\n\n36\n00:01:39.680 --> 00:01:40.820\nThat's what it does specifically.\n\n37\n00:01:40.820 --> 00:01:43.650\nAnd it's written in a modern programming\nlanguage, and it scales really well.\n\n38\n00:01:43.650 --> 00:01:45.830\nIt's very fast, very stable.\n\n39\n00:01:45.830 --> 00:01:48.970\nBut it only does authoritative lookups.\n\n40\n00:01:48.970 --> 00:01:50.740\nIt doesn't do forwarders.\n\n41\n00:01:50.740 --> 00:01:53.590\nIt doesn't do cacheing and\nrecursive lookups.\n\n42\n00:01:53.590 --> 00:01:57.670\nIt only answers questions about\nthe domains that it actually hosts,\n\n43\n00:01:57.670 --> 00:02:00.050\nwhich is part of why it's so\nfast and stable, right?\n\n44\n00:02:00.050 --> 00:02:02.540\nSo neither one is a drop-in\nreplacement for Bind.\n\n45\n00:02:02.540 --> 00:02:08.150\nBind has been the go-to,\nstandby DNS server used for 30 years now.\n\n46\n00:02:08.150 --> 00:02:09.800\nIt's been around a long time.\n\n47\n00:02:09.800 --> 00:02:13.360\nBut if we take unbound and we take NSD and\n\n48\n00:02:13.360 --> 00:02:17.560\nwe put them together,\nnow we have a solution that's a fireball.\n\n49\n00:02:17.560 --> 00:02:24.020\nNow it is stable, scalable, fast,\nreliable, all the things that we want.\n\n50\n00:02:24.020 --> 00:02:25.640\nAll in an open source platform.\n\n51\n00:02:25.640 --> 00:02:28.160\nSo it really is the direction\nthat people are going.\n\n52\n00:02:28.160 --> 00:02:31.480\nAnd it sounds complex to\nhave to use two solutions.\n\n53\n00:02:31.480 --> 00:02:33.500\nAnd it doesn't have to be.\n\n54\n00:02:33.500 --> 00:02:37.590\nSo in a previous episode,\nwe saw how to use Unbound with Bind.\n\n55\n00:02:37.590 --> 00:02:39.630\nAnd I used two completely\nseparate servers.\n\n56\n00:02:39.630 --> 00:02:42.000\nOne server ran Bind, and\none server ran Unbound.\n\n57\n00:02:42.000 --> 00:02:44.740\nAnd I mentioned how you could\nrun them on the same box.\n\n58\n00:02:44.740 --> 00:02:49.000\nWell, in this video, I'm gonna show\nyou how to run Unbound and NSD.\n\n59\n00:02:49.000 --> 00:02:51.080\nAnd instead of running them\non two different boxes,\n\n60\n00:02:51.080 --> 00:02:53.500\nI'm gonna run them on the same box,\non the same machine.\n\n61\n00:02:53.500 --> 00:02:55.430\nAnd I know what you're thinking.\n\n62\n00:02:55.430 --> 00:02:57.410\nAren't you gonna take\na performance hit from that?\n\n63\n00:02:57.410 --> 00:03:00.390\nNot really, cuz it is two separate\ndatabases that are optimized\n\n64\n00:03:00.390 --> 00:03:01.370\ndifferent ways.\n\n65\n00:03:01.370 --> 00:03:05.020\nIf I were in a massive environment,\nif I were a root hint server, yes,\n\n66\n00:03:05.020 --> 00:03:08.210\nI would have separate boxes, and\nI'd have many of them, right?\n\n67\n00:03:08.210 --> 00:03:12.440\nBut if you're deploying this for\nyour company, even a large enterprise,\n\n68\n00:03:12.440 --> 00:03:15.200\nthe load on the server's not\ngonna be that significant.\n\n69\n00:03:15.200 --> 00:03:19.000\nAnd so you could deploy two servers,\none running unbound on NSD,\n\n70\n00:03:19.000 --> 00:03:22.750\nand another running unbound on NSD, and\nreplicating your zones between them.\n\n71\n00:03:22.750 --> 00:03:26.670\nAnd now you've got an amazing DNS\nlookup solution that all runs cn\n\n72\n00:03:26.670 --> 00:03:28.190\nthat small of a package.\n\n73\n00:03:28.190 --> 00:03:30.490\nAll right, well,\nenough rambling on about it.\n\n74\n00:03:30.490 --> 00:03:31.850\nLet's go and take a look at this.\n\n75\n00:03:31.850 --> 00:03:35.180\nNow, the biggest obstacle we're\ngonna bump into this challenge,\n\n76\n00:03:35.180 --> 00:03:37.740\nif we were running these\non the two separate boxes.\n\n77\n00:03:37.740 --> 00:03:39.040\nI wouldn't even film this episode.\n\n78\n00:03:39.040 --> 00:03:41.910\nI'd say just go back and\nwatch the installing NSD episode.\n\n79\n00:03:41.910 --> 00:03:43.760\nAnd go and\nwatch the installing Unbound episode.\n\n80\n00:03:43.760 --> 00:03:46.630\nAnd do it on two different servers,\nand you're done, right?\n\n81\n00:03:46.630 --> 00:03:50.310\nBut the challenge here is gonna be when\nI run two services, two DNS services,\n\n82\n00:03:50.310 --> 00:03:55.530\non the same machine, they're both\ngonna try to bond to port 53, right?\n\n83\n00:03:55.530 --> 00:03:59.690\nDNS uses TCP, and UDP port 53 by default.\n\n84\n00:03:59.690 --> 00:04:04.530\nUnbound does, Bind does,\nNSD does, heck, even DNS Mask and\n\n85\n00:04:04.530 --> 00:04:08.000\nsome of the other utilities that\npeople run will bind to those ports.\n\n86\n00:04:08.000 --> 00:04:09.400\nSo how do you run them\nboth at the same time?\n\n87\n00:04:09.400 --> 00:04:10.970\nAnd the answer is, carefully.\n\n88\n00:04:10.970 --> 00:04:14.470\nSo, [LAUGH] we just have to do a little\nplanning and kinda get it put in place.\n\n89\n00:04:14.470 --> 00:04:20.420\nNow, the key thing to think about here is\nwho is going to answer on Port 53, right?\n\n90\n00:04:20.420 --> 00:04:24.430\nWhen a client asks a question,\nwho's gonna answer?\n\n91\n00:04:24.430 --> 00:04:26.910\nWe don't want it to be NSD.\n\n92\n00:04:26.910 --> 00:04:32.030\nBecause if NSD answers, it can only answer\nquestions about the zones that it has.\n\n93\n00:04:32.030 --> 00:04:35.520\nIt can't answer any other zones,\njust the authoritative ones.\n\n94\n00:04:35.520 --> 00:04:37.000\n&gt;&gt; So if you want recursion,\n\n95\n00:04:37.000 --> 00:04:40.050\nit's gonna have to be unbound\nthat's gonna be running on Port 53?\n\n96\n00:04:40.050 --> 00:04:41.710\n&gt;&gt; Right, and\nI like the way you said that.\n\n97\n00:04:41.710 --> 00:04:42.880\nIt has to be.\n\n98\n00:04:42.880 --> 00:04:44.380\nCuz the other ways just not gonna work,\nright?\n\n99\n00:04:44.380 --> 00:04:47.690\nIf you do the look up against\na nonrecursive survey,\n\n100\n00:04:47.690 --> 00:04:50.910\nif you do a look up against NSD,\nyou can only find those domains.\n\n101\n00:04:50.910 --> 00:04:54.060\nYou'd have to basically create every\ndomain right there inside of NSD.\n\n102\n00:04:54.060 --> 00:04:55.890\nIt's not possible, right?\n\n103\n00:04:55.890 --> 00:04:59.800\nBut if we do a lookup against Unbound,\nUnbound will do a recursive lookup cuz\n\n104\n00:04:59.800 --> 00:05:02.750\nit'll reach out there on the Internet,\nit'll cache them and store them.\n\n105\n00:05:02.750 --> 00:05:06.810\nAnd then, what we can do is\nput a forwarder in Unbound\n\n106\n00:05:06.810 --> 00:05:11.800\nthat says whenever we do a lookup for\none of our authoritative domains,\n\n107\n00:05:11.800 --> 00:05:15.808\ninstead of sending it out to the Internet,\nsend it over to NSD.\n\n108\n00:05:15.808 --> 00:05:18.380\nAnd if NSD's on a separate box,\nwe just point it to that IP.\n\n109\n00:05:18.380 --> 00:05:22.890\nBut if it's on the same box,\nwe've got to point it to NSD, and\n\n110\n00:05:22.890 --> 00:05:27.460\nwe've got to point it at the port\nnumber that it's gonna be connecting,\n\n111\n00:05:27.460 --> 00:05:28.840\ncuz it's gotta run on a different port,\nright?\n\n112\n00:05:28.840 --> 00:05:30.090\nSo that's where things start\nto get a little tricky.\n\n113\n00:05:30.090 --> 00:05:32.230\nSo that's what we're gonna take\na look at right here in this episode,\n\n114\n00:05:32.230 --> 00:05:34.600\nis getting that up and going and in place.\n\n115\n00:05:34.600 --> 00:05:38.120\nNow, when we start manipulating\nport numbers and stuff,\n\n116\n00:05:38.120 --> 00:05:40.730\nthere's some challenges that we can bump\ninto that we always need to be aware of.\n\n117\n00:05:42.030 --> 00:05:44.200\nIf you're deploying this on Dbin or\n\n118\n00:05:44.200 --> 00:05:49.120\nUbuntu, it's really pretty simple,\nyou churn right through it and you do it.\n\n119\n00:05:49.120 --> 00:05:51.320\nIf you're deploying this on Centas or\n\n120\n00:05:51.320 --> 00:05:54.790\nRedHat, then you might\nhave some firewall issues.\n\n121\n00:05:54.790 --> 00:05:55.820\nProbably not.\n\n122\n00:05:55.820 --> 00:05:58.590\nYou might have some SE Linux issues.\n\n123\n00:05:58.590 --> 00:05:59.680\nProbably so.\n\n124\n00:05:59.680 --> 00:06:02.030\nSE Linux expects DNS to run on Port 53.\n\n125\n00:06:02.030 --> 00:06:03.680\nWe might be running on a 53,000.\n\n126\n00:06:03.680 --> 00:06:06.280\nSo I covered that in another episode,\nhow to get that setup.\n\n127\n00:06:06.280 --> 00:06:08.559\nIf you, actually,\nI think it was in the Unbound and\n\n128\n00:06:08.559 --> 00:06:12.270\nBind episode that I showed how to do\nthat different port number stuff.\n\n129\n00:06:12.270 --> 00:06:13.830\nNow for this example, I'm using CentOS,\n\n130\n00:06:13.830 --> 00:06:17.720\nbut I'm gonna keep it pretty much\nthe way that will work on any system.\n\n131\n00:06:17.720 --> 00:06:19.890\nThe only real difference is\ngonna be the initial install.\n\n132\n00:06:19.890 --> 00:06:24.190\nSo I need to get NSD on my system, and\nI'll need to get unbound on it, too.\n\n133\n00:06:24.190 --> 00:06:25.670\nI'll just start with NSD.\n\n134\n00:06:25.670 --> 00:06:28.830\nAnd NSD on Debian or Ubuntu,\n\n135\n00:06:28.830 --> 00:06:33.110\nwe can easily just say apt-get\ninstall NSD, and it drops right in.\n\n136\n00:06:33.110 --> 00:06:37.990\nBut on a RedHat based one,\nwe have to do a yum install, actually,\n\n137\n00:06:37.990 --> 00:06:39.300\nI need to get epel loaded on here.\n\n138\n00:06:39.300 --> 00:06:42.730\nSo I need to add the extended\npackages repository,\n\n139\n00:06:42.730 --> 00:06:45.610\nbecause that's where RedHat\nhas chosen to put NSD.\n\n140\n00:06:45.610 --> 00:06:51.170\nAnd then I can install it by just\npunching in yum install nsd.\n\n141\n00:06:51.170 --> 00:06:53.810\nAnd I'll need to enable repo epel.\n\n142\n00:06:54.950 --> 00:06:55.780\nThere we go, all right.\n\n143\n00:06:55.780 --> 00:06:57.390\nSo I'm gonna get that one installed.\n\n144\n00:06:57.390 --> 00:07:02.390\nAnd once it's installed,\nit's kinda got a default\n\n145\n00:07:02.390 --> 00:07:04.500\nconfiguration on it that's\npretty suitable for most people.\n\n146\n00:07:04.500 --> 00:07:05.593\nBut not gonna be suitable for me,\n\n147\n00:07:05.593 --> 00:07:07.680\nbecause by default it's not\ngonna be suitable for me.\n\n148\n00:07:07.680 --> 00:07:10.210\nBecause by default is gonna try and\nlisten on Port 53.\n\n149\n00:07:10.210 --> 00:07:14.570\nNow, on a RedHat based system,\nit installs, but it doesn't start.\n\n150\n00:07:14.570 --> 00:07:15.880\nSo that's not a problem.\n\n151\n00:07:15.880 --> 00:07:17.068\nBut if you're on Dbin or\n\n152\n00:07:17.068 --> 00:07:20.860\nUbuntu system, they start the service\nimmediately after install.\n\n153\n00:07:20.860 --> 00:07:24.295\nSo you basically you need to jump in there\nand stop the service as soon as you can,\n\n154\n00:07:24.295 --> 00:07:25.060\nall right?\n\n155\n00:07:25.060 --> 00:07:30.064\nSo you would do a service stop\nNSD if you're on an older system.\n\n156\n00:07:30.064 --> 00:07:36.410\nOr if you're on a newer one, you'd do\na system ctl stop nsd.service, right?\n\n157\n00:07:36.410 --> 00:07:37.898\nAnd so, you'd stop it and then cut it out.\n\n158\n00:07:37.898 --> 00:07:41.000\nIn my case, it's not running anyways,\nso that's not gonna do anything.\n\n159\n00:07:41.000 --> 00:07:44.000\nBut we stop it so that we can go and\nedit the configuration and\n\n160\n00:07:44.000 --> 00:07:45.330\nchange that port number.\n\n161\n00:07:45.330 --> 00:07:50.390\nSo I'm gonna edit /etc/nsd.nsd.com.\n\n162\n00:07:50.390 --> 00:07:53.443\nAnd you do need to be in admin\nto do this stuff, right?\n\n163\n00:07:53.443 --> 00:07:54.561\nAnd so I went ahead and\n\n164\n00:07:54.561 --> 00:07:58.180\nelevated my privileges before the show\nusing su to get to root level.\n\n165\n00:07:58.180 --> 00:08:00.948\nYou can use sudu on all these commands if\nyou want, but I'm gonna issue a lot of\n\n166\n00:08:00.948 --> 00:08:04.270\ncommands, and I'm trying to save a little\ntime, so it'll all fit in one episode.\n\n167\n00:08:04.270 --> 00:08:06.223\nSo you won't see me use sudu on these.\n\n168\n00:08:06.223 --> 00:08:09.330\nBut I'm gonna go ahead and\nedit that file, and\n\n169\n00:08:09.330 --> 00:08:13.940\nthe default file on Red Hat base symptoms,\nis well documented.\n\n170\n00:08:13.940 --> 00:08:16.330\nOn Debian and Ubunto it's actually empty.\n\n171\n00:08:16.330 --> 00:08:18.910\nSo you kinda have to [LAUGH] yourself,\nbut there's always so\n\n172\n00:08:18.910 --> 00:08:22.790\nmany that we need the server command right\nhere when you open the server sections.\n\n173\n00:08:22.790 --> 00:08:24.960\nThat's gonna have\nthe bulk of what we want.\n\n174\n00:08:24.960 --> 00:08:27.640\nI need to specify the IP\naddresses that him listening on.\n\n175\n00:08:27.640 --> 00:08:28.574\nAnd here's where it gets tricky.\n\n176\n00:08:28.574 --> 00:08:34.228\nNotice that he said the default up here,\nactually does it say it?\n\n177\n00:08:34.228 --> 00:08:34.982\nIt doesn't say it.\n\n178\n00:08:34.982 --> 00:08:36.527\nHm, here we go.\n\n179\n00:08:36.527 --> 00:08:41.241\nThe default of the wildcard\ninterface is 0000 and ::0.\n\n180\n00:08:41.241 --> 00:08:46.900\nNow, that means that it's gonna mount to\nall of the IP addresses in the system.\n\n181\n00:08:46.900 --> 00:08:48.430\nWell, with NSD,\n\n182\n00:08:48.430 --> 00:08:51.980\nI don't necessarily need all of the IP\naddresses on the system to respond.\n\n183\n00:08:51.980 --> 00:08:54.570\nBecause I don't need my end\nusers coming and talking to it.\n\n184\n00:08:54.570 --> 00:08:59.544\nSo I could really just open this up for\n\n185\n00:08:59.544 --> 00:09:04.842\nIp-address: 177.0.0.1.\n\n186\n00:09:04.842 --> 00:09:09.240\nI just wanna list it on that one address,\nand so now it's only local host.\n\n187\n00:09:09.240 --> 00:09:11.710\nBecause I'm gonna have unbound\nrunning on this host, and\n\n188\n00:09:11.710 --> 00:09:16.320\nit can do the lookup against it right\nhere, and it'll do it via that address.\n\n189\n00:09:16.320 --> 00:09:20.105\nBut if I wanna access it over the network,\nI would do ip-address, and\n\n190\n00:09:20.105 --> 00:09:23.139\nthen whatever my actual\nnetwork address happens to be.\n\n191\n00:09:23.139 --> 00:09:24.879\nSo I'll just punch that in, and so\n\n192\n00:09:24.879 --> 00:09:28.959\nnow I've got that address entered in a few\nother things we need to double check for\n\n193\n00:09:28.959 --> 00:09:31.301\nis as you scroll down,\nyou'll find do IPv4.\n\n194\n00:09:31.301 --> 00:09:34.756\nThe default is that it's on, but\nI'll uncomment it just so I know for\n\n195\n00:09:34.756 --> 00:09:36.137\na fact that it's running.\n\n196\n00:09:36.137 --> 00:09:40.553\nAnd then I get down to port: 53,\nand this is the important one.\n\n197\n00:09:40.553 --> 00:09:44.010\nI need to change it here.\n\n198\n00:09:44.010 --> 00:09:46.690\nYou probably noticed that I could have\nput the port number up when I did the IP\n\n199\n00:09:46.690 --> 00:09:48.700\naddresses, under the IP Address commands.\n\n200\n00:09:49.880 --> 00:09:53.940\nIf you don't do that for\nevery single IP that you've got,\n\n201\n00:09:53.940 --> 00:09:56.810\nthen it's still possible that\none of them might grab 53.\n\n202\n00:09:56.810 --> 00:10:01.000\nAnd that'll cause unbound\nto not start up later on.\n\n203\n00:10:01.000 --> 00:10:02.920\nSo, I'm gonna go ahead and\noverride here globally.\n\n204\n00:10:02.920 --> 00:10:05.057\nAnd instead of 53, I'm gonna use 53000.\n\n205\n00:10:05.057 --> 00:10:09.131\nNow, remember,\nyou can pick any number from 1 to 65,535,\n\n206\n00:10:09.131 --> 00:10:11.480\n1 through 1,024 are reserved.\n\n207\n00:10:11.480 --> 00:10:15.199\n1,025 through 49,000, do you remember Wes?\n\n208\n00:10:15.199 --> 00:10:15.792\n&gt;&gt; 151.\n\n209\n00:10:15.792 --> 00:10:16.478\n&gt;&gt; 151.\n\n210\n00:10:16.478 --> 00:10:20.573\n49151, those are considered registered,\nand so if you pick a port,\n\n211\n00:10:20.573 --> 00:10:23.970\nyou're supposed to pick\nsomething higher than 49151.\n\n212\n00:10:23.970 --> 00:10:26.507\nPlenty of people don't,\nbut 53000's pretty safe.\n\n213\n00:10:26.507 --> 00:10:29.523\nAll right, then after that we\nstart to get into some logging,\n\n214\n00:10:29.523 --> 00:10:31.420\nwe can tailor that if we want to.\n\n215\n00:10:31.420 --> 00:10:35.180\nOur zones directory,\nthese are all defaults for me so\n\n216\n00:10:35.180 --> 00:10:38.750\nI'm not gonna map those out\ncuz I don't really need to.\n\n217\n00:10:38.750 --> 00:10:40.830\nIf I wanted to override it, I could.\n\n218\n00:10:40.830 --> 00:10:46.193\nYou know, I didn't see, no, actually,\nI think I got everything I need there.\n\n219\n00:10:46.193 --> 00:10:48.459\nIP address being the key thing and\nthe port number,\n\n220\n00:10:48.459 --> 00:10:51.290\nthose are the main things\nthat I need to watch out for.\n\n221\n00:10:51.290 --> 00:10:54.630\nThe other thing I need to do\nis I need to create my zone.\n\n222\n00:10:54.630 --> 00:10:57.020\nNSD is gonna be my authoritative server.\n\n223\n00:10:57.020 --> 00:11:02.060\nAnd so, I'm gonna come here and\ngo all the way to the bottom of this file.\n\n224\n00:11:02.060 --> 00:11:04.510\nAnd you'll see like have an example zone.\n\n225\n00:11:04.510 --> 00:11:07.110\nAnd I'm just gonna add on\nto the end of this file so\n\n226\n00:11:07.110 --> 00:11:09.020\nthat I'll have my own\nlittle zone right here.\n\n227\n00:11:09.020 --> 00:11:12.120\nSo I'm gonna create a zone and\nI'll give it a name.\n\n228\n00:11:12.120 --> 00:11:15.890\nThe name is gonna be itprotvdemo.org,\nright.\n\n229\n00:11:15.890 --> 00:11:17.840\nSo that's the zone that\nI'm gonna be creating.\n\n230\n00:11:17.840 --> 00:11:24.970\nAnd the zone file is gonna be\nitprotvdemo.org .dns, all right?\n\n231\n00:11:24.970 --> 00:11:26.290\nI'll need to create that in a minute.\n\n232\n00:11:26.290 --> 00:11:29.670\nBut NSD is authoritative and\nit's only gonna answer for\n\n233\n00:11:29.670 --> 00:11:32.700\nthe zones it has which means it's only\ngonna answer for this one zone and\n\n234\n00:11:32.700 --> 00:11:35.540\nit's not gonna answer for\nanybody else, just that one.\n\n235\n00:11:35.540 --> 00:11:37.030\nSo let me go ahead and save that.\n\n236\n00:11:37.030 --> 00:11:39.930\nAnd then in typical Don style,\nI probably messed it up somewhere,\n\n237\n00:11:39.930 --> 00:11:44.590\nso let's do a quick nsd-checkconf.\n\n238\n00:11:44.590 --> 00:11:47.050\nAnd we can just run a quick look.\n\n239\n00:11:48.170 --> 00:11:49.930\nAnd looks like I'm good, no errors, right?\n\n240\n00:11:49.930 --> 00:11:52.814\nYou forget a semicolon or something,\nand you'll start to get errors.\n\n241\n00:11:52.814 --> 00:11:55.296\nAll right, the next thing I need to do is\nI need to create the zone for that, right?\n\n242\n00:11:55.296 --> 00:12:01.423\nSo I'm gonna go ahead and\nedit /etc/nsd/itprotvdemo.org\n\n243\n00:12:01.423 --> 00:12:07.280\n.dns that's the zone\nfilename that I specified.\n\n244\n00:12:07.280 --> 00:12:11.210\nAnd in there, I'm gonna create\na zone file which we've covered\n\n245\n00:12:11.210 --> 00:12:13.590\nnumerous times now in\nthe different episodes.\n\n246\n00:12:13.590 --> 00:12:16.200\nSo I've got one, I'm just gonna cut and\npaste in here real quick.\n\n247\n00:12:16.200 --> 00:12:20.440\nBut what you'll see is I've got\nitprotv.org is what I'm creating.\n\n248\n00:12:20.440 --> 00:12:24.600\nAnd I just created three records,\ndns1, dns2, and www,\n\n249\n00:12:24.600 --> 00:12:28.020\njust a couple of entries in here so I have\nsomething I can do lookups against, right?\n\n250\n00:12:28.020 --> 00:12:32.427\nSo that's what I've got in place,\nstraightforward, very simple zone file.\n\n251\n00:12:32.427 --> 00:12:38.330\nAll right, now that that's done,\nNSD is done.\n\n252\n00:12:38.330 --> 00:12:40.190\nIt's configured,\nit's doing everything I need it to do,\n\n253\n00:12:40.190 --> 00:12:45.970\nI just need to start it up, so I'll do\na systemctl start nsd.service, right.\n\n254\n00:12:45.970 --> 00:12:50.250\nAnd if I wanted to start a booth time,\nI need to do a systemctl enable also but\n\n255\n00:12:50.250 --> 00:12:51.870\nin my case,\nI just need to restart it for now.\n\n256\n00:12:53.420 --> 00:12:58.590\nAll right, it's a good idea to\ntest nsd before we move on, right?\n\n257\n00:12:58.590 --> 00:13:00.427\nYou don't wanna start configuring unbound,\nand if doesn't work,\n\n258\n00:13:00.427 --> 00:13:01.610\nyou don't know where the problem resides.\n\n259\n00:13:01.610 --> 00:13:03.310\nSo I'm gonna start\ntesting from right here.\n\n260\n00:13:03.310 --> 00:13:07.850\nNow when I do the test, I approve two\ndifferent IPs because I didn't necessarily\n\n261\n00:13:07.850 --> 00:13:11.660\nknow if I was gonna do unbound from this\nmachine or from a second machine, or\n\n262\n00:13:11.660 --> 00:13:15.490\nmaybe both, right, maybe I wanna run\nunbound on two different machines.\n\n263\n00:13:15.490 --> 00:13:20.350\nSo I can use the dig command to test out\nwhether my server is working, right.\n\n264\n00:13:20.350 --> 00:13:23.050\nIt's neat cuz you can kinda point\nto different servers and stuff.\n\n265\n00:13:23.050 --> 00:13:26.754\nSo for example,\nif I were to dig and do @8.8.8.8.\n\n266\n00:13:26.754 --> 00:13:30.358\nI'm doing a lookup against\nGoogle's servers and\n\n267\n00:13:30.358 --> 00:13:33.828\nI could look something\nup like www.cnn.com.\n\n268\n00:13:33.828 --> 00:13:36.030\nAnd I expect to get a response.\n\n269\n00:13:36.030 --> 00:13:36.800\nAnd here it is,\n\n270\n00:13:36.800 --> 00:13:41.450\nit's a CNAME for turner.map.fastley.net\nand it points to that IP, right?\n\n271\n00:13:41.450 --> 00:13:43.260\nTha's what I expect to see.\n\n272\n00:13:43.260 --> 00:13:48.840\nIf I do that same lookup against\nNSD I expect to get a failure, right?\n\n273\n00:13:48.840 --> 00:13:57.050\nBecause NSD is not doing, A recursive\nlookup and I'm not hosting the CNN domain.\n\n274\n00:13:57.050 --> 00:14:02.390\nSo if I change this to point to\n127.0.0.1 I can do that lookup,\n\n275\n00:14:04.540 --> 00:14:09.380\nexcept it's gonna default to port 53,\nright.\n\n276\n00:14:09.380 --> 00:14:10.960\nSo, I need to override that and\n\n277\n00:14:10.960 --> 00:14:15.090\ndo a -p 53000 so\nthat it connects on the right port.\n\n278\n00:14:15.090 --> 00:14:20.450\nAnd so now I'm gonna ask NSD\nif it's working, what CNN is.\n\n279\n00:14:20.450 --> 00:14:22.420\nAnd on this one, I should get a failure.\n\n280\n00:14:22.420 --> 00:14:28.570\nAnd I got a cnn.com IN A with no response,\nright?\n\n281\n00:14:28.570 --> 00:14:31.930\nAnd it says here WARNING, recursion\nrequested but not available, right?\n\n282\n00:14:31.930 --> 00:14:32.619\nSo that's working.\n\n283\n00:14:32.619 --> 00:14:36.538\nIf it wasn't working, if the server wasn't\nresponding, I would have got a message\n\n284\n00:14:36.538 --> 00:14:39.660\nup here saying something like\nserver fail and I didn't get that.\n\n285\n00:14:39.660 --> 00:14:42.650\nSo, but\nwe can test one to sure work, right?\n\n286\n00:14:42.650 --> 00:14:49.460\nIf I do a look up against Google for\nwww.itprotvdemo.org, right?\n\n287\n00:14:49.460 --> 00:14:52.988\nI do a lookup, and I get 64.98.145.30.\n\n288\n00:14:52.988 --> 00:14:56.696\nWell, when I pasted that\nzone file in a minute ago,\n\n289\n00:14:56.696 --> 00:14:58.948\nlet me pull that up real quick.\n\n290\n00:14:58.948 --> 00:15:05.790\nLet me see, that was itprotvdemo and\nI look at www.\n\n291\n00:15:05.790 --> 00:15:07.490\nThat's not the IP.\n\n292\n00:15:07.490 --> 00:15:10.040\nSo that's the IP that's\nout there publicly.\n\n293\n00:15:10.040 --> 00:15:13.090\nBut I have a different IP inside of NSD.\n\n294\n00:15:13.090 --> 00:15:17.096\nSo if I redo that lookup, and\nI look it up against my server.\n\n295\n00:15:17.096 --> 00:15:21.960\nwww.itprotvdemo.org.\n\n296\n00:15:23.667 --> 00:15:27.498\nI get 50.16.169.34.\n\n297\n00:15:27.498 --> 00:15:33.120\nSo NSD is working,\nit is only doing authoritative responses,\n\n298\n00:15:33.120 --> 00:15:36.260\nand it's returning the value\nright there in port 53,000.\n\n299\n00:15:36.260 --> 00:15:40.980\nSo I know that's working and\nI tested it on port 127.0.0.1.\n\n300\n00:15:40.980 --> 00:15:43.440\nIf I was testing where I was\ngonna do two separate machines,\n\n301\n00:15:43.440 --> 00:15:46.900\nI would need to make sure I use\nthe actual IP on the network, right.\n\n302\n00:15:46.900 --> 00:15:51.768\nSo I would need to change\nthis into 10.0.222.103.\n\n303\n00:15:51.768 --> 00:15:55.158\nAnd if that doesn't work, it worked for\nme, but if it didn't work.\n\n304\n00:15:55.158 --> 00:15:58.243\nThat would be where I'd need to look\nat my firewall, or SE Linux, and\n\n305\n00:15:58.243 --> 00:16:00.900\nfind out why I'm not able to connect and\nfunction.\n\n306\n00:16:00.900 --> 00:16:04.270\nBut in this case, it did work,\nnsd is done, right?\n\n307\n00:16:04.270 --> 00:16:06.457\nAnd nsd is running on a different port.\n\n308\n00:16:06.457 --> 00:16:10.457\nSo now we should be able to install\nUnbound, and Unbound should be easy.\n\n309\n00:16:10.457 --> 00:16:13.474\nCuz it could jump on port 53,\nand what do we have to do there?\n\n310\n00:16:13.474 --> 00:16:14.290\nNot much, right?\n\n311\n00:16:14.290 --> 00:16:16.670\nWe just have to get it configured and\nup and running.\n\n312\n00:16:16.670 --> 00:16:19.778\nSo, let's go in and deal with that.\n\n313\n00:16:19.778 --> 00:16:22.275\nI'll come in to a yum install nsd.\n\n314\n00:16:22.275 --> 00:16:30.150\nAnd again, on Debian, or Ubuntu, you'd say\napp-get install nsd, same basic thing.\n\n315\n00:16:30.150 --> 00:16:33.110\nWell, it's telling me that\nit is already installed.\n\n316\n00:16:33.110 --> 00:16:34.010\nI guess I installed it.\n\n317\n00:16:35.270 --> 00:16:36.430\nI'm backwards, aren't I?\n\n318\n00:16:36.430 --> 00:16:38.590\nWe've already finished NSD,\nif I can keep my mind straight.\n\n319\n00:16:38.590 --> 00:16:41.800\nI need to be installing Unbound, so\nthat's why NSD is already there.\n\n320\n00:16:41.800 --> 00:16:45.700\nSo I need to install Unbound,\nthere we go, and\n\n321\n00:16:45.700 --> 00:16:48.898\nit's gonna find it, and\nwe'll get that one installed, right?\n\n322\n00:16:48.898 --> 00:16:53.720\nOn an Ubuntu system, I would worry\nthat the service is going to start and\n\n323\n00:16:53.720 --> 00:16:55.740\nI need to stop it and\nI need to sort things out.\n\n324\n00:16:55.740 --> 00:16:58.700\nAgain, I'm on a Red Hat system,\nbut even on a Debian system,\n\n325\n00:16:58.700 --> 00:17:00.430\nI don't really care if it starts now.\n\n326\n00:17:00.430 --> 00:17:04.390\nBecause port 53 is available, I'm not\ngonna have a conflict so I'm okay, right.\n\n327\n00:17:04.390 --> 00:17:06.660\nSo unbound is in place,\n\n328\n00:17:06.660 --> 00:17:10.410\nnow I just need to get it configured and\nit's gonna be a lot like what we just saw.\n\n329\n00:17:10.410 --> 00:17:16.750\nSo I'm gonna go into\n/etc/unbound/unbound.conf,\n\n330\n00:17:16.750 --> 00:17:19.710\nand we just need to tweak a few things\nin here to get this server set up\n\n331\n00:17:19.710 --> 00:17:20.780\nthe way that we need it.\n\n332\n00:17:20.780 --> 00:17:26.100\nAnd Unbound and NSD were made by the same\npeople, they were made by NLnet Labs.\n\n333\n00:17:26.100 --> 00:17:29.660\nAnd so the nice part of this is their\nconfig files are very, very similar.\n\n334\n00:17:29.660 --> 00:17:31.400\nThere are some differences\nthat are a little annoying.\n\n335\n00:17:31.400 --> 00:17:32.500\nBut for the most part, it's the same.\n\n336\n00:17:32.500 --> 00:17:34.100\nSo see how I've got a server section?\n\n337\n00:17:34.100 --> 00:17:37.960\nAnd then in there I've got verbosity and\nlogging and all the things that we\n\n338\n00:17:37.960 --> 00:17:42.689\nsee on other systems as far as NSD is\nconcerned, you see right here in Unbound.\n\n339\n00:17:43.700 --> 00:17:47.770\nSo as I scroll down though,\none of the big differences is in nsd,\n\n340\n00:17:47.770 --> 00:17:51.880\nI did ip-address and listed the addresses\nI wanted them out to, here,\n\n341\n00:17:51.880 --> 00:17:55.120\nI have to do interface and\nthen the address.\n\n342\n00:17:55.120 --> 00:17:57.670\nI don't know why they use different\nterminology on this, but they did so\n\n343\n00:17:57.670 --> 00:17:59.630\njust be aware that it is\na little bit different.\n\n344\n00:17:59.630 --> 00:18:03.900\nBut what I could do is I could come in and\nsay interface zero zero zero zero and that\n\n345\n00:18:03.900 --> 00:18:10.310\nwould enable the whole thing by default\nit's only listing on the loop back, right.\n\n346\n00:18:10.310 --> 00:18:13.186\nSo, if I leave it alone,\nit's on loop back, that would be great.\n\n347\n00:18:13.186 --> 00:18:17.950\nIf this was NSD, if this was\nthe one that I was running just for\n\n348\n00:18:17.950 --> 00:18:21.230\ndoing those look ups but\nbecause I need network host to use this,\n\n349\n00:18:21.230 --> 00:18:26.570\nI need to add a little more, so I am going\nto come down here and just add 2 new lines\n\n350\n00:18:26.570 --> 00:18:30.900\nand I'll say interface and\nI'm gonna do 127.0.0.1.\n\n351\n00:18:30.900 --> 00:18:34.329\nAnd I'll do interface 10.0.222.103, so\n\n352\n00:18:34.329 --> 00:18:39.680\nit's gonna mount to the loop act so\nI can still use that and the IP.\n\n353\n00:18:39.680 --> 00:18:43.990\nIf I were to pull on these 2 different\nboxes, I would only do this address.\n\n354\n00:18:43.990 --> 00:18:48.060\nI wouldn't bother with the loop act But\nif I'm running on the same box,\n\n355\n00:18:48.060 --> 00:18:52.680\nwhen I do a lookup and I point to the\nloopback it stays entirely in software.\n\n356\n00:18:52.680 --> 00:18:54.430\nAnd it never touches the hardware.\n\n357\n00:18:54.430 --> 00:18:56.690\nIf I put the physical address or\n\n358\n00:18:56.690 --> 00:19:01.420\nwell the layer three address there it's\nactually gonna go to the TCP/IP stack,\n\n359\n00:19:01.420 --> 00:19:05.080\nit's gonna go down to even close to the\nhardware, all the way down to layer two.\n\n360\n00:19:05.080 --> 00:19:06.720\nAnd then come right back up again.\n\n361\n00:19:06.720 --> 00:19:07.850\nIt's a little more work.\n\n362\n00:19:07.850 --> 00:19:11.750\nSo I'll get some better performance out\nof this if I approve the loop back and\n\n363\n00:19:11.750 --> 00:19:13.180\nuse that in my forwarder here in a minute.\n\n364\n00:19:15.162 --> 00:19:16.850\nAll right, so we've got that and\nif I keep scrolling down,\n\n365\n00:19:16.850 --> 00:19:20.120\nI'll see some other things,\nlike where I can change the port number.\n\n366\n00:19:20.120 --> 00:19:23.800\nI don't need to change my port number,\nbecause I want this one on port 53.\n\n367\n00:19:23.800 --> 00:19:26.330\nI want the clients to see unbound.\n\n368\n00:19:26.330 --> 00:19:27.960\nI didn't want them to see NSD.\n\n369\n00:19:27.960 --> 00:19:29.684\nSo that's why I moved it off to 53,000.\n\n370\n00:19:30.690 --> 00:19:32.970\nAll right so I've got my IP,\n\n371\n00:19:32.970 --> 00:19:36.580\nmy port number is good,\nI do need to add some access control.\n\n372\n00:19:36.580 --> 00:19:39.000\nAnd I don't think there's any\naccess control by default.\n\n373\n00:19:39.000 --> 00:19:42.010\nSo I'm just gonna add it in\nright after the port number,\n\n374\n00:19:42.010 --> 00:19:44.540\nto dictate who's allowed\nto access this system.\n\n375\n00:19:44.540 --> 00:19:47.400\nCuz by default it's only\nanswering to itself.\n\n376\n00:19:47.400 --> 00:19:48.580\nI need to add a little more.\n\n377\n00:19:48.580 --> 00:19:51.010\nSo I'm gonna say, access-control and\n\n378\n00:19:51.010 --> 00:19:54.400\nthen from here you're gonna specify\nwho's allowed to use the server.\n\n379\n00:19:54.400 --> 00:20:01.350\nIf you don't care who can access it,\nyou can just to 0.0.0.0/0 allow, right?\n\n380\n00:20:01.350 --> 00:20:03.310\nBut if this is Internet-facing,\n\n381\n00:20:03.310 --> 00:20:06.660\nanyone in the entire planet can now\nstart using you as their DNS server.\n\n382\n00:20:06.660 --> 00:20:08.350\nAnd you could start handling\na lot of traffic you don't want.\n\n383\n00:20:08.350 --> 00:20:10.150\nThere's people, like Google,\nwho do want that.\n\n384\n00:20:10.150 --> 00:20:11.810\nThey want you do use their servers.\n\n385\n00:20:11.810 --> 00:20:14.010\nBut if this is your private server,\nyou don't want that.\n\n386\n00:20:14.010 --> 00:20:15.710\nYou wanna keep it just to your own.\n\n387\n00:20:15.710 --> 00:20:18.270\nSo instead of going super wide like that,\nyou could come in and\n\n388\n00:20:18.270 --> 00:20:22.250\nsay, access-control, and\njust put your own network.\n\n389\n00:20:22.250 --> 00:20:24.020\nNow on my network,\nI've got the 10.0.0.0 network.\n\n390\n00:20:24.020 --> 00:20:27.520\nThat's what we use here in the studio.\n\n391\n00:20:27.520 --> 00:20:30.210\nSo now I'm allowing everybody\nin the studio, right?\n\n392\n00:20:31.330 --> 00:20:35.950\nI could also do access-control and\nas soon as you add one entry,\n\n393\n00:20:35.950 --> 00:20:38.710\nyou've overwritten the default,\nso I've disabled the loop act.\n\n394\n00:20:38.710 --> 00:20:43.260\nSo if I want to do testing on the loop\nact, I'd need to add that one too, and I\n\n395\n00:20:43.260 --> 00:20:47.840\ncan add the individual address if I want,\nor I can do the whole loop act range.\n\n396\n00:20:47.840 --> 00:20:50.520\nYou know, you punch that one in, and just\nwhatever IPs you think are going to be\n\n397\n00:20:50.520 --> 00:20:52.230\ndoing lookup sequences\nthat you want to allow.\n\n398\n00:20:53.380 --> 00:20:54.260\nAll right.\n\n399\n00:20:54.260 --> 00:20:57.660\nAnd just to be positive,\nI'm gonna uncomment port 53.\n\n400\n00:20:57.660 --> 00:21:01.620\nThat's the default, but that's gonna make\nsure that we are always running on port 53\n\n401\n00:21:01.620 --> 00:21:04.480\nas long as I don't override\nit on any crazy IPs.\n\n402\n00:21:05.540 --> 00:21:09.580\nAll right, the only other gotcha I've\ngot is there's a little setting that\n\n403\n00:21:09.580 --> 00:21:12.320\nis hidden away in here and\nI can never find it when I look for it.\n\n404\n00:21:12.320 --> 00:21:13.770\nSo I always have to do a search.\n\n405\n00:21:13.770 --> 00:21:17.360\nThere's an entry in here about whether or\n\n406\n00:21:17.360 --> 00:21:21.480\nnot we're allowed to query the local host,\nokay.\n\n407\n00:21:21.480 --> 00:21:24.660\nHere it is, do not query local host and\nsee how it's turned on,\n\n408\n00:21:24.660 --> 00:21:25.740\nset to yes by default.\n\n409\n00:21:27.090 --> 00:21:32.630\nBy default, on bound will not\nallow you to query itself.\n\n410\n00:21:32.630 --> 00:21:33.960\nIt's trying to stop a loop, right?\n\n411\n00:21:33.960 --> 00:21:36.210\nIt doesn't want you getting in this\nrecursive loop over and over and\n\n412\n00:21:36.210 --> 00:21:38.210\nover again,\nwhere you're querying yourself, right?\n\n413\n00:21:38.210 --> 00:21:40.100\nSo it's got that turned off.\n\n414\n00:21:40.100 --> 00:21:45.530\nThe problem here is, I want to run\nUnbound and NSD on the same box.\n\n415\n00:21:45.530 --> 00:21:48.270\nIf I was running on two different boxes,\nI wouldn't care about this setting.\n\n416\n00:21:48.270 --> 00:21:50.490\nBut if I wanna run them\non the same machine,\n\n417\n00:21:50.490 --> 00:21:54.750\nI need unbound to do\na lookup against itself,\n\n418\n00:21:54.750 --> 00:21:58.850\nagainst the same server on a different\nport, but it's still on the same server.\n\n419\n00:21:58.850 --> 00:22:02.230\nThis isn't saying anything about\ndo not query the same port.\n\n420\n00:22:02.230 --> 00:22:04.420\nIt's saying do not query the same host.\n\n421\n00:22:04.420 --> 00:22:06.980\nAn Unbound and\nan NSD are on the same host.\n\n422\n00:22:06.980 --> 00:22:10.670\nSo I actually need to\nchange that option and\n\n423\n00:22:10.670 --> 00:22:13.810\nI'm gonna set it to,\ndo-not-query-localhost.\n\n424\n00:22:13.810 --> 00:22:18.400\nNo, and that's gonna allow us to\npush the query, the authoritative\n\n425\n00:22:18.400 --> 00:22:22.500\nqueries from unbound right over\nthe NST right here in the same box.\n\n426\n00:22:22.500 --> 00:22:23.360\nReally important settings,\n\n427\n00:22:23.360 --> 00:22:26.430\nif you miss that one this whole thing\ndoesn't work unless you're on two boxes.\n\n428\n00:22:27.710 --> 00:22:30.320\nAll right then I'm gonna add my zone.\n\n429\n00:22:30.320 --> 00:22:32.040\nI just jump all the way to\nthe bottom of this file,\n\n430\n00:22:32.040 --> 00:22:35.020\nI got the zone section is down here.\n\n431\n00:22:36.340 --> 00:22:39.980\nAnd so I am going to just come in here and\nadd a forward zone\n\n432\n00:22:42.630 --> 00:22:47.780\nand I'll set the name to\nitprotv demo dot org,\n\n433\n00:22:49.260 --> 00:22:55.480\nI'll set the forward address,\nforward addr and\n\n434\n00:22:55.480 --> 00:23:01.070\nso I am going to say if I get any lookups\nfor itprotvdemo.org I can't answer them.\n\n435\n00:23:01.070 --> 00:23:04.070\nI am going to forward them to someone\nelse, instead of doing a recursive lookup\n\n436\n00:23:04.070 --> 00:23:10.242\nI am going to forward\nthem to somebody else.\n\n437\n00:23:10.242 --> 00:23:13.030\nAnd I am going to forward them to\n127.0.0.1 and forward it to myself.\n\n438\n00:23:13.030 --> 00:23:15.190\nExactly what that last command\nsaid we couldn't do right.\n\n439\n00:23:15.190 --> 00:23:15.990\nI'm gonna do that.\n\n440\n00:23:15.990 --> 00:23:19.534\nAnd I'm using the loop back so\nthis will go super fast.\n\n441\n00:23:19.534 --> 00:23:21.430\n[INAUDIBLE] happen really quick.\n\n442\n00:23:21.430 --> 00:23:23.690\nBut I need to tell it I'm\non a different port number.\n\n443\n00:23:23.690 --> 00:23:27.070\nAnd you can see an example\nright above of how to do that.\n\n444\n00:23:27.070 --> 00:23:32.520\nAnd so it's just stick an at symbol\nfollowed by the port number.\n\n445\n00:23:32.520 --> 00:23:37.370\nSo any lookup that I get for\nITProTVDemo.org, I'm a recursive server,\n\n446\n00:23:37.370 --> 00:23:38.930\nI can send it wherever I want.\n\n447\n00:23:38.930 --> 00:23:43.045\nI'll send it to myself on port 53,000,\n\n448\n00:23:43.045 --> 00:23:48.011\nand now I'll get NSD and\nNSD can answer me for that zone.\n\n449\n00:23:48.011 --> 00:23:52.202\nIf I get a question for any other zone,\nI won't even talk to NSD.\n\n450\n00:23:52.202 --> 00:23:57.287\nSo NSD can sit there and just answer\nquestions about that one domain.\n\n451\n00:23:57.287 --> 00:23:59.005\nAnd it's perfectly fine.\n\n452\n00:23:59.005 --> 00:24:00.630\nAnd NSD doesn't have a cache.\n\n453\n00:24:00.630 --> 00:24:03.320\nBut I don't care because unbound does.\n\n454\n00:24:03.320 --> 00:24:05.670\nUnbound will cache the lookups.\n\n455\n00:24:05.670 --> 00:24:08.720\nSo when I look something up against NSD,\nit goes in my cache.\n\n456\n00:24:08.720 --> 00:24:12.390\nAnd as long as the TTL is valid,\nI won't bother NSD anymore.\n\n457\n00:24:12.390 --> 00:24:14.680\nSo NSD can sit there and\nidle most of the day,\n\n458\n00:24:14.680 --> 00:24:16.720\nwhile unbound is doing the heavy lifting.\n\n459\n00:24:16.720 --> 00:24:18.410\nAnd that's exactly what happens.\n\n460\n00:24:18.410 --> 00:24:23.720\nIn real life land, you could have millions\nof people querying a particular address,\n\n461\n00:24:23.720 --> 00:24:28.020\nand unbound will only be going\nto NSD when the TTL expires.\n\n462\n00:24:29.080 --> 00:24:29.720\nAnd that's it.\n\n463\n00:24:29.720 --> 00:24:33.610\nAnd so, NSD is only seeing lookups\nfrom one host, just from unbound.\n\n464\n00:24:33.610 --> 00:24:36.740\nAnd only at the TTL intervals,\nwhich can be five minutes.\n\n465\n00:24:36.740 --> 00:24:38.870\nThey can be an hour,\nthey can be 24 hours, right?\n\n466\n00:24:38.870 --> 00:24:40.950\nIt's whatever we choose to set them at.\n\n467\n00:24:40.950 --> 00:24:44.260\nThat means NSD idles out a lot,\nand unbound does the work.\n\n468\n00:24:44.260 --> 00:24:47.140\nAnd that's why it's okay to put these\ntwo together on the same box like this.\n\n469\n00:24:47.140 --> 00:24:51.670\nI don't worry about the performance of it,\nunless we're on a massive scale, right?\n\n470\n00:24:51.670 --> 00:24:55.570\nIf NSD is only hosting a few hundred\nrecords, they're all gonna get cached.\n\n471\n00:24:55.570 --> 00:24:56.790\nIt's not a big deal.\n\n472\n00:24:56.790 --> 00:25:00.030\nBut if NSD is hosting\nhundreds of zones and\n\n473\n00:25:00.030 --> 00:25:03.380\nmillions of records, well, that's a lot.\n\n474\n00:25:03.380 --> 00:25:04.870\nAnd it may not all get cached, and so\n\n475\n00:25:04.870 --> 00:25:07.700\nthere are gonna be more frequent lookups\nand that's when we need to split them off\n\n476\n00:25:07.700 --> 00:25:10.187\ninto separate box cuz that\ncomes down to performance.\n\n477\n00:25:10.187 --> 00:25:13.660\nBut, I've got that defined now,\nso we should be good.\n\n478\n00:25:13.660 --> 00:25:16.100\nI'm gonna get out of my config.\n\n479\n00:25:16.100 --> 00:25:18.740\nAnd you'll notice,\nI didn't configure any other folders.\n\n480\n00:25:18.740 --> 00:25:22.920\nAnd that's because by default unbound,\nwill use the root hint servers or\n\n481\n00:25:22.920 --> 00:25:25.081\nthe DNS server to find for your host.\n\n482\n00:25:25.081 --> 00:25:26.794\nWhatever's [INAUDIBLE]\nany network adapters.\n\n483\n00:25:26.794 --> 00:25:29.007\nTo be able to reach out and\ndo the forwards for you.\n\n484\n00:25:29.007 --> 00:25:31.990\nIt's set up as a caching server\nout of the box [INAUDIBLE] that.\n\n485\n00:25:31.990 --> 00:25:35.789\nAll I had to do was override\nthe lookup for itprotvdemo.org, right?\n\n486\n00:25:35.789 --> 00:25:39.044\nSo now that I've got that in place,\nI can check my config, right, so\n\n487\n00:25:39.044 --> 00:25:40.910\nI'm gonna do an unbound-checkconf.\n\n488\n00:25:43.212 --> 00:25:47.941\nAnd I got an error, okay?\n\n489\n00:25:47.941 --> 00:25:51.200\nNow, it's not my fault this time, right?\n\n490\n00:25:51.200 --> 00:25:53.750\nWhen you install unbound,\nif you install it on Debian or\n\n491\n00:25:53.750 --> 00:25:55.910\nUbuntu remember how it\nstarts automatically?\n\n492\n00:25:55.910 --> 00:25:58.720\nWhen it starts automatically,\nit creates the server identity keys,\n\n493\n00:25:58.720 --> 00:26:00.190\nthe authorization keys.\n\n494\n00:26:00.190 --> 00:26:03.580\nOn RedHat, Centas, Fedora,\nthey don't start it automatically, so\n\n495\n00:26:03.580 --> 00:26:04.670\nthe keys haven't been created.\n\n496\n00:26:04.670 --> 00:26:06.750\nSo it's giving me a warning about that.\n\n497\n00:26:06.750 --> 00:26:11.710\nIf I look in /etc/unbound,\nthere's no key file,\n\n498\n00:26:11.710 --> 00:26:13.660\nactually, there are key files in there.\n\n499\n00:26:13.660 --> 00:26:17.410\nWell, there's a root key file for the root\nhit servers but there's not one for\n\n500\n00:26:17.410 --> 00:26:18.300\nthis server, right?\n\n501\n00:26:18.300 --> 00:26:20.470\nSo my server is missing its keys.\n\n502\n00:26:20.470 --> 00:26:22.910\nThere's two ways to create it,\nI could just start the service and\n\n503\n00:26:22.910 --> 00:26:23.450\nthat would create it.\n\n504\n00:26:23.450 --> 00:26:31.090\nBut if I'm worried about checking for\nerrors, you can do unbound-control-setup.\n\n505\n00:26:31.090 --> 00:26:34.740\nAnd when you run that, it'll find\nthe missing keys and create them, right?\n\n506\n00:26:34.740 --> 00:26:36.280\nWell, it doesn't find the missing keys.\n\n507\n00:26:36.280 --> 00:26:39.620\nIt finds that the keys are missing and\ncreates them.\n\n508\n00:26:39.620 --> 00:26:42.540\nAnd now, if I go back and\nlook in that folder,\n\n509\n00:26:42.540 --> 00:26:46.830\nI've got my unbound control keys and\nmy unbound server keys, right?\n\n510\n00:26:46.830 --> 00:26:51.400\nSo now, when I rerun that check,\nno errors are found, right?\n\n511\n00:26:51.400 --> 00:26:55.290\nAnd I don't have a zone file in unbound\nbecause it's forwarding to NSD.\n\n512\n00:26:55.290 --> 00:26:58.330\nSo I don't have to check a zone,\nso I can start it up.\n\n513\n00:26:59.550 --> 00:27:00.900\nSo I will start unbound.\n\n514\n00:27:02.180 --> 00:27:07.110\nAnd now, I'm running unbound and\nNSD at the same time.\n\n515\n00:27:07.110 --> 00:27:08.990\nI didn't get any errors.\n\n516\n00:27:08.990 --> 00:27:11.080\nBecause my ports aren't overlapping.\n\n517\n00:27:11.080 --> 00:27:13.370\nOne's on port 53, one's on port 53,000.\n\n518\n00:27:13.370 --> 00:27:16.390\nI already tested the one on port 53,000.\n\n519\n00:27:16.390 --> 00:27:19.180\nLet's test the one on port 53.\n\n520\n00:27:19.180 --> 00:27:25.300\nOkay, now I know that when I did\na dig against Google servers\n\n521\n00:27:25.300 --> 00:27:30.020\nfor www.itprotvdemo.org,\n\n522\n00:27:30.020 --> 00:27:34.960\nthat when I did that lookup it\ncame back with 64.98.whatever.\n\n523\n00:27:34.960 --> 00:27:39.906\nBut when I did the lookup against our own\nserver, when I did a lookup against NSD,\n\n524\n00:27:39.906 --> 00:27:45.349\n127.0.0.1- P53000,\n\n525\n00:27:45.349 --> 00:27:51.680\nthat it came back, whoops,\nI lost my I forgot to go p, there we go.\n\n526\n00:27:51.680 --> 00:27:57.260\nSo now that I've got it,\ninstead of seeing the 64 address up here,\n\n527\n00:27:57.260 --> 00:27:58.440\nI see the 50 address.\n\n528\n00:27:58.440 --> 00:28:01.520\nThat's how I know that NSD is working,\nright?\n\n529\n00:28:01.520 --> 00:28:04.560\nIf I do a lookup against unbound,\nthe reason I'm harping on this,\n\n530\n00:28:04.560 --> 00:28:08.590\nis unbound is gonna have to forward\nto somebody to get this answer.\n\n531\n00:28:08.590 --> 00:28:10.720\nI need to know who is forwarding to.\n\n532\n00:28:10.720 --> 00:28:13.010\nIf Google have the same IP as NSD,\nwhen I go and\n\n533\n00:28:13.010 --> 00:28:15.330\ndo this lookup,\nhow do I know which one it went to?\n\n534\n00:28:15.330 --> 00:28:15.980\nI don't.\n\n535\n00:28:15.980 --> 00:28:17.566\nSo, it's a good idea to\ncreate a test record and\n\n536\n00:28:17.566 --> 00:28:20.040\npumped it out there to be able to test\nwith, to make sure it's different.\n\n537\n00:28:20.040 --> 00:28:22.803\nIn my case, I'm lucky that they're\nalready is different, right?\n\n538\n00:28:22.803 --> 00:28:26.998\nSo I know if I get the 64 address,\nthat it was forwarding to Google.\n\n539\n00:28:26.998 --> 00:28:29.326\nBut if it gets the 50 address,\n\n540\n00:28:29.326 --> 00:28:33.824\nthen it forwarded to NSD just\nlike it was supposed to, right?\n\n541\n00:28:33.824 --> 00:28:38.860\nSo I can do a dig, and\nI can point it at my own server, right?\n\n542\n00:28:38.860 --> 00:28:40.237\nI don't have to do a port.\n\n543\n00:28:40.237 --> 00:28:42.487\nBut I'm gonna do it on\npurpose just to know for\n\n544\n00:28:42.487 --> 00:28:47.005\nan absolute fact that I'm doing a lookup\nagainst port 53 and not 53,000, right?\n\n545\n00:28:47.005 --> 00:28:49.810\nAnd we wanna be certain we're\ntesting the right thing.\n\n546\n00:28:50.870 --> 00:28:52.931\nAnd I'm gonna ask it to tell me.\n\n547\n00:28:52.931 --> 00:28:53.984\nWell, we'll start with somebody else.\n\n548\n00:28:53.984 --> 00:28:56.960\nLet's start with cnn.com, right?\n\n549\n00:28:56.960 --> 00:29:01.160\nThis is gonna test whether on\nbound is forwarding at all, right?\n\n550\n00:29:01.160 --> 00:29:04.520\nIs it able to forward out to the internet\nand get root hints and get answers?\n\n551\n00:29:04.520 --> 00:29:06.570\nAnd, I do get a response, okay.\n\n552\n00:29:06.570 --> 00:29:08.952\nSo it is working properly.\n\n553\n00:29:08.952 --> 00:29:12.250\nNow, I ask for itprotvdemo.org.\n\n554\n00:29:12.250 --> 00:29:16.015\nAnd instead of forwarding\nout to the internet,\n\n555\n00:29:16.015 --> 00:29:21.204\nit should reach over to NSD and\nget the answer from there, right?\n\n556\n00:29:21.204 --> 00:29:27.237\nAnd so when I run that,\nI get 50.16.169.34.\n\n557\n00:29:27.237 --> 00:29:29.900\nThat came right out of NSD, okay?\n\n558\n00:29:29.900 --> 00:29:33.470\nSo I know NSD is working properly now.\n\n559\n00:29:33.470 --> 00:29:37.530\nAnd I can take this server and\nI can point all my clients to it.\n\n560\n00:29:37.530 --> 00:29:38.928\nAnd on the clients,\nyou just put an IP in, right?\n\n561\n00:29:38.928 --> 00:29:43.425\nSo this system Is 10.0.222.103.\n\n562\n00:29:43.425 --> 00:29:45.640\nSo I can now go around\nthe building here and\n\n563\n00:29:45.640 --> 00:29:49.643\nset every computer to use 10.0.222.103,\nto do DNS lookups.\n\n564\n00:29:49.643 --> 00:29:54.400\nAnd when they do, they're gonna hit\nthis box, and they're gonna hit unbound.\n\n565\n00:29:54.400 --> 00:29:56.280\nAnd unbound is gonna recourse\nthem up to the internet.\n\n566\n00:29:56.280 --> 00:29:58.560\nAnd it's gonna cache all\nthe values that they query.\n\n567\n00:29:58.560 --> 00:30:02.370\nAnd it's gonna start running and\noperating like a local DNS server should.\n\n568\n00:30:02.370 --> 00:30:05.396\nBut the moment somebody does a look for\nitprotvdemo.org,\n\n569\n00:30:05.396 --> 00:30:07.770\nthey're gonna hit the unbound server, and\n\n570\n00:30:07.770 --> 00:30:12.900\nits going to recourse over to NSD,\nget the answer, bring it back and\n\n571\n00:30:12.900 --> 00:30:16.700\ncash it for the next person, and\nreturn the value to the client.\n\n572\n00:30:16.700 --> 00:30:19.450\nThe client has no idea they talked to NSD,\ncuz they never did.\n\n573\n00:30:19.450 --> 00:30:22.349\nAnd they don't know about port 5300\ncuz they never connected to it.\n\n574\n00:30:22.349 --> 00:30:26.163\nThey only know about unbound, on port 53.\n\n575\n00:30:26.163 --> 00:30:29.310\nAnd then in the background,\nunbound did the rest.\n\n576\n00:30:29.310 --> 00:30:32.090\nAnd since it was all right here on\none box, I didn't even take a hit for\n\n577\n00:30:32.090 --> 00:30:33.180\nnetwork performance.\n\n578\n00:30:33.180 --> 00:30:35.290\nIt's not a 100 megabit network or\na gigabit network,\n\n579\n00:30:35.290 --> 00:30:37.120\nit's running in software, right?\n\n580\n00:30:37.120 --> 00:30:38.320\nOn the general purpose CPU.\n\n581\n00:30:38.320 --> 00:30:40.930\nSo throughput becomes no problem there.\n\n582\n00:30:40.930 --> 00:30:43.500\nI do just need to monitor load on\nthe server to make sure it's not\n\n583\n00:30:43.500 --> 00:30:44.580\ngetting burdened.\n\n584\n00:30:44.580 --> 00:30:49.530\nYou'll usually see like running out of\nRAM cuz of the cache and stuff like that.\n\n585\n00:30:49.530 --> 00:30:53.590\nBut otherwise, we've now built up\na system that's got unbound and\n\n586\n00:30:53.590 --> 00:30:56.250\nNSD, both serving up lookups.\n\n587\n00:30:56.250 --> 00:31:01.270\nAnd I've got a full replacement for\nbind here that's more stable, faster and\n\n588\n00:31:01.270 --> 00:31:02.930\nwritten with modern code.\n\n589\n00:31:02.930 --> 00:31:04.550\nIt's where you wanna be.\n\n590\n00:31:04.550 --> 00:31:07.540\n&gt;&gt; Another great example Don of\ntaking two software components,\n\n591\n00:31:07.540 --> 00:31:09.680\nmarrying them together and\ngetting a complete solution.\n\n592\n00:31:09.680 --> 00:31:12.741\nNow, it does look like we're coming\nto the end of another episode,\n\n593\n00:31:12.741 --> 00:31:16.233\nbut before we do Don, do you have any\nadditional words that you might and maybe\n\n594\n00:31:16.233 --> 00:31:19.912\neven warnings or cautions about running\nthese two pieces of software together?\n\n595\n00:31:19.912 --> 00:31:21.314\n&gt;&gt; Do be careful with,\n\n596\n00:31:21.314 --> 00:31:25.688\nunbound is generally well accepted\nacross all the platforms.\n\n597\n00:31:25.688 --> 00:31:29.550\nSo it's part of the default packages but\nyou saw with NSD that I had to go and\n\n598\n00:31:29.550 --> 00:31:31.559\npull the extra packages from Red Hat.\n\n599\n00:31:31.559 --> 00:31:34.109\nThat means that Red Hat is not\nofficially supporting yet and\n\n600\n00:31:34.109 --> 00:31:35.792\nit's because NSD is developing fast.\n\n601\n00:31:35.792 --> 00:31:39.800\nSo they went from three, which is very\nstable, to four, which was a beta.\n\n602\n00:31:39.800 --> 00:31:41.690\nAnd they switch that beta to stable, and\n\n603\n00:31:41.690 --> 00:31:43.700\nRed Hat doesn't have\ntime to evaluate it yet.\n\n604\n00:31:43.700 --> 00:31:47.860\nSo, definitely make sure that\nit's supported by your vendors,\n\n605\n00:31:47.860 --> 00:31:49.380\nbefore you start deploying it.\n\n606\n00:31:49.380 --> 00:31:52.920\nBut I'll tell you right now, NSD is\ncompletely stable and completely safe.\n\n607\n00:31:52.920 --> 00:31:55.850\nIt's being run by some of\nthe root hint servers,\n\n608\n00:31:55.850 --> 00:31:59.340\nso the people who have the biggest\nstake in the game are running it.\n\n609\n00:31:59.340 --> 00:32:02.610\nAnd now NetLabs designed is\nspecifically for doing this.\n\n610\n00:32:02.610 --> 00:32:05.110\nIf I had to deploy Linux or\n\n611\n00:32:05.110 --> 00:32:08.950\nUnix based DNS servers today,\nthis is the solution I'd use right here.\n\n612\n00:32:08.950 --> 00:32:12.920\nSo, just keep an eye on performance to see\nif you need to go to multiple boxes but\n\n613\n00:32:12.920 --> 00:32:16.160\nevery time I've done it,\na single box has been able to perform it.\n\n614\n00:32:16.160 --> 00:32:18.740\nYou'll probably wanna couple\nthis with replication also.\n\n615\n00:32:18.740 --> 00:32:23.850\nSo I would now go and stand up a second\nbox and put NSD and unbound on it.\n\n616\n00:32:23.850 --> 00:32:27.110\nAnd, on unbound we don't need\nto replicate, it's just a cache.\n\n617\n00:32:27.110 --> 00:32:30.360\nBut I could set the NSD servers to\nreplicate, so that one's a primary and\n\n618\n00:32:30.360 --> 00:32:32.240\na secondary, or master and slave.\n\n619\n00:32:32.240 --> 00:32:33.110\nAnd that way,\n\n620\n00:32:33.110 --> 00:32:38.200\nNSD has the zones stored on the back\nend that it needs to and off you go.\n\n621\n00:32:38.200 --> 00:32:39.650\nIt's a great environment.\n\n622\n00:32:39.650 --> 00:32:41.170\n&gt;&gt; Well Don more great examples.\n\n623\n00:32:41.170 --> 00:32:43.350\nWe appreciate you stopping\nby the studio and\n\n624\n00:32:43.350 --> 00:32:45.580\nwe appreciate you the viewers\nwatching out there.\n\n625\n00:32:45.580 --> 00:32:46.380\nWe're gonna go out head and\n\n626\n00:32:46.380 --> 00:32:49.460\nsign out here for ITPro TV,\nI'm been your host Wes Bryan.\n\n627\n00:32:49.460 --> 00:32:50.110\n&gt;&gt; And I'm Don Pezet.\n\n628\n00:32:50.110 --> 00:32:51.538\n&gt;&gt; And we'll see you next time.\n\n629\n00:32:51.538 --> 00:32:58.672\n[MUSIC]\n\n630\n00:32:58.672 --> 00:33:01.642\nThankyou for watching ITproTV.\n\n",
          "vimeoId": "196628408"
        }
      ],
      "title": "Unbound DNS Server"
    }
  ],
  "url": "dns",
  "vLab": false
}
